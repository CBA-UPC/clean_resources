"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[1584],{55127:function(e,n,t){t.d(n,{Z:function(){return o}});var i=t(99881),r=t(46417);function o(e){return(0,r.jsx)(i.Z,{"data-test":"alert",elevation:6,variant:"filled",severity:e.severity,sx:{marginBottom:"12px",zIndex:100},children:e.children})}},39837:function(e,n,t){t.d(n,{Z:function(){return a}});var i=t(90182),r=t(28297),o=t(46417);function a(e){return(0,o.jsxs)(i.Z,{children:[(0,o.jsx)("title",{children:"".concat(r.ZP.siteTitle," | ").concat(e.title)}),(0,o.jsx)("meta",{name:"description",content:e.description})]})}a.defaultProps={description:""}},31584:function(e,n,t){t.r(n),t.d(n,{default:);var i=t(72668),r=t(61113),o=t(58467),a=t(55127),l=t(61875),c=t(39837),s=t(28422),d=t(25258),u=t(31805),f=t(15861),m=t(29439),p=t(64687),g=t.n(p),v=t(47825),h=t(66149),x=t(96467),Z=t(85281),j=t(36241),b=t(93514),E=t(47313),y=t(18248),k=t(28297),I=t(2493),O=t(80082),T=t(15919),R=t(46417);function w(e){var n,t,i,a,l=e.media,c=(0,O.Z)().createAlert,s=(0,o.TH)(),p=(0,E.useState)(!0),w=(0,m.Z)(p,2),U=w[0],_=w[1],B=(0,E.useState)(!1),L=(0,m.Z)(B,2),M=L[0],P=L[1],W=(0,o.s0)(),A=(0,T.Z)().uploadSingle,C=(0,E.useRef)(),S=(0,E.useRef)(W),X=(0,E.useRef)(c);return d.Z.debug(U),null===(n=C.current)||void 0===n||n.on(b.mX.EXPORT,function(){var e=(0,f.Z)(g().mark((function e(n){var t,i;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.Z.info("Upload in progress"),P(!0),t=new File([n],"(edited) ".concat(null===l||void 0===l?void 0:l.title).concat("image/jpeg"===n.type?".jpg":".png"),{type:n.type}),e.next=5,A(t);case 5:i=e.sent,window.location.href="/bucket/".concat(l.bucketId,"/media/").concat(i);case 7:case"end":return e.stop()}}),e)})));return ()),null===(t=C.current)||void 0===t||t.on(b.mX.CLOSE,(function(){d.Z.info("close",M);var e=s.state||{};!M&&e.from?W(e.from):M||W("/bucket/".concat(l.bucketId))})),null===(i=C.current)||void 0===i||i.on(b.mX.ERROR_IMAGE_LOADING,(function(e){e&&d.Z.error({"UIEvent.ERROR_IMAGE_LOADING":e})})),null===(a=C.current)||void 0===a||a.on(b.mX.ERROR_WEBGL_CONTEXT_LOST,(function(e){e&&d.Z.error({"UIEvent.ERROR_WEBGL_CONTEXT_LOST":e})})),(0,E.useEffect)((function(){if(!k.TW.license)return X.current("Missing image editor configuration"),void S.current(-1);var e={container:"#editor",image:null===l||void 0===l?void 0:l.imageUrl,layout:j.isMobileOnly?"basic":"advanced",license:JSON.stringify(k.TW.license),assetBaseUrl:"/editor/",export:{filename:(0,y.Z)(),image:{enableDownload:!1,quality:.8,exportType:b.T2.BLOB}},engine:{downscaleOptions:{maxMegaPixels:{desktop:30,mobile:30}}},library:{enableUpload:!1,enableWebcam:!1}};b.M.init(e).then(().catch(()}),[null===l||void 0===l?void 0:l.imageUrl]),k.TW.license?(0,R.jsxs)("div",{style:{position:"relative",flex:1},children:[(0,R.jsx)(h.Z,{open:M,children:(0,R.jsxs)(x.Z,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,R.jsx)(Z.Z,{}),(0,R.jsx)(r.Z,{align:"center",variant:"h6",children:"Uploading Image"})]})}),(0,R.jsx)("div",{id:"editor"})]}):(0,R.jsx)(u.mg,{children:(0,R.jsxs)(v.Z,{maxWidth:"lg",children:[(0,R.jsx)(I.Z,{width:"220px"}),(0,R.jsx)(r.Z,{align:"center",variant:"h4",gutterBottom:!0,children:"Photo Editor not supported."}),(0,R.jsxs)(r.Z,{align:"center",children:["Please contact ",(0,R.jsx)("a",{href:k.ZP.appUrl.met,rel:"noreferrer",style:{color:"#0672CB",textDecoration:"none",zIndex:9999},target:"_blank",children:"support"})]})]})})}var U=t(71675);function _(){var e,n,t,f=(0,U.Z)(),m=f.restrictions,p=f.tooltipTitle,g=(0,o.UO)(),v=g.bucketId,h=g.mediaId,x=(0,O.Z)().createAlert,Z=(0,i.a)(s.QpA,{skip:!v||!h,variables:{bucketId:v,mediaId:h},onError:function(e){x("There was an issue fetching this media/image."),d.Z.error(e)}}),j=null===(e=Z.data)||void 0===e?void 0:e.bucketMedia,b=((null===j||void 0===j||null===(n=j.imageUrl)||void 0===n?void 0:n.includes(".heic"))||(null===j||void 0===j||null===(t=j.imageUrl)||void 0===t||t.includes(".tif")),null===j||void 0===j?void 0:j.imageUrl),E=!Z.called||Z.loading;if(m.imageEditor){var y=p("uploadMedia");return(0,R.jsx)(u.mg,{children:(0,R.jsx)(r.Z,{children:y})})}return E?(0,R.jsx)(u.mg,{children:(0,R.jsx)(l.Z,{})}):j?(0,R.jsxs)(u.mg,{children:[(0,R.jsx)(c.Z,{title:"Image Editor"}),j&&b&&(0,R.jsx)(w,{media:j})]}):(0,R.jsx)(u.mg,{children:(0,R.jsx)(a.Z,{children:"There was an issue loading your image."})})}}}]);