"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4610],{14610:(e,a,t)=>{t.d(a,{DsaModal:()=>ee});var s=t(50959),i=t(29132),n=t(69736),l=t(27563),d=t(7863),r=t(33837),o=t(85648),c=t(94948),m=t(40537),g=t(24071),u=(t(80378),t(46758),t(86277),t(39301),t(63852)),v=t(80956),E=t(52696),h=t(36353),N=t(10306);let x=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.AGE=1]="AGE",e[e.GEO=2]="GEO",e[e.GENDER=3]="GENDER",e[e.INTEREST=4]="INTEREST",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});const f={fromJSON:e=>({targetingTypes:globalThis.Array.isArray(null==e?void 0:e.targetingTypes)?e.targetingTypes.map((e=>function(e){switch(e){case 0:case"UNKNOWN":return x.UNKNOWN;case 1:case"AGE":return x.AGE;case 2:case"GEO":return x.GEO;case 3:case"GENDER":return x.GENDER;case 4:case"INTEREST":return x.INTEREST;default:return x.UNRECOGNIZED}}(e))):[],legalEntityName:T(e.legalEntityName)?globalThis.String(e.legalEntityName):"",showTailoredAdsSection:T(e.showTailoredAdsSection)?Boolean(e.showTailoredAdsSection):void 0}),toJSON(e){var a;const t={};return null!==(a=e.targetingTypes)&&void 0!==a&&a.length&&(t.targetingTypes=e.targetingTypes.map((e=>function(e){switch(e){case x.UNKNOWN:return"UNKNOWN";case x.AGE:return"AGE";case x.GEO:return"GEO";case x.GENDER:return"GENDER";case x.INTEREST:return"INTEREST";case x.UNRECOGNIZED:default:return"UNRECOGNIZED"}}(e)))),""!==e.legalEntityName&&(t.legalEntityName=e.legalEntityName),void 0!==e.showTailoredAdsSection&&(t.showTailoredAdsSection=e.showTailoredAdsSection),t},create:e=>f.fromPartial(e??{}),fromPartial(e){var a;const t={targetingTypes:[],legalEntityName:"",showTailoredAdsSection:void 0};return t.targetingTypes=(null===(a=e.targetingTypes)||void 0===a?void 0:a.map((e=>e)))||[],t.legalEntityName=e.legalEntityName??"",t.showTailoredAdsSection=e.showTailoredAdsSection??void 0,t}};function T(e){return null!=e}var y=t(77725),b=t(81995),j=t(86337);const p="khENZvA4G9EjpLQiINss",A="Fu87PEr0tL6oDjmw_X2H";var _=t(11527);const w=e=>{let{title:a,showTitle:t,children:s}=e;return(0,_.jsxs)("section",{className:p,children:[t&&(0,_.jsx)(n.x,{className:A,variant:"bodyMediumBold",as:"h3","aria-label":a,children:a}),s]})};var G=t(82647);const S="P9gpV_sgryfUERYOdfor",R=e=>{let{text:a,icon:t}=e;return(0,_.jsxs)(G.n,{className:S,condensed:!0,children:[t,(0,_.jsx)(n.x,{variant:"bodyMedium","aria-label":a,as:"h4",children:a})]})},I="FB2PxTNhkGbwFwYI2ufG",O="gZYgXNWbFSAAjLzGhOI9",k="eYxzC4s3Nw68RcbK7xzl",C="QrelMvam4WOTMVaO28Rl",D="_EaBFRLKy0nZJXkiRwlx",B="N77hKGzNc_lKQ5OG1EBN",U="JceC3xibcl3MHVULIK0b",M="Uk72m6OFBBdTZ3RJb0K_",F="IFqCps3krPbH25azco3F";const K=e=>{let{activeTargetingTypes:a,item:t}=e;const s=(0,g.s4)(),{openURLWithSessionTransfer:i}=(0,j.e)();return[x.AGE,x.GENDER].some((e=>a.includes(e)))?(0,_.jsxs)(w,{title:o.ag.get("ad-formats.dsa.modal.profileInfo"),showTitle:!0,children:[(0,_.jsx)(E.d,{className:F,condensedAll:!0,style:{marginBlockEnd:h.o7},children:a.map((e=>{const a=function(e){switch(e){case x.AGE:return{icon:(0,_.jsx)(u.p,{}),text:o.ag.get("ad-formats.dsa.modal.targeting.age")};case x.GENDER:return{icon:(0,_.jsx)(v.f,{}),text:o.ag.get("ad-formats.dsa.modal.targeting.gender")};default:return null}}(e);return a?(0,_.jsx)(R,{icon:a.icon,text:a.text},e):null}))}),(0,_.jsx)(n.x,{variant:"bodyMedium",semanticColor:"textSubdued","aria-label":o.ag.get("ad-formats.dsa.modal.adRelevancyAction"),children:o.ag.get("ad-formats.dsa.modal.adRelevancyAction")}),(0,_.jsxs)(N.h,{component:"button","aria-label":"Edit your Spotify profile, link",className:B,semanticColor:"textBrightAccent",onClick:()=>{var e,a;i(b.VF),s.send((0,r.u)({ad_id:t.adId,lineitem_id:null===(e=t.metadata)||void 0===e?void 0:e.lineitem_id,creative_id:null===(a=t.metadata)||void 0===a?void 0:a.creative_id,slot:t.slot,event:"event_clicked",reason:"edit_profile",surface:"ad_dsa_view"}))},standalone:!0,children:[(0,_.jsx)(n.x,{variant:"bodyMediumBold",as:"h2",children:o.ag.get("ad-formats.dsa.modal.editProfile")}),(0,_.jsx)(y.h,{semanticColor:"textBrightAccent"})]})]}):null};var W=t(80524),Z=t(53213);const z=e=>{let{activeTargetingTypes:a}=e;const t=[x.GEO,x.INTEREST].some((e=>a.includes(e)));if(!t)return null;const s=t&&a.some((e=>e===x.AGE||e===x.GENDER));return(0,_.jsx)(w,{title:o.ag.get("ad-formats.dsa.modal.otherInfo"),showTitle:s,children:(0,_.jsx)(E.d,{className:F,condensedAll:!0,children:a.map((e=>{const a=function(e){switch(e){case x.GEO:return{icon:(0,_.jsx)(W.n,{}),text:o.ag.get("ad-formats.dsa.modal.targeting.location")};case x.INTEREST:return{icon:(0,_.jsx)(Z.a,{}),text:o.ag.get("ad-formats.dsa.modal.targeting.interests")};default:return null}}(e);return a?(0,_.jsx)(R,{icon:a.icon,text:a.text},e):null}))})})},L=e=>{let{item:a}=e;const t=(0,g.s4)(),{openURLWithSessionTransfer:s}=(0,j.e)();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("hr",{className:U}),(0,_.jsx)(n.x,{className:M,variant:"titleSmall","aria-label":o.ag.get("ad-formats.dsa.modal.aboutTailoredAds"),as:"h2",children:o.ag.get("ad-formats.dsa.modal.aboutTailoredAds")}),(0,_.jsx)(n.x,{variant:"bodyMedium",semanticColor:"textSubdued","aria-label":o.ag.get("ad-formats.dsa.modal.tailoredAds"),children:o.ag.get("ad-formats.dsa.modal.tailoredAds")}),(0,_.jsxs)(N.h,{component:"button","aria-label":"Visit your privacy settings, link",className:B,semanticColor:"textBrightAccent",onClick:()=>{var e,i;s(`${b.Vx}/#tailored-ads`),t.send((0,r.u)({ad_id:a.adId,creative_id:null===(e=a.metadata)||void 0===e?void 0:e.creative_id,event:"event_clicked",lineitem_id:null===(i=a.metadata)||void 0===i?void 0:i.lineitem_id,reason:"change_preferences",request_id:a.requestId,slot:a.slot,surface:"ad_dsa_view"}))},standalone:!0,children:[(0,_.jsx)(n.x,{variant:"bodyMediumBold",as:"h2",children:o.ag.get("ad-formats.dsa.modal.privacySetting")}),(0,_.jsx)(y.h,{semanticColor:"textBrightAccent"})]})]})};var J=t(87562),P=t(85039),V=t(95812),q=t(5380);const Q="vkMQw77rXE4cp8xsAdzl",X="emw6kR941D2wReukhCAJ",Y=e=>{let{advertiser:a,legalEntityName:t}=e;const{item:s}=(0,J.x)()||{item:null},i=s&&(0,V.k6)(s)?null==s?void 0:s.images:void 0,l=(0,q.o)(i);return(0,_.jsxs)("div",{className:Q,children:[l&&(0,_.jsx)(P.Ee,{className:X,src:l,loading:"lazy"}),(0,_.jsx)(n.x,{variant:"bodyMediumBold","aria-label":a,children:a}),t&&(0,_.jsx)(n.x,{variant:"bodySmall",semanticColor:"textSubdued","aria-label":t,children:t})]})};var H=t(87051);const $=e=>{const[a,t]=(0,s.useState)(null),[i,n]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{var a;null!=e&&null!==(a=e.metadata)&&void 0!==a&&a.lineitem_id&&e.adId&&(async e=>{try{n(!0);const a=await H.getDsaAdMetadata(e);t(f.fromJSON(a)),n(!1)}catch(a){n(!1)}})({lineitemId:e.metadata.lineitem_id,adId:e.adId})}),[e]),{data:a,loading:i}},ee=e=>{let{item:a}=e;const t=(0,g.s4)(),u=(0,i.I0)(),{isOpen:v}=(0,i.v9)((e=>e.ui.dsaDialog)),{data:E,loading:h}=$(a);return(0,s.useEffect)((()=>{var e,s;t.send((0,r.u)({ad_id:a.adId,creative_id:null===(e=a.metadata)||void 0===e?void 0:e.creative_id,event:"event_viewed",lineitem_id:null===(s=a.metadata)||void 0===s?void 0:s.lineitem_id,reason:"ad_dsa_view",request_id:a.requestId,slot:a.slot,surface:"ad_dsa_view"}))}),[]),(0,_.jsxs)(m.Z,{className:I,isOpen:v,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,contentLabel:o.ag.get("ad-formats.dsa.aboutThisAd"),children:[(0,_.jsx)("div",{className:k,children:(0,_.jsx)(n.x,{"aria-label":o.ag.get("ad-formats.dsa.aboutThisAd"),variant:"titleMedium",as:"h1",children:o.ag.get("ad-formats.dsa.aboutThisAd")})}),(0,_.jsx)("hr",{className:U}),(0,_.jsx)("div",{className:O,children:h?(0,_.jsx)("div",{className:C,"data-testid":"loading-indicator",children:(0,_.jsx)(l.T,{size:"large"})}):(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(Y,{advertiser:a.metadata.advertiser,legalEntityName:null==E?void 0:E.legalEntityName}),null!=E&&E.targetingTypes.length?(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(n.x,{className:M,variant:"titleSmall",as:"h2","aria-label":o.ag.get("ad-formats.dsa.modal.adBasedInfoExplanation"),children:o.ag.get("ad-formats.dsa.modal.adBasedInfoExplanation")}),(0,_.jsx)(K,{item:a,activeTargetingTypes:null==E?void 0:E.targetingTypes}),(0,_.jsx)(z,{item:a,activeTargetingTypes:null==E?void 0:E.targetingTypes})]}):(0,_.jsx)(n.x,{className:M,as:"h2","aria-label":o.ag.get("ad-formats.dsa.modal.targeting.unknown"),tabIndex:0,children:o.ag.get("ad-formats.dsa.modal.targeting.unknown")}),(null==E?void 0:E.showTailoredAdsSection)&&(0,_.jsx)(L,{item:a})]})}),(0,_.jsx)("button",{"aria-label":o.ag.get("close_button_action"),className:D,onClick:()=>{u((0,c.ni)())},children:(0,_.jsx)(d.k,{size:"medium",semanticColor:"textBase"})})]})}}}]);
//# sourceMappingURL=4610.87be7fa5.js.map