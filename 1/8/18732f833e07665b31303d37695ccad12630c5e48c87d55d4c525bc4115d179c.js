define(["require","exports","dojo/_base/declare","CandidatePortal/Framework/WidgetBase","dijit/_Container","dojox/mvc/getStateful","Framework/Modules/Localize/getLabel","dayforce/text!/StaticViews/CandidatePortal/Cookie/CookiePreference.html","../Framework/CommonStores","../Utils/CookiesObjUtils","dojox/mvc/Output","dijit/form/TextBox","Framework/UI/Form/Button","dijit/_Widget","dojox/mvc/WidgetList","dojox/mvc/_InlineTemplateMixin","CandidatePortal/Cookie/CookiesExpanderListItem","CandidatePortal/Utils/CPTriStateCheckbox"],(function(e,o,t,i,s,n,a,l,c,r){return t("CandidatePortal.Cookie.CookiePreference",[i,s],function(){function e(e){this.templateString=l,this.isShowNecessaryCookiesLinkVisible=!0,this.isShowFunctionalCookiesLinkVisible=!0,this.isShowPerformanceCookiesLinkVisible=!0,this.namespace="",this.set("isGoogleAnalyticsEnabled",e.IsGoogleAnalyticsEnabled),this.set("isMatomoAnalyticsEnabled",e.IsMatomoAnalyticsEnabled),this.set("isShareThisEnabled",e.IsShareThisEnabled),this.set("isFacebookAuthEnabled",e.IsFacebookAuthEnabled),this.set("isLinkedInEnabled",e.IsAWLIEnabled),this.set("isSeekEnabled",e.IsSeekEnabled)}return e.prototype.startup=function(){this.inherited(arguments),this.namespace=r.CookiesObjUtils.clientNamespace,this.loadCookiesPreferences()},e.prototype.postCreate=function(){this.inherited(arguments);var e=new c.MemoryStore,o=new c.MemoryStore;this.isFacebookAuthEnabled&&e.add(r.CookiesObjUtils.getFacebookCookiesObj()),this.isGoogleAnalyticsEnabled&&o.add(r.CookiesObjUtils.getGACookiesObj()),this.isMatomoAnalyticsEnabled&&o.add(r.CookiesObjUtils.getMatomoCookiesObj()),this.isLinkedInEnabled&&e.add(r.CookiesObjUtils.getLinkedInCookiesObj()),this.isShareThisEnabled&&e.add(r.CookiesObjUtils.getShareThisCookiesObj()),this.isSeekEnabled&&e.add(r.CookiesObjUtils.getSeekCookiesObj());var t=n(e.data),i=n(o.data);this.set("functionalCookiesExpanders",t),this.set("performanceCookiesExpanders",i),t.length<=0&&(this.functionalDetailsLink.set("visible",!1),this.chkFunctionalCookiesEnabled.set("disabled",!0)),i.length<=0&&(this.performanceDetailsLink.set("visible",!1),this.chkPerformanceCookiesEnabled.set("disabled",!0));var s=new c.MemoryStore;s.add(r.CookiesObjUtils.getDayforceCookiesObj()),this.set("necessaryCookiesExpanders",n(s.data))},e.prototype.loadCookiesPreferences=function(){var e=r.CookiesObjUtils.getClientCurrentCookiePreference();if(e){if(e.Functional.Cookies.length>0)for(var o=function(o){var i=t.functionalCookiesDetails.getChildren().filter((function(t){return t.target.xrefCode===e.Functional.Cookies[o]})),s=t.performanceCookiesDetails.getChildren().filter(();i.length>0&&(i[0].cbExpander.set("checked",!0),i[0].onCbExpanderClicked()),s.length>0&&(s[0].cbExpander.set("checked",!0),s[0].onCbExpanderClicked())},t=this,i=0;i<e.Functional.Cookies.length;i++)o(i)}else this.set("chkFunctionalCookiesValue",!1),this.set("chkPerformanceCookiesValue",!1)},e.prototype.onEnableAllClicked=function(){this.chkFunctionalCookiesEnabled.set("checked",!0),this.chkPerformanceCookiesEnabled.set("checked",!0),this.toggleFunctionCookiesCheckboxes()},e.prototype.onDisableAllClicked=e.prototype.toggleFunctionCookiesCheckboxes=function(){for(var e=this.functionalCookiesDetails.getChildren(),o=0;o<e.length;o++)this.chkFunctionalCookiesEnabled.set("label",a("lblEnabled")),e[o].cbExpander.set("checked",this.chkFunctionalCookiesEnabled.checked)},e.prototype.togglePerformanceCookiesCheckboxes=function(){for(var e=this.performanceCookiesDetails.getChildren(),o=0;o<e.length;o++)this.chkPerformanceCookiesEnabled.set("label",a("lblEnabled")),e[o].cbExpander.set("checked",this.chkPerformanceCookiesEnabled.checked)},e.prototype.onToggleFunctionalCookieDetails=function(e){if("keypress"===e.type&&13===e.keyCode||"click"===e.type){var o=document.getElementsByClassName("show-functional-cookies-details-link"),t=document.getElementsByClassName("functional-cookies-section");this.isShowFunctionalCookiesLinkVisible?(o[0].textContent=a("lblHideCookieDetails"),o[0].setAttribute("aria-expanded","true"),this.set("isShowFunctionalCookiesLinkVisible",!1),t[0].classList.remove("hidden"),$(t[0]).focus()):(o[0].textContent=a("lblShowCookieDetails"),o[0].setAttribute("aria-expanded","false"),this.set("isShowFunctionalCookiesLinkVisible",!0),t[0].classList.add("hidden"),$(o[0]).focus()),null!==this.chkFunctionalCookiesEnabled.checked&&this.toggleFunctionCookiesCheckboxes()}},e.prototype.onTogglePerformanceCookieDetails=function(e){if("keypress"===e.type&&13===e.keyCode||"click"===e.type){var o=document.getElementsByClassName("show-performance-cookies-details-link"),t=document.getElementsByClassName("performance-cookies-section");this.isShowPerformanceCookiesLinkVisible?(o[0].textContent=a("lblHideCookieDetails"),o[0].setAttribute("aria-expanded","true"),this.set("isShowPerformanceCookiesLinkVisible",!1),t[0].classList.remove("hidden"),$(t[0]).focus()):(o[0].textContent=a("lblShowCookieDetails"),o[0].setAttribute("aria-expanded","false"),this.set("isShowPerformanceCookiesLinkVisible",!0),t[0].classList.add("hidden"),$(o[0]).focus()),null!==this.chkPerformanceCookiesEnabled.checked&&this.togglePerformanceCookiesCheckboxes()}},e.prototype.onToggleNecessaryCookieDetails=function(e){if("keypress"===e.type&&13===e.keyCode||"click"===e.type){var o=document.getElementsByClassName("show-necessary-cookies-details-link"),t=document.getElementsByClassName("necessary-cookies-section");this.isShowNecessaryCookiesLinkVisible?(o[0].textContent=a("lblHideCookieDetails"),o[0].setAttribute("aria-expanded","true"),this.set("isShowNecessaryCookiesLinkVisible",!1),t[0].classList.remove("hidden"),$(t[0]).focus()):(o[0].textContent=a("lblShowCookieDetails"),o[0].setAttribute("aria-expanded","false"),this.set("isShowNecessaryCookiesLinkVisible",!0),t[0].classList.add("hidden"),$(o[0]).focus())}},e.prototype.onHideNecessaryCookieDetails=function(e){("keypress"===e.type&&13===e.keyCode||"click"===e.type)&&(this.set("isHideNecessaryCookiesDetailsVisible",!1),this.set("isShowNecessaryCookiesDetailsVisible",!0),this.set("isNecessaryCookiesVisible",!1))},e.prototype.onReadMoreCookieStatement=function(e){if("keypress"===e.type&&13===e.keyCode||"click"===e.type){var o=document.getElementsByClassName("read-more-cookie-statement");o[0].classList.add("hidden"),o[0].setAttribute("aria-expanded","true");var t=document.getElementsByClassName("control-and-delete-cookie-section");t[0].classList.remove("hidden"),$(t[0]).focus()}},e.prototype.onbackToTopClicked=function(e){("keypress"===e.type&&13===e.keyCode||"click"===e.type)&&(document.getElementById("cookie-statement-section").scrollTop=0,this.getParent().focus())},e.prototype.onReadLessCookieStatement=function(e){("keypress"===e.type&&13===e.keyCode||"click"===e.type)&&(this.set("isCookieStatementReadLessVisible",!1),this.set("isCookieStatementReadMoreVisible",!0),this.set("showControlDeleteCookies",!1))},e.prototype.onSaveClicked=function(){if(r.CookiesObjUtils.toggleCandidatePortalScroll(!0),navigator.cookieEnabled){null!=this.chkFunctionalCookiesEnabled.checked&&this.toggleFunctionCookiesCheckboxes(),null!=this.chkPerformanceCookiesEnabled.checked&&this.togglePerformanceCookiesCheckboxes();for(var e=this.functionalCookiesDetails.getChildren(),o=this.performanceCookiesDetails.getChildren(),t=[],i=[],s=0;s<e.length;s++)e[s].cbExpander.checked?t.push('"'+e[s].target.xrefCode+'"'):(i.push('"'+e[s].target.xrefCode+'"'),r.CookiesObjUtils.deleteCookies(e[s].target.xrefCode));for(s=0;s<o.length;s++)o[s].cbExpander.checked?t.push('"'+o[s].target.xrefCode+'"'):(i.push('"'+o[s].target.xrefCode+'"'),r.CookiesObjUtils.deleteCookies(o[s].target.xrefCode));r.CookiesObjUtils.setClientCookiePrefValue(t,i),location.reload()}else this.getParent().hide()},e}().prototype)}));