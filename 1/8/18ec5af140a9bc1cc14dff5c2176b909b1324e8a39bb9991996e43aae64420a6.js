(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[595],{92324:6059:function(e,t,r){"use strict";r.d(t,{Z:function(){return Radio}});var n=r(52322),o=r(81436),a=r(83122);let getFirstItemBorderClass=e=>"vertical"===e?"rounded-tl-md rounded-tr-md":"rounded-tl-md rounded-bl-md",getLastItemBorderClass=function Radio(e){let{items:t,value:r,label:i,name:s,onChange:l,className:d,orientation:c="vertical"}=e;return(0,n.jsxs)(o.E,{name:s,value:r,onChange:l,className:d,children:[i&&(0,n.jsx)(o.E.Label,{className:"label-small",children:i}),(0,n.jsx)("div",{className:(0,a.AK)("mt-1 rounded-md bg-white shadow-sm","vertical"===c?"-space-y-px":"","horizontal"===c&&"flex w-fit flex-row -space-x-px"),children:t.map((e,r)=>(0,n.jsx)(o.E.Option,{value:e.value,className:e=>{let{checked:n}=e;return(0,a.AK)(0===r?getFirstItemBorderClass(c):"",r===t.length-1?getLastItemBorderClass(c):"",n?"z-10 border-gray-300 bg-gray-50":"border-gray-200","vertical"===c?"p-4":"px-4 py-2","relative flex cursor-pointer items-center border focus:outline-none")},children:t=>{let{active:r,checked:i}=t;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:(0,a.AK)(i?"bg-blue-primary border-transparent":"border-gray-300 bg-white",r?"ring-2 ring-blue-500 ring-offset-2":"","flex h-3 w-3 shrink-0 cursor-pointer items-center justify-center rounded-full border"),"aria-hidden":"true",children:(0,n.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-white"})}),(0,n.jsxs)("div",{className:"ml-3 flex w-full items-center justify-between",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(o.E.Label,{as:"span",className:"block text-sm font-medium text-gray-900",children:e.name}),i&&(0,n.jsx)(o.E.Description,{as:"span",className:(0,a.AK)(i?"text-gray-600":"text-gray-500","block text-sm"),children:e.description})]}),e.Icon&&(0,n.jsx)(e.Icon,{className:"ml-2 shrink-0"})]})]})}},e.value))})]})}},3322:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return O},default:function(){return P}});var n=r(52322),o=r(79392),a=r(2784),i=r(56958),s=r(32517),l=r(52934),d=r(77815);r(5546);let c=["addressOne","addressTwo","annualRevenue","campaignId","city","comments","company","country","department","employees","fax","firstName","industry","isDoNotCall","isDoNotEmail","isReviewed","isStarred","jobTitle","lastName","notes","optedOut","phone","prospectAccountId","salesforceId","salesforceOwnerId","salutation","score","source","state","territory","userId","website","yearsInBusiness","zip","profileId"];var p=r(81571),m=r(21254),f=r(20851),g=r(77512),v=r(47128),h=r(99219),b=r(91077),x=r(27425),w=r(34126),y=r(86414),E=r(53954),j=r(25088),k=r(6059);let formatOAuthSignInUrl=e=>{let{clientId:t,state:r,env:n}=e;return"".concat((0,v.Fj)(n),"?").concat(w.stringify({redirect_uri:v.Wg,client_id:t,response_type:"code",state:r,scopes:"pardot_api"}))};var R=r(64766),C=r(97185),N=r(47330);let I={name:"Pardot",screenshot:"https://www.navattic.com/img/integrations/pardot_screenshot.png",allowTestConnection:!0,webhookFormat:N.M8.Pardot,Logo:ConnectComponent:e=>{let{clientId:t,integrationSettings:r}=e,{workspace:o}=(0,E.cF)(),{Logo:i}=r,[l,d]=(0,a.useState)("production"),goToSalesforceLogin=()=>{if(!t)return;if(!(null==o?void 0:o.slug)){(0,s.Rn)("Need workspace slug");return}y.Z.track("pardot_integration_oauth_clicked");let e=(0,j.c_)({workspaceSlug:o.slug,env:l});window.location.href=formatOAuthSignInUrl({clientId:t,env:l,state:e})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("form",{onSubmit:children:[(0,n.jsx)("h4",{className:"mb-1 text-base font-semibold",children:"Connect Navattic to Pardot"}),(0,n.jsx)("div",{className:"mb-3 text-sm text-gray-600",children:"Pardot will prompt you to grant read/write permission on objects, layouts, and permissions."}),(0,n.jsx)(k.Z,{label:"Environment",items:v.fX,value:l,onChange:d,orientation:"horizontal"}),(0,n.jsxs)("button",{className:"btn-white mt-7 bg-white font-medium shadow",type:"submit",children:[(0,n.jsx)(i,{className:"mr-2 h-4 w-4"}),"Connect to Pardot"]})]})})},ConfigurationComponent:function(e){let{webhook:t,integrationSettings:r}=e,[,o]=(0,l.I)(),[w,y]=(0,a.useState)([]),[E,j]=(0,a.useState)([]),[{data:k}]=(0,d.x)({variables:{workspaceId:t.workspaceId}}),R=(0,a.useMemo)(()=>(0,f.OA)(t.config||"{}")||p.ZJ,[t.config]);(0,a.useEffect)(()=>{let e=(0,v.Ed)((null==k?void 0:k.formFieldMetadata)||[]),t=Object.keys(R.prospectFieldMappings).map(e=>({name:e,id:e})),r=t.filter(;j([...e,...r])},[null==k?void 0:k.formFieldMetadata,R.prospectFieldMappings]),(0,a.useEffect)(()=>{fetch("/api/integration/pardot/fields?id=".concat(t.id)).then(.then(},[t.id,t.config]);let[C,N]=(0,a.useState)(Object.entries(R.prospectFieldMappings).map((e,t)=>{let[r,n]=e;return{id:t.toString(),from:r,to:n}})),I=(0,a.useCallback)(async()=>C.some(?i.A.error("There are still unfilled mappings. Please fill or delete them."):i.A.promise(o({id:t.id,config:(0,m.au)({...R,prospectFieldMappings:Object.fromEntries(C.map()})}).then(e=>{if(null==e?void 0:e.error)throw Error("Error saving: ".concat(e.error.message))}),{success:"Saved Pardot configuration!",loading:"Saving Pardot configuration...",error:s.bW}),[R,C,o,t.id]),O=(0,a.useMemo)(()=>({Contacts:{fromOptions:E.map(,toOptions:w.map(,mappings:C,onChange:N,fromIcon:()=>(0,n.jsx)(b.H,{className:"shrink-0",white:!1,height:15}),toIcon:r.Logo,onCreateFromOption:e=>j(,preventDuplicates:!0}}),[E,C,w,r.Logo]),P=C.some(;return(0,n.jsxs)("div",{className:"mx-auto flex max-w-[440px] flex-col space-y-3",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)(g.oi,{labelText:"Business Unit ID",value:R.businessUnitId,onChange:placeholder:"Your Business Unit ID",disabled:P}),P&&(0,n.jsx)("small",{className:"",children:"Disabled when any custom fields are being mapped to."})]}),(null==k?void 0:k.formFieldMetadata)?R.businessUnitId&&(0,n.jsx)(x.Z,{tabs:O}):(0,n.jsxs)("div",{className:"mt-2 flex flex-row items-center justify-center space-x-2 text-sm text-gray-500",children:[(0,n.jsx)(h.L4p,{className:"h-3 w-3"}),(0,n.jsx)("span",{children:"Loading data..."})]}),(0,n.jsxs)("button",{onClick:I,className:"btn-white w-full justify-center bg-white font-medium shadow",children:[(0,n.jsx)(r.Logo,{className:"mr-2"}),"Save configuration"]})]})}};function PardotIntegrationPage(e){return(0,n.jsx)(R.Z,{integrationSettings:I,clientId:e.clientId})}PardotIntegrationPage.getLayout=var O=!0,P=PardotIntegrationPage},25088:function(e,t,r){"use strict";r.d(t,{c_:function(){return storeSalesforceInfo}}),r(83122),r(77262);var n=r(35196),o=r(34126),a=r(13077);r(34406);let storeSalesforceInfo=,81436:function(e,t,r){"use strict";r.d(t,{E:);var n,o,a=r(2784),i=r(90544),s=r(80586),l=r(3703),d=r(88064),c=r(99108),p=r(52929),m=r(57870),f=r(33401),g=r(55559);let v=(0,a.createContext)(null);function label_H(){let[e,t]=(0,a.useState)([]);return[e.length>0?e.join(" "):void 0,(0,a.useMemo)([t])]}let h=Object.assign((0,i.yV)(function(e,t){let r=(0,s.M)(),{id:n=`headlessui-label-${r}`,passive:o=!1,...l}=e,c=function u(){let e=(0,a.useContext)(v);if(null===e){let e=Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,u),e}return e}(),p=(0,f.T)(t);(0,d.e)([n,c.register]);let m={ref:p,...c.props,id:n};return o&&("onClick"in m&&(delete m.htmlFor,delete m.onClick),"onClick"in l&&delete l.onClick),(0,i.sY)({ourProps:m,theirProps:l,slot:c.slot||{},defaultTag:"label",name:c.name||"Label"})}),{});var b=r(46465),x=r(68685),w=r(36799),y=r(60567),E=r(29833),j=r(84407),k=r(15426),R=r(61742),C=r(58314),N=((n=N||{})[n.RegisterOption=0]="RegisterOption",n[n.UnregisterOption=1]="UnregisterOption",n);let I={0(e,t){let r=[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...e,options:(0,p.z2)(r,e=>e.element.current)}},1,O=(0,a.createContext)(null);O.displayName="RadioGroupDataContext";let P=(0,a.createContext)(null);.displayName="RadioGroupActionsContext";var T=((o=T||{})[o.Empty=1]="Empty",o[o.Active=2]="Active",o);let _=Object.assign((0,i.yV)(function(e,t){let r=(0,s.M)(),{id:n=`headlessui-radiogroup-${r}`,value:o,defaultValue:l,name:d,onChange:m,by:v=disabled:h=!1,...k}=e,R=(0,g.z)("string"==typeof v?v),[N,I]=(0,a.useReducer)(ke,{options:[]}),T=N.options,[_,S]=label_H(),[A,F]=(0,b.f)(),L=(0,a.useRef)(null),M=(0,f.T)(L,t),[D,z]=(0,j.q)(o,m,l),G=(0,a.useMemo)([T]),U=(0,a.useMemo)([T,D]),B=(0,g.z)(;(0,x.B)({container:L.current,accept:walk);let Z=(0,g.z)(e=>{let t=L.current;if(!t)return;let r=(0,E.r)(t),n=T.filter(.map(;switch(e.key){case c.R.Enter:(0,y.g)(e.currentTarget);break;case c.R.ArrowLeft:case c.R.ArrowUp:if(e.preventDefault(),e.stopPropagation(),(0,p.jA)(n,p.TO.Previous|p.TO.WrapAround)===p.fE.Success){let e=T.find(e=>e.element.current===(null==r?void 0:r.activeElement));e&&B(e.propsRef.current.value)}break;case c.R.ArrowRight:case c.R.ArrowDown:if(e.preventDefault(),e.stopPropagation(),(0,p.jA)(n,p.TO.Next|p.TO.WrapAround)===p.fE.Success){let e=T.find(e=>e.element.current===(null==r?void 0:r.activeElement));e&&B(e.propsRef.current.value)}break;case c.R.Space:{e.preventDefault(),e.stopPropagation();let t=T.find(;t&&B(t.propsRef.current.value)}}}),K=(0,g.z)(,H=(0,a.useMemo)([D,G,U,h,R,N]),V=(0,a.useMemo)([K,B]),Y=(0,a.useMemo)([D]),$=(0,a.useRef)(null),W=(0,C.G)();return(0,a.useEffect)(()=>{$.current&&void 0!==l&&W.addEventListener($.current,"reset",},[$,B]),a.createElement(F,{name:"RadioGroup.Description"},a.createElement(S,{name:"RadioGroup.Label"},a.createElement(P.Provider,{value:V},a.createElement(O.Provider,{value:H},null!=d&&null!=D&&(0,y.t)({[d]:D}).map(([e,t],r)=>a.createElement(w._,{features:w.A.Hidden,ref:0===r?void 0,...(0,i.oA)({key:e,as:"input",type:"radio",checked:null!=t,hidden:!0,readOnly:!0,name:e,value:t})})),(0,i.sY)({ourProps:{ref:M,id:n,role:"radiogroup","aria-labelledby":_,"aria-describedby":A,onKeyDown:Z},theirProps:k,slot:Y,defaultTag:"div",name:"RadioGroup"})))))}),{Option:(0,i.yV)(function(e,t){var r;let n=(0,s.M)(),{id:o=`headlessui-radiogroup-option-${n}`,value:l,disabled:c=!1,...p}=e,v=(0,a.useRef)(null),h=(0,f.T)(v,t),[x,w]=label_H(),[y,E]=(0,b.f)(),{addFlag:j,removeFlag:C,hasFlag:N}=(0,m.V)(1),I=(0,R.E)({value:l,disabled:c}),T=function oe(e){let t=(0,a.useContext)(O);if(null===t){let t=Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,oe),t}return t}("RadioGroup.Option"),_=function ne(e){let t=(0,a.useContext)(P);if(null===t){let t=Error(`<${e} /> is missing a parent <RadioGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,ne),t}return t}("RadioGroup.Option");(0,d.e)([o,_,v,e]);let S=(0,g.z)(e=>{var t;if((0,k.P)(e.currentTarget))return e.preventDefault();_.change(l)&&(j(2),null==(t=v.current)||t.focus())}),A=(0,g.z)(e=>{if((0,k.P)(e.currentTarget))return e.preventDefault();j(2)}),F=(0,g.z)(,L=(null==(r=T.firstOption)?void 0:r.id)===o,M=T.disabled||c,D=T.compare(T.value,l),z={ref:h,id:o,role:"radio","aria-checked":D?"true":"false","aria-labelledby":x,"aria-describedby":y,"aria-disabled":!!M||void 0,tabIndex:M?-1:D||!T.containsCheckedOption&&L?0:-1,onClick:M?void 0:S,onFocus:M?void 0:A,onBlur:M?void 0:F},G=(0,a.useMemo)([D,M,N]);return a.createElement(E,{name:"RadioGroup.Description"},a.createElement(w,{name:"RadioGroup.Label"},(0,i.sY)({ourProps:z,theirProps:p,slot:G,defaultTag:"div",name:"RadioGroup.Option"})))}),Label:h,Description:b.d})}},);
//# sourceMappingURL=pardot-0d17683e4c4cd602.js.map