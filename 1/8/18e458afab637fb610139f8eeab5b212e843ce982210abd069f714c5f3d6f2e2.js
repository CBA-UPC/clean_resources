"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[708],{81952:(e,i,t)=>{t.d(i,{I:()=>P});var s=t(80552),l=t(50959),r=t(85648),n=(t(80378),t(58465),t(46758),t(53321),t(45205),t(27082),t(86277),t(2836),t(82187)),a=t.n(n),d=t(75802),c=t(69736),o=t(87025),u=t(80859),m=t(20580),x=t(49857),h=t(2800),j=t(76981);var p=t(6807),v=t(14892);const g="BkpKedcdaMGbvgXMlmcg",y="muYk5XIwKmqR9iNibk_f",f="OEFWODerafYHGp09iLlA",b="m20ShRDiGGDpJ5LSABTi",k="Hvv0e7WKQ4kyftgSQJhg",I="yxf_6IsQEmHjijEBUMTP",w="oaNVBli46GtVjaQKB15g",E="JdlKTdpMquftpMwwegZo",N="Nts_ArOCGeROTDZND3M6",R="FvDsfgxSvLvL3q8d7nQv";var C=t(11527);const A=e=>{let{items:i,activeItemId:t}=e;return(0,C.jsx)(p.v,{children:i.map((e=>e.disabled?(0,C.jsx)(v.s,{disabled:!0,role:"menuitemradio",className:I,onClick:e.handleClick,children:e.title},e.uri):(0,C.jsx)(v.s,{role:"menuitemradio",to:e.to,end:!0,"aria-checked":e.itemId===t,className:e=>{let{isActive:i}=e;return a()(I,{[w]:i})},onClick:e.handleClick,children:e.title},e.uri)))})};var T=t(64634);const S=(0,l.memo)((function(e){let{isCentered:i,links:t,landmarkLabel:s,className:n}=e;const p=(0,l.useRef)(null),[v,I]=(0,l.useState)([]),[S,U]=(0,l.useState)(0),[O,_]=(0,l.useState)([]),B=function(){const[e,i]=(0,l.useState)(window.innerWidth),{scrollNodeChildRef:t}=(0,l.useContext)(h.VX),s=(0,x.y1)((e=>{null!=e&&e.width&&i(e.width)}),250);return(0,j.y)({refOrElement:t,observeOnly:"width",onResize:s}),e}()??1/0,{pathname:M}=(0,d.TH)(),P=t.find((e=>e.to===M));return(0,l.useEffect)((()=>{p.current&&U(p.current.clientWidth)}),[B]),(0,l.useEffect)((()=>{if(!p.current)return;const e=Array.from(p.current.children).map((e=>e.clientWidth));I(e)}),[t]),(0,l.useEffect)((()=>{if(!p.current)return;if(v.slice(0,-1).reduce(((e,i)=>e+i),0)<=S)return void _([]);const e=v.reduce(((e,i)=>e>i?e:i),0),i=[];let t=e;v.forEach(((e,s)=>{S>=t+e?t+=e:i.push(s)})),_(i)}),[S,v]),(0,C.jsx)("nav",{className:a()(n,g),"aria-label":s,children:(0,C.jsxs)("ul",{className:i?y:N,ref:p,children:[t.filter(((e,i)=>!O.includes(i))).map((e=>{const i=(null==e?void 0:e.render)??(e=>e);return(0,C.jsx)(l.Fragment,{children:i((0,C.jsx)("li",{className:f,children:e.disabled?(0,C.jsx)("div",{className:E,children:(0,C.jsx)(c.x,{variant:"bodySmallBold",children:e.title})}):(0,C.jsx)(T.O,{end:!0,className:e=>{let{isActive:i}=e;return a()(E,{[w]:i})},to:e.to,onClick:e.handleClick,children:(0,C.jsx)(c.x,{variant:"bodySmallBold",children:e.title})})}))},e.to)})),O.length||0===v.length?(0,C.jsx)("li",{className:f,children:(0,C.jsx)(m.xV,{renderInline:!0,menu:(0,C.jsx)(A,{items:t.filter(((e,i)=>O.includes(i))),activeItemId:null==P?void 0:P.itemId}),children:(e,i,t)=>(0,C.jsxs)("button",{className:a()(b,{[k]:P}),type:"button",onClick:i,ref:t,children:[(0,C.jsx)(c.x,{variant:"bodySmallBold",children:P?P.title:r.ag.get("more")}),e?(0,C.jsx)(o.U,{size:"small",className:R,"aria-hidden":"true"}):(0,C.jsx)(u.i,{size:"small",className:R,"aria-hidden":"true"})]})})}):null]})})}));var U=t(8885),O=t(64847),_=t(98271);const B="vhW0kRN8JJD5UwW4TdXi",M=()=>{const e=(0,_.Y)(),i=(0,l.useCallback)((e=>(0,C.jsx)(O.v,{placement:"bottomEnd",arrow:"topStart",title:r.ag.get("pick-and-shuffle.upsell.title.queue"),children:e})),[]),t=(0,l.useMemo)((()=>[{title:r.ag.get("playback-control.queue"),itemId:"queue",to:"/queue",uri:"spotify:app:queue",render:i,disabled:e},{title:r.ag.get("view.recently-played"),itemId:"history",to:"/history",uri:"spotify:app:history"}]),[e,i]);return(0,C.jsx)(U.w,{children:(0,C.jsx)(S,{className:B,links:t})})},P=e=>{let{children:i}=e;const t=(0,s.nF)();return(0,C.jsxs)("section",{className:"contentSpacing",children:[i,t&&(0,C.jsx)(M,{})]})}},99235:(e,i,t)=>{t.r(i),t.d(i,{default:()=>L});var s=t(80552),l=t(69736),r=t(85648),n=t(74185),a=t(50959),d=t(36199),c=t(17162),o=t(45438),u=t(95812),m=t(82857),x=t(70526),h=t(58912),j=(t(86277),t(11317)),p=t(82579),v=t(64329),g=t(35014),y=t(86696),f=t(31360),b=t(13926),k=t(85357),I=t(27565),w=t(44724),E=t(52993),N=t(3319),R=t(22527),C=t(74234),A=t(91939),T=t(42783),S=t(19968),U=t(11527);const O=a.memo((function(e){var i,t;let{uri:s,name:l,duration_ms:n,index:a,imgUrl:d,artists:c,album:u,isExplicit:x,isMOGEFRestricted:h,contextItem:O,type:_}=e;const{isActive:B,isPlaying:M,triggerPlay:P,togglePlay:D}=(0,R.n)({uri:s,pages:[{items:[{...O}]}]},{featureIdentifier:"history"}),G=_===m.p.TRACK,L=_===m.p.EPISODE,F=_===m.p.CHAPTER,K=(0,N._)(s),Q=(0,T.k)(s),{badges:W,hasBadges:q}=(0,C.r)({downloadAvailability:K,isExplicit:x,isMOGEFRestricted:h}),H=(null==c?void 0:c.map((e=>e.name)).join(r.ag.getSeparator()))||"";let J;return L?J=(0,U.jsx)(v.k,{uri:s,contextUri:s,showUri:u.uri}):F?J=(0,U.jsx)(A.r,{uri:s}):G&&(0,j.dB)(s)?J=(0,U.jsx)(g.N,{uri:s,contextUri:s}):G&&(J=(0,U.jsx)(y.$,{uri:s,contextUri:s,albumUri:u.uri,artists:c})),(0,U.jsx)(o.JL,{value:"row",index:a,children:(0,U.jsx)(p._,{menu:J,children:(0,U.jsxs)(k.c,{uri:s,contextUri:s,index:a,ariaRowIndex:a,onTriggerPlay:()=>{P()},isActive:B,isPlayable:Q,ageRestricted:h,dragMetadata:{name:l,createdBy:H},children:[(0,U.jsxs)(f.vZ,{ariaColIndex:0,children:[(0,U.jsx)(f.VG,{uri:s,src:d,isPlaying:M,isActive:B,isLocked:!1,onClick:()=>{D()},isEpisode:(0,j.hn)(s),playAriaLabel:r.ag.get("tracklist.a11y.play",l,H)}),(0,U.jsxs)(f.vm,{children:[(0,U.jsx)(f.Wh,{titleText:l,children:l}),q&&(0,U.jsxs)(f.g3,{children:[W.download&&(0,U.jsx)(I.G,{}),W.explicit&&(0,U.jsx)(w.N,{}),W.nineteen&&(0,U.jsx)(E.X,{className:b.Z.nineteen,size:16})]}),(0,U.jsx)(f.K9,{children:(0,j.wj)(s)?(0,U.jsx)(f.T6,{artists:c}):(null===(i=c[0])||void 0===i?void 0:i.name)??""})]})]}),(0,U.jsx)(f.UA,{ariaColIndex:2,children:(0,U.jsx)(f.BM,{nonInteractive:(0,j.dB)(s),uri:u.uri,name:u.name,creatorUri:null==c||null===(t=c[0])||void 0===t?void 0:t.uri,children:u.name})}),(0,U.jsxs)(f.mU,{ariaColIndex:1,children:[!F&&(0,U.jsx)(S.f,{uri:s,type:_}),(0,U.jsx)(f.A$,{duration:n}),(0,U.jsx)(f.Zv,{menu:J,label:r.ag.get("more.label.track",l,H)})]})]})})})}),((e,i)=>e.uri===i.uri)),_=a.memo((function(e){let{items:i}=e;const t=(0,a.useCallback)(((e,i)=>{const t=(0,h.X)(e.images??[],{desiredSize:40});return(0,u.G_)(e)?(0,U.jsx)(O,{index:i,uri:e.isLocal?e.uri:(0,c.$)(e),name:e.name,duration_ms:e.duration.milliseconds,imgUrl:(null==t?void 0:t.url)||"",album:e.album,artists:e.artists,isExplicit:e.isExplicit??!1,isMOGEFRestricted:e.is19PlusOnly??!1,contextItem:e,type:m.p.TRACK},i+e.uri):(0,u.iw)(e)?(0,U.jsx)(O,{index:i,uri:e.uri,name:e.name,duration_ms:e.duration.milliseconds,imgUrl:(null==t?void 0:t.url)||"",album:e.show,artists:[],isExplicit:!1,isMOGEFRestricted:!1,contextItem:e,type:m.p.EPISODE},i+e.uri):(0,u.G7)(e)?(0,U.jsx)(O,{index:i,uri:e.uri,name:e.name,duration_ms:e.duration.milliseconds,imgUrl:(null==t?void 0:t.url)||"",album:e.book,artists:[],isExplicit:!1,isMOGEFRestricted:!1,contextItem:e,type:m.p.CHAPTER},i+e.uri):((0,u.k6)(e)||(0,u.RB)(e)||(0,x._)(e),(0,U.jsx)(d.hU,{height:`${d.dN}px`}))}),[]),s=(0,a.useMemo)((()=>[d.QD.TITLE_AND_ARTIST,d.QD.ALBUM_OR_PODCAST,d.QD.DURATION]),[]),l=(0,a.useCallback)((e=>({uri:e.uri})),[]);return(0,U.jsx)(U.Fragment,{children:(0,U.jsx)(o.JL,{value:"play-history-tracklist",children:(0,U.jsx)(d.Pv,{ariaLabel:"play-history",hasHeaderRow:!0,columns:s,renderRow:t,resolveItem:l,tracks:i,nrTracks:i.length,rowPlaceholder:d.hU,limit:50,columnPersistenceKey:"play-history-tracklist"})})})})),B="dt3fysZYdQ6hhWfpmjAu",M="n6LsTkKvpO88xeRyRTdw",P=()=>{const{isLoading:e,data:i}=(0,s.U5)();return e?null:null!=i&&i.items.length?(0,U.jsxs)("div",{className:B,children:[(0,U.jsx)(l.x,{as:"h1",variant:"titleSmall",semanticColor:"textBase",className:M,children:r.ag.get("view.recently-played")}),(0,U.jsx)(_,{items:i.items})]}):(0,U.jsx)(n.S,{})};var D=t(81952),G=t(96989);const L=()=>(0,s.nF)()?(0,U.jsx)(D.I,{children:(0,U.jsx)(P,{})}):(0,U.jsx)(G.InstrumentedRedirect,{to:"/"})}}]);
//# sourceMappingURL=xpui-routes-play-history-page.bd920ece.js.map