/*! For license information please see track.js.LICENSE.txt */
!function(){var t={278:922:23:},44},87}},e={}n.},n.},n.}(),n.},n.nm},function(){const t="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};t.SENTRY_RELEASE={id:"tracking-code@2.15.6"},t.SENTRY_RELEASES=t.SENTRY_RELEASES||{},t.SENTRY_RELEASES["ls-track@livesession-trackjs"]={id:"tracking-code@2.15.6"}}(),function(){"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return ar }({rea},writ}},{path:"/"}),a=s,l=n(278),u=n.n(l),c=n(876}var d=n(445);function f(t,e){var n=[];if(["string","number"].indexOf(h(t))>-1)return n;for(var i in t){var r=e(t[i],i);n.push(r)}return n}function p(t){if(null==t)return!0;if(t.length>0)return!1;if(0===t.length)return!0;for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function v(t){return function(t){return!!t&&("object"===("undefined"==typeof Node?"undefined":h(Node))?t instanceof Node:"object"===h(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName)}(t)&&"object"===("undefined"==typeof HTMLElement?"undefined":h(HTMLElement))?t instanceof HTMLElement:"object"===h(t)&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}var m=function(){return m=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},m.apply(this,arguments)},g="?",y=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,b=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,w=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,S=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,E=/\((\S*)(?::(\d+))(?::(\d+))\)/,k=/Minified React error #\d+;/i;function O(t){var e=null,n=0;t&&("number"==typeof t.framesToPop?n=t.framesToPop:k.test(t.message)&&(n=1));try{if(}(t),e)return R(e,n)}catch(t){}try{if(e=function(t){var e,n;if(!t||!t.stack)return null;for(var i,r,o,s=[],a=t.stack.split("\n"),l=0;l<a.length;++l){if(r=y.exec(a[l])){var u=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(i=E.exec(r[2]))&&(r[2]=i[1],r[3]=i[2],r[4]=i[3]);var c=r[2]&&0===r[2].indexOf("address at ")?r[2].substr("address at ".length):r[2],h=r[1]||g;h=(e=I(h,c))[0],o={url:c=e[1],func:h,args:u?[r[2]]:[],line:r[3]?+r[3]:null,column:r[4]?+r[4]:null}}else if(r=w.exec(a[l]))o={url:r[2],func:r[1]||g,args:[],line:+r[3],column:r[4]?+r[4]:null};else{if(!(r=b.exec(a[l])))continue;r[3]&&r[3].indexOf(" > eval")>-1&&(i=S.exec(r[3]))?(r[1]=r[1]||"eval",r[3]=i[1],r[4]=i[2],r[5]=""):0!==l||r[5]||void 0===t.columnNumber||(s[0].column=t.columnNumber+1);c=r[3],h=r[1]||g;h=(n=I(h,c))[0],o={url:c=n[1],func:h,args:r[2]?r[2].split(","):[],line:r[4]?+r[4]:null,column:r[5]?+r[5]:null}}!o.func&&o.line&&(o.func=g),s.push(o)}if(!s.length)return null;return{message:x(t),name:t.name,stack:s}}(t),e)return R(e,n)}catch(t){}return{message:x(t),name:t&&t.name,stack:[],failed:!0}}var function C(t){var e=function(t){var e=N(t.stack),n={type:t.name,value:t.message};return e&&e.length&&(n.stacktrace={frames:e}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}(t);return{exception:{values:[e]}}var T=function(){return T=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},T.apply(this,arguments)},_=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},A=n(876).i8,D=n(876).u2,L=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];H.apply(void 0,_(["BugTracker"],t,!1))},P=function(t,e){return t.filter})).length>0},M=new(function(){function t(t){var e=t.limit;this.limit=0,this.counter=0,this.sentErrors=[],this.enabled=!1,this.limit=e,this.counter=0,this.sentErrors=[]}return t.prototype.send=function(t){var e;if(this.enabled)if(this.counter>=this.limit||P(this.sentErrors,t))L("omit error:",t);else{this.counter++,this.sentErrors.push(t);var n=C(O(t)),i="".concat(D,"@").concat(A).concat(""),r=T(T({},n),{message:t.message,timestamp:(new Date).toISOString(),environment:"production",extra:{version:1705323184,account_id:window.__lsAID,website_id:window.__lsWID},request:{url:null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.href,headers:{Referer:null===document||void 0===document?void 0:document.referrer,"User-Agent":null===navigator||void 0===navigator?void 0:navigator.userAgent}},release:i,level:"error",platform:"javascript"});try{var o=new XMLHttpRequest;o.open("POST","https://sentry.io/api/6350274/store/",!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("X-Sentry-Auth","Sentry sentry_version=7, sentry_key=b8d30adf717a41c8adddfc9b9d4f428b, sentry_client=raven-bash/0.1"),o.send(JSON.stringify(r))}catch(t){L("Failed to send:",t)}}},t}())({limit:10}),j=function(t){try{for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];t.apply(void 0,n)}catch(t){return H("Tools","Error:",t),M.send(t),!1}return!0},H=function(t){if(window.__ls_debug||window.__ls_debug_force){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=console).log.apply(e,["[LS]["+t+"]"].concat(i))}},},F=function(t){for(var e=window.location.search.substring(1).split("&"),n=0;n<e.length;n++){var i=e[n].split("=");if(decodeURIComponent(i[0])==t)return decodeURIComponent(i[1])}},U=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},q=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];H.apply(void 0,U(["EventListener"],t,!1))},B=function(}return t.prototype.flush=function(){q("flush"),this.onceEvents={},this.events={}},t.prototype.on=function(t,e,n){return q("on:",t),this.events[t]=this.events[t]||{},n||(n=this.utils.UUID()),this.events[t][n]=e,n},t.prototype.once=function(t,e,n){return q("once:",t),this.onceEvents[t]=this.onceEvents[t]||{},n||(n=this.utils.UUID()),this.onceEvents[t][n]=e,n},t.prototype.call=function(t){q("call:",t);var e=[].splice.call(arguments,1);this.events[t]&&u()(this.events[t],(function(t){j((function(){return t.apply(void 0,e)}))})),this.onceEvents[t]&&(u()(this.onceEvents[t]})),this.onceEvents[t]={})},t}(ar X=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];H.apply(void 0,["Conditions"].concat(e))},Y=function(){function t(e){var n=e.globalEvents;W(this,t),this.globalEvents=n,this.enabled=!1,this.list=[],this.eventsConditions=[],this.Reset(),this.operators={star},contai},end:function(t,e){return t.indexOf(e)==t.length-e.length},e},ne},g},gt},l},lt}}}return z(t,[{key:"Set",value:function(t){var e=this;X("set:",t),u()(t,(function(t){switch(t.type){case"event":e.conds.events.push(t),e.eventsConditions=t.name;break;case"session":e.conds.session.push(t);break;case"pageView":e.conds.pageview.push(t);break;default:X("unknown condition type:",t.type)}})),this.checkFulfilled()}},{key:"Restart",valu}},{key:"Reset",value:function(){this.done=!1,this.conds={events:[],session:[],pageview:[]},this.eventsConditions=[]}},{key:"Enable",value:function(){this.enabled=!0}},{key:"Disable",value:function(){this.enabled=!1}},{key:"IsEnabled",value:function(){return this.enabled}},{key:"IsEmpty",value:function(){return 0===this.list.length}},{key:"IsSet",valu}},{key:"IsFulfilled",value:function(){return this.done||0===this.conds.events.length&&0===this.conds.session.length&&0===this.conds.pageview.length}},{key:"EventsConditions",value:function(){return this.eventsConditions}},{key:"checkFulfilled",value:function(){!this.done&&this.IsFulfilled()&&(this.done=!0,this.globalEvents.call("conditions.fulfilled"))}},{key:"CheckEventData",value:function(t){var e=this;if(this.IsEnabled()&&!this.IsFulfilled()){var n=[];u()(this.conds.events,(function(i,r){if(Array.isArray(i.name)){var o=!1;u()(i.name,(function(e){t.name==e&&(o=!0)})),o&&(X("fulfilled:",i),n.push(r))}else t.name==i.name&&(i.operator&&i.value&&i.key?e.operators[i.operator]?t[i.key]?(X("check condition:",i,t),e.operators[i.operator](t[i.key],i.value)&&(X("fulfilled:",i),n.push(r))):console.warn("[LiveSession] invalid condition key for:",i):console.warn("[LiveSession] invalid condition operator for:",i):(X("fulfilled:",i),n.push(r)))})),this.clearConds(this.conds.events,n),this.checkFulfilled()}}},{key:"CheckSessionData",value:function(t){this.IsEnabled()&&!this.IsFulfilled()&&(this.checkFulfilledData(this.conds.session,t),this.checkFulfilled())}},{key:"CheckPageViewData",value:function(t){this.IsEnabled()&&!this.IsFulfilled()&&(this.checkFulfilledData(this.conds.pageview,t),this.checkFulfilled())}},{key:"checkFulfilledData",value:function(t,e){var n=this,i=[];u()(t,(function(t,r){if(Array.isArray(t.name)){var o=!1;u()(t.name})),o&&(X("fulfilled:",t),i.push(r))}else{var s=get(e,t.name);n.operators[t.operator]?n.operators[t.operator](s,t.value)&&(X("fulfilled:",t),i.push(r)):console.warn("[LiveSession] invalid condition operator for:",t)}})),this.clearConds(t,i)}},{key:"clearConds",value:function(t,e){for(var n=t.length-1;n>=0;n--){var i=e.indexOf(n);i>-1&&t.splice(e[i],1)}}}]),t}(),K=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},$=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];H.apply(void 0,K(["XHRTransport"],t,!1))},J=function(}return t.prototype.Init=function(){},t.prototype.getAP},t.prototype.sendFetch=function(t,e,n,i,r){return fetch(e,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t.json().then((function(e){return new Promise}))}))})).catch((function(t){return $("Error:",t),new Promise}))}))},t.prototype.sendXHR=function(t,e,n,i,r){var o=new XMLHttpRequest;o.onreadystatechange=function(){if(4===o.readyState)try{o&&200===o.status?i(o.responseText):r&&r({statusCode:o.status,response:o.responseText})}catch(t){$(t)}},o.open(t,e,!0),o.send(JSON.stringify(n))},t.prototype.handleError=function(t){if(t)switch(t.type){case"turn_off":this.globalEvents.call("api.response.turn_off");break;case"session_expired":this.globalEvents.call("api.session.expired");break;case"malformed_data":this.globalEvents.call("api.session.malformed_data");break;default:$("Unsupported error: ".concat(t))}},t.prototype.send=function(t,e,n,i,r,o,s){var a=this;void 0===s&&(s=!1),i.account_id=this.options.AccountID(),-1!=this.options.WebsiteID()?i.website_id=this.options.WebsiteID():console.warn("[LiveSession] Your tracking script is outdated. Please update it.");var l=Object.keys(i).map})).join("&"),u=this.getAPI()+e+"?"+l;return s&&navigator.sendBeacon?(navigator.sendBeacon(u,JSON.stringify(n)),void $("Send ".concat(e," (beacon):"),n)):($("Send ".concat(e,":"),n),this.sendXHR(t,u,n,(function(t){var e=JSON.parse(t);if(e&&e.error){var n=e.error;return a.handleError(n),o(n)}return r(e)}),(function(t){var e=t.response;try{var n=JSON.parse(e);n&&n.error&&"session_expired"==n.error.type&&a.globalEvents.call("api.session.expired"),o(n.error)}catch(t){$(t)}})))},t.prototype.SendBundle=function(t,e,n,i,r,o){return this.send("POST","/bundle",{page_view_id:this.pageView.ID(),page_creation_timestamp:this.pageView.CreationTimestamp(),visitor_side_storage:this.visitor.JSON(),events:t.events,inactivity:t.inactivity,activeTime:t.activeTime,tab_id:t.tabID,error:o},i,e,n,r,o)},t.prototype.PageViewInit=function(t,e){return this.send("GET","/init",null,{},t,e)},t.prototype.SendPageView=function(t,e,n){return this.send("POST","/page_view",t,{},e,n)},t.prototype.SendIntegrationProps=function(t,e,n){return this.send("POST","/props",t,{},e,n)},t}( it,rt=(it=function(t,e){return it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},it(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}it(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ot=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},st=function(}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];H.apply(void 0,ot([this.name],t,!1))},t.prototype.setName=function(t){this.name=t},t.prototype.isDOMListener=function(){return!1},t.prototype.setSupportShadow=function(t){this.supportShadow=t},t}(),a}(st),lt=function(){function t(e){var n=e.interval,i=e.fn;W(this,t),this.interval=n,this.id=-1,i&&this.Start(i)}return z(t,[{key:"IsOn",valu}},{key:"Start",value:function(t){this.IsOn()||(this.tic},this.id=window.setInterval(this.tick,this.interval))}},{key:"Stop",value:function(){this.IsOn()&&(window.clearInterval(this.id),this.id=-1,this.tick=function(){})}}]),t}();function ut(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var ct=null,ht=null,dt=function(t){tt(n,t);var e=ut(n);function n(t){var i,r=t.utils,o=t.eventsStream,s=t.aquireInterval;return W(this,n),(i=e.call(this)).startTime=null,i.lastPosition={x:0,y:0},i.position={x:0,y:0},i.utils=r,i.eventsStream=o,i.ticker=new lt({interval:s}),i.eventFunc=function(t){return j(i.Handler.bind(Q(i)),t)},i}return z(n,[{key:"Register",value:function(){return this.startTime=null,window.addEventListener("mousemove",this.eventFunc,!0),this.ticker.Start(this.Trigger.bind(this)),this.Get()}},{key:"Unregister",value:function(){this.startTime=null,window.removeEventListener("mousemove",this.eventFunc,!0),this.ticker.Stop()}},{key:"isValueChanged",value:function(){var t=this.lastPosition,e=t.x,n=t.y;return e!=this.position.x||n!=this.position.y}},{key:"Trigger",value:function(){this.isValueChanged()?(this.lastPosition={x:this.position.x,y:this.position.y,json_data:this.position.json_data},this.eventsStream.Add(this.name,this.position,this.startTime),this.startTime=null):this.startTime=null}},{key:"Handler",value:function(t){ct=Math.max(parseInt(t.clientX,10),0),ht=Math.max(parseInt(t.clientY,10),0),this.startTime||(this.startTime=this.utils.Time.Duration()),t.target,this.position={x:t.clientX,y:t.clientY,path:this.utils.DOM.FullPath(t.target),el:this.utils.DOM.ElementName(t.target),json_data:{v:this.utils.Time.Duration()-this.startTime,rx:t.pageX,ry:t.pageY}}}},{key:"Get",value:function(){return null!=ct&&null!=ht?{x:ct,y:ht}:null}}]),n}(at);function ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var pt=function(t){tt(n,t);var e=ft(n);function n(t){var i,r=t.utils,o=t.eventsStream;return W(this,n),(i=e.call(this)).utils=r,i.eventsStream=o,i.eventFunc=function(t){return j(i.Handler.bind(Q(i)),t)},i}return z(n,[{key:"Register",value:function(){window.addEventListener("mouseup",this.eventFunc,!0)}},{key:"Unregister",value:function(){window.removeEventListener("mouseup",this.eventFunc,!0)}},{key:"Handler",value:function(t){this.eventsStream.Add(this.name,{x:t.pageX,y:t.pageY,path:this.utils.DOM.FullPath(t.target),el:this.utils.DOM.ElementName(t.target)})}}]),n}(at);function vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var mt=function(t){tt(n,t);var e=vt(n);function n(t){var i,r=t.utils,o=t.eventsStream;return W(this,n),(i=e.call(this)).utils=r,i.eventsStream=o,i.eventFunc=i.Handler.bind(Q(i)),i}return z(n,[{key:"Register",value:function(){window.addEventListener("mousedown",this.eventFunc,!0)}},{key:"Unregister",value:function(){window.removeEventListener("mousedown",this.eventFunc,!0)}},{key:"Handler",value:function(t){t.isTrusted&&this.eventsStream.Add(this.name,{x:t.pageX,y:t.pageY,path:this.utils.DOM.FullPath(t.target),el:this.utils.DOM.ElementName(t.target)})}}]),n}(at),gt={MUTATION:"DOMChange",ELEMENT_BLUR:"ElementBlur",ELEMENT_FOCUS:"ElementFocus",LOCATION_CHANGE:"LocationChange",MOUSE_CLICK:"MouseClick",MOUSE_DOUBLE_CLICK:"MouseDoubleClick",MOUSE_DOWN:"MouseDown",MOUSE_MOVE:"MouseMove",TOUCH_MOVE:"TouchMove",MOUSE_UP:"MouseUp",SCROLL:"Scroll",SELECTION:"Selection",VALUE_CHANGE:"ValueChange",VALUE_SET:"ValueSet",FORM_SUBMIT:"FormSubmit",WINDOW_BLUR:"WindowBlur",WINDOW_FOCUS:"WindowFocus",WINDOW_RESIZE:"WindowResize",WINDOW_SCROLL:"WindowScroll",CSS_CHANGE:"CSSChange",RESOURCE_ADDED:"ResourceAdded",ERROR_CLICK:"ErrorClick",RAGE_CLICK:"RageClick",LOG:"Log",ERROR:"Error",CUSTOM:"Custom",PERFORMANCE:"Performance",TECHNOLOGY:"Technology",NET_LOG:"NetLog",NET_ERROR:"NetError",IDENTIFY:"Identify",ANIMATION:"Animation"},yt={DOMChange:1,ElementBlur:2,ElementFocus:3,LocationChange:4,MouseClick:5,MouseDoubleClick:6,MouseDown:7,MouseMove:8,TouchMove:9,MouseUp:10,Scroll:11,Selection:12,ValueChange:13,WindowBlur:14,WindowFocus:15,WindowResize:16,WindowScroll:17,CSSChange:18,ResourceAdded:19,ErrorClick:20,RageClick:21,FormSubmit:22,ValueSet:23,Log:24,Error:25,Custom:26,Performance:27,Technology:28,NetLog:29,NetError:30,Identify:31,Animation:32},bt={internal:0,log:1,info:2,warn:3,error:4,debug:5},wt={log:"log",info:"info",warn:"warn",error:"error"},St="include",Et="exclude",kt=function(t){return yt[t]},Ot=[gt.MOUSE_MOVE,gt.TOUCH_MOVE,gt.SCROLL,gt.WINDOW_SCROLL];function It(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var Rt=function(t){tt(n,t);var e=It(n);function n(t){var i,r=t.utils,o=t.eventsStream,s=t.mouseMoveHandler,a=t.touchMoveHandler,l=t.windowScrollHandler;return W(this,n),(i=e.call(this)).utils=r,i.eventsStream=o,i.windowScrollHandler=l,i.mouseMoveHandler=s,i.touchMoveHandler=a,i.eventFunc=function(t){return j(i.Handler.bind(Q(i)),t)},i.eventAfterFunc=function(t){return j(i.AfterHandler.bind(Q(i)),t)},i.errorFunc=function(t){return j(i.onError.bind(Q(i)),t)},i}return z(n,[{key:"Register",value:function(){window.addEventListener("click",this.eventFunc,!0),window.addEventListener("click",this.eventAfterFunc,!1),window.addEventListener("error",this.errorFunc,!0)}},{key:"Unregister",valu}},{key:"onError",value:function(t){if(t){var e=t.error,n=void 0===e?{}:e;n&&(this.err={message:n.message,stack:n.stack||n.backtrace||n.stacktrace})}}},{key:"AfterHandler",value:function(t){(void 0===t.isTrusted||t.isTrusted)&&(0==t.screenX&&0==t.screenY||this.err&&this.eventsStream.Add(gt.ERROR_CLICK,{x:t.pageX,y:t.pageY,path:this.utils.DOM.FullPathV2(t),txt:this.utils.DOM.Content(t.target),el:this.utils.DOM.ElementName(t.target),value:this.err.message,json_data:this.err}))}},{key:"handleRageClick",value:function(t){var e=this;-1!=this.rageClickTimeout&&(clearTimeout(this.rageClickTimeout),this.rageClickTimeout=-1),this.rageClickTimeout=setTimeout((function(){e.eventsStream.Add(gt.RAGE_CLICK,{x:t.pageX,y:t.pageY,path:e.utils.DOM.FullPathV2(t),txt:e.utils.DOM.Content(t.target),el:e.utils.DOM.ElementName(t.target),json_data:{clicks:t.detail}})}),300)}},{key:"Handler",value:function(t){if((void 0===t.isTrusted||t.isTrusted)&&(0!=t.screenX||0!=t.screenY)){this.windowScrollHandler.Trigger(),"Desktop"==this.utils.getDeviceType()?this.mouseMoveHandler.Trigger():this.touchMoveHandler.Trigger(),t.detail>3&&this.handleRageClick(t);var e={x:t.pageX,y:t.pageY,path:this.utils.DOM.FullPathV2(t),txt:this.utils.DOM.Content(t.target),el:this.utils.DOM.ElementName(t.target)};this.err=null,this.eventsStream.Add(this.name,e)}}}]),n}(at);function xt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var Ct=function(t){tt(n,t);var e=xt(n);function n(t){var i,r=t.utils,o=t.eventsStream;return W(this,n),(i=e.call(this)).utils=r,i.eventsStream=o,i.eventFunc=i.Handler.bind(Q(i)),i}return z(n,[{key:"Register",value:function(){window.addEventListener("dblclick",this.eventFunc,!0)}},{key:"Unregister",valu}},{key:"Handler",value:function(t){t.isTrusted&&this.eventsStream.Add(this.name,{x:t.pageX,y:t.pageY,path:this.utils.DOM.FullPath(t.target),el:this.utils.DOM.ElementName(t.target)})}}]),n}(at);function Nt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var Tt=function(t){tt(n,t);var e=Nt(n);function n(t){var i,r=t.utils,o=t.eventsStream,s=t.aquireInterval;return W(this,n),(i=e.call(this)).lastValue={w:0,h:0},i.value={w:0,h:0},i.utils=r,i.eventsStream=o,i.ticker=new lt({interval:s}),i.eventHandler=function(t){return j(i.Handler.bind(Q(i)),t)},i}return z(n,[{key:"Register",value:function(){window.addEventListener("resize",this.eventHandler,!0),this.ticker.Start(this.handleInterval.bind(this))}},{key:"Unregister",value:function(){window.removeEventListener("resize",this.eventHandler,!0),this.ticker.Stop()}},{key:"handleInterval",value:function(){var t=this.lastValue,e=t.w,n=t.h;e==this.value.w&&n==this.value.h||(this.lastValue={w:this.value.w,h:this.value.h},this.eventsStream.Add(this.name,{width:this.value.w,height:this.value.h}))}},{key:"Handler",value:function(t){var e=window.innerWidth||0,n=window.innerHeight||0,i=window.innerWidth<window.screen.width;/iPad|iPhone|iPod/.test(navigator.userAgent)&&i&&(e=window.screen.width),this.value={w:e,h:n}}}]),n}(at);function _t(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}function At(){return(((null===(g=window)||void 0===g?void 0:g.pageYOffset)||(null===(y=document)||void 0===y||null===(b=y.body)||void 0===b?void 0:b.scrollTop)||(null===(w=document)||void 0===w||null===(S=w.documentElement)||void 0===S?void 0:S.scrollTop)||0)+((null===(d=window)||void 0===d?void 0:d.innerHeight)||(null===(f=document)||void 0===f||null===(p=f.documentElement)||void 0===p?void 0:p.clientHeight)||(null===(v=document)||void 0===v||null===(m=v.body)||void 0===m?void 0:m.clientHeight)||0))/Math.max((null===(t=document)||void 0===t||null===(e=t.body)||void 0===e?void 0:e.scrollHeight)||0,(null===(n=document)||void 0===n||null===(i=n.documentElement)||void 0===i?void 0:i.scrollHeight)||0,(null===(r=document)||void 0===r||null===(o=r.body)||void 0===o?void 0:o.offsetHeight)||0,(null===(s=document)||void 0===s||null===(a=s.documentElement)||void 0===a?void 0:a.offsetHeight)||0,(null===(l=document)||void 0===l||null===(u=l.body)||void 0===u?void 0:u.clientHeight)||0,(null===(c=document)||void 0===c||null===(h=c.documentElement)||void 0===h?void 0:h.clientHeight)||0)*100;var t,e,n,i,r,o,s,a,l,u,c,h,d,f,p,v,m,g,y,b,w,S}var Dt,Lt,Pt=function(t){tt(n,t);var e=_t(n);function n(t){var i,r=t.utils,o=t.eventsStream,s=t.aquireInterval;return W(this,n),(i=e.call(this)).startTime=null,i.lastPosition={x:0,y:0},i.topDepth={percent:0},i.position={x:0,y:0},i.intervalID=0,i.utils=r,i.eventsStream=o,i.ticker=new lt({interval:s}),i.eventFunc=i.Handler.bind(Q(i)),i}return z(n,[{key:"Register",value:function(){return this.startTime=null,this.Handler(),this.Trigger(),window.addEventListener("scroll",this.eventFunc,!0),this.ticker.Start(this.Trigger.bind(this)),this.Get()}},{key:"Unregister",value:function(){this.startTime=null,window.removeEventListener("scroll",this.eventFunc,!0),this.ticker.Stop()}},{key:"Trigger",value:function(){var t=this.lastPosition,e=t.x,n=t.y;e!=this.position.x||n!=this.position.y?(this.lastPosition={x:this.position.x,y:this.position.y,json_data:this.position.json_data},this.eventsStream.Add(this.name,this.position,this.startTime),this.startTime=null,this.position.value=void 0):this.startTime=null}},{key:"Handler",value:function(t){var e,n,i,r,o,s,a,l,u,c,h,d;this.startTime||(this.startTime=this.utils.Time.Duration());var f=parseInt(pageXOffset||(null!==(e=document)&&void 0!==e&&null!==(n=e.documentElement)&&void 0!==n&&n.clientWidth?null===(i=document)||void 0===i||null===(r=i.documentElement)||void 0===r?void 0:r.scrollLeft:null===(o=document)||void 0===o||null===(s=o.body)||void 0===s?void 0:s.scrollLeft),10),p=parseInt(pageYOffset||(null!==(a=document)&&void 0!==a&&null!==(l=a.documentElement)&&void 0!==l&&l.clientHeight?null===(u=document)||void 0===u||null===(c=u.documentElement)||void 0===c?void 0:c.scrollTop:null===(h=document)||void 0===h||null===(d=h.body)||void 0===d?void 0:d.scrollTop),10);this.position={x:f,y:p,json_data:{v:this.utils.Time.Duration()-this.startTime},value:this.position.value||void 0};var v=this.calcGreatestScrollPercentage();v&&(this.position.value=v.toString())}},{key:"calcGreatestScrollPercentage",value:function(){var t=parseInt(At(),10);if(t>this.topDepth.percent||!this.topDepth.percent)return this.topDepth.percent=t,this.topDepth.percent}},{key:"Get",value:function(){this.Handler();var t=this.position,e=t.x,n=t.y,i=t.value,r=t.json_data;return{x:Math.max(e,0),y:Math.max(n,0),value:i,json_data:JSON.stringify(r)}}}]),n}(at),Mt=(Dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}});if(void 0===(Lt="undefined"!=typeof WebKitMutationObserver?WebKitMutationObserver:MutationObserver))throw console.error("DOM Mutation Observers are required."),console.error("https://developer.mozilla.org/en-US/docs/DOM/MutationObserver"),Error("DOM Mutation Observers are required");var jt,Ht=function(}return t.prototype.isInde},t.prototype.nodeId=function(e){var n=e[t.ID_PROP];return n||(n=e[t.ID_PROP]=t.nextId_++),n},t.prototype.se},t.prototype.ge},t.prototype.ha},t.prototype.delete=function(t){var e=this.nodeId(t);delete this.nodes[e],this.values[e]=void 0},t.prototype.key},t.ID_PROP="__ls_mutation_summary_node_map_id__",t.nextId_=1,t}()}(jt||(jt={}));var V}(),F},Ut=function(t){function e(e,n){var i=t.call(this)||this;i.rootNode=e,i.reachableCache=void 0,i.wasReachableCache=void 0,i.anyParentsChanged=!1,i.anyAttributesChanged=!1,i.anyCharacterDataChanged=!1;for(var r=0;r<n.length;r++){var o=n[r];switch(o.type){case"childList":i.anyParentsChanged=!0;for(var s=0;s<o.removedNodes.length;s++){var a=o.removedNodes[s];i.getChange(a).removedFromParent(o.target)}for(s=0;s<o.addedNodes.length;s++){a=o.addedNodes[s];i.getChange(a).insertedIntoParent()}break;case"attributes":i.anyAttributesChanged=!0,i.getChange(o.target).attributeMutated(o.attributeName,o.oldValue);break;case"characterData":i.anyCharacterDataChanged=!0,i.getChange(o.target).characterDataMutated(o.oldValue)}}return i}return Mt(e,t),e.prototype.getChang},e.prototype.getOldParen},e.prototype.getIsReachabl},e.prototype.getWasReachabl},e.prototype.reachabilityChang},e}(Ht),qt=function(}return t.prototype.processMutation},t.prototype.visitNode=function(t,e){if(!this.visited.has(t)){this.visited.set(t,!0);var n=this.treeChanges.get(t),i=e;if((n&&n.childList||null==i)&&(i=this.treeChanges.reachabilityChange(t)),i!==jt.STAYED_OUT){if(this.matchabilityChange(t),i===jt.ENTERED)this.entered.push(t);else if(i===jt.EXITED)this.exited.push(t),this.ensureHasOldPreviousSiblingIfNeeded(t);else if(i===jt.STAYED_IN){var r=jt.STAYED_IN;n&&n.childList&&(n.oldParentNode!==t.parentNode?(r=jt.REPARENTED,this.ensureHasOldPreviousSiblingIfNeeded(t)):this.calcReordered&&this.wasReordered(t)&&(r=jt.REORDERED)),this.stayedIn.set(t,r)}if(i!==jt.STAYED_IN)for(var o=t.firstChild;o;o=o.nextSibling)this.visitNode(o,i)}}},t.prototype.ensureHasOldPreviousSiblingIfNeede},t.prototype.getChanged=function(t,e,n){this.selectors=e,this.characterDataOnly=n;for(var i=0;i<this.entered.length;i++){var r=this.entered[i];(a=this.matchabilityChange(r))!==jt.ENTERED&&a!==jt.STAYED_IN||t.added.push(r)}var o=this.stayedIn.keys();for(i=0;i<o.length;i++){r=o[i];if((a=this.matchabilityChange(r))===jt.ENTERED)t.added.push(r);else if(a===jt.EXITED)t.removed.push(r);else if(a===jt.STAYED_IN&&(t.reparented||t.reordered)){var s=this.stayedIn.get(r);t.reparented&&s===jt.REPARENTED?t.reparented.push(r):t.reordered&&s===jt.REORDERED&&t.reordered.push(r)}}for(i=0;i<this.exited.length;i++){var a;r=this.exited[i];(a=this.matchabilityChange(r))!==jt.EXITED&&a!==jt.STAYED_IN||t.removed.push(r)}},t.prototype.getOldParentNod},t.prototype.getOldPreviousSiblin},t.prototype.getOldAttribut},t.prototype.attributeChangedNodes=function(t){if(!this.treeChanges.anyAttributesChanged)return{};var e,n;if(t){e={},n={};for(var i=0;i<t.length;i++){e[h=t[i]]=!0,n[h.toLowerCase()]=h}}var r={},o=this.treeChanges.keys();for(i=0;i<o.length;i++){var s=o[i],a=this.treeChanges.get(s);if(a.attributes&&(jt.STAYED_IN===this.treeChanges.reachabilityChange(s)&&jt.STAYED_IN===this.matchabilityChange(s)))for(var l=s,u=a.getAttributeNamesMutated(),c=0;c<u.length;c++){var h=u[c];if(!e||e[h]||a.isCaseInsensitive&&n[h])a.getAttributeOldValue(h)!==l.getAttribute(h)&&(n&&a.isCaseInsensitive&&(h=n[h]),r[h]=r[h]||[],r[h].push(l))}}return r},t.prototype.getOldCharacterDat},t.prototype.getCharacterDataChange},t.prototype.computeMatchabilityChang},t.prototype.matchabilityChang},t.prototype.getChildlistChang},t.prototype.processChildlistChanges=function(){if(!this.childListChangeMap){this.childListChangeMap=new Ht;for(var t=0;t<this.mutations.length;t++){var e=this.mutations[t];if("childList"==e.type&&(this.treeChanges.reachabilityChange(e.target)===jt.STAYED_IN||this.calcOldPreviousSibling)){for(var n=this.getChildlistChange(e.target),i=e.previousSibling,r=0;r<e.removedNodes.length;r++){s(o=e.removedNodes[r],i),n.added.has(o)?n.added.delete(o):(n.removed.set(o,!0),n.maybeMoved.delete(o)),i=o}s(e.nextSibling,i);for(r=0;r<e.addedNodes.length;r++){var o=e.addedNodes[r];n.removed.has(o)?(n.removed.delete(o),n.maybeMoved.set(o,!0)):n.added.set(o,!0)}}}},t.prototype.wasReordered=function(t){if(!this.treeChanges.anyParentsChanged)return!1;this.processChildlistChanges();var e=t.parentNode,n=this.treeChanges.get(t);n&&n.oldParentNode&&(e=n.oldParentNode);var i=this.childListChangeMap.get(e);if(!i)return!1;if(i.moved)return i.moved.get(t);i.moved=new Ht;var r=new Ht;function o(t){if(!t)return!1;if(!i.maybeMoved.has(t))return!1;var e=i.moved.get(t);return void 0!==e||(r.has(t)?e=!0:(r.set(t,!0),e=function(t){if(l.has(t))return l.get(t);var e=t.previousSibling;for(;e&&(i.added.has(e)||o(e));)e=e.previousSibling;return l.set(t,e),e}(t)!==a(t)),r.has(t)?(r.delete(t),i.moved.set(t,e)):e=i.moved.get(t)),e}var s=new H}var l=new Ht;return i.maybeMoved.keys().forEach(o),i.moved.get(t)},t}(),B}(),Wt=/[a-zA-Z_]+/,Gt=/[a-zA-Z0-9_\-]+}var X}(),Yt=function(}var e;return Object.defineProperty(t.prototype,"caseInsensitiveTagName",{ge},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectorString",{ge},enumerable:!0,configurable:!0}),t.prototype.isMatchin},t.prototype.wasMatching=function(t,e,n){if(!e||!e.attributes)return n;var i=e.isCaseInsensitive?this.caseInsensitiveTagName:this.tagName;if("*"!==i&&i!==t.tagName)return!1;for(var r=[],o=!1,s=0;s<this.qualifiers.length;s++){var a=this.qualifiers[s],l=e.getAttributeOldValue(a.attrName);r.push(l),o=o||void 0!==l}if(!o)return n;for(s=0;s<this.qualifiers.length;s++){a=this.qualifiers[s];if(void 0===(l=r[s])&&(l=t.getAttribute(a.attrName)),!a.matches(l))return!1}return!0},t.prototype.matchabilityChang},t.parseSelectors=function(e){var n,i,r=[for(var a,l=/\s/,u="Invalid or unsupported selector syntax.",c=1,h=0;h<e.length;){var d=e[h++];switch(c){case 1:if(d.match(Wt)){o(),n.tagName=d,c=2;break}if("*"==d){o(),n.tagName="*",c=3;break}if("."==d){o(),s(),n.tagName="*",i.attrName="class",i.contains=!0,c=4;break}if("#"==d){o(),s(),n.tagName="*",i.attrName="id",c=4;break}if("["==d){o(),s(),n.tagName="*",i.attrName="",c=6;break}if(d.match(l))break;throw Error(u);case 2:if(d.match(Gt)){n.tagName+=d;break}if("."==d){s(),i.attrName="class",i.contains=!0,c=4;break}if("#"==d){s(),i.attrName="id",c=4;break}if("["==d){s(),i.attrName="",c=6;break}if(d.match(l)){c=14;break}if(","==d){c=1;break}throw Error(u);case 3:if("."==d){s(),i.attrName="class",i.contains=!0,c=4;break}if("#"==d){s(),i.attrName="id",c=4;break}if("["==d){s(),i.attrName="",c=6;break}if(d.match(l)){c=14;break}if(","==d){c=1;break}throw Error(u);case 4:if(d.match(Wt)){i.attrValue=d,c=5;break}throw Error(u);case 5:if(d.match(Gt)){i.attrValue+=d;break}if("."==d){s(),i.attrName="class",i.contains=!0,c=4;break}if("#"==d){s(),i.attrName="id",c=4;break}if("["==d){s(),c=6;break}if(d.match(l)){c=14;break}if(","==d){c=1;break}throw Error(u);case 6:if(d.match(Wt)){i.attrName=d,c=7;break}if(d.match(l))break;throw Error(u);case 7:if(d.match(Gt)){i.attrName+=d;break}if(d.match(l)){c=8;break}if("~"==d){i.contains=!0,c=9;break}if("="==d){i.attrValue="",c=11;break}if("]"==d){c=3;break}throw Error(u);case 8:if("~"==d){i.contains=!0,c=9;break}if("="==d){i.attrValue="",c=11;break}if("]"==d){c=3;break}if(d.match(l))break;throw Error(u);case 9:if("="==d){i.attrValue="",c=11;break}throw Error(u);case 10:if("]"==d){c=3;break}if(d.match(l))break;throw Error(u);case 11:if(d.match(l))break;if('"'==d||"'"==d){a=d,c=13;break}i.attrValue+=d,c=12;break;case 12:if(d.match(l)){c=10;break}if("]"==d){c=3;break}if("'"==d||'"'==d)throw Error(u);i.attrValue+=d;break;case 13:if(d==a){c=10;break}i.attrValue+=d;break;case 14:if(d.match(l))break;if(","==d){c=1;break}throw Error(u)}}switch(c){case 1:case 2:case 3:case 5:case 14:o();break;default:throw Error(u)}if(!r.length)throw Error(u);return r},t.nextUid=1,t.matchesSelector="function"==typeof(e=document.createElement("div")).webkitMatchesSelector?"webkitMatchesSelector":"function"==typeof e.mozMatchesSelector?"mozMatchesSelector":"function"==typeof e.msMatchesSelector?"msMatchesSelector":"matchesSelector",t}(),Kt=/^([a-zA-Z:_]+[a-zA-Z0-9_\-:\.]*)$/;function $t(t){if("string"!=typeof t)throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!(t=t.trim()))throw Error("Invalid request opion. attribute must be a non-zero length string.");if(!t.match(Kt))throw Error("Invalid request option. invalid attribute name: "+t);return t}function Jt(t){if(!t.trim().length)throw Error("Invalid request option: elementAttributes must contain at least one attribute.");for(var e={},n={},i=t.split(/\s+/),r=0;r<i.length;r++){if(o=i[r]){var o,s=(o=$t(o)).toLowerCase();if(e[s])throw Error("Invalid request option: observing multiple case variations of the same attribute is not supported.");n[o]=!0,e[s]=!0}}return Object.keys(n)}var Qt=function(}return t.createObserverOptions=function(t){var e,n={childList:!0,subtree:!0}return t.forEach((function(t){if(t.characterData)return n.characterData=!0,void(n.characterDataOldValue=!0);if(t.all)return i(),n.characterData=!0,void(n.characterDataOldValue=!0);if(t.attribute)i([t.attribute.trim()]);else{var e=function(t){var e={};return t.forEach})),Object.keys(e)}(t.elementFilter).concat(t.attributeList||[]);e.length&&i(e)}})),e&&(n.attributeFilter=Object.keys(e)),n},t.validateOptions=function(e){for(var n in e)if(!(n in t.optionKeys))throw Error("Invalid option: "+n);if("function"!=typeof e.callback)throw Error("Invalid options: callback is required and must be a function");if(!e.queries||!e.queries.length)throw Error("Invalid options: queries must contain at least one query request object.");for(var i={callback:e.callback,rootNode:e.rootNode||document,observeOwnChanges:!!e.observeOwnChanges,oldPreviousSibling:!!e.oldPreviousSibling,queries:[]},r=0;r<e.queries.length;r++){var o=e.queries[r];if(o.all){if(Object.keys(o).length>1)throw Error("Invalid request option. all has no options.");i.queries.push({all:!0})}else if("attribute"in o){if((a={attribute:$t(o.attribute)}).elementFilter=Yt.parseSelectors("*["+a.attribute+"]"),Object.keys(o).length>1)throw Error("Invalid request option. attribute has no options.");i.queries.push(a)}else if("element"in o){var s=Object.keys(o).length,a={element:o.element,elementFilter:Yt.parseSelectors(o.element)};if(o.hasOwnProperty("elementAttributes")&&(a.attributeList=Jt(o.elementAttributes),s--),s>1)throw Error("Invalid request option. element only allows elementAttributes option.");i.queries.push(a)}else{if(!o.characterData)throw Error("Invalid request option. Unknown query request.");if(Object.keys(o).length>1)throw Error("Invalid request option. characterData has no options.");i.queries.push({characterData:!0})}}return i},t.prototype.createSummarie},t.prototype.checkpointQueryValidator},t.prototype.runQueryValidator},t.prototype.changesToReport=function(t){return t.some((function(t){if(["added","removed","reordered","reparented","valueChanged","characterDataChanged"].some})))return!0;if(t.attributeChanged&&Object.keys(t.attributeChanged).some})))return!0;return!1}))},t.prototype.observerCallbac},t.prototype.reconnec},t.prototype.takeSummarie},t.prototype.disconnec},t.NodeMap=Ht,t.parseElementFilter=Yt.parseSelectors,t.optionKeys={callback:!0,queries:!0,rootNode:!0,oldPreviousSibling:!0,observeOwnChanges:!0},t}(var ee=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];H.apply(void 0,["tree-mirror-client"].concat(e))},ne=function(){function t(e,n,i,r){W(this,t);var o=this,s=[{all:!0}];this.mirror=n,this.utils=r,this.nextId=1,this.knownNodes=new Qt.NodeMap,this.shadowRoots={};var a=this.serializeNode(e).id;this.mirror.initialize(a,this.getSerializedDocument(e)),i&&(s=s.concat(i)),this.mutationSummary=new Qt({rootNode:e,callback:function(t){o.applyChanged(t)},queries:s})}return z(t,[{key:"attachShadowRoot",value:function(t){if(t){if(void 0===this.getNodeHostID(t)){var e=t.host,n=this.knownNodes.get(e);if(void 0!==n){this.setNodeHostID(t,n);var i=this.serializeNode(t,!1);this.mirror.applyChanged([],[i],[],[])}}}else ee("Error:","shadow root not exists")}},{key:"compress",valu}},{key:"getSerializedDocument",value:function(t){for(var e=[],n=t.firstChild;n;n=n.nextSibling){var i=this.getNodeHostID(t);void 0!==i&&this.setNodeHostID(n,i),e.push(this.serializeNode(n,!0))}return e}},{key:"disconnect",value:function(){for(var t in this.mutationSummary&&(this.mutationSummary.disconnect(),this.mutationSummary=void 0),this.shadowRoots){var e=this.shadowRoots[t];this.mirror.removeShadowListeners(e)}}},{key:"rememberNode",value:function(t){var e=this.nextId++;return this.knownNodes.set(t,e),t._lsid=e,e}},{key:"getNodeHostID",value:function(t){var e=t._lshostid;if("number"==typeof e)return e}},{key:"setNodeHostID",value:function(t,e){t._lshostid=e}},{key:"forgetNode",value:function(t){this.knownNodes.delete(t)}},{key:"serializeNode",value:function(t,e){if(null===t)return null;var n=this.knownNodes.get(t),i=this.getNodeHostID(t);if(void 0!==n){var o={i:n};return void 0!==i&&(o.sHi=i),o}var s={nT:t.nodeType,i:this.rememberNode(t)};void 0!==i&&(s.sHi=i);var a=t;switch(s.nT){case Node.DOCUMENT_TYPE_NODE:var l=t;s.n=l.name,s.p=l.publicId,s.s=l.systemId,t&&t.adoptedStyleSheets&&this.mirror.onAdoptedStyleSheets(t);break;case Node.DOCUMENT_FRAGMENT_NODE:if(!this.isTargetShadowRoot(a))break;if(t&&t.adoptedStyleSheets&&this.mirror.onAdoptedStyleSheets(t),s.sR=!0,s.cN=[],this.registerShadowRoot(a,s.i),a.host){a.host._lsshadowroots||(a.host._lsshadowroots=new Set);for(var u={},c=a.host;c;){var h=this.getNodeHostID(c);if(u[h])break;if(void 0===h){a.host._lsshadowroots.add(a._lsid);break}if(!(c=this.knownNodes.nodes[h]))break;u[h]=!0,c._lsshadowroots||(c._lsshadowroots=new Set),c._lsshadowroots.add(a._lsid)}}e&&a.childNodes.length&&(s.cN=this.getSerializedDocument(a));break;case Node.COMMENT_NODE:case Node.TEXT_NODE:if(t.parentNode&&"TEXTAREA"===t.parentNode.tagName){s.tC=this.mirror.inputWatcher.getElementValue(t.parentNode,t.textContent);break}this.utils.DOM.isElementContentDisabled(t.parentNode)?s.tC=this.utils.StarifyString(t.textContent.trim()):s.tC=t.textContent;break;case Node.ELEMENT_NODE:s.tN=a.tagName,s.a={};var d=a.shadowRoot&&a.shadowRoot.host===a;d&&(s.sH=!0);for(var f=0;f<a.attributes.length;f++){var p=a.attributes[f];s.a[p.name.toLowerCase()]=p.value}switch(t.tagName){case"IMG":var v=this;this.utils.DOM.shouldMaskIMG(t)&&this.utils.DOM.maskIMG(s,t}));break;case"INPUT":case"SELECT":case"TEXTAREA":s.a.value=this.mirror.inputWatcher.getElementValue(t,t.value)}if("SCRIPT"==a.tagName||"NOSCRIPT"==a.tagName)break;var m,g=e&&a.childNodes.length;if((d||g)&&(s.cN=[]),d){this.setNodeHostID(a.shadowRoot,s.i);var y=this.serializeNode(a.shadowRoot,!0);s.cN.push(y)}if(g)(m=s.cN).push.apply(m,r(this.getSerializedDocument(a)))}return this.mirror.visitNode&&this.mirror.visitNode(t,s,{serializeNode:this.serializeNode.bind(this)}),this.compressNode(s)}},{key:"serializeAddedAndMoved",value:function(t,e,n){var i=this,r=t.concat(e).concat(n),o=new Qt.NodeMap;r.forEach}));var s=[];return o.keys().forEach((function(t){for(var e=o.get(t),n=e.keys();n.length;){for(var r=n[0];r.previousSibling&&e.has(r.previousSibling);)r=r.previousSibling;for(;r&&e.has(r);){var a=i.serializeNode(r);a.previousSibling=i.serializeNode(r.previousSibling),a.parentNode=i.serializeNode(r.parentNode),s.push(a),e.delete(r),r=r.nextSibling}n=e.keys()}})),s}},{key:"serializeAttributeChanges",value:function(t){var e=this,n=new Qt.NodeMap;Object.keys(t).forEach((function(i){t[i].forEach((function(t){var r=n.get(t);r||((r=e.serializeNode(t)).a={},n.set(t,r)),r.a[i]=e.compress(t.getAttribute(i))}))}));var i=[];return n.keys().map((function(t){var e=n.get(t);switch(t.tagName){case"INPUT":case"SELECT":case"TEXTAREA":if(t.value){delete e.a.value;break}}p(e.a)||i.push(e)})),i}},{key:"compressNode",value:function(t){if((t.tC||t.a)&&(t.c=1),t.tC&&(t.tC=this.compress(t.tC)),t.a){var e=this;Object.keys(t.a).forEach}))}return t}},{key:"applyChanged",value:function(t){var e=this,n=this,i=t[0],r=i.removed.map})),o=this.serializeAddedAndMoved(i.added,i.reparented,i.reordered),s=this.serializeAttributeChanges(i.attributeChanged),a=i.characterDataChanged.map((function(t){var e=n.serializeNode(t);return t.parentNode&&"TEXTAREA"===t.parentNode.tagName&&(e.tC=n.mirror.inputWatcher.getElementValue(t.parentNode,t.textContent)),n.utils.DOM.isElementContentDisabled(t.parentNode)?e.tC=n.utils.StarifyString(t.textContent.trim()):e.tC=t.textContent,e}));p(r)&&p(o)&&p(s)&&p(a)||this.mirror.applyChanged(r,o,s,a),i.removed.forEach((function(t){if(t&&t.shadowRoot){var i=n.knownNodes.get(t.shadowRoot);if(void 0!==i){if(!e.shadowRoots[i])return;n.unregisterShadowRoot(i)}}if(t._lsshadowroots){var r,o=Zt(t._lsshadowroots);try{for(o.s();!(r=o.n()).done;){var s=r.value,a=n.knownNodes.values[s];if(void 0!==a){if(!e.shadowRoots[a])continue;n.unregisterShadowRoot(a)}}}catch(t){o.e(t)}finally{o.f()}}n.forgetNode(t)}))}},{key:"registerShadowRoot",value:function(t,e){var n=this;t._lsmsummary=new Qt({rootNode:t,callbac},queries:[{all:!0}]}),this.mirror.addShadowListeners(t),this.shadowRoots[e]=t,ee("registered shadow root",e)}},{key:"unregisterShadowRoot",value:function(t){var e=this.shadowRoots[t];e?(delete this.shadowRoots[t],this.mirror.removeShadowListeners(e),ee("unregistered shadow root",t)):ee("Errror:","shadow root does not exists",t)}},{key:"isTargetShadowRoot",valu}}]),t}(),ie=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),re=function(){return re=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},re.apply(this,arguments)},oe=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},se=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];H.apply(void 0,oe(["dom-mutation"],t,!1))},ae=function(t){function e(e){var n=e.utils,i=e.eventsStream,r=e.globalEvents,o=e.inputWatcher,s=e.formWatcher,a=e.hooks,l=e.aquireInterval,u=e.pageView,c=e.handlers,h=t.call(this)||this;return h.utils=n,h.eventsStream=i,h.globalEvents=r,h.inputWatcher=o,h.formWatcher=s,h.hooks=a,h.handlers=c,h.cachedAttrs={},h.resourcesAdded={},h.ticker=new lt({interval:l,fn:h.onTick.bind(h)}),h.pageView=u,h.watchedEvents={},h}return ie(e,t),e.prototype.Register=function(){},e.prototype.Unregister=function(){this.mirror&&this.mirror.disconnect(),this.watchedEvents.attachShadow&&this.hooks.Unbind(this.watchedEvents.attachShadow)},e.prototype.onTick=function(){p(this.cachedAttrs)||this.addEvent([],[],this.getAndFlushCachedAttrs(),[])},e.prototype.watchResoucesNodes=function(t){for(var e=this,n=function(t,n,i){e.resourcesAdded[n]||(e.eventsStream.Add(gt.RESOURCE_ADDED,{json_data:{type:t,href:n,base:e.pageView.GetBaseURL(),url:i}}),e.resourcesAdded[n]=!0)},i=0,r=t.length;i<r;i++){var o=t[i];switch(o.tN){case"LINK":if(o.a.rel)switch(o.a.rel){case"font":case"stylesheet":var s="";try{s=new URL(o.a.href,window.location.href).href}catch(t){continue}n(o.a.rel,o.a.href,s)}break;case"IMG":if(o.a["data-ls-disabled"])continue;var a="";try{a=new URL(o.a.src,window.location.href).href}catch(t){continue}n("image",o.a.src,a)}}},e.prototype.Handler=function(t,e,n,i){var r=this;n.length>0&&u()(n,(function(t){if(r.cachedAttrs[t.i]||(r.cachedAttrs[t.i]={}),r.cachedAttrs[t.i]=re(re({},r.cachedAttrs[t.i]),t.a),t.a&&t.a["data-ls-mask"]){var e=r.mirror.knownNodes.nodes[t.i];if(!e)return;var n=r;function i(t,i){var r={src:null,"data-ls-img":{w:t,h:i}};n.addEvent([],[],[{i:e._lsid,a:r}],[])}if(e.complete)return void i(e.width,e.height);e.onloa}}})),(t.length>0||e.length>0||i.length>0)&&this.addEvent(t,e,this.getAndFlushCachedAttrs(),i)},e.prototype.getAndFlushCachedAttrs=function(){var t=[];return u()(this.cachedAttrs})),this.cachedAttrs={},t},e.prototype.disableImage=function(t){if(t.complete)return{w:t.width,h:t.height};var e=this;return t.onload=function(){e.addEvent([],[],[{i:this._lsid,a:{"data-ls-img":{w:this.width,h:this.height}}}],[])},null},e.prototype.applyAttributesNodeData=function(t){this.addEvent([],[],[t],[])},e.prototype.addEvent=function(t,e,n,i){var r={rmvd:t,admd:e,attr:n,txt:i};this.watchResoucesNodes(e),this.eventsStream.Add(this.name,{json_data:r})},e.prototype.addShadowListeners=function(t){this.handlers.AddShadowListeners(t)},e.prototype.removeShadowListener},e.prototype.Init=function(){this.mirror=new ne(document,{inputWatcher:this.inputWatcher,initialize:this.onInitialized.bind(this),applyChanged:this.Handler.bind(this),visitNode:this.visitNode.bind(this),disableImage:this.disableImage.bind(this),applyAttributesNodeData:this.applyAttributesNodeData.bind(this),addShadowListeners:this.addShadowListeners.bind(this),removeShadowListeners:this.removeShadowListeners.bind(this),onAdoptedStyleSheets:this.onAdoptedStyleSheets.bind(this)},null,this.utils);var t=this;this.watchedEvents.attachShadow=this.hooks.Create(Element.prototype,"attachShadow",{after:function(){var e=this;j((function(){t.mirror&&e.shadowRoot?t.mirror.attachShadowRoot(e.shadowRoot):se("Error","mirror and shadowRoot should exists")}))}}),this.globalEvents.call("handlers.".concat(this.name,".inited"),this.rootID,this.children,this.mirror)},e.prototype.GetPageBody=function(){var t=this.mirror.getSerializedDocument(document);return JSON.stringify(t)},e.prototype.onInitialize},e.prototype.visitNode=function(t,e,n){switch(t.tagName){case"LINK":var i=t,r=this.processBlobLinkCSS(i);if(!r)return;var o=document.createTextNode(r);t.cloneNode().appendChild(o);var s=e.tN;e.tN="STYLE",e.a={"original-blob-href":e.a.href,"original-tag":s},e.cN=[n.serializeNode(o)];break;case"FORM":this.formWatcher.registerForm(t,e.i);break;case"INPUT":case"TEXTAREA":case"SELECT":this.inputWatcher.registerInput(t,e.i)}},e.prototype.onAdoptedStyleSheets=function(t){var e=this;if(t){var n=t.adoptedStyleSheets;if(n){var i=this,r=i.utils.DOM.GetNodeID(t);r?this.addAdoptedStyleSheets(r,n):setTimeout((function(){var r=i.utils.DOM.GetNodeID(t);r&&e.addAdoptedStyleSheets(r,n)}),0)}else se("adoptedStyleSheets not found")}},e.prototype.addAdoptedStyleSheets=function(t,e){var n=this.handlers.Get(gt.CSS_CHANGE);n?n.addAdoptedStyleSheets(t,e):se("cssChange handler not found")},e.prototype.processBlobLinkCSS=function(t){var e,n;if(!t.href.startsWith("blob:"))return"";try{n=(null===(e=t.sheet)||void 0===e?void 0:e.cssRules)||[]}catch(t){return se("Error: ",t),""}if(!n.length)return"";for(var i="",r=0,o=n;r<o.length;r++){var s=o[r];i+="".concat(s.cssText,"\n")}return i},e}(st),le=function(){function t(e){var n=e.limit,i=e.interval,r=e.onLimit;W(this,t),this.remaining=n,this.limit=n,this.onLimit=r,this.ticker=new lt({interval:i,fn:this.onTick.bind(this)}),this.counter=0}return z(t,[{key:"onTick",valu}},{key:"Use",value:function(t){!function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];H.apply(void 0,["Throttle"].concat(e))}("Use:",this.counter++),0==this.remaining?this.onLimit():0<this.remaining&&t(),this.remaining--}},{key:"Stop",valu}},{key:"Start",value:function(){this.ticker.Start(this.onTick.bind(this))}}]),t}();function ue(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var ce=function(t){tt(n,t);var e=ue(n);function n(t){var i,r=t.utils,o=t.eventsStream,s=t.aquireInterval,a=t.hooks;return W(this,n),(i=e.call(this)).utils=r,i.hooks=a,i.eventsStream=o,i.lastLocation="",i.throttle=new le({id:i.name+".throttle",interval:s,limit:2,onLimi}}),i.watchedEvents={},i.bindedHandler=i.Handler.bind(Q(i)),i}return z(n,[{key:"Register",value:function(){this.throttle.Start(),window.addEventListener("popstate",this.bindedHandler),window.history&&(this.watchedEvents={pushState:this.hooks.Create(window.history,"pushState",{after:this.bindedHandler}),replaceState:this.hooks.Create(window.history,"replaceState",{after:this.bindedHandler})})}},{key:"Unregister",value:function(){this.throttle.Stop(),window.removeEventListener("popstate",this.bindedHandler),this.watchedEvents.pushState&&this.hooks.Unbind(this.watchedEvents.pushState),this.watchedEvents.replaceState&&this.hooks.Unbind(this.watchedEvents.replaceState)}},{key:"addEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=window.location.href;(t||this.lastLocation!=e)&&(this.lastLocation=e,this.eventsStream.Add(this.name,{location:e}))}},{key:"Handler",value:function(t){var e=this,n=!1;t&&null!==t.force&&(n=t.force),n?this.addEvent(n):this.throttle.Use}))}}]),n}(at),h}(),de=function(t){function e(e){var n=e.utils,i=e.eventsStream,r=e.globalEvents,o=e.aquireInterval,s=t.call(this)||this;return s.selectEventLength=5,s.utils=n,s.eventsStream=i,s.lastValue=[],s.lastValueSelected=!1,s.value=[],s.setSupportShadow(!0),s.eventHandler=function(t){return j(s.Handler.bind(s),t)},r.on("handlers.".concat(gt.MUTATION,".inited"),(function(t,e,n){s.mirror=n})),s.ticker=new lt({interval:o}),s}return he(e,t),e.prototype.Registe},e.prototype.Unregiste},e.prototype.AddListener=function(t){void 0===t&&(t=document),t.addEventListener("selectionstart",this.eventHandler),t.addEventListener("selectionchange",this.eventHandler)},e.prototype.RemoveListener=function(t){void 0===t&&(t=document),t.removeEventListener("selectionstart",this.eventHandler),t.removeEventListener("selectionchange",this.eventHandler)},e.prototype.Handler=function(t){if(!this.mirror)return null;this.value=this.selectionArgs()},e.prototype.handleInterval=function(){this.utils.ArrayEqual(this.lastValue,this.value)||(this.lastValue=this.value.slice(),(this.value.length===this.selectEventLength||this.lastValueSelected)&&this.eventsStream.Add(this.name,{json_data:this.value}),this.lastValueSelected=this.value.length===this.selectEventLength)},e.prototype.i},e.prototype.l=function(t,e){if(!t.firstChild)return[t,e];t=t.firstChild;for(var n=0;n<e-1&&t.nextSibling;n++)t=t.nextSibling;return[t,0]},e.prototype.selectionArgs=function(){if(!window.getSelection)return[];if(!(t=window.getSelection())||"None"==t.type)return[];if("Caret"==t.type)return(e=this.id(t.anchorNode))?[e,t.anchorOffset]:[];if(!t.anchorNode||!t.focusNode)return[];var t,e=(n=this.l(t.anchorNode,t.anchorOffset))[0],n=n[1],i=(t=this.l(t.focusNode,t.focusOffset))[0],r=t[1];e=(i=(t=Boolean(e.compareDocumentPosition(i)&Node.DOCUMENT_POSITION_FOLLOWING))?[e,i]:[i,e])[0],i=i[1],n=(r=t?[n,r]:[r,n])[0],r=r[1];for(this.id(e)||(n=0);e&&!this.id(e)&&e!=i;)e=e.nextSibling||e.parentNode;for(this.id(i)||(r=0);i&&!this.id(i)&&i!=e;)i=i.previousSibling||i.parentNode;if(e==i&&n==r)return[];var o=this.id(e),s=this.id(i);return e&&i&&o&&s?[o,n,s,r,t]:[]},e}(at);function fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var pe=function(t){tt(n,t);var e=fe(n);function n(t){var i,r=t.utils,o=t.eventsStream,s=t.aquireInterval,a=t.globalEvents;return W(this,n),(i=e.call(this)).startTime=null,i.lastValue={el:null,x:0,y:0,lsid:null},i.value={el:null,x:0,y:0,json_data:{}},i.intervalID=0,i.setSupportShadow(!0),i.eventHandler=function(t){return j(i.Handler.bind(Q(i)),t)},i.utils=r,i.eventsStream=o,i.ticker=new lt({interval:s}),a.on("handlers.".concat(gt.MUTATION,".inited")})),i}return z(n,[{key:"Register",value:function(){this.startTime=null,this.Handler(),this.handleInterval(),this.AddListener(),this.ticker.Start(this.handleInterval.bind(this))}},{key:"Unregister",valu}},{key:"AddListener",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;t.addEventListener("scroll",this.eventHandler,!0)}},{key:"RemoveListener",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;t.removeEventListener("scroll",this.eventHandler,!0)}},{key:"isValueChanged",value:function(){var t=this.lastValue,e=t.x,n=t.y,i=t.el,r=t.lsid;return e!=this.value.x||n!=this.value.y||i!=this.value.el||this.value.json_data.lsid!=r}},{key:"handleInterval",value:function(){this.mirror&&this.isValueChanged()?(this.lastValue={el:this.value.el,x:this.value.x,y:this.value.y,lsid:this.value.json_data.lsid},this.eventsStream.Add(this.name,this.value,this.startTime),this.startTime=null):this.startTime=null}},{key:"Handler",value:function(t){t&&t.target&&null!==t.target.scrollLeft&&null!==t.target.scrollTop&&!isNaN(t.target.scrollLeft)&&!isNaN(t.target.scrollTop)&&this.mirror&&(this.startTime||(this.startTime=this.utils.Time.Duration()),this.value={x:t.target.scrollLeft,y:t.target.scrollTop,path:this.utils.DOM.FullPath(t.target),el:this.utils.DOM.ElementName(t.target),json_data:{lsid:this.mirror.knownNodes.get(t.target)}})}}]),n}(at);function ve(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var me=function(t){tt(n,t);var e=ve(n);function n(t){var i,r=t.utils,o=t.eventsStream;return W(this,n),(i=e.call(this)).utils=r,i.eventsStream=o,i.eventHandler=function(t){return j(i.Handler.bind(Q(i)),t)},i}return z(n,[{key:"Register",value:function(){window.addEventListener("blur",this.eventHandler)}},{key:"Unregister",value:function(){window.removeEventListener("blur",this.eventHandler)}},{key:"Handler",value:function(t){this.eventsStream.Add(this.name)}}]),n}(at);function ge(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var ye=function(t){tt(n,t);var e=ge(n);function n(t){var i,r=t.utils,o=t.eventsStream;return W(this,n),(i=e.call(this)).utils=r,i.eventsStream=o,i.eventHandler=function(t){return j(i.Handler.bind(Q(i)),t)},i}return z(n,[{key:"Register",value:function(){window.addEventListener("focus",this.eventHandler)}},{key:"Unregister",valu}},{key:"Handler",value:function(t){this.eventsStream.Add(this.name)}}]),n}(at),be=n(23),we=n.n(be),Se=function(}return z(t,[{key:"SetRecordingElementsMap",value:function(t){this.recordingElementsMap=t}},{key:"ToJSON",value:function(t){var e={nodeType:(t=t||this).nodeType};t.tagName?e.tagName=t.tagName.toLowerCase():t.nodeName&&(e.nodeName=t.nodeName),t.nodeValue&&(e.nodeValue=t.nodeValue);var n=t.attributes;if(n)for(var r=n.length,o=e.attributes=new Array(r),s=0;s<r;s++){var a=n[s];o[s]=[a.nodeName,a.nodeValue]}var l=t.childNodes;if(l)for(length=l.length,arr=e.childNodes=new Array(length),i=0;i<length;i++)arr[i]=toJSON(l[i]);return e}},{key:"ToDOM",value:function(t){"string"==typeof t&&(t=JSON.parse(t));var e,n=t.nodeType;switch(n){case 1:e=document.createElement(t.tagName);for(var r=t.attributes||[],o=0,s=r.length;o<s;o++){var a=r[o];e.setAttribute(a[0],a[1])}break;case 3:e=document.createTextNode(t.nodeValue);break;case 8:e=document.createComment(t.nodeValue);break;case 9:e=document.implementation.createDocument();break;case 10:e=document.implementation.createDocumentType(t.nodeName);break;case 11:e=document.createDocumentFragment();break;default:return e}if(1==n||11==n){var l=t.childNodes||[];for(i=0,len=l.length;i<len;i++)e.appendChild(toDOM(l[i]))}return e}},{key:"Name",value:function(t){var e,n,i=null!=t&&t.tagName?null==t||null===(e=t.tagName)||void 0===e?void 0:e.toLowerCase():"";if(""!=t.id)return"#"+t.id;if("function"==typeof(null==t||null===(n=t.className)||void 0===n?void 0:n.split)){var r,o=null==t||null===(r=t.className)||void 0===r?void 0:r.split(" ");return i+(null==o?void 0:o.join("."))}return i}},{key:"pathName",value:function(t){var e;return t.id?"#"+t.id:t==(null==t||null===(e=t.ownerDocument)||void 0===e?void 0:e.documentElement)?t.tagName:this.ElementName(t)}},{key:"fullPath",value:function(t,e){if(!t)return"";var n=[],i=1;for(n.push(this.pathName(t));!t.id&&(t=e(t,i))&&!t.id;){i++;var r=this.pathName(t);r&&n.unshift(r)}return n.join(" > ")||""}},{key:"FullPath",value:function(t){return t?this.fullPath(t})):""}},{key:"FullPathV2",value:function(t){if(t.composed&&t.target&&t.target.shadowRoot){var e=t.composedPath();return this.fullPath(e[0]}))}return t&&t.target?this.FullPath(t.target):""}},{key:"ElementName",value:function(t){if(t&&v(t)){if(t.id)return"#"+t.id;var e;if(t==(null==t||null===(e=t.ownerDocument)||void 0===e?void 0:e.documentElement))return t.tagName;var n,i,r,o,s,a,l,u=null===(n=t.tagName)||void 0===n?void 0:n.toLowerCase();"function"==typeof(null===(i=t.className)||void 0===i?void 0:i.split)&&t.className&&""!=(null===(r=t.className)||void 0===r?void 0:r.trim())&&(u+="."+(null===(o=t.className)||void 0===o||null===(s=o.trim())||void 0===s||null===(a=s.split(" "))||void 0===a||null===(l=a.filter})))||void 0===l?void 0:l.join(".")));for(var c=["data-ls-name","href","name","type"],h=0,d=c.length;h<d;h++){var f=c[h],p=t.getAttribute(f);if(p&&""!=p)return u+"[".concat(f,'="').concat(p,'"]')}return u}}},{key:"recordingElementExcluded",value:function(t){var e=(this.recordingElementsMap||{}).exclude;if(e)for(var n in e)if(t&&t.matches&&t.matches(n))return!0}},{key:"recordingElementIncluded",value:function(t){var e=(this.recordingElementsMap||{}).include;if(e)for(var n in e)if(t&&t.matches&&t.matches(n))return!0}},{key:"recordingElementMasked",value:function(t){var e=(this.recordingElementsMap||{}).mask;if(e)for(var n in e)if(t&&t.matches&&t.matches(n))return!0}},{key:"isElementContentDisabled",value:function(t){if(!t)return!1;var e=this;var n,i=(!(n=t).getAttribute||null===n.getAttribute("data-ls-enabled"))&&(!(!n.getAttribute||null===n.getAttribute("data-ls-disabled"))||!e.recordingElementIncluded(n)&&(!!e.recordingElementExcluded(n)||null));if("boolean"==typeof i)return i;for(;t.parentNode;)if(t=t.parentNode,"boolean"==typeof(i=this.isElementContentDisabled(t)))return i;return!1}},{key:"shouldMaskIMG",value:function(t){return!!this.recordingElementMasked(t)||null!==t.getAttribute("data-ls-mask")}},{key:"maskIMG",value:function(t,e,n){t.a.src=null,t.a["data-ls-img"]=this.disableImage(e,n)}},{key:"disableImage",value:function(t,e){return t.complete?{w:t.width,h:t.height}:(t.onload=function(){e&&e({i:this._lsid,a:{"data-ls-img":{w:this.width,h:this.height}}})},null)}},{key:"GetTextContent",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:128,i=t.childNodes||[],r=0,o=i.length;r<o;r++){var s=i[r];if(!this.isElementContentDisabled(s)&&3==s.nodeType&&(e+=" "+s.textContent).length>n)return e;s.childNodes&&(e=this.GetTextContent(s,e))}return e}},{key:"Content",value:function(t){var e,n;if(!t)return"";if(this.isElementContentDisabled(t))return"";var i=this.GetTextContent(t);if("INPUT"===t.tagName&&t.parentElement){var r=t.parentElement.querySelector("label[for='".concat(t.getAttribute("name"),"']"));r&&!this.isElementContentDisabled(r)?i=this.GetTextContent(r):"LABEL"===t.parentElement.tagName&&(i=this.GetTextContent(t.parentElement))}return(i=null===(e=i)||void 0===e||null===(n=e.replace(/\r?\n|\r/g," "))||void 0===n?void 0:n.trim())&&i.length>64?i.substr(0,59)+"[...]":i}},{key:"GetNodeID",valu}},{key:"IsNode",value:function(t){return"object"===("undefined"==typeof Node?"undefined":h(Node))?t instanceof Node:t&&"object"===h(t)&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}}]),t}(),Ee=function(}return z(t,[{key:"Reset",valu}},{key:"Duration",valu}},{key:"Now",valu}},{key:"IsValidDateObject",valu}},{key:"IsDate",valu}}]),t}(),ke=function(}return t.prototype.Reset=function(){this.nextSeq=1},t.prototype.Nex},t}(),Oe=function(){function t(){this.Time=new Ee,this.EventSeq=new ke,this.DOM=new Se,this.platform=we()}return t.prototype.StarifyString=function(t){if(!t)return t;for(var e="",n=0;n<t.length;n++){var i="*";" "===t[n]&&(i=" "),e+=i}return e},t.prototype.UUI},t.prototype.ArrayEqual=function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},t.prototype.getSystemInfo=function(){var t,e;return{resolution:{width:window.screen.width,height:window.screen.height},browser:{name:we().name,version:null===we()||void 0===we()?void 0:we().version,description:null===we()||void 0===we()?void 0:we().description},os:{name:null===(t=null===we()||void 0===we()?void 0:we().os)||void 0===t?void 0:t.family,version:null===(e=null===we()||void 0===we()?void 0:we().os)||void 0===e?void 0:e.version},product:null===we()||void 0===we()?void 0:we().product,device:this.getDeviceType()}},t.prototype.getWindowSize=function(){return[Math.max(window.innerWidth||0),Math.max(window.innerHeight||0)]},t.prototype.findFavIconHre},t.prototype.getUTMParams=function(){return{source:F("utm_source")||"",medium:F("utm_medium")||"",campaign:F("utm_campaign")||"",term:F("utm_term")||"",content:F("utm_content")||""}},t.prototype.getBaseURL=function(){var t=document.querySelector("base");if(t){var e=t.getAttribute("href");if(e&&""!=e)return e}return new RegExp(/^.*\//).exec(window.location.href)[0]},t.prototype.getCurrentUR},t.prototype.getDeviceTyp},t}(),Ie=function(){return Ie=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ie.apply(this,arguments)},Re=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},xe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];H.apply(void 0,Re(["EventsStream"],t,!1))},Ce=function(){function t(t){var e=t.conditions,n=t.utils,i=t.activity;this.events=[],this.conditions=null,this.enabled=!0,this.activity=null,this.Clear(),this.conditions=e,this.utils=n,this.enabled=!0,this.activity=i}return t.prototype.Enable=function(){this.enabled=!0},t.prototype.Disabl},t.prototype.IsEmpt},t.prototype.Events=function(){return this.events},t.prototype.Lengt},t.prototype.Clea},t.prototype.isEnabled=function(){return this.enabled},t.prototype.Al},t.prototype.Dump=function(t){return Re([],this.events.splice(0,t),!0)},t.prototype.Join=function(t){this.events=Re(Re([],this.events,!0),t,!0)},t.prototype.Add=function(t,e,n){void 0===n&&(n=this.utils.Time.Duration());var i={kind:kt(t),time:n};e&&(e.el&&(i.el=e.el),e.path&&(i.path=e.path),e.txt&&(i.txt=e.txt),e.x&&(i.x=parseInt(e.x,10)),e.y&&(i.y=parseInt(e.y,10)),e.json_data&&(i.json_data=JSON.stringify(e.json_data)),e.location&&(i.location=e.location),e.value&&(i.value=e.value),e.width&&(i.width=parseInt(e.width,10)),e.height&&(i.height=parseInt(e.height,10)));var r=!this.isEnabled();if(this.conditions.CheckEventData(Ie({name:t},i)),this.isEnabled()){if(r&&this.conditions.EventsConditions().includes(t))return void xe(t,"omit event with previous disabled events stream");var o=function(t){return void 0===t&&(t={}),!(t.x&&t.x<0||t.y&&t.y<0)}(e);if(!o)return;var s=this.utils.EventSeq.Next();i.seq=s,this.events.push(i),this.activity.applyEvent(t,n),e&&e.omitLog||xe(t,function(t,e,n){if(!e)return null;var i={t:n};return e.x&&(i.x=e.x),e.y&&(i.y=e.y),e.json_data&&(i.json_data=e.json_data),e.location&&(i.location=e.location),e.width&&(i.width=e.width),e.height&&(i.height=e.height),e.txt&&(i.txt=e.txt),e.value&&(i.value=e.value),i}(0,e,n))}},t}(),Ne=function(}return z(t,[{key:"Size",valu}},{key:"IsEmpty",valu}},{key:"Events",value:function(){return this.events}}]),t}(),Te=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},_e=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];H.apply(void 0,Te(["EventsBundler"],t,!1))},Ae=function(t){this.type=t},De=function(){function t(t){var e=t.eventsStream,n=t.transport,i=t.globalEvents,r=t.activity,o=t.pageView,s=t.utils;this.eventsStream=e,this.transport=n,this.globalEvents=i,this.activity=r,this.pageView=o,this.utils=s,this.activityTimeSum=0,this.ticker=new lt({interval:2e3}),this.Reset(),window.addEventListener("beforeunload",this.onUnload.bind(this),!1),window.addEventListener("unload",this.onUnload.bind(this),!1)}return t.prototype.Rese},t.prototype.onUnload=function(t){"string"==typeof this.pageView.ID()?this.send(!0):this.send(!0,new Ae("beacon_invalid_page_view_id"))},t.prototype.Star},t.prototype.Sto},t.prototype.nextSequenc},t.prototype.sequence=function(){return this.seq},t.prototype.send=function(t,e){var n=this;void 0===t&&(t=!1);var i=new Ne(this.eventsStream.Dump(1024));if(!i.IsEmpty()){var r=this.activity.getActivityTime({flush:!0}),o=r.activeTime,s=r.inactivity;_e("Snapshot size: ".concat(i.Size(),", activeTime: ").concat(o)),_e("Snapshot size: ".concat(i.Size(),", inactivity: ").concat(JSON.stringify(s)));var a=this.tabID();this.utils.EventSeq.Next(),this.transport.SendBundle({events:i.Events(),inactivity:s,activeTime:o,tabID:a}}),(function(t){return t&&"session_expired"==t.type?n.Stop():i.Size()>1024?(n.eventsStream.Clear(),n.Stop(),n.globalEvents.call("bundler.stream_overflow")):void n.eventsStream.Join(i.Events())}),{seq:this.sequence(),ad:o},t,e)}},t.prototype.tabID=function(){var t,e;return(null===(t=null===window||void 0===window?void 0:window.sessionStorage)||void 0===t?void 0:t.tabID)||(window.sessionStorage.tabID=this.utils.UUID()),null===(e=null===window||void 0===window?void 0:window.sessionStorage)||void 0===e?void 0:e.tabID},t}(),L},Pe=4e3,Me=function(){function t(){this.acitivtyEvents=[gt.MOUSE_MOVE,gt.TOUCH_MOVE,gt.MOUSE_CLICK,gt.VALUE_CHANGE,gt.LOCATION_CHANGE,gt.WINDOW_SCROLL,gt.SCROLL],this.bundleInited=!1,this.currentTime=0,this.lastActiveEventTime=0,this.lastActiveEventTimeSent=0,this.bundleStartTimestamp=0,this.lastEventIsActive=!1,this.events=[],this.activeTime=0,this.getActivityTime=this.getActivityTime.bind(this)}return t.prototype.Clear=function(){this.bundleInited=!1,this.currentTime=0,this.lastActiveEventTime=0,this.lastActiveEventTimeSent=0,this.bundleStartTimestamp=0,this.lastEventIsActive=!1,this.events=[],this.activeTime=0,this.getActivityTime=this.getActivityTime.bind(this)},t.prototype.isUserActionEven},t.prototype.applyEvent=function(t,e){var n=this.isUserActionEvent(t);this.bundleStartTimestamp=e,this.lastEventIsActive=n,this.events.push({name:t,time:e,isActive:n})},t.prototype.getActivityTime=function(t){var e=this;void 0===t&&(t={flush:!1});var n=t.flush,i=[];this.activeTime=0;var r=this.events.sort})),o=r.findIndex((function(t){return!0===t.isActive}))>-1,s=function(t,e){for(var n=t.length-1;n>=0;n-=1)if(e(t[n]))return n;return-1}(r})),a=this.bundleStartTimestamp-this.currentTime;!o&&a>=Pe?(i.push([this.currentTime,a]),this.currentTime=this.bundleStartTimestamp):r.forEach((function(t,n){var r=t.time;if(t.isActive){var o=s===n,a=r-e.lastActiveEventTime,l=e.bundleStartTimestamp-r,u=!e.lastEventIsActive&&o&&l>Pe;if(r>=e.currentTime){if(e.bundleInited)if(a<Pe)e.activeTime+=a;else(c=r-e.currentTime)&&i.push([e.currentTime,c]);if(u){var c=e.bundleStartTimestamp-r;i.push([r,c])}e.lastActiveEventTime=r,e.bundleInited=!0,e.currentTime=u?e.bundleStartTimestamp:r,e.lastActiveEventTimeSent=r}else!function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];H.apply(void 0,Le(["EventsBundler"],t,!1))}("event time ".concat(r," > bundle last event ").concat(e.currentTime)),e.currentTime=r}}));var l=this.activeTime>0?this.activeTime:0;return n&&this.flush(),{activeTime:l,inactivity:i}},t.prototype.flus},t}(),je=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];H.apply(void 0,["Visitor"].concat(e))},He=function(}return z(t,[{key:"Load",value:function(){this.id=a.get(this.cookieVisitorID());var t=(a.get(this.cookieSessionID())||"").split(":");this.sessionID=t[0],this.clusterID=t[1]||"",this.sessionTimestamp=Number(a.get(this.cookieSessionExp())),je("VisitorID:",this.id,"SID:",this.sessionID,"SEXP:",this.sessionTimestamp,"CID:",this.clusterID)}},{key:"getSessionIDWithClusterID",valu}},{key:"setCookie",value:function(t,e){a.set(t,e,{expires:3650,domain:this.options.Get("rootHostname"),sameSite:"Lax"}),je("Set cookie:",t,e,{expires:3650,domain:this.options.Get("rootHostname")})}},{key:"Set",value:function(t,e,n,i){this.sessionID=e,this.id=t,this.sessionTimestamp=n,this.clusterID=i,this.setCookie(this.cookieVisitorID(),this.id),this.setCookie(this.cookieSessionID(),this.getSessionIDWithClusterID()),this.setCookie(this.cookieSessionExp(),this.sessionTimestamp),je("Set:",this.id,this.sessionID,this.sessionTimestamp,this.clusterID)}},{key:"CleanUpSession",value:function(){a.remove(this.cookieSessionID()),a.remove(this.cookieSessionExp())}},{key:"ID",value:function(){return this.id}},{key:"ClusterID",value:function(){return this.clusterID}},{key:"SessionID",value:function(){return this.sessionID}},{key:"IsValid",value:function(){var t=this.SessionExpiration();return!!this.ID()&&!!this.SessionID()&&!!t&&1e3*t>this.utils.Time.Now()}},{key:"InvalidateSession",value:function(){var t=parseInt(this.utils.Time.Now()/1e3)-3e4;this.sessionTimestamp=t,this.setCookie(this.cookieSessionExp(),t)}},{key:"SessionExpiration",value:function(){return this.sessionTimestamp}},{key:"JSON",valu}},{key:"cookieVisitorID",value:function(){return this.withCookieSuffix("__ls_uid")}},{key:"cookieSessionID",value:function(){return this.withCookieSuffix("__ls_sid")}},{key:"cookieSessionExp",valu}},{key:"withCookieSuffix",value:function(t){return this.options.Get("rootHostname")?"".concat(t,"-").concat(this.options.TrackID()):t}}]),t}(),Ve=function(){return Ve=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Ve.apply(this,arguments)},Fe=function(){function t(t){var e=t.utils,n=t.options;this.utils=e,this.options=n,this.settings={consoleLogs:!1,networkLogs:!1,networkAllowList:[],minTimeOnPage:0,recordingElementsMap:null,debugForce:!1}}return t.prototype.Set=function(t){this.settings={consoleLogs:t.consoleLogs||!1,networkLogs:t.networkLogs||!1,minTimeOnPage:t.minTimeOnPage||0,networkAllowList:t.networkAllowList||[],recordingElementsMap:t.recordingElementsMap||null,debugForce:t.debugForce||!1},t&&t.recordingElements&&t.recordingElements.list&&(this.settings.recordingElementsMap=t.recordingElements.list.reduce((function(t,e){return e.enabled?(t[e.match_type]||(t[e.match_type]={}),t[e.match_type][e.element]=!0,Ve({},t)):Ve({},t)}),{}))},t.prototype.Settings=function(){return this.settings},t}(),U},qe=function(){function t(t){var e=t.utils;this.id=-1,this.creationTimestamp=0,this.isNewSession=!1,this.utils=e||new Oe,this.pageViewOptions={}}return t.prototype.ID=function(){return this.id},t.prototype.CreationTimestamp=function(){return this.creationTimestamp},t.prototype.IsNewSessio},t.prototype.SetID=function(t){this.id=t},t.prototype.SetCreationTimestamp=function(t){this.creationTimestamp=t},t.prototype.SetSessionStat},t.prototype.SetPageViewOption},t.prototype.GetPageViewInfo=function(t){var e=this.utils.getWindowSize(),n=e[0],i=e[1];return Ue(Ue({},this.utils.getSystemInfo()),{utm:this.utils.getUTMParams(),page_view:{title:t.title||document.title,viewport:{width:window.innerWidth,height:window.innerHeight},location:this.location(),page:{width:n,height:i,icon:this.getFaviconURL()}}})},t.prototype.location=function(){var t=this.GetBaseURL(),e={origin:window.location.origin,href:window.location.href,referrer:document.referrer,base:t};if(this.pageViewOptions.baseURL&&t){try{e.origin=new URL(t).origin}catch(n){e.origin=t}try{e.href=new URL(new URL(window.location.href).pathname,t).href}catch(t){}}return e},t.prototype.GetBaseURL=function(){var t=this.pageViewOptions.baseURL;if(t&&"string"==typeof t)return t;var e=this.utils.getBaseURL();return t&&"function"==typeof t&&(e=t(e)),e},t.prototype.getFaviconURL=function(){var t=this.utils.findFavIconHref();return""!=t&&"/"==t[0]?this.GetBaseURL()+t:t},t}(var Ge=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];H.apply(void 0,["handlers"].concat(e))},ze=function(}return z(t,[{key:"Register",value:function(t,e){e.setName(t),this.handlers[t]=e,e.supportShadow&&this.shadowHandlersEvents.push(t)}},{key:"CleanUp",value:function(){u()(this.handlers}))}},{key:"Init",value:function(){var t=[];return u()(this.handlers,(function(e,n){e.isDOMListener&&e.isDOMListener()&&e.Unregister();var i=e.Register();i&&(Array.isArray(i)?t=t.concat(i):t.pus}({kind:kt(n)},i)))})),t}},{key:"Get",valu}},{key:"IsSet",valu}},{key:"AddShadowListeners",value:function(t){var e=this;this.shadowHandlersEvents.forEach((function(n){var i=e.Get(n);i&&"function"==typeof i.AddListener?i.AddListener(t):Ge("Error: AddListener does not exists")}))}},{key:"RemoveShadowListeners",value:function(t){var e=this;this.shadowHandlersEvents.forEach((function(n){var i=e.Get(n);i&&"function"==typeof i.RemoveListener?i.RemoveListener(t):Ge("Error: RemoveListener does not exists")}))}}]),t}(}var Y},Ke=function(t){tt(n,t);var e=Xe(n);function n(t){var i,r=t.utils,o=t.eventsStream,s=t.hooks,a=t.throttleMax,l=t.throttleInterval;return W(this,n),(i=e.call(this)).utils=r,i.hooks=s,i.eventsStream=o,i.cssMap=new WeakMap,i.nextId=1,i.watchedEvents={},i.throttle=new le({interval:l,limit:a,onLimi}}),i}return z(n,[{key:"Register",valu}},{key:"Init",value:function(){var t=this;this.watchedEvents.insertRule=this.hooks.Create(window.CSSStyleSheet.prototype,"insertRule",{after:function(){var e=arguments,n=this;j((function(){t.throttle.Use((function(){var i=t.utils.DOM.GetNodeID(n.ownerNode);i?t.insertRule(i,e[0],e[1]):setTimeout((function(){i=t.utils.DOM.GetNodeID(n.ownerNode),t.insertRule(i,e[0],e[1])}),0)}))}))}}),this.watchedEvents.deleteRule=this.hooks.Create(window.CSSStyleSheet.prototype,"deleteRule",{after:function(){var e=arguments,n=this;j((function(){t.throttle.Use((function(){var i=t.utils.DOM.GetNodeID(n.ownerNode);t.deleteRule(i,e[0])}))}))}}),this.addAdoptedStyleSheetsHooks();var e=this.snapshot({styleOnly:!0,contentLessOnly:!0});this.eventsStream.Add(this.name,{json_data:e})}},{key:"Unregister",value:function(){this.watchedEvents.insertRule&&this.hooks.Unbind(this.watchedEvents.insertRule),this.watchedEvents.deleteRule&&this.hooks.Unbind(this.watchedEvents.deleteRule),this.cssMap=new WeakMap}},{key:"Handler",valu}},{key:"addAdoptedStyleSheets",valu}},{key:"sheetRules",value:function(t){try{return t.cssRules||t.rules}catch(t){return!1}}},{key:"snapshot",value:function(t){for(var e=t.styleOnly,n=void 0!==e&&e,i=t.contentLessOnly,r=void 0!==i&&i,o=[],s=0;s<(document.styleSheets||[]).length;s++){var a=document.styleSheets[s],l=this.sheetRules(a),u=this.utils.DOM.GetNodeID(a.ownerNode),c=(a.ownerNode.textContent||"").trim();if((!n||"STYLE"===a.ownerNode.tagName)&&((!r||""===c)&&l))for(var h=0;h<l.length;h++){var d="";try{d=a.cssRules[h].cssText}catch(t){}""!=d&&o.push({lsid:u,i:h,d:d})}}return{t:2,d:o}}},{key:"insertRule",value:function(t,e,n){var i={lsid:t,t:0,i:n,d:e};this.eventsStream.Add(this.name,{json_data:i})}},{key:"deleteRule",value:function(t,e){var n={lsid:t,t:1,i:e};this.eventsStream.Add(this.name,{json_data:n})}},{key:"addAdoptedStyleSheetsEvent",value:function(t,e,n){if(t&&e&&e.length){for(var i=[],r=0;r<e.length;r++){var o=e[r];if(o){var s=this.cssMap.get(o);if(s)i.push({i:s});else{var a=this.sheetRules(o);if(a){for(var l=[],u=0;u<a.length;u++){var c,h=null===(c=a[u])||void 0===c?void 0:c.cssText;h&&l.push({d:h,i:u})}i.push({i:this.nextId,r:l}),this.cssMap.set(o,this.nextId),this.nextId++}else Ye("rules not found")}}else Ye("sheet not found")}if(i.length){var d={lsid:t,t:3,i:n,d:i};this.eventsStream.Add(this.name,{json_data:d})}}}},{key:"onAddAdoptedStyleSheetsProto",valu}},{key:"addAdoptedStyleSheetsHooks",value:function(){var t=this,e=Object.getOwnPropertyDescriptor(window.ShadowRoot.prototype,"adoptedStyleSheets"),n=Object.getOwnPropertyDescriptor(window.Document.prototype,"adoptedStyleSheets"),i=function(e){return{ge},set:function(n){e.set.call(this,n),t.onAddAdoptedStyleSheetsProto(this,n)},enumerable:!0,configurable:!0}};e&&Object.defineProperty(window.ShadowRoot.prototype,"adoptedStyleSheets",i(e)),n&&Object.defineProperty(window.Document.prototype,"adoptedStyleSheets",i(n))}}]),n}(st),$e=function(){function t(){this.accountID="-1",this.websiteID="-1",this.settings={keystrokes:!1,rootHostname:null,minDuration:0}}return t.prototype.AccountID=function(){return this.accountID},t.prototype.SetAccountID=function(t){this.accountID=t,window.__lsAID=t},t.prototype.WebsiteID=function(){return this.websiteID},t.prototype.TrackI},t.prototype.SetWebsiteI},t.prototype.Get=function(t){return this.settings[t]},t.prototype.Set=function(t,e){this.settings[t]=e},t}(),Je=function(){function t(t,e,n){void 0===n&&(n={}),this.native=t[e],this.proto=t,this.fn=e,n.after&&this.After(n.after),n.afterAsync&&this.AfterAsync(n.afterAsync),n.before&&this.Before(n.before),this.Bind()}return t.prototype.Bind=function(){var t=this;this.proto[this.fn]=function(){var e=this;t.before&&t.before.apply(this,arguments);var n=t.native.apply(this,arguments);return t.after&&t.after.apply(this,arguments),t.afterAsync&&setTimeout}),0),n}},t.prototype.Unbin},t.prototype.After=function(t){this.after=t},t.prototype.AfterAsync=function(t){this.afterAsync=t},t.prototype.Before=function(t){this.before=t},t}(),Qe=function(}return t.prototype.CanBin},t.prototype.Create=function(t,e,n){if(this.hooks[e])return this.hooks[e];var i=new Je(t,e,n);return this.hooks[e]=i,i},t.prototype.Unbind=function(t){t.Unbind(),this.hooks[t.fn]=null},t}(),Ze=function(){function t(e){var n=this,i=e.utils,r=e.eventsStream,o=e.aquireInterval,s=(e.setInterval,e.options),a=e.globalEvents;W(this,t),this.utils=i,this.options=s,this.eventsStream=r,this.values={},this.inputs={},this.ticker=new lt({interval:o}),a.on("handlers.".concat(gt.MUTATION,".inited"),(function(t,e,i){n.mirror=i,n.registered||n.Register()})),this.fallback=!1,this.registered=!1}return z(t,[{key:"unregisterInput",value:function(t,e){this.inputs[e]&&delete this.inputs[e],t&&(t.removeEventListener("change",this.ChangeHandler.bind(this),!0),t.removeEventListener("input",this.ChangeHandler.bind(this),!0),t.removeEventListener("blur",this.SetHandler.bind(this),!0),t._lsWatched=!1)}},{key:"registerInput",value:function(t,e){this.inputs[e]=t,t._lsWatched||(t.addEventListener("change",this.ChangeHandler.bind(this),!0),t.addEventListener("input",this.ChangeHandler.bind(this),!0),t.addEventListener("blur",this.SetHandler.bind(this),!0),t._lsWatched=!0)}},{key:"watchInputNode",value:function(t){var e=this.mirror.knownNodes.get(t);e&&this.registerInput(t,e)}},{key:"watchProperty",value:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e),i=this;n&&Object.defineProperty(t,e,{set:function(t){var e=this;return j((function(){i.setNodeValue(e,t)})),n.set.call(this,t)},get:function(){return n.get&&n.get.call(this)}})}},{key:"Register",value:function(){var t=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value");t&&t.set?(this.watchProperty(HTMLInputElement.prototype,"value"),this.watchProperty(HTMLInputElement.prototype,"checked"),this.watchProperty(HTMLSelectElement.prototype,"value"),this.watchProperty(HTMLTextAreaElement.prototype,"value")):this.fallback=!0,this.ticker.Start(this.handleInterval.bind(this)),this.registered=!0}},{key:"ChangeHandler",valu}},{key:"SetHandler",value:function(t){var e=t.target;if(this.canRecordValues(e)){var n=this.mirror.knownNodes.get(e),i=this.getElementValue(e);if(e._lsLastValue===i)return;this.eventsStream.Add(gt.VALUE_SET,{value:i,path:this.utils.DOM.FullPath(e),el:this.utils.DOM.ElementName(e),json_data:{lsid:n}}),e._lsLastValue=i}}},{key:"setNodeValue",value:function(t,e){var n=this.getElementValue(t,e);if(null!==n){var i=this.mirror.knownNodes.get(t);i&&(this.values[i]={value:n,path:this.utils.DOM.FullPath(t),el:this.utils.DOM.ElementName(t),json_data:{lsid:i}})}}},{key:"handleInterval",value:function(){var t=this;u()(this.values})),this.values={}}},{key:"canRecordValues",value:function(t){return null==t.getAttribute("data-ls-disabled")&&(null!=t.getAttribute("data-ls-enabled")||this.options.Get("keystrokes"))}},{key:"getElementValue",value:function(t,e){var n=t.getAttribute("type"),i=this.canRecordValues(t),r=t.getAttribute("autocomplete"),o=null==e||void 0===e?t.value:e;if(["cc-additional-name","cc-csc","cc-exp-month","cc-exp-year","cc-exp","cc-family-name","cc-given-name","cc-name","cc-number","cc-type"].indexOf(r)>-1)return null;if(r&&0===r.indexOf("cc-"))return null;if(n)switch(n.toLowerCase()){case"checkbox":case"radio":return(null!=e||void 0!==e?!!e+0:t.checked+0)+"";case"number":case"date":case"datetime-local":case"time":case"week":case"month":case"range":return i?o:null;case"file":case"hidden":case"password":return null;case"submit":return o;default:return i?o:this.utils.StarifyString(o)}return i?o:this.utils.StarifyString(o)}}]),t}(),tn=function(){function t(e){var n=this,i=e.utils,r=e.eventsStream,o=e.options,s=e.globalEvents;W(this,t),this.utils=i,this.options=o,this.eventsStream=r,this.forms={},s.on("handlers.".concat(gt.MUTATION,".inited"),(function(t,e,i){n.mirror=i}))}return z(t,[{key:"unregisterForm",value:function(t,e){this.forms[e]&&delete this.forms[e],t&&(t.removeEventListener("submit",this.Handler.bind(this),!0),t._lsWatched=!1)}},{key:"registerForm",value:function(t,e){this.forms[e]=t,t._lsWatched||(t.addEventListener("submit",this.Handler.bind(this),!0),t._lsWatched=!0)}},{key:"watchFormNode",value:function(t){var e=this.mirror.knownNodes.get(t);e&&this.registerForm(t,e)}},{key:"Handler",value:function(t){var e=this.mirror.knownNodes.get(t.target);this.eventsStream.Add(gt.FORM_SUBMIT,{path:this.utils.DOM.FullPath(t.target),el:this.utils.DOM.ElementName(t.target),json_data:{lsid:e}})}}]),t}();function en(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var nn=null,rn=null,on=function(t){tt(n,t);var e=en(n);function n(t){var i,r=t.utils,o=t.eventsStream,s=t.aquireInterval;return W(this,n),(i=e.call(this)).startTime=null,i.lastPosition={x:0,y:0},i.position={x:0,y:0},i.utils=r,i.eventsStream=o,i.ticker=new lt({interval:s}),i.eventFunc=function(t){return j(i.Handler.bind(Q(i)),t)},i}return z(n,[{key:"Register",value:function(){return this.startTime=null,window.addEventListener("touchstart",this.eventFunc,!0),window.addEventListener("touchend",this.eventFunc,!0),window.addEventListener("touchmove",this.eventFunc,!0),window.addEventListener("touchcancel",this.eventFunc,!0),this.ticker.Start(this.Trigger.bind(this)),this.Get()}},{key:"Unregister",value:function(){this.startTime=null,window.addEventListener("touchstart",this.eventFunc,!0),window.addEventListener("touchend",this.eventFunc,!0),window.addEventListener("touchmove",this.eventFunc,!0),window.addEventListener("touchcancel",this.eventFunc,!0),this.ticker.Stop()}},{key:"isValueChanged",value:function(){var t=this.lastPosition,e=t.x,n=t.y;return e!=this.position.x||n!=this.position.y}},{key:"Handler",value:function(t,e){if(this.startTime||(this.startTime=this.utils.Time.Duration()),void 0!==t.changedTouches)for(var n=0;n<t.changedTouches.length;++n){var i=t.changedTouches[n],r=parseInt(i.clientX,10),o=parseInt(i.clientY,10),s=parseInt(i.pageX,10),a=parseInt(i.pageY,10);nn=parseInt(i.clientX,10),rn=parseInt(i.clientY,10),this.position={x:r,y:o,json_data:{rx:s,ry:a}}}}},{key:"Trigger",value:function(){this.isValueChanged()?(this.lastPosition={x:this.position.x,y:this.position.y,json_data:this.position.json_data},this.eventsStream.Add(this.name,this.position,this.startTime),this.startTime=null):this.startTime=null}},{key:"Get",value:function(){return null!=nn&&null!=rn?{x:nn,y:rn}:null}}]),n}(at),sn=function(){function t(e){var n=e.globalEvents;W(this,t),this.enabled={},this.list={},this.globalEvents=n}return z(t,[{key:"Register",valu}},{key:"SetEnabledList",value:function(t){var e=this;this.enabled=t||{},u()(this.list,(function(t,n){var i=e.enabled[n];i&&i.enabled&&(t.Enable(),t.setProps(i.properties))}))}},{key:"Scan",value:function(){var t=this;u()(this.list}))}}]),t}();function an(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return }var un=function(){function t(e){var n=e.globalEvents,i=e.name;W(this,t),this.name=i,this.props={},this.globalEvents=n,this.installed=!1,this.enabled=!1,this.ticker=new lt({interval:1e3})}return z(t,[{key:"debug",valu}},{key:"setName",value:function(t){this.name=t}},{key:"Enable",value:function(){this.enabled=!0}},{key:"Disable",value:function(){this.enabled=!1}},{key:"setInstalled",value:function(){this.globalEvents.call("integration.installed",{name:this.name,props:this.props}),this.installed=!0}},{key:"setProps",value:function(t){this.debug("props set:",t),this.props=ln(ln({},this.props),t)}},{key:"isEnabled",value:function(){return this.enabled}},{key:"isInstalled",value:function(){return this.installed}},{key:"scan",value:function(){var t=this;if(!this.isInstalled())if(this.check())this.setInstalled();else{var e=0;this.ticker.Start((function(){e>t.maxAttemps&&t.ticker.Stop(),t.check()&&(t.setInstalled(),t.ticker.Stop()),e++}))}}}]),t}();function cn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var hn,dn,fn,pn=function(t){tt(n,t);var e=cn(n);function n(t){var i,r=t.utils,o=t.maxAttemps,s=t.globalEvents,a=t.xhrTransport,l=t.visitor,u=t.JSAPI;return W(this,n),(i=e.call(this,{globalEvents:s,name:"Intercom"})).utils=r,i.maxAttemps=o,i.xhrTransport=a,i.visitor=l,i.JSAPI=u,i.inited=!1,i.propsSended=!1,i.properties={profile_link:!1,event_link:!1},i}return z(n,[{key:"check",value:function(){if("function"==typeof window.Intercom){var t=window.Intercom("getVisitorId");return!!t&&(this.setProps({visitor_id:t}),this.props["link.event"]&&this.JSAPI.getSessionURL((function(t,e){e&&window.Intercom("trackEvent","LiveSession",{sessionURL:t})})),this.props["link.profile"]&&this.JSAPI.getSessionURL})),!0)}return!1}}]),n}(un),vn=[String,Number,Boolean],mn=function(t){retur}(t)||~vn.indexOf(t.constructor)},gn=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((n=isNaN(n)?n:{maxDepth:n}).maxDepth=n.maxDepth||hn,n.replace=n.replace||fn,i<n.maxDepth){var r=i+1;if(mn(e))return e;if(Array.isArray(e)){var o=[];return e.length>n.maxKeys/Math.pow(2,i)&&(e=e.slice(0,n.maxKeys/Math.pow(2,i))).push(n.replace),e.map((function(e){mn(e)?void 0!==e&&e.constructor==String&&e.length>n.maxString?o.push(e.substr(0,n.maxString)+"[...]"):o.push(e):o.push(t(e,n,r))})),o}var s={},a=0;for(var l in e)if(a<n.maxKeys/Math.pow(2,i))try{a++,mn(e[l])?void 0!==e[l]&&e[l].constructor==String&&e[l].length>n.maxString?s[l]=e[l].substr(0,n.maxString)+"[...]":s[l]=e[l]:s[l]=t(e[l],n,r)}catch(t){}else s.__lsMaxKeys__=!0;return s}return n.replace};gn.config=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};hn=t.maxDepth||hn,dn=t.maxString||dn,fn=t.replace||fn},gn.reset=function(){hn=10,dn=256,fn=void 0},gn.reset();var yn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),bn=function(t){function e(e){var n=e.utils,i=e.eventsStream,r=e.options,o=e.hooks,s=e.globalEvents,a=e.enabled,l=t.call(this)||this;return l.utils=n,l.options=r,l.eventsStream=i,l.hooks=o,l.globalEvents=s,l.errorFunc=function(t){return j(l.ErrorHandlder.bind(l),t)},l.exceptionFunc=function(t){return j(l.ExceptionHandler.bind(l),t)},l.maxLogsPerPage=256,l.maxErrorsPerPage=256,l.maxObjDepth=3,l.maxObjKeys=32,l.maxStringLength=128,l.watchedEvents={},l.buff=[],l.enabled=a||!1,l.inited=!1,l}return yn(e,t),e.prototype.Register=function(){var t=this;window.addEventListener("error",this.errorFunc,!0),window.addEventListener("unhandledrejection",this.exceptionFunc,!0),this.logCounter=0,this.errCounter=0,this.logReached=!1,this.errReached=!1;var e=this;this.hooks.CanBind(console,"log")&&(this.watchedEvents={warn:this.hooks.Create(console,"warn",{before:function(){e.Console("warn",arguments)}}),error:this.hooks.Create(console,"error",{before:function(){e.Console("error",arguments)}}),log:this.hooks.Create(console,"log",{before:function(){e.Console("log",arguments)}}),info:this.hooks.Create(console,"info",{befor}})}),this.globalEvents.once("api.session.inited",(function(e){var n=e.settings;t.inited=!0,t.enabled=n.consoleLogs,t.debugForce=n.debugForce,t.enabled?t.buff.length&&(u()(t.buff})),t.buff=[]):t.buff=[]}))},e.prototype.addEvent=function(t,e){this.enabled&&this.eventsStream.Add(t,e),this.inited||this.buff.push({type:t,obj:e,time:this.utils.Time.Duration()})},e.prototype.Unregister=function(){window.removeEventListener("error",this.errorFunc,!0),window.removeEventListener("unhandledrejection",this.exceptionFunc,!0),this.watchedEvents.warn&&this.hooks.Unbind(this.watchedEvents.warn),this.watchedEvents.error&&this.hooks.Unbind(this.watchedEvents.error),this.watchedEvents.log&&this.hooks.Unbind(this.watchedEvents.log),this.watchedEvents.info&&this.hooks.Unbind(this.watchedEvents.info)},e.prototype.ErrorHandlder=function(t){if(!this.isMax("err",this.maxErrorsPerPage)){var e=t.message,n=t.filename,i=t.lineno,r=wn(t.error),o=n||i||r?[n,i,r]:null;(e||n||i||r)&&this.addEvent(gt.ERROR,{value:e,json_data:o})}},e.prototype.ExceptionHandler=function(t){this.isMax("err",this.maxErrorsPerPage)||this.addEvent(gt.ERROR,{value:"Uncaught (in promise)",json_data:[t.reason]})},e.prototype.ConsoleError=function(t){if(!this.isMax("err",this.maxErrorsPerPage)){var e={json_data:t};e.omitLog=!!this.debugForce&&!0,this.addEvent(gt.ERROR,e)}},e.prototype.isMax=function(t,e){return this["".concat(t,"Counter")]>=e?(this["".concat(t,"Reached")]||(this["".concat(t,"Reached")]=!0,this.addEvent(gt.LOG,{json_data:[bt.internal,"tracking.console.maxLogs",t]})),!0):(this["".concat(t,"Counter")]++,!1)},e.prototype.parseObject=function(t){return gn(t,{maxString:this.maxStringLength,maxDepth:this.maxObjDepth,maxKeys:this.maxObjKeys,replace:"_max_"})},e.prototype.Console=function(t,e){var n=this;if(this.debugForce||!this.isMax("log",this.maxLogsPerPage)){var i=[];if(e){if(!this.debugForce&&window.__ls_debug&&"log"===t&&"string"==typeof e[0]&&"[LS]"===e[0].substr(0,4))return;if(this.debugForce&&!Array.isArray(e)&&(e=[e]),u()(Array.prototype.slice.call(e,0,this.maxObjKeys)})),t===wt.error)this.ConsoleError(i);else{var r={json_data:[bt[t]||-1,i]};r.omitLog=!!this.debugForce&&!0,this.addEvent(gt.LOG,r)}}}},e}(at),wn=function(t){if(t&&t.stack){for(var e=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,n=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,i=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,r=t.stack.split("\n"),o=[],s=void 0,a=0,l=void 0,u=r.length;a<u;++a){if(l=e.exec(r[a])){var c=l[2]&&-1!==l[2].indexOf("native");s={url:c?null:l[2],func:l[1]||"?",args:c?[l[2]]:[],line:l[3]?+l[3]:null,column:l[4]?+l[4]:null}}else if(l=i.exec(r[a]))s={url:l[2],func:l[1]||"?",args:[],line:+l[3],column:l[4]?+l[4]:null};else{if(!(l=n.exec(r[a])))continue;s={url:l[3],func:l[1]||"?",args:l[2]?l[2].split(","):[],line:l[4]?+l[4]:null,column:l[5]?+l[5]:null}}!s.func&&s.line&&(s.func="?"),o.push(s)}return o.length?(o[0].column||void 0===t.columnNumber||(o[0].column=t.columnNumber+1),{name:t.name,message:t.message,url:window.location.href,stack:o}):null}}var En="int",kn="float",On="bool",In="str",Rn=[En,kn,On,In}function Cn(t,e){switch(e){case In:return"string"==typeof t;case En:return xn(t)&&Number.isInteger(t);case kn:return xn(t);case On:return"boolean"==typeof t;default:return!1}function Tn(t,e){return e===In?t.slice(0,256):}function An(t){var e=[],n=f(t=t||{},(function(n,i){var r=t[i],o="",s="",a="";if(Rn.forEach((function(t){if(!o){var e=function(t,e){var n=e.lastIndexOf(t),i=e.length,r=e.slice(n,n+i)===t,o=[];return r&&o.push(n,i),[r].concat(o)}("_".concat(t),i),n=Sn(e,2),r=n[0],l=n[1];o=r,s=i.slice(0,l),a=t}})),o)return Cn(r,a)?Be({name:Nn(s)},_n(a),Tn(r,a)):void e.push("".concat(JSON.stringify(r)," is not typeof ").concat(a));var l=function(t){var e=parseFloat(t),n=parseInt(t);return e===n?Cn(n,En)?[n,En]:[]:Cn(e,kn)?[e,kn]:Cn(t,In)?[t,In]:Cn(t,On)?[t,On]:[]}(r),u=Sn(l,2),c=u[0],h=u[1];return h?Be({name:Nn(i)},_n(h),Tn(c,h)):void 0})).filter}));return n.length>50?[null,"max custom properties exceeded"]:[n,e.length?e:null]}function Dn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var Ln=function(t){tt(n,t);var e=Dn(n);function n(t){var i,r=t.utils,o=t.maxAttemps,s=t.globalEvents,a=t.xhrTransport,l=t.visitor,u=t.options,c=t.JSAPI;return W(this,n),(i=e.call(this,{globalEvents:s,name:"LiveChat"})).utils=r,i.maxAttemps=o,i.xhrTransport=a,i.visitor=l,i.options=u,i.JSAPI=c,i.inited=!1,i.propsSended=!1,i.isLivechatReady=!1,i.properties={},i}return z(n,[{key:"onLivechatReady",value:function(){var t=this.options.AccountID(),e=this.visitor.ID(),n=this.visitor.SessionID();if(e&&n){this.isLivechatReady=!0;var i="".concat(t,".").concat(e,".").concat(n);window.LiveChatWidget.call("set_session_variables",{livesessionData:btoa(i)})}else console.error("(livechat-integration): visitorID and sessionID cannot be empty")}},{key:"check",value:function(){if(this.isLivechatReady)return!0;var t=window.LiveChatWidget;return"object"===h(t)&&t.on&&t.on("ready",this.onLivechatReady.bind(this)),this.isLivechatReady}}]),n}(un);function Pn(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Mn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,a=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){a=!0,o=t},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw o}}}}function Mn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function jn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var Hn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];H.apply(void 0,["PerformanceHandler"].concat(e))},Vn=function(t){tt(n,t);var e=jn(n);function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.eventsStream;return W(this,n),(t=e.call(this)).eventsStream=r,t.fcp=null,t.domLoaded=null,t.pageLoaded=null,t.cb=null,t.backOffIntervalMs=500,t.backOffMaxMs=3e4,t.streamBuffer={fcp:null,domLoaded:null,pageLoaded:null},t}return z(n,[{key:"Register",value:function(){}},{key:"Unregister",value:function(){}},{key:"Init",value:function(){this.observe()}},{key:"addEvent",value:function(){var t=this.getPerformanceInfo(),e={};t.fcp&&!this.streamBuffer.fcp&&(e.first_contentful_paint=t.fcp),t.domLoaded&&!this.streamBuffer.domLoaded&&(e.dom_loaded=t.domLoaded),t.pageLoaded&&!this.streamBuffer.pageLoaded&&(e.page_loaded=t.pageLoaded),Object.keys(e).length&&(Hn("Add Performance Event",JSON.stringify(e)),this.eventsStream.Add(gt.PERFORMANCE,{json_data:e}),this.streamBuffer={fcp:t.fcp,domLoaded:t.domLoaded,pageLoaded:t.pageLoaded})}},{key:"getPerformanceInfo",valu}},{key:"observe",value:function(){var t=window.performance;if(t){"PerformanceObserver"in window&&this.observerAPI();var e=t.getEntriesByType("navigation");e&&e.length?this.navigationAPI(e):t.timing&&this.deprecatedTimingAPI()}}},{key:"observerAPI",value:function(){var t=this;Hn("use PerformanceObserver API");var e=new PerformanceObserver((function(n,i){for(var r,o,s=n.getEntries(),a=0;a<s.length;a++){var l=s[a];if(l instanceof PerformanceNavigationTiming){r=l.domComplete-l.requestStart,o=l.loadEventEnd-l.requestStart;break}}t.domLoaded=t.castPerformanceVal(r),t.pageLoaded=t.castPerformanceVal(o),t.addEvent(),t.domLoaded&&t.pageLoaded&&e.disconnect()}));e.observe({type:"navigation",buffered:!0});var n=new PerformanceObserver((function(e){var i,r=-1,o=Pn(e.getEntriesByName("first-contentful-paint"));try{for(o.s();!(i=o.n()).done;){r=i.value.startTime}}catch(t){o.e(t)}finally{o.f()}t.fcp=t.castPerformanceVal(r),t.addEvent(),t.fcp&&n.disconnect()}));n.observe({type:"paint",buffered:!0})}},{key:"navigationAPI",value:function(t){var e=this;Hn("use PerformanceNavigationTiming API");for(var n="",i="",r=0;r<t.length;r++){var o=t[r];n=o.domComplete-o.requestStart,i=o.loadEventEnd-o.requestStart}this.domLoaded=this.castPerformanceVal(n),this.pageLoaded=this.castPerformanceVal(i),this.fcp=this.castPerformanceVal(this.getFCP()),this.backOff((function(){return e.domLoaded&&e.pageLoaded}),(function(){return e.addEvent()}))}},{key:"deprecatedTimingAPI",value:function(){var t=this;Hn("use Timing API");var e=window.performance;this.domLoaded=this.castPerformanceVal(e.timing.domComplete-e.timing.requestStart),this.pageLoaded=this.castPerformanceVal(e.timing.loadEventEnd-e.timing.requestStart),this.fcp=this.castPerformanceVal(this.getFCP()),this.backOff})}))}},{key:"getFCP",value:function(){var t=window.performance.getEntriesByType("paint"),e=-1;if(t)for(var n=0;n<t.length;n++)"first-contentful-paint"===t[n].name&&(e=t[n].startTime);return e}},{key:"castPerformanceVal",value:function(t){var e=parseInt(t,10);return!e||isNaN(e)||e<=0?0:e}},{key:"backOff",value:function(t,e){var n=this;if("function"==typeof t&&"function"==typeof e)if(t())e();else var i=+Date.now(),r=0,o=setInterval((function(){if(++r>=10)return clearInterval(o),void e();var s=+Date.now()-i;(t()||s>=n.backOffMaxMs)&&(clearInterval(o),e())}),this.backOffIntervalMs)}}]),n}(st),Fn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.backOffIntervalMs,i=e.backOffMaxMs,r=e.maxTicks;W(this,t),this.backOffMaxMs=i||3e3,this.backOffIntervalMs=n||500,this.maxTicks=r||10}return z(t,[{key:"start",value:function(t,e){var n=this;if("function"==typeof t&&"function"==typeof e)if(t())e();else var i=+Date.now(),r=0,o=setInterval((function(){if(++r>=n.maxTicks)return clearInterval(o),void e();var s=+Date.now()-i;(t()||s>=n.backOffMaxMs)&&(clearInterval(o),e())}),this.backOffIntervalMs)}}]),t}();function Un(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=nt(t);if(e){var r=nt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return et(this,n)}}var qn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];H.apply(void 0,["TechnologyScan"].concat(e))},Bn=function(t){tt(n,t);var e=Un(n);function n(t){var i,r;return W(this,n),(r=e.call(this)).backoff=new Fn({backOffIntervalMs:500,backOffMaxMs:3e3}),r.technologies=(Be(i={},"shopify",(function(){return window.Shopify&&window.Shopify.theme&&!0})),Be(i,"intercom",(function(){return window.Intercom&&!0})),Be(i,"livechat"})),i),r.eventsStream=t,r}return z(n,[{key:"Register",value:function(){}},{key:"Unregister",value:function(){}},{key:"Init",value:function(){this.scan()}},{key:"scan",value:function(){var t=this;qn("start scanning...");var e=Object.keys(this.technologies),n={};this.backoff.start((function(){return qn("scanning tick..."),e.forEach((function(i,r){if(qn("scan ".concat(i," technology")),t.technologies[i]){var o=!!t.technologies[i]();o&&e.splice(r,1),n[i]=o}else e.splice(r,1)})),!e.length}),(function(){qn("scanned technologies: ",JSON.stringify(n)),t.eventsStream.Add(gt.TECHNOLOGY,{json_data:n})}))}}]),n}(st);function Wn(t){var e;try{return new URL(t,null===(e=n.g.window.document)||void 0===e?void 0:e.baseURI).href}catch(t){}return }var zn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),Xn=function(){return Xn=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},Xn.apply(this,arguments)},Y},K},$n=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Jn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];H.apply(void 0,$n(["DevtoolsNetwork"],t,!1))},Qn=function(t){function e(e){var n=e.utils,i=e.eventsStream,r=e.options,o=e.hooks,s=e.globalEvents,a=t.call(this)||this;return a.filterHeaders=function(t){for(var e=["authorization","proxy-authorization","cookie"],n=0,i=Object.entries(t);n<i.length;n++){var r=i[n],o=r[0],s=r[1];e.includes(o.toLowerCase())?t[o]=a.mask:(null==s?void 0:s.length)>a.maxHeaderLength&&(t[o]="".concat(null==s?void 0:s.slice(0,a.maxHeaderLength)," [...]"))}return t},a.ab2str=function(t){var e="";if(!("TextDecoder"in window)){var n=new TextDecoder("utf-8"),i=new Uint8Array(t);e=n.decode(i)}return e},a.utils=n,a.options=r,a.eventsStream=i,a.hooks=o,a.globalEvents=s,a.networkAllowList=[],a.maxBodyLength=2048,a.maxHeaderLength=1024,a.maxErrorsPerPage=256,a.watchedEvents={},a.buff=[],a.pendingReqs={},a.enabled=!1,a.inited=!1,a.mask="[omitted]",a.logCounter=0,a.errCounter=0,a.NetLogCounter=0,a.NetErrorCounter=0,a.NetErrorReached=!1,a.NetLogReached=!1,a.logReached=!1,a.errReached=!1,a}return zn(e,t),e.prototype.logIsAllow=function(t){try{var e=Wn(t);return e.indexOf("https://rs.livesession.io")>-1?{allowLog:!1,allowLogRequestBody:!1,allowLogResponseBody:!1}:function(t,e){try{var n=(null==t?void 0:t.filter((function(t){return t.rule===St})).length)>0,i=(null==t?void 0:t.filter})).length)>0;if(!t.length||!n)return{allowLog:!0,allowLogRequestBody:!1,allowLogResponseBody:!1};var r=!1,o=!1,s=null,a=null,l=null;return t.forEach((function(t){if(function(t,e){try{if(null==e?void 0:e.toLowerCase().match(null==t?void 0:t.toLowerCase()))return!0}catch(t){}return!1}(null==t?void 0:t.url_pattern,e))switch(t.rule){case St:r=!0,!1!==a&&(a=null==t?void 0:t.request_body),!1!==l&&(l=null==t?void 0:t.response_body);case Et:o=!0}})),null===s&&(s=i?r&&!o:r),{allowLog:s,allowLogRequestBody:!!a,allowLogResponseBody:!!l}}catch(t){Jn(t)}return{allowLog:!0,allowLogRequestBody:!1,allowLogResponseBody:!1}}(this.networkAllowList,e)}catch(t){Jn(t)}return{allowLog:!1,allowLogRequestBody:!1,allowLogResponseBody:!1}},e.prototype.HandleRequests=function(){if(window.fetch&&window.Promise){var t=this,e=window.fetch;window.fetch=function(){for(var n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];var o=i[0],s=i[1];s||(s=new Request(o||""));var a=t.addPendingReq(s,null==s?void 0:s.method,o||"");return Promise.resolve(e.apply(window,i)).then((function(t){return Yn(n,void 0,void 0,(function(){var e;return Kn(this,(function(n){switch(n.label){case 0:return e=null,t?[4,(null==t?void 0:t.clone()).text().then((function(t){return t}))]:[3,2];case 1:e=n.sent(),n.label=2;case 2:return[2,{resp:t,body:e}]}}))}))})).then((function(e){var n;if(a){var i=null===(n=null==e?void 0:e.resp)||void 0===n?void 0:n.clone();return i||(i=new Response),i._lsid=a,i.size=Gn(null==e?void 0:e.body),i.responseType="text",i.responseText=null==e?void 0:e.body,t.onComplete(i,gt.NET_LOG,"fetch"),null==e?void 0:e.resp}})).catch((function(e){if(a){var n=new Response;n._lsid=a,n.size=0,n.responseText="",t.onComplete(n,gt.NET_ERROR,"fetch")}}))}}if(window.XMLHttpRequest&&this.hooks.CanBind(window.XMLHttpRequest.prototype,"open")){var n=this;this.watchedEvents.setRequestHeader=this.hooks.Create(window.XMLHttpRequest.prototype,"setRequestHeader",{befor}}),this.watchedEvents.open=this.hooks.Create(window.XMLHttpRequest.prototype,"open",{before:function(t,e){var i=this;n.logIsAllow(e).allowLog&&(n.addPendingReq(this,t,e)&&(this.addEventListener("error",(function(){n.onComplete(i,gt.NET_ERROR,"xhr")})),this.addEventListener("load"}))))}}),this.watchedEvents.send=this.hooks.Create(window.XMLHttpRequest.prototype,"send",{before:function(t){t&&(null==this?void 0:this._lsid)&&n.pendingReqs[this._lsid]&&(n.pendingReqs[this._lsid].request.body=n.getRequestBody({body:t}))}})}},e.prototype.Register=function(){var t=this;this.NetErrorCounter=0,this.NetLogCounter=0,this.logReached=!1,this.errReached=!1,this.globalEvents.once("api.session.inited",(function(e){var n=e.settings,i=n.networkAllowList;t.inited=!0,t.enabled=n.networkLogs,t.networkAllowList=(null==i?void 0:i.list)||[],t.enabled&&t.HandleRequests(),t.enabled?t.buff.length&&(u()(t.buff,(function(e){var n;if(t.logIsAllow(null===(n=null==e?void 0:e.json_data)||void 0===n?void 0:n.url).allowLog){if(t.isMax(e.type,t.maxErrorsPerPage))return null;t.eventsStream.Add(e.type,e.obj,e.time)}})),t.buff=[]):t.buff=[]}))},e.prototype.getResponseBody=function(t){var e="";try{switch(t.responseType){case"arraybuffer":e=this.ab2str(null==t?void 0:t.response);case"json":case"blob":e=null==t?void 0:t.response;break;case"document":e=null==t?void 0:t.responseXML;break;case"text":case"":e=null==t?void 0:t.responseText;break;default:e=""}}catch(t){e="LiveSession: Error accessing response. ".concat(t)}return null==e&&(e=""),e.length>this.maxBodyLength&&(e="".concat(e.slice(0,this.maxBodyLength)," [...]")),null==e?void 0:e.toString()},e.prototype.getResponseLength=function(t){var e=0;try{switch(t.responseType){case"json":case"arraybuffer":case"blob":e=t.response?Gn(null==t?void 0:t.response):0;break;case"document":e=t.responseXML?Gn(null==t?void 0:t.responseXML):0;break;case"text":case"":e=(null==t?void 0:t.responseText)?Gn(null==t?void 0:t.responseText):0;break;default:e=0}}catch(t){console.error("getResponseLength: ".concat(t))}return e},e.prototype.getRequestBody=function(t){if(!t)return null;var e="";try{(null==t?void 0:t.body)&&(e=t.body)}catch(t){e="LiveSession: Error accessing request."}return e.length>this.maxBodyLength&&(e="".concat(e.slice(0,this.maxBodyLength)," [...]")),e},e.prototype.genRequestID=function(){return this.utils.UUID()},e.prototype.onComplete=function(t,e,n){var i=t._lsid;if(i&&this.pendingReqs[i]){var r={};t instanceof XMLHttpRequest&&(r=this.mapResponseXHR(t)),t instanceof Response&&(r=this.mapResponseFETCH(t)),this.pendingReqs[i]=Xn(Xn({},this.pendingReqs[i]),{status:t.status,time:Date.now()-this.pendingReqs[i].startTime,response:r});var o=this.pendingReqs[i];o.type=n,e===gt.NET_ERROR&&(o.status=0),o.status>=400&&(e=gt.NET_ERROR),o.request.headers=this.filterHeaders(o.request.headers),o.response.headers=this.filterHeaders(o.response.headers),o.url=Wn(o.url);var s=this.logIsAllow(o.url),a=s.allowLog,l=s.allowLogRequestBody,u=s.allowLogResponseBody;a&&(!l&&o.request.body&&(o.request.bodyExists=!!o.request.body,o.request.body=this.mask),!u&&o.response.body&&(o.response.bodyExists=!!o.response.body,o.response.body=this.mask),this.addEvent(e,{json_data:o})),delete this.pendingReqs[i]}},e.prototype.mapResponseFETCH=function(t){var e=this.getResponseBody(t),n=t.size,i={};return t.headers.forEach})),{headers:i,length:n,body:e}},e.prototype.mapResponseXHR=function(t){return{headers:this.mapHeaders(t.getAllResponseHeaders()),length:this.getResponseLength(t),body:this.getResponseBody(t)}},e.prototype.mapHeaders=function(t){return t.split(/[\r\n]+/).reduce((function(t,e){var n=t,i=e.split(": ");if(i.length>1){var r=i.shift(),o=i.join(": ");t[r]?n[r]+=", "+o:n[r]=o}return n}),{})},e.prototype.addHeader=function(t,e,n){var i=t._lsid;i&&this.pendingReqs[i]&&(this.pendingReqs[i].request.headers[e]=n)},e.prototype.addPendingReq=function(t,e,n){var i=t._lsid;return i&&delete this.pendingReqs[i],i=this.genRequestID(),this.pendingReqs[i]={id:i,request:{_lsid:i,headers:(null==t?void 0:t.headers)?null==t?void 0:t.headers:{},body:this.getRequestBody(t)},method:e&&e.toUpperCase(),url:n,startTime:Date.now()},t._lsid=i,i},e.prototype.addEvent=function(t,e){var n=this.utils.Time.Duration();if(this.enabled){if(this.isMax(t,this.maxErrorsPerPage))return null;this.eventsStream.Add(t,e,e.startTime,n)}this.inited||this.buff.push({type:t,obj:e,time:n})},e.prototype.Unregister=function(){this.watchedEvents.open&&this.hooks.Unbind(this.watchedEvents.open),this.watchedEvents.setRequestHeader&&this.hooks.Unbind(this.watchedEvents.setRequestHeader)},e.prototype.isMax=function(t,e){return this["".concat(t,"Counter")]>=e?(this["".concat(t,"Reached")]||(this["".concat(t,"Reached")]=!0,this.addEvent(gt.NET_LOG,{value:"internal",json_data:{value:"tracking.network.maxLogs.".concat(t)}})),!0):(this["".concat(t,"Counter")]++,!1)},e.prototype.open=function(t,e){console.warn({method:t,url:e})},e}(st),Zn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),ti=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},ei=function(t){function e(e,n,i){var r=t.call(this)||this;return r.hooks=e,r.utils=n,r.eventStream=i,r.nextId=1,r.animationsMap=new WeakMap,r.processAnimation=r.processAnimation.bind(r),r.animationMethodCalledEvent=r.animationMethodCalledEvent.bind(r),r}return Zn(e,t),e.prototype.Registe},e.prototype.Unregister=function(){this.removeAnimationHook(),this.nextId=0,this.animationsMap=new WeakMap},e.prototype.addAnimationHook=function(){var t=[window.Element.prototype,"animate"],e=t[0],n=t[1];if(this.hooks.CanBind(e,n)){var i=this;this.currentHook=this.hooks.Create(e,n,{afterAsync:function(){var t=this;j((function(){var e=t;i.onNodeAnimate(e)}))}})}},e.prototype.removeAnimationHoo},e.prototype.onNodeAnimate=function(t){var e=this;t.getAnimations().forEach((function(n){return e.processAnimation(t,n)}))},e.prototype.processAnimation=function(t,e){var n=this.utils.DOM.GetNodeID(t);if(n){var i=this.animationsMap.has(e),r=0;i?r=this.animationsMap.get(e):(r=this.nextId,this.animationCreatedEvent(n,this.nextId),this.animationsMap.set(e,this.nextId),this.nextId++);var o=ni.getKeyFrameEffect(e),s=o&&this.animationsMap.has(o);switch(o&&!s&&(this.keyFrameEffectCreatedEvent(n,o,r,this.nextId),this.animationsMap.set(o,this.nextId),this.nextId++),e.playState){case"finished":this.animationMethodCalledEvent(n,r,"finish");break;case"paused":this.animationMethodCalledEvent(n,r,"pause");break;case"running":this.animationMethodCalledEvent(n,r,"play")}if(!i)new ni(e,r,this.utils,this.animationMethodCalledEvent).addEventListeners()}},e.prototype.animationCreatedEvent=function(t,e){var n={lsid:t,t:1,i:e};this.eventStream.Add(this.name,{json_data:n})},e.prototype.animationMethodCalledEvent=function(t,e,n){var i={lsid:t,t:2,ai:e,m:n};this.eventStream.Add(this.name,{json_data:i})},e.prototype.keyFrameEffectCreatedEvent=function(t,e,n,i){var r={lsid:t,t:3,d:ii.create(e),i:i,ai:n};this.eventStream.Add(this.name,{json_data:r})},e}(st),ni=function(){function t(t,e,n,i){this.anim=t,this.id=e,this.utils=n,this.onListener=i,this.onFinish=this.onFinish.bind(this),this.onCancel=this.onCancel.bind(this),this.onRemove=this.onRemove.bind(this)}return t.prototype.addEventListeners=function(){this.anim.addEventListener("finish",this.onFinish),this.anim.addEventListener("cancel",this.onCancel),this.anim.addEventListener("remove",this.onRemove)},t.getKeyFrameEffect=function(t){return t.effect&&t.effect instanceof KeyframeEffect?t.effect:null},t.prototype.removeEventListener},t.prototype.onFinish=function(t){var e=this.getNodeIdFromEvent(t);e&&this.onListener&&this.onListener(e,this.id,"finish")},t.prototype.onCancel=function(t){var e=this.getNodeIdFromEvent(t);e&&this.onListener&&this.onListener(e,this.id,"cancel")},t.prototype.onRemove=function(t){this.getNodeIdFromEvent(t)&&this.onListener&&this.removeEventListeners()},t.prototype.getNodeIdFromEvent=function(t){var e=t.target;if(e){var n=e.effect;if(n){var i=n.target;if(i){var r=this.utils.DOM.GetNodeID(i);if(r)return r;!function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];H.apply(void 0,ti(["animations"],t,!1))}("node id not found from event")}}}},t}(),ii=function(}return t.create=function(t){var e=t.getKeyframes(),n=t.getTiming();return{frames:e.map((function(t){var e={};for(var n in t){if(["computedOffset"].includes(n))break;var i=t[n];e[n]=i}return e})),timing:{delay:n.delay,direction:n.direction,duration:n.duration,easing:n.easing,endDelay:n.endDelay,fill:n.fill,iterationStart:n.iterationStart,iterations:n.iterations},iterationComposite:t.iterationComposite,composite:t.composite}},t}(),ri=function(){return ri=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},ri.apply(this,arguments)},oi=function(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},si=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];H.apply(void 0,oi(["Recorder"],t,!1))},ai=function(){function t(t){var e=t.showScriptValidationMessage;si("version",1705323184),this.isSessionInited=!1,this.showScriptValidationMessage=e,this.pageViewFirstTime=!1,this.timeoutID=-1,this.JSAPI={init:this.init.bind(this),setOptions:this.setOptions.bind(this),newPageView:this.newPageView.bind(this),identify:this.identify.bind(this),track:this.track.bind(this),setCustomParams:this.identify.bind(this),invalidateSession:this.invalidateSession.bind(this),off:this.off.bind(this),optOut:this.optOut.bind(this),getSessionURL:this.getSessionURL.bind(this),getVisitorID:this.getVisitorID.bind(this),debug:this.debug.bind(this),debug_force:this.debugForce.bind(this),log:this.log.bind(this)};var n=new Oe,i=new $e,r=new He({utils:n,options:i}),o=new Fe({utils:n,options:i}),s=new qe({utils:n}),a=new Qe,l=new B({utils:n}),u=new J({options:i,globalEvents:l,visitor:r,pageView:s}),c=new Y({globalEvents:l}),h=new Me({utils:n}),d=new Ce({conditions:c,utils:n,activity:h}),f=new De({eventsStream:d,transport:u,globalEvents:l,activity:h,pageView:s,utils:n}),p=new ze({account:o}),v=new sn({globalEvents:l});v.Register("intercom",new pn({maxAttemps:30,utils:n,globalEvents:l,xhrTransport:u,visitor:r,JSAPI:this.JSAPI})),v.Register("livechat",new Ln({maxAttemps:30,utils:n,globalEvents:l,xhrTransport:u,options:i,visitor:r,JSAPI:this.JSAPI}));var m=new dt({utils:n,eventsStream:d,aquireInterval:125}),g=new on({utils:n,eventsStream:d,aquireInterval:125}),y=new Pt({utils:n,eventsStream:d,aquireInterval:500}),b=new Ze({utils:n,options:i,eventsStream:d,globalEvents:l,aquireInterval:500}),w=new tn({utils:n,options:i,eventsStream:d,globalEvents:l});p.Register(gt.MUTATION,new ae({utils:n,eventsStream:d,globalEvents:l,inputWatcher:b,formWatcher:w,hooks:a,aquireInterval:200,pageView:s,handlers:p})),p.Register(gt.LOCATION_CHANGE,new ce({utils:n,eventsStream:d,hooks:a,aquireInterval:500})),p.Register(gt.MOUSE_MOVE,m),p.Register(gt.TOUCH_MOVE,g),p.Register(gt.MOUSE_DOWN,new mt({utils:n,eventsStream:d})),p.Register(gt.MOUSE_UP,new pt({utils:n,eventsStream:d})),p.Register(gt.MOUSE_DOUBLE_CLICK,new Ct({utils:n,eventsStream:d})),p.Register(gt.WINDOW_RESIZE,new Tt({utils:n,eventsStream:d,aquireInterval:500})),p.Register(gt.WINDOW_SCROLL,y),p.Register(gt.SELECTION,new de({utils:n,eventsStream:d,globalEvents:l,aquireInterval:300})),p.Register(gt.SCROLL,new pe({utils:n,eventsStream:d,globalEvents:l,aquireInterval:300})),p.Register(gt.CSS_CHANGE,new Ke({utils:n,eventsStream:d,globalEvents:l,hooks:a,throttleMax:1024,throttleInterval:1e4})),p.Register(gt.MOUSE_CLICK,new Rt({utils:n,eventsStream:d,mouseMoveHandler:m,touchMoveHandler:g,windowScrollHandler:y})),p.Register(gt.LOG,new bn({utils:n,eventsStream:d,globalEvents:l,logsLimitPerPage:256,hooks:a})),p.Register(gt.PERFORMANCE,new Vn({eventsStream:d})),p.Register(gt.TECHNOLOGY,new Bn(d)),p.Register(gt.XHR_ERROR,new Qn({utils:n,eventsStream:d,globalEvents:l,logsLimitPerPage:256,hooks:a})),p.Register(gt.ANIMATION,new ei(a,n,d)),p.Register(gt.WINDOW_BLUR,new me({utils:n,eventsStream:d})),p.Register(gt.WINDOW_FOCUS,new ye({utils:n,eventsStream:d})),l.on("bundler.stream_overflow",this.onCrash.bind(this)),l.on("api.session.expired",this.onSessionExpired.bind(this)),l.on("api.session.malformed_data",this.onMalformedData.bind(this)),l.on("api.session.inited",this.onSessionInited.bind(this)),l.on("api.response.turn_off",this.off.bind(this)),l.on("handlers.".concat(gt.MUTATION,".inited"),this.onPageContentReceived.bind(this)),this.integrations=v,this.conditions=c,this.globalEvents=l,this.eventsStream=d,this.utils=n,this.bundler=f,this.visitor=r,this.account=o,this.connection=u,this.pageView=s,this.handlers=p,this.options=i,this.activity=h,this.identityData=null,this.newPageViewData=null,this.recordingRules=[{type:"event",name:Ot}],this.scanTechnologies=!1}return t.prototype.init=function(t,e){void 0===t&&(t=""),void 0===e&&(e={keystrokes:!1});var n=t.split(".");this.setOptions(ri(ri({},e),{accountID:n[0],websiteID:n[1]}))},t.prototype.createMessage=function(t){var e,an>'},i=document.createElement("div");null===(e=null===document||void 0===document?void 0:document.querySelector("body"))||void 0===e||e.appendChild(i),i.outerHTML='<div style="\n        margin: 30px!important;\n        position: fixed!important;\n        z-index:9999999999!important;\n        top:0!important;\n        left:0!important;\n        background-color:#ffe478!important;\n        padding: 12px 16px!important;\n        box-shadow: 4px 3px 11px  #000!important;\n        font-size: 14px!important;\n        border-radius: 4px!important;\n        color:#222!important;\n        font-family: sans-serif!important;\n        "><strong>LiveSession</strong> script status:\n        <ul style="padding:0; margin: 8px 0 0 0; list-style-type: none;"> \n        <li>'.concat(n(t.trackCodeValid)," Track ID (").concat(t.trackId,") </li> \n        <li>").concat(n(t.recordingEnabledValid)," Recording enabled ").concat(t.error_message?" (".concat(t.error_message,")"):""," </li>        \n        </ul></div>")},t.prototype.displayTrackCodeMessage=function(t){var e={trackId:"".concat(this.options.AccountID(),".").concat(this.options.WebsiteID()),trackCodeValid:"Invalid websiteID"!==t&&"Account not exists"!==t,recordingEnabledValid:void 0===t,error_message:t};this.createMessage(e)},t.prototype.invalidateSession=function(){this.visitor.InvalidateSession()},t.prototype.getVisitorID=function(t){var e=this;this.afterSessionIsInD())}),null)},t.prototype.getSessionURL=function(t){var e=this;this.afterSessionIsInited((function(){var n=e.pageView.IsNewSession();return t("".concat("https://app.livesession.io","/app/sessions/").concat(e.visitor.ID(),"/").concat(e.visitor.SessionID()),n)}),null)},t.prototype.identify=function(t){var e=this,n=!1;u()(t,(function(t,i){n||(["name","email","params"].indexOf(i)<0?V("identify object contains invalid property: `"+i+"`"):"params"!=i?e.identityData&&e.identityData[i]&&e.identityData[i]==t||(n=!0):u()(t,(function(t,i){e.identityData&&e.identityData.params&&e.identityData.params[i]==t||(n=!0)})))})),n?(this.identityData?this.identityData=ri(ri({},this.identityData),t):this.identityData=t,this.afterSessionIsIna(t)}),"update-data")):si("Skipping update_data:","no difference")},t.prototype.track=function(t,e){var n;t="string"==typeof t?t:"";var i,r=An(e=(n=e)&&!Array.isArray(n)&&"object"===h(n)&&n instanceof Object?e:{}),o=r[0],s=r[1];s?console.error(s):this.eventsStream.Add(gt.CUSTOM,{value:(i=t,i.slice(0,256)),json_data:o})},t.prototype.afterSessionIsInited=function(t,e){if(this.isSessionInited)return t();this.globalEvents.once("api.session.inited",t,e)},t.prototype.optOut=function(){a.set("__ls_optout","1",{expires:Number.MAX_SAFE_INTEGER}),this.off()},t.prototype.debug=function(t){void 0===t&&(t=!0),window.__ls_debug=t},t.prototype.debugce=t},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.handlers.Get(gt.LOG),i=t;if(n){var r="log";"string"==typeof i||i.length>0&&(wt[i[0]]&&(r=i[0],i.shift()),n.Console(r,i))}else console.warn("[LS] consoleHandler not found on log func")},t.prototype.transport=function(){return this.connection},t.prototype.setOptions=function(t){void 0===t&&(t={accountID:null,websiteID:null,keystrokes:null,rootHostname:null});var e=t.accountID,n=t.websiteID,i=t.keystrokes,r=t.rootHostname;e&&this.options.SetAccountID(e),n&&this.options.SetWebsiteID(n),null!==i&&this.options.Set("keystrokes",i),r&&this.options.Set("rootHostname",r)},t.prototype.onCrash=function(){this.off()},t.prototype.off=function(){var t;this.eventsStream.Clear(),null===(t=this.activity)||void 0===t||t.Clear(),this.handlers.CleanUp(),si("Turned off.")},t.prototype.onSessionExpired=function(){this.newPageView()},t.prototype.onMalformeew()},t.prototype.onPageContentRecd(e)},t.prototype.onConfigReceived=function(t){var e=this;-1!=this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=-1);var n=this.account.settings.minTimeOnPage;n>0&&!this.visitor.IsValid()?this.timeoutID=setTimt,n)}),1e3*n):this.sendPageView(t)},t.prototype.onSessionInited=function(t){t.isNew;this.scanTechnologies&&this.handlers.Get(gt.TECHNOLOGY).Init(),this.identityData&&this.updateData(this.identityData)},t.prototype.newPageView=function(t){var e,n=this;void 0===t&&(t={});var i=!0;!this.pageViewFirstTime&&this.eventsStream.Length()&&(i=!1),this.newPageViewData=t,this.pageView.SetPageViewOptions(t),this.isSessionInited=!1,i&&(this.bundler.send(),this.bundler.Reset(),this.bundler.Stop(),this.eventsStream.Clear(),null===(e=this.activity)||void 0===e||e.Clear(),this.eventsStream.Disable()),this.utils.EventSeq.Reset(),this.utils.Time.Reset(),this.handlers.CleanUp(),this.initialState=this.handlers.Init(),this.conditions.Restart(t.conditions||this.recordingRules),this.conditions.Set([{type:"pageView",name:["Init"]}]),this.transport().PageViewInit((function(t){var e=t.scan_technologies,i=t.settings,r=t.integrations;e&&(n.scanTechnologies=!0),n.account.Set(i),n.integrations.SetEnabledList(r),n.integrations.Scan();var o=n.account.Settings(),s=o.recordingElementsMap;o.debugForce&&n.debugForce(!0),s&&s&&n.utils.DOM.SetRecordingElementsMap(s),n.conditions.CheckPageViewData({name:["Init"]})}),(function(t){var e=t.data||t;si("init() error:",e),n.showScriptValidationMessage&&n.displayTrackCodeMessage(null==e?void 0:e.msg)})),this.globalEvents.once("conditions.fulfilled",(function(){n.utils.Time.Reset(),n.utils.EventSeq.Reset(),n.visitor.Load(),n.eventsStream.Enable(),n.initialState=n.handlers.Init(),n.handlers.Get(gt.LOCATION_CHANGE).Handler({force:!0}),n.handlers.Get(gt.MUTATION).Init(),n.handlers.Get(gt.CSS_CHANGE).Init(),n.handlers.Get(gt.PERFORMANCE).Init()}),"new-page-view-conditions-fulfilled")},t.prototype.sendPageView=function(t,e){var n=this,i=this.pageView.GetPageViewInfo(this.newPageViewData),r=this.eventsStream.All();r.length>0&&this.utils.EventSeq.Next();var o={events:r};this.transport().SendPageView(ri(ri({},i),{script_version:1705323184,script_timestamp_version:1705323184,script_tag_version:c.i8,page_view:ri(ri({},i.page_view),{page:ri(ri({},i.page_view.page),{body:JSON.stringify(t)}),initial_events:this.initialState,script_timestamp_version:1705323184,script_tag_version:c.i8}),visitor_side_storage:this.visitor.JSON(),time_offset:e,bundle:o}),this.pageViewInited.bind(this),(function(t){si("SendPageView() error:",t.data),n.showScriptValidationMessage&&n.displayTrackCodeMessage(null==t?void 0:t.message)}))},t.prototype.pageViewInited=function(t){var e=t.page_view_id,n=t.creation_timestamp,i=t.new_session,r=t.visitor_side_storage,o=r.ls_sid,s=r.ls_vid,a=r.ls_sexp,l=r.ls_clsid;this.pageViewFirstTime||(this.pageViewFirstTime=!0),this.visitor.Set(s,o,a,l),this.pageView.SetID(e),n&&this.pageView.SetCreationTimestamp(n),this.pageView.SetSessionState(i),this.integrations.Scan(),this.bundler.Start(),this.isSessionInited=!0,this.globalEvents.call("api.session.inited",{isNew:i,settings:this.account.Settings()}),this.account.Settings().networkLogs&&(M.enabled=!0),this.showScriptValidationMessage&&this.displayTrackCodeMessage()},t.prototype.updateData=function(t){var e=t.name,n=t.email,i=t.params,r={};e&&(r.name=e),n&&(r.email=n),i&&(r.params+""}}))),this.eventsStream.Add(gt.IDENTIFY,{json_data:r})},t}_ls"};!function(t,e){!function(t,e){j(i)},i=function(){if(void 0!==t.__ls_inited)return H("API","Already inited."),!0;if(/bot|googlebot|crawler|spider|robot|crawling|netlify|PingdomTMS/i.test(navigator.userAgent))return!0;t.__ls_inited=1,t.__ls;var e=1==a.get("__ls_debug")||F("__ls_debug"),n=1==a.get("__ls_debug_force")||F("__ls_debug_force");e&&(t.__ls_debug=e),n&&(t.__ls_debug_force=n);var i=F("__ls_optout");if(a.get("__ls_optout")||i)return a.set("__ls_optout","1",{expires:Number.MAX_SAFE_INTEGER}),H("API","Recording disabled."),!0;if(F("__ls_off"))return H("API","Recording disabled."),!0;var o=!!F("__ls_validation");t.__lsRecorder=new ai({showScriptValidationMessage:o});var s=t[li()]&&(t[li()].store||t.__lsStore);if(t[li()]=function(){if(arguments){var e=Array.prototype.slice.call(arguments),n=t.__lsRecorder.JSAPI[e[0]];if(n)retu(1))}));console.warn("[LS] Undefined function call: "+e[0])}},s){for(var l=0,u=s.length;l<u;l++)t[li()].apply(t,r(s[l]));t.__lsStore=t[li()].store=void 0}};setTimeout(n,500),"complete"!=e.readyState?t.attachEvent?t.attachEvent("onload",n):t.addEventListener("load",n,!1):n()}(t,e)}(window,document)}()}();
//# sourceMappingURL=~/track.js.map