function ContentValidator(){var $public=this;var $private={};$public.isFilledObject=function(entity){if(!entity||entity.constructor!==Object){return false;}for(var key in entity){return true;}return false;};$public.stringIsNotEmpty=function(string){if(typeof string!=="string"){return false;}return $private.trimString(string).length>0;};$private.trimString=$public.stringMatches=function(string,regexp){if(!$public.stringIsNotEmpty(string)){return false;}return regexp.test(string);};return $public;}function TypeValidator(){var $public=this;var $private={};$private.contentValidator=new ContentValidator();$public.isDefined=$public.isString=function(value){return $private.contentValidator.stringIsNotEmpty(value);};$public.isArray=function(value){return value&&value.constructor.toString()===Array.toString();};$public.isObject=$public.isFunction=function(value){return value!==undefined&&value.constructor.toString()===Function.toString();};$public.isNumber=$public.isInt=$public.isRegExp=function(value){return value!==undefined&&value.constructor.toString()===RegExp.toString();};$public.isNumericString=$public.isBoolean=function(value){return value!==undefined&&value.constructor.toString()==Boolean.toString();};return $public;}function Mercurio(){var $private={};var $public=this;$private.typeValidator=new TypeValidator();$private.whitelist=[".*"];$public.method=(window.addEventListener)?"message":"onmessage";$public.methodListener=(window.addEventListener)?"addEventListener":"attachEvent";$private.isOriginAllowed=$private.getCookie=function(key){if(document.cookie.indexOf(key)<0){return;}return("; "+document.cookie).split("; "+key+"=").pop().split(";").shift();};$private.setCookie=$private.setDataTypeMethod=function(dataType){$private.dataTypeMethod={};switch(dataType){case"cookie":$private.dataTypeMethod.get=$private.getCookie;$private.dataTypeMethod.set=$private.setCookie;break;default:$private.dataTypeMethod.get=function(key){return window.localStorage.getItem(key);};$private.dataTypeMethod.set=$private.dataTypeMethod.remove=break;}};$public.get=$public.set=function(key,value){try{if($private.typeValidator.isString(key)&&$private.typeValidator.isString(value)){$private.dataTypeMethod.set(key,value);return $public.get(key);}}catch(e){}};$public.removeItem=function(key){try{if($private.typeValidator.isString(key)){$private.dataTypeMethod.remove(key);return true;}}catch(e){}return false;};$public.requestHandler=function(event){var data={};if(!$private.isOriginAllowed(event.origin)){return;}try{data=JSON.parse(event.data);}catch(e){}if(!$public[data.method]){return;}$private.setDataTypeMethod(data.dataType);var value=$public[data.method](data.key,data.value);data=JSON.stringify({id:data.id,key:data.key,value:value});event.source.postMessage(data,event.origin);};$private.setDataTypeMethod();}var mercurio=new Mercurio();window[mercurio.methodListener](mercurio.method,mercurio.requestHandler);