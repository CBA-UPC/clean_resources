import{a as F,m as A}from"./vuex.esm-bundler_aa359dca_r24-02-0_b0_t240129-161140.js";import{H as n,L as h,A as a,B as s,G as c,O as R,I as d,J as l,D as w}from"./vendor_6ed58054_r24-02-0_b0_t240129-161140.js";import{aY as I,l as N,u as b,c as C}from"./index_31ad23dc_r24-02-0_b0_t240129-161140.js";import{u as v}from"./csrViewStoreCheckoutCMS_2ee00b3f_r24-02-0_b0_t240129-161140.js";import{g}from"./getUid_5de10276_r24-02-0_b0_t240129-161140.js";import{f as L}from"./dynamicDependencyLoader_69917fd7_r24-02-0_b0_t240129-161140.js";import{C as O}from"./ClickwrapNotice_237df641_r24-02-0_b0_t240129-161140.js";import{S as E}from"./SvgIcon_e55bd28a_r24-02-0_b0_t240129-161140.js";import{q as y}from"./lsanalytics-loyalty_c6fb8ea0_r24-02-0_b0_t240129-161140.js";import{_ as V}from"./_plugin-vue_export-helper_c27b6911_r24-02-0_b0_t240129-161140.js";import"./cmsContentHelper_f68cc642_r24-02-0_b0_t240129-161140.js";import"./typeOf_b861069e_r24-02-0_b0_t240129-161140.js";import"./i18n_4b81f106_r24-02-0_b0_t240129-161140.js";const{NGS_ENV_REFER_A_FRIEND_PROGRAM:M}=N,$={data(){return{referAFriendId:"",contentId:""}},components:{SvgIcon:E,ClickwrapNotice:O},async mounted(){var r;typeof window=="object"&&this.isLoyaltyReferAFriendEnabled&&this.hardLoggedIn&&(await L(),function(t,e,f,i,o){for(t[e]=t[e]||{},t[e].q=t[e].q||[];o<i.length;)f(i[o++],t[e])}(window,"extole",(t,e)=>{e[t]=e[t]||function(){e.q.push([t,arguments])}},["createZone"],0),window.extole.createZone({name:this.zoneName,element_id:this.referAFriendId,data:{first_name:this.record.firstName,last_name:this.record.lastName,email:this.record.uid,partner_user_id:this.record.customerId,label:M,country:`${this.country}`,locale:`${this.locale}`}}),(r=this.$refs)==null||r.referAFriendLink.addEventListener("click",()=>{this.id==="footer"&&I(),this.isSignUpViaOrderConfirmationModule&&y({section:`${this.title} - created account`}),y({section:`${this.title} - logged in`})}))},computed:{...F("auth",["hardLoggedIn"]),...n(b,["country","locale"]),...n(C,["isLoyaltyReferAFriendEnabled","paths"]),...A("userProfileState",["record"]),...n(v,["checkoutOrderConfirmationRegistration"]),clickwrapNotice(){const{termsOfUseRedTab:r}=this.paths;return this.$t("i18n.referAFriendTermsApply",[r])}},props:{id:{type:String,required:!0},isOrderRegistrationModuleVisible:{type:Boolean,default:!1},isSignUpViaOrderConfirmationModule:{type:Boolean,default:!1},zoneName:{type:String,required:!0},title:{type:String,required:!0}},beforeMount(){this.contentId=g(),this.referAFriendId=g(`${this.id}-`)}},q={class:"refer-friend"},B={key:0},x={key:0,class:"separator"},G={class:"headline"},z={class:"copy"},U=["id"];function D(r,t,e,f,i,o){var m,p,u,_;const k=h("SvgIcon"),S=h("clickwrap-notice");return a(),s("div",q,[e.zoneName==="confirmation"?(a(),s("section",B,[e.isOrderRegistrationModuleVisible?(a(),s("hr",x)):c("",!0),R(k,{"aria-label":"Levisredtab member program logo",name:"red-tab-logo-horizontal",title:"red-tab-logo",class:"text-checkmark-icon",role:"img","aria-hidden":"false"}),d("p",G,l((p=(m=r.checkoutOrderConfirmationRegistration)==null?void 0:m.refer_a_friend_registration)==null?void 0:p.headline_text),1),d("p",z,l((_=(u=r.checkoutOrderConfirmationRegistration)==null?void 0:u.refer_a_friend_registration)==null?void 0:_.copy),1),o.clickwrapNotice?(a(),w(S,{key:1,class:"clickwrap-notice-item","content-id":r.clickwrapNoticeId,html:o.clickwrapNotice},null,8,["content-id","html"])):c("",!0)])):c("",!0),d("button",{class:"block-simple__btn",type:"button",id:i.referAFriendId,ref:"referAFriendLink"},l(r.$t("i18n.referAFriend")),9,U)])}const re=V($,[["render",D],["__scopeId","data-v-aa51ffbe"]]);export{re as default};
6-2.016.8 0 1.2.544 1.2 1.408V42h2.256v-5.536c0-1.792-.992-2.928-2.704-2.928Zm8.082 8.768c2.224 0 3.664-1.008 3.664-2.752 0-1.28-.768-2.032-2.416-2.368l-1.776-.368c-.592-.128-.928-.4-.928-.832 0-.528.48-.88 1.232-.88.848 0 1.456.432 1.568 1.152l2.032-.08c-.208-1.616-1.568-2.64-3.568-2.64-2.032 0-3.36 1.056-3.36 2.72 0 1.264.784 2.096 2.4 2.416l1.632.32c.752.144 1.088.384 1.088.832 0 .624-.64.912-1.488.912-1.072 0-1.632-.464-1.76-1.28l-2.064.08c.208 1.76 1.488 2.768 3.744 2.768Zm5.185-9.648h2.256v-2.048h-2.256v2.048Zm0 9.344h2.256v-8.256h-2.256V42Zm6.827-6.64 1.536.048v-1.664l-1.536.048V31.2h-2.256v2.576l-1.12-.032v1.664l1.12-.048v4.32c0 1.664.656 2.32 2.32 2.32h1.472v-1.808h-.752c-.56 0-.784-.224-.784-.784V35.36Z"></path><path stroke="#C9C9C9" stroke-width="2" d="M331 13H211"></path><path fill="#fff" stroke="#C9C9C9" stroke-width="2" d="M340.333 12a7 7 0 1 1 14 0 7 7 0 0 1-14 0Z"></path><path fill="#6E6E6E" d="M325.38 35.822c-.098-.924-.658-1.498-1.526-1.666 1.05-.294 1.778-1.204 1.778-2.492 0-1.596-1.148-2.632-3.052-2.632h-4.62V39h1.302v-4.298h3.08c1.162 0 1.666.462 1.792 1.638l.294 2.66h1.316l-.364-3.178Zm-3.248-2.254h-2.87v-3.402h3.094c1.26 0 1.946.574 1.946 1.624 0 1.134-.812 1.778-2.17 1.778Zm11.997 1.652c0-2.254-1.274-3.612-3.304-3.612-2.156 0-3.402 1.54-3.402 3.752 0 2.226 1.274 3.808 3.43 3.808 1.582 0 2.772-.854 3.22-2.352l-1.176-.14c-.322.91-.938 1.442-2.002 1.442-1.302 0-2.142-.798-2.184-2.422h5.418v-.476Zm-3.29-2.562c1.176 0 1.918.742 2.086 2.114h-4.2c.126-1.414.966-2.114 2.114-2.114Zm8.037 6.524c1.82 0 2.87-1.008 3.122-2.702h-1.204c-.196 1.022-.784 1.624-1.848 1.624-1.372 0-2.128-1.008-2.128-2.716 0-1.708.686-2.716 2.142-2.716 1.008 0 1.624.49 1.82 1.47h1.218c-.252-1.666-1.386-2.548-3.052-2.548-2.086 0-3.416 1.414-3.416 3.85s1.33 3.738 3.346 3.738Zm11.153-3.962c0-2.254-1.274-3.612-3.304-3.612-2.156 0-3.402 1.54-3.402 3.752 0 2.226 1.274 3.808 3.43 3.808 1.582 0 2.772-.854 3.22-2.352l-1.176-.14c-.322.91-.938 1.442-2.002 1.442-1.302 0-2.142-.798-2.184-2.422h5.418v-.476Zm-3.29-2.562c1.176 0 1.918.742 2.086 2.114h-4.2c.126-1.414.966-2.114 2.114-2.114Zm5.111-2.24h1.288v-1.386h-1.288v1.386Zm0 8.582h1.288v-7.224h-1.288V39Zm8.148-7.224-1.372 4.172-.588 1.946-.602-1.946-1.442-4.172h-1.386L357.38 39h1.274l2.646-7.224h-1.302Zm8.789 3.444c0-2.254-1.274-3.612-3.304-3.612-2.156 0-3.402 1.54-3.402 3.752 0 2.226 1.274 3.808 3.43 3.808 1.582 0 2.772-.854 3.22-2.352l-1.176-.14c-.322.91-.938 1.442-2.002 1.442-1.302 0-2.142-.798-2.184-2.422h5.418v-.476Zm-3.29-2.562c1.176 0 1.918.742 2.086 2.114h-4.2c.126-1.414.966-2.114 2.114-2.114Zm9.997-3.626v3.612c-.462-.63-1.246-1.022-2.184-1.022-1.834 0-3.122 1.47-3.122 3.654 0 2.24 1.19 3.878 3.15 3.878 1.05 0 1.89-.546 2.324-1.302V39h1.12v-9.968h-1.288Zm-2.03 9.016c-1.246 0-1.988-1.092-1.988-2.772 0-1.652.77-2.548 2.016-2.548 1.204 0 2.072.868 2.072 2.576 0 1.708-.896 2.744-2.1 2.744Z"></path><path stroke="#C9C9C9" stroke-width="2" d="M483.667 13h-120"></path><path fill="#fff" stroke="#C9C9C9" stroke-width="2" d="M493 12a7 7 0 1 1 14 0 7 7 0 0 1-14 0Z"></path><path fill="#6E6E6E" d="M476.297 35.822c-.098-.924-.658-1.498-1.526-1.666 1.05-.294 1.778-1.204 1.778-2.492 0-1.596-1.148-2.632-3.052-2.632h-4.62V39h1.302v-4.298h3.08c1.162 0 1.666.462 1.792 1.638l.294 2.66h1.316l-.364-3.178Zm-3.248-2.254h-2.87v-3.402h3.094c1.26 0 1.946.574 1.946 1.624 0 1.134-.812 1.778-2.17 1.778Zm11.997 1.652c0-2.254-1.274-3.612-3.304-3.612-2.156 0-3.402 1.54-3.402 3.752 0 2.226 1.274 3.808 3.43 3.808 1.582 0 2.772-.854 3.22-2.352l-1.176-.14c-.322.91-.938 1.442-2.002 1.442-1.302 0-2.142-.798-2.184-2.422h5.418v-.476Zm-3.29-2.562c1.176 0 1.918.742 2.086 2.114h-4.2c.126-1.414.966-2.114 2.114-2.114Zm7.911-2.548h.742v-1.078h-.77c-1.512 0-2.17.658-2.17 2.17v.616l-1.162-.042v.994l1.162-.056V39h1.288v-6.286l1.652.056v-.994l-1.652.056v-.812c0-.686.224-.91.91-.91Zm7.006 1.666v4.018c0 1.722-1.064 2.268-2.058 2.268-.98 0-1.442-.532-1.442-1.526v-4.76h-1.288v5.012c0 1.526.938 2.394 2.45 2.394 1.064 0 1.932-.434 2.422-1.204V39h1.204v-7.224h-1.288Zm7.15-.182c-1.064 0-1.932.434-2.422 1.204v-1.022h-1.204V39h1.288v-4.018c0-1.722 1.064-2.268 2.058-2.268.98 0 1.442.532 1.442 1.526V39h1.288v-5.012c0-1.526-.938-2.394-2.45-2.394Zm9.573-2.562v3.612c-.462-.63-1.246-1.022-2.184-1.022-1.834 0-3.122 1.47-3.122 3.654 0 2.24 1.19 3.878 3.15 3.878 1.05 0 1.89-.546 2.324-1.302V39h1.12v-9.968h-1.288Zm-2.03 9.016c-1.246 0-1.988-1.092-1.988-2.772 0-1.652.77-2.548 2.016-2.548 1.204 0 2.072.868 2.072 2.576 0 1.708-.896 2.744-2.1 2.744Zm11.838-2.828c0-2.254-1.),v(e.$slots,"icon-right",{},void 0,!0)]),v(e.$slots,"error-msg",{},()=>[q(h(i,{"error-texts":t.errorTexts,id:t.id,"error-class":t.errorClass},null,8,["error-texts","id","error-class"]),[[N,r.isError&&!r.hideErrors]])],!0)])}const oe=f(ae,[["render",ne],["__scopeId","data-v-59cfe167"]]),ue={emits:["update:modelValue"],components:{InputItem:oe,ValidationProvider:te},props:{name:{type:String,required:!0},rules:{type:[String,Object],default:""},isRequired:{type:Boolean,default:!1},modelValue:{type:String,default:""},value:{type:String,default:""},label:{type:String,default:""},setAriaDetailsId:{type:String,default:""},placeholder:{type:String,default:""},showLabel:{type:Boolean,default:!0},id:{type:String,default:""},type:{type:String,default:"text"},autocomplete:{type:Boolean,default:!1},validationOptions:{type:Object,default:()=>({})},childClass:{type:[Array,String],default:()=>[]}}};function de(e,a,t,l,s,r){const i=d("InputItem"),n=d("ValidationProvider");return o(),L(n,D({name:t.name,rules:t.rules},t.validationOptions,{value:t.modelValue}),{default:I(({errors:p})=>[h(i,{"aria-details":t.setAriaDetailsId,"aria-describedby":t.setAriaDetailsId,"is-required":t.isRequired,value:t.modelValue,"error-texts":p,"label-text":t.label,id:t.id,type:t.type,autocomplete:t.autocomplete,"show-label":t.showLabel,"placeholder-text":t.placeholder,onInput:a[0]||(a[0]=g=>e.$emit("update:modelValue",g.target.value)),class:C(t.childClass)},null,8,["aria-details","aria-describedby","is-required","value","error-texts","label-text","id","type","autocomplete","show-label","placeholder-text","class"])]),_:1},16,["name","rules","value"])}const ce=f(ue,[["render",de]]),he={mixins:[V,w],emits:["input"],components:{TextInput:ce},props:{name:{type:String,default:""},value:{type:String,default:""},label:{type:String,default:"Email"},showLabel:{type:Boolean,default:!1},placeholder:{type:String,default:""},setAriaDetailsId:{type:String,default:""},emailRules:{type:[String,Object],default:""},id:{type:String,default:""},type:{type:String,default:""},autocomplete:{type:Boolean,default:!1},emailRuleKey:{type:String,default:""},isRequired:{type:Boolean,default:!0},validationOptions:{type:Object,default:()=>({errorTextAllReplaceWith:{i18nPath:"errors.regex"}})},customErrors:{type:Array,default:()=>[]}},data(){return{email:"",submitting:!1,emailValidationServerErrors:[]}},computed:{nameComputed(){return this.name||this.$t("i18n.formEmailAddressLabel").toLowerCase()},placeholderComputed(){return this.placeholder||this.$t("i18n.formEmailLabel")},rulesComputed(){return this.emailRules?this.emailRules:this.emailRuleKey?this.rules[this.emailRuleKey]:this.rules.requiredEmail},validationOptionsComputed(){return{...this.validationOptions,customErrors:this.customErrors}}},methods:{}};function me(e,a,t,l,s,r){const i=d("TextInput");return o(),L(i,{class:"email-input",type:t.type,autocomplete:!0,name:r.nameComputed,value:t.value,label:t.label,"set-aria-details-id":t.setAriaDetailsId,"show-label":t.showLabel,rules:r.rulesComputed,id:t.id,"is-required":t.isRequired,"validation-options":r.validationOptionsComputed,placeholder:r.placeholderComputed,onInput:a[0]||(a[0]=n=>e.$emit("input",n.target.value))},null,8,["type","name","value","label","set-aria-details-id","show-label","rules","id","is-required","validation-options","placeholder"])}const pe=f(he,[["render",me]]),ge={provide(){return{validationObserver:this.$_validationObserver}},data(){return{form:{},customErrors:[]}},computed:{changed(){return Object.values(this.form).some(a=>a.changed)},errors(){return this.customErrors.concat(Object.entries(this.form).reduce((e,a)=>e.concat(a[1].errors),[]))},valid(){return Object.entries(this.form).every(e=>e[1].valid)},invalid(){return!this.valid},pristine(){return Object.entries(this.form).every(e=>e[1].pristine)},dirty(){return!this.pristine},scopedSlots(){return{changed:this.changed,errors:this.errors,valid:this.valid,invalid:this.invalid,pristine:this.pristine,dirty:this.dirty,addErrorMsg:this.addErrorMsg.bind(this),reset:this.reset.bind(this),validate:this.validate.bind(this),form:this.form}}},beforeCreate(){this.$_validationObserver=new B},mounted(){this.$_validationObserver.on("update",([e,a])=>{this.form[e]=a})},beforeUnmount(){this.$_validationObserver.removeAllListeners()},methods:{addErrorMsg(e){this.customErrors.push(e)},reset(){this.$nextTick(()=>{this.$_validationObserver.emit("reset"),this.customErrors=[]})},validate(){this.customErrors=[];const e=Object.values(this.form).map(a=>a.validate());return Promise.all(e).then(a=>(a.forEach(([t,l])=>{this.form[t]=l}),this.scopedSlots))}},render(){return this.$slots.default(this.scopedSlots)}};const fe={mixins:[Q],data(){return{selectedCountry:null,selectedLanguage:{}}},computed:{..._(A,["country","locale"]),localeData(){return this.localeDataUs},getLocales(){return this.localeData.filter(e=>e.Country_Code===this.country)[0].Locales},getLanguage(){return this.getLocales.map(e=>({code:e,lang:X[e]}))}},methods:{singleCheck(e){return this.selectedLanguage={code:e.code,lang:e.lang},!0},handleLanguageChange(e){this.$store.commit("emailSubscriptionState/updateState",{property:"userSelectedLanguage",value:e.target.id}),this.selectedLanguage={code:e.target.id,lang:e.target.value}}}},ve={class:"picker__language"},be={class:"picker__section-title"},_e={class:"picker__section-body"},ye=["checked","id","aria-label","value"],Se=["checked","id","aria-label","value"],Ee=["id","aria-label","value"],Ce=["for"];function Oe(e,a,t,l,s,r){return o(),u("section",null,[c("div",ve,[c("h2",be,y(e.$t("i18n.chooseLanguage")),1),c("div",_e,[(o(!0),u(W,null,$(r.getLanguage,i=>(o(),u("div",{key:i.code,class:"picker__lang-wrap lsco-row-xs--middle"},[i.code===e.locale?(o(),u("input",{key:0,checked:r.singleCheck(i),type:"radio",id:i.code,name:"language","aria-label":i.lang,value:i.code,class:C(["picker__lang-input"]),onChange:a[0]||(a[0]=(...n)=>r.handleLanguageChange&&r.handleLanguageChange(...n))},null,40,ye)):r.getLanguage.length===1?(o(),u("input",{key:1,checked:r.singleCheck(i),type:"radio",id:i.code,name:"language","aria-label":i.lang,value:i.code,class:"picker__lang-input checked",onChange:a[1]||(a[1]=(...n)=>r.handleLanguageChange&&r.handleLanguageChange(...n))},null,40,Se)):(o(),u("input",{key:2,type:"radio",id:i.code,name:"language","aria-label":i.lang,value:i.code,class:"picker__lang-input v-else",onChange:a[2]||(a[2]=(...n)=>r.handleLanguageChange&&r.handleLanguageChange(...n))},null,40,Ee)),c("label",{for:i.code,class:"picker__lang-label"},y(i.lang),9,Ce)]))),128))])])])}const Te=f(fe,[["render",Oe],["__scopeId","data-v-de39d92b"]]);const m={SECTION:"lightbox",ACTION_SUBMIT:"submitted",ACTION_SUCCESS:"success",ACTION_DUPLICATE:"duplicate"},xe={inject:["mq"],mixins:[V,w],emits:["subscribeSuccess"],components:{EmailInput:pe,ValidationObserver:ge,HeadingContainer:z,ClickwrapNotice:J,languageSelect:Te},data(){return{email:"",submitting:!1,emailValidationServerErrors:[],legalLanguageId:"welcome-content-legal-language-id"}},computed:{..._(H,["globalModalEmailSignupWelcomeContent"]),..._(A,["locale","country","isNonLoyaltyEuCountry","caOrUs"]),..._(F,["paths"]),...T("auth",["loggedIn"]),...T("emailSubscriptionState",["userSelectedLanguage","eReceiptSubSourceFlag"]),...j("emailSubscriptionState",["subscribeLoyaltyFlag","subSource"]),rootClassObj(){return["lsco-col-xs-offset-2","lsco-col-xs-offset-right-2","lsco-col-md-7"]}},mounted(){this.$store.commit("userProfileState/updateState",{property:"welcomed",value:!0}),this.$nextTick(()=>{this.$refs.email.$el.querySelector("input").focus()})},methods:{prepareRichText(e){return Y(e,this.country,this.locale)},resetServerErrors(){this.emailValidationServerErrors=[]},subscribeUser({reset:e,validate:a}){G("userEmail"),this.resetServerErrors(),a().then(({valid:t})=>{var l;if(t){this.submitting=!0,S(m.SECTION,m.ACTION_SUBMIT);const s=this.subSource(this.mq.current,(l=this.globalModalEmailSignupWelcomeContent)==null?void 0:l.email_source_code);this.$store.commit("emailSubscriptionState/updateState",{property:"subscribedFrom",value:s}),this.$store.commit("emailSubscriptionState/updateState",{property:"eReceiptSubSourceFlag",value:!0}),this.$store.dispatch("emailSubscriptionState/checkAndSubscribeUser",{email:this.email,loyalty:this.subscribeLoyaltyFlag(),source:s,selectedLang:this.userSelectedLanguage}).then(({alreadySubscribed:r,isRegisteredUser:i})=>{this.submitting=!1,r?S(m.SECTION,m.ACTION_DUPLICATE):S(m.SECTION,m.ACTION_SUCCESS),this.$emit("subscribeSuccess",{alreadySubscribed:r,isRegisteredUser:i,userEmail:this.email}),e()}).catch(r=>{throw this.submitting=!1,new Error(r)})}})}}},Le=["aria-label","onSubmit"],Ie={class:"lsco-col-xs-21 lsco-col-md-offset-1 lsco-col-md-offset-right-1 lsco-col-md-5"},Ae=["aria-label","disabled"];function Ve(e,a,t,l,s,r){const i=d("heading-container"),n=d("email-input"),p=d("language-select"),g=d("clickwrap-notice"),k=d("validation-observer");return o(),u("section",{class:C([r.rootClassObj,"eReceipt-welcome-content"])},[h(i,{title:e.globalModalEmailSignupWelcomeContent.headline,details:e.globalModalEmailSignupWelcomeContent.copy},null,8,["title","details"]),h(k,null,{default:I(({pristine:R,reset:P,validate:M})=>[c("form",{method:"POST",class:"welcome-form",action:"javascript:void(0);","aria-label":e.$t("i18n.signUp"),onSubmit:O=>r.subscribeUser({reset:P,validate:M})},[h(n,{modelValue:s.email,"onUpdate:modelValue":a[0]||(a[0]=O=>s.email=O),ref:"email","set-aria-details-id":s.legalLanguageId,"custom-errors":s.emailValidationServerErrors},null,8,["modelValue","set-aria-details-id","custom-errors"]),h(p),h(g,{"content-id":s.legalLanguageId,html:e.globalModalEmailSignupWelcomeContent.clickwrap_notice,class:"legal-language lsco-col-xs-21 lsco-col-md-7"},null,8,["content-id","html"]),c("div",Ie,[c("button",{class:"welcome-btn","aria-label":e.$t("i18n.signUp"),disabled:R||s.submitting},y(e.$t("i18n.signUp")),9,Ae)])],40,Le)]),_:1})],2)}const Ye=f(xe,[["render",Ve],["__scopeId","data-v-30698e62"]]);export{Ye as default};
