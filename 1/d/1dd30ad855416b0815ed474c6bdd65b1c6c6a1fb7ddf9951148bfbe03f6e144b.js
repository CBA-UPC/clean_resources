"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9540],{36637:(e,n,i)=>{i.d(n,{g:()=>r});var a=i(69736),t=i(63068),l=i(11527);const r=e=>{let{children:n}=e;return(0,l.jsx)(a.x,{variant:"bodySmall",className:t.Z.pretitle,children:n})}},66873:(e,n,i)=>{i.d(n,{x:()=>u});var a=i(50959),t=i(76950),l=i(50540),r=i(30374),d=i(2990),s=i(71459),o=i(8499),m=i(11527);const u=e=>{let{children:n,action:i,uri:u}=e;const c=(0,l.g)(),k=(0,d.j)();let v;const p=()=>{const e={triggerId:o.K,triggerAction:{type:i}};s.y.set((n=>({...n,...e}))),k.storeAction(r.wH,{operation:t.pT.ADD,uris:[u]})};try{v=a.Children.only(n)}catch(S){return(0,m.jsx)(m.Fragment,{children:n})}return c?a.cloneElement(v,{onClick:p}):(0,m.jsx)(m.Fragment,{children:n})}},99378:(e,n,i)=>{i.r(n),i.d(n,{AlbumPrerelease:()=>Oe});i(75930),i(46758),i(53321),i(86277),i(65484),i(35174),i(96241);var a=i(82187),t=i.n(a),l=i(75802),r=i(69736),d=i(11317),s=i(85648),o=i(66713),m=i(22527),u=i(82857),c=i(50959),k=i(20726),v=i(95841),p=i(80626);function S(e){const n=new Date;return(e instanceof Date?e:new Date(e)).getTime()-n.getTime()}var N=i(43286),y=i(61899),g=i(11527);const b=e=>{let{uri:n}=e;const i=(0,y.D)(n),{spec:a,logger:t}=(0,p.fU)(k.j,{data:{uri:n||""}}),l=(0,c.useCallback)((()=>{n&&(t.logInteraction(a.actionBarFactory().preSaveButtonFactory().hitUiNavigate({destination:n})),i())}),[i,a,n,t]);return n?(0,g.jsx)(N.D,{onClick:l,children:s.ag.get("web-player.album-prerelease.listen_now")}):null};var F=i(52438),f=i(66873),h=i(91529);const x=3e5,P=36e5;var R=i(20069);const T={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"preReleaseMutationPayload"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleasePayload"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"preRelease"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreRelease"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"preSaved"}}]}}]}}]}}]},D={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AlbumPrereleasePreSavedState"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lookup"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"uri"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleaseResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreRelease"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"preSaved"}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}}]}}]}}]}}]},j={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"PreSaveAlbumPrerelease"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"preSavePreReleaseToLibrary"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"preReleaseMutationPayload"}}]}}]}},...T.definitions]},C={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RemovePreSaveAlbumPrerelease"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removePreReleaseFromLibrary"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"preReleaseMutationPayload"}}]}}]}},...T.definitions]},_=e=>{const{data:n,invalidate:i,loading:a}=(t={uri:e},l={staleTime:x,gcTime:P},(0,R.a)(D,t,l));var t,l;return{isPreSaved:(0,c.useMemo)((()=>{if(!n)return!1;for(const i of n.lookup)if("PreReleaseResponseWrapper"===i.__typename&&"PreRelease"===i.data.__typename&&i.data.uri===e)return i.data.preSaved;return!1}),[n,e]),isLoading:a,invalidate:i}};var I=i(49598),A=i(65441),L=i(7627),w=i(70526),U=i(19039);const V=(e,n)=>{const{request:i}=(0,c.useContext)(A.Ax),{enqueueSnackbar:a}=(0,U.D)();return(0,I.D)({mutationFn:async n=>{const a=n?j:C,t=await(0,L.J)(i,a,{uri:e}),l=null==t?void 0:t.data;if(l)return function(e){let n;if("preSavePreReleaseToLibrary"in e&&"PreReleasePayload"===e.preSavePreReleaseToLibrary.__typename)n=e.preSavePreReleaseToLibrary.preRelease;else{if(!("removePreReleaseFromLibrary"in e)||"PreReleasePayload"!==e.removePreReleaseFromLibrary.__typename)return;n=e.removePreReleaseFromLibrary.preRelease}switch(n.__typename){case"PreRelease":return n.preSaved;case"NotFound":return!1;case"GenericError":return;default:return void(0,w._)(n)}}(l)},onSuccess:e=>{"boolean"==typeof e&&(e&&a(s.ag.get("web-player.album-prerelease.feedback_presaved")),n(e))}})};const M=e=>{let{uri:n}=e;const{isPreSaved:i,isLoading:a,addPresave:t,removePresave:l}=(e=>{const{isPreSaved:n,invalidate:i,isLoading:a}=_(e),{mutate:t,isPending:l}=V(e,i);return{isPreSaved:n,isLoading:a||l,addPresave:(0,c.useCallback)((()=>t(!0)),[t]),removePresave:(0,c.useCallback)((()=>t(!1)),[t])}})(n),{spec:r,logger:d}=(0,p.fU)(k.j,{data:{uri:n}}),o=()=>{d.logInteraction(r.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:n,itemToBeRemovedFromPresaved:n,contextUri:n})),l()};return i?(0,g.jsx)(F.P,{disabled:a,onClick:o,children:s.ag.get("web-player.album-prerelease.presaved")}):(0,g.jsx)(f.x,{uri:n,action:h.sr.SAVE_PRERELEASE,children:(0,g.jsx)(N.D,{disabled:a,onClick:()=>{d.logInteraction(r.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:n,itemToBePresaved:n,contextUri:n})),t()},children:s.ag.get("web-player.album-prerelease.presave")})})};var E=i(15842),B=i(66205),O=i(97013),W=i(79936),H=i(45438),Q=i(94452),q=i(28058);const z=c.memo((function(e){let{uri:n,artistUri:i}=e;const{spec:a}=(0,Q.T)(n);return(0,g.jsx)(H.JL,{value:"album",children:(0,g.jsxs)(W.v,{children:[i&&(0,g.jsx)(q.Jh,{spec:a,divider:"after",uri:i,displayText:s.ag.get("contextmenu.go-to-artist-radio")}),(0,g.jsx)(q.Jx,{uri:n,spec:a,displayText:s.ag.get("context-menu.copy-album-link")}),(0,g.jsx)(q.h$,{spec:a,divider:"before",uri:n})]})})}));var Z=i(66819);const G=e=>{var n,i,a;let{prerelease:t,backgroundColor:l}=e;const r=function(e){const[n,i]=(0,c.useState)((()=>!!e&&S(e)<=0));return(0,c.useEffect)((()=>{if(!e)return;const n=S(e);if(n<=0)return void i(!0);if(n>=36e5)return void i(!1);const a=setTimeout((()=>{i(!0)}),n);return()=>{clearTimeout(a)}}),[e]),n}(t.releaseDate),{spec:d,UBIFragment:o}=(0,p.fU)(k.j,{data:{uri:t.uri}}),m=(0,Z.j)();return(0,g.jsx)(E.o,{backgroundColor:l,children:(0,g.jsxs)(B.F,{children:[r?(0,g.jsx)(b,{uri:null===(n=t.content)||void 0===n?void 0:n.uri}):(0,g.jsx)(M,{uri:t.uri}),(0,g.jsx)(o,{spec:d,children:(0,g.jsx)(v.yj,{menu:(0,g.jsx)(z,{uri:t.uri,artistUri:null===(i=t.content)||void 0===i?void 0:i.artists[0].uri}),children:(0,g.jsx)(O.z,{label:s.ag.get("more.label.context",null===(a=t.content)||void 0===a?void 0:a.name),size:m})})})]})})};var J=i(61058),K=i(97583),Y=i(93421);const $="J9GZWbcqWAQBbj0mGgBp",X="MnacN8FHHYBeSU8hx4U8",ee="HBgE42egR1M0MoBZt7MA",ne="l5yLFFUEplqPqkpdgn2z",ie="g0_tYvLXcZhPQLQuecrg",ae="gjeF0mGZlmvlsLy5SvfQ",te=e=>{let{value:n,label:i,hasDivider:a=!1}=e;return(0,g.jsxs)("div",{className:ee,"aria-hidden":"true",children:[(0,g.jsx)(r.x,{variant:"titleSmall",className:t()({[ie]:a}),children:n}),(0,g.jsx)(r.x,{variant:"marginal",semanticColor:"textSubdued",children:i})]})};var le=i(3601);const re=1e3,de=60*re,se=60*de,oe=24*se;const me={days:0,hours:0,minutes:0,seconds:0};function ue(e){return e>0?function(e){const n=Math.abs(e);return{days:Math.floor(n/oe),hours:Math.floor(n%oe/se),minutes:Math.floor(n%se/de),seconds:Math.floor(n%de/re)}}(e):me}const ce=e=>{let{targetDate:n,className:i,onComplete:a,images:l,imageTitle:r}=e;const{days:d,hours:o,minutes:m,seconds:k}=((e,n)=>{const i=(0,c.useRef)(n);i.current=n;const[a,t]=(0,c.useState)((()=>ue(S(e))));return(0,le.Y)((n=>{const a=S(e),l=ue(a);var r;t(l),a<=0&&(n(),null===(r=i.current)||void 0===r||r.call(i))}),1e3),a})(n,a),v=void 0!==l&&l.length>0&&r,p=s.ag.get("web-player.album-prerelease.countdown_label",{days:d,hours:o,minutes:m,seconds:k});return(0,g.jsxs)("div",{className:t()($,i,{[X]:v}),role:"timer",children:[(0,g.jsx)("span",{className:ae,children:p}),v&&(0,g.jsx)(Y.O,{images:l,type:u.p.ALBUM,shape:Y.K.ROUNDED_CORNERS,className:ne,title:r}),(0,g.jsx)(te,{value:d,label:s.ag.get("web-player.album-prerelease.days",d),hasDivider:!0}),(0,g.jsx)(te,{value:o,label:s.ag.get("web-player.album-prerelease.hours",o),hasDivider:!0}),(0,g.jsx)(te,{value:m,label:s.ag.get("web-player.album-prerelease.minutes",m),hasDivider:!0}),(0,g.jsx)(te,{value:k,label:s.ag.get("web-player.album-prerelease.seconds",k)})]})};var ke=i(97922),ve=i(81639),pe=i(16118),Se=i(36637);const Ne="xjbmV4vvBCu7c5U6nAgL",ye=e=>{var n;let{prerelease:i,children:a}=e;return(0,g.jsx)(v._P,{menu:(0,g.jsx)(z,{uri:i.uri,artistUri:null===(n=i.content)||void 0===n?void 0:n.artists[0].uri}),children:a})},ge=e=>{let{prerelease:n,backgroundColor:i}=e;const{content:a,releaseDate:t}=n,l=(0,J.jh)(),r=l===J.Uo.SMALL||l===J.Uo.XSMALL,{spec:d,logger:s}=(0,p.fU)(k.j,{data:{uri:n.uri}}),o=(0,c.useCallback)(((e,n)=>{if(d){const e=d.headerFactory().artistNameFactory().hitUiNavigate({destination:n.creator.uri});s.logInteraction(e)}}),[s,d]),m=a,u=(0,c.useMemo)((()=>t?new Date(t):void 0),[t]);return(0,g.jsxs)(ke.gF,{backgroundColor:i,size:ke.fR.LARGE,children:[(0,g.jsx)(ve.W,{children:m.name?(0,g.jsx)(pe.i,{text:m.name}):null}),!r&&(0,g.jsx)(ye,{prerelease:n,children:(0,g.jsx)(ke.Oz,{images:m.coverArt.sources,name:m.name??"",placeholderType:"album"})}),(0,g.jsxs)(ke.sP,{children:[(0,g.jsx)(Se.g,{children:(0,K.R)(m.type)}),(0,g.jsx)(ye,{prerelease:n,children:(0,g.jsx)(ke.xd,{scaleAtMinWidth:ke.Fi,children:m.name})}),(0,g.jsx)(ke.QS,{creators:m.artists,onCreatorClick:o,releaseDate:t,timeZone:n.timezone}),u&&m.name?(0,g.jsx)(ce,{images:r?m.coverArt.sources:[],className:Ne,imageTitle:m.name,targetDate:u}):null]})]})};var be=i(36199),Fe=i(61046),fe=i(73928);const he={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseTrackArtistItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}}]}}]}}]}}]},xe={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"albumPreReleaseTracks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"offset"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lookup"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"uri"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleaseResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseTracksData"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseTracksData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreRelease"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"preReleaseContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"tracks"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"Variable",name:{kind:"Name",value:"offset"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseTrack"}}]}},{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseTrack"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleaseAlbumTrack"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"20"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseTrackArtistItem"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}},...he.definitions]},Pe={totalLength:0,items:[]};function Re(e){const n=e.preReleaseContent,i=[];if(null!=n&&n.tracks)for(const r of n.tracks.items){var a,t,l;i.push({uri:r.uri,name:r.name?r.name:"",isPlayable:r.playability.playable,durationMs:(null===(a=r.duration)||void 0===a?void 0:a.totalMilliseconds)??0,artists:Te(r.artists.items),isExplicit:(null===(t=r.contentRating)||void 0===t?void 0:t.label)===fe.KS.Explicit,is19PlusOnly:(null===(l=r.contentRating)||void 0===l?void 0:l.label)===fe.KS.NineteenPlus})}return{totalLength:(null==n?void 0:n.tracks.totalCount)??0,items:i}}function Te(e){const n=[];for(const i of e)"Artist"===i.data.__typename&&n.push({name:i.data.profile.name,uri:i.data.uri});return n}const De=[be.QD.INDEX,be.QD.TITLE_AND_ARTIST,be.QD.DURATION],je=c.memo((function(e){let{ariaLabel:n,nrTracks:i,prereleaseUri:a,highlightUri:t,scrollToIndex:l,usePlayContextItem:r,hasHeaderRow:d=!0,initalTracks:s}=e;const{spec:o,UBIFragment:m}=(0,p.fU)(k.j,{data:{uri:a}}),u=(e=>{const{request:n}=(0,c.useContext)(A.Ax);return(0,c.useCallback)((async(i,a)=>{const t=await n(xe,{uri:e,offset:i,limit:a});for(const n of(null==t||null===(l=t.data)||void 0===l?void 0:l.lookup)||[]){var l;if("PreReleaseResponseWrapper"===n.__typename&&"PreRelease"===n.data.__typename&&n.data.uri===e)return Re(n.data)}return Pe}),[n,e])})(a),v=(0,c.useRef)(!1),S=(0,c.useRef)(null),[N,y]=(0,c.useState)(null),b=(0,c.useCallback)((e=>({uri:e.uri})),[]);(0,c.useEffect)((()=>{S.current&&(N?S.current.scrollToIndex(N):l&&S.current.scrollToIndex(l))}),[N,l]);const F=(0,c.useCallback)((async(e,n)=>{const i=await u(e,n);if(t&&!N){const e=i.items.findIndex((e=>(null==e?void 0:e.uri)===t));y(e||-1)}return i}),[u,t,N]),f=(0,c.useCallback)(((e,n)=>{const i=!v.current&&!!t&&t===e.uri;return i&&(v.current=!0),(0,g.jsx)(be.Ym,{uri:e.uri,isPlayable:e.isPlayable,name:e.name,trackNumber:n+1,index:n,artists:e.artists,playcount:0,contextUri:a,duration_ms:e.durationMs,usePlayContextItem:r,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,shouldHighLight:i,isReleased:e.isPlayable},n+e.uri)}),[t,a,r]);return(0,g.jsx)(m,{spec:o,children:(0,g.jsx)(Fe.a,{columns:De,children:(0,g.jsx)(be.Pv,{ariaLabel:n,columns:De,hasHeaderRow:d,rowPlaceholder:be.uD,renderRow:f,resolveItem:b,nrTracks:i,fetchTracks:F,limit:300,tracks:s,outerRef:S,columnPersistenceKey:"album-tracklist"},a)})})}));var Ce=i(60162),_e=i(91643),Ie=i(96989);i(80378);const Ae={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"albumPreRelease"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"lookup"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uris"},value:{kind:"ListValue",values:[{kind:"Variable",name:{kind:"Name",value:"uri"}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleaseResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseData"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"NotFound"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreRelease"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"preReleaseContent"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"artists"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseArtistItem"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"extractedColors"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"colorRaw"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}},{kind:"Field",name:{kind:"Name",value:"isFallback"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"type"}},{kind:"Field",name:{kind:"Name",value:"tracks"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseTrack"}}]}},{kind:"Field",name:{kind:"Name",value:"totalCount"}}]}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"copyright"}}]}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}}]}},{kind:"Field",name:{kind:"Name",value:"timezone"}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseArtistItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"ArtistResponseWrapper"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Artist"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"profile"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"}}]}},{kind:"Field",name:{kind:"Name",value:"visuals"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"height"}},{kind:"Field",name:{kind:"Name",value:"width"}}]}}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"albumPreReleaseTrack"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PreReleaseAlbumTrack"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"artists"},arguments:[{kind:"Argument",name:{kind:"Name",value:"offset"},value:{kind:"IntValue",value:"0"}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"20"}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"albumPreReleaseTrackArtistItem"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"playability"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"playable"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}}]}},...he.definitions]},Le=(e,n)=>(0,R.a)(Ae,e,n);function we(e){return e.includes("℗")?{type:"P",text:e}:{type:"C",text:e}}function Ue(e){var n;const i=e.preReleaseContent;let a;if(i){var t,l,r;const n=Re(e);a={artists:Ve(i.artists.items),name:i.name??void 0,uri:i.uri,coverArt:{extractedColors:null===(t=i.coverArt)||void 0===t||null===(t=t.extractedColors)||void 0===t?void 0:t.colorRaw,sources:(null===(l=i.coverArt)||void 0===l?void 0:l.sources)??[]},type:i.type,tracks:n,copyrights:(null===(r=i.copyright)||void 0===r?void 0:r.split("\n").map(we))??[]}}return{uri:e.uri,releaseDate:null===(n=e.releaseDate)||void 0===n?void 0:n.isoString,timezone:e.timezone??void 0,content:a}}function Ve(e){const n=[];for(const a of e){var i;if("Artist"===a.data.__typename)n.push({name:a.data.profile.name,id:a.data.id,uri:a.data.uri,images:(null===(i=a.data.visuals.avatarImage)||void 0===i?void 0:i.sources)??[]})}return n}var Me=i(98716);const Ee="H2kQJCtEGTjIDaPPniwb",Be="ZSU92ZH1fIuGwPp1cuDi",Oe=e=>{var n,i,a,k,v,p,N,y,b;const{uri:F}=e,{prerelease:f,loading:h,error:R}=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le;const{data:i,loading:a,error:t}=n({uri:e},{staleTime:x,gcTime:P});return{loading:a,error:!!t,prerelease:(0,c.useMemo)((()=>{if(!i)return null;for(const n of i.lookup)if("PreReleaseResponseWrapper"===n.__typename&&"PreRelease"===n.data.__typename&&n.data.uri===e)return Ue(n.data);return null}),[i,e])}}(F),T=(e=>{var n;const i=null==e||null===(n=e.content)||void 0===n||null===(n=n.coverArt.extractedColors)||void 0===n?void 0:n.hex;return(0,Me.Y)(i),i})(f),D=parseInt(new URLSearchParams((0,l.TH)().search).get("index")||"0",10),{usePlayContextItem:j}=(0,m.n)({uri:F,pages:[{items:(C=(null==f||null===(n=f.content)||void 0===n?void 0:n.tracks.items)||[],C.filter((e=>e.isPlayable)).map((e=>({uri:e.uri,uid:null,type:u.p.TRACK,provider:null}))))}]},{featureIdentifier:"album_prerelease"});var C;if(h||R||!f)return(0,g.jsx)(_e.h,{hasError:!!R,errorMessage:s.ag.get("error.not_found.title.album")});if(null!=f&&null!==(i=f.content)&&void 0!==i&&i.uri&&function(e,n){var i;if(null===(i=e.content)||void 0===i||!i.uri||!e.releaseDate)return!1;const a=S(e.releaseDate);if(a>0)return!1;return a<=-1*n}(f,1728e5)){var _;const e=(0,d._b)(null==f||null===(_=f.content)||void 0===_?void 0:_.uri);if(e)return(0,g.jsx)(Ie.InstrumentedRedirect,{to:e.toURLPath(!0)})}return(0,g.jsxs)("section",{className:Ee,children:[(0,g.jsx)(Ce.$,{children:s.ag.get("album.page-title",(null===(a=f.content)||void 0===a?void 0:a.name)??"")}),(0,g.jsx)(ge,{prerelease:f,backgroundColor:T}),(0,g.jsx)(G,{prerelease:f,backgroundColor:T}),null!==(k=f.content)&&void 0!==k&&k.tracks.totalLength?(0,g.jsxs)("div",{className:"contentSpacing",children:[(0,g.jsx)(r.x,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:s.ag.get("web-player.album-prerelease.tracklist_preview")}),(0,g.jsx)(je,{prereleaseUri:F,ariaLabel:(null===(v=f.content)||void 0===v?void 0:v.name)??s.ag.get("error.not_found.title.album"),nrTracks:(null===(p=f.content)||void 0===p?void 0:p.tracks.totalLength)??0,scrollToIndex:D,usePlayContextItem:j,initalTracks:null===(N=f.content)||void 0===N?void 0:N.tracks.items,albumUri:null===(y=f.content)||void 0===y?void 0:y.uri})]}):null,(0,g.jsx)("div",{className:t()(Be,"contentSpacing"),children:(0,g.jsx)(o.k,{copyrights:(null===(b=f.content)||void 0===b?void 0:b.copyrights)??[]})})]})}},66713:(e,n,i)=>{i.d(n,{k:()=>r});i(75930),i(92027),i(86277);var a=i(58206);const t="rTMkDBDp47Eo12ZEQv4U";var l=i(11527);const r=e=>{let{copyrights:n,courtesyLine:i}=e;const r=(n||[]).map(((e,n)=>{const i=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let t;return t="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,l.jsx)(a.D,{as:"p",variant:"finale",dir:"auto",children:`${t} ${i}`},n)}));return i&&r.unshift((0,l.jsx)(a.D,{as:"p",variant:"finale",dir:"auto",children:i},r.length)),(0,l.jsx)("div",{className:t,children:r})}}}]);
//# sourceMappingURL=xpui-routes-album-prerelease.e2faf7fc.js.map