var ApcStyleTile=[function(e,t){e.exports=react_and_react_dom.React},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(13),o=n(39),i=n(22),a=Object.defineProperty;t.f=n(3)?Object.defineProperty:function(e,t,n){if(r(e),t=i(t,!0),r(n),o)try{return a(e,t,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){e.exports=!n(14)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(2),o=n(15);e.exports=n(3)?function(e,t,n){return r.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(23)("wks"),o=n(16),i=n(1).Symbol,a="function"==typeof i;(e.exports=function(e){return r[e]||(r[e]=a&&i[e]||(a?i:o)("Symbol."+e))}).store=r},function(e,t){var n=e.exports={version:"2.6.12"};"number"==typeof __e&&(__e=n)},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){var r=n(18);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";var r=n(66);n(38)(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n(71)),i="undefined"===typeof window?{}:window.device,a={};"undefined"!==typeof window&&(window.device=a);var s="undefined"===typeof window?"REACTSSR":window.navigator.userAgent.toLowerCase(),c=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","pov_tv","hbbtv","ce-html"];macos=function(){return u("mac")},a.ios=a.iphone=function(){return!a.windows()&&u("iphone")},a.ipod=function(){return u("ipod")},a.ipad=function(){return u("ipad")},a.android=a.androidPhone=function(){return a.android()&&u("mobile")},a.androidTablet=function(){return a.android()&&!u("mobile")},a.blackberry=a.blackberryPhone=a.blackberryTablet=function(){return a.blackberry()&&u("tablet")},a.windows=function(){return u("windows")},a.windowsPhone=function(){return a.windows()&&u("phone")},a.windowsTablet=a.fxos=a.fxosPhone=function(){return a.fxos()&&u("mobile")},a.fxosTablet=a.meego=a.cordova=function(){return"undefined"!==typeof window&&!(!window.cordova||"file:"!==location.protocol)},a.nodeWebkit=function(){return"undefined"!==typeof window&&"object"===(0,o.default)(window.process)},a.mobile=a.tablet=a.desktop=a.television=a.portrait=function(){return"undefined"!==typeof window&&window.innerHeight/window.innerWidth>1},a.landscape=function(){return"undefined"!==typeof window&&window.innerHeight/window.innerWidth<1},a.noConflict=function(){return"undefined"!==typeof window&&(window.device=i),this},a.type=l(["mobile","tablet","desktop"]),a.os=l(["ios","iphone","ipad","ipod","android","blackberry","windows","fxos","meego","television"]);var f=a;t.default=f},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){e.exports=!0},function(e,t,n){var r=n(9);e.exports=function(e,t){if(!r(e))return e;var n,o;if(t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;if("function"==typeof(n=e.valueOf)&&!r(o=n.call(e)))return o;if(!t&&"function"==typeof(n=e.toString)&&!r(o=n.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(8),o=n(1),i=o["__core-js_shared__"]||(o["__core-js_shared__"]={});(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(17)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){t.f=n(6)},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){e.exports=n(67)},function(e,t,n){e.exports=!n(3)&&!n(14)((function(){return 7!=Object.defineProperty(n(40)("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(9),o=n(1).document,i=r(o)&&r(o.createElement);e.exports=function(e){return i?o.createElement(e):{}}},function(e,t,n){e.exports=n(5)},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getVisitorId=function(){var e=document.cookie.split(";"),t=!0,n=!1,r=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){for(var a=o.value;" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf("visitor")){var s=a.indexOf("=")+2,c=a.length-1;return a.substring(s,c)}}}catch(u){n=!0,r=u}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return""},t.getBeaconServerUrl=function(e){if("production"===e)return"https://beacon.shutterfly.com/log";return"https://beacon.".concat(e,".shutterfly.com/log")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=function(e){return Math.random().toString(16).slice(-4)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){var r=n(57),o=Math.min;e.exports=function(e){return e>0?o(r(e),9007199254740991):0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(e){var t=e.name,n=e.additionalLogData,i=e.globalLogData,a=e.batch,s=e.env,c=e.enableNRD,u=void 0!==c&&c,l=e.batchSize,f=void 0===l?10:l,d=e.batchInterval,p=void 0===d?15e3:d;return u?(0,r.default)(t,i,f,p):(0,o.default)(t,n,a,s)}(e)};var r=i(n(97)),o=i(n(122));function i(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){var r=n(70);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,o){return e.call(t,n,r,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,n){n(26)("asyncIterator")},function(e,t,n){var r=n(29),o=n(28);e.exports=function(e){return function(t,n){var i,a,s=String(o(t)),c=r(n),u=s.length;return c<0||c>=u?e?"":void 0:(i=s.charCodeAt(c))<55296||i>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?e?s.charAt(c):i:e?s.slice(c,c+2):a-56320+(i-55296<<10)+65536}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=var r=f(n(49)),o=f(n(98)),i=n(50),a=f(n(51)),s=f(n(99)),c=f(n(119)),u=f(n(120)),l=n(121);function f(e){return e&&e.__esModule?e:{default:e}}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(t,n,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.batchSize=r,this.batchInterval=o,this.fetch=c.default,this.bowser=this.initiateBowser(),this.globalLogData=function(e,t,n){var r={};try{r={os:n.getOSName(),osVersion:n.getOSVersion(),browser:n.getBrowserName(),browserVersion:n.getBrowserVersion(),device:n.getPlatformType(),engineName:n.getEngineName()};var o=(0,l.getURLPath)();o&&(r.urlPath=o)}catch(c){r={}}var s={appName:e,serviceLogVersion:"v2",brandId:"SFLY",visitorId:(0,i.getVisitorId)(),sessionId:(0,a.default)(),appContext:d({},r)};return(0,u.default)({},s,t||{})}(t,n,this.bowser),(0,s.default)(this)}var t,n,f;return t=e,(n=[{key:"asyncMetric",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new o.default(this,e,t)}},{key:"debug",value:function(e){this.buildLog("DEBUG",e,!0)}},{key:"info",value:function(e){this.buildLog("INFO",e,!0)}},{key:"warn",value:function(e){this.buildLog("WARN",e,!0)}},{key:"error",value:,{key:"metric",value:function(e){e=d({appContext:{success:!0}},e),this.buildLog("METRIC",e)}},{key:"buildLog",value:function(e,t,n){t.hasOwnProperty("appContext")||(t.appContext={}),e&&(t.appContext.metric=e),void 0!=n&&(t.appContext.success=n),t=d({startMillis:Date.now(),endMillis:Date.now()},(0,u.default)({},this.globalLogData,t)),(0,s.default)(this).add(t)}},{key:"dispatchLogs",value:,{key:"initiateBowser",value:function(){if("undefined"===typeof window)return{};try{var e=window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"";return r.default.getParser(e)}catch(t){return{}}}}])&&h(t.prototype,n),f&&h(t,f),e}()},function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){o(e,t,n[t])}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}unction a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(this,e),this.logger=t,this.eventId=n,this.startTime=Date.now(),this.logToSignalFX=r}var t,n,s;return t=e,(n=[{key:"success",value:function(e){e.hasOwnProperty("appContext")||(e.appContext={}),e.appContext.success=!0,this.createLog(e)}},{key:"failure",value:function(e){e.hasOwnProperty("appContext")||(e.appContext={}),e.appContext.success=!1,this.createLog(e)}},{key:"createLog",value:function(e){this.endTime=Date.now(),e=r({},e,{startMillis:this.startTime,endMillis:this.endTime,eventId:this.eventId}),this.logToSignalFX&&(this.perfSummary=r(o({},this.eventId,[this.endTime-this.startTime]),e.perfSummary),e=r({},e,{perfSummary:this.perfSummary})),this.logger.metric(e)}}])&&a(t.prototype,n),s&&a(t,s),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.deleteInstance=var r=n(100),o=n(50);unction a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=null,c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logStack=[],this.logger=t,this.env=(0,r.getCurrentEnv)(),setInterval(this.requestNRD,this.logger.batchInterval)}var t,n,c;return t=e,(n=[{key:"add",value:function(e){s.logStack.push(e),s.logStack.length>=s.logger.batchSize&&this.requestNRD()}},{key:"deleteLogs",value:,{key:"requestNRD",value:function(){if(s.logStack&&s.logStack.length>0){var e=(0,o.getBeaconServerUrl)(s.env),t=i(s.logStack);s.logger.fetch(e,t),s.deleteLogs()}}}])&&a(t.prototype,n),c&&a(t,c),e}()},function(e,t,n){"use strict";n(38)(t,"__esModule",{value:!0}),t.getEnvByHost=i,t.getCurrentEnv=s,t.getBaseHostname=c,t.getHostname=t.getCDNHostname=function(){var e=s();if("dev"===e||"dev1"===e)return"www.".concat(e,".shutterfly.com");if("beta1"===e||"stage1"===e){var t=e.substr(0,e.length-1);return"cdn-".concat(t,".staticsfly.com")}var n="production"===e?"":"-".concat(e);return"cdn".concat(n,".staticsfly.com")},t.getEnvPrefix=function(){var e=s();if("production"===e)return"";return"".concat(e,".")},n(101),n(118);var r={dev:1,beta:1,kappa:1,stage:1,stage1:1,kappa1:1},o=null;function i(e){if(!e)return"production";if(e))return"dev";var t=function(e){if(0===e.indexOf("localhost"))return"dev";var t=e.split(".");if(t.length>1)for(var n=1,r=t.length;n<r;n++)if(t[n].toLowerCase().match(/^(shutterfly|tinyprints)$/))return t[n-1].toLowerCase();return null}(e);return"local"===t||"int"===t?"dev":t&&r[t]?t:"production"}function a(){return function(){try{if("undefined"!==typeof window)return!0}catch(e){return!1}}()?i(window.location.host):)}unction c(){var e=s();return"production"===e?"shutterfly.com":"".concat(e,".shutterfly.com")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if("undefined"===typeof window)return{catch:function(){}};if("function"===typeof window.fetch)return function(e,t){fetch(e,{method:"POST",body:JSON.stringify(t),headers:{"Content-type":"application/json; charset=UTF-8"}}).then((function(e){})).catch((function(t){return console.error("Unable to log message: ".concat(e,", received ").concat(t))}))}(e,t);var n=function(e){},r=new XMLHttpRequest;return r.open("POST",e,!0),r.send(t),r.onload=r.addEventListener("error",(function(e){return n(e)})),{catch:function(e){return n=e}}}},function(e,t,n){"use strict";function r(e){return(r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function e(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return n.reduce((function(t,n){if("object"!==r(n))throw new Error("merge only works on objects");for(var o in n)if("object"!==r(n[o])||"object"!==r(t[o])||Array.isArray(n[o]))if(Array.isArray(t[o])||Array.isArray(n[o])){var i=(t[o]?t[o]:[]).concat(n[o]?n[o]:[]);t[o]=i}else t[o]=n[o];else t[o]=e(t[o],n[o]);return t}),{})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getURLPath=,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;return new d(e,t,n,r||h())};var r=s(n(49)),o=s(n(51)),i=s(n(123)),a=s(n(124));unction c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var f=(0,o.default)(),d=function(){function e(t,n,o,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fetch=a.fetch,this.composed=void 0,this.batchSize=o.size,this.batchUnit=o.unit||"log",this.composed=this.batchSize?(0,i.default)(n):void 0,this.name=t,this.additionalLogData=n,this.performanceApi=a.performance,this.beaconApi=a.beacon,this.bowser=r.default.getParser(a.userAgent),this.additionalLogData.logSession||(this.additionalLogData.logSession=f),this.commonFields={os:this.bowser.getOSName(),osVersion:this.bowser.getOSVersion(),browser:this.bowser.getBrowserName(),browserVersion:this.bowser.getBrowserVersion(),device:this.bowser.getPlatformType(),engineName:this.bowser.getEngineName()},this.resource=this.additionalLogData.resource||"/application/log.gif"}var t,n,o;return t=e,(n=[{key:"debug",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._log("DEBUG",!0,e,t,Date.now())}},{key:"info",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._log("INFO",!0,e,t,Date.now())}},{key:"warn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._log("WARN",!0,e,t,Date.now())}},{key:"error",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._log("ERROR",!1,e,t,Date.now())}},{key:"metric",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._log("METRIC",!0,e,c({},n,{duration:t}),Date.now())}},{key:"asyncMetric",value:function(e,t){return new a.default(this,e,t,this.performanceApi)}},{key:"pause",value:function(){if(this.composed)return null;this.composed=(0,i.default)(this.additionalLogData)}},{key:"resume",value:function(){if(this.composed){var e=this.composed.serialize();this.composed=void 0;var t={name:this.name,level:"BATCH",payload:e};this._logData(t),this.batchSize&&this.pause()}}},{key:"_log",value:function(e,t,n,r,o){var i=c({},{name:this.name,level:e,message:n,success:t,msg:n,timestamp:o},this.commonFields,this.additionalLogData,r);if(i=this._cleanupData(i),this.composed)return this.composed.add(n,i),void(this.batchSize&&this.composed.size()>=this.batchSize&&this.resume());this._logData(i)}},{key:"_logData",value:function(e){var t=Object.keys(e).map((function(t){var n=e[t];return!n&&0!==n||"string"!==typeof n&&"number"!==typeof n&&"boolean"!==typeof n?"":"".concat(t,"=").concat(encodeURIComponent(n))}));this._request(t.join("&"))}},{key:"_cleanupData",value:function(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n],o="function"===typeof r?r():r;null!=o&&(t[n]="".concat(o).substring(0,1e3))}return t}},{key:"_request",value:function(e){var t="".concat(this.resource,"?").concat(e);this.beaconApi?this.beaconApi.sendBeacon(t):this.fetch(t).catch(()}}])&&l(t.prototype,n),o&&l(t,o),e}();function p(e){if("undefined"===typeof window)return Promise.reject("Not available during SSR");if("function"===typeof window.fetch)return window.fetch(e);var t=n=new XMLHttpRequest;return n.addEventListener("error",(),n.open("GET",e),n.send(),{catch:}var h=function(){try{var e=p,t="undefined"!==typeof window&&(window.navigator&&"function"===typeof window.navigator.sendBeacon),n="undefined"===typeof window?"REACTSSR":window.navigator&&window.navigator.userAgent?window.navigator.userAgent:"";return{performance:"undefined"===typeof window?window.performance,beacon:t?window.navigator:void 0,fetch:e,userAgent:n}}catch(r){return{}}}},function(e,t,n){"use strict";ject.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{_logs:[],_logCache:{},_pairsFound:{},_requiredUnique:{timestamp:!0,time:!0,clientStartTime:!0,duration:!0,success:!0},size:add:function(e,t){var n=Object.keys(t).sort(),r={},o="",i=!0,a=!1,s=void 0;try{for(var c,u=n[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value,f="".concat(l).concat(t[l]),d=!0===this._requiredUnique[l];o+=f,d||void 0===this._pairsFound[f]?d||(this._pairsFound[f]={key:l,value:t[l],count:1}):this._pairsFound[f].count+=1,(d||this._pairsFound[f].count<2)&&(r[l]=t[l])}}catch(h){a=!0,s=h}finally{try{i||null==u.return||u.return()}finally{if(a)throw s}}var p="".concat(e).concat(o);!0!==this._logCache[p]&&(this._logCache[p]=!0,this._logs.push({message:e,data:r,sortedKeys:n}))},serialize:function(){var t=this._dedupeCommonFields(),n=r({},t.common,e);return n.logList=t.logs,JSON.stringify(n)},_dedupeCommonFields:function(){var t=[],n={},r=!0,o=!1,i=void 0;try{for(var a,s=this._logs[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var c=a.value,u={message:c.message,msg:c.message},l=!0,f=!1,d=void 0;try{for(var p,h=c.sortedKeys[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var v=p.value,g=this._pairsFound["".concat(v).concat(c.data[v])];(void 0===g||g.count<2)&&e[v]!==c.data[v]?u[v]=c.data[v]:g&&g.count>1&&void 0===n[v]&&(n[v]=g.value)}}catch(m){f=!0,d=m}finally{try{l||null==h.return||h.return()}finally{if(f)throw d}}t.push(u)}}catch(m){o=!0,i=m}finally{try{r||null==s.return||s.return()}finally{if(o)throw i}}return{common:n,logs:t}}}}},function(e,t,n){"use strict";ject.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=0,a=function(){function e(t,n,r,o){!this,e),this.logger=t,this.message=n,this.url=r,this.perf=void 0,this._isCompletePerformance(o)&&(this.perf=o),this.startTime=Date.now();var a=i++;this.startMark="".concat("SFJS","-").concat(this.message,"-").concat(a,"-start"),this.endMark="".concat("SFJS","-").concat(this.message,"-").concat(a,"-end"),this.resolved=!1,this.perf&&this.perf.mark(this.startMark)}var t,n,a;return t=e,(n=[{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.resolved)return!1;var t=this._duration();return e.clientStartTime=this.startTime,this.url&&(e.url=this.url),this.logger.metric(this.message,t,e),this._clearMarks(),!0}},{key:"success",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.success=!0,this.log(e),this.resolved=!0}},{key:"failure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.success=!1,this.log(e),this.resolved=!0}},{key:"_duration",value:function(){var e=Date.now()-this.startTime;if(!this.perf)return e;if(this.perf.mark(this.endMark),this.perf.measure(this.message,this.startMark,this.endMark),this.perf.getEntriesByName(this.message).count<=0)return e;var t=this.perf.getEntriesByName(this.message)[0];return parseInt(t.duration,10)}},{key:"_clearMarks",value:function(){this.perf&&void 0!==this.perf.clearMarks&&void 0!==this.perf.clearMeasures&&(this.perf.clearMarks(this.startMark),this.perf.clearMarks(this.endMark),this.perf.clearMeasures(this.message))}},{key:"_isCompletePerformance",value:function(e){return!(!e||"object"!=r(e))&&"function"==typeof e.mark&&"function"==typeof e.measure&&"function"==typeof e.getEntriesByName}}])&&o(t.prototype,n),a&&o(t,a),e}();t.default=a},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(63);var a=Object(r.createContext)({session:{},setSession:()=>{}});var s=Object(r.createContext)({styleTile:{},setStyleTile:);const c={MAIN_HEADING:"Your Home - Your Style",THEME:{DEFAULT:"true-neutral",STYLES:["boho-chic","color-theory","dark-aesthetic","nod-to-mod","true-neutral"]},CONTENT_URL:{"boho-chic":"https://widgets.photoccino.com/apc-style-tile/stylesData/bohoChic.json","color-theory":"https://widgets.photoccino.com/apc-style-tile/stylesData/colorTheory.json","dark-aesthetic":"https://widgets.photoccino.com/apc-style-tile/stylesData/darkAesthetic.json","nod-to-mod":"https://widgets.photoccino.com/apc-style-tile/stylesData/nodToMod.json","true-neutral":"https://widgets.photoccino.com/apc-style-tile/stylesData/trueNeutral.json"},BUTTON:{SHUFFLE:"SHUFFLE STYLE",MORE:"MORE FROM THIS STYLE"},PALETTE:{TOTAL_COLORS:5},DEVICE:{BREAKPOINTS:{SMALL_WIDTH:768,MEDIUM_WIDTH:992,LARGE_WIDTH:1200},WIDTH_MODE:{WIDE:"wide",NARROW:"narrow"},PLATFORM:{WEB:"web",MWEB:"mweb"}},INTERVAL:{EXPIRY:1e4},STATUS:{IDLE:"IDLE",PENDING:"PENDING",OK:"OK",FAIL:"FAIL"},SHUFFLE_REASON:{STYLE_FAIL:"STYLE_FAIL",USER_CLICK:"USER_CLICK"}},u={INIT_SPLUNK:{NAME:"apc-style-tile",BATCH_INTERVAL:500},EVENTS:{INIT:"init",VIEW:"view",ENGAGE:"engage",REDIRECT_PIP:"redirect-pip",SHUFFLE:"shuffle",MORE:"more",SHUTDOWN:"shutdown",CRASH:"crash",ERROR:"error"},MESSAGES:{FIRST_COLLAGE_HOVER:"first-collage-hover",FIRST_TOOLTIP_OPEN:"first-tooltip-open-in-style",TOOLTIP_CLICK:"tooltip-click",ASSET_CLICK:"asset-click",STYLE_FAIL:"style-fail",STYLE_ASSETS_FAIL:"style-assets-fail"}},l={EVENTS:{VIEW:"apcStyleTileView",TOOLTIP:"apcStyleTileToolTip",CLICK:"apcStyleTileClick",MORE:"apcStyleTileMore"}};var f=n(12),d=n.n(f);const p=()=>{const[e,t]=Object(r.useState)(window.innerWidth<c.DEVICE.BREAKPOINTS.SMALL_WIDTH?"mobile":window.innerWidth<c.DEVICE.BREAKPOINTS.LARGE_WIDTH?"tablet":""),[n,o]=Object(r.useState)(window.innerWidth<window.innerHeight?"portrait":"landscape"),[i,a]=Object(r.useState)(window.innerWidth<c.DEVICE.BREAKPOINTS.SMALL_WIDTH?c.DEVICE.WIDTH_MODE.NARROW:c.DEVICE.WIDTH_MODE.WIDE),s=Object(r.useCallback)(()=>{const e=d.a.mobile()?"mobile":d.a.tablet()?"tablet":"",n=d.a.portrait()?"portrait":d.a.landscape()?"landscape":"";t(e),o(n)},[]);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;const o=Object(r.useRef)();Object(r.useEffect)([t]),Object(r.useEffect)(()=>{const t=n&&n.addEventListener,r=o.current&&"function"===typeof o.current;if(!t||!r)return;const i=return n.addEventListener(e,i),,[e,n])}("resize",Object(r.useCallback)(()=>{const e=window.innerWidth,n=window.innerHeight;if(e&&n){const r=c.DEVICE.BREAKPOINTS.SMALL_WIDTH,i=c.DEVICE.BREAKPOINTS.LARGE_WIDTH,s=e<r?"mobile":e<i?"tablet":"",u=e<n?"portrait":"landscape",l=window.innerWidth<c.DEVICE.BREAKPOINTS.SMALL_WIDTH?c.DEVICE.WIDTH_MODE.NARROW:c.DEVICE.WIDTH_MODE.WIDE;t(s),o(u),a(l)}},[])),Object(r.useEffect)([s]),{type:e,orientation:n,platform:"mobile"===e||"tablet"===e?c.DEVICE.PLATFORM.MWEB:c.DEVICE.PLATFORM.WEB,widthMode:i}},h=window,v=()=>{const e=Object(r.useCallback)((e,t)=>t&&{event:{eventInfo:{eventName:e},eventDetails:t}}||{event:{eventInfo:{eventName:e}}},[]);return Object(r.useCallback)((t,n)=>{const r=e(t,n);try{h._satellite&&h._satellite.track(t,r),console.debug("Adobe::sendTracking: _satellite",JSON.stringify(r))}catch(o){console.error("failed to send adobe report",JSON.stringify(r))}},[e])};var g=n(64),m=n.n(g);const y=()=>{const{styleTile:e}=Object(r.useContext)(s),{config:t,initialStyle:n}=e,{abTest:o}=t,{session:i}=Object(r.useContext)(a),{userId:l,pageName:f}=i,d=p(),h={userId:l||"",appVersion:f||"",transactionId:n,...o&&o.enabled&&{appContext:{testGroup:o.testGroup}},...d.platform===c.DEVICE.PLATFORM.MWEB&&{appContext:{deviceOrientation:d.orientation}}};return Object(r.useMemo)(()=>m()({name:u.INIT_SPLUNK.NAME,enableNRD:!0,globalLogData:h,batchInterval:u.INIT_SPLUNK.BATCH_INTERVAL}),[h])};function b(){const e=window.location.href;return e.indexOf("local")>-1?{workEnv:"local",targetEnv:"internal"===e.split(".")[1]?"prod":e.split(".")[1]}:e.indexOf("beta")>-1?{workEnv:"beta",targetEnv:"beta"}:e.indexOf("stage")>-1?{workEnv:"stage",targetEnv:"stage"}:e.indexOf("kappa")>-1?{workEnv:"kappa",targetEnv:"kappa"}:{workEnv:"prod",targetEnv:"prod"}}const S=(e,t)=>{t&&"prod"!==t&&(e=e.replace("www.shutterfly.com","www.".concat(t,".shutterfly.com"))),window.location.href=e};n(125);function w(){const{styleTile:e}=Object(r.useContext)(s),{currentStyle:t,content:n}=e,{session:i}=Object(r.useContext)(a),{pageName:f}=i,d=p(),{platform:h}=d,g=y(),m=v(),w=Object(r.useCallback)(()=>{const e="".concat(h,"/").concat(f,"/").concat(t),n={name:"apc style tile more",style:t||"",interceptSource:e||""};m(l.EVENTS.MORE,n)},[m,t,f,h]),E=Object(r.useCallback)(()=>{g.info({eventId:u.EVENTS.MORE,appContext:{currentStyle:t}})},[g,t]),O=n[t];return o.a.createElement("a",{className:"apc-st-more-button",onClick:()=>{O&&O.styleUrl&&(E(),w(),setTimeout(()=>{S(O.styleUrl,b().targetEnv)},500))},href:O&&O.styleUrl},c.BUTTON.MORE)}n(126);function E(){const{styleTile:e}=Object(r.useContext)(s),{currentStyle:t,content:n}=e,i=n[t];return o.a.createElement("div",{className:"apc-st-palette ".concat(null===i||void 0===i?void 0:i.criteria,"-palette")},[...new Array(c.PALETTE.TOTAL_COLORS)].reverse().map((e,t)=>o.a.createElement("div",{className:"apc-st-color",key:t})))}n(127),n(128);function O(){return o.a.createElement("div",{className:"apc-st-skeleton-loading"})}function M(){const{styleTile:e}=Object(r.useContext)(s),{currentStyle:t,content:n}=e,i=n[t];return o.a.createElement(o.a.Fragment,null,t?o.a.createElement("div",{className:"apc-st-header"},o.a.createElement("div",{className:"apc-st-title"},null===i||void 0===i?void 0:i.title),o.a.createElement(E,null)):o.a.createElement("div",{className:"apc-st-header-loader"},o.a.createElement(O,null)))}function T(){const{setStyleTile:e}=Object(r.useContext)(s);return{setFirstAssetViewTime:(t,n)=>{e(e=>({...e,userInteraction:{...e.userInteraction,firstAssetViewTime:{...e.userInteraction.firstAssetViewTime,[t]:n}}}))},setCurrentStyle:t=>{e(e=>({...e,currentStyle:t,userInteraction:{...e.userInteraction}}))},setInitialStyle:t=>{e(e=>({...e,initialStyle:t}))},setFirstCollageHoverTime:t=>{e(e=>({...e,userInteraction:{...e.userInteraction,firstCollageHoverTime:t}}))},setAppInitTime:(t,n)=>{e(e=>({...e,currentStyle:t,userInteraction:{...e.userInteraction,appInitTime:n}}))},setFirstTooltipInStyleTime:(t,n)=>{e(e=>({...e,userInteraction:{...e.userInteraction,firstTooltipInStyleTime:{...e.userInteraction.firstTooltipInStyleTime,[t]:n}}}))},setOpenTooltipIndex:t=>{e(e=>({...e,userInteraction:{...e.userInteraction,openTooltipIndex:t}}))},setAssetsPositions:(t,n)=>{e(e=>({...e,collagePositions:{...e.collagePositions,[t]:{...e.collagePositions[t],assetsPositions:n}}}))},setFirstAppViewTime:t=>{e(e=>({...e,userInteraction:{...e.userInteraction,firstAppViewTime:t}}))},setStyleContentStatus:(t,n)=>{e(e=>({...e,stylesStatus:{...e.stylesStatus,[t]:{...e.stylesStatus[t],styleContent:n}}}))},setStyleAssetsStatus:(t,n)=>{e(e=>({...e,stylesStatus:{...e.stylesStatus,[t]:{...e.stylesStatus[t],assets:n}}}))},setDisplayShuffle:t=>{e(e=>({...e,config:{...e.config,displayShuffle:t}}))},setFirstShuffleTime:t=>{e(},setCollageStructure:(t,n)=>{e(e=>({...e,collagePositions:{...e.collagePositions,[t]:{...e.collagePositions[t],collageStructure:n}}}))},setOptionalStyles:setContent:t=>{e(e=>({...e,content:{...e.content,[t.criteria]:t}}))}}}n(129);function _(e){let{asset:t,index:n}=e;const{session:i}=Object(r.useContext)(a),{pageName:f}=i,d=y(),h=v(),g=p(),{platform:m,widthMode:w}=g,{styleTile:E,setStyleTile:O}=Object(r.useContext)(s),{currentStyle:M,userInteraction:_}=E,{firstTooltipInStyleTime:I}=_,{setFirstTooltipInStyleTime:A}=T(),x=Object(r.useCallback)(()=>{d.info({eventId:u.EVENTS.REDIRECT_PIP,appContext:{engagement:u.MESSAGES.TOOLTIP_CLICK,currentStyle:M,sku:t.sku,name:t.name,title:t.title,type:t.type,productCode:t.productCode,sflySku:t.sflySku,shapeName:t.shapeName,index:n}})},[t.name,t.productCode,t.sflySku,t.shapeName,t.sku,t.title,t.type,M,n,d]),C=Object(r.useCallback)(()=>{const e="".concat(m,"/").concat(f,"/").concat(M),r={name:"The user clicks",source:"tooltip",style:M||"",interceptSource:e||"",sku:t.sku,productName:t.name,productCode:t.productCode,skuCode:t.sflySku,asset:n};h(l.EVENTS.CLICK,r)},[h,t.name,t.productCode,t.sflySku,t.sku,M,n,f,m]),P=Object(r.useCallback)(e=>{d.info({eventId:u.EVENTS.ENGAGE,appContext:{engagement:u.MESSAGES.FIRST_TOOLTIP_OPEN,currentStyle:M,sku:t.sku,name:t.name,title:t.title,type:t.type,productCode:t.productCode,sflySku:t.sflySku,shapeName:t.shapeName,index:n,firstTooltipInStyleTime:e}})},[t.name,t.productCode,t.sflySku,t.shapeName,t.sku,t.title,t.type,M,n,d]),k=Object(r.useCallback)(()=>{const e="".concat(m,"/").concat(f,"/").concat(M),r={name:"The app asset is visible",style:M||"",interceptSource:e||"",sku:t.sku,productName:t.name,productCode:t.productCode,skuCode:t.sflySku,asset:n};h(l.EVENTS.TOOLTIP,r)},[h,t.name,t.productCode,t.sflySku,t.sku,M,n,f,m]),N=()=>{x(),C();const e="".concat(m,"/").concat(f,"/").concat(M);setTimeout(()=>{var n;const r=e?(null===(n=t.pipUrl)||void 0===n?void 0:n.indexOf("?"))>0?"&interceptSource="+e:"?interceptSource="+e:"",o="".concat(t.pipUrl).concat(r);S(o,b().targetEnv)},500)},L=e=>{w===c.DEVICE.WIDTH_MODE.NARROW&&(e.stopPropagation(),N())};return Object(r.useEffect)(()=>{if(!I[M]){const e=Date.now(),t=e-window.performance.timing.domLoading;P(t),k(),A(M,e)}},[d,M,n,t,I,O,A,m,f,h,P,k]),o.a.createElement("div",{className:"apc-st-tooltip",onClick:e=>{w===c.DEVICE.WIDTH_MODE.WIDE&&(e.stopPropagation(),N())}},o.a.createElement("div",{className:"apc-st-asset-name",onClick:L},t.name),o.a.createElement("div",{className:"apc-st-asset-title",onClick:L},t.title))}n(130);function I(e){let{asset:t,index:n}=e;const{styleTile:i}=Object(r.useContext)(s),{userInteraction:a}=i,{openTooltipIndex:u}=a,{setOpenTooltipIndex:l}=T(),f=p(),{platform:d}=f;return o.a.createElement("div",{className:"apc-st-hotspot",onClick:e=>{d===c.DEVICE.PLATFORM.MWEB&&(e.stopPropagation(),e.preventDefault(),l(n===u?-1:n))},onMouseEnter:()=>{d===c.DEVICE.PLATFORM.WEB&&l(n)},onMouseLeave:()=>{d===c.DEVICE.PLATFORM.WEB&&l(-1)}},o.a.createElement("div",{className:"apc-st-hotspot-ball ".concat(u===n?"apc-st-hotspot-filled":"")},u===n&&o.a.createElement(_,{asset:t,index:n})),o.a.createElement("div",{className:"apc-st-hotspot-ring"}))}n(131);function A(e){let{asset:t,onImageLoad:n,isImageLoaded:i,index:c}=e;const{session:f}=Object(r.useContext)(a),{pageName:d}=f,{styleTile:h}=Object(r.useContext)(s),{currentStyle:g}=h,m=p(),{platform:w}=m,E=y(),O=v(),M=Object(r.useCallback)(()=>{E.info({eventId:u.EVENTS.REDIRECT_PIP,appContext:{engagement:u.MESSAGES.ASSET_CLICK,currentStyle:g,sku:t.sku,name:t.name,title:t.title,type:t.type,productCode:t.productCode,sflySku:t.sflySku,shapeName:t.shapeName,index:c}})},[t.name,t.productCode,t.sflySku,t.shapeName,t.sku,t.title,t.type,g,c,E]),T=Object(r.useCallback)(()=>{const e="".concat(w,"/").concat(d,"/").concat(g),n={name:"The user clicks",source:"asset",style:g||"",interceptSource:e||"",sku:t.sku,productName:t.name,productCode:t.productCode,skuCode:t.sflySku,asset:c};O(l.EVENTS.CLICK,n)},[O,t.name,t.productCode,t.sflySku,t.sku,g,c,d,w]);return o.a.createElement("a",{className:"apc-st-asset",onClick:()=>{M(),T();const e="".concat(w,"/").concat(d,"/").concat(g);setTimeout(()=>{var n;const r=e?(null===(n=t.pipUrl)||void 0===n?void 0:n.indexOf("?"))>0?"&interceptSource="+e:"?interceptSource="+e:"",o="".concat(t.pipUrl).concat(r);S(o,b().targetEnv)},500)},href:t.pipUrl,"data-test-id":"apc-st-asset".concat(i?"-rendered":"")},o.a.createElement("img",{className:"apc-st-image",src:t.imgSrc,alt:t.name,onLoad:n}),i&&o.a.createElement(I,{asset:t,index:c}))}n(132);onst C={width:6,height:2},P={width:2,height:6},k={smallSq:{width:1,height:1},bigSq:{width:2,height:2},horizRect:{width:2,height:1},vertRect:{width:1,height:2}},N={smallSq:4,vertRect:1,bigSq:1,horizRect:1},L={smallSq:4,vertRect:1,bigSq:1,horizRect:1};n(133);function F(e){let{tile:t,index:n}=e;const[i,f]=Object(r.useState)(!1),d=y(),h=v(),{styleTile:g}=Object(r.useContext)(s),{currentStyle:m,userInteraction:b}=g,{firstAppViewTime:S,firstAssetViewTime:w}=b,{session:E}=Object(r.useContext)(a),{pageName:O}=E,{setFirstAssetViewTime:M}=T(),_=p(),{widthMode:I,platform:k}=_,N=Object(r.useCallback)(e=>{d.info({eventId:u.EVENTS.VIEW,appContext:{currentStyle:m,firstAssetViewTime:e}})},[d,m]),L=Object(r.useCallback)(()=>{const e="".concat(k,"/").concat(O,"/").concat(m),t={name:"The app asset is visible",style:m||"",interceptSource:e||""};h(l.EVENTS.VIEW,t)},[h,m,O,k]);Object(r.useEffect)(()=>{if(0===n&&i&&S>0&&!w[m]){const e=Date.now(),t=e-window.performance.timing.domLoading;N(t),L(),M(m,e)}},[S,w,n,i,L,N,M,m]);const F=I===c.DEVICE.WIDTH_MODE.WIDE?C.width:P.width;return o.a.createElement("div",{className:"apc-st-tile ".concat(t.shapeName," apc-st-tile-").concat(t.position.col.end===F+1?"right":1===t.position.col.start?"left":"middle"),style:{gridColumnStart:t.position.col.start,gridColumnEnd:t.position.col.end,gridRowStart:t.position.row.start,gridRowEnd:t.position.row.end}},o.a.createElement(A,{asset:t,onImageLoad:()=>{f(!0)},isImageLoaded:i,index:n}),!i&&o.a.createElement(x,null))}function R(e){let{assetPositions:t}=e;return o.a.createElement(o.a.Fragment,null,t.map()}n(134);function j(){const e=["smallSq","smallSq","smallSq","smallSq","vertRect","horizRect","bigSq"];return o.a.createElement(o.a.Fragment,null,e.map((t,n)=>o.a.createElement("div",{key:n,className:"apc-st-tile-loader ".concat(e[n])},o.a.createElement(O,null))))}n(135);function D(e){let{handleHoverCollage:t,isUserInteracted:n}=e;const i=p(),{widthMode:a}=i,u=a===c.DEVICE.WIDTH_MODE.WIDE?C.width:P.width,l=12*(u-1)/u,{styleTile:f}=Object(r.useContext)(s),{currentStyle:d,collagePositions:h,content:v}=f,g=v[d],m=g&&g.criteria&&h[g.criteria]&&h[g.criteria].assetsPositions;return o.a.createElement("div",{className:"apc-st-collage-wrapper"},o.a.createElement("div",{onMouseEnter:t,className:"apc-st-collage ".concat(null===g||void 0===g?void 0:g.criteria,"-theme").concat(n?" interaction":" pending-interaction"),style:{gridTemplateRows:"auto",gridTemplateColumns:"repeat(".concat(u,", calc(100% / ").concat(u," - ").concat(l,"px))")},"data-test-id":"apc-st-collage"},m?o.a.createElement(R,{assetPositions:m}):o.a.createElement(j,null)))}n(136);const B=new Map;function V(e){let{icon:t}=e;const n=B.get(t);return o.a.createElement("span",{className:"apc-st-icon apc-st-icon-".concat(t)},n&&o.a.createElement(n,null))}B.set("shuffle",(function(){return o.a.createElement("svg",{width:"16px",height:"16px",viewBox:"0 0 16 16",version:"1.1"},o.a.createElement("g",{stroke:"none",strokeWidth:"1",fill:"#585B58",fillRule:"evenodd"},o.a.createElement("path",{d:"M5.5,8.5 C6.05228475,8.5 6.5,8.94771525 6.5,9.5 C6.5,10.0522847 6.05228475,10.5 5.5,10.5 L4.625,10.5 L4.6418151,10.5265316 C5.1522812,11.2802994 5.88004214,11.8644992 6.75238224,12.1993592 C9.07259228,13.0900044 11.6755047,11.9311131 12.5661499,9.61090308 C12.7640711,9.09530085 13.3424961,8.83776945 13.8580983,9.0356906 C14.3737005,9.23361175 14.6312319,9.81203675 14.4333108,10.327639 C13.1468233,13.6790535 9.38706085,15.3530076 6.03564634,14.0665201 C5.04526865,13.6863497 4.18150382,13.0811122 3.49891885,12.3095315 L3.5,12.5 C3.5,13.0522847 3.05228475,13.5 2.5,13.5 C1.94771525,13.5 1.5,13.0522847 1.5,12.5 L1.5,9.5 C1.5,8.98716416 1.88604019,8.56449284 2.38337887,8.50672773 L2.5,8.5 L5.5,8.5 Z M9.96435366,1.93347992 C10.9547314,2.3136503 11.8184962,2.91888779 12.5010812,3.69046845 L12.5,3.5 C12.5,2.94771525 12.9477153,2.5 13.5,2.5 C14.0522847,2.5 14.5,2.94771525 14.5,3.5 L14.5,6.5 C14.5,7.01283584 14.1139598,7.43550716 13.6166211,7.49327227 L13.5,7.5 L10.5,7.5 C9.94771525,7.5 9.5,7.05228475 9.5,6.5 C9.5,5.94771525 9.94771525,5.5 10.5,5.5 L11.375,5.5 L11.3581849,5.47346839 C10.8477188,4.71970065 10.1199579,4.13550076 9.24761776,3.80064078 C6.92740772,2.90999559 4.32449526,4.06888688 3.43385007,6.38909692 C3.23592892,6.90469915 2.65750393,7.16223055 2.1419017,6.9643094 C1.62629946,6.76638825 1.36876807,6.18796325 1.56668922,5.67236102 C2.85317672,2.32094651 6.61293915,0.646992426 9.96435366,1.93347992 Z"})))}));n(137);function W(e){let{onClick:t}=e;return o.a.createElement("button",{className:"apc-st-shuffle-button",onClick:t},o.a.createElement(V,{icon:"shuffle"}),c.BUTTON.SHUFFLE)}const H=window,U=()=>{const e=Object(r.useRef)({isSignedIn:!0,pageName:"homepage"}),t=Object(r.useRef)({userId:"Anonymous",token:"None"}),{session:n,setSession:o}=Object(r.useContext)(a),i=()=>{(()=>{const t=new URLSearchParams(window.location.search).has("signedOut"),n=!e.current.isSignedIn;return!(t||n)})()?(()=>{const t=e.current.pageName;H.initSflyAuth().then(e=>f(t)).catch(})():(()=>{const t={userId:s(),token:"local",isSignedIn:!1,pageName:e.current.pageName};o(e=>({...e,...t}))})()},s=function(){var e,n,r;let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const i=null===(e=document.cookie)||void 0===e||null===(n=e.split("; "))||void 0===n||null===(r=n.find()||void 0===r?void 0:r.split("=")[1],a=document.cookie&&i&&JSON.parse(i).uid.toString(),s=o,c=t.current.userId;return a||s||c},u=e=>(e.split("/").reverse().find(||"").replace(" ","").toLowerCase(),l=()=>{var e,n,r;let i="";if(null===(e=H.SFLY_DTL)||void 0===e||null===(n=e.page)||void 0===n||null===(r=n.pageInfo)||void 0===r?void 0:r.pageName)i=u(H.SFLY_DTL.page.pageInfo.pageName);else{i=window.location.href}H.$sflyAuth?f(i):(e=>{console.error("Time out getting user ID authentication.");const n={userId:t.current.userId,token:t.current.token,isSignedIn:!1,pageName:e};o(e=>({...e,...n}))})(i)},f=e=>{H.$sflyAuth.getIdToken().then(t=>((e,t)=>{const n={userId:t.payload.sfly_uid,token:t.jwtToken,isSignedIn:!0,pageName:e};o(e=>({...e,...n}))})(e,t)).catch(n=>((e,n)=>{console.error("Failed getting user ID authentication.",n);const r={userId:s(H.$sflyAuth.iamConfig.appClientId),token:t.current.token,isSignedIn:!1,pageName:e};o(})(e,n))};return{getAuth:()=>{if(!n.userId)if("local"===n.env.workEnv)i();else{const e=(new Date).getTime(),t=setInterval(()=>{var n,r,o;if(H.$sflyAuth&&(null===(n=H.SFLY_DTL)||void 0===n||null===(r=n.page)||void 0===r||null===(o=r.pageInfo)||void 0===o?void 0:o.pageName)){const e=u(H.SFLY_DTL.page.pageInfo.pageName);f(e),clearInterval(t)}else(new Date).getTime()-e>c.INTERVAL.EXPIRY&&(l(),clearInterval(t))},200)}}}};let G={});const q=()=>{const{styleTile:e}=Object(r.useContext)(s),{collagePositions:t,config:n,stylesStatus:o}=e,{buildCollageDynamicallyOnShuffle:i}=n,{setAssetsPositions:a,setStyleAssetsStatus:l,setCollageStructure:f}=T(),d=p(),{widthMode:h}=d,v=y(),g=h===c.DEVICE.WIDTH_MODE.WIDE?C:P,m=h===c.DEVICE.WIDTH_MODE.WIDE?N:L,b=(e,t,n)=>{const r=[];for(let o=0;o<e;o++){const e=[];for(let r=0;r<t;r++)e.push(n);r.push(e)}return r},S=(e,t,n,r)=>{const o=t.length,i=t[0].length,a=e.length,s=e[0].length;if(n+o>a||r+i>s)return!1;for(let c=0;c<o;c++)for(let o=0;o<i;o++)if(t[c][o]!==G.empty&&e[n+c][r+o]!==G.empty)return!1;return!0},w=(e,t,n,r)=>{const o=t.length,i=t[0].length;for(let a=0;a<o;a++)for(let o=0;o<i;o++)t[a][o]!==G.empty&&(e[n+a][r+o]=t[a][o])},E=(e,t,n,r)=>{const o=t.length,i=t[0].length;for(let a=0;a<o;a++)for(let o=0;o<i;o++)t[a][o]!==G.empty&&(e[n+a][r+o]=G.empty)},O=(e,t,n,r,o)=>{if(e===o.length)return!0;const i=n.length,a=n[0].length;for(let s=0;s<i;s++)for(let i=0;i<a;i++){if(t[s][i])continue;const a=o[e];if(S(n,a.matrix,s,i)){if(w(n,a.matrix,s,i),t[s][i]=!0,O(e+1,t,n,r,o)){const e={row:{start:s+1,end:s+a.matrix.length+1},col:{start:i+1,end:i+a.matrix[0].length+1}};return r.push({shapeName:a.shapeName,position:e}),!0}t[s][i]=!1,E(n,a.matrix,s,i)}}return!1},M=(e,t)=>{let n=[];for(const r in e)for(let o=0;o<e[r];o++){const e={shapeName:r,matrix:t[r]};n.push(e)}return i&&(n=(e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e})(n)),n},_=async(e,t)=>{const n=e.map(e=>new Promise((t,n)=>{const r=new Image;r.onload=()=>{const n={...e,width:r.width,height:r.height};t(n)},r.onerror=r.src=e.imgSrc}));l(t,c.STATUS.PENDING);try{const e=await Promise.all(n);return l(t,c.STATUS.OK),e}catch(r){throw l(t,c.STATUS.FAIL),r}},I=async(e,t)=>{try{const n=(e=>{const t=[...e],n=e.map(,r=Math.max(...n),o=Math.min(...n);return t.forEach(e=>{e.width<e.height?e.shapeName="vertRect":e.width>e.height?e.shapeName="horizRect":e.width===e.height&&e.width>=(r+o)/2?e.shapeName="bigSq":e.width===e.height&&e.width<(r+o)/2&&(e.shapeName="smallSq")}),t})(await _(e,t));if(((e,t)=>{const n={};for(const r of e)r.shapeName&&t[r.shapeName]&&(n[r.shapeName]=(n[r.shapeName]||0)+1);for(const r in t)if(t[r]<n[r])return!1;return!0})(n,m)){const e=((g),r=(e=>{const t={};for(const n in e){const{width:r,height:o}=e[n],i=b(o,r,G[n]);t[n]=i}return t})(k),o=M(m,r),i=((e,t,n,r)=>{const o=b(e.height,e.width,!1),i=[];if(O(0,o,t,i,n)){const e=(e=>{const t=[],n=e.length,r=e[0].length;for(let o=0;o<n;o++){let n="";for(let t=0;t<r;t++)n+=e[o][t]+" ";t.push(n)}return t})(t);f(r,e)}else console.log("No solution found.");return i})(g,e,o,t);return((e,t)=>{const n=[...t],r=new Set;for(let o=0;o<e.length;o++)for(let t=0;t<n.length;t++)e[o].shapeName!==n[t].shapeName||n[t].hasOwnProperty("sku")||r.has(e[o].sku)||(n[t]={...n[t],...e[o]},r.add(e[o].sku));return n})(n,i)}console.error("Not valid, not enough assets for collage")}catch(n){console.error(n)}},A=(e,t)=>{I(t,e).then(t=>x(t,e)).catch(},x=(e,t)=>{if(e)F(e,t);else{const e=new Error("assetPositionList is not valid");R(e,t)}},F=R=(e,t)=>{((e,t)=>{v.info({eventId:u.EVENTS.ERROR,appContext:{currentStyle:e,message:u.MESSAGES.STYLE_ASSETS_FAIL,error:t.message}})})(t,e),console.error(e)};return{build:e=>{const t=e.criteria,n=e.assets;o[t].assets===c.STATUS.IDLE&&A(t,n)},rebuild:e=>{for(const n in t){const t=e[n],r=null===t||void 0===t?void 0:t.assets;r&&A(n,r)}},getSizedAssets:_}},z=window,K=()=>{const{session:e}=Object(r.useContext)(a),{setInitialStyle:t,setOptionalStyles:n}=T(),{styleTile:o}=Object(r.useContext)(s),{config:i,initialStyle:u}=o,{styles:l}=i,f=l[0],d={"boho-chic":["#3C4C58","#B3866C","#B66A5C","#BD7545","#934A2A","#964f2d","#af6a3c","#a44e2c","#d27c58","#b7822d","#d1a33c","#cf965c","#a27e5c","#bda394","#e6c697","#eaceae"],"color-theory":["#2FC981","#0385E1","#FF5194","#FF6E51","#ECD139","#c21919","#c219b0","#5e19c2","#1932c2","#19a6c2","#67a7de","#61bfcd","#1d937c","#19c264","#41c219","#fac20e","#f68027","#dd7e96","#c54565"],"dark-aesthetic":["#50504F","#A26861","#8A6A62","#547178","#325C50"],"nod-to-Mod":["#556779","#6D9EA6","#C79356","#B94B50","#E1A49C","#df001f","#784525","#068892","#d59b0b","#296a39","#005d76","#d2809d","#4491b7","#51821f","#e07f5d"],"true-neutral":["#5C5D61","#B9B3A5","#B0A896","#C8C1B7","#C4C4C4"]},p=(e,t)=>{const n=parseInt(e.slice(1,3),16),r=parseInt(e.slice(3,5),16),o=parseInt(e.slice(5,7),16),i=parseInt(t.slice(1,3),16),a=parseInt(t.slice(3,5),16),s=parseInt(t.slice(5,7),16);return Math.sqrt(Math.pow(i-n,2)+Math.pow(a-r,2)+Math.pow(s-o,2))},h=e=>{let t="";if((e=>{const t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return t===n&&t===r&&t>90})(e))t="true-neutral";else if((e=>{const t=parseInt(e.slice(1,3),16),n=parseInt(e.slice(3,5),16),r=parseInt(e.slice(5,7),16);return t===n&&t===r&&t<=90})(e))t="dark-aesthetic";else{let n=1/0;const r={},o={};for(const i in d){const a=d[i];let s=0,c=1/0;for(const t of a){const n=p(e,t);s+=n,n<c&&(c=n)}const u=s/a.length;r[i]=u,o[i]=c;const l=.7*c+.3*u;l<n&&(n=l,t=i)}}return t},v=(e,t,n,r)=>{const o=((e,t)=>e<=t/2?e/50:(e-t/2)/50)(e,t)*Math.sqrt(2*Math.pow(n-r,2));return Math.floor(o)+1},g=(e,t,n,r)=>{const{centerX:o,centerY:i}=n,a=o+Math.cos(e)*t,s=i+Math.sin(e)*t,c=r.getImageData(a,s,1,1).data;return((e,t,n)=>{const r=return"#"+r(e)+r(t)+r(n)})(c[0],c[1],c[2])},m=e=>{const r={};e.forEach(e=>{const t=h(e);r[t]||(r[t]=[]),r[t].push(e)}),n(r);const o=(e=>{const t=Object.keys(e);let n=0,r="";for(const o of t){const t=e[o].length;t>n&&(n=t,r=o)}return r})(r);t(o)},y=e=>{(e=>new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.src=e,r.onload=function(){const e=document.createElement("canvas"),o=e.getContext("2d"),i=r.width,a=r.height,s=Math.floor(i/2),c=Math.floor(a/2),u={centerX:s,centerY:c},l=Math.floor(.2*Math.max(i,a)),f=Math.floor(Math.sqrt(Math.pow(s,2)+Math.pow(c,2)));if(e.width=i,e.height=a,o){o.drawImage(r,0,0);try{const e=o.getImageData(0,0,i,a);o.putImageData(e,0,0);const n=new Set,r=g(0,0,u,o);n.add(r);const s=36,c=360/s,d=Math.PI/180;for(let t=1;t<=s;t++){const e=t*c*d,r=v(t,s,f,l),i=g(e,r,u,o);"#ffffff"!==i&&"#000000"!==i&&n.add(i)}const p=Array.from(n);t(p)}catch(d){n(d)}}},r.onerror=))(e).then(.catch(e=>((e))};return{getPageInitialStyle:()=>{if(!u){"local"===e.env.workEnv&&(z.SFLY_DTL.page={productDetails:{thumbnailUrl:"https://c2.staticsfly.com/asset/fetch/cs/MUG-47005-1653-MERCHMEDIUM_ALT1-WHITEMUG/thumbnail.preview/v2"}});const n=(new Date).getTime(),r=setInterval(()=>{var e,o,i;if(null===(e=z.SFLY_DTL)||void 0===e||null===(o=e.page)||void 0===o||null===(i=o.productDetails)||void 0===i?void 0:i.thumbnailUrl){const e=z.SFLY_DTL.page.productDetails.thumbnailUrl;y(e),clearInterval(r)}else(new Date).getTime()-n>c.INTERVAL.EXPIRY&&(t(f),clearInterval(r))},200)}}}};n(138);function Y(){const{session:e}=Object(r.useContext)(a),{userId:t}=e,{styleTile:n}=Object(r.useContext)(s),{currentStyle:i,userInteraction:l,initialStyle:f,config:d,stylesStatus:h,content:v}=n,{appInitTime:g,firstCollageHoverTime:m,firstShuffleTime:b}=l,{headingText:S,displayShuffle:E,displayMore:O,pageTheme:_,styles:I}=d,[A,x]=Object(r.useState)(!1),[C,P]=Object(r.useState)(!1),[k,N]=Object(r.useState)(!1),[L,F]=Object(r.useState)(-1),R=Object(r.useRef)(0),j=Object(r.useRef)(window.innerWidth<c.DEVICE.BREAKPOINTS.SMALL_WIDTH?c.DEVICE.WIDTH_MODE.NARROW:c.DEVICE.WIDTH_MODE.WIDE),B=(()=>{const{styleTile:e}=Object(r.useContext)(s),{userInteraction:t}=e,{firstAppViewTime:n}=t,o=Object(r.useRef)(),{setFirstAppViewTime:i}=T(),a=Object(r.useCallback)(e=>{if(0===n&&e){const e=Date.now();i(e)}},[i,n]);return Object(r.useEffect)(()=>{const e=o&&o.current;if(e){const t=new IntersectionObserver(e=>{let[t]=e;a(t.isIntersecting&&t.intersectionRatio>=.75)},{threshold:.75});return t.observe(e),},[a]),o})(),V=I[0],H=U(),G=K(),z=q(),Y=(()=>{const{setContent:e,setStyleContentStatus:t}=T(),{styleTile:n}=Object(r.useContext)(s),{config:o,stylesStatus:i}=n,{displayShuffle:a}=o,l=q(),f=y(),d=Object(r.useCallback)((e,t)=>{f.info({eventId:u.EVENTS.ERROR,appContext:{currentStyle:e,message:u.MESSAGES.STYLE_FAIL,error:t.message}})},[f]),p=Object(r.useCallback)(n=>{t(n,c.STATUS.PENDING),fetch(c.CONTENT_URL[n]).then(.then(r=>{l.build(r),e(r),t(n,c.STATUS.OK)}).catch(e=>{d(n,e),t(n,c.STATUS.FAIL)})},[l,d,e,t]);return{requestStyleContent:(e,t)=>{var n;const{length:r}=t,o=t[e%r];if((null===(n=i[o])||void 0===n?void 0:n.styleContent)===c.STATUS.IDLE&&p(o),a){var s;const n=t[(e+1)%r];(null===(s=i[n])||void 0===s?void 0:s.styleContent)===c.STATUS.IDLE&&p(n)}}}})(),J=y(),Q=p(),{widthMode:X}=Q,{setCurrentStyle:Z,setFirstCollageHoverTime:$,setAppInitTime:ee,setDisplayShuffle:te,setOpenTooltipIndex:ne,setFirstShuffleTime:re}=T(),oe=Object(r.useCallback)(()=>{J.info({eventId:u.EVENTS.SHUFFLE,appContext:{currentStyle:i}})},[i,J]),ie=Object(r.useCallback)([i,J]),ae=Object(r.useCallback)(()=>I.filter(e=>h[e].assets!==c.STATUS.FAIL&&h[e].styleContent!==c.STATUS.FAIL),[I,h]),se=Object(r.useCallback)(()=>{const e=ae(),{length:t}=e,n=(L+1)%t,r=e[n];F(n),Z(r)},[ae,L,Z]),ce=Object(r.useCallback)(()=>{se(),ne(-1),0===b&&(oe(),re(Date.now()))},[se,ne,oe,b,re]),ue=Object(r.useCallback)(e=>{J.info({eventId:u.EVENTS.ENGAGE,appContext:{firstCollageHoverTime:e,currentStyle:i,engagement:u.MESSAGES.FIRST_COLLAGE_HOVER}})},[i,J]),le=Object(r.useCallback)(e=>{J.info({eventId:u.EVENTS.INIT,appContext:{loadingTime:e,currentStyle:i}})},[i,J]);return Object(r.useEffect)(()=>{0===R.current&&(G.getPageInitialStyle(),R.current=Date.now())},[G]),Object(r.useEffect)(()=>{if(-1===L&&f){let e=ae().findIndex(e=>e===f);-1===e&&(e=I.findIndex(),F(e)}},[L,V,ae,f,n,I]),Object(r.useEffect)(()=>{if(L>-1){const e=ae(),t=e[L];t!==i&&Z(t),Y.requestStyleContent(L,e)}},[L,i,ae,Y,Z]),Object(r.useEffect)(()=>{const e=ae(),{length:t}=e;L>=t&&F(0)},[L,ae,Z]),Object(r.useEffect)(()=>{R.current>0&&j.current!==X&&(j.current=X,z.rebuild(v))},[z,X,v]),Object(r.useEffect)(()=>{if(0===g&&t){const e=R.current,t=e-window.performance.timing.domLoading;le(t),ee(i,e)}},[g,i,le,ee,t]),Object(r.useEffect)([H]),Object(r.useEffect)(()=>{const e=ae(),{length:t}=e;1===t&&E&&te(!1)},[E,ae,te]),Object(r.useEffect)(()=>{const e=ae(),{length:t}=e;0!==t||C||(ie(),P(!0),setTimeout(500))},[C,ae,ie]),o.a.createElement("div",{className:"apc-st-global".concat(C?" apc-st-collapse":"").concat(_?" apc-st-theme-"+_:""),ref:B,"data-test-id":"apc-st-wrapper"},!A&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"apc-st-main-heading"},S.trim().length>0?S:c.MAIN_HEADING),o.a.createElement("div",{className:"apc-st-controller"},o.a.createElement(M,null),X===c.DEVICE.WIDTH_MODE.WIDE&&i&&o.a.createElement("div",{className:"apc-st-actions"},E&&o.a.createElement(W,{onClick:ce}),O&&o.a.createElement(w,null))),o.a.createElement(D,{handleHoverCollage:()=>{if(0===m){const e=Date.now(),t=e-window.performance.timing.domLoading;ue(t),k||N(!0),$(e)}},isUserInteracted:k}),X===c.DEVICE.WIDTH_MODE.NARROW&&i&&o.a.createElement("div",{className:"apc-st-actions"},E&&o.a.createElement(W,{onClick:ce}),O&&o.a.createElement(w,null))))}function J(e){let{children:t}=e;const n=y();return o.a.createElement(Q,{splunkLogger:n,children:t})}class Q extends r.Component{mponentDidCatch(e,t){this.props.splunkLogger.error({eventId:u.EVENTS.CRASH,appContext:{error:e,errorInfo:t}})}render(){return this.state.hasError?"Error":o.a.createElement(o.a.Fragment,null,this.props.children)}}function X(e){var t,n,i,u,l,f,d,p,h,v,g;let{config:m}=e;const[y,S]=Object(r.useState)({env:b(),userId:"",token:"",isSignedIn:!1,pageName:""}),[w,E]=Object(r.useState)({currentStyle:"",initialStyle:"",collagePositions:{},userInteraction:{appInitTime:0,firstAppViewTime:0,firstCollageHoverTime:0,firstAssetViewTime:{},firstTooltipInStyleTime:{},firstShuffleTime:0,openTooltipIndex:-1},config:{abTest:{enabled:null!==(t=null===m||void 0===m||null===(n=m.abTest)||void 0===n?void 0:n.enabled)&&void 0!==t&&t,testGroup:null!==(i=null===m||void 0===m||null===(u=m.abTest)||void 0===u?void 0:u.testGroup)&&void 0!==i?i:-1},styles:null!==(l=null===m||void 0===m?void 0:m.styles)&&void 0!==l?l:c.THEME.STYLES,headingText:null!==(f=null===m||void 0===m?void 0:m.headingText)&&void 0!==f?f:"",displayShuffle:null===(d=null===m||void 0===m?void 0:m.displayShuffle)||void 0===d||d,displayMore:null===(p=null===m||void 0===m?void 0:m.displayMore)||void 0===p||p,buildCollageDynamicallyOnShuffle:null!==(h=null===m||void 0===m?void 0:m.buildCollageDynamicallyOnShuffle)&&void 0!==h&&h,pageTheme:null!==(v=null===m||void 0===m?void 0:m.pageTheme)&&void 0!==v?v:""},stylesStatus:(null!==(g=null===m||void 0===m?void 0:m.styles)&&void 0!==g?g:c.THEME.STYLES).reduce((e,t)=>(e[t]={styleContent:c.STATUS.IDLE,assets:c.STATUS.IDLE},e),{}),content:{}}),O={session:y,setSession:S},M={styleTile:w,setStyleTile:E};return o.a.createElement(a.Provider,{value:O},o.a.createElement(s.Provider,{value:M},o.a.createElement(J,null,o.a.createElement(Y,null))))}n.d(t,"run",();const Z=async e=>{const t=document.getElementById(e.containerId);t?Object(i.render)(o.a.createElement(X,{config:e.config}),t):console.error("Container ".concat(e.containerId," wasn't loaded due to missing DOM element to consume it"))}}]);
//# sourceMappingURL=ApcStyleTile.797675bbad.js.map