/*! 20240116-10=window.location.href,this.enableExploreMoreNewDisplay=TRC.util.isTrue(e.global["enable-explore-more-new-display"]),this.enableIgnoreHistory=TRC.util.isTrue(e.global["enable-explore-more-ignore-history"]),this.otherModulesHaveBeenLoaded=TRC.FooterOverlay||TRC.FeedView||TRC.TaboolaVignette,this.isDesktop=!TRC.Device.isTouchDevice,TRC.ExploreMorePlacement=t.exm.placement,this.listenToModulesLoad(),this.setOptions(t),this.setCSS(),TRC.dispatch("ExploreMoreReady",this),this.googleTrafficActivationFeatureEnabled&&this.isGoogleTraffic?this.googleTrafficInitWrapper():this.iosWebviewHashAndGesture(),TRC.MetricsManager.sendMetricsEvent(TRC,e,{name:"ExploreMore",value:"1",type:"counter"},null),this.sendEventsForSpaExperiment("available")}shouldEnableMixPanel(){const{MIXPANEL_PERCENT:e}=r.GLOBAL_ATTRIBUTES,{isPercentEnabled:t}=TRC.util,{global:i}=this.trcManager;return t(i,e)}sendMixPanelEvent(e,t={}){this.mixpanelEnabled&&TRC.Mixpanel.isMixPanelLoaded()&&TRC.Mixpanel.sendMixpanelEvent(e,t)}sendEvent(e,t={}){const i=t.target?`${e} - ${t.target}`:e,o=TRC.util.merge({},t);delete o.target,this.sendMixPanelEvent(i,o);const{isPercentEnabled:s}=TRC.util,{SUPPLY_FEATURE_PERCENT:n}=r.GLOBAL_ATTRIBUTES,{global:a}=this.trcManager;if(s(a,n)){const{msg:i=""}=t,o=TRC.util.merge({},t);delete o.msg;const s=Object.keys(o).map(e=>`${e}: ${o[e]}`).join(", ");TRC.util.sendSupplyFeature(r.SUPPLY_FEATURE_TYPE,e,i,s)}}sendEventsForSpaExperiment(e){this.trcManager.sendAbTestEvent("explore-more",`explore-more-${e}`),TRC.ModuleLoader.load("spa-detector",TRC.SpaDetector,function(){const t=TRC.SpaDetector.detectSpa().isSpa;t&&this.trcManager.sendAbTestEvent("explore-more",`explore-more-${e}-spa`)}.trcBind(this))}iosWebviewHashAndGesture(){if(this.enableIosWebviewFix){if(this.navigation=r.initNavigator(),this.hashNeeded=r.isHashNeeded(),r.isGestureNeeded()||this.useSafariIOSOverride)return this.inspectGesture();if(this.hashNeeded)return this.waitForLoadToEnd()}this.init()}static initNavigator(){if(window.performance&&window.performance.getEntriesByType){const e=performance.getEntriesByType("navigation");if(e&&e.length>0)return e[0]}if(window.performance&&window.performance.timing)return window.performance.timing}waitForLoadToEnd(e=!0){let t;if(e&&(t=TRC.Timeout.set(()=>this.stopWaitingForLoad=!0,1e3*this.timeToStopWaitingForLoad)),this.stopWaitingForLoad)return this.init();0===this.navigation.loadEventEnd?TRC.Timeout.set(()=>this.waitForLoadToEnd(!1)):(TRC.Timeout.clear(t),this.init())}inspectGesture(){const e=()=>{this.waitForLoadToEnd(),TRC.dom.off(window,"touchend",e),TRC.dom.off(window,"mousedown",e)};TRC.dom.on(window,"touchend",e),TRC.dom.on(window,"mousedown",e)}static isHashNeeded(){const e=navigator.userAgent.toLowerCase();return e.indexOf("apple")>-1&&e.indexOf("iphone")>-1&&e.indexOf("webkit")>-1&&(navigator.userAgent.indexOf("FBAN")>-1||navigator.userAgent.indexOf("FBAV")>-1)&&-1===e.indexOf("safari")&&-1===e.indexOf("firefox")&&-1===e.indexOf("chrome")&&!location.hash}static isGestureNeeded(){const e=navigator.userAgent.toLowerCase();return 1===history.length&&e.indexOf("apple")>-1&&e.indexOf("macintosh")>-1&&e.indexOf("webkit")>-1&&e.indexOf("chrome")>-1}setOptions(t){const{exm:i,drp:o}=t;let s=null;const{global:n}=this.trcManager;this.titleText=r.getTranslatedTextBySiteLanguage(i.title,"TITLE_TEXT"),this.css=i.css||"",this.headerSelector=i.headerSelector||"header",this.enableHideHeaderFeature=TRC.util.isEnabledByDefault(n["explore-more-enable-hide-all-but-header"])&&!this.isDesktop,this.enablePositionCorrection=TRC.util.isEnabledByDefault(n["explore-more-enable-position-correction"])&&!this.isDesktop,this.enableMissingPubHeaderEvent=TRC.util.isTrue(n["explore-more-enable-missing-header-event"]),this.publisherHeaderHeight=0,this.zIndexChanged=!1,this.hideAllButHeader=!1,this.styleToHideAllButHeader="",this.siteHeader=this.enforceMaxHeight(this.headerSelector),this.enableHideHeaderFeature&&this.siteHeader&&(this.styleToHideAllButHeader=this.createStyleToHideAllButHeader(),this.hideAllButHeader=!!this.styleToHideAllButHeader),this.shouldNotCopyPublisherHeaderHtml=i.shouldNotCopyPublisherHeaderHtml||!1,this.feedContainer=i.container?document.getElementById(i.container):null,this.feedContainerWidth=`${i.feedContainerWidth||"85"}%`,this.historyLengthOnInit=0,this.currentHistoryLength=0,o&&o["explore-more"]&&(s=__trcUnJSONify(o["explore-more"]));const a=n["enable-explore-more-state-check"],l=n["set-explore-more-state-check-interval-time"];if(i.addStateCheck=a||i.addStateCheck,i.stateCheckIntervalTime=l||i.stateCheckIntervalTime,this.stateCheck={enable:i.addStateCheck||!1,IntervalTime:i.stateCheckIntervalTime||200,intervalId:0},this.enableExploreMoreVideo=s&&s["enable-explore-more-video"]||n["enable-explore-more-video"],this.disableExploreMoreVideoReset=s&&s["disable-explore-more-video-reset"]||n["disable-explore-more-video-reset"],this.disableHistoryCheck=s&&s["disable-explore-more-history-check"]||n["disable-explore-more-history-check"],!this.disableHistoryCheck){if(window.sessionStorage){const t=sessionStorage.getItem(e);this.sessionHistory=t?__trcUnJSONify(t):{}}r.updateReloadState()}this.googleTrafficActivationFeatureEnabled=r.isGoogleTrafficFeatureEnabled(s),this.googleTrafficActivationFeatureEnabled&&this.isGoogleTraffic&&(s=s||{},this.googleModeActivateByClick=TRC.util.isTrue(s.googleModeActivateByClick),this.googleModeActivateByTimer=void 0===s.googleModeActivateByTimer||TRC.util.isTrue(s.googleModeActivateByTimer),this.googleModeActivationTimerLength=1e3*parseInt(s.googleModeActivationTimerLengthInSeconds,10)||1e3*parseInt(n["explore-more-google-timer"],10)||2e4)}static updateReloadState(){const e={count:0};if(history.state)if(void 0===history.state.count){const{state:t}=history;let i={};e.count++,i=TRC.util.merge(i,t,e),history.replaceState(i,"")}else{const{state:e}=history;e.count++,history.replaceState(e,"")}else e.count++,history.replaceState(e,"")}static getTranslatedTextBySiteLanguage(e,t){return e||(TRC.translationManager.getLabel({feature:"explore-more",label:t})||e)}googleTrafficInitWrapper(){this.googleModeActivateByClick&&this.activateClickListener(),this.googleModeActivateByTimer&&this.startTimer()}startTimer(){this.activationTimer=TRC.Timeout.set(this.timeoutHandler.trcBind(this),this.googleModeActivationTimerLength)}activateExploreMoreAndTurnOffListeners(){this.clearGoogleTrafficTriggers(),this.init()}clickHandler(){this.activateExploreMoreAndTurnOffListeners()}timeoutHandler(){this.activateExploreMoreAndTurnOffListeners()}activateClickListener(){this.boundClickHandler=this.clickHandler.trcBind(this),TRC.dom.on(window,"click",this.boundClickHandler)}clearGoogleTrafficTriggers(){this.googleModeActivateByClick&&TRC.dom.off(window,"click",this.boundClickHandler),this.googleModeActivateByTimer&&TRC.Timeout.clear(this.activationTimer)}static isGoogleTrafficFeatureEnabled(e){return null===e||void 0===e.googleTrafficActivationFeatureEnabled||TRC.util.isTrue(e.googleTrafficActivationFeatureEnabled)}wasReferredFromGoogle(){const e=this.getHostname(),t=/^(.+\.|(.+)?\/)?google\./;return null!==e.match(t)}getHostname(){let e=this.referrer.indexOf("//")>-1?this.referrer.split("/")[2]:this.referrer.split("/")[0];return[e]=e.split(":"),[e]=e.split("?"),e}getGoogleFont(){const e="unset",{global:t}=this.trcManager||{};if(!t)return e;const i=t["google-fonts"];return Array.isArray(i)&&i.length>0?i[0]:e}setCSS(){const{headerSelector:e,feedContainerWidth:t}=this,i=this.getGoogleFont();TRC.dom.injectStyle(`#tbl-explore-more-container { display: none; position: relative; margin-top: 0; font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; } #tbl-explore-more-container.tbl-new-display { background-color: #ffffff; z-index: 2147483647; width: 100%; box-sizing: border-box; } #tbl-explore-more-container.tbl-new-display.tbl-explore-more-show-container { display: block !important; } #tbl-explore-more-container .tbl-explore-more-site-header { z-index: 2147483647; left: 0; right: 0; } #tbl-explore-more-container .tbl-feed-header { display: none; } #tbl-explore-more-container #tbl-explore-more-title { font-family: ${i}; font-weight: bold; font-size: 22px; padding: 10px 0; color: #222222; } #tbl-explore-more-container.tbl-exm-desktop .trc_multi_widget_container { padding-bottom: 22px; } #tbl-explore-more-container.tbl-exm-desktop #tbl-explore-more-title { width: 100%; } #tbl-explore-more-container.tbl-exm-desktop .tbl-title-and-pop-wrp { position: relative; } #tbl-explore-more-container.tbl-exm-desktop .tbl-title-and-pop-wrp, #tbl-explore-more-container.tbl-exm-desktop .tbl-feed-card, #tbl-explore-more-container.tbl-exm-desktop .tbl-loading-cards-placeholder { width: ${t}; max-width: 1000px; min-width: 800px; margin-right: auto; margin-left: auto; clear: both; }body.tbl-show-explore-more.tbl-explore-more-show-original-header > *:not(#tbl-explore-more-container):not(${e}):not(.trc_popover_aug_container) { display: none; }body.tbl-show-explore-more.tbl-explore-more-hide-original-header > *:not(#tbl-explore-more-container):not([id='_cm-css-reset']):not(.trc_popover_aug_container) { display: none; }body.tbl-show-explore-more.tbl-explore-more-hide-original-header > *:not([id='_cm-css-reset']):not(.trc_popover_aug_container) { display: none; }body.tbl-show-explore-more .tbl-stories-container { display: none; }body.tbl-show-explore-more #tbl-explore-more-container { display: block; }body.tbl-show-explore-more.tbl-explore-more-body-fixed { position: fixed; top: 0; width: 100vw; height: 100vh; } ${this.css} ${this.styleToHideAllButHeader}`,null),this.feedContainer&&TRC.dom.removeClass(this.feedContainer,"tbl-invisible")}shouldAddToHistory(){const{state:e}=history;if(e&&e.tblShouldDisplayFeed&&"number"==typeof e.count&&e.count>0)return!1;const t=this.sessionHistory&&this.sessionHistory[this.url],i=!e||void 0===e.feedViewEventName;return this.disableHistoryCheck||!t&&i}static checkHistoryState(){history.state&&"feed-view-init"===history.state.feedViewEventName&&history.go(-1)}init(){this.feedContainer?(this.shouldAddToHistory()?this.addNewHistoryEntries():r.checkHistoryState(),this.listenToPopState(),this.createAndInjectNewHtml(),this.handleFeedContainerAndPublisherHeaderStyle()):__trcWarn("ExploreMoreModule: TryingToInitializeExploreMoreExperienceButNoFeedFound")}createAndInjectNewHtml(){this.isDesktop&&this.exploreMoreOnDesktop(),this.feedContainer.insertAdjacentHTML("afterbegin",this.createNewElements())}exploreMoreOnDesktop(){TRC.dom.addClass(this.feedContainer,"tbl-exm-desktop")}handleFeedContainerAndPublisherHeaderStyle(){if(this.shouldNotCopyPublisherHeaderHtml)return;const e=this.getSiteHeaderStyle();if(e&&"fixed"!==e.position&&"absolute"!==e.position){const e=getComputedStyle(this.feedContainer).paddingLeft,t=this.feedContainer.querySelector(this.headerSelector);t&&(t.style=`margin-left: -${e}; margin-right: -${e};`)}}createNewElements(){let e=`<div id="tbl-explore-more-title">${this.titleText}</div>`;const t=this.shouldCreateHeaderPlaceholder()?this.createHeaderPlaceholderElement():"",i=this.hideAllButHeader?"":this.tryGetPublisherHeaderHtml();return this.isDesktop&&(e=`<div class="tbl-title-and-pop-wrp">${e}</div>`),`${i} ${t} ${e}`}tryGetPublisherHeaderHtml(){return this.siteHeader&&this.siteHeader.outerHTML?(TRC.dom.addClass(this.siteHeader,r.CSS_CLASSES.SITE_HEADER),this.siteHeader.outerHTML):""}getSiteHeaderStyle(){return void 0!==this.siteHeaderStyle?this.siteHeaderStyle:this.siteHeaderStyle=this.siteHeader&&getComputedStyle(this.siteHeader)}createHeaderPlaceholderElement(){const e=this.getHeaderAbsoluteHeight(this.siteHeader),t=`width: ${this.getSiteHeaderStyle().width}; height: ${e}`;return`<div class="${r.CSS_CLASSES.HEADER_PLACEHOLDER}" style="${t}"></div>`}shouldCreateHeaderPlaceholder(){return this.siteHeader&&"fixed"===this.getSiteHeaderStyle().position}shouldDisplayFeed(){return this.enableIgnoreHistory?!this.feedIsVisible:history.state&&history.state.tblShouldDisplayFeed&&!this.feedIsVisible}shouldHideFeed(){return this.enableIgnoreHistory?this.feedIsVisible:history.state&&history.state.tblOriginalState&&this.feedIsVisible}setHistoryModified(t){window.sessionStorage&&(this.sessionHistory[this.url]=t,sessionStorage.setItem(e,JSON.stringify(this.sessionHistory)))}markOriginalState(){const e={tblOriginalState:!0};this.originalPublisherHistoryState?this.originalPublisherHistoryState.tblOriginalState=!0:this.originalPublisherHistoryState=e}addNewHistoryEntries(){this.historyLengthOnInit=history.length,this.hashNeeded&&this.enableIosWebviewFix&&(location.hash=r.generateUniqueId());const{DISPLAY_FEED_PAGE:e}=r.HISTORY_STATE;if(this.originalPublisherHistoryState=history.state,r.isFacebookAndroid()?history.pushState(e,""):history.replaceState(e,""),this.markOriginalState(),this.useSafariIOSOverride){const e=this.trcManager.global["use-ios-safari-override-timeout-config"]||10;setTimeout(()=>{history.pushState(this.originalPublisherHistoryState,"")},e)}else history.pushState(this.originalPublisherHistoryState,"");this.setHistoryModified(!0),this.sendEvent("CLICKABLE",{msg:"back button enabled, history changed.",tblOriginalState:history.state.tblOriginalState})}static generateUniqueId(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}listenToPopState(){TRC.dom.on(window,"popstate",this.handlePopstateEvent.trcBind(this)),r.isPageLoading()&&this.stateCheck.enable&&this.startStateIntervalCheck(this.handlePopstateEvent.trcBind(this))}handleBeforeUnload(){this.duration=`${((new Date).getTime()-this.duration)/1e3} sec`,this.sendEvent("INTERACTION",{msg:"explore more page view duration.",duration:this.duration}),this.setHistoryModified(!1)}static isPageLoading(){return"complete"!==document.readyState}static isFacebookAndroid(e){const t=e||navigator.userAgent||navigator.vendor||window.opera;return(t.indexOf("FBAN")>-1||t.indexOf("FBAV")>-1)&&t.indexOf("Android")>-1}startStateIntervalCheck(e){this.stateCheck.intervalId=TRC.Interval.set(()=>{r.isPageLoading()||(this.stateCheck.enable=!1,TRC.Interval.clear(this.stateCheck.intervalId)),history.state&&history.state.tblShouldDisplayFeed&&this.stateCheck.enable&&(e(),TRC.Interval.clear(this.stateCheck.intervalId))},this.stateCheck.IntervalTime)}handlePopstateEvent(){this.enableIgnoreHistory&&this.isResetingHistory||(this.stateCheck.enable=!1,this.shouldDisplayFeed()?(this.displayFeed(),TRC.dom.on(window,"beforeunload",this.handleBeforeUnload.trcBind(this))):this.shouldHideFeed()&&this.hideFeed(),this.sendEvent("CLICKED",{msg:"back/forward button clicked.",target:"back/forward"}),setTimeout(()=>{this.isResetingHistory=!1},200))}getExploreMoreClassBody(){const e=this.hideAllButHeader?r.CSS_CLASSES.SHOW_ORIGINAL_HEADER_HIDE_ALL:r.CSS_CLASSES.HIDE_ORIGINAL_HEADER;return`${r.CSS_CLASSES.SHOW} ${e}`}addExploreMoreClassToElements(){r.addClassToElements([document.body],this.getExploreMoreClassBody())}showExploreMoreContainer(){this.sendABTestEventsForNewDisplay(`show explore more`),TRC.dom.addClass(this.feedContainer,r.CSS_CLASSES.SHOW_EM_CONTAINER),this.setMarginToShowPublisherHeader(),this.toggleBodyElementPositionFixed({action:"addClass"}),this.changeEMZIndex()}hideExploreMoreContainer(){this.sendABTestEventsForNewDisplay(`hide explore more`),TRC.dom.removeClass(this.feedContainer,r.CSS_CLASSES.SHOW_EM_CONTAINER),this.toggleBodyElementPositionFixed({action:"removeClass"})}addResetClassToElements(){this.siteHeader||r.addClassToElements([document.body,document.documentElement],r.CSS_CLASSES.RESET_BODY_STYLE)}removeExploreMoreClassFromBody(){const e=this.getExploreMoreClassBody().split(" ");this.siteHeader||e.push(r.CSS_CLASSES.RESET_BODY_STYLE),e.forEach(e=>TRC.dom.removeClass(document.body,e))}static removeResetClassFromHtml(){TRC.dom.removeClass(document.documentElement,r.CSS_CLASSES.RESET_BODY_STYLE)}static addClassToElements(e,t){e.forEach(e=>{TRC.dom.addClass(e,t)})}static initScrollTop(){TRC.Timeout.set(()=>{r.resetScrollBehavior(document.body),r.resetScrollBehavior(document.documentElement)},0)}hideFeed(){TRC.dispatch("ExploreMoreHide"),this.removeExploreMoreClassFromBody(),r.removeResetClassFromHtml(),this.enableExploreMoreNewDisplay?this.hideExploreMoreContainer():r.initScrollTop(),this.feedIsVisible=!1,this.retrieveHistory()}displayFeed(){if(this.feedContainer){if(this.feedIsVisible=!0,this.resetHistory(),TRC.dispatch("ExploreMoreLoaded",this),this.disableExploreMoreVideoReset||TRC.dispatch("videoReset"),this.enableExploreMoreVideo){const e={eventName:"exploreMore",containerSelector:`#${this.feedContainer.id}`,placement:TRC.ExploreMorePlacement};TRC.dispatch("feedContainerChanged",e)}this.addExploreMoreClassToElements(),this.addResetClassToElements(),r.initScrollTop(),r.hideDfpIfExist(),this.enableExploreMoreNewDisplay?this.showExploreMoreContainer():this.hideAllButHeader&&this.enablePositionCorrection&&this.initPositionCorrection(),this.sendEvent("VISIBLE",{msg:"explore more is visible now."}),this.handleItemObserver(),this.handleItemClick(),this.duration=(new Date).getTime(),this.sendEventsForSpaExperiment("rendered"),TRC.Timeout.set(()=>{this.shouldSendABTestEventsForNoPubHeader()},100)}else this.trcManager.sendAbTestEvent("noFeedToShow","noFeedToShow")}handleItemClick(){TRC.dom.on(this.feedContainer,"click",e=>{const t=(e=e||event).target||e.srcElement;t&&TRC.dom.closest(t,".videoCube[data-item-id]")&&this.sendEvent("CLICKED",{msg:"clicked on explore more item.",target:"item"})})}static observeItemInViewPort(e,t,i){const o={targetElement:t,threshold:1,onEnter:()=>{TRC.intersections.unobserve(s),e(i)}},s=TRC.intersections.observe(o)}handleItemObserver(){const e=this.trcManager.global["explore-more-enable-observing-scroll-item"];if(TRC.util.isTrue(e))return;const t=this.trcManager.global["explore-more-observe-scroll-item-index"]||4,i=this.feedContainer.querySelector(`[data-card-index="${t}"]`),o=e=>{this.sendEvent("SCROLLED",{msg:`user scrolled to card ${e}`})};if(i)return void r.observeItemInViewPort(o,i,t);if(!window.MutationObserver)return;const s=e=>{r.observeItemInViewPort(o,e,t)};this.observeItemAdded(s,t)}observeItemAdded(e,t){const i=new MutationObserver(o=>{o.forEach(o=>{o.addedNodes.forEach(o=>{o.dataset.cardIndex===t.toString()&&(i.disconnect(),e(o))})})});i.observe(this.feedContainer,{subtree:!1,childList:!0})}static shouldSkipPlacement(e,t,i){return e.fpl&&t.trc.f[e.fpl]&&t.trc.f[e.fpl].exm&&!i.feeds[e.fpl]}static shouldSkipPushedRequest(e){return TRC.ExploreMorePlacement=TRC.ExploreMorePlacement||"Explore More",TRC.ExploreMore.exploreMoreIsVisible()&&!e[TRC.ExploreMorePlacement]}static exploreMoreIsVisible(){return document.body.className.indexOf(r.CSS_CLASSES.SHOW)>-1}static hideDfpIfExist(){const e=document.querySelector(".adsbygoogle-noablate[data-anchor-status]");e&&(e.style.display="none",r.resetBodyPaddingAndMargin())}static resetBodyPaddingAndMargin(){const e=window.getComputedStyle(document.body);"0px"!==e.paddingTop&&(document.body.style.paddingTop="0px"),"0px"!==e.marginTop&&(document.body.style.marginTop="0px")}enforceMaxHeight(e){if(!e)return null;const i=document.querySelector(e);if(!i)return null;const o=this.getHeaderAbsoluteHeight(i);return this.enableHideHeaderFeature&&o>t?null:(this.trcManager.sendAbTestEvent("explore-more","header found"),i)}createStyleToHideAllButHeader(){const e="tbl-explore-more-container",t="tbl-feed-view-container",i="trc_popover_aug_container",o=`:not(#${e}):not(#${t}):not([id='_cm-css-reset']):not(.${i})`,{SHOW:s,SHOW_ORIGINAL_HEADER_HIDE_ALL:n}=r.CSS_CLASSES;return this.createStyleToHideAllButOneElement({extraBodyClass:`.${s}.${n}`,excludeAlso:o})}createStyleToHideAllButOneElement({extraBodyClass:e,excludeAlso:t}){let i=this.headerSelector,o="";const s=`body${e}`,n=e=>{if("body"===e.localName)return o+=`${s} > *${t}:not(${i}){display: none}`;const a=r.getElementSelector(e);return a?(i&&(o+=`${s} ${a} > *:not(${i}){display: none} `),i=a,n(e.parentElement)):""};return n(this.siteHeader.parentElement)}static getElementSelector(e){return e.id?`#${e.id}`:e.classList[0]?`.${e.classList[0]}`:null}getHeaderAbsoluteHeight(e){if(e){const t=this.siteHeader?this.getSiteHeaderStyle():window.getComputedStyle(e),i=parseFloat(t.marginTop)+parseFloat(t.marginBottom),o=parseFloat(t.height),s=Math.ceil(o+i);return 0===s?this.getHeaderAbsoluteHeight(e.firstElementChild):(this.publisherHeaderHeight=s,s)}return t+1}initPositionCorrection(){TRC.Timeout.set(()=>{this.checkIfHeaderIsHidingFeedAndFix(),this.addNegativeMarginIfFeedPushedDown()},10)}checkIfHeaderIsHidingFeedAndFix(){if(this.siteHeader){const e=this.getHeaderAbsoluteHeight(this.siteHeader,!0),t=r.checkElementDistanceFromTop(this.siteHeader),i=e+t,s=r.checkElementDistanceFromTop(this.feedContainer);if(this.sendABTestEventsForNewDisplay(`header is hiding feed => diff = ${i-s}`),i!==s){const e=i-s;this.feedContainer.style.marginTop=`${e}px`,this.enableExploreMoreNewDisplay||(this.feedContainer.style.zIndex=o.toString())}}}static resetScrollBehavior(e){const{scrollBehavior:t}=getComputedStyle(e);e.style.scrollBehavior="auto",e.scrollTop=0,e.scrollBehavior=t}addNegativeMarginIfFeedPushedDown(){if(!this.siteHeader){const e=r.checkElementDistanceFromTop(this.feedContainer);this.sendABTestEventsForNewDisplay(`Feed is pushed down => distance from top = ${e}`),e>0&&(this.feedContainer.style.marginTop=`-${e}px`)}}static checkElementDistanceFromTop(e){try{return e="string"==typeof e?document.querySelector(e):e,window.pageYOffset+e.getBoundingClientRect().top}catch(e){__trcWarn("checkElementDistanceFromTop: element did not found")}}listenToModulesLoad(){if(this.enableExploreMoreNewDisplay){if(!this.otherModulesHaveBeenLoaded){const{FEED_VIEW_LOADED:e,FOOTER_OVERLAY_LOADED:t,VIGNETTE_LOADED:i}=r.MODULES_LISTENER;this.feedViewListener=TRC.listen(e,this.handleModuleLoad.trcBind(this,e)),this.footerOverlayListener=TRC.listen(t,this.handleModuleLoad.trcBind(this,t)),this.vignetteListener=TRC.listen(i,this.handleModuleLoad.trcBind(this,i))}const{FEED_VIEW_ACTIVE:e,FOOTER_OVERLAY_ACTIVE:t}=r.MODULES_LISTENER;TRC.listen(e,this.handleOverlayModuleLoad.trcBind(this)),TRC.listen(t,this.handleOverlayModuleLoad.trcBind(this))}}handleModuleLoad(e){this.sendABTestEventsForNewDisplay(`footerOverlay Or feedView dispatch event => event name = ${e}`),this.whenOtherModulesLoaded(),this.feedViewListener.remove(),this.footerOverlayListener.remove(),this.vignetteListener.remove()}handleOverlayModuleLoad({data:e}){this.toggleBodyElementPositionFixed({action:e?"removeClass":"addClass"})}whenOtherModulesLoaded(){this.otherModulesHaveBeenLoaded||(this.otherModulesHaveBeenLoaded=!0,this.feedIsVisible&&this.changeEMZIndex())}changeEMZIndex(){this.otherModulesHaveBeenLoaded&&!this.zIndexChanged&&(this.feedContainer.style.zIndex=(o-1).toString(),this.sendABTestEventsForNewDisplay(`EM z-index changed => EM z-index = ${this.feedContainer.style.zIndex}`),this.zIndexChanged=!0)}setMarginToShowPublisherHeader(){this.hideAllButHeader&&(this.feedContainer.style.marginTop=`${this.publisherHeaderHeight}px`)}toggleBodyElementPositionFixed({action:e}){this.siteHeader&&TRC.dom[e](document.body,r.CSS_CLASSES.BODY_ELEMENT_FIXED)}sendABTestEventsForNewDisplay(e){this.enableExploreMoreNewDisplay&&this.trcManager.sendAbTestEvent("explore-more-display",e)}shouldSendABTestEventsForNoPubHeader(){if(this.enableMissingPubHeaderEvent&&!this.shouldNotCopyPublisherHeaderHtml)if(this.siteHeader)if(this.hideAllButHeader)!r.isElementBelowHeader(this.feedContainer)&&this.sendABTestEventForNoPubHeader();else{const e=this.feedContainer.querySelector("#tbl-explore-more-title"),t=e||this.feedContainer.querySelector('[data-card-index="1"]');t&&!r.isElementBelowHeader(t)&&this.sendABTestEventForNoPubHeader()}else this.sendABTestEventForNoPubHeader()}sendABTestEventForNoPubHeader(){const e="explore-more-display",t={msg:"missing publishers header"};this.trcManager.sendAbTestEvent(e,t.msg),this.sendMixPanelEvent(e,t)}static isElementBelowHeader(e){return r.checkElementDistanceFromTop(e)>i}resetHistory(){if(this.enableIgnoreHistory){const e=history.length-this.historyLengthOnInit-1;e>0&&(this.isResetingHistory=!0,window.history.go(-1*e),this.currentHistoryLength=e)}}retrieveHistory(){this.enableIgnoreHistory&&(this.isResetingHistory=!0,window.history.go(this.currentHistoryLength))}isSafariIOSOverride(){return e.call(this)&&t();function e(){return this.trcManager.global["use-ios-safari-override"]}function t(){const{userAgent:e}=navigator;return/Version\/16/i.test(e)&&/Safari/i.test(e)&&/iPhone/i.test(e)}}}r.SUPPLY_FEATURE_TYPE="EXPLORE_MORE",r.GLOBAL_ATTRIBUTES={MIXPANEL_PERCENT:"explore-more-mixpanel-percent",SUPPLY_FEATURE_PERCENT:"explore-more-supply-feature-percent"},r.CSS_CLASSES={SHOW:"tbl-show-explore-more",HEADER_PLACEHOLDER:"tbl-explore-more-fixed-header-placeholder",SHOW_ORIGINAL_HEADER:"tbl-explore-more-show-original-header",HIDE_ORIGINAL_HEADER:"tbl-explore-more-hide-original-header",SITE_HEADER:"tbl-explore-more-site-header",SHOW_ORIGINAL_HEADER_HIDE_ALL:"tbl-explore-more-show-original-header-hide-all",RESET_BODY_STYLE:"tbl-explore-more-reset-body-style",SHOW_EM_CONTAINER:"tbl-explore-more-show-container",BODY_ELEMENT_FIXED:"tbl-explore-more-body-fixed"},r.MODULES_LISTENER={FEED_VIEW_LOADED:"feed-view-loaded",FEED_VIEW_ACTIVE:"feed-view-active",FOOTER_OVERLAY_LOADED:"footer-overlay-loaded",FOOTER_OVERLAY_ACTIVE:"footer-overlay-active",VIGNETTE_LOADED:"vignette-loaded"},r.HISTORY_STATE={ORIGINAL_PAGE:{tblPreExploreMoreExperience:!0},DISPLAY_FEED_PAGE:{tblShouldDisplayFeed:!0}},r.MESSAGES={TITLE_TEXT:"Keep on reading"},TRC._translationQueue=TRC._translationQueue||[],TRC._translationQueue.push({"explore-more":r.MESSAGES}),TRC.ExploreMore=r})();.length;var r=this.axis;var q=this.reverseAxis;var t={};if(p.hasOwnProperty("offsetRatio")){t[r]=p.offsetRatio*this.scale;t[q]=0}else{t.X=s.hasTouch?(p.targetTouches[0].pageX-this.startX):(p.pageX-this.startX);t.Y=s.hasTouch?(p.targetTouches[0].pageY-this.startY):(p.pageY-this.startY)}this.offset=t;p.offsetRatio=t[r]/this.scale;if(Math.abs(t[r])-Math.abs(t[q])>10){p.preventDefault();this._unWatchTransitionEnd();if(!this.isLooping){if(t[r]>0&&this.slideIndex===0||t[r]<0&&this.slideIndex===o-1){t[r]=this._damping(t[r])}}this.els.forEach(function(v,u){v.style.visibility="visible";d.setStyle(v,"transition","none");this._animateFunc(v,r,this.scale,u,t[r],t[r]);this.fillSeam&&this.seamScale(v)}.bind(this));this.fire("slide",p,this)}};c.endHandler=function(w){if(!this.onMoving){return}this.log("[EVENT]: end");this.onMoving=false;var s=this.offset;var q=this.axis;var p=this.scale/2;var t=new Date().getTime();var o=this.fingerRecognitionRange;p=t-this.startTime>300?p:14;var r=Math.abs(s[q]);var v=Math.abs(s[this.reverseAxis]);function u(x){if(x!=null){if(x.tagName==="A"){if(x.href){if(x.getAttribute("target")==="_blank"){}else{b.location.href=x.href}w.preventDefault();return false}}else{if(x.tagName==="LI"&&x.className.search(/^islider\-/)>-1){return false}else{u(x.parentNode)}}}}this.fire("slideEnd",w,this);if(s[q]>=p&&v<r){this.slideTo(this.slideIndex-1)}else{if(s[q]<-p&&v<r){this.slideTo(this.slideIndex+1)}else{if(Math.abs(this.offset[q])>=o){this.slideTo(this.slideIndex)}}}if(Math.abs(this.offset[q])<o&&this.fixPage&&w.target){u(w.target)}this.offset.X=this.offset.Y=0;this._tryToWakeupAutoplay()};c.resizeHandler=function(){var p=this._LSN.resize;var q=+new Date,o,r;if(this.deviceEvents.hasTouch){p&&b.clearInterval(p);p=b.setInterval(function(){if(this.height!==this.wrap.offsetHeight||this.width!==this.wrap.offsetWidth){p&&b.clearInterval(p);p=b.setInterval(function(){if(o===this.wrap.offsetWidth&&r===this.wrap.offsetHeight){p&&b.clearInterval(p);this.reset();this.log("[EVENT]: resize")}else{o=this.wrap.offsetWidth,r=this.wrap.offsetHeight}}.bind(this),12)}else{if(+new Date-q>=1000){p&&b.clearInterval(p)}}}.bind(this),12)}else{p&&b.clearTimeout(p);p=b.setTimeout(function(){if(this.height!==this.wrap.offsetHeight||this.width!==this.wrap.offsetWidth){p&&b.clearInterval(p);this.reset();this.log("[EVENT]: resize")}}.bind(this),200)}};c.slideTo=function(B,o){if(this.isAutoplay){this.pause()}if(this._locking){return}this.unhold();this.onSliding=true;var y=this.animateTime;var q=this.animateType;var z=this._animateFunc;var w=this.data;var u=this.els;var s=this.axis;var C=B;var r=B-this.slideIndex;var t=this.offset;var p;var E=0;if(typeof o==="object"){if(o.animateTime>-1){y=o.animateTime}if(typeof o.animateType==="string"&&o.animateType in this._animateFuncs){q=o.animateType;z=this._animateFuncs[q];this._animateFunc=z;this.animateType=q;this._resetAnimation()}}if(t[s]!==0){E=Math.abs(t[s])/this.scale*y}if(Math.abs(r)>1){this._renderItem(r>0?this.els[2]:this.els[0],C)}this._preloadImg(C);if(w[C]){this.slideIndex=C}else{if(this.isLooping){this.slideIndex=r>0?0:w.length-1}else{r=0}}this.log("[SLIDE TO]: "+this.slideIndex);var D,x,A;if(r===0){p="slideRestore"}else{if((this.isVertical&&(n(q,this._animateReverse)))^(r>0)){u.push(u.shift());D=u[2];x=u[0];A=1}else{u.unshift(u.pop());D=u[0];x=u[2];A=-1}this.currentEl=u[1];if(Math.abs(r)===1){this._renderIntermediateScene();this._renderItem(D,C+r)}else{if(Math.abs(r)>1){if((this.isVertical&&(n(q,this._animateReverse)))){this._renderItem(x,C+A);this._renderItem(u[1],C);this._intermediateScene=[D,C-A]}else{this._renderItem(D,C+A);this._intermediateScene=[x,C-A]}}}d.setStyle(D,"transition","none");E=y-E;p="slideChange";if(this.fillSeam){u.forEach(function(F){i(F,"islider-sliding|islider-sliding-focus")});h(this.currentEl,"islider-sliding-focus");h(D,"islider-sliding")}this.direction=A}for(var v=0;v<3;v++){if(u[v]!==D){d.setStyle(u[v],"transition",(z.effect||"all")+" "+E+"ms "+this.animateEasing)}z.call(this,u[v],s,this.scale,v,0,A);this.fillSeam&&this.seamScale(u[v])}this._watchTransitionEnd(E,p+"d");this.fire(p,this.slideIndex,this.currentEl,this)};c.slideNext=function(){this.slideTo.apply(this,[this.slideIndex+1].concat(a(arguments)))};c.slidePrev=function(){this.slideTo.apply(this,[this.slideIndex-1].concat(a(arguments)))};c.regPlugin=function(){var p=a(arguments);var o=p.shift(),q=p[0];if(!this._plugins.hasOwnProperty(o)&&typeof q!=="function"){return}if(typeof q==="function"){this._plugins[o]=q;p.shift()}if(!n(o,this._opts.plugins)){this._opts.plugins.push(p.length?[].concat([o],p):o);typeof this._plugins[o]==="function"&&this._plugins[o].apply(this,p)}};c.bind=c.delegate=function(s,p,r){function o(x){var u=b.event?b.event:x;var w=u.target;var t=document.querySelectorAll(p);for(var v=0;v<t.length;v++){if(w===t[v]){r.call(w);break}}}this.wrap.addEventListener(s,o,false);var q=s+";"+p;if(!this._EventHandle.hasOwnProperty(q)){this._EventHandle[q]=[[r],[o]]}else{this._EventHandle[q][0].push(r);this._EventHandle[q][1].push(o)}};c.unbind=c.unDelegate=function(s,o,r){var q=s+";"+o;if(this._EventHandle.hasOwnProperty(q)){var p=this._EventHandle[q][0].indexOf(r);if(p>-1){this.wrap.removeEventListener(s,this._EventHandle[q][1][p]);this._EventHandle[q][0][p]=this._EventHandle[q][1][p]=null;return true}}return false};c.destroy=function(){var p=this.outer;var r=this.deviceEvents;this.fire("destroy");if(this.isTouchable){p.removeEventListener(r.startEvt,this);p.removeEventListener(r.moveEvt,this);p.removeEventListener(r.endEvt,this);!r.hasTouch&&p.removeEventListener("mouseout",this)}b.removeEventListener(r.resizeEvt,this);b.removeEventListener("focus",this);b.removeEventListener("blur",this);var s;for(s in this._EventHandle){var q=this._EventHandle[s][1];for(var o=0;o<q.length;o++){if(typeof q[o]==="function"){this.wrap.removeEventListener(s.substr(0,s.indexOf(";")),q[o])}}}this._EventHandle=null;for(s in this._LSN){this._LSN.hasOwnProperty(s)&&this._LSN[s]&&b.clearTimeout(this._LSN[s])}this._LSN=null;this.wrap.innerHTML=""};c.on=function(o,p,q){if(n(o,d.EVENTS)&&typeof p==="function"){!(o in this.events)&&(this.events[o]=[]);if(!q){this.events[o].push(p)}else{this.events[o].unshift(p)}}return this};c.has=function(o,p){if(o in this.events){return -1<this.events[o].indexOf(p)}return false};c.off=function(o,q){if(o in this.events){var p=this.events[o].indexOf(q);if(p>-1){delete this.events[o][p]}}};c.fire=function(p){var o=a(arguments,1);p.split(/\x20+/).forEach(function(r){this.log("[EVENT FIRE]:",r,o);if(r in this.events){var q=this.events[r];for(var s=0;s<q.length;s++){typeof q[s]==="function"&&q[s].apply&&q[s].apply(this,o)}}}.bind(this))};c.reset=function(){this.pause();this._unWatchTransitionEnd();this.width=typeof this._opts.width==="number"?this._opts.width:this.wrap.offsetWidth;this.height=typeof this._opts.height==="number"?this._opts.height:this.wrap.offsetHeight;this.ratio=this.height/this.width;this.scale=this.isVertical?this.height:this.width;this._renderWrapper();this._autoPlay();this.fire("reset slideRestored",this.slideIndex,this.currentEl,this)};c.loadData=function(p,o){this.pause();this._unWatchTransitionEnd();this.slideIndex=o||0;this.data=p;this._renderWrapper();this._autoPlay();this.fire("loadData slideChanged",this.slideIndex,this.currentEl,this)};c.pushData=function(p){if(p==null){return}var o=this.data.length;this.data=this.data.concat(p);if(this.isLooping&&this.slideIndex===0){this._renderItem(this.els[0],this.data.length-1)}else{if(o-1===this.slideIndex){this._renderItem(this.els[2],o);this._autoPlay()}}};c.unshiftData=function(o){if(o==null){return}if(!g(o)){o=[o]}var p=o.length;this.data=o.concat(this.data);if(this.slideIndex===0){this._renderItem(this.els[0],p-1)}this.slideIndex+=p};c._autoPlay=function(){this.delay>0?b.setTimeout(this.play.bind(this),this.delay):this.play()};c._tryToWakeupAutoplay=function(){if(~this.wakeupAutoplayDazetime){this.wakeupAutoplayDazetime>0?b.setTimeout(this.play.bind(this),this.wakeupAutoplayDazetime):this.play()}};c.play=function(){this.pause();if(this.isAutoplay&&(this.isLooping||this.slideIndex<this.data.length-1)){this._LSN.autoPlay=b.setTimeout(this.slideNext.bind(this),this.duration)}};c.pause=function(){this._LSN.autoPlay&&b.clearTimeout(this._LSN.autoPlay)};c.hold=function(){this._holding=true};c.unhold=function(){this._holding=false;this.unlock()};c.lock=function(){this.hold();this._locking=true};c.unlock=function(){this._locking=false};c.seamScale=function(p){var q=/scale([XY]?)\(([^\)]+)\)/;var o=d.getStyle(p,"transform");if(q.test(o)){d.setStyle(p,"transform",o.replace(q,function(r,s,u){var t={};if(s){t[s]=parseFloat(u);return"scale"+this.axis+"("+(s===this.axis?1.001*t[this.axis]:1.001)+")"}else{if(u.indexOf(",")>-1){u=u.split(",");t.X=parseFloat(u[0]);t.Y=parseFloat(u[1])}else{t.Y=t.X=parseFloat(u)}t[this.axis]*=1.001;return"scale("+t.X+", "+t.Y+")"}}.bind(this)))}else{d.setStyle(p,"transform",o+" scale"+this.axis+"(1.001)")}};c.originScale=function(o){var p=/([\x20]?scale)([XY]?)\(([^\)]+)\)/;d.setStyle(o,"transform",d.getStyle(o,"transform").replace(p,function(t,q,r,s){t={};if(r){if(s==="1.001"){return""}else{t[r]=parseFloat(s);return"scale"+this.axis+"("+(r===this.axis?t[this.axis]/1.001:1)+")"}}else{if(s.indexOf(",")>-1){s=s.split(",");t.X=parseFloat(s[0]);t.Y=parseFloat(s[1])}else{t.Y=t.X=parseFloat(s)}t[this.axis]/=1.001;return"scale("+t.X+", "+t.Y+")"}}.bind(this)))};c._isItself=function(u){var t=this.fixPage;if(typeof t==="string"){var s=[],q=u,o;while(!f(q,"islider-outer")&&q!==this.wrap){s.push(q);q=q.parentNode}q=s.pop();if(s.length){try{o=Array.prototype.slice.call(q.querySelectorAll(t));if(o.length){for(var p=0;p<s.length;p++){if(o.indexOf(s[p])>-1){return true}}}}catch(r){return false}}}return false};c.subjectTo=function(q,p){if(!q instanceof d){return}var o=this;o.animateTime=q.animateTime;o.isLooping=q.isLooping;o.isAutoplay=false;q.on("slideStart",function(r){o.startHandler(r)});q.on("slide",function(r){o.moveHandler(r)});q.on("slideEnd",function(r){o.endHandler(r)});q.on("slideChange",function(s){var r=o.data.length;var t=o.direction;if(t>0&&(s-o.slideIndex+r)%r===1){o.slideNext()}else{if(t<0&&(s-o.slideIndex-r)%r===-1){o.slidePrev()}}});q.on("slideRestore",function(r){if(o.slideIndex!==r){o.slideTo(r)}})};if(typeof require==="function"&&typeof module==="object"&&module&&typeof exports==="object"&&exports){module.exports=d}else{if(typeof define==="function"&&define.amd){define(function(){return d})}else{b.iSlider=b.iSlider||d}}})(window||this);
        
        <!-- iSlider.animate.min.js-->
        !function(e,t){"function"==typeof require&&"object"==typeof module&&module&&"object"==typeof exports&&exports?t(require("islider.js")):"function"==typeof define&&define.amd?define(["islider.js"],function(e){t(e)}):t(e.iSlider)}(window?window:this,function(e){"use strict";e&&e.regPlugin("dot",function(e){function t(){var e=document.createDocumentFragment();a.forEach(function(e,t){e.removeEventListener(r,d[t],!1)}),a=[],d=[],l.innerHTML="";for(var t=0;t<o.length;t++)a[t]=document.createElement("li"),a[t].className="islider-dot",a[t].setAttribute("index",t),t===i.slideIndex&&(a[t].className+=" active"),d[t]=function(){i.slideTo(parseInt(this.getAttribute("index"),10))},a[t].addEventListener(r,d[t],!1),e.appendChild(a[t]);l.appendChild(e)}function n(e){return"relative"===e?i.wrap:Boolean(e.nodeName)&&Boolean(e.nodeType)?e:i.wrap.parentNode}var i=this,o=i.data,a=[],d=[],r=i.deviceEvents.endEvt,l=document.createElement("ul");l.className="islider-dot-wrap",t(),n(!(!e||null==e.locate)&&e.locate).appendChild(l),i.on("slideChange",function(){for(var e=0;e<o.length;e++)a[e].className="islider-dot",e===this.slideIndex&&(a[e].className+=" active")}),i.on("loadData",function(){o=this.data,t()},1)})});
        
        <!-- iSlider.plugin.button.min.js-->
        !function(e,i){"function"==typeof require&&"object"==typeof module&&module&&"object"==typeof exports&&exports?i(require("islider.js")):"function"==typeof define&&define.amd?define(["islider.js"],function(e){i(e)}):i(e.iSlider)}(window?window:this,function(e){"use strict";e&&e.regPlugin("button",function(){for(var e=this,i=[],t=[],n=0;n<2;n++)i[n]=document.createElement("div"),i[n].className="islider-btn-outer",t[n]=document.createElement("div"),t[n].className="islider-btn-inner",0===n?(i[n].className+=" left",i[n].dir=-1):(i[n].className+=" right",i[n].dir=1),i[n].addEventListener("click",function(){var i=parseInt(this.getAttribute("dir"),10);e.slideTo(e.slideIndex+i)}),i[n].appendChild(t[n]),e.wrap.appendChild(i[n],e.wrap.nextSibling)})});
        
        <!-- iSlider.plugin.dot.min.js-->
        !function(e,t){"function"==typeof require&&"object"==typeof module&&module&&"object"==typeof exports&&exports?t(require("./iSlider")):"function"==typeof define&&define.amd?define(["./iSlider"],function(e){t(e)}):t(e.iSlider)}(window?window:this,function(e){"use strict";e&&e.extend(e._animateFuncs,{rotate:function(){function t(t,s,i,n,r,a){var o="X"===s?"Y":"X";this.isVertical&&(r=-r,Math.abs(a)>1&&(a=-a));var l=t.parentElement;e.setStyle(l,"perspective",4*i),t.style.visibility="visible",a>0&&2===n&&(t.style.visibility="hidden"),a<0&&0===n&&(t.style.visibility="hidden"),t.style.zIndex=1===n?1:0,t.style.cssText+=e.styleProp("backface-visibility")+":hidden;"+e.styleProp("transform-style")+":preserve-3d;position:absolute;",e.setStyle(t,"transform","rotate"+o+"("+90*(r/i+n-1)+"deg) translateZ("+.889*i/2+"px) scale(0.889)")}return t.effect=e.styleProp("transform"),t.reverse=!0,t}(),flip:function(){function t(t,s,i,n,r,a){this.isVertical&&(r=-r);var o=t.parentElement;e.setStyle(o,"perspective",4*i),t.style.visibility="visible",a>0&&2===n&&(t.style.visibility="hidden"),a<0&&0===n&&(t.style.visibility="hidden"),t.style.cssText+="position:absolute;"+e.styleProp("backface-visibility")+":hidden",e.setStyle(t,"transform","translateZ("+i/2+"px) rotate"+("X"===s?"Y":"X")+"("+180*(r/i+n-1)+"deg) scale(0.875)")}return t.effect=e.styleProp("transform"),t.reverse=!0,t}(),depth:function(){function t(t,s,i,n,r,a){var o=.18*(4-Math.abs(n-1)),l=t.parentElement;e.setStyle(l,"perspective",4*i),t.style.zIndex=1===n?1:0,e.setStyle(t,"transform","scale("+o+") translateZ(0) translate"+s+"("+(r+1.3*i*(n-1))+"px)")}return t.effect=e.styleProp("transform"),t}(),flow:function(){function t(t,s,i,n,r,a){var o=Math.abs(r),l="X"===s?"Y":"X",c="X"===s?1:-1,f=Math.abs(r/i),y=t.parentElement;e.setStyle(y,"perspective",4*i),1===n?t.style.zIndex=i-o:t.style.zIndex=r>0?(1-n)*o:(n-1)*o,e.setStyle(t,"transform","scale(0.7, 0.7) translateZ("+(150*f-150)*Math.abs(n-1)+"px)translate"+s+"("+(r+i*(n-1))+"px)rotate"+l+"("+c*(30-30*f)*(1-n)+"deg)")}return t.effect=e.styleProp("transform"),t}(),card:function(){function t(t,s,i,n,r,a){var o=Math.abs(r),l=1,c=1;o>0?1===n&&(l=1-.2*Math.abs(n-1)-Math.abs(.2*r/i).toFixed(6),c=0):1!==n&&((a>0&&0===n||a<0&&2===n)&&(l=1-.2*Math.abs(n-1)),c=0),t.style.zIndex=c,e.setStyle(t,"transform","scale("+l+") translateZ(0) translate"+s+"("+((1+.2*Math.abs(n-1))*r+i*(n-1))+"px)")}return t.effect=e.styleProp("transform"),t}(),fade:function(){function e(e,t,s,i,n,r){e.style.zIndex=1===i?1:0,n=Math.abs(n),1===i?e.style.opacity=1-n/s:e.style.opacity=n/s}return e.effect="opacity",e}(),zoomout:function(){function t(t,i,n,r,a){var o,l,c,f=a/n;switch(r){case 0:s&&window.clearTimeout(s),l=f<1?f:1,c=2-.5*f,o=2;var y=1e3*parseInt(window.getComputedStyle(t)[e.styleProp("transitionDuration",1)]);y>0&&(s=window.setTimeout(function(){t.style.zIndex=0},y));break;case 1:l=1-f,c=1-.5*f,o=1;break;case 2:l=f>0?f:0,c=.5-.5*f,o=0}t.style.cssText+="z-index:"+o+";opacity:"+l+";"+e.styleProp("transform")+":scale("+c+");"}var s;return t.reverse=!0,t}()})});
        
        renderNewStyle();
    }else {
        var oldStyleContainer = document.getElementById("wrapper");
        oldStyleContainer.style.display = "block";
        renderOldStyle();
    }
    function renderNewStyle(){var e=function(i){return document.createElement(i)};var g=function(i){return i+"px"};var v=config.rsi0-2;var l=config.rsi1-2;var f=config.rss1||"#ffffff";var x=l/8;var k=v-2;var r=l-x-2;var h=document.getElementById("container");h.style.width=g(v);h.style.height=g(l);h.style.background=f;h.style["padding-bottom"]=g(x);var o=document.getElementById("desc_bottom");o.style.height=g(x);var d=document.getElementById("desc_title");o.style.lineHeight=g(x);if(v<250){o.style.fontSize="14px"}var w=[];ads=ads.slice(0,4);for(var q=0;q<ads.length;q++){w.push({content:(function(){var y=e("a");var i=e("img");i.className="pic";i.src=ads[q].image_url;i.style.width=g(k);i.style.height=g(r);y.href=ads[q].curl;y.target="_blank";y.appendChild(i);return y})()})}var u=document.getElementById("iSlider-wrapper");u.style.width=g(v);if(u.offsetWidth===0){var n=document.getElementById("wrapper");n.style.display="block";h.style.display="none";renderOldStyle()}else{var j=new iSlider({dom:u,data:w,duration:4000,isLooping:1,isAutoplay:1,fillseam:true,animateTime:300,plugins:["dot","button"],wakeupAutoplayDazetime:1});var b=document.querySelector(".islider-outer");b.style.width=g(v);b.style.height=g(r);var c=document.getElementsByClassName("islider-btn-outer");var a=c[0].offsetHeight/2;var m=g(r/2-a);c[0].style.top=m;c[1].style.top=m;var p=document.getElementsByClassName("islider-node");for(var q=0;q<p.length;q++){var t=p[q];t.style.width=g(k);t.style.height=g(r-1.5)}u.onmouseover=function(){c[0].style.opacity=0.44;c[1].style.opacity=0.44};u.onmouseout=function(){c[0].style.opacity=0;c[1].style.opacity=0};d.innerHTML=ads[0].title;d.href=ads[0].curl;j.on("slideChange",function(i){d.innerHTML=ads[i].title;d.href=ads[i].curl});var s=navigator.userAgent.toLowerCase();if(/webkit/i.test(s)&&!(/chrome/i.test(s)&&/webkit/i.test(s)&&/mozilla/i.test(s))){h.style.position="-webkit-sticky"}}}function renderOldStyle(){var v=-20;var w=55;var l=280;var a=200;var c=5;var Q=config.nav_space;var F=1;var M=0;var x=Math.max(parseInt((config.rsi1-6-2)/config.nav_percent),config.nav_min_h);var C=config.rsi0-6-2;var n=config.rsi1-6-2-x-c;var O=C/n;if(O<1.4){a=n;l=parseInt(a*1.4)}else{if(O>1.4){l=C;a=parseInt(l/1.4)}else{a=n;l=C}}a=Math.min(350,a);l=Math.max(250,l);var K=0-parseInt((l-C)/2);var J=0-parseInt((a-n)/2);var t=x-F*2;var P=parseInt(1.4*t);ads=ads.concat(ads);var D=ads.length*(P+Q+F*2);var I=C;distance=C-D+Q;var g=config.rss1||"#ffffff";var T=parseInt(n/3.5);var r=config.img_bigger?".slides:hover img {                -webkit-transition: -webkit-transform .5s ease-in;                 -moz-transition: -moz-transform .5s ease-in;                 -ms-transition: -ms-transform .5s ease-in;                 -o-transition: -o-transform .5s ease-in;                 transition: transform .5s ease-in;                 -webkit-transform: scale(1.07);                 -moz-transform: scale(1.07);                 -ms-transform: scale(1.07);                 -o-transform: scale(1.07);                 transform: scale(1.07);            }":"";var j='            #wrapper {width:{wrapper_width}px;height:{wrapper_height}px;background-color:{wrapper_bg_color};overflow:hidden;border:1px solid #CCC}            .pic-window {position:relative;width:{box_width}px;height:{box_height}px;overflow:hidden;margin-bottom:{box_bottom_margin}px;position:relative;}             .pic-box {border-bottom:1px solid #ccc;height:{box_height}px;width:{box_width}px;*display:inline}            .mask {display:none;height:{box_height}px;width:{box_width}px;position:absolute;top:0px;background-color:rgba(0,0,0,0.5);filter: progid:DXImageTransform.Microsoft.Gradient(enabled="true", GradientType=1,StartColorstr=#6F000000, EndColorstr=#6F000000);text-decoration:none;}            .mask_head {height:{mask_head_height}px;margin-top:{mask_head_margin_top}px;background-color:rgba(1,33,100,0.5);    box-shadow: 0 1px 4px 0 #000;}            .mask_title {float:left;;height:{mask_title_height}px;padding:{mask_padding}px;color:#FFFFFF;font-size:{mask_font}px;background:linear-gradient(90deg, #033E98, #3285FF);font-weight:900;background-color:#3285FF;}            .mask_desc {color:#FFFFFF;line-height:{mask_head_height}px;margin-left:{mask_padding}px;margin-top:{mask_desc_margin_top}px;}            .slides {float:left;display:none;}            .show {display:block;}            .pic-box img {width:{pic_width}px; height:{pic_height}px;position:absolute;left:{img_pos_x}px;top:{img_pos_y}px}            .arrow1 {float:left;;border-width:{mask_arrow_height}px;border-style:solid;border-color:#3285FF transparent transparent #3285FF;font-size:0px;line-height:0px;}            .arrow2 {float:right;;border-width:{mask_arrow_height}px;border-style:solid;border-color:transparent #3285FF #3285FF transparent;font-size:0px;line-height:0px;}            .desc {padding-left:5px;text-decoration:none;position:absolute;height:{desc_height}px;width:{box_width}px;bottom:{desc_bottom}px;font-weight:900;left:0px;font-size:20px;color:#fff;line-height:{desc_line_height}px;                background-image: -webkit-linear-gradient(90deg, #000, 70%, rgba(255, 255, 255, 0));                background-image:    -moz-linear-gradient(90deg, #000, 70%, rgba(255, 255, 255, 0));                 background-image:      -o-linear-gradient(90deg, #000,  rgba(255, 255, 255, 0));                 background-image:         linear-gradient(90deg, #000,  rgba(255, 255, 255, 0));                background:               linear-gradient(90deg, #000,  rgba(255, 255, 255, 0));                filter: progid:DXImageTransform.Microsoft.Gradient(enabled="true", GradientType=1,StartColorstr=#FF000000, EndColorstr=#00FFFFFF);                -webkit-transition: bottom .15s ease-in;                 -moz-transition: bottom .15s ease-in;                 -ms-transition: bottom .15s ease-in;                 -o-transition: bottom .15s ease-in;                 transition: bottom .15s ease-in;             }';if(config.hover==1){j+=".slides:hover .mask{display:block;}                .slides:hover .desc{display:none;}"}j+=".mask_desc_highlight {display:inline-block;padding:2px;margin:1px;line-height:14px;border-radius:3px;background-color:#9A9A9A;color:#FFFFFF;}            .nav-window {width:{nav_win_width}px;height:{nav_height}px;overflow:hidden;position:relative;float:left;margin:0px}            .nav {position:absolute;width:{nav_width}px;height:{nav_height}px;top:0px;left:0px;}            .thumb {width:{thumb_width}px;height:{thumb_height}px;float:left;margin-right:{thumb_margin_right}px;position:relative;border:{thumb_border}px solid #ccc}            .thumb-border {border:{thumb_border}px solid #f70}            .thumb img {width:{thumb_width}px; height:{thumb_height}px;}            .thumb-mask {width:{thumb_width}px ;height:{nav_height}px;position:absolute;top:0px;left:0px;background-color:#ffffff;opacity:{opacity};filter:alpha(opacity={opacity_ie})}            .pointer {cursor:pointer}            .thumb-select {opacity:0;filter:alpha(opacity=0);}            .slides:hover {display:block;}";var o='<div class="slides" id="pic_{index}" style="overflow:hidden">                 <a href="{curl}" target="_blank" class="pointer">                <div class="pic-box">                 <div class="img"><img src="{image_url}" id="img_{index}" class="figure"></div></div>                <div class="desc" id="desc_{index}">                     {title}                </div>                <div class="mask">                    <div class="mask_head">                        <div class="mask_title">                            {title}                        </div>                        <div class="arrow1"></div>                    </div>                </div>                </a>            </div>';var f='            <div class="thumb">                 <a href="{curl}" target="_blank" class="pointer">                <img src="{image_url}" />                 <div class="thumb-mask" pic="{index}" id="thumb_{index}"></div>                </a>            </div>';function u(V,U){var W=U;for(key in V){var i=new RegExp("{"+key+"}","g");W=W.replace(i,V[key])}return W}var b="";var R="";for(var L=0;L<ads.length;++L){ads[L].index=L;ads[L].curl=ads[L].curl.replace(/stid=\d*&/,"stid=117&");b+=u(ads[L],o);ads[L].curl=ads[L].curl.replace(/stid=\d*&/,"stid=117&");R+=u(ads[L],f)}var E=config.logIS?"":'<a id="baiduLogo" class="bd-logo2" href="http://wangmeng.baidu.com/" title="" style="zoom: 1;cursor: default;">&nbsp;</a>';var q=' <div style="padding:3px;">            <div id="pic" class="pic-window">'+b+'</div>            <div>            <div class="nav-window">                <div id="nav" class="nav">'+R+"</div>            </div>            </div>"+E+"</div>";document.getElementById("wrapper").innerHTML=q;if(bdJinglianExpFlag>0){var B=document.getElementById("baiduLogo");if(B){B.setAttribute("title",bdJinglianHoverTitle);B.setAttribute("href","javascript:void(0)")}}else{var B=document.getElementById("baiduLogo");if(B){B.setAttribute("title","");B.setAttribute("target","_blank");B.setAttribute("href","http://wangmeng.baidu.com/")}}function p(W){var X=document;var U=X.createElement("style");U.setAttribute("type","text/css");if(U.styleSheet){U.styleSheet.cssText=W}else{var i=X.createTextNode(W);U.appendChild(i)}var V=X.getElementsByTagName("head");if(V.length){V[0].appendChild(U)}else{X.documentElement.appendChild(U)}}p(u({wrapper_width:config.rsi0-2,wrapper_height:config.rsi1-2,wrapper_bg_color:g,pic_width:l,pic_height:a,box_width:C,box_height:n,nav_height:x,desc_height:w,desc_line_height:w+v,thumb_width:P,thumb_height:t,img_pos_x:K,img_pos_y:J,nav_width:D,nav_win_width:C,box_bottom_margin:c,desc_bottom:v,thumb_margin_right:Q,thumb_border:F,arrow_line_height:x-5,mask_head_height:T,mask_font:parseInt(T/3)+2,mask_padding:parseInt(T/4),mask_arrow_height:parseInt(T/2),mask_title_height:T-2*parseInt(T/4),mask_head_margin_top:parseInt(n/4),mask_desc_margin_top:parseInt((n-T-parseInt(n/4))/3),opacity:M,opacity_ie:(M*100)},j));function N(i){return i||window.event}function h(V,U,i){var W=typeof document.body.style.MozUserSelect!="undefined";if(U=="mousewheel"&&W){U="DOMMouseScroll"}V.addEventListener?V.addEventListener(U,i,false):V.attachEvent?V.attachEvent("on"+U,i):V["on"+U]=i}function m(U,i){if(N(U).type=="mouseover"){return !s(i,N(U).relatedTarget||N(U).fromElement)&&!((N(U).relatedTarget||N(U).fromElement)===i)}else{return !s(i,N(U).relatedTarget||N(U).toElement)&&!((N(U).relatedTarget||N(U).toElement)===i)}}function s(i,U){if(!(U&&i)){return false}if(i.contains){return i!=U&&i.contains(U)}else{return !!(i.compareDocumentPosition(U)&16)}}var H={prime:document.getElementById("pic_0"),thumb:document.getElementById("thumb_0"),parent:document.getElementById("thumb_0").parentNode.parentNode,id:0,timer:0,fade_timer:0};H.thumb.className="thumb-mask thumb-select";H.prime.className="slides show";H.parent.className="thumb thumb-border";function e(){clearTimeout(H.timer);var U=(parseInt(H.id)+1)%ads.length;var i=3000;if(carous_adv){i=Math.max(Math.min((ads.length-U)*1000,5000),2000)}H.timer=setTimeout(e,i);y(d())}function d(){var i=H.id;return document.getElementById("thumb_"+(++i%ads.length))}function A(){var i=H.id;i=--i%ads.length;if(i==-1){i=ads.length/2-1}return document.getElementById("thumb_"+i)}function z(i,V,W){i=0-i;var U=V+W;G(i,U,function(X){return X<=W-i})}function k(i,V,W){var U=V+W;G(i,U,function(X){return X>=W-i})}function G(V,W,U){var X=document.getElementById("nav");var i=0;var Y=0;clearInterval(H.scroll);H.scroll=setInterval(function(){i=parseInt(X.style.left)||0;if(U(Y)){clearInterval(H.scroll);X.style.left=W+"px";return}var Z=i+V;X.style.left=Z+"px";if(V<0&&Z<=0-D/2){W+=D/2;X.style.left=(Z+D/2)+"px"}if(V>0&&Z>=0){W-=D/2;X.style.left=(Z-D/2)+"px"}Y+=V},20)}function S(){var X=H.id;var U=(P+Q+F*2)*X;var i=U+P+F*2;var V=document.getElementById("nav");var W=parseInt(V.style.left)||0;abs_left=U+W;abs_right=abs_left+P+F*2;if(abs_left<0){k(5,W,0-U-W)}else{if(abs_right>I){z(5,W,I-abs_right)}}}function y(V){if(!!H&&!!H.thumb&&!!H.prime){H.prime.className="slides";H.thumb.className="thumb-mask";H.parent.className="thumb";clearInterval(H.fade_timer);var W=H.id;var U=document.getElementById("img_"+W);U.style.opacity!=undefined?U.style.opacity=1:U.style.filter="alpha(opacity=100)"}V.className="thumb-mask thumb-select";var W=V.getAttribute("pic");H.prime=document.getElementById("pic_"+W);H.thumb=V;H.parent=V.parentNode.parentNode;H.id=W;var U=document.getElementById("img_"+W);U.style.opacity!=undefined?U.style.opacity=0:U.style.filter="alpha(opacity=0)";H.prime.className="slides show";H.parent.className="thumb thumb-border";var i=0;H.fade_timer=setInterval(function(){i+=20;if(i>=100){clearInterval(H.fade_timer)}U.style.opacity!=undefined?U.style.opacity=i/100:U.style.filter="alpha(opacity="+i+")"},50);S()}h(document,"mouseover",function(U){var i=U.srcElement?U.srcElement:U.target;if(m(U,i)){if(!i.className){return}clearTimeout(H.timer);if(i.className==="thumb-mask"){y(i)}}});h(document.getElementById("wrapper"),"mouseout",function(U){var i=U.srcElement?U.srcElement:U.target;if(m(U,i)){if(!i.className){return}clearTimeout(H.timer);H.timer=setTimeout(e,3000)}});if(config.mousewheel){h(document,"mousewheel",function(U){function V(W){W=W||event;return(W.wheelDelta?W.wheelDelta/120:-(W.detail%3==0?W.detail/3:W.detail))}function i(W){W=W||event;if(W.preventDefault){W.preventDefault()}W.returnValue=false}i(U);if(-1==V(U)){y(d())}else{y(A())}return false})}clearTimeout(H.timer);H.timer=setTimeout(e,4000)};
</script>
<script>
// logo
var defaultIsShow = false;
var config = {"at":3,"conBW":0,"consl":1,"dft":0,"exp_flag":0,"hover_flag":1,"n":"50071140_cpr","nav_min_h":25,"nav_percent":9,"nav_space":5,"pat":17,"rsi0":200,"rsi1":200,"staticDomain":"qpb1.sohu.com","temp_exp_flag":0,"titFS":12,"titTA":"left"};
var logoCon={logoIsShow:function(){var c=document.getElementsByTagName("a");for(var a=0;a<c.length;a++){var b=c[a].className;if(b==="bd-logo"||b==="bd-logo2"||b==="bd-logo3"||b==="bd-logo4"||b==="bd-logo5"||b==="bd-logo1"){if(typeof config.consl=="undefined"){config.consl=1}if(defaultIsShow&&config.consl){c[a].style.display="block"}else{c[a].style.display="none"}}}}};logoCon.logoIsShow();
</script>
<script>
window.onload=function(){var a=document.getElementById("wrapper");if(a.style.display==="none"){logo.init({containerId:"iSlider-wrapper",closeDirect:true,feedbackParentId:"container",deviceType:1})}else{logo.init({containerId:"wrapper",closeDirect:true,feedbackParentId:"wrapper",deviceType:1})}};
</script>
<script type="text/javascript">
    function addFliterForImg(){var a=config.saturate;var e=config.contrast;var f=document.querySelectorAll("img");for(var c=f.length-1;c>=0;c--){var d=f[c];if(d.src.length>0&&d.width>10&&d.height>10){var b;if(a&&e){b="-webkit-filter:saturate("+a/100+") contrast("+e/100+")"}else{if(a){b="-webkit-filter:saturate("+a/100+")"}else{if(e){b="-webkit-filter:contrast("+e/100+")"}}}if(d.style.cssText.indexOf("filter")===-1){d.style.cssText+=b}}}}if(config.saturate||config.contrast){if(document.all){window.attachEvent("onload",addFliterForImg)}else{window.addEventListener("load",addFliterForImg,false)}};
</script>
</html>
