(window.webpackChunkNRBA=window.webpackChunkNRBA||[]).push([[859],{7859:(e,t,n)=>{"use strict";n.r(t),n.d(t,{aggregator:()=>H});var a=n(5970);function r(e){switch(e){case"ajax":return["jserrors"];case"session-trace":return["ajax"];default:return[]}}var i=n(2687),o=n(9011),s=n(1925),c=n(9599);class g extends s.w{constructor(e){super(e),this.aggregatedData={}}store(e,t,n,a,r){var i=this.getBucket(e,t,n,r);return i.metrics=function(e,t){t||(t={count:0});return t.count+=1,(0,c.D)(e,(function(e,n){t[e]=u(n,t[e])})),t}(a,i.metrics),i}merge(e,t,n,a,r){var i=this.getBucket(e,t,a,r);if(i.metrics){var o=i.metrics;o.count+=n.count,(0,c.D)(n,(function(e,t){if("count"!==e){var a=o[e],r=n[e];r&&!r.c?o[e]=u(r.t,a):o[e]=function(e,t){if(!t)return e;t.c||(t=d(t.t));return t.min=Math.min(e.min,t.min),t.max=Math.max(e.max,t.max),t.t+=e.t,t.sos+=e.sos,t.c+=e.c,t}(r,o[e])}}))}else i.metrics=n}storeMetric(e,t,n,a){var r=this.getBucket(e,t,n);return r.stats=u(a,r.stats),r}getBucket(e,t,n,a){this.aggregatedData[e]||(this.aggregatedData[e]={});var r=this.aggregatedData[e][t];return r||(r=this.aggregatedData[e][t]={params:n||{}},a&&(r.custom=a)),r}get(e,t){return t?this.aggregatedData[e]&&this.aggregatedData[e][t]:this.aggregatedData[e]}take(e){for(var t={},n="",a=!1,r=0;r<e.length;r++)t[n=e[r]]=f(this.aggregatedData[n]),t[n].length&&(a=!0),delete this.aggregatedData[n];return a?t:null}}function u(e,t){return null==e?function(e){e?e.c++:e={c:1};return e}(t):t?(t.c||(t=d(t.t)),t.c+=1,t.t+=e,t.sos+=e*e,e>t.max&&(t.max=e),e<t.min&&(t.min=e),t):{t:e}}function d(e){return{t:e,min:e,max:e,sos:e*e,c:1}}function f(e){return"object"!=typeof e?[]:(0,c.D)(e,l)}function l(e,t){return t}const p="jserrors",m="ajax",v="page-action",h="session-trace",w="spa",b="metrics",j=["page-view-event","page-view-timing",b],y=[...j,p,m,v,h],D={lite:j,pro:y,spa:[...y,w],worker:[b,p,m,v]},k=new g({agentIdentifier:i.Z}),Z={notInitialized:{},staged:{},initialized:{}};async function O(e){const t=(0,o.K)(i.Z);try{await Promise.all(D[e].map((async e=>{if(t[e.replace(/-/g,"_")]){const{Aggregate:t}=await n(792)(`./${e}/aggregate`);Z.notInitialized[e]=t}})))}catch(t){throw console.error("Failed to import one or more feature(s) for",e),t}return Object.entries(Z.notInitialized).forEach((e=>{let[t,n]=e;r(t).length?Z.staged[t]=n:(Z.initialized[t]=new n(i.Z,k),delete Z.notInitialized[t])})),x()}function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return Object.entries(Z.staged).forEach((e=>{let[t,n]=e;const a=r(t),o=a.map((e=>Z.initialized[e])).filter((e=>e));o.length===a.length&&(Z.initialized[t]=new n(i.Z,k,o),delete Z.staged[t],delete Z.notInitialized[t])})),e<3&&Object.keys(Z.staged).length?x(e+1):(Object.entries(Z.staged).forEach((e=>{let[t,n]=e;const a=r(t),o=a.map((e=>Z.initialized[e])).filter((e=>e));console.warn(`Feature module ${t} depends on ${a.join(", ")}, but one or more of those features were not included.  Some data or functionality may be impacted.`),Z.initialized[t]=new n(i.Z,k,o),delete Z.staged[t],delete Z.notInitialized[t]})),Z)}var P=n(2071),z=n(4539);function I(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"feature";const n=e?P.ee.get(e):P.ee,a=z.X.handlers;if(n.backlog&&a){var r=n.backlog[t],i=a[t];if(i){for(var o=0;r&&o<r.length;++o)B(r[o],i);(0,c.D)(i,(function(e,t){(0,c.D)(t,(function(t,n){n[0].on(e,n[1])}))}))}delete a[t],n.backlog[t]=null}}function B(e,t){var n=e[1];(0,c.D)(t[n],(function(t,n){var a=e[0];if(n[0]===a){var r=n[1],i=e[3],o=e[2];r.apply(i,o)}}))}function C(e){I(e,"api"),I(e,"feature")}const E={};var A=n(8438),T=n(4580),M=n(8649),N=n(6103),R=n(3195);const F=["applicationID","errorBeacon","beacon","licenseKey"];function H(e){const t=(0,a.C5)(i.Z);if(!F.every((e=>!!t[e])))try{const e=(0,T.gG)(),t=e.info?.jsAttributes||{},n=(0,a.C5)(i.Z)?.jsAttributes||{};(0,a.CX)(i.Z,{...e.info,jsAttributes:{...t,...n}})}catch(e){}const n=void 0===(0,a.OP)(i.Z).autorun||(0,a.OP)(i.Z).autorun;if(function(e){var t=P.ee.get(e),n=0,r=!1===(0,a.Mt)(e,"ssl")?"http":"https",i={finished:(0,M.Z)((function(n,r){var i=r?r-(0,a.OP)(e).offset:n;(0,R.p)("record-custom",["finished",{time:i}],void 0,void 0,t),o(n,{name:"finished",start:i+(0,a.OP)(e).offset,origin:"nr"}),(0,R.p)("api-addPageAction",[i,"finished"],void 0,void 0,t)})),setErrorHandler:function(t,n){(0,a.OP)(e).onerror=n},addToTrace:o,inlineHit:function(t,i,o,s,c,g,u){if(!A.il)return;i=A.ZP.encodeURIComponent(i),n+=1;const d=(0,a.C5)(e);if(d.beacon){var f=r+"://"+d.beacon+"/1/"+d.licenseKey;f+="?a="+d.applicationID+"&",f+="t="+i+"&",f+="qt="+~~o+"&",f+="ap="+~~s+"&",f+="be="+~~c+"&",f+="dc="+~~g+"&",f+="fe="+~~u+"&",f+="c="+n,N.T.img(f)}},addRelease:function(t,n,r){++s>10||((0,a.OP)(e).releaseIds[n.slice(-200)]=(""+r).slice(-200))}};function o(n,r){if(r&&"object"==typeof r&&r.name&&r.start){var i={n:r.name,s:r.start-(0,a.OP)(e).offset,e:(r.end||r.start)-(0,a.OP)(e).offset,o:r.origin||"",t:"api"};(0,R.p)("bstApi",[i],void 0,void 0,t)}}(0,c.D)(i,(function(e,n){(0,z.X)("api-"+e,n,"api",t)}));var s=0}(i.Z),A.il&&(0,T.EZ)("setToken",(e=>function(e,t){var n=P.ee.get(t);e&&"object"==typeof e&&((0,c.D)(e,(function(e,t){if(!t)return n.emit("block-"+e,[]);t&&!E[e]&&(n.emit("feat-"+e,[]),E[e]=!0)})),C(t))}(e,i.Z))),n)return async function(){await O(e);(0,T.EZ)("activatedFeatures",E),A.il||C(i.Z)}()}},8649:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var a=n(8539),r=n.n(a);function i(e){var t,n=!1;return function(){return n?t:(n=!0,t=e.apply(this,r()(arguments)))}}},6103:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});const a={jsonp:function(e,t){var n=document.createElement("script");n.type="text/javascript",n.src=e+"&jsonp="+t;var a=document.getElementsByTagName("script")[0];return a.parentNode.insertBefore(n,a),n},xhr:function(e,t,n){var a=new XMLHttpRequest;a.open("POST",e,!n);try{"withCredentials"in a&&(a.withCredentials=!0)}catch(e){}return a.setRequestHeader("content-type","text/plain"),a.send(t),a},img:function(e){var t=new Image;return t.src=e,t},beacon:function(e,t){return window.navigator.sendBeacon(e,t)}}},792:(e,t,n)=>{var a={"./ajax/aggregate":[2736,569,736],"./jserrors/aggregate":[8244,569,244],"./metrics/aggregate":[7041,569,41],"./page-action/aggregate":[1142,569,142],"./page-view-event/aggregate":[2620,569,620],"./page-view-timing/aggregate":[4457,569,457],"./session-trace/aggregate":[466,569,466],"./spa/aggregate":[7885,569,885]};function r(e){if(!n.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(r)))}r.keys=()=>Object.keys(a),r.id=792,e.exports=r}}]);