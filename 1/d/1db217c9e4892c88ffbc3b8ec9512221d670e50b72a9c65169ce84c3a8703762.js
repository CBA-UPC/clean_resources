!);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"redpop@b474a6ad4354f4ba5fde672fa4e9c2c267684761"};"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[5377],{86148:31569:(e,t,s)=>{s.d(t,{Z:()=>n});var o=s(5754),l=s.n(o);let i={sidebarItem:"FZkjV",hasRightSlotItem:"I1qRl",sidebarTitle:"hF8Wr",headerWithRightSlot:"shOJA"};var a=s(2629);let n=e=>{var t=e.className,s=e.title,o=e.titleClassName,n=e.children,r=e.titleRightSlot;return(0,a.jsxs)("div",{className:l()(i.sidebarItem,t,{[i.hasRightSlotItem]:r}),children:[(0,a.jsxs)("div",{className:l()({[i.headerWithRightSlot]:r}),children:[s&&(0,a.jsx)("h1",{className:l()(i.sidebarTitle,o),children:s}),r]}),n]})}},46023:(e,t,s)=>{s.d(t,{ZP:()=>Z});var o=s(54138),l=s.n(o),i=s(50209),a=s.n(i),n=s(5754),r=s.n(n),h=s(95004),d=s(60612),m=s(18997),g=s(44009),c=s(31571),p=s(77095),b=s(78667),f=s(63583),u=s.n(f),v=s(86148),w=s(2629);class x extends h.Component{render(){var e=this.props,t=e.appContext._t,s=e.avatar,o=e.avatarShape,l=e.blogName,i=e.blogTitle,a=e.blogUrl,n=e.className,r=e.isFollowed,h=e.onClose,d=e.onFollow,b=e.rowTheme,f=void 0!==d&&!r&&(0,w.jsx)(c.Z,{following:!!r,blogName:l,blogUrl:a,onFollow:d,className:v.Z.blogRowFollowButton}),x=(0,w.jsx)(g.Z,{wrapperClassName:"dxDX3",onClick:h,label:t("Dismiss Recommendation"),children:(0,w.jsx)(p.Z,{colors:{primary:u().paletteTransparentWhite13},size:{width:10,height:10}})});return(0,w.jsx)("div",{className:"iOplf",children:(0,w.jsx)(m.Z,{avatar:s,avatarShape:o,blogName:l,blogTitle:i,blogUrl:a,className:n,clickableBlogRowClassName:"WaV4Y",closeButton:x,floatingButton:f,isMobile:!1,openBlogCard:"body",theme:void 0===b?"dark":b})})}}let B=(0,b.HJ)(x);var T=s(6135),R=s(85795),I=s(86033),N=s(16273),S=s(78093),y=s.n(S);let C={loadingBlogs:"B4rcz",recommendedBlogs:"PwJi6",blogRowHolder:"kqme1",blogRow:"_fk31",dismiss:"Kxfe3",follow:"vN7wd",hide:"ou8zw",dashboardEmpty:"E4V_b",dismissAll:"W9GZw"};class j extends h.Component{constructor(){super(...arguments),a()(this,"state",l()({indexesToRemove:[],animationType:"none",fetchBlogsIsLoading:!1},this.props.getInitialContent())),a()(this,"apiHelper",(0,R.ZP)(this.props.appContext.apiFetch)),a()(this,"fetchInProgress",null),a()(this,"renderRows",e=>{var t=this.props,s=t.rowTheme,o=t.animationTimeout,l=t.className,i=this.state,a=i.blogs,n=i.indexesToRemove;return a.slice(0,this.getNumberOfBlogsToShow()).map((t,i)=>{var a,h;return(0,w.jsx)("li",{className:C.blogRowHolder,children:(0,w.jsx)("div",{className:r()(C.blogRow,{[C.dismiss]:this.isBlogInAnimationState(i,"dismiss-blog"),[C.follow]:this.isBlogInAnimationState(i,"follow-blog"),[C.hide]:this.isBlogInAnimationState(i,"none")}),style:function(e,t,s,o){return t.length>0&&e>Math.max(...t)&&"exiting"===s?{transform:`translateY(-${59*t.length}px)`,transition:`transform ${o}ms ease-out`}:{}}(i,n,e,o),children:(0,w.jsx)(B,{blogName:t.name,blogTitle:null!==(a=t.title)&&void 0!==a?a:"",blogUrl:t.url,avatar:null!==(h=t.avatar)&&void 0!==h?h:[],isFollowed:t.followed,onFollow:t.canBeFollowed?this.animateFollowBlog.bind(this,i):void 0,onClose:this.animateDismissBlog.bind(this,i),rowTheme:s,className:l})})},`${t.name}-${i}`)})}),a()(this,"getNumberOfBlogsToShow",()=>this.props.numberOfBlogsToShow+this.state.indexesToRemove.length),a()(this,"isBlogInAnimationState",(e,t)=>this.state.indexesToRemove.includes(e)&&this.state.animationType===t),a()(this,"fetchBlogs",()=>{var e=this.state.nextLink,t=this.props.appContext.apiFetch;e&&(this.cancelInProgressFetchIfNecessary(),this.fetchInProgress=(0,I.Z)(t(e.href)),this.setState({fetchBlogsIsLoading:!0}),this.fetchInProgress.then(e=>{var t=this.state.blogs,s=(0,this.props.getContentFromResponse)(e),o=s.nextLink,l=s.blogs;this.setState({nextLink:o,blogs:t.concat(l),fetchBlogsIsLoading:!1})}))}),a()(this,"logBlogDismissal",(e,t)=>{Promise.all(t.map(t=>this.apiHelper.logBlogDismissal(e[t].url).fetch()))}),a()(this,"rowRemovalComplete",()=>{var e=this.state,t=e.blogs,s=e.animationType,o=e.indexesToRemove;"dismiss-blog"===s&&this.logBlogDismissal(t,o),this.setState({animationType:"none"})}),a()(this,"removeRow",()=>{var e=this.state,t=e.blogs,s=e.indexesToRemove,o=t.filter(;this.setState({indexesToRemove:[],blogs:o}),o.length<=5&&this.fetchBlogs()}),a()(this,"animateDismissBlog",e=>this.setState({indexesToRemove:[e],animationType:"dismiss-blog"})),a()(this,"animateFollowBlog",e=>this.setState({indexesToRemove:[e],animationType:"follow-blog"})),a()(this,"animateDismissAllBlogs",()=>{var e=this.state.blogs,t=Math.min(this.props.numberOfBlogsToShow,e.length);this.setState({indexesToRemove:(0,N.Z)(0,t),animationType:"dismiss-blog"})}),a()(this,"cancelInProgressFetchIfNecessary",}componentDidMount(){this.fetchBlogs()}componentDidUpdate(e){e.title!==this.props.title&&this.setState(this.props.getInitialContent())}ender(){var e=this.props,t=e.title,s=e.numberOfBlogsToShow,o=e.dismissAllLabel,l=e.appContext._t,i=e.animationTimeout,a=this.state,n=a.blogs,r=a.animationType,h=a.fetchBlogsIsLoading;return!n.length&&h?(0,w.jsx)("div",{className:C.loadingBlogs,children:(0,w.jsx)(T.Z,{small:!0})}):n.length||h?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("ul",{className:C.recommendedBlogs,"aria-label":t,style:{height:59*s},children:(0,w.jsx)(d.ZP,{in:"none"!==r,timeout:i,onEntered:()=>{this.rowRemovalComplete()},onExited:children:this.renderRows})}),o&&(0,w.jsx)("div",{className:C.dismissAll,children:(0,w.jsx)(g.Z,{label:o,onClick:this.animateDismissAllBlogs,children:o})})]}):(0,w.jsx)("span",{className:C.dashboardEmpty,children:l("No more blogs available.")})}}a()(j,"defaultProps",{numberOfBlogsToShow:4,title:"",animationTimeout:y().postSlideOutDurationInMs});var F=(0,b.HJ)(j);class k extends h.Component{render(){return(0,w.jsx)(F,l()({},this.props))}}a()(k,"defaultProps",j.defaultProps);let Z=k},40796:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u,getContentFromResponse:()=>f,getInitialBlogRowsContent:);var o=s(54138),l=s.n(o),i=s(55673),a=s(36485),n=s(54382),r=s(90127),h=s(1308),d=s(78667),m=s(93099),g=s(31569),c=s(46023),p=s(2629),b=()=>({blogs:[],nextLink:{href:(0,a.S)("/v2/recommended/blogs",l()({limit:8},(0,h.n9)(["name","title","url","blogViewUrl","avatar","canBeFollowed","followed","theme"])))}}),f=e=>{var t=e.response,s=t.blogs,o=t.links;return{blogs:s,nextLink:null==o?void 0:o.next}};let u=()=>{var e=(0,(0,d.bp)()._t)("Check out these blogs");return(0,p.jsxs)(g.Z,{title:e,children:[(0,p.jsx)(c.ZP,{title:e,getInitialContent:b,getContentFromResponse:f}),(0,p.jsx)(i.rU,{to:(0,m.Z)(r.o_.explore),className:"I_SFh",children:(0,p.jsx)(n.ZP,{children:"Explore all of Tumblr"})})]})}}}]);