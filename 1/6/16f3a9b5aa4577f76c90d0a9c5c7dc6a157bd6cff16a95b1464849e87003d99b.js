(function(window) {
	try {
		window.BAMX = window.BAMX || {};
		window.BAMX.GLOBALS = window.BAMX.GLOBALS || {
			LOADED: {},
			PROMISE: {},
			AUCTION_MAP: {},
			BAM_BOX: {}
		};

		var CONTAINED_BAMX_OBJ = {
			IS_IFRAME: window.BAMX.IS_IFRAME,
			DEBUG_MODE: false,
			ENV: 'release',
			GITHASH: '35cd98142e2c663878526255e7604ff507591eb3',
			CORE_CONFIG: {
				isPreview: false
			}
		};

		/* Preview mode can be turned on if isPreview is set to true
		 * in the BAMX window object.
		 */
		if (window.BAMX.CORE_CONFIG && window.BAMX.CORE_CONFIG.isPreview) {
			CONTAINED_BAMX_OBJ.CORE_CONFIG.isPreview = window.BAMX.CORE_CONFIG.isPreview;
		}
		window.BAMX.CORE_CONFIG = CONTAINED_BAMX_OBJ.CORE_CONFIG;

		// Prevent amd from causing Bluebird to try and load using amd
		if (typeof(window.define) === 'function' && window.define.amd) {
			window._bamDefine = window.define;
			window.define = null;
		}

		"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}unction _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _get=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var s=i.get;if(void 0!==s)return s.call(r)},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();!,"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise),Array.from||(Array.from=)),"function"!=typeof Object.assign&&(Object.assign=,String.prototype.contains=String.prototype.contains||String.prototype.includes||(String.prototype.includes=,String.prototype.startsWith=String.prototype.startsWith||String.prototype.endsWith=String.prototype.endsWith||Array.prototype.find||(Array.prototype.find=,Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),Array.prototype.some||(Array.prototype.some=,window,document,CONTAINED_BAMX_OBJ),window,CONTAINED_BAMX_OBJ),window,CONTAINED_BAMX_OBJ),window,document,CONTAINED_BAMX_OBJ),window,document,CONTAINED_BAMX_OBJ),window,CONTAINED_BAMX_OBJ),window,CONTAINED_BAMX_OBJ),window,CONTAINED_BAMX_OBJ),window,document,CONTAINED_BAMX_OBJ);!);"use strict";unction _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _slicedToArray=),_get=function t(e,i,r){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,i);if(void 0===n){var a=Object.getPrototypeOf(e);return null===a?void 0:t(a,i,r)}if("value"in n)return n.value;var o=n.get;if(void 0!==o)return o.call(r)},_createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();!window,CONTAINED_BAMX_OBJ),(window,document,CONTAINED_BAMX_OBJ)(window,document,CONTAINED_BAMX_OBJ)(window,CONTAINED_BAMX_OBJ)(window,CONTAINED_BAMX_OBJ)(window,CONTAINED_BAMX_OBJ)(window,CONTAINED_BAMX_OBJ)(window,CONTAINED_BAMX_OBJ);"use strict"r _get,_createClass();!function(e,t){var i=function(i){function n(){var e;_classCallCheck(this,n);for(var t=arguments.length,i=Array(t),r=0;r<t;r++)i[r]=arguments[r];return _possibleConstructorReturn(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i)))}return _inherits(n,i),_createClass(n,[{key:"parseAuctionUrl",value:function(){var t=this.getElementLink(),i=/^https?:\/\/.*?shop-links.[^/]+\/(\d{19}|affiliate|[a-zA-Z0-9]{11})/;try{var n=t.href.match(i),r=t.href.match(/u1=([^&]*)/);e.BAMX_EVENT_DATA.shoplinkTracking[t.href]&&!n&&(n=e.BAMX_EVENT_DATA.shoplinkTracking[t.href].values().next().value.match(i),r=e.BAMX_EVENT_DATA.shoplinkTracking[t.href].values().next().value.match(/u1=([^&]*)/)),n?(this.auctionId=n[1],r&&(this.u1Param=r[1])):this.auctionId=t.hash.substring("#bamx-".length).match(/^(?:\d+|affiliate)$/)[0]}catch(e){}}},{key:"runAuction",value:function(){var e=this;this.getAuction()||(t.timer.logEvent("auction_start"),this.setAuction({startTime:t.lib.getCurrentDate(),endTime:null,response:this.apiRunAuction()})),this.getAuctionResponse().then)}},{key:"postAuction",value},{key:"onClick",value:function(){var i=this.getElementLink(),n=i.href,r=n;if(n.match(new RegExp("(api.bam-x.com|shop-links.site|staging-api.bam-x.com|shop-links.co)\\/link"))){var a=t.lib.getQueryParameter(n,"article_url"),l=t.lib.getQueryParameter(n,"article_name");a&&a!=e.BAMX_EVENT_DATA.clickmate[n].page_url?r=r.replace("article_url="+a,"article_url="+e.BAMX_EVENT_DATA.clickmate[n].page_url):a||(r=r+"&article_url="+encodeURIComponent(e.BAMX_EVENT_DATA.clickmate[n].page_url)),l&&"cnet"==l?r=r.replace("article_name="+l,"article_name="+e.BAMX_EVENT_DATA.clickmate[n].page_title):l?"string"!=typeof l&&(r=r.replace("article_name=","article_name="+e.BAMX_EVENT_DATA.clickmate[n].page_title)):r=r+"&article_name="+encodeURIComponent(e.BAMX_EVENT_DATA.clickmate[n].page_title)}i.setAttribute("href",r)}}]),n}(t.Link),n=function(i){function n(){var t;_classCallCheck(this,n);for(var i=arguments.length,r=Array(i),a=0;a<i;a++)r[a]=arguments[a];var l=_possibleConstructorReturn(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(r)));return e.BAMX_EVENT_DATA.shoplinkTracking={},e.BAMX_EVENT_DATA.clickmate={},l.isSinglePage=!0,l.linkmateEndpoint="https://links.release.narrativ.com/api/v2/smart_links/"+l.config.pub_id,l}return _inherits(n,i),_createClass(n,[{key:"postForSmartlinks",value},{key:"onDomMutation",value:function(){_get(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"onDomMutation",this).call(this),this.pageChanged()&&(t.core.initPageSession(),t.core.initUserSession(),this.resetPageImpression(),this.runAllClickmateLinks())}},{key:"rewriteLinks",value:function(i){var n=this;return new t.Promise(function(t){if(!e[i].smartlinks.length)return void t(null);var r=n.getRewriteData(i);n.rewriteEncodedLinks(r),t()})}},{key:"loadAndRunAllBamLinks",value:function(){var e=this;this.getAllBamLinkEls().forEach(function(t){return e.runBamLink(t)})}},{key:"runAllClickmateLinks",value:function(){var t=this;this.scanForClickmate().then(function(){return t.postToLinkmate()}).then(function(){t.rewriteLinks(t.linkmateKey),t.rewriteLinks(t.clickmateKey)}).then(function(){t.loadAndRunAllBamLinks(),e.NRTV_CLICKMATE_DATA.linkMapping=t.originalURLs})}},{key:"rewriteEncodedLinks",value:function(e){var t=this,i=this.getOriginalLinks(e),n=Object.keys(i);Array.from(document.querySelectorAll(this.getLinkmateSelector())).forEach(function(e){var r=t.getLinkmateLink(e);r.includes(t.clickmateLinkPattern)&&(r=new URL(e.href).searchParams.get("url")),n.indexOf(r)>-1?t.updateSmartlinkElement(e,i[r]):r&&"?"===r.charAt(r.length-1)&&n.indexOf(r.substring(0,r.length-1))>-1&&t.updateSmartlinkElement(e,i[r.substring(0,r.length-1)])})}},{key:"getLinkmateSelector",value:function(){return'div[id="page-'+e.location.href.split("/")[e.location.href.split("/").length-2]+'"] a'}},{key:"updateSmartlinkElement",value:function(t,i){var n=new URL(t.href).searchParams.get("u1");n&&(i=i+"/?u1="+n),this.originalURLs[i]=t.href,e.BAMX_EVENT_DATA.shoplinkTracking[t.href]?e.BAMX_EVENT_DATA.shoplinkTracking[t.href].add(""+i):e.BAMX_EVENT_DATA.shoplinkTracking[t.href]=new Set([""+i])}},{key:"getClickmateElems",value:function(){var t="page-"+e.location.href.split("/")[e.location.href.split("/").length-2];return Array.from(document.querySelectorAll('div[id="'+t+'"] a[href*="shop-links.co/link"]'))}},{key:"getAllBamLinkEls",value:function(){var t="page-"+e.location.href.split("/")[e.location.href.split("/").length-2],i=['div[id="'+t+'"] a[href*="bamx-"]','div[id="'+t+'"] a[href*="bamx:"]','div[id="'+t+'"] a[href*="shop-links.co/"]','div[id="'+t+'"] a[href*="shop-links.site/"]','div[id="'+t+'"] area[href*="shop-links.co/"]','div[id="'+t+'"] area[href*="shop-links.site/"]'],n=/^https?:\/\/.*?shop-links.[^/]+\/(\d{19}|affiliate|[a-zA-Z0-9]{11})/,r=/^#bamx(:|-)(\d+|affiliate)$/;return Array.from(document.querySelectorAll(i.join(","))).filter(function(t){return e.BAMX_EVENT_DATA.shoplinkTracking&&e.BAMX_EVENT_DATA.shoplinkTracking[t.href]?n.test(t.href)||r.test(t.hash)||n.test(e.BAMX_EVENT_DATA.shoplinkTracking[t.href].values().next().value):n.test(t.href)||r.test(t.hash)})}},{key:"getClickmateData",value:function(i){if(!i.match(new RegExp("(api.bam-x.com|shop-links.site|staging-api.bam-x.com|shop-links.co)\\/link")))return null;var n=t.lib.getQueryParameter(i,"url");if(!n||!t.lib.isValidUrl(n))return null;var r=t.lib.getQueryParameter(i,"article_url");if("string"==typeof r&&t.lib.isValidUrl(r)||(r=e.location.href),"string"==typeof r&&r.includes("#")&&(r=r.split("#")[0]),r.includes("https://www.cnet.com/search/"))return null;var a="1"===t.lib.getQueryParameter(i,"exclusive"),l=t.lib.getQueryParameter(i,"u1"),s=t.lib.getQueryParameter(i,"article_name");s&&"cnet"!=s||(s=document.title.replace(/ /g,"_")),"string"!=typeof s&&(s=document.title.replace(/ /g,"_")),e.BAMX_EVENT_DATA.clickmate[i]={page_url:r,page_title:s};var o={page_title:s,page_url:r,url:n,exclusive_match_requested:a,link_source:"clickmate"};return l&&(o.u1=l),o}},{key:"runBamLink",value:function(e){if(!e.getAttribute("data-bamx-link")){var i=t.lib.getRandomId();e.setAttribute("data-bamx-link",i);var n=new this.Link('[data-bamx-link="'+i+'"]',this.config.pub_id);n.run(),this.bamlinks.push(n)}}}]),n}(t.PublisherJsTag);t.CNETLink=i,t.CNETJsTag=n,t.lib.setClass("CNETLink",t.CNETLink),t.lib.setClass("CNETJsTag",t.CNETJsTag)}(window,CONTAINED_BAMX_OBJ),function(e,t){var i={merchant:null,publisher:{short_name:"CNET",slug:"cnet",pub_id:1313,full_name:"CNET",publisher_type:1,billing_platform:3,url:"https://www.cnet.com/",show_in_dashboard:!0,instant_pay_access:1,is_pilot:!1,reserve_cpc:"0.01",widget_options:{amp:!1,domains:[],linkmate:!0,jstag_disabled:!1,enable_external_script:!1,enable_verbose_logging:!1,record_external_clicks:!1},logo_url:"https://static.bam-x.com/assets/logos/publishers/cnet.png"},slug:"cnet",pub_id:1313,jstagClass:"CNETJsTag",linkClass:"CNETLink"};new(t.lib.getClass("JsTagLib"))(i).run()}(window,CONTAINED_BAMX_OBJ);

		if (window._bamDefine) {
			window.define = window._bamDefine;
		}

		window.BAMX.VERSION = window.BAMX.VERSION || {};
		window.BAMX.VERSION['35cd98142e2c663878526255e7604ff507591eb3'] = CONTAINED_BAMX_OBJ;
		window.BAMX.GITHASH = '35cd98142e2c663878526255e7604ff507591eb3';
		window.BAMX.get =;
	} catch (e) {
		try {
			if (CONTAINED_BAMX_OBJ.DEBUG) {
				console.error(e);
			}

		} catch (e2) {}
	}

})(window);
