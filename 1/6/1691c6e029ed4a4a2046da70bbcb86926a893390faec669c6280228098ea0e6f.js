(function(){var s = {};(function(){var e={};/*  Copyright The Closure Library Authors. SPDX-License-Identifier: Apache-2.0 */ var f=this||self;var g,k;a:{for(var l=["CLOSURE_FLAGS"],p=f,q=0;q<l.length;q++)if(p=p[l[q]],null==p){k=null;break a}k=p}var r=k&&k[610401301];g=null!=r?r:!1;var t,v=f.navigator;t=v?v.userAgentData||null:null;function w(d){return g?t?t.brands.some(function(a){return(a=a.brand)&&-1!=a.indexOf(d)}):!1:!1}function x(d){var a;a:{if(a=f.navigator)if(a=a.userAgent)break a;a=""}return-1!=a.indexOf(d)};function y(){return g?!!t&&0<t.brands.length:!1}function z(){return y()?w("Chromium"):(x("Chrome")||x("CriOS"))&&!(y()?0:x("Edge"))||x("Silk")};!x("Android")||z();z();!x("Safari")||z()||(y()?0:x("Coast"))||(y()?0:x("Opera"))||(y()?0:x("Edge"))||(y()?w("Microsoft Edge"):x("Edg/"))||y()&&w("Opera");var A=/#|$/;function B(d){var a=d.search(A),b;a:{for(b=0;0<=(b=d.indexOf("fmt",b))&&b<a;){var c=d.charCodeAt(b-1);if(38==c||63==c)if(c=d.charCodeAt(b+3),!c||61==c||38==c||35==c)break a;b+=4}b=-1}if(0>b)return null;c=d.indexOf("&",b);if(0>c||c>a)c=a;return decodeURIComponent(d.slice(b+4,-1!==c?c:0).replace(/\+/g," "))};function C(d,a,b){function c(){--D;if(0>=D){var h;(h=d.GooglebQhCsO)||(h={});var E=h[a];E&&(delete h[a],(h=E[0])&&h.call&&h())}}for(var D=b.length+1,u=0;u<b.length;u++){var m=B(b[u]),n=null;1!=m&&2!=m||!(m=d.document.getElementById("goog_conv_iframe"))||m.src||(n=m);n||(n=new Image);n.onload=c;n.src=b[u]}c()}var F=["ss_"],G=s||f;F[0]in G||"undefined"==typeof G.execScript||G.execScript("var "+F[0]); for(var H;F.length&&(H=F.shift());)F.length||void 0===C?G[H]&&G[H]!==Object.prototype[H]?G=G[H]:G=G[H]={}:G[H]=C;}).call(this);;s.ss_(window,'R1VLZUNJaXk2blVReV9HdGpBTToxNzA1NjIwMjg0NTYy',['https://www.google.com/pagead/1p-user-list/831224011/?random\x3d1705620284562\x26cv\x3d9\x26fst\x3d1705618800000\x26num\x3d1\x26label\x3dGUKeCIiy6nUQy_GtjAM\x26guid\x3dON\x26eid\x3d466465926\x26u_h\x3d1080\x26u_w\x3d1920\x26u_ah\x3d1080\x26u_aw\x3d1920\x26u_cd\x3d24\x26u_his\x3d1\x26u_tz\x3d60\x26u_java\x3dfalse\x26u_nplug\x3d0\x26u_nmime\x3d0\x26sendb\x3d1\x26frm\x3d0\x26url\x3dhttps%3A%2F%2Fkaitori.carsensor.net%2F\x26tiba\x3d%E8%BB%8A%E8%B2%B7%E5%8F%96%E3%83%BB%E5%A3%B2%E5%8D%B4%E3%83%BB%E6%9F%BB%E5%AE%9A%E3%81%AA%E3%82%89%E3%82%AB%E3%83%BC%E3%82%BB%E3%83%B3%E3%82%B5%E3%83%BC%EF%BD%9C%E4%B8%AD%E5%8F%A4%E8%BB%8A%E7%B0%A1%E5%8D%98%E4%B8%80%E6%8B%AC%E6%9F%BB%E5%AE%9A\x26async\x3d1\x26fmt\x3d3\x26is_vtc\x3d1\x26cid\x3dCAQSGwAvHhf_NG8nTBGDhJj2WGAzgvMbIthsUdgqvw\x26random\x3d119611218\x26resp\x3dGooglemKTybQhCsO\x26rmt_tld\x3d0\x26ipr\x3dy','https://www.google.es/pagead/1p-user-list/831224011/?random\x3d1705620284562\x26cv\x3d9\x26fst\x3d1705618800000\x26num\x3d1\x26label\x3dGUKeCIiy6nUQy_GtjAM\x26guid\x3dON\x26eid\x3d466465926\x26u_h\x3d1080\x26u_w\x3d1920\x26u_ah\x3d1080\x26u_aw\x3d1920\x26u_cd\x3d24\x26u_his\x3d1\x26u_tz\x3d60\x26u_java\x3dfalse\x26u_nplug\x3d0\x26u_nmime\x3d0\x26sendb\x3d1\x26frm\x3d0\x26url\x3dhttps%3A%2F%2Fkaitori.carsensor.net%2F\x26tiba\x3d%E8%BB%8A%E8%B2%B7%E5%8F%96%E3%83%BB%E5%A3%B2%E5%8D%B4%E3%83%BB%E6%9F%BB%E5%AE%9A%E3%81%AA%E3%82%89%E3%82%AB%E3%83%BC%E3%82%BB%E3%83%B3%E3%82%B5%E3%83%BC%EF%BD%9C%E4%B8%AD%E5%8F%A4%E8%BB%8A%E7%B0%A1%E5%8D%98%E4%B8%80%E6%8B%AC%E6%9F%BB%E5%AE%9A\x26async\x3d1\x26fmt\x3d3\x26is_vtc\x3d1\x26cid\x3dCAQSGwAvHhf_NG8nTBGDhJj2WGAzgvMbIthsUdgqvw\x26random\x3d119611218\x26resp\x3dGooglemKTybQhCsO\x26rmt_tld\x3d1\x26ipr\x3dy']);})();ion;var a=r.replace("@contentsquare/integration-","");n=a+"-"+o;var u="-contentsquare";i=new RegExp(u+"$").test(a),t=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),i||(u="-cap",i=new RegExp(u+"$").test(a),t=a.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),i)return{snippetBuildName:n,parameterName:t,snippetVersion:o}}(i);c&&(c.parameterName,a=c.snippetBuildName,u=c.snippetVersion),r((function(){window._uxa=window._uxa||[],CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push("VWO - AB Testing - v"+u);function e(e){!function(e,n,t){t=t||window;var r=e.split(".");if(1==r.length)o(e,n,t);else{var i=t,a=0;const e=function(){i=a>0?i[r[a-1]]:window,++a>=r.length?o(r[a-1],n,i):o(r[a-1],e,i)};e()}}("VWO",(function(){setTimeout((function(){r((function(){var e="",n="";VWO.push&&VWO.push(["onVariationApplied",function(t){r((function(){if(t){var r,o,i=t[1],a=t[2];void 0!==_vwo_exp[i].comb_n[a]&&["VISUAL_AB","VISUAL","SPLIT_URL"].indexOf(_vwo_exp[i].type)>-1&&(e=_vwo_exp[i].name,n=_vwo_exp[i].comb_n[a],e&&n&&(o=n,r="AB_VWO_"+(r=e),_uxa.push(["trackDynamicVariable",{key:r,value:o}])))}}),a)}])}),a)}),500)}))}var n=!1;_uxa.push(["afterPageView",function(t){r((function(){n||(n=!0,e())}),a)}])}),a)}]);!function(){"use strict";var t={d:function(n,i){for(var r in i)t.o(i,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:i[r]})},o:function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r:function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},n={};t.r(n),t.d(n,{get:function(){return gt},getRequestParameters:function(){return At}});var i={};t.r(i),t.d(i,{getRequestParameters:function(){return xu}});var r="cs-native-frame",e={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen"}};function s(t,n,i){var r=function(t,n){for(var i,r=t;r&&!(i=Object.getOwnPropertyDescriptor(r,n));)r=Object.getPrototypeOf(r);return i}(t,n);if(!r)return function(){return this[n]};switch(i){case"get":return r.get;case"set":return r.set;case"value":return r.value}}function u(t){Object.keys(e.constructors).forEach((function(n){window[e.constructors[n]]=t[n]instanceof Function&&null==t[n].prototype?t[n].bind(window):t[n]})),function(t){window.csquerySelector={1:t.Element.prototype.querySelector,9:t.Document.prototype.querySelector,11:t.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:t.Element.prototype.querySelectorAll,9:t.Document.prototype.querySelectorAll,11:t.DocumentFragment.prototype.querySelectorAll}}(t),("Prototype"in window||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))&&(window.csMutationObserver=window.WebKitMutationObserver||window.MutationObserver),o("csNode",e.nodeProperties,t.Node.prototype,"get"),o("csElement",e.elementProperties,t.Element.prototype,"get"),o("csElement",e.elementPropertiesValues,t.Element.prototype,"value",!1),o("csHTMLImageElement",e.imageProperties,t.HTMLImageElement.prototype,"set"),o("csEvent",e.eventProperties,t.Event.prototype,"get"),o("csNavigator",e.navigatorProperties,t.navigator,"value")}function o(t,n,i,r,e){void 0===e&&(e=!0),n.forEach((function(n){var u="string"!=typeof n&&"binding"in n,o=u?n.propertyName:n;(e||o in i)&&(window["".concat(t+o)]=s(i,o,r),u&&(window["".concat(t+o)]=window["".concat(t+o)].bind(n.binding)))}))}function h(t,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[t]=n}if(!function(){try{var t=function(){var t=document.createElement("iframe");t.id=r,t.setAttribute("hidden",""),t.setAttribute("title","Intentionally blank"),t.setAttribute("sandbox","allow-same-origin");var n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),Boolean(Element.prototype.attachShadow)){var i=n.attachShadow({mode:"closed"});return i.innerHTML=t.outerHTML,i.firstElementChild.contentWindow}return n.innerHTML=t.outerHTML,n.firstElementChild.contentWindow}();return!!t&&(window.CSPureWindow=t,u(window.CSPureWindow),!0)}catch(t){return h("Warning","failed to copy references from pure iframe: ".concat(t.message)),!1}}())try{u(window)}catch(Es){h("Critical","failed to copy references from window: ".concat(Es.message))}function c(t){return a(csString.prototype.toLowerCase.call(t.localName))}function a(t){return csString.prototype.replace.call(t,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}function f(t){return 1===t.nodeType}function v(t){return 3===t.nodeType}function l(t){return f(t)&&"source"===t.localName}function d(t){return null!==t&&f(t)&&"picture"===t.localName}function w(t){return f(t)&&"a"===t.localName}function y(t){return function(t){return f(t)&&"link"===t.localName}(t)&&-1!==csString.prototype.indexOf.call(t.rel,"stylesheet")}function p(t){return f(t)&&"img"===t.localName}function m(t){return f(t)&&"style"===t.localName}function g(t){return f(t)&&"input"===t.localName}function A(t){return f(t)&&"script"===t.localName}function S(t){return f(t)&&"ownerSVGElement"in t}function E(t){switch(t.nodeType){case 9:case 11:return!0;default:return!1}}function b(t){return 9===t.nodeType}function R(t){return E(t)&&"host"in t&&"mode"in t}function N(t){return f(t)&&!!csElementshadowRoot.apply(t)&&R(csElementshadowRoot.apply(t))}var T=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];var O="detached";function I(t){for(var n=t,i=[n];null!==csNodeparentNode.apply(n);)n=csNodeparentNode.apply(n),csArray.prototype.push.call(i,n);return k(n)&&csArray.prototype.push.call(i,O),{ancestors:i,selectionRoot:n}}function k(t){return B.isValidElement(t)}var C=window.csElementmatches||window.csElementmatchesSelector||window.csElementmozMatchesSelector||window.csElementmsMatchesSelector||window.csElementoMatchesSelector||window.csElementwebkitMatchesSelector,_=9;function P(t,n){return!!n&&csArray.prototype.some.call(n,(function(n){return C.call(t,n)}))}var x=[/\d{4}/,/^ember\d+$/],L="@",M="data-cs-override-id",D="data-cs-dynamic-id";function U(t,n,i,r){var e=r.dynamicIdRegex||null,s=r.dynamicElementNameRegex,u=c(t);s&&(s.test(t.localName)&&(u=csString.prototype.replace.call(u,s,"$1".concat(L))));if(function(t,n){var i=j(t);return i&&csString.prototype.match.call(i,/^[\w-]+$/)&&z(M,i,n)}(t,i)){var o=j(t);return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"[").concat(M,'="').concat(o,'"]')}}var h=function(t,n,i){if(!i.uniqueAttributes)return{success:!1};for(var r=0,e=i.uniqueAttributes;r<e.length;r++){var s=e[r],u=t.getAttribute(s);if(null!==u)if(z(s,u,n))return{attributeName:s,attributeValue:u,success:!0}}return{success:!1}}(t,i,r);if(h.success)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UA[").concat(h.attributeName,'="').concat(h.attributeValue,'"]')};var f=function(t,n,i){if(!i.uniqueCssSelectors)return;for(var r=0,e=i.uniqueCssSelectors;r<e.length;r++){var s=e[r];if(C.call(t,s)&&H(s,n))return s}return}(t,i,r);if(f)return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#UCS[").concat(f,"]")};var v=function(t){var n=t.getAttribute("id");return n?a(n):n}(t);if(function(t,n,i,r){return n&&!function(t){return null!==j(t)}(t)&&!function(t,n,i){return t.hasAttribute(D)||function(t,n){var i=!1;t&&n&&(i=n.test(t));return t&&(csArray.prototype.some.call(x,(function(n){return n.test(t)}))||i)}(n,i)}(t,n,r)&&function(t,n){return t&&z("id",t,n)}(n,i)}(t,v,i,e))return{hasUniqueIdentifier:!0,elementSelector:"".concat(u,"#").concat(v)};var l=function(t,n){if(!n.reliableSelectors)return;for(var i=0,r=n.reliableSelectors;i<r.length;i++){var e=r[i];if(C.call(t,e))return e}return}(t,r);if(l){var d=function(t,n,i){if(t===O||t.nodeType===_)return 0;for(var r=0,e=n.previousElementSibling;e;)C.call(e,i)&&(r+=1),e=e.previousElementSibling;return r}(n,t,l);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,"[").concat(l,"](").concat(d,")")}}var w=function(t,n,i){if(t===O||t.nodeType===_)return 0;for(var r=i.dynamicElementNameRegex,e=!!(null==r?void 0:r.test(n.localName)),s=c(n),u=0,o=n.previousElementSibling;o;)(c(o)===s||e&&(null==r?void 0:r.test(o.localName)))&&!P(o,i.reliableSelectors)&&(u+=1),o=o.previousElementSibling;return u}(n,t,r);return{hasUniqueIdentifier:!1,elementSelector:"".concat(u,":eq(").concat(w,")")}}function j(t){return t.getAttribute(M)}function z(t,n,i){try{return 1===window.csquerySelectorAll[i.nodeType].call(i,"[".concat(t,'="').concat(n,'"]')).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}function H(t,n){try{return 1===window.csquerySelectorAll[n.nodeType].call(n,t).length}catch(t){if("SyntaxError"!==t.name)throw t}return!1}var B,q=11;function F(t,n,i){var r=csArray.prototype.shift.call(t);if(0===t.length)return G(r,i);var e=U(r,t[0],n,i),s=e.elementSelector,u=e.hasUniqueIdentifier;if(!i.fullPath&&u){var o=t[t.length-1];return"".concat(G(o,i)).concat(s)}var h=F(t,n,i);return"".concat(h?"".concat(h,">"):"").concat(s)}function G(t,n){if(t===O)return"|detached|";if(t.host){var i=I(t.host),r=i.ancestors,e=i.selectionRoot;return"".concat(F(r,e,n),"|shadow-root|")}return t.nodeType===q?"|fragment|":""}!function(t){function n(t){return!!t&&"localName"in t&&"getAttribute"in t&&"hasAttribute"in t&&"parentNode"in t}function i(t){return t&&"jquery"in t&&1===t.length?t[0]:t}t.INVALID_ELEMENT="INVALID_ELEMENT",t.isValidElement=n,t.getElementPath=function(r,e){void 0===e&&(e={fullPath:!1,dynamicIdRegex:null});var s=i(r);if(s===document)return"";if(!n(s))return t.INVALID_ELEMENT;var u=I(s);return F(u.ancestors,u.selectionRoot,e)},t.getElementPathAndFirstAnchorParent=function(r,e){void 0===e&&(e={fullPath:!1,dynamicIdRegex:null});var s=i(r);if(s===document)return{path:"",firstAnchorParent:null};if(!n(s))return{path:t.INVALID_ELEMENT,firstAnchorParent:null};var u=function(t){for(var n=t,i=[n],r=null;null!==csNodeparentNode.apply(n);)null===r&&w(n)&&(r=n),csArray.prototype.push.call(i,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return k(n)&&csArray.prototype.push.call(i,O),{firstAnchorParent:r,ancestors:i,selectionRoot:n}}(s),o=u.firstAnchorParent;return{path:F(u.ancestors,u.selectionRoot,e),firstAnchorParent:o}}}(B||(B={})),window.CSPathComputation=window.CSPathComputation||B;var V=function(t,n){return V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},V(t,n)};function W(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}V(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var Y=function(){return Y=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},Y.apply(this,arguments)};function J(t,n,i,r){var e,s=arguments.length,u=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(u=(s<3?e(u):s>3?e(n,i,u):e(n,i))||u);return s>3&&u&&Object.defineProperty(n,i,u),u}function $(t,n,i,r){return new(i||(i=Promise))((function(e,s){function u(t){try{h(r.next(t))}catch(t){s(t)}}function o(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(u,o)}h((r=r.apply(t,n||[])).next())}))}function K(t,n){var i,r,e,s,u={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return s={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function o(s){return function(o){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,r&&(e=2&s[0]?r.return:s[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,s[1])).done)return e;switch(r=0,e&&(s=[2&s[0],e.value]),s[0]){case 0:case 1:e=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,r=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(e=u.trys,(e=e.length>0&&e[e.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!e||s[1]>e[0]&&s[1]<e[3])){u.label=s[1];break}if(6===s[0]&&u.label<e[1]){u.label=e[1],e=s;break}if(e&&u.label<e[2]){u.label=e[2],u.ops.push(s);break}e[2]&&u.ops.pop(),u.trys.pop();continue}s=n.call(t,u)}catch(t){s=[6,t],r=0}finally{i=e=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,o])}}}Object.create;function X(t,n,i){if(i||2===arguments.length)for(var r,e=0,s=n.length;e<s;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;var Z=Number.MAX_SAFE_INTEGER||9007199254740991;function Q(){}function tt(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}var nt=34164e6,it={percentage:function(){return Math.floor(1e4*Math.random())/100},boolean:function(t){return this.percentage()<t},integer:function(t){return void 0===t&&(t=Z),Math.floor(Math.random()*t)}},rt="function"==typeof Symbol?Symbol("json"):null;var et,st,ut=rt?function(t){if(t[rt])return t[rt];if(csArray.isArray(t)){if(0===t.length)return"[]";for(var n="["+ut(t[0]),i=1;i<t.length;i++)n+=","+ut(t[i]);return n+"]"}return t[rt]=csJSON.stringify(t)}:csJSON.stringify,ot=function(){function t(t){var n,i;this.trackerDomain=t.trackerDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||nt,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.apiErrors=Y({enabled:null!==(n=t.apiErrorsEnabled)&&void 0!==n?n:0},t.apiErrors),this.customErrors=Y({enabled:null!==(i=t.customErrorsEnabled)&&void 0!==i?i:0},t.customErrors),this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.t(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new RegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.t(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.t(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.malkaQuotaServiceDomain=t.malkaQuotaServiceDomain||null,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&""===t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new RegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions=Y(Y({},t.taskSchedulerOptions),{enabled:!!t.taskSchedulerOptions.enabled})),this.uxaDomain=t.uxaDomain,this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions)}return t.prototype.getTrackerUri=function(){return"".concat(this.i(),"://").concat(this.trackerDomain)},t.prototype.getRecordingUri=function(){return"".concat(this.i(),"://").concat(this.malkaRecordingDomain)},t.prototype.getQuotaServiceUri=function(){return"".concat(this.i(),"://").concat(this.malkaQuotaServiceDomain)},t.prototype.getLoggerUri=function(){return"".concat(this.i(),"://").concat(this.loggerDomain)},t.prototype.getStaticResourceManagerUri=function(){return"".concat(this.i(),"://").concat(this.staticResourceManagerDomain)},t.prototype.i=function(){return this.useHttps?"https":"http"},t.prototype.isProjectActive=function(){return 1===this.status},t.prototype.processOptionOverrides=function(t){var n=this;t&&t.forEach&&t.forEach((function(t){var i=t[0],r=t.slice(1);if("setOption"===i){var e=r[0],s=r[1];n.u(e,s)}}))},t.prototype.u=function(t,n){"trackerDomain"===t&&(this.trackerDomain=n),"loggerDomain"===t&&(this.loggerDomain=n),"malkaRecordingDomain"===t&&(this.malkaRecordingDomain=n),"malkaQuotaServiceDomain"===t&&(this.malkaQuotaServiceDomain=n),"staticResourceManagerDomain"===t&&(this.staticResourceManagerDomain=n),"minLogLevel"===t&&(this.minLogLevel=n),"useHttps"===t&&(this.useHttps=!!n),"isWebView"===t&&(this.isWebView=n)},t.prototype.t=function(t){return t?this.h(t):null},t.prototype.getRequestParameters=function(){return{pid:"".concat(this.projectId)}},t.prototype.updateDynamicFields=function(t,n){"emitDebugEvents"===t&&(this.emitDebugEvents=n),"minLogLevel"===t&&(this.minLogLevel=n)},t.prototype.h=function(t){try{var n=/^\/(.*)\/([gim]*)$/.exec(t);if(n){var i=n[1],r=n[2];return new RegExp("^".concat(i,"$"),r)}return new RegExp("^".concat(t,"$"))}catch(t){return null}},t.prototype.isHeaderCollectionActive=function(){var t,n;return this.apiErrors.collectStandardHeaders||!!(null===(t=this.apiErrors.validCustomHeaders)||void 0===t?void 0:t.length)||!!(null===(n=this.apiErrors.plainCustomHeaders)||void 0===n?void 0:n.length)},t}(),ht=function(){function t(t,n){this.A=t,this.S=n}return t.prototype.init=function(){this.R=this.A!==this.A.top,this.N=this.S.isWebView&&this.A===this.A.top,this.S.iframesTracking&&this.R||this.N?this.T=!1:this.T=!0},t.prototype.isInIframeContext=function(){return this.R},t.prototype.isTopWindowTracker=function(){return this.T},t.prototype.isInWebViewContext=function(){return this.N},t}();!function(t){t.debug="debug",t.warn="warn",t.error="error",t.critical="critical"}(et||(et={})),function(t){t.toQuery=function(t){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(t),(function(n){return"".concat(encodeURIComponent(n),"=").concat(encodeURIComponent(t[n]))})),"&")}}(st||(st={}));var ct=function(){function t(t,n){this.domainUri=t,this.path=n,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}return t.prototype.setRequestParametersProviders=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.requestParametersProviders=t},t.prototype.before=function(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)},t.prototype.after=function(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)},t.prototype.retrieveParameters=function(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,(function(t){return t.getRequestParameters()})),(function(t,n){return Y(Y({},t),n)})):{}},t}(),at=function(t){function n(n,i){return t.call(this,n,i)||this}return W(n,t),n.prototype.send=function(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,(function(t){return t()}));var t=this.retrieveParameters();this.O(t);var n=st.toQuery(t);this.I(n),csArray.prototype.forEach.call(this.afterRequestCallbacks,(function(t){return t()}))},n.prototype.I=function(t){var n=new window.Image(1,1);n.onload=Q,n.onerror=Q,csHTMLImageElementsrc.call(n,"".concat(this.domainUri).concat(this.path?"/".concat(this.path):"","?").concat(t))},n.prototype.O=function(t){t.r=csString.prototype.slice.call("".concat(Math.random()),2,8)},n}(ct),ft=function(){function t(t,n){this.k=t,this.C=n}return t.prototype.init=function(){this._=new at(this.k.getLoggerUri()),this._.setRequestParametersProviders(this,this.C)},t.prototype.send=function(t){this.P=t,this._.send()},t.prototype.getRequestParameters=function(){return{a:this.P.app,l:this.P.level,m:this.P.message,s:this.P.stacktrace}},t}(),vt=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,lt=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,dt="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",wt=new RegExp("(ey".concat(dt,"\\.ey").concat(dt,"\\.").concat(dt,")"),"g"),yt=/[45*][0-9*]{3}[ -]?[0-9*]{4}[ -]?[0-9*]{4}[ -]?[0-9*]{4}/g,pt=function(){function t(){}return t.prototype.anonymizePII=function(t){return t=this.anonymizeEmail(t)},t.prototype.anonymizeEmail=function(t){return"string"==typeof t&&lt.test(t)?csString.prototype.replace.call(t,vt,"CS_ANONYMIZED_EMAIL"):t},t.prototype.anonymizeCreditCard=function(t){return"string"==typeof t?csString.prototype.replace.call(t,yt,"###CS_ANONYMIZED_PII###"):t},t.prototype.anonymizeJwt=function(t){return csString.prototype.replace.call(t,wt,"CS_ANONYMIZED_JWT")},t.prototype.anonymizeFields=function(t,n){var i=this;return csArray.prototype.forEach.call(n,(function(n){t[n]=i.anonymizeEmail(t[n])})),t},t}(),mt="13.77.3";function gt(){return mt}function At(){return{v:mt}}var St=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};function Et(){return Math.floor(St()/1e3)}function bt(t,n){return 0===csString.prototype.lastIndexOf.call(t,n,0)}function Rt(t,n){return-1!==csString.prototype.indexOf.call(t,n,t.length-n.length)}var Nt=function(){function t(t,n){this.L=t,this.M=n}return t.prototype.getRequestParameters=function(){return Y(Y({d:"".concat(St()),p:this.M.anonymizePII(window.location.href)},this.L.getRequestParameters()),At())},t}();function Tt(t){return Ct(t)&&("number"==typeof t||t instanceof Number)&&!isNaN(t)}function Ot(t){return t===parseInt(t,10)}function It(t){return Ct(t)&&("string"==typeof t||t instanceof csString)}function kt(t){return"object"==typeof t}function Ct(t){return void 0!==t}function _t(t){return Ct(t)&&null!==t}function Pt(t){return"function"==typeof t}function xt(t){return t instanceof Element}function Lt(t){return t instanceof Error}var Mt,Dt,Ut="snippet-",jt="implementation-snippet-";!function(t){t.IMPLEMENTATION="implementation",t.DYNAMIC="dynamic"}(Mt||(Mt={})),function(t){t[t.debug=0]="debug",t[t.warn=1]="warn",t[t.error=2]="error",t[t.critical=3]="critical"}(Dt||(Dt={}));var zt=function(){function t(t,n,i){var r;this.D=n,this.M=new pt,this.U=Dt[et.warn],this.U=Dt[t.minLogLevel||et.warn],this._=i||new ft(t,new Nt(t,this.M)),this.j=((r={})[et.debug]=[],r[et.warn]=[],r[et.error]=[],r[et.critical]=[],r),this.H={implementation:{},dynamic:{}},this._.init()}return t.prototype.send=function(t,n,i){if(void 0===n&&(n=""),void 0===i&&(i=et.warn),this.B(i,n)){csArray.prototype.push.call(this.j[i],n||"");var r={message:this.q(t,n),stacktrace:this.F(t),app:"uxa",level:i};this._.send(r)}},t.prototype.q=function(t,n){var i=Lt(t)?this.M.anonymizePII(t.message||t.toString()):t;return n&&(i+=" ErrorCode: ".concat(n)),i},t.prototype.F=function(t){return Lt(t)?"".concat(t.stack||"No stacktrace"," ").concat(this.G()):this.G()},t.prototype.G=function(){var t=this.D.getVisitorService(),n=null==t?void 0:t.getVisitor();if(!n)return"No context";var i=this.D.getSessionService(),r=i&&i.getSession(),e={userId:n.id,sessionNumber:n.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(e)},t.prototype.B=function(t,n){if(Dt[t]<this.U)return!1;if(0===(null==n?void 0:csString.prototype.indexOf.call(n,jt,0)))return this.V(n,Mt.IMPLEMENTATION);if(0===(null==n?void 0:csString.prototype.indexOf.call(n,Ut,0)))return this.V(n,Mt.DYNAMIC);var i=this.j[t];return!(i.length>=5)&&(!n||!csArray.prototype.some.call(i,(function(t){return t===n})))},t.prototype.V=function(t,n){return t in this.H[n]?!(this.H[n][t]>=5)&&(this.H[n][t]+=1,!0):(this.H[n][t]=1,!0)},t}(),Ht="undefined"==typeof window,Bt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:process;function qt(t,n){return void 0!==Bt[t]?Bt[t]:n}var Ft=!Ht&&document.createElement("a"),Gt=/(:443|:80)$/;function Vt(t){return Ft?(Ft.href=t,Ft.href):""}function Wt(t){var n=$t(t);return null===n?"":decodeURIComponent(n.hostname)}function Yt(t,n){return csArray.prototype.some.call(n,(function(n){return Rt(t,".".concat(n))||t===n||""===n}))}function Jt(t){return csString.prototype.replace.call(t,Gt,"")}function $t(t){return Ft&&(bt(t,"http://")||bt(t,"https://"))?(Ft.href=t,{hash:Ft.hash,host:Jt(Ft.host),hostname:Ft.hostname,href:Ft.href,origin:Ft.origin?Ft.origin:Jt("".concat(Ft.protocol,"//").concat(Ft.host)),pathname:(n=Ft.pathname,"/"===n[0]?n:"/".concat(n)),port:Ft.port,protocol:Ft.protocol,search:Ft.search}):null;var n}var Kt,Xt,Zt,Qt,tn="CS_IFRAME_MESSAGE";!function(t){t.AfterPageView="afterPageView",t.GetSessionKey="getSessionKey"}(Kt||(Kt={})),function(t){t.Parent="parent",t.Child="child"}(Xt||(Xt={})),function(t){t.Discovery="discovery",t.Stop="stop",t.RecordingStatus="recordingStatus",t.RecordingEvent="recordingEvent",t.EndOfBufferedMessages="endOfBufferedMessages",t.ChildLogMessage="childLogMessage",t.AnalysisEvent="analysisEvent",t.JavascriptError="javascriptError",t.ApiError="apiError",t.Assets="assets",t.DetailedApiError="detailedApiError",t.EmerchandisingMessage="emerchandisingMessage",t.Commands="commands",t.IntegrationCallback="integrationCallback",t.StaticResource="staticResource",t.TrackingContextResultMessage="trackingContextResultMessage",t.TrackingContextRequestMessage="trackingContextRequestMessage",t.CustomError="customError"}(Zt||(Zt={})),function(t){t.buildBaseMessage=function(t,n,i,r){var e={type:t,from:n,pid:i,signature:tn};return void 0!==r&&r>=0&&(e.id=r),e},t.isMessageValid=function(t,n,i,r){var e=Wt(t.origin);return!!t.data&&!!t.data.type&&t.data.signature===tn&&t.data.from===n&&t.data.pid===i&&Yt(e,r)},t.sendPostMessage=function(t,n,i,r){r?t.postMessage(i,n,r):t.postMessage(i,n)},t.getNewChannelMessage=function(){return new MessageChannel},t.sendChannelMessage=function(t,n){t.postMessage(n)},t.closeChannelPort=function(t){t.close()}}(Qt||(Qt={}));var nn=function(){function t(t){this.L=t}return t.prototype.send=function(t,n,i){void 0===n&&(n=""),void 0===i&&(i=et.warn);var r={message:t,errorCode:n,level:i},e=Qt.buildBaseMessage(Zt.ChildLogMessage,Xt.Child,this.L.projectId);e.content=r,Qt.sendPostMessage(window.parent,"*",e)},t}(),rn=function(){function t(){}return t.prototype.setContext=function(t,n){this.W=t,this.Y=n},t.prototype.getVisitorService=function(){return this.W},t.prototype.getSessionService=function(){return this.Y},t}(),en=["t.contentsquare.net","clicktale"];window.addEventListener("error",(function(t){"string"!=typeof t.filename||!csArray.prototype.some.call(en,(function(n){return csString.prototype.indexOf.call(t.filename,n)>-1}))||csString.prototype.indexOf.call(t.filename,"blob")>-1&&(null==t.message?void 0:csString.prototype.indexOf.call(t.message,"importScripts"))>-1||sn.error("Uncaught jsError: filename: ".concat(t.filename," - lineno: ").concat(t.lineno," - colno: ").concat(t.colno," - message: ").concat(t.message," "))}));var sn=function(){function t(){}return t.whiteListFilename=function(t){csArray.prototype.push.call(en,t)},t.setStrategy=function(n){t.J=n},t.computeIsActive=function(n){t.$=it.boolean(n),t.$?t.K=it.boolean(10):t.K=!1},t.isLoggingActive=function(){return t.$},t.getStrategy=function(){return t.J},t.debug=function(n,i){void 0===i&&(i=""),t.$&&this.J.send(n,i,et.debug)},t.warn=function(n,i){void 0===i&&(i=""),t.$&&this.J.send(n,i,et.warn)},t.error=function(n,i){void 0===i&&(i=""),t.$&&this.J.send(n,i,et.error)},t.critical=function(n,i){void 0===i&&(i=""),t.$&&this.J.send(n,i,et.critical)},t.tryToExecute=function(t,n){var i=this;return function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];try{var s=n.apply(void 0,r);return Ct(window.Promise)&&s instanceof window.Promise?s.then((function(t){return t}),(function(n){return i.error(n,t)})):s}catch(n){try{i.error(n,t)}catch(t){}}}},t.isPerfLoggingActive=function(){return t.K},t.$=!1,t.K=!1,t}(),un={debug:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},warn:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},error:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]},critical:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]}};var on,hn,cn,an,fn=function(t){return function(n,i,r){var e=(null==i?void 0:i.toString())||"",s=t||"".concat(n.constructor&&n.constructor.name,".").concat(e);if(r){var u=r.value;r.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(t,n){return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];try{var e=n.apply(void 0,i);return Ct(window.Promise)&&e instanceof window.Promise?e.then((function(t){return t}),(function(n){return un.error(n,t)})):e}catch(n){try{un.error(n,t)}catch(t){}}}}(s,u.bind(this)).apply(void 0,t)}}}};!function(t){function n(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null}function i(n,i,e,s,u,o){var h=encodeURIComponent("".concat(i)),c=e===t.CURRENT_DOMAIN?void 0:e,a=r(s),f=a?";expires=".concat(a.toUTCString()):"",v=_t(c)?";domain=".concat(c):"",l="".concat(n,"=").concat(h).concat(f).concat(";path=/").concat(v);return Ct(u)&&u!==cn.NotSet&&(l="".concat(l,";SameSite=").concat(u)),Ct(o)&&o===an.Yes&&(l="".concat(l,";Secure")),document.cookie=l,!0}function r(t){return Tt(t)?new csDate(St()+t):t}function e(t,r){n(t)&&i(t,"",r,new csDate(0)),n(t)&&i(t,"",r,new csDate(0),cn.None,an.Yes)}t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.get=n,t.set=i,t.toExpireDate=r,t.remove=e,t.isCookiePresent=function(){return document.cookie.length>0},t.getRootDomain=function(t,r){var s="_cs_root-domain",u=n(s);if(null!==u&&"1"!==u)return u;for(var o=csString.prototype.split.call(window.location.hostname,"."),h=csArray.prototype.pop.call(o);o.length&&(null===u||"1"===u);)i(s,h=csArray.prototype.join.call([csArray.prototype.pop.call(o),h],"."),h,void 0,t,r),u=n(s);return e(s,h),h}}(on||(on={})),function(t){t.browserIsSafariV12=function(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}}(hn||(hn={})),function(t){t.None="None",t.Lax="Lax",t.NotSet="X"}(cn||(cn={})),function(t){t[t.Yes=1]="Yes",t[t.No=0]="No"}(an||(an={}));var vn=function(){function t(t,n,i){this.L=t,this.X=n,this.Z=i,this.tt=!1,this.nt=cn.NotSet,this.it=an.No}return t.prototype.getSameSiteFlag=function(){return this.nt},t.prototype.getSecureFlag=function(){return this.it},t.prototype.getDomain=function(){return this.et},t.prototype.getRootDomain=function(){return this.st},t.prototype.init=function(){if(!this.L.cookielessTrackingEnabled){var t=this.ut(),n=this.ot();this.tt=this.ht(t,n),this.tt?(this.nt=t,this.it=n):this.L.secureCookiesEnabled&&"https:"===this.X.getUrlProtocol()&&(this.it=an.Yes),this.st=this.ft(),this.et=this.vt(this.st)}},t.prototype.ht=function(n,i){return!hn.browserIsSafariV12()&&(on.set(t.COOKIE_TEST_FOR_SAME_SITE,"Test same site",t.CURRENT_DOMAIN,void 0,n,i),!!on.get(t.COOKIE_TEST_FOR_SAME_SITE)&&(on.remove(t.COOKIE_TEST_FOR_SAME_SITE,t.CURRENT_DOMAIN),!0))},t.prototype.ut=function(){return"http:"===this.X.getUrlProtocol()?cn.Lax:this.Z.isSameSiteNoneSecureNeeded()||this.L.crossDomainTracking?cn.None:cn.Lax},t.prototype.ot=function(){return"http:"===this.X.getUrlProtocol()?an.No:this.L.secureCookiesEnabled||this.L.crossDomainTracking||this.Z.isSameSiteNoneSecureNeeded()?an.Yes:an.No},t.prototype.isSameSiteSupported=function(){return this.tt},t.prototype.set=function(t,n,i){var r=on.toExpireDate(i);on.set(t,n,this.et,r,this.getSameSiteFlag(),this.getSecureFlag())},t.prototype.get=function(t){var n=new RegExp("(^|;)[ ]*".concat(t,"=([^;]*)")).exec(document.cookie);return n?decodeURIComponent(n[2]):null},t.prototype.delete=function(t,n){var i=n||this.et;on.remove(t,i)},t.prototype.ft=function(){var t=this.Z.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),n=t?cn.None:void 0,i=t?an.Yes:void 0;return on.getRootDomain(n,i)},t.prototype.vt=function(t){return this.L.allowSubdomains?t:on.CURRENT_DOMAIN},t.CURRENT_DOMAIN="CURRENT_DOMAIN",t.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",t}(),ln="_cs_t",dn=function(){function t(t,n){this.lt=t,this.L=n,this.wt=!1,this.yt=!1}return t.prototype.init=function(){if(!this.L.cookielessTrackingEnabled&&this.lt.isTopWindowTracker()&&"cookie"in document){if(!this.lt.isInIframeContext()&&on.isCookiePresent())return this.wt=!0,void(this.yt=!1);if(on.set(ln,"1",on.CURRENT_DOMAIN),null!==on.get(ln))return this.wt=!0,this.yt=!1,void on.remove(ln,on.CURRENT_DOMAIN);on.set(ln,"1",on.CURRENT_DOMAIN,void 0,cn.None,an.Yes),null!==on.get(ln)&&(this.wt=!0,this.yt=!0,on.remove(ln,on.CURRENT_DOMAIN))}},t.prototype.areCookiesEnabled=function(){return this.wt},t.prototype.isSameSiteNoneSecureNeeded=function(){return this.yt},t}();var wn,yn=function(){function t(t,n){this.L=t,this.Z=n}return t.prototype.canTrack=function(){return this.L.isProjectActive()&&this.gt()&&this.At()&&this.St()},t.prototype.canTrackInChild=function(){return this.L.isProjectActive()&&this.Et()&&(this.At()||this.bt())},t.prototype.St=function(){return this.L.cookielessTrackingEnabled?function(){var t="CSSessionStorageTest";try{return sessionStorage.setItem(t,t),sessionStorage.getItem(t)===t&&(sessionStorage.removeItem(t),!0)}catch(t){return!1}}():this.Z.areCookiesEnabled()},t.prototype.At=function(){return Yt(window.location.hostname,this.L.hostnames)},t.prototype.gt=function(){return!this.Rt()&&this.Nt()},t.prototype.Et=function(){return!this.Rt()&&this.Tt()},t.prototype.bt=function(){return tt(window.location.href,"about:srcdoc")&&"about:"===window.location.protocol&&""===window.location.hostname},t.prototype.Rt=function(){return"visibilityState"in document&&"prerender"===document.visibilityState},t.prototype.Nt=function(){return this.Ot()&&!!window.localStorage},t.prototype.Tt=function(){return this.Ot()},t.prototype.Ot=function(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window},t}(),pn=function(){function t(t){var n=this;this.It=!1,this.kt=new Map,this.Ct=new Map,this._t=new Map,this.Pt="CS_WORKER_SIGNATURE";var i="\n    const algorithm = ".concat(t.algorithm,";\n    const compressor = (").concat(t.getCompressorSourceCode(),")();\n    ").concat('!function(){"use strict";var e,t=function(){return t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function r(e,t,r,n){return new(r||(r=Promise))((function(o,s){function a(e){try{c(n.next(e))}catch(e){s(e)}}function i(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}c((n=n.apply(e,t||[])).next())}))}function n(e,t){var r,n,o,s,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}}Object.create,Object.create,function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(e||(e={}));var o,s=function(){function r(e){var t=this;this.queryParams={},this.headers={},this.handleRecoveredRequests=function(e){for(var r=0,n=e;r<n.length;r++){var o=n[r],s=o.metadata,a=o.events;t.send(a,s)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}return r.prototype.setQueryParams=function(e){var t=this;Object.keys(e).forEach((function(r){t.queryParams[r]=e[r]}))},r.prototype.removeQueryParams=function(e){var t=this;e?e.forEach((function(e){delete t.queryParams[e]})):this.queryParams={}},r.prototype.send=function(r,n){var o=this,s=n||t({},this.queryParams),a=!("ct"in s),i="string"!=typeof r&&!this.isArrayBuffer(r);"ct"in s||(this.compressionOpts&&a?s.ct=this.compressionOpts.compressionType:s.ct=e.UNCOMPRESSED);var c=i?JSON.stringify(r):r,u=Object.keys(s).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(s[e]))})).join("&"),h="".concat(this.endpoint,"?").concat(u);this.compressionOpts&&a&&"string"==typeof c?this.compressionOpts.compressor(c,this.compressionOpts.compressionOutputType,(function(e){return o.doSend(h,s,e)})):this.doSend(h,s,c)},r.prototype.onLoad=function(e){this.onLoadCallback=e},r.prototype.onError=function(e){this.onErrorCallback=e},r.prototype.onTimeout=function(e,t){this.onTimeoutCallback=e,this.timeout=t},r.prototype.abort=function(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()},r.prototype.setRequestHeader=function(e,t){this.headers[e]=t},r.prototype.getQueryParams=function(){return this.queryParams},r.prototype.isArrayBuffer=function(e){return e&&void 0!==e.byteLength},r.prototype.doSend=function(e,t,r){var n=this,o=new XMLHttpRequest,s=Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&");o.open("POST",e),o.onload=function(){if(n.recoveryStorage&&n.recoveryStorage.recover(n.handleRecoveredRequests),n.onLoadCallback){var e={params:t,responseText:o.responseText,status:o.status};n.onLoadCallback(e)}},o.onerror=function(){n.recoveryStorage&&n.recoveryStorage.save({key:s,metadata:t,events:r}),n.onErrorCallback&&n.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(o.timeout=this.timeout,o.ontimeout=function(){n.onTimeoutCallback()}),this.abortCurrentXhrCall=function(){return o.abort()},Object.keys(this.headers).forEach((function(e){o.setRequestHeader(e,n.headers[e])})),o.send(r)},r}(),a=function(){function e(e){this.maxStoredBytes=e,this.storageBytesUsed=0}return e.prototype.addString=function(e){this.storageBytesUsed+=2*e.length},e.prototype.addArrayBuffer=function(e){this.storageBytesUsed+=e.byteLength},e.prototype.isThresholdReached=function(){return this.storageBytesUsed>this.maxStoredBytes},e.prototype.reset=function(){this.storageBytesUsed=0},e}(),i=function(){function e(e){this.ramStorage={},this.byteSizeCounter=new a(e)}return e.prototype.save=function(e){var t=e.key,r=e.metadata,n=e.events;this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(t),"string"==typeof n?this.byteSizeCounter.addString(n):this.byteSizeCounter.addArrayBuffer(n),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[t]={metadata:r,events:n}))},e.prototype.recover=function(e){var t=this,r=[];this.getStorageKeys().forEach((function(e){var n=t.ramStorage[e];void 0!==n&&(delete n.metadata.datatype,r.push(n),t.removeItem(e))})),0!==r.length&&(e(r),this.byteSizeCounter.reset())},e.prototype.getStorageKeys=function(){return Object.keys(this.ramStorage)},e.prototype.removeItem=function(e){delete this.ramStorage[e]},e}();!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));var c=function(){function e(e,t,r){this.storageName=e,this.onOpenError=r,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new a(t),this.init()}return e.prototype.init=function(){return r(this,void 0,void 0,(function(){return n(this,(function(e){switch(e.label){case 0:return[4,this.openCache()];case 1:return e.sent(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer),[2]}}))}))},e.prototype.flushToBeSavedBuffer=function(){var e=this;this.toBeSavedBuffer.forEach((function(t){e.save(t)})),this.toBeSavedBuffer=[]},e.prototype.save=function(e){return r(this,void 0,void 0,(function(){var t,r,s;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.cacheState===o.OPEN_IN_PROGRESS?(this.toBeSavedBuffer.push(e),[2]):this.cacheState!==o.READY||this.byteSizeCounter.isThresholdReached()?[2]:(t=e.key,r=e.metadata,s=e.events,this.byteSizeCounter.addString(t),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()?[2]:[4,this.cache.put("".concat(this.origin,"/").concat(t),new Response(s,{headers:r}))]);case 1:case 2:return n.sent(),[3,3];case 3:return[2]}}))}))},e.prototype.recover=function(e){return r(this,void 0,void 0,(function(){return n(this,(function(t){switch(t.label){case 0:return this.cache?[3,2]:[4,this.openCache()];case 1:if(t.sent(),this.cacheState!==o.READY)return[2];t.label=2;case 2:return this.doRecover(e),[2]}}))}))},e.prototype.openCache=function(){return r(this,void 0,void 0,(function(){var e;return n(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),this.cacheState=o.OPEN_IN_PROGRESS,e=this,[4,self.caches.open("".concat(this.context).concat(this.storageName))];case 1:return e.cache=t.sent(),this.cacheState=o.READY,[3,3];case 2:return t.sent(),this.cacheState=o.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},e.prototype.doRecover=function(e){return r(this,void 0,void 0,(function(){var t,r,o,s,a=this;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,6,7]),this.recoveryInProgress++,this.recoveryInProgress>1?[2]:[4,this.cache.keys()];case 1:return 0===(t=n.sent()).length?[2]:[4,this.cache.matchAll()];case 2:return r=n.sent(),o=r.map((function(e){var t={};e.headers.forEach((function(e,r){t[r]=e})),delete t["content-type"];var r=t.datatype;return delete t.datatype,"json"===r||"base64"===r?e.text().then((function(e){return{metadata:t,events:e}})):e.arrayBuffer().then((function(e){return{metadata:t,events:e}}))})),[4,Promise.all(o)];case 3:return s=n.sent(),[4,Promise.all(t.map((function(e){return a.cache.delete(e)})))];case 4:return n.sent(),e(s),this.byteSizeCounter.reset(),[3,7];case 5:return n.sent(),[3,7];case 6:return this.recoveryInProgress--,[7];case 7:return[2]}}))}))},e}(),u=function(){function e(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}return e.prototype.save=function(e){this.storageStrategy.save(e)},e.prototype.recover=function(e){this.storageStrategy.recover(e)},e.prototype.setCachesStrategy=function(t){var r=this;this.storageStrategy=new c(t,e.MAX_SIZE,(function(e){r.setRamStorageStrategy(e)}))},e.prototype.setRamStorageStrategy=function(t){var r=this;this.storageStrategy=new i(e.MAX_SIZE),t&&t.forEach((function(e){r.storageStrategy.save(e)}))},e.MAX_SIZE=16777216,e}();!function(){var e="CS_WORKER_SIGNATURE",t=new Map,o=new u("csPersisted");function a(r){var n;if((n=r)&&n.WORKER_SIGNATURE===e)switch(r.type){case"CreatePostRequest":var a=r.endpoint,i=r.compressionOutputType,c=r.useRetry,u={endpoint:a};i&&(u.compressionOpts={compressor:compressor,compressionOutputType:i,compressionType:algorithm}),c&&(u.recoveryStorage=o);var h=new s(u);t.set(a,h),h.onLoad((function(t){var r={type:"onLoad",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)})),h.onError((function(t){var r={type:"onError",endpoint:a,response:t,WORKER_SIGNATURE:e};self.postMessage(r)}));break;case"SetQueryParams":var p=r.endpoint,f=r.queryParams;(h=t.get(p))&&h.setQueryParams(f);break;case"RemoveQueryParams":p=r.endpoint,f=r.queryParams,(h=t.get(p))&&h.removeQueryParams(f);break;case"Send":p=r.endpoint;var y=r.payload;f=r.queryParams,(h=t.get(p))&&h.send(y,f);break;case"Abort":p=r.endpoint,(h=t.get(p))&&h.abort();break;case"SetHeader":p=r.endpoint;var d=r.headerName,l=r.headerValue;(h=t.get(p))&&h.setRequestHeader(d,l);break;case"SetTimeout":var v=r.endpoint,S=r.timeout;(h=t.get(v))&&h.onTimeout((function(){var t={type:"onTimeout",endpoint:v,WORKER_SIGNATURE:e};self.postMessage(t)}),S);break;default:throw new Error(JSON.stringify(r))}}self.addEventListener("message",(function(e){e.data.getReader?function(e,t){r(this,void 0,void 0,(function(){var r,o,s,a;return n(this,(function(n){switch(n.label){case 0:r=e.getReader(),n.label=1;case 1:return[4,r.read()];case 2:return o=n.sent(),s=o.done,a=o.value,s?[3,3]:(t(a),[3,1]);case 3:return[2]}}))}))}(e.data,a):a(e.data)}))}()}();');try{this.xt=this.Lt(i),this.It=!0,this.Mt()&&(this.Dt=new ReadableStream({start:function(t){n.Ut=t}}),this.xt.postMessage(this.Dt,[this.Dt]),this.postMessage=this.postMessageAsTransferable)}catch(t){this.It=!1}}return t.prototype.postMessage=function(t){t.WORKER_SIGNATURE=this.Pt,this.xt.postMessage(t)},t.prototype.postMessageAsTransferable=function(t){t.WORKER_SIGNATURE=this.Pt,this.Ut.enqueue(t)},t.prototype.Lt=function(t){var n=this,i=window.csURL||window.webkitURL,r=window.Blob,e=window.Worker,s=new r([t],{type:"application/javascript"}),u=i.createObjectURL(s);sn.whiteListFilename(u);var o=new e(u);return o.onmessage=function(t){var i=t.data,r=i.type,e=i.endpoint;if(i.WORKER_SIGNATURE===n.Pt)if("onLoad"===r){var s=t.data.response;(u=n.kt.get(e))&&u(s)}else if("onError"===r){s=t.data.response;(u=n.Ct.get(e))&&u(s)}else if("onTimeout"===r){var u;(u=n._t.get(e))&&u()}},o},t.prototype.registerOnLoadCallback=function(t,n){this.kt.set(t,n)},t.prototype.registerOnErrorCallback=function(t,n){this.Ct.set(t,n)},t.prototype.registerOnTimeoutCallback=function(t,n){this._t.set(t,n)},t.prototype.isSupported=function(){return this.It},t.prototype.Mt=function(){try{var t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch(t){return!1}},t}(),mn=function(){function t(t){this.jt={},this.zt=t.endpoint,this.Ht=t.networkWorker,this.Bt=t.compressionOutputType,this.qt=t.useRetry,this.Ht.postMessage({type:"CreatePostRequest",endpoint:this.zt,compressionOutputType:this.Bt,useRetry:this.qt})}return t.prototype.setQueryParams=function(t){var n=this;this.Ht.postMessage({type:"SetQueryParams",endpoint:this.zt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),(function(i){n.jt[i]=t[i]}))},t.prototype.getQueryParams=function(){return this.jt},t.prototype.removeQueryParams=function(t){var n=this;this.Ht.postMessage({type:"RemoveQueryParams",endpoint:this.zt,queryParams:t}),t&&csArray.prototype.forEach.call(t,(function(t){delete n.jt[t]}))},t.prototype.send=function(t,n){this.Ht.postMessage({type:"Send",endpoint:this.zt,payload:t,queryParams:n})},t.prototype.abort=function(){this.Ht.postMessage({type:"Abort",endpoint:this.zt})},t.prototype.onLoad=function(t){this.Ht.registerOnLoadCallback(this.zt,t)},t.prototype.onError=function(t){this.Ht.registerOnErrorCallback(this.zt,t)},t.prototype.setRequestHeader=function(t,n){this.Ht.postMessage({type:"SetHeader",endpoint:this.zt,headerName:t,headerValue:n})},t.prototype.onTimeout=function(t,n){this.Ht.registerOnTimeoutCallback(this.zt,t),this.Ht.postMessage({type:"SetTimeout",endpoint:this.zt,timeout:n})},t}();!function(t){t.UNCOMPRESSED="0",t.GZIP="2"}(wn||(wn={}));var gn,An,Sn,En,bn=function(t){this.onError=t},Rn=function(){function t(t){var n=this;this.jt={},this.Ft={},this.Gt=function(t){for(var i=0,r=t;i<r.length;i++){var e=r[i],s=e.metadata,u=e.events;n.send(u,s)}},this.zt=t.endpoint,this.Vt=t.compressionOpts,this.Wt=t.recoveryStorage,this.Wt&&this.Wt.recover(this.Gt)}return t.prototype.setQueryParams=function(t){var n=this;Object.keys(t).forEach((function(i){n.jt[i]=t[i]}))},t.prototype.removeQueryParams=function(t){var n=this;t?t.forEach((function(t){delete n.jt[t]})):this.jt={}},t.prototype.send=function(t,n){var i=this,r=n||Y({},this.jt),e=!("ct"in r),s="string"!=typeof t&&!this.Yt(t);"ct"in r||(this.Vt&&e?r.ct=this.Vt.compressionType:r.ct=wn.UNCOMPRESSED);var u=s?JSON.stringify(t):t,o=Object.keys(r).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(r[t]))})).join("&"),h="".concat(this.zt,"?").concat(o);this.Vt&&e&&"string"==typeof u?this.Vt.compressor(u,this.Vt.compressionOutputType,(function(t){return i.Jt(h,r,t)})):this.Jt(h,r,u)},t.prototype.onLoad=function(t){this.$t=t},t.prototype.onError=function(t){this.Kt=t},t.prototype.onTimeout=function(t,n){this.Xt=t,this.Zt=n},t.prototype.abort=function(){this.Qt&&this.Qt()},t.prototype.setRequestHeader=function(t,n){this.Ft[t]=n},t.prototype.getQueryParams=function(){return this.jt},t.prototype.Yt=function(t){return t&&void 0!==t.byteLength},t.prototype.Jt=function(t,n,i){var r=this,e=new XMLHttpRequest,s=Object.keys(n).map((function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(n[t]))})).join("&");e.open("POST",t),e.onload=function(){if(r.Wt&&r.Wt.recover(r.Gt),r.$t){var t={params:n,responseText:e.responseText,status:e.status};r.$t(t)}},e.onerror=function(){r.Wt&&r.Wt.save({key:s,metadata:n,events:i}),r.Kt&&r.Kt({params:n})},this.Zt&&this.Xt&&(e.timeout=this.Zt,e.ontimeout=function(){r.Xt()}),this.Qt=function(){return e.abort()},Object.keys(this.Ft).forEach((function(t){e.setRequestHeader(t,r.Ft[t])})),e.send(i)},t}(),Nn=function(){function t(t){this.tn=t,this.Ht=new pn(this.tn)}return t.prototype.create=function(t,n,i,r){if(this.Ht.isSupported()&&n)return new mn({networkWorker:this.Ht,endpoint:t,compressionOutputType:i,useRetry:!!r});var e=i?{compressor:this.tn.compress,compressionOutputType:i,compressionType:this.tn.algorithm}:void 0;return new Rn({endpoint:t,compressionOpts:e,recoveryStorage:r})},t}(),Tn=function(){function t(t,n,i,r,e){this.W=t,this.Y=n,this.nn=i,this.rn=r,this.L=e}return t.prototype.get=function(){return{exclusion:this.nn.getAppliedTrackingDraw(),visitor:this.W.getVisitor(),session:this.Y.getSession(),cvars:this.rn.getCustomVariablesSession()}},t.prototype.apply=function(t){t&&(t.exclusion?this.exclude():this.include(t))},t.prototype.exclude=function(){this.nn.exclude(this.L),this.W.removeVisitor(),this.Y.removeSession(),this.rn.removeCustomVariablesSession()},t.prototype.include=function(t){this.nn.removeExclusion(),this.W.setVisitor(t.visitor),t.session?this.Y.setSession(t.session):this.Y.removeSession(),t.cvars?this.rn.setCustomVariableSession(t.cvars):this.rn.removeCustomVariablesSession()},t}();!function(t){t[t.MUTATION_INSERT=1]="MUTATION_INSERT",t[t.MUTATION_REMOVE=2]="MUTATION_REMOVE",t[t.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",t[t.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",t[t.INITIAL_DOM=5]="INITIAL_DOM",t[t.SCROLL=6]="SCROLL",t[t.CLICK=8]="CLICK",t[t.RESIZE=9]="RESIZE",t[t.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",t[t.INPUT_SELECT=11]="INPUT_SELECT",t[t.INPUT_TEXT=12]="INPUT_TEXT",t[t.HASH_CHANGE=13]="HASH_CHANGE",t[t.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",t[t.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",t[t.MOUSE_OVER=16]="MOUSE_OVER",t[t.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",t[t.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",t[t.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",t[t.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",t[t.ATTACH_SHADOW=22]="ATTACH_SHADOW",t[t.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",t[t.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",t[t.PAGE_EVENT=27]="PAGE_EVENT",t[t.API_ERROR=28]="API_ERROR",t[t.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",t[t.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",t[t.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",t[t.KEY_DOWN=32]="KEY_DOWN",t[t.KEY_UP=33]="KEY_UP",t[t.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",t[t.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",t[t.USER_IDENTIFIER=38]="USER_IDENTIFIER",t[t.TOUCH_START=41]="TOUCH_START",t[t.TOUCH_MOVE=42]="TOUCH_MOVE",t[t.TOUCH_END=43]="TOUCH_END",t[t.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",t[t.POINTER_DOWN=47]="POINTER_DOWN",t[t.POINTER_MOVE=48]="POINTER_MOVE",t[t.POINTER_UP=49]="POINTER_UP",t[t.CUSTOM_ERROR=50]="CUSTOM_ERROR",t[t.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",t[t.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",t[t.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",t[t.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",t[t.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",t[t.SCREEN_RESIZE=65]="SCREEN_RESIZE",t[t.RESOURCE_HASHES=66]="RESOURCE_HASHES",t[t.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",t[t.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",t[t.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",t[t.TEXT_REF=73]="TEXT_REF",t[t.TOUCH_CANCEL=74]="TOUCH_CANCEL"}(gn||(gn={})),function(t){t[t.RECORDING_CONSENT_FOR_SESSION_GRANTED=1]="RECORDING_CONSENT_FOR_SESSION_GRANTED",t[t.RECORDING_CONSENT_FOR_SESSION_WITHDRAWN=2]="RECORDING_CONSENT_FOR_SESSION_WITHDRAWN"}(An||(An={})),function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Fourth=3]="Fourth",t[t.Fifth=4]="Fifth"}(Sn||(Sn={})),function(t){t[t.SWIPE=0]="SWIPE",t[t.PINCH_IN=1]="PINCH_IN",t[t.PINCH_OUT=2]="PINCH_OUT",t[t.LONG_PRESS=3]="LONG_PRESS",t[t.TAP=4]="TAP",t[t.DOUBLE_TAP=5]="DOUBLE_TAP"}(En||(En={}));function On(t,n){void 0===n&&(n=true),t.boundElement.addEventListener(t.type,t.listener,n)}function In(t,n){void 0===n&&(n=true),t.boundElement.removeEventListener(t.type,t.listener,n)}function kn(t,n){void 0===n&&(n=0);var i=Math.pow(10,n);return Math.round(t*i)/i}var Cn=function(t,n){return Cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},Cn(t,n)};function _n(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}Cn(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var Pn=function(){return Pn=Object.assign||function(t){for(var n,i=1,r=arguments.length;i<r;i++)for(var e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t},Pn.apply(this,arguments)};function xn(t,n,i,r){var e,s=arguments.length,u=s<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,n,i,r);else for(var o=t.length-1;o>=0;o--)(e=t[o])&&(u=(s<3?e(u):s>3?e(n,i,u):e(n,i))||u);return s>3&&u&&Object.defineProperty(n,i,u),u}Object.create;function Ln(t,n,i){if(i||2===arguments.length)for(var r,e=0,s=n.length;e<s;e++)!r&&e in n||(r||(r=Array.prototype.slice.call(n,0,e)),r[e]=n[e]);return t.concat(r||Array.prototype.slice.call(n))}Object.create;"function"==typeof SuppressedError&&SuppressedError;function Mn(t,n){"number"==typeof n&&(n={wait:n});var i,r=n.wait;if(n.ignoreThrottledCalls){var e=0;return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var s=St();if(s-e>r)return e=s,t.apply(this,n)}}var s,u=[],o=null,h=0,c=function(){h=St(),o=null,s=t.apply(i,u)},a=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var a=St(),f=r-(a-h);return i=null!=this?this:window,u=Ln([],n,!0),f<=0||f>r?(h=a,s=t.apply(i,u),o?(window.clearTimeout(o),o=null):u=[]):o||(o=window.setTimeout(c,f)),s};return a.cancel=function(){o&&(window.clearTimeout(o),h=0,o=null,u=[])},a.flushPending=function(){o&&(window.clearTimeout(o),c())},a}var Dn,Un;!function(t){t[t.SPACE=0]="SPACE",t[t.ENTER=1]="ENTER",t[t.BACKSPACE=2]="BACKSPACE",t[t.DELETE=3]="DELETE",t[t.ARROWUP=4]="ARROWUP",t[t.ARROWDOWN=5]="ARROWDOWN",t[t.ARROWLEFT=6]="ARROWLEFT",t[t.ARROWRIGHT=7]="ARROWRIGHT",t[t.CAPSLOCK=8]="CAPSLOCK",t[t.SHIFT=9]="SHIFT",t[t.TAB=10]="TAB",t[t.ALPHANUMERICAL=11]="ALPHANUMERICAL",t[t.ESCAPE=12]="ESCAPE",t[t.END=13]="END",t[t.ALT=14]="ALT",t[t.CTRL=15]="CTRL",t[t.META=16]="META"}(Dn||(Dn={})),function(t){t[t.COPY=0]="COPY",t[t.CUT=1]="CUT",t[t.PASTE=2]="PASTE"}(Un||(Un={}));var jn=function(){function t(){}return t.isEmpty=function(){return 0===t.en.length},t.add=function(n){var i;(i=csArray.prototype.push).call.apply(i,X([t.en],n,!1))},t.getAll=function(){return t.en},t.clear=function(){t.en=[]},t.en=[],t}(),zn=50,Hn=.1;var Bn=!1;var qn=[],Fn=[];var Gn=function(t){return function(n,i,r){var e=r.value;r.value=function(){if(!Bn)return r.value=e,e.apply(this,arguments);!function(t){csArray.prototype.push.call(qn,t),performance.mark("".concat(t,"-start"))}(t);var n=e.apply(this,arguments);return function(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>=Hn&&csArray.prototype.push.call(Fn,{mName:t,mDuration:+i.toFixed(2)}),csArray.prototype.pop.call(qn),0===qn.length&&(i>zn&&jn.add(Fn),Fn=[])}}(t),n}}},Vn=function(t){return function(n,i,r){var e=r.value;r.value=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(!Bn)return r.value=e,e.apply(this,n);!function(t){performance.mark("".concat(t,"-start"))}(t);var s=e.apply(this,n);return s.then((function(){!function(t){var n=performance.measure(t,"".concat(t,"-start"));if(n){var i=n.duration;i>zn&&jn.add([{mName:t,mDuration:+i.toFixed(2)}])}}(t)})),s}}};function Wn(t){var n=csEventtarget.apply(t);return n&&f(n)&&csElementshadowRoot.apply(n)&&t.composedPath?t.__csOriginalTarget||t.composedPath()[0]:n}function Yn(){return function(t,n,i){var r=i.value;i.value=function(t,n){!1===(null==t?void 0:t.isTrusted)&&Yn.enabled||r.call(this,t,n)}}}Yn.enabled=!0;var Jn,$n=!!window.chrome,Kn="data-cs-scroll-container";!function(t){t.isEventOnScrollContainer=function(t){return!!(_t(t)&&function(t){try{if(_t(csEventtarget.apply(t)))return!0}catch(t){}return!1}(t)&&xt(csEventtarget.apply(t))&&null!==csEventtarget.apply(t).getAttribute(Kn))},t.getScrollContainer=function(){return window.csquerySelector[document.nodeType].call(document,"[".concat(Kn,"]"))}}(Jn||(Jn={}));var Xn=function(){function t(n,i,r,e){var s=this;this.un=n,this.hn=i,this.cn=r,this.an=e,this.fn=!1,this.vn=new Set,this.ln=[],this.dn=[{type:"pointerup",listener:function(t){return s.pointerUpListener(t)},boundElement:document},{type:"pointermove",listener:function(t){return s.pointerMoveListener(t)},boundElement:document},{type:"pointerdown",listener:function(t){return s.pointerDownListener(t)},boundElement:document}],this.wn=[{type:"touchstart",listener:function(t){return s.touchStartListener(t)},boundElement:document},{type:"touchmove",listener:function(t){return s.touchMoveListener(t)},boundElement:document},{type:"touchend",listener:function(t){return s.touchEndCancelListener(t)},boundElement:document},{type:"touchcancel",listener:function(t){return s.touchEndCancelListener(t)},boundElement:document}],this.yn=[{type:"click",listener:function(t){return s.clickListener(t)},boundElement:document},{type:"keyup",listener:this.un.on(t.mn,(function(t){return s.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:this.un.on(t.gn,(function(t){return s.inputTextListener(t)})),boundElement:document},{type:"keyup",listener:function(t){return s.keyUpListener(t)},boundElement:document},{type:"keydown",listener:function(t){return s.keyDownListener(t)},boundElement:document},{type:"copy",listener:function(t){return s.copyListener(t)},boundElement:document},{type:"cut",listener:function(t){return s.cutListener(t)},boundElement:document},{type:"paste",listener:function(t){return s.pasteListener(t)},boundElement:document},{type:"change",listener:this.un.on(t.An,(function(t){return s.inputCheckableListener(t)})),boundElement:document},{type:"change",listener:this.un.on("select",(function(t){return s.inputSelectListener(t)})),boundElement:document},{type:"change",listener:this.un.on(t.gn,(function(t){return s.inputTextListener(t)})),boundElement:document},{type:"scroll",listener:function(t){return s.scrollListener(csEventtarget.apply(t))},boundElement:document},{type:"mouseover",listener:function(t){return s.mouseOverListener(t)},boundElement:document}],this.Sn=[{type:"change",listener:this.un.on(t.An,(function(t){return s.inputCheckableListener(t)}))},{type:"change",listener:this.un.on("select",(function(t){return s.inputSelectListener(t)}))},{type:"change",listener:this.un.on(t.gn,(function(t){return s.inputTextListener(t)}))},{type:"scroll",listener:function(t){return s.scrollListener(csEventtarget.apply(t))}}];var u=function(t){if(!It(t))return null;var n=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(t);return n?Number(n[2]):null}(window.navigator.userAgent);(null===u||u&&u>=16)&&csArray.prototype.push.call(this.Sn,{type:"mouseover",listener:function(t){return s.mouseOverListener(t)}})}var n;return t.prototype.init=function(){var t;this.En(),this.bn(),this.Rn(),this.Nn(),null===(t=this.an)||void 0===t||t.onInputNodeToEncrypt(this.Tn.bind(this)),this.On()},t.prototype.On=function(){var t=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"checked");if(null==t?void 0:t.configurable){var n=t.set,i=this;t.set=function(t){var r=t!==this.checked;n.apply(this,[t]),r&&i.fn&&i.In(this)},Object.defineProperty(HTMLInputElement.prototype,"checked",t)}},t.prototype.Nn=function(){var t=this;this.hn.onDocumentIdentified((function(n){t.kn(n)}))},t.prototype.onEvent=function(t){csArray.prototype.push.call(this.ln,t)},t.prototype.Tn=function(t,n){void 0===n&&(n=!1),csArray.prototype.forEach.call(this.ln,(function(i){return i(t,n)}))},t.prototype.start=function(){this.fn=!0,this.Cn()},t.prototype.stop=function(){this.fn=!1,this._n()},t.prototype.bn=function(){var t;this.Pn()&&(t=csArray.prototype.push).call.apply(t,X([this.yn],this.dn,!1))},t.prototype.En=function(){var t;this.xn()&&(t=csArray.prototype.push).call.apply(t,X([this.yn],this.wn,!1))},t.prototype.kn=function(t){b(t)?csArray.prototype.forEach.call(this.yn,(function(t){return On(t)})):this.vn.has(t)||(this.vn.add(t),csArray.prototype.forEach.call(this.Sn,(function(n){var i=n;i.boundElement=t,On(i)})))},t.prototype.Ln=function(t){b(t)?csArray.prototype.forEach.call(this.yn,(function(t){return In(t)})):(this.vn.delete(t),csArray.prototype.forEach.call(this.Sn,(function(n){var i=n;i.boundElement=t,In(i)})))},t.prototype.Pn=function(){return"PointerEvent"in window&&"function"==typeof window.PointerEvent},t.prototype.xn=function(){return"TouchEvent"in window&&"function"==typeof window.TouchEvent},t.prototype._n=function(){var t=this;this.Ln(document),this.vn.forEach((function(n){return t.Ln(n)}))},t.prototype.Cn=function(){this.Mn(t.mn),this.Dn(),this.Un(),this.jn(),this.Mn(t.gn)},t.prototype.Mn=function(t){for(var n,i=window.csquerySelectorAll[document.nodeType].call(document,t),r=0;r<i.length;r+=1){var e=i.item(r);(null===(n=e.value)||void 0===n?void 0:n.length)>0&&this.zn(e,!0)}},t.prototype.Dn=function(){var t=Jn.getScrollContainer()||document,n=this.hn.getId(t);if(n){var i=this.Hn(t);if(0!==i.top||0!==i.left){var r={type:gn.SCROLL,args:[n,i.left,i.top],date:St()};this.Tn(r,!0)}}},t.prototype.Un=function(){for(var t=document.getElementsByTagName("select"),n=0;n<t.length;n+=1)this.Bn(t[n],!0)},t.prototype.jn=function(){for(var n=window.csquerySelectorAll[document.nodeType].call(document,t.An),i=0;i<n.length;i+=1)this.In(n[i],!0)},t.prototype.Hn=function(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}},t.prototype.scrollListener=function(t){if(!this.cn.isSensitive(t)&&!this.cn.isSensitiveChild(t)){var n=this.hn.getId(t);if(n){var i=this.Hn(t),r={type:gn.SCROLL,args:[n,i.left,i.top],date:St()};this.Tn(r)}}},t.prototype.mouseOverListener=function(t){if(!this.cn.isSensitiveChild(t.target)){var n=this.hn.getId(t.target);if(n){var i={type:gn.MOUSE_OVER,args:[n],date:St()};this.Tn(i)}}},t.prototype.clickListener=function(t){var n=Wn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:gn.CLICK,args:[i],date:St()};this.Tn(r)}}},t.prototype.inputCheckableListener=function(t){var n=Wn(t);this.In(n)},t.prototype.In=function(t,n){if(void 0===n&&(n=!1),!this.cn.isSensitive(t)&&!this.cn.isSensitiveChild(t)){var i=this.hn.getId(t);if(i){var r={type:gn.INPUT_CHECKABLE,args:[i,t.checked],date:St()};this.Tn(r,n)}}},t.prototype.inputSelectListener=function(t){var n=Wn(t);this.Bn(n)},t.prototype.Bn=function(t,n){if(void 0===n&&(n=!1),!this.cn.isSensitive(t)&&!this.cn.isSensitiveChild(t)){var i=this.hn.getId(t);if(i){var r={type:gn.INPUT_SELECT,args:[i,t.selectedIndex],date:St()};this.Tn(r,n)}}},t.prototype.inputTextListener=function(t){var n=Wn(t);this.zn(n)},t.prototype.zn=function(t,n){var i,r,e;if(void 0===n&&(n=!1),!this.cn.isSensitive(t)&&!this.cn.isSensitiveChild(t)){var s=this.hn.getId(t);if(s){var u=null!==(i=t.value)&&void 0!==i?i:"";if(null===(r=this.an)||void 0===r?void 0:r.shouldEncrypt(t))null===(e=this.an)||void 0===e||e.registerInputNodeToEncrypt({targetId:s,targetValue:u,date:St()});else{var o="number"===t.type?"0":"",h={type:gn.INPUT_TEXT,args:[s,csString.prototype.replace.call(u,/\S/g,o)],date:St()};this.Tn(h,n)}}}},t.prototype.keyUpListener=function(t){var n=Wn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r=this.qn[t.key];if(void 0!==r){var e={type:gn.KEY_UP,args:[i,r],date:St()};this.Tn(e)}}}},t.prototype.keyDownListener=function(t){var n=Wn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r=this.qn[t.key];if(void 0!==r){var e={type:gn.KEY_DOWN,args:[i,r],date:St()};this.Tn(e)}}}},t.prototype.copyListener=function(t){var n=Wn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:gn.CLIPBOARD_COMMAND,args:[i,Un.COPY],date:St()};this.Tn(r)}}},t.prototype.cutListener=function(t){var n=Wn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:gn.CLIPBOARD_COMMAND,args:[i,Un.CUT],date:St()};this.Tn(r)}}},t.prototype.pasteListener=function(t){var n=Wn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:gn.CLIPBOARD_COMMAND,args:[i,Un.PASTE],date:St()};this.Tn(r)}}},t.prototype.pointerUpListener=function(t){var n=Wn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:gn.POINTER_UP,args:[t.pointerId,t.pointerType,kn(t.clientX,1),kn(t.clientY,1),i,t.button],date:St()};this.Tn(r)}}},t.prototype.pointerMoveListener=function(t){var n={type:gn.POINTER_MOVE,args:[t.pointerId,t.pointerType,kn(t.clientX,1),kn(t.clientY,1)],date:St()};this.Tn(n)},t.prototype.pointerDownListener=function(t){var n=Wn(t);if(!this.cn.isSensitiveChild(n)){var i=this.hn.getId(n);if(i){var r={type:gn.POINTER_DOWN,args:[t.pointerId,t.pointerType,kn(t.clientX,1),kn(t.clientY,1),i,t.button,{pageX:kn(t.pageX,1),pageY:kn(t.pageY,1)}],date:St()};this.Tn(r)}}},t.prototype.touchStartListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:gn.TOUCH_START,args:[r.identifier,kn(r.clientX,1),kn(r.clientY,1)],date:St()};this.Tn(e)}},t.prototype.touchMoveListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:gn.TOUCH_MOVE,args:[r.identifier,kn(r.clientX,1),kn(r.clientY,1)],date:St()};this.Tn(e)}},t.prototype.touchEndCancelListener=function(t){if(t.changedTouches)for(var n=t.changedTouches,i=0;i<n.length;i+=1){var r=n[i],e={type:"touchend"===t.type?gn.TOUCH_END:gn.TOUCH_CANCEL,args:[r.identifier,kn(r.clientX,1),kn(r.clientY,1)],date:St()};this.Tn(e)}},t.prototype.Rn=function(){this.qn={},this.qn[" "]=Dn.SPACE,this.qn.Spacebar=Dn.SPACE,this.qn.Backspace=Dn.BACKSPACE,this.qn.Enter=Dn.ENTER,this.qn.Delete=Dn.DELETE,this.qn.ArrowUp=Dn.ARROWUP,this.qn.ArrowDown=Dn.ARROWDOWN,this.qn.ArrowLeft=Dn.ARROWLEFT,this.qn.ArrowRight=Dn.ARROWRIGHT,this.qn.Up=Dn.ARROWUP,this.qn.Down=Dn.ARROWDOWN,this.qn.Left=Dn.ARROWLEFT,this.qn.Right=Dn.ARROWRIGHT,this.qn.CapsLock=Dn.CAPSLOCK,this.qn.Shift=Dn.SHIFT,this.qn.Tab=Dn.TAB,this.qn.Escape=Dn.ESCAPE,this.qn.Esc=Dn.ESCAPE,this.qn.End=Dn.END,this.qn.Alt=Dn.ALT,this.qn.Control=Dn.CTRL,this.qn.Meta=Dn.META},t.mn=csArray.prototype.join.call(["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]'],","),t.An=csArray.prototype.join.call(['input[type="checkbox"]','input[type="radio"]'],","),t.gn='input[type="number"]',J([Gn("RecordingPageEvents.start")],t.prototype,"start",null),J([fn("scroll")],t.prototype,"scrollListener",null),J([fn("mouseOver"),Yn(),function(t,n,i){var r=i.value;return r&&(i.value=function(t){if(Wn(t)===csEventtarget.apply(t))return r.call(this,t)}),i}],t.prototype,"mouseOverListener",null),J([fn("click"),Yn()],t.prototype,"clickListener",null),J([fn("checkable")],t.prototype,"inputCheckableListener",null),J([fn("select")],t.prototype,"inputSelectListener",null),J([fn("text")],t.prototype,"inputTextListener",null),J([fn("Event handler type: keyup")],t.prototype,"keyUpListener",null),J([fn("Event handler type: keydown")],t.prototype,"keyDownListener",null),J([fn("Event handler type: copy")],t.prototype,"copyListener",null),J([fn("Event handler type: cut")],t.prototype,"cutListener",null),J([fn("Event handler type: paste")],t.prototype,"pasteListener",null),J([fn("Event handler type: pointerup"),Yn()],t.prototype,"pointerUpListener",null),J([fn("Event handler type: pointermove"),Yn(),(n={wait:33,ignoreThrottledCalls:!0},function(t,i,r){r.value=Mn(r.value,n)})],t.prototype,"pointerMoveListener",null),J([fn("Event handler type: pointerdown"),Yn()],t.prototype,"pointerDownListener",null),J([fn("Event handler type: touchstart"),Yn()],t.prototype,"touchStartListener",null),J([fn("Event handler type: touchmove"),Yn()],t.prototype,"touchMoveListener",null),J([fn("Event handler type: touchend-cancel"),Yn()],t.prototype,"touchEndCancelListener",null),t}();function Zn(t){for(var n,i=null!==(n=t.length)&&void 0!==n?n:0,r=new csArray(i),e=0;e<i;e+=1)r[e]=t[e];return r}function Qn(t,n){for(var i=[],r=0,e=0;e<t.length;e+=1)for(var s=n(t[e]),u=0;u<s.length;u++)i[r++]=s[u];return i}function ti(t,n){if(t.length>=0)for(var i=t.length,r=0;r<i;r++)n(t[r],r);else for(var e=0,s=t.next();!s.done;)n(s.value,e++),s=t.next()}function ni(t,n){for(var i=t.length,r=0;r<i;r++)if(n(t[r],r))return!0;return!1}function ii(t,n){for(var i=t.length,r=[],e=0;e<i;e+=1){var s=t[e];n(s)&&csArray.prototype.push.call(r,s)}return r}var ri,ei,si,ui=function(){function t(t,n,i,r,e,s,u){void 0===u&&(u=document);var o=this;this.Fn=t,this.Gn=n,this.Vn=i,this.Wn=r,this.hn=e,this.cn=s,this.Yn=u,this.fn=!1,this.Jn=function(t){o.Wn.emitInitialDomDone(t)},this.$n=function(t){var n=o.hn.getId(t.target);if(n){var i=t.target.getBoundingClientRect();if(i.width!==t.target.__contentsquare_width||i.height!==t.target.__contentsquare_height){t.target.__contentsquare_width=i.width,t.target.__contentsquare_height=i.height;var r={args:[n,null,"style","width:".concat(i.width,"px !important;height:").concat(i.height,"px !important;")],date:St(),type:gn.MUTATION_ATTRIBUTE};o.Kn(r)}}},this.Gn.onCharacterDataMutation((function(t){o.Xn(t)})),this.Gn.onAttributesMutation((function(t){o.cn.isSensitive(t.target)&&"src"===t.attributeName&&p(t.target)&&(o.cn.unidentifySensitiveNodes(t.target),o.cn.identifySensitiveNodes(t.target)),o.Zn(t)})),this.Gn.onChildListMutation((function(t,n){ti(t.addedNodes,(function(t){o.cn.identifySensitiveNodes(t),o.hn.identifyNodes(t,n)})),o.Qn(t,n),ti(t.removedNodes,(function(t){o.cn.unidentifySensitiveNodes(t)}))})),this.Gn.onAttachShadowMutation((function(t){t.target.isConnected&&null!==csElementshadowRoot.apply(t.target)&&(o.cn.identifySensitiveNodes(t.target),o.hn.identifyNodes(csElementshadowRoot.apply(t.target)),o.ti(t))})),this.cn.onSensitiveElementResize(this.$n)}return t.prototype.onEvent=function(t){this.Kn=t},t.prototype.isStarted=function(){return this.fn},t.prototype.start=function(){this.isStarted()||(this.fn=!0,this.Gn.start(),this.ni())},t.prototype.stop=function(){this.isStarted()&&(this.fn=!1,this.cn.unidentifySensitiveNodes(this.Yn),this.cn.disconnectResizeObserver(),this.Gn.stop())},t.prototype.flushEvents=function(){this.Gn.flushPendingMutations()},t.prototype.ni=function(){this.Wn.emitInitialDomStart(),this.cn.identifySensitiveNodes(this.Yn),this.hn.identifyNodes(this.Yn),this.Fn.serializeInitialDom(this.Yn,this.Jn)},t.prototype.ti=function(t){if(!this.cn.isSensitive(t.target)&&!this.cn.isSensitiveChild(t.target)){var n=this.Fn.serializeAttachShadowEvent(t);if(n){var i={args:n,date:t.date,type:gn.ATTACH_SHADOW};this.Kn(i)}}},t.prototype.Zn=function(t){if(!this.cn.isSensitiveChild(t.target)&&!this.cn.isSensitiveAttribute(t.target,t.attributeName)){var n=this.Fn.serializeMutationAttribute(t);if(n){var i={args:n,date:t.date,type:gn.MUTATION_ATTRIBUTE};this.Kn(i),this.Vn.scanAttribute(t.target,t.attributeName)}}},t.prototype.Xn=function(t){var n=t.target.parentElement;if(!n||!this.cn.isSensitive(n)&&!this.cn.isSensitiveChild(n)){var i=this.Fn.serializeMutationCharacterData(t);if(i){var r={args:i,date:t.date,type:gn.MUTATION_CHARACTER_DATA};this.Kn(r),this.Vn.scanText(t.target)}}},t.prototype.Qn=function(t,n){var i=this;if(!this.cn.isSensitive(t.target)&&!this.cn.isSensitiveChild(t.target)){var r=this.Fn.serializeMutationChildList(t,n);if(r){var e=r.removedNodes,s=r.addedNodes;csArray.prototype.forEach.call(e,(function(n){var r={args:n,date:t.date,type:gn.MUTATION_REMOVE};i.Kn(r)})),csArray.prototype.forEach.call(s,(function(n){var r={args:n,date:t.date,type:gn.MUTATION_INSERT};i.Kn(r)}))}}},t}(),oi=function(){function t(t){this.ii=t,this.ei=0}return t.prototype.addString=function(t){this.ei+=2*t.length},t.prototype.addArrayBuffer=function(t){this.ei+=t.byteLength},t.prototype.isThresholdReached=function(){return this.ei>this.ii},t.prototype.reset=function(){this.ei=0},t}(),hi=function(){function t(t,n){void 0===t&&(t=[]),void 0===n&&(n=512e3),this.si=t,this.ui=new oi(n)}return t.prototype.addEvent=function(t){this.ui.addString(ut(t)),csArray.prototype.push.call(this.si,t)},t.prototype.addEventByTimestamp=function(t){for(var n=0;n<this.si.length;n+=1){if(this.si[n].date>t.date)break}csArray.prototype.splice.call(this.si,n,0,t)},t.prototype.eventsCount=function(){return this.si.length},t.prototype.clearEvents=function(){this.ui.reset(),this.si=[]},t.prototype.isFull=function(){return this.eventsCount()>=200},t.prototype.isThresholdReached=function(){return this.ui.isThresholdReached()},t.prototype.getEvents=function(){return this.si},t.prototype.extractEvents=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=[],r=[];return csArray.prototype.forEach.call(this.si,(function(n){-1!==csArray.prototype.indexOf.call(t,n.type)?csArray.prototype.push.call(i,n):csArray.prototype.push.call(r,n)})),this.si=r,i},t.prototype.stringifyEvents=function(){return ut(this.si)},t.prototype.oi=function(t){t.type===gn.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)},J([Gn("RecordingBatch.addEvent")],t.prototype,"addEvent",null),t}(),ci=function(){function t(){this.hi=1}return t.prototype.getCurrentIndex=function(){return this.hi},t.prototype.increment=function(){this.hi+=1},t.prototype.reset=function(){this.hi=1},t.prototype.getRequestParameters=function(){return{ri:"".concat(this.hi)}},t}(),ai=function(){function t(){}return t.prototype.emit=function(n,i,r,e){void 0===e&&(e=document);var s="".concat(void 0!==r?r:t.ci),u="".concat(s).concat(n),o=t.createEvent(u,{detail:i});null!==o&&e.dispatchEvent(o)},t.createEvent=function(t,n){if(void 0===n&&(n={}),"function"==typeof CustomEvent)return new CustomEvent(t,n);var i=this.ai();if(null===i)return null;var r=n.bubbles,e=void 0!==r&&r,s=n.cancelable,u=void 0!==s&&s,o=n.detail;return i.initCustomEvent(t,e,u,o),i},t.ai=function(){try{return document.createEvent("CustomEvent")}catch(t){return null}},t.ci="cs.tracking.",t}(),fi=function(){function t(){this.isStarted=!1}return t.prototype.start=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.isStarted||(this.isStarted=!0,this.onStart.apply(this,t))},t.prototype.stop=function(){this.isStarted&&(this.isStarted=!1,this.onStop())},t.prototype.restart=function(){this.stop(),this.start()},t}();!function(t){t.BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",t.BLOCKED_BY_CONSENT_WITHDRAWN="W",t.NOT_RECORDED="0",t.TEMPORARILY_RECORDED="T",t.GLOBAL_SAMPLING="5",t.URL_SAMPLING="6",t.ETR_SAMPLING="7"}(ri||(ri={})),function(t){t.ETR_OFF="0",t.ETR_ON="1"}(ei||(ei={})),function(t){t.ETR_LEGACY="0",t.ETR_SESSION="1",t.ETR_PAGE="2"}(si||(si={}));var vi,li=function(){function t(){}return Object.defineProperty(t.prototype,"isEmpty",{get:function(){return!this.fi},enumerable:!1,configurable:!0}),t.prototype.pushAll=function(t){for(var n=0;n<t.length;n++)this.push(t[n])},t.prototype.push=function(t){this.vi?this.vi=this.vi[1]=[t,void 0]:this.vi=this.fi=[t,void 0]},t.prototype.pop=function(){if(!this.fi)return null;var t=this.fi[0];return this.fi=this.fi[1],this.fi||(this.vi=void 0),t},t}(),di=function(){function t(t){var n=this;this.type="asyncEvent",this.li=!1,t&&t((function(t){return n.resolve(t)}))}return t.prototype.resolve=function(t){if(this.li)throw new Error("AsyncEvent already resolve.");null==t.timestamp&&(t=Y(Y({},t),{timestamp:this.timestamp})),this.wi=t,this.li=!0,this.yi&&this.yi(this.wi)},t.prototype.complete=function(t){this.li&&t(this.wi),this.yi=t},t.prototype.wait=function(){var t=this;return new Promise((function(n){return t.complete(n)}))},t}(),wi=function(){function t(t){this.yi=t,this.pi=new li,this.mi=!1}return t.prototype.onEvent=function(t){if(this.yi)throw new Error("callback already set");return this.yi=t,this},t.prototype.push=function(t){this.pi.push(t),this.gi()},t.pipe=function(n,i){for(var r=n,e=function(n){var i=new t((function(t){n.pushEvent(t)}));ti(r,(function(t){return t.subscribe((function(t){return i.push(t)}))})),r=[n]},s=0,u=i;s<u.length;s++){e(u[s])}var o=new t;return ti(r,(function(t){return t.subscribe((function(t){return o.push(t)}))})),o},t.prototype.gi=function(){var t=this;if(!this.mi){if(this.mi=!0,!this.yi)throw new Error("callback not set");var n=this.pi.pop(),i=function(n){t.yi(n),t.mi=!1,t.pi.isEmpty||t.gi()};n instanceof di?n.complete(i):i(n)}},t}(),yi=function(){function t(t,n){void 0===n&&(n=[]);var i=this;this.producers=t,this.processors=n,this.fn=!1,this.Ai=[],this.Si=function(t){return csArray.prototype.forEach.call(i.Ai,(function(n){return n(t)}))}}return t.prototype.start=function(){if(this.fn)throw new Error("Recording is already started.");wi.pipe(this.producers,this.processors).onEvent(this.Si),ti(this.producers,(function(t){return t.start()})),ti(this.processors,(function(t){return t.start()})),this.fn=!0},t.prototype.stop=function(){for(var t=0,n=this.producers;t<n.length;t++){n[t].stop()}for(var i=0,r=this.processors;i<r.length;i++){r[i].stop()}this.fn=!1,this.Ai=[]},t.prototype.subscribe=function(t){var n=this;if(this.fn)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Ai,t),function(){return n.Ai=csArray.prototype.filter.call(n.Ai,(function(n){return n!==t}))}},t}(),pi=function(){function t(t){this.Ei=t}return t.prototype.start=function(){var t=this;this.Ei.subscribe((function(n){var i=n;switch(i.type){case"Legacy":t.yi(i.originalEvent);break;case"CustomElementRegistration":t.yi({type:gn.CUSTOM_ELEMENT_REGISTRATION,date:i.timestamp,args:[i.tagName]});break;default:sn.error("WebRecorderEventTranslator: Event not supported")}})),this.Ei.start()},t.prototype.stop=function(){this.Ei.stop()},t.prototype.onEvent=function(t){this.yi=t},t}(),mi=function(){function t(){this.bi=[]}return t.prototype.produceEvent=function(t){var n;null!==(n=t.timestamp)&&void 0!==n||(t.timestamp=St()),csArray.prototype.forEach.call(this.bi,(function(n){return n(t)}))},t.prototype.stop=function(){this.bi=[]},t.prototype.subscribe=function(t){var n=this;return csArray.prototype.push.call(this.bi,t),function(){var i=csArray.prototype.indexOf.call(n.bi,t);csArray.prototype.splice.call(n.bi,i,1)}},t}(),gi=function(t){function n(n){var i=t.call(this)||this;return i.Ri=n,i}return W(n,t),n.prototype.subscribe=function(n){return t.prototype.subscribe.call(this,n)},n.prototype.start=function(){var t=this;ti(this.Ri,(function(n){n.onEvent((function(n){return t.Si(n)}))})),ti(this.Ri,(function(t){var n;null===(n=t.start)||void 0===n||n.call(t)}))},n.prototype.stop=function(){ti(this.Ri,(function(t){var n;return null===(n=t.stop)||void 0===n?void 0:n.call(t)})),t.prototype.stop.call(this)},n.prototype.Si=function(t){this.produceEvent({timestamp:St(),type:"Legacy",originalEvent:t})},n}(mi);!function(t){t.Visible="visible",t.Hidden="hidden",t.Blur="blur",t.PagehideVisible="pagehideVisible",t.PagehideHidden="pagehideHidden"}(vi||(vi={}));var Ai=function(){function t(){var t=this;this.Ni=!1,this.Ti=function(n){try{switch(n.type){case"visibilitychange":if("hidden"===document.visibilityState)return t.Oi(vi.Hidden);break;case"pagehide":return"hidden"===document.visibilityState?t.Oi(vi.PagehideHidden):t.Oi(vi.PagehideVisible);case"blur":return t.Oi(vi.Blur);default:return}}catch(t){}}}return t.prototype.start=function(){this.Ni||(this.Ni=!0,this.Ii(),this.ki(),this.Ci())},t.prototype.stop=function(){this.Ni&&(this.Ni=!1,this._i(),this.Pi(),this.xi())},t.prototype.onEvent=function(t){this.Oi=t},t.prototype.Ii=function(){document.addEventListener("visibilitychange",this.Ti)},t.prototype._i=function(){document.removeEventListener("visibilitychange",this.Ti)},t.prototype.ki=function(){window.addEventListener("pagehide",this.Ti)},t.prototype.Pi=function(){window.removeEventListener("pagehide",this.Ti)},t.prototype.Ci=function(){window.addEventListener("blur",this.Ti)},t.prototype.xi=function(){window.removeEventListener("blur",this.Ti)},t}(),Si=0;function Ei(t){return"$$"+t+ ++Si}Ei.asyncIterator="$$asyncIterator";var bi=qt("Symbol",Ei),Ri=qt("queueMicrotask",setTimeout),Ni=function(){return function(t,n,i){var r,e,s,u,o;i.value=(r=i.value,e=bi("oncePerTickSymbol"),s=null,u={},o=function(){var t,n=null!==(t=this)&&void 0!==t?t:u;s=arguments,n[e]||(n[e]=!0,Ri((function(){n[e]=!1,r.apply(n,s)})))},o.oncePerTickSymbol=e,o)}};Ni.isScheduled=function(t,n){return t[n.oncePerTickSymbol]};var Ti=function(){function t(t){var n=this;this.Li=new Map,this.Mi=function(t){var i=t.target;if(n.Li.has(i))return!0;var r=!1;return n.Li.forEach((function(t,e){return r||!n.Li.get(e).subtree?r:r=f(e)&&e.contains(i)})),r},this.yi=function(i){Ni.isScheduled(n,n.garbageCollect)&&(i=ii(i,n.Mi)),i.length&&t(i,n)},this.Gn=new csMutationObserver(this.yi)}return t.prototype.disconnect=function(){this.Gn.disconnect(),this.Li=new Map},t.prototype.takeRecords=function(){return this.Gn.takeRecords()},t.prototype.observe=function(t,n){return this.Li.set(t,n),this.Gn.observe(t,n)},t.prototype.unobserve=function(t){this.Li.has(t)&&(this.Li.delete(t),this.garbageCollect())},t.prototype.garbageCollect=function(){var t=this;this.yi(this.takeRecords(),this),this.Gn.disconnect(),this.Li.forEach((function(n,i){return t.Gn.observe(i,n)}))},xn([Ni()],t.prototype,"garbageCollect",null),t}();function Oi(){var t=new Error,n=t.stack?csArray.prototype.filter.call(csString.prototype.split.call(t.stack,"\n"),(function(t){return"Error"!==t&&-1===csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(t),"promise ")&&-1===csString.prototype.indexOf.call(t,"[native code]")})):[];if(0===n.length)return"";var i=function(t){return t.length>0?Ii(t[0]):""}(n);return""===i?"":(n=function(t,n){return csArray.prototype.filter.call(t,(function(t){return-1===csString.prototype.indexOf.call(t,n)}))}(n,i),0===n.length?"":Ii(n[0]))}function Ii(t){var n,i="";n=t;var r=(-1!==csString.prototype.indexOf.call(n,"@")?new RegExp("@(.+):(\\d+):(\\d+)$"):new RegExp("\\((.+):(\\d+):(\\d+)\\)")).exec(t);return r&&(i=r[1]),i}var ki,Ci,_i,Pi=function(t){return t};function xi(t){var n,i=t.target,r=t.methodName,e=t.hook,s=t.hookPrepareArgs,u=void 0===s?Pi:s,o=t.options;if(!(null===(n=Object.getOwnPropertyDescriptor(i,r))||void 0===n?void 0:n.writable))return un.warn("Cannot intercept read only function '".concat(csString(r),"' of object '").concat(i,"'")),null;var h,c,a=!1,f=i[r];if("function"==typeof f){var v=function(){var t=u(arguments),n=f.apply(this,arguments);if(a){var i=void 0;o&&o.withCallerName&&(i=Oi());try{e({result:n,context:this,args:t,callerName:i})}catch(t){un.error(t)}}return n};(h=v).prototype=(c=f).prototype,Object.defineProperty(h,"toString",{value:function(){return c.toString()}}),i[r]=v}return{activate:function(){return a=!0},deactivate:function(){return a=!1}}}function Li(t,n,i){var r=!1,e=Object.getOwnPropertyDescriptor(t,n);if(e){if(!e.configurable)return un.warn("Cannot intercept read only property '".concat(csString(n),"' of object '").concat(t,"'")),null;Object.defineProperty(t,n,Pn(Pn({},e.get?{get:function(){return e.get.apply(this,arguments)}}:{}),e.set?{set:function(){var t=arguments,n=e.set.apply(this,t);if(r)try{i(this,t[0])}catch(t){un.error(t)}return n}}:{}))}return{activate:function(){return r=!0},deactivate:function(){return r=!1}}}function Mi(){var t=new Set;return{add:function(n){t.add(n),1===t.size&&setTimeout((function(){t.clear()}))},has:function(n){return t.has(n)},del:function(n){t.delete(n)},values:function(){return function(t){var n=[];return t.forEach((function(t){return csArray.prototype.push.call(n,t)})),n}(t)}}}!function(t){t.isSupported=function(){return!!Element.prototype.attachShadow},t.getShadowRoot=function(t){return t&&N(t)?t.shadowRoot:null},t.getAllShadowHosts=function t(n){for(var i,r,e=document.createNodeIterator(n,NodeFilter.SHOW_ELEMENT,null,!1),s=[];r=e.nextNode();)csElementshadowRoot.apply(r)&&(i=csArray.prototype.push).call.apply(i,Ln([s,r],t(csElementshadowRoot.apply(r)),!1));return s}}(ki||(ki={})),function(t){function n(){var t=[r()];return document.documentElement&&csArray.prototype.push.call(t,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(t,document.body.scrollHeight,document.body.offsetHeight),Math.max.apply(Math,t)}function i(){return document.documentElement.scrollWidth}function r(){return window.innerHeight}function e(){return window.innerWidth}function s(){var t=window.csScreen.width;return Ot(t)&&t>0?t:window.screen.width}function u(){var t=window.csScreen.height;return Ot(t)&&t>0?t:window.screen.height}t.documentHeight=n,t.documentWidth=i,t.windowHeight=r,t.windowWidth=e,t.screenWidth=s,t.screenHeight=u,t.windowOffsetX=function(){return window.pageXOffset},t.windowOffsetY=function(){return window.pageYOffset},t.getRequestParameters=function(){return{dw:"".concat(i()),dh:"".concat(n()),ww:"".concat(e()),wh:"".concat(r()),sw:"".concat(s()),sh:"".concat(u())}}}(Ci||(Ci={}));var Di,Ui=null!==(_i=Bt.Node)&&void 0!==_i?_i:Object;!function(t){var n="isConnected"in Ui.prototype?function(t){return t.isConnected}:function(t){return!(t.ownerDocument&&t.ownerDocument.compareDocumentPosition(t)&t.DOCUMENT_POSITION_DISCONNECTED)};function i(t){var n;return t.parentElement?t.parentElement:t.getRootNode?null===(n=t.getRootNode())||void 0===n?void 0:n.host:null}function r(t){var n,i;if(!1===(null===(n=t.checkVisibility)||void 0===n?void 0:n.call(t,{checkOpacity:!0,checkVisibilityCSS:!0})))return!0;if(!t.offsetParent){if(!t.getBoundingClientRect)return un.warn("SUP-11432: Element doesn't have getBoundingClientRect. Node: ".concat(t instanceof Ui," Ctor: ").concat(null===(i=null==t?void 0:t.constructor)||void 0===i?void 0:i.name)),!1;var r=t.getBoundingClientRect();if(0==r.width&&0==r.height)return!0}var e,s=window.getComputedStyle(t);return!s||("none"===s.display||"hidden"===s.visibility||"collapse"===s.visibility||"0"===s.opacity||"opacity(0)"===s.filter||"0px"===s.width&&"0px"===s.height||(e=s.color,/^rgba\(\d+, \d+, \d+, 0\)$/.test(e)))}function e(t){var n=t.getBoundingClientRect(),i=n.left+.5*n.width,r=n.top+.5*n.height;return s(document,i,r)}function s(t,n,i){var r=t.elementFromPoint(n,i);if(!r)return null;var e=ki.getShadowRoot(r);return e&&e!=document.body.getRootNode()&&e!==t?s(e,n,i):r}function u(t){var n=e(t);return null!==n&&(t===n||t.contains(n))}t.forEachChild=function(t,n){for(var i=t;i;i=csNodenextSibling.apply(i))n(t)},t.isConnected=function(t){return n(t)},t.getAncestors=function(t,n){var i=[],r=function(t){csArray.prototype.push.call(i,t);for(var n=t.getRootNode(),r=t;(null==r?void 0:r.parentElement)&&r.parentElement!==n;)csArray.prototype.push.call(i,r.parentElement),r=r.parentElement;return csArray.prototype.push.call(i,n),i};if(n)for(var e=t;e;){r(e);var s=e.getRootNode();if(!(s instanceof ShadowRoot))break;e=s.host}else r(t);return i},t.isDescendantOf=function n(i,r){if(i===r||r.contains(i))return!0;var e=t.getParentElement(i);return!(!e||e===i)&&n(e,r)},t.getParentElement=i,t.findAllElements=function(t,n){var i;void 0===n&&(n=document);for(var r=Zn(window.csquerySelectorAll[n.nodeType].call(n,t)),e=0,s=ki.getAllShadowHosts(n);e<s.length;e++){var u=s[e],o=csElementshadowRoot.apply(u),h=Zn(window.csquerySelectorAll[o.nodeType].call(o,t));(i=csArray.prototype.push).call.apply(i,Ln([r],h,!1))}return r},t.isHiddenByCSS=r,t.areAncestorsHiddenByCSS=function t(n){if(r(n))return!0;var e=i(n);return null!=e&&t(e)},t.getTopAncestorHiddenByCSS=function(t){var n=null,e=t;do{if(!r(e))break;n=e}while(e=i(e));return n},t.getTopElement=e,t.getElementOnTop=function(n){if(!n.getBoundingClientRect)return null;var i=n.getBoundingClientRect(),r=i.x+i.width/2,e=i.y+i.height/2;return t.getTopElementFromPoint(document,r,e)},t.getTopElementFromPoint=s,t.isVisibleInDocument=function(t){return!function(t){var n=t.getBoundingClientRect();return n.right+Ci.windowOffsetX()<0||n.bottom+Ci.windowOffsetY()<0}(t)&&!r(t)&&!function(t){var n=e(t);return null!==n&&!t.contains(n)}(t)},t.isVisibleInViewportInForeground=function(t){return!r(t)&&u(t)},t.isInViewPort=u,t.getAttributeNS=function(t,n,i){var r=t.getAttributeNS(n,i);return""===r?t.hasAttributeNS(n,i)?r:null:r},t.isElementFocusable=function(t){return!!t.hasAttribute("tabIndex")||("true"===t.getAttribute("contentEditable")||(!(!w(t)||!t.hasAttribute("href"))||(!(!(f(n=t)&&"select"===n.localName||function(t){return f(t)&&"textarea"===t.localName}(t)||g(t)||function(t){return f(t)&&"button"===t.localName}(t))||t.hasAttribute("disabled"))||!(!function(t){return f(t)&&"details"===t.localName}(t)&&!function(t){return f(t)&&"summary"===t.localName}(t)))));var n}}(Di||(Di={}));var ji,zi,Hi,Bi=function(){function t(t){var n=this;this.yi=t,this.Di=[],this.Ui=Mi(),this.yi=function(i,r){"initial"===r?t(i,r):n.Ui.has(i)||(t(i,r),n.Ui.add(i))},this.ji()}return t.prototype.observe=function(t){csArray.prototype.push.call(this.Di,t),this.zi(),this.Hi(t,!0);this.Gn.observe(t,{subtree:!0,childList:!0})},t.prototype.disconnect=function(){this.Di=[],this.Gn.disconnect(),this.Bi&&this.Bi.deactivate()},t.prototype.zi=function(){var t=this;this.Bi||(this.Bi=xi({target:Element.prototype,methodName:"attachShadow",hook:function(n){return ni(t.Di,(function(t){return Di.isDescendantOf(n.result.host,t)}))&&t.yi(n.result,"added")}})),this.Bi.activate()},t.prototype.Hi=function(t,n){var i=this;ti(ki.getAllShadowHosts(t),(function(t){i.yi(csElementshadowRoot.apply(t),n?"initial":"added"),i.Gn.observe(csElementshadowRoot.apply(t),{subtree:!0,childList:!0})}))},t.prototype.ji=function(){var t=this;this.Gn=new Ti((function(n){for(var i=0,r=n;i<r.length;i++){var e=r[i];ti(e.addedNodes,(function(n){return t.Hi(n,!1)})),csArray.prototype.forEach.call(Qn(e.removedNodes,ki.getAllShadowHosts),(function(n){t.yi(csElementshadowRoot.apply(n),"removed"),t.Gn.unobserve(csElementshadowRoot.apply(n))}))}}))},t}(),qi=function(t){function n(n){var i=t.call(this,(function(t){return n(t,i)}))||this;return i.qi=[],i}return _n(n,t),n.prototype.observe=function(n,i){var r=this;if(t.prototype.observe.call(this,n,i),i.subtree){var e=new Bi((function(n,e){"added"===e||"initial"===e?t.prototype.observe.call(r,n,i):"removed"===e&&t.prototype.unobserve.call(r,n)}));e.observe(n),csArray.prototype.push.call(this.qi,(function(){return e.disconnect()}))}},n.prototype.disconnect=function(){t.prototype.disconnect.call(this),ti(this.qi,(function(t){return t()})),this.qi=[]},n}(Ti),Fi=Bt.ShadowRoot?qi:Bt.csMutationObserver;function Gi(t,n){var i;void 0===n&&(n=Yi.SHOW_ALL);var r=n|Yi.SHOW_ELEMENT,e=[document.createTreeWalker(t,r,null,!1)];t instanceof Element&&(null===(i=csElementshadowRoot.apply(t))||void 0===i?void 0:i.firstElementChild)&&csArray.prototype.push.call(e,document.createTreeWalker(csElementshadowRoot.apply(t),r,null,!1));var s=null;return{root:t,nextNode:function(){for(;e.length>0;){if(n===Yi.SHOW_ALL&&s){var t=s;return s=null,t}var i=e[e.length-1].nextNode();if(i){var u=Vi(i);if(n===Yi.SHOW_ALL&&(s=u),u&&csArray.prototype.push.call(e,document.createTreeWalker(u,r,null,!1)),0!=(Ji[i.nodeType]&n))return i}else csArray.prototype.pop.call(e)}return null},visitAll:function(n){n(t);for(var i=this.nextNode();i;)n(i),i=this.nextNode()}}}function Vi(t){return t&&N(t)?t.shadowRoot:null}var Wi=null!==(zi=Bt.Node)&&void 0!==zi?zi:{},Yi=null!==(Hi=Bt.NodeFilter)&&void 0!==Hi?Hi:{},Ji=((ji={})[2]=Yi.SHOW_ATTRIBUTE,ji[4]=Yi.SHOW_CDATA_SECTION,ji[8]=Yi.SHOW_COMMENT,ji[11]=Yi.SHOW_DOCUMENT_FRAGMENT,ji[9]=Yi.SHOW_ALL,ji[10]=Yi.SHOW_DOCUMENT_TYPE,ji[1]=Yi.SHOW_ELEMENT,ji[Wi.ENTITY_NODE]=Yi.SHOW_ENTITY,ji[Wi.ENTITY_REFERENCE_NODE]=Yi.SHOW_ENTITY_REFERENCE,ji[Wi.NOTATION_NODE]=Yi.SHOW_NOTATION,ji[7]=Yi.SHOW_PROCESSING_INSTRUCTION,ji[3]=Yi.SHOW_TEXT,ji),$i=function(){function t(t){var n=this;this.yi=t,this.Fi=function(t){for(var i=0,r=Qn(t,(function(t){return t.addedNodes}));i<r.length;i++){Gi(r[i],NodeFilter.SHOW_ELEMENT).visitAll((function(t){f(t)&&n.yi(t)}))}},this.Gi=new Fi(this.Fi)}return t.prototype.observe=function(t){var n=this;void 0===t&&(t=document),this.Gi.observe(t,{childList:!0,subtree:!0}),Gi(t,NodeFilter.SHOW_ELEMENT).visitAll((function(t){f(t)&&n.yi(t)}))},t.prototype.disconnect=function(){this.Gi.disconnect()},t}(),Ki=[],Xi=!1;function Zi(){for(var t=!document.hidden,n=csDate.now(),i=0;i<Ki.length;i++)if(Ki[i](),t&&csDate.now()-n>=35)return Ki=csArray.prototype.slice.call(Ki,i+1),void setTimeout(Zi);Ki=[],Xi=!1}function Qi(t){return function(){var n=this,i=arguments;!function(t){if(document.hidden)t();else if(csArray.prototype.push.call(Ki,t),!Xi){for(var n=0;n<3;n++)setTimeout(Zi);Xi=!0}}((function(){return t.apply(n,i)}))}}var tr=function(t){function n(){var n=t.call(this)||this;n.Vi="object"==typeof window.customElements&&"function"==typeof window.customElements.whenDefined&&"function"==typeof window.Promise,n.Wi=function(t){var i;f(i=t)&&csString.prototype.indexOf.call(i.tagName,"-")>0&&-1===csString.prototype.indexOf.call(i.tagName,":")&&-1===csString.prototype.indexOf.call(i.tagName,'"')&&-1===csString.prototype.indexOf.call(i.tagName,",")&&csArray.prototype.indexOf.call(T,csString.prototype.toLocaleLowerCase.call(i.tagName))<0&&n.Yi(csString.prototype.toLowerCase.call(t.tagName))};var i=Qi(n.Wi);return n.Ji=new $i(i),n.$i=new Set,n}return W(n,t),n.prototype.start=function(){this.Vi&&this.Ji.observe()},n.prototype.stop=function(){this.$i.clear(),this.Ji.disconnect()},n.prototype.Yi=function(t){return $(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return this.$i.has(t)?[2]:(this.$i.add(t),[4,window.customElements.whenDefined(t)]);case 1:return n.sent(),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}),[2]}}))}))},n}(mi),nr=function(t){function n(n,i,r,e,s,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A){void 0===g&&(g=[]);var S=t.call(this)||this;return S.L=n,S.Ki=i,S.Xi=r,S.Zi=e,S.Qi=s,S.tr=u,S.nr=o,S.ir=h,S.rr=c,S.Y=a,S.er=f,S.ur=v,S.hr=l,S.cr=d,S.an=w,S.ar=y,S.vr=p,S.lr=m,S.Ri=g,S.wr=A,S.yr=0,S.pr=0,S.mr=0,S.gr=new ai,S.Ar={allowFromQuotaService:!0,allowFromSerialization:!0},S.Sr=Mn((function(){S.Ki.eventsCount()>0&&S.Er()}),2e3),S.br=function(t){return S.processBrowserEvent(t)},S.Rr=function(t){return S.Nr(t)},S.Tr=0,S.Or=0,S.Ir=new Ai,S.kr=!1,S.Cr=51200,S._r=!1,S.Pr=!1,S.Lr=[],S.Mr=function(t){S.vr.removeBatchInProgress("".concat(t.params.sn,".").concat(t.params.pn,".").concat(t.params.ri))},S.Ei=new yi([new gi(csArray.prototype.filter.call(X([S.tr],S.Ri,!0),(function(t){return t}))),new tr]),S.Dr=new pi(S.Ei),S.Dr.onEvent(S.br),S}return W(n,t),n.prototype.init=function(){this.Ur(),this.ar.onLoad(this.Mr),this.ar.onError(this.Mr)},n.prototype.Ur=function(){var t,n,i,r,e=this;this.nr.onEvent(this.Rr),this.ir.onEvent(this.Rr),null===(t=this.an)||void 0===t||t.onTextNodeToEncrypt(this.br),null===(n=this.an)||void 0===n||n.onApiErrorToEncrypt((function(t){e.jr(t)})),null===(i=this.an)||void 0===i||i.onUserIdentifierToEncrypt(this.br),null===(r=this.lr)||void 0===r||r.onEvent(this.br),this.Ir.onEvent((function(t){return t===vi.Blur?e.zr():e.kr?void 0:(e.kr=!0,setTimeout((function(){e.kr=!1})),t===vi.Hidden?e.zr():e.Hr())}))},n.prototype.isRecording=function(){return this.Y.hasValidSession()&&this.isStarted},n.prototype.zr=function(){var t=this;if(this.canSendEvents()){this.vr.saveBatchesInProgress(),ti(this.Ri,(function(n){var i,r;return ti(null!==(r=null===(i=n.getPendingEvents)||void 0===i?void 0:i.call(n))&&void 0!==r?r:[],(function(n){return t.Ki.addEvent(n)}))}));var n=this.Ki.getEvents();if(0!==n.length){var i=this.ar.getQueryParams();i.rst=this.getRecordingStartTimestamp(),i.let=this.getRecordingLastEventTimestamp();var r=this.Zi.getCurrentIndex();i.ri=r.toString(),this.wr.removeQueryParams(),this.wr.setQueryParams(i),this.Or=n[n.length-1].date;var e=this.Ki.stringifyEvents();if(e.length>this.Cr){var s=this.Br();if(s.length>0){var u=ut(s);this.wr.send(u)||this.vr.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:Y(Y({},i),{datatype:"json"}),events:u}),this.Zi.increment()}if(this.Ki.eventsCount()>0){i.ri=this.Zi.getCurrentIndex().toString();var o=this.Ki.stringifyEvents();this.vr.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:Y(Y({},i),{datatype:"json"}),events:o}),this.Zi.increment()}}else{this.wr.send(e)||this.vr.save({key:"".concat(i.sn,".").concat(i.pn,".").concat(i.ri,".last"),metadata:Y(Y({},i),{datatype:"json"}),events:e}),this.Zi.increment()}this.wr.removeQueryParams(),this.Ki.clearEvents()}}},n.prototype.Hr=function(){var t=this;if(this.canSendEvents()){var n=this.ar.getQueryParams();this.vr.saveBatchesInProgress(),n.rst=this.getRecordingStartTimestamp(),delete n.ri,n.hlm="true",this.wr.removeQueryParams(),ti(this.Ri,(function(n){var i,r;return ti(null!==(r=null===(i=n.getPendingEvents)||void 0===i?void 0:i.call(n))&&void 0!==r?r:[],(function(n){return t.Ki.addEvent(n)}))}));var i=this.Ki.getEvents();if(0===i.length)return delete n.let,delete n.rst,this.wr.setQueryParams(n),this.wr.send(),void this.wr.removeQueryParams();this.Or=i[i.length-1].date,n.let=this.getRecordingLastEventTimestamp(),this.wr.setQueryParams(n);var r=this.Ki.stringifyEvents();if(r.length>this.Cr){var e=this.Br();if(e.length>0){var s=ut(e);this.wr.send(s)||this.vr.save({key:"".concat(n.sn,".").concat(n.pn,".last"),metadata:Y(Y({},n),{datatype:"json"}),events:s})}else delete n.let,delete n.rst,delete n.ri,this.wr.removeQueryParams(),this.wr.setQueryParams(n),this.wr.send(),this.wr.removeQueryParams();if(this.Ki.eventsCount()>0){n.rst=this.getRecordingStartTimestamp(),n.let=this.getRecordingLastEventTimestamp();var u=this.Zi.getCurrentIndex();n.ri=u.toString();var o=this.Ki.stringifyEvents();this.vr.save({key:"".concat(n.sn,".").concat(n.pn,".").concat(n.ri,".last"),metadata:Y(Y({},n),{datatype:"json"}),events:o}),this.Zi.increment()}}else{this.wr.send(r)||(this.vr.save({key:"".concat(n.sn,".").concat(n.pn,".").concat(n.ri,".last"),metadata:Y(Y({},n),{datatype:"json"}),events:r}),this.Zi.increment())}this.wr.removeQueryParams(),this.Ki.clearEvents()}},n.prototype.isMutationTrackerStarted=function(){return this.tr.isStarted()},n.prototype.blockSendingEventsFromQuotaService=function(){this.Ar.allowFromQuotaService=!1},n.prototype.allowSendingEventsFromQuotaService=function(){this.Ar.allowFromQuotaService=!0},n.prototype.blockSendingEventsFromSerialization=function(){this.Ar.allowFromSerialization=!1},n.prototype.allowSendingEventsFromSerialization=function(){this.Ar.allowFromSerialization=!0},n.prototype.canSendEvents=function(){return this.Ar.allowFromQuotaService&&this.Ar.allowFromSerialization},n.prototype.onIframeJavascriptError=function(t){this.qr(t)},n.prototype.onIframeDetailedApiError=function(t){this.Fr(t)},n.prototype.onIframeRecordingUserEvent=function(t){for(var n=0,i=t;n<i.length;n++){var r=i[n];this.Nr(r)}},n.prototype.onIframeRecordingBrowserEvent=function(t){if(this.isMutationTrackerStarted())for(var n=0,i=t;n<i.length;n++){var r=i[n];this.processBrowserEvent(r)}},n.prototype.processBrowserEvent=function(t){this.rr.isCurrentPageviewValid()&&this.Gr(t)},n.prototype.Nr=function(t){this.rr.isSessionValid()&&this.Gr(t)},n.prototype.Gr=function(t){this.Ki.addEvent(t),this.Ki.isThresholdReached()?this.pushEvents():this.Ki.isFull()&&this.Sr(),this.Vr(t)},n.prototype.Vr=function(t){this.L.emitDebugEvents&&this.gr.emit("recordingEvent",Y(Y({},t),{typeName:gn[t.type]}))},n.prototype.onStart=function(){var t=this;this.Ir.start(),this.initStates(),this.Qi.start(),this.Dr.start(),this.ir.start(),this.er&&this.ur&&this.er.subscribe(n.Wr,(function(n){return t.qr(n)})),this.hr&&this.cr&&this.hr.subscribe(n.Wr,(function(n){return t.Fr(n)}),{detailedEvent:!0}),this.L.emitDebugEvents&&this.gr.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Lr,(function(n){return t.Yr(n)})),this.Lr=[]},n.prototype.onStop=function(){this.Ir.stop(),this.Qi.stop(),this.nr.stop(),this.er&&this.er.unsubscribe(n.Wr),this.hr&&this.hr.unsubscribe(n.Wr),this.Dr.stop(),this.ir.stop(),this.Pr=!1},n.prototype.clearStates=function(){this.tr.flushEvents(),this.Sr.cancel(),this.pushEvents(),this.ar.removeQueryParams()},n.prototype.initStates=function(){this.Tr=St(),this.Zi.reset(),this.yr=0,this.pr=0,this.mr=0,this.ar.setQueryParams(this.Xi.getRequestParameters())},n.prototype.pushEvents=function(){ti(this.Ri,(function(t){var n;return null===(n=t.flushEvents)||void 0===n?void 0:n.call(t)})),this.Ki.eventsCount()>0&&(this.isStarted?this.Er():this.Ki.clearEvents())},n.prototype.Er=function(){if(this.canSendEvents()){var t=this.Ki.getEvents();this.Or=t[t.length-1].date;var n=this.Zi.getCurrentIndex();this.ar.setQueryParams({ri:n.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});var i=this.ar.getQueryParams();this.vr.addBatchInProgress("".concat(i.sn,".").concat(i.pn,".").concat(n),this.ar.getQueryParams(),t),this.ar.send(t),this.Zi.increment(),this.Ki.clearEvents(),this.Jr&&this.Jr()}},n.prototype.addInitialDom=function(t){this.Ki.addEventByTimestamp(t),this.Vr(t)},n.prototype.Fr=function(t){if(t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody){if(this.an)return void this.an.registerApiErrorToEncrypt(t);t.customRequestHeaders="",t.customResponseHeaders="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.jr(t)},n.prototype.jr=function(t){if(this.pr<n.$r){var i={type:gn.API_ERROR,date:St(),args:[this.cr.anonymize(t)]};this.br(i),this.pr=this.pr+1}},n.prototype.qr=function(t){if(this.yr<n.Kr){var i={type:gn.JAVASCRIPT_ERROR,date:St(),args:[this.ur.anonymize(t)]};this.br(i),this.yr=this.yr+1}},n.prototype.Xr=function(t){if(this.mr<n.Zr){var i={type:gn.CUSTOM_ERROR,date:St(),args:[t]};this.br(i),this.mr=this.mr+1}},n.prototype.Qr=function(t){var i,r;t===si.ETR_SESSION?this.ar.setQueryParams(((i={})[n.te]=n.ne,i)):t===si.ETR_PAGE&&this.ar.setQueryParams(((r={})[n.ie]=n.ne,r))},n.prototype.clearEvents=function(){this.Ki.clearEvents()},n.prototype.onCustomJavaScriptErrorEvent=function(t){this.qr(t)},n.prototype.onCustomErrorEvent=function(t){this.Xr(t)},n.prototype.onPageEvent=function(t){this.re(t)},n.prototype.onUserIdentifierEvent=function(t){var n,i={userIdentifier:t,date:St(),keyId:this.L.encryptionPublicKeyId};null===(n=this.an)||void 0===n||n.registerUserIdentifierToEncrypt(i)},n.prototype.onEventTriggerRecording=function(t,n){this.isStarted?this.Yr({eventName:t,eventType:n}):csArray.prototype.push.call(this.Lr,{eventName:t,eventType:n})},n.prototype.Yr=function(t){this.Qr(t.eventType),this.re(t.eventName),this.pushEvents()},n.prototype.re=function(t){var i={type:gn.PAGE_EVENT,date:St(),args:[{eventName:csString.prototype.slice.call(t,0,n.ee)}]};this.Ki.addEvent(i)},n.prototype.triggerUnanonymizationConsentGranted=function(){var t={date:St(),type:gn.UNANONYMIZED_CONSENT_GRANTED};this.Ki.addEvent(t)},n.prototype.triggerUnanonymizationConsentWithdrawn=function(){var t={date:St(),type:gn.UNANONYMIZED_CONSENT_WITHDRAWN};this.Ki.addEvent(t)},n.prototype.triggerRecordingForSessionGranted=function(){var t={date:St(),type:gn.RECORDING_INFO_EVENT,args:[An.RECORDING_CONSENT_FOR_SESSION_GRANTED]};this.Ki.addEvent(t)},n.prototype.triggerRecordingForSessionWithdrawn=function(){var t={date:St(),type:gn.RECORDING_INFO_EVENT,args:[An.RECORDING_CONSENT_FOR_SESSION_WITHDRAWN]};this.Ki.addEvent(t)},n.prototype.activateOnlineAssetsOnNextPageview=function(){this._r=!0,this.Pr=!0},n.prototype.getStaticResourceManagerStatus=function(){return this.lr?{isStarted:this.L.useStaticResourceManager&&this.lr.isSupported(),onlineAssets:{activated:this.lr.isOnlineAssetsActivated(),enabledOnNextPageview:this._r,enabledForChildrenOnNextStart:this.Pr}}:null},n.prototype.updateStaticResourceManagerOnlineAssets=function(){this.lr&&this._r&&(this.lr.enableOnlineAssets(),this.Pr=!0,this._r=!1)},n.prototype.onRecordingRequestSent=function(t){this.Jr=t},n.prototype.getRecordingStartTimestamp=function(){return this.Tr.toString()},n.prototype.getRecordingLastEventTimestamp=function(){return this.Or.toString()},n.prototype.Br=function(){return this.Ki.extractEvents(gn.API_ERROR,gn.JAVASCRIPT_ERROR,gn.CUSTOM_ERROR,gn.TEXT_VISIBILITY,gn.POINTER_DOWN)},n.Wr="RecordingService",n.ee=255,n.Kr=20,n.$r=20,n.Zr=20,n.ie="etrp",n.te="etrs",n.ne="1",J([Gn("addInitialDom")],n.prototype,"addInitialDom",null),n}(fi),ir=function(t){function n(n,i,r){var e=t.call(this)||this;return e.Wt=n,e.wr=i,e.ar=r,e.se=!1,e.ue={},e.oe=function(t){if(0!==t.length)for(var n=0,i=t;n<i.length;n++){var r=i[n],s=r.metadata,u=r.events;e.he(s.rt)&&e.ar.send(u,s)}},window.addEventListener("focus",(function(){e.recover()})),e}return W(n,t),n.prototype.onStart=function(){this.ue={}},n.prototype.onStop=function(){},n.prototype.recover=function(){this.Wt.recover(this.oe)},n.prototype.addBatchInProgress=function(t,n,i){this.ue[t]={metadata:Y({},n),events:i}},n.prototype.removeBatchInProgress=function(t){delete this.ue[t]},n.prototype.blockSendingLastMessage=function(){this.se=!1},n.prototype.allowSendingLastMessage=function(){this.se=!0},n.prototype.sendLastMessageBeacon=function(){if(this.se){var t=this.ar.getQueryParams(),n=(t.ri,t.rst,t.let,function(t,n){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var e=0;for(r=Object.getOwnPropertySymbols(t);e<r.length;e++)n.indexOf(r[e])<0&&Object.prototype.propertyIsEnumerable.call(t,r[e])&&(i[r[e]]=t[r[e]])}return i}(t,["ri","rst","let"]));n.hlm="true",this.wr.setQueryParams(n),this.wr.send()}},n.prototype.he=function(t){return!!t&&-1===csString.prototype.indexOf.call(t,ri.TEMPORARILY_RECORDED)},n.prototype.saveBatchesInProgress=function(){var t=this;csArray.prototype.forEach.call(Object.keys(this.ue),(function(n){var i=t.ue[n],r=i.metadata,e=i.events;t.Wt.save({key:"".concat(r.sn,".").concat(r.pn,".").concat(r.ri),metadata:Y(Y({},r),{datatype:"json"}),events:csJSON.stringify(e)})}))},n.prototype.save=function(t){this.Wt.save(t)},J([fn("RecordingRecovery")],n.prototype,"recover",null),n}(fi),rr=/[^\s]/g;function er(t){return csString.prototype.replace.call(t,rr,"a")}var sr,ur,or,hr,cr=function(){function t(t,n,i,r){this.ce=t,this.hn=n,this.ae=i,this.an=r,this.fe=!1}return t.prototype.setAnonymization=function(t){this.ve=t},t.prototype.isDOMSerializationInProgress=function(){return this.fe},t.prototype.serializeInitialDom=function(t,n){if(this.ce.isAsynchronous())this.serializeDocumentAsync(t).then((function(t){t&&n(t)})).catch((function(t){sn.error(t)}));else{var i=this.le(t);n(i)}},t.prototype.le=function(t){return{args:[this.ce.serialize(t,{withAnonymization:this.ve})],date:St(),type:gn.INITIAL_DOM}},t.prototype.serializeDocumentAsync=function(t){return $(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:this.fe=!0,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.ce.startSerializeAsync(t,{withAnonymization:this.ve})];case 2:return[2,n.sent()];case 3:return this.fe=!1,[7];case 4:return[2]}}))}))},t.prototype.serializeMutationCharacterData=function(t){var n,i=this.hn.getId(t.target);if(!i)return null;var r=t.target;if(r.data===t.oldValue)return null;if(v(r)&&(null===(n=this.an)||void 0===n?void 0:n.shouldEncrypt(r)))return this.an.registerTextNodeMutationToEncrypt({targetId:i,textNode:r,serializedTextData:er(r.data),date:t.date}),null;var e=this.ae.getAnonymizedText(this.ve,r,r.data);v(r)&&(e=this.ce.serializeTextMutation(r,e));var s=[i,e];return this.de(this.ce)&&this.isDOMSerializationInProgress()&&this.ce.handleMutationCharacterData(t,s),s},t.prototype.serializeAttachShadowEvent=function(t){var n=this.hn.getId(t.target);return n?[n,this.ce.serialize(t.shadowRoot)]:null},t.prototype.serializeMutationAttribute=function(t){var n=this.hn.getId(t.target);if(!n)return null;var i=t.target,r=t.attributeName,e=t.attributeNamespace,s=Di.getAttributeNS(t.target,e,r);s&&(s=this.ae.getAnonymizedAttributeValue(i,this.ve,r,s),s=this.ce.serializeAttributeMutationValue(t.target,r,s));var u=[n,e,r,s];return this.de(this.ce)&&this.isDOMSerializationInProgress()&&this.ce.handleMutationAttribute(t.oldValue?this.ae.getAnonymizedAttributeValue(i,this.ve,r,t.oldValue):t.oldValue,u),u},t.prototype.serializeMutationChildList=function(t,n){var i=this.hn.getId(t.target);return i?this.de(this.ce)&&this.isDOMSerializationInProgress()?this.ce.serializeMutationChildList(t,this.ve,n):{removedNodes:this.we(t),addedNodes:this.ye(t,i,n)}:(ti(t.addedNodes,(function(t){var i=n.get(t);i&&n.set(t,i-1)})),null)},t.prototype.de=function(t){return t.isAsynchronous()},t.prototype.we=function(t){for(var n=[],i=0;i<t.removedNodes.length;i+=1){var r=this.hn.getId(t.removedNodes[i]);r&&csArray.prototype.push.call(n,[r])}return n},t.prototype.ye=function(t,n,i){var r=[],e=null;if(t.nextSibling){var s=this.hn.getId(t.nextSibling);e=void 0!==s?s:null}for(var u=0;u<t.addedNodes.length;u+=1){var o=t.addedNodes[u],h=this.ce.serialize(o,{excludedNodes:i,withAnonymization:this.ve}),c=i.get(o);c&&i.set(o,c-1),csArray.prototype.push.call(r,[n,e,h])}return r},J([Vn("serializeDocumentAsync")],t.prototype,"serializeDocumentAsync",null),t}(),ar=function(){function t(t,n,i,r){var e=this;this.hn=t,this.cn=n,this.Vn=i,this.Qi=r,this.pe()&&(this.ge=Li(window.CSSStyleDeclaration.prototype,"cssText",(function(t,n){return e.setStyleDeclarationCssText(t,n)})))}return t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){this.Ae=this.Qi.registerToInsertRuleInterceptor(this.sendInsertion.bind(this)),this.Se=this.Qi.registerToDeleteRuleInterceptor(this.sendDeletion.bind(this)),this.ge&&this.ge.activate()},t.prototype.stop=function(){var t,n;null===(t=this.Ae)||void 0===t||t.call(this),null===(n=this.Se)||void 0===n||n.call(this),this.ge&&this.ge.deactivate()},t.prototype.setStyleDeclarationCssText=function(t,n){var i=this.Ee(t);if((null==i?void 0:i.ownerNode)&&(!f(i.ownerNode)||!this.cn.isSensitiveChild(i.ownerNode))){var r=this.hn.getId(i.ownerNode);if(r){var e=this.be(i.cssRules,t.parentRule),s={date:St(),type:gn.STYLESHEET_CSS_TEXT_UPDATE,args:[r,e,n]};this.Kn(s),this.Vn.scanCssString(n)}}},t.prototype.Ee=function(t){var n=t.parentRule;return n&&n.parentStyleSheet},t.prototype.be=function(t,n){return csArray.prototype.indexOf.call(csArray.from(t),n)},t.prototype.pe=function(){return window.CSSStyleDeclaration&&window.CSSStyleDeclaration.prototype&&Object.getOwnPropertyDescriptor(window.CSSStyleDeclaration.prototype,"cssText")},t.prototype.sendInsertion=function(t,n){var i=n[0],r=n[1];if(t.ownerNode&&(!f(t.ownerNode)||!this.cn.isSensitiveChild(t.ownerNode))){var e=this.hn.getId(t.ownerNode);if(e){var s={date:St(),type:gn.STYLESHEET_RULE_INSERT,args:Ct(r)?[e,i,r]:[e,i]};this.Kn(s),this.Vn.scanCssString(i)}}},t.prototype.sendDeletion=function(t,n){var i=n[0];if(t.ownerNode&&(!f(t.ownerNode)||!this.cn.isSensitiveChild(t.ownerNode))){var r=this.hn.getId(t.ownerNode);if(r){var e={date:St(),type:gn.STYLESHEET_RULE_DELETE,args:[r,i]};this.Kn(e)}}},J([fn("styleSheetRuleTracker.setStyleDeclarationCssText")],t.prototype,"setStyleDeclarationCssText",null),J([fn("styleSheetRuleTracker.sendInsertion")],t.prototype,"sendInsertion",null),J([fn("styleSheetRuleTracker.sendDeletion")],t.prototype,"sendDeletion",null),t}(),fr="data-cs-mask",vr=function(){function t(t){this.cn=t}return t.prototype.beforeSerializeChildren=function(t,n){return this.cn.isSensitive(t)||this.Re(t)?[]:n},t.prototype.beforeSerializeAttributes=function(t,n){var i=this;return this.cn.isSensitive(t)&&!A(t)&&(csArray.prototype.push.call(n,this.Ne(t)),t.hasAttribute(fr)||csArray.prototype.push.call(n,document.createAttribute(fr))),csArray.prototype.filter.call(n,(function(n){return!i.cn.isSensitiveAttribute(t,n.name)}))},t.prototype.Re=function(t){return R(t)&&this.cn.isSensitive(t.host)},t.prototype.Ne=function(t){var n=t.getBoundingClientRect(),i=document.createAttribute("style");return i.value="width: ".concat(n.width,"px !important; height: ").concat(n.height,"px !important;"),t.__contentsquare_height=n.height,t.__contentsquare_width=n.width,i},t}(),lr=null!==(sr=Bt.Element)&&void 0!==sr?sr:{prototype:{}},dr=null!==(ur=Bt.Node)&&void 0!==ur?ur:{prototype:{}},wr=function(t){return Object.getOwnPropertyDescriptor(t.prototype,"localName")},yr=null!==(or=wr(lr))&&void 0!==or?or:wr(dr);!function(t){t[t.WebElement=0]="WebElement",t[t.MobileView=1]="MobileView",t[t.WebViewContainer=2]="WebViewContainer"}(hr||(hr={}));var pr=function(t){this.csId=t.__contentsquare_identifier,this.format=hr.WebElement,t.__contentsquare_artificial&&(this.artificial=t.__contentsquare_artificial)};var mr=function(t){function n(n){var i,r=t.call(this,n)||this;return r.attributes=[],r.localName=(i=n,yr.get.call(i)),r.namespaceURI=n.namespaceURI,r.children=[],r.nodeType=1,r}return W(n,t),n}(pr),gr=["id","class","style","src","srcset","sizes","href","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot",M],Ar=function(){function t(t,n){this.M=t,this.L=n,this.Te=new Set,this.Oe=""}return t.prototype.init=function(){var t=this;csArray.prototype.forEach.call(gr,(function(n){t.Te.add(n)})),csArray.prototype.forEach.call(this.L.whitelistedAttributes,(function(n){t.Te.add(n)}))},t.prototype.beforeSerializeChildren=function(t,n,i){return(m(t)||this.Ie(t))&&(i.withAnonymization=!1),n},t.prototype.serializeAttribute=function(t,n,i,r){i.anonymized=r.withAnonymization;var e=this.getAnonymizedAttributeValue(t,r.withAnonymization,i.name,i.value);i.value=e},t.prototype.serializeTextNode=function(t,n,i){n.data=this.getAnonymizedText(i.withAnonymization,t,n.data)},t.prototype.serializeCDATASectionNode=function(t,n,i){var r=t.data;return n.data=i.withAnonymization?er(r):this.M.anonymizePII(r),n},t.prototype.getAnonymizedText=function(t,n,i){if(csNodeparentNode.apply(n)){if(m(csNodeparentNode.apply(n)))return i;if(t&&this.Ie(csNodeparentNode.apply(n)))return this.M.anonymizePII(i)}return t?er(i):this.M.anonymizePII(i)},t.prototype.getAnonymizedAttributeValue=function(t,n,i,r){return this.ke(i)||S(t)||f(e=t)&&"slot"===e.localName?r:n&&g(t)&&("submit"===t.type||"button"===t.type)&&"value"===i?er(r):n?"":this.M.anonymizePII(r);var e},t.prototype.setWhitelistedElementsSelector=function(t){this.Oe=t},t.prototype.getWhitelistedElementsSelector=function(){return this.Oe},t.prototype.afterSerialize=function(t,n,i){null==n.anonymized&&(n.anonymized=i.withAnonymization),n instanceof mr&&n.shadowRoot&&null==n.shadowRoot.anonymized&&(n.shadowRoot.anonymized=i.withAnonymization)},t.prototype.ke=function(t){return this.Te.has(t)},t.prototype.Ie=function(t){return f(t)&&(t.hasAttribute("data-cs-capture")||this.Ce(t))},t.prototype.Ce=function(t){return!!this.Oe&&C.call(t,this.Oe)},t}(),Sr=function(){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._e=t}return t.prototype.addProvider=function(t){csArray.prototype.push.call(this._e,t)},t.prototype.getRequestParameters=function(){return csArray.prototype.reduce.call(this._e,(function(t,n){return Y(Y({},n.getRequestParameters()),t)}),{})},t}();function Er(t,n){var i,r,e,s,u=null,o=function(h){var c=St();if(!h&&null!==u){var a=n-(c-u);if(a>0)return void(r=window.setTimeout(o,a))}var f=c-e;r=null,u=null,e=null,s=t.apply(void 0,Ln([f],i,!1))},h=function(){for(var t=[],h=0;h<arguments.length;h++)t[h]=arguments[h];if(i=Ln([],t,!0),!e)return e=St(),r=window.setTimeout(o,n),s;u=St()};return h.flushPending=function(){r&&(window.clearTimeout(r),o(!0))},h.cancel=function(){u=null,e=null,r&&(window.clearTimeout(r),r=null)},h}function br(t){return void 0===t&&(t=0),function(n,i,r){var e=r.value,s=!1;r.value=function(){for(var n=this,i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];s||(s=!0,setTimeout((function(){s=!1,e.apply(n,i)}),t))}}}var Rr=function(){function t(t){var n=this;this.L=t,this.Pe=!1,this.xe=Er((function(){n.Pe=!1,n.Le()}),this.L.pendingInactivityTimeout)}return t.prototype.start=function(){this.Pe=!0,this.xe()},t.prototype.stop=function(){this.Pe=!1,this.xe.cancel()},t.prototype.trackActivity=function(){this.Pe||(this.Pe=!0,this.Me()),this.xe()},t.prototype.isUserActive=function(){return this.Pe},t.prototype.onActivityStopped=function(t){this.Le=t},t.prototype.onActivityResumed=function(t){this.Me=t},t}(),Nr=function(){function t(t,n,i){var r=this;this.De=t,this.M=n,this.Ue=i,this.je=[{boundElement:window,type:"resize",listener:function(){return r.resizeListener()}},{boundElement:window,type:"hashchange",listener:function(){return r.hashChangeListener()}},{boundElement:document,type:"visibilitychange",listener:function(){return r.visibilityChangeListener()}}]}return t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){this.kn(),this.triggerInitialEvents(),this.Ue&&(this.Ue.setOnScreenChangedCallback(this.Kn),this.Ue.start())},t.prototype.stop=function(){var t;this.Ln(),null===(t=this.Ue)||void 0===t||t.stop()},t.prototype.kn=function(){csArray.prototype.forEach.call(this.je,(function(t){return On(t)}))},t.prototype.Ln=function(){csArray.prototype.forEach.call(this.je,(function(t){return In(t)}))},t.prototype.triggerInitialEvents=function(){this.resizeListener(),this.hashChangeListener()},t.prototype.resizeListener=function(){var t,n={type:gn.RESIZE,args:[Ci.windowWidth(),Ci.windowHeight()],date:St()};this.Kn(n),null===(t=this.Ue)||void 0===t||t.onScreenPotentiallyChanged()},t.prototype.hashChangeListener=function(){var t={type:gn.HASH_CHANGE,args:[this.M.anonymizePII(this.De.href)],date:St()};this.Kn(t)},t.prototype.visibilityChangeListener=function(){var t={type:gn.VISIBILITY_CHANGE,args:[document.visibilityState],date:St()};this.Kn(t)},J([fn("resize")],t.prototype,"resizeListener",null),J([fn("hashChange")],t.prototype,"hashChangeListener",null),J([fn("visibilityChange")],t.prototype,"visibilityChangeListener",null),t}(),Tr=function(t){function n(n,i,r,e,s,u,o){var h=t.call(this)||this;return h.nr=n,h.tr=i,h.ze=r,h.He=e,h.Fn=s,h.Be=u,h.Wn=o,h.qe=0,h}return W(n,t),n.prototype.init=function(){var t=this;this.nr.onEvent((function(n,i){i||t.Fe()})),this.He.onRecordingRequestSent((function(){t.qe+=1,t.Ge()})),this.ze.onActivityStopped((function(){t.Ge()})),this.ze.onActivityResumed((function(){t.tr.isStarted()||t.Ve()}))},n.prototype.onIframeRecordingUserEvent=function(t){this.Fe()},n.prototype.onStart=function(){this.ze.start()},n.prototype.onStop=function(){this.ze.stop()},n.prototype.Ge=function(){this.tr.isStarted()&&!this.Fn.isDOMSerializationInProgress()&&!this.ze.isUserActive()&&this.qe>=2&&this.We()},n.prototype.Fe=function(){this.ze.trackActivity(),this.qe=0},n.prototype.We=function(){this.tr.stop(),this.Wn.emitRecordingStatusChange()},n.prototype.Ve=function(){this.Fn.setAnonymization(this.Be.shouldUseAnonymization()),this.tr.start(),this.Wn.emitRecordingStatusChange()},n}(fi);var Or=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function Ir(t,n){var i=t.replace(Or,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];var r=t[3]||t[4],e=t[9]||t[10]||t[11],s=(r||e).trim().replace(/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g,(function(t,n,i,r){if("\\"===n)return t.slice(1);if(r)return r;var e=parseInt(i,16);return 55296<=e&&e<=57343||0===e||e>1114111?"":String.fromCodePoint(e)}));return(r?"@import ":"")+"url("+function(t){if(-1===t.indexOf('"'))return'"'+t+'"';if(-1===t.indexOf("'"))return"'"+t+"'";return t}(n(s)||s)+")"}));return i}function kr(t){var n=[];return Ir(t,(function(t){return n.push(t),t})),n}function Cr(t){return bt(t,"data:")}function _r(t){return bt(t,"#")}function Pr(t){var n=csString.prototype.trim.call(t);if(""===t)return[];var i,r=(i=n,csString.prototype.split.call(i,/\s(.+)/)),e=r[0],s=r[1];return s?(Rt(e,",")||(s=function(t){return csString.prototype.split.call(t,/,(.+)/)[1]||""}(s)),Ln([xr(e)],Pr(s),!0)):[xr(e)]}function xr(t){return csString.prototype.split.call(t,/,$/)[0]}var Lr,Mr=function(){function t(){this.Ye=!0}return t.prototype.enable=function(){this.Ye||(this.Ye=!0)},t.prototype.disable=function(){this.Ye&&(this.Ye=!1)},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.onAsset=function(t){this.Je=t},t.prototype.onStyleSheetFound=function(t){this.$e=t},t.prototype.serializeElementNode=function(t){this.Ye&&this.Ke(t)},t.prototype.beforeSerializeChildren=function(t,n,i){return this.Ye&&this.Xe(t,n),n},t.prototype.scanAttribute=function(t,n){this.Ze(t,n)},t.prototype.scanText=function(t){v(t)&&csNodeparentNode.apply(t)&&m(csNodeparentNode.apply(t))&&this.scanCssString(t.data)},t.prototype.scanCssString=function(t){this.Qe(kr(t))},t.prototype.Ke=function(t){this.Ze(t)},t.prototype.Xe=function(t,n){var i=this;m(t)&&ti(n,(function(t){v(t)&&i.scanCssString(t.data)}))},t.prototype.Ze=function(t,n){this.ns(t,n)||(this.rs(t,n),this.es(t,n),this.ss(t,n))},t.prototype.ns=function(t,n){var i,r,e;if(y(t)&&(!n||"href"===n)&&t.href){var s=(null===(i=t.sheet)||void 0===i?void 0:i.href)||t.href,u={assetId:s,assetBasePath:window.location.href,assetRawPath:t.getAttribute("href")};return null===(r=this.$e)||void 0===r||r.call(this,u),null===(e=this.Je)||void 0===e||e.call(this,u),this.us(s),!0}return!1},t.prototype.hs=function(t){return!this.cs(t)&&!Cr(t)&&!_r(t)},t.prototype.rs=function(t,n){var i;if(p(t)){if(!n||"src"===n){var r=t.getAttribute("src");r&&this.hs(r)&&(this.us(t.src),null===(i=this.Je)||void 0===i||i.call(this,{assetId:t.src,assetRawPath:r,assetBasePath:window.location.href}))}n&&"srcset"!==n||!t.srcset||this.fs(t.srcset)}},t.prototype.es=function(t,n){if((!n||"style"===n)&&t.hasAttribute("style")){var i=t.getAttribute("style");if("string"!=typeof i)throw new Error("Unexpected style: "+t.outerHTML);this.scanCssString(i)}},t.prototype.fs=function(t){this.Qe(Pr(t))},t.prototype.ss=function(t,n){var i,r;if((S(r=t)&&"image"===r.localName||function(t){return S(t)&&"use"===t.localName}(t)||function(t){return S(t)&&"feImage"===t.localName}(t))&&(!n||"href"===n||"xlink:href"===n)){var e=t.getAttribute("href")||t.getAttribute("xlink:href");if(e&&this.hs(e)){var s=Vt(e);this.us(s),null===(i=this.Je)||void 0===i||i.call(this,{assetId:s,assetRawPath:e,assetBasePath:window.location.href})}}},t.prototype.Qe=function(t){var n=this;return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(csArray.prototype.filter.call(csArray.prototype.filter.call(t,(function(t){return!n.cs(t)})),(function(t){return!Cr(t)})),(function(t){return!_r(t)})),(function(t){return{rawUrl:t,absoluteUrl:Vt(t)}})),(function(t){var i;n.Kn&&n.us(t.absoluteUrl),null===(i=n.Je)||void 0===i||i.call(n,{assetId:t.absoluteUrl,assetBasePath:window.location.href,assetRawPath:t.rawUrl})}))},t.prototype.us=function(t){var n,i={date:St(),type:gn.STATIC_RESOURCE_URL,args:[t]};null===(n=this.Kn)||void 0===n||n.call(this,i)},t.prototype.cs=function(t){return/^https:\/\/\w+:\w+@/.test(t)},t}();!function(t){t.REQUEST_START="requestStart",t.DOM_INTERACTIVE="domInteractive",t.TIME_ORIGIN="timeOrigin"}(Lr||(Lr={}));var Dr=function(){function t(t){this.vs=t.performance}return t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){this.ls()&&this.ds()},t.prototype.ds=function(){var t={args:this.ws(),date:St(),type:gn.PERFORMANCE_TIMINGS};this.Kn(t)},t.prototype.ls=function(){return!(!this.vs||!this.vs.timing)},t.prototype.ws=function(){return[{performanceTiming:Lr.REQUEST_START,timestamp:this.vs.timing.requestStart},{performanceTiming:Lr.DOM_INTERACTIVE,timestamp:this.vs.timing.domInteractive},{performanceTiming:Lr.TIME_ORIGIN,timestamp:this.vs.timeOrigin}]},t}(),Ur=function(t){function n(n){var i=t.call(this)||this;return i.ys=n,i.ps=new Map,i}return W(n,t),n.prototype.init=function(){this.gs(),this.As()},n.prototype.As=function(){var t=this;this.Gi=new csMutationObserver((function(n){t.handleMutations(n)}))},n.prototype.gs=function(){var t=this;this.Ss()&&(this.Es=xi({target:Element.prototype,methodName:"attachShadow",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}})),this.bs()&&(this.Rs=xi({target:Element.prototype,methodName:"createShadowRoot",hook:function(n){var i=n.context,r=n.result;return t.handleAttachShadow(i,r)}}))},n.prototype.onChildListMutation=function(t){this.Ns=t},n.prototype.onCharacterDataMutation=function(t){this.Ts=t},n.prototype.onAttributesMutation=function(t){this.Os=t},n.prototype.onAttachShadowMutation=function(t){this.Is=t},n.prototype.observe=function(t,n){this.isStarted&&this.Gi.observe(t,n)},n.prototype.onStart=function(){this.Es&&this.Es.activate(),this.Rs&&this.Rs.activate()},n.prototype.onStop=function(){this.Es&&this.Es.deactivate(),this.Rs&&this.Rs.deactivate(),this.ys.clearQueue(),this.Gi.disconnect()},n.prototype.flushPendingMutations=function(){if(this.isStarted){this.ys.runPendingTasks();var t=this.Gi.takeRecords();this.handleMutations(t,!0)}},n.prototype.Ss=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.attachShadow},n.prototype.bs=function(){return window.Element&&window.Element.prototype&&"function"==typeof window.Element.prototype.createShadowRoot},n.prototype.handleMutations=function(t,n){var i=this;void 0===n&&(n=!1);var r=St(),e=t.length>1?this.ks(t):t;this.ys.isEmpty()&&this.ps.clear(),this.Cs(e);for(var s=function(t){var s=e[t];s.date=r,u.ys.schedule((function(){i.processMutation(s,i.ps)}),n)},u=this,o=0;o<e.length;o+=1)s(o)},n.prototype.ks=function(t){for(var n=new Map,i=0;i<t.length;i+=1){if("attributes"===(f=t[i]).type){var r=f.target,e=f.attributeNamespace,s=f.attributeName,u="".concat(e||""," ").concat(s),o=n.get(r),h=Di.getAttributeNS(r,e,s)===f.oldValue?"none":"last";if(o)o.has(u)||o.set(u,h);else{var c=new Map;c.set(u,h),n.set(r,c)}}}var a=[];for(i=t.length-1;i>=0;i-=1){var f;if("attributes"===(f=t[i]).type){r=f.target,e=f.attributeNamespace,s=f.attributeName,u="".concat(e||""," ").concat(s);"last"===(o=n.get(r)).get(u)&&(csArray.prototype.push.call(a,f),o.set(u,"none"))}else csArray.prototype.push.call(a,f)}return csArray.prototype.reverse.call(a)},n.prototype.handleAttachShadow=function(t,n){this.Is({shadowRoot:n,date:St(),target:t})},n.prototype.processMutation=function(t,n){switch(t.type){case"attributes":this.Os(t);break;case"characterData":this.Ts(t);break;case"childList":this.Ns(t,n);break;default:throw new Error("mutation type is not supported")}},n.prototype.Cs=function(t){var n=this;csArray.prototype.forEach.call(t,(function(t){ti(t.addedNodes,(function(t){var i=n.ps.get(t);i?n.ps.set(t,i+1):n.ps.set(t,1)}))}))},J([fn("handleMutations")],n.prototype,"handleMutations",null),J([Gn("handleAttachShadow")],n.prototype,"handleAttachShadow",null),J([Gn("processMutation")],n.prototype,"processMutation",null),n}(fi),jr=function(t){function n(n,i){var r=t.call(this,n)||this;return r.hn=i,r._s={subtree:!0,attributes:!0,childList:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0},r}return W(n,t),n.prototype.init=function(){t.prototype.init.call(this),this.Nn()},n.prototype.Nn=function(){var t=this;this.hn.onDocumentIdentified((function(n){t.observe(n,t._s)}))},n}(Ur),zr=function(){function t(t){this.Ps=[],this.xs=[],this.jt={},this.zt=t}return t.prototype.setQueryParams=function(t){var n=this;csArray.prototype.forEach.call(Object.keys(t),(function(i){n.jt[i]=t[i]}))},t.prototype.removeQueryParams=function(t){var n=this;t?csArray.prototype.forEach.call(t,(function(t){delete n.jt[t]})):this.jt={}},t.prototype.onBeaconSuccess=function(t){csArray.prototype.push.call(this.Ps,t)},t.prototype.onBeaconFailure=function(t){csArray.prototype.push.call(this.xs,t)},t.prototype.send=function(t){var n=this,i=st.toQuery(Y(Y({},this.jt),{ct:wn.UNCOMPRESSED})),r=this.Ls(i,t);return r?csArray.prototype.forEach.call(this.Ps,(function(t){return t()})):csArray.prototype.forEach.call(this.xs,(function(t){return t(n.jt)})),r},t.prototype.Ls=function(t,n){try{if("function"!=typeof csNavigatorsendBeacon)return!1;var i=csNavigatorsendBeacon("".concat(this.zt,"?").concat(t),n||"");if(i)return i}catch(t){}return"function"==typeof navigator.sendBeacon&&navigator.sendBeacon("".concat(this.zt,"?").concat(t),n||"")},t}();function Hr(t){return function(t){for(var n=new ArrayBuffer(t.length),i=new Uint8Array(n),r=0,e=t.length;r<e;r+=1)i[r]=csString.prototype.charCodeAt.call(t,r);return n}(self.atob(t))}function Br(t){var n=csString.prototype.split.call(t,";base64,");return 2!==n.length?null:new Blob([Hr(n[1])],{type:csString.prototype.replace.call(n[0],"data:","")})}function qr(t){var n=csArray.from(new Uint8Array(t));return csArray.prototype.join.call(csArray.prototype.map.call(n,(function(t){return csString.prototype.padStart.call(t.toString(16),2,"0")})),"")}var Fr,Gr,Vr=function(){function t(t){this.Ms=t,this.Ds=!1}return t.prototype.init=function(){this.Ds=this.Us(),this.Ds&&(this.js=new TextEncoder)},t.prototype.isSupported=function(){return this.Ds},t.prototype.isValidInput=function(t){return!!t&&t.length<=100},t.prototype.digest=function(t,n){return $(this,void 0,void 0,(function(){var i,r;return K(this,(function(e){switch(e.label){case 0:if(!this.Ds)return[2,null];i=this.zs(t,n),r=this.js.encode(i),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,crypto.subtle.digest("SHA-1",r)];case 2:return[2,qr(e.sent())];case 3:return e.sent(),[2,null];case 4:return[2]}}))}))},t.prototype.Us=function(){return!!(this.Ms&&this.Ms.subtle&&this.Ms.subtle.digest&&self.TextEncoder&&csArray.from)},t.prototype.zs=function(t,n){var i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(t));return"".concat(i,":").concat(n)},t}();!function(t){t[t.TAP=0]="TAP",t[t.LONG_PRESS=1]="LONG_PRESS",t[t.DRAG=2]="DRAG",t[t.FLICK=3]="FLICK",t[t.PINCH_IN=4]="PINCH_IN",t[t.PINCH_OUT=5]="PINCH_OUT"}(Fr||(Fr={})),function(t){t[t.UP=1]="UP",t[t.DOWN=2]="DOWN",t[t.LEFT=3]="LEFT",t[t.RIGHT=4]="RIGHT"}(Gr||(Gr={}));var Wr=function(){function t(t,n,i){this.Hs=t,this.hn=n,this.cn=i}return t.prototype.start=function(){var n=this;this.Hs.subscribe(t.Bs,(function(t,i){return n.processGesture(t,i)}))},t.prototype.stop=function(){this.Hs.unsubscribe(t.Bs)},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.processGesture=function(t,n){if(t.target&&(!f(t.target)||!this.cn.isSensitiveChild(t.target))){var i=this.hn.getId(t.target);if(i)switch(t.type){case Fr.DRAG:case Fr.FLICK:this.qs(En.SWIPE,t,i,n);break;case Fr.LONG_PRESS:this.qs(En.LONG_PRESS,t,i,n);break;case Fr.TAP:this.qs(En.TAP,t,i,n);break;case Fr.PINCH_IN:this.qs(En.PINCH_IN,t,i,n);break;case Fr.PINCH_OUT:this.qs(En.PINCH_OUT,t,i,n)}}},t.prototype.qs=function(t,n,i,r){var e=this.Fs(n,t,r),s={type:gn.GESTURE_RECOGNITION,args:[i,e],date:St()};this.Kn(s)},t.prototype.Fs=function(t,n,i){var r={type:n};if(t.direction&&(r.direction=t.direction),t.distance&&(r.distance=t.distance),t.velocity&&(r.velocity=t.velocity),n===En.TAP&&i.changedTouches&&1===i.changedTouches.length){var e=i.changedTouches[0];r.pageX=kn(e.pageX,1),r.pageY=kn(e.pageY,1)}return r},t.Bs="RecordingGesturesTracker",J([Yn()],t.prototype,"processGesture",null),t}(),Yr=function(t){function n(n){var i=t.call(this,n)||this;return i.name=n.name,i.publicId=n.publicId,i.systemId=n.systemId,i.nodeType=10,i}return W(n,t),n}(pr),Jr=function(t){var n;this.name=t.name,this.value=t.value,this.namespaceURI=null!==(n=t.namespaceURI)&&void 0!==n?n:""},$r=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=3,i}return W(n,t),n}(pr),Kr=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=4,i}return W(n,t),n}(pr),Xr=function(t){function n(n){var i=t.call(this,n)||this;return i.data=n.data,i.nodeType=8,i}return W(n,t),n}(pr),Zr=function(t){function n(i){var r=t.call(this,i)||this;return r.baseURI=n.getBaseURI(i),r.children=[],r.nodeType=9,r}return W(n,t),n.getBaseURI=function(t){var n=t.baseURI;if(null==n){var i=t.getElementsByTagName("base");n=0!==i.length?i[0].href:t.URL}return n},n}(pr),Qr=function(t){function n(n){var i=t.call(this,n)||this;return i.mode=n.mode,i.children=[],i.nodeType=11,i}return W(n,t),n}(pr),te=function(){function t(n){for(var i=function(i){var e=csArray.prototype.map.call(csArray.prototype.filter.call(n,(function(t){return t[i]})),(function(t){return function(n,r,e,s){return t[i](n,r,e,s)}})),s=t.Gs(e);r[i]=s},r=this,e=0,s=t.Vs;e<s.length;e++){i(s[e])}}return t.create=function(n){return new t(n)},t.Gs=function(t){var n=csArray.prototype.map.call(t,(function(t){return function(n,i,r,e){return t(n,i,r,e)||i}})),i=n[0],r=n[1],e=n[2],s=n[3],u=n[4];switch(t.length){case 0:return function(t,n){return n};case 1:return t[0];case 2:return function(t,n,e,s){return r(t,i(t,n,e,s),e,s)};case 3:return function(t,n,s,u){return e(t,r(t,i(t,n,s,u),s,u),s,u)};case 4:return function(t,n,u,o){return s(t,e(t,r(t,i(t,n,u,o),u,o),u,o),u,o)};case 5:return function(t,n,o,h){return u(t,s(t,e(t,r(t,i(t,n,o,h),o,h),o,h),o,h),o,h)};default:return function(n,i,r,e){for(var s=i,u=0;u<t.length;u++)s=t[u](n,i,r,e)||s;return i}}},t.Vs=["beforeSerializeAttributes","beforeSerializeChildren","afterSerialize","afterSerializeShadowRoot","serializeElementNode","serializeAttribute","serializeTextNode","serializeCDATASectionNode","serializeCommentNode","serializeDocumentNode","serializeShadowRootNode","serializeTextMutation","serializeAttributeMutationValue"],t}(),ne=function(){function t(t){this.Ws=te.create(t)}return t.prototype.isAsynchronous=function(){return!0},t.prototype.serializeTextMutation=function(t,n){return this.Ws.serializeTextMutation(t,n)},t.prototype.serializeAttributeMutationValue=function(t,n,i){return this.Ws.serializeAttributeMutationValue(t,i,n)},t.prototype.serialize=function(t,n){var i,r=Y({},n),e=t.nodeType;switch(e){case 1:i=this.Ys(t,r);break;case 3:i=this.Js(t,r);break;case 4:i=this.$s(t,r);break;case 7:case 8:i=this.Ks(t,r);break;case 10:i=new Yr(t);break;case 9:i=this.Xs(t,r);break;case 11:i=this.Zs(t,r);break;default:throw new Error("serialization is not supported (nodeType: ".concat(e,")"))}return this.Ws.afterSerialize(t,i,r),i},t.prototype.Ys=function(t,n){var i=new mr(t);this.Ws.serializeElementNode(t,i,n),i.attributes=this.Qs(t,n);var r=csElementshadowRoot.apply(t);return r&&(i.shadowRoot=this.tu(r,n)),i.children=this.nu(t,n),i},t.prototype.Qs=function(t,n){var i=Zn(t.attributes);i=this.Ws.beforeSerializeAttributes(t,i,n);for(var r=0;r<i.length;++r){var e=i[r];i[r]=this.iu(t,e,n)}return i},t.prototype.iu=function(t,n,i){var r=new Jr(n);return this.Ws.serializeAttribute(t,n,r,i),r},t.prototype.runBeforeSerializeChildrenHook=function(t,n,i){var r=i||csNodechildNodes.apply(t);return r=n.excludedNodes?ii(r,(function(t){return!n.excludedNodes.get(t)})):r,Zn(r=this.Ws.beforeSerializeChildren(t,r,n))},t.prototype.nu=function(t,n){if(n.skipChildrenSerialization)return[];for(var i=this.runBeforeSerializeChildrenHook(t,n),r=0;r<i.length;++r){var e=i[r];i[r]=this.serialize(e,n)}return i},t.prototype.Js=function(t,n){var i=new $r(t);return this.Ws.serializeTextNode(t,i,n),i},t.prototype.$s=function(t,n){var i=new Kr(t);return this.Ws.serializeCDATASectionNode(t,i,n),i},t.prototype.Ks=function(t,n){var i=new Xr(t);return this.Ws.serializeCommentNode(t,i,n),i},t.prototype.Xs=function(t,n){var i=new Zr(t);return this.Ws.serializeDocumentNode(t,i,n),i.children=this.nu(t,n),i},t.prototype.tu=function(t,n){var i=new Qr(t);return this.Ws.serializeShadowRootNode(t,i,n),i.children=this.nu(t,n),this.Ws.afterSerializeShadowRoot(t,i,n),i},t.prototype.Zs=function(t,n){if(t.mode)return this.tu(t,n);throw new Error("Not implemented yet.")},t}();function ie(){return $(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,new Promise((function(t){setTimeout((function(){t()}),0)}))];case 1:return t.sent(),[2]}}))}))}var re=function(){function t(t){this.hn=t,this.ru=!1,this.eu=new Map,this.su={},this.ou=new Map,this.hu=new Map,this.au=new Set,this.fu=new Map}return t.prototype.beforeSerializeChildren=function(t,n){var i=this;return this.ru?ii(n,(function(t){return!i.isAddedNodeDuringSerialization(t)})):n},t.prototype.beforeSerializeAttributes=function(t,n,i){if(!this.ru)return n;var r=this.hn.getId(t);if(!r)return n;var e=this.hu.get(r);return e?csArray.prototype.filter.call(n,(function(t){var n="".concat(t.name).concat(t.namespaceURI||""),i=e.get(n);return!(i&&null===i.value)})):n},t.prototype.serializeTextNode=function(t,n,i){if(this.ru){var r=this.ou.get(n.csId);r&&(n.data=r)}},t.prototype.serializeCommentNode=function(t,n){if(this.ru){var i=this.ou.get(n.csId);i&&(n.data=i)}},t.prototype.afterSerialize=function(t,n,i){this.ru&&(csNodeparentNode.apply(t)&&!this.getSerializedNodeByNode(csNodeparentNode.apply(t))||i.skipRegisterNode||this.vu(n,i))},t.prototype.afterSerializeShadowRoot=function(t,n,i){this.ru&&(i.skipRegisterNode||this.vu(n,i))},t.prototype.enable=function(){this.ru=!0,this.lu()},t.prototype.disable=function(){this.ru=!1,this.lu()},t.prototype.setDefaultSerializationOptions=function(t){this.su=t},t.prototype.getSerializedNodeById=function(t){var n;return null===(n=this.eu.get(t))||void 0===n?void 0:n.serializedNode},t.prototype.getSerializedNodeByNode=function(t){var n,i=this.hn.getId(t);if(i)return null===(n=this.eu.get(i))||void 0===n?void 0:n.serializedNode},t.prototype.getOptions=function(t){var n,i=this.hn.getId(t);return i&&(null===(n=this.eu.get(i))||void 0===n?void 0:n.options)||this.su},t.prototype.registerInitialCharacterData=function(t,n){this.ou.get(t)||this.ou.set(t,n)},t.prototype.registerInitialAttributes=function(t,n,i,r){var e=this.hu.get(t),s="".concat(i).concat(n||"");if(e){if(e.has(s))return}else e=new Map,this.hu.set(t,e);var u={name:i,namespaceURI:n||"",value:r};e.set(s,u)},t.prototype.markAddedTreeAsProcessed=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=i.nextNode();){var r=this.hn.getId(n);r&&this.au.add(r)}},t.prototype.markRemovedNodeAsProcessed=function(t,n,i){var r=this.hn.getId(i),e=this.hn.getId(t);if(r&&e){var s=this.fu.get(r);if(s)csArray.prototype.push.call(s.removedNodeIds,e),csArray.prototype.indexOf.call(s.childNodeIds,e)<0&&csArray.prototype.push.call(s.childNodeIds,e);else{for(var u=[],o=n?this.hn.getId(n):null,h=0;h<csNodechildNodes.apply(i).length;h+=1){var c=this.hn.getId(csNodechildNodes.apply(i)[h]);c&&!this.au.has(c)&&(o&&c===o&&csArray.prototype.push.call(u,e),csArray.prototype.push.call(u,c))}null===o&&csArray.prototype.push.call(u,e);var a=[e];this.fu.set(r,{childNodeIds:u,removedNodeIds:a})}}},t.prototype.addSerializedChildToParent=function(t,n,i){var r=this.getSerializedNodeByNode(t);r&&se(r)&&this.du(n,r,i)},t.prototype.isAddedNodeDuringSerialization=function(t){var n=this.hn.getId(t);return!!n&&this.au.has(n)},t.prototype.getInitialIndexInParent=function(t,n){var i=this.hn.getId(n),r=this.hn.getId(t);if(!i||!r)return-1;var e=this.fu.get(i);return e?csArray.prototype.indexOf.call(e.childNodeIds,r):-1},t.prototype.lu=function(){this.eu.clear(),this.ou.clear(),this.hu.clear(),this.au.clear(),this.fu.clear()},t.prototype.vu=function(t,n){t.csId&&(this.wu(t.csId,t,n),this.yu(t.csId,t),this.eu.set(t.csId,{serializedNode:t,options:n}))},t.prototype.wu=function(t,n,i){if(function(t){return t instanceof mr}(n)){var r=this.hu.get(t);if(r){for(var e=0,s=n.attributes;e<s.length;e++){var u=s[e],o="".concat(u.name).concat(u.namespaceURI||""),h=r.get(o);h&&null!==h.value&&(u.value=h.value,r.delete(o))}r.forEach((function(t){null!==t.value&&csArray.prototype.push.call(n.attributes,{name:t.name,value:t.value,namespaceURI:t.namespaceURI,anonymized:i.withAnonymization||!1})}))}}},t.prototype.du=function(t,n,i){(i.csId||ee(i))&&(t>=0?csArray.prototype.splice.call(n.children,t,0,i):ee(i)&&csArray.prototype.push.call(n.children,i))},t.prototype.yu=function(t,n){var i;if(se(n)){var r=this.fu.get(t);if(r)for(var e=0,s=r.removedNodeIds;e<s.length;e++){var u=s[e],o=csArray.prototype.indexOf.call(r.childNodeIds,u);if(-1!==o){var h=null===(i=this.eu.get(u))||void 0===i?void 0:i.serializedNode;void 0!==h&&this.du(o,n,h)}}}},t}();function ee(t){return"artificial"in t}function se(t){return"children"in t}var ue,oe,he={taskTime:25},ce=function(t){function n(n,i,r,e){void 0===r&&(r=new re(i)),void 0===e&&(e=he);var s=t.call(this,X([r],n,!0))||this;return s.pu=i,s.mu=r,s.gu=e,s.Au=0,s.Su=s.gu.taskTime,s}return W(n,t),n.prototype.isAsynchronous=function(){return!0},n.prototype.handleMutationAttribute=function(t,n){var i=n[0],r=n[1],e=n[2];this.mu.getSerializedNodeById(i)||this.mu.registerInitialAttributes(i,r,e,t)},n.prototype.handleMutationCharacterData=function(t,n){var i=n[0];this.mu.getSerializedNodeById(i)||this.mu.registerInitialCharacterData(i,t.oldValue||"")},n.prototype.serializeMutationChildList=function(t,n,i){var r=this.ye(t,n,i);return this.Eu(t),{removedNodes:this.we(t,n),addedNodes:r}},n.prototype.startSerializeAsync=function(t,n){return void 0===n&&(n={}),$(this,void 0,void 0,(function(){return K(this,(function(i){return this.Au+=1,this.mu.setDefaultSerializationOptions(n),[2,this.bu(t,n)]}))}))},n.prototype.ye=function(t,n,i){var r=[],e=null;if(t.nextSibling){var s=this.pu.getId(t.nextSibling);e=void 0!==s?s:null}for(var u=this.pu.getId(t.target),o=0;o<t.addedNodes.length;o+=1){var h=t.addedNodes[o],c=this.serialize(h,{excludedNodes:i,skipRegisterNode:!0,withAnonymization:n}),a=i.get(h);a&&i.set(h,a-1),csArray.prototype.push.call(r,[u,e,c])}return r},n.prototype.Eu=function(t){for(var n=0;n<t.addedNodes.length;n+=1){var i=t.addedNodes[n];this.mu.markAddedTreeAsProcessed(i)}},n.prototype.Ru=function(t,n){if(!n)return-1;var i=this.mu.getInitialIndexInParent(t,n);return i>=0?i:csArray.prototype.indexOf.call(csNodechildNodes.apply(n),t)},n.prototype.we=function(t,n){for(var i=[],r=0;r<t.removedNodes.length;r+=1){var e=t.removedNodes[r];if(this.mu.markRemovedNodeAsProcessed(e,t.nextSibling,t.target),this.Nu(e))this.Tu(e)&&this.Ou(e,n);else{var s=this.serialize(e,{withAnonymization:n});if(this.Tu(t.target)){var u=this.Ru(e,t.target);this.mu.addSerializedChildToParent(t.target,u,s)}}var o=this.pu.getId(e);o&&csArray.prototype.push.call(i,[o])}return i},n.prototype.Ou=function(t,n){for(var i=0;i<csNodechildNodes.apply(t).length;i+=1){var r=csNodechildNodes.apply(t)[i];if(this.Tu(r))this.Ou(r,n);else if(!this.mu.isAddedNodeDuringSerialization(r)){var e=this.serialize(r,{withAnonymization:n}),s=this.Ru(r,t);this.mu.addSerializedChildToParent(t,s,e)}}},n.prototype.Tu=function(t){return!!this.mu.getSerializedNodeByNode(t)},n.prototype.Nu=function(t){return this.Tu(t)||this.mu.isAddedNodeDuringSerialization(t)},n.prototype.bu=function(t,n){return void 0===n&&(n={}),$(this,void 0,void 0,(function(){var i,r,e,s,u,o,h,c,a,v,l;return K(this,(function(d){switch(d.label){case 0:return i=this.Au,r=St(),this.mu.enable(),n.skipChildrenSerialization=!0,e=[t],[4,ie()];case 1:if(d.sent(),i!==this.Au)return[2,null];this.Iu=csDate.now(),this.serialize(t,n),d.label=2;case 2:if(!(e.length>0))return[3,7];s=csArray.prototype.pop.call(e),u=this.mu.getOptions(s),o=this.runBeforeSerializeChildrenHook(s,u),h=csArray.prototype.shift.call(o),d.label=3;case 3:return h?csDate.now()-this.Iu>this.Su?[4,ie()]:[3,5]:[3,6];case 4:if(d.sent(),i!==this.Au)return[2,null];this.Iu=csDate.now(),d.label=5;case 5:return this.Nu(h)?(h=csArray.prototype.shift.call(o),[3,3]):(csArray.prototype.push.call(e,h),c=this.serialize(h,u),a=this.Ru(h,s),this.mu.addSerializedChildToParent(s,a,c),f(h)&&csElementshadowRoot.apply(h)&&(v=csElementshadowRoot.apply(h),csArray.prototype.push.call(e,v)),h=csArray.prototype.shift.call(o),[3,3]);case 6:return[3,2];case 7:if(!(l=this.mu.getSerializedNodeByNode(t)))throw this.mu.disable(),new Error("traverseAndSerialize : fail to serialize");return this.mu.disable(),[2,{args:[l],date:r,type:gn.INITIAL_DOM}]}}))}))},n}(ne),ae=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return W(n,t),n.prototype.isAsynchronous=function(){return!1},n}(ne),fe=function(){function t(){this.ku=new Map,this.Cu=document.implementation.createHTMLDocument("")}return t.prototype.beforeSerializeChildren=function(t,n){if(!m(t))return n;var i=this._u(t);if(null===i||0===i.length)return n;if(function(t){for(var n=t.length,i=0;i<n;i++)switch(csString.prototype.charCodeAt.call(t,i)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}(t.textContent)){var r=Zn(n);return csArray.prototype.push.call(r,this.Pu(i)),r}var e=this.xu(t);if(e===i.length)return n;for(var s=new csArray(i.length-e),u=e,o=0;u<i.length;u+=1,o+=1)s[o]=i[u];r=Zn(n);return csArray.prototype.push.call(r,this.Pu(s)),r},t.prototype.xu=function(t){var n=this.ku.get(t.textContent);if(n)return n;var i=t.cloneNode(!0);i.textContent=t.textContent,this.Cu.head.appendChild(i);var r=this._u(i);return n=r?r.length:0,this.ku.set(t.textContent,n),this.Cu.head.removeChild(i),n},t.prototype._u=function(t){try{if(t.disabled)return null;var n=t.sheet;return n?n.cssRules||n.rules:null}catch(t){if("SecurityError"!==t.name&&"InvalidAccessError"!==t.name)throw t;return null}},t.prototype.Pu=function(t){var n="";ti(t,(function(t){return n+=t.cssText}));var i=document.createTextNode(n);return i.__contentsquare_artificial=!0,i},t}(),ve=function(){function t(t,n){this.hn=t,this.Qi=n,this.Lu=1,this.fn=!1}return t.prototype.isAdoptedStyleSheetsSupported=function(){return"adoptedStyleSheets"in Document.prototype&&"queueMicrotask"in window},t.prototype.init=function(){this.isAdoptedStyleSheetsSupported()&&(this.Mu=new Set,this.Du=Li(window.ShadowRoot.prototype,"adoptedStyleSheets",this.Uu.bind(this)),this.ju=Li(window.Document.prototype,"adoptedStyleSheets",this.Uu.bind(this)))},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){!this.fn&&this.isAdoptedStyleSheetsSupported()&&(this.fn=!0,this.zu(),this.Du&&this.Du.activate(),this.ju&&this.ju.activate())},t.prototype.stop=function(){this.fn&&this.isAdoptedStyleSheetsSupported()&&(this.fn=!1,this.Hu(),this.Mu.clear(),this.Du&&this.Du.deactivate(),this.ju&&this.ju.deactivate())},t.prototype.serializeDocumentNode=function(t){var n;(null===(n=t.adoptedStyleSheets)||void 0===n?void 0:n.length)&&this.Uu(t,t.adoptedStyleSheets)},t.prototype.serializeShadowRootNode=function(t){var n;(null===(n=t.adoptedStyleSheets)||void 0===n?void 0:n.length)&&this.Uu(t,t.adoptedStyleSheets)},t.prototype.zu=function(){this.Ae=this.Qi.registerToInsertRuleInterceptor(this.Bu.bind(this)),this.Se=this.Qi.registerToDeleteRuleInterceptor(this.qu.bind(this))},t.prototype.Hu=function(){var t,n;null===(t=this.Ae)||void 0===t||t.call(this),null===(n=this.Se)||void 0===n||n.call(this)},t.prototype.Uu=function(t,n){var i=this;if(this.fn){csArray.prototype.forEach.call(n,(function(t){return i.Fu(t)}));var r=csArray.prototype.map.call(n,(function(t){return i.Gu(t)})),e=this.hn.getId(t);e&&queueMicrotask((function(){var t={type:gn.SET_ADOPTED_STYLE_SHEETS,args:[e,r],date:St()};i.Kn(t)}))}},t.prototype.Gu=function(t){return t.__adopted_stylesheet_id},t.prototype.Bu=function(t,n){var i=n[0],r=n[1],e=this.Vu(t);if(e){var s={date:St(),type:gn.ADOPTED_STYLESHEET_RULE_INSERT,args:Ct(r)?[e,i,r]:[e,i]};this.Kn(s)}},t.prototype.qu=function(t,n){var i=n[0],r=this.Vu(t);if(r&&r){var e={date:St(),type:gn.ADOPTED_STYLESHEET_RULE_DELETE,args:[r,i]};this.Kn(e)}},t.prototype.Vu=function(t){return this.Mu.has(t)&&t.__adopted_stylesheet_id?t.__adopted_stylesheet_id:null},t.prototype.Fu=function(t){if(!this.Mu.has(t)){var n=this.Lu++;t.__adopted_stylesheet_id=n,this.Mu.add(t);var i=this.Wu(t),r={type:gn.REGISTER_ADOPTED_STYLE_SHEET,args:[n,i],date:St()};this.Kn(r)}},t.prototype.Wu=function(t){var n=[];try{n=csArray.prototype.map.call(t.cssRules,(function(t){return t.cssText}))}catch(t){sn.warn("AdoptedStylesheetsTracker.serializeStyleSheet: could not extract cssRules")}return{cssRules:n}},t}();!function(t){t.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",t.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",t.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",t.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(ue||(ue={})),function(t){t.START="start",t.NOT_START="not-start",t.END="end",t.NOT_END="not-end",t.CONTAIN="contain",t.NOT_CONTAIN="not-contain",t.EXACT="exact",t.NOT_EXACT="not-exact"}(oe||(oe={}));var le,de=function(){function t(t,n,i,r){this.Yu=t,this.L=n,this.X=i,this.Ju=r}return t.prototype.init=function(){this.$u()},t.prototype.shouldUseAnonymization=function(){if(this.Yu.isReplayUnanonymizedAllowedByConsent()){switch(this.L.anonymisationMethod){case null:case ue.replayRecordingMaskedUrlRegex:return!(!this.L.replayRecordingMaskedUrlRegex||!this.L.replayRecordingMaskedUrlRegex.test(this.X.getAnonymizedUrl()));case ue.replayRecordingMaskedUrlRegexRules:return this.Ju.evaluateUrl(this.X.getAnonymizedUrl())}return!1}switch(this.L.anonymisationMethod){case null:case ue.replayRecordingUnmaskedUrlRegex:return!(this.L.replayRecordingUnmaskedUrlRegex&&this.L.replayRecordingUnmaskedUrlRegex.test(this.X.getAnonymizedUrl()));case ue.replayRecordingUnmaskedUrlRegexRules:return!this.Ju.evaluateUrl(this.X.getAnonymizedUrl())}return!0},t.prototype.$u=function(){this.L.anonymisationMethod===ue.replayRecordingMaskedUrlRegexRules&&this.L.replayRecordingMaskedUrlRegexRules?this.Ju.setRegexRules(this.L.replayRecordingMaskedUrlRegexRules):this.L.anonymisationMethod===ue.replayRecordingUnmaskedUrlRegexRules&&this.L.replayRecordingUnmaskedUrlRegexRules&&this.Ju.setRegexRules(this.L.replayRecordingUnmaskedUrlRegexRules)},t}(),we=function(){function t(){}return t.isRecordingSupported=function(){return"MutationObserver"in window&&"visibilityState"in document},t.isAsyncSerializationSupported=function(){return"Promise"in window&&"findIndex"in csArray.prototype},t}(),ye=function(){function t(){this.fn=!1,this.Ku=[],this.Xu=[],this.Zu()}return t.prototype.registerToInsertRuleInterceptor=function(t){var n=this;return this.Qu(this.Ku,t)?function(){}:(csArray.prototype.push.call(this.Ku,t),function(){n.Ku=csArray.prototype.filter.call(n.Ku,(function(n){return n!==t}))})},t.prototype.registerToDeleteRuleInterceptor=function(t){var n=this;return this.Qu(this.Xu,t)?function(){}:(csArray.prototype.push.call(this.Xu,t),function(){n.Xu=csArray.prototype.filter.call(n.Xu,(function(n){return n!==t}))})},t.prototype.start=function(){var t,n;this.fn||(this.fn=!0,null===(t=this.no)||void 0===t||t.activate(),null===(n=this.io)||void 0===n||n.activate())},t.prototype.stop=function(){var t,n;this.fn&&(this.fn=!1,null===(t=this.no)||void 0===t||t.deactivate(),null===(n=this.io)||void 0===n||n.deactivate())},t.prototype.Qu=function(t,n){return csArray.prototype.indexOf.call(t,n)>-1},t.prototype.ro=function(t,n){csArray.prototype.forEach.call(this.Ku,(function(i){return i(t,n)}))},t.prototype.eo=function(t,n){csArray.prototype.forEach.call(this.Xu,(function(i){return i(t,n)}))},t.prototype.Zu=function(){var t=this;this.so()&&(this.no=xi({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:function(n){var i=n.context,r=n.args;t.ro(i,r)}})),this.uo()&&(this.io=xi({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:function(n){var i=n.context,r=n.args;return t.eo(i,r)}}))},t.prototype.so=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.insertRule)},t.prototype.uo=function(){var t,n;return"function"==typeof(null===(n=null===(t=window.CSSStyleSheet)||void 0===t?void 0:t.prototype)||void 0===n?void 0:n.deleteRule)},t}(),pe=function(){function t(t){this.oo={},this.ho=new oi(t)}return t.prototype.save=function(t){var n=t.key,i=t.metadata,r=t.events;this.ho.isThresholdReached()||(this.ho.addString(n),"string"==typeof r?this.ho.addString(r):this.ho.addArrayBuffer(r),this.ho.isThresholdReached()||(this.oo[n]={metadata:i,events:r}))},t.prototype.recover=function(t){var n=this,i=[];csArray.prototype.forEach.call(this.co(),(function(t){var r=n.oo[t];void 0!==r&&(delete r.metadata.datatype,csArray.prototype.push.call(i,r),n.ao(t))})),0!==i.length&&(t(i),this.ho.reset())},t.prototype.co=function(){return Object.keys(this.oo)},t.prototype.ao=function(t){delete this.oo[t]},t}();!function(t){t[t.NOT_STARTED=0]="NOT_STARTED",t[t.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",t[t.OPEN_FAILED=2]="OPEN_FAILED",t[t.READY=3]="READY"}(le||(le={}));var me,ge,Ae,Se,Ee=function(){function t(t,n,i){this.fo=t,this.vo=i,this.lo=le.NOT_STARTED,this.do=[],this.wo=0,this.yo=self.origin,this.po="object"==typeof window?"":"worker-",this.ho=new oi(n),this.mo()}return t.prototype.mo=function(){return $(this,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return[4,this.Ao()];case 1:return t.sent(),this.lo===le.READY?this.So():this.vo(this.do),[2]}}))}))},t.prototype.So=function(){var t=this;csArray.prototype.forEach.call(this.do,(function(n){t.save(n)})),this.do=[]},t.prototype.save=function(t){return $(this,void 0,void 0,(function(){var n,i,r;return K(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),this.lo===le.OPEN_IN_PROGRESS?(csArray.prototype.push.call(this.do,t),[2]):this.lo!==le.READY||this.ho.isThresholdReached()?[2]:(n=t.key,i=t.metadata,r=t.events,this.ho.addString(n),"string"==typeof r?this.ho.addString(r):this.ho.addArrayBuffer(r),this.ho.isThresholdReached()?[2]:[4,this.Eo.put("".concat(this.yo,"/").concat(n),new Response(r,{headers:i}))]);case 1:return e.sent(),[3,3];case 2:return e.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.recover=function(t){return $(this,void 0,void 0,(function(){return K(this,(function(n){switch(n.label){case 0:return this.Eo?[3,2]:[4,this.Ao()];case 1:if(n.sent(),this.lo!==le.READY)return[2];n.label=2;case 2:return this.bo(t),[2]}}))}))},t.prototype.Ao=function(){return $(this,void 0,void 0,(function(){var t;return K(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),this.lo=le.OPEN_IN_PROGRESS,t=this,[4,self.caches.open("".concat(this.po).concat(this.fo))];case 1:return t.Eo=n.sent(),this.lo=le.READY,[3,3];case 2:return n.sent(),this.lo=le.OPEN_FAILED,[3,3];case 3:return[2]}}))}))},t.prototype.bo=function(t){return $(this,void 0,void 0,(function(){var n,i,r,e,s=this;return K(this,(function(u){switch(u.label){case 0:return u.trys.push([0,5,6,7]),this.wo++,this.wo>1?[2]:[4,this.Eo.keys()];case 1:return 0===(n=u.sent()).length?[2]:[4,this.Eo.matchAll()];case 2:return i=u.sent(),r=csArray.prototype.map.call(i,(function(t){var n={};t.headers.forEach((function(t,i){n[i]=t})),delete n["content-type"];var i=n.datatype;return delete n.datatype,"json"===i||"base64"===i?t.text().then((function(t){return{metadata:n,events:t}})):t.arrayBuffer().then((function(t){return{metadata:n,events:t}}))})),[4,Promise.all(r)];case 3:return e=u.sent(),[4,Promise.all(csArray.prototype.map.call(n,(function(t){return s.Eo.delete(t)})))];case 4:return u.sent(),t(e),this.ho.reset(),[3,7];case 5:return u.sent(),[3,7];case 6:return this.wo--,[7];case 7:return[2]}}))}))},t}(),be=function(){function t(t){self.caches?this.Ro(t):this.To()}return t.prototype.save=function(t){this.Oo.save(t)},t.prototype.recover=function(t){this.Oo.recover(t)},t.prototype.Ro=function(n){var i=this;this.Oo=new Ee(n,t.Io,(function(t){i.To(t)}))},t.prototype.To=function(n){var i=this;this.Oo=new pe(t.Io),n&&csArray.prototype.forEach.call(n,(function(t){i.Oo.save(t)}))},t.Io=16777216,t}();!function(t){t.PORTRAIT="Portrait",t.LANDSCAPE="Landscape"}(me||(me={})),function(t){t.PORTRAIT_PRIMARY="portrait-primary",t.PORTRAIT_SECONDARY="portrait-secondary",t.LANDSCAPE_PRIMARY="landscape-primary",t.LANDSCAPE_SECONDARY="landscape-secondary"}(ge||(ge={})),function(t){t[t.PORTRAIT=0]="PORTRAIT",t[t.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",t[t.LANDSCAPE=-90]="LANDSCAPE",t[t.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(Ae||(Ae={})),function(t){function n(){return"orientation"in screen}function i(){return"orientation"in window}t.isScreenOrientationApiSupported=n,t.isDeprecatedScreenOrientationApiSupported=i;var r=n()?function(){switch(screen.orientation.type){case ge.PORTRAIT_PRIMARY:case ge.PORTRAIT_SECONDARY:return me.PORTRAIT;case ge.LANDSCAPE_PRIMARY:case ge.LANDSCAPE_SECONDARY:return me.LANDSCAPE;default:return me.PORTRAIT}}:i()?function(){switch(window.orientation){case Ae.PORTRAIT:case Ae.PORTRAIT_REVERSE:return me.PORTRAIT;case Ae.LANDSCAPE:case Ae.LANDSCAPE_REVERSE:return me.LANDSCAPE;default:return me.PORTRAIT}}:function(){return me.LANDSCAPE};t.getCurrentOrientation=function(){return r()}}(Se||(Se={}));var Re,Ne=function(){function t(){this.ko=null,this.Co=null,this.fn=!1}return t.prototype.start=function(){this.fn||(this.fn=!0,this.onScreenPotentiallyChanged())},t.prototype.stop=function(){this.fn&&(this.fn=!1,this.ko=null,this.Co=null)},t.prototype.setOnScreenChangedCallback=function(t){this._o=t},t.prototype.onScreenPotentiallyChanged=function(){var t;if(this.fn){var n=Se.getCurrentOrientation(),i=this.Po(n),r=i.screenWidth,e=i.screenHeight;if(r!==this.ko||e!==this.Co){this.ko=r,this.Co=e;var s={type:gn.SCREEN_RESIZE,args:[r,e],date:St()};null===(t=this._o)||void 0===t||t.call(this,s)}}},t.prototype.Po=function(t){var n,i,r=Ci.screenWidth(),e=Ci.screenHeight();return t===me.PORTRAIT?(n=r,i=e):(n=Math.max(r,e),i=Math.min(r,e)),{screenWidth:n,screenHeight:i}},t}(),Te=function(){function t(t,n){this.lr=t,this.cn=n,this.xo="cssrm://",this.Lo=0}return t.prototype.beforeSerializeAttributes=function(t,n){if(this.cn.isSensitive(t))return n;if(p(t)||l(t)&&d(csNodeparentNode.apply(t))){var i=n,r=t.getAttribute("src");if(null!==r&&r.length>0&&(Cr(r)||this.lr.isOnlineAssetsActivated()))return this.Lo++,this.Mo(t.src,this.Lo),this.Do(n,this.Lo);if(null!==t.getAttribute("srcset")&&this.lr.isOnlineAssetsActivated()){for(var e=Pr(t.srcset),s=this.Lo+1,u=0,o=e;u<o.length;u++){var h=o[u];this.Lo++,this.Mo(Vt(h),this.Lo)}i=this.Uo(n,s,e)}return i}return y(t)&&""!==t.getAttribute("href")&&this.lr.isOnlineAssetsActivated()?(this.Lo++,this.jo(t.href,this.Lo),this.zo(n,this.Lo)):n},t.prototype.serializeTextNode=function(t,n,i){t.parentElement&&m(t.parentElement)&&(n.data=this.Ho(n.data))},t.prototype.serializeTextMutation=function(t,n){return csNodeparentNode.apply(t)&&m(csNodeparentNode.apply(t))?this.Ho(n):n},t.prototype.serializeAttributeMutationValue=function(t,n,i){if(this.cn.isSensitive(t))return n;if(p(t)||l(t)&&d(csNodeparentNode.apply(t))){if("src"===i&&(Cr(n)||this.lr.isOnlineAssetsActivated()))return this.Lo++,this.Mo(n,this.Lo),this.xo+this.Lo;if("srcset"===i&&this.lr.isOnlineAssetsActivated()){for(var r=Pr(n),e=this.Lo+1,s=0,u=r;s<u.length;s++){var o=u[s];this.Lo++,this.Mo(Vt(o),this.Lo)}return this.Bo(e,n,r).value}}return y(t)&&"href"===i&&this.lr.isOnlineAssetsActivated()?(this.Lo++,this.jo(n,this.Lo),this.xo+this.Lo):n},t.prototype.Ho=function(t){var n,i=csArray.from(new Set(kr(t)));if(this.qo(i)||this.lr.isOnlineAssetsActivated()&&this.Fo(i)){for(var r=t,e=0,s=i;e<s.length;e++){var u=s[e];(this.lr.isOnlineAssetsActivated()||Cr(u))&&(this.Lo++,r=csString.prototype.replace.call(r,u,this.xo+this.Lo)),Cr(u)?this.Mo(u,this.Lo):this.lr.isOnlineAssetsActivated()&&((n=u)&&Rt(n,".css")?this.jo(u,this.Lo):this.Mo(u,this.Lo))}return r}return t},t.prototype.qo=function(t){return csArray.prototype.some.call(t,(function(t){return Cr(t)}))},t.prototype.Fo=function(t){return csArray.prototype.some.call(t,(function(t){return!Cr(t)}))},t.prototype.Do=function(t,n){var i=this;return csArray.prototype.map.call(t,(function(t){if("src"!==t.name)return t;var r=document.createAttribute(t.name);return r.value=i.xo+n,r}))},t.prototype.Uo=function(t,n,i){var r=this;return csArray.prototype.map.call(t,(function(t){return"srcset"!==t.name?t:r.Bo(n,t.value,i)}))},t.prototype.Bo=function(t,n,i){var r=t,e=document.createAttribute("srcset");e.value=n;for(var s=0,u=i;s<u.length;s++){var o=u[s];e.value=csString.prototype.replace.call(e.value,o,this.xo+r),r++}return e},t.prototype.zo=function(t,n){for(var i=[],r=0,e=t;r<e.length;r++){var s=e[r],u=document.createAttribute(s.name);if(csArray.prototype.push.call(i,u),"href"===s.name){var o=document.createAttribute("data-cs-original-href");o.value=s.value,csArray.prototype.push.call(i,o),u.value=this.xo+n}else u.value=s.value}return i},t.prototype.Mo=function(t,n){this.lr.processStaticResource({id:n,input:t})},t.prototype.jo=function(t,n){this.lr.processStaticCssLinkResource({id:n,input:t})},t}();!function(t){t[t.NOT_EXIST=2]="NOT_EXIST"}(Re||(Re={}));var Oe=function(t){function n(n,i,r){var e=t.call(this)||this;return e.lr=n,e.Go=i,e.Vo=r,e.Wo={},e.mi=!1,e}return W(n,t),n.prototype.onStart=function(){this.lr.start()},n.prototype.onStop=function(){this.lr.stop()},n.prototype.initState=function(){var t=this;this.lr.isStaticResourceManagerSupported()&&(this.Yo=this.Vo.getRequestParameters(),this.Jo="".concat(this.Go,"/exist?").concat(st.toQuery(this.Yo)),this.$o="".concat(this.Go,"/putTag?").concat(st.toQuery(this.Yo)),this.Ko=Er((function(){return $(t,void 0,void 0,(function(){return K(this,(function(t){switch(t.label){case 0:return this.mi?(this.Ko(),[2]):(this.mi=!0,[4,this.Xo()]);case 1:return t.sent(),this.mi=!1,[2]}}))}))}),300),this.lr.sendStaticResource((function(n){t.Wo[n.hash]=n,t.Ko()})))},n.prototype.onIframeStaticResource=function(t){this.lr.isStaticResourceManagerSupported()&&(this.Wo[t.hash]=t,this.Ko())},n.prototype.Xo=function(){return $(this,void 0,void 0,(function(){var t,n,i,r=this;return K(this,(function(e){switch(e.label){case 0:return t=this.Wo,this.Wo={},[4,this.Zo(t)];case 1:return(n=e.sent()).length?(i=this.Qo(n),[4,Promise.all(csArray.prototype.map.call(i,(function(t){return window.fetch(r.$o,{method:"POST",body:t})})))]):[2];case 2:return e.sent(),[2]}}))}))},n.prototype.th=function(t){return $(this,void 0,void 0,(function(){var n,i;return K(this,(function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),(n=Object.keys(t)).length?(i={projectId:this.Yo.pid,filter:Re.NOT_EXIST,hashes:n,touch:!0},[4,window.fetch(this.Jo,{method:"POST",body:csJSON.stringify(i)})]):[2,[]];case 1:return[4,r.sent().json()];case 2:return[2,r.sent()];case 3:return r.sent(),[2,[]];case 4:return[2]}}))}))},n.prototype.Zo=function(t){return $(this,void 0,void 0,(function(){var n,i,r;return K(this,(function(e){switch(e.label){case 0:n=[],e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.th(t)];case 2:return i=e.sent(),csArray.prototype.forEach.call(i,(function(i){var r=t[i];r?csArray.prototype.push.call(n,r):sn.warn("SRM: received unknown hash: "+i)})),[3,4];case 3:return r=e.sent(),sn.warn("SRM Service,getUnknownHashes error: ".concat(r.message," ")),[3,4];case 4:return[2,n]}}))}))},n.prototype.Qo=function(t){for(var n=0,i=[new FormData],r=0,e=t;r<e.length;r++){var s=e[r],u=s.blob,o=s.hash,h=i.length-1;if((n+=u.size)<8388608)i[h].append("",u,o);else{var c=new FormData;c.append("",u,o),n=u.size,csArray.prototype.push.call(i,c)}}return i},n}(fi),Ie=function(){function t(){this.nh=[]}return t.prototype.setRegexRules=function(t){var n=this;this.nh=csArray.prototype.map.call(t,(function(t){return n.ih(t)}))},t.prototype.evaluateUrl=function(t){var n=this;return csArray.prototype.some.call(this.nh,(function(i){var r,e,s=n.rh(t,i);return(null==i?void 0:i.notOperator)?!(null===(r=i.regex)||void 0===r?void 0:r.test(s)):null===(e=i.regex)||void 0===e?void 0:e.test(s)}))},t.prototype.rh=function(t,n){var i=$t(t);return i?n.ignoreQueryParams&&n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname):n.ignoreQueryParams?"".concat(i.origin).concat(i.pathname).concat(i.hash):n.ignoreURIFragments?"".concat(i.origin).concat(i.pathname).concat(i.search):t:t},t.prototype.eh=function(t){return t.ignoreCaseSensitivity?"i":""},t.prototype.ih=function(t){switch(t.operator){case oe.NOT_START:t.notOperator=!0;case oe.START:t.regex=new RegExp("^".concat(t.value),this.eh(t));break;case oe.NOT_END:t.notOperator=!0;case oe.END:t.regex=new RegExp("".concat(t.value,"$"),this.eh(t));break;case oe.NOT_CONTAIN:t.notOperator=!0;case oe.CONTAIN:t.regex=new RegExp("".concat(t.value),this.eh(t));break;case oe.NOT_EXACT:t.notOperator=!0;case oe.EXACT:t.regex=new RegExp("^".concat(t.value,"$"),this.eh(t));break;default:sn.warn("buildRegexWithRule, unknown type: ".concat(t.operator))}return t},t}(),ke=function(){return void 0!==window.performance&&window.performance.now?window.performance.timing.navigationStart+Math.round(window.performance.now()):csDate.now()};var Ce,_e,Pe=function(){function t(t,n){void 0===n&&(n=100),this.uh=t,this.oh=n,this.hh="original-resource-name",this.ah=!1,this.fn=!1,this.fh=!1,this.lh="SHA-256",this.yh={},this.ph=null}return t.prototype.init=function(){"Promise"in window&&"function"==typeof window.Promise&&this.uh.isSupported()&&(this.ah=!0)},t.prototype.enableOnlineAssets=function(){this.fh=!0},t.prototype.isOnlineAssetsActivated=function(){return this.fh},t.prototype.isSupported=function(){return this.ah},t.prototype.processStaticResource=function(t){var n;return $(this,void 0,void 0,(function(){var i,r,e,s,u,o;return K(this,(function(h){switch(h.label){case 0:return h.trys.push([0,7,,8]),this.ah?(i=void 0,Cr(t.input)?[3,3]:[4,window.fetch(t.input)]):[2];case 1:return[4,h.sent().blob()];case 2:return i=h.sent(),[3,4];case 3:if(!(r=Br(t.input)))return[2];i=r,h.label=4;case 4:return[4,i.arrayBuffer()];case 5:return e=h.sent(),[4,crypto.subtle.digest(this.lh,e)];case 6:return s=h.sent(),u=qr(s),o=Cr(t.input)?void 0:t.input,this.mh(t.id,u,o),null===(n=this.gh)||void 0===n||n.call(this,{hash:u,blob:i}),[3,8];case 7:return h.sent(),[3,8];case 8:return[2]}}))}))},t.prototype.processStaticCssLinkResource=function(t){return $(this,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),this.ah?[4,this.Ah(t.input)]:[2];case 1:return n=i.sent(),this.mh(t.id,n.get(Vt(t.input)).hash,t.input),this.Sh(n),[3,3];case 2:return i.sent(),[3,3];case 3:return[2]}}))}))},t.prototype.isStaticResourceManagerSupported=function(){return this.ah},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.sendStaticResource=function(t){this.gh=t},t.prototype.flushEvents=function(){var t;if(Object.keys(this.yh).length){this.ph&&clearTimeout(this.ph);var n={type:gn.RESOURCE_HASHES,date:ke(),args:[this.yh]};this.ph=null,this.yh={},null===(t=this.Kn)||void 0===t||t.call(this,n)}},t.prototype.start=function(){this.fn||(this.fn=!0)},t.prototype.stop=function(){this.fn&&(this.fn=!1,this.fh=!1,this.flushEvents())},t.prototype.mh=function(t,n,i){var r=this,e=n;i&&(e+="?".concat(this.hh,"=").concat(i)),this.yh[t]=e,this.ph&&clearTimeout(this.ph),this.ph=window.setTimeout((function(){return r.flushEvents()}),this.oh)},t.prototype.Ah=function(t){return $(this,void 0,void 0,(function(){var n,i,r,e,s,u,o,h,c,a,f,v,l,d,w,y,p;return K(this,(function(m){switch(m.label){case 0:n=new Map,i=Vt(t),r=[{resourceRawPath:t,resourceAbsolutePath:i}],m.label=1;case 1:if(!(r.length>0))return[3,17];if(e=csArray.prototype.pop.call(r),!this.isOnlineAssetsActivated()&&null!==e.resourceAbsolutePath&&!Cr(e.resourceAbsolutePath))return n.set(e.resourceAbsolutePath,null),[3,1];if(void 0!==n.get(e.resourceAbsolutePath))return[3,1];m.label=2;case 2:return m.trys.push([2,15,,16]),null===e.resourceRawPath||csString.prototype.indexOf.call(e.resourceRawPath,".css")>0?e.data?[3,5]:[4,fetch(e.resourceAbsolutePath)]:[3,8];case 3:return w=m.sent(),s=e,[4,w.text()];case 4:s.data=m.sent(),m.label=5;case 5:for(e.nestedResources||(e.nestedResources=csArray.from(new Set(kr(e.data)))),u=!1,o=!1,h=function(t){var i,s,h=Cr(t)?t:e.resourceAbsolutePath?(i=t,s=e.resourceAbsolutePath,new csURL(i,s).href):Vt(t),a=n.get(h);if(void 0!==a){if(null!==a){var f=c.Eh(a,t);e.data=csString.prototype.replaceAll.call(e.data,t,f)}return"continue"}var v=void 0!==csArray.prototype.find.call(r,(function(t){return t.resourceAbsolutePath===h}));v||(u=!0,o||(csArray.prototype.push.call(r,e),o=!0),csArray.prototype.push.call(r,{resourceRawPath:t,resourceAbsolutePath:h}))},c=this,a=0,f=e.nestedResources;a<f.length;a++)v=f[a],h(v);return u?[3,7]:[4,this.bh(e.data)];case 6:l=m.sent(),n.set(e.resourceAbsolutePath,{hash:l.hash,blob:l.blob}),m.label=7;case 7:return[3,14];case 8:return d=void 0,Cr(e.resourceAbsolutePath)?[3,11]:[4,fetch(e.resourceAbsolutePath)];case 9:return[4,(w=m.sent()).blob()];case 10:return d=m.sent(),[3,12];case 11:if(!(y=Br(e.resourceAbsolutePath)))return n.set(e.resourceAbsolutePath,null),[3,1];d=y,m.label=12;case 12:return[4,this.Rh(d)];case 13:p=m.sent(),n.set(e.resourceAbsolutePath,{hash:p,blob:d}),m.label=14;case 14:return[3,16];case 15:return m.sent(),n.set(e.resourceAbsolutePath,null),[3,16];case 16:return[3,1];case 17:return[2,n]}}))}))},t.prototype.Eh=function(t,n){var i="cs://resources/".concat(t.hash);return Cr(n)||(i+="?".concat(this.hh,"=").concat(n)),i},t.prototype.bh=function(t){return $(this,void 0,void 0,(function(){var n,i,r;return K(this,(function(e){switch(e.label){case 0:return[4,(n=new Blob([t],{type:"text/css"})).arrayBuffer()];case 1:return i=e.sent(),[4,crypto.subtle.digest(this.lh,i)];case 2:return r=e.sent(),[2,{blob:n,hash:qr(r)}]}}))}))},t.prototype.Rh=function(t){return $(this,void 0,void 0,(function(){var n;return K(this,(function(i){switch(i.label){case 0:return[4,t.arrayBuffer()];case 1:return n=i.sent(),[4,crypto.subtle.digest(this.lh,n)];case 2:return[2,qr(i.sent())]}}))}))},t.prototype.Sh=function(t){var n=this;t.forEach((function(t){var i;t&&(null===(i=n.gh)||void 0===i||i.call(n,{hash:t.hash,blob:t.blob}))}))},t}(),xe=function(){function t(){this.Nh=[],this.Th=1}return t.prototype.identifyNodes=function(t,n){for(var i=[document.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1)],r=!1;i.length>0;)for(var e=csArray.prototype.pop.call(i),s=e.root;null!==s;)if(r&&n&&n.get(s)>0){for(var u=e.nextSibling();null===u&&null!==e.parentNode();)u=e.nextSibling();s=u}else s.__contentsquare_identifier=this.Th,this.Th+=1,f(s)&&csElementshadowRoot.apply(s)?csArray.prototype.push.call(i,document.createTreeWalker(csElementshadowRoot.apply(s),NodeFilter.SHOW_ALL,null,!1)):E(s)&&this.Oh(s),s=e.nextNode(),r=!0},t.prototype.getId=function(t){return t.__contentsquare_identifier},t.getId=function(t){return t.__contentsquare_identifier},t.prototype.getIds=function(t){for(var n,i=new Set,r=document.createNodeIterator(t,NodeFilter.SHOW_ALL,null,!1);n=r.nextNode();){var e=n.__contentsquare_identifier;if(e&&i.add(e),f(n)&&csElementshadowRoot.apply(n)){var s=csElementshadowRoot.apply(n);this.getIds(s).forEach((function(t){return i.add(t)}))}}return i},t.prototype.onDocumentIdentified=function(t){csArray.prototype.push.call(this.Nh,t)},t.prototype.Oh=function(t){for(var n=0,i=this.Nh;n<i.length;n++){(0,i[n])(t)}},t}(),Le=function(){function t(){this.Ih=new Map,this.kh={},this.Ch=!1}return t.prototype.start=function(){},t.prototype.stop=function(){this.flushEvents(),this.Ih.clear()},t.prototype.serializeTextNode=function(t,n){var i=this.setReferenceId(n.data);return n.data="cstextref://".concat(i),n},t.prototype.serializeCDATASectionNode=function(t,n){var i=this.setReferenceId(n.data);return n.data="cstextref://".concat(i),n},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.flushEvents=function(){var t=this._h();t&&this.Kn(t)},t.prototype.getPendingEvents=function(){var t=this._h();return t?[t]:[]},t.prototype.getReferenceId=function(t){return this.Ih.get(t)},t.prototype.setReferenceId=function(t){return this.Ph(t)},t.prototype._h=function(){if(0!==Object.keys(this.kh).length){var t={type:gn.TEXT_REF,date:St(),args:[this.kh]};return this.kh={},t}},t.prototype.Ph=function(t){var n=this,i=this.Ih.get(t);return i||(i=this.Ih.size+1,this.Ih.set(t,i),this.kh[i]=t,this.Ch||(this.Ch=!0,Ri((function(){n.Ch=!1,n.flushEvents()}))),i)},t}(),Me="v2/recording",De=["setCapturedElementsSelector"],Ue=["setPIISelectors"],je=["isRecording"],ze=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],He=["replay:resourceManager:getStatus","cssrm:getStatus"],Be=function(){function t(t,n,i,r,e,s,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A,S,E,b){this.xh=t,this.Y=n,this.L=i,this.Lh=r,this.un=e,this.Yu=s,this.Yo=u,this.Mh=o,this.M=h,this.rr=c,this.X=a,this.cn=f,this.er=v,this.ur=l,this.hr=d,this.Hs=w,this.cr=y,this.Wn=p,this.Dh=m,this.Uh=g,this.jh=A,this.ys=S,this.zh=E,this.Hh=b,this.lr=null,this.Bh=null}return t.prototype.init=function(){var t=this,n=[],i=new be("csPersisted");this.qh(i);var r=new ci;this.Ki=new hi;var e=new xe,s=new vr(this.cn);this.Fh=new Ar(this.M,this.L),this.Fh.init();var u=new Mr;csArray.prototype.push.call(n,u);var o=new jr(this.ys,e),h=[new fe,s,this.Fh,u],c=null;if(this.L.useStaticResourceManager){var a=new Vr(window.crypto);a.init(),this.lr=new Pe(a),this.lr.init(),csArray.prototype.push.call(n,this.lr),this.lr.isStaticResourceManagerSupported()&&(c=new Te(this.lr,this.cn),csArray.prototype.push.call(h,c),this.Bh=new Oe(this.lr,this.L.getStaticResourceManagerUri(),this.Yo))}var f=new ye,v=new ve(e,f);v.init(),csArray.prototype.push.call(n,v),v.isAdoptedStyleSheetsSupported()&&csArray.prototype.push.call(h,v);var l,d=new Le;csArray.prototype.push.call(h,d),csArray.prototype.push.call(n,d),csArray.prototype.push.call([],d),l=this.Gh()?new ce(h,e):new ae(h);var w=new Sr(r,this.Yo,{getRequestParameters:function(){return{let:t.recordingService.getRecordingLastEventTimestamp()}}},{getRequestParameters:function(){return{rst:t.recordingService.getRecordingStartTimestamp()}}},{getRequestParameters:function(){return{rt:csArray.prototype.join.call(t.Y.getRecordingStates(),",")}}}),y=new zr("".concat(this.L.getRecordingUri(),"/").concat(Me)),p=new Ie;this.Be=new de(this.Yu,this.L,this.X,p),this.Be.init(),this.Fn=new cr(l,e,this.Fh,this.an),this.Fn.setAnonymization(this.Be.shouldUseAnonymization()),this.nr=new Xn(this.un,e,this.cn,this.an),this.nr.init();var m=new ui(this.Fn,o,u,this.Wn,e,this.cn);this.vr=new ir(i,y,this.ar),csArray.prototype.push.call(n,new ar(e,this.cn,u,f)),csArray.prototype.push.call(n,new Dr(window)),csArray.prototype.push.call(n,new Nr(window.location,this.M,new Ne)),this.recordingService=new nr(this.L,this.Ki,w,r,f,m,this.nr,new Wr(this.Hs,e,this.cn),this.rr,this.Y,this.er,this.ur,this.hr,this.cr,this.an,this.ar,this.vr,this.lr,n,y),this.Vh=new Tr(this.nr,m,new Rr(this.L),this.recordingService,this.Fn,this.Be,this.Wn),this.Dh.addListener(this.recordingService),this.Uh.addListener(this.recordingService),this.Uh.addListener(this.Vh),this.Bh&&this.Uh.addListener(this.Bh),o.init(),this.Vh.init(),this.recordingService.init(),this.Mh.register(je,(function(){return t.Y.isReplayRecorded()&&!t.jh.isUrlExcludedForSessionReplay()})),this.Mh.register(De,(function(n){t.Fh.setWhitelistedElementsSelector(n),t.Wn.emitRecordingStatusChange()})),this.Mh.register(Ue,(function(n){t.cn.setPIISelectors(n),t.Wn.emitRecordingStatusChange()})),this.Mh.register(ze,(function(){t.recordingService.activateOnlineAssetsOnNextPageview(),t.Wn.emitRecordingStatusChange()})),this.Mh.register(He,(function(){return t.recordingService.getStaticResourceManagerStatus()})),this.xh.enableRecordingStatus(this.recordingService,this.cn,this.Be,this.Fh,this.Y,this.an)},t.prototype.onAfterNaturalPageView=function(){var t;null===(t=this.Bh)||void 0===t||t.initState()},t.prototype.onStartTracking=function(){this.vr.recover(),this.Fn.setAnonymization(this.Be.shouldUseAnonymization()),this.Y.isReplayRecorded()&&!this.jh.isUrlExcludedForSessionReplay()&&(this.Y.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Wh())},t.prototype.onArtificialPageViewEnd=function(){this.recordingService.clearStates(),!this.Y.isReplayRecorded()||this.jh.isUrlExcludedForSessionReplay()||this.Y.isTemporarilyRecorded()||this.vr.sendLastMessageBeacon()},t.prototype.onAfterArtificialPageView=function(){this.Fn.setAnonymization(this.Be.shouldUseAnonymization()),this.Y.isReplayRecorded()&&!this.jh.isUrlExcludedForSessionReplay()?(this.Y.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Yh()):this.Jh()},t.prototype.onBeforeSessionRenewal=function(){this.recordingService.clearStates(),this.Jh()},t.prototype.onOptout=function(){this.Jh()},t.prototype.onReplayUnanonymizationConsentGranted=function(){this.Fn.setAnonymization(this.Be.shouldUseAnonymization()),this.recordingService.triggerUnanonymizationConsentGranted(),this.Wn.emitRecordingStatusChange()},t.prototype.onReplayUnanonymizationConsentWithdrawn=function(){this.Fn.setAnonymization(this.Be.shouldUseAnonymization()),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.Wn.emitRecordingStatusChange()},t.prototype.onRecordingStateChange=function(t,n){t===ri.NOT_RECORDED&&n===ei.ETR_OFF?(this.recordingService.clearEvents(),this.Jh()):(this.ar.setQueryParams({rt:csArray.prototype.join.call(this.Y.getRecordingStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.Fn.isDOMSerializationInProgress()||this.recordingService.pushEvents())},t.prototype.onInitialDomStart=function(){this.recordingService.blockSendingEventsFromSerialization(),this.vr.blockSendingLastMessage()},t.prototype.onInitialDomDone=function(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.vr.allowSendingLastMessage(),this.nr.start(),this.recordingService.pushEvents()},t.prototype.onAfterReplayRecordingConsentGranted=function(){this.Y.isReplayRecorded()&&!this.jh.isUrlExcludedForSessionReplay()&&(this.Y.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Wh(),this.recordingService.triggerRecordingForSessionGranted())},t.prototype.onAfterReplayRecordingConsentWithdrawn=function(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.Jh())},t.prototype.Wh=function(){var t;this.recordingService.updateStaticResourceManagerOnlineAssets(),this.Vh.start(),this.recordingService.start(),null===(t=this.Bh)||void 0===t||t.start(),this.vr.start(),this.Wn.emitRecordingStatusChange()},t.prototype.Jh=function(){var t;this.Vh.stop(),this.recordingService.stop(),null===(t=this.Bh)||void 0===t||t.stop(),this.vr.stop(),this.Wn.emitRecordingStatusChange()},t.prototype.Yh=function(){this.Jh(),this.Wh()},t.prototype.qh=function(t){this.ar=this.zh.create("".concat(this.L.getRecordingUri(),"/").concat(Me),!0,"byteArray",t)},t.prototype.Gh=function(){return we.isAsyncSerializationSupported()&&this.L.asyncSerializerEnabled},t.prototype.$h=function(){return!!this.L.encryptionPublicKey&&this.L.encryptionPublicKeyId>0&&this.Kh.isSupported()&&this.Xh.isSupported()},J([Gn("Recording.onStartTracking")],t.prototype,"onStartTracking",null),J([Gn("onInitialDomDone")],t.prototype,"onInitialDomDone",null),t}();!function(t){t[t.NOT_NEEDED=1]="NOT_NEEDED",t[t.NOT_EXPRESSED=2]="NOT_EXPRESSED",t[t.WITHDRAWN=3]="WITHDRAWN",t[t.GRANTED=4]="GRANTED"}(Ce||(Ce={})),function(t){t.isReplayConsentNeeded=function(t){return t.replayConsentRequiredForSession},t.isRecordingBlockedByConsent=function(t){return t.recordingState===ri.BLOCKED_BY_CONSENT_NOT_EXPRESSED||t.recordingState===ri.BLOCKED_BY_CONSENT_WITHDRAWN},t.isRecordingWithDrawn=function(t){return t.recordingState===ri.BLOCKED_BY_CONSENT_WITHDRAWN}}(_e||(_e={}));var qe=function(){function t(t,n,i,r){this.W=t,this.Y=n,this.L=i,this.Zh=r,this.Qh=!1}return t.prototype.isNaturalPageViewSent=function(){return this.Qh},t.prototype.setNaturalPageViewSent=function(t){this.Qh=t},t.prototype.getTrackingContext=function(){var t=this.Y.getSession();if(!t)return null;var n=this.getSessionKey();if(!n)return null;var i=this.tc(t),r=this.nc(),e=this.ic(),s=this.rc();return{projectId:r,sessionKey:n,pageNumber:i,pageViewType:e,isRecording:this.ec(),uxaDomain:s,recordingConsentState:this.sc(t)}},t.prototype.getSessionKey=function(){var t=this.W.getVisitor();return t?"".concat(t.id,".").concat(t.visitsCount):null},t.prototype.sc=function(t){return _e.isReplayConsentNeeded(this.L)?t.recordingState===ri.BLOCKED_BY_CONSENT_NOT_EXPRESSED?Ce.NOT_EXPRESSED:t.recordingState===ri.BLOCKED_BY_CONSENT_WITHDRAWN?Ce.WITHDRAWN:Ce.GRANTED:Ce.NOT_NEEDED},t.prototype.tc=function(t){return t.pageNumber},t.prototype.nc=function(){return this.L.projectId},t.prototype.ic=function(){return this.Zh.getPageViewType()},t.prototype.rc=function(){return this.L.uxaDomain},t.prototype.ec=function(){return this.Y.isReplayRecorded()},t}(),Fe=function(){function t(t){this.oc=t,this.hc=[]}return t.prototype.handleCommand=function(t){if(Pt(t)&&(this.cc(t),this.oc.isNaturalPageViewSent())){var n=this.oc.getTrackingContext();null!==n&&this.ac(t,n)}},t.prototype.cc=function(t){csArray.prototype.push.call(this.hc,t)},t.prototype.executeRegisteredCallbacks=function(){var t=this,n=this.oc.getTrackingContext();null!==n&&csArray.prototype.map.call(this.hc,(function(i){return t.ac(i,n)}))},t.prototype.ac=function(t,n){setTimeout((function(){t(n)}))},t}(),Ge=function(){function t(t){this.oc=t,this.fc=[]}return t.prototype.handleCommand=function(t){return this.oc.isNaturalPageViewSent()?this.vc(t):void this.lc(t)},t.prototype.vc=function(t){var n=this.oc.getSessionKey();return this.Qu(t)&&null!==n&&this.ac(t.callback,n),n},t.prototype.lc=function(t){this.Qu(t)&&csArray.prototype.push.call(this.fc,t.callback)},t.prototype.flushPendingCallbacks=function(){var t=this,n=this.oc.getSessionKey();null!==n&&csArray.prototype.forEach.call(this.fc,(function(i){t.ac(i,n)})),this.fc=[]},t.prototype.Qu=function(t){return t&&"function"==typeof t.callback},t.prototype.ac=function(t,n){setTimeout((function(){t(n)}))},t}(),Ve=function(){function t(t,n){this.wc=t,this.oc=n}return t.prototype.onTrackingContextRequestCallback=function(t){var n=this.oc.getTrackingContext();null!==n&&this.wc.sendToChildren(Zt.TrackingContextResultMessage,Y(Y({},t),{trackingContext:n}))},t.prototype.onIframeIntegrationCallback=function(t){if(this.oc.isNaturalPageViewSent()){var n=this.oc.getTrackingContext();null!==n&&(t.trackingContext=n,this.wc.sendToChildren(Zt.IntegrationCallback,t))}},t.prototype.sendAfterPageViewCallbackToChildren=function(){var t=this.oc.getTrackingContext();if(null!==t){var n={trackingContext:t,initiator:Kt.AfterPageView};this.wc.sendToChildren(Zt.IntegrationCallback,n)}},t}();var We,Ye,Je=function(){function t(t){this.oc=t}return t.prototype.handleCommand=function(t,n){kt(t)&&Pt(n)&&this.ac(t,n)},t.prototype.ac=function(t,n){var i=this;setTimeout((function(){var r=i.oc.getTrackingContext();if(r){var e=function(t,n){var i,r=t.isRecording,e=t.pageNumber,s=t.projectId,u=t.uxaDomain,o=/^(.+)\.(\d+)$/.exec(t.sessionKey);if(r&&o){var h=o[1],c=o[2];i="".concat(u,"/quick-playback/index.html?pid=").concat(s,"&uu=").concat(h,"&sn=").concat(c,"&pvid=").concat(e,"&recordingType=cs"),n.withTimestamp&&(i+="&t=".concat(St()-n.recordingStartTimestamp))}return{replayLink:i,isRecording:r}}(r,t);n(e)}}))},t}(),$e=function(){function t(){this.hc=new Set}return t.prototype.handleCommand=function(t,n){var i=this;return Pt(t)?this.hc.has(t)?null:(this.hc.add(t),n&&this.executeCallback(t,n),function(){return i.hc.delete(t)}):null},t.prototype.executeCallbacks=function(t){var n=this;this.hc.forEach((function(i){return n.executeCallback(i,t)}))},t.prototype.executeCallback=function(t,n){setTimeout((function(){try{t(n)}catch(t){}}))},t}(),Ke=["afterPageView"],Xe=["getSessionKey"],Ze=["onRecordingStateChange"],Qe=["replay:link:generate"],ts=function(){function t(t,n,i,r,e,s,u,o){this.W=t,this.Y=n,this.Mh=i,this.yc=r,this.wc=e,this.L=s,this.Zh=u,this.xh=o}return t.prototype.init=function(){var t=this;this.oc=new qe(this.W,this.Y,this.L,this.Zh),this.mc=new Fe(this.oc),this.gc=new Ge(this.oc),this.Ac=new $e,this.Sc=new Je(this.oc),this.Ec=new Ve(this.wc,this.oc),this.yc.addListener(this.Ec),this.Mh.register(Xe,(function(n){return t.gc.handleCommand(n)})),this.Mh.register(Ke,(function(n){return t.mc.handleCommand(n)})),this.Mh.register(Ze,(function(n){t.Ac.handleCommand(n,t.xh.getRecordingStatus())})),this.Mh.register(Qe,(function(n,i){t.He&&t.Sc.handleCommand(Y(Y({},n),{recordingStartTimestamp:t.xh.getRecordingStatus().recordingStartTimestamp}),i)}))},t.prototype.onAfterNaturalPageView=function(){this.oc.setNaturalPageViewSent(!0),this.gc.flushPendingCallbacks(),this.mc.executeRegisteredCallbacks(),this.Ec.sendAfterPageViewCallbackToChildren()},t.prototype.onAfterArtificialPageView=function(){this.mc.executeRegisteredCallbacks(),this.Ec.sendAfterPageViewCallbackToChildren()},t.prototype.onRecordingStateChange=function(){this.Ac.executeCallbacks(this.xh.getRecordingStatus())},t.prototype.onRecordingStatusChange=function(){this.Ac.executeCallbacks(this.xh.getRecordingStatus())},t.prototype.setRecordingService=function(t){this.He=t},J([br()],t.prototype,"onRecordingStateChange",null),J([br()],t.prototype,"onRecordingStatusChange",null),t}(),ns=function(){function t(t,n){this.key=csString.prototype.slice.call(t,0,512),this.value=It(n)?csString.prototype.slice.call(n,0,255):n}return t.isValid=function(t,n){return It(t)&&(It(n)||Ot(n))},t}(),is=function(t){function n(n,i){var r=t.call(this)||this;return r.bc=n,r.M=i,r.Rc=[],r}return W(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.Rc,(function(n){return t.trackDynamicVariable(n.key,n.value)})),this.Rc=[]},n.prototype.onStop=function(){},n.prototype.trackDynamicVariable=function(t,n){this.isStarted?ns.isValid(t,n)&&this.bc.add(new ns(this.M.anonymizePII(t),this.M.anonymizePII(n))):csArray.prototype.push.call(this.Rc,{key:t,value:n})},n}(fi),rs=function(){function t(t){this.Lh=t,this.bc=[]}return t.prototype.add=function(t){csArray.prototype.push.call(this.bc,t),this.setBatchReadyCall()},t.prototype.clear=function(){this.bc=[]},t.prototype.onBatchReady=function(t){this.Nc=t},t.prototype.getRequestParameters=function(){for(var t={},n=0,i=this.bc;n<i.length;n++){var r=i[n];t[r.key]=r.value}return{dv:this.Lh.compressSync(csJSON.stringify(t),"base64"),ct:this.Lh.algorithm}},t.prototype.setBatchReadyCall=function(){this.Nc()},J([br(),fn("dynamicVariablesBatchReady")],t.prototype,"setBatchReadyCall",null),t}(),es=["trackDynamicVariable"],ss=function(){function t(t,n,i,r,e,s){this.Mh=t,this.Y=n,this.L=i,this.Yo=r,this.Lh=e,this.M=s,this._=new at(this.L.getTrackerUri(),"dvar"),this.bc=new rs(this.Lh),this.Tc=new is(this.bc,this.M)}return t.prototype.init=function(){var t=this;this._.setRequestParametersProviders(this.Yo,this.bc),this.Y.setDynamicVariablesService(this.Tc),this.bc.onBatchReady((function(){return t._.send()})),this._.after((function(){return t.bc.clear()})),this.Mh.register(es,(function(n){var i=void 0===n?{}:n,r=i.key,e=i.value;t.Tc.trackDynamicVariable(r,e)}))},t.prototype.onStartTracking=function(){this.Tc.start()},t}(),us=function(){function t(t,n){this.id=t,this.revenue=n}return t.from=function(n){var i=new t(n.id,parseFloat(n.revenue));return isNaN(parseFloat(n.tax))||(i.tax=parseFloat(n.tax)),isNaN(parseFloat(n.shipping))||(i.shipping=parseFloat(n.shipping)),It(n.currency)&&n.currency.length<=10&&(i.currency=n.currency),i},t.prototype.hasValidRevenue=function(){return!isNaN(this.revenue)&&this.revenue>=0},t.isValid=function(t){return _t(t)&&Tt(t.revenue)&&It(t.currency)&&t.currency.length<=10&&(!_t(t.id)||It(t.id))},t}(),os=function(){function t(t,n,i,r){this.id=t,this.name=n,this.price=i,this.quantity=r}return t.from=function(n){if(!t.Oc(n))return null;var i=new t(n.id,n.name,parseFloat(n.price),parseInt(n.quantity,10));return Ct(n.sku)&&(i.sku=n.sku),Ct(n.category)&&(i.category=n.category),Ct(n.merchant)&&n.merchant.length>0&&(i.merchant=n.merchant.slice(0,100)),i},t.Oc=function(t){return _t(t)&&It(t.id)&&It(t.name)&&Tt(parseFloat(t.price))&&Ot(parseInt(t.quantity,10))&&(!Ct(t.sku)||It(t.sku))&&(!Ct(t.category)||It(t.category))&&(!Ct(t.merchant)||It(t.merchant))},t}(),hs=function(){function t(t,n,i){this.M=t,this.Ic=n,this.rr=i,this.clear()}return t.prototype.addTransaction=function(t){var n=this.M.anonymizeFields(t,["id"]);this.kc=us.from(n)},t.prototype.getTransaction=function(){return this.kc},t.prototype.sendTransaction=function(){null!==this.Ic&&null!==this.rr&&this.rr.isSessionValid()&&(this.kc.hasValidRevenue()?this.Ic.send():sn.warn("Transaction Service: unable to send transaction with invalid parameters"))},t.prototype.addItem=function(t){if(!Pt(t)){var n=this.M.anonymizeFields(t,["id","name","sku","category"]),i=os.from(n);null!==i&&csArray.prototype.push.call(this.Cc,i)}},t.prototype.getItems=function(){return this.Cc},t.prototype.clear=function(){this.kc=us.from({revenue:NaN}),this.Cc=[]},t.prototype.getRequestParameters=function(){var t={id:this.kc.id?"".concat(this.kc.id):"",revenue:"".concat(this.kc.revenue)};return Ct(this.kc.tax)&&(t.tax="".concat(this.kc.tax)),Ct(this.kc.shipping)&&(t.shipping="".concat(this.kc.shipping)),Ct(this.kc.currency)&&(t.cu="".concat(this.kc.currency)),t.items=window.csJSON.stringify(this.Cc),t},t}(),cs=function(){function t(t,n){this._c=t,this.rr=n,this.Pc=null}return t.prototype.addToCart=function(t){var n={};It(t.sku)&&(n.sku=csString.prototype.slice.call(t.sku,0,100)),It(t.merchant)&&(n.merchant=csString.prototype.slice.call(t.merchant,0,100)),(n.sku||n.merchant)&&(this.Pc=n,this.sendCartItem())},t.prototype.getCartItem=function(){return this.Pc},t.prototype.sendCartItem=function(){this.rr.isSessionValid()&&this._c.send()},t.prototype.clear=function(){this.Pc=null},t.prototype.getRequestParameters=function(){if(!this.Pc)return{};var t={};return It(this.Pc.sku)&&this.Pc.sku.length>0&&(t.sku=this.Pc.sku),It(this.Pc.merchant)&&this.Pc.merchant.length>0&&(t.me=this.Pc.merchant),t},t}(),as=["ecommerce:addToCart","ec:cart:add"],fs=["ecommerce:addTransaction","ec:transaction:create"],vs=["ecommerce:addItem","ec:transaction:items:add"],ls=["ecommerce:send","ec:transaction:send"],ds=function(){function t(t,n,i,r,e,s,u){this.L=t,this.W=n,this.Y=i,this.Mh=r,this.M=e,this.rr=s,this.X=u}return t.prototype.init=function(){var t=new at(this.L.getTrackerUri(),"transaction"),i=new at(this.L.getTrackerUri(),"addtocart"),r=new hs(this.M,t,this.rr),e=new cs(i,this.rr);t.setRequestParametersProviders(this.L,this.W,this.Y,this.X,r,n),t.after((function(){r.clear()})),i.setRequestParametersProviders(this.L,this.W,this.Y,this.X,e,n),i.after((function(){e.clear()})),this.Mh.register(fs,(function(t){r.addTransaction(t)})),this.Mh.register(vs,(function(t){return r.addItem(t)})),this.Mh.register(ls,(function(){return r.sendTransaction()})),this.Mh.register(as,(function(t){e.addToCart(t)}))},t}(),ws=function(){function t(t){this.vs=t.performance}return t.prototype.getRequestParameters=function(){if(this.xc())return{};var t=this.Lc();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}},t.prototype.Lc=function(){var t=this.vs.timing;return{startRender:"".concat(t.domLoading-t.requestStart),domInteractive:"".concat(t.domInteractive-t.requestStart),domComplete:"".concat(t.domComplete-t.requestStart),fullyLoaded:"".concat(t.loadEventEnd-t.requestStart)}},t.prototype.xc=function(){return!(this.vs&&this.vs.timing&&this.vs.timing.loadEventEnd>0)},t}();function ys(t){return void 0!==t.tgt}!function(t){t[t.RESIZE=0]="RESIZE",t[t.SCROLL=1]="SCROLL",t[t.MOUSEMOVE=2]="MOUSEMOVE",t[t.MOUSEDOWN=3]="MOUSEDOWN",t[t.MOUSEUP=4]="MOUSEUP",t[t.CLICK=5]="CLICK",t[t.MOUSEOVER=6]="MOUSEOVER",t[t.MOUSEOUT=7]="MOUSEOUT",t[t.CHANGE=10]="CHANGE",t[t.FOCUSIN=11]="FOCUSIN",t[t.FOCUSOUT=12]="FOCUSOUT",t[t.TAP=14]="TAP",t[t.KEYDOWN=15]="KEYDOWN",t[t.KEYUP=16]="KEYUP",t[t.COMMAND=17]="COMMAND",t[t.SUBMIT=18]="SUBMIT",t[t.PERFORMANCE=19]="PERFORMANCE",t[t.DRAG=20]="DRAG",t[t.FLICK=21]="FLICK",t[t.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",t[t.ZOOM=23]="ZOOM",t[t.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",t[t.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",t[t.DEAD_CLICK=30]="DEAD_CLICK",t[t.DEAD_ZOOM=31]="DEAD_ZOOM",t[t.PAGE_RELOAD=32]="PAGE_RELOAD",t[t.THRASHED_CURSOR=33]="THRASHED_CURSOR",t[t.BLANK_PAGE=34]="BLANK_PAGE"}(We||(We={})),function(t){t.SUCCESS="success",t.FAILURE="failure",t.ATTEMPT="attempt"}(Ye||(Ye={}));var ps,ms=function(){function t(){}return t.build=function(t,n,i){return csArray.prototype.reduce.call(i,(function(n,i){return i.enhanceAnalysisEvent(t,n)}),n)},t}(),gs=function(){function t(){}return t.prototype.isEventTypeSupported=function(t){return-1!==csArray.prototype.indexOf.call(this.supportedEventTypes,t)},t.prototype.enhanceAnalysisEvent=function(t,n){return this.isEventTypeSupported(n.type)?this.baseEnhanceAnalysisEvent(t,n):n},t}(),As=function(t){function n(n){var i=t.call(this)||this;return i.Mc=n,i.supportedEventTypes=[We.MOUSEDOWN,We.MOUSEUP,We.CLICK,We.MOUSEOVER,We.TAP,We.DRAG,We.FLICK],i}return W(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){return n.tgt||(n.tgt=this.Mc.getEventTargetPath(t)),n},n}(gs),Ss=function(){function t(t,n,i,r){this.L=t,this.Mc=n,this.Hs=i,this.Dc=r,this.Uc=[],csArray.prototype.push.call(this.Uc,new As(this.Mc))}return t.prototype.processGesture=function(t,n){switch(t.type){case Fr.TAP:this.jc(n);break;case Fr.FLICK:this.zc(t,n);break;case Fr.DRAG:this.Hc(t,n)}},t.prototype.jc=function(t){var n={type:We.TAP,ts:0,x:0,y:0,tgt:""},i=ms.build(t,n,this.Uc);i.tgt!==B.INVALID_ELEMENT&&this.Kn(i)},t.prototype.Hc=function(t,n){var i,r,e={type:We.DRAG,ts:0,fd:t.direction,tgt:""};(null===(i=this.Dc)||void 0===i?void 0:i.collectGestureDistance)&&(e.distance=t.distance),(null===(r=this.Dc)||void 0===r?void 0:r.collectGestureVelocity)&&(e.velocity=t.velocity);var s=ms.build(n,e,this.Uc);s.tgt!==B.INVALID_ELEMENT&&this.Kn(s)},t.prototype.zc=function(t,n){var i,r,e={type:We.FLICK,ts:0,fd:t.direction,tgt:""};(null===(i=this.Dc)||void 0===i?void 0:i.collectGestureDistance)&&(e.distance=t.distance),(null===(r=this.Dc)||void 0===r?void 0:r.collectGestureVelocity)&&(e.velocity=t.velocity);var s=ms.build(n,e,this.Uc);s.tgt!==B.INVALID_ELEMENT&&this.Kn(s)},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){var n=this;this.Hs.subscribe(t.Bs,(function(t,i){return n.processGesture(t,i)}))},t.prototype.stop=function(){this.Hs.unsubscribe(t.Bs)},t.Bs="AnalysisGestureTracker",J([Yn()],t.prototype,"processGesture",null),t}();!function(t){t.getRelativePosition=function(t){var n=Wn(t);if(!(n&&f(n)&&Pt(n.getBoundingClientRect)&&_t(t.pageX)&&_t(t.pageY)))return{xRel:-1,yRel:-1,valid:!1};var i=n.getBoundingClientRect(),r=t.pageX-i.left-Ci.windowOffsetX(),e=t.pageY-i.top-Ci.windowOffsetY();n!==document.documentElement&&(r+=n.scrollLeft,e+=n.scrollTop);var s=Math.max(n.scrollWidth,i.width),u=Math.max(n.scrollHeight,i.height);return{xRel:Math.round(r/s*65535),yRel:Math.round(e/u*65535),valid:!0}}}(ps||(ps={}));var Es,bs,Rs,Ns,Ts,Os,Is=function(t){function n(n,i){var r=t.call(this)||this;return r.k=n,r.Mc=i,r.supportedEventTypes=[We.MOUSEMOVE],r.Bc="",r}return W(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=ps.getRelativePosition(t),r=i.valid,e=i.xRel,s=i.yRel;if(r){var u=this.Mc.getEventTargetPath(t);u!==B.INVALID_ELEMENT&&(n.xRel=e,n.yRel=s,u!==this.Bc||this.k.iframesTracking?(this.Bc=u,n.tgtHM=u):n.tgtHM="")}else this.Bc="";return n},n}(gs),ks=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.supportedEventTypes=[We.CHANGE],n.qc=["text","email","number","search","tel","url","password"],n}return W(n,t),n.prototype.baseEnhanceAnalysisEvent=function(t,n){var i=Wn(t);return g(i)&&csArray.prototype.indexOf.call(this.qc,i.type)>=0&&(n.isBlank=""===i.value),n},n}(gs),Cs=function(){function t(t,n,i){var r=this;this.k=t,this.Mc=n,this.un=i,this.Fc="select, select *, input, textarea",this.Gc="select, select *, input, textarea",this.Vc="a, a *, button, button *, select, select *, input, textarea",this.Wc="input, select, textarea",this.Yc=150,this.Jc=400,this.$c=!1,this.Kc=Er((function(t,n){return r.scrollListener(t,n)}),this.Yc),this.Xc=Er((function(t){return r.resizeListener(t)}),this.Yc),this.Zc=Mn((function(t){return r.mouseMoveListener(t)}),this.Jc),this.Qc=[{boundElement:window,type:"resize",listener:function(){return r.Xc()}},{boundElement:document,type:"scroll",listener:function(t){return r.Kc(t)}},{boundElement:window,type:"mousemove",listener:function(t){r.Zc(function(t){return t.composedPath&&Object.defineProperty(t,"__csOriginalTarget",{value:t.composedPath()[0],writable:!1,enumerable:!1}),t}(t))}},{boundElement:document,type:"mousedown",listener:function(t){return r.mouseDownListener(t)}},{boundElement:document,type:"mouseup",listener:function(t){return r.mouseUpListener(t)}},{boundElement:document,type:"click",listener:function(t){return r.clickListener(t)}}],this.ta=[{type:"change",listener:this.un.on(this.Gc,(function(t){return r.changeListener(t)}))}],this.na=X([{boundElement:document,type:"mouseover",listener:this.un.on(this.Vc,(function(t){return r.mouseOverListener(t)}))},{boundElement:document,type:"mouseout",listener:this.un.on(this.Vc,(function(t){return r.mouseOutListener(t)}))},{boundElement:document,type:"focusin",listener:this.un.on(this.Fc,(function(t){return r.focusInListener(t)}))},{boundElement:document,type:"focusout",listener:this.un.on(this.Fc,(function(t){return r.focusOutListener(t)}))},{boundElement:document,type:"keyup",listener:this.un.on(this.Wc,(function(t){return r.keyUpListener(t)}))},{boundElement:document,type:"keydown",listener:this.un.on(this.Wc,(function(t){return r.keyDownListener(t)}))},{boundElement:document,type:"copy",listener:this.un.on(this.Wc,(function(t){return r.copyListener(t)}))},{boundElement:document,type:"cut",listener:this.un.on(this.Wc,(function(t){return r.cutListener(t)}))},{boundElement:document,type:"paste",listener:this.un.on(this.Wc,(function(t){return r.pasteListener(t)}))}],csArray.prototype.map.call(this.ta,(function(t){return Y(Y({},t),{boundElement:document})})),!0),this.Uc=[],this.qn={},this.vn=new Set,this.ia=function(t,n){switch(n){case"initial":r.vn.add(t);break;case"added":r.vn.has(t)||(r.vn.add(t),r.kn(t));break;case"removed":r.Ln(t),r.vn.delete(t)}},ki.isSupported()&&(this.ra=new Bi(this.ia)),this.Rn(),this.k.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(this.Uc,new Is(this.k,this.Mc)),csArray.prototype.push.call(this.Uc,new ks,new As(this.Mc))}return t.prototype.kn=function(t){if(b(t)){var n=this.ea();csArray.prototype.forEach.call(n,(function(t){return On(t)}))}else{n=this.sa();csArray.prototype.forEach.call(n,(function(n){On(Y(Y({},n),{boundElement:t}))}))}},t.prototype.Ln=function(t){if(b(t)){var n=this.ea();csArray.prototype.forEach.call(n,(function(t){return In(t)}))}else{n=this.sa();csArray.prototype.forEach.call(n,(function(n){In(Y(Y({},n),{boundElement:t}))}))}},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){var t,n=this;null===(t=this.ra)||void 0===t||t.observe(document),this.kn(document),this.vn.forEach((function(t){return n.kn(t)})),this.resizeListener()},t.prototype.stop=function(){var t,n=this;this.Ln(document),this.vn.forEach((function(t){return n.Ln(t)})),null===(t=this.ra)||void 0===t||t.disconnect(),this.vn.clear()},t.prototype.flushPendingDebouncedListeners=function(){this.Kc.flushPending(),this.Xc.flushPending()},t.prototype.sa=function(){return this.un.isMatchesSelectorSupported()?this.ta:(sn.warn("Element.matches is not implemented yet"),[])},t.prototype.ea=function(){return this.un.isMatchesSelectorSupported()?X(X([],this.Qc,!0),this.na,!0):(sn.warn("Element.matches is not implemented yet"),this.Qc)},t.prototype.resizeListener=function(t){var n=Jn.getScrollContainer(),i=xt(n);i&&(this.$c=!0);var r={type:We.RESIZE,ts:0,x:i?n.clientWidth:Ci.windowWidth(),y:i?n.clientHeight:Ci.windowHeight()};void 0!==t&&(r.d=t),this.Kn(r)},t.prototype.scrollListener=function(t,n){var i=Jn.isEventOnScrollContainer(n);!this.$c&&i&&this.resizeListener();var r={type:We.SCROLL,ts:0,x:i?csEventtarget.apply(n).scrollLeft:Ci.windowOffsetX(),y:i?csEventtarget.apply(n).scrollTop:Ci.windowOffsetY(),d:t},e=ms.build(n,r,this.Uc);this.Kn(e)},t.prototype.mouseMoveListener=function(t){var n={type:We.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=ms.build(t,n,this.Uc);this.Kn(i)},t.prototype.mouseDownListener=function(t){var n={type:We.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=ms.build(t,n,this.Uc);this.ua(i)},t.prototype.mouseUpListener=function(t){var n={type:We.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=ms.build(t,n,this.Uc);this.ua(i)},t.prototype.clickListener=function(t){var n={type:We.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=ms.build(t,n,this.Uc);this.ua(i)},t.prototype.mouseOverListener=function(t){var n={type:We.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=ms.build(t,n,this.Uc);this.ua(i)},t.prototype.mouseOutListener=function(t){var n={type:We.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.Mc.getEventTargetPath(t)},i=ms.build(t,n,this.Uc);this.ua(i)},t.prototype.focusInListener=function(t){var n={type:We.FOCUSIN,ts:0,tgt:this.Mc.getEventTargetPath(t)},i=ms.build(t,n,this.Uc);this.ua(i)},t.prototype.focusOutListener=function(t){var n={type:We.FOCUSOUT,ts:0,tgt:this.Mc.getEventTargetPath(t)},i=ms.build(t,n,this.Uc);this.ua(i)},t.prototype.changeListener=function(t){var n={type:We.CHANGE,ts:0,tgt:this.Mc.getEventTargetPath(t)},i=ms.build(t,n,this.Uc);this.ua(i)},t.prototype.copyListener=function(t){var n={type:We.COMMAND,ts:0,tgt:this.Mc.getEventTargetPath(t),key:Un.COPY};this.ua(n)},t.prototype.cutListener=function(t){var n={type:We.COMMAND,ts:0,tgt:this.Mc.getEventTargetPath(t),key:Un.CUT};this.ua(n)},t.prototype.pasteListener=function(t){var n={type:We.COMMAND,ts:0,tgt:this.Mc.getEventTargetPath(t),key:Un.PASTE};this.ua(n)},t.prototype.keyUpListener=function(t){var n={type:We.KEYUP,ts:0,tgt:this.Mc.getEventTargetPath(t),key:this.oa(t)};this.ua(n)},t.prototype.keyDownListener=function(t){var n={type:We.KEYDOWN,ts:0,tgt:this.Mc.getEventTargetPath(t),key:this.oa(t)};this.ua(n)},t.prototype.oa=function(t){var n=this.qn[t.key];return void 0===n?Dn.ALPHANUMERICAL:n},t.prototype.ua=function(t){ys(t)&&t.tgt!==B.INVALID_ELEMENT&&this.Kn(t)},t.prototype.Rn=function(){this.qn[" "]=Dn.SPACE,this.qn.Spacebar=Dn.SPACE,this.qn.Enter=Dn.ENTER,this.qn.Backspace=Dn.BACKSPACE,this.qn.Delete=Dn.DELETE,this.qn.ArrowUp=Dn.ARROWUP,this.qn.ArrowDown=Dn.ARROWDOWN,this.qn.ArrowLeft=Dn.ARROWLEFT,this.qn.ArrowRight=Dn.ARROWRIGHT,this.qn.Up=Dn.ARROWUP,this.qn.Down=Dn.ARROWDOWN,this.qn.Left=Dn.ARROWLEFT,this.qn.Right=Dn.ARROWRIGHT,this.qn.CapsLock=Dn.CAPSLOCK,this.qn.Shift=Dn.SHIFT,this.qn.Tab=Dn.TAB},J([fn("Event handler type: resize")],t.prototype,"resizeListener",null),J([fn("Event handler type: scroll")],t.prototype,"scrollListener",null),J([fn("Event handler type: mouseMove"),Yn()],t.prototype,"mouseMoveListener",null),J([fn("Event handler type: mouseDown"),Yn()],t.prototype,"mouseDownListener",null),J([fn("Event handler type: mouseUp"),Yn()],t.prototype,"mouseUpListener",null),J([fn("Event handler type: click"),Yn()],t.prototype,"clickListener",null),J([fn("Event handler type: mouseOver"),Yn()],t.prototype,"mouseOverListener",null),J([fn("Event handler type: mouseOut"),Yn()],t.prototype,"mouseOutListener",null),J([fn("Event handler type: focusIn")],t.prototype,"focusInListener",null),J([fn("Event handler type: focusOut")],t.prototype,"focusOutListener",null),J([fn("Event handler type: change")],t.prototype,"changeListener",null),J([fn("Event handler type: copy")],t.prototype,"copyListener",null),J([fn("Event handler type: cut")],t.prototype,"cutListener",null),J([fn("Event handler type: paste")],t.prototype,"pasteListener",null),J([fn("Event handler type: keyup")],t.prototype,"keyUpListener",null),J([fn("Event handler type: keydown")],t.prototype,"keyDownListener",null),t}(),_s=function(){function t(){var t=this;this.ha=100,this.ca=0,this.aa=Ci.documentHeight(),this.fa={boundElement:document,type:"scroll",listener:function(n){return t.maxScrollRateListener(n)}}}return t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){On(this.fa),this.reset()},t.prototype.stop=function(){In(this.fa)},t.prototype.reset=function(){this.aa=Ci.documentHeight();var t=Jn.getScrollContainer();if(null===t)this.ca=this.va(Ci.documentHeight());else{var n=this.da(t);this.ca=this.wa(t,n)}this.Kn()},t.prototype.maxScrollRateListener=function(t){var n,i;if(Jn.isEventOnScrollContainer(t)){var r=csEventtarget.apply(t),e=this.da(r);n=this.ya(r,e),i=this.wa(r,e)}else n=Ci.documentHeight(),i=this.va(n);(i>this.ca||n>this.aa)&&(this.ca=i,n>this.aa&&(this.aa=n),this.Kn())},t.prototype.va=function(t){var n=Math.round(this.pa()/t*100);return Math.min(n,this.ha)},t.prototype.pa=function(){var t=Ci.windowHeight();return Ci.windowOffsetY()+t},t.prototype.wa=function(t,n){var i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+n,r=this.ya(t,n),e=Math.round(i/r*100);return Math.min(e,this.ha)},t.prototype.da=function(t){var n=window.getComputedStyle(t).paddingTop||"0px";return parseInt(n,10)},t.prototype.ya=function(t,n){return t.scrollHeight+t.getBoundingClientRect().top+n},t.prototype.getRequestParameters=function(){return{sr:"".concat(this.ca),mdh:"".concat(this.aa)}},J([fn("MaxScrollRate handler")],t.prototype,"maxScrollRateListener",null),t}(),Ps=function(){function t(t,n,i,r,e,s,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A){this.L=t,this.ma=n,this.Hs=i,this.ga=r,this.Aa=e,this.Sa=s,this.Ea=u,this.ba=o,this.rr=h,this.Wt=c,this.Ra=a,this.Na=f,this.Ir=v,this.ar=l,this.Ta=d,this.Oa=w,this.Ia=y,this.ka=p,this.Ca=m,this._a=g,this.Pa=A,this.gr=new ai,this.xa=!1}return t.prototype.init=function(){var t,n,i,r,e,s,u,o=this;this.ma.onEvent((function(t){return o.Nr(t)})),this.Hs.onEvent((function(t){return o.Nr(t)})),this.ga.onEvent((function(){var t=o.ga.getRequestParameters();o.ar.setQueryParams(t),o.Ea.setQueryParams(t)})),this.Na.onEvent((function(t){return o.La(t)})),this.Ma(),null===(t=this.Ta)||void 0===t||t.onEvent((function(t){return o.Nr(t)})),null===(n=this.Ca)||void 0===n||n.onEvent((function(t){return o.Nr(t)})),null===(i=this.Oa)||void 0===i||i.onEvent((function(t){return o.Nr(t)})),null===(r=this.Ia)||void 0===r||r.onEvent((function(t){return o.Nr(t)})),this.Da(),null===(e=this.ka)||void 0===e||e.onEvent((function(t){return o.La(t)})),null===(s=this._a)||void 0===s||s.onEvent((function(t){return o.La(t)})),null===(u=this.Pa)||void 0===u||u.onEvent((function(t){return o.La(t)}))},t.prototype.Da=function(){var t=this;this.Ea.onBeaconSuccess((function(){t.Sa.clearEvents()})),this.Ea.onBeaconFailure((function(n){t.Ua(n)}))},t.prototype.initStates=function(){var t=this.ba.getRequestParameters(),n=this.Aa.getRequestParameters(),i=this.ga.getRequestParameters();this.ar.setQueryParams(t),this.ar.setQueryParams(n),this.ar.setQueryParams(i),this.Ea.setQueryParams(t),this.Ea.setQueryParams(n),this.Ea.setQueryParams(i),this.ja()},t.prototype.start=function(t){var n,i,r,e,s,u,o;t||null===(n=this.ka)||void 0===n||n.start(),this.Ir.start(),this.ma.start(),this.ga.start(),this.Hs.start(),null===(i=this.Ta)||void 0===i||i.start(),null===(r=this.Ia)||void 0===r||r.start(),t||this.Na.start(),null===(e=this.Oa)||void 0===e||e.start(),null===(s=this.Ca)||void 0===s||s.start(),null===(u=this._a)||void 0===u||u.start(),null===(o=this.Pa)||void 0===o||o.start()},t.prototype.collectInitialEvents=function(){var t;null===(t=this.Ta)||void 0===t||t.collectInitialEvents()},t.prototype.onIframeAnalysisEvent=function(t){this.Gr(t)},t.prototype.La=function(t){this.rr.isCurrentPageviewValid()&&this.Gr(t)},t.prototype.Nr=function(t){this.rr.isSessionValid()&&this.Gr(t)},t.prototype.Gr=function(t){this.Sa.addEvent(this.za(t)),this.Sa.isFull()&&this.sendEvents(),this.L.emitDebugEvents&&this.gr.emit("analysisEvent",Y(Y({},t),{typeName:We[t.type]}))},t.prototype.za=function(t){return t.ts=this.Ha(),t},t.prototype.Ba=function(){this.Ea.setQueryParams({hlm:"true"}),this.xa=!0},t.prototype.sendLastMessageBeacon=function(){this.Ea.setQueryParams(this.Aa.getRequestParameters()),this.Ea.send(this.Sa.stringifyEvents()),this.Ea.removeQueryParams(["hlm"]),this.xa=!1},t.prototype.sendEvents=function(){this.Sa.isEmpty()||(this.ar.setQueryParams(this.ba.getRequestParameters()),this.ar.setQueryParams(this.Aa.getRequestParameters()),this.ar.send(this.Sa.getEvents()),this.Sa.clearEvents())},t.prototype.stop=function(){var t,n,i,r,e,s,u;this.Ir.stop(),this.ma.stop(),this.ga.stop(),this.Hs.stop(),this.Na.stop(),null===(t=this.Ta)||void 0===t||t.stop(),null===(n=this.Oa)||void 0===n||n.stop(),null===(i=this.Ia)||void 0===i||i.stop(),null===(r=this.Ca)||void 0===r||r.stop(),this.Sa.empty(),null===(e=this.ka)||void 0===e||e.stop(),null===(s=this._a)||void 0===s||s.stop(),null===(u=this.Pa)||void 0===u||u.stop()},t.prototype.clearStates=function(t){var n,i;this.ma.flushPendingDebouncedListeners(),null===(n=this.Oa)||void 0===n||n.flushPendingKeyboardNavigationEvent(),null===(i=this.Ia)||void 0===i||i.flushPendingTextHighlightEvent(),t?(this.Ba(),this.sendLastMessageBeacon()):this.sendEvents(),this.ga.reset(),this.Na.stop(),this.ar.removeQueryParams()},t.prototype.ja=function(){this.qa=St()},t.prototype.Ha=function(){return St()-this.qa},t.prototype.Ma=function(){var t=this;this.Ir.onEvent((function(n){var i,r;null===(i=t.Oa)||void 0===i||i.flushPendingKeyboardNavigationEvent(),null===(r=t.Ia)||void 0===r||r.flushPendingTextHighlightEvent(),n===vi.PagehideVisible?t.Ba():n===vi.PagehideHidden?(t.Ba(),t.sendLastMessageBeacon()):t.Sa.isEmpty()&&!t.xa||t.sendLastMessageBeacon()}))},t.prototype.Ua=function(t){try{this.Sa.isEmpty()&&!this.xa||this.Wt.save({requestParameters:t,events:this.Sa.getEvents()})}catch(t){}},t.prototype.pushSubmitEvent=function(t,n){if(function(t){return t===Ye.SUCCESS||t===Ye.FAILURE||t===Ye.ATTEMPT}(t))if(xt(n)){var i={status:t,type:We.SUBMIT,ts:0,tgt:this.Ra.getElementPath(n)};i.tgt!==B.INVALID_ELEMENT&&this.La(i)}else sn.warn("AnalysisEvents Service: invalid element: ".concat(n));else sn.warn("AnalysisEvents Service: invalid submit status: ".concat(t))},t}(),xs=function(){function t(t,n){var i=this;this.Wt=t,this.ar=n,this.Fa=function(){"visible"===document.visibilityState&&i.Ga()}}return t.prototype.start=function(){this.Ga(),this.Ii()},t.prototype.stop=function(){this._i()},t.prototype.getRecoveryStorage=function(){return this.Wt},t.prototype.Ga=function(){var t=this.Wt.recover();if(null!==t){var n=t,i=n.requestParameters,r=n.events;this.ar.send(r,i)}},t.prototype.Ii=function(){document.addEventListener("visibilitychange",this.Fa)},t.prototype._i=function(){document.removeEventListener("visibilitychange",this.Fa)},t}(),Ls=function(){function t(t){this.fo=t}return t.prototype.save=function(t){localStorage.setItem(this.fo,csJSON.stringify(t))},t.prototype.clear=function(){localStorage.removeItem(this.fo)},t.prototype.recover=function(){var t=localStorage.getItem(this.fo);if(null===t)return null;var n=null;try{n=csJSON.parse(t)}catch(n){sn.error("Invalid item in localStorage.\n         (key:".concat(this.fo,"; value:").concat(t,")"))}finally{this.clear()}return n},t}(),Ms=function(){function t(t){var n=this;this.Va=t,this.Wa=function(t){return n.processMetric(t)},this.Ni=!1}return t.prototype.onEvent=function(t){this.Kn=t},t.prototype.start=function(){this.Ni||(this.Ni=!0,this.Va.onFCP(this.Wa),this.Va.onCLS(this.Wa),this.Va.onFID(this.Wa),this.Va.onLCP(this.Wa),this.Va.onTTFB(this.Wa),this.Va.onINP(this.Wa))},t.prototype.stop=function(){this.Ni=!1},t.prototype.processMetric=function(t){if(this.Ni){var n={type:We.PERFORMANCE,name:t.name,val:t.value,ts:0};this.Kn(n)}},J([fn("Performance metric handler")],t.prototype,"processMetric",null),t}(),Ds=-1,Us=function(t){addEventListener("pageshow",(function(n){n.persisted&&(Ds=n.timeStamp,t(n))}),!0)},js=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},zs=function(){var t=js();return t&&t.activationStart||0},Hs=function(t,n){var i=js(),r="navigate";return Ds>=0?r="back-forward-cache":i&&(document.prerendering||zs()>0?r="prerender":document.wasDiscarded?r="restore":i.type&&(r=i.type.replace(/_/g,"-"))),{name:t,value:void 0===n?-1:n,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Bs=function(t,n,i){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var r=new PerformanceObserver((function(t){Promise.resolve().then((function(){n(t.getEntries())}))}));return r.observe(Object.assign({type:t,buffered:!0},i||{})),r}}catch(t){}},qs=function(t,n,i,r){var e,s;return function(u){n.value>=0&&(u||r)&&((s=n.value-(e||0))||void 0===e)&&(e=n.value,n.delta=s,n.rating=function(t,n){return t>n[1]?"poor":t>n[0]?"needs-improvement":"good"}(n.value,i),t(n))}},Fs=function(t){requestAnimationFrame((function(){return requestAnimationFrame((function(){return t()}))}))},Gs=function(t){var n=function(n){"pagehide"!==n.type&&"hidden"!==document.visibilityState||t(n)};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Vs=function(t){var n=!1;return function(i){n||(t(i),n=!0)}},Ws=-1,Ys=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},Js=function(t){"hidden"===document.visibilityState&&Ws>-1&&(Ws="visibilitychange"===t.type?t.timeStamp:0,Ks())},$s=function(){addEventListener("visibilitychange",Js,!0),addEventListener("prerenderingchange",Js,!0)},Ks=function(){removeEventListener("visibilitychange",Js,!0),removeEventListener("prerenderingchange",Js,!0)},Xs=function(){return Ws<0&&(Ws=Ys(),$s(),Us((function(){setTimeout((function(){Ws=Ys(),$s()}),0)}))),{get firstHiddenTime(){return Ws}}},Zs=function(t){document.prerendering?addEventListener("prerenderingchange",(function(){return t()}),!0):t()},Qs=[1800,3e3],tu=function(t,n){n=n||{},Zs((function(){var i,r=Xs(),e=Hs("FCP"),s=Bs("paint",(function(t){t.forEach((function(t){"first-contentful-paint"===t.name&&(s.disconnect(),t.startTime<r.firstHiddenTime&&(e.value=Math.max(t.startTime-zs(),0),e.entries.push(t),i(!0)))}))}));s&&(i=qs(t,e,Qs,n.reportAllChanges),Us((function(r){e=Hs("FCP"),i=qs(t,e,Qs,n.reportAllChanges),Fs((function(){e.value=performance.now()-r.timeStamp,i(!0)}))})))}))},nu=[.1,.25],iu={passive:!0,capture:!0},ru=new Date,eu=function(t,n){Es||(Es=n,bs=t,Rs=new Date,ou(removeEventListener),su())},su=function(){if(bs>=0&&bs<Rs-ru){var t={entryType:"first-input",name:Es.type,target:Es.target,cancelable:Es.cancelable,startTime:Es.timeStamp,processingStart:Es.timeStamp+bs};Ns.forEach((function(n){n(t)})),Ns=[]}},uu=function(t){if(t.cancelable){var n=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,n){var i=function(){eu(t,n),e()},r=function(){e()},e=function(){removeEventListener("pointerup",i,iu),removeEventListener("pointercancel",r,iu)};addEventListener("pointerup",i,iu),addEventListener("pointercancel",r,iu)}(n,t):eu(n,t)}},ou=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(n){return t(n,uu,iu)}))},hu=[100,300],cu=0,au=1/0,fu=0,vu=function(t){t.forEach((function(t){t.interactionId&&(au=Math.min(au,t.interactionId),fu=Math.max(fu,t.interactionId),cu=fu?(fu-au)/7+1:0)}))},lu=function(){return Ts?cu:performance.interactionCount||0},du=function(){"interactionCount"in performance||Ts||(Ts=Bs("event",vu,{type:"event",buffered:!0,durationThreshold:0}))},wu=[200,500],yu=0,pu=function(){return lu()-yu},mu=[],gu={},Au=function(t){var n=mu[mu.length-1],i=gu[t.interactionId];if(i||mu.length<10||t.duration>n.latency){if(i)i.entries.push(t),i.latency=Math.max(i.latency,t.duration);else{var r={id:t.interactionId,latency:t.duration,entries:[t]};gu[r.id]=r,mu.push(r)}mu.sort((function(t,n){return n.latency-t.latency})),mu.splice(10).forEach((function(t){delete gu[t.id]}))}},Su=[2500,4e3],Eu={},bu=[800,1800],Ru=function t(n){document.prerendering?Zs((function(){return t(n)})):"complete"!==document.readyState?addEventListener("load",(function(){return t(n)}),!0):setTimeout(n,0)},Nu=function(t,n){n=n||{};var i=Hs("TTFB"),r=qs(t,i,bu,n.reportAllChanges);Ru((function(){var e=js();if(e){var s=e.responseStart;if(s<=0||s>performance.now())return;i.value=Math.max(s-zs(),0),i.entries=[e],r(!0),Us((function(){i=Hs("TTFB",0),(r=qs(t,i,bu,n.reportAllChanges))(!0)}))}}))},Tu=function(){function t(){}return t.prototype.onFCP=function(t){tu(t,{reportAllChanges:!0})},t.prototype.onCLS=function(t){!function(t,n){n=n||{},tu(Vs((function(){var i,r=Hs("CLS",0),e=0,s=[],u=function(t){t.forEach((function(t){if(!t.hadRecentInput){var n=s[0],i=s[s.length-1];e&&t.startTime-i.startTime<1e3&&t.startTime-n.startTime<5e3?(e+=t.value,s.push(t)):(e=t.value,s=[t])}})),e>r.value&&(r.value=e,r.entries=s,i())},o=Bs("layout-shift",u);o&&(i=qs(t,r,nu,n.reportAllChanges),Gs((function(){u(o.takeRecords()),i(!0)})),Us((function(){e=0,r=Hs("CLS",0),i=qs(t,r,nu,n.reportAllChanges),Fs((function(){return i()}))})),setTimeout(i,0))})))}(t,{reportAllChanges:!0})},t.prototype.onFID=function(t){!function(t,n){n=n||{},Zs((function(){var i,r=Xs(),e=Hs("FID"),s=function(t){t.startTime<r.firstHiddenTime&&(e.value=t.processingStart-t.startTime,e.entries.push(t),i(!0))},u=function(t){t.forEach(s)},o=Bs("first-input",u);i=qs(t,e,hu,n.reportAllChanges),o&&Gs(Vs((function(){u(o.takeRecords()),o.disconnect()}))),o&&Us((function(){var r;e=Hs("FID"),i=qs(t,e,hu,n.reportAllChanges),Ns=[],bs=-1,Es=null,ou(addEventListener),r=s,Ns.push(r),su()}))}))}(t,{reportAllChanges:!0})},t.prototype.onLCP=function(t){!function(t,n){n=n||{},Zs((function(){var i,r=Xs(),e=Hs("LCP"),s=function(t){var n=t[t.length-1];n&&n.startTime<r.firstHiddenTime&&(e.value=Math.max(n.startTime-zs(),0),e.entries=[n],i())},u=Bs("largest-contentful-paint",s);if(u){i=qs(t,e,Su,n.reportAllChanges);var o=Vs((function(){Eu[e.id]||(s(u.takeRecords()),u.disconnect(),Eu[e.id]=!0,i(!0))}));["keydown","click"].forEach((function(t){addEventListener(t,o,!0)})),Gs(o),Us((function(r){e=Hs("LCP"),i=qs(t,e,Su,n.reportAllChanges),Fs((function(){e.value=performance.now()-r.timeStamp,Eu[e.id]=!0,i(!0)}))}))}}))}(t,{reportAllChanges:!0})},t.prototype.onTTFB=function(t){Nu(t,{reportAllChanges:!0})},t.prototype.onINP=function(t){!function(t,n){n=n||{},Zs((function(){du();var i,r=Hs("INP"),e=function(t){t.forEach((function(t){t.interactionId&&Au(t),"first-input"===t.entryType&&!mu.some((function(n){return n.entries.some((function(n){return t.duration===n.duration&&t.startTime===n.startTime}))}))&&Au(t)}));var n,e=(n=Math.min(mu.length-1,Math.floor(pu()/50)),mu[n]);e&&e.latency!==r.value&&(r.value=e.latency,r.entries=e.entries,i())},s=Bs("event",e,{durationThreshold:n.durationThreshold||40});i=qs(t,r,wu,n.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),Gs((function(){e(s.takeRecords()),r.value<0&&pu()>0&&(r.value=0,r.entries=[]),i(!0)})),Us((function(){mu=[],yu=lu(),r=Hs("INP"),i=qs(t,r,wu,n.reportAllChanges)})))}))}(t,{reportAllChanges:!0})},t}(),Ou=function(){function t(t){void 0===t&&(t=[]),this.si=t}return t.prototype.stringifyEvents=function(){return csJSON.stringify(this.si)},t.prototype.addEvent=function(t){csArray.prototype.push.call(this.si,t)},t.prototype.eventsCount=function(){return this.si.length},t.prototype.clearEvents=function(){this.si=[]},t.prototype.empty=function(){this.clearEvents()},t.prototype.isFull=function(){return this.eventsCount()>=50},t.prototype.isEmpty=function(){return 0===this.si.length},t.prototype.getEvents=function(){return this.si},t}(),Iu="v2/events",ku=["submit"],Cu=function(){function t(t,n,i,r,e,s,u,o,h,c){this.L=t,this.W=n,this.Y=i,this.Ra=r,this.un=e,this.Mh=s,this.rr=u,this.Hs=o,this.yc=h,this.zh=c}return t.prototype.init=function(){var t=this,n=new Ou,i=this.zh.create("".concat(this.L.getTrackerUri(),"/").concat(Iu),!0,"base64");this.Ya=this.Ja(i),this.$a=this.Ka(n,this.Ya.getRecoveryStorage(),i),this.$a.init(),this.yc.addListener(this.$a),this.Mh.register(ku,(function(n,i){t.$a.pushSubmitEvent(n,i)}))},t.prototype.onStartTracking=function(t){this.Ya.start(),this.$a.start(t)},t.prototype.onAfterNaturalPageView=function(){this.$a.initStates()},t.prototype.onAfterArtificialPageView=function(){this.$a.initStates(),this.$a.collectInitialEvents()},t.prototype.onArtificialPageViewEnd=function(){this.$a.clearStates(!0)},t.prototype.onBeforeSessionRenewal=function(){this.$a.clearStates(),this.$a.stop(),this.Ya.stop()},t.prototype.onOptout=function(){this.$a.stop(),this.Ya.stop()},t.prototype.Ka=function(t,i,r){var e=new ws(window),s=new _s,u=new Cs(this.L,this.Ra,this.un),o=new Ss(this.L,this.Ra,this.Hs),h=new Ms(new Tu),c=new Ai;var a=new zr("".concat(this.L.getTrackerUri(),"/").concat(Iu)),f=new Sr(this.L,this.W,this.Y,n);return new Ps(this.L,u,o,s,e,t,a,f,this.rr,i,this.Ra,h,c,r,undefined,undefined,undefined,undefined,undefined,undefined,undefined)},t.prototype.Ja=function(t){return new xs(new Ls("csAnalysisEventsPersisted"),t)},t}();!function(t){t.Artificial="a",t.Renewal="r",t.Natural="n"}(Os||(Os={}));var _u=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.Wn=n,s.Xa=i,s.X=r,s.Zh=e,s}return W(n,t),n.prototype.init=function(){this.Za()},n.prototype.onStart=function(t){t?this.Qa():this.tf()},n.prototype.onStop=function(){},n.prototype.triggerArtificialPageView=function(t){this.isStarted?this.nf(t):this.X.overridePath(t)},n.prototype.tf=function(){this.Zh.setPageViewType(Os.Natural),this.Wn.emitBeforeNaturalPageView(),this.Xa.send(),this.Wn.emitAfterNaturalPageView()},n.prototype.Qa=function(){this.Zh.setPageViewType(Os.Renewal),this.Wn.emitBeforeNaturalPageView(),this.Xa.send(),this.Wn.emitAfterNaturalPageView()},n.prototype.nf=function(t){this.Zh.setPageViewType(Os.Artificial),this.Wn.emitArtificialPageViewEnd(),t&&this.X.overridePath(t),this.Wn.emitBeforeArtificialPageView(),this.Xa.send(),this.Wn.emitAfterArtificialPageView()},n.prototype.Za=function(){var t=this;window.addEventListener("pageshow",(function(n){t.isStarted&&n.persisted&&t.nf()}))},n}(fi),Pu=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function xu(){return{la:Pu}}var Lu,Mu=function(){function t(t){this.Hh=t,this.if=[],this.rf=!1}return t.prototype.getRequestParameters=function(){return{dr:this.ef()}},t.prototype.addUrlMaskingPattern=function(t){var n=this.Hh.getUrlMaskingPattern(t);csArray.prototype.push.call(this.if,n)},t.prototype.enableRemoveQueryString=function(){this.rf=!0},t.prototype.disableRemoveQueryString=function(){this.rf=!1},t.prototype.ef=function(){var t=this.rf?this.Hh.removeQueryString(this.sf()):this.sf();return this.Hh.anonymizeUrl(t,this.if)},t.prototype.sf=function(){var t="";try{t=window.top.document.referrer}catch(n){if(window.parent)try{t=window.parent.document.referrer}catch(n){t=""}}return""===t&&(t=document.referrer),"string"!=typeof t&&(t=""),t},t}(),Du=function(){function t(t){this.Y=t,this.uf=this.hf()&&"currentScript"in document}return t.prototype.cf=function(){var t=document.currentScript;if(!t)return null;var n=window.performance.getEntriesByName(t.src,"resource")[0];return!n||this.af(n)?null:Math.round(n.responseEnd-n.fetchStart)},t.prototype.af=function(t){var n=t.transferSize;return void 0!==n?0===n||n<t.encodedBodySize:t.connectStart===t.domainLookupEnd},t.prototype.getRequestParameters=function(){if(!this.uf||1!==this.tc())return{};var t=this.cf();return null===t?{}:{dt:"".concat(Math.min(t,99999))}},t.prototype.tc=function(){var t;return(null===(t=this.Y.getSession())||void 0===t?void 0:t.pageNumber)||null},t.prototype.hf=function(){return"object"==typeof window.performance&&"function"==typeof window.performance.getEntriesByName},t}(),Uu=["trackPageview"],ju=["setPath"],zu=["setQuery"],Hu=["referrer:maskUrl"],Bu=["referrer:removeQueryString"],qu=["referrer:keepQueryString"],Fu=function(){function t(t,n,i,r,e,s,u,o,h,c,a){this.L=t,this.Mh=n,this.Wn=i,this.W=r,this.Y=e,this.Yu=s,this.rn=u,this.Hh=o,this.X=h,this.jh=c,this.Zh=a}return t.prototype.init=function(){var t=this,r=new at(this.L.getTrackerUri(),"pageview");this.ff=new _u(this.Wn,r,this.X,this.Zh);var e=new Mu(this.Hh);this.ff.init(),r.setRequestParametersProviders(this.L,this.W,this.Y,Ci,e,this.X,this.Yu,i,this.rn,n,this.Zh,new Du(this.Y),this.jh),this.Mh.register(Uu,(function(n){return t.ff.triggerArtificialPageView(n)})),this.Mh.register(ju,(function(n){return t.X.overridePath(n)})),this.Mh.register(zu,(function(n){return t.X.overrideQuery(n)})),this.Mh.register(Hu,(function(t){return e.addUrlMaskingPattern(t)})),this.Mh.register(Bu,(function(){return e.enableRemoveQueryString()})),this.Mh.register(qu,(function(){return e.disableRemoveQueryString()}))},t.prototype.start=function(t){this.ff.start(t)},t.prototype.onBeforeSessionRenewal=function(){this.ff.stop()},t}(),Gu=function(){function t(t){this.Mc=t}return t.prototype.on=function(t,n){var i=this;return function(r){i.Mc.hasValidEventTarget(r)&&i.vf(r,t)&&n(r)}},t.prototype.vf=function(t,n){var i=Wn(t);return C.call(i,n)},t.prototype.isMatchesSelectorSupported=function(){return!!C},t}(),Vu=function(){function t(){}return t.prototype.onLoad=function(t){this.$t=t},t.prototype.onLoadCallbackExecute=function(){this.$t()},t.prototype.start=function(){var t=this.onLoadCallbackExecute.bind(this);this.lf(t)},t.prototype.lf=function(t){function n(){document.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),t()}"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?setTimeout(t):(document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n))},J([fn("onLoad")],t.prototype,"onLoadCallbackExecute",null),t}(),Wu=function(){function t(t,n,i){this.L=t,this.W=n,this.Y=i}return t.prototype.getSessionData=function(){var t=this.L.projectId,n=this.W.getVisitor();null==n&&sn.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");var i=null!=n?n:{},r=i.id,e=i.visitsCount,s=this.Y.getSession();return null===s&&sn.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized."),{projectId:t,userId:r,sessionNumber:e,pageNumber:(null!=s?s:{}).pageNumber}},t}(),Yu=["clearSession"],Ju=["extendSession"],$u=["getSessionData"],Ku=["session:start:newVisitor"],Xu=["session:clear:visitor"],Zu=function(){function t(t,n,i,r){this.L=t,this.W=n,this.Y=i,this.Mh=r}return t.prototype.init=function(){var t=this;this.df=new Wu(this.L,this.W,this.Y),this.Mh.register(Yu,(function(){return t.Y.removeSession()})),this.Mh.register(Ju,(function(){return t.Y.extendSessionPeriodically()}),{disableApplyPending:!0}),this.Mh.register($u,(function(){return t.df.getSessionData()}),{disableApplyPending:!0}),this.Mh.register(Ku,(function(){return t.W.renewVitor()})),this.Mh.register(Xu,(function(){t.W.resetVisitor()}),{disableApplyImmediate:!0})},t.prototype.onBeforeNaturalPageView=function(){this.W.createOrUpdateVisitor(),this.Y.createOrUpdateSession()},t.prototype.onBeforeArtificialPageView=function(){this.Y.abortQuotaServiceRequest(),this.W.createOrUpdateVisitor(),this.Y.createOrUpdateSession()},t.prototype.onOptout=function(){this.W.removeVisitor(),this.Y.removeSession()},t.prototype.onRecordingStateChange=function(t,n){this.Y.updateRecordingState(t,n)},t}(),Qu=function(){function t(t,n){this.Y=t,this.W=n,this.wf=!1}return t.prototype.onSessionExpired=function(t){this.yf=t},t.prototype.isSessionValid=function(){if(this.wf)return!0;var t=this.Y.hasValidSession(),n=!1;return this.Y.pollCacheRefreshEvent()&&(n=this.W.isSessionRenewed()),t&&!n||!this.pf()?t:(this.mf=St(),this.wf=!0,this.yf(),this.wf=!1,this.Y.hasValidSession())},t.prototype.isCurrentPageviewValid=function(){var t=this.Y.hasValidSession();return this.Y.pollCacheRefreshEvent(!1)?!this.W.isSessionRenewed():t},t.prototype.startNewSession=function(){this.yf()},t.prototype.pf=function(){return!Ct(this.mf)||St()-this.mf>6e4},t}();function to(t){return t.tagDeploymentMode===Lu.DualCollectionReview||t.tagDeploymentMode===Lu.DualCollection}!function(t){t.ContentSquare="CONTENTSQUARE",t.LoadedByClicktale="LOADED_BY_CLICKTALE",t.LoadClicktalePtc="LOAD_CLICKTALE_PTC",t.DualCollectionReview="DUAL_COLLECTION_REVIEW",t.DualCollection="DUAL_COLLECTION",t.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"}(Lu||(Lu={}));var no,io=function(){function t(t,n,i){this.L=t,this.Y=n,this.cn=i}return t.prototype.init=function(){this.gf=!1,this.Af=!1},t.prototype.loadClicktalePtc=function(){!this.gf&&this.L.ptcDomain&&this.L.ptcGuid&&this.Sf()},t.prototype.startDataCollection=function(t){this.Af||(this.L.tagDeploymentMode===Lu.LoadClicktalePtc&&this.Ef()&&this.cn.initCTPII(),to(this.L)&&(this.cn.initCTPII(),t(),this.Af=!0))},t.prototype.Ef=function(){return this.Y.isReplayRecorded()},t.prototype.Sf=function(){this.gf=!0;var t=this.bf();document.getElementsByTagName("head")[0].appendChild(t)},t.prototype.bf=function(){var t=document.createElementNS("http://www.w3.org/1999/xhtml","script");return t.async=!0,t.crossOrigin="anonymous",t.type="text/javascript",this.L.ptcSha512&&this.L.ptcSnapshotPath?(t.integrity="sha512-".concat(this.L.ptcSha512),t.src="https://".concat(this.L.ptcDomain,"/").concat(this.L.ptcSnapshotPath,"/ptc.js")):t.src="https://".concat(this.L.ptcDomain,"/ptc/").concat(this.L.ptcGuid,".js"),t},t}();!function(t){t.isRecording=function(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()},t.stopRecording=function(){window.ClickTaleStop&&window.ClickTaleStop()},t.triggerLogicalPageView=function(t){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(t)},t.sendPageEvent=function(t){window.ClickTaleEvent&&window.ClickTaleEvent(t)},t.sendEventTriggerRecording=function(t){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(t)}}(no||(no={}));var ro=function(){function t(t,n,i,r,e,s){this.L=t,this.Y=n,this.X=i,this.Mh=r,this.Rf=e,this.cn=s}return t.prototype.init=function(){var t=this;this.Nf=new io(this.L,this.Y,this.cn),this.Nf.init(),this.Tf(),this.Mh.register(["startDataCollection"],(function(){t.Nf.startDataCollection(t.Rf)}))},t.prototype.Tf=function(){to(this.L)&&this.Nf.loadClicktalePtc()},t.prototype.onAfterNaturalPageView=function(){this.L.tagDeploymentMode===Lu.LoadClicktalePtc&&this.Nf.loadClicktalePtc()},t.prototype.onAfterArtificialPageView=function(){!this.Y.isReplayRecorded()&&no.isRecording()&&this.L.tagDeploymentMode===Lu.LoadClicktalePtc&&no.triggerLogicalPageView(this.X.getAnonymizedUrl())},t.prototype.onAfterSessionRenewal=function(){!this.Y.isReplayRecorded()&&no.isRecording()&&no.triggerLogicalPageView(this.X.getAnonymizedUrl())},t.prototype.onOptout=function(){no.isRecording()&&no.stopRecording()},t}(),eo="@user-identifier@",so=function(t){function n(n,i,r,e,s){var u=t.call(this)||this;return u.L=n,u.Of=i,u.Lh=r,u.If=e,u.kf=s,u.Cf=[],u.Lr=[],u}return W(n,t),n.prototype.onStart=function(){var t=this;csArray.prototype.forEach.call(this.Cf,(function(n){return t.trackPageEvent(n)})),this.Cf=[],csArray.prototype.forEach.call(this.Lr,(function(n){return t.trackEventTriggerRecording(n)})),this.Lr=[]},n.prototype.onStop=function(){},n.prototype.trackPageEvent=function(t){this.isStarted?n._f(t)&&(this.Pf(t)?this.kf.isSupported()&&this.xf(t):this.Lf(t)):csArray.prototype.push.call(this.Cf,t)},n.prototype.Pf=function(t){return tt(t,eo)},n.prototype.xf=function(t){return $(this,void 0,void 0,(function(){var n,i;return K(this,(function(r){switch(r.label){case 0:return this.L.customHashIdEnabled?(n=csString.prototype.slice.call(t,17),this.kf.isValidInput(n)?[4,this.kf.digest(n,this.L.projectId)]:(sn.warn("UserIdentifier event: invalid user identifier"),[2])):[2];case 1:return(i=r.sent())?(this.Mf={eventName:i,isETR:!1,isCustomHashId:!0},this.Df()):sn.warn("Page event: unable to compute customHashId"),this.L.encryptionEnabled?(this.If.emitUserIdentifierEvent(n),[2]):[2]}}))}))},n.prototype.Lf=function(t){this.If.emitPageEvent(t),this.Mf={eventName:t,isETR:!1,isCustomHashId:!1},this.Df(),this.L.tagDeploymentMode===Lu.LoadClicktalePtc&&no.sendPageEvent(t)},n.prototype.trackEventTriggerRecording=function(t){this.isStarted?n._f(t)&&(this.L.malkaEtrEnabled?this.Uf(t):this.jf(t)):csArray.prototype.push.call(this.Lr,t)},n.prototype.Uf=function(t){tt(t,"@ETP@")?this.If.emitEventTriggerRecording(t,si.ETR_PAGE):this.If.emitEventTriggerRecording(t,si.ETR_SESSION),this.Mf={eventName:t,isETR:!0,isCustomHashId:!1},this.Df()},n.prototype.jf=function(t){(function(t){return to(t)||t.tagDeploymentMode===Lu.LoadClicktalePtc})(this.L)&&(this.If.emitEventTriggerRecording(t,si.ETR_LEGACY),this.Mf={eventName:t,isETR:!0,isCustomHashId:!1},this.Df(),this.L.tagDeploymentMode===Lu.LoadClicktalePtc&&no.sendEventTriggerRecording(t))},n.prototype.getRequestParameters=function(){return{value:this.Lh.compressSync(this.Mf.eventName,"base64"),ct:this.Lh.algorithm,isETR:"".concat(this.Mf.isETR),isCustomHashId:"".concat(this.Mf.isCustomHashId)}},n.prototype.Df=function(){this.Of.send()},n._f=function(t){return It(t)&&!!csString.prototype.trim.call(t)},n}(fi),uo=["trackPageEvent"],oo=["trackEventTriggerRecording"],ho=function(){function t(t,n,i,r,e){this.L=t,this.Mh=n,this.Lh=i,this.Yo=r,this.If=e}return t.prototype.init=function(){var t=this,n=new at(this.L.getTrackerUri(),"pageEvent"),i=new Vr(window.crypto);i.init(),this.zf=new so(this.L,n,this.Lh,this.If,i),n.setRequestParametersProviders(this.zf,this.Yo),this.Mh.register(uo,(function(n){t.zf.trackPageEvent(n)})),this.Mh.register(oo,(function(n){t.zf.trackEventTriggerRecording(n)}))},t.prototype.onStartTracking=function(){this.zf.start()},t}(),co=document.createElement("div");function ao(t){if(!(!!t&&It(t)))return sn.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1;try{return C.call(co,t),!0}catch(n){return sn.warn("isValidSelector: invalid selector provided '".concat(t,"'")),!1}}var fo,vo=["#c1_card_info_id"];!function(t){t[t.Sensitive=1]="Sensitive",t[t.SensitiveChild=2]="SensitiveChild"}(fo||(fo={}));var lo,wo=function(){function t(t){var n;this.L=t,this.Hf=["value","checked","src","data","alt"],this.Bf=X(["[data-cs-mask]","script"],vo,!0),this.qf=[{selector:"input:not([type=button]):not([type=submit])",attrName:"value"}],this.Ff={PIISelectors:X([".ctHidden, textarea","#c1_card_info_id"],vo,!0),Attributes:[{selector:".ctHidden, input:not([type=button]):not([type=submit])",attrName:"value"}]},this.Gf=[],this.Vf="",this.Wf=function(){},this.Yf=this.Jf(t),to(this.L)||(this.Yf||csArray.prototype.push.call(this.Bf,"img[src^='data:']"),this.Vf=this.$f(this.Vf,this.Bf),(n=csArray.prototype.push).call.apply(n,X([this.Gf],this.qf,!1))),this.Kf=this.Xf()}return t.prototype.Jf=function(t){return t.useStaticResourceManager&&Boolean(window.crypto&&window.crypto.subtle&&self.TextEncoder&&csArray.from)},t.prototype.Xf=function(){var t=this;if(window.ResizeObserver)return new ResizeObserver((function(n){csArray.prototype.forEach.call(n,(function(n){t.Wf(n)}))}))},t.prototype.setPIISelectors=function(t){var n,i=this;if(t){if(null===(n=t.PIISelectors)||void 0===n?void 0:n.length){var r=csArray.prototype.filter.call(t.PIISelectors,(function(t){return ao(t)}));this.Vf=this.$f(this.Vf,r)}t.Attributes instanceof Array&&csArray.prototype.forEach.call(t.Attributes,(function(t){t&&t.attrName&&ao(t.selector)&&!i.Zf(t)&&csArray.prototype.push.call(i.Gf,t)}))}},t.prototype.getPIISelectors=function(){return{PIISelectors:[this.Vf],Attributes:this.Gf}},t.prototype.initCTPII=function(){var t,n,i,r=this;if(this.Vf=this.$f(this.Vf,this.Ff.PIISelectors),null===(i=null===(n=null===window||void 0===window?void 0:window.ClickTaleSettings)||void 0===n?void 0:n.DOM)||void 0===i?void 0:i.PII){var e=csArray.prototype.filter.call(window.ClickTaleSettings.DOM.PII.Text,(function(t){return ao(t)}));this.Vf=this.$f(this.Vf,e),(t=csArray.prototype.push).call.apply(t,X([this.Gf],this.Ff.Attributes,!1)),csArray.prototype.forEach.call(window.ClickTaleSettings.DOM.PII.Attributes,(function(t){t.attr&&ao(t.rule)&&csArray.prototype.push.call(r.Gf,{selector:t.rule,attrName:t.attr})}))}},t.prototype.isSensitiveAttribute=function(t,n){return this.isSensitive(t)&&-1!==csArray.prototype.indexOf.call(this.Hf,n)||this.Qf(t,n,this.Gf)},t.prototype.isSensitive=function(t){return t.__contentsquare_sensitive===fo.Sensitive},t.prototype.isSensitiveChild=function(t){return t.__contentsquare_sensitive===fo.SensitiveChild},t.prototype.identifySensitiveNodes=function(t){var n=this;if(f(t)||E(t)){this.tv(t);var i=ki.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return csElementshadowRoot.apply(t)&&n.tv(csElementshadowRoot.apply(t))}))}},t.prototype.unidentifySensitiveNodes=function(t){var n=this;if(f(t)||E(t)){this.nv(t);var i=ki.getAllShadowHosts(t);csArray.prototype.forEach.call(i,(function(t){return csElementshadowRoot.apply(t)&&n.nv(csElementshadowRoot.apply(t))}))}},t.prototype.onSensitiveElementResize=function(t){this.Wf=t},t.prototype.disconnectResizeObserver=function(){var t;null===(t=this.Kf)||void 0===t||t.disconnect()},t.prototype.nv=function(t){for(var n,i=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1);n=i.nextNode();)"__contentsquare_sensitive"in n&&delete n.__contentsquare_sensitive},t.prototype.tv=function(t){var n=this;if(this.iv(t))return this.rv(t),void this.ev(t);this.sv(t,this.Vf)?(this.uv(t),this.ev(t)):ti(window.csquerySelectorAll[t.nodeType].call(t,this.Vf),(function(t){n.ov(t)||(n.uv(t),n.ev(t))}))},t.prototype.ov=function(t){return!this.Yf&&p(t)&&(tt(t.src,"data:image/svg+xml")||tt(t.src,"data:image/png"))&&t.src.length<=1024},t.prototype.uv=function(t){t.__contentsquare_sensitive=fo.Sensitive,this.hv(t)},t.prototype.hv=function(t){this.Kf&&f(t)&&!A(t)&&this.Kf.observe(t)},t.prototype.rv=function(t){t.__contentsquare_sensitive=fo.SensitiveChild},t.prototype.ev=function(t){var n=document.createNodeIterator(t,NodeFilter.SHOW_ELEMENT,null,!1),i=n.nextNode();for(t===i&&(i=n.nextNode());i;)this.rv(i),i=n.nextNode()},t.prototype.iv=function(t){return!(!csNodeparentNode.apply(t)||!f(csNodeparentNode.apply(t))&&!E(csNodeparentNode.apply(t))||!this.isSensitive(csNodeparentNode.apply(t))&&!this.isSensitiveChild(csNodeparentNode.apply(t)))||R(t)&&(this.isSensitive(t.host)||this.isSensitiveChild(t.host))},t.prototype.sv=function(t,n){return f(t)&&C.call(t,n)},t.prototype.Qf=function(t,n,i){return csArray.prototype.some.call(i,(function(i){return t.hasAttribute(n)&&csString.prototype.indexOf.call(i.attrName,n)>-1&&C.call(t,i.selector)}))},t.prototype.$f=function(t,n){if(0===n.length)return t;if(0===t.length)return csArray.prototype.join.call(n,",");for(var i=csString.prototype.split.call(t,","),r=0,e=n;r<e.length;r++)for(var s=e[r],u=0,o=csString.prototype.split.call(s,",");u<o.length;u++){var h=o[u];-1===csArray.prototype.indexOf.call(i,h)&&csArray.prototype.push.call(i,h)}return csArray.prototype.join.call(i,",")},t.prototype.Zf=function(t){return csArray.prototype.some.call(this.Gf,(function(n){return n.selector===t.selector&&n.attrName===t.attrName}))},t}(),yo=function(){function t(t){this.Mh=t}return t.prototype.init=function(){this.cv(t.av,jt),this.cv(t.fv,Ut)},t.prototype.cv=function(t,n){this.Mh.register([t],(function(t,i){It(t)&&(It(i)||Lt(i))&&sn.error(i,"".concat(n).concat(t))}))},t.fv="logSnippetError",t.av="logImplementationSnippetError",t}(),po=function(){function t(t,n,i,r){this.L=t,this.wc=n,this.xh=i,this.yc=r}return t.prototype.init=function(){var t=this;this.wc.onChildMessage((function(n,i,r){return t.yc.emitIframeEvent(n,i,r)})),this.wc.setRecordingStatusCallback((function(){return t.xh.getRecordingStatus()}))},t.prototype.onStartTracking=function(){this.L.iframesTracking&&this.wc.start()},t.prototype.onOptout=function(){this.L.iframesTracking&&this.wc.stop()},t.prototype.onRecordingStatusChange=function(){this.L.iframesTracking&&this.wc.onRecordingStatusChange(this.xh.getRecordingStatus())},t}(),mo=function(t){function n(n,i){var r=t.call(this)||this;return r.L=n,r.cn=i,r.vv=0,r.lv=new Map,r.wv={boundElement:window,type:"message",listener:function(t){return r.yv(t)}},r}return W(n,t),n.prototype.onChildMessage=function(t){this.pv=t},n.prototype.setRecordingStatusCallback=function(t){this.mv=t},n.prototype.onRecordingStatusChange=function(t){var n=this,i=Qt.buildBaseMessage(Zt.RecordingStatus,Xt.Parent,this.L.projectId);i.content=t,this.lv.forEach((function(t){!n.gv(t)&&t.port&&Qt.sendChannelMessage(t.port,i)}))},n.prototype.sendToChildren=function(t,n){var i=Qt.buildBaseMessage(t,Xt.Parent,this.L.projectId);i.content=n,this.Av(i)},n.prototype.onStart=function(){On(this.wv,!1),this.Sv()},n.prototype.onStop=function(){this.Ev(),In(this.wv,!1),this.bv()},n.prototype.Sv=function(){var t=this,n=this.Rv();this.Nv(n),csArray.prototype.forEach.call(n,(function(n){if(null===t.Tv(n)){var i={iframe:n};t.lv.set(t.vv,i),t.vv+=1}})),this.Ov()},n.prototype.Rv=function(){var t=this;return csArray.prototype.filter.call(Di.findAllElements("iframe"),(function(n){return t.Iv(n)}))},n.prototype.Nv=function(t){var n=this;this.lv.forEach((function(i,r){i.iframe&&-1===csArray.prototype.indexOf.call(t,i.iframe)&&n.kv(r,i)}))},n.prototype.kv=function(t,n){n.port&&Qt.closeChannelPort(n.port),this.lv.delete(t)},n.prototype.bv=function(){this.lv.forEach((function(t){t.port&&Qt.closeChannelPort(t.port)})),this.lv.clear()},n.prototype.Tv=function(t){var n=null;return this.lv.forEach((function(i,r){null===n&&i.iframe===t&&(n=r)})),n},n.prototype.Iv=function(t){return t.id!==r&&(!t.src||Yt(Wt(t.src),this.L.hostnames))},n.prototype.Av=function(t){this.lv.forEach((function(n){n.port&&Qt.sendChannelMessage(n.port,t)}))},n.prototype.Ov=function(){var t=this;this.lv.forEach((function(n,i){if(n.iframe.contentWindow){var r=t.Cv(i);Qt.sendPostMessage(n.iframe.contentWindow,"*",r)}}))},n.prototype.Ev=function(){var t=this._v();this.lv.forEach((function(n){n.port?Qt.sendChannelMessage(n.port,t):n.iframe.contentWindow&&Qt.sendPostMessage(n.iframe.contentWindow,"*",t)}))},n.prototype.Cv=function(t){return Qt.buildBaseMessage(Zt.Discovery,Xt.Parent,this.L.projectId,t)},n.prototype._v=function(){return Qt.buildBaseMessage(Zt.Stop,Xt.Parent,this.L.projectId)},n.prototype.Pv=function(t,n){var i=this,r=this.lv.get(t);void 0!==r?(r.port=n,r.port.onmessage=function(t){i.xv(t,r)}):sn.error("Parent received channel messaging initialization from unknow child id : ".concat(t," (").concat(this.vv,")"))},n.prototype.Lv=function(t){if(t.port){var n=Qt.buildBaseMessage(Zt.RecordingStatus,Xt.Parent,this.L.projectId),i=this.mv();this.gv(t)&&(i.isRecording=!1,i.isMutationTrackerStarted=!1),n.content=i,Qt.sendChannelMessage(t.port,n)}},n.prototype.xv=function(t,n){if(void 0!==n){var i=t.data.type,r=t.data.content;i===Zt.EndOfBufferedMessages?this.Lv(n):this.pv(n.iframe,i,r)}else sn.error("Parent received channelMessage from unknown child : ".concat(csJSON.stringify(t.data)))},n.prototype.yv=function(t){if(Qt.isMessageValid(t,Xt.Child,this.L.projectId,this.L.hostnames))switch(t.data.type){case Zt.Discovery:if(void 0===t.data.id)return void this.Sv();if(t.ports&&1===t.ports.length&&this.lv.has(t.data.id))return void this.Pv(t.data.id,t.ports[0]);sn.error("Parent received wrong channelMessage initialization : (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)));break;case Zt.ChildLogMessage:this.pv(null,Zt.ChildLogMessage,t.data.content);break;default:sn.warn("Parent received unexpected postMessage type from child (".concat(t.origin,") : ").concat(csJSON.stringify(t.data)))}},n.prototype.gv=function(t){return this.cn.isSensitive(t.iframe)||this.cn.isSensitiveChild(t.iframe)},n}(fi),go=function(){function t(){}return t.prototype.compute=function(t,n){var i=this.Mv(n.x)-this.Mv(t.x),r=this.Mv(n.y)-this.Mv(t.y),e=n.time-t.time;return{duration:e,distance:this.Dv(i,r),direction:this.Uv(i,r),velocity:this.jv(i,r,e)}},t.prototype.computePinchMetrics=function(t,n){var i=this.Mv(n.x)-this.Mv(t.x),r=this.Mv(n.y)-this.Mv(t.y);return{duration:n.time-t.time,distance:this.Dv(i,r)}},t.prototype.getScale=function(t,n){return Math.abs(n/t-1)},t.prototype.Mv=function(t){return t/window.devicePixelRatio},t.prototype.Dv=function(t,n){return Math.round(Math.sqrt(t*t+n*n))},t.prototype.jv=function(t,n,i){var r=i/1e3,e=t/r,s=n/r;return Math.round(Math.abs(e)+Math.abs(s))},t.prototype.Uv=function(t,n){return Math.abs(t)>Math.abs(n)?t>0?Gr.RIGHT:Gr.LEFT:n>0?Gr.DOWN:Gr.UP},t}(),Ao=function(){function t(){this.zv={},this.Hv=new go,this.Bv()}return t.prototype.onGesture=function(t){this.qv=t},t.prototype.isValidTouchEvent=function(t){return"touches"in t&&"changedTouches"in t},t.prototype.processActionDown=function(t){if(this.Fv(t)){this.Gv(t)&&this.Bv();var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:St()};if(1===t.touches.length)this.zv.startPinchTime=n.time,this.zv.firstTouch=n;else if(2===t.touches.length&&(this.zv.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:St()},this.zv.firstTouch&&this.zv.secondTouch)){var i=this.Hv.computePinchMetrics(this.zv.firstTouch,this.zv.secondTouch);this.Vv=i.distance}csArray.prototype.push.call(this.Wv,n),this.Yv=Wn(t)}},t.prototype.processActionMove=function(){this.Jv=!0},t.prototype.processActionUp=function(t){if(this.$v(t)){if(csArray.prototype.push.call(this.Wv,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:St()}),this.Kv(t)&&this.zv.startPinchTime){var n={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.zv.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:St()};this.zv.firstTouch&&(this.zv.firstTouch=n,this.zv.secondTouch=i),this.Xv(t)}this.Vv||this.Zv()&&this.Qv(t)}},t.prototype.Bv=function(){this.Wv=[],this.Yv=null,this.Jv=!1,this.Vv=null,this.tl=!0},t.prototype.Qv=function(t){var n=this.Hv.compute(this.Wv[0],this.Wv[1]);this.tl=t.isTrusted;var i=this.Jv?this.nl(n):this.il(n);this.qv(i,t)},t.prototype.Xv=function(t){if(this.zv.firstTouch&&this.zv.secondTouch){var n=this.Hv.computePinchMetrics(this.zv.firstTouch,this.zv.secondTouch);this.tl=t.isTrusted;var i=this.rl(n);i&&this.qv(i,t)}},t.prototype.rl=function(t){if(this.Vv&&!(this.Hv.getScale(this.Vv,t.distance)<.1))return{type:this.Vv>t.distance?Fr.PINCH_IN:Fr.PINCH_OUT,target:this.Yv,distance:t.distance,isTrusted:this.tl}},t.prototype.nl=function(t){return{type:t.velocity<100?Fr.DRAG:Fr.FLICK,target:this.Yv,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.tl}},t.prototype.il=function(t){return{type:t.duration<1e3?Fr.TAP:Fr.LONG_PRESS,target:this.Yv,isTrusted:this.tl}},t.prototype.Gv=function(t){return 1===t.touches.length},t.prototype.Zv=function(){return 2===this.Wv.length},t.prototype.Fv=function(t){return t.touches.length>0},t.prototype.$v=function(t){return t.changedTouches.length>0},t.prototype.Kv=function(t){return this.Jv&&!!this.Vv&&1===t.changedTouches.length&&1===t.touches.length},t}(),So=function(t){function n(n){var i=t.call(this)||this;return i.el=n,i.je=[{boundElement:document,type:"touchstart",listener:function(t){return i.Gr(t)}},{boundElement:document,type:"touchmove",listener:function(t){return i.Gr(t)}},{boundElement:document,type:"touchend",listener:function(t){return i.Gr(t)}}],i.sl=new Ao,i.sl.onGesture((function(t,n){return i.ul(t,n)})),i}return W(n,t),n.prototype.ul=function(t,n){for(var i in this.subscriptions){(0,this.subscriptions[i])(t,n)}},n.prototype.onStartTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.je,(function(t){return On(t)}))},n.prototype.onStopTracking=function(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.je,(function(t){return In(t)}))},n.prototype.canDetectGesture=function(){return void 0!==window.devicePixelRatio},n.prototype.Gr=function(t){var n=this;this.el.tryToExecute("process gesture event",(function(){if(n.sl.isValidTouchEvent(t))switch(t.type){case"touchstart":n.sl.processActionDown(t);break;case"touchmove":n.sl.processActionMove();break;case"touchend":n.sl.processActionUp(t)}}))()},n.isSwipe=function(t){return t.type===Fr.FLICK||t.type===Fr.DRAG},n}(function(){function t(){this.subscriptions={}}return t.prototype.subscribe=function(t,n){this.subscriptions[t]=n,1===Object.keys(this.subscriptions).length&&this.onStartTracking()},t.prototype.unsubscribe=function(t){delete this.subscriptions[t],0===Object.keys(this.subscriptions).length&&this.onStopTracking()},t}()),Eo=function(t){function n(n,i){var r=t.call(this)||this;return r.ar=n,r.ol=i,r.hl=0,r}return W(n,t),n.prototype.onStart=function(){var t=this;sn.isPerfLoggingActive()&&(this.cl=window.setInterval((function(){return t.al()}),n.vl))},n.prototype.onStop=function(){sn.isPerfLoggingActive()&&(this.al(),clearInterval(this.cl))},n.prototype.al=function(){if(!(jn.isEmpty()||this.hl>=n.ll)){var t=jn.getAll();this.hl++;var i=Y({a:n.dl,l:n.wl},this.ol.getRequestParameters()),r=csArray.prototype.map.call(t,(function(t){return Y(Y({},t),i)}));this.ar.send(r),jn.clear()}},n.dl="uxa",n.wl="perf",n.vl=5e3,n.ll=5,n}(fi),bo=function(){function t(t,n,i){this.L=t,this.ol=n,this.zh=i}return t.prototype.init=function(){this.yl=new Eo(this.zh.create(this.L.getLoggerUri(),!0),this.ol)},t.prototype.onStartTracking=function(){this.yl.start()},t.prototype.onOptout=function(){this.yl.stop()},t}(),Ro=function(){function t(){this.pl=!1}return t.prototype.enableRecordingStatus=function(t,n,i,r,e,s){this.pl=!0,this.He=t,this.cn=n,this.Be=i,this.Fh=r,this.Y=e,this.an=s},t.prototype.getRecordingStatus=function(){var t,n,i,r;return this.pl?{isRecording:this.He.isRecording(),isMutationTrackerStarted:this.He.isMutationTrackerStarted(),PIISelectors:this.cn.getPIISelectors(),capturedElementSelector:this.Fh.getWhitelistedElementsSelector(),useAnonymization:this.Be.shouldUseAnonymization(),encryptionSelectors:null===(t=this.an)||void 0===t?void 0:t.getEncryptionSelectors(),activateOnlineAssetsOnNextStart:null===(n=this.He.getStaticResourceManagerStatus())||void 0===n?void 0:n.onlineAssets.enabledForChildrenOnNextStart,recordingStartTimestamp:parseInt(this.He.getRecordingStartTimestamp(),10),etrState:null!==(r=null===(i=this.Y.getSession())||void 0===i?void 0:i.etrState)&&void 0!==r?r:ei.ETR_OFF}:{isRecording:!1,recordingStartTimestamp:0,etrState:ei.ETR_OFF}},t}(),No=function(){function t(){this.ml=Os.Natural}return t.prototype.setPageViewType=function(t){this.ml=t},t.prototype.getPageViewType=function(){return this.ml},t.prototype.getRequestParameters=function(){return{pvt:this.ml}},t}(),To=function(){function t(t){this.rr=t}return t.prototype.onAfterVisitorRenewal=function(){this.rr.startNewSession()},t}(),Oo=function(){function t(t,n,i,r,e,s,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A,S,E,b,R){var N=this;this.Vo=t,this.Lh=n,this.W=i,this.Y=r,this.Wn=e,this.Mh=s,this.gl=u,this.L=o,this.Al=h,this.Sl=c,this.El=a,this.Yu=f,this.M=v,this.Ra=l,this.Hh=d,this.X=w,this.bl=y,this.If=p,this.yc=m,this.rn=g,this.Rl=A,this.jh=S,this.Nl=E,this.ys=b,this.zh=R,this.Tl=function(t){void 0===t&&(t=!1),N.Ol.start(t),N.Il.start()}}return t.prototype.start=function(){var t,n,i,r,e,s,u,o,h,c,a,f,v,l,d,w,y=this;(this.Al.init(),this.Sl.init(),this.Sl.isActive())||(this.ys.schedule((function(){v=new Qu(y.Y,y.W),w=new To(v),f=new Gu(y.Ra),d=new So(sn),t=new Cu(y.L,y.W,y.Y,y.Ra,f,y.Mh,v,d,y.yc,y.zh),n=new ss(y.Mh,y.Y,y.L,y.Vo,y.Lh,y.M),l=new wo(y.L),a=new Ro;var p=new mo(y.L,l);(c=new po(y.L,p,a,y.yc)).init();var m=new No;i=new ts(y.W,y.Y,y.Mh,y.yc,p,y.L,m,a),r=new ds(y.L,y.W,y.Y,y.Mh,y.M,v,y.X),y.Ol=new Fu(y.L,y.Mh,y.Wn,y.W,y.Y,y.Yu,y.rn,y.Hh,y.X,y.jh,m),e=new Zu(y.L,y.W,y.Y,y.Mh),s=new ro(y.L,y.Y,y.X,y.Mh,y.Tl,l),u=new ho(y.L,y.Mh,y.Lh,y.Vo,y.If),o=new yo(y.Mh),h=new bo(y.L,new Nt(y.L,y.M),y.zh),y.Il=new Vu})),this.ys.schedule((function(){y.El.init()})),this.ys.schedule((function(){i.init()})),this.ys.schedule((function(){n.init()})),this.ys.schedule((function(){r.init()})),this.ys.schedule((function(){y.Rl.init()})),this.ys.schedule((function(){y.Ol.init()})),this.ys.schedule((function(){e.init()})),this.ys.schedule((function(){s.init()})),this.ys.schedule((function(){u.init()})),this.ys.schedule((function(){y.bl.init()})),this.ys.schedule((function(){o.init()})),this.ys.schedule((function(){h.init()})),this.ys.schedule((function(){y.Nl.init()})),this.ys.schedule((function(){y.Wn.addListener(e),y.Wn.addListener(y.gl),y.Wn.addListener(t),y.Wn.addListener(y.El),y.Wn.addListener(i),y.Wn.addListener(y.Rl),y.Wn.addListener(y.Ol),y.Wn.addListener(s),y.Wn.addListener(u),y.Wn.addListener(n),y.Wn.addListener(c),y.Wn.addListener(h),y.Wn.addListener(w)})),we.isRecordingSupported()&&this.ys.schedule((function(){var t=new Be(a,y.Y,y.L,y.Lh,f,y.Yu,y.Vo,y.Mh,y.M,v,y.X,l,y.er,y.ur,y.hr,d,y.cr,y.Wn,y.If,y.yc,y.jh,y.ys,y.zh,y.Hh);t.init(),y.Wn.addListener(t),i.setRecordingService(t.recordingService)})),this.ys.schedule((function(){t.init()})),this.ys.schedule((function(){v.onSessionExpired((function(){y.Wn.emitBeforeSessionRenewal(),y.kl(!0),y.Wn.emitAfterSessionRenewal()})),y.kl()})))},t.prototype.kl=function(t){var n=this;void 0===t&&(t=!1),this.Mh.start(),this.Il.onLoad((function(){n.Wn.emitStartTracking(t)})),to(this.L)&&!t||this.Tl(t)},t}(),Io=function(){function t(t,n,i,r,e,s,u,o){this.L=t,this.W=n,this.nn=i,this.Cl=r,this._l=e,this.Pl=s,this.xl=u,this.Ll=o}return t.prototype.compute=function(t){var n,i,r=this;this.L.crossDomainTracking&&!this.L.cookielessTrackingEnabled?this.L.crossDomainSingleIframeTracking?null===(n=this.xl)||void 0===n||n.start((function(){return r.Ml(t)})):null===(i=this.Pl)||void 0===i||i.applyUpToDate((function(){return r.Ml(t)})):this.Ml(t)},t.prototype.Ml=function(t){this._l.handle(),this.Cl.clear(),this.Dl()?(this.Cl.restoreClearedVisitor(),t(!0)):(this.nn.exclude(this.L),t(!1))},t.prototype.Dl=function(){var t=it.boolean(this.L.sampleRate);return this.Ll.isForceIncluded()||!this.nn.isExcluded()&&this.W.doesVisitorExist()||!this.nn.isExcluded()&&t},t}();!function(t){t.generate=function(){var t=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(function(t){for(var n=0,i=0;i<t.length;i+=1)n=csString.prototype.charCodeAt.call(t,i)+(n<<6)+(n<<16)-n;return Math.abs(n)}(t).toString(16),-4),i=(new csDate).getTime(),r="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(i+16*Math.random())%16|0;return i=Math.floor(i/16),("x"===t?n:7&n|8).toString(16)}));return csString.prototype.replace.call(r,"hhhh",n)}}(lo||(lo={}));var ko,Co=function(){function t(t,n,i,r){this.L=t,this.Ul=n,this.Y=i,this.Wn=r,this.jl=1e4}return t.prototype.createOrUpdateVisitor=function(){var t=this.getVisitor();null===t&&(t=this.zl(),this.Y.removeSession()),this.Hl(t),this.setVisitor(t)},t.prototype.zl=function(){return{id:lo.generate(),visitsCount:0,appliedTrackingDraw:this.L.lastTrackingDraw,creationTimestamp:Et(),lastVisitTimestamp:0,hitTimestamp:0,expires:St()+this.L.visitorCookieTimeout,allowSubdomains:this.L.allowSubdomains}},t.prototype.Hl=function(t){var n=Et();this.Y.doesSessionExist()||(t.visitsCount+=1,t.lastVisitTimestamp=n),t.hitTimestamp=n,t.appliedTrackingDraw=this.L.lastTrackingDraw,this.Bl=t.visitsCount},t.prototype.getRequestParameters=function(){var t=this.getVisitor();return t?{uu:t.id,sn:"".concat(t.visitsCount),hd:"".concat(t.hitTimestamp)}:{}},t.prototype.getVisitor=function(){return this.Ul.get()},t.prototype.setVisitor=function(t){this.Ul.set(t)},t.prototype.doesVisitorExist=function(){return null!==this.Ul.get()},t.prototype.resetVisitor=function(){this.ql(),this.Wn.emitAfterVisitorCleared()},t.prototype.removeVisitor=function(){this.Ul.remove()},t.prototype.hasAllowSubdomainsChanged=function(){var t=this.getVisitor();return!!t&&t.allowSubdomains!==this.L.allowSubdomains},t.prototype.handleSubdomainChange=function(){this.Ul.handleSubdomainChange()},t.prototype.isSessionRenewed=function(){var t=this.getVisitor();return null!==t&&void 0!==this.Bl&&t.visitsCount!==this.Bl},t.prototype.Fl=function(){return!Ct(this.Gl)||St()-this.Gl>this.jl},t.prototype.renewVitor=function(){this.Fl()?(this.Gl=St(),this.ql(),this.Wn.emitAfterVisitorRenewal()):sn.warn("session:start:newVisitor is trying to renew visitor under time limit")},t.prototype.ql=function(){this.Wn.emitBeforeVisitorRenewal(),this.removeVisitor()},t}(),_o="_cs_s",Po=18e5,xo=/^(\d+\.[013567TBW](\.[01])?)(\.\d+)?$/,Lo=".";!function(t){t[t.NOT_FOUND=0]="NOT_FOUND",t[t.EXPIRED=1]="EXPIRED",t[t.FOUND=2]="FOUND"}(ko||(ko={}));var Mo,Do=function(){function t(t,n,i){this.L=t,this.Vl=n,this.Wl=i,this.Eo=null,this.Yl=!1}return t.prototype.get=function(n){var i=this.getRawSession(n);return this.isValid(i)?t.fromString(i):null},t.prototype.getRawSession=function(n){if(n){var i=this.Jl();return t.$l(i)}var r=this.Kl(),e=r.sessionString,s=r.status,u=t.$l(e);if(s!==ko.EXPIRED)return u;if(this.L.cookielessTrackingEnabled)return null;var o=this.Jl();if(!o)return null;var h=csString.prototype.split.call(o,Lo);if(!t.Xl(h))return o;var c=h[h.length-1],a=parseInt(c,10);return isNaN(a)||this.Zl(a),u},t.prototype.onCookieToSet=function(t){this.Ql=t},t.prototype.onCookieToRemove=function(t){this.td=t},t.prototype.set=function(t,n){var i;void 0===n&&(n=Po);var r=St()+n,e=this.toString(t);e+="".concat(Lo).concat(r),this.nd(e,r),this.L.cookielessTrackingEnabled?this.Wl.setItem(_o,e):(this.Vl.set(_o,e,n),null===(i=this.Ql)||void 0===i||i.call(this,_o,e,n))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.Wl.removeItem(_o):(this.Vl.delete(_o),null===(t=this.td)||void 0===t||t.call(this,_o)),this.rd()},t.prototype.handleSubdomainChange=function(){if(!this.L.cookielessTrackingEnabled){var t=this.get(!0);t&&(this.L.allowSubdomains?this.Vl.delete(_o,vn.CURRENT_DOMAIN):this.Vl.delete(_o,this.Vl.getRootDomain()),this.set(t))}},t.prototype.isValid=function(n){return null!==n&&t.isValidSessionString(n)},t.prototype.toString=function(t){return csArray.prototype.join.call([t.pageNumber,t.recordingState,t.etrState],Lo)},t.prototype.nd=function(t,n){this.Eo={sessionString:t,expires:n}},t.prototype.Kl=function(){return this.Eo?this.Eo&&St()<=this.Eo.expires?{sessionString:this.Eo.sessionString,status:ko.FOUND}:{sessionString:this.Eo.sessionString,status:ko.EXPIRED}:{sessionString:this.Jl(),status:ko.NOT_FOUND}},t.prototype.rd=function(){this.Eo=null},t.prototype.Zl=function(t){this.Eo&&(this.Eo.expires=t,this.Yl=!0)},t.prototype.isCacheRefreshed=function(){return this.Yl},t.prototype.resetCacheRefreshed=function(){this.Yl=!1},t.prototype.Jl=function(){if(this.L.cookielessTrackingEnabled){var t=this.Wl.getItem(_o);return!t||this.sd(t)?null:t}return this.Vl.get(_o)},t.prototype.sd=function(t){var n=csString.prototype.split.call(t,Lo),i=parseInt(n[n.length-1],10);return!isNaN(i)&&St()>i},t.Xl=function(t){return 13===t[t.length-1].length},t.$l=function(t){var n;if(!t)return null;var i=null===(n=csString.prototype.match.call(t,xo))||void 0===n?void 0:n[1];return null!=i?i:null},t.fromRawString=function(n){var i=t.$l(n);return null!==i?t.fromString(i):null},t.fromString=function(t){var n,i=csString.prototype.split.call(t,Lo),r=i[0];return{recordingState:i[1],etrState:null!==(n=i[2])&&void 0!==n?n:ei.ETR_OFF,pageNumber:parseInt(r,10)}},t.isValidSessionString=function(t){return xo.test(t)},t}();!function(t){t[t.NO=0]="NO",t[t.WITHDRAWN=1]="WITHDRAWN",t[t.GRANTED=2]="GRANTED"}(Mo||(Mo={}));var Uo,jo=function(){function t(t,n){this.ud=t,this.od=n,this.ad=null,this.vd=0,this.ld=Mo.NO}return t.prototype.setDynamicVariablesService=function(t){this.dd=t},t.prototype.createOrUpdateSession=function(){this.wd(),this.yd=St(),this.vd=0;var t=this.pd();null===t?(t=this.md(),this.gd(t),this.Ad(t)):(t=this.od.sanitizeSessionRecordingState(t),this.gd(t),t.recordingState=this.od.updateRecordingState(t)),this.setSession(t)},t.prototype.grantReplayRecording=function(t){t.recordingState=this.od.getDisabledRecordingState(),t.recordingState=this.od.computeInitialRecordingStateFromRecordingConsentGranted(t),this.setSession(t)},t.prototype.grantReplayRecordingBeforeSessionStart=function(){this.ld=Mo.GRANTED},t.prototype.withdrawnReplayRecording=function(t){t.recordingState=this.od.getConsentWithdrawnRecordingState(),this.setSession(t)},t.prototype.withdrawnReplayRecordingBeforeSessionStart=function(){this.ld=Mo.WITHDRAWN},t.prototype.Ad=function(t){this.ld===Mo.WITHDRAWN?(t.recordingState=this.od.getConsentWithdrawnRecordingState(),this.setSession(t)):this.ld===Mo.GRANTED?t.recordingState=this.od.computeInitialRecordingStateFromRecordingConsentGranted(t):t.recordingState=this.od.computeInitialRecordingState(t),this.ld=Mo.NO},t.prototype.md=function(){return{pageNumber:0,recordingState:this.od.getDisabledRecordingState(),etrState:ei.ETR_OFF}},t.prototype.gd=function(t){t.pageNumber+=1},t.prototype.isReplayRecorded=function(){var t=this.getSession();return!!t&&this.od.isReplayRecorded(t)},t.prototype.isTemporarilyRecorded=function(){var t=this.getSession();return(null==t?void 0:t.recordingState)===ri.TEMPORARILY_RECORDED},t.prototype.abortQuotaServiceRequest=function(){this.od.abortQuotaServiceRequest()},t.prototype.getRequestParameters=function(){var t={},n=this.getSession();return null!==n&&(t.pn="".concat(n.pageNumber)),t},t.prototype.getSession=function(){return this.ud.get()},t.prototype.pd=function(){return this.ud.get(!0)},t.prototype.doesSessionExist=function(){return null!==this.ud.get()},t.prototype.setSession=function(t){this.ud.set(t)},t.prototype.removeSession=function(){this.ud.remove()},t.prototype.getRecordingStates=function(){var t=this.getSession(),n=[];return t&&(t.recordingState!==ri.NOT_RECORDED&&csArray.prototype.push.call(n,t.recordingState),t.etrState===ei.ETR_ON&&csArray.prototype.push.call(n,ri.ETR_SAMPLING)),n},t.prototype.updateRecordingState=function(t,n){var i=this.getSession();null!==i&&(i.recordingState=t,i.etrState=n,this.setSession(i))},t.prototype.hasValidSession=function(){var t=this.ud.getRawSession();return this.ud.isValid(t)},t.prototype.handleSubdomainChange=function(){this.ud.handleSubdomainChange()},t.prototype.pollCacheRefreshEvent=function(t){void 0===t&&(t=!0);var n=this.ud.isCacheRefreshed();return n&&t&&this.ud.resetCacheRefreshed(),n},t.prototype.extendSessionPeriodically=function(){this.ad||this.Sd()},t.prototype.Sd=function(){if(this.Ed())this.wd();else{var t=this.getSession();if(null===t)return sn.warn("extendSession is trying to extend an expired session"),void this.wd();this.ud.set(t,Po),this.bd(),this.Rd()}},t.prototype.Rd=function(){var t=this;this.ad=window.setTimeout((function(){t.Sd()}),174e4)},t.prototype.Ed=function(){return 1434e4-(St()+Po-this.yd)<0},t.prototype.wd=function(){this.ad&&(window.clearTimeout(this.ad),this.ad=null)},t.prototype.bd=function(){this.vd+=1,this.dd.trackDynamicVariable("session_expiry_update",this.vd)},t}(),zo=function(){function t(t,n,i){this.L=t,this.W=n,this.nn=i}return t.prototype.clear=function(){this.Nd()&&(this.Td=this.W.getVisitor(),this.W.removeVisitor()),this.Od()&&this.nn.removeExclusion()},t.prototype.Nd=function(){return this.W.doesVisitorExist()&&this.W.getVisitor().appliedTrackingDraw!==this.L.lastTrackingDraw},t.prototype.Od=function(){return this.nn.getAppliedTrackingDraw()!==this.L.lastTrackingDraw},t.prototype.restoreClearedVisitor=function(){this.Td&&this.W.setVisitor(this.Td)},t}(),Ho=function(){function t(t,n,i){this.W=t,this.Y=n,this.Id=i}return t.prototype.handle=function(){this.W.hasAllowSubdomainsChanged()&&(this.W.handleSubdomainChange(),this.Y.handleSubdomainChange(),this.Id.handleSubdomainChange())},t}(),Bo=function(){function t(){this.listeners=[]}return t.prototype.addListener=function(t){csArray.prototype.push.call(this.listeners,t)},t}(),qo=function(t){function n(n){var i=t.call(this)||this;return i.ys=n,i}return W(n,t),n.prototype.emitBeforeNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeNaturalPageView&&i.onBeforeNaturalPageView()}},n.prototype.emitAfterNaturalPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterNaturalPageView&&i.onAfterNaturalPageView()}},n.prototype.emitInitTracking=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitTracking&&i.onInitTracking()}},n.prototype.emitStartTracking=function(t){for(var n=function(n){n.onStartTracking&&i.ys.schedule((function(){return n.onStartTracking(t)}))},i=this,r=0,e=this.listeners;r<e.length;r++){n(e[r])}},n.prototype.emitArtificialPageViewEnd=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];if(i.onArtificialPageViewEnd)try{i.onArtificialPageViewEnd()}catch(t){sn.error(t)}}},n.prototype.emitBeforeArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView()}},n.prototype.emitAfterArtificialPageView=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterArtificialPageView&&i.onAfterArtificialPageView()}},n.prototype.emitBeforeSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeSessionRenewal&&i.onBeforeSessionRenewal()}},n.prototype.emitAfterSessionRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterSessionRenewal&&i.onAfterSessionRenewal()}},n.prototype.emitOptout=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onOptout&&i.onOptout()}},n.prototype.emitReplayUnanonymizationConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onReplayUnanonymizationConsentGranted&&i.onReplayUnanonymizationConsentGranted()}},n.prototype.emitReplayUnanonymizationConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onReplayUnanonymizationConsentWithdrawn&&i.onReplayUnanonymizationConsentWithdrawn()}},n.prototype.emitAfterReplayRecordingConsentGranted=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterReplayRecordingConsentGranted&&i.onAfterReplayRecordingConsentGranted()}},n.prototype.emitAfterReplayRecordingConsentWithdrawn=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterReplayRecordingConsentWithdrawn&&i.onAfterReplayRecordingConsentWithdrawn()}},n.prototype.emitRecordingStateChange=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var e=r[i];e.onRecordingStateChange&&e.onRecordingStateChange(t,n)}},n.prototype.emitInitialDomStart=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onInitialDomStart&&i.onInitialDomStart()}},n.prototype.emitInitialDomDone=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onInitialDomDone&&r.onInitialDomDone(t)}},n.prototype.emitRecordingStatusChange=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onRecordingStatusChange&&i.onRecordingStatusChange()}},n.prototype.emitBeforeVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onBeforeVisitorRenewal&&i.onBeforeVisitorRenewal()}},n.prototype.emitAfterVisitorCleared=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterVisitorCleared&&i.onAfterVisitorCleared()}},n.prototype.emitAfterVisitorRenewal=function(){for(var t=0,n=this.listeners;t<n.length;t++){var i=n[t];i.onAfterVisitorRenewal&&i.onAfterVisitorRenewal()}},J([Gn("emitStartTracking")],n.prototype,"emitStartTracking",null),n}(Bo),Fo="_cs_c";!function(t){t[t.NOT_REQUIRED=0]="NOT_REQUIRED",t[t.NOT_EXPRESSED=1]="NOT_EXPRESSED",t[t.GRANTED=2]="GRANTED",t[t.WITHDRAWN=3]="WITHDRAWN"}(Uo||(Uo={}));var Go,Vo=function(){function t(t,n,i){this.L=t,this.Vl=n,this.kd=i}return t.prototype.get=function(){var t;return null===(t=this.L.cookielessTrackingEnabled?this.kd.getItem(Fo):this.Vl.get(Fo))?t:Number(t)},t.prototype.set=function(t){this.L.cookielessTrackingEnabled?this.kd.setItem(Fo,csString(t)):this.Vl.set(Fo,csString(t),nt)},t.prototype.remove=function(){this.L.cookielessTrackingEnabled?this.kd.removeItem(Fo):this.Vl.delete(Fo)},t.prototype.handleSubdomainChange=function(){this.L.cookielessTrackingEnabled||(this.L.allowSubdomains?this.Vl.delete(Fo,vn.CURRENT_DOMAIN):this.Vl.delete(Fo,this.Vl.getRootDomain()))},t}(),Wo=function(){function t(t,n,i){this.L=t,this.Y=n,this.Wn=i}return t.prototype.grantReplayConsent=function(){if(_e.isReplayConsentNeeded(this.L)){var t=this.Y.getSession();t?_e.isRecordingBlockedByConsent(t)&&(this.Y.grantReplayRecording(t),this.Wn.emitAfterReplayRecordingConsentGranted()):this.Y.grantReplayRecordingBeforeSessionStart()}},t.prototype.withdrawReplayConsent=function(){if(_e.isReplayConsentNeeded(this.L)){var t=this.Y.getSession();t?_e.isRecordingWithDrawn(t)||(this.Y.withdrawnReplayRecording(t),this.Wn.emitAfterReplayRecordingConsentWithdrawn()):this.Y.withdrawnReplayRecordingBeforeSessionStart()}},t}(),Yo=["replay:consent:unanonymized:granted","trackConsentGranted"],Jo=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],$o=["replay:consent:startForSession:granted"],Ko=["replay:consent:startForSession:withdrawn"],Xo=function(){function t(t,n,i,r,e){this.L=t,this.Mh=n,this.Yu=i,this.Y=r,this.Wn=e}return t.prototype.init=function(){this.Cd=new Wo(this.L,this.Y,this.Wn),this.Yu.setInitialConsent(),this._d()},t.prototype._d=function(){var t=this;this.Mh.register(Yo,(function(){t.Yu.grantReplayAnonymizationConsent()})),this.Mh.register(Jo,(function(){t.Yu.withdrawReplayAnonymizationConsent()})),this.Mh.register($o,(function(){t.Cd.grantReplayConsent()})),this.Mh.register(Ko,(function(){t.Cd.withdrawReplayConsent()}))},t.prototype.onOptout=function(){this.Yu.removeAllConsents()},t.prototype.onBeforeVisitorRenewal=function(){this.Yu.removeAllConsents()},t.prototype.onAfterVisitorRenewal=function(){this.Yu.setInitialConsent()},t.prototype.onAfterVisitorCleared=function(){this.Yu.setInitialConsent()},t}(),Zo=function(){function t(t,n,i){this.L=t,this.Ul=n,this.Wn=i}return t.prototype.setInitialConsent=function(){var t=this.Ul.get();(null===t||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()},t.prototype.hasConsentRequiredChanged=function(t){var n=this.L.consentRequired;return n&&t===Uo.NOT_REQUIRED||!n&&t!==Uo.NOT_REQUIRED},t.prototype.handleSubdomainChange=function(){this.Ul.handleSubdomainChange()},t.prototype.setDefaultReplayAnonymization=function(){var t=this.L.consentRequired?Uo.NOT_EXPRESSED:Uo.NOT_REQUIRED;this.Ul.set(t)},t.prototype.grantReplayAnonymizationConsent=function(){this.L.consentRequired&&(this.Ul.set(Uo.GRANTED),this.Wn.emitReplayUnanonymizationConsentGranted())},t.prototype.withdrawReplayAnonymizationConsent=function(){this.L.consentRequired&&(this.Ul.set(Uo.WITHDRAWN),this.Wn.emitReplayUnanonymizationConsentWithdrawn())},t.prototype.removeAllConsents=function(){this.Ul.remove()},t.prototype.isReplayUnanonymizedAllowedByConsent=function(){return!this.L.consentRequired||this.Ul.get()===Uo.GRANTED},t.prototype.getRequestParameters=function(){return{uc:"".concat(this.Ul.get())}},t}(),Qo=function(){function t(t,n,i,r,e,s,u){this.Wn=t,this.Mh=n,this.gl=i,this.Al=r,this.Sl=e,this.Pd=s,this.El=u}return t.prototype.start=function(){this.Wn.addListener(this.Pd),this.Wn.addListener(this.El),this.Wn.addListener(this.gl),this.El.init(),this.Al.init(),this.Sl.init(),this.Sl.isActive()||this.Mh.start()},t}(),th="_cs_ex",nh=2592e6,ih=/^[0-9]+$/,rh=function(){function t(t,n,i){this.L=t,this.Vl=n,this.Wl=i}return t.prototype.onCookieToSet=function(t){this.Ql=t},t.prototype.onCookieToRemove=function(t){this.td=t},t.prototype.get=function(){return this.L.cookielessTrackingEnabled?Number(this.Wl.getItem(th)):Number(this.Vl.get(th))},t.prototype.set=function(t){var n;this.L.cookielessTrackingEnabled?this.Wl.setItem(th,t):(this.Vl.set(th,t,nh),null===(n=this.Ql)||void 0===n||n.call(this,th,t,nh))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.Wl.removeItem(th):(this.Vl.delete(th),null===(t=this.td)||void 0===t||t.call(this,th))},t.isValidExclusionString=function(t){return ih.test(t)},t}(),eh=function(){function t(t,n){this.De=t,this.Ul=n}return t.prototype.exclude=function(t){this.Ul.set(csString(t.lastTrackingDraw))},t.prototype.removeExclusion=function(){this.Ul.remove()},t.prototype.isExcluded=function(){return this.xd()||this.Ld()},t.prototype.xd=function(){return 0!==this.getAppliedTrackingDraw()},t.prototype.getAppliedTrackingDraw=function(){return this.Ul.get()},t.prototype.Ld=function(){return csString.prototype.indexOf.call(this.De.href,th)>0},t}(),sh=function(){function t(t){this.Tc=t}return t.prototype.onOptout=function(){this.Tc.removeExclusion()},t}();!function(t){t.SessionReplay="SR",t.None=""}(Go||(Go={}));var uh=function(){function t(t){this.X=t,this.Md=new RegExp("".concat(".^"))}return t.prototype.setExcludeUrlForSessionReplay=function(t){this.Md=new RegExp(t)},t.prototype.Dd=function(){return this.Md.test(this.X.getAnonymizedUrl())?Go.SessionReplay:Go.None},t.prototype.isUrlExcludedForSessionReplay=function(){return this.Dd()===Go.SessionReplay},t.prototype.getRequestParameters=function(){return{ex:this.Dd()}},t}(),oh=["excludeURLforReplay"],hh=function(){function t(t,n){this.Tc=t,this.Mh=n}return t.prototype.init=function(){var t=this;this.Mh.register(oh,(function(n){It(n)&&t.Tc.setExcludeUrlForSessionReplay(n)}))},t}(),ch="_cs_inc",ah=function(){function t(t,n){this.De=t,this.Vl=n}return t.prototype.isForceIncluded=function(){return this.Ud()||this.jd()},t.prototype.isForceReplayRecorded=function(){return this.zd(ri.GLOBAL_SAMPLING)},t.prototype.Ud=function(){return null!==this.Vl.get(ch)},t.prototype.zd=function(t){return this.Vl.get(ch)===t},t.prototype.jd=function(){return csString.prototype.indexOf.call(this.De.href,ch)>0},t}(),fh="_cs_optout",vh=function(){function t(t,n,i){this.L=t,this.Vl=n,this.kd=i}return t.prototype.get=function(){return this.L.cookielessTrackingEnabled?this.kd.getItem(fh):this.Vl.get(fh)},t.prototype.set=function(t){this.L.cookielessTrackingEnabled?this.kd.setItem(fh,t):this.Vl.set(fh,t,nt)},t}(),lh=function(){function t(t,n,i){this.Wn=t,this.De=n,this.Ul=i}return t.prototype.init=function(){!this.isActive()&&this.Hd()&&this.activate()},t.prototype.isActive=function(){return"1"===this.Ul.get()},t.prototype.activate=function(){this.Wn.emitOptout(),this.Ul.set("1")},t.prototype.Hd=function(){return csString.prototype.indexOf.call(this.De.href,fh)>0},t}(),dh=["optout"],wh=function(){function t(t,n){this.Mh=t,this.Sl=n}return t.prototype.init=function(){var t=this;this.Mh.register(dh,(function(){t.Sl.activate()}))},t}(),yh=function(){function t(t,n){this.Mh=t,this.yc=n}return t.prototype.init=function(){this.yc.addListener(this.Mh)},t.prototype.onOptout=function(){this.Mh.stop()},t.prototype.onBeforeSessionRenewal=function(){this.Mh.stop()},t}();var ph;!function(t){t.UXA="_uxa",t.WVT="cs_wvt"}(ph||(ph={}));var mh=function(t){function n(n){var i=t.call(this)||this;return i.Bd=n,i.qd={},i}return W(n,t),n.prototype.register=function(t,n,i){for(var r=0,e=t;r<e.length;r++){var s=e[r];this.qd[s]={callback:n,configuration:i},this.qd}},n.prototype.onStart=function(){this.Fd(),this.Gd()},n.prototype.onStop=function(){for(var t=0,n=this.Bd;t<n.length;t++){var i=n[t];window[i]=[]}},n.prototype.applyFromIntegration=function(t,n,i){var r=this;this.isStarted?sn.tryToExecute("Commands.apply.from.integration: ".concat(i),(function(){var i;if(r.qd[t])return(i=r.qd[t]).callback.apply(i,n)}))():window._uxa.push(X([t],n,!0))},n.prototype.onIframeCommands=function(t){for(var n=0,i=t.commands;n<i.length;n++){var r=i[n];this.Vd(r.name,r.params,t.iframePath)}},n.prototype.Vd=function(t,n,i){var r=this;sn.tryToExecute("Commands.apply.from.iframe: ".concat(i),(function(){var i;if(r.qd[t])return(i=r.qd[t]).callback.apply(i,n)}))()},n.prototype.Fd=function(){for(var t=this,n=0,i=this.Bd;n<i.length;n++){var r=i[n];window[r].forEach((function(n){var i=n[0],r=n.slice(1);return t.Wd(i,r,!1)}))}},n.prototype.Gd=function(){for(var t=this,n=0,i=this.Bd;n<i.length;n++){var r=i[n];window[r]={push:function(n){var i=n[0],r=n.slice(1);return t.Wd(i,r,!0)}}}},n.prototype.Wd=function(t,n,i){var r,e,s;if(this.qd[t]){if((null===(e=this.qd[t].configuration)||void 0===e?void 0:e.disableApplyPending)&&!i||(null===(s=this.qd[t].configuration)||void 0===s?void 0:s.disableApplyImmediate)&&i)return;try{return(r=this.qd[t]).callback.apply(r,n)}catch(i){sn.error("Command ".concat(t," failed - params: ").concat(csJSON.stringify(n)),i)}}},n}(fi),gh=function(){function t(t,n,i){this.L=t,this.W=n,this.Y=i}return t.prototype.getRequestParameters=function(){var t=Y(Y({},At()),this.L.getRequestParameters()),n=this.Y.getSession();n&&(t.pn="".concat(n.pageNumber));var i=this.W.getVisitor();return i&&(t.sn="".concat(i.visitsCount),t.uu="".concat(i.id)),t},t}(),Ah=function(){function t(t,n){this.Mh=t,this.k=n}return t.prototype.init=function(){var t=this;this.Mh.register(["debugEvents"],(function(n){"boolean"==typeof n&&t.k.updateDynamicFields("emitDebugEvents",n)}))},t}();function Sh(t,n,i){if(!Ct(n)&&!Ct(i))return t.href;var r=Ct(n)?function(t){return tt(t,"/")?t:"/".concat(t)}(n):t.pathname,e=Ct(i)?function(t){return tt(t,"?")||""===t?t:"?".concat(t)}(i):t.search;return"".concat(t.protocol,"//").concat(t.host).concat(r).concat(e)}var Eh,bh=function(){function t(t,n){this.De=t,this.Hh=n}return t.prototype.overridePath=function(t){Ct(t)&&It(t)&&(this.Yd=""===t?void 0:t)},t.prototype.overrideQuery=function(t){Ct(t)&&It(t)&&(this.Jd=t)},t.prototype.computeOverriddenUrl=function(t){return this.$d(t)?this.getAnonymizedUrl():t},t.prototype.$d=function(t){var n=this.Kd(this.De.href);return this.Kd(t)===n},t.prototype.Kd=function(t){return n=t,i="/",-1!==csString.prototype.indexOf.call(n,i,n.length-i.length)?csString.prototype.slice.call(t,0,-1):t;var n,i},t.prototype.getAnonymizedUrl=function(){var t=Sh(this.De,this.Yd,this.Jd);return this.Hh.anonymizeUrl(t,[])},t.prototype.getUrlProtocol=function(){return this.De.protocol},t.prototype.getRequestParameters=function(){return{url:this.getAnonymizedUrl()}},t}(),Rh=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return W(n,t),n.prototype.emitPageEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onPageEvent&&r.onPageEvent(t)}},n.prototype.emitEventTriggerRecording=function(t,n){for(var i=0,r=this.listeners;i<r.length;i++){var e=r[i];e.onEventTriggerRecording&&e.onEventTriggerRecording(t,n)}},n.prototype.emitCustomJavaScriptErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomJavaScriptErrorEvent&&r.onCustomJavaScriptErrorEvent(t)}},n.prototype.emitCustomErrorEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onCustomErrorEvent&&r.onCustomErrorEvent(t)}},n.prototype.emitUserIdentifierEvent=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onUserIdentifierEvent&&r.onUserIdentifierEvent(t)}},n}(Bo),Nh=function(){function t(t,n,i,r,e){this.configuration=t,this.Xd=n,this.Wn=i,this.Ll=r,this.X=e,this.Zd=[]}return t.prototype.init=function(){this.Qd()},t.prototype.sanitizeSessionRecordingState=function(t){return t.recordingState===ri.TEMPORARILY_RECORDED&&(t.recordingState=ri.NOT_RECORDED),t},t.prototype.computeInitialRecordingState=function(t){return _e.isReplayConsentNeeded(this.configuration)?ri.BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Ad(t)},t.prototype.computeInitialRecordingStateFromRecordingConsentGranted=function(t){return this.Ad(t)},t.prototype.Ad=function(t){return we.isRecordingSupported()?(this.Zd=[],it.percentage()<this.configuration.replayRecordingRate||this.Ll.isForceReplayRecorded()?csArray.prototype.push.call(this.Zd,ri.GLOBAL_SAMPLING):this.configuration.malkaUrlEnabled&&csArray.prototype.push.call(this.Zd,ri.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.Zd,ri.ETR_SAMPLING),this.Zd.length>0?(this.tw(t),ri.TEMPORARILY_RECORDED):ri.NOT_RECORDED):ri.NOT_RECORDED},t.prototype.updateRecordingState=function(t){return we.isRecordingSupported()?_e.isRecordingBlockedByConsent(t)?t.recordingState===ri.BLOCKED_BY_CONSENT_WITHDRAWN?ri.BLOCKED_BY_CONSENT_WITHDRAWN:ri.BLOCKED_BY_CONSENT_NOT_EXPRESSED:t.recordingState===ri.GLOBAL_SAMPLING?ri.GLOBAL_SAMPLING:(this.Zd=[],this.configuration.malkaUrlEnabled&&(csArray.prototype.push.call(this.Zd,ri.URL_SAMPLING),this.configuration.malkaEtrEnabled&&csArray.prototype.push.call(this.Zd,ri.ETR_SAMPLING)),this.Zd.length>0?(this.tw(t),ri.TEMPORARILY_RECORDED):ri.NOT_RECORDED):ri.NOT_RECORDED},t.prototype.tw=function(t){var n,i=null===(n=this.W)||void 0===n?void 0:n.getVisitor();this.Xd.send({recordingTypes:csArray.prototype.map.call(this.Zd,Number),url:this.X.getAnonymizedUrl(),projectId:this.configuration.projectId,uu:(null==i?void 0:i.id)||"",sn:(null==i?void 0:i.visitsCount)||"",pn:(null==t?void 0:t.pageNumber)||""})},t.prototype.abortQuotaServiceRequest=function(){this.Xd.abort()},t.prototype.isReplayRecorded=function(t){return!_e.isRecordingBlockedByConsent(t)&&(t.recordingState===ri.TEMPORARILY_RECORDED||t.recordingState===ri.GLOBAL_SAMPLING||t.recordingState===ri.URL_SAMPLING||t.etrState===ei.ETR_ON)},t.prototype.Qd=function(){var t=this;this.Xd.onError((function(){return t.quotaServiceErrorHandler("NetworkError")})),this.Xd.onTimeout((function(){return t.quotaServiceTimeoutHandler()}),3e3),this.Xd.onLoad((function(n){return t.quotaServiceLoadHandler(n)}))},t.prototype.quotaServiceErrorHandler=function(t){this.nw("error - ".concat(t))},t.prototype.quotaServiceTimeoutHandler=function(){this.nw("timeout")},t.prototype.nw=function(t){var n=ri.NOT_RECORDED;this.iw(this.Zd)?(n=ri.GLOBAL_SAMPLING,sn.warn("Quota Service: request ".concat(t," - bypassed by GLOBAL_SAMPLING"))):sn.warn("Quota Service: request ".concat(t)),this.Wn.emitRecordingStateChange(n,ei.ETR_OFF)},t.prototype.quotaServiceLoadHandler=function(t){if(200===t.status){var n;try{n=csJSON.parse(t.responseText)}catch(n){return void this.quotaServiceErrorHandler("Unable to parse the quota service response: ".concat(t.responseText))}var i=null==n.allowedRecordingTypes?void 0:csArray.prototype.map.call(n.allowedRecordingTypes,csString);if(i){var r=ei.ETR_OFF,e=ri.NOT_RECORDED;this.iw(i)?e=ri.GLOBAL_SAMPLING:this.rw(i)&&(e=ri.URL_SAMPLING),this.ew(i)&&(r=ei.ETR_ON),this.Wn.emitRecordingStateChange(e,r)}else this.quotaServiceErrorHandler("recording types missing from quota service response")}else this.quotaServiceErrorHandler("Status code: ".concat(t.status))},t.prototype.iw=function(t){return csArray.prototype.some.call(t,(function(t){return t===ri.GLOBAL_SAMPLING}))},t.prototype.rw=function(t){return csArray.prototype.some.call(t,(function(t){return t===ri.URL_SAMPLING}))},t.prototype.ew=function(t){return csArray.prototype.some.call(t,(function(t){return t===ri.ETR_SAMPLING}))},t.prototype.setVisitorService=function(t){this.W=t},t.prototype.getDisabledRecordingState=function(){return ri.NOT_RECORDED},t.prototype.getConsentWithdrawnRecordingState=function(){return ri.BLOCKED_BY_CONSENT_WITHDRAWN},J([fn("Quota Service: onerror")],t.prototype,"quotaServiceErrorHandler",null),J([fn("Quota Service: ontimeout")],t.prototype,"quotaServiceTimeoutHandler",null),J([fn("Quota Service: onload")],t.prototype,"quotaServiceLoadHandler",null),t}(),Th="|iframe|",Oh=function(t){function n(n,i,r,e){var s=t.call(this)||this;return s.uw=n,s.ow=i,s.hw=r,s.cw=e,s}return W(n,t),n.prototype.emitIframeEvent=function(t,n,i){if(this.aw(n)&&null===t)sn.error("iframeEventEmitter received event ".concat(n," with null iframe, content:").concat(csJSON.stringify(i)));else switch(n){case Zt.ChildLogMessage:this.fw(i);break;case Zt.AnalysisEvent:var r=this.uw.transformEvent(t,i);this.lw(r);break;case Zt.RecordingEvent:var e=i,s=this.cw.transformEvents(t,e);if(0===s.events.length)return;s.containsUserEvent?this.yw(s.events):this.pw(s.events);break;case Zt.JavascriptError:this.mw(i);break;case Zt.ApiError:this.gw(i);break;case Zt.DetailedApiError:this.Aw(i);break;case Zt.CustomError:this.Sw(i);break;case Zt.EmerchandisingMessage:var u=this.hw.transformEvent(t,i);this.Ew(u);break;case Zt.Commands:var o=this.ow.transformEvent(t,i);this.bw(o);break;case Zt.IntegrationCallback:this.Rw(i);break;case Zt.StaticResource:this.Nw(i);break;case Zt.TrackingContextRequestMessage:this.Tw(i);break;default:sn.error("Parent received unknown data type from iframe : ".concat(csJSON.stringify(i)))}},n.prototype.aw=function(t){var n=[Zt.AnalysisEvent,Zt.RecordingEvent,Zt.EmerchandisingMessage,Zt.Commands];return-1!==csArray.prototype.indexOf.call(n,t)},n.prototype.fw=function(t){var n=t.message,i=t.errorCode;switch(t.level){case et.debug:sn.debug(n,i);break;case et.warn:sn.warn(n,i);break;case et.error:sn.error(n,i);break;case et.critical:sn.critical(n,i)}},n.prototype.lw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeAnalysisEvent&&r.onIframeAnalysisEvent(t)}},n.prototype.yw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingUserEvent&&r.onIframeRecordingUserEvent(t)}},n.prototype.pw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeRecordingBrowserEvent&&r.onIframeRecordingBrowserEvent(t)}},n.prototype.mw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeJavascriptError&&r.onIframeJavascriptError(t)}},n.prototype.gw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeApiError&&r.onIframeApiError(t)}},n.prototype.Aw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeDetailedApiError&&r.onIframeDetailedApiError(t)}},n.prototype.Ew=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeEmerchandisingMessage&&r.onIframeEmerchandisingMessage(t)}},n.prototype.bw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCommands&&r.onIframeCommands(t)}},n.prototype.Rw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeIntegrationCallback&&r.onIframeIntegrationCallback(t)}},n.prototype.Nw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeStaticResource&&r.onIframeStaticResource(t)}},n.prototype.Tw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onTrackingContextRequestCallback&&r.onTrackingContextRequestCallback(t)}},n.prototype.Sw=function(t){for(var n=0,i=this.listeners;n<i.length;n++){var r=i[n];r.onIframeCustomError&&r.onIframeCustomError(t)}},n}(Bo);!function(t){t.COMPRESSION_DISABLED="compressionDisabled"}(Eh||(Eh={}));var Ih=function(){function t(){}return t.init=function(t){var n;void 0===t&&(t=document.cookie);var i=null===(n=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))||void 0===n?void 0:n[1];if(this.Ow=new Map,i)for(var r=csString.prototype.split.call(i,"."),e=0;e<r.length;e++){var s=csString.prototype.split.call(r[e],"="),u=s[0],o=s[1];this.Ow.set(u,o||"true")}},t.getBoolean=function(t){var n=this.getString(t);return null!=n&&"false"!==n&&0!==parseInt(n)},t.getString=function(t){var n;return null===(n=this.Ow)||void 0===n?void 0:n.get(t)},t.isCompressionEnabled=function(){return!this.getBoolean(Eh.COMPRESSION_DISABLED)},t.Log=function(n){return function(i,r,e){var s,u=r.toString(),o="".concat(null===(s=i.constructor)||void 0===s?void 0:s.name,".").concat(u),h=e.value;(function(t,n){var i;if(null==t)return!1;return t===n||!!(null===(i=csString.prototype.match.call(t,new RegExp("(^|,)("+n+")(,|$)")))||void 0===i?void 0:i.length)})(t.getString("debugLog"),n)&&(e.value=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return console.log.apply(console,X([o],t,!1)),h.bind(this).apply(void 0,t)})}},t}();function kh(){function t(t){for(var n=t.length;--n>=0;)t[n]=0}var n=256,i=286,r=30,e=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Array(576);t(c);var a=new Array(60);t(a);var f=new Array(512);t(f);var v=new Array(256);t(v);var l=new Array(29);t(l);var d,w,y,p=new Array(r);function m(t,n,i,r,e){this.static_tree=t,this.extra_bits=n,this.extra_base=i,this.elems=r,this.max_length=e,this.has_stree=t&&t.length}function g(t,n){this.dyn_tree=t,this.max_code=0,this.stat_desc=n}t(p);var A=function(t){return t<256?f[t]:f[256+(t>>>7)]},S=function(t,n){t.pending_buf[t.pending++]=255&n,t.pending_buf[t.pending++]=n>>>8&255},E=function(t,n,i){t.bi_valid>16-i?(t.bi_buf|=n<<t.bi_valid&65535,S(t,t.bi_buf),t.bi_buf=n>>16-t.bi_valid,t.bi_valid+=i-16):(t.bi_buf|=n<<t.bi_valid&65535,t.bi_valid+=i)},b=function(t,n,i){E(t,i[2*n],i[2*n+1])},R=function(t,n){var i=0;do{i|=1&t,t>>>=1,i<<=1}while(--n>0);return i>>>1},N=function(t,n,i){var r,s,u=new Array(16),o=0;for(r=1;r<=e;r++)u[r]=o=o+i[r-1]<<1;for(s=0;s<=n;s++){var h=t[2*s+1];0!==h&&(t[2*s]=R(u[h]++,h))}},T=function(t){var n;for(n=0;n<i;n++)t.dyn_ltree[2*n]=0;for(n=0;n<r;n++)t.dyn_dtree[2*n]=0;for(n=0;n<19;n++)t.bl_tree[2*n]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0},O=function(t){t.bi_valid>8?S(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},I=function(t,n,i,r){var e=2*n,s=2*i;return t[e]<t[s]||t[e]===t[s]&&r[n]<=r[i]},k=function(t,n,i){for(var r=t.heap[i],e=i<<1;e<=t.heap_len&&(e<t.heap_len&&I(n,t.heap[e+1],t.heap[e],t.depth)&&e++,!I(n,r,t.heap[e],t.depth));)t.heap[i]=t.heap[e],i=e,e<<=1;t.heap[i]=r},C=function(t,i,r){var e,o,h,c,a=0;if(0!==t.last_lit)do{e=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],o=t.pending_buf[t.l_buf+a],a++,0===e?b(t,o,i):(h=v[o],b(t,h+n+1,i),0!==(c=s[h])&&(o-=l[h],E(t,o,c)),e--,h=A(e),b(t,h,r),0!==(c=u[h])&&(e-=p[h],E(t,e,c)))}while(a<t.last_lit);b(t,256,i)},_=function(t,n){var i,r,s,u=n.dyn_tree,o=n.stat_desc.static_tree,h=n.stat_desc.has_stree,c=n.stat_desc.elems,a=-1;for(t.heap_len=0,t.heap_max=573,i=0;i<c;i++)0!==u[2*i]?(t.heap[++t.heap_len]=a=i,t.depth[i]=0):u[2*i+1]=0;for(;t.heap_len<2;)u[2*(s=t.heap[++t.heap_len]=a<2?++a:0)]=1,t.depth[s]=0,t.opt_len--,h&&(t.static_len-=o[2*s+1]);for(n.max_code=a,i=t.heap_len>>1;i>=1;i--)k(t,u,i);s=c;do{i=t.heap[1],t.heap[1]=t.heap[t.heap_len--],k(t,u,1),r=t.heap[1],t.heap[--t.heap_max]=i,t.heap[--t.heap_max]=r,u[2*s]=u[2*i]+u[2*r],t.depth[s]=(t.depth[i]>=t.depth[r]?t.depth[i]:t.depth[r])+1,u[2*i+1]=u[2*r+1]=s,t.heap[1]=s++,k(t,u,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,n){var i,r,s,u,o,h,c=n.dyn_tree,a=n.max_code,f=n.stat_desc.static_tree,v=n.stat_desc.has_stree,l=n.stat_desc.extra_bits,d=n.stat_desc.extra_base,w=n.stat_desc.max_length,y=0;for(u=0;u<=e;u++)t.bl_count[u]=0;for(c[2*t.heap[t.heap_max]+1]=0,i=t.heap_max+1;i<573;i++)(u=c[2*c[2*(r=t.heap[i])+1]+1]+1)>w&&(u=w,y++),c[2*r+1]=u,r>a||(t.bl_count[u]++,o=0,r>=d&&(o=l[r-d]),h=c[2*r],t.opt_len+=h*(u+o),v&&(t.static_len+=h*(f[2*r+1]+o)));if(0!==y){do{for(u=w-1;0===t.bl_count[u];)u--;t.bl_count[u]--,t.bl_count[u+1]+=2,t.bl_count[w]--,y-=2}while(y>0);for(u=w;0!==u;u--)for(r=t.bl_count[u];0!==r;)(s=t.heap[--i])>a||(c[2*s+1]!==u&&(t.opt_len+=(u-c[2*s+1])*c[2*s],c[2*s+1]=u),r--)}}(t,n),N(u,a,t.bl_count)},P=function(t,n,i){var r,e,s=-1,u=n[1],o=0,h=7,c=4;for(0===u&&(h=138,c=3),n[2*(i+1)+1]=65535,r=0;r<=i;r++)e=u,u=n[2*(r+1)+1],++o<h&&e===u||(o<c?t.bl_tree[2*e]+=o:0!==e?(e!==s&&t.bl_tree[2*e]++,t.bl_tree[32]++):o<=10?t.bl_tree[34]++:t.bl_tree[36]++,o=0,s=e,0===u?(h=138,c=3):e===u?(h=6,c=3):(h=7,c=4))},x=function(t,n,i){var r,e,s=-1,u=n[1],o=0,h=7,c=4;for(0===u&&(h=138,c=3),r=0;r<=i;r++)if(e=u,u=n[2*(r+1)+1],!(++o<h&&e===u)){if(o<c)do{b(t,e,t.bl_tree)}while(0!=--o);else 0!==e?(e!==s&&(b(t,e,t.bl_tree),o--),b(t,16,t.bl_tree),E(t,o-3,2)):o<=10?(b(t,17,t.bl_tree),E(t,o-3,3)):(b(t,18,t.bl_tree),E(t,o-11,7));o=0,s=e,0===u?(h=138,c=3):e===u?(h=6,c=3):(h=7,c=4)}},L=!1,M=function(t,n,i,r){E(t,0+(r?1:0),3),function(t,n,i,r){O(t),r&&(S(t,i),S(t,~i)),t.pending_buf.set(t.window.subarray(n,n+i),t.pending),t.pending+=i}(t,n,i,!0)},D=function(t){L||(!function(){var t,n,h,g,A,S=new Array(16);for(h=0,g=0;g<28;g++)for(l[g]=h,t=0;t<1<<s[g];t++)v[h++]=g;for(v[h-1]=g,A=0,g=0;g<16;g++)for(p[g]=A,t=0;t<1<<u[g];t++)f[A++]=g;for(A>>=7;g<r;g++)for(p[g]=A<<7,t=0;t<1<<u[g]-7;t++)f[256+A++]=g;for(n=0;n<=e;n++)S[n]=0;for(t=0;t<=143;)c[2*t+1]=8,t++,S[8]++;for(;t<=255;)c[2*t+1]=9,t++,S[9]++;for(;t<=279;)c[2*t+1]=7,t++,S[7]++;for(;t<=287;)c[2*t+1]=8,t++,S[8]++;for(N(c,287,S),t=0;t<r;t++)a[2*t+1]=5,a[2*t]=R(t,5);d=new m(c,s,257,i,e),w=new m(a,u,0,r,e),y=new m(new Array(0),o,0,19,7)}(),L=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,w),t.bl_desc=new g(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,T(t)},U=function(t,i,r,e){var s,u,o=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=function(t){var i,r=4093624447;for(i=0;i<=31;i++,r>>>=1)if(1&r&&0!==t.dyn_ltree[2*i])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(i=32;i<n;i++)if(0!==t.dyn_ltree[2*i])return 1;return 0}(t)),_(t,t.l_desc),_(t,t.d_desc),o=function(t){var n;for(P(t,t.dyn_ltree,t.l_desc.max_code),P(t,t.dyn_dtree,t.d_desc.max_code),_(t,t.bl_desc),n=18;n>=3&&0===t.bl_tree[2*h[n]+1];n--);return t.opt_len+=3*(n+1)+5+5+4,n}(t),s=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=s&&(s=u)):s=u=r+5,r+4<=s&&-1!==i?M(t,i,r,e):4===t.strategy||u===s?(E(t,2+(e?1:0),3),C(t,c,a)):(E(t,4+(e?1:0),3),function(t,n,i,r){var e;for(E(t,n-257,5),E(t,i-1,5),E(t,r-4,4),e=0;e<r;e++)E(t,t.bl_tree[2*h[e]+1],3);x(t,t.dyn_ltree,n-1),x(t,t.dyn_dtree,i-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,o+1),C(t,t.dyn_ltree,t.dyn_dtree)),T(t),e&&O(t)},j=function(t,i,r){return t.pending_buf[t.d_buf+2*t.last_lit]=i>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&i,t.pending_buf[t.l_buf+t.last_lit]=255&r,t.last_lit++,0===i?t.dyn_ltree[2*r]++:(t.matches++,i--,t.dyn_ltree[2*(v[r]+n+1)]++,t.dyn_dtree[2*A(i)]++),t.last_lit===t.lit_bufsize-1},z=function(t){E(t,2,3),b(t,256,c),function(t){16===t.bi_valid?(S(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)},H={_tr_init:D,_tr_stored_block:M,_tr_flush_block:U,_tr_tally:j,_tr_align:z},B=function(t,n,i,r){for(var e=65535&t|0,s=t>>>16&65535|0,u=0;0!==i;){i-=u=i>2e3?2e3:i;do{s=s+(e=e+n[r++]|0)|0}while(--u);e%=65521,s%=65521}return e|s<<16|0},q=new Uint32Array(function(){for(var t,n=[],i=0;i<256;i++){t=i;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;n[i]=t}return n}()),F=function(t,n,i,r){var e=q,s=r+i;t^=-1;for(var u=r;u<s;u++)t=t>>>8^e[255&(t^n[u])];return-1^t},G={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},V=0,W=2,Y=3,J=4,$=0,K=1,X=-1,Z=0,Q=8,tt=H._tr_init,nt=H._tr_stored_block,it=H._tr_flush_block,rt=H._tr_tally,et=H._tr_align,st=V,ut=1,ot=Y,ht=J,ct=5,at=$,ft=K,vt=-2,lt=-3,dt=-5,wt=X,yt=1,pt=2,mt=3,gt=4,At=Z,St=2,Et=Q,bt=258,Rt=262,Nt=103,Tt=113,Ot=666,It=function(t,n){return t.msg=G[n],n},kt=function(t){return(t<<1)-(t>4?9:0)},Ct=function(t){for(var n=t.length;--n>=0;)t[n]=0},_t=function(t,n,i){return(n<<t.hash_shift^i)&t.hash_mask},Pt=function(t){var n=t.state,i=n.pending;i>t.avail_out&&(i=t.avail_out),0!==i&&(t.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+i),t.next_out),t.next_out+=i,n.pending_out+=i,t.total_out+=i,t.avail_out-=i,n.pending-=i,0===n.pending&&(n.pending_out=0))},xt=function(t,n){it(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,n),t.block_start=t.strstart,Pt(t.strm)},Lt=function(t,n){t.pending_buf[t.pending++]=n},Mt=function(t,n){t.pending_buf[t.pending++]=n>>>8&255,t.pending_buf[t.pending++]=255&n},Dt=function(t,n){var i,r,e=t.max_chain_length,s=t.strstart,u=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-Rt?t.strstart-(t.w_size-Rt):0,c=t.window,a=t.w_mask,f=t.prev,v=t.strstart+bt,l=c[s+u-1],d=c[s+u];t.prev_length>=t.good_match&&(e>>=2),o>t.lookahead&&(o=t.lookahead);do{if(c[(i=n)+u]===d&&c[i+u-1]===l&&c[i]===c[s]&&c[++i]===c[s+1]){s+=2,i++;do{}while(c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&c[++s]===c[++i]&&s<v);if(r=bt-(v-s),s=v-bt,r>u){if(t.match_start=n,u=r,r>=o)break;l=c[s+u-1],d=c[s+u]}}}while((n=f[n&a])>h&&0!=--e);return u<=t.lookahead?u:t.lookahead},Ut=function(t){var n,i,r,e,s,u,o,h,c,a,f=t.w_size;do{if(e=t.window_size-t.lookahead-t.strstart,t.strstart>=f+(f-Rt)){t.window.set(t.window.subarray(f,f+f),0),t.match_start-=f,t.strstart-=f,t.block_start-=f,n=i=t.hash_size;do{r=t.head[--n],t.head[n]=r>=f?r-f:0}while(--i);n=i=f;do{r=t.prev[--n],t.prev[n]=r>=f?r-f:0}while(--i);e+=f}if(0===t.strm.avail_in)break;if(u=t.strm,o=t.window,h=t.strstart+t.lookahead,c=e,a=void 0,(a=u.avail_in)>c&&(a=c),i=0===a?0:(u.avail_in-=a,o.set(u.input.subarray(u.next_in,u.next_in+a),h),1===u.state.wrap?u.adler=B(u.adler,o,a,h):2===u.state.wrap&&(u.adler=F(u.adler,o,a,h)),u.next_in+=a,u.total_in+=a,a),t.lookahead+=i,t.lookahead+t.insert>=3)for(s=t.strstart-t.insert,t.ins_h=t.window[s],t.ins_h=_t(t,t.ins_h,t.window[s+1]);t.insert&&(t.ins_h=_t(t,t.ins_h,t.window[s+3-1]),t.prev[s&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=s,s++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<Rt&&0!==t.strm.avail_in)},jt=function(t,n){for(var i,r;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===st)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==i&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Dt(t,i)),t.match_length>=3)if(r=rt(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=_t(t,t.ins_h,t.window[t.strstart+1]);else r=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(xt(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,n===ht?(xt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xt(t,!1),0===t.strm.avail_out)?1:2},zt=function(t,n){for(var i,r,e;;){if(t.lookahead<Rt){if(Ut(t),t.lookahead<Rt&&n===st)return 1;if(0===t.lookahead)break}if(i=0,t.lookahead>=3&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==i&&t.prev_length<t.max_lazy_match&&t.strstart-i<=t.w_size-Rt&&(t.match_length=Dt(t,i),t.match_length<=5&&(t.strategy===yt||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){e=t.strstart+t.lookahead-3,r=rt(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=e&&(t.ins_h=_t(t,t.ins_h,t.window[t.strstart+3-1]),i=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,r&&(xt(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if((r=rt(t,0,t.window[t.strstart-1]))&&xt(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=rt(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,n===ht?(xt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xt(t,!1),0===t.strm.avail_out)?1:2};function Ht(t,n,i,r,e){this.good_length=t,this.max_lazy=n,this.nice_length=i,this.max_chain=r,this.func=e}var Bt=[new Ht(0,0,0,0,(function(t,n){var i=65535;for(i>t.pending_buf_size-5&&(i=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ut(t),0===t.lookahead&&n===st)return 1;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+i;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,xt(t,!1),0===t.strm.avail_out))return 1;if(t.strstart-t.block_start>=t.w_size-Rt&&(xt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(xt(t,!0),0===t.strm.avail_out?3:4):(t.strstart>t.block_start&&(xt(t,!1),t.strm.avail_out),1)})),new Ht(4,4,8,4,jt),new Ht(4,5,16,8,jt),new Ht(4,6,32,32,jt),new Ht(4,4,16,16,zt),new Ht(8,16,32,32,zt),new Ht(8,16,128,128,zt),new Ht(8,32,128,256,zt),new Ht(32,128,258,1024,zt),new Ht(32,258,258,4096,zt)];function qt(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Et,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Ct(this.dyn_ltree),Ct(this.dyn_dtree),Ct(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Ct(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Ct(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var Ft=function(t){if(!t||!t.state)return It(t,vt);t.total_in=t.total_out=0,t.data_type=St;var n=t.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?42:Tt,t.adler=2===n.wrap?0:1,n.last_flush=st,tt(n),at},Gt=function(t){var n=Ft(t);return n===at&&function(t){t.window_size=2*t.w_size,Ct(t.head),t.max_lazy_match=Bt[t.level].max_lazy,t.good_match=Bt[t.level].good_length,t.nice_match=Bt[t.level].nice_length,t.max_chain_length=Bt[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0}(t.state),n},Vt=function(t,n,i,r,e,s){if(!t)return vt;var u=1;if(n===wt&&(n=6),r<0?(u=0,r=-r):r>15&&(u=2,r-=16),e<1||e>9||i!==Et||r<8||r>15||n<0||n>9||s<0||s>gt)return It(t,vt);8===r&&(r=9);var o=new qt;return t.state=o,o.strm=t,o.wrap=u,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=e+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<e+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=n,o.strategy=s,o.method=i,Gt(t)},Wt=function(t,n){var i,r;if(!t||!t.state||n>ct||n<0)return t?It(t,vt):vt;var e=t.state;if(!t.output||!t.input&&0!==t.avail_in||e.status===Ot&&n!==ht)return It(t,0===t.avail_out?dt:vt);e.strm=t;var s=e.last_flush;if(e.last_flush=n,42===e.status)if(2===e.wrap)t.adler=0,Lt(e,31),Lt(e,139),Lt(e,8),e.gzhead?(Lt(e,(e.gzhead.text?1:0)+(e.gzhead.hcrc?2:0)+(e.gzhead.extra?4:0)+(e.gzhead.name?8:0)+(e.gzhead.comment?16:0)),Lt(e,255&e.gzhead.time),Lt(e,e.gzhead.time>>8&255),Lt(e,e.gzhead.time>>16&255),Lt(e,e.gzhead.time>>24&255),Lt(e,9===e.level?2:e.strategy>=pt||e.level<2?4:0),Lt(e,255&e.gzhead.os),e.gzhead.extra&&e.gzhead.extra.length&&(Lt(e,255&e.gzhead.extra.length),Lt(e,e.gzhead.extra.length>>8&255)),e.gzhead.hcrc&&(t.adler=F(t.adler,e.pending_buf,e.pending,0)),e.gzindex=0,e.status=69):(Lt(e,0),Lt(e,0),Lt(e,0),Lt(e,0),Lt(e,0),Lt(e,9===e.level?2:e.strategy>=pt||e.level<2?4:0),Lt(e,3),e.status=Tt);else{var u=Et+(e.w_bits-8<<4)<<8;u|=(e.strategy>=pt||e.level<2?0:e.level<6?1:6===e.level?2:3)<<6,0!==e.strstart&&(u|=32),u+=31-u%31,e.status=Tt,Mt(e,u),0!==e.strstart&&(Mt(e,t.adler>>>16),Mt(e,65535&t.adler)),t.adler=1}if(69===e.status)if(e.gzhead.extra){for(i=e.pending;e.gzindex<(65535&e.gzhead.extra.length)&&(e.pending!==e.pending_buf_size||(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),Pt(t),i=e.pending,e.pending!==e.pending_buf_size));)Lt(e,255&e.gzhead.extra[e.gzindex]),e.gzindex++;e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),e.gzindex===e.gzhead.extra.length&&(e.gzindex=0,e.status=73)}else e.status=73;if(73===e.status)if(e.gzhead.name){i=e.pending;do{if(e.pending===e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),Pt(t),i=e.pending,e.pending===e.pending_buf_size)){r=1;break}r=e.gzindex<e.gzhead.name.length?255&e.gzhead.name.charCodeAt(e.gzindex++):0,Lt(e,r)}while(0!==r);e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),0===r&&(e.gzindex=0,e.status=91)}else e.status=91;if(91===e.status)if(e.gzhead.comment){i=e.pending;do{if(e.pending===e.pending_buf_size&&(e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),Pt(t),i=e.pending,e.pending===e.pending_buf_size)){r=1;break}r=e.gzindex<e.gzhead.comment.length?255&e.gzhead.comment.charCodeAt(e.gzindex++):0,Lt(e,r)}while(0!==r);e.gzhead.hcrc&&e.pending>i&&(t.adler=F(t.adler,e.pending_buf,e.pending-i,i)),0===r&&(e.status=Nt)}else e.status=Nt;if(e.status===Nt&&(e.gzhead.hcrc?(e.pending+2>e.pending_buf_size&&Pt(t),e.pending+2<=e.pending_buf_size&&(Lt(e,255&t.adler),Lt(e,t.adler>>8&255),t.adler=0,e.status=Tt)):e.status=Tt),0!==e.pending){if(Pt(t),0===t.avail_out)return e.last_flush=-1,at}else if(0===t.avail_in&&kt(n)<=kt(s)&&n!==ht)return It(t,dt);if(e.status===Ot&&0!==t.avail_in)return It(t,dt);if(0!==t.avail_in||0!==e.lookahead||n!==st&&e.status!==Ot){var o=e.strategy===pt?function(t,n){for(var i;;){if(0===t.lookahead&&(Ut(t),0===t.lookahead)){if(n===st)return 1;break}if(t.match_length=0,i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,i&&(xt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(xt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xt(t,!1),0===t.strm.avail_out)?1:2}(e,n):e.strategy===mt?function(t,n){for(var i,r,e,s,u=t.window;;){if(t.lookahead<=bt){if(Ut(t),t.lookahead<=bt&&n===st)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=u[e=t.strstart-1])===u[++e]&&r===u[++e]&&r===u[++e]){s=t.strstart+bt;do{}while(r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&r===u[++e]&&e<s);t.match_length=bt-(s-e),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(i=rt(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(i=rt(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),i&&(xt(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,n===ht?(xt(t,!0),0===t.strm.avail_out?3:4):t.last_lit&&(xt(t,!1),0===t.strm.avail_out)?1:2}(e,n):Bt[e.level].func(e,n);if(3!==o&&4!==o||(e.status=Ot),1===o||3===o)return 0===t.avail_out&&(e.last_flush=-1),at;if(2===o&&(n===ut?et(e):n!==ct&&(nt(e,0,0,!1),n===ot&&(Ct(e.head),0===e.lookahead&&(e.strstart=0,e.block_start=0,e.insert=0))),Pt(t),0===t.avail_out))return e.last_flush=-1,at}return n!==ht?at:e.wrap<=0?ft:(2===e.wrap?(Lt(e,255&t.adler),Lt(e,t.adler>>8&255),Lt(e,t.adler>>16&255),Lt(e,t.adler>>24&255),Lt(e,255&t.total_in),Lt(e,t.total_in>>8&255),Lt(e,t.total_in>>16&255),Lt(e,t.total_in>>24&255)):(Mt(e,t.adler>>>16),Mt(e,65535&t.adler)),Pt(t),e.wrap>0&&(e.wrap=-e.wrap),0!==e.pending?at:ft)},Yt=function(t,n){var i=n.length;if(!t||!t.state)return vt;var r=t.state,e=r.wrap;if(2===e||1===e&&42!==r.status||r.lookahead)return vt;if(1===e&&(t.adler=B(t.adler,n,i,0)),r.wrap=0,i>=r.w_size){0===e&&(Ct(r.head),r.strstart=0,r.block_start=0,r.insert=0);var s=new Uint8Array(r.w_size);s.set(n.subarray(i-r.w_size,i),0),n=s,i=r.w_size}var u=t.avail_in,o=t.next_in,h=t.input;for(t.avail_in=i,t.next_in=0,t.input=n,Ut(r);r.lookahead>=3;){var c=r.strstart,a=r.lookahead-2;do{r.ins_h=_t(r,r.ins_h,r.window[c+3-1]),r.prev[c&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=c,c++}while(--a);r.strstart=c,r.lookahead=2,Ut(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,t.next_in=o,t.input=h,t.avail_in=u,r.wrap=e,at},Jt={deflateInit:function(t,n){return Vt(t,n,Et,15,8,At)},deflateInit2:Vt,deflateReset:Gt,deflateResetKeep:Ft,deflateSetHeader:function(t,n){return t&&t.state?2!==t.state.wrap?vt:(t.state.gzhead=n,at):vt},deflate:Wt,deflateEnd:function(t){if(!t||!t.state)return vt;var n=t.state.status;return 42!==n&&69!==n&&73!==n&&91!==n&&n!==Nt&&n!==Tt&&n!==Ot?It(t,vt):(t.state=null,n===Tt?It(t,lt):at)},deflateSetDictionary:Yt,deflateInfo:"pako deflate (from Nodeca project)"},$t=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},Kt={assign:function(t){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(var r in i)$t(i,r)&&(t[r]=i[r])}}return t},flattenChunks:function(t){for(var n=0,i=0,r=t.length;i<r;i++)n+=t[i].length;var e=new Uint8Array(n),s=(i=0,0);for(r=t.length;i<r;i++){var u=t[i];e.set(u,s),s+=u.length}return e}},Xt=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){Xt=!1}for(var Zt=new Uint8Array(256),Qt=0;Qt<256;Qt++)Zt[Qt]=Qt>=252?6:Qt>=248?5:Qt>=240?4:Qt>=224?3:Qt>=192?2:1;Zt[254]=Zt[254]=1;var tn=function(t,n){if(void 0===n&&(n=t.length),n<65534&&t.subarray&&Xt)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));for(var i="",r=0;r<n;r++)i+=String.fromCharCode(t[r]);return i},nn={string2buf:function(t){if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);var n,i,r,e,s,u=t.length,o=0;for(e=0;e<u;e++)55296==(64512&(i=t.charCodeAt(e)))&&e+1<u&&56320==(64512&(r=t.charCodeAt(e+1)))&&(i=65536+(i-55296<<10)+(r-56320),e++),o+=i<128?1:i<2048?2:i<65536?3:4;for(n=new Uint8Array(o),s=0,e=0;s<o;e++)55296==(64512&(i=t.charCodeAt(e)))&&e+1<u&&56320==(64512&(r=t.charCodeAt(e+1)))&&(i=65536+(i-55296<<10)+(r-56320),e++),i<128?n[s++]=i:i<2048?(n[s++]=192|i>>>6,n[s++]=128|63&i):i<65536?(n[s++]=224|i>>>12,n[s++]=128|i>>>6&63,n[s++]=128|63&i):(n[s++]=240|i>>>18,n[s++]=128|i>>>12&63,n[s++]=128|i>>>6&63,n[s++]=128|63&i);return n},buf2string:function(t,n){var i,r,e=n||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,n));var s=new Array(2*e);for(r=0,i=0;i<e;){var u=t[i++];if(u<128)s[r++]=u;else{var o=Zt[u];if(o>4)s[r++]=65533,i+=o-1;else{for(u&=2===o?31:3===o?15:7;o>1&&i<e;)u=u<<6|63&t[i++],o--;o>1?s[r++]=65533:u<65536?s[r++]=u:(u-=65536,s[r++]=55296|u>>10&1023,s[r++]=56320|1023&u)}}}return tn(s,r)},utf8border:function(t,n){(n=n||t.length)>t.length&&(n=t.length);for(var i=n-1;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?n:i+Zt[t[i]]>n?i:n}};var rn=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0},en=Object.prototype.toString,sn=V,un=W,on=Y,hn=J,cn=$,an=K,fn=X,vn=Z,ln=Q;function dn(t){this.options=Kt.assign({level:fn,method:ln,chunkSize:16384,windowBits:15,memLevel:8,strategy:vn},t||{});var n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new rn,this.strm.avail_out=0;var i=Jt.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(i!==cn)throw new Error(G[i]);if(n.header&&Jt.deflateSetHeader(this.strm,n.header),n.dictionary){var r=void 0;if(r="string"==typeof n.dictionary?nn.string2buf(n.dictionary):"[object ArrayBuffer]"===en.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(i=Jt.deflateSetDictionary(this.strm,r))!==cn)throw new Error(G[i]);this._dict_set=!0}}function wn(t,n){return(n=n||{}).gzip=!0,function(t,n){var i=new dn(n=n||{});if(i.push(t,!0),i.err)throw i.msg||G[i.err];return i.result}(t,n)}return dn.prototype.push=function(t,n){var i,r,e=this.strm,s=this.options.chunkSize;if(this.ended)return!1;for(r=n===~~n?n:!0===n?hn:sn,"string"==typeof t?e.input=nn.string2buf(t):"[object ArrayBuffer]"===en.call(t)?e.input=new Uint8Array(t):e.input=t,e.next_in=0,e.avail_in=e.input.length;;)if(0===e.avail_out&&(e.output=new Uint8Array(s),e.next_out=0,e.avail_out=s),(r===un||r===on)&&e.avail_out<=6)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else{if((i=Jt.deflate(e,r))===an)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),i=Jt.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===cn;if(0!==e.avail_out){if(r>0&&e.next_out>0)this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;else if(0===e.avail_in)break}else this.onData(e.output)}return!0},dn.prototype.onData=function(t){this.chunks.push(t)},dn.prototype.onEnd=function(t){t===cn&&(this.result=Kt.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},function(t,n,i){var r=wn(t);return r="base64"===n?btoa(tn(r)):r.buffer,i&&i(r),r}}Ih.init();var Ch=function(t){function n(n){var i=t.call(this,n)||this;return i.algorithm=wn.GZIP,i.Iw=kh(),i.kw=function(t,n,r){r(i.Iw(t,n))},i.compress=_h(),"undefined"!=typeof CompressionStream&&$n||(i.compress=i.kw,i.getCompressorSourceCode=function(){return kh.toString()}),i}return W(n,t),n.prototype.compressSync=function(t,n){return this.Iw(t,n)},n.prototype.getCompressorSourceCode=function(){return _h.toString()},n}(bn);function _h(){return function(t,n,i){var r=new Response(t).body.pipeThrough(new CompressionStream("gzip")),e=new Response(r).arrayBuffer();"base64"!==n?e.then((function(t){return i(t)})):e.then((function(t){return n=t,new Promise((function(t){var i=new FileReader;i.onload=function(n){return t(n.target.result.split(",")[1])},i.readAsDataURL(new Blob([n]))}));var n})).then((function(t){return i(t)}))}}var Ph,xh,Lh=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.algorithm=wn.UNCOMPRESSED,n}return W(n,t),n.prototype.compress=function(t,n,i){i(this.compressSync(t,n))},n.prototype.compressSync=function(t,n){return t},n.prototype.getCompressorSourceCode=function(){return function(){return function(t,n,i){return i(t)}}.toString()},n}(bn),Mh=function(){function t(){}return t.create=function(t){return this.instance?this.instance:Ih.isCompressionEnabled()?this.instance=new Ch(t):new Lh(t)},t}(),Dh=function(){function t(){}return t.prototype.setItem=function(t,n){window.sessionStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.sessionStorage.getItem(t)},t.prototype.removeItem=function(t){window.sessionStorage.removeItem(t)},t}(),Uh=function(){function t(){}return t.prototype.setItem=function(t,n){window.localStorage.setItem(t,n)},t.prototype.getItem=function(t){return window.localStorage.getItem(t)},t.prototype.removeItem=function(t){window.localStorage.removeItem(t)},t}(),jh="_cs_cvars",zh=function(){function t(t,n,i){this.L=t,this.Vl=n,this.Wl=i}return t.prototype.onCookieToSet=function(t){this.Ql=t},t.prototype.onCookieToRemove=function(t){this.td=t},t.prototype.get=function(){return this.L.cookielessTrackingEnabled?this.Wl.getItem(jh):this.Vl.get(jh)},t.prototype.set=function(t){var n;this.L.cookielessTrackingEnabled?this.Wl.setItem(jh,t):(this.Vl.set(jh,t),null===(n=this.Ql)||void 0===n||n.call(this,jh,t))},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.Wl.removeItem(jh):(this.Vl.delete(jh),null===(t=this.td)||void 0===t||t.call(this,jh))},t.isValidCustomVarString=function(t){return"string"==typeof t},t}(),Hh=["visit",2],Bh=["page",3],qh=["nextPageOnly",4],Fh=function(){function t(t,n){this.M=t,this.Ul=n,this.Cw={},this._w={}}return t.prototype.set=function(t,n,i,r){var e,s;if(t>0&&_t(n)&&_t(i)&&!Pt(n)&&!Pt(i)){var u=this.M.anonymizePII(csString(n)),o=this.M.anonymizePII(csString(i));if(e=[u.slice(0,512),o.slice(0,255)],s=""!==i,!Ct(r)||csArray.prototype.indexOf.call(Hh,r)>=0){var h=this.getCustomVariablesSession();s?h[t]=e:delete h[t],this.setCustomVariableSession(h)}(!Ct(r)||csArray.prototype.indexOf.call(Bh,r)>=0)&&(s?this.Cw[t]=e:delete this.Cw[t]),Ct(r)&&csArray.prototype.indexOf.call(qh,r)>=0&&(s?this._w[t]=e:delete this._w[t])}},t.prototype.getCustomVariablesSession=function(){var t=this.Ul.get();if(!t)return{};var n=window.csJSON.parse(t);return null!==n&&kt(n)?n:{}},t.prototype.setCustomVariableSession=function(t){this.Ul.set(window.csJSON.stringify(t))},t.prototype.removeCustomVariablesSession=function(){this.Ul.remove()},t.prototype.removeCustomVariablesPage=function(){this.Cw={}},t.prototype.getRequestParameters=function(){var t=this.getCustomVariablesSession();for(var n in this._w)this._w.hasOwnProperty(n)&&(this.Cw[n]=this._w[n]);for(var n in this.Cw)this.Cw.hasOwnProperty(n)&&(t[n]=this.Cw[n]);if(window.csJSON.stringify(t).length<=2)return{};var i={cvars:this.Pw(t)};return this.Cw&&window.csJSON.stringify(this.Cw).length>2&&(i.cvarp=this.Pw(this.Cw)),i},t.prototype.deleteNextPageOnlyCustomVariables=function(){if(Object.keys(this._w).length>0)for(var t in this._w)this._w[t]===this.Cw[t]&&(delete this.Cw[t],delete this._w[t])},t.prototype.Pw=function(t){for(var n in t)if(t.hasOwnProperty(n)){var i=parseInt(n,10),r=t[n],e=r[0],s=r[1];o=1,h=20,(!(Ot(u=i)&&u>=o&&u<=h)||e.length>512||s.length>255)&&delete t[n]}var u,o,h,c=function(t){var n;for(n in t)return!1;return!0}(t)?[]:t;return window.csJSON.stringify(c)},t}(),Gh=["setCustomVariable"],Vh=function(){function t(t,n){this.Mh=t,this.rn=n}return t.prototype.init=function(){var t=this;this.Mh.register(Gh,(function(n,i,r,e){t.rn.set(n,i,r,e)}))},t.prototype.onAfterArtificialPageView=function(){this.rn.deleteNextPageOnlyCustomVariables()},t.prototype.onAfterNaturalPageView=function(){this.rn.deleteNextPageOnlyCustomVariables()},t.prototype.onOptout=function(){this.rn.removeCustomVariablesSession()},t.prototype.onBeforeVisitorRenewal=function(){this.rn.removeCustomVariablesSession(),this.rn.removeCustomVariablesPage()},t}(),Wh="_cs_id",Yh=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.(None|Lax|X)\.(0|1))?(\.[0-1])?$/,Jh=function(){function t(t,n,i){this.L=t,this.Vl=n,this.Wl=i}return t.prototype.onCookieToSet=function(t){this.Ql=t},t.prototype.onCookieToRemove=function(t){this.td=t},t.prototype.get=function(){var n;return(n=this.L.cookielessTrackingEnabled?this.Wl.getItem(Wh):this.Vl.get(Wh))?t.fromString(n):null},t.prototype.set=function(n){var i,r=t.toString(n);if(this.L.cookielessTrackingEnabled)this.Wl.setItem(Wh,r);else{var e=new csDate(n.expires);this.Vl.set(Wh,r,e),null===(i=this.Ql)||void 0===i||i.call(this,Wh,r,e)}},t.prototype.remove=function(){var t;this.L.cookielessTrackingEnabled?this.Wl.removeItem(Wh):(this.Vl.delete(Wh),null===(t=this.td)||void 0===t||t.call(this,Wh))},t.prototype.handleSubdomainChange=function(){if(!this.L.cookielessTrackingEnabled){var t=this.get();t&&(t.allowSubdomains=this.L.allowSubdomains,this.L.allowSubdomains?this.Vl.delete(Wh,vn.CURRENT_DOMAIN):this.Vl.delete(Wh,this.Vl.getRootDomain()),this.set(t))}},t.fromString=function(t){var n=csString.prototype.split.call(t,"."),i=n[0],r=n[1],e=n[2],s=n[3],u=n[4],o=n[5],h=n[6],c=n[7];return{id:i,creationTimestamp:Number(r),visitsCount:Number(e),hitTimestamp:Number(s),lastVisitTimestamp:Number(u),appliedTrackingDraw:Number(o),expires:Number(h),allowSubdomains:void 0===c?void 0:!!Number(c)}},t.toString=function(t){return csArray.prototype.join.call([t.id,t.creationTimestamp,t.visitsCount,t.hitTimestamp,t.lastVisitTimestamp,t.appliedTrackingDraw,t.expires,t.allowSubdomains?1:0],".")},t.isValidVisitorString=function(t){return Yh.test(t)},t}(),$h=function(){function t(t){this.M=t}return t.prototype.getUrlMaskingPattern=function(n){for(var i=[],r=0,e=csString.prototype.split.call(n,"/");r<e.length;r++){var s=e[r];tt(s,t.xw)?csArray.prototype.push.call(i,{key:s,value:"CS_ANONYMIZED_".concat(csString.prototype.toUpperCase.call(csString.prototype.slice.call(s,1)))}):csArray.prototype.push.call(i,{key:s,value:null})}return i},t.prototype.anonymizeUrl=function(t,n){var i=this.M.anonymizePII(t);return i=this.M.anonymizeJwt(i),n.length>0?this.Lw(i,n):i},t.prototype.removeQueryString=function(t){var n=this.Mw(t),i=n.path;return""!==n.queryString?"".concat(i,"?"):i},t.prototype.Mw=function(t){var n=csString.prototype.indexOf.call(t,"?"),i="",r="";return-1!==n?(i=csString.prototype.slice.call(t,0,n),r=csString.prototype.slice.call(t,n,t.length)):i=t,{path:i,queryString:r}},t.prototype.Lw=function(t,n){for(var i=this.Mw(t),r=i.path,e=i.queryString,s=csString.prototype.split.call(r,"/"),u=0,o=n;u<o.length;u++){var h=o[u],c=this.Dw(s,h);if(null!==c)return"".concat(c).concat(e)}return t},t.prototype.Dw=function(n,i){if(n.length<i.length)return null;for(var r="",e=0;e<n.length;e+=1)if(e>=i.length)r+="".concat(n[e],"/");else if(tt(i[e].key,t.xw))r+="".concat(i[e].value,"/");else{if(n[e]!==i[e].key)return null;r+="".concat(n[e],"/")}return csString.prototype.slice.call(r,0,-1)},t.xw=":",t}(),Kh=function(){function t(t,n){this.Mc=t,this.L=n}return t.prototype.getEventTargetPath=function(t){var n=Wn(t);return this.Mc.getElementPath(n,Y({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules))},t.prototype.getEventTargetPathAndTargetLink=function(t){var n=Wn(t),i=this.Mc.getElementPathAndFirstAnchorParent(n,Y({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules)),r=i.path,e=i.firstAnchorParent;return{path:r,targetLink:this.Uw(e)?e.href:""}},t.prototype.hasValidEventTarget=function(t){var n=Wn(t);return this.Mc.isValidElement(n)},t.prototype.getElementPath=function(t){return this.Mc.getElementPath(t,Y({dynamicIdRegex:this.L.dynamicIdRegex},this.L.pathComputationRules))},t.prototype.Uw=function(t){var n;return null!==t&&t.hasAttribute("href")&&!tt(null!==(n=t.getAttribute("href"))&&void 0!==n?n:"","#")},t}(),Xh=function(){function t(t){this.Ra=t}return t.prototype.transformEvent=function(t,n){var i=this.jw(t,n),r=this.Ra.getElementPath(t);return this.zw(r,i)},t.prototype.jw=function(t,n){if(function(t){return void 0!==t.x&&void 0!==t.y}(n)){var i=t.getBoundingClientRect();n.x=Math.round(i.left+n.x+Ci.windowOffsetX()),n.y=Math.round(i.top+n.y+Ci.windowOffsetY())}return n},t.prototype.zw=function(t,n){return ys(n)&&(n.tgt="".concat(t).concat(Th).concat(n.tgt)),function(t){return void 0!==t.tgtHM}(n)&&(n.tgtHM="".concat(t).concat(Th).concat(n.tgtHM)),function(t){return void 0!==t.tgtLk}(n)&&(n.tgtLk="".concat(t).concat(Th).concat(n.tgtLk)),n},t}(),Zh=function(){function t(t){this.Ra=t}return t.prototype.transformEvent=function(t,n){var i=this.Ra.getElementPath(t);return{iframePath:n.iframePath?"".concat(i).concat(Th).concat(n.iframePath):i,commands:n.commands}},t}(),Qh=function(){function t(t){this.Ra=t}return t.prototype.transformEvent=function(t,n){if(0===n.products.length)return n;var i=this.Ra.getElementPath(t),r=csArray.prototype.map.call(n.products,(function(t){return Y(Y({},t),{targetPath:"".concat(i).concat(Th).concat(t.targetPath)})}));return Y(Y({},n),{products:r})},t}(),tc=function(){function t(t){this.hn=t,this.Hw={clientX:2,clientY:3},this.Bw={clientX:1,clientY:2},this.qw=[gn.POINTER_DOWN,gn.POINTER_MOVE,gn.POINTER_UP],this.Fw=[gn.TOUCH_START,gn.TOUCH_MOVE,gn.TOUCH_END]}return t.prototype.transformEvents=function(t,n){var i=this;if(!Di.isConnected(t))return n.events=csArray.prototype.filter.call(n.events,(function(t){return t.type!==gn.VISIBILITY_CHANGE})),0===n.events.length||(sn.warn("IframeRecordingEventsTransformer received event ".concat(Zt.RecordingEvent,"\n        from disconnected iframe, content:").concat(csJSON.stringify(n.events))),n.events=[]),n;var r=this.hn.getId(t);if(void 0===r)return sn.error("IframeRecordingEventsTransformer received event ".concat(Zt.RecordingEvent,"\n        from unidentified iframe, content:").concat(csJSON.stringify(n.events))),n.events=[],n;var e=null;csArray.prototype.some.call(n.events,(function(t){return i.Gw(t)||i.Vw(t)}))&&(e=t.getBoundingClientRect());for(var s=0,u=n.events;s<u.length;s++){var o=u[s];this.Gw(o)?this.Ww(e,o):this.Vw(o)&&this.Yw(e,o),o.context=o.context&&o.context.length>0?"".concat(r,"/").concat(o.context):"".concat(r)}return n},t.prototype.Yw=function(t,n){this.Jw(this.Bw,t,n)},t.prototype.Ww=function(t,n){this.Jw(this.Hw,t,n)},t.prototype.Jw=function(t,n,i){i.args&&(i.args[t.clientX]=Math.round(n.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(n.top+i.args[t.clientY]))},t.prototype.Gw=function(t){return-1!==csArray.prototype.indexOf.call(this.qw,t.type)},t.prototype.Vw=function(t){return-1!==csArray.prototype.indexOf.call(this.Fw,t.type)},t}(),nc=function(){function t(t){this.$w=t}return t.prototype.start=function(){var t=this;this.$w.onEvent((function(n){return t.Gr(n)})),this.$w.start()},t.prototype.stop=function(){this.$w.stop()},t.prototype.Gr=function(t){var n="Content Security Policy error. Violated directive: ".concat(t.violatedDirective," - Source file: ").concat(t.sourceFile);sn.warn(n)},t}(),ic=function(){function t(){var t=this;this.Kw={boundElement:document,type:"securitypolicyviolation",listener:function(n){return t.securityPolicyViolationListener(n)}}}return t.prototype.start=function(){On(this.Kw)},t.prototype.stop=function(){In(this.Kw)},t.prototype.onEvent=function(t){this.Kn=t},t.prototype.Xw=function(n){if(!n)return!1;var i=n.disposition;return It(n.sourceFile)&&csArray.prototype.some.call(t.Zw,(function(t){return csString.prototype.indexOf.call(n.sourceFile,t)>0}))&&"report"!==i},t.prototype.securityPolicyViolationListener=function(t){this.Xw(t)&&this.Kn({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})},t.Zw=["contentsquare","cdnssl.clicktale.net"],J([fn("Event handler type: securitypolicyviolation")],t.prototype,"securityPolicyViolationListener",null),t}(),rc=function(){function t(){}return t.prototype.init=function(){this.Qw=new nc(new ic),this.Qw.start()},t.prototype.onOptout=function(){this.Qw.stop()},t}(),ec=function(){function t(t,n,i,r){this.L=t,this.Z=n,this.D=i,this.ys=r}return t.prototype.init=function(){var t,n,i,r,e,s,u,o,h,c,a,f,v,l,d,w,y,p,m,g,A,S,E,b,R,N,T,O,I,k,C,_,P,x=this;this.ys.schedule((function(){t=new qo(x.ys),n=new pt,i=new $h(n),e=new bh(window.location,i),(r=new vn(x.L,e,x.Z)).init()})),this.ys.schedule((function(){s=new Dh,u=new Uh,p=new ah(window.location,r),(new rc).init(),m=Mh.create(sn.warn);var n=(y=new Nn(m)).create("".concat(x.L.getQuotaServiceUri(),"/quota"),!0);(c=new Nh(x.L,n,t,p,e)).init()})),this.ys.schedule((function(){o=new Do(x.L,r,s),h=new jo(o,c)})),this.ys.schedule((function(){a=new Jh(x.L,r,s),f=new Co(x.L,a,h,t),x.D.setContext(f,h),c.setVisitorService(f)})),this.ys.schedule((function(){P=new Zo(x.L,new Vo(x.L,r,u),t),v=new Ho(f,h,P),l=new rh(x.L,r,s),d=new eh(window.location,l),w=new sh(d),g=new zo(x.L,f,d);var i=new xe;C=new Kh(B,x.L),N=new Xh(C),T=new Zh(C),O=new Qh(C),I=new tc(i),k=new Oh(N,T,O,I),R=new mh([ph.UXA]),A=new yh(R,k),S=new uh(e),E=new hh(S,R);var o=new zh(x.L,r,s);_=new Fh(n,o),b=new Vh(R,_);new Tn(f,h,d,_,x.L)})),this.ys.schedule((function(){new Io(x.L,f,d,g,v,undefined,undefined,p).compute((function(s){x.ys.schedule((function(){A.init();var o=new Rh,c=new Xo(x.L,R,P,h,t),a=new vh(x.L,r,u),v=new lh(t,window.location,a),l=new wh(R,v),d=new Ah(R,x.L),p=new gh(x.L,f,h);s?(t.emitInitTracking(),new Oo(p,m,f,h,t,R,A,x.L,l,v,c,P,n,C,i,e,d,o,k,_,b,S,E,x.ys,y).start()):new Qo(t,R,A,l,v,w,c).start()}))}))}))},t}();!function(t){var n,i="{domain}/tag/bridge.html?v={version}#{token}",r={loadBundle:function(t){var o=t.source,h=t.data;if(s(h)){var f=function(){var n,i,r,s=e("{domain}/tag/tag.bundle.js?v={version}",h);n=s,i=function(){return o.postMessage("csBundleLoaded",t.origin)},(r=document.createElement("script")).type="text/javascript",r.async=!0,r.src=n,r.onload=i,r.charset="utf-8",document.head.appendChild(r)};n=h.token,a(r.loadBundle),u(t.origin)?f():function(t,n){var r=e(i,t),s=function(t){var n=document.createElement("iframe");return n.src=t,n.id="content-square-bridge",n.setAttribute("style","display: none !important; visibility: hidden !important;"),n}(r),u=function(t){t.source===s.contentWindow&&"TOKEN_VALID"===t.data&&(a(u),s.remove(),n())};c(u),document.head.appendChild(s)}(h,f)}}};function e(t,n){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(t,"{version}",n.version),"{token}",n.token),"{domain}",n.domain)}function s(t){return t&&"csBundleInjection"===t.type&&u(t.domain)&&h(t.version)&&o(t.token)}function u(t){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(t)}function o(t){return/^[a-zA-Z0-9]+$/.test(t)}function h(t){return/^[a-zA-Z0-9\.]+$/.test(t)}function c(t){window.addEventListener("message",t,!1)}function a(t){window.removeEventListener("message",t,!1)}t.getToken=function(){return n},t.isAuthorizedIncomingMessage=s,t.isAuthorizedDomain=u,t.isAuthorizedToken=o,t.isAuthorizedTagVersion=h,t.isActivable=function(){var t=window.opener||window.parent;return window!==t&&window.addEventListener},t.waitForBundleInjection=function(){c(r.loadBundle)},t.listen=c,t.removeListener=a}(Ph||(Ph={})),function(t){var n,i=window.opener||window.parent,r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/],e={ping:function(t){"ping"===t.data&&s(t.origin)&&(n=t.origin,h(e.ping),o(e.insertMessageScript),u("".concat("utils.js","?cb=").concat((new csDate).getTime())))},insertMessageScript:c((function(t){var n=t.data;"string"==typeof n&&"ping"!==n&&(h(e.insertMessageScript),u(n))}))};function s(t){return csArray.prototype.some.call(r,(function(n){return n.test(t)}))}function u(t,i){var r=document.createElement("script");r.type="text/javascript",r.async=!0;var e=csString.prototype.replace.call(n,/^https?:/,"");r.src="".concat(e,"/").concat("tag","/").concat(t),r.onload=i,r.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(r)}function o(t){window.addEventListener("message",t,!1)}function h(t){window.removeEventListener("message",t,!1)}function c(t){return function(i){i.origin===n&&t(i)}}t.getToken=function(){return Ph.getToken()},t.isActivable=function(){return window!==i&&window.addEventListener},t.isAuthorizedDomain=s,t.waitForConnection=function(){o(e.ping),Ph.waitForBundleInjection()},t.listen=o,t.removeListener=h,t.secureListener=c,t.post=function(t){n&&i.postMessage(t,n)}}(xh||(xh={}));var sc,uc=window.CSFrameCommunication||xh,oc=function(){function t(t,n,i){void 0===n&&(n=30),void 0===i&&(i=0);var r=this;this.ty=t,this.ny=n,this.iy=i,this.ey=[],this.$=!1,this.sy=0,this.uy=function(){for(r.sy=0;r.ey.length;){if(r.sy>=r.ny)return void setTimeout(r.uy,r.iy);var t=St(),n=csArray.prototype.shift.call(r.ey);if(!n)break;r.runTask(n);var i=St()-t;r.sy+=i}r.$=!1}}return t.prototype.schedule=function(t,n){void 0===n&&(n=!1),this.ty&&!n?(csArray.prototype.push.call(this.ey,t),this.oy()):t()},t.prototype.oy=function(){var t=this;this.$||(this.$=!0,setTimeout((function(){t.uy()})))},t.prototype.runTask=function(t){t()},t.prototype.runPendingTasks=function(){var t=this;csArray.prototype.forEach.call(this.ey,(function(n){t.runTask(n)})),this.ey=[]},t.prototype.clearQueue=function(){this.ey=[]},t.prototype.isEmpty=function(){return 0===this.ey.length},J([fn("TaskScheduler"),Gn("runTask")],t.prototype,"runTask",null),J([Gn("runPendingTasks")],t.prototype,"runPendingTasks",null),t}(),hc=function(){function t(t,n,i){this.L=t,this.lt=n,this.D=i}return t.prototype.start=function(){var t,n,i,r,e;if(!window.UXAnalytics){var s=new oc(!!(null===(t=this.L.taskSchedulerOptions)||void 0===t?void 0:t.enabled),null===(n=this.L.taskSchedulerOptions)||void 0===n?void 0:n.maxProcessingTime,null===(i=this.L.taskSchedulerOptions)||void 0===i?void 0:i.waitDuration),u=new dn(this.lt,this.L);u.init();var o=new yn(this.L,u);if(this.lt.isTopWindowTracker()&&o.canTrack()){if((null===(r=window.CSProtectnativeFunctionsLogs)||void 0===r?void 0:r.Warning)&&sn.warn("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Warning)),null===(e=window.CSProtectnativeFunctionsLogs)||void 0===e?void 0:e.Critical)return void sn.error("protectNativeFunctions failed: ".concat(window.CSProtectnativeFunctionsLogs.Critical));new ec(this.L,u,this.D,s).init()}else{}window.UXAnalytics={},!window.CSFrameCommunication&&uc.isActivable()&&(window.CSFrameCommunication=uc,uc.waitForConnection())}},J([Gn("main.start"),fn("main.start")],t.prototype,"start",null),t}();!function(t){t.isCSJavascriptBridgeDefined=function(){return"object"==typeof window.CSJavascriptBridge&&"function"==typeof window.CSJavascriptBridge.optIn&&"function"==typeof window.CSJavascriptBridge.optOut&&"function"==typeof window.CSJavascriptBridge.sendEvent&&"function"==typeof window.CSJavascriptBridge.sendDynamicVar&&"function"==typeof window.CSJavascriptBridge.sendTransaction},t.getBridgeVersion=function(){if("function"==typeof window.CSJavascriptBridge.getVersion)try{var t=window.CSJavascriptBridge.getVersion();if(Tt(t))return t}catch(t){sn.warn("an error occurred when calling getVersion")}return null},t.notifyIsReadyForTracking=function(){"function"==typeof window.CSJavascriptBridge.onWebviewTrackingReady&&window.CSJavascriptBridge.onWebviewTrackingReady()},t.sendAnalysisEvent=function(t){window.CSJavascriptBridge.sendEvent(csJSON.stringify(t))},t.sendSREvent=function(t){if(window.CSJavascriptBridge.sendSREvent)for(var n=0,i=t.events;n<i.length;n++){var r=i[n];window.CSJavascriptBridge.sendSREvent(csJSON.stringify(r))}},t.sendLog=function(t){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(t))},t.sendOptIn=function(){window.CSJavascriptBridge.optIn()},t.sendOptOut=function(){window.CSJavascriptBridge.optOut()},t.sendDynamicVariable=function(t,n){window.CSJavascriptBridge.sendDynamicVar(t,n)},t.sendTransaction=function(t,n,i){window.CSJavascriptBridge.sendTransaction(t,n,i)},t.sendAssets=function(t,n){if(window.CSJavascriptBridge.sendAssets){var i=csJSON.stringify(t);window.CSJavascriptBridge.sendAssets(i,n||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(t,(function(t){return t.assetId})))},t.sendNativeSREvent=function(t){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(t))}}(sc||(sc={}));var cc,ac,fc=function(){function t(){}return t.prototype.send=function(t,n,i){void 0===i&&(i=et.warn);var r={message:t,errorCode:n,level:i};sc.sendLog(r)},t}();try{var vc=new ot(window.CS_CONF);window._uxa=window._uxa||[],vc.processOptionOverrides(window._uxa);var lc=new ht(window,vc);lc.init();var dc=new rn;if(un=sn,sn.computeIsActive(vc.validationRate),lc.isTopWindowTracker()){var wc=new zt(vc,dc);sn.setStrategy(wc)}else if(lc.isInIframeContext()){var yc=new nn(vc);sn.setStrategy(yc)}else if(lc.isInWebViewContext()){var pc=new fc;sn.setStrategy(pc)}void 0===cc&&(cc=50),void 0===ac&&(ac=.1),Bn=sn.isPerfLoggingActive()&&function(){var t;if(!(null===(t=window.performance)||void 0===t?void 0:t.mark))return!1;var n="isPerformanceMeasureSupported",i="".concat(n,"_a");return performance.mark(i),void 0!==performance.measure(n,i)}(),Bn&&(zn=cc,Hn=ac),new hc(vc,lc,dc).start()}catch(_i){}}();