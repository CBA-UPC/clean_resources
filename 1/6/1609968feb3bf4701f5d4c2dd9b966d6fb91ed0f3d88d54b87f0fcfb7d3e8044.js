/*! permutive-javascript-sdk v19.103.2 (web) (built 2024-01-16T12:11:47.458Z) */(()=>{"use strict";var __webpack_modules__={2688:787:7183:3992:2851:2116:6967:(e,t,n)=>{n(2497),n(5165)},8612:(e,t,n)=>{n.d(t,{lg:()=>g,Bt:()=>_});var r=n(7582),i=n(1500),o=n(3735),s=n(6567),a=n(2751),u=n(2652);ar l=n(2851),d=n(4923),f=n(2197);const p=f.ff((e=>void 0===e));class g{et identities(){return this.identityMapRef.current}prepareThirdPartyIdentities(){this.logger.debug("[Identities]","loading 3rd party identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=this.trace.startSpan("load_tpd_ids"),n=[{load:,{load:,{load:,{load:,{load:],r=(0,i.oA)(n.map(()).map(();return Promise.all(r).then(().then((e=>this.setIdentities(e))).then((0,u.bw)(())}getPrioritizedIdentities(e){const t={default:0,appnexus:1},n=Object.entries(e).map((),r=n.filter((),o=n.filter((),u=(0,i.DZ)(()(r),c=u.length>0?Math.max(...u):0,l=r.map((),d=o.map(();return l.concat(d)}56Regex=/^[a-f0-9]{64}$/;const h=new Set(["public","email","email_md5","email_sha256","ip_address"]),_=m=2,v=3,y={},b={}},7658:922:4673:8975:(e,t,n)=>{n.d(t,{v:()=>o});ar i=n(9853);class o{constructor(e,t,n){this.logger=e,this.permutive=t,this.clientContext=n,this.optimisedActivationsConfig={dfp:{dfp:[162993,162994,172621,167958,173013,172622,171044,178738,178735],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[],freewheel:[]}}getSpecializedActivations(e){return this.optimisedActivationsConfig[e]},9853:(e,t,n)=>{n.d(t,{$S:()=>s,Hn:()=>i,MU:()=>o});const r={ctv:{auto_init:!1,ctv_engagement_enabled:!0,ctv_engagement_event_seconds:5,activationConfigs:[]},dfp:{auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]},prebid:{auto_init:!0,revenue_insights_enabled:!1,data_provider_config:{ac_bidders:[]},activationConfigs:[]},web:{auto_init:!1,track_pageview_engagement:!0,track_form_submission:!1,track_link_click:!0,track_pageview_complete:!0,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]}},i=o=i("web"),s=i("dfp");i("facebook_pixel_v2")},2836:389:5865:3577:5700:5461:9773:342:8491:5619:4454:4074:8317:4026:569:7575:7256:7274:9117:9880:7554:9332:8259:2497:5165:6037:(e,t,n)=>{n.d(t,{C:()=>u});var r=n(7582),i=n(1500),o=n(3735);const s=(a=[[{name:"dfp",import:Promise.resolve().then(n.bind(n,4388))}],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[{name:"prebid",import:Promise.resolve().then(n.bind(n,9581))}],[],[],[],[],[],[],[],[],[{name:"web",import:Promise.resolve().then(n.bind(n,4400))}],[],[{name:"ctv",import:Promise.resolve().then(n.bind(n,7305))}],[]],(0,o.zG)((0,i.xH)(a),(0,i.u4)({},()));var a;const u=,2721:3248:9624:9658:4388:4400:9078:533:7423:4586:310:4640:(e,t,n)=>{n.r(t),n.d(t,{nextGenWeb:()=>On,runNextGenFeaturesWeb:()=>Mn});var r=n(7582),i=n(2116);ar s=n(2688),a=n(3735);const u=c=l=d=e=>void 0!==e.request_id,f=var p=n(4730);ar h=n(6567),_=n(5151),m=n(1828),v=n(922),y=n(3328),b=n(3992),w=n(8377);const E=k=w.li,P=w.Yg,S=var D=n(2851);const I="RefEventual",M=e=>D.a9(E(e)),O=C=T=e=>k(e.current),U=D.UI(k),x=D.UI(P),A={URI:I,map:(e,t)=>O(t)(e)},G={URI:I,map:A.map,ap:;var q=n(6392),R=n(2652);const z=L=j=B=K=$=N=W=F=Y=Q=V=H=new Set(["ThirdPartySegments","SlotRendered"]),J=new Set(["AdRequest",...v.D0?["PageviewEngagement"]:[],...v.ED?["SegmentEntry","SegmentExit"]:[],"VideoEngagement"]),X=new Set(["PageviewComplete"]),Z=new Set(["!UpdateLookalikeModels","Pageview","Videoview"]);r ne=n(365),re=n(4767);var ie=n(7554);nst ae="permutive-events-cache",ue="permutive-events-for-page",ce="[EVENTSCACHE]",le=onst fe=()=>[];r he=n(7826),_e=n(9853);const me="_pnativo",ve=function(e){let{externalData:t}=e;return i.K4((()=>{t.removeExternalData(me)}))};var ye=n(7927),be=n(6017);nst ke=(0,a.ls)(ye.UI((),ye.hX((0,a.zG)(Boolean,(0,be.xD)((0,be.ff)(ye.xb)))));var Pe,Se,De,Ie,Me,Oe=-1,Ce=Te=Ue=xe=Ae=Ge=qe=Re=ze=Le=-1,je=Be=Ke=function(){addEventListener("visibilitychange",Be,!0),addEventListener("prerenderingchange",Be,!0)},$e=Ne=We=Fe=[1800,3e3],Ye=[.1,.25],Qe=Ve={passive:!0,capture:!0},He=new Date,Je=Xe=Ze=et=tt=[100,300],nt=0,rt=1/0,it=0,ot=st=at=ut=[200,500],ct=0,lt=dt=[],ft={},pt=gt=[2500,4e3],ht={};const _t=const mt=var vt=n(926),yt=n(4923),bt=n(7341);n(856);const wt=e=>E(ne.F2(e)),Et=kt=bt.UI(A,ne.dO),Pt=(ne.G5,,St=Dt=It=var Mt=n(4870);const Ot=Ct=Tt=Ut=(e,t)=>((e,t,n)=>{const{activationManager:o,externalData:s,metrics:u,permutiveData:c,queryManager:l,stateSync:d,trace:f}=e;return(0,a.zG)(we(e,{lookalikeModels:t.lookalikeModels,thirdPartyData:(0,a.zG)(t.thirdPartyData,D.UI(h.UI(yt.UI(())))}),i.YO("queryLanguage"),i.ak("webVitals",(()=>_t(e))),i.ak("eventCollection",(),i.ak("nativo",(),i.ak("twitterPixel",(),i.ak("prebidJS",(()=>(0,he.dN)(e))),i.ak("reset",())})(e,t,ge);t="clean_room";const Bt=function(e,t){return i.of(h.YP)};var Kt=n(7241),$t=n(2197);const Nt="[Prebid Monitoring]",Wt=(e,t)=>{e.metrics.track({name:"sdk_prebid_monitoring_key_flag_count_total",labels:t,value:1})},Ft=Yt=const Qt=Vt=Ht=Jt=const Xt="_pssps",Zt=const en=const tn="_pfws";const nn=const rn=on=sn=an=e=>cn(e,1),un=cn=var ln=n(7758);onst fn=const pn=(e,t)=>i.vP({classificationModels:nn(e,t)}),gn=const hn=_n=const mn=onst yn=bn=wn=(0,a.ls)(JSON.stringify,R.vp);const En=var kn=n(5619);const Pn=const Sn=(e,t)=>i.vP({contextual:Pn(e,t)}),Dn={empty:((),concat:;D.a9([]),D.a9([]),D.a9([]),D.a9(kn.b()),D.a9(h.YP),D.a9(h.YP);640:4564:1410:7708:4769:30:3298:(e,t,n)=>{n.d(t,{S:()=>v});var r=n(3735),i=n(7582),o=n(6567),s=n(1500),a=n(2851),u=n(8612),c=n(2497),l=n(5165),d=n(3992);var f=n(2652);ar g=n(6315);class h{(e,t){return this.nextGen.eventCollection.on(e,t)},t){const s=Object.assign(Object.assign({},t),{permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedEvents:this.unprocessedEvents,metrics:this.metrics,state:this.state,queryManager:this.queryManager,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,addons:this.addons,enrichers:this.enrichers,externalData:this.externalData,cookies:this.cookies,nextGenOutput:this.nextGen}),u=(0,r.zG)(this.nextGen.pbjsPair,a.UI(o.UI((0,f.vg)("pbjs")))),c=if("contextual"!==e)if(-1===this.initialisedAddons.indexOf(e))switch(c(e),e){case"web":Promise.resolve().then(n.bind(n,4400)).then((e=>this.addons.web=new e.WebAddon(s))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":case"overlays":case"scriptrunner":case"nativo":case"freewheel":case"facebook_pixel_v2":case"eyeota_pixel":case"rubicon":case"rubicon_ssp":case"tracking_pixel":case"twitter_pixel":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"classification_models":case"clean_room":case"gam_log":case"smart":case"tradedesk":case"ddp":case"dbm":case"appnexus":case"pubmatic":case"ssp":0;break;case"dfp":Promise.resolve().then(n.bind(n,9658)).then(();break;case"prebid":Promise.resolve().then(n.bind(n,9581)).then(();break;case"ctv":Promise.resolve().then(n.bind(n,7305)).then((e=>this.addons.ctv=new e.CTVAddon(s)))}else"web"===e&&!0!==t.auto_init?(((,"permutive:web:ready",this.messages).catch(():"ctv"===e&&!0!==(null==t?void 0:t.auto_init)&&Promise.resolve().then(n.bind(n,7305)).then(()}ar _=n(4769);const m=v=,6416:6315:5919:7985:7078:4922:333:2652:(e,t,n)=>{n.d(t,{BJ:()=>f,Bf:()=>k,G6:()=>C,Gz:()=>S,HD:()=>d,HP:()=>R,Kn:()=>l,Or:()=>x,PM:()=>h,PQ:()=>T,SL:()=>m,Z_:()=>G,a4:()=>y,aT:()=>E,b0:()=>D,b2:()=>v,bw:()=>j,cO:()=>U,eu:()=>b,fl:()=>M,jn:()=>p,k$:()=>P,lW:()=>A,lo:()=>B,m8:()=>I,mQ:()=>z,qh:()=>g,rH:()=>$,rO:()=>L,vg:()=>q,vp:()=>_});var r=n(1500),i=n(3735),o=n(6567),s=n(7209),a=n(6017),u=n(2751),c=n(3992);const l=d=e=>"string"==typeof e,f=p=e=>"boolean"==typeof e,g=e=>Object.entries(e);f(u.xb); w=[];n O(e){return/Mobi|Android/i.test(e)}st x=t z=L=onst B=K=$=K(parseInt);K(parseFloat)},6574:4730:4996:3030:7305:(e,t,n)=>{n.r(t),n.d(t,{CTVAddon:()=>p,load:()=>f});var r=n(3735),i=n(6567),o=n(9853),s=n(2652),a=n(3992);const u="ctv",c=(0,o.Hn)(u),l=c("ctv_engagement_enabled",!0),d=c("ctv_engagement_event_seconds",5),f=e=>{(0,o.Hn)(u)("auto_init",!1)&&e.q.push({functionName:"addon",arguments:[u,{}]})};class p{constructor(e){this.shouldTrackCTVEngagement=l&&d>0,this.DEFAULT_DURATION=0,this.options=e,this.input=this.sanitiseInput({duration:e.duration,videoProperties:e.videoProperties}),this.updateClientContext(this.input.videoProperties),this.options.viewId.generateAndSet(),this.trackerState="Paused",this.commonPlaybackState={},this.resumedState={},this.pausedState={},this.setDuration(this.input.duration),this.trackVideoView()}play(e){const t=()=>{this.shouldTrackCTVEngagement&&!this.clearInterval&&(this.clearInterval=this.registerEngagementInterval(d))},n=e=>(0,r.zG)(this.sanitisePosition(null!=e?e:this.pausedState.pausedPosition,(()=>0)),(e=>(this.updateResumedState({resumedPosition:e,resumedTimestamp:Date.now()}),e)),(e=>this.calculateMaximumViewedPosition(e)),(e=>this.updateCommonPlayBackState({maximumViewedPosition:e,percentageViewed:this.calculatePercentageViewed(e)})));switch(this.trackerState){case"Paused":t(),this.updateTrackerState("Resumed"),n(e);break;case"Resumed":n(e)}}pause(e){var t;const n=e=>(0,r.zG)(this.sanitisePosition(e,(()=>this.calculateCurrentPosition())),(e=>(this.updatePausedState({pausedPosition:e,pausedTimestamp:Date.now()}),e)),(e=>this.calculateMaximumViewedPosition(e)),(e=>this.updateCommonPlayBackState({maximumViewedPosition:e,percentageViewed:this.calculatePercentageViewed(e),accumulatedEngagementTime:this.calculateAccumulatedEngagementTime()})));"Resumed"===this.trackerState&&(null===(t=this.clearInterval)||void 0===t||t.call(this),this.clearInterval=void 0,this.updateTrackerState("Paused"),n(e))}stop(e){var t;null===(t=this.clearInterval)||void 0===t||t.call(this),this.clearInterval=void 0,"Resumed"===this.trackerState&&(0,r.zG)(this.sanitisePosition(e,(()=>this.calculateCurrentPosition())),(e=>this.calculateMaximumViewedPosition(e)),(e=>this.updateCommonPlayBackState({maximumViewedPosition:e,percentageViewed:this.calculatePercentageViewed(e)}))),this.updateTrackerState("Stopped"),this.trackVideoCompletion({completion:this.commonPlaybackState.percentageViewed,engaged_time:"Resumed"===this.trackerState?this.calculateTotalEngagedTime():this.commonPlaybackState.accumulatedEngagementTime})}ackVideoView(){this.track("Videoview",{isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",local_time:g(),video:this.input.videoProperties})}trackVideoEngagement(e){this.track("VideoEngagement",{isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,local_time:g(),video:this.input.videoProperties})}trackVideoCompletion(e){this.track("VideoCompletion",{isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",aggregations:{VideoEngagement:e},local_time:g(),video:this.input.videoProperties})}updateTrackerState(e){this.trackerState=e}registerEngagementInterval(e){return(0,a.UM)((,1e3*e)}sanitisePosition(e,t){return(0,r.zG)(e,i.ij,i.EQ(t,(e=>"number"!=typeof e||Number.isNaN(e)?t():Math.max(e,0))))}calculateCurrentPosition(){return Date.now()-this.resumedState.resumedTimestamp+this.resumedState.resumedPosition}updateResumedState(e){this.resumedState=Object.assign(Object.assign({},this.resumedState),e)}pdateCommonPlayBackState(e){var t,n;const r=e.accumulatedEngagementTime?null!==(t=e.accumulatedEngagementTime+this.commonPlaybackState.accumulatedEngagementTime)&&void 0!==t?t:0:null!==(n=this.commonPlaybackState.accumulatedEngagementTime)&&void 0!==n?n:0;this.commonPlaybackState=Object.assign(Object.assign(Object.assign({},this.commonPlaybackState),e),{accumulatedEngagementTime:r})}alculateMaximumViewedPositionalculateTotalEngagedTime(){return Date.now()-this.resumedState.resumedTimestamp+this.commonPlaybackState.accumulatedEngagementTime}calculatePercentageViewed(e){if(0===this.commonPlaybackState.totalVideoDuration)return 0;const t=e/this.commonPlaybackState.totalVideoDuration;return t>1||t<0?0:t}updateClientContext(e){const t=(0,s.qh)(e);this.options.clientContext.updateContext(...t)}logDebug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.options.logger.debug("[ctv]",...t)}sanitiseInput(e){const t=e=>(0,r.ls)(i.DT(e),i.pF(r.r5)),n=t(s.jn),o=t(s.HD),a=t(s.BJ),u=t(();return(0,r.zG)(e,(0,s.rO)({duration:(0,r.ls)(i.DT(s.BJ),i.pF(()),videoProperties:(0,r.ls)(i.DT(s.Kn),i.UI((0,s.rO)({age_rating:o,audio_language:o,consecutive_episodes:a,content_type:u,country:o,episode_number:a,genre:u,iab_categories:u,original_language:o,runtime:a,season_number:a,subtitles:(0,r.ls)(i.DT(s.Kn),i.UI((0,s.rO)({enabled:n,language:o})),i.pF(r.r5)),title:o})),i.fS((()=>({}))))}),(0,s.bw)(())}}function g(){const e=new Date,t=-e.getTimezoneOffset(),n=t>=0?"+":"-",r=return e.getFullYear()+"-"+r(e.getMonth()+1)+"-"+r(e.getDate())+"T"+r(e.getHours())+":"+r(e.getMinutes())+":"+r(e.getSeconds())+n+r(Math.floor(Math.abs(t)/60))+":"+r(Math.abs(t)%60)}},7826:122:7748:7200:6341:6308:2546:6197:9581:8036:1628:(e,t,n)=>{n.d(t,{c:()=>Ne,e:()=>Ke});var r=n(7183),i=n(2688),o=n(3735),s=n(4767);const a=u=e=>({kind:"string",value:e}),c=e=>({kind:"number",value:e}),l=e=>({kind:"array",value:e}),d=e=>({kind:"object",value:e}),f=e=>e,p=()=>({kind:"bottom"}),g=e=>({kind:"inner",a:e}),h=e=>({kind:"top",error:e}),_=e=>({kind:"unbounded",group:e}),m=v=(e,t,n)=>({kind:"countLimit",n,limit:t,group:e}),y=b=e=>({kind:"numberGroup",group:e}),w=e=>({kind:"stringGroup",group:e}),E=e=>({kind:"tuple",tuple:e}),k=e=>({state:e}),P=var S=n(7209),D=n(2751);const I=M=var O=n(6567),C=n(1885),T=n(1500),U=n(365),x=ction R(e,t){return new Map([...e].map(t))}ar L=n(4268),j=n(4011);st N=W={encode:decode:,F={encode:e=>e.value,decode:e=>"string"==typeof e?(0,U.F2)(u(e)):N(e,"SimpleString")},Y={encode:e=>e.value,decode:,Q={encode:decode:,V={encode:decode:;st he={strategy:operation:extend:,_e={fromNumber:o.yR,plus:times:;=n(5151),Pe=n(922),Se=n(2652),De=n(4730),Ie=n(8036);onst Oe="bootstrap",Ce="process",Te="processTransitions",Ue="updateExternalState",xe="updateLAL",Ae="updateTPD";var Ge=n(2851),qe=n(3328);const Re="permutive:query:changed",ze="internal_query_states",Le="external_query_states",je=var Be=n(3992);function Ke(){{const e=n(4386).Z;return(0,r.h)(new e)}}class $e{constructor(e){this.queryMetadata={158162:"0c8b70cdb7",162993:"ef82aaeb3d",162994:"afd3fa2769",167958:"df7ae98dc9",171044:"c83893f1b8",172621:"7dbd3492be",172622:"899727edfd",173013:"ba42571357",176641:"419614f7cf",177516:"2ff0a8f209",178735:"a20fe86e64",178738:"a9dbd766dd"},this.externalQueries=new Set([]),this.customProperties=e.customProperties,this.externalData=e.externalData,this.logger=e.logger,this.messages=e.messages,this.api=e.api,this.permutive=e.permutive,this.permutiveData=e.permutiveData,this.queryWorker=e.queryWorker,this.realtime=e.realtime,this.sessionManager=e.sessionManager,this.transitionDebounceMaxTime=e.transitionDebounceMaxTime,this.transitionDebounceTime=e.transitionDebounceTime,this.userId=e.userId,this.viewId=e.viewId,this.metrics=e.metrics},8318:3622:1229:926:1828:1500:6862:365:856:4268:2690:1130:9679:7341:6392:1885:6567:7209:6017:3328:7241:4923:8377:7927:2197:4870:5151:4767:(e,t,n)=>{n.d(t,{Do:()=>Y,F2:()=>g,Ij:()=>V,LV:()=>w,UI:()=>C,Uo:()=>b,Vn:()=>U,Y3:()=>k,Zl:()=>G,ak:()=>Q,fF:()=>y,fS:()=>E,fX:()=>K,oU:()=>N,t$:()=>p,tD:()=>v,tS:()=>A,wE:()=>F});var r=n(6862),i=n(856),o=n(2690),s=n(1130),a=n(9679),u=n(3735),c=(n(7341),n(9384)),l=n(5151),d=f=p=i.t$(l.PM),g=i.F2(l.PM),h=i.m8(l.dO),_=i.pk(l.dO),m=(0,u.ls)(l.tD,h),v=(l.tD,m),y=h,b=l.of,w=(l.tD,l.dO,i.LV(l.UA)),E=i.fS(l.UA),k=P=(l.dO,l.PM,l.PM,l.UA,l.UA,l.UA,l.UA,l.dO,function(e,t){return(0,u.zG)(e,C(t))}),S=function(e,t){return(0,u.zG)(e,x(t))},D=function(e,t){return(0,u.zG)(e,A(t))},I=M=function(e,t){return(0,u.zG)(e,U(t))},O=function(e,t){return(0,u.zG)(e,q(t))},C=i.UI(l.dO),T=i.Pd(l.dO),U=i.Vn(l.dO),x=i.ap(l.Hi),A=i.tS(l.UA),G=A,q=i.wp(l.UA),R=g,z=p,L="TaskEither";var j={URI:L,map:P,ap:S,chain:D},B={URI:L,fromEither:b},K=(0,o.fX)(B,j),$={URI:L,fromIO:v},N=(0,s.oU)($,j),W={URI:L,fromIO:v,fromTask:y},F=(0,a.oU)(W,j);var Y=R(c.F4),Q=(0,r.a)(j),V=(c.Xl,{URI:L,bimap:I,mapLeft:M,map:P,of:R,ap:S,chain:D,alt:O,fromIO:v,fromTask:y,throwError:z})},7758:5605:3735:(e,t,n)=>{n.d(t,{MZ:()=>i,Q1:()=>c,SK:()=>p,W8:()=>s,a9:()=>o,bc:()=>d,gn:()=>a,ls:()=>l,r5:()=>u,yR:()=>r,zG:()=>f});ar i=r;ar s=o(!0),a=o(null),u=o(void 0),c=u; p=,9384:4011:2751:4386:}},4}},75r}},__webpack_module_cache__=s}__webpack_require__t},__webpack_require__)},__webpack_require__t),__webpack_require__)};var __webpack_exports__={},_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__;_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3992),(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.ho)(!0),(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_0__.HJ))))})();