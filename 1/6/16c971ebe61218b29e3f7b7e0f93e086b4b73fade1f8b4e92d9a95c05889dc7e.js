(function(h){var l=window.AmazonUIPageJS||window.P,q=l._namespace||l.attributeErrors,f=q?q("AmazonDevicesDetailPageUtilityAssets",""):l;f.guardFatal?f.guardFatal(h)(f,window):f.execute(function(){h(f,window)})})(;
/* ******** */
(function(l){var r=window.AmazonUIPageJS||window.P,x=r._namespace||r.attributeErrors,f=x?x("DetailPageAccessoryUpsellAssets",""):r;f.guardFatal?f.guardFatal(l)(f,window):f.execute(function(){l(f,window)})})(function(l,r,x){l.when("desktop-accessory-upsell-model","desktop-accessory-upsell-view","desktop-accessory-upsell-controller").register("desktop-accessory-upsell-factory",function(f,d,a){return{get:function(e,g){var v=new d(e);g=new f(g);return new a(e,v,g)}}});"use strict";l.when("A").register("desktop-accessory-upsell-model",
function(f){var d=f.$;return f.createClass({init:function(a){this._accessoryCampaignData=a.accessoriesCampaignSource;this._asinsData=a.asinsData;this._primaryAsin=a.primaryAsin;this._buildScheduledAsinCache(this._asinsData)},getAsinsData:function(){return this._asinsData},getAccessoryCampaignData:function(){return this._accessoryCampaignData},getPrimaryAsin:function(){return this._primaryAsin},getInterstitialAsinsData:function(){var a=d.extend({},this._asinsData);Object.keys(a).forEach(;return a},getScheduledAsinFromVariationAsin:function(a){return this._scheduledAsins[a]},getVariationAsinsFromScheduledAsin:function(a){return this._scheduledVariationsAsins[a]},_buildScheduledAsinCache:function(a){this._scheduledAsins={};this._scheduledVariationsAsins={};this._interstitialAsinsData={};for(var e in a)if(a.hasOwnProperty(e)){this._scheduledVariationsAsins[e]=[];for(var g in a[e])a[e].hasOwnProperty(g)&&(this._scheduledVariationsAsins[e].push(g),this._scheduledAsins[g]=
e,a[e][g].isInterstitial&&(this._interstitialAsinsData[e]=a[e]))}}})});"use strict";l.when("a-modal","A").register("desktop-accessory-upsell-view",function(f,d){return d.createClass({init:function(a){this.$el=a},_getOptionElement:_updateOptionRow:function(a){var e=this._getOptionElement(a.optionAsin);e.find(".abb-selected-variation").html(a.variationText);e.find(".abb-option-list-price").html(a.listPriceString);e.find(".abb-option-list-price-label").html(a.listPriceLabel);
e.find(".abb-option-buying-price").html(a.buyingPriceString)},_toggleProduct:function(a){var e=this._getOptionElement(a.optionAsin).find(".abb-option-checkbox input[type\x3d'checkbox']");a.isProductSelected?e.attr("checked",!0):e.removeAttr("checked");this.$el.trigger("change")},_hidePopover:function(a){a=this.$el.find("#abb-popover-trigger-"+a.optionAsin);(a=f.get(a))&&a.hide()},render:function(a){this._toggleProduct(a);a.isProductSelected&&(this._updateOptionRow(a),this._hidePopover(a))},deselectAllProducts:)});
"use strict";l.when("desktop-accessory-upsell-product-factory","desktop-accessory-upsell-interstitial-factory","desktop-accessory-upsell-ref-helper","accessory-upsell-dom-helper","accessory-upsell-buybox-helper","A").register("desktop-accessory-upsell-controller",function(f,d,a,e,g,v){var k=v.$;return v.createClass({init:function(m,c,b){this.$el=m;this._view=c;this._model=b;this._subControllers={};this._interstitialController;g.reset();e.processMarkupForDabb();g.parsePageAsin();m=0;c=this._model.getAsinsData();
g.registerAccessoryUpsellData(c);for(var h in c)c.hasOwnProperty(h)&&(c[h]&&c[h][h]?a.sendAsinScheduled(m,h,c[h][h].isAutomated):a.sendAsinScheduled(m,h,!1),b=f.get(h,c[h],m),b.setOnOrderUpdate(k.proxy(this._handleOrderUpdate,this)),this._subControllers[h]=b,m++);a.addCountMetric("DesktopMarsABBCount");h=this._model.getInterstitialAsinsData();this._interstitialController=d.get(h);this._bindEvents();this._updateDefaultCheckedAccessories()},_bindEvents:function(){var a=this;l.when("ready").execute("accessory-upsell-controller-bindEvents",
function(){a._loadSubControllerInitialImages.apply(a);a._interstitialController&&a._interstitialController.loadInitialImages();e.getPageQuantityDropdown().change(});this._bindedFn={handleCheckboxChange:k.proxy(this._handleCheckboxChange,this),onBuyboxUpsellAsinsChanged:k.proxy(this._onBuyboxUpsellAsinsChanged,this)};this._enableEvents(!0);e.getGiftWrapUpdate().change(},_enableEvents:function(a){a=
a?"":"un";g[a+"registerUpsellAsinRemoved"](this._bindedFn.onBuyboxUpsellAsinsChanged);g[a+"registerUpsellAsinAdded"](this._bindedFn.onBuyboxUpsellAsinsChanged);this.$el[a+"delegate"](".abb-option-checkbox input[type\x3d'checkbox']","change",this._bindedFn.handleCheckboxChange)},_addAsin:function(a,c,b){var h=this._model.getScheduledAsinFromVariationAsin(a);this._model.getVariationAsinsFromScheduledAsin(h);g.addUpsellAsin(a,c,b)},_onBuyboxUpsellAsinsChanged:function(a,c,b){c=this._model.getScheduledAsinFromVariationAsin(a);
var h=this._subControllers[c];b=0<b;h&&(h.setAddedToOrderState(b),b&&h.selectAsin(a),this._internalRender(c,h.getCurrentProduct(),b))},_handleCheckboxChange:function(d,c,b){c=c||k(d.currentTarget);d=c.parents(".abb-option").data("asin");var h=c.is(":checked");c=this._subControllers[d];var y=c.getIndex(),p=c.getCurrentProduct();c.setAddedToOrderState(h);h?(h=this._parseQuantity(e.getPageQuantityDropdown().val()),this._addAsin(p.asin,p.offerListingID,h),a.sendCheckboxSelected(y,p.asin,p.isAutomated)):
(g.removeUpsellAsin(p.asin,p.offerListingID),a.sendCheckboxDeselected(y,p.asin,p.isAutomated));b||!p.checkForInteraction||p.hasBeenInteractedWith||c.setHasBeenInteractedWith(d)},_handleOrderUpdate:function(a,c){a=this._parseQuantity(k('#addToCart select[name\x3d"quantity"]').val());this._addAsin(c.asin,c.offerListingID,a)},_internalRender:function(a,c,b){a=this._generateOptionViewModel(a,c,b);this._view.render(a)},_generateOptionViewModel:function(a,c,b){var h=!1,g="",e="",d="",f="";c&&(g=(h=c.showPriceStrikethrough)?
c.listPrice:"",c.showPriceStrikethrough&&c.listingPriceLabel&&(e=c.listingPriceLabel),d=c.buyingPrice,f=c.swatchValue);return{optionAsin:a,isProductSelected:b,isOnSale:h,listPriceString:g,listPriceLabel:e,buyingPriceString:d,variationText:f}},_loadSubControllerInitialImages:_updateDefaultCheckedAccessories:function(){var a=this;a.$el.find(".abb-option-checkbox input[type\x3d'checkbox']:checked").each(function(){a._handleCheckboxChange(null,
k(this),!0)})},_parseQuantity:)});"use strict";l.when("desktop-accessory-upsell-product-model","desktop-accessory-upsell-product-controller","desktop-accessory-upsell-product-view","A").register("desktop-accessory-upsell-product-factory",function(f,d,a,e){return{get:function(g,v,k){var m=e.$("#abb-product-view-"+g),c=new a(m);v=new f(v,g,k);return new d(m,g,c,v)}}});"use strict";l.when("A").register("desktop-accessory-upsell-product-model",function(f){return f.createClass({init:function(d,
a,e){this._products=d;this._index=e;this._isViewClosedByOrderUpdate=this._isAddedToOrder=this._preloadingComplete=!1;this._cachedAsin=null;this._isVisual=this._calculateIsVisual(a);this.setSelectedProduct(a)},_calculateIsVisual:function(d){return(d=this._products[d])?d.visualDimension:!1},cacheSelectedProduct:function(){var d=this.getSelectedProduct();"undefined"!==typeof d&&(this._cachedAsin=d.asin)},setSelectedProductFromCache:function(){this.setSelectedProduct(this._cachedAsin)},clearSelectedProductCache:setSelectedProduct:function(d){if(d)for(var a in this._products)this._products.hasOwnProperty(a)&&(this._products[a].isSelected=a===d)},getSelectedProduct:function(){for(var d in this._products)if(this._products.hasOwnProperty(d)){var a=this._products[d];if(a.isSelected)return f.copy(a)}},getProduct:function(d){var a=null,e;for(e in this._products)if(this._products.hasOwnProperty(e)&&e===d){a=this._products[e];break}return a},isSelectedProduct:
isVisual:function(){return this._isVisual},setAddedToOrderState:function(d){this._isAddedToOrder=d},isAddedToOrderState:function(){return this._isAddedToOrder},getAllLowResImages:function(){var d=[],a;for(a in this._products)this._products.hasOwnProperty(a)&&d.push(this._products[a].lowResImage.URL_);return d},isPreloadingComplete:function(){return this._preloadingComplete},completePreloading:getIndex:function(){return this._index},isViewClosedByOrderUpdate:function(){return this._isViewClosedByOrderUpdate},
setViewClosedByOrderUpdate:function(d){this._isViewClosedByOrderUpdate=d},setHasBeenInteractedWith:function(d){this._products.hasOwnProperty(d)&&(this._products[d].hasBeenInteractedWith=!0)}})});"use strict";l.when("A").register("desktop-accessory-upsell-product-view",function(f){var d=f.$;return f.createClass({init:function(a){this.$baseElement=a;this.$variations=this.$baseElement.find(".abb-variation")},updateTargetElement:function(a,e){this.$el=a;this.$el.find(".abb-product-view").toggleClass("abb-product-is-selected",
e)},_updateSelectedVariation:function(a){this.$variations.removeClass("a-button-selected");this.$variations.filter(".abb-variation-"+a).addClass("a-button-selected")},render:function(a){var e=this._buildFeatureBullets(a.featureBullets);this._updateElements(this.$el,a,e.clone());this._updateSelectedVariation(a.asin)},updateBase:function(a){var e=this._buildFeatureBullets(a.featureBullets);this._updateElements(this.$baseElement,a,e.clone());this.$baseElement.find(".abb-variation-"+a.asin).trigger("click")},
_updateElements:function(a,e,g){e.isDigitalSubscription||(a.find(".abb-product-title").html(e.title),a.find(".abb-product-buying-price").html(e.buyingPriceString),a.find(".abb-product-list-price").html(e.isOnSale?e.listPriceString:""),a.find(".abb-product-list-price-label").html(e.isOnSale?e.listingPriceLabel:""),a.find(".abb-product-merchant").text(e.merchant),a.find(".abb-variation-selected-dimension").text(e.swatchValue),a.find(".abb-product-feature-bullets").html(g),a.find(".abb-product-title").attr("href",
e.productURL))},_buildFeatureBullets:function(a){for(var e=d("\x3cul\x3e"),g=0;g<a.length;g++)d("\x3cli\x3e").html(a[g]).appendTo(e);return e},updateProductImage:function(a){setTimeout(function(){this.$el.find(".abb-product-image").attr("src",a);this.$baseElement.find(".abb-product-image").attr("src",a)}.bind(this),100)}})});"use strict";l.when("desktop-accessory-upsell-ref-helper","ods-image-utilities","A").register("desktop-accessory-upsell-product-controller",function(f,d,a){var e=a.$;return a.createClass({init:function(g,
d,f,m){this.$baseElement=g;this._scheduledAsin=d;this._view=f;this._model=m;this.$el;this.popoverInstance;a.on("a:button-group:abb-product-variations-"+this._scheduledAsin+":toggle",e.proxy(this._handleVariationSelection,this));a.on("a:popover:beforeShow:abb-product-view-"+this._scheduledAsin,e.proxy(this._preparePopover,this));a.on("a:popover:show:abb-product-view-"+this._scheduledAsin,e.proxy(this._bindEvents,this));a.on("a:popover:afterHide:abb-product-view-"+this._scheduledAsin,e.proxy(this._detachPopover,
this))},_preparePopover:function(a){this.$el=a.popover.$popover;this.popoverInstance=a.popover;this._model.cacheSelectedProduct();this._model.setViewClosedByOrderUpdate(!1);this._model.setHasBeenInteractedWith(this._scheduledAsin);this._view.updateTargetElement(this.$el,this._model.isAddedToOrderState());if(!this._model.isPreloadingComplete()){var v=this;a=d.preloadImages(this._model.getAllLowResImages());e.when.apply(e,a).done(}this.renderView();f.sendPopoverDisplayed(this._model.getIndex(),
this._model.getSelectedProduct().asin);f.addCountMetric("DesktopMarsABBProductViewCount")},_bindEvents:_detachPopover:function(){this.$el&&this.$el.undelegate(".abb-product-ato","click",e.proxy(this._handleAddToOrderClick,this));this.popoverInstance=this.$el=x;this._model.isViewClosedByOrderUpdate()||(this._model.setSelectedProductFromCache(),f.sendPopoverCancelled(this._model.getIndex(),this._model.getSelectedProduct().asin));
this._model.clearSelectedProductCache()},_handleVariationSelection:function(a){var e;a.selectedButton&&(e=a.selectedButton.buttonName);e&&(this.selectAsin(e),this.renderView(),f.sendPopoverTwisted(this._model.getIndex(),e))},_handleAddToOrderClick:function(){var a=this._model.getSelectedProduct(),e=this._model.isAddedToOrderState();this._orderUpdateCallback&&this._orderUpdateCallback(this._scheduledAsin,a);this._model.setAddedToOrderState(!0);this._model.setViewClosedByOrderUpdate(!0);this._view.updateBase(this._generateViewModel(a));
e?f.sendUpdateClicked(this._model.getIndex(),a.asin):f.sendAddToOrderClicked(this._model.getIndex(),a.asin);this.$el.addClass("abb-product-is-selected");this.popoverInstance.hide()},_handleLowResImageLoaded:function(a,e){var d=this._model.getSelectedProduct();a&&a.isResolved()||d.lowResImage.URL_!==e||this._view.updateProductImage(e)},_handleHiResImageLoaded:function(a){this._model.getSelectedProduct().hiResImage.URL_===a&&this._view.updateProductImage(a)},_handleImageLoadFailure:function(a){throw Error("The image "+
a+" failed to load for accessory ASIN "+this._scheduledAsin);},_generateViewModel:function(a){return{asin:a.asin,title:a.title,merchant:a.merchantName,swatchValue:a.swatchValue,featureBullets:a.featureBullets,listPriceString:a.listPrice,listingPriceLabel:a.listingPriceLabel,buyingPriceString:a.buyingPrice,isOnSale:a.showPriceStrikethrough,isDigitalSubscription:a.isDigitalSubscription,productURL:"/dp/{0}/ref\x3dods_dabb_{0}_productInfo".replace("{0}",a.asin).replace("{0}",a.asin)}},_loadProductImage:function(a){a=
d.preloadImage(a.lowResImage.URL_,a.hiResImage.URL_);a.image.done(e.proxy(this._handleLowResImageLoaded,this,a.hiResImage)).fail(e.proxy(this._handleImageLoadFailure,this,a.hiResImage));a.hiResImage&&a.hiResImage.done(e.proxy(this._handleHiResImageLoaded,this)).fail(e.proxy(this._handleImageLoadFailure,this))},loadInitialImages:function(){a.loadDescendantImagesManually(this.$baseElement)},setOnOrderUpdate:getCurrentProduct:function(){return this._model.getSelectedProduct()},
setAddedToOrderState:function(a){this._model.setAddedToOrderState(a)},selectAsin:function(a){var e=this._model.getSelectedProduct();e&&e.asin!==a&&this._model.setSelectedProduct(a)},renderView:function(){var a=this._model.getSelectedProduct();this._model.isVisual()&&this._loadProductImage(a);this._view.render(this._generateViewModel(a))},getIndex:function(){return this._model.getIndex()},setHasBeenInteractedWith:)});"use strict";l.when("desktop-accessory-upsell-interstitial-model",
"desktop-accessory-upsell-interstitial-view","desktop-accessory-upsell-interstitial-controller","A").register("desktop-accessory-upsell-interstitial-factory",function(f,d,a,e){return{get:function(g){var l=e.$("#abb-interstitial"),k=new d(l);g=new f(g);return new a(l,k,g)}}});"use strict";l.when("A").register("desktop-accessory-upsell-interstitial-model",function(f){return f.createClass({init:function(d){this._interstitialAsinsData=d;this._scheduledAsins={};this._scheduledVariationsAsins={};this._interstitialProducts=
{};this._buildScheduledAsinCache(d)},getInterstitialAsinsData:function(){return this._interstitialAsinsData},getInterstitialProducts:function(){return this._interstitialProducts},getScheduledAsinFromVariationAsin:function(d){return this._scheduledAsins[d]},getVariationAsinsFromScheduledAsin:_buildScheduledAsinCache:function(d){this._scheduledAsins={};this._scheduledVariationsAsins={};this._interstitialProducts={};for(var a in d)if(d.hasOwnProperty(a)){this._scheduledVariationsAsins[a]=
[];this._interstitialProducts[a]=d[a][a];for(var e in d[a])d[a].hasOwnProperty(e)&&(this._scheduledVariationsAsins[a].push(e),this._scheduledAsins[e]=a)}}})});"use strict";l.when("a-modal","A").register("desktop-accessory-upsell-interstitial-view",function(f,d){return d.createClass({init:render:function(a){this.$productSections.hide();a=a.asinsToShow;for(var e=0;e<a.length;e++)this._getProductSection(a[e]).show()},
getCheckedProductCheckboxes:function(){return this.$baseElement.find(".abb-intl-product-ato input[type\x3d'checkbox']:checked")},getAllVisibleProductCheckboxes:function(){return this.$baseElement.find(".abb-intl-product-ato input[type\x3d'checkbox']:visible")},getAllVisibleSelectedMessage:function(){return this.$baseElement.find(".abb-intl-product-selected-successful-message:visible")},getAllVisibleSelectButtons:function(){return this.$baseElement.find(".abb-intl-product-select-button:visible")},
getAllVisibleAddToCartButtons:_getProductSection:function(a){return this.$baseElement.find("#abb-intl-product-view-"+a+","+("#abb-intl-product-terms-"+a))}})});"use strict";l.when("desktop-accessory-upsell-ref-helper","ods-image-utilities","accessory-upsell-dom-helper","accessory-upsell-buybox-helper","MakoAmazonApiAddToCartHelper","a-modal","A").register("desktop-accessory-upsell-interstitial-controller",
function(f,d,a,e,g,v,k){function m(a){a||(a=function(){});if(b&&e.getPageAsin()&&e.getPageAsin().asin){var c=e.getPageAsin().asin;b._handleLDAtcSubmit(a,c)}}var c=k.$,b=null;return k.createClass({init:function(a,c,e){this.$baseElement=a;this._view=c;this._model=e;b=this;this.popoverInstance=v.get("abb-interstitial");this.$el;this.$clickedSubmitButton;var d=this.wasInterstitialOfferAccepted=!1;this.asinsToShow=k.map(this._model.getInterstitialProducts(),function(a,h){a.checkForInteraction&&(d=!0);
return h});this.hasCheckForInteractionAsin=d;this._bindEvents()},_bindEvents:function(){var h=this;l.when("ready").execute("accessory-upsell-interstitial-controller-bindEvents",function(){a.getSubmitButtons().forEach(function(a){0<=a.selector.indexOf("input#add-to-cart-button")||0<=a.selector.indexOf("input#one-click-button")&&h.hasCheckForInteractionAsin||0<=a.selector.indexOf("input#buy-now-button")&&h.hasCheckForInteractionAsin?a.bind("click",c.proxy(h._handleAtcSubmit,h)):0<=a.selector.indexOf("#LDBuybox *[id^\x3dgb_atc_]")&&
(k.off("deals_claimDealSuccess",m),k.on("deals_claimDealSuccess",m))})})},_handleAtcSubmit:function(a){if(c("#abb-interstitial").length){this.$clickedSubmitButton=c(a.target);var b=this._getInterstitialAsinsToShow();if(0<b.length){a.preventDefault();this.$clickedSubmitButton.unbind("click",c.proxy(this._handleAtcSubmit,this));for(var d=0;d<b.length;d++)f.sendInterstitialDisplayed(-1,b[d]),0===c("#abb-product-better-together-message-"+b[d]).length&&b[d]!==e.getPageAsin().asin&&f.sendInterstitialBetterTogetherMessageNotAvailable(-1,
b[d]);c("#abb-intl-product-select-button").length?this._displaySelectButtonOrATCButton(a,!1):this._displayCheckBoxOrATCButtons(a,!1);this._showIntlPopover.apply(this)}}else l.log("Interstitial popover PreloadContent is not found in regular buybox","FATAL")},_handleLDAtcSubmit:function(h,b){if(b!==a.parsePageAsinData().asin)l.log("ASIN added to cart and Page ASIN are different.","WARN");else if(c("#abb-interstitial").length){b=this._getInterstitialAsinsToShow();if(0<b.length){for(var d=0;d<b.length;d++)f.sendInterstitialDisplayed(-1,
b[d]);c("#abb-intl-product-select-button").length?this._displaySelectButtonOrATCButton(h,!0):this._displayCheckBoxOrATCButtons(h,!0);this._showIntlPopover.apply(this)}var q=e.getUpsellAsins();if(q.length){try{var n=k.state("abbCartAPIParametersMap"),m=g.createRequest(n.csrfToken,n.marketplaceId,n.aapiAjaxEndpoint);m.setAsinDataList(q);m.setRefTag("mars_ajax_dabb_atc");m.sendRequest(function(h){for(var c=0;c<q.length;c++){var b=e.getProductData(q[c].asin);f.sendLightningDealsABBAddToCartSuccessful(-1,
b.asin,b.isAutomated)}a.updateCartQuantity(h.entity.count.entity.items);f.sendCartAPIRequestSuccessful(-1,"");h=a.getLightningDealElements();a.getDomElements().abbContainer.find(".abb-option-checkbox input").prop("checked",!1);h.successMessageCount.text(q.length);1<q.length?h.successMessageMultiple.removeClass("aok-hidden"):h.successMessageSingle.removeClass("aok-hidden");h.successMessageContainer.removeClass("aok-hidden")},function(){l.log("An error has occurred with Cart API","FATAL");f.sendCartAPIRequestFailure(-1,
"")})}catch(u){l.log("Adding accessories to cart failed from ABB on Deals ASIN","FATAL")}e.resetUpsellData()}}else l.log("Interstitial popover PreloadContent is not found in LD buybox","FATAL")},_getInterstitialAsinsToShow:function(){for(var a=[],c=e.getUpsellAsins(),c=this.getParentAsins(c),b=0;b<this.asinsToShow.length;b++){var d=this.asinsToShow[b],g=this._model.getScheduledAsinFromVariationAsin(d),f=this._model.getInterstitialAsinsData()[g][d];f.checkForInteraction?f.hasBeenInteractedWith||(a.push(d),
this.autoCheckInterstitial=!0):-1===c.indexOf(g)&&a.push(d)}return this.asinsToShow=a},_showIntlPopover:function(){k.off("a:popover:beforeShow:abb-interstitial");k.off("a:popover:show:abb-interstitial");k.off("a:popover:hide:abb-interstitial");k.on("a:popover:beforeShow:abb-interstitial",c.proxy(this._popoverBeforeShow,this));k.on("a:popover:show:abb-interstitial",c.proxy(this._popoverOnShow,this));k.on("a:popover:hide:abb-interstitial",c.proxy(this._popoverOnHide,this));this.popoverInstance.show();
f.addCountMetric("DesktopMarsABBInterstitialCount")},_popoverBeforeShow:_popoverOnShow:function(a){this.$el=a.popover.$popover;c("#abb-intl-product-select-button").length?this.$el.delegate(".abb-intl-ato","click",c.proxy(this._handleIntlSelectCXAddToOrderClick,this)):this.$el.delegate(".abb-intl-ato","click",c.proxy(this._handleIntlAddToOrderClick,this));this.$el.delegate(".abb-intl-decline","click",c.proxy(this._handleIntlDeclineClick,
this));this.$el.delegate(".abb-intl-continue","click",c.proxy(this._handleIntlDeclineClick,this));this.$el.delegate(".a-button-close","click",c.proxy(this._handleIntCloseButtonClick,this));this.$el.delegate(".abb-intl-product-ato input[type\x3d'checkbox']","change",c.proxy(this._handleSelectedItemsChange,this));this.$el.delegate(".abb-intl-product-atc","click",c.proxy(this._handleAccessoryAddToCartClick,this));this.$el.delegate(".abb-intl-product-atc-try-again","click",c.proxy(this._handleAccessoryAddToCartClick,
this));this.$el.delegate(".abb-product-subscription-see-more-link","click",c.proxy(this._onSeeMoreClick,this));this.$el.delegate(".abb-product-subscription-see-less-link","click",c.proxy(this._onSeeLessClick,this));this.$el.delegate("#abb-intl-product-select-button","click",c.proxy(this._onSelectClick,this));this.$el.delegate(".abb-intl-product-delete","click",c.proxy(this._onDeleteClick,this));1==this._getInterstitialAsinsToShow().length&&this.autoCheckInterstitial&&this.$el.find(".abb-intl-product-ato input[type\x3d'checkbox']").prop("checked",
!0);this._updateItemCounters();c(".abb-intl-product-view:visible").length||l.log("Will show an empty popover Interstitial","FATAL")},_popoverOnHide:function(a){this._view.getAllVisibleAddToCartButtons().each(function(){var a=c(this).data("asin");f.sendInterstitialItemUnchecked(-1,a)});this.wasInterstitialOfferAccepted||f.sendInterstitialOfferDeclined(-1,"");this.$clickedSubmitButton&&this.$clickedSubmitButton.click()},_lazyLoadImages:function(){c(".abb-sources").length&&(c(".abb-product-view-image-container").each(function(){var a=
c(this).find(".abb-product-image"),b=c(this).find(".abb-sources"),e=c(b).attr("data-normalres")||c(b).attr("data-normalRes"),b=c(b).attr("data-highres")||c(b).attr("data-highRes");a.attr("src",e);a.attr("data-a-hires",b)}),k.loadHiResImage(c(".abb-product-image")))},_resetInterstitalInteractedElements:function(){c(".abb-intl-atc-spinner").hide();c(".abb-intl-atc-successfully").hide();c(".abb-intl-product-inCart-message").hide();c(".abb-intl-atc-successfully-icon").hide();c(".abb-intl-atc-error").hide();
c(".abb-intl-product-atc-try-again").hide();c(".abb-intl-atc-successfully-quantity").remove();var h=a.getInterstitialCTAButtons();h.continueButton.hide();h.addSelectedButton.hide();h.declineButton.show()},_handleIntCloseButtonClick:_handleSelectedItemsChange:function(c){this.wasInterstitialOfferAccepted=0<this._view.getCheckedProductCheckboxes().length;c=a.getInterstitialCTAButtons();this.wasInterstitialOfferAccepted?(c.addSelectedButton.css("display",
"inline-block"),c.declineButton.hide()):(c.addSelectedButton.hide(),c.declineButton.css("display","inline-block"))},_handleIntlAddToOrderClick:function(b){b=this._view.getAllVisibleProductCheckboxes();var d=parseInt(a.getPageQuantityDropdown().val()||1,10);b.each(function(a,b){a=c(this).closest(".abb-intl-product-ato").data("asin");b=e.getProductData(a);if(!b)return!0;c(this).is(":checked")?(e.addUpsellAsin(a,b.offerListingID,d),f.sendInterstitialItemAdded(-1,a,b.isAutomated)):(e.removeUpsellAsin(a,
b.offerListingID),f.sendInterstitialItemUnchecked(-1,a,b.isAutomated))});this.popoverInstance.hide()},_handleIntlSelectCXAddToOrderClick:function(b){b=this._view.getAllVisibleSelectedMessage();var d=this._view.getAllVisibleSelectButtons(),g=parseInt(a.getPageQuantityDropdown().val()||1,10);b.each(function(a,b){a=c(this).closest(".abb-intl-product-selected-successful-message").data("asin");b=e.getProductData(a);if(!b)return!0;e.addUpsellAsin(a,b.offerListingID,g);f.sendInterstitialItemAdded(-1,a,b.isAutomated)});
d.each(function(a,b){a=c(this).closest("#abb-intl-product-select-button").data("asin");b=e.getProductData(a);if(!b)return!0;e.removeUpsellAsin(a,b.offerListingID);f.sendInterstitialItemUnchecked(-1,a,b.isAutomated)});this.popoverInstance.hide()},_showContinue:function(b){b=a.getInterstitialCTAButtons();b.continueButton.css("display","inline-block");b.declineButton.hide()},_handleAccessoryAddToCartClick:function(a){var b=this,d=c("input[name\x3d'gift-wrap']").is(":checked");c(a.currentTarget).hide();
c(a.target).closest(".a-section").find(".abb-intl-atc-error").hide();c(a.target).closest(".a-section").find(".abb-intl-product-atc-try-again").hide();c(a.target).closest(".a-section").find(".abb-intl-atc-successfully-icon").hide();c(a.target).closest(".a-section").find(".abb-intl-product-inCart-message").hide();c(a.target).closest(".a-section").find(".abb-intl-product-atc").hide();c(a.target).closest(".a-section").find(".abb-intl-atc-successfully-quantity").hide();c(a.target).closest(".a-section").find(".abb-intl-atc-successfully-quantity").remove();
c(a.target).closest(".a-row").find(".abb-intl-atc-spinner").css("display","inline-block");var f=a.currentTarget.firstChild.firstChild.dataset.asin,n=e.getProductData(f),d={asin:f,offerId:n.offerListingID,quantity:1,isToBeGiftWrapped:d.toString()};try{var m=k.state("abbCartAPIParametersMap"),u=g.createRequest(m.csrfToken,m.marketplaceId,m.aapiAjaxEndpoint);u.addSingleAsinData(d);u.setRefTag("mars_ajax_intl_atc");r.setTimeout(2E3)}catch(w){l.log("An exception occurred when fetching parameters for cart API"+
w,"ERROR"),b._onAccessoryAddFailure(a,f)}},_onSendingCartRequest:function(a,b,c,d){var e=this;b.sendRequest(function(b){f.sendCartAPIRequestSuccessful(-1,"");e._onAccessoryAddSuccess(a,b,c);e._showContinue(a)},function(){f.sendCartAPIRequestFailure(-1,"");e._onAccessoryAddFailure(a,d)})},_onSeeMoreClick:function(a){c(a.target).closest(".a-section").find("#abb-product-terms-conditions-short-terms-conditions").hide();c(a.target).closest(".a-section").find("#abb-product-terms-conditions-long-terms-conditions").css("display",
"inline-block")},_onSeeLessClick:function(a){c(a.target).closest(".a-section").find("#abb-product-terms-conditions-long-terms-conditions").hide();c(a.target).closest(".a-section").find("#abb-product-terms-conditions-short-terms-conditions").css("display","inline-block")},_onSelectClick:function(a){c(a.target).closest(".a-section").find("#abb-intl-product-select-button").hide();c(a.target).closest(".a-section").find(".abb-intl-product-select-button-clicked").css("display","inline-block");this._handleSelectDeleteChange()},
_onDeleteClick:function(a){c(a.target).closest(".a-section").find(".abb-intl-product-select-button-clicked").hide();c(a.target).closest(".a-section").find("#abb-intl-product-select-button").css("display","inline-block");this._handleSelectDeleteChange()},_handleSelectDeleteChange:function(b){this.wasInterstitialOfferAccepted=0<this._view.getAllVisibleSelectedMessage().length;b=a.getInterstitialCTAButtons();this.wasInterstitialOfferAccepted?(b.addSelectedButton.css("display","inline-block"),b.declineButton.hide()):
(b.addSelectedButton.hide(),b.declineButton.css("display","inline-block"))},_onAccessoryAddSuccess:function(b,d,e){this.wasInterstitialOfferAccepted=!0;var g=d.entity.items[0].quantity,k=e.maxOrderQuantity;c(b.target).closest(".a-row").find(".abb-intl-atc-spinner").hide();c(b.target).closest(".a-row").find(".abb-intl-atc-successfully-icon").css("display","inline-block");c(b.target).closest(".a-section").find(".abb-intl-atc-successfully-quantity").remove();if(k){if(0!=k){var m='\x3cdiv class \x3d "abb-intl-atc-successfully-quantity "\x3e'+
g+"\x3c/div\x3e";c(b.target).closest(".a-row").find(".abb-intl-product-inCart-message").before(m)}c(b.target).closest(".a-row").find(".abb-intl-product-inCart-message").css("display","inline-block");g<k&&c(b.target).closest(".a-row").find(".abb-intl-product-atc").css("display","inline-block")}else c(b.target).closest(".a-row").find(".abb-intl-product-inCart-message").before('\x3cdiv class \x3d "abb-intl-atc-successfully-quantity "\x3e1\x3c/div\x3e'),c(b.target).closest(".a-row").find(".abb-intl-product-inCart-message").css("display",
"inline-block");f.sendInterstitialAddToCartSuccessful(-1,e.asin,e.isAutomated);a.updateCartQuantity(d.entity.count.entity.items)},_onAccessoryAddFailure:function(a,b){c(a.target).closest(".a-row").find(".abb-intl-atc-spinner").hide();c(a.target).closest(".a-section").find(".abb-intl-atc-error").css("display","inline-block");c(a.target).closest(".a-section").find(".abb-intl-product-atc-try-again").css("display","inline-block");f.sendInterstitialAddToCartFailure(-1,b);l.log("Accessory add to cart failed in Interstitial",
"FATAL")},_displayCheckBoxOrATCButtons:function(b,c){b=a.getProductButtonsAndCheckboxes();c?(b.addToCart.css("display","inline-block"),b.checkbox.hide()):(b.checkbox.css("display","inline-block"),b.addToCart.hide())},_displaySelectButtonOrATCButton:function(b,c){b=a.getSelectAndATCButtons();c?(b.addToCart.css("display","inline-block"),b.selectButton.hide()):(b.selectButton.css("display","inline-block"),b.addToCart.hide())},_handleIntlDeclineClick:
_generateViewModel:_updateItemCounters:function(){var a=c(".abb-intl-product-view:visible").length,b=c(".abb-interstitial").closest(".a-popover-wrapper").find(".a-popover-header-content").last();b.text(b.text().replace("$totalItems",a));c(".abb-product-total").text(a);c(".abb-intl-product-view:visible .abb-product-index").each(;c(".abb-intl-product-view:visible").eq(0).addClass("abb-intl-first-accessory")},loadInitialImages:
renderView:getParentAsins:function(a){for(var b=[],c=0;c<a.length;c++){var d=this._model.getScheduledAsinFromVariationAsin(a[c].asin);b.push(d)}return b},_csmRegisterWeblab:)});"use strict";l.when("odsRefTagUtils","accessory-upsell-buybox-helper","csmCounter","A").register("desktop-accessory-upsell-ref-helper",function(f,d,a,e){function g(a,b,e,g){var p=d.getPageAsin().asin;p&&p.length&&(a=("ods_dabb_"+
p+"_slot{{index}}_{{asin}}_{{action}}"+(g?"_automated":"")).replace(l,a).replace(k,b).replace(m,e),f.send(a))}var l=/{{\s?index\s?}}/ig,k=/{{\s?asin\s?}}/ig,m=/{{\s?action\s?}}/ig;return{sendAsinScheduled:function(a,b,d){g(a,b,"asinScheduled",d)},sendCheckboxSelected:function(a,b,d){g(a,b,"checkoxSelected",d)},sendCheckboxDeselected:function(a,b,d){g(a,b,"checkoxDeselected",d)},sendSecondaryViewDisplayed:function(a,b){g(a,b,"secondaryViewDisplayed")},sendSecondaryViewTwisted:function(a,b){g(a,b,"secondaryViewTwisted")},
sendSecondaryViewCancelled:function(a,b){g(a,b,"secondaryViewCancelled")},sendPopoverDisplayed:function(a,b){g(a,b,"popoverDisplayed")},sendPopoverTwisted:function(a,b){g(a,b,"popoverTwisted")},sendPopoverCancelled:function(a,b){g(a,b,"popoverCancelled")},sendAddToOrderClicked:function(a,b){g(a,b,"addToOrderClicked")},sendInterstitialDisplayed:function(a,b){g(a,b,"interstitialDisplayed")},sendInterstitialItemAdded:function(a,b,d){g(a,b,"interstitialItemAdded",d)},sendInterstitialItemUnchecked:function(a,
b,d){g(a,b,"interstitialItemUnselected",d)},sendInterstitialOfferDeclined:function(a,b){g(a,b,"interstitialOfferDeclined")},sendInterstitialCloseButtonClicked:function(a,b){g(a,b,"interstitialCloseButtonClicked")},sendUpdateClicked:function(a,b){g(a,b,"updateClicked")},sendInterstitialAddToCartSuccessful:function(a,b,d){g(a,b,"intATC",d)},sendLightningDealsABBAddToCartSuccessful:sendInterstitialAddToCartFailure:function(a,b){g(a,b,"intATCFail")},sendInterstitialBetterTogetherMessageNotAvailable:function(a,
b){g(a,b,"interstitialBetterTogetherNotAvailable")},sendCartAPIRequestSuccessful:function(a,b){g(a,b,"cartApiAddItemsRequestSuccess")},sendCartAPIRequestFailure:addCountMetric:});"use strict";l.when("A").register("accessory-upsell-dom-helper",function(f){var d=f.$;return new function(){function a(a){a.each(function(){var a=d(this);a.find(".buyboxHelperHiddenFieldsContainer").length||a.append(d("\x3cdiv\x3e").addClass("buyboxHelperHiddenFieldsContainer"))});
return a.find(".buyboxHelperHiddenFieldsContainer")}function e(a,b){return d("\x3cinput\x3e").attr({type:"hidden",name:a,value:b})}function g(a,b){return d("\x3cinput\x3e").attr({type:"hidden",name:a,value:b,"class":"ATCFormUpsellAsinData"})}function f(a){a.each(function(){var a=d(this),c=a.parent("form").find('input[name\x3d"itemCount"]');b.itemCount.length&&!c.length&&a.append(b.itemCount.clone())});return a}function k(a){for(var b=document.getElementById("giftCheckBoxInput"),c=0;c<a.length;c++)d("form#addToCart").find('input[name\x3d"items['+
c+'.upsell][additionalParameters][giftOptions][includeGiftReceipt]"]').remove();if(b&&b.value)for(c=0;c<a.length;c++){var e="items["+c+".upsell][additionalParameters][giftOptions][includeGiftReceipt]";d("form#addToCart").append(g(e,b.value)[0])}}function m(a,b,c){if(b){var d=1,g;for(g in b)a.appendChild(e("custom-name."+c+"."+d,g)[0]),a.appendChild(e("custom-value."+c+"."+d,b[g])[0]),d+=1}}ar b={};return{processMarkupForDabb:function(){var a=d("#accessory-upsell");
a.find(".abb-option-checkbox input[type\x3d'checkbox']").removeAttr("name").removeAttr("value");a.find('input[name^\x3d"asin."]').remove();a.find('input[name^\x3d"offeringID."]').remove();a.find('input[name^\x3d"quantity."]').remove()},parsePageAsinData:function(){b.abbContainer=d("#accessory-upsell");b.itemCount=b.abbContainer.find('input[name\x3d"itemCount"]');b.buyboxForm=d("form#addToCart");b.atcForms=d('#buybox form:has(input[name\x3d"ASIN"])');b.formSessionIdInput=b.buyboxForm.find("input#session-id");
b.formSessionIdInput.length||(b.formSessionIdInput=d("#verificationSessionID"));b.submitButton=b.buyboxForm.find('input#add-to-cart-button[name\x3d"submit.add-to-cart"]');b.installmentsSubmitButton=b.buyboxForm.find('input#installments-button[name\x3d"submit.installments"]');b.oneClickSubmitButton=b.buyboxForm.find('input#one-click-button[name\x3d"submit.one-click-order.x"]');b.buyNowSubmitButton=b.buyboxForm.find('input#buy-now-button[name\x3d"submit.buy-now"]');b.lightningDealSubmitButton=b.buyboxForm.find("#LDBuybox *[id^\x3dgb_atc_]");
b.pageAsinInput=b.buyboxForm.find('input[type\x3d"hidden"][name\x3d"ASIN"]');b.pageOfferIdInput=b.buyboxForm.find('input[type\x3d"hidden"][name\x3d"offerListingID"]');b.pageQuantityDropdown=b.buyboxForm.find('select[name\x3d"quantity"]');b.giftCheck=b.buyboxForm.find('input[name\x3d"gift-wrap"]');b.ldAddSuccessMessageContainer=b.buyboxForm.find("#abb-add-success-message");b.ldAddSuccessCount=b.buyboxForm.find("#abb-add-success-message-count");b.ldAddSuccessSingleMessage=b.buyboxForm.find("#abb-add-single-message");
b.ldAddSuccessMultipleMessage=b.buyboxForm.find("#abb-add-multiple-message");b.ldWaitlistMessage=b.buyboxForm.find("#abb-waitlist-message");b.hiddenFieldsContainers=a(b.atcForms);b.intlAtoSubmitButon=d(".abb-intl-ato");b.intlDeclineButton=d(".abb-intl-decline");b.productCheckbox=d(".abb-intl-product-ato");b.addSelectedButton=d(".abb-intl-add-selected");b.productSelectButton=d(".abb-intl-product-select-button");b.productAddToCart=d(".abb-intl-product-atc");b.continueButton=d(".abb-intl-continue");
b.cartQuantity=d(".nav-cart-count");var c=b.pageAsinInput.val(),e=b.pageOfferIdInput.val(),g=b.pageQuantityDropdown.val()&&b.pageQuantityDropdown.val().trim()?parseInt(b.pageQuantityDropdown.val().trim(),10):1;return{asin:c,offerId:e,quantity:g}},getSubmitButtons:getPageQuantityDropdown:function(){return b.pageQuantityDropdown},renderUpsellAsinsHiddenInputs:function(a){if(b.hiddenFieldsContainers.length){c();
var g=d('input#add-to-cart-button[name\x3d"submit.add-to-cart"]').closest("form"),k=g.find('input[type\x3d"hidden"][name^\x3d"offeringID"]').length,l=new Set;0<k&&g.find('input[type\x3d"hidden"][name^\x3d"offeringID"]').each(function(){var a=d(this).attr("name");a&&(a=a.slice(11),l.add(parseInt(a)))});for(var n=document.createDocumentFragment(),g=!1,t=0;t<a.length;t++){var u=a[t],w=t+1;if(l.has(w)||g)w=k+t+1,g=!0,t===a.length-1&&(w=k+t+2);n.appendChild(e("asin."+w,u.asin)[0]);n.appendChild(e("offeringID."+
w,u.offerId)[0]);n.appendChild(e("quantity."+w,u.quantity)[0]);if(u.isDigitalSubscription){var z=u.fixedCustomCartAttribute?w:w+1;n.appendChild(e("custom-name."+z+".1",u.customAttributeName)[0]);n.appendChild(e("custom-value."+z+".1",u.customAttributeValue)[0])}m(n,u.productLineItemCustomKeyValuePair,"1");m(n,u.upsellLineItemCustomKeyValuePair,w+1)}b.hiddenFieldsContainers.each(function(){d(this).append(n.cloneNode(!0))});f(b.hiddenFieldsContainers)}},removeUpsellAsinsHiddenInputs:c,updateUpsellAsinsQuantityInputs:function(a){b.hiddenFieldsContainers.find('input[type\x3d"hidden"][name^\x3d"quantity."]').each(},getDomElements:getHiddenFieldsContainer:function(){return b.hiddenFieldsContainers},getBuyboxFormSessionID:function(){return b.formSessionIdInput},getLightningDealElements:function(){return{waitlistMessage:b.ldWaitlistMessage,successMessageContainer:b.ldAddSuccessMessageContainer,successMessageContainerSelector:"#abb-add-success-message",successMessageSingle:b.ldAddSuccessSingleMessage,successMessageMultiple:b.ldAddSuccessMultipleMessage,successMessageCount:b.ldAddSuccessCount}},
reset:getInterstitialCTAButtons:getProductButtonsAndCheckboxes:function(){return{checkbox:b.productCheckbox,addToCart:b.productAddToCart}},getSelectAndATCButtons:updateCartQuantity:renderNatcUpsellAsinHiddenInputs:function(a){d(".ATCFormUpsellAsinData").remove();
for(var c=document.createDocumentFragment(),e=0;e<a.length;e++){var f=a[e];c.appendChild(g("items["+e+".upsell][asin]",f.asin)[0]);c.appendChild(g("items["+e+".upsell][offerListingId]",f.offerId)[0]);c.appendChild(g("items["+e+".upsell][quantity]",f.quantity)[0])}b.buyboxForm.append(c);k(a)},updateSelectedAsinsGiftCheck:k,getGiftWrapUpdate:}});"use strict";l.when("A","ODSEventDispatcher","accessory-upsell-dom-helper").register("accessory-upsell-buybox-helper",function(f,
d,a){var e=f.$;return new function(){unction l(a){var b=p[a];return b?h[b][a]:x}function k(a,b,c){if("string"!==typeof a||0===a.length)throw new TypeError('The "asin" argument must be defined.');c="number"===typeof c?Math.max(1,c):1;var d=!q||f.objectIsEmpty(q);q={asin:a,offerId:b,quantity:c||1};t.dispatch(d?"PageAsinAdded":"PageAsinChanged",a,b,c)}function m(a,b,c){var d;a:{if(!q||q.asin!==a)for(d=0;d<n.length;d++)if(n[d].asin===a&&(!b||n[d].offerId===b))break a;d=-1}if(0<=
d){var e=n[d],g=e.quantity;if(g===c)return!1;0===c?(n.splice(d,1),t.dispatch("UpsellAsinRemoved",a,b,c,g)):(e.quantity=c,t.dispatch("UpsellAsinChanged",a,b,c,g))}else-1===d&&0<c&&(d=l(a),n.push({asin:a,offerId:b,quantity:c,fixedCustomCartAttribute:d.isDigitalSubscription?d.fixedCustomCartAttribute:null,customAttributeValue:d.isDigitalSubscription?d.customAttributeValue:null,customAttributeName:d.isDigitalSubscription?d.customAttributeName:null,isDigitalSubscription:d.isDigitalSubscription,productLineItemCustomKeyValuePair:d.productLineItemCustomKeyValuePair,
upsellLineItemCustomKeyValuePair:d.upsellLineItemCustomKeyValuePair}),t.dispatch("UpsellAsinAdded",a,b,c))}function c(){return f.copy(q)}ar h,r={},p={},q={},n=[],t=new d;(function(){e.each(["PageAsinAdded","PageAsinChanged","UpsellAsinAdded","UpsellAsinChanged","UpsellAsinRemoved"],e.proxy(function(a,b){this["register"+b]=e.proxy(t,"registerCallback",b);this["unregister"+b]=e.proxy(t,"unregisterCallback",b)},this))}).apply(this);this.registerAccessoryUpsellData=function(a){h=
a;for(var b in h)if(h.hasOwnProperty(b)){a=h[b];r[b]=[];for(var c in a)a.hasOwnProperty(c)&&(r[b].push(c),p[c]=b)}};this.getParentAsin=this.getChildAsins=g;this.getProductData=l;this.parsePageAsin=function(){var b=a.parsePageAsinData();k(b.asin,b.offerId,b.quantity)};this.setPageAsin=k;this.addUpsellAsin=function(b,c,d){if("string"!==typeof b||0===b.length)throw new TypeError('The "asin" argument must be defined.');if(q&&q.asin===b)throw Error("Can not modify page asin.");
d="number"===typeof d?Math.max(1,d):1;for(var e=g(b),f=0;f<e.length;f++){var h=e[f];h!==b&&m(h,"",0)}m(b,c||"",d);a.renderUpsellAsinsHiddenInputs(n);a.renderNatcUpsellAsinHiddenInputs(n)};this.removeUpsellAsin=function(b,c){m(b,c||"",0);a.renderUpsellAsinsHiddenInputs(n);a.renderNatcUpsellAsinHiddenInputs(n)};this.getPageAsin=c;this.getUpsellAsins=b;this.getAsins=function(){var a=c(),d=b();return[a].concat(d)};this.updateSelectedAsinsQuantity=function(b){if(isNaN(b)||1>b)throw Error("New quantity for upsell asins must be greater than 0.");
q.quantity=b;for(var c=0;c<n.length;c++)n[c].quantity=b;a.updateUpsellAsinsQuantityInputs(b);a.renderNatcUpsellAsinHiddenInputs(n)};this.reset=function(){r={};p={};q={};n=[];a.reset()};this.resetUpsellData=this.updateGiftCheck=});"use strict";l.when("A","odsRefTagUtils").register("upsell-ref",function(f,d){var a=f.$;return f.createClass({init:function(e){e.delegate("input[type\x3dcheckbox]","change",function(){var e=a(this),f=e.is(":checked")?
"checkboxSelected":"checkboxDeselected",e=e.parents(".a-checkbox").data("ref");d.send(e+"_"+f)})}})});"use strict";l.when("A").register("ld-upsell",function(f){var d=f.$;return f.createClass({init:function(a){a.find("input[type\x3dcheckbox]").is(":checked")&&this.addToCart(a)},addToCart:function(a){var e={clientName:"AmazonDevices",verificationSessionID:d("#session-id").val()},g=0;a.find("input[type\x3dcheckbox]:checked").each(function(a){var f=d(this).closest(".abbListItem");if(f){var c=f.find('input[name^\x3d"asin."]').val(),
b=f.find('input[name^\x3d"offeringID."]').val(),f=f.find('input[name^\x3d"quantity."]').val();e["ASIN."+a]=c;e["offerListingID."+a]=b;e["quantity."+a]=f;g+=1;d("#selected-itemCount").val(g)}});var f=d.ajax({url:"/gp/add-to-cart/json/ref\x3dldabb",type:"POST",data:e});f.done(function(e){e=d("#ld-success-msg");e.find("#ld-count").html(g);1<g?e.find("#ld-accessories").removeClass("aok-hidden"):e.find("#ld-accessory").removeClass("aok-hidden");e.removeClass("aok-hidden");d(a).find("fieldset").hide()});
f.fail(}})})});
/* ******** */
(function(b){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,a=e?e("DetailPageJumpLinksAssets",""):d;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,d,e){b.when("A","ready").execute("jump-links",function(a){var f=a.$,b=!1;f("#jump-links a").each(function(){if(!f(this.hash).length)return b=!0,!1});if(!b){f("body").addClass("jump-links-targets-exist");var e=d.ue;a.declarative("jump-links-click","click",function(c){var a=c.$target[0].hash,
b=f(a).offset().top;c="jump-links-count_"+c.$target[0].id;var g=e.count(c)||0;e.count(c,g+1);d.history.pushState?d.history.pushState(null,null,a):(c=f(a),g=c.attr("id"),c.removeAttr("id"),d.location.hash=a,c.attr("id",g));f("html, body").stop().animate({scrollTop:b},500)})}})});
/* ******** */
(function(c){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,a=e?e("DetailPageGiftingOptionAssets",""):d;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,d,e){c.when("csmCounter","A").execute(function(a,b){function c(){var b=d("#gift-wrap");b.length&&(b=b.is(":checked"),a.update("dpGiftingSelected",b?1:0))}var d=b.$;d("#add-to-cart-button, #buy-now-button, #one-click-button").each(});
"use strict";c.when("A").execute(});
/* ******** */
(function(c){var a=window.AmazonUIPageJS||window.P,e=a._namespace||a.attributeErrors,d=e?e("MakoCommonMetricAssets",""):a;d.guardFatal?d.guardFatal(c)(d,window):d.execute(function(){c(d,window)})})(;
/* ******** */
(function(l){var m=window.AmazonUIPageJS||window.P,n=m._namespace||m.attributeErrors,g=n?n("DetailPagePreRegistrationAssets",""):m;g.guardFatal?g.guardFatal(l)(g,window):g.execute(function(){l(g,window)})})(;
/* ******** */
(function(d){var b=window.AmazonUIPageJS||window.P,f=b._namespace||b.attributeErrors,c=f?f("DetailPageQRMAssets",""):b;c.guardFatal?c.guardFatal(d)(c,window):c.execute(function(){d(c,window)})})(;
/* ******** */
(function(c){var l=window.AmazonUIPageJS||window.P,p=l._namespace||l.attributeErrors,d=p?p("MakoShadowCartAssets",""):l;d.guardFatal?d.guardFatal(c)(d,window):d.execute(function(){c(d,window)})})(function(c,l,p){c.declare("Mako.ShadowCart.Experiments",{EventCycleOrderEnforcement:!0});c.when("A").register("Mako.ShadowCart.Helpers",function(d){unction h(b,d){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);
return b.matches(d)}return{arrayFrom:e,elementMatches:h,keysAsEnum:function(){or(var g=e(arguments),a=0,f={};a<g.length;a++)f=d.reduce(Object.keys(g[a]),b,f);return f},selectorMapReducer:function(b,d){return function(a,f){b.hasOwnProperty(f)&&h(d,b[f])&&(a=f);return a}}}});c.declare("Mako.ShadowCart.Selectors",{AddToCartButton:"#add-to-cart-button",BuyBox:"#buybox",BuyNowButton:"#buy-now-button",DesktopRightColumn:"#rightCol",DesktopBuybox:"#desktop_buybox",InstallmentButton:"#installments-button",
LightningDealButton:"#goldboxBuyBox button",MobileAppBuybox:"#mobileapp_buybox_feature_div",MobileWebBuybox:"#mobile_buybox_feature_div",PreOwnedCrossSellButton:"span#preOwnedCrossSellCertRefurb-addToCart input",UsedDesktopButton:"#add-to-cart-button-ubb",UsedMobileButton:"#add-to-cart-button-ubb-mobile"});c.declare("Mako.ShadowCart.EventNames",{AtcIntention:"shadowcart:atc:intention",AtcSubmitted:"shadowcart:atc:submitted",AuiMashAtc:"dpx:add-to-cart:success",MakoCommonCartRequestComplete:"mako:common-cart-request:complete"});
c.when("A","Mako.ShadowCart.Selectors","Mako.ShadowCart.Helpers").register("Mako.ShadowCart.Checkout",function(d,e,h){var b={BuyNow:e.BuyNowButton,AddToCart:e.AddToCartButton,Installment:e.InstallmentButton,UsedDesktop:e.UsedDesktopButton,UsedMobile:e.UsedMobileButton,PreOwnedCrossSell:e.PreOwnedCrossSellButton,LightningDeal:e.LightningDealButton};return{Types:h.keysAsEnum(b,{Unknown:"Unknown"}),getTypeByClickTarget:function(e){return e?d.reduce(Object.keys(b),h.selectorMapReducer(b,e),"Unknown"):
"Unknown"}}});c.when("A","Mako.ShadowCart.Selectors","Mako.ShadowCart.Helpers").register("Mako.ShadowCart.Cbb",function(d,e,h){var b,g={MobileWebBuybox:e.MobileWebBuybox,MobileAppBuybox:e.MobileAppBuybox,DesktopBuybox:e.DesktopBuybox};return{Types:h.keysAsEnum(g,{Unknown:"Unknown"}),getType:function(){var a;(a=b)||(a=(a=document.querySelector(e.BuyBox))&&a.parentElement?d.reduce(Object.keys(g),h.selectorMapReducer(g,a.parentElement),"Unknown"):"Unknown");return b=a}}});c.register("Mako.ShadowCart.MetricsVars",
function(){return{UeCountIncrement:1,Suffixes:{ForBeginKey:":bb",ForEndKey:":be",ForPerformanceMeasureKey:":performance"},Keys:{AtcIntention:"shadowcart:atc-intention",AtcSubmitted:"shadowcart:atc-submitted",PreAtcEventQueue:"shadowcart:pre-atc-events",PostAtcEventQueue:"shadowcart:post-atc-events",IntentionToSubmission:"shadowcart:atc-intention-submitted"}}});c.when("Mako.ShadowCart.MetricsVars").register("Mako.ShadowCart.Metrics",function(d){function e(a,b){return"string"===typeof a?a.replace(b,
"")+b:null}function h(a,b){b=b||d.UeCountIncrement;l.ue&&l.ue.count&&l.ue.count(a,b)}var b=l.performance,g=!!(b&&b.mark&&b.measure&&b.getEntriesByName);return{markCount:h,markPerformanceBegin:function(a){(a=e(a,d.Suffixes.ForBeginKey))&&g&&b.mark(a)},markPerformanceEnd:function(a){var f=e(a,d.Suffixes.ForEndKey);if(f&&g){b.mark(f);var c=e(a,d.Suffixes.ForBeginKey);a=e(a,d.Suffixes.ForPerformanceMeasureKey);c&&f&&a&&(b.measure(a,c,f),f=b.getEntriesByName(a),0<f.length&&(f=f.pop())&&h(a,f.duration))}}}});
c.when("A","Mako.ShadowCart.Cbb","Mako.ShadowCart.Checkout","Mako.ShadowCart.EventNames","Mako.ShadowCart.Experiments","Mako.ShadowCart.Metrics","Mako.ShadowCart.MetricsVars").register("Mako.ShadowCart.CaptureAtcIntention",function(d,e,h,b,g,a,f){function c(r){return function(c){if(g.EventCycleOrderEnforcement){r.stopListening();var n=c.target,k=c.currentTarget}else n=c.target||null,k=c.currentTarget||null;if(n&&k){var q=h.getTypeByClickTarget(n);if(q!==h.Types.Unknown){a.markPerformanceBegin(f.Keys.IntentionToSubmission);
a.markCount(f.Keys.AtcIntention);a.markCount(f.Keys.AtcIntention+":"+q.toLowerCase());if(g.EventCycleOrderEnforcement)k=d.$(n).closest("form"),k=k.length?k[0]:null;else a:{for(var m=n.parentElement;m&&m!==k;m=m.parentElement)if("form"===m.nodeName.toLowerCase()){k=m;break a}k=null}m=e.getType();c={captureInstance:r,cbbType:m,checkoutButton:n,checkoutType:q,event:c,form:k};l(c,k,[b.AuiMashAtc,b.MakoCommonCartRequestComplete]);d.trigger(b.AtcIntention,c)}}}}function l(c,e,h){var k=function(){a.markPerformanceEnd(f.Keys.IntentionToSubmission);
a.markCount(f.Keys.AtcSubmitted);a.markCount(f.Keys.AtcSubmitted+":"+c.checkoutType.toLowerCase());d.trigger(b.AtcSubmitted,c);e&&e.removeEventListener("submit",k);d.each(h,function(a){d.off(a,k)});g.EventCycleOrderEnforcement&&c.captureInstance.startListening()};e&&e.addEventListener("submit",k);d.each(h,}return function(a){var b=c(this);this.startListening=this.stopListening=});
c.when("A","Mako.ShadowCart.CaptureAtcIntention","Mako.ShadowCart.EventNames","Mako.ShadowCart.Metrics","Mako.ShadowCart.MetricsVars","Mako.ShadowCart.Selectors").register("Mako.ShadowCart",function(d,e,c,b,g,a){function f(a){b.markPerformanceBegin(g.Keys.PreAtcEventQueue);b.markPerformanceEnd(g.Keys.PreAtcEventQueue)}function l(){b.markPerformanceBegin(g.Keys.PostAtcEventQueue);b.markPerformanceEnd(g.Keys.PostAtcEventQueue)}if(a=document.querySelector(a.DesktopRightColumn)||document.querySelector(a.BuyBox)||
null)d.on(c.AtcIntention,f),d.on(c.AtcSubmitted,l),(new e(a)).startListening()})});
/* ******** */
((function(e,f,g){e.when("A").register("installments-checkbox-module",function(a){var c=a.$,e,d,b;return a.createClass({init:function(a){a.undelegate("#installments-payment-checkbox","change",c.proxy(this._handleChange,this));a.delegate("#installments-payment-checkbox","change",c.proxy(this._handleChange,
this));e=c("#addToCart");d=c("\x3cinput\x3e").attr({type:"hidden",name:"installments-check",id:"installments-check"});b=c("#OneClickBox");c("#installments-payment-checkbox").removeAttr("disabled");c("#installments-payment-checkbox").prop("checked")&&this._checkedHandler()},_handleChange:function(a){c("#installments-payment-checkbox").prop("checked")?this._checkedHandler():this._uncheckedHandler()},_checkedHandler:function(){e.prepend(d);b&&(b.find(".a-button-stack").addClass("aok-hidden"),b.find("#installmentsQuantity").removeClass("aok-hidden"),
b.find("#diodeQuantityDropdown").addClass("aok-hidden"))},_uncheckedHandler:function(){d.remove();b&&(b.find(".a-button-stack").removeClass("aok-hidden"),b.find("#installmentsQuantity").addClass("aok-hidden"),b.find("#diodeQuantityDropdown").removeClass("aok-hidden"))}})});"use strict";e.when("A","a-carousel-framework","ready").register("family-stripe",function(a,c){function e(a,c){g.each(function(){this.id!==a+"_carousel"&&d(this).toggleClass("invisible-family-stripe",c)})}var d=a.$,b=d("#dpx-subnav_div"),
f=d("#familyStripe_feature_div"),g=f.find(".family");f.insertAfter(b);(function(){d("#mako-subnav-helper .fs-content-links").each(function(){var a=this.id;d("#"+a+"_carousel").length&&d("#"+a+"_caret_wrapper").addClass("active")})})();a.declarative("family-stripe-hover","mouseenter mouseleave",function(a){var b=a.data.code;a="mouseenter"===a.type;var g=d("#"+b+"_carousel"),h=d("#"+b+" span");h.toggleClass("a-color-state",a);h.toggleClass("a-color-base",!a);g.length&&(f.toggleClass("active-family-stripe",
a),d("#"+b).toggleClass("active-family-stripe",a),g.toggleClass("active-family-stripe",a),e(b,a));c.createAll();c.initializeAll()})});"use strict";e.when("A","odsRefTagUtils","ready").execute(function(a,c){a=a.$;0<a("[name\x3d'submit.bundlebuilder']").length&&(a="mako_bb_button_is_present_"+a("#ASIN")[0].value,c.send(a,""))})});
/* ******** */
