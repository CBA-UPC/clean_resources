"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[2855],{17012:function(e,t,i){i.d(t,{Z:function(){return g}});var n=i(57451),a=i(58467),o=i(63694),r=i(49872),l=i(8569),d=i(705),s=i(81952),u=i(85769),c=i(34049),m=i(8790),v=i(12157),p=i(90259),f=i(98744),h=i(20716),b=i(46417);function g(e){var t=e.isPublic,i=(0,o.Z)(),g=(0,h.Z)(),Z=g.deselectAll,x=g.selectedMedia,j=(0,a.UO)(),C=j.userId,w=j.albumId;return i.username?t?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(s.Z,{ids:x,isPublic:!0}),(0,b.jsx)(r.Z,{albumId:w||i.defaultAlbum,username:C,disabled:!w||i.isSlideShowDisabled}),(0,b.jsx)(v.Z,{ids:x,isDisabled:i.isBuyPrintsDisabled})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.Z,{ids:x}),(0,b.jsx)(p.Z,{ids:x,isDisabled:i.isShareDisabled,username:i.username}),(0,b.jsx)(s.Z,{ids:x}),(0,b.jsx)(c.Z,{ids:x,isDisabled:i.isFavoriteDisabled}),(0,b.jsx)(l.Z,{ids:x,deselectAllMedia:Z}),(0,b.jsxs)(n.Z,{mdDown:!0,children:[(0,b.jsx)(m.Z,{ids:x,isDisabled:i.isMoveDisabled,deselectAllMedia:Z}),(0,b.jsx)(r.Z,{albumId:w||i.defaultAlbum,username:i.username,disabled:!w||i.isSlideShowDisabled}),(0,b.jsx)(u.Z,{username:i.username,ids:x,isDisabled:i.isEditDisabled,deselectAllMedia:Z}),(0,b.jsx)(v.Z,{ids:x,isDisabled:i.isBuyPrintsDisabled}),(0,b.jsx)(f.Z,{disabled:i.isUploadDisabled})]})]}):null}g.defaultProps={isPublic:!1}},11219:function(e,t,i){i.d(t,{Z:function(){return k}});var n=i(29439),a=i(15861),o=i(64687),r=i.n(o),l=i(14281),d=i(17592),s=i(24193),u=i(47131),c=i(85582),m=i(51405),v=i(19655),p=i(47313),f=i(2135),h=i(58467),b=i(20004),g=i(28297),Z=i(91345),x=i(25258),j=i(29530),C=i(46417),w=(0,d.ZP)(s.Z)((function(){return{width:30,height:30,padding:5,borderRadius:"50%",fontWeight:800,minWidth:"inherit",background:"linear-gradient(153.66deg, #1C47CB -15.36%, #02E39F 105.31%)",color:"#fff",margin:"0 5px","&:hover":{background:"linear-gradient(153.66deg, #1C47CB -15.36%, #1C47CB 105.31%)"}}}));function I(e){var t=e.anchorEl,i=e.planId,n=e.handleClose,o=e.handleSwitch,l=e.isEmailVerified,d=function(){var e=(0,a.Z)(r().mark((function e(){var t,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,v.v0)(),e.next=4,(0,v.w7)(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),x.Z.error(e.t0);case 9:(i=new b.Z).remove("app_auth",g.ZP.cookieOptions),g.O1.forEach((function(e){return i.remove("app_auth",e)})),i.remove("facebook_dtp",g.ZP.cookieOptions),g.O1.forEach((),localStorage.removeItem("reduxPersist:auth"),localStorage.removeItem("_pb_userData:username"),n(),(0,Z.at)(null),window.location.href="/?logout=true";case 19:case"end":return e.stop()}}),e,null,[[0,6]])})));return ();return(0,C.jsxs)(c.Z,{anchorEl:t,open:Boolean(t),onClose:n,children:[(0,C.jsx)(m.Z,{onClick:o,"data-test":"appbar-dropdown-my-bucket",id:"appbar-dropdown-my-bucket",children:"My Bucket"}),!(null!==i&&void 0!==i&&i.includes("expert"))&&(0,C.jsx)(m.Z,{component:f.rU,"data-test":"appbar-dropdown-more-stoarge",id:"appbar-dropdown-change-more-stoarge",onClick:n,to:"/settings#membership",children:"More Storage"}),l&&(0,C.jsx)(m.Z,{component:f.rU,to:"/settings#profile",onClick:n,"data-test":"appbar-dropdown-change-plan",id:"appbar-dropdown-change-plan",children:"Settings"}),(0,C.jsx)(m.Z,{onClick:d,"data-test":"appbar-dropdown-logout",id:"appbar-dropdown-logout",children:"Logout"})]})}function k(e){var t,i=e.username,o=e.planId,d=e.firstName,s=e.lastName,c=e.isEmailVerified,m=(0,p.useState)(null),v=(0,n.Z)(m,2),f=v[0],b=v[1],g=(0,j.Z)().mutation,Z=(0,h.s0)(),k=return(0,C.jsxs)(C.Fragment,{children:[d||s?(0,C.jsx)(w,{onClick:k,"data-test":"profile-dropdown-toggle",id:"profile-dropdown-toggle",children:"".concat(d?d[0]:"").concat(s?s[0]:"")}):(0,C.jsx)(u.Z,{sx:{padding:"4px","& svg":{fontSize:"32px"}},color:"inherit","aria-label":"Profile menu",onClick:k,"data-test":"profile-dropdown-toggle",id:"profile-dropdown-toggle",size:"large",children:(0,C.jsx)(l.Z,{})}),(0,C.jsx)(I,{planId:o,handleClose:function(){b(null)},handleSwitch:(t=i,(0,a.Z)(r().mark((function e(){var i,n,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={data:{currentBucketId:t}},n=a=e.next=6,g({variables:i,onCompleted:n,onError:a});case 6:case"end":return e.stop()}}),e)})))),anchorEl:f,isEmailVerified:c})]})}I.defaultProps={isEmailVerified:!0},k.defaultProps={isEmailVerified:!0}},2970:function(e,t,i){var n;i.d(t,{D:function(){return n}}),n||(n={}))},8569:function(e,t,i){i.d(t,{Z:function(){return m}});var n=i(29439),a=i(96217),o=i(61689),r=i(47131),l=i(16031),d=i(47313),s=i(37673),u=i(29009),c=i(46417);function m(e){var t=e.ids,i=e.deselectAllMedia,m=e.color,v=e.onCompleted,p=(0,d.useState)(!1),f=(0,n.Z)(p,2),h=f[0],b=f[1],g=(0,u.Z)().mutation;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(r.Z,{"aria-label":"Move to Trash",color:m,onClick:function(){b(!h)},disabled:(0,l.isEmpty)(t),"data-test":"delete",id:"delete-button",children:(0,c.jsx)(o.Z,{title:"Move to Trash",arrow:!0,children:(0,c.jsx)(a.Z,{})})}),(0,c.jsx)(s.Z,{isOpen:h,onSubmitText:(0,c.jsx)("p",{children:"Yes, Delete"}),onSubmit:function(){g({variables:{imageIds:t}}),i&&i(),b(!1),v&&v()},close:function(){b(!1)},title:"Are you sure you want to move to trash?",subTitle:"You are about to delete ".concat(t.length," images.")})]})}m.defaultProps={color:"inherit",onCompleted:void 0,deselectAllMedia:void 0}},85769:function(e,t,i){i.d(t,{Z:function(){return m}});var n=i(29439),a=i(61511),o=i(15014),r=i(61689),l=i(47131),d=i(47313),s=i(58467),u=i(28422),c=i(46417);function m(e){var t=e.username,i=e.ids,m=void 0===i?[]:i,v=e.deselectAllMedia,p=e.color,f=e.isDisabled,h=e.onCompleted,b=(0,s.s0)(),g=(0,d.useState)(!0),Z=(0,n.Z)(g,2),x=Z[0],j=Z[1],C=(0,a.x)(),w=(0,d.useRef)(C);(0,d.useEffect)((function(){if(1===m.length){var e=w.current.readFragment({id:"Image:".concat(m[0]),fragment:u.xDo}),i=!!t&&!(null!==e&&void 0!==e&&e.isVideoType);j(!i)}else j(!0)}),[t,m]);return(0,c.jsx)(l.Z,{"aria-label":"Edit",color:p,disabled:f||x,onClick:function(){v&&v(),b("/u/".concat(t,"/editor/").concat(m[0])),h&&h()},id:"image-edit-button","data-test":"image-edit",children:(0,c.jsx)(r.Z,{title:"Edit",arrow:!0,children:(0,c.jsx)(o.Z,{})})})}m.defaultProps={color:"inherit",onCompleted:void 0,isDisabled:!1,deselectAllMedia:void 0,ids:[]}},34049:function(e,t,i){i.d(t,{Z:function(){return b}});var n=i(29439),a=i(61511),o=i(47313),r=i(28422),l=i(20716),d=i(53674),s=i(40440),u=i(47131),c=i(61689),m=i(19332),v=i(46417);function p(e){var t=e.ids,i=e.isDisabled,n=e.color,a=e.onCompleted,o=(0,m.Z)().mutation;return(0,v.jsx)(u.Z,{color:n,"aria-label":"Add to Favorites",disabled:!t.length||i,"data-test":"add-favorite",id:"add-favorite-button",onClick:function(){o({variables:{imageIds:t,add:["favorite"]}}),a&&a()},children:(0,v.jsx)(c.Z,{title:"Add to Favorites",arrow:!0,children:(0,v.jsx)(s.Z,{})})})}p.defaultProps={color:"inherit",isDisabled:!1,onCompleted:void 0};var f=i(55271);function h(e){var t=e.ids,i=e.isDisabled,n=e.color,a=e.onCompleted,o=(0,m.Z)().mutation;return(0,v.jsx)(u.Z,{color:n,disabled:!t.length||i,"data-test":"remove-favorite","aria-label":"Remove Favorite",id:"remove-favorite-button",onClick:function(){o({variables:{imageIds:t,delete:["favorite"]}}),a&&a()},children:(0,v.jsx)(c.Z,{title:"Remove from Favorites",arrow:!0,children:(0,v.jsx)(f.Z,{})})})}function b(e){var t=e.ids,i=void 0===t?[]:t,s=e.isDisabled,u=e.color,c=e.onCompleted,m=(0,a.x)(),f=(0,l.Z)().deselectAll,b=(0,o.useState)(!0),g=(0,n.Z)(b,2),Z=g[0],x=g[1];return(0,o.useEffect)((function(){if(i.length>0){var e=i.every((function(e){var t=m.readFragment({id:"Image:".concat(e),fragment:r.xDo});return!!(null!==t&&void 0!==t&&t.attributes&&t.attributes.length>0)&&(0,d.A)(t)}));x(!e)}}),[m,i]),Z?(0,v.jsx)(p,{ids:i,color:u,isDisabled:s,onCompleted:function(){c&&c(),f()}}):(0,v.jsx)(h,{ids:i,isDisabled:s,color:u,onCompleted:)}h.defaultProps={color:"inherit",isDisabled:!1,onCompleted:void 0},b.defaultProps={color:"inherit",onCompleted:void 0,isDisabled:!1,ids:[]}},8790:function(e,t,i){i.d(t,{Z:function(){return v}});var n=i(29439),a=i(34518),o=i(61689),r=i(46923),l=i(47131),d=i(16031),s=i(47313),u=i(45197),c=i(58965),m=i(46417);function v(e){var t=e.ids,i=e.isDisabled,v=e.deselectAllMedia,p=e.color,f=e.onCompleted,h=(0,s.useState)(!1),b=(0,n.Z)(h,2),g=b[0],Z=b[1],x=function(){Z(!1)};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.Z,{"aria-label":"Move Media",color:p,onClick:disabled:(0,d.isEmpty)(t)||i,"data-test":"move",id:"move-button",children:(0,m.jsx)(o.Z,{title:"Move to Another Album",arrow:!0,children:(0,m.jsx)(a.Z,{})})}),(0,m.jsx)(r.ZP,{anchor:"right",open:g,onClose:x,sx:{zIndex:u.Z.zIndex.modal+1},children:(0,m.jsx)(c.Z,{imageIds:t,onClose:x,handleMoveSuccess:function(){v&&v(),Z(!1),f&&f()}})})]})}v.defaultProps={color:"inherit",onCompleted:void 0,deselectAllMedia:void 0,isDisabled:!1}},90259:function(e,t,i){i.d(t,{Z:function(){return v}});var n=i(29439),a=i(61511),o=i(39074),r=i(61689),l=i(47131),d=i(16031),s=i(47313),u=i(28422),c=i(207),m=i(46417);function v(e){var t=e.ids,i=e.username,v=e.isDisabled,p=e.color,f=e.onCompleted,h=(0,s.useState)([]),b=(0,n.Z)(h,2),g=b[0],Z=b[1],x=(0,s.useState)(!1),j=(0,n.Z)(x,2),C=j[0],w=j[1],I=(0,a.x)();return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(l.Z,{"aria-label":"Share Media",color:p,disabled:(0,d.isEmpty)(t)||v,onClick:function(){var e=[];t.forEach((function(t){var n=I.readFragment({id:"Image:".concat(t),fragment:u.xDo});if(n){var a=I.readFragment({id:"AlbumV2:".concat(n.albumId),fragment:u.KPs});e.push({url:n.originalImage.url,title:n.title,id:n.id,albumId:n.albumId,owner:i,isPrivate:(null===a||void 0===a?void 0:a.privacyMode)!==u.zCR.Public})}})),Z(e),w(!0),f&&f()},"data-test":"share-media",id:"share-content",children:(0,m.jsx)(r.Z,{title:"Share",arrow:!0,children:(0,m.jsx)(o.Z,{})})}),(0,m.jsx)(c.Z,{isOpen:C,onClose:function(){w(!1)},media:g,username:i})]})}v.defaultProps={color:"inherit",isDisabled:!1,onCompleted:void 0}},98744:function(e,t,i){i.d(t,{Z:function(){return g}});var n=i(29439),a=i(44661),o=i(24193),r=i(66149),l=i(4117),d=i(96467),s=i(33604),u=i(47131),c=i(16783),m=i(61689),v=i(47313),p=i(58467),f=i(12164),h=i(94375),b=i(46417);function g(e){var t=e.onCompleted,i=e.disabled,g=(0,v.useState)(!1),Z=(0,n.Z)(g,2),x=Z[0],j=Z[1],C=(0,v.useState)(),w=(0,n.Z)(C,2),I=w[0],k=w[1],D=(0,v.useState)(),A=(0,n.Z)(D,2),y=A[0],S=A[1],P=(0,h.Z)(),M=P.stopPropagation,F=P.upload,E=(0,f.Z)().currentAlbum,V=(0,p.bS)("/u/:userId/trash"),z=return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.Z,{color:"inherit",onClick:"data-test":"upload-by-url-menu-item",id:"upload-by-url-button","aria-label":"Upload Media",disabled:i||!!V,children:(0,b.jsx)(m.Z,{title:"Upload By URL",arrow:!0,children:(0,b.jsx)(a.Z,{})})}),(0,b.jsxs)(r.Z,{open:x,onClose:z,children:[(0,b.jsx)(s.Z,{children:"Upload by Url"}),(0,b.jsx)(d.Z,{children:(0,b.jsx)(c.Z,{autoFocus:!0,error:Boolean(y),fullWidth:!0,helperText:y,label:"Url of Media","data-test":"upload-by-url-dialog",onChange:required:!0,sx:{marginTop:2,minWidth:300}})}),(0,b.jsxs)(l.Z,{children:[(0,b.jsx)(o.Z,{onClick:z,color:"inherit",children:"Cancel"}),(0,b.jsx)(o.Z,{onClick:function(e){M(e),E?I?(F(I,E.id),j(!1)):S("Url is required"):S("Unable to determine upload album")},disabled:!I,children:"Upload"})]})]})]})}g.defaultProps={disabled:!1,onCompleted:void 0}},94375:function(e,t,i){i.d(t,{Z:function(){return I}});var n=i(93433),a=i(45987),o=i(1413),r=i(15861),l=i(64687),d=i.n(l),s=i(61511),u=i(90297),c=i(44766),m=i(31881),v=i.n(m),p=i(19655),f=i(18248),h=i(28297),b=i(28422),g=i(91345),Z=i(2970),x=i(11149),j=i(98976),C=i(31500),w=["originalImage","image"];function I(){var e=(0,s.x)(),t=(0,u.l)(g.Xs),i=(0,g.at)(),l=(0,C.Z)(),m=/^.*(heic).*$/i,I=function(){var s=(0,r.Z)(d().mark((function r(s,u){var C,I,k,D,A,y,S,P,M,F,E,V,z,U,B,T,H,_,L,q,O,R,W,Q,X,K,Y,N,$,G;return d().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return k=(0,x.v)(),D={field:null===k||void 0===k||null===(C=k.sortBy)||void 0===C?void 0:C.field,desc:null===k||void 0===k||null===(I=k.sortBy)||void 0===I?void 0:I.desc},A=(0,f.Z)(),t[A]={url:s,albumId:u,status:Z.D.InProgress},(0,g.Xs)((0,o.Z)({},t)),r.prev=5,r.next=8,null===(y=(0,p.v0)().currentUser)||void 0===y?void 0:y.getIdToken();case 8:if(S=r.sent){r.next=12;break}return(0,g.sh)([{id:(0,c.k$)(),message:"Upload Failed: Unauthorized.",severity:"error"}]),r.abrupt("return");case 12:return P={"Content-Type":"application/x-www-form-urlencoded",authorization:S,"x-correlation-id":(0,f.Z)()},M={url:s,albumId:u},r.next=16,v().post(h.ZP.api.uploadByUrl,{},{headers:P,params:M});case 16:F=r.sent,E=F.data,V=E.originalImage,z=E.image,U=(0,a.Z)(E,w),B={albumId:U.albumId,sortBy:D,pageSize:j.IV},null!==(T=e.readQuery({query:b.b6e,variables:B}))&&void 0!==T&&T.getAlbumImagesV2&&(H=(0,o.Z)((0,o.Z)({},U),{},{originalImage:(0,o.Z)({isLandscape:!1},V),thumbnailImage:(0,o.Z)({isLandscape:!1},z),__typename:"Image"}),_=null===T||void 0===T?void 0:T.getAlbumImagesV2.items,L={getAlbumImagesV2:{items:[H].concat((0,n.Z)(_)),scrollPointer:null===T||void 0===T?void 0:T.getAlbumImagesV2.scrollPointer}},e.writeQuery({query:b.b6e,data:L,variables:B})),null!==(q=e.readQuery({query:b.x4R,variables:B}))&&void 0!==q&&q.getImagesFromAlbumAndSubAlbums&&(O=(0,o.Z)((0,o.Z)({},U),{},{originalImage:(0,o.Z)({isLandscape:!1},V),thumbnailImage:(0,o.Z)({isLandscape:!1},z),image:(0,o.Z)({isLandscape:!1},z),__typename:"Image"}),R=null===q||void 0===q?void 0:q.getImagesFromAlbumAndSubAlbums.items,W={getImagesFromAlbumAndSubAlbums:{items:[O].concat((0,n.Z)(R)),scrollPointer:null===q||void 0===q?void 0:q.getImagesFromAlbumAndSubAlbums.scrollPointer}},e.writeQuery({query:b.x4R,data:W,variables:B})),e.cache.modify({id:"AlbumV2:".concat(U.albumId),fields:{counters:function(e){return{imageCount:e.imageCount+1,imageCountIncludeSubAlbums:e.imageCountIncludeSubAlbums}}}}),s.match(m)?t[A]=(0,o.Z)((0,o.Z)({},t[A]),{},{link:"/u/".concat(null===i||void 0===i||null===(Q=i.profile)||void 0===Q?void 0:Q.username,"/a/").concat(U.albumId,"/p/").concat(U.id),status:Z.D.Completed,url:z.url}):t[A]=(0,o.Z)((0,o.Z)({},t[A]),{},{link:"/u/".concat(null===i||void 0===i||null===(X=i.profile)||void 0===X?void 0:X.username,"/a/").concat(U.albumId,"/p/").concat(U.id),status:Z.D.Completed}),(0,g.Xs)((0,o.Z)({},t)),l.execute(),K={id:(0,f.Z)(),message:"Your image has been uploaded.",severity:"success"},(0,g.sh)([K]),r.next=42;break;case 34:r.prev=34,r.t0=r.catch(5),N=r.t0,$=(null===(Y=N.response)||void 0===Y?void 0:Y.data)||"There was an error while trying to upload your image.",G={id:(0,f.Z)(),message:$,severity:"error"},(0,g.sh)([G]),t[A]=(0,o.Z)((0,o.Z)({},t[A]),{},{status:Z.D.Failed}),(0,g.Xs)((0,o.Z)({},t));case 42:case"end":return r.stop()}}),r,null,[[5,34]])})));return ();return{upload:I,stopPropagation:}},31500:function(e,t,i){i.d(t,{Z:function(){return u}});var n=i(1413),a=i(29439),o=i(96420),r=i(18248),l=i(28422),d=i(91345),s=i(25258);function u(){var e=(0,o.t)(l.D9W,{onCompleted:function(e){var t=e.getProfile;t&&(0,d.at)({profile:(0,n.Z)({},t)})},onError:function(e){s.Z.error("Something went wrong while updating user usage statistics",e);var t={id:(0,r.Z)(),message:"Something went wrong while updating user image count. Please refresh the page to show new image count.",severity:"none"};(0,d.sh)([t])}});return{execute:(0,a.Z)(e,1)[0]}}},53674:function(e,t,i){i.d(t,{A:function(){return u},Z:);var n=i(16031),a=i.n(n),o=i(70816),r=i.n(o),l=i(28422),d=i(98976),s=function(e,t){var i=r()(e.uploadDate),n=r()(e.dateTaken);switch(t){case l.hqH.Date:return i.isValid()?i.format(d.ZS):d.Ks;case l.hqH.Title:return e.title.length?a().upperCase(e.title.charAt(0)):d.Ks;case l.hqH.DateTaken:default:return n.isValid()?n.format(d.ZS):d.k5}},u=function(e){var t,i=null===(t=e.attributes)||void 0===t?void 0:t.find(();return Boolean(i)}},44661:function(e,t,i){var n=i(64836);t.Z=void 0;var a=n(i(45045)),o=i(46417),r=(0,a.default)((0,o.jsx)("path",{d:"M8 11h8v2H8zm12.1 1H22c0-2.76-2.24-5-5-5h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1zM3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM19 12h-2v3h-3v2h3v3h2v-3h3v-2h-3z"}),"AddLink");t.Z=r},55271:function(e,t,i){var n=i(64836);t.Z=void 0;var a=n(i(45045)),o=i(46417),r=(0,a.default)((0,o.jsx)("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"FavoriteOutlined");t.Z=r},15014:function(e,t,i){var n=i(64836);t.Z=void 0;var a=n(i(45045)),o=i(46417),r=(0,a.default)((0,o.jsx)("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"TuneOutlined");t.Z=r}}]);