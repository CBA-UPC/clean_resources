@media screen
{
	body {margin: 0; padding: 20px; background-color: none;font-size:13px;font-family:Arial,Helvetica,sans-serif; line-height:1.3;}
	.BodyBackground, .PaneContentInner {background: none !important; background-color: #FFFFFF; background-image: none; margin: 0 auto; padding: 0; width: 960px;}
	.LayoutDefault, .LayoutDefaultInner { margin: 0; padding: 0; border:none;}
	.PaneBreadcrumb,.PrintHide {visibility:hidden; display: none;}
	.PageDefaultInner {background: #fff;margin: 0; padding: 0;}
	.Hide, .PrintModeButton, .PrintModeButtonPrint, .PrintPage, .ContentLinks {visibility:hidden; display:none}
	.PaneLeft, .PaneRight, .PaneHeader, .PaneNavigation, .PaneHeader2, .FooterLinks, .PaneFooter2, .PaneQ4Footer, .ShareThisContainer {visibility:hidden; display:none; width: 1px;}
	.PaneContent {margin: 0; padding: 25px;}
	a{color: #004B8D;}
	h1, .TitleLeft .ModuleTitle {
  color: #004B8D;
  display: block;
  font-size: 14px;
  font-weight: bold;
  height: 30px;
  line-height: 30px;
  margin: 10px 0 15px;
  text-transform: uppercase;
}
h2{font-size:14px; margin:0 0 15px 0;}
p,
ul,
ol,
table,
pre,
blockquote {
	margin: 0 0 20px 0;
}
blockquote {
	margin-left: 40px;
}
sup,
sub {
	height: 0;
	line-height: 1;
	position: relative;
	vertical-align: baseline;
}
sup {
	bottom: 1ex;
}
sub {
	top: 0.5ex;
}
pre {
	white-space: pre-wrap;
	word-wrap: break-word;
}
.PaneFooter{  padding:0 20px 20px 20px;}
.ModulePressReleaseDetails h1.ModuleTitle:first-child{ display:none;}
}

@media print
{
	body {margin: 0; padding: 20px; background-color: none;font-size:13px;font-family:Arial,Helvetica,sans-serif; line-height:1.3;}
	.BodyBackground, .PaneContentInner {background: none !important; background-color: #FFFFFF; background-image: none; margin: 0 auto; padding: 0; width: 960px;}
	.LayoutDefault, .LayoutDefaultInner { margin: 0; padding: 0; border:none;}
	.PaneBreadcrumb,.PrintHide {visibility:hidden; display: none;}
	.PageDefaultInner {background: #fff;margin: 0; padding: 0;}
	.Hide, .PrintModeButton, .PrintModeButtonPrint, .PrintPage, .ContentLinks {visibility:hidden; display:none}
	.PaneLeft, .PaneRight, .PaneHeader, .PaneNavigation, .PaneHeader2, .FooterLinks, .PaneFooter2, .PaneQ4Footer, .ShareThisContainer {visibility:hidden; display:none; width: 1px;}
	.PaneContent {margin: 0; padding: 25px;}
	a{color: #004B8D;}
	h1, .TitleLeft .ModuleTitle {
  color: #004B8D;
  display: block;
  font-size: 14px;
  font-weight: bold;
  height: 30px;
  line-height: 30px;
  margin: 10px 0 15px;
  text-transform: uppercase;
}
h2{font-size:14px; margin:0 0 15px 0;}
p,
ul,
ol,
table,
pre,
blockquote {
	margin: 0 0 20px 0;
}
blockquote {
	margin-left: 40px;
}
sup,
sub {
	height: 0;
	line-height: 1;
	position: relative;
	vertical-align: baseline;
}
sup {
	bottom: 1ex;
}
sub {
	top: 0.5ex;
}
pre {
	white-space: pre-wrap;
	word-wrap: break-word;
}
.PaneFooter{  padding:0 20px 20px 20px;}
.ModulePressReleaseDetails h1.ModuleTitle:first-child{ display:none;}
.printBreak { page-break-inside:auto;page-break-before:always; }

    /*div   { page-break-inside:avoid; }  */
    thead { display:table-header-group }
    tfoot { display:table-footer-group }
}
every||(Array.prototype.every=function(r,t){var e,n=Object(this),o=n.length>>>0;if("function"!=typeof r)throw new TypeError(r+" is not a function");for(e=0;e<o;e+=1)if(e in n&&!r.call(t,n[e],e,n))return!1;return!0});
},{}],"hTjC":[function(require,module,exports) {
Array.prototype.filter||(Array.prototype.filter=function(r,t){var o,n=Object(this),e=n.length>>>0,i=[];if("function"!=typeof r)throw new TypeError(r+" is not a function");for(o=0;o<e;o+=1)o in n&&r.call(t,n[o],o,n)&&i.push(n[o]);return i});
},{}],"J5mg":[function(require,module,exports) {
Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(r){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),e=t.length>>>0;if("function"!=typeof r)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<e;){var i=t[o];if(r.call(n,i,o,t))return i;o++}}});
},{}],"d63C":[function(require,module,exports) {
Array.prototype.forEach||(Array.prototype.forEach=function(o,r){var t,a,c=Object(this);if("function"!=typeof o)throw new TypeError("No function object passed to forEach.");var e=this.length;for(t=0;t<e;t+=1)a=c[t],o.call(r,a,t,c)});
},{}],"IXfq":[function(require,module,exports) {
Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(r,e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if(0===n)return!1;var i,o,a=0|e,u=Math.max(a>=0?a:n-Math.abs(a),0);for(;u<n;){if((i=t[u])===(o=r)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;u++}return!1}});
},{}],"tk6e":[function(require,module,exports) {
Array.prototype.indexOf||(Array.prototype.indexOf=function(r,t){var e=t||0,i=0;if(e<0&&(e=this.length+t-1)<0)throw"Wrapped past beginning of array while looking up a negative start index.";for(i=0;i<this.length;i++)if(this[i]===r)return i;return-1});
},{}],"XDww":[function(require,module,exports) {
Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t,r){var e,n=Object(this),a=n.length>>>0;if(r=parseInt(r,10),a<=0)return-1;for(e=(e="number"==typeof r?Math.min(a-1,r):a-1)>=0?e:a-Math.abs(e);e>=0;e-=1)if(e in n&&t===n[e])return e;return-1});
},{}],"Y01A":[function(require,module,exports) {
Array.prototype.map||(Array.prototype.map=function(r,t){var n,o=Object(this),e=o.length>>>0,a=new Array(e);if("function"!=typeof r)throw new TypeError(r+" is not a function");for(n=0;n<e;n+=1)n in o&&(a[n]=r.call(t,o[n],n,o));return a});
},{}],"OsWc":[function(require,module,exports) {
Array.prototype.reduce||(Array.prototype.reduce=function(r,e){var o,t=Object(this),i=t.length>>>0,n=0;if("function"!=typeof r)throw new TypeError(r+" is not a function");if(void 0===e){if(!i)throw new TypeError("Reduce of empty array with no initial value");o=t[0],n=1}else o=e;for(;n<i;)n in t&&(o=r.call(void 0,o,t[n],n,t),n+=1);return o});
},{}],"uY2G":[function(require,module,exports) {
Array.prototype.reduceRight||(Array.prototype.reduceRight=function(r,e){var t,o=Object(this),i=o.length>>>0,n=i-1;if("function"!=typeof r)throw new TypeError(r+" is not a function");if(void 0===e){if(!i)throw new TypeError("Reduce of empty array with no initial value");t=o[i-1],n=i-2}else t=e;for(;n>=0;)n in o&&(t=r.call(void 0,t,o[n],n,o),n-=1);return t});
},{}],"tRUU":[function(require,module,exports) {
!function(){"use strict";var t=Array.prototype.slice;try{t.call(document.documentElement)}catch(r){Array.prototype.slice=function(r,e){if(e=void 0!==e?e:this.length,"[object Array]"===Object.prototype.toString.call(this))return t.call(this,r,e);var i,c,o=[],n=this.length,a=r||0,h=e||n;if(e<0&&(h=n+e),(c=h-(a=a>=0?a:n+a))>0)if(o=new Array(c),this.charAt)for(i=0;i<c;i++)o[i]=this.charAt(a+i);else for(i=0;i<c;i++)o[i]=this[a+i];return o}}}();
},{}],"QfPU":[function(require,module,exports) {
Array.prototype.some||(Array.prototype.some=function(r,t){var o,n=Object(this),e=n.length>>>0;if("function"!=typeof r)throw new TypeError(r+" is not a function");for(o=0;o<e;o+=1)if(o in n&&!0===r.call(t,n[o],o,n))return!0;return!1});
},{}],"eOaV":[function(require,module,exports) {
"use strict";require("./Array/from"),require("./Array/isArray"),require("./Array/prototype.every"),require("./Array/prototype.filter"),require("./Array/prototype.find"),require("./Array/prototype.forEach"),require("./Array/prototype.includes"),require("./Array/prototype.indexOf"),require("./Array/prototype.lastIndexOf"),require("./Array/prototype.map"),require("./Array/prototype.reduce"),require("./Array/prototype.reduceRight"),require("./Array/prototype.slice"),require("./Array/prototype.some");
},{"./Array/from":"RUUY","./Array/isArray":"pBht","./Array/prototype.every":"wlbw","./Array/prototype.filter":"hTjC","./Array/prototype.find":"J5mg","./Array/prototype.forEach":"d63C","./Array/prototype.includes":"IXfq","./Array/prototype.indexOf":"tk6e","./Array/prototype.lastIndexOf":"XDww","./Array/prototype.map":"Y01A","./Array/prototype.reduce":"OsWc","./Array/prototype.reduceRight":"uY2G","./Array/prototype.slice":"tRUU","./Array/prototype.some":"QfPU"}],"XM1i":[function(require,module,exports) {
var global = arguments[3];
var e=arguments[3];!function(e){"use strict";e.console||(e.console={});for(var o,i,n=e.console,r=function(){},t=["memory"],l="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");o=t.pop();)n[o]||(n[o]={});for(;i=l.pop();)"function"!=typeof n[i]&&(n[i]=r)}("undefined"==typeof window?this:window);
},{}],"Gbf6":[function(require,module,exports) {
require("console-polyfill");
},{"console-polyfill":"XM1i"}],"UHND":[function(require,module,exports) {
if(document.createEvent)try{new window.CustomEvent("click")}catch(t){window.CustomEvent=function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}return t.prototype=window.Event.prototype,t}()}
},{}],"V44F":[function(require,module,exports) {
Date.now||(Date.now=function(){return(new Date).getTime()});
},{}],"YHvB":[function(require,module,exports) {
Date.prototype.toISOString||(Date.prototype.toISOString=function(){if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");var t,e,r={year:this.getUTCFullYear(),month:this.getUTCMonth()+1,day:this.getUTCDate(),hours:this.getUTCHours(),minutes:this.getUTCMinutes(),seconds:this.getUTCSeconds(),mseconds:(this.getUTCMilliseconds()/1e3).toFixed(3).substr(2,3)};for(t in r)r.hasOwnProperty(t)&&"year"!==t&&"mseconds"!==t&&(r[t]=1===String(r[t]).length?"0"+String(r[t]):String(r[t]));return(r.year<0||r.year>9999)&&(e=r.year<0?"-":"+",r.year=e+String(Math.abs(r.year/1e6)).substr(2,6)),r.year+"-"+r.month+"-"+r.day+"T"+r.hours+":"+r.minutes+":"+r.seconds+"."+r.mseconds+"Z"});
},{}],"sRWE":[function(require,module,exports) {
Date.prototype.toJSON||(Date.prototype.toJSON=function(t){var n,r=Object(this),e=function(t){var n=typeof t;return!![null,"undefined","boolean","string","number"].some(function(t){return t===n})};if("number"==typeof(n=function(t){var n;if(e(t))return t;if((n="function"==typeof t.valueOf?t.valueOf():"function"==typeof t.toString?t.toString():null)&&e(n))return n;throw new TypeError(t+" cannot be converted to a primitive")}(r))&&!isFinite(n))return null;if("function"!=typeof r.toISOString)throw new TypeError("toISOString is not callable");return r.toISOString.call(r)});
},{}],"k6kx":[function(require,module,exports) {
"use strict";require("./Date/now"),require("./Date/prototype.toISOString"),require("./Date/prototype.toJSON");
},{"./Date/now":"V44F","./Date/prototype.toISOString":"YHvB","./Date/prototype.toJSON":"sRWE"}],"q3FA":[function(require,module,exports) {
"document"in self&&("classList"in document.createElement("_")?function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;n<i;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}t=null}():function(t){"use strict";if("Element"in t){var e=t.Element.prototype,n=Object,i=String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")},s=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},r=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},o=function(t,e){if(""===e)throw new r("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new r("INVALID_CHARACTER_ERR","String contains an invalid character");return s.call(t,e)},a=function(t){for(var e=i.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],s=0,r=n.length;s<r;s++)this.push(n[s]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},c=a.prototype=[],l=function(){return new a(this)};if(r.prototype=Error.prototype,c.item=function(t){return this[t]||null},c.contains=function(t){return-1!==o(this,t+="")},c.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do{t=e[n]+"",-1===o(this,t)&&(this.push(t),s=!0)}while(++n<i);s&&this._updateClassName()},c.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do{for(t=n[i]+"",e=o(this,t);-1!==e;)this.splice(e,1),r=!0,e=o(this,t)}while(++i<s);r&&this._updateClassName()},c.toggle=function(t,e){t+="";var n=this.contains(t),i=n?!0!==e&&"remove":!1!==e&&"add";return i&&this[i](t),!0===e||!1===e?e:!n},c.toString=function(){return this.join(" ")},n.defineProperty){var u={get:l,enumerable:!0,configurable:!0};try{n.defineProperty(e,"classList",u)}catch(f){-2146823252===f.number&&(u.enumerable=!1,n.defineProperty(e,"classList",u))}}else n.prototype.__defineGetter__&&e.__defineGetter__("classList",l)}}(self));
},{}],"fUDo":[function(require,module,exports) {
"use strict";Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),o=t.length;--o>=0&&t.item(o)!==this;);return o>-1});
},{}],"rcGj":[function(require,module,exports) {
"use strict";module.exports=function(){"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)})};
},{}],"qYPQ":[function(require,module,exports) {
"use strict";require("./Element/prototype.classList"),require("./Element/prototype.matches"),require("./Element/prototype.remove");
},{"./Element/prototype.classList":"q3FA","./Element/prototype.matches":"fUDo","./Element/prototype.remove":"rcGj"}],"PzYu":[function(require,module,exports) {
Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var o=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&t?this:t,o.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r});
},{}],"pwJj":[function(require,module,exports) {
"use strict";require("./Function/prototype.bind");
},{"./Function/prototype.bind":"PzYu"}],"mtNM":[function(require,module,exports) {
if(!window.getComputedStyle){function t(e,o,i){e.document;var r,n=e.currentStyle[o].match(/(-?[\d\.]+)(%|cm|em|in|mm|pc|pt|)/)||[0,0,""],l=n[1],h=n[2];return i=i?/%|em/.test(h)&&e.parentElement?t(e.parentElement,"fontSize",null):16:i,r="fontSize"==o?i:/width/i.test(o)?e.clientWidth:e.clientHeight,"%"==h?l/100*r:"cm"==h?.3937*l*96:"em"==h?l*i:"in"==h?96*l:"mm"==h?.3937*l*96/10:"pc"==h?12*l*96/72:"pt"==h?96*l/72:l}function e(t,e){var o="border"==e?"Width":"",i=e+"Top"+o,r=e+"Right"+o,n=e+"Bottom"+o,l=e+"Left"+o;t[e]=(t[i]==t[r]&&t[i]==t[n]&&t[i]==t[l]?[t[i]]:t[i]==t[n]&&t[l]==t[r]?[t[i],t[r]]:t[l]==t[r]?[t[i],t[r],t[n]]:[t[i],t[r],t[n],t[l]]).join(" ")}function o(o){var i,r=o.currentStyle,n=t(o,"fontSize"),l=function(t){return"-"+t.toLowerCase()};for(i in r)if(Array.prototype.push.call(this,"styleFloat"==i?"float":i.replace(/[A-Z]/,l)),"width"==i)this[i]=o.offsetWidth+"px";else if("height"==i)this[i]=o.offsetHeight+"px";else if("styleFloat"==i)this.float=r[i],this.cssFloat=r[i];else if(/margin.|padding.|border.+W/.test(i)&&"auto"!=this[i])this[i]=Math.round(t(o,i,n))+"px";else if(/^outline/.test(i))try{this[i]=r[i]}catch(h){this.outlineColor=r.color,this.outlineStyle=this.outlineStyle||"none",this.outlineWidth=this.outlineWidth||"0px",this.outline=[this.outlineColor,this.outlineWidth,this.outlineStyle].join(" ")}else this[i]=r[i];e(this,"margin"),e(this,"padding"),e(this,"border"),this.fontSize=Math.round(n)+"px"}o.prototype={constructor:o,getPropertyPriority:function(){throw new Error("NotSupportedError: DOM Exception 9")},getPropertyValue:function(t){return this[t.replace(/-\w/g,function(t){return t[1].toUpperCase()})]},item:function(t){return this[t]},removeProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7")},setProperty:function(){throw new Error("NoModificationAllowedError: DOM Exception 7")},getPropertyCSSValue:function(){throw new Error("NotSupportedError: DOM Exception 9")}},window.getComputedStyle=function(t){return new o(t)}}
},{}],"ey15":[function(require,module,exports) {
!function(e,t){var n,r,a=e.html5||{},o=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,c=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,i="_html5shiv",l=0,m={};function s(){var e=f.elements;return"string"==typeof e?e.split(" "):e}function u(e){var t=m[e[i]];return t||(t={},l++,e[i]=l,m[l]=t),t}function d(e,n,a){return n||(n=t),r?n.createElement(e):(a||(a=u(n)),!(i=a.cache[e]?a.cache[e].cloneNode():c.test(e)?(a.cache[e]=a.createElem(e)).cloneNode():a.createElem(e)).canHaveChildren||o.test(e)||i.tagUrn?i:a.frag.appendChild(i));var i}function h(e){e||(e=t);var a=u(e);return!f.shivCSS||n||a.hasCSS||(a.hasCSS=!!function(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),r||function(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return f.shivMethods?d(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+s().join().replace(/[\w\-:]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(f,t.frag)}(e,a),e}!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",n="hidden"in e,r=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return void 0===e.cloneNode||void 0===e.createDocumentFragment||void 0===e.createElement}()}catch(a){n=!0,r=!0}}();var f={elements:a.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:"3.7.3-pre",shivCSS:!1!==a.shivCSS,supportsUnknownElements:r,shivMethods:!1!==a.shivMethods,type:"default",shivDocument:h,createElement:d,createDocumentFragment:function(e,n){if(e||(e=t),r)return e.createDocumentFragment();for(var a=(n=n||u(e)).frag.cloneNode(),o=0,c=s(),i=c.length;o<i;o++)a.createElement(c[o]);return a},addElements:function(e,t){var n=f.elements;"string"!=typeof n&&(n=n.join(" ")),"string"!=typeof e&&(e=e.join(" ")),f.elements=n+" "+e,h(t)}};e.html5=f,h(t),"object"==typeof module&&module.exports&&(module.exports=f)}("undefined"!=typeof window?window:this,document);
},{}],"vpoR":[function(require,module,exports) {
require("html5shiv/src/html5shiv");
},{"html5shiv/src/html5shiv":"ey15"}],"U1RK":[function(require,module,exports) {
"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}var cx,escapable,gap,indent,meta,rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,o,f,u,i=gap,p=e[t];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(t)),"function"==typeof rep&&(p=rep.call(e,t,p)),typeof p){case"string":return quote(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(p)){for(f=p.length,n=0;n<f;n+=1)u[n]=str(n,p)||"null";return o=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+i+"]":"["+u.join(",")+"]",gap=i,o}if(rep&&"object"==typeof rep)for(f=rep.length,n=0;n<f;n+=1)"string"==typeof rep[n]&&(o=str(r=rep[n],p))&&u.push(quote(r)+(gap?": ":":")+o);else for(r in p)Object.prototype.hasOwnProperty.call(p,r)&&(o=str(r,p))&&u.push(quote(r)+(gap?": ":":")+o);return o=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+i+"}":"{"+u.join(",")+"}",gap=i,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),"function"!=typeof JSON.stringify&&(escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(t,e,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(text,reviver){var j;function walk(t,e){var n,r,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(void 0!==(r=walk(o,n))?o[n]=r:delete o[n]);return reviver.call(t,e,o)}if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();
},{}],"o1nC":[function(require,module,exports) {
window.matchMedia||(window.matchMedia=function(){"use strict";var e=window.styleMedia||window.media;if(!e){var t,d=document.createElement("style"),i=document.getElementsByTagName("script")[0];d.type="text/css",d.id="matchmediajs-test",i?i.parentNode.insertBefore(d,i):document.head.appendChild(d),t="getComputedStyle"in window&&window.getComputedStyle(d,null)||d.currentStyle,e={matchMedium:function(e){var i="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return d.styleSheet?d.styleSheet.cssText=i:d.textContent=i,"1px"===t.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}());
},{}],"hEUJ":[function(require,module,exports) {
!function(){if(window.matchMedia&&window.matchMedia("all").addListener)return!1;var e=window.matchMedia,n=e("only all").matches,i=!1,t=0,a=[],r=function(n){clearTimeout(t),t=setTimeout(function(){for(var n=0,i=a.length;n<i;n++){var t=a[n].mql,r=a[n].listeners||[],o=e(t.media).matches;if(o!==t.matches){t.matches=o;for(var c=0,d=r.length;c<d;c++)r[c].call(window,t)}}},30)};window.matchMedia=function(t){var o=e(t),c=[],d=0;return o.addListener=function(e){n&&(i||(i=!0,window.addEventListener("resize",r,!0)),0===d&&(d=a.push({mql:o,listeners:c})),c.push(e))},o.removeListener=function(e){for(var n=0,i=c.length;n<i;n++)c[n]===e&&c.splice(n,1)},o}}();
},{}],"CV5W":[function(require,module,exports) {
require("matchmedia-polyfill"),require("matchmedia-polyfill/matchMedia.addListener");
},{"matchmedia-polyfill":"o1nC","matchmedia-polyfill/matchMedia.addListener":"hEUJ"}],"nShY":[function(require,module,exports) {
window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(o,t){t=t||window;for(var i=0;i<this.length;i++)o.call(t,this[i],i,this)});
},{}],"LoD4":[function(require,module,exports) {
"use strict";require("./NodeList/prototype.forEach");
},{"./NodeList/prototype.forEach":"nShY"}],"CtoA":[function(require,module,exports) {
"function"!=typeof Object.assign&&(Object.assign=function(n){"use strict";if(null==n)throw new TypeError("Cannot convert undefined or null to object");n=Object(n);for(var t=1;t<arguments.length;t++){var r=arguments[t];if(null!=r)for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n});
},{}],"Lvz1":[function(require,module,exports) {
if(!Object.create){var e=function(){};Object.create=function(t){if(arguments.length>1)throw new Error("Second argument not supported");if(null===t||"object"!=typeof t)throw new TypeError("Object prototype may only be an Object.");return e.prototype=t,new e}}
},{}],"c34J":[function(require,module,exports) {
Object.is||(Object.is=function(t,c){return 0===t&&0===c?1/t==1/c:t!=t?c!=c:t===c});
},{}],"TcUn":[function(require,module,exports) {
Object.keys||(Object.keys=function(e){var n,t=[];if(!e||"function"!=typeof e.hasOwnProperty)throw"Object.keys called on non-object.";for(n in e)e.hasOwnProperty(n)&&t.push(n);return t});
},{}],"aItv":[function(require,module,exports) {
"use strict";require("./Object/assign"),require("./Object/create"),require("./Object/is"),require("./Object/keys");
},{"./Object/assign":"CtoA","./Object/create":"Lvz1","./Object/is":"c34J","./Object/keys":"TcUn"}],"wGeK":[function(require,module,exports) {
require("../Date/now"),function(){if("performance"in window==0&&(window.performance={}),"now"in window.performance==0){var n=Date.now();performance.timing&&performance.timing.navigationStart&&(n=performance.timing.navigationStart),window.performance.now=function(){return Date.now()-n}}}();
},{"../Date/now":"V44F"}],"T6pD":[function(require,module,exports) {
"use strict";require("./performance/now");
},{"./performance/now":"wGeK"}],"veOC":[function(require,module,exports) {
"use strict";var t={instrument:!1};function n(n,r){if(2!==arguments.length)return t[n];t[n]=r}exports.config=t,exports.configure=n;
},{}],"rjyx":[function(require,module,exports) {
"use strict";function t(t){return n(t)||"object"==typeof t&&null!==t}function n(t){return"function"==typeof t}function e(t){return"[object Array]"===Object.prototype.toString.call(t)}var o=Date.now||function(){return(new Date).getTime()};exports.objectOrFunction=t,exports.isFunction=n,exports.isArray=e,exports.now=o;
},{}],"Qr4D":[function(require,module,exports) {
"use strict";var r=require("./utils").isArray,n=require("./utils").isFunction;function t(t){if(!r(t))throw new TypeError("You must pass an array to all.");return new this(function(r,e){var i,u=[],o=t.length;function s(r){return function(n){a(r,n)}}function a(n,t){u[n]=t,0==--o&&r(u)}0===o&&r([]);for(var l=0;l<t.length;l++)(i=t[l])&&n(i.then)?i.then(s(l),e):a(l,i)})}exports.all=t;
},{"./utils":"rjyx"}],"l3nb":[function(require,module,exports) {
"use strict";var r=require("./utils").isArray;function t(t){if(!r(t))throw new TypeError("You must pass an array to race.");return new this(function(r,e){for(var n,o=0;o<t.length;o++)(n=t[o])&&"function"==typeof n.then?n.then(r,e):r(n)})}exports.race=t;
},{"./utils":"rjyx"}],"sYz9":[function(require,module,exports) {
"use strict";function t(t){if(t&&"object"==typeof t&&t.constructor===this)return t;return new this(function(e){e(t)})}exports.resolve=t;
},{}],"a4xD":[function(require,module,exports) {
"use strict";function t(t){return new this(function(e,n){n(t)})}exports.reject=t;
},{}],"rH1J":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"iejI":[function(require,module,exports) {
var global = arguments[3];
var process = require("process");
var t=arguments[3],n=require("process"),e="undefined"!=typeof window?window:{},o=e.MutationObserver||e.WebKitMutationObserver,r=void 0!==t?t:void 0===this?window:this;function i(){return function(){n.nextTick(d)}}function u(){var t=0,n=new o(d),e=document.createTextNode("");return n.observe(e,{characterData:!0}),function(){e.data=t=++t%2}}function a(){return function(){r.setTimeout(d,1)}}var c,s=[];function d(){for(var t=0;t<s.length;t++){var n=s[t];(0,n[0])(n[1])}s=[]}function f(t,n){1===s.push([t,n])&&c()}c=void 0!==n&&"[object process]"==={}.toString.call(n)?i():o?u():a(),exports.asap=f;
},{"process":"rH1J"}],"KzDw":[function(require,module,exports) {
"use strict";var t=require("./config").config,e=require("./config").configure,r=require("./utils").objectOrFunction,n=require("./utils").isFunction,i=require("./utils").now,s=require("./all").all,c=require("./race").race,o=require("./resolve").resolve,u=require("./reject").reject,a=require("./asap").asap,f=0;function l(t){if(!n(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof l))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],h(t,this)}function h(t,e){function r(t){j(e,t)}try{t(function(t){m(e,t)},r)}catch(n){r(n)}}function _(t,e,r,i){var s,c,o,u,a=n(r);if(a)try{s=r(i),o=!0}catch(f){u=!0,c=f}else s=i,o=!0;w(e,s)||(a&&o?m(e,s):u?j(e,c):t===p?m(e,s):t===d&&j(e,s))}t.async=a;var v=void 0,b=0,p=1,d=2;function y(t,e,r,n){var i=t._subscribers,s=i.length;i[s]=e,i[s+p]=r,i[s+d]=n}function q(t,e){for(var r=t._subscribers,n=t._detail,i=0;i<r.length;i+=3)_(e,r[i],r[i+e],n);t._subscribers=null}function w(t,e){var i,s=null;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(r(e)&&(s=e.then,n(s)))return s.call(e,function(r){if(i)return!0;i=!0,e!==r?m(t,r):g(t,r)},function(e){if(i)return!0;i=!0,j(t,e)}),!0}catch(c){return!!i||(j(t,c),!0)}return!1}function m(t,e){t===e?g(t,e):w(t,e)||g(t,e)}function g(e,r){e._state===v&&(e._state=b,e._detail=r,t.async(E,e))}function j(e,r){e._state===v&&(e._state=b,e._detail=r,t.async(F,e))}function E(t){q(t,t._state=p)}function F(t){q(t,t._state=d)}l.prototype={constructor:l,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(e,r){var n=this,i=new this.constructor(function(){});if(this._state){var s=arguments;t.async(function(){_(n._state,i,s[n._state-1],n._detail)})}else y(this,i,e,r);return i},catch:function(t){return this.then(null,t)}},l.all=s,l.race=c,l.resolve=o,l.reject=u,exports.Promise=l;
},{"./config":"veOC","./utils":"rjyx","./all":"Qr4D","./race":"l3nb","./resolve":"sYz9","./reject":"a4xD","./asap":"iejI"}],"ZNZq":[function(require,module,exports) {
var global = arguments[3];
var i=arguments[3],e=require("./promise").Promise,o=require("./utils").isFunction;function r(){var r,n;"Promise"in(r=void 0!==i?i:"undefined"!=typeof window&&window.document?window:self)&&"resolve"in r.Promise&&"reject"in r.Promise&&"all"in r.Promise&&"race"in r.Promise&&(new r.Promise(function(i){n=i}),o(n))||(r.Promise=e)}exports.polyfill=r;
},{"./promise":"KzDw","./utils":"rjyx"}],"BBMn":[function(require,module,exports) {
"use strict";var r=require("./promise/promise").Promise,e=require("./promise/polyfill").polyfill;exports.Promise=r,exports.polyfill=e;
},{"./promise/promise":"KzDw","./promise/polyfill":"ZNZq"}],"ta1s":[function(require,module,exports) {
module.exports=require("es6-promise").polyfill();
},{"es6-promise":"BBMn"}],"bvYo":[function(require,module,exports) {
!function(){for(var n=0,i=["ms","moz","webkit","o"],e=0;e<i.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[i[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(i,e){var a=Date.now(),o=Math.max(0,16-(a-n)),t=window.setTimeout(function(){i(a+o)},o);return n=a+o,t}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})}();
},{}],"SYxC":[function(require,module,exports) {
String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});
},{}],"YDKn":[function(require,module,exports) {
String.prototype.includes||(String.prototype.includes=function(t,e){"use strict";return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)});
},{}],"GcUH":[function(require,module,exports) {
"use strict";require("./String/prototype.trim"),require("./String/prototype.includes");
},{"./String/prototype.trim":"SYxC","./String/prototype.includes":"YDKn"}],"jkDS":[function(require,module,exports) {
window.XMLHttpRequest=window.XMLHttpRequest||function(){var t;try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=!1}}return t};
},{}],"MhVq":[function(require,module,exports) {
"use strict";require("./Array"),require("./console.log"),require("./CustomEvent"),require("./Date"),require("./Element"),require("./Function"),require("./getComputedStyle"),require("./html5shiv"),require("./JSON"),require("./matchMedia"),require("./NodeList"),require("./Object"),require("./performance"),require("./Promise"),require("./requestAnimationFrame"),require("./String"),require("./XMLHttpRequest");
},{"./Array":"eOaV","./console.log":"Gbf6","./CustomEvent":"UHND","./Date":"k6kx","./Element":"qYPQ","./Function":"pwJj","./getComputedStyle":"mtNM","./html5shiv":"vpoR","./JSON":"U1RK","./matchMedia":"CV5W","./NodeList":"LoD4","./Object":"aItv","./performance":"T6pD","./Promise":"ta1s","./requestAnimationFrame":"bvYo","./String":"GcUH","./XMLHttpRequest":"jkDS"}],"jVrw":[function(require,module,exports) {
"use strict";var s=function(s,t){this._target=s,this._tests={},this.addTests(t)},t=s.prototype;t.addTests=function(s){this._tests=Object.assign(this._tests,s)},t._supports=function(s){return void 0!==this._tests[s]&&("function"==typeof this._tests[s]&&(this._tests[s]=this._tests[s]()),this._tests[s])},t._addClass=function(s,t){t=t||"no-",this._supports(s)?this._target.classList.add(s):this._target.classList.add(t+s)},t.htmlClass=function(){var s;for(s in this._target.classList.remove("no-js"),this._target.classList.add("js"),this._tests)this._tests.hasOwnProperty(s)&&this._addClass(s)},module.exports=s;
},{}],"t68A":[function(require,module,exports) {
"use strict";module.exports=function(t){var r;return function(){return void 0===r&&(r=t.apply(this,arguments)),r}};
},{}],"gygx":[function(require,module,exports) {
"use strict";var o=require("./helpers/globals"),e=require("@marcom/ac-function/once");function t(){var e=o.getWindow(),t=o.getDocument(),n=o.getNavigator();return!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch||n.maxTouchPoints>0||n.msMaxTouchPoints>0)}module.exports=e(t),module.exports.original=t;
},{"./helpers/globals":"P7z6","@marcom/ac-function/once":"t68A"}],"Z3Mb":[function(require,module,exports) {
"use strict";var e=require("@marcom/ac-feature/touchAvailable");module.exports={touch:e,"progressive-image":!0};
},{"@marcom/ac-feature/touchAvailable":"gygx"}],"gcx9":[function(require,module,exports) {
"use strict";var t="data-focus-method",o="touch",s="mouse",i="key";function n(o,s){this._target=o||document.body,this._attr=s||t,this._focusMethod=this._lastFocusMethod=!1,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onWindowBlur=this._onWindowBlur.bind(this),this._bindEvents()}var h=n.prototype;h._bindEvents=function(){this._target.addEventListener("keydown",this._onKeyDown,!0),this._target.addEventListener("mousedown",this._onMouseDown,!0),this._target.addEventListener("touchstart",this._onTouchStart,!0),this._target.addEventListener("focus",this._onFocus,!0),this._target.addEventListener("blur",this._onBlur,!0),window.addEventListener("blur",this._onWindowBlur)},h._onKeyDown=function(t){this._focusMethod=i},h._onMouseDown=function(t){this._focusMethod!==o&&(this._focusMethod=s)},h._onTouchStart=function(t){this._focusMethod=o},h._onFocus=function(t){this._focusMethod||(this._focusMethod=this._lastFocusMethod),t.target.setAttribute(this._attr,this._focusMethod),this._lastFocusMethod=this._focusMethod,this._focusMethod=!1},h._onBlur=function(t){t.target.removeAttribute(this._attr)},h._onWindowBlur=function(t){this._focusMethod=!1},module.exports=n;
},{}],"Srbj":[function(require,module,exports) {
"use strict";require("@marcom/ac-polyfills");var e=require("./FeatureDetect"),t=require("./defaultTests");module.exports=new e(document.documentElement,t),module.exports.FeatureDetect=e;var r=require("./FocusManager");document.addEventListener&&document.addEventListener("DOMContentLoaded",function(){new r});
},{"@marcom/ac-polyfills":"MhVq","./FeatureDetect":"jVrw","./defaultTests":"Z3Mb","./FocusManager":"gcx9"}],"sj7B":[function(require,module,exports) {
"use strict";module.exports={browser:{safari:!1,chrome:!1,firefox:!1,ie:!1,opera:!1,android:!1,edge:!1,edgeChromium:!1,samsung:!1,version:{string:"",major:0,minor:0,patch:0,documentMode:!1}},os:{osx:!1,ios:!1,android:!1,windows:!1,linux:!1,fireos:!1,chromeos:!1,version:{string:"",major:0,minor:0,patch:0}}};
},{}],"OMo3":[function(require,module,exports) {
"use strict";module.exports={browser:[{name:"edge",userAgent:"Edge",version:["rv","Edge"],test:function(e){return e.ua.indexOf("Edge")>-1||"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"===e.ua}},{name:"edgeChromium",userAgent:"Edge",version:["rv","Edg"],test:function(e){return e.ua.indexOf("Edg")>-1&&-1===e.ua.indexOf("Edge")}},{name:"chrome",userAgent:"Chrome"},{name:"firefox",test:function(e){return e.ua.indexOf("Firefox")>-1&&-1===e.ua.indexOf("Opera")},version:"Firefox"},{name:"android",userAgent:"Android"},{name:"safari",test:function(e){return e.ua.indexOf("Safari")>-1&&e.vendor.indexOf("Apple")>-1},version:"Version"},{name:"ie",test:function(e){return e.ua.indexOf("IE")>-1||e.ua.indexOf("Trident")>-1},version:["MSIE","rv"],parseDocumentMode:function(){var e=!1;return document.documentMode&&(e=parseInt(document.documentMode,10)),e}},{name:"opera",userAgent:"Opera",version:["Version","Opera"]},{name:"samsung",userAgent:"SamsungBrowser"}],os:[{name:"windows",test:function(e){return e.ua.indexOf("Windows")>-1},version:"Windows NT"},{name:"osx",userAgent:"Mac",test:function(e){return e.ua.indexOf("Macintosh")>-1}},{name:"ios",test:function(e){return e.ua.indexOf("iPhone")>-1||e.ua.indexOf("iPad")>-1},version:["iPhone OS","CPU OS"]},{name:"linux",userAgent:"Linux",test:function(e){return(e.ua.indexOf("Linux")>-1||e.platform.indexOf("Linux")>-1)&&-1===e.ua.indexOf("Android")}},{name:"fireos",test:function(e){return e.ua.indexOf("Firefox")>-1&&e.ua.indexOf("Mobile")>-1},version:"rv"},{name:"android",userAgent:"Android",test:function(e){return e.ua.indexOf("Android")>-1}},{name:"chromeos",userAgent:"CrOS"}]};
},{}],"j2Fg":[function(require,module,exports) {
"use strict";var e=require("./defaults"),r=require("./dictionary");function n(e){return new RegExp(e+"[a-zA-Z\\s/:]+([0-9_.]+)","i")}function t(e,r){if("function"==typeof e.parseVersion)return e.parseVersion(r);var t=e.version||e.userAgent;"string"==typeof t&&(t=[t]);for(var o,s=t.length,i=0;i<s;i++)if((o=r.match(n(t[i])))&&o.length>1)return o[1].replace(/_/g,".");return!1}function o(e,r,n){for(var o,s,i=e.length,a=0;a<i;a++)if("function"==typeof e[a].test?!0===e[a].test(n)&&(o=e[a].name):n.ua.indexOf(e[a].userAgent)>-1&&(o=e[a].name),o){if(r[o]=!0,"string"==typeof(s=t(e[a],n.ua))){var u=s.split(".");r.version.string=s,u&&u.length>0&&(r.version.major=parseInt(u[0]||0),r.version.minor=parseInt(u[1]||0),r.version.patch=parseInt(u[2]||0))}else"edge"===o&&(r.version.string="12.0.0",r.version.major="12",r.version.minor="0",r.version.patch="0");return"function"==typeof e[a].parseDocumentMode&&(r.version.documentMode=e[a].parseDocumentMode()),r}return r}function s(n){var t={};return t.browser=o(r.browser,e.browser,n),t.os=o(r.os,e.os,n),t}module.exports=s;
},{"./defaults":"sj7B","./dictionary":"OMo3"}],"kIlq":[function(require,module,exports) {
"use strict";var r={ua:window.navigator.userAgent,platform:window.navigator.platform,vendor:window.navigator.vendor};module.exports=require("./parseUserAgent")(r);
},{"./parseUserAgent":"j2Fg"}],"cFMG":[function(require,module,exports) {
const ac_headjs=require("@marcom/ac-headjs"),uaDetect=require("@marcom/useragent-detect");ac_headjs.addTests({ie:uaDetect.browser.ie,edge:uaDetect.browser.edge,firefox:uaDetect.browser.firefox,safari:uaDetect.browser.safari,chrome:uaDetect.browser.chrome,ios:()=>{const e=["iPad","iPhone","iPod"].includes(navigator.platform),a="MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;return e||a}}),ac_headjs.htmlClass();
},{"@marcom/ac-headjs":"Srbj","@marcom/useragent-detect":"kIlq"}],"esqh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.zoomEnabled=exports.TextZoomIOS=void 0;let zoomEnabled=!1;exports.zoomEnabled=zoomEnabled;let zoomState=!1,dimensionTrackerEl=null;const checkZoomState=()=>{let e=dimensionTrackerEl.clientWidth/document.body.clientWidth,o=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0)<=780&&window.matchMedia("(orientation: landscape)").matches;e<1||o&&e<1?(document.documentElement.classList.add("text-zoom"),exports.zoomEnabled=zoomEnabled=!0):(document.documentElement.classList.remove("text-zoom"),exports.zoomEnabled=zoomEnabled=!1),zoomEnabled!==zoomState&&window.dispatchEvent(new CustomEvent("resize:text-zoom:ios",{zoomEnabled:zoomEnabled})),zoomState=zoomEnabled},RAF=()=>{window.requestAnimationFrame(()=>{checkZoomState(),setTimeout(()=>{RAF()},500)})},TextZoomIOS={start:()=>{window.addEventListener("DOMContentLoaded",()=>{dimensionTrackerEl=document.querySelector("[cssdimensionstracker=true]"),RAF()})}};exports.TextZoomIOS=TextZoomIOS;
},{}],"bXpv":[function(require,module,exports) {
"use strict";function e(){this._createElements(),this._bindEvents()}var t=e.prototype;t._bindEvents=function(){this._onResize=this._resize.bind(this)},t._createElements=function(){if("undefined"!=typeof document&&!this.span){this.span=document.createElement("span");var e=this.span.style;if(e.visibility="hidden",e.position="absolute",e.top="0",e.zIndex="-1",this.span.innerHTML="&nbsp;",!window.ResizeObserver){this.iframe=document.createElement("iframe");var t=this.iframe.style;t.position="absolute",t.top="0",t.left="0",t.width="100%",t.height="100%",this.span.appendChild(this.iframe)}document.body.appendChild(this.span)}},t.detect=function(e){this._createElements(),this.originalSize=e||17,this.currentSize=parseFloat(window.getComputedStyle(this.span)["font-size"]),this.currentSize>this.originalSize&&this._onResize(),this.isDetecting||(window.ResizeObserver?(this.resizeObserver=new ResizeObserver(this._onResize),this.resizeObserver.observe(this.span)):this.iframe.contentWindow.addEventListener("resize",this._onResize),this.isDetecting=!0)},t._resize=function(){this.currentSize=parseFloat(window.getComputedStyle(this.span)["font-size"]),this.originalSize<this.currentSize?document.documentElement.classList.add("text-zoom"):document.documentElement.classList.remove("text-zoom"),window.dispatchEvent(new Event("resize")),window.dispatchEvent(new CustomEvent("resize:text-zoom",{detail:this}))},t.getScale=function(){return this.currentSize/this.originalSize},t.remove=function(){this.isDetecting&&(this.resizeObserver&&this.resizeObserver.unobserve(this.span),this.iframe&&this.iframe.contentWindow.removeEventListener("resize",this._onResize),this.isDetecting=!1)},t.destroy=function(){this.remove(),this.span&&this.span.parentElement&&this.span.parentElement.removeChild(this.span),this.span=null,this.iframe=null,this.resizeObserver=null},module.exports=new e;
},{}],"wrbM":[function(require,module,exports) {
"use strict";var _coreBundle=require("../core/core-bundle"),_textZoomIos=require("./text-zoom-ios");const TextZoomLib=require("@marcom/ac-accessibility/TextZoom"),zoomBaseSize=getComputedStyle(document.documentElement).getPropertyValue("--text-zoom-baseline")||18;TextZoomLib.detect(zoomBaseSize),document.documentElement.classList.contains("ios")&&_textZoomIos.TextZoomIOS.start(),new _coreBundle.CoreBundle(TextZoomLib,"textZoom");
},{"../core/core-bundle":"hjXO","./text-zoom-ios":"esqh","@marcom/ac-accessibility/TextZoom":"bXpv"}],"h5yn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PinchZoom=void 0;const checkZoomState=()=>{document.addEventListener("gestureend",function(e){e.scale<1||e.scale>1&&(document.documentElement.classList.add("pinch-zoom"),window.dispatchEvent(new CustomEvent("resize:pinch-zoom")))},!1)};checkZoomState();const PinchZoom={start:checkZoomState};exports.PinchZoom=PinchZoom;
},{}],"TyNd":[function(require,module,exports) {
const calculateBrowserZoom=()=>{var e=!1;window.outerWidth/window.innerWidth>1&&(e=!0),e?(document.documentElement.classList.add("browser-zoom"),window.dispatchEvent(new CustomEvent("browser-zoom:enabled",{detail:{zoomed:e}}))):(document.documentElement.classList.remove("browser-zoom"),window.dispatchEvent(new CustomEvent("browser-zoom:disabled",{detail:{zoomed:e}}))),window.dispatchEvent(new CustomEvent("browser-zoom",{detail:{zoomed:e}}))};window.addEventListener("resize",()=>calculateBrowserZoom()),calculateBrowserZoom();
},{}],"osan":[function(require,module,exports) {
"use strict";function t(){this._events={}}var e=t.prototype;e.on=function(t,e){this._events[t]=this._events[t]||[],this._events[t].unshift(e)},e.once=function(t,e){var n=this;this.on(t,function s(i){n.off(t,s),void 0!==i?e(i):e()})},e.off=function(t,e){if(this.has(t)){if(1===arguments.length)return this._events[t]=null,void delete this._events[t];var n=this._events[t].indexOf(e);-1!==n&&this._events[t].splice(n,1)}},e.trigger=function(t,e){if(this.has(t))for(var n=this._events[t].length-1;n>=0;n--)void 0!==e?this._events[t][n](e):this._events[t][n]()},e.has=function(t){return t in this._events!=!1&&0!==this._events[t].length},e.destroy=function(){for(var t in this._events)this._events[t]=null;this._events=null},module.exports=t;
},{}],"PZ1q":[function(require,module,exports) {
"use strict";module.exports={EventEmitterMicro:require("./ac-event-emitter-micro/EventEmitterMicro")};
},{"./ac-event-emitter-micro/EventEmitterMicro":"osan"}],"wSLW":[function(require,module,exports) {
"use strict";var n="undefined"!=typeof window?window:{},e="AC",t="SharedInstance",r=n[e],u=function(){var n={};return{get:function(e,t){var r=null;return n[e]&&n[e][t]&&(r=n[e][t]),r},set:function(e,t,r){return n[e]||(n[e]={}),n[e][t]="function"==typeof r?new r:r,n[e][t]},share:function(n,e,t){var r=this.get(n,e);return r||(r=this.set(n,e,t)),r},remove:function(e,t){var r=typeof t;if("string"!==r&&"number"!==r)n[e]&&(n[e]=null);else{if(!n[e]||!n[e][t])return;n[e][t]=null}}}}();r||(r=n[e]={}),r[t]||(r[t]=u),module.exports=r[t];
},{}],"sLzD":[function(require,module,exports) {
"use strict";module.exports={SharedInstance:require("./ac-shared-instance/SharedInstance")};
},{"./ac-shared-instance/SharedInstance":"wSLW"}],"puz2":[function(require,module,exports) {
module.exports={majorVersionNumber:"3.x"};
},{}],"k30Z":[function(require,module,exports) {
"use strict";var s,t=require("@marcom/ac-event-emitter-micro/EventEmitterMicro");function e(s){s=s||{},this._reset(),this.updatePhases(),this.eventEmitter=new t,this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}(s=e.prototype).frameRequestedPhase="requested",s.startPhase="start",s.runPhases=["update","external","draw"],s.endPhase="end",s.disabledPhase="disabled",s.beforePhaseEventPrefix="before:",s.afterPhaseEventPrefix="after:",s.subscribe=function(s,t){return this._totalSubscribeCount++,this._nextFrameSubscribers[s.id]||(t?this._nextFrameSubscribersOrder.unshift(s.id):this._nextFrameSubscribersOrder.push(s.id),this._nextFrameSubscribers[s.id]=s,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},s.subscribeImmediate=function(s,t){return this._totalSubscribeCount++,this._subscribers[s.id]||(t?this._subscribersOrder.splice(this._currentSubscriberIndex+1,0,s.id):this._subscribersOrder.unshift(s.id),this._subscribers[s.id]=s,this._subscriberArrayLength++,this._subscriberCount++),this._totalSubscribeCount},s.unsubscribe=function(s){return!!this._nextFrameSubscribers[s.id]&&(this._nextFrameSubscribers[s.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},s.getSubscribeID=function(){return this._totalSubscribeCount+=1},s.destroy=function(){var s=this._cancel();return this.eventEmitter.destroy(),this.eventEmitter=null,this.phases=null,this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,s},s.useExternalAnimationFrame=function(s){if("boolean"==typeof s){var t=this._isUsingExternalAnimationFrame;return s&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||s||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=s,s?this._boundOnExternalAnimationFrame:t||!1}},s.updatePhases=function(){this.phases||(this.phases=[]),this.phases.length=0,this.phases.push(this.frameRequestedPhase),this.phases.push(this.startPhase),Array.prototype.push.apply(this.phases,this.runPhases),this.phases.push(this.endPhase),this._runPhasesLength=this.runPhases.length,this._phasesLength=this.phases.length},s._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this.phase===this.disabledPhase&&(this.phaseIndex=0,this.phase=this.phases[this.phaseIndex]),!0},s._cancel=function(){var s=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,s=!0),this._isRunning||this._reset(),s},s._onAnimationFrame=function(s){for(this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this.phaseIndex=0,this.phase=this.phases[this.phaseIndex],this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=s-this.lastFrameTime,this.lastFrameTime=s,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=s,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameStart(this._rafData);for(this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._runPhaseIndex=0;this._runPhaseIndex<this._runPhasesLength;this._runPhaseIndex++){for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]].trigger(this.phase,this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase)}for(this.phaseIndex++,this.phase=this.phases[this.phaseIndex],this.eventEmitter.trigger(this.beforePhaseEventPrefix+this.phase),this._currentSubscriberIndex=0;this._currentSubscriberIndex<this._subscriberArrayLength;this._currentSubscriberIndex++)null!==this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]&&!1===this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._didDestroy&&this._subscribers[this._subscribersOrder[this._currentSubscriberIndex]]._onAnimationFrameEnd(this._rafData);this.eventEmitter.trigger(this.afterPhaseEventPrefix+this.phase),this._willRun?(this.phaseIndex=0,this.phaseIndex=this.phases[this.phaseIndex]):this._reset()},s._onExternalAnimationFrame=function(s){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(s)},s._reset=function(){this._rafData||(this._rafData={}),this._rafData.time=0,this._rafData.delta=0,this._rafData.fps=0,this._rafData.naturalFps=0,this._rafData.timeNow=0,this._subscribers={},this._subscribersOrder=[],this._currentSubscriberIndex=-1,this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0,this._runPhaseIndex=-1,this.phaseIndex=-1,this.phase=this.disabledPhase},module.exports=e;
},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":"osan"}],"BgYU":[function(require,module,exports) {
"use strict";var e=require("@marcom/ac-shared-instance").SharedInstance,r=require("../.release-info.js").majorVersionNumber,a=require("./RAFExecutor");module.exports=e.share("@marcom/ac-raf-emitter/sharedRAFExecutorInstance",r,a);
},{"@marcom/ac-shared-instance":"sLzD","../.release-info.js":"puz2","./RAFExecutor":"k30Z"}],"sFwl":[function(require,module,exports) {
"use strict";var r=require("@marcom/ac-shared-instance").SharedInstance,e=require("../.release-info.js").majorVersionNumber,t=function(){this._currentID=0};t.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},module.exports=r.share("@marcom/ac-raf-emitter/sharedRAFEmitterIDGeneratorInstance",e,t);
},{"@marcom/ac-shared-instance":"sLzD","../.release-info.js":"puz2"}],"cGkN":[function(require,module,exports) {
"use strict";var t,i=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,e=require("./sharedRAFExecutorInstance"),n=require("./sharedRAFEmitterIDGeneratorInstance");function r(t){t=t||{},i.call(this),this.id=n.getNewID(),this.executor=t.executor||e,this._reset(),this._willRun=!1,this._didDestroy=!1}(t=r.prototype=Object.create(i.prototype)).run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},t.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},t.destroy=function(){var t=this.willRun();return this.cancel(),this.executor=null,i.prototype.destroy.call(this),this._didDestroy=!0,t},t.willRun=function(){return this._willRun},t.isRunning=function(){return this._isRunning},t._subscribe=function(){return this.executor.subscribe(this)},t._unsubscribe=function(){return this.executor.unsubscribe(this)},t._onAnimationFrameStart=function(t){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",t))},t._onAnimationFrameEnd=function(t){this._willRun||(this.trigger("stop",t),this._reset())},t._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},module.exports=r;
},{"@marcom/ac-event-emitter-micro":"PZ1q","./sharedRAFExecutorInstance":"BgYU","./sharedRAFEmitterIDGeneratorInstance":"sFwl"}],"z4Ds":[function(require,module,exports) {
"use strict";var t=require("./RAFEmitter"),e=function(e){t.call(this,e)},r=e.prototype=Object.create(t.prototype);r._subscribe=function(){return this.executor.subscribe(this,!0)},module.exports=e;
},{"./RAFEmitter":"cGkN"}],"oaPC":[function(require,module,exports) {
"use strict";var e=require("./SingleCallRAFEmitter"),t=function(t){this.phase=t,this.rafEmitter=new e,this._cachePhaseIndex(),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._onBeforeRAFExecutorStart=this._onBeforeRAFExecutorStart.bind(this),this._onBeforeRAFExecutorPhase=this._onBeforeRAFExecutorPhase.bind(this),this._onAfterRAFExecutorPhase=this._onAfterRAFExecutorPhase.bind(this),this.rafEmitter.on(this.phase,this._onRAFExecuted.bind(this)),this.rafEmitter.executor.eventEmitter.on("before:start",this._onBeforeRAFExecutorStart),this.rafEmitter.executor.eventEmitter.on("before:"+this.phase,this._onBeforeRAFExecutorPhase),this.rafEmitter.executor.eventEmitter.on("after:"+this.phase,this._onAfterRAFExecutorPhase),this._frameCallbacks=[],this._currentFrameCallbacks=[],this._nextFrameCallbacks=[],this._phaseActive=!1,this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._currentFrameCallbacksLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},a=t.prototype;a.requestAnimationFrame=function(e,t){return!0===t&&this.rafEmitter.executor.phaseIndex>0&&this.rafEmitter.executor.phaseIndex<=this.phaseIndex?this._phaseActive?(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!0),this._frameCallbacks.push(this._currentFrameID,e),this._frameCallbackLength+=2):(this._currentFrameID=this.rafEmitter.executor.subscribeImmediate(this.rafEmitter,!1),this._currentFrameCallbacks.push(this._currentFrameID,e),this._currentFrameCallbacksLength+=2):(this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,e),this._nextFrameCallbacksLength+=2),this._currentFrameID},a.cancelAnimationFrame=function(e){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelNextAnimationFrame():(this._cancelFrameIdx=this._currentFrameCallbacks.indexOf(e),this._cancelFrameIdx>-1?this._cancelCurrentAnimationFrame():(this._cancelFrameIdx=this._frameCallbacks.indexOf(e),this._cancelFrameIdx>-1&&this._cancelRunningAnimationFrame()))},a._onRAFExecuted=function(e){for(this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](e.time,e);this._frameCallbacks.length=0,this._frameCallbackLength=0},a._onBeforeRAFExecutorStart=function(){Array.prototype.push.apply(this._currentFrameCallbacks,this._nextFrameCallbacks.splice(0,this._nextFrameCallbacksLength)),this._currentFrameCallbacksLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks.length=0,this._nextFrameCallbacksLength=0},a._onBeforeRAFExecutorPhase=function(){this._phaseActive=!0,Array.prototype.push.apply(this._frameCallbacks,this._currentFrameCallbacks.splice(0,this._currentFrameCallbacksLength)),this._frameCallbackLength=this._currentFrameCallbacksLength,this._currentFrameCallbacks.length=0,this._currentFrameCallbacksLength=0},a._onAfterRAFExecutorPhase=function(){this._phaseActive=!1},a._cachePhaseIndex=function(){this.phaseIndex=this.rafEmitter.executor.phases.indexOf(this.phase)},a._cancelRunningAnimationFrame=function(){this._frameCallbacks.splice(this._cancelFrameIdx,2),this._frameCallbackLength-=2},a._cancelCurrentAnimationFrame=function(){this._currentFrameCallbacks.splice(this._cancelFrameIdx,2),this._currentFrameCallbacksLength-=2},a._cancelNextAnimationFrame=function(){this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel()},module.exports=t;
},{"./SingleCallRAFEmitter":"z4Ds"}],"kRv4":[function(require,module,exports) {
"use strict";var e=require("./RAFInterface"),t=function(){this.events={}},n=t.prototype;n.requestAnimationFrame=function(t){return this.events[t]||(this.events[t]=new e(t)),this.events[t].requestAnimationFrame},n.cancelAnimationFrame=function(t){return this.events[t]||(this.events[t]=new e(t)),this.events[t].cancelAnimationFrame},module.exports=new t;
},{"./RAFInterface":"oaPC"}],"w3n5":[function(require,module,exports) {
"use strict";var e=require("./RAFInterfaceController");module.exports=e.requestAnimationFrame("update");
},{"./RAFInterfaceController":"kRv4"}],"Pao5":[function(require,module,exports) {
"use strict";var t=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;const e={};"undefined"!=typeof window&&(e.update=require("@marcom/ac-raf-emitter/update"));var i={ID:"viewport-emitter",OPTIONS:{removeNamespace:!0}},n={DOM_DISPATCH:"data-viewport-emitter-dispatch",STATE:"data-viewport-emitter-state"},r="::before",a={RETINA:"only screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min-resolution: 1.5dppx), screen and (min-resolution: 144dpi)",PORTRAIT:"only screen and (orientation: portrait)",LANDSCAPE:"only screen and (orientation: landscape)"},o={any:"change:any",orientation:"change:orientation",retina:"change:retina",viewport:"change:viewport"};function s(e,n){t.call(this),this._id=e||i.ID,this._options=Object.assign({},i.OPTIONS,n),this._allowDOMEventDispatch=!1,this._allowElementStateData=!1,this._options.removeNamespace="boolean"!=typeof this._options.removeNamespace||this._options.removeNamespace,this._el=this._initViewportEl(this._id),this._resizing=!1,this._mediaQueryLists={resolution:{retina:window.matchMedia(a.RETINA)},orientation:{portrait:window.matchMedia(a.PORTRAIT),landscape:window.matchMedia(a.LANDSCAPE)}},this._viewport=this._getViewport(this._options.removeNamespace),this._retina=this._getRetina(this._mediaQueryLists.resolution.retina),this._orientation=this._initOrientation(),this._addListeners(),this._updateElementStateData()}Object.defineProperty(s,"DOM_DISPATCH_ATTRIBUTE",{get:function(){return n.DOM_DISPATCH}}),Object.defineProperty(s,"DOM_STATE_ATTRIBUTE",{get:function(){return n.STATE}});var h=s.prototype=Object.create(t.prototype);Object.defineProperty(h,"id",{get:function(){return this._id}}),Object.defineProperty(h,"element",{get:function(){return this._el}}),Object.defineProperty(h,"mediaQueryLists",{get:function(){return this._mediaQueryLists}}),Object.defineProperty(h,"viewport",{get:function(){return this._viewport}}),Object.defineProperty(h,"retina",{get:function(){return this._retina}}),Object.defineProperty(h,"orientation",{get:function(){return this._orientation}}),Object.defineProperty(h,"hasDomDispatch",{get:function(){return this._allowDOMEventDispatch}}),h.destroy=function(){for(var e in this._removeListeners(),this._options)this._options[e]=null;for(var i in this._mediaQueryLists){var n=this._mediaQueryLists[i];for(var r in n)n[r]=null}this._id=null,this._el=null,this._viewport=null,this._retina=null,this._orientation=null,t.prototype.destroy.call(this)},h._initViewportEl=function(t){var e=document.getElementById(t);return e||((e=document.createElement("div")).id=t,e=document.body.appendChild(e)),e.hasAttribute(n.DOM_DISPATCH)||(e.setAttribute(n.DOM_DISPATCH,""),this._allowDOMEventDispatch=!0),e.hasAttribute(n.STATE)||(this._allowElementStateData=!0),e},h._dispatch=function(t,e){var i={viewport:this._viewport,orientation:this._orientation,retina:this._retina};if(this._allowDOMEventDispatch){var n=new CustomEvent(t,{detail:e}),r=new CustomEvent(o.any,{detail:i});this._el.dispatchEvent(n),this._el.dispatchEvent(r)}this.trigger(t,e),this.trigger(o.any,i)},h._addListeners=function(){this._onOrientationChange=this._onOrientationChange.bind(this),this._onRetinaChange=this._onRetinaChange.bind(this),this._onViewportChange=this._onViewportChange.bind(this),this._onViewportChangeUpdate=this._onViewportChangeUpdate.bind(this),this._mediaQueryLists.orientation.portrait.addListener(this._onOrientationChange),this._mediaQueryLists.orientation.landscape.addListener(this._onOrientationChange),this._mediaQueryLists.resolution.retina.addListener(this._onRetinaChange),window.addEventListener("resize",this._onViewportChange)},h._removeListeners=function(){this._mediaQueryLists.orientation.portrait.removeListener(this._onOrientationChange),this._mediaQueryLists.orientation.landscape.removeListener(this._onOrientationChange),this._mediaQueryLists.resolution.retina.removeListener(this._onRetinaChange),window.removeEventListener("resize",this._onViewportChange)},h._updateElementStateData=function(){if(this._allowElementStateData){var t=JSON.stringify({viewport:this._viewport,orientation:this._orientation,retina:this._retina});this._el.setAttribute(n.STATE,t)}},h._getViewport=function(t){var e=window.getComputedStyle(this._el,r).content;return e?(e=e.replace(/["']/g,""),t?e.split(":").pop():e):null},h._getRetina=function(t){return t.matches},h._getOrientation=function(t){var e=this._orientation;if(t.matches){return t.media.match(/portrait|landscape/)[0]}return e},h._initOrientation=function(){var t=this._getOrientation(this._mediaQueryLists.orientation.portrait);return t||this._getOrientation(this._mediaQueryLists.orientation.landscape)},h._onViewportChange=function(){this._resizing||(this._resizing=!0,e.update(this._onViewportChangeUpdate))},h._onViewportChangeUpdate=function(){var t=this._viewport;if(this._viewport=this._getViewport(this._options.removeNamespace),t!==this._viewport){var e={from:t,to:this._viewport};this._updateElementStateData(),this._dispatch(o.viewport,e)}this._resizing=!1},h._onRetinaChange=function(t){var e=this._retina;if(this._retina=this._getRetina(t),e!==this._retina){var i={from:e,to:this._retina};this._updateElementStateData(),this._dispatch(o.retina,i)}},h._onOrientationChange=function(t){var e=this._orientation;if(this._orientation=this._getOrientation(t),e!==this._orientation){var i={from:e,to:this._orientation};this._updateElementStateData(),this._dispatch(o.orientation,i)}},module.exports=s;
},{"@marcom/ac-event-emitter-micro":"PZ1q","@marcom/ac-raf-emitter/update":"w3n5"}],"Mf8r":[function(require,module,exports) {
"use strict";var e=require("./ViewportEmitter");module.exports=new e;
},{"./ViewportEmitter":"Pao5"}],"hiNs":[function(require,module,exports) {
"use strict";var _coreBundle=require("../core/core-bundle");const Lib=require("@marcom/viewport-emitter");new _coreBundle.CoreBundle(Lib,"viewportEmitter");
},{"../core/core-bundle":"hjXO","@marcom/viewport-emitter":"Mf8r"}],"Gwvq":[function(require,module,exports) {
class s{}module.exports=s;
},{}],"YAwu":[function(require,module,exports) {
class t{constructor(t,s,i){this.epsilon=parseFloat(s),this.snapAtCreation=i,this.initialValue=t,this.target=t,this.current=t,this.previousValue=t,this.isActive=!1}}module.exports=t;
},{}],"qMCN":[function(require,module,exports) {
const s=require("./TargetValue");class t extends s{constructor(s,t,e,i,r=!1,u){super(s,t,e),this.key=i,this.round=r,this.suffix=u}set(s){let t=this.current;this.round&&(t=Math.round(t)),this.suffix&&(t+=this.suffix),s[this.key]=t}}module.exports=t;
},{"./TargetValue":"YAwu"}],"xSfw":[function(require,module,exports) {
"use strict";const e={GUI_INSTANCE:null,ANIM_INSTANCE:null,VIEWPORT_EMITTER_ELEMENT:void 0,LOCAL_STORAGE_KEYS:{GuiPosition:"anim-ui.position",GroupCollapsedStates:"anim-ui.group-collapsed-states",scrollY:"anim-ui.scrollY-position",path:"anim-ui.path"},RESIZE_TIMEOUT:-1,BREAKPOINTS:[{name:"S",mediaQuery:"only screen and (max-width: 734px)"},{name:"M",mediaQuery:"only screen and (max-width: 1068px)"},{name:"L",mediaQuery:"only screen and (min-width: 1069px)"}],getBreakpoint:function(){for(let E=0;E<e.BREAKPOINTS.length;E++){let t=e.BREAKPOINTS[E];if(window.matchMedia(t.mediaQuery).matches)return t.name}},KeyframeDefaults:{ease:1,epsilon:.05,preserveState:!1,easeFunctionString:"linear",easeFunction:"linear",hold:!1,snapAtCreation:!1,toggle:!1,breakpointMask:"SMLX",event:"",disabledWhen:[],cssClass:""},KeyframeTypes:{Interpolation:0,InterpolationForward:1,CSSClass:2,Event:3},EVENTS:{ON_DOM_KEYFRAMES_CREATED:"ON_DOM_KEYFRAMES_CREATED",ON_DOM_GROUPS_CREATED:"ON_DOM_GROUPS_CREATED",ON_GROUP_CREATED:"ON_GROUP_CREATED",ON_KEYFRAME_UPDATED:"ON_KEYFRAME_UPDATED",ON_TIMELINE_START:"ON_TIMELINE_START",ON_TIMELINE_UPDATE:"ON_TIMELINE_UPDATE",ON_TIMELINE_COMPLETE:"ON_TIMELINE_COMPLETE",ON_CHAPTER_INITIATED:"ON_CHAPTER_INITIATED",ON_CHAPTER_OCCURRED:"ON_CHAPTER_OCCURRED",ON_CHAPTER_COMPLETED:"ON_CHAPTER_COMPLETED"},PageEvents:{ON_SCROLL:"ON_SCROLL",ON_RESIZE_IMMEDIATE:"ON_RESIZE_IMMEDIATE",ON_RESIZE_DEBOUNCED:"ON_RESIZE_DEBOUNCED",ON_BREAKPOINT_CHANGE:"ON_BREAKPOINT_CHANGE"},KeyframeJSONReservedWords:["event","cssClass","style","anchors","start","end","epsilon","easeFunction","ease","breakpointMask","disabledWhen"],TweenProps:require("./TweenProps"),TargetValue:require("./TargetValue"),CSSTargetValue:require("./CSSTargetValue"),pageMetrics:new function(){this.scrollX=0,this.scrollY=0,this.windowWidth=0,this.windowHeight=0,this.documentOffsetX=0,this.documentOffsetY=0,this.previousBreakpoint="",this.breakpoint=""},KeyframeComparison:function(e,E){return e.start<E.start?-1:e.start>E.start?1:0}};module.exports=e;
},{"./TweenProps":"Gwvq","./TargetValue":"YAwu","./CSSTargetValue":"qMCN"}],"aMKG":[function(require,module,exports) {
"use strict";module.exports={lerp:function(n,t,r){return t+(r-t)*n},map:function(n,t,r,a,u){return a+(u-a)*(n-t)/(r-t)},mapClamp:function(n,t,r,a,u){var o=a+(u-a)*(n-t)/(r-t);return Math.max(a,Math.min(u,o))},norm:function(n,t,r){return(n-t)/(r-t)},clamp:function(n,t,r){return Math.max(t,Math.min(r,n))},randFloat:function(n,t){return Math.random()*(t-n)+n},randInt:function(n,t){return Math.floor(Math.random()*(t-n)+n)}};
},{}],"WPv3":[function(require,module,exports) {
"use strict";class t{constructor(){this.linear=function(t){return t},this.easeInQuad=function(t){return t*t},this.easeOutQuad=function(t){return t*(2-t)},this.easeInOutQuad=function(t){return t<.5?2*t*t:(4-2*t)*t-1},this.easeInSin=function(t){return 1+Math.sin(Math.PI/2*t-Math.PI/2)},this.easeOutSin=function(t){return Math.sin(Math.PI/2*t)},this.easeInOutSin=function(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2},this.easeInElastic=function(t){return 0===t?t:(.04-.04/t)*Math.sin(25*t)+1},this.easeOutElastic=function(t){return.04*t/--t*Math.sin(25*t)},this.easeInOutElastic=function(t){return(t-=.5)<0?(.02+.01/t)*Math.sin(50*t):(.02-.01/t)*Math.sin(50*t)+1},this.easeOutBack=function(t){return(t-=1)*t*(2.70158*t+1.70158)+1},this.easeInCubic=function(t){return t*t*t},this.easeOutCubic=function(t){return--t*t*t+1},this.easeInOutCubic=function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},this.easeInQuart=function(t){return t*t*t*t},this.easeOutQuart=function(t){return 1- --t*t*t*t},this.easeInOutQuart=function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},this.easeInQuint=function(t){return t*t*t*t*t},this.easeOutQuint=function(t){return 1+--t*t*t*t*t},this.easeInOutQuint=function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}}module.exports=new t;
},{}],"gdR6":[function(require,module,exports) {
"use strict";const t=1e-5,e=Math.abs,r=5;class s{constructor(t,e,r,s){this.cp=new Float32Array(6),this.cp[0]=3*t,this.cp[1]=3*(r-t)-this.cp[0],this.cp[2]=1-this.cp[0]-this.cp[1],this.cp[3]=3*e,this.cp[4]=3*(s-e)-this.cp[3],this.cp[5]=1-this.cp[3]-this.cp[4]}sampleCurveX(t){return((this.cp[2]*t+this.cp[1])*t+this.cp[0])*t}sampleCurveY(t){return((this.cp[5]*t+this.cp[4])*t+this.cp[3])*t}sampleCurveDerivativeX(t){return(3*this.cp[2]*t+2*this.cp[1])*t+this.cp[0]}solveCurveX(s){var i,c,h,p,u,n;for(h=s,n=0;n<r;n++){if(p=this.sampleCurveX(h)-s,e(p)<t)return h;if(u=this.sampleCurveDerivativeX(h),e(u)<t)break;h-=p/u}if((h=s)<(i=0))return i;if(h>(c=1))return c;for(;i<c;){if(p=this.sampleCurveX(h),e(p-s)<t)return h;s>p?i=h:c=h,h=.5*(c-i)+i}return h}solve(t){return this.sampleCurveY(this.solveCurveX(t))}}const i=/\d*\.?\d+/g;s.fromCSSString=function(t){let e=t.match(i);if(4!==e.length)throw`UnitBezier could not convert ${t} to cubic-bezier`;let r=e.map(Number),c=new s(r[0],r[1],r[2],r[3]);return c.solve.bind(c)},module.exports=s;
},{}],"jace":[function(require,module,exports) {
"use strict";const{map:t}=require("@marcom/sm-math-utils"),s={};class i{constructor(t,s,i,h){this.mass=t,this.stiffness=s,this.damping=i,this.initialVelocity=h,this.m_w0=Math.sqrt(this.stiffness/this.mass),this.m_zeta=this.damping/(2*Math.sqrt(this.stiffness*this.mass)),this.m_zeta<1?(this.m_wd=this.m_w0*Math.sqrt(1-this.m_zeta*this.m_zeta),this.m_A=1,this.m_B=(this.m_zeta*this.m_w0-this.initialVelocity)/this.m_wd):(this.m_wd=0,this.m_A=1,this.m_B=-this.initialVelocity+this.m_w0)}solve(t){return 1-(t=this.m_zeta<1?Math.exp(-t*this.m_zeta*this.m_w0)*(this.m_A*Math.cos(this.m_wd*t)+this.m_B*Math.sin(this.m_wd*t)):(this.m_A+this.m_B*t)*Math.exp(-t*this.m_w0))}}const h=/\d*\.?\d+/g;i.fromCSSString=function(m){let e=m.match(h);if(4!==e.length)throw`SpringEasing could not convert ${cssString} to spring params`;let n=e.map(Number),a=new i(...n);const r=a.solve.bind(a);let _=0;let o=function(){if(s[m])return s[m];let t,i=0;for(;;)if(1===r(_+=1/6)){if(++i>=16){t=_*(1/6);break}}else i=0;return s[m]=t,s[m]}();return function(s){return 0===s||1===s?s:r(t(s,0,1,0,o))}},module.exports=i;
},{"@marcom/sm-math-utils":"aMKG"}],"ssUI":[function(require,module,exports) {
const e=function(e){return e.reduce((e,n)=>(e[n]=n,e),{})};module.exports=e;
},{}],"yH60":[function(require,module,exports) {
module.exports=function(e,r){if("string"!=typeof e)return e;try{return(r||document).querySelector(e)||document.querySelector(e)}catch(t){return!1}};
},{}],"LNZL":[function(require,module,exports) {
const o=()=>Math.random().toString(16).slice(-4);module.exports=o;
},{}],"eCn3":[function(require,module,exports) {
"use strict";const e=require("../Model/AnimSystemModel"),t=require("../Model/TargetValue"),s=require("@marcom/sm-math-utils"),r=require("../Model/EasingFunctions"),i=require("../Model/UnitBezier"),n=require("../Model/SpringEasing"),a=require("../utils/arrayToObject"),o=require("../utils/toValidAnchor"),h=require("../Model/UUID");class l{constructor(t,s){this.controller=t,this.anchors=[],this.jsonProps=s,this.ease=t.group.defaultEase,this.easeFunction=r.linear,this.start=0,this.end=0,this.localT=0,this.curvedT=0,this.id=0,this.event="",this.needsEventDispatch=!1,this.snapAtCreation=!1,this.isEnabled=!1,this.animValues={},this.breakpointMask="SMLX",this.disabledWhen=[],this.keyframeType=e.KeyframeTypes.Interpolation,this.hold=!1,this.preserveState=!1,this.markedForRemoval=!1;let i=!1;Object.defineProperty(this,"hidden",{get:()=>i,set(e){i=e,t.group.keyframesDirty=!0}}),this.uuid=h(),this.destroyed=!1}destroy(){this.destroyed=!0,this.controller=null,this.disabledWhen=null,this.anchors=null,this.jsonProps=null,this.easeFunction=null,this.animValues=null}remove(){return this.controller.removeKeyframe(this)}parseOptions(s){this.jsonProps=s,s.relativeTo&&console.error(`KeyframeError: relativeTo has been removed. Use 'anchors' property instead. Found 'relativeTo':"${s.relativeTo}"`),void 0===s.end&&void 0===s.duration&&(s.end=s.start),""!==s.anchors&&s.anchors?(this.anchors=[],s.anchors=Array.isArray(s.anchors)?s.anchors:[s.anchors],s.anchors.forEach((e,t)=>{let r=o(e,this.controller.group.element);if(!r){let r="";return"string"==typeof e&&(r=" Provided value was a string, so a failed attempt was made to find anchor with the provided querystring in group.element, or in the document."),void console.warn("Keyframe on",this.controller.element,` failed to find anchor at index ${t} in array`,s.anchors,`. Anchors must be JS Object references, Elements references, or valid query selector strings. ${r}`)}this.anchors.push(r),this.controller.group.metrics.add(r)})):(this.anchors=[],s.anchors=[]),s.ease?this.ease=parseFloat(s.ease):s.ease=this.ease,s.hasOwnProperty("snapAtCreation")?this.snapAtCreation=s.snapAtCreation:s.snapAtCreation=this.snapAtCreation,s.easeFunction||(s.easeFunction=e.KeyframeDefaults.easeFunctionString),s.breakpointMask?this.breakpointMask=s.breakpointMask:s.breakpointMask=this.breakpointMask,s.disabledWhen?this.disabledWhen=Array.isArray(s.disabledWhen)?s.disabledWhen:[s.disabledWhen]:s.disabledWhen=this.disabledWhen,s.hasOwnProperty("hold")?this.hold=s.hold:s.hold=this.hold,s.hasOwnProperty("preserveState")?this.preserveState=s.preserveState:s.preserveState=e.KeyframeDefaults.preserveState,this.easeFunction=r[s.easeFunction],r.hasOwnProperty(s.easeFunction)||(s.easeFunction.includes("bezier")?this.easeFunction=i.fromCSSString(s.easeFunction):s.easeFunction.includes("spring")?this.easeFunction=n.fromCSSString(s.easeFunction):console.error("Keyframe parseOptions cannot find 'easeFunction' named '"+s.easeFunction+"'"));for(let r in s){if(-1!==e.KeyframeJSONReservedWords.indexOf(r))continue;let i=s[r];if(!Array.isArray(i))continue;if(1===i.length&&(i[0]=null,i[1]=i[0]),this.animValues[r]=this.controller.group.expressionParser.parseArray(this,i),void 0===this.controller.tweenProps[r]||!this.controller._ownerIsElement){let s=0;this.controller._ownerIsElement||(s=this.controller.element[r]||0);let i=new t(s,e.KeyframeDefaults.epsilon,this.snapAtCreation);this.controller.tweenProps[r]=i}let n=this.controller.tweenProps[r];if(s.epsilon)n.epsilon=s.epsilon;else{let t=Math.abs(this.animValues[r][0]-this.animValues[r][1]),s=Math.min(.001*t,n.epsilon,e.KeyframeDefaults.epsilon);n.epsilon=Math.max(s,1e-4)}}this.keyframeType=this.hold?e.KeyframeTypes.InterpolationForward:e.KeyframeTypes.Interpolation,s.event&&(this.event=s.event)}overwriteProps(e){this.animValues={};let t=Object.assign({},this.jsonProps,e);this.controller.updateKeyframe(this,t)}updateLocalProgress(e){if(this.start===this.end||e<this.start||e>this.end)return this.localT=e<this.start?this.hold?this.localT:0:e>this.end?1:0,void(this.curvedT=this.easeFunction(this.localT));const t=(e-this.start)/(this.end-this.start),r=this.hold?this.localT:0;this.localT=s.clamp(t,r,1),this.curvedT=this.easeFunction(this.localT)}reconcile(e){let t=this.animValues[e],s=this.controller.tweenProps[e];s.initialValue=t[0],s.target=t[0]+this.curvedT*(t[1]-t[0]),s.current!==s.target&&(s.current=s.target,this.needsEventDispatch||(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this)))}reset(e){this.localT=e||0;var t=this.ease;this.ease=1;for(let s in this.animValues)this.reconcile(s);this.ease=t}onDOMRead(e){let t=this.animValues[e],s=this.controller.tweenProps[e];s.target=t[0]+this.curvedT*(t[1]-t[0]);let r=s.current;s.current+=(s.target-s.current)*this.ease;let i=s.current-s.target;i<s.epsilon&&i>-s.epsilon&&(s.current=s.target,i=0),""===this.event||this.needsEventDispatch||(i>s.epsilon||i<-s.epsilon||0===i&&r!==s.current)&&(this.needsEventDispatch=!0,this.controller.keyframesRequiringDispatch.push(this))}isInRange(e){return e>=this.start&&e<=this.end}setEnabled(t){t=t||a(Array.from(document.documentElement.classList));let s=-1!==this.breakpointMask.indexOf(e.pageMetrics.breakpoint),r=!1;return this.disabledWhen.length>0&&(r=this.disabledWhen.some(e=>void 0!==t[e])),this.isEnabled=s&&!r,this.isEnabled}evaluateConstraints(){this.start=this.controller.group.expressionParser.parseTimeValue(this,this.jsonProps.start),this.end=this.controller.group.expressionParser.parseTimeValue(this,this.jsonProps.end),this.evaluateInterpolationConstraints()}evaluateInterpolationConstraints(){for(let e in this.animValues){let t=this.jsonProps[e];this.animValues[e]=this.controller.group.expressionParser.parseArray(this,t)}}}l.DATA_ATTRIBUTE="data-anim-tween",module.exports=l;
},{"../Model/AnimSystemModel":"xSfw","../Model/TargetValue":"YAwu","@marcom/sm-math-utils":"aMKG","../Model/EasingFunctions":"WPv3","../Model/UnitBezier":"gdR6","../Model/SpringEasing":"jace","../utils/arrayToObject":"ssUI","../utils/toValidAnchor":"yH60","../Model/UUID":"LNZL"}],"cFWz":[function(require,module,exports) {
"use strict";const e=require("./Keyframe"),t=require("../Model/AnimSystemModel.js"),s=require("../Model/TargetValue.js");class i extends e{constructor(e,s){super(e,s),this.keyframeType=t.KeyframeTypes.CSSClass,this._triggerType=i.TRIGGER_TYPE_CSS_CLASS,this.cssClass="",this.friendlyName="",this.style={on:null,off:null},this.toggle=!1,this.isApplied=!1}parseOptions(o){if(!this.controller._ownerIsElement)throw new TypeError("CSS Keyframes cannot be applied to JS Objects");if(o.x=void 0,o.y=void 0,o.z=void 0,o.scale=void 0,o.scaleX=void 0,o.scaleY=void 0,o.rotationX=void 0,o.rotationY=void 0,o.rotationZ=void 0,o.rotation=void 0,o.opacity=void 0,o.hold=void 0,void 0!==o.toggle&&(this.toggle=o.toggle),void 0!==o.cssClass)this._triggerType=i.TRIGGER_TYPE_CSS_CLASS,this.cssClass=o.cssClass,this.friendlyName="."+this.cssClass,void 0===this.controller.tweenProps.targetClasses&&(this.controller.tweenProps.targetClasses={add:[],remove:[]});else{if(void 0===o.style||!this.isValidStyleProperty(o.style))throw new TypeError("KeyframeCSSClass no 'cssClass` property found. If using `style` property its also missing or invalid");if(this._triggerType=i.TRIGGER_TYPE_STYLE_PROPERTY,this.style=o.style,this.friendlyName="style",this.toggle=void 0!==this.style.off||this.toggle,this.toggle&&void 0===this.style.off){this.style.off={};for(let e in this.style.on)this.style.off[e]=""}void 0===this.controller.tweenProps.targetStyles&&(this.controller.tweenProps.targetStyles={})}if(void 0===o.end&&(o.end=o.start),o.toggle=this.toggle,this._triggerType===i.TRIGGER_TYPE_CSS_CLASS)this.isApplied=this.controller.element.classList.contains(this.cssClass);else{let e=getComputedStyle(this.controller.element);this.isApplied=!0;for(let t in this.style.on)if(e[t]!==this.style.on[t]){this.isApplied=!1;break}}e.prototype.parseOptions.call(this,o),this.animValues[this.friendlyName]=[0,0],void 0===this.controller.tweenProps[this.friendlyName]&&(this.controller.tweenProps[this.friendlyName]=new s(0,1,!1)),this.keyframeType=t.KeyframeTypes.CSSClass}updateLocalProgress(e){this.isApplied&&!this.toggle||(this.start!==this.end?!this.isApplied&&e>=this.start&&e<=this.end?this._apply():this.isApplied&&this.toggle&&(e<this.start||e>this.end)&&this._unapply():!this.isApplied&&e>=this.start?this._apply():this.isApplied&&this.toggle&&e<this.start&&this._unapply())}_apply(){if(this._triggerType===i.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.add.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(let e in this.style.on)this.controller.tweenProps.targetStyles[e]=this.style.on[e];this.controller.needsStyleUpdate=!0}this.isApplied=!0}_unapply(){if(this._triggerType===i.TRIGGER_TYPE_CSS_CLASS)this.controller.tweenProps.targetClasses.remove.push(this.cssClass),this.controller.needsClassUpdate=!0;else{for(let e in this.style.off)this.controller.tweenProps.targetStyles[e]=this.style.off[e];this.controller.needsStyleUpdate=!0}this.isApplied=!1}isValidStyleProperty(e){if(!e.hasOwnProperty("on"))return!1;if("object"!=typeof e.on)throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:'hidden', otherProperty: 'value'}}");if(this.toggle&&e.hasOwnProperty("off")&&"object"!=typeof e.off)throw new TypeError("KeyframeCSSClass `style` property should be in the form of: {on:{visibility:'hidden', otherProperty: 'value'}}");return!0}reconcile(e){}onDOMRead(e){}evaluateInterpolationConstraints(){}}i.TRIGGER_TYPE_CSS_CLASS=0,i.TRIGGER_TYPE_STYLE_PROPERTY=1,i.DATA_ATTRIBUTE="data-anim-classname",module.exports=i;
},{"./Keyframe":"eCn3","../Model/AnimSystemModel.js":"xSfw","../Model/TargetValue.js":"YAwu"}],"onpB":[function(require,module,exports) {
"use strict";const e=require("./Keyframe"),t=require("../Model/AnimSystemModel.js"),s=require("../Model/TargetValue.js");class i extends e{constructor(e,s){super(e,s),this.keyframeType=t.KeyframeTypes.Event,this.isApplied=!1,this.hasDuration=!1,this.isCurrentlyInRange=!1}parseOptions(e){e.x=void 0,e.y=void 0,e.scale=void 0,e.scaleX=void 0,e.scaleY=void 0,e.rotation=void 0,e.style=void 0,e.cssClass=void 0,e.rotation=void 0,e.opacity=void 0,e.hold=void 0,this.event=e.event,this.animValues[this.event]=[0,0],void 0===this.controller.tweenProps[this.event]&&(this.controller.tweenProps[this.event]=new s(0,1,!1)),super.parseOptions(e),this.keyframeType=t.KeyframeTypes.Event}updateLocalProgress(e){if(this.hasDuration){let t=this.isCurrentlyInRange,s=e>=this.start&&e<=this.end;if(t===s)return;return this.isCurrentlyInRange=s,void(s&&!t?this._trigger(this.event+":enter"):t&&!s&&this._trigger(this.event+":exit"))}!this.isApplied&&e>=this.start?(this.isApplied=!0,this._trigger(this.event)):this.isApplied&&e<this.start&&(this.isApplied=!1,this._trigger(this.event+":reverse"))}_trigger(e){this.controller.eventObject.event=e,this.controller.eventObject.keyframe=this,this.controller.trigger(e,this.controller.eventObject)}evaluateConstraints(){super.evaluateConstraints(),this.hasDuration=this.start!==this.end}reset(e){this.isApplied=!1,this.isCurrentlyInRange=!1,super.reset(e)}onDOMRead(e){}reconcile(e){}evaluateInterpolationConstraints(){}}i.DATA_ATTRIBUTE="data-anim-event",module.exports=i;
},{"./Keyframe":"eCn3","../Model/AnimSystemModel.js":"xSfw","../Model/TargetValue.js":"YAwu"}],"VPHK":[function(require,module,exports) {
const s=require("./TweenProps");class o{constructor(o,r,t=!1){this.isGroup=t,this.group=o,this.controller=r,this.controllers=[],this.tweenProps=new s}}module.exports=o;
},{"./TweenProps":"Gwvq"}],"xyoZ":[function(require,module,exports) {
class s{constructor(){this.local=0,this.localUnclamped=0,this.lastPosition=0}}module.exports=s;
},{}],"jSji":[function(require,module,exports) {
class t{constructor(t,s){this.a=t.top-s,this.a<0&&(this.a=t.top),this.b=t.top,this.d=t.bottom,this.c=Math.max(this.d-s,this.b)}}module.exports=t;
},{}],"Mrv1":[function(require,module,exports) {
"use strict";const t=require("./AnimSystemModel"),e=(t,e)=>null==t?e:t;class i{constructor(){this.clear()}clear(){this._metrics=new WeakMap}destroy(){this._metrics=null}add(t){let e=this._metrics.get(t);if(e)return e;let i=new h(t);return this._metrics.set(t,i),this._refreshMetrics(t,i)}get(t){return this._metrics.get(t)}refreshCollection(t){t.forEach(t=>this._refreshMetrics(t,null))}refreshMetrics(t){return this._refreshMetrics(t)}_refreshMetrics(i,h){if(h=h||this._metrics.get(i),!(i instanceof Element))return h.width=e(i.width,0),h.height=e(i.height,0),h.top=e(i.top,e(i.y,0)),h.left=e(i.left,e(i.x,0)),h.right=h.left+h.width,h.bottom=h.top+h.height,h;if(void 0===i.offsetWidth){let e=i.getBoundingClientRect();return h.width=e.width,h.height=e.height,h.top=t.pageMetrics.scrollY+e.top,h.left=t.pageMetrics.scrollX+e.left,h.right=h.left+h.width,h.bottom=h.top+h.height,h}h.width=i.offsetWidth,h.height=i.offsetHeight,h.top=t.pageMetrics.documentOffsetY,h.left=t.pageMetrics.documentOffsetX;let s=i;for(;s;)h.top+=s.offsetTop,h.left+=s.offsetLeft,s=s.offsetParent;return h.right=h.left+h.width,h.bottom=h.top+h.height,h}}class h{constructor(t){this.top=0,this.bottom=0,this.left=0,this.right=0,this.height=0,this.width=0}toString(){return`top:${this.top}, bottom:${this.bottom}, left:${this.left}, right:${this.right}, height:${this.height}, width:${this.width}`}toObject(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right,height:this.height,width:this.width}}}module.exports=i;
},{"./AnimSystemModel":"xSfw"}],"HDMA":[function(require,module,exports) {
const e=require("../Model/AnimSystemModel"),t=require("@marcom/sm-math-utils"),r={},s={smoothstep:(e,t,r)=>(r=s.clamp((r-e)/(t-e),0,1))*r*(3-2*r),deg:e=>180*e/Math.PI,rad:e=>e*Math.PI/180,random:(e,t)=>Math.random()*(t-e)+e,atan:Math.atan2};Object.getOwnPropertyNames(Math).forEach(e=>s[e]?null:s[e.toLowerCase()]=Math[e]),Object.getOwnPropertyNames(t).forEach(e=>s[e]?null:s[e.toLowerCase()]=t[e]);let n=null;const i={ANCHOR_CONST:"a",ALPHA:"ALPHA",LPAREN:"(",RPAREN:")",PLUS:"PLUS",MINUS:"MINUS",MUL:"MUL",DIV:"DIV",INTEGER_CONST:"INTEGER_CONST",FLOAT_CONST:"FLOAT_CONST",COMMA:",",EOF:"EOF"},h={NUMBERS:/\d|\d\.\d/,DIGIT:/\d/,OPERATOR:/[-+*/]/,PAREN:/[()]/,WHITE_SPACE:/\s/,ALPHA:/[a-zA-Z]|%/,ALPHANUMERIC:/[a-zA-Z0-9]/,OBJECT_UNIT:/^(t|l|b|r|%w|%h|%|h|w)$/,GLOBAL_METRICS_UNIT:/^(px|vh|vw)$/,ANY_UNIT:/^(t|l|b|r|%w|%h|%|h|w|px|vh|vw)$/,MATH_FUNCTION:new RegExp(`\\b(${Object.keys(s).join("|")})\\b`,"i")},o={round:1,clamp:3,lerp:3,random:2,atan:2,floor:1,ceil:1,abs:1,cos:1,sin:1,smoothstep:3,rad:1,deg:1,pow:2,calc:1};class c{constructor(e,t){this.type=e,this.value=t}}c.ONE=new c("100",100),c.EOF=new c(i.EOF,null);class u{constructor(e){this.type=e}}class a extends u{constructor(e,t){super("UnaryOp"),this.token=this.op=e,this.expr=t}}class l extends u{constructor(e,t,r){super("BinOp"),this.left=e,this.op=t,this.right=r}}class p extends u{constructor(e,t){if(super("MathOp"),this.op=e,this.list=t,o[e.value]&&t.length!==o[e.value])throw new Error(`Incorrect number of arguments for '${e.value}'. Received ${t.length}, expected ${o[e.value]}`)}}class T extends u{constructor(e){super("Num"),this.token=e,this.value=e.value}}class A extends u{constructor(e){super("Unit"),this.token=e,this.value=e.value}}class N extends u{constructor(e,t,r){super("RefValue"),this.num=e,this.ref=t,this.unit=r}}class v extends u{constructor(e,t){super("CSSValue"),this.ref=e,this.propertyName=t}}class k extends u{constructor(e,t){super("PropValue"),this.ref=e,this.propertyName=t}}class m{constructor(e){let t;for(this.text=e,this.pos=0,this.char=this.text[this.pos],this.tokens=[];(t=this.getNextToken())&&t!==c.EOF;)this.tokens.push(t);this.tokens.push(t)}advance(){this.char=this.text[++this.pos]}skipWhiteSpace(){for(;null!=this.char&&h.WHITE_SPACE.test(this.char);)this.advance()}name(){let e="";for(;null!=this.char&&h.ALPHA.test(this.char);)e+=this.char,this.advance();return new c(i.ALPHA,e)}number(){let e="";for(;null!=this.char&&h.DIGIT.test(this.char);)e+=this.char,this.advance();if(null!=this.char&&"."===this.char){for(e+=this.char,this.advance();null!=this.char&&h.DIGIT.test(this.char);)e+=this.char,this.advance();return new c(i.FLOAT_CONST,parseFloat(e))}return new c(i.INTEGER_CONST,parseInt(e))}getNextToken(){for(;null!=this.char;)if(h.WHITE_SPACE.test(this.char))this.skipWhiteSpace();else{if(h.DIGIT.test(this.char))return this.number();if(","===this.char)return this.advance(),new c(i.COMMA,",");if(h.OPERATOR.test(this.char)){let e="",t=this.char;switch(t){case"+":e=i.PLUS;break;case"-":e=i.MINUS;break;case"*":e=i.MUL;break;case"/":e=i.DIV}return this.advance(),new c(e,t)}if(h.PAREN.test(this.char)){let e="",t=this.char;switch(t){case"(":e=i.LPAREN;break;case")":e=i.RPAREN}return this.advance(),new c(e,t)}if(h.ALPHA.test(this.char))return this.name();this.error("Unexpected character "+this.char)}return c.EOF}}class f{constructor(e){this.lexer=e,this.pos=0}get currentToken(){return this.lexer.tokens[this.pos]}error(e,t=""){let r=this.lexer.text.slice(this.pos-3,this.pos+3),s=new Error(`${e} in "${this.lexer.text}" near "${r}". ${t} `);throw console.error(s.message,n?n.keyframe||n.target:""),s}consume(e){let t=this.currentToken;return t.type===e?this.pos+=1:this.error(`Invalid token ${this.currentToken.value}, expected ${e}`),t}consumeList(e){e.includes(this.currentToken)?this.pos+=1:this.error(`Invalid token ${this.currentToken.value}, expected ${tokenType}`)}expr(){let e=this.term();for(;this.currentToken.type===i.PLUS||this.currentToken.type===i.MINUS;){const t=this.currentToken;switch(t.value){case"+":this.consume(i.PLUS);break;case"-":this.consume(i.MINUS)}e=new l(e,t,this.term())}return e}term(){let e=this.factor();for(;this.currentToken.type===i.MUL||this.currentToken.type===i.DIV;){const t=this.currentToken;switch(t.value){case"*":this.consume(i.MUL);break;case"/":this.consume(i.DIV)}e=new l(e,t,this.factor())}return e}factor(){if(this.currentToken.type===i.PLUS)return new a(this.consume(i.PLUS),this.factor());if(this.currentToken.type===i.MINUS)return new a(this.consume(i.MINUS),this.factor());if(this.currentToken.type===i.INTEGER_CONST||this.currentToken.type===i.FLOAT_CONST){let e=new T(this.currentToken);if(this.pos+=1,h.OPERATOR.test(this.currentToken.value)||this.currentToken.type===i.RPAREN||this.currentToken.type===i.COMMA||this.currentToken.type===i.EOF)return e;if(this.currentToken.type===i.ALPHA&&this.currentToken.value===i.ANCHOR_CONST)return this.consume(i.ALPHA),new N(e,this.anchorIndex(),this.unit(h.ANY_UNIT));if(this.currentToken.type===i.ALPHA)return"%a"===this.currentToken.value&&this.error("%a is invalid, try removing the %"),new N(e,null,this.unit());this.error("Expected a scaling unit type","Such as 'h' / 'w'")}else{if(h.OBJECT_UNIT.test(this.currentToken.value))return new N(new T(c.ONE),null,this.unit());if(this.currentToken.value===i.ANCHOR_CONST){this.consume(i.ALPHA);const e=this.anchorIndex();if(h.OBJECT_UNIT.test(this.currentToken.value))return new N(new T(c.ONE),e,this.unit())}else if(this.currentToken.type===i.ALPHA){if("calc"===this.currentToken.value)return this.consume(i.ALPHA),this.expr();if("css"===this.currentToken.value||"var"===this.currentToken.value||"prop"===this.currentToken.value){const e="prop"!==this.currentToken.value?v:k;this.consume(i.ALPHA),this.consume(i.LPAREN);const t=this.propertyName();let r=null;return this.currentToken.type===i.COMMA&&(this.consume(i.COMMA),this.consume(i.ALPHA),r=this.anchorIndex()),this.consume(i.RPAREN),new e(r,t)}if(h.MATH_FUNCTION.test(this.currentToken.value)){const e=this.currentToken.value.toLowerCase();if("number"==typeof s[e])return this.consume(i.ALPHA),new T(new c(i.ALPHA,s[e]));const t=c[e]||new c(e,e),r=[];this.consume(i.ALPHA),this.consume(i.LPAREN);let n=null;do{this.currentToken.value===i.COMMA&&this.consume(i.COMMA),n=this.expr(),r.push(n)}while(this.currentToken.value===i.COMMA);return this.consume(i.RPAREN),new p(t,r)}}else if(this.currentToken.type===i.LPAREN){this.consume(i.LPAREN);let e=this.expr();return this.consume(i.RPAREN),e}}this.error(`Unexpected token ${this.currentToken.value}`)}propertyName(){let e="";for(;this.currentToken.type===i.ALPHA||this.currentToken.type===i.MINUS;)e+=this.currentToken.value,this.pos+=1;return e}unit(e=h.ANY_UNIT){const t=this.currentToken;if(t.type===i.ALPHA&&e.test(t.value))return this.consume(i.ALPHA),new c(i.ALPHA,t.value=t.value.replace(/%(h|w)/,"$1").replace("%","h"));this.error("Expected unit type")}anchorIndex(){const e=this.currentToken;if(e.type===i.INTEGER_CONST)return this.consume(i.INTEGER_CONST),new T(e);this.error("Invalid anchor reference",". Should be something like a0, a1, a2")}parse(){const e=this.expr();return this.currentToken!==c.EOF&&this.error(`Unexpected token ${this.currentToken.value}`),e}}class w{constructor(e){this.parser=e,this.root=e.parse()}visit(e){let t=this[e.type];if(!t)throw new Error(`No visit method named, ${t}`);return t.call(this,e)}BinOp(e){switch(e.op.type){case i.PLUS:return this.visit(e.left)+this.visit(e.right);case i.MINUS:return this.visit(e.left)-this.visit(e.right);case i.MUL:return this.visit(e.left)*this.visit(e.right);case i.DIV:return this.visit(e.left)/this.visit(e.right)}}RefValue(t){let r=this.unwrapReference(t),s=t.unit.value,i=t.num.value;const h=n.metrics.get(r);switch(s){case"h":return.01*i*h.height;case"t":return.01*i*h.top;case"vh":return.01*i*e.pageMetrics.windowHeight;case"vw":return.01*i*e.pageMetrics.windowWidth;case"px":return i;case"w":return.01*i*h.width;case"b":return.01*i*h.bottom;case"l":return.01*i*h.left;case"r":return.01*i*h.right}}PropValue(e){return(null===e.ref?n.target:n.anchors[e.ref.value])[e.propertyName]}CSSValue(e){let t=this.unwrapReference(e);const r=getComputedStyle(t).getPropertyValue(e.propertyName);return""===r?0:w.Parse(r).execute(n)}Num(e){return e.value}UnaryOp(e){return e.op.type===i.PLUS?+this.visit(e.expr):e.op.type===i.MINUS?-this.visit(e.expr):void 0}MathOp(e){let t=e.list.map(e=>this.visit(e));return s[e.op.value].apply(null,t)}unwrapReference(e){return null===e.ref?n.target:(e.ref.value>=n.anchors.length&&console.error(`Not enough anchors supplied for expression ${this.parser.lexer.text}`,n.target),n.anchors[e.ref.value])}execute(e){return n=e,this.visit(this.root)}static Parse(e){return r[e]||(r[e]=new w(new f(new m(e))))}}w.programs=r,module.exports=w;
},{"../Model/AnimSystemModel":"xSfw","@marcom/sm-math-utils":"aMKG"}],"YGDW":[function(require,module,exports) {
"use strict";const r=require("./Interpreter"),e=new(require("../Model/ElementMetricsLookup"));class t{constructor(r){this.group=r,this.data={target:null,anchors:null,metrics:this.group.metrics}}parseArray(r,e){return[this.parseExpression(r,e[0]),this.parseExpression(r,e[1])]}parseExpression(r,e){if(!e)return null;if("number"==typeof e)return e;if("string"!=typeof e)throw`Expression must be a string, received ${typeof e}: ${e}`;return this.data.target=r.controller.element,this.data.anchors=r.anchors,this.data.keyframe=r.keyframe,t._parse(e,this.data)}parseTimeValue(r,e){if("number"==typeof e)return e;let t=this.group.expressionParser.parseExpression(r,e);return this.group.convertScrollPositionToTValue(t)}destroy(){this.group=null}static parse(r,s){return(s=s||{})&&(e.clear(),s.target&&e.add(s.target),s.anchors&&s.anchors.forEach(r=>e.add(r))),s.metrics=e,t._parse(r,s)}static _parse(e,t){return r.Parse(e).execute(t)}}t.programs=r.programs,"undefined"!=typeof window&&(window.ExpressionParser=t),module.exports=t;
},{"./Interpreter":"HDMA","../Model/ElementMetricsLookup":"Mrv1"}],"JTBM":[function(require,module,exports) {
class e{constructor(e){this.controller=e,this.element=this.controller.element,this.keyframe=null,this.event="",this.tweenProps=this.controller.tweenProps}}module.exports=e;
},{}],"Pp8U":[function(require,module,exports) {
"use strict";const e=require("./AnimSystemModel"),r=require("../Keyframes/Keyframe"),t=require("../Keyframes/KeyframeDiscreteEvent"),s=require("../Keyframes/KeyframeCSSClass"),n=function(r){for(let t in r){let s=r[t];if(-1===e.KeyframeJSONReservedWords.indexOf(t)&&Array.isArray(s))return!0}return!1},i=function(e){if(void 0!==e.cssClass||void 0!==e.style){if(n(e))throw"CSS Keyframes cannot tween values, please use multiple keyframes instead";return s}if(n(e))return r;if(e.event)return t;throw delete e.anchors,`Could not determine tween type based on ${JSON.stringify(e)}`};module.exports=i;
},{"./AnimSystemModel":"xSfw","../Keyframes/Keyframe":"eCn3","../Keyframes/KeyframeDiscreteEvent":"onpB","../Keyframes/KeyframeCSSClass":"cFWz"}],"B3Nb":[function(require,module,exports) {
"use strict";"undefined"!=typeof window&&(window.DOMMatrix=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix);const t=180/Math.PI,n=t=>Math.round(1e6*t)/1e6;function a(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2])}function r(t,n){return 0===n?Array.from(t):[t[0]/n,t[1]/n,t[2]/n]}function o(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function e(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function i(t,n,a,r){return[t[0]*a+n[0]*r,t[1]*a+n[1]*r,t[2]*a+n[2]*r]}let M=function(a){const[r,o,e,i]=a,M=r*r,s=o*o,u=e*e,c=r*o+e*i,w=i*i+M+s+u;return c>.49999*w?[0,2*Math.atan2(r,i)*t,90]:c<-.49999*w?[0,-2*Math.atan2(r,i)*t,-90]:[n(Math.atan2(2*r*i-2*o*e,1-2*M-2*u)*t),n(Math.atan2(2*o*i-2*r*e,1-2*s-2*u)*t),n(Math.asin(2*r*o+2*e*i)*t)]};function s(t){const s=new Float32Array(4),u=new Float32Array(3),c=new Float32Array(3),w=new Float32Array(3);w[0]=t[3][0],w[1]=t[3][1],w[2]=t[3][2];const l=new Array(3);for(let n=0;n<3;n++)l[n]=t[n].slice(0,3);u[0]=a(l[0]),l[0]=r(l[0],u[0]),c[0]=o(l[0],l[1]),l[1]=i(l[1],l[0],1,-c[0]),u[1]=a(l[1]),l[1]=r(l[1],u[1]),c[0]/=u[1],c[1]=o(l[0],l[2]),l[2]=i(l[2],l[0],1,-c[1]),c[2]=o(l[1],l[2]),l[2]=i(l[2],l[1],1,-c[2]),u[2]=a(l[2]),l[2]=r(l[2],u[2]),c[1]/=u[2],c[2]/=u[2];const f=e(l[1],l[2]);if(o(l[0],f)<0)for(let n=0;n<3;n++)u[n]*=-1,l[n][0]*=-1,l[n][1]*=-1,l[n][2]*=-1;let h;return s[0]=.5*Math.sqrt(Math.max(1+l[0][0]-l[1][1]-l[2][2],0)),s[1]=.5*Math.sqrt(Math.max(1-l[0][0]+l[1][1]-l[2][2],0)),s[2]=.5*Math.sqrt(Math.max(1-l[0][0]-l[1][1]+l[2][2],0)),s[3]=.5*Math.sqrt(Math.max(1+l[0][0]+l[1][1]+l[2][2],0)),l[2][1]>l[1][2]&&(s[0]=-s[0]),l[0][2]>l[2][0]&&(s[1]=-s[1]),l[1][0]>l[0][1]&&(s[2]=-s[2]),{translation:w,rotation:h=s[0]<.001&&s[0]>=0&&s[1]<.001&&s[1]>=0?[0,0,n(180*Math.atan2(l[0][1],l[0][0])/Math.PI)]:M(s),eulerRotation:h,scale:[n(u[0]),n(u[1]),n(u[2])]}}const u=function(t){t instanceof Element&&(t=String(getComputedStyle(t).transform).trim());let n=new DOMMatrix(t);const a=new Array(4);for(let r=1;r<5;r++){const t=a[r-1]=new Float32Array(4);for(let a=1;a<5;a++)t[a-1]=n[`m${r}${a}`]}return s(a)};module.exports=u;
},{}],"LLDV":[function(require,module,exports) {
"use strict";var e=require("./RAFInterfaceController");module.exports=e.requestAnimationFrame("external");
},{"./RAFInterfaceController":"kRv4"}],"BLXT":[function(require,module,exports) {
"use strict";var e=require("./RAFInterfaceController");module.exports=e.requestAnimationFrame("draw");
},{"./RAFInterfaceController":"kRv4"}],"k4s6":[function(require,module,exports) {
function r(){var r=new Float32Array(16);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}module.exports=r;
},{}],"nWdd":[function(require,module,exports) {
function t(t,n,o){var r=Math.sin(o),a=Math.cos(o),e=n[4],s=n[5],u=n[6],c=n[7],h=n[8],i=n[9],M=n[10],d=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=e*a+h*r,t[5]=s*a+i*r,t[6]=u*a+M*r,t[7]=c*a+d*r,t[8]=h*a-e*r,t[9]=i*a-s*r,t[10]=M*a-u*r,t[11]=d*a-c*r,t}module.exports=t;
},{}],"Ff8K":[function(require,module,exports) {
function t(t,n,o){var r=Math.sin(o),a=Math.cos(o),e=n[0],s=n[1],u=n[2],c=n[3],h=n[8],i=n[9],M=n[10],d=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=e*a-h*r,t[1]=s*a-i*r,t[2]=u*a-M*r,t[3]=c*a-d*r,t[8]=e*r+h*a,t[9]=s*r+i*a,t[10]=u*r+M*a,t[11]=c*r+d*a,t}module.exports=t;
},{}],"Bagh":[function(require,module,exports) {
function t(t,n,o){var r=Math.sin(o),a=Math.cos(o),e=n[0],s=n[1],u=n[2],c=n[3],h=n[4],i=n[5],M=n[6],d=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=e*a+h*r,t[1]=s*a+i*r,t[2]=u*a+M*r,t[3]=c*a+d*r,t[4]=h*a-e*r,t[5]=i*a-s*r,t[6]=M*a-u*r,t[7]=d*a-c*r,t}module.exports=t;
},{}],"q8so":[function(require,module,exports) {
function r(r,e,n){var o=n[0],t=n[1],u=n[2];return r[0]=e[0]*o,r[1]=e[1]*o,r[2]=e[2]*o,r[3]=e[3]*o,r[4]=e[4]*t,r[5]=e[5]*t,r[6]=e[6]*t,r[7]=e[7]*t,r[8]=e[8]*u,r[9]=e[9]*u,r[10]=e[10]*u,r[11]=e[11]*u,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}module.exports=r;
},{}],"Mj0g":[function(require,module,exports) {
"use strict";const e=require("../Model/AnimSystemModel"),t=require("../Model/TargetValue"),s=require("../Model/CSSTargetValue"),r=require("../Model/EventObject"),i=require("../Model/AnimInfo"),n=require("./Keyframe"),a=require("./KeyframeCSSClass"),l=require("../Model/InferKeyframeFromProps"),o=require("../utils/arrayToObject"),h=require("../Model/UUID"),m=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,u=require("@marcom/decompose-css-transform"),c={};"undefined"!=typeof window&&(c.update=require("@marcom/ac-raf-emitter/update"),c.external=require("@marcom/ac-raf-emitter/external"),c.draw=require("@marcom/ac-raf-emitter/draw"));const f=Math.PI/180,p=["x","y","z","scale","scaleX","scaleY","rotation","rotationX","rotationY","rotationZ"],d=["borderRadius","bottom","fontSize","fontWeight","height","left","lineHeight","marginBottom","marginLeft","marginRight","marginTop","maxHeight","maxWidth","opacity","paddingBottom","paddingLeft","paddingRight","paddingTop","right","top","width","zIndex","strokeDashoffset"],g=["currentTime","scrollLeft","scrollTop"],y={create:require("gl-mat4/create"),rotateX:require("gl-mat4/rotateX"),rotateY:require("gl-mat4/rotateY"),rotateZ:require("gl-mat4/rotateZ"),scale:require("gl-mat4/scale")};class b extends m{constructor(e,t){super(),this._events.draw=[],this.uuid=h(),this.group=e,this.element=t,this._ownerIsElement=this.element instanceof Element,this._ownerIsElement?this.friendlyName=this.element.tagName+"."+Array.from(this.element.classList).join("."):this.friendlyName=this.element.friendlyName||this.uuid,this.element._animInfo=this.element._animInfo||new i(e,this),this.element._animInfo.controller=this,this.element._animInfo.group=this.group,this.element._animInfo.controllers.push(this),this.tweenProps=this.element._animInfo.tweenProps,this.eventObject=new r(this),this.needsStyleUpdate=!1,this.needsClassUpdate=!1,this.elementMetrics=this.group.metrics.add(this.element),this.attributes=[],this.cssAttributes=[],this.domAttributes=[],this.keyframes={},this._allKeyframes=[],this._activeKeyframes=[],this.keyframesRequiringDispatch=[],this.updateCachedValuesFromElement(),this.boundsMin=0,this.boundsMax=0,this.mat2d=new Float32Array(6),this.mat4=y.create(),this.needsWrite=!0,this.onDOMWriteImp=this._ownerIsElement?this.onDOMWriteForElement:this.onDOMWriteForObject}destroy(){if(this.element._animInfo){this.element._animInfo.controller===this&&(this.element._animInfo.controller=null);let e=this.element._animInfo.controllers.indexOf(this);if(-1!==e&&this.element._animInfo.controllers.splice(e,1),0===this.element._animInfo.controllers.length)this.element._animInfo=null;else{let e=this.element._animInfo.controllers.find(e=>e.group!==e.group.anim.tweenGroup);e&&(this.element._animInfo.controller=e,this.element._animInfo.group=e.group)}}this.eventObject.controller=null,this.eventObject.element=null,this.eventObject.keyframe=null,this.eventObject.tweenProps=null,this.eventObject=null,this.elementMetrics=null,this.group=null,this.keyframesRequiringDispatch=null;for(let e=0;e<this._allKeyframes.length;e++)this._allKeyframes[e].destroy();this._allKeyframes=null,this._activeKeyframes=null,this.attributes=null,this.keyframes=null,this.element=null,this.tweenProps=null,this.destroyed=!0,super.destroy()}remove(){return this.group.removeKeyframeController(this)}updateCachedValuesFromElement(){if(!this._ownerIsElement)return;const r=getComputedStyle(this.element);let i=new DOMMatrix(r.getPropertyValue("transform")),n=u(i),a=e.KeyframeDefaults.epsilon;["x","y","z"].forEach((e,s)=>{this.tweenProps[e]=new t(n.translation[s],a,!1)}),this.tweenProps.rotation=new t(n.rotation[2],a,!1),["rotationX","rotationY","rotationZ"].forEach((e,s)=>{this.tweenProps[e]=new t(n.rotation[s],a,!1)}),this.tweenProps.scale=new t(n.scale[0],a,!1),["scaleX","scaleY","scaleZ"].forEach((e,s)=>{this.tweenProps[e]=new t(n.scale[s],a,!1)}),d.forEach(e=>{let t=["zIndex"].includes(e),i=["opacity","zIndex","fontWeight"].includes(e)?void 0:"px",n=parseFloat(r[e]);isNaN(n)&&(n=0),this.tweenProps[e]=new s(n,a,!1,e,t,i)}),g.forEach(e=>{let t=isNaN(this.element[e])?0:this.element[e];this.tweenProps[e]=new s(t,a,!1,e,!1)})}addKeyframe(e){let t=l(e);if(!t)throw new Error("AnimSystem Cannot create keyframe for from options `"+e+"`");let s=new t(this,e);return s.parseOptions(e),s.id=this._allKeyframes.length,this._allKeyframes.push(s),s}needsUpdate(){for(let e=0,t=this.attributes.length;e<t;e++){let t=this.attributes[e],s=this.tweenProps[t];if(Math.abs(s.current-s.target)>s.epsilon)return!0}return!1}updateLocalProgress(e){for(let t=0,s=this.attributes.length;t<s;t++){let s=this.attributes[t],r=this.keyframes[this.attributes[t]];if(1===r.length){r[0].updateLocalProgress(e);continue}let i=this.getNearestKeyframeForAttribute(s,e);i&&i.updateLocalProgress(e)}}reconcile(){for(let e=0,t=this.attributes.length;e<t;e++){let t=this.attributes[e],s=this.getNearestKeyframeForAttribute(t,this.group.position.local);s.updateLocalProgress(this.group.position.local),s.snapAtCreation&&s.reconcile(t)}}determineActiveKeyframes(e){e=e||o(Array.from(document.documentElement.classList));let t=this._activeKeyframes,s=this.attributes,r={};this._activeKeyframes=[],this.attributes=[],this.keyframes={};for(let a=0;a<this._allKeyframes.length;a++){let t=this._allKeyframes[a];if(t.markedForRemoval||t.hidden||!t.setEnabled(e))for(let e in t.animValues)this.tweenProps[e].isActive=t.preserveState,t.preserveState&&(r[e]=!0);else{this._activeKeyframes.push(t);for(let e in t.animValues)this.keyframes[e]=this.keyframes[e]||[],this.keyframes[e].push(t),-1===this.attributes.indexOf(e)&&(r[e]=!0,this.attributes.push(e),this.tweenProps[e].isActive=!0)}}this.attributes.forEach(e=>this.tweenProps[e].isActive=!0),this.cssAttributes=d.filter(e=>this.attributes.includes(e)).map(e=>this.tweenProps[e]),this.domAttributes=g.filter(e=>this.attributes.includes(e)).map(e=>this.tweenProps[e]);let i=t.filter(e=>-1===this._activeKeyframes.indexOf(e));if(0===i.length)return;let n=s.filter(e=>-1===this.attributes.indexOf(e)&&!r.hasOwnProperty(e));if(0!==n.length)if(this.needsWrite=!0,this._ownerIsElement)c.external(()=>{let e=n.some(e=>p.includes(e)),t=e&&Object.keys(r).some(e=>p.includes(e));e&&!t&&this.element.style.removeProperty("transform");for(let s=0,r=n.length;s<r;++s){let e=n[s],t=this.tweenProps[e],r=t.isActive?t.target:t.initialValue;t.current=t.target=r,!t.isActive&&d.includes(e)&&(this.element.style[e]=null)}for(let s=0,r=i.length;s<r;++s){let e=i[s];e instanceof a&&!e.preserveState&&e._unapply()}},!0);else for(let a=0,l=n.length;a<l;++a){let e=this.tweenProps[n[a]];e.current=e.target,e.isActive=!1}}onDOMRead(e){for(let t=0,s=this.attributes.length;t<s;t++){let s=this.attributes[t];this.tweenProps[s].previousValue=this.tweenProps[s].current;let r=this.getNearestKeyframeForAttribute(s,e);r&&r.onDOMRead(s),this.tweenProps[s].previousValue!==this.tweenProps[s].current&&(this.needsWrite=!0)}}onDOMWrite(){(this.needsWrite||this.needsClassUpdate||this.needsStyleUpdate)&&(this.needsWrite=!1,this.onDOMWriteImp(),this.handleEventDispatch())}onDOMWriteForObject(){for(let e=0,t=this.attributes.length;e<t;e++){let t=this.attributes[e];this.element[t]=this.tweenProps[t].current}}onDOMWriteForElement(){let e=this.element.style;this.handleStyleTransform();for(let t=0,s=this.cssAttributes.length;t<s;t++)this.cssAttributes[t].set(e);for(let t=0,s=this.domAttributes.length;t<s;t++)this.domAttributes[t].set(this.element);if(this.needsStyleUpdate){for(let e in this.tweenProps.targetStyles)null!==this.tweenProps.targetStyles[e]&&(this.element.style[e]=this.tweenProps.targetStyles[e]),this.tweenProps.targetStyles[e]=null;this.needsStyleUpdate=!1}this.needsClassUpdate&&(this.tweenProps.targetClasses.add.length>0&&this.element.classList.add.apply(this.element.classList,this.tweenProps.targetClasses.add),this.tweenProps.targetClasses.remove.length>0&&this.element.classList.remove.apply(this.element.classList,this.tweenProps.targetClasses.remove),this.tweenProps.targetClasses.add.length=0,this.tweenProps.targetClasses.remove.length=0,this.needsClassUpdate=!1)}handleStyleTransform(){let e=this.tweenProps,t=this.element.style;if(e.z.isActive||e.rotationX.isActive||e.rotationY.isActive){const s=this.mat4;s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1;const r=e.x.current,i=e.y.current,n=e.z.current;if(s[12]=s[0]*r+s[4]*i+s[8]*n+s[12],s[13]=s[1]*r+s[5]*i+s[9]*n+s[13],s[14]=s[2]*r+s[6]*i+s[10]*n+s[14],s[15]=s[3]*r+s[7]*i+s[11]*n+s[15],0!==e.rotation.current||0!==e.rotationZ.current){const t=(e.rotation.current||e.rotationZ.current)*f;y.rotateZ(s,s,t)}if(0!==e.rotationX.current){const t=e.rotationX.current*f;y.rotateX(s,s,t)}if(0!==e.rotationY.current){const t=e.rotationY.current*f;y.rotateY(s,s,t)}1===e.scale.current&&1===e.scaleX.current&&1===e.scaleY.current||y.scale(s,s,[e.scale.current,e.scale.current,1]),t.transform="matrix3d("+s[0]+","+s[1]+","+s[2]+","+s[3]+","+s[4]+","+s[5]+","+s[6]+","+s[7]+","+s[8]+","+s[9]+","+s[10]+","+s[11]+","+s[12]+","+s[13]+","+s[14]+","+s[15]+")"}else if(e.x.isActive||e.y.isActive||e.rotation.isActive||e.rotationZ.isActive||e.scale.isActive||e.scaleX.isActive||e.scaleY.isActive){const s=this.mat2d;s[0]=1,s[1]=0,s[2]=0,s[3]=1,s[4]=0,s[5]=0;const r=e.x.current,i=e.y.current,n=s[0],a=s[1],l=s[2],o=s[3],h=s[4],m=s[5];if(s[0]=n,s[1]=a,s[2]=l,s[3]=o,s[4]=n*r+l*i+h,s[5]=a*r+o*i+m,0!==e.rotation.current||0!==e.rotationZ.current){const t=(e.rotation.current||e.rotationZ.current)*f,r=s[0],i=s[1],n=s[2],a=s[3],l=s[4],o=s[5],h=Math.sin(t),m=Math.cos(t);s[0]=r*m+n*h,s[1]=i*m+a*h,s[2]=r*-h+n*m,s[3]=i*-h+a*m,s[4]=l,s[5]=o}e.scaleX.isActive||e.scaleY.isActive?(s[0]=s[0]*e.scaleX.current,s[1]=s[1]*e.scaleX.current,s[2]=s[2]*e.scaleY.current,s[3]=s[3]*e.scaleY.current):(s[0]=s[0]*e.scale.current,s[1]=s[1]*e.scale.current,s[2]=s[2]*e.scale.current,s[3]=s[3]*e.scale.current),t.transform="matrix("+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+", "+s[4]+", "+s[5]+")"}}handleEventDispatch(){if(0!==this.keyframesRequiringDispatch.length){for(let t=0,s=this.keyframesRequiringDispatch.length;t<s;t++){let s=this.keyframesRequiringDispatch[t];s.needsEventDispatch=!1,this.eventObject.keyframe=s,this.eventObject.pageMetrics=e.pageMetrics,this.eventObject.event=s.event,this.trigger(s.event,this.eventObject)}this.keyframesRequiringDispatch.length=0}if(0!==this._events.draw.length){this.eventObject.keyframe=null,this.eventObject.event="draw";for(var t=this._events.draw.length-1;t>=0;t--)this._events.draw[t](this.eventObject)}}updateAnimationConstraints(){for(let e=0,t=this._activeKeyframes.length;e<t;e++)this._activeKeyframes[e].evaluateConstraints();this.attributes.forEach(t=>{1!==this.keyframes[t].length&&this.keyframes[t].sort(e.KeyframeComparison)}),this.updateDeferredPropertyValues()}refreshMetrics(){let e=new Set([this.element]);this._allKeyframes.forEach(t=>t.anchors.forEach(t=>e.add(t))),this.group.metrics.refreshCollection(e),this.group.keyframesDirty=!0}updateDeferredPropertyValues(){for(let t=0,s=this.attributes.length;t<s;t++){let s=this.attributes[t],r=this.keyframes[s];if(!(r[0].keyframeType>e.KeyframeTypes.InterpolationForward))for(let e=0,t=r.length;e<t;e++){let i=r[e];null===i.jsonProps[s][0]&&(0===e?i.jsonProps[s][0]=i.animValues[s][0]=this.tweenProps[s].current:i.animValues[s][0]=r[e-1].animValues[s][1]),null===i.jsonProps[s][1]&&(i.animValues[s][1]=e===t-1?this.tweenProps[s].current:r[e+1].animValues[s][0]),i.snapAtCreation&&(i.jsonProps[s][0]=i.animValues[s][0],i.jsonProps[s][1]=i.animValues[s][1])}}}getBounds(e){this.boundsMin=Number.MAX_VALUE,this.boundsMax=-Number.MAX_VALUE;for(let t=0,s=this.attributes.length;t<s;t++){let s=this.keyframes[this.attributes[t]];for(let t=0;t<s.length;t++){let r=s[t];this.boundsMin=Math.min(r.start,this.boundsMin),this.boundsMax=Math.max(r.end,this.boundsMax),e.min=Math.min(r.start,e.min),e.max=Math.max(r.end,e.max)}}}getNearestKeyframeForAttribute(e,t){t=void 0!==t?t:this.group.position.local;let s=null,r=Number.POSITIVE_INFINITY,i=this.keyframes[e];if(void 0===i)return null;let n=i.length;if(0===n)return null;if(1===n)return i[0];for(let a=0;a<n;a++){let e=i[a];if(e.isInRange(t)){s=e;break}let n=Math.min(Math.abs(t-e.start),Math.abs(t-e.end));n<r&&(r=n,s=e)}return s}getAllKeyframesForAttribute(e){return this.keyframes[e]}updateKeyframe(t,s){t.parseOptions(s),t.evaluateConstraints(),this.group.keyframesDirty=!0,c.update(()=>{this.trigger(e.EVENTS.ON_KEYFRAME_UPDATED,t),this.group.trigger(e.EVENTS.ON_KEYFRAME_UPDATED,t)},!0)}removeKeyframe(e){return e.controller!==this?Promise.resolve(null):(e.markedForRemoval=!0,this.group.keyframesDirty=!0,new Promise(t=>{this.group.rafEmitter.executor.eventEmitter.once("before:draw",()=>{t(e),e.destroy();let s=this._allKeyframes.indexOf(e);-1!==s&&this._allKeyframes.splice(s,1)})}))}updateAnimation(e,t){return this.group.gui&&console.warn("KeyframeController.updateAnimation(keyframe,props) has been deprecated. Please use updateKeyframe(keyframe,props)"),this.updateKeyframe(e,t)}}module.exports=b;
},{"../Model/AnimSystemModel":"xSfw","../Model/TargetValue":"YAwu","../Model/CSSTargetValue":"qMCN","../Model/EventObject":"JTBM","../Model/AnimInfo":"VPHK","./Keyframe":"eCn3","./KeyframeCSSClass":"cFWz","../Model/InferKeyframeFromProps":"Pp8U","../utils/arrayToObject":"ssUI","../Model/UUID":"LNZL","@marcom/ac-event-emitter-micro":"PZ1q","@marcom/decompose-css-transform":"B3Nb","@marcom/ac-raf-emitter/update":"w3n5","@marcom/ac-raf-emitter/external":"LLDV","@marcom/ac-raf-emitter/draw":"BLXT","gl-mat4/create":"k4s6","gl-mat4/rotateX":"nWdd","gl-mat4/rotateY":"Ff8K","gl-mat4/rotateZ":"Bagh","gl-mat4/scale":"q8so"}],"zVOq":[function(require,module,exports) {
"use strict";const e=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,t=require("@marcom/sm-math-utils"),i=require("./utils/arrayToObject"),s=require("./Model/AnimSystemModel"),r=require("./Model/AnimInfo"),o=require("./Model/Progress"),n=require("./Model/ViewableRange"),l=require("./Model/ElementMetricsLookup"),a=require("./Parsing/ExpressionParser"),h=require("./Keyframes/KeyframeController"),m={};"undefined"!=typeof window&&(m.create=require("@marcom/ac-raf-emitter/RAFEmitter"),m.update=require("@marcom/ac-raf-emitter/update"),m.draw=require("@marcom/ac-raf-emitter/draw"));let d=0;class c extends e{constructor(e,t){super(),this.anim=t,this.element=e,this.name=this.name||e.getAttribute("data-anim-scroll-group"),this.isEnabled=!0,this.position=new o,this.metrics=new l,this.metrics.add(this.element),this.expressionParser=new a(this),this.boundsMin=0,this.boundsMax=0,this.timelineUpdateRequired=!1,this._keyframesDirty=!1,this.viewableRange=this.createViewableRange(),this.defaultEase=s.KeyframeDefaults.ease,this.keyframeControllers=[],this.updateProgress(this.getPosition()),this.onDOMRead=this.onDOMRead.bind(this),this.onDOMWrite=this.onDOMWrite.bind(this),this.gui=null,this.finalizeInit()}finalizeInit(){this.element._animInfo=new r(this,null,!0),this.setupRAFEmitter()}destroy(){this.destroyed=!0,this.expressionParser.destroy(),this.expressionParser=null;for(let e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].destroy();this.keyframeControllers=null,this.position=null,this.viewableRange=null,this.gui&&(this.gui.destroy(),this.gui=null),this.metrics.destroy(),this.metrics=null,this.rafEmitter.destroy(),this.rafEmitter=null,this.anim=null,this.element._animInfo&&this.element._animInfo.group===this&&(this.element._animInfo.group=null,this.element._animInfo=null),this.element=null,this.isEnabled=!1,super.destroy()}removeKeyframeController(e){return this.keyframeControllers.includes(e)?(e._allKeyframes.forEach(e=>e.markedForRemoval=!0),this.keyframesDirty=!0,new Promise(t=>{m.draw(()=>{const i=this.keyframeControllers.indexOf(e);-1!==i?(this.keyframeControllers.splice(i,1),e.onDOMWrite(),e.destroy(),this.gui&&this.gui.create(),t()):t()})})):Promise.resolve()}remove(){return this.anim.removeGroup(this)}clear(){return Promise.all(this.keyframeControllers.map(e=>this.removeKeyframeController(e)))}setupRAFEmitter(e){this.rafEmitter&&this.rafEmitter.destroy(),this.rafEmitter=e||new m.create,this.rafEmitter.on("update",this.onDOMRead),this.rafEmitter.on("draw",this.onDOMWrite),this.rafEmitter.once("external",()=>this.reconcile())}requestDOMChange(){return!!this.isEnabled&&this.rafEmitter.run()}onDOMRead(){this.keyframesDirty&&this.onKeyframesDirty();for(let e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMRead(this.position.local)}onDOMWrite(){for(let e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].onDOMWrite();this.needsUpdate()&&this.requestDOMChange()}needsUpdate(){if(this._keyframesDirty)return!0;for(let e=0,t=this.keyframeControllers.length;e<t;e++)if(this.keyframeControllers[e].needsUpdate())return!0;return!1}addKeyframe(e,t){let i=this.getControllerForTarget(e);return null===i&&(i=new h(this,e),this.keyframeControllers.push(i)),this.keyframesDirty=!0,i.addKeyframe(t)}addEvent(e,t){t.event=t.event||"Generic-Event-Name-"+d++;let i=void 0!==t.end&&t.end!==t.start;const s=this.addKeyframe(e,t);return i?(t.onEnterOnce&&s.controller.once(t.event+":enter",t.onEnterOnce),t.onExitOnce&&s.controller.once(t.event+":exit",t.onExitOnce),t.onEnter&&s.controller.on(t.event+":enter",t.onEnter),t.onExit&&s.controller.on(t.event+":exit",t.onExit)):(t.onEventOnce&&s.controller.once(t.event,t.onEventOnce),t.onEventReverseOnce&&s.controller.once(t.event+":reverse",t.onEventReverseOnce),t.onEvent&&s.controller.on(t.event,t.onEvent),t.onEventReverse&&s.controller.on(t.event+":reverse",t.onEventReverse)),s}forceUpdate({waitForNextUpdate:e=!0,silent:t=!1}={}){this.isEnabled&&(this.refreshMetrics(),this.timelineUpdateRequired=!0,e?this.keyframesDirty=!0:this.onKeyframesDirty({silent:t}))}onKeyframesDirty({silent:e=!1}={}){this.determineActiveKeyframes(),this.keyframesDirty=!1,this.metrics.refreshMetrics(this.element),this.viewableRange=this.createViewableRange();for(let t=0,i=this.keyframeControllers.length;t<i;t++)this.keyframeControllers[t].updateAnimationConstraints();this.updateBounds(),this.updateProgress(this.getPosition()),e||this.updateTimeline(),this.gui&&this.gui.create()}refreshMetrics(){let e=new Set([this.element]);this.keyframeControllers.forEach(t=>{e.add(t.element),t._allKeyframes.forEach(t=>t.anchors.forEach(t=>e.add(t)))}),this.metrics.refreshCollection(e),this.viewableRange=this.createViewableRange()}reconcile(){for(let e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].reconcile()}determineActiveKeyframes(e){e=e||i(Array.from(document.documentElement.classList));for(let t=0,i=this.keyframeControllers.length;t<i;t++)this.keyframeControllers[t].determineActiveKeyframes(e)}updateBounds(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);let e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(let s=0,r=this.keyframeControllers.length;s<r;s++)this.keyframeControllers[s].getBounds(e);let t=this.convertTValueToScrollPosition(e.min),i=this.convertTValueToScrollPosition(e.max);i-t<s.pageMetrics.windowHeight?(e.min=this.convertScrollPositionToTValue(t-.5*s.pageMetrics.windowHeight),e.max=this.convertScrollPositionToTValue(i+.5*s.pageMetrics.windowHeight)):(e.min-=.001,e.max+=.001),this.boundsMin=e.min,this.boundsMax=e.max,this.timelineUpdateRequired=!0}createViewableRange(){return new n(this.metrics.get(this.element),s.pageMetrics.windowHeight)}_onBreakpointChange(e,t){this.keyframesDirty=!0,this.determineActiveKeyframes()}updateProgress(e){this.hasDuration()?(this.position.localUnclamped=(e-this.viewableRange.a)/(this.viewableRange.d-this.viewableRange.a),this.position.local=t.clamp(this.position.localUnclamped,this.boundsMin,this.boundsMax)):this.position.local=this.position.localUnclamped=0}performTimelineDispatch(){for(let e=0,t=this.keyframeControllers.length;e<t;e++)this.keyframeControllers[e].updateLocalProgress(this.position.local);this.trigger(s.EVENTS.ON_TIMELINE_UPDATE,this.position.local),this.trigger("update",this.position.local),this.timelineUpdateRequired=!1,this.position.lastPosition!==this.position.local&&(this.position.lastPosition<=this.boundsMin&&this.position.localUnclamped>this.boundsMin?(this.trigger(s.EVENTS.ON_TIMELINE_START,this),this.trigger("start",this)):this.position.lastPosition>=this.boundsMin&&this.position.localUnclamped<this.boundsMin?(this.trigger(s.EVENTS.ON_TIMELINE_START+":reverse",this),this.trigger("start:reverse",this)):this.position.lastPosition<=this.boundsMax&&this.position.localUnclamped>=this.boundsMax?(this.trigger(s.EVENTS.ON_TIMELINE_COMPLETE,this),this.trigger("complete",this)):this.position.lastPosition>=this.boundsMax&&this.position.localUnclamped<this.boundsMax&&(this.trigger(s.EVENTS.ON_TIMELINE_COMPLETE+":reverse",this),this.trigger("complete:reverse",this))),null!==this.gui&&this.gui.onScrollUpdate(this.position)}updateTimeline(e){if(!this.isEnabled)return!1;void 0===e&&(e=this.getPosition()),this.updateProgress(e);let t=this.position.lastPosition===this.boundsMin||this.position.lastPosition===this.boundsMax,i=this.position.localUnclamped===this.boundsMin||this.position.localUnclamped===this.boundsMax;if(!this.timelineUpdateRequired&&t&&i&&this.position.lastPosition===e)return void(this.position.local=this.position.localUnclamped);if(this.timelineUpdateRequired||this.position.localUnclamped>this.boundsMin&&this.position.localUnclamped<this.boundsMax)return this.performTimelineDispatch(),this.requestDOMChange(),void(this.position.lastPosition=this.position.localUnclamped);let s=this.position.lastPosition>this.boundsMin&&this.position.lastPosition<this.boundsMax,r=this.position.localUnclamped<=this.boundsMin||this.position.localUnclamped>=this.boundsMax;if(s&&r)return this.performTimelineDispatch(),this.requestDOMChange(),void(this.position.lastPosition=this.position.localUnclamped);const o=this.position.lastPosition<this.boundsMin&&this.position.localUnclamped>this.boundsMax,n=this.position.lastPosition>this.boundsMax&&this.position.localUnclamped<this.boundsMax;(o||n)&&(this.performTimelineDispatch(),this.requestDOMChange(),this.position.lastPosition=this.position.localUnclamped),null!==this.gui&&this.gui.onScrollUpdate(this.position)}_onScroll(e){this.updateTimeline(e)}convertScrollPositionToTValue(e){return this.hasDuration()?t.map(e,this.viewableRange.a,this.viewableRange.d,0,1):0}convertTValueToScrollPosition(e){return this.hasDuration()?t.map(e,0,1,this.viewableRange.a,this.viewableRange.d):0}hasDuration(){return this.viewableRange.a!==this.viewableRange.d}getPosition(){return s.pageMetrics.scrollY}getControllerForTarget(e){if(!e._animInfo||!e._animInfo.controllers)return null;if(e._animInfo.controller&&e._animInfo.controller.group===this)return e._animInfo.controller;const t=e._animInfo.controllers;for(let i=0,s=t.length;i<s;i++)if(t[i].group===this)return t[i];return null}trigger(e,t){if(void 0!==this._events[e])for(let i=this._events[e].length-1;i>=0;i--)void 0!==t?this._events[e][i](t):this._events[e][i]()}set keyframesDirty(e){this._keyframesDirty=e,this._keyframesDirty&&this.requestDOMChange()}get keyframesDirty(){return this._keyframesDirty}}module.exports=c;
},{"@marcom/ac-event-emitter-micro":"PZ1q","@marcom/sm-math-utils":"aMKG","./utils/arrayToObject":"ssUI","./Model/AnimSystemModel":"xSfw","./Model/AnimInfo":"VPHK","./Model/Progress":"xyoZ","./Model/ViewableRange":"jSji","./Model/ElementMetricsLookup":"Mrv1","./Parsing/ExpressionParser":"YGDW","./Keyframes/KeyframeController":"Mj0g","@marcom/ac-raf-emitter/RAFEmitter":"cGkN","@marcom/ac-raf-emitter/update":"w3n5","@marcom/ac-raf-emitter/draw":"BLXT"}],"DLPX":[function(require,module,exports) {
const t=require("./Model/AnimSystemModel");class e{constructor(t,e){this._index=0,this.keyframe=t,e&&(this.name=e)}get start(){return this.keyframe.jsonProps.start}set index(t){this._index=t}get index(){return this._index}}class r{constructor(t){this.timeGroup=t,this.chapters=[],this.chapterNames={},this.currentChapter=null,this.clip=null}addChapter(t){const{position:r,name:i}=t;if(void 0===r)throw ReferenceError("Cannot add chapter without target position.");t._impIsFirst||0!==this.chapters.length||this.addChapter({position:0,_impIsFirst:!0});let s=this.timeGroup.addKeyframe(this,{start:r,end:r,event:"Chapter"});this.timeGroup.forceUpdate({waitForNextFrame:!1,silent:!0});const a=new e(s,i);if(this.chapters.push(a),i){if(this.chapterNames.hasOwnProperty(i))throw ReferenceError(`Duplicate chapter name assigned - "${i}" is already in use`);this.chapterNames[i]=a}return this.chapters.sort((t,e)=>t.start-e.start).forEach((t,e)=>t.index=e),this.currentChapter=this.currentChapter||this.chapters[0],a}playToChapter(e){let r;if(e.hasOwnProperty("index"))r=this.chapters[e.index];else{if(!e.hasOwnProperty("name"))throw ReferenceError("Cannot play to chapter without target index or name");r=this.chapterNames[e.name]}if(!r||this.currentChapter===r&&!0!==e.force)return;let i=e.ease||"easeInOutCubic";this.clip&&(this.clip.destroy(),i="easeOutQuint"),this.timeGroup.timeScale(e.timeScale||1);const s=void 0!==e.duration?e.duration:this.getDurationToChapter(r),a=this.timeGroup.time(),h=r.start;let n=!1;this.tween=this.timeGroup.anim.addTween({time:a},{easeFunction:i,duration:s,time:[a,h],onStart:()=>this.timeGroup.trigger(t.EVENTS.ON_CHAPTER_INITIATED,{player:this,next:r}),onDraw:e=>{let i=e.tweenProps.time.current;this.timeGroup.time(i),e.keyframe.curvedT>.5&&!n&&(n=!0,this.currentIndex=r.index,this.currentChapter=r,this.timeGroup.trigger(t.EVENTS.ON_CHAPTER_OCCURRED,{player:this,current:r}))},onComplete:()=>{this.timeGroup.trigger(t.EVENTS.ON_CHAPTER_COMPLETED,{player:this,current:r}),this.timeGroup.paused(!0),this.clip=null}})}getDurationToChapter(t){const e=this.chapters[t.index-1]||this.chapters[t.index+1];return Math.abs(e.start-t.start)}}module.exports=r;
},{"./Model/AnimSystemModel":"xSfw"}],"Dsx3":[function(require,module,exports) {
"use strict";const e=require("./ScrollGroup"),t=require("./ChapterPlayer"),i=require("@marcom/sm-math-utils");let s=0;const r={};"undefined"!=typeof window&&(r.create=require("@marcom/ac-raf-emitter/RAFEmitter"));class a extends e{constructor(e,i){e||((e=document.createElement("div")).className="TimeGroup-"+s++),super(e,i),this.name=this.name||e.getAttribute("data-anim-time-group"),this._isPaused=!0,this._repeats=0,this._isReversed=!1,this._timeScale=1,this._chapterPlayer=new t(this),this.now=performance.now()}finalizeInit(){if(!this.anim)throw"TimeGroup not instantiated correctly. Please use `AnimSystem.createTimeGroup(el)`";this.onPlayTimeUpdate=this.onPlayTimeUpdate.bind(this),super.finalizeInit()}progress(e){if(void 0===e)return 0===this.boundsMax?0:this.position.local/this.boundsMax;let t=e*this.boundsMax;this.timelineUpdateRequired=!0,this.updateTimeline(t)}time(e){if(void 0===e)return this.position.local;e=i.clamp(e,this.boundsMin,this.duration),this.timelineUpdateRequired=!0,this.updateTimeline(e)}play(e){this.reversed(!1),this.isEnabled=!0,this._isPaused=!1,this.time(e),this.now=performance.now(),this._playheadEmitter.run()}reverse(e){this.reversed(!0),this.isEnabled=!0,this._isPaused=!1,this.time(e),this.now=performance.now(),this._playheadEmitter.run()}reversed(e){if(void 0===e)return this._isReversed;this._isReversed=e}restart(){this._isReversed?(this.progress(1),this.reverse(this.time())):(this.progress(0),this.play(this.time()))}pause(e){this.time(e),this._isPaused=!0}paused(e){return void 0===e?this._isPaused:(this._isPaused=e,this._isPaused||this.play(),this)}onPlayTimeUpdate(){if(this._isPaused)return;let e=performance.now(),t=(e-this.now)/1e3;this.now=e,this._isReversed&&(t=-t);let i=this.time()+t*this._timeScale;if(this._repeats===a.REPEAT_FOREVER||this._repeats>0){let e=!1;!this._isReversed&&i>this.boundsMax?(i-=this.boundsMax,e=!0):this._isReversed&&i<0&&(i=this.boundsMax+i,e=!0),e&&(this._repeats=this._repeats===a.REPEAT_FOREVER?a.REPEAT_FOREVER:this._repeats-1)}this.time(i);let s=!this._isReversed&&this.position.local!==this.duration,r=this._isReversed&&0!==this.position.local;s||r?this._playheadEmitter.run():this.paused(!0)}updateProgress(e){this.hasDuration()?(this.position.localUnclamped=e,this.position.local=i.clamp(this.position.localUnclamped,this.boundsMin,this.boundsMax)):this.position.local=this.position.localUnclamped=0}updateBounds(){if(0===this.keyframeControllers.length)return this.boundsMin=0,void(this.boundsMax=0);let e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(let t=0,i=this.keyframeControllers.length;t<i;t++)this.keyframeControllers[t].getBounds(e);this.boundsMin=0,this.boundsMax=e.max,this.viewableRange.a=this.viewableRange.b=0,this.viewableRange.c=this.viewableRange.d=this.boundsMax,this.timelineUpdateRequired=!0}setupRAFEmitter(e){this._playheadEmitter=new r.create,this._playheadEmitter.on("update",this.onPlayTimeUpdate),super.setupRAFEmitter(e)}get duration(){return this.keyframesDirty&&this.onKeyframesDirty({silent:!0}),this.boundsMax}timeScale(e){return void 0===e?this._timeScale:(this._timeScale=e,this)}repeats(e){if(void 0===e)return this._repeats;this._repeats=e}getPosition(){return this.position.local}addChapter(e){return this._chapterPlayer.addChapter(e)}playToChapter(e){this._chapterPlayer.playToChapter(e)}convertScrollPositionToTValue(e){return e}convertTValueToScrollPosition(e){return e}hasDuration(){return this.duration>0}destroy(){this._playheadEmitter.destroy(),this._playheadEmitter=null,super.destroy()}set timelineProgress(e){this.progress(e)}get timelineProgress(){return this.progress()}}a.REPEAT_FOREVER=-1,module.exports=a;
},{"./ScrollGroup":"zVOq","./ChapterPlayer":"DLPX","@marcom/sm-math-utils":"aMKG","@marcom/ac-raf-emitter/RAFEmitter":"cGkN"}],"WM0N":[function(require,module,exports) {
const e=require("./ScrollGroup"),t=require("./ChapterPlayer"),r=require("@marcom/sm-math-utils");let i=0;const s={};"undefined"!=typeof window&&(s.create=require("@marcom/ac-raf-emitter/RAFEmitter"));class o extends e{constructor(e,t){e||((e=document.createElement("div")).className="TweenGroup-"+i++),super(e,t),this.name="Tweens",this.keyframes=[],this._isPaused=!1,this.now=performance.now()}finalizeInit(){this.onTimeEmitterUpdate=this.onTimeEmitterUpdate.bind(this),this.removeExpiredKeyframeControllers=this.removeExpiredKeyframeControllers.bind(this),super.finalizeInit()}destroy(){this._timeEmitter.destroy(),this._timeEmitter=null,this._keyframes=[],super.destroy()}setupRAFEmitter(e){this.now=performance.now(),this._timeEmitter=new s.create,this._timeEmitter.on("update",this.onTimeEmitterUpdate),this._timeEmitter.run(),super.setupRAFEmitter(e)}addKeyframe(e,t){if(void 0!==t.start||void 0!==t.end)throw Error("Tweens do not have a start or end, they can only have a duration. Consider using a TimeGroup instead");if("number"!=typeof t.duration)throw Error("Tween options.duration is undefined, or is not a number");let r,i;t.start=(t.delay||0)+this.position.localUnclamped,t.end=t.start+t.duration,t.preserveState=!0,t.snapAtCreation=!0,e._animInfo&&(r=e._animInfo.group,i=e._animInfo.controller);let s=super.addKeyframe(e,t);return e._animInfo.group=r,e._animInfo.controller=i,t.onStart&&s.controller.once("draw",e=>{e.keyframe=s,t.onStart(e),e.keyframe=null}),t.onDraw&&s.controller.on("draw",e=>{e.keyframe=s,t.onDraw(e),e.keyframe=null}),this.removeOverlappingProps(s),this.keyframes.push(s),this._timeEmitter.willRun()||(this.now=performance.now(),this._timeEmitter.run()),s}removeOverlappingProps(e){if(e.controller._allKeyframes.length<=1)return;let t=Object.keys(e.animValues),r=e.controller;for(let i=0,s=r._allKeyframes.length;i<s;i++){const s=r._allKeyframes[i];if(s===e)continue;if(s.markedForRemoval)continue;let o=Object.keys(s.animValues),n=o.filter(e=>t.includes(e));n.length!==o.length?n.forEach(e=>delete s.animValues[e]):s.markedForRemoval=!0}}onTimeEmitterUpdate(e){if(this._isPaused||0===this.keyframeControllers.length)return;let t=performance.now(),r=(t-this.now)/1e3;this.now=t;let i=this.position.local+r;this.position.local=this.position.localUnclamped=i,this.onTimeUpdate()}onTimeUpdate(){for(let e=0,t=this.keyframes.length;e<t;e++)this.keyframes[e].updateLocalProgress(this.position.localUnclamped);this.requestDOMChange(),this._timeEmitter.run(),null!==this.gui&&this.gui.onScrollUpdate(this.position)}onDOMRead(){if(this.keyframesDirty&&this.onKeyframesDirty(),0!==this.keyframes.length)for(let e=0,t=this.keyframes.length;e<t;e++){this.keyframes[e].controller.needsWrite=!0;for(let t in this.keyframes[e].animValues)this.keyframes[e].onDOMRead(t)}}onDOMWrite(){super.onDOMWrite(),this.removeExpiredKeyframes()}removeExpiredKeyframes(){let e=this.keyframes.length,t=e;for(;e--;){let t=this.keyframes[e];t.destroyed?this.keyframes.splice(e,1):(t.markedForRemoval&&(t.jsonProps.onComplete&&1===t.localT&&(t.controller.eventObject.keyframe=t,t.jsonProps.onComplete(t.controller.eventObject),t.jsonProps.onComplete=null),null!==this.gui&&this.gui.isDraggingPlayhead||(t.remove(),this.keyframes.splice(e,1))),1===t.localT&&(t.markedForRemoval=!0))}this.keyframes.length===t&&0!==this.keyframes.length||this._timeEmitter.executor.eventEmitter.once("after:draw",this.removeExpiredKeyframeControllers)}removeExpiredKeyframeControllers(){for(let e=0,t=this.keyframeControllers.length;e<t;e++){let t=!0,r=this.keyframeControllers[e];for(let e=0,i=r._allKeyframes.length;e<i;e++)if(!r._allKeyframes[e].destroyed){t=!1;break}t&&r.remove()}}updateBounds(){this.boundsMin=Math.min(...this.keyframes.map(e=>e.start)),this.boundsMax=Math.max(...this.keyframes.map(e=>e.end))}play(){this.isEnabled=!0,this._isPaused=!1,this.now=performance.now(),this._timeEmitter.run()}pause(){this._isPaused=!0}paused(){return this._isPaused}time(e){if(void 0===e)return this.position.local;this.position.local=this.position.localUnclamped=r.clamp(e,this.boundsMin,this.boundsMax),this.onTimeUpdate()}performTimelineDispatch(){}hasDuration(){return!0}getPosition(){return this.position.local}updateProgress(e){}get duration(){return this.boundsMax}}module.exports=o;
},{"./ScrollGroup":"zVOq","./ChapterPlayer":"DLPX","@marcom/sm-math-utils":"aMKG","@marcom/ac-raf-emitter/RAFEmitter":"cGkN"}],"rSmb":[function(require,module,exports) {
module.exports={version:"3.3.0",major:"3.x",majorMinor:"3.3"};
},{}],"fk9W":[function(require,module,exports) {
"use strict";var e=require("./RAFInterfaceController");module.exports=e.cancelAnimationFrame("update");
},{"./RAFInterfaceController":"kRv4"}],"bxAu":[function(require,module,exports) {
"use strict";const e=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,t=require("./Model/AnimSystemModel"),r=require("./Keyframes/Keyframe"),i=require("./Keyframes/KeyframeCSSClass"),s=require("./Keyframes/KeyframeDiscreteEvent"),o=require("./ScrollGroup"),n=require("./TimeGroup"),a=require("./TweenGroup"),l=require("./.release-info"),c={};"undefined"!=typeof window&&(c.update=require("@marcom/ac-raf-emitter/update"),c.cancelUpdate=require("@marcom/ac-raf-emitter/cancelUpdate"),c.external=require("@marcom/ac-raf-emitter/external"),c.draw=require("@marcom/ac-raf-emitter/draw"));let d=null;class u extends e{constructor(){if(super(),d)throw"You cannot create multiple AnimSystems. You probably want to create multiple groups instead. You can have unlimited groups on a page";d=this,this.groups=[],this.scrollSystems=[],this.timeSystems=[],this.tweenGroup=null,this._forceUpdateRAFId=-1,this.initialized=!1,this.model=t,this.version=l.version,this._resolveReady=(()=>{}),this.ready=new Promise(e=>this._resolveReady=e),this.onScroll=this.onScroll.bind(this),this.onResizedDebounced=this.onResizedDebounced.bind(this),this.onResizeImmediate=this.onResizeImmediate.bind(this)}initialize(){return this.initialized||"undefined"==typeof window?this.ready:(this.initialized=!0,this.timeSystems=[],this.scrollSystems=[],this.groups=[],this.setupEvents(),this.initializeResizeFilter(),this.initializeModel(),this.createDOMGroups(),this.createDOMKeyframes(),this.tweenGroup=new a(null,this),this.groups.push(this.tweenGroup),this._resolveReady(),this.ready)}remove(){return this.initialized?Promise.all(this.groups.map(e=>e.remove())).then(()=>{this.groups=null,this.scrollSystems=null,this.timeSystems=null,window.clearTimeout(t.RESIZE_TIMEOUT),window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeImmediate),this._events={},this.initialized=!1,this.ready=new Promise(e=>this._resolveReady=e)}):(this.ready=new Promise(e=>this._resolveReady=e),Promise.resolve())}destroy(){return this.remove()}createTimeGroup(e){let r=new n(e,this);return this.groups.push(r),this.timeSystems.push(r),this.trigger(t.EVENTS.ON_GROUP_CREATED,r),r}createScrollGroup(e){if(!e)throw"AnimSystem scroll based groups must supply an HTMLElement";let r=new o(e,this);return this.groups.push(r),this.scrollSystems.push(r),this.trigger(t.EVENTS.ON_GROUP_CREATED,r),r}removeGroup(e){return Promise.all(e.keyframeControllers.map(t=>e.removeKeyframeController(t))).then(()=>{let t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1),-1!==(t=this.scrollSystems.indexOf(e))&&this.scrollSystems.splice(t,1),-1!==(t=this.timeSystems.indexOf(e))&&this.timeSystems.splice(t,1),e.destroy()})}createDOMGroups(){document.body.setAttribute("data-anim-scroll-group","body"),document.querySelectorAll("[data-anim-scroll-group]").forEach(e=>this.createScrollGroup(e)),document.querySelectorAll("[data-anim-time-group]").forEach(e=>this.createTimeGroup(e)),this.trigger(t.EVENTS.ON_DOM_GROUPS_CREATED,this.groups)}createDOMKeyframes(){let e=[];["data-anim-keyframe",r.DATA_ATTRIBUTE,i.DATA_ATTRIBUTE,s.DATA_ATTRIBUTE].forEach(function(t){for(let r=0;r<12;r++)e.push(t+(0===r?"":"-"+(r-1)))});for(let t=0;t<e.length;t++){let r=e[t],i=document.querySelectorAll("["+r+"]");for(let e=0;e<i.length;e++){const t=i[e],s=JSON.parse(t.getAttribute(r));this.addKeyframe(t,s)}}c.update(()=>{null!==this.groups&&(this.groups.forEach(e=>e.onKeyframesDirty({silent:!0})),this.groups.forEach(e=>e.trigger(t.EVENTS.ON_DOM_KEYFRAMES_CREATED,e)),this.trigger(t.EVENTS.ON_DOM_KEYFRAMES_CREATED,this),this.groups.forEach(e=>{e.forceUpdate({waitForNextUpdate:!1,silent:!0}),e.reconcile()}),this.onScroll())},!0)}initializeResizeFilter(){if(t.cssDimensionsTracker)return;const e=document.querySelector(".cssDimensionsTracker")||document.createElement("div");e.setAttribute("cssDimensionsTracker","true"),e.style.position="fixed",e.style.top="0",e.style.width="100%",e.style.height="100vh",e.style.pointerEvents="none",e.style.visibility="hidden",e.style.zIndex="-1",document.documentElement.appendChild(e),t.cssDimensionsTracker=e}initializeModel(){t.pageMetrics.windowHeight=t.cssDimensionsTracker.clientHeight,t.pageMetrics.windowWidth=t.cssDimensionsTracker.clientWidth,t.pageMetrics.scrollY=window.scrollY||window.pageYOffset,t.pageMetrics.scrollX=window.scrollX||window.pageXOffset,t.pageMetrics.breakpoint=t.getBreakpoint();let e=document.documentElement.getBoundingClientRect();t.pageMetrics.documentOffsetX=e.left+t.pageMetrics.scrollX,t.pageMetrics.documentOffsetY=e.top+t.pageMetrics.scrollY}setupEvents(){window.removeEventListener("scroll",this.onScroll),window.addEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResizeImmediate),window.addEventListener("resize",this.onResizeImmediate)}onScroll(){t.pageMetrics.scrollY=window.scrollY||window.pageYOffset,t.pageMetrics.scrollX=window.scrollX||window.pageXOffset;for(let e=0,t=this.scrollSystems.length;e<t;e++)this.scrollSystems[e].updateTimeline();this.trigger(t.PageEvents.ON_SCROLL,t.pageMetrics)}onResizeImmediate(){let e=t.cssDimensionsTracker.clientWidth,r=t.cssDimensionsTracker.clientHeight;if(e===t.pageMetrics.windowWidth&&r===t.pageMetrics.windowHeight)return;t.pageMetrics.windowWidth=e,t.pageMetrics.windowHeight=r,t.pageMetrics.scrollY=window.scrollY||window.pageYOffset,t.pageMetrics.scrollX=window.scrollX||window.pageXOffset;let i=document.documentElement.getBoundingClientRect();t.pageMetrics.documentOffsetX=i.left+t.pageMetrics.scrollX,t.pageMetrics.documentOffsetY=i.top+t.pageMetrics.scrollY,window.clearTimeout(t.RESIZE_TIMEOUT),t.RESIZE_TIMEOUT=window.setTimeout(this.onResizedDebounced,250),this.trigger(t.PageEvents.ON_RESIZE_IMMEDIATE,t.pageMetrics)}onResizedDebounced(){c.update(()=>{let e=t.pageMetrics.breakpoint,r=t.getBreakpoint();if(r!==e){t.pageMetrics.previousBreakpoint=e,t.pageMetrics.breakpoint=r;for(let e=0,t=this.groups.length;e<t;e++)this.groups[e]._onBreakpointChange();this.trigger(t.PageEvents.ON_BREAKPOINT_CHANGE,t.pageMetrics)}for(let t=0,i=this.groups.length;t<i;t++)this.groups[t].forceUpdate({waitForNextUpdate:!1});this.trigger(t.PageEvents.ON_RESIZE_DEBOUNCED,t.pageMetrics)},!0)}forceUpdate({waitForNextUpdate:e=!0,silent:t=!1}={}){-1!==this._forceUpdateRAFId&&c.cancelUpdate(this._forceUpdateRAFId);let r=()=>{for(let e=0,r=this.groups.length;e<r;e++){this.groups[e].forceUpdate({waitForNextUpdate:!1,silent:t})}return-1};this._forceUpdateRAFId=e?c.update(r,!0):r()}addKeyframe(e,t){let r=this.getGroupForTarget(e);return(r=r||this.getGroupForTarget(document.body)).addKeyframe(e,t)}addEvent(e,t){let r=this.getGroupForTarget(e);return(r=r||this.getGroupForTarget(document.body)).addEvent(e,t)}getTimeGroupForTarget(e){return this._getGroupForTarget(e,e=>e instanceof n)}getScrollGroupForTarget(e){return this._getGroupForTarget(e,e=>!(e instanceof n))}getGroupForTarget(e){return this._getGroupForTarget(e,()=>!0)}_getGroupForTarget(e,t){if(e._animInfo&&e._animInfo.group&&t(e._animInfo.group))return e._animInfo.group;let r=e;for(;r;){if(r._animInfo&&r._animInfo.isGroup&&t(r._animInfo.group))return r._animInfo.group;r=r.parentElement}}getControllerForTarget(e){return e._animInfo&&e._animInfo.controller?e._animInfo.controller:null}addTween(e,t){return this.tweenGroup.addKeyframe(e,t)}}module.exports="undefined"==typeof window?new u:window.AC.SharedInstance.share("AnimSystem",l.major,u),module.exports.default=module.exports;
},{"@marcom/ac-event-emitter-micro":"PZ1q","./Model/AnimSystemModel":"xSfw","./Keyframes/Keyframe":"eCn3","./Keyframes/KeyframeCSSClass":"cFWz","./Keyframes/KeyframeDiscreteEvent":"onpB","./ScrollGroup":"zVOq","./TimeGroup":"Dsx3","./TweenGroup":"WM0N","./.release-info":"rSmb","@marcom/ac-raf-emitter/update":"w3n5","@marcom/ac-raf-emitter/cancelUpdate":"fk9W","@marcom/ac-raf-emitter/external":"LLDV","@marcom/ac-raf-emitter/draw":"BLXT"}],"Z5HH":[function(require,module,exports) {
"use strict";var _coreBundle=require("../core/core-bundle");const Lib=require("@marcom/anim-system");new _coreBundle.CoreBundle(Lib,"anim");
},{"../core/core-bundle":"hjXO","@marcom/anim-system":"bxAu"}],"O6ks":[function(require,module,exports) {
"use strict";module.exports=function(e){return!(!e||!e.nodeType)};
},{}],"Bt8J":[function(require,module,exports) {
"use strict";module.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,COMMAND:91,CAPSLOCK:20,ESCAPE:27,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,ARROW_LEFT:37,ARROW_UP:38,ARROW_RIGHT:39,ARROW_DOWN:40,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ASTERISK:106,NUMPAD_PLUS:107,NUMPAD_DASH:109,NUMPAD_DOT:110,NUMPAD_SLASH:111,NUMPAD_EQUALS:187,TICK:192,LEFT_BRACKET:219,RIGHT_BRACKET:221,BACKSLASH:220,SEMICOLON:186,APOSTROPHE:222,SPACEBAR:32,CLEAR:12,COMMA:188,DOT:190,SLASH:191};
},{}],"oCxb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var a='<div class="modal" data-modal-element-container data-modal-close>\n\t<div class="modal-overlay-container" data-modal-element-overlay-container data-modal-close>\n\t\t<div class="modal-overlay" data-modal-element-overlay data-modal-close-button-parent>\n\t\t\t<div class="modal-content-container" data-modal-element-content-container></div>\n\t\t</div>\n\t</div>\n</div>';exports.default=a;
},{}],"JYcT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M12.12,10l4.07-4.06a1.5,1.5,0,1,0-2.11-2.12L10,7.88,5.94,3.81A1.5,1.5,0,1,0,3.82,5.93L7.88,10,3.81,14.06a1.5,1.5,0,0,0,0,2.12,1.51,1.51,0,0,0,2.13,0L10,12.12l4.06,4.07a1.45,1.45,0,0,0,1.06.44,1.5,1.5,0,0,0,1.06-2.56Z"/></svg>';exports.default=e;
},{}],"jreA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("../assets/CloseSvg.js"));function t(e){return e&&e.__esModule?e:{default:e}}var o=`<button data-modal-element-close-button>\n\t<span data-modal-element-close-icon>${e.default}</span>\n</button>`;exports.default=o;
},{"../assets/CloseSvg.js":"JYcT"}],"nKIL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("@marcom/ac-keyboard/keyMap")),a=t(require("./templates/Standard")),l=t(require("./templates/CloseButton"));function t(e){return e&&e.__esModule?e:{default:e}}var o={PageOverlay:{ClassNames:["modal-page-overlay"]},FullBleed:{ClassNames:["modal-full-bleed"]},Open:{Document:{ClassNames:["has-modal"]},Container:{ClassNames:["modal-open"]}},Close:{Selector:"[data-modal-close]"},Elements:{container:{Attributes:{class:"modal"},Template:a.default},contentContainer:{Selector:"[data-modal-element-content-container]"},closeButton:{Attributes:{class:"modal-close-button","data-modal-close":"","aria-label":"Close"},ParentSelector:"[data-modal-close-button-parent]",Template:l.default},closeIcon:{Attributes:{class:"modal-close-icon","data-modal-close":""}}},DialogRole:{Selector:"[data-modal-element-overlay]",Attributes:{"aria-modal":"true",role:"dialog",tabindex:"-1","aria-hidden":"true"}},Keyboard:{close:{keys:[e.default.ESCAPE]},open:{keys:[]}},Events:{CONTENT_APPENDED:"contentappended",RENDERED:"rendered",WILLOPEN:"willopen",OPEN:"open",WILLCLOSE:"willclose",CLOSE:"close",CONTENT_REMOVED:"contentremoved"}};exports.default=o;
},{"@marcom/ac-keyboard/keyMap":"Bt8J","./templates/Standard":"oCxb","./templates/CloseButton":"jreA"}],"Bk5a":[function(require,module,exports) {
"use strict";const e=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,t=[{name:"S",mediaQuery:"only screen and (max-width: 734px)"},{name:"M",mediaQuery:"only screen and (min-width: 735px) and (max-width: 1068px)"},{name:"L",mediaQuery:"only screen and (min-width: 1069px) and (max-width: 1440px)"},{name:"X",mediaQuery:"only screen and (min-width: 1441px)"}],i="only screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min-resolution: 1.5dppx), screen and (min-resolution: 144dpi)",n="only screen and (orientation: portrait)";class r extends e{constructor(e={}){super(),this.BREAKPOINTS=e.breakpoints||t,this._setupProperties(),this._onRetinaChange=this._onRetinaChange.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this.listenersAdded={orientation:!1,retina:!1,viewport:!1}}static get CHANGE_EVENTS(){return{ORIENTATION:"change:orientation",RETINA:"change:retina",VIEWPORT:"change:viewport"}}on(){this._setupListeners(arguments[0]),super.on.apply(this,arguments)}_onRetinaChange(){this.trigger(r.CHANGE_EVENTS.RETINA,this)}_onOrientationChange(){this.trigger(r.CHANGE_EVENTS.ORIENTATION,this)}_setupProperties(){Object.defineProperty(this,"retina",{get:()=>window.matchMedia(i).matches}),Object.defineProperty(this,"orientation",{get:()=>window.matchMedia(n).matches?"portrait":"landscape"}),this.viewport=this.getBreakpoint()}_setupListeners(e){if(e!==r.CHANGE_EVENTS.RETINA||this.listenersAdded.retina||(window.matchMedia(i).addListener(this._onRetinaChange),this.listenersAdded.retina=!0),e!==r.CHANGE_EVENTS.ORIENTATION||this.listenersAdded.orientation||(window.matchMedia(n).addListener(this._onOrientationChange),this.listenersAdded.orientation=!0),e===r.CHANGE_EVENTS.VIEWPORT&&!this.listenersAdded.viewport){for(let e=0;e<this.BREAKPOINTS.length;e++){let t=this.BREAKPOINTS[e];window.matchMedia(t.mediaQuery).addListener(e=>{e.matches&&(this.oldViewport=this.viewport,this.viewport=t.name,this.trigger(r.CHANGE_EVENTS.VIEWPORT,this))})}this.listenersAdded.viewport=!0}}getBreakpoint(){for(let e=0;e<this.BREAKPOINTS.length;e++){let t=this.BREAKPOINTS[e];if(window.matchMedia(t.mediaQuery).matches)return t.name}}}module.exports=r;
},{"@marcom/ac-event-emitter-micro":"PZ1q"}],"nPmD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=t(require("@marcom/viewport-emitter-micro"));function t(e){return e&&e.__esModule?e:{default:e}}var i={beforeCreate(){document.body._animInfo?(this.anim=document.body._animInfo.group.anim,this._setViewport(this.anim.model.pageMetrics)):(this.viewportEmitterMicro=new e.default,this.viewportEmitterMicro.CHANGE_EVENTS=e.default.CHANGE_EVENTS,this._setViewport(this.viewportEmitterMicro))},onBreakpointChange(e){this._setViewport(e),this._setPreviousViewport(e)},onOpen(){this.opened=!0},onClose(){this.opened=!1},_setViewport(e){this._viewport=this.anim?this._getValidViewport(e.breakpoint):this._getValidViewport(e.viewport)},_setPreviousViewport(e){this._previousViewport=this.anim?this._getValidViewport(e.previousBreakpoint):this._getValidViewport(e.oldViewport)},_getValidViewport(e){const t={X:"L",L:"L",M:"M",S:"S"};if(!Object.keys(t).includes(e))throw`The viewport ${e} is not valid. Valid viewports are: ${Object.keys(t)}`;return t[e]||""}};exports.default=i;
},{"@marcom/viewport-emitter-micro":"Bk5a"}],"T9CR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;const e="Modal";var t={created(){this._createModalElements()},beforeMount(){this._setDialogAriaLabel(),this.appendModalElements()},destroy(){document.body.removeChild(this.elements.container),this._releaseEvents();for(let e in this)Object.prototype.hasOwnProperty.call(this,e)&&(this[e]=null)},getModalElementKey(e){let t;for(const s in e.dataset)if(s.includes("modalElement")){const e=s.substring("modalElement".length);t=e[0].toLowerCase()+e.slice(1)}return t},appendContentElement(){this.appendContent(this.elements.content,this.elements.contentContainer),this.trigger(this.model.Events.CONTENT_APPENDED)},appendModalElements(){document.body.appendChild(this.elements.container),this.trigger(this.model.Events.RENDERED)},_createModalElements(){this._createTemplates(),this._createElementsFromTemplate();for(const e in this.templates)this._setChildElements(this.elements[e]);this._setDialogRoleElement(),this._setElementAttributes(),this.appendContentElement()},_createTemplates(){for(const e in this.model.Elements){const t=this.model.Elements[e].Template;t&&!this.templates[e]&&(this.templates[e]=t)}},_createElementsFromTemplate(){for(const e in this.templates)this.elements[e]=(new DOMParser).parseFromString(this.templates[e],"text/html").body.childNodes[0]},_setChildElements(e){[...e.children].forEach(e=>{this.getModalElementKey(e)&&(this.elements[this.getModalElementKey(e)]=e),this._setChildElements(e)})},_setDialogRoleElement(){this.dialogRoleElement||(this.dialogRoleElement=this.elements.container.querySelector(this.model.DialogRole.Selector)||this.elements.container);for(const e in this.model.DialogRole.Attributes)this.dialogRoleElement.setAttribute(e,this.model.DialogRole.Attributes[e])},_setElementAttributes(){let e={},t={};for(const s in this.model.Elements)this.model.Elements[s].Attributes&&(e[s]=this.model.Elements[s].Attributes);for(const s in e){t[s]=Object.assign({},e[s],this.options.attributes[s]);for(const s in this.options.attributes)"undefined"!==t[s]&&(t[s]=Object.assign({},e[s],this.options.attributes[s]))}for(const s in t)for(const e in t[s]){let l=t[s][e];if(!this.elements[s])return;switch(e){case"class":Array.isArray(l)&&(l=l.join(" ")),this.elements[s].className=`${this.elements[s].className} ${l}`.trim();break;default:this.elements[s].setAttribute(e,l)}}},_setDialogAriaLabel(){if(this.elements.content&&this.elements.content.dataset.modalDialogLabel){let e=this.elements.content.dataset.modalDialogLabel;this.dialogRoleElement.setAttribute("aria-label",e)}else this.dialogRoleElement.hasAttribute("aria-label")||this.dialogRoleElement.hasAttribute("aria-labelledby")||this.dialogRoleElement.setAttribute("aria-label","Modal")}};exports.default=t;
},{}],"uFLt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={created(){this.options.gum||this._isVue||(this.anim?(this.anim.on(this.anim.model.PageEvents.ON_RESIZE_IMMEDIATE,this.onResizeImmediate),this.anim.on(this.anim.model.PageEvents.ON_RESIZE_DEBOUNCED,this.onResizeDebounced),this.anim.on(this.anim.model.PageEvents.ON_BREAKPOINT_CHANGE,this.onBreakpointChange)):(window.addEventListener("resize",this.onResizeImmediate),this.viewportEmitterMicro.on(this.viewportEmitterMicro.CHANGE_EVENTS.VIEWPORT,this.onBreakpointChange)),this._mountedRaf=requestAnimationFrame(this.mounted))},onResizeImmediate(){this.anim||(window.clearTimeout(this._resizeTimeout),this._resizeTimeout=window.setTimeout(this.onResizeDebounced,250))},destroy(){cancelAnimationFrame(this._mountedRaf),this.anim?(this.anim.off(this.anim.model.PageEvents.ON_RESIZE_IMMEDIATE,this.onResizeImmediate),this.anim.off(this.anim.model.PageEvents.ON_RESIZE_DEBOUNCED,this.onResizeDebounced),this.anim.off(this.anim.model.PageEvents.ON_BREAKPOINT_CHANGE,this.onBreakpointChange)):(window.removeEventListener("resize",this.onResizeImmediate),this.viewportEmitterMicro.off(this.viewportEmitterMicro.CHANGE_EVENTS.VIEWPORT,this.onBreakpointChange))}};exports.default=e;
},{}],"hrCf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=r(require("@marcom/ac-event-emitter-micro/src/ac-event-emitter-micro/EventEmitterMicro")),t=r(require("@marcom/ac-dom-nodes/isNode")),s=r(require("./Model")),n=r(require("./mixins/Setup")),o=r(require("./mixins/Elements")),i=r(require("./mixins/AutoMount"));function r(e){return e&&e.__esModule?e:{default:e}}const l=["beforeCreate","created","beforeMount","mounted","onWillOpen","onOpen","onWillClose","onClose","onResizeImmediate","onBreakpointChange","onResizeDebounced","destroy"],h={attributes:{}};class a extends e.default{constructor(e,t=h){super(t),this.elements={},this.elements.content=e,this.options=t,this.opened=!1,this.model=Object.assign({},JSON.parse(JSON.stringify(s.default))),this.templates={},l.forEach(e=>{this[e]=((...t)=>{this[`__${e}`]&&this[`__${e}`].forEach(e=>e.apply(this,t))})}),this._bindEvents(),["beforeCreate","created","beforeMount"].forEach(e=>this[e](t))}appendContent(e,s){(0,t.default)(e)&&(s=s&&(0,t.default)(s)?s:this.elements.contentContainer).appendChild(e)}removeContent(e){e?(this.elements.container.contains(e)&&e.remove(),this.trigger(this.model.Events.CONTENT_REMOVED)):this._emptyContent()}scrollToModalTop(){this.elements.container.scrollTop=0}_emptyContent(){this.elements.contentContainer.innerHTML=""}_bindEvents(){this.on(this.model.Events.WILLOPEN,this.onWillOpen),this.on(this.model.Events.OPEN,this.onOpen),this.on(this.model.Events.WILLCLOSE,this.onWillClose),this.on(this.model.Events.CLOSE,this.onClose)}_releaseEvents(){this.off(this.model.Events.WILLOPEN,this.onWillOpen),this.off(this.model.Events.OPEN,this.onOpen),this.off(this.model.Events.WILLCLOSE,this.onwillClose),this.off(this.model.Events.CLOSE,this.onClose)}static withMixins(...e){const t=class extends a{},s=t.prototype;return[n.default,...e,i.default,o.default].forEach(e=>{for(const t in e)l.includes(t)?(s[`__${t}`]=s[`__${t}`]||[],s[`__${t}`].push(e[t])):s[t]=e[t]}),t}}var d=a;exports.default=d;
},{"@marcom/ac-event-emitter-micro/src/ac-event-emitter-micro/EventEmitterMicro":"osan","@marcom/ac-dom-nodes/isNode":"O6ks","./Model":"nKIL","./mixins/Setup":"nPmD","./mixins/Elements":"T9CR","./mixins/AutoMount":"uFLt"}],"JjPg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={created(){this.close=this.close.bind(this)},onWillOpen(){this._attachCloseEvents()},onClose(){this._removeCloseEvents(),document.documentElement.classList.remove(...this.model.Open.Document.ClassNames),this.elements.container.classList.remove(...this.model.Open.Container.ClassNames)},mounted(){this.close.elements=Array.from(document.querySelectorAll(this.model.Close.Selector))},destroy(){this.close()},close(e){this.opened&&(e&&"click"===e.type&&!this.close.elements.includes(e.target)||(this.trigger(this.model.Events.WILLCLOSE),this.trigger(this.model.Events.CLOSE)))},_removeCloseEvents(){this.elements.container&&this.elements.container.removeEventListener("click",this.close)},_attachCloseEvents(){this.elements.container&&this.elements.container.addEventListener("click",this.close)}};exports.default=e;
},{}],"gZSj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={created(){this.onCloseButtonClick=this.onCloseButtonClick.bind(this)},beforeMount(){this._setCloseAriaLabel(),this.appendCloseButton()},mounted(){this.elements.closeButton.addEventListener("click",this.onCloseButtonClick)},destroy(){this.elements.closeButton.removeEventListener("click",this.onCloseButtonClick)},appendCloseButton(){(this.elements.container.querySelector(this.model.Elements.closeButton.ParentSelector)||this.elements.container).appendChild(this.elements.closeButton)},onCloseButtonClick(e){this.close(e)},_setCloseAriaLabel(){if(this.elements.content&&this.elements.content.dataset.modalCloseLabel){let e=this.elements.content.dataset.modalCloseLabel;this.elements.closeButton.setAttribute("aria-label",e)}}};exports.default=e;
},{}],"rNco":[function(require,module,exports) {
"use strict";let e=["input","select","textarea","button","optgroup","option","menuitem","fieldset","object","a[href]","[tabindex]","[contenteditable]"];module.exports={selectors:e.join(","),nodeName:{INPUT:"input",SELECT:"select",TEXTAREA:"textarea",BUTTON:"button",OPTGROUP:"optgroup",OPTION:"option",MENUITEM:"menuitem",FIELDSET:"fieldset",OBJECT:"object",A:"a"}};
},{}],"Xn9f":[function(require,module,exports) {
"use strict";var e=require("./../maps/focusableElement"),t=function(){this.focusableSelectors=e.selectors},i=t.prototype;i.isFocusableElement=function(t,i,s){return!(i&&!this._isDisplayed(t))&&(e.nodeName[t.nodeName]?!t.disabled:!t.contentEditable||(s=s||parseFloat(t.getAttribute("tabindex")),!isNaN(s)))},i.isTabbableElement=function(e,t){if(t&&!this._isDisplayed(e))return!1;var i=e.getAttribute("tabindex");return i=parseFloat(i),isNaN(i)?this.isFocusableElement(e,t,i):i>=0},i._isDisplayed=function(e){var t=e.getBoundingClientRect();return(0!==t.top||0!==t.left||0!==t.width||0!==t.height)&&"hidden"!==window.getComputedStyle(e).visibility},i.getTabbableElements=function(e,t){for(var i=e.querySelectorAll(this.focusableSelectors),s=i.length,l=[],n=0;n<s;n++)this.isTabbableElement(i[n],t)&&l.push(i[n]);return l},i.getFocusableElements=function(e,t){for(var i=e.querySelectorAll(this.focusableSelectors),s=i.length,l=[],n=0;n<s;n++)this.isFocusableElement(i[n],t)&&l.push(i[n]);return l},module.exports=new t;
},{"./../maps/focusableElement":"rNco"}],"nknG":[function(require,module,exports) {
"use strict";module.exports={AUTOCOMPLETE:"aria-autocomplete",CHECKED:"aria-checked",DISABLED:"aria-disabled",EXPANDED:"aria-expanded",HASPOPUP:"aria-haspopup",HIDDEN:"aria-hidden",INVALID:"aria-invalid",LABEL:"aria-label",LEVEL:"aria-level",MULTILINE:"aria-multiline",MULTISELECTABLE:"aria-multiselectable",ORIENTATION:"aria-orientation",PRESSED:"aria-pressed",READONLY:"aria-readonly",REQUIRED:"aria-required",SELECTED:"aria-selected",SORT:"aria-sort",VALUEMAX:"aria-valuemax",VALUEMIN:"aria-valuemin",VALUENOW:"aria-valuenow",VALUETEXT:"aria-valuetext",ATOMIC:"aria-atomic",BUSY:"aria-busy",LIVE:"aria-live",RELEVANT:"aria-relevant",DROPEFFECT:"aria-dropeffect",GRABBED:"aria-grabbed",ACTIVEDESCENDANT:"aria-activedescendant",CONTROLS:"aria-controls",DESCRIBEDBY:"aria-describedby",FLOWTO:"aria-flowto",LABELLEDBY:"aria-labelledby",OWNS:"aria-owns",POSINSET:"aria-posinset",SETSIZE:"aria-setsize"};
},{}],"yBLw":[function(require,module,exports) {
"use strict";var t=require("./../maps/ariaMap"),e=require("./TabManager"),r="data-original-",a="tabindex",i=function(t,e){var a=t.getAttribute(r+e);a||(a=t.getAttribute(e)||"",t.setAttribute(r+e,a))};module.exports=function(r,u){if(e.isFocusableElement(r,u))i(r,a),r.setAttribute(a,"-1");else for(var b=e.getTabbableElements(r,u),s=b.length;s--;)i(b[s],a),b[s].setAttribute(a,"-1");i(r,t.HIDDEN),r.setAttribute(t.HIDDEN,"true")};
},{"./../maps/ariaMap":"nknG","./TabManager":"Xn9f"}],"pI8L":[function(require,module,exports) {
"use strict";var e=require("./hide");module.exports=function n(t,r,i){r=r||document.body;for(var l=t,o=t;l=l.previousElementSibling;)e(l,i);for(;o=o.nextElementSibling;)e(o,i);t.parentElement&&t.parentElement!==r&&n(t.parentElement,r,i)};
},{"./hide":"yBLw"}],"x9LE":[function(require,module,exports) {
"use strict";var t=function(t,r){let o;o=t instanceof NodeList?t:[].concat(t),r=Array.isArray(r)?r:[].concat(r),o.forEach(t=>{r.forEach(r=>{t.removeAttribute(r)})})};module.exports=t;
},{}],"MTdS":[function(require,module,exports) {
"use strict";var t=require("./removeAttributes"),e=require("./../maps/ariaMap"),r="data-original-",i="tabindex",a=function(e,i){var a=e.getAttribute(r+i);null!==a&&(""===a?t(e,i):e.setAttribute(i,a),t(e,r+i))};module.exports=function(t){a(t,i),a(t,e.HIDDEN);for(var u=t.querySelectorAll(`[${r+i}]`),l=u.length;l--;)a(u[l],i)};
},{"./removeAttributes":"x9LE","./../maps/ariaMap":"nknG"}],"pgHI":[function(require,module,exports) {
"use strict";var e=require("./show");module.exports=function n(t,r){r=r||document.body;for(var o=t,i=t;o=o.previousElementSibling;)e(o);for(;i=i.nextElementSibling;)e(i);t.parentElement&&t.parentElement!==r&&n(t.parentElement,r)};
},{"./show":"MTdS"}],"C0OC":[function(require,module,exports) {
"use strict";var e=require("./helpers/TabManager"),t=require("./helpers/hideSiblingElements"),l=require("./helpers/showSiblingElements"),s=function(e,t){t=t||{},this._tabbables=null,this._excludeHidden=t.excludeHidden,this._firstTabbableElement=t.firstFocusElement,this._lastTabbableElement=null,this._relatedTarget=null,this.el=e,this._handleOnFocus=this._handleOnFocus.bind(this)},a=s.prototype;a.start=function(e){this.updateTabbables(),t(this.el,null,this._excludeHidden);let l=document.activeElement;this._firstTabbableElement?this.el.contains(document.activeElement)||e||(this._firstTabbableElement.focus(),l=this._firstTabbableElement):console.warn("this._firstTabbableElement is null, CircularTab needs at least one tabbable element."),this._relatedTarget=l,document.addEventListener("focus",this._handleOnFocus,!0)},a.stop=function(){l(this.el),document.removeEventListener("focus",this._handleOnFocus,!0)},a.updateTabbables=function(){this._tabbables=e.getTabbableElements(this.el,this._excludeHidden),this._firstTabbableElement=this._firstTabbableElement||this._tabbables[0],this._lastTabbableElement=this._tabbables[this._tabbables.length-1]},a._handleOnFocus=function(e){if(this.el.contains(e.target))this._relatedTarget=e.target;else{if(e.preventDefault(),this.updateTabbables(),this._relatedTarget===this._lastTabbableElement||null===this._relatedTarget)return this._firstTabbableElement.focus(),void(this._relatedTarget=this._firstTabbableElement);if(this._relatedTarget===this._firstTabbableElement&&this._lastTabbableElement)return this._lastTabbableElement.focus(),void(this._relatedTarget=this._lastTabbableElement)}},a.destroy=function(){this.stop(),this.el=null,this._tabbables=null,this._firstTabbableElement=null,this._lastTabbableElement=null,this._relatedTarget=null,this._handleOnFocus=null},module.exports=s;
},{"./helpers/TabManager":"Xn9f","./helpers/hideSiblingElements":"pI8L","./helpers/showSiblingElements":"pgHI"}],"VES5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=o(require("@marcom/ac-accessibility/CircularTab")),t=o(require("@marcom/ac-accessibility/helpers/TabManager"));function o(e){return e&&e.__esModule?e:{default:e}}var i={created(){this.scrollToModalTop=this.scrollToModalTop.bind(this)},mounted(){t.default.getTabbableElements(this.dialogRoleElement).length&&(this._circularTab=new e.default(this.dialogRoleElement))},onOpen(){this._giveModalFocus()},onWillClose(){this._removeModalFocus()},destroy(){clearTimeout(this._focusTimeout),this._removeModalFocus(),this._circularTab&&this._circularTab.destroy()},_giveModalFocus(){this.dialogRoleElement.removeAttribute("aria-hidden"),this.elements.container.classList.add("modal-touch-lock"),this._activeElement=document.activeElement,this._circularTab&&this._circularTab.start(!0),this.elements.container.addEventListener("scroll",this.scrollToModalTop),this._focusTimeout=setTimeout(()=>{this.dialogRoleElement.focus({preventScroll:!0}),requestAnimationFrame(()=>{this.elements.container.removeEventListener("scroll",this.scrollToModalTop),this.elements.container.classList.remove("modal-touch-lock")})},300)},_removeModalFocus(){this._circularTab&&this._circularTab.stop(),this.dialogRoleElement.setAttribute("aria-hidden","true"),this.elements.container.removeEventListener("scroll",this.scrollToModalTop),this._activeElement&&(this._activeElement.focus(),this._activeElement=null)}};exports.default=i;
},{"@marcom/ac-accessibility/CircularTab":"C0OC","@marcom/ac-accessibility/helpers/TabManager":"Xn9f"}],"czLc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={beforeCreate(){this.model.Open.Document.ClassNames.push("has-modal-full-bleed")},beforeMount(){this.elements.container.classList.add(...this.model.FullBleed.ClassNames)},destroy(){this.elements.container.classList.remove(...this.model.FullBleed.ClassNames)}};exports.default=e;
},{}],"D1dK":[function(require,module,exports) {
"use strict";module.exports={Backspace:8,Tab:9,Enter:13,NumpadEnter:13,ShiftLeft:16,ShiftRight:16,ControlLeft:17,ControlRight:17,AltLeft:18,AltRight:18,CapsLock:20,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Delete:46,Digit0:48,Digit1:49,Digit2:50,Digit3:51,Digit4:52,Digit5:53,Digit6:54,Digit7:55,Digit8:56,Digit9:57,KeyA:65,KeyB:66,KeyC:67,KeyD:68,KeyE:69,KeyF:70,KeyG:71,KeyH:72,KeyI:73,KeyJ:74,KeyK:75,KeyL:76,KeyM:77,KeyN:78,KeyO:79,KeyP:80,KeyQ:81,KeyR:82,KeyS:83,KeyT:84,KeyU:85,KeyV:86,KeyW:87,KeyX:88,KeyY:89,KeyZ:90,Numpad0:96,Numpad1:97,Numpad2:98,Numpad3:99,Numpad4:100,Numpad5:101,Numpad6:102,Numpad7:103,Numpad8:104,Numpad9:105,NumpadMultiply:106,NumpadAdd:107,NumpadSubtract:109,NumpadDecimal:110,NumpadDivide:111,NumpadEqual:187,Backquote:192,BracketLeft:219,BracketRight:221,Backslash:220,Semicolon:186,Quote:222,Space:32,Equal:187,Comma:188,Minus:189,Period:190,Slash:191};
},{}],"Bq8g":[function(require,module,exports) {
"use strict";const t=require("./keyCodeMap.js"),e=["keyLocation","keyIdentifier"],i="code",o="keyCode";class n{constructor(t){this.originalEvent=t;for(let i in t)-1===e.indexOf(i)&&"function"!=typeof t[i]&&(this[i]=t[i]);this[o]||(this[o]=this._getKeyCode()),this.location=void 0!==this.originalEvent.location?this.originalEvent.location:this.originalEvent.keyLocation}preventDefault(){if("function"==typeof this.originalEvent.preventDefault)return this.originalEvent.preventDefault();this.originalEvent.returnValue=!1}stopPropagation(){return this.originalEvent.stopPropagation()}_getKeyCode(){return t[this[i]]||-1}}module.exports=n;
},{"./keyCodeMap.js":"D1dK"}],"TCQf":[function(require,module,exports) {
const e=require("@marcom/ac-event-emitter-micro/EventEmitterMicro"),t=require("./internal/KeyEvent"),n="keydown",s="keyup";class o extends e{constructor(e){super(),this._keysDown={},this._DOMKeyDown=this._DOMKeyDown.bind(this),this._DOMKeyUp=this._DOMKeyUp.bind(this),this._context=e||document,this._context.addEventListener(n,this._DOMKeyDown,!0),this._context.addEventListener(s,this._DOMKeyUp,!0)}onDown(e,t){return this.on(n+":"+e,t)}onceDown(e,t){return this.once(n+":"+e,t)}offDown(e,t){return this.off(n+":"+e,t)}onUp(e,t){return this.on(s+":"+e,t)}onceUp(e,t){return this.once(s+":"+e,t)}offUp(e,t){return this.off(s+":"+e,t)}isDown(e){return e+="",this._keysDown[e]||!1}isUp(e){return!this.isDown(e)}destroy(){return this._context.removeEventListener(n,this._DOMKeyDown,!0),this._context.removeEventListener(s,this._DOMKeyUp,!0),this._keysDown=null,this._context=null,super.destroy(),this}_DOMKeyDown(e){var t=this._normalizeKeyboardEvent(e),s=t.keyCode+="";this._trackKeyDown(s),this.trigger(n+":"+s,t)}_DOMKeyUp(e){var t=this._normalizeKeyboardEvent(e),n=t.keyCode+="";this._trackKeyUp(n),this.trigger(s+":"+n,t)}_normalizeKeyboardEvent(e){return new t(e)}_trackKeyUp(e){this._keysDown[e]&&(this._keysDown[e]=!1)}_trackKeyDown(e){this._keysDown[e]||(this._keysDown[e]=!0)}}module.exports=o;
},{"@marcom/ac-event-emitter-micro/EventEmitterMicro":"osan","./internal/KeyEvent":"Bq8g"}],"yxzA":[function(require,module,exports) {
"use strict";const e=require("./Keyboard");module.exports=new e;
},{"./Keyboard":"TCQf"}],"iFEI":[function(require,module,exports) {
const e=require("@marcom/ac-keyboard");module.exports={beforeCreate(){this._keysToOpen=this.model.Keyboard.open.keys,this._keysToClose=this.model.Keyboard.close.keys,this._enabledKeysToOpen=[],this._enabledKeysToClose=[]},onWillOpen(){this._keysToOpen.forEach(this.disableKeyToOpen,this),this._keysToClose.forEach(this.enableKeyToClose,this)},onWillClose(){this._keysToOpen.forEach(this.enableKeyToOpen,this),this._keysToClose.forEach(this.disableKeyToClose,this)},destroy(){this._keysToOpen.forEach(this.disableKeyToOpen,this),this._keysToClose.forEach(this.disableKeyToClose,this)},addKeyToOpen(e){-1===this._keysToOpen.indexOf(e)&&(this._keysToOpen.push(e),this.enableKeyToOpen(e))},addKeyToClose(e){-1===this._keysToClose.indexOf(e)&&(this._keysToClose.push(e),this.enableKeyToClose(e))},removeKeyToOpen(e){const s=this._keysToOpen.indexOf(e);-1!==s&&(this._keysToOpen.splice(s,1),this.disableKeyToOpen(e))},removeAllKeysToOpen(){this._keysToOpen.forEach(this.disableKeyToOpen,this),this._keysToOpen.splice(0,this._keysToOpen.length)},removeKeyToClose(e){const s=this._keysToClose.indexOf(e);-1!==s&&(this._keysToClose.splice(s,1),this.disableKeyToClose(e))},removeAllKeysToClose(){this._keysToClose.forEach(this.disableKeyToClose,this),this._keysToClose.splice(0,this._keysToClose.length)},enableKeyToOpen(s){-1===this._enabledKeysToOpen.indexOf(s)&&(e.onUp(s,this.open,this),this._enabledKeysToOpen.push(s))},enableKeyToClose(s){-1===this._enabledKeysToClose.indexOf(s)&&(e.onUp(s,this.close,this),this._enabledKeysToClose.push(s))},disableKeyToOpen(s){const o=this._enabledKeysToOpen.indexOf(s);-1!==o&&(e.offUp(s,this.open,this),this._enabledKeysToOpen.splice(o,1))},disableKeyToClose(s){const o=this._enabledKeysToClose.indexOf(s);-1!==o&&(e.offUp(s,this.close,this),this._enabledKeysToClose.splice(o,1))}};
},{"@marcom/ac-keyboard":"yxzA"}],"Q04e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={created(){this.open=this.open.bind(this)},onWillOpen(){document.documentElement.classList.add(...this.model.Open.Document.ClassNames),this.elements.container.classList.add(...this.model.Open.Container.ClassNames),this.scrollToModalTop()},open(){this.opened||(this.trigger(this.model.Events.WILLOPEN),this.trigger(this.model.Events.OPEN))}};exports.default=e;
},{}],"iwBd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e={beforeCreate(){this.model.Open.Document.ClassNames.push("has-modal-page-overlay"),this._scrollBarWidth=0},beforeMount(){this.elements.container.classList.add(...this.model.PageOverlay.ClassNames)},mounted(){this._saveScrollBarWidth()},onResizeDebounced(){this.opened||this._saveScrollBarWidth()},onWillOpen(){document.documentElement.style.setProperty("--modal-scrollbar-buffer",this._scrollBarWidth)},onClose(){document.documentElement.style.removeProperty("--modal-scrollbar-buffer")},destroy(){this.elements.container.classList.remove(...this.model.PageOverlay.ClassNames)},_saveScrollBarWidth(){this._scrollBarWidth=`${window.innerWidth-document.body.clientWidth}px`}};exports.default=e;
},{}],"fWVZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var o={created(){this._scrollX=0,this._scrollY=0},onWillOpen(){this._saveScrollPosition()},onClose(){this._restoreScrollPosition()},_saveScrollPosition(){this._scrollX=document.documentElement.scrollLeft,this._scrollY=document.documentElement.scrollTop},_restoreScrollPosition(){window.scrollTo(this._scrollX,this._scrollY)}};exports.default=o;
},{}],"a432":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Mixins"),t=[e.Close,e.CloseButton];exports.default=t;
},{"./Mixins":"IlE9"}],"wXf3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Mixins"),o=[...e.CloseBundle,e.Focus,e.Keyboard,e.Open,e.FullBleed,e.ScrollPosition];exports.default=o;
},{"./Mixins":"IlE9"}],"g6wd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("./Mixins"),o=[...e.CloseBundle,e.Focus,e.Keyboard,e.Open,e.PageOverlay,e.ScrollPosition];exports.default=o;
},{"./Mixins":"IlE9"}],"IlE9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Close",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(exports,"CloseBundle",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(exports,"CloseButton",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(exports,"Focus",{enumerable:!0,get:function(){return t.default}}),Object.defineProperty(exports,"FullBleed",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(exports,"FullBleedBundle",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(exports,"Keyboard",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(exports,"Open",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(exports,"PageOverlay",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(exports,"PageOverlayBundle",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(exports,"ScrollPosition",{enumerable:!0,get:function(){return i.default}});var e=c(require("./Close")),r=c(require("./CloseButton")),t=c(require("./Focus")),u=c(require("./FullBleed")),n=c(require("./Keyboard")),l=c(require("./Open")),o=c(require("./PageOverlay")),i=c(require("./ScrollPosition")),d=c(require("./CloseBundle")),f=c(require("./FullBleedBundle")),a=c(require("./PageOverlayBundle"));function c(e){return e&&e.__esModule?e:{default:e}}
},{"./Close":"JjPg","./CloseButton":"gZSj","./Focus":"VES5","./FullBleed":"czLc","./Keyboard":"iFEI","./Open":"Q04e","./PageOverlay":"iwBd","./ScrollPosition":"fWVZ","./CloseBundle":"a432","./FullBleedBundle":"wXf3","./PageOverlayBundle":"g6wd"}],"qFG6":[function(require,module,exports) {
"use strict";var _coreBundle=require("../core/core-bundle");const Modal=require("@marcom/ac-modal").default,{PageOverlayBundle:PageOverlayBundle}=require("@marcom/ac-modal/mixins/Mixins"),init=e=>{const a=e.targetEl;let l=e.pageOverlay?PageOverlayBundle:{},r="";return e.modalCrossfadeBlur&&(r="modal-crossfade modal-curtain-blur"),new(Modal.withMixins(...l))(a,{attributes:{overlay:{"aria-labelledby":e.targetEl.getAttribute("data-aria-labelledby")||"label-not-defined"},container:{class:"".concat(r)}}})};new _coreBundle.CoreBundle({init:init},"modal");
},{"../core/core-bundle":"hjXO","@marcom/ac-modal":"hrCf","@marcom/ac-modal/mixins/Mixins":"IlE9"}],"Qjcg":[function(require,module,exports) {
module.exports={af:"Afrikaans","af-ZA":"Afrikaans [South Africa]",ar:"Arabic","ar-AE":"Arabic [UAE]","ar-BH":"Arabic [Bahrain]","ar-DZ":"Arabic [Algeria]","ar-EG":"Arabic [Egypt]","ar-IQ":"Arabic [Iraq]","ar-JO":"Arabic [Jordan]","ar-KW":"Arabic [Kuwait]","ar-LB":"Arabic [Lebanon]","ar-LY":"Arabic [Libya]","ar-MA":"Arabic [Morocco]","ar-OM":"Arabic [Oman]","ar-QA":"Arabic [Qatar]","ar-SA":"Arabic [Saudi Arabia]","ar-SY":"Arabic [Syria]","ar-TN":"Arabic [Tunisia]","ar-YE":"Arabic [Yemen]",az:"Azeri [Latin]","az-AZ":"Azeri [Cyrillic] [Azerbaijan]",be:"Belarusian","be-BY":"Belarusian [Belarus]",bg:"Bulgarian","bg-BG":"Bulgarian [Bulgaria]","bs-BA":"Bosnian [Bosnia and Herzegovina]",ca:"Catalan","ca-ES":"Catalan [Spain]",cs:"Czech","cs-CZ":"Czech [Czech Rep]",cy:"Welsh","cy-GB":"Welsh [United Kingdom]",da:"Danish","da-DK":"Danish [Denmark]",de:"German","de-AT":"German [Austria]","de-CH":"German [Switzerland]","de-DE":"German [Germany]","de-LI":"German [Liechtenstein]","de-LU":"German [Luxembourg]",dv:"Divehi","dv-MV":"Divehi [Maldives]",el:"Greek","el-GR":"Greek [Greece]",en:"English","en-AU":"English [Australia]","en-BZ":"English [Belize]","en-CA":"English [Canada]","en-CB":"English [Caribbean]","en-GB":"English [United Kingdom]","en-IE":"English [Ireland]","en-JM":"English [Jamaica]","en-NZ":"English [New Zealand]","en-PH":"English [Philippines]","en-TT":"English [Trinidad and Tobago]","en-US":"English [US]","en-ZA":"English [South Africa]","en-ZW":"English [Zimbabwe]","en-419":"English [Latin America]","en-AE":"English [UAE]","en-AM":"English [Armenia]","en-AZ":"English [Azerbaijan]","en-BH":"English [Bahrain]","en-BW":"English [Botswana]","en-BY":"English [Belarus]","en-EG":"English [Egypt]","en-GE":"English [Georgia]","en-GW":"English [Guinea Bissau]","en-HK":"English [Hong Kong]","en-IL":"English [Israel]","en-IN":"English [India]","en-JO":"English [Jordan]","en-KE":"English [Kenya]","en-KG":"English [Kyrgyzstan]","en-KW":"English [Kuwait]","en-KZ":"English [Kazakhstan]","en-MD":"English [Republic of Moldova]","en-ME":"English [Montenegro]","en-MK":"English [Macedonia]","en-MT":"English [Malta]","en-MY":"English [Malaysia]","en-MZ":"English [Mozambique]","en-NG":"English [Nigeria]","en-OM":"English [Oman]","en-QA":"English [Qatar]","en-SA":"English [Saudi Arabia]","en-SG":"English [Singapore]","en-SI":"English [Slovenia]","en-TJ":"English [Tajikistan]","en-TM":"English [Turkmenistan]","en-UG":"English [Uganda]","en-UZ":"English [Uzbekistan]","en-VN":"English [Vietnam]",eo:"Esperanto",es:"Spanish","es-419":"Spanish [Latin America]","es-AR":"Spanish [Argentina]","es-BO":"Spanish [Bolivia]","es-CL":"Spanish [Chile]","es-CO":"Spanish [Colombia]","es-CR":"Spanish [Costa Rica]","es-DO":"Spanish [Dominican Republic]","es-EC":"Spanish [Ecuador]","es-ES":"Spanish [Spain]","es-GT":"Spanish [Guatemala]","es-HN":"Spanish [Honduras]","es-MX":"Spanish [Mexico]","es-NI":"Spanish [Nicaragua]","es-PA":"Spanish [Panama]","es-PE":"Spanish [Peru]","es-PR":"Spanish [Puerto Rico]","es-PY":"Spanish [Paraguay]","es-SV":"Spanish [El Salvador]","es-UY":"Spanish [Uruguay]","es-VE":"Spanish [Venezuela]",et:"Estonian","et-EE":"Estonian [Estonia]",eu:"Basque","eu-ES":"Basque [Spain]",fa:"Farsi","fa-IR":"Farsi [Iran]",fi:"Finnish","fi-FI":"Finnish [Finland]",fo:"Faroese","fo-FO":"Faroese [Faroe Islands]",fr:"French","fr-BE":"French [Belgium]","fr-CA":"French [Canada]","fr-CH":"French [Switzerland]","fr-FR":"French [France]","fr-LU":"French [Luxembourg]","fr-MC":"French [Principality of Monaco]","fr-CF":"French [CentralAfrica]","fr-CI":"French [Ivory Coast]","fr-CM":"French [Cameroon]","fr-GN":"French [Guinea]","fr-GQ":"French [Equatorial Guinea]","fr-MA":"French [Morocco]","fr-MG":"French [Madagascar]","fr-ML":"French [Mali]","fr-MU":"French [Mauritius]","fr-NE":"French [Niger]","fr-SN":"French [Senegal]","fr-TN":"French [Tunisia]",gl:"Galician","gl-ES":"Galician [Spain]",gu:"Gujarati","gu-IN":"Gujarati [India]",he:"Hebrew","he-IL":"Hebrew [Israel]",hi:"Hindi","hi-IN":"Hindi [India]",hr:"Croatian","hr-BA":"Croatian [Bosnia and Herzegovina]","hr-HR":"Croatian [Croatia]",hu:"Hungarian","hu-HU":"Hungarian [Hungary]",hy:"Armenian","hy-AM":"Armenian [Armenia]",id:"Indonesian","id-ID":"Indonesian [Indonesia]",is:"Icelandic","is-IS":"Icelandic [Iceland]",it:"Italian","it-CH":"Italian [Switzerland]","it-IT":"Italian [Italy]",ja:"Japanese","ja-JP":"Japanese [Japan]",ka:"Georgian","ka-GE":"Georgian [Georgia]",kk:"Kazakh","kk-KZ":"Kazakh [Kazakhstan]",kn:"Kannada","kn-IN":"Kannada [India]",ko:"Korean","ko-KR":"Korean [Korea]",kok:"Konkani","kok-IN":"Konkani [India]",ky:"Kyrgyz","ky-KG":"Kyrgyz [Kyrgyzstan]",lt:"Lithuanian","lt-LT":"Lituanian [Lithuania]",lv:"Latvian","lv-LV":"Latvian [Latvia]",mi:"Maori","mi-NZ":"Maori [New Zealand]",mk:"FYRO Macedonian","mk-MK":"FYRO Macedonian [Former Yugoslav Republic of Macedonia]",mn:"Mongolian","mn-MN":"Mongolian [Mongolia]",mr:"Marathi","mr-IN":"Marathi [India]",ms:"Malay","ms-BN":"Malay [Brunei Darussalam]","ms-MY":"Malay [Malaysia]",mt:"Maltese","mt-MT":"Maltese [Malta]",nb:"Norwegian [Bokm?l]","nb-NO":"Norwegian [Bokm?l] [Norway]",nl:"Dutch","nl-BE":"Dutch [Belgium]","nl-NL":"Dutch [Netherlands]","nn-NO":"Norwegian [Nynorsk] [Norway]",no:"Norwegian",ns:"Northern Sotho","ns-ZA":"Northern Sotho [South Africa]",pa:"Punjabi","pa-IN":"Punjabi [India]",pl:"Polish","pl-PL":"Polish [Poland]",ps:"Pashto","ps-AR":"Pashto [Afghanistan]",pt:"Portuguese","pt-BR":"Portuguese [Brazil]","pt-PT":"Portuguese [Portugal]",qu:"Quechua","qu-BO":"Quechua [Bolivia]","qu-EC":"Quechua [Ecuador]","qu-PE":"Quechua [Peru]",ro:"Romanian","ro-RO":"Romanian [Romania]",ru:"Russian","ru-RU":"Russian [Russia]",sa:"Sanskrit","sa-IN":"Sanskrit [India]",se:"Sami [Northern]","se-FI":"Sami [Inari] [Finland]","se-NO":"Sami [Southern] [Norway]","se-SE":"Sami [Southern] [Sweden]",sk:"Slovak","sk-SK":"Slovak [Slovakia]",sl:"Slovenian","sl-SI":"Slovenian [Slovenia]",sq:"Albanian","sq-AL":"Albanian [Albania]","sr-BA":"Serbian [Cyrillic] [Bosnia and Herzegovina]","sr-SP":"Serbian [Cyrillic] [Serbia and Montenegro]",sv:"Swedish","sv-FI":"Swedish [Finland]","sv-SE":"Swedish [Sweden]",sw:"Swahili","sw-KE":"Swahili [Kenya]",syr:"Syriac","syr-SY":"Syriac [Syria]",ta:"Tamil","ta-IN":"Tamil [India]",te:"Telugu","te-IN":"Telugu [India]",th:"Thai","th-TH":"Thai [Thailand]",tl:"Tagalog","tl-PH":"Tagalog [Philippines]",tn:"Tswana","tn-ZA":"Tswana [South Africa]",tr:"Turkish","tr-TR":"Turkish [Turkey]",ts:"Tsonga",tt:"Tatar","tt-RU":"Tatar [Russia]",uk:"Ukrainian","uk-UA":"Ukrainian [Ukraine]",ur:"Urdu","ur-PK":"Urdu [Islamic Republic of Pakistan]",uz:"Uzbek [Latin]","uz-UZ":"Uzbek [Cyrillic] [Uzbekistan]",vi:"Vietnamese","vi-VN":"Vietnamese [Viet Nam]",xh:"Xhosa","xh-ZA":"Xhosa [South Africa]",zh:"Chinese","zh-CN":"Chinese [S]","zh-HK":"Chinese [Hong Kong]","zh-MO":"Chinese [Macau]","zh-SG":"Chinese [Singapore]","zh-TW":"Chinese [T]","zh-hans":"Chinese [Simplified]",zu:"Zulu","zu-ZA":"Zulu [South Africa]"};
},{}],"PQGC":[function(require,module,exports) {
const s=require("@marcom/ac-event-emitter-micro").EventEmitterMicro;class e extends s{constructor(){super()}once(s,e,t){if(t){const n=function(){e.apply(t,arguments)};super.once.apply(this,[s,n])}else super.once.apply(this,arguments)}on(s,e,t){if(arguments.length>2){this._boundListeners||(this._boundListeners={}),this._boundListeners[s]||(this._boundListeners[s]=[]);const n=e.bind(t);return this._boundListeners[s].push([e,t,n]),super.on.call(this,s,n)}return super.on.apply(this,arguments)}off(s,e,t){if(arguments.length>2)try{const r=this._boundListeners[s],i=r.length;let o=0;for(;o<i;o++)if(r[o][0]===e&&r[o][1]===t){const e=r.splice(o,1)[0];return super.off.call(this,s,e[2])}}catch(n){}return super.off.apply(this,arguments)}destroy(){this._boundListeners=void 0,super.destroy.call(this)}}module.exports=e;
},{"@marcom/ac-event-emitter-micro":"PZ1q"}],"EUf0":[function(require,module,exports) {
class e{constructor(e){this._listeners={},this.el=e}on(e,s){this._listeners[e]||(this._listeners[e]=[]);let t={originalCb:s,args:[e,e=>{s(e)}].concat(Array.from(arguments).slice(2))};this._listeners[e].push(t),this.el.addEventListener.apply(this.el,t.args)}off(e,s){const t=this._listeners[e]||[];let i=-1;if(t.find(e=>(i++,e.originalCb===s))){const e=t[i];this.el.removeEventListener.apply(this.el,e.args),t.splice(i,1)}}replaceElement(e){Object.keys(this._listeners).forEach(s=>{this._listeners[s].forEach(s=>{this.el.removeEventListener.apply(this.el,s.args),e.addEventListener.apply(e,s.args)})}),this.el=e}once(e,s){const t=()=>{s(),this.off(e,t)};this.on(e,t)}trigger(e,s){const t=new CustomEvent(e,{detail:s});this.el.dispatchEvent(t)}}module.exports=e;
},{}],"wPME":[function(require,module,exports) {
const t=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,e="change";class r extends t{constructor(t){super(),this._chapters=Array.from(t.chapters||[])}addChapter(t){this._chapters.push(t),this._onChange()}removeChapter(t){let e=-1;for(let r=0;r<this._chapters.length;r++)if(this._chapters[r].chapter===t){e=r;break}e>=0&&this._chapters.splice(e,1),this._onChange()}set chapters(t){this._chapters=t,this._onChange()}get chapters(){return this._chapters}_onChange(){this.trigger(e)}getChapterForTime(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let r=0;r<this._chapters.length;r++){const s=this._chapters[r],h=s["start-time"];if(!s.duration||isNaN(s.duration)){if(this._chapters.length>r+1){const a=this._chapters[r+1];if(t>=h-e&&t<a["start-time"]-e)return s}else if(t>=h)return s}else if(h-e<=t&&t<h+s.duration-e)return s}return null}clearChapters(){this._chapters=[],this._onChange()}}module.exports=r;
},{"@marcom/ac-event-emitter-micro":"PZ1q"}],"Zdxx":[function(require,module,exports) {
module.exports={setItem:(e,t)=>localStorage.setItem("acv-".concat(e),t),getItem:e=>localStorage.getItem("acv-".concat(e)),hasItem:e=>null!==localStorage.getItem("acv-".concat(e)),removeItem:e=>localStorage.removeItem("acv-".concat(e)),VOLUME_LEVEL:"volume-level",VOLUME_MUTED:"volume-muted",CC_LANGUAGE:"cc-language",AUDIO_TRACK_TYPE:"audiotrack-type",AUDIO_TRACK_LANGUAGE:"audiotrack-language"};
},{}],"yYXJ":[function(require,module,exports) {
"use strict";var e="f7c9180f-5c45-47b4-8de4-428015f096c0",t=!1,c=window||self;try{t=!!c.localStorage.getItem(e)}catch(o){}module.exports=t;
},{}],"KYxK":[function(require,module,exports) {
"use strict";var o=require("../enabled");module.exports=function(e){return function(){if(o&&"object"==typeof window.console&&"function"==typeof console[e])return console[e].apply(console,Array.prototype.slice.call(arguments,0))}};
},{"../enabled":"yYXJ"}],"zUO9":[function(require,module,exports) {
"use strict";module.exports=require("./internal/expose")("log");
},{"./internal/expose":"KYxK"}],"GtsV":[function(require,module,exports) {
module.exports=60;
},{}],"Oerb":[function(require,module,exports) {
"use strict";const t={};module.exports=function(e){return t[e]||(t[e]=new Promise((t,o)=>{const r=document.createElement("script");r.type="text/javascript",r.src=e,r.onload=t,r.onerror=o;try{document.body.appendChild(r)}catch(c){o(c)}})),t[e]};
},{}],"rbN9":[function(require,module,exports) {
"use strict";var e,t=require("@marcom/useragent-detect");e=t.browser.safari?function(e,t){e.track.mode=t}:function(e,t){e.mode=t};var r=function(r){var i;if(r instanceof HTMLElement)this.el.appendChild(r);else{var n=document.createElement("track");n.src=r.src,n.kind="captions",n.srclang=r.srclang,"en"===n.srclang?n.label=r.label||"English":n.label=r.label||r.srclang&&r.srclang.toUpperCase()||"Unknown CC",t.browser.firefox?(i=this.el.textTracks.length,setTimeout(function(){this.el.appendChild(n),e(this.el.textTracks[i],r.mode||"hidden")}.bind(this),0)):t.os.android?(i=this.el.textTracks.length,this.el.appendChild(n),e(this.el.textTracks[i],r.mode||"hidden")):(this.el.appendChild(n),e(n,r.mode||"hidden")),this.trigger("TextTrackChange")}},i=function(){return this.el.textTracks},n=function(){if(!this._textTracksEmitter){var e=require("../dom-emitter/DOMEmitterMicro");this._textTracksEmitter=new e(this.getTextTracks())}return this._textTracksEmitter},s=function(e){for(var t=0,i=e?e.length:0;t<i;t++){var n=e[t];r.call(this,n)}},a=function(){};module.exports={create:s,add:r,get:i,getEmitter:n,destroy:a};
},{"@marcom/useragent-detect":"kIlq","../dom-emitter/DOMEmitterMicro":"EUf0"}],"C1YM":[function(require,module,exports) {
"use strict";module.exports=function(e,s){return new s.classDef(e,s.options)};
},{}],"lGNa":[function(require,module,exports) {
"use strict";var n=function(n,r,e){return new r.classDef(n,Object.assign(r.options||{},e||{}))},r=function(n,r,e){return function(t){n[r](t,e)}},e=function(n,e){var t=e.handlers||{},o={};for(var f in t)t.hasOwnProperty(f)&&n.on(f,o[f]=r(t,f,n));var s,i=e.observe;if(i){for(var u=i.update,a=i.source,c=a.on.bind(a)||a.addEventListener,v=a.off.bind(a)||a.removeEventListener,d=i.events,l=0,p=d.length,b=function(){u.call(i,n)};l<p;l++)c(f=d[l],b);s=function(){for(l=0;l<p;l++)f=d[l],v(f,b)}}return{destroy:function(){for(var r in o)o.hasOwnProperty(r)&&n.off(r,o[r]);s&&s()}}};module.exports=function(r,t,o){return t.classDef?n(r,t,o):e(r,t,o)};
},{}],"nbND":[function(require,module,exports) {
"use strict";var e=require("./createView"),r=require("./createBehavior"),t=function(e,r){"function"==typeof r.destroy&&r.destroy(),"function"==typeof e.destroy&&e.destroy()},o=function(e){for(;e.length;)e.shift().destroy()},n=function(e){for(var r in e)e.hasOwnProperty(r)&&(o(e[r]),delete e[r])},i=function(o,n,i){var s=e(o,n.view),a=r(s,n.behavior,i);return{view:s,behavior:a,destroy:t.bind(null,s,a)}};module.exports=function(e,r,t){var o={};for(var s in r)if(r.hasOwnProperty(s)&&"object"==typeof r[s]){var a=r[s],f=r.elementClassPrefix?"."+r.elementClassPrefix+"-"+a.className:"."+a.className,l=e.querySelectorAll(f);o[s]=[];for(var u=0,c=l.length;u<c;u++)o[s].push(i(l[u],a,t))}return{components:o,destroy:n.bind(null,o)}};
},{"./createView":"C1YM","./createBehavior":"lGNa"}],"dWDQ":[function(require,module,exports) {
"use strict";var t=function(){};t.create=function(){var e=function(){};return e.prototype=t.prototype,new e},t.prototype.open=function(t,e){t=t.toUpperCase(),this.xhr.open(t,e)},t.prototype.send=function(t){this.xhr.send(t)},t.prototype.setTimeout=function(t,e,o){this.xhr.ontimeout=function(){e(this.xhr,this.status),o(this.xhr,this.status)}.bind(this)},t.prototype.setTransportHeaders=function(t){for(var e in t)this.xhr.setRequestHeader(e,t[e])},module.exports=t;
},{}],"p5zU":[function(require,module,exports) {
"use strict";var t=require("./request"),s=function(){this.xhr=new XMLHttpRequest};s.prototype=t.create(),s.prototype.setReadyStateChangeHandlers=function(t,s,e){this.xhr.onreadystatechange=function(h){4===this.xhr.readyState&&(clearTimeout(this.timeout),this.xhr.status>=200&&this.xhr.status<300?(e(this.xhr.responseText,this.xhr.status,this.xhr),t(this.xhr,this.status)):(s(this.xhr,this.status),t(this.xhr,this.status)))}.bind(this)},module.exports=s;
},{"./request":"dWDQ"}],"w8xM":[function(require,module,exports) {
"use strict";module.exports=function(t,r){var n="";if(t){var e=Object.keys(t),c=e.length-1;e.forEach(function(r,e){var i=t[r],o=(r=r.trim())+(i=null===(i=i&&"string"==typeof i?i.trim():i)?"":"="+i)+(e===c?"":"&");n=n?n.concat(o):o})}return n&&!1!==r?"?"+n:n};
},{}],"JmTD":[function(require,module,exports) {
"use strict";var r=require("@marcom/ac-url/joinSearchParams");module.exports=function(e){if("object"!=typeof e)throw new TypeError("toQueryParameters error: argument is not an object");return r(e,!1)};
},{"@marcom/ac-url/joinSearchParams":"w8xM"}],"gwXy":[function(require,module,exports) {
"use strict";var t=require("./request"),e=require("@marcom/ac-object/toQueryParameters"),s=function(){this.xhr=new XDomainRequest};s.prototype=t.create(),s.prototype.setReadyStateChangeHandlers=function(t,e,s){this.xhr.onerror=function(){e(this.xhr,this.status),t(this.xhr,this.status)}.bind(this),this.xhr.onload=function(){s(this.xhr.responseText,this.xhr.status,this.xhr),t(this.xhr,this.status)}.bind(this)},s.prototype.send=function(t){t&&"object"==typeof t&&(t=e(t)),this.xhr.send(t)},s.prototype.setTransportHeaders=function(t){},module.exports=s;
},{"./request":"dWDQ","@marcom/ac-object/toQueryParameters":"JmTD"}],"FBqH":[function(require,module,exports) {
"use strict";var e=require("./xmlhttprequest"),t=require("./xdomainrequest"),n=/.*(?=:\/\/)/,o=/^.*:\/\/|\/.+$/g,r=window.XDomainRequest&&document.documentMode<10,u=function(e){return!!e.match(n)&&e.replace(o,"")!==window.location.hostname};module.exports=function(n,o){return new(r&&u(n)?t:e)};
},{"./xmlhttprequest":"p5zU","./xdomainrequest":"gwXy"}],"JzIj":[function(require,module,exports) {
"use strict";var e=require("./request/factory"),t={complete:function(e,t){},error:function(e,t){},method:"GET",headers:{},success:function(e,t,r){},timeout:5e3},r=function(){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])arguments[e].hasOwnProperty(t)&&(arguments[0][t]=arguments[e][t]);return arguments[0]},o={ajax:function(o,n){n=r({},t,n),"//"===o.substr(0,2)&&(o=window.location.protocol+o);var a=e(o);return a.open(n.method,o),a.setTransportHeaders(n.headers),a.setReadyStateChangeHandlers(n.complete,n.error,n.success),a.setTimeout(n.timeout,n.error,n.complete),a.send(n.data),a},get:function(e,t){return t.method="GET",o.ajax(e,t)},head:function(e,t){return t.method="HEAD",o.ajax(e,t)},post:function(e,t){return t.method="POST",o.ajax(e,t)}};module.exports=o;
},{"./request/factory":"FBqH"}],"jdfI":[function(require,module,exports) {
"use strict";module.exports=function(n,t){var u=null;return function(){null===u&&(n.apply(this,arguments),u=setTimeout(function(){u=null},t))}};
},{}],"Drqi":[function(require,module,exports) {
"use strict";module.exports=function(e,t,r){return t?(r=r||/{([^{}]*)}/g,e.replace(r,function(e,r){var n=t[r];return"string"==typeof n||"number"==typeof n||"boolean"==typeof n?n:e})):e};
},{}],"rcYV":[function(require,module,exports) {
"use strict";var t=require("@marcom/ac-string/supplant"),r={addLeadingZero:function(t,r){if(r=r||2,t<10||r>2)for(t=String(t);t.length<r;)t="0"+t;return t},formatTime:function(r,e,n){return isNaN(r)?"00:00":(r=this.splitTime(Math.floor(r),e,function(t){return this.addLeadingZero(t,n)}.bind(this)),t(e>=3600?"{PN}{hours}:{minutes}:{seconds}":"{PN}{minutes}:{seconds}",{PN:r.negativeModifier,hours:r.hours,minutes:r.minutes,seconds:r.seconds}))},splitTime:function(t,r,e){e=e||function(t){return t};var n={negativeModifier:"",hours:0,minutes:0,seconds:0};if(isNaN(t))return n;for(var i in n.negativeModifier=t<0?"-":"",t=Math.abs(t),n.hours=r>=3600?Math.floor(t/3600):0,n.minutes=n.hours?Math.floor(t/60%60):Math.floor(t/60),n.seconds=t%60,n)"number"==typeof n[i]&&"hours"!==i&&(n[i]=e(n[i]));return n},stringToNumber:function(t){for(var r=0,e=t.split(":");e.length;)3===e.length?r+=3600*parseFloat(e.shift()):2===e.length?r+=60*parseFloat(e.shift()):r+=parseFloat(e.shift());return r}};module.exports=r;
},{"@marcom/ac-string/supplant":"Drqi"}],"gUXq":[function(require,module,exports) {
"use strict";var t=require("../utils/Time");module.exports=function(e){for(var s,r,i=e.split(/\n/),l=/([\d]{2}:)?[\d]{2}:[\d]{2}.[\d]{3}( --> ){1}([\d]{2}:)?[\d]{2}:[\d]{2}.[\d]{3}/,n=[],d=0,u=i.length;d<u;d++)if(r="",l.test(i[d])){for((s=i[d].split(" --\x3e "))[0]=s[0].split(":").length<3?"00:"+s[0]:s[0],s[1]=s[1].split(":").length<3?"00:"+s[1]:s[1];++d&&d<u&&!l.test(i[d]);)""!==i[d]&&(r+=i[d]+"<br />");r=r.substr(0,r.length-6),d<u&&d--,n.push({startTime:t.stringToNumber(s[0].split(" ")[0]),endTime:t.stringToNumber(s[1].split(" ")[0]),text:r})}return n};
},{"../utils/Time":"rcYV"}],"oArW":[function(require,module,exports) {
const t=require("@marcom/ac-ajax-xhr"),e=require("@marcom/ac-function/throttle"),r=require("./parseVTT");class i{constructor(t,r){this._view=t,this._video=r.video,this._refreshTracks=this._refreshTracks.bind(this),this._throttledRefreshCurrentCaption=e(this._refreshCurrentCaption.bind(this,300)),this._addTrackListeners()}_addTrackListeners(){this._video.on("addtrack",this._refreshTracks),this._video.on("removetrack",this._refreshTracks),this._video.on("change",this._refreshTracks)}_addVideoListeners(e){if(!e.cues){this._view.setText("");try{t.get(e.src,{complete:function(t){e.cues=r(t.responseText),this._addVideoListeners(e),this._refreshCurrentCaption()}.bind(this),error:function(t){}.bind(this)})}catch(i){}}this._video.on("loadstart",this._refreshTracks),this._video.on("timeupdate",this._throttledRefreshCurrentCaption)}_removeVideoListeners(){this._video.off("loadstart",this._refreshTracks),this._video.off("timeupdate",this._throttledRefreshCurrentCaption)}_refreshTracks(){let t=this._video.getTextTracks();t&&t.length&&(t=t.filter(function(t){return"showing"===t.mode})),t.length?(this._activeTrack=t[0],this._addVideoListeners(this._activeTrack)):(this._activeTrack=null,this._removeVideoListeners()),this._refreshCurrentCaption()}_getCurrentCaptionText(t){const e=this._activeTrack?this._activeTrack.cues:null;if(!e)return"";if(this._currentCaption&&this._currentCaption.startTime>=t&&this._currentCaption<=t)return this._currentCaption.text;let r=0;const i=e.length;let s;for(;r<i;){if(e[r].startTime<=t&&e[r].endTime>=t)s=e[r];else if(e[r].startTime>=t)break;r++}return this._currentCaption=s,s?s.text:""}_refreshCurrentCaption(){this._view.setText(this._getCurrentCaptionText(this._video.getCurrentTime()))}destroy(){this._removeVideoListeners()}}module.exports=i;
},{"@marcom/ac-ajax-xhr":"JzIj","@marcom/ac-function/throttle":"jdfI","./parseVTT":"gUXq"}],"PsmA":[function(require,module,exports) {
class e{constructor(e){this.el=e}setText(e){this.el.innerHTML=e}}module.exports=e;
},{}],"wITK":[function(require,module,exports) {
const e=require("../ui/factory/createComponents"),t=require("./TextTracksBehavior"),i=require("../ui/elements/Label"),r=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,s='<div class="ac-video-player-text-track"></div>',a="is-visible",n="ac-video-player-text-track-container",c={textTracksPolyfill:{className:"ac-video-player-text-track",view:{classDef:i,options:{}},behavior:{classDef:t}}};class o extends r{constructor(e){super(e),this.container=e.container,this._video=e.video,this._initialize(e)}_initialize(t){this._onTrackChange=this._onTrackChange.bind(this),this.el=document.createElement("div"),this.el.innerHTML=t.template||s,this.el.classList.add(n),this._tracks=t.tracks||[],this._textTrackComponent=e(this.el,c,{video:this._video})}_onTrackChange(){this.trigger("change"),this.el.parentElement||(this._video.getRenderElement().parentElement.appendChild(this.el),this.el.firstElementChild.classList.add(a))}addTrack(e){this._tracks||(this._tracks=[]);let t=e.mode||"hidden";const i=this._onTrackChange;Object.defineProperty(e,"mode",{get:function(){return t},set:function(e){t=e,i()},enumerable:!0,configurable:!0}),this._tracks.push(e),this.trigger("addtrack")}clearTracks(){this._tracks=[],this.trigger("removetrack"),this.trigger("change")}getTextTracks(){return this._tracks}trigger(e,t){return super.trigger(e,Object.assign({type:e},t||{}))}destroy(){this._textTrackComponent.destroy(),super.destroy()}}module.exports=o;
},{"../ui/factory/createComponents":"nbND","./TextTracksBehavior":"oArW","../ui/elements/Label":"PsmA","@marcom/ac-event-emitter-micro":"PZ1q"}],"oHDu":[function(require,module,exports) {
"use strict";var t=require("./TextTracksDOM"),e=function(e){if(e)if(this._textTracksPolyfill){this._textTracksPolyfill.clearTracks();for(var r=0,l=e.length;r<l;r++)this._textTracksPolyfill.addTrack(e[r])}else this._textTracksPolyfill=new t({video:this,tracks:e,container:this._parentElement})},r=function(t){return this._textTracksPolyfill.addTrack(t)},l=function(){return this._textTracksPolyfill||this._createTextTrackTags([]),this._textTracksPolyfill.getTextTracks()},i=function(){return this._textTracksPolyfill||this._createTextTrackTags([]),this._textTracksPolyfill},s=function(){this._textTracksPolyfill.destroy(),this._textTracksPolyfill=null};module.exports={create:e,add:r,get:l,getEmitter:i,destroy:s};
},{"./TextTracksDOM":"wITK"}],"Lqis":[function(require,module,exports) {
"use strict";var e=require("@marcom/useragent-detect"),r=!e.browser.ie&&!e.browser.edge;module.exports=function(e){return!!(e=e||{}).hls||!e.threesixty&&(void 0===e.useNativeCaptions?r:e.useNativeCaptions)?require("./TextTracksNative"):require("./TextTracksPolyfill")};
},{"@marcom/useragent-detect":"kIlq","./TextTracksNative":"rbN9","./TextTracksPolyfill":"oHDu"}],"aLO9":[function(require,module,exports) {
"use strict";const t=require("../dom-emitter/DOMEmitterMicro"),e=require("../texttracks/createTextTracks"),r=require("@marcom/ac-console/log"),i=window.document,s=require("@marcom/useragent-detect").browser.safari,a=s?4:3;class n extends t{constructor(t){const r=t&&t.mediaElement?t.mediaElement:i.createElement("video");super(r),this.el=r,this.options=t||{},this._textTracks=e(t),this._initElement(),this._forwardAudioTrackChangeEvent=this._forwardAudioTrackChangeEvent.bind(this),this._forwardCaptionEvent=this._forwardCaptionEvent.bind(this),this._onTextTrackChangeAfterLoad=this._onTextTrackChangeAfterLoad.bind(this),this._textTracksEmitter=this.getTextTracksEventEmitter(),this._textTracksEmitter.on("addtrack",this._onTextTrackChangeAfterLoad),this._textTracksEmitter.on("addtrack",this._forwardCaptionEvent),this._textTracksEmitter.on("change",this._forwardCaptionEvent),this._textTracksEmitter.on("removetrack",this._forwardCaptionEvent),this.el.audioTracks&&(this.el.audioTracks.addEventListener("addtrack",this._forwardAudioTrackChangeEvent),this.el.audioTracks.addEventListener("removetrack",this._forwardAudioTrackChangeEvent),this.el.audioTracks.addEventListener("change",this._forwardAudioTrackChangeEvent))}_initElement(){this.el.classList.add("ac-video-media-controller"),null!==this.options.crossorigin&&this.el.setAttribute("crossorigin",this.options.crossorigin?this.options.crossorigin:"anonymous"),this.el.setAttribute("preload",this.options.preload||"auto"),this.el.setAttribute("x-webkit-airplay","")}_forwardCaptionEvent(t){this.trigger(t.type)}_forwardAudioTrackChangeEvent(t){this.trigger("AudioTrackChange")}load(t,e,r){r&&(t=t.map(function(t){return t+"#t="+r})),this.el.textTracks.length&&(this._cachedVisibleTracks=Array.from(this.el.textTracks).filter(t=>"showing"===t.mode)),this._createSourceTags(t),this._createTextTrackTags(e),this.el.load()}_createSourceTags(t){this.el.removeAttribute("src"),this.el.innerHTML="";let e=0;const r=t.length;for(r&&this.el.setAttribute("src",t[0]);e<r;e++){const r=i.createElement("source");r.src=t[e],this.el.appendChild(r)}}_playPromiseRejected(){this.trigger("PlayPromiseError")}play(){try{const e=this.el.play();e&&"function"==typeof e.catch&&(e.catch(function(t){this._playPromise===e&&this._playPromiseRejected()}.bind(this)),e.then(function(){this.trigger("PlayPromiseResolved")}.bind(this),function(t){r(t)})),this._playPromise=e}catch(t){r(t)}}refreshSize(){}pause(){this._playPromise=null,this.el.pause()}addTextTrack(t){this._addTextTrackTag(t)}removeTextTrack(t){this._removeTextTrackTag(t)}getRenderElement(){return this.getMediaElement()}getMediaElement(){return this.el}_createTextTrackTags(){return this._textTracks.create.apply(this,arguments)}_addTextTrackTag(){return this._textTracks.add.apply(this,arguments)}_removeTextTrackTag(){return this._textTracks.remove.apply(this,arguments)}getTextTracks(){return this._textTracks.get.apply(this,arguments)}getTextTracksEventEmitter(){return this._textTracks.getEmitter.apply(this,arguments)}getAudioTracks(){return this.el.audioTracks||[]}getReadyState(){return this.el.readyState}getPreload(){return this.el.preload}setPreload(t){return this.el.preload=t}setPoster(t){t?this.el.poster=t:this.el.removeAttribute("poster")}getVolume(){return this.el.volume}getMuted(){return this.el.muted}getPaused(){return this.el.paused}getCurrentTime(){return this.el.currentTime}getDuration(){return this.el.duration}setCurrentTime(t){return this.el.currentTime=t}setVolume(t){return this.el.volume=t}setMuted(t){this.el.muted=t,t?this.el.setAttribute("muted",""):this.el.removeAttribute("muted")}getEnded(){return this.el.ended}getError(){return this.el.error}setSrc(t){this.el.childNodes.length&&t===this._getSrcNode().url||this._createSourceTags([t])}advanceLiveStream(){}getCurrentSrc(){return this.el.src}_getSrcNode(){return this.el.childNodes[0]}_onTextTrackChangeAfterLoad(){if(this._cachedVisibleTracks){if(!this._cachedVisibleTracks.length)for(const t of Array.from(this.el.textTracks))t.mode="hidden";this._cachedVisibleTracks.forEach(t=>{const e=Array.from(this.el.textTracks).find(e=>t.language===e.language);e&&(e.mode="showing")})}this.trigger("TextTrackChange")}setControls(t){t?(this.el.setAttribute("controls",""),this.el.removeAttribute("aria-hidden")):(this.el.removeAttribute("controls"),this.el.setAttribute("aria-hidden","true"))}isFullscreen(){return this.el.webkitDisplayingFullscreen}supportsPictureInPicture(){return"function"==typeof this.el.webkitSetPresentationMode}isPictureInPicture(){return"picture-in-picture"===this.el.webkitPresentationMode}setPictureInPicture(t){this.supportsPictureInPicture()&&this.el.webkitSetPresentationMode(t?"picture-in-picture":"inline")}supportsAirPlay(){return!!window.WebKitPlaybackTargetAvailabilityEvent}canPlayType(t){return this.el.canPlayType(t)}getBuffered(){return this.el.buffered}isStalled(){return this.getReadyState()<a}destroy(){this._playPromise=null,this._textTracksEmitter&&(this._textTracksEmitter.off("addtrack",this._forwardCaptionEvent),this._textTracksEmitter.off("addtrack",this._onTextTrackChangeAfterLoad),this._textTracksEmitter.off("change",this._forwardCaptionEvent),this._textTracksEmitter.off("removetrack",this._forwardCaptionEvent)),this.el.audioTracks&&this.el.audioTracks.removeEventListener("change",this._forwardAudioTrackChangeEvent),this._textTracks&&this._textTracks.destroy.call(this),this._textTracks=null,this._textTracksEmitter=null,this.el=null}}module.exports=n;
},{"../dom-emitter/DOMEmitterMicro":"EUf0","../texttracks/createTextTracks":"Lqis","@marcom/ac-console/log":"zUO9","@marcom/useragent-detect":"kIlq"}],"G8oz":[function(require,module,exports) {
"use strict";let e=window.Hls;const s=require("@marcom/ac-console/log"),t=require("../utils/liveStreamLookback"),i="/ac/libs/hls.js/2.162.3/hls.js",r=require("../utils/loadScript"),h=require("./HTML5Video");class a extends h{constructor(e){super(e),this._src=null,this._hlsUrl=e.hlsUrl||i,this._hlsConfig=e.hlsConfig||{},this._initialize(e)}_initialize(s){void 0===e&&(this._deferredQueue=[],r(this._hlsUrl).then(()=>{e=window.Hls,this._initialize(s),this._deferredQueue.forEach(e=>{e()}),this._deferredQueue=null})),this._debugHls=s.debugHls,this._enablePerformanceLogging=s.enablePerformanceLogging,this._onHlsError=this._onHlsError.bind(this),this._onDesiredRateChanged=this._onDesiredRateChanged.bind(this),this._onPlay=this._onPlay.bind(this),this.on("play",this._onPlay)}_initHls(){if(this._hls){this._cachedVisibleTracks=Array.from(this.el.textTracks).filter(e=>"showing"===e.mode),this._hls.off(e.Events.ERROR,this._onHlsError),this._hls.off(e.Events.DESIRED_RATE_CHANGED,this._onDesiredRateChanged),this._hls.destroy();const s=this.el.cloneNode(!1),t=this.el.muted;this.el.parentElement.replaceChild(s,this.el),this.replaceElement(s),this.el.muted=t,this.getTextTracksEventEmitter().replaceElement(this.el.textTracks)}const s=Object.assign({},e.DefaultConfig.fragLoadPolicy);s.default=Object.assign({},s.default),s.default.reportCDNServer=!1,this._hls=new e(Object.assign({debug:this._debugHls,enableWorker:!0,condenseSubtitleTrack:!0,enableStreaming:!0,autoRecoverError:!0,enablePerformanceLogging:this._enablePerformanceLogging||!1,fragLoadPolicy:s},this._hlsConfig))}load(s,t){if(!e)return void this._deferredQueue.push(this.load.bind(this,s,t));this._initHls(),this._hls.on(e.Events.ERROR,this._onHlsError),this._hls.on(e.Events.DESIRED_RATE_CHANGED,this._onDesiredRateChanged),this._hls.on(e.Events.AUDIO_TRACK_SWITCHED,(e,s)=>{this.audioTrackEventObj=s,this._forwardAudioTrackChangeEvent()}),this._src=s[0];const i=function(){this._mediaAttached=!0,this._hls.off(e.Events.MEDIA_ATTACHED,i),this.setSrc(s[0]),this._createTextTrackTags(t)}.bind(this);this._hls.on(e.Events.MEDIA_ATTACHED,i),this._hls.attachMedia(this.el)}setSrc(s){e?(this._hls||this._initHls(),this._src=s,this._manifestParsed=!1,this._hls.loadSource(s,{appData:{}}),this._hls.on(e.Events.MANIFEST_PARSED,this._boundManifestParsed=function(){this._manifestParsed=!0,this._hls.off(e.Events.MANIFEST_PARSED,this._boundManifestParsed),this._shouldPlay&&this.play()}.bind(this))):this._deferredQueue.push(this.setSrc.bind(this,s))}getCurrentTime(){const e=super.getCurrentTime();return e<.1?0:e}getCurrentSrc(){return this._src}canPlayType(e){return"vnd.apple.mpegURL"===e?super.canPlayType("video/mp4"):super.canPlayType(e)}_playPromiseRejected(){this._hls&&void 0!==this._hls.desiredRate&&(this._hls.desiredRate=0),super._playPromiseRejected()}_onPlay(){this._hls&&0===this._hls.desiredRate&&(this._hls.desiredRate=1)}getError(){return this.el.error||this._error}getAudioTracks(){if(this._hls&&this._hls.audioTracks){const e=this._hls,s=e.audioSelectedPersistentID;return this._hls.audioTracks.map((t,i)=>{const r={enabled:t.persistentID===this.audioTrackEventObj.id,label:t.name,kind:t.characteristics.some(e=>"public.accessibility.describes-video"===e)?"description":"main",language:t.lang,_hlsTrack:t};return Object.defineProperty(r,"enabled",{get:function(){return t.persistentID===s},set:function(s){s&&(e.audioSelectedPersistentID=t.persistentID)}}),r})}return super.getAudioTracks()}destroy(){this.off("play",this._onPlay),super.destroy(),this._hls&&(this._hls.off(e.Events.AUDIO_TRACK_SWITCHED,this._forwardAudioTrackChangeEvent),this._hls.off(e.Events.AUDIO_TRACKS_UPDATED,this._forwardAudioTrackChangeEvent),this._hls.destroy(),this._hls=null)}_onHlsError(e,t){!0===t.fatal&&("fragLoadError"===t.details?s("HLS JS threw a fatal fragLoadError error, but we'll try to let it recover because it probably can if the network/stream recovers"):(this._error=t.type,this.trigger("error",t)))}_onDesiredRateChanged(e){0===this._hls.desiredRate?this.trigger("pause"):this.trigger("play")}play(){this._shouldPlay=!0,this._manifestParsed&&(this._mediaAttached||this.load([this._src]),super.play())}pause(){this._shouldPlay=!1,super.pause()}getPaused(){return this._hls&&void 0!==this._hls.desiredRate?0===this._hls.desiredRate:super.getPaused()}isStalled(){return void 0!==this._hls.desiredRate&&1===this._hls.desiredRate&&this._hls.desiredRate!==this._hls.effectiveRate||super.isStalled()}goToLive(){this.setCurrentTime(Math.max(this._hls.liveSyncPosition,this.getDuration()-t/2))}}module.exports=a;
},{"@marcom/ac-console/log":"zUO9","../utils/liveStreamLookback":"GtsV","../utils/loadScript":"Oerb","./HTML5Video":"aLO9"}],"CZnE":[function(require,module,exports) {
function t(t,a,o){const n=THREE.Math.degToRad(90-t),e=THREE.Math.degToRad(a),h=o*Math.sin(n)*Math.cos(e),s=o*Math.cos(n),M=o*Math.sin(n)*Math.sin(e);return new THREE.Vector3(h,s,M)}module.exports=t;
},{}],"c55L":[function(require,module,exports) {
module.exports=(e=>{let r=e;return r>180?r=r%180-180:r<=-180&&(r=r%180+180),r});
},{}],"ek5M":[function(require,module,exports) {
const t=require("@marcom/ac-raf-emitter/update"),i=require("@marcom/ac-raf-emitter/cancelUpdate"),e=require("../utils/normalizeLongitude"),o=.5,a=.1,n=5,r=20;class c{constructor(t={}){this._horizontalFriction=t.friction&&t.friction.x||o,this._verticalFriction=t.friction&&t.friction.x||o,this._horizontalIncrement=t.acceleration&&t.acceleration.x||a,this._verticalIncrement=t.acceleration&&t.acceleration.y||a,this._minVelocity=t.minVelocity||n,this._maxVelocity=t.maxVelocity||r,this._velocity={x:0,y:0},this._bindMethods()}_bindMethods(){this._updateInertia=this._updateInertia.bind(this)}_updateInertia(){Math.abs(this._velocity.x)>this._minVelocity||Math.abs(this._velocity.y)>this._minVelocity?(this._velocity.x*=this._horizontalFriction,this._velocity.y*=this._verticalFriction,this._lon+=this._velocity.x*this._horizontalIncrement,this._lat+=this._velocity.y*this._verticalIncrement,this._inertiaRaf=t(this._updateInertia)):(this._velocity={x:0,y:0},i(this._inertiaRaf),this._inertiaComplete())}cancelInertia(){this._velocity={x:0,y:0},i(this._inertiaRaf)}_inertiaComplete(){}set position(t){this._lat=t.lat,this._lon=e(t.lon)}get position(){return{lat:this._lat,lon:this._lon}}}module.exports=c;
},{"@marcom/ac-raf-emitter/update":"w3n5","@marcom/ac-raf-emitter/cancelUpdate":"fk9W","../utils/normalizeLongitude":"c55L"}],"GJzR":[function(require,module,exports) {
const e=require("../utils/normalizeLongitude"),t=require("./InertialControls"),o=.1,s=.1,i=.95,n=.5,h=15,u=135,_=90,c={acceleration:{x:.1,y:.1},friction:{x:.95,y:.95},minVelocity:.5,maxVelocity:20};class v extends t{constructor(e){super(e=Object.assign({},c,e)),this.el=e.el,this._mouseDown=!1,this._scale=1,this._hasInertia=!1!==e.inertia||e.inertia,this._bindMethods(),this._addEventListeners()}_bindMethods(){this._onMouseMove=this._onMouseMove.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onClick=this._onClick.bind(this),super._bindMethods()}_addEventListeners(){this.el.addEventListener("mousedown",this._onMouseDown),this.el.addEventListener("touchstart",this._onMouseDown,{passive:!1}),this.el.addEventListener("click",this._onClick),this.el.addEventListener("touchmove",this._onTouchMove,{passive:!1})}_removeEventListeners(){this.el.removeEventListener("mousedown",this._onMouseDown),this.el.removeEventListener("touchstart",this._onMouseDown),window.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("mouseup",this._onMouseUp),this.el.removeEventListener("touchmove",this._onTouchMove),document.body.removeEventListener("touchmove",this._onTouchMove),document.body.removeEventListener("touchend",this._onMouseUp)}_onMouseUp(e){window.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("mouseup",this._onMouseUp),document.body.removeEventListener("touchmove",this._onTouchMove),document.body.removeEventListener("touchend",this._onMouseUp),this._mouseDown&&this._hasInertia&&Date.now()-this._mouseMoveTime<300&&this._updateInertia(),setTimeout(()=>{this._mouseDown||(this._dragging=!1)},350),this._mouseDown=!1}sendMouseDown(e){this._onMouseDown(e)}_onClick(e){this._dragging||(this._velocity={x:0,y:0},this._mouseDown=!1,this._cachedPosition=e,document.removeEventListener("mousemove",this._onMouseMove),document.removeEventListener("mouseup",this._onMouseUp),document.body.removeEventListener("touchmove",this._onTouchMove),document.body.removeEventListener("touchend",this._onMouseUp))}_onMouseDown(t){this._mouseDownTime=Date.now();let o=t;if(t.touches){if(1!==t.touches.length)return;o=t.touches[0]}this._cachedPosition=t,window.addEventListener("mousemove",this._onMouseMove),window.addEventListener("mouseup",this._onMouseUp),document.body.addEventListener("touchmove",this._onTouchMove,{passive:!1}),document.body.addEventListener("touchend",this._onMouseUp),this._mouseDown=!0,this._lastMouseX=o.clientX,this._lastMouseY=o.clientY,this._lastMouseDownLon=e(this._lon),this._lastMouseDownLat=this._lat}_onTouchMove(e){e.cancelable&&e.preventDefault(),this._onMouseMove(e)}_onMouseMove(t){if(!this._mouseDown)return;this._dragging=!0;let o=t;if(t.touches&&(o=t.touches[0]),this._cachedPosition.clientX===o.clientX&&this._cachedPosition.clientY===o.clientY)return;const s=this._lastMouseX-o.clientX,i=this._lastMouseY-o.clientY,n=s/this._viewerWidth,h=i/this._viewerHeight;if(this._cachedPosition){const e=this._cachedPosition.clientX-o.clientX,t=this._cachedPosition.clientY-o.clientY;this._velocity.x=Math.max(Math.min(e,this._maxVelocity),-this._maxVelocity),this._velocity.y=Math.max(Math.min(t,this._maxVelocity),-this._maxVelocity)}this._lon=e(n*u+this._lastMouseDownLon),this._lat=h*_+this._lastMouseDownLat,this._cachedPosition=o,this._mouseMoveTime=Date.now()}get isActive(){return this._mouseDown||this._hasInertia&&(Math.abs(this._velocity.x)>this._minVelocity||Math.abs(this._velocity.y)>this._minVelocity)}get scale(){return this._scale}setViewerSize(e,t){this._viewerWidth=e,this._viewerHeight=t}destroy(){this._removeEventListeners()}}module.exports=v;
},{"../utils/normalizeLongitude":"c55L","./InertialControls":"ek5M"}],"tcot":[function(require,module,exports) {
const t=require("../utils/normalizeLongitude"),i=require("@marcom/ac-console/log"),e=.02;class s{constructor(t){this._bindMethods()}_bindMethods(){this._onOrientation=this._onOrientation.bind(this)}_addEventListeners(){window.addEventListener("devicemotion",this._onOrientation,!0)}_removeEventListeners(){window.removeEventListener("devicemotion",this._onOrientation,!0)}_onOrientation(i){window.matchMedia("(orientation: portrait)").matches?(this._lon=t(this._lon-i.rotationRate.beta*e),this._lat=this._lat-i.rotationRate.alpha*e):i.orientation||-90===window.orientation?(this._lon=t(this._lon+i.rotationRate.alpha*e),this._lat=this._lat-i.rotationRate.beta*e):(this._lon=t(this._lon-i.rotationRate.alpha*e),this._lat=this._lat+i.rotationRate.beta*e)}set position(i){this._lat=i.lat,this._lon=t(i.lon)}get position(){return{lat:this._lat,lon:this._lon}}disable(){this._removeEventListeners()}enable(){this.requestPermission().then(()=>{this._addEventListeners()})}requestPermission(){return this._permissionPromise||("function"!=typeof DeviceMotionEvent.requestPermission?this._permissionPromise=Promise.resolve():(this._permissionPromise=DeviceMotionEvent.requestPermission(),this._permissionPromise.catch(t=>{i("User didn't grant Gyro permission, or request wasn't tied to a user gesture"),this._permissionPromise=null}))),this._permissionPromise}destroy(){this._removeEventListeners()}}module.exports=s;
},{"../utils/normalizeLongitude":"c55L","@marcom/ac-console/log":"zUO9"}],"XYDk":[function(require,module,exports) {
"use strict";var n="Ease expects an easing function.";function t(t,e){if("function"!=typeof t)throw new TypeError(n);this.easingFunction=t,this.cssString=e||null}var e=t.prototype;e.getValue=function(n){return this.easingFunction(n,0,1,1)},module.exports=t;
},{}],"i7BU":[function(require,module,exports) {
function n(n,r,t,u){function e(n,r){return 1-3*r+3*n}function o(n,r){return 3*r-6*n}function f(n){return 3*n}function i(n,r,t){return((e(r,t)*n+o(r,t))*n+f(r))*n}this.get=function(c){return n===r&&t===u?c:i(function(r){for(var u=r,c=0;c<4;++c){var a=(s=u,3*e(d=n,g=t)*s*s+2*o(d,g)*s+f(d));if(0===a)return u;var v=i(u,n,t)-r;u-=v/a}var s,d,g;return u}(c),r,u)}}module.exports=n;
},{}],"uXMA":[function(require,module,exports) {
"use strict";require("@marcom/ac-polyfills/Array/prototype.every");var e=require("./Ease"),r=require("./helpers/KeySpline"),t="Bezier curve expects exactly four (4) numbers. Given: ";module.exports=function(n,i,o,u){var c=Array.prototype.slice.call(arguments),l=c.every(function(e){return"number"==typeof e});if(4!==c.length||!l)throw new TypeError(t+c);var p=new r(n,i,o,u),y="cubic-bezier("+c.join(", ")+")";return new e(function(e,r,t,n){return p.get(e/n)*t+r},y)};
},{"@marcom/ac-polyfills/Array/prototype.every":"wlbw","./Ease":"XYDk","./helpers/KeySpline":"i7BU"}],"bpNB":[function(require,module,exports) {
const e=require("../utils/vector3FromLatLon"),t=require("@marcom/useragent-detect"),i=t.browser.safari&&t.os.osx?"high-performance":"default",s=require("@marcom/ac-raf-emitter/update"),a=require("@marcom/ac-raf-emitter/cancelUpdate");class r{constructor(e){this.el=e.el,this._distance=e.distance,this._textureSrc=e.src,this._pointerControls=e.pointerControls,this._videoElement=e.videoElement,this._maxLat=e.maxLat,e.useCanvasForVideoTexture&&(this._canvas=document.createElement("canvas"),this._canvas.width=this._videoElement.clientWidth||640,this._canvas.height=this._videoElement.clientHeight||480,this._canvasCtx=this._canvas.getContext("2d"))}attach(){const e=this.el.clientWidth,t=this.el.clientHeight,s=e/t;this._camera=new THREE.PerspectiveCamera(75,s,1,1100),this._camera.target=new THREE.Vector3(0,0,0),this._scene=new THREE.Scene,this._geometry=new THREE.SphereBufferGeometry(500,60,40),this._geometry.scale(-1,1,1),this._texture=this._createTexture(this._textureSrc),this._material=new THREE.MeshBasicMaterial({map:this._texture}),this._mesh=new THREE.Mesh(this._geometry,this._material),this._scene.add(this._mesh),this._renderer=new THREE.WebGLRenderer({antialias:!1,powerPreference:i}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(e,t),this._canvas&&this._tick()}_tick(){this._canvasCtx&&this._videoElement&&(this._canvasCtx.drawImage(this._videoElement,0,0,this._canvas.width,this._canvas.height),this._texture.needsUpdate=!0),s(()=>this._tick())}update(e){const t=e,i=Math.max(-this._maxLat,Math.min(this._maxLat,t.lat)),s=THREE.Math.degToRad(90-i),a=THREE.Math.degToRad(t.lon),r=this._distance*Math.sin(s)*Math.cos(a),n=this._distance*Math.cos(s),h=this._distance*Math.sin(s)*Math.sin(a);return this._camera.zoom=this._pointerControls.scale,this._camera.position.x=r,this._camera.position.y=n,this._camera.position.z=h,this._camera.lookAt(this._camera.target),this._camera.updateProjectionMatrix(),this._renderer.render(this._scene,this._camera),{lat:i,lon:t.lon,x:r,y:n,z:h}}refreshSize(e,t){this._canvas&&(this._canvas.width=THREE.Math.ceilPowerOfTwo(this._videoElement.videoWidth||1),this._canvas.height=THREE.Math.ceilPowerOfTwo(this._videoElement.videoHeight||1)),this._camera.aspect=e/t,this._camera.updateProjectionMatrix(),this._renderer.setSize(e,t),this._renderer.render(this._scene,this._camera)}positionCamera(t,i){const s=e(i,t,this._distance);this._camera.position.copy(s),this._camera.lookAt(this._camera.target),this._camera.updateProjectionMatrix(),this._renderer.render(this._scene,this._camera)}get domElement(){return this._renderer.domElement}_createTexture(e){if(e instanceof HTMLVideoElement){this._videoElement=e,this._videoElement.setAttribute("playsinline","playsinline"),this._videoElement.setAttribute("webkit-playsinline","webkit-playsinline");const t=this._canvas?new THREE.CanvasTexture(this._canvas):new THREE.VideoTexture(this._videoElement);return t.minFilter=THREE.LinearFilter,t.format=THREE.RGBFormat,t}if(e.endsWith(".mp4")||e.endsWith(".m3u8")||e.endsWith(".webm")){this._videoElement||(this._videoElement=document.createElement("video")),this._videoElement.src=e,this._videoElement.loop=!0,this._videoElement.muted=!0,this._videoElement.crossOrigin="anonymous",this._videoElement.setAttribute("webkit-playsinline","webkit-playsinline"),this._videoElement.setAttribute("playsinline","playsinline"),this._videoElement=this._videoElement;const t=this._canvas?new THREE.CanvasTexture(this._canvas):new THREE.VideoTexture(this._videoElement);return t.minFilter=THREE.LinearFilter,t.format=THREE.RGBFormat,t}return(new THREE.TextureLoader).load(e)}async updateTexture(e){return new Promise(t=>{(new THREE.TextureLoader).load(e,e=>{this._material.map=e,this._material.map.needsUpdate=!0,t()})})}}module.exports=r;
},{"../utils/vector3FromLatLon":"CZnE","@marcom/useragent-detect":"kIlq","@marcom/ac-raf-emitter/update":"w3n5","@marcom/ac-raf-emitter/cancelUpdate":"fk9W"}],"Jh66":[function(require,module,exports) {
const e=require("@marcom/ac-raf-emitter/update"),r=require("@marcom/ac-raf-emitter/cancelUpdate");module.exports=function(r,c){let o,n=0,t=!1,a=new Promise((o,a)=>{const m=performance.now(),i=()=>{if(t)return void a();const s=(performance.now()-m)/r;s>=1?(c(1),o()):(n=s,c(s),e(i))};e(i)});return a.catch(()=>{o()}),{promise:a,cancel:()=>(t=!0,new Promise(e=>{o=(()=>{e()})}))}};
},{"@marcom/ac-raf-emitter/update":"w3n5","@marcom/ac-raf-emitter/cancelUpdate":"fk9W"}],"dap5":[function(require,module,exports) {
const e=require("./normalizeLongitude");module.exports=(r=>{let t=r;return Math.abs(t)>180?e(t):t>0?-360+t:360+t});
},{"./normalizeLongitude":"c55L"}],"nTT4":[function(require,module,exports) {
const t=require("./InertialControls"),i=require("../utils/normalizeLongitude"),r=require("@marcom/ac-raf-emitter/update"),e=require("@marcom/ac-raf-emitter/cancelUpdate"),o={acceleration:{x:.6,y:.6},friction:{x:.95,y:.95},minVelocity:.1,maxVelocity:20};class s extends t{constructor(t){super(t=Object.assign({},o,t)),this._bindMethods()}_bindMethods(){this.leftArrowDown=this.leftArrowDown.bind(this),this.rightArrowDown=this.rightArrowDown.bind(this),this.downArrowDown=this.downArrowDown.bind(this),this.upArrowDown=this.upArrowDown.bind(this),this.leftArrowUp=this.leftArrowUp.bind(this),this.rightArrowUp=this.rightArrowUp.bind(this),this.downArrowUp=this.downArrowUp.bind(this),this.upArrowUp=this.upArrowUp.bind(this),super._bindMethods()}leftArrowDown(){Math.abs(this._velocity.x-this._horizontalIncrement)<this._maxVelocity?this._velocity.x-=this._horizontalIncrement:this._velocity.x=-this._maxVelocity,this._lon=i(this._lon+this._velocity.x),this._triggerInertia()}rightArrowDown(){Math.abs(this._velocity.x+this._horizontalIncrement)<this._maxVelocity?this._velocity.x+=this._horizontalIncrement:this._velocity.x=this._maxVelocity,this._velocity.x+=this._horizontalIncrement,this._lon=i(this._lon+this._velocity.x),this._triggerInertia()}upArrowDown(t){Math.abs(this._velocity.y-this._verticalIncrement)<this._maxVelocity?this._velocity.y-=this._verticalIncrement:this._velocity.y=-this._maxVelocity,this._lat=this._lat+this._velocity.y,this._triggerInertia()}downArrowDown(){Math.abs(this._velocity.y+this._verticalIncrement)<this._maxVelocity?this._velocity.y+=this._verticalIncrement:this._velocity.y=this._maxVelocity,this._lat=this._lat+this._velocity.y,this._triggerInertia()}leftArrowUp(){this._triggerInertia()}rightArrowUp(){this._triggerInertia()}upArrowUp(){this._triggerInertia()}downArrowUp(){this._triggerInertia()}_triggerInertia(){e(this._inertiaRaf),r(this._updateInertia)}get isActive(){return Math.abs(this._velocity.x)>this._minVelocity||Math.abs(this._velocity.y)>this._minVelocity}}module.exports=s;
},{"./InertialControls":"ek5M","../utils/normalizeLongitude":"c55L","@marcom/ac-raf-emitter/update":"w3n5","@marcom/ac-raf-emitter/cancelUpdate":"fk9W"}],"DNPr":[function(require,module,exports) {
module.exports=function(e,n,o,r,t){return r+(t-r)*(e-n)/(o-n)};
},{}],"BQcX":[function(require,module,exports) {
"use strict";var e=require("./helpers/globals"),t=require("@marcom/ac-function/once");function n(){var t=e.getDocument().createElement("canvas");return"function"==typeof t.getContext&&!(!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}module.exports=t(n),module.exports.original=n;
},{"./helpers/globals":"P7z6","@marcom/ac-function/once":"t68A"}],"kGdU":[function(require,module,exports) {
"use strict";module.exports=function(t){return new Promise((e,r)=>{const o=document.createElement("script");o.type="text/javascript",o.src=t,o.onload=e,o.onerror=r;try{document.body.appendChild(o)}catch(c){r(c)}})};
},{}],"vUO5":[function(require,module,exports) {
"use strict";const t=require("./utils/vector3FromLatLon"),i=require("@marcom/ac-raf-emitter/update"),e=require("@marcom/ac-raf-emitter/cancelUpdate"),s=require("./controls/PointerControls"),o=require("./controls/OrientationControls"),n=require("@marcom/ac-event-emitter-micro/EventEmitterMicro"),r=require("@marcom/ac-easing/src/ac-easing/createBezier"),a=require("./renderers/SphericalRenderer"),h=require("./utils/simpleTimer"),l=require("./utils/inverseLongitude"),_=require("./controls/ArrowControls"),c=require("./utils/map"),d=require("@marcom/ac-feature/webGLAvailable")(),m=require("./utils/loadScript"),u=require("@marcom/useragent-detect"),p=u.os.ios,T=80,g=1.25,E={slow:80,fast:120},P=r(.25,.1,0,1),C=r(.1,.15,0,1),O=.001,v=.999,R=1600,x=1600,w=12,A="/ac/libs/three/92/three.min.js";class M extends n{constructor(t){super(),this.el=t.el,d||setTimeout(()=>{this.trigger("error")}),this._textureSrc=t.src,t.video?this._videoElement=t.video:t.src instanceof HTMLVideoElement?this._videoElement=t.src:this._textureSrc&&(this._textureSrc.endsWith(".mp4")||this._textureSrc.endsWith(".m3u8")||this._textureSrc.endsWith(".webm"))&&(this._videoElement=document.createElement("video")),this._flat=t.flat,this._maxLat=t.maxLat||T,this._pointerControls=new s({el:t.mouseTarget||this.el}),this.arrowControls=new _,this._easing=t.easing||P,this._sineEasing=t.sineEasing||C,this._mapMinValue=void 0!==t.mapMinValue?t.mapMinValue:O,this._mapMaxValue=t.mapMaxValue||v,this._rotationDuration=t.rotationDuration||R,p&&(this._orientationControls=new o),this._panVelocity=Object.assign({},t.panVelocity||E),this._overshootMultiplier=t.overshootMultiplier||g,this._oscillationDuration=t.ocillationDuration||x,this._oscillationDistance=t.ocillationDistance||w,this._bindMethods();const i=window.THREE?Promise.resolve():m(t.threeUrl||A);this._cachedPos={lat:0,lon:0},i.then(()=>{this._attach(),this.refreshSize()})}_bindMethods(){this._onPlaying=this._onPlaying.bind(this),this._onLoadedMetadata=this._onLoadedMetadata.bind(this),this._videoElement&&(this._videoElement.addEventListener("playing",this._onPlaying),this._videoElement.addEventListener("loadedmetadata",this._onLoadedMetadata))}_attach(){this._distance=50;const t={lat:0,lon:0};this._cachedPos=t,this._pointerControls.position=t,this._orientationControls&&(this._orientationControls.position=t);let e=a;this._renderer=new e({el:this.el,distance:this._distance,src:this._textureSrc,pointerControls:this._pointerControls,videoElement:this._videoElement,useCanvasForVideoTexture:p,maxLat:this._maxLat}),this._renderer.attach(),this._renderer.domElement.classList.add("threesixty-renderer"),this.el.appendChild(this._renderer.domElement),this._animate=this._animate.bind(this),this._animateRAF=i(this._animate)}_animate(){this._update(),this._animateRAF=i(this._animate)}_update(t){if(!window.THREE)return;let i=t;i||(i=this.arrowControls.isActive?this.arrowControls.position:this._pointerControls.isActive?this._pointerControls.position:this._orientationControls?this._orientationControls.position:this._cachedPos);let e=!1;if(this._cachedPos.lat!==i.lat||this._cachedPos.lon!==i.lon)e=!0;else if(this._videoElement&&this._videoElement.paused)return;let s=this._renderer.update(i);this._cachedPos=Object.assign({},s),this._pointerControls.position=s,this.arrowControls.position=s,this._orientationControls&&(this._orientationControls.position=s),e&&this.trigger(M.POSITION_CHANGE)}refreshSize(){this._onResize()}setPos(t,i){this._pointerControls&&(this._pointerControls.position={lat:t,lon:i}),this._orientationControls&&(this._orientationControls.position={lat:t,lon:i}),this._update({lat:t,lon:i})}set src(t){this._updateTexture(t)}async _updateTexture(t){await this._renderer.updateTexture(t),this.trigger("textureChange")}_onResize(){if(!window.THREE||!this._renderer)return;let t,i;t=this.el.clientWidth,i=this.el.clientHeight,e(this._animateRAF),this._pointerControls.setViewerSize(t,i),this._renderer.refreshSize(t,i),this._animate()}_onLoadedMetadata(){this._videoElement.removeEventListener("loadedmetadata",this._onLoadedMetadata),this._onResize()}_onPlaying(){this._videoElement.removeEventListener("playing",this._onPlaying),this._onResize(),this._orientationControls&&this._orientationControls.enable()}requestOrientationControl(){this._orientationControls&&this._orientationControls.requestPermission()}play(){this._orientationControls&&this._orientationControls.requestPermission(),this._videoElement&&this._videoElement.play()}pause(){this._videoElement&&!this._videoElement.paused&&this._videoElement.pause()}sendMouseDown(t){this._pointerControls.sendMouseDown(t)}destroy(){super.destroy()}get position(){return Object.assign({},this._cachedPos)}get isAtOrigin(){return Math.abs(this.position.lat)<=.5&&Math.abs(this.position.lon)<=.5}oscillateLongitude(){this._pointerControls.cancelInertia(),this.arrowControls.cancelInertia();const t=new THREE.Vector2(this.position.lon,this.position.lat),i=this._oscillationDuration,s={time:i,startPosition:Object.assign({},this.position),targetPosition:Object.assign({},this.position)};return this._currentTimer?this._currentTimer.cancel().then(()=>{this._currentTimer=null,this.oscillateLongitude()}):(e(this._animateRAF),this.trigger(M.ROTATION_START,s),new Promise(e=>{this._currentTimer=h(i,i=>{const e=Math.sin(Math.PI*this._sineEasing.getValue(i)),o=(new THREE.Vector2).copy(t);o.x=t.x-e*this._oscillationDistance,this._tmpCurrentPosition={lat:o.y,lon:o.x},this.trigger(M.ROTATION_UPDATE,{t:i,easedVal:e,startPosition:s.startPosition,currentPosition:{lat:o.y,lon:o.x},targetPosition:s.targetPosition}),this._renderer.positionCamera(o.x,o.y)}),this._currentTimer.promise.then(()=>{this.trigger(M.ROTATION_COMPLETE,s),this.setPos(t.y,t.x),this._animate(),this._currentTimer=null,this._tmpCurrentPosition=null,e()}).catch(()=>{})}))}get mediaElement(){return this._videoElement}panToPosition(t){return this._respositionCameraToPosition(t)}_respositionCameraToPosition(t,i){if(this._currentTimer)return this._currentTimer.cancel().then(()=>{this._currentTimer=null,this.setPos(this._tmpCurrentPosition.y,this._tmpCurrentPosition.x),this._tmpCurrentPosition=null,this._respositionCameraToPosition(t,i)});if(this._pointerControls.cancelInertia(),this.arrowControls.cancelInertia(),t.lat===this.position.lat&&t.lon===this.position.lon)return this.trigger(M.ROTATION_START,{time:0,startPosition:Object.assign({},this.position),targetPosition:Object.assign({},this.position)}),this.trigger(M.ROTATION_COMPLETE,{time:1,startPosition:Object.assign({},this.position),targetPosition:Object.assign({},this.position)}),Promise.resolve();i=i?r(i.x1,i.y1,i.x2,i.y2):this._easing;const s=new THREE.Vector2(this.position.lon,this.position.lat),o=new THREE.Vector2(l(t.lon),t.lat);let n=new THREE.Vector2(t.lon,t.lat),a=s.distanceTo(n),_=s.distanceTo(o);_<a&&(a=_,n=o);const d=(new THREE.Vector2).copy(s);e(this._animateRAF);const m=this._rotationDuration,u={time:m,startPosition:Object.assign({},this._cachedPos),targetPosition:Object.assign({},t)};return this.trigger(M.ROTATION_START,u),new Promise(i=>{this._currentTimer=h(m,t=>{let i;i=1===t?1:c(this._easing.getValue(t),0,1,this._mapMinValue,this._mapMaxValue);const e=d.lerpVectors(s,n,i);this.trigger(M.ROTATION_UPDATE,{t:t,easedVal:i,startPosition:u.startPosition,currentPosition:{lat:e.y,lon:e.x},targetPosition:{lat:n.x,lon:n.y}}),this._tmpCurrentPosition=e,this._renderer.positionCamera(e.x,e.y)}),this._currentTimer.promise.then(()=>{this.trigger(M.ROTATION_COMPLETE,u),this.setPos(t.lat,t.lon),this._animate(),this._currentTimer=null,this._tmpCurrentPosition=null,i()})}).catch(()=>{})}}M.ROTATION_START="RotationStart",M.ROTATION_UPDATE="RotationUpdate",M.ROTATION_COMPLETE="RotationComplete",M.POSITION_CHANGE="360PositionChange",module.exports=M;
},{"./utils/vector3FromLatLon":"CZnE","@marcom/ac-raf-emitter/update":"w3n5","@marcom/ac-raf-emitter/cancelUpdate":"fk9W","./controls/PointerControls":"GJzR","./controls/OrientationControls":"tcot","@marcom/ac-event-emitter-micro/EventEmitterMicro":"osan","@marcom/ac-easing/src/ac-easing/createBezier":"uXMA","./renderers/SphericalRenderer":"bpNB","./utils/simpleTimer":"Jh66","./utils/inverseLongitude":"dap5","./controls/ArrowControls":"nTT4","./utils/map":"DNPr","@marcom/ac-feature/webGLAvailable":"BQcX","./utils/loadScript":"kGdU","@marcom/useragent-detect":"kIlq"}],"U1QV":[function(require,module,exports) {
module.exports=require("./AC360");
},{"./AC360":"vUO5"}],"PeJI":[function(require,module,exports) {
"use strict";const t=require("@marcom/ac-360");class e{_init(t){this._renderElement=document.createElement("div"),this._renderElement.classList.add("threesixty-video-container"),this.el.style.visibility="hidden",this.el.style.opacity=0,this.sendMouseDown=this.sendMouseDown.bind(this),this._renderElement.appendChild(this.el),this._init360()}_init360(){this._ac360=new t({el:this._renderElement,src:this.getMediaElement()}),this._ac360.on("error",function(){this._error="360_ERROR",this.trigger("error")}.bind(this)),this._loadOnInit&&(this.load(...this._loadOnInit),this._loadOnInit=null)}load(){this._ac360?(this._ac360.setPos(0,0),this._super.load.apply(this,arguments)):this._loadOnInit=arguments}play(){this.getEnded()&&this._ac360.setPos(0,0),this._super.play.apply(this)}sendMouseDown(t){this._ac360.sendMouseDown(t)}getRenderElement(){return this._renderElement}get360(){return this._ac360}setControls(t){this._super.setControls.apply(this,arguments)}supportsPictureInPicture(){return!1}supportsAirPlay(){return!1}refreshSize(){this._ac360&&this._ac360.refreshSize()}getError(){return this._error||this._super.getError.apply(this)}}module.exports=e;
},{"@marcom/ac-360":"U1QV"}],"xZDV":[function(require,module,exports) {
"use strict";const e=require("./HTML5Video"),t=require("./ThreeSixtyVideoBase");class o extends e{constructor(t){super(t),this._super=e.prototype,this._init(t)}}for(let r of Object.getOwnPropertyNames(t.prototype))"constructor"!==r&&(o.prototype[r]=t.prototype[r]);module.exports=o;
},{"./HTML5Video":"aLO9","./ThreeSixtyVideoBase":"PeJI"}],"JpHs":[function(require,module,exports) {
"use strict";const e=require("./HLSVideo"),t=require("./ThreeSixtyVideoBase");class o extends e{constructor(t){super(t),this._super=e.prototype,this._init(t)}}for(let r of Object.getOwnPropertyNames(t.prototype))"constructor"!==r&&(o.prototype[r]=t.prototype[r]);module.exports=o;
},{"./HLSVideo":"G8oz","./ThreeSixtyVideoBase":"PeJI"}],"myc8":[function(require,module,exports) {
"use strict";const e=require("./HLSVideo"),r=require("./ThreeSixtyVideo"),s=require("./ThreeSixtyVideoHls"),t=require("./HTML5Video"),i=require("@marcom/useragent-detect"),n=i.browser.safari||i.browser.edge,u="MediaSource"in window&&!i.browser.edge&&!i.os.ios;function o(e){return e.src&&-1!==e.src.indexOf(".m3u8")||e.sources&&e.sources[0]&&-1!==e.sources[0].indexOf(".m3u8")}function c(e){return(e.hls||o(e))&&!(n&&!1!==e.useNativeHls&&!e.dvr)&&u}class a{create(i,n){if(c(i)&&!i.threesixty)return new e(Object.assign({},i,{parentElement:n}));if(i.threesixty){let e=r;return c(i)&&(e=s),new e(Object.assign({},i,{parentElement:n}))}return new t(Object.assign({},i,{parentElement:n}))}}module.exports=new a;
},{"./HLSVideo":"G8oz","./ThreeSixtyVideo":"xZDV","./ThreeSixtyVideoHls":"JpHs","./HTML5Video":"aLO9","@marcom/useragent-detect":"kIlq"}],"OWpt":[function(require,module,exports) {
"use strict";module.exports=function(t,e,n,r){return t.addEventListener?t.addEventListener(e,n,!!r):t.attachEvent("on"+e,n),t};
},{}],"pvlj":[function(require,module,exports) {
"use strict";var t={window:window,document:document};module.exports=function(e,n){var o;return e="on"+e,n in t||(t[n]=document.createElement(n)),e in(o=t[n])||"setAttribute"in o&&(o.setAttribute(e,"return;"),"function"==typeof o[e])};
},{}],"Avuq":[function(require,module,exports) {
"use strict";module.exports={transitionend:["webkitTransitionEnd","MSTransitionEnd"],animationstart:["webkitAnimationStart","MSAnimationStart"],animationend:["webkitAnimationEnd","MSAnimationEnd"],animationiteration:["webkitAnimationIteration","MSAnimationIteration"],fullscreenchange:["MSFullscreenChange"],fullscreenerror:["MSFullscreenError"]};
},{}],"LkVj":[function(require,module,exports) {
"use strict";module.exports=["transitionend","animationstart","animationend","animationiteration"];
},{}],"pqU1":[function(require,module,exports) {
"use strict";var t=["-webkit-","-moz-","-ms-"],i=["Webkit","Moz","ms"],s=["webkit","moz","ms"],e=function(){this.initialize()},h=e.prototype;h.initialize=function(){this.reduced=!1,this.css=t,this.dom=i,this.evt=s},h.reduce=function(t){this.reduced||(this.reduced=!0,this.css=[this.css[t]],this.dom=[this.dom[t]],this.evt=[this.evt[t]])},module.exports=new e;
},{}],"UdvC":[function(require,module,exports) {
"use strict";var e=require("./utils/eventTypeAvailable"),r=require("./shared/camelCasedEventTypes"),i=require("./shared/windowFallbackEventTypes"),n=require("./shared/prefixHelper"),t={};module.exports=function u(a,o){var s,d,f;if(o=o||"div",a=a.toLowerCase(),o in t||(t[o]={}),a in(d=t[o]))return d[a];if(e(a,o))return d[a]=a;if(a in r)for(f=0;f<r[a].length;f++)if(s=r[a][f],e(s.toLowerCase(),o))return d[a]=s;for(f=0;f<n.evt.length;f++)if(s=n.evt[f]+a,e(s,o))return n.reduce(f),d[a]=s;return"window"!==o&&i.indexOf(a)?d[a]=u(a,"window"):d[a]=!1};
},{"./utils/eventTypeAvailable":"pvlj","./shared/camelCasedEventTypes":"Avuq","./shared/windowFallbackEventTypes":"LkVj","./shared/prefixHelper":"pqU1"}],"Trj3":[function(require,module,exports) {
"use strict";var e=require("@marcom/ac-prefixer/getEventType");module.exports=function(r,t){var a;return a="tagName"in r?r.tagName:r===window?"window":"document",e(t,a)||t};
},{"@marcom/ac-prefixer/getEventType":"UdvC"}],"PtJo":[function(require,module,exports) {
"use strict";var e=require("./utils/addEventListener"),r=require("./shared/getEventType");module.exports=function(t,u,i,n){return u=r(t,u),e(t,u,i,n)};
},{"./utils/addEventListener":"OWpt","./shared/getEventType":"Trj3"}],"ZA93":[function(require,module,exports) {
module.exports={ENTERFULLSCREEN:"enterfullscreen",EXITFULLSCREEN:"exitfullscreen"};
},{}],"TfXr":[function(require,module,exports) {
module.exports={STANDARD:"standard",IOS:"ios"};
},{}],"h1y6":[function(require,module,exports) {
"use strict";var e,n=require("@marcom/ac-dom-events/addEventListener"),t=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,r=require("./../events/types"),i=require("./../consts/modes");function u(){n(document,"webkitbeginfullscreen",c,!0),n(document,"webkitendfullscreen",l,!0)}function c(e){o.trigger(r.ENTERFULLSCREEN,e)}function l(n){e=void 0,o.trigger(r.EXITFULLSCREEN,n)}u();var o=new t;o.fullscreenEnabled=function(e){return!!e.webkitSupportsFullscreen},o.fullscreenElement=function(){return e},o.exitFullscreen=function(e){e&&"function"==typeof e.webkitExitFullscreen&&e.webkitExitFullscreen()},o.requestFullscreen=function(e){"function"==typeof e.webkitEnterFullscreen&&e.webkitEnterFullscreen()},o.mode=i.IOS,module.exports=o;
},{"@marcom/ac-dom-events/addEventListener":"PtJo","@marcom/ac-event-emitter-micro":"PZ1q","./../events/types":"ZA93","./../consts/modes":"TfXr"}],"SUsr":[function(require,module,exports) {
"use strict";var e=require("@marcom/ac-dom-events/addEventListener"),n=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,t=require("./../events/types"),u=require("./../consts/modes"),l=new n;function c(e){l.trigger(t.ENTERFULLSCREEN,e)}function r(e){l.trigger(t.EXITFULLSCREEN,e)}function o(e){l.fullscreenElement()?c(e):r(e)}function i(){e(document,"fullscreenchange",o)}i(),l.fullscreenEnabled=function(e){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)},l.fullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement},l.exitFullscreen=function(e){var n;e&&"function"==typeof e.webkitExitFullscreen?e.webkitExitFullscreen():"function"==typeof document.exitFullscreen?n="exitFullscreen":"function"==typeof document.webkitExitFullscreen?n="webkitExitFullscreen":"function"==typeof document.webkitCancelFullScreen?n="webkitCancelFullScreen":"function"==typeof document.mozCancelFullScreen?n="mozCancelFullScreen":"function"==typeof document.msExitFullscreen&&(n="msExitFullscreen"),"function"==typeof document[n]&&document[n].call(document)},l.requestFullscreen=function(e){var n;"function"==typeof e.requestFullscreen?n="requestFullscreen":"function"==typeof e.webkitRequestFullscreen?n="webkitRequestFullscreen":"function"==typeof e.webkitRequestFullScreen?n="webkitRequestFullScreen":"function"==typeof e.mozRequestFullScreen?n="mozRequestFullScreen":"function"==typeof e.msRequestFullscreen&&(n="msRequestFullscreen"),"function"==typeof e[n]&&e[n].call(e)},l.mode=u.STANDARD,module.exports=l;
},{"@marcom/ac-dom-events/addEventListener":"PtJo","@marcom/ac-event-emitter-micro":"PZ1q","./../events/types":"ZA93","./../consts/modes":"TfXr"}],"XMl9":[function(require,module,exports) {
"use strict";var e=require("./ios"),t=require("./desktop");module.exports={create:function(){var r=t;return"webkitEnterFullscreen"in document.createElement("video")&&!("webkitRequestFullScreen"in document.createElement("div"))&&(r=e),r}};
},{"./ios":"h1y6","./desktop":"SUsr"}],"ezPd":[function(require,module,exports) {
"use strict";var e=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,r=require("./delegate/factory"),n="Error: Element missing. ac-fullscreen requires an element to be specified",t=r.create();function u(){throw new Error(n)}var c={requestFullscreen:function(e){return e||u(),t.requestFullscreen(e)},fullscreenEnabled:function(e){return e||u(),t.fullscreenEnabled(e)},fullscreenElement:function(){return t.fullscreenElement()},exitFullscreen:function(e){return e||u(),t.exitFullscreen(e)},getMode:function(){return t.mode},on:function(){return t.on.apply(t,arguments)},off:function(){return t.off.apply(t,arguments)},once:function(){return t.once.apply(t,arguments)}};module.exports=c;
},{"@marcom/ac-event-emitter-micro":"PZ1q","./delegate/factory":"XMl9"}],"zQGj":[function(require,module,exports) {
"use strict";module.exports=require("./fullscreen");
},{"./fullscreen":"ezPd"}],"hYBi":[function(require,module,exports) {
const t="ac-video-poster",e="ac-video-poster-hide";class i{constructor(t){this.options=t,this._defaultSrc=t.src,this._initialize()}_initialize(){const e=this.options.src;this.el=this.options.el||document.createElement("div"),this._imgElement=document.createElement("img"),this._imgElement.src=e,this._currentSrc=e,this._imgElement.alt="",this._onLoad=this._onLoad.bind(this),this._imgElement.addEventListener("load",this._onLoad),this.el.appendChild(this._imgElement),this.hide(),this.el.classList.add(t)}hide(){this.el.classList.add(e)}show(){this.el.classList.remove(e)}setSrc(t){const e=t||this._defaultSrc;e!==this._currentSrc&&(this._imgElement.style.display="none",this._imgElement.src=e,this._currentSrc=e)}_onLoad(){this._imgElement.style.display=""}getSrc(){return this._imgElement.src}destroy(){this._imgElement.removeEventListener("load",this._onLoad),this._el=null}}module.exports=i;
},{}],"fhr6":[function(require,module,exports) {
const e=require("./PosterFrame"),s={"1x":"/ac/ac-video-posterframe/4.0/images/ac_video_poster_960x540.jpg","2x":"/ac/ac-video-posterframe/4.0/images/ac_video_poster_960x540_2x.jpg"};module.exports=function(r){if(r.src=r.src||(r.is2x?s["2x"]:s["1x"]),r.useNativePoster){r.video.setPoster(r.src);let e,s=!1;return{show(){s=!0,e&&(r.video.setPoster(e),e=null)},hide(){s=!1},setSrc(o){s?o?r.video.setPoster(o):r.video.setPoster(r.src):e=o}}}return new e(r)};
},{"./PosterFrame":"hYBi"}],"oLK0":[function(require,module,exports) {
"use strict";module.exports={"bg-BG":"bg-BG.json","cs-CZ":"cs-CZ.json","el-GR":"el-GR.json","de-AT":"de-AT.json","de-CH":"de-CH.json","de-DE":"de-DE.json","de-LI":"de-LI.json","da-DK":"da-DK.json",en:"en.json","en-AP":"en-AP.json","en-AU":"en-AU.json","en-AZ":"en-AZ.json","en-BH":"en-BH.json","en-BY":"en-BY.json","en-CA":"en-CA.json","en-EG":"en-EG.json","en-GB":"en-GB.json","en-GE":"en-GE.json","en-HK":"en-HK.json","en-IE":"en-IE.json","en-IN":"en-IN.json","en-JO":"en-JO.json","en-KG":"en-KG.json","en-KR":"en-KR.json","en-KW":"en-KW.json","en-KZ":"en-KZ.json","en-NZ":"en-NZ.json","en-OM":"en-OM.json","en-QA":"en-QA.json","en-SA":"en-SA.json","en-SG":"en-SG.json","en-TJ":"en-TJ.json","en-TM":"en-TM.json","en-US":"en-US.json","en-UZ":"en-UZ.json","en-ZA":"en-ZA.json",es:"es.json","es-LA":"es-LA.json","es-MX":"es-MX.json","es-ES":"es-ES.json","et-EE":"et-EE.json","fi-FI":"fi-FI.json",fr:"fr.json","fr-BE":"fr-BE.json","fr-CA":"fr-CA.json","fr-CH":"fr-CH.json","fr-FR":"fr-FR.json","hr-HR":"hr-HR.json","hu-HU":"hu-HU.json","it-IT":"it-IT.json",ja:"ja.json","ja-JP":"ja-JP.json","ko-KR":"ko-KR.json","lt-LT":"lt-LT.json","lv-LV":"lv-LV.json","nl-BE":"nl-BE.json","nl-NL":"nl-NL.json","no-NO":"no-NO.json","pl-PL":"pl-PL.json",pt:"pt.json","pt-BR":"pt-BR.json","pt-PT":"pt-PT.json","ro-RO":"ro-RO.json","ru-RU":"ru-RU.json","sk-SK":"sk-SK.json","sv-SE":"sv-SE.json","tr-TR":"tr-TR.json","uk-UA":"uk-UA.json",zh:"zh.json","zh-CN":"zh-CN.json","zh-HK":"zh-HK.json","zh-TW":"zh-TW.json"};
},{}],"rUe1":[function(require,module,exports) {
"use strict";module.exports={audiotrackscontrol:"Audio",playpause:"Play/Pause",play:"Play",pause:"Pause",togglemutevolume:"Toggle Mute Volume",fullscreen:"Full Screen",exitfullscreen:"Exit Full Screen",airplay:"AirPlay",captionscontrol:"Closed Captions",captionsturnedon:"Closed Captions On",captionsturnedoff:"Closed Captions Off",subtitlescontrol:"Subtitles",subtitlesturnedon:"Subtitles On",subtitlesturnedoff:"Subtitles Off",share:"Share",elapsed:"elapsed",remaining:"remaining",currenttimetext:"{minutes} minutes and {seconds} seconds",pictureinpicture:"Picture-in-Picture",exitpictureinpicture:"Exit Picture-in-Picture",closesharing:"Close Sharing",facebookshare:"Share to Facebook",twittershare:"Share to Twitter",copylink:"Copy Link",copyembed:"Copy Embed Code",copyarea:"Copy Link Text Area",selectlink:"Select Link Text",selectembed:"Select Embed Code",close:"Close",dismisscopy:"Dismiss Copy",replay:"Replay",live:"Live",livestream:"Live Streaming",newwindow:"Opens in New Window",threesixtyicon:"Return 360 Point of View to Origin",threesixtyleft:"Move 360 Point of View Left",threesixtyright:"Move 360 Point of View Right",threesixtyup:"Move 360 Point of View Up",threesixtydown:"Move 360 Point of View Down",error:"The video could not be played.",jumptochapter:"Jump to chapter",chapter:"{chaptertitle} Chapter {chaptertime}",minutesandseconds:"{minutes} minutes and {seconds} seconds",loading:"The video is loading",captionsoff:"Off"};
},{}],"w6n6":[function(require,module,exports) {
"use strict";const t=require("./Translations"),e=require("./DefaultLabelStrings"),a=window.document.documentElement;let n;try{n=window.top.document.documentElement}catch(b){n=a}const r=require("@marcom/ac-ajax-xhr"),c="/ac/ac-video/latest/json/localization/",l="en-US",o={},s=function(t){let e,r;try{e=t||n.getAttribute("lang")}catch(c){e=a.getAttribute("lang")}if(e)switch(e.toLowerCase()){case"es-418":r="es-LA";break;case"pt":r="pt-BR";break;default:r=e}else r="en-US";return r},i=function(t){return t=s(t),void 0!==o[t]},u=function(a){const n=s((a=a||{}).lang);if(i(n))return a.callback?(a.callback(o[n]),null):o[n];if(!a.callback)throw new Error("To use Localization.getTranslation you must either pass a callback or ensure the translation is ready via Localization.translationReady");const l=a.basePath||c,u=t[n]?l+t[n]:l+t["en-US"];let b=e,g=()=>{o[n]=b,a.callback(b)};return a.forceEnglishLabels?(g(),o[n]):(r.get(u,{success:function(t){try{b=Object.assign(b,JSON.parse(t)),o[n]=b,a.callback(b)}catch(e){g()}},error:g}),null)};module.exports={getLanguage:s,getTranslation:u,translationReady:i};
},{"./Translations":"oLK0","./DefaultLabelStrings":"rUe1","@marcom/ac-ajax-xhr":"JzIj"}],"QL3P":[function(require,module,exports) {
class t{constructor(t){this.el=document.createElement("div"),this.el.classList.add("error-state-wrapper")}setText(t){this._errorStr=t,this.render(),this._container=this.el.firstElementChild}focus(){this._container&&this._container.firstElementChild.focus()}render(){this.el.innerHTML='<div class="error-state-container" >\n\t\t\t<div tabindex="-1" role="text" class="error-state-message">'.concat(this._errorStr,"</div>\n\t\t</div>\n\t\t")}}module.exports=t;
},{}],"Rjgo":[function(require,module,exports) {
"use strict";var i;function r(i){i=i||{},this._reset(),this._willRun=!1,this._totalSubscribeCount=-1,this._requestAnimationFrame=window.requestAnimationFrame,this._cancelAnimationFrame=window.cancelAnimationFrame,this._boundOnAnimationFrame=this._onAnimationFrame.bind(this),this._boundOnExternalAnimationFrame=this._onExternalAnimationFrame.bind(this)}require("@marcom/ac-polyfills/performance/now"),(i=r.prototype).subscribe=function(i,r){return this._totalSubscribeCount++,this._nextFrameSubscribers[i.id]||(r?this._nextFrameSubscribersOrder.unshift(i.id):this._nextFrameSubscribersOrder.push(i.id),this._nextFrameSubscribers[i.id]=i,this._nextFrameSubscriberArrayLength++,this._nextFrameSubscriberCount++,this._run()),this._totalSubscribeCount},i.unsubscribe=function(i){return!!this._nextFrameSubscribers[i.id]&&(this._nextFrameSubscribers[i.id]=null,this._nextFrameSubscriberCount--,0===this._nextFrameSubscriberCount&&this._cancel(),!0)},i.trigger=function(i,r){var t;for(t=0;t<this._subscriberArrayLength;t++)null!==this._subscribers[this._subscribersOrder[t]]&&!1===this._subscribers[this._subscribersOrder[t]]._didDestroy&&this._subscribers[this._subscribersOrder[t]].trigger(i,r)},i.destroy=function(){var i=this._cancel();return this._subscribers=null,this._subscribersOrder=null,this._nextFrameSubscribers=null,this._nextFrameSubscribersOrder=null,this._rafData=null,this._boundOnAnimationFrame=null,this._onExternalAnimationFrame=null,i},i.useExternalAnimationFrame=function(i){if("boolean"==typeof i){var r=this._isUsingExternalAnimationFrame;return i&&this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),!this._willRun||i||this._animationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),this._isUsingExternalAnimationFrame=i,i?this._boundOnExternalAnimationFrame:r||!1}},i._run=function(){if(!this._willRun)return this._willRun=!0,0===this.lastFrameTime&&(this.lastFrameTime=performance.now()),this._animationFrameActive=!0,this._isUsingExternalAnimationFrame||(this._animationFrame=this._requestAnimationFrame.call(window,this._boundOnAnimationFrame)),!0},i._cancel=function(){var i=!1;return this._animationFrameActive&&(this._animationFrame&&(this._cancelAnimationFrame.call(window,this._animationFrame),this._animationFrame=null),this._animationFrameActive=!1,this._willRun=!1,i=!0),this._isRunning||this._reset(),i},i._onSubscribersAnimationFrameStart=function(i){var r;for(r=0;r<this._subscriberArrayLength;r++)null!==this._subscribers[this._subscribersOrder[r]]&&!1===this._subscribers[this._subscribersOrder[r]]._didDestroy&&this._subscribers[this._subscribersOrder[r]]._onAnimationFrameStart(i)},i._onSubscribersAnimationFrameEnd=function(i){var r;for(r=0;r<this._subscriberArrayLength;r++)null!==this._subscribers[this._subscribersOrder[r]]&&!1===this._subscribers[this._subscribersOrder[r]]._didDestroy&&this._subscribers[this._subscribersOrder[r]]._onAnimationFrameEnd(i)},i._onAnimationFrame=function(i){this._subscribers=this._nextFrameSubscribers,this._subscribersOrder=this._nextFrameSubscribersOrder,this._subscriberArrayLength=this._nextFrameSubscriberArrayLength,this._subscriberCount=this._nextFrameSubscriberCount,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._isRunning=!0,this._willRun=!1,this._didRequestNextRAF=!1,this._rafData.delta=i-this.lastFrameTime,this.lastFrameTime=i,this._rafData.fps=0,this._rafData.delta>=1e3&&(this._rafData.delta=0),0!==this._rafData.delta&&(this._rafData.fps=1e3/this._rafData.delta),this._rafData.time=i,this._rafData.naturalFps=this._rafData.fps,this._rafData.timeNow=Date.now(),this._onSubscribersAnimationFrameStart(this._rafData),this.trigger("update",this._rafData),this.trigger("external",this._rafData),this.trigger("draw",this._rafData),this._onSubscribersAnimationFrameEnd(this._rafData),this._willRun||this._reset()},i._onExternalAnimationFrame=function(i){this._isUsingExternalAnimationFrame&&this._onAnimationFrame(i)},i._reset=function(){this._rafData={time:0,delta:0,fps:0,naturalFps:0,timeNow:0},this._subscribers={},this._subscribersOrder=[],this._subscriberArrayLength=0,this._subscriberCount=0,this._nextFrameSubscribers={},this._nextFrameSubscribersOrder=[],this._nextFrameSubscriberArrayLength=0,this._nextFrameSubscriberCount=0,this._didEmitFrameData=!1,this._animationFrame=null,this._animationFrameActive=!1,this._isRunning=!1,this._shouldReset=!1,this.lastFrameTime=0},module.exports=r;
},{"@marcom/ac-polyfills/performance/now":"wGeK"}],"JShQ":[function(require,module,exports) {
"use strict";var e=require("@marcom/ac-shared-instance").SharedInstance,r="ac-raf-executor:sharedRAFExecutorInstance",a="2.0.1",c=require("./RAFExecutor");module.exports=e.share(r,a,c);
},{"@marcom/ac-shared-instance":"sLzD","./RAFExecutor":"Rjgo"}],"j9J3":[function(require,module,exports) {
"use strict";var r=require("@marcom/ac-shared-instance").SharedInstance,e="ac-raf-emitter-id-generator:sharedRAFEmitterIDGeneratorInstance",t="1.0.3",n=function(){this._currentID=0};n.prototype.getNewID=function(){return this._currentID++,"raf:"+this._currentID},module.exports=r.share(e,t,n);
},{"@marcom/ac-shared-instance":"sLzD"}],"pQEI":[function(require,module,exports) {
"use strict";var t,i=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,e=require("@marcom/ac-raf-executor/sharedRAFExecutorInstance"),r=require("@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance");function n(t){t=t||{},i.call(this),this.id=r.getNewID(),this.executor=t.executor||e,this._reset(),this._willRun=!1,this._didDestroy=!1}(t=n.prototype=Object.create(i.prototype)).run=function(){return this._willRun||(this._willRun=!0),this._subscribe()},t.cancel=function(){this._unsubscribe(),this._willRun&&(this._willRun=!1),this._reset()},t.destroy=function(){var t=this.willRun();return this.cancel(),this.executor=null,i.prototype.destroy.call(this),this._didDestroy=!0,t},t.willRun=function(){return this._willRun},t.isRunning=function(){return this._isRunning},t._subscribe=function(){return this.executor.subscribe(this)},t._unsubscribe=function(){return this.executor.unsubscribe(this)},t._onAnimationFrameStart=function(t){this._isRunning=!0,this._willRun=!1,this._didEmitFrameData||(this._didEmitFrameData=!0,this.trigger("start",t))},t._onAnimationFrameEnd=function(t){this._willRun||(this.trigger("stop",t),this._reset())},t._reset=function(){this._didEmitFrameData=!1,this._isRunning=!1},module.exports=n;
},{"@marcom/ac-event-emitter-micro":"PZ1q","@marcom/ac-raf-executor/sharedRAFExecutorInstance":"JShQ","@marcom/ac-raf-emitter-id-generator/sharedRAFEmitterIDGeneratorInstance":"j9J3"}],"hWPb":[function(require,module,exports) {
"use strict";var t=require("./RAFEmitter"),e=function(e){t.call(this,e)},r=e.prototype=Object.create(t.prototype);r._subscribe=function(){return this.executor.subscribe(this,!0)},module.exports=e;
},{"./RAFEmitter":"pQEI"}],"KuGk":[function(require,module,exports) {
"use strict";var t=require("./SingleCallRAFEmitter"),a=function(a){this.rafEmitter=new t,this.rafEmitter.on(a,this._onRAFExecuted.bind(this)),this.requestAnimationFrame=this.requestAnimationFrame.bind(this),this.cancelAnimationFrame=this.cancelAnimationFrame.bind(this),this._frameCallbacks=[],this._nextFrameCallbacks=[],this._currentFrameID=-1,this._cancelFrameIdx=-1,this._frameCallbackLength=0,this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0},e=a.prototype;e.requestAnimationFrame=function(t){return this._currentFrameID=this.rafEmitter.run(),this._nextFrameCallbacks.push(this._currentFrameID,t),this._nextFrameCallbacksLength+=2,this._currentFrameID},e.cancelAnimationFrame=function(t){this._cancelFrameIdx=this._nextFrameCallbacks.indexOf(t),-1!==this._cancelFrameIdx&&(this._nextFrameCallbacks.splice(this._cancelFrameIdx,2),this._nextFrameCallbacksLength-=2,0===this._nextFrameCallbacksLength&&this.rafEmitter.cancel())},e._onRAFExecuted=function(t){for(this._frameCallbacks=this._nextFrameCallbacks,this._frameCallbackLength=this._nextFrameCallbacksLength,this._nextFrameCallbacks=[],this._nextFrameCallbacksLength=0,this._frameCallbackIteration=0;this._frameCallbackIteration<this._frameCallbackLength;this._frameCallbackIteration+=2)this._frameCallbacks[this._frameCallbackIteration+1](t.time,t)},module.exports=a;
},{"./SingleCallRAFEmitter":"hWPb"}],"Men3":[function(require,module,exports) {
"use strict";var e=require("./RAFInterface"),t=function(){this.events={}},n=t.prototype;n.requestAnimationFrame=function(t){return this.events[t]||(this.events[t]=new e(t)),this.events[t].requestAnimationFrame},n.cancelAnimationFrame=function(t){return this.events[t]||(this.events[t]=new e(t)),this.events[t].cancelAnimationFrame},module.exports=new t;
},{"./RAFInterface":"KuGk"}],"uhyl":[function(require,module,exports) {
"use strict";var e=require("./RAFInterfaceController");module.exports=e.requestAnimationFrame("update");
},{"./RAFInterfaceController":"Men3"}],"vpZE":[function(require,module,exports) {
"use strict";var e=require("./RAFInterfaceController");module.exports=e.cancelAnimationFrame("update");
},{"./RAFInterfaceController":"Men3"}],"dDhP":[function(require,module,exports) {
"use strict";var e=require("./helpers/globals");module.exports=function(){var i=e.getWindow();return"devicePixelRatio"in i&&i.devicePixelRatio>=1.5};
},{"./helpers/globals":"P7z6"}],"is4D":[function(require,module,exports) {
"use strict";var e=require("@marcom/useragent-detect").os,r=require("./touchAvailable").original,o=require("./helpers/globals"),i=require("@marcom/ac-function/once");function t(){var i=o.getWindow();return!r()&&!i.orientation||e.windows}module.exports=i(t),module.exports.original=t;
},{"@marcom/useragent-detect":"kIlq","./touchAvailable":"gygx","./helpers/globals":"P7z6","@marcom/ac-function/once":"t68A"}],"wEyK":[function(require,module,exports) {
"use strict";var e=require("./isDesktop").original,r=require("./helpers/globals"),i=require("@marcom/ac-function/once"),o=600;function n(){var i=r.getWindow(),n=i.screen.width;return i.orientation&&i.screen.height<n&&(n=i.screen.height),!e()&&n>=o}module.exports=i(n),module.exports.original=n;
},{"./isDesktop":"is4D","./helpers/globals":"P7z6","@marcom/ac-function/once":"t68A"}],"XTCN":[function(require,module,exports) {
"use strict";var r=require("./isDesktop").original,e=require("./isTablet").original,i=require("@marcom/ac-function/once");function o(){return!r()&&!e()}module.exports=i(o),module.exports.original=o;
},{"./isDesktop":"is4D","./isTablet":"wEyK","@marcom/ac-function/once":"t68A"}],"RetI":[function(require,module,exports) {
"use strict";module.exports=[{name:"small",minWidth:0,maxWidth:569},{name:"medium",minWidth:570,maxWidth:779},{name:"large",minWidth:780,maxWidth:1/0}];
},{}],"SH1v":[function(require,module,exports) {
"use strict";module.exports=["loadstart","progress","suspend","abort","error","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","ended","ratechange","durationchange","volumechange","addtrack","change","removetrack"];
},{}],"mJSt":[function(require,module,exports) {
"use strict";module.exports=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","waiting","canplay","canplaythrough"];
},{}],"PxqU":[function(require,module,exports) {
"use strict";var e=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,t=function(t){e.call(this),this.el=t.el||document.body,this.breakpoints=t.breakpoints.sort(function(e,t){return e.minWidth-t.minWidth}),this._player=t.player,this._breakPointsLength=this.breakpoints.length,this._addClasses=t.addClass,this._addEventListeners(),this._onResize()},n=e.prototype,i=t.prototype=Object.create(n);i.constructor=t,i._addEventListeners=function(){var e=this;this._boundOnResize=function(){e._onResize.apply(e,arguments)},window.addEventListener("resize",this._boundOnResize),window.addEventListener("orientationchange",this._boundOnResize),window.addEventListener("DOMContentLoaded",this._boundOnResize)},i._removeEventListeners=function(){window.removeEventListener("resize",this._boundOnResize),window.removeEventListener("orientationchange",this._boundOnResize),window.addEventListener("DOMContentLoaded",this._boundOnResize)},i._onResize=function(e){var n=this.el.clientWidth,i=this._currentBreakpoint;if(!1!==e&&this._player.refreshSize(),!i||!t.widthInBreakpoint(n,i)){var r=t.getBreakpointFromWidth(n,this.breakpoints,i,this._breakPointsLength);this._addClasses&&(this._currentBreakpoint&&this.el.classList.remove(i.name),this.el.classList.add(r.name)),this._currentBreakpoint=r,this.trigger("breakpointchange",r)}},i.getCurrentBreakpoint=function(){return this._currentBreakpoint},i.refresh=function(){this._onResize(!1)},i.destroy=function(){this._removeEventListeners(),n.destroy.call(this)},t.getBreakpointFromElement=function(e,n){return t.getBreakpointFromWidth(e.clientWidth,n)},t.getBreakpointFromWidth=function(e,t,n,i){for(var r=0,s=i||t.length;r<s;r++){var o=t[r];if(o!==n&&(e>=o.minWidth&&e<=o.maxWidth))return o}return null},t.widthInBreakpoint=function(e,t){return e>=t.minWidth&&e<=t.maxWidth},module.exports=t;
},{"@marcom/ac-event-emitter-micro":"PZ1q"}],"usdc":[function(require,module,exports) {
"use strict";module.exports=function(e,t,n,r){return e.removeEventListener?e.removeEventListener(t,n,!!r):e.detachEvent("on"+t,n),e};
},{}],"mnYI":[function(require,module,exports) {
"use strict";var e=function(){};module.exports=function(t){if(arguments.length>1)throw new Error("Second argument not supported");if(null===t||"object"!=typeof t)throw new TypeError("Object prototype may only be an Object.");return"function"==typeof Object.create?Object.create(t):(e.prototype=t,new e)};
},{}],"CLnC":[function(require,module,exports) {
"use strict";var t=require("./keyCodeMap.js"),i=["keyLocation","keyIdentifier"],e="code",n="keyCode";function o(t){var e;for(e in this.originalEvent=t,t)-1===i.indexOf(e)&&"function"!=typeof t[e]&&(this[e]=t[e]);this[n]||(this[n]=this._getKeyCode()),this.location=void 0!==this.originalEvent.location?this.originalEvent.location:this.originalEvent.keyLocation}o.prototype={preventDefault:function(){if("function"==typeof this.originalEvent.preventDefault)return this.originalEvent.preventDefault();this.originalEvent.returnValue=!1},stopPropagation:function(){return this.originalEvent.stopPropagation()},_getKeyCode:function(){return t[this[e]]||-1}},module.exports=o;
},{"./keyCodeMap.js":"D1dK"}],"mKrK":[function(require,module,exports) {
"use strict";var t=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,e=require("@marcom/ac-dom-events/utils/addEventListener"),n=require("@marcom/ac-dom-events/utils/removeEventListener"),o=require("@marcom/ac-object/create"),i=require("./internal/KeyEvent"),r="keydown",s="keyup";function c(n){this._keysDown={},this._DOMKeyDown=this._DOMKeyDown.bind(this),this._DOMKeyUp=this._DOMKeyUp.bind(this),this._context=n||document,e(this._context,r,this._DOMKeyDown,!0),e(this._context,s,this._DOMKeyUp,!0),t.call(this)}var h=c.prototype=o(t.prototype);h.onDown=function(t,e){return this.on(r+":"+t,e)},h.onceDown=function(t,e){return this.once(r+":"+t,e)},h.offDown=function(t,e){return this.off(r+":"+t,e)},h.onUp=function(t,e){return this.on(s+":"+t,e)},h.onceUp=function(t,e){return this.once(s+":"+t,e)},h.offUp=function(t,e){return this.off(s+":"+t,e)},h.isDown=function(t){return t+="",this._keysDown[t]||!1},h.isUp=function(t){return!this.isDown(t)},h.destroy=function(){return n(this._context,r,this._DOMKeyDown,!0),n(this._context,s,this._DOMKeyUp,!0),this._keysDown=null,this._context=null,t.prototype.destroy.call(this),this},h._DOMKeyDown=function(t){var e=this._normalizeKeyboardEvent(t),n=e.keyCode+="";this._trackKeyDown(n),this.trigger(r+":"+n,e)},h._DOMKeyUp=function(t){var e=this._normalizeKeyboardEvent(t),n=e.keyCode+="";this._trackKeyUp(n),this.trigger(s+":"+n,e)},h._normalizeKeyboardEvent=function(t){return new i(t)},h._trackKeyUp=function(t){this._keysDown[t]&&(this._keysDown[t]=!1)},h._trackKeyDown=function(t){this._keysDown[t]||(this._keysDown[t]=!0)},module.exports=c;
},{"@marcom/ac-event-emitter-micro":"PZ1q","@marcom/ac-dom-events/utils/addEventListener":"OWpt","@marcom/ac-dom-events/utils/removeEventListener":"usdc","@marcom/ac-object/create":"mnYI","./internal/KeyEvent":"CLnC"}],"dDjU":[function(require,module,exports) {
"use strict";const t=require("@marcom/ac-keyboard/Keyboard"),o=require("@marcom/ac-event-emitter-micro").EventEmitterMicro,n=32,i=37,e=38,r=39,a=40;var s=function(n){o.call(this),this._player=n.player,this._target=n.keyboardTarget||this._player.el,this._keyboard=new t(this._target),this._bindMethods(),this._addEventListeners()},h=o.prototype,_=s.prototype=Object.create(h);_._bindMethods=function(){this._onLeftArrowDown=this._onLeftArrowDown.bind(this),this._onRightArrowDown=this._onRightArrowDown.bind(this),this._onUpArrowDown=this._onUpArrowDown.bind(this),this._onDownArrowDown=this._onDownArrowDown.bind(this),this._onSpaceBarUp=this._onSpaceBarUp.bind(this),this._onSpaceBarDown=this._onSpaceBarDown.bind(this),this._onKeyboardInteraction=this._onKeyboardInteraction.bind(this),this._onDurationChange=this._onDurationChange.bind(this),this._boundKeyboardInteraction={},[n,i,r,e,a].forEach(function(t){this._boundKeyboardInteraction[t]=this._onKeyboardInteraction.bind(this,t)}.bind(this))},_._addEventListeners=function(){[n,i,r,e,a].forEach(function(t){this._keyboard.onDown(t,this._boundKeyboardInteraction[t])}.bind(this)),this._keyboard.onDown(n,this._onSpaceBarDown),this._keyboard.onDown(i,this._onLeftArrowDown),this._keyboard.onDown(r,this._onRightArrowDown),this._keyboard.onDown(e,this._onUpArrowDown),this._keyboard.onDown(a,this._onDownArrowDown),this._player.on("durationchange",this._onDurationChange)},_._removeEventListeners=function(){[n,i,r,e,a].forEach(function(t){this._keyboard.offDown(t,this._boundKeyboardInteraction[t])}.bind(this)),this._boundKeyboardInteraction=null,this._keyboard.offDown(n,this._onSpaceBarDown),this._keyboard.offUp(n,this._onSpaceBarUp),this._keyboard.offDown(i,this._onLeftArrowDown),this._keyboard.offDown(r,this._onRightArrowDown),this._keyboard.offDown(e,this._onUpArrowDownDown),this._keyboard.offDown(a,this._onDownArrowDown),this._player.off("durationchange",this._onDurationChange)},_._onKeyboardInteraction=function(){this._triggerKeyboardInteraction()},_._triggerKeyboardInteraction=function(){this.trigger("keyboardinteraction")},_._onDurationChange=function(){var t=this._player.getDuration();this._interval=t>=60?10:t>=20?5:1},_._onLeftArrowDown=function(t){if(!this._player.isLive()){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();var o=this._player.getCurrentTime();isNaN(o)||this._player.seek(Math.max(o-this._interval,0))}},_._onRightArrowDown=function(t){if(!this._player.isLive()){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();var o=this._player.getCurrentTime();isNaN(o)||this._player.seek(Math.min(o+this._interval,this._player.getDuration()))}},_._onUpArrowDown=function(t){if(!t.target.hasAttribute("aria-checked")){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();var o=this._player.getMuted()?0:this._player.getVolume(),n=Math.min(1,o+.1);this._player.setVolume(n),this._player.setMuted(!1)}},_._onDownArrowDown=function(t){if(!t.target.hasAttribute("aria-checked")){t.originalEvent.preventDefault(),t.originalEvent.stopPropagation();var o=this._player.getMuted()?0:this._player.getVolume(),n=Math.max(0,o-.1);this._player.setVolume(n),this._player.setMuted(0===Math.round(10*n))}},_._onSpaceBarDown=function(t){"BUTTON"!==t.target.tagName&&"button"!==t.target.getAttribute("role")&&(this._keyboard.offDown(n,this._onSpaceBarDown),this._keyboard.onUp(n,this._onSpaceBarUp))},_._onSpaceBarUp=function(){this._keyboard.offUp(n,this._onSpaceBarUp),this._player.getPaused()?this._player.play():this._player.pause(),this._keyboard.onDown(n,this._onSpaceBarDown)},_.destroy=function(){this._removeEventListeners(),this._keyboard.destroy(),h.destroy.call(this)},module.exports=s;
},{"@marcom/ac-keyboard/Keyboard":"mKrK","@marcom/ac-event-emitter-micro":"PZ1q"}],"pa2D":[function(require,module,exports) {
"use strict";const r=require("./KeyboardControl"),o=["controls-toggle-mute-volume-button","controls-volume-level-indicator"],t="controls-progress-indicator",n=37,s=38,i=39,e=40;class a extends r{constructor(r){super(r);var o=this._player.get360();this._arrowControls=!o||o.arrowControls}_bindMethods(){super._bindMethods(),this._onLeftArrowUp=this._onLeftArrowUp.bind(this),this._onRightArrowUp=this._onRightArrowUp.bind(this),this._onDownArrowUp=this._onDownArrowUp.bind(this),this._onUpArrowUp=this._onUpArrowUp.bind(this)}_addEventListeners(){super._addEventListeners(),this._keyboard.onUp(n,this._onLeftArrowUp),this._keyboard.onUp(i,this._onRightArrowUp),this._keyboard.onUp(s,this._onUpArrowUp),this._keyboard.onUp(e,this._onDownArrowUp)}_removeEventListeners(){super._removeEventListeners(),this._keyboard.offUp(n,this._onLeftArrowUp),this._keyboard.offUp(i,this._onRightArrowUp),this._keyboard.offUp(s,this._onUpArrowUp),this._keyboard.offUp(e,this._onDownArrowUp)}_onLeftArrowDown(r){if(r.target.classList.contains(t))return this._triggerKeyboardInteraction(),void super._onLeftArrowDown(r);this._arrowControls.leftArrowDown(r)}_onRightArrowDown(r){if(r.target.classList.contains(t))return this._triggerKeyboardInteraction(),void super._onRightArrowDown(r);this._arrowControls.rightArrowDown(r)}_onUpArrowDown(r){if(r.target.classList.contains(o[0])||r.target.classList.contains(o[1]))return this._triggerKeyboardInteraction(),void super._onUpArrowDown(r);r.originalEvent.preventDefault(),this._arrowControls.upArrowDown(r)}_onDownArrowDown(r){if(r.target.classList.contains(o[0])||r.target.classList.contains(o[1]))return this._triggerKeyboardInteraction(),void super._onDownArrowDown(r);r.originalEvent.preventDefault(),this._arrowControls.downArrowDown(r)}_onLeftArrowUp(r){r.target.classList.contains(t)?this._triggerKeyboardInteraction():(r.originalEvent.preventDefault(),this._arrowControls.leftArrowUp(r))}_onRightArrowUp(r){r.target.classList.contains(t)?this._triggerKeyboardInteraction():(r.originalEvent.preventDefault(),this._arrowControls.rightArrowUp(r))}_onUpArrowUp(r){r.target.classList.contains(t)?this._triggerKeyboardInteraction():this._arrowControls.upArrowUp(r)}_onDownArrowUp(r){r.target.classList.contains(t)?this._triggerKeyboardInteraction():this._arrowControls.downArrowUp(r)}_onKeyboardInteraction(r){}destroy(){super.destroy()}}module.exports=a;
},{"./KeyboardControl":"dDjU"}],"iIpQ":[function(require,module,exports) {
"use strict";var e,r;module.exports=function(t){return t.threesixty?(e||(e=require("./ThreeSixtyKeyboardControl")),new e(t)):(r||(r=require("./KeyboardControl")),new r(t))};
},{"./ThreeSixtyKeyboardControl":"pa2D","./KeyboardControl":"dDjU"}],"wvTA":[function(require,module,exports) {
class t{constructor(t){this._player=t.player,this.el=this._player.el,this._showControls=t.showControls,this._hideControls=t.hideControls,this._raiseControls=t.raiseControls,this._lowerControls=t.lowerControls,this._sendMouseDown=t.sendMouseDown,this._controls=this._player.controls,this._controlsVisible=t.controlsVisible,this._controlsTimeoutDuration=t.controlsTimeoutDuration,this._keyboardControl=t.keyboardControl,this._lastMouseCoords={},this._elementEmitter=t.elementEmitter,this._bindMethods(),this._addEventListeners()}_bindMethods(){this._onUserInteraction=this._onUserInteraction.bind(this),this._onFullscreenChange=this._onFullscreenChange.bind(this),this._onFullscreenWillExit=this._onFullscreenWillExit.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onClick=this._onClick.bind(this),this._onFocusIn=this._onFocusIn.bind(this),this._onFocusOut=this._onFocusOut.bind(this),this._onUserInteractionTimeout=this._onUserInteractionTimeout.bind(this)}_addEventListeners(){this._controls.el.addEventListener("mousemove",this._onUserInteraction,!0),this._controls.el.addEventListener("click",this._onClick,!0),this._player.on("fullscreen:change",this._onFullscreenChange),this._player.on("fullscreen:willexit",this._onFullscreenWillExit),"onmouseleave"in this.el?this._controls.el.addEventListener("mouseleave",this._onMouseLeave):this._controls.el.addEventListener("mouseout",this._onMouseOut,!0),this._keyboardControl&&this._keyboardControl.on("keyboardinteraction",this._onUserInteraction),this._elementEmitter.on("focusin",this._onFocusIn),this._elementEmitter.on("focusout",this._onFocusOut)}_removeEventListeners(){this._controls.el.removeEventListener("mousemove",this._onUserInteraction,!0),this._controls.el.removeEventListener("click",this._onClick,!0),this._player.off("fullscreen:change",this._onFullscreenChange),this._player.off("fullscreen:willexit",this._onFullscreenWillExit),"onmouseleave"in this.el?this._controls.el.removeEventListener("mouseleave",this._onMouseLeave):this._controls.el.removeEventListener("mouseout",this._onMouseOut,!0),this._keyboardControl&&this._keyboardControl.off("keyboardinteraction",this._onUserInteraction),this._elementEmitter.off("focusin",this._onFocusIn),this._elementEmitter.off("focusout",this._onFocusOut)}_shouldIgnoreUserInteraction(t){return!!(t&&"focusin"!==t.type&&t.target&&this._isActiveArea(t.target))}_onUserInteraction(t,e){!t||"click"!==t.type&&"focusin"!==t.type||this._player.isCaptionsSelectorShowing()&&!t.target.classList.contains("controls-text-tracks-toggle-button")&&"radio"!==t.target.getAttribute("role")&&"radiogroup"!==t.target.getAttribute("role")&&this._player.hideCaptionsSelector(),!this._player.getCurrentSrc()||this._preventUserInteraction||!e&&t&&"mousemove"===t.type&&this._lastMouseCoords.x===t.screenX&&this._lastMouseCoords.y===t.screenY||(t&&t.pageX&&(this._lastMouseCoords={x:t.screenX,y:t.screenY}),this._showControls(),this._raiseControls(),clearTimeout(this._userInteractionTimeout),this._shouldIgnoreUserInteraction(t)||(this._userInteractionTimeout=window.setTimeout(this._onUserInteractionTimeout,this._controlsTimeoutDuration)))}_onUserInteractionTimeout(){this._hideControls()}_onMouseLeave(t){window.clearTimeout(this._userInteractionTimeout),this._hideControls(),this._lowerControls(),this._lastMouseCoords={}}_onMouseOut(t){this._controls.el.contains(t.target)||t.target===this._controls.el||this._onMouseLeave()}_isActiveArea(t){for(;t!==this.el;){if(t.hasAttribute("data-acv-active-area"))return!0;t=t.parentNode}return!1}_onClick(t){this._hasFocus=!1,this._onUserInteraction(t)}_onFullscreenWillExit(){this.controls&&(this.controls.el.display="none")}_onFullscreenChange(){this.controls&&(this.controls.el.display=""),this._hideControls(),this._lowerControls(),this._preventUserInteraction=!0,this._fullscreenChangeTimeout=setTimeout(()=>{this._preventUserInteraction=!1,this._player.refreshSize()},750),this._player.refreshSize()}_onFocusIn(t){clearTimeout(this._focusOutTimer),this._focusOutTimer=null,this._hasFocus=!0,this._onUserInteraction(t)}_onFocusOut(t){this._focusOutTimer=setTimeout(()=>{this._hasFocus&&!this.el.contains(document.activeElement)&&(this._hasFocus=!1,this._hideControls(),this._lowerControls())},100)}destroy(){clearTimeout(this._focusOutTimer),clearTimeout(this._fullscreenChangeTimeout),clearTimeout(this._userInteractionTimeout),this._removeEventListeners()}}module.exports=t;
},{}],"dNoe":[function(require,module,exports) {
const e=require("./DefaultControlsInteraction"),s=30,t=500,i=3e3;class o extends e{constructor(e){super(e),this._showCompass=e.showCompass,this._hideCompass=e.hideCompass,this._threesixtyElementsTimeoutDuration=e.threesixtyElementsTimeoutDuration||i,this._dragEndThreshold=t,this._mouseDownPosition=null}_bindMethods(){super._bindMethods(),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onDragging=this._onDragging.bind(this),this._onClick=this._onClick.bind(this)}_addEventListeners(){super._addEventListeners(),this._controls.el.addEventListener("mousedown",this._onMouseDown),this._controls.el.addEventListener("click",this._onClick)}_removeEventListeners(){super._removeEventListeners(),this._controls.el.removeEventListener("mousedown",this._onMouseDown)}_onUserInteraction(e){this._userWasRecentlyDragging||e&&"mousemove"===e.type&&this._lastMouseCoords.x===e.screenX&&this._lastMouseCoords.y===e.screenY||this._dragging||(this._showCompass(),clearTimeout(this._userHideMouse),super._onUserInteraction())}_onUserInteractionTimeout(){super._onUserInteractionTimeout(),clearTimeout(this._userHideMouse),this._userHideMouse=setTimeout(()=>{this._hideCompass()},this._threesixtyElementsTimeoutDuration)}_onDragging(e){!this._dragging&&this._isActiveArea(e.target)||(this._dragging=!0,this._player.el.classList.add("dragging"),this._player.el.classList.add("recently-dragging"),this._recentDragTimeout=setTimeout(()=>{this._dragging&&(this._hideControls(),this._userWasRecentlyDragging=!0,clearTimeout(this._dragTimer),this._dragTimer=setTimeout(()=>{this._userWasRecentlyDragging=!1,this._player.el.classList.remove("recently-dragging")},this._dragEndThreshold))},s),clearTimeout(this._userInteractionTimeout),clearTimeout(this._userHideMouse))}_isDraggable(e){return-1!==[this._player.controls.compass.el,this._player.controls.playButtonElement].indexOf(e)||this._player.controls.compass.el.contains(e)}_onMouseDown(e){this._isActiveArea(e.target)&&this._controlsVisible()&&!this._isDraggable(e.target)||!this._isPlayingState()||(this._showControls(),clearTimeout(this._userHideMouse),clearTimeout(this._recentDragTimeout),this._player.el.classList.remove("dragging"),this._player.el.classList.remove("recently-dragging"),this._mouseDownPosition={x:e.x,y:e.y},window.addEventListener("mouseup",this._onMouseUp),window.addEventListener("mousemove",this._onDragging),this._sendMouseDown(e))}_onMouseUp(e){window.removeEventListener("mousemove",this._onDragging),window.removeEventListener("mouseup",this._onMouseUp),this._dragging&&this._onUserInteractionTimeout(),this._player.el.contains(e.target)||this._hideCompass(),this._player.el.classList.remove("dragging"),this._dragging=!1}_onMouseLeave(e){super._onMouseLeave(),this._userWasRecentlyDragging=!1,this._dragging||(clearTimeout(this._userHideMouse),this._hideCompass())}_onClick(e){this._player.controls.compass.el.contains(e.target)&&this._userWasRecentlyDragging&&e.stopPropagation(),e.target!==this._player.controls.playButtonElement.parentElement&&e.target!==this._controls.el.firstElementChild||null===this._mouseDownPosition||this._mouseDownPosition.x!==e.x||this._mouseDownPosition.y!==e.y||(this._mouseDownPosition=null,this._mouseDownTime=1/0,this._dragging=!1,this._userWasRecentlyDragging=!1,clearTimeout(this._dragTimer),clearTimeout(this._recentDragTimeout))}_isPlayingState(){return!this._player.controls.el.classList.contains("start-state")&&!this._player.controls.el.classList.contains("end-state")}}module.exports=o;
},{"./DefaultControlsInteraction":"wvTA"}],"TQW2":[function(require,module,exports) {
const t=require("./ThreeSixtyControlsInteraction");class o extends t{constructor(t){super(t),this._controlsVisible=t.controlsVisible}_bindMethods(){super._bindMethods(),this._onTouchStart=this._onTouchStart.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onClick=this._onClick.bind(this)}_addEventListeners(){this._controls.el.addEventListener("touchstart",this._onTouchStart,{passive:!1}),this._controls.el.addEventListener("click",this._onClick),this._controls.el.addEventListener("focusin",this._onFocusIn),this._controls.el.addEventListener("focusout",this._onFocusOut)}_removeEventListeners(){this._controls.el.removeEventListener("touchstart",this._onTouchStart),this._controls.el.removeEventListener("touchend",this._onTouchEnd),this._controls.el.removeEventListener("click",this._onClick),this._controls.el.removeEventListener("focusin",this._onFocusIn),this._controls.el.removeEventListener("focusout",this._onFocusOut)}_onDragging(t){super._onDragging(t)}_shouldIgnoreUserInteraction(t){return!1}_onClick(t){t.target!==this._player.controls.compass.compassView&&(this._controlsVisible()?this._isActiveArea(t.target)||(this._hideControls(),this._hideCompass()):this._onUserInteraction(t))}_onTouchStart(t){t.target!==this._player.controls.playButtonElement&&t.target!==this._controls.el.firstElementChild&&t.target!==this._player.controls.compass.compassView&&t.target!==this._player.controls.playButtonElement||(document.addEventListener("touchend",this._onTouchEnd),window.addEventListener("touchmove",this._onDragging),this._showCompass(),this._touchDownTime=Date.now(),this._sendMouseDown(t))}_onTouchEnd(t){document.removeEventListener("touchend",this._onTouchEnd),window.removeEventListener("touchmove",this._onDragging),this._onMouseUp(t)}}module.exports=o;
},{"./ThreeSixtyControlsInteraction":"dNoe"}],"pgDN":[function(require,module,exports) {
const e=require("@marcom/useragent-detect"),r=e.os.ios||e.os.android,t=require("./DefaultControlsInteraction"),o=require("./ThreeSixtyControlsInteraction"),n=require("./ThreeSixtyMobileControlsInteraction"),i=function(e){return e.threesixty?r?new n(e):new o(e):new t(e)};module.exports=i;
},{"@marcom/useragent-detect":"kIlq","./DefaultControlsInteraction":"wvTA","./ThreeSixtyControlsInteraction":"dNoe","./ThreeSixtyMobileControlsInteraction":"TQW2"}],"Rhbe":[function(require,module,exports) {
module.exports={major:4,minor:7,patch:2,prerelease:null,toString:function(){return"4.7.2 (665a576)"},toArray:function(){return[4,7,2]}};
},{}],"RAoA":[function(require,module,exports) {
"use strict";module.exports=require("../../../.versionfile");
},{"../../../.versionfile":"Rhbe"}],"AoY8":[function(require,module,exports) {
const e=60;module.exports=function(e){for(let r of Array.from(e.textTracks))for(;r.cues&&r.cues.length&&r.cues[0].endTime<e.currentTime-60;)r.removeCue(r.cues[0])};
},{}],"kD2j":[function(require,module,exports) {
"use strict";const e=require("../ui/localization/LanguageMapping"),t=require("../event-emitter-shim/EventEmitterShim"),i=require("../dom-emitter/DOMEmitterMicro"),s=require("../chapters/ChapterEmitter"),r=require("../utils/Storage"),o=require("../video/VideoFactory").create,n=require("@marcom/useragent-detect"),h=require("@marcom/ac-fullscreen"),a=require("../posterframe/PosterFrameFactory"),l=require("../ui/localization/Localization"),d=require("../ui/error/ErrorView"),c=require("@marcom/ac-raf-emitter/update"),_=require("@marcom/ac-raf-emitter/cancelUpdate"),u=require("@marcom/ac-feature/isRetina")(),m=require("@marcom/ac-feature/isDesktop")()&&!require("@marcom/ac-feature/touchAvailable")(),p=require("@marcom/ac-feature/isHandheld")(),g=n.browser.safari&&n.os.ios,v=n.browser.safari&&n.os.osx,f=n.browser.chrome,C=n.browser.edge,E="user-hover",I="mouse-leave",y="mobile",b="initial-play",w="ac-video-live",S="".concat(w,"-dvr"),T="longform",k=require("../ui/DefaultBreakpoints"),L=require("@marcom/ac-console/log"),P=require("./event/EventsToForward"),F=require("./event/ReadyStateChangeEvents"),M=require("../utils/BreakpointDetect"),A=require("../ui/keyboard-control/createKeyboardControl"),x=require("../ui/controls-interaction/createControlsInteraction"),D=require("@marcom/ac-accessibility/helpers/hide"),V=require("@marcom/ac-accessibility/helpers/show"),R=require("../utils/getVersion");L("@marcom/ac-video version: ".concat(R.toString()));class z extends t{constructor(e){super(e),e=e||{},this.el=e.el||document.createElement("div"),this._elementEmitter=new i(this.el),this.VERSION=R,this.options=e,this._controlsFactory=e.controlsFactory,this._urlOptimizer=e.urlOptimizer,v&&this.el.classList.add("safari-fix-zindex");try{const i=window.top;this._maxWidth=e.maxWidth||Math.min(window.innerWidth,1280)||Math.min(i.innerWidth,1280)}catch(t){this._maxWidth=e.maxWidth||Math.min(window.innerWidth,1280)}this._lastResize=0,this._lastMouseCoords={},this.el.classList.add("ac-video-player"),this.el.classList.add("idle-state"),this._isLive=e.live,this._isDvr=e.dvr,this._isLive&&this._useLiveMode(e.dvr),this._videoImpl=o(e,this.el),this._isResponsive=e.responsive,this._isResponsive&&(this._breakpointDetect=new M({el:this.el,player:this,breakpoints:k,addClass:!0})),this._supportsInlineVideo=m||!(p&&g),this._cachedPiPMode=this.isPictureInPicture(),this._cachedReadyState=this.getReadyState(),this._cachedVisibleTracksLength=0,this.el.appendChild(this._videoImpl.getRenderElement()),(e.poster||void 0===e.poster)&&(this._initPoster(e.poster),e.autoplay||void 0===e.preload||"none"!==e.preload&&"metadata"!==e.preload&&!1!==e.preload||this._poster.show()),this._bindMethods(),this._addEventListeners(),m&&(this._keyboardControl=A({player:this,threesixty:e.threesixty,keyboardTarget:e.keyboardTarget})),e.controls&&this._initUIComponents(),this._initErrorView(),e.parentElement&&e.parentElement.appendChild(this.el),this._chapterEmitter=new s(e),this.refreshSize=this.refreshSize.bind(this),this._setPersistedUserSettings(),this._refreshSizeTimeout=setTimeout(this.refreshSize,0),window.addEventListener("DOMContentLoaded",this.refreshSize)}_bindMethods(){this._onStart=this._onStart.bind(this),this._onEnded=this._onEnded.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onCaptionsChanged=this._onCaptionsChanged.bind(this),this._onPlay=this._onPlay.bind(this),this._onFullscreenChange=this._onFullscreenChange.bind(this),this._onError=this._onError.bind(this),this._forwardEvent=this._forwardEvent.bind(this),this._onPresentationModeChanged=this._onPresentationModeChanged.bind(this),this._forwardFullScreenChangeEvent=this._forwardNamedEvent.bind(this,"fullscreen:change"),this._forwardEnterFullScreenEvent=this._forwardNamedEvent.bind(this,"enterfullscreen"),this._forwardExitFullScreenEvent=this._forwardNamedEvent.bind(this,"exitfullscreen"),this._onDurationChange=this._onDurationChange.bind(this),this._forwardReadyStateChange=this._forwardReadyStateChange.bind(this),this._showControls=this._showControls.bind(this),this._hideControls=this._hideControls.bind(this),this._raiseControls=this._raiseControls.bind(this),this._lowerControls=this._lowerControls.bind(this),this._onPlayPromiseError=this._onPlayPromiseError.bind(this),this._onPlayPromiseResolved=this._onPlayPromiseResolved.bind(this),this._onChapterChange=this._onChapterChange.bind(this),this._onAudioTrackChange=this._onAudioTrackChange.bind(this),this._onVolumeChange=this._onVolumeChange.bind(this),this.refreshSize=this.refreshSize.bind(this)}_addEventListeners(){let e=0,t=P.length;for(;e<t;e++)this._videoImpl.on(P[e],this._forwardEvent);for(e=0,t=F.length;e<t;e++)this._videoImpl.on(F[e],this._forwardReadyStateChange);this._videoImpl.on("timeupdate",this._onTimeUpdate),this._videoImpl.on("webkitpresentationmodechanged",this._onPresentationModeChanged),this._videoImpl.on("durationchange",this._onDurationChange),this._videoImpl.on("addtrack",this._forwardEvent),this._videoImpl.on("change",this._forwardEvent),this._videoImpl.on("removetrack",this._forwardEvent),this._videoImpl.on("addtrack",this._onCaptionsChanged),this._videoImpl.on("change",this._onCaptionsChanged),this._videoImpl.on("removetrack",this._onCaptionsChanged),this._videoImpl.on("loadedmetadata",this.refreshSize),this._videoImpl.on("loadeddata",this.refreshSize),this._videoImpl.on("play",this._onPlay),this._videoImpl.on("AudioTrackChange",this._onAudioTrackChange),this._videoImpl.on("volumechange",this._onVolumeChange),m?(h.on("enterfullscreen",this._forwardEnterFullScreenEvent),h.on("exitfullscreen",this._forwardExitFullScreenEvent),h.on("enterfullscreen",this._forwardFullScreenChangeEvent),h.on("exitfullscreen",this._forwardFullScreenChangeEvent),this.on("fullscreen:change",this._onFullscreenChange)):g&&(this._videoImpl.on("webkitbeginfullscreen",this._forwardEnterFullScreenEvent),this._videoImpl.on("webkitendfullscreen",this._forwardExitFullScreenEvent),this._videoImpl.on("webkitbeginfullscreen",this._forwardFullScreenChangeEvent),this._videoImpl.on("webkitendfullscreen",this._forwardFullScreenChangeEvent),p&&this.on("fullscreen:change",this._onFullscreenChange)),this._chapterEmitter&&this._chapterEmitter.on("change",this._onChapterChange),this._videoImpl.on("PlayPromiseError",this._onPlayPromiseError),this._videoImpl.on("PlayPromiseResolved",this._onPlayPromiseResolved),this._videoImpl.on("error",this._onError)}_onPlayPromiseResolved(){this.trigger("PlayPromiseResolved")}_removeEventListeners(){let e=0,t=P.length;for(;e<t;e++)this._videoImpl.off(P[e],this._forwardEvent);for(e=0,t=F.length;e<t;e++)this._videoImpl.off(F[e],this._forwardReadyStateChange);this._videoImpl.off("timeupdate",this._onTimeUpdate),this._videoImpl.off("webkitpresentationmodechanged",this._onPresentationModeChanged),this._videoImpl.off("durationchange",this._onDurationChange),this._videoImpl.off("addtrack",this._forwardEvent),this._videoImpl.off("change",this._forwardEvent),this._videoImpl.off("removetrack",this._forwardEvent),this._videoImpl.off("addtrack",this._onCaptionsChanged),this._videoImpl.off("change",this._onCaptionsChanged),this._videoImpl.off("removetrack",this._onCaptionsChanged),this._videoImpl.off("loadedmetadata",this.refreshSize),this._videoImpl.off("loadeddata",this.refreshSize),this._videoImpl.off("play",this._onPlay),this._videoImpl.off("AudioTrackChange",this._onAudioTrackChange),this._videoImpl.off("volumechange",this._onVolumeChange),m?(h.off("enterfullscreen",this._forwardEnterFullScreenEvent),h.off("exitfullscreen",this._forwardExitFullScreenEvent),h.off("enterfullscreen",this._forwardFullScreenChangeEvent),h.off("exitfullscreen",this._forwardFullScreenChangeEvent)):g&&(this._videoImpl.off("webkitbeginfullscreen",this._forwardEnterFullScreenEvent),this._videoImpl.off("webkitendfullscreen",this._forwardExitFullScreenEvent),this._videoImpl.off("webkitbeginfullscreen",this._forwardFullScreenChangeEvent),this._videoImpl.off("webkitendfullscreen",this._forwardFullScreenChangeEvent),p&&this.off("fullscreen:change",this._onFullscreenChange)),this._chapterEmitter&&this._chapterEmitter.off("change",this._onChapterChange),this._videoImpl.off("PlayPromiseError",this._onPlayPromiseError),this._videoImpl.off("loadedmetadata",this.refreshSize),this._videoImpl.off("loadeddata",this.refreshSize),window.removeEventListener("DOMContentLoaded",this.refreshSize)}_forwardReadyStateChange(){const e=this.getReadyState();(e>this._cachedReadyState||0===e)&&(this._cachedReadyState=e,this.trigger("readystatechange",{readyState:e}))}_forwardEvent(e){L(e.type+" time:"+this.getCurrentTime()),this.trigger(e.type)}_forwardNamedEvent(e){L(e+" time:"+this.getCurrentTime()),this.trigger(e)}_onPlayPromiseError(){L("play() Promise rejected, probably because the browser is blocking autoplay"),this.el.classList.add(b),this._showStartState(),this._started=!1,this._poster.show(),this.once("play",this._onPlay)}_onAudioTrackChange(e){const t=this.getAudioTracks();if(this._forwardEvent(e),this._storedAudioTrackType&&this._storedAudioTrackLanguage&&t.length>1){const e=t.find(e=>e.language===this._storedAudioTrackLanguage&&e.kind===this._storedAudioTrackType);t.forEach(e=>e.enabled=!1),e?e.enabled=!0:t.length&&(t[0].enabled=!0),this._storedAudioTrackLanguage=null}let i=t.find(e=>e.enabled);i&&(r.setItem(r.AUDIO_TRACK_TYPE,i.kind),r.setItem(r.AUDIO_TRACK_LANGUAGE,i.language))}_onCaptionsChanged(t){const i=this.getVisibleTextTracks().length;if(!this._cachedVisibleTracksLength&&"none"!==this._storedCCLanguage&&this.getTextTracks().length>0){const t=this.getTextTracks().find(t=>t.language===this._storedCCLanguage||e[t.language]===this._storedCCLanguage);t&&(setTimeout(()=>{this.getTextTracks().forEach(e=>{t!==e&&(e.mode="hidden")}),t.mode="showing",setTimeout(()=>{0===t.cues.length&&(t.mode="hidden",t.mode="showing")},1)},1),this._storedCCLanguage="none")}i>0&&this._cachedVisibleCCTrack!==this.getVisibleTextTracks()[0]?(this.trigger("texttrackshow"),r.setItem(r.CC_LANGUAGE,this.getVisibleTextTracks()[0].language)):0===i&&this._cachedVisibleTracksLength>0&&this.trigger("texttrackhide"),this._cachedVisibleTracksLength=i,this._cachedVisibleCCTrack=i?this.getVisibleTextTracks()[0]:null}_onVolumeChange(e){r.setItem(r.VOLUME_LEVEL,this.getVolume()),r.setItem(r.VOLUME_MUTED,this.getMuted())}_onTimeUpdate(){this.trigger("timeupdate",{currentTime:this.getCurrentTime()})}load(e,t,i,s){if(this._setError(!1),this.refreshSize(),this._started=!1,Array.isArray(e)||(e=[e]),t&&!Array.isArray(t)&&(t=[{src:t}]),this._cachedReadyState=0,s||(s=this.options),this._urlOptimizer){t||(t=e.map(this._urlOptimizer.getCaptionsSource).filter(function(e){return!!e}));const i=this.getVisibleTextTracks();i&&i.length&&t&&t.length&&(t[0].mode="showing");const r=s.maxWidth||this._calcMaxWidth();e=e.map(function(e){return this._urlOptimizer.getVideoSource(e,r,null,{urlOptimizeHls:this.options.urlOptimizeHls})}.bind(this))}const r=s&&s.thumbnails||this._urlOptimizer&&this._urlOptimizer.getThumbnailImageSource(e[0]);this.once("play",this._onPlay),(this.options.autoplay&&m||this.getEnded())&&this.once("loadstart",function(){this.play()}.bind(this)),s||(s=this.options),s&&this._poster&&this.setPoster(s.poster),this._poster&&this._poster.show(),this.controls&&this.controls.sharingModule&&(s.sharing?this.controls.sharingModule.setData(s.sharing):this.controls.sharingModule.setData(null)),void 0!==s.live&&(this._isLive=s.live,this._useLiveMode(s.dvr)),this._hideEndState(),this._setPersistedUserSettings(),this._videoImpl.load(e,t,i),this.controls&&this.controls.overlays?this.controls.overlays.setData(r):this.controls&&this.once("controlsready",function(){this.controls.overlays&&this.controls.overlays.setData(r)}.bind(this)),this.controls&&this.controls.endState?this.controls.endState.setData(s.endState):this.controls&&this.once("controlsready",function(){this.controls.endState&&this.controls.endState.setData(s.endState)}.bind(this))}_calcMaxWidth(){return this.el.parentElement?this.el.parentElement.clientWidth:this._maxWidth}_isActiveArea(e){for(;e!==this.el;){if(e.hasAttribute("data-acv-active-area"))return!0;e=e.parentNode}return!1}_onPresentationModeChanged(e){this._forwardEvent(e);const t=this.isPictureInPicture();this._cachedPiPMode!==t&&(this._cachedPiPMode=t,L("pictureinpicture:change to "+t),this.trigger("pictureinpicture:change"))}_onDurationChange(e){(this._isDvr||this.getDuration()>3600)&&this.el.classList.add(T),this.refreshSize()}appendTo(e){e.appendChild(this.el),this.refreshSize()}getTextTracks(){return Array.prototype.slice.call(this._videoImpl.getTextTracks())}getAudioTracks(){return Array.from(this._videoImpl.getAudioTracks())}getVisibleTextTracks(){let e=Array.prototype.slice.call(this._videoImpl.getTextTracks());return e&&e.length&&(e=e.filter(function(e){return"showing"===e.mode})),e}getFullScreenElement(){return m?this.el:this.getMediaElement()}getFullScreenEnabled(){return h.fullscreenEnabled(this.getFullScreenElement())}isFullscreen(){return m?h.fullscreenElement()===this.getFullScreenElement():this._videoImpl.isFullscreen()}requestFullscreen(){if(!this.isFullscreen()){this.controls&&(this.controls.el.display="none",this._hideControls()),this.trigger("fullscreen:willenter",{type:"enter"}),this._lastResize=Date.now(),_(this._updateFullscreenId);const e=this,t=function(){e.refreshSize(),e._updateFullscreenId=c(t)};this._updateFullscreenId=c(t),f?setTimeout(function(){this._lastResize=Date.now(),h.requestFullscreen(this.getFullScreenElement())}.bind(this),300):h.requestFullscreen(this.getFullScreenElement())}}exitFullscreen(){this.isFullscreen()&&(this.controls&&(this.controls.el.display="none",this._hideControls()),this.trigger("fullscreen:willexit",{type:"exit"}),f?setTimeout(function(){h.exitFullscreen(this.getFullScreenElement())}.bind(this),300):h.exitFullscreen(this.getFullScreenElement()))}_onFullscreenChange(){this._lastResize=Date.now(),this.controls&&(this.controls.el.display="",this._hideControls()),this._preventUserInteraction=!0,setTimeout(function(){_(this._updateFullscreenId),this._preventUserInteraction=!1,this.refreshSize()}.bind(this),750),this.refreshSize()}toggleFullscreen(){this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()}_initUIComponents(){this._controlsFactory?(this._instantiateDefaultCustomUIControls(),m?this.el.appendChild(this._blockade.el):(this.controls.el.classList.add(y),this.setControls(!0))):this.setControls(!0)}_showControls(){this._controlsVisible=!0,this.el.classList.remove(b),this.el.classList.add(E)}_hideControls(){this._controlsVisible=!1,this.el.classList.remove(E),this.hideCaptionsSelector()}_raiseControls(){this._controlsVisible=!0,this.el.classList.remove(I)}_lowerControls(){this._controlsVisible=!1,this.el.classList.add(I),this.hideCaptionsSelector()}_onControlsReady(){this.options.autoplay&&m||this._showStartState()}_showStartState(){this.controls&&this.controls.el.classList.add("start-state"),this._poster&&this._poster.show(),m||D(this.getMediaElement())}_hideStartState(){this.controls&&this.controls.el.classList.remove("start-state"),this._poster&&this._poster.hide(),m||V(this.getMediaElement())}_showEndState(){this.controls&&(this.controls.mainControlsElement?this.controls.mainControlsElement.contains(document.activeElement)&&setTimeout(function(){this.controls.playButtonElement.focus()}.bind(this)):this.el.contains(document.activeElement)&&!this.controls.sharingModule.el.contains(document.activeElement)&&setTimeout(function(){this.controls.playButtonElement.focus()}.bind(this)),this.controls.el.classList.add("end-state")),this._poster&&this._poster.show(),D(this.getMediaElement())}_hideEndState(){this.controls&&this.controls.el.classList.remove("end-state"),m||V(this.getMediaElement())}_createBlockade(){this._blockade=new i(document.createElement("div")),this._blockade.el.classList.add("ac-video-blockade")}_instantiateDefaultCustomUIControls(){return this.controls=this._controlsFactory.create({player:this,endState:this.options.endState,enableMainControls:m,basePath:this.options.localizationBasePath,forceEnglishLabels:this.options.forceEnglishLabels,template:this.options.template,readyCallback:function(){this._onControlsReady(),this.trigger("controlsready")}.bind(this)}),this.controls.el.parentNode!==this.el&&this.el.appendChild(this.controls.el),this._videoImpl.setControls(!1),this._createBlockade(),this._controlsInteraction=x({player:this,keyboardControl:this._keyboardControl,controlsTimeoutDuration:this.options.controlsTimeoutDuration,showControls:this._showControls,hideControls:this._hideControls,raiseControls:this._raiseControls,lowerControls:this._lowerControls,controlsVisible:function(){return this._controlsVisible}.bind(this),sendMouseDown:this._videoImpl.sendMouseDown,elementEmitter:this._elementEmitter}),this.controls}_onPlay(){this._started||this.once("timeupdate",this._onStart,function(){return this.getCurrentTime()>0&&!this.getPaused()}.bind(this))}isCaptionsSelectorShowing(){return this.controls.el.classList.contains("captions-selector-showing")}showCaptionsSelector(){this.controls.axListSelector.style.maxHeight="min(".concat(this.el.getBoundingClientRect().height-80,"px,250px)"),this.controls.el.classList.add("captions-selector-showing")}hideCaptionsSelector(){this.controls.el.classList.remove("captions-selector-showing")}_onStart(){this._started=!0,this.el.classList.add(b),this.el.classList.remove("idle-state"),this._poster&&this._poster.hide(),this.controls&&(this._hideStartState(),this._hideEndState()),this.once("ended",this._onEnded)}_onEnded(){this.isFullscreen()&&this.exitFullscreen(),this.controls&&(this._hideStartState(),this._showEndState()),setTimeout(function(){this.once("timeupdate",function(){this.getEnded()?this._onEnded():this._onStart()}.bind(this))}.bind(this),300),this._poster&&this._poster.show(),this._started=!1}_initPoster(e){this._poster=a({player:this,video:this._videoImpl,useNativePoster:!1===this.options.controls,is2x:u,src:e}),this._poster.el&&this.el.appendChild(this._poster.el),this.options.autoplay||this._poster.show()}_initErrorView(){this._errorView=new d,this.el.appendChild(this._errorView.el)}_useLiveMode(e){clearInterval(this._captionRemovalInterval),this._isLive?(this.el.classList.add(w),e&&!C?this.el.classList.add(S):v&&(this._captionRemovalInterval=setInterval(()=>{require("../utils/removeStateCaptions")(this.getMediaElement())},1e4))):(this.el.classList.remove(w),this.el.classList.remove(S))}once(e,t,i){if(arguments.length<3||"object"==typeof i)super.once.apply(this,arguments);else{const e=arguments,t=Array.prototype.slice.call(arguments,2),i=function(){t.every(function(e){return!!e()})&&(e[1].apply(this,e),this.off(e[0],i))}.bind(this);this.on(e[0],i)}}getMediaElement(){return this._videoImpl.getMediaElement()}play(){this.el.classList.remove("idle-state");const e=this._videoImpl.getCurrentTime();L("play called"),!this._videoImpl.getError()||0!==e&&!isNaN(e)?this._videoImpl.play():setTimeout(()=>{this._errorView.focus()},1e3)}pause(){this._videoImpl.pause()}seek(e){this.setCurrentTime.apply(this,arguments)}addTextTrack(e){this._videoImpl.addTextTrack(e)}getReadyState(){return this._videoImpl.getMediaElement().readyState}getPreload(){return this._videoImpl.getPreload()}setPoster(e){this._poster.setSrc(e)}getPoster(){this._poster.getSrc()}getVolume(){return this._videoImpl.getVolume()}getMuted(){return this._videoImpl.getMuted()}getCurrentTime(){return this._videoImpl.getCurrentTime()}getDuration(){return this._videoImpl.getDuration()}getPaused(){return this._videoImpl.getPaused()}getEnded(){return this._videoImpl.getEnded()}getBufferedPercentage(){const e=this.getCurrentTime(),t=this.getDuration();if(isNaN(t)||t===1/0)return 0;const i=this._videoImpl.getBuffered();if(i.length)for(let s=0;s<i.length;s++)if(i.start(s)<=e&&i.end(s)>e)return i.end(s)/t*100;return e/t*100}setCurrentTime(e){return this._videoImpl.setCurrentTime(e)}goToLive(){this._videoImpl.goToLive&&this._videoImpl.goToLive()}isDvr(){return this._isDvr&&!C}setVolume(e){return this.trigger("uservolumechange"),this._videoImpl.setVolume(e)}setMuted(e){this.trigger("uservolumechange"),this._videoImpl.setMuted(e)}setSrc(e){this._videoImpl.setSrc(e)}getCurrentSrc(){return this._videoImpl.getCurrentSrc()}setControls(e){return this._videoImpl.setControls(e)}getMediaHeight(){return this._videoImpl.getMediaElement().videoHeight}getMediaWidth(){return this._videoImpl.getMediaElement().videoWidth}supportsPictureInPicture(){return this._videoImpl.supportsPictureInPicture()}isPictureInPicture(){return this._videoImpl.isPictureInPicture()}setPictureInPicture(e){return this._videoImpl.setPictureInPicture(e)}supportsAirPlay(){return this._videoImpl.supportsAirPlay()}isLive(){return this._isLive}refreshSize(){this._breakpointDetect?this._breakpointDetect.refresh():(this._currentBreakpoint&&this.el.classList.remove(this._currentBreakpoint.name),this._currentBreakpoint=M.getBreakpointFromElement(this.el,k),this.el.classList.add(this._currentBreakpoint.name)),this._videoImpl&&this._videoImpl.refreshSize()}_