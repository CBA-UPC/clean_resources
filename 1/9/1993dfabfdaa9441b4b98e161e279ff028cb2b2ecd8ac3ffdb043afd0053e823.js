;
(self.AMP=self.AMP||[]).push({m:0,v:"2312191621000",n:"amp-selector",ev:"0.1",l:!0,f:function(t,e){!function(){var e;sArray;var a=Object.prototype,h=(a.hasOwnProperty,a.toString,1),l="Enter",f="ArrowLeft",d="ArrowUp",v="ArrowRight",p="ArrowDown",b="Home",m="End";function y(t){return"rtl"==(t.body.getAttribute("dir")||t.documentElement.getAttribute("dir")||"ltr")}self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var w=self.__AMP_LOG;ction O(t){return t.nodeType?(i=t,e=(i.ownerDocument||i).defaultView,function(t,e){return x(t=t),"ampdoc")}(e)).getAmpDoc(t):t;var e,i}r R="amp-selector",A="none",S="select",U=function(t){!w,t);var e,o,a=(e=w,o=),;function w(t){var e;return(e=a.call(this,t)).Q3=!1,e.Y3=[],e.Xt=[],e.t7=[],e.Ye=null,e.e7=0,e.i7=A,e}w.prerenderAllowed=function(){return!0};var g=w.prototype;return g.isLayoutSupported=g.buildCallback=function(){var t,e,i,n,r,o=this;this.Ye=(t=this.element,e="action",i=O(t),E(r=(n=O(i)).isSingleDoc()?n.win:n,e)?x(r,e):null),this.Q3=this.element.hasAttribute("multiple"),this.element.hasAttribute("role")||this.element.setAttribute("role","listbox"),this.Q3&&this.element.setAttribute("aria-multiselectable","true"),this.element.hasAttribute("disabled")&&this.element.setAttribute("aria-disabled","true");var s,u=this.element.getAttribute("keyboard-select-mode");u?(j("none"===(s=u=u.toLowerCase())||"focus"===s||"select"===s,"Unknown keyboard-select-mode: ".concat(u)),j(!(this.Q3&&u==S),"[keyboard-select-mode=select] not supported for multiple selection amp-selector")):u=A,this.i7=u,this.registerAction("clear",this.n7.bind(this)),this.Ls(),this.element.addEventListener("click",this.r7.bind(this)),this.element.addEventListener("keydown",this.gQ.bind(this)),this.registerAction("selectUp",(function(t){var e=t.args,i=t.trust,n=e&&void 0!==e.delta?-e.delta:-1;o.o7(n,i)}),h),this.registerAction("selectDown",(function(t){var e=t.args,i=t.trust,n=e&&void 0!==e.delta?e.delta:1;o.o7(n,i)}),h),this.registerAction("toggle",(function(t){var e=t.args,i=t.trust;return j(e.index>=0,"'index' must be greater than 0"),j(e.index<o.Xt.length,"'index' must be less than the length of options in the <amp-selector>"),e&&void 0!==e.index?o.aY(e.index,e.value,i):Promise.reject("'index' must be specified")}),h),this.Ye.addToAllowlist(R,["clear","selectDown","selectUp","toggle"],["email"]),this.element.addEventListener("amp:dom-update",this.s7.bind(this))},g.mutatedAttributesCallback=function(t){var e=t.selected;void 0!==e&&this.u7(e);var i=t.disabled;void 0!==i&&(i?this.element.setAttribute("aria-disabled","true"):this.element.removeAttribute("aria-disabled"))},g.u7=function(t){var e=Array.isArray(t)?t:[t];if(null!==t&&0!=e.length){if(this.Q3||(e=e.slice(0,1)),!c(this.c7().sort(),e.sort())){for(var i=e.reduce((,Object.create(null)),n=0;n<this.Xt.length;n++){var r=this.Xt[n];i[r.getAttribute("option")]?this.a7(r):this.h7(r)}this.l7(),this.f7()}}else this.n7()},g.l7=function(t){if(this.i7!=A){this.Xt.forEach(();var e=t;e||(e=this.Q3?this.Xt[0]:this.Y3[0]||this.Xt[0]),e&&(this.e7=this.Xt.indexOf(e),e.tabIndex=0)}},g.s7=function(t){var e=u(this.element.querySelectorAll("[option]"));c(this.Xt,e)||this.Ls(e)},g.Ls=function(t){var e=this;this.Y3.length=0;var i=t||u(this.element.querySelectorAll("[option]"));i.forEach((function(t){t.hasAttribute("role")||t.setAttribute("role","option"),t.hasAttribute("disabled")&&t.setAttribute("aria-disabled","true"),t.hasAttribute("selected")?e.a7(t):e.h7(t),t.tabIndex=0})),this.Xt=i,this.l7(),this.f7()},g.f7=function(){var t=this,e=[],i=this.element.getAttribute("name");if(!i||this.element.hasAttribute("disabled"))return e;var n=this.element.getAttribute("form");this.t7.forEach((),this.t7=[];var r=this.win.document,o=r.createDocumentFragment();return this.Y3.forEach((function(s){if(!s.hasAttribute("disabled")){var u=r.createElement("input"),c=s.getAttribute("option");u.setAttribute("type","hidden"),u.setAttribute("name",i),u.setAttribute("value",c),n&&u.setAttribute("form",n),t.t7.push(u),o.appendChild(u),e.push(c)}})),this.element.appendChild(o),e},g.d7=function(t){var e=this;t.hasAttribute("disabled")||this.mutateElement((function(){t.hasAttribute("selected")?e.Q3&&(e.h7(t),e.f7()):(e.a7(t),e.f7()),e.l7(t),e.v7(t,3)}))},g.c7=g.r7=function(t){if(!this.element.hasAttribute("disabled")){var e,i=t.target;i&&(i.hasAttribute("option")||("[option]",i=(e=i).closest?e.closest("[option]"):e,()),i&&this.d7(i))}},g.aY=function(t,e,n){var r=this,o=this.Xt[t],s=o.hasAttribute("selected"),u=void 0!==e?e:!s,c=this.Xt.indexOf(this.Y3[0]);return u===s?i():this.mutateElement((function(){if(c!==t){r.a7(o);var e=r.Xt[c];e&&r.h7(e)}else r.h7(o);r.v7(o,n)}))},g.v7=function(t,e){var i="select",n=function(t,e,i,n){var r={detail:i};if(Object.assign(r,void 0),"function"==typeof t.CustomEvent)return new t.CustomEvent(e,r);var o=t.document.createEvent("CustomEvent");return o.initCustomEvent(e,!!r.bubbles,!!r.cancelable,i),o}(this.win,"amp-selector.".concat(i),{"targetOption":t.getAttribute("option"),"selectedOptions":this.c7()});this.Ye.trigger(this.element,i,n,e)},g.o7=function(t,e){var i,n,r=this.Xt.indexOf(this.Y3[0]),o=(i=-1===r&&t<0?t:r+t,n=this.Xt.length,i>0&&n>0?i%n:(i%n+n)%n),s=this.Xt[o];this.a7(s);var u=this.Xt[r];u&&this.h7(u),this.f7(),this.v7(s,e)},g.gQ=function(t){if(this.element.hasAttribute("disabled"))return i();switch(t.key){case f:case d:case v:case p:case b:case m:return this.i7!=A?this.p7(t):i();case l:case" ":return this.b7(t),i()}return i()},g.p7=function(t){var e=this,n=this.win.document,r=0;switch(t.key){case f:r=y(n)?1:-1;break;case d:r=-1;break;case v:r=y(n)?-1:1;break;case p:case b:r=1;break;case m:r=-1;break;default:return i()}return t.preventDefault(),this.Xt[this.e7].tabIndex=-1,this.m7().then((function(i){var n,o,s,u,c=e.e7;switch(t.key){case b:e.e7=e.Xt.length-1;break;case m:e.e7=0}do{e.e7=(e.e7+r)%e.Xt.length,e.e7<0&&(e.e7=e.e7+e.Xt.length)}while(n=e.Xt[e.e7],s=(o=i[e.e7]).height,u=o.width,(n.hidden||0==u||0==s)&&e.e7!=c);var a=e.Xt[e.e7];a.tabIndex=0,a);var h=e.Xt[e.e7];e.i7==S&&e.d7(h)}))},g.b7=function(t){var e=t.key;if((" "==e||e==l)&&this.Xt.includes(t.target)){t.preventDefault();var i=t.target;this.d7(i)}},g.h7=function(t){t.removeAttribute("selected"),t.setAttribute("aria-selected","false");var e=this.Y3.indexOf(t);-1!==e&&this.Y3.splice(e,1)},g.n7=function(){for(;this.Y3.length>0;){var t=this.Y3.pop();this.h7(t)}this.f7()},g.a7=function(t){this.Y3.includes(t)||(this.Q3||this.n7(),t.setAttribute("selected",""),t.setAttribute("aria-selected","true"),this.Y3.push(t))},g.getElementsForTesting=function(){return this.Xt},g.getSelectedElementsForTesting=g.m7=function(){var t=this;return this.measureElement(()},w}(t.BaseElement);t.registerElement(R,U,"amp-selector [option]{cursor:pointer}amp-selector [option][selected]{cursor:auto;outline:1px solid rgba(0,0,0,0.7)}amp-selector[multiple] [option][selected]{cursor:pointer;outline:1px solid rgba(0,0,0,0.7)}amp-selector [disabled][option],amp-selector[disabled] [option],amp-selector[disabled] [selected],amp-selector [selected][disabled]{cursor:auto;outline:none}\n/*# sourceURL=/extensions/amp-selector/0.1/amp-selector.css*/")}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-selector-0.1.js.map