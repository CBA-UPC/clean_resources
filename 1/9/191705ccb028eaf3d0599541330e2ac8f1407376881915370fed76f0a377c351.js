(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{88668:47443:function(e,t,n){var r=n(42118);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},1196:45652:74757:23593:21814:44908:19709:8111:function(e,t,n){"use strict";var r=n(67294),a=n(3239);t.Z=function(e,t){var n=void 0===t?{}:t,i=(0,a.z$)();return(0,r.useEffect)((function(){return i.initPage(e,n),),[]),i}},42427:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return K},default:function(){return $}});var r=n(28520),a=n.n(r),i=n(85893),o=n(67294),c=n(9008),l=n(54928),s=n(2712),u=n(54141),d=n(44908),v=n.n(d),f=n(87097);function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){p(e,t,n[t])}))}return e}var m=function(e,t){return Object.keys(e).reduce((function(n,r){n[r]=e[r];return-1===["most_read","rightSide"].indexOf(r)&&(n[r]=h({},n[r],{data:v()(e[r].data,"id")}),n[r].data.map((function(e){var n,r,a=h({},e);return a.pubDate=(0,f.gc)(a.publish_date,"MM.DD.YY",t),a.byline=null===(n=a.contributions)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.contributor.full_name,a.section&&(a.section=h({},a.section,{url:"/".concat(t,"/section/").concat(a.section.slug)})),a}))),"most_read"===r&&(n[r]=v()(n[r],"id"),n[r].map((function(e){var n,r,a=h({},e);return a.data=h({},a.data,{pubDate:(0,f.gc)(a.publish_date,"MM.DD.YY",t),byline:null===(n=a.data.contributions)||void 0===n||null===(r=n[0])||void 0===r?void 0:r.contributor.full_name}),a.data.section&&(a.data.section=h({},a.data.section,{url:"/".concat(t,"/section/").concat(a.data.section.slug)})),a}))),n}),{})},g=n(25523),b=n(11163),y=n(94184),j=n.n(y),_=(n(44655),function(e){var t=e.className;return(0,i.jsx)("div",{className:j()(["loader",t])})}),x=n(97264),k=n(8111),O=n(31748),w=n(13683),P=function(e){var t=e.q,n=e.language,r=(0,x.T_)(),a=(0,w.Z)("Search | View","Search Field",{searchQuery:t}).ref,o=r.t("migration.search",{"migration.search":{_:"Search articles, videos, shows"}});return(0,i.jsx)("div",{className:"searchbar-wrapper",ref:a,children:(0,i.jsx)(O.Z,{isNav:!1,locale:n,q:t,phrases:{search:{searchPlaceholder:o}}})})},S=n(50662),C=(n(44894),function(e){var t,n,r,a,o,c,l,s,u,d,v,f,p,h,m,g,b,y,_=e.currentModel,x=void 0===_?"articles":_,k=function(t){var n=t.target.dataset.model;n&&e.onModelOptionClick&&e.onModelOptionClick(n)},O=e.phrases,w=e.data,P=w.articles,C=w.campaign_items,N=w.shows,M=w.videos,q=w.rightSide,T=[(0,i.jsx)("div",{className:"no-results-card",children:(null===O||void 0===O||null===(t=O.search)||void 0===t?void 0:t.noResults)||"no results"})],E=null===(n=null===e||void 0===e?void 0:e.data[x])||void 0===n?void 0:n.data,Z=E&&E.length>0?E:T;return(0,i.jsxs)("div",{className:"search-results",children:[(0,i.jsxs)("div",{className:"model-selection",children:[(0,i.jsxs)("button",{"data-model":"articles",className:j()({active:"articles"===x,noItems:!(null===P||void 0===P||null===(r=P.meta)||void 0===r?void 0:r.count)}),onClick:k,disabled:!(null===P||void 0===P||null===(a=P.meta)||void 0===a?void 0:a.count),children:[(null===O||void 0===O||null===(o=O.search)||void 0===o?void 0:o.articles)||"articles"," ",(0,i.jsx)("span",{children:"".concat((null===P||void 0===P||null===(c=P.meta)||void 0===c?void 0:c.count)||0)})]}),(0,i.jsxs)("button",{"data-model":"videos",className:j()({active:"videos"===x,noItems:!(null===M||void 0===M||null===(l=M.meta)||void 0===l?void 0:l.count)}),onClick:k,disabled:!(null===M||void 0===M||null===(s=M.meta)||void 0===s?void 0:s.count),children:[(null===O||void 0===O||null===(u=O.search)||void 0===u?void 0:u.videos)||"videos"," ",(0,i.jsx)("span",{children:"".concat((null===M||void 0===M||null===(d=M.meta)||void 0===d?void 0:d.count)||0)})]}),(0,i.jsxs)("button",{"data-model":"shows",className:j()({active:"shows"===x,noItems:!(null===N||void 0===N||null===(v=N.meta)||void 0===v?void 0:v.count)}),onClick:k,disabled:!(null===N||void 0===N||null===(f=N.meta)||void 0===f?void 0:f.count),children:[(null===O||void 0===O||null===(p=O.search)||void 0===p?void 0:p.shows)||"shows"," ",(0,i.jsx)("span",{children:"".concat((null===N||void 0===N||null===(h=N.meta)||void 0===h?void 0:h.count)||0)})]}),(0,i.jsxs)("button",{"data-model":"campaign_items",className:j()({active:"campaign_items"===x,noItems:!(null===C||void 0===C||null===(m=C.meta)||void 0===m?void 0:m.count)}),onClick:k,disabled:!(null===C||void 0===C||null===(g=C.meta)||void 0===g?void 0:g.count),children:[(null===O||void 0===O||null===(b=O.search)||void 0===b?void 0:b.partnerContent)||"partner content",(0,i.jsx)("span",{children:"".concat((null===C||void 0===C||null===(y=C.meta)||void 0===y?void 0:y.count)||0)})]})]}),(0,i.jsx)("div",{className:"results-section",children:(0,i.jsx)(S.Z,{items:Z,rightSide:q})})]})}),N=n(90021),M=n(36902);function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){q(e,t,n[t])}))}return e}var E=function(e){var t=e.most_read;if(!t)return null;var n=(0,x.T_)(),r=(0,w.Z)("Search | View","Most Read Module",{}),a=r.ref,o=r.analytics,c=n.t("migration.more_read",{"migration.more_read":{_:"Most Read"}}),l=(0,i.jsx)("div",{className:"search-page__sidebar__most-read__title",children:c}),s=t.map((function(e,t){var n=e.data,r=(0,N.Z)(n,t);return n.onCardClick=function(){null===o||void 0===o||o.trackModuleEvent("Search | Click","Most Read Module",T({},r,{linkType:"article"}))},n.onRubricClick=function(){null===o||void 0===o||o.trackModuleEvent("Search | Click","Most Read Module",T({},r,{linkType:"section"}))},n}));return(0,i.jsx)("div",{className:"search-page__sidebar",ref:a,children:(0,i.jsx)(M.Z,{title:l,items:s},1)})};function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Z(e,t,n[t])}))}return e}var R=function(e){var t,n=e.data,r=e.currentModel,a=e.setCurrentModel,c=e.title,l=e.language,s=e.q,u=(0,x.T_)(),d=(0,w.Z)("Search | View","Feed",{searchQuery:s}),v=d.ref,f=d.analytics,p=["articles","videos","shows","campaign_items"],h=(0,o.useMemo)((function(){return Object.keys(n).reduce((function(e,t){return e[t]=n[t],p.indexOf(t)>-1&&(e[t]=D({},e[t],{data:n[t].data.map((function(e,n){var r=D({},e),a=(0,N.Z)(r,n);return r.onCardClick=function(){null===f||void 0===f||f.trackModuleEvent("Search | Click","Feed",D({},a,{linkType:"videos"===t?"video":"article",searchQuery:s}))},r.onRubricClick=function(){null===f||void 0===f||f.trackModuleEvent("Search | Click","Feed",D({},a,{linkType:"section",searchQuery:s}))},r}))})),"most_read"===t&&(e[t]=e[t].map((function(e,t){var n=D({},e),r=(0,N.Z)(n,t);return n.data=D({},n.data,{onCardClick:function(){null===f||void 0===f||f.trackModuleEvent("Search | Click","Most Read Module",D({},r,{linkType:"article",searchQuery:s}))},onRubricClick:function(){null===f||void 0===f||f.trackModuleEvent("Search | Click","Most Read Module",D({},r,{linkType:"section",searchQuery:s}))}}),n}))),e}),{})}),[n]);h.rightSide=(t=h.most_read,[(0,i.jsx)(E,{most_read:t},"1")]);var m=u.t("search.articles",{"search.articles":{_:"Articles"}}),g=u.t("search.videos",{"search.videos":{_:"Videos"}}),b=u.t("search.shows",{"search.shows":{_:"Shows"}}),y=u.t("partners.nav.Partner-Content",{"partners.nav.Partner-Content":{_:"Partner Content"}});return(0,i.jsx)("div",{ref:v,children:(0,i.jsx)(C,{data:h,currentModel:r,onModelOptionClick:function(e){null===f||void 0===f||f.trackModuleEvent("Search | Click","Tab Navigation",{itemName:"tab",linkTitle:e,linktType:"tab",tabName:e,searchQuery:s}),window.history.replaceState({},c,"/".concat(String(l),"/search/?page=",1,"&q=").concat(s,"&model=").concat(e)),a(e)},phrases:{search:{articles:m,videos:g,shows:b,partnerContent:y}}})})},F=n(43727),Q=n(41664),I=n(70404),L=function(e){var t,n,r=e.currentPage,a=e.q,o=e.data,c=e.per_page,l=e.language,s=e.currentModel,u=(0,w.Z)("Search | View","Pagination Module",{searchQuery:a}),d=u.ref,v=u.analytics,f=Math.ceil((null===(t=o[s])||void 0===t||null===(n=t.meta)||void 0===n?void 0:n.count)/c),p=function(e,t){if(!(e>=t))return e+1}(r,f),h=function(e){if(1!==e)return e-1}(r),m=(0,I.U)({"grid-pagination.newer":{_:"Newer"},"grid-pagination.older":{_:"Older"}}),g=function(e){null===v||void 0===v||v.trackModuleEvent("Search | Click","Pagination Module",{itemName:e,searchQuery:a})};return(0,i.jsx)("div",{ref:d,children:(0,i.jsx)(F.Z,{useCustomLink:!0,currentPage:r,lastPage:f,nextLink:p?(0,i.jsx)(Q.default,{href:{pathname:"/[locale]/search/",query:{page:p,q:a,model:s}},as:"/".concat(l,"/search/?page=").concat(p,"&q=").concat(a,"&model=").concat(s),children:(0,i.jsx)("a",{className:"pagination-page__next-link",onClick:function(){return g("older")},children:m["grid-pagination.older"]})}):(0,i.jsx)(i.Fragment,{}),prevLink:h?(0,i.jsx)(Q.default,{href:{pathname:"/[locale]/search/",query:{page:h,q:a,model:s}},as:"/".concat(l,"/search/?page=").concat(h,"&q=").concat(a,"&model=").concat(s),children:(0,i.jsx)("a",{className:"pagination-page__prev-link",onClick:children:m["grid-pagination.newer"]})}):(0,i.jsx)(i.Fragment,{})})})},V=function(e){var t=e.siteName,n=e.description,r=e.title,a=e.language,o=e.q;return(0,i.jsx)(l.Z,{adLib:{template:"search",site:t,brand:t},pageType:"searchpage",description:n,shareDescription:n,title:r,shareTitle:r,children:(0,i.jsx)("div",{className:"search-page",children:(0,i.jsx)(P,{language:a,q:o})})})},J=n(70441),Y=n(66441);function H(e,t,n,r,a,i,o){try{var c=e[i](o),l=c.value}catch(s){return void n(s)}c.done?t(l):Promise.resolve(l).then(r,a)}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){U(e,t,n[t])}))}return e}var z,A=function(e){var t=e.rawData,n=e.language,r=e.currentModel,a=e.per_page,o=e.currentPage,c=e.q,l=e.title,s=e.setCurrentModel,u=m(t,n);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(R,{data:u,currentModel:r,setCurrentModel:s,title:l,language:n,q:c}),(0,i.jsx)(L,{currentPage:o||0,currentModel:r,q:c,language:n,data:u,per_page:a})]})},B=(z=a().mark((function e(t){var n,r,i,o,c,l,u,d,v,f,p;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.res.locals,r=n.siteName,i=n.geoLocale,o=t.query,c=o.page,l=void 0===c?1:c,u=o.q,d=void 0===u?"":u,v=l&&parseFloat(l),f={locale:i,per_page:12,q:d,site:r,page:v},e.next=8,(0,Y.Z)(t,s.b2.SearchPageFull,f);case 8:return p=e.sent,e.abrupt("return",{props:JSON.parse(JSON.stringify(X({},p,t.res.locals)))});case 12:return e.prev=12,e.t0=e.catch(0),console.error(e.t0),e.abrupt("return",{props:JSON.parse(JSON.stringify(X({error:e.t0},t.res.locals)))});case 16:case"end":return e.stop()}}),e,null,[[0,12]])})),(0,J.Z)((function(e){var t=(0,b.useRouter)().query,n=t.q,r=void 0===n?"":n,a=t.page,s=void 0===a?"1":a,d=t.model,v=void 0===d?"articles":d,f=t.locale,p=void 0===f?"en_us":f,h=(0,g.hS)().site,m=(0,x.T_)(),y=m.t("metadata.search-title",{_:"Search Results - ".concat(h.name),Site:null===h||void 0===h?void 0:h.display_name}),j=m.t("metadata.description",{"metadata.description":{_:"VICE is the definitive guide to enlightening information."}});(0,k.Z)("searchPageLoad",{locale:p,pageTitle:y,pageType:"search",vertical:h.name});var O=s&&parseFloat(s),w=(0,o.useState)(v),S=w[0],C=w[1];if(!r)return(0,i.jsx)(V,{title:y,description:j,q:r,language:p,siteName:h.name});var N=e.data,M=e.loading,q=e.error;return!q||N||M?(0,i.jsxs)(l.Z,{adLib:{template:"search",site:h.name,brand:h.name},pageType:"searchpage",description:j,shareDescription:j,title:y,shareTitle:y,children:[(0,i.jsx)(c.default,{children:(0,i.jsx)("meta",{name:"robots",content:"noindex"},"robots")}),(0,i.jsxs)("div",{className:"search-page",children:[(0,i.jsx)(P,{language:p,q:r}),M||!N||Object.keys(N).length<1?(0,i.jsx)(_,{}):(0,i.jsx)(A,{rawData:N,language:p,per_page:12,currentPage:O||0,q:r,currentModel:S,title:y,setCurrentModel:C})]})]}):(0,i.jsx)(u.default,{statusCode:q.statusCode||404})}))),K=!0,$=B},90021:function(e,t){"use strict";t.Z=function(e,t){return{itemIndex:t.toString(),itemName:e.title,linkTitle:e.title,linkDek:e.dek,linkUID:e.id,linkByline:e.byline,linkHeadline:e.title,linkType:e.type}}},66441:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r=n(28520),a=n.n(r),i=n(66192),o=n(27301),c=function(e){if(e)try{var t,n,r=[],a=e.getHeader("surrogate-key");a&&"undefined"!==typeof a&&(r=a.split(" ")),e.setHeader("surrogate-key",((null===(t=e.locals)||void 0===t||null===(n=t.surrogateKeys)||void 0===n?void 0:n.concat(r))||[]).join(" "))}catch(o){(0,i.sT)(e,500,"Could not set the surrogate keys.', ".concat(o))}};ar s,u=function(e){var t,n;return(null===(t=e.graphQLErrors)||void 0===t?void 0:t.some(())||404===(null===(n=e.networkError)||void 0===n?void 0:n.statusCode)},d=(s=a().mark((function e(t,n,r,l){var s,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=(0,o.R)({},t.req,t.res),e.next=4,s.query({query:n,variables:r,errorPolicy:l||"all"});case 4:return d=e.sent,c(t.res),e.abrupt("return",d);case 9:return e.prev=9,e.t0=e.catch(0),u(e.t0)?(0,i.sT)(t.res,404,e.t0,!0):(0,i.sT)(t.res,500,e.t0,!0),e.abrupt("return",{error:{message:e.t0.message,statusCode:t.res.statusCode}});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})),},50662:function(e,t,n){"use strict";n.d(t,{Z:);var r=n(85893),a=(n(67294),n(94184)),i=n.n(a),o=n(64933),c=n(36488);n(70227);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}ar u=function(e){var t=e.className,n=s(e,["className"]);return(0,r.jsx)(o.Z,{},n,{srcSetsConfig:c.Z,className:i()(["feed-card",t])}))};n(29151);r f=function(e){var t=e.className,n=e.items,a=e.rightSide;return(0,r.jsxs)("div",{className:i()(["feed",t]),children:[(0,r.jsx)("div",{className:"feed__list",children:(0,r.jsx)("ul",{children:n.map((function(e,t){if(e.id){var n=e;return(0,r.jsx)("li",{className:"feed__list__item feed__list__item--card",children:(0,r.jsx)(u,v({},n))},"feed_".concat(n.id))}return(0,r.jsx)("li",{className:"feed__list__item feed__list__item--other",children:e},"item_".concat(t))}))})}),a&&(0,r.jsx)("div",{className:"feed__right",children:a})]})}},29151:function(){},70227:function(){},44655:function(){},44894:11163:,);
//# sourceMappingURL=search-afd482391c0de478.js.map