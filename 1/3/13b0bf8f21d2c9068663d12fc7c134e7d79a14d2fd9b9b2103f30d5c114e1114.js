"use strict";ngular.module("config",[]).constant("ENV",{name:"prod",compileProviderDebugInfoEnabled:!1,itcBaseUrl:{"internal-prod":"https://itunesconnect.apple.com",prod:"https://itunesconnect.apple.com","debug-itms5":"https://ritms5-itunesconnect-debug.itunes.apple.com","debug-itms6":"https://ritms6-itunesconnect-debug.itunes.apple.com","debug-itms7":"https://ritms7-itunesconnect-debug.itunes.apple.com","debug-itms8":"https://ritms8-itunesconnect-debug.itunes.apple.com","debug-itms11":"https://ritms11-itunesconnect-debug.itunes.apple.com","debug-mr":"https://debug-itunesconnect-mr.itunes.apple.com","debug-st":"https://debug-itunesconnect-st.itunes.apple.com","debug-pv":"https://debug-itunesconnect-pv.itunes.apple.com","*":"https://r{environment}-itunesconnect.apple.com"},acBaseUrl:{"internal-prod":"https://appstoreconnect.itunes.apple.com",prod:"https://appstoreconnect.apple.com","debug-itms5":"https://itms5-appstoreconnect-debug.itunes.apple.com","debug-itms6":"https://itms6-appstoreconnect-debug.itunes.apple.com","debug-itms7":"https://itms7-appstoreconnect-debug.itunes.apple.com","debug-itms8":"https://itms8-appstoreconnect-debug.itunes.apple.com","debug-itms11":"https://itms11-appstoreconnect-debug.itunes.apple.com","debug-mr":"https://debug-appstoreconnect-mr.itunes.apple.com","debug-st":"https://debug-appstoreconnect-st.itunes.apple.com","debug-pv":"https://debug-appstoreconnect-pv.itunes.apple.com",mr:"https://appstoreconnect-mr.itunes.apple.com",st:"https://appstoreconnect-st.itunes.apple.com",pv:"https://appstoreconnect-pv.itunes.apple.com","*":"https://{environment}-appstoreconnect.apple.com"},olympusBaseUrl:"",authServiceUrl:{"internal-prod":"https://idmsa.apple.com/appleauth",prod:"https://idmsa.apple.com/appleauth","debug-mr":"https://idmsa.apple.com/appleauth","debug-st":"https://idmsa.apple.com/appleauth","debug-pv":"https://idmsa.apple.com/appleauth","*":"https://idmsauth-uat.corp.apple.com/appleauth"},authServiceKey:{"internal-prod":{"*":"e0b80c3bf78523bfe80974d320935bfa30add02e1bff88ec2166c6bd5a706c42"},prod:{"*":"e0b80c3bf78523bfe80974d320935bfa30add02e1bff88ec2166c6bd5a706c42"},"debug-mr":{"*":"e0b80c3bf78523bfe80974d320935bfa30add02e1bff88ec2166c6bd5a706c42"},"debug-st":{"*":"e0b80c3bf78523bfe80974d320935bfa30add02e1bff88ec2166c6bd5a706c42"},"debug-pv":{"*":"e0b80c3bf78523bfe80974d320935bfa30add02e1bff88ec2166c6bd5a706c42"},"*":{"*":"076c502588fa5f0a4b2424dbe98ac943d451d5859488a40904a56b12141dda33"}},createServiceUrl:{"internal-prod":"https://appleid.apple.com",prod:"https://appleid.apple.com","debug-mr":"https://appleid.apple.com","debug-st":"https://appleid.apple.com","debug-pv":"https://appleid.apple.com","*":"https://appleid-ut.corp.apple.com"},devPortalBaseUrl:{uat:"https://developerut.corp.apple.com",prod:"https://developer.apple.com"}}),Array.prototype.move=function(old_index,new_index){for(;old_index<0;)old_index+=this.length;for(;new_index<0;)new_index+=this.length;if(new_index>=this.length)for(var k=new_index-this.length;1+k--;)this.push(void 0);return this.splice(new_index,0,this.splice(old_index,1)[0]),this},window.deep=function(obj){if(obj){var args=Array.prototype.slice.call(arguments);if(obj=args.shift(),args.length<1)return obj;for(var len=(args=1===args.length?args[0].split("."):args).length,i=0;i<len;i++){if(!obj||!obj.hasOwnProperty(args[i]))return;if(obj=obj[args[i]],i===len-1)return obj}}},window.getUrlParameter=window.olympusApp=angular.module("olympusApp",["itc-footer","ui.router","ui.router.state.events","ngCookies","ngResource","ngSanitize","ngAnimate","itc-header","config","tidbits-spinner","tidbits-alertbox","tidbits-accordion","tidbits-modal","tidbits-dropdown","its-angular-logger","angulartics","angulartics.adobe.analytics","oc.lazyLoad"]),olympusApp.run(["BootService","LocalizationService",),olympusApp.run(["$state","SessionService","$transitions",function($state,sessionService,$transitions){$state.defaultErrorHandler(function(error){}),$transitions.onError({},function(transition){var error=transition.error();if(error&&error.detail.startsWith){var redirectStateName=error.detail.split(":")[1];if(error.detail.startsWith("redirect")&&redirectStateName!==transition.to().name)return redirectStateName.startsWith("/")?void(window.location.href=redirectStateName):("login"===redirectStateName&&sessionService.saveReturnToState(transition.to().name,transition.to().params),void $state.go(redirectStateName));error.detail.startsWith("compliance")&&(window.location.href="collect"!==redirectStateName&&"ofac-verify"!==redirectStateName?"/login?complianceState="+redirectStateName:"/compliance")}})}]),olympusApp.config(["its-angular-logger.defaultConfig","ENV",function(logger,baseHost){logger.enabled="dev"!==baseHost.name;baseHost="".concat(window.location.protocol,"//").concat(window.location.hostname);logger.loggingEndpoint="".concat(baseHost).concat("/WebObjects/iTunesConnect.woa/ra/ui/log")}]),olympusApp.factory("authHttpResponseInterceptor",["$q","$injector",function($q,$injector){return{response:responseError:function(rejection){var $state=$injector.get("$state");return 401!==rejection.status||rejection.config&&rejection.config.url&&rejection.config.url.match(/\/v1\/session$/)?401===rejection.status&&rejection.config&&"DELETE"===rejection.config.method?$state.go("login"):500===rejection.status&&(["providerNews","contractMessages","bindingRequest"].find(||(window.location=global_itc_path+"/wa/defaultError")):$state.$current.data&&$state.$current.data.authenticated&&$state.go("login"),$q.reject(rejection)}}}]),olympusApp.config(["$stateProvider","$urlRouterProvider","$controllerProvider","$compileProvider","$filterProvider","$provide","$httpProvider","$locationProvider","$sceDelegateProvider","ENV",function($stateProvider,loginParams,$controllerProvider,$compileProvider,$filterProvider,$provide,$httpProvider,$locationProvider,$sceDelegateProvider,ENV){$locationProvider.html5Mode({enabled:!0,requireBase:!1}),$sceDelegateProvider.resourceUrlWhitelist(["self","https://itc.mzstatic.com/itc/**"]),$compileProvider.debugInfoEnabled(ENV.compileProviderDebugInfoEnabled),olympusApp.register={controller:$controllerProvider.register,directive:$compileProvider.directive,filter:$filterProvider.register,factory:$provide.factory,service:$provide.service,constant:$provide.constant},loginParams.otherwise(,$stateProvider.state("main",{abstract:!0,resolve:{localization:["LocalizationService","$q",function(localizationService,$q){return localizationService.ready().then(function(l10n){return l10n},}]},template:"<div ui-view />"}).state("authenticated",{abstract:!0,parent:"main",resolve:{session:["$q","$state","SessionService","InterstitialsService","LocalizationService",function($q,$state,sessionService,interstitialsService,localizationService){return sessionService.loadSession().then(function(session){return localizationService.sendMissingKeys().then(function(){var interstitial=interstitialsService.getNextRequiredInterstitial(session);return interstitial&&interstitial.startsWith("compliance")?$q.reject(interstitial):null!==interstitial?$q.reject("redirect:"+interstitial):session})},function(error){return error.data&&error.data.errors&&error.data.errors[0]&&error.data.errors[0].links&&error.data.errors[0].links.see?$q.reject("redirect:"+error.data.errors[0].links.see):$q.reject("redirect:login")})}]},data:{authenticated:!0},template:"<div ui-view />"}).state("interstitial",{abstract:!0,parent:"main",resolve:{session:["$q","SessionService",function($q,sessionService){return sessionService.loadSession(!0).then(function(session){return session},function(error){return error.data&&error.data.errors&&error.data.errors[0]&&error.data.errors[0].links&&error.data.errors[0].links.see?$q.reject("redirect:"+error.data.errors[0].links.see):$q.reject("redirect:login")})}]},data:{authenticated:!0},template:"<div ui-view />"});loginParams="?targetUrl?targetPrefix?errorKey?module?hostname?failUrl?newsBinding?username?activationKey?login?providerName?subType?complianceState";[{name:"activate_account_ds",url:"/activation_ds?key?providerName?subType",templateUrl:"static/views/activate_account_ds.html",controller:"AccountCreationController as ctrl"},{name:"login",url:"/login"+loginParams,templateUrl:"static/views/login.html",controller:"LoginController as ctrl",data:{trackingConfig:{pageName:"iTC Login Page",channel:"iTC Main"}},onEnter:["SessionService",function(sessionService){sessionService.clearSessionCache()}]},{name:"logout",url:"/logout"+loginParams,data:{trackingConfig:{pageName:"iTC Logout Page",channel:"iTC Main"}},onEnter:["SessionService",,controller:].forEach(function(route){route.parent="main",$stateProvider.state(route)}),[{name:"home",url:"/",templateUrl:"static/views/homepage.html",controller:"homepageController",data:{trackingConfig:{pageName:"iTC Home Page",channel:"iTC Main"}},params:{isLogin:!1,module:null}}].forEach(function(route){route.parent="authenticated",$stateProvider.state(route)}),[{name:"agree_to_terms",url:"/agree_to_terms",templateUrl:"static/views/agree_to_terms.html",controller:"AgreeToTermsController as ctrl",data:{trackingConfig:{pageName:"iTC Agree to Terms Page",channel:"iTC Main"}}},{name:"verify_legal",url:"/verify_legal",templateUrl:"static/views/verify_legal.html",controller:"VerifyLegalController as ctrl",data:{trackingConfig:{pageName:"iTC Verify Legal Page",channel:"iTC Main"}}},{name:"apple_news_binding",url:"/apple_news_binding",templateUrl:"static/views/apple_news_binding.html",controller:"AppleNewsBindingController as ctrl",params:{bindingRequests:{array:!0,value:null}},data:{trackingConfig:{pageName:"iTC Apple New Binding Page",channel:"iTC Main"}}},{name:"return_to",url:"/return_to",template:"<div ui-view />",controller:"ReturnToController as ctrl",params:{isLogin:!1,module:null}},{name:"review_agree",url:"/review_agree",templateUrl:"static/views/review_agree.html",controller:"reviewAgreeController",data:{trackingConfig:{pageName:"Apple Developer Review and Agree",channel:"iTC Main"}}}].forEach(,$httpProvider.defaults.withCredentials=!0,$httpProvider.defaults.headers.common["X-Requested-With"]="olympus-ui",$httpProvider.interceptors.push("authHttpResponseInterceptor")}]),angular.element(document).ready(function(){bootstrapItcFooter(angular),angular.bootstrap(document,["olympusApp"])}),angular.module("olympusApp").run(["$templateCache",function($templateCache){$templateCache.put("static/views/activate_account_ds.html",'<div id="account-creation-container" ng-show="ctrl.showDsIframe"></div> <div ng-if="!ctrl.showDsIframe"> <div tidbits-modal displayed="ctrl.showInvalidExpired" bk-click-to-hide="false"> <div class="tb-modal__body"> <h1 ng-bind-html="::\'ITC.multipleProviderInterstitial.invitationInvalid.title\' | l10n"></h1> <p ng-if="isAsc" ng-bind-html="::\'ITC.multipleProviderInterstitial.invitationInvalid.text.asc\' | l10n:{\'contentProvider\' : activationData.contentProvider.name, \'username\' : activationData.username}"></p> <p ng-if="!isAsc" ng-bind-html="::\'ITC.multipleProviderInterstitial.invitationInvalid.text\' | l10n:{\'contentProvider\' : activationData.contentProvider.name, \'username\' : activationData.username}"></p> </div> <div class="tb-modal__footer"> <button class="tb-btn--primary" ng-click="ctrl.abort()" ng-bind="::\'ITC.OK.Button\' | l10n"></button> </div> </div> <div tidbits-modal displayed="ctrl.tooManyProviders" bk-click-to-hide="false"> <div class="tb-modal__body"> <h1 ng-bind-html="::\'ITC.multipleProviderInterstitial.maxProvidersReached.title\' | l10n"></h1> <p ng-bind-html="::\'ITC.multipleProviderInterstitial.maxProvidersReached.text\' | l10n:{\'contentProvider\' : activationData.contentProvider.name}"></p> </div> <div class="tb-modal__footer"> <button class="tb-btn--primary" ng-click="ctrl.abort()" ng-bind="::\'ITC.OK.Button\' | l10n"></button> </div> </div> <div tidbits-modal displayed="ctrl.invalidLink" bk-click-to-hide="false"> <div class="tb-modal__body"> <h1 ng-bind-html="::\'ITC.multipleProviderInterstitial.invalidLink.title\' | l10n"></h1> <p ng-bind-html="::\'ITC.multipleProviderInterstitial.invalidLink.text\' | l10n"></p> </div> <div class="tb-modal__footer"> <button class="tb-btn--primary" ng-click="ctrl.abort()" ng-bind="::\'ITC.OK.Button\' | l10n"></button> </div> </div> <div tidbits-modal displayed="ctrl.activationState == \'tos\'" bk-click-to-hide="false" class="tos tosm"> <div class="tb-modal__header" ng-bind="\'ITC.TermsOfService\' | l10n"></div> <div class="tb-modal__body"> <div class="account-activation-tos"> <p><strong ng-bind="\'ITC.ProductName\' | l10n"></strong></p> <div ng-bind-html="ctrl.termsOfServiceHtml"></div> </div> </div> <div class="tb-modal__footer"> <div class="tb-btn-group"> <div class="agreeCheckbox"> <input id="tosAgree" type="checkbox" ng-model="ctrl.activation.tosSigned"><label for="tosAgree" ng-bind="\'ITC.accountActivation.tos.agree\' | l10n"></label> </div> <div class="tb-btn-group"> <button class="tb-btn--alert" ng-click="ctrl.abort()" ng-bind="\'ITC.Reject.Button\' | l10n"></button> <button ng-click="ctrl.acceptTos()" ng-class="{\'tb-btn--primary\':ctrl.activation.tosSigned, \'tb-btn--disabled\':!ctrl.activation.tosSigned, \'tb-btn--primary--inprogress\':ctrl.inProgress == \'tos\'}" ng-bind="\'ITC.Accept.Button\' | l10n"></button> </div> </div> </div> </div> <div tidbits-modal displayed="ctrl.activationState == \'complete\'" bk-click-to-hide="false" class="done"> <div class="tb-modal__header" ng-bind-html="\'ITC.multipleProviderInterstitial.AccessActivated.title\' | l10n:{contentProvider: ctrl.activation.provider.name}"></div> <div class="tb-modal__body" ng-bind-html="\'ITC.multipleProviderInterstitial.AccessActivated.text\' | l10n:{contentProvider: ctrl.activation.provider.name}"></div> <div class="tb-modal__footer"> <div class="tb-btn-group"> <button class="tb-btn" ng-click="ctrl.goHome()" ng-bind="\'ITC.OK.Button\' | l10n"></button> </div> </div> </div> </div> '),$templateCache.put("static/views/agree_to_terms.html",'<div tidbits-modal bk-click-to-hide="false" displayed="true" class="tos tosm" auto-fit="true"> <div class="tb-modal__header" ng-bind="\'ITC.TermsOfService\' | l10n"></div> <div class="tb-modal__body"> <div class="tos-container"> <div ng-bind-html="ctrl.termsOfServiceHtml"></div> </div> </div> <div class="tb-modal__footer"> <div class="agree-checkbox"> <input id="tosAgree" type="checkbox" class="tb-form__input--custom" ng-model="ctrl.agreed"><label for="tosAgree" ng-bind="\'ITC.accountActivation.tos.agree\' | l10n"></label> </div> <div class="tb-btn-group"> <div class="tb-btn-group"> <button class="tb-btn--alert" ng-click="ctrl.abort()" ng-bind="\'ITC.Decline.Button\' | l10n"></button> <button ng-click="ctrl.accept()" ng-disabled="!ctrl.agreed" ng-class="{\n                        \'tb-btn--disabled\': !ctrl.agreed,\n                        \'tb-btn--primary\': ctrl.agreed,\n                        \'tb-btn--primary--inprogress\': ctrl.inProgress === \'accept\'\n                    }" ng-bind="\'ITC.Agree.Button\' | l10n"></button> </div> </div> </div> </div> '),$templateCache.put("static/views/apple_news_binding.html",'<div class="appleNewsBindingPage" ng-switch="ctrl.state"> <div ng-switch-when="SELECT_PROVIDER" tidbits-modal="modal" displayed="true" bk-click-to-hide="false"> <div class="tb-modal__header" ng-bind-html="\'ITC.LCFeldsparConfirmPage.header.title\' | l10n"></div> <div class="tb-modal__body"> <div class="tb-alertbox tb-alertbox--alert" ng-show="ctrl.errorMessage"> <div class="tb-alertbox__content" ng-bind-html="ctrl.errorMessage | l10n"></div> </div> <p ng-bind-html="\'ITC.multipleProviderInterstitial.SelectProvider\' | l10n"></p> <form name="ctrl.dsForm" class="tb-grid tb-grid--tight"> <select ng-model="ctrl.selectedProviderId" ng-options="provider.providerId as provider.name for provider in ctrl.appProviders" ng-required="true"> </select> </form> </div> <div class="tb-modal__footer"> <div class="tb-btn-group"> <button ng-bind="\'ITC.btn.select\' | l10n" class="tb-btn" ng-click="ctrl.submitProvider()" ng-class="{\'tb-btn--primary--inprogress\': ctrl.inProgress}"></button> </div> </div> </div> <div ng-switch-when="ERROR" tidbits-modal="modal" displayed="true" bk-click-to-hide="false"> <div class="tb-modal__header" ng-bind-html="\'ITC.LCFeldsparConfirmPage.header.title\' | l10n"></div> <div class="tb-modal__body"> <p ng-bind-html="ctrl.errorMessage | l10n:ctrl.locReplacements"></p> </div> <div class="tb-modal__footer"> <div class="tb-btn-group"> <button class="tb-btn" ng-click="ctrl.dismiss()" ng-bind="\'ITC.OK.Button\' | l10n"></button> </div> </div> </div> <div ng-switch-when="LEGAL" tidbits-modal="modal" displayed="true" bk-click-to-hide="false"> <div class="tb-modal__header" ng-bind-html="\'ITC.LCFeldsparConfirmPage.header.title\' | l10n"></div> <div class="tb-modal__body"> <p ng-bind-html="\'ITC.LCFeldsparConfirmPage.LegalUserText\' | l10n:ctrl.locReplacements"></p> </div> <div class="tb-modal__footer"> <div class="tb-btn-group"> <button class="tb-btn" ng-click="ctrl.dismiss()" ng-bind="\'ITC.OK.Button\' | l10n"></button> </div> </div> </div> <div ng-switch-when="NON_LEGAL" tidbits-modal="modal" displayed="true" bk-click-to-hide="false"> <div class="tb-modal__header" ng-bind-html="\'ITC.LCFeldsparConfirmPage.header.title\' | l10n"></div> <div class="tb-modal__body"> <p ng-bind-html="\'ITC.LCFeldsparConfirmPage.NonLegalUserText\' | l10n:ctrl.locReplacements"></p> </div> <div class="tb-modal__footer"> <div class="tb-btn-group"> <button class="tb-btn--alert" ng-click="ctrl.cancelRequest()" ng-bind="\'ITC.Cancel.Button\' | l10n"></button> <button class="tb-btn" ng-click="ctrl.submitRequest()" ng-class="{\'tb-btn--primary--inprogress\':ctrl.inProgress == \'submit\'}" ng-bind="\'ITC.btn.submit\' | l10n"> </button> </div> </div> </div> <div ng-switch-when="NON_LEGAL_PENDING" tidbits-modal="modal" displayed="true" bk-click-to-hide="false"> <div class="tb-modal__header" ng-bind-html="\'ITC.LCFeldsparConfirmPage.header.title\' | l10n"></div> <div class="tb-modal__body"> <p ng-bind-html="\'ITC.LCFeldsparConfirmPage.NonLegalUserPendingRequestText\' | l10n:ctrl.locReplacements"></p> </div> <div class="tb-modal__footer"> <div class="tb-btn-group"> <button class="tb-btn" ng-click="ctrl.dismiss()" ng-bind="\'ITC.OK.Button\' | l10n"></button> </div> </div> </div> <div ng-switch-when="CONFIRM" tidbits-modal="modal" displayed="true" bk-click-to-hide="false"> <div ng-if-start="ctrl.submitState == \'SUBMITTED\'" class="tb-modal__header" ng-bind-html="\'ITC.LCFeldsparConfirmPage.requestSent.Title\' | l10n"></div> <div ng-if-end class="tb-modal__body"> <p ng-bind-html="\'ITC.LCFeldsparConfirmPage.requestSent.Text\' | l10n:ctrl.locReplacements"></p> </div> <div ng-if-start="ctrl.submitState == \'CANCELED\'" class="tb-modal__header" ng-bind-html="\'ITC.LCFeldsparConfirmPage.requestCanceled.Title\' | l10n"></div> <div ng-if-end class="tb-modal__body"> <p ng-bind-html="\'ITC.LCFeldsparConfirmPage.requestCanceled.Text\' | l10n:ctrl.locReplacements"></p> </div> <div ng-if-start="ctrl.submitState == \'ERROR\'" class="tb-modal__header" ng-bind-html="\'ITC.LCFeldsparConfirmPage.requestFailed.Title\' | l10n"></div> <div ng-if-end class="tb-modal__body"> <p ng-bind-html="\'ITC.LCFeldsparConfirmPage.requestFailed.Text\' | l10n:ctrl.locReplacements"></p> </div> <div class="tb-modal__footer"> <div class="tb-btn-group"> <button class="tb-btn" ng-click="ctrl.dismiss()" ng-bind="\'ITC.OK.Button\' | l10n"></button> </div> </div> </div> </div> '),$templateCache.put("static/views/directives/dev_info_header.html",'<div id="dev-info-container" ng-if="olympusRuntimeInfo || labelRuntimeInfo || devLocaleAvailableLocales"> <div id="dev-info"> <span class="tb-icon--gear-outline-small"></span> <section ng-show="olympusRuntimeInfo"> <h6>Olympus</h6> <span id="olympus-environment" ng-bind="olympusRuntimeInfo.environment"></span> <span id="olympus-build-version" ng-bind="olympusRuntimeInfo.buildVersion"></span> </section> </div> </div> '),$templateCache.put("static/views/homepage.html",'<div class="tb-grid tb-grid--no-gutters tb-grid--tight"> <div id="homepage-container" class="tb-col--small-20"> <div class="tb-row" id="news-warnings-alerts-container"> <div class="tb-row" ng-show="hasHolidayAlerts" id="holiday-alert"> <div ng-repeat="holidayAlert in holidayAlerts" class="warning-item"> <h6 ng-bind-html="::holidayAlert.subject" class="alertHeader"></h6> <div class="alertMsg"><span ng-bind-html="::holidayAlert.message"></span></div> </div> </div> <div class="tb-row" ng-show="hasInfoMessages" id="infoMessages"> <div class="tb-alertbox tb-alertbox--info"><span class="tb-icon--info-filled"></span> <div class="tb-alertbox__content"> <div ng-repeat="infoMessage in infoMessages" class="info-item"> <span ng-bind-html="::infoMessage.message" class="infoMsg"></span> </div> </div> </div> </div> <div class="tb-row" ng-show="hasAlerts" id="alerts"> <tidbits-alertbox class="tb-alertbox--warn" close-btn="false"> <div ng-repeat="alert in alerts" class="alert-item"> <h6 ng-bind-html="::alert.subject" class="alertHeader"></h6> <span ng-bind-html="::alert.message" class="alertMsg"></span> </div> </tidbits-alertbox> </div> <div class="tb-row" ng-show="hasWarnings" id="warnings"> <tidbits-alertbox class="tb-alertbox--alert" close-btn="false"> <div ng-repeat="warning in warnings" class="warning-item"> <span ng-bind-html="::warning.message" class="alertMsg"></span> </div> </tidbits-alertbox> </div> <div class="tb-row" ng-show="hasNews"> <div id="news" class="homepage-msg-container tb-col--small-24"> <h1 ng-bind-html="\'ITC.HomePage.news.sectionHeader\' | l10n"></h1> <ul class="tb-list--no-bullet"> <li ng-repeat="newsitem in news | limitTo:2" class="news-item"> <h6 ng-bind-html="::newsitem.subject"></h6> <div ng-bind-html="::newsitem.message"></div> </li> <span ng-show="news.length > 2"> <tidbits-accordion toggle-text="toggleArrayValues"> <li ng-repeat="newsitem in news | slice:2" class="news-item"> <h6 ng-bind-html="::newsitem.subject"></h6> <div ng-bind-html="::newsitem.message"></div> </li> </tidbits-accordion> </span> </ul> </div> </div> </div> <div class="tb-row"> <div ng-include="\'static/views/main_nav_modules.html\'" class="homepageWrapper tb-col--small-24"></div> </div> </div> </div> '),$templateCache.put("static/views/login.html",' <div id="developer-welcome" ng-if="ctrl.loginStyle === \'developer\' && !ctrl.is2faError && !ctrl.isOnAuthWidget" class="developer-theme canary"> <h2 ng-bind="\'ITC.Developer.Login.Header\' | l10n" class="typography-hero-headline"></h2> <div ng-if="ctrl.providerName && (ctrl.subType === providerSubTypeCompanyString || ctrl.subType === providerSubTypeInternalString)" ng-bind="\'ITC.Developer.Login.Description\' | l10n:{PROVIDER: ctrl.providerName}" class="typography-intro"> </div> <div ng-if="ctrl.providerName && ctrl.subType === providerSubTypeAdepString" ng-bind="\'ITC.Developer.Login.Description.Adep\' | l10n:{PROVIDER: ctrl.providerName}" class="typography-intro"> </div> <div ng-if="ctrl.providerName && ctrl.subType === providerSubTypeEduString" ng-bind="\'ITC.Developer.Login.Description.Edu\' | l10n:{PROVIDER: ctrl.providerName}" class="typography-intro"> </div> <div ng-if="!ctrl.providerName" ng-bind-html="\'ITC.Developer.Login.Description.NoProviderName\' | l10n" class="typography-intro"> </div> </div> <div id="idms-auth-container-wrapper"> <div id="idms-auth-container" ng-class="{\'has-errors\': errorKey}"></div> </div> <div ng-if="ctrl.showLearnMorePanel && ctrl.loginStyle !== \'asc\' && ctrl.loginStyle !== \'developer\'" ng-switch on="ctrl.loginStyle" id="learn-more-panel"> <div ng-switch-when="itc"> <h1 ng-bind-html="\'ITC.Login.Bottom.h1\' | l10n"></h1> <div class="subtext"></div> <div class="learn-more-link"> <a ng-href="{{\'ITC.Login.Bottom.LearnMoreLink.url\' | l10n}}" ng-bind-html="\'ITC.Login.Bottom.LearnMoreLink\' | l10n"></a> <span class="ico icon-chevron-right"></span> </div> </div> </div> <div class="compliance-modal"> <div tidbits-modal displayed="ctrl.showComplianceModal" bk-click-to-hide="false"> <div class="tb-modal__body"> <h2 ng-if="ctrl.complianceState === \'inReview\'" ng-bind="\'ITC.Login.ofac.complianceState.inReview.title\' | l10n"></h2> <h2 ng-if="ctrl.complianceState === \'sanctioned\'" ng-bind="\'ITC.Login.ofac.complianceState.sanctioned.title\' | l10n"></h2> <p ng-if="ctrl.complianceState === \'inReview\'" ng-bind-html="\'ITC.Login.ofac.complianceState.inReview.text\' | l10n"></p> <p ng-if="ctrl.complianceState === \'sanctioned\'" ng-bind-html="\'ITC.Login.ofac.complianceState.sanctioned.text\' | l10n"></p> </div> <div class="tb-modal__footer"> <button class="tb-btn--primary" ng-click="ctrl.showComplianceModal = false" ng-bind="\'ITC.OK.Button\' | l10n"></button> </div> </div> </div> <div class="login-error-modal" id="login-modal"> <div tidbits-modal displayed="ctrl.showLoginError" bk-click-to-hide="false"> <div class="tb-modal__body"> <h3 class="login-modal-header" ng-if="ctrl.is2faError" ng-bind="\'ITC.Login.TFARequired\' | l10n"></h3> <p id="itc-error-container-msg" class="login-error-msg" ng-if="ctrl.errorKey" ng-bind-html="ctrl.errorKey | l10n"></p> </div> <div class="tb-modal__footer" ng-if="ctrl.loginStyle !== \'developer\'"> <a ng-if="ctrl.errorKey === \'ITC.signin.error.invalidLogin.require2sv\' && ctrl.loginStyle !== \'asc\'" class="tb-btn--secondary" href="https://support.apple.com/en-us/HT204915" target="_blank" ng-bind="\'ITC.Login.LearnMore\' | l10n"></a> <a ng-if="ctrl.errorKey === \'ITC.signin.error.invalidLogin.require2sv\'&& ctrl.loginStyle === \'asc\'" class="tb-btn--secondary" href="https://developer.apple.com/support/authentication/" target="_blank" ng-bind="\'ITC.Login.LearnMore\' | l10n"></a> <button class="tb-btn--primary" ng-click="ctrl.showLoginError = false" ng-bind="\'ITC.OK.Button\' | l10n"></button> </div> <div class="tb-modal__footer" ng-if="ctrl.loginStyle === \'developer\' && ctrl.is2faError"> <a class="tb-btn--secondary" href="https://developer.apple.com/support/authentication/" ng-bind="\'ITC.Login.LearnMore\' | l10n"></a> <a class="tb-btn--primary primary-link" href="https://appleid.apple.com" ng-bind="\'ITC.Login.UpgradeNow\' | l10n"></a> </div> </div> </div> '),$templateCache.put("static/views/main_nav_modules.html",'<div role="menu" id="main-nav" class="tb-grid--no-gutters"> <div class="tb-row" ng-repeat="row in mainNavigationRows"> <div ng-repeat="nav in ::mainNavigation | limitTo: modulesPerRow : (modulesPerRow * row)" role="menuitem" ng-class="{current: currentclass === nav.section, down: nav.down === true}" class="main-nav-item tb-col--small-24 tb-col--medium-12 tb-col--large-6"> <a ng-if="!nav.down" ng-href="{{::nav.url}}" ng-attr-target="{{(nav.isNewWindow) ? \'_blank\' : \'_self\'}}"> <div class="icon-wrapper"> <div ng-if="nav.notificationCount !== undefined && nav.notificationCount > 0" class="ticket-count" ng-bind="nav.notificationCount"> </div> <img ng-src="{{ nav.iconUrl }}"> </div> <div class="main-nav-label" ng-bind-html="nav.titlelocKey | l10n"></div> </a> </div> </div> </div> '),$templateCache.put("static/views/podcasts_connect.html",'<div tidbits-modal bk-click-to-hide="false" displayed="true" class="tos tosm"> <div class="tb-modal__header" ng-bind="\'ITC.TermsOfService\' | l10n"></div> <div class="tb-modal__body"> <div class="tos-container"> <div ng-bind-html="ctrl.termsOfServiceHtml"></div> </div> </div> <div class="tb-modal__footer"> <div class="agree-checkbox"> <input id="tosAgree" type="checkbox" class="tb-form__input--custom" ng-model="ctrl.agree"><label for="tosAgree" ng-bind="\'ITC.accountActivation.tos.agree\' | l10n"></label> </div> <div class="tb-btn-group"> <div class="tb-btn-group"> <button class="tb-btn--alert" ng-click="ctrl.abort()" ng-bind="\'ITC.Decline.Button\' | l10n"></button> <button ng-click="ctrl.accept()" ng-class="{\'tb-btn--primary\':ctrl.agree, \'tb-btn--disabled\':!ctrl.agree, \'tb-btn--primary--inprogress\':ctrl.inProgress == \'accept\'}" ng-bind="\'ITC.Accept.Button\' | l10n"></button> </div> </div> </div> </div> '),$templateCache.put("static/views/review_agree.html",'<div id="review-agree"> <section class="section section-review-agree"> <div class="section-content"> <div class="row"> <div class="column large-8 medium-12 large-centered text-center"> <div ng-show="!isExistingASCUser"> <h2 ng-bind-html="\'ITC.Developer.Login.ReviewAgree.ReviewAndAgree.title\' | l10n"></h2> <div ng-show="providerType === providerSubTypeCompanyString || providerType === providerSubTypeInternalString" class="typography-intro" ng-bind-html="\'ITC.Developer.Login.ReviewAgree.ReviewAndAgree.intro\' | l10n:{ providerName: providerName }"></div> <div ng-show="providerType === providerSubTypeEduString" class="typography-intro" ng-bind-html="\'ITC.Developer.Login.ReviewAgree.ReviewAndAgree.intro.Edu\' | l10n:{ providerName: providerName }"></div> <div ng-show="providerType === providerSubTypeAdepString" class="typography-intro" ng-bind-html="\'ITC.Developer.Login.ReviewAgree.ReviewAndAgree.intro.Adep\' | l10n:{ providerName: providerName }"></div> </div> <div ng-show="isExistingASCUser && (providerType === providerSubTypeCompanyString || providerType === providerSubTypeInternalString)"> <h2 ng-bind-html="\'ITC.Developer.Login.ReviewAgree.BecomeDeveloper.title\' | l10n"></h2> <div class="typography-intro" ng-bind-html="\'ITC.Developer.Login.ReviewAgree.BecomeDeveloper.intro\' | l10n"></div> </div> </div> </div> <div class="row"> <div class="column large-12 form-checkbox"> <h3 ng-bind-html="\'ITC.Developer.Login.ReviewAgree.EmailPreference.title\' | l10n"></h3> <p> <input type="checkbox" id="emailOptIn" ng-model="formData.emailOptIn" ng-disabled="submitting" class="form-checkbox-input" style="display:none"> <label class="form-label" for="emailOptIn"><span class="form-checkbox-indicator"></span><span ng-bind-html="\'ITC.Developer.Login.ReviewAgree.EmailPreference.label\' | l10n"></span></label> </p> </div> </div> <div class="row"> <div class="column large-12"> <h3 ng-bind-html="\'ITC.Developer.Login.ReviewAgree.AppleDeveloperAgreement.title\' | l10n"></h3> <p class="download-link typography-body-reduced" ng-bind-html="\'ITC.Developer.Login.ReviewAgree.AppleDeveloperAgreement.downloadPDFLink\' | l10n"></p> <p class="typography-body-reduced" ng-bind-html="\'ITC.Developer.Login.ReviewAgree.AppleDeveloperAgreement.text\' | l10n"></p> <div class="agreement-container"> <div ng-bind-html="agreementHtml"></div> </div> <div class="form-checkbox"> <input type="checkbox" id="radAgree" ng-model="formData.radAgree" ng-disabled="submitting" class="form-checkbox-input" style="display:none"> <label class="form-label" for="radAgree"> <span class="form-checkbox-indicator"></span> <span ng-bind-html="\'ITC.Developer.Login.ReviewAgree.AppleDeveloperAgreement.label\' | l10n"></span> </label> </div> <div class="form-buttons"> <button class="button button-secondary form-button" ng-disabled="submitting" ng-class="{\'disabled\':submitting}" ng-click="cancel()" ng-bind="\'ITC.btn.cancel\' | l10n"></button> <button class="button form-button" ng-disabled="(!formData.radAgree || submitting)" ng-class="{\'disabled\':(!formData.radAgree || submitting)}" ng-click="agree()" ng-bind="\'ITC.Agree.Button\' | l10n"></button> </div> </div> </div> </div> </section> </div> '),$templateCache.put("static/views/verify_legal.html",'<div tidbits-modal="modal" displayed="true" bk-click-to-hide="false"> <div class="tb-modal__header" ng-bind-html="\'ITC.LCLegalUserCertificationPage.header.title\' | l10n"></div> <div class="tb-modal__body"> <div class="tb-alertbox tb-alertbox--alert" ng-show="ctrl.errorMessage"> <div class="tb-alertbox__content" ng-bind-html="ctrl.errorMessage | l10n"></div> </div> <p ng-bind-html="\'ITC.LCLegalUserCertificationPage.message.confirmation\' | l10n:{contentprovidername: ctrl.itcUser.provider.name, fullname: ctrl.itcUser.user.fullName}"></p> </div> <div class="tb-modal__footer"> <div class="tb-btn-group"> <button ng-bind="\'ITC.Reject.Button\' | l10n" ng-click="ctrl.reject()" ng-class="{\'tb-btn--alert-quiet\': ctrl.inProgress != \'reject\', \'tb-btn--primary--inprogress\': ctrl.inProgress == \'reject\'}"></button> <button ng-bind="\'ITC.Confirm.Button\' | l10n" class="tb-btn" ng-click="ctrl.accept()" ng-class="{\'tb-btn--primary--inprogress\':ctrl.inProgress == \'accept\'}"></button> </div> </div> </div> ')}]);var pageWrapperController=function($window,$scope,$rootScope,$q,bootService,olympusServices,$location,$sce,ENV,$timeout,$state,$cookies,localizationService,pageService,sessionService){$rootScope.itcString="itc",$rootScope.ascString="asc",$rootScope.developerString="developer",$rootScope.providerSubTypeCompanyString="COMPANY",$rootScope.providerSubTypeAdepString="ADEP",$rootScope.providerSubTypeEduString="EDU",$rootScope.providerSubTypeIndividualString="INDIVIDUAL",$rootScope.providerSubTypeInternalString="INTERNAL",$rootScope.TFAErrorKey="ITC.signin.error.invalidLogin.require2sv",$rootScope.TFAErrorKeyDeveloper="ITC.signin.error.invalidLogin.require2sv.developer";var self=this,baseHost=location.protocol+"//"+location.hostname;self.pageSpinnerDisplayed=!0,self.locReady=!1,$scope.title="iTunes Connect",$scope.isAsc=!1;$scope.helpMenu={id:"itc-help-control",type:"list",align:"right",visible:!0,selectFirstDropdownItem:!0,firstMenuItemAsHeader:!0,lastMenuItemAsFooter:!0,disableSelectionDownArrow:!0,selectedFormat:function(){return'<span class="tb-icon--help"></span>'},onSelection:,$scope.userProfile={id:"itc-user-profile-controls",visible:!1,template:"userProfile",bodyTemplate:"multiProvider",userIsAuthenticated:!1,fullName:null,userName:null,userId:null,dsId:null,signInText:null,signInUrl:"/login",signOutUrl:"/logout",signOutText:null,personalDetailsTitle:null,personalDetailsLinkUrl:null,onSelection:function(item){return item&&item.id&&$scope.$apply(,!0},onAuthSelection:function(){return $scope.$apply(,!0}},self.enableDeveloperHeader=function(){$scope.title="Apple Developer";var logo=document.querySelector("#itc-logo-js a");logo&&(logo.className="itc-logo-dev",logo.setAttribute("title","Apple Developer"),logo.innerHTML="Apple Developer")},self.disableDeveloperHeader=function(){var logo=document.querySelector("#itc-logo-js a");logo&&($scope.isAsc?(logo.className="itc-logo-alt",logo.setAttribute("title","App Store Connect"),logo.innerHTML="App Store Connect",$scope.title="App Store Connect"):(logo.className="itc-logo",logo.setAttribute("title","iTunes Connect"),logo.innerHTML="iTunes Connect",$scope.title="iTunes Connect"))},self.defaultUserProfile=angular.copy($scope.userProfile),pageService.getIsAsc()?($scope.isAsc=!0,$scope.title="App Store Connect",$scope.itcHeaderLogo='<a title="App Store Connect" class="itc-logo-alt" href="'+baseHost+'">App Store Connect</a>'):$scope.itcHeaderLogo='<a class="itc-logo" title="iTunes Connect" href="'+baseHost+'">iTunes Connect</a>',$scope.itcHeaderComponents=[$scope.helpMenu,$scope.userProfile],localizationService.ready().then(function(){self.footerConfig={text:{copyright:localizationService.interpolate("ITC.HeaderFooter.Copyright.withSymbol"),rights:localizationService.interpolate("ITC.HeaderFooter.Copyright.AppleRightsReserved"),done:localizationService.interpolate("ITC.Done.Button"),tosHeader:localizationService.interpolate("ITC.TermsOfService"),year:(new Date).getFullYear()},links:[{text:localizationService.interpolate("ITC.HeaderFooter.termsOfServiceLinkText"),url:pageService.getIsAsc()?"/olympus/v1/terms/ASC":"/olympus/v1/terms/ITC"},{text:localizationService.interpolate("ITC.HeaderFooter.PrivacyPolicyLinkText"),url:localizationService.interpolate("ITC.PrivacyPolicyLink")},{text:localizationService.interpolate("ITC.HeaderFooter.ContactUsLinkText"),url:pageService.getIsAsc()?"https://developer.apple.com/contact":"/contact-us"}]};var subType=window.getUrlParameter("subType"),isDev2faError=window.getUrlParameter("errorKey")===$rootScope.TFAErrorKeyDeveloper;subType===$rootScope.providerSubTypeAdepString?self.devHeaderWelcome=localizationService.interpolate("ITC.Developer.Login.Welcome.Adep"):subType===$rootScope.providerSubTypeEduString?self.devHeaderWelcome=localizationService.interpolate("ITC.Developer.Login.Welcome.Edu"):self.devHeaderWelcome=localizationService.interpolate("ITC.Developer.Login.Welcome"),self.showDevHeaderWelcome=!isDev2faError,self.locReady=!0},function(){self.locReady=!1}),self.changeProvider=self.changeActorProvider=function(provider){var existingProvider=sessionService.getCurrentActorsProvider(),providerInfo=sessionService.actorsApi().isProviderForSite(provider);(providerInfo&&provider.id!==existingProvider.provider.id||!providerInfo)&&(self.pageSpinnerDisplayed=!0,providerInfo={providerId:provider.id,providerType:provider.providerType,providerName:provider.name},sessionService.actorsApi().updateWorkerWithProvider(providerInfo),sessionService.actorsApi().handleProviderRedirect(provider)||sessionService.switchActorProvider(providerInfo).then(function(){sessionService.getActors(!0).then(function(actorRes){sessionService.loadSession(!0).then(function(session){self.configureUserProfile(session,actorRes),window.location.reload()})})}))},self.formatProviders=function(userData){if(userData.provider){var providers;if(userData&&userData.availableProviders&&angular.isArray(userData.availableProviders))return providers=angular.copy(userData.availableProviders),providers=_.sortBy(providers,function(provider){return provider&&provider.name?provider.name.toLowerCase():""}),_.forEach(providers,function(provider,key){provider.providerId===userData.provider.providerId&&providers.move(key,0)}),providers.map(;throw new Error("Expected providers to be an array")}},self.configureUserProfile=function(userData,adpModule){var dsId,userProfile=sessionService.actorsApi().formatProviders(adpModule),user=userProfile.user,allProviders=userProfile.allProviders,providersByType=userProfile.providersByType,accountModule=userProfile.provider;userData&&userData.provider&&user&&user.firstName&&user.lastName&&accountModule&&(dsId=window.deep(userData,"user.prsId"),adpModule=allProviders,(userProfile=$scope.userProfile).providersByType=providersByType,userProfile.allProviders=allProviders,userProfile.firstName=user.firstName,userProfile.lastName=user.lastName,userProfile.selectedItem=accountModule,userProfile.menuItems=adpModule,userProfile.fullName=userData.user.fullName,userProfile.userName=userData.user.emailAddress,userProfile.userId=userData.userId,userProfile.dsId=dsId,userProfile.signOutText=localizationService.interpolate("ITC.HeaderFooter.SignoutLinkText"),accountModule=userData.modules.find(function(module){return"Account"===module.key}),adpModule=userData.modules.find(function(module){return"ManageDeveloperUsers"===module.key||"ManageEnterpriseUsers"===module.key}),-1<userData.provider.contentTypes.indexOf("SOFTWARE")&&userData.publicUserId&&(accountModule||adpModule)?(userProfile.publicUserId=userData.publicUserId,userProfile.personalDetailsLinkUrl=(accountModule||adpModule).url+"/"+userData.publicUserId+"/settings"):userProfile.personalDetailsLinkUrl=window.global_itc_path+"/ra/ng/users_roles/"+dsId,userProfile.personalDetailsTitle=localizationService.interpolate("ITC.HeaderFooter.PersonalDetailsLinkText"),userProfile.userIsAuthenticated=!0,$scope.userProfile.visible=!0)},sessionService.onLoad(function(){var session=sessionService.getSession();sessionService.getActors(!0).then(,session.provider&&session.provider.subType===$rootScope.providerSubTypeAdepString?self.devHeaderWelcome=localizationService.interpolate("ITC.Developer.Login.Welcome.Adep"):session.provider&&session.provider.subType===$rootScope.providerSubTypeEduString?self.devHeaderWelcome=localizationService.interpolate("ITC.Developer.Login.Welcome.Edu"):self.devHeaderWelcome=localizationService.interpolate("ITC.Developer.Login.Welcome"),self.showDevHeaderWelcome=!("ITC"===session.backingType&&sessionService.hasSignedTerms($scope.session)),session.helpLinks&&pageService.setHelpLinks(session.helpLinks)}),$scope.userProfile.userIsAuthenticated=!1,self.makeHelpItems=function(helpLinks){return helpLinks.map(function(item,index){return item.title=localizationService.interpolate("ITC.HomePage.Resources.LinkText."+item.key),item.linkUrl=item.url,item.id=index,item})},self.updatePageState=function(){$scope.wrapperClasses=pageService.getWrapperClasses(),$scope.darkFooter=pageService.getDarkFooter(),$scope.includeFooter=pageService.getIncludeFooter(),$scope.includeHeader=pageService.getIncludeHeader(),$scope.includeDevFooter=pageService.getIsDeveloperTheme(),$scope.helpMenu.menuItems=self.makeHelpItems(pageService.getHelpLinks()),pageService.getIsDeveloperTheme()?self.enableDeveloperHeader():self.disableDeveloperHeader(),$scope.getVisibleControls()},self.hasMenuItems=$scope.getVisibleControls=function(){var showUserProfile=self.hasMenuItems($scope.userProfile),showHelp=self.hasMenuItems($scope.helpMenu);$scope.userProfile.visible=showUserProfile,$scope.helpMenu.visible=showHelp},pageService.onChange(self.updatePageState);var loaderTimeout=null;bootService.listen(function(busy){busy?(loaderTimeout=$timeout(500),pageService.setPageReady(!1)):(loaderTimeout&&($timeout.cancel(loaderTimeout),loaderTimeout=null),pageService.onChange(self.updatePageState),self.pageSpinnerDisplayed=!1,pageService.setPageReady(!0)),self.pageReady=pageService.getPageReady()})};olympusApp.controller("pageWrapperController",["$window","$scope","$rootScope","$q","BootService","olympusServices","$location","$sce","ENV","$timeout","$state","$cookies","LocalizationService","PageService","SessionService",pageWrapperController]),olympusApp.service("StandardUtilitiesService",function(){return{keyValuesToQueryString:function(){var keyValueData=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},validKeys=new Set(1<arguments.length&&void 0!==arguments[1]?arguments[1]:[]),qry=Object.keys(keyValueData||{}).reduce(function(acc,key){return validKeys.has(key)&&acc.push("".concat(key,"=").concat(encodeURIComponent(keyValueData[key]))),acc},[]);return 0<qry.length?"?".concat(qry.join("&")):""}}}),olympusApp.service("olympusServices",["$q","$http","ENV","$location","$cookies","StandardUtilitiesService",function($q,$http,ENV,$location,$cookies,StandardUtilitiesService){function _itcBaseUrl2(){var env,url;return null===_itcBaseUrl&&(env=_environment2(),url=/appstoreconnect/.test($location.host())?ENV.acBaseUrl[env]||ENV.acBaseUrl["*"]:ENV.itcBaseUrl[env]||ENV.itcBaseUrl["*"],_itcBaseUrl=url.replace(/\{environment\}/,env)),_itcBaseUrl}ar _environment=null,_environment2=function(){return _environment=null===_environment?ENV.environment||(/ritms\d+\-itunesconnect.apple.com/.test($location.host())?$location.host().split("-")[0].substring(1):/itms\d+\-appstoreconnect.apple.com/.test($location.host())?$location.host().split("-")[0]:/(origin-)?itunesconnect.apple.com/.test($location.host())?"prod":/(origin-)?appstoreconnect.itunes.apple.com/.test($location.host())?"internal-prod":/(origin-)?appstoreconnect.apple.com/.test($location.host())?"prod":/debug-appstoreconnect-[^.]*.itunes.apple.com/.test($location.host())?"debug-"+$location.host().split("-")[2].split(".")[0]:/appstoreconnect-[^.]*.itunes.apple.com/.test($location.host())?$location.host().split("-")[2].split(".")[0]:/debug-itunesconnect-[^.]*.itunes.apple.com/.test($location.host())?"debug-"+$location.host().split("-")[2].split(".")[0]:$cookies.get("itc_dev_env")||"itms8"):_environment},_itcBaseUrl=null,_authServiceUrl=null,_createServiceUrl=null,_authServiceKey=null;return{missingCountryErrorString:"ITC.OFAC.Modal.activation.missing.country.text",locales:environment:isQaEnvironment:isUatEnvironment:olympusBaseUrl:_olympusBaseUrl,itcBaseUrl:_itcBaseUrl2,mzLabelBaseUrl:authServiceUrl:function(){return null===_authServiceUrl&&(env=_environment2(),_authServiceUrl=ENV.authServiceUrl[env]||ENV.authServiceUrl["*"]),_authServiceUrl;var env},createServiceUrl:function(){return null===_createServiceUrl&&(env=_environment2(),_createServiceUrl=ENV.createServiceUrl[env]||ENV.createServiceUrl["*"]),_createServiceUrl;var env},authServiceKey:function(site){var keys_for_env;return null===_authServiceKey&&(keys_for_env=_environment2(),keys_for_env=ENV.authServiceKey[keys_for_env]||ENV.authServiceKey["*"],_authServiceKey=keys_for_env[site]||keys_for_env["*"]),_authServiceKey},checkRealm:function(){return $http.get(_olympusBaseUrl()+"/v1/check")},fetchDataCenterCookie:function(){return $http.get(_itcBaseUrl2()+"/access/dc").then(function(response){return response}).catch(function(error){return $q.reject(error)})},updateSession:function(userSession){return $http.post(_olympusBaseUrl()+"/v1/session",userSession)},loadProviderNews:function(){return $http.get(_olympusBaseUrl()+"/v1/providerNews").then(function(response){return response},function(error){return error})},loadContractMessages:function(){return $http.get(_olympusBaseUrl()+"/v1/contractMessages").then(function(response){return response},function(error){return error})},loadActivation:function(key,dsId,providerId){return $http.get(_olympusBaseUrl()+"/v1/activations/"+providerId+"/"+dsId,{params:{key:key}})},updateActivation:function(key,activationObject){return $http.put(_olympusBaseUrl()+"/v1/activations/"+activationObject.provider.providerId+"/"+activationObject.dsid,activationObject,{params:{key:key}})},getActivation:function(activationKey){return $http.get("".concat(_olympusBaseUrl(),"/v1/activations/").concat(activationKey))},putActivation:function(activationKey){return $http.post("".concat(_olympusBaseUrl(),"/v1/activations/").concat(activationKey,"/update"))},putActivationErrorRedirectLocation:function(errorString,olympusPath,queryString){errorString=_.get(errorString,"data.errorString");if(void 0===errorString)throw new Error("[olympus] Error payload is not valid.");if(errorString!==this.missingCountryErrorString)return"".concat(olympusPath,"?errorKey=").concat(errorString);queryString=StandardUtilitiesService.keyValuesToQueryString(queryString,["key","providerName","subType"]);return"/compliance/fixCountry".concat(queryString)},loadHelpLinks:function(isAsc){return $http.get(_olympusBaseUrl()+"/v1/links/help/"+(isAsc?"appstore-connect":"itunes-connect"),{cache:!0}).then(function(response){return response},function(error){return error})},loadItcUser:function(prsId){return $http.get(_olympusBaseUrl()+"/v1/itcUser/"+prsId)},updateItcUser:function(itcUser){return $http.put(_olympusBaseUrl()+"/v1/itcUser/"+itcUser.user.prsId,itcUser)},updateUserTerms:function(dsId,termsSignature,payload,acceptMarcom){payload={data:{type:"termsSignatures",attributes:{termsType:termsSignature,version:payload}}};return!0!==acceptMarcom&&!1!==acceptMarcom||(payload.data.attributes.acceptMarketingCommunications=acceptMarcom),$http.post("".concat(_olympusBaseUrl(),"/v1/termsSignatures"),payload)},loadNewsBindingRequestFromToken:function(token){return $http.get(_olympusBaseUrl()+"/v1/news/bindingRequest/"+token).then(function(response){return response.data}).catch(function(error){return $q.reject(error)})},loadPendingNewsBindingRequests:function(){return $http.get(_olympusBaseUrl()+"/v1/news/bindingRequest/pending").then(function(response){return response.data}).catch(},updateNewsBindingRequest:function(token,bindingRequest){return $http.put(_olympusBaseUrl()+"/v1/news/bindingRequest/"+token,bindingRequest)},getOlympusRuntimeInfo:function(){return $http.get("".concat(_olympusBaseUrl(),"/v1/app/runtimeInfo"))},loadModule:function(moduleName,requestedHostname){var config={};return requestedHostname&&(config.params={hostname:requestedHostname}),$http.get(_olympusBaseUrl()+"/v1/session/modules/"+moduleName,config)},loadTermsOfService:function(termType){return termType?$http.get(_olympusBaseUrl()+"/v1/termsOfService?module="+termType):$http.get(_olympusBaseUrl()+"/v1/termsOfService")},loadTermsOfServiceUser:function(){return $http.get(_olympusBaseUrl()+"/v1/termsOfService/user")},isDev:isSafeTargetPrefix:function(targetPrefix){return targetPrefix&&targetPrefix.startsWith("/")&&!targetPrefix.startsWith("//")&&!targetPrefix.includes("..")},isSafeTargetUrl:redirectToWelcomePage:function(){var baseDeveloperPortalOrigin=ENV.devPortalBaseUrl[this.isUatEnvironment()?"uat":"prod"];window.location.href=baseDeveloperPortalOrigin+"/account/?welcome=true"}}}]),olympusApp.factory("SessionService",["$http","$q","$state","$location","olympusServices","$cookies","ENV","$rootScope",function($http,$q,$state,$location,olympusServices,$cookies,environment,$rootScope){var currentSession=null,returnToState=null,returnToStateParams=null,returnToModule=null,returnToPath=null,returnToModuleFailPath=null,returnToHostname=null,onLoads=[],onDestroys=[],environment=environment&&environment.environment,actorsResponse=null,actorsApiService=null;window&&window["itc-actors-api"]&&(actorsApiService=new window["itc-actors-api"].default({env:environment}));eturn{actorsApi:function(){return actorsApiService},getActors:function(bypassCache){var actorsDefer=$q.defer();return actorsResponse&&!bypassCache?actorsDefer.resolve(actorsResponse):actorsApiService.fetchSites().then(function(sitesRes){actorsApiService.formatSites(sitesRes),actorsApiService.fetch().then(}).catch(function(e){console.log(e)}),actorsDefer.promise},loadSession:function(){var withoutCache=0<arguments.length&&void 0!==arguments[0]&&arguments[0],sessionDefer=$q.defer();return null===currentSession||withoutCache?$http.get(olympusServices.olympusBaseUrl()+"/v1/session").then(function(response){return response.data}).then(function(session){currentSession=session,onLoads.forEach(,sessionDefer.resolve(currentSession)},function(error){sessionDefer.reject(error)}):sessionDefer.resolve(currentSession),sessionDefer.promise},loadIsStoreAccount:function(){return $http.get(olympusServices.olympusBaseUrl()+"/v1/session/isStoreAccount").then(},onLoad:function(fn){onLoads.push(fn),null!==currentSession&&fn(currentSession)},getSession:function(){return currentSession},getCurrentActorsProvider:function(){if(Array.isArray(actorsResponse))return actorsResponse.find(},getModules:function(){return currentSession.modules},getConntentTypes:clearSessionCache:function(){_clearSessionCache()},saveReturnToState:function(state,params){returnToState=state,returnToStateParams=params,returnToModuleFailPath=returnToPath=returnToModule=null},saveReturnToModule:function(module,hostname,successPath,failPath){returnToModule=module,returnToHostname=hostname,returnToPath=successPath,returnToModuleFailPath=failPath,returnToStateParams=returnToState=null},saveReturnToPath:function(path){returnToPath=path,returnToStateParams=returnToState=returnToModuleFailPath=returnToModule=null},getReturnToState:function(){return returnToState},getReturnToStateParams:function(){return returnToStateParams},getReturnToModule:function(){return returnToModule},getReturnToHostname:function(){return returnToHostname},getReturnToPath:function(){return returnToPath},getReturnToModuleFailPath:function(){return returnToModuleFailPath},hasReturnToDestination:clearReturnToDestination:function(){returnToStateParams=returnToState=returnToModuleFailPath=returnToPath=returnToHostname=returnToModule=null},destroySession:function(){return $http.delete(olympusServices.mzLabelBaseUrl()+"/wa/destroySession"),$http.delete(olympusServices.olympusBaseUrl()+"/v1/session").then(function(){currentSession=null,onDestroys.forEach(})},onDestroy:function(fn){onDestroys.push(fn)},switchActorProvider:function(provider){var providerDefer=$q.defer();return actorsApiService.setProvider(provider).then(,providerDefer.promise},switchProvider:function(newProviderId){newProviderId!==currentSession.provider.providerId?(currentSession.provider.providerId=newProviderId,olympusServices.updateSession(currentSession).then(.catch():$state.reload()},isAdpSubType:hasFeatureFlag:function(flag){return null!==currentSession&&(currentSession.featureFlags&&0<=currentSession.featureFlags.indexOf(flag))},hasSignedTerms:function(session){if(session||null!==currentSession){var isSoftwareType=(session=session||currentSession).provider&&-1<session.provider.contentTypes.indexOf("SOFTWARE");return-1<session.termsSignatures.indexOf(isSoftwareType?"ASC":"ITC")}return!1}}}]),olympusApp.factory("LocalizationService",["ENV","$http","$q","$cookies","olympusServices","SessionService",function(ENV,$http,$q,$cookies,olympusServices,sessionService){var promise=null,l10n={keys:{},missedKeys:new Set,touchedKeys:new Set,notFound:new Set,update:;function updateKeyFlags(){if(void 0===l10n.nowTimeStamp||l10n.isUpdating)return Promise.resolve({data:[]});var touchedKeys=Array.from(l10n.touchedKeys),missedKeys=Array.from(l10n.missedKeys),keyList=touchedKeys.concat(missedKeys);return 0===keyList.length?Promise.resolve({data:[]}):(l10n.isUpdating=!0,function(keyList,nowTimeStamp,context){return 0<keyList.length&&null!==sessionService.getSession()?$http.post("".concat(olympusServices.mzLabelBaseUrl(),"/ra/l10n-update?context=olympus"),{keys:Array.from(keyList),nowTimeStamp:nowTimeStamp,context:context},{headers:{"X-Csrf-Itc":"[ui]"}}).then(:Promise.resolve({data:[]})}(keyList,l10n.nowTimeStamp,l10n.context).then(function(data){if("SUCCESS"==data.statusCode){var key,keysLeft=new Set(keyList),returnedKeys=data.data.keys;for(key in returnedKeys)l10n.keys[key]=returnedKeys[key],keysLeft.delete(key);var newNotFound=Array.from(l10n.notFound),newNotFound=Array.from(keysLeft).concat(newNotFound);l10n.notFound=new Set(newNotFound),l10n.touchedKeys=new Set,l10n.missedKeys=new Set,l10n.nowTimeStamp=data.data.nowTimeStamp}l10n.isUpdating=!1}))}return delete window.localizationData,{initialize:function(){var config={cache:!0};return $cookies.get("dev-locale")&&(config.headers={"Accept-Language":$cookies.get("dev-locale")}),promise=$http.get("".concat(olympusServices.mzLabelBaseUrl(),"/ra/l10n-managed/olympus"),config).then(function(response){return"false"===response.data.data._l10n_isManaged?l10n.keys=response.data.data:(l10n.keys=response.data.data.keys,l10n.nowTimeStamp=response.data.data.nowTimeStamp,l10n.context=response.data.data.context),l10n.touchedKeys=new Set,l10n.missedKeys=new Set,l10n.notFound=new Set,l10n.update=_.debounce(updateKeyFlags,4e3),l10n})},ready:function(){return promise},interpolate:function(localizationKey,replacements){var key,foundKey=l10n.keys[localizationKey];if(!foundKey)return(key=localizationKey)&&!l10n.notFound.has(key)&&(l10n.missedKeys.add(key),l10n.update()),"dev"===ENV.name?"**"+localizationKey+"**":localizationKey;!function(key,value){var today;key&&"object"===_typeof(value)&&void 0!==l10n.nowTimeStamp&&(today=l10n.nowTimeStamp,value.ts<today&&(l10n.touchedKeys.add(key),l10n.update()))}(localizationKey,foundKey);var text=foundKey;return"object"===_typeof(text)&&(text=text.loc),"object"===_typeof(replacements)&&0<Object.keys(replacements).length&&Object.keys(replacements).forEach(,text},isExistingKey:sendMissingKeys:updateKeyFlags}}]),olympusApp.filter("l10n",["LocalizationService",),olympusApp.factory("BootService",["$q",function($q){function startLoader(){_busy=!0,busyFns.forEach(function(fn){fn(!0)})}function spin(){spinning=!0,0<busyPromises.length?busyPromises.pop().finally(:(_busy=spinning=!1,busyFns.forEach(,busyDefer.resolve())}var bootDefer=$q.defer(),busyDefer=$q.defer(),_busy=!1,busyFns=[],busyPromises=[],spinning=!1;return{listen:boot:function(promise){startLoader(),promise.then(function(){bootDefer.resolve()})},booted:function(){return bootDefer.promise},busy:function(p){_busy||startLoader(),bootDefer.promise.then(function(){var promise=_.isFunction(p)?p():p;busyPromises.push(promise),spinning||spin()})},ready:isBusy:function(){return _busy}}}]),olympusApp.factory("PageService",["$rootScope","$location","SessionService",function($rootScope,$location,sessionService){function setDefaults(){darkBackground=authenticated=!1,pageReady=!(includeFooter=includeHeader=!(darkFooter=pageName=null))}var loginStyle,pageName,authenticated,darkBackground,darkFooter,includeHeader,includeFooter,pageReady,onChangeFn=null,isAsc=!1,isDeveloperTheme=!1,isDeveloper2faError=!1,helpLinks=[];setDefaults();unction determineAsc(session){return session&&session.provider&&session.provider.contentTypes&&1===session.provider.contentTypes.length?"SOFTWARE"===session.provider.contentTypes[0]:0<=$location.host().indexOf("appstoreconnect")}return $rootScope.$on("$stateChangeSuccess",function(event,toState,toParams,fromState,fromParams,options){setDefaults(),pageName=toState.data&&toState.data.pageName?toState.data.pageName:toState.name,authenticated=toState.data&&toState.data.authenticated,didChange()}),{onChange:function(fn){(onChangeFn=fn)()},setPageName:function(value){pageName=value,didChange()},setDarkBackground:function(value){darkBackground=value,didChange()},overrideDarkFooter:function(value){darkFooter=value,didChange()},setLoginStyle:function(value){loginStyle=value,didChange()},setIncludeHeader:function(value){includeHeader=value,didChange()},setIncludeFooter:function(value){includeFooter=value,didChange()},setPageReady:function(value){pageReady=value,didChange()},setIsAsc:function(value){isAsc=value,didChange()},setDeveloperTheme:function(value,hasError){includeFooter=!(isDeveloperTheme=value),isDeveloper2faError=hasError,didChange()},setHelpLinks:isAuthenticated:function(){return authenticated},getPageName:function(){return pageName},getDarkBackground:function(){return darkBackground},getDarkFooter:function(){return null==darkFooter?darkBackground:darkFooter},getLoginStyle:function(){return loginStyle},getIncludeHeader:function(){return includeHeader},getIncludeFooter:function(){return includeFooter},getPageReady:function(){return pageReady},getIsAsc:function(session){return(session=session||sessionService.getSession())?this.setIsAsc(determineAsc(session)):this.setIsAsc(determineAsc()),isAsc},getIsDeveloperTheme:function(){return isDeveloperTheme},getHelpLinks:function(){return helpLinks},getWrapperClasses:function(){var classes=[];return darkBackground&&classes.push("dark-background"),null!=pageName&&"login"===pageName.toLowerCase()&&classes.push("idms-login"),null!=pageName&&classes.push(pageName.toLowerCase()+"-page"),loginStyle===$rootScope.ascString&&classes.push("login-type-asc"),loginStyle===$rootScope.itcString&&classes.push("login-type-itc"),loginStyle===$rootScope.developerString&&classes.push("login-type-developer"),classes.push(isDeveloperTheme?"developer-theme":"tb-default-theme"),pageReady&&classes.push("page-ready"),isDeveloper2faError&&classes.push("dev-2fa-error"),classes}}}]),olympusApp.factory("StorageService",[function(){var localSupported=null,sessionSupported=null,sessionFallback=null;try{localStorage.setItem("x","x"),localStorage.removeItem("x"),localSupported=!0}catch(e){localSupported=!1}try{sessionStorage.setItem("x","x"),sessionStorage.removeItem("x"),sessionSupported=!0}catch(e){sessionSupported=!1,sessionFallback={}}return{isLocalSupported:function(){return localSupported},isSessionSupported:function(){return sessionSupported},localGet:localPut:localExists:function(key){return!!localSupported&&null!==localStorage.getItem(key)},localRemove:sessionGet:sessionPut:sessionExists:function(key){return sessionSupported?null!==sessionStorage.getItem(key):sessionFallback.hasOwnProperty(key)},sessionRemove:function(key){sessionSupported?sessionStorage.removeItem(key):delete sessionFallback[key]}}}]),olympusApp.factory("InterstitialsService",["SessionService","olympusServices","$rootScope","$stateParams",function(sessionService,olympusServices,$rootScope,$stateParams){var newsBindingToken=null,newsBindingRequestSeen=!1,newsBindingProviderSelected=!1;return{getNextRequiredInterstitial:function(session){if(session.provider&&-1<session.provider.contentTypes.indexOf("SOFTWARE")&&sessionService.isAdpSubType(session.provider.subType)&&-1===session.termsSignatures.indexOf("RAD"))return"review_agree";var isADEPType=session.provider&&(session.provider.subType===$rootScope.providerSubTypeAdepString||session.provider.subType===$rootScope.providerSubTypeEduString);return"ITC"!==session.backingType||sessionService.hasSignedTerms(session)||isADEPType?session&&session.ofacState&&["RECOLLECT_PII","COLLECT_PII"].includes(session.ofacState)?"compliance:collect":session&&session.ofacState&&"IN_REVIEW"===session.ofacState?"compliance:inReview":session&&session.ofacState&&"SANCTIONED"===session.ofacState?"compliance:sanctioned":session&&session.ofacState&&"CLEARED"!==session.ofacState&&"NOT_SCREENED"!==session.ofacState?"compliance:ofac-verify":null!=session.unverifiedRoles&&0<session.unverifiedRoles.length?"verify_legal":null!==newsBindingToken?"apple_news_binding":null:"agree_to_terms"},setNewsBindingToken:getNewsBindingToken:function(){return newsBindingToken},dismissAppleNewsBindingRequest:function(){newsBindingRequestSeen=!0},getNewsBindingRequestSeen:function(){return newsBindingRequestSeen},getNewsBindingProviderSelected:function(){return newsBindingProviderSelected},setNewsBindingProviderSelected:}]),olympusApp.service("performance",["$window"]);var delegate,perfKit,resources,paint,navTimingMetrics,perfObserver,APP_ID="com.apple.appstoreconnect.olympus-ui",DEFAULT_PAGE="default-page";window.AmpPerf&&window.AmpPerf.perfkit&&window.AmpPerf.delegate&&(delegate=window.AmpPerf.delegate,(perfKit=window.AmpPerf.perfkit).init("xp_amp_itc_perf",null,delegate),perfKit.system.environment.setDelegate({app:appVersion:hostAppVersion:),window.performance&&"function"==typeof window.performance.getEntriesByType&&(resources=performance.getEntriesByType("resource"),paint=performance.getEntriesByType("paint"),navTimingMetrics=perfKit.eventHandlers.flexible.instance("W3CNavigation"),"PerformanceObserver"in window&&(perfObserver=new PerformanceObserver(function(entries,obj){entries=entries.getEntries();navTimingMetrics.addData(entries[0].toJSON()),navTimingMetrics.recordEvent()})).observe({entryTypes:["navigation"]}),paint.forEach(function(timingEntry){timingEntry&&"function"==typeof timingEntry.toJSON&&perfKit.eventHandlers.flexible.instance("W3CPaint",timingEntry.toJSON()).recordEvent()}),resources.forEach(function(timingEntry){timingEntry&&"function"==typeof timingEntry.toJSON&&perfKit.eventHandlers.loadUrl.fromTimingEntry(timingEntry.toJSON()).recordEvent()})),olympusApp.run(function($rootScope,$window,BootService){var renderMetrics;$rootScope.$on("$stateChangeStart",function(ev,name){name=name&&name.name?name.name:DEFAULT_PAGE;(renderMetrics=perfKit.eventHandlers.pageRender.instance(name,"PRIMARY")).markPageRequest(),renderMetrics.markPageAppear()}),BootService.ready().then(function(){renderMetrics&&"function"==typeof renderMetrics.markPageEnd&&(renderMetrics.markPageUserInteractive(),renderMetrics.markPageEnd(),renderMetrics.recordEvent())})}),olympusApp.factory("perfInterceptor",function(){return{request:function(config){return config.loadUrlObject=perfKit.eventHandlers.loadUrl.instance({app:APP_ID,hostAppVersion:config.url,type:"xhr",baseVersion:1}),config.loadUrlObject.markRequestStart(),config},response:function(_response2){var loadUrlObject;return _response2&&_response2.config&&_response2.config.loadUrlObject&&((loadUrlObject=_response2.config.loadUrlObject).markResponseEnd(),loadUrlObject.addData({correlationKey:_response2.headers()["x-apple-jingle-correlation-key"],status:_response2.status}),loadUrlObject.recordEvent()),_response2}}}),olympusApp.config(["$httpProvider",)),olympusApp.directive("devInfo",["olympusServices","$cookies","$window","$locale",function(olympusServices,$cookies,$window,$locale){return{restrict:"AE",scope:!1,templateUrl:"static/views/directives/dev_info_header.html",link:function(scope,elem,attr,ctrl){var browserLocale;"prod"!==olympusServices.environment()&&(scope.devLocaleAvailableLocales=olympusServices.locales(),scope.devLocaleSelectedFormat=scope.devLocaleSelectedItem=scope.devLocaleAvailableLocales[0],$cookies.get("dev-locale")?scope.devLocaleSelectedItem=_.find(scope.devLocaleAvailableLocales,{id:$cookies.get("dev-locale")}):(browserLocale=_.find(scope.devLocaleAvailableLocales,{id:$locale.id}),scope.devLocaleSelectedItem=browserLocale||scope.devLocaleAvailableLocales[0]),scope.onItemClick=function(data,index){scope.devLocaleSelectedItem=data,$cookies.put("dev-locale",scope.devLocaleSelectedItem.id),$window.location.href="/home"},olympusServices.getOlympusRuntimeInfo().then()}}}]),olympusApp.filter("slice",function(){return function(arr,start,end){return(arr||[]).slice(start,end)}});var homepageController=function($scope,$location,$window,$rootScope,olympusServices,$cookies,$cookieStore,$state,$stateParams,pageService,bootService,session,LocalizationService,interstitialsService,sessionService,$q,ENV){var perfKit,perfObject;$scope.news=[],$scope.alerts=[],$scope.warnings=[],$scope.infoMessages=[],$scope.modulesPerRow=4,$scope.mainNavigationRows=[],$scope.toggleArrayValues=[LocalizationService.interpolate("ITC.HomePage.news.showMore"),LocalizationService.interpolate("ITC.HomePage.news.showLess")],$scope.mainNavigation=[],$scope.moduleAssetBaseUrl="/img/static/ico_homepage/",$scope.isAsc=!1,window.AmpPerf&&window.AmpPerf.perfkit&&(perfKit=window.AmpPerf.perfkit,perfObject=perfKit.eventHandlers.flexible.instance("redirect")),pageService.getIsAsc()?($scope.isAsc=!0,pageService.setLoginStyle($rootScope.ascString)):($scope.isAsc=!1,pageService.setLoginStyle($rootScope.itcString)),pageService.setDarkBackground(!1),pageService.setDeveloperTheme(!1);function recordEventNow(name){window.AmpPerf&&window.AmpPerf.perfkit&&(perfObject.mark("redirect - ".concat(name)),perfObject.recordEvent(),perfKit.system.eventRecorder.flushUnreportedEvents(!0))}$scope.preLoadChecks=function(){var nonHelpModules=[],contractsModule=null,newUrl=$location.absUrl();window.AmpPerf&&window.AmpPerf.perfkit&&perfObject.mark("check for redirect"),_.each(sessionService.getModules(),function(module){"Resources"!==module.key&&nonHelpModules.push(module),"ContractsTaxBanking"===module.key&&(contractsModule=module)}),sessionService.hasReturnToDestination()?LocalizationService.sendMissingKeys().then(function(){recordEventNow("return_to"),$state.go("return_to",{module:$stateParams.module})}):null!=session.roles&&0<=session.roles.indexOf("IMAGE_MANAGER")&&session.provider?LocalizationService.sendMissingKeys().then(function(){recordEventNow("imageManager"),$window.location.href=olympusServices.mzLabelBaseUrl()+"/wa/imageManager"}):1===nonHelpModules.length?LocalizationService.sendMissingKeys().then(function(){recordEventNow("single module"),$window.location.href=nonHelpModules[0].url}):"ITC"!==sessionService.getSession().backingType&&0===nonHelpModules.length?sessionService.loadIsStoreAccount().then(function(isStoreAccount){isStoreAccount?LocalizationService.sendMissingKeys().then(function(){recordEventNow("gettingstarted"),$window.location.href=olympusServices.mzLabelBaseUrl()+"/ra/gettingstarted"}):$scope.isAsc?(recordEventNow("invalid user ASC"),$window.location.href="/login?errorKey=ITC.signin.error.invalidUser.asc"):(recordEventNow("invalid user ITC"),$window.location.href="/login?errorKey=ITC.signin.error.invalidUser")}):0<=$location.host().indexOf("appstoreconnect")&&-1===session.provider.contentTypes.indexOf("SOFTWARE")?(newUrl=(newUrl=/itms\d+/.test($location.host())?newUrl.replace("itms","ritms"):newUrl).replace("appstoreconnect","itunesconnect"),recordEventNow("reload ASC as ITC"),$window.location=newUrl):0<=$location.host().indexOf("itunesconnect")&&-1<session.provider.contentTypes.indexOf("SOFTWARE")?(newUrl=(newUrl=/itms\d+/.test($location.host())?newUrl.replace("ritms","itms"):newUrl).replace("itunesconnect","appstoreconnect"),recordEventNow("reload ITC as ASC"),$window.location=newUrl):$stateParams.isLogin&&0<=session.roles.indexOf("LEGAL")&&session.provider&&0<=session.provider.contentTypes.indexOf("EBOOK")&&contractsModule?olympusServices.loadItcUser(sessionService.getSession().user.prsId).then(function(response){response.data.hasContracts?$scope.loadPage():LocalizationService.sendMissingKeys().then(function(){recordEventNow("contracts"),$window.location.href=contractsModule.url})}):$scope.loadPage()},olympusServices.checkRealm().catch(function(error){error&&error.data&&error.data.errors&&error.data.errors[0]&&error.data.errors[0].links&&error.data.errors[0].links.see?$window.location.href=error.data.errors[0].links.see:$window.location.href="/login"}),$scope.loadPage=function(){LocalizationService.sendMissingKeys(),_.each(sessionService.getModules(),function(module){var homePageModule=angular.copy(module);homePageModule.titlelocKey=module.name,$scope.mainNavigation.push(homePageModule),module.hasNotifications&&olympusServices.loadModule(module.key).then(function(response){homePageModule.notificationCount=response.data.notificationCount})});for(var x=0;x<Math.ceil($scope.mainNavigation.length/$scope.modulesPerRow);x++)$scope.mainNavigationRows.push(x);bootService.busy(olympusServices.loadProviderNews().then(function(data){$scope.fullfeed=data.data,$scope.news=$scope.news.concat(_.filter($scope.fullfeed,),$scope.hasNews=0<$scope.news.length,$scope.alerts=$scope.alerts.concat(_.filter($scope.fullfeed,{group:"Alert"})),$scope.hasAlerts=!!($scope.alerts&&0<$scope.alerts.length&&null!==$scope.alerts[0].message),$scope.warnings=$scope.warnings.concat(_.filter($scope.fullfeed,{group:"Warning"})),$scope.hasWarnings=!!($scope.warnings&&0<$scope.warnings.length&&null!==$scope.warnings[0].message),$scope.infoMessages=$scope.infoMessages.concat(_.filter($scope.fullfeed,{group:"Info"})),$scope.hasInfoMessages=!!($scope.infoMessages&&0<$scope.infoMessages.length&&null!==$scope.infoMessages[0].message),$scope.holidayAlerts=_.filter($scope.fullfeed,{group:"Holiday"}),$scope.hasHolidayAlerts=!!($scope.holidayAlerts&&0<$scope.holidayAlerts.length&&null!==$scope.holidayAlerts[0].message),($scope.newsLoaded=!0)!==$scope.hasAlerts&&!0!==$scope.hasWarnings&&$scope.news.length<1&&($rootScope.hasNoMessaging=!0)})),session.provider&&0<=session.provider.contentTypes.indexOf("SOFTWARE")&&!interstitialsService.getNewsBindingRequestSeen()&&bootService.busy(olympusServices.loadPendingNewsBindingRequests().then(function(bindingRequests){0<bindingRequests.length&&(recordEventNow("apple_news_binding"),$state.go("apple_news_binding"))})),$scope.getContractMessages(),$cookieStore.remove("appsSearchQuery")},$scope.getContractMessages=function(){olympusServices.loadContractMessages().then(function(data){data&&data.data&&data.data.length&&($scope.contractMessages=data.data,$scope.alerts=$scope.alerts.concat(_.filter($scope.contractMessages,{group:"Alert"})),$scope.hasAlerts=0<$scope.alerts.length,$scope.warnings=$scope.warnings.concat(_.filter($scope.contractMessages,{group:"Warning"})),$scope.hasWarnings=0<$scope.warnings.length,$scope.news=$scope.news.concat(_.filter($scope.contractMessages,),$scope.hasNews=0<$scope.news.length)})},$scope.preLoadChecks()};olympusApp.controller("homepageController",["$scope","$location","$window","$rootScope","olympusServices","$cookies","$cookieStore","$state","$stateParams","PageService","BootService","session","LocalizationService","InterstitialsService","SessionService","$q","ENV",homepageController]),olympusApp.controller("AccountCreationController",["$rootScope","$q","$location","$state","$stateParams","$timeout","BootService","PageService","olympusServices","$cookies","$ocLazyLoad","SessionService",function($rootScope,$q,$location,$state,$stateParams,$timeout,bootService,pageService,olympusServices,$cookies,$ocLazyLoad,sessionService){var self=this,dsIframeDefer=$q.defer();self.showInvalidExpired=!1,self.tooManyProviders=!1,self.invalidLink=!1,self.showDsIframe=!1,self.itcPath="/WebObjects/iTunesConnect.woa",self.olympusPath="/login",self.olympusHome="/home",self.scriptSrc="https://appleid.cdn-apple.com/dist/createService.min.js",self.isAsc=pageService.getIsAsc(),bootService.busy(dsIframeDefer.promise),pageService.setDarkBackground(!1);ootService.busy(function(){return olympusServices.getActivation($stateParams.key).then(function(successResponse){self.activationData=successResponse.data,sessionService.isAdpSubType($stateParams.subType)&&(self.loginStyle=$rootScope.developerString,pageService.setDeveloperTheme(!0)),null!==self.activationData.destinationUrl?location.href=self.activationData.destinationUrl:null!==self.activationData.errorCode&&"keyInvalidOrExpired"===self.activationData.errorCode?(self.showInvalidExpired=!0,hideLoadingCover()):null!==self.activationData.errorCode&&"tooManyProviders"===self.activationData.errorCode?(self.tooManyProviders=!0,hideLoadingCover()):null!==self.activationData.errorCode&&"dsIdInvalid"===self.activationData.errorCode||null!==self.activationData.errorCode&&"invalidContentProviderId"===self.activationData.errorCode?(self.invalidLink=!0,hideLoadingCover()):self.initializeDsIframe()}).catch(}),bootService.busy(olympusServices.loadTermsOfService().then(),self.initializeDsIframe=function(){var initOptions={serviceKey:olympusServices.authServiceKey(self.isAsc?$rootScope.ascString:$rootScope.itcString),serviceURL:olympusServices.createServiceUrl(),containerId:"account-creation-container",account:{name:self.activationData.username,person:{name:{firstName:self.activationData.firstname,lastName:self.activationData.lastname}}},callbacks:{ready:exit:completed:function(opts){console.log("AppleCreate completed.......",opts),olympusServices.putActivation($stateParams.key).then(function(data){(!data||"SUCCESS"!==data.statusCode)&&data&&data.data.errorKey?location.href=self.olympusPath+"?errorKey="+data.data:$state.go("home")}).catch(},failed:log:};$cookies.get("dev-locale")&&(initOptions.locale=$cookies.get("dev-locale")),olympusServices.isDev()&&(initOptions.devAppDomain=$location.protocol()+"://"+$location.host()+":"+$location.port()),$ocLazyLoad.load(self.scriptSrc).then(function(){window.AppleID&&(window.AppleID.service.create.init(initOptions),self.showDsIframe=!0)})},self.abort=function(){$state.go("login")}}]),olympusApp.controller("LoginController",["$scope","$rootScope","$q","$window","$location","$state","$stateParams","$timeout","BootService","SessionService","InterstitialsService","LocalizationService","PageService","StorageService","olympusServices","$cookies","$ocLazyLoad",function($scope,$rootScope,returnPath,$window,$location,$state,$stateParams,$timeout,bootService,sessionService,interstitialsService,prefilledUserName,pageService,loginHeaderText,olympusServices,$cookies,$ocLazyLoad){var self=this,dsIframeDefer=returnPath.defer();self.scriptSrc="https://appleid.cdn-apple.com/appleauth/static/jsapi/authService.latest.min.js",$cookies.put("myacinfo","",{domain:".apple.com",expires:"Thu, 01 Jan 1970 00:00:00 GMT"}),$cookies.put("myacinfo-uat","",{domain:".apple.com",expires:"Thu, 01 Jan 1970 00:00:00 GMT"}),bootService.busy(dsIframeDefer.promise),sessionService.clearSessionCache(),$stateParams.errorKey&&prefilledUserName.isExistingKey($stateParams.errorKey)&&(self.errorKey=$stateParams.errorKey),self.errorKey&&(self.is2faError=self.errorKey===$rootScope.TFAErrorKeyDeveloper||self.errorKey===$rootScope.TFAErrorKey,self.showLoginError=!0);returnPath=["sanctioned","inReview"].includes($stateParams.complianceState);returnPath&&(self.complianceState=$stateParams.complianceState,self.showComplianceModal=!0),olympusServices.loadHelpLinks(pageService.getIsAsc()).then(function(response){return bootService.booted().then(}),pageService.setDeveloperTheme(!1),"AppStoreConnect"===$stateParams.module?self.loginStyle=$rootScope.ascString:sessionService.isAdpSubType($stateParams.subType)&&(self.loginStyle=$rootScope.developerString,pageService.setDeveloperTheme(!0,self.is2faError),$stateParams.activationKey&&olympusServices.getActivation($stateParams.activationKey).then(function(response){self.providerName=response.data&&response.data.contentProvider&&response.data.contentProvider.name}),$stateParams.subType&&(self.subType=$stateParams.subType)),self.loginStyle||pageService.getIsAsc()&&(self.loginStyle=$rootScope.ascString),self.loginStyle||(self.loginStyle="itc"),($stateParams.activationKey&&"true"==$stateParams.login||returnPath)&&bootService.busy(sessionService.destroySession().then(function(){sessionService.clearSessionCache()}));returnPath="";$stateParams.targetUrl&&(olympusServices.isSafeTargetPrefix($stateParams.targetPrefix)&&(returnPath=$stateParams.targetPrefix),olympusServices.isSafeTargetUrl($stateParams.targetUrl)&&(returnPath+=$stateParams.targetUrl),$location.hash()&&(returnPath+="#"+$location.hash())),$stateParams.module?sessionService.saveReturnToModule($stateParams.module,$stateParams.hostname,returnPath,$stateParams.failUrl):$stateParams.targetUrl&&sessionService.saveReturnToPath(returnPath),$stateParams.newsBinding&&interstitialsService.setNewsBindingToken($stateParams.newsBinding),self.loginStyle===$rootScope.ascString||self.loginStyle===$rootScope.developerString?pageService.setDarkBackground(!1):pageService.setDarkBackground(!0),pageService.setLoginStyle(self.loginStyle),loginHeaderText.isLocalSupported()&&"true"===loginHeaderText.localGet("itcLoginVisitedBefore")?self.showLearnMorePanel=!1:(loginHeaderText.localPut("itcLoginVisitedBefore","true"),self.showLearnMorePanel=!0,pageService.overrideDarkFooter(!1));loginHeaderText=prefilledUserName.interpolate("ITC.Login.iTunesConnect");pageService.getLoginStyle()===$rootScope.ascString?loginHeaderText=prefilledUserName.interpolate("ITC.Login.ASC"):pageService.getLoginStyle()===$rootScope.developerString&&(loginHeaderText="");prefilledUserName=$stateParams.username?decodeURIComponent($stateParams.username):"";prefilledUserName.match(/^[a-zA-Z\d@:%_+.;~#!?&\/=()[\]]+$/)&&1===prefilledUserName.match(/@/).length||(prefilledUserName="");var initOptions={serviceKey:olympusServices.authServiceKey(self.loginStyle),serviceURL:olympusServices.authServiceUrl(),containerId:"idms-auth-container",skVersion:"7",signInLabel:loginHeaderText,signInLabelOption:{style:"label",enableStyleForAllScreenTitle:!1,headerTag:"h2"},theme:{autoThemeAdjust:!1,defaultTheme:self.loginStyle===$rootScope.ascString||self.loginStyle===$rootScope.developerString?"dark":"lite"},accountName:prefilledUserName,autoFillAccountName:!1,features:{rememberMe:!1},callbacks:{onAuthReady:onAuthSuccess:function(){var params={module:$stateParams.module};olympusServices.fetchDataCenterCookie(),$stateParams.activationKey?olympusServices.checkRealm().then(.catch(function(error){!function(error,isActivation){if(isActivation&&error.data&&error.data.errors&&error.data.errors[0]&&"NOT_AUTHORIZED.2FA_REQUIRED"!==error.data.errors[0].code)return!1;error.data&&error.data.errors&&error.data.errors[0]&&error.data.errors[0].links&&error.data.errors[0].links.see?$window.location.href=error.data.errors[0].links.see:$stateParams.activationKey?$window.location.href="/login?activationKey="+$stateParams.activationKey:$window.location.href="/login";return!0}(error,!0)&&finishActivation(params)}):function(params){dsIframeDefer.resolve(),self.loginStyle===$rootScope.developerString||self.loginStyle===$rootScope.ascString?$state.go("review_agree"):$state.go("home",Object.assign({},params,{isLogin:!0}))}(params)},onAuthFailure:onPasswordAuthDone:function(isSuccess){isSuccess||$scope.$apply(function(){self.errorKey=null})},onAuthWidgetWillChangeFlow:};function finishActivation(params){olympusServices.putActivation($stateParams.activationKey).then(function(data){data&&data.data&&data.data.errorKey?(self.errorKey=data.data,dsIframeDefer.resolve()):$state.go("home",params)}).catch(function(data){self.errorKey=data.data&&data.data.data&&data.data.data.errorString,dsIframeDefer.resolve(),document.getElementById("idms-auth-container").innerHTML="",$window.AppleID.service.auth.init(initOptions)})}$cookies.get("dev-locale")&&(initOptions.locale=$cookies.get("dev-locale")),pageService.getIsAsc()&&self.loginStyle!==$rootScope.developerString&&(initOptions.logo={src:$location.protocol()+"://"+location.host+"/static/img/app_store_connect_icon@3x.1699916017837.png",width:"50px"}),olympusServices.isDev()&&(initOptions.devAppDomain=$location.protocol()+"://"+$location.host()+":"+$location.port()),$ocLazyLoad.load(self.scriptSrc).then(function(){$window.AppleID&&$window.AppleID.service.auth.init(initOptions)})}]),olympusApp.controller("AgreeToTermsController",["$state","PageService","BootService","SessionService","olympusServices","session",function($state,pageService,bootService,sessionService,olympusServices,session){var self=this;self.agreed=!1,pageService.setDarkBackground(!1),pageService.setIncludeFooter(!1),pageService.setLoginStyle("itc"),pageService.getIsAsc()&&pageService.setLoginStyle("asc"),pageService.setDeveloperTheme(!1);var termsType=pageService.getIsAsc()?"ASC":"ITC";sessionService.hasSignedTerms(session)&&$state.go("home"),bootService.busy(olympusServices.loadTermsOfService(termsType).then();self.accept=function(){self.inProgress="accept",olympusServices.updateUserTerms(session.user.prsId,termsType,self.termsOfServiceVersionId).then(function(response){sessionService.clearSessionCache(),$state.go("home")}).catch(},self.abort=function(){$state.go("logout")}}]),olympusApp.controller("VerifyLegalController",["$q","$state","PageService","BootService","SessionService","olympusServices","StorageService","session",function($q,$state,pageService,bootService,sessionService,olympusServices,storageService,session){var self=this;pageService.setDarkBackground(!0),pageService.setLoginStyle("itc");var getUnverifiedLegalRole=function(){return self.itcUser.unverifiedRoles.filter([0]};bootService.busy(olympusServices.loadItcUser(session.user.prsId).then(function(response){self.itcUser=response.data,null==getUnverifiedLegalRole()&&$state.go("home")}));function submit(isAccept){var legalUserRole=getUnverifiedLegalRole();return legalUserRole&&(legalUserRole.verified=isAccept),olympusServices.updateItcUser(self.itcUser).then(.catch(}self.accept=function(){self.inProgress="accept",submit(!0)},self.reject=]),olympusApp.controller("AppleNewsBindingController",["$q","$state","$stateParams","BootService","PageService","InterstitialsService","olympusServices","SessionService","session",function($q,$state,$stateParams,bootService,foo,interstitialsService,olympusServices,sessionService,session){var self=this,isLegalUser=0<=session.roles.indexOf("LEGAL");foo.setDarkBackground(!0),self.locReplacements={CHANNEL_NAME:"",CONTENT_PROVIDER:session.provider.name,AGREEMENTS_URL:"/WebObjects/iTunesConnect.woa/da/jumpTo?page=contracts"},self.errorMessage="",self.inProgress=null;foo=$q.defer();bootService.busy(foo.promise),foo.resolve(""),self.dismiss=interstitialsService.getNewsBindingToken()?(self.appProviders=[],session.availableProviders&&session.availableProviders.forEach(function(provider){0<=provider.contentTypes.indexOf("SOFTWARE")&&self.appProviders.push(provider)}),1<self.appProviders.length&&!interstitialsService.getNewsBindingProviderSelected()?(self.state="SELECT_PROVIDER",self.appProviders=_.sortBy(self.appProviders,):0===self.appProviders.length?self.dismiss():1===self.appProviders.length&&session.provider.providerId!==self.appProviders[0].providerId?sessionService.switchProvider(self.appProviders[0].providerId):olympusServices.loadNewsBindingRequestFromToken(interstitialsService.getNewsBindingToken()).then(function(newsBinding){isLegalUser?self.state="LEGAL":(self.bindingRequest=newsBinding,self.state="NON_LEGAL")}).catch(function(response){self.state="ERROR","APPLE_NEWS_ALREADY_BOUND_SELF"===response.data.code?self.errorMessage=isLegalUser?"ITC.LCFeldsparConfirmPage.alreadyBoundSelf.legal":"ITC.LCFeldsparConfirmPage.alreadyBoundSelf.nonLegal":"APPLE_NEWS_ALREADY_BOUND_OTHER"===response.data.code?self.errorMessage=isLegalUser?"ITC.LCFeldsparConfirmPage.alreadyBoundOther.legal":"ITC.LCFeldsparConfirmPage.alreadyBoundOther.nonLegal":self.errorMessage=isLegalUser?"ITC.LCFeldsparConfirmPage.unavailable.legal":"ITC.LCFeldsparConfirmPage.unavailable.nonLegal"})):$q.when($stateParams.bindingRequests||olympusServices.loadPendingNewsBindingRequests()).then(function(bindingRequests){0<bindingRequests.length?isLegalUser?self.state="LEGAL":(self.locReplacements.CHANNEL_NAME=bindingRequests[0].channelName,self.state="NON_LEGAL_PENDING"):self.dismiss()}).catch(function(response){self.dismiss()}),self.submitProvider=self.submitRequest=function(){self.bindingRequest.approved=!0,olympusServices.updateNewsBindingRequest(interstitialsService.getNewsBindingToken(),self.bindingRequest).then(function(){self.submitState="SUBMITTED"}).catch(.finally(},self.cancelRequest=]),olympusApp.controller("ReturnToController",["$state","$window","BootService","SessionService","olympusServices",function($state,$window,bootService,sessionService,olympusServices){var returnToState=sessionService.getReturnToState(),returnToStateParams=sessionService.getReturnToStateParams(),returnToModule=sessionService.getReturnToModule(),returnToHost=sessionService.getReturnToHostname(),returnToPath=sessionService.getReturnToPath(),returnToModuleFailPath=sessionService.getReturnToModuleFailPath();sessionService.clearReturnToDestination(),returnToState?$state.go(returnToState,returnToStateParams):returnToModule?bootService.busy(olympusServices.loadModule(returnToModule,returnToHost).then(function(module){module=module.data;module.visible||".target"===returnToModuleFailPath||"ABR"===module.key?returnToPath?returnToPath.startsWith("/")?$window.location.href=module.url.replace(/(https?:\/\/[^/]*)\/.*/,"$1"+returnToPath):$window.location.href=module.url+returnToPath:$window.location.href=module.url:returnToModuleFailPath?returnToModuleFailPath.startsWith("/")?$window.location.href=module.url.replace(/(https?:\/\/[^/]*)\/.*/,"$1"+returnToModuleFailPath):$window.location.href=module.url+returnToModuleFailPath:$state.go("home")},function(){$state.go("home")})):returnToPath?$window.location.href=olympusServices.itcBaseUrl()+returnToPath:$state.go("home")}]),olympusApp.controller("reviewAgreeController",["$scope","$state","BootService","SessionService","PageService","olympusServices","$rootScope","$stateParams",function($scope,$state,bootService,sessionService,pageService,olympusServices,$rootScope,$stateParams){$scope.init=function(){pageService.setDeveloperTheme(!0),$scope.session=sessionService.getSession(),$scope.session&&$scope.session.provider&&($scope.providerName=$scope.session.provider.name,$scope.providerType=$scope.session.provider.subType,$scope.isSoftwareType=$scope.session.provider.contentTypes&&-1<$scope.session.provider.contentTypes.indexOf("SOFTWARE")),$scope.providerType!==$rootScope.providerSubTypeIndividualString&&$scope.isSoftwareType?($scope.hasSignedRad=-1<$scope.session.termsSignatures.indexOf("RAD"),$scope.hasSignedRad?$state.go("home"):($scope.prsId=$scope.session.user.prsId,$scope.isExistingASCUser="ITC"===$scope.session.backingType&&sessionService.hasSignedTerms($scope.session),$scope.submitting=!1,$scope.formData={radAgree:!1,emailOptIn:!1},bootService.busy(olympusServices.loadTermsOfService("RAD").then())):$state.go("home")},$scope.agree=function(){if(!$scope.submitting&&$scope.formData.radAgree)return $scope.submitting=!0,olympusServices.updateUserTerms($scope.prsId,"RAD",$scope.agreementVersionId,$scope.formData.emailOptIn).then(.catch(},$scope.cancel=$scope.init()}]);