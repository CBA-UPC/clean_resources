var FACIL_ITI={};class FilterV2{updatedAt=null;logo=null;language="fr";filter={label:null};config=null;constructor(e){this.filter={label:e}}areThereAnyActiveFunctions(){return null!==this.config}}class FilterStoreV2{version=2;activeFilter=null;mode="light-mode";language="fr-FR";filters=[];isActiveFilter(){return null!==this.activeFilter}getActiveFilter(){return this.activeFilter?this.activeFilter.id?this.filters.find(e=>e.filter.id===this.activeFilter.id):this.filters.find(e=>e.filter.label===this.activeFilter.label):null}static createFromStoreV1(e){if(1!==e.version&&void 0!==e.version)throw"Unable to convert: the filter store is not in a compatible version 1";var t,n=new FilterStoreV2;for(t in""!==e.active_profile&&(n.activeFilter={label:e.active_profile}),e.profiles){var i=new FilterV2(t);i.updatedAt=e.profiles[t].date,i.logo=e.profiles[t].logo,i.language=e.profiles[t].language,i.config=e.profiles[t].config,n.filters.push(i)}return n}static loadFromRawJsonObject(e){return Object.setPrototypeOf(e,FilterStoreV2.prototype),e.filters.forEach(e=>Object.setPrototypeOf(e,FilterV2.prototype)),e}}!function(u){"use strict";u.POPIN_MANAGER={};{var d=u.POPIN_MANAGER;const m="FACIL_ITI_POPIN",v="https://web-service.facil-iti.app";let r=!1,e,t,n=u.configuration;function p(){window.scrollTo(t,e)}let i=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){i=!0}}))}catch(e){}let o=!!i&&{passive:!1};function g(){return{app_url:v,features:"env_1",ui:{css:{height:d.context().height-60+"px",width:"420px",position:"fixed",borderRadius:"20px",top:"30px",border:"2px solid white"},position:function(){switch(n.popinPosition||(n.popinPosition="default"),n.popinPosition){case"left":case"right":return n.popinPosition;default:return"right"}}(),sideMargin:"30px",stylesheet:""}}}d.nodeMetaData=new WeakMap,d.disableScroll=()=>{e=window.pageYOffset||document.documentElement.scrollTop,t=window.pageXOffset||document.documentElement.scrollLeft,window.addEventListener("scroll",p,!1),window.addEventListener("DOMMouseScroll",p,!1),window.addEventListener("wheel",p,o),window.addEventListener("mousewheel",p,o),window.addEventListener("touchmove",p,o)},d.enableScroll=()=>{window.removeEventListener("scroll",p,!1),window.removeEventListener("DOMMouseScroll",p,!1),window.removeEventListener("wheel",p,o),window.removeEventListener("mousewheel",p,o),window.removeEventListener("touchmove",p,o)},d.popin=null,d.context=()=>({id:"popin-context",currentURL:window.location.href,width:window.innerWidth,height:window.innerHeight,lang:document.documentElement.lang,isDesktopView:600<window.innerWidth,isMobileView:window.innerWidth<=600,applicationIdentifier:void 0!==n?n.applicationIdentifier:null,uiVersion:void 0!==n?n.uiVersion:"default",environment:void 0!==n&&n.environment?n.environment:"production",iframeTitle:"FACIL-ITI solution de personnalisation de l'affichage"});const h={ui:{css:{height:"60vh",width:"100%",borderRadius:"20px 20px 0 0",bottom:"0px",position:"fixed",top:"auto",right:"0",left:"0",border:"none",borderTop:"2px solid white"},position:"left",sideMargin:"0"}},w={origin:{source:"tag",version:"cdn"}};function f(e){e.preventDefault(),u.POPIN_MANAGER.toggle()}d.isPopinOpen=()=>null!==document.querySelector("#"+m),d.toggle=(e=w)=>{d.isPopinOpen()?d.close():d.open(e)},d.redraw=()=>{var e=document.querySelector("#"+m),t=d.getMaxZIndexInUse();e&&t>parseInt(e.style.zIndex)&&(e.style.zIndex=t)},d.getMaxZIndexInUse=()=>[...document.querySelectorAll("body *")].map(e=>parseInt(getComputedStyle(e).zIndex)).filter(e=>!isNaN(e)).reduce((e,t)=>Math.max(e,t),1)+15,d.applyLayout=function(){try{var e,t,n=document.querySelector("#"+m),i=d.context().isDesktopView?g():Object.assign({},g(),h);for([e,t]of Object.entries(i.ui.css))n.style[e]=t}catch(e){}},d.applyConfiguration=()=>{try{document.querySelector("#"+m).contentWindow.postMessage(d.context(),"*")}catch(e){}},d.applyPosition=function(){var e=document.querySelector("#"+m),t=d.context().isDesktopView?g():Object.assign({},g(),h);"right"===t.ui.position?(e.style.right=t.ui.sideMargin,e.style.left="auto"):(e.style.left=t.ui.sideMargin,e.style.right="auto")},d.open=function(e=w){let t;d.popin?t=d.popin:((t=document.createElement("iframe")).title=d.context().iframeTitle,t.src="staging"===d.context().uiVersion||"integration"===d.context().uiVersion?`https://cdn.facil-iti.app/gui/${d.context().uiVersion}/index.html?mode=popin&applicationIdentifier=${d.context().applicationIdentifier}&version=${d.context().uiVersion}&params=${JSON.stringify(e)}&environment=`+d.context().environment:`${g().app_url}/ui/router/${d.context().applicationIdentifier}/popin/`+JSON.stringify(e),t.id=m,t.style.zIndex=d.getMaxZIndexInUse()+1,d.popin=t),t.onload=d.applyConfiguration,document.body.appendChild(t),d.applyLayout(),d.applyPosition(),d.switchMode(r);var n,i=window.innerWidth,o=d.context().isDesktopView;d.context().isDesktopView;window.onresize=()=>{i!==window.innerWidth&&(i=window.innerWidth,n=d.context().isDesktopView,o!==n)&&(u.POPIN_MANAGER.applyLayout(),u.POPIN_MANAGER.applyPosition(),u.POPIN_MANAGER.switchMode(r),o=u.POPIN_MANAGER.context().isDesktopView,u.POPIN_MANAGER.applyConfiguration())},document.querySelector("#"+m).addEventListener("mouseenter",d.disableScroll),document.querySelector("#"+m).addEventListener("mouseleave",d.enableScroll),window.addEventListener("touch",d.enableScroll),setTimeout(()=>{t.focus&&t.focus(),t.contentWindow&&t.contentWindow.focus&&t.contentWindow.focus()},300)},d.close=function(){d.enableScroll(),document.querySelector("#"+m).removeEventListener("mouseenter",d.disableScroll),document.querySelector("#"+m).removeEventListener("mouseleave",d.enableScroll),window.removeEventListener("touch",d.enableScroll),document.querySelector("#"+m).remove();let e=document.querySelector("[data-faciliti-popin]");e&&setTimeout(()=>{e.focus&&e.focus()},100)},d.switchPosition=function(){var e=document.querySelector("#"+m).style;e.right===g().ui.sideMargin?(e.right="auto",e.left=g().ui.sideMargin):(e.left="auto",e.right=g().ui.sideMargin)},d.resizeWindow=function(){var e=document.querySelector("#"+m).style;e.height===h.ui.css.height?e.height="100%":e.height=h.ui.css.height},d.switchMode=function(e){var t=document.querySelector("#"+m);t&&(t.style.borderColor=e?"#ffffff":"#121212")},d.clearAllDataInStorage=function(t=!1){if(window.localStorage.removeItem("FACIL_ITI"),window.sessionStorage.removeItem("FACIL-ITI_CSS"),window.sessionStorage.removeItem("FACIL-ITI_url_blacklist"),window.sessionStorage.removeItem("FACIL_ITI_CACHE"),window.dispatchEvent(new StorageEvent("storage",{key:"FACIL_ITI"})),!t){let e;var t=document.querySelector("#FACIL_ITI_POPIN"),n=document.querySelector("#FACIL_ITI_INCONTENT");t&&(e=t.contentWindow||t).postMessage({popinAction:"delete-all-user-data-from-storage"},"*"),n&&(e=n.contentWindow||n).postMessage({popinAction:"delete-all-user-data-from-storage"},"*")}},d.setup=function(e){void 0===n&&(n=e);e='[data-faciliti-popin], a[href="https://ws.facil-iti.com"]';(e=document.querySelectorAll(e))&&e.forEach(e=>{d.nodeMetaData.set(e,{toggleButtonActivated:!0}),e.addEventListener("click",f)}),l("#facil-iti"),s(),c()};let a=()=>{var e=window.location.href.replace(/#.*$/,"");window.history.replaceState("",document.title,e)},l=t=>{window.location.hash===t&&(u.POPIN_MANAGER.open(),a()),window.addEventListener("hashchange",function(e){window.location.hash===t&&(u.POPIN_MANAGER.toggle(),a())},!1)},s=()=>{document.addEventListener("keydown",function(e){e.ctrlKey&&e.shiftKey&&"KeyF"===e.code&&u.POPIN_MANAGER.toggle()},!1)},c=()=>{window.addEventListener("message",e=>{if([v,"https://cdn.facil-iti.app"].includes(e.origin))switch(e.data.popinAction){case"switch-position":d.switchPosition();break;case"resize":d.resizeWindow();break;case"close":d.close();break;case"switch-mode":r=e.data.isDarkMode,d.switchMode(r);break;case"delete-all-user-data-from-storage":d.clearAllDataInStorage(!0)}})}}}(FACIL_ITI),function(o){"use strict";o.INCONTENT_MANAGER={};{var r=o.INCONTENT_MANAGER;const a="FACIL_ITI_INCONTENT",l="https://web-service.facil-iti.app",s={origin:{source:"tag",version:"cdn"}};let i=!1;r.inContent=null,r.nodeMetaData=new WeakMap,r.context=()=>({id:"incontent-context",currentURL:window.location.href,width:window.innerWidth,height:window.innerHeight,lang:document.documentElement.lang,isDesktopView:!1,isMobileView:!1,applicationIdentifier:void 0!==o.configuration?o.configuration.applicationIdentifier:null,uiVersion:void 0!==o.configuration?o.configuration.uiVersion:"default",iframeTitle:"FACIL-ITI solution de personnalisation de l'affichage"});const c={app_url:l,features:"env_1",ui:{css:{height:"100%",width:"100%"},stylesheet:""}};r.applyLayout=function(){try{var e,t,n=document.querySelector("#"+a);for([e,t]of Object.entries(c.ui.css))n.style[e]=t}catch(e){}},r.applyConfiguration=()=>{try{document.querySelector("#"+a).contentWindow.postMessage(r.context(),"*")}catch(e){}},r.setup=function(e=r.context()){i=null!==document.querySelector("iframe#FACIL_ITI_INCONTENT"),r.open("[data-faciliti-incontent]",e)},r.open=function(e,t){var n,e=document.querySelector(e);null===e||i||(r.nodeMetaData.set(e,{toggleButtonActivated:!0}),(n=document.createElement("iframe")).title=r.context().iframeTitle,n.src=l+"/ui/router/"+t.applicationIdentifier+"/in-content/"+JSON.stringify(s),n.id=a,(r.inContent=n).onload=r.applyConfiguration,e.appendChild(n),r.applyLayout(),document.querySelector("#"+a).addEventListener("mouseenter",o.POPIN_MANAGER.disableScroll),document.querySelector("#"+a).addEventListener("mouseleave",o.POPIN_MANAGER.enableScroll),i=!0)}}}(FACIL_ITI),function(d){"use strict";d.POC_PLAIN_LANGUAGE={};{var p=d.POC_PLAIN_LANGUAGE;let e="initial",i={},o={},n="Passer en langage clair";var g="#ffffff",f="#a8002d";const w=[{plain_language:"<h2>Notre politique</h2> <p>Nous avons mis en place une politique de confidentialité des données pour être conformes au Règlement Général sur la Protection des Données.</p><p>Nous vous informons à chaque fois de l’utilisation des données que vous renseignez.</p><p>Des données personnelles vous seront demandées à la page contact ou lors d’une candidature.</p><p>Votre adresse email vous sera demandée si vous souhaitez recevoir notre newsletter.</p><p>Pour toutes questions sur vos données personnelles, vous pouvez nous écrire à <a href='mailto:privacy@facil-iti.com.'>privacy@facil-iti.com.</a></p><p>[En plus du respect de la loi informatique et liberté du 6 janvier 1978, nous nous engageons à respecter le Règlement (UE) 2016/679 du Parlement européen et du Conseil du 27 avril 2016, dès son entrée en vigueur le 25 mai 2018].</p><h2>Qui collecte les données ?</h2> <p>Nous sommes responsables des traitements effectués sur vos données personnelles.</p><p>Notre siège social est à l’adresse suivante : FACIL’iti, ESTER Technopole, 16 rue Soyouz, 87068 Limoges.</p><h2>Quelles sont les finalités</h2> <p><strong>Quelles sont vos données personnelles à renseigner dans le formulaire de contact ?</strong></p><p>Pour nous contacter, vous devez renseigner : votre nom(s) et prénom(s), votre adresse e-mail, un objet du message et le message, et votre numéro de téléphone si vous le souhaitez.</p><p>Nous utiliserons vos données que pour revenir vers vous et répondre au mieux à vos besoins.</p><p><strong>Comment recevoir la newsletter ?</strong></p><p>Pour recevoir la newsletter, vous devez nous communiquer votre adresse e-mail.</p><p>Votre adresse e-mail sera utilisée uniquement pour vous envoyer la newsletter.</p><p>Sur chaque newsletter, il existe un lien que lequel vous pouvez cliquer pour ne plus recevoir la newsletter.</p>",target:{type:"selector",value:"#contenu .free-content",url:"/donnees-personnelles"}},{plain_language:"<p>Comment la solution FACIL'iti a-t-elle été créée ?</p><p>On vous explique tout dans cet article.</p>",target:{type:"content",value:"Vous êtes nombreux à nous demander comment est née FACIL’iti. Quelle a été l’idée de départ ? Comment les filtres FACIL’iti ont-ils été créés ? Quels sont les acteurs qui ont participé à la construction de notre outil de personnalisation web ?Remontons le temps pour découvrir les coulisses du lancement de notre outil d’inclusion numérique… […]",url:"/blog"}},{plain_language:"<p>Mardi 22 février, le Magazine de la Santé parle de FACIL'iti.</p><p>Un très beau reportage sur notre solution d'inclusion numérique</p><p>Cliquez ici pour Voir la vidéo.</p>",target:{type:"content",value:"Dans son émission du mardi 22 février, le Magazine de la Santé a consacré un très beau reportage à notre outil d’inclusion numérique. Une belle surprise pour toute l’équipe de FACIL’iti ! Voir la vidéo : Version texte : «&nbsp;(Marina) Rym, vous allez nous parler d’un outil très pratique pour les personnes qui ont des […]",url:"/blog"}}],I="button.plain-language-toggle-button {display: flex;align-items: center;justify-content: center;flex-direction: row;color: "+g+";font-size: 1em;background: "+f+";padding: 5px 10px;border: 2px solid "+f+";border-radius: 5px;transition: all ease 300ms;margin:15px 0;}button.plain-language-toggle-button svg{width : 20px;height: 20px; fill:"+g+";margin-right:10px;transition: all ease 300ms;}button.plain-language-toggle-button p{width: auto;margin: 0;padding: 0; color: "+g+" !important;transition: all ease 300ms;}button.plain-language-toggle-button:hover {color: "+f+";background: "+g+";border: 2px solid "+f+";}button.plain-language-toggle-button:hover svg{fill:"+f+";}button.plain-language-toggle-button:hover p{color: "+f+" !important}}";function m(e,t){return i[e]=document.querySelector(t.target.value),i[e].parentNode}function v(e,t){return i[e]=r(t.target.value)[0],r(t.target.value)[0].parentElement}p.setup=function(){let n=!1;w.forEach(function(e,t){window.location.href.includes(e.target.url)&&(n=!0)}),n&&(s(),u(),window.addEventListener("keydown",function(e){e.ctrlKey&&e.shiftKey&&"KeyL"===e.code&&d.POC_PLAIN_LANGUAGE.togglePlainLanguage()}))},p.togglePlainLanguage=function(){("initial"===e?(e="plain",n="Revenir au texte initial",a):(e="initial",n="Passer en langage clair",l))(),h(),t()};let r=function(t){return[...document.querySelectorAll("body *")].filter(e=>{if(e.innerHTML===t)return e})},t=function(){try{document.querySelector("#FACIL_ITI_POPIN").contentWindow.postMessage(e,"*")}catch(e){}},a=function(){w.forEach(function(e,t){o[t]=document.createElement("div"),o[t].classList.add("facil-iti-plain-language","plain-language-text-"+t),o[t].innerHTML=e.plain_language,"selector"===e.target.type&&window.location.href.includes(e.target.url)&&m(t,e).replaceChild(o[t],i[t]),"content"===e.target.type&&window.location.href.includes(e.target.url)&&0<r(e.target.value).length&&v(t,e).replaceChild(o[t],i[t])})},l=function(){if(i&&o)for(var[e,t]of Object.entries(o)){var n=document.querySelector(".plain-language-text-"+e);n&&n.parentElement&&n.parentElement.replaceChild(i[e],t)}},s=function(){w.forEach(function(e,t){document.querySelector(".facil-iti-plain-language-toggle")||("selector"===e.target.type&&window.location.href.includes(e.target.url)&&m(t,e).insertBefore(c(),i[t]),"content"===e.target.type&&window.location.href.includes(e.target.url)&&0<r(e.target.value).length&&v(t,e).insertBefore(c(),i[t]))})};function h(){document.querySelectorAll("button.plain-language-toggle-button").forEach(e=>{e.children[1].innerHTML=n,e.setAttribute("aria-label",n),e.setAttribute("aria-selected",!0)})}let c=function(){var e=document.createElement("button"),t=(e.classList.add("plain-language-toggle-button"),e.setAttribute("aria-label",n),e.setAttribute("aria-selected",!1),e.onclick=function(e){d.POC_PLAIN_LANGUAGE.togglePlainLanguage(),h(),e.stopPropagation()},document.head.appendChild(document.createElement("style")).innerHTML=I,document.createElement("svg")),t=(t.innerHTML='<svg version="1.1" aria-hidden="true" focusable="false" role="image" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 6.2 8" style="enable-background:new 0 0 6.2 8;" xml:space="preserve"><g><path className="st0" d="M4.5,0.2v1.4c0,0.1,0.1,0.1,0.1,0.1H6L4.5,0.2z"/><path className="st0" d="M3.9,1.9V0H0.2C0.1,0,0,0.1,0,0.2v7.6C0,7.9,0.1,8,0.2,8H6c0.1,0,0.2-0.1,0.2-0.2V2.3H4.4C4.1,2.3,3.9,2.1,3.9,1.9z M1.3,1.2h1.2c0.2,0,0.3,0.1,0.3,0.3S2.7,1.9,2.5,1.9H1.3c-0.2,0-0.3-0.1-0.3-0.3S1.1,1.2,1.3,1.2z M5,6.8H1.3c-0.2,0-0.3-0.1-0.3-0.3s0.1-0.3,0.3-0.3H5c0.2,0,0.3,0.1,0.3,0.3S5.1,6.8,5,6.8z M5,5.1H1.3C1.1,5.1,0.9,5,0.9,4.8s0.1-0.3,0.3-0.3H5c0.2,0,0.3,0.1,0.3,0.3S5.1,5.1,5,5.1z M5.3,3.2c0,0.2-0.1,0.3-0.3,0.3H1.3c-0.2,0-0.3-0.1-0.3-0.3s0.1-0.3,0.3-0.3H5C5.1,2.9,5.3,3,5.3,3.2z"/></g></svg>',e.appendChild(t),document.createElement("p"));return t.innerHTML=n,e.appendChild(t),e},u=function(){window.addEventListener("message",e=>{["https://web-service.facil-iti.app","https://www.facil-iti.app","https://cdn.facil-iti.app"].includes(e.origin)&&("toggle-plain-language"===e.data.popinAction?d.POC_PLAIN_LANGUAGE.togglePlainLanguage():"get-toggle-plain-language"===e.data.popinAction&&t())})}}}(FACIL_ITI),function(){"use strict";FACIL_ITI.SCRIPTS_MANAGER={}}(),function(r){"use strict";const a={applicationIdentifier:null,webServiceUrl:"https://ws.facil-iti.com",domains:[],uiVersion:"default"};let l=null,n="blue",i="green",t=null,s=null,o=null;function c(){for(var e in r.reset)if(r.reset.hasOwnProperty(e)&&"extend"!==e&&-1<r.executedFunctions.indexOf(e))try{r.reset[e]()}catch(e){}}function u(e,t){let n=[];return e.forEach(function(e){0<e.addedNodes.length&&Array.from(e.addedNodes).forEach(e=>{void 0!==e.dataset&&void 0!==e.dataset[t]?n.push(e):e.hasChildNodes()&&(n=n.concat(...e.querySelectorAll("*[data-faciliti-popin]")))})}),n}function d(e){e.preventDefault(),r.POPIN_MANAGER.toggle()}function p(e){if(e&&!e.url_blacklist.some(e=>RegExp(e,"gi").test(location.pathname))){(t=e.scripts).forEach(e=>{var t;document.querySelector(`script[src="${e}"]`)||((t=document.createElement("script")).src=e,document.head.appendChild(t))}),t.forEach(e=>{let t=null;e=e.split("/");let n=e[e.length-1].split(".js")[0];t=setInterval(()=>{r.SCRIPTS_MANAGER[n]&&(r.SCRIPTS_MANAGER[n].apply(),clearInterval(t))},100)}),c();t=e.css;if(t&&0!==t.length){t=t.reduce((e,t)=>e+t.content,"").replace(/#FACIL_ITI_DOMAIN#/g,a.webServiceUrl);let e=document.querySelector("style[data-faciliti-style]");null!==e?e.innerHTML=t:((e=document.createElement("style")).dataset.facilitiStyle="",e.innerHTML=t,document.body.appendChild(e))}(t=e.stylesheets)&&0!==t.length&&(document.querySelectorAll("link[data-faciliti-stylesheet='"+i+"']").forEach(e=>e.remove()),t.map(e=>a.webServiceIntegrationUrl+e).forEach(e=>{var t=document.createElement("link");t.dataset.facilitiStylesheet=n,t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),document.head.appendChild(t)}),[n,i]=[i,n]);t=e;if(t.js&&t.js.length){let e=document.querySelector("script[data-faciliti-script]");e&&e.remove(),(e=document.createElement("script")).dataset.facilitiScript="features",e.setAttribute("src",a.webServiceUrl+"/"+t.engine),e.setAttribute("crossorigin","anonymous"),t.engine_integrity&&e.setAttribute("integrity",t.engine_integrity),document.head.appendChild(e)}t=e.features,document.documentElement.dataset.faciliti=t.join(" ")}var t}g=!(e=function(){window.postMessage("faciliti:initialization")});var e,g,f=function(){g||(g=!0,e())};function m(){var e=JSON.parse(localStorage.getItem("FACIL_ITI"));return e?void 0===e.version||1===e.version?FilterStoreV2.createFromStoreV1(e):FilterStoreV2.loadFromRawJsonObject(e):new FilterStoreV2}function v(){s=m();var e=a;try{s.isActiveFilter()&&s.getActiveFilter()?.areThereAnyActiveFunctions()&&(e.language=s.getActiveFilter().language);var t,n=document.querySelector("script[data-application-identifier]");n.dataset.applicationIdentifier&&(n.dataset.applicationIdentifier=n.dataset.applicationIdentifier.trim(),t=new RegExp(/^[A-Za-z0-9]{8}-(?:[A-Za-z0-9]{4}-){3}[A-Za-z0-9]{12}$/g),n.dataset.applicationIdentifier.match(t)),Object.assign(e,{...n.dataset})}catch(e){}s.isActiveFilter()&&s.getActiveFilter()?.areThereAnyActiveFunctions()&&sessionStorage.getItem("FACIL_ITI_CACHE")&&p(l=JSON.parse(sessionStorage.getItem("FACIL_ITI_CACHE")));try{r.INCONTENT_MANAGER.setup(a)}catch(e){}try{r.POPIN_MANAGER.setup(a)}catch(e){}try{r.configuration.uiVersion&&"staging"===r.configuration.uiVersion&&"9c57a7db-d64b-11e5-8f05-000c298ed446"===a.applicationIdentifier&&r.POC_PLAIN_LANGUAGE.setup()}catch(e){}{const i=new MutationObserver(function(e){e=u(e,"facilitiPopin");let t=!1;0<e.length&&(e.forEach(e=>{r.POPIN_MANAGER.nodeMetaData.has(e)&&r.POPIN_MANAGER.nodeMetaData.get(e).toggleButtonActivated||(r.POPIN_MANAGER.nodeMetaData.set(e,{toggleButtonActivated:!0}),e.addEventListener("click",d),t=!1)}),t)&&i.disconnect()});i.observe(document.body,{subtree:!0,childList:!0})}{const o=new MutationObserver(function(e){e=u(e,"facilitiIncontent");let t=!1;0<e.length&&(e.forEach(e=>{r.INCONTENT_MANAGER.nodeMetaData.has(e)&&r.INCONTENT_MANAGER.nodeMetaData.get(e).toggleButtonActivated||(r.INCONTENT_MANAGER.nodeMetaData.set(e,{inContentContainerActivated:!0}),r.INCONTENT_MANAGER.setup(),t=!0)}),t)&&o.disconnect()});o.observe(document.body,{subtree:!0,childList:!0})}}async function h(){if(f(),(s=m()).isActiveFilter()&&s.getActiveFilter()?.areThereAnyActiveFunctions())o!==s.getActiveFilter().config&&(l=(n=a.applicationIdentifier,t=s.getActiveFilter().config,(i=new URL(a.webServiceUrl+"/tag/engine/")).searchParams.append("params",t),i.searchParams.append("id",n),await(await fetch(i,{})).json()),o=s.getActiveFilter().config,JSON.stringify(l)!==sessionStorage.getItem("FACIL_ITI_CACHE"))&&(p(l),sessionStorage.setItem("FACIL_ITI_CACHE",JSON.stringify(l)),r.POPIN_MANAGER.redraw());else{c();var e,t=document.querySelector("script[data-faciliti-script]");for(e in t&&t.remove(),(t=document.querySelector("style[data-faciliti-style]"))&&t.remove(),delete document.documentElement.dataset.faciliti,r.SCRIPTS_MANAGER)r.SCRIPTS_MANAGER[e].removeScript();sessionStorage.removeItem("FACIL_ITI_CACHE")}var n,t,i}function w(e){let t=null;var n=document.querySelector("#FACIL_ITI_POPIN"),i=document.querySelector("#FACIL_ITI_INCONTENT");if(n&&(t=n.contentWindow||n),t=i?i.contentWindow||i:t){n=localStorage.getItem("FACIL_ITI")||{};try{t.postMessage(n,e)}catch(e){}}}function I(e){window.localStorage.setItem("FACIL_ITI",e),window.dispatchEvent(new StorageEvent("storage",{key:"FACIL_ITI"})),s=m(),w("*")}function A(e,t){this[e]=this[e]||t}try{switch(window.addEventListener("message",function(e){try{if(!["https://www.facil-iti.app","https://cdn.facil-iti.app"].includes(e.origin))return!1;var t="string"==typeof e.data?JSON.parse(e.data):e.data;switch(t.subject){case"save-filters":I(t.content);break;case"load-filters":w(e.origin)}}catch(e){}}),window.addEventListener("storage",function(e){"FACIL_ITI"===e.key&&(clearTimeout(t),t=setTimeout(h,200))}),document.addEventListener("pageChanged",()=>{r.initialize(),r.execute()}),document.addEventListener("readystatechange",e=>{switch(document.readyState){case"interactive":v();break;case"complete":h()}}),document.readyState){case"interactive":v();break;case"complete":v(),h()}Object.assign(r,{conf:()=>!0,configuration:a,getAdaptationData:function(){return l},saveFilters:I,version:"2.0.1",executedFunctions:[],page:document,reset:{extend:A},utilities:{extend:A},modules:{extend:A},initialize:v,execute:h,apply:function(){v(),h()}})}catch(e){}}(FACIL_ITI);
