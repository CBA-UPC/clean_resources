ï»}([function(e,t,i){"use strict";i.d(t,"c",function(){return a}),i.d(t,"b",function(){return o}),i.d(t,"a",function(){return s});var n=i(13);function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t,i){return e&&e[t]?i+"?e="+e[t]:null}function o(e){if(e=Object(n.a)(e),"object"!==("undefined"==typeof window?"undefined":r(window))||"undefined"==typeof Image){var t=new XMLHttpRequest;t.open("get",e,!0),t.send()}else{(new Image).src=e}}function s(e,t,i){void 0!==window.playerLog&&window.playerLog("error on "+e)}},function(e,t,i){"use strict";i.d(t,"e",function(){return Gi}),i.d(t,"g",function(){return zi}),i.d(t,"f",function(){return Wi}),i.d(t,"h",function(){return Qi}),i.d(t,"i",function(){return qi}),i.d(t,"n",function(){return f}),i.d(t,"j",function(){return Yi}),i.d(t,"c",function(){return Ki}),i.d(t,"a",function(){return Xi}),i.d(t,"m",function(){return Ji}),i.d(t,"d",function(){return Zi}),i.d(t,"l",function(){return $i}),i.d(t,"k",function(){return en}),i.d(t,"b",function(){return p});var Ci=i(3),n=i(5),ki=i.n(n),r=0,a=1,o=2;function s(e){return e<420?r:e<560?a:o}function xi(e,t){for(var a,i=this,n=0,r=e,o=t,s=0;s<r.length;s++)r[s].index=}this.setup=function(){a=o.getHlsActive(),function(){for(var e=0;e<r.length;e++)r[e].f.sort(function(e,t){if(a){if("hls"==e.f&&"hls"!==t.f)return-1;if("hls"!==e.f&&"hls"==t.f)return 1}return e.h-t.h})}()},this.getPlaylist=function(){return r},this.getCurrentVideoIndex=function(){return n},this.forward=function(){l(n==r.length-1?0:n+1)},this.switchToVideoIndex=function(e){l(e)},this.backward=function(){l((0==n?r.length:n)-1)},this.getCurrentVideoObj=function(){return r[n]},this.getCurrentVideoUr},this.getCurrentVideoFileName=function(){return r[n].id},this.getCurrentVideoPoster=function(){return this.getVideoPosterByIndex(n)},this.getVideoPosterByInde},this.getTotalVideos=function(){return r.length},this.getFileToPlay=function(){var e,t=this.getCurrentVideoObj(),i=null,n=o.getCurrentResolution(),r=!1;for(e=0;e<t.f.length&&(1080==t.f[e].h&&(t.f[e].h=480),!i||"hls"!=i.f||!a);e++)o.canPlayType(t.f[e].c)&&(i?t.f[e].h==i.h?i=t.f[e]:t.f[e].h>i.h&&t.f[e].h<=n?i=t.f[e]:i.h<=n&&t.f[e].h>n&&!r&&t.f[e].h<=n+180&&(i=t.f[e],r=!0):i=t.f[e]);if(!i)for(e=0;e<t.f.length;e++)o.canPlayType(t.f[e].c)&&(i=t.f[e]);return i},this.isPlaylistFinished=function(){return n==this.getTotalVideos()-1},this.getCurrentVideoDuration=function(){var e=this.getCurrentVideoObj();return e.dur?e.dur:0},this.getCurrentVideoTitl},this.getCurrentVideoLanguage2LettersCode=function(){var e=i.getCurrentVideoObj();return void 0!==e.l?e.l:""},this.getNextVideoIndex=function(){return n==r.length-1?0:n+1}}var Ii=i(2);function Pi(e){e=parseInt(e,10);var t=Math.floor(e/3600)%24,i=Math.floor(e/60)%60,n=Math.floor(e%60)%60;return(t<1?"":(t<10?"0":"")+t+":")+(i<10?"0":"")+i+":"+(n<10?"0":"")+n}function Oi(e){var t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;return t&&t==e}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ri={bgSize:45,bg:"url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2aWV3Qm94PSIwIDAgMjguMDggMzAuNTYiPjxkZWZzPjxzdHlsZT4uY2xzLTF7aXNvbGF0aW9uOmlzb2xhdGU7fS5jbHMtMntmaWxsOiMzZGIxZTU7fS5jbHMtMywuY2xzLTR7bWl4LWJsZW5kLW1vZGU6bXVsdGlwbHk7fS5jbHMtM3tmaWxsOnVybCgjbGluZWFyLWdyYWRpZW50KTt9LmNscy00e2ZpbGw6dXJsKCNsaW5lYXItZ3JhZGllbnQtMik7fS5jbHMtNXtmaWxsOnVybCgjbGluZWFyLWdyYWRpZW50LTMpO308L3N0eWxlPjxsaW5lYXJHcmFkaWVudCBpZD0ibGluZWFyLWdyYWRpZW50IiB4MT0iNDcxLjk2IiB5MT0iOTY1Ljc2IiB4Mj0iNDc2LjQ0IiB5Mj0iOTY1Ljc2IiBncmFkaWVudFRyYW5zZm9ybT0idHJhbnNsYXRlKDk5MS45MiAtNDMwLjY3KSByb3RhdGUoOTApIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIi8+PC9saW5lYXJHcmFkaWVudD48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC0yIiB4MT0iLTM0IiB5MT0iOTY1Ljc2IiB4Mj0iLTI5LjUyIiB5Mj0iOTY1Ljc2IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDAsIC0xLCAtMSwgMCwgOTkxLjkyLCAtNS4zMykiIHhsaW5rOmhyZWY9IiNsaW5lYXItZ3JhZGllbnQiLz48bGluZWFyR3JhZGllbnQgaWQ9ImxpbmVhci1ncmFkaWVudC0zIiB4MT0iMjMuMzUiIHkxPSIzNC45NSIgeDI9IjUxLjQzIiB5Mj0iMzQuOTUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj48c3RvcCBvZmZzZXQ9IjAiIHN0b3AtY29sb3I9IiM0MThmY2QiLz48c3RvcCBvZmZzZXQ9IjAuNTMiIHN0b3AtY29sb3I9IiMzZGJhZWIiLz48c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMyMTQwODAiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48dGl0bGU+ZmluYWxfbG9hZGVyX2xvZ288L3RpdGxlPjxnIGNsYXNzPSJjbHMtMSI+PGcgaWQ9IkxheWVyXzYiIGRhdGEtbmFtZT0iTGF5ZXIgNiI+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJNMjguMiwyNS45NWMtMS4yNC43Mi0xLjQ2LDIuNzItMS40NiwyLjcycy0zLjExLTEuNjUtMy4xNy0yLC40Ny0yLjc5LDEuNzUtMi4zOWExMC42NSwxMC42NSwwLDAsMSwyLjg3LDEuNzJaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjMuMzUgLTE5LjY3KSIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTI4LjIsNDRjLTEuMjQtLjcyLTEuNDYtMi43Mi0xLjQ2LTIuNzJzLTMuMTEsMS42NS0zLjE3LDIsLjQ3LDIuNzksMS43NSwyLjM5QTEwLjY1LDEwLjY1LDAsMCwwLDI4LjIsNDRaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjMuMzUgLTE5LjY3KSIvPjxwYXRoIGNsYXNzPSJjbHMtMyIgZD0iTTI4LjIsNDRjLTEuMjQtLjcyLTEuNDYtMi43Mi0xLjQ2LTIuNzJzLTMuMTEsMS42NS0zLjE3LDIsLjQ3LDIuNzksMS43NSwyLjM5QTEwLjY1LDEwLjY1LDAsMCwwLDI4LjIsNDRaIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMjMuMzUgLTE5LjY3KSIvPjxwYXRoIGNsYXNzPSJjbHMtNCIgZD0iTTI4LjIsMjUuOTVjLTEuMjQuNzItMS40NiwyLjcyLTEuNDYsMi43MnMtMy4xMS0xLjY1LTMuMTctMiwuNDctMi43OSwxLjc1LTIuMzlhMTAuNjUsMTAuNjUsMCwwLDEsMi44NywxLjcyWiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIzLjM1IC0xOS42NykiLz48cGF0aCBjbGFzcz0iY2xzLTUiIGQ9Ik01MS40MiwzNC45NWMuNTktLjI2LTE3LjA1LTE1LjI4LTIxLjk1LTE1LjI4aDBjLS43OC4wNi00LjU0LDMuNi01LjQ1LDQuNy0xLjEzLDEuMzctLjQyLDIuMjktLjQyLDIuMjl2MGMuNDItNi4wNywxNi45NCw4LjMyLDE2Ljk0LDguMzJTMjQsNDkuMzQsMjMuNTcsNDMuMjd2MHMtLjcxLjkyLjQyLDIuMjljLjkxLDEuMSw0LjY2LDQuNjQsNS40NSw0LjdoMEMzNC4zNyw1MC4yMiw1MiwzNS4yMSw1MS40MiwzNC45NVoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yMy4zNSAtMTkuNjcpIi8+PC9nPjwvZz48L3N2Zz4=)",spinnerSize:90,em:2.813,border:2.813*.11},Di=function(}retur}(t,[{key:"resizeSpinner",value:function(e,t){if(this.isSpinnerExist()){var i=this.playerElement.getElementsByClassName("loader-bg"),n=this.playerElement.getElementsByClassName("loader-bg-image"),r=this.playerElement.getElementsByClassName("loader");i[0].style.setProperty("height",t+"px","important"),i[0].style.width=e+"px",n[0].style.left=(e-Ri.bgSize)/2+"px",n[0].style.top=(t-Ri.bgSize)/2+"px",r[0].style.left=e/2-Ri.bgSize-9+"px",r[0].style.top=t/2-Ri.bgSize-5+"px"}}},{key:"resizeBufferingSpinner",value:function(e,t){if(this.isBufferingSpinnerExist()){var i=this.playerElement.getElementsByClassName("loader-bg-transparent"),n=this.playerElement.getElementsByClassName("loader-bg-image-transparent"),r=this.playerElement.getElementsByClassName("loader-transparent");i[0].style.setProperty("height",t+"px","important"),i[0].style.width=e+"px",n[0].style.left=(e-Ri.bgSize)/2+"px",n[0].style.top=(t-Ri.bgSize)/2+"px",r[0].style.left=e/2-Ri.bgSize-9+"px",r[0].style.top=t/2-Ri.bgSize-5+"px"}}},{key:"startSpinner",value:function(){if(!this.isSpinnerExist()&&(this.playSpinner=!0,this.playSpinner)){this.setLoaderBackground();var e=Object(Ci.a)(this.playerElement);this.resizeSpinner(e.width,e.height)}}},{key:"startBufferingSpinner",value:function(){if(!this.isBufferingSpinnerExist()&&(this.playSpinner=!0,this.playSpinner)){this.setBufferingLoaderBackground();var e=Object(Ci.a)(this.playerElement);this.resizeBufferingSpinner(e.width,e.height)}}},{key:"isSpinnerExist",value:function(){return 0<this.playerElement.getElementsByClassName("loader-bg").length}},{key:"isBufferingSpinnerExist",valu}},{key:"setLoaderBackground",value:function(){var e=document.createElement("div");e.className="loader-bg";var t=this.setLoaderBackgroundImage();e.appendChild(t);var i=document.createElement("div");i.className="loader",e.appendChild(i),this.playerElement.appendChild(e)}},{key:"setBufferingLoaderBackground",value:function(){var e=document.createElement("div");e.className="loader-bg-transparent";var t=this.setLoaderBufferingBackgroundImage();e.appendChild(t);var i=document.createElement("div");i.className="loader-transparent",e.appendChild(i),this.playerElement.appendChild(e)}},{key:"setLoaderBackgroundImage",value:function(){var e=document.createElement("div");return e.className="loader-bg-image",e}},{key:"setLoaderBufferingBackgroundImage",valu}},{key:"stopSpinner",value:function(){this.playSpinner=!1;for(var e=this.playerElement.getElementsByClassName("loader-bg"),t=0;t<e.length;t++)this.playerElement.removeChild(e[t])}},{key:"stopBufferingSpinner",value:function(){this.playSpinner=!1;for(var e=this.playerElement.getElementsByClassName("loader-bg-transparent"),t=0;t<e.length;t++)this.playerElement.removeChild(e[t])}}]),t}();function Mi(){var e,t,i,n,r,a,o,s,l,d,u,c,h,f,p,g,m,v,y,b,w,E,S=!1,A=0,T=0;function L(e,t){r=setTimeout(function(){a=e,A=Date.now(),"right"==e?(b.style.display="block",L("bottom",n/4*1e3)):"bottom"==e?(w.style.display="block",L("left",n/4*1e3)):y.style.display="block"},t)}function C(){t=setInterval(function(){i--,c.innerText="NEXT VIDEO IN "+i},1e3),e=setTimeou},1e3*i)}function k(){!function(){S=!1;var e=l.getElementsByClassName("trv-autoskip-style");e[0]&&l.removeChild(e[0]);var t=l.getElementsByClassName("trv-autoskip-container");if(t[0])t[0].style.display="none";else{var i=l.getElementsByClassName("trv-autoskip-container-compact");i[0]&&(i[0].style.display="none")}E&&(E.style.display="none");b&&(b.style.display="none");w&&(w.style.display="none");y&&(y.style.display="none")}(),x(),s.unsubscribe(Ii.g,O),s.unsubscribe(en,P),s.unsubscribe($i,I),s.unsubscribe(Xi,k),s.unsubscribe(Ii.c,R),v=!1,s.hideAutoSkip(),g=!}function I(){if(!v){v=!0;var e=l.getElementsByClassName("trv-autoskip-style")[0];e&&l.removeChild(e);var t=n/4*1e3-(T-A);"top"==a?L("right",t):"right"==a?L("bottom",t):"bottom"==a&&L("left",t),c&&C()}}function P(){if(v&&s.IsPlayerViewable()){v=!1,T=Date.now(),x(),clearTimeout(r);var e=document.createElement("style");e.className="trv-autoskip-style",e.innerText="top"==a?"#"+p+" .trv-autoskip-line-top::before {animation-play-state: paused !important;}":"right"==a?"#"+p+" .trv-autoskip-line-right::before {animation-play-state: paused !important;}":"bottom"==a?"#"+p+" .trv-autoskip-line-bottom::before {animation-play-state: paused !important;}":"#"+p+" .trv-autoskip-line-left::before {animation-play-state: paused !important;}",l.appendChild(e)}}this.initAutoSkipElements=function(e){u=e.getElementsByClassName("trv-autoskip-container")[0],d=e.getElementsByClassName("trv-autoskip-background")[0],f=e.getElementsByClassName("trv-autoskip-poster")[0],c=e.getElementsByClassName("autoskip-btn-blue")[0],h=e.getElementsByClassName("autoskip-btn-gray")[0],E=e.getElementsByClassName("trv-autoskip-line-top")[0],b=e.getElementsByClassName("trv-autoskip-line-right")[0],w=e.getElementsByClassName("trv-autoskip-line-bottom")[0],y=e.getElementsByClassName("trv-autoskip-line-left")[0]},this.initAutoSkip=function(e,t){l=(s=t).getPlayerElement(),p=l.id,i=n=e,T=0,o=t.isMobile(),m=t.getPlaylist()},this.onBiddingSessionEndsCallback=function(){g&&(this.showAutoSkip(),g=!1)},this.showAutoSkip=function(){if(!S){if(s.isBiddingSessionRunning())return s.subscribe(Ii.g,O),void(g=!0);s.unsubscribe(Ii.g,O),s.subscribe(Ii.c,R),S=!0;var e=m.getNextVideoIndex();f.src=m.getVideoPosterByIndex(e),this.isAutoSkipCompactMode()?this.setAutoSkipToCompactMode():this.setAutoSkipToExpandedMode(),c.innerText="NEXT VIDEO IN "+i,h.innerText="CANCEL",A=Date.now(),L("right",n/4*1e3),a="top",u.style.display="block",E.style.display="block",C(),c.onclic},h.onclic},s.subscribe(q}.bind(this)),s.subscribe(Xi,function(){k()}.bind(this)),s.subscribe(en,P),s.subscribe($i,I),v=!0}},this.setAutoSkipToCompactMode=function(){u.className="trv-autoskip-container-compact",d.className="trv-autoskip-background-compact",c.className="autoskip-btn autoskip-btn-blue-compact autoskip-btn-compact",h.className="autoskip-btn autoskip-btn-gray-compact autoskip-btn-compact",f.className="trv-autoskip-poster-compact"},this.setAutoSkipToExpandedMod},this.removeAutoSkip=function(){k()},this.isAutoSkipCompactMode=function(){return Object(Ci.a)(l).width<400||o},this.canStartBiddingSessio},this.onAdStarted=function(){S&&k()};var O=this.onBiddingSessionEndsCallback.bind(this),R=this.onAdStarted.bind(this)}function Bi(){this.promiseSubscribers=[],this.eventSubscribers=[],this.playerElement=null,this.eventsWithPromises=[Zi,Ii.e],this.setPlayerElement=function(e){this.playerElement=e},this.subscribe=function(e,t){this.eventsWithPromises.includes(e)?this.subscribePromise(e,t):(this.eventSubscribers.push({eventName:e,callback:t}),this.playerElement.addEventListener(e,t))},this.removeSubscribers=function(){this.promiseSubscribers=[];for(var e=0;e<this.eventSubscribers.length;e++)this.playerElement.removeEventListener(this.eventSubscribers[e].eventName,this.eventSubscribers[e].callback)},this.subscribePromis},this.DispatchPromiseEvent=function(a,o){return new Promise(function(e,t){var i=[];if(void 0!==this.promiseSubscribers[a]){for(var n=this.promiseSubscribers[a].length-1;0<=n;n--){var r=this.promiseSubscribers[a][n](o);r&&i.push(r)}i.length?Promise.all(i).then(function(){e()}).catch(function(){t()}):e()}else e()}.bind(this))},this.unsubscribe=function(e,t){this.playerElement.removeEventListener(e,t)}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}Fi.prototype.on=function(e,t){this.subscribersService.subscribe(e,t)},Fi.prototype.off=function(e,t){this.subscribersService.unsubscribe(e,t)},Fi.prototype.play=function(){this.playerObject.play()},Fi.prototype.pause=function(){this.playerObject.pause()},Fi.prototype.forward=function(){this.playerObject.forward()},Fi.prototype.backwards=function(){this.playerObject.backward()},Fi.prototype.getWidgetId=function(){return this.playerObject.getWidgetId()},Fi.prototype.mute=function(){return this.playerObject.mute()},Fi.prototype.unmute=function(){return this.playerObject.unmute()},Fi.prototype.disableAutoskip=function(){return this.playerObject.disableAutoSkip()},Fi.prototype.setConsentString=function(e){this.playerObject.setConsentString(e)},Fi.prototype.setGdprApplies=function(e){this.playerObject.setGdprApplies(e)};var c={mpeg4:function(e,t){var a=e.getVideo(),o=!1;this.currentSrc=t.p,this.type="mpeg4",this.loadVideoSource=function(r){return new Promise(function(e){o=!1;function t(){o=!0,clearInterval(i),a.removeEventListener("loadeddata",n),a.removeEventListener("loadedmetadata",n),a.currentTime=r,e()}var i=null,n=function(){t()};a.addEventListener("loadeddata",n),a.addEventListener("loadedmetadata",n),i=setInterval(function(){3<=a.readyState&&t()},500),a.src=this.currentSrc,a.load()}.bind(this))},this.isUrlDifferentThanCurrentUrl=function(e){return a.src&&0<a.src.length?-1==a.src.indexOf(e):!(a.currentSrc&&0<a.currentSrc.length)||-1==a.currentSrc.indexOf(e)},this.play=function(e){if(o)return a.play();this.loadVideoSource(e).then(function(){return a.play()}.bind(this))},this.destroy=function(){}},hls:function(i,e){var t=-1;i.getHlsActive(),this.player=i,this.hlsService=null,this.videoElement=i.getVideo();var n=!1;this.type="hls",this.currentSrc=e.p,this.inLoading=!1,this.enableSavingModeAfterLoading=!1,this.disableSavingModeAfterLoading=!1,this.EnableSavingModeForContent=function(){this.hlsService&&(this.inLoading||this.videoElement.readyState<4?(this.enableSavingModeAfterLoading=!0,window.playerLog("saving mode pending")):this.enableSavingMode())},this.enableSavingMode=function(){window.playerLog("saving mode enabled to level "+this.hlsService.firstLevel),this.hlsService.autoLevelCapping=this.hlsService.firstLevel,this.hlsService.nextLoadLevel=this.hlsService.firstLevel,this.hlsService.startLevel=this.hlsService.firstLevel},this.disableSavingMode=function(){this.hlsService.currentLevel!=t&&(window.playerLog("saving mode disabled to level "+t),this.hlsService.autoLevelCapping=t,this.hlsService.nextLoadLevel=t,this.hlsService.startLevel=t)},this.DisableSavingModeForContent=function(){this.hlsService&&(window.playerLog("ready state",this.videoElement.readyState),this.inLoading||this.videoElement.readyState<4?(window.playerLog("disable saving mode pending"),this.disableSavingModeAfterLoading=!0):this.disableSavingMode())},this.calculateMaxLevel=function(e){!i.isSavingModeForContentRunning()&&this.hlsService&&(t=s(e),this.hlsService.autoLevelCapping=t,1==i.getFirstTimeHLSInit()&&i.setHLSCurrentLevel(t))},i.subscribe("windowResize",function(e){this.hlsService&&this.calculateMaxLevel(e.detail.playerWidth)}.bind(this)),this.setupHlsManager=function(){window.playerLog("setup hls manager");var e=i.getPlayerDimension(),t={startLevel:1==i.getFirstTimeHLSInit()?s(e.width):i.getHLSCurrentLevel(),maxMaxBufferLength:8,maxBufferLength:8,autoStartLoad:!1,testBandwidth:!1,debug:!1};this.hlsService=new ki.a(t),this.hlsService.on(ki.a.Events.LEVEL_SWITCHING,function(e,t){void 0!==t.level&&(window.playerLog("switching level "+t.level),i.setHLSCurrentLevel(t.level))}),this.calculateMaxLevel(e.width),i.isSavingModeForContentRunning()&&this.EnableSavingModeForContent(),i.setFirstTimeHLSInit(!1)},this.isUrlDifferentThanCurrentUrl=function(e){return!(this.videoElement.src.includes("blob")&&this.hlsService&&this.hlsService.url)||-1==this.hlsService.url.indexOf(e)},this.loadVideoSource=function(i){return window.playerLog("load video source"),new Promise(function(t){this.hlsService||this.setupHlsManager(),!this.hlsService||n||this.inLoading||(this.inLoading=!0,this.hlsService.once(ki.a.Events.MEDIA_ATTACHED,function(){window.playerLog("load video source media attached");var e=function(){window.playerLog("load video source manifest loaded"),this.hlsService.once(ki.a.Events.LEVEL_LOADED,function(){window.playerLog("load video source level loaded"),n=!0,this.inLoading=!1,t()}.bind(this)),i?this.hlsService.startLoad(i):this.hlsService.startLoad(-1)}.bind(this);this.hlsService.once(ki.a.Events.MANIFEST_LOADED,e),this.hlsService.loadSource(this.currentSrc)}.bind(this)),this.hlsService.attachMedia(this.videoElement))}.bind(this))},this.checkSavingMode=function(){this.enableSavingModeAfterLoading&&(this.enableSavingModeAfterLoading=!1,this.enableSavingMode()),this.disableSavingModeAfterLoading&&(this.disableSavingModeAfterLoading=!1,this.disableSavingMode())},this.play=function(i){return window.playerLog("hls play"),new Promise(function(e,t){window.playerLog("videoloaded",n),n?this.inLoading||this.videoElement.play().then(function(){this.checkSavingMode(),e()}.bind(this)).catch(function(e){window.playerLog("catch play 2",e),t()}):(window.playerLog("loadVideo"),this.loadVideoSource(i).then(function(){this.videoElement.play().then(function(){window.playerLog("then play"),this.player.setPlayerContentStatus(zi),this.checkSavingMode(),e()}.bind(this)).catch(function(){window.playerLog("catch play"),t()})}.bind(this)))}.bind(this))},this.destroyHLSService=function(){this.inLoading=!1,n=!1,window.playerLog("destroy hls service"),this.hlsService&&(i.setFirstTimeHLSInit(!0),this.hlsService.destroy(),this.hlsService=null)},this.destro},this.setupHlsManager()}},Ni=u(function e(t,i){retur}(this,e),new c[t.f](i,t)}),_i=i(0);function Ui(e){var t=e.elementToTrack,i=e.threshold,n=void 0===i?.4:i,r=e.callback,a={root:null,rootMargin:"0px",threshold:n};this.elementToTrack=t,this.delayTimeout=null,this.elementInView=null,this.callback=r,this.observer=new IntersectionObserver(this.onViewabilityCallback.bind(this),a),this.observer.observe(t)}Ui.prototype.onViewabilityCallback=function(e,t){window.playerLog("viewability callback",e);var i=e[0];this.elementInView=i.isIntersecting,this.callback&&this.callback(e,t)},Ui.prototype.isElementInView=function(){return this.elementInView},Ui.prototype.StopObservin};var h=i(7);function Vi(e){this.player=e,this.currentLoadingTimeout=null,this.posterElement=this.player.getPlayerElements().player.poster,this.onClickBinding=this.onPosterClick.bind(this),this.video=this.player.getVideo(),this.player.subscribe("adStarted",function(){this.Hide()}.bind(this)),this.player.subscribe(Zi,function(){return new Promise(function(e){this.Show(),e()}.bind(this))}.bind(this))}Vi.prototype.Show=function(){clearTimeout(this.currentLoadingTimeout),this.currentLoadingTimeout=null,this.player.getPlayerContentStatus()&&this.player.getPlayerContentStatus()!=Gi||0!=this.video.currentTime?this.currentLoadingTimeout=setTimeout(function(){this.currentLoadingTimeout=null,0==this.video.currentTime&&this.load()}.bind(this),2e3):this.load()},Vi.prototype.Hide=function(){this.hide()},Vi.prototype.load=function(){var e=this.player.getPlaylist().getCurrentVideoPoster();(function(i){return new Promise(function(e,t){Object(h.b)(i).then(function(){e(i)}.bind(this)).catch(function(){i=i.replace("_2.","_1."),Object(h.b)(i).then(function(){e(i)}).catch(function(){t()})}.bind(this))})})(e).the}.bind(this)).catch(function(){})},Vi.prototype.show=function(e){(this.video.paused||this.video.ended||0==this.video.currentTime)&&(this.posterElement.style.backgroundImage="url('"+e+"')",this.posterElement.style.display="block",this.addPosterEvents())},Vi.prototype.hide=function(){window.playerLog("hide poster"),clearTimeout(this.currentLoadingTimeout),this.currentLoadingTimeout=null,this.posterElement.style.backgroundImage="url('')",this.posterElement.style.display="none",this.removePosterEvents()},Vi.prototype.onPosterClic},Vi.prototype.addPosterEvents=function(){this.posterElement.addEventListener("click",this.onClickBinding)},Vi.prototype.removePosterEvent};var ji=i(8);function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Gi=1,zi=2,Wi=3,Qi="playerReady",qi="playerResize",f="windowResize",Yi="playerViewabilityChange",Ki="containerViewabilityChange",Xi="onNewVideo",Ji="onVideoTimeUpdate",Zi="onNewVideoBeforeVideoChanged",$i="onVideoPlay",en="onVideoPause",tn="onPlayerDestroyed",nn="onVideoEnd";function p(){var r,e,a,o,s,l,t,d,u,c,i,n,h,f,p,g,m,v=this,y=400,b=!1,w=!1,E=null,S=null,A=!1,T=0,L=0,C=!1,k=!1,x=null,I=!1,P=!1,O=!1,R=[],D=!1,M=!1,B=null,F=null,N={},_=null,U=null,V=!1,j=!1,H=!1,G=null,z=Ze(),W=!1,Q=!0,q=!1,Y=null,K=0,X=null,J=null,Z=!0,$=null,ee=null,te=0,ie=!1,ne=null,re=0,ae=0,oe="",se="",le="",de=!1,ue="",ce=!1,he=!1,fe=!1,pe=!1,ge=null,me=-1,ve=!0,ye=!1,be=!1,we=!0,Ee=!1,Se=null,Ae="",Te=null,Le=null,Ce=null,ke=null,xe=!0,Ie=!0,Pe=!1,Oe="",Re="",De="",Me="",Be=!1,Fe=!1,Ne=!function Ve(){return new Promise(function(e){function t(){tt(),E.dispatchEvent(new CustomEvent("onContentShown")),e()}J==Wi?(Rt(),t()):J==Gi?(je(),t()):Ti(N.player.mediaVideo).the}).catch(function(e){Object(_i.a)("whenPlayingContentAllowedplayVideoElementError",{wid:a},e),J=Gi,je(),t()})})}function je(){Se&&Se.Show(),Rt(),J=Gi}function He(){Ee||(J=zi,w&&x?x.resumeAd():N.player.mediaVideo.paused&&(Q=!0,Ve()))}function Ge(e){x&&x.isAdLoading()?window.playerLog("pause denied, ad loading"):(J=Wi,window.playerLog("pause video"),w&&x?x.pauseAd():(Rt(),e&&e())unction qe(){Se&&Se.Hide(),N.buttonsOverlay&&(N.buttonsOverlay.overlay.firstChild.style.display="none"),N.player.mediaControls.style.display="none",E.getElementsByClassName("trv-overlay")[0].style.display="none",Jt(),Ke()}function Ye(){J===zi&&(l.startBufferingSpinner(),N.player.mediaVideo.addEventListener("timeupdate",Xe))}function Ke(){l.stopBufferingSpinner(),N.player.mediaVideo.removeEventListener("timeupdate",Xe)}function Xe(){l.stopBufferingSpinner(),N.player.mediaVideo.removeEventListener("timeupdate",Xefunction $e(e){var }(e);return ie=ie&&t,N.player.fullScreen.style.display=ie?"inherit":"none",ie}function et(e){e&&"BODY"!=e.tagName&&(e.offsetHeight<2||e.offsetWidth<2||e.id&&0<=e.id.indexOf("div-gpt-ad-")||e.id&&0<=e.id.indexOf("google_ads_iframe"))&&(W?(e.style.width="100%",e.style.height="100%"):(e.style.width=T+"px",e.style.height=L+"px"))}function tt(){A&&(te=N.player.mediaVideo.duration?(N.player.vidDuration.innerHTML=Pi(N.player.mediaVideo.duration),N.player.mediaVideo.duration):(N.player.vidDuration.innerHTML=Pi(_.getCurrentVideoDuration()),_.getCurrentVideoDuration()))}function it(){var e=_.getCurrentVideoObj(),t=$||e.lnks;if(t){var i=ht(t,Math.floor(Zt()));return i&&i.url?i:null}return null}function nt(){var e=it(),t=_.getCurrentVideoObj(),i=!1;if(e){var n;if(void 0!==t.pxl&&void 0!==t.pxl.ctacntclick&&""!=t.pxl.ctacntclick&&(st(dt(t.pxl.ctacntclick)),window.playerLog("notifyPixelsFire","native click")),Z)s&&s.notify("click",{widgetId:a,video:N.player.mediaVideo,clickedElement:"native click",url:e.url}),E.dispatchEvent(new CustomEvent("videoLinkOpened",{detail:{videoTitle:_.getCurrentVideoTitle(),playerElementId:E.id,nativeClickURL:null===(n=it())||void 0===n?void 0:n.url}})),i=!0,window.open(e.url,"_blank");else location.href=e.url;N.player.mediaVideo.paused||(i=!0,Rt())}else if(A){var r=_.getCurrentVideoObj();r.lnks&&(e=ht(r.lnks,Math.floor(Zt())))&&e.url&&(void 0!==e.pxl&&""!=e.pxl&&st(dt(e.pxl)),Z?(s&&s.notify("click",{widgetId:a,video:N.player.mediaVideo,clickedElement:"native click",url:e.url}),window.open(e.url,"_blank")):(s&&s.notify("click",{widgetId:a,video:N.player.mediaVideo,clickedElement:"native click",url:e.url}),location.href=e.url),N.player.mediaVideo.paused||(i=!0,Rt()))}return i}function rt(){var e,t="";switch(A&&(t=_.getCurrentVideoLanguage2LettersCode()),t){case"fr":e="Lire l'article";break;case"pt":e="Leia mais";break;case"es":e="Lea el artÃ­culo";break;case"id":e="Lihat Artikel";break;case"ja":e="è¨˜äº‹ã‚’èª­ã‚€";break;case"zh":e="é–±è®€å…¨æ–‡";break;case"he":e="×ž×¢×‘×¨ ×œ×›×ª×‘×”";break;case"nl":e="lees artikel";break;case"de":e="Artikel Lesen";break;case"ru":e="Ð¡Ð¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ";break;case"it":e="leggi di piÃ¹";break;case"tr":e="Ä°Ã§eriÄŸi oku";break;case"ro":e="CiteÈ™te articolul";break;default:e="Read Article"}return e}function at(){ee=Object(Ci.a)(E).height}function ot(e){for(var t=""+parseInt(99999999*Math.random(),10);8!==t.length;)t="0"+t;return e+"&cb="+t}function st(e){if(e=ot(e),"object"!==("undefined"==typeof window?"undefined":Hi(window))||"undefined"==typeof Image){var t=new XMLHttpRequest;t.open("get",e,!0),t.send()}else{(new Image).src=e}}function lt(){return r)return r+"?e="+e}function ut(){return!A}function ct(){if(A&&!b&&(b=!0,r&&A)){window.playerLog("fireContentImpression");var e=function(){if(r&&A){var e=_.getCurrentVideoObj();if(void 0!==e.pxl&&void 0!==e.pxl.cnt)return r+"?e="+e.pxl.cnt+"&cb="+(new Date).getTime()}return null}();e&&Object(_i.b)(e)}}function ht(e,t){for(var i=0;i<e.length;i++){if(e[i].startTime<=t&&null==e[i].endTime)return e[i];if(e[i].startTime<=t&&t<e[i].endTime)return e[i]}return!1}function ft(){var e=_.getCurrentVideoObj().t,t=E.getElementsByClassName("videoTitle");t[0].setAttribute("title",e),t[0].textContent=e}function pt(e){for(var t=e.relatedTarget;null!ntNode}mt()}function gt(){clearTimeout(U)}function mt(){(z?ut():ut()||!e&&J!=Gi)out(U),U=setTimeout(function(){lt()&&yt()},3e3))}function vt(){de=!0,N.buttonsOverlay.overlay.style.display="block",N.buttonsOverlay.overlay.firstChild.style.display="block",N.buttonsOverlay.overlayPlayButton.style.display=J==Wi||J==Gi?"block":"none",N.player.mediaControls.style.display="block",N.player.overlay.style.display="block"}function yt(){de=!1,N.buttonsOverlay.overlay.style.display="none",N.buttonsOverlay.overlay.firstChild.style.display="none",N.buttonsOverlay.overlayPlayButton.style.display="none",N.player.mediaControls.style.display="nle.display="none"}function bt(){e=!0,mt()}function wt(){(e=!1)||J==Gi||lt()&&(clearTimeout(U),U=null,yt())}function Et(){z||(N.player.mediaControls.addEventListener("mouseenter",gt),N.player.mediaControls.addEventListener("mouseout",pt),E.addEventListener("mouseenter",bt),E.addEventListener("mousemove",bt),E.addEventListener("mouseleave",wt),E.addEventListener("contextmenu",bi),N.player.overlay.addEventListener("contextmenu",bi)),N.player.volumeButton.addEventListener("click",Bt),N.player.mediaVideo.addEventListener("ended",Qt),N.player.mediaVideo.addEventListener("pause",zt),N.player.mediaVideo.addEventListener("volumechange",Gt),N.player.mediaVideo.addEventListener("play",jt),N.player.mediaVideo.addEventListener("playing",Ht),N.player.mediaVideo.addEventListener("timeupdate",Yt),N.player.mediaVideo.addEventListener("waiting",Ye),N.player.mediaVideo.addEventListener("stalled",Ye),N.player.mediaVideo.addEventListener("playing",Ke),N.player.mediaVideo.addEventListener("canplay",Ke),N.player.mediaVideo.addEventListener("canplaythrough",Ke),z?N.player.progressBarPadding.addEventListener("click",$t):(N.player.progressBarPadding.addEventListener("mouseup",ri),E.addEventListener("mouseup",ai),N.player.progressBarPadding.addEventListener("mousemove",oi),E.addEventListener("mousemove",si),N.player.progressBarPadding.addEventListener("mousedown",ii),function(){var e=E.getElementsByClassName("trv-progress-bar")[0];e.addEventListener("mouseenter",ci),e.addEventListener("mouseleave",hi)}()),z||(N.player.volumeButton.addEventListener("mouseenter",fi),N.player.volumeContainer.addEventListener("mouseenter",fi),N.player.volumeButton.addEventListener("mouseleave",pi),N.player.volumeContainer.addEventListener("mouseleave",pi),function(){for(var e=[N.player.volumeBar,N.player.volumeHandle,N.player.volumeContainer],t=0;t<e.length;t++)e[t].addEventListener("mousedown",li)}()),function(){var e=N.player.mediaPlayer.getElementsByClassName("togglePlayPause")[0],t=N.player.mediaPlayer.getElementsByClassName("overlay-play-wrapper")[0],i=N.player.mediaPlayer.getElementsByClassName("overlayBtnWrapper")[0],n=N.player.mediaPlayer.getElementsByClassName("video-overlay")[0];e.addEventListener("click",Pt),t.addEventListener("click",Pt),i.addEventListener("click",It),n.addEventListener("click",It)}(),N.player.mediaVideo.addEventListener("click",Ct),N.player.overlay.addEventListener("click",Ct),ce||(ce=!0,function(){ne=document.fullscreenEnabled?E:N.player.mediaVideo;$e(ne)&&(N.player.fullScreen.addEventListener("click",kt),document.addEventListener("fullscreenChange",Tt),document.addEventListener("fullscreenchange",Tt),document.addEventListener("mozfullscreenchange",Tt),document.addEventListener("webkitfullscreenchange",Tt),document.addEventListener("msfullscreenchange",Tt))}()),N.player.truvidLogo.addEventListener("click",At)}function St(){z||(N.player.mediaControls.removeEventListener("mouseenter",gt),N.player.mediaControls.removeEventListener("mouseout",pt),E.removeEventListener("mouseenter",bt),E.removeEventListener("mousemove",bt),E.removeEventListener("mouseleave",wt),E.removeEventListener("contextmenu",bi),N.player.overlay.removeEventListener("contextmenu",bi)),N.player.volumeButton.removeEventListener("click",Bt),N.player.mediaVideo.removeEventListener("pause",zt),N.player.mediaVideo.removeEventListener("ended",Qt),N.player.mediaVideo.removeEventListener("play",jt),N.player.mediaVideo.removeEventListener("playing",Ht),N.player.mediaVideo.removeEventListener("volumechange",Gt),N.player.mediaVideo.removeEventListener("timeupdate",Yt),N.player.mediaVideo.removeEventListener("waiting",Ye),N.player.mediaVideo.removeEventListener("stalled",Ye),N.player.mediaVideo.removeEventListener("playing",Ke),N.player.mediaVideo.removeEventListener("canplay",Ke),N.player.mediaVideo.removeEventListener("canplaythrough",Ke),z?N.player.progressBarPadding.removeEventListener("click",$t):(N.player.progressBarPadding.removeEventListener("mousedown",ii),N.player.progressBarPadding.removeEventListener("mouseup",ri),E.removeEventListener("mouseup",ai),N.player.progressBarPadding.removeEventListener("mousemove",oi),E.removeEventListener("mousemove",si),function(){var e=E.getElementsByClassName("trv-progress-bar")[0];e.removeEventListener("mouseenter",ci),e.removeEventListener("mouseleave",hi)}()),z||(N.player.volumeButton.removeEventListener("mouseenter",fi),N.player.volumeContainer.removeEventListener("mouseenter",fi),N.player.volumeButton.removeEventListener("mouseleave",pi),N.player.volumeContainer.removeEventListener("mouseleave",pi),function(){for(var e=[N.player.volumeBar,N.player.volumeHandle,N.player.volumeContainer],t=0;t<e.length;t++)e[t].removeEventListener("mousedown",li)}()),function(){var e=N.player.mediaPlayer.getElementsByClassName("togglePlayPause")[0],t=N.player.mediaPlayer.getElementsByClassName("overlay-play-wrapper")[0],i=N.player.mediaPlayer.getElementsByClassName("overlayBtnWrapper")[0],n=N.player.mediaPlayer.getElementsByClassName("video-overlay")[0];e&&e.removeEventListener("click",It);t&&t.removeEventListener("click",It);i&&i.removeEventListener("click",It);n&&n.removeEventListener("click",It)}(),N.player.mediaVideo.removeEventListener("click",Ct),N.player.overlay.removeEventListener("click",Ct),N.player.truvidLogo.removeEventListener("click",At)}function At(){s&&s.notify("click",{widgetId:a,video:N.player.mediaVideo,clickedElement:"truvid logo"}),window.open("https://truvid.com/library","_blank")}function Tt(){Oi(ne,N.player.mediaVideo)?(N.player.poster.style.backgroundSize="contain",N.player.mediaVideo.style.position="fixed",N.player.mediaControls.style.position="fixed",mt()):(N.player.poster.style.backgroundSize="cover",N.player.mediaVideo.style.position="",N.player.mediaControls.style.position=""),mi(),E.dispatchEvent(new CustomEvent("onFullScreenChange",{detail:{isFullScreen:Oi()}}))}function Lt(){s&&s.notify("click",{widgetId:a,video:N.player.mediaVideo,clickedElement:"video click"});var e=!1;nt()&&(e=!0),z?(de&&(J!=Wi||e?e=!0:(J=zi,Ve())),mt(),e&&(Ee=!0,J=Wi,We(),Ve())):(J==zi?J=Wi:e||J!=Wi?J==Gi&&(J=zi):J=zi,J==Wi&&We(),Ve())}function Ct(e){e.preventDefault(),e.stopPropagation(),re++,ie?1==re&&setTimeout(function(){1==re?Lt():it()?Lt():kt();re=0}.bind(this),y):Lt(),E.dispatchEvent(new CustomEvent("click",{detail:{videoTitle:_.getCurrentVideoTitle(),playerElementId:E.id}}))}function kt(){s&&s.notify("click",{widgetId:a,video:N.player.mediaVideo,clickedElement:"fullscreen"}),function(e){document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled?document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.cancelFullScreen?document.cancelFullScreen():document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen&&e.msRequestFullscreen():e.webkitSupportsFullscreen&&(e.webkitDisplayingFullscreen?e.webkitExitFullscreen():e.webkitEnterFullscreen())}(ne)}function xt(e){if(x&&x.initializeAdManagers(),N.player.mediaVideo.ended)Ti(N.player.mediaVideo).then(function(){J=zi,Q=!0,Mt(),mt(),E.dispatchEvent(new CustomEvent("onUserMediaPlay"))}).catch(function(e){Object(_i.a)("setPlayPauseButtonsCallbackSingleClickplayVideoElementErr",{wid:a},e)});else if(N.player.mediaVideo.paused){var t=it();"overlayBtnWrapper"==e.srcElement.className&&t?nt():(J=zi,Ti(N.player.mediaVideo).then(function(){J=zi,Q=!0,Mt(),mt(),E.dispatchEvent(new CustomEvent("onUserMediaPlay"))}).catch(function(e){Object(_i.a)("setPlayPauseButtonsCallbackSingleClickplayVideoElementErr2",{wid:a},e)}))}else J=Wi,Ee=!0,Ot(N.player.mediaVideo),J=Wi,e&&"overlayBtnWrapper"==e.srcElement.className&&!H&&nt(),Dt(),x&&x.killBiddingSession(),E.dispatchEvent(new CustomEvent("onUserMediaPause"))}function It(e){e.preventDefault(),e.stopPropagation(),ie?1==++ae&&setTimeout(function(){1==ae?xt(e):it()?Lt():kt();ae=0}.bind(this),y):xt(e)}function Pt(e){s&&s.notify("click",{widgetId:a,video:N.player.mediaVideo,It(e)}function Ot(e){e.paused||e.pause()}function Rt(){J=Wi,Ot(N.player.mediaVideo),Dt()}function Dt(){vt();var e=N.player.mediaPlayer.getElementsByClassName("togglePlayPause")[0];e.setAttribute("title","Play"),e.style.backgroundPosition="-82px -8px",N.player.mediaControls.style.display="block"}function Mt(){yt();var e=N.player.mediaPlayer.getElementsByClassName("togglePlayPause")[0];e.setAttribute("title","Pause"),e.style.backgroundPosition="-48px -8px",N.player.mediaControls.style.display="none"}function Bt(){s&&s.notify("click",{widgetId:a,video:N.player.mediaVideo,clickedElement:"volume icon"}),Ut()}function Ft(){N.player.mediaVideo.volume=0,N.player.mediaVideo.muted=!0}function Nt(){Ft(),Vt(),E.dispatchEvent(new CustomEvent("onMute"))}function _t(){N.player.mediaVideo.volume=1,N.player.mediaVideo.muted=!1,Vt(),E.dispatchEvent(new CustomEvent("onUnmute"))}function Ut(){N.player.mediaVideo.muted?_t():Nt()}function Vt(){N.player.volumeButton.style.backgroundPosition=(N.player.mediaVideo.muted?"-115":"-100")+"px -10px";var e=100*N.player.mediaVideo.volume;N.player.mediaVideo.muted?(N.player.activeVolume&&(N.player.activeVolume.style.height="0%"),N.player.volumeHandle&&(N.player.volumeHandle.style.top="100%")):(N.player.activeVolume&&(N.player.activeVolume.style.height=e+"%"),N.player.volumeHandle&&(N.player.volumeHandle.style.top=Math.abs(100-e)+"%"))}function jt(){Ee=!1,E.dispatchEvent(new CustomEvent($i)),mt()}function Ht(){Se&&Se.Hide(),J=zi,Q=!0}function Gt(){x&&x.onContentVolumeChange(),c&&ti()}function zt(){E.dispatchEvent(new CustomEvent(en)),N.player.mediaVideo.ended||J==zi&&(J=Wi,Ve())}function Wt(){N.player.bufferBar.style.width="0%",N.player.playProgressBar.style.width="0%",N.player.progressButton.style.left="0"}function Qt(){x&&x.onVideoEnd(),window.playerLog("onVideoEnd"),E.dispatchEvent(new CustomEvent(nn)),qt(),Pe||(K=0,A&&wi())}function qt(){A?_.isPlaylistFinished()&&(window.playerLog("playlist finished"),0!=P&&0!=P||!fe||pe||Li(),!1!==P&&P--):!1!==P&&P--,window.playerLog("decreaseRepeatCounter","Repeat counter",P)}function Yt(){!function(){if(_&&_.getCurrentVideoObj().hra)return;var e;if($){var t;e=ht($,Math.floor(Zt())),null!==(t=e)&&void 0!==t&&t.url&&N.player.mediaVideo.currentTime?(Y!=e.url&&Kt(),Y=e.url,Xt()):(Y=null,Jt())}if(A){var i=_.getCurrentVideoObj();i.lnks&&i.lnks.length&&((e=ht(i.lnks,Math.floor(Zt())))&&e.url?(Y!=e.url&&Kt(),Y=e.url,Xt()):(Y=null,Jt()))}}(),function(){if(!V){var e=Math.floor(N.player.mediaVideo.currentTime/N.player.mediaVideo.duration*100),t=N.player.mediaPlayer.clientWidth*e/100;N.player.playProgressBar.style.width=t+"px";var i=N.player.mediaPlayer.clientWidth,n=Math.min(e*i/100,i-20);N.player.progressButton.style.left=n+"px"}}(),N.player.currentTime.innerHTML=Pi(N.player.mediaVideo.currentTime),0<N.player.mediaVideo.currentTime&&E.dispatchEvent(new CustomEvent(Ji,{detail:{currentTime:N.player.mediaVideo.currentTime}}))}function Kt(){var e=E.getElementsByClassName("links-button");e.length&&(e[0].classList.add("highlight"),setTimeout(function(){e[0].classList.remove("highlight"),setTimeout(function(){tion(){e[0].classList.remove("highlight")},250)},100)},250))}function Xt(){E.getElementsByClassName("links-overlay").length&&(E.getElementsByClassName("links-overlay")[0].style.display="block")}function Jt(){E.getElementsByClassName("links-overlay").length&&(E.getElementsByClassName(){return N.player.mediaVideo.currentTime}function $t(e){e.stopPropagation(),s&&s.notify("click",{widgetId:a,video:N.player.mediaVideo,clickedElement:"progress bar click"}),ei(ni(e.pageX)),c&&ti(),i&&t&&t.removeAutoSkip()}function ei(e){N.player.mediaVideo.currentmeChanged",{time:K=e})}function ti(){c=!1}function ii(e){V=!0,s&&s.notify("click",{widgetId:a,video:N.player.mediaVideo,clickedElement:"progress bar click"}),window.playerLog("mouse down progress bar"),ei(ni(e.pageX)),c&&ti(),i&&t&&t.removeAutoSkip(),E.dispatchEvent(new CustomEvent("seek",{detail:{currentTime:N.player.mediaVideo.currentTime}})),Ee=!1,J==Gi&&He()}function ni(e){var t=100*(e-N.player.playProgressBar.getBoundingClientRect().left)/N.player.mediaPlayer.clientWidth;t=isFinite(t)?t:100,t=Math.max(Math.min(t,100),Math.max(0,t));var i=N.player.mediaPlayer.clientWidth,n=Math.min(t*i/100,i-20);N.player.progressButton.style.left=n+"px";var r=N.player.mediaVideo.duration;r=r||_.getCurrentVideoDuration();var a=N.player.mediaPlayer.clientWidth*t/100;return N.player.playProgressBar.style.width=a+"px",N.player.progressButton.style.left=n+"px",r*t/100}function ri(e){V&&(V=!1,ei(ni(e.pageX)),c&&ti(),i&&t&&t.removeAutoSkip())}function ai(e){j&&(j=!1,ui(e.y&&0<e.y?e.y:e.pageY))}function oi(e){V&&ni(e.pageX),function(e){var t=100*(e-N.player.playProgressBar.getBoundingClientRect().left)/N.player.mediaPlayer.clientWidth;t=isFinite(t)?t:100,t=Math.max(Math.min(t,100),Math.max(0,t));var i=N.player.mediaPlayer.clientWidth*t/100;N.player.hoverProgressBar.style.width=i+"px"}(e.pageX)}function si(e){j&&ui(e.y&&0<e.y?e.y:e.pageY)}function li(e){e.stopPropagation(),j=!0,N.player.mediaVideo.muted&&Ut(),s&&s.notify("click",{widgetId:a,video:N.player.mediaVideo,clickedElement:"volume bar"}),ui(e.y&&0<e.y?e.y:e.pageY)}function di(e){var t=100*e,i=100-t;N.player.activeVolume&&(N.player.activeVolume.style.height=t+"%"),N.player.volumeHandle&&(N.player.volumeHandle.style.top=Math.abs(i)+"%"),N.player.mediaVideo.volume=e,0==N.player.mediaVideo.volume&&0==N.player.mediaVideo.muted&&Nt()}function ui(e){var t=100-100*(e-E.getElementsByClassName("volume-bar")[0].getBoundingClientRect().top)/N.player.volumeBar.getBoundingClientRect().height;t=isFinite(t)?t:100,di((t=Math.max(0,Math.min(t,100)))/100)}function ci(){this.style.height="6px",this.style.marginTop="8px",N.player.hoverProgressBar.style.height="6px",N.player.playProgressBar.style.height="6px",N.player.progressButton.style.height="20px",N.player.progressButton.style.width="20px",N.player.progressButton.style.top="-8px"}function hi(){this.style.height="3px",this.style.marginTop="8px",N.player.hoverProgressBar.style.height="0px",N.player.hoverProgressBar.style.width="0px",N.player.playProgressBar.style.height="3px",N.player.progressButton.style.height="3px",N.player.progressButton.style.width="3px",N.player.progressButton.style.top="0px"}function fi(){N.player.volumeContainer.style.display="none"}function gi(e){e<600?N.player.title.style.display="none":(N.player.title.style.display="inline-block",N.player.title.style.width=e-250+"px")}function mi(){window.playerLog("onWindowsResize"),at();var e=Object(Ci.a)(E);gi(e.width),vi(e.width,e.height),Je(e.width,e.height),E.dispatchEvent(new CustomEvent("windowResize",{detail:{playerWidth:e.width,playerHeight:e.height}}))}function vi(e){var t,i;i=t=e<300?45:300<=e&&e<=400?.15*e:65,N.buttonsOverlay&&N.buttonsOverlay.overlayPlayButton&&(N.buttonsOverlay.overlayPlayButton.style.width=t+"px",N.buttonsOverlay.overlayPlayButton.style.height=i+"px")}function yi(i,n,r){return new Promise(function(t){if(ut())t();else{var e=function(e){e&&(window.playerLog("restore time "+K),N.player.mediaVideo.currentTime=K),n&&Et(),Q&&J==zi?Ti(N.player.mediaVideo).then(function(){Se&&Se.Hide(),ct(),Mt()}).catch(function(e){Object(_i.a)("changePlayerSourceplayVideoElementErr",{wid:a},e),Dt()}):Dt(),N.player.mediaVideo.style.display="block",Vt(),t()};r||h.isUrlDifferentThanCurrentUrl(i.p)?(h.destroy(),h=new Ni(i,v),Ot(N.player.mediaVideo),h.loadVideoSource(K).then(function(){tt(),te=N.player.mediaVideo.duration,isNaN(te)?N.player.vidDuration.innerHTML=Pi(_.getCurrentVideoDuration()):N.player.vidDuration.innerHTML=Pi(N.player.mediaVideo.duration),e(!0)}).catch(function(e){Object(_i.a)("changePlayerSourceplayloadVideoSourceErr",{wid:a},e)})):e(!1)}})}function binu-"+E.id);e&&E.parentNode.removeChild(e)}();var t=function(e){var t=document.createElement("div"),i=function(e){var t={y:0,x:0};if(e.target==E)return t;var i=e.target;for(;i!=E;){if(i==N.player.mediaControls||N.buttonsOverlay&&i==N.buttonsOverlay.overlay.firstChild){t={y:i.offsetTop,x:e.target.offsetLeft};break}i=i.parentNode}return t}(e);return t.id="context-menu-"+E.id,t.style.top=E.offsetTop+e.offsetY+i.y+"px",t.style.left=E.offsetLeft+e.offsetX+i.x+"px",function(t){function i(){clearTimeout(n),n=null,n=setTimeout(e,1500)}var e=function(){window.removeEventListener("mousemove",i),t&&t.parentNode==E.parentNode&&E.parentNode.removeChild(t)},n=setTimeout(e,1500),r=t.style.backgroundColor;window.addEventListener("click",function e(){window.removeEventListener("click",e),window.removeEventListener("mousemove",i),t&&t.parentNode==E.parentNode&&E.parentNode.removeChild(t)}),window.addEventListenerruvid.com/terms/privacy-policy","_blank")});function a(e){t.style.backgroundColor="mouseenter"==e.type?"black":r}t.addEventListener("mouseenter",a),t.addEventListener("mouseleave",a)}(t),t}(e);t.appendChild(function(){var e=document.createElement("div"),t=document.createElement("div");return e.className="context-menu-icon-container",t.className="context-menu-icon",e.appendChild(t),e}()),t.appendChild(function(){var e=document.createElement("div"),t=document.createElement("div");return e.className="context-menu-text-container",t.className="context-menu-text",t.innerHTML='Powered by truvid<span style="font-size: 10px;line-height:15px;">&trade;</span>',e.appendChild(t),e}()),E.parentNode.appendChild(t)}(e),!1}function wi(){if(window.playerLog("forward"),_){var e=Si();_.forward(),e&&Se&&Se.Show(),Ai(e)}}function Ei(){n=!0}function Si(){var e=_&&_.isPlaylistFinished()&&(!I||!(!1===P||0<=P));return e&&(0==P&&(P=O),E.dispatchEvent(new CustomEvent("playlistEnd"))),n?n=!1:e}function Ai(i){_&&(x&&x.killBiddingSession(),ge.DispatchPromiseEvent(Zi,{detail:{switchToCTP:i}}).then(function(){K=0,b=!1;var e=_.getFileToPlay();Wt(),Jt(),i&&(J=Gi,Dt(),E.dispatchEvent(new CustomEvent("loopEnds")));function t(){te=_.getCurrentVideoDuration(),N.player.mediaVideo.duration?N.player.vidDuration.innerHTML=Pi(N.player.mediaVideo.duration):N.player.vidDuration.innerHTML=Pi(_.getCurrentVideoDuration()),ft(),Jt(),function(){var e=N.player.mediaPlayer.getElementsByClassName(".links-button");e.length&&((e=e[0]).innerHTML=rt())}(),E.dispatchEvent(new CustomEvent(Xi,{detail:{fileToPlay:_.getCurrentVideoObj()}}))}Ie?yi(e,!1,!0).then(function(){t()}):(N.player.mediaVideo.currentTime=0,h.destroy(),h=new Ni(e,v),t())}).catch(function(e){Object(_i.a)("onSwitchToNewVideoErr",{wid:a},e)}))}function Ti(r){return new Promise(function(e,t){Ee=!1;function i(){r.removeEventListener("playing",i),window.playerLog("playing callback"),r.paused?(window.playerLog("video is not playing somehow"),t()):(ct(),e())}r.addEventListener("playing",i),window.playerLog("play video element");var n=h.play(K);n?n.then(i).catch(function(e){Object(_i.a)("rejectCallbackErr",{wid:a},e),window.playerLog("reject while playing video"),r.removeE(){r.removeEventListener("playing",i),t()},5e3)})}function Li(){Pe=!0,window.playerLog("player destroyed"),Ft(),ge&&ge.removeSubscribers(),ze(),We(),Ue(),ke.style.display="none",E.dispatchEvent(new CustomEvent(tn))}this.getSellersJsonId=function(){return De},this.getParentElement=function(){return Te},this.getWrapperElement=function(){return Le},this.resizeAds=function(){x&&x.onPlayerResize()},this.setConsentString=function(e){Me=e},this.getConsentString=function(){return Me},this.setGdprApplies=function(e){Be=e},this.getGdprApplies=function(){return Be},this.onPlayerViewabilityCallback=function(e){q=e[0].isIntersecting,window.playerLog("viewability change, viewable: "+q),E.dispatchEvent(new CustomEvent(Yi,{detail:{isPlayerViewable:back=function(e){this.dispatchEvent(Ki,e)},this.Show=his.Hide=function(){ke.style.height="0px"},this.isPlayerInView=function(){return g.isElementInView()},this.getPlayerStoppedOnPageVisibiltiyEvent=function(){return ye},this.onTogglePlayPauseButtonCallback=fn=function(e){x&&x.startBiddingSession(e)},this.isResponsive=function(){return W},this.SetLoadVideoOnPlaylistChange=function(e){Ie=e},this.getPlayerElements=function(){return N},this.getHeight=function(){return L},this.getWidth=function(){return T},this.getFirstTimeHLSInit=function(){return ve},this.setFirstTimeHLSInit=function(e){ve=e},this.getIsPageVisible=function(){return we},this.getPauseOnHiddenTab=function(){return be},this.getPlayerPausedOnUserBehalf=function(){return Ee},this.setPlayerPausedOnUserBehalf=function(e){Ee=e},this.dispatchEvent=functi(e,t){return ge.DispatchPromiseEvent(e,t)},this.setup=function(e,t){!function(e){A=Qe(e.playlistContent,!1),T=Qe(e.width,600),L=Qe(e.height,480),C=Qe(e.autoplay,!1),k=Qe(e.mute,!1),I=Qe(e.repeat,!1),P=Qe(e.repeatCounter,!1),null==e.repeatCounter&&e.repeat&&(pe=!0);G=e.widgetType,D=Qe(e.debugMessages,!1),M=Qe(e.startHidden&&0!=e.startHidden,!1),B=Qe(e.opportunityPixel,null),r=Qe(e.pixelPath,"#"),F=Qe(e.playerLoadPixel,null),H=Qe(e.isNetworkWidget,!1),(z=Ze())&&(Qe(e.mobileEnvironment,!1),Qe(e.mobileOS,!1));O=P,W=Qe(e.isResponsive,!1),S=Qe(e.ads,null),X=Qe(e.vastPath,null),C||(Q=!1);Z=Qe(e.isNativeClickOpensNewWindow,!0),$=Qe(e.videoLinks,null),ie=Qe(e.isFullscreen,!1),o=Qe(e.geoLocation,null),a=e.widgetId,oe=Qe(e.pageUrl,""),se=Qe(e.domain,""),le=Qe(e.ip,""),s=e.apiObservable,ue=e.subUserId,fe=Qe(e.hideOnPlaylistComplete,!1),d=Qe(e.autoSkipDuration,0),u=Qe(e.autoSkipTimeToStopPlayer,0),c=0<u&&0<d,be=Qe(e.pauseOnHiddenTab,!1),Te=e.playerElement,Ae=Qe(e.playerId,"br_video_player"),Ce=Qe(e.floaterSettings,null),Oe=Qe(e.osVersion,""),Re=Qe(e.osFamily,""),De=Qe(e.sellersJsonId,""),void 0===e.elemId||Te||(Te=document.getElementById(e.elemId.replace(/^#/,"")));Fe=Qe(e.fia,!1),Ne=Qe(e.playOnlyMp4,!1)}(e),F&&!he&&(he=!0,Object(_i.b)(F)),window.playerLog=D?function(){var e=arguments[0],t=Qe(arguments[1],""),i=Qe(Array.prototype.slice.call(arguments,2),""),n=new Date;console.log(n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+" "+e+" | "+t,i)}:function(){},this.setMediaVideo(),function(){if(Object(Ci.b)())if(W){window.frameElement.style.position="absolute",window.frameElement.style.width="100%",window.frameElement.style.height="100%",window.frameElement.id&&0<=window.frameElement.id.indexOf("google_ads_iframe")?(window.frameElement.style.top="0px",window.frameElement.style.left="0px",window.frameElement.parentElement.style.position="relative"):""==window.frameElement.parentElement.innerText&&(window.frameElement.parentElement.style.position="relative",window.frameElement.style.top="0px",window.frameElement.style.left="0px");var e=(L/T*100).toFixed(2);window.frameElement.parentElement.style.paddingBottom=e+"%",window.frameElement.parentElement.style.display="block",1!=window.frameElement.parentElement.offsetHeight&&1!=window.frameElement.parentElement.offsetWidth||(window.frameElement.parentElement.style.width="100%",window.frameElement.parentElement.style.height="100%"),window.frameElement.parentElement.parentElement&&1==window.frameElement.parentElement.parentElement.offsetHeight&&(window.frameElement.parentElement.parentElement.style.width="100%",window.frameElement.parentElement.parentElement.style.height="100%")}else window.frameElement.style.width=this.width+"px",window.frameElement.style.height=this.height+"px",window.frameElement.parentElement&&1==window.frameElement.parentElement.offsetHeight&&(window.frameElement.parentElement.style.width=this.width+"px",window.frameElement.parentElement.style.height=this.height+"px"),window.frameElement.parentElement.parentElement&&1==window.frameElement.parentElement.parentElement.offsetHeight&&(window.frameElement.parentElement.parentElement.style.width=this.width+"px",window.frameElement.parentElement.parentElement.style.height=this.height+"px")}(),Te.parentElement&&(et(Te.parentElement),Te.parentElement.parentElement&&(et(Te.parentElement.parentElement),Te.parentElement.parentElement.parentElement&&et(Te.parentElement.parentElement.parentElement))),function(){var e=E.getElementsByClassName("media-player")[0];(N={player:{mediaPlayer:e,mediaControls:e.getElementsByClassName("trv-media-controls")[0],mediaVideo:e.getElementsByClassName("media-video")[0],progressBar:e.getElementsByClassName("trv-progress-bar")[0],progressBarPadding:e.getElementsByClassName("trv-progress-padding")[0],playProgressBar:e.getElementsByClassName("trv-play-progress")[0],hoverProgressBar:e.getElementsByClassName("trv-hover-progress")[0],progressButton:e.getElementsByClassName("trv-progressBtn")[0],bufferBar:e.getElementsByClassName("trv-buffered")[0],currentTime:e.getElementsByClassName("trv-currentTime")[0],vidDuration:e.getElementsByClassName("trv-duration")[0],volumeButton:e.getElementsByClassName("volume")[0],volumeHandle:e.getElementsByClassName("volumeHandle")[0],volumeContainer:e.getElementsByClassName("volume-container")[0],activeVolume:e.getElementsByClassName("active-volume")[0],volumeBar:e.getElementsByClassName("volume-bar")[0],togglePlayPause:e.getElementsByClassName("togglePlayPause")[0],poster:e.getElementsByClassName("trv-poster")[0],title:e.getElementsByClassName("videoTitle")[0],overlay:e.getElementsByClassName("trv-overlay")[0],truvidLogo:e.getElementsByClassName("BR")[0]}}).player.fullScreen=e.getElementsByClassName("fullScreen")[0]}(),ut()||"floater"==G?N.player.poster.style.display="none":Se=new Vi(v),Ce&&(m=new ji.a(v,Ce)),this.setupViewability();var i=new Fi(this);void 0!==window.trv_players?window.trv_players.push(i):window.trv_players=[i],void 0!==window.onTruvidPlayerAdded&&"function"==typeof window.onTruvidPlayerAdded&&window.onTruvidPlayerAdded(i),Ne||(f=ki.a.isSupported()),k&&Nt(),l=new Di(E);var n=function(){this.setAdsQueue().then(function(){t&&"function"==typeof t&&t(),function(){return new Promise(function(e){ut()?e():Q?Ve().then(function(){e()}.bind(this)).catch(function(e){Object(_i.a)("startContentwhenPlayingContentAllowedError",{wid:a},e)}):(je(),e())}.bind(this))}().then(function(){this.onPlayerReady()}.bind(this))}.bind(this)).catch(function(e){Object(_i.a)("whenContentReadyError",{wid:a},e)}.bind(this)),c&&this.initAutoSkip()}.bind(this);ut()?qe():(function(){var e=N.player.mediaPlayer,t=document.createElement("div");t.className="video-overlay",t.innerHTML='<div class="overlayBtnWrapper"><div class="overlay-backwards-wrapper"><svg class="small-nav small-nav-l overlay-backwards" stroke="#FFFFFF"><path d="m 11,20 L 6,25 L 11,30" stroke-width="2" fill="none" stroke-linecap="round"></path></svg></div><div class="overlay-play-wrapper"><div class="overlay-play-pause"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve" fill="#FFFFFF"><g><path d="M500,990C229.8,990,10,770.2,10,500C10,229.8,229.8,10,500,10c270.2,0,490,219.8,490,490C990,770.2,770.2,990,500,990z M500,56.7C255.5,56.7,56.7,255.5,56.7,500c0,244.5,198.9,443.3,443.3,443.3S943.3,744.5,943.3,500C943.3,255.5,744.5,56.7,500,56.7z"/><path d="M348.3,220l420,280l-420,280V220z"/></g>\n</svg></div></div><div class="overlay-forward-wrapper"><svg class="small-nav small-nav-r overlay-forward" stroke="#FFFFFF"><path d="m 9,20 L 14,25 L 9,30" stroke-width="2" fill="none" stroke-linecap="round"></path></svg></div></div>',e.appendChild(t)}(),function(){var e=N.player.mediaPlayer;N.buttonsOverlay={overlay:e.getElementsByClassName("video-overlay")[0],overlayPlayButton:e.getElementsByClassName("overlay-play-pause")[0],overlayBackwardButton:e.getElementsByClassName("overlay-backwards")[0],overlayForwardButton:e.getElementsByClassName("overlay-forward")[0]}}(),this.setContentVideo(),function(){var e=N.player.mediaPlayer,t=document.createElement("div");t.innerHTML='<div class="links-overlay"><div class="links-button">'+rt()+"</div></div>",e.appendChild(t.firstChild),e.getElementsByClassName("links-button")[0].onclick=function(){nt()}}(),Et(),function(e){var t,i;void 0!==document.hidden?(t="hidden",i="visibilitychange"):void 0!==document.mozHidden?(t="mozHidden",i="mozvisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",i="webkitvisibilitychange"),void 0!==document[t]&&("hidden"==document.visibiliventListener(i,function(){e(!document[t])},!1))}(function(e){(we=e)?(window.playerLog("Page in view"),be&&(Q=!0,ye&&(ye=!1,He()))):(window.playerLog("Page out of view"),be&&(ye=!(Q=!1),J==zi&&Ge(!0)))})),n()},this.setHLSCurrentLeveltHLSCurrentLevel=function(){return p?0:me},this.initAutoSkip=function(){(t=new Mi(this)).initAutoSkipElements(this.getPlayerElement()),this.subscribe(Ji,this.showAutoSkip)},this.setupViewability=function(){g=new Ui({elementToTrack:E,callback:this.onPlayerViewabilityCallback.bind(this)}),new Ui({elementToTrack:ke,callback:this.onContainerViewabilityCallback.bind(this)})},this.getHlsActive=function(){return f},this.switchToVideoIndex=function(e){_&&(_.switchToVideoIndex(e),x&&(x.stopAd(),We()),Ai(!1))},this.getEventSubscribersService=function(){return ge},this.removePlayerListeners=function(){Ue()},this.showAutoSkip=function(){i||Math.round(N.player.mediaVideo.currentTime)!==u||(i=!0,t.initAutoSkipkip())},this.hideAutoSkip=function(){i=!1},this.setIsAdPlaying=function(e){w=e},this.isAdPlaying=function(){rion(){m&&m.ForcePlayingAdsOnlyOnFloateturn m.GetForcePlayingAdsOnlyOnFloater()},this.isSavingModeForContentRunning=function(){return p},this.EnableSavingModeForContent=function(){window.playerLog("setting saving mode to true"),p=!0,void 0===h.EnableSavingModeForContent||w||J!=zi||h.EnableSavingModeForContent()},this.DisableSavingModeForContent=function(){window.playerLog("setting saving mode to false"),p=!1,h&&void 0!==h.DisableSavingModeForContent&&!w&&h.DisableSavingModeForContent()},this.subscribe=function(e,t){null==ge?R.push({eventName:e,callbabscribe=function(e,t){ge.iaVideo.src="",N.player.mediaVideo.load()},this.play=function(){He()},this.pausetVideo=function(){Ot(N.player.mediaVideo)},this.skip=function(){ze()},this.startPendingAd=function(){window.playerLog("start pending ad","Start ad"),w=!dingAd()},this.updateAdOnly=function(e){e},this.getPlaylist=function(){return _},this.playerState=function(){return w?x.advertisingState():{paused:N.player.mediaVideo.paused||N.player.mediaVideo.ended}},this.killBiddingSession=function(){We()},this.getOSFamily=function(){return Re},this.getOSVersion=function(){return Oe},this.isNetworkWidget=function(){return H},this.setCurrentVolume=function(e){0<e?_t():Nt()},this.SetAllowStartingContentOnPlayRequest=function(e){Q=e},this.IsFloaterAvailable=function(){return m&en=function(){return m&&m.Isg("set new player contection(){return Oi(ne,N.ion(){return!!m&&m.IsAvailableForAdOnly()},this.canPlayType=function(e){return!e||("application/vnd.apple.mpegURL"==e?f:0<N.player.mediaVideo.canPlayType(e).length)},this.getCurrentResolution=function(){return ee},this.getWiddeo=function(){return N.player.mediaVideo},this.getOpportunityPixel=function(){return ot(B)},this.getVastPath=function(){return X},this.getPlayerContentStatus=function(){return J},this.isMediaPlayingIsDifferentThanContent=function(){return function(){{if(ut())return!0;var e=_.getFileToPlay().p;return!!h.isUrlDifferentThanCurrentUrl(e)||N.player.mediaVideo.paused&&J==zi}}()},this.getCurrentVolume=function(){return 1==N.player.mediaVideo.muted?0:N.player.tion(){return this.getEleension=function(e){return Object(Ci.a)(e)},this.getDuration=function(){return te},this.getPlaylistContent=function(){return A},this.getSubUserId=function(){return ue},this.getPageUrl=function(){return oe},this.getGeoLocation=function(){return o},this.getIp=function(){return le},this.IsPlayerViewable=function(){return q},this.getPlayerWidth=function(){return T},this.getPlayerHeight=function(){return L},this.getDomain=function(){return se},this.getWidgetId=function(){return a},this.getApiObservable=function(){return s},this.isMobile=function(){return z},this.updateCurrentContentTimeState=function(){0<N.player.mediaVideo.currentTime&&(K=N.player.mediaVideo.currentTime)},this.getCurrentVideoObj=function(){return _.getCurrentVideoObj()},this.saveContentState=function(e){!function(e){ut()||(St(),qe(),e&&Ot(N.player.mediaVideo),h.destroy())}(e)},this.getCurrentVideoUrl=function(){return _.getCurrentVideoUrl()},this.stopSpinner=function(){l.stopSpinner()},this.startSpinner=function(){l.isSpinnerExist()||(Ot(N.player.mediaVi,this.resizeSpinner=function(e,t){Je(e,t)},this.restoreContentState=function(){w=!1,_&&xe&&yi(_.getFileToPlay(),!0,!1)},this.SetAllowRestoringContent=function(e){xe=e},this.getCurrentContentTime=function(){return Zt()},this.isBiddingSessionRunning=function(){if(x)return null!==x.currentBidSession},this.setAdsQueue=function(){return new Promise(function(t){if(S)try{(x=new Ii.d(S,v)).init().then(function(){this.subscribe(Ii.c,function(){qe()}),t()}.bind(this)).catch(function(e){window.playerLog("error loading ads library",e),Object(_i.a)("errorinitads",{wid:a},e),t()})}catch(e){Object(_i.a)("error new ads",{wid:a},e),window.playerLog(e)}else t()}.bind(this))},this.setMediaVideo=function(){var e=function(){var e=document.createElement("video");e.setAttribute("disableremoteplayback",""),e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline",""),k&&(e.setAttribute("muted",""),e.volume=0,window.playerLog("mute video"));return e.preload="metadata",e.controls=!1,e.className="media-video",e}(),t=this.setupPlayerHtml(e.outerHTML);Te.appendChild(t)},this.getCurrentVideoDuration=function(){return te},this.setupPlayerHtml=function(e){var t=document.createElement("div");t.className="trv-player-container","floater"!=G&&(t.style.position="relative");var i=document.createElement("div");i.className="trv-wrapper",Le=i;var n=(L/T*100).toFixed(2);t.appendChild(i);var r=document.createElement("div");r.id=Ae,r.className="trvd_video_player",ke=t,M&&(ke.style.height="0px"),function(e){E=e,ge=new Bi,ge.setPlayerElement(E);for(var t=0;t<R.length;t++)ge.subscribe(R[t].eventName,R[t].callback);R=[]}(r),i.appendChild(r),i.style.overflow="hidden",this.isResponsive()?(t.style.width="100%",i.style.paddingBottom=n+"%",r.style.position="absolute"):"floater"!=G&&(i.style.height=L+"px");var a='<div class="media-player"><div class="trv-video">{{video_placeholder}}</div><div class="trv-overlay"></div>';return z||(a+='<div class="volume-container"><div style="position: relative;"><div class="volume-bar"><div class="active-volume"></div></div></div><div class="button-holder"><div class="volumeHandle"></div></div></div>'),a+='<div class="trv-media-controls"><div class="trv-progress-bar"><div class="trv-progress-padding"></div><div class="trv-buffered"></div><div class="trv-play-progress"></div><div class="trv-hover-progress"></div><div class="button-holder"><div class="trv-progressBtn"></div></div></div><button class="togglePlayPause brpBtn sprite-background" type="button" title="play">Play</button><button class="volume brpBtn sprite-background" type="button" title="volume">volume</button>',a+='<span class="trv-currentTime">00:00</span><span class="timeDivider">/</span><span class="trv-duration">00:00</span><span class="videoTitle"></span><button class="BR brpBtn sprite-background" type="button" title="Truvid.com">Truvid</button>',a+='<button class="fullScreen brpBtn sprite-background" style="display:none;" type="button" title="Full Screen">fullScreen</button>',a+='</div><div class="trv-poster"></div></div>'+function(e,t,i,n,r,a,o,s){var l=Ri,d={toggleDisplay:"all 0.5s cubic-bezier(0.23, 0.36, 0.45, 0.94)",overlay:"opacity 3s ease-in-out",controller:"opacity 0.2s ease-in-out",progressBar:"all 0.1s cubic-bezier(0.23, 0.36, 0.45, 0.94)"};e||(d.volumeBar="opacity 0.15s linear");var u='transparent url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABNoAAAAoCAYAAAAonpdLAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA25pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDphYzE1ODUxMS01M2M5LWQzNDYtOGZlNC1hZTI1ZmI5NTA4YzgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MEQ5RDQ5RDcwQ0UyMTFFOThFMTVFQThERTQzOThERDkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MEQ5RDQ5RDYwQ0UyMTFFOThFMTVFQThERTQzOThERDkiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MUQ3QUQ4Nzk3Q0I1MTFFNUIzMTRCMDIxQjZBMkU5NjUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MUQ3QUQ4N0E3Q0I1MTFFNUIzMTRCMDIxQjZBMkU5NjUiLz4gPC9yZGY6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") no-repeat 0 0',c='transparent url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAABSCAYAAADep209AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjAzQ0YyRjY3NTg0MTFFNTkxNTQ4OTU2Q0ExOUJEQjQiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjAzQ0YyRjU3NTg0MTFFNTkxNTQ4OTU2Q0ExOUJEQjQiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKFdpbmRvd3MpIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NzRGRDYzQTMyQkFCMTFFNUJENzVDNDJCMTc1QTVCRDUiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NzRGRDYzQTQyQkFCMTFFNUJENzVDNDJCMTc1QTVCRDUiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6D4FKjAAACnklEQVR42uzazaraQBQA4MxkUjVQend9AcGVgqIu+gqFrkqx0G030oUPU1x0XajlPkL3Xago6MqfF+iyCxPNzWQ6E8/kHtOr2HIbKJyBQ4ZMmPN5JnF1hFLKMYPpYS46OAp7z0HXvxkKXU0kKFS2DhiTyNXhDQaDmyiKvun7sfo3Izb7mzwmH+RlGMNhobJer1+qAsZms3ll8kFebhEOOh5vv9/fOAWMMAyfIkhaGY7eFVMuoR8SRWB2u52BCHRMLF8ZEQSBVwRGn4AAzH1l0HoKklLyIjCQh+OvFFcmjSRJWBEYyIPD4WceKgpzMgo5kmsHYQhDGMIQhjCEIQxhCEMYwhCGMIQhDGEIQxjCEIYwhCEMYQhDGMIQhjCEIcwjYtJGLM65KiTxMc998xfCZAue58kiMJDnBIRbnJ7o8KvV6rNarfY8CILK4XAoSymFUsr21nA958Ph8HW3231zLtF4PL7t9/u3jLFEVyBtf9Nz5bpuXCqV9r7vh6vV6sd2u/2p1wIdkQ6Je/NMe1PZOXaI+TA3QJFDpy10k8nkfbvd7uUh0+n0a6fT+aSndyYBhP31MSTeAyKEuXk2YaY1Tqs5JDVRgvitQctCAFmezWb9ZrP51kLm8/mXVqs1hAQRAlmMBJC5f4CIITKMrY6LULY5i+cwFmwqWF4sFh/q9fq75XL5udFofARIiBJhjO1ajFFIuKcw5lI7JV4TUJmKPcrRaPSi1+t9R0cQwjx2TlsmL7VTHjHpm3wE2Zf63JUBxssdJ4eNcfnvAIM/34vXrEFQWRX67vFA1bO/SEJCgTAxQmRVQXs/tG82v7pbETZMP1FUaomOE99L34NLiIfGH7dOmgTm/wMlZwijrqnGo2EQyIEKOAiTP/L/d/wSYABH4OtcDgD/JAAAAABJRU5ErkJggg==") no-repeat 0 0',h=22,f="<style>";return f+="#"+t+" .media-video, #"+t+" .trv-media-controls, #"+t+" .video-overlay, #"+t+" .info-overlay {  -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none; }#"+t+" .sprite-background { background: "+u+"; }#"+t+" .brpBtn { text-indent: -9999px; width: 10px; height: 18px; border: none; margin-top: 18px; padding: 0; outline: none; cursor: pointer; box-shadow: none; background-color: transparent !important; display: inline-block; }",e||(f+="#"+t+" .button-holder { position: relative; left: 0; }"),f+="#"+t+".trvdfloater { z-index:1500; margin: 0px !important;}",f+="#"+t+' .trv-floating-menu { position: absolute; z-index:9;width:24px;height:24px; left:0; background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAQAAABKfvVzAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfiBRgKCyeBfAlfAAAAPklEQVQ4y2NgwAD/Wf8n/j/9//T/xP+sDMSA/4n/YSCROA2n4RpOY8oyEWUGtZ1EqqcHIRiNuCEKRiMOAwAAAsCVIyMyzqoAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTgtMDUtMjRUMTA6MTE6MzkrMDI6MDD/4PcGAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDE4LTA1LTI0VDEwOjExOjM5KzAyOjAwjr1PugAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII="); opacity:0.8; margin-top:0;margin-left:2px;cursor:pointer;top:29px; }',f+="#"+t+" .info-overlay { background-color: #000000;opacity: 0.8;display: none;text-align: left;color: #ffffff;font-size: 14px;z-index:9; position:absolute;height:170px;width:135px;left:0;top:0; }",f+="#"+t+" .info-overlay .info-text {height:100%;width: 90%;padding: 9px;text-align: justify;margin: 0 auto;}",f+="#"+t+" .info-overlay .overlay-info-close {cursor:pointer;color: #ffffff;bottom: 3px;font-size: 16px;text-align:right;margin-right:6px;margin-top:6px;}",f+="#"+t+" .info-overlay a,.info-overlay a:visited,.info-overlay a:hover,.info-overlay a:active {color:#ffffff;display:block;  text-decoration: none;margin-top:7px;margin-left:9px;}",f+="#"+t+" .info-overlay a:hover { text-decoration: underline; }",f+="#"+t+" * { -webkit-tap-highlight-color: rgba(0,0,0,0);-webkit-tap-highlight-color: transparent; /* For some Androids */ box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;-webkit-transform:unset; overflow: unset;overflow-y:unset;position:unset;margin:unset;}",f+=i?"#"+t+" {direction:ltr; height: 100%; width: 100%; background-color: #000000; position: relative; overflow: visible; opacity: 1;z-index:1; }":"#"+t+" {direction:ltr; height: "+a+"px; width: "+r+"px; background-color: #000000; position: relative; overflow: visible; opacity: 1;z-index:1; }",f+=".trv-close-container { position:fixed;z-index:999999999999999;}",f+=".trv-close-container .trv-close { width: 15px; height: 15px; padding: 4px; color: #fff; text-align: center; font-size:16px;position:absolute;visibility: visible;z-index:4999; cursor: pointer;font-weight:400;font-family: arial;-moz-user-select: none; -khtml-user-select: none; -webkit-user-select: none; -ms-user-select: none; user-select: none;line-height: 18px;box-sizing: unset; }",f+="#"+t+" .truvid_ima_container video { display:block; height: 100% !important; }",f+="#"+t+" .media-video { height: 100% !important; width: 100% !important; left: 0%; margin-top: 0; -webkit-transition: "+d.toggleDisplay+"; -moz-transition: "+d.toggleDisplay+"; -o-transition: "+d.toggleDisplay+";-ms-transition: "+d.toggleDisplay+"; transition: "+d.toggleDisplay+"; -ms-transition: "+d.toggleDisplay+"; object-fit: contain; cursor: pointer; position: absolute; background-color: #000000; }#"+t+" .media-player { font-family: arial; }",f+="#"+t+" .trv-overlay { width:100%;height:100%;position:absolute;display:block;opacity:1;visibility: visible;cursor:pointer;}",f+=NaN+t+" .video-overlay { display: none; ",e||(f+="width: 100%; height: 100%;"),f+="}",f+=NaN+t+" .info-overlay { display: none; ",e||(f+="width: 100%; height: 100%;"),f+="}#"+t+" .overlayBtn { vertical-align: bottom !important; width: 25px; height: 28px; outline: 0; border: none; bottom: 21.5px; position: relative; padding: 0;",e&&(f+="margin-top:-38px;"),f+=" }#"+t+" .overlayBtnWrapper { margin: -38px 0 0 0 !important; width: 100%; top: 50%; height: 50px; display:none; position: absolute; left:0px; text-align: center; z-index: 9; opacity: 1; cursor: pointer;  transition: "+d.overlay+"; -webkit-transition: "+d.overlay+"; -o-transition: "+d.overlay+"; -moz-transition: "+d.overlay+"; -ms-transition: "+d.overlay+"; }#"+t+" .overlayBtnWrapper>div { display: inline-block; }#"+t+" .overlay-play-wrapper { border-radius: 100%; cursor: pointer;position:relative;top:50%;transform: translateY(-50%);}#"+t+" .overlay-play-pause { width: 80px; height: 80px; }#"+t+" .overlay-backwards-wrapper { position:absolute; margin-right: 35px; width: 8%;left:0px; }#"+t+" .overlay-backwards { cursor: pointer; left:0px; background-position: -441px -5px; }#"+t+" .overlay-forward-wrapper { position: absolute; right: 0px; }#"+t+" .overlay-forward { cursor: pointer; background-position: -472px -5px; }#"+t+" .small-nav-l { left: 0; border-top-right-radius: 10px;border-bottom-right-radius: 10px;  }#"+t+" .small-nav-r { right: 0;border-top-left-radius: 10px;border-bottom-left-radius: 10px; }#"+t+" .small-nav { top: 50%;stroke: #1EAAF1; height: 50px;width: 20px;position: absolute;;color: white;background-color: rgba(255, 255, 255, 0.85);display: block;cursor: pointer;-webkit-touch-callout: none;webkit-user-select: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;z-index: 3;}#"+t+" .trv-poster { position: absolute;display: block;opacity: 1;visibility: visible;width: 100%;height: 100%;background: #000 no-repeat 50% 50%; background-size: cover;cursor:pointer;}#"+t+" .links-overlay { position: absolute; right: 0px; height: 24px; top: 20px;display:none;width:130px;}#"+t+" .links-overlay .links-button { background-color: #cc0000; width: auto; height: 100%; opacity: 0.75;  border-radius: 20px 0 0 20px; padding-left: 17px; padding-top: 7px; font-size: 11pt; color: #FCFCFC; line-height: 17px;cursor:default;webkit-transition: background-color 0.25s ease-in-out;-moz-transition: background-color 0.25s ease-in-out;-o-transition: background-color 0.25s ease-in-out; -khtml-transition: background-color 0.25s ease-in-out; transition: background-color 0.25s ease-in-out;-webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; -o-user-select: none; user-select: none;text-align:left;box-sizing: initial;letter-spacing:0;}#"+t+" .links-overlay .links-button.highlight { background-color:#cc0000;opacity:1; padding-bottom:0;box-shadow: inset 0 0 0 2px #fff; }#"+t+" .links-overlay .links-button:hover { background-color:#cc0000; opacity:1; cursor: pointer;box-shadow: inset 0 0 0 2px #fff; }#"+t+" .loader-bg { top: 0px; left: 0px; position: absolute; width: "+r+"px; height: "+a+"px; background-color: black;z-index:9; }#"+t+" .loader-bg-transparent { top: 0px; left: 0px; position: absolute; width: "+r+"px; height: "+a+"px; background-color: transparent;z-index:8; }#"+t+" .loader-bg-image { width: "+l.bgSize+"px; height: "+l.bgSize+"px; background: "+l.bg+"; background-size: "+l.bgSize+"px "+l.bgSize+"px; position: absolute; left: "+(r-l.bgSize)/2+"px; top: "+(a-l.bgSize)/2+"px; }#"+t+" .loader-bg-image-transparent { width: "+l.bgSize+"px; height: "+l.bgSize+"px; background: "+l.bg+"; background-size: "+l.bgSize+"px "+l.bgSize+"px; position: absolute; left: "+(r-l.bgSize)/2+"px; top: "+(a-l.bgSize)/2+"px; }#"+t+" .loader { position: absolute; width: "+l.spinnerSize+"px; height: "+l.spinnerSize+"px;",f+=";z-index: 9; border-top: "+l.border+"em solid rgba(00, 00, 00, 0.2); border-right: "+l.border+"em solid rgba(62, 181, 231, 0.2); border-bottom: "+l.border+"em solid rgba(62, 181, 231, 0.2); border-left: "+l.border+"em solid #3eb5e7; -webkit-transform: translateZ(0); -o-transform: translateZ(0);-ms-transform: translateZ(0); transform: translateZ(0); -webkit-animation: load8 1.1s infinite linear; animation: load8 1.1s infinite linear; }#"+t+" .loader, #"+t+" .loader:after { border-radius: 50%; }@-webkit-keyframes load8 { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }@keyframes load8 { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }#"+t+" .truvid-bg { top: 0px; left: 0px; position: absolute; width: "+r+"px; height: "+a+"px; z-index: 9; }#"+t+" .loader-transparent { position: absolute; width: "+l.spinnerSize+"px; height: "+l.spinnerSize+"px;",f+=";z-index: 9; border-top: "+l.border+"em solid rgba(00, 00, 00, 0.2); border-right: "+l.border+"em solid rgba(62, 181, 231, 0.2); border-bottom: "+l.border+"em solid rgba(62, 181, 231, 0.2); border-left: "+l.border+"em solid #3eb5e7; -webkit-transform: translateZ(0); -o-transform: translateZ(0);-ms-transform: translateZ(0); transform: translateZ(0); -webkit-animation: load8 1.1s infinite linear; animation: load8 1.1s infinite linear; }#"+t+" .loader-transparent, #"+t+" .loader-transparent:after { border-radius: 50%; }@-webkit-keyframes load8 { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }@keyframes load8 { 0% { -webkit-transform: rotate(0deg); transform: rotate(0deg); } 100% { -webkit-transform: rotate(360deg); transform: rotate(360deg); } }#"+t+" .trv-media-controls { ",f+="overflow:hidden;background-color: transparent; position: absolute; display: none;bottom:0; left: 0px; z-index: 9; width: 100%; color: #FCFCFC; font-size: 10pt; text-align: left; height: 46px; -webkit-transition: "+d.controller+"; -moz-transition: "+d.controller+"; -o-transition; "+d.controller+"; transition: "+d.controller+"; -ms-transition: "+d.controller+"; }#"+t+" .fullScreen { float: right; background-position: -126px -9px; width:20px;height:20px; }#"+t+" .trv-media-controls>span { line-height: 22px; font-size: 10pt; color: #FCFCFC; font-family: arial; }#"+t+" .BR { background-position: 0px -8px; width: 22px; height: 22px; margin-left: 12px; margin-right: 12px; float: right; transition: none; }#"+t+" .videoTitle {",e||(f+="position: absolute; margin-top: 18px;"),f+="margin-left:7px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; vertical-align: inherit; cursor: default; }#"+t+" .togglePlayPause { background-position: -"+(o?"48":"82")+"px -8px; height: 22px; margin-left: 20px; margin-right: 4px; transition: none; float: none; }#"+t+" .volume { background-position: -100px -10px; line-height: normal; margin-right: 12px; margin-left: 12px; transition: none; float: none; }#"+t+" .trv-currentTime, #"+t+" .timeDivider, #"+t+" .duration { line-height: 22px; vertical-align: bottom; cursor: default; display:inline; }#"+t+" .trv-duration { margin-right: 12px;vertical-align: bottom; cursor: default; }#"+t+" .playlist { float: right; background-position: -149.5px -8px; margin-right: 12px; margin-left: 12px; width: 12px; }#"+t+" .trv-progress-bar { margin-top:8px; position: absolute; width: 100%; height: 3px; background: rgba(255,255,255,0.2); cursor: pointer; -webkit-transition: "+d.progressBar+"; -moz-transition: "+d.progressBar+"; -o-transition: "+d.progressBar+"; transition: "+d.progressBar+"; -ms-transition: "+d.progressBar+"; }#"+t+" .trv-play-progress { position: absolute; background: #1EAAF1; height: 3px; width: 0%; top: 0px; max-width: 100%; -webkit-transition: "+d.progressBar+"; -moz-transition: "+d.progressBar+"; -o-transition: "+d.progressBar+"; transition: "+d.progressBar+"; -ms-transition: "+d.progressBar+"; }#"+t+" .trv-hover-progress { position: absolute; background: rgba(255,255,255,0.5); height: 0px; width: 0%; top: 0px; max-width: 100%; -webkit-transition: "+d.progressBar+"; -moz-transition: "+d.progressBar+"; -o-transition: "+d.progressBar+"; transition: "+d.progressBar+"; -ms-transition: "+d.progressBar+"; }#"+t+" .trv-progress-padding { position: absolute; width: 100%; height: 16px; bottom: 0; z-index: 28; }#"+t+" .trv-buffered { position: absolute; background: rgba(255,255,255,0.4); height: 100%; width: 0%; }#"+t+" .trv-progressBtn { background: #1EAAF1; box-shadow: 0 0 20px rgba(0,0,0,0.3); border-radius: 30px; width: 3px; height: 3px; position: absolute; left: 0; text-decoration: overline; top: 0px; -webkit-transition: "+d.progressBar+"; -moz-transition: "+d.progressBar+"; -o-transition: "+d.progressBar+"; transition: "+d.progressBar+"; -ms-transition: "+d.progressBar+"; }",f+="#"+t+" style {display:none;}",e||(f+="#"+t+" .volume-bar { left: 16px; position: absolute; width: 2px; height: 55px; overflow: hidden; background: #737373; top: 10px; -webkit-transition: "+d.volumeBar+"; -moz-transition: "+d.volumeBar+"; -o-transition: "+d.volumeBar+"; transition: "+d.volumeBar+"; -ms-transition: "+d.volumeBar+"; }#"+t+" .volume-container { position: absolute; z-index:29; overflow: hidden; bottom: 25px; left: 32px; width: 32px; height: 75px; background: "+c+"; display: none; -webkit-transition: "+d.volumeBar+"; -moz-transition: "+d.volumeBar+"; -o-transition: "+d.volumeBar+"; transition: "+d.volumeBar+"; -ms-transition: "+d.volumeBar+"; cursor: pointer; }#"+t+" .volume-container .button-holder { height: 49px; top: 8px; left: 5px; }#"+t+" .active-volume { position: absolute; bottom: 0px; background: #1EAAF1; height: 100%; width: 100%; overflow-y: visible; }#"+t+" .volumeHandle { background: #1EAAF1; box-shadow: 0 0 20px rgba(0,0,0,0.3); border-radius: 30px; width: 8px; height: 8px; position: absolute; left: 8px; top: 0%; text-decoration: overline; }#context-menu-"+t+" { width: 185px; height: 40px; position: absolute; background-color: #252525; z-index: 9; cursor: pointer; border-radius: 5px; direction:ltr;text-align:left; }#context-menu-"+t+" .context-menu-icon-container { width: "+h+"px; height: "+h+"px; float: left; }#context-menu-"+t+" .context-menu-icon { background: "+u+"; background-position: 0px -8px; background-color: transparent; width: "+h+"px; height: "+h+"px; margin-top: 9px !important; margin-left: 20px !important; }#context-menu-"+t+" .context-menu-text-container { width: 160px; height: 22px; float: right; }#context-menu-"+t+" .context-menu-text { width: 120px; height: 22px; font-size: 12px; color: #CCC; font-weight: 600; margin-top: 14px !important; margin-left: 28px !important; font-family: arial; line-height: 15px; }"),f+="#"+t+" .autoskip-btn {pointer-events: all; width: 100%; padding: 9px 0px; font-size: 10px; font-family: arial; font-weight: 500; font-stretch: normal; font-style: normal; line-height: normal; letter-spacing: 1.78px; text-align: center; color: #ffffff; margin: 5px 0px; cursor: pointer; z-index: 10}",f+="#"+t+" .autoskip-btn-blue {background-color: #1E7ABB}",f+="#"+t+" .autoskip-btn-gray {background-color: #3E3E3E}",f+="#"+t+" .autoskip-btn-blue-compact {background-color: #1E7ABB; width: 50%; position: absolute; bottom: 0px; left: 0px}",f+="#"+t+" .autoskip-btn-gray-compact {background-color: #3E3E3E; width: 50%; position: absolute; bottom: 0px; right: 0px}",f+="#"+t+" .trv-autoskip-container {display: none; position: absolute; top: 22px; right: 32px; width: 30%; z-index: 10;}",f+="#"+t+" .trv-autoskip-background {background-color: white; display: flex; justify-content: center; align-items: center; padding: 5px; position: relative;}",f+="#"+t+" .trv-autoskip-container-compact {z-index: 10; position: absolute; bottom: 0px; width: 100%; height: 100%; align-items: flex-end; pointer-events: none; display: flex; flex-direction: row-reverse;}",f+="#"+t+" .trv-autoskip-background-compact {height: 100%; width: 100%; position: absolute; z-index: 20;}",f+="#"+t+" .autoskip-btn-compact {height: 30px; margin: 0px; line-height: 30px; font-size: 12px;}",f+="#"+t+" .trv-autoskip-line-top {display: none; width: 100%; height: 5px; background: transparent; position: absolute; top: 0px; left: 0px;}",f+="#"+t+' .trv-autoskip-line-top::before {content: ""; position: absolute; top: 0; left: 0; width: 0%; height: 100%; background: #1EAAF1; animation: animate-top '+s/4+"s linear 1 forwards;}",f+="#"+t+" .trv-autoskip-line-right {display: none; width: 5px; height: 100%; background: transparent; position: absolute; top: 0px; right: 0px;}",f+="#"+t+' .trv-autoskip-line-right::before {content: ""; position: absolute; top: 0; right: 0; width: 100%; height: 0%; background: #1EAAF1; animation: animate-right '+s/4+"s linear 1 forwards;}",f+="#"+t+" .trv-autoskip-line-bottom {display: none; width: 100%; height: 5px; background: transparent; position: absolute; bottom: 0px; right: 0px;}",f+="#"+t+' .trv-autoskip-line-bottom::before {content: ""; position: absolute; bottom: 0; right: 0; width: 0%; height: 100%; background: #1EAAF1; animation: animate-bottom '+s/4+"s linear 1 forwards;}",f+="#"+t+" .trv-autoskip-line-left {display: none; width: 5px; height: 100%; background: transparent; position: absolute; bottom: 0px; left: 0px;}",f+="#"+t+' .trv-autoskip-line-left::before {content: ""; position: absolute; bottom: 0; left: 0; width: 100%; height: 0%; background: #1EAAF1; animation: animate-left '+s/4+"s linear 1 forwards;}",f+="@keyframes animate-top {0% {width: 0px;} 100% {width: 100%;}}",f+="@keyframes animate-right {0% {height: 0px;} 100% {height: 100%;}}",f+="@keyframes animate-bottom {0% {width: 0px;} 100% {width: 100%;}}",f+="@keyframes animate-left {0% {height: 0px;} 100% {height: 100%;}}",f+="#"+t+" .trv-autoskip-poster-compact {display:none}",f+="#"+t+" .trv-autoskip-poster {width: 100%;}",f+="@media screen and (max-width: 479px) { #"+t+" .videoTitle { display:none; } }",f+="</style>"}(z,Ae,W,0,T,L,C,d),c&&(a+='<div class="trv-autoskip-container"><div class="trv-autoskip-background"><img class="trv-autoskip-poster" alt="auto skip"><div class="trv-autoskip-line-top"></div><div class="trv-autoskip-line-right"></div><div class="trv-autoskip-line-bottom"></div><div class="trv-autoskip-line-left"></div></div><div class="autoskip-btn autoskip-btn-blue"></div><div class="autoskip-btn autoskip-btn-gray"></div></div>'),r.innerHTML=a.replace("{{video_placeholder}}",e),t},this.setContentVideo=function(){if(at(),A){(_=new xi(A,v)).setup();var e=_.getFileToPlay();h=new Ni(e,v),te=_.getCurrentVideoDuration(),ft(),Se&&Se.Show(),gi(Object(Ci.a)(E).width),1<_.getTotalVideos()?(function(){var e=N.player.mediaPlayer.getElementsByClassName("overlay-backwards");0<e.length&&e[0].addEventListener("click",function(e){e.stopPropagation(),s&&s.notify("click",{widgetId:a,video:N.player.mediaVideo,clickedElement:"previous video"}),Ei(),function(){if(_){var e=Si();_.backward(),Se&&Se.Show(),Ai(e)}}(),c&&ti()})}(),function(){var e=N.player.mediaPlayer.getElementsByClassName("overlay-forward");0<e.length&&e[0].addEventListener("click",function(e){e.stopPropagation(),s&&s.notify("click",{widgetId:a,video:N.player.mediaVideo,clickedElement:"forward video"}),qt(),Pe||(Ei(),wi(),c&&ti())})}()):N.buttonsOverlay&&(N.buttonsOverlay.overlayForwardButton.style.display="none",N.buttonsOverlay.overlayBackwardButton.style.display="none")}},this.noContentMode=function(){ut()},this.mute=function(){Nt()},this.unmute=function(){_t()},this.canStartBiddingSession=function(){return function(){if(ye)return!1;return!(t&&!t.canStartBiddingSession())&&!(x&&!x.canStartBiddingSession())}()},this.disableAutoSkip=function(){ti()},this.setVolume=function(e){di(e)},this.onPlayerReady=function(){s&&s.notify("ready",{video:N.player.mediaVideo,widgetId:a}),this.dispatchEvent(Qi),Fe&&(this.dispatchEvent(en),this.dispatchEvent($i)),ge.subscribe(qi,mi),window.addEventListener("resize",mi),window.addEventListener("orientationchange",mi);var e=Object(Ci.a)(E);vi(e.width,e.height)},this.forward=function(){wi()},this.setIgnorePlaylistEnd=function(){Ei()},this.getPlayerElement=function(){return E},this.DestroyPlayer=function(){Li()}}},function(e,t,i){"use strict";i.d(t,"c",function(){return J}),i.d(t,"a",function(){return Z}),i.d(t,"g",function(){return a}),i.d(t,"b",function(){return $}),i.d(t,"f",function(){return ee}),i.d(t,"e",function(){return te}),i.d(t,"d",function(){return o});var U=i(9),V=i(0),D=i(11);function j(n,e){var r,t,i,a,o,s=n,l=e,d=l.getPlayerElement(),u=d.getElementsByClassName("trv-video")[0],c=null,h=null,f=null,p=!1,g=this,m=null,v=15e3,y=d.getElementsByClassName("media-video")[0],b=8e3,w="10000",E=null,S=y.muted?0:y.volume,A=!1,T=!1,L=!1;r="truvid_ima_container"+Math.floor(1e5*Math.random()+1),document.getElementById(r)||(r="truvid_ima_container"+Math.floor(1e5*Math.random()+1));var C=0;function k(){if(window.playerLog("ima onAdStarted"),!A){window.playerLog("ima inside onAdStarted"),A=!0,T&&(window.playerLog("ima set volume 0"),f.setVolume(0),S=0);var e=document.getElementById(r);e&&(e.style.zIndex=w),m=m||new D.a(g,null,null,l);var t=f.getVolume();m.setVolume(t),s.onAdStarted()}setTimeout(function(){s.onPlayerResize()},1e3)}function x(){window.playerLog("ima toggle play pause"),p?(f.resume(),p=!1,e.setPlayerPausedOnUserBehalf(!1)):(f.pause(),p=!0,e.setPlayerPausedOnUserBehalf(!0)),p?m&&m.pause():m&&m.play(),p&&(document.getElementById(r).style.bottom="0")}function I(){if(!c.isStopped()&&!c.getIsLoaded()){c.setLoaded(!0),clearTimeout(i),window.playerLog("ima AD LOADED"),c.firePixels("available");var e=document.getElementById(r);e&&(e.style.display="block");var t=e.getElementsByTagName("iframe");t.length&&(t[0].style.display="block");s.onAdLoaded(!1),window.playerLog("ima loaded")}}function P(){window.playerLog("ima DESTROY FUNCTION"),clearTimeout(i),f&&f.destroy(),m&&(m.destroy(),m=null)}function O(){if(!c.isStopped()){if(c.setStopped(),window.playerLog("ima onAdStopped FUNCTION"),clearTimeout(a),clearTimeout(i),P(),L){var e=document.getElementById(r);e&&(e.style.display="none")}if(A){s.onAdStopp)}}function R(){c.firePixels("error"),O()}this.startAd=function(){c.getIsLoaded()?f&&f.start():s.setStartAdOnAdLoadedEvent(!0)},this.initialize=function(){try{"undefined"!=typeof google&&void 0!==google.ima?(window.playerLog("initialize ima"),t=new google.ima.AdDisplayContainer((window.playerLog("ima createIMAContainer"),(o=document.createElement("div")).className="truvid_ima_container",o.id=r,o.style.display="none",o.style.textAlign="left",u.appendChild(o),o),y),h=new google.ima.AdsLoader(t),t.initialize(),h.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),h.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(e){!function(e){if(c.isStopped())return;window.playerLog("ima onIMAAdsManagerLoaded"),L=!1;var t=new google.ima.AdsRenderingSettings;t.loadVideoTimeout=v,t.restoreCustomPlaybackStateOnAdBreakComplete=!1;var i=["video/mp4"];y.canPlayType("video/webm")&&(window.playerLog("ima can play video webm"),i.push("video/webm"));t.mimeTypes=i,f=e.getAdsManager(y,t),y.muted?f.setVolume(0):f.setVolume(y.volume);f.addEventListener(google.ima.AdEvent.Type.CLICK,function(){l.getApiObservable().notify("adClick",{widgetId:l.getWidgetId(),video:y}),d.dispatchEvent(new CustomEvent("adClick")),window.playerLog("ima CLICK"),c.firePixels("click"),p?d.dispatchEvent(new CustomEvent("onUserMediaPlay")):d.dispatchEvent(new CustomEvent("onUserMediaPause")),x(),m&&m.show()}),f.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){window.playerLog("ima event google.ima.AdErrorEvent.Type.AD_ERROR",e),R()}),f.addEventListener(google.ima.AdEvent.Type.LOADED,function(e){window.playerLog("ima event LOADED"),C++,c.resetHasSentImpression(),s.getStartAdOnAdLoadedEvent()||(window.playerLog("ima MANAGER START"),I())}),f.addEventListener(google.ima.AdEvent.Type.PAUSED,function(){window.playerLog("ima event PAUSED"),c.firePixels("pause"),m&&m.pause()}),f.addEventListener(google.ima.AdEvent.Type.RESUMED,function(){window.playerLog("ima event RESUMED"),c.firePixels("resume"),m&&m.play()}),f.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(){I(),l.pauseContentVideo(),window.playerLog("ima event CONTENT_PAUSE_REQUESTED"),L=!0;var e=document.getElementById(r);e&&(e.style.display="block");var t=e.getElementsByTagName("iframe");t.length&&(t[0].style.display="block")}),f.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(){window.playerLog("ima CONTENT_RESUME_REQUESTED");var e=document.getElementById(r);e&&(e.style.display="none"),c.isStopped()||(window.playerLog("ima event INSIDE CONTENT_RESUME_REQUESTED"),O())}),f.addEventListener(google.ima.AdEvent.Type.STARTED,function(){window.playerLog("ima STARTED"),c.firePixels("start");var e=document.getElementById(r).getElementsByTagName("iframe");e.length&&(e[0].style.position="absolute"),k()}),f.addEventListener(google.ima.AdEvent.Type.IMPRESSION,function(e){l.getApiObservable().notify("adImpression",{widgetId:l.getWidgetId(),video:y}),d.dispatchEvent(new CustomEvent("adImpression")),window.playerLog("ima IMPRESSION"),c.firePixels("start"),c.setFiredImpression(!0),k(),1<C&&n.increaseCurrentSlotNUmberMacro(),c.fireImpressionPixel("impression",n)}),f.addEventListener(google.ima.AdEvent.Type.COMPLETE,function(){window.playerLog("ima COMPLETE"),c.firePixels("complete")}),f.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(){window.playerLog("ima all ads COMPLETE"),d.dispatchEvent(new CustomEvent("adComplete")),a=setTimeout(function(){if(!c.isStopped()){var e=document.getElementById(r);e&&(e.style.display="none"),O()}}.bind(this),4e3)}),f.addEventListener(google.ima.AdEvent.Type.FIRST_QUARTILE,function(){window.playerLog("ima FIRST_QUARTILE"),c.firePixels("firstQuartile")}),f.addEventListener(google.ima.AdEvent.Type.MIDPOINT,function(){window.playerLog("ima MIDPOINT"),c.firePixels("midpoint")}),f.addEventListener(google.ima.AdEvent.Type.THIRD_QUARTILE,function(){window.playerLog("ima THIRD_QUARTILE"),c.firePixels("thirdQuartile")}),f.addEventListener(google.ima.AdEvent.Type.SKIPPED,function(){window.playerLog("ima skip"),c.firePixels("skip"),d.dispatchEvent(new CustomEvent($))}),f.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,function(){window.playerLog("ima volume change");var e=f.getVolume();null!=e&&(0<S&&0==e?c.firePixels("mute"):0==S&&0<e&&c.firePixels("unmute"),window.playerLog("ima VOLUME CHANGE NEW VOLUME "+e),S=e)}),f.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,function(){window.playerLog("ima user close"),c.firePixels("close")}),window.playerLog("ima init"),f.init(s.getRequestWidth(),s.getRequestHeight(),google.ima.ViewMode.NORMAL),s.getStartAdOnAdLoadedEvent()&&(window.playerLog("ima MANAGER START"),f.start())}(e)},!1),h.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(e){window.playerLog("ima google.ima.AdErrorEvent.Type",e),R()},!1)):Object(V.a)("googlelibundefined",{wid:l.getWidgetId()},null)}catch(e){Object(V.a)("googleiniterr",{wid:l.getWidge(e){o&&(o.stwindow.playerLog("ima skip"),f.skip(),O()},this.stopAd=function(){window.playerLog("ima stop"),f&&A&&(f.stop(),O())},this.loadAd=function(e,t){c=e,C=0,window.playerLog("load ima ad"),"undefined"!=typeof google&&void 0!==google.ima?c.isStopped()||(l.isNetworkWidget()||(google.ima.settings.setPlayerType("truvid"),google.ima.settings.setPlayerVersion("1.0.0")),E=t.mediaFile.src,h?(window.playerLog("inside ima ads loader"),m=null,p=A=!1,h.requestAds(function(){window.playerLog("ima set ima ads request");var e=s.getRequestWidth(),t=s.getRequestHeight(),i=new google.ima.AdsRequest;i.adTagUrl=E,i.linearAdSlotWidth=e,i.linearAdSlotHeight=t,i.nonLinearAdSlotWidth=e,i.nonLinearAdSlotHeight=Math.round(.375*t),i.forceNonLinearFullSlot=!1,i.vastLoadTimeout=b,i.setAdWillAutoPlay(!0),T=!1,y.muted?T=!0:0==y.volume?T=!0:i.setAdWillPlayMuted(!1);return i}()),c.fireRequestPixel(),i=setTimeout(function(){window.playerLog("ima ad request timeout"),O()},2e4)):setTimeout(function(){Object(V.a)("imaStopAdImaAdsLoadedUndefined",{wid:l.getWidgetId()},null),window.playerLog("ima stop ad imaAdsLoaded undefined"),c.setStopped()},100)):O()},this.destroy=function(){window.playerLog("ima destroy"),c.isStopped()||(c.setStopped(),window.playerLog("ima inside destroy"),P(),clearTimeout(i))},this.resizeAd=function(e,t){window.playerLog("ima resizead");var i=document.getElementById(r);i&&(i.style.height=t+"px",i.style.width=e+"px",i.style.zIndew.playerLog("ima ren(){return f.getCurrentAd().getDuration()},this.isStopped=function(){return c.isStopped()},this.setAdVolume=function(e){window.playerLog("ima set ad volume"),f.setVolume(e),m.setVolume(e),l.setCurrentVolume(e)},this.pauseAd=function(){window.playerLog("ow.playerLog("ima toggle play pause"),x()},this.getAdRemainingTime=function(){return f.getRemainingTime()},this.getContainerId=function(){return r},this.isCurrentAdPaused=function(){return p}}var H=i(12),G=i(1),n=i(7),h=i(16);function z(o){var d=!1;this.player=o;var s="truvid_cnt_prebid_iframe"+Math.floor(1e5*Math.random()+1);null!==document.getElementById(s)&&(s="truvid_cnt_prebid_iframe"+Math.floor(1e5*Math.random()+1));var u,c=null;this.createFriendlyIframe=function(r,a){return new Promise(function(e,t){var i=document.createElement("iframe");i.src="about:blank",i.id=s,i.marginWidth="0",i.marginHeight="0",i.frameBorder="0",i.width="1px",i.height="1px",i.style.position="absolute",i.style.left="0",i.style.top="0",i.style.margin="0px",i.style.padding="0px",i.style.border="none",i.style.width="1px",i.style.height="1px",i.setAttribute("SCROLLING","NO");var n='<html lang=\'en\'><head><meta charset=\'utf-8\'><script type="text/javascript">window.trvortb={"validation": "strict","config": {"ver":"1.0","complete": 1,"nodes": [{"asi":"truvid.com","sid": "'+o.getSellersJsonId()+'","hp":1}]}};<\/script><script async src="'+a+'"><\/script><title></title></head><body></body></html>';i.onload=function(){i.contentWindow.loadPrebidAd=function(o,s,e){if(0!=d&&void 0!==c.contentWindow.pbjs&&void 0!==c.contentWindow.pbjs.rp){var l=e.mediaFiles[0].mediaFile.src;(u=e).fireRequestPixel(),c.contentWindow.pbjs.rp.requestVideoBids({adSlotName:l,timeout:3,playerSize:[640,480],callback:function(e,t){if(void 0!==t[l]&&void 0!==t[l].bids&&0<t[l].bids.length){var i=t[l].bids.sort(function(e,t){return t.cpm-e.cpm});if(i&&0<i.length){var n=i[0];if(n&&void 0!==n.adserverTargeting&&void 0!==n.adserverTargeting.hb_cache_host){var r="https://"+n.adserverTargeting.hb_cache_host+"/cache?uuid="+n.videoCacheKey,a=u.mediaFiles[0].adParameters;u.mediaFiles=[],u.type="google/ima",u.mediaFiles.push(new h.a("google/ima",{delivery:"progressive",height:"480",src:r,type:"google/ima",width:"640"},a)),o()}else s()}else s()}else s()}})}else s()},e()},i.onerror=function(){t()},i.srcdoc=n,r.appendChild(i),c=i})},this.init=function(){return new Promise(function(e,t){d?e():this.createFriendlyIframe(this.player.getPlayerElement(),"https://micro.rubiconnamic/17412.js").then(function(){d=!0,e()}).catch(,t,i){c.contentWindow.loadPrebidAd(e,t,i)}}function W(){}W.prototype.Load=function(){return new Promise(function(e,t){new Promise(function(e,t){Object(n.c)("https://imasdk.googleapis.com/js/sdkloader/ima3.js").then(function(){e()}).catch(function(e){t(e)})}).then(function(){e()}).catch(function(e){t(e)})})};var s=i(4);function l(e,n){var r={tcString:"",gdprApplies:!1,isAgreed:!1},t=new Promise(function(i){null!=e&&""!=e.getConsentString()?(r.tcString=e.getConsentString(),r.gdprApplies=e.getGdprApplies(),i(r)):void 0!==window.__tcfapi?window.__tcfapi("getTCData",2,function(e,t){t?(n&&(r.isAgreed=u(e)),void 0!==e.tcString&&(r.tcString=e.tcString),void 0!==e.gdprApplies&&(r.gdprApplies=e.gdprApplieon(e){setTimeout(function(){e(null)},500)});return Promise.race([t,i])}function Q(e){this.player=e}var d={smartAdserver:45,magnite:52,xande:32,yahoo:25,freewheel:285,indexExchange:10,truvid:862};function u(e){var t,i,n=null===(t=e.purpose)||void 0===t?void 0:t.consents,r=null===(i=e.vendor)||void 0===i?void 0:i.consents;if(!n||!r)return!1;var a=Object.keys(n),o=Object.values(d).filter(function(e){return!r[e]});return 10==a.length&&a.ew Array(t);i<t;i++)n[i]=e[i];return n}function q(e,t){var i=this;this.macros={},tnavigator.userAgent}catch(e){return null}}},r=t.getDomain();n.prtclDomain=function(){return encodeURIComponent(window.location.protocol+"//"+r)},n.pageTitle=function(){return document.title},n.domain=function(){return encodeURIComponent(r)},n.osPlatform=function(){return t.getOSFamily()},n.osVersion=functionurn encodeURIComponent(document.referrer)},n.width=function(){return i.adLib.getAdRequestWidth()},n.height=function(){rl=function(){return encodeURIComponent(r)},n.vw=function(){return 1==t.IsPlayerViewable()?1:0},n.sellersJsonId=function(){return t.getSellersJsonId()},n.cb=function(){var e=parseInt(99999999*Math.random(),10).toString();return e=turn Math.round((new Date).getTime()/1e3)},n.ip=function(){return t.getIp()};var a=t.getGeoLocation();n.latitude=function(){return encodeURIComponent(a&&a.lat?a.lat:"")},n.longitude=function(){return encodeURIComponent(a&&a.long?a.long:"")},n.location=function(){return encodeURIComponent((a?a.lat:"")+","+(a?a.long:""))},n.pageHreftion(){return 0==t.getCurrentVolume()?1:0},n.pinit=function(){return i.adLib.getAutomaticMacro()},n.accountid=function(){return t.getSubUserId()},n.slotType=function(){return i.adLeturn i.adLib.getCurrentSlotNumberMacro()},t.noContentMode()?(n.videoTitle=function(){return""},n.videoDuration=function(){return"0"},n.videoId=function(){return"nocontent"},n.videoUrl=function(){return"noconteion(){return""},n.lng=function(){return""},n.videoIabCategory=""):t.getPlaylistContent()&&(n.videoTitle=function(){return t.getCurrentVideoObj().t},n.videoDuration=function(){return t.getDuration()},n.videoUrl=function(){return t.getCurrentVideoUrl()},n.videoId=function(){return t.getCurrentVideoObj().id},n.lng2=function(){return t.getCurrentVideoObj().l},n.lng=function(){return t.tion(){return t.getCurrentVideoObj().iabc}),this.macros=n}Q.prototype.Sync=function(){var r=this,a=null;function o(){return new Promise(function(e){var t=function(e){return new Promise(function(e){var t=Object(s.a)("trv_usersync"),i=!1;if(t?((t=JSON.parse(t)).optout&&e(),t.uids&&t.uids.rubicon||(i=!0)):i=!0,i){var n=document.createElement("div");n.innerHTML='<iframe id="multisync-iframe" height="0" width="0" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="https://secure-assets.rubiconproject.com/utils/xapi/multi-sync.html?p=truvid&endpoint=us-east" style="border: 0; display: none;"></iframe>',this.player.getPlayerElement().appendChild(n)}e()}.bind(this))}.bind(r,a),i=function(a){return new Promise(function(e){var t="",i=0;null!=a&&(void 0!==a.gdprApplies&&1==a.gdprApplies&&(i=1),t=a.tcString);var n=document.createElement("img");n.style.border="0px",n.style.width="1px",n.style.height="1px",n.src="https://ads.stickyadstv.com/auto-user-sync?_fw_gdpr="+i+"&_fw_gdpr_consent="+t;var r=document.createElement("img");r.style.border="0px",r.style.width="1px",r.style.height="1px",r.src="https://ads.stickyadstv.com/user-matching?id=2545&_fw_gdpr="+i+"&_fw_gdpr_consent="+t,this.player.getPlayerElement().appendChild(n),this.player.getPlayerElement().appendChild(y(function(){i().finally(function(){e()})})})}return new Promise(function(n,t){l(r.player,!0).then(function(e){if(null!=(a=e)&&e.gdprApplies)if(window.__tcfapi)if(e.isAgreed)o().then(function(){return n()});else try{window.__tcfapi("addEventListener",2,function e(t,i){i&&"useractioncomplete"===t.eventStatus&&u(t)&&(window.__tcfapi("removeEventListener",2,function(){},e),o().then(function(){return n()}))}),n()}catch(e){window.playerLog("erroe n();else o().then(window.playerLog("error user sync",e),t()})}.bind(this))},q.prototype.InjectMacros=function(i){var n=this.macros,e=this;return new Promise(function(v){function t(e,t){for(var i=0,n=e;-1<n.indexOf("[",i);){var r=n.indexOf("[",i),a=n.indexOf("]",i)+1;if(0<a){i=a;var o=n.substring(r,a);if(0<=o.indexOf("[dmp%")){var s=o.indexOf("[dmp%"),l=o.substring(s+5,o.length-1),d=l.indexOf("_"),u=l.substring(0,d),c=l.substring(d+1),h=b(u.split("%%",1),1)[0],f=u.substring(u.indexOf("%%")+2),p=void 0;switch(h){case"lclstg":p=window.localStorage.getItem(c)}if(p&&"string"==typeof p){var g,m=y(f=f.split("%%"));try{for(m.s();!(g=m.n()).done;){switch(g.value){case"arr":p=p.substring(1,p.length-1);break;case"urlenc":p=encodeURIComponent(p)}}}catch(e){m.e(e)}finally{m.f()}e=e.replace(o,p)}else e=e.replace(o,"")}else t[o.substring(1,o.length-1)]&&(e=e.replace(o,t[o.substring(1,o.length-1)]()))}else i=r+1}v(e)}-1<i.indexOf("[userGdprConsent]")?l(e.t=function(){return null!=e?e.tcString:""},t(i,n)}).catch(function(){window.playerLog("error getting consent")}):t(i,n)})};var Y=i(10),K=i(8),X="adLoaded",J="adStarted",Z="onAdEnd",a="onBiddingSessionsEnd",$="adSkipped",ee="onBiddingSessionStart",te="onBeforeBiddingSessionStart",ie="stoppedTrackingAdViewability";function o(a,o){this.currentBidSession=null,this.playerObj=o;var e=a,s=null!=typeof(this.advertisingConfiguration=a).prebidVastParameters?a.prebidVastParameters:null,l=this,d=!1;this.allowedContainers=["application/javascript","google/ima","video/mp4","openrtb"];var t,u=o.getPlayerElement(),r=new W,c=null,i=null,h=Math.ceil(o.getPlayerHeight()),f=Math.ceil(o.getPlayerWidth()),p=Math.ceil(o.getPlayerWidth()),g=Math.ceil(o.getPlayerHeight()),n=!0,m=!1,v=void 0===a.startAdOnAdLoadedEvent||a.startAdOnAdLoadedEvent,y=null,b=0,w=null,E="",S=!1,A=!0,T=[],L=-1,C=-1,k=null,x=0,I=!1;function P(){n&&(m||o.getPlayerContentStatus()==G.g)&&(window.playerLog("restoring content - switch to content"),o.restoreContentState(),d=m=!1,l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd().hasFiredImpression()&&(l.currentBidSession&&l.currentBidSession.resetCurrentTruvidAd(),l.currentBidSession=null))}function O(){l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&l.currentBidSession.getCurrentTruvidAd().getAdManager().destroy()}fl,o)).initialize()}function D(){E="",S=!1}function M(t){window.playerLog("start bidding session"),I=!1,s&&(window.playerLog("adding prebid parameters"),E=s,S=!0),R();if(a.isPreroll||"c"==a.midrollType&&a.midrollCount||"d"==a.midrollType&&a.midrollInterval||a.isPostroll){var e,i,n=null===(e=l.currentBidSession)||void 0===e?void 0:null===(i=e.getCurrentTruvidAd())||void 0===i?void 0:i.getAdManager();if(null!=n&&n.setAdsContainerVisibility&&n.setAdsContainerVisibility(!0),window.playerLog("dispatch bidding session start"),u.dispatchEvent(new CustomEvent(ee)),S||0,null==l.currentBidSession&&!d){switch(l.currentBidSession=new U.b(l,{adOffset:t.type,ads:[]},o),t.type){case Y.d:y="p";break;case Y.b:y="m";break;case Y.c:y="t"}b++,l.currentBidSession.ListenToBiddingSessionEnds(function(){F()}),l.currentBidSession.listenToStartLoadingContainer(function(){l.onStartLoadingContainer()}.bind(l));var r=c+E;l.adMacros.InjectMacros(r).then(function(e){S?l.loadAdByUrl(e,function(){!function(e){window.playerLog("reset current bid session - restart bidding session"),l.currentBidSession=null,D(),b--,M(e)}(t)}):A?(A=!1,B(),window.playerLog("opportunity pixel"),Object(V.b)(o.getOpportunityPixel()),l.currentBidSession.startBiddingSession(e)):C!=g||L!=p?(B(),A=!1,window.playerLog("opportunity pixel"),Object(V.b)(o.getOpportunityPixel()),l.currentBidSession.startBiddingSession(e)):(window.playerLog("opportunity pixel"),Object(V.b)(o.getOpportunityPixel()),l.currentBidSession.startLoadingLastAds())}).catch(function(e){Object(V.a)("injectmacrosErr",{wid:o.getWidgetId()},e),window.playerLog("error macros")})}}else window.playerLog("reset current bid session - start bidding session"),l.currentBidSession=null}function B(){L=p,C=g}function F(){window.playerLog("bidding session ends"),0,l.currentBidSession&&l.currentBidSession.abort(),l.currentBidSession=null,o.setIsAdPlaying(!1),u.dispatchEvenon N(){return"in_read"==o.getWidgetType()}function _(){var e=this.shiftPrioritizedMediaFiles();l.currentBidSession=new U.b(l,null,o),l.currentBidSession.setCurrentTruvidAd(this),l.currentBidSession.loadTruvidMediaFile(e)}this.previousVolume=null,this.maxAdStarts=null!=typeof e.maxAdStarts?e.maxAdStarts:null,this.gdpr=null!=typeof e.gdpr&&e.gdpr,this.adMacros=new q(l,this.playerObj),this.prebidAdManager=new z(this.playerObj),this.adSessionFQCounter={},this.getPrebidManager=function(){return this.prebidAdManager},this.getAdSessionFQCounter=function(){return this.adSessionFQCounter},this.adSessionInterval={},this.getAdSessionInterval=function(){return this.adSessionInterval},this.setLastVastAds=function(e){T=e},this.getLastVastAds=function(){return T},this.pauseAd=function(){l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&l.currentBidSession.getCurrentTruvidAd().getAdManager().pauseAd()},this.resumeAd=function(){l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&l.currentBidSession.getCurrentTruvidAd().getAdManag(){return this.allowedContainers.slice(0)},this.setStartAdOnAdLoadedEvent=function(e){v=e},this.getStartAdOnAdLoadedEvent=function(){return v},this.onPlayerResize=function(){var e,t,i=o.getElementDimension(u);l.syncContentDimensions(i.width,i.height),e=0==f?o.getPlayerWidth():f,t=0==h?o.getPlayerHeight():h,d?l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&l.currentBidSession.getCurrentTruvidAd().getAdManager().resizeAd(e,t):o.resizeSpinner(e,t),l.syncContentDimensions(e,t)},this.startPendingAd=function(){if(window.playerLog("start pending ad"),l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()){var e=o.getElementDimension(u);l.syncContentDimensions(e.width,e.height),l.currentBidSession.getCurrentTruvidAd().getAdManager().resizeAd(f,h),l.currentBidSession.getCurrentTruvidAd().getAdManager().startAd(),v=!0}},this.getCurrentTagId=function(){if(l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd())return l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd().getDemandTagId()},this.onAdLoaded=function(){try{if(I=!0,l.currentBidSession)this.stopUpdateCurrentContentTimeState(),function(){if(window.playerLog("function onAdLoaded"),l.currentBidSession){if(m=!0,l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&(window.playerLog("function onAdLoaded - clear loading container timeout"),l.currentBidSession.getCurrentTruvidAd().clearLoadingContainerTimeout()),o.setIsAdPlaying(!0),n)try{o.saveContentState(!0)}catch(e){Object(V.a)("saveContentStateErr",{wid:o.getWidgetId()},e)}u.dispatchEvent(new CustomEvent(X))}}();else if(w){this.stopUpdateCurrentContentTimeState(),l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().clearLoadingContainerTimeout(),m=!0,o.setIsAdPlaying(!0);try{o.saveContentState(!0)}catch(e){Object(V.a)("saveContentStateErr2",{wid:o.getWidgetId()},e)}u.dispatchEvent(new CustomEvent(X)),D()}}catch(e){Object(V.a)("OnAdLoadedErr",{wid:o.getWidgetId()},e)}},this.onAdStarted=function(){var e=null;if(l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&!(e=l.currentBidSession.getCurrentTruvidAd()).getIsLoaded()){if(e.setLoaded(!0),n)try{o.saveContentState(!1)}catch(e){Object(V.a)("saveContentStateErr3",{wid:o.getWidgetId()},e)}this.stopUpdateCurrentContentTimeState(),e.clearLoadingContainerTimeout(),o.setIsAdPlaying(!0)}d=!(I=!1),this.trackAdViewability(),u.dispatchEvent(new CustomEvent(J)),0,this.syncContentDimensions(0,0)},this.trackAdViewability=function(){x=0;k=setInterval(function(){o.IsPlayerViewable()?x+=10:x=0,2e3<=x&&(l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().fireViewability(),this.stopTrackingAdViewability())}.bind(this),10)},this.stopTrackingAdViewability=function(){l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&!l.currentBidSession.getCurrentTruvidAd().getStoppedTrackingViewability()&&l.currentBidSession.getCurrentTruvidAd().isAdOnly()&&(l.currentBidSession.getCurrentTruvidAd().setStoppedTrackingViewability(),o.dispatchEvent(ie,{currentAdViewabilityCounter:x})),clearInterval(k),x=0},this.onContentVolumeChange=function(){this.previousVoideoEnd=function(){O(),i&&clearTimeout(i)},this.onAdStopped=function(e){var t,i,n=null===(t=l.currentBidSession)||void 0===t?void 0:null===(i=t.getCurrentTruvidAd())||void 0===i?void 0:i.getAdManager();null!=n&&n.setAdsContainerVisibility&&n.setAdsContainerVisibility(!1),I=!1,this.stopTrackingAdViewability(),o.setIsAdPlaying(!1);var r=0;l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&(r=l.currentBidSession.getCurrentTruvidAd().getNumberOfTimesAdSkipped()),u.dispatchEvent(new CustomEvent(Z,{detail:{numberOfTimesAdSkipped:r}})),m=d=!1,window.playerLog("on ad stopped"),this.stopUpdateCurrentContentTimeState(),e||N()?m=!1:(window.playerLog("going to switch to content"),P()),l.currentBidSession&&l.currentBidSession.resetCurrentTruvidAd(),F()},this.canStartBiddingSession=function(){return null==this.currentBidSession&&(!this.playerObj.getPauseOnHiddenTab()||this.playerObj.getPauseOnHiddenTab()&&!o.getPlayerStoppedOnPageVisibiltiyEvent()&&o.getIsPageVisible())},this.isAdLoading=function(){return I},this.init=function(){var i=function(e){this.initializeListeners(),e()}.bind(this),n=function(t){new Q(this.playerObj).Sync().then(function(){i(t)}.bind(this)).catch(function(e){Object(V.a)("userSyncErr",{wid:o.getWidgetId()},e),i(t)})}.bind(this);return new Promise(function(t){r.Load().then(function(){n(t)}.bind(this)).catch(function(e){Object(V.a)("thirdPartyLoaderLoadErr",{wid:o.getWidgetId()},e),n(t)}.bind(this))}.bind(this))},this.initializeListeners=function(){c=o.getVastPath();var e=o.getElementDimension(u);l.syncContentDimensions(e.width,e.height),this.playerObj.subscribe(G.i,this.onPlayerResize),this.playerObj.subscribe(K.e,this.onPlayerResize),this.playerObj.subscribe(K.b,this.onPlayerResize),this.playerObj.subscribe(G.n,this.onPlayerResize),this.playerObj.subscribe(G.d,function(){return new Promise(function(e){N()||(d=!1,clearTimeout(i),l.currentBidSession&&l.currentBidSession.destroy(),l.currentBidSession=null,A=!0),e()}.bind(this))}.bind(this))},this.stopAd=function(){l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&(window.playerLog("ad stopped"),l.currentBidSession.getCurrentTruvidAd().getAdManager().stopAd()),this.stopTrackingAdViewability()},this.skipAd=function(){l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&(u.dispatchEvent(new CustomEvent(Z)),window.playerLog("ad skipped"),l.currentBidSession.getCurrentTruvidAd().getAdManager().skipAd()),u.dispatchEvent(new CustomEvent($)),this.stopTrackingAdViewability()},this.startBiddingSession=function(e){o.DispatchProyerLog("reject starting bidding session")})},this.killBiddingSession=function(){var e,t;(null===(e=l.currentBidSession)||void 0===e?void 0:null===(t=e.getCurrentTruvidAd())||void 0===t?void 0:t.getAdManager())&&(O(),this.onAdStopped()),l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getIsLoaded()&&P()},this.getAdRequestWidth=function(){return p},this.adRequestHeight=fonfiguration.isClickToPlay?"click":"auto"},this.getCurrentSlotTypeMacro=function(){return y},this.getCurrentSlotNumberMacro=function(){reteaseCurrentSlotNUmberMacro=function(){b++},this.syncContentDimensions=function(e,t){var i=Math.ceil(e),n=Math.ceil(t);f=i,h=n,0<e&&0<t&&(p=f,g=h)},this.setCurrentAdPlaying=function(e){d=e},this.advertisingState=function(){var e=!1;return d&&l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getAdManager()&&(e=l.currentBidSession.getCurrentTruvidAd().getAdManager().isCurrentAdPaused()),{paused:e}},this.initializeAdManagers=function(){R()},this.getImaAdManager=function(){retudVastOnNextBiddingSession=fun{this.previousVolume=o.getCurrentVolume()},this.onLoadingContainerFailed=function(e){window.playerLog("on loading container failed - advertising"),I=!1,o.setVolume(this.previousVolume),l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&l.currentBidSession.getCurrentTruvidAd().getIsLoaded()&&u.dispatchEvent(new CustomEvent("adStoppedAfterLoad")),l.currentBidSession&&l.currentBidSession.getCurrentTruvidAd()&&"function"==typeof l.currentBidSession.getCurrentTruvidAd().clearResources&&l.currentBidSession.getCurrentTruvidAd().clearResources(),l.currentBidSession&&e==l.currentBidSession.getCurrentTruvidAd()&&this.stopUpdateCurrentContentTimeState(),l.currentBidSession&&(o.isMediaPlayingIsDifferentThanContent()&&o.restoreContentState(),e.isPrebid||l.currentBidSession.onLoadingContainerFailed(e))}(){o.updateCurrentContentTimeState()},50)},this.stopUpdateCurrentContentTimeState=function(){clearInterval(i)},this.getRequestWidth=function(){return p},this.getRequestHeight=function(){return g},this.loadAdByUrl=function(e,t){this.adMacros.InjectMacros(e).then(function(e){(w=new H.a(null,e,l.getAllowedContainers())).requestMediaFiles(this.getRequestWidth(),this.getRequestHeight(),_,t),w.setIsPrebid(!0)}.bind(this)).catch(function(e){Object(V.a)("LoadAdByUrlEx",{wid:o.getWidgetId()eturn n}),i.d(t,"b",function(){return r})},function(e,t,i){"use strict";function a(e,t,i){i=i||e.length;for(var n="";t<i;t++)n+=e.charAt(t);return n}function n(e){e+="=";for(var t,i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var r=i[n];" "==r.charAt(0);)r=a(r,1);if(0==r.indexOf(e)){t=a(r,e.length,r.length);break}}return t}function r(e){var t=window.location.hostname;return 0<=e.indexOf(t)?t:0<=t.indexOf(e)?e:t}function o(e,t,i,n){try{document.cookie=e+"="+JSON.stringify(t)+";path=/;expires="+i+";domain=."+n}catch(e){window.playerLog("could not write cookie"),window.playerLog(e)}}i.d(t,"a",function(){return n}),i.d(t,"b",function(){return r}),i.d(t,"c",function(){return o})},function(e,t,i){
/*
 *  @Copyright (c) 2017 Dailymotion (http://www.dailymotion.com)
 *  @Licensed under the Apache License, Version 2.0 (the "License");
 *  @you may not use this file except in compliance with the License.
 *  @You may obtain a copy of the License at
    http://www.apache.org/licenses/LICENSE-2.0
    Unless required by applicable law or agreed to in writing, software
    distributed under the License is distributed on an "AS IS" BASIS,
    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    See the License for the specific language governing permissions and
    limitations under the License.
    src/remux/mp4-generator.js and src/demux/exp-golomb.ts implementation in this project
    are derived from the HLS library for video.js (https://github.com/videojs/videojs-contrib-hls)
    That work is also covered by the Apache 2 License, following copyright:
    Copyright (c) 2013-2015 Brightcove
    THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
    IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
    FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
    AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
    LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
    OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
    THE SOFTWARE.roperty.call(e,t)},r.p="/dist/",r(r.s=18)}([function(e,t,i){"use strACK_BUFFER_REACHED="hlsBackBufferReached"}(n=n||{})},function(e,t,i){"use strict";i.d(t,"a",function(){return o}),i.d(t,"b",function(){return s});var r=function(){},n={trace:r,debug:r,log:r,warn:r,info:r,error:r},a=n;function o(e){if(self.console&&!0===e||"object"==typeof e){!function(t){for(var e=arguments.length,i=new Array(1<e?e-1:0) t?t.bind(self.console,"["+e+"] >"):r}(e)})}(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=n}}else a=n}var s=n},function(e,t,i){"use strict";var n,r;i.d(t,"b",function(){ROR="muxENAL_ABORTEf e&&isFinite(e)};Number.MAX_SAFE_INTEGER},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return p}),i.d(t,"c",function(){return g});prototype),u(e.prototype.constructor=e,t)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writi){return t&&c(e.prototype,t),i&&c(e,i),e}!function(e){e.AUDIO="audio",e.VIDEO="video"rl||e.keyn!!(e.audio||e.video||e.audiovideo)}}]),e}(f)},function(e,t,i){"use strict";i.d(t,"b",function(){return b}),i.d(t,"g",function(){return w}),i.d(t,"f",function(){return n}),i.d(t,"d",function(){return a}),i.d(t,"c",function(){return o}),i.d(t,"e",function(){return d}),i.d(t,"h",function(){return c}),i.d(t,"a",function(){return h});var =i>>16&255,e[t+2]=i>>8&255,e[t+3]=255&i}function b(e,t){var i,n,r,a=[];if(!t.length)return a;r="data"in e?(i=e.data,n=e.start,e.end):(n=0,(i=e).byteLength);for(var o=n;o<r;){var s=y(i,o),l=1<s?o+s:r;if(m(i.subarray(o+4,o+8))===t[0])if(1===t.length)a.push({data:i,start:o+8,end:l});else{var d=b({data:i,start:o+8,end:l},t.slieturn i.set(e),i.set(t,e.length),i}},function(e,t,i){"use strict";i.d(t,"b",function(){return n}),i.d(t,"a",function(){return r}),i.d(t,"d",function(){return a}),i.d(t,"e",function(){return o}),i.d(t,"c",function(){return s}),i.d(t,"f",function(){return v});var c,u=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<]<=1+1t)ngeaming.transportStreamTimestamp"===e.info},s=function(e){for(var t=0,i=[];u(e,t);){for(var n=f(e,t+6),r=(t+=10)+n;t+8<r;){var a=(s=e.subarray(t),l=String.fromCharCode(s[0],s[1],s[2],s[3]),d=f(s,4),{type:l,size:d,data:s.subarray(10,10+d)}),o=p(a);o&&i.push(o),t+=a.siz"=;ra.va n(l(e,t,i))}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";i.d(t,"c",function(){return be}),i.d(t,"d",function(){return Ee}),i.d(t,"a",function(){return Se}),i.d(t,"b",function(){return Ae});var ee=i(0),te=i(2),n=i(13=0,this.cachedData=null,this.initPTS=null}ve4,sequenceNumber:0,samples:[],dropped:0}},t.resetTimeStamp=function(){}ion(){},t.canP{return!1},t.appendFrame=function(e,t,i){},t.demux=function(e,t){this.cachedData&&(e=Object(x.a)(this.cachedData,e),this.cachedData=null);var i,n,r=I.b(e,0),a=r?r.length:0,o=this._audioTrack,s=this._id3Track,l=r?I.d(r):void 0,d=e.length;for(0!==this.frameIndex&&null!==this.initPTS||(this.initPTS=f(l,t)),r&&0<r.length&&s.samples.push({pts:this.initPTS,dts:this.initPTS,data:r}),n=this.initPTS;a<d;){if(this.canParse(e,a)){var u=this.appendFrame(o,e,a);u?(this.frameIndex++,n=u.sample.pts,i=a+=u.length):a=d}else I.a(e,a)?(r=I.b(e,a),s.samples.push({pts:n,dts:n,data:r}),i=a+=r.length):a++;if(a===d&&i!==d){var c=Object(h.a)(e,i);this.cachedData?this.cachedData=Object(x.a)(this.cachedData,c):this.cachedData=c}}return{audioTrack:o,avcTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-1,samples:[],dropped:0},id3Track:s,textTrack:{type:"",id:-1,pid:-1,inputTimeScale:9e4,sequenceNumber:-does not,sequenceNumber:-1,samples:[],ion(e,t){ret&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}f=t+n;return r===e.length||m(e,r)}return!1}function v(e,t,i,n,r){if(!e.samplerate){var a=function(e,t,i,n){var r,a,o,s,l=navigator.userAgent.toLowerCase(),d=n,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];r=1+((192&t[i+2])>>>6);var c=(60&t[i+2])>>>2;if(!(u.length-1<c))return o=(1&t[i+2])<<2,o|=(192&t[i+3])>>>6,ie.b.log("manifest codec:"+n+", ADTS type:"+r+", samplingIndex:"+c),a=/firefox/i.test(l)?6<=c?(r=5,s=new Array(4),c-3):(r=2,s=new Array(2),c):-1!==l.indexOf("android")?(r=2,s=new Array(2),c):(r=5,s=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&6<=c?c-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(6<=c&&1==o||/vivaldi/i.test(l))||!n&&1==o)&&(r=2,s=new Array(2)),c)),s[0]=r<<3,s[0]|=(14&c)>>1,s[1]|=(1&c)<<7,s[1]|=o<<3,5===r&&(s[1]|=(14&a)>>1,s[2]=(1&a)<<7,s[2]|=8,s[3]=0),{config:s,samplerate:u[c],channelCount:o,codec:"mp4a.40."+r,manifestCodec:d};e.trigger(ee.a.ERROR,{type:te.b.MEDIA_ERROR,details:te.a.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+c})}(t,i,n,r);if(!a)return;e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,ie.b.log("parsed codec:"+e.codec+", rate:"+annelCount)}}function b(e){rheaderLength:o,frameLength:s,stamp:i+n*r}}(t,i,n,r,b(e.samplerate));if(a){var o=a.stamp,s=a.headerLength,l=a.frameLength,d={unit:t.subarray(i+s,i+s+l),pts:o,dts:o};return e.samples.push(d),{sample:d,length:l+s}}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__pri.config=void 0,i.observer=e,i.config=t,i}t=n,(e=i).prototype=Object.create(t.prototype),l(e.prototype.constructor=e,t);var r=i.prototype;return r.resetInitSegment=function(e,t,i){n.prototype.resetInitSegment.call(this,e,t,i),this._audioTrack={container:"audio/adts",type:"audio",id:0,pid:-1,sequenceNumber:0,isAAC:!0,samples:[],manifestCodec:e,duration:i,inputTimeScale:9e4,dropped:0}},i.probe=function(e){if(!e)return!1;for(var t=(I.b(e,0)||[]).length,i=e.length;t<i;t++)if(s(e,t))return ie.b.log("ADTS sh}(e,t)&&o(e,t)&&c(e,t)<=e.length-t}(e,t)},r.appendFrame=function(e,t,i){return v(e,this.observer,t,i,e.manifestCodec),w(e,t,i,this.initPTS,this.frameIndex)},i}(a);data=null,this.config=void 0,this.config=t}var t=e.prototype;return t.resetTimeStamp=function(){},t.resetInitSegment=function(ath.min(,sequenc,sequenceNumber:-does not support SAMPLE-AES decryption"))},t.destroy=function(){},e}();g.minProbeByteLength=1024;var E=g,S=null,A=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],T=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],L=[[0,72,144,12],[0,0,0,0]push(s),{sample:s,length:a.frameLength}}}}function k(e,t){var i=e[t+1]>>3&3,n=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!=i&&0!=r&&15!=r&&3!=a){var o=e[t+2]>>1&1,s=e[t+3]>>6,l=1e3*A[14*(3==i?3-n:3==n?3:4)+r-1],d=T[3*(3==i?0:2==i?1:2)+a],u=3==s?1:2,c=L[i][n],h=C[n],f=8*c*h,p=Math.floor(c*l/d+o)*h;if(null===S){var g=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);S=g?parseInt(g[1]):0}return!!S&&S<=87&&2==n&&224e3<=l&&0==s&&(e[t+3]=128|e[t+3]),{sampleRate:d,channe+n;return r===teLength,this.word=0,this.bitsAvail.bitsAvailard()),this.his.bitsA,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(function()this.skips.readUEG();rean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=functdUInt=function(){r(i=(t+this2-w)*(b+1)*16-(wreadUByyptAvcSample(e,t,i,n,a,o),!o)return}}}},e}(),F={rver=e, found @ offs188]&&71===e[i,dropped:0,duration:"audio"===e?t:void 0}};vodec=e,this.videoCodec=t,this._duration=i},e.reshis.aacOverFlow=null,this.aacLastPTS=null},e.demux=function(e,t,i,n){var r;void 0===i&&(i=!1),void 0===n&&(n=!1),i||(this.sampleAes=null);var a=this._avcTrack,o=this._audioTrack,s=this._id3Track,l=a.pid,d=a.pesData,u=o.pid,c=s.pid,h=o.pesData,f=s.pesData,p=!1,g=this.pmtParsed,m=this._pmtId,v=e.length;if(this.remainderData&&(v=(e=Object(x.a)(this.remainderData,e)).length,this.remainderData=null),v<188&&!n)return this.remainderData=e,{audioTrack:o,avcTrack:a,id3Track:s,textTrack:this._txtTrack};var y,b,w=Math.max(0,k.syncOffset(e));(v-=(v+w)%188)<e.byteLength&&!n&&(this.remainderData=new Uint8Array(e.buffer,v,e.buffer.byteLength-v));for(var E=w;E<v;E+=188)if(71===e[E]){var S=!!(64&e[E+1]),A=((31&e[E+1])<<8)+e[E+2],T=void 0;if(1<(48&e[E+3])>>4){if((T=E+5+e[E+4])===E+188)continue}else T=E+4;switch(A){case l:S&&(d&&(r=V(d))&&this.parseAVCPES(r,!1),d={data:[],size:0}),d&&(d.data.push(e.subarray(T,E+188)),d.size+=E+188-T);break;case u:S&&(h&&(r=V(h))&&(o.isAAC?this.parseAACPES(r):this.parseMPEGPES(r)),h={data:[],size:0}),h&&(h.data.push(e.subarray(T,E+188)),h.size+=E+188-T);break;case c:S&&(f&&(r=V(f))&&this.parseID3PES(r),f={data:[],size:0}),f&&(f.data.push(e.subarray(T,E+188)),f.size+=E+188-T);break;case 0:S&&(T+=e[T]+1),m=this._pmtId=(31&(y=e)[(b=T)+10])<<8|y[b+11];break;case m:S&&(T+=e[T]+1);var L=U(e,T,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,i);0<(l=L.avc)&&(a.pid=l),0<(u=L.audio)&&(o.pid=u,o.isAAC=L.isAAC),0<(c=L.id3)&&(s.pid=c),p&&!g&&(ie.b.log("reparse from beginning"),p=!1,E=w-188),g=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.emit(ee.a.ERROR,ee.a.ERROR,{type:te.b.MEDIA_ERROR,details:te.a.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});a.pesData=d,o.pesData=h,s.pesData=f;var C={audioTrack:o,avcTrack:a,id3Track:s,textTrack:this._txtTrack};return n&&ampleAes?this.decrypt(e,tharseID3PES(t),r.pr,this.conSamples(i.itPTS=this._initDTS=null,this._duration=0},e.parseAVCPES=function(A,e){var T,L=this,C=this._avcTrack,t=this.parseAVCNALu(A.data),k=this.avcSample,x=!1;A.data=null,k&&t.length&&!C.audFound&&(j(k,C),k=this.avcSample=_(!1,A.pts,A.dts,"")),t.forEach(function(e){switch(e.type){case 1:T=!0,(k=k||(L.avcSample=_(!0,A.pts,A.dts,""))).frame=!0;var t=e.data;if(x&&4<t.length){var i=new M(t).readSliceType();2!==i&&4!==i&&7!==i&&9!==i||(k.key=!0)}break;case 5:T=!0,(k=k||(L.avcSample=_(!0,A.pts,A.dts,""))).key=!0,k.frame=!0;break;case 6:T=!0;var n=new M(G(e.data));n.readUByte();for(var r=0,a=0,o=!1,s=0;!o&&1<n.bytesAvailable;){for(r=0;r+=s=n.readUByte(),255===s;);for(a=0;a+=s=n.readUByte(),255===s;);if(4===r&&0!==n.bytesAvailable){if(o=!0,181===n.readUByte()&&49===n.readUShort()&&1195456820===n.readUInt()&&3===n.readUByte()){for(var l=n.readUByte(),d=31&l,u=[l,n.readUByte()],c=0;c<d;c++)u.push(n.readUByte()),u.push(n.readUByte()),u.push(n.readUByte());H(L._txtTrack.samples,{type:3,pts:A.pts,bytes:u})}}else if(5===r&&0!==n.bytesAvailable){if(o=!0,16<a){for(var h=[],f=0;f<16;f++)h.push(n.readUByte().toString(16)),3!==f&&5!==f&&7!==f&&9!==f||h.push("-");for(var p=a-16,g=new Uint8Array(p),m=0;m<p;m++)g[m]=n.readUByte();H(L._txtTrack.samples,{pts:A.pts,payloadType:r,uuid:h.join(""),userData:Object(I.f)(g),userDataBytes:g})}}else if(a<n.bytesAvailable)for(var v=0;v<a;v++)n.readUByte()}break;case 7:if(x=T=!0,!C.sps){var y=new M(e.data).readSPS();C.width=y.width,C.height=y.height,C.pixelRatio=y.pixelRatio,C.sps=[e.data],C.duration=L._duration;for(var b=e.data.subarray(1,4),w="avc1.",E=0;E<3;E++){var S=b[E].toString(16);S.length<2&&(S="0"+S),w+=S}C.codec=w}break;case 8:T=!0,C.pps||(C.pps=[e.data]);break;case 9:T=!1,C.audFound=!0,k&&j(k,C),k=L.avcSample=_(!1,A.pts,A.dts,"");break;case 12:T=!1;break;default:T=!1,k&&(k.debug+="unknown NAL "+e.type+" ")}k&&T&&k.units.push(e)}),e&&k&&(j(ks){var r=i.units;t=r[r.length-1]}return t},e.parseAVCNALu=function(e){var t,i,n=e.byteLength,r=this._avcTrack,a=r.naluState||0,o=a,s=[],l=0,d=-1,u=0;for(-1===a&&(u=31&e[d=0],a=0,l=1);l<n;)if(t=e[l++],a)if(1!==a)if(t)if(1===t){if(0<=d){var c={data:e.subarray(d,l-a-1),type:u};s.push(c)}else{var h=this.getLastNalUnit();if(h&&(o&&l<=4-o&&h.state&&(h.data=h.data.subarray(0,h.data.byteLength-o)),0<(i=l-a-1))){var f=new Uint8Array(h.data.byteLength+i);f.set(h.data,0),f.set(e.subarray(0,i),h.data.byteLength),h.data=f}}a=l<n?(u=31&e[d=l],0):-1}else a=0;else a=3;else a=t?0:2;else a=t?0:1;if(0<=d&&0<=a){var p={data:e.subarray(d,n),type:u,state:a};s.push(p)}if(0===s.length){var g=this.getLastNalUnit();if(g){var m=new Uint8Array(g.data.byteLength+e.byteLength);m.set(g.data,0),m.set(e,g.data.byteLength),g.data=m}}return r.naluState=a,s},e.parseAACPES=function(e){var t,i,n,r,a=this._audioTrack,o=this.aacLastPTS,s=this.aacOverFlow,l=e.data;if(s){var d=new Uint8Array(s.byteLength+l.byteLength);d.set(s,0),d.set(l,s.byteLength),l=d}for(t=0,i=l.length;t<i-1&&!m(l,t);t++);if(!t||(r=t<i-1?(n="AAC PES did not start with ADTS header,offset:"+t,!1):(n="no ADTS header found in AAC PES",!0),ie.b.warn("parsing error:"+n),this.observer.emit(ee.a.ERROR,ee.a.ERROR,{type:te.b.MEDIA_ERROR,details:te.a.FRAG_PARSING_ERROR,fatal:r,reason:n}),!r)){v(a,this.observer,l,t,this.audioCodec);var u,c=0,h=b(a.samplerate);if(void 0!==e.pts)u=e.pts;else{if(null===o)return void ie.b.warn("[tsdemuxer]: AAC PES unknown PTS");u=o}if(s&&null!==o){var f=o+h;1<Math.abs(f-u)&&(ie.b.log("[tsdemuxer]: AAC: align PTS for overlapping frames by "+Math.round((f-u)/90)),u=f)}for(var p=null;t<i;){if(m(l,t)){if(t+5<i){var g=w(a,l,t,u,c);if(g){t+=g.length,p=g.sample.pts,c++;continue}}break}t++}this.aacOverFlow=t<i?l.subarray(t,warn("[tsdemux.warn")}t+=5+((15&e[t+3])<<8|e[t+4])}return r}function V(e){var t,i,n,r,a,o=0,s=e.data;if(!e||0===e.size)return null;for(;s[0].length<19&&1<s.length;){var l=new Uint8Array(s[0].length+s[1].length);l.set(s[0]),l.set(s[1],s[0].length),s[0]=l,s.splice(1,1)}if(1!==((t=s[0])[0]<<16)+(t[1]<<8)+t[2])return null;if((i=(t[4]<<8)+t[5])&&i>e.size-6)return null;var d=t[7];192&d&&(r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,64&d?54e5<r-(a=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)&&(ie.b.warn(Math.round((r-a)/9e4)+"s delta between PTS and DTS, align them"),r=a):a=r);var u=(n=t[8])+9;if(e.size<=u)return null;e.size-=u;for(var c=new Uint8Array(e.size),h=0,f=s.length;h<f;h++){var p=(t=s[h]).byteLength;if(u){if(p<u){u-=p;continue}t=t.subarray(u),p-=u,u=0}c.set(t,o),o+=p}ret[0]&&(o++,i.shift()),a[n]=e[o]nction(e,t){return e.__pr i(){return n.apply(this,arguments)||this}t=n,(e=i).prototype=Object.create(t.prototype),W(e.prototype.constructor=e,t);v,duratioPEG Audio sn(e,t){return urn P(e,t,i,this.initPTS,this.frameInde90,90,90,90,90,90,90,90,90,90,90,94])}},e}(),K=Math.pow(2,32)-h.box(s.set(neturn h=functi24,n>>1ale,e.d0,0,0,0ox(h.tyh.box(h].durat.box.ap55,255,asRedun.stsz,h,255&d,at([t])55&t,0lCount,(e)):h.,n>>8&2a])),h.5,h.box,255&t,&s],12+16*i);r.set(h.FTYP),i.set(t,h.FTYP.byteLength),i},h}();X.types=void 0,X.HDLR_TYPES=void 0,X.STTS=void 0,X.STSC=void 0,X.STCO=void 0,X.STSZ=void 0,X.VMHD=void 0,X.SMHD=void 0,X.STSD=v]=i[n])}return e}).apply(this,argumerseInt(a[1]):0}se=!!oe&&oe<75||!!J&&J<600}var t=e.prototype;retuDTS reset"),this._inieoContiguous=!1,thienerated flag reset n&&ie.b.debug("PTS rollover detected"),t},t.remux=function(e,t,i,n,r,a,o){var s,l,d,u,c,h,f=r,p=r,g=-1<e.pid,m=-1<t.pid,v=t.samples.length,y=0<e.samples.length,b=1<v;if((!g||y)&&(!m||b)||this.ISGenerated||o){this.ISGenerated||(d=this.generateIS(e,t,r));.length;t++)if(e[t].key)return t;return-1}(t.samples),!w&&this.config.forceKeyFrameOnDiscontinuity))if(h=!0,0<E){ie.b.warn("[mp4-remuxer]: Dropped "+E+" out of "+v+" video samples due to a missing keyframe");var S=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(E),t.dropped+=E,p+=(t.samples[0].pts-S)/(t.timescale||9e4)}else-1===E&&(ie.b.warn("[mp4-remuxer]: No keyframe found out of "+v+" video samples"),h=!1);if(this.ISGenerated){if(y&&b){var A=this.getVideoStartPts(t.samples),T=(le(e.samples[0].pts,A)-A)/t.inputTimeScale;f+=Math.max(0,T),p+=Math.max(0,-T)}if(y){if(e.samplerate||(ie.b.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,t,r)),l=this.remuxAudio(e,f,this.isAudioContiguous,a,b?p:void 0),b){var L=l?l.endPTS-l.startPTS:0;t.inputTimeScale||(ie.b.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,t,r)),s=this.remuxVideo(t,p,w,L)}}else b&&(s=this.remuxVideo(t,p,w,0));s&&(s.firstKeyFrame=E,s.independent=-1!==E)}}return this.ISGenerated&&(i.samples.length&&(c=this.remuxID3(i,r)),n.samples.length&&(u=this.remuxText(n,r))),{audio:l,video:s,initSegment:ditDTS=r),{tracks:d,initPTS:n,timescale:a}},t.remuxVideo=function(e,t,i,n){var r,a,o,s=e.inputTimeScale,l=e.samples,d=[],u=l.length,c=this._initPTS,h=this.nextAvcDts,f=8,p=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,m=0,v=!1;i&&null!==h||(h=t*s-(l[0].pts-le(l[0].dts,l[0].pts)));for(var y=0;y<u;y++){var b=l[y];b.pts=le(b.pts-c,h),b.dts=le(b.dts-c,h),b.dts>b.pts&&(m=Math.max(Math.min(m,b.pts-b.dts),-18e3)r i=e.dts-t.dts,n=e.pts-t.pts;return i||n}),a=l[0].dts,o=l[l.length-1].dts;var w=Math.round((o-a)/(u-1));if(m<0){if(m<-2*w){ie.b.warn("PTS < DTS detected in video samples, offsetting DTS from PTS by "+re(-w,!0)+" ms");for(var E=m,S=0;S<u;S++)l[S].dts=E=Math.max(E,l[S].pts-w),l[S].pts=Math.max(E,l[S].pts)}else{ie.b.warn("PTS < DTS detected in video samples, shifting DTS by "+re(m,!0)+" ms to overcome this issue");for(var A=0;A<u;A++)l[A].dts=l[A].dts+m}a=l[0].dts}if(i){var T=a-h,L=w<T;if(L||T<-1){L?ie.b.warn("AVC: "+re(T,!0)+" ms ("+T+"dts) hole between fragments detected, filling it"):ie.b.warn("AVC: "+re(-T,!0)+" ms ("+T+"dts) overlapping between fragments detected"),a=h;var C=l[0].pts-T;l[0].dts=a,l[0].pts=C,ie.b.log("Video: First PTS/DTS adjusted: "+re(C,!0)+"/"+re(a,!0)+", delta: "+re(T,!0)+" ms")}}se&&(a=Math.max(0,a));for(var k=0,x=0,I=0;I<u;I++){for(var P=l[I],O=P.units,R=O.length,D=0,M=0;M<R;M++)D+=O[M].data.length;x+=D,k+=R,P.length=D,P.dts=Math.max(P.dts,a),P.pts=Math.max(P.pts,P.dts,0),p=Math.min(P.pts,p),g=Math.max(P.pts,g)}o=l[u-1].dts;var B,F=x+4*k+8;try{B=new Uint8Array(F)}catch(e){return void this.observer.emit(ee.a.ERROR,ee.a.ERROR,{type:te.b.MUX_ERROR,details:te.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:F,reason:"fail allocating video mdat "+F})}var N=new DataView(B.buffer);N.setUint32(0,F),B.set(ne.types.mdat,4);for(var _=0;_<u;_++){for(var U=l[_],V=U.units,j=0,H=0,G=V.length;H<G;H++){var z=V[H],W=z.data,Q=z.data.byteLength;N.setUint32(f,Q),f+=4,B.set(W,f),f+=Q,j+=4+Q}if(_<u-1)r=l[_+1].dts-U.dts;else{var q=this.config,Y=U.dts-l[0<_?_-1:_].dts;if(q.stretchShortVideoTrack&&null!==this.nextAudioPts){var K=Math.floor(q.maxBufferHole*s),X=(n?p+n*s:this.nextAudioPts)-U.pts;K<X?((r=X-Y)<0&&(r=Y),ie.b.log("[mp4-remuxer]: It is approximately "+X/90+" ms to the next segment; using duration "+r/90+" ms for the last video frame.")):r=Y}else r=Y}var J=Math.round(U.pts-U.dts);d.push(new de(U.key,r,j,J))}if(d.length&&oe&&oe<70){var Z=d[0].flags;Z.dependsOn=2,Z.isNonSync=0}this.nextAvcDts=h=o+r,this.isVideoContiguous=!0;var $={data1:ne.moof(e.sequenceNumber++,a,ae({},e,{samples:d})),data2:B,startPTS:p/s,endPTS:(g+r)/s,startDTS:a/s,endDTS:h/s,type:"video",hasAudio:!1,hasVideo:!0,nb:d.length,dropped:e.dropped};return e.samples=[],e.dropped=0,$},t.remuxAudio=function(e,t,i,n,r){var a,o=e.inputTimeScale,s=o/(e.samplerate?e.samplerate:o),l=e.isAAC?1024:1152,d=l*s,u=this._initPTS,c=!e.isAAC&&this.typeSupported.mpeg,h=[],f=e.samples,p=c?0:8,g=this.nextAudioPts||-1,m=t*o;if(this.isAudioContiguous=i=i||f.length&&0<g&&(n&&Math.abs(m-g)<9e3||Maach(function(e){e.pts=e.dt(!(f=f.filter(function(e){return 0<=e.pts})).length)return;g=0===r?0:n?Math.max(0,m):f[0].pts}if(e.isAAC)for(var v=this.config.maxAudioFramesDrift,y=0,b=g;y<f.length;){var w=f[y],E=w.pts,S=E-b,A=Math.abs(1e3*S/o);if(S<=-v*d&&void 0!==r)i||0<y?(ie.b.warn("[mp4-remuxer]: Dropping 1 audio frame @ "+(b/o).toFixed(3)+"s due to "+Math.round(A)+" ms overlap."),f.splice(y,1)):(ie.b.warn("Audio frame @ "+(E/o).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*S/o)+" ms."),b=E+d,y++);else if(v*d<=S&&A<1e4&&void 0!==r){var T=Math.floor(S/d);b=E-T*d,ie.b.warn("[mp4-remuxer]: Injecting "+T+" audio frame @ "+(b/o).toFixed(3)+"s due to "+Math.round(1e3*S/o)+" ms gap.");for(var L=0;L<T;L++){var C=Math.max(b,0);(a=Y.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(ie.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),a=w.unit.subarray()),f.splice(y,0,{unit:a,pts:C,dts:C}),b+=d,y++}w.pts=w.dts=b,b+=d,y++}else w.pts=w.dts=b,b+=d,y++}for(var k,x=null,I=null,P=0,O=f.length;O--;)P+=f[O].unit.byteLength;for(var R=0,D=f.length;R<D;R++){var M=f[R],B=M.unit,F=M.pts;if(null!==I)h[R-1].duration=Math.round((F-I)/s);else{var N=Math.round(1e3*(F-g)/o),_=0;if(i&&e.isAAC){if(0<N&&N<1e4)_=Math.round((F-g)/d),ie.b.log("[mp4-remuxer]: "+N+" ms hole between AAC samples detected,filling it"),0<_&&((a=Y.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(a=B.subarray()),P+=_*a.length);else if(N<-12){ie.b.log("[mp4-remuxer]: drop overlapping AAC sample, expected/parsed/delta:"+(g/o).toFixed(3)+"s/"+(F/o).toFixed(3)+"s/"+-N+"ms"),P-=B.byteLength;continue}F=g}if(x=F,!(0<P))return;P+=p;try{k=new Uint8Array(P)}catch(e){return void this.observer.emit(ee.a.ERROR,ee.a.ERROR,{type:te.b.MUX_ERROR,details:te.a.REMUX_ALLOC_ERROR,fatal:!1,bytes:P,reason:"fail allocating audio mdat "+P})}c||(new DataView(k.buffer).setUint32(0,P),k.set(ne.types.mdat,4));for(var U=0;U<_;U++)(a=Y.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(ie.b.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating the current frame instead"),a=B.subarray()),k.set(a,p),p+=a.byteLength,h.push(new de(!0,1024,a.byteLength,0))}k.set(B,p);var V=B.byteLength;p+=V,h.push(new de(!0,l,V,0)),I=F}var j=h.length;if(j){var H=h[h.length-1];this.nextAudioPts=g=I+s*H.duration;var G=c?new Uint8Array(0):ne.moof(e.sequenceNumber++,x/s,ae({},e,{samples:h}));e.samples=[];var z=x/o,W=g/o,Q={data1:G,data2:k,startPTS:z,endPTS:W,startDTS:z,endDTS:W,type:"audio",hasAudio:!0,hasVideo:!1,nb:j};return this.et a silent.samples;ret.samp2;4294hithis.dependsOn=e?2:1,tis.initTracks=void 0,this.lastEndD=e.prototype;retuon(e){this.initPTS=e,this.lastEndDTS=null},t.resetNextTimestamp=function(ateInitSegment(e),this.emitInitSegment=!0},t.generateInitSegment=function(e){var t=this.audioCodec,i=this.videoCodec;if(!e||!e.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var n=this.initData=Object(x.f)(e);t=t||fe(n.audio,ue.a.AUDIO),i=i||fe(n.video,ue.a.VIDEO);var r={};n.audio&&n.video?r.audiovideo={container:"video/mp4",codec:t+","+i,initSegment:e,id:"main"}:n.audio?r.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:n.video?r.video={container:"video/mp4",codec:i,initSegment:e,id:"main"}:ie.b.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=r},t.remux=function(e,t,i,n,r){var a=this.initPTS,o=this.lastEndDTS,s={audio:void 0,video:void 0,text:n,id3:i,initSegment:void 0};Object(y.a)(o)||(o=this.lastEndDTS=r||0);var l=t.samples;if(!l||!l.length)return s;var d={initPTS:void 0,timescale:1},u=this.initData;if(u&&u.length||(this.generateInitSegment(l),u=this.initData),!u||!u.length)return ie.b.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),s;this.emitInitSegment&&(d.tracks=this.initTracks,this.emitInitSegment=!1),Object(y.a)(a)||(this.initPTS=d.initPTS=a=he(u,l,o));var c=Object(x.c)(l,u),h=o,f=c+h;Object(x.e)(u,l,a),0<c?this.lastEndDTS=f:(ie.b.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());var p=!!u.audio,g=!!u.video,m="";p&&(m+="audio"),g&&(m+="video");var v={data1:l,startPTS:h,startDTS:h,endPTS:f,endDTS:f,type:m,hasAudio:p,hasVideo:g,nb:1,dropped:0};return s.audio="audio"===v.type?v:void 0,s.video="audio"!==v.type?v:void 0,sfunction(e,t,i){return Object(x.d)(e,t)-i};function fe(e,t){var i=null==e?void 0:e.codec;return i&&4<i.length?i:"hvc1"===i?"hvc1.1.c.L120.90":"av01"===i?"av01.0.04M.08":"avc1"===i||t===ue.a.VIDEO?"avc1.42e01e":"mp4a.40.5"}var pe,ge=ce,me=i(15);try{pe=self.performance.now.bind(self.performance)}catch(e){ie.b.debug("Unable to use Performance API on this environment"),pe=self.Date.now}var ve=[{demux:z,remux:Z},{demux:E,remux:ge},{demux:p,remuemux;ye=Math.max(yepeSupported=t,this.config=i,this.ven=e,this.decrypter&&this.decrypter.reset()},t.push=function(e,t,i,n){var r=this,a=i.transmuxing;a.executeStart=pe();var o=new Uint8Array(e),s=this.cache,l=this.config,d=this.currentTransmuxState,u=this.transmuxConkey&&null!==t.iv&&null!=t.method&&(i=t),i}(o,t);if(c&&"AES-128"===c.method){var h=this.getDecrypter();if(!l.enableSoftwareAES)return this.decryptionPromise=h.webCrypnull,i);return r.decryptionPromise=null,t}),this.decryptionPromise;var f=h.softwareDecrypt(o,c.key.buffer,c.iv.buffer);if(!f)return a.executeEnd=pe(),we(i);o=new Uint8Array(f)}var p=n||d,g=p.contiguous,m=p.discontinuity,v=p.trackSwitch,y=p.accurateTimeOffset,b=p.timeOffset,w=u.audioCodec,E=u.videoCodec,S=u.defaultInitPts,A=u.duration,T=u.initSegmentData;if((m||v)&&this.resetInitSegment(T,w,E,A),m&&this.resetInitialTimestamp(S),g||this.resetContiguity(),this.needsProbing(o,m,v)){if(s.dataLength){var L=s.flush();o=Object(x.a)(L,o)}this.configureTransmuxer(o,u)}var C=this.transmux(o,c,b,y,i),k=this.currentTransmuxState;return k.contiguous=!0,k.discontinuity=!1,k.trackSwitch=!1,a.executeEnd=pe(),C},t.flush=function(t){var i=this,e=t.transmuxing;e.executeStart=pe();var n=this.decrypter,r=this.cache,a=this.currentTransmuxState,oeturn o.then(function(){return i.flush(t)});var s=[],l=a.timeOffset;if(n){var d=n.flush();d&&s.push(this.push(d,null,t))}var u=r.dataLength;r.reset();var c=this.demuxer,h=this.remuxer;if(!c||!h)return ye<=u&&this.observer.emit(ee.a.ERROR,ee.a.ERROR,{type:te.b.MEDIA_ERROR,details:te.a.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"}),e.executeEnd=pe(),[w(function(e){return i.flushRemux(s,e,t),s}):(this.flushRemux(s,f,t),s)},t.flushRemux=function(e,t,i){var n=t.audioTrack,r=t.avcTrack,a=t.id3Track,o=t.textTrack,s=this.currentTransmuxState,l=s.accurateTimeOffset,d=s.timeOffset;ie.b.log("[transmuxer.ts]: Flushed fragment "+i.sn+(-1<i.part?" p: "+i.part:"")+" of level "+i.level);var u=this.remuxer.remux(n,r,a,o,d,l,!0);e.push({remuxResult:u,chunkMeta:i}),i.transmuxin(t.resetTimeStamp(resetContiguity(),tSegment(t,is.remuxer.,i,n,r):this.transmuxUnencrypted(e,i,n,r)},t.transmuxUnencrypted=function(e,t,i,n){var r=this.demuxer.demux(e,t,!1,!this.config.progressive),a=r.audioTrack,o=r.avcTrack,s=r.id3Track,l=r.textTrack;return{remuxResult:this.remuxer.remux(a,o,s,l3Track,e.textTrack,i,nnt(u,s,c,d),thi{return!this.demuxer||!this.remuxer||t||i},t.getDecrypter=function(){var e=this.decrypter;return e=e||(this.decrypter=neurn"then"in e&&e.then instanceof Function}var Se=function(e,t,i,n,r){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=ieo.prefixed=f,o.EventEmitter=o,e.exports=o},function(e,t,i){"use strpt({e:"AES-CBC"},!1,["encris.invKeySchedule=void 0,this.initTable()}var t=e.p=0;n<4;n++)i=w,f?(f=v^h[[h[l>>>8&255]]^y[h[255&l]e<<24|(652r^I),C=c,k=h,x=f,I=p,t+=4}return O.buffer},e}(),r=i(1),c=i(5),n=function(){function e(e,t,i){var n=(void 0===i?{}:i).removePKCS7Padding,r=void 0===n||n;if(this.logEnabled=!0,this.observer=void 0,this.config=void 0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.observer=e,this.config=t,this.removePKCS7Padding=r)try{var a=self.crypto;a&&(this.subtle=a.subtle||a.webkitSubtle)}catch(e){}null===this.subtle&&(this.config.enableSoftwaren t.destron(){ret))?ObjeceDecrypterptoDecrypt(new Uint8Array(e),t,i).then(n)},t.softwareDecrypt=function(e,t,i){var n=this.currentIV,r=this.currentResult,a=this.remainderData;this.logOnce("JS AES decrypt"),a&&(e=Object(c.a)(a,e),this.remainderData=null);var o=this.getValidChunk(e);if(!o.length)return null;n&&(i=n);var s=this.softwareDecrypter;(s=s||(this.softwareDecrypter=new u)).expandKey(t);var l=r;return this.currentResult=s.decrypt(o.buffer,0,i),this.currentIV=Object(d.a)n(e){return r.onWeblogEnabled=!0,thi),this.re"[decrypter.ts]: "+e),this.logEnabled=!1)},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n=i(9);function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.ddAbsoluteURL)(e,i.fromURL=t)},i.fromURI=function(e){retukey:"uri"s.chunks.length=tion(ew}),t.postMessage({event:"flush",data:i})}},function(r(t),i.d(t,"default",function(){return Tt});var K=i(9),X=i(3),k=i(0),b=i(2),J=i(1),l=i(5),Z=i(4);function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.ds.driftEnd=0,this.fragmentshis.availabilityDelay=e.availabilityDelay},n(this.fragments.length-1].programgetargetduration||e?1e3*(this.driftn(){return this.parts.partList.length-1].end.fragments[this.Date.now()-this.advancedDapartList[this.partList.partList.length-1].fragment.sn:this.endSN}}]),e}(),ee=i(14),r=/^(\d+)x(\d+)$/,a=&&(n=n.slice(1,-1)),i[t[1]]=n}return i},i}(),o={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!orted((t||"video")+'/mp4;codecs="'+e+'"')}var g,v,c=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-SESSION-DATA:([^\r\n]*)[\r\n]+/g,h=/#EXT-X-MEDIA:(.*)/g,ie=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),ne=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(PLAYLIST-TYPE):(.+)/.source,/#EXT-X-(MEDIA-SEQUENCE): *(\d+)/.source,/#EXT-X-(SKIP):(.+)/.source,/#EXT-X-(TARGETDURATION): *(\d+)/.source,/#EXT-X-(KEY):(.+)/.source,/#EXT-X-(START):(.+)/.source,/#EXT-X-(ENDLIST)/.source,/#EXT-X-(DISCONTINUITY-SEQ)UENCE: *(\d+)/.source,/#EXT-X-(DIS)CONTINUITY/.source,/#EXT-X-(VERSION):(\d+)/.source,/#EXT-X-(MAP):(.+)/.source,/#EXT-X-(SERVER-CONTROL):(.+)/.source,/#EXT-X-(PART-INF):(.+)/.source,/#EXT-X-(GAP)/.source,/#EXT-X-(BITRATE):\s*(\d+)/.source,/#EXT-X-(PART):(.+)/.source,/#EXT-X-(PRELOAD-HINT):(.+)/.source,/#EXT-X-(RENDITION-REPORT):(.+)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"4s|m4v|m4a)$/i,m=fgth;i++){var n=e[i];ifhift()).touildAbsoluteURL(t,e,{a=d)}return{levels:n,session"),y(l,d,"textCodec")}a.push(l)}}return a},u.parseLevelPlaylist=function(e,t,i,n,r){var a,o,s,l=new $(t),d=l.fragments,u=0,c=0,h=0,f=0,p=null,g=new Z.b(n,t),m=-1;for(ie.lastIndex=0,l.m3u8=e;null!==(a=ie.exec(e));){var v=a[1];if(v){g.duration=parseFloat(v);var y=(" "+a[2]).slice(1);g.title=y||null,g.tagList.push(y?["INF",v,y]:["INF",v])}else if(a[3])Object(X.a)(g.duration)&&(g.start=h,s&&(g.levelkey=s),g.sn=u,g.level=i,g.cc=f,g.urlId=r,d.push(g),g.relurl=(" "+a[3]).slice(1),ae(g,p),h+=(p=g).duration,u++,c=0,(g=new Z.b(n,t)).start=h,g.sn=u,g.cc=f,g.level=i);else if(a[4]){var b=(" "+a[4]).slice(1);p?g.setByteRange(b,p):g.setByteRange(b)}else if(a[5])g.rawProgramDateTime=(" "+a[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),-1===m&&(m=d.length);else{if(!(a=a[0].match(ne))){J.b.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<a.length&&void 0===a[o];o++);var w=(" "+a[o]).slice(1),E=(" "+a[o+1]).slice(1),S=a[o+2]?(" "+a[o+2]).slice(1):"";switch(w){case"PLAYLIST-TYPE":l.type=E.toUpperCase();break;case"MEDIA-SEQUENCE":u=l.startSN=parseInt(E);break;case"SKIP":var A=new te(E),T=A.decimalInteger("SKIPPED-SEGMENTS");if(Object(X.a)(T)){for(var L=l.skippedSegments=T;L--;)d.unshift(null);u+=T}var C=A.enumeratedString("RECENTLY-REMOVED-DATERANGES");C&&(l.recentlyRemovedDateranges=C.split("\t"));break;case"TARGETDURATION":l.targetduration=parseFloat(E);break;case"VERSION":l.version=parseInt(E);break;case"EXTM3U":break;case"ENDLIST":l.live=!1;break;case"#":(E||S)&&g.tagList.push(S?[E,S]:[E]);break;case"DIS":f++;case"GAP":g.tagList.push([w]);break;case"BITRATE":g.tagList.push([w,E]);break;case"DISCONTINUITY-SEQ":f=parseInt(E);break;case"KEY":var k,x=new te(E),I=x.enumeratedString("METHOD"),P=x.URI,O=x.hexadecimalInteger("IV"),R=x.enumeratedString("KEYFORMATVERSIONS"),D=x.enumeratedString("KEYID"),M=null!=(k=x.enumeratedString("KEYFORMAT"))?k:"identity";if(-1<["com.apple.streamingkeydelivery","com.microsoft.playready","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed","com.widevine"].indexOf(M)){J.b.warn("Keyformat "+M+" is not supported from the manifest");continue}if("identity"!==M)continue;I&&(s=ee.a.fromURL(t,P),P&&0<=["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(I)&&(s.method=I,s.keyFormat=M,D&&(s.keyID=D),R&&(s.keyFormatVersions=R),s.iv=O));break;case"START":var B=new te(E).decimalFloatingPoint("TIME-OFFSET");Object(X.a)(B)&&(l.startTimeOffset=B);break;case"MAP":var F=new te(E);g.relurl=F.URI,F.BYTERANGE&&g.setByteRange(F.BYTERANGE),g.level=i,g.sn="initSegment",s&&(g.levelkey=s),l.initSegment=g,(g=new Z.b(n,t)).rawProgramDateTime=l.initSegment.rawProgramDateTime;break;case"SERVER-CONTROL":var N=new te(E);l.canBlockReload=N.bool("CAN-BLOCK-RELOAD"),l.canSkipUntil=N.optionalFloat("CAN-SKIP-UNTIL",0),l.canSkipDateRanges=0<l.canSkipUntil&&N.bool("CAN-SKIP-DATERANGES"),l.partHoldBack=N.optionalFloat("PART-HOLD-BACK",0),l.holdBack=N.optionalFloat("HOLD-BACK",0);break;case"PART-INF":var _=new te(E);l.partTarget=_.decimalFloatingPoint("PART-TARGET");break;case"PART":var U=l.partList;U=U||(l.partList=[]);var V=0<c?U[U.length-1]:void 0,j=c++,H=new Z.c(new te(E),g,t,j,V);U.push(H),g.duration+=H.duration;break;case"PRELOAD-HINT":var G=new te(E);l.preloadHint=G;break;case"RENDITION-REPORT":var z=new te(E);l.renditionReports=l.renditionReports||[],l.renditionReports.push(z);break;default:J.b.warn("line parsed but not handled: "+a)}}}p&&!p.relurl?(d.pop(),h-=p.duration,l.partList&&(l.fragmentHint=p)):l.partList&&(ae(g,p),g.cc=f,l.fragmentHint=g);var W=d.length,Q=d[0],q=d[W-1];if(0<(h+=l.skippedSegments*l.targetduration)&&W&&q){l.averagetargetduration=h/W;var Y=q.sn;l.endSN="initSegment"!==Y?Y:0,Q&&(l.staoid 0===n?void 0:n.path)?i:""));var t,i,n})&&(J.b.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(g=new Z.b(n,t)).relurl=q.relurl,g.level=i,g.sn="initSegment",l.initSegment=g,l.needSidxRanges=!0))}else l.endSN=0,l.startCC=0;return l.fragmentHint&&(h+=l.fragmentHint.ime=i.programDateTime-1e3*r.duration,i=r}}(d,m),l},u}();functier(function(e){retuTrack",in",e.AUDIO="audio",e.SUBTnull),this.hls=e,this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(k.a.MANIFEST_LOADING,this.onManifestLoading,this),e.on(k.a.LEVEL_LOADING,this.onLevelLoading,this),e.on(k.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(k.a.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)},t.unregisterListeners=function(){var e=this.hls;e.off(k.a.MANIFEST_LOADING,this.onManifestLoading,this),e.off(k.a.LEVEL_LOADING,this.onLevelLoading,this),e.off(k.a.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(k.a.SUBTITLE_TRACK_LOADING,this.onSubtitle;return e.loader=r,tr=function(e){return t){this.loaders[e]&&delete&t.destroyListeners(),this.destroyInternalLoaders()},t.onManifestLoading=function(e,t){var i=t.url;this.load({id:null,groupId:null,level:0,responseType:"text",type:g.MANIFEST,url:i,deliveryDirectives:null})},t.onLevelLoading=function(e,t){var i=t.id,n=t.level,r=t.url,a=t.deliveryDirectives;this.load({id:i,groupId:null,level:n,responseType:"text",type:g.LEVEL,url:r,deliveryDirectives:a})},t.onAudioTrackLoading=function(e,t){var i=t.id,n=t.groupId,r=t.url,a=t.deliveryDirectives;this.load({id:i,groupId:n,level:null,responseType:"text",type:g.AUDIO_TRACK,url:r,deliveBTITLE_TRACK,url:r,deliveryDirectives:a})},t.load=function(e){var t,i,n,r,a,o,s=this.hls.config,l=this.getInternalLoader(e);if(l){var d=l.context;if(d&&d.url===e.url)return void J.b.trace("[playlist-loader]: playlist request ongoing");J.b.log("[playlist-loader]: aborting previous loader for type: "+e.type),l.abort()}switch(e.type){case g.MANIFEST:i=s.manifestLoadingMaxRetry,n=s.manifestLoadingTimeOut,r=s.manifestLoadingRetryDelay,a=s.manifestLoadingMaxRetryTimeout;break;case g.LEVEL:case g.AUDIO_TRACK:case g.SUBTITLE_TRACK:i=0,n=s.levelLoadingTimeOut;break;default:i=s.levelLoadingMaxRetry,n=s.levelLoadingTimeOut,r=s.levelLoadingRetryDelay,a=s.levelLoadingMaxRetryTimeout}if(l=this.createInternalLoader(e),null!==(t=e.deliveryDirectives)&&void 0!==t&&t.part&&(e.type===g.LEVEL&&null!==e.level?o=this.hls.levels[e.level].details:e.type===g.AUDIO_TRACK&&null!==e.id?o=this.hls.audioTracks[e.id].details:e.type===g.SUBTITLE_TRACK&&null!==e.id&&(o=this.hls.subtitleTracks[e.id].details),o)){var u=o.partTarget,c=o.targetduration;u&&c&&(n=Math.min(1e3*Math.max(3*u,.8*c),n))}var h={timeout:n,maxRetry:i,retryDelay:r,maxRetryDelay:a,highWaterMark:0},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeouParsingErrori=null),this.h&(i=null),this.handleNeError(e,i,"no level found in manifest",n)},t.handleTrackOrLevelPlaylist=function(e,t,i,n){var r=this.hls,a=i.id,o=i.level,s=i.type,l=w(e,i),d:return v.SUBTITLE;default:return v.MAIN}}(i),h=m.parseLevelPlaylist(e.data,l,u,c,d);if(h.fragments.length){if(s===g.MANIFEST){var f={attrs:new te({}),bitrate:0,details:h,name:"",url:l};r.trigger(k.a.MANIFEST_LOADED,{levels:[f],audioTracks:[],url:l,stats:t,networkDetails:n,sessionData:null})}if(t.parsing.end=performance.now(),h.needSidxRanges){var p=h.initSegment.url;this.load({url:p,isSidxRequest:!0,type:s,level:o,levelDetails:h,id:a,groupId:null,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer",deliveryDirectives:null})}else i.levelDetails=h,this.handlePlaylistLoaded(e,t,i,n)}else r.trigger(k.a.ERROR,{type:b.b.NETWORK_ERROR,details:b.a.LEVEL_EMPTY_ERROR,fatal:!1,url:l,reason:"no fragments found in level",level:"number"==typeof i.ltByteRange(String(i.moovEndOfi,response:e,context:t,networkDetails:n})},t.handleNetworkError=function(e,t,i,n){void 0===i&&(i=!1),J.b.warn("[playlist-loader]: A network "+(i?"timeout":"error")+" occurred while loading "+e.type+" level: "+e.level+" id: "+e.id+' group-id: "'+e.groupId+'"');var r=b.a.UNKNOWN,a=!1,o=this.getInternalLoader(e);switch(e.type){case g.MANIFEST:r=i?b.a.MANIFEST_LOAD_TIMEOUT:b.a.MANIFEST_LOAD_ERROR,a=!0;break;case g.LEVEL:r=i?b.a.LEVEL_LOAD_TIMEOUT:b.a.LEVEL_LOAD_ERROR,a=!1;break;case g.AUDIO_TRACK:r=i?b.a.AUDIO_TRACK_LOAD_TIMEOUT:b.a.AUDIO_TRACK_LOAD_ERROR,a=!1;break;case g.SUBTITLE_TRACK:r=i?b.a.SUBTITLE_TRACK_LOAD_TIMEOUT:b.a.SUBTITLE_LOAD_ERROR,a=!1}o&&this.resetInternalLoader(e.type);var s={type:b.b.NETWORK_ERROR,details:r,fatal:a,url:e.url,loader:o,context:e,networkDetails:t};n&&(s.response=n),this.hls.trigger(k.a.ERROR,s)},t.handlePlaylistLoaded=function(e,t,i,n){var r=i.type,a=i.level,o=i.id,s=i.groupId,l=i.loader,d=i.levelDetails,u=i.deliveryDirectives;if(null!=d&&d.targetduration){if(l)switch(d.live&&(l.getCacheAge&&(d.ageHeader=l.getCacheAge()||0),l.getCacheAge&&!isNaN(d.ageHeader)||(d.ageHeader=0)),r){case g.MANIFEST:case g.LEVEL:this.hls.trigger(k.a.LEVEL_LOADED,{details:d,level:a||0,id:o||0,stats:t,networkDetails:n,deliveryDirectives:u});break;case g.AUDIO_TRACK:this.hls.trigger(k.a.AUDIO_TRACK_LOADED,{details:d,id:o||0,groupId:s||"",stats:t,networkDetails:n,deliveryDirectives:u});break;case g.SUBTITLE_TRACK:this.hls.trigger(k.a.SUBTITLE_TRACK_LOADED,{details:d,id:o||0,groupId:s||"",stats:t,networkDetails:n,deliveryDirectives:u})}}else this.handleManifestParsingErrob.rack",!1,!1)}i.track=e,null,this.hls=e,this._registerListoy=function(){this._unregisterListeners()},t._registerListeners=function(){var e=this.hls;e.on(k.a.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(k.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(k.a.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(k.a.BUFFER_FLUSHING,this.onBuFFER_FLUSHING,thisAttached=function(e,t){this.media=t.media},t.onMediaDetaching=function(){this.id3Track&&(function(e){var t=e.mode;if("disabled"===t&&(e.mode="hidden"),e.cues){for(var i=e.cues.length;i--;)e.removeCue(e.cues[i]);"disabled"===t&&(e.mode=t)}}(this.id3Track),this.id3his.media.addTextTrack("");c.value=u,this.id3Track.addCue(c)}}}}}},t.onBufferFlushing=function(e,t){var i=t.startOffset,n=t.endOffset,r=t.type;if(!r||"audio"===r){var a=this.id3Track;a&&function(e,t,i){var n=e.mode;if("disabled"===n&&(e.mode="hidden"),e.cues&&e.cues.leurn e[n].startTime-t<t-e[r].startTime?n:r}(e,t);if(-1<r)for(var a=r,o=e.length;a<o;a++){var s=e[a];if(s.startTime>=t&&s.endTime<=i)n.push(s);else if(s.startTime>i)return n}return n}(e.cues,t,i),a=0;a<r.length;a++)e.removeCue(r[a]);ble=!0),Object.def.config=e.config,this.registerListnull,this.hls=this.t,this.hls.on(k.a.ERRORted),this.hls.off(ener("timeupdate",t,this.timeupdateHandnull,this._latency=null,this.stallCount=0},t.onLevelUpdated=function(e,t){var i=t.details;(this.levelDetails=i).advanced&&this.timeupdate(),!i.live&&this.media&&this.media.removeEventListener("timeall detected, adjusting target latency"))},t.timeupdate=function(){var e=this.media,t=this.levelDetails;if(e&&t){this.currentTime=e.currentTime;var i=this.computeLatency();if(null!==i){this._latency=i;var n=this.config,r=n.lowLatencyMode,a=n.maxLiveSyncPlaybackRate;if(r&&1!==a){var o=this.targetLatency;if(null!==o){var s=i-o,l=s<Math.min(this.maxLatency,o+t.targetduration);if(t.live&&l&&.05<s&&1<this.forwardBufferLength){var d=Math.min(2,Math.max(1,a)),u=Math.round(2/(1+Math.exp(-.75*s-this.edgeStalled))*20)/20;e.playbackRate=Math.min(d,Math.max(1,u))}else 1!==e.playbackRate&&0!==e.playbackRate&&Details;return nu);return null===e?null:e-this.curry",get:function(){returaxLatencyDurationCount*t.t=n;return d+Math.min(1*this.suration);return Mais.levelDetails;return nargetduration);return Math.max(ebuffered.end(i-1):t.edge-this.currentTime}}]),e}();function C(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}!function(e){e.Net("_HLS_skip",urn e}).join(",").replace(/\.[^.,]+/g,"")}rn Math.max(this.nction(){return this.url[this._urlId]||""}},{key:"url!==t&&(te.groupId||"";e.id=i[t]=i[t]||0,i[t]++})}function R(e,t){var i=t.startPTS;if(Object(X.a)(i)){var n,r=0;(n=t.sn>e.sn?(r=i-e.start,e):(r=e.start-i,t)).duration!==r&&(n.duration=r)}else t.sn>e.sn?e.cc===t.cc&&e.minEndPTS?t.start=e.start+(e.minEndPTS-e.start):t.start=e.start+e.duration:t.start=Math.max(e.start-t.duration,0)}function D(e,t,i,n,r,a){n-i<=0&&(J.b.warn("Fragment should have a positive duration",t),n=i+t.duration,a=r+t.duration);var o=i,s=n,l=t.startPTS,d=t.endPTS;if(Object(X.a)(l)){var u=Math.abs(l-i);Object(X.a)(t.deltaPTS)?t.deltaPTS=Math.max(u,t.deltaPTS):t.deltaPTS=u,o=Math.max(i,l),i=Math.min(i,l),r=Math.min(r,t.startDTS),s=Math.min(n,d),n=Math.max(n,d),a=Math.max(a,t.endDTS)}t.duration=n-i;var c=i-t.start;t.appendedPTS=n,t.start=t.startPTS=i,t.maxStartPTS=o,t.startDTS=r,t.endPTS=n,t.minEndPTS=s,t.endDTS=a;var h,f=t.sn;if(!e||f<e.startSN||f>e.endSN)return 0;var p=f-e.startSN,g=e.fragments;for(g[p]=t,h=p;0<h;h--)R(g[h],g[h-1]);for(h=p;h<g.length-1;h++)R(g[h],g[h+1]);return e.fragmentHint&&R(g[g.length-1],e.fragfragmentHint&&(t.warn=J.b.warn.bind(J.b,t+":"),thirTimer(),tpe===b.b.NETW(){clearTime=!0,this.rection(){this.can new x(o,Object(X.a)(s)?s:void 0,u.No)}}},t.lo&e&&!!e.url&&(!e.details||e.details.live)},t.playlistLoaded=function(e,t,i){var n=this,r=t.details,a=t.stats,o=a.loading.end?Math.max(0,self.performance.now()-a.loading.end):0;if(r.advancedDateTime=Date.now()-o,r.live||null!=i&&i.live){if(r.reloaded(i),i&&this.log("live playlist "+e+" "+(r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:"MISSED")),i&&0<r.fragments.length&&function(e,f){f.initSegment&&e.initSegment&&(f.initSegment=e.initSegment),e.fragmentHint&&delete e.fragmentHint.endPTS;var p,g=0;if(function(e,t){for(var i=t.skippedSegments,n=Math.max(e.startSN,t.startSN)-t.startSN,r=(e.fragmentHint?1:0)+(i?t.endSN:Math.min(e.endSN,t.endSN))-t.startSN,a=t.startSN-e.startSN,o=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments,s=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=n;l<=r;l++){var d=s[a+l],u=o[l];i&&!u&&l<i&&(u=t.fragments[l]=d),d&&u&&(h=u,(c=d).relurl&&(g=c.cc-h.cc),Object(X.a)(c.startPTS)&&Object(X.a)(c.endPTS)&&(h.start=h.startPTS=c.startPTS,h.startDTS=c.startDTS,h.appendedPTS=c.appendedPTS,h.maxStartPTS=c.maxStartPTS,h.endPTS=c.endPTS,h.endDTS=c.endDTS,h.minEndPTS=c.minEndPTS,h.duration=c.endPTS-c.startPTS,h.duration&&(p=h),f.PTSKnown=f.alignedSliding=!0),h.elementaryStreams=c.elementaryStreams,h.loader=c.loader,h.stats=c.stats,h.urlId=c.urlId)}var c,h}(e,f),f.skippedSegments&&(f.deltaUpdateFailed=f.fragments.some(function(e){return!e}),f.deltaUpdateFailed)){J.b.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(var t=f.skippedSegments;t--;)f.fragments.shift();f.startSN=f.fragments[0].sn,f.startCC=f.fragments[0].cc}var i=f.fragments;if(g){J.b.warn("discontinuity sliding from playlist, take drift into account");for(var n=0;n<i.length;n++)i[n].cc+=g}f.skippedSegments&&(f.initSegment||(f.initSegment=e.initSegment),f.startCC=f.fragments[0].cc),function(e,t){if(e&&t)for(var i=0,n=0,r=e.length;n<=r;n++){var a=e[n],o=t[n+i];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?(s=a,(l=o).elementaryStreams=s.elementaryStreams,l.stats=s.stats):i--}var s,l}(e.partList,f.partList),p?D(f,p,p.startPTS,p.endPTS,p.startDTS,p.endDTS):M(e,f),i.length&&(f.totalduration=f.edge-i[0].start),f.driftStartTime=e.driftStartTime,f.driftStart=e.driftStart;var r=f.advancedDateTime;if(f.advanced&&r){var a=f.edge;f.driftStart||(f.driftStartTime=r,f.driftStart=a),f.driftEndTime=r,f.driftEnd=a}else f.driftEndTime=e.driftEndTime,f.driftEnd=e.driftEnd,f.advancedDateTime=e.advancedDateTime}(i,r),!this.canLoad||!r.live)return;var s,l=void 0,d=void 0;if(r.canBlockReload&&r.endSN&&r.advanced){var u=this.hls.config.lowLatencyMode,c=r.lastPartSn,h=r.endSN,f=r.lastPartIndex,p=c===h;-1!==f?(l=p?h+1:c,d=p?u?0:f:f+1):l=h+1;var g=r.age,m=g+r.ageHeader,v=Math.min(m-r.partTarget,1.5*r.targetduration);if(0<v){if(i&&v>i.tuneInGoal)this.warn("CDN Tune-in goal increased from: "+i.tuneInGoal+" to: "+v+" with playlist age: "+r.age),v=0;else{var y=Math.floor(v/r.targetduration);l+=y,void 0!==d&&(d+=Math.round(v%r.targetduration/r.partTarget)),this.log("CDN Tune-in age: "+r.ageHeader+"s last advanced "+g.toFixed(2)+"s goal: "+v+" skip sn "+y+" to part "+d)}r.tuneInGoal=v}if(s=this.getDeliveryDirectives(r,t.deliveryDirectives,l,d),u||!p)return void this.loadPlaylist(s)}else s=this.getDeliveryDirectives(r,t.deliveryDirectives,l,d);var b=function(e,t){var i,n=1e3*e.levelTargetDuration,r=n/2,a=e.age,o=0<a&&a<3*n,s=t.loading.end-t.loading.start,l=e.availabilityDelay;if(!1===e.updated)if(o){var d=333*e.misses;i=Math.max(Math.min(r,2*s),d),e.availabilityDelay=(e.availabilityDelay||0)+i}else i=r;else i=o?(l=Math.min(l||n/2,a),(e.availabilityDelay=l)+n-a):n-s;return Math.round(i)}(r,a);void 0!==l&&r.canBlockReload&&(b-=r.partTarget||1),this.log("reload live playlist "+e+" in "+Math.round(b)+" ms"),this.timer=self.setTimeout(function(){return n.loadPlaylist(s)},b)}else d&&(i=t.msn,n=t.part,r=u.No),new x(i,n,r)},t.retryLoadingOrFail=function(e){var t,i=this,n=this.hls.config,r=this.retryCount<n.levelLoadingMaxRetry;if(r)if(this.retryCount++,-1<e.details.indexOf("LoadTimeOut")&&null!==(t=e.context)&&void 0!==t&&t.deliveryDirectives)this.warn("retry playlist loading #"+this.retryCount+' after "'+e.details+'"'),this.loadPlaylist();else{var a=Math.min(Math.pow(2,this.retryCount)*n.levelLoadingRetryDelay,n.levelLoadingMaxRetryTimeout);this.timer=self.setTimeout(function(){return i.loadPlaylist()},a),this.warn("retry playlist loading #"+this.retryCount+" in "+a+' ms after "'+e.details+'"')}else this.warn('cannot recover from error "'+e.details+'"'),this.clearTimer(),e.fatal=!0;return r},e}();function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function N(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U,V=/chrome|firefox/.test(navigator.userdComplete=void 0,t._registerListeners(),t}t=l,(e=i).prototype=Object.create(t.prototype),_(e.prototype.constructor=e,t);var n=i.prototype;return n._registerListeners=function(){var e=this.hls;e.on(k.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(k.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(k.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(k.a.FRAG_LOADED,this.onFragLoaded,this),e.on(k.a.ERROR,this.onError,this)},n._unregisterListeners=function(){var e=this.hls;e.off(k.a.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(k.a.LEVEL_LOADED,this.onLevelLoaded,this),e.off(k.a.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(k.a.FRAG_LOADED,this.onFragLoaded,this),e.os.length=0,lrror=0}),l.prototype.startLoad.call(this)},n.onManifestLoaded=function(e,t){var i,n,r=[],a=[],o=[],s={},l=!1,d=!1,u=!1;if(t.levels.forEach(function(e){var t=e.attrs;l=l||!(!e.width||!e.height),d=d||!!e.videoCodec,u=u||!!e.audioCodec,V&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(n=s[e.bitrate])?n.url.push(e.url):(n=new I(e),s[e.bitrate]=n,r.push(n)),t&&(t.AUDIO&&P(n,"audio",t.AUDIO),t.SUBTITLES&&P(n,"tei=e.width,n=eurn(!t||p(t,"audio"))&&(!i||p(i,"video"))urn!e.audioCodec||p(e.audioCodec,"audio")})),t.subtitles&&O(o=t.subtitles),0<r.length){i=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var c=0;c<r.length;c++)if(r[c].bitrate===i){this._firstLevel=c,this.log("manifest loaded, "+r.length+" level(s) found, first bitrate: "+i);break}var h=u&&!d,f={levels:r,audioTracks:a,subtitleTracks:o,firstLevel:this._firstLevel,stats:tudio:!h&&a.some(function(e){return!!e.url})};this.hls.trigger(k.a.MANIFEST_PARSED,f),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else this.hls.trigger(k.a.ERROR,{type:b.b.MEDIA_ERROR,details:b.a.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,reason:"no level with compatible codecs found in manifest"})},n.onError=function(e,t){if(l.prototype.onError.call(this,e,t),!t.fatal){var i=t.context,n=this._levels[this.currentLevelIndex];if(i&&(i.type===g.AUDIO_TRACK&&n.audioGroupIds&&i.groupId===n.audioGroupIds[n.urlId]||i.type===g.SUBTITLE_TRACK&&n.textGroupIds&&i.groupId===n.textGroupIds[n.urlId]))this.redundantFailover(this.currentLevelIndex);else{var r,a=!1,o=!0;switch(t.details){case b.a.FRAG_LOAD_ERROR:case b.a.FRAG_LOAD_TIMEOUT:case b.a.KEY_LOAD_ERROR:case b.a.KEY_LOAD_TIMEOUT:if(t.frag){var s=this._levels[t.frag.level];s?(s.fragmentError++,s.fragmentError>this.hls.config.fragLoadingMaxRetry&&(r=t.frag.level)):r=t.frag.level}break;case b.a.LEVEL_LOAD_ERROR:case b.a.LEVEL_LOAD_TIMEOUT:i&&(i.deliveryDirectives&&(o=!1),r=i.level),a=!0;break;case b.a.REMUX_ALLOC_ERROR:r=t.level,a=!0}void 0!==r&&this.recoverLevel(t,r,a,o)}}},n.recoverLevel=function(e,t,i,n){var r=e.details,a=this._levels[t];if(a.loadError++,i){if(!this.retryLoadingOrFail(e))return void(this.currentLevelIndex=-1);e.levelRetry=!0}if(n){var o=a.url.length;if(1<o&&a.loadError<o)e.levelRetry=!0,this.redundantFailover(t);else if(-1===this.manualLevelIndex){var s=0===t?this._levels.length-1:t-1;this.currentLevelIndex!==s&&0===this._levels[s].loadError&&(this.warn(r+": switch to "+s),e.levelRetry=!0,this.hls.nextAutoLevel=s)}}},n.redundantFailover=function(e){var t=this._levels[e],i=t.url.length;if(1<i){var n=(t.urlId+1)%i;this.warn("Switching to redundant URL-id "+n),this._levels.forEach(function(e){e.urlId=n}),this.level=e}},n.onFragLoaded=function(e,t){var i=t.frag;if(void 0!==i&&i.type===v.MAIN){var n=this._levels[i.level];void 0!==n&&(n.fragmed 0!==i&&i.skip&&(a.del!==i.urlId&&(i.evel:t,id:n,deliveryDirectives:e||ion(i,n){var r=functios=e.tagments.forEach(function(e){e.level=t}),e});this._levels=e,this.hls.trigger(k.a.LEVELS_UPDATED,{le0===this._levels.length?null:this._levels}},{key:"level",get:fun?void 0:a.details);this.loadPlaylist(d)}}}},{key:"manualLevel",get:fuhis._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){evel;return void 0!==e?e:this._firstLevel},set:function(e){this.maualLevelIndex&&(this.hls.nextAutoLevel=e)}}]),i}(B);!function(e){e.NOT_LOADED="NOT_LOADED",e.BACKTRACKED="BACKTRACKED",e.APPENDING="APPENDING",e.PARTIAL="PARid 0,this.hls=e,this._registerListeners()}var t=e.prototype;return t._registerListeners=function(){var e=this.hls;e.on(k.a.BUFFER_APPENDED,this.onBufferAppended,this),e.on(k.a.FRAG_BUFFERED,this.onFragBuffered,this),e.on(k.a.FRAG_LOADED,this.f(k.a.FRAGers(),this.fragments=this.timeRanges=null},t.getAppendedFrag=function(e,t){if(t===v.MAIN){var i=this.activeFragment,n=this.activeParts;if(!i)return null;if(n)for(var r=n.length;r--;){var a=n[r],o=a?a.end:i.appendedPTS;if(a.start<=e&&void 0!==o&&e<=o)return 9<r&&(this.activeParts=n.slice(r-9)),a}else if(i.start<=e&&void 0!==i.appendedPTS&&e<=i.appendedPTS)return i}return th.start<=e&&e<=o.end)returbody.type===a&&o.removeFrbuffered=!0:this.removeFragment(l.body))}},t.getBufferedTimes=function(e,t,i,n){for(var r={time:[],partial:i},a=t?t.start:e.start,o=t?t.end:e.end,s=e.minEndPTS||o,l=e.maxStartPTS||a,d=0;d<n.length;d++){var u=n.start(d)-this.bufferPadding,c=n.end(d)+this.bufferPadding;if(u<=l&&s<=c){r.time.push({startPTS:Math.max(a,n.start(d)),endPTS:Math.min(o,n.end(d))});break}if(a<c&&u<o)r.partial=!0,r.time.push({startPTS:Math.max(a,n.start(d)),endPTS:Math.min(o,n.end(d))});else if(o<=u)break}return r},t.getPartialFragment=function(i){var n,r,a,o=null,s=0,l=this.bufferPadding,d=this.fragments;return Object.keys(d).forEach(function(e){var t=d[e];t&&G(t)&&(r=t.body.start-l,a=t.body.end+l,r<=i&&i<=a&&(n=Math.min(i-r,ack?U.BACKTRAktrack=t||n.loaded;turn r;this.remov&&t<=r)return!0l,buffered:!1,range:Object.create(null)}}},t.onBufferAppended=function(e,t){var n=this,r=t.frag,a=t.part,o=t.timeRanges;if(r.type===v.MAIN)if(this.activeFragment=r,a){var i=this.activeParts;i||(this.activeParts=i=[]),i.push(a)}else this.activeParts=nuledPTS=Math.max(t.enction(e,t){thin(e){var t=z(e);rtaryStreamInfo(),deleactiv e.tis._boundTick,0)},t.doTick=function(){},e}(),Q={length:0,start:function(){return 0},end:function(){return 0}},q=fu&&t<=i.end(n)urn{len:0,start:t,end:t,nextStart:voidr i=e.start-t.start;return i||t.end-e.end});var n=[];if(i)for(var r=0;r<e.length;r++){var a=n.length;if(a){var o=n[a-1].end;e[r].start-o<i?e[r].end>o&&(n[a-1].end=e[r].end):n.push(e[r])}else n.push(e[r])}else n=e;for(var s,l=0,d=t,u=t,c=0;c<n.length;c++){var h=n[c].start,f=n[c].end;if(h<=t+i&&t<f)d=h,l=(u=f)-t;else if(t+i<h){s=h;break}}return{len:l,start.log("fils||i.skipplduration-n<=e?1:i.start-n>e&&i.start?-1:0}function ce(e){var n="function"==typeof Map?new Map:void 0;return(ce=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,i)}function i(){return he(e,arguments,pe(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),fe(i,e)})(e)}function he(e,t,i){return(he=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&fe(r,i.prototype),r}).apply(null,arguments)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrTi(X.a)(totype),fe(e.prototype.constructod(3)+","+e.end(n).toFixed(3)+"]";return t}};function Ee(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ae="STOPPED",Te="IDLE",Le="KEY_LOADING",Ce="FRAG_LOADING",ke="FRAG_LOADING_WAITING_RETRY",xe="PARSING",Ie="PARSED",Pe="BACKTRACKING",Oe="ENDED",Re="ERROR"er() hasn't been called");return e}(n)),n}t=r,(e=i).prototype=Object.create(t.prototype),Se(e.prototype.constructor=e,t);var n=i.prototype;return n.doTick=function(){this.onTickEnd()},n.onTickEnd=functiorval(),this.clearNextTick(),this.state=Ae},n._streamEnded=function(e,t){var i=this.fragCurrent,n=this.fragmentTracker;if(t.live||!i||i.sn!==t.endSN||e.nextStart)return!1;var r=n.getState(i);return ate===Ae&&this.starcker.removeAllFrahis.startPositithis.startPosithis.loadFragment(t.fr.prototype.onHandlerDr.prototyphis.hls.triggern(e,t,i){this._loadFragForPlayback(e,t,i)},n._loadFragForPlayback=functiokCount++,n._handleFragmentLoadProgress(e)}).then(function(e){if(e){n.fragLoadError=0;var t=n.state;if(!n.fragContextChanged(i))return"payload"in e&&(n.log("Loaded fragment "+i.sn+" of level "+i.level),n.hls.trigger(k.a.FRAG_LOADED,e),n.state===Pe)?(n.fragmentTracker.backtrack(i,e),void n.resetFragmentLoading(i)):void n._handleFragmentLoadComplete(e);t!==Ce&&t!==Pe&&(n.fragCurrent||t!==xe)||(n.fragmentTracker.removeFragment(i),n.state=Te)}}).catch(function(e){n.warn(e),n.re,this.hls.trigger(k.a.BUFFER_FLUSHING,n)}},n._loadInitSegment=functw new :r,tdecrypt:t}}),i.payload=e,i})}return i}).then(function(e){var t=s.fragCurrent,i=s.hls,n=s.levels;if(!n)throw new Error("init load aborted, missing levels");var r=n[o.level].details.initSegment,a=o.stats;s.state=Te,s.fragLoadError=0,r.data=new Uint8Array(e.payload),a.parsing.start=a.buffering.start=self.performance.now(),a.parsing.end=a.buffering.end=self.performance.now(),e.frag===t&&i.trigger(k.a.FRAG_BUFFERED,{stats:a,fraon(e){s.warn(e),s.reset==t.level||e.sn!==t.sn|etBuffered(i))),this.state=Te,unkCount+1,0,n?n.index:-1,!a);._handleFragmentLoadProgress=function(e){},n._doFragLoad=function(e,t,i,n){var r=this;if(void 0===i&&(i=null),!this.levels)throw new Error("frag load aborted, missing levels");if(i=Math.max(e.start,i||0),this.config.lowLatencyMode&&t){var a=t.partList;if(a&&n){i>e.end&&t.fragmentHint&&(e=t.fragmentHint);var o=this.getNextPart(a,e,i);if(-1<o){var s=a[o];return this.log("Loading part sn: "+e.sn+" p: "+s.index+" cc: "+e.cc+" of playlist ["+t.startSN+"-"+t.endSN+"] parts [0-"+o+"-"+(a.length-1)+"] "+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(i.toFixed(3))),this.nextLoadPosition=s.start+s.duration,this.state=Ce,this.hls.trigger(k.a.FRAG_LOADING,{frag:e,part:a[o],targetBufferTime:i}),this.doFragPartsLoad(e,a,o,n).catch(function(e){return r.handleFragLoadError(e)})}if(!e.url||this.loadedEndOfParts(a,i))return Promise.resolve(null)}}return this.log("Loading fragment "+e.sn+" cc: "+e.cc+" "+(t?"of ["+t.startSN+"-"+t.endSN+"] ":"")+("[stream-controller]"===this.logPrefix?"level":"track")+": "+e.level+", target: "+parseFloat(i.toFixed(3))),Object(X.a)(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=Ce,this.hls.trigger(k.a.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragmentLoader.load(e,n).catch(function(e){return r.handleFragLoadError(e)})},n.doFragPartsLoad=function(l,d,t,i){var u=this;return new Promise(function(o,e){var s=[];!function n(r){var a=d[r];u.fragmentLoader.loadPart(l,a,i).then(function(e){var t=(s[a.index]=e).part;u.hls.trigger(k.a.FRAG_LOADED,e);var i=d[r+1];if(!i||i.fragment!==l)return o({frag:l,part:t,partsLoaded:s});n(r+.part):this.hls.trigger(kl)}else this.fragCurrent||(this.state=Te)},n.getCurrentContext=function(e){var t=this.levels,i=e.level,n=e.sn,r=e.part;if(!t||!t[i])return this.warn("Levels object was unset while buffering fragment "+n+" of level "+i+". The current chunk willi&&a.fragment.sn===t)return a}return null}(a,n,r):null,s=o?o.fragment:function(e,t){if(!e||!e.details)return null;var i=e.details,n=i.fragments[t-i.startSN];return n||((n=i.fragmentHint)&&n.sn===t?n:null)}(a,n);return s?{frag:s,independent&&!i&&art)}else this.flushMainlength to "+t.maxMaxBufferLength+"s"),!0)},n.getNextFragment=function(e,t){var i=t.fragments,n=i.length;if(!n)return null;var r,a=this.config,o=i[0].start;if(!t.initSegment||t.initSegment.data||this.bitrateTest)if(t.live){var s=a.initialLiveManifestSize;if(n<s)return this.warn("Not enough fragments to start playback (have: "+n+", need: "+s+")"),null;t.PTSKnown||this.startFragRequested||-1!==this.startPosition||(r=this.getInitialLiveFragment(t,i),this.startPosition=r?this.hls.liveSyncPosition||r.start:e)}else e<=o&&(r=i[0]);else r=t.initSegment;if(!r){var l=a.lowLatencyMode?t.partEnd:t.fragmentEnd;r=this.getFragmentAtPosition(e,l,t)}return r},n.getNextPart=function(e,t,i){for(var n=-1,r=!1,a=!0,o=0,s=e.length;o<s;o++){var l=e[o];if(a=a&&!l.independent,-1<n&&i<l.start)break;var d=l.loaded;!d&&(r||l.independent||a)&&l.fragment==e.length-1];return i&&t>i.start&&i.loaded},n.getInitialLiveFragment=function(e,t){var i=this.fragPrevious,n=null;if(i){if(e.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+i.programDateTime),n=function(e,t,i){if(null===t||!Array.isArray(e)||!e.length||!Object(X.a)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;i=i||0;for(var n=0;n<e.length;++n){var r=e[n];if(a=t,o=i,s=r,l=1e3*Math.min(o,s.duration+(s.deltaPTS?s.deltaPTS:0)),(s.endProgramDateTime||0)-l>a)return r}var a,o,s,l;return null}(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!n){var r=i.sn+1;if(r>=e.startSN&&r<=e.endSN){var a=t[r-e.startSN];i.cc===a.cc&&(n=a,this.log("Live playlist, switching playlifunction(e){return e.cc<t?1:e.cc>t?-1:0})}(t,i.cc))&&this.log("Live playlist, switching playlist, load frag with same CC: "+n.sn)}}else{var o=this.hls.liveSyncPosition;null!==o&&(n=this.getFragmentAtPosition(o,this.bitrateTest?e.fragmentEnd:e.edge,e))}return n},n.getFragmentAtPosition=function(e,t,i){var n,r=this.config,a=this.fragPrevious,o=i.fragments,s=i.endSN,l=i.fragmentHint,d=r.maxFragLookUpTolerance,u=!!(r.lowLatencyMode&&i.partList&&l);if(u&&l&&!thise.search(t,ue.bind(null,i,n));return a||r}(a,o,e,t-d<e?0:d):o[o.length-1]){var c=n.sn-i.startSN,h=a&&n.level===a.level,f=o[1+c];if(this.fragmentTracker.getState(n)===U.BACKTRACKED){n=null;for(var p=c;o[p]&&this.fragmentTracker.getState(o[p])===U.BACKTRACKED;)n=a?o[p--]:o[--p];n=n||f}else a&&n.sn===a.sn&&!u&&h&&(n=n.sn<s&&this.fragmentTracker.getState(f)!==U.OK?(this.log("SN "+n.sn+" just loaded, load next one: "+f.sn), to : "+n.toFixed(3)),i.currentTime=n))}}},n.alignPlaylists=function(e,t){var i=this.levels,n=this.levelLastLoaded,r=null!==n?i[n]:null,a=0;return t&&0<e.fragments.length?(a=e.fragments[0].start,e.alignedSliding&&Object(X.a)(a)?this.log("Live playlist sliding:"+a.toFixed(3)):a||(this.warn("["+this.constructor.name+"] Live playlist - outdated PTS, unknown sliding"),le(this.fragPrevious,r,e))):(this.log("Live playlist - first load, unknown sliding"),le(thil>Math.max(e.partHoldBack,3*e.partTarget)},n.setStartPosition=function(e,t){var i=this.startPosition;if(-1===this.startPosition||-1===this.lastCurrentTime){var n=e.startTimeOffset;Object(X.a)(n)?(n<0&&(this.log("Negative start time offset "+n+", count from end of last fragment"),n=t+e.totalduration+n),this.log("Start time offset found in playlist, adjust startPosition to "+n),this.startPosition=i=n):e.live?i=this.hls.liveSyncPosition||t:this.startPosition=i=0,this.lastCurrentTime=i}LoadPosition&&(t=this.nes aborted"),this.resetFis.fragContextChanged(e)||(this.state=Te)},n.onFragmentOrKeyLoadError=function(e,t){if(!t.fatal){var i=t.frag;if(i&&i.type===e){this.fragCurrent;var n=this.config;if(this.fragLoadError+1<=n.fragLoadingMaxRetry){if(this.resetLiveStartWhenNotLoaded(i.level))return;var r=Math.min(Math.pow(2,this.fragLoadError)*n.fragLoadingRetryDelay,n.fragLoadingMaxRetryTimeout);this.warn("Fragment "+i.sn+" of "+e+" "+i.level+" failed to load, retrying in "+r+"ms"),this.retryDate=self.performance.now()+r,this.fragLoadError++,this.state=ke}else t.levelRetry?(e===v.AUDIO&&(this.fragCurrent=null),this.fragLoadError=0,this.state=Te):(J.b.error(t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.hls.stopLoahis.state===Oe&&thisnull,this.fragPrevious=null,thtLoadPosition=this.sfrag:a,part:e})):transmuxer.destroy(),this.transmuxer=null)},Ee(i.prototype,[{key:"stat!==e&&(this._state=e,this.log(t+"->"+e))}}]),i}(W);function Be(){returelf.SourceBuffer||self.WebKitSourceBuffer}var Ne=i(16),e()||{isTypeSup.transmuxer=new _e.c(this.observeri.removeAllListeners(),this.observer=null},t.push=function(e,t,i,n,r,a,o,s,l,d){var u=this;l.transmuxing.start=self.performance.now();var c=this.transmuxer,h=this.worker,f=a?a.start:r.start,p=r.decryptdata,g=this.frag,m=!(g&&r.cc===g.cc),v=!(g&&l.level===g.level),y=g?l.sn-g.sn:-1,b=this.part?l.part-this.part.index:1,w=!v&&(1==y||0==y&&1==b),E=self.performance.now();(v||y||0===r.stats.parsing.start)&&(r.stats.parsing.start=E),!a||!b&&w||(a.stats.parsing.start=E);var S=new _e.b(m,w,s,v,f);if(!w||m){J.b.log("[transmuxer-interface, "+r.type+"]: Starting new transmux session for sn: "+l.sn+" p: "+l.part+" level: "+l.level+" id: "+l.id+"\n        discontinuity: "+m+"\n        trackSwitch: "+v+"\n        contiguous: "+w+"\n        accurateTimeOffset: "+s+"\n        timeOffset: "+f);var A=new _e.a(i,n,t,o,d);this.configureTransmuxer(A)}if(this.frag=r,this.part=a,h)h.postMessage({cmd:"demux",data:e,decryptdata:p,chunkMeta:l,state:S},e instanceof ArrayBuffer?[e]:[]);else if(c){var T=c.push(e,p,l,S);Object(_e.d)(T)?T.then(function(e){u.handleTransmuxComplete(e)}esult(e,t)}):this.handleTransmuxCompleata.id=this.id,i.trigg:"configure",config:e}):iformance.now(),thismedia=t,this.fragmentTracker=i,thi.hls=this.fragmentTracker=this.media=null},t.poll=function(e){var t=this.config,i=this.media,n=this.stalled,r=i.currentTime,a=i.seeking,o=this.seeking&&!a,s=!this.seeking&&a;if(this.seeking=a,r===e){if((s||o)&&(this.stalled=null),!i.paused&&!i.ended&&0!==i.playbackRate&&q.getBuffered(i).length){var l=q.bufferInfo(i,r,0),d=0<l.len,u=l.nextStart||0;if(d||u){if(a){var c=2<l.len,h=!u||2<u-r&&!this.fragmentTracker.getPartialFragment(r);if(c||h)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var f,p=Math.max(u,l.start||0)-r,g=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,m=(null==g||null===(f=g.details)||void 0===f?void 0:f.live)?2*g.details.targetduration:2;if(0<p&&p<=m)return void this._trySkipBufferHole(null)}var v=self.performance.now();if(null!==n){var y=v-n;!a&&250<=y&&this._reportStall(l.len);var b=q.bufferInfo(i,r,t.maxBufferHole);this._tryFixBufferStall(b,y)}else this.stalled=v}}}else if(this.moved=!0,null!==n){if(this.stallReported){var w=self.performance.now()-n;J.b.warn("playback not stuck anymore @"+r+", after "+Math.round(w)+"ms"),this.stallReported=!1}this.stalled=nulthis.stalled=nuBUFFER_STALLED_ERROR,r+" to "+d,frag:e}tails:b.a.BUFFER_STALLED_ERROR,fatal:!0})},e}();function Ge(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__provideoBuffer=null,i._registerListeners(),i}t=o,(e=i).prototype=Object.create(t.prototype),ze(e.prototype.constructor=e,t);vara.FRAG_BUFFERED,this.ona.FRAG_BUFFERED,this.onFragBuffered,this)},n.onHandlerDestroying=function(){this._unregisterListeners(),this.onMediaDetaching()},n.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,i=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=i.startLevel;-1===n&&(i.config.testBandwidth?(n=0,this.bitrateTest=!0):n=i.nextAutoLevel),this.level=i.nextLoadLevel=n,this.loadedmetadata=!1}0<t&&-1===e&&(this.log("Override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=Te,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._frtLoad=!1,o.prototype.stopLoad.call(this)},n.doTick=function(){switch(this.state){case Te:this.doTickIdle();break;case De:var e,t=this.levels,i=this.level,n=null==t||null===(e=t[i])||void 0===e?void 0:e.details;if(!n||n.live&&this.levelLastLoaded!==this.level)break;if(this.waitForCdnTuneIn(n))break;this.state=Te;break;case ke:var r,a=self.performance.now(),o=this.retryDate;(!o||o<=a||null!==(r=this.media)&&void 0!==r&&r.seeking)&&(this.log("retryDate reached, switch back to IDLE state"),thcheckBuffer(),this.checkFragmentChanged()},n.doTickIdle=function(){var e,t,i=this.hls,n=this.levelLastLoaded,r=this.levels,a=this.media,o=i.config,s=i.nextLoadLevel;if(null!==n&&(a||!this.startFragRequested&&o.startFragPrefetch)&&(!this.altAudio||!this.audioOnly)&&r&&r[s]){var l=r[s];this.level=i.nextLoadLevel=s;var d=l.details;if(!d||this.state===De||d.live&&this.levelLastLoaded!==s)this.state=De;else{var u=this.getLoadPosition();if(Object(X.a)(u)){var c=d.initSegment,h=0;if(!c||c.data||this.bitrateTest){var f,p=l.maxBitrate;f=p?Math.max(8*o.maxBufferSize/p,o.maxBufferLength):o.maxBufferLength,f=Math.min(f,o.maxMaxBufferLength);var g=u<o.maxBufferHole?Math.max(2,o.maxBufferHole):o.maxBufferHole,m=q.bufferInfo(this.mediaBuffer?this.mediaBuffer:a,u,g);if(m.len>=f)return;if(this._streamEnded(m,d)){var v={};return this.altAudio&&(v.type="video"),this.hls.trigger(k.a.BUFFER_EOS,v),void(this.state=Oe)}if(h=m.end,c=this.getNextFragment(h,d),this.couldBacktrack&&!this.fragPrevious&&c&&"initSegment"!==c.sn){var y=c.sn-d.startSN;1<y&&(c=d.fragments[y-1],this.fragmentTracker.removeFragment(c))}if(c&&this.fragmentTracker.getState(c)===U.OK&&this.nextLoadPosition>h&&(c=this.getNextFragment(this.nextLoadPosition,d)),!c)return}"identity"!==(null===(e=c.decryptdata)||void 0===e?void 0:e.keyFormat)||null!==(t=c.decryptdata)&&void 0!==t&&t.key?this.loadFragment(cthis.fragmentTrackIN);return t&&"frafragmentTracker.getBuffeurn e?this.getBufferedFushMainBuffer(0,Number.POSITIVE_INFINITY)},n.nextLevelSwitch=function(){var e=this.levels,t=this.media;if(null!=t&&t.readyState){var i,n=this.getAppendedFrag(t.currentTime);if(n&&1<n.start&&this.flushMainBuffer(0,n.start-1),!t.paused&&e){var r=e[this.hls.nextLoadLevel],a=this.fragLastKbps;i=a&&this.fragCurrent?this.fragCurrent.duration*r.maxBitrate/(1e3*a)+1:0}else i=0;var o=this.getBufferedFrag(t.currentTime+i);if(o){var s=this.followingBufferedFrag(o);if(s){this.abortCurrentFrag();var l=s.maxStartPTS?s.maxStartPTS:s.start,d=s.duration,u=Math.max(o.end,l+Math.min(Math.max(d-this.config.maxFragLookUpTolerance,.5*d),.75*d));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}},n.abortCurrentFrag=function(){var e=this.fragCurrent;(this.fragCurrent=null)!=e&&e.loader&&e.loader.abort(),this.state===Le&&(this.state=Te),this.nextLoadPositioncall(this,e,t,thiss.config,i,this.fra),o.prototype.onMediaDetaching.call(this)},n.onMediaPlayidia seeked to "+t.tos.lastCurrentTime=0evels=t.levels,thorCdnTuneIn(n.deevels were reset while loading level "+r)},n._handleFragmentLoadProgress=function(e){var t,i=e.frag,n=e.part,r=e.payload,a=this.levels;if(a){var o=a[i.level],s=o.details;if(s){var l=o.videoCodec,d=s.PTSKnown||!s.live,u=null===(t=s.initSegment)||void 0===t?void 0:t.data,c=this._getAudioCodec(o),h=this.transmuxer=this.transmuxer||new je(this.hls,v.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),f=n?n.index:-1,p=-1!==f,g=new Y(i.level,i.sn,i.stats.chunkCount,r.byteLength,f,p),m=this.initPTS[i.cc];h.push(r,u,c,l,i,n,s.totalduration,d,g,m)}else this.warn("Dropping fragment "+i.sn+" of level "+i.level+" after level details were reset")}else this.warn("Levels were reset while fragment load was in progress. Fragment "+i.sn+" of level "+i.level+" will trigger(k.a.AUDIO_TRACKediaBuffer=r)}this.altAudio=n,this.tick()},n.onBufferCreated=function(e,t){var i,n,r=t.tracks,a=!1;for(var o in r){var s=r[o];if("main"===s.id){if(i=s,"video"===(n=o)){var l=r[o];l&&(this.videoBuffer=l.buffer)}}else a=!0}a&&i?(this.log("Alternate track found, use "+n+".buffered to schedule main fragment loading"),this.mediaBuffer=i.buffer):thievious=i),this.fragBufferedComplete(i,n)}},n.onError=function(e,t){switch(t.details){case b.a.FRAG_LOAD_ERROR:case b.a.FRAG_LOAD_TIMEOUT:case b.a.KEY_LOAD_ERROR:case b.a.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(v.MAIN,t);break;case b.a.LEVEL_LOAD_ERROR:case b.a.LEVEL_LOAD_TIMEOUT:this.state!==Re&&(t.fatal?(this.warn(""+t.details),this.state=Re):t.levelRetry||this.state!==De||(this.state=Te));break;case b.a.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==xe&&this.state!==Ie||(this.media&&q.isBuffered(this.media,this.media.currentTime)&&q.isBuffered(this.media,this.media.currentTime+.5)?(this.reduceMaxBufferLength(),this.state=Te):(this.warn("buffer full error also media.currentTime is not buffered, flush everything"),thiTime),this.lastCurrentTime=e.=this.startPosition),this.tickImmediate()},n.onBufferFlushed=function(e,t){var i=t.type;if(i!==Z.a.AUDIO||this.audioOnly&&!this.altAudio){var n=(i===Z.a.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(n,i,v.MAIN)}},n.onLevelsUpdated=function(e{this.audioCodecSwap=!this.audioCodecSwap},n.seekToStartPos=function(){var e=this.media,t=e.currentTime,i=this.startPosition;if(0<=i&&t<i){if(e.seeking)return void J.b.log("could not seek to "+i+", already seeking at "+t);var n=q.getBuffered(e),r=(n.length?n.start(0):0)-i;0<r&&r<this.config.maxBufferHole&&(J.b.log("adjusting start position by "+r+" to match buffer start"),i+=r,this.startPosition=i),this.log("seek to target start position "+i+" from current tif("mp4a.40.5")?"mp4a.40nce.now(),t.trigger(k.a.FR;n.trigger(k.a.FRAG_PARSING_USERDATA,C)}}},n._bufferInitSegment=function(e,i,n,r){var a=this;if(this.state===xe){this.audioOnly=!!i.audio&&!i.video,this.altAudio&&!this.audioOnly&&delete i.audio;var t=i.audio,o=i.video,s=i.audiovideo;if(t){var l=e.audioCodec,d=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(l=l&&(-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==t.metadata.channelCount&&-1===d.indexOf("firefox")&&(l="mp4a.40.5")),-1!==d.indexOf("android")&&"audio/mpeg"!==t.container&&(l="mp4a.40.2",this.log("Android: force audio codec to "+l)),e.audioCodec&&e.audioCodec!==l&&this.log('Swapping manifest audio codec "'+e.audioCodec+'" for "'+l+'"'),t.levelCodec=l,t.id="main",this.log("Init audio buffer, container:"+t.container+", codecs[selected/level/parsed]=["+(l||"")+"/"+(e.audioCodec||"")+"/"+t.codec+"]")}o&&(o.levelCodec=e.videoCodec,o.id="main",this.log("Init video buffer, container:"+o.container+", codecs[level/parsed]=["+(e.videoCodec||"")+"/"+o.codec+"]")),s&&this.log("Init audiovideo buffer, container:"+s.container+", codecs[level/parsed]=["+(e.attrs.CODECS||"")+"/"+s.codec+"]"),this.hls.trigger(kg:n,part:null,chunkMeta:r,phis.resetFragmentLoading(e):this.state=Pe},n.checkFragmentChanged=function(){var e=this.media,t=null;if(e&&1<e.readyState&&!1===e.seeking){var i=e.currentTime;if(q.isBuffered(e,i)?t=this.getAppendedFrag(i):q.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){var n=this.fragPlaying,r=t.level;n&&t.sn===n.sn&&n.level===r&&t.urlId===n.urlId||(this.hls.trigger(k.a.FRAG_CHANGED,{frag:t}),n&&n.level===r||this.hls.trigger(k.a.LEVEL_SWITCHED,{level:r}),this.fragPlaying=this.nextBufferedFrag;retcurrentTime);if(t)return t.lethis.followingBufferedFrag(t)}return null}},{key:"forceStartLoad",get:function()this.efaultEstimate_},t.destroy=function(){},e}();function Ye(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Ke=function(){function e(e){this.hls=void 0,this.lastLoadedFragLevel=0,this._nextAutoLevel=-1,this.timer=void 0,this.onCheck=this._abandonRulesCheck.bind(this),this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0;var t=(this.hls=e).config;this.bwEstimator=new qe(t.abrEwmaSlowVoD,t.abrEwmaFastVoD,t.abrEwmaDefaultEstimate),this.registerListeners()}var t=e.prototype;return t.registerListeners=function(){var e=this.hls;e.on(k.a.FRAG_LOADING,this.onFragLoading,this),e.on(k.a.FRAG_LOADED,this.onFragLoaded,this),e.on(k.a.FRAG_BUFFERED,this.onFragBuffered,this),e.on(k.a.LEVEL_LOADED,this.onLevelLoaded,this),e.on(k.a.ERROR,this.onError,this)},t.unregisterListeners=function(){var e=this.hls;e.off(k.a.FRAG_LOADING,this.onFragLoading,this),e.off(k.a.FRAG_LOADED,this.onFragLoaded,this),e.off(k.a.FRAG_BUFFERED,this.onFragBuffered,this),e.off(k.a.LEVEL_LOADED,this.onLevelLoaded,this),e.oll,this.fragCurrent=this.partCurrent=null},t.onFragLoading=function(e,t){var i,n=t.frag;n.type===v.MAIN&&(this.timer||(this.fragCurrent=n,this.partCurrent=null!=(i=t.part)?i:null,this.timer=self.setIntupdate(i.abrEwmaSlowVoD,i.abrEwmaFastVoD)},t._abandonRulesCheck=function(){var e=this.fragCurrent,t=this.partCurrent,i=this.hls,n=i.autoLevelEnabled,r=i.config,a=i.media;if(e&&a){var o=t?t.stats:e.stats,s=t?t.duration:e.duration;if(o.aborted)return J.b.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);if(n&&!a.paused&&a.playbackRate&&a.readyState){var l=performance.now()-o.loading.start,d=Math.abs(a.playbackRate);if(!(l<=500*s/d)){var u=i.levels,c=i.minAutoLevel,h=u[e.level],f=o.total||Math.max(o.loaded,Math.round(s*h.maxBitrate/8)),p=Math.max(1,o.bwEstimate?o.bwEstimate/8:1e3*o.loaded/l),g=(f-o.loaded)/p,m=a.currentTime,v=(q.bufferInfo(a,m,r.maxBufferHole).end-m)/d;if(!(2*s/d<=v||g<=v)){var y,b=Number.POSITIVE_INFINITY;for(y=e.level-1;c<y&&!((b=s*u[y].maxBitrate/(6.4*p))<v);y--);if(!(g<=b)){var w=this.bwEstimator.getEstimate();J.b.warn("Fragment "+e.sn+(t?" part "+t.index:"")+" of level "+e.level+" is loading too slowly and will cause an underbuffer; aborting and switching to level "+y+"\n      Current BW estimate: "+(Object(X.a)(w)?(w/1024).toFixed(3):"Unknown")+" Kb/s\n      Estimated load time for current fragment: "+g.toFixed(3)+" s\n      Estimated load time for the next fragment: "+b.toFixed(3)+" s\n      Time to underbuffer: "+v.toFixed(3)+" s"),i.nextLoadLevel=y,this.bwEstimator.sample(l,o.loaded),this.clearTimer(),e.loader&&(this.fragCurrent=this.partCurrent=null,e.loader.abort()),i.trigger(k.a.FRAG_LOAD_EMERGENCY_ABORTED,{frag:e,part:t,stats:o})}}}}}},t.onFragLoaded=function(e,t){var i=t.frag,n=t.part;if(i.type===v.MAIN&&Object(X.a)(i.sn)){var r=n?n.stats:i.stats,a=n?n.duration:i.duration;if(this.clearTimer(),this.lastLoadedFragLevel=i.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var o=this.hls.levels[i.level],s=(o.loaded?o.loaded.bytes:0)+r.loaded,l=(o.loaded?o.loaded.duration:0)+a;o.loaded={bytes:s,duration:l},o.realBitrate=Math.round(8*s/l)}if(i.bitrateTest){var d={stats:r,frag:i,part:n,id:i.type};this.onFragBuffered(k.a.FRAG_BUFFERED,d),i.bitrateTest=!1}}},t.onFragBuffered=function(e,t){var i=t.frag,n=t.part,r=n?n.stats:i.stats;if(!r.aborted&&i.type===v.MAIN&&"initSegment"!==i.sn){var a=r.parsing.end-r.loading.start;this.bwEstimator.sample(a,r.loaded),r.bwEstimate=this.bwEstimator.getEstimate(),i.bitrateTest?this.bitrateTestDelay b.a.FRAG_LOAearInterval(this.timer),this.timer=void 0},t.getNextABRAutoLevel=function(){var e=this.fragCurrent,t=this.partCurrent,i=this.hls,n=i.maxAutoLevel,r=i.config,a=i.minAutoLevel,o=i.media,s=t?t.duration:e?e.duration:0,l=o?o.currentTime:0,d=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,u=this.bwEstimator?this.bwEstimator.getEstimate():r.abrEwmaDefaultEstimate,c=(q.bufferInfo(o,l,r.maxBufferHole).end-l)/d,h=this.findBestLevel(u,a,n,c,r.abrBandWidthFactor,r.abrBandWidthUpFactor);if(0<=h)return h;J.b.trace((c?"rebuffering expected":"buffer is empty")+", finding optimal quality level");var f=s?Math.min(s,r.maxStarvationDelay):r.maxStarvationDelay,p=r.abrBandWidthFactor,g=r.abrBandWidthUpFactor;if(!c){var m=this.bitrateTestDelay;m&&(f=(s?Math.min(s,r.maxLoadingDelay):r.maxLoadingDelay)-m,J.b.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*f)+" ms"),p=g=1)}return h=this.findBestLevel(u,a,n,c+f,p,g),Math.max(h,0)},t.findBestLevel=function(e,t,i,n,r,a){for(var o,s=this.fragCurrent,l=this.partCurrent,d=this.lastLoadedFragLevel,u=this.hls.levels,c=u[d],h=!(null==c||null===(o=c.details)||void 0===o||!o.live),f=null==c?void 0:c.codecSet,p=l?l.duration:s?s.duration:0,g=i;t<=g;g--){var m=u[g];if(m&&(!f||m.codecSet===f)){var v=m.details,y=(l?null==v?void 0:v.partTarget:null==v?void 0:v.averagetargetduration)||p,b=void 0;b=g<=d?r*e:a*e;var w=u[g].maxBitrate,E=w*y/b;if(J.b.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+g+"/"+Math.round(b)+"/"+w+"/"+y+"/"+n+"/"+E),w<b&&(!E||h&&!this.bitrateTestDelay||E<n))return g}}return-1Level();return-1!==e&&(i=Math.min(e,i)),i},set:function(e){this._nextAt=function(e){return this.queues[e][0]},e}(),$e=Be()itSourceBuffer(),this.registerListeners()|0<Object.s.unregisterListeners(),this.details=null},t.registerListeners=function(){var e=this.hls;e.on(k.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(k.a.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(k.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(k.a.BUFFER_RESET,this.onBufferReset,this),e.on(k.a.BUFFER_APPENDING,this.onBufferAppending,this),e.on(k.a.BUFFER_CODECS,this.onBufferCodecs,this),e.on(k.a.BUFFER_EOS,this.onBufferEos,this),e.on(k.a.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(k.a.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(k.a.FRAG_PARSED,this.onFragParsed,this),e.on(k.a.FRAG_CHANGED,this.k.a.FRAG_CHANGED,thisteners={audio:[],vxpected+" bufferCodcreateObjectURL(n),is.hls.trigger(k+" buffer",e)}}),ce.readyState&&thist+" SourceBuffer type",e)}};r.append(e,t)},t.onBufferAppending=function(e,t){var r=this,i=this.hls,n=this.operationQueue,a=this.tracks,o=t.data,s=t.type,l=t.frag,d=t.part,u=t.chunkMeta,c=u.buffering[s],h=self.performance.now();c.start=h;var f=l.stats.buffering,p=d?d.stats.buffering:null;0===f.start&&(f.start=h),p&&0===p.start&&(p.start=h);var g=a.audio,m="audio"===s&&1===u.id&&"audio/mpeg"===(null==g?void 0:g.container),v={execute:function(){if(c.executeStart=self.performance.now(),m){var e=r.sourceBuffer[s];if(e){var t=l.start-e.timestampOffset;.1<=Math.abs(t)&&(J.b.log("[buffer-controller]: Updating audio SourceBuffer timestampOffset to "+l.start+" (delta: "+t+") sn: "+l.sn+")"),e.timestampOffset=l.start)}}r.appendExec,chunkMefer"),t.fatal=!0)),i.trigger(k.a.ER().forEach(funcED,{frag:n,part:nged=function(&"open"===e.readythis)):this.updateMediaElementDuration())},t.flushBackBuffer=function(){var n=this.hls,r=this.details,e=this.media,a=this.sourceBuffer;if(e&&null!==r){var t=this.getSourceBufferTypes();if(t.length){var i=r.live&&null!==n.config.liveBackBufferLength?n.config.liveBackBufferLength:n.config.backBufferLength;if(Object(X.a)(i)&&!(i<0)){var o=e.currentTime,s=r.levelTargetDuration,l=Math.max(i,s),d=Math.floor(o/s)*s-l;t.forEach(function(e){var t=a[e];if(t){var i=q.getBuffered(t);0<i.length&&d>i.start(0)&&(n.trigger(k.a.BACK_BUFFER_REACHED,{bufferEnd:d}),r.live&&n.trigger(k.a.LIVE_BACK_BUFFER_REACHED,{bufferEnd:d}),n.trigger(k.a.BUFFER_FLUSHING,{startOffset:0,endOffset:d,type:e}))}})}}}},t.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var e=this.details,t=this.hls,i=this.media,n=this.mediaSource,r=e.fragments[0].start+e.totalduration,a=i.duration,o=Object(X.a)(n.duration)?n.duration:0;e.live&&t.config.liveDurationInfinity?(J.b.log("[buffer-controller]: Media Source duration is set to Infinity"),n.duration=1/0,this.updateSeekableRange(e)):(o<r&&a<r||!Object(X.a)(a))&&(J.b.log("[buffer-controller]: Updating Media Source duration to "+r.toFixedtalduration);t.setLivr.forEach(function(e){(k.a.BUFFER_CREATED{this.operationQu(e).onComplete(),t.operationQueue.current(e);i&&i.onError(t)},t.removeExecutor=function(e,t,i){var n=this.media,r=this.mediaSource,a=this.operationQueue,o=this.sourceBuffer[e];if(!n||!r||!o)return J.b.warn("[buffer-controller]: Attempting to remove from the "+e+" SourceBuffer, but it does not exist"),void a.shiftAndExecuteNext(e);var s=Object(X.a)(n.duration)?n.duration:1/0,l=Object(X.a)(r.duration)?r.duration:1/0,d=Math.max(0,t),u=Math.min(i,s,l);d<u?(J.b.log("[buffer-controller]: Removing ["+d+","+u+"] from the "+e+" SourceBuffer"),o.remove(d,u)):ecuteNext(t);n.&t.updating||n.shiftAndn(){return Object.ket:t,listener:r}),n.addEvremoveEventListener(e.event,e.listener)})},e}();function it(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.de.clientRect=null,this.registerListeners()}var e,t,i=r.prototype;return i.setStreamController=func=null,this.hls=this.streamController=null},i.registerListeners=function(){var e=this.hls;e.on(k.a.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(k.a.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(k.a.MANIFEST_PARSED,this.onManifestParsed,this),e.on(k.a.BUFFER_CODECS,this.onBufferCodecs,this),e.on(k.a.MEDIA_DETACHING,this.onDIA_DETACHING,this.onMedhis.restrictedLevel instanceof HTMLVidoPlayerSize&&t.vioPlayerSize&&t.video&&this.startCapping()},i.onMediaDetaching=functiohis.autoLevelCaSize(t,this.me.bind(this),1earInterval(this.timer),this.timer=void 0)},i.getDimensions=function(){if(this.clientRect)return this.clientRect;var e=this.media,t={width:0,height:0};if(e){var i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,t.width||t.height||(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}turn void 0===t&&(t=[]),-n.height!==r.height)){a=o;break}}=self.devicePixelRatio}catch(e){}return e}}],it((e=r).prototype,[{key:"mediaWidth",get:function(){return this.getDimensions().width*r.ctDimensions().height*r.contentoid 0,this.hls=e,this.registerListeners()}var t=e.prototype;return t.setStreamController=function(e){this.streamController=e},t.registerListeners=function(){this.hls.on(k.a.MEDIA_ATTACHING,this.onMediaAttaching,this)},t.unregisterListeners=function(){this.hls.off(k.a.MEDIA_AaybackQualityAvailable=!1,this.media=null},t.onMediaAttaching=function(e,t){var i=this.hls.config;if(i.capLevelOnFPSDrop){var n=t.media instanceof self.HTMLVideoElement?t.media:null;(this.media=n)&&"function"==typeof n.getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}},t.checkFPS=function(e,t,i){var n=performance.now();if(t){if(this.lastTime){var r=n-this.lastTime,a=i-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*a/r,l=this.hls;if(l.trigger(k.a.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:i}),0<s&&a>l.config.fpsDroppedMonitoringThreshold*o){var d=l.currentLevel;J.b.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),0<d&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(k.a.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,this.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=i,thiodedFrameCount,e.webkitDroppedFrameCount)},e}(),at=i(ull,this.stats=new at.a,this.retryernal(),this.loaState&&(this.stats.aborted=!0,e.abort()))},t.abort=function(){var e;this.abortInternal(),null!==(e=this.callbacks)&&void 0!==e&&e.onAbort&&this.callbacks.onAbort(thtryDelay=t.retradtimeout.bind(this),e.timeout),i.send()}},t.readystatechange=function(){var e=this.context,t=this.loader,i=this.stats;if(e&&t){var n=t.readyState,r=this.config;if(!i.aborted&&2<=n)if(self.clearTimeout(this.requestTimeout),0===i.loading.first&&(i.loading.first=Math.max(self.performance.now(),i.loading.start)),4===n){t.onreadystatechange=null,t.onprogress=null;var a=t.status;if(200<=a&&a<300){var o,s;if(i.loading.end=Math.max(self.performance.now(),i.loading.first),s="arraybuffer"===e.responseType?(o=t.response).byteLength:(o=t.responseText).length,i.loaded=i.total=s,!this.callbacks)return;var l=this.callbacks.onProgress;if(l&&l(i,e,o,t),!this.callbacks)return;var d={url:t.responseURL,data:o};this.callbacks.onSuccess(d,i,e,t)}else i.retry>=r.maxRetry||400<=a&&a<499?(J.b.error(a+" while loading "+e.url),this.callbacks.onError({code:a,text:t.statusText},e,t)):(J.b.warn(a+" while loading "+e.url+", retrying in "+this.retryDelay+"..."),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,r.maxRetryDelay),i.retry++)}else self.clearTimeout(this.requestTimeout),this.requestTimeout=self.setTimeout(this.loadtimout(this.stats,ded,e.lengthCoer("age");e=t?r,i.prototype),r}).apply(null,arguments)}function ct(e,t){return(ct=Object.setPrototypeOf||f.__proto__||Objec self.AbortController,this.stats=n=this.callbacks=stats.abrt(this.stats,this.context,this.response)},t.load=function(n,r,a){var o=this,s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s..rangeStart+"-"+String(e.rangeEnd-1)})),i}(n,this.controller.signal),l=a.onProgress,d="arraybuffer"===n.responseType,u=d?"byteLength":"length";this.context=n,this.config=r,this.callbacks=a,this.request=this.fetchSetup(n,e),self.clearTimeout(this.requestTiortInternal(),a.onTimeout(s,n,o.response)},r.timeout),self.fetch(this.request).then(function(e){if(o.response=o.loader=e,e.ok)return s.loading.first=Math.max(self.performance.now(),s.loading.start),s.total=parseInt(e.headers.get("Content-Length")||"0"),l&&Object(X.a)(r.highWaterMark)?o.loadProgressively(e,s,n,r.highWaterMark,l):d?e.arrayBuffer():e.text();var t=e.status,i=e.statusText;throw new mt(i|terMarkror({code:t,textet("age");e=t?parseFh(fun pt(e,t){return new self.Requ0,n.details=void 0,n.code=t,n.details=i,n}return t=r,(e=i).prototype=Object.create(t.prototype),ct(e.protoha",e.PLAYREADY="com.microsoft.playready"}(gt=gt||{});var yt="undefined"!=typeof self&&self.navigator&&self.navigator.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null;function bt(){return(bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(eetOwnPropertyDescriptor(a,e))})}return r}var St=Et(Et({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:st,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Ke,bufferController:tt,capLevelController:nt,fpsController:rt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystemOptions:{},requestMediaKeySystemAccessFunc:yt,testBandwidth:!0,progressive:!1,lowLatencyMode:!0},{cueHandler:Je.a,enableCEA708Captions:!1,enableWebVTT:!1,enableIMSC1:!1,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:void 0,subtitleTrackController:void 0,timelineController:void 0,audioStreamController:void 0,audioTrackController:void 0,emeController:void 0});function At(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Tt=function(){function y(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Ue.EventEmitter,this._autoLevelCapping=void 0,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this._an "liveSyncDuration"');return bt({},e,t)}(y.DefaultConfig,e);this.userConfig=e,Object(J.a)(t.debuge streaming enabled, using FetchLoader"))}(t);var i=t.abrController,n=t.bufferController,r=t.capLevelController,a=t.fpsController,o=this.abrController=new i(this),s=this.bufferController=new n(this),l=this.capLevelController=new r(this),d=new a(this),u=new E(this),c=new S(this),h=new T(this),f=this.levelController=new j(this),p=new H(this),g=this.streamController=new We(this,p);l.setStreamController(g),d.setStreamController(g);var m=[f,g];this.networkControllers=m;var v=[u,c,o,s,l,d,h,p];this.audioTrackController=this.createController(t.audioTrackController,null,m),this.createController(t.audioStreamController,p,m),this.subtitleTrackController=this.createController(t.subtitleTrackController,null,m),this.createController(t.subtitleStreamController,p,m),this.createController(t.timelineController,null,v),this.emeController=this.createController(t.emeController,null,v),this.latencyController=this.createController(L,npeof t.prototype.remove;return!!i&&!!n}()};var ee(this);return i&&i.push(n),n}return null},i.on=function(e,t,i){void 0===i0===i&&(i=this),this._emitter.once(e,t,i)},i.removeAllListeners=function(e){===i&&(i=this),this._emitter.off(e,t,i,n)},i.listeners=function(e)n(e,t,i){rPTION,fatal:!1,e(e){return.destroy()}),tis.trigger(k.a.MEDIA_DETACHhis.trigger(lers.forEacollers.forEach(fu"),this.streamControthis.detachMed=0),this.levelController.removeLevel(e,t)},t=[{key:"version",get:function(){return"1.0.3"}},{key:"Events",get:function(){return k.a}},{key:"ErrorTypes",get:function(){return b.b}},{key:"ErrorDetails",get:functireturn y.defaultConfig?y.defaultConfig:St},set:function(e){y.defaultConfig==this.levelController.levels;return e||[]}},{key:"currentLevel",get:function(){retus.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){re,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){J.b.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelControlllConel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){rLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",get:function(){rech()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:funvelCapping:"+e),this._autoLeve.bwEstimator;return e?e.getEsturn-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelContro++)if(e[n].maxBitrate>t)rng;return-1===t&&e&&e.lengvel,xtAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(tckController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"media",get:function(){returckCoeTrackController;t&&(t.subtitleDisplay=e)}},{key:"lowLatencyMode",get:functio:function(e){this.config.lowLatencyMode=e}},{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:function(){return this.streamController.forceStartLoad}}]),At(e,t),y}();Tt.defaultConfig=void 0}]).default)},function(e,t,i){"use strict";i.d(t,"a",function(){return r}),i.d(t,"b",function(){return a}),i.d(t,"c",function(){return o}),i.d(t,"e",function(){return s}),i.d(t,"d",function(){return l});var n=i(4);function r(e){return null!==e&&1==e}function a(e,t){return this.isMobile?null==t||t:null==e||e}function o(e,t,i,n){this.width=this.isMobile&&t||e,this.height=this.isMobile&&n||i}function s(e,t,i,n,r,a){null!=e&&null!=i&&null!=t&&(this.passbackCode=e,this.passbackWidth=t,this.passbackHeight=i,null!=n&&(this.passbackLength=n),null!=r&&(this.passbackAdSlots=r),this.passbackOnFirstBidding=a)}function l(e){(function(e,t){this.outofviewMethod=this.isMobile?t:e}).call(this,this.widgetStaticConfig.oovm,this.widgetStaticConfig.oovmm),function(e,t,i,n){""!=n&&"adonly"==e&&(this.isMobile?i&&Array.isArray(i)&&i.includes(n)&&(this.outofviewMethod="play"):t&&Array.isArray(t)&&t.includes(n)&&(this.outofviewMethod="play"))}.call(this,this.outofviewMethod,this.widgetStaticConfig.eaoflc,this.widgetStaticConfig.eaoflcm,e),"floater"!=this.outofviewMethod&&"adonly"!=this.outofviewMethod||(function(e,t,i){this.floaterWidthOnOutofview=this.isMobile?t||i:e||i}.call(this,this.widgetStaticConfig.oovfw,this.widgetStaticConfig.oovfwm,this.width),function(e,t,i){this.floaterHeightOnOutofview=this.isMobile?t||i:e||i}.call(this,this.widgetStaticConfig.oovfh,this.widgetStaticConfig.oovfhm,this.height),function(e,t,i){this.floaterPositionOutOfView=this.isMobile?t||i:e||i}.call(this,this.widgetStaticConfig.oovfp,this.widgetStaticConfig.oovfpm,"bottom-right"),function(e,t){this.outofviewFloaterStartWithFloater=this.isMobile?t||!1:e||!1}.call(this,this.widgetStaticConfig.oovfi,this.widgetStaticConfig.oovfim),"adonly"==this.outofviewMethod?(function(e,t){this.outofviewAdOnlyFQ=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oofaofq,this.widgetStaticConfig.oofaofqm),function(e,t){this.outofviewAdOnlyFQDaily=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oofaodfq,this.widgetStaticConfig.oofaodfqm),function(e,t){this.outofviewAdOnlyFQHourly=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oovaohfq,this.widgetStaticConfig.oovadhfqm),(this.outofviewAdOnlyFQDaily||this.outofviewAdOnlyFQHourly)&&d.call(this,this.outofviewAdOnlyFQDaily,this.outofviewAdOnlyFQHourly)):"floater"==this.outofviewMethod&&(function(e,t){this.outofviewFloaterFQ=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oovffq,this.widgetStaticConfig.oovffqm),function(e,t){this.outofviewFloaterFQDaily=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oovfdfq,this.widgetStaticConfig.oovfdfqm),function(e,t){this.outofviewFloaterFQHourly=this.isMobile?t:e}.call(this,this.widgetStaticConfig.oovfhfq,this.widgetStaticConfig.oovfhfqm),(this.outofviewFloaterFQDaily||this.outofviewFloaterFQHourly)&&d.call(this,this.outofviewFloaterFQDaily,this.outofviewFloaterFQHourly)),function(e,t){this.floaterPadding=this.isMobile?t||0:e||0}.call(this,this.widgetStaticConfig.fp,this.widgetStaticConfig.fpm),this.closeFloaterDelay=this.widgetStaticConfig.cfd)}function d(e,t){this.outofviewCookieName="truvid_oov";var i=Object(n.a)(this.outofviewCookieName);i&&(i=JSON.parse(i),e&&(i.timesShown&&i.dailyFQTimestamp&&(new Date-new Date(i.dailyFQTimestamp))/1e3/60/60<24?this.floaterOOVTimesShown=i.timesShown:this.floaterOOVTimesShown=0),t&&(i.timesShownHourly&&i.hourlyFQTimestamp&&(new Date-new Date(i.hourlyFQTimestamp))/1e3/60/60<1?this.floaterOOVTimesShownHourly=i.timesShownHoeturn r}),i.d(t,"a",function(){return a})},function(e,t,i){"use strict";i.d(t,"e",function(){return n}),i.d(t,"b",function(){return r}),i.d(t,"c",function(){return a}),i.d(t,"d",function(){return o}),i.d(t,"a",function(){return s});var S=i(1),A=i(2),T=i(9),n="floaterOpened",r="floaterClosed",a="floaterClosedByUserRequest",o="floaterFQDecreased";function s(e,t){var i=t.enableFq,n=void 0!==i&&i,r=t.fq,a=void 0===r?0:r,o=t.showOnlyOnAds,s=void 0!==o&&o,l=t.showAfterPlayerView,d=void 0!==l&&l,u=t.openFloaterOnNextAd,c=void 0!==u&&u,h=t.width,f=void 0===h?320:h,p=t.height,g=void 0===p?180:p,m=t.padding,v=void 0===m?0:m,y=t.position,b=void 0===y?"bottom-left":y,w=t.counterToCloseFloater,E=void 0===w?0:w;this.player=e,this.fq=a,this.enableFq=n,this.showOnlyOnAds=s,this.showAfterPlayerView=d,this.openFloaterOnNextAd=c,this.playerElement=e.getPlayerElement(),this.width=f,this.height=g,this.width=f,this.height=g,this.padding=v,this.position=b,this.isFloaterActive=!1,this.closeButtonElement=null,this.closeContainerElement=null,this.counterToCloseFloater=E,this.floaterClosedByUser=!1,this.forcePlayingAdsOnFloaterOnly=!1,this.maxWidthToOpen=this.width,e.subscribe(S.c,this.viewabilityCallback.bind(this)),e.subscribe(S.i,this.onPlayerResize.bind(this)),e.subscribe(S.n,this.onPlayerResize.bind(this)),(s||c)&&(e.subscribe(A.c,this.onAdStarted.bind(this)),s&&(e.subscribe(A.a,this.onAdEnd.bind(this)),e.subscribe(T.a,this.onAdEnd.bind(this)))),this.playerContainer=this.playerElement.parentElement}s.prototype.IsFloaterOpen=function(){return this.isFloaterActive},s.prototype.onAdStarted=function(){this.showOnlyOnAds||this.openFloaterOnNextAd?(this.floaterClosedByUser=!1,this.player.isPlayerInView()?this.forcePlayingAdsOnFloaterOnly&&this.Show(!0):this.Show(!0)):this.isFloaterActive&&this.resetCounter()},s.prototype.onAdEnd=function(e){if(this.isFloaterActive){if(void 0!==e.detail&&void 0!==e.detail.numberOfTimesAdSkipped&&0<e.detail.numberOfTimesAdSkipped&&this.enableFq&&this.fq){this.fq=this.fq-e.detail.numberOfTimesAdSkipped;for(var t=0;t<e.detail.numberOfTimesAdSkipped;t++)this.player.dispatchEvent(o)}this.showOnlyOnAds&&(this.floaterClosedByUser=!1,this.Hide())}},s.prototype.viewabilityCallback=function(e){(e=e.detail[0]).isIntersecting&&this.showAfterPlayerView?this.showAfterPlayerView=!1:e.isIntersecting?this.isFloaterActive&&(this.forcePlayingAdsOnFloaterOnly||this.Hide()):this.showOnlyOnAds&&!this.player.isAdPlaying()||e.isIntersecting||this.Show(!0)},s.prototype.isAvailableToShow=function(){return!this.isFloaterActive&&this.IsAvailableForAdOnly()&&(!this.showOnlyOnAds&&!this.floaterClosedByUser||this.showOnlyOnAds&&this.player.isAdPlaying()&&!this.floaterClosedByUser)},s.prototype.IsAvailableForAdOnly=function(){return(!this.enableFq||this.enableFq&&0<this.fq)&&!this.showAfterPlayerView},s.prototype.Show=function(e){this.isAvailableToShow()&&!this.isFloaterActive&&(this.isFloaterActive=!0,this.toggle(!0,e),this.player.isAdPlaying()?this.player.resizeAds():this.player.dispatchEvent(S.i),this.player.dispatchEvent(n))},s.prototype.Hide=function(e){this.isFloaterActive&&(this.toggle(!1,e),this.isFloaterActive=!1,this.player.dispatchEvent(S.i),this.player.dispatchEvent(r))},s.prototype.toggle=function(e,t){if(e){var i=document.createElement("div"),n=document.createElement("div");if(n.className="trv-close",i.id=this.playerElement.id+"_close",i.className="trv-close-container",i.style.cssText="width: "+this.width+"px;",this.closeContainerElement=i,this.closeButtonElement=n,this.closeContainerElement.appendChild(this.closeButtonElement),this.playerElement.appendChild(this.closeContainerElement),e&&this.width>document.documentElement.clientWidth&&document.documentElement.clientWidth<=this.maxWidthToOpen){var r=(this.height/this.width).toFixed(2);this.height=document.documentElement.clientWidth*r,this.width=document.documentElement.clientWidth}this.resetCounter(),this.applyStyle(e,t)}else this.applyStyle(e,t)},s.prototype.applyStyle=function(e,t){var i,n,r,a,o,s,l,d,u,c;if(e){switch(i="fixed",c=10,this.closeButtonElement.style.left="0px",this.position){case"top-right":n="auto",a=15+this.padding+"px",o="auto",this.closeContainerElement.style.top="0px",this.closeContainerElement.style.left="-28px",t?(r="-"+this.width+"px",this.setTransition("right")):r="0px";break;case"top-left":r=n="auto",a=15+this.padding+"px",this.closeContainerElement.style.top="0px",this.closeContainerElement.style.right="-28px",t?(o="-"+this.width+"px",this.setTransition("left")):o="0px";break;case"bottom-right":this.closeContainerElement.style.top="-28px",this.closeContainerElement.style.right="0px",n=this.padding+"px",t?(r="-"+this.width+"px",this.setTransition("right")):r="0px",o=a="auto";break;case"bottom-left":this.closeContainerElement.style.top="-28px",this.closeContainerElement.style.left="0px",n=this.padding+"px",a=r="auto",t?(o="-"+this.width+"px",this.setTransition("left")):o="0px";break;case"left-center":t?(o="-"+this.width+"px",this.setTransition("left")):o="0px",this.closeContainerElement.style.top="-28px",this.closeContainerElement.style.left="0px",a=document.documentElement.clientHeight/2-this.height/2+"px",n=r="auto";break;case"right-center":o="auto",this.closeContainerElement.style.top="-28px",this.closeContainerElement.style.right="0px",a=document.documentElement.clientHeight/2-this.height/2+"px",t?(r="-"+this.width+"px",this.setTransition("right")):r="0px",n="auto";break;case"middle-top":o=document.documentElement.clientWidth/2-this.width/2+"px",this.closeContainerElement.style.top="0px",this.closeContainerElement.style.left="-28px",t?(a="-"+this.height+"px",this.setTransition("top",this.padding+"px")):a=this.padding+"px",n=r="auto";break;case"middle-bottom":o=document.documentElement.clientWidth/2-this.width/2+"px",r=a="auto",this.closeContainerElement.style.top="-28px",this.closeContainerElement.style.left="0px",t?(n="-"+this.height+"px",this.setTransition("bottom",this.padding+"px")):n=this.padding+"px";break;default:this.closeContainerElement.style.top="-28px",this.closeContainerElement.style.left="0px",n=this.padding+"px",r="0px",o=a="auto"}this.closeButtonElement.style.position="absolute",this.closeContainerElement.style.position="absolute",s=this.width+"px",l=this.height+"px",d=u="0px"}else i="relative",o=a=r=n="auto",c=1,this.playerElement.style.transition="",this.playerElement.style.transition=null,this.player.isResponsive()?(l=s="100%",u="0px",i="absolute"):(s=this.player.getWidth()+"px",u="0px",l=this.player.getHeight()+"px",d="0px"),this.closeContainerElement.parentNode.removeChild(this.closeContainerElement);var h=document.getElementById(this.playerElement.id+"_close");h&&(h.style.width="23px"),this.playerElement.style.top=a,this.playerElement.style.left=o,this.playerElement.style.bottom=n,this.playerElement.style.right=r,this.playerElement.style.width=s,this.playerElement.style.paddingBottom=d,this.playerElement.style.paddingTop=u,this.playerElement.style.setProperty("height",l,"important"),1<c?this.playerElement.classList.add("trvdfloater"):this.playerElement.classList.remove("trvdfloater"),this.playerContainer.style.width="100%",this.playerElement.style.position=i,this.player.resizeAds()},s.prototype.setTransition=function(e,t){setTimeout(function(){t=t||"0px",this.playerElement.style.transition="all 0.5s ease-in-out,this.playerElement.style.transition=null}.bind(this),1100)}.bind(this),10)},s.prototype.resetCounter=function(){var e=this.closeButtonElement;e.onclick=function(){this.counterToCloseFloater&&this.player.isAdPlaying()?this.closeFloaterCurrentTime<=0&&(clearInterval(this.closeFloaterDelayInterval),this.closeFloaterDelayInterval=null,this.floaterClosedByUser=!0,this.enableFq&&this.fq&&(this.fq--,this.player.dispatchEvent(o)),this.player.dispatchEvent(a),this.Hide()):(this.floaterClosedByUser=!0,this.enableFq&&this.fq&&(this.fq--,this.player.dispatchEvent(o)),this.player.dispatchEvent(a),this.Hide())}.bind(this),this.counterToCloseFloater?(this.closeFloaterCurrentTime=this.counterToCloseFloater,e.textContent="",0<this.closeFloaterCurrentTime?e.style.display="none":(e.textContent="",e.style.display="block",e.appendChild(this.getCloseButton())),this.closeFloaterDelayInterval||(this.closeFloaterDelayInterval=setInterval(function(){var e=document.getElementById(this.playerElement.id+"_close");if(e){var t=e.firstElementChild;this.closeFloaterCurrentTime=this.closeFloaterCurrentTime-1,t.appendChild(this.getCloseButton()),this.closeFloaterCurrentTime<=0?(t.style.display="block",clearInterval(this.closeFloaterDelayInterval),this.closeFloaterDelayInterval=null,t.textContent="",t.appendChild(this.getCloseButton())):(t.style.display="none",t.textContent="")}}.bind(this),1e3))):(e.textContent="",e.appendChild(this.getCloseButton()))},s.prototype.getCloseButton=function(){var e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttributeNS(null,"fill","rgba(15, 20, 22, 0.4)"),e.setAttributeNS(null,"viewBox","0 0 14 14");var t=document.createElementNS("http://www.w3.org/2000/svg","path");t.setAttribute("d","M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z");var i=document.createElementNS("http://www.w3.org/2000/svg","path");return i.setAttribute("d","M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"),e.appendChild(t),e.appendChild(i),e},s.prototype.onPlayerResize=function(){if(document.documentElement.clientWidth<=this.maxWidthToOpen){var e=(this.height/this.width).toFixed(2);this.height=document.documentElement.clientWidth*e,this.width=document.documentElement.clientWidth}if(this.isFloaterActive)switch(this.position){case"left-center":case"right-center":this.applyStyle(!0,!1);break;case"middle-bottom":case"middle-top":default:this.applyStyle(!0,!1)}},s.prototype.ForcePlayingAdsOnlyOnFloater=function(){this.forcePlayingAdsOnFloaterOnly=!0},s.prototype.GetForcePlayingAdsOnlyOnFloater=function(){return this.forcePlayingAdsOnFloaterOnly}},function(e,t,i){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.protunction s(e,t){return e?null:new Error(t)}function n(e,t,i,n){e.id=n;var r=function(e,t,i){var n=document.createElement("iframe");n.src=t||"about:blank",n.marginWidth="0",n.marginHeight="0",n.frameBorder="0",n.width="100%",n.height="100%",o(n),i&&(n.style.zIndex=i);return n.setAttribute("SCROLLING","NO"),e.innerHTML="",e.appendChild(n),n}(e,null,i.zIndex);if(function(e,t){var i=e.contentWindow&&e.contentWindow.document;return!!i&&(i.write(t),!0)}(r,f=i.replace(new RegEeys(i).forEach(function(e){t[e]=i[e]}),t}i.d(t,"c",function(){return H}),i.d(t,"a",function(){return G}),i.d(t,"b",function(){return z});var d=["handshakeVersion","initAd","startAd","stopAd","skipAd","resizeAd","pauseAd","resumeAd","expandAscribe","unsubscribe"];function u(e,t,i){}u.prototype.handshakeprototype.initAd=function(e,t,i,n,r,a,o){},u.prototype.startAd=function(e){},u.prototype.stopAd=function(e){},u.prototype},u.prototype.resizeAd=function(e,t,i,n){},u.prototype.pauseAd=function(e){},u.prototype.resumeAd=function(e){},u.prototype.expandAd=function(e){},u.prototype.collapseAd=function(e){},u.prototype.subscribe=function(e,t,i){},u.prototype.unsubscribe=function(e,t){},u.prototype.getAdLinear=function(e){},u.prototype.getAdWidth=function(e){},u.prototype.getAdHeight=function(e){},u.prototype.getAdExpanded=function(e){},u.prototype.getAdSkippableState=function(e){},u.prototype.getAdRemainingTime=function(e){},u.prototype.getAdDuration=function(e){},u.prototype.getAdVolume=function(e){},u.prototype.getAdI{},u.prototype.setAdVolume=function(e,t){},h(u,"METHODS",d),h(u,"GETTERS",["getAdLinear","getAdWidth","getAdHeight","getAdExpanded","getAdSkippableState","getAdRemainingTime","getAdDuration","getAdVolume","getAdCompanions","getAdIcons"]),h(u,"SETTERS",["setAdVolume"]),h(u,"EVENTS",["AdLoaded","AdStarted","AdStopped","AdSkipped","AdSkippableStateChange","AdSizeChange","AdLinearChange","AdDurationChange","AdExpandedChange","AdRemainingTimeChange","AdVolumeChange","AdImpression","AdVideoStart","AdVideoFirstQuartile","AdVideoMidpoint","AdVideoThirdQuartile","AdVideoComplete","AdClickThru","AdInteraction","AdUserAcceptInvitation","AdUserMinimize","AdUserClose","AdPaused","AdPcue:i})}function f(){thisnction(e){return"functi).push({handler:e,contexfilter(function(e){return tscribeAll=function()tName)&&e.handler.call(efunction(e){e.ha._subscribers[e]=[]),this._sub).some(function(e){return t===e.handler})};var p=u.checkVPAIDIm=u.EVENTS.filter(function(e){return e!=g});function v(e,t,i,n){this._isValid=p(e),this._isValid&&(this._creative=e,this._el=t,this._videoEl=i,tk",function(t,i,n){e?e(i,n):i&&t.trigger("AdError",i)}(v.prototype=Object.create(u.prototype)).isValidVPAIDAd=functionn,this._subscribers,t,e)}.bind(this),0)})}),v.prototype.initAd=function(e,i,n,r,a,o,s){a=a||{},o=l({slot:this._el,videoSlot:this._videoEl},o||{}),setTimeout(function(){var t;try{a.AdParameters&&a.AdParameters.length&&0==a.AdParameters.indexOf("&lt;?xml")&&-1!=a.AdParameters.indexOf("&")&&(a.AdParameters=a.AdParameters.replace(/&amp;/g,"&"),a.AdParameters=a.AdParameters.replace(/&lt;/g,"<"),a.AdParameters=a.AdParameters.replace(/&gt;/g,">"),a.AdParameters=a.AdParameters.replace(/&quot;/g,'"')),this._creative.initAd(e,i,n,r,a,o)}catch(e){t=e}y(s,this._subscribere,t,i){this._subscribers.subscribe(t,e,i)},v.prototype.unsubscribe=function(e,t){this._subscribers.unsubscribe(t,e)},v.prototype.on=v.prototype.subscribe,v.prototype.off(i,this._subscribers,t,e)}.bind(this),0)}}),v.prototype.setAdVolume=function(i,n){setTimeout(function(){var e,t=null;try{this._creative.setAdVolume(i),e=i}catch(e){t=e}t=t||s(e===i,"failed to apply volume: "+i),y(n,this._subscribersopAd(),this._subscribers.unsubscIframe",w=-1,function(){return b+"_"+ ++w}),S='<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"></head><body style="margin:0;padding:0"><div class="ad-element"></div><script type="text/javascript" src="{{iframeURL_JS}}"><\/script><script type="text/javascript">window.parent.postMessage(\'{"event": "ready", "id": "{{iframeID}}"}\', \'{{origin}}\');<\/script></body></html>';function B(e,t,i,n){i=i||{},this._id=E(t);return i&&(n.id=i),e.appendChild(n),n}(e,"div"),this._videoEl=t,this._vpaidOptions=n||{timeout:1e4},this._templateConfig={template:i.testopAd(),deleparentNode.removeChild(t),delete tcation.port?":"+witroyed||(this._destroyed=!0,A.call(this))},B.prototype.isDestroyed=function(){return this._destroyed},B.prototype.loaor("VPAIDHTML5Client already destroyed!")}).call(this),A.call(this);var o=this,i=n(this._frameContainer,this._templateConfig.template,l({iframeURL_JS:e,iframeID:this.getID(),origin:C()},this._templateConfig.et.apply(this,arguments)&&clearTimeout(n)}}(this._vpaidOptions.timeout,function(e){if(e.origin!==C())return;var t,i,n;if(JSON.parse(e.data).id!==o.getID())return;i=o._frame.contentWindow?(n=o._frame.contentWindow.getVPAIDAd,s("function"==typeof n,"the ad didn't return a function to create an ad")):"the iframe is not anymore in the DOM tree";if(!i){var r=o._frame.contentWindow.document.querySelector(".ad-element");(t=new v(n(),r,onction(){T.call(this),delete this._adUnit}.bind(o)),i=s(t.isValidVPAIDAd(),"the add is not fully complaint with VPAID specification")}return o._adUni}.bind(this),function(){a("timeout",null)}.bind(this)),window.addEventListener("messagetype.unloadAdUnit=function(){A.call(this)},B.prototype.getID=function(){return this._id};var N=i(11);function _(e,t){var i=e.tracking.events;if(i)for(var n=0,r=Object.keys(i);n<r.length;n++){var a=r[n];if(0<=a.indexOf("progress")&&i[a][0]&&i[a][0].offset){var o=i[a][0].offset.split(":");if(3==o.length){var s=60*+o[0]*60+60*+o[1]+ +o[2];t.puseturn||i.return()}finally{if(s)throw a}}}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function x(i,n,e){var a,r=i,o=e,s=o.getPlayerElement(),l=s.getElementsByClassName("media-video")[0],t=s.getElementsByClassName("trv-video")[0],d="truvid_cnt_vpaid_iframe"+Math.floor(1e5*Math.random()+1);document.getElementById(d)||(d="truvid_cnt_vpaid_iframe"+Math.floor(1e5*Math.random()+1));var u,c=null,h=this,f=null,p=!1,g=null,m=null,v=null,y=null,b=l.volume,w=!1,E=0,S=!1,A=null,T=null,L=null,C={},k=[];function x(e,t){y=t,e?a.isStopped()||(window.playerLog("stopping ad unit - onAdUnitLoad"),M(),r.onLoadingContainerFailed(a)):(function(e){e.subscribe("AdVolumeChange",function(){e.getAdVolume(function(e,t){null!=t&&(0<b&&0==t?a.firePixels("mute"):0==b&&0<t&&a.firePixels("unmute"),b=t)})}),e.subscribe("AdUserAcceptInvitation",function(){a.firePixels("acceptInvitation")}),e.subscribe("AdUserMinimize",function(){a.firePixels("collapse")}),e.subscribe("AdUserClose",function(){a.firePixels("close")}),e.subscribe("AdLoaded",function(){window.playerLog("ad unit loaded"),a.isStopped()||(a.firePixels("available"),a.setLoaded(!0),r.onAdLoaded(),r.getStartAdOnAdLoadedEvent()&&(window.playerLog("starting ad unitit started"),a.firePixels("creativeView")}),e.subscribe("AdVideoStart",function(){window.playerLog("ad unit video start"),a.isStopped()||(a.firePixels("start"),r.onPlayerResize())}),e.subscribe("AdImpression",function(){a.isStopped()||(clearTimeout(T),s.dispatchEvent(new CustomEvent("adImpression")),o.getApiObservable().notify("adImpression",{widgetId:o.getWidgetId(),video:l}),a.setFiredImpression(!0),document.getElementById(d).style.display="block",b=1==l.muted?0:l.volume,y.getAdRemainingTime(function(e,t){0<t&&(E=t)}),function(){if(!c){var e=[],t=document.getElementById(d);t&&e.push(t);var i=null;A&&void 0!==A.as&&1==A.as&&(i={allowSkip:!0}),c=new N.a(h,e,i,o)}}(),P(500),window.playerLog("ad unit impression"),w=!0,r.onAdStarted(),a.fireImpressionPixel("impression",i),S?(window.playerLog("set ad volume 0"),y.setAdVolume(0)):l.muted?(window.playerLog("set ad volume 0"),y.setAdVolume(0)):(window.playerLog("set ad volume "+l.volume),y.setAdVolume(l.volume)),r.onPlayerResize())}),e.subscribe("AdVideoComplete",function(){window.playerLog("ad unit video complete"),a.firePixels("complete"),s.dispatchEvent(new CustomEvent("adComplete")),a.isStopped()||(M(),r.onAdStopped())}),e.subscribe("AdError",function(e){window.playerLog("ad unit error "+e),a.firePixels("error"),a.isStopped()||(M(),1==w?r.onAdStopped():r.onLoadingCod unit paused"),R(),a.firePixels("pause")}),e.subscribe("AdPlaying",function(){window.playerLog("ad unit playing"),p=!1,a.firePixels("resume"),c&&c.play()}),e.subscribe("AdClickThru",function(e){!0,a.firePixels("click"),o.getApiObservable().notify("adClick",{widgetId:o.getWidgetId(),video:l}),s.dispatchEvent(new CustomEvent("adClick")),e&&void 0!==e.playerHandles&&1==e.playerHandles&&(void 0!==e.url&&e.url&&""!=e.url?window.open(e.url,"_blank"):a.clickThrough&&""!=a.clickThrough&&window.open(a.clickThrough,"_blank")),p?(o.setPlayerPausedOnUserBehalf(!1),O()):(o.setPlayerPausedOnUserBehalf(!0),D()),c&&c.show()}),e.subscribe("AdSkipped",function(){window.playerLog("ad unit skipped"),a.firePixels("skip"),a.isStopped()||(M(),r.onAdStopped()),s.dispatchEvent(new CustomEvent(F.b))}),e.subscribe("AdStopped",function(){a.isStopped()||(window.playerLog("ad unit stopped"),M(),1==w?r.onAdStopped():r.onLoadingContainerFailed(a))}),e.subscribe("AdVideoFirstQuartile",function(){window.playerLog("ad unit first quartile"),a.firePixels("firstQuartile")}),e.subscribe("AdVideoMidpoint",function(){window.playerLog("ad unit midpoint"),a.firePixels("midpoint")}),e.subscribe("AdVideoThirdQuartile",function(){window.playerLog("ad unit third quartile"),a.firePixels("thirdQuartile"),clearInterval(u),u=P(100)})}(t),_(a,k),t.handshakeVersion("2.0",function(){if(!a.isStopped()){var e=o.isFullScreenState()?"fullscreen":"normal";t.initAd(r.getRequestWidth(),r.getRequestHeight(),e,-1,{AdParameters:n.adParameters},{videoSlotCanAutoPlay:!0},null,I),L=setInterval(function(){l.hasAttribute("data-rbc")&&(l.removeAttribute("data-rbc"),a.isStopped()||(window.playerLog("stopping ad unit - rubicon interval"),M(),r.onLoadingContainerFailed(a)))},100)}}))}function I(e){e?a.isStopped()||(window.playerLog("ad unit error callback"),M(),r.onLoadingContainerFailed(a)):window.playerLog("ad unit init")}function P(e){u=setInterval(function(){a&&!a.isStopped()?y.getAdRemainingTime(function(e,t){if(g=Math.ceil(t),k&&g){var i,n=U(k);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.eventTime!=Math.round(E)-g||C[r.eventName]||(C[r.eventName]=!0,a.firePixels(r.eventName))}}catch(e){n.e(e)}finally{n.f()}}}):clearInterval(u)},e)}function O(){m||v||a.disableTimeout||(v=setInterval(function(){y.getAdRemainingTime(function(e,t){t&&0<t&&(g=Math.ceil(t)),0<g&&(clearTimeout(m),window.playerLog("ad timeout interval "+g))})},3e3)),y.resumeAd(),c&&c.pause(),s.dispatchEvent(new CustomEvent("onUserMediaPlay"))}function R(){p=!0,m&&(window.playerLog("clear ad complete timeout"),clearTimeout(m)),v&&clearInterval(v),c&&c.pause()}function D(){y.pauseAd(),window.playerLog("pause ad by our code"),R(),s.dispatchEvent(new CustomEvent("onUserMediaPause"))}function M(){if(clearInterval(L),clearInterval(T),l.removeAttribute("data-rbc"),!a.isStopped()){a.setStopped(),clearTimeout(m),clearInterval(v);try{f.destroy()}catch(e){}c&&c.destroy();try{var e=document.getElementById(d);e&&e.parentNode.removeChild(e)}catch(e){}}}this.loadAd=function(e){(A=e.adObject?JSON.parse(e.adObject.linear.adParameters):null)&&void 0!==A.ct&&0<A.ct&&A.ct,window.playerLog("loading vpaid ad"),a=e,S=!1,l.muted?S=!0:0==l.volume&&(S=!0),n?(f=new B(t,l,null,{timeout:1e3*e.getLoadingContainerTimeout()})).loadAdUnit(n.mediaFile.src,x,d):(window.playerLog("stopping ad - no media file"),a.isStopped()||(M(),r.onLoadingContainerFailed(e)))},this.getConfunction(){y&&!a.isStopped()&&y.startAd()},this.skipAd=function(){y.skipAd(),a.isStopped()||(M(),r.onAdStopped())},this.getAdDuration=function(){return E},this.pauseAd=function(){D()},this.resumeAd=function(){O()},this.stopAd=function(){window.playerLog("stop ad"),y&&w&&(y.stopAd(function(){}),a.isStopped()||(M(),r.onAdStopped()))},this.isCurrentAdPaused=function(){return p},this.togglePlayPause=function(){p?(e.setPlayerPausedOnUserBehalf(!1),O()):(e.setPlayerPausedOnUserBehalf(!0),D())},this.setAdVolume=function(e){y.setAdVolume(e),o.setCurrentVolume(e)},this.resizeAd=function(e,t){y&&y.resizeAd(e,t,"normal")},this.isStopped=function(){return a.isStopped()},this.getAdRemainingTime=function(){return g},this.destroy=function(){M()}}function V(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function P(e,t,i){var n,a=null,r=e,o=i,s=o.getPlayerElement(),l=s.getElementsByClassName("media-video")[0],d=this,u=l.muted?0:l.volume,c=!1,h=!1!1,v={},y=[],b=null,w=!1;function E(){A()}function S(){window.playerLog("on video ad loaded"),w||(r.onAdLoaded(),a.setLoaded(!0),w=!0,clearInterval(b),l.removeEventListener("loadeddata",S),l.removeEventListener("loadedmetadata",S),r.getStartAdOnAdLoadedEvent()&then(fuetStopped(),r.onLoadingContainerFailed(a)}):c||(c=!0,r.onAdStarted()),(n=n||new N.a(d,null,null,o))&&n.play()}function T(){clearInterval(b),n&&n.destroy(),l.removeEventListener("volumechange",x),l.removeEventListener("error",I,!0),l.removeEventListener("canplaythrough",P),l.removeEventListener("load",P),l.removeEventListener("ended",O),l.removeEventListener("playing",R),l.removeEventListener("pause",D),l.removeEventListener("loadedmetadata",M),l.removeEventListener("click",B),l.removeEventListener("timeupdate",F)}function L(){h=!0,window.playerLog("vast remove container"),T(),a&&a.setStopped(),r.onAdStopped()}function C(){l.addEventListener("volumechange",x),l.addEventListener("error",I,!0),l.addEventListener("canplaythrough",P),l.addEventListener("load",P),l.addEventListener("ended",O),s.dispatchEvent(new CustomEvent("adComplete")),l.addEventListener("playing",R),l.addEventListener("pause",D),l.addEventListener("loadedmetadata",M),l.addEventListener("click",B)(a,y)}function k(){l.pause(),n&&n.pause()}function x(){var e=l.volume;null!=e&&(0<u&&0==e?a.firePixels("mute"):0==u&&0<e&&a.firePixels("unmute"),u=e)}function I(){T(),a.firePixels("error"),a.setStopped(),r.onLoadingContainerFailed(a)}function P(){}function O(){a.firePixels("complete"),window.playerLog("vast video ended"),l.removeEventListener("ended",O),L()}function R(){m||h?(h=!1,a.firePixels("resume")):(m=!0,o.getApiObservable().notify("adImpression",{widgetId:o.getWidgetId(),video:l}),s.dispatchEvent(new CustomEvent("adImpression")),a.setFiredImpression(!0),a.firePixels("creativeView"),a.firePixels("star.removeEventListener("loadedmetadata",M)}function B(){o.getApiObservable().notify("adClick",{widgetId:o.getWidgetId(),video:l}),s.dispatchEvent(new CustomEvent("adClick")),l.paused?(!0,A(),s.dispatchEvent(new CustomEvent("onUserMediaPlay")),n&&n.play()):(k(),s.dispatchEvent(new CustomEvent("onUserMediaPause")),a.firePixels("click"),a.clickThrough&&""!=a.clickThrough&&window.open(a.clickThrough)),n&&n.show()}function F(e){var t=Math.round(l.currentTime/l.duration*100);if(t&&0<t&&(75<t&&!f?(f=!0,a.firePixels("thirdQuartile")):50<t&&!p?(p=!0,a.firePixels("midpoint")):25<t&&!g&&(g=!0,a.firePixels("firstQuartile"))),y){var i,n=V(y);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.eventTime!=Math.round(l.currentTime)||v[r.eventName]||(v[r.eventName]=!0,a.firePixels(r.eventName))}}catch(e){n.e(e)}finally{n.f()}}}this.resizeAd=function(){},this.clearResources=function(){T()},this.destroy=function(){L()},this.isCurrentAdPaused=function(){return h},this.togglePlayPause=function(){h?(E(),o.setPlayerPausedOnUserBehalf(!1)):(k(),o.setPf(!0))},this.startAd=function(){c||w&&A()},this.isStopped=function(){return a.isStopped()},this.loadAd=function(e){a=e,t?(window.playerLog("load ad"),a.firePixels("available"),C(),l.src=t.mediaFile.src,l.src="",l.addEventListener("loadeddata",S),l.addEventListener("loadedmetadata",S),l.src=t.mediaFile.src,window.playerLog("load ad "+t.mediaFile.src),C(),b=setInterval(function(){3<=l.readyState&&S()},500),l.load()):(a.setStopped(),r.onLoadingContainerFailed(e))},this.showAd=function(){},this.pauseAd=function(){k()},this.stopAd=function(){c&&L()},this.skipAd=function(){a.firePixels("skip"),L()},this.setAdVolume=function(e){l.muted=unction(){return l.duration-l.currentTime},this.getContainerId=function(){return null},this.getAdDuration=function(){return l.duration},this.resumeAd=function(){E()}}var O=i(14),R=i(12),D=i(4),M=i(0);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var H="onNoAdStartedInBiddingSession",G="adError";function z(a,e,i){this.stopped=!1,this.adOffset=e?e.adOffset:null,this.adCount=e?e.adCount:null,this.ads=e?e.ads:null,this.advertisingLib=a;var o,t,n,s=this;this.currentVastQueries=0,this.currentVast=null;var l=i;function r(e){var t=new Date;t.setTime(t.getTime()+864e5),Object(D.c)("truvid_d",e,t,l.getDomain())}function d(e){var t=new Date,i=function(){var e=Object(D.a)("truvid_d");if(e)try{return e=JSON.parse(e)}catch(e){return null}}();if(i&&"object"===j(i)&&i[e.dtid]){if((t-new Date(i[e.dtid].t))/1e3/60/60<24)return i[e.dtid].r<e.fq&&(i[e.dtid].r++,r(i),!0);i[e.dtid]=null}return i&&"object"===j(i)&&!i[e.dtid]?(i[e.dtid]={r:1,t:t},r(i),!0):i&&"object"===j(i)?void 0:((i={})[e.dtid]={r:1,t:t},r(i),!0)}this.setCurrentTruvidAd=is.resetCurrentTruvidAd=function(){o=null},this.ListenToBiddingSessionEnds=function(e){t=e},this.listenToStartLoadingContainer=function(e){n=e},this.startBiddingSession=function(e){this.stopped||(this.currentVast=e,this.currentVastQueries++,Object(O.b)(e,this.onTruvidVastFetched,this.onTruvidVastError,null,this.setLastVastResponse))},this.getCurrentTruvidAd=function(){return o},this.abort=function(){this.stopped=!0},this.destroy=function(){o&&(window.playerLog("clearing container timeout"),o.clearLoadingContainerTimeout(),o.getAdManager()&&o.getAdManager().destroy()),s.aborted=!0},this.onAdFetch=function(){!s.stopped&&o&&(o.firePixels("win-response"),window.playerLog("on ad fetched"),s.loadMediaFile())},this.onAdError=function(){window.playerLog("on ad error load"),s.loadAdByPriority(),void 0!==this&&void 0!==this.currentVast&&i.getPlayerElement().dispatchEvent(new CustomEvent(G,{detail:{tagUrl:this.currentVast}}))},this.startLoadingLastAds=function()ction(e){s.ads=e.ads,s.loadAdByPriority()}.bind(this),this.onTruvidLoadingLastVastError)},this.setLastVastResponse=function(e){a.setLastVastAds(e)},this.onTruvidVastFetched=function(e){s.stopped||(s.ads=e.ads,s.ads&&s.loadis.onBiddingSessionEnds=function(){t&&t()},this.onTruvidLoadingLastVastError=function(){s.stopped||(s.stopped=!0,window.playerLog("truvid vast error"),s.onBiddingSessionEnds())},this.onTruvidVastError=function(e){s.currentVastQueries<2&&"no vasts"!=e?s.startBiddingSession(s.currentVast):"no vasts"==e&&(i.dispatchEvent(H),s.advertisingLib.setLoadVastOnNextBiddingSession(!0),s.onTruvidLoadingLastVastError())},this.onLoadingContainerFailed=function(e){e&&!e.isStopped()&&(window.playerLog("set stopping on ad"),e.getAdManager()&&e.getAdManager().destroy(),e.setStopped()),window.playerLog("on loading container failed - bidding session"),s.advertisingLib.stopUpdateCurrentContentTimeState(),e&&e.clearLoadingContainerTimeout(),o==e&&s.advertisingLib.setCurrentAdPlaying(!1),o==e&&s.loadMediaFile()},this.checkIfAdValidForCurrentSlot=function(e,t){var i=JSON.parse(e.linear.adParameters);if(void 0===i.off||0==i.off.length||-1==i.off.indexOf(t))return!1;var n=!1;if(void 0===i.reqv||1!=i.reqv||l.isAdOnlyAvailable()||1!=l.IsPlayerViewable()||(n=!0),void 0!==i.reqvao&&1==i.reqvao&&l.isAdOnlyAvailable()&&1==l.IsPlayerViewable()&&(n=!0),void 0===i.reqov||1!=i.reqov||l.isAdOnlyAvailable()||0!=l.IsPlayerViewable()||(n=!0),void 0!==i.reqovao&&1==i.reqovao&&l.isAdOnlyAvailable()&&0==l.IsPlayerViewable()&&(n=!0),n){if(i.mrdi&&0<i.mrdi&&!function(e){var t=a.getAdSessionInterval(),i=new Date;if(t)return t[e.dtid]?!((i-t[e.dtid])/1e3<e.mrdi)&&(t[e.dtid]=i,!0):(t[e.dtid]=i,!0)}(i))return!1;if(void 0!==i.fqt&&void 0!==i.fq&&0<i.fq){if("s"==i.fqt&&!function(e){var t=a.getAdSessionFQCounter(),i=t[e.dtid];return!(!t||"object"!==j(t))&&(i?i<e.fq&&(t[e.dtid]++,!0):(t[e.dtid]=1,!0))}(i))return!1;if("d"==i.fqt&&!this.advertisingLib.advertisingConfiguration.gdpr&&!d(i))return!1}}return n},this.loadAdByPriority=function(){if(!s.stopped){window.playerLog("on load ad by priority");for(var t=null;null==t&&0<s.ads.length;)if((t=s.ads.shift())&&void 0!==t.properties&&void 0!==t.properties.VASTAdTagURI&&""!=t.properties.VASTAdTagURI){if(!this.checkIfAdValidForCurrentSlot(t,this.adOffset)){t=null;continue}window.playerLog("requesting "+t.properties.VASTAdTagURI);var e=t.properties.VASTAdTagURI;s.advertisingLib.adMacros.InjectMacros(e).then(function(e){t.linear.tracking.track("win"),window.playerLog("set current truvid ad"),(o=new R.a(t,e,s.advertisingLib.getAllowedContainers())).requestMediaFiles(s.advertisingLib.getRequestWidth(),s.advertisingLib.getRequestHeight(),s.onAdFetch,s.onAdError),t.linear.tracking.track("request")}).catch(function(e){window.playerLog("error macros"),window.playerLog(e)})}else if(t&&t.linear)try{if(!this.checkIfAdValidForCurrentSlot(t,this.adOffset)){t=null;continue}t.linear.tracking.track("win"),(o=new R.a(t,null,s.advertisingLib.getAllowedContainers())).getMediaFilesFromAdResponse(t,s.advertisingLib.getRequestWidth(),s.advertisingLib.getRequestHeight()),o.mediaFiles.length?"openrtb"==o.getAdType()?a.getPrebidManager().init().then(function(){a.getPrebidManager()playerLog("error loading prebid manager")}):s.advertisingLib.adMacros.InjectMacros(o.mediaFiles[0].mediaFile.src).then(function(e){o.mediaFiles[0].mediaFile.src=e,s.loadMediaFile()}).catch(function(e){Object(M.a)("errorInjectMacrosLinear",{wid:i.getWidgetId()},e),console.log("error macros"),console.log(e)}):s.loadMediaFile()}catch(e){Object(M.a)("errorLoadingLinear",{wid:i.getWidgetId()},e)}null==t&&(i.dispatchEvent(H),s.onBiddingSessionEnds())}},this.loadTruvidMediaFile=function(e,t){if(e.isVAST()){var i=new P(s.advertisingLib,e,l);return window.playerLog("loading vast container "+o.getDemandTagId()),o.setAdManager(i),a.startUpdatingCurrentContentTimeState(),i.loadAd(o),!0}if(e.isVPAID()){window.playerLog("loading vpaid container "+o.getDemandTagId());var n=new x(s.advertisingLib,e,l);return o.setAdManager(n),a.startUpdatingCurrentContentTimeState(),n.loadAd(o),!0}if(e.isIMA()){var r=s.advertisingLib.getImaAdManager();return o.setAdManager(r),window.playerLog("loading ima container"+o.getDemandTagId()),a.startUpdatingCurrentContentTimeState(),r.loadAd(o,e),!0}},this.startLoadingContainer=function(){if(!s.stopped){var e=o.shiftPrioritizedMediaFiles();if(e){var t=window.setTimeout(s.BeforeLoadingContainerFailed,1e3*o.getLoadingContainerTimeout(),o);return o.setLoadingContainerTimeoutId(t),n&&n(),s.loadTruvidMediaFile(e,t)}}return!1},this.BeforeLoadingContainerFailed=function(e){window.playerLog("timeout reached on loading container"),s.onLoadingContainerFailed(e)},this.loadMediaFile=function(){if(!s.stopped&&o){window.playerLog("load media file");for(var e=!1;!e&&o.mediaFiles.length;)window.playerLog("start loading container"),void 0!==o.demandTagId&&window.playerLog("demand tag id: "+o.demandTagId),e=s.startLoadingContainer();0==e&&(o.mediaFiles.length?s.loadMediaFile():(window.playerLog("reset current truvid ad - going to load ad by priority"),o=null,s.loadAdByPriority()))}else window.playerLog("reset current truvid ad - going to load ad by priority"),o=null,s.loadAdByPriority()}}},function(e,t,i){"use strict";i.d(t,"e",function(){return s}),i.d(t,"a",function(){return a}),i.d(t,"d",function(){return l}),i.d(t,"b",function(){return d}),i.d(t,"c",function(){return u});var n=i(1);function r(e){this.widget=e,this.wasOutOfView=!1,this.activateBonusSlot=!1,this.onVideoTimeUpdateBinding=this.onVideoTimeUpdate.bind(this),this.onViewabilityChangeBinding=this.onViewabilityChange.bind(this),this.widget.player.subscribe(n.m,this.onVideoTimeUpdateBinding),this.widget.player.subscribe(n.j,this.onViewabilityChangeBinding)}r.prototype.onViewabilityChange=function(e){e.detail.isPlayerViewable?this.wasOutOfView&&!this.widget.player.IsFloaterOpen()&&(this.activateBonusSlot=!0):this.wasOutOfView=!0},r.prototype.onVideoTimeUpdate=function(e){this.activateBonusSlot&&(this.widget.adSlots?this.widget.player.IsPlayerViewable()&&this.widget.player.canStartBiddingSession()&&1<e.detail.currentTime&&!this.widget.player.isAdPlaying()&&(this.widget.adSlots.isPreroll?this.widget.adSlots.PushSlot({type:l,offset:e.detail.currentTime}):this.widget.adSlots.midrollCount&&"c"==this.widget.adSlots.midrollType?this.widget.adSlots.PushSlot({type:d,offset:e.detail.currentTime}):this.widget.adSlots.midrollInterval&&"d"==this.widget.adSlots.midrollType?this.widget.adSlots.PushSlot({type:d,offset:e.detail.currentTime}):this.widget.adSlots.isPostroll&&this.widget.adSlots.PushSlot({type:u,offset:e.detail.currentTime}),this.widget.player.unsubscribe(n.m,this.onVideoTimeUpdateBinding),this.widget.player.unsubscribe(n.j,this.onViewabilityChangeBinding)):(this.widget.player.unsubscribe(n.m,this.onVideoTimeUpdateBinding),this.widget.player.unsubscribe(n.j,this.onViewabilityChangeBinding)))};var s="setSlotsEvent";function a(e){this.widget=e,this.slotsOffsets=[],this.slotsOffsetsWithoutModifications=[],this.isPreroll=!1,this.midrollCount=0,this.midrollType="c",this.midrollInterval=0,this.isPostroll=!1,this.widget.widgetStaticConfig.aid?(this.isPreroll=!0,this.midrollCount=1,this.midrollType="c"):(this.isPreroll=1==this.widget.widgetStaticConfig.aip,this.midrollType=this.widget.widgetStaticConfig.amt,"d"==this.midrollType?this.midrollInterval=this.widget.widgetStaticConfig.amd:(this.midrollCount=this.widget.widgetStaticConfig.am||0,this.midrollType="c"),this.isPostroll=1==this.widget.widgetStaticConfig.aipr),this.bonusSlot=new r(e),this.widget.player.subscribe(n.a,this.onNewVideo.bind(this)),this.widget.player.subscribe(n.h,this.onPlayerReady.bind(this))}var l=1,d=2,u=3;a.prototype.IsSlotAvailable=function(e){if(0==this.slotsOffsets.length)return null;for(var t=0;t<this.slotsOffsets.length&&!(this.slotsOffsets[t].offset>e+5);t++)if(Math.abs(this.slotsOffsets[t].offset-e)<=5)return this.slotsOffsets[t];return null},a.prototype.getLastSlotByOffset=function(e){if(!this.slotsOffsetsWithoutModifications.length)return null;for(var t=null,i=0;i<this.slotsOffsetsWithoutModifications.length&&this.slotsOffsetsWithoutModifications[i].offset<=e;i++)t=this.slotsOffsetsWithoutModifications[i];return t},a.prototype.RemoveSlot=function(e){for(var t=0;t<this.slotsOffsets.length;t++)this.slotsOffsets[t].offset==e&&this.slotsOffsget.player.getDuration();this.setSlots(e)},a.prototype.setSlots=function(e){if(this.slotsOffsets=[],this.isPreroll)for(var t=0,i=0;i<this.widget.numberOfPrerolls;i++,t+=4)this.slotsOffsets.push({type:l,offset:t});if(0<this.midrollCount&&"c"==this.midrollType)for(var n=1;n<=this.midrollCount;n++){var r=Math.round(e*(n/(this.midrollCount+1)));this.slotsOffsets.push({type:d,offset:r})}else if("d"==this.midrollType&&0<this.midrollInterval){this.midrollInterval<10&&(this.midrollInterval=10);for(var a=this.isPostroll?e-6:e,o=this.midrollInterval;o<a;o+=this.midrollInterval)this.slotsOffsets.push({type:d,offset:o})}this.isPostroll&&this.slotsOffsets.push({type:u,offset:e}),this.slotsOffsetsWithoutModifications=JSON.parse(JSON.stringify(this.slotsOffsets)),this.widget.playe=e.detail.fileToPlay.dur;this.setSlots(t)},a.prototype.IsPreroll=function(){rlot=function(e){this.slotsOffsets.push(e)}},function(e,t,i){"use strict";function n(e,t,i,n){this.playerObj=n,this.playerElement=this.playerObj.getPlayerElement(),this.controllerId="truvid_cnt_controller"+Math.floor(1e6*Math.random()),this.adControllerTimerInterval=null,this.adContainer=e,this.containers=[],this.showFunc=this.show.bind(this),this.hideFunc=this.hide.bind(this),this.allowSkip=i&&void 0!==i.allowSkip&&1==i.allowSkip;var r=document.createElement("div"),a=document.createElement("style"),o="opacity 0.2s ease-in-out";r.id=this.controllerId,r.innerHTML+='<button class="controller-playPause brpBtn sprite-background" type="button" title="play">Play</button><button class="controller-volume brpBtn sprite-background" type="button" title="volume">volume</button>',this.allowSkip&&(r.innerHTML+='<button class="controller-skip brpBtn" type="button" title="skip">Skip</button>'),r.innerHTML+='<span class="controller-title">Ad</span>';var s,l="#"+this.playerElement.id+" #"+r.id+" { overflow:hidden;position: absolute; display: none;bottom:0px; z-index: 50000; width: 99px; background-color: rgba(15, 20, 22, 0.2); color: #FCFCFC; font-size: 10pt !important; text-align: left; height: 38px;";if(n.isMobile()&&(l+="-webkit-transition: "+o+"; -moz-transition: "+o+"; -o-transition; "+o+"; transition: "+o+"; -ms-transition: "+o+";"),l+="}#"+this.playerElement.id+" #"+r.id+" .controller-playPause { background-position: -48px -8px; height: 22px; margin-left: 20px; margin-right: 4px; transition: none; float: none;margin-top:10px; }#"+this.playerElement.id+" #"+r.id+" .controller-volume { background-position: -"+(0==this.playerObj.getCurrentVolume()?"115":"100")+"px -10px; line-height: normal; margin-right: 12px; margin-left: 12px; transition: none; float: none; margin-top:10px; }",l+="#"+this.playerElement.id+" #"+r.id+">span { float: right; line-height: 22px; font-size: 10pt !important; color: #FCFCFC; font-family: arial; margin-top: 10px; }#"+this.playerElement.id+" #"+r.id+" .controller-title { margin-right: 12px; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; vertical-align: inherit; cursor: default; }#"+this.playerElement.id+" #"+r.id+" .controller-skip { text-indent: 0;width:25px;color:#fff;}",a.innerHTML=l,r.appendChild(a),this.playerElement.appendChild(r),this.containers.push(r),this.adContainer.getContainerId()?this.containers.push(document.getElementById(this.adContainer.getContainerId())):this.containers.push(this.playerElement),t)for(var d=0;d<t.length;d++)this.containers.push(t[d]);if(this.allowSkip&&(document.getElementById(this.controllerId).style.width="142px"),n.isMobile())this.show();else for(s=0;s<this.containers.length;s++)this.containers[s]&&(this.containers[s].addEventListener("mousemove",this.showFunc),this.containers[s].addEventListener("mouseenter",this.showFunc),n.isMobile()||this.containers[s].addEventListener("mouseleave",this.hideFunc));r.getElementsByClassName("controller-playPause")[0].addEventListener("click",function(){this.adContainer.isCurrentAdPaused()?this.playerElement.dispatchEvent(new CustomEvent("onUserMediaPlay")):this.playerElement.dispatchEvent(new CustomEvent("onUserMediaPause")),this.adContainer.togglePlayPause()}.bind(this)),r.getElementsByClassName("controller-volume")[0].addEventListener("click",function(){var e=0==n.getCurrentVolume()?1:0;this.adContainer.setAdVolume(e),r.getElementsByClassName("controller-volume")[0].style.backgroundPosition="-"+(0==e?"115":"100")+"px -10px"}.bind(this)),this.allowSkip&&r.getElementsByClassName("conick",function(){this.adContainer.skipAd()}.bind(this))}i.d(t,"a",function(){return n}),n.prototype.hide=function(){document.getElementById(this.controller(this.controllerId).style.display="block"},n.prototype.pause=function(){var e=this.playerElement.getElementsByClassName("controller-playPause");e.length&&(e[0].style.backgroundPosition="-82px -8px")},n.prototype.play=function(){this.playerElement.getElementsByClassName("controller-playPause")[0].style.backgroundPosition="-48px -8px"},n.prototype.setVolume=function(e){this.playerElement.getElementsByClassName("controller-volume")[0].style.backgroundPosition="-"+(0==e?"115":"100")+"px -10px"},n.prototype.destroy=function(){for(var e=0;e<this.containers.length;e++)this.containers[e].removeEventListener("mousemove",this.showFunc),this.containers[e].removeEventListener("mouseenter",this.showFunc),this.playerObj.isMobile()||this.containers[e].removeEventListener("mouseleave",this.hideFunc);var t=document.getElementById(this.controllerId);t&&t.parentNode.removeChild(t),clearInterval(this.adControllerTimerInterval)}},function(e,t,i){"use strict";i.d(t,"a",function(){return a});var l=i(16),r=i(14),n=i(0);function a(e,t,s){var i,o=this;this.adObject=e,this.tagUrl=t,e&&(i=JSON.parse(e.getLinear().adParameters)),this.demandTagId=i?i.dtid:null,this.type=i?i.dt:null,this.priority=i?i.priority:null,this.disableTimeout=!!i&&(void 0!==i.dist&&1==i.dist),this.mediaFiles=[],this.loadingContainerTimeout=i?i.t:8,this.loadingContainerTimeoutId=null,this.adParameters=i,this.adManager=null,this.stopped=!1,this.tracking=null,this.clickThrough=null,this.isLoaded=!1,this.isPrebid=!1,this.firedImpression=!1,this.numberOfTimesAdSkipped=0,this.firedRequestPixel=!1,this.StoppedTrackingViewability=!1,s&&(this.allowedContainers=s.slice(0)),this.isAdOnly=function(){return void 0!==this.adParameters.reqvao&&1==this.adParameters.reqvao||void 0!==this.adParameters.reqovao&&1==this.adParameters.reqovao},this.setStoppedTrackingViewability=function(){this.StoppedTrackingViewability=!0},this.getStoppedTrackingViewability=function(){return this.StoppedTrackingViewability},this.getNumberOfTimesAdSkipped=function(){return this.nu=function(){this.numberOfTimesAdSkipped++},this.setLoaded=function(e){this.isLoaded=e},this.setIsPrebid=function(e){this.isPrebid=e},this.getIsLoaded=function(){return this.isLoaded},this.requestMediaFiles=function(e,t,i,n){this.tracking=this.adObject?this.adObject.linear.tracking:null,this.playerWidthOnRequest=e,this.playerHeightOnRequest=t,this.onTagFetched=i,this.onTagError=n,window.playerLog("fetch "+this.tagUrl),Object(r.b)(this.tagUrl,this.onTagVastFetch,this.onTagVastError,this.adObject)},this.firePixels=function(e){this.tracking.track(e),window.playerLog("notifyPixelsFire",e)},this.fireImpressionPixel=function(e,t){var i={};i.slotNumber=t.getCurrentSlotNumberMacro(),this.tracking.track(e,i),window.playerLog("notifyPion(){this.tracking.ad.impressionSent(!1)},this.fireViewability=function(){this.firedViewabilityPixel||(this.firedViewabilityPixel=!0,this.firePixquestPixel=!0,this.firePixels("request"))},this.onTagVastFetch=function(e){try{if(e.ads.length)for(var t=0;t<e.ads.length;t++){var i=e.ads[t];o.getMediaFilesFromAdResponse(i,o.playerWidthOnRequest,o.playerHeightOnRequest)}o.onTagFetched&&"function"==typeof o.onTagFetched&&o.onTagFetched(this)}catch(e){o.onTagVastError()}},this.getMediaFilesFromAdResponse=function(e,t,i){var n=e.getLinear();if(void 0!==n.tracking?o.tracking=n.tracking:o.tracking=null,void 0!==n.clickThrough?o.clickThrough=n.clickThrough:o.clickThrough=null,n)for(var r=function(e,t,i){var n=s,r=[];for(;n.length;){var a=n.shift(),o=e.getBestMedia({width:t,height:i},a);o&&r.push(new l.a(a,o,e.adParameters))}return r}(n,t,i),a=0;a<r.length;a++)o.mediaFiles.push(r[a])},this.onTagVastError=function(e,t){if(o.onTagError&&"function"==typeof o.onTagError){if(t&&Array.isArray(t)&&0<t.length)for(var i=0;i<t.length;i++)Object(n.b)(t[i]);o.onTagError(this)}},this.getDemandTagId=function(){return this.demandTagId},this.getLoadingContainerTimeout=function(){return this.loadingContainerTimeout},this.clearLoadingContainerTimeout=function(){0<this.loadingContainerTimeoutId&&(window.playerLog("clearing loading container timeout "+this.loadingContainerTimeoutId),clearTimeout(this.loadingContainerTimeoutId))},this.isStopped=function(){return this.stopped},this.setStopped=function(){this.stopped=!0},this.setFiredImpression=function(e){this.firedImpression=e},this.hasFiredImpression=function(){return this.firedIfunction(){return this.mediaFiles.shift()},this.setLoadingContainerTimeoutId=function(e){this.loadingContainerTimeoutId=e},this.setAdManager=function(e){this.adManager=e},this.getAdManager=function(){return this.adManager},thieturn n}),i.d(t,"b",function(){return r})},function(e,t,i){"use strict";i.d(t,"b",function(){return v}),i==Symbol.prototype?"symbolt:(a=function(){return new XMLHttpRequest},o.toString=function(){return a.toString()},o),onBeforeSend:fnction o(){return a.apply(this,arguments)}function v(e,r,a,o,s){var t="Reached abort limit of ("+p.defaultVASTAbortLimit+") wrappers.";a=a||function(){},(!o&&0===p.defaultVASTAbortLimit||o&&0===o.abortLimit)&&(a(new Error(t))||!0)||function e(t,i,n,r,a){var o=p.XMLHttpRequest();o.onreadystatechange=function(){4===o.readyState&&(200===o.status?null!==o.responseXML?n(o.responseXML,i):r(o,i):a?r(o,i):e(t,i,n,r,!0))},o.open("GET",t,!0),a||(o.withCredentials=!0),p.onBeforeSend(t,i,o),o.send(null)}(e,null,function(e){try{s&&"function"==typeof s&&s(e),new d(e,r,a,o)}catch(e){for(var t=e.stack.split(/\n/),i=0;i<t.length;i++){var n=t[i];n=(n=n.replace("[arguments not available]","")).replace(/http:\/\/.*?resources\//,""),window.playerLog("\t"+n)}a()}},function(e){a(e)})}function sfset:a,event:r};this.events[r].push(o)}}}}function d(e,t,i,n){this.ads=[],this.onAdsAvailable=t,this.onAdsError=i,this.onReceivedErrorCounter=0;var r=e.getElementsByTagNameNS("*","Ad"),a=this;if(0!==r.length){var o=function(e){a.onReceivedErrorCounter++,a.onReceivedErrorCounter!==r.length||i(e)};if(0==e.getElementsByTagName("VASTS").length)for(var s=0;s<r.length;s++){if((f=new y(this,r.item(s),n||null)).isEmpty())o();else if(this.ads.push(f),!f.hasData()||f.hasSequence()&&!f.isNumber(1)){var l,d=r.item(s).getElementsByTagName("Wrapper").item(0),u=d.getElementsByTagName("VASTAdTagURI");if(0===u.length){o();continuelable;r.onAdsAvailable=null,t.call(r,e)}}}(f,"true"===d.getAttribute("allowMultipleAds"),a),v(u,l,o,f)}else if(t){var c=this.onAdsAvailable;this.onAdsAvailable=null,c.call(this,this)}}else{var h=e.getElementsByTagName("VASTS")[0].getElementsByTagName("VAST");for(s=0;s<h.length;s++){var f;(f=new y(this,r.item(s),n||null)).isEmpty()?o():this.ads.push(f)}if(a.onAdsAvailable){c=a.onAdsAvailable;a.onAdsAvailable=null,c.call(a,a)}}}else{var p=[],g=e.getElementsByTagNameNS("*","Error");if(g&&0<g.length)for(var m=0;m<g.length;m++)p[m]=g[m].textContent;i("no vasts",p)}}function y(e,t,i,n){var r,a;if(this.vast=e,this.pod=e,this.parentAd=i,this.onAdAvailable=n,this.abortLimit=i?0<i.abortLimit?i.abortLimit-1:i.abortLimit:p.defaultVASTAbortLimit,this.sequence=null,this.hasContent=!0,this.loaded=!0,this.linear=null,this.impressions=[],this.errors=[],(this.currentPodAd=this).sentImpression=!1,this.properties={},null!==this.parentAd){var o=this.parentAd;for(a in o.properties)o.properties.hasOwnProperty(a)&&(this.properties[a]=o.properties[a])}t.hasAttribute("sequence")&&(this.sequence=parseInt(t.getAttribute("sequence"),10));var s=t.getElementsByTagName("InLine");if(0!==s.length||(this.loaded=!1,0!==(s=t.getElementsByTagName("Wrapper")).length)){for(var l=(s=s.item(0)).firstChild;null!==l;){if(1===l.nodeType)switch(l.tagName){case"Creatives":case"InLine":case"Wrapper":case"Impression":case"Error":break;default:this.properties[l.tagName]=l.textContent.replace(/^\s*|\s*$/g,"")}l=l.nextSibling}var d=s.getElementsByTagName("Impression");for(r=0;r<d.length;r++)this.impressions.push(d.item(r).textContent.replace(/\s/g,""));var u=s.getElementsByTagName("Error");for(r=0;r<u.length;r++)this.errors.push(u.item(r).textContent.replace(/\s/g,""));var c=s.getElementsByTagName("Creatives");if(0!==c.length)for(c=c.item(0).getElementsByTagName("Creative"),r=0;r<c.length;r++){for(var h=c.item(r).firstChild;null!==h&&"Linear"!=h.tagName;)h=h.nextSibling;if(null!==h&&"Linear"==h.tagName){var f=new g(this,h);this.linear?this.linear.augment(f):(this.linear=f,i&&this.linear&&this.linear.tracking&&void 0!==this.linear.tracking&&i&&i.linear&&void 0!==i.linear&&void 0!==i.linear.tracking&&this.linear.tracking.augment(i.linear.tracking))}}}else this.hasContent=!1}function c(e,t){this.root=t,this.clickThrough=null,this.tracking=new l(t,e)}function g(e,t){var i;c.call(this,e,t),this.mediaFiles=[],this.clickThrough=null,this.duration=null,this.adParameters=null;var n=t.getElementsByTagName("VideoClicks");if(n.length){var r=(n=n.item(0)).getElementsByTagName("ClickThrough");for(r.length&&(this.clickThrough=r.item(0).textContent.replace(/\s/g,"")),r=n.getElementsByTagName("ClickTracking"),i=0;i<r.length;i++)this.tracking.addClickTracking(r.item(i).textContent.replace(/\s/g,""))}var a=t.getElementsByTagName("Duration");a.length&&(this.duration=this.timecodeFromString(a.item(0).textContent.replace(/\s/g,"")));var o=t.getElementsByTagName("AdParameters");o.length&&(this.adParameters=o.item(0).textContent);var s=t.getElementsByTagName("MediaFiles");if(s.length)for(s=s.item(0).getElementsByTagName("MediaFile"),i=0;i<s.length;i++){for(var l=s.item(i),d={},u=0;u<l.attributes.length;u++)d[l.attributes[u].name]=l.attributes[u].value;d.src=s.item(i).textContent.replace(/\s/g,""),this.mediaFiles.push(d)}}l.prototype.copy=function(e){var t=Object.create(l.prototype);for(var i in t.events={},this.events)this.events.hasOwnProperty(i)&&(t.events[i]=[].concat(this.events[i]));return t.ad=e,t},l.prototype.finger=function(e){if(e=Object(n.a)(e),"object"!==("undefined"==typeof window?"undefined":r(window))||"undefined"==typeof Image||"undefined"!=typeof buster){var t=p.XMLHttpRequest();t.open("get",e,!0),p.onBeforeSend(e,"tracking-pixel",t),t.send()}el(e.events[t]):this.events[t]=vents.click.push(t):this.events.click=[t]},l.prototype.getEventsOfTypes=function(e){var t=[],i=-1<e.indexOf("progress");for(var n in this.events)this.events.hasOwnProperty(n)&&(-1<e.indexOf(n)||i&&0===n.indexOf("progress-"))&&(t=t.concat(this.events[n]));return t},l.prototype.track=function(e,t){if(this.events[e]&&0!==this.events[e].length){var i,n=[].concat(this.events[e]),r={};for(var a in t)t.hasOwnProperty(a)&&(r["["+a+"]"]=encodeURIComponent(t[a]));if("impression"==e)for(var o=this.ad;null!==o&&!o.hasSentImpression();){for(o.impressionSent(),i=0;i<o.impressions.length;i++)n.push({url:o.impressions[i]});o=o.parentAd}if("error"==e)for(i=0;i<o.errors.length;i++)n.push({url:o.errors[i]});for(i=0;i<n.length;i++){for(var s=n[i].url,l=""+parseInt(99999999*Math.random(),10);8!==l.length;)l="0"+l;for(a in r["[CACHEBUSTING]"]=l,r)r.hasOwnProperty(a)&&(s=s.replace(a,r[a]));this.finger(s)}}},d.prototype.getAd=function(e){var t=null;if(e&&(t=this.getAdWithSequence(1))&&!t.current().isEmpty())return t.current();for(var i=0;i<this.ads.length;i++)if(!this.ads[i].hasSequence()&&!this.ads[i].current().isEmpty())return this.ads[isNumber(e))return tes.hasOwnProperty(e)?this.properties[e]:t},y.prototype.onLoaded=function(e,t){this.pod=e,this.currentPodAd=e.getAd(t),this.currentPodAd.isEmpty()||(this.loaded=!0,this.onAdAvailable&&this.onAdAvailable.call(this,this))},y.prototype.hasSentImpression=function(){return this.sentImpression},y.prototype.impressionSent=function(){var e=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.sentImpression=e},y.prototype.current=function(){retumber=function(e){return ce=function(){returnisEmpty=function(){return!this.hasContent},y.prototype.hasData=function()hSequence(this.sequence+1).current():null},y.prototype.getLinear=function(){return this.linear},c.prototype.track=function(e,t,i){this.tracking.track(e,{CONTENTPLAYHEAD:this.timecodeToString(t),%60)).replace(/(^|:|\.)0(\d{2})ubstr(3,2),10)+parseInt(e.substr(6,2),10)},c.prototype.getClickThrough=function(){returon":i=this.timecodeFromString(i)}return i},(g.prototype=Object.create(c.prototype)).getDuration=function(){return this.duration},g.prototype.getAdParameters=function(){opy=function(e){return new g(e,this.root)},g.prototype.augment=function(e){this.adParameters=e.adParameters||this.adParameters,this.duration=e.duration||this.duration,this.mediaFiles=e.mediaFiles.slice(0)||this.mediaFiles.slice(0),this.tracking.augment(e.tracking),this.clickThrough=e.clickThrough||this.clickThrough},g.prototype.getAllMedias=function(){return this.mediaFiles},g.prototype.getBestMedia=function(e,t){for(var i=Number.POSITIVE_INFINITY,n=-1,r=0;r<this.mediaFiles.length;r++)if(this.mediaFiles[r].type==t){var a=this.mediaFiles[r],o=Math.sqrt(Math.pow(e.width-a.width,2)+Math.pow(e.height-a.height,2));if(o<i)i=o,n=r;else if(o===i){var s=this.mediaFiles[n],l=s.bitrate||s.maxBitrate,d=a.bitrate||a.maxBitrate;d&&!l?n=r:e.bitrate&&l&&d?Math.abs(d-e.bitrate)<Math.abs(l-e.bitrate)&&(n=r):l<d&&(n=r)}}if(-1!==n)return this.mediaFiles[n];for(r=0;r<this.mediaFiles.length;r++)if(this.mediaFiles[r].type==t)return this.mediaFiles[r];return null};var u=["start","firstQuartile","midpoint","thirdQuartile","complete","progress","skip"];g.prototype.getTrackingPoints=function(){var e=this.tracking.getEventsOfTypes(u),t=[],i=null;void 0!==this.duration&&this.duration&&(i=this.duration);for(var n=0;n<e.length;n++){var r,a={event:e[n].event,offset:null,percentOffset:null};switch(e[n].event){case"start":a.percentOffset="0%",a.offset=0;break;case"firstQuartile":a.percentOffset="25%",i&&(a.offset=.25*i);break;case"midpoint":a.percentOffset="50%",i&&(a.offset=.5*i);break;case"thirdQuartile":a.percentOffset="75%",i&&(a.offset=.75*i);break;case"complete":a.percentOffset="100%",i&&(a.offset=i);break;case"skip":-1===(r=this.attribute("skipoffset",0)).indexOf("%")?(a.offset=c.prototype.timecodeFromString(r),i&&(a.percentOffset=a.offset/i*100+"%")):(a.percentOffset=r,i&&(a.offset=i*parseInt(a.percentOffset,10)/100));break;default:if(!(r=e[n].offset))continue;"start"===r&&(r="0%"),"end"===r&&(r="100%"),-1===r.indexOf("%")?(a.offset=c.prototype.timecodeFromString(r),i&&(a.percentOffset=a.offset/i*100+"%")):(a.percentOffset=r,i&&(a.offset=i*parseInt(a.percentOffset,10)/100))}t.push(a)}return t.sort(function(e,t){return e.offset&&t.offset?e.offset-t.offset:e.percentOffset&&t.percentOffset?parseInt(e.percentOffse"adonly",a="pause",o=864e5,s="truvid_oov"},function(e,t,i){"use strict";function n(e,t,i){this.type=e,this.mediaFile=t,this.adParameters=i,this.isVAST=function(){return"video/mp4"==this.type},this.isIMA=function(){return"google/ima"==this.type},this.isVPAID=function(){return"applicotX=function(){return"spotsdk"==this.type}}i.d(t,"a",function(){return n})},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var l=i(0);var u=i(1),d=i(6);var c=i(2),h=i(9);function f(e,t,i,n){var r=n.lengthInSeconds,a=void 0===r?null:r,o=n.adSlots,s=void 0===o?null:o,l=n.passbackAfterFirstBiddingWithNoAds,d=void 0!==l&&l;this.widget=e,this.passbackCallback=i,this.lengthInSeconds=a,this.passbackCode=t,this.adSlots=s,null!=this.passbackCode&&null!=this.lengthInSeconds&&0!=this.lengthInSeconds&&null!=this.adSlots&&0!=this.adSlots&&(this.passbackTimeout=null,this.adSlotsCounter=0,this.passbackAfterFirstBiddingWithNoAds=d,0<this.lengthInSeconds&&this.widget.player.subscribe(u.d,function(){clearTimeout(this.passbackTimeout),this.passbackTimeout=setTimeout(function(){this.renderPassback()}.bind(this),1e3*this.lengthInSeconds)}.bihis.passbackAfterFirstBiddingWithNoAds=!1}.bind(this)),this.widget.player.subscribe(h.c,function(){this.adSlotsCounter++,(this.adSlots&&this.adSlotsCounter>=this.adSlots||this.passbackAfterFirstBiddingWithNoAds)&&this.renderPassback()}.bind(this)))}function n(e,t,i,n,r,a){var o;if(this.onPassbackCallback=null,this.floaterOOVTimesShown=0,this.floaterOOVTimesShownHourly=0,this.shown=!1,this.loadPlayer=!0,this.startHidden=!1,this.playInitMethod=null,this.pauseOnHiddenTab=!1,this.autoSkipTimeToAutoSkip=null,this.startAdOnAdLoadedEvent=!0,this.windowToListenToEvents=window,this.serverResponse=e,this.prebidVastParameters=null,this.widgetStaticConfig=t,this.playerRequest=i,this.inFriendlyIframe=i.fiframe,this.isMobile=Object(d.a)(e.m),this.playerElement=a,this.isResponsive=d.b.call(this,t.ir,t.irm),d.c.call(this,t.w,t.wm,t.h,t.hm),function(e,t){this.playInitMethod=this.isMobile?t||"autoplay":e||"autoplay"}.call(this,t.pim,t.pimm),d.d.call(this,e.geo),this.apiObservable=r,this.playerScript=n,this.dynamicPixelPath="https://p.trvdp.com/p.gif",this.pixelPath="https://p.trvdp.com/pixel.gif",this.vastPath="https://stg.truvidplayer.com/v"+e.v+"/v.php",this.version=e.v,this.subUserId=i.sid,this.widgetType=t.wt,this.widgetId=i.wid,this.shown=!1,this.pageUrl=i.purl,this.adId=e.cid,this.domain=e.d,this.isLoop=null==t.lp||t.lp,this.repeatCounter=t.rpc,this.mute=null==t.m||t.m,this.browser=e.b,this.isMobile=e.m,this.floaterCloseButtonPosition=null!=t.cbp?t.cbp:"left",this.debugMessages=t.d,this.ip=e.ip||"",this.userAgent=navigator.userAgent||"",this.pixels=e.p,this.opportunityPixel=Object(l.c)(this.pixels,"op",this.pixelPath),this.playerLoadPixel=Object(l.c)(this.pixels,"pl",this.pixelPath),this.isResponsive=d.b.call(this,t.ir,t.irm),this.geoLocation={},this.geoLocation.lat=e.lat,this.geoLocation.long=e.lng,this.osFamily=e.osf,this.osVersion=e.osv,this.isNativeClickOpensNewWindow=t.nnw,this.isABTestingActive=e.isab,this.useCustomCSS=t.ccss,this.isFullscreen=t.f,this.playlistData=e.c,this.vastParameters=e.vt,this.fia=t.fia,this.playOnlyMp4=t.pomp4,this.isPreroll=!1,this.numberOfPrerolls=null!==(o=t.apc)&&void 0!==o?o:1,this.midrollCount=0,this.midrollType=null,this.midrollInterval=0,this.isPostroll=!1,this.autoplay=!0,this.floaterSettings=null,this.allowBiddingOnVideoChangeEvent=!0,this.startContentAfterBiddingSessionEnds=!0,this.sellersJsonId=void 0!==e.sj&&void 0!==e.sj.id?e.sj.id:"",this.isMobile?d.e.call(this,t.pcm,t.pwm,t.phm,t.plm,t.pasm,t.pofbm):d.e.call(this,t.pc,t.pw,t.ph,t.pl,t.pas,t.pofb),void 0!==t.aa&&1==t.aa||void 0===t.aa){this.passback=new f(this,this.onPassbackCallback,this.passbackCode,{lengthInSeconds:this.passbackLength,adSlots:this.passbackAdSlots,passbackAfterFirstBiddingWithNoAdsassbackAfterFirstBidding:this.passbackOnFirstBidding}),t.aid?(this.isPreroll=!0,this.midrollCount=1,this.midrollType="c"):(this.isPreroll=1==t.aip,this.midrollType=t.amt,"d"==this.midrollType?this.midrollInterval=t.amd:(this.midrollCount=t.am||0,this.midrollType="c"),this.isPostroll=1==t.aipr);var s={isPreroll:this.isPreroll,midrollType:this.midrollType,midrollInterval:this.midrollInterval,midrollCount:this.midrollCount,isPostroll:this.isPostroll,gdpr:e.g,isClickToPlay:"click_to_play"===this.playInitMethod};this.prebidVastParameters&&(s.prebidVastParameters=this.prebidVastParameters),this.ads=s}else this.ads=null;this.player=new u.b}f.prototype.renderPassback=function(){clearTimeout(this.passbackTimeout),this.widget.player.DestroyPlayer(),this.passbdeoPlayerReady&&this.onVideoPlayerReady()},n.prototype.getVastPath=function(e){var t="[videoUrl]",i="[videoId]",n=this.vastPath+e+"&ver="+this.version+"&adid="+this.adId+"&videoUrl="+t+"&height=[height]&width=[width]&pageHref="+encodeURIComponent(this.pageUrl)+"&videoId="+i+"&d="+this.domain+"&wid="+this.widgetId+"&suid="+this.subUserId+"&env_browser="+this.browser;return this.isMobile&&(n+="&mobile=true"),this.isABTestingActive&&(n+="&isab=true"),n},n.prototype.renderVideoPlayer=function(){if(!this.shown){this.shown=!0;var e={playerId:"br_video_player_"+this.adId,width:this.width,height:this.height,autoplay:this.autoplay,mute:this.mute,vastPath:this.getVastPath(this.vastParameters),debugMessages:this.debugMessages,repeat:this.isLoop,repeatCounter:this.repeatCounter,opportunityPixel:this.opportunityPixel,pixelPath:this.pixelPath,playerLoadPixel:this.playerLoadPixel,widgetId:this.widgetId,userFailResponseHistory:this.userFailResponseHistory,domain:this.domain,widgetType:this.widgetType,isResponsive:this.isResponsive,ads:this.ads,isNativeClickOpensNewWindow:this.isNativeClickOpensNewWindow,isFullscreen:this.isFullscreen,pageUrl:this.pageUrl,ip:this.ip,geoLocation:this.geoLocation,apiObservable:this.apiObservable,hideOnPlaylistComplete:this.hideOnPlaylistComplete,autoSkipDuration:this.autoSkipTimeToAutoSkip,autoSkipTimeToStopPlayer:this.autoSkipTimeToStopPlayer,playerElement:this.playerElement,startHidden:this.startHidden,osVersion:this.osVersion,osFamily:this.osFamily,playlistContent:null};if(e.sellersJsonId=this.sellersJsonId,this.playlistData&&this.playlistData.pl&&0<this.playlistData.pl.length&&"in_read"!=this.widgetType){for(var t=0;t<this.playlistData.pl.length;t++){for(var i=0;i<this.playlistData.pl[t].f.length;i++)this.playlistData.pl[t].f[i].p="https://"+this.playlistData.bu+this.playlistData.pl[t].f[i].p;this.playlistData.pl[t].p="https://src.trvdp.com"+this.playlistData.pl[t].p}e.playlistContent=this.playlistData.pl}this.floaterSettings&&(e.floaterSettings=this.floaterSettings),e.subUserId=this.subUserId,e.playOnlyMp4=this.playOnlyMp4,this.pauseOnHiddenTab&&(e.pauseOnHiddenTab=this.pauseOnHiddenTab),e.ads&&void 0!==this.startAdOnAdLoadedEvent&&(e.ads.startAdOnAdLoadedEvent=this.startAdOnAdLoadedEvent),e.fe)n[i]=e[i];for(i in t)n[i]=t[i];return n}(eet",t.href=e,document.head.appendChild(t)}("https://src.trvdp.com/css/"+this.subUserId+"/"+this.widgetId+".css");try{this.player.setup(e,null)}catch(e){Object(l.a)("thisplayersetupErr",this.playerRequest,e)}}},n.prototype.getDynamicPixel=function(e,t,i){return this.dynamicPixelPath+"?e="+this.pixels[e]+"&"+t+"="+i}},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var a=i(6);function n(e,t,i,n){var r;if(null==document.createElement("video").canPlayType||!(0<document.createElement("video").canPlayType("video/mp4").length))throw"html5 and video is not supported";this.serverResponse=e,this.widgetStaticConfig=t,this.playerRequest=i,this.playerScript=n,this.widgetId=t.id,this.pageDocument=document,this.insideFriendlyIframe=!1,this.adId=e.cid,this.subUserId=e.sid,this.passbackRendered=!1,this.domain=null,this.pageUrl=null,this.playerLoaded=!1,this.isMobile=Object(a.a)(e.m),this.insideFriendlyIframe=i.fiframe,this.apiObservable=null,this.playerScript=n,this.passbackCode=null,this.passbackWidth=null,this.passbackHeight=null,this.passbackAdSlots=null,this.passbackLength=null,this.width=null,this.height=null,this.parentElement=null,this.loadOnlyOnce=null==e?void 0:null===(r=e.w)||void 0===r?void 0:r.loo,this.isResponsive=a.b.call(this,t.ir,t.irm),a.c.call(this,t.w,t.wm,t.h,t.hm),this.isMobile?a.e.call(this,t.pcm,t.pwm,t.phm,t.plm,t.pasm,t.pofbm):a.e.call(this,t.pc,t.pw,t.ph,t.pl,t.pas,t.pofb)}n.prototype.SetPlacementPromise=function(){var n=this;return new Promise(function(e){var t=!1;if("HEAD"==n.playerScript.parentNode.nodeName)if("complete"==document.readyState)n.SetPlacement(),e();else var i=setInterval(function(){"complete"==document.readyState&&(t||(t=!0,clearInterval(i),n.SetPlacement(),e()))},100);else n.SetPlacement(),e()})},n.prototype.SetPlacement=function(){var e=null;if("function"==typeof this.setPlacementForWidgetType&&(e=this.setPlacementForWidgetType()),!e){for(var t=document.getElementsByClassName("truvid_placeholder_"+this.widgetId),i=0;i<t.length;i++){var n=t[i].getAttribute("data-used");if(""==t[i].innerHTML&&null==n){t[i].setAttribute("data-used","true"),e=t[i];break}}if(!e)if("HEAD"!=this.playerScript.parentElement.nodeName){var r=document.createElement("div");this.playerScript.parentElement.insertBefore(r,this.playerScript.nextSibling),e=r}else e=e||document.getElementsByTagName("body")[0]}this.parentElement=e},n.prototype.renderFallbacks=function(){return!(this.passbackOnFirstBidding||!this.passbackCode||null!=this.passbackAdSlots||null!=this.passbackLength)&&(this.renderPassback(),!0)},n.prototype.renderPassback=function(){var e=this.parentElement,t=document.createElement("iframe");e.style.height=this.passbackHeight+"px",t.id="passback_truvid_"+this.adId,t.width=this.passbackWidth,t.height=this.passbackHeight,t.style.cssText="width: "+this.passbackWidth+"px; height: "+this.passbackHeight+"px; border: none;",e.style.display="flex",e.style.flexDirection="row",e.style.justifyContent="center",e.appendChild(t),t.contentWindow.document.open(),t.contentWindow.document.write('<body style="margin: 0;">'+decodeURIComponent(this.passbackCode)+"</body>"),t.contentWindow.document.close();try{if(this.insideFriendlyIframe){var i=window.frameElement;i.style.cssText="height: "+this.passbackHeight+"px; width: "+this.passbackWidth+"px; border: none; margin-left: "+(i.parentNode.getBoundingClientRect().width-parseFloat(i.style.width))/2+"px; margin-top: "+(i.parentNode.getBoundingClientRect().height-parseFloat(i.style.height))/2+"px",t.style.marginLeft="0px"}}catch(e){}this.passbackRendered=!0},n.prototype.switchToPassback=function(){if(!this.passbackRendered){var e=this.parentElement;if(e)for(;0<e.childNodes.length;)e.removeChild(e.childNodes[0]);else this.SetPlacement();e.style.width=this.width+"px",e.style.height=this.height+"px",this.renderPassback()}},n.prototype.checkLoadOnlyOnce=function(){if(window.trv_widgets_loaded_once||(window.trv_widgets_loaded_once={}),window.trv_widgets_loaded_once[this.widgetId])throw new Error('Load only Once" flag prevents a second instance of this widget Id');window.trv_widgets_loaded_once[this.widgetId]=!0},n.prototype.loadPlayer=function(i){var n=this;return new Promise(function(e,t){this.playerLoaded||(this.playerLoaded=!0,this.apiObservable=i,this.loadOnlyOnce&&this.checkLoadOnlyOnce(),this.SetPlacementPromise().then(function(){this.renderFallbacks()||(this.renderWidget(),e())}.bind(n)).catch(function(e){t(e)}))}.bind(this))},n.prototype.getWidget=function(){return this.widgetObject}},function(e,t,i){"use strict";i.d(t,"a",function(){return r});var a=i(15),n=i(8),o=i(4);function r(e){this.widget=e,this.isDailyOrSessionFqEnabled=!1,this.isHourFQEnabled=!1,this.shouldWriteToCookie=!1,this.isDailyFQEnabled=!1,e.outofviewMethod==a.b?this.SetFQ(e.outofviewAdOnlyFQ,e.outofviewAdOnlyFQDaily,e.outofviewAdOnlyFQHourly):e.outofviewMethod==a.c&&this.SetFQ(e.outofviewFloaterFQ,e.outofviewFloaterFQDaily,e.outofviewFloaterFQHourly),this.shouldWriteToCookie&&(this.isDailyOrSessionFqEnabled||this.isHourFQEnabled)&&this.widget.player.subscribe(n.d,this.onFloaterFQDecreased.bind(this))}r.prototype.SetFQ=function(e,t,i){this.isDailyOrSessionFqEnabled=e,this.numberOfTimesFloaterIsAllowedToBeOpened=e,t&&(this.isDailyFQEnabled=!0,this.numberOfTimesFloaterIsAllowedToBeOpened=e-this.widget.floaterOOVTimesShown),i&&(this.isHourFQEnabled=!0,this.numberOfTimesFloaterIsAllowedToBeOpened=i-this.widget.floaterOOVTimesShownHourly),this.shouldWriteToCookie=t||i},r.prototype.onFloaterFQDecreased=function(){this.widget.floaterOOVTimesShown++,this.widget.floaterOOVTimesShownHourly++;var e=Object(o.a)(a.a);e=e&&JSON.parse(e);var t=null;if(this.isHourFQEnabled){t={};var i=0;e&&e.hourlyFQTimestamp&&(new Date-new Date(e.hourlyFQTimestamp))/1e3/60/60<1?(i=e.timesShownHourly,t.hourlyFQTimestamp=e.hourlyFQTimestamp):t.hourlyFQTimestamp=Date.now(),i++,t.timesShownHourly=i}else if(this.isDailyFQEnabled){t={};var n=0;e&&e.dailyFQTimestamp&&(new Date-new Date(e.dailyFQTimestamp))/1e3/60/60<24?(n=e.timesShown,t.dailyFQTimestamp=e.dailyFQTimestamp):t.dailyFQTimestamp=Date.now(),n++,t.timesShown=n}if(t){var r=new Date;r.setTime(r.getTime()+a.e),Object(o.c)(a.a,t,r,this.widget.playerRequest.dcookie)}},r.prototype.IsFQEnabled=function(){return this.isDailyOrSessionFqEnabled||this.isHourFQEnabled},r.prototype.GetNumberOfTimesFloaterIsAllowedToBeOpened=function(){return this.numberOfTimesFloaterIsAllowedToBeOpened}},function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i(1),r=i(2),a=i(10);function o(e){this.widget=e,this.widget.autoplay=!1,this.isBidding=!1,this.onBiddingSessionEndsHandler=this.onBiddingSessionEnds.bind(this),this.onAdStartedHandler=this.onAdStarted.bind(this),this.widget.player.subscribe(n.d,function(t){return new Promise(function(e){void 0!==t.detail.switchToCTP&&t.detail.switchToCTP&&(this.widget.allowBiddingOnVideoChangeEvent=!1),this.widget.adSlots.IsPreroll()&&(window.playerLog("setting click to play because preroll exist"),this.widget.player.setPlayerContentStatus(n.e)),e()}.bind(this))}.bingOnVideoChangeEvent&&this.StartBidding()}.bind(this))}o.prototype.IsBidding=function(){return this.isBidding},o.prototype.IsBiddingFinished=function(){return!this.isBidding&&!this.widget.adSlots.IsSlotAvailable(0)},o.prototype.StartBidding=function(){var e=this.widget.adSlots.IsSlotAvailable(0);e&&(this.isBidding=!0,this.RegisterToPrerollEvents(),this.widget.adSlots.RemoveSlot(e.offset),this.widget.player.StartBiddingSession(e))},o.prototype.onBiddingSessionEnds=function(){this.isBidding=!1,this.widget.player.getPlayerContentStatus()==n.e&&this.widget.allowToStartContentAfterPreroll&&(this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.widget.player.play()),this.widget.player.unsubscribe(r.g,this.onBiddingSessionEndsHandler),this.widget.player.unsubscribe(r.c,this.onAdStartedHandler)},o.prototype.RegisterToPrerollEvents=function(){this.widget.player.subscribe(r.g,this.onBiddingSessionEndsHandler),this.widget.player.subscribe(r.c,this.onAdStartedHandler)},o.prototype.onAdStarted=function(){this.isBidding=!1,this.widget.player.setPlayerContentStatus(n.g),this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.widget.player.unsubscribe(r.c,this.onAdStartedHandler),this.widget.player.unsubscribe(r.g,this.onBiddingSessionEndsHandler)}},function(e,"ready","click","adImpression","adClick"]}i.d(t,"ae.notify=function(e,t){this.api.fire(e,t)},m.prototype.on=function(e,t,i){if("function"!=typeof t)throw"callback is not a function";if(!(-1<this.allowedEvents.indexOf(e)))throw"event registration is not allowed";void 0===this.subscribers[e]&&(this.subscribers[e]=[]),this.subscribers[e].push({callback:t,context:i||this})},m.prototype.off=function(e,t){for(var i=this.subscribers[e],n=i?i.length:0,r=0;r<n;r++)i[r].callback==t&&i.splice(r,1)},m.prototype.fire=function(e,t){for(var i=this.subscribers[e],n=i?i.length:0,r=0;r<n;r++)i[r].callback.call(i[r].context,t)};var v=i(4),y=i(7);function b(r,a,o,s,l,d,u,c,h,f,p,g,m,v){return new Promise(function(i,n){void 0===window.truvid_protected&&(window.truvid_protected={result:null,fraud:null});var e=function(e,t,i,n){if(e){if(!i)return!0;try{var r;return!(r=n||A())||(r.geo!=t||(void 0===r.val||void 0===r.timestamp?1==parseInt(r.level):Math.round((new Date).getTime()/1e3)-r.timestamp<600?"t"==r.val||"c"!=r.val&&null:"t"==r.val||("c"==r.val&&1==parseInt(r.level)||("c"!=r.val||2!=parseInt(r.level)))))}catch(e){return!0}}return!1}(r,s,o,v);if(null===e)n();else if(!1===e)i(!0);else if(null==window.truvid_protected.result)(function(t,a,o,s,l,d,u,c,h,f,p){return new Promise(function(i,n){var r=w(t,a,o,s,f);l&&T(r[0],r[1],d,u,c,h,f);var e="https://rt.ad-score.com/score/cors?s=1".concat("&pid=",r[0],"&tid=truvidTraffic&",r[1],"&cb=",Math.random().toString());Object(y.a)(e,!0,2500).then(function(e){if("error"===e)S("ex",r[0],r[1]),i(null);else if("timeout"==e)S("t",r[0],r[1]),E(o,"t",d,p,f),i(null);else{var t=JSON.parse(e.toString());t&&"undefined"!=t.score&&void 0!==t.score.black?i(t):(S("ex",r[0]{console.log(e),n("error protected code")})})})(l,c,s,u,h,d,f,p,g,m,v).then(function(e){if(e){var t=100==e.score.black;if(window.truvid_protected.fraud=t,window.truvid_protected.result=!0,o)E(s,1==t?"f":"c",d,v,m);a&&t?n("fetching protected"),console.log(e),i(!0)});else{if(h){var t=w(l,c,s,u,m);T(t[0],t[1],d,f,p,g,m)}0==window.truvid_protected.fraud?i(!0):a&&n("protected error")}})}function w(e,t,i,n,r){var a="pub_domain="+window.location.hostname+"&l1="+e;return a+="&l2="+t,a+="&l3="+i,a+=n?"&l4=mobile":"&l4=desktop",["1000032",a+="&l5="+r]}function E(e,t,i,n,r){var a,o=0;(a=n||A())&&a.level?(0==(o=parseInt(a.level))||1==o&&e==a.geo)&&(void 0!==a.fraud?0==a.fraud&&"c"==t&&(o+=1):void 0!==a.val&&("t"!=a.val&&"c"!=a.val||"c"!=t?"f"==t&&(o=0):o+=1)):"c"==t&&(o+=1);var s=Math.round((new Date).getTime()/1e3),l={val:t,level:o,geo:e,timestamp:s};a&&a.jsdt&&(l.jsdt=a.jsdt);var d=h();Object(v.c)("truvid_protected",l,d,i),c(t,e,s,o,r)}function c(e,t,i,n,r){var a=document.createElement("div");a.innerHTML='<iframe class="truvid-protected-c" height="0" width="0" marginwidth="0" marginheight="0" scrolling="no" frameborder="0" src="https://stg.truvidplayer.com/v'+r+"/prtct.php?val="+e+"&geo="+t+"&timestamp="+i+"&level="+n+'" style="border: 0; display: nonete;return e.setTime(e.getTime()+5184e6),e}function S(e,t,i){document.createElement("img").src="https://rt.ad-score.com/score/img?s="+e+"&r="+Math.random()+"&pid="+t+"&tid=truvidTraffic&"+i}function A(){try{var e=Object(v.a)("truvid_protected");if((e=JSON.parse(e))&&((void 0!==e.fraud||void 0!==e.val)&&void 0!==e.level&&void 0!==e.geo||void 0!==e.jsdt))return e}catch(e){}return null}function T(e,t,i,n,r,a,o){var s=A();if(s&&s.jsdt&&(Date.now()-s.jsdt)/1e3/60/60<24)return!1;var l="&ref="+a+"&cid="+n+"&uip="+r+"&pub_ua="+navigator.userAgent,d=document.createElement("script");d.type="text/javascript",d.async=!0,d.src="https://js.ad-score.com/score.min.js?pid="+e+"&tt=g#tid=videoJS&"+t+l+"&cb="+Math.random().toString(),document.head.appendChild(d),(s=s||{}).jsdt=(new Date).getTime();var u=h();Object(v.c)("truvid_protected",s,u,i),c(s.val,s.geo,s.timestamp,s.level,o)}var L=i(3),C=i(0);function n(c,h,f,p){return new Promise(function(e,t){h.fiframe=Object(L.b)();var i=new m;if(void 0!==window.truvid_callback)try{window.truvid_callback(i)}catch(e){}var n=new g(i);n.notify("loaded",{widgetId:h.wid});var r=c.w,a=Object(v.b)(c.d);h.dcookie=a;var o=null==r.pra||r.pra,s=null==r.prb||r.prb,l=null==r.prc||r.prc;l&&(c.g||c.ou)&&(l=!1);var d=l&&c.pjs,u=c.v+(void 0!==c.isab&&c.isab?"B":"");b(o,s,l,c.geo,h.wid,a,c.m,c.d,d,c.cid,c.ip,h.purl,u,c.prtct).then(fu,r,h,f).loadPlayer(n).then(function(){e()}).catch(function(e){Object(C.a)("initcatchEx",h,e),console.log("error on loadle.log(e),t(e)})}).catch(function(e){t(e)})})}},,function(e,t,i){"use strict";i.r(t);var r=i(18),o=i(17),n=i(1),a=i(2),s=i(10),l=i(8);function d(e){this.widget=e,this.playerReady=!1,this.lastBidDate=null,this.biddingInterval=null,this.interval=3e4,this.biddingIntervalFunctionBinding=null,this.pauseOnNextOutOfView=!1,this.switchedToC2P=!1,this.onBiddingSessionEndsBinding=this.onBiddingSessionEnds.bind(this),this.onAdStartedBinding=this.onAdStarted.bind(this),this.onBeforeBiddingSessionStartBinding=this.onBeforeBiddingSessionStthis.widget=e}function c(e){this.widget=e}d.prse(function(e){this.setAdInitiation(),e()}.bind(this))},d.prototype.onPlayerViewabilityChange=function(){this.slotsReady&&(this.widget.player.IsPlayerViewable()?(this.widget.player.isAdPlaying()||(this.pauseOnNextOutOfView=!0),this.widget.allowBiddingOnVideoChangeEvent=!0,this.widget.player.SetAllowRestoringContent(!0),this.playerReady&&this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.widget.player.isAdPlaying()||this.stop()):this.pauseOnNextOutOfView&&!this.widget.player.isAdPlaying()&&(this.pauseOnNextOutOfView=!1,this.widget.player.SetAllowStartingContentOnPlayRequest(!1),this.widget.player.SetAllowRestoringContent(!1),this.widget.player.pause(!1),this.start()))},d.prototype.setAdInitiation=function(){this.biddingIntervalFunctionBinding=this.biddingIntervalFunction.bind(this),this.widget.allowBiddingOnVideoChang(a.f,function(){this.lastBidDate=new Date}.biiewable;this.onPlayerViewabilityChange(t)}.bind(this)),this.widget.player.subscribe(a.c,function(){this.clearBiddingTimeout(),this.pauseOnNextOutOfView=!1,this.widget.player.SetAllowRestoringContent(!0),this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.widget.player.setPlayerContentStatus(n.g)}.bind(this)),this.widget.player.subscribe(n.a,function(){this.widget.player.SetLoadVideoOnPlaylistChange(!0),this.widget.player.IsPlayerViewable()||(this.clearBiddingTimeout(),this.start())}.bind(this)),this.widget.player.subscribe(n.h,function(){this.playerReady=!0;var e=this.widget.player.IsPlayerViewable();this.widget.player.getPlayerDimension().height<=50&&this.widget.player.ForcePlayingAdsOnlyOnFloater(),e?this.widget.Play():(this.widget.player.SetAllowStartingContentOnPlayRequest(!1),this.widget.player.SetAllowRestoringContent(!1),this.start(),this.biddingIntervalFunction())}.bind(this)),this.widget.player.subscribe(n.d,this.onNewVideoBeforeVideoChanged.bind(this)),this.widget.player.subscribe(s.e,this.onSetSlotsEvents.bind(this)),this.widget.player.subscribe(a.e,this.onBeforeBiddingSessionStar&&this.widget.player.killBiddingSession()}.bind(this))},d.prototype.onSetSlotsEvents=function(){this.slotsReady=!0,this.widget.player.IsPlayerViewable()?(this.pauseOnNextOutOfView=!0,this.widget.allowBiddingOnVideoChangeEvent=!0,this.widget.player.SetAllowRestoringContent(!0),this.playerReady&&this.widget.player.SetAllowStartingContentOnPlayRequest(!0),this.stop()):this.pauseOnNextOutOfView&&(this.pauseOnNextOutOfView=!1,this.widget.player.SetAllowStartingContentOnPlayRequest(!1),this.widget.player.SetAllowRestoringContent(!1),this.widget.player.pause(!1),this.start()),this.switchedToC2P=!1},d.prototype.start=function(){this.widget.player.unsubscribe(a.g,this.onBiddingSessionEndsBinding),this.widget.player.unsubscribe(a.c,this.onAdStartedBinding),null==this.biddingInterval&&(window.playerLog("setting interval bidding"),this.biddingInterval=setInterval(this.biddingIntervalFunctionBinding,this.interval))},d.prototype.biddingIntervalFunction=function(){if(this.widget.player.canStartBiddingSession()){var e=this.widget.player.getVideo().currentTime,t=this.widget.adSlots.getLastSlotByOffset(e);t?this.widget.player.StartBiddingSession(t):window.playerLog("no ad slot")}else window.playerLog("can not start bidding iddingInterval),this.biddingInterval=null},d.prototype.stop=function(){this.clearBiddingTimeout(),this.switchedToC2P||0!=this.widget.player.getCurrentContentTime()||null==this.widget.preroll||!this.widget.preroll.IsBiddingFinished()?this.switchedToC2P||(this.widget.Play(),this.widget.preroll&&!this.widget.preroll.IsBiddingFinished()&&this.widget.preroll.IsBidding()&&(this.widget.player.subscribe(a.g,this.onBiddingSessionEndsBinding),this.widget.player.subscribe(a.c,this.onAdStartedBinding))):this.widget.preroll.IsBidding()||this.widget.Play()},d.prototype.onNewVideoBeforeVideoChanged=function(e){this.slotsReady=!1,this.widget.player.IsPlayerViewable()?this.widget.allowToStartContentAfterPreroll=!0:(window.playerLog("dont load video on next video"),this.widget.player.SetAllowStartingContentOnPlayRequest(!1),this.widget.allowToStartContentAfterPreroll=!1),this.widget.isPreroll&&this.widget.player.SetLoadVideoOnPlaylistChange(!1),this.switchedToC2P=e.detail.switchToCTP},d.prototype.onBiddingSessionEnds=function(){this.widget.player.unsubscribe(a.c,this.onAdStartedBinding),this.widget.player.unsubscribe(a.g,this.onBiddingSessionEndsBinding),this.widget.player.IsPlayerViewable()&&(window.playerLog("play from bidding session ends"),this.widget.Play())},d.prototype.onAdStarted=function(){this.widget.player.unsubscribe(a.g,this.onBiddingSessionEndsBinding),this.widget.player.unsubscribe(a.c,this.onAdStartedBinding)},d.prototype.onBeforeBiddingSessionStart=function(){return new Promise(function(e,t){this.widget.player.getPlayerDimension().height<=50?setTimeout(function(){this.widget.player.getPlayerDimension().height<=50?setTimeout(function(){this.widget.player.getPlayerDimension().height<=50?this.widget.player.isAdOnlyAvailable()?e():t():e()}.bind(this),2e3):e()}.bind(this),2e3):e()}.bind(this))},u.prototype.Init=function(){return new Promise(function(e){(function(s){var l=null;return new Promise(function(t,i){if(s)t();else{var e=function(){var e=r.play();e?e.then(function(){o(),t()}).catch(function(){o(),i()}):setTimeout(function(){o(),i()},1500)},n=new Blob([new Uint8Array([0,0,0,28,102,116,121,112,105,115,111,109,0,0,2,0,105,115,111,109,105,115,111,50,109,112,52,49,0,0,0,8,102,114,101,101,0,0,2,239,109,100,97,116,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,33,16,5,32,164,27,255,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,55,167,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,112,0,0,2,194,109,111,111,118,0,0,0,108,109,118,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,232,0,0,0,47,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,1,236,116,114,97,107,0,0,0,92,116,107,104,100,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,47,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,101,100,116,115,0,0,0,28,101,108,115,116,0,0,0,0,0,0,0,1,0,0,0,47,0,0,0,0,0,1,0,0,0,0,1,100,109,100,105,97,0,0,0,32,109,100,104,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,172,68,0,0,8,0,85,196,0,0,0,0,0,45,104,100,108,114,0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0,0,0,1,15,109,105,110,102,0,0,0,16,115,109,104,100,0,0,0,0,0,0,0,0,0,0,0,36,100,105,110,102,0,0,0,28,100,114,101,102,0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1,0,0,0,211,115,116,98,108,0,0,0,103,115,116,115,100,0,0,0,0,0,0,0,1,0,0,0,87,109,112,52,97,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,2,0,16,0,0,0,0,172,68,0,0,0,0,0,51,101,115,100,115,0,0,0,0,3,128,128,128,34,0,2,0,4,128,128,128,20,64,21,0,0,0,0,1,244,0,0,1,243,249,5,128,128,128,2,18,16,6,128,128,128,1,2,0,0,0,24,115,116,116,115,0,0,0,0,0,0,0,1,0,0,0,2,0,0,4,0,0,0,0,28,115,116,115,99,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,2,0,0,0,1,0,0,0,28,115,116,115,122,0,0,0,0,0,0,0,0,0,0,0,2,0,0,1,115,0,0,1,116,0,0,0,20,115,116,99,111,0,0,0,0,0,0,0,1,0,0,0,44,0,0,0,98,117,100,116,97,0,0,0,90,109,101,116,97,0,0,0,0,0,0,0,33,104,100,108,114,0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0,0,0,45,105,108,115,116,0,0,0,37,169,116,111,111,0,0,0,29,100,97,116,97,0,0,0,1,0,0,0,0,76,97,118,102,53,54,46,52,48,46,49,48,49])],{type:"video/mp4"}),r=document.createElement("video");r.style.position="absolute",r.style.height="0px",r.style.width="0px",r.setAttribute("controls","controls"),r.autoplay=!0,r.preload="auto",r.setAttribute("webkit-playsinline","webkit-playsinline"),r.setAttribute("playsinline","playsinline"),s&&(r.muted=!0,r.volume=0);var a=function(){(,a),r.removeEventListener("loadeddata",e)};r.addEventListener("playing",a),r.addEventListener("timeupdate",a),r.addEventListener("loadeddata",e),r.src=UR,r.load(),l=setTimeout(function(){e).then(function(){this.setAutoplay(),e()}.bind(this)).catch(function(){this.widget.autoplay=!1,this.widget.allowBiddingOnVideoChangeEvent=!1,e()}.bind(this))}.bind(this))},u.prototype.setAutoplay=function(){this.widget.adSlots&&this.widget.adSlots.IsPreroll()&&(this.widget.aule(0)&&this.widget.preroll.StartBidding()}.bind(this)))},c.prototype.Init=function(){return new Promise(function(e){this.widget.autoplay=!1,this.widget.allowBiddingOnVideoChangeEvent=!1,e()}.bind(this))};var h=i(19),f=i(20);function p(e){this.widget=e,this.savingModeForContentTimeout=null,this.widget.player.subscribe(n.h,function(){this.initSavingModeTracking()}.bind(this))}function g(e){this.widget=e,this.sessionTotalTime=0,this.viewabilityTotalTime=0,this.widget.player.subscribe(n.h,function(){this.viewabilityInterval=window.setInterval(function(){this.widget.player.isAdPlaying()||(this.sessionTotalTime+=250,this.widget.player.IsPlayerViewable()&&(this.viewabilityTotalTime+=250))}.bind(this),250),window.addEventListener("unload",function(){var e=this.widget.getDynamicPixel("dvw","vw",(this.viewabilityTotalTime/this.sessionTotalTime*100).toFixed(0));navigator.sendBeacon(e,null)}.bind(this))}.bind(this))}p.prototype.initSavingModeTracking=function(){var e=new IntersectionObserver(this.onSavingModeViewabilityCallback.bind(this),{root:null,rootMargin:"0px",threshold:.25}),t=this.widget.player.getPlayerElement();t&&e.observe(t)},p.prototype.onSavingModeViewabilityCallback=function(e){e[0].intersectionRatio<.25?this.savingModeForContentTimeout||(tidget.player.EnableSavingModeForContent()}.bind(this),2e3)):(clearTimeout(this.savingModeForContentTimeout),this.savingModeForContentTimeout=null,this.widget.player.isAdPlaying()&&"adonly"==this.widget.outofviewMethod||this.widget.player.DisableSavingModeForContent())};var m=i(15);function v(e){this.widget=e,this.pausedByOutOfView=!1,this.widget.player.subscribe(n.j,function(e){e.detail.isPlayerViewable||this.widget.player.getPlayerContentStatus()!=n.g?this.pausedByOutOfView&&this.widget.player.play():(this.pausedByOutOfView=!0,this.widget.player.pause())}.bind(this))}var y=i(0);function b(e,t,i,n,r,a){this.playerRequest=i,o.a.call(this,e,t,i,n,r,a),this.setInstreamConfig(),void 0!==t.aa&&0==t.aa?this.renderWidget():this.setAdvertising().then(function(){this.renderWidget()}.bind(this)).catch(function(e){Object(y.a)("setAdvertisinunction w(e,t,i,n){r.a.call(this,e,t,i,n)}(b.prototype=Object.create(o.a.prototype)).constructor=o.a,b.prototype.setInstreamConfig=function(){if(this.playerRequest.adblock&&(this.playInitMethod="click_to_play"),this.inFriendlyIframe&&(this.windowToListenToEvents=window.top),this.autoSkipTimeToStopPlayer=this.widgetStaticConfig.asstsc,this.autoSkipTimeToAutoSkip=this.widgetStaticConfig.asct,this.pauseOnHiddenTab=this.widgetStaticConfig.poht||!1,this.isPrebidActive=this.widgetStaticConfig.hba||!1,this.floateFq=new h.a(this),"adonly"==this.outofviewMethod||"floater"==this.outofviewMethod){var e=!1;"floater"==this.outofviewMethod&&(e=!this.outofviewFloaterStartWithFloater),"adonly"==this.outofviewMethod&&(e=this.isMobile?this.widgetStaticConfig.oovaoavm||!1:this.widgetStaticConfig.oovaoav||!1),this.floaterSettings={enableFq:this.floateFq.IsFQEnabled(),fq:this.floateFq.GetNumberOfTimesFloaterIsAllowedToBeOpened(),showOnlyOnAds:"adonly"==this.outofviewMethod,openFloaterOnNextAd:"floater"==this.outofviewMethod,showAfterPlayerView:e,width:this.floaterWidthOnOutofview,height:this.floaterHeightOnOutofview,padding:this.floaterPadding,position:this.floaterPositionOutOfView,closeButtonPosition:this.floaterCloseButtonPosition,counterToCloseFloater:this.closeFloaterDelay}}this.savingMode=new p(this),this.viewabilityCounter=new g(this),this.outofviewMethod==m.d&&(this.outofviewMethodPause=new v(this))},b.prototype.setPlayInitMethod=function(){return new Promise(function(t){switch(this.playInitMethod){case"autoplay":this.SetAutoplayMethod();break;case"click_to_play":this.SetClickToPlay();break;default:this.playInitMethodObj=new d(this)}this.playInitMethodObj?this.playInitMethodObj.Init().then(function(){t()}.bind(this)).catch(function(e){Object(y.a)("playinitmehtod.initEx",this.playerRequest,e),t()}.bind(this)):t()}.bind(this))},b.prototype.Play=function(){this.player.getPlayerPausedOnUserBehalf()||(this.preroll&&!this.preroll.IsBiddingFinished()?this.preroll.IsBidding()||this.preroll.StartBidding():this.preroll&&this.preroll.IsBidding()||this.player.play())},b.prototype.SetClickToPlay=function(){this.playInitMethodObj=tion(){this.playInitMethodObj=new u(this)},b.prototype.renderWidget=function(){this.loadPlayer&&this.renderVideoPlayer()},b.prototype.afterPlaylistChange=function(){this.adSlots.IsSlotAvailable(0)&&(window.playerLog("setting click to play because afterplaylistchange"),this.player.setPlayerContentStatus(n.e))},b.prototype.SetOnPassbackCallback=function(e){this.onPassbackCallback=e},b.prototype.listenToPlayerEvents=function(){this.player.subscribe(n.m,function(e){if(void 0!==e.detail.currentTime){var t=this.adSlots.IsSlotAvailable(e.detail.currentTime);if(t)this.player.canStartBiddingSession()&&(this.adSlots.RemoveSlot(t.offset),this.player.StartBiddingSession(t(){this.allowBiddingOnVideoChangeEvent=!0}.bind(this))},b.prototype.setAdvertising=function(){return new Promise(function(t){this.adSlots=new s.a(this),this.allowToStartContentAfterPreroll=!0,this.adSlots.isPreroll&&(this.preroll=new f.a(this)),this.setPlayInitMethod().then(function(){this.listenToPlayerEvents(),t()}.bind(this)).catch(function(e){Object(y.a)("setPlayerinitMethodListenEx",this.playerRequest,e),t()}.bind(this))}.bind(this))},(w.prototype=Object.create(r.a.prototype)).constructor=r.a,w.prototype.renderWidget=function(){try{this.widgetObject=new b(this.serverResponse,this.widgetStaticConfig,this.playerRequest,this.playerScript,this.apiObservable,this.parentElement),this.widgetObject.SetOnPassbackCallback(this.switchToPassback.bind(this))}catch(e){console.log("error loading player",e),Object(y.a)("renderWidgetEx",this.playerRequest,e)}},w.prototype.setPlacementForWidgetType=function(){var e=this.serverResponse.pl,t=null,i=null,n=!1;if(null!=e&&e.length)for(var r=0;r<e.length;r++)try{var a=e[r].s,o=document.querySelector(a);if(null!=o&&o.parentElement&&!"BODY".includes(o.parentElement.nodeName)){i=o,n="before"===e[r].i;break}}catch(e){continue}if(!i){var s,l=null===(s=localStorage)||void 0===s?void 0:s.getItem("truvid_place_selector");l&&(i=document.querySelector(l))}return i&&(t=document.createElement("div"),n?i.parentElement.insertBefore(t,i):i.after(t)),t};var E=i(21);window.brWidgetInit={init:("error construct widget"),console.log(e)})}}}]);