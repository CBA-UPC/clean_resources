!{"../../../../templates-handlebars/raiplay/assets-src/js/webcomponents/src/rai-player/player-events.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={openPlayerRequest:"rai:player-openPlayerRequest",changeVideoRequest:"rai:player-changeVideoRequest",firstPlay:"player:rai:firstplay",opened:"rai:player-opened",closed:"rai:player-closed",connected:"rai:player-connected",ready:"rai:player-ready",urlChanged:"rai:player-url-changed",videoItemJsonReady:"rai:player-video-json-ready",media:{CREATION:"CREATION_EVENT",READY:"READY_EVENT",REPLAY:"REPLAY",PLAY:"PLAY_MEDIA",RATECHANGE:"RATECHANGE",PLAYBACK_STARTED:"PLAYBACK_STARTED",FIRSTPLAY:"tracking:firstplay",AUDIO_CHANGED:"AUDIO_CHANGED",SUBTITLE_CHANGED:"SUBTITLE_CHANGED",DOWNLOAD_DATA_START:"DOWNLOAD_DATA_START",DOWNLOAD_DATA_END:"DOWNLOAD_DATA_END",NETWORK_ERROR:"NETWORK_ERROR",BUTTON_BACK_CLICKED:"BUTTON_BACK_CLICKED",ENDED:"ENDED_EVENT",ERROR:"ERROR_EVENT",LOADED:"LOADDATA_EVENT",LOADMETADATA:"LOADED_METADATA_EVENT",TIMEUPDATE:"TIMEUPDATE_EVENT",USERACTIVE:"USERACTIVE_EVENT",USERINACTIVE:"USERINACTIVE_EVENT",VOLUMECHANGE:"VOLUME_CHANGED",MUTE_CHANGE:"MUTE_CHANGE",FULLSCREEN_EVENT:"FULLSCREEN_CHANGE",CONTAINER_READY:"CONTAINER_READY",MEDIAPOLIS_PARSE_END:"MEDIAPOLIS_PARSE_END",MEDIAPOLIS_PARSE_ERROR:"MEDIAPOLIS_PARSE_ERROR",NOT_SUPPORTED_MEDIA_TYPE:"NOT_SUPPORTED_MEDIA_TYPE",AUTOPLAY_BLOCKED:"AUTOPLAY_BLOCKED",HEARTBEAT:"HEARTBEAT",PERCENTILE:"PERCENTILE",BUFFER_STALLED:"BUFFER_STALLED",BUFFER_STALLED_ERROR:"BUFFER_STALLED_ERROR",BUFFER_FULL:"BUFFER_FULL",DECILE:"DECILE",FIRST_QUARTILE:"FIRST_QUARTILE",MIDPOINT:"MIDPOINT",THIRD_QUARTILE:"THIRD_QUARTILE",SEEK:"SEEK_EVENT",SEEKING:"SEEKING_EVENT",SEEK_START:"SEEK_START",SEEK_END:"SEEK_END",RESTART_BUTTON_CLICKED:"RESTART_BUTTON_CLICKED",LOAD_START:"LOADSTART_EVENT",PAUSE:"PAUSE_EVENT",PLAYING:"PLAYING_EVENTS",BUFFERING_END:"buffering_end",BUFFERING_STARTED:"buffering_started",STOP:"STOP_EVENT",PLAYLIST_END:"PLAYLIST_END",RESIZE:"PLAYER_RESIZE",PIP_START:"PIP_START",PIP_STOP:"PIP_STOP",LICENSE_REQUEST_ATTEMPT:"LICENSE_REQUEST_ATTEMPT",DRM_LICENSE_USABLE:"DRM_LICENSE_USABLE",DRM_LICENSE_OUTPUT_RESTRICTED:"DRM_LICENSE_OUTPUT_RESTRICTED",DRM_LICENSE_STATUS_INTERNAL_ERROR:"DRM_LICENSE_STATUS_INTERNAL_ERROR",KEYSTATUSCHANGE:"KEY_STATUS_CHANGE",CHROMECAST_START:"CHROMECAST_START",CHROMECAST_STOP:"CHROMECAST_STOP",GO_NEXT_EPISODE:"GO_NEXT_EPISODE",QUALITY_CHANGE:"QUALITY_CHANGE",DISPOSE:"PLAYER_DISPOSE",DISPOSED:"PLAYER_DISPOSED",READY_FOR_POSTROLL:"READY_FOR_POSTROLL",READY_FOR_PREROLL:"READY_FOR_PREROLL",BUTTON_PANLEL_CLICKED:"BUTTON_PANLEL_CLICKED",TRACKS_CREATED:"TRACKS_CREATED",EPISODE_ITEM_CLICK:"EPISODE_ITEM_CLICK",ONAIR_ITEM_CLICK:"ONAIR_ITEM_CLICK",LINK_PROGRAM_BUTTON_CLICKED:"LINK_PROGRAM_BUTTON_CLICKED",PROGRAM_INFO_UPDATED:"PROGRAM_INFO_UPDATED",WATCH_ON_CLICKED:"WATCH_ON_CLICKED",TECH_REF_READY:"TECH_REF_READY",ADS:{ADSERROR:"ADSERROR",ADS_REQUEST:"adsrequest",ADBUFFERING:"adBuffering",ADBUFFERINGEND:"adBufferingEnd",ADS_BIND_ERROR:"ADS_BIND_ERROR",CONTENT_RESUME_REQUESTED:"contentResumeRequested",CONTENT_PAUSE_REQUESTED:"contentPauseRequested",CLICK:"adsclick",DURATION_CHANGE:"durationChange",EXPANDED_CHANGED:"expandedChanged",STARTED:"start",IMPRESSION:"impression",PAUSED:"pause",RESUMED:"resume",AD_PROGRESS:"adProgress",FIRST_QUARTILE:"firstquartile",MIDPOINT:"midpoint",THIRD_QUARTILE:"thirdquartile",COMPLETE:"complete",USER_CLOSE:"userClose",LINEAR_CHANGED:"linearChanged",LOADED:"loaded",AD_CAN_PLAY:"adCanPlay",AD_METADATA:"adMetadata",AD_BREAK_READY:"adBreakReady",INTERACTION:"interaction",ALL_ADS_COMPLETED:"allAdsCompleted",SKIPPED:"skip",SKIPPABLE_STATE_CHANGED:"skippableStateChanged",LOG:"log",VIEWABLE_IMPRESSION:"viewable_impression",VOLUME_CHANGED:"volumeChange",VOLUME_MUTED:"mute",AD_BLOCK_DETECTED:"adBlockDetected"}}}},"../utilities/utils.js":function(e,t,n){"use strict";ction a(e){const t=window.location.search.substring(1).split("&");let n,r;for(r=0;r<t.length;r++)if(n=t[r].split("="),n[0]===e)return void 0===n[1]||decodeURIComponent(n[1]);return null}n.d(t,"c",(function(){return r})),n.d(t,"f",(function(){return i})),n.d(t,"e",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return s})),n.d(t,"g",(function(){return c})),n.d(t,"a",(function(){return u}));function s(e,t){const n=document.createElement("script");n.type="text/javascript",n.src=e,"function"==typeof t&&(n.onload=t,n.onreadystatechange=function(){if("complete"===this.readyState)try{t()}catch(e){console.error(e)}}),document.getElementsByTagName("head")[0].appendChild(n)}function c(e,t){if("string"==typeof e)return window.Rai=window.Rai||{},window.Rai[e]=t,t}function u(e){return"string"!=typeof e?null:window.Rai?window.Rai[e]:null}},"./node_modules/lit-element/lit-element.js":function(e,t,n){"use strict";n.d(t,"c",(function(){return d.b})),n.d(t,"d",(function(){return T})),n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return O}));var r=n("./node_modules/lit-html/lib/dom.js"),i=n("./node_modules/lit-html/lib/template.js");onst a=s=var c=n("./node_modules/lit-html/lib/render.js"),u=n("./node_modules/lit-html/lib/template-factory.js"),l=n("./node_modules/lit-html/lib/template-instance.js"),d=n("./node_modules/lit-html/lit-html.js");const f=let p=!0;void 0===window.ShadyCSS?p=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),p=!1);const m=h=["html","svg"],g=new Set,b=window.JSCompiler_renameProperty=const _={toAttributefromAttribute,y=v={attribute:!0,type:String,converter:_,reflect:!1,hasChanged:y};.finalized=!0;const E=Element.prototype;E.msMatchesSelector||E.webkitMatchesSelector;const k=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,P=Symbol();onst T=C=(window.litElementVersions||(window.litElementVersions=[])).push("2.5.1");const x={};.finalized=!0,O.render=O.shadowRootOptions={mode:"open"}},"./node_modules/lit-html/lib/directive.js":"./node_modules/lit-html/lib/dom.js":"./node_modules/lit-html/lib/part.js":"./node_modules/lit-html/lib/parts.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return p})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return _}));var r=n("./node_modules/lit-html/lib/directive.js"),i=n("./node_modules/lit-html/lib/dom.js"),o=n("./node_modules/lit-html/lib/part.js"),a=n("./node_modules/lit-html/lib/template-instance.js"),s=n("./node_modules/lit-html/lib/template-result.js"),c=n("./node_modules/lit-html/lib/template.js");const u=l=!1;(();onst y=,"./node_modules/lit-html/lib/render.js":"./node_modules/lit-html/lib/template-factory.js":"./node_modules/lit-html/lib/template-instance.js":"./node_modules/lit-html/lib/template-result.js":"./node_modules/lit-html/lib/template.js":"./node_modules/lit-html/lit-html.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return a.a})),n.d(t,"c",(function(){return s.a})),n.d(t,"d",(function(){return c.b})),n.d(t,"b",(function(){return u}));var r=n("./node_modules/lit-html/lib/parts.js");const i=new var o=n("./node_modules/lit-html/lib/template-result.js"),a=n("./node_modules/lit-html/lib/directive.js"),s=(n("./node_modules/lit-html/lib/dom.js"),n("./node_modules/lit-html/lib/part.js")),c=n("./node_modules/lit-html/lib/render.js");n("./node_modules/lit-html/lib/template-factory.js"),n("./node_modules/lit-html/lib/template-instance.js"),n("./node_modules/lit-html/lib/template.js");"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.4.1");const u=,"./node_modules/rxjs/_esm5/internal/Observable.js":"./node_modules/rxjs/_esm5/internal/Observer.js":"./node_modules/rxjs/_esm5/internal/Subject.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n("./node_modules/rxjs/node_modules/tslib/tslib.es6.js"),i=n("./node_modules/rxjs/_esm5/internal/Observable.js"),o=n("./node_modules/rxjs/_esm5/internal/Subscriber.js"),a=n("./node_modules/rxjs/_esm5/internal/Subscription.js"),s=n("./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js"),c=n("./node_modules/rxjs/_esm5/internal/SubjectSubscription.js"),u=n("./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js"),l=o.a),d=i.a),f=d)},"./node_modules/rxjs/_esm5/internal/SubjectSubscription.js":"./node_modules/rxjs/_esm5/internal/Subscriber.js":"./node_modules/rxjs/_esm5/internal/Subscription.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=),i=n("./node_modules/rxjs/_esm5/internal/util/isObject.js"),o=n("./node_modules/rxjs/_esm5/internal/util/isFunction.js"),a=),s=function(){ar t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this._parentOrParents,s=this._ctorUnsubscribe,u=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var d=0;d<n.length;++d){n[d].remove(this)}if(Object(o.a)(u)){s&&(this._unsubscribe=void 0);try{u.call(this)}catch(e){t=e instanceof a?c(e.errors):[e]}}if(r(l)){d=-1;for(var f=l.length;++d<f;){var p=l[d];if(Object(i.a)(p))try{p.unsubscribe()}catch(e){t=t||[],e instanceof a?t=t.concat(c(e.errors)):t.push(e)}}}if(t)throw new a(t)}},e.prototype.add=e.prototype.remove=e.EMPTY=((t=new e).closed=!0,t),e}();,"./node_modules/rxjs/_esm5/internal/config.js":"./node_modules/rxjs/_esm5/internal/operators/filter.js":"./node_modules/rxjs/_esm5/internal/operators/takeUntil.js":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("./node_modules/rxjs/node_modules/tslib/tslib.es6.js"),i=n("./node_modules/rxjs/_esm5/internal/Subscriber.js"),o=n("./node_modules/rxjs/_esm5/internal/Observable.js"),a=n("./node_modules/rxjs/_esm5/internal/util/subscribeToArray.js"),s=n("./node_modules/rxjs/_esm5/internal/util/hostReportError.js");ar u=c(),l=n("./node_modules/rxjs/_esm5/internal/symbol/observable.js");var d=n("./node_modules/rxjs/_esm5/internal/util/isObject.js"),f=function(e){if(e&&"function"==typeof e[l.a])return i=e,if((r=e)&&"number"==typeof r.length&&"function"!=typeof r)return Object(a.a)(e);if(e))return n=e,if(e&&"function"==typeof e[u])return t=e,var t,n,r,i,o=Object(d.a)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+o+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},p=i.a),m=(i.a,i.a));i.a;ar g=function(){eturn e.prototype.call=function(e,t){var n=new b(e),r=function(e,t){if(!t.closed){if(e instanceof o.a)return e.subscribe(t);var n;try{n=f(e)(t)}catch(e){t.error(e)}return n}}(this.notifier,new p(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n},e}(),b=m)},"./node_modules/rxjs/_esm5/internal/symbol/observable.js":"./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js":"./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js":"./node_modules/rxjs/_esm5/internal/util/hostReportError.js":"./node_modules/rxjs/_esm5/internal/util/identity.js":"./node_modules/rxjs/_esm5/internal/util/isFunction.js":"./node_modules/rxjs/_esm5/internal/util/isObject.js":"./node_modules/rxjs/_esm5/internal/util/subscribeToArray.js":"./node_modules/rxjs/node_modules/tslib/tslib.es6.js":"./src/rai-tracker/webtrekk/rai-webtrekk.js":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/lit-element/lit-element.js"),i=n("../utilities/utils.js");ction c(e){return 200===e.status&&!e.responseText.match(/^thistextshouldbethere(\n|)$/)}r d,f={detectAnyAdblocker:detectDomAdblocker:(d=l,,detectBraveShields:function(){return new Promise((function(e,t){o()?s().then((function(t){e(c(t))})):e(!1)}))},detectOperaAdblocker:isDetected:function(e,t){return (l,"The `isDetected()` method is now deprecated, please use `detectAnyAdblocker()` instead, which returns a Promise and can detect more stuff (like Brave Shields).")},p=n("../../../../templates-handlebars/raiplay/assets-src/js/webcomponents/src/rai-player/player-events.js"),m=(n("./src/rai-tracker/webtrekk/webtrekk-page-library.js"),n("./node_modules/rxjs/_esm5/internal/Subject.js")),h=n("./node_modules/rxjs/_esm5/internal/operators/filter.js"),g=n("./node_modules/rxjs/_esm5/internal/operators/takeUntil.js");st v=new m.a;let w=!1;const E=window.Rai._trackEnqueue;class k extends r.a{constructor(){super(),this.pageInfo=void 0,this.mediaInfo=void 0,this.mode=void 0,this.pageInfoBaseData=void 0,this.wt=new window.webtrekkV3(window.webtrekkConfig),Object(i.g)("WtInstance",this.wt),this._q=E}stUpdated(){f.detectAnyAdblocker().then(e=>{this.adBlock=e,E.pageQueue.pipe(Object(h.a)(Boolean),Object(g.a)(v)).subscribe(e=>{"action"==e.mode&&e.linkId&&e.customClickParameter?this.trackAction({linkId:e.linkId,customClickParameter:e.customClickParameter}):("extendInfoByComponent"==this.mode&&(e=_(_({},this.pageInfoBaseData),e)),this.pageInfo=e,this.trackPage())})},,this.firstUpdate=!0}disconnectedCallback(){super.disconnectedCallback(),v.next(),v.complete()}getMediaInfo(e){let t=e||this.mediaInfo,n=t.track_info,r=[document.referrer&&document.referrer.indexOf("msn.com")>-1?"msn":"web",n.channel,n.editor,n.program_title,n.media_type,n.form,n.episode_title||n.title,n.season||n.edit_year||n.year,n.episode_number,n.genres&&n.genres.length?n.genres[0]:n.program_genres?n.program_genres[0]:null,n.sub_genres&&n.sub_genres.length?n.sub_genres[0]:n.program_sub_genres?n.program_sub_genres[0]:null,n.typology,n.domain].reduce((e,t,n,r)=>t?e+"mg"+(n+1)+"="+t+(n+1==r.length?"":";"):e,""),i=[document.referrer&&document.referrer.indexOf("msn")>-1?"msn":"web",n.domain,n.media_type,n.program_title,n.episode_title||n.title,n.id].filter(.join(" - ");return this.mediaParams=[i,"playerEvent","currentEventTime","mediaDuration",r,null,"event.volume","event.muted"],t}initMediaTrack(){Object(i.b)(n.p+"/common/assets/js/webcomponents/webtrekk-media-library.js",()=>{this.mediaLibraryLoaded=!0,this.wt.sendinfo_media=window.wt_sendinfo_media;let e=p.a.media;this.handledEvents=[e.READY,e.FIRSTPLAY,e.PLAY,e.ADS.STARTED,e.PAUSE,e.SEEK_END,e.ADS.SKIPPED,e.HEARTBEAT,e.ENDED,e.DISPOSE,e.PROGRAM_INFO_UPDATED,e.AUDIO_CHANGED,e.SUBTITLE_CHANGED,e.PIP_START,e.PIP_STOP,e.FULLSCREEN_EVENT,e.DRM_LICENSE_STATUS_INTERNAL_ERROR,e.ERROR,e.MEDIAPOLIS_PARSE_ERROR,e.NOT_SUPPORTED_MEDIA_TYPE,e.ADS.ERROR],window.wt_init_media(this.wt.trackDomain,this.wt.trackId),E.mediaQueue.pipe(Object(h.a)(,Object(g.a)(v)).subscribe(e=>{try{this.trackMedia(e.detail)}catch(e){console.error(e)}})})}trackPage(){"rainews"===this.pageInfo.domain&&"homepage"===this.pageInfo.content&&"app"!==this.pageInfo.traffic_origin&&(document.hasFocus()||(this.pageInfo.channel="nofocus"));let e=this.pageInfo,t=this.wt,n=e=>{let t=Object(i.c)()+";";if(t+="adBlock:"+this.adBlock+(this.pageInfo.customParam?";"+this.pageInfo.customParam:""),Object(i.f)()){t+=";iframe="+("string"==typeof document.referrer?document.referrer:"unknown")}if("string"==typeof window.predictHpType)t+=";predictHpType="+window.predictHpType;else try{let e=utils.cookie.get("predictPageRef");e&&(t+=";predictHpType="+e),utils.cookie.remove("predictPageRef","/",document.location.host)}catch(e){}return t},r=function(e){for(var t in e)e[t]?"string"==typeof e[t]?e[t]=e[t].toLowerCase().replace(/['`’]/g,""):e[t]=e[t].toString():delete e[t];return e},o=[null,"aggregato",e.domain,e.typology||e.program_typology,e.program_title,e.content,null,null,e.program_title,e.section,e.sub_section,e.genres&&e.genres.length?e.genres[0]:e.program_genres?e.program_genres[0]:null,e.sub_genres&&e.sub_genres.length?e.sub_genres[0]:e.program_sub_genres?e.program_sub_genres[0]:null,e.year,e.edition],a=[null,/[\\?&]refresh_ce/.test(window.location.search)?"refresh_ce":"no-refresh",e.channel,e.date,e.page_type,e.genres&&e.genres.length?e.genres.toString().replace(/,/g,";")+(e.sub_genres&&e.sub_genres.length?";"+e.sub_genres.toString().replace(/,/g,";"):"")+";"+n():e.program_genres&&e.program_genres.length?e.program_genres.toString().replace(/,/g,";")+(e.program_sub_genres&&e.program_sub_genres.length?";"+e.program_sub_genres.toString().replace(/,/g,";"):"")+";"+n():n(),e.season,e.episode_title,e.episode_number,!!window.startLoadDate&&Date.now()-window.startLoadDate||null,e.traffic_origin||"browsing",e.device||"browser","[platform]"!=e.platform?e.platform:"web",e.editor,e.typology];o=r(o),a=r(a),t.contentId=document.location.protocol+"//"+document.location.host+document.location.pathname,t.contentGroup=o,t.customParameter=a,t.internalSearch=e.cerca_per;let s=Object(i.a)("Raisso"),c=Object(i.a)("ProfileManager"),u=!!c&&c.getUserProfile();s&&s.checkLogin()&&u&&(u.birthYear&&u.age&&u.age>=18&&(t.birthdayJ=u.birthYear,t.birthdayM="01",t.birthdayD="01"),t.customerId=u.ua||null,t.gender=u.gender?"m"==u.gender.toLowerCase()?"1":"2":"3",t.urmCategory={1:u.personalizzazione?"true":"false"});try{t.sendinfo()}catch(e){}}trackAction(e){let t=this.wt;t.contentId=document.location.protocol+"//"+document.location.host+document.location.pathname,t.sendinfo(e)}trackMedia(e){if(!e.eventData)throw"Missing player event data";let t=e.eventData,n=p.a.media,r=this.wt.sendinfo_media,i=(this.wt.sendinfo,this.mediaParams?[...this.mediaParams]:[]);t.eventName!=n.PROGRAM_INFO_UPDATED&&t.eventName!=n.READY||this.getMediaInfo(e.mediaInfo.current_program_info);let o=this.mediaInfo.track_info,a=[...this.mediaParams];switch(i[2]=Math.round(t.currentTime),i[3]=Math.round(t.mediaDuration),i[6]=t.volume,i[7]=t.muted,a[2]=Math.round(t.currentTime),a[3]=Math.round(t.mediaDuration),a[6]=t.volume,a[7]=t.muted,t.eventName){case n.READY:a[1]="init",r(...a),a[1]=o.media_type,r(...a),a[1]="web";break;case n.FIRSTPLAY:if(a[1]="start content",r(...a),a[1]="play",!w){r(...a),w=!0;let e=setInterval((function(){a[1]="play300",r(...a),clearInterval(e)}),300)}break;case n.PLAY:a[1]="play";break;case n.ADS.STARTED:a[1]="spot "+t.mediaType+" "+t.sequenceIndex;break;case n.PAUSE:a[1]="pause";break;case n.SEEK_END:a[1]="seek";break;case n.ADS.SKIPPED:a[1]="vastSkipped";break;case n.HEARTBEAT:"live"==o.media_type&&(a[1]="uptime",r(...a)),a[1]="pos";break;case n.ENDED:a[1]="eof";break;case n.DISPOSE:a[1]="stop";break;case n.PROGRAM_INFO_UPDATED:i[1]="eof",r(...i),a[1]="init",r(...a),a[1]=o.media_type,r(...a),a[1]="web",r(...a),a[1]="start content",r(...a),a[1]="play";break;case n.AUDIO_CHANGED:a[1]=t.additionalData&&t.additionalData.audioTrack?t.additionalData.audioTrack:"audio changed";break;case n.SUBTITLE_CHANGED:a[1]=t.additionalData&&t.additionalData.subtitleTrack?t.additionalData.subtitleTrack:"subtitle changed";break;case n.PIP_START:case n.PIP_STOP:a[1]=t.additionalData&&t.additionalData.pipMode?t.additionalData.pipMode:"PIP changed";break;case n.FULLSCREEN_EVENT:a[1]=t.fullscreen?"fullscreen":"windowed";break;case n.DRM_LICENSE_STATUS_INTERNAL_ERROR:case n.ERROR:case n.MEDIAPOLIS_PARSE_ERROR:case n.NOT_SUPPORTED_MEDIA_TYPE:case n.ADS.ERROR:a[1]="ERROR: "+t.eventName,w=!1}w?w=!1:t.mediaType&&r(...a)}traceDebug(...e){console.log("WT",e)}}!function(){try{customElements.get("rai-webtrekk")||customElements.define("rai-webtrekk",k)}catch(e){console.error(e)}}()},"./src/rai-tracker/webtrekk/webtrekk-page-library.js":function(e,t){window.webtrekkConfig=window.webtrekkConfig||{trackId:"602039762736393",trackDomain:"rai-italia01.wt-eu02.net",domain:"www.dummydomain-donotchange.com",cookie:"3",forceHTTPS:!0,mediaCode:"wt_mc",contentId:"",tabBrowsing:!1,execCDB:!1,execRTA:!1,safetag:{async:!0,timeout:2e3,safetagDomain:"responder.wt-safetag.com",safetagId:"602039762736393",option:{}}};var n=window.webtrekkConfig;if(function(e){e.webtrekkUnloadObjects=e.webtrekkUnloadObjects||[],e.webtrekkLinktrackObjects=e.webtrekkLinktrackObjects||[],e.webtrekkHeatmapObjects=e.webtrekkHeatmapObjects||[];var t=function(e){e.getJSON=function(e){if("string"==typeof e&&e&&"{"===e.charAt(0)&&"}"===e.charAt(e.length-1))try{var t=new Function("return "+e)();if("object"==typeof t)return t}catch(e){}return null},e.parseJSON=function(t,n){for(var r in t){var i=r;"object"==typeof t[i]?(void 0!==e.jsonPara[i]&&"object"!=typeof e.config[e.jsonPara[i][0]]&&(e.config[e.jsonPara[i][0]]={}),e.parseJSON(t[i],i)):n?(isNaN(parseInt(i))||500>parseInt(i))&&(e.config[e.jsonPara[n][0]][i]=t[i]):void 0!==e.jsonPara[i]&&(e.config[e.jsonPara[i][0]]=t[i])}},e.getMappingParam=function(t){var n,r,i,o=t.split("");for(n=0;n<o.length;n++)if(!isNaN(parseInt(o[n]))){r=n;break}return r?(o=t.substr(0,r),i=t.substr(r,t.length-1)):o=t,{mapping:void 0!==e.jsonPara[o]&&e.jsonPara[o][0],index:i||!1}}},n=function(t){t.checkAsynchron=function(t,n,r,i){return void 0!==e[t]?n?n(!0,r):1:0>=i?n?n(!1,r):1:(e.setTimeout}),100),1)},t.loadAsynchron=function(e,n,r,i){t.include(e)&&t.checkAsynchron(n,r||!1,t,i||2e3)},t.includ}},r=function(e){e.registerEven},e.unregisterEvent=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)}},i=function(e){e.getTimezon},e.maxle},e.indexO},e.wtTypeo},e.wtLengt},e.wtEscape=function(e){try{return encodeURIComponent(e)}catch(t){return escape(e)}},e.wtUnescape=function(e){try{return decodeURIComponent(e)}catch(t){return unescape(e)}},e.getAttribute=function(e,t){return"string"==typeof e.getAttribute(t)?e.getAttribute(t):"object"==typeof e.getAttribute(t)&&"object"==typeof e.attributes[t]&&null!==e.attributes[t]?e.attributes[t].nodeValue:""},e.plugInArray=function(e,t){if("object"!=typeof e)return!1;for(var n=0;n<e.length;n++){var r=RegExp(e[n].toLowerCase(),"g");if(-1!==t.toLowerCase().search(r))return e[n]}return!1}},o=function(e){e.decryp},e.checkSC=function(t){if("string"!=typeof e.secureConfig)return!1;for(var n=e.secureConfig.split(";"),r=0;r<n.length;r++)if(n[r]===t)return!0;return!1}},a=function(e){e.wtHre},e.wtLocatio},e.urlParam=function(t,n,r){if(!t||null==t)return r;var i=[];for(0<t.indexOf("?")&&(i=t.split("?")[1].replace(/&amp;/g,"&").split("#")[0].split("&")),t=0;t<i.length;t++)if(0===i[t].indexOf(n+"="))return e.wtUnescape(i[t].substring(n.length+1).replace(/\+/g,"%20"));return r},e.isOwnDomain=function(t){var n="";if(e.domain)if(0===e.domain.toUpperCase().indexOf("REGEXP:")){if((n=RegExp(e.domain.substring(7),"i")).test(e.getDomain(t)))return!0}else{n=e.domain.split(";"),t=e.getDomain(t);for(var r=0;r<n.length;r++)if(t===n[r])return!0}return!1},e.getDomain=function(t){if("string"!=typeof t)return"";t=(t=e.wtUnescape(t)).split("://")[1];var n=RegExp("^(?:[^/]+://)?([^/:]+)","g");return void 0!==t&&(t=t.match(n))[0]?t[0].toLowerCase():""}},s=function(e,t,n){var r=RegExp(t+"="+n);return n=document.location.href,t=(new Date).getTime(),r=r.exec(n),n=/wt_t=([\d]{13})/.exec(n),!!(r&&void 0!==r[1]&&n&&void 0!==n[1]&&parseInt(n[1])+9e5>t)&&e.wtUnescape(r[1])},c=function(t){var n=!1;t.baseparams=function(){var r,i,o;if(r=(r=(r=screen.width+"x"+screen.height+",")+((void 0!==screen.colorDepth?screen.colorDepth:screen.pixelDepth)+","))+((i="boolean"!=typeof(i=navigator.cookieEnabled)?-1!==document.cookie.indexOf("="):i)?"1,":"0,")+(new Date).getTime()+",",t.referrerOncePerSession&&t.getCookie("wt_ropc"))i="2";else{i="0";var a=s(t,"wt_ref","(.+?)(&|$)");""!==t.getCookie("wt_ref")?(i=t.wtEscape(t.getCookie("wt_ref")),t.setCookie("wt_ref","",-3600)):a?i=t.wtEscape(a):n?(i=t.wtEscape(n),n=!1):0<document.referrer.length&&(i=t.wtEscape(document.referrer)),t.sentFullPixel?i="2":t.isOwnDomain(i)&&(i="1"),t.referrerOncePerSession&&1<i.length&&t.setCookie("wt_ropc","1")}if(!(a=e.innerHeight))try{a=document.documentElement.clientHeight}catch(e){}if(!a)try{a=document.body.clientHeight}catch(e){}if(void 0===a&&(a=-1),!(o=e.innerWidth))try{o=document.documentElement.clientWidth}catch(e){}if(!o)try{o=document.body.clientWidth}catch(e){}return void 0===o&&(o=-1),a&&a>screen.height&&(a=screen.height),o&&o>screen.width&&(o=screen.width),(r=r+i+","+o+"x"+a)+","+(navigator.javaEnabled()?"1":"0")},t.setReferre}},u=(s=function(e,t,n){var r=RegExp(t+"="+n);return n=document.location.href,t=(new Date).getTime(),r=r.exec(n),n=/wt_t=([\d]{13})/.exec(n),!!(r&&void 0!==r[1]&&n&&void 0!==n[1]&&parseInt(n[1])+9e5>t)&&e.wtUnescape(r[1])},function(e,t,n,r){"1"!==e.cookie||e.optOut||e.deactivatePixel||e.firstParty(),(n=n||"")||(n=e.formObject&&"noForm"!==t?"form":"link"),"function"==typeof e.beforeUnloadPixel?e.beforeUnloadPixel():"form"===n&&e.executePlugin(e.getPluginConfig("form","before"));var i="";e.config.linkId&&(i+="&ct="+e.wtEscape(e.maxlen(e.wtUnescape(e.config.linkId),255)))&&(e.linktrackOut&&(i+="&ctx=1"),"string"==typeof(o=e.ccParams)&&""!==o&&(i+=o));if(e.wtEp)if(e.wtEpEncoded)i+=e.wtEp;else if("string"==typeof(o=e.wtEp)&&""!==o)for(var o=o.split(/;/),a=0;a<o.length;a++)if(void 0!==o[a]){var s=o[a].split(/\=/);e.checkSC("custom")&&(s[1]=e.decrypt(s[1])),s[1]=e.wtEscape(s[1]),i+="&"+s[0]+"="+s[1]}"noForm"!==t&&(i+=r.getFormTrackingData()),""!==i&&(e.quicksend(e.wtEscape(e.contentId.split(";")[0])+",1,"+e.baseparams(),i),e.config.linkId="",e.ccParams="",e.wtEp=""),"function"==typeof e.afterUnloadPixel?e.afterUnloadPixel():"form"===n&&e.executePlugin(e.getPluginConfig("form","after"))}),l=function(e){var t,n=[];for(t in e.safetagParameter){var r=t;if("executePluginFunction"===r)e.executePluginFunction+=e.safetagParameter[r],e.safetagParameter[r]="";else if("object"==typeof e.safetagParameter[r])for(var i in"object"!=typeof e[r]&&(e[r]={}),e.safetagParameter[r]){var o=i;e[r][o]=e.safetagParameter[r][o]}else e[r]=e.safetagParameter[r],"linkTrack"!==r&&"heatmap"!==r&&"tabBrowsing"!==r&&"execCDB"!==r&&"execRTA"!==r||n.push(r)}for(t=0;t<n.length;t++)switch(n[t]){case"linkTrack":e.linkTrackInit();break;case"heatmap":e.heatmapTrackInit();break;case"tabBrowsing":e.startTabBrowsing();break;case"execCDB":e.startCDB();break;case"execRTA":e.startRTA()}e.safetagParameter.pixel=e},d=function(t){var n=function(e,n,r){!1!==e?e():t.executePlugin(t.getPluginConfig(n||"page",r))};t.getMediaCode=function(){if(t.mediaCode){var e=[],n=t.mediaCode.split(";"),r=0,i=[];t.mediaCodeValue&&(e=t.mediaCodeValue.split(";"));for(var o=0;o<n.length;o++){var a=t.urlParam(location.href,n[o],"");if(t.mediaCodeCookie){for(var s,c=!1,u=(t.trackId+"").split(",")[0],l=(u="wt_mcc_"+(t.config.campaignAction?t.config.campaignAction.substring(0,1):"c")+"_"+u,t.getCookie(u)),d=0,f=(s=n[o]+"_"+a).length,p=0;p<f;p++)d=(d<<5)-d+s.charCodeAt(p),d&=d;s=d>999999999999999?"0":d+"",-1===l.indexOf(","+s+",")&&a?(i.push(n[o]+t.wtEscape("="+a)),c=!0):r++,c&&(a="","eid"===t.mediaCodeCookie&&(a=2592e3),t.setCookie(u,l+","+s+",",a))}else void 0!==e&&void 0!==e[o]&&""!==e[o]?i.push(n[o]+t.wtEscape("="+e[o])):""!==a&&i.push(n[o]+t.wtEscape("="+a))}n.length===r&&0!==n.length&&i.push("ignore%3Dignore"),t.config.campaignId=i.join(";")}},t.getExtLifeCycles=function(e,n,r){for(var i="",o={},a=e.split("|"),s=0;s<a.length;s++){for(var c=a[s].split(";"),u=0;u<c.length;u++)i=0===u?i+t.wtEscape(c[u]):i+c[u],i+=";";i=i.substr(0,i.length-1),i+="|"}for(var l in i=i.substr(0,i.length-1),o.xlcl=t.wtEscape(e.split("|").length),o.xlct=t.wtEscape(n),void 0!==r&&(o.xlcv=t.wtEscape(r)),o.xlc=t.wtEscape(i),e="",o)e+="&"+l+"="+o[l];return e},t.quicksend=function(e,n,r){!t.trackDomain||!t.trackId||t.deactivatePixel||t.deactivateRequest?t.deactivateRequest=!1:(r||(r="wt"+(t.fileSuffix?".pl":"")),void 0===t.requestTimeout&&(t.requestTimeout=5),t.geid&&(n="&geid="+t.geid+n),t.cdbeid&&(n="&cdbeid="+t.cdbeid+n),"1"===t.cookie&&(n="&eid="+t.eid+"&one="+(t.cookieOne?"1":"0")+"&fns="+(t.forceNewSession?"1":"0")+n),"1"!==t.cookie&&(t.cookieEidTimeout&&(n="&cet="+t.cookieEidTimeout+n),t.cookieSidTimeout&&(n="&cst="+t.cookieSidTimeout+n)),0<t.pixelSampling&&(n+="&ps="+t.pixelSampling),n="&tz="+t.getTimezone()+n,n+="&pu="+t.wtEscape(document.location.href.split("#")[0]),e="//"+t.trackDomain+"/"+t.trackId+"/"+r+"?p="+t.version+","+e+n+"&eor=1",t.tabBrowsing?t.sendTabBrowsingPixel(e,r):!t.ignorePrerendering&&t.isChrome&&void 0!==document.webkitHidden?("object"!=typeof t.prerendering&&(t.prerendering=[]),document.webkitHidden?(t.prerendering.push(e),t.registerEvent(document,"webkitvisibilitychange",(function(){t.sendPrerendering()}))):t.sendPixel(e,r)):t.sendPixel(e,r),"hm"!==r&&"hm.pl"!==r&&(t.cookieOne=!1,t.forceNewSession=!1,t.sentFullPixel=1))},t.sendPrerenderin},t.send=function(n,r,i){var o;if("link"!==r&&"click"!==r||(t.config.linkId=n),t.config.contentId=t.config.contentId?t.config.contentId:t.contentId,(n=n||t.config.contentId)||(n="no_content"),n=t.wtEscape(n)+",1,",n+=t.baseparams(),o=[],navigator.plugins&&"Microsoft Internet Explorer"!==navigator.appName)for(var a=0,c=navigator.plugins.length;a<c;a++){var l="";l="Shockwave Flash"===navigator.plugins[a].name?navigator.plugins[a].description:navigator.plugins[a].name;(l=t.plugInArray(t.plugins,l))&&o.push(l)}if(o=o.join("|"),a="",t.paramFirst)for(c=t.paramFirst.split(";"),l=0;l<c.length;l++){var d=(f=t.getMappingParam(c[l])).mapping,f=f.index;d&&(f?t.config[d]&&void 0!==t.config[d][f]&&t.config[d][f]&&(a+="&"+c[l]+"="+t.wtEscape(t.config[d][f])):t.config[d]&&(a+="&"+c[l]+"="+t.wtEscape(t.config[d])))}if("string"==typeof i&&""!==i){for(var p=i.split(/;/),m=0;m<p.length;m++)if(void 0!==p[m]){var h=p[m].split(/\=/);t.checkSC("custom")&&(h[1]=t.decrypt(h[1])),h[1]=t.wtEscape(h[1]),a+="&"+h[0]+"="+h[1]}}else{for(h in t.wtEpEncoded=!1,f=new t.PredefinedParameter,t.config)i=h+"",f.put(i,t.config[i]);var g=f.get("all");t.config.customParameter=t.mergeCustomParameter(t.config.customParameter,g.customParameter),h=t.checkCustomParameter(t.config.customParameter,"cp"),t.config.customSessionParameter=t.mergeCustomParameter(t.config.customSessionParameter,g.customSessionParameter),i=t.checkCustomParameter(t.config.customSessionParameter,"cs"),c=t.checkCustomParameter(t.config.customTimeParameter,"ce"),l=t.checkCustomParameter(t.cdb,"cdb"),t.config.customEcommerceParameter=t.mergeCustomParameter(t.config.customEcommerceParameter,g.customEcommerceParameter),d=t.checkCustomParameter(t.config.customEcommerceParameter,"cb"),t.config.orderValue&&-1===t.paramFirst.indexOf("ov;")&&(a=t.checkSC("order")?a+"&ov="+t.wtEscape(t.decrypt(t.config.orderValue)):a+"&ov="+t.wtEscape(t.config.orderValue)),t.config.currency&&-1===t.paramFirst.indexOf("cr;")&&(a=t.checkSC("order")?a+"&cr="+t.wtEscape(t.decrypt(t.config.currency)):a+"&cr="+t.wtEscape(t.config.currency)),t.config.orderId&&-1===t.paramFirst.indexOf("oi;")&&(a+="&oi="+t.wtEscape(t.config.orderId)),t.config.product&&(-1===t.paramFirst.indexOf("ba;")&&(a+="&ba="+t.wtEscape(t.config.product)),t.config.productCost&&-1===t.paramFirst.indexOf("co;")&&(a+="&co="+t.wtEscape(t.config.productCost)),t.config.productQuantity&&-1===t.paramFirst.indexOf("qn;")&&(a+="&qn="+t.wtEscape(t.config.productQuantity)),t.config.productCategory=t.mergeCustomParameter(t.config.productCategory,g.productCategory),a+=t.checkCustomParameter(t.config.productCategory,"ca"),t.config.productStatus&&-1===t.paramFirst.indexOf("st;")&&(a+="&st="+t.wtEscape(t.config.productStatus)));var b=s(t,"wt_cd","(.+?)(&|$)");if(t.config.customerId||(t.config.customerId=b),t.config.customerId&&-1===t.paramFirst.indexOf("cd;")&&(a+="&cd="+t.wtEscape(t.config.customerId)),t.config.crmCategory=t.mergeCustomParameter(t.config.crmCategory,g.crmCategory),a+=t.checkCustomParameter(t.config.crmCategory,"vc"),null===f.get("birthday")&&t.config.birthdayJ&&t.config.birthdayM&&t.config.birthdayD&&f.put("birthday",t.config.birthdayJ+t.config.birthdayM+t.config.birthdayD),null!==f.get("telefon")&&f.put("telefon",f.get("telefon").replace(/\W|_/g,"")),t.config.urmCategory=t.mergeCustomParameter(t.config.urmCategory,g.urmCategory),a+=t.checkCustomParameter(t.config.urmCategory,"uc"),t.browserLang&&(a+="&la="+t.wtEscape(t.browserLang)),t.config.contentGroup=t.mergeCustomParameter(t.config.contentGroup,g.contentGroup),a+=t.checkCustomParameter(t.config.contentGroup,"cg"),f="",t.config.campaignId){var _=(b=t.config.campaignAction?t.config.campaignAction.substring(0,1):"c")+"_"+t.config.campaignId;_ in t.sentCampaignIds?t.config.campaignId="ignore%3Dignore":t.sentCampaignIds[_]=!0,-1===t.paramFirst.indexOf("mc;")&&(a+="&mc="+t.wtEscape(t.config.campaignId)),-1===t.paramFirst.indexOf("mca;")&&(a+="&mca="+b)}if(t.config.customCampaignParameter=t.mergeCustomParameter(t.config.customCampaignParameter,g.customCampaignParameter),f+=t.checkCustomParameter(t.config.customCampaignParameter,"cc"),t.trackingSwitchMediaCode&&(a+="&tmc="+t.wtEscape(t.trackingSwitchMediaCode)),t.trackingSwitchMediaCodeValue&&(a+="&tmcv="+t.wtEscape(t.trackingSwitchMediaCodeValue)),t.trackingSwitchMediaCodeTimestamp&&(a+="&tmct="+t.wtEscape(t.trackingSwitchMediaCodeTimestamp)),"object"==typeof e.wt_ts&&(void 0!==e.wt_ts.trackingSwitchMediaCode&&(a+="&tmc="+t.wtEscape(e.wt_ts.trackingSwitchMediaCode)),void 0!==e.wt_ts.trackingSwitchMediaCodeValue&&(a+="&tmcv="+t.wtEscape(e.wt_ts.trackingSwitchMediaCodeValue)),void 0!==e.wt_ts.trackingSwitchMediaCodeTimestamp&&(a+="&tmct="+t.wtEscape(e.wt_ts.trackingSwitchMediaCodeTimestamp))),g="",void 0!==e.wt_vt&&(m=e.wt_vt),void 0===m&&(m=t.urlParam(location.href,"wt_vt",!1)),m)for(b=t.getCookie("wt_vt").split(";"),_=0;_<b.length;_++)-1!==b[_].indexOf(m+"v")&&(g="&wt_vt="+b[_].split("t")[0].split("v")[1]);if(g&&(a+=g),t.config.internalSearch&&-1===t.paramFirst.indexOf("is;")&&(a+="&is="+t.wtEscape(t.maxlen(t.wtUnescape(t.config.internalSearch),255))),t.config.dynamicParameters)for(p in t.config.dynamicParameters)m=p+"",t.config.dynamicParameters[m]&&(a="object"==typeof t.config.dynamicParameters[m]?a+t.checkCustomParameter(t.config.dynamicParameters,m):a+"&"+p+"="+t.wtEscape(t.config.dynamicParameters[m]));h&&(a+=h),f&&(a+=f),c&&(a+=c),d&&(a+=d),i&&(a+=i),l&&(a+=l),t.config.customSid&&(a+="&csid="+t.config.customSid),t.config.customEid&&(a+="&ceid="+t.config.customEid),t.config.xwtip&&(a+="&X-WT-IP="+t.wtEscape(t.config.xwtip)),t.config.xwtua&&(a+="&X-WT-UA="+t.wtEscape(t.config.xwtua)),t.config.xwtrq&&(a+="&X-WT-RQ="+t.wtEscape(t.config.xwtrq)),t.xwteid&&(a+="&X-WT-EID="+t.wtEscape(t.xwteid),t.xwteid=!1),t.config.xwtstt&&(a+="&X-WT-STT="+t.wtEscape(t.config.xwtstt)),!t.sentFullPixel&&t.firstVisitContact&&(a+="&fvc="+t.firstVisitContact),!t.sentFullPixel&&t.lastVisitContact&&(a+="&lvc="+t.lastVisitContact)}t.config.linkId&&t.config.customClickParameter&&(a+=t.checkCustomParameter(t.config.customClickParameter[t.config.linkId]?t.config.customClickParameter[t.config.linkId]:t.config.customClickParameter,"ck"),t.ccParams=!1),t.config.xlc&&t.config.xlct&&(""!==t.config.xlc||""!==t.config.xlct)&&(p="",a+=p=t.config.xlcv?t.getExtLifeCycles(t.config.xlc,t.config.xlct,t.config.xlcv):t.getExtLifeCycles(t.config.xlc,t.config.xlct)),t.config.contentId||t.config.linkId||(t.config.contentId=t.contentId,t.config.linkId="wt_ignore"),t.config.linkId?(t.wtEp=a,t.wtEpEncoded=!0,u(t,"noForm",r)):("1"===t.cookie?t.cookieOne&&(a+="&np="+t.wtEscape(o)):a+="&np="+t.wtEscape(o),t.quicksend(n,a))};t.sendinfo=function(r,i,o,a){o=o||"page",-1===location.href.indexOf("fb_xd_fragment")&&(t.safetag&&l(t),t.config="object"==typeof r?r:t.getConfig(),t.safetagInProgress?(r?t.saveSendinfoArguments.push([t.config,i,o,a]):t.saveSendinfoArguments.push([!1,i,o,a]),t.safetagTimeoutStarted||(t.startSafetagTimeoutDate=(new Date).getTime(),e.setTimeout((function(){!function n(){t.safetagTimeoutStarted=!0;var r=(new Date).getTime()-t.startSafetagTimeoutDate;if(t.safetagInProgress&&r<t.safetag.timeout)e.setTimeout((function(){n()}),5);else{for(t.safetagTimeoutStarted=!1,t.safetagInProgress=!1,r>t.safetag.timeout&&(t.xwtstt=t.safetag.timeout+""),r=0;r<t.saveSendinfoArguments.length;r++){var i=t.saveSendinfoArguments[r];t.sendinfo(i[0],i[1],i[2],i[3])}t.saveSendinfoArguments=[]}}()}),5))):(t.config.linkId&&(o="click",i||(i=t.config.linkId)),n(t.beforeSendinfoPixel,o,"before"),t.safetag&&l(t),t.optOut||t.deactivatePixel||("1"===t.cookie?t.firstParty():t.xwteid=s(t,"wt_eid","([\\d]{19})")),t.config.campaignId||!t.mediaCode||"page"!==o||t.config.linkId||t.getMediaCode(),""===t.contentId&&""===i||t.send(i,o,a),n(t.afterSendinfoPixel,o,"after")))}},},p=function(e){e.setProperty("paramFirst",""),e.jsonPara={ck:["customClickParameter",{}],cp:["customParameter",{}],cs:["customSessionParameter",{}],ce:["customTimeParameter",{}],cb:["customEcommerceParameter",{}],vc:["crmCategory",{}],uc:["urmCategory",{}],ca:["productCategory",{}],cc:["customCampaignParameter",{}],cg:["contentGroup",{}],ct:["linkId",""],ov:["orderValue",""],cr:["currency",""],oi:["orderId",""],ba:["product",""],co:["productCost",""],qn:["productQuantity",""],st:["productStatus",""],cd:["customerId",""],is:["internalSearch",""],mc:["campaignId",""],mca:["campaignAction",""]},e.checkBrowser=function(){e.isIE=-1!==navigator.appName.indexOf("Microsoft"),e.isIE||(e.isOpera=-1!==navigator.appName.indexOf("Opera"),e.isOpera||(e.isSafari=-1!==navigator.vendor.toLowerCase().indexOf("apple"),e.isChrome=-1!==navigator.vendor.toLowerCase().indexOf("google"),e.isSafari||e.isChrome||(e.isFirefox=-1!==navigator.userAgent.toLowerCase().indexOf("firefox"))))},e.generateDefaultConfig("trackId trackDomain domain forceHTTPS secureConfig beforeSendinfoPixel afterSendinfoPixel beforeUnloadPixel afterUnloadPixel ignorePrerendering plugins trackingSwitchMediaCode trackingSwitchMediaCodeValue trackingSwitchMediaCodeTimestamp isIE isOpera isSafari isChrome isFirefox wtEpEncoded fileSuffix dynamicParameters xwtip xwtua xwtrq config xwteid xwtstt customTimeParameter sentFullPixel wtEp".split(" ")),e.plugins||(e.plugins="Adobe Acrobat;Windows Media Player;Shockwave Flash;RealPlayer;QuickTime;Java;Silverlight".split(";")),"string"==typeof e.plugins&&(e.plugins=e.plugins.split(";")),e.browserLang=!1,"string"==typeof navigator.language?e.browserLang=navigator.language.substring(0,2):"string"==typeof navigator.userLanguage&&(e.browserLang=navigator.userLanguage.substring(0,2)),e.checkBrowser()},m=function(e){e.url2contentId=function(e){return e?1>(e=/\/\/(.*)/.exec(e)).length?"no_content":e[1].split("?")[0].replace(/\./g,"_").replace(/\//g,".").replace(/\.{2,}/g,".").toLowerCase().split(";")[0]:"no_content"},e.generateDefaultConfig("contentId contentGroup internalSearch numberSearchResults errorMessages npsScore npsScoreFeedback paywall articleTitle pageMainCategory pageSubCategory pageAuthor contentTags pageTitle pageType pageLength daysSincePublication testVariant testExperiment customParameter".split(" ")),e.contentId=e.contentId?e.contentId:e.url2contentId(document.location.href)},h=function(e){void 0===e.safetag&&(e.safetag=!1),void 0===e.safetagInProgress&&(e.safetagInProgress=!1),void 0===e.safetagParameter&&(e.safetagParameter={}),void 0===e.update&&(e.update=function(){}),e.saveSendinfoArguments=[],e.safetagTimeoutStarted=!1},},b=function(e){e.generateDefaultConfig("customEcommerceParameter orderValue currency orderId product productCost productQuantity productCategory productStatus couponValue productLabel productMainCategory productSubCategory productManufacturer paymentMethod productShortDescription productLongDescription shippingService shippingSpeed shippingCosts grossMargin orderStatus productVariant productSoldOut".split(" "))},},y=function(e){e.setProperty("formAttribute","name"),e.setProperty("formFieldAttribute","name"),e.setProperty("formValueAttribute","value"),e.setProperty("formFieldDefaultValue",{}),e.setProperty("multipleFormArray",[]),e.generateDefaultConfig("form formFullContent formAnonymous gatherFormsP formObject formName formFocus formSubmit formPathAnalysis".split(" "))},v=function(e){e.setProperty("linkTrackAttribute","name"),e.setProperty("delayLinkTrackTime",200),e.generateDefaultConfig("linkId linkTrack linkTrackParams linkTrackPattern linkTrackReplace linkTrackDownloads linkTrackIgnorePattern customClickParameter delayLinkTrack noDelayLinkTrackAttribute linktrackOut linktrackNamedlinksOnly ccParams".split(" "))},w=function(e){e.sentCampaignIds={},e.setProperty("campaignAction","click"),e.generateDefaultConfig("mediaCode mediaCodeValue mediaCodeCookie campaignId customCampaignParameter referrerOncePerSession".split(" "))},},k=function(e,t,n){e.getConfig=function(t){var n,r={};for(n in e)r[n]=!t&&e[n];return r},e.setProperty=function(r,i){e[r]=i,void 0!==t[r]?e[r]=t[r]:void 0!==n[r]&&(e[r]=n[r])},e.generateDefaultConfi}()},P=(l=function(e){var t,n=[];for(t in e.safetagParameter){var r=t;if("executePluginFunction"===r)e.executePluginFunction+=e.safetagParameter[r],e.safetagParameter[r]="";else if("object"==typeof e.safetagParameter[r])for(var i in"object"!=typeof e[r]&&(e[r]={}),e.safetagParameter[r]){var o=i;e[r][o]=e.safetagParameter[r][o]}else e[r]=e.safetagParameter[r],"linkTrack"!==r&&"heatmap"!==r&&"tabBrowsing"!==r&&"execCDB"!==r&&"execRTA"!==r||n.push(r)}for(t=0;t<n.length;t++)switch(n[t]){case"linkTrack":e.linkTrackInit();break;case"heatmap":e.heatmapTrackInit();break;case"tabBrowsing":e.startTabBrowsing();break;case"execCDB":e.startCDB();break;case"execRTA":e.startRTA()}e.safetagParameter.pixel=e},function(t){t.pageCounter=0,t.clickCounter=0,t.linkCounter=0,t.formCounter=0,t.heatmapCounter=0,t.configCounter=0,t.plugin={},t.setProperty("executePluginFunction",""),t.getRequestCounter=function(e,n){var r=0;return"after"!==n&&r++,void 0!==t[e+"Counter"]?(t[e+"Counter"]+=r,t[e+"Counter"]):0},t.getPluginConfi},t.executePlugin=function(n,r){if(!t.executePluginFunction||"string"!=typeof t.executePluginFunction)return!1;var i=r||{};t.epf=!1;for(var o=t.executePluginFunction.split(";"),a=0;a<o.length;a++)o[a]&&"function"==typeof e[o[a]]&&(t.epf=e[o[a]],t.epf(n,i));return!1!==t.epf},t.triggerConfigPlugins=function(e){void 0!==t.safetag&&t.safetag&&l(t),t.config="object"==typeof e?e:t.getConfig(),t.executePlugin(t.getPluginConfig("config","before")),void 0!==t.safetag&&t.safetag&&l(t),t.executePlugin(t.getPluginConfig("config","after"))}}),S=function(t,n,r){!function(e){e.setProperty("cookie","3"),e.setProperty("updateCookie",!0),e.setProperty("cookieSecure",!1),e.setProperty("cookieEidTimeout",!1),e.setProperty("cookieSidTimeout",!1);var t=function(t,n,r,i){t=(t=e.wtEscape(t)+"="+e.wtEscape(n))+";domain="+r+";path=/",i&&(t+=";expires="+e.getExpiryDate(i)),e.cookieSecure&&(t+=";secure"),document.cookie=t};e.getExpiryDat},e.setCooki},e.getCookie=function(t){for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var i=n[r].substr(0,n[r].indexOf("=")),o=n[r].substr(n[r].indexOf("=")+1);if((i=i.replace(/^\s+|\s+$/g,""))===t)return e.wtUnescape(o)}return""}}(t),function(t){t.cookieManager=function(t,n,r,i){this.name=t,this.keySeperator="~",this.fieldSeparator="#",this.durationSeperator="|",this.found=!1,this.expires=n||!1,this.accessPath=r||"/",this.secure=i||!1,this.rawValue="",this.fields=[],this.fieldsDuration=[];var o=function(t){try{return decodeURIComponent(t)}catch(n){return e.unescape(t)}},};this.read=function(){this.rawValue=null,this.found=!1;for(var e=document.cookie.split(";"),t=0;t<e.length;t++){var n=e[t].substr(0,e[t].indexOf("=")),r=e[t].substr(e[t].indexOf("=")+1);(n=n.replace(/^\s+|\s+$/g,""))===this.name&&(this.rawValue=r,this.found=!0)}if(null!==this.rawValue){e=t=0;do{-1!==(e=this.rawValue.indexOf(this.fieldSeparator,t))&&(n=(t=this.rawValue.substring(t,e).split(this.durationSeperator))[0].split(this.keySeperator),this.fields[n[0]]=o(n[1]),this.fieldsDuration[n[0]]=parseInt(o(t[1])),t=e+1)}while(-1!==e&&e!==this.rawValue.length-1)}return this.found},this.getSiz},this.write=function(){var e,t=(new Date).getTime(),n=!0,r=this.name+"=";for(e in this.fields){var i=e+"";this.fieldsDuration[i]>=t&&(r+=a(i)+this.keySeperator+a(this.fields[i])+this.durationSeperator+a(this.fieldsDuration[i])+this.fieldSeparator,n=!1)}""!==(t=n?-99999:this.expires)&&"number"==typeof t&&((n=new Date).setTime((new Date).getTime()+864e5*t),r+="; expires="+n.toGMTString()),null!==this.accessPath&&(r+="; PATH="+this.accessPath),-1===(t=location.hostname).search(/^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$/)&&(t=(t=location.hostname.split("."))[t.length-2]+"."+t[t.length-1]),n="",this.secure&&(n=";secure"),document.cookie=r+"; DOMAIN="+t+n},this.remov},this.ge},this.set=function(e,t,n,r,i){n=n||31536e3,r=r||"last";var o=(new Date).getTime();return"first"===r&&""!==this.fields[e]&&null!==this.fields[e]&&this.fieldsDuration[e]>=o?this.fields[e]:(this.fields[e]=t,this.fieldsDuration[e]=o+1e3*parseInt(n),i||this.write(),t)},this.prepar},this.read()}}(t)},T=function(e,t,n){e.deactivatePixel=!1,e.optOut=!1,e.setProperty("optoutName","webtrekkOptOut"),e.optOut=""!==e.getCookie(e.optoutName),e.optOut&&(e.deactivatePixel=!0),function(e){e.setProperty("pixelSampling",!1),e.setPixelSampling=function(t){t=t||e.pixelSampling;for(var n=e.trackId.split(",")[0],r=e.getCookie("wt3_sample").split(";"),i=!1,o=0;o<r.length;o++)-1!==r[o].indexOf(n+"|"+t)?i=!0:-1!==r[o].indexOf(n+"|")&&(r[o]="");o=6,e.cookieEidTimeout&&(o=e.cookieEidTimeout),i?(r=r.join(";"),e.setCookie("wt3_sample",r,43200*o)):(Math&&Math.random&&0===parseInt(Math.random()*t)?r.push(n+"|"+t+"|1"):r.push(n+"|"+t+"|0"),e.setCookie("wt3_sample",r.join(";"),43200*o),r=e.getCookie("wt3_sample")),-1===r.indexOf(n+"|"+t+"|1")&&(e.deactivatePixel=!0)},e.pixelSampling&&!e.optOut&&e.setPixelSampling()}(e)},C=function(t){t.deactivateRequest=!1,t.completeRequest=!1,t.setProperty("simulatedRequestTimeout",500),t.setProperty("replaceMutatedVowel",!1),t.setProperty("requestLimitAmount",1e3),t.setProperty("requestLimitTime",1800),t.setProperty("maxRequestLength",7168);var n=!1;t.sendPixel=function(e,r){var i,o=e,a=-1!==o.indexOf("&ct=")?"link":-1!==o.indexOf("&fn=")?"form":-1!==o.indexOf("&mi=")?"media":-1!==o.indexOf("/hm")?"heatmap":-1!==o.indexOf("/cdb")||-1!==o.indexOf("/fbc")?"cdb":-1!==o.indexOf("/ce")?"independent":-1!==o.indexOf("/re")?"redirect":"page";e:{var s=t.trackId.split(",")[0],c=t.getCookie("wt_rla").split(";");i={};for(var u=0,l=c.length;u<l;u++){var d=c[u].split(",");if(3<=d.length){var f=parseInt(d[1]),p=parseInt(d[2]);i[d[0]]={amount:isNaN(f)?0:f,time:isNaN(p)?(new Date).getTime():p}}}if(void 0===i[s]&&(i[s]={amount:0,time:(new Date).getTime()}),(c=(new Date).getTime())-i[s].time>1e3*t.requestLimitTime)n=!1,i[s]={amount:0,time:c};else if(i[s].amount===t.requestLimitAmount-1&&(n=!0),i[s].amount>=t.requestLimitAmount){i=!0;break e}if("link"===a||"page"===a||"form"===a){i[s].amount++;var m;s=[];for(m in i)s.push(m+","+i[m].amount+","+i[m].time);t.setCookie("wt_rla",s.join(";"),86400)}i=!1}if(!i){if(t.replaceMutatedVowel){for(m=0,s=(i=[[/%C3%84/g,"ae"],[/%C3%A4/g,"ae"],[/%C4/g,"ae"],[/%E4/g,"ae"],[/%C3%96/g,"oe"],[/%C3%B6/g,"oe"],[/%D6/g,"oe"],[/%F6/g,"oe"],[/%C3%9C/g,"ue"],[/%C3%BC/g,"ue"],[/%DC/g,"ue"],[/%FC/g,"ue"],[/%C3%9F/g,"ss"],[/%DF/g,"ss"]]).length;m<s;m++)o=o.replace(i[m][0],i[m][1]);o=o.toLowerCase()}t.completeRequest=o.split("?")[1],o=t.maxlen(o,t.maxRequestLength),n&&(o+="&rla="+t.requestLimitAmount+"%7C"+t.requestLimitTime),!t.isFirefox||"link"!==a&&"form"!==a?t.sendPixelImage(o,r,a):t.sendPixelElement(o,r,a)}},t.sendPixelImage=function(n,r,i){var o="https:"===e.document.location.protocol?"https:":"http:";t.forceHTTPS&&(o="https:"),0!==n.search(/https:|http:/)&&(n=o+n),"hm"!==r&&"hm.pl"!==r||(n+="&hm_ts="+(new Date).getTime()),"function"!=typeof e.Image&&(e.Imag}),function(n,r,i){var o=!1,};n.onerror=function(){a("error",i)},n.onload=function(){a("success",i)},e.setTimeout}),t.simulatedRequestTimeout)}(r=new e.Image,(new Date).getTime(),i),r.src=n},t.createPixelElemen},t.sendPixelElement=function(n,r,i){var o="https:"===e.document.location.protocol?"https:":"http:";t.forceHTTPS&&(o="https:"),0!==n.search(/https:|http:/)&&(n=o+n),"hm"!==r&&"hm.pl"!==r||(n+="&hm_ts="+(new Date).getTime()),void 0!==t.sendPixelObject&&null!==t.sendPixelObject||((r=document.getElementById("webtrekk-image"))&&null!==r?t.sendPixelObject=r:(t.sendPixelObject=document.createElement("div"),t.sendPixelObject.id="webtrekk-image",t.sendPixelObject.style.width="0px",t.sendPixelObject.style.height="0px",t.sendPixelObject.style.overflow="hidden",r=null,"object"==typeof document.body?r=document.body:"object"==typeof document.getElementsByTagName("body")[0]&&(r=document.getElementsByTagName("body")[0]),r&&null!==r?r.appendChild(t.sendPixelObject):(t.sendPixelObject=null,t.sendPixelImage(n,"wt"+(t.fileSuffix?".pl":""),i)))),null!==t.sendPixelObject&&t.sendPixelObject.appendChild(t.createPixelElement(n))}},x=(s=function(e,t,n){var r=RegExp(t+"="+n);return n=document.location.href,t=(new Date).getTime(),r=r.exec(n),n=/wt_t=([\d]{13})/.exec(n),!!(r&&void 0!==r[1]&&n&&void 0!==n[1]&&parseInt(n[1])+9e5>t)&&e.wtUnescape(r[1])},function(t){var n=t.trackId.split(",")[0],r="number"==typeof t.cookieEidTimeout?t.cookieEidTimeout:6,i=t.generateEid(),o="",a="",c=[],u=-1,l="",d=!1,f=i,p=!1,},h=function(e,n){for(var r=!1,i=t.getCookie("wt3_eid").split(";"),o=0,a=i.length;o<a;o++)if(-1!==i[o].indexOf(n+"|")){r=!0,i[o]=n+"|"+e;break}r||i.push(n+"|"+e),c=i,m()},g=function(e){return e&&"2"===e.substring(0,1)?(e=parseInt(e.substring(1,11)+"000"),(e=new Date(e)).getFullYear()+""+(10>e.getMonth()+1?"0":"")+(e.getMonth()+1)+(10>e.getDate()?"0":"")+e.getDate()+(10>e.getHours()?"0":"")+e.getHours()+(10>e.getMinutes()?"0":"")+e.getMinutes()):""};this.init=function(){c=t.getCookie("wt3_eid").split(";");for(var r=0;r<c.length;r++)if(-1!==c[r].indexOf(n+"|")){u=r,a=c[r],l=a.replace(n+"|","").split("#")[0],-1!==a.indexOf("#")&&(f=a.replace(n+"|","").split("#")[1]);break}o=s(t,"wt_eid","([\\d]{19})"),"string"==typeof e.webtrekkApplicationEverId&&(o=e.webtrekkApplicationEverId),l?(o&&(c[u]=n+"|"+o,l=o,t.updateCookie=!0),void 0!==e.wt_mcp_eid&&(d=!0),-1===c[u].indexOf("#")?c[u]+="#"+i:c[u]=a.replace(/#[0-9]{19}/g,"#"+i),t.updateCookie?m():p=f=!1):("string"==typeof e.wt_mcp_eid&&-1!==e.wt_mcp_eid.indexOf(n+"|")?(l=e.wt_mcp_eid.replace(n+"|",""),d=!0):o?l=o:(l=t.generateEid(),d=!0),c.push(n+"|"+l+"#"+i),m()),t.updateCookie&&(f=g(f),p=g(l))},this.getId=function(){var e;return(e=t.validateEverId)&&(e=l.replace(/^\d((\d){10})\d+$/,"$1"),e=!(1089676800<parseInt(e))),e&&(l=t.generateEid(),h(l,n)),l},this.setI},this.getUrlId=function(){return o},this.getLastVisitContact=function(){return f},this.getFirstVisitContact=function(){return p},this.getCookieOne=function(){return d}}),O=function(e){var t=e.trackId.split(",")[0],n=[],r="";this.init=function(){n=e.getCookie("wt3_sid").split(";");for(var i=0;i<n.length;i++)if(-1!==n[i].indexOf(t)){r=n[i];break}r||n.push(t),e.setCookie("wt3_sid",n.join(";"))},this.getId=function(){return r},this.setId=function(t){for(var n=!1,r=e.getCookie("wt3_sid").split(";"),i=0,o=r.length;i<o;i++)if(-1!==r[i].indexOf(t)){n=!0;break}n||r.push(t),e.setCookie("wt3_sid",r.join(";"))}},A=function(t,n,r){t.eid=!1,t.firstVisitContact=!1,t.lastVisitContact=!1,t.cookieOne=!1,t.setProperty("globalVisitorIds",!1),t.setProperty("validateEverId",!1),t.zeroPad=function(e,t){for(var n="",r=0;r<=t;r++)n+="0";return(n+=e).substring(n.length-t,n.length)},t.generateEid=function(){var e=Math.floor((new Date).getTime()/1e3);return 1089676800>e&&(e="3"+t.zeroPad(Math.floor(1e4*Math.random()),4)+t.zeroPad(Math.floor(1e5*Math.random()),5)),"2"+t.zeroPad(e,10)+t.zeroPad(Math.floor(1e8*Math.random()),8)},t.setEverId=function(e,n){e&&"string"==typeof e&&-1!==e.search(/^[0-9]{19}$/)&&(n&&"string"==typeof e||(n=t.trackId.split(",")[0]),new x(t).setId(e,n),new O(t).setId(n))},t.firstParty=function(){var e=new x(t);e.init();var n=new O(t);n.init(),t.eid=e.getId(),t.cookieOne=e.getCookieOne(),n.getId()||(e.getId()!==e.getUrlId()&&(t.forceNewSession=!0),t.firstVisitContact=e.getFirstVisitContact(),t.lastVisitContact=e.getLastVisitContact())},t.globalVisitorIds&&(n.execRTA=!0,n.execCDB=!0),function(t){t.geid=!1,t.setProperty("execRTA",!0);var n=!1,r=function(){if(n=!0,!t.deactivatePixel){"string"!=typeof t.execRTA&&(t.execRTA=document.location.protocol+"//cdn.wbtrk.net/js/geid.min.js");var r=t.getCookie("wt_geid");r?"68934a3e9455fa72420237eb"!==r&&(t.geid=r):t.loadAsynchron(t.execRTA,"wt_geid"}),2e3)}};t.execRTA&&r(),t.startRT}}(t),function(t){var n="https:"===e.document.location.protocol?"https:":"http:",r=!1,},o=function(t,r){var i=document.createElement("img");i.crossOrigin="use-credentials",function(t,n){var r=!1,i=function(e,i){if(!r){if(r=!0,e){var o=document.createElement("canvas"),a=o.getContext("2d");o.height=t.height,o.width=t.width,a.drawImage(t,0,0);try{var s=a.getImageData(0,0,6,1).data;return n(s)}catch(e){return n([],"5")}}return n([],i)}return 0};t.onerror=function(){i(!1,"4")},t.onloa},e.setTimeout}),2e3)}(i,r),i.src=n+"//"+t},},},c=function n(r){("1"!==t.cookie||"1"===t.cookie&&t.eid)&&0<t.pageCounter?e.setTimeout((function(){r()}),300):e.setTimeout((function(){n(r)}),50)},u=function(e){c((function(){var r;if("1"===t.cookie)r="//fbc.wcfbc.net/v1/fbc?p="+t.version+",0",r+="&eid="+t.wtEscape(t.eid),r+="&acc="+t.wtEscape(t.trackId),r+="&t="+(new Date).getTime(),s(r+="&err="+e);else for(var i=t.trackId.split(","),o=0,a=i.length;o<a;o++){var c=(c=(c=(c=(c=n+"//fbc.wcfbc.net/v1/fbc")+"?p="+t.version+",0")+"&acc="+t.wtEscape(i[o]))+"&t="+(new Date).getTime())+"&err="+e;r="//",r+=t.trackDomain+"/"+t.trackId+"/cc",r+="?a=r&c=wteid_"+i[o],r+="&t="+t.wtEscape(c),s(r)}}))},l=function(){if(r=!0,!t.deactivatePixel){var e=t.getCookie("wt_cdbeid");e&&-1!==e.search(/^[0-9a-f]{32}$/)&&(t.cdbeid=e),e||(t.useCDBCache&&!t.isIE&&i("2d")?("string"!=typeof t.useCDBCache&&(t.useCDBCache="fbc.wcfbc.net/v1/fbc"),o(t.useCDBCache,(function(e,n){var r=function(e){for(var t,n="",r=0;r<e.length;r++)2>(t=e[r].toString(16)).length&&(t="0"+t),n+=t,2==r%4&&r++;return"string"==typeof(n=n.substr(0,n.length-4))&&-1!==n.search(/^[0-9a-f]{32}$/)&&-1===n.search(/^[f]{32}$/)?n:""}(e);r?(a(r),c((function(){var e=(e="//"+t.trackDomain+"/"+t.trackId+"/cdb")+"?p="+t.version+",0,,,,,"+(new Date).getTime()+",,,";t.eid&&(e+="&eid="+t.eid),s(e+="&cdbeid="+r)}))):(a("1"),u(n||"6"))}))):(e="",t.useCDBCache&&t.isIE?e="1":t.useCDBCache&&!i("2d")&&(e="2"),a("1"),u(e)))}};t.cdbeid=!1,t.setProperty("execCDB",!0),t.setProperty("useCDBCache",!1),t.startCD},t.execCDB&&l()}(t)},I=function(t,n,r){t.setProperty("reporturl","report2.webtrekk.de/cgi-bin/wt"),t.setProperty("disableOverlayView",!1);var i=function(e){var n=t.reporturl;return-1!==e.search(/^((http[s]?:\/\/)?(report\d+|analytics)\.webtrekk\.(com|de)\/)/)&&((n=e.split("/")).pop(),n=n.join("/")),n};t.searchContentId},t.startHeatmapOrOverlay=function(n,r){if(t.searchContentIds(),t.urlParam(t.wtHref(),"wt_reporter",!1)?t.reporturl=i(t.urlParam(t.wtHref(),"wt_reporter",!1)):t.getCookie("wt_overlayFrame")&&(t.reporturl=i(t.getCookie("wt_overlayFrame"))),-1===t.reporturl.search(/http|https/)&&(t.reporturl=document.location.protocol+"//"+t.reporturl),t.contentIds){var o=t.reporturl+"/"+n+".pl?wt_contentId="+t.contentIds+"&x="+(new Date).getTime();if(t.include(o)){if("heatmap"===n&&-1!==navigator.userAgent.indexOf("MSIE 6")&&-1!==navigator.userAgent.indexOf("Windows NT 5.0")&&alert("Click OK to start heatmap."),"complete"===document.readyState)return r();t.registerEvent(e,"load",r)}}return 0},function(){for(var n=!1,r=0;r<e.webtrekkUnloadObjects.length;r++)t===e.webtrekkUnloadObjects[r]&&(n=!0);n||e.webtrekkUnloadObjects.push(t),function(t){t.overlayOn="1"===t.urlParam(t.wtHref(),"wt_overlay","0")||"1"===t.getCookie("wt_overlay");"0"===t.urlParam("wt_overlay")&&(t.overlayOn=!1,t.setCookie("wt_overlay","",-3600)),t.overlayOn&&!t.disableOverlayView&&(t.setCookie("wt_overlay","1"),t.startHeatmapOrOverlay("overlay",(function t(){void 0!==e.wt_overlay?e.setTimeout((function(){e.wt_overlay()}),1e3):(void 0===e.wt_overlay_retry&&(e.wt_overlay_retry=0),e.wt_overlay_retry++,60>e.wt_overlay_retry&&e.setTimeout((function(){t()}),1e3))})))}(t),function(t){t.heatmapOn="1"===t.urlParam(t.wtHref(),"wt_heatmap","0"),t.setProperty("heatmapRefpoint","wt_refpoint"),t.setProperty("heatmap",!1);var n=function(n){var r,i,o=document.getElementById(t.heatmapRefpoint);if(i=r=o&&null!==o?0:-1,o&&null!==o&&void 0!==o.offsetLeft)for(;o;)r+=0<=o.offsetLeft?o.offsetLeft:0,i+=0<=o.offsetTop?o.offsetTop:0,o=o.offsetParent;var a=o=0;n||(n=e.event),n.pageX||n.pageY?(o=n.pageX,a=n.pageY):(n.clientX||n.clientY)&&(o=n.clientX,a=n.clientY,t.isIE&&(0<document.body.scrollLeft||0<document.body.scrollTop?(o+=document.body.scrollLeft,a+=document.body.scrollTop):(0<document.documentElement.scrollLeft||0<document.documentElement.scrollTop)&&(o+=document.documentElement.scrollLeft,a+=document.documentElement.scrollTop))),n=0;var s=!0;(o>=(n=t.isIE?document.body.clientWidth:self.innerWidth-16)||!t.sentFullPixel)&&(s=!1),(0<=i||0<=r)&&o>r&&a>i&&(o="-"+(o-r),a="-"+(a-i)),s&&"1"===t.heatmap&&(t.executePlugin(t.getPluginConfig("heatmap","before")),t.quicksend(t.wtEscape(t.contentId.split(";")[0])+","+o+","+a,"","hm"+(t.fileSuffix?".pl":"")),t.executePlugin(t.getPluginConfig("heatmap","after")))};t.heatmapTrackInit=function(){for(var r=!1,i=0;i<e.webtrekkHeatmapObjects.length;i++)t===e.webtrekkHeatmapObjects[i]&&(r=!0);!r&&t.heatmap&&"1"===t.heatmap&&(e.webtrekkHeatmapObjects.push(t),t.registerEvent(document,"mousedown",n),t.registerEvent(document,"touchstart",n))},t.heatmapTrackInit(),t.heatmapOn&&!t.disableOverlayView&&t.startHeatmapOrOverlay("heatmap",(function t(){void 0!==e.wt_heatmap?e.setTimeout((function(){e.wt_heatmap()}),1e3):(void 0===e.wt_heatmap_retry&&(e.wt_heatmap_retry=0),e.wt_heatmap_retry++,60>e.wt_heatmap_retry&&e.setTimeout}),1e3))}))}(t)}()},D=function(){var e=this,t="customClickParameter customSessionParameter customCampaignParameter customEcommerceParameter customParameter crmCategory urmCategory contentGroup productCategory".split(" "),n={numberSearchResults:[t[4],771],errorMessages:[t[4],772],loginStatus:[t[1],800],pixelVersion:[t[1],801],trackingPlatform:[t[1],802],npsScore:[t[6],850],npsScoreFeedback:[t[6],851],productLabel:[t[8],870],productMainCategory:[t[8],871],productSubCategory:[t[8],872],productManufacturer:[t[8],873],productShortDescription:[t[8],874],productLongDescription:[t[8],875],paymentMethod:[t[3],761],shippingService:[t[3],762],shippingSpeed:[t[3],763],shippingCosts:[t[3],764],grossMargin:[t[3],765],orderStatus:[t[3],766],productVariant:[t[3],767],couponValue:[t[3],563],productSoldOut:[t[3],760],paywall:[t[4],773],articleTitle:[t[4],774],paywallUser:[t[6],852],pageMainCategory:[t[7],880],pageSubCategory:[t[7],881],pageAuthor:[t[7],882],contentTags:[t[4],775],pageTitle:[t[4],776],pageType:[t[4],777],pageLength:[t[4],778],daysSincePublication:[t[4],779],testVariant:[t[4],781],testExperiment:[t[4],782],email:[t[6],700],emailRID:[t[6],701],emailOptin:[t[6],702],firstName:[t[6],703],lastName:[t[6],704],telefon:[t[6],705],gender:[t[6],706],birthday:[t[6],707],country:[t[6],708],city:[t[6],709],postalCode:[t[6],710],street:[t[6],711],streetNumber:[t[6],712],validation:[t[6],713]},r={},};i(),this.list={},this.clea},this.get=function(t){return t="all"===t?r:void 0!==e.list[t]?e.list[t]:null},this.put=function(t,i){if(i&&void 0!==n[t]){var o=n[t];void 0===r[o[0]]&&(r[o[0]]={}),r[o[0]][o[1]]=i,e.list[t]=i}return e},this.remove=function(t){var i=null;if(void 0!==n[t]){var o=n[t];void 0!==r[o[0]]&&void 0!==r[o[0]][o[1]]&&(i=r[o[0]][o[1]],delete r[o[0]][o[1]]),delete e.list[t]}return i}},j=function(e){e.PredefinedParameter=D,e.checkCustomParameter=function(t,n){var r="";if("object"==typeof t)for(var i in t)isNaN(parseInt(i))||void 0===t[i]||"string"!=typeof t[i]||""===t[i]||(e.checkSC("custom")&&(t[i]=e.decrypt(t[i])),-1===e.paramFirst.indexOf(n+i+";")&&(r+="&"+n+i+"="+e.wtEscape(t[i])));return r},e.mergeCustomParameter=function(e,t){var n=e;for(var r in n||(n={}),t)n[r]=t[r];return n}},R=function(e,t,n){var r=this;r.item=n,r.href=void 0!==n.href?n.href:"",r.href||(r.href=e.getAttribute(n,"href")?e.getAttribute(n,"href"):""),r.linkIdByNameOrId=e.getAttribute(n,"name")?e.getAttribute(n,"name"):"",r.linkIdByNameOrId||(r.linkIdByNameOrId=e.getAttribute(n,"id")?e.getAttribute(n,"id"):""),r.linkId="",r.action="link",r.isDownloadFile=!1,r.linktrackOut=!1,r.isInternalLink=function(){var t;if(e.linkTrackDownloads){t=e.linkTrackDownloads.split(";");for(var i=(i=r.href.split(".")).pop(),o=0;o<t.length;o++)if(t[o]===i){r.isDownloadFile=!0;break}}r.linktrackOut=e.domain&&!e.isOwnDomain(r.href),(r.isDownloadFile||"_blank"===n.target)&&(r.action="click");i=(t=r.href).toLowerCase(),o=t.split("#")[0];var a=document.location,s=r.item,c=e.getAttribute,u=c(s,"onclick"),l=c(s,"onmousedown");s=c(s,"ontouchstart");return t=e.noDelayLinkTrackAttribute?!!e.getAttribute(n,e.noDelayLinkTrackAttribute):!(t&&!(0===i.indexOf("javascript:")||0===i.indexOf("#")||"click"===r.action||o===a.href.split("#")[0]&&-1!==t.indexOf("#")||o===a.pathname.split("#")[0]&&-1!==t.indexOf("#")||u&&-1!==u.search(/return false[;]?$/)||l&&-1!==l.search(/return false[;]?$/)||s&&-1!==s.search(/return false[;]?$/)))},r.getCCParams=function(){var t="";if(e.config.customClickParameter){var n=void 0!==e.config.customClickParameter[r.linkIdByNameOrId]&&e.config.customClickParameter[r.linkIdByNameOrId];for(var i in n||(n=e.config.customClickParameter),n)!isNaN(parseInt(i))&&"string"==typeof n[i]&&n[i]&&(e.checkSC("custom")&&(n[i]=e.decrypt(n[i])),t+="&ck"+i+"="+e.wtEscape(n[i]))}return t},r.setJSONParam},r.getLinkId=function(){if(r.linkId=e.getAttribute(n,e.linkTrackAttribute),r.setJSONParams(),"link"===e.linkTrack){var t=r.href.indexOf("//");r.href=0<=t?r.href.substr(t+2):r.href,e.linkTrackPattern&&(e.linkTrackReplace||(e.linkTrackReplace=""),r.href=r.href.replace(e.linkTrackPattern,e.linkTrackReplace)),r.linkId=(r.linkId?r.linkId+".":"")+r.href.split("?")[0].split("#")[0].replace(/\//g,"."),t=[],e.linkTrackParams&&(t=e.linkTrackParams.replace(/;/g,",").split(","));for(var i=0;i<t.length;i++){var o=e.urlParam(r.href,t[i],"");o&&(r.linkId+="."+t[i]+"."+o)}}return r.linkId}},N=function(t){var n=this;n.triggerObjectName="__"+(new Date).getTime()+"_"+parseInt(1e3*Math.random());var r=function(r){t.registerEvent(r,"click",(function(i){(i.which&&1===i.which||i.button&&1===i.button)&&(t.delayLinkTrack&&"function"==typeof i.preventDefault&&!r[n.triggerObjectName].isInternalLink()&&(i.preventDefault(),e.setTimeout}),t.delayLinkTrackTime)}(0,r))}))};n.linkTrackInit=function(){if(t.linkTrack&&("link"===t.linkTrack||"standard"===t.linkTrack)){for(var i=!1,o=0;o<e.webtrekkLinktrackObjects.length;o++)t===e.webtrekkLinktrackObjects[o]&&(i=!0);for(i||e.webtrekkLinktrackObjects.push(t),i=0,o=document.links.length;i<o;i++){var a=document.links[i],s=t.getAttribute(a,t.linkTrackAttribute),c=t.getAttribute(a,"href");(t.linkTrackIgnorePattern&&c&&-1===c.search(t.linkTrackIgnorePattern)||!t.linkTrackIgnorePattern)&&void 0===a[n.triggerObjectName]&&(s||"link"===t.linkTrack)&&(a[n.triggerObjectName]=new R(t,n,a),r(a))}}}},L=function(t){t.linkTrackObject=new N(t),t.linkTrackInstall=t.linkTrackObject.linkTrackInit,t.linkTrackInit=t.linkTrackObject.linkTrackInit,"complete"===document.readyState?t.linkTrackInit():t.registerEvent(e,"load"}))},F=function(t,n,r){var i=null,o=n.type,a=t.getFormFieldName(n),s=t.getFormFieldValue(n);this.clos},this.start=function(c){null===i&&(i=e.setInterval((function(){void 0!==n&&n&&null!==n&&void 0!==t.formFieldData[a]&&"string"!=typeof t.formFieldData[a][0]&&"string"!=typeof t.formFieldData[a][t.formFieldData.length-1]&&(s=t.getFormFieldValue(n),t.formFieldData[a][r]=[o,s])}),50),c||delete t.formFieldDataUnused[a])}},U=function(t,n){var r=this;r.formObject=!1,r.formFocus=!1,r.formName=!1,r.form=t.form,r.formSubmit=!1,r.formFieldData={},r.formFieldDataUnused={},r.formFieldDataPathAnalysis=[],r.triggerObjectName="__"+(new Date).getTime()+"_"+parseInt(1e3*Math.random());var },},a=function(e,t,n){i(e.type)&&r.formObject&&(t||(r.formFocus=e),void 0===e[r.triggerObjectName]&&(e[r.triggerObjectName]=new F(r,e,n),e[r.triggerObjectName].start(t)))},s=function(e,n){t.registerEvent(e,"focus"})),t.registerEvent(e,"blur",(function(){i(e.type)&&r.formObject&&e&&e&&void 0!==e[r.triggerObjectName]&&(e[r.triggerObjectName].close(),"radio"!==e.type&&delete e[r.triggerObjectName])}))},},u=function(){if(function(){if(r.form&&!r.formObject)for(var e=document.forms,t=0,n=e.length;t<n;t++){var i=e[t];if(void 0!==i.elements.wt_form){r.formObject=i;break}}}(),r.formObject){var o=t.getAttribute(r.formObject,t.formAttribute);r.formName=o||t.contentId.split(";")[0];o=0;for(var u=r.formObject.elements,l=u.length;o<l;o++){var d=u[o],f=r.getFormFieldName(d);if(i(d.type)&&f&&null!==f){void 0===r.formFieldData[f]&&(r.formFieldData[f]=[]),void 0===r.formFieldDataUnused[f]&&(r.formFieldDataUnused[f]=[]);var p=r.getFormFieldValue(d);r.formFieldData[f].push([d.type,p]),r.formFieldDataUnused[f].push([d.type,p]),f=r.formFieldData[f].length-1,"radio"===d.type&&d.checked&&a(d,!0,f),s(d,f)}}t.registerEvent(r.formObject,"submit",c),t.registerEvent(e,"beforeunload",(function(){n(r)})),t.registerEvent(e,"unload"}))}},l=function(e){var n=[];if(t.formFullContent&&(n=t.formFullContent.split(";")),t.formAnonymous||o(e.type)){for(var i=0;i<n.length;i++)if(n[i]===r.getFormFieldName(e))return!1;return!0}return!1},},f=function(e,t,n,i){var o=(o=e.replace(/[\.;\|]/g,"_")+".")+(t+"|")+n+"|";return i?o+"0":o+(r.formFocus&&r.getFormFieldName(r.formFocus)===e?"1":"0")},p=function(e,t){for(var n=[],r=0,i=t.length;r<i;r++)if(void 0!==e[t[r]])if("select-multiple"===e[t[r]][0])for(var o=e[t[r]][1].split("|"),a=0,s=o.length;a<s;a++)n.push(f(t[r],e[t[r]][0],o[a]));else n.push(f(t[r],e[t[r]][0],e[t[r]][1]));return n.join(";")},};r.getFormFieldNam},r.getFormFieldValue=function(e){var n=e.type,i="";if("select-multiple"===n){i=[];for(var o=0,a=e.options,s=a.length;o<s;o++)a[o].selected&&i.push(d(e,a[o]));0>=i.length&&i.push("empty"),i=i.join("|")}else"select-one"===n?(i="",-1!==e.selectedIndex&&((i=d(e,e.options[e.selectedIndex]))&&null!==i||(i="empty"))):"checkbox"===n||"radio"===n?(i="",e.checked?(i=d(e))||(i="checked"):i="empty"):"hidden"!==n&&"button"!==n&&"image"!==n&&"reset"!==n&&"submit"!==n&&(o=(i=d(e))?"filled_out":"empty",l(e)||(o=i),a=r.getFormFieldName(e),void 0!==t.formFieldDefaultValue[a]&&t.formFieldDefaultValue[a]===i&&"empty"!==o&&(o="empty"),o&&null!==o||(o="empty"),i=o);return l(e)&&"select-multiple"!==n&&"empty"!==i&&"filled_out"!==i?"anon":i},r.formTrackInstall=function(e){r.formObject=e||!!document.forms[0]&&document.forms[0],r.formObject&&(r.form="1",u())},r.getFormTrackingData=function(){var e="";if(r.formObject){var n=function(){if(!r.formObject)return"";m(r.formFieldData),m(r.formFieldDataUnused);var e,n=[];if(e=[],void 0!==r.formObject.elements.wt_fields){var i=r.formObject.elements.wt_fields.value;i&&(e=i.split(";"))}if(0>=e.length)for(var o in r.formFieldData)"string"==typeof o&&o&&e.push(o);if(i=!1,!t.formPathAnalysis)return p(r.formFieldData,e);(o=p(r.formFieldDataUnused,e))&&n.push(o),o=0;for(var a=r.formFieldDataPathAnalysis.length;o<a;o++){var s,c=r.formFieldDataPathAnalysis;e:{s=0;for(var u=e.length;s<u;s++)if(c[o][0]===e[s]){s=!0;break e}s=!1}s&&(i=!0,n.push(f(c[o][0],c[o][1],c[o][2],!0)))}return i&&(e=(e=n[n.length-1]).substr(0,e.length-1),n[n.length-1]=e+"1"),n.join(";")}();if(n){var i=r.formSubmit;t.formSubmit&&(i=t.formSubmit),e+="&fn="+t.wtEscape(r.formName)+"%7C"+(i?"1":"0"),e+="&ft="+t.wtEscape(n)}r.formSubmit=!1,t.formSubmit=!1,r.formName=!1,r.formObject=!1,r.formFocus=!1,r.formFieldData={},r.formFieldDataUnused={},r.formFieldDataPathAnalysis=[]}return e},r.formTrackSubmi},r.sendFormRequest=function(){"1"!==t.cookie||t.optOut||t.deactivatePixel||t.firstParty(),"function"==typeof t.beforeUnloadPixel?t.beforeUnloadPixel():t.executePlugin(t.getPluginConfig("form","before"));var e=r.getFormTrackingData();e&&t.quicksend(t.wtEscape(t.contentId.split(";")[0])+",1,"+t.baseparams(),e),"function"==typeof t.afterUnloadPixel?t.afterUnloadPixel():t.executePlugin(t.getPluginConfig("form","after"))},r.updateFormFieldStatus=function(e){if(e&&null!==e&&void 0!==e.type){var t=e.type,n=r.getFormFieldName(e),i=r.getFormFieldValue(e);n&&i&&void 0!==r.formFieldData[n]&&(r.formFieldData[n].splice(0,0,[t,i]),r.formFieldDataPathAnalysis.push([n,t,i]),r.formFocus=e,delete r.formFieldDataUnused[n])}},r.ini}},M=function(e,t){var n=this;n.name=e||"",n.elements=t||[],n.add=function(e){return e&&null!==e&&n.elements.push(e),n},n.getAttribute=function(){return e},n.addEventListener=n.removeEventListener=function(){}},V=(u=function(e,t,n,r){"1"!==e.cookie||e.optOut||e.deactivatePixel||e.firstParty(),(n=n||"")||(n=e.formObject&&"noForm"!==t?"form":"link"),"function"==typeof e.beforeUnloadPixel?e.beforeUnloadPixel():"form"===n&&e.executePlugin(e.getPluginConfig("form","before"));var i="";e.config.linkId&&(i+="&ct="+e.wtEscape(e.maxlen(e.wtUnescape(e.config.linkId),255)))&&(e.linktrackOut&&(i+="&ctx=1"),"string"==typeof(o=e.ccParams)&&""!==o&&(i+=o));if(e.wtEp)if(e.wtEpEncoded)i+=e.wtEp;else if("string"==typeof(o=e.wtEp)&&""!==o)for(var o=o.split(/;/),a=0;a<o.length;a++)if(void 0!==o[a]){var s=o[a].split(/\=/);e.checkSC("custom")&&(s[1]=e.decrypt(s[1])),s[1]=e.wtEscape(s[1]),i+="&"+s[0]+"="+s[1]}"noForm"!==t&&(i+=r.getFormTrackingData()),""!==i&&(e.quicksend(e.wtEscape(e.contentId.split(";")[0])+",1,"+e.baseparams(),i),e.config.linkId="",e.ccParams="",e.wtEp=""),"function"==typeof e.afterUnloadPixel?e.afterUnloadPixel():"form"===n&&e.executePlugin(e.getPluginConfig("form","after"))},function(t){t.formTrackObject=new U(t,(function(e){u(t,"form","form",e)})),t.formTrackInstall=t.formTrackObject.formTrackInstall,t.formTrackInit=t.formTrackObject.formTrackInstall,t.formTrackSubmit=t.formTrackObject.formTrackSubmit,t.sendFormRequest=t.formTrackObject.sendFormRequest,t.updateFormFieldStatus=t.formTrackObject.updateFormFieldStatus,"complete"===document.readyState?t.formTrackObject.init():t.registerEvent(e,"load"})),t.CustomForm=M,function(e){e.multipleFormArray=[];var },n=function(n){if(n&&void 0!==n.elements&&!t(n)){var r=new U(e}));e.multipleFormArray.push(r),r.formTrackInstall(n)}};e.multipleFormTrackInstall=n,e.multipleFormTrackInit=n,e.multipleFormTrackSubmi},e.sendMultipleFormReques},e.updateMultipleFormFieldStatu}}(t)}),B=function(){var t="",n="",r=!1,i=!0,o=0,a=null,s=!1,c=function(){},u=function(){};this.isPageHidden=function(){return r},this.isPageVisibl},this.setVisibleCall=function(e){c=e},this.setHiddenCal},void 0!==document.hidden?(t="hidden",n="visibilitychange"):void 0!==document.mozHidden?(t="mozHidden",n="mozvisibilitychange"):void 0!==document.msHidden?(t="msHidden",n="msvisibilitychange"):void 0!==document.oHidden?(t="oHidden",n="ovisibilitychange"):void 0!==document.webkitHidden&&(t="webkitHidden",n="webkitvisibilitychange"),t&&(r=document[t],(i=!r)&&o+}(document,n,(function(){(r=document[t])?(e.clearInterval(a),i=s=!1,u()):s||(s=!0,function(){var t=1e3;a=e.setInterval((function(){0>=t&&(e.clearInterval(a),s=!1,r||(i=!0,o++,c(o))),t-=5}),5)}())})))},H=function(e){e.setProperty("tabBrowsing",!1);var t=[],n=[],r=null,i=function(){(r=new B).setVisibleCall}))};e.tabBrowsing&&i(),e.sendTabBrowsingPixe},e.startTabBrowsin}};e.webtrekkV3=e.WebtrekkV3=function(t){var n=e.webtrekkConfig;t||(t=e.webtrekkConfig),this.version="441";for(var r=[f,k,P,S,T,C,A,I,j,L,V,H],i=0;i<r.length;i++)r[i](this,t,n)}}(window),"object"==typeof n&&"object"==typeof n.safetag&&-1===document.cookie.indexOf("wt_r=1")){var r=r||[];!function(e,t){var },r=document.location.protocol;if("http:"==r||"https:"==r){var i="";if(e.customDomain&&e.customPath?i=r+"//"+e.customDomain+"/"+e.customPath:e.safetagDomain&&e.safetagId&&-1!==e.safetagId.search(/^\d+$/)&&(i=r+"//"+e.safetagDomain+"/resp/api/get/"+e.safetagId+"?url="+n(document.location.href)),i){for(var o in e.option)i+="&"+o+"="+n(e.option[o]);if(webtrekkV3.prototype.safetag=e,webtrekkV3.prototype.safetagInProgress=!0,webtrekkV3.prototype.safetagParameter={},webtrekkV3.prototype.update=function(){},window.wts=t,window.safetagLoaderHandle},e.async||"complete"===document.readyState||"interactive"===document.readyState){n=document.getElementsByTagName("script")[0];var a=document.createElement("script");a.async=e.async,a.type="text/javascript",a.onerror=function(){void 0!==window.wt_mcp_hide&&"function"==typeof window.wt_mcp_hide.show&&(window.wt_mcp_hide.show(),window.wt_mcp_hide.sho}),safetagLoaderHandler(a,"onerror")},a.onload=function(){safetagLoaderHandler(a,"onload")},a.onreadystatechang},a.src=i,n.parentNode.insertBefore(a,n)}else i='<script type="text/javascript" src="'+i+'" onerror="safetagLoaderHandler(this,\'onerror\')"',i+=" onload=\"safetagLoaderHandler(this,'onload')\"",i+=" onreadystatechange=\"safetagLoaderHandler(this,'onreadystatechange')\"",i+="><\/script>",document.write(i)}}}({async:void 0===n.safetag.async||n.safetag.async,timeout:void 0!==n.safetag.timeout?n.safetag.timeout:2e3,safetagDomain:void 0!==n.safetag.safetagDomain&&n.safetag.safetagDomain,safetagId:void 0!==n.safetag.safetagId&&n.safetag.safetagId,customDomain:void 0!==n.safetag.customDomain&&n.safetag.customDomain,customPath:void 0!==n.safetag.customPath&&n.safetag.customPath,option:void 0!==n.safetag.option?n.safetag.option:{}},r)}}});
//# sourceMappingURL=rai-webtrekk.js.mape.nextPosToSend,e.nextPosToSend=1,this.eventEmitter.emit("arte_vp.stats.adImpression",t)})),this.eventEmitter.on("adSkipped",(e=>{this.eventEmitter.emit("arte_vp.stats.adSkipped",e),this.eventEmitter.emit("arte_vp.stats.adFinished",e)})),this.eventEmitter.on("adTime",(e=>{this.eventEmitter.emit("arte_vp.stats.adTime",e)})),this.eventEmitter.on("adComplete",(t=>{e.nextPosToSend=e.nextPosToSendBeforePrerollStart,this.eventEmitter.emit("arte_vp.stats.adComplete",t),this.eventEmitter.emit("arte_vp.stats.adFinished",t)})),this.eventEmitter.on("adError",(e=>{this.eventEmitter.emit("arte_vp.stats.adFinished",e)})),i.g.addEventListener("unload",(e=>{this.eventEmitter.emit("arte_vp.stats.unload",e)})),i.g.addEventListener("pagehide",(e=>{de.isSafariIosSupOrEqualThan134()&&this.eventEmitter.emit("arte_vp.stats.pagehide",e)})),i.g.addEventListener("offline",(e=>{this.eventEmitter.emit("arte_vp.stats.connectionloss",e)}))}};function $e(e){return(0,d.$j)(((t,i)=>{const a={};if(i.playerId)for(let s=0;s<e.length;s+=1){const o=e[s];a[o]=t.GlobalReducer["".concat(i.playerId,"_").concat(o)]}else console.warn("playerId is not set in generateMapToProps when getting ",e);return a}),void 0,void 0,{forwardRef:!0})}var et=a.memo((({playerId:e,version:t})=>a.createElement(C.v2,{id:"rightClick-".concat(e)},a.createElement(C.ck,null,"© ARTE - ArteVp version ",t))));et.propTypes={version:l().string,playerId:l().string};var tt=$e(["version"])(et);function it(e){var t=e,{className:i,name:s,size:o,title:r,card:l,onClick:c,tabindex:d,expanded:p,ariaLabel:u}=t,_=((e,t)=>{var i={};for(var a in e)V.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&U)for(var a of U(e))t.indexOf(a)<0&&Z.call(e,a)&&(i[a]=e[a]);return i})(t,["className","name","size","title","card","onClick","tabindex","expanded","ariaLabel"]);let m=s;switch(s){case"Play":m={NAME:"Play",VAL:"White"};break;case"Rewind":m={NAME:"Seek",VAL:"Rewind"};break;case"Forward":m={NAME:"Seek",VAL:"Forward"};break;case"Mute":m={NAME:"Sound",VAL:"Off"};break;case"Sound":m={NAME:"Sound",VAL:"On"};break;case"Left Angle":m={NAME:"Angle",VAL:["Left","White"]};break;case"Add Selection":m={NAME:"Selection",VAL:"Add"};break;case"Added Selection":m={NAME:"Selection",VAL:"Added"};break;case"Remove Selection":m={NAME:"Selection",VAL:"Remove"};break;case"Playlist":m={NAME:"Playlist",VAL:"Normal"};break;case"Illico":m={NAME:"Playlist",VAL:"Illico"};break;case"Language":m="Version";break;default:m=s}let v=o;if(!v){v="XS";const e=document.getElementsByTagName("body");e.length>0&&e[0].getBoundingClientRect().width>1200&&(v="S")}return a.createElement("div",q({className:n()("avp-icon",i),role:"button",tabIndex:d,"aria-label":u||r,onClick:c,"aria-expanded":p},_),a.createElement(h.JO,{icon:m,size:v,title:r}),l)}it.propTypes={className:l().string,name:l().string.isRequired,size:l().oneOf(["XS","S","M","L","XL"]),title:l().string,onClick:l().func,tabindex:l().number,card:l().object,expanded:l().string,ariaLabel:l().string},it.defaultProps={className:"",title:"",tabindex:0};var at=it;function st(e){const{isIllico:t,closePlaylist:i,overTitle:o,addText:r,saveText:l,onClickAddChapter:c,onClickSaveChapters:d,updateRequestStatus:p,apiPlaylistModel:u,isChapterEdit:_,isRightColumnOpen:m,hasChapters:v}=e,g=Object.entries({arialabel__close_chapters:v,arialabel__close_programs:t,arialabel__close_button:!0}).find((([e,t])=>!!t))[0];return a.createElement("div",{className:"avp-playlist-header"},a.createElement(at,{tabindex:m?0:-1,name:"MenuClose",title:s.ZP.t(g),onClick:i,className:n()("avp-icon-close",{"is-hidden":!m})}),o&&a.createElement("div",{className:"avp-playlist-header__overtitle",id:"avp-playlist-header-overtitle"},o),a.createElement("div",{className:"avp-playlist-header__title-wrapper"},a.createElement("div",null,u.getTitle()&&a.createElement("p",{className:"avp-playlist-header__title",id:"avp-playlist-header-title"},u.getTitle()),(u.getSubtitle()||u.getDescription())&&a.createElement("h2",{className:"avp-playlist-header__description"},u.getSubtitle()&&a.createElement(a.Fragment,null,u.getSubtitle(),a.createElement("br",null))),t&&a.createElement("span",{className:"avp-playlist-header__counter","data-testid":"PlaylistHeader__items-count"},s.ZP.t(u.getPlaylistItems().length>0?"playlist__items_count.other":"playlist__items_count.one",{count:u.getPlaylistItems().length})),_&&r&&a.createElement("div",{className:"avp-playlist-button"},a.createElement(h.zx,{label:r,onClick:c})),_&&l&&a.createElement("div",{className:"avp-playlist-button"},a.createElement(h.zx,{label:p||l,onClick:d})))))}st.propTypes={apiPlaylistModel:l().object,overTitle:l().string,isChapterEdit:l().bool,addText:l().string,saveText:l().string,onClickSaveChapters:l().func,onClickAddChapter:l().func,isIllico:l().bool,closePlaylist:l().func,updateRequestStatus:l().string,isRightColumnOpen:l().bool,hasChapters:l().bool};var ot=$e(["isIllico","hasChapters"])(st),nt=class e extends a.Component{static centerPlaylistItem(e){if(!e)return;const t=e.querySelector(".avp-playlist ul li.selected");if(t){const i=(e.querySelector(".avp-playlist__list").offsetHeight-t.offsetHeight)/2;e.querySelector(".avp-playlist .avp-playlist__list").scrollTop=t.offsetTop-i}}constructor(e){super(e),this.props=e}componentDidMount(){const{avpRef:t}=this.props;setTimeout((()=>{e.centerPlaylistItem(t)}),200)}componentDidUpdate(){const{avpRef:t}=this.props;e.centerPlaylistItem(t)}render(){const{playlistItems:e}=this.props;return a.createElement("div",{className:"avp-playlist__list"},a.createElement("ul",{"aria-labelledby":"avp-playlist-header-overtitle avp-playlist-header-title"},e))}};nt.propTypes={playlistItems:l().array,avpRef:l().object};var rt=nt,lt=class extends a.Component{constructor(e){super(e),this.props=e,this.handleBlur=this.handleBlur.bind(this),this.playlistRef=a.createRef()}handleMouseHoverChange(e){const{onMouseHoverChange:t}=this.props;return()=>t(e)}handleBlur(e){const{closePlaylist:t}=this.props;setTimeout((()=>{this.playlistRef.current.contains(document.activeElement)||t(e)}),500)}render(){const{onClickPlaylistClickCatcher:e,avpRef:t,playlistItems:i,isRightColumnOpen:s,isIllico:o}=this.props;return a.createElement("div",{className:"avp-playlist-clickcatcher",onClick:e,ref:this.ref,"data-testid":"Playlist"},a.createElement("div",{className:o?"avp-playlist avp-playlist-illico":"avp-playlist","aria-hidden":!s,onMouseEnter:this.handleMouseHoverChange(!0),onMouseLeave:this.handleMouseHoverChange(!1),onBlur:this.handleBlur,ref:this.playlistRef},a.createElement(ot,W(q({},this.props),{isRightColumnOpen:s})),a.createElement(rt,{playlistItems:i,avpRef:t,isRightColumnOpen:s})))}};lt.propTypes={playlistItems:l().array,onClickPlaylistClickCatcher:l().func,avpRef:l().object,onMouseHoverChange:l().func,closePlaylist:l().func,isRightColumnOpen:l().bool,isIllico:l().bool};var ct=$e(["jsonUrl","isIllico"])(lt);function dt(e=""){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function pt(e){return'<div class="avp-message">\n\n  '.concat(e.title||e.subtitle?'<div class="avp-video-title">':"","\n  ").concat(e.title?'<div class="avp-video-title__title">'.concat(dt(e.title),"</div>"):"","\n  ").concat(e.subtitle?'<div class="avp-video-title__subtitle">'.concat(dt(e.subtitle),"</div>"):"","\n  ").concat(e.title||e.subtitle?"</div>":"","\n  <p>").concat(dt(e.message),"</p>\n  </div>")}var ut=class extends a.Component{constructor(e){super(e),this.props=e,this.ref=a.createRef()}componentDidMount(){const{isClosable:e}=this.props,t=this.ref.current.querySelector(".avp-sharebox");e&&!t?document.getElementsByClassName("avp-close-overlay-button")[0].focus():this.ref.current.querySelector('[tabindex="0"]')&&this.ref.current.querySelector('[tabindex="0"]').focus()}componentDidUpdate(){this.ref.current.addEventListener("mousemove",(e=>{e.stopPropagation()}))}render(){const{aspect:e,hideOverlay:t,isClosable:i,reload:o,content:r,ariaLabel:l,bluredPreview:c,previewData:d,align:p,isFixed:u,contentStyles:h}=this.props;return a.createElement("div",{className:n()("avp-fulloverlay ".concat(u?"fixed":""),e,p),ref:this.ref,role:"dialog","aria-hidden":"false","aria-label":l},c&&d&&d.image&&a.createElement("div",{className:"avp-fulloverlay__background"},a.createElement("img",{className:"avp-fulloverlay__image",alt:d.title,src:d.image}),a.createElement("div",{className:"avp-fulloverlay__gradient"})),a.createElement("div",{className:"avp-fulloverlay__content",role:"document",style:h},r),i&&a.createElement(at,{name:"MenuClose",className:"avp-icon-close avp-close-overlay-button",title:s.ZP.t("arialabel__close_button"),onClick:()=>{t(),o()}}))}};ut.propTypes={previewData:l().oneOfType([l().object,l().bool]),aspect:l().string,align:l().string,content:l().object,hideOverlay:l().func,isClosable:l().bool,reload:l().func,ariaLabel:l().string,bluredPreview:l().bool,isFixed:l().bool,contentStyles:l().object},ut.defaultProps={aspect:"opacity",align:"",isClosable:!0,isFixed:!1,ariaLabel:null,contentStyles:{}};var ht=$e(["previewData","playerWidth"])(ut);function _t(){return a.createElement("span",{dangerouslySetInnerHTML:{__html:pt.getTemplate({message:s.ZP.t("error__general_error_title")})}})}var mt=class extends a.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){const{hasError:e}=this.state,{children:t,playerId:i}=this.props;return e?a.createElement(ht,{content:a.createElement(_t,null),isClosable:!1,playerId:i,zIndex:2}):t}};mt.propTypes={children:l().node,playerId:l().string};var vt=mt,gt=class extends a.Component{constructor(e){super(e),this.props=e}render(){const{title:e,subtitle:t,id:i,kind:s,kindLabel:o,additionalInfos:r,deleteText:l,editText:c,onClickDeleteChapter:d,onClickEditChapter:p,toDelete:u}=this.props,_=u?"toDelete":"";return a.createElement(a.Fragment,null,a.createElement("p",{className:"avp-playlist-item__additional_info"},r),a.createElement("h3",{className:n()("avp-playlist-item__title",_),dangerouslySetInnerHTML:{__html:e}}),t&&a.createElement("p",{className:"avp-playlist-item__subtitle","data-testid":"subtitle"},t),("CLIP"===s||"MANUAL_CLIP"===s||"TRAILER"===s)&&a.createElement(h.zx,{key:"badge",name:"badge",icon:"seeProgram",label:o}),l&&a.createElement(h.zx,{label:l,onClick:e=>{e.stopPropagation(),d(i)}}),c&&a.createElement(h.zx,{label:c,onClick:e=>{e.stopPropagation(),p(i)}}))}};gt.propTypes={id:l().number,title:l().string,subtitle:l().string,kind:l().string,kindLabel:l().string,additionalInfos:l().string,deleteText:l().string,editText:l().string,onClickDeleteChapter:l().func,onClickEditChapter:l().func,toDelete:l().bool};var yt=gt;function bt(e){const{title:t,subtitle:i,isLive:s,additionalInfos:o,label:r,duration:l,isIllico:c}=e;return a.createElement(a.Fragment,null,a.createElement("p",{className:"avp-playlist-item__hour"},o,s&&a.createElement("span",{className:"avp-label-live"},r)),a.createElement("p",{className:n()("avp-playlist-item__title",{"avp-playlist-item__illico":c})},t),a.createElement("p",{className:n()("avp-playlist-item__subtitle",{"avp-playlist-item__illico":c})},i),l&&a.createElement("p",{className:n()("avp-playlist-item__duration",{"avp-playlist-item__illico":c})},l))}bt.propTypes={label:l().string,additionalInfos:l().string,duration:l().string,title:l().string,subtitle:l().string,isLive:l().bool,isIllico:l().bool};var ft=$e(["isIllico"])(bt),kt=class extends a.Component{constructor(e){super(e),this.props=e,this.mapIndexToImagePosition=this.mapIndexToImagePosition.bind(this)}mapIndexToImagePosition(){const{chapterListSize:e,chapterIndex:t}=this.props;return 100/e*t}render(){const{onClickPlaylistItem:e,isIllico:t,item:i,jsonUrl:o,spriteUrl:r,isRightColumnOpen:l,hasChapters:c,onClickDeleteChapter:d,onClickEditChapter:p,playerId:u,lang:h}=this.props,_={},m=ye("liveStreamProgramId",u);if(m===i.getProviderId()?_.jsonUrl=Xe(h):_.jsonUrl=i.getConfigUrl(),_.image=i.getImageUrl(),_.imageLabel=i.getImageCaption(),_.title=i.getTitle(),_.subtitle=i.getSubTitle(),_.isLive=i.get("live"),_.isIllico=t,_.playerId=u,_.additionalInfos="",_.selected=i.get("selected"),t){try{_.additionalInfos=(0,P.Z)(new Date(i.get("beginRounded")),s.ZP.t("playlist__show_hour"))}catch(e){console.warn("date-fns crashed")}i.get("live")&&(_.label=s.ZP.t("info__live_label"))}else _.additionalInfos+=qe(i.get("tc")),ze(o)&&!Ue(o)&&(_.id=i.get("id"),_.deleteText=i.get("deleteText"),_.editText=i.get("editText"),_.onClickDeleteChapter=d,_.onClickEditChapter=p,_.toDelete=i.get("toDelete"));let v=0;return t?Ne.isLiveConfig(o)?_.selected=i.getProviderId()===m?"selected":null:_.selected=i.getConfigUrl()===o?"selected":null:v=this.mapIndexToImagePosition(),a.createElement("li",{className:n()("avp-playlist-item",_.selected,{"is-hidden":!l}),onClick:t=>{t.stopPropagation(),e(t,_.jsonUrl,"selected"===_.selected)},"data-testid":"PlaylistItemWrapper",tabIndex:"0"},a.createElement("div",{className:"avp-playlist-item__inner",role:"button"},!!_.selected&&a.createElement("div",{role:"button",className:"screen-reader-only"},c?s.ZP.t("sronly__current_chapter"):s.ZP.t("sronly__current_program")),(_.image||_.imageLabel)&&a.createElement("div",{className:"avp-playlist-item__image"},_.image&&a.createElement("img",{src:_.image,alt:""}),_.imageLabel),!t&&a.createElement("div",{className:"avp-playlist-item__image"},a.createElement("img",{alt:"",src:r,style:{background:"red",transform:"translateX(-".concat(v,"%)")}})),a.createElement("div",{className:"avp-playlist-item__content"},!t&&a.createElement(yt,W(q({},_),{"data-testid":"ChapterPlaylistItem"})),t&&a.createElement(ft,W(q({},_),{"data-testid":"IllicoPlaylistItem"})))))}};kt.propTypes={jsonUrl:l().string,chapterListSize:l().number,chapterIndex:l().number,image:l().string,imageLabel:l().string,title:l().string,selected:l().string,onClickPlaylistItem:l().func,isIllico:l().bool,hasChapters:l().bool,item:l().object,spriteUrl:l().string,avpRef:l().object,isRightColumnOpen:l().bool,onClickDeleteChapter:l().func,onClickEditChapter:l().func,playerId:l().string,lang:l().string};var Ct=$e(["jsonUrl","isIllico","hasChapters"])(kt);w().registerAdapter("SmartAdServer",T());var Pt=class{constructor(e){let t;this.options=e,e.env.indexOf("local")>-1&&(w().Log.logLevel=w().Log.Level.DEBUG),this.plugin=new(w().Plugin)({accountCode:e.config.accountCode[e.env]}),this.options.vendorPlayer.events.on("ready",(()=>{this.plugin._adapter||this.init()})),this.options.apiModel.getVastNode()&&!this.options.isLive&&(this.options.vendorPlayer.events.on("adError",(()=>{t=!0})),this.options.vendorPlayer.events.on("autoplayError",(()=>{t&&(this.plugin.removeAdapter(),this.plugin._adapter||this.init())}))),this.options.vendorPlayer.events.on("firstFrame",(()=>{this.plugin._adapter||this.init()})),this.options.vendorPlayer.events.on("error",(e=>{e.message&&e.message.indexOf("HLS playlist request error at URL")>-1&&(this.plugin._adapter||this.init(),this.plugin.fireFatalError(e.code,e.message),this.plugin.removeAdapter())})),i.g.window.addEventListener("unload",(()=>{this.plugin.fireStop()}))}destroy(){this.plugin.removeAdapter()}init(){this.plugin.setOptions({"content.isLive":this.options.apiModel.isLive(),"content.title":this.options.apiModel.getTitleFromPreviewDataFirst(),"content.resource":this.options.vendorPlayer.getCurrentResource(),"content.duration":this.options.apiModel.getDuration(),"content.throughput":this.options.vendorPlayer.getUserThroughput(),"content.streamingProtocol":"HLS","content.id":this.options.apiModel.getProviderId(),"content.language":this.options.apiModel.getLanguage(),"content.playbackType":!0===this.options.apiModel.isLive()?"LIVE":"VOD","app.name":"Web","app.releaseVersion":Oe}),this.plugin.setAdapter(new(S())(this.options.vendorPlayer.getVideoJsInstance()))}},Et=class e{constructor(e){const t=this;t.options=e,t.options.apiModel.getStatsNode()&&t.options.apiModel.getStatsNode().eStat&&t.addListeners()}addListeners(){const e=this;this.options.isLive&&e.options.eventEmitter.on("arte_vp.stats.play",(t=>{e.contentAnalytics&&(e.contentAnalytics.streaming.streamURL=e.options.proxyFunctions.getPlaylistItem().file,e.contentStreamTag.notifyPlayer("play",t.position))})),e.options.eventEmitter.on("arte_vp.stats.stop",(()=>{e.contentStreamTag&&(e.contentStreamTag.notifyPlayer("stop",e.options.isLive?0:e.lastPosition),e.contentStreamTag.disable())})),e.options.eventEmitter.on("arte_vp.stats.pause",(()=>{e.options.isLive&&e.contentStreamTag&&e.contentStreamTag.notifyPlayer("stop",0)})),e.options.eventEmitter.on("arte_vp.stats.unload",(()=>{e.contentStreamTag&&(e.contentStreamTag.notifyPlayer("stop",this.options.isLive?0:e.lastPosition),e.contentStreamTag.disable())})),e.options.eventEmitter.on("arte_vp.stats.viewable",(t=>{setTimeout((()=>{!t.viewable&&"paused"===this.options.proxyFunctions.getState()&&e.contentStreamTag&&e.contentStreamTag.notifyPlayer("pause",this.options.isLive?0:t.position||e.lastPosition)}))})),e.options.eventEmitter.on("arte_vp.stats.ping",(t=>{e.lastPosition=t.position})),e.options.eventEmitter.on("arte_vp.stats.seek",(t=>{"playing"!==e.options.proxyFunctions.getState()&&"buffering"!==e.options.proxyFunctions.getState()||e.contentStreamTag&&(e.contentStreamTag.notifyPlayer("pause",t.from),e.contentStreamTag.notifyPlayer("play",t.to))})),e.options.eventEmitter.on("arte_vp.skipAction",(t=>{e.commonConfAnalytics.newLevels.newLevel_3=t.skipType,e.contentStreamTag.set(e.contentAnalytics)})),e.render()}getml5FromTracks(){const{proxyFunctions:e}=this.options,t=e.getActiveAudioTrack(),i=e.getActiveTextTrack();let a=null;return t&&(a=t.label),a+=i?"/".concat(i.label):"/-",a}getState(){return"playing"===this.options.proxyFunctions.getState()?"play":"paused"===this.options.proxyFunctions.getState()||"buffering"===this.options.proxyFunctions.getState()?"pause":"stop"}static getCookie(e){const t="".concat(e,"="),i=decodeURIComponent(document.cookie).split(";");for(let e=0;e<i.length;e+=1){let a=i[e];for(;" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(t))return a.substring(t.length,a.length)}}static isConsented(){return e.getCookie("TC_PRIVACY")&&e.getCookie("TC_PRIVACY").split("@").length>2&&e.getCookie("TC_PRIVACY").split("@")[2].indexOf("1")>-1}setCommonAnalytics(){const t=this;let i;const a=t.options.apiModel.getStatsNode().eStat;return de.mobile()&&(i="MOBILE"),de.desktop()&&(i="DESKTOP"),de.tablet()&&(i="TABLET"),{measure:"streaming",consentType:e.isConsented()?"optin":"exempted",streaming:{diffusion:!1===t.options.isLive?"replay":"live",playerObj:t.options.playerRef,playerName:"ArteVp ".concat(t.options.arteVpVersion),streamName:a.streamName,streamDuration:a.streamDuration,streamGenre:a.streamGenre,playerVersion:"8",streamURL:null,probe:!1===t.options.isLive,callbackState:()=>t.getState()},levels:{level_1:a.level3,level_2:a.level2,level_3:a.level1,level_4:a.level4,level_5:a.level5},newLevels:{newLevel_1:a.newLevel1,newLevel_2:a.newLevel2,newLevel_3:a.newLevel3,newLevel_4:a.newLevel4,newLevel_5:null,newLevel_6:null,newLevel_7:null,newLevel_8:null,newLevel_9:i,newLevel_10:t.options.isEmbed?"EMBED":"INTERNE",newLevel_11:a.newLevel11},mediaInfo:{mediaContentId:a.mediaContentId,mediaDiffMode:a.mediaDiffMode,mediaChannel:a.mediaChannel}}}setPrerollAnalytics(){const e=this,t=e.options.apiModel.getStatsNode().eStat;e.options.eventEmitter.on("arte_vp.stats.adImpression",(i=>{e.prerollAnalytics=W(q({},e.commonConfAnalytics),{serial:t.prerollSerial,newLevels:W(q({},e.commonConfAnalytics.newLevels),{newLevel_1:i.adId,newLevel_2:"-",newLevel_3:i.duration,newLevel_4:"-"}),streaming:W(q({},e.commonConfAnalytics.streaming),{callbackPosition:()=>e.getPrerollPosition()})}),e.contentStreamTag&&(e.contentStreamTag.notifyPlayer("pause",e.options.proxyFunctions.getPosition()),e.contentStreamTag.disable()),e.prerollStreamTag=new eStatTag(e.prerollAnalytics)})),e.options.eventEmitter.on("arte_vp.stats.adTime",(t=>{e.prerollPosition=t.position,!e.prerollAnalytics||e.prerollAnalytics.newLevels.newLevel_3&&"-"!==e.prerollAnalytics.newLevels.newLevel_3||(e.prerollAnalytics.newLevels.newLevel_3=t.duration,e.prerollStreamTag.set(e.prerollAnalytics))})),e.options.eventEmitter.on("arte_vp.stats.adSkipped",(()=>{e.prerollAnalytics.newLevels.newLevel_4="ok",e.prerollStreamTag.set(e.prerollAnalytics)})),e.options.eventEmitter.on("arte_vp.stats.adComplete",(()=>{e.prerollAnalytics.newLevels.newLevel_2="ok",e.prerollStreamTag.set(e.prerollAnalytics)})),e.options.eventEmitter.on("arte_vp.stats.adFinished",(()=>{void 0!==e.prerollAnalytics&&(e.prerollStreamTag.notifyPlayer("stop",e.prerollPosition),e.prerollStreamTag.disable())}))}getPrerollPosition(){let e=0;return this.prerollPosition&&(e=this.prerollPosition),e}updateTag(e,t){this.contentAnalytics?(this.contentAnalytics.newLevels[e]=t,this.contentStreamTag&&this.contentStreamTag.set(this.contentAnalytics)):this.commonConfAnalytics&&(this.commonConfAnalytics.newLevels[e]=t)}render(){const e=this,t=e.options.apiModel.getStatsNode().eStat;e.commonConfAnalytics=e.setCommonAnalytics(),e.options.isLive||e.setPrerollAnalytics(),e.options.eventEmitter.on("changeaudiotrack",(()=>{e.updateTag("newLevel_5",this.getml5FromTracks())})),e.options.eventEmitter.on("changetexttrack",(()=>{e.updateTag("newLevel_5",this.getml5FromTracks())})),e.options.eventEmitter.on("arte_vp.stats.play",(()=>{!e.contentAnalytics||e.options.isLive||!1!==ye("isAd",e.options.playerId)||e.contentStreamTag.orchestrator.enabled||(e.contentStreamTag=new eStatTag(e.contentAnalytics))})),e.options.eventEmitter.on("arte_vp.stats.playAttempt",(()=>{e.contentAnalytics=W(q({},e.commonConfAnalytics),{serial:t.serial,streaming:W(q({},e.commonConfAnalytics.streaming),{callbackPosition:()=>e.options.proxyFunctions.getPosition()})}),e.contentStreamTag=new eStatTag(e.contentAnalytics)})),e.options.eventEmitter.on("arte_vp.user_loggedin",(()=>{void 0!==e.prerollAnalytics&&(e.prerollAnalytics.newLevels.newLevel_6="LOGGED IN",e.prerollStreamTag.set(e.prerollAnalytics)),e.updateTag("newLevel_6","LOGGED IN")})),e.options.eventEmitter.on("arte_vp.user_loggedout",(()=>{void 0!==e.prerollAnalytics&&(e.prerollAnalytics.newLevels.newLevel_6="NOT LOGGED IN",e.prerollStreamTag.set(e.prerollAnalytics)),e.updateTag("newLevel_6","NOT LOGGED IN")}))}},St=class{constructor(e){this.options=e}init(){this.options.apiModel.getStatsNode()&&this.options.apiModel.getStatsNode().agf&&"undefined"!=typeof gfkConnector&&gfkConnector.init((e=>{this.initNol(e),this.listentoPlayer()}))}listentoPlayer(){const e=this;e.options.eventEmitter.on("firstFrame",(()=>{e.options.apiModel.isLive()||e.nielsenInstance.ggPM("setPlayheadPosition",0)})),e.options.eventEmitter.on("arte_vp.stats.play",(()=>{e.nielsenInstance.ggPM("loadMetadata",e.contentMetaData)})),e.options.eventEmitter.on("arte_vp.stats.pause",(()=>{e.nielsenInstance.ggPM("stop",e.getPlayerPosition())})),e.options.eventEmitter.on("arte_vp.stats.ping",(t=>{!1===ye("isAd",e.options.playerId)&&e.nielsenInstance.ggPM("setPlayheadPosition",e.options.apiModel.isLive()?e.getPlayerPosition():t.position)})),e.options.eventEmitter.on("arte_vp.stats.stop",(()=>{e.nielsenInstance.ggPM("end",e.getPlayerPosition())})),e.options.eventEmitter.on("arte_vp.stats.unload",(()=>{e.nielsenInstance.ggPM("end",e.getPlayerPosition())})),e.options.eventEmitter.on("arte_vp.stats.pagehide",(()=>{e.nielsenInstance.ggPM("end",e.getPlayerPosition())})),e.options.eventEmitter.on("arte_vp.stats.connectionloss",(()=>{e.nielsenInstance.ggPM("stop",e.getPlayerPosition())}))}initNol(e,t="content"){const i=this,a=i.options.apiModel.getStatsNode().agf;i.nielsenInstance=NOLBUNDLE.nlsQ(i.options.config.app_id[i.options.env],"ArteVp ".concat(i.options.arteVpVersion," ").concat(a.assetid),null),i.contentMetaData={type:t,assetid:a.assetid,program:a.program,title:a.title,length:a.length,nol_c2:a.nol_c2,nol_c5:null,nol_c7:a.nol_c7,nol_c8:a.nol_c8,nol_c9:a.nol_c9,nol_c10:a.nol_c10,nol_c12:a.nol_c12,nol_c15:a.nol_c15,nol_c18:a.nol_c18,nol_c20:"p20,".concat(e)}}getPlayerPosition(){return this.options.apiModel.isLive()?Math.round((new Date).getTime()/1e3):Math.round(this.options.proxyFunctions.getPosition())}},It=class{constructor(e){const t=this;t.options=e,t.options.apiModel.getStatsNode()&&t.options.apiModel.getStatsNode().arte&&e.eventEmitter.once("arte_vp.stats.play",t.hit.bind(t))}hit(){const e=this,t=e.options.apiModel.getStatsNode().arte;if(t){e.options.playerRef.querySelector(".vtm_tag_image_v2")&&e.options.playerRef.querySelector(".vtm_tag_image_v2").remove();const i=document.createElement("img");let a,s;i.setAttribute("width","1"),i.setAttribute("height","1"),i.setAttribute("alt",""),i.setAttribute("class","vtm_tag_image_v2"),de.desktop()&&(s="desktop",a="WEB"),de.mobile()&&(s="mobile",a="WEB"),de.tablet()&&(s="tablet",a="WEB"),t[s]&&t[s][a]&&(i.setAttribute("src","".concat(t[s][a])),e.options.playerRef.appendChild(i))}}},wt=class{constructor(e){this.options=e,this.onPlay=this.onPlay.bind(this),this.onPause=this.onPause.bind(this),this.onStop=this.onStop.bind(this),this.onSeek=this.onSeek.bind(this),this.lastEvent=null,e.vastPluginLoaded?this.options.vendorPlayer.events.on("arte_vp.stats.adFinished",(()=>{this.addEventsListeners()})):this.addEventsListeners()}addEventsListeners(){this.options.vendorPlayer.events.on("arte_vp.stats.play",this.onPlay),this.options.vendorPlayer.events.on("arte_vp.stats.pause",this.onPause),this.options.vendorPlayer.events.on("arte_vp.stats.stop",this.onStop),this.options.vendorPlayer.events.on("arte_vp.stats.seek",this.onSeek)}removeEventsListeners(){this.options.vendorPlayer.events.off("arte_vp.stats.play",this.onPlay),this.options.vendorPlayer.events.off("arte_vp.stats.pause",this.onPause),this.options.vendorPlayer.events.off("arte_vp.stats.stop",this.onStop),this.options.vendorPlayer.events.off("arte_vp.stats.seek",this.onSeek)}getTrackingInfos(e){const{vendorPlayer:t,playerId:i,apiModel:a}=this.options,s=t.api.getActiveAudioTrack(),o=t.api.getActiveTextTrack(),n=a.getStatsNode();return{frontendContextPlayer:W(q(q({timecode:e.to?Math.round(e.to):Math.round(e.position),previousTimecode:e.from?Math.round(e.from):Math.round(e.position),audioTrackLanguage:s.language,audioTrackType:"main-desc"===s.kind?"AUDIO_DESCRIPTION":"STANDARD"},o?{subtitlesTrackLanguage:o.language}:[]),s?{subtitlesTrackType:t.api.isForcedTextTrack(o)?"FORCED":"captions"===o.kind?"STM":"FULL"}:[]),{streamUrl:t.api.getPlaylistItem().file,soundMuted:ye("mute",i),playbackMode:this.getPlaybackMode()}),apiContextPlayer:n.serverSideTracking?n.serverSideTracking:{}}}onSeek(e){const{sendTracking:t,vendorPlayer:i}=this.options;if("playing"===i.api.getState()||"buffering"===i.api.getState()){const i=this.getTrackingInfos({position:e.from});t({action:"VIDEO_PAUSED",frontendContextPlayer:i.frontendContextPlayer,apiContextPlayer:i.apiContextPlayer});const a=this.getTrackingInfos(e);t({action:"VIDEO_PLAYED",frontendContextPlayer:a.frontendContextPlayer,apiContextPlayer:a.apiContextPlayer}),this.lastEvent="seek"}}onPlay(e){if("seek"!==this.lastEvent&&"play"!==this.lastEvent){const{sendTracking:t}=this.options,i=this.getTrackingInfos(e);t({action:"VIDEO_PLAYED",frontendContextPlayer:i.frontendContextPlayer,apiContextPlayer:i.apiContextPlayer}),this.lastEvent="play"}}onPause(e){const{sendTracking:t}=this.options,i=this.getTrackingInfos(e);t({action:"VIDEO_PAUSED",frontendContextPlayer:i.frontendContextPlayer,apiContextPlayer:i.apiContextPlayer}),this.lastEvent="pause"}onStop(e){const{sendTracking:t}=this.options,i=this.getTrackingInfos(e);t({action:"VIDEO_STOPPED",frontendContextPlayer:i.frontendContextPlayer,apiContextPlayer:i.apiContextPlayer}),this.lastEvent="stop"}getPlaybackMode(){const{playerId:e}=this.options;return ye("isChromeCastingActive",e)?"CHROMECAST":ye("isAirPlayActive",e)?"AIRPLAY":ye("isPicturePictureEnabled",e)?"PIP":"DEVICE"}destroy(){this.removeEventsListeners()}},xt=class{constructor(e){this.options=q({initialTrackingProgressInSeconds:20,trackingIntervalInSeconds:120,throttleIntervalInSeconds:60.4},e);const{apiModel:t,vendorPlayer:i}=this.options;this.programId=t.getProviderId(),this.initialProgressTracked=!1,this.onSeeked=this.onSeeked.bind(this),this.onTime=this.onTime.bind(this),this.onVisibilitychange=this.onVisibilitychange.bind(this),this.onIdle=this.onIdle.bind(this),this.onPause=this.onPause.bind(this),this.onComplete=this.onComplete.bind(this),this.createThrottledStorePosition(),this.createThrottledAutotrack(),i.events.on("arte_vp.user_loggedin",(()=>{t.isMyArteEnabled()&&this.addConnectedEventsListeners()})),e.vendorPlayer.events.on("arte_vp.user_loggedout",(()=>{this.removeConnectedEventsListeners()}))}createThrottledStorePosition(){const{proxyFunctions:e,throttleIntervalInSeconds:t}=this.options;this.throttledStorePosition=(0,c.P)(1e3*t,(()=>{"function"==typeof e.getPosition&&this.storePosition(e.getPosition())}))}createThrottledAutotrack(){const{trackingIntervalInSeconds:e}=this.options;this.throttledAutoTrackProgression=(0,c.P)(1e3*e,(()=>{this.throttledStorePosition()}))}addConnectedEventsListeners(){const{eventEmitter:e}=this.options;document.addEventListener("visibilitychange",this.onVisibilitychange),e.on("idle",this.onIdle),e.on("pause",this.onPause),e.on("time",this.onTime),e.on("complete",this.onComplete),e.on("seeked",this.onSeeked)}removeConnectedEventsListeners(){const{eventEmitter:e}=this.options;document.removeEventListener("visibilitychange",this.onVisibilitychange),e.off("idle",this.onIdle),e.off("pause",this.onPause),e.off("time",this.onTime),e.off("complete",this.onComplete),e.off("seeked",this.onSeeked)}onVisibilitychange(){"visible"!==document.visibilityState&&this.throttledStorePosition()}onIdle(e){"error"!==e.reason&&"idle"!==e.reason||this.throttledStorePosition()}onTime(e){const{initialTrackingProgressInSeconds:t,proxyFunctions:i}=this.options;e.position>t&&e.position<t+1&&!this.initialProgressTracked&&(this.throttledStorePosition(),this.initialProgressTracked=!0),e.position>t+1&&"playing"===i.getState()&&this.throttledAutoTrackProgression()}onPause(){this.throttledStorePosition()}onComplete(){this.storePosition("complete")}onSeeked(){const{proxyFunctions:e}=this.options;"playing"===e.getState()&&this.throttledStorePosition()}destroy(){this.removeConnectedEventsListeners()}storePosition(e){const{vendorPlayer:t,apiModel:i}=this.options;if(t.isAdPlaying())return;if(!1===e||null===e||0===Math.round(e)||"string"==typeof e&&"complete"!==e)return;let a="string"==typeof e?e:Math.round(e);"complete"===e&&(a=i.getDuration()),(0,h.W8)({programId:this.programId,durationInSeconds:i.getDuration(),timeInSeconds:a,persistMethod:{method:"server"}}).catch((e=>{console.error("setProgression Failed",e)}))}},Tt=class{constructor(e){this.options=e,this.videojsInstance=this.options.vendorPlayer.getVideoJsInstance(),this.storePosition=(0,c.P)(500,this.evtHandlerStorePosition).bind(this),this.storeComplete=this.storeComplete.bind(this),this.seekIfPossible=this.seekIfPossible.bind(this),this.options.eventEmitter.on("time",this.storePosition),this.options.eventEmitter.on("complete",this.storeComplete),this.options.eventEmitter.on("firstFrame",this.seekIfPossible)}evtHandlerStorePosition(){if(!this.options.vendorPlayer.isAdPlaying()&&this.options.proxyFunctions.getState&&"playing"===this.options.proxyFunctions.getState()){const e=this.options.proxyFunctions.getPosition(),t=this.options.apiModel.getProviderId();if(null===e||0===Math.round(e))return;e>20&&ae(t,e,this.options.apiModel.getDuration(),{method:"localOnly"})}}storeComplete(){ae(this.options.apiModel.getProviderId(),this.options.apiModel.getDuration(),this.options.apiModel.getDuration(),{method:"localOnly"})}seekIfPossible(){const e=this.options.apiModel.isLive(),t=ye("tcStartFrom",this.options.playerId);var i,a;t&&t>0&&t<this.options.apiModel.getDuration()&&!1===e?this.options.proxyFunctions.seek(t):(i=this.options.apiModel.getProviderId(),a=this.options.apiModel.getLanguage(),(0,h.hR)({programId:i,lang:a,source:{method:"localOnly"}})).then((e=>{e.value<this.options.apiModel.getDuration()&&this.options.proxyFunctions.seek(e.value)})).catch((e=>{console.error(e)}))}},At=class{constructor(e){const t=this;t.options=e,Math.random()<.5?Y("perfLoggingEligible","a".concat(Math.random().toString(36).substr(2))):function(e){try{sessionStorage.removeItem("perfLoggingEligible")}catch(e){console.error(e)}}(),e.eventEmitter.on("error",(e=>{Be("arte_vp.error",0,q({arte_vp_error_message:e.code},t.options.commonLogInfos))})),e.eventEmitter.on("autoplayError",(e=>{Be("arte_vp.error",0,q({arte_vp_error_message:e.message},t.options.commonLogInfos))})),e.eventEmitter.on("adError",(e=>{try{Be("arte_vp.adError",0,q({arte_vp_vast_url:btoa(Ve(e.tag))},t.options.commonLogInfos))}catch(e){console.warn(e)}})),e.eventEmitter.on("adImpression",(()=>{Be("arte_vp.adEvent",0,q({arte_vp_adEventName:"adImpression"},t.options.commonLogInfos))})),e.eventEmitter.on("adComplete",(()=>{Be("arte_vp.adEvent",0,q({arte_vp_adEventName:"adComplete"},t.options.commonLogInfos))})),e.eventEmitter.on("adSkipped",(()=>{Be("arte_vp.adEvent",0,q({arte_vp_adEventName:"adSkipped"},t.options.commonLogInfos))})),e.eventEmitter.on("ready",(e=>{this.readyTimeout=setTimeout((()=>{Be("jwplayer.ready",e.setupTime,q({mute:t.options.proxyFunctions.getMute()},t.options.commonLogInfos))}),2e3)})),e.eventEmitter.on("firstFrame",(e=>{e.loadTime<1e4?Be("jwplayer.timeBetwenPlayAttemptAndPlay",e.loadTime,t.options.commonLogInfos,t.options.proxyFunctions):Be("arte_vp.error",e.loadTime,q({arte_vp_error_message:"Too much time to start"},t.options.commonLogInfos),t.options.proxyFunctions)})),e.eventEmitter.on("changequalitylevel",(()=>{Be("jwplayer.levelsChanged",0,q({},t.options.commonLogInfos),t.options.proxyFunctions)}))}destroy(){clearTimeout(this.readyTimeout)}},Ft=class{constructor(e){const t=this;if(t.options=e,t.apiModel=t.options.apiModel,t.apiModel.getVastNode()||e.vast){let a=!1,s="";if(t.apiModel.getVastNode()){s=t.apiModel.getVastNode().url;const e={};e.tmstp=Date.now(),s+=(s.indexOf("?")>-1?"&":"?")+(0,k.Z)(e)}const o={vastUrl:s,debug:!1,addCtaClickZone:!1};e.vast&&(o.vastUrl=e.vast,o.debug=!0),function(e){const t=document.createElement("input");return t.type="url",t.value=e,!!t.checkValidity()}(o.vastUrl)&&e.vendorPlayer.videojsInstance.vast(o),e.eventEmitter.on("adError",(()=>{Je(t.options.vendorPlayerSuffixId,0),a=!0,ge("isAd",!1,e.playerId)})),e.eventEmitter.on("adComplete",(()=>{Je(t.options.vendorPlayerSuffixId,0),a=!0,ge("isAd",!1,e.playerId)})),e.eventEmitter.on("adSkipped",(()=>{Je(t.options.vendorPlayerSuffixId,0),a=!0,ge("isAd",!1,e.playerId)})),e.eventEmitter.on("adImpression",(o=>{if(ge("isAd",!0,e.playerId),o.adClickCallback&&(ge("isAdCtaAvailable",!0,e.playerId),ge("adClickCallback",o.adClickCallback,e.playerId)),Je(t.options.vendorPlayerSuffixId,1),!a)try{Be("arte_vp.vastLoading",0,q({arte_vp_vast_url:i.g.btoa(Ve(s))},t.options.commonLogInfos))}catch(e){console.warn(e)}}))}}},Mt=class e{constructor(e){this.options=e,this.volumeStep=5,this.volumeUpdateIntervalOnHold=300,this.volumeMessageBoxTimeOnScreen=1e3,this.fastForwardRewindMessageBoxTimeOnScreen=1e3,this.syntheticPlayerFocused=!0,this.keyStates={ArrowRight:!1,ArrowLeft:!1},this.keyUpHandlerRef=this.keyUpHandler.bind(this),this.keyDownHandlerRef=this.keyDownHandler.bind(this),this.globalKeyUpHandlerRef=this.globalKeyUpHandlerRef.bind(this),this.globalKeyDownHandlerRef=this.globalKeyDownHandlerRef.bind(this),this.volumeUp=this.volumeUp.bind(this),this.volumeDown=this.volumeDown.bind(this),this.handleFocusChange=this.handleFocusChange.bind(this),this.addListener(),this.addGlobalListener(),this.volumeInterval=!1,this.handleFocusTimeout=!1;const{avpRef:t}=this.options;t.onclick=()=>setTimeout((()=>this.handleFocusChange(!0)),100),this.options.eventEmitter.on("arte_vp.previewClicked",(()=>setTimeout((()=>this.handleFocusChange(!0)),100))),document.addEventListener("click",(()=>this.handleFocusChange(!1)),!1)}handleFocusChange(e){e?(this.handleFocusTimeout&&clearTimeout(this.handleFocusTimeout),this.handleFocusTimeout=setTimeout((()=>{this.syntheticPlayerFocused||this.options.eventEmitter.emit("arte_vp.focus"),this.syntheticPlayerFocused=!0}),200)):(this.handleFocusTimeout&&clearTimeout(this.handleFocusTimeout),this.handleFocusTimeout=setTimeout((()=>{this.syntheticPlayerFocused&&this.options.eventEmitter.emit("arte_vp.unfocus"),this.syntheticPlayerFocused=!1}),200))}destroy(){this.removeListener(),this.removeGlobalListener()}globalKeyUpHandlerRef(t){if(e.allowKeyboardShortcut(t))switch(t.code){case"Space":this.handleSpace(t);break;case"ArrowUp":this.handleArrowUpKeystrokeUp(t);break;case"ArrowDown":this.handleArrowDownKeystrokeUp(t);break;case"ArrowRight":this.handleArrowRightUp(t);break;case"ArrowLeft":this.handleArrowLeftUp(t);break;case"Tab":this.handleTabUpGlobal()}}globalKeyDownHandlerRef(t){if(e.allowKeyboardShortcut(t))switch(t.key){case"ArrowUp":this.handleArrowUpKeystrokeDown(t);break;case"ArrowDown":this.handleArrowDownKeystrokeDown(t);break;case"ArrowRight":this.handleArrowRightDown(t);break;case"ArrowLeft":this.handleArrowLeftDown(t);break;case"m":this.handleKeyM(t);break;case"f":this.handleKeyF(t);break;case"i":this.handleKeyI(t);break;case"N":this.handleKeyN(t);break;case"P":this.handleKeyP(t)}}keyUpHandler(e){switch(this.handleFocus(e),e.code){case"Enter":this.handleEnterUp(e);break;case"Escape":this.handleEscape(e)}}keyDownHandler(e){switch(e.code){case"Tab":this.handleTabDown(e);break;case"Backspace":this.handleBackspaceDown(e);break;case"Enter":this.handleEnterDown(e)}}removeListener(){this.options.avpRef.removeEventListener("keyup",this.keyUpHandlerRef),this.options.avpRef.removeEventListener("keydown",this.keyDownHandlerRef)}addListener(){this.options.avpRef.addEventListener("keyup",this.keyUpHandlerRef),this.options.avpRef.addEventListener("keydown",this.keyDownHandlerRef)}removeGlobalListener(){document.removeEventListener("keyup",this.globalKeyUpHandlerRef),document.removeEventListener("keydown",this.globalKeyDownHandlerRef)}addGlobalListener(){document.addEventListener("keyup",this.globalKeyUpHandlerRef),document.addEventListener("keydown",this.globalKeyDownHandlerRef)}handleTabDown(){this.options.displayControlsAndRefreshTimeout(),document.getElementsByClassName("avp-sharebox").length>0&&document.activeElement.matches(".avp-icon-close")&&document.getElementById("avp-sharebox__share").focus()}handleTabUpGlobal(){const e=document.getElementsByClassName("avp-player");e.length>0&&(e[0].contains(document.activeElement)?this.handleFocusChange(!0):this.handleFocusChange(!1))}handleSpace(e){if(!ye("userFirstClicked",this.options.playerId))return ge("userFirstClickedWithSpaceBar",!0,this.options.playerId),void this.handleEnterUp(e);const t=ye("syntheticFocusEnabled",this.options.playerId);this.syntheticPlayerFocused&&t&&(e.preventDefault(),this.togglePlayPause(e))}handleEscape(e){const t=ye("isInfoBoxOpen",this.options.playerId),i=ye("isShareBoxOpen",this.options.playerId);this.isOverlayClosable(".avp-fulloverlay")?this.triggerClick(".avp-fulloverlay .avp-icon-close"):this.isOverlayClosable(".avp-playlist")?this.triggerClick(".avp-playlist .avp-icon-close"):this.isOverlayClosable(".avp-settings .avp-overlay")?this.triggerClick(".avp-settings .avp-overlay .avp-icon-close"):t?this.options.eventEmitter.emit("arte_vp.info_close",e):i&&this.options.eventEmitter.emit("arte_vp.share_close",e),document.activeElement&&("next_button"!==document.activeElement.id&&"previous_button"!==document.activeElement.id||document.activeElement.blur())}handleFocus(t){const{avpRef:i}=this.options,a=t.path||t.composedPath&&t.composedPath();a&&a.includes(i.querySelector("div.avp-playlist-clickcatcher"))&&!e.hasClass(i,"isRightColumnOpen")&&this.options.showPlaylist();const s={"avp-icon-related":".avp-icon-related .avp-card"};Object.keys(s).forEach((a=>{i.querySelector(s[a])&&e.removeClass(i.querySelector(s[a]),"visible"),e.hasClass(t.target,a)&&e.addClass(i.querySelector(s[a]),"visible")}))}handleBackspaceDown(t){const i=ye("isInfoBoxOpen",this.options.playerId),a=ye("isShareBoxOpen",this.options.playerId);if(i){let e=!1;document.getElementsByClassName("avp-infobox").length&&([e]=document.getElementsByClassName("avp-infobox")),e&&e.contains(document.activeElement)&&(this.triggerClick(t.target),this.togglePlayPause(t))}else if(a){let e=!1;document.getElementsByClassName("avp-sharebox").length&&([e]=document.getElementsByClassName("avp-sharebox")),e&&e.contains(document.activeElement)&&(this.triggerClick(t.target),this.togglePlayPause(t))}else e.hasClass(t.target,"avp-button--Info")&&(this.options.eventEmitter.emit("arte_vp.info_open",t),t.stopPropagation(),this.togglePlayPause(t))}handleEnterUp(t){const{avpRef:i,playerId:a}=this.options;e.hasClass(t.target,"avp-button")?e.hasClass(t.target,"avp-button--Info")||e.hasClass(t.target,"avp-button--Share")||this.triggerClick(t.target):e.hasClass(t.target,"avp-icon")||e.hasClass(t.target.parentNode,"avp-menu")||e.hasClass(t.target,"avp-icon-close")||e.hasClass(t.target,"avp-sharebox__title")||e.hasClass(t.target,"avp-playlist-item")?this.triggerClick(t.target):e.hasClass(i,"isOverlayOpen")||this.togglePlayPause(t),ge("userFirstClickedWithSpaceBar",!1,a)}handleEnterDown(t){if(e.hasClass(t.target,"avp-button")){let i;e.hasClass(t.target,"avp-button--Info")?i="info_open":e.hasClass(t.target,"avp-button--Share")&&(i="share_open"),i&&(this.options.eventEmitter.emit("arte_vp.".concat(i),t),t.stopPropagation())}}togglePlayPause(t){const{proxyFunctions:i,isLive:a}=this.options;ye("isAd",this.options.playerId)?this.options.eventEmitter.emit("arte_vp.playPauseAd"):i.play?e.hasId(t.target,"avp-vendor-")||"complete"===i.getState()||("playing"!==i.getState()||a?i.play():i.pause()):this.triggerClick(".avp-clickcatcher")}handleArrowRightUp(e){this.keyStates.ArrowRight||this.handleArrowRightDown(e),this.keyStates.ArrowRight=!1}handleArrowRightDown(e){this.keyStates.ArrowRight=!0;const{isLive:t,isTouch:i,onClickForward:a}=this.options,o=ye("isAd",this.options.playerId);if(!i&&!t&&!o){a(e);const{displayMessageBox:t}=this.options;t({content:s.ZP.t("settings__fast_forward"),autoHideTime:this.fastForwardRewindMessageBoxTimeOnScreen})}}handleArrowLeftUp(e){this.keyStates.ArrowLeft||this.handleArrowLeftDown(e),this.keyStates.ArrowLeft=!1}handleArrowLeftDown(e){this.keyStates.ArrowLeft=!0;const{isLive:t,isTouch:i,onClickBackward:a}=this.options,o=ye("isAd",this.options.playerId);if(!i&&!t&&!o){a(e);const{displayMessageBox:t}=this.options;t({content:s.ZP.t("settings__rewind"),autoHideTime:this.fastForwardRewindMessageBoxTimeOnScreen})}}handleArrowUpKeystrokeUp(){this.volumeInterval&&(clearInterval(this.volumeInterval),this.volumeInterval=!1)}handleArrowUpKeystrokeDown(e){if("LI"===e.target.tagName&&e.target.previousSibling)return void e.target.previousSibling.focus();const t=ye("syntheticFocusEnabled",this.options.playerId);this.syntheticPlayerFocused&&t&&(e.preventDefault(),this.volumeInterval||(this.volumeUp(),this.volumeInterval=setInterval(this.volumeUp,this.volumeUpdateIntervalOnHold)))}handleArrowDownKeystrokeUp(){this.volumeInterval&&(clearInterval(this.volumeInterval),this.volumeInterval=!1)}handleArrowDownKeystrokeDown(e){if("LI"===e.target.tagName&&e.target.nextSibling)return void e.target.nextSibling.focus();const t=ye("syntheticFocusEnabled",this.options.playerId);this.syntheticPlayerFocused&&t&&(e.preventDefault(),this.volumeInterval||(this.volumeDown(),this.volumeInterval=setInterval(this.volumeDown,this.volumeUpdateIntervalOnHold)))}volumeUp(){const{onChangeVolume:e,displayMessageBox:t}=this.options,i=se("volume"),a=Math.min(100,i+this.volumeStep);e({volume:a,source:"keystroke",playerId:this.options.playerId}),t({content:"".concat(a,"%"),autoHideTime:this.volumeMessageBoxTimeOnScreen})}volumeDown(){const{onChangeVolume:e,displayMessageBox:t}=this.options,i=se("volume"),a=Math.max(0,i-this.volumeStep);e({volume:a,source:"keystroke",playerId:this.options.playerId}),t({content:"".concat(a,"%"),autoHideTime:this.volumeMessageBoxTimeOnScreen})}handleKeyM(e){const{onClickMute:t}=this.options;e.playerId=this.options.playerId,t(e)}handleKeyF(e){const{onClickFullscreen:t,vendorPlayer:i}=this.options;t(e,i)}handleKeyI(e){ye("isInfoBoxOpen",this.options.playerId)||(this.options.eventEmitter.emit("arte_vp.info_open",e),e.stopPropagation())}handleKeyN(e){const{avpRef:t}=this.options;e.shiftKey&&t.querySelector(".avp-icon-next")&&this.triggerClick(".avp-icon-next")}handleKeyP(e){const{avpRef:t}=this.options;e.shiftKey&&t.querySelector(".avp-icon-previous")&&this.triggerClick(".avp-icon-previous")}isOverlayClosable(e){const{avpRef:t}=this.options;return t.querySelector(e)&&t.querySelector("".concat(e," .avp-icon-close"))}triggerClick(e){const{avpRef:t}=this.options;"string"==typeof e?t.querySelector(e).click():e.click()}static allowKeyboardShortcut(e){return!["input","textarea"].includes(e.target.nodeName.toLowerCase())}static hasClass(e,t){return e.className&&-1!==e.className.indexOf(t)}static hasId(e,t){return-1!==e.id.indexOf(t)}static addClass(e,t){e.classList.add(t)}static removeClass(e,t){e&&e.classList.contains(t)&&e.classList.remove(t)}},Lt=class e{constructor(t){this.options=t,this.eventEmitter=t.vendorPlayer.events,this.proxyFunctions=t.vendorPlayer.api,this.vendorPlayer=t.vendorPlayer,this.chromeCastReceiverSessionStateEventHandler=this.chromeCastReceiverSessionStateEventHandler.bind(this),this.chromeCastPlayerStateEventHandler=this.chromeCastPlayerStateEventHandler.bind(this),this.chromeCastPlayerCurrentTimeEventHandler=this.chromeCastPlayerCurrentTimeEventHandler.bind(this),this.chromeCastPlayerVolumeEventHandler=this.chromeCastPlayerVolumeEventHandler.bind(this),this.eventEmitter.once("arte_vp.destroyed",(()=>{i.g.cast&&this.removeChromeReceiverEventsListeners()})),this.eventEmitter.once("firstFrame",(()=>{i.g.cast||(i.g.__onGCastApiAvailable=t=>{t&&(this.eventEmitter.emit("cast",{available:!0,active:!1}),ge("isChromeCastAvailable",!0,this.options.playerId),e.initializeChromeCastApi(),this.addChromeCastReceiverEventsListeners())},He("//www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",document.getElementsByTagName("script")[0],!0,!0,"cast")),ye("isChromeCastAvailable",this.options.playerId)&&(this.addChromeCastReceiverEventsListeners(),this.eventEmitter.emit("cast",{available:!0,active:!1})),ye("IsChromeCastActive",this.options.playerId)&&(this.displaySenderImagePreview(),this.eventEmitter.emit("buffer"),this.eventEmitter.emit("cast",{available:!0,active:!0}),e.getChromecastPlayerCurrentlyPlayedVideoUrl()!==this.options.playlistItem.file&&this.syncPlayersVideo())}))}syncPlayersVideo(){this.proxyFunctions.pause(),this.unmapChromeCastPlayerEvents();const e=this.proxyFunctions.getPosition(),t=this.proxyFunctions.getMute()?0:this.proxyFunctions.getVolume();this.chromeCastPlayerLoadVideo(this.options.apiModel).then((()=>{this.proxyFunctions.pause(),this.mapChromeCastPlayerEvents(),this.mapChromeCastPlayerApi(),this.proxyFunctions.seek(e),this.proxyFunctions.setVolume(t)}),(e=>{console.info("Error code: ".concat(e))}))}chromeCastReceiverSessionStateEventHandler(t){switch(t.sessionState){case i.g.cast.framework.SessionState.SESSION_STARTED:this.displaySenderImagePreview(),this.eventEmitter.emit("buffer"),this.eventEmitter.emit("cast",{available:!0,active:!0}),ge("IsChromeCastActive",!0,this.options.playerId),ge("isChromeCastAvailable",!0,this.options.playerId),e.getChromecastPlayerCurrentlyPlayedVideoUrl()!==this.options.playlistItem.file&&this.syncPlayersVideo();break;case i.g.cast.framework.SessionState.SESSION_RESUMED:if(this.displaySenderImagePreview(),this.eventEmitter.emit("buffer"),this.eventEmitter.emit("cast",{available:!0,active:!0}),ge("IsChromeCastActive",!0,this.options.playerId),ge("isChromeCastAvailable",!0,this.options.playerId),e.getChromecastPlayerCurrentlyPlayedVideoUrl()!==this.options.playlistItem.file)this.syncPlayersVideo();else{const e=this.proxyFunctions.getMute()?0:this.proxyFunctions.getVolume();this.position=this.proxyFunctions.getPosition(),this.proxyFunctions.pause(),this.mapChromeCastPlayerApi(),"playing"===this.proxyFunctions.getState()?this.eventEmitter.emit("play"):(this.eventEmitter.emit("play"),this.eventEmitter.emit("pause")),this.mapChromeCastPlayerEvents(),this.proxyFunctions.setVolume(e)}break;case i.g.cast.framework.SessionState.SESSION_ENDED:ge("IsChromeCastActive",!1,this.options.playerId),this.eventEmitter.emit("cast",{available:!0,active:!1}),e.hideSenderImagePreview(),this.vendorPlayer.mapApiFunctions(),this.vendorPlayer.api.seek(this.position),this.vendorPlayer.api.play()}}addChromeCastReceiverEventsListeners(){i.g.cast.framework.CastContext.getInstance().addEventListener(i.g.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,this.chromeCastReceiverSessionStateEventHandler)}removeChromeReceiverEventsListeners(){i.g.cast.framework.CastContext.getInstance().removeEventListener(i.g.cast.framework.CastContextEventType.SESSION_STATE_CHANGED,this.chromeCastReceiverSessionStateEventHandler)}mapChromeCastPlayerEvents(){const e=new i.g.cast.framework.RemotePlayer,t=new i.g.cast.framework.RemotePlayerController(e);t.addEventListener(i.g.cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,this.chromeCastPlayerCurrentTimeEventHandler),t.addEventListener(i.g.cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,this.chromeCastPlayerStateEventHandler),t.addEventListener(i.g.cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,this.chromeCastPlayerVolumeEventHandler)}unmapChromeCastPlayerEvents(){const e=new i.g.cast.framework.RemotePlayer,t=new i.g.cast.framework.RemotePlayerController(e);t.removeEventListener(i.g.cast.framework.RemotePlayerEventType.CURRENT_TIME_CHANGED,this.chromeCastPlayerCurrentTimeEventHandler),t.removeEventListener(i.g.cast.framework.RemotePlayerEventType.PLAYER_STATE_CHANGED,this.chromeCastPlayerStateEventHandler),t.removeEventListener(i.g.cast.framework.RemotePlayerEventType.VOLUME_LEVEL_CHANGED,this.chromeCastPlayerVolumeEventHandler)}chromeCastPlayerStateEventHandler(e){switch(e.value){case"PLAYING":this.eventEmitter.emit("play");break;case"PAUSED":this.eventEmitter.emit("pause");break;case"BUFFERING":this.eventEmitter.emit("buffer")}}chromeCastPlayerVolumeEventHandler(e){ge("volume",100*e.value,this.options.playerId),ge("mute",!(e.value>0),this.options.playerId)}chromeCastPlayerCurrentTimeEventHandler(e){this.position=e.value?e.value:0,this.eventEmitter.emit("time",{position:parseInt(e.value,10),currentTime:parseInt(e.value,10),duration:this.options.apiModel.getDuration()})}displaySenderImagePreview(){document.querySelector(".vjs-fluid video").style.display="none";const e=document.createElement("div");e.style.backgroundImage="url('".concat(this.options.apiModel.getImageUrlFromPreviewDataFirst(),"')"),e.classList.add("avp-chromecast-preview"),document.querySelector(".vjs-fluid").appendChild(e)}static hideSenderImagePreview(){document.querySelector(".vjs-fluid video").style.display="block",document.querySelector(".avp-chromecast-preview").remove()}mapChromeCastPlayerApi(){const e=new i.g.cast.framework.RemotePlayer,t=new i.g.cast.framework.RemotePlayerController(e);this.proxyFunctions.play=()=>{t.playOrPause()},this.proxyFunctions.pause=()=>{t.playOrPause()},this.proxyFunctions.getPosition=()=>this.position?this.position:0,this.proxyFunctions.seek=i=>{e.currentTime=i,t.seek()},this.proxyFunctions.setVolume=i=>{e.volumeLevel=i/100,t.setVolumeLevel()},this.proxyFunctions.setMute=i=>{i&&(e.volumeLevel=0,t.setVolumeLevel())},this.proxyFunctions.getState=()=>e.playerState.toLowerCase()}chromeCastPlayerLoadVideo(e){this.eventEmitter.emit("buffer");const t=new chrome.cast.media.MediaInfo(this.options.playlistItem.file,this.options.playlistItem.type);if(e.getVastNode()){const i=[{id:"bc0",vastAdsRequest:{adTagUrl:e.getVastNode().url}}],a=[{id:"b0",breakClipIds:["bc0"],position:0}];t.breakClips=i,t.breaks=a}t.duration=e.getDuration();const a=new chrome.cast.media.GenericMediaMetadata;a.title=e.getTitleFromPreviewDataFirst(),a.subtitle=e.getSubtitleFromPreviewDataFirst(),a.images=[new chrome.cast.Image(e.getImageUrlFromPreviewDataFirst())],t.metadata=a;const s=new chrome.cast.media.LoadRequest(t);return i.g.cast.framework.CastContext.getInstance().getCurrentSession().loadMedia(s)}static initializeChromeCastApi(){i.g.cast.framework.CastContext.getInstance().setOptions({receiverApplicationId:Ie.chromecast_app_id,autoJoinPolicy:chrome.cast.AutoJoinPolicy.ORIGIN_SCOPED})}static getChromecastPlayerCurrentlyPlayedVideoUrl(){return i.g.cast.framework.CastContext.getInstance().getCurrentSession().getMediaSession()?i.g.cast.framework.CastContext.getInstance().getCurrentSession().getMediaSession().media.contentId:null}},Rt=class e{init(t){const a=this;a.pluginView||(a.pluginView={}),a.apiModel=t.apiModel,a.arteVpVersion=t.arteVpVersion,a.shouldDisplayShareButton=t.shouldDisplayShareButton,a.pluginsList=Ie.modes[t.mode].plugins;const s={lang:t.lang,renderingPlace:We(),jsonUrl:t.jsonUrl,env:t.env,videoProtocol:t.apiModel.getStreamsProtocol()};"teaser"===t.step&&(a.pluginsList.includes("keyboardControls")&&(a.pluginView.keyboardControls=new Mt({vendorPlayer:this.vendorPlayer,avpRef:t.avpRef,proxyFunctions:this.vendorPlayer.api,eventEmitter:this.vendorPlayer.events,showPlaylist:t.showPlaylist,isLive:a.apiModel.isLive(),displayMessageBox:t.displayMessageBox,onChangeVolume:t.onChangeVolume,onClickMute:t.onClickMute,onClickFullscreen:t.onClickFullscreen,onClickForward:t.onClickForward,onClickBackward:t.onClickBackward,isTouch:t.isTouch,mode:t.mode,displayControlsAndRefreshTimeout:t.displayControlsAndRefreshTimeout,playerId:t.playerId})),a.pluginsList.includes("club")&&!a.apiModel.isLive()&&(a.pluginView.club=new xt({apiModel:a.apiModel,lang:t.lang,dockButtonId:"club",playerRef:t.playerRef,eventEmitter:this.vendorPlayer.events,proxyFunctions:this.vendorPlayer.api,removeDockButton:t.removeDockButton,vendorPlayerSuffixId:this.vendorPlayer.getId(),setLastClickedElement:t.setLastClickedElement,displayOverlay:t.displayOverlay,hideOverlay:t.hideOverlay,vendorPlayer:this.vendorPlayer}))),"player"===t.step&&(a.pluginsList.includes("watchProgress")&&!a.apiModel.isLive()&&(a.pluginView.watchProgress=new Tt({apiModel:a.apiModel,vendorPlayer:this.vendorPlayer,eventEmitter:this.vendorPlayer.events,proxyFunctions:this.vendorPlayer.api,playerId:t.playerId})),a.pluginsList.includes("youbora")&&Ie.youbora&&(a.pluginView.youbora=new Pt({vendorPlayer:this.vendorPlayer,env:t.env,config:Ie.youbora,apiModel:a.apiModel,isLive:a.apiModel.isLive(),playerId:t.playerId})),a.pluginsList.includes("monitoring")&&(a.pluginView.monitoring=new At({eventEmitter:this.vendorPlayer.events,proxyFunctions:this.vendorPlayer.api,commonLogInfos:s})),a.pluginsList.includes("arte_stats")&&(a.pluginView.arte_stats=new It({apiModel:a.apiModel,playerRef:t.playerRef,eventEmitter:this.vendorPlayer.events})),(a.pluginsList.includes("vast")&&!t.isPlaylist&&a.apiModel.isPrerollEnabled()&&!t.shouldSkipAds&&!t.loop||t.vast)&&(a.pluginView.vast=new Ft({jsonUrl:t.jsonUrl,apiModel:a.apiModel,env:t.env,commonLogInfos:s,eventEmitter:this.vendorPlayer.events,vendorPlayerSuffixId:this.vendorPlayer.getId(),proxyFunctions:this.vendorPlayer.api,playerRef:t.playerRef,vendorPlayer:this.vendorPlayer,vast:t.vast,playerId:t.playerId})),a.pluginsList.includes("serverSideTracking")&&(a.pluginView.serverSideTracking=new wt({vendorPlayer:this.vendorPlayer,sendTracking:t.sendTracking,playerId:t.playerId,apiModel:a.apiModel,vastPluginLoaded:void 0!==a.pluginView.vast})),a.pluginsList.includes("nielsen")&&Ie.nielsen_stats&&"object"==typeof NOLBUNDLE&&(a.pluginView.nielsen=new St({apiModel:a.apiModel,playerUrl:e.getTechnicalPlayerUrl({lang:t.lang,jsonUrl:t.jsonUrl,slot:t.slot,tcStartFrom:t.tcStartFrom}),config:Ie.nielsen_stats?Ie.nielsen_stats:"",arteVpVersion:a.arteVpVersion,eventEmitter:this.vendorPlayer.events,proxyFunctions:this.vendorPlayer.api,env:t.env,playerId:t.playerId}),a.pluginView.nielsen.init()),a.pluginsList.includes("statsMaster")&&(a.pluginView.statsMaster=new Ye({apiModel:a.apiModel,isLive:a.apiModel.isLive(),noHitOnPlay:t.tcStartFrom,eventEmitter:this.vendorPlayer.events,proxyFunctions:this.vendorPlayer.api,vendorPlayerSuffixId:this.vendorPlayer.getId(),vendorPlayer:this.vendorPlayer})),a.pluginsList.includes("estat")&&"function"==typeof eStatTag&&(a.pluginView.estat=new Et({apiModel:a.apiModel,isLive:a.apiModel.isLive(),slot:a.apiModel.hasStream()?a.apiModel.getStreams()[0].slot:null,arteVpVersion:a.arteVpVersion,isEmbed:Ke(),playerRef:t.playerRef,eventEmitter:this.vendorPlayer.events,proxyFunctions:this.vendorPlayer.api,env:t.env,lang:t.lang,playerId:t.playerId})),i.g.window.Cypress||(a.pluginView.cast=new Lt({apiModel:a.apiModel,vendorPlayer:this.vendorPlayer,playerId:t.playerId,playlistItem:this.vendorPlayer.api.getPlaylistItem()})))}static getTechnicalPlayerUrl(e){return(i.g.location.protocol.indexOf("https")>-1?"https://":"http://")+i.g.location.host+i.g.location.pathname+(e.jsonUrl?"?json_url=".concat(encodeURIComponent(e.jsonUrl)):"")+(e.lang?"&lang=".concat(e.lang):"")+(e.tcStartFrom?"&tcStartFrom=".concat(e.tcStartFrom):"")+(e.slot?"&slot=".concat(e.slot):"")}};function Dt(e){e.setState({showControls:!0}),ge("showControls",!0,e.props.playerId)}function Ot(e){e.state.isChromeCasting||(e.setState({showControls:!1}),ge("showControls",!1,e.props.playerId))}function Nt(e){e.querySelector(".avp-icon-previous")&&e.querySelector(".avp-icon-previous").blur(),e.querySelector(".avp-icon-next")&&e.querySelector(".avp-icon-next").blur()}function jt(e){e.state.showControls||Dt(e),clearTimeout(i.g["arte_vp_showControls_".concat(e.props.vendorPlayerSuffixId)]),i.g["arte_vp_showControls_".concat(e.props.vendorPlayerSuffixId)]=setTimeout((()=>{e.playerRef.removeEventListener("touchmove",e.onAvpMouseMoveBindedRef),e.playerRef.removeEventListener("mousemove",e.onAvpMouseMoveBindedRef),e.playerRef.removeEventListener("mousemove",e.onAvpMouseMoveBindedRef),e.playerRef.addEventListener("touchmove",e.onAvpMouseMoveBindedRef,{passive:!0}),e.playerRef.addEventListener("mousemove",e.onAvpMouseMoveBindedRef),0===e.state.openedOverlayCount&&Ot(e)}),2e3)}function Bt(e){e.stopPropagation(),jt(this);const t=this.vendorPlayer.api.getState();if(this.vendorPlayer.api.getPosition&&"complete"!==t){const e=Math.min(this.vendorPlayer.api.getDuration(),this.vendorPlayer.api.getPosition()+10);this.vendorPlayer.api.seek(e),this.vendorPlayer.events.emit("arte_vp.click_forward",e);const{displayMessageBox:t}=this.props;t({content:s.ZP.t("settings__fast_forward"),autoHideTime:1e3})}}function zt(e){e.stopPropagation(),jt(this);const t=this.vendorPlayer.api.getState();if(this.vendorPlayer.api.getPosition&&"complete"!==t){const e=Math.max(0,this.vendorPlayer.api.getPosition()-10);this.vendorPlayer.api.seek(e),this.vendorPlayer.events.emit("arte_vp.click_backward",e);const{displayMessageBox:t}=this.props;t({content:s.ZP.t("settings__rewind"),autoHideTime:1e3})}}function Ut(e){e.stopPropagation(),this.playerRef.querySelector("video").webkitShowPlaybackTargetPicker(),i.g.ATInternet&&(new i.g.ATInternet.Tracker.Tag).click.send({elem:this,name:"Airplay",level2:"1",type:"action"})}function Vt(e){e.stopPropagation()}function Zt(e){const t=se("mute");jt(this),oe("volume",e.volume),ge("volume",e.volume,e.playerId),"click"!==e.source&&t||(oe("mute",!1),ge("mute",!1,e.playerId),this.vendorPlayer.api.setVolume(e.volume))}function Ht(e){e.stopPropagation(),jt(this);const t=ye("volume",e.playerId);if(ye("mute",e.playerId))return oe("mute",!1),oe("volume",t),ge("mute",!1,e.playerId),ge("volume",t,e.playerId),this.vendorPlayer.videojsInstance.trigger("mute",{state:!1}),this.vendorPlayer.api.setMute(!1),void this.vendorPlayer.api.setVolume(t);0===t?(oe("volume",10),ge("volume",10,e.playerId),this.vendorPlayer.api.setMute(!1),this.vendorPlayer.api.setVolume(10)):(oe("mute",!0),ge("mute",!0,e.playerId),this.vendorPlayer.videojsInstance.trigger("mute",{state:!0}),this.vendorPlayer.api.setMute(!0))}function qt(e,t){e.stopPropagation(),jt(this),ve(this.props.avpRef,t),i.g.ATInternet&&(new i.g.ATInternet.Tracker.Tag).click.send({elem:this,name:"Fullscreen",level2:"1",type:"action"})}function Wt(e,t){e&&e.stopPropagation();const i=this.playerRef.querySelector("video"),a="picture-in-picture"===i.webkitPresentationMode;i.webkitSetPresentationMode(a?"inline":"picture-in-picture"),i.addEventListener("leavepictureinpicture",(()=>{ge("isPictureInPictureEnabled",!1,t)}),{once:!0}),i.addEventListener("enterpictureinpicture",(()=>{ge("isPictureInPictureEnabled",!0,t)}),{once:!0})}function Gt(e,t){const i=ye("isAdCtaAvailable",t),a=ye("previewState",t);ye("isAd",t)&&i&&"hidden"===a||this.state.isSeeking||("display"===a?this.hidePreviewAndPlay():(new Date-this.clickHandlerTime<500?(clearTimeout(this.doubleClickTimeout),ve(this.props.avpRef,this.vendorPlayer)):"playing"!==this.vendorPlayer.api.getState()||this.state.isLive?this.doubleClickTimeout=setTimeout((()=>this.vendorPlayer.api.play()),250):this.doubleClickTimeout=setTimeout((()=>this.vendorPlayer.api.pause()),250),this.clickHandlerTime=new Date),e.preventDefault())}function Kt(e){e.preventDefault(),this.vendorPlayer.videojsInstance.ima.pauseAd()}function Xt(e,t,i=!1){i||this.reload({jsonUrl:t}),this.togglePlaylist(e),ge("clickHandlerTriggered",!1,this.playerId)}function Jt(){const e=this.props.vendorPlayer.api.getPosition();this.props.isLive||this.isUpdatingSeeker||this.setState({position:e})}function Qt(){this.setState({position:this.vendorPlayer.api.getDuration()})}function Yt(e){jt(this),e.callback&&e.callback(),"playing"!==ye("playerStatus",e.playerId)||this.state.isLive?this.vendorPlayer.api.play():this.vendorPlayer.api.pause()}function $t(e){if(e.message){let t=function(){return a.createElement("span",{dangerouslySetInnerHTML:{__html:pt.getTemplate({message:e.message})}})};this.props.displayOverlay({content:a.createElement(t,null),aspect:"opacity",isClosable:!1})}}function ei(e){e.stopPropagation(),this.setLastClickedElement(".avp-button--menu"),this.togglePlaylist(e)}function ti(e){e.stopPropagation();try{i.g.parent.location=this.apiModel.getParentUrl()}catch(e){console.error(e)}}function ii(e){if(!this.props.isLive){if(!this.mouseDown){const t=function(e){const t=e.currentTarget.getBoundingClientRect();return e.touches?e.touches[0].clientX-t.left:e.clientX-t.left}(e),i=Math.max(t/e.currentTarget.clientWidth,0);this.setState({rolloverPosition:i})}this.setState({toolTipClass:"avp-tooltip--open"}),this.updateTooltip()}}function ai(){this.setState({toolTipClass:""})}function si(e){Nt(this.avpRef.current),le(e.jsonUrl),rt.centerPlaylistItem(this.avpRef.current),this.reload(e)}function oi(e){Nt(this.avpRef.current),le(e.jsonUrl),rt.centerPlaylistItem(this.avpRef.current),this.reload(e)}function ni(e,t){const{avpRef:i}=this.props;ge("isTrailerVideo",!1,t),ge("hasNextItem",!1,t),Nt(i),le(this[e.event].getConfigUrl()),this.sendPrevNextItemEvent(e)}function ri(e){rt.centerPlaylistItem(this.avpRef.current),this.reload({jsonUrl:e})}function li(e){rt.centerPlaylistItem(this.avpRef.current),this.reload({jsonUrl:e})}function ci(){jt(this)}function di(){0===this.state.openedOverlayCount&&Ot(this)}function pi(){Dt(this)}function ui(e){const{openedOverlayCount:t}=this.state,{avpRef:i}=this.props;let a=Math.round(t)+e;a=a>=0?a:0,this.setState({openedOverlayCount:a}),a>0?i.classList.add("isOverlayOpen"):i.classList.remove("isOverlayOpen")}var hi=e=>{const t=e.apiModel.getRights(),i=t&&t.begin?new Date(t.begin):null,a=t&&t.end?new Date(t.end):null;if(!Ne.isLiveConfig(e.jsonUrl)){if(!t||a&&(0,F.Z)(a,new Date(e.serverTimeStamp)))return Promise.reject({type:"info",message:s.ZP.t("error__no_video_available"),key:"rights.expired"});if(i&&(0,A.Z)(i,new Date(e.serverTimeStamp+500)))return Promise.reject({message:null,key:"rights.future",extra:{dateFrom:i}})}return Promise.resolve()},_i=e=>{const{apiModel:t,jsonUrl:i}=e;return je({url:"https://www.arte.tv/artews/services/geolocation"}).then((e=>hi({serverTimeStamp:e.data.serverTimeStamp,apiModel:t,jsonUrl:i})),(()=>hi({serverTimeStamp:(new Date).getTime(),apiModel:t,jsonUrl:i})))};i.g.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(e,t){const a=t||i.g.window;for(let t=0;t<this.length;t+=1)e.call(a,this[t],t,this)});var mi=class extends a.Component{constructor(e){super(e),this.props=e,this.ctrlLeftRef=a.createRef()}render(){const{controlLeft:e,controlRight:t,timelineSlider:i,isLive:o,duration:n,mode:r,playerId:l,isAd:c,position:d}=this.props;let p=qe(d);const u=qe(n),h=Math.round(n-d);let _=5;return u&&(_=u.length,p.length<u.length&&(p="00:".concat(p))),a.createElement(a.Fragment,null,a.createElement("div",{className:"avp-timeline","data-testid":"ControlBar__timeline"},!o&&!c&&"light"!==r&&a.createElement("div",{className:"avp-timeline__elapsed",style:{minWidth:"".concat(_,"ch")},role:"timer","aria-live":"off","data-testid":"ControlBar__role"},p),o&&a.createElement("div",{className:"avp-label avp-label-live"},s.ZP.t("info__live_label")),"light"!==r&&i,!o&&!c&&"light"!==r&&a.createElement("div",{className:"avp-timeline__duration",style:{minWidth:"".concat(_,"ch")},"aria-label":s.ZP.t("arialabel__duration")},u)),a.createElement("div",{className:"avp-controls"},a.createElement("div",{className:"avp-controls-content avp-controls__left",ref:this.ctrlLeftRef},e),c&&!Number.isNaN(h)&&a.createElement("div",{className:"avp-ad-label"},s.ZP.t("preroll__waiting_message").replace("XX",h)),a.createElement("div",{className:"avp-controls-content avp-controls__right",onMouseEnter:()=>ge("controlRightLabelOpen",!0,l),onMouseLeave:()=>ge("controlRightLabelOpen",!1,l)},t)))}};mi.propTypes={controlLeft:l().object,controlRight:l().object,timelineSlider:l().object,isLive:l().bool,duration:l().number,mode:l().string,playerId:l().string,isAd:l().bool,position:l().number};var vi=$e(["mode","isAd"])(mi),gi=class extends a.Component{constructor(e){super(e),this.handleAdClick=this.handleAdClick.bind(this)}handleAdClick(){const{vendorPlayer:e,playerId:t}=this.props;ye("adClickCallback",t)(),e.api.pause()}render(){return a.createElement("div",{className:"avp-ad-cta",target:"_blank",onClick:this.handleAdClick,"aria-label":"Preroll"},"Preroll")}};gi.propTypes={vendorPlayer:l().object,playerId:l().string};var yi=gi,bi=class extends a.Component{constructor(e){super(e),this.props=e,this.ref=a.createRef()}componentDidMount(){const{isClosable:e}=this.props;e?document.querySelector(".avp-adsoverlay button:first-child").focus():this.ref.current.querySelector('[tabindex="0"]')&&this.ref.current.querySelector('[tabindex="0"]').focus()}componentDidUpdate(){this.ref.current&&this.ref.current.addEventListener("mousemove",(e=>{e.stopPropagation()}))}render(){const{hideOverlay:e,isClosable:t,reload:i,content:o,isFixed:r,contentStyles:l}=this.props;return a.createElement("div",{className:n()("avp-adsoverlay",r?"fixed":"")},a.createElement(h.aV,{isOpen:!0,zIndex:3,onClose:()=>{t&&(e(),i())},closeButtonAriaLabel:t?s.ZP.t("arialabel__close_button"):""},a.createElement("div",{className:"avp-adsoverlay__content",role:"document",style:l},o)))}};bi.propTypes={content:l().object,hideOverlay:l().func,isClosable:l().bool,reload:l().func,isFixed:l().bool,contentStyles:l().object},bi.defaultProps={isClosable:!0,contentStyles:{}};var fi=$e(["previewData","playerWidth"])(bi),ki=class extends a.Component{constructor(e){super(e),this.props=e}render(){const{isAutoNextVisible:e,children:t,className:i,id:s,role:o,alignLeft:r,noAlign:l,blackBackground:c}=this.props,d={};return c&&(d.backgroundColor="#000"),l||(r?(d.left=0,d.right="auto"):(d.right=0,d.left="auto")),a.createElement("div",{className:n()(e?"avp-card--isAutoNextVisible ":"","avp-overlay avp-card",i),id:s,role:o,style:d},t)}};ki.propTypes={isAutoNextVisible:l().bool,noAlign:l().bool,alignLeft:l().bool,className:l().string,children:l().object,id:l().string,role:l().string,blackBackground:l().bool},ki.defaultProps={alignLeft:!0,blackBackground:!1};var Ci=ki;function Pi(e,t,i,s,o,n,r,l){return a.createElement(Ci,{className:"avp-card--large",role:o,id:n,alignLeft:!1!==r,noAlign:l,blackBackground:!0},a.createElement(a.Fragment,null,a.createElement("img",{className:"avp-card__thumb",alt:e,src:t,width:"170",height:"123"}),a.createElement("div",{className:"avp-card__content"},a.createElement("p",{className:"avp-card__text"},i),a.createElement("div",{className:"avp-card__title"},e),s&&a.createElement("p",{className:"avp-card__text"},s))))}var Ei=class extends a.Component{constructor(e){super(e),this.props=e}render(){const{isPlaylist:e,isIllico:t,isLive:i,onClickPlay:o,isTouch:n,playerStatus:r,onClickIllico:l,onClickPlaylist:c,apiPlaylistModel:d,nextItem:p,previousItem:u,mode:h,title:_,playerId:m,lang:v,apiModel:g}=this.props,y="playing"===r;let b,f,k,C,P={name:"Pause",className:"avp-icon-pause",tabIndex:0,title:s.ZP.t("arialabel__pause_button"),card:a.createElement(Ci,null,a.createElement("div",{className:"avp-card__title"},s.ZP.t("arialabel__pause_button"))),ariaLabel:s.ZP.t("arialabel__pause_button_with_title",{program_title:_})};if(y||(P={name:"Play",className:"avp-icon-playback",title:s.ZP.t("arialabel__play_button"),card:a.createElement(Ci,null,a.createElement("div",{className:"avp-card__title"},s.ZP.t("arialabel__play_button"))),ariaLabel:s.ZP.t("arialabel__play_button_with_title",{program_title:_})}),P.onClick=e=>o({playerId:m,callback:()=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()}}),de.desktop()||"default"!==h&&"trailer"!==h)if(d){const e=d.getPlaylistIndexFromUrl(ye("providerId",m)),i=d.getPlaylistItems().length;if(i>0&&d.getPlaylistLiveItem()&&(b=Xe(v),f=g.getReplayUrl()),C=e>0,C){const a=e-1;let o=s.ZP.t("playlist__previous_video");t&&(o+=" ".concat(a+1,"/").concat(i));const n=new Ne(d.getPlaylistItems()[a]);this.previousCard=()=>Pi(n.get("title"),n.get("images")[0].url,o,null,"tooltip","previous_item_card",!1,!0)}const a=e+1;if(k=a<i,k){let e=s.ZP.t("playlist__next_video");t&&(e+=" ".concat(a+1,"/").concat(i));const o=new Ne(d.getPlaylistItems()[a]);ge("hasNextItem",!0,m),this.nextCard=()=>Pi(o.get("title"),o.get("images")[0].url,e,null,"tooltip","next_item_card",!1,!0)}}else p&&(k=!0,this.nextCard=()=>Pi(p.get("title"),p.get("images")[0].url,s.ZP.t("playlist__next_video"),p.get("subtitle"),"tooltip","next_item_card",!1,!0)),u&&(C=!0,this.previousCard=()=>Pi(u.get("title"),u.get("images")[0].url,s.ZP.t("playlist__previous_video"),u.get("subtitle"),"tooltip","previous_item_card",!1,!0));else this.previousCard=()=>null,this.nextCard=()=>null;const{onClickBackToReplay:E,onClickBackToLive:S,onClickForward:I,onClickBackward:w,streamTester:x,isAd:T}=this.props;return a.createElement(a.Fragment,null,t&&i&&f&&!T&&"light"!==h&&a.createElement(at,{tabIndex:0,name:"BackStart",className:"avp-icon-replay",card:a.createElement(Ci,null,a.createElement("div",{className:"avp-card__title"},s.ZP.t("playlist__back_to_replay"))),title:s.ZP.t("playlist__back_to_replay"),onClick:e=>{e.stopPropagation(),E(f)}}),t&&!i&&!x&&!T&&"light"!==h&&a.createElement(at,{tabIndex:0,name:"Live",className:"avp-icon-live",card:a.createElement(Ci,null,a.createElement("div",{className:"avp-card__title"},s.ZP.t("playlist__back_to_live"))),title:s.ZP.t("playlist__back_to_live"),onClick:e=>{e.stopPropagation(),S(b)}}),e&&!t&&!n&&"trailer"!==h&&"light"!==h&&!T&&a.createElement(at,{name:"Playlist",className:"avp-icon-playlist",title:s.ZP.t("playlist__program_of_the_day"),onClick:c}),"light"!==h&&!i&&!T&&a.createElement(at,{name:"Rewind",className:"avp-icon-rewind",card:n?null:a.createElement(Ci,null,a.createElement("div",{className:"avp-card__title"},s.ZP.t("settings__rewind"))),title:s.ZP.t("settings__rewind"),onClick:w}),(!i||!y)&&a.createElement(at,q({},P)),"light"!==h&&!i&&!T&&a.createElement(at,{name:"Forward",className:"avp-icon-forward",card:n?null:a.createElement(Ci,null,a.createElement("div",{className:"avp-card__title"},s.ZP.t("settings__fast_forward"))),title:s.ZP.t("settings__fast_forward"),onClick:I}),t&&!n&&!x&&"light"!==h&&a.createElement(at,{name:"Illico",className:"avp-icon-illico",card:a.createElement(Ci,null,a.createElement("div",{className:"avp-card__title"},s.ZP.t("arialabel__show_programs"))),title:s.ZP.t("arialabel__show_programs"),onClick:l}))}};Ei.propTypes={isPlaylist:l().bool,isIllico:l().bool,isLive:l().bool,onClickPlay:l().func,isTouch:l().bool,onClickIllico:l().func,onClickPlaylist:l().func,onClickPrevious:l().func,onClickNext:l().func,onClickBackToReplay:l().func,onClickBackToLive:l().func,onClickForward:l().func,onClickBackward:l().func,jsonUrl:l().string,getPlaylistItems:l().func,onClickLive:l().func,reload:l().func,apiPlaylistModel:l().object,nextItem:l().object,previousItem:l().object,isAd:l().bool,mode:l().string,title:l().string,playerStatus:l().string,streamTester:l().oneOfType([l().string,l().bool]),playerId:l().string,lang:l().string,apiModel:l().object};var Si=$e(["playerStatus","mode","jsonUrl","responsiveState","isIllico","isPlaylist","isTouch","streamTester","isAd"])(Ei);function Ii(e){const{style:t,toolTipClass:i,rolloverPosition:s,duration:o}=e,n=s*o,r=qe(n),l=qe(o);return(()=>{const{chapterIndex:c,chapterCollection:d,sprite:p}=e;return null!==c?a.createElement("div",{style:t,className:"".concat(i," avp-tooltip avp-overlay ").concat(null!==c?"avp-tooltip--chapter":"")},a.createElement("div",{className:"avp-tooltip__content"},null!==c&&a.createElement(Ci,{className:"avp-card--large"},a.createElement(a.Fragment,null,a.createElement("div",{className:"avp-tooltip__thumbnail"},a.createElement("img",{alt:"",src:d[c].image,style:{transform:"translateX(-".concat(170*c,"px)")}})),a.createElement("div",{className:"avp-card__content"},a.createElement("div",{className:"avp-card__title"},d[c].title),a.createElement("p",{className:"avp-card__text"},qe(s*o))))),null===c&&(n<o?r:l))):d.length?a.createElement("div",{style:{display:"none"},className:"".concat(i," avp-tooltip avp-overlay")},a.createElement("div",{className:"avp-tooltip__content"},n<o?r:l)):a.createElement("div",{style:t,className:"".concat(i," avp-tooltip avp-overlay ").concat(p?"sprite":"")},a.createElement("div",{className:"avp-tooltip__content"},p&&a.createElement(Ci,{className:"avp-card--large"},a.createElement("div",{className:"avp-tooltip__thumbnail",style:p.css},null!==c&&a.createElement("img",{alt:"",src:d[c].image,style:{transform:"translateX(-".concat(170*c,"px)")}}))),n<o?r:l))})()}Ii.propTypes={style:l().object,rolloverPosition:l().number,toolTipClass:l().string,duration:l().number,chapterIndex:l().number,chapterCollection:l().array,sprite:l().object},Ii.defaultProps={rolloverPosition:0,chapterIndex:null,toolTipClass:""};var wi=Ii,xi=class e extends a.Component{constructor(e){super(e),this.props=e;const{proxyFunctions:t,onTimeEventHandler:i,eventEmitter:s}=this.props;this.state={position:t.getPosition?t.getPosition():0},this.temporaryPosition=t.getPosition?t.getPosition():0,this.timelineSlider=a.createRef(),this.onTimeEventHandlerRef=i.bind(this),this.onMouseMoveHoverCatcher=ii.bind(this),this.onMouseLeaveHoverCatcher=ai.bind(this),this.isUpdatingSeeker=!1,s.on("play",(()=>{this.setState({toolTipClass:null})})),this.onBeforeChange=this.onBeforeChange.bind(this),this.onChange=this.onChange.bind(this),this.onAfterChange=this.onAfterChange.bind(this),s.on("arte_vp.click_forward",(e=>{this.temporaryPosition=e,this.setState({position:e})})),s.on("arte_vp.click_backward",(e=>{this.temporaryPosition=e,this.setState({position:e})})),this.mouseDown=!1,this.shouldTriggerSeek=!1,document.addEventListener("mousedown",(()=>{this.mouseDown=!0}),!0),document.addEventListener("mouseup",(()=>{this.mouseDown=!1}),!0),document.addEventListener("pointerdown",(()=>{this.mouseDown=!0}),!0),document.addEventListener("pointerup",(()=>{this.mouseDown=!1}),!0)}componentDidUpdate(e,t){const{rolloverPosition:i}=this.state,{vendorPlayer:a,duration:s,vttData:o}=this.props;if(a.events.removeListener("time",this.onTimeEventHandlerRef),a.events.on("time",this.onTimeEventHandlerRef),e.duration!==s&&s>0&&this.setState({position:0}),!Number.isNaN(i)&&o&&o.length&&t.rolloverPosition!==i){const e=o.map((e=>e.start<=i*s)).lastIndexOf(!0);this.setState({currentSprite:o[e]})}}componentWillUnmount(){const{vendorPlayer:e}=this.props;e.events.removeListener("time",this.onTimeEventHandlerRef)}onBeforeChange(){this.isUpdatingSeeker=!0}onChange(e){const t=e/100,{duration:i,isLive:a}=this.props;this.mouseDown?(this.setState({rolloverPosition:t,position:t*i}),this.setState({toolTipClass:"avp-tooltip--open"}),a||this.updateTooltip(),this.temporaryPosition=t*i,this.shouldTriggerSeek=!0):this.setState({position:t*i})}onAfterChange(){if(this.shouldTriggerSeek){const{proxyFunctions:e,duration:t}=this.props,i=this.temporaryPosition,a=Math.min(t-1,i);e.seek(a),this.shouldTriggerSeek=!1}this.isUpdatingSeeker=!1}getChapterMarks(){const{chapterCollection:e,duration:t}=this.props,i={};let a=0;for(let s=0;s<e.length;s+=1)a=e[s].startTime/t*100,Number.isNaN(a)||(i[a]="");return i}static getElementOffset(e){const t=e.currentTarget.getBoundingClientRect();return e.touches?e.touches[0].clientX-t.left:e.clientX-t.left}static getCurrentChapterIndex(e,t){let i=0,a=null;return t.forEach(((t,s)=>{const o=t.startTime;i<e&&e>o&&(a=s),i=o})),null==a&&e>t[t.length-1].startTime&&(a=t.length-1),a}updateTooltip(){if(!this.toolTip){const{playerRef:e}=this.props;this.toolTip=e.querySelector(".avp-timeline .avp-tooltip")}const{chapterCollection:t,duration:i,vttData:a}=this.props,{chapterIndex:s,rolloverPosition:o}=this.state,n=window.innerWidth,r=!t.length&&a&&n>767;if(r||null!==s&&t.length>0){const e=this.timelineSlider.current.sliderRef.getBoundingClientRect(),t=this.timelineSlider.current.sliderRef.offsetWidth*o,i=r?"scale(0.62) translateY(55px)":"";if(t+this.toolTip.offsetWidth+e.left>e.right+(r?230:170)){const e=r?"".concat(i," translateX(170px)"):"none";this.setState({toolTipStyle:{left:"auto",right:"0",transform:e}})}else if(t+e.left<e.left+(r?25:170)){const e=r?"".concat(i," translateX(-130px)"):"none";this.setState({toolTipStyle:{left:"0",right:"auto",transform:e}})}else{const e=r?"".concat(i," translateX(-170px)"):"translateX(-170px)";this.setState({toolTipStyle:{left:"".concat(100*o,"%"),right:"auto",transform:e}})}}else this.setState({toolTipStyle:{left:"".concat(100*o,"%"),right:"auto"}});t.length>0&&this.setState({chapterIndex:e.getCurrentChapterIndex(o*i,t)})}render(){const{chapterCollection:e,duration:t,isLive:i,vttData:o,vendorPlayer:n}=this.props,{position:r,rolloverPosition:l,toolTipClass:c,chapterIndex:d,toolTipStyle:p,currentSprite:u}=this.state;let h=0,_=0,m={};return i||(t>0&&(_=r/t*100),r>0&&(h=100*r/t),m={role:"slider",tabIndex:0,"aria-label":s.ZP.t("arialabel__progress_slider"),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":h,"aria-valuetext":"".concat(qe(r)," ").concat(s.ZP.t("arialabel__progress_text")," ").concat(qe(t))}),a.createElement("div",{onMouseOver:this.onMouseMoveHoverCatcher,onMouseLeave:this.onMouseLeaveHoverCatcher,onMouseMove:this.onMouseMoveHoverCatcher,onFocus:this.onMouseMoveHoverCatcher,tabIndex:m.tabIndex,className:"avp-timeline-slider__container"},a.createElement(M.ZP,{disabled:i||n.isAdPlaying(),step:.01,marks:this.getChapterMarks(),ref:this.timelineSlider,defaultValue:_,value:_,onBeforeChange:this.onBeforeChange,onChange:this.onChange,onAfterChange:this.onAfterChange}),a.createElement(wi,{rolloverPosition:l,duration:t,toolTipClass:c,chapterCollection:e,chapterIndex:d,style:p,isSprite:!(!o||!o.length),sprite:u}))}};xi.propTypes={chapterCollection:l().array,duration:l().number,onTimeEventHandler:l().func,vendorPlayer:l().object,proxyFunctions:l().object,playerRef:l().object,eventEmitter:l().object,isLive:l().bool,vttData:l().array},xi.defaultProps={duration:0,chapterCollection:[]};var Ti=xi,Ai=class extends a.Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}componentDidMount(){document.addEventListener("click",this.handleClick,!0)}componentWillUnmount(){document.removeEventListener("click",this.handleClick,!0)}handleClick(e){const{onClickAway:t}=this.props,i=L.findDOMNode(this);i&&i.contains(e.target)||t(e)}render(){const{children:e}=this.props;return a.createElement(a.Fragment,null,e)}};Ai.propTypes={children:l().oneOfType([l().object,l().bool]),onClickAway:l().func};var Fi=class e extends a.Component{static switchItemState(e,t){return e.map((e=>(t===e.id&&(e.selected=!e.selected),e))),e}constructor(e){super(e),this.props=e,this.onClickLi=this.onClickLi.bind(this),this.onSelectWrapperClick=this.onSelectWrapperClick.bind(this),this.onSelectClick=this.onSelectClick.bind(this),this.renderList=this.renderList.bind(this),this.firstItemRef=(0,a.createRef)(),this.state={isOpen:!1}}componentDidMount(){this.firstItemRef&&this.firstItemRef.current&&this.firstItemRef.current.focus()}onClickLi(t,i){const{multi:a,items:s,isSelect:o}=this.props;t.stopPropagation();let n=[];a?(n=s.slice(0),e.switchItemState(s,t.currentTarget.id)):(n=e.getResetedSelectedItems(s).slice(0),e.setItemAsSelected(s,t.currentTarget.id)),i(n),o&&!a&&this.setState({isOpen:!1})}onSelectWrapperClick(e){const{isSelect:t}=this.props,{isOpen:i}=this.state;!i&&t&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())}onSelectClick(){const{isOpen:e}=this.state;this.setState({isOpen:!e})}static setItemAsSelected(e,t){return e.map((e=>(t===e.id&&(e.selected=!0),e))),e}static getResetedSelectedItems(e){return e.map((e=>(e.selected=!1,e))),e}renderList(){const{items:e,isSelect:t}=this.props;return a.createElement("ul",{className:t?"avp-select-menu":"avp-menu"},e.map((e=>{const t=e.selected?{ref:this.firstItemRef}:null;return a.createElement("li",W(q({},t),{tabIndex:"0",role:"button","aria-label":e.label,"aria-pressed":e.selected?"true":"false",className:e.selected?"is-selected":"",key:e.id,id:e.id,onClick:t=>{this.onClickLi(t,e.onClick)}}),e.selected&&a.createElement(h.JO,{icon:"Checked",size:"S"}),e.title)})))}render(){const{title:e,items:t,isSelect:i}=this.props,{isOpen:s}=this.state,o=t.find((e=>e.selected));return a.createElement(Ai,{onClickAway:i?()=>this.setState({isOpen:!1}):()=>{}},a.createElement(a.Fragment,null,a.createElement("div",{className:i?"avp-select ".concat(s?"open":""):"avp-column",role:"listitem",onClick:this.onSelectWrapperClick},a.createElement("div",{className:"avp-column__title"},e),i&&a.createElement("div",{className:"avp-select__button",onClick:this.onSelectClick},o?o.title:""),!i&&this.renderList()),i&&this.renderList()))}};function Mi(e,t){const i=e=>{ge("textTracksFontSize",e,t),function(e){ee("arte_vp.captionsFontSize",e)}(e)};return[{title:s.ZP.t("settings__captions_very-small"),label:s.ZP.t("settings__captions_very-small"),selected:"XS"===e,id:"textTracksFontSizeXS",onClick:()=>i("XS")},{title:s.ZP.t("settings__captions_small"),label:s.ZP.t("settings__captions_small"),selected:"S"===e,id:"textTracksFontSizeS",onClick:()=>i("S")},{title:s.ZP.t("settings__captions_normal"),label:s.ZP.t("settings__captions_normal"),selected:"M"===e,id:"textTracksFontSizeM",onClick:()=>i("M")},{title:s.ZP.t("settings__captions_large"),label:s.ZP.t("settings__captions_large"),selected:"L"===e,id:"textTracksFontSizeL",onClick:()=>i("L")},{title:s.ZP.t("settings__captions_very-large"),label:s.ZP.t("settings__captions_very-large"),selected:"XL"===e,id:"textTracksFontSizeXL",onClick:()=>i("XL")}]}Fi.propTypes={title:l().string,items:l().array,multi:l().bool,isSelect:l().bool};var Li=class extends a.Component{constructor(e){super(e),this.state={displayTextTracksSizeScreen:!1,audioSourcesArray:[],textTrackList:[]}}componentDidMount(){this.getAudioTracksList(),this.getTextTracksList()}onClickAudio(e,t){const{proxyFunctions:i}=this.props,a=i.getAvailableAudioTracks();for(let i=0;i<a.length;i+=1){const s=a[i];s.language===e&&s.kind===t?s.enabled=!0:s.enabled=!1}te("".concat(e,"-").concat(t)),this.getAudioTracksList()}getTextTracksList(){const{proxyFunctions:e,playerId:t,eventEmitter:i}=this.props,a=this,o=e.getAvailableTextTracks(),n=[],r=e.getActiveTextTrack({withForced:!1});if(n.push({id:"none",title:s.ZP.t("settings__subtitle-none-label"),label:s.ZP.t("settings__subtitle-none-label"),selected:!1===r,onClick:t=>{ie("none"),e.disableAllTextTracks(),i.emit("changetexttrack",null),e.activateForcedTextTracks(),a.setState({textTrackList:t})}}),o.length){for(let t=0;t<o.length;t+=1){const i=o[t];if(!e.isForcedTextTrack(i)){const t=e.getTextTrackKind(i);n.push({id:i.label,title:i.label,label:i.label,kind:t,selected:"showing"===i.mode,onClick:s=>{ie("".concat(i.language,"-").concat(t)),e.disableAllTextTracks(),i.mode="showing",this.setState({textTrackList:s}),de.isSafariDesktop()&&"boolean"==typeof a.playerRef.querySelector("video").webkitClosedCaptionsVisible&&!1===a.playerRef.querySelector("video").webkitClosedCaptionsVisible&&(a.playerRef.querySelector("video").webkitClosedCaptionsVisible=!0)}})}}n.length>0&&ge("textTracksFontSizeAvailable",!0,t),this.setState({textTrackList:n})}else this.setState({textTrackList:n})}getAudioTracksList(){const{proxyFunctions:e}=this.props,t=e.getAvailableAudioTracks(),i=[];for(let e=0;e<t.length;e+=1){const a=t[e];i.push({id:"".concat(a.language,"_").concat(a.kind),title:a.label,label:a.label,selected:a.enabled,onClick:()=>{this.onClickAudio(a.language,a.kind)}})}this.setState({audioSourcesArray:i})}render(){const{isChromeCasting:e,textTracksFontSizeAvailable:t,textTracksFontSize:i,playerId:o,responsiveState:n}=this.props,{audioSourcesArray:r,displayTextTracksSizeScreen:l,textTrackList:c}=this.state;return a.createElement("div",{className:"avp-language-overlay avp-controls-menu-container"},l&&t&&!e?a.createElement("div",{className:"avp-controls-menu",style:{flexDirection:"column"}},a.createElement("div",{className:"avp-row"},a.createElement(Fi,{id:"captionSize",title:s.ZP.t("settings__subtitles-size-title"),items:Mi(i,o),multi:!1,isSelect:"large"!==n})),a.createElement("div",{className:"avp-text__button",onClick:()=>this.setState({displayTextTracksSizeScreen:!1})},"<",a.createElement("span",null,s.ZP.t("label__back")))):a.createElement("div",{className:"avp-controls-menu"},r&&r.length>1&&a.createElement("div",{className:"avp-row"},a.createElement(Fi,{id:"audio",title:s.ZP.t("settings__audio_title"),items:r,multi:!1,isSelect:"large"!==n})),c&&c.length>1&&a.createElement("div",{className:r&&r.length>1?"avp-controls-menu__bordered":""},a.createElement("div",{className:"avp-row"},a.createElement(Fi,{id:"caption",title:s.ZP.t("settings__subtitle_menu_title"),items:c,multi:!1,isSelect:"large"!==n})),a.createElement("div",{className:"avp-text__button",onClick:()=>this.setState({displayTextTracksSizeScreen:!0})},a.createElement("span",null,s.ZP.t("settings__subtitle-settings-title"))))))}};Li.propTypes={proxyFunctions:l().object,isChromeCasting:l().bool,playerId:l().string,textTracksFontSize:l().string,textTracksFontSizeAvailable:l().bool,responsiveState:l().string,eventEmitter:l().object};var Ri=$e(["textTracksFontSize","textTracksFontSizeAvailable","responsiveState"])(Li),Di=class extends a.Component{constructor(e){super(e),this.props=e,this.onClickLanguage=this.onClickLanguage.bind(this)}onClickLanguage(e){const{playerRef:t,displayAdsOverlay:i,proxyFunctions:s,eventEmitter:o,isChromeCasting:n,playerId:r,responsiveState:l}=this.props;e&&e.stopPropagation(),t.querySelector(".avp-icon-version").focus(),i({content:a.createElement(Ri,{proxyFunctions:s,eventEmitter:o,isChromeCasting:n,playerId:r}),shouldStop:!n,isClosable:!0,isFixed:"large"!==l})}render(){const{audioTracks:e,proxyFunctions:t}=this.props,i=t.getAvailableTextTracks();let o=i.length>=1;return 1===i.length&&t.isForcedTextTrack(i[0])&&(o=!1),e&&e.length>1||o?a.createElement("div",{className:"avp-language"},a.createElement(at,{name:"Language",className:n()("avp-icon-version"),title:s.ZP.t("arialabel__version_button"),onClick:this.onClickLanguage,card:a.createElement(Ci,null,a.createElement("div",{className:"avp-card__title"},s.ZP.t("settings__version_menu_title")))})):null}};Di.propTypes={audioTracks:l().object,isChromeCasting:l().bool,playerId:l().string,proxyFunctions:l().object,playerRef:l().object,displayAdsOverlay:l().func,responsiveState:l().string,eventEmitter:l().object};var Oi=$e(["responsiveState"])(Di),Ni=class extends a.Component{constructor(e){super(e),this.props=e,this.state={isOpen:!1,playbackSpeedOptions:[{index:0,id:"playback_speed_50",title:"".concat(s.ZP.t("settings__playback_speed_0.5")),label:"".concat(s.ZP.t("arialabel__quality_select")," ").concat(s.ZP.t("settings__playback_speed_0.5")),selected:!1,onClick:()=>{this.onClickPlaybackSpeed("playback_speed_50")}},{index:1,id:"playback_speed_75",title:"".concat(s.ZP.t("settings__playback_speed_0.75")),label:"".concat(s.ZP.t("arialabel__quality_select")," ").concat(s.ZP.t("settings__playback_speed_0.75")),selected:!1,onClick:()=>{this.onClickPlaybackSpeed("playback_speed_75")}},{index:2,id:"playback_speed_100",title:"".concat(s.ZP.t("settings__playback_speed_1")),label:"".concat(s.ZP.t("arialabel__quality_select")," ").concat(s.ZP.t("settings__playback_speed_1")),selected:!0,onClick:()=>{this.onClickPlaybackSpeed("playback_speed_100")}},{index:3,id:"playback_speed_125",title:"".concat(s.ZP.t("settings__playback_speed_1.25")),label:"".concat(s.ZP.t("arialabel__quality_select")," ").concat(s.ZP.t("settings__playback_speed_1.25")),selected:!1,onClick:()=>{this.onClickPlaybackSpeed("playback_speed_125")}},{index:4,id:"playback_speed_150",title:"".concat(s.ZP.t("settings__playback_speed_1.5")),label:"".concat(s.ZP.t("arialabel__quality_select")," ").concat(s.ZP.t("settings__playback_speed_1.5")),selected:!1,onClick:()=>{this.onClickPlaybackSpeed("playback_speed_150")}}]},this.onClickSettings=this.onClickSettings.bind(this),this.onClickPlaybackSpeed=this.onClickPlaybackSpeed.bind(this),this.onClickAway=this.onClickAway.bind(this),this.getCommonScreenComponent=this.getCommonScreenComponent.bind(this),this.settingsRef=a.createRef()}onClickSettings(e){const{playerRef:t,updateOpenedOverlaysCount:i,playerWidth:a,displayOverlay:s}=this.props;e&&e.stopPropagation();const{isOpen:o}=this.state;this.setState({isOpen:!o}),i(o?-1:1),t.querySelector(".avp-icon-settings").focus(),a<768&&s({content:this.getCommonScreenComponent(!0),aspect:"opaque",isClosable:!0,shouldStop:!1,bluredPreview:!1,align:"top",isFixed:!0,reload:()=>{this.setState({isOpen:!1})}})}onClickPlaybackSpeed(e){const{proxyFunctions:t}=this.props,{playbackSpeedOptions:i}=this.state;switch(e){case"playback_speed_50":t.setPlaybackRate(.5);break;case"playback_speed_75":t.setPlaybackRate(.75);break;case"playback_speed_100":default:t.setPlaybackRate(1);break;case"playback_speed_125":t.setPlaybackRate(1.25);break;case"playback_speed_150":t.setPlaybackRate(1.5)}const a=[...i];for(let t=0;t<a.length;t+=1)a[t].selected=!1,a[t].id===e&&(a[t].selected=!0);this.setState({playbackSpeedOptions:a})}onClickAway(e){const{isOpen:t}=this.state;t&&!this.settingsRef.current.contains(e.target)&&this.onClickSettings(e)}getCommonScreenComponent(e=!1){const{qualitySources:t}=this.props,{playbackSpeedOptions:i}=this.state;return a.createElement("div",{className:"avp-controls-menu"},a.createElement("div",{className:"avp-row"},a.createElement(Fi,{id:"playback-speed",title:s.ZP.t("settings__playback_speed"),items:i,multi:!1,isSelect:e})),t.length>1&&Ge()&&a.createElement("div",{className:"avp-row"},a.createElement(Fi,{id:"quality",title:s.ZP.t("settings__quality_menu_title"),items:t.sort(((e,t)=>t.height-e.height)),multi:!1,isSelect:e})))}render(){const{playerWidth:e,qualitySources:t}=this.props,{isOpen:i}=this.state;return a.createElement(Ai,{onClickAway:this.onClickAway},t.length>1?a.createElement(h.u,{isOpen:!(e<768)&&i,onClose:this.onClickSettings,isClosable:!0,align:"TopLeft",zIndex:2,content:a.createElement("div",{className:"avp-controls-group ".concat(e<768?"":"row"),ref:this.settingsRef},this.getCommonScreenComponent())},a.createElement("div",{className:"avp-settings"},a.createElement(at,{name:"Settings",className:n()("avp-icon-settings"),title:s.ZP.t("arialabel__settings_button"),onClick:e=>{this.onClickSettings(e)},expanded:i?"true":"false",card:a.createElement(Ci,{alignLeft:!1},a.createElement("div",{className:"avp-card__title"},s.ZP.t("arialabel__settings_button")))}))):null)}};Ni.propTypes={qualitySources:l().array,playerRef:l().object,updateOpenedOverlaysCount:l().func,proxyFunctions:l().object,playerWidth:l().number,displayOverlay:l().func};var ji=$e(["qualitySources","playerWidth"])(Ni),Bi=class extends a.Component{constructor(e){super(e),this.props=e,this.state={inputFocused:!1},this.handleFocus=this.handleFocus.bind(this)}handleFocus(){this.setState({inputFocused:!0});const e=document.activeElement,t=()=>{const{showControls:i,playerStatus:a}=this.props;document.activeElement!==e||!i&&"playing"===a?this.setState({inputFocused:!1}):setTimeout(t,800)};setTimeout(t,800)}render(){const{onChangeVolume:e,onClickMute:t,onClickVolume:i,mute:o,volume:n,playerId:r}=this.props,{inputFocused:l}=this.state;return a.createElement("div",{className:"avp-volume",onMouseEnter:()=>ge("isVolumeOpen",!0,r),onMouseLeave:()=>ge("isVolumeOpen",!1,r)},a.createElement(at,{name:"".concat(o||0===n?"Mute":"Sound"),className:"avp-icon-volume",title:"".concat(o||0===n?s.ZP.t("arialabel__volume_button_on"):s.ZP.t("arialabel__volume_button_off")),onClick:e=>{e.playerId=r,t(e)}}),a.createElement("div",{className:l?"avp-overlay visible":"avp-overlay"},a.createElement("input",{className:"avp-slider avp-volume__slider",type:"range",onFocus:this.handleFocus,onChange:t=>e({volume:parseInt(t.target.value,10),source:"click",playerId:r}),onClick:i,value:n,"aria-valuetext":"".concat(n,"% ").concat(s.ZP.t("arialabel__volume_slider_text")),min:0,max:100,step:1,"aria-label":s.ZP.t("arialabel__volume_slider")})))}};Bi.propTypes={onChangeVolume:l().func.isRequired,onClickVolume:l().func.isRequired,onClickMute:l().func.isRequired,volume:l().number,mute:l().bool,showControls:l().bool,playerStatus:l().string,playerId:l().string};var zi=$e(["volume","mute","showControls","playerStatus"])(Bi);function Ui(e){const{onClickAirPlay:t}=e;return a.createElement(at,{name:"Airplay",className:"avp-icon-airplay",title:s.ZP.t("arialabel__airplay_button"),onClick:t,card:a.createElement(Ci,null,a.createElement("div",{className:"avp-card__title"},s.ZP.t("arialabel__airplay_button")))})}Ui.propTypes={onClickAirPlay:l().func};var Vi=Ui,Zi=class extends a.Component{constructor(e){super(e),this.castRef=a.createRef(),this.castClicked=this.castClicked.bind(this)}castClicked(e){e.stopPropagation(),i.g.ATInternet&&(new i.g.ATInternet.Tracker.Tag).click.send({elem:this,name:"Chromecast",level2:"1",type:"action"})}render(){return a.createElement("div",{ref:this.castRef,onClick:this.castClicked,className:"avp-icon-cast avp-icon"},a.createElement("google-cast-launcher",null),a.createElement(Ci,null,a.createElement("div",{className:"avp-card__title"},s.ZP.t("arialabel__cast_button"))))}},Hi=class extends a.Component{constructor(e){super(e),this.props=e}render(){const{onClickFullScreen:e,slot:t,onChangeVolume:i,onClickVolume:o,onClickMute:n,onClickAirPlay:r,isTouch:l,eventEmitter:c,proxyFunctions:d,playerRef:p,isPipDevice:u,isAirPlayAvailable:h,onClickPicturePicture:_,updateOpenedOverlaysCount:m,isCastAvailable:v,mode:g,apiPlaylistModel:y,isIllico:b,nextItem:f,previousItem:k,onClickPrevious:C,onClickNext:P,isEmbed:E,responsiveState:S,isLive:I,isChromeCasting:w,streamTester:x,playerId:T,displayOverlay:A,audioTracks:F,isAd:M,vendorPlayer:L,displayAdsOverlay:R}=this.props;let D,O;const N="large"===S&&!l;if(de.desktop()||"default"!==g&&"trailer"!==g)if(y){const e=y.getPlaylistIndexFromUrl(ye("providerId",T)),t=y.getPlaylistItems().length;if(O=e>0,O){const i=e-1;let a=s.ZP.t("playlist__previous_video");b&&(a+=" ".concat(i+1,"/").concat(t));const o=new Ne(y.getPlaylistItems()[i]);this.previousCard=null,N&&(this.previousCard=Pi(o.get("title"),o.get("images")[0].url,a,null,"tooltip","previous_item_card",!1,!1))}const i=e+1;if(D=i<t,D){let e=s.ZP.t("playlist__next_video");b&&(e+=" ".concat(i+1,"/").concat(t));const a=new Ne(y.getPlaylistItems()[i]);this.nextCard=null,N&&(ge("hasNextItem",!0,T),this.nextCard=Pi(a.get("title"),a.get("images")[0].url,e,null,"tooltip","next_item_card",!1,!1))}}else f&&(D=!0,this.nextCard=null,N&&(this.nextCard=Pi(f.get("title"),f.get("images")[0].url,s.ZP.t("playlist__next_video"),f.get("subtitle"),"tooltip","next_item_card",!1,!1))),k&&(O=!0,this.previousCard=null,N&&(this.previousCard=Pi(k.get("title"),k.get("images")[0].url,s.ZP.t("playlist__previous_video"),k.get("subtitle"),"tooltip","previous_item_card",!1,!1)));else this.previousCard=null,this.nextCard=null;return a.createElement(a.Fragment,null,O&&!E&&"trailer"!==g&&"small"!==S&&!x&&!M&&"light"!==g&&a.createElement(at,{tabIndex:0,card:this.previousCard,name:"Previous",className:"avp-icon-previous",title:s.ZP.t("playlist__previous_video"),onClick:e=>{e.stopPropagation(),C()},id:"previous_button","aria-describedby":"previous_item_card"}),D&&!E&&"trailer"!==g&&"small"!==S&&!x&&!M&&"light"!==g&&a.createElement(at,{card:this.nextCard,name:"Next",className:"avp-icon-next",title:s.ZP.t("playlist__next_video"),onClick:e=>{e.stopPropagation(),P()},id:"next_button","aria-describedby":"next_item_card"}),h&&!M&&"light"!==g&&a.createElement(Vi,{eventEmitter:c,onClickAirPlay:r}),v&&!M&&"light"!==g&&a.createElement(Zi,{eventEmitter:c,playerRef:p}),!w&&!M&&"light"!==g&&"trailer"!==g&&!I&&a.createElement(ji,{playerRef:p,updateOpenedOverlaysCount:m,proxyFunctions:d,playerId:T,displayOverlay:A}),!M&&"light"!==g&&F&&a.createElement(Oi,{playerRef:p,proxyFunctions:d,eventEmitter:c,playerId:T,isChromeCasting:w,audioTracks:F,displayAdsOverlay:R}),a.createElement(zi,{onChangeVolume:i,onClickVolume:o,onClickMute:n,slot:t,eventEmitter:c,proxyFunctions:d,playerId:T}),!w&&"light"!==g&&a.createElement(at,{name:"Fullscreen",className:"avp-icon-fullscreen",title:s.ZP.t("arialabel__fullscreen_button"),onClick:t=>e(t,L),card:a.createElement(Ci,{alignLeft:!1},a.createElement("div",{className:"avp-card__title"},s.ZP.t("arialabel__fullscreen_button")))}),u&&!M&&"light"!==g&&a.createElement(at,{name:"PicturePicture",className:"avp-icon-picture-picture",title:s.ZP.t("arialabel__pip_button"),card:a.createElement(Ci,{alignLeft:!1},a.createElement("div",{className:"avp-card__title"},s.ZP.t("arialabel__pip_button"))),onClick:e=>_(e,T)}))}};Hi.propTypes={apiPlaylistModel:l().object,audioTracks:l().object,displayOverlay:l().func,displayAdsOverlay:l().func,eventEmitter:l().object,isAirPlayAvailable:l().bool,isCastAvailable:l().bool,isChromeCasting:l().bool,isEmbed:l().bool,isLive:l().bool,isPipDevice:l().bool,nextItem:l().object,onChangeVolume:l().func,onClickAirPlay:l().func,onClickFullScreen:l().func,onClickMute:l().func,onClickNext:l().func,onClickPicturePicture:l().func,onClickPrevious:l().func,onClickVolume:l().func,playerId:l().string,playerRef:l().object,previousItem:l().object,proxyFunctions:l().object,slot:l().number,updateOpenedOverlaysCount:l().func,vendorPlayer:l().object,mode:l().string,isIllico:l().bool,responsiveState:l().string,isTouch:l().bool,streamTester:l().oneOfType([l().string,l().bool]),isAd:l().bool};var qi=$e(["mode","isIllico","responsiveState","isTouch","streamTester","isAd"])(Hi),Wi=class extends a.Component{constructor(e){super(e),this.props=e,this.throttleCheckEndIsComing=(0,c.P)(1e3,(e=>{this.checkEndIsComing(e)}))}checkEndIsComing(e){const t=e.duration-e.position;t<15&&t>=5?this.setState({isAutoNextVisible:!0}):this.setState({isAutoNextVisible:!1})}render(){const{playerId:e,apiPlaylistModel:t,vendorPlayer:i}=this.props;t.getPlaylistLiveIndex()>-1&&de.desktop()&&(i.events.removeListener("time",this.throttleCheckEndIsComing),i.events.on("time",this.throttleCheckEndIsComing));const o=t.getPlaylistIndexFromUrl(ye("providerId",e)),n=t.getPlaylistItems().length,r=o+1;let l;r<n&&(l="".concat(s.ZP.t("playlist__next_video")," ").concat(r+1,"/").concat(n));const c=new Ne(t.getPlaylistItems()[r]);return a.createElement(Ci,{className:"avp-card--large avp-card--autoNext",noAlign:!0,isAutoNextVisible:this.state&&this.state.isAutoNextVisible},r<n?a.createElement(a.Fragment,null,a.createElement("img",{alt:c.get("title"),src:c.get("images")[0].url,className:"avp-card__thumb"}),a.createElement("div",{className:"avp-card__content"},a.createElement("p",{className:"avp-card__text"},l),a.createElement("div",{className:"avp-card__title"},c.get("title")))):null)}};Wi.propTypes={playerId:l().string,vendorPlayer:l().object,apiPlaylistModel:l().object};var Gi=$e(["jsonUrl"])(Wi),Ki=class extends a.Component{constructor(e){super(e),this.props=e}render(){const{open:e,content:t}=this.props;return e&&null!==t?a.createElement("div",{className:"avp-messagebox"},a.createElement("div",{className:"avp-messagebox--inner"},t)):a.createElement("div",null)}};Ki.propTypes={open:l().bool,content:l().string};var Xi=Ki,Ji=class extends a.Component{constructor(e){super(e),this.props=e}render(){const{buttons:e,disableTitle:t,mode:i,responsiveState:s,title:o,subtitle:n,providerId:r,previewState:l}=this.props;return a.createElement("div",{className:"avp-topdock"},a.createElement("div",{className:"avp-topdock-left"},!t&&"trailer"!==i&&a.createElement(a.Fragment,null,o&&a.createElement("p",{className:"avp-topdock-title"},o),n&&"small"!==s&&a.createElement("h2",{className:"avp-topdock-subtitle"},n)),a.createElement("div",{className:"avp-topdock-badges"},e.filter((e=>"badge"===e.key)).map((e=>e)))),a.createElement("div",{className:"avp-topdock-right"},!de.isSafariLowerThan12()&&"hidden"===l&&e&&r&&a.createElement(a.Fragment,null,e.filter((e=>"badge"!==e.key)).map((e=>{if("club"===e.props.name){if(e.props.programId===r)return e}else if("hidden"===l||"chapters"!==e.key)return e})))))}};Ji.propTypes={disableTitle:l().bool,mode:l().string,responsiveState:l().string,buttons:l().array,title:l().string,subtitle:l().string,providerId:l().string,previewState:l().string},Ji.defaultProps={disableTitle:!1,buttons:[],title:void 0,subtitle:void 0,providerId:void 0};var Qi=$e(["previewState","mode","responsiveState"])(Ji),Yi=class extends a.Component{constructor(e){super(e),this.state={displayOverControls:!1,belongsToSegment:!1,buttonText:"",displayTrailerButton:!1},this.displayButtonDuration=3,this.waitForAnimation=!1,this.skipToPosition=0,this.isComponentMounted=!1,this.handleSkip=this.handleSkip.bind(this),this.onClickNext=this.onClickNext.bind(this),this.handleReset=this.handleReset.bind(this),this.handleTimeChange=this.handleTimeChange.bind(this),this.handleTrailer=this.handleTrailer.bind(this),this.throttledHandleTimeChange=(0,c.P)(300,this.handleTimeChange);const{vendorPlayer:t}=this.props;t.events.on("time",this.throttledHandleTimeChange),t.events.on("arte_vp.postFetchPlaylist",this.handleTrailer),t.events.on("arte_vp.reload",this.handleReset)}componentDidMount(){this.isComponentMounted=!0}UNSAFE_componentWillReceiveProps(){const{vendorPlayer:e}=this.props;e.events.removeListener("time",this.throttledHandleTimeChange),e.events.removeListener("arte_vp.postFetchPlaylist",this.handleTrailer),e.events.removeListener("arte_vp.reload",this.handleReset),e.events.on("time",this.throttledHandleTimeChange),e.events.on("arte_vp.postFetchPlaylist",this.handleTrailer),e.events.on("arte_vp.reload",this.handleReset)}componentWillUnmount(){this.isComponentMounted=!1}handleTrailer(e){const{isTrailerVideo:t}=this.props;if(t&&e.getPlaylistItems().length>1){const t=e.getPlaylistItems(),i=e.getPlaylistCurrentIndex(),a={MM:Math.round(t[i].duration.seconds/60)};this.setState({buttonText:s.ZP.t("skip__to_full_video",a)})}this.setState({displayTrailerButton:t})}handleTimeChange(e){const{segments:t,vendorPlayer:i,isEpisodic:a,hasNextItem:o}=this.props,{displayTrailerButton:n}=this.state;if(!this.waitForAnimation&&!n&&!i.isAdPlaying()){let n=!1,r=!1;for(let l=0;l<t.length;l+=1){const c=t[l];if(e.position>c.begin&&e.position<c.end){let t;switch(n=!0,this.skipToPosition=c.end>i.api.getDuration()?Math.round(i.api.getDuration()):c.end,c.type){case"SUMMARY":t=s.ZP.t("skip__summary_button"),this.skipType="SUMMARY";break;case"OPENING_CREDITS":t=s.ZP.t("skip__intro_button"),this.skipType="OPENING_CREDITS";break;default:t=a&&o?s.ZP.t("skip__to_next_episode"):s.ZP.t("skip__outro_button"),this.skipType="END_CREDIT"}r=e.position>c.begin&&e.position<c.begin+this.displayButtonDuration,this.isComponentMounted&&this.setState({buttonText:t,belongsToSegment:n,displayOverControls:r})}}n||this.isComponentMounted&&this.setState({displayOverControls:!1,belongsToSegment:!1})}}handleSkip(e){e.stopPropagation();const{vendorPlayer:t,isEpisodic:i,hasNextItem:a,handleNext:s}=this.props;"END_CREDIT"===this.skipType&&i&&a&&(this.setState({displayTrailerButton:!1}),s()),t.events.emit("arte_vp.skipAction",{skipType:this.skipType}),this.handleReset(),this.waitForAnimation=!0,setTimeout((()=>{t.api.seek(this.skipToPosition),setTimeout((()=>{this.waitForAnimation=!1}),100)}),200)}handleReset(){this.setState({displayOverControls:!1,belongsToSegment:!1})}onClickNext(e){this.setState({displayTrailerButton:!1}),e.stopPropagation();const{reload:t,apiModel:i,vendorPlayer:a}=this.props;t({jsonUrl:i.getReplayUrl()}),a.events.emit("arte_vp.skipAction",{skipType:"SEE_FULL_VIDEO"})}render(){const{displayOverControls:e,belongsToSegment:t,buttonText:i,displayTrailerButton:s}=this.state,{showControls:o,state:n,isVolumeOpen:r,controlRightLabelOpen:l,isInfoBoxOpen:c,isShareBoxOpen:d}=this.props;let p=s||e||t&&o||t&&"paused"===n;return p=p&&!r,p=p&&!l,p=p&&!c,p=p&&!d,a.createElement("div",{className:"avp-segment",style:p?{visibility:"visible",opacity:1}:{visibility:"hidden",opacity:0},onClick:s?this.onClickNext:this.handleSkip},i)}};Yi.propTypes={segments:l().array,vendorPlayer:l().object,showControls:l().bool,state:l().string,isVolumeOpen:l().bool,isTrailerVideo:l().bool,isEpisodic:l().bool,hasNextItem:l().bool,controlRightLabelOpen:l().bool,reload:l().func,apiModel:l().object,handleNext:l().func,isInfoBoxOpen:l().bool,isShareBoxOpen:l().bool};var $i=$e(["segments","showControls","state","isVolumeOpen","isTrailerVideo","isEpisodic","hasNextItem","controlRightLabelOpen","isInfoBoxOpen","isShareBoxOpen"])(Yi);function ea(e){return.026*e+1.788}function ta(e){let t="100%";switch(e){case"XS":t="50%";break;case"S":t="75%";break;case"M":default:t="100%";break;case"L":t="125%";break;case"XL":t="150%"}return t}var ia=class e extends a.Component{constructor(e){super(e),this.state={content:[],textTracksPositionDefault:0,textTracksPositionWithControls:0,textTracksBaseFontSize:0,textTracksLineHeight:0,textTracksAvailableGap:0,textTracksLine:0,alignItems:"center"},this.textTracksDefaultPosition=1,this.initTextTracks=this.initTextTracks.bind(this),this.destroyTextTracks=this.destroyTextTracks.bind(this),this.getTextTracksContainerStyles=this.getTextTracksContainerStyles.bind(this),this.getTextTracksPositionDefault=this.getTextTracksPositionDefault.bind(this),this.getTextTracksAvailableGap=this.getTextTracksAvailableGap.bind(this),this.getTextTracksDimensions=this.getTextTracksDimensions.bind(this),this.onTextTrackChange=this.onTextTrackChange.bind(this);const{vendorPlayer:t,playerId:i}=this.props,a=$("arte_vp.captionsFontSize");a&&ge("textTracksFontSize",a,i),t.events.on("firstFrame",this.initTextTracks),t.events.on("arte_vp.destroyed",this.destroyTextTracks)}static getTextTrackClassName(e){const t=/<c(.*)>(.*)<\/c>/i.exec(e);return t&&t.length>0?t[1].replaceAll("."," "):""}static getTextTrackText(e){const t=/<c(.*)>(.*)<\/c>/i.exec(e);return t&&t.length>2?t[2]:e}onTextTrackChange({activeTextTrack:t}){const{textTracksLineHeight:i}=this.state;if(this.getTextTracksPositionDefault(),this.getTextTracksAvailableGap(),this.getTextTracksPositionWithControls(),this.getTextTracksDimensions(),this.getTextTracksContainerStyles(),t&&t.activeCues_&&t.activeCues_.length&&t.activeCues_[0].displayState&&t.activeCues_[0].displayState.childNodes.length){const a=t.activeCues_[0],s=[],o=a.text.split("\n");for(let t=0;t<o.length;t+=1)s.push({text:e.getTextTrackText(o[t]),className:e.getTextTrackClassName(o[t]),lineHeight:i});this.setState({content:s,textTracksLine:Math.abs(a.line),alignItems:"left"===a.align?"start":"right"===a.align?"end":"center"})}else this.setState({content:[]})}getTextTracksDimensions(){const e=document.querySelector(".avp:not(.avp-preview)");if(e){const t=e.offsetWidth;this.setState({textTracksBaseFontSize:Math.trunc(ea(t)),textTracksLineHeight:"".concat(Math.trunc(ea(t)),"px")})}}getTextTracksPositionDefault(){const e=document.querySelector(".avp:not(.avp-preview)");if(e){const t=e.offsetHeight*this.textTracksDefaultPosition;this.setState({textTracksPositionDefault:t})}}getTextTracksAvailableGap(){const e=document.querySelector(".avp:not(.avp-preview)");if(e){const t=e.offsetHeight,i=t-t*(1-this.textTracksDefaultPosition)*2;this.setState({textTracksAvailableGap:i})}}getTextTracksPositionWithControls(){const e=document.querySelector(".avp:not(.avp-preview)");if(e){const t=e.offsetHeight,i=function(){const e=document.querySelector(".avp-controlbar");return e?e.offsetHeight:100}();this.setState({textTracksPositionWithControls:t-(i+10)})}}getTextTracksContainerStyles(){const{textTracksPositionDefault:e,textTracksPositionWithControls:t,textTracksBaseFontSize:i,textTracksLineHeight:a,textTracksLine:s,textTracksAvailableGap:o,content:n}=this.state,{showControls:r,state:l}=this.props;let c=0;for(let e=0;e<n.length;e+=1)c+=n[e].text.split(/\r\n|\r|\n/).length;let d=0;d=Number.isNaN(s)?(91-8*c)*o/100:Math.abs(s)*o/100,d-=(2-c)*function(){const e=document.querySelector(".avp:not(.avp-preview)");return e?.077*e.offsetHeight-24:0}();const p=t-c*(1.29*i),u={};return u.paddingTop=r||"paused"===l?Math.min(e,p,d):d,u.fontSize="".concat(i,"px"),u.lineHeight=a,u}destroyTextTracks(){const{vendorPlayer:e,playerId:t}=this.props;ge("textTracksFontSizeAvailable",!1,t),this.setState({content:[]}),e.events.on("firstFrame",this.initTextTracks)}initTextTracks(){const{vendorPlayer:e}=this.props;e.events.on("textTrackChange",this.onTextTrackChange);const t=e.videojsInstance.textTrackSettings;t.setValues({backgroundOpacity:"0",color:"#FF0"}),t.updateDisplay()}render(){const{content:e,alignItems:t}=this.state,{textTracksFontSize:i}=this.props;return a.createElement("div",{className:"avp-textTracks-container"},a.createElement("div",{id:"avp-textTracks-renderer"}),a.createElement("div",{className:"avp-textTracks-positioner"},a.createElement("div",{className:"avp-textTracks","aria-live":"assertive",style:this.getTextTracksContainerStyles()},a.createElement("div",{className:"avp-textTracks-scale",style:{fontSize:ta(i),alignItems:t}},e.map((e=>a.createElement("span",{className:"avp-textTracks-line ".concat(e.className),key:(Math.random()+1).toString(36),style:e.styles},e.text)))))))}};ia.propTypes={vendorPlayer:l().object,showControls:l().bool,state:l().string,textTracksFontSize:l().string,playerId:l().string};var aa=$e(["showControls","state","textTracksFontSize"])(ia),sa=class e extends a.Component{constructor(e){super(e),this.props=e,this.state={isOpen:!1},this.eventListenerDestroyed=this.eventListenerDestroyed.bind(this),this.onClickClose=this.onClickClose.bind(this),this.onClickOpen=this.onClickOpen.bind(this)}static onClickInfoLink(e){e.preventDefault(),e.stopPropagation();try{i.g.parent.location=e.currentTarget.getAttribute("href")}catch(e){console.error(e)}}componentDidMount(){const{eventEmitter:e}=this.props;e.on("arte_vp.info_open",this.onClickOpen),e.on("arte_vp.info_close",this.onClickClose),e.on("arte_vp.destroyed",this.eventListenerDestroyed)}componentDidUpdate(e,t){const{isOpen:i}=this.state;if(!1===t.isOpen&&i){const e=document.querySelector(".avp-infobox__inner button");e&&e.focus()}if(!0===t.isOpen&&!i){const e=document.querySelector(".avp-button--Info");e&&e.focus()}}onClickOpen(e){e.stopPropagation(),e.preventDefault();const{updateOpenedOverlaysCount:t,playerId:i}=this.props;this.setState({isOpen:!0}),ge("isInfoBoxOpen",!0,i),t(1)}onClickClose(){const{updateOpenedOverlaysCount:e,playerId:t}=this.props;this.setState({isOpen:!1}),ge("isInfoBoxOpen",!1,t),e(-1)}getCommonScreenComponent(){const{apiModel:t,displayInfoLink:i,isLive:o}=this.props,n=t.getDuration()?s.ZP.t("info__video_duration",{duration:(r=t.getDuration(),Math.trunc(r/60))}):0;var r;const l=i?t.getInfoLink():null,c=s.ZP.t("info__detail_link");let d;if(t.hasRights()&&t.getRights().end&&!o){const e=(0,R.Z)(new Date(t.getRights().end),new Date,"days");try{d=e<=1?(0,P.Z)(new Date(t.getRights().end),s.ZP.t("info__rights_until_datetime_format")):(0,P.Z)(new Date(t.getRights().end),s.ZP.t("info__rights_until_date_format"))}catch(e){console.warn("date-fns crashed")}}let p="";return 0!==n&&(p="".concat(n)),0!==n&&d&&(p+=" - "),d&&(p+="".concat(d)),a.createElement("div",{className:"avp-infobox__content"},t.getTitleFromPreviewDataFirst()&&a.createElement("div",{className:"avp-infobox__title"},a.createElement(h.ZT,{tag:"h2",style:"title"},t.getTitleFromPreviewDataFirst())),t.getSubtitleFromPreviewDataFirst()&&a.createElement("div",{className:"avp-infobox__subtitle"},a.createElement(h.ZT,{style:"subtitle"},t.getSubtitleFromPreviewDataFirst())),p&&a.createElement("div",{className:"avp-infobox__duration"},a.createElement(h.ZT,{style:"date"},p)),t.getTeaserText()&&a.createElement("div",{className:"avp-infobox__text"},a.createElement(h.ZT,{style:"default"},t.getTeaserText())),l&&a.createElement("a",{className:"avp-infobox__link",onClick:e.onClickInfoLink,title:t.getTitleFromPreviewDataFirst(),href:l},c))}eventListenerDestroyed(){const{eventEmitter:e}=this.props;e.on("arte_vp.info_open",this.onClickOpen),e.on("arte_vp.info_close",this.onClickClose)}render(){const{playerId:e}=this.props,{isOpen:t}=this.state;return a.createElement("div",{className:"avp-infobox","data-testid":"Info__overlay",onClick:e=>e.stopPropagation()},a.createElement("div",{className:"avp-infobox__inner"},a.createElement(h.aV,{isOpen:t,onClose:this.onClickClose,playerId:e,zIndex:2},this.getCommonScreenComponent())))}};sa.propTypes={apiModel:l().object,displayInfoLink:l().bool,isLive:l().bool,eventEmitter:l().object,updateOpenedOverlaysCount:l().func,playerId:l().string};var oa=sa,na=class e extends a.Component{static isOptionSelected(e,t){return e.options.filter((e=>!(!e.selected||e.id!==t))).length>0}constructor(e){super(e),this.state={isOpen:!1,selectedItem:"share",iframeEmbedCode:"",jsEmbedCode:"",playerHasBeenPaused:!1,playerStateBeforeOpen:!1,focusedElementBeforeOpen:!1};const{playerConfig:t,apiModel:i,lang:a,tcStartFrom:o,slot:n}=e,r=[];t.embed_share_sizes.forEach((e=>{const i=s.ZP.t("share__javascript_option_size_".concat(e));r.push({title:i,id:e,label:"".concat(s.ZP.t("arialabel__size_select")," ").concat(i),selected:e===t.embed_share_default_sizes,onClick:e=>this.changeResolution.bind(this)(e)})})),this.columnItems={size:r,options:[{title:s.ZP.t("share__autostart_option_text"),id:"autoplay",label:"".concat(s.ZP.t("arialabel__options_select")," ").concat(s.ZP.t("share__autostart_option_text")),selected:!0,onClick:e=>this.updateOptions.bind(this)(e)},{title:s.ZP.t("share__mute_option_text"),label:"".concat(s.ZP.t("arialabel__options_select")," ").concat(s.ZP.t("share__mute_option_text")),id:"mute",onClick:e=>this.updateOptions.bind(this)(e)}]},this.jsonUrl=i.getJsonUrl(),this.sharedUrl=i.getInfoLink()||Rt.getTechnicalPlayerUrl({lang:a,jsonUrl:this.jsonUrl,slot:n,tcStartFrom:o}),this.onClickShare=this.onClickShare.bind(this),this.onClickEmbed=this.onClickEmbed.bind(this),this.onFocus=this.onFocus.bind(this),this.eventListenerDestroyed=this.eventListenerDestroyed.bind(this),this.onClickClose=this.onClickClose.bind(this),this.onClickOpen=this.onClickOpen.bind(this),this.onClickIframeEmbedCode=this.onClickIframeEmbedCode.bind(this),this.getIframeEmbedCode=this.getIframeEmbedCode.bind(this),this.filterV5ApiEmbedCode=this.filterV5ApiEmbedCode.bind(this),this.getStaticIframeCode=this.getStaticIframeCode.bind(this)}componentDidMount(){const{eventEmitter:e}=this.props,t=this.getJsEmbedCode();this.setState({jsEmbedCode:t}),e.on("arte_vp.share_open",this.onClickOpen),e.on("arte_vp.share_close",this.onClickClose),e.on("arte_vp.destroyed",this.eventListenerDestroyed)}componentDidUpdate(e,t){const{selectedItem:i,iframeEmbedCode:a,isOpen:s,focusedElementBeforeOpen:o}=this.state;if("embed"!==i||a||this.getIframeEmbedCode((e=>{this.setState({iframeEmbedCode:e})})),!1===t.isOpen&&s){const e=document.querySelector(".avp-sharebox");if(e){const t=e.previousSibling.childNodes[0];t&&t.focus()}}else if(t.isOpen&&!s&&o){const e=document.getElementById(o);e&&e.focus()}}onClickOpen(e){e.stopPropagation(),e.preventDefault();const{updateOpenedOverlaysCount:t,playerId:i,shouldStop:a,proxyFunctions:s}=this.props;let o=!1,n=!1;const r=document.activeElement.id;"function"==typeof s.getState&&(n=s.getState()),a&&"function"==typeof s.pause&&Number.isFinite(Math.round(s.getDuration()))&&"complete"!==s.getState()&&(o=!0,s.pause(!0)),this.setState({isOpen:!0,playerHasBeenPaused:o,playerStateBeforeOpen:n,focusedElementBeforeOpen:r}),ge("isShareBoxOpen",!0,i),t(1)}onClickClose(){const{updateOpenedOverlaysCount:e,playerId:t,proxyFunctions:i,reload:a}=this.props,{playerHasBeenPaused:s,playerStateBeforeOpen:o}=this.state;s&&"playing"===o&&i.play(),this.setState({isOpen:!1}),ge("isShareBoxOpen",!1,t),e(-1),ye("isShareBoxFromCountdown",t)&&(ge("isShareBoxFromCountdown",!1,t),a({jsonUrl:"".concat(ye("jsonUrl",t),"#").concat(Math.random())}))}onClickShare(e){e.stopPropagation(),this.setState({selectedItem:"share"})}onClickEmbed(e){e.stopPropagation(),this.setState({selectedItem:"embed"})}onClickIframeEmbedCode(e){e.stopPropagation();const{iframeEmbedCode:t}=this.state;try{navigator.clipboard.writeText(t)}catch(e){}}onFocus(){const{playerRef:{querySelector:e}}=this.props;e(".avp-sharebox__share>input").select()}getJsEmbedCode(){const{playerConfig:t,lang:i}=this.props,a=t.embed_share_default_sizes.split("x"),s={https_player_base_url:t.https_player_base_url,jsonUrl:this.jsonUrl,lang:i,autoplay:!!e.isOptionSelected(this.columnItems,"autoplay"),mute:e.isOptionSelected(this.columnItems,"mute")?"1":"0",width:a[0],height:a[1]};return'<script src="'.concat(s.https_player_base_url,"embed.php?json_url=").concat(encodeURIComponent(s.jsonUrl),"&lang=").concat(s.lang,"&width=").concat(s.width,"&height=").concat(s.height,"&autoplay=").concat(s.autoplay,"&mute=").concat(s.mute,'"><\/script>')}getIframeEmbedCode(e){const{apiModel:t}=this.props;t.getProviderId()&&!t.isLive()?je({url:"https://api.arte.tv/api/player/v2/oembed?url=".concat(encodeURIComponent(this.jsonUrl))}).then((t=>{if(!t.data||!t.data.html)throw new Error;e(this.filterV5ApiEmbedCode(t.data.html))})).catch((()=>{e(this.getStaticIframeCode())})):e(this.getStaticIframeCode())}getStaticIframeCode(){const{playerConfig:t,apiModel:i,lang:a}=this.props;let s=t.embed_base_player_code;const o=t.embed_share_default_sizes.split("x"),n={"%prefix%":t.https_player_base_url,"%json_url%":encodeURIComponent(this.jsonUrl),"%lang%":a,"%autoplay%":!!e.isOptionSelected(this.columnItems,"autoplay"),"%mute%":e.isOptionSelected(this.columnItems,"mute")?"1":"0","%tcStartFrom%":"","%width%":o[0],"%height%":o[1],"%previewData%":encodeURIComponent(JSON.stringify({title:i.getTitleFromPreviewDataFirst(),subtitle:i.getSubtitleFromPreviewDataFirst(),image:i.getImageUrlFromPreviewDataFirst()}))};return Object.keys(n).forEach((e=>{s=s.replace(new RegExp(e,"g"),n[e])})),s}filterV5ApiEmbedCode(t){const i=this;let a=t;const s=/src="(.*)"/,o=t.match(s);if(o){const t="".concat(o[1]).concat(o[1].includes("?")?"&":"?","autoplay=").concat(e.isOptionSelected(i.columnItems,"autoplay")?"true":"false","&mute=").concat(e.isOptionSelected(i.columnItems,"mute")?"1":"0");a=a.replace(s,'src="'.concat(t,'"'))}return a}changeResolution(e){const{iframeEmbedCode:t,jsEmbedCode:i}=this.state,a=e.filter((e=>!!e.selected))[0].id.split("x"),s=t.replace(/width="(\d+)(%)?"/g,'width="'.concat(a[0],'"')).replace(/height="(\d+)(%)?"/g,'height="'.concat(a[1],'"')),o=i.replace(/width=(\d+)(%)?/g,"width=".concat(a[0])).replace(/height=(\d+)(%)?/g,"height=".concat(a[1]));this.setState({iframeEmbedCode:s,jsEmbedCode:o})}updateOptions(e){const{iframeEmbedCode:t,jsEmbedCode:i}=this.state;let a=t,s=i;e.map((e=>{const{id:t,selected:i}=e;return"autoplay"===t&&(a=a.replace(/autoplay=(true|false)/g,"autoplay=".concat(i?"true":"false")),s=s.replace(/autoplay=(true|false)/g,"autoplay=".concat(i?"true":"false"))),"mute"===t&&(a=a.replace(/mute=(\d+)/g,"mute=".concat(i?"1":"0")),s=s.replace(/mute=(\d+)/g,"mute=".concat(i?"1":"0"))),e})),this.setState({iframeEmbedCode:a,jsEmbedCode:s})}eventListenerDestroyed(){const{eventEmitter:e}=this.props;e.on("arte_vp.share_open",this.onClickOpen),e.on("arte_vp.share_close",this.onClickClose)}render(){const{playerId:e}=this.props,{isOpen:t,selectedItem:i,iframeEmbedCode:o}=this.state,r=ye("isShareBoxOpen",e);return a.createElement("div",{className:"avp-adsoverlay"},a.createElement(h.aV,{isOpen:t||r,onClose:this.onClickClose,zIndex:2,playerId:e},a.createElement("div",{className:"avp-sharebox",onClick:e=>e.stopPropagation()},a.createElement("div",{className:"avp-sharebox__tab",role:"navigation","aria-label":s.ZP.t("arialabel__share_menu")},a.createElement("div",{className:n()("avp-sharebox__title","share"===i?"share is-selected":"share"),id:"avp-sharebox__share",tabIndex:"share"===i?1:0,onClick:this.onClickShare,role:"button","aria-expanded":"share"===i?"true":"false","aria-current":"share"===i?"true":""},s.ZP.t("share__share_button_title")),a.createElement("div",{className:"avp-share-buttons-separator"}),a.createElement("div",{className:n()("avp-sharebox__title","embed"===i?"embed is-selected":"embed"),id:"avp-sharebox__embed",tabIndex:"embed"===i?1:0,onClick:this.onClickEmbed,role:"button","aria-expanded":"embed"===i?"true":"false","aria-current":"embed"===i?"true":""},s.ZP.t("share__embed_button_title"))),"share"===i&&a.createElement("div",{className:"avp-sharebox__content avp-sharebox__share"},a.createElement("input",{type:"text",onFocus:this.onFocus,readOnly:!0,value:this.sharedUrl,tabIndex:0}),a.createElement("div",{className:"avp-sharebox__container"},a.createElement(h.PB,{label:s.ZP.t("share__share_button_title"),style:"light",url:this.sharedUrl}))),"embed"===i&&(o?a.createElement("div",{className:"avp-sharebox__content avp-sharebox__embed"},a.createElement("input",{type:"text",readOnly:!0,value:o,onClick:this.onClickIframeEmbedCode}),a.createElement("div",{className:"avp-row",role:"list"},a.createElement(Fi,{id:"size",title:s.ZP.t("share__size_options_title"),items:this.columnItems.size,multi:!1}),a.createElement(Fi,{id:"options",title:s.ZP.t("share__options_options_title"),items:this.columnItems.options,multi:!0}))):a.createElement(h.aN,null)))))}};na.propTypes={playerId:l().string,shouldStop:l().bool,eventEmitter:l().object,updateOpenedOverlaysCount:l().func,proxyFunctions:l().object,playerConfig:l().object,apiModel:l().object,lang:l().string,tcStartFrom:l().number,slot:l().string,playerRef:l().object,reload:l().func},na.defaultoptions={};var ra=$e(["isShareBoxOpen"])(na),la=e=>{const{apiModel:t,redirectToAgeVerification:i,redirectToInfoPage:o,isConnected:n,onClickConfirm:r,onClickQuit:l}=e,c=t.getWarnings(),d=t.getError();return a.createElement("div",{className:"avp-morality"},a.createElement("form",{className:"avp-morality__content"},c?c.map((e=>a.createElement(h.jB,{ageRestriction:Array.isArray(e.code.split("_"))?e.code.split("_")[e.code.split("_").length-1]:void 0,key:e.code,message:e.title,messageHighlighted:""!==e.message?e.message:void 0,programTitle:t.getTitleFromPreviewDataFirst(),primaryButton:{onClick:e=>{r(e)},label:"WARNING_AGE_RESTRICTION_18"===e.code?s.ZP.t("cta__watch_label"):s.ZP.t("morality__video_warning_ok"),variant:"Button"},secondaryButton:"WARNING_AGE_RESTRICTION_18"===e.code?{onClick:e=>{l(e)},label:s.ZP.t("morality__response_no"),variant:"Link"}:void 0}))):null,d?a.createElement(h.jB,{ageRestriction:Array.isArray(d.code.split("_"))?d.code.split("_")[d.code.split("_").length-1]:void 0,key:d.code,message:d.title,messageHighlighted:""!==d.message?d.message:void 0,programTitle:t.getTitleFromPreviewDataFirst(),primaryButton:{onClick:i,label:n?s.ZP.t("fsk__verify_age"):s.ZP.t("label__login"),variant:"Button"},secondaryButton:{onClick:o,label:s.ZP.t("label__more_infos"),variant:"Link"},messageQuestion:s.ZP.t("fsk__nowait_message")}):null))},ca=e=>{const{apiModel:t,moralityChecked:i}=e;if(i)return Promise.resolve();let a;const s=t.getMoralityWarnings(),o=t.getMoralityError();return s||o?(o?a={key:"morality.displayed"}:s&&(a={key:"videoWarning.displayed"}),Promise.reject(a)):Promise.resolve()},da=e=>e.apiModel.hasStream()||e.stream||e.apiModel.getWarnings()||e.apiModel.getError()?(e.apiModel.hasStream()||e.stream||e.apiModel.getWarnings()||e.apiModel.getError(),Promise.resolve()):Promise.reject({message:s.ZP.t("error__general_error_title"),key:"sources.notEncoded"}),pa=e=>e.apiModel.isRestricted()&&!e.stream?Promise.reject({message:s.ZP.t("error__geolocation"),key:"rights.badGeoloc"}):Promise.resolve(),ua=e=>{const t=e.apiModel.getCommonError();return t?Promise.reject({message:t.title,key:"api.error"}):Promise.resolve()},ha=e=>_i({apiModel:e.apiModel,jsonUrl:e.jsonUrl}).then((()=>Promise.all([ca({userInfo:e.userInfo,apiModel:e.apiModel,overlayOption:e.overlayOption,mode:e.mode,moralityChecked:e.moralityChecked}),da({apiModel:e.apiModel,stream:e.stream}),pa({apiModel:e.apiModel,stream:e.stream}),ua({apiModel:e.apiModel})])));function _a(e){const t=function(e){const t=e.split("."),i=t[0].split(":");return{milliseconds:parseInt(t[1],10)||0,seconds:parseInt(i.pop(),10)||0,minutes:parseInt(i.pop(),10)||0,hours:parseInt(i.pop(),10)||0}}(e);return parseInt(3600*t.hours+60*t.minutes+t.seconds+t.milliseconds/1e3,10)}var ma=class{constructor(e){this.models=e||[]}at(e){return this.models[e]}add(e){Array.isArray(e)?e.length>0&&(this.models=this.models.concat(e)):this.models.push(e)}reset(){this.models.splice(0,this.models.length)}get length(){return this.models.length}filter(e){return this.models.filter(e)}toJSON(e){return this.models.map((t=>t.toJSON(e)))}},va=class e extends ma{constructor(e,t){super(e);const i=this;i.options=t,i.url=t.url,i.apiBaseUrl=Ie.apiBaseUrl}static completeJsonUrl(e,t){return e.indexOf(t)<0&&"http"!==e.substring(0,4)?t+e:e}getItems(t){const i=this,a=new URL(i.url),s=new URL("".concat(a.origin).concat(a.pathname));["platform","contextId","kind","ID","CODE_LANGUE","metaLang"].forEach((e=>{a.searchParams.has(e)&&s.searchParams.set(e,a.searchParams.get(e))}));const o={};return i.options.token&&(o.Authorization="Bearer ".concat(i.options.token)),i.options.ageVerificationToken&&(o["X-Validated-Age"]=i.options.ageVerificationToken),je({url:e.completeJsonUrl(s.toString(),i.apiBaseUrl),headers:o,cancelToken:t}).then((e=>(e&&i.add(new Ne(e.data.data.attributes,{playerId:i.options.playerId})),Promise.resolve()))).catch((e=>{console.error(e)}))}parse(e){return e.data.attributes}},ga=class extends Re{defaults(){return{language:"en",preload:"auto",plugins:{},controls:!1,autoplay:!1,muted:!1,aspectRatio:"16:9",fill:!0,"exact-manifest-timings":!0,html5:{nativeTextTracks:de.isSafari(),vhs:{limitRenditionByPlayerDimensions:!1,useBandwidthFromLocalStorage:!0,suppressNotSupportedError:!0,enableLowInitialPlaylist:!0,useForcedSubtitles:!0}},children:["mediaLoader","textTrackSettings","TextTrackDisplay"]}}constructor(e,t){super(e),this.options=t,this.populate()}populate(){const e=this.options.apiModel.hasStream()?{src:this.options.apiModel.getStreams()[0].url,type:"https"===this.options.apiModel.getStreams()[0].protocol.toLowerCase()?"video/mp4":"application/x-mpegURL"}:{};return this.options.apiModel.hasStream()&&(e.customTagParsers=[{expression:/^#SPRITES/,customType:"sprites"}]),this.set("sources",e),this}setSources(e){this.set("sources",e)}setMuted(e){const t=se("mute"),i=se("volume"),a=ye("mute",e);return ge("mute",t,e),ge("volume",i,e),(t||0===i||a)&&this.set("muted",!0),this}},ya=class extends Re{defaults(){return{id:null,title:null,tc:null,image:null,description:null,startTime:null,toDelete:!1}}constructor(e,t){super(e),this.options=t,this.idAttribute="id"}},ba=class extends ma{constructor(e){super(e),this.model=ya,this.comparator="tc"}populate(e){const t=this,i=e.getChapters();i&&Object.keys(i).forEach((a=>{const s=i[a],o=new ya(s);e.getChaptersSpriteUrl()&&o.set("image",e.getChaptersSpriteUrl()),t.add(o)}))}};function fa(){const e=this,{playerId:t}=this.props;e.apiModel=new Ne([],{playerId:t}),e.apiCollection.length>0&&(e.apiModel=e.apiCollection.at(0));const i=e.apiModel;return i.id=e.apiModel.getProviderId(),e.chapterCollection=new ba,e.chapterCollection.populate(e.apiModel),e.videojsConfig=new ga([],{apiModel:e.apiModel}),i}function ka(e){const t=this;let{jsonUrl:i}=this.props;const{mode:a,onVideoLoaded:s,playerId:o}=this.props,n=i.split("?")[1];let r=n,l="";n&&n.indexOf("#")>-1&&(l=n.substr(n.indexOf("#")),r=n.replace(l,""));const c=new URLSearchParams(r);if((c.toString().length>0||l.length>0)&&(i="".concat(i.split("?")[0],"?").concat(c.toString()).concat(l)),t.apiCollection=new va([],{url:i,token:Ze(a),ageVerificationToken:this.userInfo.ageVerificationToken,playerId:o}),function(e,t){const i=document.createElement("a");i.href=t;const a=i.hostname.split("."),s="".concat(a[a.length-2],".").concat(a[a.length-1]);return-1!==e.indexOf(s)}(Ie.whitelisted_json_url_domains,i)){t.cancelRequest=()=>{};const i=new D.$B((e=>{t.cancelRequest=e}));t.apiCollection.getItems(i).then((()=>{const t=fa.bind(this)();s({videoJsonPlayerModel:t}),e()})).catch((()=>{const t=fa.bind(this)();s({videoJsonPlayerModel:t}),e()}))}}var Ca=class{constructor(e){this.options=e,this.init()}init(){(0,h.hG)((()=>{this.setActionLoggedInUser()})),(0,h.gO)((()=>{this.setActionUnLoggedUser()})),this.options.userInfo.isConnected?this.setActionLoggedInUser():this.setActionUnLoggedUser()}setActionLoggedInUser(){Be("arte_vp.user_loggedin",0,this.options.commonLogInfos,this.options.proxyFunctions),this.options.eventEmitter.emit("arte_vp.user_loggedin")}setActionUnLoggedUser(){Be("arte_vp.user_loggedout",0,this.options.commonLogInfos,this.options.proxyFunctions),this.options.eventEmitter.emit("arte_vp.user_loggedout")}},Pa=class{constructor(e){this.options=e,this.onClickPlay=!1,this.proxyFunctions=!1,this.handleNext=!1,this.handlePrevious=!1}on(e,t){switch(e){case"firstFrame":case"readyToChangeQuality":this.options.vendorPlayer.events.on("firstFrame",t);break;case"play":this.options.vendorPlayer.events.on("play",t);break;case"pause":this.options.vendorPlayer.events.on("pause",t);break;case"complete":this.options.vendorPlayer.events.on("complete",t);break;case"arte_vp.qualityChanged":this.options.vendorPlayer.events.on("arte_vp.qualityChanged",t);break;case"arte_vp.prevNextItem":this.options.vendorPlayer.events.on("arte_vp.prevNextItem",t);break;case"arte_vp.isFullScreen":this.options.vendorPlayer.events.on("arte_vp.isFullScreen",t);break;case"arte_vp.skipAction":this.options.vendorPlayer.events.on("arte_vp.skipAction",(e=>{"SEE_FULL_VIDEO"===e.skipType&&t({event:"arte_vp.skipAction"})}));break;case"readyToPlay":this.options.vendorPlayer.events.once("time",t);break;case"all":this.options.vendorPlayer.events.on("all",(e=>{"time"!==e.name&&-1===e.name.indexOf("arte_vp.stats")&&t({event:e.name})}))}}setPosition(e){e&&e>0&&e<this.options.vendorPlayer.api.getDuration()&&this.options.vendorPlayer.api.seek(e)}setQuality(e){const t=ye("qualitySources",this.options.playerId),i=e=>{for(let i=0;i<t.length;i+=1)t[i].title.toLowerCase()===e?t[i].selected=!0:t[i].selected=!1;return this.options.vendorPlayer.events.emit("arte_vp.qualityChanged",{newQuality:e}),ge("qualitySources",t,this.options.playerId),this.options.vendorPlayer.api.setCurrentQuality(e),re(e),!0};switch(e){case"optimal":default:i("auto");break;case"standard":i("".concat(t[2].height,"p"));break;case"savedata":i("".concat(t[t.length-1].height,"p"))}return!1}getState(){return ye("playerStatus",this.options.playerId)}getSyntheticFocusState(){return ye("syntheticFocusEnabled",this.options.playerId)}enableSyntheticFocus(){ge("syntheticFocusEnabled",!0,this.options.playerId)}disableSyntheticFocus(){ge("syntheticFocusEnabled",!1,this.options.playerId)}togglePlayPause(){this.onClickPlay&&this.onClickPlay({playerId:this.options.playerId})}},Ea=class extends a.Component{constructor(e){super(e),this.props=e,this.state={icon:e.icon,title:e.title},this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this)}onMouseEnter(){const{hoverIcon:e,hoverTitle:t}=this.props;e&&this.setState({icon:e,title:t})}onMouseLeave(){const{icon:e,title:t}=this.props;this.setState({icon:e,title:t})}render(){const{icon:e,title:t}=this.state,{onClickButton:i,card:s,accessibility:o,buttonClass:n,hiddenTitle:r,buttonId:l}=this.props;let c=n;c||(c=e,"object"==typeof e&&(c=e.NAME));let d="XS";const p=document.getElementsByTagName("body");return p.length>0&&p[0].getBoundingClientRect().width>1200&&(d="S"),a.createElement("div",{className:"avp-button avp-button--".concat(c),id:l,onClick:i,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,tabIndex:o?"0":null,"aria-label":t,role:o?"button":null,"data-testid":t},this.props.icon&&a.createElement("span",{className:"avp-button-icon"},a.createElement(h.JO,{icon:e,size:d})),a.createElement("div",{className:"avp-button__text"},t),a.createElement("span",{className:"avp-button__hidden_text"},r),s)}};Ea.propTypes={onClickButton:l().func,title:l().string,card:l().object,icon:l().string,hoverIcon:l().string,hoverTitle:l().string,accessibility:l().bool,buttonClass:l().string,hiddenTitle:l().string,buttonId:l().string},Ea.defaultProps={accessibility:!0,hiddenTitle:"",buttonId:null};var Sa=class extends a.Component{constructor(e){super(e),this.props=e,this.state={animationPaused:!1},this.playButton=a.createRef()}componentDidMount(){this.playButton.current&&this.playButton.current.firstChild.focus()}render(){const{backgroundImage:e,programUrl:t,nextVideo:i,title:o,subtitle:r,onClickLoader:l,onClickCancel:c,playNext:d,autoPlayNext:p,isTrailerVideo:u,duration:h}=this.props,{animationPaused:_}=this.state,m={MM:Math.round(h/60)},v=s.ZP.t("skip__to_full_video",m);return a.createElement("div",{className:"avp-interstitial",style:{backgroundImage:e}},a.createElement("div",{className:"avp-interstitial__inner"},!t&&a.createElement("p",null,i),u&&a.createElement("div",{className:"avp-interstitial__content"},v),a.createElement("div",{className:"avp-interstitial__title"},o,r&&a.createElement("span",null,"-",r)),d&&a.createElement("div",{className:"avp-interstitial-loader",onClick:l,"data-testid":"NextItem__play"},a.createElement("svg",{version:"1.1",viewBox:"0 0 400 400",className:n()(p?"avp-interstitial-loader__animate":"avp-interstitial-loader__loaded")},a.createElement("circle",{className:n()("path",_?"pause":""),cx:"50%",cy:"50%",r:"35%"})),a.createElement("span",{className:"next-icon avp-interstitial-loader__play",ref:this.playButton},a.createElement(at,{name:"Play",className:"arte-icon-play",title:""}))),c&&p&&a.createElement("a",{tabIndex:0,className:"avp-interstitial__content",onClick:()=>{c(),this.setState({animationPaused:!0})}},s.ZP.t("interstitial__cancel_next"))))}};Sa.propTypes={title:l().string,programUrl:l().string,backgroundImage:l().string,onClickCancel:l().func,playNext:l().bool,autoPlayNext:l().bool,nextVideo:l().string,subtitle:l().string,onClickLoader:l().func,isTrailerVideo:l().bool,duration:l().number};var Ia=$e(["isTrailerVideo"])(Sa);function wa(){const{stream:e}=this.props;e?this.setState((()=>({duration:this.vendorPlayer.api.getDuration()}))):this.setState((()=>({duration:this.apiModel.getDuration()})))}function xa(){const{isPlaylist:e,apiPlaylistModel:t,onClickNext:i,playerId:a,lang:s}=this.props,{liveStreamProgramId:o}=this.state;let n={};if(this.nextItem&&!e)n={event:"nextItem",item:this.nextItem},this.onClickPrevNext(n,a);else{const e=t.getPlaylistIndexFromUrl(ye("providerId",a)),r=e+1<t.getPlaylistItems().length,l=t.getPlaylistItems()[e+1];r&&(n={jsonUrl:o===l.providerId?Xe(s):l.config.url}),i(n)}}function Ta(){const{isPlaylist:e,apiPlaylistModel:t,onClickPrevious:i,playerId:a,lang:s}=this.props,{liveStreamProgramId:o}=this.state;let n={};if(this.previousItem&&!e)n={event:"previousItem",item:this.previousItem},this.onClickPrevNext(n,a);else{const e=t.getPlaylistIndexFromUrl(ye("providerId",a)),r=e>0,l=t.getPlaylistItems()[e-1];r&&(n={jsonUrl:o===l.providerId?Xe(s):l.config.url}),i(n)}}function Aa(e){this.setState({lastClickedElement:e})}function Fa(e,t){const{isIllico:i,getIllicoProgramsFromProps:a}=this.props;if(i){const e=a(),t=new Ne({items:e}),i={};if(new va([e],{url:null}).length>0){const a=t.getPlaylistCurrentIndex();e[a+1]&&(i.nextItem=new De(e[a+1])),e[a-1]&&(i.prevItem=new De(e[a-1]))}return this.vendorPlayer.events.emit("arte_vp.postFetchPlaylist",t),i}const{mode:s}=this.props,o=new va([],{url:e,token:Ze(s)});let n={};o.getItems().then((()=>{const e={};if(o.length>0){n=o.at(0);const t=n.getPlaylistItems(),i=n.getPlaylistCurrentIndex();t[i+1]&&(e.nextItem=new De(t[i+1])),t[i-1]&&(e.prevItem=new De(t[i-1]))}this.vendorPlayer.events.emit("arte_vp.postFetchPlaylist",n),t(e)}))}function Ma(e){const{liveStreamProgramId:t}=this.state;return e.liveStreamProgramId&&t&&t!==e.liveStreamProgramId}function La(e){const{displayOverlay:t,isPlaylist:i,apiPlaylistModel:s,jsonUrl:o,reload:n,hideOverlay:r,autoPlayNext:l,playerId:c}=this.props;if(i){const i=s.getPlaylistItems();s.getItemIndexFromUrl(o)+1<i.length&&(t({content:a.createElement(Ia,{backgroundImage:"url('".concat(e.getImageUrl(),"')"),title:e.getTitle(),playNext:!0,autoPlayNext:!0,onClickLoader:()=>{r(),le(e.getConfigUrl()),n({jsonUrl:e.getConfigUrl()})},onClickCancel:()=>{this.autoNextTimeout&&(clearTimeout(this.autoNextTimeout),this.autoNextTimeout=!1)},playerId:c}),aspect:"full-size"}),this.autoNextTimeout||(this.autoNextTimeout=setTimeout((()=>{r(),le(e.getConfigUrl()),n({jsonUrl:e.getConfigUrl()})}),5e3)))}else l&&!this.autoNextTimeout&&(this.autoNextTimeout=setTimeout((()=>{clearTimeout(this.autoNextTimeout),this.autoNextTimeout=!1,this.sendPrevNextItemEvent({event:"nextItem",item:e})}),5e3)),t({content:a.createElement(Ia,{backgroundImage:"url('".concat(e.getImageUrl(),"')"),title:e.getTitle(),duration:e.getDuration(),playNext:!0,autoPlayNext:l,onClickLoader:()=>{clearTimeout(this.autoNextTimeout),this.autoNextTimeout=!1,this.sendPrevNextItemEvent({event:"nextItem",item:e})},onClickCancel:()=>{this.resetPlayerDisplay()},playerId:c}),aspect:"full-size",isClosable:!1,shouldStop:!1})}function Ra(){const{hideOverlay:e}=this.props;this.autoNextTimeout&&(clearTimeout(this.autoNextTimeout),this.autoNextTimeout=!1),setTimeout(e,500)}function Da(){const{pluginController:e}=this;this.setState({audioTracks:null,textTracks:null}),this.vendorPlayer.api.stop&&this.vendorPlayer.api.stop(),this.vendorPlayer.events.emit("idle",{reason:"idle"}),this.vendorPlayer.videojsInstance&&this.vendorPlayer.videojsInstance.dispose&&(this.vendorPlayer.videojsInstance.dispose(),this.vendorPlayer.videojsInstance=null);const t=this.vendorPlayer.events._events["arte_vp.destroyed"];if(this.vendorPlayer.events.removeAllListeners(),Array.isArray(t))for(let e=0;e<t.length;e+=1)this.vendorPlayer.events.on("arte_vp.destroyed",t[e]);else this.vendorPlayer.events.on("arte_vp.destroyed",t);this.vendorPlayer.events.emit("arte_vp.destroyed"),e.pluginView&&Object.keys(e.pluginView).forEach((t=>{"function"==typeof e.pluginView[t].destroy&&e.pluginView[t].destroy()}))}function Oa(){this.playerRef.querySelector(".rc-slider-handle")&&this.playerRef.querySelector(".rc-slider-handle").setAttribute("aria-label",s.ZP.t("arialabel__progress_slider"))}function Na(){const e=this;if(e.playerRef.querySelector(".rc-slider-handle")){const t=qe(this.vendorPlayer.api.getPosition()).split(":");let i="";if(3===t.length){const a="".concat(t[0]," ").concat(1===parseInt(t[0],10)?s.ZP.t("arialabel__timeline_cursor_hour"):s.ZP.t("arialabel__timeline_cursor_hours")),o="".concat(t[1]," ").concat(1===parseInt(t[1],10)?s.ZP.t("arialabel__timeline_cursor_minute"):s.ZP.t("arialabel__timeline_cursor_minutes")),n="".concat(t[2]," ").concat(1===parseInt(t[2],10)?s.ZP.t("arialabel__timeline_cursor_second"):s.ZP.t("arialabel__timeline_cursor_seconds"));i="".concat(a," ").concat(o," ").concat(n),e.playerRef.querySelector(".rc-slider-handle").setAttribute("aria-valuetext",i)}else{const a="".concat(t[0]," ").concat(1===parseInt(t[0],10)?s.ZP.t("arialabel__timeline_cursor_minute"):s.ZP.t("arialabel__timeline_cursor_minutes")),o="".concat(t[1]," ").concat(1===parseInt(t[1],10)?s.ZP.t("arialabel__timeline_cursor_second"):s.ZP.t("arialabel__timeline_cursor_seconds"));i="".concat(a," ").concat(o),e.playerRef.querySelector(".rc-slider-handle").setAttribute("aria-valuetext",i)}}}function ja(){const e=this;this.onAvpMouseMove(),e.playerRef.removeEventListener("mousemove",this.onAvpMouseMove),e.playerRef.removeEventListener("mouseleave",this.onAvpMouseLeave),e.playerRef.removeEventListener("touchmove",this.onAvpMouseMove),e.playerRef.removeEventListener("keyup",this.onAvpKeyUp),e.playerRef.addEventListener("mousemove",this.onAvpMouseMove),e.playerRef.addEventListener("mouseleave",this.onAvpMouseLeave),e.playerRef.addEventListener("touchmove",this.onAvpMouseMove,{passive:!0}),e.playerRef.addEventListener("keyup",this.onAvpKeyUp)}function Ba(e){const t=[],{dockButtons:i}=this.state;i.forEach((i=>{i.key!==e&&t.push(i)})),this.setState({dockButtons:t})}function za(e){const{dockButtons:t}=this.state,i=[...t];Array.isArray(e)?i.push(...e):i.push(e);const a=["chapters","info"];i.sort(((e,t)=>{const i=a.includes(e.key),s=a.includes(t.key);return i&&s?a.indexOf(e.key)-a.indexOf(t.key):i?-1:s?1:0})),this.isComponentMounted&&this.setState({dockButtons:i})}function Ua(){const e=this,{lang:t}=this.props,i=()=>{const{getAvailableTextTracks:e,getTextTrackKind:t}=this.vendorPlayer.api,i=e(),a=function(){const e=$("arte_vp.userPreferredCaption");if(e){if("none"===e)return"none";const[t,i]=e.split("-");return{language:t,kind:i}}return!1}();if("none"===a)this.vendorPlayer.api.disableAllTextTracks(),this.vendorPlayer.api.activateForcedTextTracks();else{const{language:e,kind:s}=a;if(e){const a=i.filter((i=>i.language===e&&(t(i)===s||void 0===s)&&!this.vendorPlayer.api.isForcedTextTrack(i)));a.length>0&&(this.vendorPlayer.api.disableAllTextTracks(),a[0].mode="showing")}}},a=()=>{const{getAvailableTextTracks:e}=this.vendorPlayer.api,t=e();t.find(((e,i)=>!0===e.default&&(t[i].mode="showing",!0)))};this.vendorPlayer.events.on("firstFrame",(()=>{setTimeout((()=>{a(),i()}),10),de.isSafariDesktop()&&"boolean"==typeof e.playerRef.querySelector("video").webkitClosedCaptionsVisible&&!1===e.playerRef.querySelector("video").webkitClosedCaptionsVisible&&(e.playerRef.querySelector("video").webkitClosedCaptionsVisible=!0)})),this.vendorPlayer.events.on("changeaudiotrack",(()=>{setTimeout((()=>{this.vendorPlayer.api.activateForcedTextTracks()}),0)}))}function Va(){this.vendorPlayer.events.on("addqualitylevel",(e=>{if(ne()&&"auto"!==ne()&&this.vendorPlayer.api.isQualityInCurrentStream(ne()))if("".concat(e.height,"p")===ne())e.enabled(!0);else try{e.enabled(!1)}catch(e){console.info(e)}})),this.vendorPlayer.events.on("addqualitylevel",(()=>{this.storeQualitySources()}))}function Za(){const{playerId:e}=this.props,t=this.vendorPlayer.videojsInstance.qualityLevels();let i=0;const a=[],o="auto"===ne()||!ne()||!this.vendorPlayer.api.isQualityInCurrentStream(ne());let n;t.levels_.forEach((t=>{const{height:r}=t;n!==r&&r&&(0===i&&(a.push({index:i,id:"quality_".concat(i),title:"Auto",label:"".concat(s.ZP.t("arialabel__quality_select")," Auto"),height:1e9,selected:o,onClick:t=>{this.vendorPlayer.events.emit("arte_vp.qualityChanged",{newQuality:"auto"}),ge("qualitySources",t,e),this.vendorPlayer.api.setCurrentQuality("auto"),re("auto")}}),i+=1),a.push({index:i,id:"quality_".concat(i),title:"".concat(r,"p"),label:"".concat(s.ZP.t("arialabel__quality_select")," ").concat("".concat(r,"p")),height:r,selected:!o&&t.enabled,onClick:t=>{this.vendorPlayer.events.emit("arte_vp.qualityChanged",{newQuality:"".concat(r,"p")}),ge("qualitySources",t,e),this.vendorPlayer.api.setCurrentQuality("".concat(r,"p")),re("".concat(r,"p"))}}),i+=1,n=r)})),ge("qualitySources",a,e)}function Ha(){const{isChapterEdit:e,jsonUrl:t}=this.props;return this.apiModel.isEmbedAllowed()&&!ze(t)&&!e}function qa(e){const{hideOverlay:t}=this.props;le(e.item.getConfigUrl()),t(),this.vendorPlayer.events.emit("arte_vp.prevNextItem",{event:e.event,url:e.item.getInfoLink(),jsonUrl:e.item.getConfigUrl()})}function Wa(){const{jsonUrl:e}=this.props,t=ce(e),a=this.apiModel.isEpisodic();let s=!1;try{(i.g.parent.location.search.indexOf("xtor=")>-1||i.g.parent.location.hash.indexOf("xtor")>-1)&&(s=!0)}catch(e){console.error(e)}return t&&a||s}function Ga(){const{playerId:e}=this.props;this.playerRef.querySelector(".avp-preview-play-button")&&(this.vendorPlayer.api.play(),this.playerRef.querySelector(".avp-preview-play-button").classList.add("avp-scaleIn-scaleOut"),this.playerRef.querySelector(".avp-preview").classList.add("avp-fadeOut"),setTimeout((()=>{ge("previewState","hidden",e)}),500))}function Ka(){const{playerId:e}=this.props,t=ye("userFirstClicked",e),i=ye("isAutostart",e),a=ye("mute",e);if(i&&this.vendorPlayer.api.getMute()&&!t)return a||oe("mute",!0),void ge("mute",!0,e);const s=se("mute")||ye("mute",e),o=se("volume");ge("mute",s,e),ge("volume",o,e),s?this.vendorPlayer.api.setMute(!0):!1!==o&&(this.vendorPlayer.api.setMute(!1),this.vendorPlayer.api.setVolume(o))}async function Xa(){const e=this,{env:t,getPlaylistItems:a,version:s,displayOverlay:o,hideOverlay:n,apiPlaylistModel:r,getIllicoProgramsFromProps:l,onChaptersAvailable:c,isPlaylist:d,jsonUrl:p,mode:u,displayMessageBox:h,isTouch:_,isIllico:m,vast:v,stream:g,playerId:y,avpRef:b,loop:f,autoplay:k,sendTracking:C}=this.props;try{await He("//static-cdn.arte.tv/static/artevp/shared/vendor/estat/mu-7.2.js",document.getElementsByTagName("script")[0],!0,!0,"tagco")}catch(e){console.info("estat lib has been blocked by browser")}if(n(),c(e.apiModel),g&&e.videojsConfig.setSources([g]),this.vendorPlayer.init({videojsConfig:e.videojsConfig.setMuted(y),env:t,apiModel:e.apiModel,arteVpVersion:s,autoplay:k,playerRef:this.playerRef,playerId:y}),this.pluginController.init({loop:f,step:"player",sendTracking:C,apiModel:e.apiModel,videojsConfig:e.videojsConfig,isPlaylist:d,getPlaylistItems:a,playerRef:e.playerRef,removeDockButton:e.removeDockButton,env:t,setLastClickedElement:e.setLastClickedElement,arteVpVersion:s,displayOverlay:o,hideOverlay:n,displayMessageBox:h,mode:u,playerId:y,onChangeVolume:this.onChangeVolume,onClickMute:this.onClickMute,onClickForward:this.onClickForward,onClickBackward:this.onClickBackward,isTouch:_,displayControlsAndRefreshTimeout:()=>jt(this),shouldSkipAds:this.shouldSkipAds(),vast:v}),f&&this.vendorPlayer.events.on("complete",(()=>{this.vendorPlayer.api.seek(0),this.vendorPlayer.api.play()})),this.vendorPlayer.events.on("pause",(()=>ge("state","paused",y))),this.vendorPlayer.events.on("play",(()=>ge("state","playing",y))),this.vendorPlayer.events.on("idle",(()=>ge("state","idle",y))),this.vendorPlayer.events.on("complete",(()=>ge("state","complete",y))),this.vendorPlayer.events.on("firstFrame",(()=>{if(this.nextItem=null,this.previousItem=null,r)r.getPlaylistItems().length>r.getPlaylistIndexFromUrl(ye("providerId",y))+1&&(this.nextItem=new De(r.getPlaylistItems()[r.getPlaylistIndexFromUrl(ye("providerId",y))+1]),this.vendorPlayer.events.emit("arte_vp.playlistFetched"));else if(d&&e.apiModel.getPlaylistUrl()){const e=l();m&&e&&(this.nextItem=new De(e[e.getPlaylistCurrentIndex()+1]),this.vendorPlayer.events.emit("arte_vp.playlistFetched"))}else!Ke()&&e.apiModel.getPlaylistUrl()&&this.getPrevNextItem(e.apiModel.getPlaylistUrl(),(e=>{e.nextItem&&(this.nextItem=e.nextItem),e.prevItem&&(this.previousItem=e.prevItem),this.vendorPlayer.events.emit("arte_vp.playlistFetched")}))})),this.vendorPlayer.events.on("arte_vp.playlistFetched",(()=>{if(!r&&this.nextItem&&!m){let e=p.match(/\w{6}-\w{3}-\w/g);e&&e.length>0&&(e=e[0],e.split("-")[0]===this.nextItem.get("providerId").split("-")[0]&&ge("hasNextItem",!0,y))}rt.centerPlaylistItem(b)})),this.vendorPlayer.events.on("error",(e=>{this.onError(e)})),this.vendorPlayer.events.on("complete",this.onCompleteEventHandler),this.vendorPlayer.events.on("complete",(()=>{this.nextItem&&"trailer"!==u?this.displayNextItem(this.nextItem):this.resetPlayerDisplay()})),this.vendorPlayer.events.on("complete",(()=>{const{isPictureInPictureEnabled:e}=this.props;e&&this.onClickPicturePicture(null,y)})),this.vendorPlayer.events.on("complete",(()=>{ge("playerStatus","complete",y),this.setState({isLoading:!1})})),this.vendorPlayer.events.on("buffer",(()=>{this.setState({isLoading:!0})})),this.vendorPlayer.events.on("bufferChange",(()=>{this.setState({isLoading:!1})})),this.vendorPlayer.events.on("arte_vp.picturePictureClicked",(()=>{this.onClickPicturePicture(null,y)})),this.vendorPlayer.events.on("firstFrame",(()=>{this.vendorPlayer.events.on("seek",(()=>this.setState((()=>({isSeeking:!0,isLoading:!0}))))),this.vendorPlayer.events.on("seeked",(()=>this.setState((()=>({isSeeking:!1,isLoading:!1})))))})),this.vendorPlayer.events.on("firstFrame",(()=>{this.accessibilityTweaks();const t=e.playerRef.querySelector("video");t.addEventListener("webkitplaybacktargetavailabilitychanged",(e=>{"available"===e.availability&&this.setState((()=>({isAirPlayAvailable:!0})))})),t.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",(()=>{ge("isAirPlayActive",e.playerRef.querySelector("video").webkitCurrentPlaybackTargetIsWireless,y)}))})),this.vendorPlayer.events.on("cast",(e=>{this.setState((()=>({isCastAvailable:e.available,isChromeCasting:e.active})));const t=()=>{const e=i.g.cast.framework.CastContext.getInstance().getCurrentSession(),{tracks:t}=e.getMediaSession().media,a=[],s=this.vendorPlayer.api.getActiveTextTrack({withForced:!1}),o=this.vendorPlayer.api.getActiveAudioTrack();s&&a.push(t.filter((e=>e.name===s.id&&"TEXT"===e.type))[0].trackId),o&&a.push(t.filter((e=>e.name===o.id&&"AUDIO"===e.type))[0].trackId);const n=new chrome.cast.media.EditTracksInfoRequest(a);e.getMediaSession().editTracksInfo(n)};e.active?(this.vendorPlayer.events.once("play",(()=>{t()})),this.vendorPlayer.events.on("changeaudiotrack",t),this.vendorPlayer.events.on("changetexttrack",t)):(this.vendorPlayer.events.off("changeaudiotrack",t),this.vendorPlayer.events.off("changetexttrack",t))})),this.vendorPlayer.events.on("play",(()=>{let t=!1;de.getBrowserInfo()&&"Safari"===de.getBrowserInfo().name&&parseInt(de.getBrowserInfo().major,10)<11&&(t=!0);const i=e.playerRef.querySelector("video");!de.mobile()&&i&&i.webkitSupportsPresentationMode&&!t&&this.setState((()=>({isPipDevice:!0})))})),this.vendorPlayer.events.on("firstFrame",(()=>{const e=this.vendorPlayer.api.getSpriteData();e&&je({url:e.vttUrl}).then((t=>{t&&(this.vttData=function(e,t){const i=[],a=e.split(/[\r\n][\r\n]/i);return a.forEach(((e,s)=>{if(e.match(/([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?( ?--> ?)([0-9]{2}:)?([0-9]{2}:)?[0-9]{2}(.[0-9]{3})?.*/gi)){const o=e.split(/ ?--> ?/i),n=o[0],r=o[1],l=function(e,t){const i={},a=t+e;if(!a.match(/#xywh=/i))return i.background='url("'.concat(a,'")'),i;const s=function(e){const t=e.split(/#xywh=/i),i=t[0],a=t[1].match(/[0-9]+/gi);return{x:a[0],y:a[1],w:a[2],h:a[3],image:i}}(a);return i.background='url("'.concat(s.image,'") no-repeat -').concat(s.x,"px -").concat(s.y,"px"),i.width="".concat(s.w,"px"),i.height="".concat(s.h,"px"),i.url=s.image,i}(a[s+1],t);i.push({start:_a(n),end:_a(r),css:l})}})),i}(t.data,e.spriteBaseUrl))}))})),this.vendorPlayer.events.on("firstFrame",(()=>{this.hidePreviewAndPlay()})),this.vendorPlayer.events.on("autoplayOk",(()=>{this.hidePreviewAndPlay()})),this.vendorPlayer.events.on("firstFrame",(()=>{const{lang:e}=this.props,{language:t,kind:i}=function(){const e=$("arte_vp.preferredAudio");if(e){const t=e.indexOf("-"),[i,a]=[t>-1?e.substring(0,t):e,t>-1?e.substring(t+1):void 0];return{language:i,kind:a}}return!1}(),a=this.vendorPlayer.api.getAvailableAudioTracks();let s=!1;for(let o=0;o<a.length;o+=1){const n=a[o];n.enabled=!1,s||(t||i||n.language!==e.substr(0,2))&&(n.language!==t||n.kind!==i&&void 0!==i)||(n.enabled=!0,s=!0)}s||(a[0].enabled=!0),this.setState((()=>({audioTracks:a})))})),this.vendorPlayer.events.on("time",this.realTimeAccessibilityTweaks),this.listenToQuality(),this.listenToTextTracks(),!g){if(this.apiModel.getStreams()&&Array.isArray(this.apiModel.getStreams())&&this.apiModel.getStreams().length>0&&this.apiModel.getStreams()[0].segments){const{segments:e}=this.apiModel.getStreams()[0];ge("segments",e,y)}ge("isEpisodic",e.apiModel.isEpisodic(),y)}this.manageshowControls()}function Ja(e){const{jsonUrl:t,slot:i}=this.props;return Ne.getConfigType(e.jsonUrl)===Ne.getConfigType(t)&&t!==e.jsonUrl||i!==e.slot}function Qa(){const e=this,{hideOverlay:t,displayOverlay:o,getPlaylistItems:n,avpRef:r,reload:l,showPlaylist:c,version:d,onClickButtonChapters:p,jsonUrl:u,mode:h,isChapterEdit:_,env:m,displayMessageBox:v,isTouch:g,autoplay:y,stream:b,playerId:f,getExternalInterface:k,previewData:C,loop:P,tcStartFrom:E,isPlaylist:S,lang:I,slot:w,audioVersion:x}=this.props,T=Ie.modes[h].plugins,A=e.apiModel.isLive()&&!b,F=[];let M=!!this.apiModel.isAutoplay()||S||_||!isNaN(E);"1"===y||"true"===y||"if_available"===y?M=!0:"0"!==y&&"false"!==y||(M=!1),ge("isAutostart",M,f);const L=ce(u);if("if_available"!==y&&"false"!==y||L||ge("previewState","display",f),x&&this.apiModel.hasStream()){const e=this.apiModel.getVersionsOfAllStreams().find((e=>e.code===x));e&&(te("".concat(e.audioLanguage).concat(e.audioDescription?"-main-desc":"")),ie(e.subtitleLanguage&&"und"!==e.subtitleLanguage?"".concat(e.subtitleLanguage,"-").concat(e.closedCaptioning?"captions":"subtitles"):""))}this.setState({isLive:A,dockButtons:[],openedOverlayCount:0},(()=>{"trailer"!==h&&e.apiModel.getTitleFromPreviewDataFirst()&&e.apiModel.getTeaserText()&&F.push(a.createElement(Ea,{key:"info",icon:"Info",onClickButton:e=>this.vendorPlayer.events.emit("arte_vp.info_open",e),card:a.createElement(Ci,{alignLeft:!1},a.createElement("div",{className:"avp-card__title"},s.ZP.t("info__hover-link"))),"aria-label":s.ZP.t("info__detail_link"),hiddenTitle:s.ZP.t("info__detail_link")})),T.includes("chapters")&&(this.apiModel.getChapters()&&this.apiModel.getChapters().length>0||_)&&F.push(a.createElement(Ea,{key:"chapters",onClickButton:p,icon:"Menu",card:a.createElement(Ci,{alignLeft:!1},a.createElement("div",{className:"avp-card__title"},s.ZP.t("chapters__chapters_list_title"))),hiddenTitle:s.ZP.t("arialabel__show_chapters")})),T.includes("share")&&this.shouldDisplayShareButton()&&F.push(a.createElement(Ea,{key:"shareBox",onClickButton:e=>this.vendorPlayer.events.emit("arte_vp.share_open",e),icon:"Share",buttonId:"avp-button-share",card:a.createElement(Ci,{alignLeft:!1},a.createElement("div",{className:"avp-card__title"},s.ZP.t("share__share_button_title"))),hiddenTitle:s.ZP.t("arialabel__share")})),this.apiModel.hasBadgeSticker()&&this.apiModel.getBadgeStickers().forEach((e=>{F.push(a.createElement(Ea,{key:"badge",buttonClass:"seeProgram",title:e.label,accessibility:!1}))})),this.addDockButton(F)})),A&&(this.setState((()=>({liveStreamProgramId:e.apiModel.getProviderId()}))),ge("liveStreamProgramId",e.apiModel.getProviderId(),f)),ge("providerId",e.apiModel.getProviderId(),f);const R=this.apiModel.getBadgeStickers();let D=!1;if(Array.isArray(R))for(let e=0;e<R.length;e+=1)"TRAILER"===R[e].code&&(D=!0);ge("isTrailerVideo",D&&!!this.apiModel.getReplayUrl(),f),ge("previewData",C,f),ge("controlRightLabelOpen",!1,f),this.pluginController.init({loop:P,step:"teaser",apiModel:e.apiModel,videojsConfig:e.videojsConfig,getPlaylistItems:n,playerRef:e.playerRef,avpRef:r,reload:l,displayOverlay:o,showPlaylist:c,arteVpVersion:d,shouldDisplayShareButton:e.shouldDisplayShareButton,handleNext:e.handleNext,handlePrevious:e.handlePrevious,mode:h,playerId:f,addDockButton:e.addDockButton,hideOverlay:t,displayMessageBox:v,removeDockButton:e.removeDockButton,setLastClickedElement:e.setLastClickedElement,onClickFullscreen:this.onClickFullScreen,onChangeVolume:this.onChangeVolume,onClickMute:this.onClickMute,onClickForward:this.onClickForward,onClickBackward:this.onClickBackward,isTouch:g,displayControlsAndRefreshTimeout:()=>jt(this),shouldSkipAds:this.shouldSkipAds(),jsonUrl:u,lang:I,tcStartFrom:E,slot:w}),e.apiModel.isLive()||(this.pluginController.pluginView.user=new Ca({commonLogInfos:{renderingPlace:We(),jsonUrl:u,env:m},eventEmitter:this.vendorPlayer.events,userInfo:this.userInfo})),this.vendorPlayer.events.on("play",(()=>{ge("playerStatus","playing",f),this.setState({isSeeking:!1,isLoading:!1})})),this.vendorPlayer.events.on("pause",(()=>ge("playerStatus","paused",f))),this.vendorPlayer.events.on("adImpression",(()=>this.restoreVolume())),this.vendorPlayer.events.on("firstFrame",(()=>{this.restoreVolume(),this.setVideoDuration()}));const O=e=>{const{duration:t}=this.state;!t&&e.duration>0&&e.position>0&&(this.setState({duration:e.duration}),this.vendorPlayer.events.off("adTime",O))};this.vendorPlayer.events.on("adMetadata",(e=>{this.setState({duration:e.duration}),e.duration>0&&this.vendorPlayer.events.off("adTime",O)})),this.vendorPlayer.events.on("adTime",O),this.vendorPlayer.events.on("arte_vp.allChecked",(()=>this.init())),this.launchChecks(),this.externalInterface=new Pa({playerId:f,vendorPlayer:this.vendorPlayer}),k(this.externalInterface),i.g.playerConfig&&(document.title=e.apiModel.getTitleFromPreviewDataFirst())}function Ya(e={moralityChecked:!1}){const{jsonUrl:t,mode:i,autoplay:o,stream:n,playerId:r,redirectToAgeVerification:l,redirectToInfoPage:c,onRightsFuture:d,displayOverlay:p,hideOverlay:u,admin:h}=this.props;ha({apiModel:this.apiModel,jsonUrl:t,mode:i,autoplay:o,stream:n,moralityChecked:e.moralityChecked}).then((e=>(this.vendorPlayer.events.emit("arte_vp.allChecked"),e))).catch((e=>{const t=e=>{e.preventDefault(),this.launchChecks({moralityChecked:!0}),u()},i=e=>{e.preventDefault(),p({content:a.createElement("p",{dangerouslySetInnerHTML:{__html:s.ZP.t("morality__video_playing_denied")}}),aspect:null,isClosable:!1,shouldStop:!1})},o={};switch(e.key){case"rights.future":if(h)this.vendorPlayer.events.emit("arte_vp.allChecked");else{const t=[];t.push(a.createElement(Ea,{key:"shareBox",onClickButton:()=>{ge("isShareBoxOpen",!0,r),ge("isShareBoxFromCountdown",!0,r)},icon:"Share",card:a.createElement(Ci,{alignLeft:!1},a.createElement("div",{className:"avp-card__title"},s.ZP.t("share__share_button_title")))})),d(e,this.apiModel,t,this.vendorPlayer)}break;case"videoWarning.displayed":case"morality.displayed":p({content:la({redirectToAgeVerification:l,redirectToInfoPage:c,apiModel:this.apiModel,isConnected:this.userInfo.isConnected,onClickQuit:i,onClickConfirm:t}),aspect:null,isClosable:!1,shouldStop:!1});break;default:o.message=e.message,"sources.notEncoded"===e.key&&Ke()&&(e.title&&(o.title=e.title),e.subtitle&&(o.subtitle=e.subtitle)),p({content:a.createElement("span",{dangerouslySetInnerHTML:{__html:pt(o)}}),aspect:"opaque",isClosable:!1})}return e}))}function $a(){this.onCompleteEventHandler=Qt.bind(this),this.onError=$t.bind(this),this.onClickMute=Ht.bind(this),this.onChangeVolume=Zt.bind(this),this.onClickAirPlay=Ut.bind(this),this.onClickClickCatcher=Gt.bind(this),this.onClickAd=Kt.bind(this),this.onClickPlay=Yt.bind(this),this.onClickFullScreen=qt.bind(this),this.onClickPicturePicture=Wt.bind(this),this.onClickButtonSeeProgram=ti.bind(this),this.onClickForward=Bt.bind(this),this.onClickBackward=zt.bind(this),this.onAvpMouseMove=ci.bind(this),this.onAvpMouseLeave=di.bind(this),this.onAvpKeyUp=pi.bind(this),this.updateOpenedOverlaysCount=ui.bind(this),this.getVideoData=ka.bind(this),this.shouldDisplayShareButton=Ha.bind(this),this.getPrevNextItem=Fa.bind(this),this.onClickPrevNext=ni.bind(this),this.handleNext=xa.bind(this),this.handlePrevious=Ta.bind(this),this.shouldSkipAds=Wa.bind(this),this.realTimeAccessibilityTweaks=Na.bind(this),this.listenToQuality=Va.bind(this),this.init=Xa.bind(this),this.sendPrevNextItemEvent=qa.bind(this),this.isNewVideo=Ja.bind(this),this.postFetchInit=Qa.bind(this),this.shouldReloadPlaylist=Ma.bind(this),this.addDockButton=za.bind(this),this.removeDockButton=Ba.bind(this),this.setLastClickedElement=Aa.bind(this),this.listenToTextTracks=Ua.bind(this),this.storeQualitySources=Za.bind(this),this.destroy=Da.bind(this),this.manageshowControls=ja.bind(this),this.accessibilityTweaks=Oa.bind(this),this.displayNextItem=La.bind(this),this.resetPlayerDisplay=Ra.bind(this),this.setVideoDuration=wa.bind(this),this.restoreVolume=Ka.bind(this),this.hidePreviewAndPlay=Ga.bind(this),this.launchChecks=Ya.bind(this)}var es=class extends a.Component{constructor(e){super(e),this.props=e,this.rootRef=a.createRef(),this.isEmbedValue=Ke();const{vendorPlayer:t,reload:i}=this.props;$a.bind(this)(),this.onTimeEventHandlerRef=Jt.bind(this),this.throttleOnTimeEventHandler=(0,c.P)(1e3,(()=>{this.onTimeEventHandlerRef()})),t.events.on("arte_vp.click_forward",(e=>{this.setState({position:e})})),t.events.on("arte_vp.click_backward",(e=>{this.setState({position:e})})),this.isComponentMounted=!1,this.state={vendorPlayer:t,openedOverlayCount:0,dockButtons:[],isChromeCasting:!1,isLoading:!0,position:t.api.getPosition?t.api.getPosition():0},this.vendorPlayer=t,this.pluginController=new Rt,this.pluginController.vendorPlayer=this.vendorPlayer,this.clickHandlerTime=0,this.reload=i,this.vendorPlayer.events.once("firstFrame",(()=>{this.externalInterface.onClickPlay=this.onClickPlay,this.externalInterface.handleNext=this.handleNext,this.externalInterface.handlePrevious=this.handlePrevious})),this.vendorPlayer.events.on("loadstart",(()=>{this.externalInterface.proxyFunctions=t.api}))}async componentDidMount(){const e=this;this.isComponentMounted=!0;const{vendorPlayerSuffixId:t,jsonUrl:a,isIllico:s,hideOverlay:o,playerId:n,stream:r}=this.props;this.userInfo=await(0,h.bG)(),e.getVideoData((()=>{if(!this.isComponentMounted)return;e.postFetchInit();let l={};const c=ye("previewData",n);r||c||(l.title=e.apiModel.getTitle(),l.subtitle=e.apiModel.getSubtitle(),l.image=e.apiModel.getImageUrl(),ge("previewData",l,n)),this.apiModel.hasBadgeSticker()&&(l=ye("previewData",n),l.stickers=[],this.apiModel.getBadgeStickers().forEach((e=>{l.stickers.push(e)})),ge("previewData",l,n)),clearInterval(i.g["arte_vp_apiRefresh_".concat(t)]),i.g["arte_vp_apiRefresh_".concat(t)]=setInterval((()=>{const{isLive:t}=e.state;t&&(this.cancelRequest(),this.setState({streamCount:e.apiModel.getStreams().length}),this.getVideoData((()=>{new _i({apiModel:e.apiModel,jsonUrl:a,eventEmitter:this.vendorPlayer.events,emitIfNoRightsOnly:!0,hideOverlay:o}),s&&e.state.isLive&&(ge("liveStreamProgramId",e.apiModel.getProviderId(),n),e.setState({liveStreamProgramId:e.apiModel.getProviderId()})),ge("providerId",e.apiModel.getProviderId(),n)}),{jsonUrl:a}))}),1e3*Ie.refresh_time.live)}))}UNSAFE_componentWillUpdate(e){this.isNewVideo(e)&&this.destroy()}componentDidUpdate(e,t){const{lastClickedElement:i,streamCount:a}=this.state,{getIllicoProgramsFromProps:s,setLiveItemInPlaylist:o,jsonUrl:n}=this.props;this.rootRef.current&&this.rootRef.current.childrenRefs.length&&(this.playerRef=this.rootRef.current.childrenRefs[0]);const r=this;this.isNewVideo(e)&&(this.cancelRequest(),this.getVideoData((()=>{r.postFetchInit()}))),this.shouldReloadPlaylist(t)&&(s(),r.apiModel.getStreams().length!==a&&this.reload({jsonUrl:"".concat(n,"#").concat(Math.random()),slot:null})),o(),this.playerRef&&i&&this.playerRef.querySelector(i)&&(this.playerRef.querySelector(i).focus(),this.setState((()=>({lastClickedElement:null})))),this.vendorPlayer.events.removeListener("time",this.throttleOnTimeEventHandler),this.vendorPlayer.events.on("time",this.throttleOnTimeEventHandler)}componentDidCatch(e,t){console.error(e,t)}componentWillUnmount(){this.isComponentMounted=!1,this.destroy(),this.throttleOnTimeEventHandler.cancel(),this.vendorPlayer.events.removeListener("time",this.throttleOnTimeEventHandler)}render(){if(!this.apiModel)return null;const{hideOverlay:e,hideAdsOverlay:t,displayOverlay:i,displayAdsOverlay:o,getPlaylistItems:n,isIllico:r,isPlaylist:l,overlayOption:c,adsOverlayOption:d,messageBoxOption:p,onClickPlaylist:u,onClickIllico:_,onClickBackToReplay:m,onClickBackToLive:v,isNoControl:g,apiPlaylistModel:y,isTouch:b,isRightColumnOpen:f,mode:k,responsiveState:P,previewState:E,playerStatus:S,reload:I,isAd:w,isAdCtaAvailable:x,stream:T,playerId:A,lang:F,loop:M,tcStartFrom:L,slot:R}=this.props,{isLoading:D,showControls:O,isLive:N,dockButtons:j,duration:B,isPipDevice:z,isAirPlayAvailable:U,isCastAvailable:V,isChromeCasting:Z,audioTracks:H,position:G}=this.state;let K=!f||!(l&&y&&!b&&"small"!==P);K=K&&!(w&&"hidden"===E);const X=K;return a.createElement(C.Kb,{id:"rightClick-".concat(A),ref:this.rootRef,storeRef:!0},a.createElement("div",{className:"avp-player avp-state-".concat(S).concat(O?" showControls":"").concat(N?" isLive":"").concat(w?" avp-ad-active":" avp-ad-inactive").concat(Z?" avp-cast-active":" avp-cast-inactive").concat(M&&"display"!==E&&!N&&(B-G<2||0===G)?" looping":"")},a.createElement("div",{className:"avp-clickcatcher ".concat(de.isSafariLowerThan12()?"isSafariLowerThanTwelve":""),onClick:e=>this.onClickClickCatcher(e,A),tabIndex:O?"-1":"0"},!de.isSafariLowerThan12()&&a.createElement(aa,{vendorPlayer:this.vendorPlayer,playerId:A}),D&&a.createElement("div",{className:"avp-loader"},a.createElement(h.aN,{label:s.ZP.t("loader__loading_text"),style:"small"===P?"default":"player"})),a.createElement(Xi,{open:p.open,content:p.content,playerId:A}),!de.isSafariLowerThan12()&&a.createElement($i,{vendorPlayer:this.vendorPlayer,reload:I,apiModel:this.apiModel,handleNext:this.handleNext,playerId:A}),"display"===E&&a.createElement("div",{className:"avp-preview",style:{backgroundImage:"url(".concat(this.apiModel.getImageUrlFromPreviewDataFirst(),")")}},a.createElement("div",{className:"avp-preview-play-button"},a.createElement(at,{tabIndex:0,name:"Play",className:"avp-icon-playback",title:s.ZP.t("arialabel__play_button"),ariaLabel:s.ZP.t("arialabel__play_button_with_title",{"Program Title":this.apiModel.getTitleFromPreviewDataFirst()})}))),!g&&a.createElement("div",{className:w&&x?"avp-content avp-content-ads":"avp-content"},X&&!T&&"light"!==k&&a.createElement(Qi,{title:this.apiModel.getTitleFromPreviewDataFirst(),subtitle:this.apiModel.getSubtitleFromPreviewDataFirst(),providerId:this.apiModel.getProviderId(),buttons:j,eventEmitter:this.vendorPlayer.events,playerId:A}),!de.isSafariLowerThan12()&&"display"!==E&&a.createElement("div",{className:w?"avp-controlbar avp-ad":"avp-controlbar"},a.createElement(vi,{apiModel:this.apiModel,apiPlaylistModel:n,isLive:N,duration:B,vendorPlayer:this.vendorPlayer,onTimeEventHandler:Jt,playerRef:this.playerRef,chapterCollection:this.chapterCollection.toJSON(),eventEmitter:this.vendorPlayer.events,updateOpenedOverlaysCount:this.updateOpenedOverlaysCount,playerId:A,position:G,timelineSlider:a.createElement(Ti,{isLive:N,duration:B,chapterCollection:this.chapterCollection.toJSON(),vendorPlayer:this.vendorPlayer,onTimeEventHandler:Jt,playerRef:this.playerRef,proxyFunctions:this.vendorPlayer.api,eventEmitter:this.vendorPlayer.events,vttData:this.vttData}),controlLeft:a.createElement(Si,{isLive:N,onClickPlaylist:u,onClickIllico:_,onClickPlay:this.onClickPlay,onClickLive:this.onClickLive,onClickReplay:this.onClickReplay,nextItem:this.nextItem,previousItem:this.previousItem,isIllico:r,isTouch:b,apiPlaylistModel:y,displayOverlay:i,apiModel:this.apiModel,onClickPrevious:this.handlePrevious,onClickNext:this.handleNext,onClickBackToReplay:m,onClickBackToLive:v,onClickForward:this.onClickForward,onClickBackward:this.onClickBackward,title:this.apiModel.getTitleFromPreviewDataFirst(),playerId:A,lang:F,eventEmitter:this.vendorPlayer.events}),controlRight:a.createElement(qi,{apiPlaylistModel:y,audioTracks:H,displayOverlay:i,displayAdsOverlay:o,eventEmitter:this.vendorPlayer.events,isAirPlayAvailable:U,isCastAvailable:V,isChromeCasting:Z,isEmbed:this.isEmbedValue,isLive:N,isPipDevice:z,nextItem:this.nextItem,onChangeVolume:this.onChangeVolume,onClickAirPlay:this.onClickAirPlay,onClickFullScreen:this.onClickFullScreen,onClickMute:this.onClickMute,onClickNext:this.handleNext,onClickPicturePicture:this.onClickPicturePicture,onClickPrevious:this.handlePrevious,onClickVolume:Vt,playerId:A,playerRef:this.playerRef,previousItem:this.previousItem,proxyFunctions:this.vendorPlayer.api,slot:this.apiModel.hasStream()?this.apiModel.getStreams()[0].slot:null,updateOpenedOverlaysCount:this.updateOpenedOverlaysCount,vendorPlayer:this.vendorPlayer})})),a.createElement(oa,{eventEmitter:this.vendorPlayer.events,apiModel:this.apiModel,isLive:N,displayInfoLink:n&&n.length>0||this.isEmbedValue,playerRef:this.playerRef,updateOpenedOverlaysCount:this.updateOpenedOverlaysCount,playerId:A,displayOverlay:i}),a.createElement(ra,{playerId:A,playerRef:this.playerRef,playerConfig:Ie,apiModel:this.apiModel,lang:F,tcStartFrom:L,slot:R,eventEmitter:this.vendorPlayer.events,updateOpenedOverlaysCount:this.updateOpenedOverlaysCount,proxyFunctions:this.vendorPlayer.api,reload:this.reload,shouldStop:!0})),w&&x&&"hidden"===E&&a.createElement(yi,{vendorPlayer:this.vendorPlayer,playerId:A})),y&&r&&a.createElement(Gi,{apiPlaylistModel:y,vendorPlayer:this.vendorPlayer,playerId:A}),d.isOpen&&a.createElement(fi,W(q({},d),{hideOverlay:t,playerId:A})),c.isOpen&&a.createElement(ht,W(q({},c),{zIndex:2,hideOverlay:e,playerId:A}))))}};es.propTypes={jsonUrl:l().string,liveStreamProgramId:l().string,vendorPlayerSuffixId:l().string,env:l().string,lang:l().string,apiPlaylistModel:l().object,autoplay:l().string,embed:l().number,isFullScreen:l().bool,slot:l().number,isNoControl:l().bool,isPlaylist:l().bool,autoPlayNext:l().bool,isIllico:l().bool,isChapterEdit:l().bool,tcStartFrom:l().number,getPlaylistItems:l().func,getIllicoProgramsFromProps:l().func,onClickPlaylist:l().func,onChaptersAvailable:l().func,onClickIllico:l().func,onClickButtonChapters:l().func,overlayContent:l().object,hideOverlay:l().func,hideAdsOverlay:l().func,overlayAspect:l().string,onClickLive:l().func,displayOverlay:l().func,displayAdsOverlay:l().func,reload:l().func,overlayOption:l().object,adsOverlayOption:l().object,messageBoxOption:l().object,displayMessageBox:l().func,avpRef:l().object,showPlaylist:l().func,vendorPlayer:l().object,autoReload:l().func,onRightsFuture:l().func,version:l().string,mode:l().string,onClickPrevious:l().func,onClickNext:l().func,onClickBackToReplay:l().func,onClickBackToLive:l().func,isTouch:l().bool,isRightColumnOpen:l().bool,isAdCtaAvailable:l().bool,responsiveState:l().string,previewState:l().string,admin:l().bool,playerStatus:l().string,isAd:l().bool,stream:l().string,isPicturePictureEnabled:l().bool,vast:l().oneOfType([l().string,l().bool]),audioVersion:l().oneOfType([l().string,l().bool]),getExternalInterface:l().func,sendTracking:l().func,playerId:l().string,previewData:l().oneOfType([l().object,l().bool]),setLiveItemInPlaylist:l().func,loop:l().bool};var ts=$e(["env","previewState","admin","playerStatus","tcStartFrom","mode","jsonUrl","isIllico","responsiveState","lang","isPlaylist","isTouch","version","isAd","isPicturePictureEnabled","isAdCtaAvailable","vast","loop"])(es),is=class extends a.Component{constructor(e){super(e),this.props=e,this.state={tc:this.props.tc,title:this.props.title,new:this.props.new},this.handleChange=this.handleChange.bind(this),this.handleSubmit=this.handleSubmit.bind(this)}UNSAFE_componentWillReceiveProps(e){const{tc:t}=this.props;t!==e.tc&&this.setState({tc:e.tc,title:e.title,new:e.new})}handleSubmit(e){const{uniqueId:t,onSubmitEditChapter:i}=this.props;e.preventDefault(),i(t,this.state)}handleChange(e){const t=this.state;t[e.target.name]=e.target.value,this.setState(t)}render(){const{formTitle:e,tcLabel:t,titleLabel:i,saveBtnLabel:s}=this.props,{tc:o,title:n}=this.state;return a.createElement("div",{className:"avp-chapter-edit"},a.createElement("div",{className:"avp-chapter-edit__title text-center"},e),a.createElement("form",{className:"avp-chapter-edit__form"},a.createElement("div",{className:"avp-chapter-edit-field"},a.createElement("label",{className:"font-size-s",htmlFor:"tc"},t),a.createElement("input",{readOnly:!0,name:"tc",id:"tc",type:"text",value:qe(o),onChange:this.handleChange})),a.createElement("div",{className:"avp-chapter-edit-field avp-chapter-edit-field--title"},a.createElement("label",{className:"font-size-s",htmlFor:"title"},i),a.createElement("input",{name:"title",id:"title",type:"text",value:n,maxLength:"256",onChange:this.handleChange})),a.createElement("div",{className:"avp-chapter-edit-field",onClick:this.handleSubmit},a.createElement(h.zx,{label:s}))))}};is.propTypes={tc:l().string,title:l().string,formTitle:l().string,tcLabel:l().string,titleLabel:l().string,uniqueId:l().string,new:l().bool,saveBtnLabel:l().string,onSubmitEditChapter:l().func};var as=is,ss=class extends a.Component{constructor(e){super(e),this.props=e,this.state={updateRequestStatus:"",chaptersListItems:[]},this.onClickPlaylistItem=this.onClickPlaylistItem.bind(this),this.onClickEditChapter=this.onClickEditChapter.bind(this),this.onClickDeleteChapter=this.onClickDeleteChapter.bind(this),this.onClickAddChapter=this.onClickAddChapter.bind(this),this.onClickSaveChapters=this.onClickSaveChapters.bind(this),this.onSubmitEditChapter=this.onSubmitEditChapter.bind(this);const{isIllico:t,proxyFunctions:i}=this.props;t||(this.throttleChapterSelection=(0,c.P)(2e3,(()=>{const{chaptersListItems:e}=this.state,t=[];if(this.apiModel.getChapters()){let a=0,o=0;e.forEach(((e,t)=>{e.selected&&(a=t)})),this.apiModel.getChapters().forEach(((e,a)=>{const n=this.apiModel.getChapters()[a+1];let r=null;(n&&e.startTime<i.getPosition()&&n.startTime>i.getPosition()||!n&&e.startTime<i.getPosition())&&(o=a,r="selected"),t.push({title:e.title,tc:e.startTime,id:parseInt(e.id,10),new:!1,selected:r,deleteText:s.ZP.t("chapters__delete_chapter_button"),editText:s.ZP.t("chapters__edit_chapter_button")})})),a!==o&&this.setState({chaptersListItems:t})}})))}componentDidMount(){const{apiModel:e}=this.props;this.apiModel=e,this.getChaptersListItems();const{eventEmitter:t,isIllico:i}=this.props;i||t.on("time",this.throttleChapterSelection)}componentWillUnmount(){const{eventEmitter:e,isIllico:t}=this.props;t||e.removeListener("time",this.throttleChapterSelection)}onClickAddChapter(e){e.preventDefault();const t=this.getEditChapterForm(),{displayOverlay:i,proxyFunctions:a}=this.props;i({content:t,aspect:"opacity"}),a.pause()}onClickSaveChapters(e){e.preventDefault(),this.setState({updateRequestStatus:"..."});const t=this.prepareChaptersListForSaving(),{jsonUrl:i,reload:a}=this.props,o=new URL(i),n=new URLSearchParams({chapters:t,lang:this.apiModel.getLanguage(),id:this.apiModel.getProviderId(),remontage:this.apiModel.get("REM")});je({url:"".concat(o.protocol,"//").concat(o.hostname,"/programme/chapitrage/params?").concat(n.toString())}).then((e=>{if(e&&"0"===e.data.toString().substr(0,1)){this.setState({updateRequestStatus:s.ZP.t("chapters__save_chapter_button")});const e="".concat(i,"#").concat(Math.random());a({jsonUrl:e})}else this.setState({updateRequestStatus:s.ZP.t("error__generic")})}),(()=>{this.setState({updateRequestStatus:s.ZP.t("error__generic")}),setTimeout((()=>{this.setState({updateRequestStatus:s.ZP.t("chapters__save_chapter_button")})}),2e3)}))}onClickEditChapter(e){const t=this.getChapterIndexFromId(e),{displayOverlay:i,proxyFunctions:a}=this.props,{chaptersListItems:s}=this.state;-1!==t&&(i({content:this.getEditChapterForm(s[t]),aspect:"opacity"}),a.pause())}onSubmitEditChapter(e,t){const{hideOverlay:i}=this.props,{chaptersListItems:a}=this.state;if(t.new){const o=a;o.push({title:t.title,tc:Math.round(t.tc),id:e,new:t.new,deleteText:s.ZP.t("chapters__delete_chapter_button"),editText:s.ZP.t("chapters__edit_chapter_button")}),o.sort(((e,t)=>e.tc-t.tc)),this.setState({chaptersListItems:o}),i()}else{const s=this.getChapterIndexFromId(e);if(-1!==s){const e=a;e[s].title=t.title,this.setState({chaptersListItems:e}),i()}}}onClickPlaylistItem(e,t){const{proxyFunctions:i,avpRef:a,closePlaylist:s}=this.props;a.querySelector(".avp-playlist ul li.selected")&&a.querySelector(".avp-playlist ul li.selected").classList.remove("selected"),e.currentTarget.classList.add("selected"),i.seek(t),s(e,!0)}onClickDeleteChapter(e){const t=this.getChapterIndexFromId(e),{chaptersListItems:i}=this.state;-1!==t&&(i[t].toDelete=!i[t].toDelete),this.setState({chaptersListItems:i})}getChaptersListItems(){const e=[];this.apiModel.getChapters()&&this.apiModel.getChapters().forEach(((t,i)=>{e.push({title:t.title,tc:t.startTime,id:parseInt(t.id,10),new:!1,selected:0===i?"selected":null,deleteText:s.ZP.t("chapters__delete_chapter_button"),editText:s.ZP.t("chapters__edit_chapter_button")})})),this.setState({chaptersListItems:e})}getChapterIndexFromId(e){const{chaptersListItems:t}=this.state;return t.findIndex((t=>t.id===e))}getEditChapterForm(e=null){const{proxyFunctions:t}=this.props,i=e&&e.tc?e.tc:t.getPosition(),o=e&&e.title?e.title:"",n=e&&e.id?e.id:(new Date).getTime(),r=!(e&&e.id);return a.createElement(as,{tc:i,title:o,formTitle:r?s.ZP.t("chapters__add_chapter_title"):s.ZP.t("chapters__edit_chapter_title"),tcLabel:s.ZP.t("chapters__chapter_timecode"),titleLabel:s.ZP.t("chapters__chapter_title"),uniqueId:n,new:r,saveBtnLabel:s.ZP.t("chapters__save_chapter_button"),onSubmitEditChapter:this.onSubmitEditChapter})}prepareChaptersListForSaving(){const{chaptersListItems:e}=this.state,t={};return e.forEach((e=>{const i={id:e.id,tc:e.tc,title:e.title,description:""};e.toDelete?i.id="del_".concat(e.id):e.new&&(i.id="new_".concat(e.id)),t[i.id]=i})),JSON.stringify(t)}render(){const{chaptersListItems:e,updateRequestStatus:t}=this.state,{onClickPlaylistClickCatcher:i,closePlaylist:o,avpRef:n,apiModel:r,isChapterEdit:l,onMouseHoverChange:c,isRightColumnOpen:d,playerId:p,jsonUrl:u}=this.props;return a.createElement(ct,{hasChapters:!0,onClickPlaylistClickCatcher:i,onMouseHoverChange:c,isRightColumnOpen:d,playerId:p,playlistItems:e.map(((t,i)=>a.createElement(Ct,{key:t.id,item:new De(t),onClickPlaylistItem:e=>{this.onClickPlaylistItem(e,t.tc)},onClickEditChapter:this.onClickEditChapter,onClickDeleteChapter:this.onClickDeleteChapter,spriteUrl:r.getChaptersSpriteUrl(),isRightColumnOpen:d,chapterListSize:e.length,chapterIndex:i,playerId:p,jsonUrl:u}))),apiPlaylistModel:r,nbItem:null,updateRequestStatus:t,addText:s.ZP.t("chapters__add_chapter_button"),onClickAddChapter:this.onClickAddChapter,onClickSaveChapters:this.onClickSaveChapters,onSubmitEditChapter:this.onSubmitEditChapter,saveText:s.ZP.t("chapters__save_chapter_button"),overTitle:s.ZP.t("chapters__chapters_list_title"),closePlaylist:o,avpRef:n,isChapterEdit:l})}};ss.propTypes={displayOverlay:l().func,hideOverlay:l().func,proxyFunctions:l().object,onClickPlaylistClickCatcher:l().func,isIllico:l().bool,closePlaylist:l().func,isChapterEdit:l().bool,avpRef:l().object,eventEmitter:l().object,apiModel:l().object,onMouseHoverChange:l().func,isRightColumnOpen:l().bool,jsonUrl:l().string,reload:l().func,playerId:l().string};var os=$e(["isIllico"])(ss),ns=class e extends a.Component{static getOverlayContent(){return a.createElement("div",{className:"avp-old-browsers__content"},s.ZP.t("unsupported__old_browser_text"))}render(){const{children:t,lang:i,playerId:o}=this.props;let n=!0;if(de.isBrowserInfoAvailable()){const e=de.getBrowserInfo();n="IE"!==e.name,"Chrome"===e.name&&parseInt(e.major,10)<72&&(n=!1),"Firefox"===e.name&&parseInt(e.major,10)<66&&(n=!1)}return n?a.createElement(a.Fragment,null,t):(Le(i),a.createElement(ht,{ariaLabel:s.ZP.t("unsupported__old_browser_text"),aspect:"opacity",content:e.getOverlayContent(),isClosable:!1,hideOverlay:()=>{},reload:()=>{},playerId:o}))}};ns.propTypes={children:l().object,lang:l().string,playerId:l().string},ns.defaultProps={lang:"fr_FR"};var rs=class extends a.Component{constructor(e){super(e),this.props=e,this.triggerShare=this.triggerShare.bind(this)}triggerShare(e){const{avpRef:t}=this.props;e.stopPropagation(),t.querySelector(".avp-topdock .avp-button--Share").click()}render(){const{dateFrom:e,isEmbed:t,isLive:i,apiModel:o,hideOverlay:n,reload:r,dockButtons:l,jsonUrl:c,playerId:d}=this.props,p=(0,O.Z)(new Date(e),new Date);let u=null;const h=t?o.getTitleFromPreviewDataFirst():null,_=t?o.getSubtitleFromPreviewDataFirst():null;let m=null,v=null;if(p<24)m=s.ZP.t(i?"countdown__live_start_in":"countdown__available_in"),u=a.createElement(N.ZP,{playerId:d,date:new Date(e),renderer:({hours:e,formatted:t})=>{function i(){return a.createElement("div",{className:"avp-countdown__counter",dangerouslySetInnerHTML:{__html:v}})}return v=s.ZP.t(e<1?"countdown__format_final":"countdown__format").replace("%H",t.hours).replace("%M",t.minutes).replace("%S",t.seconds),a.createElement(i,null)},onComplete:()=>{n();const e="".concat(c,"#").concat(Math.random());r({jsonUrl:e})}});else try{v=(0,P.Z)(new Date(e),s.ZP.t("dateformat__day_with_hour")),m=s.ZP.t(i?"countdown__live_start_on":"countdown__available_on"),u=a.createElement("div",{className:"avp-countdown__counter",dangerouslySetInnerHTML:{__html:v}})}catch(e){m=s.ZP.t("error__available_soon"),console.warn("date-fns crashed")}return a.createElement("div",{className:"avp-countdown"},a.createElement(Qi,{title:o.getTitleFromPreviewDataFirst(),subtitle:o.getSubtitleFromPreviewDataFirst(),providerId:o.getProviderId(),buttons:l,disableTitle:!0,playerId:d}),(h||_)&&a.createElement("div",{className:"avp-countdown-title"},h&&a.createElement("div",{className:"avp-countdown-title__title"},h),_&&a.createElement("div",{className:"avp-countdown-title__subtitle"},_)),a.createElement("div",{className:"avp-countdown__intro"},m),u)}};rs.propTypes={reload:l().func,hideOverlay:l().func,dateFrom:l().object,apiModel:l().object,avpRef:l().object,dockButtons:l().array,isEmbed:l().bool,isLive:l().bool,jsonUrl:l().string,playerId:l().string};var ls=$e(["jsonUrl","lang"])(rs);function cs(){ye("userFirstClickedWithSpaceBar",this.playerId)||(L.findDOMNode(this.avpRef.current),L.findDOMNode(this.avpPreviewRef.current),ge("userFirstClicked",!0,this.playerId))}function ds(e){const{isChapterEdit:t}=this.state;(e.getChapters()||t)&&(this.setState({hasChapters:!1}),this.setState({apiModel:e,hasChapters:!0}),ge("hasChapters",!0,this.playerId))}function ps(e){this.togglePlaylist(e)}function us(e){this.togglePlaylist(e)}function hs(e){e.preventDefault(),e.target===this.avpRef.current.querySelector(".avp-playlist-clickcatcher")&&this.togglePlaylist(e)}function _s(e,t,i,s){const{admin:o,jsonUrl:n}=this.props;if(!o){s.videojsInstance&&s.videojsInstance.pause&&s.videojsInstance.pause(),this.setState({isCountDown:!0});const o=a.createElement(ls,{apiModel:t,reload:this.reload,hideOverlay:this.hideOverlay,dateFrom:e.extra.dateFrom,avpRef:this.avpRef.current,dockButtons:i,playerId:this.playerId,jsonUrl:n});this.displayOverlay({content:o,aspect:"opacity",isClosable:!1,shouldStop:!0,bluredPreview:!0})}}function ms(){const{large:e,medium:t}=Ie.breakpoints,i=this.avpRef.current.offsetWidth;ge("playerWidth",i,this.playerId),i>=e?(this.setState({responsiveState:"large"}),ge("responsiveState","large",this.playerId)):i>=t?(this.setState({responsiveState:"medium",isRightColumnOpen:!1}),ge("responsiveState","medium",this.playerId)):(this.setState({responsiveState:"small",isRightColumnOpen:!1}),ge("responsiveState","small",this.playerId))}function vs(e){const{isIllico:t}=this.state;if(!t)return null;e&&"function"==typeof this.autoHideIllicoPlaylist.cancel?(this.autoHideIllicoPlaylist.cancel(),this.setAutoHideIllicoPlaylist()):this.autoHideIllicoPlaylist()}function gs(){const{playlistItems:e}=this.props,t=ye("liveStreamProgramId",this.playerId);let i=0;e.forEach((a=>{e[i].live=!1,t===a.providerId&&(e[i].live=!0),i+=1}))}function ys(){const{playlistItems:e,lang:t}=this.props,i=new Ne({items:e,metadata:{title:s.ZP.t("playlist__program_of_the_day"),subtitle:null}});let a=null;const o=ye("liveStreamProgramId",this.playerId);if(e.forEach((e=>{o===e.providerId&&(a=Xe(t))})),a)return this.setState({jsonUrl:a,apiPlaylistModel:i,overlayOption:{open:!1,content:null},isChapterEdit:ze(a)&&!Ue(a),isTouch:de.touch(),responsiveState:this.getInitialResponsiveState()}),i}function bs(){const{large:e,medium:t}=Ie.breakpoints;let i=window.innerWidth;return this.avpRef&&this.avpRef.current&&(i=this.avpRef.current.offsetWidth),i>=e?(ge("responsiveState","large",this.playerId),"large"):i>=t?(ge("responsiveState","medium",this.playerId),"medium"):(ge("responsiveState","small",this.playerId),"small")}function fs(){const{responsiveState:e}=this.state;switch(e){case"small":return"avp--medium avp--small";case"medium":return"avp--medium";default:return""}}function ks(){const e=ye("mouseMoved",this.playerId);this.autoHideIllicoPlaylist=(0,c.D)(3e4,(()=>{const{isRightColumnOpen:t}=this.state;t&&!de.touch()&&e&&this.setState({isRightColumnOpen:!1})}))}function Cs(e){this.setState({lastClickedElement:e})}function Ps(e){const{jsonUrl:t,tcStartFrom:i,slot:a,lang:s}=this.props;return e.jsonUrl!==t||e.tcStartFrom!==i||e.lang!==s||e.slot!==a}function Es(){const{jsonUrl:e,env:t,lang:i,mode:a,admin:s,mute:o,previewData:n,stream:r}=this.props;ge("mode",a,this.playerId),ge("admin",s,this.playerId),ge("jsonUrl",e,this.playerId),ge("env",t,this.playerId),ge("lang",i,this.playerId),ge("version",this.version,this.playerId),ge("previewData",n,this.playerId),ge("mute",o,this.playerId),r&&ge("streamTester",r,this.playerId)}function Ss(){const{slot:e,jsonUrl:t,tcStartFrom:i}=this.props,a="playlist"===Ne.getConfigType(t)||Ne.isLiveConfig(t),s="live"===Ne.getPlaylistType(t),o=!de.touch()&&(a||ze(t)&&!Ue(t));this.setState({jsonUrl:t,slot:e,overlayOption:{open:!1,content:null},messageBoxOption:{open:!1,content:null},isChapterEdit:ze(t)&&!Ue(t),isTouch:de.touch(),responsiveState:this.getInitialResponsiveState(),isRightColumnOpen:o,isPlaylist:a,isIllico:s,isFullScreen:!1}),this.hideOverlay(),_e.bind(this)(),ge("tcStartFrom",i,this.playerId),ge("isTrailerVideo",!1,this.playerId),ge("previewData",!1,this.playerId),ge("hasNextItem",!1,this.playerId),ge("jsonUrl",t,this.playerId),ge("isIllico",s,this.playerId),ge("isPlaylist",a,this.playerId),ge("isTouch",de.touch(),this.playerId)}function Is(e){let t={shouldStop:!0,bluredPreview:!1,isOpen:!0,reload:()=>null};t=Object.assign(t,e);const{jsonUrl:i}=this.props,{isCountDown:a}=this.state;a&&(t.reload=()=>{const e="".concat(i,"#").concat(Math.random()),t=ye("previewData",this.playerId);this.reload({jsonUrl:e}),ge("previewData",t,this.playerId)}),this.setState({adsOverlayOption:t,isNoControl:!0}),"function"!=typeof this.vendorPlayer.api.getState||this.stateBeforeAdsOverlayOpen.playerState||(this.stateBeforeAdsOverlayOpen.playerState=this.vendorPlayer.api.getState()),this.stateBeforeAdsOverlayOpen.focusedElement=document.activeElement.id,t.shouldStop&&"function"==typeof this.vendorPlayer.api.pause&&Number.isFinite(Math.round(this.vendorPlayer.api.getDuration()))&&"complete"!==this.vendorPlayer.api.getState()&&(this.playerHasBeenPaused=!0,this.vendorPlayer.api.pause(!0)),ye("isPictureInPictureEnabled",this.playerId)&&this.vendorPlayer.events.emit("arte_vp.picturePictureClicked")}function ws(e){let t={shouldStop:!0,ariaLabel:null,bluredPreview:!1,isOpen:!0,reload:()=>null};t=Object.assign(t,e);const{jsonUrl:i}=this.props,{isCountDown:a}=this.state;a&&(t.reload=()=>{const e="".concat(i,"#").concat(Math.random()),t=ye("previewData",this.playerId);this.reload({jsonUrl:e}),ge("previewData",t,this.playerId)}),this.setState({overlayOption:t,isNoControl:!0}),"function"!=typeof this.vendorPlayer.api.getState||this.stateBeforeOverlayOpen.playerState||(this.stateBeforeOverlayOpen.playerState=this.vendorPlayer.api.getState()),this.stateBeforeOverlayOpen.focusedElement=document.activeElement.id,t.shouldStop&&"function"==typeof this.vendorPlayer.api.pause&&Number.isFinite(Math.round(this.vendorPlayer.api.getDuration()))&&"complete"!==this.vendorPlayer.api.getState()&&(this.playerHasBeenPaused=!0,this.vendorPlayer.api.pause(!0)),ye("isPictureInPictureEnabled",this.playerId)&&this.vendorPlayer.events.emit("arte_vp.picturePictureClicked")}function xs(e){this.vendorPlayer.events.emit("arte_vp.reload"),this.setState(e),e.jsonUrl&&ge("jsonUrl",e.jsonUrl,this.playerId)}function Ts(e){const{isRightColumnOpen:t,isIllico:a,isPlaylist:s}=this.state;clearTimeout(i.g["arte_vp_togglePlaylistTimeout_".concat(this.vendorPlayer.getId())]),e&&e.stopPropagation(),t?this.setState({isRightColumnOpen:!1},(()=>{setTimeout((()=>{if(a){const e=this.avpRef.current.querySelector(".avp-icon-illico");e&&e.focus()}else if(s){const e=this.avpRef.current.querySelector(".avp-icon-playlist");e&&e.focus()}}),200)})):this.setState((()=>({isRightColumnOpen:!0})),(()=>{setTimeout((()=>{this.avpRef.current.querySelector(".avp-icon-close").focus()}),200)}))}function As(e,t=!1){const{isRightColumnOpen:i}=this.state;i&&this.togglePlaylist(e),t?setTimeout((()=>{this.avpRef.current.querySelector(".avp-icon-playback")?this.avpRef.current.querySelector(".avp-icon-playback").focus():this.avpRef.current.focus()}),300):setTimeout((()=>{this.avpRef.current.querySelector(".avp-playlist-header .avp-icon-close")?this.avpRef.current.querySelector(".avp-playlist-header .avp-icon-close").focus():this.avpRef.current.focus()}),300)}function Fs(){this.setState((()=>({isRightColumnOpen:!0})))}function Ms(){const{adsOverlayOption:e}=this.state,t=q({},e);this.playerHasBeenPaused&&"playing"===this.stateBeforeAdsOverlayOpen.playerState&&this.vendorPlayer.api.play(),this.stateBeforeAdsOverlayOpen.playerState=null,t.isOpen=!1,this.setState({adsOverlayOption:t,isNoControl:!1})}function Ls(){const{overlayOption:e}=this.state,t=q({},e);this.playerHasBeenPaused&&"playing"===this.stateBeforeOverlayOpen.playerState&&this.vendorPlayer.api.play(),this.stateBeforeOverlayOpen.playerState=null,t.isOpen=!1,this.setState({overlayOption:t,isNoControl:!1})}function Rs(e){const{messageBoxOption:t}=this.state,i=q({},t);i.open=!0,i.content=e.content,this.setState({messageBoxOption:i}),e.autoHideTime&&(this.messageBoxTimeout&&clearTimeout(this.messageBoxTimeout),this.messageBoxTimeout=setTimeout(this.hideMessageBox,e.autoHideTime))}function Ds(){const{messageBoxOption:e}=this.state,t=q({},e);t.open=!1,t.content=null,this.setState({messageBoxOption:t})}function Os(){this.onClickPrevious=si.bind(this),this.onClickNext=oi.bind(this),this.onClickBackToReplay=ri.bind(this),this.onClickBackToLive=li.bind(this),this.onClickPlaylist=us.bind(this),this.onClickPlaylistClickCatcher=hs.bind(this),this.onClickIllico=ps.bind(this),this.onClickPlaylistItem=Xt.bind(this),this.onRightsFuture=_s.bind(this),this.getIllicoProgramsFromProps=ys.bind(this),this.setLiveItemInPlaylist=gs.bind(this),this.onChaptersAvailable=ds.bind(this),this.onClickButtonChapters=ei.bind(this),this.onGlobalClick=cs.bind(this),this.hideOverlay=Ls.bind(this),this.hideAdsOverlay=Ms.bind(this),this.displayOverlay=ws.bind(this),this.displayAdsOverlay=Is.bind(this),this.displayMessageBox=Rs.bind(this),this.hideMessageBox=Ds.bind(this),this.closePlaylist=As.bind(this),this.togglePlaylist=Ts.bind(this),this.showPlaylist=Fs.bind(this),this.onPlaylistMouseHoverChange=vs.bind(this),this.getResponsiveClass=fs.bind(this),this.getInitialResponsiveState=bs.bind(this),this.reload=xs.bind(this),this.initStore=Es.bind(this),this.setAutoHideIllicoPlaylist=ks.bind(this),this.setPlayerToDefaultState=Ss.bind(this),this.onResize=ms.bind(this),this.shouldBeResetToDefaultState=Ps.bind(this),this.setLastClickedElement=Cs.bind(this)}var Ns="//static-cdn.arte.tv/static/artevp/".concat(Oe,"/css/arte.css"),js=class extends a.Component{constructor(e){super(e),this.props=e,this.version=Oe,this.state={overlayOption:{isOpen:!1},adsOverlayOption:{isOpen:!1}},Os.bind(this)();const{audio:t,subtitles:i,onFocus:s,onUnfocus:o,previewData:n,stream:r,vast:l,mute:c,loop:d,jsonUrl:p}=this.props;t&&te(t),i&&ie(i),this.playerId=function(e){let t="";for(let e=0;e<20;e+=1)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random()));return t}(),this.vendorPlayer||(this.vendorPlayer=new Se({vendorPlayerSuffixId:this.playerId})),this.getPlayerApi=()=>this.vendorPlayer.getPlayerApi(),this.getJwPlayer=()=>this.vendorPlayer.getPlayerApi(),this.avpRef=a.createRef(),this.avpPreviewRef=a.createRef(),this.avpForcedResize=!1,this.stateBeforeOverlayOpen={playerState:!1,focusedElement:!1},this.stateBeforeAdsOverlayOpen={playerState:!1,focusedElement:!1},this.vendorPlayer.events.on("arte_vp.focus",s),this.vendorPlayer.events.on("arte_vp.unfocus",o),this.vendorPlayer.events.on("autoplayError",(()=>{ge("loop",!1,this.playerId),this.vendorPlayer.events.once("play",(()=>{ge("loop",d,this.playerId)}))})),this.vendorPlayer.events.on("autoplayError",(e=>{(e.muted||e.isAd)&&ge("previewState","display",this.playerId)})),this.initStore(),ge("previewData",n,this.playerId),ge("mute",c,this.playerId),r&&ge("streamTester",r,this.playerId),ge("vast",l,this.playerId),ge("loop",d,this.playerId),ge("isIllico","live"===Ne.getPlaylistType(p),this.playerId)}componentDidMount(){const{lang:e}=this.props;this.setAutoHideIllicoPlaylist(),Je(this.vendorPlayerSuffixId,1),he.bind(this)(),J.testAdBlockers(),this.handleResize=(0,c.P)(200,(()=>{this.onResize()})),Le(e),this.setPlayerToDefaultState(),i.g.addEventListener("resize",this.handleResize),i.g.addEventListener("scroll",this.handleResize),i.g.addEventListener("mousemove",(()=>ge("mouseMoved",!0,this.playerId))),i.g.addEventListener("click",this.onGlobalClick,!0)}componentDidUpdate(e,t){const{lang:i}=this.props,{isIllico:a,isRightColumnOpen:s,lastClickedElement:o,overlayOption:n,adsOverlayOption:r}=this.state;if(this.avpForcedResize||(this.onResize(),this.avpForcedResize=!0),this.shouldBeResetToDefaultState(e)&&(Le(i),this.setPlayerToDefaultState()),a&&s&&s!==t.isRightColumnOpen&&this.autoHideIllicoPlaylist(),this.avpRef.current&&o&&this.avpRef.current.querySelector(o)&&(this.setState((()=>({lastClickedElement:null}))),setTimeout((()=>{this.avpRef.current.querySelector(o).focus()}),100)),t.overlayOption.isOpen&&!n.isOpen&&this.stateBeforeOverlayOpen.focusedElement){const e=document.getElementById(this.stateBeforeOverlayOpen.focusedElement);e&&e.focus()}if(t.adsOverlayOption.isOpen&&!r.isOpen&&this.stateBeforeAdsOverlayOpen.focusedElement){const e=document.getElementById(this.stateBeforeAdsOverlayOpen.focusedElement);e&&e.focus()}}componentWillUnmount(){i.g.removeEventListener("resize",this.handleResize),i.g.removeEventListener("scroll",this.handleResize),i.g.removeEventListener("click",this.onGlobalClick,!0),"function"==typeof this.autoHideIllicoPlaylist.cancel&&this.autoHideIllicoPlaylist.cancel(),_e.bind(this)()}render(){const{autoplay:e,onVideoLoaded:t,autoPlayNext:i,mode:o,jsonUrl:r,audioVersion:l,stream:c,streamTester:d,getExternalInterface:p,previewData:u,playlistItems:h,lang:_,redirectToAgeVerification:m,redirectToInfoPage:v,sendTracking:g}=this.props,{isTouch:y,apiPlaylistModel:b,isChapterEdit:f,isRightColumnOpen:k,isIllico:C,isPlaylist:P,isFullScreen:E,overlayOption:S,adsOverlayOption:I,messageBoxOption:w,responsiveState:x,isNoControl:T,slot:A,apiModel:F,hasChapters:M}=this.state,L=ye("mouseMoved",this.playerId),R="".concat((y?" isTouch":"isDesktop")+(C?" isIllico":"")+(P||M?" isPlaylist":"")+(k?" isRightColumnOpen":"")+(E?" isFullScreen":"")+(M?" hasChapters":"")+(L?" mouseMoved":"")+(Ke()?" isEmbed":"")+(S&&S.isOpen?" isOverlayOpen":"")+(I&&I.isOpen?" isAdsOverlayOpen":"")," is").concat(o[0].toUpperCase()).concat(o.slice(1),"Mode");return a.createElement("div",{ref:this.avpRef,className:n()("avp",R,this.getResponsiveClass()),"aria-label":s.ZP.t("arialabel__video_player")},a.createElement(vt,{playerId:this.playerId},a.createElement(ts,{playerId:this.playerId,autoplay:e,slot:A,autoPlayNext:i,overlayOption:S,adsOverlayOption:I,messageBoxOption:w,displayMessageBox:this.displayMessageBox,sendTracking:g,apiPlaylistModel:b,isChapterEdit:f,isNoControl:T,onClickPlaylist:this.onClickPlaylist,onClickIllico:this.onClickIllico,onClickButtonChapters:this.onClickButtonChapters,hideOverlay:this.hideOverlay,hideAdsOverlay:this.hideAdsOverlay,onClickLive:this.onClickLive,onClickReplay:this.onClickReplay,reload:this.reload,displayOverlay:this.displayOverlay,displayAdsOverlay:this.displayAdsOverlay,isFullScreen:E,vendorPlayer:this.vendorPlayer,onRightsFuture:this.onRightsFuture,avpRef:this.avpRef.current,onClickPrevious:this.onClickPrevious,onClickNext:this.onClickNext,onClickBackToReplay:this.onClickBackToReplay,onClickBackToLive:this.onClickBackToLive,showPlaylist:this.showPlaylist,vendorPlayerSuffixId:this.vendorPlayer.getId(),onVideoLoaded:t,getIllicoProgramsFromProps:this.getIllicoProgramsFromProps,setLiveItemInPlaylist:this.setLiveItemInPlaylist,onPlaylistUrlAvailable:this.onPlaylistUrlAvailable,onChaptersAvailable:this.onChaptersAvailable,isRightColumnOpen:k,stream:c,getExternalInterface:p,redirectToAgeVerification:m,redirectToInfoPage:v,previewData:u,audioVersion:l})),M&&!d&&a.createElement(os,{isChapterEdit:f,onClickPlaylistClickCatcher:this.onClickPlaylistClickCatcher,displayOverlay:this.displayOverlay,hideOverlay:this.hideOverlay,proxyFunctions:this.vendorPlayer.api,closePlaylist:this.closePlaylist,avpRef:this.avpRef.current,apiModel:F,eventEmitter:this.vendorPlayer.events,onMouseHoverChange:this.onPlaylistMouseHoverChange,isRightColumnOpen:k,jsonUrl:r,reload:this.reload,playerId:this.playerId}),P&&b&&!y&&"small"!==x&&!d&&"trailer"!==o&&a.createElement(ct,{onClickPlaylistClickCatcher:this.onClickPlaylistClickCatcher,onMouseHoverChange:this.onPlaylistMouseHoverChange,playlistItems:h.map((e=>a.createElement(Ct,{key:e.providerId,item:new De(e),onClickPlaylistItem:this.onClickPlaylistItem,isRightColumnOpen:k,playerId:this.playerId,jsonUrl:r,lang:_}))),apiPlaylistModel:b,addText:null,saveText:null,overTitle:null,closePlaylist:this.closePlaylist,avpRef:this.avpRef.current,onClickPlaylistItem:this.onClickPlaylistItem,isRightColumnOpen:k,playerId:this.playerId}),a.createElement(tt,{playerId:this.playerId,eventEmitter:this.vendorPlayer.events}))}};js.propTypes={jsonUrl:l().string,tcStartFrom:l().number,slot:l().string,lang:l().string,env:l().string,mute:l().bool,autoPlayNext:l().bool,autoplay:l().string,onVideoLoaded:l().func,mode:l().string,audioVersion:l().oneOfType([l().string,l().bool]),audio:l().oneOfType([l().string,l().bool]),subtitles:l().oneOfType([l().string,l().bool]),admin:l().bool,previewData:l().oneOfType([l().object,l().bool]),onFocus:l().func,onUnfocus:l().func,stream:l().string,vast:l().oneOfType([l().string,l().bool]),getExternalInterface:l().func,sendTracking:l().func,streamTester:l().string,playlistItems:l().array,redirectToAgeVerification:l().func,redirectToInfoPage:l().func,loop:l().bool},js.defaultProps={jsonUrl:"https://api.arte.tv/api/player/v2/config/fr/LIVE",lang:"fr_FR",autoPlayNext:!0,autoplay:"true",env:"prod",mode:"default",mute:!1,audioVersion:!1,audio:!1,subtitles:!1,admin:!1,onVideoLoaded:()=>{},onFocus:()=>{},onUnfocus:()=>{},previewData:!1,getExternalInterface:()=>{},sendTracking:()=>{},playlistItems:[],vast:!1,loop:!1,redirectToAgeVerification:()=>{},redirectToInfoPage:()=>{}};var Bs=function(e){return!("undefined"==typeof window)&&a.createElement(d.zt,{store:X},a.createElement(ns,q({},e),a.createElement(js,q({},e))))}},3558:function(){}}]);