"use strict";(self.webpackChunk_twitter_responsive_web=self.webpackChunk_twitter_responsive_web||[]).push([["loader.AbsolutePower"],{925572:272034:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Se,resetIsModalScrollerRendered:()=>Te});var i=n(256666),r=n(968079),o=n(709249),s=n(887371),a=n(545754),c=n(486906),d=(n(136728),n(202784)),u=n(870451),l=n(16587),h=n(539466),m=n(801206),_=n(107333),f=n(766961),p=n(620616),g=n(275297),v=n(644682),I=function(e){return function(t,n){return n.getTop()-t.getTop()<=e}},w=function(e){return function(t,n){return t.getBottom()-n.getBottom()<=e}},R=function(e){return function(t,n){var i=n.getHeight()*e;return n.getTop()-t.getTop()<=i}},y=function(e){return function(t,n){var i=n.getHeight()*e;return t.getBottom()-n.getBottom()<=i}},A=Object.freeze({INSIDE:"inside",OUTSIDE:"outside"}),H=function(e,t,n,i){return e,n)?v.Z.INITIAL_POSITION:function(e,t){return e===A.OUTSIDE&&t===A.INSIDE}(e,n)?v.Z.MOVEMENT:e,n)&&i!==t?v.Z.LIST_UPDATE:null},T=function(){function e(t){(0,o.Z)(this,e),this._handlers=t.map(()}return(0,s.Z)(e,[{key:"handlePositioningUpdate",value:function(e){this._handlers.forEach((function(t){var n=t.state,i=t.zone,r=i.callback,o=i.condition,s=n.listLength,a=n.proximity,c=function(e,t){return e(t.getForList(),t.getForViewport())?A.INSIDE:A.OUTSIDE}(o,e),d=e.getListLength(),u=H(a,s,c,d);n.proximity=c,n.listLength=d,u&&r({triggerCause:u})}))}}]),e}(),S=n(792684),b=n(130556),Z=Object.freeze({FocusedItem:"focusedItem",Anchor:"anchor"});const E=function(e){return{anchor:e,type:Z.Anchor}},F=var P=n(580753),C=(n(315735),n(906886),n(901951),n(743108),n(411916)),N=n.n(C),V=n(476984),M=n.n(V),x=n(655249),B=n(235193),k=n(211469),L=n(254249),U=n(456992),O=n(100417),D=n(815956),W=n(479363),z=n(356776),K=n(32307),q=n(206149),j=n(620545),Y=n(348501),G=n(308329),$=new Set,J=new Set,Q=!1;function X(){if(!Q){var e=["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"];["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","msfullscreenchange"].forEach((function(t){document.addEventListener(t,(function(){var t=e.map((function(e){return document[e]})).filter(Boolean)[0];t?$.forEach(():J.forEach(()}))}))}Q=!0}var ee=n(300482),te=n(619967);var ne=n(364044),ie=n(460673),re=n(76909),oe=n(133028),se=n(401477),ae=n(463142);const ce=d.createContext({onAnimationStarted:function(){},onAnimationEnded:function(){},onHeightChanged:);var de=ue="transform 0.15s linear",le=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(e,i){var r;return(0,o.Z)(this,n),(r=t.call(this,e,i))._contentsFocusable=!1,r._perfReported=!1,r._shouldAnimateTranslate=!1,r._observeElement=r._handleResize=function(e){var t=r.props,n=t.item,i=t.onHeightChanged,o=(e&&Math.floor(e.contentRect.height))!==(r._currentHeight&&Math.floor(r._currentHeight));e&&o&&(r._currentHeight=e.contentRect.height,i(n.id,e.contentRect.height)),r._recordTTFV()},r._setRef=function(e){var t=r.props,n=t.item,i=t.setAPI;e?(r._element=e,i(n.id,(0,P.Z)(r)),r._observeElement(e)):(i(n.id,void 0),r._element=void 0)},r._setIsItemFocusable=r._handleAnimationStarted=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue;se.Z.unobserveAll(r._element),r.props.onAnimationStarted(r.props.item.id,e),r._animationTTLTimeoutId&&clearTimeout(r._animationTTLTimeoutId),r._animationTTLTimeoutId=setTimeout(r._handleAnimationEnded,1e3)},r._handleAnimationEnded=function(){r._animationTTLTimeoutId&&(clearTimeout(r._animationTTLTimeoutId),r._animationTTLTimeoutId=null),r._element&&r._observeElement(r._element),r.props.onAnimationEnded(r.props.item.id)},r._handleHeightChanged=function(e){r._currentHeight=e,r.props.onHeightChanged(r.props.item.id,e)},r._animationContext={onAnimationEnded:r._handleAnimationEnded,onAnimationStarted:r._handleAnimationStarted,onHeightChanged:r._handleHeightChanged},r._perfStart=de(),r}return(0,s.Z)(n,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.item,i=t.positioningStyle,r=t.shouldAnimate,o=t.visible,s=!(0,K.Z)(e.positioningStyle,i);return this._shouldAnimateTranslate=s&&e.visible===o,!(0,K.Z)(e.item,n)||s||e.visible!==o||e.shouldAnimate!==r}},{key:"componentWillUnmount",value:function(){this._animationTTLTimeoutId&&(clearTimeout(this._animationTTLTimeoutId),this.props.onAnimationEnded(this.props.item.id)),se.Z.unobserveAll(this._element)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.item,i=t.setAPI;e.item.id!==n.id&&(i(e.item.id,void 0),i(n.id,this)),this._recordTTFV()}},{key:"getElement",value:function(){return this._element}},{key:"isFocusable",value:function(){return this._contentsFocusable}},{key:"measureHeight",value:function(){return this._currentHeight||(this._currentHeight=this._element?this._element.getBoundingClientRect().height:0),this._currentHeight}},{key:"render",value:function(){var e=this.props,t=e.isAnimationDisabled,n=e.item,i=e.shouldAnimate,r=e.translationTransitionStyle,o=e.visible,s=this._shouldAnimateTranslate&&!ae.Z.reducedMotionEnabled?r:"opacity 0.3s ease-out",a=(0,oe.Z)((0,oe.Z)({},this.props.positioningStyle),{},{position:"absolute",opacity:o?void 0:.01,width:"100%",transition:i&&!t?s:void 0});return d.createElement(ce.Provider,{value:this._animationContext},d.createElement("div",{"data-testid":"cellInnerDiv",ref:this._setRef,style:a},n.render(this._setIsItemFocusable)))}},{key:"_recordTTFV",value:function(){var e=this.props,t=e.item,n=e.onVisible,i=e.visible;void 0!==this._currentHeight&&!this._perfReported&&i&&(n(t.id,de()-this._perfStart),this._perfReported=!0)}}]),n}(d.Component);le.contextType=Y.rC,le.defaultProps={translationTransitionStyle:ue};var he=n(928316),me=n(17500),_e=fe=function(){eturn(0,s.Z)(e,[{key:"getForList",value:function(){return this._listRect}},{key:"getForViewport",value:function(){return this._viewportRect}},{key:"getListLength",value:function(){return this._listLength}},{key:"getRenderedItems",value:]),e}(),pe=n(925572),ge=function(){function e(t,n,i,r){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;(0,o.Z)(this,e),this.itemId=t,this.offset=n,this.visible=i,this.canBeAnchor=r,this.height=s}return(0,s.Z)(e,[{key:"getRectInViewport",value:]),e}(),ve={},Ie=function(e){var t=e.cssPixels,n=e.dpr;return Math.ceil(t*n)/n},we=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(e,i){var r;(0,o.Z)(this,n),(r=t.call(this,e,i))._areAnchorsInvalidated=!1,r._cells=new Map,r._cellAnimations=new Set,r._cellAnimationStyle=ue,r._currentHeadroom=0,r._isFullScreened=!1,r._isIdle=!0,r._pendingHeightUpdates=new Map,r._previousScrollPosition=0,r._renderedItemsStatus=new Set,r._rootRef=d.createRef(),r._slice={start:0,end:0},r._shouldScribeNextScroll=!0,r._visibilityMeasurements=new Map,r._handleScroll=function(){r._wasPreviouslyAtNewestEnd=r.isAtNewest(),r._isInitialAnchoring||r._viewport.scrollY()<0||(r._isIdle=!1,r._updateScrollEnd(),r._scheduleCriticalUpdateThrottled())},r._updateScrollEnd=(0,B.Z)((function(){var e=r.props,t=e.analytics,n=e.onScrollEnd,i=r._viewport.scrollY()-r._previousScrollPosition;r._previousScrollPosition=r._viewport.scrollY(),r._shouldScribeNextScroll&&Math.abs(i)>100&&t.scribe({action:"scroll",data:{event_value:i}}),r._shouldScribeNextScroll=!0,r._isIdle=!0,n(),r._scheduleCriticalUpdate()}),200),r._handleProgrammaticScroll=function(){r._shouldScribeNextScroll=!1},r._handleEnterFullscreen=r._handleExitFullscreen=r._getPositioningContext=(0,l.Z)((),r._getFinalRenderedItemsMemoized=(0,l.Z)((function(e,t){var n=r._getItemMapMemoized(e);return(0,k.Z)(t,(function(e){var t=n.get(e.itemId);return t&&{item:t,offset:e.offset,visible:e.visible}}))})),r._getItemMapMemoized=(0,l.Z)((),r._getInitialRenderedItems=function(){var e=r.props,t=e.centerInitialAnchor,n=e.initialAnchor,i=e.list,o=[];if(!n)return o;if(n.type===Z.FocusedItem){var s=0;if(t){var a=r._getDocumentViewportHeight(),c=r._getHeightForItemId(n.itemId);s=Math.ceil(a/2)-c/2}var d=(0,L.Z)(i,(function(e){return e.id===n.itemId?new ge(e.id,s,!0,e.canBeAnchor):void 0}));d&&o.push(d)}else if(n.type===Z.Anchor&&(0,U.Z)(n.anchor.distanceToViewportTop)){for(var u=n.anchor,l=r._getDocumentViewportHeight(),h=u.distanceToViewportTop||0,m=i.findIndex((function(e){return e.id===u.id})),_=h,f=m;f>-1&&f<i.length&&_<l;){var p=i[f],g=r._heights.get(p.id);if(!(0,U.Z)(g))break;o.push(new ge(p.id,_,!0,p.canBeAnchor)),_+=g,f+=1}for(_=h,f=m-1;f>-1&&_>0;){var v=i[f],I=r._heights.get(v.id);if(!(0,U.Z)(I))break;_-=I,o.unshift(new ge(v.id,_,!0,v.canBeAnchor)),f-=1}}return o},r._getViewportOffsetCorrection=function(){var e=r._rootRef.current&&r._rootRef.current.getBoundingClientRect();if(!e||!r._viewport)return 0;var t=r._viewport instanceof ne.Z?0:r._viewport.getRect().getTop();return Ie({cssPixels:e.top-t,dpr:r._devicePixelRatio})},r.getAnchors=function(){var e=r._rootRef.current&&r._rootRef.current.getBoundingClientRect(),t=r._measureRelativeViewportRect();return e&&t?r._getItemsWithin(t).filter(().map((function(e){return{id:e.item.id,distanceToViewportTop:Ie({cssPixels:e.offset+r._getViewportOffsetCorrection(),dpr:r._devicePixelRatio}),wasFocused:r._hasUserChangedFocus&&e.item.id===r._activeEntryId}})):[]},r._update=function(){var e=r._measureRelativeViewportRect();if(e&&!r._isFullScreened){var t=r._getAnchor(e);r._measureHeights(),t&&(r._updateRenderedItems(t,e),r._areAnchorsInvalidated=!1)}},r._getItemsWithPositions=function(e){var t=r.props.list,n=r._getDistanceFromTop(e.itemId),i=e.offset-n,o=[];return t.forEach((function(e){var t=r._getHeight(e);o.push(new ge(e.id,i,r._heights.has(e.id),e.canBeAnchor,t)),i+=t})),o},r._getSliceForCandidates=function(e,t){var n=(0,O.Z)(e),i=(0,D.Z)(e);return{start:n?t.indexOf(n):0,end:i?t.indexOf(i)+1:0}},r._getRenderCandidates=function(e,t){var n=r.props,i=n.minimumOffscreenToViewportRatio,o=n.preferredOffscreenToViewportRatio,s=He(t,i),a=He(t,o),c=r._isIdle&&!r._isInitialAnchoring,d=r._getItemsWithPositions(e),u=d.filter((function(e){return r._getRenderedItemRectInViewport(e).doesIntersectWith(c?a:s)})),l=r._getSliceForCandidates(u,d),h=function(e,t,n){if(n)return t;if(t.start>=e.start&&t.end<=e.end&&e.end-e.start<=50)return e;if(t.start>=e.end||t.end<=e.start)return t;var i=Math.max(e.start-t.start,t.end-e.end,0);return{start:Math.min(e.start+i,t.start),end:Math.max(e.end-i,t.end)}}(r._slice,l,c),m=d.slice(h.start,h.end);return{allItemsWithPositions:d,newRenderedItems:m,slice:h,arePreferredItemsRendered:c}},r._getIsHeightsReady=function(e){return(0,W.Z)(e,()},r._getHeightBetweenItems=function(e,t){return e&&t?r._getRenderedItemRectInViewport(t).getBottom()-r._getRenderedItemRectInViewport(e).getTop():0},r._getRenderedItemRectInViewport=r._updateRenderedItems=function(e,t){var n=r._getRenderCandidates(e,t),i=n.allItemsWithPositions,o=n.arePreferredItemsRendered,s=n.newRenderedItems,a=n.slice,c=0!==r._cellAnimations.size,d=r._shouldNormalize(e),u=(0,O.Z)(i),l=(0,D.Z)(i),h=r._getHeightBetweenItems(u,l),m=h+r._calculateHeadroom(i,t),_=r._getIsHeightsReady(s),f=!(q.ZP.isSafari()||q.ZP.isIOS()),p=!c&&_&&(r._isIdle||f||m<=t.getHeight())||_&&r._isInitialAnchoring,g=s;if(r._slice=a,_&&(r._isInitialAnchoring=!1),d&&p){var v=r._normalization(e,s),I=v.offset,w=v.renderedItems;g=w,r.setState({renderedItems:w,listHeightWithHeadroom:m,shouldAnimate:!d},(function(){var e=t;0!==I&&(r._viewport.scrollBy(-I),e=r._measureRelativeViewportRect()),e&&r._updatePositioning({renderedItems:g,relativeViewportRect:e,firstItem:u,newListHeight:h})}))}else r.setState({renderedItems:s,listHeightWithHeadroom:m,shouldAnimate:!0},(function(){!d&&o||r._scheduleUpdateDebounced(),r._updatePositioning({renderedItems:g,relativeViewportRect:t,firstItem:u,newListHeight:h})}))},r._updatePositioning=function(e){var t=e.firstItem,n=e.newListHeight,i=e.relativeViewportRect,o=e.renderedItems,s=r.props,a=s.list,c=s.onPositionUpdate;if(r._getIsHeightsReady(o)){var d=t?r._getRenderedItemRectInViewport(t).getTop():0;c(new fe({viewportRect:i,listRect:new te.Z(d,n),listLength:a.length,renderedItems:o.map((function(e){return{id:e.itemId,rectangle:new te.Z(e.offset,r._getHeightForItemId(e.itemId))}}))}))}},r._shouldNormalize=function(e){return r.props.hasNewContentAtBottom?r._getListOffset(e)-r._currentHeadroom!=0:0!==r._getListOffset(e)},r._normalization=function(e,t){var n=r._getListOffset(e);return{offset:n,renderedItems:t.map((function(e){return new ge(e.itemId,e.offset-n,e.visible,e.canBeAnchor)}))}},r._calculateHeadroom=function(e,t){return r.props.withoutHeadroom?(r._currentHeadroom=0,r._currentHeadroom):r.props.centerInitialAnchor?r._calculateTopHeadroom(e,t)+r._calculateBottomHeadroom(e,t):r.props.hasNewContentAtBottom?r._calculateTopHeadroom(e,t):r._calculateBottomHeadroom(e,t)},r._calculateBottomHeadroom=function(e,t){var n=(0,z.Z)(e,(function(e){return e.canBeAnchor})),i=(0,D.Z)(e);if(!i)return r._currentHeadroom=0,r._currentHeadroom;var o=r._getRenderedItemRectInViewport(i),s=o.getBottom()-(n?r._getRenderedItemRectInViewport(n).getTop():o.getTop());return r._currentHeadroom=Math.max(0,t.getHeight()-s+r._viewport.getOffsetBottom()),r._currentHeadroom},r._calculateTopHeadroom=function(e,t){var n=(0,z.Z)(e,(),i=(0,O.Z)(e);if(!i)return r._currentHeadroom=0,r._currentHeadroom;var o=r._getRenderedItemRectInViewport(i),s=(n?r._getRenderedItemRectInViewport(n).getBottom():o.getBottom())-o.getTop(),a=r._getDocumentViewportHeight()-t.getHeight();return r._currentHeadroom=Math.max(0,t.getHeight()-s-a),r._currentHeadroom},r._getListOffset=function(e){if(!e)return r.props.hasNewContentAtBottom?r._currentHeadroom:0;var t=r._getDistanceFromTop(e.itemId);return r.props.hasNewContentAtBottom?e.offset-t-r._currentHeadroom:e.offset-t},r._getAnchorItemCandidates=function(){var e=r.props.analytics,t=r._getFinalRenderedItems(),n=t.filter((function(e){var t=e.item;return t.canBeAnchor&&(r._isInitialAnchoring||!!r._heights.get(t.id))}));if(r._areAnchorsInvalidated){var i=t.filter((function(e){var t,n=e.item,i=null===(t=r._previousItemMap.get(n.id))||void 0===t?void 0:t.sortIndex;return i===j.Z||n.sortIndex===j.Z||i===n.sortIndex}));if(i.length!==t.length)return e.scribe({element:"scroller",action:"hoisted_anchor_invalidation"}),i;e.scribe({element:"scroller",action:"no_hoisted_anchor_invalidation"})}return n},r._shouldPinToNewest=function(){return!r._isInitialAnchoring&&!!r.props.pinToNewestWhenAtNewest&&r.isAtNewest()},r._getAnchor=function(e){if(r._shouldPinToNewest()&&!r.props.centerInitialAnchor){if(r.props.hasNewContentAtBottom){var t=(0,D.Z)(r.state.renderedItems);return t?{itemId:t.itemId,offset:t.offset}:void 0}var n=(0,O.Z)(r.props.list);return n?{itemId:n.id,offset:0}:void 0}var i=function(t){var n,i,r=(n=t,i=e,Math.max(0,Math.min(n.getBottom(),i.getBottom())-Math.max(n.getTop(),i.getTop())));return(t.getHeight()>0?r/t.getHeight():0)>.01?1:0},o=s=r._getAnchorItemCandidates(),a=Ae(s,(function(e,t){var n=new ge(e.item.id,e.offset,e.visible,!0,r._getHeight(e.item)).getRectInViewport(),s=new ge(t.item.id,t.offset,t.visible,!0,r._getHeight(t.item)).getRectInViewport();return r.props.hasNewContentAtBottom?i(n)-i(s)||Math.abs(o(n))-Math.abs(o(s)):i(n)-i(s)||Math.abs(o(s))-Math.abs(o(n))}));if(a)return{itemId:a.item.id,offset:a.offset};var c=(0,O.Z)(s);if(c)return{itemId:c.item.id,offset:c.offset};var d=(0,O.Z)(r.props.list);return d?{itemId:d.id,offset:0}:void 0},r._measureRelativeViewportRect=function(){var e=r._rootRef.current;if(e)return r._viewport.getRect().translateBy(-e.getBoundingClientRect().top)},r._getHeight=function(e){var t;return r._getHeightForItemId(e.id,null===(t=e.data)||void 0===t?void 0:t.type)},r._getHeightForItemId=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=r.props.assumedItemHeight,i=r._heights.get(e),o=(0,U.Z)(i)?i:"function"==typeof n?n(t):n;return Ie({cssPixels:o,dpr:r._devicePixelRatio})},r._getDistanceFromTop=function(e){var t=r.props.list,n=t.findIndex((function(t){return t.id===e}));return n>=0?t.slice(0,n).reduce((,0):0},r._getItemsWithin=function(e){return r._getFinalRenderedItems().filter((function(t){var n=t.item,i=t.offset;return new te.Z(i,r._getHeight(n)).doesIntersectWith(e)}))},r._measureHeights=function(){r._cells.forEach(()},r._handleAnimationStarted=function(e,t){r._cellAnimations.add(e),t&&(r._cellAnimationStyle=t)},r._handleAnimationEnded=r._handleItemVisible=r._reportVisibilityMeasurements=function(){if(r._visibilityMeasurements.size){var e=0;r._visibilityMeasurements.forEach(();var t=Math.round(e/r._visibilityMeasurements.size),n=q.ZP.isDesktopOS()?"scroller_v3":"scroller_v3_mobile";ee.IM("scroller:ttfv:".concat(n),{duration_ms:t}),r._visibilityMeasurements.clear()}},r._updateItemHeight=function(e,t){r._pendingHeightUpdates.set(e,t);var n=(0,W.Z)(r.state.renderedItems,();(n||r._pendingHeightUpdates.size>50)&&(r._update(),r._pendingHeightUpdates.clear())},r._handleHeightChanged=function(e,t){r._heights.get(e)!==t&&(r._cellAnimations.has(e)?r._scheduleCriticalUpdate():r._updateItemHeight(e,t))},r._setItemRef=function(e,t){t?(r._cells.set(e,t),r._renderedItemsStatus.add(e)):(r._cells.delete(e),r._renderedItemsStatus.delete(e))},r._getRenderedItemsWithFocusability=function(){return r._getFinalRenderedItems().map((function(e){var t=e.item,n=e.visible,i=r._cells.get(t.id);return{id:t.id,focusable:!(!i||!i.isFocusable()),visible:n}}))},r._findNewestVisibleId=function(){var e=r._measureRelativeViewportRect(),t=e&&r._getFinalRenderedItems().find((function(t){var n=t.item,i=t.offset;return new te.Z(i,r._getHeight(n)).doesIntersectWith(e)}));return t&&t.item.id},r.adjustFocusBy=function(e){r._hasUserChangedFocus=!0;var t=r._getRenderedItemsWithFocusability(),n=r._activeEntryId&&function(e,t,n){var i=e?(0,me.Z)(n,(function(t){return t.id===e})):-1;if(i>=0)for(var r=i>=0?i+t:0;r>=0&&r<n.length;r+=t)if(n[r].focusable)return n[r].id;return i>=0?e:void 0}(r._activeEntryId,e,t);if(!n){var i=r._findNewestVisibleId();n=i?function(e,t){var n,i=(0,me.Z)(t,();if(i>=0){var r=t.find(();n=r?r.id:void 0}return n||_e(t)}(i,t):_e(t)}n&&r._updateFocusToItem(n)},r._updateFocusToItem=function(e,t){if(e!==r._activeEntryId){var n=r._getRenderedItemsWithFocusability().find((),i=r._cells.get(e),o=i&&i.getElement();n&&(r._activeEntryId=e,o&&function(e,t,n){var i=he.findDOMNode(e),r=i&&i instanceof window.HTMLElement&&i.querySelector("a, [tabindex='0']");if(r){"function"==typeof r.scrollIntoView&&r.scrollIntoView(n),r.focus();var o=(t||ne.Z.root()).getRect().getTop();o>0&&(null==t||t.scrollBy(-1*o))}}(o,r._viewport,t))}},r.scrollToNewest=function(e){r._hasUserChangedFocus=!0,r.props.hasNewContentAtBottom?r._viewport.scrollTo(0,r.state.listHeightWithHeadroom):r._viewport.scrollToTop(),e&&(r._update(),N()((function(){var e=r._getRenderedItemsWithFocusability(),t=_e(e);t&&r._updateFocusToItem(t,{block:"nearest"})})))},r.isAtNewest=function(){var e=r._measureRelativeViewportRect();return!e||(r.props.hasNewContentAtBottom?e.getBottom()>=r.state.listHeightWithHeadroom-50:e.getTop()<=50)},r._viewport=e.viewport,r._devicePixelRatio=window.devicePixelRatio||1,r.state={renderedItems:[],listHeightWithHeadroom:0,shouldAnimate:!1};var s=r.props,a=s.cacheKey,c=s.initialAnchor;return a&&ve.hasOwnProperty(a)?r._heights=ve[a]:(r._heights=new Map,ve[a]=r._heights),r._scheduleCriticalUpdate=(0,x.Z)((function(){return r._update()}),window.requestAnimationFrame),r._scheduleUpdate=window.requestIdleCallback?(0,x.Z)((function(){r._update()}),window.requestIdleCallback):r._scheduleCriticalUpdate,r._scheduleCriticalUpdateThrottled=(0,h.Z)((,100,{trailing:!0}),r._scheduleUpdateDebounced=(0,B.Z)(r._scheduleUpdate,250),r._wasPreviouslyAtNewestEnd=!c,r._removeViewportResizeHandler=r._viewport.addRectChangeListener(r._scheduleCriticalUpdateThrottled),r._shouldUseTopPositioning=r.context.featureSwitches.isTrue("responsive_web_scroller_top_positioning_enabled")||q.ZP.isMobileOS()&&q.ZP.isSafari(),window.scroller=(0,P.Z)(r),r}return(0,s.Z)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.listHeightWithHeadroom,i=t.renderedItems,r=t.shouldAnimate,o=this.context.featureSwitches,s=this.props.accessibilityRole,a=this._getIsHeightsReady(i),c=this._getFinalRenderedItems();return d.createElement(pe.Z.Provider,{value:this._getPositioningContext(a)},d.createElement("div",{ref:this._rootRef,role:s,style:{position:"relative",minHeight:n}},c.map((function(t){var n=t.item,i=t.offset,s=t.visible,a={top:e._shouldUseTopPositioning?"".concat(i,"px"):void 0,transform:e._shouldUseTopPositioning?void 0:"translateY(".concat(i,"px)")};return d.createElement(le,{isAnimationDisabled:o.isTrue("gryphon_faster_cell_entrance"),item:n,key:n.id,onAnimationEnded:e._handleAnimationEnded,onAnimationStarted:e._handleAnimationStarted,onHeightChanged:e._handleHeightChanged,onVisible:e._handleItemVisible,positioningStyle:a,setAPI:e._setItemRef,shouldAnimate:r,translationTransitionStyle:e._cellAnimationStyle,visible:s})}))))}},{key:"shouldComponentUpdate",value:function(e,t){return!M()(this.props,e)||!(0,K.Z)(this.state,t)}},{key:"componentDidUpdate",value:function(e,t){var n=this;e.list!==this.props.list&&(this._isInitialAnchoring||(this._previousItemMap=new Map,e.list.forEach((),this._areAnchorsInvalidated=!0,this._shouldPinToNewest()&&e.list.length!==this.props.list.length&&this.props.analytics.scribe({element:"scroller",action:"pin_to_top_attempt"})),this._scheduleCriticalUpdate()),e.cacheKey!==this.props.cacheKey&&(this._hasUserChangedFocus=!1),this._wasPreviouslyAtNewestEnd&&this.props.list.find(()&&this._getHeightForItemId(re.ZF)>0&&!this.props.centerInitialAnchor&&this.scrollToNewest()}},{key:"componentDidMount",value:function(){var e,t=this;this._removeScrollHandler=this._viewport.addScrollListener(this._handleScroll),this._removeProgrammaticScrollHandler=this._viewport.addProgrammaticScrollListener(this._handleProgrammaticScroll),this._removeFullscreenEnterHandler=(e=this._handleEnterFullscreen,Q||X(),$.add(e),function(){return $.delete(e)}),this._removeFullscreenExitHandler=function(e){return Q||X(),J.add(e),(this._handleExitFullscreen);var n=this._getInitialRenderedItems();if(this.props.isManualScrollRestoration&&this._viewport.scrollBy(-1),this._isInitialAnchoring=!0,n.length>0){var i=this._getDocumentViewportHeight();this.setState({renderedItems:n,shouldAnimate:!0,listHeightWithHeadroom:i},(function(){var e=t.props.initialAnchor;if(e&&e.type===Z.Anchor)t._viewport.scrollBy(t._getViewportOffsetCorrection()),e.anchor.wasFocused&&t._updateFocusToItem(e.anchor.id);else if(e&&e.type===Z.FocusedItem){var n=t.props.centerInitialAnchor?{behavior:"smooth",block:"center"}:void 0;t._updateFocusToItem(e.itemId,n)}window.requestAnimationFrame(()}))}else this._update()}},{key:"componentWillUnmount",value:function(){this._removeScrollHandler&&this._removeScrollHandler(),this._removeProgrammaticScrollHandler&&this._removeProgrammaticScrollHandler(),this._removeFullscreenEnterHandler&&this._removeFullscreenEnterHandler(),this._removeFullscreenExitHandler&&this._removeFullscreenExitHandler(),this._removeViewportResizeHandler&&this._removeViewportResizeHandler(),this._reportVisibilityMeasurements()}},{key:"_getDocumentViewportHeight",value:,{key:"_getFinalRenderedItems",value:]),n}(d.Component);we.contextType=Y.rC,we.defaultProps={centerInitialAnchor:!1,nearEndProximityRatio:1.75,nearStartProximityRatio:.25,assumedItemHeight:400,hasNewContentAtBottom:!1,minimumOffscreenToViewportRatio:.5,preferredOffscreenToViewportRatio:2.5};const Re=(0,G.Z)((0,ie.Z)(we));var ye,Ae=function(e,t){if(e.length)return e.reduce(()},He=function(e,t){var n=t*e.getHeight();return new te.Z(e.getTop()-n,e.getHeight()+2*n)},Te=Se=function(e){(0,a.Z)(n,e);var t=(0,c.Z)(n);function n(e,s){var a;(0,o.Z)(this,n),(a=t.call(this,e,s))._renderer=d.createRef(),a._isModal=!1,a._getList=(0,l.Z)((function(e,t,n,i,o,s,a){var c=[];return e&&c.push((0,S.f)("$header","header",(function(){return e}),!0)),c.push.apply(c,(0,r.Z)(n.map((function(e){return(0,S.f)(s(e),e,i,!o||o(e),a&&a(e))})))),t&&c.push((0,S.f)("$footer","footer",(,!1)),c})),a._render=function(e){var t,n=e.isModal,r=a.props,o=r.accessibilityRole,s=r.anchoring,c=r.assumedItemHeight,u=r.cacheKey,l=r.canBeAnchorFunction,h=r.centerInitialAnchor,m=r.footer,_=r.hasNewContentAtBottom,p=r.header,v=r.identityFunction,I=r.initialAnchor,w=r.items,R=r.renderer,y=r.sortIndexFunction,A=r.withKeyboardShortcuts,H=r.withoutHeadroom,T=a._scrollRestorationAnchor[u],S=T?E(T):I?F(I.id):void 0;return n&&(a._isModal=!0,ye=!0),d.createElement(g.Z,{enabled:A,handlers:(t={},(0,i.Z)(t,f.uq.refresh,a._handleKeyboardRefresh),(0,i.Z)(t,f.uq.nextItem,a._handleKeyboardFocusNext),(0,i.Z)(t,f.uq.previousItem,a._handleKeyboardFocusPrevious),t)},d.createElement(Re,{accessibilityRole:o,assumedItemHeight:c,cacheKey:u,centerInitialAnchor:h,hasNewContentAtBottom:_,initialAnchor:S,isManualScrollRestoration:window.history&&"manual"===window.history.scrollRestoration,key:u,list:a._getList(p,m,w,R,l,v,y),onPositionUpdate:a._handlePositionUpdate,onScrollEnd:a._handleScrollEnd,pinToNewestWhenAtNewest:s.pinToNewestWhenAtNewest,ref:a._renderer,withoutHeadroom:H}))},a._handleScrollEnd=a._handlePositionUpdate=function(e){var t=a.props.onItemsRendered;a._edgeProximity.handlePositioningUpdate(e),t&&t({positions:e.getRenderedItems(),viewport:e.getForViewport()}),a._preservePosition(a._customLocation)},a._shouldPreventKeyboardShortcuts=a._handleKeyboardRefresh=(0,h.Z)((function(){var e=a.props.onKeyboardRefresh;a._shouldPreventKeyboardShortcuts()||e&&e()}),1e3),a._handleKeyboardFocusNext=function(){!a._shouldPreventKeyboardShortcuts()&&a.adjustFocusBy(1)},a._handleKeyboardFocusPrevious=function(){!a._shouldPreventKeyboardShortcuts()&&a.adjustFocusBy(-1)},a.isAtNewest=function(){return!a._renderer.current||a._renderer.current.isAtNewest()};var c=e.nearEndProximityRatio,u=e.nearStartProximityRatio;return a._edgeProximity=new T([{condition:I(5),callback:function(e){return a.props.onAtStart(e)}},{condition:R(u),callback:function(e){return a.props.onNearStart(e)}},{condition:y(c),callback:function(e){return a.props.onNearEnd(e)}},{condition:w(5),callback:]),a._loadStoredPosition(e,a.context),a}return(0,s.Z)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.noItemsRenderer;return null!=t&&t.length?d.createElement(u.Z.Consumer,null,this._render):n()}},{key:"componentDidMount",value:,{key:"componentDidUpdate",value:,{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.cacheKey!==e.cacheKey&&this._loadStoredPosition(e,this.context)}},{key:"componentWillUnmount",value:,{key:"_preservePosition",value:function(e){if(e&&this._renderer.current){var t=this._renderer.current.getAnchors();e.savePosition(t)}}},{key:"_loadStoredPosition",value:function(e,t){this._customLocation=t;var n=[];if(this._customLocation){var r=this._customLocation.getSavedPosition();(n=r&&r.length?r:[]).length>0&&this._customLocation&&this._customLocation.claimScrollRestoration()}var o=n.find((function(t){var n=t.id;return t.wasFocused&&e.items.some((function(t){return e.identityFunction(t)===n}))}))||n.find((function(t){t.distanceToViewportTop;var n=t.id;return e.items.some(()}));this._scrollRestorationAnchor=(0,i.Z)({},e.cacheKey,o)}},{key:"adjustFocusBy",value:function(e){this._renderer.current&&this._renderer.current.adjustFocusBy(e)}},{key:"scrollToNewest",value:]),n}(d.PureComponent);Se.contextType=p.y3,Se.defaultProps={anchoring:b.Z,centerInitialAnchor:!1,hasNewContentAtBottom:!1,onPositionRestored:m.Z,onAtEnd:m.Z,onAtStart:m.Z,onNearEnd:m.Z,onNearStart:m.Z,onScrollEnd:m.Z,nearEndProximityRatio:1.75,nearStartProximityRatio:.25,noItemsRenderer:_.Z,assumedItemHeight:400,minimumOffscreenToViewportRatio:.5,preferredOffscreenToViewportRatio:2.5,withoutHeadroom:!1,withKeyboardShortcuts:!1}},792684:(e,t,n)=>{n.d(t,{f:()=>s});var i=n(709249),r=n(887371),o=(n(202784),function(){eturn(0,r.Z)(e,[{key:"render",value:function(e){return(0,this._renderer)(this.data,e)}}]),e}()),s=function(e,t,n,i){return new o(e,t,n,i,arguments.length>4&&void 0!==arguments[4]?arguments[4]:"-1")}},644682:(e,t,n)=>{n.d(t,{Z:()=>i});const i=Object.freeze({MOVEMENT:"movement",LIST_UPDATE:"list_update",INITIAL_POSITION:"initial_position"})},130556:(e,t,n)=>{n.d(t,{Z:()=>o});var i=n(133028),r=n(528042);const o=(0,i.Z)((0,i.Z)({},r.Z),{},{pinToNewestWhenAtNewest:!0})},76909:(e,t,n)=>{n.d(t,{V_:()=>h,ZF:()=>c,aM:()=>a,oA:()=>s,sV:()=>l,tn:()=>o,u2:()=>d,yW:()=>u});n(202784);var i=n(222167),r=function(e,t){return{entry:{id:t,time:"",type:e},isActive:!1,isRapidFire:!1,isFirstRapidFire:!1,isLastPersistedMessage:!1,isLastRapidFire:!1,type:e}},o=r(i.Cr.CONVERSATION_PROFILE_INFO_HEADER,"conversationProfileInfoHeader"),s=r(i.Cr.ENCRYPTED_CONVERSATION,"encryptedConversation"),a=r(i.Cr.DELEGATE_ALERT_BANNER,"delegateAlertBanner"),c="typingIndicator",d=r(i.Cr.TYPING_INDICATOR,c),u=r(i.Cr.READ_ONLY_INDICATOR,"readOnlyIndicator"),l=r(i.Cr.LOADING_INDICATOR,"loadingIndicator"),h=r(i.Cr.NEW_MESSAGES_DIVIDER,"newMessagesDivider")},655249:(e,t,n)=>{n.d(t,{Z:()=>i});const i=function(e,t){var n=null,i=return },100417:(e,t,n)=>{n.d(t,{Z:);const i=}]);
//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/loader.AbsolutePower.d762c93a.js.map