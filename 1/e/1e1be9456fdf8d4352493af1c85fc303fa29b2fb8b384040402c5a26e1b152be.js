"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3878],{71251:(e,t,a)=>{a.d(t,{j:()=>o});var i=a(50959),s=a(22795),l=a(57562),r=a(13734),n=a(11527);const o=i.memo((function(e){let{uri:t,size:a=l.q.md,className:o,onClick:c,canDownload:d,condensedAll:u}=e;const[m,p]=(0,s.Z)(t),h=(0,r.o)(),g=(0,i.useCallback)((()=>{h({targetUri:t,intent:m?"unsave":"save",type:"click"}),p(!m)}),[h,t,m,p]);return(0,n.jsx)(l.o,{className:o,isFollowing:m,onFollow:g,onClick:c,uri:t,size:a,canDownload:d,condensedAll:u})}))},4576:(e,t,a)=>{a.d(t,{T:()=>m});var i=a(50959),s=a(82187),l=a.n(s),r=a(40763),n=a(85648),o=a(55842),c=a(74713);const d="pvGZ831aNzHTQMZ8CA_u";var u=a(11527);const m=(0,i.memo)((function(e){let{onClick:t=(()=>{}),size:a,className:s,uri:m,sharingInfo:p,interactionData:h,ariaLabel:g=n.ag.get("mwp.list.item.share"),condensedAll:x}=e;const{onCopyLink:v}=(0,c.y)({sharingInfo:p,uri:m,interactionData:h}),y=(0,i.useCallback)((()=>{v(),t()}),[t,v]);return(0,u.jsx)(o.E,{ariaLabel:g,size:a,onClick:y,className:l()(d,s),icon:r.M,condensedAll:x,condensed:!0})}))},12895:(e,t,a)=>{a.d(t,{l:()=>m,B:()=>h});var i=a(50959),s=a(10356),l=a(7935);a(22849),a(606);function r(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return;if(!(0,l.lK)(e))return;const i=e.querySelector('[tabindex="0"]');t===s.N.UP&&(0,l.Bu)(i,n(e,i,s.N.UP,a)),t===s.N.DOWN&&(0,l.Bu)(i,n(e,i,s.N.DOWN,a)),t===s.N.RIGHT&&(0,l.Bu)(i,o(i,s.N.RIGHT,a)),t===s.N.LEFT&&(0,l.Bu)(i,o(i,s.N.LEFT,a)),t===s.N.HOME&&(0,l.Bu)(i,c(s.N.HOME,a)??i),t===s.N.END&&(0,l.Bu)(i,c(s.N.END,a)??i)}function n(e,t,a){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=t.closest('li[role="row"]');if(!r)return t;let n=r;const c=Array.from(e.querySelectorAll('li[role="row"]')),d=Array.from(r.querySelectorAll(l.Yf)),u=c.indexOf(r);if(u<0)return t;const m=(i&&t!==d[0]||!i&&t!==r)&&!(t instanceof HTMLLIElement);if(a===s.N.UP){if(document.activeElement===e){n=c[c.length-1];return(i?n.querySelector(l.Yf):n)??t}if(m)return o(t,s.N.LEFT,i);let a=u-1;if(-1===a)return t;n=c[a],a-=1}else if(a===s.N.DOWN){if(document.activeElement===e){n=c[0];return(i?n.querySelector(l.Yf):n)??t}if(m)return o(t,s.N.RIGHT,i);let a=u+1;if(a===c.length)return t;n=c[a],a+=1}return(i?n.querySelector(l.Yf):n)??t}function o(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=e.closest('li[role="row"]');if(!i)return e;let r=e;const n=Array.from(i.querySelectorAll(l.Yf)),o=n.indexOf(e);let c=0;if(t===s.N.RIGHT&&o-1!==n.length)c=o+1;else{if(t===s.N.LEFT&&-1===o)return i;if(t===s.N.LEFT&&0!==o)c=o-1;else if(t===s.N.LEFT&&0===o){return(a?i.querySelector(l.Yf):i)??i}}return r=n.at(c),r??e}function c(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{currentFocus:a,listEl:i}=function(){const e=document.activeElement,t=null==e?void 0:e.closest("ul");return((0,s.L)(e)||e instanceof HTMLLIElement)&&t?{currentFocus:e,listEl:t}:{currentFocus:null,listEl:null}}();if(null===a||null===i)return null;const r=a.closest('li[role="row"]');if(!r)return a;const n=Array.from(i.querySelectorAll('li[role="row"]')),o=Array.from(r.querySelectorAll(l.Yf));if(n.indexOf(r)<0)return a;const c=t&&a===o[0]||!t&&a===r;if(e===s.N.HOME){if(c){return(t?n[0].querySelector(l.Yf):n[0])??a}return(t?o[1]:o[0])??a}if(e===s.N.END){if(c){return(t?n[n.length-1].querySelector(l.Yf):n[n.length-1])??a}return o[o.length-1]??a}return a}var d=a(13803),u=a(11527);const m=e=>{let{onKeyDown:t,children:a,firstInteractiveIsWrapper:n=!1,...o}=e;const c=(0,i.useRef)(null);(0,d.W)(c);const m=(0,i.useCallback)((e=>{var a;null!==(a=c.current)&&void 0!==a&&a.contains(e.target)&&("ArrowUp"!==e.key&&"ArrowDown"!==e.key&&"Home"!==e.key&&"End"!==e.key||e.preventDefault(),"ArrowUp"!==e.key&&"ArrowDown"!==e.key||document.documentElement.classList.remove("no-focus-outline"),"ArrowUp"===e.key&&r(c.current,s.N.UP,n),"ArrowDown"===e.key&&r(c.current,s.N.DOWN,n),"ArrowRight"===e.key&&r(c.current,s.N.RIGHT,n),"ArrowLeft"===e.key&&r(c.current,s.N.LEFT,n),"Home"===e.key&&r(c.current,s.N.HOME,n),"End"===e.key&&r(c.current,s.N.END,n),null==t||t(e))}),[n,t]),p=(0,i.useCallback)((e=>{if(!c.current)return;const t=e.target,a=c.current.querySelector('[tabindex="0"]');t.closest('li[role="row"]')&&t!==a&&(0,l.Bu)(a,t,{preventScroll:!0})}),[]);return(0,u.jsx)("ul",{role:"treegrid",ref:c,onKeyDown:m,onFocus:p,tabIndex:0,...o,children:a})};var p=a(72741);const h=e=>{let{children:t,innerRef:a,reRunOnDOMUpdate:s=!1,...l}=e;const r=(0,i.useRef)(null),n=a??r;return(0,p.O)(n,s),(0,u.jsx)("li",{ref:n,"aria-expanded":"true","aria-level":1,role:"row",...l,children:t})}},28133:(e,t,a)=>{a.r(t),a.d(t,{ThisIsTourCard:()=>d,default:()=>d,useThisisPlaylistExtensionQuery:()=>h});var i=a(69736),s=a(52438),l=a(85648),r=a(60046),n=a(80626),o=a(97607),c=a(11527);const d=e=>{const{artistImageUrl:t,artistName:a,artistConcertsUri:d,spec:u}=e,m=(0,n.$P)(),p=(0,n.Wi)(u.concertsCardFactory({identifier:a,uri:d,reason:"This is On Tour phase 1 MVP"}));return t&&a&&d?(0,c.jsxs)("section",{ref:p,className:"contentSpacing",children:[(0,c.jsx)(i.x,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:l.ag.get("concerts")}),(0,c.jsx)("div",{className:o.Z.cards,children:(0,c.jsxs)("div",{className:o.Z.tourCard,"data-testid":"on-tour-card",children:[(0,c.jsx)("img",{className:o.Z.cardImage,src:t,alt:""}),(0,c.jsxs)("div",{className:o.Z.cardContent,children:[(0,c.jsx)(i.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:o.Z.subtitle,children:l.ag.get("concerts_on_tour")}),(0,c.jsx)(i.x,{as:"h1",variant:"bodyMediumBold",className:o.Z.title,semanticColor:"textBase",children:a}),(0,c.jsx)(r.default,{to:d,className:o.Z.cardLink,children:(0,c.jsx)(s.P,{as:"span",size:"small",onClick:()=>{const e=u.concertsCardFactory({identifier:a,uri:d,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:d});m.logInteraction(e)},className:o.Z.cardButton,children:l.ag.get("concerts_see_all_events")})})]})]})})]}):null};var u=a(23120),m=a(20069);const p=new u.o("thisisPlaylistExtension","query","c3c3145aca9849ce8f4d742f9d4dc3be4d945717ce66347d1b3710b8a06749b6",null),h=(e,t)=>(0,m.a)(p,e,t)},59390:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Fs});a(75930),a(46758),a(53321),a(55115),a(86277),a(92372),a(70069),a(44227),a(91499),a(68856),a(18004),a(16527),a(65484),a(35174),a(96241);var i=a(50959),s=a(29132),l=a(75802),r=a(69736),n=a(10226),o=a(11444),c=a(11317),d=a(85648),u=a(35360),m=(a(39301),a(4815)),p=a(11527);const h=(e,t,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(a),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),g=e=>{let{clickTracking:t,clickThrough:a,thirdPartyImpression:l,impression:n,logoUrl:o,advertiserName:c,creativeId:u,lineItemId:g}=e;const x=(0,s.I0)(),[v,y]=(0,i.useState)(!1);return(0,i.useEffect)((()=>(x((0,m.Vw)()),x((0,m.kh)(h("event_viewed",u,g))),()=>{x((0,m.AG)())})),[x,u,g]),(0,p.jsxs)("div",{className:"sponsor-container",children:[(0,p.jsx)(r.x,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:d.ag.get("playlist.presented_by",c)}),(0,p.jsxs)("div",{className:"sponsor-logo",children:[(0,p.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:a,onClick:()=>{x((0,m.kh)(h("event_clicked",u,g))),y(!0)},children:(0,p.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:o,alt:c,"data-ta-id":"sponsor-logo"})}),(0,p.jsx)("img",{className:"sponsor-logo__imp-pixel",src:n,alt:""}),l&&(0,p.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:l,alt:""}),v&&(0,p.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:t,alt:""})]})]})},x=e=>{let{playlistUri:t}=e;const a=(0,s.I0)(),l=(0,s.v9)((e=>e.ads.sponsoredPlaylist.previewAd||e.ads.sponsoredPlaylist.sponsoredPlaylist.get(t)));return(0,i.useEffect)((()=>{l||a((0,m.fd)(t))}),[a,t,l]),l?(0,p.jsx)("div",{children:(0,p.jsx)(g,{...l})}):null},v=e=>{let{playlistUri:t}=e;const a=(0,s.I0)(),l=(0,s.v9)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),r=(0,s.v9)((e=>e.ads.sponsoredPlaylist.previewAd));(0,i.useEffect)((()=>{l||a((0,m.z8)())}),[a,l]);const n=r||l&&((e,t)=>{const a=Date.now()/1e3,i=e.split(":"),s=i[i.length-1];return t.some((e=>{let{playlistId:t,endTime:i,startTime:l}=e;return t===s&&a>=l&&a<(i||a+1)}))})(t,l);return n?(0,p.jsx)(x,{playlistUri:t}):null};var y=a(46771),f=a(41038),b=a(16145),j=a(43286),k=a(22795);const C="hOOwEKqNuXrNvOCB1SgZ",T="csEdkIN9z2LjJIuZraqz",R=e=>{let{uri:t}=e;const[a,s]=(0,k.Z)(t),n=(0,l.s0)(),o=(0,i.useCallback)((()=>{s(!1),n("/",{replace:!0})}),[n,s]);return(0,p.jsxs)("div",{className:C,children:[(0,p.jsx)(b.l,{size:"xxlarge"}),(0,p.jsxs)("div",{className:T,children:[(0,p.jsx)(r.x,{as:"p",variant:"titleSmall",children:d.ag.get("forbidden-page.title")}),(0,p.jsx)(r.x,{as:"p",variant:"bodySmall",children:d.ag.get("forbidden-page.description")})]}),a&&(0,p.jsx)(j.D,{colorSet:"invertedLight",onClick:o,children:d.ag.get("remove_from_your_library")})]})};var S=a(91643),A=a(50879),I=a(21536),N=a(65432),E=a(50216),L=a(56822),P=a(61046),D=a(28133),w=a(19848),_=a(17053),U=a(58301),M=a(52115),O=a(23055),B=a(82857);const F=e=>e.seoExperiment,Z=(0,O.P1)(F,(e=>null==e?void 0:e.uri)),K=((0,O.P1)(F,(e=>null==e?void 0:e[B.p.TRACK])),(0,O.P1)(F,(e=>null==e?void 0:e[B.p.ALBUM])),(0,O.P1)(F,(e=>({...null==e?void 0:e[B.p.PLAYLISTV2],...null==e?void 0:e[B.p.PLAYLIST]}))));var V=a(13734),z=a(9443),H=a(1142),W=a(48948),Q=a(51450),q=a(50540),G=a(24071),J=a(95504),Y=a(17676),X=a(91530),$=a(87350);const ee=e=>{let{context:t,shouldFire:a}=e;const l=(0,q.g)(),r=(0,s.v9)($.n5),o=(0,s.v9)(X.rZ),c=(0,n.W6)(Y.kye),d=(0,G.s4)(),u=(0,i.useCallback)((()=>{const e={category:"rpp_exposures",action:"playlist_page_visit",variant:c,label:"dwp",os:(0,J.y)(),context:t,country:r?o:"",sp_t:(0,Q.vQ)("sp_t")};l?d.send((0,W.k)(e)):d.send((0,H.x)(e))}),[c,t,r,o,l,d]);(0,i.useEffect)((()=>{a&&u()}),[u,a])};var te=a(71318),ae=a(11090),ie=a(64222),se=a(2800),le=a(23255),re=a(20069),ne=a(22527),oe=a(1740),ce=a(91415),de=a(71854),ue=a(57158);var me=a(73689),pe=a(39600),he=a(29673),ge=a(80626),xe=a(47895),ve=a(40234);a(45205);let ye=function(e){return e.RPP="rich-playlist-pages-2",e.TEST="test",e}({}),fe=function(e){return e.CONTROL="0",e.VARIANT="1",e}({});var be=a(12895),je=a(75390);const ke=[],Ce=(e,t)=>{const a=[];let i=e,s=t;for(;i>0;){const t=Math.ceil(i/s);a.push({first:e-i,nrItems:t}),i-=t,s--}return a},Te=e=>{var t;const{itemsInNode:a,renderItem:i,renderPlaceholder:s,estimatedHeight:l,scrollNodeRef:r,nrRowsOverscan:n=10,nrInitialInView:o=0,firstIndex:c,heights:d,fanOut:u=2}=e,{ref:m,inView:h,entry:g}=(0,je.YD)({root:r.current,rootMargin:n*l+"px 0px",initialInView:c<o}),x=`${c}-${a}`;d[x]??(d[x]=l*a),null!=g&&null!==(t=g.boundingClientRect)&&void 0!==t&&t.height&&(d[x]=g.boundingClientRect.height);const v=d[x];return 0===a?null:h?1===a?(0,p.jsx)("div",{ref:m,role:"presentation",children:i(c,v)}):(0,p.jsx)("div",{ref:m,role:"presentation",children:Ce(a,u).map(((t,a)=>{let{first:i,nrItems:s}=t;return(0,p.jsx)(Te,{...e,itemsInNode:s,firstIndex:c+i},a)}))}):(0,p.jsx)("div",{ref:m,role:"presentation",children:s(`${v}px`)})},Re=e=>{const t=(e=>{var t;const a=(null===(t=ke.find((t=>t.key===e)))||void 0===t?void 0:t.heights)||{},s=(0,i.useCallback)((t=>{if(!e)return;const a=ke.findIndex((t=>t.key===e));-1===a?ke.push({key:e,heights:t}):(ke[a].heights=t,ke.push(ke.splice(a,1)[0])),ke.length>10&&ke.shift()}),[e]),l=(0,i.useRef)({...a});return(0,i.useEffect)((()=>()=>{s(l.current)}),[s]),l.current})(e.persistanceKey);return(0,p.jsx)(Te,{...e,itemsInNode:e.totalCount,firstIndex:0,heights:t,nrInitialInView:e.nrInitialInView})};var Se=a(66514),Ae=a(3853),Ie=a(64464),Ne=(a(22849),a(606),a(82187)),Ee=a.n(Ne),Le=a(40688),Pe=a(52438),De=a(32394),we=a(6936),_e=a(99838),Ue=a(20580),Me=a(91023),Oe=a(60046),Be=a(5542),Fe=a(69053),Ze=a(3319),Ke=a(59047),Ve=a(1469),ze=a(93246),He=a(65019),We=a(23769);var Qe=a(77861),qe=a(78706),Ge=a(44724);const Je="JgxVj0lHUDTf9MS1jJpk",Ye="m5NcxNs6qkNbc9Wdxed7",Xe=e=>{let{isExplicit:t,children:a}=e;return(0,p.jsxs)("div",{className:Je,children:[t&&(0,p.jsx)(Ge.N,{}),(0,p.jsx)(r.x,{variant:"bodySmall",className:Ye,children:a})]})};var $e=a(25331),et=a(61058);const tt="small",at="ci11tAmTK1LnxThQkXPy",it="_2sJPwAAp1wY1Ftke6iFe",st="yuNzasMLs7hvemHI4d8Q",lt="abYR6tZoE7BdzThmWTb0",rt="GOcKQxqNMhGzbGiAXBig",nt="yFQjuDAhri_egM1pwn70",ot=(0,i.memo)((function(e){const{breakpoint:t,className:a,showSeparator:i,...s}=e;return(0,p.jsx)($e.w,{className:Ee()(a,at,{[nt]:i}),hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",layout:t===tt?"regular":"wide",hoverAnimationDuration:"0ms",horizontalGap:t===tt?"12px":"16px",paddingBlockStart:"12px",paddingBlockEnd:"12px",...s})}));var ct=a(77366),dt=a(29390);const ut=e=>{let{description:t,children:a}=e;return(0,p.jsxs)("div",{className:lt,children:[t&&(0,p.jsx)(ct.o,{lineClamp:2,as:"div",dir:"auto",children:(0,p.jsx)(dt.w,{asTextContent:!0,html:t})}),a]})};var mt=a(61027);const pt=e=>{let{isPlaying:t,onClickPlay:a,name:i,authorName:s,isLocked:l,children:r}=e;return(0,p.jsxs)("div",{className:rt,children:[(0,p.jsx)("div",{className:it,children:r}),(0,p.jsx)(mt.f,{size:"small",version:mt.u.secondary,onClick:a,isPlaying:t,ariaPlayLabel:d.ag.get("tracklist.a11y.play",i,s),ariaPauseLabel:d.ag.get("tracklist.a11y.pause",i,s),locked:l})]})};var ht=a(93421),gt=a(11401),xt=a(1134);const vt=e=>{let{images:t,breakpoint:a,type:i,name:s}=e;const l=(0,xt.TJ)();return(0,p.jsx)(ht.O,{fadeIn:!0,images:l(t,48),shape:ht.K.ROUNDED_CORNERS,size:a===tt?gt.m$.SIZE_64:gt.m$.SIZE_112,iconSize:a===tt?"medium":"xlarge",type:i,title:s,loadingMode:"eager"})};var yt=a(97345);const ft=e=>{let{children:t}=e;return(0,p.jsx)(yt.g,{lineClamp:2,as:"div",dir:"auto",children:t})};var bt=a(38338),jt=a(71251),kt=a(97013),Ct=a(4576);const Tt="WdYB8aMUe06dOu4TmYik",Rt="b1X4Ya4bp35IsN6tPGZw",St="aCdPMQVcvScaa22utIJM",At=(0,i.memo)((function(e){var t;let{book:a,contextUri:s,featureIdentifier:n,sharingInfo:o,uid:u,rating:m,isRecommendation:h=!1,canRemove:g=!1,showSeparator:x=!1,...v}=e;const{name:y,description:f,isLocked:b,isExplicit:j,images:C,type:T,uri:R,authorName:S,consumptionCapExplanation:A,durationMs:I,topics:N=[],signifierText:E}=a,L=(0,ge.$P)(),{spec:P}=(0,ge.fU)(_e.F,{data:{position:0,uri:R}}),{isPlaying:D,isActive:w,togglePlay:_}=(0,ne.n)({uri:R},{featureIdentifier:n}),U=(0,l.s0)(),M=(0,c.EC)(R).toURLPath(!0),{addItems:O}=(0,oe.Yv)(s),B=(0,et.jh)()===et.Uo.SMALL?"small":"large",F=(e=>{const t=(0,ze.z)(),a=(0,Ke.NL)(),s=(0,i.useRef)(null),l=(0,i.useRef)(0),r=(0,He.Y)((t=>{var a;return(null==t?void 0:t.context.uri)===e?(null==t||null===(a=t.item)||void 0===a?void 0:a.uri)??null:null})),[n]=(0,We.z)(1e4,(e=>{var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===r})),{data:o}=(0,Ve.a)({queryKey:["useShowPlayedState",e],queryFn:async()=>{const a=t.getShowPlayedState(e);return l.current=n,a},refetchOnWindowFocus:!1});return(0,i.useEffect)((()=>{s.current&&r!==s.current&&a.invalidateQueries({queryKey:["useShowPlayedState",e]}),s.current=r}),[r,a,e]),(0,i.useMemo)((()=>o&&t.capabilities.canGetShowPlayedState?{state:o.state,playPositionMilliseconds:o.playPositionMilliseconds+n-l.current}:null),[o,t,n])})(R),[Z,K]=(0,k.Z)(R),V=(0,Ze._)(R),z=B===tt?"small":"medium",H=(0,i.useCallback)((()=>{L.logInteraction(P.addButtonFactory().hitAddToPlaylist({playlist:s,itemToBeAdded:R})),O([R],{after:"end"})}),[L,P,s,R,O]),W=(0,i.useCallback)((()=>{if(b&&!A)U(M);else{const e=(0,ie.aK)({isPlaying:D,isActive:w,spec:P.playButtonFactory(),logger:L,uri:R});_({loggingParams:e})}}),[A,w,b,D,L,U,P,_,R,M]),Q=(0,i.useCallback)((()=>{L.logInteraction(P.genreLinkFactory({uri:N[0].uri??""}).hitUiNavigate({destination:N[0].uri??""}))}),[L,P,N]),q=(0,p.jsx)(ft,{children:y}),G=(0,p.jsx)(ut,{description:f,children:(0,p.jsxs)(Xe,{isExplicit:!!j,children:[!0===(null==m?void 0:m.showAverage)&&void 0!==m.average&&(0,p.jsxs)("span",{children:[(0,p.jsx)(Le.u,{size:"xsmall",className:Tt}),d.ag.formatNumber(m.average,{maximumFractionDigits:1})]}),(null===(t=N.at(0))||void 0===t?void 0:t.title)&&(0,p.jsx)(Oe.Link,{className:Rt,to:N[0].uri??"",onClick:Q,children:N[0].title}),I&&(0,p.jsx)(qe.E,{isPlaying:!1,fullyPlayed:(null==F?void 0:F.state)===Qe._N.Completed,durationMs:I,position:null==F?void 0:F.playPositionMilliseconds})]})}),J=(0,p.jsx)(Me.X,{uri:R,uid:u,contextUri:s,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:g}),Y=!b&&!!!A,X=h?null:(0,p.jsxs)(pt,{isPlaying:D,onClickPlay:W,isLocked:b&&!A,name:y,authorName:S,children:[(0,p.jsx)(bt.H,{className:Ee()({[st]:Z}),isAdded:Z,onClick:()=>{Z?L.logInteraction(P.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:R})):L.logInteraction(P.saveToLibraryButtonFactory().hitLike({itemToBeLiked:R})),K(!Z)},size:z,isAudiobook:!0,condensedAll:!0}),(0,p.jsx)(jt.j,{className:Ee()({[st]:(0,Fe.y)(V)}),uri:R,onClick:(e,t)=>{t===Be.mc.ADD&&L.logInteraction(P.downloadButtonFactory().hitDownload({itemToDownload:R}))},size:z,canDownload:Y,condensedAll:!0}),(0,p.jsx)(Ct.T,{uri:R,sharingInfo:o??null,interactionData:{intent:"share",type:"click"},size:z,onClick:()=>{L.logInteraction(P.shareButtonFactory().hitShare({entityToBeShared:R,shareId:(null==o?void 0:o.shareId)??""}))},condensedAll:!0}),(0,p.jsx)(Ue.yj,{menu:J,children:(0,p.jsx)(kt.z,{label:d.ag.get("more.label.context",y),size:z,onClick:()=>{L.logInteraction(P.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),$=(0,p.jsx)(vt,{images:C,name:y,type:T,breakpoint:B}),ee=E?(0,p.jsx)(r.x,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:E}):null,te=h?(0,p.jsx)(Pe.P,{size:"small",onClick:H,children:d.ag.get("playlist.extender.button.add")}):null,ae=(0,p.jsxs)(De.l,{hasTextSeparator:!0,children:[(0,p.jsxs)(p.Fragment,{children:[h&&b&&(0,p.jsx)(we.Z,{semanticColor:"textSubdued",title:d.ag.get("mwp.header.content.unavailable"),size:"xsmall",className:St}),d.ag.get("card.tag.audiobook")]}),S]});return(0,p.jsx)(Ue._P,{menu:J,onShow:()=>{L.logInteraction(P.secondaryHitUiReveal())},children:(0,p.jsx)(ot,{breakpoint:B,id:`book-${R}`,media:$,pretitle:ee,title:q,body:G,subtitle:ae,footer:X,trailing:te,onClick:()=>{L.logInteraction(P.hitUiNavigate({destination:R})),U(M)},showSeparator:x,...v})})}));var It=a(78734),Nt=a(36199);const Et=(0,i.createContext)({getReference:()=>null,setReference:()=>{}}),Lt=e=>{let{children:t}=e;const a=(0,i.useRef)(null),s=(0,i.useCallback)((()=>a.current),[]),l=(0,i.useCallback)((e=>{a.current=e}),[]);return(0,p.jsx)(Et.Provider,{value:{getReference:s,setReference:l},children:t})};const Pt=(e,t,a)=>{const{name:l,uri:r,uid:n}=e,{sortState:o}=(0,i.useContext)(E.Gb),c=o.order!==Nt.kn.NONE,d=(0,_.O)({itemIds:[n],itemUris:[r],itemMimeTypes:[It.RN.AUDIOBOOKS],dragLabelText:l,contextUri:t}),{setReference:m,getReference:p}=(0,i.useContext)(Et),h=(0,i.useCallback)((e=>{m({uri:r,uid:n}),d(e)}),[d,m,n,r]),g=(0,s.I0)(),x=(0,i.useContext)(oe.ZF),v=(0,i.useCallback)(((e,a)=>{const i=e[It.RN.AUDIOBOOKS];if(!i)return;const s=p();s?a===Ie.Pw.BEFORE?x.move(t,[s],{before:{uri:r,uid:n}}):x.move(t,[s],{after:{uri:r,uid:n}}):a===Ie.Pw.BEFORE?g((0,u.jV)(t,i,{before:{uri:r,uid:n}})):g((0,u.jV)(t,i,{after:{uri:r,uid:n}})),m(null)}),[t,g,p,x,m,n,r]),y=a&&!c?[It.RN.AUDIOBOOKS]:[];return{...(0,Ie.WB)({uri:r,id:n,allowedMimeTypesByDropPosition:{[Ie.Pw.BEFORE]:y,[Ie.Pw.AFTER]:y},onDrop:v}),onDragStart:h}},Dt="bg5inM_sdkHpYWiFf7Id",wt="DyW2LAm9YDcCkcdM0eeP",_t=()=>(0,p.jsx)("div",{className:wt}),Ut=(0,i.memo)((function(e){let{item:t,contextUri:a,canEdit:i=!1,canRemove:s=!1,index:l}=e;const{className:r,dropPosition:n,...o}=Pt(t,a,i);return(0,p.jsxs)(be.B,{className:r,"aria-posinset":l,reRunOnDOMUpdate:!0,children:[n===Ie.Pw.BEFORE&&(0,p.jsx)(_t,{}),(0,p.jsx)(At,{book:t,contextUri:a,featureIdentifier:"playlist",sharingInfo:t.sharingInfo,uid:t.uid,rating:t.rating,canRemove:s,className:r,draggable:!0,showSeparator:0!==l,...o}),n===Ie.Pw.AFTER&&(0,p.jsx)(_t,{})]})}));var Mt=a(85987);const Ot=e=>{let{contextUri:t,initialItems:a,nrItems:s,canEdit:r,canRemove:n,ariaLabel:o}=e;const c=(0,i.useContext)(oe.ZF),d=(0,se.Mi)(),{filter:u}=(0,i.useContext)(N.fo),{sortState:m}=(0,i.useContext)(E.Gb),{contentsOptions:h}=(0,Mt.d)(m,u),[,g]=(0,L.d4)(),x=(0,i.useCallback)((async(e,a)=>{const i=await c.getContents(t,{...h,offset:e,limit:a}),s=i.items.map((e=>null===e?null:(0,Ae.yD)(e)?e:null));return{...i,items:s}}),[c,h,t]),{getItem:v,nrValidItems:y,invalidateCache:f}=(0,Se.Q)({nrItems:s,fetch:x,limit:50,initialItems:a});(0,i.useLayoutEffect)((()=>{g(y)}),[y,g]),(0,oe.rZ)(t,f);const b=(0,i.useCallback)((e=>(0,p.jsx)("div",{style:{height:e}})),[]),j=(0,i.useCallback)(((e,a)=>{const i=v(e);return i?(0,p.jsx)(Ut,{contextUri:t,item:i,canEdit:r,canRemove:n,index:e},i.uri):b(`${a}px`)}),[r,n,t,v,b]),k="POP"===(0,l.ur)()?0:10;return(0,p.jsx)("div",{className:Dt,children:(0,p.jsx)(be.l,{firstInteractiveIsWrapper:!0,"aria-label":o,"aria-rowcount":y,"aria-colcount":6,children:(0,p.jsx)(Lt,{children:(0,p.jsx)(Re,{totalCount:y,estimatedHeight:200,renderItem:j,renderPlaceholder:b,scrollNodeRef:d,nrRowsOverscan:10,persistanceKey:t,nrInitialInView:k})})})})};var Bt=a(87236),Ft=a(13926),Zt=a(45438),Kt=a(92419),Vt=a(58912);const zt={column:null,order:Nt.kn.NONE},Ht=i.memo((function(e){let{ariaLabel:t,nrTracks:a,playlistUri:s,scrollToUid:l,usePlayContextItem:r,tracklistDomRef:n,sortableColumns:o,isCompactMode:c=!1}=e;const d=(0,i.useContext)(oe.ZF),{filter:u,setFilter:m}=(0,i.useContext)(N.fo),h=(0,i.useRef)(null),g=(0,i.useCallback)((()=>{h.current&&h.current.update()}),[]);(0,Kt.r)(s,g);const{sortState:x,setSortState:v}=(0,i.useContext)(E.Gb),y=(0,i.useCallback)((e=>{v((0,I.VK)(e,x))}),[x,v]);(0,i.useEffect)((()=>{v(zt),m("")}),[s,m,v]),(0,i.useEffect)((()=>{h.current&&l&&h.current.scrollToItem({uid:l})}),[l]);const f=(0,i.useCallback)((async(e,t)=>{const a=await d.getContents(s,{offset:e,limit:t,sort:(0,I._j)(x),filter:u,decorateFormatListData:!0});return{items:a.items,totalLength:a.totalLength}}),[s,d,x,u]),b=(0,i.useCallback)(((e,t)=>{var a,i,l;const n=(0,Vt.X)(null===(a=e.album)||void 0===a?void 0:a.images,{desiredSize:40,desiredLabel:"small"});return(0,p.jsx)(Nt.h_,{index:t,contextUri:s,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:(null==n?void 0:n.url)||"",statusChange:null===(i=e.formatListAttributes)||void 0===i?void 0:i.status,playCount:parseInt((null===(l=e.formatListAttributes)||void 0===l?void 0:l.rank)||"0",10),usePlayContextItem:r,isCompactMode:c},t+e.uri)}),[s,r,c]),j=(0,Bt.v)(),k=(0,i.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,p.jsx)(Zt.JL,{value:"chart-tracklist",children:(0,p.jsx)(Nt.Pv,{ariaLabel:t,hasHeaderRow:!0,columns:j,sortableColumns:o,sortState:x,onSort:y,renderRow:b,resolveItem:k,nrTracks:a,fetchTracks:f,limit:100,canFetchAllTracks:d.getCapabilities().canFetchAllTracks,outerRef:h,outerDomRef:n,columnPersistenceKey:"chart-tracklist",isCompactMode:c,className:Ft.Z.chartTrackList},s)})}));var Wt=a(15842),Qt=a(66205),qt=a(57562),Gt=a(40235),Jt=a(33981),Yt=a(6395),Xt=a(80683),$t=a(57986),ea=a(67408),ta=a(25230),aa=a(66819),ia=a(90779),sa=a(31734),la=a(12618),ra=a(27782),na=a(91731),oa=a(90427);const ca={bottomEnd:oa.LR.topStart,top:oa.LR.bottom},da=e=>{let{visible:t,onHide:a,placement:i,children:s,label:l}=e;const r=(0,n.W6)(xe.y);return(0,p.jsx)(ra.x,{placement:i,withPortal:!0,overlay:t&&(0,p.jsx)("div",{className:Ee()("encore-dark-theme","encore-layout-themes",{"vertical-metrics":r}),children:(0,p.jsx)(na.J,{arrow:ca[i],colorSet:"announcement",onClose:a,children:l})}),children:s})};var ua=a(93400),ma=a(24918);let pa=function(e){return e.xs="small",e.sm="medium",e.md="large",e}({});const ha=e=>{let{uri:t,label:a,onClick:i,size:s=pa.md}=e;const{onCopyLink:l}=(0,ma.l)({uri:t,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:r,setToggleActivationVisible:n}=(0,ua.I)();return(0,p.jsx)(da,{visible:r,onHide:()=>n(!1),label:d.ag.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,p.jsx)(la.ws,{label:a,children:(0,p.jsx)(ia.o,{onClick:e=>{null==i||i(e),null==l||l()},iconOnly:sa.V,size:s,"aria-hidden":"true","aria-label":a,condensed:!0})})})};var ga=a(51837),xa=a(8824),va=a(55538);const ya=i.memo((e=>{let{metadata:t,tracklistDomRef:a,sortableColumns:s}=e;const{hasSpotifyAudiobooks:l}=t,r=l||!1,{spec:n,logger:o}=(0,ge.fU)(ga.createDesktopSearchBarEventFactory,{}),c=(0,i.useCallback)((()=>{o.logInteraction(n.filterFieldFactory().keyStrokeFilter())}),[o,n]),u=(0,i.useCallback)((()=>{o.logInteraction(n.filterFieldFactory().hitClearFilter())}),[o,n]);return(0,p.jsxs)("div",{className:A.Z.searchBoxContainer,children:[(0,p.jsx)(i.Suspense,{fallback:null,children:(0,p.jsx)(xa.K,{placeholder:d.ag.get("playlist.search_in_playlist"),onFilter:c,onClear:u,clearOnEscapeInElementRef:a})}),(0,p.jsx)(va.l,{columns:[...s],isBooklist:r})]})}));var fa=a(21705),ba=a(36097),ja=a(29803),ka=a(7863),Ca=a(5784),Ta=a(28619),Ra=a(60702);const Sa="Uw4gqTFuHRLn4VKga_bJ",Aa="SdECNwBCnmkKl0Q0mJff",Ia="HLkGXLclDq_7guCiD1Xq",Na="vWR6alsFpTlgXUckErqF",Ea="EbHQLci0cfLjHmS0AKp2",La="HzYFPEbZdd6fQW4jfcz4",Pa="SQEgwtR2aj51qFj6cMNZ",Da="aaNtMSjjJ4cClWoe6K0k",wa="BhtBJTnsM9AotmyN0MPr",_a="FwoyMQocCMLEafLlvAk5",Ua="xcn0geYcJliTHbvcds12",Ma="KptBBI16DBjQBjvPQtlH";function Oa(e){const t=(0,i.useRef)(null);return(0,p.jsx)(ba.Y,{center:!0,onClose:e.onClose,ref:t,withPortal:!0,children:(0,p.jsx)(ja.l,{className:Sa,"aria-label":"Example showing onClose property",body:(0,p.jsxs)("div",{className:wa,children:[(0,p.jsx)(ia.o,{size:"medium","aria-label":"IconX",iconOnly:ka.k,onClick:e.onClose,className:Ua}),(0,p.jsx)(ia.o,{size:"medium","aria-label":"IconArrowLeft",iconOnly:Ta.D,className:_a}),(0,p.jsx)("div",{className:Aa,children:(0,p.jsxs)("div",{className:Ia,children:[(0,p.jsx)("div",{className:Ea,children:(0,p.jsxs)("div",{className:La,children:[(0,p.jsx)(fa.E,{className:Pa,src:"https://i.scdn.co/image/ab6761610000517469fd2e170a6d290939620b61",alt:"A headshot profile picture of Afrobeats artist Lojay",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0}),(0,p.jsx)(fa.E,{className:Da,src:"spotify:image:ab67706c0000da8465307c7864e1e9d53770a94e",alt:"Ginjapiano playlist profile picture",imageHeight:"150px",imageWidth:"150px",crop:!0,circle:!0})]})}),(0,p.jsxs)("div",{className:Na,children:[(0,p.jsxs)(r.x,{as:"p",variant:"marginalBold",children:[(0,p.jsx)("span",{style:{color:"#dc744d"},children:"4M"})," STREAMED THIS WEEK"]}),(0,p.jsxs)(r.x,{as:"p",variant:"titleMedium",children:["IM IN THE ",(0,p.jsx)("span",{style:{color:"#dc744d"},children:"TOP 21% "}),"OF GINJAPIANO LISTENERS THIS WEEK."]})]}),(0,p.jsx)("div",{className:Ea,children:(0,p.jsx)(Ra.V,{size:"xlarge"})})]})}),(0,p.jsx)("div",{className:Ma,children:(0,p.jsx)(j.D,{colorSet:"invertedLight",children:"Share"})})]})})})}const Ba="nTTPGZGk721M6gfldG43",Fa="BFYSUcA4ifYvgDzOQX5Q",Za="el9_37CCpYKxCRKDDyww",Ka="FB376b7R1M_0YQZ_SahS",Va="srPBn9_CV0NzQEEzW9f6",za="te8Z8OuKxZx1gbjb7_ua",Ha=i.memo((function(e){let{setuserView:t}=e;const[a,s]=(0,i.useState)(!1);return(0,p.jsxs)(p.Fragment,{children:[a&&(0,p.jsx)(Oa,{onClose:()=>{s(!1)}}),(0,p.jsx)(ba.Y,{center:!0,withPortal:!0,children:(0,p.jsx)(ja.l,{colorSet:"overMedia","aria-label":"Title",body:(0,p.jsx)("div",{children:(0,p.jsx)(r.x,{as:"p"})}),dialogTitle:(0,p.jsxs)("div",{className:Ba,children:[(0,p.jsxs)("div",{className:Za,children:[(0,p.jsxs)("div",{children:[(0,p.jsx)(fa.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"20px",imageWidth:"20px",crop:!0,circle:!0}),(0,p.jsx)(fa.E,{src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,p.jsx)(r.x,{as:"h1",variant:"titleMedium",children:"Rap Caviar"})]}),(0,p.jsxs)("div",{className:Fa,children:[(0,p.jsx)(ia.o,{iconOnly:ka.k,onClick:()=>t(!1),className:Va}),(0,p.jsx)(ia.o,{iconOnly:Ca.o,className:za,onClick:()=>{s(!0)}})]}),(0,p.jsx)("div",{className:Ka,children:(0,p.jsx)(r.x,{as:"p",variant:"bodyMedium",children:"Hello you made it to the top 10 percent"})})]}),id:"dialogAlert"})})]})})),Wa="__97AKHEfxNtqFsLai1b",Qa="pzFwHV7jvPlWTI6cG5TV",qa="iZu1aH8cr2cw98gqmTeo",Ga="JRvbfJh7eAZ_1FrQukej";function Ja(){const[e,t]=(0,i.useState)(!1);return(0,p.jsxs)(p.Fragment,{children:[e&&(0,p.jsx)(Ha,{setuserView:t}),(0,p.jsxs)("button",{className:Wa,onClick:()=>t(!0),children:[(0,p.jsxs)("div",{className:Qa,children:[(0,p.jsx)(fa.E,{className:qa,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,p.jsx)(fa.E,{className:qa,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0}),(0,p.jsx)(fa.E,{className:qa,src:"https://i.scdn.co/image/54470e5e056b93d7022076960d3a6b2267ece226",alt:"A figure sits cross-legged but poised in front of their synthesizer",imageHeight:"30px",imageWidth:"30px",crop:!0,circle:!0})]}),(0,p.jsxs)("div",{className:Ga,children:[(0,p.jsx)(r.x,{as:"p",variant:"bodySmallBold",children:"View employee leaderboard"}),(0,p.jsx)(r.x,{as:"p",variant:"bodySmall",children:"You're in the top 21% of listeners."})]})]})]})}var Ya=a(64962),Xa=a(72417);const $a=i.memo((function(e){let{playlist:t,capabilities:a,spec:s,isPlaying:l,isActive:r,togglePlay:o,isBooklist:c,isConcert:u=!1,backgroundColor:m,tracklistDomRef:h,sortableColumns:g}=e;const{metadata:{uri:x,name:v,unfilteredTotalLength:y,isOwnedBySelf:f,canPlay:b,isPublished:j,totalLength:C}}=t,T=(0,z.k)(),R=(0,ge.$P)(),S=(0,i.useMemo)((()=>s.shuffleButtonContainerFactory()),[s]),I=a.canFilter&&y>0,N=a.canSort&&y>0,E=y>0,L=(0,n.W6)(Y.v8$),P=(0,n.W6)(Y.MF8,{loadingValue:!1}),D=(0,Xa.Q)(),[w,_]=(0,k.Z)(x),U=(0,V.o)(),M=(0,i.useCallback)((async()=>{U({targetUri:x,intent:w?"unsave":"save",type:"click"});try{await _(!w)}catch{}}),[w,U,_,x]),O=(0,i.useCallback)((()=>{const e=s.shareButtonFactory().hitShare({entityToBeShared:x,shareId:""});R.logInteraction(e)}),[s,R,x]),B=(0,i.useCallback)((()=>{let e;const t=s.heartButtonFactory();e=w?t.hitUnfollow({itemToBeUnfollowed:x}):t.hitFollow({itemToBeFollowed:x}),R.logInteraction(e),M()}),[s,M,w,R,x]),F=(0,aa.j)(),Z=I&&N;return(0,p.jsxs)(Wt.o,{backgroundColor:m,children:[(0,p.jsxs)(Qt.F,{children:[b&&!c?(0,p.jsx)($t.$,{onClick:o,isPlaying:l,size:F,uri:x,ariaPlayLabel:d.ag.get("playlist.a11y.play",v),ariaPauseLabel:d.ag.get("playlist.a11y.pause",v)}):null,D&&C>0&&!c&&(0,p.jsx)(ge.Nh,{spec:S,children:(0,p.jsx)(ta.K,{shuffleContext:Ya.W.playlistActionBar,entityName:v,contextUri:x,isActive:r,activationPlacement:"bottomEnd",size:F})}),f?null:(0,p.jsx)(Yt.r,{children:(0,p.jsx)(bt.H,{isAdded:!!w,onClick:B,size:F})}),!c&&(0,p.jsx)(qt.o,{uri:x,isFollowing:!!w,canDownload:E,onClick:(e,t)=>(0,ie.l7)(t,s.downloadButtonFactory(),R,x),onFollow:M,size:F}),(0,p.jsx)(Xt.F,{property:Y.bMb,renderNewExperience:()=>{var e;return null!==(e=t.metadata.permissions)&&void 0!==e&&e.canAdministratePermissions&&T&&(!c||P)?(0,p.jsx)(ha,{onClick:O,label:d.ag.get("permissions.invite-collaborators",v),uri:x,size:F}):null}}),(u||c)&&(0,p.jsx)(Ct.T,{uri:x,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:u?"concerts-near-you/share":"booklist/share"},onClick:O,size:F}),(0,p.jsx)(Gt.y,{onShow:()=>(0,ie.qq)(s,R),menu:(0,p.jsx)(Jt.X,{uri:x,isPublished:j}),children:(0,p.jsx)(kt.z,{label:d.ag.get("more.label.context",v),size:F})}),Z?(0,p.jsx)(ge.Nh,{spec:s,children:(0,p.jsx)(ya,{metadata:t.metadata,tracklistDomRef:h,sortableColumns:g})}):(0,p.jsx)("div",{className:A.Z.leadingSlot,children:(0,p.jsx)(Xt.F,{property:Y.FMs,renderNewExperience:()=>(0,p.jsx)(ea.A,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),L&&(0,p.jsx)(Ja,{})]})}));var ei=a(75383);const ti=e=>{const t=(0,ge.$P)(),a=(0,i.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),s=(0,ge.Wi)(a);return(0,p.jsxs)("div",{className:A.Z.concertsFooter,children:[(0,p.jsx)(Oe.default,{to:"/concerts",className:A.Z.ctaLink,onClick:()=>{const e=a.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,p.jsxs)("div",{className:A.Z.promoRow,ref:s,children:[(0,p.jsx)(r.x,{as:"h2",variant:"bodyMediumBold",className:A.Z.promoTitle,children:d.ag.get("concerts.find_more")}),(0,p.jsx)(ei.A,{as:"span",selected:!0,children:d.ag.get("concerts.find_nearby")}),(0,p.jsx)("img",{className:A.Z.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,p.jsx)("div",{className:A.Z.disclaimerContainer,children:(0,p.jsx)(r.x,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:d.ag.get("concerts_near_you.playlist_disclaimer")})})]})};var ai=a(57370),ii=a(21523),si=a(85357);const li="multiUserAttributionDisplayNamesV2";function ri(e){return(0,Ae.MW)(e)||(0,Ae.JF)(e)}function ni(e){return(0,Ae.MW)(e)||(0,Ae.JF)(e)||(0,Ae.yD)(e)}const oi=i.memo((function(e){let{ariaLabel:t,nrTracks:a,playlistUri:l,playlistName:r,isMixedMedia:o,isLive:m,isBlend:h,isConcert:g,isBooklist:x,canEdit:v,scrollToUid:y,feedbackPath:f,deleteFeedbackPath:b,usePlayContextItem:j,tracklistRef:k,tracklistDomRef:C,canRemove:T,spec:R,initialItems:S,isCompactMode:A=!1,sortableColumns:P,hasSpotifyAudiobooks:D}=e;const w=(0,ge.$P)(),_=(0,n.W6)(Y.Kpm),U=(0,i.useContext)(oe.ZF),{filter:M}=(0,i.useContext)(N.fo),{sortState:O,setSortState:B}=(0,i.useContext)(E.Gb),F=(0,i.useRef)((()=>{})),[Z,K]=(0,i.useState)([]),V=(0,s.I0)(),z=(0,Bt.v)(),H=(0,i.useCallback)((()=>{null!=k&&k.current&&k.current.update()}),[k]);(0,oe.rZ)(l,H);const W=(0,i.useCallback)(((e,t)=>{B((0,I.VK)(e,O)),w.logInteraction(R.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[B,O,w,R]),Q=(0,i.useCallback)((e=>{F.current(),U.remove(l,e)}),[U,l]),q=(0,i.useCallback)((function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];T&&(F.current=t,e.length>1&&!a?K(e):Q(e))}),[T,Q]);(0,i.useEffect)((()=>{null!=k&&k.current&&y&&k.current.scrollToItem({uid:y})}),[y,k]);const G=(0,i.useCallback)((async(e,t)=>{const a=await U.getContents(l,{offset:e,limit:t,sort:(0,I._j)(O),filter:M,decorateFormatListData:!!f||m||h});return{items:a.items,totalLength:a.totalLength}}),[l,U,O,M,f,m,h]),J=(0,i.useCallback)(((e,t,a)=>{if(null==k||!k.current)return;const i=k.current.getRows()[t];i&&(w.logInteraction(R.dragSort()),a===si.W.Before?U.move(l,e,{before:i}):U.move(l,e,{after:i}))}),[k,w,R,U,l]),X=(0,i.useCallback)(((e,t,a)=>{if(null==k||!k.current)return;const i=k.current.getRows()[t];i&&(w.logInteraction(R.dragAddToPlaylist({playlist:l,itemToBeAdded:e[0]})),a===si.W.Before?V((0,u.jV)(l,e,{before:{uri:i.uri,uid:i.uid}})):V((0,u.jV)(l,e,{after:{uri:i.uri,uid:i.uid}})))}),[k,w,R,l,V]),$=(0,i.useCallback)((()=>{U.resync(l)}),[U,l]),ee=(0,i.useCallback)(((e,t)=>{var a,i,s,n,d,u,m,y;let k,C=null;var R;if((0,Ae.JF)(e))C=e.show,k=e.images.concat((null===(R=e.show)||void 0===R?void 0:R.images)||[]);else if((0,Ae.MW)(e)){var S;C=e.album,k=null===(S=e.album)||void 0===S?void 0:S.images}else(0,Ae.yD)(e)&&(k=e.images);const I=(0,Vt.X)(k,{desiredSize:40,desiredLabel:"small"});let N=[];v&&O.order===Nt.kn.NONE&&(N=x?[It.RN.AUDIOBOOKS]:[It.RN.TRACKS,It.RN.LOCAL_TRACKS,It.RN.EPISODES,...D?[It.RN.AUDIOBOOKS]:[]]);const E="1"===(null==e||null===(a=e.formatListAttributes)||void 0===a?void 0:a["dislike-feedback-selected"]),L=!!(0,Ae.JF)(e)&&e.podcastSubscription.isUserSubscribed;let P=!1;(0,Ae.JF)(e)&&e.podcastSubscription.isPaywalled&&!L?P=!0:ri(e)?P=e.isPlayable&&!E:(0,Ae.yD)(e)&&(P=!0);let w=!1;(0,Ae.JF)(e)&&e.podcastSubscription.isPaywalled?w=!0:(0,Ae.yD)(e)&&(w=e.isLocked&&!e.isOutOfMarket);const M=h&&((e,t)=>{var a,i,s,l;const r=[];if(!t)return r;const n=t[li]?li:"multiUserAttributionDisplayNames",o=null==t||null===(a=t[n])||void 0===a?void 0:a.split(","),d=null==t||null===(i=t.multiUserAttributionImages)||void 0===i?void 0:i.split(",");if(!o||!d)return r;const u=(null==t||null===(s=t.multiUserAttributionUsernamesV2)||void 0===s?void 0:s.split(","))||[],m=(null==t||null===(l=t.multiUserAttributionType)||void 0===l?void 0:l.split(","))||[],p=o.length;for(let g=0;g<p;g++){const e=u[g],t=e&&(0,c.QK)(e).toURI();r.push({username:e,uri:t,displayName:o[g],images:(h=d[g],h.length>1?[{url:h}]:[]),recsplanation:m[g]})}var h;return r.sort(((t,a)=>t.username?t.username===(null==e?void 0:e.username)?-1:a.username===(null==e?void 0:e.username)?1:0:0))})(e.addedBy,null==e?void 0:e.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let B=0;ri(e)?B=e.duration.milliseconds:(0,Ae.yD)(e)&&(B=e.durationMs||0);let F="";return ni(e)&&(F=e.name),(0,p.jsx)(Nt.dx,{isCompactMode:A,index:t,playIndex:e.playIndex??void 0,contextUri:l,uri:e.uri,uid:e.uid,isPlayable:P,duration_ms:B,isPaywalled:w,isUserSubscribed:L,name:F,artists:(0,Ae.MW)(e)?e.artists:void 0,albumOrShow:C,isExplicit:(ni(e)&&e.isExplicit)??!1,hasAssociatedVideo:((0,Ae.MW)(e)&&e.hasAssociatedVideo&&_)??!1,isMixedMedia:o,isLocal:(0,Ae.MW)(e)&&e.isLocal,addedBy:M,hasDecoratedAddedBy:U.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Ae.JF)(e)&&e.release.date||"",isMOGEFRestricted:((0,Ae.MW)(e)||(0,Ae.JF)(e))&&e.is19PlusOnly,type:e.type,imgUrl:(null==I?void 0:I.url)||"",onMove:J,onInsert:X,usePlayContextItem:j,allowedDropTypes:N,feedbackPath:f,feedbackUri:null==e||null===(i=e.formatListAttributes)||void 0===i?void 0:i.feedback_uri,deleteFeedbackPath:b,isDisliked:E,isBlend:h,ticketingSiteURL:null==e||null===(s=e.formatListAttributes)||void 0===s?void 0:s.ticketingSite,eventDate:null==e||null===(n=e.formatListAttributes)||void 0===n?void 0:n.eventDate,canRemove:T,onFeedbackClick:$,playlistName:r,isConcert:g,concertsCount:null===(d=e.formatListAttributes)||void 0===d?void 0:d.concerts_count,concertURI:null===(u=e.formatListAttributes)||void 0===u?void 0:u.target_uri,concertDate:null===(m=e.formatListAttributes)||void 0===m?void 0:m.first_concert_date,concertVenue:null===(y=e.formatListAttributes)||void 0===y?void 0:y.first_concert_venue,authorName:(0,Ae.yD)(e)?e.authorName:"",isOutOfMarket:!!(0,Ae.yD)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,Ae.yD)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:v},t+e.uri)}),[v,x,O.order,h,A,l,_,o,U,J,X,j,f,b,T,$,r,g,D]),te=(0,i.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,ae]=(0,L.d4)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Zt.JL,{value:"playlist-tracklist",children:(0,p.jsx)(Nt.Pv,{isCompactMode:A,testID:"playlist-tracklist",ariaLabel:t,hasHeaderRow:!0,columns:z,sortableColumns:P,sortState:O,onSort:W,onRemove:q,renderRow:ee,resolveItem:te,nrTracks:a,fetchTracks:G,limit:100,canFetchAllTracks:U.getCapabilities().canFetchAllTracks,outerRef:k,outerDomRef:C,tracks:S,isConcertPlaylist:g,onNrValidItemsChange:ae,columnPersistenceKey:"playlist-tracklist"},l)}),(0,p.jsx)(ii.h,{title:d.ag.get("playlist.remove_from_playlist",r),isOpen:Z.length>0,tracks:Z,onClose:e=>{e.stopPropagation(),K([])},onRemove:Q})]})}));var ci=a(30089),di=a(94260),ui=a(92075),mi=a(44246),pi=a(65441),hi=a(23120);const gi=new hi.o("queryInlineCurationSearchV2","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),xi=new hi.o("queryInlineCurationSearchV2Booklists","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),vi=new hi.o("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),yi=new hi.o("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null);var fi=a(52559);function bi(e){var t,a,i,s,l,r,n,o;return{type:B.p.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:(null===(t=e.authors)||void 0===t?void 0:t.map((e=>null==e?void 0:e.name)).join(d.ag.getSeparator()))||"",images:(null===(a=e.coverArt)||void 0===a?void 0:a.sources)??[],isLocked:(0,fi.P2)(e.accessInfo),isExplicit:(null===(i=e.contentRating)||void 0===i?void 0:i.label)===Qe.KS.Explicit,durationMs:(null===(s=e.duration)||void 0===s?void 0:s.totalMilliseconds)??0,topics:(null===(l=e.genres)||void 0===l?void 0:l.map((e=>({uri:e.destinationUri,title:e.contextualName}))))||[],signifierText:(null===(r=e.accessInfo)||void 0===r||null===(r=r.signifier)||void 0===r?void 0:r.text)??"",rating:{average:(null===(n=e.rating)||void 0===n||null===(n=n.averageRating)||void 0===n?void 0:n.average)??0,showAverage:!(null===(o=e.rating)||void 0===o||null===(o=o.averageRating)||void 0===o||!o.showAverage)},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var ji=a(73928),ki=a(8696),Ci=a(91054),Ti=a(70526);function Ri(e){return{type:B.p.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,ki.NS)(e.coverArt)}}function Si(e){if("Album"!==e.data.__typename)return null;return Ri(e.data)}function Ai(e){return((null==e?void 0:e.items.filter((e=>"AlbumResponseWrapper"===e.__typename)))??[]).map((e=>Si(e))).filter(Ci.K)||[]}function Ii(e){if("Artist"!==e.data.__typename)return null;const t=e.data;return{type:B.p.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,ki.NS)(t.visuals.avatarImage)}}function Ni(e){var t,a;if("Episode"!==e.data.__typename)return null;const i=e.data,s=i.podcastV2.data;return"Podcast"!==s.__typename?null:{type:B.p.EPISODE,uri:i.uri,id:i.id,name:i.name,images:(0,ki.NS)(i.coverArt),isExplicit:(null===(t=i.contentRating)||void 0===t?void 0:t.label)===ji.KS.Explicit,is19PlusOnly:(null===(a=i.contentRating)||void 0===a?void 0:a.label)===ji.KS.NineteenPlus,podcast:{id:s.id,uri:s.uri,name:s.name},isPlayable:i.playability.playable}}function Ei(e){var t,a,i,s,l,r,n;const o=(0,ki.NS)((null===(t=e.albumOfTrack)||void 0===t?void 0:t.coverArt)||null);return{type:B.p.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:(null===(a=e.albumOfTrack)||void 0===a?void 0:a.name)||"",uri:(null===(i=e.albumOfTrack)||void 0===i?void 0:i.uri)||"",imgUrl:(null===(s=o.at(0))||void 0===s?void 0:s.url)||"",id:(null===(l=e.albumOfTrack)||void 0===l?void 0:l.id)||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:(null===(r=e.contentRating)||void 0===r?void 0:r.label)===ji.KS.Explicit,is19PlusOnly:(null===(n=e.contentRating)||void 0===n?void 0:n.label)===ji.KS.NineteenPlus}}function Li(e){if("Track"!==e.data.__typename)return null;return Ei(e.data)}function Pi(e){return((null==e?void 0:e.itemsV2)??[]).map((e=>{const t=(0,ki.U2)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return Si(t);case"ArtistResponseWrapper":return Ii(t);case"EpisodeResponseWrapper":return Ni(t);case"TrackResponseWrapper":return Li(t);default:return(0,Ti._)(t),null}})).filter(Ci.K)||[]}function Di(e){return((null==e?void 0:e.itemsV2)??[]).map((e=>{const t=(0,ki.U2)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?bi(t.data):null})).filter(Ci.K)||[]}const wi=async function(e,t,a){var i;const s={term:t,offset:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,limit:arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,numberOfTopResults:arguments.length>5&&void 0!==arguments[5]?arguments[5]:10};if(a){var l;const a=await e(xi,s),i=null==a||null===(l=a.data)||void 0===l?void 0:l.searchV2;return i?(r=t,{albums:[],artists:[],episodes:[],tracks:[],topResults:Di(i.topResultsV2)??[],query:r}):null}var r;const n=await e(gi,s),o=null==n||null===(i=n.data)||void 0===i?void 0:i.searchV2;return o?function(e,t){return{albums:Ai(e.albumsV2)??[],artists:(s=e.artists,(((null==s?void 0:s.items)??[]).map((e=>Ii(e))).filter(Ci.K)||[])??[]),episodes:(i=e.episodes,(((null==i?void 0:i.items)??[]).map((e=>Ni(e))).filter(Ci.K)||[])??[]),tracks:(a=e.tracksV2,(((null==a?void 0:a.items)??[]).map((e=>Li(e.item))).filter(Ci.K)||[])??[]),topResults:Pi(e.topResultsV2)??[],query:t};var a,i,s}(o,t):null},_i=async function(e,t){var a;const i={uris:[t],limit:arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,offset:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0},s=await e(vi,i),l=null==s||null===(a=s.data)||void 0===a?void 0:a.albums;return l?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map((e=>Ei(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Ti._)(t),null}}(l):null},Ui=async function(e,t){var a;const i={uris:[t],limit:arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,offset:arguments.length>3&&void 0!==arguments[3]?arguments[3]:0},s=await e(yi,i),l=null==s||null===(a=s.data)||void 0===a?void 0:a.artists;return l?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map((e=>Ri(e)))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map((e=>Ei(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,Ti._)(t),null}}(l):null};var Mi=a(49857),Oi=a(45540);const Bi="YAYCVnYpPvmYV4JyTmn5",Fi="FeWwGSRANj36qpOBoxdx",Zi="_h5mio6VqcL_fmiXAb1S",Ki="Hfgj4Zbb2ijt8g54MlCA",Vi="sgZ_MgcS1NlccH19fYsa",zi="JzyZE2R09wq7xtjECDeR",Hi=i.memo((function(e){let{placeholder:t,onChange:a=(()=>{}),onFocus:s=(()=>{})}=e;const[l,n]=(0,i.useState)(""),o=(0,i.useRef)(null),c=(0,Mi.y1)((e=>{a(e)}),200),u=(0,i.useCallback)((e=>{const t=e.currentTarget.value;n(t),c(t)}),[n,c]),m=(0,i.useCallback)((()=>{o.current&&o.current.focus(),n(""),a("")}),[n,a]),h=(0,i.useCallback)((e=>{"Escape"===e.key&&l&&m()}),[l,m]);return(0,p.jsxs)("div",{className:Bi,role:"search",children:[(0,p.jsx)(r.x,{as:"input",variant:"bodySmall",ref:o,className:Ee()(Fi),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:t,onChange:u,onKeyDown:h,onFocus:s,value:l}),(0,p.jsxs)("div",{className:Zi,children:[(0,p.jsx)("span",{className:Ki,children:(0,p.jsx)(Oi.j,{size:"small",className:Vi,"aria-hidden":"true"})}),l&&(0,p.jsx)("button",{className:zi,onClick:m,"aria-label":d.ag.get("search.a11y.clear-input"),children:(0,p.jsx)(ka.k,{size:"small"})})]})]})}));a(92027);const Wi=e=>{let{renderRow:t,searchResults:a,renderSeeAllRow:i,seeAllXList:s}=e;return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Nt.Pv,{ariaLabel:d.ag.get("search.title.top-results"),renderRow:t,rowPlaceholder:Nt.hU,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[Nt.QD.TITLE_AND_ARTIST,Nt.QD.ALBUM,Nt.QD.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,p.jsx)(Nt.Pv,{ariaLabel:d.ag.get("search.title.all"),renderRow:i,rowPlaceholder:Nt.hU,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[Nt.QD.TITLE_AND_ARTIST,Nt.QD.ALBUM,Nt.QD.ADD],testID:"playlist-inline-curation-see-all-options"})]})},Qi=e=>{let{renderRow:t,searchResults:a}=e;return(0,p.jsx)(Nt.Pv,{ariaLabel:d.ag.get("search.title.top-results"),renderRow:t,rowPlaceholder:Nt.hU,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[Nt.QD.TITLE_AND_ARTIST,Nt.QD.ALBUM,Nt.QD.ADD]})},qi=e=>{let{renderRow:t,searchResults:a}=e;const i=a.filter((e=>e.type===B.p.TRACK)),s=a.filter((e=>e.type===B.p.ALBUM));return(0,p.jsxs)("div",{children:[(0,p.jsx)(r.x,{as:"p",variant:"bodyMediumBold",className:A.Z.artistResultListTitle,children:d.ag.get("playlist.curation.popular_songs")}),(0,p.jsx)(Nt.Pv,{ariaLabel:d.ag.get("playlist.curation.popular_songs"),renderRow:t,rowPlaceholder:Nt.hU,nrTracks:i.length,tracks:i,resolveItem:e=>({uri:e.uri}),columns:[Nt.QD.TITLE_AND_ARTIST,Nt.QD.ALBUM,Nt.QD.ADD]}),(0,p.jsx)(r.x,{as:"p",variant:"bodyMediumBold",className:A.Z.artistResultListTitle,children:d.ag.get("playlist.curation.albums")}),(0,p.jsx)(Nt.Pv,{ariaLabel:d.ag.get("playlist.curation.albums"),renderRow:t,rowPlaceholder:Nt.hU,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[Nt.QD.TITLE_AND_ARTIST,Nt.QD.ALBUM,Nt.QD.ADD]})]})},Gi=e=>{let{renderRow:t,searchResults:a}=e;return(0,p.jsx)(Nt.Pv,{ariaLabel:d.ag.get("search.title.top-results"),renderRow:t,rowPlaceholder:Nt.hU,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[Nt.QD.TITLE_AND_ARTIST,Nt.QD.ALBUM,Nt.QD.ADD]})},Ji=e=>{let{renderRow:t,searchResults:a}=e;return(0,p.jsx)(Nt.Pv,{ariaLabel:d.ag.get("search.title.top-results"),renderRow:t,rowPlaceholder:Nt.hU,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[Nt.QD.TITLE_AND_ARTIST,Nt.QD.ALBUM,Nt.QD.ADD]})},Yi=e=>{let{renderRow:t,searchResults:a}=e;return(0,p.jsx)(Nt.Pv,{ariaLabel:d.ag.get("search.title.top-results"),renderRow:t,rowPlaceholder:Nt.hU,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[Nt.QD.TITLE_AND_ARTIST,Nt.QD.ALBUM,Nt.QD.ADD]})};var Xi=a(61815);const $i="G2t3w2AAeb5OXp0_GeWs",es="saVjTFMyWYUz975_tkQm",ts="thi8fNCkEhutRkDC90c0",as="pHVlkChuJpEnBQyU3ADv",is="ENWs3JxcqtD98_8fbPz2",ss="L8IUKEJL6JiTyE_qUVCc",ls="XcyjdXgsNX0DBt72tfiD",rs="VhJnuS7UcUPfIlzD8dlU",ns="He29vQ5anFj_bJ5iEaI2",os=e=>{var t;let{searchResult:a,index:i,isRTL:s,onClick:l}=e;const n=null===(t=a.images.at(0))||void 0===t?void 0:t.url;return(0,p.jsx)(Xi.RX,{className:is,rowIndex:i,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.ag.get("artist-page.tracks.seemore")} ${a.name}`,className:ns,onClick:l,children:[(0,p.jsxs)(Xi.id,{columnIndex:0,className:ss,children:[void 0!==n?(0,p.jsx)("img",{className:ts,src:n,alt:a.name}):null,(0,p.jsxs)("div",{className:ls,children:[(0,p.jsx)(r.x,{as:"p",className:as,variant:"bodyMedium",children:a.name}),(0,p.jsx)(r.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.ag.get("album")})]})]}),(0,p.jsx)(Xi.id,{columnIndex:1}),(0,p.jsx)(Xi.id,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${a.name}`,className:rs,onClick:l,children:s?(0,p.jsx)(ui.e,{}):(0,p.jsx)(di.V,{})})})]})})};var cs=a(6958);const ds=e=>{let{size:t}=e;return(0,p.jsx)("div",{className:es,children:(0,p.jsx)(cs.a,{size:t})})},us=e=>{var t;let{searchResult:a,index:i,isRTL:s,onClick:l}=e;const n=null===(t=a.images.at(0))||void 0===t?void 0:t.url;return(0,p.jsx)(Xi.RX,{className:is,rowIndex:i,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.ag.get("artist-page.tracks.seemore")} ${a.name}`,className:ns,onClick:l,"data-testid":"playlist-inline-curation-artist",children:[(0,p.jsxs)(Xi.id,{columnIndex:0,className:ss,children:[void 0!==n?(0,p.jsx)("img",{className:$i,src:n,alt:a.name}):(0,p.jsx)(ds,{size:"small"}),(0,p.jsxs)("div",{className:ls,children:[(0,p.jsx)(r.x,{as:"p",className:as,variant:"bodyMedium",children:a.name}),(0,p.jsx)(r.x,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.ag.get("artist")})]})]}),(0,p.jsx)(Xi.id,{columnIndex:1}),(0,p.jsx)(Xi.id,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${a.name}`,className:rs,onClick:l,children:s?(0,p.jsx)(ui.e,{}):(0,p.jsx)(di.V,{})})})]})})},ms=e=>{var t;let{episode:a,contextUri:i,index:s,usePlayContextItem:l}=e;return(0,p.jsx)(Nt.YK,{uid:a.id,uri:a.uri,isPlayable:a.isPlayable,isMOGEFRestricted:a.is19PlusOnly,isExplicit:a.isExplicit,contextUri:i,name:a.name,imgUrl:(null===(t=a.images.at(0))||void 0===t?void 0:t.url)??"",index:s,podcast:a.podcast,usePlayContextItem:l})},ps=e=>{let{label:t,index:a,isRTL:i,onClick:s}=e;return(0,p.jsx)(Xi.RX,{className:is,rowIndex:a,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":t,className:ns,onClick:s,children:[(0,p.jsx)(Xi.id,{columnIndex:0,className:ss,children:(0,p.jsx)(r.x,{as:"p",className:as,variant:"bodyMedium",children:t})}),(0,p.jsx)(Xi.id,{columnIndex:1}),(0,p.jsx)(Xi.id,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":t,className:rs,onClick:s,children:i?(0,p.jsx)(ui.e,{}):(0,p.jsx)(di.V,{})})})]})})},hs=e=>{let{track:t,contextUri:a,index:i,usePlayContextItem:s}=e;return(0,p.jsx)(Nt.cp,{uid:t.id,uri:t.uri,isPlayable:t.isPlayable,isMOGEFRestricted:t.is19PlusOnly,isExplicit:t.isExplicit,contextUri:a,name:t.name,imgUrl:t.album.imgUrl,index:i,album:t.album,artists:t.artists,usePlayContextItem:s})};let gs=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const xs=(e,t)=>"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:("NAV_TO_RESULTS"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:gs.SEARCH,term:t.term,title:""}]}),e),vs=e=>{let{resultList:t,level:a,isRTL:s,playlistUri:l,navToResults:n,navToEntity:o,term:u,isBooklist:m}=e,h=t;const g=(e=>e.map((e=>{if(e.type===B.p.TRACK||e.type===B.p.EPISODE){const{uri:t,id:a}=e;return{type:(0,c.wj)(t)?B.p.TRACK:B.p.EPISODE,uri:t,uid:a,provider:null}}return null})).filter(Ci.K))(t),x=(0,_.O)(),{usePlayContextItem:v}=(0,ne.n)({uri:`${l.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(u)}:${(null==a?void 0:a.navType)??0}`,pages:[{items:g}]},{featureIdentifier:"search"}),y=(0,i.useCallback)(((e,t)=>(0,p.jsx)(ps,{isRTL:s,index:t,label:e.label,onClick:()=>{n({navType:e.type,term:u,title:e.label})}},e.uri)),[s,n,u]),f=(0,i.useCallback)(((e,t)=>e.type===B.p.ARTIST?(0,p.jsx)(us,{isRTL:s,index:t,searchResult:e,onClick:()=>{o({navType:gs.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===B.p.EPISODE?(0,p.jsx)(ms,{index:t,episode:e,contextUri:l.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:v},e.uri):e.type===B.p.TRACK?(0,p.jsx)(hs,{index:t,track:e,contextUri:l.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:v},e.uri):e.type===B.p.ALBUM?(0,p.jsx)(os,{index:t,isRTL:s,searchResult:e,onClick:()=>{o({navType:gs.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,p.jsx)(At,{book:e,featureIdentifier:"playlist_recommendations",contextUri:l,isRecommendation:!0,showSeparator:0!==t},e.uri)),[s,o,l,v]);if(""===u)return(0,p.jsx)("div",{className:A.Z.emptySearchTermContainer});if(!t||0===(null==t?void 0:t.length))return(0,p.jsxs)("div",{className:A.Z.emptyStateContainer,children:[(0,p.jsx)(r.x,{as:"h1",variant:"titleSmall",children:d.ag.get("search.empty-results-title",u)}),(0,p.jsx)(r.x,{as:"p",variant:"bodySmall",children:d.ag.get("search.empty-results-text")})]});if((null==a?void 0:a.navType)===gs.SEARCH){const e=[{type:gs.ARTISTRESULTS,label:d.ag.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:gs.ALBUMRESULTS,label:d.ag.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:gs.TRACKRESULTS,label:d.ag.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return h=t,m?(0,p.jsx)(p.Fragment,{children:h.map(((e,t)=>e&&e.type===B.p.AUDIOBOOK?(0,p.jsx)(At,{contextUri:l,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:!0,onDragStart:t=>{x(t,{itemUris:[e.uri],itemMimeTypes:[It.RN.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null))}):(0,p.jsx)(Wi,{renderRow:f,searchResults:h,renderSeeAllRow:y,seeAllXList:e})}return(null==a?void 0:a.navType)===gs.ALBUM?(0,p.jsx)(Qi,{renderRow:f,searchResults:h}):(null==a?void 0:a.navType)===gs.ARTIST?(0,p.jsx)(qi,{renderRow:f,searchResults:h}):(null==a?void 0:a.navType)===gs.ALBUMRESULTS?(0,p.jsx)(Gi,{renderRow:f,searchResults:h}):(null==a?void 0:a.navType)===gs.TRACKRESULTS?(0,p.jsx)(Ji,{renderRow:f,searchResults:h}):(null==a?void 0:a.navType)===gs.ARTISTRESULTS?(0,p.jsx)(Yi,{renderRow:f,searchResults:h}):null},ys=e=>{let{playlistUri:t,onCurationModeChange:a,isBooklist:s}=e;const[l,n]=(0,i.useState)([]),[o,c]=(0,i.useState)(),u=(0,mi.S)(),{level:m,changeTerm:h,goBack:g,navToEntity:x,navToResults:v,term:y}=(()=>{const[e,t]=(0,i.useReducer)(xs,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:s}=e;return{changeTerm:e=>{t({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{t({type:"GO_BACK"})},navToEntity:e=>{t({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{t({type:"NAV_TO_RESULTS",level:e})},term:s}})(),{request:f}=(0,i.useContext)(pi.Ax);return(0,i.useEffect)((()=>{let e=!0;return(async()=>{if(m)switch(m.navType){case gs.SEARCH:try{if(!o||o.query!==y&&""!==y){const t=await wi(f,y,s);e&&c(t)}else""===y&&n([])}catch{n([])}o&&n(o.topResults);break;case gs.ARTISTRESULTS:o&&n(null==o?void 0:o.artists);break;case gs.ALBUMRESULTS:o&&n(null==o?void 0:o.albums);break;case gs.TRACKRESULTS:o&&n(null==o?void 0:o.tracks);break;case gs.EPISODERESULTS:o&&n(null==o?void 0:o.episodes);break;case gs.ALBUM:try{const t=await _i(f,m.uri,100,0);e&&t&&n(t.tracks)}catch{n([])}break;case gs.ARTIST:try{const t=await Ui(f,m.uri,100,0);e&&t&&n([...t.albums,...t.tracks])}catch{n([])}}})(),()=>{e=!1}}),[m,y,o,f,s]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)("section",{className:A.Z.playlistInlineCurationSection,children:[(0,p.jsxs)("div",{className:A.Z.playlistInlineCurationWrapper,children:[(0,p.jsx)(r.x,{as:"h1",className:A.Z.playlistInlineCurationTitle,variant:"titleSmall",children:d.ag.get("playlist.curation.title")}),(0,p.jsx)(i.Suspense,{fallback:null,children:(0,p.jsx)(Hi,{placeholder:s?d.ag.get("playlist.curation.search_placeholder-booklists"):d.ag.get("playlist.curation.search_placeholder"),onFocus:()=>{a(!0)},onChange:e=>{h(e)}})})]}),(0,p.jsx)("button",{className:A.Z.playlistInlineCurationCloseButton,onClick:()=>a(!1),children:(0,p.jsx)(ka.k,{"aria-label":d.ag.get("close")})})]}),null!==m&&m.navType!==gs.SEARCH?(0,p.jsxs)("button",{className:A.Z.playlistInlineCurationBackButton,onClick:()=>g(),children:[u?(0,p.jsx)(di.V,{"aria-label":d.ag.get("navbar.go-back"),className:A.Z.icon}):(0,p.jsx)(ui.e,{"aria-label":d.ag.get("navbar.go-back"),className:A.Z.icon}),(0,p.jsx)(r.x,{as:"p",variant:"bodyMediumBold",children:m.title})]}):null,(0,p.jsx)("div",{className:A.Z.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,p.jsx)(vs,{playlistUri:t,term:y,level:m,resultList:l,navToEntity:x,navToResults:v,isRTL:u,isBooklist:s})})]})};var fs=a(38965),bs=(a(54487),a(42738));a(58465);const js={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},ks=e=>{const t=e.replace(/\+/g,"%20");return decodeURIComponent(t)},Cs=e=>{const t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};const a=t[1],i=/([^:]+):([^:]+)/g;let s;const l=[],r=[];for(;s=i.exec(a);){const e=s[1];let t=s[2];e===js.USER&&(t=ks(t)),l.push(e),r.push(t)}if(0===l.length)return{type:null,id:null};const n=l.reduce(((e,t,a)=>(e[l[a]]=r[a],e)),{});return{type:l[l.length-1],id:r[r.length-1],...n}};var Ts=a(78024),Rs=a(79096);const Ss=new hi.o("getAudiobooksMetadata","query","e04c61a831b3e1861a5de961c520ddf7834127ef8e4b94724173a4c4a90e38fe",null),As=3e5;function Is(e,t){return["list-extender",e,t]}const Ns=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3?arguments[3]:void 0;const l=2*a,r=3*a,n=(0,Ke.NL)(),c=(0,i.useRef)(0),[d,u]=(0,i.useState)(e),[m,p]=(0,i.useState)((()=>{var a;return(null===(a=n.getQueriesData({queryKey:Is(e,t),stale:!1}).at(0))||void 0===a?void 0:a[1])??[]})),h=(0,i.useRef)(m.map((e=>e.uri??""))),{spec:g,logger:x}=(0,ge.fU)(o.T,{data:{uri:e}}),v=(0,i.useMemo)((()=>g.recommendedFactory()),[g]);(0,Rs.F)(Ts.XL.OPERATION_COMPLETE,(a=>{let{data:i}=a;i.uri===e&&(i.operation===Ts.If.ADD?p((e=>e.filter((e=>i.uris.every((t=>t!==e.uri)))))):i.operation===Ts.If.REMOVE&&p((e=>e.filter((e=>i.items.every((t=>t.uri!==e.uri)))))),i.operation!==Ts.If.ADD&&i.operation!==Ts.If.REMOVE||n.invalidateQueries({queryKey:Is(e,t)}))}));const y=(0,i.useRef)(!0);(0,i.useEffect)((()=>(y.current||(p([]),u(e),h.current=[],c.current=c.current+1),y.current=!0,()=>{c.current=c.current+1})),[e]),(0,i.useEffect)((()=>{if(m.length<l){const e=Math.min(l,r-m.length),a=c.current,i=Is(d,t),o=y.current&&0===h.current.length;(o?n.fetchQuery({queryKey:i,queryFn:()=>s(d,[],e),staleTime:As,gcTime:As}):s(d,h.current,e)).then((t=>{if(a!==c.current||!t)return;const s=t.map((e=>(null==e?void 0:e.uri)&&e.uri)).filter((e=>null!==e));t.length<e&&h.current.length?h.current=[]:h.current=[...h.current,...s],p((e=>[...e,...t])),o&&n.setQueryData(i,t)}))}y.current=!1}),[l,r,d,m.length,n,s,t]);const f=(0,i.useCallback)((()=>{if(g){const e=v.refreshButtonFactory().hitRefreshContent();x.logInteraction(e)}p((e=>e.slice(a)))}),[x,v,g,a]);return{recommendations:m.slice(0,a),_bufferedRecommendations:m.slice(a),refresh:f}},Es=i.memo((function(e){let{uri:t}=e;const{recommendations:a,refresh:s}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const a=(0,i.useContext)(bs.Z),{request:s}=(0,i.useContext)(pi.Ax),l=(0,i.useCallback)((async(e,t,i)=>{var l;const r=await a.getRecommendedBookUris(e,t,i),n=await s(Ss,{uris:r});return(null==n||null===(l=n.data)||void 0===l?void 0:l.podcasts.map((e=>"Audiobook"===e.__typename?bi(e):null)).filter(Ci.K))??[]}),[a,s]);return Ns(e,"book",t,l)}(t),l=(0,_.O)(),n=(0,fs.s)();return n?null!=a&&a.length&&a.length>0?(0,p.jsxs)("div",{className:A.Z.recommendedTrackList,children:[(0,p.jsx)("div",{className:A.Z.top,children:(0,p.jsxs)("div",{className:A.Z.header,children:[(0,p.jsx)(r.x,{variant:"titleSmall",children:d.ag.get("playlist.extender.recommended.title")}),(0,p.jsx)(r.x,{variant:"bodySmall",className:A.Z.subtitle,children:d.ag.get("playlist.extender.songs.in.playlist")})]})}),n&&(0,p.jsxs)(p.Fragment,{children:[a.map(((e,a)=>e?(0,p.jsx)(At,{contextUri:t,featureIdentifier:"playlist_recommendations",book:e,sharingInfo:e.sharingInfo,isRecommendation:!0,draggable:!0,onDragStart:t=>{l(t,{itemUris:[e.uri],itemMimeTypes:[It.RN.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==a},a):null)),(0,p.jsx)(ia.o,{className:A.Z.refreshButton,onClick:s,children:d.ag.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:A.Z.recommendedTrackList,children:(0,p.jsx)("div",{className:A.Z.top,children:(0,p.jsxs)("div",{className:A.Z.header,children:[(0,p.jsx)(r.x,{variant:"titleSmall",children:d.ag.get("playlist.extender.recommended.title")}),(0,p.jsx)(r.x,{variant:"bodySmall",className:A.Z.subtitle,children:d.ag.get("web-player.playlist.recommender-dsa-message")})]})})})})),Ls=i.memo((function(e){let{playlistUri:t,canEdit:a,tracks:s}=e;const{usePlayContextItem:l}=(0,ne.n)({uri:t.replace("spotify:","spotify:internal:recs:"),pages:[{items:s.map((e=>({...e,provider:null,type:B.p.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),r=(0,i.useCallback)(((e,i)=>{const s=e.duration;return(0,p.jsx)(Nt.cp,{index:i,imgUrl:e.album.imageUrl,contextUri:t.replace("spotify","spotify:internal:recs"),uri:e.uri,isPlayable:!e.isMOGEFRestricted,name:e.name,artists:e.artists,album:{...e.album,imgUrl:e.album.imageUrl},isExplicit:e.explicit,isMOGEFRestricted:e.isMOGEFRestricted,usePlayContextItem:l,durationMs:s,shouldRenderDuration:!a,internalLink:!0},`${i}-${e.uri}`)}),[t,l,a]),n=(0,i.useMemo)((()=>[Nt.QD.TITLE_AND_ARTIST,Nt.QD.ALBUM,Nt.QD.ADDED_AT,Nt.QD.ADD]),[]),o=(0,i.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),c=(0,i.useMemo)((()=>s.slice(0,Math.min(s.length,10))),[s]);return(0,p.jsx)(Nt.Pv,{ariaLabel:d.ag.get("playlist.extender.recommended.header"),nrTracks:Math.min(s.length,10),rowPlaceholder:Nt.hU,tracks:c,renderRow:r,resolveItem:o,columns:n},`${t}-recommended`)})),Ps=i.memo((function(e){let{playlistUri:t,playlistLength:a,canEdit:s}=e;const{recommendations:l,refresh:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;const a=(0,i.useContext)(bs.Z),s=(0,i.useCallback)((async(e,t,i)=>{const s=t.map((e=>Cs(e).id??""));return a.getRecommendedTracks(e,s,i)}),[a]);return Ns(e,"track",t,s)}(t),o=!a||0===a,c=(0,fs.s)(),u=`${t}|${m=l,m?m.map((e=>e.uri)):[]}`;var m;ee({context:u,shouldFire:!!l.length});const h=o?d.ag.get("playlist.extender.title.in.playlist"):d.ag.get("playlist.extender.songs.in.playlist");return c?l.length>0?(0,p.jsxs)("div",{className:A.Z.recommendedTrackList,children:[(0,p.jsx)("div",{className:A.Z.top,children:(0,p.jsxs)("div",{className:A.Z.header,children:[(0,p.jsx)(r.x,{variant:"titleSmall",children:d.ag.get("playlist.extender.recommended.title")}),(0,p.jsx)(r.x,{variant:"bodySmall",className:A.Z.subtitle,children:h})]})}),c&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Ls,{playlistUri:t,canEdit:s,tracks:l}),(0,p.jsx)(ia.o,{className:A.Z.refreshButton,onClick:n,children:d.ag.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:A.Z.recommendedTrackList,children:(0,p.jsx)("div",{className:A.Z.top,children:(0,p.jsxs)("div",{className:A.Z.header,children:[(0,p.jsx)(r.x,{variant:"titleSmall",children:d.ag.get("playlist.extender.recommended.title")}),(0,p.jsx)(r.x,{variant:"bodySmall",className:A.Z.subtitle,children:d.ag.get("web-player.playlist.recommender-dsa-message")})]})})})})),Ds=i.lazy((()=>a.e(7427).then(a.bind(a,23737)))),ws=i.lazy((()=>Promise.resolve().then(a.bind(a,28133)))),_s=i.lazy((()=>a.e(1021).then(a.bind(a,73205)))),Us=i.lazy((()=>a.e(5457).then(a.bind(a,43776)))),Ms=new Set([]),Os=i.memo((function(e){var t,a,m,h;let{playlist:g,capabilities:x}=e;const{metadata:{uri:b,name:j,images:k,totalLength:C,unfilteredTotalLength:T,isOwnedBySelf:R,hasEpisodes:S,canAdd:O,canRemove:B,formatListData:F,hasDateAdded:H,collaborators:W,isPublished:Q,hasSpotifyAudiobooks:q,hasSpotifyTracks:G},contents:{items:J}}=g,{spec:X,logger:le,UBIFragment:me}=(0,ge.fU)(o.T,{data:{uri:b}}),be=(0,z.k)(),je=(0,n.W6)(xe.OC,{loadingValue:!1}),ke=(0,n.W6)(xe.MF,{loadingValue:!1}),Ce=(0,n.W6)(Y.OBF,{loadingValue:!1}),{isCompactMode:Te}=(0,w.mJ)(),Re=i.useMemo((()=>X.headerFactory()),[X]),Se=i.useMemo((()=>X.tracklistFactory()),[X]),Ae=i.useMemo((()=>X.actionBarFactory()),[X]),Ie="chart"===(null==F?void 0:F.type),Ne="concerts-near-you"===(null==F?void 0:F.type)&&je,Ee="live-streams"===(null==F?void 0:F.type),Le=["blend","celebrity-blend","friends-mix"].indexOf((null==F?void 0:F.type)||"")>-1,Pe=[G,S,q].filter(Boolean).length>1,De=!Pe&&!!q&&(0,ci.V)(J),we="artistsets"===(null==F?void 0:F.type)||"this-is"===(null==F?void 0:F.attributes["editorial.series"]),_e=(null==F?void 0:F.attributes)||{},Ue=_e.header_image_url_desktop||_e.image_url||null,Me=O&&B,{inlineCurationModeIsOn:Oe,handleInlineCurationModeChange:Be}=((e,t)=>{const[a,s]=(0,i.useState)(e&&0===t),{scrollNodeChildRef:l}=(0,i.useContext)(se.VX),r=(0,i.useRef)(a);return(0,i.useEffect)((()=>{const e=!r.current;var t;l&&e&&a&&(null===(t=l.current)||void 0===t||t.scrollIntoView({block:"end",behavior:"smooth"})),r.current=a}),[l,a]),{inlineCurationModeIsOn:a,handleInlineCurationModeChange:e=>{s(e)}}})(Me&&(!De||ke&&Ce),T),{productState:Fe}=(0,s.v9)($.Gg),Ze=!!Fe&&parseInt(Fe.ads,10)>0,Ke="spotify"===g.metadata.owner.username,Ve=(0,s.I0)(),ze=(0,l.ur)(),He=(0,l.TH)(),We=(0,n.W6)(Y.XPU,{loadingValue:!1}),Qe=(0,n.W6)(Y.wAP,{loadingValue:!1}),qe=(0,n.W6)(Y.bys,{loadingValue:!1}),Ge=null===(t=(0,D.useThisisPlaylistExtensionQuery)({uri:b},{gcTime:5*re.y,enabled:we}).data)||void 0===t?void 0:t.playlistV2,Je="Playlist"===(null==Ge?void 0:Ge.__typename)?null===(a=Ge.artistsOnTour)||void 0===a?void 0:a[0]:null,Ye=qe&&"Playlist"===(null==Ge?void 0:Ge.__typename)?null===(m=Ge.concerts)||void 0===m?void 0:m.items.map((e=>e.data)):null,Xe=null==Ye?void 0:Ye.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{var t;const a=[e.location.name,e.location.city].join(d.ag.getSeparator()),i=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:a,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:null===(t=i[0])||void 0===t||null===(t=t.visuals.avatarImage)||void 0===t||null===(t=t.sources[0])||void 0===t?void 0:t.url}})),$e="POP"!==ze?new URLSearchParams(He.search).get("uid"):null,et=(0,V.o)(),{filter:tt}=(0,i.useContext)(N.fo),{sortState:at}=(0,i.useContext)(E.Gb),it=(0,i.useContext)(oe.ZF),st=(0,i.useRef)(null),lt=(0,i.useRef)(null),[rt]=k,nt=(0,te.Z)(null!==Ue?Ue:(null==rt?void 0:rt.url)||null),{isPlaying:ot,isActive:ct,togglePlay:dt,usePlayContextItem:ut}=(0,ne.n)(function(e,t,a){const i={uri:e};return(0,ce.R)(i,t),(0,de.I)(i,(0,ue.cj)(a)),i}(b,(0,I._j)(at),tt),{featureIdentifier:"playlist"}),mt=(0,i.useCallback)((()=>{const e=(0,ie.aK)({isPlaying:ot,isActive:ct,spec:Ae.playButtonFactory(),logger:le,uri:b});dt({loggingParams:e})}),[ot,ct,dt,Ae,le,b]),pt=(0,i.useCallback)((e=>{const t=e.split(/[\r\n]+/g).map((e=>(0,c.EC)(e))).filter((e=>null!==e&&((0,c.wj)(e)||(0,c.hn)(e)||(0,c.dB)(e))));if(t.length>0&&O){var a;const e=t.map((e=>e.toURI())),i={after:(null===(a=st.current)||void 0===a||null===(a=a.getSelected())||void 0===a||null===(a=a.slice(-1))||void 0===a?void 0:a[0])??"end"};Ve((0,u.jV)(b,e,i))}}),[O,Ve,b]);(0,ae.aw)(pt);const ht=(0,i.useCallback)(((e,t)=>{const a=[...t[_.a[c.JM.TRACK]]||[],...t[_.a[c.JM.LOCAL_TRACK]]||[],...t[_.a[c.JM.EPISODE]]||[],...t[_.a[c.JM.ALBUM]]||[]];a.length>0&&O&&(le.logInteraction(X.dragAddToPlaylist({playlist:b,itemToBeAdded:a[0]})),Ve((0,u.jV)(b,a)),et({targetUri:b,intent:"add",type:"drop"}))}),[O,le,X,b,Ve,et]),gt=(0,pe.vI)(ve.k.RichPlaylistPages,He),xt=null===(h=(0,c.EC)(b))||void 0===h?void 0:h.id;(e=>{const t=(0,s.I0)(),a=(0,U.E)(),l=(0,s.v9)(Z);(0,i.useEffect)((()=>{a&&e!==l&&t((0,M.jZ)(e))}),[e,l,t,a])})(b);const vt=(0,s.v9)(K),yt=(e=>{let{treatment:t,entityId:a,experimentId:i,treatmentVariation:s}=e;if(t&&t[a]){const e=t[a].find((e=>e.experimentId===i));return(null==e?void 0:e.treatment)===s}return!1})({treatment:vt||{},entityId:xt||"",experimentId:ye.RPP,treatmentVariation:fe.VARIANT});const ft=!Ke&&(gt||yt)&&0!==T,bt=!De&&be&&(Me&&!Oe||ft),jt=De&&ke&&Ce&&be&&(Me&&!Oe||ft),kt=(!De||ke&&Ce)&&R&&be;ee({context:b,shouldFire:!bt});const Ct=(null==W?void 0:W.count)??1,[Tt]=(0,L.d4)(),Rt="plays"===_e.rank_type,St=(0,i.useMemo)((()=>(0,I.RG)({isMixedMedia:Pe,hasEpisodes:S,hasSpotifyAudiobooks:q,hasDateAdded:H,isLive:Ee,isConcert:Ne,isBlend:Le,nrCollaborators:Ct,isBooklist:De,isCompactMode:Te,isChart:Ie,showPlayCount:Rt})),[Pe,S,q,H,Ee,Ne,Le,Ct,De,Te,Ie,Rt]),At=(0,i.useMemo)((()=>{let e;return e=it.getCapabilities().canSort?De?new Set(E.i1):new Set((0,I.yj)(St)):Ms,e}),[St,De,it]),It=Ce&&De&&!Te;return(0,p.jsxs)(i.Suspense,{fallback:null,children:[(0,p.jsx)(f.$,{children:(0,he.T5)({playlistName:j,userName:g.metadata.owner.displayName||"",isSpotifyOwned:Ke})}),(0,p.jsx)(y.Z,{types:O&&!De?[_.a[c.JM.TRACK],_.a[c.JM.LOCAL_TRACK],_.a[c.JM.EPISODE],_.a[c.JM.ALBUM]]:[],onDrop:ht,children:(0,p.jsxs)("section",{role:"presentation",className:A.Z.playlist,"data-testid":"playlist-page","data-test-uri":b,children:[(0,p.jsx)(ai.s,{metadata:g.metadata,isPlaying:ot,isPublished:Q,totalItems:Tt,togglePlay:mt,backgroundColor:nt,spec:Re}),(0,p.jsxs)("div",{className:A.Z.playlistContent,children:[(0,p.jsx)($a,{playlist:g,capabilities:x,spec:Ae,isPlaying:ot,isActive:ct,togglePlay:mt,isBooklist:De,backgroundColor:nt,tracklistDomRef:lt,isConcert:Ne,sortableColumns:At}),(0,p.jsx)(i.Suspense,{fallback:null,children:(0,p.jsx)(Ds,{formatListData:g.metadata.formatListData})}),!qe&&null!=Je&&Je.upcomingEventsCount?(0,p.jsx)(ws,{artistConcertsUri:Je.uri||"",artistImageUrl:Je.imageUrl||"",artistName:Je.title||"",spec:X}):null,qe&&!!Je&&Xe&&Xe.length>0&&(0,p.jsx)(i.Suspense,{fallback:null,children:(0,p.jsx)(_s,{liveEvents:Xe,artistConcertsUri:Je.uri||"",artistName:Je.title||"",spec:X})}),(0,p.jsxs)("div",{className:"contentSpacing",children:[Ze?(0,p.jsx)(v,{playlistUri:b}):null,We&&Ze&&Ke?(0,p.jsx)(Us,{uri:b,playlistName:j}):null,g.metadata.hasSpotifyAudiobooks&&Qe&&(0,p.jsxs)("div",{className:A.Z.noBooklistSupportContainer,children:[(0,p.jsx)(r.x,{variant:"bodyMediumBold",semanticColor:"textBase",children:d.ag.get("web-player.playlist.booklist-not-supported-title")}),(0,p.jsx)(r.x,{variant:"bodyMedium",semanticColor:"textSubdued",children:d.ag.get("web-player.playlist.booklist-not-supported.message")})]}),C>0&&(0,p.jsx)(i.Suspense,{fallback:null,children:It?(0,p.jsx)(Ot,{initialItems:J,contextUri:b,nrItems:C,canEdit:Me,canRemove:B,ariaLabel:j}):(0,p.jsx)(me,{spec:Se,children:(0,p.jsx)(P.a,{columns:St,children:Ie?(0,p.jsx)(Ht,{ariaLabel:j,nrTracks:C,playlistUri:b,scrollToUid:$e,usePlayContextItem:ut,tracklistDomRef:lt,sortableColumns:At,isCompactMode:Te},b):(0,p.jsx)(oi,{ariaLabel:j,nrTracks:C,playlistUri:b,playlistName:j,isMixedMedia:Pe,isLive:Ee,isConcert:Ne,isBlend:Le,isBooklist:De,canEdit:Me,scrollToUid:$e,feedbackPath:_e["dislike-endpoint"],deleteFeedbackPath:_e["delete-endpoint"],usePlayContextItem:ut,tracklistRef:st,tracklistDomRef:lt,canRemove:B,spec:Se,initialItems:J,isCompactMode:Te,sortableColumns:At,hasSpotifyAudiobooks:q??!1},b)})})}),kt&&(0,p.jsx)(i.Suspense,{fallback:null,children:Oe?(0,p.jsx)(ys,{playlistUri:b,onCurationModeChange:Be,isBooklist:De}):(0,p.jsx)("button",{className:A.Z.seeMore,onClick:()=>{Be(!0)},children:(0,p.jsx)(r.x,{as:"div",variant:"bodySmallBold",children:d.ag.get("playlist.curation.find_more")})})}),bt?(0,p.jsx)("div",{"data-testid":"recommended-track",children:(0,p.jsx)(Ps,{playlistUri:b,playlistLength:g.metadata.unfilteredTotalLength,canEdit:Me})}):null,jt?(0,p.jsx)(Es,{uri:b}):null]})]}),Ne&&(0,p.jsx)(ti,{spec:X.footerSectionFactory()})]})})]})})),Bs=i.memo((function(e){let{uri:t}=e;const a=(0,i.useContext)(oe.ZF).getCapabilities(),{filter:s}=(0,i.useContext)(N.fo),{sortState:l}=(0,i.useContext)(E.Gb),{metadataOptions:r,contentsOptions:n}=(0,Mt.d)(l,s),{data:o,isLoading:c,isError:u}=(0,me.Z)(t,r,n);return!o||c?(0,p.jsx)(S.h,{hasError:u,errorMessage:d.ag.get("error.not_found.title.playlist"),loadOffline:a.canModifyOffline}):o.metadata.permissions&&!o.metadata.permissions.canView?(0,p.jsx)(R,{uri:t}):(0,p.jsx)(Os,{playlist:o,capabilities:a})})),Fs=()=>{const{playlistId:e}=(0,l.UO)(),t=(0,c.FW)((e||"").split("&")[0]).toURI();return(0,p.jsx)(le.fd,{surface:le.Tg.PLAYLIST,uris:[t],children:(0,p.jsx)(E.kz,{uri:t,children:(0,p.jsx)(N.hz,{uri:t,children:(0,p.jsx)(L.Y4,{children:(0,p.jsx)(Bs,{uri:t})})})})})}},71854:(e,t,a)=>{a.d(t,{I:()=>n});a(70054);var i=a(95812),s=a(57158);s.R0.TEXT,s.pg.CONTAINS;const l={[s.R0.TEXT]:"text"},r={[s.pg.CONTAINS]:"=^#"};function n(e,t){void 0!==(null==t?void 0:t.value)&&(e.metadata||(e.metadata={}),e.metadata[i.sb.FILTERING_PREDICATE]=function(e){const{field:t,operator:a,value:i}=e;if(t!==s.R0.TEXT||a!==s.pg.CONTAINS)throw new Error("Invalid filter params!");return`${l[t]} ${r[a]} "${i}"`}(t))}},91415:(e,t,a)=>{a.d(t,{R:()=>r});a(70054),a(86277);var i=a(95812),s=a(3853);s.bD.TITLE,s.bD.ADDED_BY,s.bD.ADDED_AT,s.bD.ARTIST,s.bD.ALBUM,s.bD.DURATION;const l={[s.bD.TITLE]:["title","original_index"],[s.bD.ADDED_BY]:["added_by","original_index"],[s.bD.ADDED_AT]:["added_at","album_title","album_artist_name","album_disc_number","album_track_number","original_index"],[s.bD.ARTIST]:["artist_name","album_title","album_disc_number","album_track_number","original_index"],[s.bD.ALBUM]:["album_title","album_disc_number","album_track_number","original_index"],[s.bD.DURATION]:["duration","album_title","album_disc_number","album_track_number","original_index"]};function r(e,t){void 0!==t&&(e.metadata||(e.metadata={}),e.metadata[i.sb.SORTING_CRITERIA]=function(e){const{field:t,order:a}=e,i=l[t];if(void 0===i||a!==s.As.ASC&&a!==s.As.DESC)throw new Error("Invalid sort params!");return i.map(((e,t)=>a?`${e} ${t>0?s.As.ASC:a}`:e)).join(",")}(t))}},39600:(e,t,a)=>{a.d(t,{vI:()=>i});a(75930),a(86277),a(65484),a(35174),a(96241);const i=(e,t)=>{const a=t?new URLSearchParams(t.search):void 0;return"1"===(null==a?void 0:a.get(e))}},40234:(e,t,a)=>{a.d(t,{k:()=>i});let i=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.I18nAdditionalPages="i18nap",e.RichPlaylistPages="rpp",e.ILRAlbum="ilra",e.ILRAlbumAbove="ilraa",e.ILRAlbumBelow="ilrab",e.ILRShow="ilrs",e.PlaylistInternalTrackLinks="pitl",e.PlaylistInternalTrackAndArtistLinks="pital",e}({})},97607:(e,t,a)=>{a.d(t,{Z:()=>i});const i={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.38339fe5.js.map