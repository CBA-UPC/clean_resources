import{A as X,bd as Se,be as Ce,aK as T,ca as W,d as u,aJ as i,an as we,k2 as Oe,k3 as _e,bM as Y,bN as Z,k4 as Ie,cb as F,u as J,az as ge,f as ae,aa as je,e as be,bO as ie,B as Te,j as h,l as D,_ as B,ab as Ee,gM as Le,m as Pe,aB as Ae,aC as Me,aD as De,a1 as ee,bI as se,k5 as L,N as te,aI as le,ci as ce,cj as de,k6 as oe,k7 as Be,aF as V,aG as U,aH as K,E as j,k8 as Re,k9 as Ne,n as ze,ka as He,kb as $e,J as We,kc as Fe,V as Ve,kd as Ue,ke as Ke}from"./index-IMvvqvG5.js";import{T as Ge,b9 as k,ba as Ye,h as Ze,bb as Xe,bc as Je,bd as Qe,be as qe}from"./useImageMeasurer-i_xvXh1-.js";import{b as et,c as tt,d as ot,T as at,a as nt}from"./index-3yfBtf9f.js";import{P as rt}from"./Chat-TGyEU5sr.js";import{F as it}from"./ko-KR-c9d47ca5-RhbZl9Fm.js";import{c as st}from"./getPressedImageData-74KNu2MQ.js";import{S as lt}from"./SharedFilesProvider-46a58886-rhTskHA9.js";import"./index-6SJllaRd.js";import"./index-ss2QbMh7.js";import"./Toaster-85f95a2f-zuTjRKMY.js";import"./ar-15c04e7a-bJD5JbAu.js";var ye=function(e){return e.Top="top",e.Middle="middle",e.Bottom="bottom",e}(ye||{}),$=$||{});function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),r.push.apply(r,a)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ue(Object(r),!0).forEach(function(a){T(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}var ct=X({"@global":{body:{overflow:height:"100vh"}},root:H(H(H({width:"100%",height:"100%",position:top:0,left:0,backgroundColor:function(t){return t.backgroundColor},overflowX:"hidden",overflowY:"auto"},Se()),Ce),{},{scrollBehavior:"smooth",zIndex:),backLayer:{display:"block",position:"absolute",top:0,right:0,bottom:0,left:0},container:{display:"table",tableLayout:"fixed",width:"100%",height:"100%"},row:{display:"table-row",height:"100%"},cell:function(t){var r={display:"table-cell",height:"100%",verticalAlign:t.verticalPosition,textAlign:!t.contentIsFullWidth&&t.horizontalPosition},a;switch(t.horizontalPosition){case $.Left:a=T(T({},W(),{textAlign:"left"}),W(!1),{textAlign:"right"});break;case $.Right:a=T(T({},W(),{textAlign:"right"}),W(!1),{textAlign:"left"});break;case $.Center:a={textAlign:"center"};break;default:a={};break}return H(H({},r),a)},content:{display:"inline-block",verticalAlign:"top",textAlign:"initial",width:function(t){return t.contentIsFullWidth&&"100%"},height:position:"relative"}},{name:"modal"});r dt={allowOutsideClick:!0,initialFocus:!1};function ut(e,t){var r=e.children,a=e.isLocal,l=a===void 0?!1:a,g=e.zIndex,s=g===void 0?20:g,c=e.contentIsFullWidth,x=c===void 0?!1:c,b=e.contentIsFullHeight,m=b===void 0?!1:b,S=e.verticalPosition,f=S===void 0?ye.Middle:S,_=e.horizontalPosition,E=_===void 0?$.Center:_,I=e.backgroundColor,C=I===void 0?"var(--backgrounds-transparent)":I,P=e.onClose,v=P===void 0?we:P,y=e.focusTrapProps,w=e.dataTest,R=w===void 0?"modal root":w,O=ct({isLocal:l,zIndex:s,contentIsFullWidth:x,contentIsFullHeight:m,verticalPosition:f,horizontalPosition:E,backgroundColor:C}),A=u.useRef(null),Q=M(M({},y),{},{focusTrapOptions:M(M({fallbackFocus:,dt),y==null?void 0:y.focusTrapOptions)});return i.jsx(it,M(M({},Q),{},{children:i.jsxs("div",{className:O.root,"data-test":R,ref:A,children:[i.jsx("i",{className:O.backLayer,onClick:v,role:"presentation",tabIndex:-1}),i.jsx("div",{className:O.container,ref:t,children:i.jsx("div",{className:O.row,children:i.jsx("div",{className:O.cell,children:i.jsx("div",{className:O.content,children:r})})})})]})}))}var pt=u.forwardRef(ut),he=ht=u.createContext({showModal:he,hideModal:he});ht.displayName="ModalContext";var mt=X({shortCutPopupContainer:T({display:"grid",gridGap:24,width:798,minHeight:446,gridAutoRows:"max-content",padding:24,background:"var(--backgrounds-tint-2)",border:"2px solid var(--backgrounds-tint-3)",boxShadow:"0px 0px 6px var(--shadows-tint-1)"},Oe(_e.Medium),{width:740}),header:{fontWeight:Y.Bold,fontSize:Z.Size_8,color:"var(--texts-base)"},tabContextItem:{marginTop:24,margin:"0 10px"},tabContextItemContent:{display:"flex",justifyContent:"space-between"}}),gt=X({shortCutRow:{display:"grid",gridAutoFlow:"column",justifyContent:"start",alignItems:"center",marginBottom:12,height:32},shortCutName:{width:160,fontSize:Z.Size_4,fontWeight:Y.Medium,lineHeight:"16px",color:"var(--texts-tint-1)",marginInlineEnd:20}}),bt=X({shortCutButtonsWrapper:{display:"flex",alignItems:"center"},multipleKeyboards:{display:"grid",gridGap:8,gridAutoFlow:"column",alignItems:"center",justifyContent:"center","& span":{marginRight:12,marginLeft:4,fontStyle:"normal",fontWeight:Y.Medium,fontSize:Z.Size_4,lineHeight:"13px",color:"var(--texts-tint-1)"}},shortCutButton:{display:"flex",alignItems:"center",justifyContent:"center",minWidth:32,height:32,padding:8,backgroundColor:"var(--backgrounds-tint-4)",fontWeight:Y.Medium,fontSize:Z.Size_4,lineHeight:"13px",color:"var(--texts-base)",borderRadius:12},shortCutButtonLight:{backgroundColor:"transparent",color:"var(--texts-base)",border:"1px solid var(--backgrounds-tint-4)"},shortCutIcon:{verticalAlign:"top",display:"inline-block",width:14,height:14,"& svg":{"& path":{fill:"var(--texts-base)"}}}}),n=function(e){return e.light="light",e.dark="dark",e}({}),fe={});function yt(e){var t=e.keyboardList,r=bt(),a=J(),l=u.useMemo(function(){return Array.isArray(t[0])?t:[t]},[t]);return i.jsx("div",{className:r.shortCutButtonsWrapper,children:l.map(function(g,s){return i.jsxs("div",{className:r.multipleKeyboards,children:[g.map(function(c){var x=c.icon_name,b=c.name;return i.jsx("div",{children:i.jsx("div",{className:ae(r.shortCutButton,T({},r.shortCutButtonLight,c.color===n.light)),children:x?i.jsx(je,{name:x,className:r.shortCutIcon}):a(c.name)})},b)}),s!==l.length-1&&i.jsx("span",{children:a(fe.or)})]},"keyboard_".concat(ge()))})})}function ft(e){var t=e.section,r=gt(),a=J();return i.jsx("section",{children:t.map(function(l){var g=l.name,s=l.keyboard;return i.jsxs("div",{className:r.shortCutRow,children:[i.jsx("h5",{className:r.shortCutName,children:a(g)}),i.jsx(yt,{keyboardList:s})]},g)})})}var me=Ie&&navigator.platform.toUpperCase().includes("MAC"),vt=[{type:"general",name:"General"},{type:"text",name:"Text"},{type:"arrange",name:"Arrange"},{type:"video",name:"Video"}],o={ctrl:{color:n.dark,name:"Ctrl",icon_name:me?"command-editor":null},alt:{color:n.dark,name:"Alt",icon_name:me?"option-editor":null},shift:{color:n.dark,name:"Shift"},drag:{color:n.light,name:"Drag"},arrowKeys:{color:n.light,name:"Arrow keys"}},kt={general:[[{name:"Copy",type:"copy",keyboard:[o.ctrl,{color:n.light,name:"C"}]},{name:"Copy Style",type:"copyStyle",keyboard:[o.alt,o.ctrl,{color:n.light,name:"C"}]},{name:"Paste",type:"past",keyboard:[o.ctrl,{color:n.light,name:"V"}]},{name:"Paste Style",type:"pasteStyle",keyboard:[o.alt,o.ctrl,{color:n.light,name:"V"}]},{name:"Cut",type:"cut",keyboard:[o.ctrl,{color:n.light,name:"X"}]},{name:"Delete",type:"delete",keyboard:[{color:n.dark,name:"Del"}]},{name:"Lock",type:"lock",keyboard:[o.ctrl,{color:n.light,name:"L"}]},{name:"Unlock",type:"unlock",keyboard:[o.shift,o.ctrl,{color:n.light,name:"L"}]},{name:"Hide",type:"hide",keyboard:[o.ctrl,{color:n.light,name:"H"}]},{name:"Show",type:"show",keyboard:[o.ctrl,o.shift,{color:n.light,name:"H"}]},{name:"Select all",type:"selectAll",keyboard:[o.ctrl,{color:n.light,name:"A"}]},{name:"Deselect",type:"deselect",keyboard:[{color:n.dark,name:"ESC"}]}],[{name:"Duplicate",type:"duplicate",keyboard:[[o.ctrl,{color:n.light,name:"D"}],[o.alt,{color:n.light,name:"Drag"}]]},{name:"Undo",type:"undo",keyboard:[o.ctrl,{color:n.light,name:"Z"}]},{name:"Redo",type:"redo",keyboard:[o.ctrl,o.shift,{color:n.light,name:"Z"}]},{name:"Zoom in",type:"zoomin",keyboard:[o.ctrl,{color:n.light,name:"+"}]},{name:"Zoom out",type:"zoomout",keyboard:[o.ctrl,{color:n.light,name:"-"}]},{name:"Reset zoom to 100%",type:"zoomout",keyboard:[o.ctrl,{color:n.light,name:"0"}]},{name:"Play/Stop",type:"playstop",keyboard:[{color:n.dark,name:"Space"}]}]],text:[[{name:"Bold",type:"bold",keyboard:[o.ctrl,{color:n.light,name:"B"}]},{name:"Italic",type:"italic",keyboard:[o.ctrl,{color:n.light,name:"I"}]},{name:"Underline",type:"underline",keyboard:[o.ctrl,{color:n.light,name:"U"}]}],[]],arrange:[[{name:"Send backward",type:"backward",keyboard:[o.ctrl,{name:"[",color:n.light}]},{name:"Send to back",type:"back",keyboard:[o.ctrl,o.alt,{name:"[",color:n.light}]},{name:"Bring forward",type:"forward",keyboard:[o.ctrl,{name:"]",color:n.light}]},{name:"Bring to front",type:"front",keyboard:[o.ctrl,o.alt,{name:"]",color:n.light}]},{name:"Align to top",type:"aligntop",keyboard:[o.alt,{name:"W",color:n.light}]},{name:"Align to bottom",type:"alignbottom",keyboard:[o.alt,{name:"S",color:n.light}]},{name:"Align to left",type:"alignleft",keyboard:[o.alt,{name:"A",color:n.light}]},{name:"Align to right",type:"alignright",keyboard:[o.alt,{name:"D",color:n.light}]},{name:"Align to middle",type:"alignmiddle",keyboard:[o.alt,{name:"V",color:n.light}]},{name:"Align to center",type:"aligncenter",keyboard:[o.alt,{name:"H",color:n.light}]},{name:"Distribute vertically",type:"vertical",keyboard:[o.alt,o.shift,{name:"V",color:n.light}]},{name:"Distribute horizontally",type:"horizontal",keyboard:[o.alt,o.shift,{name:"H",color:n.light}]}],[{name:"Move",type:"move",keyboard:[o.arrowKeys]},{name:"Move with bigger steps",type:"moveBiggerSteps",keyboard:[o.shift,o.arrowKeys]},{name:"Move vertically / horizontally",type:"moveVertically",keyboard:[o.shift,o.drag]},{name:"Vertical/Horizontal Duplicate",type:"duplicateVertically",keyboard:[o.ctrl,o.shift,o.alt,o.drag]}]],video:[[{name:"Play video",type:"play",keyboard:[{name:"L",color:n.light}]}],[{name:"Pause video",type:"pause",keyboard:[{name:"K",color:n.light}]}]]};function xt(e){var t=e.closeModal,r=e.isOpen,a=e.shortcutCategories,l=e.dataTestId,g=l===void 0?"shortcut-popup":l,s=u.useState(0),c=F(s,2),x=c[0],b=c[1],m=mt(),S=J(),f=u.useMemo(function(){return[Object.entries(kt).filter(function(v){var y=F(v,2),w=y[0];return y[1],w in a}),vt.filter(]},[a]),_=F(f,2),E=_[0],I=_[1],C=I.map(function(v,y){return i.jsx(et,{children:S(v.name)},v.name)}),P=E.map(function(v){var y=F(v,2),w=y[0],R=y[1];return i.jsx(tt,{className:m.tabContextItem,children:i.jsx("div",{className:m.tabContextItemContent,children:R.map(function(O){return i.jsx(ft,{section:O},"section-".concat(ge()))})})},w)});return i.jsx(pt,{isOpen:r,onClose:t,children:i.jsxs(rt,{onClose:t,className:m.shortCutPopupContainer,dataTestId:g,children:[i.jsx("h3",{className:m.header,children:S(fe.shortcuts)}),i.jsxs(ot,{value:x,children:[i.jsx(at,{variant:nt.Outlined,columnGap:4,id:"tabs",onChange:children:C}),P]})]})})}const St=be(e=>({root:{display:"inline-block",width:40,height:40,border:"none",outline:"none",background:`var(--layout-bg-color, ${e.colors.backgrounds.tint1})`,borderRadius:`var(--layout-border-radius, ${e.radiuses.r12})`,cursor:"pointer",[ie()]:{"&:hover":{"& path":{fill:e.colors.texts.base}}},[ie(!1)]:{"&:active":{"& path":{fill:e.colors.texts.base}}}},active:{"& path":{fill:e.colors.texts.base}},icon:{display:"inline-block",verticalAlign:"middle",width:20,height:20,"& path":{fill:e.colors.texts.tint1,transition:`fill ${Te.Default} ease-in-out`}}})),Ct=u.forwardRef(({onClick:e,icon:t,isActive:r=!1,tabIndex:a=0,ariaLabel:l},g)=>{const s=St();return h.jsx("button",{className:ae(s.root,{[s.active]:r}),onClick:e,tabIndex:a,"aria-label":l,ref:g,children:h.jsx(t,{className:s.icon})})}),wt=u.memo(Ct),Ot=be(e=>{var t,r,a,l,g,s,c,x,b,m,S;return{"@keyframes showIndicator":{to:{opacity:1,transform:"scale(1)"}},widgetIconContainer:{pointerEvents:"all",display:"flex",flexDirection:"column",alignItems:"flex-end"},helpWidgetTooltipContainer:{position:"absolute",bottom:"85%",marginBottom:(t=e.spacings)==null?void 0:t.s16,padding:`${(r=e.spacings)==null?void 0:r.s8} ${(a=e.spacings)==null?void 0:a.s0}`,minWidth:180,backgroundColor:`var(--layout-bg-color, ${(l=e.colors)==null?void 0:l.backgrounds.base})`,border:`2px solid ${(g=e.colors)==null?void 0:g.backgrounds.tint3}`,boxShadow:`0 0 8px ${(s=e.colors)==null?void 0:s.shadows.tint1}`,borderRadius:(c=e.radiuses)==null?void 0:c.r8,overflow:"hidden"},widgetButtonText:{flexBasis:"100%"},widgetButtonIcon:{width:20,height:20,flexShrink:0,"& path":{fill:(x=e.colors)==null?void 0:x.texts.base}},helpWidgetIconWrapper:{position:"relative",display:"flex",justifyContent:"center",flexDirection:"column",alignItems:"center",width:"var(--box-size, 40px)",height:"var(--box-size, 40px)",borderRadius:(b=e.variables)==null?void 0:b.mainBorderRadius,cursor:"pointer"},shortcutPopupWrap:{pointerEvents:"all",position:"absolute",left:(m=e.spacings)==null?void 0:m.s0,top:(S=e.spacings)==null?void 0:S.s0}}}),G={iconContainer:"help-widget-icon-container",tooltipContainerActive:"help-widget-tooltip-container-active",tooltipLink:"help-widget-tooltip-link",helpTooltip:"help-tooltip",helpButton:"help-button",indicator:"indicator"},_t=[],It=D(()=>B(()=>import("./index-IMvvqvG5.js").then(e=>e.D6),__vite__mapDeps([0,1]))),jt=D(()=>B(()=>import("./index-B-EnC502.js"),__vite__mapDeps([2,0,1,3,4,5,6,7,8,9,10,11,12]))),Tt=D(()=>B(()=>import("./index-IMvvqvG5.js").then(e=>e.D8),__vite__mapDeps([0,1]))),Et=D(()=>B(()=>import("./index-IHf6pKRq.js"),__vite__mapDeps([13,0,1]))),Lt=D(()=>B(__vite__mapDeps([13,0,1])).then(),Pt=D(()=>B(__vite__mapDeps([14,0,1]))),At=Mt=u.memo(Ge),Dt=Bt=({visibleItems:e=_t})=>{const t=Ee(),r=J(),{user:a,tokenData:l,tokenDataRef:g}=Le(),[s,c]=u.useState(,{isInViewMode:x,showPrintBleed:b,isShortcutModalOpen:m,showReporting:S,isHelpListOpen:f,isDarkModeEnabled:_,isOSThemeEnabled:E,eraserOpenState:I}=Pe(Dt),C=Ot({isHelpListOpen:f}),{settings:P}=Ae({name:Me.link_sharing_enabled,tag:De.link_sharing}),v=u.useCallback(({category:d})=>d===k.report&&!x||d===k.hint&&!ee.hints?!1:e!=null&&e.length?e.includes(d):!!(ee.multiCanvases||!I||I&&d!==k.hint),[I,x,e]);u.useEffect(()=>{const d=b?"Hide":"Show";c([Ye.filter(v).map(p=>({...p,name:p.category===k.bleed?`${d} Print Bleed`:p.name}))])},[v,c,b]),u.useEffect([t,b]);const y=u.useCallback(d=>{if(d===L.System)t(te.actions.setUseOSThemeEnabled(!0)),le.putSync(ce,de.theme,oe.System);else{const p=d===L.Dark;document.head.appendChild(Be({isDark:p})),t(te.actions.setIsDarkModeEnabled(p)),t(te.actions.setUseOSThemeEnabled(!1)),le.putSync(ce,de.theme,p?oe.Dark:oe.Light,!1)}V.sendEvent(U.BUTTON_ITEM_CLICK,K.custom_event,{type:"settings_theme",origin:"photo_editor",item:At(d)})},[t]),w=u.useCallback((d,p)=>{switch(![k.help,k.theme].includes(d)&&V.sendEvent(U.BUTTON_ITEM_CLICK,K.custom_event,{type:"settings",item:p.split(" ").join("_").toLowerCase()}),t(j.actions.setIsHelpListOpen(!1)),c([s[0]]),d){case k.hint:t(j.actions.setIsHintsModeOpen(!0));return;case k.shortcut:return t(j.actions.setIsShortcutModalOpen(!m));case k.feedback:return window==null?void 0:window.open(Re.editorMain);case k.help:window.location.href="https://support.picsart.com/";break;case k.language:return t(j.actions.setLanguageSwitcherOpen(!0));case k.theme:return y(p);case k.bleed:return t(se.actions.setShowPrintBleed(!b));case k.report:return t(j.actions.showReporting(!0));default:return null}},[t,s,m,y,b]),R=u.useCallback(()=>{f&&t(j.actions.setIsHelpListOpen(!1)),c([s[0]])},[t,f,s]),O=Ze(R),A=u.useCallback(()=>{t(j.actions.setIsShortcutModalOpen(!m))},[t,m]),Q=u.useCallback(()=>{V.sendEvent(U.BUTTON_CLICK,K.custom_event,{type:"settings",origin:"photo_editor"}),t(j.actions.setIsHelpListOpen(!f)),f&&c([s[0]])},[t,f,s]),ne=u.useCallback((d,p)=>{c(,V.sendEvent(U.BUTTON_ITEM_CLICK,K.custom_event,{type:"settings",origin:"photo_editor",item:p.toLocaleLowerCase()})},[]),ve=u.useCallback(()=>{c(d=>{const p=[...d];return p.pop(),p})},[]),{slides:ke}=Xe(),xe=d=>{switch(d){case L.System:return E;case L.Dark:return!E&&_;case L.Light:return!E&&!_;default:return!1}};return h.jsxs(h.Fragment,{children:[f&&h.jsx(Pt,{}),m&&h.jsx("div",{className:C.shortcutPopupWrap,children:h.jsx(It,{isOpen:m,children:h.jsx(xt,{shortcutCategories:Je,shortcuts:Qe,isOpen:m,closeModal:)})}),P&&S&&h.jsx(qe,{initialAuthState:{user:a,tokenData:l,tokenDataRef:g},children:h.jsx(lt,{children:h.jsx(jt,{})})}),h.jsxs("div",{ref:O,className:C.widgetIconContainer,"data-testid":G.iconContainer,children:[f&&s.map((d,p)=>p===s.length-1?h.jsx(Et,{"data-testid":G.tooltipContainerActive,isSubList:p===s.length-1&&s.length>1,goBack:ve,children:d.map(({category:N,name:z,children:q,Icon:re})=>N==="hint"&&!ke||Ne&&N==="shortcut"?null:h.jsxs(Lt,{hasSubMenu:!!q,isActive:xe(z),onClick:q?()=>ne(q,z):"data-testid":G.tooltipLink,children:[re&&h.jsx(re,{className:C.widgetButtonIcon}),h.jsx(Tt,{size:"base14",weight:"medium",className:C.widgetButtonText,children:r(z)})]},z))},String(p+1)):null),h.jsx(Mt,{overlay:r("Settings"),placement:"top",children:h.jsx("div",{"data-testid":G.indicator,className:ae(C.helpWidgetIconWrapper,{[C.isIndicatorHidden]:f||ee.editorOnly}),children:h.jsx(wt,{onClick:Q,isActive:f,icon:st})})})]})]})},Yt=u.memo(Bt);export{Yt as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-IMvvqvG5.js","assets/index-YfsWbKng.css","assets/index-B-EnC502.js","assets/Reporting-691da559-BxZ4KIxs.js","assets/useImageMeasurer-i_xvXh1-.js","assets/getPressedImageData-74KNu2MQ.js","assets/index-6SJllaRd.js","assets/index-ss2QbMh7.js","assets/Toaster-85f95a2f-zuTjRKMY.js","assets/ar-15c04e7a-bJD5JbAu.js","assets/SharedFilesProvider-46a58886-rhTskHA9.js","assets/index-cdozUvTc.js","assets/index-J6DSnBCJ.js","assets/index-IHf6pKRq.js","assets/Chat-TGyEU5sr.js"]
  }
  return indexes.map(
}
