(()=>{var e,t,i={316:84:999:974:207:503:853:234:832:777:386:72:249:120:,s={};.m=i,n.n=n.d=n.f={},n.e=n.u=n.miniCssF=n.g=),n.o=e={},t="adUnits:",n.l=n.r=((),((),(()=>{"use strict";var e=n(999),t=n.n(e),i=(n(84),n(316)),s=n.n(i),r=n(316);deepClone:o,isBasicObject:a,basicObjects:l,arrays:d,deepExtend:);const v=s().Model.extend({constructor:toJSON:get:set:clear:hasChanged:changedAttributes:previous:previousAttributes:);v.keyPathSeparator=".";const y=v;s().DeepModel=y;var _,b=n(974),S=n(503),A=n(84);unction P(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var w=null,E=e.flatten;e.mixin({setConfigparseBool:el:loadJs:loadCss:loadJsArr:getUrlVars:firePixelConditional:firePixel:fireIframePixel:getViewabilityPercentisVisibleviewport:getVideoHeight(e){var t=parseInt(9/16*e);return isNaN(t)?0:t},getVideoWidthgetVideoBestSizegetVideoHeightByRatiogetVideoWidthByRatioisElementInHeadgetViewPercent:isViewable:getViewPercentageDeltas:getValidSelectorElementsfilterObjectassignWithoutUndefinedValuesstripObjectarrayToObjgetTopOfElgetParentNode:getLeftOfEl:PrefixedEvent(t,i,s,n){s=s.toLowerCase(),e.each(["webkit","moz","MS","o",""],(function(e){t[i](e+s,n)}))},oneAnimationEndaddParametersToUrlskipTransitionCssflushCssgetTopWindowisInIframe:isInFriendlyIframe:hideDFPIframe:onceDocReady:crc32:utf8Encode:isMouseOver:rollNumbers:isFactor:sendMail:isValidEmail:toCssObj:isLayerVisible:getOffsetflattencssObjToStringisModelgenerateGuidisObserverSupportedisHeightValid(e){var t=!0;return e||(t=!1),t},isWidthValidsetTrcObserverdispatchTRCdispatchTRCWithPayloadgetOffsetWithContainergetIframeDocumentDOMIteratorisBrowserIE11:forceElementRedrawWithBorderChangehasPassedPixelFromSelectorgetViewportHeight:calcViewportPositionInAppgetOrganicCardgetRootElementFontSize:convertRemflattenArray:offsetFromBottomOfViewPort:sendingEventToTaboolaBridgesetAnimationPlayStaterecoReelPlayStateAnimationtoggleRecoReelVideogetRandomFromList:isSendBeaconSupported:getSubUnitTypegetRecoReelSubUnitTypeisReadMoreOnPage:isMidArticleOnReadMorePageisReadMoreObserverNeededOnPage:trcPerformanceMeasurementisTRCPerformanceEnabled:copyCSSFromPlaceholdergetDeltaBetweenRectsbuildObserverThresholdListgetRequiredHeightgetFeedTitleHeightgetPlacementgetMarginToStartCardisPlacementWithScAdjacency:isLanguageRTLloadFromTRCisServiceValid:isServiceLoadedOnTRC:onServiceLoadedisSliderCutOffEnabled:clickThrudeferisZeptoCollection:log);var C=n(386),I=n(999);onst R=O;const N=var D=n(84),x=n(999),V=M=n(853),L=n(316);const F=var B=n(84),k=n(999);const U=const z=var H=n(999);const j=z(;var W=n(234),Z=n(999);const G=const q=const Y=var $=n(316),K=n(84);const Q=const X=var J=n(316);const ee=z(;var te=n(999),ie=n(84);ar ne=);const re=ne;var oe=n(999);const ae=const le=const de=var he=n(84);onst ue=ce;var pe=n(84),me=n(999),ge=n(316);const fe=var ve=n(316),ye=n(999);const _e=z(;var be=n(999);ar Ae=const Te=const Pe=ar Ee=n(999);const Ce=z(;var Ie=n(999);const Oe=z(;const Re=var Ne=n(207),De=n(999);onst Ve=xe;function Me(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const Le=const Fe=var Be=ke=const Ue={KIBANA_URL:"vidanalytics.taboola.com/putes/units-ads-analytics",SERVICES:{UNIT:"unit",PLAYER:"player"},EXTRA_PARAMS_EXCEPTIONS:["vidCurrentTime"],OPPS_PARAMETERS_MAPING:{player:{pstn:"pstn",mob:"isMobile",unv:"unit_version",unit_type:"unit_type",pv:"playerVersion",fdScore:"fdScore",abt:"ab_test",agl:"preset.level",su:"subUnitType",awr:"performance.dtsvrRoundTripAverageDuration",pm:"performance.performanceMeasurment",dtsvrRoundTripAverageDuration:"performance.dtsvrRoundTripAverageDuration",mp:"modifiedPlacement",sts:"playerRepeatCount",ft:"frameType",be:"playerHasRvInQ",pt:"ab_test",width:"width",height:"height",cmDast:"auc_dast"},unit:{pstn:"pstn",mob:"isMobile",unv:"unit_version",unit_type:"unit_type",fdScore:"fdScore",abt:"abTest",agl:"preset.level",awr:"performance.dtsvrRoundTripAverageDuration",pm:"performance.performanceMeasurment",su:"subUnitType",ft:"frameType",mp:"modifiedPlacement",vstt:"isInTab",cmDast:"cmDast",be:"playerHasRvInQ",sts:"playerRepeatCount"}},MAX_ES_STRING_LENGTH:32766};var ze=n(999);function He(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,s)}return i}function je(e,t,i){var s;return(t="symbol"==typeof(s=function(e,t){if("object"!=typeof e||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?s:String(s))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const We=ar Ge=function(){var e;return function(t){return e||(e=new Ze(t)),e}}();const qe=Ge;var Ye=n(84),$e=n(999),Ke=n(316);ar Xe=);const Je=Xe;var et={atr:{},platform:{Desktop:{atr:{}},Mobile:{atr:{secondsBW:20}}}},tt={demo:{strength:101,atr:{},1:{atr:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1,mntmbtwfs:999,mintimwf:999e3,mxtmbtwfs:999,time_between_waterfall:999,frrst1aftrrst93:!1,rmvrvlwntwrk:!1}},onOutOfView:"pause",isPWOV:!1,noaop:1}},2:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause"}},3:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1184655,"midroll.pubId":133128,"midroll.pubTagId":1184655,"postroll.pubId":133128,"postroll.pubTagId":1184655,pubId:133128,pubTagId:1184655,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},isPWOV:!1}},4:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1046821,"midroll.pubId":133128,"midroll.pubTagId":1046821,"postroll.pubId":133128,"postroll.pubTagId":1046821,pubId:133128,pubTagId:1046821,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause"}},5:{atr:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":1633025,"midroll.pubId":133128,"midroll.pubTagId":1633025,"postroll.pubId":133128,"postroll.pubTagId":1633025,pubId:133128,pubTagId:1633025,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause",isPWOV:!1}}},level:{strength:1,atr:{},101:{atr:{pubId:165757,pubTagId:946347,preroll:{pubId:165757,pubTagId:946347},midroll:{pubId:165757,pubTagId:946347},postroll:{pubId:165757,pubTagId:946347}}},2:{atr:{secondsToClose:120,secondsBW:20}},3:{atr:{secondsToClose:120,pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},units:{FEED_MANAGER:et,INLINE_INSTREAM_OLD:et,INLINE_INSTREAM_VFORCE:et,SLIDER_INSTREAM:et,SLIDER_OUTSTREAM:et,WIDGET_ITEM:et}},4:{atr:{pubId:292045,pubTagId:1565025,preroll:{pubId:292045,pubTagId:1565025},midroll:{pubId:292045,pubTagId:1565025},postroll:{pubId:292045,pubTagId:1565025}}},5:{atr:{pubId:383725,pubTagId:2077655,preroll:{pubId:383725,pubTagId:2077655},midroll:{pubId:383725,pubTagId:2077655},postroll:{pubId:383725,pubTagId:2077655}}}},isFireAllPixels:{strength:101,atr:{},1:{atr:{pixels:{startWithABT:{isFire:!0},getAdAny:{isFire:!0},getAdNoRV:{isFire:!0},getAd:{isFire:!0},secondsToCloseTimer:{isFire:!0},secondsToCloseGlobalTimer:{isFire:!0},midrollCollapseTimer:{isFire:!0}}}},2:{atr:{pixels:{getAdAny:{isFire:!0},getAdNoRV:{isFire:!0},getAd:{isFire:!0}}}}},predictorsPresets:{strength:101,1:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q1"}}},playerReady:{isActive:!0,predictPoint:0},distancePixels:{isActive:!0,predictPoints:{1:{pixelsFromSelectors:10}}}}}},2:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q0"}}},playerReady:{isActive:!1},distancePixels:{isActive:!0,predictPoints:{1:{pixelsFromSelectors:10}}},firstScroll:{isActive:!0,predictPoints:[0,0]}}}},3:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q0"}}},playerReady:{isActive:!0,predictPoint:0},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},4:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q1"}}},playerReady:{isActive:!0,predictPoint:0},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},5:{atr:{predictors:{multiAd:{isActive:!1},playerReady:{isActive:!0,predictPoint:0},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},99:{atr:{predictors:{autoKill:{isActive:!1},getAdFail:{isActive:!1},multiAd:{isActive:!1},playerReady:{isActive:!1},distancePercent:{isActive:!1},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},101:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q1"}}},playerReady:{isActive:!0,predictPoint:0},distancePixels:{isActive:!0,predictPoints:{1:{pixelsFromSelectors:10}}}}}}},isDebug:{strength:102,1:{atr:{player:{settings:{encwfrs:!1}}}}}},it=n(999);ar nt=null,rt=const ot=new const at=var lt=n(999),dt={init:;ar ct=n(316),ut=n(999);const pt=var mt=n(999);cmTag.multiUnitManager=cmTag.multiUnitManager||new const gt=cmTag.multiUnitManager;var ft=n(120);ar yt=n(999),_t=n(316),bt=n(84);onst At=var Tt=n(84),Pt=".tbl-read-more-box";onst Et=wt;var Ct=n(999),It=n(316),Ot=n(84);onst Nt=Rt;var Dt=n(777);var xt=n(84),Vt={title:"._cm-ad-title",placeholder:"._cm-instream-video"};class Mt extends Dt.Z{nder(e){this.el.id="_cm-css-reset",this.container=e.parentElement,xt(this.container).append(this.el),this.model.set("containerViewEl",this.el),this.placeholder=this.ui.placeholder[0],this.model.set("videoPlaceholderPosition",{top:0,left:0}),this.model.set("containerViewPlaceHolder",this.placeholder),this.model.set("containerViewState",W.Z.containerViewState.rendered)}close(){this.model.set("closeState",W.Z.closeState.containerViewClosed)}get className(){return"_cm-instream-vidreel-unit-container"}get ui(){return this.UI?this.UI:this.UI=Vt}set ui(e){return this.UI=e}}const Lt=Mt;var Ft=n(72);const Bt=n(316).View.extend({className:"_cm-disc-text",id:"_cm-css-reset",initialize:render:_bindEvents:_onVideoViewStateChange:hide:function(){this.$el.hide()},show:);var kt=n(999);ar zt=function(){var e;return function(t){return e||(e=new Ut(t)),e}}();const Ht=zt;var jt="data-cm-v-ad-id";ar Zt=n(999);onst qt=Gt; Qt=n(999),Xt=Qt.now().toString(),Jt=function(){this.activeAd&&(this.activeAd.unmute(),this.currModel.set("volumeMuted",!1))},ei=ti={video:"._cm-video-ad"};onst si=ii;var ni=n(84),ri=n(999);const oi=class extends si{constructor(e){super(e),this.$el.addClass("_cm-instream-vidreel-unit-container"),this.template='<div class="_cm-video-ad"></div> ',this.container=e.container||"body",this.recReelIntegration=e.recReelIntegration,this.eligibilityService=e.eligibilityService,this.render(),this.firstAd=!0,this.model.set("adxDurationDebtPay",!1),this.adxThreshold=this.model.get("adxThreshold")||5*b.z.TIME_UNITS.SECOND,this.minutelyVideoContainer=this._getVideoContainer(),this._registerRecReelButtons(),TRC.listen("tbl-video-reel-slider-resize",()}_registerRecReelButtons(){if(this.recReelIntegration){var e=this.container;this.recReelPauseButton=e.querySelector(".tbl-pause"),this.recReelPlayButton=e.querySelector(".tbl-play")}}_getVideoContainer(){if(this.recReelIntegration)return this.model.get("recoReelContainer");var e=this.model.get("minutelyVideoPlacementSelector");return document.querySelector(e)}_bindEvents(){this.createStateHandlers([{event:"isEligibleToPlay",funcName:"handleAdEligibility"},{event:"adState:completed",funcName:"_onAdComplete"},{event:"isInTab",funcName:"_onTabStateChange"},{event:"containerViewState:rendered",funcName:"render",isListenOnce:!0},{event:"skipButtonClicked",funcName:"_skipButtonClicked"},{event:"hasReadyAd:true",funcName:"_onHasReadyAdFirstTime",isListenOnce:!0}]),this._setVolumeEvents(),this._setNasOppEvents()}_onResize(e){var t=ni(e).width(),i=ni(e).height(),s=ri.getVideoBestSize(t,i);this.model.set("videoPlaceholderSize",s),this.model.trigger("change:videoViewSize",this.model.get("videoPlaceholderSize"))}_handleResizeOfContainer(e){this._onResize(this.minutelyVideoContainer),this.$el.css({width:"".concat(e.width,"px"),height:"".concat(e.height,"px")})}_onHasReadyAdFirstTimeandleAdEligibility(){var e=this.model.get("isEligibleToPlay");this.activeAd||this.getReadyAd(),e&&this.activeAd&&!this._isAdPlaying()&&(this._isADXad()&&this.model.set("playedADX",!0),this.playAd()),!e&&this._isAdPlaying()&&this._pauseAd(b.z.PAUSE_REASONS.LOST_ELIGIBILITY)}render(){this.renderTemplate(),this._customize(),this.ui.video[0].id=this.videoAdId,this.hide(),ni(this.container).append(this.el),this.model.set("videoViewContainer",this.ui.video[0]),this.model.set("targetId",this.videoAdId),this.model.set("videoViewState",W.Z.videoViewState.rendered)}_pauseReel(){var e=this.recReelPauseButton;e?e.click():window._tvp&&window._tvp.pauseForAdPlay&&window._tvp.pauseForAdPlay(),this.model.set("minutelyPauseForAdPlay",!0)}_resumeReel(){var e=this.recReelPlayButton;e?e.click():window._tvp&&window._tvp.resumeOnAdClose&&window._tvp.resumeOnAdClose(),this.model.set("minutelyResumeOnAdClose",!0)}_handleVideoReel(e){e!==b.z.VIDEO_REEL.PLAY?this._resumeReel():this._pauseReel()}_onAdComplete(){this._handleVideoReel(b.z.VIDEO_REEL.CLOSE),this.activeAd=void 0,this.hide(),setTimeout(this.eligibilityService.testEligibility.bind(this),0)}_isADXad(){var e;return(null===(e=this.activeAd)||void 0===e?void 0:e.itemType)===b.z.ITEM_TYPE.IMA}waitAfterADXPlayed(){this.model.set("adxDurationDebtPay",!0),setTimeout((()=>{this.model.set("adxDurationDebtPay",!1),this.model.set("playedADX",!1),this.eligibilityService.testEligibility()}),this.adxThreshold)}playAd(){this.log.info("Play Ad :"+this.activeAd.adId),this._handleVideoReel(b.z.VIDEO_REEL.PLAY),this._onResize(this.minutelyVideoContainer),this.show(),super.playAd(),this._setControlsEvents(),this._handleVolume()}_setControlsEventshandleAdStop(e){this.model.set("checkAdsQueue",b.z.ADS_QUEUE_STATUS.RV1_HUNT),this.model.get("playedADX")&&!this.model.get("isRV1InQueue")?this._waitAfterADXPlayed():this.eligibilityService.testEligibility()}_skipButtonClicked(){this.activeAd&&(this.activeAd.skipAd(),this.activeAd=void 0,this.model.set("isReplayAd",!1),this.model.set("isAdActive",!1)),this.hide()}_pauseAdonTabStateChange(){this.activeAd&&(this.model.get("isInTab")?this.playAd():this._pauseAd(b.z.PAUSE_REASONS.LOST_ELIGIBILITY))}how(){var e=this.minutelyVideoContainer.getBoundingClientRect();this.$el.css({width:"".concat(e.width,"px"),height:"".concat(e.height,"px")}),this.$el.removeClass("_hide")}};const ai={"AR-EG":"إعلان","AR-AE":"إعلان","AR-SA":"إعلان","CS-CZ":"Reklama","DA-DK":"Annonce","DE-DE":"Anzeige","DE-AT":"Anzeige","DE-CH":"Anzeige","EL-GR":"Ad","EN-AE":"Ad","EN-AU":"Ad","EN-CA":"Ad","EN-GB":"Ad","EN-IE":"Ad","EN-IN":"Ad","EN-SG":"Ad","EN-PH":"Ad","EN-MY":"Ad","EN-NZ":"Ad","EN-US":"Ad","EN-ZA":"Ad","EN-XL":"Ad","ES-ES":"Publicidad","ES-AR":"Patrocinado","ES-CO":"Patrocinado","ES-CL":"Patrocinado","ES-PE":"Patrocinado","ES-MX":"Patrocinado","ES-US":"Patrocinado","ES-XL":"Patrocinado","ES-VE":"Patrocinado","EN-ID":"Ad","FI-FI":"Mainos","FR-FR":"Sponsorisé","FR-BE":"Sponsorisé","FR-CA":"Pub","FR-CH":"Sponsorisé","HE-IL":"מודעה","HI-IN":"एड","HU-HU":"Hird.","ID-ID":"Ad","IT-IT":"Ann.","JA-JP":"PR","KO-KR":"AD","NB-NO":"Annonse","NL-NL":"Adv","NL-BE":"Adv","PL-PL":"Reklama","PT-BR":"Publicidade","PT-PT":"Pub","RU-RU":"Реклама","SV-SE":"Annons","TH-TH":"Ad","TR-TR":"R","VI-VN":"Ad","ZH-CN":"广告 ","ZH-TW":"廣告","ZH-HK":"廣告"};var li=n(316),di=n(999),hi=n(84);const ci=li.View.extend({events:{click:"_openener&&this._setComponentsVisibilityListeignTitle(),sExpandEnded",ndow.setTimeout((function(lt:t={text:"",stylontent-sponsore._cm-ad-cho("componentsntainer).css("text-align",OICE_TYPE.TITLE&&thisW.Z.video;case b.zhis._show()}tTRC.aboutUar i=),thi),this._validateComponentVisibilitodel.set(this.componentsViD_CHOICE_TYPE.TITLE?this._hideViewState():this.er).removeClasai[this.model.get("language").toUpperCase()])},_setComponentsVisibilityListener(){this.listenTo(this.model,"change:".concat(this.componentsVisibilityListener),this._onComponentsVisibilityChange.bind(this)),this.model.get(this.componentsVisibilityListener)||this._hide()},_onComponentsVisibilityChange(){this.model.get(this.componentsVisibilityListener)?this._show():this._hide()}});var ui=n(316),pi=n(999),mi=n(84);const gi=ui.View.extend({className:"_cm-close-area",id:"_cm-close-area",events:{"click ":"_onClick"},initialize:function(e){this.log=new S.Z({unitType:e.unitType,className:"closeButtonView",version:e.model.get("version"),isDebug:e.model.get("isDebug")}),this.container=e.container,this._rendered=!1,this._bindEvents(),this.createStateHandlers=Ft.L,this.componentsVisibilityListener=e.componentsVisibilityListener,this.componentsVisibilityListener&&t.get("videoViewState")?this.shose-area"),thge:videoVienderTimeoger("ad:stoppedYING&&t!==W.Z.adState.pld":this.show();break;case"attached":this.hide()}},_setComponentsVisibilityListener(){this.listenTo(this.model,"change:".concat(this.componentsVisibilityListener),this._onComponentsVisibilityChange.bind(this)),this.model.get(this.componentsVisibilityListener)||this.hide()},_onComponentsVisibilityChange(){this.model.get(this.componentsVisibilityListener)?this.show():this.hide()},hide:function(){this.$el.hide()},show:function(){this.$el.show()}});const fi={JP:!0};var vi=n(316),yi=n(84),_i=n(999);const bi=vi.View.extend({claStatesAis.repeatEl),tis.repeatWrapper.nge:adClickThroughU")&&fi[this.mttonSrc(e,t,i,ss("b.modemodel.set("rs.model,"atState.clicked),this.trigger("cm:repeat:click")},_createStatesAction:function(){this.adStateActions={q0:this._onAdPlaying.bind(this),completed:this._onVideoComplete.bind(this),repeating:this._onAdPlaying.bind(this)}},_onAdStateChange:function(e,t){g:function(){setTtion(){this.model.model.increaseCouneClick.bind(this)),this.learnMoreWrapper.show())},addAdditionalCss(e){yi(this.repeatEl).addClass(e)}});var Si=n(316),Ai=n(999);const Ti=Si.Vieistenerip-ad-area"}this.container.appendC,this.model.increaseCounter("ski(this.componentsVisibilityListener)||this.hide()},_onComponentsVisibilityChange(){this.model.get(this.componentsVisibilityListener)?this.show():this.hide()},hide:function(){this.$el.hide()},show:function(){this.$el.show()}});var Pi=n(316),wi=n(999),Ei=n(84),Ci={display:"inline !important"},Ii={display:"none !important"},Oi={transition:"width 2000ms !important",width:"32px !important"},Ri={width:"32px !important"};const Ni=Pi.View.extend({className:"_cm-volume-area",id:"_cm-cser(),this.l"showVolumeButtonOnBackFromSwap"(this.this._checkIfdText}}</div> </.append(this.el)}),20isibilityListenel.get("volumeMuted")&&this.his._minimizeOnClick=wi.once(this._minimize.bind(this,Oi))},_onzeOnClick(),this.currModel.set("volumeUserInteraction",!0)},_mute(){tute(){this._hideMute(),this._showUnmute(),this._isMuted=!1},_fireMute(){this.currModel.set("volumeMuted",!0),this.currModel.set("onUnMuteClicked",!1)},_fireUnmute(){this.currModel.set("volumeMuted",!s.currModel.get("vols._minimiinimized=!0,this.currModel.set("volumeMustBeMinimized",!0)},_hideMute(){Ei("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-mute").css(Ii)},_showMute(){Ei("#_cm-css-reset._cm-volume-area > ._cm-volume-border > ._cm-volume-mute").css(Ci)},_hideUnmute(){Ei("#_cm-css-reset._cm-volume-area > ._e-area > ._crea-top"),this.("detachToSlideS.SLIDER_INSTREAM,thirea-bottom"),this.$order > ._cm-volu&this.currModel..FLOATING_VIEW_TOP_COMPONENT.video?this.show():this.hide()},hide(){tleted:this.hide.bteChange:function(e,t){var i=this.adStateActions[t];i&&i()},_onComponentsVisibilityChange(){this.currModel.get(this.componentsVisibilityListener)?this.show():this.hide()}});var Di=n(84),xi=n(999),Vi="_cm-native-ad",Mi={title:"._cm-native-ad-title",ctaButtone:"._cm-native-ad-cta-button",description:"._cm-native-ad-description",icon:"._cm-native-ad-icon",branding:"._cm-native-ad-branding",adChoice:"._cm-ad-choice",placeholder:"._cm-feed-urn this.UI?this.UI:this.UI=Mi}set ui(e){retticalOrn function(t){return e||(e=erOptions:this.detachToSlider,isVerticalSlideOut:t,cb:i})}}const Gi=Zi;var qi=n(84),Yi=n(999);const $i=class extends Gi{constructor(e){super(e),this.model=e.model,this.globalModel=e.globalModel,this.log=new S.Z({unitType:this.model.get("unitType"),className:this.constructor.name,version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this.init(),this.prevAdCompleted=!1}init(){this.componentsConfig=this._getComponentConfiguration(),this._initComponents(),this._bindEvents(),this.model._updateCrossUnitCommunication({unit:this.model.get("unitType"),state:W.Z.externalUnit.playing})}_getComponentConfiguration(){return{CloseButtonView:{module:gi,options:this.baseOptions,isActive:this.model.get("closeButton.hasCloseButton"),isVisibleOnLoad:!0,afterLoad:()=>{this.components.CloseButtonView.render()}},SkipAdButtonView:{module:Ti,options:this.baseOptions,isActive:this.model.get("componen1,afterLoad:()=>{this.components.SkipAdButtonView.render()}},AdChoiceView:{module:ci,options:this._cloneAndExtend(this.baseOptions,{type:b.z.AD_CHOICE_TYPE.VIDEO_AD}),isActive:this.model.get("components.adChoice.isActive"),isVisibleOnLoad:!0},VolumeButtonView:{module:Ni,options:this.baseOptions,isActive:this.model.get("components.volume.isActive"),isVisibleOnLoad:!0},NativeAdView:{module:Fi,options:this._cloneAndExtend(this.baseOptions,{globalModel:this.model,model:this.model,container:"".concat(this.model.get("videoContainerSelector")," ._cm-background-filler")}),isActive:this.model.get("components.nativeAd.isActive"),isVisibleOnLoad:!0},RepeatView:{module:bi,options:this.baseOptions,isAct,{event:"repeatState:clicked",funcName:"_onhis.model.set("componentVisibility.SkipAdButtonView",!0)}_hideComponents(){this._hideActiveComponents(),qi("".concat(this.model.get("videoContainerSelector")," ._cm-background-filler")).hide(),this.model._updateCrossUnitCommunication({unit:derByTimer&&clearTimeoCurrCount")>=this.model.get("playPriority.loaILITY),this.model.fireCas.model.get("predictors.".concat(e,".excAdPrpixels.onMaxNonRvVimpsInQe){this.listeners=this.listeners.filter((t=>t.index!==e))}}var fs=function(){var e;return function(t){return e||(e=ne}),this.model.set("closeState",W.Z.closeStas),this.model.set("closvaMediaPlayerLoaded(){this.model.ubVideoInVi.get("isUseHasFocus")?d!!this.shouldConsiderBlurAsTabOut&&e===b.z.TAB_STATE.blur}}const Fs=Ls;var Bs=n(316),ks=n(999);class Us extends Bi.Z{constructor(e,t){super(),this.model=e,this.parentDOMElement=document.querySelector(t),this.model.set("isInTab",xs(this.model)),this.viewPercent=this.model.get("viewPercent")||50,this.isObservable=this.model.get("isUseObserver"),this.log=new S.Z({unitType:"Service",className:this.constructor.name,version:this.model.get("version"),isDebug:this.model.get("isDebug")}),this._bindEvent(),this._initEligibilityListener()}_bindEvent(){this.model.listenTo(Bs,"window:tab:change",this._onTabEvent.bind(this)),this.createStateHandlers([{event:"getAdState:gotAd",funcName:"testEligibility"},{event:"componentVisibility",funcName:"_calculateEligibility"}])}_initEligibilityListener(){this.isObservable?(this._initObserver(),this.observer.observe(this.parentDOMElement)):(this._calculateEligibility(),Bs.on("window:scroll:change",this._calculateEligibility.bind(this)),this.model.listenTo(this.model,"chathis._calculateEligibility(),this.model.set("isInTab",!0))}_calculateEligibility(){this.isObservable||(this.inViewDiv=this._getInViewDiv(this.parentDOMElement)),this.model.get("hadEligibility")||this.testEligibility()}_getInViewDiv(e){var t=e.getBoundingClientRect(),i=ks.getViewPercent(e,t.width,t.height,this.model.get("scrollSelector"));if(this.model.set("isViewable",this.viewPercent<=i),this.model.set("isViewable100",i>=this.model.get("100viewPercent")),this.viewPercent<=i)return this.parentDOMElement}_isFrameTypePlainPage(){return!this.model.get("isIgnoreTabInIframe")||this.model.get("frameType")===b.z.FRAME_TYPE.plainPage||this.model.get("isInTab")}testEligibility(){this.inViewDiv&&this.model.get("minutelyStartedPlaying")?(this.model.set("isEligibleToPlay",!0),this.model.set("isViewable",this._isFrameTypePlainPage()),this.model.get("hadEligibility")||this.model.set("hadEligibility",!0)):this.model.set("isEligibleToPlay",!1)}_initObserver(){var e={rootMargin:"0px",threshold:[0,this.model.get("viewPercent")/100,this.model.get("100viewPercent")/100]};this.observer=new IntersectionObserver(this._observerCallback.bind(this),e),this.log.info("IntersectionObserver was created")}_observerCallback(e){this.inViewDiv=void 0,e.forEach((e=>{var t=100*e.intersectionRatio;this.model.set("isViewable100",t>=this.model.get("100viewPercent")),this.model.set("isViewable",this.viewPercent<=t),t>=this.viewPercent&&(this.inViewDiv=e)}))etPosifunction(){var e;return function(){return e||(e=new Ws),e}}();const Gs=Zs;var qs=[{event:"beforeGetAd:checkPubVideo",funcName:"_isPubVideoReady"},{event:"checkAdsQueue:".concat(b.z.ADS_QUEUE_STATUS.RV1_HUNT),funcName:"_isRV1InQueue"}];const Ys=class extends Nt{constructor(e){super(e),this.model.set("isViewable",this.model.get("isInTab")),this.model.set("isViewable100",this.model.get("isInTab")),this.waitedForContainer=!1,this.model.get("isRecReelIntegration")&&(this.isRecReelIntegration=!0),this._init()}_init(){var e=this._setInstreamContainer();if(e)return this._setPubVideoDetector(e),void this._bindEvents();this._waitForContainer()}_getPlacementSelector(){if(this.model.get("isRRIntegration")){var e=this.model.get("placement");e=e.replace(" - Video","");var t="[data-placement-name='".concat(e,"' ]");return"".concat(t," .story-widget .trc_rbox_div")}if(window.TRC&&window.TRC.videoReelContainer)return"#"+window.TRC.videoReelContainer}_setContainerSelector(){var e=this.model.get("instreamContainerSelector")||this._getPlacementSelector();return this.containerSelector=e,e}_setInstreamContainer(){var e=this._setContainerSelector();if(e){var t=document.querySelector(e);return t?(this.container=t,t):void 0}}_waitForContainer(){if(this.waitedForContainer)TRC.listen("recoReel-available",this._init.bind(this)),this.log.info("Unit will not be displayed until RR available event.");else{this.waitedForContainer=!0,this.log.info("Waiting for container to be available.");var e=this.model.get("timeoutForContRetry")||1e3;setTimeout(this._init.bind(this),e)}}_setPubVideoDetector(e){this.model.set("instreamContainerElement",e),this.model.set("adxDetevents(){this._startInstream(),this.createStateHandlers(qs)}_isPubVideoReady(){var e,t,i=null===(e=this.pubVidDetector)||void 0===e?void 0:e.isPubVideoInView();this.model.set("isPubVideoReady",i&&(null===(t=this.pubVidDetector)||void 0===t?void 0:t._isPubVideoReady()))}_initSeerService(){this.seerService=new ls({model:this.model,onPredictCallback:this.adService.adPredict.bind(this.adService)})}initializeServices(){this.windowEventManager=Je(),this._getUnitDimensions(),this.eligibilityService=new zs(this.model,this.containerSelector),this.playerLoader=new Cs(this.model),this.playerQueueSeeker=new vs(this.model),this.adService=new rs(this.model,this.eligibilityService),this._initSeerService(),this.containerView=new Lt({model:this.model,container:this.container}),this.videoView=new oi({model:this.model,container:this.container,eligibilityService:this.eligibilityService,recReelIntegration:!!this.isRecReelIntegration}),this.playerService=new ws(this.model),this.pixelsService=new ps(this.model),this.tabStatusService=new Fs(this.model),this.componentManager=new $i({model:this.model,container:this.model.get("videoViewContainer")})}_getHeightFromAspectRatioByWidth(e){var t=this.model.get("minutelyContainerAspectRatioWidth"),i=this.model.get("minutelyContainerAspectRatioHeight");return Math.round(e*i/t)}_isRV1InQueue(){this.model.set("checkAdsQueue",b.z.ADS_QUEUE_STATUS.CHECKED);var e=this.model.get("playerQueue").some((e=>e.rv&&e.itemType==b.z.ITEM_TYPE.IMA));this.model.set("isRV1InQueue",e)}_getUnitDimensions(){this.positionAndSizeUtil=new Gs;var e=this.container,t=this.model.get("minutelyContainerMaxWidth"),i=this.model.get("minutelyContainerMaxHeight");this.dimensions=this.positionAndSizeUtil.getSize(e),this.dimensions.width>=t?(this.dimensions.width=t,this.dimensions.height=i):this.dimensions.height=this._getHeightFromAspectRatioByWidth(this.dimensions.width),this.model.set("width",this.dimensions.width),this.model.set("height",this.dimensions.height)}_startInstream(){this.model.set("minutelyStartedPlaying",!0),this.model.set("parentSelector",this.containerSelector),this.isRecReelIntegration&&this.model.set("recoReelContainer",this.container),this.initializeServices()}};var $s=n(316),Ks=n(999);const Qs=$s.DeepModel.extend({STATE:{READY:0,GOT_AD:1,PLAYING:2,PAUSED:3,PAUSED_BY_USER:4,STOPPED_BY_USER:5,DETACHED:6,ATTACHED:7,DONE:8,PLAYER_READY:9,PLAYER_CLOSE:10,PLAYER_STOP:11,AD_STOPPED:12,OPT_OUT:13,OPEN_WITH_PAUSE:14,WAITING_FOR_EXPAND:15,REPEAT_STAND_BY:16,REPEAT_SPINNING:17,SKIP0),),t=t.replace(i[s],rn(r,o);this.set(","\n").concat(t);reWith)}),t.id,timestampixelParameter("ordeis.get(e)||!1===thi,getImpressio.get("totalTimthis.getPixel("pixels.tLoadedWithFill"),et(i);n&&s.push(n);var&&(o+="_vG"):o+="_v&&s[t]&&(ehis.set("vt){this.storage[e]=t},getStorage(e){return this.storage[e]},settSliderCutOffAd(e){thiderCutOffAd");return this.setNextSliderCutOffAd(void 0),e},peekNextSliderCutOffoid 0),setTStorage("nViewabilityEvents(){this.oget("placement"),)&&(t=t.sliendlyIframrThenSetByCon=KcreaseCounter(eCounter(e){var set("frameType",e),this.xOf("preset")?e.(t=!1)}else this.get(e[i].key)!==e[i].val&&(t=!1);return t},fireUnitDelayedPixel(){Ks.firePixel(this.getPixel("pixels.unitDelayed"),"unit delayed")},fireUnitLoadAfterDelayPixel(){Ks.firePixel(this.getPixel("Loadcomponeray(s)||(s=[]),i&&),this.log.info("Unitmation.detach",this.get("sdy").appendChild(e)}this._obseossUnitCommunicationObserver)t").setAttribute("das.get("unitType")&&this.set("crossUnitInfo",JSON.parse(i))},_stopCrossUnitCommunicationObserver(){this.crossUnitCommunietAdOnEligibilityLost"),"cans))})),this.set("predictors",{}),thisntsIfAny:e=>"strinomSlider")&&this.set("detacrcent.isStartWFdule("pre-roll"o/mp4"}),this),this.setaceholderSize.width"))<=thitors")),thrId")])&&(this.get("isors",{}),this.set("predictors",this.get("tempPredictors"))}}),en=Js.extend({initialize:function(){Js.prototype.initialize.call(this),this.get("isAdjacInFirstWF")?this.set("isMultiAd",!1):this.get("midrollRecoReel")&his.get("midrollRecoReelobile:i=!1}=e;St(e,t,{model:i?tn:en,unitController:Ys},!1)}})()})();