"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6998],{13507:function(e,t,a){a.d(t,{KM:function(){return SettingsRootUserControls},ZP:function(){return SettingsRootAccountControls},$X:function(){return generateDemoDataKey}});var n=a(52322),r=a(2784),o=a(32517),i=a(66227),s=a(56268),l=a(3016),c=a(73235),d=a(66547),u=a(26806);function _templateObject(){let e=(0,c._)(["\n    mutation CloseWorkspace($id: String!, $isClosed: Boolean!) {\n  closeWorkspace(id: $id, isClosed: $isClosed) {\n    id\n    isClosed\n  }\n}\n    "]);return _templateObject=function(){return e},e}let p=(0,d.ZP)(_templateObject());function updateUserFeatureFlag_templateObject(){let e=(0,c._)(["\n    mutation UpdateUserFeatureFlag($featureFlag: FeatureFlagUser!, $isOn: Boolean!) {\n  updateUserFeatureFlag(featureFlag: $featureFlag, isOn: $isOn) {\n    id\n    featureFlags {\n      id\n      name\n    }\n  }\n}\n    "]);return updateUserFeatureFlag_templateObject=function(){return e},e}let m=(0,d.ZP)(updateUserFeatureFlag_templateObject());var g=a(9602);function updateWorkspaceFeatureFlag_templateObject(){let e=(0,c._)(["\n    mutation UpdateWorkspaceFeatureFlag($workspaceId: String!, $featureFlag: FeatureFlag!, $isOn: Boolean!) {\n  updateWorkspaceFeatureFlag(\n    workspaceId: $workspaceId\n    featureFlag: $featureFlag\n    isOn: $isOn\n  ) {\n    id\n    featureFlags {\n      id\n      name\n    }\n  }\n}\n    "]);return updateWorkspaceFeatureFlag_templateObject=function(){return e},e}let h=(0,d.ZP)(updateWorkspaceFeatureFlag_templateObject());var f=a(47330),b=a(45152),x=a(60696);let teamLimitFromPlanType=var v=a(77512),y=a(95965),j=a(56958),T=a(78066);et k=(0,d.ZP)(workspaceDataDeletionRequest_templateObject());function createWorkspaceDataDeletionRequest_templateObject(){let e=(0,c._)(["\n    mutation CreateWorkspaceDataDeletionRequest($workspaceId: String!) {\n  createWorkspaceDataDeletionRequest(workspaceId: $workspaceId) {\n    ...WorkspaceDataDeletionRequest\n  }\n}\n    ",""]);return createWorkspaceDataDeletionRequest_templateObject=function(){return e},e}let D=(0,d.ZP)(createWorkspaceDataDeletionRequest_templateObject(),k);function listWorkspaceDataDeletionRequests_templateObject(){let e=(0,c._)(["\n    query ListWorkspaceDataDeletionRequests($workspaceId: String!) {\n  workspaceDataDeletionRequests(workspaceId: $workspaceId) {\n    ...WorkspaceDataDeletionRequest\n  }\n}\n    ",""]);return listWorkspaceDataDeletionRequests_templateObject=function(){return e},e}let w=(0,d.ZP)(listWorkspaceDataDeletionRequests_templateObject(),k);var N=a(46085);function DeleteWorkspaceDataModal(e){var t;let{open:a,handleClose:o,workspace:i}=e,[s,l]=(0,r.useState)(""),[{data:c}]=(t={variables:{workspaceId:i.id}},u.aM({query:w,...t})),[,d]=u.Db(D),p=null==c?void 0:c.workspaceDataDeletionRequests.find(e=>e.status===f.hP.InProgress||e.status===f.hP.Pending),m=null==c?void 0:c.workspaceDataDeletionRequests.find(,g=s===i.slug,handleCreateRequest=async()=>{await d({workspaceId:i.id})};return(0,n.jsx)(T.Z,{title:"Delete Workspace Data",open:a,handleClose:o,handleNext:handleCreateRequest,nextText:"Submit",nextDisabled:!g,hideFooter:void 0!==p,nextOnEnter:!0,children:p?(0,n.jsx)(PendingWorkspaceDataDeletionDetails,{request:p}):(0,n.jsx)(RequestWorkspaceDataDeletion,{inputtedSlug:s,setInputtedSlug:l,lastCompletedRequest:m})})}t F=[{name:"Trial",value:f.SO.Trial},{name:"Customer",value:f.SO.Customer},{name:"Navattic Internal",value:f.SO.Internal},{name:"None",value:f.SO.None}],R=[{name:"Base",value:f.Iv.Base},{name:"Startup",value:f.Iv.Startup},{name:"Growth",value:f.Iv.Growth},{name:"Enterprise",value:f.Iv.Enterprise},{name:"None",value:f.Iv.None}],S=Array.from(Array(51).keys()).map(e=>({name:"".concat(e),value:Number(e)})),C=[{name:"SSO",value:f.TT.Sso},{name:"Enhanced Permissions",value:f.TT.EnhancedPermissions},{name:"Audio player",value:f.TT.AudioPlayer},{name:"Launchpad",value:f.TT.Launchpad},{name:"Audit Logs",value:f.TT.AuditLogs},{name:"Account-Based Lead Enrichment",value:f.TT.Enrichment},{name:"Offline",value:f.TT.Offline},{name:"Click to capture",value:f.TT.ClickToCapture},{name:"Session export",value:f.TT.SessionsExport},{name:"Allow Dev Tool Edits",value:f.TT.DevToolEdits},{name:"Mass Editor",value:f.TT.MassEditor},{name:"Translate",value:f.TT.Translate},{name:"Omnisearch",value:f.TT.Omnisearch},{name:"Multilingual",value:f.TT.Multilingual,internal:!0},{name:"IP Geolocation tracking",value:f.TT.IpGeoTracking,internal:!0},{name:"Personalized Navigation Actions",value:f.TT.PersonalizationNavigation},{name:"Project Tracking Scripts",value:f.TT.TrackingScripts}],LocalStorageSwitch=RootControlSection=e=>{let{title:t,description:a,children:r}=e;return(0,n.jsxs)("div",{className:"max-w-md",children:[(0,n.jsx)("h2",{className:"mb-1 text-lg font-semibold leading-6 text-gray-900",children:t}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:a}),(0,n.jsx)("div",{className:"mt-8",children:r})]})},AdministrationSection=unction SettingsRootUserControls(){let{workspace:e}=(0,b.cF)(),{currentUser:t}=(0,b.xJ)(),[,a]=u.Db(m),handleUpdateUserFeatureFlag=async e=>{let{value:t,isOn:n}=e;j.A.promise(a({featureFlag:t,isOn:n}).then(e=>{var t;if(null===(t=e.data)||void 0===t?void 0:t.updateUserFeatureFlag)return e;throw Error("Failed to update user feature flag")}),{loading:"".concat(n?"Enabling":"Disabling"," ").concat(t," ..."),success:"".concat(n?"Enabled":"Disabled"," ").concat(t),error:e=>"".concat(e)})};return(0,n.jsx)(AdministrationSection,{title:"Navattic Internal User Administration",children:(0,n.jsx)(RootControlSection,{title:"Personal settings",description:"Custom settings that are local to your browser only",children:(0,n.jsxs)("div",{className:"grid gap-y-6",children:[(0,n.jsx)(v.rs,{checked:(0,b.sg)(t,f.lR.ImportExportProject),onChange:label:"Import / Export Product Demos"}),(0,n.jsx)(LocalStorageSwitch,{disabled:!1,persistKey:generateDemoDataKey(e.id),name:"Show demo data for Visitors / Analytics"})]})})})}function SettingsRootAccountControls(){let[,e]=(0,g.M)(),[,t]=u.Db(p),[,a]=u.Db(h),[o,c]=(0,r.useState)(void 0),[d,m]=(0,r.useState)(!1),{workspace:x}=(0,b.cF)(),handleUpdateFeatureFlag=async e=>{let{value:t,isOn:n}=e;j.A.promise(a({workspaceId:x.id,featureFlag:t,isOn:n}).then(,{loading:"".concat(n?"Enabling":"Disabling"," ").concat(t," ..."),success:"".concat(n?"Enabled":"Disabled"," ").concat(t),error:e=>"".concat(e)})},handleUpdateCloseWorkspace=async e=>{j.A.promise(t({id:x.id,isClosed:e}),{loading:"".concat(e?"Closing":"Opening"," workspace ..."),success:"".concat(e?"Closed":"Opened"," workspace"),error:e=>"".concat(e)})},handleUpdateAccountType=async t=>{let{value:a}=t;j.A.promise(e({id:x.id,accountType:a}),{loading:"Updating account type",success:"Updated account type",error:e=>"".concat(e)})},handleUpdatePlanType=async t=>{let{value:a}=t;j.A.promise(e({id:x.id,planType:a}),{loading:"Updating plan type",success:"Updated plan type",error:e=>"".concat(e)})},handleUpdateBranding=async t=>{j.A.promise(e({id:x.id,showNavatticBranding:t}),{loading:"".concat(t?"Enabling":"Disabling"," navattic branding ..."),success:"".concat(t?"Enabled":"Disabled"," navattic branding"),error:e=>"".concat(e)})},handleUpdateHideAccountsTab=async t=>{j.A.promise(e({id:x.id,hideAccountsTab:t}),{loading:"".concat(t?"Hiding":"Showing",' "Accounts" tab ...'),success:'"Accounts" tab is '.concat(t?"hidden":"visible"),error:e=>"".concat(e)})},handleUpdatePaymentMethodRequired=async t=>{j.A.promise(e({id:x.id,paymentMethodRequired:t}),{loading:"".concat(t?"Enabling":"Disabling"," payment method required ..."),success:"".concat(t?"Enabled":"Disabled"," payment method required"),error:e=>"".concat(e)})},handleUpdateTrialEndDate=async t=>{let a=t.target.value;if(c(a),void 0===a)return;let n=new Date;n.setDate(n.getDate()+parseInt(a)||0),j.A.promise(e({id:x.id,trialEndDate:n.toISOString()}),{loading:"Updating trial days left",success:"Updated trial days left",error:e=>"".concat(e)})},handleUpdateTeamLimit=async t=>{let{value:a}=t;j.A.promise(e({id:x.id,teamLimit:a}),{loading:"Updating team limit",success:"Updated team limit",error:)},y=x.trialEndDate&&Math.ceil((new Date(x.trialEndDate).getTime()-Date.now())/864e5);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(AdministrationSection,{title:"Navattic Workspace Administration",children:(0,n.jsxs)("div",{className:"grid gap-y-14",children:[(0,n.jsxs)(RootControlSection,{title:"Account",description:"Settings related to managing a Navattic customer account",children:[(0,n.jsx)(v.oi,{labelText:"Workspace ID",className:"mb-4 w-full",disabled:!0,value:x.id}),(0,n.jsx)(l.Z,{label:"Workspace account type",items:F,placeHolder:"Select an account type",field:"name",className:"mb-3 w-full flex-1",onChange:handleUpdateAccountType,selected:x.accountType}),x.accountType===f.SO.Trial&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{className:"label-small",children:"Days left in trial"}),(0,n.jsx)("input",{className:"input-base",type:"number",value:o||y||0,onChange:handleUpdateTrialEndDate})]}),(0,n.jsx)(l.Z,{label:"Workspace plan type",items:R,placeHolder:"Select a plan type",field:"name",className:"mb-3 w-full flex-1",onChange:handleUpdatePlanType,selected:x.planType,hasError:x.accountType===f.SO.Customer&&x.planType===f.Iv.None}),(0,n.jsx)(l.Z,{label:"Team count",items:[{name:"Default for plan (".concat(teamLimitFromPlanType(x.planType),")"),value:null},...S],placeHolder:"Select a plan type",field:"name",className:"mb-3 w-full flex-1",onChange:handleUpdateTeamLimit,selected:x.teamLimit}),(0,n.jsx)(v.rs,{className:"my-5",checked:x.showNavatticBranding||!1,onChange:()=>handleUpdateBranding(!(null==x?void 0:x.showNavatticBranding)),label:"Show Navattic branding"}),(0,n.jsx)(v.rs,{className:"my-5",checked:x.hideAccountsTab||!1,onChange:label:(0,n.jsx)("div",{className:"flex items-center text-sm",children:'Hide "Accounts" tab'})}),(0,n.jsx)(v.rs,{className:"my-5",checked:x.paymentMethodRequired||!1,onChange:label:(0,n.jsxs)("div",{className:"flex items-center text-sm",children:["Payment method required",(0,n.jsx)(s.Z,{className:"ml-2 text-sm",colorClassName:"text-gray-400 hover:text-gray-500",descriptionClassName:"w-56 p-2 font-normal",children:"A banner will prompt all members to add a payment method. Members will be unable to use the app."})]})}),(0,n.jsx)(i.Z,{children:(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[x.isClosed?(0,n.jsx)("button",{className:"btn-gray-border",onClick:()=>handleUpdateCloseWorkspace(!1),children:"Open workspace"}):(0,n.jsx)("button",{className:"btn-red",onClick:()=>handleUpdateCloseWorkspace(!0),children:"Close workspace"}),(0,n.jsx)("button",{className:"btn-red",disabled:!x.isClosed,onClick:()=>m(!0),children:"Delete all workspace data"})]})})]}),(0,n.jsx)(RootControlSection,{title:"Feature flags",description:"Limited access features to enable across a workspace",children:(0,n.jsx)("div",{className:"grid gap-y-6",children:x&&C.map(e=>{let{value:t,name:a,internal:r}=e,o=(0,b.NK)(x,t);return(0,n.jsx)(v.rs,{checked:o,onChange:()=>handleUpdateFeatureFlag({value:t,isOn:!o}),label:(0,n.jsxs)("div",{className:"flex items-center text-sm",children:[a,r&&" (for Navattic internal use only)"]})},t)})})})]})}),(0,n.jsx)(DeleteWorkspaceDataModal,{workspace:x,open:d,handleClose:)]})}},78066:},960},1991:function(e,t,a){a.d(t,{$T:function(){return apiProjectVersionIdRoute},C2:function(){return apiAuthSsoAuditPortalRoute},CW:function(){return apiGuideVisitorsRoute},T6:function(){return apiIntegrationSalesforceSobjectsRoute},ZA:function(){return apiIntegrationMarketoProgramsRoute},e9:function(){return previewFlowFlowIdRoute},g5:function(){return apiAuthSsoPortalRoute},g9:function(){return apiIntegrationMarketoFieldsRoute},h7:function(){return apiEnrichmentRoute},iu:function(){return apiGuideTimeMeasurementsRoute},nt:function(){return previewCaptureIdRoute},p3:function(){return previewProjectIdRoute},u4:function(){return apiEdgeExportVisitorsRoute},xH:function(){return apiEdgeExportAccountsRoute}});let previewProjectIdRoute=e=>{let{id:t}=e;return"/preview/project/".concat(t)},previewFlowFlowIdRoute=e=>{let{flow_id:t}=e;return"/preview/flow/".concat(t)},previewCaptureIdRoute=e=>{let{id:t}=e;return"/preview/capture/".concat(t)},apiProjectVersionIdRout},apiGuideVisitorsRoute=()=>"/api/guide/visitors",apiGuideTimeMeasurementsRoute=()=>"/api/guide/time-measurements",apiEnrichmentRoute=()=>"/api/enrichment",apiIntegrationSalesforceSobjectsRoute=()=>"/api/integration/salesforce/sobjects",apiIntegrationMarketoProgramsRoute=()=>"/api/integration/marketo/programs",apiIntegrationMarketoFieldsRoute=()=>"/api/integration/marketo/fields",apiEdgeExportVisitorsRoute=()=>"/api/edge/export/visitors",apiEdgeExportAccountsRoute=()=>"/api/edge/export/accounts",apiAuthSsoPortalRoute=()=>"/api/auth/sso/portal",apiAuthSsoAuditPortalRout"},4608}}]);
//# sourceMappingURL=6998-6196059ec5173ec6.js.map