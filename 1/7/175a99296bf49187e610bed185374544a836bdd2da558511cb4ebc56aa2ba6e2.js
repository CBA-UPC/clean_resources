(self.webpackChunktama_web=self.webpackChunktama_web||[]).push([[7981],{33811:(e,n,r)=>{"use strict";r.d(n,{uw:()=>R,x0:()=>_});var t=r(41185),a=r(66062),o=r(18274),i=r(55752),l=r.n(i),c=r(5663),s=r.n(c),g=r(74890),d=r.n(g),p=r(62720),y=r(64123),u=r(11622),f=r(18966),b=r(41779);r m=[p.Z.REBLOG,p.Z.HASH_TAG,p.Z.IMAGE,p.Z.VIDEO,p.Z.CLIPBLOG,p.Z.VOICE_BLOG,p.Z.PR,p.Z.AUTO_AD],I=v=(e,n,r)=>({type:f.V7,payload:{blogId:e,entryId:n,error:r},error:!0}),_=(0,o.H)((function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],t=arguments.length>3?arguments[3]:void 0;return function(){var o=(0,a.Z)((function*(a,o,i){var{fetchr:c}=i,g=d()(m.concat(r)),p=l()(o(),["bloggerState","blogMap",e,"blog_name"],"");if(!p||!n)return null;var b=l()(o(),["entryState","entryMetaMap",n],null),h=l()(b,"pagingType",void 0),_=t===h,R=l()(o(),["entryState","entryMap",n],null);if(b&&_&&R&&(!s()(R.entry_text)||404===R.status_code))return null;try{a({type:f.Gh,payload:{blogId:e,entryId:n,fieldFilter:g,frm:t}});var E={amebaId:p,blogId:e,entryId:n,fieldFilter:g,frm:t},G=yield c.read(y.Z.BlogEntry).params(E).end(),T=G.data;if(!(!1!==o().deviceState.isEmojiSupported)&&T.entities&&T.entities.entryMap)try{T=k(k({},T),{},{entities:k(k({},T.entities),{},{entryMap:yield(0,u.R9)(T.entities.entryMap)})})}catch(O){console.warn(O),T=G.data}return a(I(e,n,T,t))}catch(Z){return a(v(e,n,Z))}}));return function(e,n,r){return o.apply(this,arguments)}}()})),R=(0,o.H)(((e,n)=>function(){var r=(0,a.Z)((function*(r,t){var a=l()(t(),["bloggerState","blogMap",e,"blog_name"],"");if(!a||!n)return null;var o=l()(t(),["entryState","entryMap",n],null);if("amember"!==o.publish_flg||o&&(o.entry_text||404===o.statusCode))return null;try{r({type:f.tB,payload:{entryId:n}});var i={token:l()(t(),["amebloTokenState","amebloToken"],null),amebaId:a,entryId:parseInt(n,10)},c=yield(0,b.s)(i);return r(((n,c))}catch(s){return r(((e,n)=>({type:f.Ny,payload:{entryId:e,error:n},error:!0}))(n,s))}}));return function(e,n){return r.apply(this,arguments)}}()))},53178:(e,n,r)=>{"use strict";r.d(n,{$j:()=>c});var t=r(66062),a=r(18274),o=r(55752),i=r.n(o);var l=r(1154);var c=(0,a.H)({ttl:18e5},((e,n,r)=>function(){var a=(0,t.Z)((function*(t,a){if(i()(a(),["entryState","entryHashtagRankingMap",r]))return null;try{var o=yield function(e,n,r){var t="".concat(window.process.env.API_HASHTAG_PUB,"/v2/article/tag/ranking/").concat(e,"/entry/").concat(n,"/").concat(r);return fetch(t,{timeout:1e3})}(e,n,r),c=yield o.json();return t(function(e,n){return{type:l.$,payload:{entryId:e,data:n}}}(r,c.rankingEntryList))}catch(s){return t(function(e,n){return{type:l.E,payload:{entryId:e,error:n},error:!0}}(s))}}));return ()))},89269:(e,n,r)=>{"use strict";r.d(n,{CC:()=>g,sI:()=>s});var t=r(66062),a=r(18274),o=r(55752),i=r.n(o),l=r(15026),c=r(42174);var s=(0,a.H)({ttl:18e5},((e,n)=>function(){var r=(0,t.Z)((function*(r,t,a){var{fetchr:o}=a;if(i()(t(),["participatingGenreState","blogEntryGenre","".concat(e,"-").concat(n)]))return null;try{var s=yield o.read("participatingGenre").params({amebaId:e,entryId:n}).end();return r(e,n,s.data))}catch(g){return r(function(e,n,r){return{type:c.E,payload:{amebaId:e,entryId:n,error:(0,l.s)(r)},error:!0}}(e,n,g))}}));return function(e,n,t){return r.apply(this,arguments)}}()));var g=(0,a.H)({ttl:18e5},(e=>function(){var n=(0,t.Z)((function*(n,r,t){var{fetchr:a}=t;if(i()(r(),["participatingGenreState","blogGenre","".concat(e)]))return null;try{var o=yield a.read("participatingGenre").params({amebaId:e}).end();return n(e,o.data))}catch(s){return n(function(e,n){return{type:c.JW,payload:{amebaId:e,error:(0,l.s)(n)},error:!0}}(e,s))}}));return ()))},47981:(e,n,r)=>{"use strict";r.r(n),r.d(n,{default:);var t,a,o,i,l,c=r(3e4),s=r(66062),g=(r(91938),r(76955)),d=r(55752),p=r.n(d),y=r(29466),u=r.n(y),f=r(97175),b=r(66948),h=r(73614),k=r(33811),m=r(89269),I=r(53178);function v(){return(v=(0,s.Z)((function*(e){var{dispatch:n,getState:r,match:t,location:a}=e,{params:o}=t,i=o.amebaId,l=o.entryId,c=yield n((0,h.Rs)(i));if(!c||!c.error){var s=r().bloggerState,g=s.bloggerMap,d=s.blogMap[(g[i]||{}).blog];if(d&&d.blog_id){var{frm:p}=a.query;n((0,k.x0)(d.blog_id,l,[],p))}}}))).apply(this,arguments)}function _(){return(_=(0,s.Z)((function*(e){var{dispatch:n,getState:r,match:t}=e,{params:a}=t,o=a.amebaId,i=r().bloggerState,l=i.bloggerMap,c=i.blogMap,s=l[o]||{},g=c[s.blog],d=(s.attribute||{}).isOfficial;if(g&&g.blog_id&&!d){var y=r().entryState.entryMap,u=a.entryId;if("mon_ng"!==(y[u]||{}).closed_flg)yield n((0,m.sI)(o,u)),0===(p()(r(),["participatingGenreState","blogEntryGenre","".concat(o,"-").concat(u),"latest_ranking"],{}).daily_entry_rank||0)&&(yield n((0,I.$j)("general",o,u)))}}))).apply(this,arguments)}var R=(0,b.$j)((function(e,n){var{match:r}=n,{params:t}=r,a=t.amebaId,o=t.entryId,i=e.entryState,l=e.bloggerState,c=e.participatingGenreState,s=l.bloggerMap[a]||{},g=(s.attribute||{}).isOfficial,d=s.blog_genre||{},y=d.genre_code||"",u=p()(c,["blogEntryGenre","".concat(a,"-").concat(o),"latest_ranking"],{}),f={genreTitle:d.genre_title||"",genreEntryRank:u.daily_entry_rank||0},b=((i.entryHashtagRankingMap||{})[o]||[])[0]||{},h=(b.tagData||[]).some((),k={rankInTagName:b.hashtag||"",rankInTagRank:b.ranking||0,matchedHashtagGenreCode:h};return{genreCode:y,genreRanking:f,hashTagRanking:k,isOfficial:g}}))(t=(0,f.provideHooks)({defer:function(e){return v.apply(this,arguments)},done:)((o=a=class extends g.Component{static get defaultProps(){return{genreCode:"",genreRanking:{genreTitle:"",genreEntryRank:0},hashTagRanking:{rankInTagName:"",rankInTagRank:0,matchedHashtagGenreCode:!1}}}shouldComponentUpdate(e){return this.props.genreCode!==e.genreCode||this.props.isOfficial!==e.isOfficial||!u()(this.props.genreRanking,e.genreRanking)||!u()(this.props.hashTagRanking,e.hashTagRanking)}render(){var{genreCode:e,genreRanking:n,hashTagRanking:r,isOfficial:t}=this.props;if(t)return null;if(e&&n.genreTitle&&0!==n.genreEntryRank)return(0,c.Z)("a",{className:"blogGenreEntryRankInfo",href:"".concat(window.process.env.HTTP_PATH_GENRE,"/genres/").concat(e,"/entries/ranking")},void 0,(0,c.Z)("dl",{className:"blogGenreEntryRankInfo__block clearFix"},void 0,i||(i=(0,c.Z)("dt",{className:"blogGenreEntryRankInfo__title"},void 0,(0,c.Z)("span",{className:"blogGenreEntryRankInfo__icon s s-genre"}),"\u516c\u5f0f\u30b8\u30e3\u30f3\u30eb\u8a18\u4e8b\u30e9\u30f3\u30ad\u30f3\u30b0\uff1a")),(0,c.Z)("dd",{className:"blogGenreEntryRankInfo__result"},void 0,n.genreTitle,(0,c.Z)("span",{className:"blogGenreEntryRankInfo__rank"},void 0,n.genreEntryRank),"\u4f4d")));if(r.rankInTagName&&0!==r.rankInTagRank){var a="";return r.matchedHashtagGenreCode&&(a="?genre=".concat(e)),(0,c.Z)("a",{className:"blogGenreEntryRankInfo",href:"".concat(window.process.env.HTTP_PATH_GENRE,"/hashtags/").concat(r.rankInTagName).concat(a)},void 0,(0,c.Z)("dl",{className:"blogGenreEntryRankInfo__block clearFix"},void 0,l||(l=(0,c.Z)("dt",{className:"blogGenreEntryRankInfo__title"},void 0,(0,c.Z)("span",{className:"blogGenreEntryRankInfo__icon s s-hashtag"}),"\u516c\u5f0f\u30cf\u30c3\u30b7\u30e5\u30bf\u30b0\u30e9\u30f3\u30ad\u30f3\u30b0\uff1a")),(0,c.Z)("dd",{className:"blogGenreEntryRankInfo__result blogGenreEntryRankInfo__result--hashtag"},void 0,r.rankInTagName,(0,c.Z)("span",{className:"blogGenreEntryRankInfo__rank"},void 0,r.rankInTagRank),"\u4f4d")))}return null}},a.displayName="PcEntryDetailGenreRanking",t=o))||t)||t},74890:]);