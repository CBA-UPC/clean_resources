"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3515],{3515:function(t,e,i){i.r(e),i.d(e,{default:function(){return o}});var r=i(5121),a=i(83),s=i(4487),l={name:"VideoSlide",components:{Link:i(6454).rU},mixins:[a.Z],props:{creator:{type:Object,required:!0},content:{type:Object,required:!0},mainCtaText:{type:String,required:!1,default:null},profileCtaText:{type:String,required:!1,default:null},active:{type:Boolean,required:!0},muted:{type:Boolean,required:!0}},data(){return{brokenLink:!1,isPlaying:!1,timeout:null}},computed:{brokenImage(){return this.processImage({url:"/img/thumbnail/broken-video-link.png",width:480,height:270,format:"auto"})},src(){return this.processImage({url:this.content.filename,width:{mobile:1024,desktop:1920}})},profileUrl(){return route("users.show",{nickname:this.creator.nickname})},playerOptions(){return{playsinline:!0,suppressNotSupportedError:!0,errorDisplay:!1,preload:"metadata",poster:this.content.thumbnail,html5:{nativeTextTracks:!0},controls:!1,loop:!0,autoplay:!0,muted:this.muted,sources:[{src:this.content.filename??this.content.clip,type:"video/mp4"}],controlBar:{fullscreenToggle:!1,pictureInPictureToggle:!1,remainingTimeDisplay:!1,currentTimeDisplay:!0,timeDivider:!0,durationDisplay:!0}}}},watch:{active:{handler(t){t?this.timeout=setTimeout((()=>{r.Z.post(this.route("videos.view",{id:this.content.id}))}),5e3):clearTimeout(this.timeout),t?this.$nextTick((()=>{this.initialize()})):setTimeout((()=>{this.player?.pause()}),1)},immediate:!0},muted:{handler(t){this.player?.muted(t)}}},beforeDestroy(){clearTimeout(this.timeout)},methods:{initialize(){this.initializePlayer(this.playerOptions,this.events).then((()=>{this.play(),this.player&&this.player.children()[0].classList.add("object-fill")}))},events(){this.player.on("play",(()=>{this.isPlaying=!0})),this.player.on("pause",(()=>{this.isPlaying=!1})),this.player.on("stop",(()=>{this.isPlaying=!1}))},play(){this.player&&this.player.play().catch((t=>{s.Tb(t)}))},setBrokenLink(){this.$shared.isCrawler||(this.player.pause(),this.player.poster(this.brokenImage),this.brokenLink=!0)},toggleSound(){this.$emit("toggle-sound")},register(){posthog.capture("video-landing.overlay-register-click",{counterparty:{id:this.creator.id,nickname:this.creator.nickname}}),this.$inertia.visit(this.route("register",{creatorId:this.creator.id}))}}},n=(0,i(1900).Z)(l,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"embla__slide relative h-full w-full min-w-0 shrink-0 grow-0 basis-full"},[e("div",{staticClass:"absolute left-4 top-4 z-2000 flex items-center justify-center gap-4 p-4 text-white"},[e("v-avatar",{staticClass:"h-16 w-16 shrink-0",attrs:{lazyload:!1,url:t.creator.avatar_circle,"full-rounded":"",href:t.profileUrl}}),t._v(" "),e("div",{staticClass:"flex flex-col gap-2"},[e("Link",{attrs:{href:t.profileUrl}},[e("v-text",{attrs:{tag:"h4"}},[t._v(t._s(t.creator.nickname))])],1),t._v(" "),e("v-button",{staticClass:"h-auto w-fit p-2 dark:!bg-gray-primary/50",attrs:{variant:"bordered",href:t.profileUrl}},[e("v-text",[t._v(t._s(t.profileCtaText?t.profileCtaText:t.__("layout.view_profile")))])],1)],1)],1),t._v(" "),e("button",{staticClass:"absolute right-4 top-4 z-2000 flex items-center justify-center p-4 text-white",attrs:{"aria-label":"Toggle sound"},on:{click:function(e){return e.stopPropagation(),t.toggleSound.apply(null,arguments)}}},[e("v-icon",{staticClass:"h-8 w-8 cursor-pointer text-white shadow-black drop-shadow-sm",attrs:{name:t.muted?"volume-off":"volume-on"}})],1),t._v(" "),t.isPlaying||t.brokenLink?t._e():e("div",{staticClass:"absolute left-1/2 top-1/2 z-10 flex h-1/2 w-1/2 -translate-x-1/2 -translate-y-1/2 items-center justify-center",on:{click:t.initialize}},[e("button",{staticClass:"flex h-16 w-16 items-center justify-center gap-2 rounded-full bg-gradient-to-br from-primary-200 to-primary-400 text-white transition hover:scale-105"},[e("v-icon",{staticClass:"is-icon h-7 w-7 text-white shadow-black drop-shadow",attrs:{name:"play-alt"}})],1)]),t._v(" "),e("div",{staticClass:"absolute z-0 flex h-full w-full items-center justify-center overflow-hidden"},[e("video",{ref:"videoPlayer",staticClass:"video-js-overlay hidden",attrs:{preload:"none"},on:{error:t.setBrokenLink}}),t._v(" "),e("img",{staticClass:"absolute inset-0 -z-1 h-full w-full scale-110 object-cover blur-lg",attrs:{draggable:"false",src:t.content.thumbnail,alt:t.creator.nickname}})]),t._v(" "),e("v-button",{staticClass:"absolute bottom-0 left-1/2 z-100 flex min-w-[80%] -translate-x-1/2 -translate-y-1/2 justify-center whitespace-nowrap",attrs:{size:"large"},on:{click:t.register}},[t._v("\n    "+t._s(t.mainCtaText?t.mainCtaText:t.__("layout.message_me"))+"\n  ")])],1)}),[],!1,null,null,null),o=n.exports}}]);
//# sourceMappingURL=3515.js.map?id=5252bf223f6c6264