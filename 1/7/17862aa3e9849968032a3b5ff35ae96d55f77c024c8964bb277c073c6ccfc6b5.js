var amplitude=function(){"use strict";e,n,r,s,a,u;(e={}).SET="$set",e.SET_ONCE="$setOnce",e.ADD="$add",e.APPEND="$append",e.PREPEND="$prepend",e.REMOVE="$remove",e.PREINSERT="$preinsert",e.POSTINSERT="$postinsert",e.UNSET="$unset",e.CLEAR_ALL="$clearAll",(r=n=n||{})[r.None=0]="None",r[r.Error=1]="Error",r[r.Warn=2]="Warn",r[r.Verbose=3]="Verbose",(a=s=s||{}).Unknown="unknown",a.Skipped="skipped",a.Success="success",a.RateLimit="rate_limit",a.PayloadTooLarge="payload_too_large",a.Invalid="invalid",a.Failed="failed",(u=s=s||{}).fromHttpCode=function(e){return 200<=e&&e<300?u.Success:429===e?u.RateLimit:413===e?u.PayloadTooLarge:400<=e&&e<500?u.Invalid:500<=e?u.Failed:u.Unknown};s.Skipped;ar p,l={},d=((p=function(){return"object"==typeof process&&void 0!==(null===(e=null===process||void 0===process?void 0:process.versions)||void 0===e?void 0:e.node)?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:l;var e}()).__AMPLITUDE__=p.__AMPLITUDE__||{},p.__AMPLITUDE__),h="Amplitude Logger ",f=(g.prototype.disable=g.prototype.enable=g.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel<n.Verbose||global.console.log(h+"[Log]: "+e.join(" "))},g.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logLevel<n.Warn||global.console.warn(h+"[Warn]: "+e.join(" "))},g.prototype.error=g);function g(){this._logLevel=0}d.logger||(d.logger=new f);var m={DEFAULT_INSTANCE:"$default_instance",API_VERSION:2,MAX_STRING_LENGTH:4096,MAX_PROPERTY_KEYS:1e3,IDENTIFY_EVENT:"$identify",GROUP_IDENTIFY_EVENT:"$groupidentify",LAST_EVENT_ID:"amplitude_lastEventId",LAST_EVENT_TIME:"amplitude_lastEventTime",LAST_IDENTIFY_ID:"amplitude_lastIdentifyId",LAST_SEQUENCE_NUMBER:"amplitude_lastSequenceNumber",SESSION_ID:"amplitude_sessionId",DEVICE_ID:"amplitude_deviceId",OPT_OUT:"amplitude_optOut",USER_ID:"amplitude_userId",COOKIE_TEST_PREFIX:"amp_cookie_test",COOKIE_PREFIX:"amp",STORAGE_DEFAULT:"",STORAGE_COOKIES:"cookies",STORAGE_NONE:"none",STORAGE_LOCAL:"localStorage",STORAGE_SESSION:"sessionStorage",REVENUE_EVENT:"revenue_amount",REVENUE_PRODUCT_ID:"$productId",REVENUE_QUANTITY:"$quantity",REVENUE_PRICE:"$price",REVENUE_REVENUE_TYPE:"$revenueType",AMP_DEVICE_ID_PARAM:"amp_device_id",REFERRER:"referrer",UTM_SOURCE:"utm_source",UTM_MEDIUM:"utm_medium",UTM_CAMPAIGN:"utm_campaign",UTM_TERM:"utm_term",UTM_CONTENT:"utm_content",ATTRIBUTION_EVENT:"[Amplitude] Attribution Captured"},y=_=w={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:_encode:decode:_decode:,b=Object.prototype.toString;unction I(e){var t=E(e);if("object"!==t)return U.error("Error: invalid properties format. Expecting Javascript object, received "+t+", ignoring"),{};if(Object.keys(e).length>m.MAX_PROPERTY_KEYS)return U.error("Error: too many properties (more than 1000), ignoring"),{};var n,i,o,r={};for(var s in e){Object.prototype.hasOwnProperty.call(e,s)&&("string"!==(i=E(n=s))&&(n=String(n),U.warn("WARNING: Non-string property key, received type "+i+', coercing to string "'+n+'"')),null!==(o=M(n,e[s]))&&(r[n]=o))}return r}unction O(e){try{for(var t=document.cookie.split(";"),n=null,i=0;i<t.length;i++){for(var o=t[i];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e)){n=o.substring(e.length,o.length);break}}return n}catch(e){return null}}function N(e,t,n){var i,o=null!==t?n.expirationDays:-1;o&&((i=new Date).setTime(i.getTime()+24*o*60*60*1e3),o=i);var r=e+"="+t;o&&(r+="; expires="+o.toUTCString()),r+="; path=/",n.domain&&(r+="; domain="+n.domain),n.secure&&(r+="; Secure"),n.sameSite&&(r+="; SameSite="+n.sameSite),document.cookie=r}r k,R,C,x={DISABLE:0,ERROR:1,WARN:2,INFO:3},P=x.WARN,U={error:function(e){x.ERROR<=P&&D(e)},warn:function(e){x.WARN<=P&&D(e)},info:,D=j=q=["nan","function","arguments","regexp","element"],M=V=L=G=U,F=K=z=B=function(e){var t=E(e);if("object"!==t)return U.error("Error: invalid groups format. Expecting Javascript object, received "+t+", ignoring"),{};var n,i,o,r={};for(var s in e){Object.prototype.hasOwnProperty.call(e,s)&&("string"!==(i=E(n=s))&&(n=String(n),U.warn("WARNING: Non-string groupType, received type "+i+', coercing to string "'+n+'"')),null!==(o=V(n,e[s]))&&(r[n]=o))}return r},W=$=I,X=function(){return window.location},Y={set:N,get:O,areCookiesEnabled:function(e){var t=0<arguments.length&&void 0!==e?e:{},n=String(new Date);try{var i=m.COOKIE_TEST_PREFIX+S();N(i,n,t);var o=O(i+"=")===n;return N(i,null,t),o}catch(e){}return!1}},J=Q={expirationDays:void 0,domain:void 0},H=Z=ee=te={reset:options:get:H,set:Z,remove:ee,setRaw:getRaw:;if())k=window.localStorage;else if(window.globalStorage)try{k=window.globalStorage[window.location.hostname]}catch(e){}else{"undefined"!=typeof document&&(R=document.createElement("div"),C="localStorage",R.style.display="none",document.getElementsByTagName("head")[0].appendChild(R),R.addBehavior&&(R.addBehavior("#default#userdata"),k={length:0,setItem:getItem:removeItem:clear:key:,R.load(C),k.length=R.XMLDocument.documentElement.attributes.length))}ar ie,oe=k=k||{length:0,setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){},key:function(){}};ne.prototype.getStorage=function(){return null!==this.storage||(Y.areCookiesEnabled()?this.storage=te:(n="amp_cookiestore_",this.storage={_options:{expirationDays:void 0,domain:void 0,secure:!1},reset:options:get:set:remove:)),this.storage;var n};function re(e,t){r o=e?"?"+e.split(".").slice(-1)[0].replace(/\|/g,"&"):"",r=n(m.UTM_SOURCE,t,"utmcsr",o),s=n(m.UTM_MEDIUM,t,"utmcmd",o),a=n(m.UTM_CAMPAIGN,t,"utmccn",o),u=n(m.UTM_TERM,t,"utmctr",o),c=n(m.UTM_CONTENT,t,"utmcct",o),p={};return i(m.UTM_SOURCE,r),i(m.UTM_MEDIUM,s),i(m.UTM_CAMPAIGN,a),i(m.UTM_TERM,u),i(m.UTM_CONTENT,c),p}ar ae=(o(ie={},m.STORAGE_COOKIES,!0),o(ie,m.STORAGE_NONE,!0),o(ie,m.STORAGE_LOCAL,!0),o(ie,m.STORAGE_SESSION,!0),ie),ue=function(){ar e,t,n;return e=p,(t=[{key:"getCookieStorageKey",value:,{key:"save",value:function(e){var t=e.deviceId,n=e.userId,i=e.optOut,o=e.sessionId,r=e.lastEventTime,s=e.eventId,a=e.identifyId,u=e.sequenceNumber;if(this.storage!==m.STORAGE_NONE){var c=[t,w.encode(n||""),i?"1":"",o?o.toString(32):"0",r?r.toString(32):"0",s?s.toString(32):"0",a?a.toString(32):"0",u?u.toString(32):"0"].join(".");switch(this.storage){case m.STORAGE_SESSION:window.sessionStorage&&window.sessionStorage.setItem(this.storageKey,c);break;case m.STORAGE_LOCAL:oe.setItem(this.storageKey,c);break;case m.STORAGE_COOKIES:Y.set(this.getCookieStorageKey(),c,{domain:this.cookieDomain,secure:this.secure,sameSite:this.sameSite,expirationDays:this.expirationDays})}}}},{key:"load",value:function(){var e;if(this.storage===m.STORAGE_COOKIES&&(e=Y.get(this.getCookieStorageKey()+"=")),!(e=e||oe.getItem(this.storageKey)))try{e=window.sessionStorage&&window.sessionStorage.getItem(this.storageKey)}catch(e){G.info('window.sessionStorage unavailable. Reason: "'.concat(e,'"'))}if(!e)return null;var t=e.split("."),n=null;if(t[1])try{n=w.decode(t[1])}catch(e){n=null}return{deviceId:t[0],userId:n,optOut:"1"===t[2],sessionId:parseInt(t[3],32),lastEventTime:parseInt(t[4],32),eventId:parseInt(t[5],32),identifyId:parseInt(t[6],32),sequenceNumber:parseInt(t[7],32)}}}])&&i(e.prototype,t),n&&i(e,n),p}(),ce="$clearAll";se.prototype.add=se.prototype.append=function(e,t){return this._addOperation("$append",e,t),this},se.prototype.clearAll=function(){return 0<Object.keys(this.userPropertiesOperations).length?Object.prototype.hasOwnProperty.call(this.userPropertiesOperations,ce)||G.error("Need to send $clearAll on its own Identify object without any other operations, skipping $clearAll"):this.userPropertiesOperations[ce]="-",this},se.prototype.prepend=function(e,t){return this._addOperation("$prepend",e,t),this},se.prototype.set=function(e,t){return this._addOperation("$set",e,t),this},se.prototype.setOnce=function(e,t){return this._addOperation("$setOnce",e,t),this},se.prototype.unset=se.prototype.preInsert=function(e,t){return this._addOperation("$preInsert",e,t),this},se.prototype.postInsert=function(e,t){return this._addOperation("$postInsert",e,t),this},se.prototype.remove=se.prototype._addOperation=var pe="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};ar de=le(function(e){xports?e.exports=t:s.md5=t}),he=fe=Object.getOwnPropertySymbols,ge=Object.prototype.hasOwnProperty,ve=Object.prototype.propertyIsEnumerable;var me=)?Object.assign:ye="%[a-f0-9]{2}";new RegExp(ye,"gi"),new RegExp("("+ye+")+","gi");r be=we.prototype.send=function(e){var t,n;!!window.XDomainRequest?((t=new window.XDomainRequest).open("POST",this.url,!0),t.onload=t.onerror=t.ontimeout=function(){},t.onprogress=function(){},t.send(be(this.data))):((n=new XMLHttpRequest).open("POST",this.url,!0),n.onreadystatechange=n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(be(this.data)))};e.prototype.setProductId=Ee.prototype.setQuantity=function(e){return"number"!==E(e)?G.error("Unsupported type for quantity: "+E(e)+", expecting number"):this._quantity=parseInt(e),this},Ee.prototype.setPrice=function(e){return"number"!==E(e)?G.error("Unsupported type for price: "+E(e)+", expecting number"):this._price=e,this},Ee.prototype.setRevenueType=Ee.prototype.setEventProperties=Ee.prototype._isValidRevenue=Ee.prototype._toJSONObject=ar Se=le(,Oe=(Se.UAParser,"8.1.0"),Ne={apiEndpoint:"api.amplitude.com",batchEvents:!1,cookieExpiration:365,cookieName:"amplitude_id",sameSiteCookie:"Lax",cookieForceUpgrade:!1,deferInitialization:!1,disableCookies:!1,deviceIdFromUrlParam:!1,domain:"",eventUploadPeriodMillis:3e4,eventUploadThreshold:30,forceHttps:!0,includeFbclid:!1,includeGclid:!1,includeReferrer:!1,includeUtm:!1,language:),logLevel:"WARN",logAttributionCapturedEvent:!1,optOut:!1,onError:platform:"Web",savedMaxCount:1e3,saveEvents:!0,saveParamsReferrerOncePerSession:!0,secureCookie:!1,sessionTimeout:18e5,storage:m.STORAGE_DEFAULT,trackingOptions:{city:!0,country:!0,carrier:!0,device_manufacturer:!0,device_model:!0,dma:!0,ip_address:!0,language:!0,os_name:!0,os_version:!0,platform:!0,region:!0,version_name:!0},unsetParamsReferrerOnNewSession:!1,unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100};Ie.prototype.Identify=se,Ie.prototype.Revenue=Ee,Ie.prototype.init=function(e,i,o,t){var r=this;if("string"!==E(e)||F(e))G.error("Invalid apiKey. Please re-initialize with a valid apiKey");else try{Ae(this.options,o),c()&&void 0!==window.Prototype&&Array.prototype.toJSON&&(function(){var e;if(c()){var t=window,n=Array;if(void 0!==t.Prototype&&void 0!==(null===(e=n.prototype)||void 0===e?void 0:e.toJSON))return delete n.prototype.toJSON}}(),G.warn("Prototype.js injected Array.prototype.toJSON. Deleting Array.prototype.toJSON to prevent double-stringify")),this.options.cookieName!==Ne.cookieName&&G.warn("The cookieName option is deprecated. We will be ignoring it for newer cookies"),this.options.apiKey=e,this._storageSuffix="_"+e+(this._instanceName===m.DEFAULT_INSTANCE?"":"_"+this._instanceName),this._storageSuffixV5=e.slice(0,6),this._oldCookiename=this.options.cookieName+this._storageSuffix,this._unsentKey=this.options.unsentKey+this._storageSuffix,this._unsentIdentifyKey=this.options.unsentIdentifyKey+this._storageSuffix,this._cookieName=m.COOKIE_PREFIX+"_"+this._storageSuffixV5,this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie,sameSite:this.options.sameSiteCookie}),this._metadataStorage=new ue({storageKey:this._cookieName,disableCookies:this.options.disableCookies,expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie,sameSite:this.options.sameSiteCookie,storage:this.options.storage});var n=!!this.cookieStorage.get(this._oldCookiename),s=!!this._metadataStorage.load();this._useOldCookie=!s&&n&&!this.options.cookieForceUpgrade;var a=s||n;if(this.options.domain=this.cookieStorage.options().domain,this.options.deferInitialization&&!a)return void this._deferInitialization(e,i,o,t);"string"===E(this.options.logLevel)&&L(this.options.logLevel);var u=je(this);this._apiPropertiesTrackingOptions=0<Object.keys(u).length?{tracking_options:u}:{},this.options.cookieForceUpgrade&&n&&(s||Re(this),this.cookieStorage.remove(this._oldCookiename)),ke(this),this._pendingReadStorage=!0;this.options.saveEvents&&(this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey).map(function(e){return{event:e}}).concat(this._unsentEvents),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey).map(.concat(this._unsentIdentifys)),function(e){r.options.deviceId=r._getInitialDeviceId(o&&o.deviceId,e),r.options.userId="string"===E(i)&&!F(i)&&i||"number"===E(i)&&i.toString()||r.options.userId||null;var t=(new Date).getTime();r._sessionId&&r._lastEventTime&&!(t-r._lastEventTime>r.options.sessionTimeout)||(r.options.unsetParamsReferrerOnNewSession&&r._unsetUTMParams(),r._newSession=!0,r._sessionId=t,r.options.saveParamsReferrerOncePerSession&&r._trackParamsAndReferrer()),r.options.saveParamsReferrerOncePerSession||r._trackParamsAndReferrer(),r.options.saveEvents&&(Te(r._unsentEvents),Te(r._unsentIdentifys)),r._lastEventTime=t,xe(r),r._pendingReadStorage=!1,r._sendEventsIfReady();for(var n=0;n<r._onInit.length;n++)r._onInit[n](r);r._onInit=[],r._isInitialized=!0}(),this.runQueuedFunctions(),"function"===E(t)&&t(this)}catch(e){G.error(e),"function"===E(o.onError)&&o.onError(e)}},Ie.prototype.deleteLowerLevelDomainCookies=Ie.prototype._getInitialDeviceId=var Te=Ie.prototype._trackParamsAndReferrer=function(){var e,t,n,i,o;this.options.includeUtm&&(e=this._initUtmData()),this.options.includeReferrer&&(t=this._saveReferrer(this._getReferrer())),this.options.includeGclid&&(n=this._saveGclid(this._getUrlParams())),this.options.includeFbclid&&(i=this._saveFbclid(this._getUrlParams())),this.options.logAttributionCapturedEvent&&(o=v({},e,t,n,i),0<Object.keys(o).length&&this.logEvent(m.ATTRIBUTION_EVENT,o))};var Ae=function e(t,n){if("object"===E(n)){var i,o,r;for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i=s,r=o=void 0,Object.prototype.hasOwnProperty.call(t,i)&&(o=n[i],r=E(t[i]),W(o,i+" option",r)&&("boolean"===r?t[i]=!!o:"string"===r&&!F(o)||"number"===r&&0<o||"function"===r?t[i]=o:"object"===r&&e(t[i],o))))}};Ie.prototype.runQueuedFunctions=Ie.prototype._apiKeySet=Ie.prototype._loadSavedUnsentEvents=Ie.prototype._parseSavedUnsentEventsString=Ie.prototype.isNewSession=function(){return this._newSession},Ie.prototype.onInit=Ie.prototype.getSessionId=Ie.prototype.nextEventId=function(){return this._eventId++,this._eventId},Ie.prototype.nextIdentifyId=function(){return this._identifyId++,this._identifyId},Ie.prototype.nextSequenceNumber=Ie.prototype._unsentCount=Ie.prototype._sendEventsIfReady=Ie.prototype._getFromStorage=Ie.prototype._setInStorage=var ke=function(e){var t,n;e._useOldCookie?"object"!==E(t=e.cookieStorage.get(e._oldCookiename))||Ce(e,t):"object"===E(n=e._metadataStorage.load())&&Ce(e,n)},Re=Ce=xe=Ie.prototype._initUtmData=Ie.prototype._unsetUTMParams=var Pe=Ie.prototype._getReferrer=function(){return document.referrer},Ie.prototype._getUrlParams=Ie.prototype._saveGclid=function(e){var t=K("gclid",e);if(!F(t)){var n={gclid:t};return Pe(this,n),n}},Ie.prototype._saveFbclid=Ie.prototype._getDeviceIdFromUrlParam=Ie.prototype._getReferringDomain=Ie.prototype._saveReferrer=Ie.prototype.saveEvents=Ie.prototype.setDomain=Ie.prototype.setUserId=Ie.prototype.setGroup=function(e,t){if(this._shouldDeferCall())return this._q.push(["setGroup"].concat(Array.prototype.slice.call(arguments,0)));var n,i;this._apiKeySet("setGroup()")&&W(e,"groupType","string")&&!F(e)&&((n={})[e]=t,i=(new se).set(e,t),this._logEvent(m.IDENTIFY_EVENT,null,null,i.userPropertiesOperations,n,null,null,null))},Ie.prototype.setOptOut=Ie.prototype.setSessionId=Ie.prototype.resetSessionId=Ie.prototype.regenerateDeviceId=Ie.prototype.setDeviceId=Ie.prototype.setUserProperties=Ie.prototype.clearUserProperties=function(){if(this._shouldDeferCall())return this._q.push(["clearUserProperties"].concat(Array.prototype.slice.call(arguments,0)));var e;this._apiKeySet("clearUserProperties()")&&((e=new se).clearAll(),this.identify(e))};e.prototype.identify=function(e,t){if(this._shouldDeferCall())return this._q.push(["identify"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("identify()"))if("object"===E(e)&&Object.prototype.hasOwnProperty.call(e,"_q")&&(e=Ue(new se,e)),e instanceof se){if(0<Object.keys(e.userPropertiesOperations).length)return this._logEvent(m.IDENTIFY_EVENT,null,null,e.userPropertiesOperations,null,null,null,t);"function"===E(t)&&t(0,"No request sent",{reason:"No user property operations"})}else G.error("Invalid identify input type. Expected Identify object but saw "+E(e)),"function"===E(t)&&t(0,"No request sent",{reason:"Invalid identify input type"});else"function"===E(t)&&t(0,"No request sent",{reason:"API key is not set"})},Ie.prototype.groupIdentify=function(e,t,n,i){if(this._shouldDeferCall())return this._q.push(["groupIdentify"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("groupIdentify()"))if(W(e,"group_type","string")&&!F(e))if(null!=t)if("object"===E(n)&&Object.prototype.hasOwnProperty.call(n,"_q")&&(n=Ue(new se,n)),n instanceof se){if(0<Object.keys(n.userPropertiesOperations).length)return this._logEvent(m.GROUP_IDENTIFY_EVENT,null,null,null,o({},e,t),n.userPropertiesOperations,null,i);"function"===E(i)&&i(0,"No request sent",{reason:"No group property operations"})}else G.error("Invalid identify input type. Expected Identify object but saw "+E(n)),"function"===E(i)&&i(0,"No request sent",{reason:"Invalid identify input type"});else"function"===E(i)&&i(0,"No request sent",{reason:"Invalid group name"});else"function"===E(i)&&i(0,"No request sent",{reason:"Invalid group type"});else"function"===E(i)&&i(0,"No request sent",{reason:"API key is not set"})},Ie.prototype.setVersionName=Ie.prototype._logEvent=function(e,t,n,i,o,r,s,a){if(ke(this),e)if(this.options.optOut)"function"===E(a)&&a(0,"No request sent",{reason:"optOut is set to true"});else try{var u=e===m.IDENTIFY_EVENT||e===m.GROUP_IDENTIFY_EVENT?this.nextIdentifyId():this.nextEventId(),c=this.nextSequenceNumber(),p="number"===E(s)?s:(new Date).getTime();this._sessionId&&this._lastEventTime&&!(p-this._lastEventTime>this.options.sessionTimeout)||(this._sessionId=p),this._lastEventTime=p,xe(this);var l=this._ua.browser.name,d=this._ua.browser.major,h=this._ua.os.name;i=i||{};var f=v({},this._apiPropertiesTrackingOptions);n=v({},n||{},f),t=t||{},o=o||{},r=r||{};var g={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:p,event_id:u,session_id:this._sessionId||-1,event_type:e,version_name:this.options.versionName||null,platform:De(this,"platform")?this.options.platform:null,os_name:De(this,"os_name")&&l||null,os_version:De(this,"os_version")&&d||null,device_model:De(this,"device_model")&&h||null,language:De(this,"language")?this.options.language:null,api_properties:n,event_properties:z($(t)),user_properties:z($(i)),uuid:),library:{name:"amplitude-js",version:Oe},sequence_number:c,groups:z(B(o)),group_properties:z($(r)),user_agent:this._userAgent};return e===m.IDENTIFY_EVENT||e===m.GROUP_IDENTIFY_EVENT?(this._unsentIdentifys.push({event:g,callback:a}),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push({event:g,callback:a}),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(),u}catch(e){G.error(e)}else"function"===E(a)&&a(0,"No request sent",{reason:"Missing eventType"})};var De=je=Ie.prototype._limitEventsQueued=Ie.prototype.logEvent=Ie.prototype.logEventWithTimestamp=Ie.prototype.logEventWithGroups=e.prototype.logRevenueV2=function(e){if(this._shouldDeferCall())return this._q.push(["logRevenueV2"].concat(Array.prototype.slice.call(arguments,0)));if(this._apiKeySet("logRevenueV2()"))if("object"===E(e)&&Object.prototype.hasOwnProperty.call(e,"_q")&&(e=Ue(new Ee,e)),e instanceof Ee){if(e&&e._isValidRevenue())return this.logEvent(m.REVENUE_EVENT,e._toJSONObject())}else G.error("Invalid revenue input type. Expected Revenue object but saw "+E(e))},Ie.prototype.logRevenue=Ie.prototype.removeEvents=var Me=Ie.prototype.sendEvents=function(){var e,n,t,i,o,r,s,a,u;this._apiKeySet("sendEvents()")?this.options.optOut?this.removeEvents(1/0,1/0,0,"No request sent",{reason:"Opt out is set to true"}):0!==this._unsentCount()&&(this._sending||(this._sending=!0,e=(this.options.forceHttps||"https:"===window.location.protocol?"https":"http")+"://"+this.options.apiEndpoint,n=Math.min(this._unsentCount(),this.options.uploadBatchSize),t=this._mergeEventsAndIdentifys(n),i=t.maxEventId,o=t.maxIdentifyId,r=JSON.stringify(t.eventsToSend.map(),s=(new Date).getTime(),a={client:this.options.apiKey,e:r,v:m.API_VERSION,upload_time:s,checksum:de(m.API_VERSION+this.options.apiKey+r+s)},u=this,new we(e,a).send()):this.removeEvents(1/0,1/0,0,"No request sent",{reason:"API key not set"})},Ie.prototype._mergeEventsAndIdentifys=function(e){for(var t=[],n=0,i=-1,o=0,r=-1;t.length<e;){var s=void 0,a=o>=this._unsentIdentifys.length,u=n>=this._unsentEvents.length;if(u&&a){G.error("Merging Events and Identifys, less events and identifys than expected");break}a||!u&&(!("sequence_number"in this._unsentEvents[n].event)||this._unsentEvents[n].event.sequence_number<this._unsentIdentifys[o].event.sequence_number)?i=(s=this._unsentEvents[n++]).event.event_id:r=(s=this._unsentIdentifys[o++]).event.event_id,t.push(s)}return{eventsToSend:t,maxEventId:i,maxIdentifyId:r}},Ie.prototype.setGlobalUserProperties=Ie.prototype.__VERSION__=Oe,Ie.prototype._shouldDeferCall=Ie.prototype._deferInitialization=Ie.prototype.enableTracking=e.prototype.Identify=se,Ve.prototype.Revenue=Ee,Ve.prototype.getInstance=Ve.prototype.runQueuedFunctions=Ve.prototype.init=Ve.prototype.isNewSession=function(){return this.getInstance().isNewSession()},Ve.prototype.getSessionId=function(){return this.getInstance().getSessionId()},Ve.prototype.nextEventId=function(){return this.getInstance().nextEventId()},Ve.prototype.nextIdentifyId=function(){return this.getInstance().nextIdentifyId()},Ve.prototype.nextSequenceNumber=Ve.prototype.saveEvents=function(){this.getInstance().saveEvents()},Ve.prototype.setDomain=function(e){this.getInstance().setDomain(e)},Ve.prototype.setUserId=function(e){this.getInstance().setUserId(e)},Ve.prototype.setGroup=function(e,t){this.getInstance().setGroup(e,t)},Ve.prototype.setOptOut=function(e){this.getInstance().setOptOut(e)},Ve.prototype.regenerateDeviceId=function(){this.getInstance().regenerateDeviceId()},Ve.prototype.setDeviceId=function(e){this.getInstance().setDeviceId(e)},Ve.prototype.setUserProperties=function(e){this.getInstance().setUserProperties(e)},Ve.prototype.clearUserProperties=Ve.prototype.identify=function(e,t){this.getInstance().identify(e,t)},Ve.prototype.setVersionName=Ve.prototype.logEvent=function(e,t,n){return this.getInstance().logEvent(e,t,n)},Ve.prototype.logEventWithGroups=Ve.prototype.logRevenueV2=Ve.prototype.logRevenue=Ve.prototype.removeEvents=Ve.prototype.sendEvents=function(e){this.getInstance().sendEvents(e)},Ve.prototype.setGlobalUserProperties=function(e){this.getInstance().setUserProperties(e)},Ve.prototype.__VERSION__=Oe;var Le=window.amplitude||{},Ge=new Ve;for(var Fe in Ge._q=Le._q||[],Le._iq)Object.prototype.hasOwnProperty.call(Le._iq,Fe)&&(Ge.getInstance(Fe)._q=Le._iq[Fe]._q||[]);return Ge.runQueuedFunctions(),Ge}();
