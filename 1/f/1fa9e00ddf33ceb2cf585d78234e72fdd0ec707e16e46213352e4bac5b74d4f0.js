!function(){let t;function e(){const e=-1!=location.href.indexOf("jt_debug=fsp"),n=o=e?console.log.bind(console.log,"jt_sfsp: "):n,i="data-fsp-analyser-nofsp",r="data-fsp-analyser-hit-fsp",s=["mousedown","touchstart"];let l=0;if("undefined"==typeof window||"undefined"==typeof performance||"undefined"==typeof MutationObserver||"undefined"==typeof screen)return void("undefined"!=typeof module&&(module.exports={on:n,un:n,forceStop:n,install:n}));const a={SCRIPT:1,LINK:1,HEAD:1,MATE:1,TITLE:1,STYLE:1,BR:1,SVG:2,IMG:2,CANVAS:2,VIDEO:2},{width:c,height:u}=screen,{clientWidth:f,clientHeight:m}=document.documentElement,d=Math.round(Math.max(.02*Math.min(c,u),12)),h=Math.round(.05*u),p=Math.min(m,u),g=Math.min(f,c),w=p*g,y=1e4,T=[4e3,4e3,1e3],b=[];let E=null,v=!1,S=null,M=null,x=null,_=!1,I=0;const A={version:"20230515",listeners:[],lazy:on:un:function(t){if(t){let e=this.listeners.indexOf(t);this.listeners.splice(e,1)}},forceStop:_fn:function(t){let e;for(let n in this.listeners)e=this.listeners[n],e&&e(t);this.listeners=[]},getFrames:function(){return b},getIgnoreNodes:install:getXPATH:U};let L=!1;window._JT_FSP?(A.listeners=window._JT_FSP.listeners,A.forceStop=window._JT_FSP.forceStop,v=!0):(window._JT_FSP=A,L=!0);let k=new MutationObserver((function(t){if(v)return;$=Date.now(),X(t,(t=>{const{target:e,addedNodes:n}=t,{nodeName:o}=e;if(1!==a[o]&&!j(S,(t=>t&&t.contains&&t.contains(e)))){if(b.length>0&&"HTML"!==o&&"BODY"!==o){const{top:t,left:n,bottom:o,right:i}=e.getBoundingClientRect();if(o<h||t>p-h||i<h||n>g-h)return}X(n,(t=>{try{if(!t.parentElement)return;let e=t;if(t)&&1===t.parentElement.childNodes.length&&(e=t.parentElement),1!==e.nodeType&&9!==e.nodeType)return;if(1===a[e.nodeName])return;!j(C,(t=>t.contains(e)))&&C.push(e)}catch(t){}}))}})),C.length>0&&null===D&&(D=setTimeout((()=>{R(C),C=[],D=null}),1e3/60))}));function N(){if(!L||E||v)return;S=[],x=function(){let t=null,o=null;if(!e)return n;let i=e=>{if(t){let n=Date.now();if(e){cancelAnimationFrame(o);const i=Date.now()-performance.now()+e;n=Math.round(i),t.style.color="#0ff"}t.innerHTML=`${n} | ${Math.round(e||performance.now())}`}},r=()=>{v||(o=requestAnimationFrame(r),t&&(t.innerHTML=`${Date.now()}`))},s=()=>{if(o)return;t=document.createElement("div");let e={position:"fixed",bottom:"6px",right:"6px",color:"#fff",padding:"0 4px",backgroundColor:"rgba(0, 0, 0, 0.6)",zIndex:99999990,textAlign:"center",fontSize:"12px"};for(let n in e)t.style[n]=e[n];document.body.appendChild(t),requestAnimationFrame(r)};document.body?s():window.addEventListener("DOMContentLoaded",s);return i}();const t=document.firstElementChild;if(document.body){document.querySelectorAll("BODY > *").length>0&&(X(document.querySelectorAll(`[${i}]`),(),R(document.querySelectorAll("BODY IMG")))}x(),k.observe(t,{childList:!0,subtree:!0});const o=()=>{s.forEach(()};"loading"!==document.readyState?o():document.addEventListener("DOMContentLoaded",o),E=setTimeout((()=>{F({type:"timeout"})}),y)}document&&()||N());let D=null,C=[],$=0,O=0;function R(t){try{const{meaningfulList:e,box:n,cost:i}=q(t);if(!n||!n.count)return;b.push(n),I+=i,o(`makeFrames cost:${i}ms; frames count: ${b.length}`,n),n.wait=0,n.imgSeq=[],X(e,(t=>{const{nodeName:e}=t;if("IMG"===e){n.wait+=1;let e=t.complete?1:0,i=t.src;const r=function(){if(v)t.removeEventListener("load",r,!0);else{if(e>0){if(t.src===i)return;o("img change src",i,t.src,G())}++e>2&&n.startTime>1e3||V((()=>{const{top:e,left:o,bottom:i,right:r,width:s,height:a}=t.getBoundingClientRect();s<d||a<d||i<h||e>p-h||r<h||o>g-h||(n.left=Math.min(o,n.left),n.top=Math.min(e,n.top),n.bottom=Math.max(n.bottom,e+a),n.right=Math.max(n.right,o+s),n.imgSeq.push({node:t,time:G()}),v||(l=Math.max(G(),l)))}),null)}};t.addEventListener("load",r,!0)}else"VIDEO"===e&&t.poster&&n.bgImg.push(t.poster)})),function(t,e){if(v)return;O=$;try{window.performance.mark("fsp_update"),window.performance.measure("fspRender","fetchStart","fsp_update")}catch(t){}x(),e=e||G();const{top:n,left:o,bottom:i,right:r}=t,s=Math.abs(i-n),l=Math.abs(r-o);t.lastTime=Math.max(e,t.lastTime),t.v=Math.floor(s*l/w*1e4)/1e4,M&&clearTimeout(M),M=setTimeout((,T.length>1?T.shift():T[0]);const a=b.length;if(a<4)return;let c=0,u=0,f=0,m={};for(let t=0;t<a;t++){const e=b[t];if(e.g=e.g||t+1,!(e.bottom-e.top<d||e.right-e.left<d)){if(c+=Math.min(e.v,1),e.v>=f&&(f=e.v,u=t),c>4){F({type:"sum_area",p:u});break}for(let n=0;n<t;n++){const t=b[n];if(!(t.bottom-t.top<d||t.right-t.left<d)&&W(e,t,d)){const n=e.g=t.g;m[n]=(m[n]||0)+1,m[n]>=3&&F({type:"tail",p:n-1});break}}}}}(n)}catch(t){}}function B(t,e,n){let i=function(){let t=performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||null;if(t)return t;const e=performance.timing;return{loadEventStart:e.loadEventStart-e.navigationStart,domContentLoadedEventStart:e.domContentLoadedEventStart-e.navigationStart}}();const{loadEventStart:r}=i;if(!0!==n&&r<=0)return void function(t){let e=null,n=0;const o=()=>{e&&clearTimeout(e),window.removeEventListener("load",o),0==n++&&t()};e=setTimeout(o,y-G()),window.addEventListener("load",o)}(();const s={};let l=-1,a=-1,c=0,u=null;X(performance.getEntries?performance.getEntries():[],(t=>{const{entryType:e,name:n,startTime:o,duration:i}=t;if("paint"==e)switch(n){case"first-contentful-paint":l=o;break;case"first-paint":a=o}else/\.css$/i.test(n)?c=Math.max(o+i,c):s[J(n)]=o+i}));let f={},m=0;if(t&&t.length>0&&X(t,(t=>{t=J(t),s[t]&&(o("check img from resourceTiming: ",t,s[t]),f[t]=s[t],m=Math.max(f[t],m))})),r>0){let t=[],e=document.body&&document.body.querySelectorAll("*[style]");const n=(t,e,n)=>{if(!(e=J(e))||/^data:/i.test(e))return;const i=s[e];if(i>r)return;const l=H(t,n);if(!l)return;const{width:a,height:f}=l;0==l.isCutoff&&a>d&&f>d?c<i&&(c=i,u=t):o("small size img",t)};e&&e.length>0&&X(e,(e=>{let o=/url\(['"]?(.*?)['"]?\)/i.exec(e.style&&e.style.backgroundImage||"");o=o&&o[1],n(e,o,t)})),X(document.images,()}e({fcp:l,fp:a,ssrLastImg:u,checkResult:f,checkResultMaxValue:m})}function F(n){if(v)return;const{type:i,p:r}=n;let a=0,c=G();try{let t=performance.getEntriesByName("first-contentful-paint")[0];if(t&&t.startTime&&(a=t.startTime),-1!=s.indexOf(i)&&(0===a||G()-a<200))return void o("no fcp, ignore mousedown",c)}catch(t){}E&&clearTimeout(E),M&&clearTimeout(M),v=!0,k&&(k.disconnect(),k.takeRecords(),k=null);let u=null,f=[];function m(t){let e=[];if(t.length<=1){e=t.slice(0);const{bgImg:n}=e[0]||{};n&&X(n,(t=>f.push(t)))}else X(t,(t=>{const{v:n,bgImg:o}=t;n<.02||(o&&X(o,(),e.push(t))}));return e}switch(i){case"tail":case"sum_area":u=m(b.slice(0,r));break;default:let t=m(b),e=t.length;if(e>=2){e--;let n=0;do{if(!W(t[e],t[e-1],d))break;n++}while(--e>0);n>0&&(0===e&&o("Full Screen Reflash x 2."),t=t.slice(0,e||1))}u=t}let h=0,p=null;u.length?X(u,(t=>{t.lastTime>h&&(h=t.lastTime,p=t)})):h=a,B(f,(n=>{try{const{fcp:a,fp:c,ssrLastImg:f,checkResult:m,checkResultMaxValue:d}=n;d>h&&(h=d);const g=Date.now()-performance.now()+h;o(`stopHandleBy ${i}, sfsp: ${h}, checkImg: ${d}, fcp: ${a}, fp: ${c}, ssrLastImg: `,f,u,m);const{domSize:w,imgSeq:y,meaningfulList:T}=p||{};let E="";try{y&&y.length>0&&(E=U(y[y.length-1].node))}catch(t){}let v="";try{T&&T.length>0&&(v=U(T[T.length-1]))}catch(t){}const M=t||Math.floor(performance.timing.navigationStart||performance.timeOrigin),L=O-M;let k=0;if(window.__ssrType&&window.__ssrSize)try{var r=performance.getEntries().find(();k=r.responseEnd-r.startTime,k||(k=performance.timing.responseEnd-performance.timing.navigationStart)}catch(t){}const N={endType:-1!=s.indexOf(i)?s[0]:i,timestamp:g,cost:Math.max(h,l),fsp:Math.floor(h),lastDomUpdateTime:L,domSize:w,validFrames:u,ssrTime:k,ssrLastImg:f,bgImgRecord:m,bgImgMaxTime:d,fcp:a,fp:c,haveIgnoreAttr:_,lastImg:E,lastDom:v,execCost:I,version:A.version};if(window.dispatchEvent&&window.CustomEvent){let t=new CustomEvent("fsp-analyser.fsp",{detail:N});window.dispatchEvent(t)}const D={c1:N.fsp,c2:N.cost,c3:N.ssrTime,c4:N.endType,c5:window.__ssrType,c6:window.__ssrSize||0,c7:window.__snapshotTime||0,c8:window.__snapshotStatus||0,c9:N.lastDom,c10:`lastDomUpdateTime=${L}&lastDomUpdateTimestamp=${O}`};window.pha&&window.pha.performance&&window.pha.performance.report?(window.WindVane&&window.WindVane.call&&window.WindVane.call("AEWVAdcPerformance","update",D,(()=>{}),(()=>{})),setTimeout((()=>{pha.performance.report({navigationStartTimestamp:M,fspTimestamp:M+N.fsp,currentTimestamp:Date.now(),fspTime:N.fsp,ssrTime:N.ssrTime,snapshotTime:window.__snapshotTime||0},(()=>{}),()}),300)):window._AES&&window._AES.AESPluginEvent&&window._AES.AESPluginEvent("fspAnalyserResultReport",D);try{A._fn(N)}catch(t){}x(h),e||(b.length=0,S&&(S.length=0,S=null))}catch(t){}}),"force"===i)}function q(t,e=[]){const n=G(),o={startTime:n,lastTime:n,left:Number.MAX_SAFE_INTEGER,top:Number.MAX_SAFE_INTEGER,right:0,bottom:0,count:0,searchNodes:0,bgImg:[],domSize:document.all?document.all.length:document.getElementsByTagName("*").length},i=o.meaningfulList=[],r=t=>{o.searchNodes++;const n=H(t,e);return n?(((t,e)=>{if(t){const{top:n,left:r,width:s,height:l,backgroundImage:a}=t;o.left=Math.min(r,o.left),o.top=Math.min(n,o.top),o.bottom=Math.max(o.bottom,n+l),o.right=Math.max(o.right,r+s),i.push(e),o.count++,a&&o.bgImg.push(a)}})(n,t),!0):n};return X(t,(t=>{(a[t.nodeName]||3)<2||0!==r(t)&&X(z(t,[]),r)})),{meaningfulList:i,cacheObj:e,box:o,cost:G()-n}}function H(t,e){let n=null;if(e||(e=[]),n=P(e,t)){if(n.result)return n.result}else{if(n=Y(t),e.push(n),n.ignore)return S.push(t),n.result=0;if(j(S,(e=>e&&e.contains&&e.contains(t))))return n.result=0}const{backgroundImage:o=null,pBox:i}=n;let{top:r,left:s,bottom:l,right:a,width:f,height:m}=i,w=!1,y=!0;if("IMG"!==t.nodeName||!0===t.complete||0!==f&&0!==m){if(f<d||m<d)return n.result=!1;if(l<h||r>u-h||a<h||s>c-h)return n.result=0}else y=!1;let T=t.parentElement,b=null;const E=document.scrollingElement||document.documentElement;for(;T;){if(b=P(e,T),b||(b=Y(T),b.ignore&&S.push(T),e.push(b)),b.ignore)return n.result=0;const{scrollTop:t,scrollLeft:o,scrollHeight:i,scrollWidth:c,clientHeight:u,clientWidth:f,overflowX:m,overflowY:d}=b;if(i>u&&(T===E||"visible"!==d)||c>f&&(T===E||"visible"!==m)){r+=t,l+=t,s+=o,a+=o;const e=b.box?b.box:T.getBoundingClientRect();if(b.box=b.box||e,r-e.bottom>4||s-e.right>4||e.top-l>4||e.left-a>4)return n.result=!1}T=T.parentElement,b=null}return w=w||r>=p||s>=g,n.result=(!y||!(l<h||r>p-h||a<h||s>g-h))&&{top:r,left:s,width:f,height:m,isCutoff:w,backgroundImage:o}}function V(t,e){e&&e.then&&e.catch?e.then((()=>{V(t)})).catch(():window.requestAnimationFrame?requestAnimationFrame(t):setTimeout(t,0)}function W(t,e,n=8){const o=Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2)),i=Math.sqrt(Math.pow(t.bottom-e.bottom,2)+Math.pow(t.right-e.right,2));return o<2*n&&i<2*n}function z(t,e){e=e||[];let n=t.firstChild;if(n){let o;do{switch(n.nodeType){case 1:if(o=a[n.nodeName]||0,1===o)break;if("IMG"===n.nodeName||"VIDEO"===n.nodeName){e.push(n);break}if(0===n.childElementCount){e.push(n);break}z(n,e);break;case 3:/^[\r\n\s]*$/.test(n.wholeText)||e.push(t)}}while(n=n.nextSibling)}return e}function P(t,e){for(let n=t.length-1;n>=0;n--){const o=t[n];if(o.key===e)return o}return null}function Y(t){let e={key:t,pBox:t.getBoundingClientRect(),scrollTop:t.scrollTop,scrollLeft:t.scrollLeft,scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,clientHeight:t.clientHeight,clientWidth:t.clientWidth,isNew:!0};if("BODY"!==t.tagName&&!t.hasAttribute(r)&&(t.hasAttribute(i)&&(e.ignore=!0,_=!0),window.getComputedStyle)){const n=window.getComputedStyle(t,null);e.display=n.display,e.position=n.position,e.overflow=n.overflow,e.overflowX=n.overflowX,e.overflowY=n.overflowY,e.transform=n.transform;const o=/url\(['"]?(.*?)['"]?\)/i;let i=n.backgroundImage;o.test(i)&&(i=i.replace(o,"$1"),/^data:/i.test(i)||(e.backgroundImage=i)),("fixed"===n.position||b.length>0&&("none"===n.display||"0"===n.opacity||"hidden"===n.visibility))&&(e.ignore=!0)}return e}unction X(t,e){if(!e||!t)return;let n=t.length||0;for(let o=0;o<n;o++)e(t[o],o)}function j(t,e){if(!e||!t)return;let n=t.length||0;for(let o=0;o<n;o++)if(e(t[o],o))return!0;return!1}unction U(t){if(!t)return"";let e=[],n=o=t=>{let o=n(t),i=1,r=t;for(;r=r.previousElementSibling;)n(r)===o&&i++;e.push(`${o}[${i}]`)},i=t;do{o(i)}while("BODY"!==i.tagName&&(i=i.parentElement));return e.push("/"),e.reverse().join("/")}e&&(A.findViewRectInFirstScreen=q,A.createScreenBox=H,A.findMeaningfulDom=z),"undefined"!=typeof module&&(module.exports=A)}window._wv_preload?document.addEventListener("WV.Event.Preload.Attach",():e()}();