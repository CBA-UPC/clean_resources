!window,function(){return function(t){ar s={},i={0:0};.e=function(t){var e=[],s=i[t];if(0!==s)if(s)e.push(s[2]);else{var o=new Promise(;e.push(s[2]=o);var r,a=document.createElement("script");a.charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.src=t),r=var u=setTimeout(12e4);a.onerror=a.onload=r,document.head.appendChild(a)}return Promise.all(e)},n.m=t,n.c=s,n.d=n.r=n.t=n.n=n.o=n.p="https://components2.rcsobjects.it/rcs_autocomplete/v1/",n.oe=var o=window.webpackJsonpRcsAutocomplete=window.webpackJsonpRcsAutocomplete||[],r=o.push.bind(o);o.push=e,o=o.slice();for(var a=0;a<o.length;a++)e(o[a]);var u=r;return n(n.s=3)}([function(t,e,s){var i=s(4);t.exports=function(t){var e,s="",n=t||{};return function(t,n,o){s+='<ul class="suggestions" id="suggestions" name="suggestion">',n.length?function(){var r=n;if("number"==typeof r.length)for(var a=0,u=r.length;a<u;a++){var h=r[a];s=s+"<li"+(i.attr("value",h[o],!0,!0)+i.attr("data-index",a,!0,!0))+">"+i.escape(null==(e=h[t]||h)?"":e)+"</li>"}else for(var a in u=0,r)u++,h=r[a],s=s+"<li"+(i.attr("value",h[o],!0,!0)+i.attr("data-index",a,!0,!0))+">"+i.escape(null==(e=h[t]||h)?"":e)+"</li>"}.call(this):s+='<option value="nan">Nessun valore trovato!</option>',s+="</ul>"}.call(this,"key"in n?n.key:"undefined"!=typeof key?key:void 0,"suggestions"in n?n.suggestions:"undefined"!=typeof suggestions?suggestions:void 0,"value"in n?n.value:"undefined"!=typeof value?value:void 0),s}},function(t,e,s){"use strict";s.r(e);var i=s(0),n=s.n(i);const o=t=>t?JSON.parse(t.getAttribute("data-config")):void 0,r=(t,e,s)=>e.filter(e=>e[s].toString().toLowerCase().startsWith(t)),a=t=>t&&""!==t&&t.length,u=t=>t&&(t["data-words"]||t.endpoint||t.configurationData),h=c=t=>{const e=t.querySelector("#suggestions")||t.parentElement.querySelector("#suggestions");return e?e.remove():void 0},l=(t,e,s,i)=>{if(c(t),e){const o=document.createElement("div");o.innerHTML=n()({suggestions:e,key:s,value:i}),t.appendChild(o.firstChild)}},g=(t,e,s,i)=>{if(c(t),e){const o=document.createElement("div");o.innerHTML=n()({suggestions:e,key:s,value:i}),((o.firstChild,t)}},d=(t,e)=>(e.split(".").forEach(function(e){t=t?t[e]:t}),t),f=(t,e,s=e)=>t.map(,p=(t,e=100)=>{let s;return function(...i){s&&clearTimeout(s),s=setTimeout(e)}},v=async t=>{return(await fetch(t)).json()},y=async(t,e)=>{return(await fetch(t,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)})).json()},m=async t=>{return await v(t)};class w{constructor(t,e){this.container=t,this.input=this.container.querySelector("input"),this.submitBtn=this.container.querySelector(".submit"),this.conf=e,this.searchKey=this.conf["data-key"],this.searchValue=this.conf["data-value"],this.suggestions=[],this.suggestionsList=void 0,this.listPositionIndex=-1,this.selectedSuggestionValue={},this.words=[]}async getSuggestions(t,e=!1){this.conf["data-words"]&&!this.words.length?this.words=Array.isArray(this.conf["data-words"])&&this.conf["data-words"]||window[this.conf["data-words"]]:this.conf.endpoint&&!this.words.length?this.words=await m(this.conf.endpoint):this.conf.configurationData&&""!==this.conf.configurationData.trim()&&(this.words=(await s(1)(`./${this.conf.configurationData}.js`)).default);const i=f(this.words,this.searchKey,this.searchValue);this.suggestions=e?[...this.words]:r(t,i,this.searchKey),this.conf["append-outer"]?g(this.container,this.suggestions,this.searchKey,this.searchValue):l(this.container,this.suggestions,this.searchKey,this.searchValue),this.listPositionIndex=-1,this.suggestionsList=this.conf["append-outer"]?this.container.parentElement.querySelector("#suggestions"):this.container.querySelector("#suggestions"),this.suggestionsList&&this.suggestions.length&&(this.suggestionsList.onclick=this.handleSuggestionsClick.bind(this),this.suggestionsList.addEventListener("mousemove",this.handleSuggestionsMove.bind(this),!1),this.suggestionsList.addEventListener("mouseout",this.handleSuggestionsOut.bind(this),!1))}handleSuggestionsClick(t){const e=this.suggestions[t.target.getAttribute("data-index")],s={searchKey:e[this.searchKey],searchValue:e[this.searchValue]};this.input.value=e[this.searchKey],this.removeSuggestionsList(this.input.value),this.selectedSuggestionValue=s,this.submit()}handleSuggestionsPressEnter(){const t=[...this.suggestionsList.children].find(t=>t.classList.contains("selected")),e=this.suggestions[t.getAttribute("data-index")];if(t){this.input.value=t.innerText,this.removeSuggestionsList();const s={[e[this.searchKey]]:e[this.searchValue]};this.selectedSuggestionValue=s,this.submit()}}handleSuggestionsMove(t){this.listPositionIndex=parseInt(t.target.getAttribute("data-index"),10),this.listPositionIndex>=0&&this.setNewActiveElement()}handleSuggestionsOut(t){const e=t.target;e&&e.classList.remove("selected"),"UL"===e.tagName&&(this.listPositionIndex=-1)}removeSuggestionsList(){return this.suggestionsList&&this.suggestionsList.remove()}findSuggestion(){this.suggestions.length&&this.suggestions[this.listPositionIndex]&&(this.input.value=this.suggestions[this.listPositionIndex][this.searchKey]),this.removeSuggestionsList(this.input.value),this.selectedSuggestionValue={[this.suggestions[this.listPositionIndex][this.searchKey]]:this.suggestions[this.listPositionIndex][this.searchValue]}}handleListMovement(t){this.listPositionIndex+t>-1&&this.listPositionIndex+t<this.suggestions.length&&this.suggestionsList&&(this.listPositionIndex+=t,this.setNewActiveElement())}setNewActiveElement(){const t=[...this.suggestionsList.children],e=t.find(t=>t.classList.contains("selected"));e&&e.classList.remove("selected"),t[this.listPositionIndex].classList.add("selected")}handleKeyUp(t){switch(t.key){case"Tab":""!==this.input.value&&(this.findSuggestion(),this.submit());break;case"ArrowUp":this.handleListMovement(-1);break;case"ArrowDown":this.handleListMovement(1);break;case"Enter":t.preventDefault(),this.submit()}}searchSuggestedWords(t){const e=t.target.value.trim().toLowerCase();a(e)?this.getSuggestions(e):c(this.container)}async submit(){const t=new CustomEvent(`${this.conf.eventName||"RCSAutocompleteSuggestionClicked"}`,{detail:this.selectedSuggestionValue});document.dispatchEvent(t),this.conf.showListOnClick&&(await this.getSuggestions(this.input.value.trim().toLowerCase()),this.removeSuggestionsList())}async toggleCompleteList(t){t.target.value.trim().length&&t.target.value.trim().toLowerCase()!==this.suggestions[0][this.searchKey].toLowerCase()||await this.getSuggestions("",!0)}convertPrefilledValue(){const t=this.words.find(t=>t[this.searchValue]===this.input.value);t&&(this.input.value=t[this.searchKey])}async render(){this.input.onkeydown=this.handleKeyUp.bind(this),this.input.addEventListener("keyup",,this.conf.showListOnClick&&(this.input.onclick=this.toggleCompleteList.bind(this)),window.device,this.input.oninput=p(this.searchSuggestedWords.bind(this),250),this.conf.convertPrefilledValue&&document.addEventListener("RCSProfilePrefilled",async()=>{this.words=(await s(1)(`./${this.conf.configurationData}.js`)).default,this.convertPrefilledValue(),await this.getSuggestions(this.input.value.trim().toLowerCase()),this.removeSuggestionsList()})}}class S{constructor(t,e){this.container=t,this.conf=e,this.submitBtn=this.container.querySelector(".submit"),this.input=this.container.querySelector("input"),this.suggestions=[],this.searchKey=this.conf["data-key"],this.clickRedirect=this.conf["data-clickRedirect"],this.searchValue=this.conf["data-value"],this.url=this.conf["data-request"].url,this.payload=this.conf["data-request"].payload,this.queryString=this.conf["data-request"].querystring,this.wordsProp=this.conf["data-request"].wordsProp,this.suggestions=[],this.suggestionsList=void 0,this.listPositionIndex=-1,this.selectedSuggestionValue={}}async getSuggestions(t){let e;if(this.payload)this.payload[Object.keys(this.payload)[0]]=t,e=await y(this.url,this.payload);else if(this.queryString){const s=`${this.queryString.split("=")[0]}=${t}`;e=await v(`${this.url}${s}`)}this.suggestions=f(d(e,this.wordsProp),this.searchKey,this.searchValue),l(this.container,this.suggestions,this.searchKey,this.searchValue),this.listPositionIndex=-1,this.suggestionsList=this.container.querySelector("#suggestions"),this.suggestionsList&&this.suggestions.length&&(this.suggestionsList.onclick=this.handleSuggestionsClick.bind(this),this.suggestionsList.addEventListener("mousemove",this.handleSuggestionsMove.bind(this),!1),this.suggestionsList.addEventListener("mouseout",this.handleSuggestionsOut.bind(this),!1))}handleSuggestionsClick(t){const e=this.suggestions[t.target.getAttribute("data-index")],s={searchKey:e[this.searchKey],searchValue:e[this.searchValue]};this.input.value=e[this.searchKey],this.removeSuggestionsList(this.input.value),this.selectedSuggestionValue=s,this.submit()}handleSuggestionsMove(t){this.listPositionIndex=parseInt(t.target.getAttribute("data-index"),10),this.listPositionIndex>=0&&this.setNewActiveElement()}handleSuggestionsOut(t){const e=t.target;e&&e.classList.remove("selected"),"UL"===e.tagName&&(this.listPositionIndex=-1)}indSuggestion(){this.suggestions.length&&this.suggestions[this.listPositionIndex]&&(this.input.value=this.suggestions[this.listPositionIndex][this.searchKey]),this.removeSuggestionsList(this.input.value),this.selectedSuggestionValue={[this.suggestions[this.listPositionIndex][this.searchKey]]:this.suggestions[this.listPositionIndex][this.searchValue]}}handleListMovement(t){this.listPositionIndex+t>-1&&this.listPositionIndex+t<this.suggestions.length&&this.suggestionsList&&(this.listPositionIndex+=t,this.setNewActiveElement())}setNewActiveElement(){const t=[...this.suggestionsList.children],e=t.find(;e&&e.classList.remove("selected"),t[this.listPositionIndex].classList.add("selected")}handleKeyUp(t){switch(t.key){case"Tab":""!==this.input.value&&(this.findSuggestion(),this.submit());break;case"ArrowUp":this.handleListMovement(-1);break;case"ArrowDown":this.handleListMovement(1);break;case"Enter":t.preventDefault(),this.submit()}}searchSuggestedWords(t){const e=t.target.value.trim().toLowerCase();a(e)?this.getSuggestions(e):c(this.container)}submit(){const t=new CustomEvent(`${this.conf.eventName||"RCSAutocompleteSuggestionClicked"}`,{detail:this.selectedSuggestionValue});this.clickRedirect?window.location=location.origin+t.detail.searchValue:document.dispatchEvent(t)}render(){this.input.oninput=p(this.searchSuggestedWords.bind(this),250),this.input.onkeydown=this.handleKeyUp.bind(this),this.input.addEventListener("focusout",()=>{(this.listPositionIndex<0||null===this.container.querySelector(".selected"))&&c(this.container)})}}s.d(e,"default",;class b{constructor(){this.elements=[...document.querySelectorAll(".autocomplete")]}async loadSearchFeature(t){const e=o(t);if(u(o(t))){new w(t,e).render()}else if(h(o(t))){new S(t,e).render()}}},function(t,e,s){"Symbol"in window&&"fetch"in window&&"IntersectionObserver"in window&&"CustomEvent"in window&&"closest"in Element.prototype&&"entries"in Array.prototype&&"from"in Array&&"find"in Array.prototype&&"findIndex"in Array.prototype&&"includes"in Array.prototype&&"keys"in Array.prototype&&"values"in Array.prototype&&"assign"in Object&&"entries"in Object&&"values"in Object&&"endsWith"in String.prototype&&"includes"in String.prototype&&"startsWith"in String.prototype?t.exports=s(2):s.e(1).then(s.bind(null,7)).then(()=>{t.exports=s(2)})},function(t,e,s){"use strict";var i=Object.prototype.hasOwnProperty;erge=e.classes=n,e.style=o,e.attr=r,e.attrs=var a=/["&<>]/;.escape=u,e.rethrow=,).default});