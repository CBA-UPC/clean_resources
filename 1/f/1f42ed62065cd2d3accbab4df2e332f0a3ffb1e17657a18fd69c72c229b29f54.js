(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7924],{60292:15329:function(e,t,n){"use strict";n.d(t,{Z:function(){return MissingViewPermission}});var s=n(52322),i=n(99219),a=n(51830);,3852:function(e,t,n){"use strict";n.d(t,{Z:function(){return useGetWorkspaceRolesQuery}});var s=n(73235),i=n(66547),a=n(66254),r=n(26806);function _templateObject(){let e=(0,s._)(["\n    query GetWorkspaceRoles($workspaceId: String!) {\n  workspaceRoles(workspaceId: $workspaceId) {\n    ...WorkspaceRole\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let l=(0,i.ZP)(_templateObject(),a.O);,56853:function(e,t,n){"use strict";n.d(t,{JR:function(){return validWorkEmail},u$:function(){return validEmail},vR:function(){return validDomain}});let s=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,i=/@(hotmail|yahoo|gmail|protonmail|icloud|aol|outlook|zoho)\.com/,a=/[a-zA-Z0-9][a-zA-Z0-9-]{1,61}[a-zA-Z0-9]?(?:\.[a-zA-Z]{2,})+/,validDomain=e=>a.test(e),validEmail=validWorkEmail=,1706:function(e,t,n){"use strict";var s=n(2784),i=n(83122),a=n(5632);t.Z=e=>{let{setOpenNew:t}=e,n=(0,a.useRouter)();(0,s.useEffect)(()=>{let{create:e}=(0,i.H8)(n.query);e&&t(!0)},[n,t])}},97593:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var s=n(52322),i=n(18406),a=n(97185),r=n(2784),l=n(15329),o=n(3852),d=n(53515),c=n(47330),m=n(1706),u=n(53954),v=n(69260),p=n(21215),b=n(32517),h=n(3016),f=n(78066),x=n(73235),g=n(66547),w=n(36711),j=n(26806);et k=(0,g.ZP)(_templateObject(),w.S);var I=n(86414),N=n(24595),y=n(56853),Z=n(77512),_=n(56958),S=n(88606);function useSendInvite(){let[,e]=j.Db(k),sendInvite=async t=>{let{email:n,workspaceId:s,roleId:i,teamId:a}=t;if(!(0,y.u$)(n)){(0,b.Rn)("Invalid email");return}let{existingUser:r,existingMembership:l}=await N.Z.checkIfMemberExists({email:n,workspaceId:s});if(null==l?void 0:l.accepted){let e=r.isOnboarded&&r.firstName&&r.lastName?'"'.concat(r.firstName," ").concat(r.lastName,'" is already a member of this workspace'):'"'.concat(n,'" is already a member of this workspace');return void(0,b.Rn)(e)}_.A.promise(new Promise((t,r)=>{e({workspaceId:s,email:n,roleId:i,teamId:a}).then(e=>{var s,i;let a=null==e?void 0:null===(i=e.data)||void 0===i?void 0:null===(s=i.inviteToWorkspace)||void 0===s?void 0:s.error;a?((0,b.Rn)(a),r("Failed to invite ".concat(n))):(I.Z.track("invited_member"),t())})}),{loading:"Inviting ".concat(n,"..."),success:"Invited ".concat(n,"!"),error:)};return sendInvite}var MemberInviteModal=e=>{let{open:t,handleClose:n,workspace:i,roleOptions:a}=e,[l,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),m=useSendInvite(),[u,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{(null==a?void 0:a.length)>0&&!d&&c(a[0].value)},[d,a]);let handleInvites=async()=>{let e=l.split(",").map(,t=e.map(e=>m({email:e,workspaceId:i.id,roleId:d,teamId:u}));await Promise.all(t),onClose()},onClose=b=!l||!d,x=a.find(,g=(null==x?void 0:x.name)===v.PD;return(0,s.jsx)(f.Z,{title:"Invite member to ".concat(i.name),open:t,handleClose:onClose,handleNext:handleInvites,nextText:"Send invites",nextDisabled:b,nextOnEnter:!0,children:(0,s.jsxs)("div",{className:"",children:[(0,s.jsx)("div",{className:"mb-5 text-base text-gray-500",children:"You can use commas to separate multiple email recipients."}),(0,s.jsx)("p",{id:"add-team-members-helper",className:"sr-only",children:"Add by email address"}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)(Z.oi,{name:"add-team-members",id:"add-team-members",className:"w-full",placeholder:"user@".concat(i.domain||"company.com"),"aria-describedby":"add-team-members-helper",onChange:o,value:l,size:"md",styles:{wrapper:{height:"100%"}}}),(0,s.jsx)("span",{className:"ml-3 w-36",children:(0,s.jsx)(h.Z,{items:a,field:"name",mb:0,placeHolder:"Role",onChange:selected:d})})]}),g&&(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)(S.Z,{teamId:u,setTeamId:p,invitingMember:!0})})]})})},A=n(75497);function SettingsMembers(){var e,t,n;let{currentUser:i}=(0,u.xJ)(),{workspace:a}=(0,u.cF)(),[{data:b,fetching:h,error:f}]=(0,d._)({variables:{workspaceId:null==a?void 0:a.id},pause:!(null==a?void 0:a.id)}),x=(null==b?void 0:b.memberships)||[],[g,w]=(0,r.useState)(!1);(0,m.Z)({setOpenNew:w});let j=useSendInvite(),[{data:k}]=(0,o.Z)({variables:{workspaceId:a.id},pause:!(null==a?void 0:a.id)}),I=(0,u.j_)(c.KG.Team),N=I===c.KA.Edit,y=I===c.KA.None?{}:{"data-testid":"members-".concat(N?"edit":"view")},Z=(0,u.NK)(a,c.TT.Launchpad),_=null!==(n=null==k?void 0:null===(t=k.workspaceRoles)||void 0===t?void 0:null===(e=t.filter(e=>{let{name:t}=e;return t!==v.PD||Z}))||void 0===e?void 0:e.map()&&void 0!==n?n:[];return(0,s.jsxs)("div",{className:"mx-auto w-full max-w-3xl",...y,children:[(0,s.jsx)(p.Z,{title:"Members",description:"Manage the users in your workspace and their permissions.",Actions:(0,s.jsx)(Actions,{handleInviteMember:()=>w(!0)})}),I===c.KA.None?(0,s.jsx)(l.Z,{}):a&&i&&(0,s.jsx)(A.Z,{editAccess:N,members:x,workspaceId:a.id,workspaceName:a.name,currentUser:i,roleOptions:_,handleInvite:e=>{let{email:t,roleId:n}=e;return j({email:t,workspaceId:a.id,roleId:n})},loading:h}),i&&(0,s.jsx)(MemberInviteModal,{open:g,editAccess:N,handleClose:roleOptions:_,workspace:a,members:x,user:i})]})}let Actions=e=>{let{handleInviteMember:t}=e;return(0,s.jsx)("button",{onClick:t,className:"duration-70 flex items-center justify-between rounded-md border border-zinc-900 bg-zinc-900 px-3 py-2 text-base font-medium text-white transition-all hover:bg-zinc-700 focus:border-zinc-500 focus:outline-none focus:ring-2 focus:ring-zinc-300",children:(0,s.jsx)("span",{className:"flex-1",children:"Invite member"})})};var M=n(86045),E=n(81291);function TeamPage(){return(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(E.Z,{title:"Team",includeSlug:!0}),(0,s.jsx)(M.Z,{children:(0,s.jsx)(SettingsMembers,{})})]})}TeamPage.getLayout=var O=TeamPage}},);
//# sourceMappingURL=members-e92d3733f0ec86ef.js.map