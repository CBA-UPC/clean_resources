(()=>{onst t=a={1027:"Sponsored Display DRA"},n={1:"Enabled",0:"NotEnabled","-1":"Unknown"},i=o=var s=r=/(\/b|\/s|\/l).*(node=)(\d{1,12})/,d=new Map,l=function(){if(!d.has(window.location.href)){var e=r.exec(window.location.href),t=e&&e[3]?e[3]:null;d.set(window.location.href,t)}return d.get(window.location.href)},c=function(e){var t=l();if(!e||!t)return null;var a=e.split(":");return a.splice(a.length-1,0,t),a.join(":")},m=function(e){var t=l();return t?"".concat(e,":").concat(t):null},p={wb:"ues",bb:"uet",af:"uet",cf:"uet",be:"uet",ld:"uex"},h=function(e){var t,a,n=e.latencyEvent,i=e.scope,o=e.placement,r=e.timestamp;u(n)&&(w(n,f(i),o.id,r),w(n,f(i),s(o.name),r),w(n,f(i),null!==(t=c(o.name))&&void 0!==t?t:void 0,r),w(n,f(i),null!==(a=m(o.id))&&void 0!==a?a:void 0,r))},u=w=function(e,t,a,n){void 0===n&&(n=new Date);var i=p[e];a&&"function"==typeof window[i]&&window[i](e,t+a,{wb:1},n)},f=v=g=function(e,t,a){if(void 0===a&&(a=1),y()){var n=function(e,t,a){t&&S("".concat(A(e),":").concat(t),a)};n(e,t.id,a),n(e,m(t.id),a),n(e,s(t.name),a),n(e,c(s(t.name)),a)}},b=function(e,t){void 0===t&&(t=1),y()&&S(A(e),t)},y=function(){var e;return"function"==typeof(null===(e=null===window||void 0===window?void 0:window.ue)||void 0===e?void 0:e.count)},S=function(e,t){var a;return null===(a=null===window||void 0===window?void 0:window.ue)||void 0===a?void 0:a.count(e,t)},I="adplacements",A=function(e){return e.startsWith(I)?e:"".concat(I,":").concat(e)},M=function(e,t){E("ERROR",e,t)},D=E=function(e,t,a){console.error(t,T(t,a)),b("safeFrameError"),window.ueLogError&&window.ueLogError(T(t,a),{logLevel:e,attribution:"APE-safeframe",message:k(t,a)+" | "})},T=function(e,t){return t instanceof Error?t:t?new Error(t):new Error(e)},k=function(e,t){return t instanceof Error?e+": "+t.message:e},_=function(e,t,a){if(window.csa)try{window.csa("Content",{element:e})("mark",t,null==a?void 0:a.getTime())}catch(n){M("Error with 'mark' CSA",n)}};class L{sendLatencyMetric({latencyMetricType:e,placementId:t,placementName:a,placementDivId:n,timestamp:i}){h({latencyEvent:e.csmKey,scope:e.csmMessage,placement:{id:t,name:a},timestamp:i}),_(document.getElementById(n),e.csaKey,i)}}const x=var F=function(e,t,a){if(""===t)throw new Error("Invalid queryParamKey input to addJSONQueryParamToURL: "+JSON.stringify({queryParamKey:t}));var n=new URL(e),i=n.searchParams.get(t),o=i||"{}",s=JSON.parse(o),r=Object.assign(s,a);return n.searchParams.set(t,JSON.stringify(r)),n.toString()};onst C="com.amazon.ads.cpp.",R=onst H=W=O=e=>e.length>1&&"%"===e.charAt(e.length-1),$=class B{constructor(e,t){this.weblabsWindow=e,this.prefix=t,this.isT1=()=>"t1"===this.weblabTreatment(),this.isC=()=>"c"===this.weblabTreatment(),this.weblabTreatment=()=>{var e,t,a;return null===(a=null===(t=null===(e=this.weblabsWindow)||void 0===e?void 0:e.renderingWeblabs)||void 0===t?void 0:t[this.prefix])||void 0===a?void 0:a.toLowerCase()}}}const j=e=>["mobile-auto-top-advertising-0","auto-top-advertising-0"].includes(e)&&new B(window,"ADPT_SF_SPARKLE_838607").isT1(),V=e=>j(e.slotName)?e.renderingId:e.placementName,U=["allow-scripts","allow-popups","allow-popups-to-escape-sandbox","allow-top-navigation-by-user-activation"].concat(["allow-same-origin"]),q=J=Y=()=>window.innerHeight||document.documentElement.clientHeight,K=X=e=>e.getBoundingClientRect().top-Y(),G=(e,t)=>({t:e.top,l:e.left,r:e.right,b:e.bottom,w:e.width,h:e.height,z:t}),Q=e=>{const t=e.getBoundingClientRect();return G(t,Number(window.getComputedStyle(e,null).zIndex))},Z=e=>{const t=ie(e);return{t:e.t,l:e.l,r:e.r,b:e.b,w:e.w,h:e.h,z:e.z,xiv:t.xiv,yiv:t.yiv,iv:t.iv}},ee=()=>{const e=window.screenY?window.screenY:window.screenTop,t=window.screenX?window.screenX:window.screenLeft,a=K(),n=Y();return{t:e,l:t,w:a,h:n,b:e+n,r:t+a}},te=ae=e=>{const t=function(e){const t=document.body.getBoundingClientRect();if(ne(t))return null;const a=Q(e),n=Y(),i=K(),o=Math.max(0,Math.min(t.left+i,a.r)-a.l),s=Math.max(0,Math.min(t.top+n,a.b)-a.t),r=o*s/(a.h*Math.min(a.w,i));return Number(Math.min(1,Math.max(0,r)).toFixed(2))}(e);return null==t?"unknown":t>=.5},ne=const ie=e=>{const t=K(),a=Y(),n=Math.max(0,de(e.t,e.b,a)),i=Math.max(0,de(e.l,e.r,t)),o=n*i,s=e.h*Math.min(e.w,t);return 0!==s||0!==o?{xiv:Number(Math.min(1,i/e.w).toFixed(2)),yiv:Number(Math.min(1,n/e.h).toFixed(2)),iv:Number(Math.min(1,Math.max(0,o/s)).toFixed(2))}:{xiv:0,yiv:0,iv:0}},oe=e=>{const t=e.getBoundingClientRect();return se(t)},se=e=>({t:e.top,l:e.left,r:K()-e.right,b:Y()-e.bottom,xs:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>K()?1:0,yx:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>Y()?1:0}),re=de=(e,t,a)=>{let n=0;return"visible"!==document.visibilityState?n:(n=e>0?a-e:t>0?Math.min(t,a):0,Math.min(n,t-e))},le=ce=me=pe="localstorage_impression",he=(e,t)=>{const a=document.createElement("img");return a.id=e,a.style.display="none",a.setAttribute("pixel-url",t),a},ue="localstorage:impression",we=var fe;fe=const ve="sfImpression",ge="LightAdImpression",be="viewablelatency",ye=Se=ye("bodyBegin","bb",ve),Ie=(ye("bodyBegin","bb",ge),ye("bodyEnd","be"),ye("clickToATF","af"),ye("criticalFeature","cf")),Ae=(ye("criticalFeature","cf",ve),ye("criticalFeature","cf",ge),ye("loaded","ld"),ye("loaded","ld",ve),ye("loaded","ld",ge),ye("viewablelatency:bodyBegin","bb",be),ye("viewablelatency:loaded","ld",be)),Me=e=>null==e?void 0:e.replace("criticalFeature","").replace("windowOnLoad","").replace("spATFEvent","").replace("r2OnLoad","").replace("aboveTheFold","").replace("af",""),De=Ee=Te=ke=Pe=_e=var Le=function(e){if(window.csa)try{window.csa("Events",{producerId:"adplacements"})("setEntity",{adCreativeMetaData:e})}catch(t){M("Error with 'setEntity' CSA",t)}},xe=function(e,t,a){if(void 0===a&&(a=1),window.csa)try{window.csa("Events",{producerId:"adplacements"})("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e+":"+t.name+":"+t.id,metricValue:a},{ent:"all"})}catch(n){M("Error with 'logCsaEvent' CSA",n)}},Fe=function(e,t){if(void 0===t&&(t=1),window.csa)try{window.csa("Events",{producerId:"adplacements"})("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e,metricValue:t},{ent:"all"})}catch(a){M("Error with 'incrementCounter' CSA",a)}};const Ne=Ce=Re=ze=He=We=Oe=$e=Be=je=Ve=const Ue=(e,t)=>{for(const a of Object.keys(t))e.style[a]=t[a];return e},qe=Je=Ye=Ke=(e,t)=>document.getElementById(t[e].placementDivId),Xe=Ge=Qe=Ze=et="expanded-feedback-label",tt="expanded-safeframe",at="expandable-ads-styles",nt=it=ot=st=rt=dt=lt=ct=mt=class pt{async addSponsoredLabelWithFeedbackLink(e,t){e.appendChildTo(this.parentHtmlId,this);const a=await t.getSponsoredLabelAndFeedbackLink(this.urlPathAndParameter);return(null==a?void 0:a.isOk())?(e.updateElement(this.getHtmlId(),a),Promise.resolve()):Promise.reject()}getHtmlId(){return mt(this.parentHtmlId)}ass ht{nstructor(e){this.parentHtmlId=e}}class ut{createSponsoredLabelWithFeedbackLink(e,t){e.exists(this.feedbackHtmlPort)||(t.request(),e.addSponsoredLabelWithFeedbackLink(this.feedbackHtmlPort,this.feedbackApiPort).then((()=>{t.success(),e.isHidden()||t.labelRenderedHost()})).catch(())}abelRendered(e){e.labelRenderedCreative()}removeSponsoredLabelAndFeedbackLink(e){var t;try{null===(t=document.getElementById(mt(e)))||void 0===t||t.remove()}catch(a){M("Unable to remove AdFeedback Div",a)}}onst wt=ft="adfeedback_request",vt="adfeedback_success",gt="adfeedback_error",bt="adfeedback_sponsoredlabelrendered_creative",yt="adfeedback_sponsoredlabelrendered_host",St="adfeedback:request",It="adfeedback:success",At="adfeedback:error",Mt="adfeedback:sponsoredlabelrendered:creative",Dt="adfeedback:sponsoredlabelrendered:host",Et="adfeedback:sponsoredlabelrendered",Tt="adfeedback:transparencyinfo:missing";class kt{request(){g(St,this.placement),b(St),xe(ft,this.placement)}success(){g(It,this.placement),b(It),xe(vt,this.placement)}error(){g(At,this.placement),xe(gt,this.placement)}labelRenderedCreative(){g(Mt,this.placement),b(Et),xe(bt,this.placement)}labelRenderedHost(){g(Dt,this.placement),b(Et),xe(yt,this.placement)}transparencyInfoMissing(){g(Tt,this.placement),b(Tt)}constructor(e){this.placement=e}}class Pt{onstructor(e,t,a){this.status=e,this.html=t,this.script=a}}class _t{async getSponsoredLabelAndFeedbackLink(e){return fetch(this.windowRepo.origin()+e).then((async e=>{if(e.ok){const t=await e.json();return new Pt(t.status,t.html,t.script)}return Promise.reject(null)})).catch(()}constructor(e){this.windowRepo=e}}class Lt{appendChildTo(e,t){var a,n;function i(e){const t=document.createElement("div");return t.setAttribute("id",e.getHtmlId()),a(t,e.feedbackStyle),t.append(function(e){const t=document.createElement("div");return t.innerHTML=e.labelText,a(t,e.labelStyle),t}(e)),t;1===t.position?null===(a=xt(e))||void 0===a||a.prepend(i(t)):0===t.position&&(null===(n=xt(e))||void 0===n||n.append(i(t)))}updateElement(e,t){const a=xt(e);a&&(a.innerHTML=t.html,function(e,t){const a=e);a.innerHTML=t.script}(a,t))}clickChildLink(e){const t=document.getElementById(e.getHtmlId());var a;if(t)for(const n of t.children)if("A"===(a=n).tagName||"DIV"===a.tagName)return void n.click()}const xt=e=>document.getElementById(e),Ft={code:"BE",hostname:"www.amazon.com.be",name:"Belgium"},Nt={code:"FR",hostname:"www.amazon.fr",name:"France"},Ct={code:"DE",hostname:"www.amazon.de",name:"Germany"},Rt={code:"IT",hostname:"www.amazon.it",name:"Italy"},zt={code:"NL",hostname:"www.amazon.nl",name:"Netherlands"},Ht={code:"PL",hostname:"www.amazon.pl",name:"Poland"},Wt={code:"ES",hostname:"www.amazon.es",name:"Spain"},Ot={code:"SE",hostname:"www.amazon.se",name:"Sweden"},$t=Bt=e=>{return!($t(Ft)||$t(Nt)||$t(Ct)||$t(Rt)||$t(zt)||$t(Ht)||$t(Wt)||$t(Ot))||!jt(null===(n=null===(a=null===(t=null==e?void 0:e.url)||void 0===t?void 0:t.parameters)||void 0===a?void 0:a.adPlacementMetaData)||void 0===n?void 0:n.slotName)&&(null===(r=null===(s=null===(o=null===(i=null==e?void 0:e.url)||void 0===i?void 0:i.parameters)||void 0===o?void 0:o.adCreativeMetaData)||void 0===s?void 0:s.adCreativeDetails)||void 0===r?void 0:r.length)>0&&(null===(c=null===(l=null===(d=null==e?void 0:e.url)||void 0===d?void 0:d.parameters)||void 0===l?void 0:l.adCreativeMetaData)||void 0===c?void 0:c.adCreativeDetails.every((e=>function(e){var t,a,n;return e.version&&!jt(e.advertiserIdNS)&&void 0!==(null===(t=e.selectionSignals)||void 0===t?void 0:t.context)&&void 0!==(null===(a=e.selectionSignals)||void 0===a?void 0:a.location)&&!jt(null===(n=e.selectionSignals)||void 0===n?void 0:n.pastActivity)}(e))));var t,a,n,i,o,s,r,d,l,c},jt=e=>!e||e.length<=0,Vt=()=>new Ut(new ut(new Lt,new _t({origin:)));class Ut{addSponsoredLabel({parentHtmlId:e,placement:t,feedback:a}){return Bt(a)?(a.hidden&&(Object.assign(a.style,{display:"none"}),Object.assign(a.label.style,{display:"none"})),this.feedbackService.createSponsoredLabelWithFeedbackLink(function(e,t){return new pt(e,t.style,t.label.text,t.label.style,"TOP"===t.position?1:0,qt(t.url.path,encodeURIComponent(JSON.stringify(t.url.parameters))),t.hidden)}(e,a),wt(t)),!0):(this.feedbackService.logTransparencyInfoMissing(wt(t)),M("Transparency Information missing"),!1)}abelRendered({placement:e}){this.feedbackService.labelRendered(wt(e))}onst qt=Jt=Yt=e=>{Vt().openModal(e.options.adPlacementMetaData.adElementId)},Kt=Xt=Gt={};et Zt=null;st na=ia=var oa=function(e,t,a){sa()&&(ra(da(e,t.id,a)),ra(da(e,s(t.name),a)))},sa=ra=da=function(e,t,a){return"".concat(e,":").concat(t).concat(la(a))},la=const ca=e=>{const t=document.getElementById("ape_"+e+"_userData"),a=null==t?void 0:t.getAttribute("data-user-data");return{rawCookies:document.cookie,aPageStart:window.aPageStart,adStartTime:(new Date).getTime(),userDataAttr:a}},ma=pa="data-arid",ha=ua=class wa{constructor(t,a){this.hms=t,this.hc=a,this.changeSize=this.sendAdBarTrace=this.startPixelTracking=this.logAPIInvocation=this.resizeSafeFrameAd=this.setResizePlacementStyle=this.logError=this.logCsaEvent=this.addCsaEntity=this.sendLatencyMetric=this.customMessage=this.fireViewableLatencyMetrics=this.countMetric=this.addCsmTag=this.requestVideoAutoplay=this.releaseVideoAutoplay=this.haveVideoAutoplayPermission=async e=>{aa(e)},this.feedbackLabelRendered=e=>{Jt(e)},this.feedbackOpenModal=e=>{Yt(e)},this.handleFallbackExperience=this.expandAdSlot=this.expandAdSlotWithOverlap=this.resetSlotSize=this.triggerEventInIframe=this.registerCODFallback=this.clearCODFallback=this.safeFrameReady=this.saveAdDetailsForAdReporter=}const fa=va=ga=ba=ya=Sa=onst Aa="adload:start",Ma="adload:delayloadcallback",Da="adload:iframecreated",Ea="adload_delayload",Ta="adload_iframecreated",ka={1:"abpstatus:enabled",0:"abpstatus:notenabled","-1":"abpstatus:unknown"},Pa=new Map([["1","abpstatus_enabled"],["0","abpstatus_notenabled"],["-1","abpstatus_unknown"]]);onst La=xa="div#ape_Detail_desktop-detail-ilm_desktop_placement",Fa="nav-ewc-persistent-hover",Na=Ca=Ra=za=Ha=onst Oa=$a=["ape_events_320x50-mobile-wrapper_mweb_placement","ape_events_320x50-mobile-wrapper_mshop_placement"],Ba=ja=Va=Ua=qa=e=>null!==e.closest('div.hidden[id^="hidden-slot-"]'),Ja=Ya=CSS.escape("text/x-dacx-safeframe");onst Xa=Ga=Qa=Za=en=tn=an=nn=on=sn="custommessage:notallowlisted";st cn=var mn;null===(mn=null===performance||void 0===performance?void 0:performance.mark)||void 0===mn||mn.call(performance,"SafeFrame: SafeFrame: Starting DAsf");const pn=new dn,hn=new rn(null==pn?void 0:pn.adMap),un=new {safeFrameVideoPath:"/images/S/apesafeframe/ape/sf/desktop/sfVideo-1.50.2ce07e89.html",allowlistedSafeFrameVideoPath:"/images/S/apesafeframe/ape/sf/whitelisted/desktop/sfVideo-1.50.2ce07e89.html",safeFramePath:"/images/S/apesafeframe/ape/sf/desktop/sf-1.50.547193bd.html",allowlistedSafeFramePath:"/images/S/apesafeframe/ape/sf/whitelisted/desktop/sf-1.50.547193bd.html"},pn,hn);t((,M,"Error initializing safeFrame")()})();
//# sourceMappingURL=DAsf-1.50.5b68e360.js.map
