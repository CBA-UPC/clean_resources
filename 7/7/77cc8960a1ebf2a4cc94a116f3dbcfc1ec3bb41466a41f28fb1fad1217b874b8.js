"use strict";(this.__LOADABLE_LOADED_CHUNKS__=this.__LOADABLE_LOADED_CHUNKS__||[]).push([[235],{63189:(e,t,r)=>{r.d(t,{Z:()=>m});var a=r(38241),s=r(35272),o=r(60655),i=r(55553),n=r(96832),l=r(56494),d=r(34853);onst c=()=>(0,d.tZ)("div",{width:"1.6rem",children:(0,d.tZ)("svg",{fill:"none",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg",children:(0,d.tZ)("path",{d:"M7.00065 0.333008C3.32065 0.333008 0.333984 3.31967 0.333984 6.99967C0.333984 10.6797 3.32065 13.6663 7.00065 13.6663C10.6807 13.6663 13.6673 10.6797 13.6673 6.99967C13.6673 3.31967 10.6807 0.333008 7.00065 0.333008ZM7.00065 7.66634C6.63398 7.66634 6.33398 7.36634 6.33398 6.99967V4.33301C6.33398 3.96634 6.63398 3.66634 7.00065 3.66634C7.36732 3.66634 7.66732 3.96634 7.66732 4.33301V6.99967C7.66732 7.36634 7.36732 7.66634 7.00065 7.66634ZM7.66732 9.66634C7.66732 10.0345 7.36884 10.333 7.00065 10.333C6.63246 10.333 6.33398 10.0345 6.33398 9.66634C6.33398 9.29815 6.63246 8.99967 7.00065 8.99967C7.36884 8.99967 7.66732 9.29815 7.66732 9.66634Z",fill:"#A82700"})})});class p extends n.Component{constructor(...e){super(...e),this.state={error:!1,value:this.props.value},this.onChange=e=>{const t=u({},e);this.props.onChange(t);const{value:r}=t.target;this.setState({value:r}),this.validate(r)&&this.props.onValidated&&this.props.onValidated(r,e)},this.onFocus=this.onBlur=e=>{const t=u({},e);this.props.onBlur(t);const r=this.state.value;this.setState({started:!0},(()=>{this.validate(r)&&this.props.onValidated&&this.props.onValidated(r,t)}))}}validate(e){let t=!1;return this.props.validateFn&&(this.state.started||this.props.persistError)&&(t=this.props.validateFn(e),this.setState((()=>({error:!t})))),t}UNSAFE_componentWillReceivePropsender(){const e=[""].concat(this.props.classes);return this.state.error&&e.push("error"),(0,d.BX)("section",{className:e.join(" "),css:(0,a.iv)({marginBottom:this.props.collapseBottomMargin?"0.4rem    ":"1.5rem"},"",""),children:[(0,d.tZ)("label",{css:this.props.labelStyles,htmlFor:this.props.name,children:this.props.title}),(0,d.tZ)("input",{"aria-labelledby":this.props.ariaLabeledBy,autoComplete:this.props.autocomplete,autoFocus:this.props.autoFocus,className:this.props.className,"data-test":this.props.dataTest,disabled:this.props.disabled,max:this.props.max,min:this.props.min,name:this.props.name,onBlur:this.onBlur,onChange:this.onChange,onFocus:this.onFocus,placeholder:this.props.placeholder,style:this.props.inputStyles,tabIndex:this.props.tabIndex,type:this.props.type||"text",value:this.state.value}),(0,d.BX)("div",{children:[(0,d.BX)(o.Z,{"aria-hidden":!0,"aria-labelledby":"spoken",visible:this.state.error&&!(0,l.fp)(this.props.errorMessage),children:[(0,d.tZ)(c,{}),this.props.errorMessage]}),this.props.ariaErrorMessage?(0,d.tZ)(i.O,{"aria-live":"assertive",id:"spoken",children:this.props.ariaErrorMessage}):null]})]})}}p.defaultProps={ariaLabeledBy:void 0,ariaErrorMessage:void 0,autocomplete:void 0,autoFocus:void 0,classes:[],collapseBottomMargin:!1,disabled:!1,errorMessage:"",inputStyles:{},labelStyles:{},max:void 0,min:void 0,name:void 0,onBlur:s.Z,onChange:s.Z,onValidated:void 0,persistError:!1,placeholder:"",startOnFocus:!1,tabIndex:void 0,title:"",type:"text",value:void 0};const m=p},60655:(e,t,r)=>{r.d(t,{Z:()=>a});const a=(0,r(46255).Z)("div",{target:"ezxqs5i0"})((({theme:e,visible:t=!1})=>({alignItems:"center",justifyContent:"flex-start",display:t?"flex":"none",flexDirection:"row",color:"#A82700",fontSize:e.fonts.size[12],lineHeight:e.fonts.lineHeight[16],margin:"0.4rem 0 0.4rem","& svg":{marginRight:"0.4rem"}})),"")},78602:(e,t,r)=>{r.r(t),r.d(t,{default:()=>I});var a=r(38491),s=r(55553),o=r(61711),i=r(70515),n=r(63189),l=r(46423),d=r(87805),u=r(72798),c=r(90758),p=r(75628),m=r(11129),F=r(63992),h=r(71130),g=r(96832),v=r(62156);const C=e=>t=>(null==t?void 0:t.length)>=e,b=C(4),x=C(6),w=y=({newEmail:e,newEmailConf:t,newPass:r,setIsFormValid:a})=>{a(x(r)&&b(e.trim())&&(0,v.Z)(e)&&w(e,t))};var f=r(34853),Z={name:"akdqam",styles:"margin-top:1rem"},D={name:"eivff4",styles:"display:none"},E={name:"eivff4",styles:"display:none"},S={name:"1ugxkr5",styles:"display:block;margin-top:3rem"};const k=({close:e,onSuccess:t,saveLocalEmail:r})=>{const C=(0,c.Z)(),k=(0,h.useSelector)(p.h_),A=(0,h.useSelector)(m.v4),B=(0,h.useSelector)(m.MQ),[P,z]=(0,g.useState)(null),[I,M]=(0,g.useState)(!1),[O,_]=(0,g.useState)(""),[V,L]=(0,g.useState)(""),[T,R]=(0,g.useState)(""),N=e=>$=e=>({color:e.colors.gray.medium,display:"block",fontSize:"13px",letterSpacing:"2px",marginBottom:"1rem",textTransform:"uppercase"});return(0,f.BX)("div",{children:[(0,f.tZ)(i.Z,{css:e=>({fontSize:e.fonts.size.medium,justifyContent:"center",margin:"0 0 1rem"}),children:C("Update Account")}),(0,f.tZ)(s.Z,{"data-test":"add-email-password-error",visible:!!P,children:P?(0,a.Z)(P.toString()):""}),(0,f.BX)("form",{css:Z,method:"POST",onSubmit:a=>{const s=O.trim();a.preventDefault(),z(""),(0,u.Z)((0,F.Rd)({ampUrl:k,username:s,password:T,profileId:A,sessionId:B})).then((({data:a})=>{var o,i;a.errors&&(z((null==(o=a.errors)?void 0:o.description)||(null==(i=a.errors[0])?void 0:i.description)||C("An unknown error occurred. Please try again later.")),M(!1),l.ZP.error([l.Ke.AUTH,l.Ke.FORM],a.errors,{},new Error(a.errors))),r(s),e(),t()}),(({response:{data:{errors:e=[]}}})=>{var t;z((null==e?void 0:e.description)||(null==(t=e[0])?void 0:t.description)||C("An unknown error occurred. Please try again later.")),M(!1),l.ZP.error([l.Ke.AUTH,l.Ke.FORM],e,{},Error(e))}))},children:[(0,f.tZ)("input",{css:D,name:"fakeusernameremembered",type:"text"}),(0,f.tZ)("input",{css:E,name:"fakepasswordremembered",type:"password"}),(0,f.tZ)(n.Z,{dataTest:"adding-email-input",errorMessage:C("Please enter a valid email"),labelStyles:$,name:"newEmail",onChange:N(_),tabIndex:1,title:C("New Email"),type:"text",validateFn:()=>(({newEmail:e,newEmailConf:t,newPass:r,setIsFormValid:a})=>(y({newEmail:e,newEmailConf:t,newPass:r,setIsFormValid:a}),b(e.trim())&&(0,v.Z)(e)))({newEmail:O,newEmailConf:V,newPass:T,setIsFormValid:M}),value:O}),(0,f.tZ)(n.Z,{dataTest:"adding-confirmemail-input",errorMessage:C("Please enter the same email again"),labelStyles:$,name:"newEmailConfirm",onChange:N(L),tabIndex:2,title:C("Confirm New Email"),type:"text",validateFn:()=>(({newEmail:e,newEmailConf:t,newPass:r,setIsFormValid:a})=>(y({newEmail:e,newEmailConf:t,newPass:r,setIsFormValid:a}),w(e,t)))({newEmail:O,newEmailConf:V,newPass:T,setIsFormValid:M}),value:V}),(0,f.tZ)(n.Z,{dataTest:"adding-password-input",errorMessage:C("Password must be 6 - 32 characters"),labelStyles:$,name:"userPassword",onChange:N(R),tabIndex:3,title:C("New Password (6-32 Characters)"),type:"password",validateFn:()=>(({newEmail:e,newEmailConf:t,newPass:r,setIsFormValid:a})=>(y({newEmail:e,newEmailConf:t,newPass:r,setIsFormValid:a}),x(r)))({newEmail:O,newEmailConf:V,newPass:T,setIsFormValid:M}),value:T}),(0,f.BX)("div",{css:S,children:[(0,f.tZ)(o.Z,{"aria-label":C("Confirm"),"data-test":"add-email-password-confirm-button",disabled:!I,isBlock:!0,marginBottom:!0,styleType:"cta",type:"submit",children:C("Confirm")}),(0,f.tZ)(d.Z,{"aria-label":C("Cancel"),isBlock:!0,onClick:children:C("Cancel")})]})]})]})};var A=r(29929),B=r(24586),P=r(40887),z={name:"2cobu1",styles:"width:unset;text-align:left"};const I=({modal:e,close:t})=>{const r=(0,h.useDispatch)();return(0,f.tZ)(e,{children:(0,f.tZ)(e.Container,{children:(0,f.BX)(e.Content,{css:z,children:[(0,f.tZ)(k,{close:t,onSuccess:saveLocalEmail:e=>{r((0,P.MJ)("email",e)),r((0,P.MJ)("name",e))}}),(0,f.tZ)(e.Close,{})]})})})}},55553:(e,t,r)=>{r.d(t,{O:()=>o,Z:()=>i});var a=r(46255);const s=(0,a.Z)("p",{target:"e188ztcp1"})((({theme:e,visible:t=!1})=>({background:e.colors.black.primary,borderRadius:"0.3rem",color:e.colors.white.primary,display:"block",fontSize:"1.3rem",fontWeight:"bold",height:t?"initial":"0",lineHeight:"1.755rem",margin:t?`${e.dimensions.gutter} 0 1rem 0`:0,padding:t?"1.4rem 1rem":"0",position:"relative",textAlign:"center",transition:"all 0.2s",width:"100%"})),""),o=(0,a.Z)("p",{target:"e188ztcp0"})((,""),i=s},87805:(e,t,r)=>{r.d(t,{Z:()=>l});var a=r(46255),s=r(51588),o=r(15001),i=r(34737),n=r(28744);const l=(0,a.Z)(n.Z,{target:"e688iol0"})((({center:e=!1,customStyles:t={},floatRight:r=!1,marginLeft:a="0",marginRight:n="0",marginTop:l="0",isBlock:d=!1,styleType:u="dark",theme:c})=>{const p={dark:{backgroundColorDisabled:c.colors.gray[200],borderColor:c.colors.gray[500],hoverColor:c.colors.black.dark,hoverOpacity:.15,textColor:c.colors.gray[500],textColorDisabled:c.colors.gray[500]},light:{backgroundColorDisabled:c.colors.gray[300],borderColor:c.colors.white.primary,hoverColor:c.colors.white.primary,hoverOpacity:.3,textColor:c.colors.white.primary,textColorDisabled:c.colors.gray[500]}},m=(0,s.Z)({},p[u],t),F=(0,i.Z)(m.hoverColor,m.hoverOpacity);return{backgroundColor:c.colors.transparent.primary,border:`1px solid ${m.borderColor}`,float:r?"right":"none",margin:e?"auto":0,marginLeft:a,marginRight:n,marginTop:l,color:m.textColor,width:d?"100%":"auto","i, svg":{marginRight:"0.5rem"},"&:not(:disabled):hover":{[o.Z.toString()]:{backgroundImage:`radial-gradient(circle, ${c.colors.transparent.primary} 1%, ${F} 1%)`,backgroundColor:F,backgroundPosition:"center",backgroundSize:"15000%"}},"&:not(:disabled):active":{[o.Z.toString()]:{backgroundColor:"transparent",backgroundSize:"100%",transition:"background 0s"}},"&:disabled":{backgroundColor:m.backgroundColorDisabled,border:"none",color:m.textColorDisabled}}}),"")},38491:(e,t,r)=>{function a(e){return`${e[0].toUpperCase()}${e.slice(1)}`}r.d(t,{Z:()=>a})},62156:(e,t,r)=>{r.d(t,{Z:);const a=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i;function s(e){const t=e.trim();return!!t&&a.test(t)}}}]);
//# sourceMappingURL=components-AddEmailAndPasswordModal.www.js.map