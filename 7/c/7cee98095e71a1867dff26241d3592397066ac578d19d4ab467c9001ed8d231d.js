"use strict";(self.d3WebPackJsonp=self.d3WebPackJsonp||[]).push([[1670,2439,1933,4491],{42439:function(t,e,n){var i=n(64836),a=n(18698);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o,s=i(n(56690)),r=i(n(89728)),l=i(n(61655)),d=i(n(94993)),c=i(n(73808)),u=function(t,e){if(!e&&t&&t.__esModule)return t;if(null===t||"object"!==a(t)&&"function"!=typeof t)return{default:t};var n=p(e);if(n&&n.has(t))return n.get(t);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if("default"!==s&&Object.prototype.hasOwnProperty.call(t,s)){var r=o?Object.getOwnPropertyDescriptor(t,s):null;r&&(r.get||r.set)?Object.defineProperty(i,s,r):i[s]=t[s]}i.default=t,n&&n.set(t,i);return i}(n(67294));function p(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(p=function(t){return t?n:e})(t)}function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,c.default)(t);if(e){var a=(0,c.default)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,d.default)(this,n)}}var f=(0,n(77062).observer)(o=function(t){(0,l.default)(n,t);var e=m(n);eturn(0,r.default)(n,[{key:"componentDidMount",value:function(){window.deltatre.utils.code.checkIsNil(window.deltatre.dfpLoaderInstance)||window.deltatre.dfpLoaderInstance.init()}},{key:"getCustomTargets",value:function(){return"environment="+DfpConfiguration.DfpEnvironment+"|language_version="+DfpConfiguration.DfpLanguage+"|commercial="+DfpConfiguration.DfpCommercial+(this.props.sponsor?"|sponsor=".concat(this.props.sponsor):"")}},{key:"render",value:function(){return this.advSize=this.props.advsize||"",this.advSizeName=this.props.advsizename||"",this.advType=this.props.advtype||"",this.advUnitTag=this.props.advunittag||DfpConfiguration.DfpNetworkId+"/"+DfpConfiguration.DfpBaseUnitTag,this.customTarget=this.getCustomTargets(),this.showLabelIdOnRenderEnded=this.props.showlabelidonrenderended||"",this.isNative=this.props.isnative||!1,this.nativeType=this.props.nativetype||"",this.advCallback=this.props.advcallback||"",this.advSlot=this.props.advslot||"",this.advSlotId=this.props.advslotid||"dfp-ad-"+window.deltatre.utils.code.generateGuid()+"-",this.dataOptionsAdv={DFPSize:this.advSize,DFPSizeName:this.advSizeName,DFPType:this.advType,unitTag:this.advUnitTag,customTarget:this.customTarget,showLabelIdOnRenderEnded:this.showLabelIdOnRenderEnded,isNative:this.isNative,nativeType:this.nativeType,advCallback:this.advCallback,DFPSlot:this.advSlot},u.default.createElement("div",{id:this.advSlotId,className:"js-advert-nolazy js-advert-box ".concat(this.props.className),"data-options":JSON.stringify(this.dataOptionsAdv)})}}]),n}(u.Component))||o;e.default=f},81670:function(t,e,n){var i=n(67294),a=n(64836),o=n(18698);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=a(n(56690)),l=a(n(89728)),d=a(n(66115)),c=a(n(61655)),u=a(n(94993)),p=a(n(73808)),m=n(67294),f=n(77062),h=a(n(11933)),y=a(n(42439)),w=I(n(8418)),v=I(n(75701)),g=a(n(74491)),P=a(n(89231));function b(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,n=new WeakMap;return(b=function(t){return t?n:e})(t)}unction _(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=(0,p.default)(t);if(e){var a=(0,p.default)(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return(0,u.default)(this,n)}}v.default.use([v.Scrollbar,v.Mousewheel]);var L=(0,f.observer)(s=function(t){(0,c.default)(n,t);var e=_(n);function n(t){var i;return(0,r.default)(this,n),(i=e.call(this,t)).initPlaylistLazyLoading=function(){var t=(0,P.default)("#".concat(i.ownProps.mountId)).closest(".b2p-video--inner").find(".-playlist").find("picture.lazy");window.deltatre.utils.images.loadLazyImages(null,t)},i.setCurrentItem=function(){var t=window.deltatre.playLists.getPlaylistStorageIndex(window.deltatre.playLists.nextIndexStorageKey),e=window.deltatre.playLists.getPlaylistStorageIndex(window.deltatre.playLists.prevIndexStorageKey);window.deltatre.utils.code.checkIsNil(t)&&0!==t||isNaN(t)?isNaN(i.startingIndex)?(i.startingIndex=0,t=0):t=i.startingIndex:i.startingIndex=t,window.deltatre.scrollableList.init(t),window.deltatre.playLists.setPlayListCurrentClasses(t,e)},i.getFallbackData=i.setFallBackdata=function(t){if(window.deltatre.utils.code.checkIsNil(t)||t.length>0){i.disableCurrentItemClasses=!0;var e=window.deltatre.recommendationEngineConfig,n=[],a=e.getAjaxPromise(e.buildApiUrlGetItemByEntityId(e.itemIdPrefix[i.ownProps.itemtype],i.ownProps.itemid),1,e.itemIdPrefix[i.ownProps.itemtype].replace("-",""),i.pushDataToMainList);n.push(a),Promise.all(n).then((function(){t.map((function(t){i.addMissingPlaylistItem(t),i.mainList.push(t)})),i.mainList=i.removeDuplicates(i.mainList,"_entityId"),i.buildPlayListItem()}))}},i.setCustomPlaylist=function(t){(window.deltatre.utils.code.checkIsNil(t)||t.length>0)&&(i.disableCurrentItemClasses=!0,i.mainList=t,i.buildPlayListItem())},i.mapItem=function(t){for(var e in t)if(t.hasOwnProperty(e)){var n=window.deltatre.utils.code.lowerFirst(e);"_entityId"===e&&(n="entityId"),t[n]=t[e],e!==n&&delete t[e]}return t},i.ownProps=w.checkProps(i.props),i.translations={},i.translations.playlist=w.findAndSetInObject(i.ownProps.translations,"playlist_title"),i.translations.items=w.findAndSetInObject(i.ownProps.translations,"items_label"),i.translations.originals_episode_plural=w.findAndSetInObject(i.ownProps.translations,"originals_episode_plural"),i.translations.nowplaying=w.findAndSetInObject(i.ownProps.translations,"now_playing"),i.translations.authenticated_content_label=w.findAndSetInObject(i.ownProps.translations,"authenticated_content_label"),i.translations.originals_season=w.findAndSetInObject(i.ownProps.translations,"originals_season"),i.translations.episode_number=w.findAndSetInObject(i.ownProps.translations,"episode_number"),i.mainList=[],i.playlistItem=[],i.state={mainList:[],playlistItem:[],isRtl:!1},i.title=i.translations.playlist,i.itemsTitle=i.translations.items,i.isOriginal=window.deltatre.utils.code.setBooleanFromString(i.ownProps.isoriginal),i.disableRecommendation=window.deltatre.utils.code.setBooleanFromString(i.ownProps.disablerecommendation),i.startingIndex=i.ownProps.startingindex?parseInt(i.ownProps.startingindex,10):0,i.prevIndex=null,i.nextIndex=null,window.deltatre.utils.code.checkIsNil(i.ownProps.seasonnumber)||(i.title="".concat(i.translations.originals_season," ").concat(i.ownProps.seasonnumber)),i.isOriginal&&(i.itemsTitle=i.translations.originals_episode_plural),i.fallbackUrl="/api/v1/see-also/vod/latest/",i.customplaylist=i.ownProps.customplaylist,i.disableCurrentItemClasses=!1,i.recommendation_id="n/a",i.recommendation_type="n/a",i.recommendation_trace="n/a",i.exp_id="n/a",i.exp_var="n/a",i.setList=i.setList.bind((0,d.default)(i)),i.buildPlayListItem=i.buildPlayListItem.bind((0,d.default)(i)),i.formMainList=i.formMainList.bind((0,d.default)(i)),i.pushDataToMainList=i.pushDataToMainList.bind((0,d.default)(i)),i.initPlaylistLazyLoading=i.initPlaylistLazyLoading.bind((0,d.default)(i)),i.advSize=i.ownProps.advsize||"[300,100]",i.advSizeName=i.ownProps.advsizeName||"small|small|small",i.advPosition=i.ownProps.advposition&&i.ownProps.advposition-1||"",i.store=g.default,i.store.videoIndex=i.startingIndex,i.isFromRecommendation=!1,i}return(0,l.default)(n,[{key:"componentWillMount",value:function(){var t=this;window.localStorage.removeItem(window.deltatre.playLists.prevIndexStorageKey),window.localStorage.removeItem(window.deltatre.playLists.nextIndexStorageKey),w.getLanguageFromHtml().toUpperCase().indexOf("AR")>-1&&this.setState({isRtl:!0}),window.deltatre.utils.code.checkIsNil(this.customplaylist)||0===this.customplaylist.length?this.disableRecommendation?this.getFallbackData():(this.isFromRecommendation=!0,window.deltatre.recommendationEngine.getRecommendations(this.ownProps.uxreference,this.ownProps.itemid,this.ownProps.timeout,this.setList,this.getFallbackData).catch((function(e){console.error(e||e.statusText),t.getFallbackData()}))):this.setCustomPlaylist(this.customplaylist)}},{key:"componentDidMount",value:function(){var t=this,e=this.startingIndex,n=this.startingIndex-1;n<0&&(n=0),window.deltatre.playLists.setPlaylistStorageIndex(window.deltatre.playLists.prevIndexStorageKey,n),window.deltatre.playLists.setPlaylistStorageIndex(window.deltatre.playLists.nextIndexStorageKey,e),window.deltatre.scrollableList.init(this.startingIndex),this.initPlaylistLazyLoading(),document.addEventListener("playlist-playing",(),document.addEventListener("playlist-update-current-video",()}},{key:"componentDidUpdate",value:,{key:"buildPlayListItem",value:function(){var t=this;this.mainList&&0!==this.mainList.length&&(this.playlistItem=this.mainList.slice(0,this.mainList.length).map((function(e,n){e=t.mapItem(e);var a=t.mainList[n].thumbnail,o=a?a.TemplateUrl:t.mainList[n].imageTemplate,s=t.mainList[n].url;return"playlist"===t.ownProps.itemtypecarousel&&(s=s.concat("?uxreference=".concat(t.ownProps.uxreference))),t.addMissingPlaylistItem(e),i.createElement(h.default,{key:e.slug,url:s,index:n,current:t.store.playing&&n===t.startingIndex,imagetemplate:o,rooflineprimary:t.mainList[n].roofline.Primary||"",rooflinesecondary:t.mainList[n].roofline.Secondary||"",linkroofsecondary:t.mainList[n].roofline.LinkSecondary||"",linkroofprimary:t.mainList[n].roofline.LinkPrimary||"",title:t.mainList[n].title,nowplaying:t.translations.nowplaying,entityid:t.mainList[n].entityId,publicationChannels:e.publicationChannels,authenticatedcontenttranslation:t.translations.authenticated_content_label,isoriginal:t.isOriginal,translations:t.translations,episodenumber:t.mainList[n].episodeNumber,recommendation_id:t.recommendation_id,recommendation_type:t.recommendation_type,recommendation_trace:t.recommendation_trace,exp_id:t.exp_id,exp_var:t.exp_var,position:n,frontend_position:t.ownProps.uxreference,tags:e.tags,slug:e.slug,maxDesc:t.ownProps.maxDesc,switchInplace:t.ownProps.switchInplace,apiUrl:t.ownProps.apiUrl,duration:t.ownProps.showDuration?e.duration:null,isFromRecommendation:t.isFromRecommendation,entityType:e.entityCode||"vod"})})),this.advPosition&&(0,P.default)(document).width()>=this.breakpointMaxWidth&&this.addAdvInPlaylist(),this.setState({mainList:this.mainList,playlistItem:this.playlistItem}))}},{key:"removeDuplicates",value:,{key:"formMainList",value:function(){this.mainList&&0!==this.mainList.length?(this.mainList=this.removeDuplicates(this.mainList,"_entityId"),this.mainList&&1===this.mainList.length?window.deltatre.http.getData(this.fallbackUrl,this.setFallBackdata):this.buildPlayListItem()):window.deltatre.http.getData(this.fallbackUrl,this.setFallBackdata)}},{key:"pushDataToMainList",value:function(t,e,n){window.deltatre.utils.code.checkIsNil(t)||window.deltatre.utils.code.checkIsNil(t.StreamingUrl)||""===t.StreamingUrl||(e&&(t.Position=e),n&&(t.ItemType=n),this.mainList.push(t))}},{key:"addMissingPlaylistItem",value:function(t){t.src=t.StreamingUrl||t.streamingUrl,t.additionalOptions={type:t.Type||t.type},t.metaData={key:t.Slug||t.slug,tags:t.Tags||t.tags,roofline:t.Roofline||t.roofline};var e=function(){var e,n=window.deltatre.d3vp.d3vpCore.adaptedPlayers[0].playlist,i=null!==(e=t.slug)&&void 0!==e?e:t.Slug;n.find((function(t){return t.slug===i.toLowerCase()||t.Slug===i.toLowerCase()}))||n.push(t)};!window.deltatre.d3vp.d3vpCore.adaptedPlayers.length>0||!window.deltatre.d3vp.d3vpCore.adaptedPlayers[0].playlist?window.addEventListener("player-initialized",():e()}},{key:"setList",value:function(t){var e=this;if(t&&t.personalization&&t.personalization.playlist){this.recommendation_id=t.recommendation_id,this.exp_id=t.exp_id,this.exp_var=t.exp_var,this.recommendation_type=t.personalization.recommendation_type,this.recommendation_trace=t.personalization.recommendation_trace,this.disableCurrentItemClasses=!1;var n=window.deltatre.recommendationEngineConfig,i=[],a=n.getAjaxPromise(n.buildApiUrlGetItemByEntityId(n.itemIdPrefix[this.ownProps.itemtype],this.ownProps.itemid),1,n.itemIdPrefix[this.ownProps.itemtype].replace("-",""),this.pushDataToMainList);i.push(a),Promise.all(i).then((function(){t.personalization.playlist.map((),e.formMainList()}))}else window.deltatre.http.getData(this.fallbackUrl,this.setFallBackdata)}},{key:"addAdvInPlaylist",value:function(){var t=i.createElement(y.default,{className:"episode",advsize:this.advSize,advsizename:this.advSizeName});this.playlistItem.splice(this.advPosition,0,t)}},{key:"render",value:function(){var t=this.state.playlistItem,e=this.state.mainList.filter(().length;return window.deltatre.utils.code.checkIsNil(t)||0===t.length?null:i.createElement("section",{"data-playlist-entityid":this.ownProps.itemid,className:"b2p-section -playlist"},i.createElement("div",{className:"b2p-section--header text-small"},i.createElement("h3",{className:"b2p-section--title"},this.title),i.createElement("span",{className:"b2p-section--info"},e," ",this.itemsTitle)),i.createElement("div",{className:"b2p-section--content"},i.createElement("div",{className:"playlist__wrapper"},t)))}}]),n}(m.Component))||s;e.default=L},11933:function(t,e,n){var i=n(67294),a=n(64836),o=n(18698);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s,r=a(n(56690)),l=a(n(89728)),d=a(n(61655)),c=a(n(94993)),u=a(n(73808)),p=n(67294),m=n(77062),f=n(22188),h=n(8418)),y=a(n(74491)),w=a(n(23337)),v=a(n(89231));r b=(0,m.observer)(s=function(t){(0,d.default)(n,t);var e=P(n);function n(t){var i;return(0,r.default)(this,n),(i=e.call(this,t)).handleOnIconClick=function(t,e,n){i.handleOnClick(t,e,n),window.deltatre.tracking.track("Video Asset Clicked",{slug:n,module:"Video carousel",video_id:i.ownProps.title,module_position:i.ownProps.index})},i.handleOnClick=function(t,e,n){if(t.preventDefault(),i.ownProps.isFromRecommendation&&i.trackRecommendedClicked(),i.ownProps.switchInplace){var a=(0,v.default)("#rooflineDesktop"),o=(0,v.default)("#rooflineMobile"),s=i.ownProps.apiUrl.replace("{slug}",n).replace("{maxdesc}",i.ownProps.maxDesc).replace("{entitytype}",i.ownProps.entityType),r=window.deltatre.http.getAndSetLanguageUrl(s);fetch(r).then(().then((function(t){var e=new CustomEvent(window.deltatre.player.events.switchVideo,{detail:{slug:n}});document.dispatchEvent(e),i.store.videoIndex=i.ownProps.index,a.html(t),o.html(t)}))}else top.location=e},i.trackRecommendedShown=function(){window.deltatre.recommendationEngine&&window.deltatre.recommendationEngine.trackAnalyticsEventAsync(i.analyticsEventTypes.RecommendedShown,i.props.entityid,i.props.recommendation_id,i.props.exp_id,i.props.exp_var,i.props.position,i.props.frontend_position,i.props.recommendation_type,i.props.recommendation_trace).catch(()},i.trackRecommendedClicked=function(){window.deltatre.recommendationEngine&&window.deltatre.recommendationEngine.trackAnalyticsEvent(i.analyticsEventTypes.RecommendedClicked,i.props.entityid,i.props.recommendation_id,i.props.exp_id,i.props.exp_var,i.props.position,i.props.frontend_position,i.props.recommendation_type,i.props.recommendation_trace)},i.checkIfIsOriginalSeriesTrailer=function(){return!!(i.tags&&i.tags.find((function(t){if(t.slug&&"originalseriestrailer"===t.slug.toLowerCase())return!0})))},i.ownProps=h.checkProps(i.props),i.translations={},i.translations.episode_number=h.findAndSetInObject(i.ownProps.translations,"episode_number"),i.store=y.default,i.nowPlaying=i.ownProps.nowplaying,i.isOriginal=window.deltatre.utils.code.setBooleanFromString(i.ownProps.isoriginal),i.authenticatedContentCountries=(window.deltatre.utils.dom.getMetaTagValue(window.deltatre.config.metaTags.authenticatedContentCountries)||"").split(","),i.analyticsEventTypes=window.deltatre.recommendationEngineConfig.analyticsEventTypes,i.tags=i.ownProps.tags||[],i.isOriginalSeriesTrailer=i.isOriginal&&i.checkIfIsOriginalSeriesTrailer(),i.state={isCurrent:i.ownProps.current},(0,f.reaction)((function(){return i.store.videoIndex}),(function(){i.setState({isCurrent:i.store.playing&&i.store.videoIndex===i.ownProps.index})})),(0,f.reaction)((,(function(){i.setState({isCurrent:i.store.playing&&i.store.videoIndex===i.ownProps.index})})),i}return(0,l.default)(n,[{key:"componentDidMount",value:,{key:"getDurationFormat",value:function(t){var e=new Date(0);e.setSeconds(t);var n=(0,w.default)(e).utc();return t>=3600?n.format("hh:mm:ss"):n.format("mm:ss")}},{key:"render",value:function(){var t=this;return i.createElement("article",{className:"card card--xs -episode mb-2",name:"episode","data-episode-index":this.ownProps.index,"data-entity-id":this.ownProps.entityid,key:this.ownProps.entityid},i.createElement("a",{href:this.ownProps.url,className:"card__wrapper "+(this.state.isCurrent?" -active":" "),"data-vilynx-id":this.ownProps.entityid,"data-link":!0,onClick:,i.createElement("div",{className:"card__image-container"},h.setImage(this.ownProps.imagetemplate,this.ownProps.url,this.ownProps.title,"",window.deltatre.config.images.thumb120String,window.deltatre.config.images.thumb120String,window.deltatre.config.images.thumbPlaceHolder,null,null,null,null,null,!1,null,!1,!0),i.createElement("span",{className:"b2p-icon -icon-play -small"})),i.createElement("div",{className:"card__body"},this.state.isCurrent?i.createElement("div",{className:"episode__label--current"},this.nowPlaying," "):null,i.createElement("div",{className:"card__info"},i.createElement("h3",{className:"card__title"},this.ownProps.title),this.ownProps.duration&&!this.state.isCurrent&&i.createElement("div",{className:"card__duration"},this.getDurationFormat(this.ownProps.duration))))))}}]),n}(p.Component))||s;e.default=b},74491:function(t,e,n){var i=n(64836);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,o,s,r=i(n(14315)),l=i(n(89728)),d=i(n(56690)),c=i(n(46877)),u=(i(n(55827)),n(22188)),p=new(a=(0,l.default)((function t(){(0,d.default)(this,t),(0,r.default)(this,"videoIndex",o,this),(0,r.default)(this,"playing",s,this)})),o=(0,c.default)(a.prototype,"videoIndex",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:),s=(0,c.default)(a.prototype,"playing",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:),a);e.default=p}}]);
//# sourceMappingURL=1670.f24b8fa137c87811.js.map