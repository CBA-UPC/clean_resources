/*! For license information please see vendor.0a446af16d7ae886b8da.js.LICENSE.txt?brotli=allow */
(window.subbuzzJsonp=window.subbuzzJsonp||[]).push([[1],[,,,,,,,,,,,,function(e,t,r){(function(t,r){var n;"undefined"!=typeof self&&self,n=function(){return [function(e,t,r){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=r(4));e.exports={PrecompiledLoader:i}},function(e,t,r){"use strict";function n(e,t){return(n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var i=r(0),o=r(5).EmitterObj;e.exports=o)},function(e,t,r){"use strict";function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}unction o(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=r(13),u=r(1);ar c=),f=s);e.exports={Obj:c,EmitterObj:f}},function(e,t,r){"use strict";r o=r(8),a=r(11),s=r(1),u=r(0),l=r(12),c=r(3),f=c.FileSystemLoader,d=c.WebLoader,h=c.PrecompiledLoader,p=r(14),v=r(15),g=r(5),y=g.Obj,m=g.EmitterObj,b=r(2),_=b.handleError,E=b.Frame,w=r(16);ar T={type:"code",obj:{root:},L=m),A=y),O=y);e.exports={Environment:L,Template:O}},)},e.exports=n()}).call(this,r(124).setImmediate,r(75))},,,,,,,,,,,,function(e,t,r){var n;!function(r){var i={};i.EventTarget=function(){"use strict";eturn e.prototype={constructor:e,on:function(e,t){var r,n,i=this._handlers[e];for(void 0===i&&(i=this._handlers[e]=[]),r=0,n=i.length;r<n;r++)if(i[r]===t)return;i.push(t)},fire:function(e,t){var r,n,i,o={type:e,data:t};if((r=this._handlers[o.type])instanceof Array)for(n=0,i=(r=r.concat()).length;n<i;n++)r[n].call(this,o)},off:function(e,t){var r,n,i=this._handlers[e];if(i instanceof Array)for(r=0,n=i.length;r<n;r++)if(i[r]===t){i.splice(r,1);break}}},e}(),i.NativeDOM=function(){"use strict";return{type:"native",query:function(e,t){return e.querySelector(t)},queryAll:function(e,t){return e.querySelectorAll(t)},on:function(e,t,r){e.addEventListener(t,r,!1)},off:}(),i.DOM=i.NativeDOM,i.DOMEventDelegate=function(){"use strict";var e=["click","mouseover","mouseout","mousedown","mouseup","mouseenter","mouseleave","mousemove","keydown","keyup","submit","change","contextmenu","dblclick","input","focusin","focusout"];function t(e){return e&&e.hasAttribute("data-module")}unction n(e,t,r,n){var i,o;for(i=0;i<e.length;i++)t["on"+(o=e[i])]&&r.call(n,o)}function o(t,r,n){this.element=t,this._handler=r,this._eventTypes=n||e,this._boundHandler={},this._attached=!1}return o.prototype={constructor:o,_handleEvent:function(e){var n=function(e){for(var n=!1,i=!1;!n&&e&&e.parentNode&&!i;)n=r(e),i=t(e),n||(e=e.parentNode);return n?e:null}(e.target),i=n?n.getAttribute("data-type"):"";this._handler["on"+e.type](e,n,i)},attachEvents:function(){this._attached||(n(this._eventTypes,this._handler,(function(e){var t=this;.DOM.on(this.element,e,r),this._boundHandler[e]=r}),this),this._attached=!0)},detachEvents:function(){n(this._eventTypes,this._handler,(function(e){i.DOM.off(this.element,e,this._boundHandler[e])}),this)}},o}(),i.Context=function(){"use strict";eturn e.prototype={constructor:e,broadcast:getService:function(e){return this.application.getService(e)},hasService:function(e){return this.application.hasService(e)},getConfig:getGlobal:function(e){return this.application.getGlobal(e)},getGlobalConfig:function(e){return this.application.getGlobalConfig(e)},reportError:getElement:function(){return this.element}},e}(),i.Application=function(){"use strict";var e={},t={},n=[],o={},a={},s={},u=!1,l=null,c=new i.EventTarget;unction d(t){if("function"!=typeof l){if(e.debug)throw t;c.fire("error",{exception:t})}else l(t)}function h(e,t){"function"==typeof e[t]&&e[t].apply(e,Array.prototype.slice.call(arguments,2))}function p(e){var t,r,n,i,o,s=[],u={};for(r=e.instance.behaviors||[],t=0;t<r.length;t++)o=r[t],"behaviorInstances"in e||(e.behaviorInstances={}),i=e.behaviorInstances,n=a[o],o in u?d(new Error('Behavior "'+o+'" cannot be specified twice in a module.')):n?(i[o]||(i[o]=n.creator(e.context)),s.push(i[o])):d(new Error('Behavior "'+o+'" not found')),u[o]=!0;return s}function v(t,r,n){var o=new i.DOMEventDelegate(r,n,e.eventTypes);t.push(o),o.attachEvents()}unction y(e,t,r){null!==e.onmessage&&"object"==typeof e.onmessage&&e.onmessage.hasOwnProperty(t)?e.onmessage[t].call(e,r):-1!==e.messages||[],t)&&e.onmessage.call(e,t,r)}return f(c,{init:function(t){return f(e,t||{}),this.startAll(document.documentElement),this.fire("init"),u=!0,this},destroy:function(){return this.stopAll(document.documentElement),e={},t={},o={},n=[],a={},s={},u=!1,this},isStarted:start:function(r){var n,o,a,u=function(e){var t=e.getAttribute("data-module");return t?t.split(" ")[0]:""}(r),l=t[u];if(!l)return d(new Error('Module type "'+u+'" is not defined.')),this;if(!this.isStarted(r)){r.id||(r.id="mod-"+u+"-"+l.counter),l.counter++,o=new i.Context(this,r),a=l.creator(o),e.debug||function(e,t){var r,n;for(r in e)"function"==typeof(n=e[r])&&(e[r]=function(e,r){return function(){var n=t+"."+e+"() - ";try{return r.apply(this,arguments)}catch(r){r.methodName=e,r.objectName=t,r.name=n+r.name,r.message=n+r.message,d(r)}}}(r,n))}(a,u),n={moduleName:u,instance:a,context:o,element:r,eventDelegates:[]},s[r.id]=n;for(var c=p(n),f=0,g=c.length;f<g;f++)h(c[f],"init");h(n.instance,"init"),function(e){var t=e.eventDelegates,r=p(e);v(t,e.element,e.instance);for(var n=0;n<r.length;n++)v(t,e.element,r[n])}(n)}return this},stop:function(t){var r=g(t);if(r){!function(e){for(var t=e.eventDelegates,r=0;r<t.length;r++)t[r].detachEvents();e.eventDelegates=[]}(r);for(var n=p(r),i=n.length-1;i>=0;i--)h(n[i],"destroy");h(r.instance,"destroy"),delete s[t.id]}else if(e.debug)return d(new Error("Unable to stop module associated with element: "+t.id)),this;return this},startAll:function(e){for(var t=i.DOM.queryAll(e,"[data-module]"),r=0,n=t.length;r<n;r++)this.start(t[r]);return this},stopAll:function(e){for(var t=i.DOM.queryAll(e,"[data-module]"),r=0,n=t.length;r<n;r++)this.stop(t[r]);return this},addModule:function(e,r){return void 0!==t[e]?(d(new Error("Module "+e+" has already been added.")),this):(t[e]={creator:r,counter:1},this)},getModuleConfig:function(e,t){var r=g(e),n=null;if(r&&r.config)n=r.config;else{var o=i.DOM.query(e,'script[type="text/x-config"]');if(o)try{n=JSON.parse(o.text)}catch(t){d(new Error("Module with id "+e.id+" has a malformed config."))}r&&(r.config=n)}return n?void 0===t?n:t in n?n[t]:null:null},addService:function(e,t){return void 0!==o[e]?(d(new Error("Service "+e+" has already been added.")),this):(o[e]={creator:t,instance:null},this)},getService:function(e){var t=o[e];if(t){if(!t.instance){if(e))return d(new ReferenceError("Circular service dependency: "+n.join(" -> ")+" -> "+e)),null;n.push(e),t.instance=t.creator(c),n.pop()}return t.instance}return d(new Error('Service "'+e+'" not found')),null},hasService:addBehavior:function(e,t){return void 0!==a[e]?(d(new Error("Behavior "+e+" has already been added.")),this):(a[e]={creator:t,instance:null},this)},broadcast:function(e,t){var r,n,i,o;for(n in s)if(s.hasOwnProperty(n))for(y((i=s[n]).instance,e,t),o=p(i),r=0;r<o.length;r++)y(o[r],e,t);return this.fire("message",{message:e,messageData:t}),this},getGlobal:getGlobalConfig:function(t){return void 0===t?e:t in e?e[t]:null},setGlobalConfig:function(t){return u?(d(new Error("Cannot set global configuration after application initialization")),this):(f(e,t),this)},setErrorHandler:reportError:d,reportWarning:function(t){if(e.debug){var r=this.getGlobal("console");r&&r.warn&&r.warn(t)}else c.fire("warning",t)},reportInfo:function(t){if(e.debug){var r=this.getGlobal("console");r&&r.info&&r.info(t)}}})}(),void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}("undefined"!=typeof window?window:this)},,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n="function"==typeof fetch?fetch:function(e,t){return t=t||{},new Promise((function(r,n){var i=new XMLHttpRequest;for(var o in i.open(t.method||"get",e),t.headers)i.setRequestHeader(o,t.headers[o]);function a(){var e,t=[],r=[],n={};return i.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,(),{ok:1==(i.status/200|0),status:i.status,statusText:i.statusText,url:i.responseURL,clone:a,text:function(){return Promise.resolve(i.responseText)},json:xml:blob:headers:{keys:function(){return t},entries:function(){return r},get:has:}}i.withCredentials="include"==t.credentials,i.onload=i.onerror=n,i.send(t.body)}))};t.a=n},,,,,,,,,,,,,,,,,function(e,t,r){var n=r(41).Symbol;e.exports=n},,,,,,,,,,,function(e,t,r){var n=r(216),i=r(217),o=r(218),a=r(219),s=r(220);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},,,,,,,,,,function(e,t,r){"use strict";e.exports=r(343)()?Array.from:r(344)},function(e,t,r){"use strict";(function(t,r){var n=i=e.exports=)}).call(this,r(75),r(124).setImmediate)},function(e,t,r){"use strict";e.exports=r(327)()?Object.assign:r(328)},,function(e,t){e.exports=function(){var e,t,r=[],n=Array.prototype.slice.call(arguments),i=n.length,o=0;if(!i)throw new Error("zip requires at least one argument");for(e=0;e<i;e++){if(!Array.isArray(n[e]))throw new Error("all arguments must be arrays");var a=n[e].length;a>o&&(o=a)}for(e=0;e<o;e++){var s=[];for(t=0;t<i;t++){if(!Array.isArray(n[t]))throw new Error("all arguments must be arrays");s[t]=n[t][e]}r[e]=s}return r}},,,,,,,,,function(e,t,r){var n=r(207),i=r(212),o=r(213),a=r(214),s=r(215);function u(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,r){var n=r(98);e.exports=function(e){return n(this,e).get(e)}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,r){var n=r(146)(Object.keys,Object);e.exports=n},function(e,t,r){var n=r(59)(r(41),"DataView");e.exports=n},function(e,t,r){var n=r(59)(r(41),"Promise");e.exports=n},function(e,t,r){var n=r(59)(r(41),"Set");e.exports=n},function(e,t,r){var n=r(59)(r(41),"WeakMap");e.exports=n},function(e,t,r){var n=r(300),i=r(301)(n);e.exports=i},,,,,,,,,,function(e,t,r){"use strict";e.exports=r(321)()?Math.sign:r(322)},function(e,t,r){"use strict";e.exports=r(330)()?Object.keys:r(331)},},,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var r=e.call(this,t)||this;return r.name="DecodingError",r}return i(t,e),t}(Error);t.DecodingError=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){var r=e.call(this,t)||this;return r.name="EncodingError",r}return i(t,e),t}(Error);t.EncodingError=o},},function(e,t,r){e.export}({1:[function(e,t,rexports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListener},n.prototype.emi},n.prototype.addListene},n.prototype.on=n.prototype.addListener,n.prototype.onc},n.prototype.removeListene},n.prototype.removeAllListener},n.prototype.listener},n.prototype.listenerCoun},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],2:[function(e,t,r){var n,i,o,a,s,u;n=this,i=/^((?:[^\/;?#]+:)?)(\/\/[^\/\;?#]*)?(.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,o=/^([^\/;?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,u={buildAbsoluteUR},parseUR},normalizePat},buildURLFromPart}},"object"==typeof r&&"object"==typeof t?t.exports=u:"object"==typeof r?r.URLToolkit=u:n.URLToolkit=u},{}],3:[function(e,t,r){var n=arguments[3],i=arguments[4],o=arguments[5],a=JSON.stringify;t.exports=function(e,t){for(var r,s=Object.keys(o),u=0,l=s.length;u<l;u++){var c=s[u],f=o[c].exports;if(f===e||f&&f.default===e){r=c;break}}if(!r){r=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var d={};for(u=0,l=s.length;u<l;u++)d[c=s[u]]=c;i[r]=[Function(["require","module","exports"],"("+e+")(self)"),d]}var h=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[r]=r,i[h]=[Function(["require"],"var f = require("+a(r)+");(f.default ? f.default : f)(self);"),p];var v={}}(h);var g="("+n+")({"+Object.keys(v).map})).join(",")+"},{},["+a(h)+"])",y=window.URL||window.webkitURL||window.mozURL||window.msURL,m=new Blob([g],{type:"text/javascript"});if(t&&t.bare)return m;var b=y.createObjectURL(m),_=new Worker(b);return _.objectURL=b,_}},{}],4:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hlsDefaultConfig=void 0;var n=u(e(5)),i=u(e(6)),o=u(e(7)),a=u(e(8)),s=u(e(48));function u(e){return e&&e.__esModule?e:{default:e}}r.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,maxSeekHole:2,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,fragLoadingLoopThreshold:3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,fetchSetup:void 0,abrController:n.default,bufferController:i.default,capLevelController:o.default,fpsController:a.default,stretchShortVideoTrack:!1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0}},{48:48,5:5,6:6,7:7,8:8}],5:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=c(e(30)),o=c(e(29)),a=c(e(32)),s=e(28),u=e(46),l=c(e(44));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.FRAG_LOADING,i.default.FRAG_LOADED,i.default.FRAG_BUFFERED,i.default.ERROR));return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"destroy",valu}},{key:"onFragLoading",valu}},{key:"_abandonRulesCheck",value:function(){var e=this.hls,t=e.media,r=this.fragCurrent,n=r.loader,o=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return u.logger.warn("frag loader destroy or aborted, disarm abandonRules"),void this.clearTimer();var s=n.stats;if(t&&s&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var l=performance.now()-s.trequest,c=Math.abs(t.playbackRate);if(l>500*r.duration/c){var f=e.levels,d=Math.max(1,s.bw?s.bw/8:1e3*s.loaded/l),h=f[r.level],p=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,v=s.total?s.total:Math.max(s.loaded,Math.round(r.duration*p/8)),g=t.currentTime,y=(v-s.loaded)/d,m=(a.default.bufferInfo(t,g,e.config.maxBufferHole).end-g)/c;if(m<2*r.duration/c&&y>m){var b=void 0,_=void 0;for(_=r.level-1;_>o;_--){var E=f[_].realBitrate?Math.max(f[_].realBitrate,f[_].bitrate):f[_].bitrate;if((b=r.duration*E/(6.4*d))<m)break}b<y&&(u.logger.warn("loading too slow, abort fragment loading and switch to level "+_+":fragLoadedDelay["+_+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+y.toFixed(1)+":"+m.toFixed(1)),e.nextLoadLevel=_,this._bwEstimator.sample(l,s.loaded),n.abort(),this.clearTimer(),e.trigger(i.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:s}))}}}}},{key:"onFragLoaded",valu}},{key:"onFragBuffered",valu}},{key:"onError",valu}},{key:"clearTimer",valu}},{key:"_findBestLevel",valu}},{key:"nextAutoLevel",ge},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",ge}}]),t}(o.default);r.default=f},{28:28,29:29,30:30,32:32,44:44,46:46}],6:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=u(e(30)),o=u(e(29)),a=e(46),s=e(28);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.MEDIA_ATTACHING,i.default.MEDIA_DETACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_RESET,i.default.BUFFER_APPENDING,i.default.BUFFER_CODECS,i.default.BUFFER_EOS,i.default.BUFFER_FLUSHING,i.default.LEVEL_PTS_UPDATED,i.default.LEVEL_UPDATED));return r._msDuration=null,r._levelDuration=null,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"destroy",value:function(){o.default.prototype.destroy.call(this)}},{key:"onLevelPtsUpdated",valu}},{key:"onManifestParsed",valu}},{key:"onMediaAttaching",valu}},{key:"onMediaDetaching",valu}},{key:"onMediaSourceOpen",valu}},{key:"checkPendingTracks",valu}},{key:"onMediaSourceClose",value:function(){a.logger.log("media source closed")}},{key:"onMediaSourceEnded",valu}},{key:"onSBUpdateEnd",valu}},{key:"onSBUpdateError",valu}},{key:"onBufferReset",valu}},{key:"onBufferCodecs",valu}},{key:"createSourceBuffers",valu}},{key:"onBufferAppending",valu}},{key:"onBufferAppendFail",valu}},{key:"onBufferEos",valu}},{key:"checkEos",valu}},{key:"onBufferFlushing",valu}},{key:"onLevelUpdated",valu}},{key:"updateMediaElementDuration",valu}},{key:"doFlush",valu}},{key:"doAppending",valu}},{key:"flushBuffer",value:function(e,t,r){var n,i,o,s,u,l,c=this.sourceBuffer;if(Object.keys(c).length){if(a.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var f in c)if(!r||f===r){if((n=c[f]).ended=!1,n.updating)return a.logger.warn("cannot flush, sb updating in progress"),!1;try{for(i=0;i<n.buffered.length;i++)if(o=n.buffered.start(i),s=n.buffered.end(i),-1!==navigator.userAgent.toLowerCase().indexOf("firefox")&&t===Number.POSITIVE_INFINITY?(u=e,l=t):(u=Math.max(o,e),l=Math.min(s,t)),Math.min(l,s)-u>.5)return this.flushBufferCounter++,a.logger.log("flush "+f+" ["+u+","+l+"], of ["+o+","+s+"], pos:"+this.media.currentTime),n.remove(u,l),!1}catch(e){a.logger.warn("exception while accessing sourcebuffer, it might have been removed from MediaSource")}}}else a.logger.warn("abort flushing too many retries");a.logger.log("buffer flushed")}return!0}}]),t}(o.default);r.default=l},{28:28,29:29,30:30,46:46}],7:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=o(e(30));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.FPS_DROP_LEVEL_CAPPING,i.default.MEDIA_ATTACHING,i.default.MANIFEST_PARSED))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"destroy",valu}},{key:"onFpsDropLevelCapping",valu}},{key:"onMediaAttaching",valu}},{key:"onManifestParsed",valu}},{key:"detectPlayerSize",valu}},{key:"getMaxLevel",valu}},{key:"mediaWidth",get:function(){var e=void 0,r=this.media;return r&&(e=r.width||r.clientWidth||r.offsetWidth,e*=t.contentScaleFactor),e}},{key:"mediaHeight",ge}}],[{key:"isLevelAllowed",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return-1===t.indexOf(e)}},{key:"getMaxLevelByMediaSize",valu}},{key:"contentScaleFactor",ge}}]),t}(o(e(29)).default);r.default=a},{29:29,30:30}],8:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=s(e(30)),o=s(e(29)),a=e(46);function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.MEDIA_ATTACHING))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"destroy",valu}},{key:"onMediaAttaching",valu}},{key:"checkFPS",valu}},{key:"checkFPSInterval",valu}}]),t}(o.default);r.default=u},{29:29,30:30,46:46}],9:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=s(e(30)),o=s(e(29)),a=s(e(22));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.FRAG_PARSING_METADATA));return r.id3Track=void 0,r.media=void 0,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"destroy",valu}},{key:"onMediaAttached",valu}},{key:"onMediaDetaching",valu}},{key:"onFragParsingMetadata",value:function(e){for(var t=e.frag,r=e.samples,n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var o=a.default.getID3Frames(r[i].data);if(o){var s=r[i].pts,u=i<r.length-1?r[i+1].pts:t.endPTS;s===u&&(u+=1e-4);for(var l=0;l<o.length;l++){var c=o[l];if(!a.default.isTimeStampFrame(c)){var f=new n(s,u,"");f.value=c,this.id3Track.addCue(f)}}}}}}]),t}(o.default);r.default=u},{22:22,29:29,30:30}],10:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=l(e(30)),o=l(e(29)),a=e(46),s=e(28),u=l(e(32));function l(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.MANIFEST_LOADED,i.default.LEVEL_LOADED,i.default.FRAG_LOADED,i.default.ERROR));return r.ontick=r.tick.bind(r),r._manualLevel=-1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"destroy",valu}},{key:"cleanTimer",valu}},{key:"startLoad",valu}},{key:"stopLoad",value:function(){this.canload=!1}},{key:"onManifestLoaded",value:function(e){var t,r=[],n=[],o={},u=!1,l=!1,c=this.hls,f=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),};if(e.levels.forEach})),u&&l?r.forEach})):n=r,(n=n.filter}))).length){t=n[0].bitrate,n.sort((function(e,t){return e.bitrate-t.bitrate})),this._levels=n;for(var h=0;h<n.length;h++)if(n[h].bitrate===t){this._firstLevel=h,a.logger.log("manifest loaded,"+n.length+" level(s) found, first bitrate:"+t);break}c.trigger(i.default.MANIFEST_PARSED,{levels:n,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:u,altAudio:e.audioTracks.length>0})}else c.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:c.url,reason:"no level with compatible codecs found in manifest"})}},{key:"setLevelInternal",valu}},{key:"onError",value:function(e){if(e.fatal)e.type===s.ErrorTypes.NETWORK_ERROR&&this.cleanTimer();else{var t=e.details,r=this.hls,n=void 0,i=void 0,o=!1;switch(t){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.FRAG_LOOP_LOADING_ERROR:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:n=e.frag.level;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:n=e.context.level,o=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:n=e.level}if(void 0!==n){(i=this._levels[n]).loadError?i.loadError++:i.loadError=1;var l=i.url.length;if(l>1&&i.loadError<l)i.urlId=(i.urlId+1)%l,i.details=void 0,a.logger.warn("level controller,"+t+" for level "+n+": switching to redundant stream id "+i.urlId);else if(-1===this._manualLevel&&n)a.logger.warn("level controller,"+t+": switch-down for next fragment"),r.nextAutoLevel=Math.max(0,n-1);else if(i&&i.details&&i.details.live)a.logger.warn("level controller,"+t+" on live stream, discard"),o&&(this._level=void 0);else if(t===s.ErrorDetails.LEVEL_LOAD_ERROR||t===s.ErrorDetails.LEVEL_LOAD_TIMEOUT){var c=r.media;if(c&&u.default.isBuffered(c,c.currentTime)&&u.default.isBuffered(c,c.currentTime+.5)){var f=r.config.levelLoadingRetryDelay;a.logger.warn("level controller,"+t+", but media buffered, retry in "+f+"ms"),this.timer=setTimeout(this.ontick,f),e.levelRetry=!0}else a.logger.error("cannot recover "+t+" error"),this._level=void 0,this.cleanTimer(),e.fatal=!0}}}}},{key:"onFragLoaded",valu}},{key:"onLevelLoaded",valu}},{key:"tick",valu}},{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this._level},se}},{key:"manualLevel",get:function(){return this._manualLevel},se}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",ge},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",ge},se}}]),t}(o.default);r.default=c},{28:28,29:29,30:30,32:32,46:46}],11:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=h(e(43)),o=h(e(32)),a=h(e(20)),s=h(e(30)),u=h(e(29)),l=h(e(33)),c=h(e(47)),f=e(28),d=e(46);function h(e){return e&&e.__esModule?e:{default:e}}var p="STOPPED",v="IDLE",g="KEY_LOADING",y="FRAG_LOADING",m="FRAG_LOADING_WAITING_RETRY",b="WAITING_LEVEL",_="PARSING",E="PARSED",w="BUFFER_FLUSHING",S="ENDED",T="ERROR",L=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,s.default.MEDIA_ATTACHED,s.default.MEDIA_DETACHING,s.default.MANIFEST_LOADING,s.default.MANIFEST_PARSED,s.default.LEVEL_LOADED,s.default.KEY_LOADED,s.default.FRAG_LOADED,s.default.FRAG_LOAD_EMERGENCY_ABORTED,s.default.FRAG_PARSING_INIT_SEGMENT,s.default.FRAG_PARSING_DATA,s.default.FRAG_PARSED,s.default.ERROR,s.default.AUDIO_TRACK_SWITCHING,s.default.AUDIO_TRACK_SWITCHED,s.default.BUFFER_CREATED,s.default.BUFFER_APPENDED,s.default.BUFFER_FLUSHED));return r.config=e.config,r.audioCodecSwap=!1,r.ticks=0,r._state=p,r.ontick=r.tick.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"destroy",value:function(){this.stopLoad(),this.timer&&(clearInterval(this.timer),this.timer=null),u.default.prototype.destroy.call(this),this.state=p}},{key:"startLoad",value:function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.timer||(this.timer=setInterval(this.ontick,100)),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(d.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=v,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=p}},{key:"stopLoad",valu}},{key:"tick",valu}},{key:"doTick",value:function(){switch(this.state){case T:break;case w:this.fragLoadError=0;break;case v:this._doTickIdle();break;case b:var e=this.levels[this.level];e&&e.details&&(this.state=v);break;case m:var t=performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(d.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=v)}this._checkBuffer(),this._checkFragmentChanged()}},{key:"_doTickIdle",value:function(){var e=this.hls,t=e.config,r=this.media;if(void 0===this.levelLastLoaded||r||!this.startFragRequested&&t.startFragPrefetch){var n=void 0;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var u=a.bitrate,l=void 0;l=u?Math.max(8*t.maxBufferSize/u,t.maxBufferLength):t.maxBufferLength,l=Math.min(l,t.maxMaxBufferLength);var c=o.default.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,t.maxBufferHole),f=c.len;if(!(f>=l)){d.logger.trace("buffer length of "+f.toFixed(3)+" is below max of "+l.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var h=a.details;if(void 0===h||h.live&&this.levelLastLoaded!==i)this.state=b;else{var p=this.fragPrevious;if(!h.live&&p&&p.sn===h.endSN&&f&&!c.nextStart&&Math.min(r.duration,p.start+p.duration)-Math.max(c.end,p.start)<=Math.max(.2,p.duration)){var v={};return this.altAudio&&(v.type="video"),this.hls.trigger(s.default.BUFFER_EOS,v),void(this.state=S)}this._fetchPayloadOrEos(n,c,h)}}}}}},{key:"_fetchPayloadOrEos",valu}},{key:"_ensureFragmentAtLivePoint",valu}},{key:"_findFragment",value:function(e,t,r,n,o,a,s){var u=this.hls.config,l=void 0,c=void 0,f=u.maxFragLookUpTolerance,h=t?n[t.sn-n[0].sn+1]:void 0,};if(o<a?(o>a-f&&(f=0),c=h&&!p(h)?h:i.default.search(n,p)):c=n[r-1],c){var v=(l=c).sn-s.startSN,g=t&&l.level===t.level,y=n[v-1],m=n[v+1];if(t&&l.sn===t.sn)if(g&&!l.backtracked)if(l.sn<s.endSN){var b=t.deltaPTS;b&&b>u.maxBufferHole&&t.dropped&&v?(l=y,d.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this"),t.loadCounter--):(l=m,d.logger.log("SN just loaded, load next one: "+l.sn))}else l=null;else l.backtracked&&(m&&m.backtracked?(d.logger.warn("Already backtracked from fragment "+m.sn+", will not backtrack to fragment "+l.sn+". Loading fragment "+m.sn),l=m):(d.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),l.dropped=0,y?(y.loadCounter&&y.loadCounter--,(l=y).backtracked=!0):v&&(l=null)))}return l}},{key:"_loadFragmentOrKey",value:function(e,t,r,n,i){var o=this.hls,u=o.config;if(!e.decryptdata||null==e.decryptdata.uri||null!=e.decryptdata.key){if(d.logger.log("Loading "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t+", currentTime:"+n.toFixed(3)+",bufferEnd:"+i.toFixed(3)),void 0!==this.fragLoadIdx?this.fragLoadIdx++:this.fragLoadIdx=0,e.loadCounter){e.loadCounter++;var l=u.fragLoadingLoopThreshold;if(e.loadCounter>l&&Math.abs(this.fragLoadIdx-e.loadIdx)<l)return void o.trigger(s.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.FRAG_LOOP_LOADING_ERROR,fatal:!1,frag:e})}else e.loadCounter=1;return e.loadIdx=this.fragLoadIdx,this.fragCurrent=e,this.startFragRequested=!0,isNaN(e.sn)||(this.nextLoadPosition=e.start+e.duration),e.autoLevel=o.autoLevelEnabled,e.bitrateTest=this.bitrateTest,o.trigger(s.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new a.default(o,"main")),void(this.state=y)}d.logger.log("Loading key for "+e.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+t),this.state=g,o.trigger(s.default.KEY_LOADING,{frag:e})}},{key:"getBufferedFrag",valu}},{key:"followingBufferedFrag",valu}},{key:"_checkFragmentChanged",value:function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>r.playbackRate*this.lastCurrentTime&&(this.lastCurrentTime=t),o.default.isBuffered(r,t)?e=this.getBufferedFrag(t):o.default.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(s.default.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(s.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}}},{key:"immediateLevelSwitch",valu}},{key:"immediateLevelSwitchEnd",valu}},{key:"nextLevelSwitch",value:function(){var e=this.media;if(e&&e.readyState){var t,r=void 0,n=void 0;if(this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,(t=this.getBufferedFrag(e.currentTime))&&t.startPTS>1&&this.flushMainBuffer(0,t.startPTS-1),e.paused)r=0;else{var i=this.hls.nextLoadLevel,o=this.levels[i],a=this.fragLastKbps;r=a&&this.fragCurrent?this.fragCurrent.duration*o.bitrate/(1e3*a)+1:0}if((n=this.getBufferedFrag(e.currentTime+r))&&(n=this.followingBufferedFrag(n))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)}}}},{key:"flushMainBuffer",valu}},{key:"onMediaAttached",valu}},{key:"onMediaDetaching",valu}},{key:"onMediaSeeking",value:function(){var e=this.media,t=e?e.currentTime:void 0,r=this.config;isNaN(t)||d.logger.log("media seeking to "+t.toFixed(3));var n=this.mediaBuffer?this.mediaBuffer:e,i=o.default.bufferInfo(n,t,this.config.maxBufferHole);if(this.state===y){var a=this.fragCurrent;if(0===i.len&&a){var s=r.maxFragLookUpTolerance,u=a.start-s,l=a.start+a.duration+s;t<u||t>l?(a.loader&&(d.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),a.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=v):d.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else this.state===S&&(0===i.len&&(this.fragPrevious=0),this.state=v);e&&(this.lastCurrentTime=t),this.state!==y&&void 0!==this.fragLoadIdx&&(this.fragLoadIdx+=2*r.fragLoadingLoopThreshold),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=t),this.tick()}},{key:"onMediaSeeked",valu}},{key:"onMediaEnded",valu}},{key:"onManifestLoading",valu}},{key:"onManifestParsed",valu}},{key:"onLevelLoaded",value:function(e){var t=e.details,r=e.level,n=this.levels[r],i=t.totalduration,o=0;if(d.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),this.levelLastLoaded=r,t.live){var a=n.details;a&&t.fragments.length>0?(l.default.mergeDetails(a,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,a),t.PTSKnown?d.logger.log("live playlist sliding:"+o.toFixed(3)):d.logger.log("live playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,d.logger.log("live playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(n.details=t,this.hls.trigger(s.default.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=t.startTimeOffset;isNaN(u)?t.live?(this.startPosition=this.computeLivePosition(o,t),d.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0:(u<0&&(d.logger.log("negative start time offset "+u+", count from end of last fragment"),u=o+i+u),d.logger.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u),this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===b&&(this.state=v),this.tick()}},{key:"onKeyLoaded",valu}},{key:"onFragLoaded",value:function(e){var t=this.fragCurrent,r=e.frag;if(this.state===y&&t&&"main"===r.type&&r.level===t.level&&r.sn===t.sn){var n=e.stats,i=this.levels[t.level],o=i.details;if(d.logger.log("Loaded  "+t.sn+" of ["+o.startSN+" ,"+o.endSN+"],level "+t.level),this.bitrateTest=!1,this.stats=n,!0===r.bitrateTest&&this.hls.nextLoadLevel)this.state=v,this.startFragRequested=!1,n.tparsed=n.tbuffered=performance.now(),this.hls.trigger(s.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else if("initSegment"===r.sn)this.state=v,n.tparsed=n.tbuffered=performance.now(),o.initSegment.data=e.payload,this.hls.trigger(s.default.FRAG_BUFFERED,{stats:n,frag:t,id:"main"}),this.tick();else{this.state=_;var u=o.totalduration,l=t.level,c=t.sn,f=this.config.defaultAudioCodec||i.audioCodec;this.audioCodecSwap&&(d.logger.log("swapping playlist audio codec"),void 0===f&&(f=this.lastAudioCodec),f&&(f=-1!==f.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),this.pendingBuffering=!0,this.appended=!1,d.logger.log("Parsing "+c+" of ["+o.startSN+" ,"+o.endSN+"],level "+l+", cc "+t.cc);var h=this.demuxer;h||(h=this.demuxer=new a.default(this.hls,"main"));var p=this.media,g=!(p&&p.seeking)&&(o.PTSKnown||!o.live),m=o.initSegment?o.initSegment.data:[];h.push(e.payload,m,f,i.videoCodec,t,u,g,void 0)}}this.fragLoadError=0}},{key:"onFragParsingInitSegment",valu}},{key:"onFragParsingData",value:function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"main"===e.id&&n.sn===r.sn&&n.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===_){var i=this.levels[this.level],o=r;if(isNaN(e.endPTS)&&(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),d.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(o.dropped=e.dropped,o.dropped){if(!o.backtracked)return d.logger.warn("missing video frame(s), backtracking fragment"),o.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=v,this.fragPrevious=o,void this.tick();d.logger.warn("Already backtracked on this fragment, appending with the gap")}else o.backtracked=!1;var a=l.default.updateFragPTSDTS(i.details,o,e.startPTS,e.endPTS,e.startDTS,e.endDTS),u=this.hls;u.trigger(s.default.LEVEL_PTS_UPDATED,{details:i.details,level:this.level,drift:a,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach})),this.tick()}}},{key:"onFragParsed",valu}},{key:"onAudioTrackSwitching",valu}},{key:"onAudioTrackSwitched",valu}},{key:"onBufferCreated",valu}},{key:"onBufferAppended",valu}},{key:"_checkAppendedParsed",value:function(){if(!(this.state!==E||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;d.logger.log("main buffered : "+c.default.toString(t.buffered));var r=this._bufferedFrags.filter((function(e){return o.default.isBuffered(t,(e.startPTS+e.endPTS)/2)}));r.push(e),this._bufferedFrags=r.sort((function(e,t){return e.startPTS-t.startPTS})),this.fragPrevious=e;var n=this.stats;n.tbuffered=performance.now(),this.fragLastKbps=Math.round(8*n.total/(n.tbuffered-n.tfirst)),this.hls.trigger(s.default.FRAG_BUFFERED,{stats:n,frag:e,id:"main"}),this.state=v}this.tick()}}},{key:"onError",value:function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=this.media,n=r&&o.default.isBuffered(r,r.currentTime)&&o.default.isBuffered(r,r.currentTime+.5);switch(e.details){case f.ErrorDetails.FRAG_LOAD_ERROR:case f.ErrorDetails.FRAG_LOAD_TIMEOUT:case f.ErrorDetails.KEY_LOAD_ERROR:case f.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal){var i=this.fragLoadError;i?i++:i=1;var a=this.config;if(i<=a.fragLoadingMaxRetry||n||t.autoLevel&&t.level){this.fragLoadError=i,t.loadCounter=0;var s=Math.min(Math.pow(2,i-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);d.logger.warn("mediaController: frag loading failed, retry in "+s+" ms"),this.retryDate=performance.now()+s,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.state=m}else d.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=T}break;case f.ErrorDetails.FRAG_LOOP_LOADING_ERROR:e.fatal||(n?(this._reduceMaxBufferLength(t.duration),this.state=v):t.autoLevel&&0!==t.level||(e.fatal=!0,this.state=T));break;case f.ErrorDetails.LEVEL_LOAD_ERROR:case f.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==T&&(e.fatal?(this.state=T,d.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==b||(this.state=v));break;case f.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==_&&this.state!==E||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=v):(d.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}}},{key:"_reduceMaxBufferLength",valu}},{key:"_checkBuffer",value:function(){var e=this.media,t=this.config;if(e&&e.readyState){var r=e.currentTime,n=this.mediaBuffer?this.mediaBuffer:e,i=n.buffered;if(!this.loadedmetadata&&i.length){this.loadedmetadata=!0;var a=e.seeking?r:this.startPosition,u=o.default.isBuffered(n,a),l=i.start(0);(r!==a||!u&&Math.abs(a-l)<t.maxSeekHole)&&(d.logger.log("target start position:"+a),u||(a=l,d.logger.log("target start position not buffered, seek to buffered.start(0) "+a)),d.logger.log("adjust currentTime from "+r+" to "+a),e.currentTime=a)}else if(this.immediateSwitch)this.immediateLevelSwitchEnd();else{var c=o.default.bufferInfo(e,r,0),h=!(e.paused||e.ended||0===e.buffered.length);if(r!==this.lastCurrentTime)this.stallReported&&(d.logger.warn("playback not stuck anymore @"+r+", after "+Math.round(performance.now()-this.stalled)+"ms"),this.stallReported=!1),this.stalled=void 0,this.nudgeRetry=0;else if(h){var p=performance.now(),v=this.hls;if(this.stalled){var g=p-this.stalled,y=c.len,m=this.nudgeRetry||0;if(y<=.5&&g>1e3*t.lowBufferWatchdogPeriod){this.stallReported||(this.stallReported=!0,d.logger.warn("playback stalling in low buffer @"+r),v.trigger(s.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:y}));var b=c.nextStart,_=b-r;if(b&&_<t.maxSeekHole&&_>0){this.nudgeRetry=++m;var E=m*t.nudgeOffset;d.logger.log("adjust currentTime from "+e.currentTime+" to next buffered @ "+b+" + nudge "+E),e.currentTime=b+E,this.stalled=void 0,v.trigger(s.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,hole:b+E-r})}}else if(y>.5&&g>1e3*t.highBufferWatchdogPeriod)if(this.stallReported||(this.stallReported=!0,d.logger.warn("playback stalling in high buffer @"+r),v.trigger(s.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:y})),this.stalled=void 0,this.nudgeRetry=++m,m<t.nudgeMaxRetry){var w=e.currentTime,S=w+m*t.nudgeOffset;d.logger.log("adjust currentTime from "+w+" to "+S),e.currentTime=S,v.trigger(s.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else d.logger.error("still stuck in high buffer @"+r+" after "+t.nudgeMaxRetry+", raise fatal error"),v.trigger(s.default.ERROR,{type:f.ErrorTypes.MEDIA_ERROR,details:f.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})}else this.stalled=p,this.stallReported=!1}}}}},{key:"onFragLoadEmergencyAborted",valu}},{key:"onBufferFlushed",value:function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;this._bufferedFrags=this._bufferedFrags.filter})),this.fragLoadIdx+=2*this.config.fragLoadingLoopThreshold,this.state=v,this.fragPrevious=null}},{key:"swapAudioCodec",valu}},{key:"computeLivePosition",valu}},{key:"state",se},get:function(){return this._state}},{key:"currentLevel",ge}},{key:"nextBufferedFrag",ge}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}]),t}(u.default);r.default=L},{20:20,28:28,29:29,30:30,32:32,33:33,43:43,46:46,47:47}],12:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.aesIV=r}return n(e,[{key:"decrypt",valu}}]),e}();r.default=i},{}],13:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(}return n(e,[{key:"uint8ArrayToUint32Array_",valu}},{key:"initTable",valu}},{key:"expandKey",valu}},{key:"networkToHostOrderSwap",valu}},{key:"decrypt",valu}},{key:"destroy",valu}}]),e}();r.default=i},{}],14:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=l(e(12)),o=l(e(15)),a=l(e(13)),s=e(28),u=e(46);function l(e){return e&&e.__esModule?e:{default:e}}var c=function(}return n(e,[{key:"isSync",valu}},{key:"decrypt",valu}},{key:"onWebCryptoError",valu}},{key:"destroy",valu}}]),e}();r.default=c},{12:12,13:13,15:15,28:28,46:46}],15:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subtle=t,this.key=r}return n(e,[{key:"expandKey",valu}}]),e}();r.default=i},{}],16:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=s(e(17)),o=e(46),a=s(e(22));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.observer=t,this.config=n,this.remuxer=r}return n(e,[{key:"resetInitSegment",value:function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:-1,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){for(var s=this._audioTrack,u=a.default.getID3Data(e,0),l=90*a.default.getTimeStamp(u),c=0,f=l,d=e.length,h=u.length,p=[{pts:f,dts:f,data:u}];h<d-1;)if(i.default.isHeader(e,h)&&h+5<d){i.default.initTrackConfig(s,this.observer,e,h,s.manifestCodec);var v=i.default.appendFrame(s,e,h,l,c);if(!v){o.logger.log("Unable to parse AAC frame");break}h+=v.length,f=v.sample.pts,c++}else a.default.isHeader(e,h)?(u=a.default.getID3Data(e,h),p.push({pts:f,dts:f,data:u}),h+=u.length):h++;this.remuxer.remux(s,{samples:[]},{samples:p,inputTimeScale:9e4},{samples:[]},t,r,n)}},{key:"destroy",value:function(){}}],[{key:"probe",value:function(e){var t,r,n=a.default.getID3Data(e,0);if(n&&void 0!==a.default.getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(i.default.probe(e,t))return o.logger.log("ADTS sync word found !"),!0;return!1}}]),e}();r.default=u},{17:17,22:22,46:46}],17:[function(e,t,r){"use strict";var n=e(46),i=e(28),o={getAudioConfig:function(e,t,r,o){var a,s,u,l,c,f=navigator.userAgent.toLowerCase(),d=o,h=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(a=1+((192&t[r+2])>>>6),!((s=(60&t[r+2])>>>2)>h.length-1))return l=(1&t[r+2])<<2,l|=(192&t[r+3])>>>6,n.logger.log("manifest codec:"+o+",ADTS data:type:"+a+",sampleingIndex:"+s+"["+h[s]+"Hz],channelConfig:"+l),/firefox/i.test(f)?s>=6?(a=5,c=new Array(4),u=s-3):(a=2,c=new Array(2),u=s):-1!==f.indexOf("android")?(a=2,c=new Array(2),u=s):(a=5,c=new Array(4),o&&(-1!==o.indexOf("mp4a.40.29")||-1!==o.indexOf("mp4a.40.5"))||!o&&s>=6?u=s-3:((o&&-1!==o.indexOf("mp4a.40.2")&&(s>=6&&1===l||/vivaldi/i.test(f))||!o&&1===l)&&(a=2,c=new Array(2)),u=s)),c[0]=a<<3,c[0]|=(14&s)>>1,c[1]|=(1&s)<<7,c[1]|=l<<3,5===a&&(c[1]|=(14&u)>>1,c[2]=(1&u)<<7,c[2]|=8,c[3]=0),{config:c,samplerate:h[s],channelCount:l,codec:"mp4a.40."+a,manifestCodec:d};e.trigger(Event.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+s})},isHeaderPatter},getHeaderLengt},getFullFrameLengt},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.getHeaderLength(e,t);t+5<e.length&&(r=this.getFullFrameLength(e,t));var n=t+r;if(n===e.length||n+1<e.length&&this.isHeaderPattern(e,n))return!0}return!1},initTrackConfig:function(e,t,r,i,o){if(!e.samplerate){var a=this.getAudioConfig(t,r,i,o);e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,n.logger.log("parsed codec:"+e.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}},getFrameDuratio},appendFrame:function(e,t,r,n,i){var o=this.getFrameDuration(e.samplerate),a=this.parseFrameHeader(t,r,n,i,o);if(a){var s=a.stamp,u=a.headerLength,l=a.frameLength,c={unit:t.subarray(r+u,r+u+l),pts:s,dts:s};return e.samples.push(c),e.len+=l,{sample:c,length:l+u}}},parseFrameHeader:function(e,t,r,n,i){var o,a,s=e.length;if(o=this.getHeaderLength(e,t),a=this.getFullFrameLength(e,t),(a-=o)>0&&t+o+a<=s)return{headerLength:o,frameLength:a,stamp:r+n*i}}};t.exports=o},{28:28,46:46}],18:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=h(e(30)),o=e(28),a=h(e(14)),s=h(e(16)),u=h(e(24)),l=h(e(27)),c=h(e(23)),f=h(e(40)),d=h(e(41));function h(e){return e&&e.__esModule?e:{default:e}}var p=function(}return n(e,[{key:"destroy",valu}},{key:"push",valu}},{key:"pushDecrypted",valu}}]),e}();r.default=p},{14:14,16:16,23:23,24:24,27:27,28:28,30:30,40:40,41:41}],19:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=s(e(18)),i=s(e(30)),o=e(46),a=s(e(1));function s(e){return e&&e.__esModule?e:{default:e}}r.default=function(e){var t=new a.default;t.trigger=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];t.removeListener.apply(t,[e].concat(n))};var };e.addEventListener("message",(function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.demuxer=new n.default(t,a.typeSupported,s,a.vendor);try{(0,o.enableLogs)(!0===s.debug)}catch(e){console.warn("demuxerWorker: unable to enable logs")}r("init",null);break;case"demux":e.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}})),t.on(i.default.FRAG_DECRYPTED,r),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(i.default.FRAG_PARSED,r),t.on(i.default.ERROR,r),t.on(i.default.FRAG_PARSING_METADATA,r),t.on(i.default.FRAG_PARSING_USERDATA,r),t.on(i.default.INIT_PTS_FOUND,r),t.on(i.default.FRAG_PARSING_DATA}))}},{1:1,18:18,30:30,46:46}],20:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=c(e(30)),o=c(e(18)),a=c(e(19)),s=e(46),u=e(28),l=c(e(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function t(r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.hls=r,this.id=n;var c=this.observer=new l.default,f=r.config;c.trigger=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];c.emit.apply(c,[e,e].concat(r))},c.off=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];c.removeListener.apply(c,[e].concat(r))};var }.bind(this);c.on(i.default.FRAG_DECRYPTED,d),c.on(i.default.FRAG_PARSING_INIT_SEGMENT,d),c.on(i.default.FRAG_PARSING_DATA,d),c.on(i.default.FRAG_PARSED,d),c.on(i.default.ERROR,d),c.on(i.default.FRAG_PARSING_METADATA,d),c.on(i.default.FRAG_PARSING_USERDATA,d),c.on(i.default.INIT_PTS_FOUND,d);var h={mp4:MediaSource.isTypeSupported("video/mp4"),mpeg:MediaSource.isTypeSupported("audio/mpeg"),mp3:MediaSource.isTypeSupported('audio/mp4; codecs="mp3"')},p=navigator.vendor;if(f.enableWorker&&"undefined"!=typeof Worker){s.logger.log("demuxing in webworker");var v=void 0;try{var g=e(3);v=this.w=g(a.default),this.onwmsg=this.onWorkerMessage.bind(this),v.addEventListener("message",this.onwmsg),v.onerro},v.postMessage({cmd:"init",typeSupported:h,vendor:p,id:n,config:JSON.stringify(f)})}catch(e){s.logger.error("error while initializing DemuxerWorker, fallback on DemuxerInline"),v&&URL.revokeObjectURL(v.objectURL),this.demuxer=new o.default(c,h,f,p),this.w=void 0}}else this.demuxer=new o.default(c,h,f,p)}return n(t,[{key:"destroy",valu}},{key:"push",valu}},{key:"onWorkerMessage",valu}}]),t}();r.default=f},{1:1,18:18,19:19,28:28,3:3,30:30,46:46}],21:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=e(46),o=function(}return n(e,[{key:"loadWord",valu}},{key:"skipBits",valu}},{key:"readBits",valu}},{key:"skipLZ",valu}},{key:"skipUEG",value:function(){this.skipBits(1+this.skipLZ())}},{key:"skipEG",valu}},{key:"readUEG",valu}},{key:"readEG",valu}},{key:"readBoolean",valu}},{key:"readUByte",value:function(){return this.readBits(8)}},{key:"readUShort",value:function(){return this.readBits(16)}},{key:"readUInt",valu}},{key:"skipScalingList",valu}},{key:"readSPS",valu}},{key:"readSliceType",valu}}]),e}();r.default=o},{46:46}],22:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"isHeader",value:function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}},{key:"isFooter",valu}},{key:"getID3Data",valu}},{key:"_readSize",valu}},{key:"getTimeStamp",valu}},{key:"isTimeStampFrame",valu}},{key:"_getFrameData",valu}},{key:"getID3Frames",valu}},{key:"_decodeFrame",valu}},{key:"_readTimeStamp",valu}},{key:"_decodePrivFrame",valu}},{key:"_decodeTextFrame",valu}},{key:"_decodeURLFrame",valu}},{key:"_utf8ArrayToStr",valu}}]),e}();r.default=i},{}],23:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=s(e(22)),o=e(46),a=s(e(25));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(}return n(e,[{key:"resetInitSegment",valu}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){for(var o=i.default.getID3Data(e,0),s=90*i.default.getTimeStamp(o),u=o.length,l=e.length,c=0,f=0,d=this._audioTrack,h=[{pts:s,dts:s,data:o}];u<l;)if(a.default.isHeader(e,u)){var p=a.default.appendFrame(d,e,u,s,c);if(!p)break;u+=p.length,f=p.sample.pts,c++}else i.default.isHeader(e,u)?(o=i.default.getID3Data(e,u),h.push({pts:f,dts:f,data:o}),u+=o.length):u++;this.remuxer.remux(d,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,r,n)}},{key:"destroy",value:function(){}}],[{key:"probe",valu}}]),e}();r.default=u},{22:22,25:25,46:46}],24:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(30),a=(n=o)&&n.__esModule?n:{default:n},s=Math.pow(2,32)-1,u=function(}return i(e,[{key:"resetTimeStamp",value:function(e){this.initPTS=e}},{key:"resetInitSegment",value:function(t,r,n,i){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t),s={};o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:i?t:null}),o.video&&(s.video={container:"video/mp4",codec:n,initSegment:i?t:null}),this.observer.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)}},{key:"append",valu}},{key:"destroy",value:function(){}}],[{key:"probe",valu}},{key:"bin2str",valu}},{key:"readUint32",valu}},{key:"writeUint32",valu}},{key:"findBox",valu}},{key:"parseInitSegment",value:function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach((function(t){var n=e.findBox(t,["tkhd"])[0];if(n){var i=n.data[n.start],o=0===i?12:20,a=e.readUint32(n,o),s=e.findBox(t,["mdia","mdhd"])[0];if(s){o=0===(i=s.data[s.start])?12:20;var u=e.readUint32(s,o),l=e.findBox(t,["mdia","hdlr"])[0];if(l){var c={soun:"audio",vide:"video"}[e.bin2str(l.data.subarray(l.start+8,l.start+12))];c&&(r[a]={timescale:u,type:c},r[c]={timescale:u,id:a})}}}})),r}},{key:"getStartDTS",value:function(t,r){var n,i,o;return n=e.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map((function(r){return e.findBox(r,["tfhd"]).map((function(n){var i,o;return i=e.readUint32(n,4),o=t[i].timescale||9e4,(e.findBox(r,["tfdt"]).map}))[0]||1/0)/o}))}))),o=Math.min.apply(null,i),isFinite(o)?o:0}},{key:"offsetStartDTS",valu}}]),e}();r.default=u},{30:30}],25:[function(e,t,r){"use strict";var n={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],appendFrame:function(e,t,r,n,i){if(!(r+24>t.length)){var o=this.parseHeader(t,r);if(o&&r+o.frameLength<=t.length){var a=n+i*(10368e4/o.sampleRate),s={unit:t.subarray(r,r+o.frameLength),pts:a,dts:a};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(s),e.len+=o.frameLength,{sample:s,length:o.frameLength}}}},parseHeade},isHeaderPatter},isHeade},prob}};t.exports=n},{}],26:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(14),a=(n=o)&&n.__esModule?n:{default:n},s=function(}return i(e,[{key:"decryptBuffer",valu}},{key:"decryptAacSample",valu}},{key:"decryptAacSamples",valu}},{key:"getAvcEncryptedData",valu}},{key:"getAvcDecryptedUnit",valu}},{key:"decryptAvcSample",valu}},{key:"decryptAvcSamples",valu}}]),e}();r.default=s},{14:14}],27:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=f(e(17)),o=f(e(25)),a=f(e(30)),s=f(e(21)),u=f(e(26)),l=e(46),c=e(28);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(}return n(e,[{key:"setDecryptData",valu}},{key:"resetInitSegment",valu}},{key:"resetTimeStamp",value:function(){}},{key:"append",value:function(e,t,r,n){var i,o,s,u,f,d=e.length,h=!1;this.contiguous=r;var p=this.pmtParsed,v=this._avcTrack,g=this._audioTrack,y=this._id3Track,m=v.id,b=g.id,_=y.id,E=this._pmtId,w=v.pesData,S=g.pesData,T=y.pesData,L=this._parsePAT,A=this._parsePMT,O=this._parsePES,k=this._parseAVCPES.bind(this),x=this._parseAACPES.bind(this),R=this._parseMPEGPES.bind(this),P=this._parseID3PES.bind(this);for(d-=d%188,i=0;i<d;i+=188)if(71===e[i]){if(o=!!(64&e[i+1]),s=((31&e[i+1])<<8)+e[i+2],(48&e[i+3])>>4>1){if((u=i+5+e[i+4])===i+188)continue}else u=i+4;switch(s){case m:o&&(w&&(f=O(w))&&k(f,!1),w={data:[],size:0}),w&&(w.data.push(e.subarray(u,i+188)),w.size+=i+188-u);break;case b:o&&(S&&(f=O(S))&&(g.isAAC?x(f):R(f)),S={data:[],size:0}),S&&(S.data.push(e.subarray(u,i+188)),S.size+=i+188-u);break;case _:o&&(T&&(f=O(T))&&P(f),T={data:[],size:0}),T&&(T.data.push(e.subarray(u,i+188)),T.size+=i+188-u);break;case 0:o&&(u+=e[u]+1),E=this._pmtId=L(e,u);break;case E:o&&(u+=e[u]+1);var D=A(e,u,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(m=D.avc)>0&&(v.id=m),(b=D.audio)>0&&(g.id=b,g.isAAC=D.isAAC),(_=D.id3)>0&&(y.id=_),h&&!p&&(l.logger.log("reparse from beginning"),h=!1,i=-188),p=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(a.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});w&&(f=O(w))?(k(f,!0),v.pesData=null):v.pesData=w,S&&(f=O(S))?(g.isAAC?x(f):R(f),g.pesData=null):(S&&S.size&&l.logger.log("last AAC PES packet truncated,might overlap between fragments"),g.pesData=S),T&&(f=O(T))?(P(f),y.pesData=null):y.pesData=T,null==this.sampleAes?this.remuxer.remux(g,v,y,this._txtTrack,t,r,n):this.decryptAndRemux(g,v,y,this._txtTrack,t,r,n)}},{key:"decryptAndRemux",valu}},{key:"decryptAndRemuxAvc",valu}},{key:"destroy",valu}},{key:"_parsePAT",valu}},{key:"_parsePMT",valu}},{key:"_parsePES",valu}},{key:"pushAccesUnit",valu}},{key:"_parseAVCPES",value:function(e,t){var r,n,i,o=this,a=this._avcTrack,u=this._parseAVCNALu(e.data),l=this.avcSample,c=!1,f=this.pushAccesUnit.bind(this),};e.data=null,l&&u.length&&(f(l,a),l=this.avcSample=d(!1,e.pts,e.dts,"")),u.forEach((function(t){switch(t.type){case 1:n=!0,l.frame=!0;var u=t.data;if(c&&u.length>4){var h=new s.default(u).readSliceType();2!==h&&4!==h&&7!==h&&9!==h||(l.key=!0)}break;case 5:n=!0,l||(l=o.avcSample=d(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0,(r=new s.default(o.discardEPB(t.data))).readUByte();for(var p=0,v=0,g=!1,y=0;!g&&r.bytesAvailable>1;){p=0;do{p+=y=r.readUByte()}while(255===y);v=0;do{v+=y=r.readUByte()}while(255===y);if(4===p&&0!==r.bytesAvailable){if(g=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var m=r.readUByte(),b=31&m,_=[m,r.readUByte()];for(i=0;i<b;i++)_.push(r.readUByte()),_.push(r.readUByte()),_.push(r.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:_})}}else if(v<r.bytesAvailable)for(i=0;i<v;i++)r.readUByte()}break;case 7:if(n=!0,c=!0,!a.sps){var E=(r=new s.default(t.data)).readSPS();a.width=E.width,a.height=E.height,a.pixelRatio=E.pixelRatio,a.sps=[t.data],a.duration=o._duration;var w=t.data.subarray(1,4),S="avc1.";for(i=0;i<3;i++){var T=w[i].toString(16);T.length<2&&(T="0"+T),S+=T}a.codec=S}break;case 8:n=!0,a.pps||(a.pps=[t.data]);break;case 9:n=!1,l&&f(l,a),l=o.avcSample=d(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&n&&l.units.push(t)})),t&&l&&(f(l,a),this.avcSample=null)}},{key:"_insertSampleInOrder",valu}},{key:"_getLastNalUnit",valu}},{key:"_parseAVCNALu",valu}},{key:"discardEPB",valu}},{key:"_parseAACPES",value:function(e){var t,r,n,o,s,u,f,d=this._audioTrack,h=e.data,p=e.pts,v=this.aacOverFlow,g=this.aacLastPTS;if(v){var y=new Uint8Array(v.byteLength+h.byteLength);y.set(v,0),y.set(h,v.byteLength),h=y}for(n=0,s=h.length;n<s-1&&!i.default.isHeader(h,n);n++);if(!n||(n<s-1?(u="AAC PES did not start with ADTS header,offset:"+n,f=!1):(u="no ADTS header found in AAC PES",f=!0),l.logger.warn("parsing error:"+u),this.observer.trigger(a.default.ERROR,{type:c.ErrorTypes.MEDIA_ERROR,details:c.ErrorDetails.FRAG_PARSING_ERROR,fatal:f,reason:u}),!f)){if(i.default.initTrackConfig(d,this.observer,h,n,this.audioCodec),r=0,t=i.default.getFrameDuration(d.samplerate),v&&g){var m=g+t;Math.abs(m-p)>1&&(l.logger.log("AAC: align PTS for overlapping frames by "+Math.round((m-p)/90)),p=m)}for(;n<s;)if(i.default.isHeader(h,n)&&n+5<s){var b=i.default.appendFrame(d,h,n,p,r);if(!b)break;n+=b.length,o=b.sample.pts,r++}else n++;v=n<s?h.subarray(n,s):null,this.aacOverFlow=v,this.aacLastPTS=o}}},{key:"_parseMPEGPES",valu}},{key:"_parseID3PES",valu}}],[{key:"probe",valu}}]),e}();r.default=d},{17:17,21:21,25:25,26:26,28:28,30:30,46:46}],28:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},r.ErrorDetails={MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOOP_LOADING_ERROR:"fragLoopLoadingError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException",WEBVTT_EXCEPTION:"webVTTException"}},{}],29:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e(46),s=e(28),u=e(30),l=(n=u)&&n.__esModule?n:{default:n};function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=function(}return o(e,[{key:"destroy",valu}},{key:"isEventHandler",valu}},{key:"registerListeners",valu}},{key:"unregisterListeners",valu}},{key:"onEvent",valu}},{key:"onEventGeneric",valu}}]),e}();r.default=f},{28:28,30:30,46:46}],30},{}],31:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"getSilentFrame",valu}}]),e}();r.default=i},{}],32:[function(e,t,r){"use strict";var n={isBuffere},bufferInf},bufferedInf}};t.exports=n},{}],33:[function(e,t,r){"use strict";var n=e(46),i={mergeDetails:function(e,t){var r,o=Math.max(e.startSN,t.startSN)-t.startSN,a=Math.min(e.endSN,t.endSN)-t.startSN,s=t.startSN-e.startSN,u=e.fragments,l=t.fragments,c=0;if(a<o)t.PTSKnown=!1;else{for(var f=o;f<=a;f++){var d=u[s+f],h=l[f];h&&d&&(c=d.cc-h.cc,isNaN(d.startPTS)||(h.start=h.startPTS=d.startPTS,h.endPTS=d.endPTS,h.duration=d.duration,h.backtracked=d.backtracked,h.dropped=d.dropped,r=h))}if(c)for(n.logger.log("discontinuity sliding from playlist, take drift into account"),f=0;f<l.length;f++)l[f].cc+=c;if(r)i.updateFragPTSDTS(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS);else if(s>=0&&s<u.length){var p=u[s].start;for(f=0;f<l.length;f++)l[f].start+=p}t.PTSKnown=e.PTSKnown}},updateFragPTSDTS:function(e,t,r,n,o,a){var s=r;if(!isNaN(t.startPTS)){var u=Math.abs(t.startPTS-r);isNaN(t.deltaPTS)?t.deltaPTS=u:t.deltaPTS=Math.max(u,t.deltaPTS),s=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),n=Math.max(n,t.endPTS),o=Math.min(o,t.startDTS),a=Math.max(a,t.endDTS)}var l=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=s,t.endPTS=n,t.startDTS=o,t.endDTS=a,t.duration=n-r;var c,f,d,h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;for(c=h-e.startSN,(f=e.fragments)[c]=t,d=c;d>0;d--)i.updatePTS(f,d,d-1);for(d=c;d<f.length-1;d++)i.updatePTS(f,d,d+1);return e.PTSKnown=!0,l},updatePT}};t.exports=i},{46:46}],34:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=g(e(2)),o=g(e(30)),a=e(28),s=g(e(38)),u=g(e(36)),l=g(e(37)),c=g(e(11)),f=g(e(10)),d=g(e(9)),h=e(46),p=g(e(1)),v=e(4);function g(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var m=function(}return n(e,null,[{key:"isSupported",valu}},{key:"version",get:function(){return"0.7.11"}},{key:"Events",get:function(){return o.default}},{key:"ErrorTypes",get:function(){return a.ErrorTypes}},{key:"ErrorDetails",ge}},{key:"DefaultConfig",ge},se}}]),n(e,[{key:"destroy",valu}},{key:"attachMedia",valu}},{key:"detachMedia",valu}},{key:"loadSource",valu}},{key:"startLoad",valu}},{key:"stopLoad",valu}},{key:"swapAudioCodec",valu}},{key:"recoverMediaError",valu}},{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},se}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},se}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){h.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},se}},{key:"firstLevel",ge},se}},{key:"startLevel",get:function(){return this.levelController.startLevel},se}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},se}},{key:"autoLevelEnabled",ge}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",ge}},{key:"maxAutoLevel",ge}},{key:"nextAutoLevel",ge},se}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",ge}},{key:"subtitleTrack",ge},se}}]),e}();r.default=m},{1:1,10:10,11:11,2:2,28:28,30:30,36:36,37:37,38:38,4:4,46:46,9:9}],35},{34:34}],36:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=u(e(30)),o=u(e(29)),a=e(28),s=e(46);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.FRAG_LOADING));return r.loaders={},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"destroy",valu}},{key:"onFragLoading",valu}},{key:"loadsuccess",valu}},{key:"loaderror",valu}},{key:"loadtimeout",valu}},{key:"loadprogress",valu}}]),t}(o.default);r.default=l},{28:28,29:29,30:30,46:46}],37:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=u(e(30)),o=u(e(29)),a=e(28),s=e(46);function u(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i.default.KEY_LOADING));return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"destroy",value:function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},o.default.prototype.destroy.call(this)}},{key:"onKeyLoading",valu}},{key:"loadsuccess",valu}},{key:"loaderror",valu}},{key:"loadtimeout",valu}}]),t}(o.default);r.default=l},{28:28,29:29,30:30,46:46}],38:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=c(e(2)),o=c(e(30)),a=c(e(29)),s=e(28),u=c(e(42)),l=e(46);function c(e){return e&&e.__esModule?e:{default:e}var d=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,h=/#EXT-X-MEDIA:(.*)/g,p=new RegExp([/#EXTINF:(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)(\S+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),v=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)(.*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,}(),y=function(}return n(e,[{key:"createInitializationVector",valu}},{key:"fragmentDecryptdataFromLevelkey",valu}},{key:"cloneObj",valu}},{key:"url",ge},se}},{key:"programDateTime",ge}},{key:"byteRange",ge}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",ge}},{key:"decryptdata",ge}}]),e}(),m=function(e){function t(e){f(this,t);var }(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o.default.MANIFEST_LOADING,o.default.LEVEL_LOADING,o.default.AUDIO_TRACK_LOADING,o.default.SUBTITLE_TRACK_LOADING));return r.loaders={},r}retur}(t,e),n(t,[{key:"destroy",valu}},{key:"onManifestLoading",valu}},{key:"onLevelLoading",valu}},{key:"onAudioTrackLoading",value:function(e){this.load(e.url,{type:"audioTrack",id:e.id})}},{key:"onSubtitleTrackLoading",valu}},{key:"load",value:function(e,t){var r=this.loaders[t.type];if(r){var n=r.context;if(n&&n.url===e)return void l.logger.trace("playlist request ongoing");l.logger.warn("abort previous loader for type:"+t.type),r.abort()}var i,o,a=this.hls.config,s=void 0,u=void 0,c=void 0,f=void 0;"manifest"===t.type?(s=a.manifestLoadingMaxRetry,u=a.manifestLoadingTimeOut,c=a.manifestLoadingRetryDelay,f=a.manifestLoadingMaxRetryTimeout):(s=a.levelLoadingMaxRetry,u=a.levelLoadingTimeOut,c=a.levelLoadingRetryDelay,f=a.levelLoadingMaxRetryTimeout,l.logger.log("loading playlist for "+t.type+" "+(t.level||t.id))),r=this.loaders[t.type]=t.loader=void 0!==a.pLoader?new a.pLoader(a):new a.loader(a),t.url=e,t.responseType="",i={timeout:u,maxRetry:s,retryDelay:c,maxRetryDelay:f},o={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},r.load(t,i,o)}},{key:"resolve",valu}},{key:"parseMasterPlaylist",value:function(e,t){var r=[],n=void 0;for(d.lastIndex=0;null!=(n=d.exec(e));){var i={},o=i.attrs=new u.default(n[1]);i.url=this.resolve(n[2],t);var a=o.decimalResolution("RESOLUTION");a&&(i.width=a.width,i.height=a.height),i.bitrate=o.decimalInteger("AVERAGE-BANDWIDTH")||o.decimalInteger("BANDWIDTH"),i.name=o.NAME;var s=o.CODECS;if(s){s=s.split(/[ ,]+/);for(var l=0;l<s.length;l++){var c=s[l];-1!==c.indexOf("avc1")?i.videoCodec=this.avc1toavcoti(c):-1!==c.indexOf("hvc1")?i.videoCodec=c:i.audioCodec=c}}r.push(i)}return r}},{key:"parseMasterPlaylistMedia",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=void 0,o=[],a=0;for(h.lastIndex=0;null!=(i=h.exec(e));){var s={},l=new u.default(i[1]);l.TYPE===r&&(s.groupId=l["GROUP-ID"],s.name=l.NAME,s.type=r,s.default="YES"===l.DEFAULT,s.autoselect="YES"===l.AUTOSELECT,s.forced="YES"===l.FORCED,l.URI&&(s.url=this.resolve(l.URI,t)),s.lang=l.LANGUAGE,s.name||(s.name=s.lang),n&&(s.audioCodec=n),s.id=a++,o.push(s))}return o}},{key:"avc1toavcoti",valu}},{key:"parseLevelPlaylist",value:function(e,t,r,n){var i,o,a=0,s=0,c={type:null,version:null,url:t,fragments:[],live:!0,startSN:0},f=new g,d=0,h=null,m=new y;for(p.lastIndex=0;null!==(i=p.exec(e));){var b=i[1];if(b){m.duration=parseFloat(b);var _=(" "+i[2]).slice(1);m.title=_||null,m.tagList.push(_?["INF",b,_]:["INF",b])}else if(i[3]){if(!isNaN(m.duration)){var E=a++;m.type=n,m.start=s,m.levelkey=f,m.sn=E,m.level=r,m.cc=d,m.baseurl=t,m.relurl=(" "+i[3]).slice(1),c.fragments.push(m),h=m,s+=m.duration,m=new y}}else if(i[4]){if(m.rawByteRange=(" "+i[4]).slice(1),h){var w=h.byteRangeEndOffset;w&&(m.lastByteRangeEndOffset=w)}}else if(i[5])m.rawProgramDateTime=(" "+i[5]).slice(1),m.tagList.push(["PROGRAM-DATE-TIME",m.rawProgramDateTime]);else{for(i=i[0].match(v),o=1;o<i.length&&void 0===i[o];o++);var S=(" "+i[o+1]).slice(1),T=(" "+i[o+2]).slice(1);switch(i[o]){case"#":m.tagList.push(T?[S,T]:[S]);break;case"PLAYLIST-TYPE":c.type=S.toUpperCase();break;case"MEDIA-SEQUENCE":a=c.startSN=parseInt(S);break;case"TARGETDURATION":c.targetduration=parseFloat(S);break;case"VERSION":c.version=parseInt(S);break;case"EXTM3U":break;case"ENDLIST":c.live=!1;break;case"DIS":d++,m.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":d=parseInt(S);break;case"KEY":var L=S,A=new u.default(L),O=A.enumeratedString("METHOD"),k=A.URI,x=A.hexadecimalInteger("IV");O&&(f=new g,k&&["AES-128","SAMPLE-AES"].indexOf(O)>=0&&(f.method=O,f.baseuri=t,f.reluri=k,f.key=null,f.iv=x));break;case"START":var R=S,P=new u.default(R).decimalFloatingPoint("TIME-OFFSET");isNaN(P)||(c.startTimeOffset=P);break;case"MAP":var D=new u.default(S);m.relurl=D.URI,m.rawByteRange=D.BYTERANGE,m.baseurl=t,m.level=r,m.type=n,m.sn="initSegment",c.initSegment=m,m=new y;break;default:l.logger.warn("line parsed but not handled: "+i)}}}return(m=h)&&!m.relurl&&(c.fragments.pop(),s-=m.duration),c.totalduration=s,c.averagetargetduration=s/c.fragments.length,c.endSN=a-1,c}},{key:"loadsuccess",valu}},{key:"loaderror",valu}},{key:"loadtimeout",valu}}]),t}(a.default);r.default=m},{2:2,28:28,29:29,30:30,42:42,46:46}],39:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=Math.pow(2,32)-1,o=function(}return n(e,null,[{key:"init",valu}},{key:"box",valu}},{key:"hdlr",valu}},{key:"mdat",valu}},{key:"mdhd",valu}},{key:"mdia",valu}},{key:"mfhd",valu}},{key:"minf",valu}},{key:"moof",valu}},{key:"moov",valu}},{key:"mvex",valu}},{key:"mvhd",valu}},{key:"sdtp",valu}},{key:"stbl",valu}},{key:"avc1",valu}},{key:"esds",valu}},{key:"mp4a",valu}},{key:"mp3",valu}},{key:"stsd",valu}},{key:"tkhd",valu}},{key:"traf",valu}},{key:"trak",valu}},{key:"trex",valu}},{key:"trun",valu}},{key:"initSegment",valu}}]),e}();r.default=o},{}],40:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=l(e(31)),o=l(e(30)),a=e(46),s=l(e(39)),u=e(28}var c=function(}return n(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",valu}},{key:"resetInitSegment",valu}},{key:"remux",value:function(e,t,r,n,i,s,u){if(this.ISGenerated){if(u){var l=this._initPTS,c=this._PTSNormalize,f=e.inputTimeScale||t.inputTimeScale,d=1/0,h=1/0,p=e.samples;if(p.length&&(d=h=c(p[0].pts-f*i,l)),(p=t.samples).length){var v=p[0];d=Math.min(d,c(v.pts-f*i,l)),h=Math.min(h,c(v.dts-f*i,l))}if(d!==1/0){var g=l-d;Math.abs(g)>10*f&&(a.logger.warn("timestamp inconsistency, "+(g/f).toFixed(3)+"s delta against expected value: missing discontinuity ? reset initPTS/initDTS"),this._initPTS=d,this._initDTS=h,this.observer.trigger(o.default.INIT_PTS_FOUND,{initPTS:d}))}}}else this.generateIS(e,t,i);if(this.ISGenerated)if(e.samples.length){e.timescale||(a.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var y=this.remuxAudio(e,i,s,u);if(t.samples.length){var m=void 0;y&&(m=y.endPTS-y.startPTS),t.timescale||(a.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,i,s,m,u)}}else{var b=void 0;t.samples.length&&(b=this.remuxVideo(t,i,s,u)),b&&e.codec&&this.remuxEmptyAudio(e,i,s,b)}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(o.default.FRAG_PARSED)}},{key:"generateIS",valu}},{key:"remuxVideo",value:function(e,t,r,n,i){var l,c,f,d,h,p,v,g=8,y=e.timescale,m=e.samples,b=[],_=m.length,E=this._PTSNormalize,w=this._initDTS,S=this.nextAvcDts,T=this.isSafari;T&&(r|=m.length&&S&&(i&&Math.abs(t-S/y)<.1||Math.abs(m[0].pts-S-w)<y/5)),r||(S=t*y),m.forEach})),m.sort}));var L=m.reduce}),0);if(L<0){a.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(L/90)+" ms to overcome this issue");for(var A=0;A<m.length;A++)m[A].dts+=L}var O=m[0];h=Math.max(O.dts,0),d=Math.max(O.pts,0);var k=Math.round((h-S)/90);r&&k&&(k>1?a.logger.log("AVC:"+k+" ms hole between fragments detected,filling it"):k<-1&&a.logger.log("AVC:"+-k+" ms overlapping between fragments detected"),h=S,m[0].dts=h,d=Math.max(d-k,S),m[0].pts=d,a.logger.log("Video/PTS/DTS adjusted: "+Math.round(d/90)+"/"+Math.round(h/90)+",delta:"+k+" ms")),O=m[m.length-1],v=Math.max(O.dts,0),p=Math.max(O.pts,0,v),T&&(l=Math.round((v-h)/(m.length-1)));for(var x=0,R=0,P=0;P<_;P++){for(var D=m[P],C=D.units,I=C.length,F=0,M=0;M<I;M++)F+=C[M].data.length;R+=F,x+=I,D.length=F,D.dts=T?h+P*l:Math.max(D.dts,h),D.pts=Math.max(D.pts,D.dts)}var j=R+4*x+8;try{c=new Uint8Array(j)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:u.ErrorTypes.MUX_ERROR,details:u.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating video mdat "+j})}var N=new DataView(c.buffer);N.setUint32(0,j),c.set(s.default.types.mdat,4);for(var U=0;U<_;U++){for(var B=m[U],V=B.units,G=0,H=void 0,z=0,W=V.length;z<W;z++){var K=V[z],q=K.data,Y=K.data.byteLength;N.setUint32(g,Y),g+=4,c.set(q,g),g+=Y,G+=4+Y}if(T)H=Math.max(0,l*Math.round((B.pts-B.dts)/l));else{if(U<_-1)l=m[U+1].dts-B.dts;else{var X=this.config,$=B.dts-m[U>0?U-1:U].dts;if(X.stretchShortVideoTrack){var J=X.maxBufferHole,Q=X.maxSeekHole,Z=Math.floor(Math.min(J,Q)*y),ee=(n?d+n*y:this.nextAudioPts)-B.pts;ee>Z?((l=ee-$)<0&&(l=$),a.logger.log("It is approximately "+ee/90+" ms to the next segment; using duration "+l/90+" ms for the last video frame.")):l=$}else l=$}H=Math.round(B.pts-B.dts)}b.push({size:G,duration:l,cts:H,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:B.key?2:1,isNonSync:B.key?0:1}})}this.nextAvcDts=v+l;var te=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,b.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var re=b[0].flags;re.dependsOn=2,re.isNonSync=0}e.samples=b,f=s.default.moof(e.sequenceNumber++,h,e),e.samples=[];var ne={data1:f,data2:c,startPTS:d/y,endPTS:(p+l)/y,startDTS:h/y,endDTS:this.nextAvcDts/y,type:"video",nb:b.length,dropped:te};return this.observer.trigger(o.default.FRAG_PARSING_DATA,ne),ne}},{key:"remuxAudio",value:function(e,t,r,n){var l,c,f,d,h,p,v,g=e.inputTimeScale,y=g/e.timescale,m=(e.isAAC?1024:1152)*y,b=this._PTSNormalize,_=this._initDTS,E=!e.isAAC&&this.typeSupported.mpeg,w=e.samples,S=[],T=this.nextAudioPts;if((r|=w.length&&T&&(n&&Math.abs(t-T/g)<.1||Math.abs(w[0].pts-T-_)<20*m))||(T=t*g),w.forEach})),w.sort((function(e,t){return e.pts-t.pts})),n&&e.isAAC)for(var L=0,A=T;L<w.length;){var O,k=w[L];O=k.pts-A;var x=Math.abs(1e3*O/g);if(O<=-m)a.logger.warn("Dropping 1 audio frame @ "+(A/g).toFixed(3)+"s due to "+x+" ms overlap."),w.splice(L,1),e.len-=k.unit.length;else if(O>=m&&x<1e4&&A){var R=Math.round(O/m);a.logger.warn("Injecting "+R+" audio frame @ "+(A/g).toFixed(3)+"s due to "+Math.round(1e3*O/g)+" ms gap.");for(var P=0;P<R;P++){var D=Math.max(A,0);(f=i.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(a.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),f=k.unit.subarray()),w.splice(L,0,{unit:f,pts:D,dts:D}),e.len+=f.length,A+=m,L++}k.pts=k.dts=A,A+=m,L++}else Math.abs(O),k.pts=k.dts=A,A+=m,L++}for(var C=0,I=w.length;C<I;C++){var F=w[C],M=F.unit,j=F.pts;if(void 0!==v)c.duration=Math.round((j-v)/y);else{var N=Math.round(1e3*(j-T)/g),U=0;if(r&&e.isAAC&&N){if(N>0&&N<1e4)U=Math.round((j-T)/m),a.logger.log(N+" ms hole between AAC samples detected,filling it"),U>0&&((f=i.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(f=M.subarray()),e.len+=U*f.length);else if(N<-12){a.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(T/g).toFixed(3)+"s/"+(j/g).toFixed(3)+"s/"+-N+"ms"),e.len-=M.byteLength;continue}j=T}if(p=Math.max(0,j),!(e.len>0))return;var B=E?e.len:e.len+8;l=E?0:8;try{d=new Uint8Array(B)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:u.ErrorTypes.MUX_ERROR,details:u.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:B,reason:"fail allocating audio mdat "+B})}E||(new DataView(d.buffer).setUint32(0,B),d.set(s.default.types.mdat,4));for(var V=0;V<U;V++)(f=i.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(a.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),f=M.subarray()),d.set(f,l),l+=f.byteLength,c={size:f.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(c)}d.set(M,l);var G=M.byteLength;l+=G,c={size:G,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(c),v=j}var H=0,z=S.length;if(z>=2&&(H=S[z-2].duration,c.duration=H),z){this.nextAudioPts=T=v+y*H,e.len=0,e.samples=S,h=E?new Uint8Array:s.default.moof(e.sequenceNumber++,p/y,e),e.samples=[];var W=p/g,K=T/g,q={data1:h,data2:d,startPTS:W,endPTS:K,startDTS:W,endDTS:K,type:"audio",nb:z};return this.observer.trigger(o.default.FRAG_PARSING_DATA,q),q}return null}},{key:"remuxEmptyAudio",valu}},{key:"remuxID3",valu}},{key:"remuxText",valu}},{key:"_PTSNormalize",valu}}]),e}();r.default=c},{28:28,30:30,31:31,39:39,46:46}],41:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(30),a=(n=o)&&n.__esModule?n:{default:n},s=function(}return i(e,[{key:"destroy",value:function(){}},{key:"resetTimeStamp",value:function(){}},{key:"resetInitSegment",value:function(){}},{key:"remux",valu}}]),e}();r.default=s},{30:30}],42:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=/^(\d+)x(\d+)$/,o=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,a=function(}return n(e,[{key:"decimalInteger",value:function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}},{key:"hexadecimalInteger",valu}},{key:"hexadecimalIntegerAsNumber",valu}},{key:"decimalFloatingPoint",valu}},{key:"enumeratedString",valu}},{key:"decimalResolution",valu}}],[{key:"parseAttrList",valu}}]),e}();r.default=a},{}],43:[function(e,t,r){"use strict";t.exports={searc}}},{}],44:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=e(45),a=(n=o)&&n.__esModule?n:{default:n},s=function(){function e(t,r,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.hls=t,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new a.default(r),this.fast_=new a.default(n)}return i(e,[{key:"sample",valu}},{key:"canEstimate",valu}},{key:"getEstimate",valu}},{key:"destroy",valu}}]),e}();r.default=s},{45:45}],45:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=function(}return n(e,[{key:"sample",valu}},{key:"getTotalWeight",value:function(){return this.totalWeight_}},{key:"getEstimate",valu}}]),e}();r.default=i},{}],46:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterato};function i(){}var o={trace:i,debug:i,log:i,warn:i,info:i,error:i},a=r.enableLogs=function(e){if(!0===e||"object"===(void 0===e?"undefined":n(e))){!function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach}))}(e,"debug","log","info","warn","error");try{a.log()}catch(e){a=o}}else a=o},r.logger=a},{}],47:[function(e,t,r){"use strict";t.exports={toStrin}}},{}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var }(),i=e(46),o=function(}return n(e,[{key:"destroy",valu}},{key:"abort",valu}},{key:"load",valu}},{key:"loadInternal",valu}},{key:"readystatechange",valu}},{key:"loadtimeout",valu}},{key:"loadprogress",valu}}]),e}();r.default=o},{46:46}]},{},[35])(35)}]]);
//# sourceMappingURL=vendor.0a446af16d7ae886b8da.js.map?brotli=allow