"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9645],{UXKy:function(e,t,a){a.r(t),a.d(t,{default:);var i=a("beVP"),n=a("11lP"),s=a("2GZr"),r=a("QslU"),o=a("Oz0t"),l=a("V67U"),c=a.n(l),u=a("FhAj"),_=a("bPwt"),d=a("bBVy"),g=a("LF2G"),v=a("UT5F"),m=a("lEcB"),p=a("U21o"),S=a("f+Nb"),E="name",f="message",y=function(e){var t,a=e.userName,i=e.defaultMessage,n=e.onSubmitSuccess,s=void 0===n?function(){}:n,l=(0,o.useContext)(d.Z).i18n,c=((t={})[E]=a,t[f]=i,t),u=(0,o.useState)(c),_=u[0],g=u[1],v=(0,o.useState)({}),m=v[0],p=v[1];return(0,r.jsx)("div",{className:"ma-MessagingConversationModalForm",children:(0,r.jsx)(S.ZP,{formId:"messaging-create-conversation",fields:_,setFields:g,errors:m,setErrors:p,renderer:function(e){var t,a=e.id;return((t={})[f]={size:"long"},t)[a]},formJSON:{form:{id:"messaging-create-conversation",type:"group",fields:[{type:"text",display:"",id:E,label:l.t("MESSAGING_CONVERSATION_MODAL_FORM_NAME_LABEL"),required:!0,disabled:!0,constraints:[{property:{notnull:""},message:l.t("MESSAGING_CONVERSATION_MODAL_FORM_ERROR_FIELD_EMPTY")}],value:c[E]},{type:"text",display:"multiline",id:f,label:l.t("MESSAGING_CONVERSATION_MODAL_FORM_LABEL"),constraints:[{property:{notnull:""},message:l.t("MESSAGING_CONVERSATION_MODAL_FORM_ERROR_FIELD_EMPTY")}],value:c[f]}]}},onSubmitSuccessfully:)})};y.displayName="MessagingConversationModalForm",y.propTypes={userName:c().string,defaultMessage:c().string,onSubmitSuccess:c().func};var A=y;function M(e){var t=e.visible,a=e.adId,l=e.sellerId,c=e.defaultMessage,S=e.trackingData,E=void 0===S?{}:S,f=e.isSitePrivate,y=e.onClose,M=void 0===y?y,N=e.ad,O=void 0===N?{}:N,C=(0,o.useContext)(d.Z),I=C.i18n,b=C.domain,L=(0,p.C6)(),R=L.user,h=L.isLoading,x=L.isError,T=(0,o.useState)(!1),G=T[0],Z=T[1],F=(0,o.useState)(!1),j=F[0],D=F[1],k=(0,g.Z)((0,i.Z)((function(e){var t;return(0,s.__generator)(this,(function(i){return t=e.message,[2,b.get("create_conversation_messaging_use_case").execute({message:t,adId:a,sellerId:l,buyerId:null==R?void 0:R.userId})]}))})),{onSuccess:onError:),P=k[0],V=k[1].isLoading,U=function(){var e,t,i,s,r,o,l,c,u,_,d,g,v,m=b.get("config").get("TRACKING_EVENTS_NAMES"),p=m.AD_DETAIL_CONTACT_EMAIL,S=m.CONTACT_EMAIL_LEAD,y=m.PURCHASE_GOOGLE_ANALYTICS,A=E.filtered_provinces,M=E.label,N=E.page_category_level1,C=E.page_category_level2,I=E.page_category_level3,L=E.page_category_level4,R=E.page_category_level5,h=E.page_type,x=E.vertical,T={event:p,data:(0,n.Z)({event_name_adobe:S,ad_id:a,page_category_level1:N},C&&{page_category_level2:C},I&&{page_category_level3:I},L&&{page_category_level4:L},R&&{page_category_level5:R},{products:[{id:a.toString(),category:"ads",product_id:a.toString()}],vertical:x,page_type:h,ad_site_private:f,filtered_provinces:A,label:M||"detalle"})};b.get("call_link_tracking_use_case").execute(T),b.get("call_link_tracking_use_case").execute({data:{event_name:y,event_name_adobe:y,event_type:p,currency:"EUR",transaction_id:O.id,value:null==(e=O.price)||null==(t=e.cashPrice)?void 0:t.value,items:[{item_id:O.id,item_name:O.title,index:1,item_brand:null==(i=O.category)?void 0:i.name,item_category:null==(s=O.categories)||null==(r=s[0])?void 0:r.name,item_category2:null==(o=O.categories)||null==(l=o[1])?void 0:l.name,item_category3:null==(c=O.categories)||null==(u=c[2])?void 0:u.name,item_category4:null==(_=O.categories)||null==(d=_[3])?void 0:d.name,price:null==(g=O.price)||null==(v=g.cashPrice)?void 0:v.value,quantity:1}]}})},B=(0,i.Z)((function(e){var t;return(0,s.__generator)(this,(function(a){return t=e.message,P({message:t}),[2]}))}));return(0,r.jsx)(v.Z,{header:!(j||G)&&I.t("MESSAGING_CONVERSATION_MODAL_HEADER"),size:j||G?void 0:v.Z.SIZES.SMALL,visible:t,onClose:M,isContentless:!0,isResponsive:!0,children:G||j?(0,r.jsx)(v.Z.Content,{children:(0,r.jsx)(m.M,{onClickClose:M,isError:j,showWebChatLink:!0})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(v.Z.Content,{children:[h&&(0,r.jsx)(_.Z,{}),!h&&!x&&(0,r.jsx)(A,{onSubmitSuccess:B,userName:null==R?void 0:R.userName,defaultMessage:c})]}),(0,r.jsx)(v.Z.Footer,{children:(0,r.jsx)(v.Z.FooterActions,{children:(0,r.jsx)(u.ZP,{color:"primary",form:"messaging-create-conversation",isLoading:V,isSubmit:!0,fullWidth:!0,disabled:h||x,children:I.t("MESSAGING_CONVERSATION_MODAL_FORM_SUBMIT")})})})]})})}M.displayName="MessagingConversationModal",M.propTypes={visible:c().bool,adId:c().string.isRequired,sellerId:c().string.isRequired,defaultMessage:c().string,trackingData:c().object,isSitePrivate:c().bool,onClose:c().func,ad:c().object}}}]);