(self.webpackChunkrelap_widgets=self.webpackChunkrelap_widgets||[]).push([[48005],{3627:(e,t,r)=>{var o=r(32747);function n(e){return o.createElement("svg",e,[o.createElement("defs",{key:0},o.createElement("style",null,".checkmark{fill:none;stroke:#FFF;stroke-linejoin:round;stroke-width:3px;stroke-linecap:round}")),o.createElement("polyline",{className:"checkmark",points:"22.5 10 17.5 15 12.5 20 7.5 15",key:1})])}n.defaultProps={viewBox:"0 0 30 30"},e.exports=n,n.default=n},40646:(e,t,r)=>{var o=r(32747);function n(e){return o.createElement("svg",e,[o.createElement("defs",{key:0},o.createElement("style",null,".close{fill:none;stroke:#FFF;stroke-width:3px;stroke-linecap:round}")),o.createElement("path",{className:"close",d:"M10,19.994l10-9.988M10.006,10l9.988,10",key:1})])}n.defaultProps={viewBox:"0 0 30 30"},e.exports=n,n.default=n},48005:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:);var o=r(8661),n=r(14554),i=r(44277),s=r(955),a=r(22645),l=r(84675),c=r(32747),d=r.n(c),p=r(45697),u=r.n(p),m=r(94184),g=r.n(m),f=r(699),b=r(16585);function h(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class w extends c.PureComponent{constructor(e){super(e),h(this,"mountWidget",(()=>{const{global:{window:{relapAPI:e}}}=this.context,{cfgId:t,onMount:r,onNoContent:o,onReady:n}=this.props;let i=this.instanceId;r();const s=!!this.adWidgetEl.querySelector(".js-relap-widget-wrapper");this.adWidgetEl&&e&&!this.instanceId&&!s&&e.addWidget({anchorEl:this.adWidgetEl,cfgId:t,position:"prepend",isForm:!1,events:{onReadyonNoContent:o}}).then(()})),h(this,"unmountWidget",(()=>{const{global:{window:{relapAPI:e}}}=this.context,{onUnmount:t}=this.props;e&&this.instanceId&&(e.removeWidget({instanceId:this.instanceId}),this.instanceId=null,t())})),h(this,"swapWidget",(()=>{const{continueAdSearching:e}=this.props;e&&(this.unmountWidget(),this.mountWidget())})),this.adWidgetEl=null,this.instanceId=null}componentDidMount(){this.mountWidget()}nder(){const{isMobile:e,widgetStyles:{classes:t},setWidgetVisible:r}=this.props,{local:{el:o}}=this.context,n={position:"absolute",left:"-9999px",height:"1px",width:`${o.offsetWidth}px`,visibility:"hidden"},i=r?{position:"",left:"",height:"",width:"",visibility:""}:n,s=g()(t.formAdWidgetContainerWrapper,{[t.formAdWidgetContainerWrapperMobile]:e});return d().createElement("div",{style:{...i},className:s},d().createElement("div",{className:t.formAdWidgetContainer,ref:))}}h(w,"propTypes",{cfgId:u().string.isRequired,widgetStyles:u().object,setWidgetVisible:u().bool,needSwapWidget:u().bool,isMobile:u().bool,continueAdSearching:u().bool,onMount:u().func,onNoContent:u().func,onReady:u().func,onUnmount:u().func}),h(w,"contextTypes",{local:u().object.isRequired,global:u().object.isRequired}),h(w,"defaultProps",{setWidgetVisible:!1,needSwapWidget:!1,isMobile:!1,continueAdSearching:!0,widgetStyles:{classes:{}},onMount:()=>{},onNoContent:()=>{},onReady:()=>{},onUnmount:()=>{}});var x=r(22480),y=r(85149),S=r(31911);function C(e,t){const{arImage:r,content:{text:o,textAlign:n},questionThumbnails:i,reactionThumbnails:s,type:a,isCorrect:l,isMobile:p,widgetStyles:{classes:u},widgetStyles:m}=e,{local:{innerWrapperEl:f}}=t,b=(0,c.useRef)(null),[h,w]=(0,c.useState)(1/0),[C,A]=(0,c.useState)(null),R=(0,c.useCallback)((()=>{let e=0;const t=(t=>{if(!t)return 1/0;const r=t.clientHeight,o=getComputedStyle(t);return e=parseInt(o.lineHeight,10),Math.floor(r/e)})(b.current);t!==h&&(w(t),A(t*e))}),[h]);(0,x.Z)(f,"resize",R);const v=g()(u.formQuestionText,{[u.formQuestionTextCenterAlign]:"center"===n,[u.formQuestionTextBottomAlign]:"bottom"===n||"left"});return d().createElement("div",null,d().createElement("div",{className:u.formCardThumbnailWrapper},d().createElement(S.Z,{src:"reaction"===a&&s.length?s:i,aspectRatio:r,aspectRatioApplyToRecs:["wide"],aspectRatioApplyToRecTypes:["form"],recSize:"wide",recType:"form"}),i.length||"reaction"===a&&s.length?null:d().createElement("div",{className:u.formCardNoImage}),(()=>{if("reaction"!==a||s.length)return null;const e=g()(u.formReactionImageCover,{[u.formReactionCorrectNoImageQuestion]:l,[u.formReactionWrongNoImageQuestion]:!l});return d().createElement("div",{className:e})})()),d().createElement("div",{className:v},d().createElement("div",{style:{display:"flex",width:"100%",alignItems:"center"===n?"center":"flex-end"},ref:b},d().createElement("div",{className:u.ellipsizerWrapper,style:{maxHeight:!p&&C?`${C}px`:"none"}},d().createElement("div",{style:{marginTop:"2px"}},d().createElement(y.Z,{widgetStyles:m,maxLines:p?1/0:h||1,text:o}))))))}C.propTypes={arImage:u().number.isRequired,content:u().shape({text:u().string.isRequired,textAlign:u().string.isRequired}).isRequired,isMobile:u().bool,type:u().string,isCorrect:u().bool,questionThumbnails:u().array,reactionThumbnails:u().array,widgetStyles:u().object},C.defaultProps={isMobile:!1,isCorrect:!1,type:"question",questionThumbnails:[],reactionThumbnails:[],widgetStyles:{classes:{}}},C.contextTypes={local:u().object.isRequired};const A=C;var R=r(3627),v=r.n(R),E=r(40646),W=r.n(E);function F(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class k extends c.PureComponent{render(){const{widgetStyles:{classes:e},isMarked:t,isCorrect:r,isAnswered:o}=this.props,n="32px",i=!o||r?d().createElement(v(),{style:{width:n,height:n}}):d().createElement(W(),{style:{width:n,height:n}}),s=g()(e.formAnswerMark,{[e.formAnswerMarkUnmarked]:!t,[e.formAnswerMarkMarked]:t&&!o,[e.formAnswerMarkAnsweredCorrect]:r&&o,[e.formAnswerMarkAnsweredWrong]:!r&&o});return d().createElement("div",{style:{opacity:+(o&&(t||r))},className:s},i)}}function T(e){const{current:t,total:r,isAnswered:o,widgetStyles:{classes:n}}=e,i=(t-1+ +o)/r*100+"%";return d().createElement("div",{className:n.formQuestionCounter},d().createElement("div",null,d().createElement("span",null,t,d().createElement("span",{className:n.formQuestionCounterTotalNumber}," ","/ ",r))),d().createElement("div",{className:n.formQuestionCounterProgressBarHolder},d().createElement("div",{className:n.formQuestionCounterProgressBar,style:{width:i}})))}F(k,"propTypes",{widgetStyles:u().object,isMarked:u().bool,isAnswered:u().bool,isCorrect:u().bool}),F(k,"contextTypes",{}),F(k,"defaultProps",{widgetStyles:{classes:{}},isMarked:!1,isCorrect:!1,isAnswered:!1}),T.propTypes={current:u().number.isRequired,total:u().number.isRequired,isAnswered:u().bool,widgetStyles:u().object},T.defaultProps={isAnswered:!1,widgetStyles:{}};const I=(0,c.memo)(T);function M(e){const{widgetStyles:{classes:t},onClick:r,text:o,url:n}=e;return n?d().createElement("a",{href:n,target:"_blank",rel:"noreferrer nofollow"},d().createElement("div",{className:t.formActionButton},o)):d().createElement("div",{className:t.formActionButton,onClick:r},o)}M.propTypes={text:u().string.isRequired,url:u().string,widgetStyles:u().object,onClick:u().func},M.defaultProps={url:"",widgetStyles:{},onClick:()=>{}};const N=(0,c.memo)(M);function B(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class $ extends c.PureComponent{constructor(e){super(e),B(this,"handleAnswerSelect",(e=>{let{answerId:t,isCorrect:r,selectedAnswer:o}=e;const{isAnswered:n,answerId:i}=this.state;n||null!==i||this.setState({answerId:t,isCorrect:r,selectedAnswer:o},()})),B(this,"handleFormAnswer",(()=>{const{question:{id:e},onFormAnswer:t,onSwitchCard:r}=this.props,{answerId:o,isCorrect:n,isAnswered:i}=this.state;o&&(i?r():(this.setState({isAnswered:!0}),t({questionId:e,answerId:o,isCorrect:n})))})),B(this,"renderAnswers",(()=>{const{answers:e,widgetStyles:t,layout:r}=this.props,{selectedAnswer:o,isAnswered:n}=this.state;return e.map(((e,i,s)=>{const a=o===i,l=g()(t.classes.formAnswerItem,{[t.classes.formAnswerItemSelected]:a&&!n,[t.classes.formAnswerItemCardAnswered]:n,[t.classes.formAnswerItemCorrect]:e.isCorrect&&n,[t.classes.formAnswerItemIncorrect]:!e.isCorrect&&n,[t.classes.formAnswerItemAnimation]:!n});return d().createElement("div",{key:e.id,className:l,style:{animationDelay:.2+i/10+"s"},"data-is-last-child":"vertical"===r&&n&&i===s.length-1,onClick:()=>{this.handleAnswerSelect({answerId:e.id,isCorrect:e.isCorrect,selectedAnswer:i})}},d().createElement("span",null,e.text||" "),d().createElement(k,{widgetStyles:t,isMarked:a,isAnswered:n,isCorrect:e.isCorrect}))}))})),B(this,"getTopBlockText",(()=>{const{question:{text:e,textAlign:t="left"},reaction:r,isReactionEnabled:o}=this.props,{isAnswered:n,isCorrect:i}=this.state;if(!n||!o)return{text:e,textAlign:t};let s=i?"Ð’ÐµÑ€Ð½Ð¾!":"ÐÐµÐ²ÐµÑ€Ð½Ð¾!",a="bottom";return r&&""!==r.text&&(s=r.text,a=r.textAlign),{text:s,textAlign:a}})),this.state={isAnswered:!1,answerId:null,isCorrect:!1,selectedAnswer:null}}render(){const{num:e,total:t,widgetStyles:r,arImage:o,isMobile:n,onSwitchCard:i,question:s,reaction:a,isReactionEnabled:l,buttonText:c}=this.props,{isAnswered:p,isCorrect:u}=this.state;return d().createElement("div",{className:r.classes.formCardWrapper},d().createElement("div",{className:r.classes.formCardHeaderWrapper},d().createElement(I,{total:t,current:e+1,widgetStyles:r,isAnswered:p}),d().createElement(A,{widgetStyles:r,arImage:o,content:this.getTopBlockText(),type:p&&l?"reaction":"question",questionThumbnails:s.thumbnails,reactionThumbnails:a.thumbnails,isCorrect:u,isMobile:n})),d().createElement("div",{className:r.classes.formAnswersWrapper},d().createElement("div",null,this.renderAnswers()),p&&d().createElement("div",{className:r.classes.formCardActionButtonWrapper},d().createElement(N,{widgetStyles:r,text:c,onClick:i}))))}}function q(e){const{greeting:{tempImage:t="",thumbnails:r=[],text:o="",title:n="",greetingButtonLabel:i=""},aspectRatio:s,widgetStyles:a,onClick:l}=e,{classes:c}=a;return d().createElement("div",null,d().createElement("div",{className:c.formCardThumbnailWrapper},d().createElement(S.Z,{aspectRatio:s,src:t?[{src:t}]:r}),t||r.length?null:d().createElement("div",{className:c.formCardNoImage})),d().createElement("div",{className:c.formGreetingTextWrapper},d().createElement("div",{className:c.formGreetingButtonWrapper},d().createElement("div",{className:c.formGreetingActionButtonShadow}),d().createElement("div",{className:c.formGreetingActionButton,onClick:l},i)),n&&d().createElement("div",{className:c.formGreetingTitle},n),o&&d().createElement("div",{className:c.formGreetingText},o)))}B($,"propTypes",{isMobile:u().bool,question:u().object.isRequired,answers:u().array.isRequired,num:u().number.isRequired,total:u().number.isRequired,arImage:u().number.isRequired,layout:u().string.isRequired,reaction:u().object,isReactionEnabled:u().bool,buttonText:u().string,widgetStyles:u().object,onSwitchCard:u().func,onFormAnswer:u().func}),B($,"defaultProps",{isMobile:!1,reaction:{},isReactionEnabled:!0,buttonText:"Ð”Ð°Ð»ÐµÐµ",widgetStyles:{classes:{}},onSwitchCard:()=>{},onFormAnswer:()=>{}}),B($,"contextTypes",{local:u().object.isRequired}),q.propTypes={greeting:u().object.isRequired,widgetStyles:u().object,aspectRatio:u().number.isRequired,onClick:u().func},q.defaultProps={widgetStyles:{cla},onClick:()=>{}};const P=(0,c.memo)(q);function z(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class j extends c.PureComponent{render(){const{correctAnswersCount:e,total:t,outerSize:r,borderWidth:o,splitLineSize:n,classes:i}=this.props,s=e/t,a=s<=.5?"#FF4538":"#00A15C",l=(r-2*(o+1))/2,c=2*Math.PI*l*s,p=2*Math.PI*l;return d().createElement("div",{className:i.formResultCircleOuterWrapper},d().createElement("div",{className:i.formResultCircle,"data-correct":e,"data-total":t,style:{color:a}},d().createElement("svg",{width:`${r}px`,height:`${r}px`,viewBox:`0 0 ${r} ${r}`,preserveAspectRatio:"xMidYMid meet"},d().createElement("circle",{className:i.formResultCircleSvgUnfilled,r:`${l}`,cx:""+r/2,cy:""+r/2}),d().createElement("circle",{className:i.formResultCircleSvgProgressLine,r:`${l}`,cx:""+r/2,cy:""+r/2,stroke:a,strokeDasharray:`${c},${p}`}),d().createElement("line",{className:i.formResultCircleSvgSplitLine,x1:""+(r/2-n/2),y1:""+r/2,x2:""+(r/2+n/2)e:!0}):e[t]=r,e}z(j,"propTypes",{correctAnswersCount:u().number.isRequired,total:u().number.isRequired,outerSize:u().number.isRequired,borderWidth:u().number.isRequired,splitLineSize:u().number.isRequired,classes:u().object}),z(j,"contextTypes",{}),z(j,"defaultProps",{classes:{}});class G extends c.PureComponent{constructor(){super(...arguments),D(this,"getResult",(()=>{const{results:e,correctAnswersCount:t,total:r}=this.props;if(!e||!e[0])return{title:"Ð’Ð¾Ñ‚ Ð¸ Ð²ÑÑ‘!",text:null,img:null};const o=e.length;if(1===o)return e[0];return e[(()=>{const e=[];for(let t=0;t<o;t++)e.push({min:0===t?0:e[t-1].max,max:Math.floor((t+1)/o*100)/100,values:[]});for(let t=0;t<=r;t++){let o;if(t===r||0===t)o=0===t?0:e.length-1;else{conx((e=>e.min<=n&&e.max>n))}e[o].valuet{values:t}=eIndex((e=>e.includes(t)))})()]})),D(this,"renderResultImage",(()=>{const{widgetStyles:{classes:e},arImage:t}=this.props,{thumbnails:r}=this.getResult();return d().createElement("div",{className:e.formResultImageBackground},r.length?d().createElement(S.Z,{src:r,aspectRatio:t,aspectRatioApplyToRecs:["wide"],aspectRatioApplyToRecTypes:["form"],recSize:"wide",recType:"form"}):null)})),D(this,"renderResultTitle",(()=>{const{widgetStyles:{classes:e}}=this.props,{title:t}=this.getResult(),r=t&&""!==t?t:"Ð’Ð¾Ñ‚ Ð¸ Ð²ÑÑ‘ ðŸ™‚";return d().createElement("div",{className:e.formResultTitle},r)})),D(this,"renderResultText",(()=>{const{widgetStyles:{classes:e}}=this.props,{text:t}=this.getResult();return t?d().createElement("div",{className:e.formResultText},t):null})),D(this,"renderActionButton",(()=>{const{endButtonConfig:{isEnabled:e=!0,type:t="repeat",text:r="ÐŸÑ€Ð¾Ð¹Ñ‚Ð¸ ÐµÑ‰Ñ‘ Ñ€Ð°Ð·",url:o},widgetStyles:n,onResetTest:i}=this.props;return e?d().createElement("div",{className:n.classes.formResultCardActionButtonWrapper},d().createElement(N,{widgetStyles:n,text:rhow:e,onFormResultShow:t}=this.props;e(),t()}render(){const{widgetStyles:{classes:e},isMobile:t,correctAnswersCount:r,total:o}=this.props,n=g()(e.formCardWrapper,e.formResultCardWrapper);return d().createElement("div",{className:n},this.renderResultImage(),d().createElement(j,{classes:e,correctAnswersCount:r,total:o,outerSize:88,splitLineSize:t?26:32,borderWidth:3}),this.renderResultTitle(),this.renderResultText(),this.renderActionButton())}}D(G,"propTypes",{correctAnswersCount:u().number.isRequired,total:u().number.isRequired,widgetStyles:u().object,endButtonConfig:u().object,results:u().array,arImage:u().number.isRequired,isMobile:u().bool,onNeedToShow:u().func,onResetTest:u().func,onFormResultShow:u().func}),D(G,"contextTypes",{}),D(G,"defaultProps",{endButtonConfig:{},widgetStyles:{classes:{}},isMobile:!1,results:[],onNeedToShow:()=>{},onResetTest:()=>{},onFormResultShow:()=>{}});const H="AD_WIDGET_MOUNTED",Q="AD_WIDGET_UNMOUNTED",L="AD_WIDGET_READY",_="AD_WIDGET_NO_CONTENT",O="SHOW_NEXT_QUESTION",Z="RESET_TEST",U="SET_STAGE",V="GREETING",Y="QUESTION",X="RESULT",J={stage:Y,currentCard:0,adWidgetReady:!1,needSwapWidget:!1},K=(e,t)=>{switch(t.type){case H:return{...e,needSwapWidget:!1};case Q:return{...e,adWidgetReady:!1};case L:return{...e,adWidgetReady:!0,needSwapWidget:!1};case _:return{...e,adWidgetReady:!1,needSwapWidget:!0};case U:return{...e,stage:t.payload};case O:return{...e,currentCard:e.currentCard+1};case Z:redefrn e}},ee=e=>({type:U,payload:e}),te=e=>e?V:Y;function re(e){const{cfgId:t,isMobile:r,widgetStyles:o,layout:n,arImage:i,correctAnswersCount:s,onFormAnswer:a,onNeedToShow:l,formData:p,formData:{items:u,results:m,greeting:g},onFormGreetingComplete:f,onFormQuestionComplete:b,onFormReset:h,onFormResultShow:x}=e,{settings:{adv:{isEnabled:y=!1}={},greeting:{isEnabled:S=!1,label:C="ÐŸÑ€Ð¾Ð¹Ñ‚Ð¸ Ñ‚ÐµÑÑ‚"}={},endButton:A={},reaction:{isEnabled:R=!0}={}}={}}=p,[v,E]=(0,c.useReducer)(K,{...J,stage:te(S)}),{adWidgetReady:W,currentCard:F,needSwapWidget:k,stage:T}=v,I=F===u.length-1,M=T===X,N=(0,c.useCallback)((()=>{b(F),E(I?ee(X):{type:O})}),[I,b,F,E]),B=(0,c.useCallback)((()=>{E({type:L})}),[]),q=(0,c.useCallback)((()=>{E({type:_})}),[]),z=(0,c.us({type:H})}),[]),j=(0,c.us{type:Q})}),[]),D=(0,c.useCallback)((()=>{E(ee(Y)),f()}),[f]),U=(0,c.useCallback)((()=>{var e;E((e={stage:te(S),needSwapWidget:!0},{type:Z,payload:e})),h()}),[h,S]),{answers:re,question:oe,reaction:ne}=u[F];return d().createElement(d().Fragment,null,y&&d().createElement(w,{cfgId:t,layout:n,widgetStyles:o,setWidgetVisible:W&&M,needSwapWidget:k,isLastItem:I,isMobile:r,continueAdSearching:!M,onMount:z,onUnmount:j,onReady:B,onNoContent:q}),(()=>{switch(T){case V:return d().createElement(P,{greeting:{...g,greetingButtonLabel:C},aspectRatio:i,widgetStyles:o,onClick:D});case X:return d().createElement(G,{correctAnswarImage:i,results:y&&W?m.map((e=>({...e,thumbnails:[]}))):m,isMobile:r,endButtonConfig:A,widgetStyles:o,onNeedToShow:l,onResetTest:U,onFormResultShow:x});case Y:return d().createElement($,{key:oe.id,cfgId:t,isMobile:r,question:oe,answers:re,reaction:ne,isReactionEnabled:R,layout:n,num:F,arImage:i,total:u.length,buttonText:I?"ÐŸÐ¾ÐºÐ°Ð·Ð°Ñ‚ÑŒ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹":"Ð”Ð°Ð»ÐµÐµ",widgetStyles:o,onFormAnswer:a,onSwitchCard:N});default:return null}})())}re.propTypes={cfgId:u().string.isRequired,formData:u().object.isRequired,isMobile:u().bool,widgetStyles:u().object,layout:u().string.isRequired,correctAnswersCount:u().number.isRequired,arImage:u().number.isRequired,onFormAnswer:u().func,onNeedToShow:u().func,onFormReset:u().func,onFormGreetingComplete:u().func,onFormQuestionComplete:u().func,onFormResultShow:u().func},re.defaultProps={isMobile:!1,widgetStyles:{classes:{}},onFormAnswer:()=>{},onNeedToShow:()=>{},onFormReset:()=>{},onFormGreetingComplete:()=>{},onFormQuestionComplete:()=>{},onFormResultShow:()=>{}};const oe=(0,c.memo)(re);var ne=r(41609),ie=r.n(ne),se=r(17014),ae=r.n(se);function le(e){let{elClass:t,settings:r}=e;const{isEnabled:o=!0,url:n,type:i="relap",text:s="Relap"}=r,a=(0,c.useRef)(null),[l,p]=(0,c.useState)(!1);if(!o)return null;if(ie()(r)||"relap"===i)return d().createElement("a",{href:"https://relap.mail.ru/?utm_source=publishers_ad&utm_medium=widget&utm_content=promo_ad_link&utm_campaign=From%20widget",className:t,target:"_blank",rel:"noopener noreferrer"},d().createElement(ae(),null),"Relap");let u="";try{u=new URL(n).origin}catch(e){console.log("no valid url for favicon")}return d().createElement("a",{href:n,className:t,target:"_blank",rel:"noopener noreferrer"},l?d().createElement(().createElement("img",{ref:a,src:`${u}/favicon.ico`,alt:u,onError:()=>{p(!0)}}),s)}le.propTypes={elClass:u().string,settings:ufaultProps={elClass:"",settings:{}};const ce=(0,c.memo)(le),de=e=>"mobile"===e;function pe(e,t){const{global:r}=t,{cfgId:o,formData:n,formData:{settings:{label:i,font:{type:s,google:a="Roboto",system:l}={}}={}},widgetStyles:p,widgetStyles:{classes:{formMainWrapper:u,formMainMobileWrapper:m,formInnerWrapper:h,formBottomLogo:w}},onNeedToShow:x,onFormAnswer:y,onFormGreetingComplete:S,onFormQuestionComplete:C,onFormResultShow:A,onFormRestart:R}=e,v="system"===s&&"none"===l,E="system"!==s&&a||v?{google:[{family:v?"Roboto":a,variants:["400","500","700"],subsets:["cyrillic"]}]}:{};(0,f.Z)({externalFonts:E,context:r});const W=(0,c.useRef)(null),[F,k]=(0,c.useState)([]),[T,I]=(0,c.useState)(0),M=(0,b.Z)(t),N=(0,c.useCallback)((()=>{I(0),k([]),R()}),[]),B=(0,c.useCallback)((e=>{let{questionId:t,answerId:r,isCorrect:o}=e;const{id:i,sequenceId:s}=n;F.includes(t)||(y({formId:i,questionId:t,answerId:r,isCorrect:o,sequenceId:s}),k([...F,t]),I(T+ +o))}),[n,y,F,k,T,I]),$=g()(u,{[m]:de(M)});return d().createElement("div",{className:$,ref:W},d().createElement("div",{className:h},(e=>{let{cfgId:t,formData:r,formData:{layout:o},deviceType:n,widgetStyles:i,onNeedToShow:s,correctAnswersCount:a,handleFormAnswer:l,handleFormReset:c,onFormGreetingComplete:p,onFormQuestionComplete:u,onFormResultShow:m}=e;const g=de(n);return d().createElement(oe,{cfgId:t,formData:r,layout:"horizontal",isMobile:g,correctAnswersCount:a,adAfterCard:3,arImage:1.7865168539325842,widgetStyles:i,onNeedToShow:s,onFormAnswer:l,onFormGreetingComplete:p,onFormQuestionComplete:u,onFormReset:c,onFormResultShow:m})})({cfgId:o,formData:n,deviceType:M,widgetStyles:p,onNeedToShow:x,correctAnswersCount:T,handleFormAnswer:B,handleFormReset:N,onFormGreetingComplete:S,onFormQuestionComplete:C,onFormResultShow:A}),d().createElement(ce,{elClass:w,settings:i})))}pe.propTypes={cfgId:u().string.isRequired,formData:u().object.isRequired,widgetStyles:u().object,onNeedToShow:u().func.isRequired,onFormAnswer:u().func,onFormGreetingComplete:u().func,onFormQuestionComplete:u().func,onFormResultShow:u().func,onFormRestart:u().func,onFormSwapRequest:u().func},pe.defaultProps={widgetStyles:{classes:{}},onFormAnswer:()=>{},onFormGreetingComplete:()=>{},onFormQuestionComplete:()=>{},onFormResultShow:()=>{},onFormRestart:()=>{},onFormSwapRequest:()=>{}},pe.contextTypes={local:u().object.isRequired,global:u().object.isRequired};const ue=(0,c.memo)(pe);var merif",xe=e=>{var t;return null===(t=e.formData)||void 0===t?void 0:t.settings},ye=e=>{const{appearance:{color:t}={}}=xe(e)||{};return t||"#33c4cd"},Se=e=>{const{appearance:{buttonHasShadows:t}={}}=xe(e)||{};return null!=t?t:"true"},Ce=e=>{const t=ye(e),{l:r}=(0,fe.O)(t);return r>80?"#1a1a1a":"#FFFFFF"},Ae=(e,t)=>{const{h:r,s:o,l:n}=(0,fe.O)(e);return`hsl(${r},${o}%,${n+t}%)`},Re={formMainWrapper:{display:"flex",justifyContent:"center",fontFamily:e=>{const{font:t={}}=xe(e)||{},{type:r}=t;return"google"===r?`'${t[r]}', sans-serif`:"system"===r&&"none"===t[r]?we:t[r]||we}},formMainMobileWrapper:{},formInnerWrapper:{width:"100%",maxWidth:"800px",padding:"5px 0 0"},formCardWrapper:{marginBottom:"16px"},formCardHeaderWrapper:{position:"relative",paddingBottom:"1px"},formCardThumbnailWrapper:{position:"relative",zIndex:1},formCare)}), linear-gradient(180deg, rgba(0, 0, 0, 0.1) 0%, rgba(0, 0, 0, 0.5) 100%)`,zIndex:5},ellipsizerWrapper:{overflow:"hidden"},ellipsizerInnerSpan:{backgroundColor:"#FFF",padding:"2px 6px",boxDecorationBreak:"clone","$formMainMobileWrapper &":{backgroundColor:"transparent",padding:"initial",boxDecorationBreak:"unset"},"$formMainMobileWrapper $formReactionWrapper &":{backgroundColor:"#FFF",padding:"2px 6px",boxDecorationBreak:"clone"}},formQuestionCounter:{display:"flex",alignItems:"center",position:"absolute",top:16,left:16,width:"200px",background:"#FFF",borderRadius:"16px",zIndex:"115",padding:"4px 12px",fontSize:14,lineHeight:"1.43","$formMainMobileWrapper &":{position:"relative",top:"initial",left:"initial",padding:"12px",width:"100%",borderRadius:"initial"}},formQuestionCounterTotalNumber:{color:"#899299"},formQuestionCounterProgressBarHolder:{marginLeft:"12px",boxShadow:"inset 0px 4px 4px rgba(0, 0, 0, 0.03)",backgroundColor:"#F0F2F2",height:"8px",borderRadius:"6px",flexGrow:1},formQuestionCounterProgressBar:{backgroundColor:ye,borderRadius:"6px",height:"8px"},formQuestionText:{position:"absolute",top:"0",left:"0",bottom:"0",right:"0",display:"flex",width:"100%",overflow:"hidden",fontWeight:"500",fontSize:24,lineHeight:"32px",color:"#1A1A1A",wordBreak:"break-word",zIndex:105,"$formMainMobileWrapper &":{position:"relative",top:"initial",left:"initial",bottom:"initial",right:"initial",color:"#1a1a1a",fontSize:"20px",lineHeight:"26px",fontWeight:700}},formQuestionNoImg:{minHeight:200,background:e=>`linear-gradient(180deg, #84E2E7 0%, ${ye(e)} 100%)`},formQuestionTextCenterAlign:{padding:[[64,16]],"$formMainMobileWrapper &":{padding:[[8,12]],"&$formQuestionNoImg":{padding:[[56,12,8]],color:"#fff"}}},formQuestionTextBottomAlign:{padding:[[64,16,16]],"$formMainMobileWrapper &":{padding:[[8,12]],"&$formQuestionNoImg":{padding:[[56,12,8]],color:"#fff"}}},formAnswersWrapper:{position:"relative","$formMainMobileWrapper &":{padding:"0 12px"}},"@keyframes answerItemAppear":{from:{opacity:0},to:{opacity:1}},formAnswerItem:{padding:"12px 16px",borderBottom:"1px solid #E7EAEA",fontSize:18,lineHeight:"28px",color:"#1A1A1A",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#FFF",transition:"backgroundColor 0.1s ease, color 0.1s ease, padding-left 0.2s ease-in-out",outline:"none","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)","$formMainMobileWrapper &":{fontSize:16,lineHeight:"24px",borderLeft:"1px solid #E7EAEA",borderRight:"1px solid #E7EAEA","&:first-child":{borderTop:"1px solid #E7EAEA",borderTopLeftRadius:"8px",borderTopRightRadius:"8px"},"&:last-child":{borderBottomLeftRadius:"8px",borderBottomRightRadius:"8px"}},"&:hover:not($formAnswerItemCardAnswered)":{paddingLeft:"25px",backgroundColor:e=>`${ye(e)}11`},"&$formAnswerItemIncorrect":{color:"#E7EAEA"}},formAnswerItemAnimation:{animation:"$answerItemAppear 0.4s ease",animationFillMode:"both"},formAnswerItemCardAnswered:{},"@keyframes answerItemSelect":{from:{backgroundColor:e=>`${ye(e)}11`,color:"#1A1A1A"},to:{backgroundColor:ye,color:Ce}},formAnswerItemSelected:{animation:"$answerItemSelect 0.3s ease-in-out",animationDelay:"0.8s",animationFillMode:"both"},formAnswerItemCorrect:{backgroundColor:"#FFFFFF"},formAnswerItemIncorrect:{},formCardActionButtonWrapper:{padding:"16px",display:"flex",justifyContent:"flex-end","$formMainMobileWrapper &":{display:"block",padding:"12px 0"}},formActionButton:{padding:"12px 24px",fontSize:"16px",lineHeight:"24px",cursor:"pointer",textAlign:"center",color:Ce,backgroundColor:ye,borderRadius:"4px",transition:"all 0.3s ease",outline:"none","-webkit-tap-highlight-color":"rgba(0, 0, 0, 0)",hadow:e=>Se(e)?`0px 6px 12px ${ye(e)}77`:"none",backgroundColor:e=>Ae(ye(e),5)},"&:active":{backgroundColor:e=>Ae(ye(e),-5)}},formReactionWrapper:{position:"absolute",top:"0",left:"0",bottom:"0",right:"0",display:"flex",opacity:0,transition:"opacity 0.3s ease",padding:"14px 24px",fontWeight:"500",fontSize:24,lineHeight:"32px",color:"#1a1a1a",wordBreak:"break-word",zIndex:105,"$formMainMobileWrapper &":{fontSize:18,lineHeight:"24px"}},formReactionImageCover:{position:"absolute",top:0,bottom:0,left:0,right:0,backgroundPosition:"center",backgroundSize:"cover",zIndex:10},formReactionCorrectNoImageQuestion:{background:"linear-gradient(0deg, rgba(32, 208, 133, 0.95), rgba(32, 208, 133, 0.95))",opacity:"0.95"},formReactionWrongNoImageQuestion:{background:"linear-gradient(0deg, rgba(255, 100, 89, 0.95), rgba(255, 100, 89, 0.95))",opacity:"0.95"},formAnswerMark:{marginLeft:8,width:32,height:32,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},formAnswerMarkUnmarked:{backgroundColor:"#FFF",border:"2px solid #E7EAEA",boxSizing:"border-box","&:hover":{border:"none",boxShadow:"inset 0px 2px 4px rgba(0, 0, 0, 0.3)"},"&$formAnswerMarkAnsweredCorrect":{border:"none"},"&$formAnswerMarkAnsweredWrong":{border:"none"}},formAnswerMarkMarked:{background:ye,"&:hover":{boxShadow:"inset 0px 2px 4px rgba(0, 0, 0, 0.3)"}},formAnswerMarkAnsweredCorrect:{background:"#20D085"},formAnswerMarkAnsweredWrong:{background:"#FF6459"},formResultCardWrapper:{background:"#FFFFFF",boxSizing:"border-box",overflow:"hidden",display:"flex",flexDirection:"column",alignItems:"center",paddingBottom:"32px","$formMainMobileWrapper &":{paddingBottom:"12px"}},formResultCardActionButtonWrapper:{marginTop:"20px auto 0","$formMainMobileWrapper &":{width:"100%",padding:"0 12px"}},formResultImageBackground:{width:"100%",position:"relative",background:"#FFF",minHeight:"90px"},formResultCircleOuterWrapper:{borderRadius:"50%",width:128,height:128,padding:20,backgroundSize:"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat",marginTop:-64,position:"relative",zIndex:"100",backgroundColor:"#FFF","$formMainMobileWrapper &":{width:96,height:96,padding:16,marginTop:-48}},formResultCircle:{borderRadius:"50%",width:be,height:be,position:"relative","$formMainMobileWrapper &":{width:he,height:he},"& svg":{width:"100%",height:"100%"},"&::before, &::after":{position:"absolute",left:"0",right:"0",textAlign:"center",display:"flex",justifyContent:"center"},"&::before":{content:"attr(data-correct)",top:"0",bottom:44,alignItems:"flex-end",fontSize:"24px",lineHeight:"28px",fontWeight:"700",color:"inherit","$formMainMobileWrapper &":{bottom:32,fontSize:"20px",lineHeight:"24px"}},"&::after":{content:"attr(data-total)",top:44,bottom:"0",fontSize:"18px",lineHeight:"28px",color:"#BFC4C8","$formMainMobileWrapper &":{top:32,fontSize:16,lineHeight:"24px"}}},formResultCircleSvgUnfilled:{fill:"none",strokeWidth:"3px",stroke:"#e7eaea"},formResultCircleSvgProgressLine:{fill:"none",strokeWidth:"3px",transform:"rotate(-90deg)",transformOrigin:"center center"},formResultCircleSvgSplitLine:{stroke:"#E7EAEA",strokeWidth:"1px"},formResultTitle:{textAlign:"center",color:"#000",fontWeight:"500",fontSize:28,lineHeight:"36px",margin:"0 0 16px",padding:"0 12px","$formMainMobileWrapper &":{fontSize:20,lineHeight:"26px"}},formResultText:{textAlign:"center",color:"#333333",fontSize:18,lineHeight:"28px",marginBottom:"20px",padding:"0 12px","$formMainMobileWrapper &":{fontSize:16,lineHeight:"24px"}},formBottomLogo:{display:"inline-flex",alignItems:"center",color:"#BFC4C8",fontSize:"14px",lineHeight:"20px","& svg, & img":{marginRight:4,width:14,height:14},"&:hover":{color:ye},"$formMainMobileWrapper &":{fontSize:"12px",lineHeight:"16px","& svg, & img":{width:"12px",height:"12px"}}},formAdWidgetButtSe(e)?"0px 4px 12px rgba(0, 0, 0, 0.1), 0px 0px 8px rgba(0, 0, 0, 0.1)":"none",borderRadius:"12px"},formAdWidgetContainerWrapper:{background:"#FFF",padding:"32px"},formAdWidgetContainerWrapperMobile:{padding:"12px"},formAdWidgetContainer:{background:"#FFF",minHeight:"100px",transition:" 0.3s ease",padding:"16px",backgroundColor:"#FFF","&:hover":{backgroundColor:e=>`${ye(e)}22`}},formGreetingTextWrapper:{display:"flex",flexDirection:"column",alignItems:"center",position:"relative",zIndex:50,backgroundColor:"#FFF",padding:"0 48px 48px",margin:"0 8px 8px",boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.2)",borderRadius:"0px 0px 8px 8px","$formMainMobileWrapper &":{padding:"0 4px 48px"}},formGreetingButtonWrapper:{marginTop:"-18px",display:"flex",flexDirection:"column",alignItems:"center","$formMainMobileWrapper &":{marginTop:"-20px"}},"@keyframes greetingButtonOnBoarding":{from:{transform:"translateY(0)"},"50%":{transform:"translateY(-10px)"},to:{transform:"translateY(0)"}},"@keyframes greetingButtonShadowOnBoarding":{from:{width:"80%"},""}},formGreetingActionButtonShadow:{boxShadow:e=>`0 42px 15px 10px ${ye(e)}77`,width:"80%",animation:"$greetingButtonShadowOnBoarding 2s ease-in-out infinite",animationDelay:"1s","$formGreetingButtonWrapper:hover &":{animation:"none",display:"none"}},formGreetingActionButton:{extend:"formActionButton",color:Ce,backgroundColor:ye,animation:"$greetingButtonOnBoarding 2s ease-in-out infinite",animationDelay:"1s","$formGreetingButtonWrapper:hover &":{animation:"none"}},formGreetingTitle:{fontWeight:700,fontSize:"24px",lineHeight:"32px",paddingTop:"18px",color:"#1A1A1A",textAlign:"center","$formMainMobileWrapper &":{paddingTop:"20px"}},formGreetingText:{fontSize:"18px",lineHeight:"28px",paddingTop:"16px",color:"#1A1A1A",textAlign:"center"}};var ve=r(31389);const Ee=e=>{let{globalWindow:t,widget:r}=e;return t.height>r.height+10&&t.width>r.width+10?10:0},We={"@keyframes opacify":{from:"0"},to:{opacity:"1"}},fly:{position:"fixed","z-index":9999999,bottom:e=>Ee(e),right:e=>"right"===e.cfg.flyRoll.horizontalPosition?Ee("===e.cfg.flyRoll.horizontalPosition?Ee(e):"auto",width:e=>e.cfg.flyRoll.width,borderRadius:5,overflow:"hidden",backgroundColor:"#fff",animationDuration:".5s",animationName:"$opacify",animationTimingFunction:"ease-in-out","box-shadow":"0px 10px 60px 0px rgba(0,0,0,0.3)"}},{widgetStylesSrc:Fe,exposedSliderStylesSrc:ke,exposedFlyRollStyleSrc:Te}=(0,me.Z)({carouselGridStyles:ge.Z,formStyles:Re,widgetStyles:ve.Z,exposedSliderStyles:{sliderTopEl:{"box-shadow":"0px 10px 60px 0px rgba(0,0,0,0.3)",opacity:0,transition:"opacity 200ms linear, transform 200ms ease"},sliderTopElTransparent:{transition:"opacity 200ms linear, transform 200ms ease"},sliderTopElVisible:{opacity:1},actionButtonWrapper:{position:"absolute",top:"-20px",right:"6px",width:"14px",height:"14px"},actionButton:{cursor:"pointer",opacity:.8,transform:"rotate(0deg)",transition:"opacity 200ms linear, transform 200ms linear","&:hover":{opacity:1}},actionButtonCollapsed:{transform:"rotate(45deg)"}},exposedFlyRollStyles:We}),Ie=(0,o.Z)({RecPreLayout:l.Z,TitleLayout:s.Z,DescriptionLayout:a.Z,FormLayout:ue,widgetStylesSrc:Fe,exposedSliderStylesSrc:ke,exposedFlyRollStyleSrc:Te}),Me={onLoad(e){let{cfgId:t}=e;(0,n.Z)({scope:window.global,funcName:"relapV6WidgetScriptLoad",args:[{id:(0,i.g)(t)}],onSuccess(){console.log(`relapV6WidgetScriptLoad func completed successfully for id: ${(0,i.g)(t)}`)}})},onReady(e){let{cfgId:t,el:r}=e;(0,n.Z)({scope:window.global,funcName:"relapV6WidgetReady",args:[{id:(0,i.g)(t),el:r}],onSuccess(){console.log(`relapV6WidgetReady func completed successfully for id: ${(0,i.g)(t)}`)}})},onShow(e){let{cfgId:t,el:r}=e;(0,n.Z)({scope:window.global,funcName:"relapV6WidgetPreloaderShow",args:[{id:(0,i.g)(t),el:r}],onSuccess(){console.log(`relapV6WidgetPreloaderShow func completed successfully for id: ${(0,i.g)(t)}`)}}),(0,n.Z)({scope:window.global,funcName:"relapV6WidgetShown",args:[{id:(0,i.g)(t),el:r}],onSuccess(){console.log(`relapV6WidgetShown func completed successfully for id: ${(0,i.g)(t)}`)}})},onFollow(e){let{cfgId:t,el:r}=e;(0,n.Z)({scope:window.global,funcName:"relapV6WidgetClick",args:[{id:(0,i.g)(t),linkEl:r}],onSuccess(){console.log(`relapV6WidgetClick func completed successfully for id: ${(0,i.g)(t)}`)}})},onNoContent(e){let{cfgId:t}=e;(0,n.Z)({scope:window.global,funcName:"relapV6WidgetNoSimilarPages",args:[{id:(0,i.g)(t)}],onSuccess(){console.log(`relapV6WidgetNoSimilarPages func completed successfully for id: ${(0,i.g)(t)}`)}})}};(0,i.Z)(Me,"default_beta");const Ne=Ie}}]);