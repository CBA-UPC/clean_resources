!function(){"use strict";.includes||Object.defineProperty(Array.prototype,"includes",{value:),"undefined"!=typeof window&&window.NodeList&&!window.NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach),Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:writable:!0});var J=["verbose","debug","info","warn","error","off"],Y=function(){function r(e,t,i){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"off";d(this,r),this.console=e,this.logName=t,this.fuseDob=i,this.logLevel=n,this.logs=[]}return g(r,[{key:"setFuseDob",value:function(e){this.fuseDob=e}},{key:"getTimestamp",value:,{key:"callLogMethod",value:function(e){if("off"!==e){for(var t=arguments.length,i=new Array(1<t?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];var r=["[".concat(this.logName,"]-").concat(i[0]).concat(this.getTimestamp())].concat(s(i.slice(1)));"warn"!==e&&"error"!==e||(1e3<=this.logs.length&&(this.logs=[]),this.logs.push({level:e,params:r})),"error"!==e&&J.indexOf(e)<J.indexOf(this.logLevel)||this.console["verbose"!=e?e:"debug"].apply(null,r)}}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.callLogMethod("error",t)}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.callLogMethod("warn",t)}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.callLogMethod("info",t)}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this.callLogMethod("info",t)}},{key:"debug",value:,{key:"setLogLevel",value:,{key:"getLogLevel",value:function(){return this.logLevel}},{key:"getLogs",value:function(){return this.logs}}]),r}();new(function(){function e(){d(this,e),this.sessionId=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:20,t="",i=0;i<e;++i)t+=Math.floor(16*Math.random()).toString(16);return t}()}return g(e,[{key:"isInDebugMode",value:,{key:"getWindowLocation",value:,{key:"getFuseDob",value:,{key:"getPackageMajorVersion",value:function(){return 2}},{key:"getBrowserWindowObject",value:function(){return window.self}},{key:"getQueryParam",value:function(t){return this.getWindowLocation().search.split(/[?&]/).filter(function(e){return""!==e}).map(.filter([0]||[]}},{key:"getMainLogPrefix",value:function(){return"FUSE"}},{key:"getLogLevel",value:function(){var e;return this.isInDebugMode()||p(this.fuseDebugger)?"debug":this.getQueryParam("fuse_log_level")&&this.getQueryParam("fuse_log_level")[1]&&(e=this.getQueryParam("fuse_log_level")[1],-1!==J.indexOf(e))?e:"off"}},{key:"getLogger",value:,{key:"getFuseDebugger",value:function(){var e;return Q(this.fuseDebugger)&&(e=f.getBrowserWindowObject().fuseDebugger,this.fuseDebugger=null!=e?e:null,this.fuseDebugger)&&(this.fuseDebugger.connect(),this.getLogger().debug("[MONITORING]: Debugger attached")),null!=(e=this.fuseDebugger)?e:void 0}},{key:"getSessionId",value:function(){return this.sessionId}}]),e}());unction te(e,t,i,n){e&&0<e?(i.info("[DELAY]: Delaying by ".concat(e,"ms to ").concat(t)),setTimeout(n,e)):n()}var i,b,v,ie={isEdgeBrowser:,ne=f.getBrowserWindowObject(),re=f.getLogger(),a=function(t,e){re.debug("[INIT]: Downloading library ".concat(t.name));var i,n,r=ne.document.createElement("script");r.async=!0,r.type="text/javascript",t.id&&(r.id=t.id),t.attributes&&Object.keys(t.attributes).forEach(,"function"==typeof e&&(r.readyState?r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||(r.onreadystatechange=null,e())}:r.onload=function(){e()}),r.src="https:".concat(t.url).concat(t.file),t.query&&(r.src="".concat(r.src,"?").concat(t.query)),t.insertSelector?(n=ne.document.querySelector(t.insertSelector))?n.appendChild(r):re.warn("[INIT]: Injection library ".concat(t.name,". Element with selector ").concat(t.insertSelector," not found")):null!=(i=(n=ne.document.getElementsByTagName("script")[0]).parentNode)&&i.insertBefore(r,n)},oe=((e=i=i||{}).Desktop="desktop",e.Tablet="tablet",e.Mobile="mobile",(e=b=b||{}).Chrome="chrome",e.Safari="safari",e.Opera="opera",e.Edge="edge",e.IE11="ie11",e.Firefox="firefox",e.Other="other",(e=v=v||{}).IOS="ios",e.MacOS="mac",e.Android="android",e.Windows="windows",e.Linux="linux",e.ChromeOs="chromeos",e.Other="other",[{regex:/\sedg\//i,browser:b.Edge},{regex:/edg([ea]|ios)/i,browser:b.Edge},{regex:/opera/i,browser:b.Opera},{regex:/opr\/|opios/i,browser:b.Opera},{regex:/chrome|crios|crmo/i,browser:b.Chrome},{regex:/firefox|iceweasel|fxios/i,browser:b.Firefox},{regex:/safari|applewebkit/i,browser:b.Safari}]),se=[{regex:/huawei/i,device:i.Mobile},{regex:/nexus\s*(?:7|8|9|10).*/i,device:i.Tablet},{regex:/ipad/i,device:i.Tablet},{regex:/tablet(?! pc)/i,device:i.Tablet},{regex:/(ipod|iphone)/i,device:i.Mobile},{regex:/nexus\s*[0-6].*/i,device:i.Mobile},{regex:/[^-]mobi/i,device:i.Mobile}],ae=[{os:v.MacOS,regex:/macintosh/i},{os:v.IOS,regex:/(ipod|iphone|ipad)/i},{os:v.Android,regex:/android/i},{os:v.Windows,regex:/windows /i},{os:v.Linux,regex:/linux/i},{os:v.ChromeOs,regex:/CrOS/}],ue=function(){eturn g(t,[{key:"parseDevice",value:function(){var t=this,e=se.filter(function(e){return e.regex.test(t.userAgent)});return 0<e.length?e[0].device:null!=(e=this.browserWindow.navigator.userAgentData)&&e.mobile?i.Mobile:i.Desktop}},{key:"parseBrowser",value:function(){var t=this,e=oe.filter(function(e){return e.regex.test(t.userAgent)});return 0<e.length?e[0].browser:b.Other}},{key:"parseOperatingSystem",value:function(){var t=this,e=ae.filter(;return 0<e.length?e[0].os:v.Other}},{key:"getDevice",value:function(){return this.device}},{key:"getBrowser",value:function(){return this.browser}},{key:"getOperatingSystem",value:function(){return this.os}}]),t}(),ce=function(){function r(e,t){var i,n=this,e=(d(this,r),this.fuseDob=e,this.states=[],this.events=[],this.slotProblems=[],this.firstSlotLoaded=!1,this.firstSlotRenderEnded=!1,this.firstImpressionViewed=!1,Date.now());this._tagLoadedMs=e-this.getFuseDob(),this.states.push((N(i={},"tag_loaded",!0),N(i,"ts",e),N(i,"load_time_ms",this._tagLoadedMs),i)),t.onSlotLoaded.subscribe(function(e){n.firstSlotLoaded||(n.setStateStatus("gpt_first_slot_loaded"),n.firstSlotLoaded=!0),n.addAdEvent("gpt_slot_loaded_".concat(e.slot.getSlotElementId()))}),t.onSlotResponse.subscribe(function(e){n.firstSlotRenderEnded||(n.setStateStatus("gpt_first_slot_render_ended"),n.firstSlotRenderEnded=!0),n.addAdEvent("gpt_slot_render_ended_".concat(e.slot.getSlotElementId()))}),t.onImpressionViewable.subscribe(}return g(r,[{key:"getSlotProblems",value:function(){return this.slotProblems}},{key:"addSlotProblem",value:function(e){1e3<=this.slotProblems.length&&(this.slotProblems=this.slotProblems.slice(100)),this.slotProblems.push(Object.assign(Object.assign({},e),{time:this.getElapsedTime()}))}},{key:"getFuseDob",value:function(){return this.fuseDob}},{key:"getElapsedTime",value:,{key:"reportFirstGptRequest",value:,{key:"firstGptRequestMs",get:function(){return this._firstGptRequestMs}},{key:"reportCmpLoadFinish",value:function(){this._cmpLoadFinishMs=this._cmpLoadFinishMs||this.getElapsedTime()}},{key:"cmpLoadFinishMs",get:function(){return this._cmpLoadFinishMs}},{key:"cmpGdprCached",get:,{key:"reportCmpGdprDetermined",value:,{key:"cmpGdprElapsedMs",get:function(){return this._cmpGdprElapsedMs}},{key:"reportFirstZone",value:function(){this._firstZoneMs=this._firstZoneMs||this.getElapsedTime()}},{key:"firstZoneMs",get:function(){return this._firstZoneMs}},{key:"reportHbAuctionStart",value:,{key:"hbAuctionStartMs",get:function(){return this._hbAuctionStartMs}},{key:"tagLoadedMs",get:function(){return this._tagLoadedMs}},{key:"setStateStatus",value:function(e){var t,i=Date.now();this.states.push((N(t={},e,!0),N(t,"ts",i),N(t,"load_time_ms",i-this.getFuseDob()),t))}},{key:"addAdEvent",value:,{key:"getIsCmpPromptShown",value:]),r}();function le(e){var t;return 1e4<=e?"over_9999":(t=e<4e3?500:1e3,e=Math.floor(e/t)*t,"".concat(e,"-").concat(e+t-1))}function de(){return{_tag:"deferred"}}function ge(){return{_tag:"disabled"}}unction fe(e,t){return{_tag:"loading",loadStart:e,deferredLoad:1<arguments.length&&void 0!==t&&t}}ar be=);ction ye(e){var t=[1,1];return e.forEach(,t}function ke(e,t){return parseInt((100*(e/t-1)).toFixed())}nction Ee(r,o){o=o||{},qe(function(){ct();ar t=u("INP"),i=Me("event",e,{durationThreshold:o.durationThreshold||40}),n=c(r,t,lt,o.reportAllChanges);i&&(i.observe({type:"first-input",buffered:!0}),Ge(,ze()})}ar Te,_e,xe,Ae,Pe,Re=Oe=De=-1,ze=Le=Be=u=Me=c=Ne=Ge=Fe=Ue=-1,We=je=Ve=function(){addEventListener("visibilitychange",je,!0),addEventListener("prerenderingchange",je,!0)},Ze=He=qe=Je=[1800,3e3],Ye=Xe=[.1,.25],Qe={passive:!0,capture:!0},Ke=new Date,$e=et=tt=it=nt=[100,300],rt=0,ot=1/0,st=0,at=ut=ct=lt=[200,500],dt=0,gt=l=[],ht={},ft=pt=[2500,4e3],bt={},vt=[800,1800],mt=St=function(e){var t,i,n;return null!=e&&e.tagName&&null!=e&&e.classList?(t=e.tagName.toLowerCase(),i=e.id?" #".concat(e.id):"",n=0<e.classList.length?" .".concat(e.classList.value):"",e=(e=e.getAttribute("data-fuse"))?' [data-fuse="'.concat(e,'"]'):"","".concat(t).concat(i).concat(n).concat(e)):""},yt=function(){function l(e,t,i,n,r,o,s,a,u){var c=this;d(this,l),this.componentState=e,this.deviceInfo=t,this.logger=i,this.browserWindow=n,this.sessionId=r,this.reporter=o,this.requestMethod=s,this.backgroundRequestTimeout=0,this.requestQueue=new Set,this.baseUrl=a.getFuseCDN(),this.fuseUuid=a.getFuseUUID(),this.fuseId=a.getFuseId(),this.publicationId=a.getPublicationId(),this.adServer=a.isYandexEnabled()?"yandex":"gpt",this.tenantId=a.getTenantCode(),a.getUseTelemetry()&&u.onSlotRequested.subscribe(}return g(l,[{key:"recordSlotRequest",value:,{key:"recordFuseLoad",value:,{key:"recordRogueBidderResponse",value:,{key:"recordRogueAdxResponse",value:function(e,t,i){var n=t.size;this.requestMethod(this.makeUrl("rogue-bidder-response",{slotId:e,bidder:"adx",pbAdId:null==(e=t.sourceAgnosticLineItemId)?void 0:e.toString(),pbCrId:null==(e=t.sourceAgnosticCreativeId)?void 0:e.toString(),pbSize:Re(n),size:Re(i),wDiff:ke(n[0],i[0]),hDiff:ke(n[1],i[1])},this.getCmpData()))}},{key:"prepareRecordingWebVitals",value:function(){var e,i,n,r,o,s=this;this.deviceInfo.getBrowser()!==b.Chrome?this.logInfo("[WEB-VITALS]: Disabled web vitals recording for non-chrome browser"):(e=function(e){"LCP"===(e=e).name?null!=(i=e.entries[0])&&i.element&&(t=St(e.entries[0].element)):"CLS"===e.name&&(t=(i=e.entries.reduce(void 0))?St(null==(i=i.sources[i.sources.length-1])?void 0:i.node):void 0);var t,i={name:e.name,value:"".concat(e.value),rating:e.rating,id:e.id,delta:"".concat(e.delta),element:t};s.logInfo("[WEB-VITALS]: ".concat(JSON.stringify(i))),s.queueBackgroundRequest("web-vitals",{cwvRep:[i]},s.getCmpData())},this.logInfo("[WEB-VITALS]: Set up web vitals callbacks"),Ie(e,{reportAllChanges:!0}),Ye(e),we(e),Ee(e),Ce(e,{reportAllChanges:!0}),i=e,n=n||{},r=u("TTFB"),o=c(i,r,vt,n.reportAllChanges),mt()}},{key:"prepareBackgroundRequestProcessor",value:,{key:"logInfo",value:,{key:"flushQueue",value:function(){var e;if(!(this.requestQueue.size<=0)){this.logInfo("Flushing request queue");var t,i,n=[],r=this.requestQueue);try{for(r.s();!(i=r.n()).done;){var o=i.value;"web-vitals"===o.eventType&&null!=(e=o.record)&&e.cwvRep?(n.push.apply(n,s(o.record.cwvRep)),o.cmpData&&(t=o.cmpData)):this.requestMethod(this.makeUrl(o.eventType,o.record,o.cmpData))}}catch(e){r.e(e)}finally{r.f()}for(;1<=n.length;)this.requestMethod(this.makeUrl("web-vitals",{cwvRep:n.splice(0,10)},t));this.requestQueue.clear()}}},{key:"makeUrl",value:function(e,t,i){t=this.buildQueryParameters(Object.assign(Object.assign(Object.assign({},t),{cmpj:null==i?void 0:i.jurisdiction,cmpdialog:null==i?void 0:i.dialogShown}),this.getCommonMetadata(e))),i="https:".concat(this.baseUrl);return"https://".concat(this.getHostName(i),"/telemetry/noconsent").concat(t)}},{key:"queueBackgroundRequest",value:,{key:"logDetails",value:,{key:"buildQueryParameters",value:,{key:"getCommonMetadata",value:function(e){var t=[this.browserWindow.location.href,this.getReferrer()],i=t[0],t=t[1];return{v:"1",ttm:Date.now(),cookie:this.browserWindow.navigator.cookieEnabled,res:"".concat(screen.width,"x").concat(screen.height),device:this.deviceInfo.getDevice(),browser:this.deviceInfo.getBrowser(),fuuid:this.fuseUuid,fid:this.fuseId,pubid:this.publicationId,url:this.purify(i),refr:this.purify(t),sid:this.sessionId,srate:100,adserver:this.adServer,etm:this.reporter.getElapsedTime(),e:e,tenant:this.tenantId,sd:this.browserWindow.scrollY}}},{key:"getCmpData",value:,{key:"getHostName",value:,{key:"getParameter",value:function(e,t){e=/^(?:https?|ftp)(?::\/*(?:[^?]+))([?][^#]+)/.exec(e);return e&&1<(null==e?void 0:e.length)?this.fromQuerystring(t,e[1]):null}},{key:"fromQuerystring",value:,{key:"getReferrer",value:,{key:"purify",value:]),l}(),kt=function(){function t(e){d(this,t),this.initialiser=e,this._field=null}return g(t,[{key:"field",get:]),t}();unction wt(e){var t=Gt(e);if(!h(t)&&""!==t){if("true"===t||"false"===t)return"true"===t;var i=parseInt(t,10);if(Number.isInteger(i))return i;Dt.info("[SETTINGS] Could not parse ".concat(e," with value: ").concat(t," as a number"))}}var Et=function(){eturn g(i,[{key:"subscribe",value:function(e){this.subscribers.push(e)}},{key:"_unsubscribe",value:function(e){e=this.subscribers.indexOf(e);return 0<=e&&(this.subscribers.splice(e,1),!0)}},{key:"unsubscribe",value:,{key:"findWrapper",value:function(t){var e;return null==(e=this.wrapped.filter(function(e){return e.subscriber===t}).shift())?void 0:e.wrapper}},{key:"once",value:function(t){ar n=this;this.subscribe(i),this.wrapped.push({wrapper:i,subscriber:t})}},{key:"immediateOrOnce",value:,{key:"emit",value:function(t){var i=this,e=this.subscribers.length;0<e?this.logger.debug("[EVENT][".concat(this.eventName,"]: Fired, start processing ").concat(e," callbacks")):this.logger.debug("[EVENT][".concat(this.eventName,"]: Fired, no pending callbacks")),this.lastEmitted=t,this.subscribers.map(function(e){return e}).forEach(}},{key:"getSubscriberCount",value:function(){return this.subscribers.length}}]),i}(),Ct=function(){function o(e,t,i,n){var r=this;d(this,o),this.logger=e,this.eventName=t,this.source=i,this.filter=n,this.delegate=new Et(e,t),i.subscribe(function(e){e=r.filter(e);p(e)&&r.delegate.emit(e)})}return g(o,[{key:"subscribe",value:function(e){this.delegate.subscribe(e)}},{key:"unsubscribe",value:function(e){this.delegate.unsubscribe(e)}},{key:"once",value:,{key:"immediateOrOnce",value:]),o}(),m=new(function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};d(this,i),this.logger=e,this.addDebugProxy=t,this.emitters={},this.observables={}}return g(i,[{key:"onTagInitComplete",get:function(){return this.getEmitter("onTagInitComplete")}},{key:"pageInitObservable",get:function(){return this.onPageInit}},{key:"onPageInit",get:function(){return this.getEmitter("onPageInit")}},{key:"onPageReset",get:function(){return this.getEmitter("onPageReset")}},{key:"onZoneEvent",get:function(){return this.getEmitter("onZoneEvent")}},{key:"onAuctionEvent",get:function(){return this.getEmitter("onAuctionEvent")}},{key:"onZoneRegistered",get:function(){return this.getFiltered("register_zone",this.onZoneEvent,function(e){return"registered"==e.zoneEventType?e:null})}},{key:"onZoneActivateApi",get:,{key:"activateZoneCalledObservable",get:function(){return this.onZoneActivateApi}},{key:"onComponentInitEvent",get:function(){return this.getEmitter("onComponentInitEvent")}},{key:"onInitManagerReady",get:function(){return this.getEmitter("onInitManagerReady")}},{key:"onWindowResized",get:function(){return this.getEmitter("onWindowResized")}},{key:"onSlotLoaded",get:function(){return this.getEmitter("onSlotLoaded")}},{key:"onSlotRender",get:function(){return this.getEmitter("onSlotRender")}},{key:"onSlotResponse",get:function(){return this.getEmitter("onSlotResponse")}},{key:"onSlotRequested",get:function(){return this.getEmitter("onSlotRequested")}},{key:"onImpressionViewable",get:,{key:"onBreakpointChanged",get:,{key:"getEmitter",value:function(e){var t,i=new Et(this.logger(),e),n=this.addDebugProxy(),n=n?n(i):i;return null!=(t=(i=this.emitters)[e])?t:i[e]=n}},{key:"getFiltered",value:function(e,t,i){var n,r;return null!=(n=(r=this.observables)[e])?n:r[e]=new Ct(this.logger(),e,t,i)}}]),i}())(It(function(){return f.getLogger()}),It(function(){var e;return null==(e=f.getFuseDebugger())?void 0:e.fuseEventEmitterWrapper()})),Tt=),_t="InView",xt=function(){function t(e){d(this,t),this.params=e,this.name=_t}return g(t,[{key:"buildTriggers",value:function(e){return[new Tt(e)]}},{key:"check",value:function(e,t){e=t.slotRegistry.getSlot(e);return!!e&&(t=t.viewportInfo.getCurrentBreakpoint().name,!(!h(t=this.params[t])&&!1!==t)||e.isInView(t))}}]),t}(),At=function(){function r(t,e,i){d(this,r);his.unsubscribe=e.subscribe(n)}return g(r,[{key:"destroy",value:function(){this.unsubscribe()}}]),r}(),Pt=function(){G(r,At);var n=j(r);function r(e){d(this,r);var t=e.api.slotRegistry.getSlot(e.id).zoneInstanceId,i=e.api.events.onZoneActivateApi;return n.call(this,e,i,function(e){return e.instanceId===t})}return g(r)}(),Rt="ManualActivate",Ot=function(){eturn g(e,[{key:"buildTriggers",value:function(e){return[new Pt(e)]}},{key:"check",value:function(e,t){e=null==(e=t.slotRegistry.getSlot(e))?void 0:e.zoneInstanceId;return p(e)&&t.zoneRegistry.isManuallyActivated(e)}}]),e}(),Dt=f.getLogger(),zt=function(){return t("fuseDelayQuantcastInit")},Lt=function(){return t("fuseDelayGptInit")},Bt=function(){return t("fuseDelayPrebidInit")},Mt=t=Nt=function(e){var t,i=f.getQueryParam(e)[1];return h(i)?null:(h(t=/^(false|true|1|0)$/i.test(i)?Boolean(/^(true|1)$/i.test(i)):null)&&Dt.info("[SETTINGS] Could not parse ".concat(e," with value: ").concat(i," as a boolean")),t)},Gt=Ft={fuse_blocked_url:[],fuse_breakpoints:{l:1260,m:960,s:600,xs:0},fuse_cdn:"//cdn.fuseplatform.net/publift/tags/",fuse_id:2789,fuse_industry:["IAB19"],fuse_settings:{adblock:!1,afs:{enabled:!1},amazonUam:{enabled:!0,pubID:"8b48e249-e9e6-4a52-8b48-396ea93403e8"},blockthrough:!0,cmp:"none",cmpProvider:{partner:"none"},confiant:!1,disableAutoLoadSlots:!1,disableGdprPersonalisation:!1,enableAutoRegistration:!1,enableMiniScrollers:!1,fuse_test_urls:[],headerbidding:1e3,id5:{enabled:!1},identity:{enabled:!1},in2wInjection:5,inskinWidth:1200,networkCode:"71161633",onLoadCallback:"",prebid:{analytics:[],breakpoint_options:{l:{enabled:!0,timeout:1e3},m:{enabled:!0,timeout:1e3},s:{enabled:!0,timeout:1e3},xs:{enabled:!0,timeout:1e3}},defaultTimeout:1e3,enabled:!0,sendAllBids:!1},quickstart:!1,responsive:!0,strict_cmp:!1,tagCategories:{},telemetry:"default",topStickyHeaderSelector:"",useBidCache:!0,useDomObserver:!1,useGptPreAuctionModule:5,useId5:5,useIndustry:5,videoSettings:{enabled:!1},yandex:!1,yandexBlockId:""},fuse_slots:[{activateConditionConfig:{type:"none"},attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["300x250","336x280"],bidder:"amx",params:{tagId:"cHVibGlmdC5jb20"}},{bidSizes:[],bidder:"appnexus",params:{placementId:"25026891"}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8B3WCTEQP4WQFJK0D_1486321_300x250",zoneId:1486321}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8B3WCTEQP4WQFJK0D_1486323_336x280",zoneId:1486323}},{bidSizes:["300x250"],bidder:"gumgum",params:{inScreen:"282943"}},{bidSizes:["300x250","336x280"],bidder:"pubmatic",params:{adSlot:"71161633/BROWUPD_browserupdate/home_vrec_1",publisherId:"156762"}},{bidSizes:["300x250"],bidder:"sovrn",params:{tagid:"1020017"}},{bidSizes:["336x280"],bidder:"sovrn",params:{tagid:"1020022"}},{bidSizes:["120x600","160x600","300x250","300x600","336x280"],bidder:"triplelift",params:{inventoryCode:"Browserupdate_StandardDisplay"}}],dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},id:"22728806938",interscrollerAttributes:{showBanner:!1,zIndex:0},sizeMapping:{l:[[300,250],[336,280]],m:[[300,250],[336,280]],s:[],xl:[[300,250],[336,280]],xs:[]},sizes:[[300,250],[336,280]],slot:"/71161633,1007669/BROWUPD_browserupdate/home_vrec_1",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1},zoneCategories:[]},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90"],bidder:"amx",params:{tagId:"cHVibGlmdC5jb20"}},{bidSizes:[],bidder:"appnexus",params:{placementId:"25026894"}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8XTB1C5CJQ67H6XAW_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8XTB1C5CJQ67H6XAW_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8XTB1C5CJQ67H6XAW_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8XTB1C5CJQ67H6XAW_1486320_320x100",zoneId:1486320}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8XTB1C5CJQ67H6XAW_1486321_300x250",zoneId:1486321}},{bidSizes:["300x600"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8XTB1C5CJQ67H6XAW_1486322_300x600",zoneId:1486322}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8XTB1C5CJQ67H6XAW_1486323_336x280",zoneId:1486323}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8XTB1C5CJQ67H6XAW_1486324_728x90",zoneId:1486324}},{bidSizes:["300x250"],bidder:"gumgum",params:{inScreen:"282943"}},{bidSizes:["300x600"],bidder:"gumgum",params:{inScreen:"282944"}},{bidSizes:["320x480"],bidder:"gumgum",params:{inScreen:"282945"}},{bidSizes:["320x50"],bidder:"gumgum",params:{inScreen:"282946"}},{bidSizes:["468x60"],bidder:"gumgum",params:{inScreen:"282947"}},{bidSizes:["728x90"],bidder:"gumgum",params:{inScreen:"282948"}},{bidSizes:["300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90"],bidder:"pubmatic",params:{adSlot:"71161633/BROWUPD_browserupdate/home_hrec_2",publisherId:"156762"}},{bidSizes:["728x90"],bidder:"sovrn",params:{tagid:"1020014"}},{bidSizes:["300x250"],bidder:"sovrn",params:{tagid:"1020017"}},{bidSizes:["300x600"],bidder:"sovrn",params:{tagid:"1020018"}},{bidSizes:["320x100"],bidder:"sovrn",params:{tagid:"1020019"}},{bidSizes:["320x50"],bidder:"sovrn",params:{tagid:"1020020"}},{bidSizes:["336x280"],bidder:"sovrn",params:{tagid:"1020022"}},{bidSizes:["468x60"],bidder:"sovrn",params:{tagid:"1020023"}},{bidSizes:["320x480"],bidder:"sovrn",params:{tagid:"1120357"}},{bidSizes:["300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","fluid"],bidder:"triplelift",params:{inventoryCode:"Browserupdate_StandardDisplay"}}],id:"22728806941",sizeMapping:{l:[[468,60],[728,90],"fluid"],m:[[468,60],[728,90],"fluid"],s:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],"fluid"],xl:[[468,60],[728,90],"fluid"],xs:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],"fluid"]},sizes:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],["fluid"]],slot:"/71161633,1007669/BROWUPD_browserupdate/home_hrec_2",zoneCategories:[]},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:30,scrollToStick:!1,sticky:!0},bids:[{bidSizes:["300x50","320x50","468x60","728x90","970x90"],bidder:"amx",params:{tagId:"cHVibGlmdC5jb20"}},{bidSizes:[],bidder:"appnexus",params:{placementId:"25026897"}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ91MAM8G3E5GNBFS8W_1486317_300x50",zoneId:1486317}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ91MAM8G3E5GNBFS8W_1486319_320x50",zoneId:1486319}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ91MAM8G3E5GNBFS8W_1486324_728x90",zoneId:1486324}},{bidSizes:["970x90"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ91MAM8G3E5GNBFS8W_1486325_970x90",zoneId:1486325}},{bidSizes:["320x50"],bidder:"gumgum",params:{inScreen:"282946"}},{bidSizes:["468x60"],bidder:"gumgum",params:{inScreen:"282947"}},{bidSizes:["728x90"],bidder:"gumgum",params:{inScreen:"282948"}},{bidSizes:["970x90"],bidder:"gumgum",params:{inScreen:"282949"}},{bidSizes:["300x50","320x50","468x60","728x90","970x90"],bidder:"pubmatic",params:{adSlot:"71161633/BROWUPD_browserupdate/sticky_footer",publisherId:"156762"}},{bidSizes:["728x90"],bidder:"sovrn",params:{tagid:"1020014"}},{bidSizes:["970x90"],bidder:"sovrn",params:{tagid:"1020015"}},{bidSizes:["320x50"],bidder:"sovrn",params:{tagid:"1020020"}},{bidSizes:["468x60"],bidder:"sovrn",params:{tagid:"1020023"}},{bidSizes:["300x50","320x50","468x60","728x90","970x90"],bidder:"triplelift",params:{inventoryCode:"Browserupdate_StandardDisplay"}}],dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},id:"22728806944",interscrollerAttributes:{showBanner:!1,zIndex:0},sizeMapping:{l:[[728,90],[970,90]],m:[[728,90],[970,90]],s:[[300,50],[320,50],[468,60],[728,90]],xl:[[728,90],[970,90]],xs:[[300,50],[320,50]]},sizes:[[300,50],[320,50],[468,60],[728,90],[970,90]],slot:"/71161633,1007669/BROWUPD_browserupdate/sticky_footer",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1},zoneCategories:[]},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["300x100","300x250","300x50","320x100","320x50","336x280","468x60","728x90"],bidder:"amx",params:{tagId:"cHVibGlmdC5jb20"}},{bidSizes:[],bidder:"appnexus",params:{placementId:"25026888"}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ77RHEF3JTM8R4R43R_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ77RHEF3JTM8R4R43R_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ77RHEF3JTM8R4R43R_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ77RHEF3JTM8R4R43R_1486320_320x100",zoneId:1486320}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ77RHEF3JTM8R4R43R_1486321_300x250",zoneId:1486321}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ77RHEF3JTM8R4R43R_1486323_336x280",zoneId:1486323}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ77RHEF3JTM8R4R43R_1486324_728x90",zoneId:1486324}},{bidSizes:["300x250"],bidder:"gumgum",params:{inScreen:"282943"}},{bidSizes:["320x50"],bidder:"gumgum",params:{inScreen:"282946"}},{bidSizes:["468x60"],bidder:"gumgum",params:{inScreen:"282947"}},{bidSizes:["728x90"],bidder:"gumgum",params:{inScreen:"282948"}},{bidSizes:["300x100","300x250","300x50","320x100","320x50","336x280","468x60","728x90"],bidder:"pubmatic",params:{adSlot:"71161633/BROWUPD_browserupdate/home_header",publisherId:"156762"}},{bidSizes:["728x90"],bidder:"sovrn",params:{tagid:"1020014"}},{bidSizes:["300x250"],bidder:"sovrn",params:{tagid:"1020017"}},{bidSizes:["320x100"],bidder:"sovrn",params:{tagid:"1020019"}},{bidSizes:["320x50"],bidder:"sovrn",params:{tagid:"1020020"}},{bidSizes:["336x280"],bidder:"sovrn",params:{tagid:"1020022"}},{bidSizes:["468x60"],bidder:"sovrn",params:{tagid:"1020023"}},{bidSizes:["300x100","300x250","300x50","320x100","320x50","336x280","468x60","728x90","fluid"],bidder:"triplelift",params:{inventoryCode:"Browserupdate_StandardDisplay"}}],id:"22728807280",sizeMapping:{m:[],s:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],[468,60],[728,90],"fluid"],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],"fluid"]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],[468,60],[728,90],["fluid"]],slot:"/71161633,1007669/BROWUPD_browserupdate/home_header",zoneCategories:[]},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90"],bidder:"amx",params:{tagId:"cHVibGlmdC5jb20"}},{bidSizes:[],bidder:"appnexus",params:{placementId:"25026889"}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8235YBR1VYR0JABY8_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8235YBR1VYR0JABY8_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8235YBR1VYR0JABY8_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8235YBR1VYR0JABY8_1486320_320x100",zoneId:1486320}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8235YBR1VYR0JABY8_1486321_300x250",zoneId:1486321}},{bidSizes:["300x600"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8235YBR1VYR0JABY8_1486322_300x600",zoneId:1486322}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8235YBR1VYR0JABY8_1486323_336x280",zoneId:1486323}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"22728807286_1486324_728x90",zoneId:1486324}},{bidSizes:["300x250"],bidder:"gumgum",params:{inScreen:"282943"}},{bidSizes:["300x600"],bidder:"gumgum",params:{inScreen:"282944"}},{bidSizes:["320x480"],bidder:"gumgum",params:{inScreen:"282945"}},{bidSizes:["320x50"],bidder:"gumgum",params:{inScreen:"282946"}},{bidSizes:["468x60"],bidder:"gumgum",params:{inScreen:"282947"}},{bidSizes:["728x90"],bidder:"gumgum",params:{inSlot:282948}},{bidSizes:["300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90"],bidder:"pubmatic",params:{adSlot:"71161633/BROWUPD_browserupdate/update_hrec_1",publisherId:"156762"}},{bidSizes:["728x90"],bidder:"sovrn",params:{tagid:"1020014"}},{bidSizes:["300x250"],bidder:"sovrn",params:{tagid:"1020017"}},{bidSizes:["300x600"],bidder:"sovrn",params:{tagid:"1020018"}},{bidSizes:["320x100"],bidder:"sovrn",params:{tagid:"1020019"}},{bidSizes:["320x50"],bidder:"sovrn",params:{tagid:"1020020"}},{bidSizes:["336x280"],bidder:"sovrn",params:{tagid:"1020022"}},{bidSizes:["468x60"],bidder:"sovrn",params:{tagid:"1020023"}},{bidSizes:["320x480"],bidder:"sovrn",params:{tagid:"1120357"}},{bidSizes:["300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","fluid"],bidder:"triplelift",params:{inventoryCode:"Browserupdate_StandardDisplay"}}],id:"22728807286",sizeMapping:{l:[[468,60],[728,90],"fluid"],m:[[468,60],[728,90],"fluid"],s:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],"fluid"],xl:[[468,60],[728,90],"fluid"],xs:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],"fluid"]},sizes:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],["fluid"]],slot:"/71161633,1007669/BROWUPD_browserupdate/update_hrec_1",zoneCategories:[]},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:30,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["300x250","336x280"],bidder:"amx",params:{tagId:"cHVibGlmdC5jb20"}},{bidSizes:[],bidder:"appnexus",params:{placementId:"25026892"}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8ERMBV52FH0XTRA0M_1486321_300x250",zoneId:1486321}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8ERMBV52FH0XTRA0M_1486323_336x280",zoneId:1486323}},{bidSizes:["300x250"],bidder:"gumgum",params:{inScreen:"282943"}},{bidSizes:["300x250","336x280"],bidder:"pubmatic",params:{adSlot:"71161633/BROWUPD_browserupdate/update_vrec_1",publisherId:"156762"}},{bidSizes:["300x250"],bidder:"sovrn",params:{tagid:"1020017"}},{bidSizes:["336x280"],bidder:"sovrn",params:{tagid:"1020022"}},{bidSizes:["120x600","160x600","300x250","300x600","336x280","fluid"],bidder:"triplelift",params:{inventoryCode:"Browserupdate_StandardDisplay"}}],dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},id:"22728807289",interscrollerAttributes:{showBanner:!1,zIndex:0},sizeMapping:{l:[[300,250],[336,280],"fluid"],m:[[300,250],[336,280],"fluid"],s:[],xl:[[300,250],[336,280],"fluid"],xs:[]},sizes:[[300,250],[336,280],["fluid"]],slot:"/71161633,1007669/BROWUPD_browserupdate/update_vrec_1",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1},zoneCategories:[]},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90"],bidder:"amx",params:{tagId:"cHVibGlmdC5jb20"}},{bidSizes:[],bidder:"appnexus",params:{placementId:"25026893"}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8RYNJGAGCT16V9PZJ_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8RYNJGAGCT16V9PZJ_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8RYNJGAGCT16V9PZJ_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8RYNJGAGCT16V9PZJ_1486320_320x100",zoneId:1486320}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8RYNJGAGCT16V9PZJ_1486321_300x250",zoneId:1486321}},{bidSizes:["300x600"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8RYNJGAGCT16V9PZJ_1486322_300x600",zoneId:1486322}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8RYNJGAGCT16V9PZJ_1486323_336x280",zoneId:1486323}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8RYNJGAGCT16V9PZJ_1486324_728x90",zoneId:1486324}},{bidSizes:["300x250"],bidder:"gumgum",params:{inScreen:"282943"}},{bidSizes:["300x600"],bidder:"gumgum",params:{inScreen:"282944"}},{bidSizes:["320x480"],bidder:"gumgum",params:{inScreen:"282945"}},{bidSizes:["320x50"],bidder:"gumgum",params:{inScreen:"282946"}},{bidSizes:["468x60"],bidder:"gumgum",params:{inScreen:"282947"}},{bidSizes:["728x90"],bidder:"gumgum",params:{inScreen:"282948"}},{bidSizes:["300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90"],bidder:"pubmatic",params:{adSlot:"71161633/BROWUPD_browserupdate/warning_mrec_1",publisherId:"156762"}},{bidSizes:["728x90"],bidder:"sovrn",params:{tagid:"1020014"}},{bidSizes:["300x250"],bidder:"sovrn",params:{tagid:"1020017"}},{bidSizes:["300x600"],bidder:"sovrn",params:{tagid:"1020018"}},{bidSizes:["320x100"],bidder:"sovrn",params:{tagid:"1020019"}},{bidSizes:["320x50"],bidder:"sovrn",params:{tagid:"1020020"}},{bidSizes:["336x280"],bidder:"sovrn",params:{tagid:"1020022"}},{bidSizes:["468x60"],bidder:"sovrn",params:{tagid:"1020023"}},{bidSizes:["320x480"],bidder:"sovrn",params:{tagid:"1120357"}},{bidSizes:["300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","fluid"],bidder:"triplelift",params:{inventoryCode:"Browserupdate_StandardDisplay"}}],id:"22728807292",sizeMapping:{l:[[300,250],[336,280],"fluid"],m:[[300,250],[336,280],"fluid"],s:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],"fluid"],xl:[[300,250],[336,280],"fluid"],xs:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],"fluid"]},sizes:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],["fluid"]],slot:"/71161633,1007669/BROWUPD_browserupdate/warning_mrec_1",zoneCategories:[]},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["300x100","300x250","300x50","320x100","320x50","336x280","468x60","728x90"],bidder:"amx",params:{tagId:"cHVibGlmdC5jb20"}},{bidSizes:[],bidder:"appnexus",params:{placementId:"25026895"}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Y09N1ATRDB0YJQAA_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Y09N1ATRDB0YJQAA_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Y09N1ATRDB0YJQAA_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Y09N1ATRDB0YJQAA_1486320_320x100",zoneId:1486320}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Y09N1ATRDB0YJQAA_1486321_300x250",zoneId:1486321}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Y09N1ATRDB0YJQAA_1486323_336x280",zoneId:1486323}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Y09N1ATRDB0YJQAA_1486324_728x90",zoneId:1486324}},{bidSizes:["300x250"],bidder:"gumgum",params:{inScreen:"282943"}},{bidSizes:["320x50"],bidder:"gumgum",params:{inScreen:"282946"}},{bidSizes:["468x60"],bidder:"gumgum",params:{inScreen:"282947"}},{bidSizes:["728x90"],bidder:"gumgum",params:{inScreen:"282948"}},{bidSizes:["300x100","300x250","300x50","320x100","320x50","336x280","468x60","728x90"],bidder:"pubmatic",params:{adSlot:"71161633/BROWUPD_browserupdate/update_header",publisherId:"156762"}},{bidSizes:["728x90"],bidder:"sovrn",params:{tagid:"1020014"}},{bidSizes:["300x250"],bidder:"sovrn",params:{tagid:"1020017"}},{bidSizes:["320x100"],bidder:"sovrn",params:{tagid:"1020019"}},{bidSizes:["320x50"],bidder:"sovrn",params:{tagid:"1020020"}},{bidSizes:["336x280"],bidder:"sovrn",params:{tagid:"1020022"}},{bidSizes:["468x60"],bidder:"sovrn",params:{tagid:"1020023"}},{bidSizes:["300x100","300x250","300x50","320x100","320x50","336x280","468x60","728x90","fluid"],bidder:"triplelift",params:{inventoryCode:"Browserupdate_StandardDisplay"}}],id:"22728807295",sizeMapping:{m:[],s:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],[468,60],[728,90],"fluid"],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],"fluid"]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],[468,60],[728,90],["fluid"]],slot:"/71161633,1007669/BROWUPD_browserupdate/update_header",zoneCategories:[]},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["300x100","300x250","300x50","320x100","320x50","336x280","468x60","728x90"],bidder:"amx",params:{tagId:"cHVibGlmdC5jb20"}},{bidSizes:[],bidder:"appnexus",params:{placementId:"25026896"}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Z17E5PHKJ1F5XVDF_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Z17E5PHKJ1F5XVDF_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Z17E5PHKJ1F5XVDF_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Z17E5PHKJ1F5XVDF_1486320_320x100",zoneId:1486320}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Z17E5PHKJ1F5XVDF_1486321_300x250",zoneId:1486321}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Z17E5PHKJ1F5XVDF_1486323_336x280",zoneId:1486323}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ8Z17E5PHKJ1F5XVDF_1486324_728x90",zoneId:1486324}},{bidSizes:["300x250"],bidder:"gumgum",params:{inScreen:"282943"}},{bidSizes:["320x50"],bidder:"gumgum",params:{inScreen:"282946"}},{bidSizes:["468x60"],bidder:"gumgum",params:{inScreen:"282947"}},{bidSizes:["728x90"],bidder:"gumgum",params:{inScreen:"282948"}},{bidSizes:["300x100","300x250","300x50","320x100","320x50","336x280","468x60","728x90"],bidder:"pubmatic",params:{adSlot:"71161633/BROWUPD_browserupdate/warning_header",publisherId:"156762"}},{bidSizes:["728x90"],bidder:"sovrn",params:{tagid:"1020014"}},{bidSizes:["300x250"],bidder:"sovrn",params:{tagid:"1020017"}},{bidSizes:["320x100"],bidder:"sovrn",params:{tagid:"1020019"}},{bidSizes:["320x50"],bidder:"sovrn",params:{tagid:"1020020"}},{bidSizes:["336x280"],bidder:"sovrn",params:{tagid:"1020022"}},{bidSizes:["468x60"],bidder:"sovrn",params:{tagid:"1020023"}},{bidSizes:["300x100","300x250","300x50","320x100","320x50","336x280","468x60","728x90","fluid"],bidder:"triplelift",params:{inventoryCode:"Browserupdate_StandardDisplay"}}],id:"22728807298",sizeMapping:{m:[],s:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],[468,60],[728,90],"fluid"],xs:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],"fluid"]},sizes:[[300,50],[300,100],[300,250],[320,50],[320,100],[336,280],[468,60],[728,90],["fluid"]],slot:"/71161633,1007669/BROWUPD_browserupdate/warning_header",zoneCategories:[]},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,dynamic:!1,headerbidding:!1,interscroller:!1,interstitial:!0,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:[],bidder:"appnexus",params:{placementId:"25026898"}},{bidSizes:["300x250","320x480","336x280"],bidder:"pubmatic",params:{adSlot:"71161633/BROWUPD_browserupdate/web_interstitial",publisherId:"156762"}},{bidSizes:["300x250","320x480","336x280"],bidder:"triplelift",params:{inventoryCode:"Browserupdate_StandardDisplay"}}],dynamicAttributes:{each:0,incrementEach:0,position:"in",repeatHeight:1e3,skip:0},id:"22728807301",interscrollerAttributes:{showBanner:!1,zIndex:0},sizeMapping:{l:[[300,250],[320,480],[336,280]],m:[[300,250],[320,480],[336,280]],s:[[300,250],[320,480],[336,280]],xl:[[300,250],[320,480],[336,280]],xs:[[300,250],[320,480],[336,280]]},sizes:[[300,250],[320,480],[336,280]],slot:"/71161633,1007669/BROWUPD_browserupdate/web_interstitial",stickyAttributes:{allowClose:!1,allowReopen:!1,bgOpacity:0,compact:!1,isButtonOutside:!1,isHideForever:!1,isTop:!1},zoneCategories:[]},{activateConditionConfig:{type:"none"},attributes:{adblock:!1,dynamic:!1,headerbidding:!0,interscroller:!1,interstitial:!1,miniscroller:!1,refresh:!1,scrollToStick:!1,sticky:!1},bids:[{bidSizes:["300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90"],bidder:"amx",params:{tagId:"cHVibGlmdC5jb20"}},{bidSizes:[],bidder:"appnexus",params:{placementId:"25026890"}},{bidSizes:["300x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ89WD7AADDRTQHVMP4_1486317_300x50",zoneId:1486317}},{bidSizes:["300x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ89WD7AADDRTQHVMP4_1486318_300x100",zoneId:1486318}},{bidSizes:["320x50"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ89WD7AADDRTQHVMP4_1486319_320x50",zoneId:1486319}},{bidSizes:["320x100"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ89WD7AADDRTQHVMP4_1486320_320x100",zoneId:1486320}},{bidSizes:["300x250"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ89WD7AADDRTQHVMP4_1486321_300x250",zoneId:1486321}},{bidSizes:["300x600"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ89WD7AADDRTQHVMP4_1486322_300x600",zoneId:1486322}},{bidSizes:["336x280"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ89WD7AADDRTQHVMP4_1486323_336x280",zoneId:1486323}},{bidSizes:["728x90"],bidder:"criteo",params:{publisherSubId:"01G1PZXZJ89WD7AADDRTQHVMP4_1486324_728x90",zoneId:1486324}},{bidSizes:["300x250"],bidder:"gumgum",params:{inScreen:"282943"}},{bidSizes:["300x600"],bidder:"gumgum",params:{inScreen:"282944"}},{bidSizes:["320x480"],bidder:"gumgum",params:{inScreen:"282945"}},{bidSizes:["320x50"],bidder:"gumgum",params:{inScreen:"282946"}},{bidSizes:["468x60"],bidder:"gumgum",params:{inScreen:"282947"}},{bidSizes:["728x90"],bidder:"gumgum",params:{inScreen:"282948"}},{bidSizes:["300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90"],bidder:"pubmatic",params:{adSlot:"71161633/BROWUPD_browserupdate/home_hrec_1",publisherId:"156762"}},{bidSizes:["728x90"],bidder:"sovrn",params:{tagid:"1020014"}},{bidSizes:["300x250"],bidder:"sovrn",params:{tagid:"1020017"}},{bidSizes:["300x600"],bidder:"sovrn",params:{tagid:"1020018"}},{bidSizes:["320x100"],bidder:"sovrn",params:{tagid:"1020019"}},{bidSizes:["320x50"],bidder:"sovrn",params:{tagid:"1020020"}},{bidSizes:["336x280"],bidder:"sovrn",params:{tagid:"1020022"}},{bidSizes:["468x60"],bidder:"sovrn",params:{tagid:"1020023"}},{bidSizes:["320x480"],bidder:"sovrn",params:{tagid:"1120357"}},{bidSizes:["300x100","300x250","300x50","300x600","320x100","320x480","320x50","336x280","468x60","728x90","fluid"],bidder:"triplelift",params:{inventoryCode:"Browserupdate_StandardDisplay"}}],id:"22729159982",sizeMapping:{l:[[468,60],[728,90],"fluid"],m:[[468,60],[728,90],"fluid"],s:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],"fluid"],xl:[[468,60],[728,90],"fluid"],xs:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],"fluid"]},sizes:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],["fluid"]],slot:"/71161633,1007669/BROWUPD_browserupdate/home_hrec_1",zoneCategories:[]}],fuse_tenant:"publift",fuse_uuid:"3db5c21a-eb0d-5826-9ddc-fc6e12ebb296",sco:{asi:"publift.com",sellerId:"01FY417JCJKFQDQNA30FCX4RZF"},supported_sizes:{l:[[300,250],[320,480],[336,280],[468,60],[728,90],[970,90],"fluid"],m:[[300,250],[320,480],[336,280],[468,60],[728,90],[970,90],"fluid"],s:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],[468,60],[728,90],"fluid"],xl:[[300,250],[320,480],[336,280],[468,60],[728,90],[970,90],"fluid"],xs:[[300,50],[300,100],[300,250],[300,600],[320,50],[320,100],[320,480],[336,280],"fluid"]},tenantId:"DGKSPXNV53",fuse_flavour:"default",publication_metadata:{publication_id:2,generation_version:"4.137713.0",generation_time:"2023-11-16T04:47:34.644Z",revision:"v5"},fuse_prebid_hash:"b621a3cd8eb9c53f0a9bc9bb381ee39d"},Ut=new(function(){function t(e){d(this,t),this.myWindow=e}return g(t,[{key:"isDevelopmentMode",value:,{key:"getAccountSettings",value:,{key:"getBreakpoints",value:,{key:"isUseBrowserOuterwidth",value:function(){var e;return null!=(e=null!=(e=Nt("fuseUseBrowserOuterwidth"))?e:this.getAccountSettings().fuse_settings.isUseBrowserOuterwidth)&&e}}]),t}())(new kt(function(){return f.getBrowserWindowObject()})),Wt=function(){function r(e,t){var i,n=this;d(this,r),this.layer=e,this.logger=t,this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.lastClickTime=0,this.cancelNextClick=!1,this.touchBoundary=10,this.tapDelay=200,this.tapTimeout=700,e.addEventListener("click",function(e){return n.onClick(e)},!0),e.addEventListener("touchstart",function(e){return n.onTouchStart(e)},!1),e.addEventListener("touchmove",function(e){return n.onTouchMove(e)},!1),e.addEventListener("touchend",function(e){return n.onTouchEnd(e)},!1),e.addEventListener("touchcancel",function(){return n.onTouchCancel()},!1),"function"==typeof e.onclick&&(this.logger.debug("[FASTCLICK] re-using existing onclick"),i=e.onclick,e.addEventListener("click",!1),e.onclick=null),this.logger.debug("[FASTCLICK] FastClick enabled")}return g(r,[{key:"needsClick",value:,{key:"needsFocus",value:,{key:"sendClick",value:function(e,t){document.activeElement&&document.activeElement!==e&&document.activeElement.blur();t=t.changedTouches[0],t=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,button:0,relatedTarget:null});t.forwardedTouchEvent=!0,e.dispatchEvent(t),this.logger.debug("[FASTCLICK] Sent click event to element ".concat(e.tagName))}},{key:"focus",value:function(e){var t;e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type&&"email"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()}},{key:"updateScrollParent",value:function(e){var t=e.fastClickScrollParent;if(!t||!t.contains(e)){var i=e;do{if(i.scrollHeight>i.offsetHeight){t=i,e.fastClickScrollParent=i;break}}while(i=i.parentElement)}t&&(t.fastClickLastScrollTop=t.scrollTop)}},{key:"getTargetElementFromEventTarget",value:,{key:"onTouchStart",value:function(e){if(!(1<e.targetTouches.length)){var t=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],n=window.getSelection();if(!n.rangeCount||n.isCollapsed){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(t),this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=i.pageX,this.touchStartY=i.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault()}}return!0}},{key:"touchHasMoved",value:,{key:"onTouchMove",value:,{key:"findControl",value:,{key:"onTouchEnd",value:function(e){var t=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;this.cancelNextClick=!1,this.lastClickTime=e.timeStamp;var i=this.trackingClickStart,n=(this.trackingClick=!1,this.trackingClickStart=0,t.tagName.toLowerCase());if("label"===n){var r=this.findControl(t);r&&(this.focus(t),t=r)}else if(this.needsFocus(t))return 100<e.timeStamp-i||window.top!==window&&"input"===n?this.targetElement=null:(this.focus(t),this.sendClick(t,e),"select"!==n&&(this.targetElement=null,e.preventDefault())),!1;r=t.fastClickScrollParent;return!(!r||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(t)||(e.preventDefault(),this.sendClick(t,e)),!1)}},{key:"onTouchCancel",value:,{key:"onMouse",value:,{key:"onClick",value:,{key:"destroy",value:]),r}(),jt=);function Vt(t,i,n){ar o,s,a,u,c;return var Zt=function(){eturn g(o,[{key:"getCurrentBreakpoint",value:function(){return e=this.breakpoints,i=this.getViewportStatus().width,n=null,Object.entries(e).forEach(function(e){var e=V(e,2),t=e[0],e=e[1];e<=i&&(!n||e>n.size)&&(n={size:e,name:t})}),n;var e,i,n}},{key:"breakpointSupplier",value:,{key:"isNotXsBreakpoint",value:,{key:"getViewportStatus",value:,{key:"initBpWatch",value:function(){var n=this,r=this.getCurrentBreakpoint().size;this.browserWindow.addEventListener("resize",Vt(500,)}}]),o}();var S=new());var y,Ht=function(){function r(e,t,i,n){var o=this;d(this,r),this.logger=e,this.accountSettings=t,this.breakpoints=i,this.viewportInfo=n,this.forceDisablePrebid=!1,this.v2Compatibility={disableWidgetsRenderer:!1},this.isUamEnabled=function(){var e;return!o.isYandexEnabled()&&(null==(e=o.fuseSettings.amazonUam)?void 0:e.enabled)},this.isResponsiveEnabled=function(){return o.fuseSettings.responsive},this.getInskinWidth=this.getSupportedSizes=this.getCurrentBreakpoint=function(e){var i,n=o.breakpoints,r=null!=e?e:o.viewportInfo.getViewportStatus().width;return Object.keys(n).forEach(function(e){var t=n[e];t<=r&&(!i||t>i.size)&&(i={size:t,name:e})}),i},this.fuseSettings=this.applyQueryOverrides(t.fuse_settings),this.yieldExperiments=this.makeYieldExperimentsSettings(this.fuseSettings),this.logger.debug("[SETTINGS]: Yield experiments settings: ".concat(JSON.stringify(this.yieldExperiments))),this.fuseSettings=this.applyYieldExperimentsOverrides(this.fuseSettings,this.yieldExperiments),this.logger.debug("[SETTINGS]: Final: ".concat(JSON.stringify(this.fuseSettings))),this.initFuseSlots()}return g(r,[{key:"applyQueryOverrides",value:function(e){var t={useBidCache:wt("fuseUseBidCache"),in2wInjection:wt("fuseIn2wInjection"),useIndustry:wt("fuseUseIndustry"),useGptPreAuctionModule:wt("fuseUseGptPreAuctionModule"),useId5:wt("fuseUseId5")},i=Object.assign({},e);return Object.keys(t).forEach(,this.logger.debug("[SETTINGS]: queryOverrides: ".concat(JSON.stringify(t))),i}},{key:"applyYieldExperimentsOverrides",value:,{key:"getYieldExperiment",value:,{key:"getYieldExperimentSettingValue",value:,{key:"isPubliftGAM",value:function(){return"71161633"===this.fuseSettings.networkCode}},{key:"makeYieldExperimentsSettings",value:function(e){var t,i=this.isPubliftGAM();return{useBidCache:this.getYieldExperiment(e.useBidCache),in2wInjection:this.getYieldExperiment(!!i&&e.in2wInjection),useIndustry:this.getYieldExperiment(e.useIndustry),useGptPreAuctionModule:this.getYieldExperiment(e.useGptPreAuctionModule),useId5:this.getYieldExperiment(!(null!=(t=e.id5)&&t.enabled||!i)&&e.useId5)}}},{key:"getYieldExperimentalTargetingValues",value:,{key:"getYieldExperimentsTargeting",value:function(){var i=this,n={};return Object.keys(this.yieldExperiments).forEach(function(e,t){e=i.yieldExperiments[e];e.isYieldExperiment&&(n["fuse_exp_".concat(t+1)]="".concat(Boolean(e.experimentValue)))}),n}},{key:"getUamSettings",value:function(){return this.fuseSettings.amazonUam}},{key:"isPrebidEnabled",value:function(){return!this.isYandexEnabled()&&!this.forceDisablePrebid&&this.fuseSettings.prebid&&this.fuseSettings.prebid.enabled}},{key:"isPrebidServer",value:function(){return 0<this.getPrebidServerBidders().length&&!Nt("fuseDisablePrebidServer")}},{key:"getPrebidServerBidders",value:function(){return this.fuseSettings.prebidServerBidderCodes||[]}},{key:"getPrebidSettings",value:function(){return this.fuseSettings.prebid}},{key:"getFuseUUID",value:function(){return this.accountSettings.fuse_uuid}},{key:"getSco",value:function(){return this.accountSettings.sco}},{key:"getTagRevision",value:function(){return this.accountSettings.publication_metadata.revision}},{key:"getFuseId",value:function(){return this.accountSettings.fuse_id}},{key:"getUseTelemetry",value:,{key:"getIosChromeClickHandle",value:function(){return Boolean(this.fuseSettings.iosChromeClickHandle)}},{key:"getConfiantId",value:function(){return this.fuseSettings.confiantId}},{key:"getLowDwellPages",value:function(){return this.fuseSettings.lowDwellPages||[]}},{key:"getMaxViewportsFirstAuction",value:function(){return this.fuseSettings.maxViewportsFirstAuction}},{key:"getCmpProvider",value:function(){return this.isCmpRequired()?this.fuseSettings.cmpProvider:{partner:"none"}}},{key:"isCmpRequired",value:function(){return!this.isYandexEnabled()&&"none"!==this.fuseSettings.cmp}},{key:"getCmpMode",value:,{key:"getCmpSkipStub",value:,{key:"getGdprTimeoutMillis",value:function(){var e;return null!=(e=t("fuseTagGdprTimeoutMs"))?e:2e4}},{key:"getUspTimeoutMillis",value:function(){return 100}},{key:"getTagStartCutoffMs",value:function(){var e;return null!=(e=t("fuseTagStartCutoffMs"))?e:this.fuseSettings.tagStartCutoffMs}},{key:"getPrebidDownloadCutoffMs",value:function(){var e;return null!=(e=t("fusePrebidDownloadCutoffMs"))?e:this.fuseSettings.prebidDownloadCutoffMs}},{key:"getPrebidTagStartCutoffMs",value:function(){var e;return null!=(e=t("fusePrebidTagStartCutoffMs"))?e:this.fuseSettings.prebidTagStartCutoffMs}},{key:"getUamTagStartCutoffMs",value:function(){var e;return null!=(e=t("fuseUamTagStartCutoffMs"))?e:this.fuseSettings.uamTagStartCutoffMs}},{key:"getAuctionMaxSlots",value:function(){var e;return null!=(e=null!=(e=t("fuseAuctionMaxSlots"))?e:this.fuseSettings.auctionMaxSlots)?e:99}},{key:"isIdentityEnabled",value:function(){var e;return null!=(e=null==(e=this.fuseSettings.identity)?void 0:e.enabled)&&e}},{key:"getIdentitySettings",value:function(){return this.fuseSettings.identity}},{key:"getAfsSettings",value:,{key:"isId5Enabled",value:function(){var e;return(null==(e=this.fuseSettings.id5)?void 0:e.enabled)||this.getYieldExperimentSettingValue(this.fuseSettings.useId5)}},{key:"isGptPreAuctionEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useGptPreAuctionModule)}},{key:"isIn2wInjection",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.in2wInjection)}},{key:"isBidCacheEnabled",value:function(){return this.getYieldExperimentSettingValue(this.fuseSettings.useBidCache)}},{key:"isFuseIndustryEnabled",value:,{key:"isAutoRegistrationEnabled",value:function(){return Boolean(this.fuseSettings.enableAutoRegistration)}},{key:"getId5PartnerId",value:function(){var e=null==(e=this.fuseSettings.id5)||!e.enabled||null==(e=this.fuseSettings.id5)?void 0:e.partnerId;return this.yieldExperiments.useId5.isYieldExperiment&&this.yieldExperiments.useId5.experimentValue?1189:e}},{key:"getVideoSettings",value:function(){var e;return null!=(e=this.fuseSettings.videoSettings)?e:{enabled:!1}}},{key:"isConfiantEnabled",value:function(){return!this.isYandexEnabled()&&this.fuseSettings.confiant}},{key:"isPubstackEnabled",value:,{key:"getPubstackId",value:function(){return this.fuseSettings.pubstackId}},{key:"isBlockthroughEnabled",value:,{key:"isWidgetRendererEnabled",value:,{key:"setDisableWidgetRenderer",value:function(){this.v2Compatibility.disableWidgetsRenderer=!0}},{key:"isStrictCmp",value:function(){return Boolean(this.fuseSettings.strict_cmp)}},{key:"isRequestGdprPersonalisation",value:,{key:"isIframeCmp",value:,{key:"setForceDisablePrebid",value:,{key:"isMiniScrollersEnabled",value:function(){return Boolean(this.fuseSettings.enableMiniScrollers)}},{key:"scrollToStickDisableDepth",value:function(){return this.fuseSettings.scrollToStickDisableDepth}},{key:"isSpaOldBlockingPageInit",value:,{key:"getTopStickyHeaderSelector",value:function(){var e;return(null==(e=null==(e=this.getFuseSlots().filter(function(e){var t;return(null==(t=e.attributes)?void 0:t.miniscroller)&&(null==(t=e.miniscrollerAttributes)?void 0:t.topStickyHeaderSelector)})[0])?void 0:e.miniscrollerAttributes)?void 0:e.topStickyHeaderSelector)||Gt("fuseTopStickyHeaderSelector")||this.fuseSettings.topStickyHeaderSelector}},{key:"getSlotRefWithoutMcm",value:function(e){var t=/^(\/\d*),(\d*)(\/.*)$/i;if(!1===t.test(e))return this.logger.debug("[SETTINGS]: regExGamAdUnitRef.test(slotRef): ".concat(JSON.stringify(t.test(e)),", slotRef: ").concat(e)),e;this.logger.debug("[SETTINGS]: regExGamAdUnitRef.test(slotRef): ".concat(JSON.stringify(t.test(e)),", slotRef: ").concat(e));t=t.exec(e);return this.logger.debug("[SETTINGS]: slotRef: ".concat(e,", matches: ").concat(JSON.stringify(t))),"".concat(t[1]).concat(t[3])}},{key:"cleanSlotBasedOnMcmMode",value:,{key:"cleanSlotSizeMapping",value:function(e){var t,i={};return null!=(t=e.sizeMapping)&&t.xl&&(i.xl=e.sizeMapping.xl),null!=(t=e.sizeMapping)&&t.l&&(i.l=e.sizeMapping.l),i.m=null==(t=e.sizeMapping)?void 0:t.m,i.s=null==(t=e.sizeMapping)?void 0:t.s,i.xs=null==(t=e.sizeMapping)?void 0:t.xs,Object.assign(Object.assign({},e),{sizeMapping:i})}},{key:"initFuseSlots",value:function(){var i=this;this.accountSettings.fuse_slots=this.accountSettings.fuse_slots.map(function(e){var t="lazy"===(e=i.cleanFuseSlot(Boolean(Nt("fuseMcmOff")),e)).activateConditionConfig.type?i.getCurrentBreakpoint():void 0,e=qt(e,t);return e=Jt(e,i.fuseSettings.tagCategories),e=i.applyOverrides(e),i.cleanSlotSizeMapping(e)})}},{key:"cleanFuseSlot",value:,{key:"getFuseSlots",value:function(){return this.accountSettings.fuse_slots}},{key:"applyOverrides",value:function(e){var t;return Object.assign(Object.assign({},e),{attributes:Object.assign(Object.assign({},e.attributes),{interscroller:void 0!==(null==(t=this.overrideParams)?void 0:t.interscrollersParams[e.id])||(null==(t=e.attributes)?void 0:t.interscroller),sticky:void 0!==(null==(t=this.overrideParams)?void 0:t.stickiesParams[e.id])||(null==(t=e.attributes)?void 0:t.sticky),dynamic:void 0!==(null==(t=this.overrideParams)?void 0:t.dynamicParams[e.id])||(null==(t=e.attributes)?void 0:t.dynamic)||(null==(t=this.overrideParams)?void 0:t.dynamicParams[e.id]),scrollToStick:void 0!==(null==(t=this.overrideParams)?void 0:t.scrollToStickParams[e.id])||(null==(t=e.attributes)?void 0:t.scrollToStick),miniscroller:void 0!==(null==(t=this.overrideParams)?void 0:t.miniscrollersParams[e.id])||(null==(t=e.attributes)?void 0:t.miniscroller)}),interscrollerAttributes:Object.assign(Object.assign({},e.interscrollerAttributes),null==(t=this.overrideParams)?void 0:t.interscrollersParams[e.id]),stickyAttributes:Object.assign(Object.assign({},e.stickyAttributes),null==(t=this.overrideParams)?void 0:t.stickiesParams[e.id]),dynamicAttributes:Object.assign(Object.assign({},e.dynamicAttributes),null==(t=this.overrideParams)?void 0:t.dynamicParams[e.id]),miniscrollerAttributes:Object.assign(Object.assign({},e.miniscrollerAttributes),null==(t=this.overrideParams)?void 0:t.miniscrollersParams[e.id])})}},{key:"generateZoneTemplate",value:function(e,t){var i=this.getZoneTemplate(e);if(i)return this.zoneCustomiser()&&function(t,i,e){if(e)try{t.log("[ZONE][".concat(i,"][fuseZoneCustomiser] Start"))}catch(e){t.error("[ZONE][".concat(i,"][fuseZoneCustomiser] Encountered error during evaluation"),e)}else t.error("[ZONE][".concat(i,"][fuseZoneCustomiser] api is not defined, skip customisation"))}(this.logger,e,t),i}},{key:"getZoneTemplate",value:,{key:"isScanDOMOnPageLoad",value:,{key:"isHeaderBiddingSlot",value:function(e){return!e.attributes.interstitial&&e.attributes.headerbidding&&0<e.bids.length}},{key:"isSlotWidget",value:function(e){var t;return(null==(t=e.attributes)?void 0:t.interscroller)||(null==(t=e.attributes)?void 0:t.sticky)||(null==(t=e.attributes)?void 0:t.dynamic)||null}},{key:"maxSlotHeightForBreakpoint",value:function(e,t){return null==(e=e.sizeMapping[t])?void 0:e.reduce(0)}},{key:"getPrebidOptions",value:function(e){if(this.isPrebidEnabled()&&this.fuseSettings.prebid.breakpoint_options){var e=this.fuseSettings.prebid.breakpoint_options[e];if(e)return{enabled:e.enabled,sendAllBids:!0===this.fuseSettings.prebid.sendAllBids,timeout:null!=(e=null!=(e=e.timeout)?e:this.fuseSettings.prebid.defaultTimeout)?e:1e3}}return{enabled:this.isPrebidEnabled(),sendAllBids:!0===this.fuseSettings.prebid.sendAllBids,timeout:null!=(e=this.fuseSettings.prebid.defaultTimeout)?e:1e3}}},{key:"isPrebidEnabledAtBP",value:function(e){return this.isPrebidEnabled()&&this.getPrebidOptions(e).enabled}},{key:"isUamEnabledAtBP",value:,{key:"getHbTimeout",value:,{key:"getPrebidMediaTypes",value:,{key:"isPrebidBannerEnabled",value:function(){return this.getPrebidMediaTypes().includes("banner")}},{key:"isPrebidVideoEnabled",value:function(){return this.getPrebidMediaTypes().includes("video")}},{key:"isPrebidNativeEnabled",value:,{key:"isSlotEnabledForBreakpoint",value:function(e,t){var e=this.getZoneTemplate(e);return!!e&&0<(null!=(e=null==(e=e.sizeMapping)?void 0:e[t])?e:[]).length}},{key:"getPublicationId",value:,{key:"getFlavour",value:function(){return this.accountSettings.fuse_flavour||"default"}},{key:"getFuseCDN",value:function(){return this.accountSettings.fuse_cdn}},{key:"getPrebidHash",value:function(){return this.accountSettings.fuse_prebid_hash}},{key:"getBlockedUrls",value:function(){return this.accountSettings.fuse_blocked_url||[]}},{key:"getFuseIndustry",value:function(){return this.accountSettings.fuse_industry}},{key:"getFuseSettings",value:function(){return this.fuseSettings}},{key:"getEdgeHtmlMaxAdsRefreshLimit",value:,{key:"getDefaultRefreshInterval",value:function(){return this.fuseSettings.refresh}},{key:"getAccountSettings",value:function(){return this.accountSettings}},{key:"getV2CompatOverrides",value:function(){return this.v2Compatibility}},{key:"isTestCreatives",value:,{key:"getSlotTestUrls",value:,{key:"getYandexBlockId",value:,{key:"isYandexEnabled",value:,{key:"isPubxaiEnabled",value:function(){return this.fuseSettings.usePubxai||!1}},{key:"isArctagEnabled",value:,{key:"getIn2wRatio",value:,{key:"getIn2wAdvertiserId",value:function(){return this.fuseSettings.in2wAdvertiserId}},{key:"getIn2wAdvertiserTimeZone",value:function(){return this.fuseSettings.in2wAdvertiserTimeZone}},{key:"getTenantCode",value:function(){return this.accountSettings.fuse_tenant}},{key:"getPrebidIasPubId",value:function(){return this.fuseSettings.prebidIasPubId}},{key:"zoneCustomiser",value:function(){return this.fuseSettings.zoneCustomiser}}]),r}(),n=new(function(){function e(){d(this,e)}return g(e,[{key:"getSettings",value:]),e}()),qt=function(e,t){var i=e.activateConditionConfig,n={activateCondition:void 0,excludeFromAuctionBlock:"none"!==i.type};switch(i.type){case"none":break;case"lazy":var r=null==t?void 0:t.name,r=i.scrollDistance[r];h(r)||!1===r||(n=Object.assign(Object.assign({},n),{activateCondition:{type:"condition",name:_t,params:i.scrollDistance}}));break;case"manual":n=Object.assign(Object.assign({},n),{activateCondition:{type:"condition",name:Rt}});break;case"custom":n=Object.assign(Object.assign({},n),{activateCondition:i.config});break;default:K(i)}return Object.assign(Object.assign({},e),n)},Jt=function(e,t){var i;return t&&Object.keys(t).length&&null!=(i=e.zoneCategories)&&i.length&&(i=e.zoneCategories.map(function(e){return t[e]})).length?Object.assign(Object.assign({},e),{activateCondition:{type:"and",subConditions:e.activateCondition?[e.activateCondition].concat(s(i)):i}}):e},k=new(function(){function e(){d(this,e)}return g(e,[{key:"getDeviceInfo",value:,{key:"getTelemetry",value:function(){var i=this;return this.telemetry||(this.telemetry=new yt(this.getComponentStatusStore(),this.getDeviceInfo(),f.getLogger(),f.getBrowserWindowObject(),f.getSessionId(),this.getReporter(),function(e){var t=f.getBrowserWindowObject();t.fetch?t.fetch(e,{credentials:"omit",mode:"cors",keepalive:!0}).catch(:((t=new XMLHttpRequest).open("GET",e,!0),t.send())},n.getSettings(),{onSlotRequested:m.onSlotRequested})),this.telemetry}},{key:"getReporter",value:function(){var e;return this.reporter||(e=f.getFuseDob(),this.reporter=new ce(e,{onSlotLoaded:m.onSlotLoaded,onSlotResponse:m.onSlotResponse,onImpressionViewable:m.onImpressionViewable})),this.reporter}},{key:"getComponentStatusStore",value:]),e}()),Yt=Xt=Qt=[5068036699,5101751880,5189144814,5144578315,5221077018,5104488413],Kt=function(e){e=e.slot.getResponseInformation();return Boolean((null==e?void 0:e.advertiserId)&&Qt.includes(e.advertiserId))},$t={name:"Google Publisher Tag",url:"//securepubads.g.doubleclick.net/tag/js/",file:"gpt.js"},ei="is_refresh",ti="adunit_prev_count",ii="slot_prev_count",ni={},ri={},oi=!1,si=!1,I=f.getLogger(),r=f.getBrowserWindowObject(),ai=f.getWindowLocation(),w=k.getReporter(),ui=k.getComponentStatusStore(),ci=n.getSettings(),li=function(){var e=ai.host;return e.substring(e.length-40,e.length)},di=function(){var e=ai.pathname;return e.substring(e.length-40,e.length)},gi=function(){var e=ai.search;return e.substring(e.length-40,e.length)},hi=ar pi=function(e){var t=bi();r.googletag&&r.googletag._loadStarted_?I.debug("[INIT]: GPT ".concat(fi(t)," is already on the page, skip loading another copy")):a($t,function(){I.debug("[INIT]: GPT ".concat(r.googletag&&r.googletag._loadStarted_?"".concat(fi(t)," is loaded"):"not loaded")),e()})},bi=E=var vi=function(e){e.forEach(function(e){var t=e[1],i=t.getSlotElementId(),e=e[0].zoneTemplate.id,i=ni[i]||0,e=ri[e]||0;t.setTargeting(ei,(0<i).toString()),t.setTargeting(ii,i.toString()),t.setTargeting(ti,e.toString())})},mi=function Si(n,a){E(function(){var t,s=[],i=(n.forEach(function(e){t=[e.slotDivId],o=a;var t,i,n,r,o=(y?t?((i=(r=y.pubads().getSlots()).filter(function(e){return 0<=t.indexOf(e.getSlotElementId())})).length!==t.length&&(n=r.map(function(e){return e.getSlotElementId()}),r=t.filter(,I.warn("[AUCTION][".concat(o,"]: Could not find a GPT slot for all fuse slots.\n      Missing Slots=").concat(JSON.stringify(r),",\n      All GPT Slots: ").concat(JSON.stringify(n)))),i):(I.error("Called getGPTSlot() without a fuseSlotCode"),[]):(I.error("Called getGPTSlot(".concat(t,") but googletag not defined")),[]))[0];o?s.push([e,o]):I.warn("[AUCTION][".concat(a,"]: Could not find GPT Slot corresponding to ").concat(e.slotDivId))}),s.map();function e(){vi(s);var e=JSON.stringify(i.map(function(e){return e.getSlotElementId()}));w.addAdEvent("gpt_pubads_refresh_".concat(e),{requestId:a}),oi||(w.reportFirstGptRequest(),w.setStateStatus("first_gpt_request"),Ti(ve(ui.state.cmp))),Ii(),oi=!0,I.debug("[AUCTION][".concat(a,"]: Calling googletag.pubads().refresh(").concat(e,")")),y.pubads().refresh(i,{changeCorrelator:si}),si=!1,mi(s)}i&&0!==i.length?!0===ie.isEdgeBrowser(r)?(I.debug("[GC] will trigger GC for iFrames in Edge browser"),t=r.document.querySelectorAll("div[data-fuse] iframe"),new Promise(.then(.catch():e():I.info("[AUCTION][".concat(a,"]: Cancelled adserver request because no matching GPT slots found"))})}var o=yi=ar Ii=function(){I.debug("[GPT]: Applying page targeting"),o("fuse_site",li()),o("fuse_path",di()),o("fuse_query",gi()),o("fuse_category",hi());function i(e,t){o(e,oi?"refresh":t)}function e(e,t){t&&i(e,le(t))}var t=ci.getFuseIndustry(),t=(t&&o(ci.isFuseIndustryEnabled()?"fuse_industry_2":"fuse_industry",t),o("testmode","".concat(ci.isTestCreatives())),ci.getInskinWidth()),t="".concat(p(t)&&r.screen.width>=t),t=(o("inskin_yes",t),o("fuse_uuid",ci.getFuseUUID()),o("fuse_publication_id",ci.getPublicationId().toString()),o("fuse_flavour",ci.getFlavour()),i("GPT_READY_MS",ki(ui.state.gpt)),i("PREBID_READY_MS",ki(ui.state.prebid)),i("UAM_READY_MS",ki(ui.state.uam)),i("CMP_DETERMINED_MS",ki(ui.state.cmp)),i("CMP_GDPR_CACHED",String(w.cmpGdprCached)),e("FUSE_LOADED_MS",w.tagLoadedMs),w.firstGptRequestMs&&e("GPT_AUCTION_START_MS",w.firstGptRequestMs),w.cmpLoadFinishMs&&e("CMP_LOAD_FINISH_MS",w.cmpLoadFinishMs),w.cmpGdprElapsedMs&&e("CMP_GDPR_ELAPSED_MS",w.cmpGdprElapsedMs),w.firstZoneMs&&e("FIRST_ZONE_MS",w.firstZoneMs),w.hbAuctionStartMs&&e("HB_AUCTION_START_MS",w.hbAuctionStartMs),me(ui.state.cmp)),n=(o("CMP_JURISDICTION",t),o("CMP_ALLOW_PERSONAL","".concat(ve(ui.state.cmp))),ci.getYieldExperimentsTargeting());Object.keys(n).forEach(},wi=Ei=function(){var e=Yt(I,Kt,"IN2W");y.pubads().disableInitialLoad(),y.pubads().collapseEmptyDivs(!0),y.pubads().setCentering(!0),y.pubads().enableSingleRequest(),y.pubads().addEventListener("slotRequested",e("requested",function(e){m.onSlotRequested.emit(e)})),y.pubads().addEventListener("slotResponseReceived",e("response",function(e){m.onSlotResponse.emit(e)})),y.pubads().addEventListener("slotOnload",e("load",function(e){m.onSlotLoaded.emit(e)})),y.pubads().addEventListener("slotRenderEnded",e("render",function(e){m.onSlotRender.emit(e)})),y.pubads().addEventListener("impressionViewable",e("viewable",),Ii()};var Ci=Ti=function(e){e={nonPersonalizedAds:!e};I.info("[GPT]: googletag.pubads().setPrivacySettings(".concat(JSON.stringify(e),")")),r.googletag.pubads().setPrivacySettings(e)},_i=function(e){y.destroySlots(e)},xi=f.getLogger(),Ai=k.getReporter(),Pi=n.getSettings(),Ri={name:"Blockthrough",url:"//btloader.com/",file:"tag?o=5708166709903360&upapi=true"};var Oi={enableIfApplicable:,Di="ZVeqITFg3t0RVj7Gh41kEbdx9DA",zi=f.getLogger(),Li=k.getReporter(),Bi=f.getBrowserWindowObject(),Mi=var Ni={enable:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Di,t=1<arguments.length?arguments[1]:void 0,i=(Li.setStateStatus("confiant_load_start"),Bi.confiant||{}),n=(i[e]=i[e]||{clientSettings:{}},i[e].clientSettings||(i[e].clientSettings={}));n.callback=n.prebidExcludeBidders=[],n.prebidNameSpace="fusePbjs",n.on_prebid_error=function(e){zi.log("[CONFIANT]: failed to scan an ad",e)},n.onRendered=Bi.confiant=i,a(Mi(e),function(){zi.log("[CONFIANT]: Script loaded"),Li.setStateStatus("confiant_load_finish"),t&&t()})}},Gi=f.getLogger(),Fi=k.getReporter(),Ui=var Wi,ji={enable:function(e,t){Fi.setStateStatus("pubstack_load_start"),a(Ui(e),function(){Gi.log("[PUBSTACK]: Script loaded"),Fi.setStateStatus("pubstack_load_finish"),t&&t()})}},Vi=);var Zi,Hi={UserId5:Vi,enable:getId5Module:function(){return Wi}},qi=function(){function i(e,t){d(this,i),this.browserWindow=e,this.placementId=t}return g(i,[{key:"setup",value:function(){var e,t=document.createElement("script"),i=(t.async=!0,t.defer=!0,t.src="https://launchpad-wrapper.privacymanager.io/47eddec1-62a9-4081-b655-0c9fa5eb8a0d/launchpad-liveramp.js",this.browserWindow.document.getElementsByTagName("script")[0]);null!=(e=null==i?void 0:i.parentNode)&&e.insertBefore(t,i)}},{key:"configPrebid",value:]),i}();var Ji={UserIdentity:qi,enable:function(e){var t;Zi||(t=n.getSettings(),(Zi=new qi(e,t.getFuseSettings().identity.placementId)).setup())},getIdentityModule:,Yi=new()),Xi=this&&this.__rest||function(e,t){var i={};for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,r=Object.getOwnPropertySymbols(e);n<r.length;n++)t.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(e,r[n])&&(i[r[n]]=e[r[n]]);return i},C=f.getLogger(),Qi=f.getPackageMajorVersion(),T=Yi.getPrebidGlobal(),Ki=k.getReporter(),_=n.getSettings(),$i="https://mpbs.rubiconproject.com/openrtb2/auction",en="https://mpbs.rubiconproject.com/cookie_sync";ar nn=function(e){var t,i;if(Ki.setStateStatus("prebid_load_script_start"),!tn(T))return t=_.getPrebidHash(),i=_.getFuseCDN(),a(Object.assign({name:"Prebid.org"},t?{url:"//".concat(new URL("https:"+i).hostname,"/prebid/"),file:"prebid-".concat(t,".js")}:{url:"".concat(i).concat(Qi,"/").concat(_.getFuseId(),"/"),file:"prebid.js"}),;C.warn("[INIT]: Prebid ".concat(T.version," is already loaded skip loading it again"))},rn=function on(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({enableSendAllBids:e&&!0===e.sendAllBids,priceGranularity:{buckets:[{max:3,increment:.01,precision:2},{max:10,increment:.1,precision:2},{max:50,increment:1,precision:2},{max:100,increment:10,precision:2}]},sizeConfig:_.isResponsiveEnabled()&&!Ut.isUseBrowserOuterwidth()?(n=null,r=[],Object.keys(Ut.getBreakpoints()).forEach(,r):(t=S.getViewportInfo().getCurrentBreakpoint().name,[{mediaQuery:"(min-width: ".concat(0,"px)"),sizesSupported:_.getSupportedSizes(t),labels:[t]}]),userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"}},enableOverride:!0}},_.isCmpRequired()&&(C.debug("[PREBID]: Configured CMP module"),{consentManagement:{gdpr:{cmpApi:"iab",timeout:_.getUspTimeoutMillis(),defaultGdprScope:_.isStrictCmp(),allowAuctionWithoutConsent:!_.isStrictCmp()},usp:{cmpApi:"iab",timeout:_.getUspTimeoutMillis()}}})),_.isGptPreAuctionEnabled()&&(C.debug("[PREBID]: Configured GPT Pre auction module"),{gptPreAuction:{enabled:!0,customPreAuction:function(e){return null==(e=document.querySelector('div[data-fuse-slot="'.concat(e.code,'"]')))?void 0:e.getAttribute("data-gpid")}}})),e.sco&&{schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[{asi:(t=e.sco).asi,sid:t.sellerId,hp:1}]}}}),0<e.prebidServerBidders.length&&(e=e.prebidServerBidders,C.debug("[PREBID]: Enabling Prebid Server for ".concat(JSON.stringify(e))),{s2sConfig:{accountId:"20884",bidders:e,adapter:"prebidServer",enabled:!0,endpoint:$i,syncEndpoint:en,timeout:750,extPrebid:{cache:{vastxml:{returnCreative:!1}}}}})),{currency:{adServerCurrency:"USD",granularityMultiplier:1,defaultRates:{AUD:{USD:.67}}}}),_.isBidCacheEnabled()&&{useBidCache:!0}),_.getPrebidIasPubId()&&{realTimeData:{dataProviders:[{name:"ias",waitForIt:!0,params:{pubId:_.getPrebidIasPubId()}}]}}),"v5"===_.getTagRevision()&&{enableTIDs:!0});var n,r,t}var sn=an=function(e){var t,i=e.sizesHb.map(function(e){return Re(e)}),n=e.zoneTemplate.bids.filter(function(e){e=e.bidSizes;return!(e&&0<e.length)||0<Oe(i,e).length}).map(;return _.isPrebidVideoEnabled()&&null!=(e=e.mediaTypes)&&e.includes("video")?(t={w:640,h:480,context:"outstream",language:"en",mimes:["video/mp4"]},n.map():n};function un(e){var t;return{code:e.slotDivId,mediaTypes:Object.assign(Object.assign(Object.assign({},_.isPrebidBannerEnabled()&&{banner:{sizes:e.sizesHb}}),_.isPrebidNativeEnabled()&&(null==(t=e.mediaTypes)?void 0:t.includes("native"))&&{native:{sendTargetingKeys:!1}}),_.isPrebidVideoEnabled()&&(null==(t=e.mediaTypes)?void 0:t.includes("video"))&&(t=e,{video:Object.assign(Object.assign({},{context:"outstream",playerSize:[640,480],mimes:["video/mp4"],protocols:[2,3,4],playbackmethod:[2],maxduration:30,minduration:6,skip:1,linearity:2,api:[2]}),t.videoAttributes)})),bids:an(e)}}var cn={loadPrebidLibrary:nn,pushToPrebidQue:rn,getPrebidDefaultConfig:on,setPrebidConfig:sn,getPrebidUnitIndex:getPrebidUnits:function(e){var i={},n=(T.adUnits.forEach(,{});return e.forEach(,n},enable:function(n){rn(function(){var e=on({sendAllBids:_.getPrebidSettings()&&!0===_.getPrebidSettings().sendAllBids,sco:_.getSco(),prebidServerBidders:_.isPrebidServer()?_.getPrebidServerBidders():[]}),t=Ji.getIdentityModule(),t=(_.isIdentityEnabled()&&t&&(C.debug("[PREBID] Enabled identity module"),e=t.configPrebid(e),C.debug("[PREBID] Enabled ATS analytics module"),T.enableAnalytics([{provider:"atsAnalytics",options:{pid:t.placementId}}])),Hi.getId5Module());_.isId5Enabled()&&t&&(C.debug("[PREBID] Enabled id5 module"),e=t.configPrebid(e)),sn(e),C.debug("[PREBID]: Enabled prebid ".concat(JSON.stringify(e)))}),te(Bt(),"simulate prebid download delay",C,},reset:setSiteCategoryAsync:,ln=f.getLogger(),dn=k.getReporter(),gn=function(){return{name:"ArcTag",url:"//silo25.p7cloud.net/",file:"as.js"}};var hn=function(){var i=0,n=setInterval(function(){var e,t=f.getBrowserWindowObject().arcobj1;t?(clearInterval(n),null!=(e=t.page_iab_codes)&&e.text||null!=(e=t.page_iab)&&e.text?(ln.debug("[ARCTAG]: Applying prebid site categories from window.arcobj1 ".concat(JSON.stringify(t))),cn.setSiteCategoryAsync({iabCodes:(null==(e=t.page_iab_codes)?void 0:e.text)||[],keywords:(null==(e=t.page_iab)?void 0:e.text)||[]})):ln.debug("[ARCTAG]: No codes and keyword in retrieved data")):(i++,ln.debug("[ARCTAG]: window.arcobj1 not inited yet ".concat(i)),30<i&&(clearInterval(n),ln.debug("[ARCTAG]: window.arcobj1 check cancelled")))},100)},fn={enable:function(){dn.setStateStatus("arctag_load_start"),a(gn(),}},pn=f.getLogger(),bn=k.getReporter(),vn=mn=function(e){bn.setStateStatus("pubxai_load_start"),a(vn(),},Sn=this&&this.__rest||yn="publift-fuse-afs-injection",kn=function(){function s(e,t,i,n,r){var o=this;d(this,s),this.logger=e,this.reporter=t,this.browserWindow=i,this.settings=n,this.events=r,this.personalizedAds=!1,this.events.onPageInit.subscribe(function(e){return o.initPage(o.getZones(),null!=(e=e.afsPageParams)?e:o.extractPageParams())}),this.events.onPageReset.subscribe(function(){return o.removeAfs()}),this.events.onComponentInitEvent.subscribe(}return g(s,[{key:"extractPageParams",value:,{key:"getZones",value:function(){return this.settings.getFuseSlots().filter(function(e){return!0===(null==(e=e.attributes)?void 0:e.afs)})}},{key:"loadLibrary",value:function(){var e=this,t=(this.reporter.setStateStatus("afs_load_start"),this.browserWindow.document),i=t.createElement("script");i.type="text/javascript",i.innerHTML="\n    (function(g,o){g[o]=g[o]||function(){(g[o]['q']=g[o]['q']||[]).push(\n      arguments)},g[o]['t']=1*new Date})(window,'_googCsa');\n    ",t.querySelector("head").appendChild(i),a({name:"Afs",url:"//www.google.com/adsense/search/",file:"ads.js",insertSelector:"head"},}},{key:"inject",value:function(e,t,i,n){var r=this,o=((o=this.settings.getAfsSettings()).enabled,o.urlPattern,Sn(o,["enabled","urlPattern"])),e=Object.assign(Object.assign({},o),{query:e,adPage:i,personalizedAds:this.personalizedAds,styleId:null!=n?n:o.styleId}),s=(this.logger.log("[AFS]: Page options ".concat(JSON.stringify(e))),"var pageOptions = ".concat(JSON.stringify(e),";")),i=t.map(function(e,t){var i=r.browserWindow.document.querySelector('[data-fuse="'.concat(e.id,'"]'));if(i)return i=Object.assign(Object.assign({},e.afsAttributes),{container:i.id}),t="adblock".concat(t+1),r.logger.log("[AFS][".concat(e.id,"]: Container options ").concat(JSON.stringify(i))),s+="var ".concat(t," = ").concat(JSON.stringify(i),";"),t;r.logger.warn("[AFS]: No container found for zone ".concat(e.id))}).filter(;i.length&&(s+="_googCsa('ads', pageOptions, ".concat(i.join(", "),");"),(n=document.createElement("script")).type="text/javascript",n.id=yn,n.innerHTML=s,document.head.appendChild(n))}},{key:"initPage",value:function(e,t){var i=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(e.length)if(t){var n=t.query,r=t.page,t=t.styleId;if(n){var o=this.browserWindow.document.getElementById(yn);if(o){if(!i)return void this.logger.log("[AFS]: Already initialized");o.remove()}this.inject(n,e,r,t)}else this.logger.log("[AFS]: No query provided")}else this.logger.log("[AFS]: No page params found. Skip init");else this.logger.log("[AFS]: No zones provided. Skip init")}},{key:"removeAfs",value:function(){var e=document.getElementById(yn);null!=e&&e.remove()}}]),s}(),In=new(function(){function e(){d(this,e)}return g(e,[{key:"getAfsManager",value:function(){return this.afsManager||(this.afsManager=new kn(f.getLogger(),k.getReporter(),f.getBrowserWindowObject(),n.getSettings(),m)),this.afsManager}}]),e}()),wn=function(){eturn g(o,[{key:"add",value:function(e,t){var i=this,n=o.getLCTemplateId(e),r=(Array.isArray(this.slots[n])||(this.slots[n]=[]),this.logger.debug("[GPT-REGISTRY]: Added ".concat(n)),this.slots[n].push(t),this.templateTargetings[n]);r?(Object.keys(r).forEach(,this.logger.debug("[GPT-REGISTRY]: Applied targeting for ".concat(n," on newly added gpt slot - id: ").concat(t.getSlotElementId()))):this.logger.debug("[GPT-REGISTRY]: No template targeting set for zoneTemplateId: ".concat(n))}},{key:"purgeAll",value:,{key:"purge",value:function(e){var e=o.getLCTemplateId(e),t=(this.logger.debug("[GPT REGISTRY]: Purging ".concat(e)),this.slots[e]);t&&(this.destroySlotsFunc(t),delete this.slots[e],delete this.templateTargetings[e])}},{key:"purgeByElement",value:,{key:"getSlotsLength",value:,{key:"getSlots",value:,{key:"addTemplateTargetings",value:function(e,t,i){e=o.getLCTemplateId(e);this.templateTargetings[e]||(this.templateTargetings[e]={}),this.templateTargetings[e][t]=i}},{key:"getTemplateTargetings",value:function(e){e=o.getLCTemplateId(e);return this.templateTargetings[e]||null}},{key:"setSlotTargetingById",value:],[{key:"getLCTemplateId",value:]),o}(),En=new()),Cn=function(){eturn g(o,[{key:"getInitStatus",value:,{key:"isReadyForInit",value:,{key:"checkAndTrigger",value:,{key:"getComponentState",value:,{key:"isComponentReady",value:,{key:"isAnyBidLibraryReady",value:function(){var e,t,i;return"disabled"!==this.getComponentState("yandex")?this.isComponentReady("yandex"):(e=this.getComponentState("prebid"),t=this.getComponentState("uam"),i=["ready","disabled"],this.bidLibrariesCutoff||i.includes(e)&&i.includes(t))}},{key:"setTagInitialised",value:,{key:"isTagInitialised",value:function(){return this.state.tag_initialised}},{key:"setIsLowDwellPage",value:,{key:"isLowDwellPage",value:]),o}(),Tn=new()),_n=f.getLogger(),xn=[];function An(){var e;_n.info("[TARGETING] Clearing page targeting"),e=xn,E(,xn=[]}function Pn(i,e){var n=-1;xn.forEach(,_n.info("[TARGETING]: Updating custom targeting for [key: ".concat(i,", value: ").concat(e,"]")),-1<n?xn[n].value=e:xn.push({key:i,value:e}),yi(i,e)}var Rn=),On=function(){function e(){d(this,e),this.name="AlwaysTrue"}return g(e,[{key:"check",value:function(){return!0}},{key:"buildTriggers",value:function(e){return[]}}]),e}(),Dn=),zn=),Ln=),Bn=function(){G(i,At);var t=j(i);function i(e){return d(this,i),t.call(this,e,e.api.events.onWindowResized,}return g(i)}(),Mn=),Nn=function(){eturn g(t,[{key:"buildActivator",value:function(e,t,i,n){var e=this.buildCondition(t,e,i,function(){return r.checkAndFire()}),r=new Rn(this.logger,t,e,i,n);return r}},{key:"registerCondition",value:,{key:"buildCondition",value:,{key:"buildTriggerCondition",value:function(e,t,i,n){var r;return this.internalConditions[t.name]?new Mn(e,this.internalConditions[t.name](),i,n,this.logger):(r=this.conditions[t.name])?(r=new r(null!=(r=t.params)?r:{}),new Mn(e,r,i,n,this.logger)):(this.logger.error("[CONDITION-FACTORY]: Could not find condition ".concat(t.name,", it will be deemed false")),this.buildAlwaysFalseCondition(e,i,n))}},{key:"buildAlwaysFalseCondition",value:,{key:"buildBooleanCondition",value:function(t,e,i,n,r){var o=this,e=e.subConditions;return e&&0!==e.length?(r=r(e.map(),new Mn(t,r,i,n,this.logger)):(this.logger.error("[CONDITION-FACTORY]: Boolean condition with no sub-conditions"),this.buildAlwaysFalseCondition(t,i,n))}}]),t}(),Gn="AbsoluteScrollDistance",Fn=function(){function t(e){d(this,t),this.params=e,this.name=Gn}return g(t,[{key:"buildTriggers",value:function(e){return[new Tt(e)]}},{key:"check",value:function(e,t){return t.getWindow().scrollY>=((null==(t=this.params)?void 0:t.pixelsDistance)||0)}}]),t}(),Un="BreakpointMatch",Wn=function(){function n(e){d(this,n),this.params=e,this.name=Un}return g(n,[{key:"buildTriggers",value:function(e){return[]}},{key:"check",value:],[{key:"compareBp",value:function(e,t,i){e=this.BpOrder[e],t=this.BpOrder[t];return"gte"===i?e<=t:t<=e}}]),n}(),jn=(Wn.BpOrder={xs:1,s:2,m:3,l:4,xl:5},)),Vn="DocumentStatus",Zn=),Hn=),qn="DomElementExists",Jn=),Yn="PageCount",Xn=function(){eturn g(n,[{key:"buildTriggers",value:function(e){return[]}},{key:"check",value:function(e,t){var i;return this.hasChecked||(n.incrementPageCount(e,t.getWindow()),this.hasChecked=!0,i=n.getPageCount(e,t.getWindow()),this.isOver=i>=((null==(i=this.params)?void 0:i.pageCount)||1),this.isOver&&n.resetPageCount(e,t.getWindow())),this.isOver}}],[{key:"getCountKey",value:,{key:"getPageCount",value:,{key:"incrementPageCount",value:,{key:"resetPageCount",value:]),n}(),Qn="UrlRegex",Kn=function(){function t(e){d(this,t),this.params=e,this.name=Qn}return g(t,[{key:"buildTriggers",value:,{key:"check",value:function(e,t){t=t.getWindow().location.toString().match(this.params.regex);return p(t)&&0<t.length}}]),t}(),$n="WindowHeightDistance",er=function(){function t(e){d(this,t),this.params=e,this.name=$n}return g(t,[{key:"buildTriggers",value:,{key:"check",value:function(e,t){var t=t.getWindow();return t.scrollY>=t.innerHeight*((null==(t=this.params)?void 0:t.windowHeightDistance)||0)}}]),t}(),tr="WindowValue",ir=),nr="LocalStorageValue",rr=),or="MetaTagProperty",sr=function(){eturn g(t,[{key:"buildTriggers",value:function(){return[]}},{key:"check",value:function(e,t){t=t.viewportInfo.browserWindow.document.querySelector('meta[name="'.concat(this.metaTagKey,'"]'));return!h(t)&&this.metaTagValues.includes(t.getAttribute("content"))}}]),t}();function ar(e,t){return Boolean(dr(e,t)||(null==(t=null==(t=t.purpose)?void 0:t.legitimateInterests)?void 0:t[e]))}var ur=new())(f.getLogger()),cr=function(){eturn g(n,[{key:"load",value:,{key:"loadQuantcast",value:function(){this.logger.log("[CMP]: Loading Quantcast CMP provider");var e=this,t=this.browserWindow.document.location.hostname,i=this.browserWindow.document.createElement("script"),n=this.browserWindow.document.getElementsByTagName("script")[0],r=this.browserWindow.document.getElementsByTagName("head")[0]||this.browserWindow.document.documentElement,o="https://cmp.quantcast.com".concat("/choice/","PRrmquD1Ggcb1","/",t,"/choice.js?tag_version=V2"),s=new XMLHttpRequest;s.onreadystatechange=function(){4===this.readyState&&(i.async=!0,i.type="text/javascript",200===this.status?i.src=o:e.logger.error("GET call to CMP script with ".concat(t," responed with the status code - ").concat(this.status)),null!=n&&n.parentNode?n.parentNode.insertBefore(i,n):(e.logger.debug("First script element not fully initialised, falling back to head-based insertion"),r.insertBefore(i,r.firstChild)),e.logger.log("[CMP]: Added Quantcast script to document"))},this.logger.log("[CMP]: Opening Quantcast URL"),s.open("GET",o,!0),s.send()}},{key:"loadCookieBot",value:]),n}(),lr=function(){eturn g(i,[{key:"generate",value:,{key:"createStubFunctionV2",value:function(){var o=this;o.logger.debug("[CMP]: Generating V2 stub");for(var r="__tcfapiLocator",i=[],s=o.browserWindow,e=void 0,t=function e(){var t,i=s.document,n=!!s.frames[r];return n?o.logger.debug("[CMP] Found existing version 2 stub"):(o.logger.debug("[CMP] Version 2 stub not found - generating"),i.body?((t=i.createElement("iframe")).style.cssText="display:none",t.name=r,i.body.appendChild(t)):setTimeout(e,5)),!n},n=s;n;){try{if(n.frames[r]){e=n,o.logger.debug("[CMP] Found locator frame");break}}catch(e){"{}"!==JSON.stringify(e)&&o.logger.log("[CMP]:",JSON.stringify(e))}if(n===o.browserWindow.top)break;n=n.parent}e||(o.logger.debug("[CMP] Locator frame not found"),t(),s.__tcfapi=function(){var e=arguments,t=void 0;if(!e.length)return i;"setGdprApplies"===e[0]?3<e.length&&2===e[2]&&"boolean"==typeof e[3]&&(t=e[3],"function"==typeof e[2])&&e[2]("set",!0):"ping"===e[0]?"function"==typeof e[2]&&e[2]({gdprApplies:t,cmpLoaded:!1,cmpStatus:"stub"}):(t="init"===e[0]&&"object"===B(e[3])?[e[0],e[1],e[2],Object.assign(e[3],{tag_version:"V2"})].concat(Array.from(e).slice(4)):e,i.push(t))},s.addEventListener("message",function(i){var n="string"==typeof i.data,e=void 0;try{e=n?JSON.parse(i.data):i.data}catch(e){"{}"!==JSON.stringify(e)&&o.logger.error("[CMP]:",JSON.stringify(e))}var r=null==e?void 0:e.__tcfapiCall;r&&o.browserWindow.__tcfapi(r.command,r.version,r.parameter)},!1))}}]),i}(),dr=function(e,t){var i;return(null==(i=null==(i=t.purpose)?void 0:i.consents)?void 0:i[e])||(null==(i=t.purposeConsents)?void 0:i[e])},gr=function(){function n(e,t,i){d(this,n),this.logger=e,this.consentUIPrompt=i,this.uspTries=0,this.uspTriesLimit=3,this.callCount=-1,this.browserWindow=t,this.createUspStub()}return g(n,[{key:"checkForCCPA",value:function(i){var n=this;this.browserWindow.Cookiebot?(this.logger.log("[CMP-v2]: Checking CCPA with cookiebot"),this.browserWindow.Cookiebot.regulations.ccpaApplies?(this.logger.log("[CMP-V2]: CCPA Region from Cookiebot"),this.browserWindow.__uspapi("getUSPData",1,function(e,t){if(!t)return n.logger.log("[CMP-V2]: Failed retrieving USP data use default instead"),i({applies:!0,privacyString:"1---"});i({applies:!0,privacyString:e.uspString})})):i({applies:!1})):this.browserWindow.__uspapi("uspPing",1,}},{key:"setGDPRConsentPrompt",value:,{key:"setCCPAConsentPrompt",value:,{key:"cmpLoaded",value:function(t){var i=!1;setTimeout(1e3),this.browserWindow.__tcfapi("ping",2,function(e){return i=!0,null!=e&&e.cmpLoaded?t(!0):t(!1)})}},{key:"getConsentData",value:function(i){var n=this;this.browserWindow.__tcfapi("getTCData",2,function(e,t){return n.callCount++,t&&e?h(e.gdprApplies)||"loading"===(null==(t=null==e?void 0:e.cmpStatus)?void 0:t.toLowerCase())||e.gdprApplies&&h(null==e?void 0:e.eventStatus)?(n.logger.log("[CMP-V2]: GDPR not yet determined"),i({dataAvailable:!0,gdprApplies:void 0,cmpStatus:null==e?void 0:e.cmpStatus,eventStatus:null==e?void 0:e.eventStatus})):!1===e.gdprApplies?i({dataAvailable:!0,gdprApplies:!1,cmpStatus:null==e?void 0:e.cmpStatus,eventStatus:null==e?void 0:e.eventStatus}):!0===e.gdprApplies?n.handleGdprApplies(e,i):void n.logger.warn("[CMP-V2]: Unexpected gdprApplies status. Data: ".concat(JSON.stringify(e))):(n.logger.warn("[CMP-V2]: Failed to get TCData"),i({dataAvailable:!1,cmpStatus:null==e?void 0:e.cmpStatus,eventStatus:null==e?void 0:e.eventStatus}))})}},{key:"handleGdprApplies",value:function(e,t){var i,n,r,o,s,a,u,c,l,d,g=e.eventStatus.toLowerCase();return"useractioncomplete"===g||"tcloaded"===g?(i=dr(1,e),n=dr(3,e),r=dr(4,e),o=ar(2,e),s=ar(7,e),a=ar(9,e),u=ar(10,e),l=!h(i),d=!h(n),c=!h(n),d=(l=l&&d&&c)&&i&&n&&r&&o&&s&&a&&u,this.logger.debug("[CMP-V2]: Consents available: ".concat(l,", Consent: ").concat(d," Data: ").concat(JSON.stringify(e))),t({dataAvailable:!0,gdprChoiceReceived:!0,personalisedAdsConsent:d,gdprApplies:!0,cmpStatus:null==e?void 0:e.cmpStatus,eventStatus:null==e?void 0:e.eventStatus})):("cmpuishown"===g||this.callCount%8==0&&this.logger.warn("[CMP-V2]: Unexpected eventStatus. Data: ".concat(JSON.stringify(e))),t({dataAvailable:!0,gdprChoiceReceived:!1,gdprApplies:!0,cmpStatus:null==e?void 0:e.cmpStatus,eventStatus:null==e?void 0:e.eventStatus}))}},{key:"createUspStub",value:function(){function e(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.warn("[CMP-V2] USP is still in stub mode. Calling to ".concat(t[0]," API will be unsuccessful")),"function"==typeof t[2]&&t[2](void 0,!1)}var t,i=this,n=this.logger,r=this.browserWindow;void 0===r.__uspapi&&(r.__uspapi=e,t=setInterval(300))}}]),n}(),hr=function(){eturn g(a,[{key:"enable",value:,{key:"generateStubs",value:,{key:"loadVersion",value:,{key:"versionLoader",value:function(e){var t=this,i=e.found,e=e.versionNumber;p(this.version)?this.logger.warn("[CMP]: Version already loaded: ".concat(e)):i?2===e?(this.reporter.setStateStatus("cmp_load_wait_finish"),this.reporter.reportCmpLoadFinish(),this.logger.debug("[CMP]: Loaded version ".concat(e)),this.version=new gr(this.logger,this.browserWindow,this.consentUIPrompt),this.handleCmpLoaded()):(this.logger.error("[CMP]: Version ".concat(e," is not supported, disabling personalisation")),this.setDetermination("none",!0,!0)):(++this.cmpLoadCounter%10==0&&this.logger.debug("[CMP] Waiting for load"),setTimeout(50))}},{key:"checkForVersion2",value:,{key:"checkForCCPA",value:function(e){var t;null!=(t=this.version)&&t.checkForCCPA(e)}},{key:"cmpLoaded",value:,{key:"getConsentData",value:,{key:"setGDPRConsentPrompt",value:function(){var e;null!=(e=this.version)&&e.setGDPRConsentPrompt()}},{key:"setCCPAConsentPrompt",value:,{key:"setNonPrivacyRegionsPrompt",value:,{key:"handleGdprNotApplies",value:function(){var i,n=this,r=(this.logger.info("[CMP]: GDPR does not apply"),!1);setTimeout(2e3),this.reporter.setStateStatus("cmp_check_for_ccpa_start"),this.checkForCCPA(}},{key:"handleGdprApplies",value:function(){var s=this,a=(this.logger.log("[CMP]: GDPR applies, checking if personalisation is allowed"),this.reporter.setStateStatus("cmp_gdpr_choice_wait_start"),this.setGDPRConsentPrompt(),!1);this.getConsentData(function(e){var r,o,t=e.gdprChoiceReceived,e=e.personalisedAdsConsent;t&&(a=!0,s.reporter.setStateStatus("cmp_gdpr_choice_wait_finish"),s.logger.info("[CMP]: GDPR decision received via short-circuit. Allow personalisation: ".concat(e)),s.setDetermination("gdpr",Boolean(e),!1)),a||(s.dialogShown=!0,s.reporter.setStateStatus("cmp_prompt_shown"),r=0,o=setInterval(100))})}},{key:"handleCmpLoaded",value:function(){function r(e){o.reporter.setStateStatus("cmp_gdpr_applies_check_finish"),!1===e?o.handleGdprNotApplies():o.settings.isRequestGdprPersonalisation()?o.handleGdprApplies():(o.reporter.setStateStatus("cmp_gdpr_choice_wait_finish"),o.logger.info("[CMP]: The GDPR applies, but we will assume they do not allow personalisation (show limited ads)"),o.setDetermination("gdpr",!1,!1))}var o=this;this.logger.info("[CMP]: Checking if the GDPR applies"),this.reporter.setStateStatus("cmp_gdpr_applies_check_start");this.getConsentData(function(e){var t,i,n,e=e.gdprApplies;h(e)?(t=0,o.logger.debug("[CMP]: Setting a check interval of ".concat(250,"ms")),i=!1,n=setInterval(function(){o.getConsentData(function(e){e=e.gdprApplies;h(e)?t++%4==0&&o.logger.info("[CMP]: Waiting for GDPR determination"):(clearInterval(n),i||(i=!0,r(e)))})},250)):(o.logger.debug("[CMP]: GDPR status already available, processing immediately"),r(e))})}},{key:"setDetermination",value:function(e,t,i){var n=this.componentStateStore.state.cmp._tag;"gdpr"===e&&this.reporter.reportCmpGdprDetermined(),"loading"==n?(e={jurisdiction:e,timeout:i,allowPersonalisation:t,dialogShown:this.dialogShown},this.logger.info("[CMP]: Determination: ".concat(JSON.stringify(e))),i=this.reporter.getElapsedTime(),this.componentStateStore.updateState("cmp",pe(this.componentStateStore.state.cmp,i,e))):this.logger.error("[CMP]: CMP in unexpected state: ".concat(n))}}]),a}(),fr=function(){function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"div[data-fuse-privacy-tool]",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"fuse-privacy-tool";d(this,n),this.browserWindow=e,this.domSelector=t,this.elementId=i}return g(n,[{key:"setup",value:function(e,t){var i,n=this.browserWindow.document.querySelector(this.domSelector);n&&(t?((i=document.createElement("a")).href="javascript:void(0)",i.id=this.elementId,i.innerHTML=e,i.addEventListener("click",t),n.appendChild(i)):n.textContent=e)}}]),n}(),pr=function(){function i(e,t){d(this,i),this.logger=e,this.tcData={cmpStatus:"loaded",eventStatus:"tcloaded",tcfPolicyVersion:2,cmpVersion:44,cmpId:10},this._listenerId=1,this.browserWindow=t,this.allowedOrigin=t.document.referrer?new URL(t.document.referrer).origin:""}return g(i,[{key:"load",value:function(){var o=this;this.browserWindow.__tcfapi=function(e,t,i,n){switch(e){case"ping":return o._handlePing(i);case"getTCData":return o._handleGetTCData(i);case"addEventListener":o.logger.log("[CMP]: Add Event Listener command does nothing. Listener ID: ".concat(o._listenerId));var r=Object.assign(Object.assign({},o.tcData),{listenerId:o._listenerId});return o._listenerId++,i(r,!0);case"removeEventListener":return o.logger.log("[CMP]: Remove Event Listener command does nothing. Listener ID: ".concat(n)),i(Object.assign({},o.tcData),!0);default:return o.logger.log("[CMP]: Unsupported command: ".concat(e)),i({},!1)}},this.browserWindow.addEventListener("message",function(e){o.allowedOrigin&&e.origin!==o.allowedOrigin?o.logger.log("[CMP]: Ignoring message from origin ".concat(e.origin)):"set-tc-data"===e.data.type?o.tcData=Object.assign({},e.data.data):o.logger.log("[CMP]: unknown iframe message: ".concat(null==(e=e.data)?void 0:e.type))})}},{key:"_handlePing",value:,{key:"_handleGetTCData",value:]),i}(),br=new()),vr=function(){function e(){d(this,e)}return g(e,[{key:"code",value:function(){return"1---"}}]),e}(),mr=function(){eturn g(u,[{key:"loadAmazonUam",value:function(i,n,e,t,r,o){var s;[i]||(n[i]={init:function(){a("i",arguments)},fetchBids:setDisplayBids:targetingKeys:_Q:[]},(s=e.createElement(t)).async=!0,s.src=r,"function"==typeof o&&(s.readyState?s.onreadystatechange=s.onload=,(r=e.getElementsByTagName(t)[0]).parentNode.insertBefore(s,r))}},{key:"load",value:,{key:"init",value:,{key:"getUamConfig",value:,{key:"makeBids",value:]),u}(),Sr=new(function(){eturn g(e,[{key:"getCcpaPrivacyStringCoder",value:,{key:"getUamAdServer",value:,{key:"getUam",value:function(){var e;return this.uam||(e=n.getSettings(),this.uam=new mr(e.getUamSettings().pubID,Sr.getUamAdServer(),f.getLogger(),f.getBrowserWindowObject(),br.getConsentManager(),k.getReporter(),E,e.getSco())),this.uam}}]),e}());var x,yr,kr=function(){eturn g(o,[{key:"plan",value:function(e,t){var i="".concat(++this.auctionCounter),n=this.viewportInfo.getCurrentBreakpoint().name,r=this.settings.getHbTimeout(n),o=this.isLowDwellPage(),s=this.settings.isUamEnabledAtBP(n),a=this.settings.isPrebidEnabledAtBP(n),u=(s||a||this.logger.debug("[PLANNER][".concat(i,"]: Headerbidding is not configured at breakpoint ").concat(n)),this.getMaxOffset(t)),t=this.settings.getAuctionMaxSlots(),e=this.sortSlotsByViewport(i,e).filter(.slice(0,t),t=e.filter(function(e){return e.allowHeaderBidding}),c=0<t.length;return{auctionId:i,usePrebid:!o&&this.isUsePrebid(a,i,c),useUam:!o&&this.isUseUam(s,i,c),hbTimeout:r,hbSlots:t,breakpointName:n,slots:e}}},{key:"sortSlotsByViewport",value:function(e,t){var t=t.sort(function(e,t){e=e.zoneDiv.getBoundingClientRect(),t=t.zoneDiv.getBoundingClientRect();return e.top-t.top}),i=t.map(function(e){return e.slotDivId});return this.logger.debug("[PLANNER][".concat(e,"]: Slot priority order: ").concat(JSON.stringify(i))),t}},{key:"getMaxOffset",value:,{key:"isUseUam",value:function(e,t,i){var n="ready"===this.componentStateStore.state.uam._tag;return e&&!n?this.logger.info("[AUCTION][".concat(t,"]: UAM has not finished loading and will be excluded from the auction")):e&&!i&&this.logger.debug("[AUCTION][".concat(t,"]: UAM has been excluded from the auction because no headerbidding slots are enabled")),e&&n&&i}},{key:"isUsePrebid",value:]),o}(),Ir=((e=x=x||{}).GPT_REQUEST="GPT_REQUEST",e.GPT_RESPONSE="GPT_RESPONSE",e.GPT_RENDERED="GPT_RENDERED",e.GPT_LOADED="GPT_LOADED",e.CANCELLED="CANCELLED",e.SUPERSEDED="SUPERSEDED",(e=yr=yr||{})[e.PREBID_REQUEST=0]="PREBID_REQUEST",e[e.PREBID_RESPONSE=1]="PREBID_RESPONSE",e[e.PREBID_SKIPPED=2]="PREBID_SKIPPED",e[e.UAM_REQUEST=3]="UAM_REQUEST",e[e.UAM_RESPONSE=4]="UAM_RESPONSE",e[e.UAM_SKIPPED=5]="UAM_SKIPPED",e[e.GPT_REQUEST=6]="GPT_REQUEST",e[e.CANCELLED=7]="CANCELLED",function(){eturn g(i,[{key:"createNewAuction",value:,{key:"getAuctionStatus",value:,{key:"getActiveGptCalls",value:,{key:"getSlotStatus",value:,{key:"getSlotStatusInferredAuction",value:,{key:"onPrebidRequest",value:function(e){e=this.auctions[e];e.prebidRequestTime=this.reporter.getElapsedTime(),e.auctionPhaseCallback(yr.PREBID_REQUEST)}},{key:"onPrebidResponse",value:function(e){e=this.auctions[e];e.prebidResponseTime=this.reporter.getElapsedTime(),e.prebidResponded=!0,e.auctionPhaseCallback(yr.PREBID_RESPONSE)}},{key:"onPrebidSkipped",value:function(e){e=this.auctions[e];e.prebidSkipped=!0,e.auctionPhaseCallback(yr.PREBID_SKIPPED)}},{key:"onUamRequest",value:function(e){e=this.auctions[e];e.uamRequestTime=this.reporter.getElapsedTime(),e.auctionPhaseCallback(yr.UAM_REQUEST)}},{key:"onUamSkipped",value:function(e){e=this.auctions[e];e.uamSkipped=!0,e.auctionPhaseCallback(yr.UAM_SKIPPED)}},{key:"onUamResponse",value:function(e){e=this.auctions[e];e.uamResponseTime=this.reporter.getElapsedTime(),e.uamResponded=!0,e.auctionPhaseCallback(yr.UAM_RESPONSE)}},{key:"cancelAuction",value:function(e){e=this.auctions[e];e.cancelled=this.reporter.getElapsedTime(),e.auctionPhaseCallback(yr.CANCELLED)}},{key:"removeFromGptActive",value:,{key:"onGptRequest",value:function(i,e){var n=this;e.forEach(function(e){var t=n.getSlotStatus(i,e);t&&(t.gptRequestTime=n.reporter.getElapsedTime(),t.slotPhaseCallback(x.GPT_REQUEST),(t=n.activeGptCalls[e])&&(n.logger.warn("[AUCTION][".concat(i,"]: ").concat(e," is part of an uncompleted auction: ").concat(t," and is marked superseded")),n.auctions[t].slotStatus[e].supersededTime=n.reporter.getElapsedTime(),n.auctions[t].slotStatus[e].slotPhaseCallback(x.SUPERSEDED)),n.activeGptCalls[e]=i)}),this.auctions[i].gptRequestSent=!0,this.auctions[i].auctionPhaseCallback(yr.GPT_REQUEST)}},{key:"onGptResponse",value:function(e){e=this.getSlotStatusInferredAuction(e,x.GPT_RESPONSE);e&&(e.gptResponseTime=this.reporter.getElapsedTime(),e.slotPhaseCallback(x.GPT_RESPONSE))}},{key:"onGptSlotRendered",value:,{key:"onGptSlotLoaded",value:,{key:"cancelSlotAuction",value:function(e,t,i){this.logger.info("[AUCTION][".concat(e,"]: Cancelled auction for ").concat(t," because ").concat(i));i=this.getSlotStatus(e,t);i&&(i.cancelledTime=this.reporter.getElapsedTime(),this.removeFromGptActive(t),i.slotPhaseCallback(x.CANCELLED))}},{key:"getAuctions",value:function(){return this.auctions}}]),i}()),wr=Er=function Cr(e,t,i){function n(e){if(e.includes("px"))return e=Number(e.split("px")[0]),Number.isNaN(e)?void 0:e}var r=n(e.getComputedStyle(t).maxWidth),o=n(e.getComputedStyle(t).maxHeight);return i.filter(function(e){return!wr(e)||!p(r)||e[0]<=r}).filter(}var Tr=function(){eturn g(l,[{key:"sendGptRequest",value:,{key:"handleHBResponse",value:function(e,t,i){var n,r,o=this.auctionState.getAuctionStatus(e);o.gptRequestSent?t&&this.logger.debug("[AUCTION][".concat(e,"]: Received ").concat(t," bid after adserver request already sent")):(n=o.prebidIncluded,r=o.uamIncluded,i?(this.logger.info("[AUCTION][".concat(e,"]: Timeout reached with missing responses, sending to GPT.\n          Status: ").concat(JSON.stringify(o))),this.sendGptRequest(o.creativeDivIds,e)):r&&n?(o.uamResponded||o.uamCancelled)&&(o.prebidResponded||o.prebidCancelled)?(this.logger.info("[AUCTION][".concat(e,"]: All necessary responses received, sending to GPT")),this.sendGptRequest(o.creativeDivIds,e)):this.logger.debug("[AUCTION][".concat(e,"]: Still waiting for responses. Status: ").concat(JSON.stringify(o))):(this.logger.debug("[AUCTION][".concat(e,"]: ").concat(t," complete, calling GPT")),this.sendGptRequest(o.creativeDivIds,e)))}},{key:"setAuctionTimeout",value:,{key:"startPrebidAuction",value:function(o,s,e){var a,u=this,t=JSON.stringify(s);this.reporter.addAdEvent("prebid_request_".concat(t),{auctionId:o}),this.logger.info("[AUCTION][".concat(o,"]: Requesting prebid for: ").concat(t)),0<s.length?(this.firstPrebidRequest||(this.firstPrebidRequest=!0,this.reporter.setStateStatus("first_prebid_request")),(a=this.prebidGlobal).requestBids({auctionId:o,adUnitCodes:s,timeout:e,bidsBackHandler:function(t,e){u.auctionState.onPrebidResponse(o);var r,i=Object.keys(t);if(u.logger.info("[AUCTION][".concat(o,"]: Prebid auction complete. Any-bidder-timeout?=").concat(e,". Responding slots: ").concat(JSON.stringify(i))),0<i.length){if(u.logger.debug("[AUCTION][".concat(o,"]: Prebid response details: ").concat(JSON.stringify(t))),u.telemetry)for(var n in t)!function(i){var n,e=u.fuseSlotRegistry.getSlot(i);null!=(r=null==e?void 0:e.sizesHb)&&r.length&&(n=ye(e.sizesHb),t[i].bids.forEach(function(e){var t;(e.width>n[0]||e.height>n[1])&&(u.logger.debug("[AUCTION][".concat(o,"][").concat(i,"]: Received a rogue bid ").concat(e.width,"x").concat(e.height,"  with mismatch maxArea ").concat(n," from ").concat(e.bidder,": ").concat(JSON.stringify(e))),null!=(t=u.telemetry))&&t.recordRogueBidderResponse(i,e,n)}))}(n)}else u.logger.warn("[AUCTION][".concat(o,"]: No bid responses received from prebid"));u.reporter.addAdEvent("prebid_response_".concat(JSON.stringify(i)),{auctionId:o}),u.firstPrebidResponse||(u.firstPrebidResponse=!0,u.reporter.setStateStatus("first_prebid_response"));try{a.setTargetingForGPTAsync(s),u.handleHBResponse(o,"prebid",!1)}catch(e){u.logger.error("[AUCTION][".concat(o,"]: ").concat(e.message," ").concat(e.stack))}}})):(this.logger.warn("[AUCTION][".concat(o,"]: Skipped prebid call because no eligible slots available")),this.auctionState.onPrebidSkipped(o))}},{key:"startUamAuction",value:function(t,e){var i,n=this;e.length?(i=JSON.stringify(e.map(function(e){return e.slotID})),this.reporter.addAdEvent("uam_request_".concat(i),{auctionId:t}),this.logger.info("[AUCTION][".concat(t,"]: Sending UAM request for ").concat(i)),this.logger.debug("[AUCTION][".concat(t,"]: Sending UAM request with slot details: ").concat(JSON.stringify(e))),this.firstUamRequest||(this.firstUamRequest=!0,this.reporter.setStateStatus("first_uam_request")),this.uam.makeBids(e,):(this.logger.warn("[AUCTION][".concat(t,"]: Skipped UAM bid because no UAM slots found")),this.auctionState.onUamSkipped(t))}},{key:"startGptOnlyAuction",value:,{key:"prepareUamRequest",value:,{key:"executeAuction",value:function(e,t,i){var n,r=this,o=(this.events.onAuctionEvent.emit(Object.assign({auctionEventType:"started"},e)),e.auctionId),s=e.slots.map(function(e){return e.slotDivId});this.auctionState.createNewAuction(e,t,i),this.logger.log("[AUCTION][".concat(o,"]: Running with plan: ").concat((t={auctionId:(t=e).auctionId,usePrebid:t.usePrebid,useUam:t.useUam,hbSlots:t.hbSlots.map(function(e){return e.slotDivId}),gptSlots:t.slots.map(function(e){return e.slotDivId}),gpids:t.slots.map(function(e){return e.gpid}),hbTimeout:t.hbTimeout,breakpointName:t.breakpointName},JSON.stringify(t)))),this.settings.isYandexEnabled()?(n=this.settings.getYandexBlockId())?(this.logger.log("[AUCTION][".concat(o,"]: Run Yandex with blockId ").concat(n)),window.yaContextCb.push():this.logger.error("[AUCTION][".concat(o,"]: Cannot run Yandex cause yandexBlockId is not set")):(e.usePrebid&&(i=e.hbSlots.map(,this.startPrebidAuction(o,i,e.hbTimeout)),e.useUam&&(t=this.prepareUamRequest(o,e.hbSlots),this.startUamAuction(o,t)),i=e.usePrebid&&!this.auctionState.getAuctionStatus(o).prebidCancelled,t=e.useUam&&!this.auctionState.getAuctionStatus(o).uamCancelled,i||t?(this.reporter.reportHbAuctionStart(),this.setAuctionTimeout(e.hbTimeout,o)):this.startGptOnlyAuction(o,s))}},{key:"reportOnLoadEvent",value:function(e){e=e.slot.getSlotElementId();this.auctionState.onGptSlotLoaded(e)}},{key:"reportSlotResponseReceived",value:function(e){e=e.slot.getSlotElementId();this.auctionState.onGptResponse(e)}},{key:"reportOnRenderEndedEvent",value:function(e){var t,i=!e.isEmpty,n=e.slot.getSlotElementId(),r=(this.logger.debug("[AUCTION]: ".concat(n," render event details: ").concat(JSON.stringify(e))),this.fuseSlotRegistry.getSlot(n));r?(i?this.logger.info("[AUCTION]: Adserver responded with creative for ".concat(n)):(t={fuseSlotId:r.zoneTemplate.id,fuseSlotCode:n,errorType:"MISSING_CREATIVE"},this.reporter.addSlotProblem(t),this.logger.warn("[AUCTION]: Adserver responded without creative for ".concat(n))),this.telemetry&&r.sizes&&(t=ye(r.sizes.filter(),2===(null==(r=Array.isArray(e.size)?e.size:null)?void 0:r.length))&&(r[1]>t[0]||r[1]>t[1])&&(50<ke(r[0],t[0])||50<ke(r[1],t[1]))&&(this.logger.debug("[AUCTION][".concat(n,"]: Received a rogue bid ").concat(r,"  with mismatch maxArea ").concat(t," from adx: ").concat(JSON.stringify(e))),null!=(r=this.telemetry))&&r.recordRogueAdxResponse(n,e,t),this.auctionState.onGptSlotRendered(n,i)):this.fuseSlotRegistry.isDeletedSlot(n)?(this.logger.info("[AUCTION]: Slot Render Ended Event fired for deleted unit ".concat(n)),this.auctionState.onGptSlotRendered(n,i)):this.logger.debug("[AUCTION]: SlotRenderEnded Event fired for non fuse units: ".concat(n,". HasCreative: ").concat(i))}},{key:"getStateView",value:]),l}(),_r=function(){function c(e,t,i,n,r,o,s,a,u){d(this,c),this.logger=e,this.browserWindow=t,this.executeAuction=i,this.planAuction=n,this.isDeletedSlot=r,this.getCurrentBreakpointName=o,this.viewportInfo=s,this.settings=a,this.setTargeting=u,this.refreshTimers={},this.refreshCounts={},this.scheduledRefresh={},this.disabledSlots=[],this.queuedSlots=[],this.triggeredAuctions={},this.auctionBlockSlots=[],this.auctionBlockTimeoutHandle=null,this.auctionBlockTriggered=null,this.anyAuctionExecuted=!1}return g(c,[{key:"queueSlots",value:function(e){var t,i=this,n=this.getCurrentBreakpointName(),e=e.filter(function(e){return i.settings.isSlotEnabledForBreakpoint(e.zoneTemplate.id,n)?e.currentlyActive?i.isScheduled(e)?(i.logger.debug("[SCHEDULER]: Skipped ".concat(e.slotDivId," because it is already scheduled")),!1):!i.isRefreshDisabled(e.slotDivId)||(i.logger.debug("[SCHEDULER]: Skipped ".concat(e.slotDivId," because it is disabled")),!1):(i.logger.info("[SCHEDULER]: Skipped ".concat(e.slotDivId," because it is hasn't activated")),!1):(i.logger.debug("[SCHEDULER]: Skipped ".concat(e.slotDivId," because no sizes mapped at the current breakpoint (").concat(n,")")),!1)});0<e.length&&(t=e.map(function(e){return e.slotDivId}),this.logger.info("[SCHEDULER]: Added ".concat(t," to auction queue")),e.forEach(function(e){return i.queuedSlots.push(e)}))}},{key:"isScheduled",value:function(t){return 0<this.queuedSlots.filter(function(e){return e.slotDivId===t.slotDivId}).length}},{key:"isTemplateScheduled",value:function(t){return 0<this.queuedSlots.filter(function(e){return(e.zoneTemplate.originalZoneTemplateId||e.zoneTemplate.id)===t}).length}},{key:"isRefreshDisabled",value:function(t){return 0<this.disabledSlots.filter(.length}},{key:"purgeDeletedFromQueue",value:,{key:"runAuction",value:function(){if(this.purgeDeletedFromQueue(),0===this.queuedSlots.length)return this.logger.log("[SCHEDULER]: Auction will not run because no slots are queued"),[];var e=this.getMissingAuctionBlockSlots();if(0<e.length){if(this.auctionBlockTimeoutHandle)return t=this.queuedSlots.map(function(e){return e.slotDivId}),this.logger.info("[SCHEDULER] Deferred the auction for ".concat(JSON.stringify(t)," because slots missing from the auction block: ").concat(JSON.stringify(e))),this.auctionBlockTriggered=!0,[]}else this.auctionBlockTimeoutHandle&&(this.logger.info("[SCHEDULER]: Auction block cleared, as requirements satisfied "),this.clearAuctionBlock());var t,i,n=this.planAuction(this.queuedSlots,this.getAuctionMaxViewports());return this.isAnyAuctionExecuted()||(t=this.viewportInfo.getViewportStatus(),i=t.offset.y+t.innerHeight,e=this.queuedSlots.filter(function(e){return e.zoneDiv.getBoundingClientRect().top<i}),this.setTargeting("zone_count_above_vp",e.length.toString())),this.queuedSlots=this.queuedSlots.filter(,this.logger.log("[SCHEDULER]: Starting auction with ".concat(n.slots.length," slots, ").concat(this.queuedSlots.length," slots remaining")),this.startAuction(n),n.slots.map(function(e){return e.slotDivId})}},{key:"forceRunAuction",value:,{key:"disableSlotRefresh",value:,{key:"enableSlotRefresh",value:,{key:"getAuctionMaxViewports",value:,{key:"handleOnSlotOutcome",value:function(e,t,i){i!==x.GPT_LOADED||this.triggeredAuctions[e]||(this.triggeredAuctions[e]=!0,0<this.queuedSlots.length&&(this.logger.debug("[SCHEDULER][".concat(e,"]: The first slot has received a render event, initiating the next auction")),this.runAuction())),i!==x.GPT_LOADED&&i!==x.GPT_RENDERED||this.scheduleRefreshTimer(t)}},{key:"startAuction",value:,{key:"scheduleRefreshTimer",value:,{key:"getRefreshIntervals",value:,{key:"getRefreshingCodes",value:function(){return Object.keys(this.refreshTimers)}},{key:"clearRefreshIntervals",value:,{key:"reset",value:,{key:"clearPendingAuctions",value:,{key:"setRefreshTimer",value:function(e){var t=e.zoneTemplate.attributes.refresh,i=e.slotDivId;X(t)&&0<t?(this.logger.log("[SCHEDULER]: Setting custom refresh time of ".concat(t," seconds for ").concat(i)),this.addRefreshInterval(e,t)):0===t?this.logger.log("[SCHEDULER]: No refresh timer set for ".concat(i)):(t=this.settings.getDefaultRefreshInterval())&&0<t?(this.logger.log("[SCHEDULER]: Setting default refresh time of ".concat(t," seconds for ").concat(i)),this.addRefreshInterval(e,t)):this.logger.debug("[SCHEDULER]: No default refresh timer exists in account settings.")}},{key:"isSkipRefreshInEdgeBrowser",value:function(e){this.refreshCounts[e.slotDivId]=this.refreshCounts[e.slotDivId]||0;var t=this.refreshCounts[e.slotDivId]>this.settings.getEdgeHtmlMaxAdsRefreshLimit();return(t||!this.browserWindow.document.hasFocus())&&(this.logger.log((t?'will skip refreshing ad(code: "'.concat(e.slotDivId,'") as it reached Edge browser ads refresh limit of ').concat(this.settings.getEdgeHtmlMaxAdsRefreshLimit()," at the moment - "):"will skip refreshing ad as browser page/tab is NOT active at the moment - ").concat((new Date).toISOString(),".")),!0)}},{key:"isSkipRefreshByCallback",value:,{key:"refreshCallback",value:function(e){ie.isEdgeBrowser(this.browserWindow)&&this.isSkipRefreshInEdgeBrowser(e)||(this.isSkipRefreshByCallback(e)?this.logger.log("[".concat(e.slotDivId,"] Refresh blocked by callback")):this.browserWindow.document.getElementById(e.slotDivId)?e.zoneDiv&&e.isInView()?(ie.isEdgeBrowser(this.browserWindow)&&(this.refreshCounts[e.slotDivId]+=1),this.queueSlots([e]),this.runAuction()):this.logger.debug("[SCHEDULER]: Not refreshing ".concat(e.slotDivId," because it is not in view")):this.logger.warn("[AUCTION]: Could not refresh ".concat(e.slotDivId," because a div with that id was not found in the DOM")))}},{key:"addRefreshInterval",value:,{key:"setAuctionBlock",value:function(e,t){var i=this;this.auctionBlockSlots=e.filter(function(e){var t=i.settings.getZoneTemplate(e);return t?t.excludeFromAuctionBlock?(i.logger.warn("[SLOTS][".concat(e,"]: Excluded from next-auction slot requirement, because the slot has an activation condition")),!1):(t=i.getCurrentBreakpointName(),!!i.settings.isSlotEnabledForBreakpoint(e,t)||(i.logger.info("[SLOTS][".concat(e,"]: Excluded from next-auction slot requirement, because it is not enabled at the ").concat(t," breakpoint")),!1)):(i.logger.warn("[SLOTS][".concat(e,"]: Excluded from next-auction slot requirement, because the slot does not exist in this tag")),!1)}),0<this.auctionBlockSlots.length?(this.logger.info("[SCHEDULER]: Enabled auction block. Will not proceed until Zones with FuseIds ".concat(JSON.stringify(this.auctionBlockSlots)," are registered, or ").concat(t,"ms have elapsed")),this.auctionBlockTimeoutHandle=setTimeout(function(){i.auctionBlockTriggered?(i.logger.warn("[SCHEDULER]: Auction block timeout reached, missing: ".concat(JSON.stringify(i.getMissingAuctionBlockSlots()),". Running deferred auction")),i.clearAuctionBlock(),i.runAuction()):(0<i.getMissingAuctionBlockSlots().length&&i.logger.warn("[SCHEDULER]: Auction block timeout reached, missing: ".concat(i.getMissingAuctionBlockSlots())),i.clearAuctionBlock())},t)):this.logger.info("[SCHEDULER]: Did not enable AuctionBlock, because no (valid) slots specified")}},{key:"getMissingAuctionBlockSlots",value:,{key:"isAnyAuctionExecuted",value:function(){return this.anyAuctionExecuted}},{key:"clearAuctionBlock",value:]),c}(),xr="data-fuse",Ar="".concat("div","[").concat(xr,"]"),Pr="data-fuse-reset-at",Rr=function(){eturn g(a,[{key:"prepareZoneDiv",value:function(e,t,i,n,r){return this.logger.debug("[SLOTS][".concat(e,": Preparing the element")),n.setAttribute("data-fuse-code","".concat(e)),n.setAttribute("data-fuse-zone-instance","".concat(t)),n.setAttribute("data-fuse-slot","".concat(e)),this.templateSettings.isGptPreAuctionEnabled()&&n.setAttribute("data-gpid",i),n.setAttribute("data-fuse-processed-at",this.getElapsedTime().toString()),n.removeAttribute(Pr),this.document.getElementById(e)?this.logger.warn("[DOM-SCAN]: Found existing slot element with id ".concat(e)):((t=this.document.createElement("div")).setAttribute("id","".concat(e)),t.classList.add("fuse-slot"),t.style.maxWidth="inherit",t.style.maxHeight="inherit",this.fuseSlotFormatter.format(n,r),this.templateSettings.isYandexEnabled()&&this.fuseSlotFormatter.updateSlotForYandex(t,r),n.appendChild(t)),n}},{key:"assignSlotDivId",value:function(e){return"fuse-slot-".concat(e,"-").concat(a.assignCounter(e,this.slotCounter))}},{key:"assignZoneInstanceId",value:,{key:"assignGpid",value:,{key:"processRawElement",value:function(e,t){var i=e.getAttribute(xr);if(!i)return this.logger.warn("[SLOTS]: Empty data-fuse attribute ".concat(i)),null;var n=this.templateSettings.generateZoneTemplate(i,this.getApi());if(!n)return this.logger.warn("[SLOTS]: Unknown ZoneCode found in data-fuse attribute ".concat(i)),null;var i=n.id,r=e.getAttribute("data-fuse-code"),o=e.getAttribute(Pr),s=null==(s=e.id)||!s.trim()||null==(s=e.id)?void 0:s.trim();if(t){if(r&&!o)return this.logger.debug("[SLOTS]: Skip ".concat(r," because it was already processed")),null;r&&o&&this.logger.debug("[SLOTS]: Processing ".concat(r," again because it has been reset"))}else r&&this.logger.warn("[SLOTS]: Processing ".concat(r," again. This is likely to be an error, but preserved for backwards compatibility"));t=this.assignSlotDivId(i),o=this.assignZoneInstanceId(i),r=this.assignGpid(i,n.slot,"single");return this.prepareZoneDiv(t,o,r,e,n),{zoneTemplate:n,slotDivId:t,zoneDiv:e,zoneDivId:s,zoneInstanceId:o,gpid:r,targeting:a.extractTargeting(e)}}},{key:"findElementWithDomId",value:function(e){var t=this.document.querySelectorAll("".concat("div",'[id="').concat(e,'"][').concat(xr,"]"));return 0==t.length?this.logger.warn("[SLOTS]: No DOM element found with both id='".concat(e,"' AND a data-fuse attribute")):1<t.length&&this.logger.warn("[SLOTS]: Multiple DOM elements found with id '".concat(e,"'")),t}},{key:"findAllFuseElements",value:,{key:"findElementsWithTemplateId",value:function(e){return this.document.querySelectorAll("".concat("div","[").concat(xr,'="').concat(e,'"]'))}},{key:"processRawElements",value:function(e,t){var i=this,n=[];return e.forEach(,n}},{key:"processSlots",value:,{key:"processZoneWithDivId",value:function(e,t){e=this.findElementWithDomId(e),e=this.processRawElements(e,t);return e[e.length-1]}},{key:"processLastSlotWithFuseId",value:function(e,t){e=this.findElementsWithTemplateId(e),e=this.processRawElements(e,t);return e[e.length-1]}},{key:"processSlotsWithFuseId",value:],[{key:"assignCounter",value:,{key:"getTargetingValue",value:function(e){return 0<e.indexOf(",")?e.split(",").map(function(e){return e.trim()}).filter(function(e){return""!==e}):e}},{key:"extractTargeting",value:]),a}(),Or=function(){function n(e,t,i){d(this,n),this.logger=e,this.templateSettings=t,this.viewportInfo=i}return g(n,[{key:"logContext",value:,{key:"hasOverflow",value:,{key:"hasHeight",value:,{key:"format",value:,{key:"updateSlotElementToMiniScroller",value:function(e,t){var i=this.viewportInfo.getCurrentBreakpoint().name,t=(e.classList.add("fuse-slot-mini-scroller"),this.templateSettings.maxSlotHeightForBreakpoint(t,i));e.style.minHeight="".concat(t,"px")}},{key:"updateSlotForYandex",value:function(e,t){var i=this.viewportInfo.getCurrentBreakpoint().name,t=null==(t=t.sizeMapping)?void 0:t[i],n=0,r=0;t&&0<t.length&&(t.forEach(function(e){"fluid"!==e&&"fluid"!==e[0]&&(Number(e[0])>r&&(r=Number(e[0])),Number(e[1])>n)&&(n=Number(e[1]))}),e.style.width="".concat(r,"px"),e.style.height="".concat(n,"px"),e.style.margin="auto")}}]),n}(),Dr=function(e,t,i,n,r){var o=e.top,s=e.bottom,a=e.left,u=e.right,c=e.width,e=e.height*r,c=c*r;return 0<=o+e+n&&0<=a+c&&s-e-n<=i&&u-c<=t};function zr(e,t,i,n){t=t.getBoundingClientRect(),t=Dr(t,e.width,e.innerHeight,n,i/100);return!e.hidden&&t}function Lr(){Fr.debug("[QUEUE]: Cleared fuse queue with ".concat(Wr()," remaining items")),Ur().splice(0,Ur().length)}var Br=function(){eturn g(u,[{key:"getZoneDivs",value:function(){var t=this,i={};return Object.keys(this.REGISTERED_SLOTS).forEach(function(e){e=t.REGISTERED_SLOTS[e];i[e.slotDivId]=e.zoneDiv}),i}},{key:"getZoneTemplates",value:function(){var t=this,i={};return Object.keys(this.REGISTERED_SLOTS).forEach(function(e){e=t.REGISTERED_SLOTS[e];i[e.slotDivId]=e.zoneTemplate}),i}},{key:"getSlotsForTemplateId",value:,{key:"getActiveSlots",value:,{key:"getSlotInitObservable",value:function(){return this.slotInitialised}},{key:"getSlotsInitObservable",value:function(){return this.slotsInitialised}},{key:"isInDom",value:,{key:"isDeletedSlot",value:function(e){return-1!==this.DELETED_FUSE_DIVS.indexOf(e)}},{key:"filterUndeleted",value:,{key:"reset",value:function(){var t=this,i=(Object.keys(this.REGISTERED_SLOTS).forEach(,this.getZoneDivs());Object.keys(i).forEach(,Object.keys(this.SLOT_ACTIVATOR).forEach(,this.REGISTERED_SLOTS={},this.SLOT_ACTIVATOR={},this.clearFuseSkins()}},{key:"registeredSlotConfig",value:function(u,e,c,t,i){var l=this;return{slotDivId:u,zoneDiv:t,zoneDivId:i,zoneInstanceId:e,zoneTemplate:c,zoneTemplateId:c.id,isInView:function(){var e,t,i,n,r,o,s=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,a=c.attributes.interscroller?l.browserWindow.document.querySelector(".publift-widget-".concat(c.id,"-container")):l.browserWindow.document.getElementById(u);return a?(e=(o=(c.attributes.interscroller?a:a.parentElement).getBoundingClientRect()).top,t=o.bottom,i=o.left,n=o.right,r=o.width,o=o.height,e||t||i||n||r||o?zr(l.viewportInfo.getViewportStatus(),a,50,s):(l.logger.log("[SLOTS][".concat(u,"]: Skipped slot checkInView because zone/interscroller element is not visible")),!1)):(l.logger.warn("[SLOTS][".concat(u,"]: Slot element is not found")),!1)},isAllowRefresh:function(){return!0}}}},{key:"registerActiveSlot",value:,{key:"registerInactiveSlot",value:,{key:"activateInactiveSlot",value:function(e,t,i){var n=e.slotDivId;this.REGISTERED_SLOTS[n]&&!0===this.REGISTERED_SLOTS[n].currentlyActive?this.logger.warn("[SLOTS][".concat(n,"]: Skipped activation because the slot was already activated")):this.isInDom(n)?(this.SLOT_ACTIVATOR[n].destroy(),e.currentlyActive=!0,this.enablePartners(e,t),this.events.onZoneEvent.emit({zoneTemplateId:e.zoneTemplate.id,zoneDivId:e.zoneDivId,zoneEventType:"activated",instanceId:e.zoneInstanceId,gpid:e.gpid}),i([e])):(this.logger.warn("[SLOTS][".concat(n,"]: Skipped activation because the slot was removed from the DOM")),this.deleteSlot(n))}},{key:"enablePartners",value:function(e,t){this.enableGptAsync(e,t),e.allowHeaderBidding?this.enablePrebidAsync(e):this.logger.debug("[SLOTS][".concat(e.slotDivId,"]: Skip prebid registration because headerbidding not enabled"))}},{key:"enablePrebidAsync",value:function(i){var n=this;cn.pushToPrebidQue(function(){var e,t;n.isDeletedSlot(i.slotDivId)?n.logger.log("[SLOTS][".concat(i.slotDivId,"]: Skip prebid registration because div deleted")):(t=un(e=i),C.debug("[PREBID][".concat(e.slotDivId,"]: Registered with mediaTypes: ").concat(JSON.stringify(t.mediaTypes))),T.addAdUnits(t))})}},{key:"enableGptAsync",value:function(r,o){var s=this;E(function(){var e,t,i,n;s.isDeletedSlot(r.slotDivId)?s.logger.log("[SLOTS][".concat(r.slotDivId,"]: Skip GPT registration because div deleted")):(t=o,i=(e=r).zoneTemplate.slot,(n=y.defineSlot(i,e.sizes,e.slotDivId))?(w.addAdEvent("register_gpt_slot_".concat(e.slotDivId),{gpid:e.gpid}),n.addService(y.pubads()),t.forEach():I.warn("[GPT]: googletag.defineSlot(".concat(i,", ").concat(JSON.stringify(e.sizes),", ").concat(e.slotDivId,") returned null")),(t=n)&&(s.gptSlotRegistry.add(r.zoneTemplate.id,t),i=r.slotDivId,I.debug("[GPT]: googletag.display(".concat(i,")")),y.display(i)))})}},{key:"deleteSlot",value:function(e){this.logger.debug("[SLOTS][".concat(e,"]: Deleting slot"));var t=this.getSlot(e);t?this.gptSlotRegistry.purgeByElement(t.zoneTemplate.id,t.slotDivId):this.logger.debug("[SLOTS][".concat(e,"]: Registered slot not found upon deletion")),this.DELETED_FUSE_DIVS.push(e),delete this.REGISTERED_SLOTS[e],null!=(t=this.SLOT_ACTIVATOR[e])&&t.destroy(),delete this.SLOT_ACTIVATOR[e]}},{key:"getSlot",value:function(e){return this.REGISTERED_SLOTS[e]}},{key:"getSlotByZoneDivId",value:,{key:"getSlots",value:function(e){var t=this,i=[];return e.forEach(,i}},{key:"buildActivator",value:,{key:"registerFuseSlot",value:function(e,t,i,n,r,o,s,a,u,c){var l,d=this,g=this.viewportInfo.getCurrentBreakpoint().name,h=Cr(this.browserWindow,t,null!=(h=r.sizeMapping[g])?h:[]),f=0<h.length?h:void 0,h=0<(h=Er(h=h)).length?h:void 0,i=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},this.registeredSlotConfig(e,i,r,t,n)),{currentlyActive:!1,storedAt:this.reporter.getElapsedTime(),breakpoint:g,sizes:f,sizesHb:h,allowHeaderBidding:p(h)&&0<h.length&&this.settings.isHeaderBiddingSlot(r)}),r.mediaTypes&&{mediaTypes:r.mediaTypes}),r.videoAttributes&&{prebidVideoConfig:r.videoAttributes}),{gpid:o}),r.targeting&&{targeting:r.targeting}),this.allowSlotRefreshCallback?{isAllowRefresh:function(){return d.allowSlotRefreshCallback(e)}}:{});return this.REGISTERED_SLOTS[e]=i,Q(f)?this.logger.info("[SLOTS][".concat(e,"]: Registered as inactive because no sizes available")):(t=i,f=(n=this.logger,g=e,h=s,o=r.targeting,n.log("[SLOTS][".concat(g,"]: merge slot targeting ").concat(JSON.stringify(h),", ").concat(JSON.stringify(o))),l=h,null!=o&&o.forEach(,n.log("[SLOTS][".concat(g,"]: set slot targeting ").concat(JSON.stringify(l))),l),a?(this.logger.info("[SLOTS][".concat(e,"]: Registering as active because it is forced")),this.registerActiveSlot(t,f)):r.activateCondition?(s=this.buildActivator(t,r.activateCondition,u,f,c)).checkCondition()?(this.logger.info("[SLOTS][".concat(e,"]: Registering as active because conditions already satisfied")),this.registerActiveSlot(t,f)):(this.logger.info("[SLOTS][".concat(e,"]: Registering as inactive and enabling triggers")),this.registerInactiveSlot(t,s),s.enableTriggers()):(this.logger.log("[SLOTS][".concat(e,"]: Registering as active because no conditions defined")),this.registerActiveSlot(t,f)),this.slotInitialised.emit({})),i}},{key:"register",value:,{key:"clearFuseSkins",value:,{key:"setAllowSlotRefreshCallback",value:]),u}(),Mr=function(){eturn g(a,[{key:"registerAndQueue",value:function(e,t,i){e=this.domProcessor.processSlots(e),e=this.registerSlots(e,i,t),i=e.filter(function(e){return e.currentlyActive});return this.auctionScheduler.queueSlots(i),e}},{key:"registerAndRunAuction",value:function(e,t,i){e=this.registerAndQueue(e,t,i);return this.runAuction(),e}},{key:"registerZoneAndQueue",value:function(e,t,i,n){e=this.domProcessor.processZoneWithDivId(e,t);return e?(null!=(t=this.registerSlots([e],n,i)[0])&&t.currentlyActive&&this.auctionScheduler.queueSlots([t]),t):null}},{key:"activateZone",value:function(e){this.zoneRegistry.activateZone(e)}},{key:"registerAndQueueLastSlotWithFuseId",value:function(e,t,i,n){e=this.domProcessor.processLastSlotWithFuseId(e,t);if(e)return(t=this.registerSlots([e],n,i)[0])&&t.currentlyActive&&this.auctionScheduler.queueSlots([t]),t}},{key:"registerSlots",value:,{key:"registerAndQueueWithFuseId",value:function(e,t,i,n){e=this.domProcessor.processSlotsWithFuseId(e,t),t=this.registerSlots(e,n,i),e=t.filter(function(e){return e.currentlyActive});return this.auctionScheduler.queueSlots(e),t}},{key:"runAuction",value:,{key:"forceRunAuction",value:,{key:"runAuctionAllActiveSlots",value:function(){this.auctionScheduler.queueSlots(this.fuseSlotRegistry.getActiveSlots()),this.runAuction()}},{key:"reset",value:,{key:"destroyZone",value:,{key:"clearRefreshIntervals",value:function(){this.auctionScheduler.clearRefreshIntervals()}},{key:"getRefreshIntervals",value:function(){return this.auctionScheduler.getRefreshIntervals()}},{key:"handleBreakpointChange",value:,{key:"loadSlots",value:function(e,t,i){e?(i(),this.registerAndQueue(!1,!1,t),this.runAuction()):(this.logger.warn("[CONTROLLER]: loadSlots() called during initialisation. Translating call to registerSlots() to avoid reset"),this.registerAndRunAuction(!0,!1,t))}}]),a}(),Nr=function(){eturn g(n,[{key:"register",value:function(e){var t=e.zoneInstanceId;if(!this.REGISTERED_ZONES[t]){var i=e.zoneDivId?this.findByDivId(e.zoneDivId):void 0;if(i){var n=i.zoneDiv,i=i.zoneInstanceId;if(i===t)return void this.logger.error("[ZONE][".concat(i,"]: Ignoring unexpected re-registration"));this.logger.warn("[ZONE][".concat(i,"]: Div ").concat(n.id," replaced in DOM without pageInit(). Registering ").concat(t)),this.DELETED_ZONES.push(i),delete this.REGISTERED_ZONES[i],delete this.MANUAL_ACTIVATE_API[i]}this.logger.info("[ZONE][".concat(t,"]: Registered with DivId ").concat(e.zoneDiv.id)),this.reporter.reportFirstZone();n={zoneInstanceId:t,zoneDiv:e.zoneDiv,zoneDivId:e.zoneDivId,zoneTemplateId:e.zoneTemplate.id,gpid:e.gpid};return this.REGISTERED_ZONES[t]=n}this.logger.error("[ZONE][".concat(t,"]: Already registered"))}},{key:"isDeletedZone",value:,{key:"findByDivId",value:,{key:"activateZone",value:function(e){var t,i=this.findByDivId(e);return i?(t=i.zoneInstanceId,!this.MANUAL_ACTIVATE_API[t]&&(this.MANUAL_ACTIVATE_API[t]=!0,this.zoneEventEmitter.emit({zoneTemplateId:i.zoneTemplateId,zoneDivId:i.zoneDivId,zoneEventType:"activate_zone_api",instanceId:i.zoneInstanceId,gpid:i.gpid}),!0)):(this.logger.error("[ZONE][".concat(e,"]: Unknown zone")),!1)}},{key:"isManuallyActivated",value:function(e){var t;return this.REGISTERED_ZONES[e]?null!=(t=this.MANUAL_ACTIVATE_API[e])&&t:(this.logger.error("[ZONE][".concat(e,"]: Unknown zone")),!1)}},{key:"getRegisteredZones",value:,{key:"reset",value:,{key:"deleteZone",value:]),n}(),Gr=!1,Fr=f.getLogger(),Ur=Wr=jr=var Vr=);function Zr(e,t){if(e&&t)return e=new URL(e),t=new URL(t),e.hash="",t.hash="",e.toString()==t.toString()}var Hr=function(){eturn g(c,[{key:"reset",value:,{key:"handlePageInitCall",value:function(e,t,i){this.logger.info("[PAGE]: pageInit('".concat(e,"', ").concat(t,", ").concat(JSON.stringify(i)));var n,r=null===this.lastPageInitUrl,o=p(this.tagInitOnce.value);if(r)if(o){if(Zr(e,this.initialUrl))return void this.logger.warn("[PAGE]: Ignored pageInit(), because URL unchanged since tag init");this.logger.info("[PAGE]: First pageInit() call, and URL changed since tag init. Resetting."),this.reset(),n=!0}else n=!1;else{if(Zr(e,this.lastPageInitUrl))return void this.logger.warn("[PAGE]: Ignored pageInit(), because URL unchanged since last pageInit call");this.logger.info("[PAGE]: pageInit() called, and the URL has changed. Resetting."),n=!0,this.reset()}this.lastPageInitUrl=e,null!=i&&i.pageTargets&&this.setPageTargeting(null==i?void 0:i.pageTargets),null!=i&&i.blockingFuseIds&&this.setBlock(null!=(r=null==i?void 0:i.blockingTimeout)?r:2e3,i.blockingFuseIds,n,t),null!=i&&i.afsPageParams&&(this.afsPageParams=i.afsPageParams),o&&this.emitPageInit(e,!1)}},{key:"isPageInitCalled",value:,{key:"isLowDwellUrl",value:function(t){return 0<this.lowDwellPages.filter(function(e){e=t.match(e);return e&&0<e.length}).length}},{key:"emitPageInit",value:function(e,t){t=Object.assign({url:e,isFirstPageInit:t,isLowDwellPage:this.isLowDwellUrl(e),breakpoint:this.currentBreakpoint().name},this.afsPageParams?{afsPageParams:this.afsPageParams}:{});this.events.onPageInit.emit(t)}},{key:"emitPageReset",value:,{key:"setBlock",value:function(e,t,i,n){i=i?e:e-n;i<=0?this.logger.info("[PAGE][pageInit]: Skipped setting auction block, because there is no time left on the timeout"):(e=t.map(function(e){return"".concat(e)}),this.setAuctionBlockFn(e,i))}}]),c}(),qr=function(){eturn g(l,[{key:"getCurrentBreakpointName",value:,{key:"getWindow",value:function(){return this.viewportInfo.browserWindow}},{key:"registerAll",value:,{key:"processNewSlots",value:function(){this.registerAll()}},{key:"registerZone",value:function(e){this.logger.debug("[APIV3]: registerZone('".concat(e,"') started"));e=this.slotsController.registerZoneAndQueue(e,!0,!1,this);return e&&this.slotsController.runAuction(),e}},{key:"queueZone",value:,{key:"runAuction",value:,{key:"disableRefreshByZone",value:function(e){return this.auctionScheduler.disableSlotRefresh(e)}},{key:"enableRefreshByZone",value:function(e){return this.auctionScheduler.enableSlotRefresh(e)}},{key:"getSlotsForTemplateId",value:function(e){return this.slotRegistry.getSlotsForTemplateId(e)}}]),l}(),Jr=),A=new(function(){function e(){d(this,e)}return g(e,[{key:"configureResponsive",value:,{key:"getAuctionExecutor",value:function(){var e;return this.auctionExecutor||(e=n.getSettings(),this.auctionExecutor=new Tr(this.getFuseSlotRegistry(),Yi.getPrebidGlobal(),Sr.getUam(),f.getLogger(),k.getReporter(),e,m,S.getTouchObserver(),e.getUseTelemetry()&&k.getTelemetry())),this.auctionExecutor}},{key:"getFuseSlotRegistry",value:,{key:"getZoneRegistry",value:,{key:"getAuctionScheduler",value:function(){var i=this;return this.auctionScheduler||(this.auctionScheduler=new _r(f.getLogger(),f.getBrowserWindowObject(),S.getViewportInfo(),n.getSettings(),Pn)),this.auctionScheduler}},{key:"getAuctionPlanner",value:,{key:"getController",value:,{key:"getDomProcessor",value:,{key:"getFuseSlotFormatter",value:function(){return this.fuseSlotFormatter||(this.fuseSlotFormatter=new Or(f.getLogger(),n.getSettings(),S.getViewportInfo())),this.fuseSlotFormatter}},{key:"getPageManager",value:function(){var i,e=this;return this.pageManager||(i=n.getSettings(),this.pageManager=new Hr(f.getLogger(),f.getBrowserWindowObject().location.href,function(){return e.resetPage()},m,S.getViewportInfo().breakpointSupplier(),i.getLowDwellPages())),this.pageManager}},{key:"resetAfterChangedBreakpoint",value:,{key:"resetPage",value:,{key:"getApiV3",value:]),e}()),Yr=function(){eturn g(r,[{key:"hasInterstitial",get:function(){return this._hasInterstitial}},{key:"initInterstitial",value:function(){var e,t,i=this;this._hasInterstitial?this.logger.log("[INTERSTITIAL]: Already present"):(this.logger.info("[INTERSTITIAL]: Initialising"),null!=(e=this.getInterstitialSlot())&&e.injectConditionConfig?(t=this.insertFactory.buildActivator(e.injectConditionConfig,e.id,this.apiV3,function(){i.setInterstitialSlot(e)})).checkCondition()?this.setInterstitialSlot(e):t.enableTriggers():e&&this.setInterstitialSlot(e))}},{key:"clearInterstitial",value:function(){var t,e;this._hasInterstitial?(this.logger.info("[INTERSTITIAL]: Clearing"),(e=this.getInterstitialSlot())&&(t=e.slot,e=y.pubads().getSlots().filter(,_i(e),this._hasInterstitial=!1)):this.logger.log("[INTERSTITIAL]: No interstitial to clear")}},{key:"getInterstitialSlot",value:function(){return this.settings.getFuseSlots().find(function(e){e=e.attributes;return!0===(null==e?void 0:e.interstitial)})}},{key:"setInterstitialSlot",value:function(e){(e=y.defineOutOfPageSlot(e.slot,y.enums.OutOfPageFormat.INTERSTITIAL))?(e.addService(y.pubads()),y.enableServices(),y.display(e),Ii(),I.info("[GPT]: Requesting interstitial refresh for ".concat(e.getSlotElementId())),y.pubads().refresh([e],{changeCorrelator:!1})):I.warn("setInterstitialSlot(): googletag.defineOutOfPageSlot returned undefined"),this._hasInterstitial=!0}}]),r}(),Xr=function(){eturn g(n,[{key:"getZoneDivId",value:,{key:"createSlotElement",value:,{key:"toHTML",value:,{key:"getSlotNonFluidSizes",value:function(){var e,t=this.viewportInfo.getCurrentBreakpoint().name;return null==(e=null==(e=this.slot.sizeMapping)?void 0:e[t])?void 0:e.filter(}},{key:"getSlotMaxNonFluidHeight",value:function(){var e=this.getSlotNonFluidSizes(),e=e?e.map(function(e){return Number(e[1])}):[];return e.length?Math.max.apply(Math,s(e)):0}},{key:"getSlotMaxNonFluidWidth",value:,{key:"getLogContext",value:,{key:"getClassName",value:,{key:"getContainerElement",value:function(){return document.querySelector(".".concat(this.getClassName(),"-container"))}},{key:"getStylesElement",value:function(){return document.querySelector("#".concat(this.getClassName(),"-styles"))}},{key:"getWidgetElement",value:]),n}(),Qr=function(){G(c,Xr);var u=j(c);function c(e,t,i,n,r,o){var s,a=!(6<arguments.length&&void 0!==arguments[6])||arguments[6];return d(this,c),(s=u.call(this,e,t,i)).slot=e,s.logger=t,s.viewportInfo=i,s.registerAdRendered=n,s.apiV3=r,s.onShowCloseCallback=o,s.waitForCreative=a,s.loadingByCreative=!1,s.hiddenForever=!1,s.hasLoadedCreative=!1,s.type="sticky",s.barScrollHeight=0,s.barHeight=60,s.scrollingHeight=500,s.scrollCreative=!1,s.creativeHeight=0,s.scrollOffset=0,s.scrollPosition=0,s.scrollMultiplier=0,s.slotRenderCallbackRegistered=!1,s.attributes=s.makeAttributes(),s.scrollCreative=(null==(e=s.slot.stickyAttributes)?void 0:e.scrollCreative)||!1,s.scrollableElement=null!=(t=s.slot.stickyAttributes)&&t.scrollableSelector?i.browserWindow.document.querySelector(null==(n=s.slot.stickyAttributes)?void 0:n.scrollableSelector):i.browserWindow,s.setHeights(0),s}return g(c,[{key:"createWidget",value:,{key:"getHideAtElement",value:function(){var e=this.getAttributes().hideSelector;return e?document.querySelector(e):null}},{key:"getFixedElement",value:,{key:"getFixedClass",value:,{key:"getWidgetCloseButtonElement",value:function(){return document.querySelector(".".concat(this.getClassName(),"-button"))}},{key:"makeAttributes",value:,{key:"addContent",value:function(e,t){var i=this,n=this.getClassName(),r=e.querySelector(".".concat(n)),o=this.createSlotElement(),r=(r.appendChild(o),e.querySelector(".".concat(n,"-button")).addEventListener("click",,document.querySelector("body"));return null!=r&&r.insertAdjacentElement("beforeend",t),null!=r&&r.insertAdjacentElement("beforeend",e),o}},{key:"getButtonStyles",value:,{key:"getFixedSelectorStyles",value:,{key:"createStyles",value:function(){var e=this.getAttributes(),t=e.zIndex,i=e.compact,n=e.isTop,r=e.isButtonOutside,o=e.bgColor,s=e.bgOpacity,a=e.barColor,u=e.allowClose,c=e.allowReopen,l=e.buttonColor,d=e.fixedSelector,e=e.borderWidth,g=this.getSlotMaxNonFluidHeight(),h=this.getContainerBordersSize(),f=this.getContainerBorderSize(),p=g+h,h=this.getSlotMaxNonFluidWidth()+h,b=c&&r?f:0,v=this.getClassName();return this.toHTML('\n<style id="'.concat(v,'-styles">\n.').concat(v,"-container {\n  direction: ltr;\n  z-index: ").concat(t,";\n  position: fixed;\n  ").concat(n?"top: 0":"bottom: 0",";\n  width: ").concat(i?h+"px":"100%",";\n  height: ").concat(p,"px;\n  transition: transform .3s linear, height .3s linear;\n  ").concat(r?"":"overflow: hidden;","\n  ").concat(i?"left: 50%; transform: translateX(-50%);":"left: 0;","\n}\n\n.").concat(v,"-container-background {\n  background-color: ").concat(o,";\n  opacity: ").concat(s,";\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: -1;\n}\n\n.").concat(v,"-button {\n  width: 40px;\n  margin-left: 2px;\n  height: 20px;\n  background-color: ").concat(a,";\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  display: ").concat(u?"flex":"none",";\n  transition: top .3s linear;\n  ").concat(this.getButtonStyles(Boolean(r),Boolean(n),p,g,f),"\n}\n.").concat(v,"-button :first-child, .").concat(v,"-button :last-child  {\n  background-color: ").concat(l,";\n  width: 13px;\n  height: 3px;\n  border-radius: 2px;\n}\n.").concat(v,"-button :first-child {\n  transform: rotate(").concat(n?"-":"","30deg) translateX(2px);\n}\n.").concat(v,"-button :last-child {\n  transform: rotate(").concat(n?"":"-","30deg) translateX(-2px);\n}\n.").concat(v," {\n  width: ").concat(i?h+"px":"100%",";\n  height: ").concat(p,"px;\n  display: flex;\n  justify-content: center;\n  align-items: ").concat(this.scrollCreative?"baseline":"center",";\n  transition: transform .3s linear, height .3s linear;\n  border").concat(i?"":n?"-bottom":"-top",": ").concat(e," solid ").concat(a,";\n  ").concat(null!=(t=this.slot.stickyAttributes)&&t.scrollCreative?"overflow: hidden":"","\n}\n.").concat(v,"-container.closed {\n  ").concat(n?"transform: translateY(-".concat(p-b,"px)").concat(i?" TranslateX(-50%)":"",";"):"height: "+b+"px !important;","\n}\n.").concat(v,"-container.closed .").concat(v,"-button {\n  visibility: ").concat(c?"visible":"hidden",";\n  ").concat(c?"":"display: none;","\n}\n.").concat(v,"-container.closed .").concat(v,"-button :first-child {\n  transform: rotate(").concat(n?"":"-","30deg) translateX(2px);\n}\n.").concat(v,"-container.closed .").concat(v,"-button :last-child {\n  transform: rotate(").concat(n?"-":"","30deg) translateX(-2px);\n}\n").concat(this.getFixedSelectorStyles(v,d,Boolean(n),g,p),"\n</style>\n"))}},{key:"getContainerBorderSize",value:,{key:"getContainerBordersSize",value:,{key:"getAttributes",value:function(){return this.attributes}},{key:"insert",value:function(){var e=this,t=(this.logger.debug("".concat(this.getLogContext()," add widget")),this.createWidget(this.getSlotMaxNonFluidHeight())),i=this.createStyles(),t=this.addContent(t,i);return this.viewportInfo.browserWindow.requestAnimationFrame(function(){e.show()}),this.getHideAtElement()&&this.setHideAtElementListener(),this.scrollCreative&&this.scrollableElement&&this.scrollableElement.addEventListener("scroll",function(){e.updateWidgetPosition()}),[t]}},{key:"getSlotMaxNonFluidHeight",value:function(){return this.barHeight}},{key:"setHeights",value:,{key:"hideAtElementListener",value:,{key:"setHideAtElementListener",value:,{key:"isHideSelectorVisible",value:,{key:"onBreakpointChange",value:function(){var e,t,i,n,r=this.getAttributes().compact,o=this.getContainerElement(),s=this.getWidgetElement();s&&(this.setHeights(0),e=this.barHeight,n=(t=this.getSlotMaxNonFluidWidth())+(i=this.getContainerBordersSize()),o.style.height=(0===e?0:e+i)+"px",o.style.display=0===e?"none":"block",r&&e&&(o.style.width=n+"px",s.style.width=t+"px"),s.style.height=e+"px",0===e||this.isHideSelectorVisible()?this.updateFixedElement(!0):this.updateFixedElement(),this.getStylesElement().innerHTML=this.createStyles().innerHTML)}},{key:"delete",value:,{key:"getSlotElement",value:,{key:"getScrollY",value:function(){var e;return null!=(e=this.slot.stickyAttributes)&&e.scrollableSelector?this.scrollableElement.scrollTop:this.scrollableElement.scrollY}},{key:"updateWidgetPosition",value:function(e){var t,i,n;this.scrollCreative&&this.hasLoadedCreative&&(i=(t=this.slot.stickyAttributes).scrollingHeight,t=t.scrollableSelector,i&&(-1!==(i=i.trim()).indexOf("vh")?this.scrollingHeight=t?this.scrollableElement.scrollHeight-(this.scrollableElement.offsetHeight||0):Number(i.replace("vh",""))*this.viewportInfo.browserWindow.innerHeight:this.scrollingHeight=Number(i.replace("px",""))),this.scrollMultiplier=this.barScrollHeight/this.scrollingHeight,t=this.getScrollY(),this.logger.debug("".concat(this.getLogContext()," updateWidgetPosition before"),e,this.creativeHeight,this.barHeight,this.scrollOffset,this.scrollPosition,this.getWidgetElement().style.marginTop,t,this.scrollingHeight),e?this.getWidgetElement().style.alignItems=this.creativeHeight>this.barHeight?"baseline":this.attributes.isTop?"start":"end":this.creativeHeight>this.barHeight&&(n=(i=t-this.scrollPosition)*this.scrollMultiplier,this.scrollOffset+=n,this.logger.debug("".concat(this.getLogContext()," updateWidgetPosition check"),n,i,this.scrollOffset),i<=0?this.scrollOffset<=0&&(this.scrollOffset=0):this.scrollOffset>this.barScrollHeight&&(this.scrollOffset=this.barScrollHeight),this.getSlotElement().style.marginTop="-"+this.scrollOffset+"px",this.scrollPosition=t),this.logger.debug("".concat(this.getLogContext()," updateWidgetPosition after"),e,this.creativeHeight,this.barHeight,this.scrollOffset,this.scrollPosition,this.getWidgetElement().style.marginTop,this.scrollMultiplier,this.barScrollHeight))}},{key:"show",value:function(){var r=this,o=this.slot.id;return this.logger.debug("".concat(this.getLogContext()," showing with waitForCreative ").concat(this.waitForCreative)),this.loadingByCreative||(this.waitForCreative&&!this.hasLoadedCreative?(this.loadingByCreative=!0,this.slotRenderCallbackRegistered||(this.logger.debug("".concat(this.getLogContext()," register slotRender callback")),this.registerAdRendered(function(e){var t,i,n;-1!==e.slot.getSlotElementId().indexOf(o)&&(r.scrollCreative&&e.size&&(t=Number(e.size[1]),i=0,n=e.slot.getTargeting("hb_size")[0]||e.slot.getTargeting("amznsz")[0],1===t&&n&&(i=Se(n)[1],r.logger.debug("".concat(r.getLogContext()," get height ").concat(i," from targeting"))),r.setHeights(i||t),r.updateWidgetPosition(!0)),r.logger.debug("".concat(r.getLogContext()," show widget by creative ").concat(e.slot.getSlotElementId())),!r.isHideSelectorVisible()&&r.loadingByCreative&&r.onShow(),r.loadingByCreative=!1,r.hasLoadedCreative=!0)}),this.slotRenderCallbackRegistered=!0)):this.onShow()),!0}},{key:"onShow",value:,{key:"onClose",value:,{key:"hide",value:,{key:"updateFixedElement",value:function(){var e,t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],i=(this.logger.debug("".concat(this.getLogContext()," updateFixedElement ").concat(t?"restore":"update")),this.getFixedElement());i&&(e=this.getFixedClass(),t?i.classList.remove(e):i.classList.add(e))}}]),c}(),Kr=function(){G(a,Xr);var s=j(a);function a(e,t,i,n,r){var o;return d(this,a),(o=s.call(this,e,t,i)).slot=e,o.logger=t,o.viewportInfo=i,o.registerAdRendered=n,o.widgetsRenderer=r,o.type="interscroller",o}return g(a,[{key:"getAttributes",value:,{key:"getTopOffset",value:function(){return this.widgetsRenderer.getMiniScrollersTopOffset()}},{key:"insert",value:function(){var n=this,e=this.getAttributes(),t=e.showBanner,i=e.zIndex,r=e.top,o=e.height,e=e.selector,s=this.getSlotMaxNonFluidHeight(),a=this.createSlotElement(),u=this.getClassName(),t=t?'<div class="'.concat(u,'-container-message banner_top">Advertisement</div>'):"",t=this.toHTML('\n    <div class="'.concat(u,'-container">\n      ').concat(t,'\n        <div class="').concat(u,'-scroll-clip">\n          <div class="').concat(u,' publift-widget-interscroller">').concat(a.outerHTML,"</div>\n        </div>\n    </div>\n  ")),i=this.toHTML('\n  <style id="'.concat(u,'-styles">\n  .').concat(u,"-container {\n    width: 100vw;\n    min-height: ").concat(o,";\n    z-index: ").concat(i,";\n    position: relative;\n    display: ").concat(0===s?"none":"block",";\n  }\n\n  .").concat(u,"-container-message {\n    position: absolute;\n    background-color: black;\n    color: white;\n    padding: .5em;\n    text-align: center;\n    font-family: sans-serif;\n    width: calc(100% - 1em);\n    z-index: 9999;\n  }\n\n  .").concat(u,"-scroll-clip {\n    position: absolute;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    clip-path: inset(0px);\n    clip: rect(0px, auto, auto, 0px);\n    min-height: ").concat(o,"\n  }\n\n  .").concat(u," {\n    position: fixed;\n    top: ").concat(r||this.widgetsRenderer.getMiniScrollersTopOffset()+"px"," !important;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    margin: 0;\n    padding: 0;\n    bottom: 0;\n    transform: translateZ(0px);\n  }\n  </style>\n  ")),s=document.querySelector("body");if(s){o=document.querySelector(e);if(o)return s.insertAdjacentElement("beforeend",i),o.appendChild(t),u=t.getBoundingClientRect().x-s.getBoundingClientRect().x,t.style.marginLeft="-".concat(u,"px"),t.style.marginRight="-".concat(u,"px"),[a];this.logger.info("".concat(this.getLogContext()," insertionPoint with selector not found: ").concat(e))}return this.registerAdRendered(function(e){var t,i;n.logger.debug("".concat(n.getLogContext()," gpt event ").concat(JSON.stringify(e))),-1!==e.slot.getSlotElementId().indexOf(n.slot.id)&&(n.logger.debug("".concat(n.getLogContext()," gpt event suit")),e.creativeId)&&e.size&&(n.logger.debug("".concat(n.getLogContext()," gpt event creative ").concat(e.size[1])),t=Number(e.size[1]),i=0,e=e.slot.getTargeting("hb_size")[0]||e.slot.getTargeting("amznsz")[0],1===t&&e&&(i=Se(e)[1],n.logger.debug("".concat(n.getLogContext()," get height ").concat(i," from targeting"))),n.updateWidgetPosition(i||t))}),[]}},{key:"updateWidgetPosition",value:function(e){var t=this.getSlotMaxNonFluidHeight(),i=this.widgetsRenderer.getMiniScrollersTopOffset(),n=(this.viewportInfo.browserWindow.innerHeight-(1<e?e:t))/2,r=i;this.logger.debug("".concat(this.getLogContext()," get top offset ").concat(r," for adunit size ").concat(e," maxHeight ").concat(t," topOffsetCentered ").concat(n," topOffsetSettings ").concat(i)),this.getWidgetElement().style.top="".concat(r,"px")}},{key:"onBreakpointChange",value:,{key:"delete",value:function(){var e=this.getStylesElement(),t=this.getContainerElement();return!(!e||!t||(e.remove(),t.remove(),0))}},{key:"hide",value:function(){return this.getContainerElement().style.display="none",!0}},{key:"show",value:]),a}(),$r=function(){G(i,Xr);var t=j(i);eturn g(i,[{key:"getAttributes",value:,{key:"createElement",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=this.createSlotElement();return e&&e.split(" ").forEach(,t&&(i.style.cssText=t),i}},{key:"canBeInserted",value:function(e){var t,i=this.getLogContext();return e?(t=document.querySelectorAll(e)).length?(this.logger.debug("".concat(i," Page has ").concat(t.length," elements suitable for selector ").concat(e)),!0):(this.logger.info("".concat(i," No element with selector ").concat(e," found")),!1):(this.logger.warn("".concat(i," Selector should be defined")),!1)}},{key:"notFuseSlot",value:,{key:"filterNodes",value:function(e){var t=this.getAttributes(),i=t.skip,n=t.each,r=t.position,o=t.incrementEach,s=[],a=0,u=n;return e.forEach(function(e,t){t+=1;if(i&&t<=i)return!1;if("incontent"!==r&&u){if((t-i-a)%u!=0)return!1;o&&(a+=u,u+=o)}s.push(e)}),s}},{key:"getZoneDiv",value:function(e){return 1<arguments.length&&void 0!==arguments[1]&&arguments[1]?e.querySelector("div[data-fuse]"):e}},{key:"insert",value:function(){var u,c,l=this,e=this.getAttributes(),t=e.selector,d=e.position,g=e.classNames,h=e.css,f=e.wrapperContent,p=e.repeatHeight;return this.canBeInserted(t)?(e=document.querySelectorAll(t),u=0,c=[],this.filterNodes(e).forEach(function(e){var t=l.createElement(g,h),i=t,n=(f&&(t=l.wrapElement(t,f)),e.nextElementSibling),r=e.parentNode,o=e.previousElementSibling,s=e.lastElementChild;switch(d){case"after":l.notFuseSlot(n)&&(r.insertBefore(t,n),c.push(i));break;case"before":l.notFuseSlot(o)&&(r.insertBefore(t,e),c.push(i));break;case"replace":e.replaceWith(t),c.push(i);break;case"incontent":var a=e.getBoundingClientRect().top+e.getBoundingClientRect().height+document.documentElement.scrollTop,a=Math.floor(a/p);u<a&&(u=a,l.notFuseSlot(n))&&(r.insertBefore(t,n),c.push(i));break;default:l.notFuseSlot(s)&&(e.appendChild(t),c.push(i))}}),c):(this.logger.debug("".concat(this.getLogContext()," Injection skipped")),[])}},{key:"wrapElement",value:,{key:"delete",value:function(){var e=document.querySelectorAll('[data-fuse="'.concat(this.slot.id,'"]'));return e.forEach(function(e){e.remove()}),0<e.length}},{key:"hide",value:function(){throw new Error("Method not implemented.")}},{key:"show",value:function(){throw new Error("Method not implemented.")}},{key:"onBreakpointChange",value:]),i}(),eo=function(){eturn g(i,[{key:"getStatuses",value:function(){return this.statuses}},{key:"start",value:function(e){var i=this;(1<arguments.length&&void 0!==arguments[1]&&arguments[1]||!this.statuses.length)&&(this.logger.debug("[WIDGETS][CHECKER] Start to check slots"),this.statuses=e.filter(function(e){var t;return(null==(t=e.dynamicAttributes)?void 0:t.selector)||(null==(t=e.interscrollerAttributes)?void 0:t.selector)}).map(function(e){var t=(null==(t=e.dynamicAttributes)?void 0:t.selector)||(null==(t=e.interscrollerAttributes)?void 0:t.selector);return{slot:e,selector:t,countSelector:i.countSelector(t),countSlot:i.countSlot(e.id)}}),this.statuses.length)&&(this.checkInterval=setInterval(function(){return i.check()},100))}},{key:"stop",value:function(){this.checkInterval&&clearInterval(this.checkInterval),this.statuses=[]}},{key:"check",value:,{key:"countSelector",value:,{key:"countSlot",value:]),i}(),to=function(){function u(e,t,i,n,r,o,s){var a=this;d(this,u),this.logger=e,this.settings=t,this.apiV3=i,this.conditionFactory=n,this.viewportInfo=r,this.events=o,this.videoManager=s,this.inited=!1,this.widgets=[],this.widgetsChecker=new eo(this.logger,this),this.events.onBreakpointChanged.subscribe(function(){return a.handleBreakpointChange()}),this.events.onPageInit.subscribe(}return g(u,[{key:"getStickySlots",value:function(){return this.settings.getFuseSlots().filter(function(e){return null==(e=e.attributes)?void 0:e.sticky})}},{key:"getInterscrollerSlots",value:function(){return this.settings.getFuseSlots().filter(function(e){return null==(e=e.attributes)?void 0:e.interscroller})}},{key:"getDynamicSlots",value:function(){return this.settings.getFuseSlots().filter(function(e){return null==(e=e.attributes)?void 0:e.dynamic})}},{key:"getScrollToStickSlots",value:function(){return this.settings.getFuseSlots().filter(function(e){return null==(e=e.attributes)?void 0:e.scrollToStick})}},{key:"getMiniscrollerSlots",value:function(){return this.settings.getFuseSlots().filter(}},{key:"isSlotInjected",value:,{key:"getWidget",value:,{key:"removeWidget",value:,{key:"handleBreakpointChange",value:function(){var t=this,e=this.getStickySlots(),i=this.getInterscrollerSlots();this.logger.info("[WIDGETS] onBreakpointChange Stickies: ".concat(e.length," Scrolls: ").concat(i.length)),e.concat(i).forEach(}},{key:"getWidgetSlots",value:,{key:"getWidgetsWithSelector",value:,{key:"insertStyles",value:,{key:"cleanupDynamicSlots",value:,{key:"injectWidget",value:function(e){var t=this,i=(this.logger.debug("[WIDGETS][".concat(e.id,"] Inject widget")),e.attributes),n=i.sticky,r=i.interscroller,i=i.dynamic,o=this.getWidget(e),s=!1;if((n||r)&&this.isSlotInjected(e))this.logger.debug("[WIDGETS][".concat(e.id,"] Skip injection. DOM element exists"));else{if(!o){if(n)o=new Qr(e,this.logger,this.viewportInfo,function(e){return Ci(e)},this.apiV3,function(){t.updateFuseStyles()},!this.settings.isYandexEnabled()),s=e.stickyAttributes.isTop;else if(r)o=new Kr(e,this.logger,this.viewportInfo,function(e){return Ci(e)},this);else{if(!i)return void this.logger.warn("[WIDGETS][".concat(e.id,"] Skip injection of unknown widget"));this.logger.debug("[WIDGETS][".concat(e.id,"] Injecting dynamic slot with attributes ").concat(JSON.stringify(e.dynamicAttributes))),o=new $r(e,this.logger,this.viewportInfo)}this.widgets.push(o)}var n=o.insert(),a=this.videoManager.getSettings();n.forEach(,0<n.length&&this.apiV3.runAuction(),s&&this.updateFuseStyles()}}},{key:"render",value:function(){var i=this;this.getWidgetSlots().forEach(function(e){var t;!e.injectConditionConfig||(t=i.conditionFactory.buildActivator(e.injectConditionConfig,e.id,i.apiV3,function(){i.injectWidget(e)})).checkCondition()?i.injectWidget(e):t.enableTriggers()})}},{key:"init",value:,{key:"cleanup",value:,{key:"reset",value:,{key:"getMiniScrollersTopOffset",value:function(){var i=this,n=0,e=this.settings.getTopStickyHeaderSelector();return e&&(e=document.querySelector(e))&&(n+=e.clientHeight,this.logger.debug("[WIDGETS] miniscrollers offset set to ".concat(n," because of topStickyHeader"))),this.getStickySlots().forEach(function(e){var t;null!=(t=e.stickyAttributes)&&t.isTop&&(t=i.getWidget(e))&&t.getContainerElement()&&!t.getContainerElement().classList.contains("closed")&&(t=i.settings.maxSlotHeightForBreakpoint(e,i.viewportInfo.getCurrentBreakpoint().name),n+=null!=t?t:0,i.logger.debug("[WIDGETS] miniscrollers offset set to ".concat(n," because of top sticky")))}),n}},{key:"injectFuseStyles",value:function(){var e,t,i;document.getElementById("publift-fuse-styles")?this.logger.debug("[WIDGETS] styles already injected"):(e="",t=this.getMiniScrollersTopOffset(),this.settings.isMiniScrollersEnabled()&&(this.logger.debug("[WIDGETS] inject fuse styles"),i="\n      .fuse-slot-mini-scroller .fuse-slot {\n        top: ".concat(0|t,"px;\n        position: sticky !important;\n        overflow: hidden !important;\n      }\n      .fuse-slot-mini-scroller {\n        overflow: initial !important;\n        display: block !important;\n      }\n      "),this.logger.debug("[WIDGETS] injected miniScroller styles"),e+=i),e+="\n    .fuse-slot-scroll-to-stick .fuse-slot {\n      z-index: 9999;\n      top: ".concat(0|t,"px;\n      position: fixed;\n      width: 100%;\n      left: 0px;\n      pointer-events: none;\n    }\n    .publift-widget-interscroller {\n      top: ").concat(0|t,"px;\n    }"),this.insertStyles('<style id="publift-fuse-styles">'.concat(e,"</style>")))}},{key:"updateFuseStyles",value:function(){var e=document.getElementById("publift-fuse-styles");e&&e.remove(),this.injectFuseStyles()}},{key:"getScrollToStickPrevElement",value:,{key:"addScrollToStickListener",value:function(){var r=this,o=this.getMiniScrollersTopOffset(),s=this.getScrollToStickSlots(),e=this.settings.scrollToStickDisableDepth()||0;s.length&&(this.logger.debug("[WIDGETS] scrollToStick slots found ".concat(this.getScrollToStickSlots().length,". Attach scroll listener")),this.viewportInfo.browserWindow.addEventListener("scroll",function(){r.logger.debug("[WIDGETS] scrollToStickListener");var n=0<e&&r.viewportInfo.browserWindow.scrollY>e;s.forEach(function(i){document.querySelectorAll('[data-fuse="'.concat(i.id,'"]')).forEach(function(e){var t;n?(r.logger.debug("[WIDGETS][".concat(i.id,"] scrollToStick removed by scrollToStickDisableDepth")),e.classList.remove("fuse-slot-scroll-to-stick"),s=s.filter():(t=r.getScrollToStickPrevElement(e))&&t.getBoundingClientRect().y+t.getBoundingClientRect().height-o<0?(r.logger.debug("[WIDGETS][".concat(i.id,"] scrollToStick set")),e.classList.add("fuse-slot-scroll-to-stick")):(r.logger.debug("[WIDGETS][".concat(i.id,"] scrollToStick removed")),e.classList.remove("fuse-slot-scroll-to-stick"))})})},!0))}}]),u}(),io="publift-primis-script",no="primisPlayer",ro=function(){eturn g(s,[{key:"init",value:function(){var e=this;this.logger.log("[VIDEO]: Video init"),this.settings.enabled&&!this.inited&&(this.logger.log("[VIDEO]: Video init events"),this.events.onBreakpointChanged.subscribe(,this.events.onPageInit.subscribe(function(){return e.initVideo()}),this.events.onPageReset.subscribe(function(){return e.removeVideo()}),this.initVideo(),this.inited=!0)}},{key:"getSettings",value:function(){return this.settings}},{key:"initVideo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.logger.log("[VIDEO]: Video initVideo"),this.settings.enabled&&(e&&!this.settings.injectedAdUnitId||!e&&this.settings.injectedAdUnitId?this.logger.log("[VIDEO]: Video initVideo skipped -  dynamic: ".concat(e,", injectedAdUnitId: ").concat(this.settings.injectedAdUnitId)):this._hasVideo?this.logger.log("[VIDEO]: Video all ready setup"):this.settings.breakpoints&&!this.settings.breakpoints[this.viewportInfo.getCurrentBreakpoint().name]?this.logger.log("[VIDEO]: Not starting video at breakpoint ".concat(this.viewportInfo.getCurrentBreakpoint().name)):("primis"===this.settings.partner&&this.setupPrimis(this.settings.placementId),this._hasVideo=!0))}},{key:"resetVideo",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this.logger.log("[VIDEO]: Resetting video"),this.removeVideo(),this.initVideo(e)}},{key:"removeVideo",value:function(){this.settings.enabled&&this._hasVideo&&("primis"===this.settings.partner&&this.resetPrimis(),this._hasVideo=!1,this.logger.log("[VIDEO]: Removed video script ".concat(io)))}},{key:"setupPrimis",value:function(e){var t,i,n,r=this,o=(this.logger.log("[INIT]: Setup primis"),this.scoSettings?"&schain=1.0,1!".concat(this.scoSettings.asi,",").concat(this.scoSettings.sellerId,",1"):"");this.settings.enabled&&this.settings.injectedAdUnitId&&(t='[data-fuse="'.concat(this.settings.injectedAdUnitId,'"]'),(i=this.browserWindow.document.querySelector(t))?((n=this.browserWindow.document.createElement("div")).id=no,i.appendChild(n)):this.logger.warn("[INIT]: Injection video library. Element with selector ".concat(t," not found"))),a({name:"Primis",url:"//live.primis.tech/live/",file:"liveView.php",query:"s=".concat(e).concat(o,"&playerApiId=publift-primis-video"),id:io,insertSelector:this.settings.enabled&&this.settings.injectedAdUnitId?"#".concat(no):"body"},function(){r.logger.log("[VIDEO]: Primis video loaded")})}},{key:"resetPrimis",value:function(){var e;null!=(e=this.browserWindow.document.getElementById(io))&&e.remove(),null!=(e=this.browserWindow.document.getElementById(no))&&e.remove(),null!=(e=this.browserWindow.document.getElementById("primisPlayerContainerDiv"))&&e.remove()}}]),s}(),oo=new(function(){function e(){d(this,e)}return g(e,[{key:"getWidgetsRenderer",value:,{key:"getInterstitialManager",value:function(){return this.interstitialManager||(this.interstitialManager=new Yr(f.getLogger(),n.getSettings(),ur.getInsertConditionFactory(),A.getApiV3())),this.interstitialManager}},{key:"getVideoManager",value:function(){var e;return this.videoManager||(e=n.getSettings(),this.videoManager=new ro(f.getLogger(),e.getVideoSettings(),f.getBrowserWindowObject(),S.getViewportInfo(),m,e.getSco())),this.videoManager}}]),e}()),P=f.getLogger(),so=n.getSettings(),ao=En.getGptSlotRegistry(),uo=k.getReporter(),co=A.getFuseSlotRegistry(),R=A.getController(),lo=Tn.getInitManager(),go=f.getBrowserWindowObject(),e="onTagInitialised",ho=new Et(P,e),fo=A.getApiV3(),po=A.getPageManager(),bo=function(e,t){var i;P.debug("[API]: loadSlotById(".concat(e,", ").concat(t,")")),(t?R.registerZoneAndQueue(t,!0,!0,fo):R.registerAndQueueLastSlotWithFuseId("".concat(e),!0,!0,fo))||P.debug("[API]: loadSlotById(".concat(e,", ").concat(t,") did not register a slot")),t&&!1===(null==(i=co.getSlotByZoneDivId(t))?void 0:i.currentlyActive)&&(P.debug("[API]: loadSlotById(".concat(e,", ").concat(t,") activate zone")),R.activateZone(t)),R.runAuction()},vo=function(e,t,i){!e||"string"!=typeof e&&"number"!=typeof e?P.error("[API]: setSlotTargetingById with invalid fuseId: ".concat(e)):"string"!=typeof t?P.error("[API]: setSlotTargetingById with invalid key: ".concat(t)):"string"==typeof i||Array.isArray(i)?(P.debug("[API]: setSlotTargetingById(".concat(e,", ").concat(t,", ").concat(i,") started")),ao.setSlotTargetingById("".concat(e),t,i)):P.error("[API]: setSlotTargetingById with invalid value: ".concat(i))},mo=function(e){if(e&&("string"==typeof e||"number"==typeof e))return ao.getSlots("".concat(e));P.warn("[API]: getAdSlotsById with invalid fuseId: ".concat(e))};var So={enableApi:function(e){P.debug("[INIT]: Enabling Fuse API"),e.fuseUUID=so.getFuseUUID(),e.initialised=!1,e.init=!1,e.getCurrentBreakpoint=function(){return S.getViewportInfo().getCurrentBreakpoint()},e.pageInit=e.registerAll=function(){return P.debug("[API]: registerAll()"),R.registerAndRunAuction(!0,!1,fo)},e.registerZone=function(e){var t;if(e&&"string"==typeof e)return P.debug("[API]: registerZone('".concat(e,"')")),(t=null==(t=R.registerZoneAndQueue(e,!0,!1,fo))?void 0:t.slotDivId)&&R.runAuction(),t;P.error("[API]: registerZone with invalid zoneDivId: ".concat(e))},e.destroyZone=function(e){e&&"string"==typeof e?(P.debug("[API]: destroyZone('".concat(e,"')")),R.destroyZone(e)):P.error("[API]: destroyZone with invalid zoneDivId: ".concat(e))},e.activateZone=function(e){e&&"string"==typeof e?(P.debug("[API]: activateZone('".concat(e,"')")),R.activateZone(e)):P.error("[API]: activateZone with invalid zoneDivId: ".concat(e))},e.states=uo.states,e.events=uo.events,e.setTargeting=function(e,t){if("string"!=typeof e)P.error("[API]: setTargeting with invalid key: ".concat(e));else{if("string"==typeof t||Array.isArray(t))return P.debug("[API]: setTargeting(".concat(e,", ").concat(JSON.stringify(t),")")),Pn(e,t);P.error("[API]: setTargeting with invalid value: ".concat(t))}},e.onSlotRenderEnded=function(t){return Ci(function(e){e={slotId:e.slot.getSlotElementId(),hasCreative:!e.isEmpty,gptEvent:e};t(e)})},e.onTagInitialised=function(e){ho.once(e)},e.onSlotsInitialised=function(e){co.getSlotsInitObservable().once(e)},e.onSlotInitialised=e.setAllowRefreshCallback=function(e){co.setAllowSlotRefreshCallback(e)},e.privateApi={getWidgetRenderer:function(){return oo.getWidgetsRenderer()},getInitStatus:function(){return lo.getInitStatus()},getSlotProblems:function(){return uo.getSlotProblems()},resetPage:function(){return P.debug("[API]: resetPage()"),po.reset()},runAuctionAllActiveSlots:function(){return P.debug("[API]: runAuctionAllActiveSlots()"),R.runAuctionAllActiveSlots()},setLogLevel:function(e){return P.setLogLevel(e)},getLogLevel:function(){return P.getLogLevel()},getLogs:function(){return P.getLogs()},getAuctionState:getSlotTestUrls:function(){return so.getSlotTestUrls()},isYandexEnabled:function(){return so.isYandexEnabled()},isPrebidEnabled:function(){return so.isPrebidEnabled()},isCmpEnabled:function(){return so.isCmpRequired()},isUamEnabled:function(){return so.isUamEnabled()},isBlockthroughEnabled:function(){return so.isBlockthroughEnabled()}},e.loadSlots=e.getUnits=function(){return co.getZoneDivs()},e.loadSlotById=e.refreshSlots=function(){return P.debug("[API]: refreshSlots()"),R.runAuctionAllActiveSlots()},e.refreshSlotByCode=function(e){if(e&&"string"==typeof e)return P.debug("[API]: refreshSlotByCode(".concat(e,")")),R.forceRunAuction(e);P.error("[API]: refreshSlotByCode with invalid creativeDivId: ".concat(e))},e.getAdSlotsById=function(e){return mo(e)},e.processNewSlots=e.getTargeting=function(){return xn},e.getAdSlotsByFuseId=e.getAdSlotsById,e.getFuseUnits=e.getUnits,e.loadFuseSlots=e.loadSlots,e.resetSlots=function(){return P.debug("[API]: resetSlots()"),po.reset()},e.resetFuseSlots=function(){return P.debug("[API]: resetFuseSlots()"),po.reset()},e.loadFuseSlotById=e.loadSlotById,e.setSlotTargetingById=e.widgetsRenderer=e.privateApi.getWidgetRenderer(),e.setDefaultTargeting=e.getRefreshIntervals=function(){return R.getRefreshIntervals()},e.disableRefresh=e.getSlots=function(){return co.getZoneTemplates()},e.getSettings=,tagInitEmitter:ho,ON_TAG_INIT_EVENT:e};var yo=f.getLogger();function ko(a,u,d,g,h,e,t){try{var D=function(){var e,t,i=(i=window.navigator)&&i.userAgent||"",n=(n=window.navigator)&&n.userAgentData||null;return{os:r(e=i,"Win")?"windows":r(e,"like Mac")?"ios":r(e,"Mac")?"macos":r(e,"Android")?"android":"others",dc:(t=e=i,r(t,"iPad")||r(t,"Tablet")||r(t,"Android")&&!r(t,"Mobile")||r(t,"Silk")?"tablet":r(t=e,"iPod")||r(t,"iPhone")||r(t,"Android")||r(t,"IEMobile")?"smartphone":r(t=e,"Roku")||r(t,"SMART-TV")||r(t,"SmartTV")||r(t,"NetCast")||r(t,"crkey")?"connecttv":"desktop"),browser:(e=i,n)||(r(e,"OPR/")||r(e,"Opera")?"others":r(e,"Edg")?"edge":r(e,"Firefox")?"others":r(e,"Chrome")?"chrome":r(e,"Safari")||r(e,"iPad")||r(e,"iPhone")||r(e,"iphone")?"safari":"others"))}},r=o=f=c=function(e){try{if(e.__should_skip_labeling)e.__should_skip_labeling=!1;else{var t,i,n=e.getTargeting(d),r="u",o=(f(n,g)?r="b":f(n,h)?r="o":f(t=googletag.pubads().getTargeting(d),g)?r="b":f(t,h)&&(r="o"),"banner");if(e.__is_oop)o=googletag.enums.OutOfPageFormat[e.__oop_format]?googletag.enums.OutOfPageFormat[e.__oop_format].toLowerCase():"out_of_page";else try{if(e.__sz_mapping){var s=Math.round(window.innerWidth),a=Math.round(window.innerHeight);for(c in e.__sz_mapping){var u=e.__sz_mapping[c][0];if(u[0]<=s&&u[1]<=a){i=e.__sz_mapping[c][1];break}}}else e.__def_sizes&&(i=e.__def_sizes)}catch(e){}var c,l=function(e,t,i,n,r,h){try{var o,s,a,u,c,l,d,g,f,p,b,v;return"u"===i?[{key:"in2w_key16",values:[]},{key:"in2w_key20",values:[]},{key:"in2w_key21",values:[]}]:(o=0,r),z||(O=D(),P=void 0!==U[O.browser]?U[O.browser]:U.others,R=void 0!==F[O.os]?F[O.os]:F.others,O=void 0!==G[O.dc]?G[O.dc]:G.others,z={dc:L[O],os:L[R],browser:L[P]}),s=z,a=o.rt,u=o.ivf,c=s.dc,l=s.os,d=s.browser,f=function(e){if(g)return["0"];for(var t=Math.floor(1e3*Math.random()+1),i=[],n=0,r=0;r<e.length;++r){for(var o=1,s=e[r],a=0,u=0;u<s.length;u++)if(t<=(a+=s[u])){o=u+1;break}1<o&&0<n&&(o=o+n-1),n+=e[r].length;for(var c=L[o],u=0;u<i.length;++u)if(i[u]===c){u=-1;break}-1!==u&&i.push(c)}return i}((g="b"===i,t)),x=e,x=(new Date).getTime()+36e5*x,A=parseInt(x/36e5,10)%24,p=[[1,0],[3,24],[6,32]].map(,m=a,S=u,k=l,I=d,w=f,E=p,C=[],"0"===(y=c)||"3"===y?(I=B["2_"+m+S+y+I])&&C.push(I):(I=B["1_"+m+S+y+k])&&C.push(I),T=[],_=[],C.forEach(,b={short:T,full:_},g&&(b.short=[]),v=[],h&&h.length&&v.push(function(e){var t,i,n,r,o=[],s=1e5,a=1,u=1e5,c=1;for(t in r="fluid"===h||"number"==typeof h[0]&&"number"==typeof h[1]?[h]:h)"fluid"===r[t]?o.push(r[t]):((i=r[t][0])<s&&(s=i),a<i&&(a=i),(n=r[t][1])<u&&(u=n),c<n&&(c=n),o.push(i+"x"+n));o.sort(;var e=o.length,l=(o.push(s),o.push(a),o.push(u),o.push(c),o.push(e),o.join(","));try{if(!l.length)return"0";for(var d=305419896,g=0;g<l.length;++g)d^=(d<<5)+(d>>2)+l.charCodeAt(g)&4294967295;return(d<0?4294967296+d:d)+""}catch(e){return"-1"}}()),[{key:"in2w_key16",values:b.short},{key:"in2w_key20",values:b.full},{key:"in2w_key21",values:v}])}catch(e){return[{key:"in2w_key20",values:["4p10","4p1o","4p1w"]}]}var m,S,y,k,I,w,E,C,T,_,x,A,P,R,O}(p,b,r,"gpt",o,i);for(c in l)e.__setTargeting(l[c].key,l[c].values)}}catch(e){}};if(u&&0!==u.length&&d&&g&&h&&e&&t){if(a.googletag){if(!a.googletag.cmd||!a.googletag.cmd.push)return}else a.googletag={cmd:[]};try{var i=new Date,n=new Date(i.toLocaleString("en-US",{timeZone:"UTC"})),p=(new Date(i.toLocaleString("en-US",{timeZone:t})).getTime()-n.getTime())/36e5}catch(e){p=-8}var z,b=e,L=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],B={"1_0010":"01","1_0011":"02","1_0020":"03","1_0021":"04","1_0110":"05","1_0111":"06","1_0120":"07","1_0121":"08","1_0310":"09","1_0311":"0a","1_0320":"0b","1_0321":"0c","1_0610":"0d","1_0611":"0e","1_0620":"0f","1_0621":"0g","1_0810":"0h","1_0811":"0i","1_0820":"0j","1_0821":"0k","2_0000":"19","2_0001":"1a","2_0002":"1b","2_000z":"1c","2_0030":"1d","2_0031":"1e","2_0032":"1f","2_003z":"1g","2_0100":"1h","2_0101":"1i","2_0102":"1j","2_010z":"1k","2_0130":"1l","2_0131":"1m","2_0132":"1n","2_013z":"1o","2_0300":"1p","2_0301":"1q","2_0302":"1r","2_030z":"1s","2_0330":"1t","2_0331":"1u","2_0332":"1v","2_033z":"1w","2_0600":"1x","2_0601":"1y","2_0602":"1z","2_060z":"20","2_0630":"21","2_0631":"22","2_0632":"23","2_063z":"24","2_0800":"25","2_0801":"26","2_0802":"27","2_080z":"28","2_0830":"29","2_0831":"2a","2_0832":"2b","2_083z":"2c","1_0z10":"3l","1_0z11":"3m","1_0z20":"3n","1_0z21":"3o","2_0z00":"3x","2_0z01":"3y","2_0z02":"3z","2_0z0z":"40","2_0z30":"41","2_0z31":"42","2_0z32":"43","2_0z3z":"44"},M={gpt:0,amp:1,video:2,mobile:3,gpt_lite:4,adx_tag:5},N={out_of_page:0,anchor:1,app_open:2,banner:3,instream_audio:4,instream_video:5,interstitial:6,native_advance:7,rewarded:8,others:35},G={desktop:0,smartphone:1,tablet:2,connecttv:3,others:35},F={ios:0,android:1,macos:2,windows:3,others:35},U={chrome:0,safari:1,edge:2,others:35};a.googletag.cmd.unshift=a.googletag.cmd.push(}}catch(e){}}var Io=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:5068036699,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:.5,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"America/Los_Angeles";yo.debug("[INIT]: loadIn2WGptHook: advertiserId: ".concat(t,", optRatio: ").concat(i,", timeZone: ").concat(n));try{var r=bi();ko(e,[t],"intowow_optimized",["false"],["true"],[[900,10,10,10,10,10,10,10,10,10,10],[900,20,20,20,20,20]],n),E(}catch(e){yo.error("[ERROR]: in2w threw an error during initialisation: ".concat(e))}};if(null!=(e=window.self.fusetag)&&e.loading)throw e="[FUSE]: Fusetag is already initialising, and may have been included in the page twice",console.error(e),new Error(e);if(null!=(e=window.self.fusetag)&&e.init)throw e="[FUSE]: Fusetag is already initialised, and may have been included in the page twice",console.error(e),new Error(e);var wo=window.self.fusetag||(window.self.fusetag={que:[]}),O=(wo.loading=!0,k.getReporter()),D=f.getLogger(),z=n.getSettings(),Eo=(D.log("[INIT] Initialising with UUID ".concat(z.getFuseUUID())),A.getController()),Co=A.getApiV3(),To=Sr.getUam(),_o=br.getConsentManager(),xo=Tn.getInitManager(),Ao=oo.getWidgetsRenderer(),Po=oo.getInterstitialManager(),Ro=k.getTelemetry(),Oo=A.getPageManager(),Do=S.getViewportInfo(),L=k.getComponentStatusStore();function zo(){if(O.setStateStatus("fuse_queue_start"),Gr)Fr.error("[INIT] processBacklog() called, but it already ran");else{for(Gr=!0,Fr.log("[INIT]: Processing fuse queue with ".concat(Ur().length," pending items"));0<Ur().length;){var e=Ur().shift();if("function"==typeof e)try{Fr.debug("[INIT]: Calling queued function"),e.call(),e.called=!0}catch(e){Fr.error("[INIT]: Error calling queued function:",e.message,e.stack)}else Fr.error("[INIT]: Commands written into fusetag.que.push must be wrapped in a function")}jr()}O.setStateStatus("fuse_queue_finish")}unction Bo(){var e,t=fe(O.getElapsedTime());L.updateState("gpt",t),e=E(function(){I.debug("[GPT]: Queued events beginning to execute"),w.setStateStatus("gpt_queue_start"),ee(!ci.isCmpRequired(),,Ei(),y.enableServices(),e(y)}),te(Lt(),"simulate gpt init delay",I,}function Mo(){O.setStateStatus("fuse_bootstrap_start");var t=f.getBrowserWindowObject(),e=t.scrollY,i=(So.enableApi(wo),z.getTagStartCutoffMs()),n=O.getElapsedTime();if(h(i)||n<i){z.isCmpRequired()?("none"!==z.getCmpProvider().partner&&te(zt(),"simulate quantcast load delay",D,,_o.enable()):L.updateState("cmp",ge()),z.isIframeCmp()&&br.getIframeCmpManager().load(),ee(z.isPubxaiEnabled(),function(){mn()}),ee(z.isIn2wInjection(),function(){Io(t,z.getIn2wAdvertiserId(),z.getIn2wRatio(),z.getIn2wAdvertiserTimeZone())}),z.isPrebidEnabled()?(i=z.getPrebidTagStartCutoffMs(),s=O.getElapsedTime(),h(i)||s<i?(r=function(e){var i=fe(O.getElapsedTime(),e);L.updateState("prebid",i),cn.enable(function(e){var e=O.getElapsedTime()-e,t=z.getPrebidDownloadCutoffMs();h(t)||e<=t?L.updateState("prebid",pe(i,O.getElapsedTime(),void 0)):(D.log("[PREBID]: Not enabling because library took ".concat(e,"ms to download")),L.updateState("prebid",he()))})},o=Do.getCurrentBreakpoint().name,z.isPrebidEnabledAtBP(o)?r(!1):(D.info("[INIT]: Prebid not enabled at breakpoint ".concat(o,", deferring initialisation")),L.updateState("prebid",de()),m.onBreakpointChanged.subscribe(function(e){e=e.name;z.isPrebidEnabledAtBP(e)&&"deferred"===L.state.prebid._tag&&(D.info("[INIT]: Prebid is enabled for breakpoint ".concat(o,", loading it now")),r(!0))}))):(L.updateState("prebid",he()),D.info("[INIT]: Skipping prebid load because fuse took ".concat(s,"ms to begin loading")))):(L.updateState("prebid",ge()),D.info("[INIT]: Not loading Prebid because it is disabled")),z.isUamEnabled()?(i=z.getUamTagStartCutoffMs(),s=O.getElapsedTime(),h(i)||s<i?(a=z.isUamEnabledAtBP(Do.getCurrentBreakpoint().name)?a(!1):(L.updateState("uam",de()),m.onBreakpointChanged.subscribe(function(e){e=e.name;z.isUamEnabledAtBP(e)&&"deferred"===L.state.uam._tag&&(D.info("[INIT]: UAM is enabled for breakpoint ".concat(e,", loading it now")),a(!0))}))):(L.updateState("uam",he()),D.info("[INIT]: Deferring UAM load because fuse took ".concat(s,"ms to begin loading")))):(L.updateState("uam",ge()),D.info("[INIT]: Not loading Uam because it is disabled")),z.isYandexEnabled()?(L.updateState("gpt",ge()),c=fe(O.getElapsedTime()),L.updateState("yandex",c),window.yaContextCb?L.updateState("yandex",pe(c,O.getElapsedTime(),void 0)):((d=(i=f.getBrowserWindowObject().document).createElement("script")).innerHTML="window.yaContextCb=window.yaContextCb||[]",i.head.appendChild(d),(d=i.createElement("script")).src="https://yandex.ru/ads/system/context.js",d.async=!0,i.head.appendChild(d),u=setInterval(function(){var e;null!=(e=null==(e=window.Ya)?void 0:e.Context)&&e.AdvManager&&(L.updateState("yandex",pe(c,O.getElapsedTime(),void 0)),clearInterval(u))},100))):(L.updateState("yandex",ge()),Bo(),E(function(){Oi.enableIfApplicable()})),ee(z.isConfiantEnabled(),function(){Ni.enable(z.getConfiantId())}),ee(z.isId5Enabled(),function(){Hi.enable()}),ee(z.isIdentityEnabled(),,ee(z.getAfsSettings().enabled,,ee(z.isResponsiveEnabled(),function(){D.info("[INIT]: Enabling responsive"),A.configureResponsive()}),ee(z.isPubstackEnabled(),,z.isArctagEnabled()&&z.isPrebidEnabled()?fn.enable():D.info("[INIT]: Not loading Arctag because it(or prebid) is disabled"),xo.setIsLowDwellPage(Oo.isLowDwellUrl(t.location.toString()));var r,o,s,a,u,c,l,d,g,i=D;z.getV2CompatOverrides(),A.getApiV3();try{i.log("[INIT][onFuseLoadCallback] Start"),i.debug("[INIT][onFuseLoadCallback] Finish")}catch(e){i.error("[INIT][onFuseLoadCallback] Encountered error during evaluation",e)}z.getUseTelemetry()&&Ro.recordFuseLoad(e),z.isScanDOMOnPageLoad()?(d=document.readyState,g=fe(O.getElapsedTime()),L.updateState("docReadyScan",g),"complete"===d?(D.info("[INIT]: Document state is already 'complete'"),Lo(!1,d,g)):(l=!1,"interactive"===d&&(D.info("[INIT]: Document state is already 'interactive'"),Lo(!(l=!0),d,g)),document.addEventListener("readystatechange",function(){var e=document.readyState,t=(O.setStateStatus("document_readystatechange_".concat(e)),D.info("[INIT]: Received document '".concat(e,"' listener callback")),l);l=!0,Lo(t,e,g)}))):L.updateState("docReadyScan",ge()),z.getIosChromeClickHandle()&&(i=k.getDeviceInfo()).getBrowser()===b.Chrome&&i.getOperatingSystem()===v.IOS&&(D.debug("[INIT]: Monitoring touch for Chrome on IOS"),S.getTouchObserver().monitorTouchDetect(),S.enableFastClick()),m.onInitManagerReady.immediateOrOnce(function(){zo(),z.isWidgetRendererEnabled()&&Ao.init(),wo.initialised=!0,wo.init=!0,wo.loading=!1,O.setStateStatus("tag_initialised"),xo.setTagInitialised(),(Oo.isPageInitCalled()||z.isScanDOMOnPageLoad()||z.isAutoRegistrationEnabled())&&(O.setStateStatus("fuse_trigger_auto_auction_start"),Eo.registerAndQueue(!0,!1,Co),O.setStateStatus("fuse_trigger_auto_auction_finish"),z.isAutoRegistrationEnabled())&&(wo.registerAll(),setInterval(1e3)),O.setStateStatus("on_tag_init_event_start"),So.tagInitEmitter.emit({}),m.onTagInitComplete.emit({tagInitUrl:t.location.href}),O.setStateStatus("on_tag_init_event_finish"),Eo.runAuction();var e=m.onPageInit;e.subscribe(function(){return Po.initInterstitial()}),e.subscribe(,oo.getVideoManager().init(),m.onPageReset.subscribe(})}else D.warn("[INIT]: Fuse will not show ads because it took ".concat(n,"ms before it began loading"));O.setStateStatus("fuse_bootstrap_finish")}z.getUseTelemetry()&&(Ro.prepareBackgroundRequestProcessor(),Ro.prepareRecordingWebVitals()),te(t("fuseDelayInit"),"simulate slow fuse download",D,Mo)});
