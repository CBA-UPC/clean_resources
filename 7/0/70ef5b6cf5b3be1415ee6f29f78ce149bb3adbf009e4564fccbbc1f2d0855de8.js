(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{1344:function(e,a,t){"use strict";t.r(a);var n=t(5),o=t(730),r=t(731),i=t(1098),s=Object(n.defineComponent)({__name:"step-description",props:{currentStep:null},setup:e=>({__sfc:!0,FormWizardStepBase:o.a,FormWizardStepTitle:r.a,FormWizardDescription:i.a})}),p=t(45),c=Object(p.a)(s,(function(){var e=this,a=e._self._c,t=e._self._setupProxy;return a(t.FormWizardStepBase,{scopedSlots:e._u([{key:"title",fn:function(){return[a(t.FormWizardStepTitle,[e._v(e._s("Dlaczego ta okazja jest godna polecenia?"))])]},proxy:!0},{key:"form",fn:function(){return[a(t.FormWizardDescription,{attrs:{placeholder:"Opisz znalezioną okazję własnymi słowami. Postaraj się wytłumaczyć, dlaczego jest najlepsza. Nie ograniczaj się tylko do wklejania tekstu...\nW przypadku ofert z zagranicznych sklepów nie zapomnij dodać w treści ceny zarówno w obcej jak i polskiej walucie ;)","current-step":e.currentStep}})]},proxy:!0}])})}),[],!1,null,null,null);a.default=c.exports}}]);ass:"text--color-charcoalTint size--all-m",attrs:{"is-soft-duplicates":e.isSoftDuplicates}}),t("div",{staticClass:"space--mv-4 bg--color-white bRad--a space--v-2 space--h-2"},e._l(e.threads,(function(a){return t("ThreadDuplicatesItem",{key:a.threadId,staticClass:"size--all-m space--h-2",attrs:{thread:a},on:{click:function(t){return e.$emit("visit-duplicate")}}})})),1),t("ThreadDuplicatesButtonsTranslations",{attrs:{"is-soft-duplicates":e.isSoftDuplicates,type:e.type},scopedSlots:e._u([{key:"default",fn:function({continueLabel:a,cancelLabel:i}){return[t("div",{staticClass:"hAlign--all-r"},[t("BaseButton",{directives:[{name:"track",rawName:"v-track:continue.click.click-ga",arg:"continue",modifiers:{click:!0,"click-ga":!0}}],staticClass:"width--all-12 width--fromW2-auto space--mr-2",attrs:{variant:"primary",mode:"brand",disabled:e.disabled},on:{click:function(t){return e.$emit("continue")}}},[e._v(" "+e._s(a)+" ")]),t("BaseButton",{directives:[{name:"track",rawName:"v-track:cancel.click.click-ga",arg:"cancel",modifiers:{click:!0,"click-ga":!0}}],staticClass:"width--all-12 width--fromW2-auto space--mt-1 space--fromW2-mt-0",attrs:{variant:"secondary",mode:"danger"},on:{click:function(t){return e.$emit("cancel")}}},[e._v(" "+e._s(i)+" ")])],1)]}}])})],1)}),[],!1,null,null,null);t.a=m.exports},1051:function(e,t,a){"use strict";var i=a(5),s=a(958),n=a(28),r=a(165),l=Object(i.defineComponent)({__name:"form-wizard-progress-bar",props:{isLoading:{type:Boolean},hasErrors:{type:Boolean}},emits:["end"],setup(e,t){let{emit:a}=t;const l=e,{startLoader:c,endLoader:o,progressBarPercentage:u}=Object(r.a)();async function d(){await Object(n.c)(),c()}function p(){o(),setTimeout((()=>{a("end")}),1e3)}return Object(i.onMounted)(d),Object(i.watch)((()=>l.isLoading),((e,t)=>{!t||e||l.hasErrors||p()})),{__sfc:!0,INTERVAL_FREQUENCY:1e3,props:l,emit:a,startLoader:c,endLoader:o,progressBarPercentage:u,startProgressBar:d,animateToTheEnd:p,ProgressBar:s.a}}}),c=a(44),o=Object(c.a)(l,(function(){var e=this._self._c,t=this._self._setupProxy;return e(t.ProgressBar,{staticClass:"form-wizard-progress-bar",attrs:{value:t.progressBarPercentage,color:"brandPrimary"}})}),[],!1,null,null,null);t.a=o.exports},1052:function(e,t,a){"use strict";var i=a(5),s=a(163),n=Object(i.defineComponent)({__name:"form-wizard-progress-bar-info",props:{list:null,intervalFrequency:{default:1500}},setup(e){const t=e,a=Object(i.ref)(0);function n(){let e=a.value+1;e===t.list.length&&(e=0),a.value=e}return Object(s.a)(n,t.intervalFrequency,{immediate:!0}),{__sfc:!0,props:t,index:a,changeInfoLabel:n}}}),r=a(44),l=Object(r.a)(n,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"lbox--v-5"},[t("BaseIcon",{staticClass:"text--color-brandPrimary space--mr-3",attrs:{name:e.list[a.index].icon}}),t("span",[e._v(e._s(e.list[a.index].label))])],1)}),[],!1,null,null,null);t.a=l.exports},1274:function(e,t,a){"use strict";a.r(t);var i=a(5),s=a(728),n=a(729),r=a(4),l=a(508),c=a(506),o=a(1050),u=a(807),d=a(1051),p=a(1052),m=a(17),f=a(886),h=a(841),k=a(960),v=a(842),g=a(566),b=Object(i.defineComponent)({__name:"step-link-form",props:{isEditing:{type:Boolean},currentStep:null},emits:["change-link","continue"],setup(e,t){let{expose:a,emit:s}=t;const n=e,b=[{icon:"duplicate",label:"Kontrollera efter duplikatavtal"},{icon:"yen",label:"Hämtningspris"},{icon:"gallery",label:"Lägg till bilder"}],_=Object(i.inject)("$v"),L=Object(g.j)(),S=Object(i.ref)(L.value.link),y=Object(i.ref)(""),C=Object(i.ref)(!1),x=Object(i.ref)(!1),D=Object(i.ref)(null),O=Object(i.computed)((()=>!x.value&&1===n.currentStep.visitedCount&&!n.isEditing)),j=Object(i.computed)((()=>S.value.length<4)),w=Object(i.computed)((()=>n.isEditing?b.filter((e=>"duplicate"===e.icon)):b)),B=()=>{L.value.link="",S.value="",C.value=!1,E(),F()},E=()=>{y.value="",_.clear("link"),n.isEditing||r.a.dispatch("threadForm/removeAllGalleryImages")},F=()=>{x.value=!1},T=async()=>{await _.validate("link",S.value)},I=async()=>{s("change-link",S.value),await T()},P=async()=>{L.value.link!==S.value?(await T(),!_.error.link&&S.value?(y.value=S.value,x.value=!0):F()):A(D.value.$el)},W=e=>{B(),A(e)},A=e=>{s("continue",e)};return a({linkValue:S,submit:P,submitWithoutLink:W,isLinkCheckingProcess:x}),{__sfc:!0,DEAL_LIST:b,$v:_,props:n,emit:s,thread:L,linkValue:S,linkValueToValidate:y,hasErrors:C,isLinkCheckingProcess:x,linkInput:D,canSubmit:O,isSubmitBtnDisabled:j,progressBarInfolist:w,resetLink:B,resetLinkData:E,resetLinkCheckProcessStatus:F,pasteLink:async e=>{S.value=e.clipboardData.getData("text/plain"),await I(),n.isEditing||P()},validateLink:T,changeLink:I,submit:P,continueWithLink:()=>{L.value.link=S.value,A(D.value.$el),F()},submitWithoutLink:W,setLinkErrors:e=>{let{hasErrorsFromRequest:t}=e;C.value=t},continueNextStep:A,FormRow:l.o,FormInputLabeled:l.i,FormInputIcon:l.h,FormInputButton:l.g,BaseButton:c.a,ThreadDuplicates:o.a,ControlLinkErrors:u.a,FormWizardProgressBar:d.a,FormWizardProgressBarInfo:p.a,DEAL_TYPE:m.a,MERCHANT_GENERIC_OFFER_TYPE:m.g,CheckLinkDuplicates:f.a,CheckBlockedLinks:h.a,GetLinkSuggestion:k.a,GetLinkMerchantSuggestion:v.a}}}),_=a(44),L=Object(_.a)(b,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"width--all-12 width--max-pageNarrow"},[t("div",{staticClass:"flex--grow-1 space--mb-3"},[t("form",{directives:[{name:"track",rawName:"v-track:formField",value:{name:"link"},expression:"{ name: 'link' }",arg:"formField"}],staticClass:"width--all-12",on:{submit:function(e){return e.preventDefault(),a.submit.apply(null,arguments)}}},[t("div",{staticClass:"flex boxAlign-ai--all-c"},[t("div",{staticClass:"flex--grow-1"},[t("ol",[t(a.FormRow,[t(a.FormInputLabeled,{directives:[{name:"track",rawName:"v-track:submissionFieldSelected.focus",arg:"submissionFieldSelected",modifiers:{focus:!0}}],ref:"linkInput",attrs:{id:"link",placeholder:"https: //www.site.com/greatdeal ...",name:"link",inputmode:"url",autofocus:!!a.linkValue},on:{change:a.changeLink,paste:function(e){return e.preventDefault(),a.pasteLink.apply(null,arguments)}},scopedSlots:e._u([{key:"prependIcon",fn:function(){return[t(a.FormInputIcon,{attrs:{name:"link"}})]},proxy:!0},{key:"appendButton",fn:function(){return[a.linkValue?t(a.FormInputButton,{staticClass:"search-clear-button",on:{click:a.resetLink}}):e._e()]},proxy:!0}]),model:{value:a.linkValue,callback:function(e){a.linkValue="string"==typeof e?e.trim():e},expression:"linkValue"}})],1)],1)]),a.canSubmit?t("div",{staticClass:"hide--toW2 space--ml-2"},[t(a.BaseButton,{directives:[{name:"track",rawName:"v-track:submitWithLink.click",arg:"submitWithLink",modifiers:{click:!0}}],staticClass:"width--all-12",attrs:{variant:"primary",mode:"brand",type:"submit",disabled:a.isSubmitBtnDisabled}},[e._v(" "+e._s("Dela")+" ")])],1):e._e()]),a.linkValueToValidate?t(a.CheckBlockedLinks,{staticClass:"space--mt-3",attrs:{link:a.linkValueToValidate},on:{request:a.setLinkErrors},scopedSlots:e._u([{key:"default",fn:function({isLoading:i,hasErrors:s,errors:n}){return[s?t(a.ControlLinkErrors,{attrs:{"error-messages":n},on:{cancel:a.resetLink}}):t(a.CheckLinkDuplicates,{attrs:{link:a.linkValueToValidate,filter:{type:{ne:a.MERCHANT_GENERIC_OFFER_TYPE}}},scopedSlots:e._u([{key:"default",fn:function({isLoading:n,hasDuplicates:r,duplicates:l,isSoftDuplicates:c}){return[t("div",[e.isEditing?e._e():t(a.GetLinkSuggestion,{attrs:{link:a.linkValueToValidate,"keep-alive":!i}}),t(a.GetLinkMerchantSuggestion,{attrs:{link:a.linkValueToValidate,"keep-alive":!i}}),r||s?e._e():t("div",{staticClass:"space--mt-3"},[t(a.FormWizardProgressBar,{attrs:{"is-loading":i||n,"has-errors":s||r},on:{end:a.continueWithLink}}),t("div",{staticClass:"space--mt-5 hAlign--all-c"},[t(a.FormWizardProgressBarInfo,{attrs:{list:a.progressBarInfolist}})],1)],1),r?t(a.ThreadDuplicates,{attrs:{type:a.DEAL_TYPE,threads:l,"is-soft-duplicates":c},on:{cancel:a.resetLink,continue:a.continueWithLink}}):e._e()],1)]}}],null,!0)})]}}],null,!1,998225480)}):e._e(),t(a.ControlLinkErrors,{attrs:{"error-messages":a.$v.messages.link},on:{cancel:a.resetLink}}),a.canSubmit?t("div",{staticClass:"hide--fromW2 space--mt-3"},[t(a.BaseButton,{staticClass:"width--all-12 space--mb-3",attrs:{variant:"primary",mode:"brand",type:"submit",disabled:a.isSubmitBtnDisabled}},[e._v(" "+e._s("Dela")+" ")])],1):e._e()],1)]),a.canSubmit?t("div",{staticClass:"hAlign--all-c"},[t(a.BaseButton,{directives:[{name:"track",rawName:"v-track:submitWithoutLink.click",arg:"submitWithoutLink",modifiers:{click:!0}}],attrs:{variant:"tertiary",mode:"default"},on:{click:a.submitWithoutLink}},[e._v(" "+e._s("Jag har ingen länk")+" ")])],1):e._e()])}),[],!1,null,null,null),S=L.exports,y=Object(i.defineComponent)({__name:"step-link",props:{isEditing:{type:Boolean},currentStep:null},setup:e=>({__sfc:!0,FormWizardStepBase:s.a,FormWizardStepTitle:n.a,StepLinkForm:S})}),C=Object(_.a)(y,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t(a.FormWizardStepBase,{attrs:{"align-center":""},scopedSlots:e._u([{key:"title",fn:function(){return[t(a.FormWizardStepTitle,{staticClass:"hAlign--all-c"},[e._v(" "+e._s("Dela en deal med tusentals människor")+" ")])]},proxy:!0},{key:"sub-title",fn:function(){return[t("p",{staticClass:"size--all-l size--fromW3-xxl text--color-charcoalTint hAlign--all-c"},[e._v(" "+e._s("Klistra in länken där andra användare kan köpa dealen eller ta reda på mer information")+" ")])]},proxy:!0},{key:"form",fn:function(){return[e._t("default",(function(){return[t(a.StepLinkForm,{ref:"form",attrs:{"is-editing":e.isEditing,"current-step":e.currentStep},on:{continue:function(t){return e.$emit("continue",t)},"change-link":function(t){return e.$emit("trap")}}})]}))]},proxy:!0}],null,!0)})}),[],!1,null,null,null);t.default=C.exports},163:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var i=a(5);function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{immediate:s=!1}=a,n=Object(i.ref)(!1);let r=null;function l(){n.value&&c(),n.value=!0,r=setInterval(e,t)}function c(){n.value=!1,clearInterval(r)}return s&&l(),Object(i.onUnmounted)(c),{isActive:n,set:l,clear:c}}},165:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var i=a(5),s=a(163),n=function(e){return e[e.NOT_STARTED=0]="NOT_STARTED",e[e.MAX_PROGRESS=99]="MAX_PROGRESS",e[e.FINISHED=100]="FINISHED",e}(n||{});const r=function(){let{timeConstant:e=1e4,stopOnMaxProgress:t=!1,intervalFrequency:a=1e3}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=Object(i.ref)(0),l=Object(i.ref)(0),c=Object(i.ref)(!1),{set:o,clear:u}=Object(s.a)(d,a);function d(){r.value+=a;const i=100*(1-Math.exp(-1*r.value/e));l.value=t?Math.min(i,n.MAX_PROGRESS):i}return{startLoader:function(){u(),d(),o(),c.value=!0},completeLoader:function(){u(),l.value=n.MAX_PROGRESS,setTimeout((()=>{l.value=n.FINISHED,c.value=!1}),a)},endLoader:function(){u(),l.value=n.FINISHED,c.value=!1},progressBarPercentage:l,isLoaderInProgress:c}}},569:function(e,t,a){var i=a(757),s=a(306);e.exports=function(e,t,a){return void 0===a&&(a=t,t=void 0),void 0!==a&&(a=(a=s(a))==a?a:0),void 0!==t&&(t=(t=s(t))==t?t:0),i(s(e),t,a)}},728:function(e,t,a){"use strict";var i={props:{alignCenter:{type:Boolean,default:!1}},computed:{containerClasses(){return{"boxAlign-ai--all-c":this.alignCenter}},hasTitle(){return!!this.$scopedSlots.title},hasSubTitle(){return!!this.$scopedSlots["sub-title"]}}},s=a(44),n=Object(s.a)(i,(function(){var e=this,t=e._self._c;return t("Transition",e._g({attrs:{appear:"",name:"slide-in","leave-active-class":"hide","leave-to-class":"hide"}},e.$listeners),[t("section",{staticClass:"flex flex--grow-1 flex--shrink-0 boxAlign-jc--all-c width--all-12",class:e.containerClasses},[t("div",{staticClass:"flex flex--dir-col space--fromW2-h-4 space--h-3 space--fromW3-t-6 space--b-4 boxAlign-ai--all-c width--all-12"},[e.hasTitle?t("div",{staticClass:"space--mb-4 width--all-12 width--max-pageNarrow"},[e._t("title")],2):e._e(),e.hasSubTitle?t("div",{staticClass:"space--mb-4 width--all-12 width--max-pageNarrow"},[e._t("sub-title")],2):e._e(),e._t("form"),e._t("footnotes")],2)])])}),[],!1,null,null,null);t.a=n.exports},729:function(e,t,a){"use strict";var i=a(44),s=Object(i.a)({},(function(e,t){return e("h1",{staticClass:"size--all-xxxl text--color-charcoal text--b",class:t.data.staticClass},[t._t("default")],2)}),[],!0,null,null,null);t.a=s.exports},757:function(e,t){e.exports=function(e,t,a){return e==e&&(void 0!==a&&(e=e<=a?e:a),void 0!==t&&(e=e>=t?e:t)),e}},886:function(e,t,a){"use strict";var i=a(5),s=a(543),n=a(615),r=a(714);const l=()=>{let e=null;const t=Object(i.ref)([]),a=Object(i.ref)(!1),{isLoading:l,setLoader:c}=Object(s.a)(),o=()=>{t.value=[],a.value=!1,l.value&&Object(r.a)(e)};return{duplicates:t,checkDuplicates:(i,s)=>{i&&(o(),((i,s)=>{e=Object(n.a)(i,s),e.request.then((e=>{e&&(t.value=e.threads,a.value=e.isSoftDuplicates)})).finally(c())})(i,s))},resetDuplicates:o,isLoading:l,isSoftDuplicates:a}};var c=Object(i.defineComponent)({__name:"check-link-duplicates",props:{link:null,filter:null},setup(e){const t=e,{duplicates:a,isLoading:s,isSoftDuplicates:n,checkDuplicates:r,resetDuplicates:c}=l(),o=Object(i.computed)((()=>!!a.value.length));return Object(i.watch)((()=>t.link),(()=>{r(t.link,t.filter)}),{immediate:!0}),Object(i.onBeforeUnmount)((()=>{c()})),{__sfc:!0,props:t,duplicates:a,isLoading:s,isSoftDuplicates:n,checkDuplicates:r,resetDuplicates:c,hasDuplicates:o}}}),o=a(44),u=Object(o.a)(c,(function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",[e._t("default",null,{isLoading:a.isLoading,duplicates:a.duplicates,isSoftDuplicates:a.isSoftDuplicates,hasDuplicates:a.hasDuplicates,reset:a.resetDuplicates})],2)}),[],!1,null,null,null);t.a=u.exports},958:function(e,t,a){"use strict";var i=a(569),s=a.n(i),n={props:{value:{type:Number,required:!0},max:{type:Number,default:100},color:{type:String,default:""}},computed:{percentage(){return Math.round(100*s()(this.value/this.max,0,1))},colorClass(){return this.color?"text--color-".concat(this.color):null}}},r=a(44),l=Object(r.a)(n,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"progressBar",class:e.colorClass,attrs:{"aria-label":`${e.percentage}%`}},[t("div",{staticClass:"progressBar-progress",style:{right:100-e.percentage+"%"}})])}),[],!1,null,null,null);t.a=l.exports},960:function(e,t,a){"use strict";var i=a(93),s=a(653),n=a(714),r=a(610);let l=null,c=null;var o={props:{link:{type:String,default:""},keepAlive:{type:Boolean,default:!1}},watch:{link:{handler:"linkChange",immediate:!0}},beforeDestroy(){this.keepAlive||this.cancelRequest()},methods:Object.assign({},Object(i.b)("threadForm",["getFormSuggestionsFromLink","getProductSpecificationFromLink","clearFormSuggestionsFromLink"]),{linkChange(e,t){e!==t&&(this.reset(),this.link&&(this.request(),this.requestProductSpecification()))},async request(){l=await this.getFormSuggestionsFromLink({url:this.link}),l&&l.request.then(r.a).catch((()=>{})).finally(Object(s.a)(this,"isLoading"))},async requestProductSpecification(){c=await this.getProductSpecificationFromLink({url:this.link}),c&&c.request.catch((()=>{}))},cancelRequest(){this.isLoading&&(Object(n.a)(l),Object(n.a)(c))},reset(){this.cancelRequest(),this.clearFormSuggestionsFromLink()}}),render(){return this.$scopedSlots.default?this.$scopedSlots.default({isLoading:this.isLoading}):null}},u=a(44),d=Object(u.a)(o,undefined,undefined,!1,null,null,null);t.a=d.exports}}]);