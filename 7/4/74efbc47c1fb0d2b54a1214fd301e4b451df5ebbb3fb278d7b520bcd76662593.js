"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[5249],{45249:function(e,n,t){t.r(n),t.d(n,{default:function(){return ue}});var a=t(90297),i=t(91345),o=t(63694),r=t(1413),s=t(24193),l=t(46417);function d(){var e=(0,a.l)(i._N);return(0,l.jsx)(s.Z,{variant:"outlined",sx:{textTransform:"none",marginRight:"12px",paddingTop:"4px",paddingBottom:"4px"},size:"small","data-test":"select-mode","aria-label":"Select Mode",id:"select-mode",onClick:function(){e.media=!0,(0,i._N)((0,r.Z)({},e))},children:"Select"})}var u=t(63950),c=t(58467),m=t(18248),p=t(48509);function b(e){var n=e.username,t=e.defaultAlbum,a=e.disabled,o=(0,c.UO)().albumId,r=(0,p.Z)();return n?(0,l.jsxs)("label",{htmlFor:"contained-button-file",children:[(0,l.jsx)("input",{accept:"image/*, .heic, .mov, .mp4",style:{display:"none"},id:"contained-button-file",type:"file",multiple:!0,onChange:function(e){try{var n;if(null===(n=e.target.files)||void 0===n||!n.length||!t)return;r.uploadMultiple(e.target.files,o||t)}catch(d){var a,s=(null===(a=d.response)||void 0===a?void 0:a.data)||"There was an error while trying to upload your image.",l={id:(0,m.Z)(),message:s,severity:"error"};(0,i.sh)([l])}},"data-test":"file-upload",disabled:a}),(0,l.jsxs)(s.Z,{sx:{textTransform:"none",marginRight:"12px"},component:"span","data-test":"appbar-upload","aria-label":"Upload Media",id:"appbar-upload",size:"small",variant:"outlined",disabled:a,children:[(0,l.jsx)(u.Z,{style:{marginRight:8}}),"Upload"]})]}):null}b.defaultProps={defaultAlbum:void 0,disabled:!1};var h=t(20716),f=t(29439),v=t(43997),x=t(57451),Z=t(47131),g=t(85582),j=t(47313),C=t(4151),y=t(36124),w=t(30083),S=t(37484),P=t(40993),A=t(40466),I=t(66149),D=t(4117),k=t(96467),E=t(33604),F=t(51405),M=t(16783),T=t(12164),U=t(94375);function z(e){var n=e.onCompleted,t=e.disabled,a=(0,j.useState)(!1),i=(0,f.Z)(a,2),o=i[0],r=i[1],d=(0,j.useState)(),c=(0,f.Z)(d,2),m=c[0],p=c[1],b=(0,j.useState)(),h=(0,f.Z)(b,2),v=h[0],x=h[1],Z=(0,U.Z)(),g=Z.stopPropagation,C=Z.upload,y=(0,T.Z)().currentAlbum,w=function(){r(!1)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(F.Z,{onClick:function(){r(!0),n&&n()},"data-test":"upload-by-url-menu-item",disabled:t,children:[(0,l.jsx)(u.Z,{style:{marginRight:8}})," Upload By Url"]}),(0,l.jsxs)(I.Z,{open:o,onClose:w,children:[(0,l.jsx)(E.Z,{children:"Upload by Url"}),(0,l.jsx)(k.Z,{children:(0,l.jsx)(M.Z,{autoFocus:!0,error:Boolean(v),fullWidth:!0,helperText:v,label:"Url of Media",onChange:required:!0,sx:{marginTop:2,minWidth:300}})}),(0,l.jsxs)(D.Z,{children:[(0,l.jsx)(s.Z,{onClick:w,color:"inherit",children:"Cancel"}),(0,l.jsx)(s.Z,{onClick:function(e){g(e),y?m?(C(m,y.id),r(!1)):x("Url is required"):x("Unable to determine upload album")},disabled:!m,children:"Upload"})]})]})]})}function R(e){var n=e.anchorEl,t=e.handleClose,a=(0,o.Z)(),i=(0,c.s0)(),r=(0,c.UO)().albumId,s=r||a.defaultAlbum,d=[r||""],u=s===a.defaultAlbum;return a.username&&s?(0,l.jsxs)(g.Z,{anchorEl:n,open:Boolean(n),onClose:t,keepMounted:!0,children:[(0,l.jsxs)(x.Z,{smUp:!0,children:[(0,l.jsx)(y.Z,{ids:d,disabled:u,isPasswordProtectedDisabled:a.isFreeUser,onCompleted:t}),(0,l.jsx)(P.Z,{ids:d,username:a.username,disabled:a.isShareDisabled,onCompleted:t}),(0,l.jsx)(w.Z,{ids:d,disabled:u,onCompleted:t}),(0,l.jsx)(C.Z,{ids:d,disabled:u,onCompleted:t})]}),(0,l.jsx)(S.Z,{ids:d,onCompleted:function(){t(),i("/u/".concat(a.username))},disabled:a.isMoveDisabled||u}),(0,l.jsx)(A.Z,{albumId:s,username:a.username,onCompleted:t,disabled:a.isSlideShowDisabled}),(0,l.jsx)(z,{disabled:a.isUploadDisabled})]}):null}function _(){var e=(0,j.useState)(null),n=(0,f.Z)(e,2),t=n[0],a=n[1];return(0,l.jsxs)(x.Z,{mdUp:!0,children:[(0,l.jsx)(Z.Z,{color:"inherit",onClick:function(e){a(e.currentTarget)},"data-test":"appbar-dropdown-toggle",id:"appbar-dropdown-toggle",size:"large",children:(0,l.jsx)(v.Z,{})}),(0,l.jsx)(R,{handleClose:function(){a(null)},anchorEl:t})]})}z.defaultProps={onCompleted:void 0,disabled:!1};var B=t(40623),O=t(15507),V=t(96224),L=t(42911),H=t(43361),N=t(49872),q=t(98744);function X(e){var n=e.isPublic,t=(0,o.Z)(),a=(0,c.s0)(),i=(0,c.UO)(),r=i.userId,s=i.albumId||t.defaultAlbum,d=s===t.defaultAlbum,u=return t.username&&s?n?(0,l.jsx)(N.Z,{albumId:s,username:r,disabled:t.isSlideShowDisabled}):(0,l.jsxs)(x.Z,{smDown:!0,children:[(0,l.jsx)(O.Z,{ids:[s],disabled:d,isPasswordProtectedDisabled:t.isFreeUser}),(0,l.jsx)(H.Z,{ids:[s],username:t.username,disabled:d||t.isShareDisabled}),(0,l.jsx)(V.Z,{ids:[s],disabled:d}),(0,l.jsx)(B.Z,{ids:[s],disabled:d,onCompleted:u}),(0,l.jsxs)(x.Z,{mdDown:!0,children:[(0,l.jsx)(L.Z,{ids:[s],disabled:t.isMoveDisabled||d,onCompleted:u}),(0,l.jsx)(N.Z,{albumId:s,username:t.username,disabled:t.isSlideShowDisabled}),(0,l.jsx)(q.Z,{disabled:t.isUploadDisabled})]})]}):null}X.defaultProps={isPublic:!1};var W=t(61511),Y=t(99123),G=t(28422);function K(e){var n=e.username,t=e.ids,a=e.isDisabled,i=e.deselectAllMedia,o=e.onCompleted,r=(0,c.s0)(),s=(0,j.useState)(!0),d=(0,f.Z)(s,2),u=d[0],m=d[1],p=(0,W.x)(),b=(0,j.useRef)(p);(0,j.useEffect)((function(){if(1===t.length){var e=b.current.readFragment({id:"Image:".concat(t[0]),fragment:G.xDo}),n=!(null!==e&&void 0!==e&&e.isVideoType);m(!n)}else m(!0)}),[n,t]);return(0,l.jsxs)(F.Z,{disabled:a||u,onClick:function(){i&&i(),r("/u/".concat(n,"/editor/").concat(t[0])),o&&o()},children:[(0,l.jsx)(Y.Z,{style:{marginRight:8}})," Edit"]})}K.defaultProps={deselectAllMedia:void 0,onCompleted:void 0,isDisabled:!1};var Q=t(98636),$=t(46923),J=t(16031),ee=t(58965);function ne(e){var n=e.ids,t=e.deselectAllMedia,a=e.onCompleted,i=e.isDisabled,o=(0,j.useState)(!1),r=(0,f.Z)(o,2),s=r[0],d=r[1],u=function(){d(!1)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(F.Z,{onClick:function(){d(!s),a&&a()},disabled:i||(0,J.isEmpty)(n),"data-test":"move",children:[(0,l.jsx)(Q.Z,{style:{marginRight:8}})," Move to Album"]}),(0,l.jsx)($.ZP,{anchor:"right",open:s,onClose:u,PaperProps:{sx:{width:"400px",maxWidth:"100%"}},children:(0,l.jsx)(ee.Z,{imageIds:n,onClose:u,handleMoveSuccess:function(){t&&t(),d(!1),a&&a()}})})]})}ne.defaultProps={deselectAllMedia:void 0,onCompleted:void 0,isDisabled:!1};var te=t(93433),ae=t(96420),ie=t(16227);function oe(e){var n=e.isDisabled,t=e.ids,a=e.onCompleted,o=(0,W.x)(),r=(0,j.useRef)(o),s=(0,j.useState)([]),d=(0,f.Z)(s,2),u=d[0],c=d[1],p=(0,j.useState)([]),b=(0,f.Z)(p,2),h=b[0],v=b[1],x=(0,ae.t)(G.KTJ,{fetchPolicy:"no-cache",onError:function(){var e={id:(0,m.Z)(),message:"There was a problem retrieving your image. Please try again later.",severity:"error"};(0,i.sh)([e])},onCompleted:function(e){var n=e.getDirectLinks.map(();if(n.push.apply(n,(0,te.Z)(h)),!(0,J.isEmpty)(n)){var t="https://printshoplab.printshoplab.com/prints/quick-order?source=".concat(n.join(";"));window.open(t,"_blank")}}}),Z=(0,f.Z)(x,2),g=Z[0],C=Z[1];(0,j.useEffect)((function(){var e=[],n=[];t.forEach((function(t){var a=r.current.readFragment({id:"Image:".concat(t),fragment:G.xDo});null!==a&&void 0!==a&&a.originalImage.url.toLowerCase().includes(".heic")?e.push(a.originalImage.url):null!==a&&void 0!==a&&a.isVideoType||n.push(t)})),c(n),v(e)}),[t]);return(0,l.jsxs)(F.Z,{disabled:n||(0,J.isEmpty)(u)&&(0,J.isEmpty)(h)||C.loading,onClick:function(){g({variables:{ids:u}}),a&&a()},"data-test":"order-prints",children:[(0,l.jsx)(ie.Z,{style:{marginRight:8}})," Buy Prints"]})}function re(e){var n=e.anchorEl,t=e.handleClose,a=(0,o.Z)(),i=(0,h.Z)(),r=i.deselectAll,s=i.selectedMedia,d=(0,c.UO)().albumId||a.defaultAlbum;return a.username&&d?(0,l.jsxs)(g.Z,{anchorEl:n,open:Boolean(n),onClose:t,keepMounted:!0,children:[(0,l.jsx)(K,{deselectAllMedia:r,ids:s,username:a.username,isDisabled:a.isEditDisabled,onCompleted:t}),(0,l.jsx)(ne,{deselectAllMedia:r,ids:s,onCompleted:t,isDisabled:a.isMoveDisabled}),(0,l.jsx)(A.Z,{albumId:d,username:a.username,onCompleted:t,disabled:a.isSlideShowDisabled}),(0,l.jsx)(oe,{ids:s,onCompleted:t}),(0,l.jsx)(z,{onCompleted:t,disabled:a.isUploadDisabled})]}):null}function se(){var e=(0,j.useState)(null),n=(0,f.Z)(e,2),t=n[0],a=n[1];return(0,l.jsxs)(x.Z,{mdUp:!0,children:[(0,l.jsx)(Z.Z,{color:"inherit",onClick:"data-test":"appbar-dropdown-toggle",id:"appbar-dropdown-toggle",size:"large",children:(0,l.jsx)(v.Z,{})}),(0,l.jsx)(re,{handleClose:anchorEl:t})]})}oe.defaultProps={onCompleted:void 0,isDisabled:!1};var le=t(17012),de=t(11219);function ue(e){var n,t,r,s,u,c=e.isPublic,m=(0,h.Z)().isEmpty,p=(0,a.l)(i._N),f=p.media||p.albums||!m(),v=(0,i.at)(),x=null===v||void 0===v||null===(n=v.profile)||void 0===n||null===(t=n.subscription)||void 0===t?void 0:t.plan,Z=(null===x||void 0===x?void 0:x.planId.toLowerCase())||"",g=(null===v||void 0===v||null===(r=v.profile)||void 0===r?void 0:r.firstName)||"",j=(null===v||void 0===v||null===(s=v.profile)||void 0===s?void 0:s.lastName)||"",C="VALID"===(null===v||void 0===v||null===(u=v.profile)||void 0===u?void 0:u.emailStatus),y=(0,o.Z)();return y.username?(0,l.jsxs)(l.Fragment,{children:[C&&(0,l.jsxs)(l.Fragment,{children:[!c&&!f&&(0,l.jsx)(b,{username:y.username,defaultAlbum:y.defaultAlbum,disabled:y.isUploadDisabled}),!f&&(0,l.jsx)(d,{})]}),C&&(f?(0,l.jsx)(le.Z,{isPublic:c}):(0,l.jsx)(X,{isPublic:c})),C&&(f?(0,l.jsx)(se,{}):(0,l.jsx)(_,{})),(0,l.jsx)(de.Z,{planId:Z,username:y.username,firstName:g,lastName:j,isEmailVerified:C})]}):null}},40623:function(e,n,t){t.d(n,{Z:function(){return p}});var a=t(29439),i=t(96217),o=t(47131),r=t(61689),s=t(16031),l=t(47313),d=t(92216),u=t(70749),c=t(37673),m=t(46417);function p(e){var n=e.ids,t=e.onCompleted,p=e.disabled,b=e.color,h=void 0===b?"inherit":b,f=(0,l.useState)(!1),v=(0,a.Z)(f,2),x=v[0],Z=v[1],g=(0,d.Z)().mutation,j=(0,u.Z)().mutation;return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(o.Z,{color:h,"aria-label":"Move to Trash",onClick:function(){Z(!x)},disabled:p||(0,s.isEmpty)(n),"data-test":"delete",id:"delete-button",children:(0,m.jsx)(r.Z,{title:"Move to Trash",arrow:!0,children:(0,m.jsx)(i.Z,{})})}),(0,m.jsx)(c.Z,{isOpen:x,onSecondayAction:function(){j({variables:{ids:n}}),Z(!1),t&&t()},onSecondayActionText:(0,m.jsx)("p",{children:"Delete Album & keep content in My Bucket"}),onSubmit:function(){g({variables:{ids:n}}),Z(!1),t&&t()},onSubmitText:(0,m.jsx)("p",{children:"Delete Album & its content"}),title:"Are you sure you want to delete?",close:function(){Z(!1)},subTitle:"You are about to delete ".concat(n.length," ").concat(1===n.length?"album":"albums",". This action cannot be undone.")})]})}p.defaultProps={color:"inherit",onCompleted:void 0,disabled:!1}},15507:function(e,n,t){t.d(n,{Z:function(){return c}});var a=t(29439),i=t(47196),o=t(61689),r=t(46923),s=t(47131),l=t(47313),d=t(83041),u=t(46417);function c(e){var n=e.ids,t=e.color,c=e.onCompleted,m=e.disabled,p=e.isPasswordProtectedDisabled,b=(0,l.useState)(!1),h=(0,a.Z)(b,2),f=h[0],v=h[1],x=function(){v(!1)};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(s.Z,{color:t,"aria-label":"Album Details",onClick:disabled:m||1!==n.length,id:"details-button","data-test":"details-button",children:(0,u.jsx)(o.Z,{title:"Details",arrow:!0,children:(0,u.jsx)(i.Z,{})})}),(0,u.jsx)(r.ZP,{anchor:"right",open:f,onClose:x,PaperProps:{sx:{width:"400px",maxWidth:"100%"}},children:(0,u.jsx)(d.Z,{id:n[0],isPasswordProtectedDisabled:p,onClose:x})})]})}c.defaultProps={color:"inherit",onCompleted:void 0,disabled:!1,isPasswordProtectedDisabled:!1}},96224:function(e,n,t){t.d(n,{Z:function(){return c}});var a=t(29439),i=t(42996),o=t(61689),r=t(47131),s=t(16031),l=t(47313),d=t(64641),u=t(46417);function c(e){var n=e.ids,t=e.color,c=void 0===t?"inherit":t,m=e.onCompleted,p=e.disabled,b=(0,l.useState)(!1),h=(0,a.Z)(b,2),f=h[0],v=h[1],x=(0,d.Z)().downloadMultiple;return(0,u.jsx)(r.Z,{color:c,"aria-label":"Download",disabled:p||(0,s.isEmpty)(n),onClick:function(){x({imageIds:null,albumIds:n}),v(!f),m&&m()},"data-test":"download",id:"download-button",children:(0,u.jsx)(o.Z,{title:"Download",arrow:!0,children:(0,u.jsx)(i.Z,{})})})}c.defaultProps={color:"inherit",onCompleted:void 0,disabled:!1}},42911:function(e,n,t){t.d(n,{Z:function(){return m}});var a=t(29439),i=t(34518),o=t(61689),r=t(46923),s=t(47131),l=t(16031),d=t(47313),u=t(58965),c=t(46417);function m(e){var n=e.ids,t=e.color,m=void 0===t?"inherit":t,p=e.onCompleted,b=e.disabled,h=(0,d.useState)(!1),f=(0,a.Z)(h,2),v=f[0],x=f[1],Z=function(){x(!1)};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(s.Z,{color:m,"aria-label":"Move Album",onClick:disabled:b||(0,l.isEmpty)(n),"data-test":"move",id:"move-button",children:(0,c.jsx)(o.Z,{title:"Move to Another Album",arrow:!0,children:(0,c.jsx)(i.Z,{})})}),(0,c.jsx)(r.ZP,{anchor:"right",open:v,onClose:Z,PaperProps:{sx:{width:"400px",maxWidth:"100%"}},children:(0,c.jsx)(u.Z,{albumIds:n,onClose:Z,handleMoveSuccess:function(){x(!1),p&&p()}})})]})}m.defaultProps={color:"inherit",onCompleted:void 0,disabled:!1}},43361:function(e,n,t){t.d(n,{Z:function(){return p}});var a=t(29439),i=t(61511),o=t(39074),r=t(61689),s=t(47131),l=t(16031),d=t(47313),u=t(28422),c=t(207),m=t(46417);function p(e){var n=e.ids,t=e.username,p=e.color,b=e.onCompleted,h=e.disabled,f=(0,i.x)(),v=(0,d.useState)(!1),x=(0,a.Z)(v,2),Z=x[0],g=x[1],j=(0,d.useState)(),C=(0,a.Z)(j,2),y=C[0],w=C[1];return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(s.Z,{color:p,disabled:h||(0,l.isEmpty)(n),onClick:function(){var e=[];n.forEach((function(n){var t=f.readFragment({id:"AlbumV2:".concat(n),fragment:u.KPs});t&&e.push(t)})),w(e),g(!0),b&&b()},"aria-label":"Share Album","data-test":"share",id:"share-content",children:(0,m.jsx)(r.Z,{title:"Share",arrow:!0,children:(0,m.jsx)(o.Z,{})})}),(0,m.jsx)(c.Z,{isOpen:Z,onClose:function(){g(!1)},albums:y,username:t})]})}p.defaultProps={color:"inherit",disabled:!1,onCompleted:void 0}},4151:function(e,n,t){t.d(n,{Z:function(){return m}});var a=t(29439),i=t(51997),o=t(51405),r=t(16031),s=t(47313),l=t(92216),d=t(70749),u=t(37673),c=t(46417);function m(e){var n=e.ids,t=e.disabled,m=e.onCompleted,p=e.onClose,b=e.onOpen,h=(0,s.useState)(!1),f=(0,a.Z)(h,2),v=f[0],x=f[1],Z=(0,l.Z)().mutation,g=(0,d.Z)().mutation;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(o.Z,{onClick:function(){!v&&b&&b(),x(!v),p&&p()},disabled:t||(0,r.isEmpty)(n),"data-test":"delete-menu-item",children:[(0,c.jsx)(i.Z,{style:{marginRight:8}})," Delete Album"]}),(0,c.jsx)(u.Z,{isOpen:v,onSecondayAction:function(){g({variables:{ids:n}}),x(!1),m&&m()},onSecondayActionText:(0,c.jsx)("p",{children:"Delete Album & keep content in My Bucket"}),onSubmit:function(){Z({variables:{ids:n}}),x(!1),m&&m()},onSubmitText:(0,c.jsx)("p",{children:"Delete Album & its content"}),title:"Are you sure you want to delete?",close:function(){x(!1)},subTitle:"You are about to delete ".concat(n.length," ").concat(1===n.length?"album":"albums",". This action cannot be undone.")})]})}m.defaultProps={onCompleted:void 0,onOpen:void 0,onClose:void 0,disabled:!1}},36124:function(e,n,t){t.d(n,{Z:function(){return u}});var a=t(29439),i=t(33973),o=t(51405),r=t(46923),s=t(47313),l=t(83041),d=t(46417);function u(e){var n=e.ids,t=e.disabled,u=e.isPasswordProtectedDisabled,c=e.onCompleted,m=e.onClose,p=e.onOpen,b=(0,s.useState)(!1),h=(0,a.Z)(b,2),f=h[0],v=h[1],x=function(){v(!1),m&&m()};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)(o.Z,{onClick:function(){!f&&p&&p(),v(!f),c&&c()},disabled:t||1!==n.length,children:[(0,d.jsx)(i.Z,{style:{marginRight:8}})," Album Details"]}),(0,d.jsx)(r.ZP,{anchor:"right",open:f,onClose:x,PaperProps:{sx:{width:"400px",maxWidth:"100%"}},children:(0,d.jsx)(l.Z,{id:n[0],onClose:x,isPasswordProtectedDisabled:u})})]})}u.defaultProps={disabled:!1,isPasswordProtectedDisabled:!1,onCompleted:void 0,onClose:void 0,onOpen:void 0}},37484:function(e,n,t){t.d(n,{Z:function(){return c}});var a=t(29439),i=t(98636),o=t(51405),r=t(46923),s=t(16031),l=t(47313),d=t(58965),u=t(46417);function c(e){var n=e.ids,t=e.deselectAllAlbums,c=e.onCompleted,m=e.onClose,p=e.disabled,b=e.onOpen,h=(0,l.useState)(!1),f=(0,a.Z)(h,2),v=f[0],x=f[1],Z=return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(o.Z,{onClick:function(){!v&&b&&b(),x(!v)},disabled:p||(0,s.isEmpty)(n),"data-test":"move",id:"move-button",children:[(0,u.jsx)(i.Z,{style:{marginRight:8}})," Move Album"]}),(0,u.jsx)(r.ZP,{anchor:"right",open:v,onClose:Z,PaperProps:{sx:{width:"400px",maxWidth:"100%"}},children:(0,u.jsx)(d.Z,{albumIds:n,onClose:Z,handleMoveSuccess:function(){t&&t(),x(!1),c&&c()}})})]})}c.defaultProps={deselectAllAlbums:void 0,onCompleted:void 0,onClose:void 0,disabled:!1,onOpen:void 0}},40993:function(e,n,t){t.d(n,{Z:function(){return m}});var a=t(29439),i=t(61511),o=t(46845),r=t(51405),s=t(16031),l=t(47313),d=t(28422),u=t(207),c=t(46417);function m(e){var n=e.ids,t=e.username,m=e.onCompleted,p=e.disabled,b=e.onOpen,h=(0,i.x)(),f=(0,l.useState)(!1),v=(0,a.Z)(f,2),x=v[0],Z=v[1],g=(0,l.useState)(),j=(0,a.Z)(g,2),C=j[0],y=j[1];return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(r.Z,{disabled:p||(0,s.isEmpty)(n),onClick:function(){!x&&b&&b();var e=[];n.forEach((function(n){var t=h.readFragment({id:"AlbumV2:".concat(n),fragment:d.KPs});t&&e.push(t)})),y(e),Z(!0),m&&m()},"data-test":"share-media-item",children:[(0,c.jsx)(o.Z,{style:{marginRight:8}})," Share Album"]}),(0,c.jsx)(u.Z,{isOpen:x,onClose:albums:C,username:t})]})}m.defaultProps={onOpen:void 0,onCompleted:void 0,disabled:!1}},40466:function(e,n,t){t.d(n,{Z:function(){return s}});var a=t(89599),i=t(51405),o=t(58467),r=t(46417);function s(e){var n=e.albumId,t=e.username,s=e.onCompleted,l=e.disabled,d=(0,o.s0)(),u=(0,o.bS)("/u/:userId");return(0,r.jsxs)(i.Z,{disabled:l,onClick:function(){d(u?"/u/".concat(t,"/slideshow"):"/u/".concat(t,"/a/").concat(n,"/slideshow")),s&&s()},"data-test":"start-slideshow",children:[(0,r.jsx)(a.Z,{style:{marginRight:8}})," Play Slideshow"]})}s.defaultProps={onCompleted:void 0,disabled:!1}},48509:function(e,n,t){t.d(n,{Z:);var a,i=t(15861),o=t(93433),r=t(1413),s=t(64687),l=t.n(s),d=t(61511),u=t(90297),c=t(72668),m=t(44766),p=t(31881),b=t.n(p),h=t(19655),f=t(16031),v=t(18248),x=t(28297),Z=t(28422),g=t(91345),j=t(2970),C=t(11149),y=t(25258),w=t(39437),S=t(63694),P=t(98976),A=t(4942),I=(a={},(0,A.Z)(a,Z.hqH.DateTaken,"dateTaken"),(0,A.Z)(a,Z.hqH.Date,"uploadDate"),(0,A.Z)(a,Z.hqH.Title,"title"),a),D=t(31500);function k(){var e,n,t,a,s,p,A,k,E,F,M=(0,d.x)(),T=(0,g.at)(),U=(0,C.Z)().settings,z=(0,S.Z)(),R=(0,D.Z)(),_=(0,w.Z)().createAlert,B=(0,u.l)(g.Xs),O=(0,c.a)(Z.d5z,{onError:function(e){y.Z.error("[GET_SUPPORTED_FILE_TYPES]: ".concat(e.message)),_("Unable to retrieve acceptable file types. Please try again later")}}).data,V=new Map,L=new Map,H=(null===O||void 0===O?void 0:O.getSupportedFileTypes.maxImageFileSizeInBytes)||1/0,N=(null===O||void 0===O?void 0:O.getSupportedFileTypes.maxVideoFileSizeInBytes)||1/0;null===O||void 0===O||O.getSupportedFileTypes.imageTypes.forEach((function(e){return V.set(e,!0)})),null===O||void 0===O||O.getSupportedFileTypes.videoTypes.forEach(();var q=(null===T||void 0===T||null===(e=T.profile)||void 0===e||null===(n=e.subscription)||void 0===n?void 0:n.totalImagesCount)||0,X=(null===T||void 0===T||null===(t=T.profile)||void 0===t||null===(a=t.subscription)||void 0===a?void 0:a.totalUserUsedSpace)||0,W=(null===T||void 0===T||null===(s=T.profile)||void 0===s||null===(p=s.subscription)||void 0===p||null===(A=p.plan)||void 0===A?void 0:A.maxImagesCount)||Number.MAX_SAFE_INTEGER,Y=(null===T||void 0===T||null===(k=T.profile)||void 0===k||null===(E=k.subscription)||void 0===E||null===(F=E.plan)||void 0===F?void 0:F.maxSpace)||Number.MAX_SAFE_INTEGER,G=function(e){var n=e.data;return(0,r.Z)((0,r.Z)({},n),{},{__typename:"Image",image:(0,r.Z)((0,r.Z)({},n.image),{},{isLandscape:null,__typename:"ImageFile"}),originalImage:(0,r.Z)((0,r.Z)({},n.originalImage),{},{isLandscape:null,__typename:"ImageFile"}),thumbnailImage:(0,r.Z)((0,r.Z)({},n.originalImage),{},{isLandscape:null,__typename:"ImageFile"})})},K=function(e){var n=I[U.sortBy.field];M.cache.updateQuery({query:Z.b6e,variables:{albumId:e.albumId,sortBy:U.sortBy,pageSize:P.IV}},(function(t){if(!t)return null;var a=t.getAlbumImagesV2,i=a.items,r=a.scrollPointer;return{getAlbumImagesV2:{items:(0,f.orderBy)([].concat((0,o.Z)(i),[e]),n,U.sortBy.desc?"desc":"asc"),scrollPointer:r}}})),M.cache.updateQuery({query:Z.x4R,variables:{albumId:z.defaultAlbum,sortBy:U.sortBy,pageSize:P.IV}},(function(t){if(!t)return null;var a=t.getImagesFromAlbumAndSubAlbums,i=a.items,r=a.scrollPointer;return{getImagesFromAlbumAndSubAlbums:{items:(0,f.orderBy)([].concat((0,o.Z)(i),[e]),n,U.sortBy.desc?"desc":"asc"),scrollPointer:r}}})),M.cache.modify({id:"AlbumV2:".concat(e.albumId),fields:{counters:function(e){return{imageCount:e.imageCount+1,imageCountIncludeSubAlbums:e.imageCountIncludeSubAlbums}}}})},Q=function(e){var n=0;return Array.from(e).forEach((),!(q+1>W||X+n>Y)||(_("You have reached your storage limit. Upgrade your account to upload more images."),!1)},$=function(){var e=(0,i.Z)(l().mark((function e(n,t,a){var o,s,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(o=(0,h.v0)().currentUser)||void 0===o?void 0:o.getIdToken();case 2:if(s=e.sent){e.next=6;break}return(0,g.sh)([{id:(0,m.k$)(),message:"Send Request Failed: Unauthorized.",severity:"error"}]),e.abrupt("return");case 6:return d=n.map(function(){var e=(0,i.Z)(l().mark((function e(n){var t,a,i,o,d,u,c,m,p,h,f,Z;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.file,a=n.id,i=n.albumId,o={"Content-Type":"multipart/form-data",authorization:s,"x-correlation-id":(0,v.Z)()},d={albumId:i},u=new FormData,c=t.name.split("."),m=c[c.length-1],p=null===m||void 0===m?void 0:m.toLowerCase(),e.prev=7,p&&(V.get(p)||L.get(p))){e.next=10;break}throw new Error("File name ".concat(t.name," has an incompatible file type"));case 10:if(!(V.get(p)&&t.size>H)){e.next=12;break}throw new Error("File name ".concat(t.name," has a file size greater than ").concat(H," bytes"));case 12:if(!(L.get(p)&&t.size>N)){e.next=14;break}throw new Error("File name ".concat(t.name," has a file size greater than ").concat(N," bytes"));case 14:return u.append("file",t),e.next=17,b().post(x.ZP.api.upload,u,{headers:o,params:d});case 17:h=e.sent,f=G(h),K(f),B[a]=(0,r.Z)((0,r.Z)({},B[a]),{},{status:j.D.Completed}),(0,g.Xs)((0,r.Z)({},B)),e.next=31;break;case 24:e.prev=24,e.t0=e.catch(7),Z=e.t0,y.Z.error("Something is wrong",e.t0),B[a]=(0,r.Z)((0,r.Z)({},B[a]),{},{status:j.D.Failed}),(0,g.Xs)((0,r.Z)({},B)),_(Z.message);case 31:case"end":return e.stop()}}),e,null,[[7,24]])})));return ()),e.next=9,Promise.all(d);case 9:y.Z.debug("Batch ".concat(t," of ").concat(a),(new Date).toISOString());case 10:case"end":return e.stop()}}),e)})));return function(n,t,a){return e.apply(this,arguments)}}(),J=function(){var e=(0,i.Z)(l().mark((function e(n,t,a){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.pop()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,$(i,t,a);case 5:return e.next=7,J(n,t+1,a);case 7:case"end":return e.stop()}}),e)})));return (),ee=function(){var e=(0,i.Z)(l().mark((function e(n,t){var a,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q(n)){e.next=3;break}return e.abrupt("return");case 3:return a=Array.from(n).map((function(e){var n=(0,v.Z)();return B[n]={url:URL.createObjectURL(e),albumId:t,status:j.D.InProgress,type:e.type},(0,g.Xs)((0,r.Z)({},B)),{file:e,id:n,albumId:t}})),i=(0,f.chunk)(a,5),e.next=7,J(i,1,i.length);case 7:return e.next=9,R.execute();case 9:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),ne=function(){var e=(0,i.Z)(l().mark((function e(n,t){var a,i,o,s,d,u,c,p,f,Z,C,w;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(a=(0,h.v0)().currentUser)||void 0===a?void 0:a.getIdToken();case 2:if(i=e.sent){e.next=6;break}return(0,g.sh)([{id:(0,m.k$)(),message:"Send Request Failed: Unauthorized.",severity:"error"}]),e.abrupt("return",null);case 6:if(Q([n])){e.next=9;break}return e.abrupt("return",null);case 9:if(o=(0,v.Z)(),B[o]={url:URL.createObjectURL(n),albumId:t,status:j.D.InProgress,type:n.type},(0,g.Xs)((0,r.Z)({},B)),s={"Content-Type":"multipart/form-data",authorization:i,"x-correlation-id":(0,v.Z)()},d={albumId:t},u=new FormData,c=n.name.split("."),p=c[c.length-1],f=null===p||void 0===p?void 0:p.toLowerCase(),e.prev=18,f&&(V.get(f)||L.get(f))){e.next=21;break}throw new Error("File name ".concat(n.name," has an incompatible file type"));case 21:if(!(V.get(f)&&n.size>H)){e.next=23;break}throw new Error("File name ".concat(n.name," has a file size greater than ").concat(H," bytes"));case 23:if(!(L.get(f)&&n.size>N)){e.next=25;break}throw new Error("File name ".concat(n.name," has a file size greater than ").concat(N," bytes"));case 25:return u.append("file",n),e.next=28,b().post(x.ZP.api.upload,u,{headers:s,params:d});case 28:return Z=e.sent,C=G(Z),K(C),B[o]=(0,r.Z)((0,r.Z)({},B[o]),{},{status:j.D.Completed}),(0,g.Xs)((0,r.Z)({},B)),e.next=35,R.execute();case 35:return e.abrupt("return",C.id);case 38:e.prev=38,e.t0=e.catch(18),w=e.t0,y.Z.error("Something is wrong",e.t0),B[o]=(0,r.Z)((0,r.Z)({},B[o]),{},{status:j.D.Failed}),(0,g.Xs)((0,r.Z)({},B)),_(w.message);case 45:return e.abrupt("return",null);case 46:case"end":return e.stop()}}),e,null,[[18,38]])})));return ();return{uploadMultiple:ee,uploadSingle:ne,stopPropagation:}},89599:function(e,n,t){var a=t(64836);n.Z=void 0;var i=a(t(45045)),o=t(46417),r=(0,i.default)((0,o.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.5 16.5v-9l7 4.5-7 4.5z"}),"PlayCircle");n.Z=r},46845:function(e,n,t){var a=t(64836);n.Z=void 0;var i=a(t(45045)),o=t(46417),r=(0,i.default)((0,o.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share");n.Z=r},16227:function(e,n,t){var a=t(64836);n.Z=void 0;var i=a(t(45045)),o=t(46417),r=(0,i.default)((0,o.jsx)("path",{d:"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"}),"ShoppingCart");n.Z=r},99123:function(e,n,t){var a=t(64836);n.Z=void 0;var i=a(t(45045)),o=t(46417),r=(0,i.default)((0,o.jsx)("path",{d:"M3 17v2h6v-2H3zM3 5v2h10V5H3zm10 16v-2h8v-2h-8v-2h-2v6h2zM7 9v2H3v2h4v2h2V9H7zm14 4v-2H11v2h10zm-6-4h2V7h4V5h-4V3h-2v6z"}),"Tune");n.Z=r}}]);