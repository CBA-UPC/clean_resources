/*! For license information please see dmp-provider-template.js.LICENSE.txt */
(()=>{var e={784:pped__i||exports,ject"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";const e="https://event.dxmdp.com/rest/api/v1/report-errE,S,P,O,I;(O=t||(t={})).INIT="INIT",O.READY="READY",O.ERROR="ERROR",(P=r||(r={})).EMPTRY_USER_ID="EMPTRY_USER_ID",P.UNKNOWN_ERROR="UNKNOWN_ERROR",function(e){e.VERIFICATION="VerificationMessage"}(i||(i={})),(o||(o={})).UPDATE_DATA="UPDATE_DATA",(S=a||(a={})).PAGE_VIEW="PAGE_VIEW",S.LINK_CLICK="LINK_CLICK",S.VIDEO_EVENT="VIDEO_EVENT",S.NATIVE_OCLICK="NATIVE_OCLICK",S.SLOT_CLICK="SLOT_CLICK",S.CONVERSION="CONVERSION",(E=u||(u={})).AUDIENCE_ENTER="AUDIENCE_ENTER",E.AUDIENCE_EXIT="AUDIENCE_EXIT",(A=c||(c={})).UPDATE="UPDATE",A.REPLACE="REPLACE",(w=s||(s={})).STANDARD="STANDARD",w.CURRENT_PAGE="CURRENT_PAGE",function(e){e.INDEXING="INDEXING",e.ACTIVATED="ACTIVATED"}(f||(f={})),function(e){e.MAIN="MAIN",e.CURRENT_PAGE="CURRENT_PAGE"}(l||(l={})),(_=d||(d={})).ALL="ALL",_.LAST="LAST",_.AFTER="AFTERFINED",(m=hE",e.META_NAME="META_NAME",e.META_PROPERTY="META_PROPERTY",e.JAVASCRIPT="JAVASCRIPT"}(v||(v={})),function(e){e.STRING="STRING",e.DOUBLE="DOUBLE",e.LONG="LONG",e.ARRAY_OF_STRING="ARRAY_OF_STRING"}(g||(g={})),function(e){e.URL_CONTAINS="URL_CONTAINS",e.URL_EXACTLY_MATCH="URL_EXACTLY_MATCH",e.CATEGORY_EQUALS="CATEGORY_EQUALS"}(b||(b={})),function(e){e.MOBILE_WEB="MOBILE_WEB",e.MOBILE_APP="MOBILE_APP",e.DESKTOP="DESKTOP"}(I||(I={}));var T=n(784);const j=(e,t)=>{try{if(0===e){const e=t.querySelectorAll(".tags-container a");return Array.from(e).map((e=>e.text))}return[]}catch(e){return[]}},D=e=>{const t=document.createElement("script");return t.async=!0,t.src=e,t},C=(e,t)=>{const n=D(e),r=document.getElementsByTagName("script")[0];t&&(n.onload=t),r.parentNode&&r.parentNode.insertBefore(n,r)};function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach(x(e,t,n[t])}))}return e}const R=(e,t)=>{if(e)switch(t){case g.LONG:case g.DOUBLE:return Number(e);case g.STRING:return String(e);case g.ARRAY_OF_STRING:return Array.isArray(e)?e.map((e=>String(e))):String(e).split(",");default:return}},N=(e,t={})=>{const n=(e=>{const t=e.document.getElementsByTagName("meta"),n=t.namedItem("author"),r=t.namedItem("category"),i=t.namedItem("description");return{url:e.location.href,title:e.document.title,domain:e.location.origin,author:n?n.content:"",category:r?r.content:"",description:i?i.content:"",tags:j(e.siteId,e.document)}})(window)||{},r=((e,t)=>(null==t?void 0:t.length)?t.reduce(((t,n)=>{let r;try{switch(n.type){case v.URL_REGEX:var i;r=R(null===(i=e.location.href.match(new RegExp(n.expression,"g")))||void 0===i?void 0:i.join(","),n.field.type);break;case v.GLOBAL_VARIABLE:r=R((0,T.get)(e,n.expression),n.field.type);break;case v.META_NAME:var o,a;r=R(null!==(a=null===(o=e.document.querySelector(`meta[name=${n.expression}]`))||void 0===o?void 0:o.getAttribute("content"))&&void 0!==a?a:"",n.field.type);break;case v.META_PROPERTY:var u,c;r=R(null!==(c=null===(u=e.document.querySelector(`meta[property=${n.expression}]`))||void 0===u?void 0:u.getAttribute("content"))&&void 0!==c?c:"",n.field.type);break;case v.JAVASCRIPT:var s;r=R(null!==(s=new Function(n.expression).call(e))&&void 0!==s?s:"",n.field.type)}(0,T.set)(t,n.field.path,r)}catch(e){}return t}),{}):{})(window,e),i={devicePlatform:(e=>{const t=e.navigator.standalone,n=e.navigator.userAgent.toLowerCase(),r=/safari/.test(n),i=/iphone|ipod|ipad/.test(n);switch(!0){case i&&!t&&r:return I.MOBILE_WEB;case i&&!t&&!r:case!i&&n.includes("wv"):return I.MOBILE_APP;case"ontouchstart"in document.documentElement:case e.matchMedia("only screen and (max-width: 768px)").matches:case window.matchMedia("(pointer:coarse)").matches:case Boolean(e.navigator.userAgent.match(/Android/i)):case Boolean(e.navigator.userAgent.match(/iPhone/i)):return I.MOBILE_WEB;default:return I.DESKTOP}})(window)};return(0,T.merge)({properties:L({},n,i,t)},r)};function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwtOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(n,["pathParams","query","headers","body"]);r&&Object.keys(r).forEach((t=>{const n=String(r[t]);e=e.replace(new RegExp(`:${t}[?]{0,1}`),n)}));const c=new URL(e);i&&Object.keys(i).forEach((e=>{var t;const n=String(null!==(t=i[e])&&voethod:t,query:i,headers:k({"Content-Type":"application/json"},o),body:a?JSON.stringify(a):void 0},u);return .then((e=>{if(!e.ok)throw new Error(e.statusText);return e.text()})).then((e=>e?"application/json"===s.headers["Content-Type"]?JSON.parse(e):e:null))},F=(e,t)=>B(e,"GET",t),$=(e,t)=>B(e,"POST",t),W=(e,t)=>{try{new Function(e).call(void 0)}catch(e){null==t||t(e)}};function K(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function q(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){K(o,r,i,a,u,"next",e)}function u(e){K(o,r,i,a,u,"throw",e)}a(void 0)}))}}q((function*(){return(yield F("https://event.dxmdp.com/rest/api/v1/sync",{credentials:"include"});const z=fd F(`https://tags.dxmdp.com/tags/${e}/snippets/${t}`,{credentials:"include",headers:{"Content-Type":"text/javascript"}});re.HAMAL="0354db52-501b-4843-bbbe-f1d50aa8d3f6",e.CHANEL14="1c04541d-67b4-47ea-a76c-a05bfb699d03",e.INVESTING="79c86a60-3a28-440e-896e-0c1c1073d8f4",e.ROTTER="e26b14d0-56b1-4137-99b4-744e82a664df"}(V||(V={}));const G={"www.ice.co.il":"788e0fee-a9f4-4c49-a8d6-307539424b2e","www.maariv.co.il":"b515cf7f-ac23-4ab4-9418-37d78db1b935","www.bizportal.co.il":"8668c7e1-ed8b-4584-9218-ecae2b358bc3","www.9tv.co.il":"8738e5c5-03f6-492a-ba8a-397b43474f3b","www.israelhayom.co.il":"d4608a30-40f1-46e4-8b52-71cc29c2dc1a","www.vesty.co.il":"1ff70d9b-ba5c-4c4b-9759-4bd97f511c8d","www.calcalist.co.il":"0b41b6f0-1d53-4017-a72b-33a759568873","www.sport5.co.il":"2422f7d8-4719-4d25-8d91-af822eeb3e1c","www.sport1.co.il":"f1d7026f-040a-43f8-9600-bfc39b9251fc","13tv.co.il":"41e37d4d-43fb-40d7-9762-8ae91252c1e2","next.reshet.tv":"41e37d4d-43fb-40d7-9762-8ae91252c1e2","www.walla.co.il":"bc8a7a32-7d98-4226-8af9-d2a43a8621cc","e-rs-14.walla.news":"bc8a7a32-7d98-4226-8af9-d2a43a8621cc","www.globes.co.il":"e3f93e9e-8756-457c-addc-3d76aa5b5582","www.ynet.co.il":"a5beb245-2949-4a76-95f5-bddfc2ec171c","www.one.co.il":"91f8eae5-0554-4499-8221-28880465ceae","www.haaretz.co.il":"973e193f-6f00-46d3-bae9-e84870287ae2","www.mako.co.il":"36699dd9-d954-4d40-be6a-4bbfce1f3652","www.N12.co.il":"36699dd9-d954-4d40-be6a-4bbfce1f3652","www.themarker.com":"973e193f-6f00-46d3-bae9-e84870287ae2","www.makorrishon.co.il":"e2c597a2-fb13-44de-9adb-1e1390708f6d"},H="_pdfps",J="permutive",Y=(e,t)=>{const{disableExternals:n}=window,{skip:r,firstLoad:i,monitoring:o}=t;if(r)return null==o?void 0:o.log("external scripts are skipped for this page",window.location);if(n)return null==o?void 0:o.warning("external scripts are disabled");const a=((e,t="")=>{switch(e||G[t]){case"788e0fee-a9f4-4c49-a8d6-307539424b2e":return{permutiveConfig:{permutiveApiKey:"3cc11b9d-01bf-4f9a-992c-720d071234ed",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/fe68d1f7-c9f4-45b3-8905-7cda73d3fd74-web.js",permutivePagePublisher:"ice",getCategory:()=>window.location.pathname.replace(/(?=\?)(.[^?]*$)/,"").replace(/(?=A)(.[^A]*$)/,""),getDescription:()=>document.querySelectorAll('meta[name="description"]')[0].content,getTags:()=>JSON.parse(document.querySelectorAll('script[type="application/ld+json"]')[1].text).keywords,googletagCmdAdditional:()=>{const e=window.localStorage.getItem("permutive-id");var t,n,r,i;e&&(null===(n=window.googletag)||void 0===n||null===(t=n.pubads)||void 0===t||t.call(n).setTargeting("puid",e),null===(i=window.googletag)||void 0===i||null===(r=i.pubads)||void 0===r||r.call(i).setTargeting("ptime",Date.now().toString()))}},kahoonaScriptUrl:window.location.pathname.includes("771664")?"https://d2r08ja41ypc0t.cloudfront.net/ICE/kahoona-idx-staging.js":"https://d2r08ja41ypc0t.cloudfront.net/ICE/kahoona-idx-live.js"};case"b515cf7f-ac23-4ab4-9418-37d78db1b935":return{permutiveConfig:{permutiveApiKey:"45c98745-56d0-41c0-814f-a4fe2ce46d41",permutiveProjectId:"bdbae668-c577-4545-8fc2-4ad4eab52b2c",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/bdbae668-c577-4545-8fc2-4ad4eab52b2c-web.js",permutivePagePublisher:"Maariv",getAuthor:()=>JSON.parse(document.querySelectorAll('script[type="application/ld+json"]')[1].innerText).author.name,getCategory:()=>(location.pathname.replace(/(?=\?)(.[^?]*$)/,"").replace(/(?=A)(.[^A]*$)/,""),window.location.pathname.replace(/(?=\?)(.[^?]*$)/,"").replace(/(?=A)(.[^A]*$)/,"")),getDescription:()=>document.querySelectorAll('meta[name="description"]')[0].content,getTags:()=>document.querySelectorAll('meta[name="keywords"]')[0].content.split(",")}};case"8668c7e1-ed8b-4584-9218-ecae2b358bc3":return{permutiveConfig:{permutiveApiKey:"3cc11b9d-01bf-4f9a-992c-720d071234ed",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/fe68d1f7-c9f4-45b3-8905-7cda73d3fd74-web.js",permutivePagePublisher:"bizportal",getCategory:()=>(location.pathname.replace(/(?=\?)(.[^?]*$)/,"").replace(/(?=A)(.[^A]*$)/,""),window.location.pathname.replace(/(?=\?)(.[^?]*$)/,"").replace(/(?=A)(.[^A]*$)/,"")),getDescription:()=>document.querySelectorAll('meta[name="description"]')[0].content,getTags:()=>document.querySelectorAll('meta[name="keywords"]')[0].content.split(",")}};case"8738e5c5-03f6-492a-ba8a-397b43474f3b":return{permutiveConfig:{permutiveApiKey:"e21ddafe-7787-4749-97c1-22a4cdc30bd5",permutiveScriptUrl:"https://cdn.permutive.com/e21ddafe-7787-4749-97c1-22a4cdc30bd5-web.js",permutivePagePublisher:"arutz9",getAuthor:()=>document.querySelectorAll('div[class="author-img-holder"]')[0].children[0].alt,getCategory:()=>{var e,t,n,r;return null!==(r=null===(n=window.dataLayer)||void 0===n||null===(t=n[0])||void 0===t||null===(e=t.pageCategory)||void 0===e?void 0:e.toString())&&void 0!==r?r:null},getDescription:()=>document.querySelectorAll('meta[name="description"]')[0].content,getTags:()=>document.querySelectorAll('meta[name="keywords"]')[0].content.split(",")}};case"d4608a30-40f1-46e4-8b52-71cc29c2dc1a":return{permutiveConfig:{permutiveApiKey:"017a2d5a-5cc2-4072-a81b-0567b6b1fd76",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/fe68d1f7-c9f4-45b3-8905-7cda73d3fd74-web.js",permutivePagePublisher:"israelhayom",getAuthor:()=>{var e,t,n,r;return null!==(r=null===(n=window.dataLayer)||void 0===n||null===(t=n[0])||void 0===t||null===(e=t.author1)||void 0===e?void 0:e.toString())&&void 0!==r?r:null},getCategory:()=>{var e,t,n,r;return null!==(r=null===(n=window.dataLayer)||void 0===n||null===(t=n[0])||void 0===t||null===(e=t.category1)||void 0===e?void 0:e.toString())&&void 0!==r?r:null},getDescription:()=>document.querySelectorAll('meta[name="description"]')[0].content,getTags:()=>document.querySelectorAll('meta[name="keywords"]')[0].content.split(",")}};case"1ff70d9b-ba5c-4c4b-9759-4bd97f511c8d":return{permutiveConfig:{permutiveApiKey:"c37d55bd-cb55-4d7a-a6c3-74d2016bcef3",permutiveProjectId:"6f7c8ec7-588a-46ef-95d2-ff36e0a39e58",permutiveScri-95d2-ff36e0a39RVER_APP_STATE__.initialData.article_data.author,getCategory:()=>window.__SERVER_APP_STATE__.initialData.dcPath,getDescription:()=>window.__SERVER_APP_STATE__.initialData.article_data.description,getTags:()=>window.__SERVER_APP_STATE__.initialData.article_data.articleTags.split(",")}};case"0b41b6f0-1d53-4017-a72b-33a759568873":return{permutiveConfig:{permutiveApiKey:"3c9738ef-5038-489c-af1a-ae255e2c3ce2",permutiveProjectId:"6f7c8ec7-588a-46ef-95d2-ff36e0a39e58",permutiveScriptUrl:"https://cdn.permutive.com/6f7c8ec7-588a-46ef-95d2-ff36e0a39e58-web.js",permutivePagePublisher:"calcalist",getAuthor:()=>{var e,t,n,r;return null!==(r=null===(n=window.dataLayer)||void 0===n||null===(t=n[0])||void 0===t||null===(e=t.authorName)||void 0===e?void 0:e.toString())&&void 0!==r?r:null},getCategory:()=>document.querySelectorAll('meta[name="og:description"]')[0].content,getDescription:()=>document.querySelectorAll('meta[name="vr:category"]')[0].content,getTags:()=>{var e,t,n,r;return null!==(r=null===(n=window.dataLayer)||void 0===n||null===(t=n[0])||void 0===t||null===(e=t.articleTags)||void 0===e?void 0:e.toString().split(","))&&void 0!==r?r:[]}},kahoonaScriptUrl:window.location.pathname.includes("r1xdX2UOO")?"https://d2r08ja41ypc0t.cloudfront.net/CALCALIST/kahoona-idx-staging.js":"https://d2r08ja41ypc0t.cloudfront.net/CALCALIST/kahoona-idx-live.js",brandmetricScriptUrl:"https://cdn.brandmetrics.com/survey/script/48394f48de8f447287c4da9a5ea741f8.js"};case"f1d7026f-040a-43f8-9600-bfc39b9251fc":return{permutiveConfig:{permutiveApiKey:"45c98745-56d0-41c0-814f-a4fe2ce46d41",permutiveProjectId:"bdbae668-c577-4545-8fc2-4ad4eab52b2c",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/bdbae668-c577-4545-8fc2-4ad4eab52b2c-web.js",permutivePagePublisher:"sport1",googletagCmdAdditional:()=>{var e,t;const n=window.localStorage.getItem("permutive-id");var r,i,o,a;n&&(null===(i=window.googletag)||void 0===i||null===(r=i.pubads)||void 0===r||r.call(i).setTargeting("puid",n),null===(a=window.googletag)||void 0===a||null===(o=a.pubads)||void 0===o||o.call(a).setTargeting("ptime",Date.now().toString())),null===(t=window.googletag)||void 0===t||null===(e=t.pubads)||void 0===e||e.call(t).setTargeting("prmtvwid","fe68d1f7-c9f4-45b3-8905-7cda73d3fd74")}}};case"2422f7d8-4719-4d25-8d91-af822eeb3e1c":return{permutiveConfig:{permutiveApiKey:"602c32f4-d4a1-4a1d-91f1-2b276fd70b3b",permutiveProjectId:"e21ddafe-7787-4749-97c1-22a4cdc30bd5",permutiveScriptUrl:"https://cdn.permutive.com/e21ddafe-7787-4749-97c1-22a4cdc30bd5-web.js",permutivePagePublisher:"sport5",getAuthor:()=>document.querySelectorAll('div[class="author-img-holder"]')[0].children[0].alt,getCategory:()=>{var e,t,n,r;return null!==(r=null===(n=window.dataLayer)||void 0===n||null===(t=n[0])||void 0===t||null===(e=t.pageCategory)||void 0===e?void 0:e.toString())&&void 0!==r?r:null},getDescription:()=>document.querySelectorAll('meta[name="description"]')[0].content,getTags:()=>document.querySelectorAll('meta[name="keywords"]')[0].content.split(",")},brandmetricScriptUrl:"https://cdn.brandmetrics.com/survey/script/7559f7ab828a46e1be932fbf6421d07e.js"};case"41e37d4d-43fb-40d7-9762-8ae91252c1e2":return{permutiveConfig:{permutiveApiKey:"c37d55bd-cb55-4d7a-a6c3-74d2016bcef3",permutiveProjectId:"c6a08239-568d-44fe-b716-21fcac52ab6a",permutiveScriptUrl:"https://cdn.permutive.com/c6a08239-568d-44fe-b716-21fcac52ab6a-web.js",permutivePagePublisher:"reshet",permutiveLocalKey:"idxaisegs",permutiveTargetKey:"idxaisegs",getCategory:()=>document.querySelectorAll('meta[name="itemMetaShowHeb"]')[0].content,getDescription:()=>document.querySelectorAll('meta[name="description"]')[0].content,getTags:()=>document.querySelectorAll('meta[name="itemMetaShowHeb"]')[0].content.split(",")},kahoonaScriptUrl:window.location.pathname.includes("kyu8l-902515944")?"https://d2r08ja41ypc0t.cloudfront.net/RESHET/kahoona-idx-staging.js":"https://d2r08ja41ypc0t.cloudfront.net/RESHET/kahoona-idx-live.js",brandmetricScriptUrl:"https://cdn.brandmetrics.com/survey/script/6b5c301f42b14bf38fbdb67e16450f5d.js"};case"bc8a7a32-7d98-4226-8af9-d2a43a8621cc":return{permutiveConfig:{permutiveApiKey:"45c98745-56d0-41c0-814f-a4fe2ce46d41",permutiveProjectId:"bdbae668-c577-4545-8fc2-4ad4eab52b2c",permutiveScriptUrl:"https://cdn.permutive.com/bdbae668-c577-4545-8fc2-4ad4eab52b2c-web.js",permutivePagePublisher:"walla",getAuthor:()=>{var e,t,n;return null!==(n=null===(t=window.dataLayer)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.itemAuthor.toString())&&void 0!==n?n:null},getCategory:()=>{var e,t,n,r;return`${null===(t=window.dataLayer)||void 0===t||null===(e=t[0])||void 0===e?void 0:e.vertical_eng_name}/${null===(r=window.dataLayer)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.categoryName}`},getDescription:()=>document.querySelectorAll('meta[name="description"]')[0].content,getTags:()=>{var e,t,n,r;return null!==(r=null===(n=window.dataLayer)||void 0===n||null===(t=n[0])||void 0===t||null===(e=t.tags)||void 0===e?void 0:e.toString().split(","))&&void 0!==r?r:[]},getAge:()=>{const e=decodeURIComponent(document.cookie).split(";");for(let t=0;t<e.length;t++){let n=e[t];for(;" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf("age="))return parseInt(n.substring(4,n.length))}return null},getGender:()=>{const e=decodeURIComponent(document.cookie).split(";");for(let t=0;t<e.length;t++){let n=e[t];for(;" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf("gender=")){const e=n.substring(7,n.length);if("1"==e)return"male";if("2"==e)return"female"}}return null},permutiveIsDisabled:()=>{const{dataLayer:e}=window,t="homepage"==(null==e?void 0:e[0].vertical_eng_name)||"news"==(null==e?void 0:e[0].vertical_eng_name)||"mumlazim"==(null==e?void 0:e[0].vertical_eng_name)||"VOD"==(null==e?void 0:e[0].vertical_eng_name)||"weather"==(null==e?void 0:e[0].vertical_eng_name);return t&&console.log("idx_nopv"),t}},kahoonaScriptUrl:window.location.pathname.includes("3498003")?"https://d2r08ja41ypc0t.cloudfront.net/WALLA/kahoona-idx-staging.js":"https://d2r08ja41ypc0t.cloudfront.net/WALLA/kahoona-idx-live.js"};case"e3f93e9e-8756-457c-addc-3d76aa5b5582":return{permutiveConfig:{permutiveApiKey:"47e681a6-93b9-46e9-8118-ecfc5a651575",permutiveProjectId:"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74",permutiveScriptUrl:"https://cdn.permutive.com/fe68d1f7-c9f4-45b3-8905-7cda73d3fd74-web.js",permutivePagePublisher:"globes",getAuthor:()=>window.sub_sf_author,getCategory:()=>window.sContentGroup1,getDescription:()=>document.querySelectorAll('meta[name="description"]')[0].content,getDate:()=>{const e=document.querySelectorAll('meta[property="article:published_time"]')[0].content;return new Date(e).toISOString()},getTags:()=>{const e=window.sContentKeywords;let t=[];return t=t.concat(e.split(",").map((function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}))),t}}};case"a5beb245-2949-4a76-95f5-bddfc2ec171c":return{permutiveConfig:{permutiveApiKey:"d05706a6-4182-4194-bde3-242581f05ac3",permutiveProjectId:"a5beb245-2949-4a76-95f5-bddfc2ec171c",permutiveScriptUrl:"https://cdn.permutive.com/fe605-7cda73d3fd74-web.js",permutivePagePublisher:"yediot",getAuthor:()=>JSON.parse(document.querySelectorAll('script[type="application/ld+json"]')[0].text).author.name,getCategory:()=>window.dcPath,getDescription:()=>JSON.parse(document.querySelectorAll('script[type="application/ld+json"]')[0].text).description,getDate:()=>{const e=JSON.parse(document.querySelectorAll('script[type="application/ld+json"]')[0].text).datePublished.split(","),t=e[1].split("."),n=new Date(e[0]+[t[1],t[0],t[2]].join(".")),r=60*(new Date).getTimezoneOffset()*1e3;return new Date(n.getTime()-r).toISOString()},getTags:()=>JSON.parse(document.querySelectorAll('script[type="application/ld+json"]')[0].text).keywords.split(",")}};case"91f8eae5-0554-4499-8221-28880465ceae":return{permutiveConfig:{permutiveApiKey:"01927e26-a023-4708-aff3-9c87b3c58d1f7-c9f4-45b38d1f7-c9f4-45b3-8905-7cda73d3fd74-web.js",permutivePagePublisher:"one",getCategory:()=>window.location.pathname,getDescription:()=>document.querySelectort.querySelectorAll('meta[name="news_keywords"]');let t=[];for(let n=0;n<e.length;++n)t=t.concat(e[n].content.split(",").map((function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")})));return t}}};case"973e193f-6f00-46d3-bae9-e84870287ae2":return{permutiveConfig:{permutiveApiKey:"b22711f5-0497-4009-9336-19f02a418aa1",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/5df8e9c7-77da-4197-8c3e-fc21422d0462-web.js",permutivePagePublisher:"haaretz"}};case"36699dd9-d954-4d40-be6a-4bbfce1f3652":return{permutiveConfig:{permutiveApiKey:"34892ffd-594e-409e-a5b1-d4caa1655e1a",permutiveProjectId:"e40fe333-ed16-40e2-902d-2810c99b8c80",permutiveScriptUrl:"https://cdn.permutive.com/e40fe333-ed16-40e2-902d-2810c99b8c80-web.js",permutivePagePublisher:"keshet",getAuthor:()=>{var e,t;return null!==(t=null===(e=document.querySelectorAll('span[itemprop="author"]]')[0])||void 0===e?void 0:e.getAttribute("content"))&&void 0!==t?t:""},getCategory:()=>window.location.pathname.replace(/(?=\?)(.[^?]*$)/,"").replace(/(?=A)(.[^A]*$)/,""),getDescription:()=>{var e;return null===(e=document.querySelectorAll('meta[name="description"]')[0])||void 0===e?void 0:e.content},getDate:()=>{var e;const t=null===(e=document.querySelectorAll('meta[property="article:published_time"]')[0])||void 0===e?void 0:e.content.slice(0,-1);return new Date(t).toISOString()},getTags:()=>{const e=document.querySelectorAll('meta[property="article:tag"]'),t=[];for(let n=0;n<e.length;++n)t[n]=e[n].content;return t}}};case"e2c597a2-fb13-44de-9adb-1e1390708f6d":return{permutiveConfig:{permutiveApiKey:"dc69fff6-cefc-4d5c-a80a-d4d4b16b5222",permutiveProjectId:"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/fe68d1f7-c9f4-45b3-8905-7cda73d3fd74-web.js",permutivePagePublisher:"makorrishon"}};case"0accac7d-a6bd-4899-a8ac-54f1962da557":return{permutiveConfig:{permutiveApiKey:"45c98745-56d0-41c0-814f-a4fe2ce46d41",permutiveProjectId:"bdbae668-c577-4545-8fc2-4ad4eab52b2c",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/bdbae668-c577-4545-8fc2-4ad4eab52b2c-web.js",permutivePagePublisher:"TMI"}};case"f9ee75d4-540d-4be9-a9c7-3fc2c070a53b":return{permutiveConfig:{permutiveApiKey:"45c98745-56d0-41c0-814f-a4fe2ce46d41",permutiveProjectId:"bdbae668-c577-4545-8fc2-4ad4eab52b2c",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/bdbae668-c577-4545-8fc2-4ad4eab52b2c-web.js",permutivePagePublisher:"99FM"}};case"9ce6ead9-6698-4f70-bcc6-2cc8646d2cb2":return{permutiveConfig:{permutiveApiKey:"45c98745-56d0-41c0-814f-a4fe2ce46d41",permutiveProjectId:"bdbae668-c577-4545-8fc2-4ad4eab52b2c",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/bdbae668-c577-4545-8fc2-4ad4eab52b2c-web.js",permutivePagePublisher:"103FM"}};case"0354db52-501b-4843-bbbe-f1d50aa8d3f6":return{permutiveConfig:{permutiveApiKey:"45c98745-56d0-41c0-814f-a4fe2ce46d41",permutiveProjectId:"bdbae668-c577-4545-8fc2-4ad4eab52b2c",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/bdbae668-c577-4545-8fc2-4ad4eab52b2c-web.js",permutivePagePublisher:"Hamal"}};case"1c04541d-67b4-47ea-a76c-a05bfb699d03":return{permutiveConfig:{permutiveApiKey:"a4207371-a22c-4b1c-b147-c33338d87392",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/fe68d1f7-c9f4-45b3-8905-7cda73d3fd74-web.js",permutivePagePublisher:"Chanel14"}};case"79c86a60-3a28-440e-896e-0c1c1073d8f4":return{permutiveConfig:{permutiveApiKey:"c2c45f27-ffd3-43bb-98f4-1256039e69ad",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/fe68d1f7-c9f4-45b3-8905-7cda73d3fd74-web.js",permutivePagePublisher:"Investing"}};case"e26b14d0-56b1-4137-99b4-744e82a664df":return{permutiveConfig:{permutiveApiKey:"c9fbb1ae-2583-48fb-98ac-f5991991d91c",permutiveScriptUrl:"https://fe68d1f7-c9f4-45b3-8905-7cda73d3fd74.edge.permutive.app/fe68d1f7-c9f4-45b3-8905-7cda73d3fd74-web.js",permutivePagePublisher:"Rotter"}};default:return}})(e,window.location.hostname);null==o||o.log("external config",a),((e,t)=>{try{(e=>{const{permutiveApiKey:t,permutiveProjectId:n,permutivePagePublisher:r,permutiveLocalKey:i=H,permutiveTargetKey:o=J,getAuthor:a,getCategory:u,getDescription:y","on","once","user","consent"],n=0;n<t.length;n++){const r=t[n];e[r]=function(t){return function(){const n=Array.prototype.slice.call(arguments,0);e.q.push({functionName:t,arguments:n})}}(r)}}}(window.permutive,e,t?{projectId:t}:{})})(t,n),((e,t,n)=>{window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){if(0===window.googletag.pubads().getTargeting(t).length){const r=window.localStorage.getItem(e);window.googletag.pubads().setTargeting(t,r?JSON.parse(r):[]),null==n||n()}}))})(i,o,p),v=()=>{(null==h?void 0:h())||window.permutive.addon("web",{page:{publisher:r,category:(()=>{try{return null==u?void 0:u()}catch(e){return null}})(),description:(()=>{try{return null==c?void 0:c()}catch(e){return null}})(),dayofweek:(new Date).toLocaleDateString("en-us",{weekday:"long"}),article:{editortags:(()=>{try{return null==f?void 0:f()}catch(e){return null}})(),author:(()=>{try{return null==a?void 0:a()}catch(e){return null}})(),publishingdate:(()=>{try{return null==s?void 0:s()}catch(e){return null}})()},user:{age:(()=>{try{return nd 0:l()}catch(e){return null}})(),gender:(()=>{try{return null==d?void 0:d()}catch(e){return null}})()}}})},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{v()}),{once:!0}):v()})(null==e?void 0:e.permutiveConfig)}catch(e){}})(a),i&&(null==o||o.log("external first load"),((e,t)=>{try{if(!(null==e?void 0:e.kahoonaScriptUrl))return;C(e.kahoonaScriptUrl)}catch(e){}})(a),((e,t)=>{try{var n;if(null==t||t.log("Permutive init start"),!(null==e||null===(n=e.permutiveConfig)||void 0===n?void 0:n.permutiveScriptUrl))return null==t?void 0:t.warning("permutiveScriptUrl is empty");C(`${e.permutiveConfig.permutiveScriptUrl}?d=${(new Date).toISOString().substring(0,10)}`),null==t||t.log("Permutive init end")}catch(e){null==t||t.error("Permutive error:",e)}})(a),((e,t)=>{try{if(!(null==e?void 0:e.brandmetricScriptUrl))return;C(e.brandmetricScriptUrl)}catch(e){}})(a))},X=e=>{try{const{pageData:t,providerExclusions:n=[],location:r=`${window.location.origin}${window.location.pathname}`}=e;return n.some((e=>{switch(e.type){case b.URL_CONTAINS:var n;return!!(null===(n=r.match(new RegExp(e.expression)))||void 0===n?void 0:n.length);case b.URL_EXACTLY_MATCH:return r.toLowerCase().trim()===e.expression.toLowerCase().trim();case b.CATEGORY_EQUALS:var i;return(null===(i=t.properties.category)||void 0===i?void 0:i.toLowerCase().trim())===e.expression.toLowerCase().trim()}}))}catch(n){var t;return null===(t=e.logger)||void 0===t||t.error("isIgnoreEvents function error",n),!1}};function Z(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function Q(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Z(o,r,i,a,u,"next",e)}function u(e){Z(o,r,i,a,u,"throw",e)}a(void 0)}))}}function ee(e,t,n){return alue:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te,ne;(ne=te||(te={})).HOURS="HOURS",n"done);ier("errorn t.then((t=>{t instanceof IDBCursor&&ae.set(t,e)})).catch((()=>{})),fe.set(t,e),t}(e);if(se.h o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let a=o.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&o.done]))[0]};return be.set(t,o),o}var ye,_e,we;function Ae(e,t,n,r,i,o,a){try{var u=e[o](a),c=u.value}catch(e){return void n(e)}u.done?t(c):Promise.resolve(c).then(r,i)}function Ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){ect.getOwnPropertyertyeturn n}(OineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}_e=le,le={..._e,get:(e,t,n)=>me(e,t)||_e.get(e,t,n),has:(e,t)=>!!me(e,t)||_e.has(e,t)};class Ie{get isConnected(){return!!this.database}constructor(e={}){Se(this,"config",{prefixName:""}),Se(this,"database",void 0);var t=this;Se(this,"getDataFromStore",function(){var e=Ee((function*(e,n){if(!t.datarn[];if(!n)return yield t.database.getAll(e);const r=[];letore.openCursor();for(;o&&i.length;){const{key:e}=o;o&&i.include o.continue()}return r}));return function(t,n){return e.apply(this,arguments)}}()),Se(this,"convertResponseEventsToDatersion,pe(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),u.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),u}(e,1,{upgrade:(e,t)=>{t<1&&(e.createObjectStore("definitions",{keyPath:"defId"}),e.createObjectStore("events",{keyPath:"computedId"}))}})})));var r=this;Se(this,"getEvents",function(){var e=Ee((function*(e){return yield r.getDataFromStore("events",e)}));return function(t){return e.apply(this,arguments)}}());var i=this;Se(this,"setEvents",function(){var e=Ee((function*(e){if(!i.database)return;const t=i.database.transac[...e.map((e=>t.store.put(e))),t.done]e.apply(this,arguments)}}()),Se(this,"getMergedEvents",((e,t)=>{const n=t.filter((t=>!e.some((e=>e.computedId===t.computedId)))),r=e.reduce(((e,n)=>{const r=t.find((e=>e.computedId===n.computedId)),i=[...new Set([...(null==r?void 0:r.timestamps)||[],...n.timestamps])].sort().slice(-50);return e.push(Oe(Pe({},r,n),,e}),[]);return{allEvents:[...r,...n],updatedEvents:r}}));var o=this;Se(this,"mergeEvents",function(){var e=Ee((function*(e){if(!o.database)return;const t=yield o.getEvents(e.map((e=>e.computedId))),{updatedEvents:n}=o.getMergedEvents(e,t);yield o.setEvents(n)}));return function(t){return e.apply(this,arguments)}}());var a=this;Se(this,"removeEvents",Ee((function*(e=[]){if(!a.database)return;const t=a.database.transaction("events","readwrite");yield Promise.all([...e.map((e=>t.store.delete(e))),t.done])})));var u=this;Se(this,"removeAllEvents",Ee((function*(){if(!u.database)return;const e=u.database.transaction("events","readwrite");yield Promise.all([e.store.clear(),e.done])})));var s=this;Se(this,"getDefinitions",function(){var e=Ee((function*(e){return yield s.getDataFromStore("definitions",e)}));return function(t){return e.apply(this,arguments)}}());var f=this;Se(this,"setDefinitions",function(){var e=Ee((function*(e){if(!f.database)return;const t=f.database.transaction("definitions","readwrite");yield Promise.all([...e.map((e=>t.store.put(e))),t.done])}));return function(t){return e)}}());var l=this;Se(this,"removeDefinitions",Ee((function*(e=[]){if(!l.database)return;const t=l.database.transaction("definitions","readwrite");yield Promise.all([...e.map((e=>t.store.delete(e))),t.done])})));var d=this;Se(this,"removeAllDefinitions",Ee((function*(){if(!d.database)return;const e=d.database.transaction("definitions","readwrite");yield Promise.all([e.store.clear(),e.done])})));var p=this;Se(this,"updateData",function(){var e=Ee((function*({events:e=[],definitions:t=[],deletedDefinitionIds:n=[],deletedEventIds:r=[],fallbackEventIds:i=[],action:o}){if(!p.database)return;const a=(0,T.uniq)([...i,...r]);switch(o){case c.REPLACE:return yield p.removeAllDefinitions(),void(yield Promise.all([p.mergeEvents(p.convertResponseEventsToDatabaseEvents(e)),p.setDefinitions(t),p.removeEveyield Promise.all([p.mergeEvents(p.convertResponseEventsToDatabaseEvents(e)),p.setDefinitions(t),p.removeDefinitions(n),p.removeEvents(a)]))}}));return function(t){return e.apply(this,arg.config,e)}}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Se(Ie,"getEventComputedId",(e=>`${e.d(ye={})).SLOT="slot",we.TITLE="title",we.USRC="usrc",we.UTITLE="utitle";const je={status:"auto",enableKey:"enableTagDebug",prefix:"",withTimestamp:!1};class De{get enabled(){return this._enabled}constructor(e={}){Te(this,"props",je),Te(this,"_enabled",!1),Te(this,"isEnabled",(()=>{const{status:e,enableKey:t}=this.props;if("enabled"===e)return!0;if("disabled"===e)return!1;if("auto"===e&&t){const{search:e}=window.location;return!!new URLSearchParams(e).get(t)}return!1})),Te(this,"log",((...e)=>{this._enabled&&console.log(this.props.withTimestampgetOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertyStor(n,e).enumerable})))),r.forEach((function(t){Te(e,t,n[t])}))}return e}({},this.props,e),this._enabled=this.isEnabled()}}var Ce;!function(e){e.ALL="ALL",e.WARNINGS="WARNIction Re(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Le(o,r,i,a,u,"next",e)}function u(e){Le(o,r,i,a,u,"throw",e)}a(void 0)}))}}function Ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Mructor(){ke(this,"events",{}),ke(this,"fulfilledCondit",(e=>{var t;this.fulfilledConditions.add(e),null===(t=this.events[e])||void 0===t||t.forEach((e=>e())),this.events[e]=[]})),ke(this,"disfulfillCondition",(e=>{this.fulfilledConditions.delete(e)})),ke(this,"addEvent",value}catch(e){re(r,i)}function Fe(a7a32-7d98-4226-8af9-d2a43a8621cc","enabled":false,"verboseMode":"ERRORS","sampling":null,"observedUserId":null,"includeDatabase":false,"includeLocalStorage":false,"includeLoggerState":false}}'}constructor(t={}){Ne(this,"logger",void 0),Ne(this,"config",void 0),Ne(this,"getUser",void 0),Ne(this,"getDatabase",void 0),Ne(this,"getDefinition",void 0),Ne(this,"logHistory",[]),Ne(this,"verbose",Ce.ALL),Ne(this,"observedId",void 0),Ne(this,"externalConfigJson",void 0),Ne(this,"setAndValidateConfig",(()=>{try{const{providerMonitoring:e}=JSON.parse(this.rawConfigJson);if(!e)return this.logger.log("Config is empty");const t=isFinite(e.sampling)&&e.sampling>=0&&e.sampling<=100,n=Object.values(Ce).includes(e.verboseMode);if(!(t&&n&&(0,T.isBoolean)(e.enabled)&&(0,T.isBoolean)(e.includeDatabase)&&(0,T.isBoolean)(e.includeLoggerState)&&(0,T.isBoolean)(e.includeLocalStorage)))return this.logger.error("DMP monitoring config has wrong params:",`isValidSampling: ${t}`,`isValidVerboseMode: ${n}`,`config.enabled: ${e.enabled}`,`config.includeDatabase: ${e.includeDatabase}`,`config.includeLoggerState: ${e.includludeLocalStorage}`);this.config=e}catch(e){this.logger.error("DMP monitoring config is wrong",this.rawConfigJson)}})),Ne(this,"getVerboseLevel",(e=>{var t;return null!==(t=xe[e])&&void 0!==t?t:0})),Ne(this,"setVerbose",(e=>{this.getVerboseLevel(e)>this.getVerboseLevel(this.verbose)&&(this.verbose=e)})),Ne(this,"matchBySamplingAndUserId",(()=>!(!this.observedId||!this.config)&&(this.config.observedUserId?this.config.observedUserId===this.observedId:!this.config.sampling||((e,t)=>{const n=(e=>BigInt("0x"+e.replace(/-/g,"")))(e)%BigInt(t);return Number(n.toString())})(this.observedId,100)<=this.config.sampling))),Ne(this,"addToLogHistory",((...e)=>{try{const t=e.map((e=>JSON.stringify(e))).join(" ");this.logHistory.push(t)}catch(e){this.logger.error("addToLogHistory error",e)}}));var n=this;Ne(this,"getDatabaseState",Re((function*(){try{if(!n.databaseConnect)return"Database connect is wrong";const e=yield n.databaseConnect.getEvents(),t=yield n.databaseConnect.getDefinitions();return{events:JSON.stringify(e),definitions:JSON.stringify(t)}}catch(e){return`getDatabaseState error: ${e}`}}))),Ne(this,"getLocalstorageState",(()=>{try{var e,t,n,r,i;const{dmpid:a="",ts:u=""}=null!==(i=null===(t=this.getUser)||void 0===t||null===(e=t.call(this))||void 0===e?void 0:e.getUserState())&&void 0!==i?i:{};var o;return{userId:a,lastModifiedDate:u,prevDefinitionsIds:null!==(o=null===(r=this.getDefinition)||void 0===r||null===(n=r.call(this))||void 0===n?void 0:n.getDefinitionIds().join(","))&&void 0!==o?o:""}}catch(e){return`getLocalstorageState error: ${e}`}})),Ne(this,"log",((...e)=>{this.logger.log(...e),this.setVerbose(Ce.ALL),this.addToLogHistory(...e)})),Ne(this,"warning",((...e)=>{this.logger.log(...e),this.setVerbose(Ce.WARNINGS),this.addToLogHistory(...e)})),Ne(this,"error",((...e)=>{this.logger.error(...e),this.setVerbose(Ce.ERRORS),this.addToLogHistory(...e)})),Ne(this,"setObservedId",(e=>{this.observedId=e})),Ne(this,"sendData",Re((functit,n)=>{if(navigator.sendBeacon&&"undefined"!=typeof Blob){const n=new Blob([JSON.stringify(t)],{type:"application/json"});if(navigator.sendBeacon(e,n))return}null==n||n()})(e,t,(()=>$(e,{body:t})))}catch(e){return}})));var r=this;Ne(this,"complete",Re((function*(e={}){if(!r.config)return r.logger.error("DMP monitoring config is missing");if(!r.config.enabled)return r.logger.log("!enabled");if(r.getVerboseLevel(r.config.verboseMode)>r.getVerboseLevel(r.verbose))return r.logger.log("!verbose level");if(!r.matchBySamplingAndUserId())return;const t={additionalData:e};return r.config.includeDatabase&&(t.database=yield r.getDatabaseState()),r.config.includeLocalStorage&&(t.localstorage=r.getLocalstorageState()),r.config.includeLoggerState&&(t.loggerLog=r.logHistory),r.sendData(t)}))),this.logger=new De({enableKey:t.enableKey,prefix:t.loggerPrefix,withTimestamp:!0}),this.getUser=t.getUser,this.getDatabase=t.getDatabase,this.getDefinition=t.getDefinition,this.exterigJson=t.externalConfigJson,this.setAndValidateConfig()}}({enableKey:"enableDmpPublisherDebug",loggerPrefix:"[DMP monitoring, platform: Web, version: 2.0.1, label: Provider]",getDefinition:()=>We}),We=new class{constructor(){Ue(this,"localStorageConnect",void 0),Ue(this,"getDefinitionIds",(()=>{const e=this.localStorageConnect.get("prevDefinitionsIds"),t=e&&e.length?e.split(";"):[],n=e&&e.length?e.split(","):[];return t.lengts",(e=>nitionsIds",e.join(","))})),this.localStorageConnect=((e="")=>({get:t=>localStorage.getItem(`${e}${t}`),set:(t,n)=>localStorage.setItem(`${e}${t}`,n),remove:t=>localStorage.removeItem(`${e}${t}`)}))("dmp-publisher-")}},Ke=new class{constructor(e={}){Fe(this,"config",{hosts:[],targets:[]}),Fe(this,"listeners",{}),Fe(this,"deferredMessages",new Me),Fe(this,"isReceiveAllow",(e=>{const t=!this.config.hosts.length||this.config.hosts.includes(e);var n;return t||null===(n=this.config.monitoring)||void 0===n||n.log("origin is not equal",e,this.config.hosts),t})),Fe(this,"createObserver",(()=>{var e=this;window.addEventListener("message",function(){var t,n=(t=function*(t){if(e.isReceiveAllow(t.origin)){var n,r;const i=t.data.type;yield null===(n=(r=e.listeners)[i])||void 0===n?void 0:n.call(r,t.data.payload),e.deferredMessages.fulfillCondition(i)}},function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){Be(o,r,i,a,u,"next",e)}function u(e){B0)}))});return function(e){return n.apply(this,arguments)}}())})),Fe(this,"addListener",(e=>{e.type&&(this.listeners[e.type]=e.callback)})),Fe(this,"removeListener",(e=>{delete this.listeners[e]})),Fe(this,"sendMessage",((e,t)=>{this.deferredMessages.addEvent((()=>{this.config.targets.forEach((t=>{const n=window.frames[t];null==n||n.postMessage(e,"*")}))}),t)})),Fe(this,"sendMessageToPadow.parent)||void 0===t||t.postMessage(e,"*")}),t)})),Fe(this,"sendMessageToOpener",((e,t)=>{this.deferredMessages.addEvent((()=>{var t;null===(t=window.opener)||void 0===t||t.postMessage(e,"*")}),t)})),this.config=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Fe(e,t,n[t])}))}return e}({},this.config,e),this.createObserver()}}({hosts:[],targets:[]});windomonitoring}get definition(){return this.config.definition}get frameConnector(){return this.config.frameConnector}get dmpProviderUuid(){return this.providerConfig.uuid||window.dmpProviderUuid||""}gataCollectionEnabled}get isOnlyExtractFields(){const e=function(e,t){const n=new URLSearchParams(e);var r;return Array.isArray(t)?t.map((e=>{var t;return null!==(t=n.get(e))&&void 0!==t?t:void 0})):null!==(r=n.get(t))&&void 0!==r?r:void 0}(window.location.search,"onlyExtractFields"),t=Date.now()-6e4;return!!e&&Number(e)>t}get isFirstLoad(){return this._isFirstLoad}constructor(e){ee(this,"config",void 0),ee(this,"providerConfig",void 0),ee(this,"_isFirstLoad",void 0),ee(this,"_publisherDMP",void 0),ee(this,"runPreScript",void 0),ee(this,"runPostScript",void 0),ee(this,"extractFieldsToChecker",void 0),ee(this,"insertExternalModules",void 0),ee(this,"setGoogleTagDefinitions",void 0),ee(this,"runPublisherScript",void 0),ee(this,"getUserSnippets",void 0),ee(this,"getPublisherScript",void 0),ee(this,"setPublisherDMP",void 0),ee(this,"init",void 0),ee(this,"run",void 0),ee(this,"refreshData",void 0),this.config=e,this._isFirstLoad=!0,this.extractFieldsToChecker=()=>{this.monitoring.log("run as checker"),this.frameConnector.sendMessageToOpener({type:i.VERIFICATION,payload:N(this.providerConfig.fieldExtractions)})},this.insertExternalModules=()=>{const{fieldExtractions:e,providerExclusions:t}=this.providerConfig;((e,t)=>{try{null==t||t.log("insertSurveyTag start");const s=((e,t="")=>{const n=e||G[t];return n&&null!==(r={"973e193f-6f00-46d3-bae9-e84870287ae2":1,"36699dd9-d954-4d40-be6a-4bbfce1f3652":2,"91f8eae5-0554-4499-8221-28880465ceae":3,"a5beb245-2949-4a76-95f5-bddfc2ec171c":5,"e3f93e9e-8756-457c-addc-3d76aa5b5582":6,"b515cf7f-ac23-4ab4-9418-37d78db1b935":7,"f9ee75d4-540d-4be9-a9c7-3fc2c070a53b":7,"f1d7026f-040a-43f8-9600-bfc39b9251fc":7,"9ce6ead9-6698-4f70-bcc6-2cc8646d2cb2":7,"bc8a7a32-7d98-4226-8af9-d2a43a8621cc":10,"e26b14d0-56b1-4137-99b4-744e82a664df":10,"0accac7d-a6bd-4899-a8ac-54f1962da557":10,"0354db52-501b-4843-bbbe-f1d50aa8d3f6":10,"41e37d4d-43fb-40d7-9762-8ae91252c1e2":11,"2422f7d8-4719-4d25-8d91-af822eeb3e1c":12,"0b41b6f0-1d53-4017-a72b-33a759568873":13,"1ff70d9b-ba5c-4c4b-9759-4bd97f511c8d":14,"788e0fee-a9f4-4c49-a8d6-307539424b2e":15,"d4608a30-40f1-46e4-8b52-71cc29c2dc1a":16,"8738e5c5-03f6-492a-ba8a-397b43474f3b":17,"8668c7e1-ed8b-4584-9218-ecae2b358bc3":18,"e2c597a2-fb13-44de-9adb-1e1390708f6d":21,"79c86a60-3a28-440e-896e-0c1c1073d8f4":22,"1c04541d-67b4-47ea-a76c-a05bfb699d03":23}[n])&&void 0!==r?r:0;var r})(e,window.location.hostname);n=s,r=window,i=document,o="script",r[a="IDXSurvey"]=r[a]||{surveyInput:[]},r[a].u="https://tr.dxmcdn.com",r[a].l=1*new Date,r[a].p=n,u=i.createElement(o),c=i.getElementsByTagName(o)[0],u.async=1,u.src="https://cf.dxmcdn.com/dta/survey.js",c.parentNode.insertBefore(u,c),null==t||t.log("insertSurveyTag done")}catch(e){null==t||t.log("insertSurveyTag error",e)}var n,r,i,o,a,u,c})(this.dmpProviderUuid),this.dmpProviderUuid===V.SPORT5&&C("https://cf.dxmcdn.com/dta/sport5-player-connector.js"),Y(this.dmpProviderUuid,{skip:X({pageData:N(e),providerExclusions:t}),firstLoad:this._isFirstLoad,monitoring:this.monitoring})},this.setGoogleTagDefinitions=()=>{if(!0!==this.providerConfig.isDFPActivationEnabled)return this.monitoring.warning("send data to GTM is disabled");const e=this.definition.getDefinitionIds();this.monitoring.log("prevDefinitionsIds",e),((e,t)=>{window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[];const n=function(){var n,r;null===(n=(r=window",e),null==t||t(e)};"function"!=typeof window.googletag.cmd.unshift?window.googletag.cmd.push(n):window.googletag.cmd.unshift(n)})(e,(e=>{this.monitoring.log("prevDefinitionsIds has been set",e)}))};var t=this;this.runPublisherScript=Q((function*(){try{if(t.monitoring.log("run publisher script"),!t._publisherDMP)return t.monitoring.error("Publisher script is not loaded");t.isFirstLoad?(yield t._publisherDMP.init(),t._isFirstLoad=!1):yield t._publisherDMP.runPageViewEvent()}catch(e){t.monitoring.error("Publisher script running error",e)}}));var n=this;this.getUserSnippets=Q((funart");const[e,t]=yield Promise.all([z(n.dmpProviderUuid,"PRE",(e=>n.monitoring.warning("Pre snippet is failed",e))),z(n.dmpProviderUuid,"POST",(e=>n.monitoring.warning("Post snippet is failed",e)))]);n.runPreScript=e,n.runPostScript=t}catch(e){n.monitoring.s.getPublisherScript=Q((function*(){const e=D(`https://tags.dderUuid}/dmp-main.js`),t=new Promise((t=>{e.onload=()=>{r.monitoring.log("Main script has been loaded"),t()}}));return document.head.prepend(e),t})),this.setPublisherDMP=e=>{this._publisherDMP=e};var o=this;this.init=Q((function*(){try{var e,t,n,r;if(o.isOnlyExtractFields)return o.extractFieldsToChecker();if(!o.dmpProviderUuid)throw"dmpProviderUuid is missing";if(o.setGoogleTagDefinitions(),o.insertExternalModules(),!1===o.isDataCollectionEnabled)return o.monitoring.warning("Data collection is disabled");o.isFirstLoad&&(yield Promise.all([o.getUserSnippets(),o.getPublisherScript()])),null===(e=(t=o).runPreScript)||void 0===e||e.call(t),(n=(r=o).runPostSDMP provider error",e),o.monitoring.complete()}})),this.run=()=>{this.isFirstLoad||this.init()},this.refreshData=()=>{this.monitoring.log("refreshData for google"),this.setGoogleTagDefinitions()},this.providerConfig=(e=>{e.log("[DMP injected]: Parse activation config start");try{const t=JSON.parse('{"uuid":"bc8a7a32-7d98-4226-8af9-d2a43a8621cc","fieldExtractions":[{"uuid":"554e1711-910b-473c-ae03-9f7044d59996","field":{"name":"Author","path":"properties.author","type":"STRING"},"type":"JAVASCRIPT","expression":"const all = document.querySelectorAll(\\\"script[type=\\\\\\\"application\\/ld+json\\\\\\\"]\\\");const r = JSON.parse(all[1].innerHTML);return r.author.name;"},{"uuid":"43719d3b-ee5c-4155-b56b-8dd5f640d850","field":{"name":"Category","path":"properties.category","type":"STRING"},"type":"JAVASCRIPT","expression":"const { vertical_eng_name, categoryName } = window.dataLayer.find(i => i.vertical_eng_name || i.categoryName);return `${vertical_eng_name}\\/${categoryName}`;"},{"uuid":"373cec89-3d2e-4513-8c4f-040d4011b096","field":{"name":"Tags","path":"properties.tags","type":"ARRAY_OF_STRING"},"type":"JAVASCRIPT","expression":"const { tags } = window.dataLayer.find(i => i.tags); return tags.slice(17,tags.length);"}],"providerExclusions":[{"uuid":"a6d254f6-7403-4210-b1b9-cd6ea4404816","type":"CATEGORY_EQUALS","expression":"homepage/"},{"uuid":"062339fa-62a7-4301-9138-54425266333e","type":"URL_CONTAINS","expression":"news.walla"},{"uuid":"09c23630-ddea-42f8-aaa3-254afaa9d75f","type":"URL_EXACTLY_MATCH","expression":"https://www.walla.co.il/"},{"uuid":"28ac311c-2692-4283-a05a-982c992c1513","type":"URL_EXACTLY_MATCH","expression":"https://www.walla.co.il"}],"isDataCollectionEnabled":true,"isDFPActivationEnabled":true,"providerMonitoring":{"uuid":"bc8a7a32-7d98-4226-8af9-d2a43a8621cc","enabled":false,"verboseMode":"ERRORS","sampling":null,"observedUserId":null,"includeDatabase":false,"includeLocalStorage":false,"includeLoggerState":false}}');return e.log("[DMP injected]: Activation config is valid",t),t}catch(t){return e.error("[DMP injected]: Activation config is broken",t),{}}})(this.config.monitoring),this.monitoring.setObservedId(this.dmpProviderUuid)}}({monitoring:$e,definition:We,frameConnector:Ke}),window.dmp.init()})()})();