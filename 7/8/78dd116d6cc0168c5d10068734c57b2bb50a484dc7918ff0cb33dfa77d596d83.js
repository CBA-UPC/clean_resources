/*! For license information please see async-photos-feature-493d404cc91103fced49.js.LICENSE.txt */
"use strict";(globalThis.webpackChunktinderweb=globalThis.webpackChunktinderweb||[]).push([[17988],{91797:(e,t,a)=>{a.d(t,{Z:()=>i});const n=e=>e?Object.fromEntries(Object.entries(e).sort()):e;function i(e,t){return JSON.stringify(n(e))===JSON.stringify(n(t))}},646686:(e,t,a)=>{a.r(t),a.d(t,{authenticateInstagramSaga:()=>b,connectInstagramSaga:()=>I,disconnectInstagramSaga:()=>w,fetchInstagramOAuthUrlSaga:()=>E,promptDisconnectInstagramSaga:()=>O});var n=a(13241),i=a(671502),r=a(897696),s=a(915759),o=a(259668),d=a(478847),c=a(235430),g=a(517727),l=a(662310),u=a(661996),y=a(911654),h=a(320649),m=a(3088),p=a(716734),S=a(411664);const f="INSTAGRAM_CONNECT_AUTH";const E=(0,o.bi)((function*(){if(yield(0,n.Ys)(S.OC))return;const e=yield(0,n.RE)(yield(0,n.RE)(c.ds,g._n,"getInstagramOAuthUrl")),{ig_auth_url:t}=e;yield(0,n.gz)((0,p.HK)(t))}),{name:"fetchInstagramOAuthUrlSaga"}),I=(0,o.bi)((function*(){const{popupHeight:e,popupWidth:t}=r.ZP.instagramSettings;let a=yield(0,n.Ys)(S.OC);a||(yield(0,n.RE)(E),a=yield(0,n.Ys)(S.OC));const o=encodeURIComponent((0,d.Z)());a=`${a}&state=${o}`;const c=screen.width/2-t/2,g=`width=${t},height=${e},top=${screen.height/2-e/2},left=${c},scrollbars=yes`,l=window.open(a,"InstagramLogin",g),u=function(e){return(0,i.GG)((t=>{const a=setTimeout((()=>{t(i.uR)}),2*s.yR),n=a=>{if(a.key===f){const{code:n,state:r}=JSON.parse(a.newValue||"{}");n&&r===e&&t((0,p.YV)(n)),t(i.uR)}},r=a=>{a.data.code&&a.data.state===e&&a.origin===window.location.origin&&a.data.type===f&&(t((0,p.YV)(a.data.code)),t(i.uR))};return window.addEventListener("storage",n),window.addEventListener("message",r),()=>{clearTimeout(a),window.removeEventListener("storage",n),window.removeEventListener("message",r),localStorage.removeItem(f)}}))}(o);try{for(;;){const e=yield(0,n.qn)(u);yield(0,n.gz)(e)}}finally{l?.close(),u.close()}}),{name:"connectInstagramSaga",*errorHandler(){yield(0,n.gz)((0,y.c0)({theme:m.k3,title:[{id:"uhOhSomethingWentWrong"}],body:[{id:"pleaseTryAgain"}]}))}});const b=(0,o.bi)((function*(e){const{code:t}=e.payload,a=yield(0,n.RE)(yield(0,n.RE)(c.ds,g._n,"authenticateInstagram"),t);yield(0,n.gz)((0,p.NF)(a.instagram)),yield(0,n.gz)((0,h.In)())}),{name:"authenticateInstagramSaga",*errorHandler(){yield(0,n.gz)((0,y.c0)({theme:m.k3,title:[{id:"uhOhSomethingWentWrong"}],body:[{id:"pleaseTryAgain"}]}))}}),O=(0,o.bi)((function*(){yield(0,n.gz)((0,l.h)(u.g4,{props:{title:"EditProfile.disconnectInstagram",subtitles:"EditProfile.yourInstagramPhotos",acceptButton:"continue",handleAccept:(0,p.yt)()}}))}),{name:"promptDisconnectInstagramSaga"});const w=(0,o.bi)((function*(){const e=yield(0,n.RE)(yield(0,n.RE)(c.ds,g._n,"deauthorizeInstagram"));yield(0,n.gz)((0,p.q7)(e))}),{name:"disconnectInstagramSaga",*errorHandler(){yield(0,n.gz)((0,y.c0)({theme:m.k3,title:[{id:"uhOhSomethingWentWrong"}],body:[{id:"pleaseTryAgain"}]}))}})},830327:(e,t,a)=>{a.r(t),a.d(t,{reducer:()=>g});var n=a(343599),i=a(454936),r=a(91797),s=a(351843),o=a(584883),d=a(571360);const c=(0,n.ZP)(((e,t)=>{switch(t.type){case o.AUTHENTICATE_INSTAGRAM_SUCCESS:return void Object.assign(e,t.payload);case o.FETCH_INSTAGRAM_OAUTH_URL_SUCCESS:t.payload?.url&&(e.oAuthUrl=t.payload.url);break;case(0,s.aK)(t.type):{const{data:a={}}=t.payload,{instagram:i}=a;if(!i&&(0,r.Z)(i,(0,n.Js)(e)))break;Object.assign(e,i);break}case o.DISCONNECT_INSTAGRAM_SUCCESS:case(0,s.dh)(t.type):return d.default.instagram}}),d.default.instagram),g=(0,i.UY)({instagram:c,isReplacePhoto:(e=d.default.isReplacePhoto,t)=>{switch(t.type){case o.TOGGLE_REPLACE_PHOTO:return t.payload;case(0,s.dh)(t.type):return d.default;default:return e}}})}}]);