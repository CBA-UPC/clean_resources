(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[30],{413:function(e,t,s){"use strict";s.r(t),function(e){s.d(t,"LoginPage",();var n,r=s(3),o=s.n(r),i=s(37),a=s(21),c=s(8),h=s(67),p=s(28),l=s(71),u=s(956),d=s(957),m=s(797),g=s(958),b=s(825),j=s(860),f=s(0);class v extends o.a.PureComponent{constructor(t){super(t),this.updatePhone=this.updatePhone.bind(this),this.onNext=this.onNext.bind(this);let s="choosemethod";e.location&&e.location.hash&&(s=e.location.hash.replace("#","")),this.state={currentFlowStep:s,phone:"",referrer:""}}componentDidMount(){e.onpopstate=()=>{const t=e.location.hash.replace("#","")||"choosemethod";this.setState({currentFlowStep:t}),this._flow.next(t)}}nNext(t,s){var n;const r="choosemethod"===s.flowKey?"":`#${s.flowKey}`;s.index>t.index&&e.history.pushState({},"",r),this.setState({currentFlowStep:s.flowKey,referrer:this.state.referrer||(null===(n=e.document)||void 0===n?void 0:n.referrer)},()=>{this.props.trackEvent({page_type:"other",tag_manager_event:"page_type",referring_source:this.state.referrer})})}updatePhone(e){return this.setState({phone:e}),this.props.requestPhoneVerify(e)}render(){const e=Object(f.jsxs)(a.Button,{classes:"flowBack",onClick:this.onBack,children:[n||(n=Object(f.jsx)(a.SVG,{type:"icon",target:"leftArrow"})),"Back"]});return(Object(f.jsx)("div",{className:"page loginPage",children:Object(f.jsxs)(m.a,{onFlowFinished:this.props.loginSuccess,startAt:this.state.currentFlowStep,onNext:this.onNext,ref:children:[Object(f.jsx)(u.a,{flowKey:"choosemethod",onFbOauth:this.props.attemptFbLogin,mParticleLogin:this.props.mParticleLogin,addScript:this.props.addScript,trackEvent:this.props.trackEvent,pageType:this.props.pageType,screen:this.props.screen}),Object(f.jsxs)(m.a,{flowKey:"email",children:[Object(f.jsx)(d.a,{mParticleLogin:this.props.mParticleLogin,onSubmit:this.props.authEmail,onboarding:!1,screen:this.props.screen,trackEvent:this.props.trackEvent,children:e}),Object(f.jsx)(j.a,{onSubmit:this.props.requestPasswordReset,returnUrl:this.props.returnUrl,trackEvent:this.props.trackEvent,children:e})]}),Object(f.jsxs)(m.a,{flowKey:"phone",children:[Object(f.jsx)(g.a,{verificationSent:this.props.phoneVerifyRequest,onPhoneSubmit:this.updatePhone,trackEvent:this.props.trackEvent,pageType:this.props.pageType,mParticleLogin:this.props.mParticleLogin,children:e}),Object(f.jsx)(b.a,{authorizePhone:this.props.authorizePhoneAccount,verifyPhone:this.props.submitPhoneVerify,phone:this.state.phone,trackEvent:this.props.trackEvent,onboarding:!1,screen:this.props.screen,mParticleLogin:this.props.mParticleLogin,children:e})]})]})}))}}t.default=Object(i.b)((function(e){const t=c.f(e);return{phoneVerifyRequest:c.t(e).phoneVerifyRequest,returnUrl:t.returnUrl,screen:t.screen,pageType:t.type,loginSucessUrl:"/accounts/edit"}}),(function(e,t){let{store:s}=t;const n=s.getState().ui.userAgent;return{addScript:t=>e(p.d(t)),attemptFbLogin:t=>e(l.b(t)),authEmail:t=>e(l.c(t,n)),authorizePhoneAccount:t=>e(l.p(t)),loginSuccess:mParticleLogin:requestPasswordReset:t=>{let{email:s}=t;return e(l.o({email:s}))},requestPhoneVerify:t=>e(l.p(t)),submitPhoneVerify:t=>e(l.s(t)),trackEvent:}))(v)}.call(this,s(16))},748:function(e,t,s){"use strict";var n=s(2),r=s.n(n),o=s(3),i=s(13),a=s.n(i),c=s(0);class h extends o.PureComponent{constructor(){super(...arguments),r()(this,"errorMessages",{default:{default:"Please try again later.",Unauthorized:"Please try again later."},email:{Unauthorized:"Error! Please check your email and password."},phone:{default:"Please try again later.","not found":"Could not find that phone number.","phone has already been taken":"Phone number has already been taken.","Phone number not provisioned with any carrier":"Could not find that phone number."}})}generateMessageFromError(e){const t=this.errorMessages[this.props.errorSet],s=e&&e.data&&e.data.json||{},{errors:n={},user_status:r}=s,o=n&&n.reasons&&n.reasons[0],i=t[r]||r,a=t[o]||o,c=t[e.message]||t.default||e.message;return i||a||c}render(){const e=a()({atom:!0,errorMessage:!0});return!!this.props.errors.length&&Object(c.jsx)("ul",{className:e,children:this.props.errors.map(e=>{const t="string"==typeof e?e:this.generateMessageFromError(e);return(Object(c.jsx)("li",{children:t},`error-${t}`))})})}}h.defaultProps={errors:[],errorSet:"default"},t.a=h},797:function(e,t,s){"use strict";var n=s(3);class r extends n.PureComponent{constructor(e){super(e),this.stepCompleted=this.stepCompleted.bind(this),this.getFlowKeyIndex=this.getFlowKeyIndex.bind(this),this.next=this.next.bind(this),this.done=this.done.bind(this);const t=e.startAt&&this.getFlowKeyIndex(e.startAt)||0;this.startIndex=t,this.state={index:t}}getFlowKeyIndex(e){const t=n.Children.toArray(this.props.children);if("string"!=typeof e)return!!Number.isInteger(e)&&(e<t.length&&e);const s=t.findIndex(;return-1!==s&&s}next(e){let t=!1;const s=Number.isInteger(e)?e:this.state.index+1,r=!1===e?this.startIndex:"string"==typeof e?this.getFlowKeyIndex(e):s;if(this.props.onNext){const t=n.Children.toArray(this.props.children),s=t[this.state.index],o=s&&s.props?s.props.flowKey:null;let i=e;!e&&t[r]&&(i=t[r].props.flowKey),this.props.onNext({index:this.state.index,flowKey:o},{index:r,flowKey:i})}if("string"!=typeof e)if(r>=n.Children.count(this.props.children)&&(t=!0),t){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];this.done(...i)}else this.setState({index:r});else{const t=this.getFlowKeyIndex(e);!1!==t&&this.setState({index:t})}}done(){return this.props.onFlowFinished&&this.props.onFlowFinished(...arguments),this.props.stepCompleted&&this.props.stepCompleted(...arguments),this.setState({index:-1}),!0}stepCompleted(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),n=1;n<t;n++)s[n-1]=arguments[n];!0===e?this.done(...s):this.next(e,...s)}render(){const e=n.Children.toArray(this.props.children)[this.state.index];if(e){const t={stepCompleted:this.stepCompleted};return(Object(n.cloneElement)(e,t))}return!1}}t.a=r},811:function(e,t,s){"use strict";var n=s(3),r=s.n(n),o=s(0);class i extends r.a.PureComponent{constructor(e){super(e),this.togglePassword=this.togglePassword.bind(this),this.onChange=this.onChange.bind(this),this.state={showPassword:!1,value:this.props.value}}nder(){return Object(o.jsxs)("div",{className:"atom passwordInput",children:[Object(o.jsx)("input",{type:this.state.showPassword?"text":"password",name:"password",required:!0,value:this.state.value,onChange:this.onChange,placeholder:this.props.placeholder}),!!this.state.value&&Object(o.jsx)("span",{onClick:this.togglePassword,children:this.state.showPassword?"Hide":"Show"})]})}}i.defaultProps={value:"",placeholder:"Password"},t.a=i},824:function(e,t,s){"use strict";var n,r=s(3),o=s.n(r),i=s(13),a=s.n(i),c=s(21),h=s(748),p=s(0);const l=/^\d{10}$/;class u extends o.a.PureComponent{constructor(e){super(e),this.state={isValid:!0,errors:this.props.errors||[],value:this.props.value,loading:!1},this.onChange=this.onChange.bind(this),this.onSubmit=this.onSubmit.bind(this)}moveInput(e,t){const s="backwards"===t?e.previousElementSibling:e.nextElementSibling;s&&"INPUT"===s.nodeName&&(s.focus(),s.setSelectionRange(1,1))}onChange(e){const t=e.target.value.trim(),s=l.test(t);this.setState({isValid:s,value:t})}onSubmit(e){e.preventDefault(),this.setState({loading:!0},()=>{const t=/\D/,s=this.state.value;return this.props.onSubmit?t.test(s)?this.setState({errors:["Please enter a valid phone number"]}):this.props.onSubmit(e,s):null})}render(){const e=a()({molecule:!0,phoneInput:!0}),{loading:t,isValid:s,value:r}=this.state,{legalDisclaimer:o}=this.props;return Object(p.jsxs)("form",{className:e,onSubmit:this.onSubmit,children:[Object(p.jsx)("h2",{children:this.props.title}),n||(n=Object(p.jsx)("p",{className:"smsText",children:"We'll send you an SMS verification code."})),"+1",Object(p.jsx)("input",{ref:e=>{this._phoneInput=e},name:"telephone",type:"number",inputMode:"numeric",pattern:"[0-9]*",value:r,onChange:this.onChange,required:!0,maxLength:10,title:"telephone number",autoFocus:!0}),Object(p.jsx)(h.a,{errors:this.props.errors,errorSet:"phone"}),o&&Object(p.jsx)("div",{className:"legalDisclaimer",children:o}),Object(p.jsx)(c.Button,{type:"submit",disabled:!s||t,loading:t,children:this.props.buttonText}),this.props.children]})}}u.defaultProps={buttonText:"Next",title:"Please Provide Your Phone Number",value:""},t.a=u},825:function(e,t,s){"use strict";(function(e){var n,r,o=s(3),i=s.n(o),a=s(13),c=s.n(a),h=s(21),p=s(4),l=s(748),u=s(0);class d extends i.a.PureComponent{constructor(e){super(e),this.state={errors:e.errors,isCodeValid:!0,resendCount:30,success:!1,loading:!1},this.onSubmit=this.onSubmit.bind(this),this.onChange=this.onChange.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onVerifyError=this.onVerifyError.bind(this),this.onVerifySuccess=this.onVerifySuccess.bind(this),this.getPhoneNumber=this.getPhoneNumber.bind(this),this.resetCountDown=this.resetCountDown.bind(this),this.onCountDown=this.onCountDown.bind(this),this.resendCode=this.resendCode.bind(this)}CountDown(){this.state.resendCount>0?this.setState({resendCount:this.state.resendCount-1}):e.clearInterval(this.resendCountDown)}moveInput(e,t){const s="backwards"===t?e.previousElementSibling:e.nextElementSibling;s&&"INPUT"===s.nodeName&&s.focus()}onChange(e){const t=e.target;t.value=t.value.trim(),""!==t.value&&this.moveInput(t)}onKeyDown(e){"Backspace"!==e.key||e.target.value||this.moveInput(e.target,"backwards")}async onVerifySuccess(){const{onboarding:e,screen:t}=this.props;this.props.onEditUser?this.props.stepCompleted(!0,"editProfile"):this.props.stepCompleted&&(this.setState({success:!0}),await this.props.mParticleLogin({email:""},{loggedIn:!0,signup_source:"phone",account_verified:!0}),this.props.stepCompleted(!0,!0,!0),this.props.trackEvent({tag_manager_event:"account_verified",accountType:"phone",screen:t,onboarding:e,legacyInstall:!1,legacyAccount:!1}),this.props.isSignup&&this.props.trackEvent({tag_manager_event:"account_created",accountType:"phone",success:!0,socialOnboarding:!1}),this.props.trackAction())}resetCountDown(){this.setState({resendCount:30}),this.resendCountDown=e.setInterval(this.onCountDown,1e3)}onVerifyError(e){let t;switch(e&&e.data&&e.data.json&&e.data.json.user_status){case null:t="Invalid code, please try again.";break;case!1:t="Account not found.";break;default:t="Please try again later."}this.setState({errors:[t]}),this.props.isSignup&&(this.props.trackEvent({tag_manager_event:"account_created",accountType:"phone",success:!1,socialOnboarding:!1}),this.props.trackEvent({tag_manager_event:"user_error",errorType:"account_management",errorMessage:e.output.payload.error||e.message,errorCode:e.data.errorCode,page:"phone"}))}getPhoneNumber(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props.phone||p.a.get("br_phone");return!!t&&(e&&(t=String(t).split("").map((e,t,s)=>t<s.length-2?"*":e).join("")),t)}onSubmit(e){e.preventDefault();const t=this.getPhoneNumber(),{userID:s}=this.props;this.setState({loading:!0},()=>{const e=`${this._code1.value}${this._code2.value}${this._code3.value}${this._code4.value}`;this.props.verifyPhone&&this.props.verifyPhone({phone:t,code:e,userID:s}).then(this.onVerifySuccess).catch(this.onVerifyError)})}resendCode(){event.preventDefault();const e=p.a.get("br_phone"),{userID:t}=this.props;this.props.trackEvent({tag_manager_event:"resend_verification",accountType:"phone"}),this.props.authorizePhone(e,t).then(this.resetCountDown).catch(this.onVerifyError)}getOrdinalender(){const e=c()({molecule:!0,phoneVerify:!0,success:!!this.state.success}),{errors:t,loading:s,resendCount:o,success:i}=this.state,a=this.getPhoneNumber(!0);return Object(u.jsxs)("form",{className:e,onSubmit:this.onSubmit,children:[n||(n=Object(u.jsx)("h2",{children:"Enter Your Code"})),Object(u.jsxs)("p",{children:["A Verification Code was sent to ",a||"the entered phone number","."]}),Object(u.jsx)("div",{className:"verificationCode",children:[1,2,3,4].map(e=>Object(u.jsx)("input",{ref:t=>{this[`_code${e}`]=t},name:`verificationCode${e}`,type:"number",inputMode:"numeric",pattern:"^\\d$",onChange:this.onChange,onKeyDown:this.onKeyDown,required:!0,title:`${this.getOrdinal(e)} digit of the code sent to your phone`,autoFocus:1===e,maxLength:1},e))}),Object(u.jsx)(l.a,{errors:t,errorSet:"phone"}),!!i&&(r||(r=Object(u.jsx)("p",{className:"successMessage",children:"Success!"}))),Object(u.jsx)(h.Button,{type:"submit",disabled:s,loading:s,children:"Verify"}),o<1?Object(u.jsx)(h.Button,{onClick:this.resendCode,children:"Resend Code"}):Object(u.jsxs)("p",{children:["Resend code in ",o," seconds"]}),this.props.children]})}}d.defaultProps={authorizePhone:trackAction:()=>{},errors:[]},t.a=d}).call(this,s(16))},826:function(e,t,s){"use strict";(function(e){var n,r=s(3),o=s(21),i=s(0);class a extends r.PureComponent{nFbLogin(e){e.authResponse&&this.props.attemptFbLogin(e.authResponse),this.props.isSignup&&this.props.trackEvent({tag_manager_event:"account_created",accountType:"facebook",success:!!e.authResponse,socialOnboarding:!1})}onClick(){this.props.trackEvent(),e.FB.login(this.onFbLogin,{scope:"email"})}render(){return Object(i.jsxs)(o.Button,{classes:"fbLoginButton",onClick:this.onClick,children:[n||(n=Object(i.jsx)(o.SVG,{type:"icon",target:"facebookFilled"})),this.props.children]})}}a.defaultProps={attemptFbLogin:()=>{},loadScript:()=>{},trackEvent:()=>{}},t.a=a}).call(this,s(16))},860:function(e,t,s){"use strict";var n,r,o,i,a,c=s(3),h=s.n(c),p=s(21),l=s(0);class u extends h.a.PureComponent{constructor(e){super(e),this.onSubmit=this.onSubmit.bind(this),this.state={error:!1,success:!1}}componentDidMount(){const e=this.props.returnUrl&&this.props.returnUrl.includes("bracketchallenge")?"BCG":"BR";this.props.trackEvent({accountType:"email",app:e,tag_manager_event:"forgot_password"})}onSubmit(e){e.preventDefault();const t=e.target.querySelector("input[name='email']");this.setState({error:!1,success:!1}),this.props.onSubmit({email:t.value}).then(.catch(e=>{e&&e.output&&401===e.output.statusCode&&this.setState({error:"No account found."})})}render(){const e=n||(n=Object(l.jsx)("p",{children:"Enter your email and we'll send you a link to reset your password."}));return(Object(l.jsxs)("div",{className:"atom requestPasswordResetForm",children:[r||(r=Object(l.jsx)("h1",{children:"Reset Password"})),this.state.success?o||(o=Object(l.jsx)("div",{className:"success",children:Object(l.jsx)("p",{children:"Link sent! Please check your email."})})):Object(l.jsxs)("form",{onSubmit:this.onSubmit,children:[this.state.error?Object(l.jsx)("p",{className:"errorMessage",children:this.state.error}):e,i||(i=Object(l.jsx)("input",{name:"email",autoFocus:!0,type:"email",required:!0,placeholder:"Email",pattern:"^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$"})),a||(a=Object(l.jsx)(p.Button,{classes:"submit",type:"submit",children:"Send Link"}))]}),this.props.children]}))}}t.a=u},956:function(e,t,s){"use strict";var n,r,o=s(3),i=s.n(o),a=s(13),c=s.n(a),h=s(21),p=s(826),l=s(98),u=s(0);class d extends i.a.PureComponent{constructor(e){super(e),this.onPhone=this.props.stepCompleted.bind(this,"phone"),this.onEmail=this.props.stepCompleted.bind(this,"email"),this.onFacebook=this.onFacebook.bind(this)}onFacebook(){return this.props.onFbOauth(...arguments).then(async()=>{await this.props.mParticleLogin({email:this.props.email||""},{loggedIn:!0,signup_source:"facebook",account_verified:!0}),this.props.stepCompleted(!0),this.props.trackEvent({tag_manager_event:"login",accountType:"facebook",screen:this.props.screen||"Login",loginSuccess:!0})}).catch(e=>{this.setState({errors:[e]}),this.props.trackEvent({tag_manager_event:"login",accountType:"facebook",screen:this.props.screen||"Login",loginSuccess:!1}),this.props.trackEvent({tag_manager_event:"user_error",errorType:"account_management",errorMessage:e.output.payload.error||e.message,errorCode:e.data.errorCode,page:"facebook"})})}render(){const e=c()({chooseLoginMethod:!0,molecule:!0});return(Object(u.jsxs)("div",{className:e,children:[n||(n=Object(u.jsx)(l.a,{})),Object(u.jsx)(h.Button,{classes:"phone",onClick:this.onPhone,children:"Sign in with Phone"}),Object(u.jsx)(p.a,{attemptFbLogin:this.onFacebook,loadScript:this.props.addScript,children:"Sign in with Facebook"}),Object(u.jsx)(h.Button,{classes:"email",onClick:this.onEmail,children:"Sign in with Email"}),r||(r=Object(u.jsx)(h.Button,{classes:"signUp",href:"/sign_up",children:"Don’t have an account? Sign Up"}))]}))}}t.a=d},957:function(e,t,s){"use strict";var n,r,o,i,a,c=s(3),h=s(13),p=s.n(h),l=s(21),u=s(748),d=s(811),m=s(0);class g extends c.PureComponent{constructor(e){super(e),this.onSubmit=this.onSubmit.bind(this),this.showResetPasswordFlow=this.showResetPasswordFlow.bind(this),this.state={errors:this.props.errors}}onSubmit(e){e.preventDefault();const t=e.target.querySelector("input[name='email']"),s=this._passwordField.state,{onboarding:n,screen:r,userAgent:o}=this.props;this.props.onSubmit({email:t.value,password:s.value},o).then(()=>{this.props.stepCompleted(!0,!0),this.props.trackEvent({tag_manager_event:"login",accountType:"email",screen:r,loginSuccess:!0,onboarding:n})}).catch(e=>{this.setState({errors:[e]}),this.props.trackEvent({tag_manager_event:"login",accountType:"email",screen:r,loginSuccess:!1,onboarding:n})}}render(){const e=p()({emailLoginForm:!0,atom:!0,errors:this.state.errors.length});return(Object(m.jsxs)("form",{onSubmit:this.onSubmit,className:e,children:[n||(n=Object(m.jsx)("h1",{children:"Sign In with Email"})),r||(r=Object(m.jsx)("p",{children:"Enter your email address and password."})),o||(o=Object(m.jsx)("input",{type:"text",name:"email",placeholder:"Email address",autoFocus:!0})),Object(m.jsx)(d.a,{re}}),Object(m.jsx)(u.a,{errors:this.state.errors,errorSet:"email"}),i||(i=Object(m.jsx)("div",{className:"legalText",children:Object(m.jsxs)("p",{children:["By proceeding, you agree to the terms and conditions of the Bleacher Report"," ",Object(m.jsx)("a",{href:"https://bleacherreport.com/pages/terms",children:"Terms of Use"})," and"," ",Object(m.jsx)("a",{href:"https://www.warnermediaprivacy.com/policycenter/b2c/wm/",children:"Privacy Policy"}),"."]})})),a||(a=Object(m.jsx)(l.Button,{classes:"submit",type:"submit",children:"Sign In"})),Object(m.jsx)(l.Button,{classes:"forgot",onClick:this.showResetPasswordFlow,children:"Forgot password?"}),this.props.children]}))}}g.defaultProps={errors:[],stepCompleted:()=>{},trackEvent:()=>{}},t.a=g},958:function(e,t,s){"use strict";var n,r=s(3),o=s.n(r),i=s(21),a=s(1),c=s(824),h=s(0);class p extends o.a.PureComponent{constructor(e){super(e),this.state={errors:[]},this.onClick=this.onClick.bind(this),this.onSubmit=this.onSubmit.bind(this)}onSubmit(e,t){e.preventDefault(),this.props.onPhoneSubmit(t).then(async()=>{this.setState({errors:[]}),this.props.stepCompleted(),await this.props.mParticleLogin({email:""},{loggedIn:!0,signup_source:"phone",account_verified:!0}),this.props.trackEvent({tag_manager_event:"login",accountType:"phone",loginSuccess:!0,screen:this.props.pageType||"Login"})},()=>{this.props.trackEvent({tag_manager_event:"login",accountType:"phone",loginSuccess:!1,screen:this.props.pageType||"Login"})}).catch(e=>{this.setState({errors:[e]})})}onClick(e){e.preventDefault(),this.props.stepCompleted(!0,"choosemethod")}render(){return Object(h.jsxs)(c.a,{errors:this.state.errors,onSubmit:this.onSubmit,buttonText:"Send SMS Verification",title:"Sign In with Your Phone",legalDisclaimer:Object(h.jsxs)("p",{children:["By proceeding, you agree to the ",n||(n=Object(h.jsx)("a",{href:"/pages/terms",children:"Terms of Use"}))," and acknowledge the ",Object(h.jsx)("a",{href:a.H.privacy(),children:"Privacy Policy"}),"."]}),children:[Object(h.jsx)(i.Button,{href:"/sign_in",onClick:this.onClick,children:"Sign In with Facebook or Email"}),this.props.children]})}}p.defaultProps={onPhoneSubmi}},t.a=p}}]);
//# sourceMappingURL=https://static-assets.bleacherreport.net/js/loginPage-b86fe960.js.map