!);var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"redpop@b474a6ad4354f4ba5fde672fa4e9c2c267684761"};"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[863],{82145:(e,a,s)=>{s.d(a,{Z:()=>g});var r=s(54138),t=s.n(r),n=s(54589),l=s.n(n),i=s(36343),d=s(55015),c=s(2629),o=["isCompact","isRounded"],u=(0,i.q)("reblog"),m=(0,i.q)("reblog-compact"),h=(0,i.q)("reblog-rounded"),p=e=>{var a=e.isCompact,s=e.isRounded,r=l()(e,o);return a?(0,c.jsx)(m,t()({},r)):s?(0,c.jsx)(h,t()({},r)):(0,c.jsx)(u,t()({},r))};p.defaultProps={size:d.Z.desktop.reblogIconSize,isCompact:!1,isRounded:!1};let g=p},37560:(e,a,s)=>{s.d(a,{Z:()=>c});var r=s(50209),t=s.n(r),n=s(95004),l=s(36485),i=s(2629);class d extends n.Component{render(){var e=this.props,a=e.className,s=e.src,r=e.title,t=e.queryParams,n=e.scrolling,d=e.frameBorder,c=e.style,o=e.onLoad,u=e.placementId,m=e.allow,h=e.allowFullScreen;return(0,i.jsx)("iframe",{className:a,name:u,title:r,src:(0,l.Z)(s,t),scrolling:n,frameBorder:d,style:c,onLoad:o,allow:m,allowFullScreen:h})}}t()(d,"defaultProps",{className:"",queryParams:{},scrolling:"no",frameBorder:0});let c=d},48352:(e,a,s)=>{s.d(a,{Z:()=>v});var r=s(54138),t=s.n(r),n=s(33970),l=s.n(n),i=s(95004),d=s(78994),c=s(55673),o=s(43523),u=s(22424),m=s(12736),h=s(14544),p=s(78667);let g=e=>{var a=(0,p.bp)().logEvent,s=(0,d.TH)().pathname,r=(0,c.lr)(),n=l()(r,1)[0];(0,i.useEffect)(()=>{"embed"===n.get("source")&&a({pathname:s,eventName:o.J.EmbedPostClick,eventDetails:t()(t()({},e),{},{refUrl:n.get("refUrl"),action:n.get("action")})})},[])},v=e=>{var a=e.page,s=e.eventDetails,r=(0,u.wL)().logEvent,n=(0,d.TH)().pathname,p=(0,c.lr)(),v=l()(p,1)[0],f=(0,h.M)().name,b=(0,m.z)(),x=b.isModalShowing,j=b.isPeeprShowing,y=(0,i.useRef)(x||j),P=v.get("source"),N=()=>r({page:a,pathname:n,eventName:o.J.ScreenView,eventDetails:t()(t()({pathname:n,referrer:document.referrer,color_palette:f},P&&{source:P}),s)});return(0,i.useEffect)([n,a]),(0,i.useEffect)(()=>{!y.current||x||j||N(),y.current=x||j},[y,x,j]),g(),null}},96613:(e,a,s)=>{s.d(a,{Z:()=>d});var r=s(5754),t=s.n(r);let n={creditCardLogo:"nC4hC",text:"OEz91",logo:"NErP7",digits:"YhC7x",americanexpress:"kELje",discover:"cXWjm",mastercard:"s5cFj",visa:"ve6Vt"};var l=s(2629),i=["americanexpress","discover","mastercard","visa"];let d=e=>{var a=e.className,s=e.digits,r=e.name,d=r.toLowerCase().replace(/\s/g,""),c=i.includes(d);return(0,l.jsxs)("div",{className:t()(n.creditCardLogo,a),children:[(0,l.jsx)("div",{className:t()({[n.text]:!c,[n.logo]:c,[n[d]]:c}),"data-testid":"creditCardLogo",children:!c&&r}),!!s&&(0,l.jsx)("span",{className:n.digits,children:s})]})}},25264:(e,a,s)=>{s.r(a),s.d(a,{default:()=>O});var r=s(33970),t=s.n(r),n=s(5754),l=s.n(n),i=s(95004),d=s(78994),c=s(62570),o=s(6135),u=s(18488),m=s(54382),h=s(90127),p=s(78667),g=s(63583),v=s.n(g),f=s(88926),b=s(53564),x=s(85795),j=s(83013),y=(e,a)=>Promise.all([(0,j.b)(e).then(e=>e.response),(0,x.ZP)(e).getPayoutsBalance(a).fetch().then(e=>e.response).catch(x.OO),(0,x.ZP)(e).getPayoutsList(a).fetch().then(.catch(x.OO)]).then(e=>{var s=t()(e,3),r=s[0].user.blogs,n=s[1],l=n.balance,i=n.stripeDashboardUrl,d=s[2].payouts,c=r.find(;return{isTippingOn:!!(null!=c&&c.isTippingOn),balance:l,payouts:d,stripeDashboardUrl:i}}),P=s(96613),N=s(67023),Z={});let w={loader:"lW98P",wrapper:"n0gF4",main:"v56Q7",section:"x50UP",payoutDetails:"USxv6",balanceAmount:"MlCda",description:"bt3ZN",emptyMessage:"_Mlai",editButton:"rvUAu",listHeader:"SKFJJ",listItem:"MgAMY",amount:"qfJjV",status:"uYX0p",destination:"GAygr",date:"viWm9",statusBadge:"mqEwF",paid:"ee5tN",failed:"sXVHM"};var C=s(2629);let S=e=>{var a,s=e.data,r=s.amountCents,t=s.currencyCode,n=s.status,i=s.destinationDigits,d=s.destinationName,c=s.arrivalDateTs,o=(0,p.bp)(),u=o._getPriceInCurrency,h=o._getLocaleDateString,g=(0,f.T4)(r,t,u),v=h(new Date(1e3*c),N.C.Notes,!0);switch(n){case Z.Paid:a=(0,C.jsx)(m.ZP,{children:"Paid"});break;case Z.Cancelled:a=(0,C.jsx)(m.ZP,{children:"Cancelled"});break;case Z.Failed:a=(0,C.jsx)(m.ZP,{children:"Failed"});break;default:a=n}return(0,C.jsxs)("div",{className:w.listItem,children:[(0,C.jsx)("div",{className:w.amount,children:g}),(0,C.jsx)("div",{className:w.status,children:(0,C.jsx)("span",{className:l()(w.statusBadge,w[n]),children:a})}),(0,C.jsx)("div",{className:w.destination,children:(0,C.jsx)(P.Z,{name:d,digits:i})}),(0,C.jsx)("div",{className:w.date,children:v})]})};var E=s(52980),I=s(30337),k=s(43597),_=s(32468),D=s(48352);let B=e=>{var a=e.blogName,s=e.children,r=_.vS.payouts(a);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(D.Z,{page:b.H.analyticsPageName}),(0,C.jsx)(E.Z,{activePage:r,children:(0,C.jsx)(k.Z,{sidebar:(0,C.jsx)(I.Z,{activeBlogPage:r}),children:(0,C.jsx)("div",{className:w.wrapper,children:s})})})]})},O=()=>{var e,a=(0,p.bp)(),s=a.getBootstrap,r=a.apiFetch,n=a._getPriceInCurrency,g=a._t,x=null==s?void 0:s(b.R),j=(0,d.UO)().blogName,P=(0,i.useState)(!x.balance),N=t()(P,2),Z=N[0],E=N[1],I=(0,i.useState)((null===(e=x.balance)||void 0===e?void 0:e.total)||[]),k=t()(I,2),_=k[0],D=k[1],O=(0,i.useState)(x.payouts||[]),L=t()(O,2),R=L[0],F=L[1],A=(0,i.useState)(x.isTippingOn),J=t()(A,2),M=J[0],T=J[1],U=(0,i.useState)(x.stripeDashboardUrl),W=t()(U,2),q=W[0],H=W[1];if((0,i.useEffect)(()=>{_.length>0||(E(!0),y(r,j).then(e=>{T(e.isTippingOn),D(e.balance.total),F(e.payouts),E(!1),H(e.stripeDashboardUrl)}))},[r,_,j,Z]),Z)return(0,C.jsx)(B,{blogName:j,children:(0,C.jsx)("div",{className:w.loader,children:(0,C.jsx)(o.Z,{})})});if(!M)return(0,C.jsx)(d.Fg,{to:(0,h.vw)({blogName:j}),replace:!0});var z=(0,f.T4)(_[0].amountCents,_[0].currencyCode,n),G=g("Edit");return(0,C.jsxs)(B,{blogName:j,children:[(0,C.jsx)("h1",{children:"Payouts"}),(0,C.jsxs)("div",{className:w.main,children:[(0,C.jsxs)("div",{className:w.section,children:[(0,C.jsx)("h2",{children:(0,C.jsx)(m.ZP,{children:"Current balance"})}),(0,C.jsxs)("span",{className:w.balanceAmount,children:[z," ",_[0].currencyCode]}),(0,C.jsx)("p",{className:w.description,children:(0,C.jsx)(m.ZP,{children:"Earnings from Post+ or tips will show here"})})]}),(0,C.jsxs)("div",{className:l()(w.section,w.payoutDetails),children:[(0,C.jsxs)("div",{className:w.details,children:[(0,C.jsx)("h2",{children:(0,C.jsx)(m.ZP,{children:"Payout details"})}),(0,C.jsx)("p",{className:w.description,children:(0,C.jsx)(m.ZP,{children:"View and edit your details over at Stripe"})})]}),(0,C.jsx)("div",{className:w.editButton,children:(0,C.jsxs)(u.Z,{label:G,theme:"border",size:"small",textColor:v().paletteBlack,backgroundColor:v().paletteGray15,href:q,feature:!1,children:[G,(0,C.jsx)(c.Z,{colors:{primary:v().paletteBlack}})]})})]}),(0,C.jsxs)("div",{className:w.section,children:[(0,C.jsx)("h2",{children:(0,C.jsx)(m.ZP,{children:"Recent payouts"})}),R.length?(0,C.jsxs)("div",{className:w.list,children:[(0,C.jsxs)("div",{className:w.listHeader,children:[(0,C.jsx)("span",{className:w.amount,children:(0,C.jsx)(m.ZP,{children:"Amount"})}),(0,C.jsx)("span",{className:w.status,children:(0,C.jsx)(m.ZP,{children:"Status"})}),(0,C.jsx)("span",{className:w.destination,children:(0,C.jsx)(m.ZP,{children:"Bank/Card"})}),(0,C.jsx)("span",{className:w.date,children:(0,C.jsx)(m.ZP,{children:"Date"})})]}),(0,C.jsx)("div",{className:w.listItems,children:R.map(})]}):(0,C.jsx)("p",{className:w.emptyMessage,children:(0,C.jsx)(m.ZP,{children:"Payouts to your bank account will appear here."})})]})]})]})}},95867:(e,a,s)=>{s.d(a,{ZP:()=>m,jx:()=>o,n5:()=>u});var r=s(33970),t=s.n(r),n=s(95004),l=s(5553),i=s(44561),d=s(49116),c="lastSelectedBlog",o=e=>{var a;try{a=JSON.parse(d.E.getItem(c)||"null")}catch(e){}return null==e?void 0:e.find(e=>{var s;return e.uuid===(null===(s=a)||void 0===s?void 0:s.uuid)})},u=let m=()=>{var e=(0,n.useState)(),a=t()(e,2),s=a[0],r=a[1],d=(0,l.n)().data;return(0,n.useEffect)(()=>{var e=o(d||[]),a=(0,i.Z)(d||[]);r(e||a)},[d]),{selectedBlog:s,onChangeSelectedBlog:}},68859:(e,a,s)=>{s.d(a,{Z:()=>r});let r=e=>{if(!e)return!1;try{a=new URL(e)}catch(e){return!1}var a,s=a.hostname;return"safe.txmblr.com"===s||/(?:^tumblr|\.tumblr)\.(?:com|net)$/.test(s)}},60042:(e,a,s)=>{s.d(a,{Ev:()=>l,ag:()=>i,bG:()=>d,oL:()=>n});var r=s(94576),t=s(68859);function n(e,a){var s,n=r=>{var n=function(e){var a,s=e.origin,r=e.source,n=e.data;if(!(n&&s&&r)||!(0,t.Z)(s))return null;try{a=JSON.parse(n)}catch(e){return null}if(!a.method)return null;var l=a.method.match(/^([^:]+):(.+)$/);if(!l)return null;var i=l[1],d=l[2],c=a.args[0];return{origin:s,namespace:i,name:d,source:r,cid:a.cid,data:c}}(r);if(n&&n.namespace===e){if("_syn"===n.name){s={namespace:e,source:n.source,origin:n.origin},function(e,a,s,r){var t=JSON.stringify({method:`${s}:_method_callback_responder`,args:[r]});e.postMessage(t,a)}(n.source,n.origin,e,{response:"ack",cid_response:n.cid});return}a[n.name]&&a[n.name](n.data)}};return(0,r.Rr)("message",n),{handler:n,getChannelInfo:()=>s}}ar i={listen:n,unlisten:l};function d(e,a,s){var r=e.source,t=e.target,n=e.namespace,l=JSON.stringify({method:`${n}:${a}`,args:[s]});r.postMessage(l,t)}},59379:(e,a,s)=>{s.d(a,{h:()=>t});var r=s(22979),t=e=>{var a=e.editablePost,s=e.isReblog,t=e.isReblogWithPaywall,n=e.isInbox,l=e.isAsk,i=e.isPrefilledPost,d=e.isReblogWithPoll;return!!(null!=a&&a.isBlocksPostFormat||s&&a&&(0,r.WN)(a))||!!d||!!t||!!l||null!=a&&!!a.isAdFreeGiftAsk||null!=a&&!!a.isTumblrmartGiftAsk||!!n&&!(null!=a&&a.isSubmission)||!!i}},8737:(e,a,s)=>{s.d(a,{Ly:()=>i,Tf:()=>n,r9:()=>l});var r=s(49116),t="reblogPostData",n=(e,a)=>{try{var s=r.E.getItem(t);if(s){var n=JSON.parse(s),l=n.postId,d=n.placementId,c=n.isLongPost,o=n.tabId;if(e!==l)return i(),{placementId:a};return{placementId:d,isLongPost:c,tabId:o}}return{placementId:a}}catch(e){return{placementId:a}}},l=(e,a,s,n)=>{try{r.E.setItem(t,JSON.stringify({postId:e,placementId:a,isLongPost:s,tabId:n}))}catch(e){}},i=,82560:(e,a,s)=>{s.d(a,{fE:);var r=s(59379),t=e=>{var a=e.isMobile,s=e.features,t=s.redpopDesktopEditorBeta,n=s.legacyEditorAccess,l=e.editablePost,i=e.isReblog,d=e.isReblogWithPaywall,c=e.isInbox,o=e.isAsk,u=e.isPrefilledPost,m=e.isReblogWithPoll,h=e.isPremiumPartner;return!(0,r.h)({editablePost:l,isReblog:i,isReblogWithPaywall:d,isAsk:o,isInbox:c,isPrefilledPost:u,isReblogWithPoll:m})&&(null!=l&&!!l.shouldOpenInLegacy||!a&&!!(n||h)&&!t)}}}]);