"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[3336],{63336:function(e,t,i){i.d(t,{Z:);var o=i(93433),n=i(29439),r=i(96420),l=i(72668),a=i(76035),s=i(58873),d=i(9289),c=i(85281),u=i(24193),g=i(47825),p=i(16031),v=i(70816),f=i.n(v),h=i(47313),x=i(58467),m=i(8566),Z=i(28422),b=i(91345),y=i(25258),j=i(32756),k=i(11149),w=i(53674),S=i(90297),C=i(52769),z=i(41872),D=i(20716),M=i(4942),I=i(1413),T=i(68728),B=i(11069),E=i(19989),L=i(24813),A=i(7003),O=i(20201),P=i(71651),N=i(944),U=i(63694),W=i(96849),R=i(62982),V=i(65582),F=i(35982),H=i(19332),Y=i(47053),G=i(46417);function K(e){var t,i,o,n,r,l,a,s,d,c=e.item,u=e.selectedMedia,g=e.selectModeEnabled,v=e.boundary,f=e.toggleSelect,m=e.toggleBulkSelect,Z=(0,O.Z)(),y=(0,x.TH)(),j=(0,x.s0)(),w=(0,k.v)(),C=(0,U.Z)().isFavoriteDisabled,z=(0,S.l)(b.YR),D=(0,h.useRef)(null),K=(0,L.Z)(Z.breakpoints.down("sm")),_=(0,P.Z)(D),q=(0,H.Z)().mutation,X=!z&&(null===c||void 0===c?void 0:c.isBlurred),$=(0,Y.Z)(c,v),J=u.get(null===c||void 0===c?void 0:c.id),Q=(0,F.Z)(),ee=Q.getDragImage,te=Q.removeDragImage,ie=!(null===c||void 0===c||null===(t=c.attributes)||void 0===t||!t.find(()),oe="small";w.zoom<4&&(oe="medium");var ne=(0,b.at)(),re=(0,I.Z)({easyLinkingMode:!(null===ne||void 0===ne||null===(i=ne.profile)||void 0===i||null===(o=i.albumsSettings)||void 0===o||!o.easyLinkingMode),linkBackOption:!(null===ne||void 0===ne||null===(n=ne.profile)||void 0===n||null===(r=n.albumsSettings)||void 0===r||!r.linkBackOption),showImageTitle:!(null===ne||void 0===ne||null===(l=ne.profile)||void 0===l||null===(a=l.albumsSettings)||void 0===a||!a.showImageTitle)},null===ne||void 0===ne||null===(s=ne.profile)||void 0===s||null===(d=s.albumsSettings)||void 0===d?void 0:d.links);return c?(0,G.jsxs)("div",{style:{position:"relative"},ref:D,children:[(0,G.jsxs)(W.Z,{isActive:g||J||_,onClick:sx:{top:8,left:8,zIndex:1,backgroundColor:J?Z.palette.primary.main:"rgba(71,85,105,0.5)","&:hover":{backgroundColor:J?"white":"rgba(71,85,105,0.9)"}},"data-test":J?"deselect":"select",children:[J&&(0,G.jsx)(T.Z,{color:"inherit",fontSize:oe,sx:{background:Z.palette.primary.main,borderRadius:"50%",padding:"2px"}}),!J&&(0,G.jsx)(T.Z,{color:"inherit",fontSize:oe,sx:{background:"transparent",borderRadius:"50%",padding:"2px"}})]}),c.isVideoType&&!c.livePhoto&&(0,G.jsx)(E.Z,{sx:(0,M.Z)({color:"white",opacity:"0.8",position:"absolute",top:8,right:36},Z.breakpoints.down("sm"),{fontSize:"large"})}),!X&&!C&&(0,G.jsxs)(W.Z,{isActive:ie||_,sx:{top:8,right:8,"&:hover":{backgroundColor:"rgba(71,85,105,0.9)"}},onClick:function(){var e={imageIds:[c.id],add:["favorite"]};ie&&(delete e.add,e.delete=["favorite"]),q({variables:e})},children:[ie&&(0,G.jsx)(B.Z,{fontSize:oe,sx:{stroke:"white",strokeWidth:2,padding:"2px"}}),!ie&&(0,G.jsx)(B.Z,{fontSize:oe,sx:{stroke:Z.palette.primary.contrastText,fillOpacity:0,strokeWidth:2,zIndex:1,padding:"2px"}})]}),(0,G.jsx)("img",{alt:c.title,"data-test":"media-link",onClick:function(e){var t;(0,p.isEmpty)(u)&&!g?(t=y.pathname.includes("/d/")?y.pathname.substring(0,y.pathname.indexOf("/d/")):y.pathname,j("".concat(t,"/p/").concat(c.id))):e.shiftKey?m(c.id):f(c.id)},onError:function(e){e.currentTarget.src=c.isVideoType?N.h:N.N,e.currentTarget.srcset=c.isVideoType?N.h:N.N},role:"presentation",src:$,srcSet:$,onDragStart:function(e){e.stopPropagation();var t=ee(c,!!J),i=J?"all":c.id;return e.dataTransfer.setData("id",i),e.dataTransfer.setDragImage(t,0,0),!1},onDragEnd:style:{borderStyle:"solid",borderWidth:3,borderColor:"transparent",filter:X?"blur(5px) brightness(95%)":"none",width:v,height:v,objectFit:w.cropMode?"contain":"cover",display:"flex"}}),(null===c||void 0===c?void 0:c.isBlurred)&&(0,G.jsx)(V.Z,{}),(0,G.jsx)(R.Z,{media:c,isActive:J||_,settings:re,displayFab:K||w.zoom>4||(null===re||void 0===re?void 0:re.showImageTitle),hide:K&&w.zoom>3}),(null===re||void 0===re?void 0:re.showImageTitle)&&!K&&(0,G.jsx)(A.Z,{title:c.title,position:"bottom"})]}):null}var _=i(64009),q=i(2127),X=i(94808),$=i(50494),J=(0,i(54750).Z)((0,G.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),Q=i(61689),ee=i(47131),te=i(61113),ie=(0,i(4906).Z)(d.Z)({minHeight:0,padding:0,"&:hover":{"& $check":{display:"block",position:"relative"}}});function oe(e){var t=e.toggleExpand,i=e.itemCount,o=e.toggleSelect,n=e.title,r=e.expanded,l=e.selected,a=e.isEmpty,s=(0,O.Z)(),d=(0,L.Z)(s.breakpoints.down("lg")),c=!a()||d;return(0,G.jsxs)(ie,{children:[(0,G.jsxs)(te.Z,{variant:"subtitle2",sx:{display:"flex",alignContent:"center"},children:[(0,G.jsx)("strong",{children:n}),("No Date Available"===n||"No Title Available"===n)&&(0,G.jsx)(Q.Z,{arrow:!0,title:"Some images may not contain certain data that allows us to sort these images.",children:(0,G.jsx)(_.Z,{color:"primary",fontSize:"small"})})]}),(0,G.jsxs)("div",{style:{flex:1,marginLeft:"10px"},children:[(0,G.jsxs)(te.Z,{variant:"caption",children:[i," Images"]}),(0,G.jsx)(ee.Z,{onClick:o,"data-test":"dateselect",size:"small",children:l?(0,G.jsx)(q.Z,{color:"primary"}):(0,G.jsx)(X.Z,{sx:{display:c?void 0:"none"}})})]}),(0,G.jsx)(ee.Z,{onClick:t,"data-test":"dateselect",children:r?(0,G.jsx)($.Z,{}):(0,G.jsx)(J,{})})]})}function ne(e){var t=e.items,i=e.title,r=e.boundary,l=(0,h.useState)(!0),a=(0,n.Z)(l,2),s=a[0],d=a[1],c=(0,S.l)(b._N).media,u=(0,D.Z)(),g=u.unselectGroup,p=u.selectedMedia,v=u.isGroupSelected,f=u.selectGroup,x=u.isEmpty,m=u.toggleBulkSelect,Z=new Map;p.forEach(();var y=t.map((),j=(0,h.useState)(!1),k=(0,n.Z)(j,2),w=k[0],M=k[1],I=function(e){Z.get(e)?(0,b.WV)(p.filter(()):(0,b.WV)([].concat((0,o.Z)(p),[e]))},T=return(0,h.useEffect)((,[y,v]),(0,G.jsxs)(C.Z,{expanded:s,sx:{boxShadow:"none"},"data-first-image":t[0].id,children:[(0,G.jsx)(oe,{title:i,itemCount:t.length,expanded:s,selected:w,toggleExpand:toggleSelect:isEmpty:x}),(0,G.jsx)(z.Z,{sx:{display:"flex",flexWrap:"wrap"},children:t.map((function(e){return(0,G.jsx)(K,{item:e,selectedMedia:Z,selectModeEnabled:!!c,toggleSelect:I,toggleBulkSelect:T,boundary:r},e.id)}))})]})}function re(e){var t,i,v,x,S=e.startingCursor,C=(0,k.Z)().settings,z=(0,r.t)(Z.kYd,{variables:{scrollPointer:S,scrollDirection:Z.IeD.Up,pageSize:40,sortBy:C.sortBy},notifyOnNetworkStatusChange:!0,onError:function(e){y.Z.error("An error has occured",e)}}),D=(0,n.Z)(z,2),M=D[0],I=D[1],T=(0,l.a)(Z.kYd,{variables:{scrollPointer:S,scrollDirection:Z.IeD.Down,pageSize:40,sortBy:C.sortBy},notifyOnNetworkStatusChange:!0,onError:),B=null===(t=I.data)||void 0===t?void 0:t.getUserImages.scrollPointer,E=null===(i=T.data)||void 0===i?void 0:i.getUserImages.scrollPointer,L=(null===(v=I.data)||void 0===v?void 0:v.getUserImages.items)||[],A=(null===(x=T.data)||void 0===x?void 0:x.getUserImages.items)||[],O=(0,p.uniqBy)([].concat((0,o.Z)(L),(0,o.Z)(A)),"id"),P=(0,p.groupBy)(O,(),N=function(e,t){return f()(new Date(t)).isAfter(new Date(e))?1:(f()(new Date(e)).isAfter(new Date(t)),0)},U=(0,p.debounce)((function(){if(I.called){if(B){var e={scrollPointer:B};I.fetchMore({variables:e})}}else M()}),1e3,{leading:!0}),W=(0,p.debounce)((function(){if(E){var e={scrollPointer:E};T.fetchMore({variables:e})}}),1e3,{leading:!0}),R=(0,h.useRef)(0);return T.data||T.error?(0,G.jsxs)("div",{style:{flex:1,position:"relative",overflowY:"scroll",overflowX:"hidden",padding:14},onScroll:function(e){var t=e.currentTarget,i=t.scrollTop,o=t.scrollHeight-t.offsetHeight;T.loading||i!==o||W(),i>100&&i>R.current?(0,b.MD)("down"):(0,b.MD)("up"),R.current=e.currentTarget.scrollTop},children:[(0,G.jsx)(m.Z,{children:function(e){var t=e.height,i=e.width;return i?(0,G.jsxs)("div",{style:{height:t,width:i,position:"relative"},id:"scrollable-gallery",children:[(0,G.jsx)(d.Z,{}),(!I.called||B)&&(0,G.jsx)(g.Z,{sx:{textAlign:"center"},children:(0,G.jsxs)(u.Z,{color:"primary",variant:"outlined",onClick:U,children:["Previous Days ",(0,G.jsx)(a.Z,{})]})}),Object.keys(P).sort(N).map((function(e){return(0,G.jsx)(ne,{title:e,items:P[e],boundary:Math.floor(i/C.zoom)},e)})),E&&(0,G.jsxs)(g.Z,{sx:{padding:5,textAlign:"center"},children:[!T.loading&&(0,G.jsxs)(u.Z,{color:"primary",variant:"outlined",onClick:W,children:["Load More ",(0,G.jsx)(s.Z,{})]}),T.loading&&(0,G.jsx)(c.Z,{})]})]}):(0,G.jsx)("div",{})}}),(0,G.jsx)(j.Z,{items:O,fetchMore:W,hasMore:!!E})]}):null}function le(){var e,t=(0,k.Z)().settings,i=(0,x.UO)(),o={date:(0,p.filter)([i.year,i.month,i.day],().join("-"),sortingField:t.sortBy.field,forEndOfPeriod:!0},n=null===(e=(0,l.a)(Z.s6y,{variables:o}).data)||void 0===e?void 0:e.getImageScrollPointerByDate;return n?(0,G.jsx)(re,{startingCursor:n}):null}},2127:function(e,t,i){var o=i(54750),n=i(46417);t.Z=(0,o.Z)((0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle")},94808:function(e,t,i){var o=i(54750),n=i(46417);t.Z=(0,o.Z)((0,n.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"CheckCircleOutline")},64009:function(e,t,i){var o=i(54750),n=i(46417);t.Z=(0,o.Z)((0,n.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined")},76035:function(e,t,i){var o=i(54750),n=i(46417);t.Z=(0,o.Z)((0,n.jsx)("path",{d:"M7.41 15.41 12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp")}}]);