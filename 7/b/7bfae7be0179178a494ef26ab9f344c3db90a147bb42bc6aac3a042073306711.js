"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7560,3712],{65940:81559:81292:73186:92182:function(e,t,n){n.d(t,{Z:function(){return Capture_ScreenshotCaptureEditControls}});var r=n(52322),o=n(2784),l=n(43913),a=n(73235),i=n(66547),c=n(26806);function _templateObject(){let e=(0,a._)(["\n    mutation BatchUpdateScreenshotBasedCaptures($input: ScreenshotBasedCaptureBatchUpdateInput!) {\n  batchUpdateScreenshotBasedCaptures(input: $input)\n}\n    "]);return _templateObject=function(){return e},e}let s=(0,i.ZP)(_templateObject());function useBatchUpdateScreenshotBasedCapturesMutation(){return c.Db(s)}var u=n(66398),d=n(1422),p=n(56958),ScreenshotCaptureEditControls_AddToThemeButton=e=>(0,r.jsx)("button",{className:"mt-5 w-full cursor-pointer rounded border border-gray-200 p-2 text-sm font-medium text-slate-700 shadow-sm hover:border-gray-300",onClick:e.onClick,children:"Add to theme"}),h=n(61907),m=n(84902);function updateProjectScreenshotCapture_templateObject(){let e=(0,a._)(["\n    mutation UpdateProjectScreenshotCapture($input: ScreenshotBasedCaptureUpdateInput!) {\n  updateProjectScreenshotCapture(input: $input) {\n    ...ScreenshotBasedCapture\n  }\n}\n    ",""]);return updateProjectScreenshotCapture_templateObject=function(){return e},e}let f=(0,i.ZP)(updateProjectScreenshotCapture_templateObject(),m.P);function useUpdateProjectScreenshotCaptureMutation(){return c.Db(f)}var ScreenshotCaptureEditControls_BackgroundControlPanel=e=>{var t;let{capture:n}=e,[,o]=useUpdateProjectScreenshotCaptureMutation(),[,l]=(0,u.z)(),updateColor=e=>{p.A.promise((async()=>{let t=await o({input:{id:n.id,deviceBgColor:e}});if(t.error)throw Error(t.error.message);let r=await l({input:{id:n.collectionId,defaultDeviceBgColor:e}});if(r.error)throw Error(r.error.message)})(),{loading:"Updating background color...",success:"Updated background color",error:e=>(0,d.q)(e.message)})};return(0,r.jsx)(h.Z,{value:null!==(t=null==n?void 0:n.deviceBgColor)&&void 0!==t?t:"#ffffff",mt:"0",mb:"0",outerClass:"flex-1",className:"flex-1",onChange:)};let g="absolute mb-2 min-w-[300px] z-10 mt-1 pb-1 bg-white shadow-lg rounded-md text-lg ring-1 ring-black ring-opacity-5 focus:outline-none bottom-full",x="h-5 w-5 text-slate-300 group-hover:text-slate-400";var ScreenshotCaptureEditControls_ControlLabel=ScreenshotCaptureEditControls_ControlContainer=C=n(8583),ScreenshotCaptureEditControls_ControlPanelHeader=let BackgroundControlPopoverButton=var ScreenshotCaptureEditControls_BackgroundControl=e=>{let[,t]=useBatchUpdateScreenshotBasedCapturesMutation(),[,n]=(0,u.z)(),applyToTheme=async()=>{let r=await t({input:{collectionId:e.capture.collectionId,deviceBgColor:e.capture.deviceBgColor}});if(r.error)throw Error(r.error.message);let o=await n({input:{id:e.capture.collectionId,defaultDeviceBgColor:e.capture.deviceBgColor}});if(o.error)throw Error(o.error.message)},onAddToTheme=()=>{p.A.promise(applyToTheme(),{loading:"Adding to theme...",success:"Added to theme",error:e=>(0,d.q)(e.message)})};return(0,r.jsxs)(l.J,{className:"relative",children:[(0,r.jsx)(l.J.Panel,{static:!1,className:g,children:t=>{let{close:n}=t;return(0,r.jsxs)("div",{className:"px-3 py-2",children:[(0,r.jsx)(ScreenshotCaptureEditControls_ControlPanelHeader,{close:n,heading:"Background"}),(0,r.jsx)(ScreenshotCaptureEditControls_BackgroundControlPanel,{capture:e.capture}),(0,r.jsx)(ScreenshotCaptureEditControls_AddToThemeButton,{onClick:onAddToTheme})]})}}),(0,r.jsx)(l.J.Button,{as:"div",children:(0,r.jsx)(ScreenshotCaptureEditControls_ControlContainer,{label:"Background",children:(0,r.jsx)(BackgroundControlPopoverButton,{capture:e.capture})})})]})},ScreenshotCaptureEditControls_CancelEditButton=ScreenshotCaptureEditControls_DeviceControlIcon=v=n(47330),b=n(83122),j=n(66786),w=n(77512);let y=j.$_.filter(e=>{let{value:t}=e;return"NONE"===t||t.includes("SHADOW")}),S=j.C2.filter(,DeviceBase=e=>{let{capture:t,orientation:n,onSelect:o}=e;return(0,r.jsx)("div",{className:"grid grid-cols-2 grid-rows-2 gap-2",children:("PORTRAIT"===n?y:S).map(})},DeviceRow=e=>{let{deviceType:t,orientation:n,capture:l,onSelect:a,onBack:i}=e,c="PORTRAIT"===n?j.$_:j.C2,[s,u]=(0,o.useState)(),d=c.filter(;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between text-sm",children:[(0,r.jsx)("div",{role:"button",className:"text-blue-primary flex-1",onClick:i,children:"â† Back"}),(0,r.jsx)("div",{className:"text-slate-500",children:(0,r.jsx)("div",{className:"rounded bg-slate-100 p-1 capitalize",children:t.toLowerCase()})})]}),(0,r.jsx)(w.E1,{name:"search",autoFocus:!0,placeholder:"Search ...",value:s||"",className:"mb-3 flex-grow",onChange:u}),(0,r.jsx)("div",{className:"h-52 overflow-y-scroll",children:(0,r.jsx)("div",{className:"grid grid-cols-2 grid-rows-2 gap-2",children})(s).map(e=>(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("div",{className:(0,b.AK)((null==l?void 0:l.deviceTemplate)===e.value?"border-blue-primary":"border-gray-200 hover:border-gray-300","flex flex-1 cursor-pointer items-center justify-center rounded border p-3"),onClic),children:e.template?(0,r.jsx)(e.template,{className:"h-20 w-auto"}):(0,r.jsx)("img",{src:"/device/".concat(e.image),className:"max-h-20"})}),(0,r.jsx)("div",{className:"mt-1 truncate text-center text-[12px] text-gray-400",children:e.name})]},e.name))})})]})};var ScreenshotCaptureEditControls_DeviceControlPanel=e=>{let{capture:t,isLandscape:n,onIsLandscapeChange:l}=e,[a,i]=(0,o.useState)(j.Yi.None),c=(0,o.useRef)(!1),[,s]=useUpdateProjectScreenshotCaptureMutation(),[,h]=(0,u.z)(),onSelect=e=>{p.A.promise((async()=>{let n=await s({input:{id:t.id,deviceTemplate:e}});if(n.error)throw Error(n.error.message);let r=await h({input:{id:t.collectionId,defaultDeviceTemplate:e}});if(r.error)throw Error(r.error.message)})(),{loading:"Updating device template",success:"Updated device template",error:e=>(0,d.q)(e.message)})};(0,o.useEffect},[t]);let m=n?"LANDSCAPE":"PORTRAIT";return a===j.Yi.None||t.deviceTemplate==v.DS.None?(0,r.jsx)(DeviceBase,{orientation:m,capture:t,onSelec}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(DeviceRow,{capture:t,onSelect:onSelect,deviceType:a,orientation:m,onBac)}),(0,r.jsx)(w.rs,{label:"Landscape",className:"-mb-2 mt-2",checked:n,onChange:l})]})},ScreenshotCaptureEditControls_DeviceControl=e=>{let[,t]=useBatchUpdateScreenshotBasedCapturesMutation(),[,n]=(0,u.z)(),applyToTheme=async()=>{let r=await t({input:{collectionId:e.capture.collectionId,deviceTemplate:e.capture.deviceTemplate}});if(r.error)throw Error(r.error.message);let o=await n({input:{id:e.capture.collectionId,defaultDeviceTemplate:e.capture.deviceTemplate}});if(o.error)throw Error(o.error.message)},onAddToTheme=()=>{p.A.promise(applyToTheme(),{loading:"Adding to theme...",success:"Added to theme",error:e=>(0,d.q)(e.message)})};return(0,r.jsxs)(l.J,{className:"relative",children:[(0,r.jsx)(l.J.Panel,{static:!1,className:g,childre}}),(0,r.jsx)(l.J.Button,{as:"div",children:(0,r.jsx)(ScreenshotCaptureEditControls_ControlContainer,{label:"Device",children:(0,r.jsx)(ScreenshotCaptureEditControls_DeviceControlIcon,{})})})]})},k=n(32517),_=n(57048),ScreenshotUploadContro},ScreenshotCaptureEditControls_ScrollLockControlPanel=e=>{let{capture:t}=e,[,n]=useUpdateProjectScreenshotCaptureMutation(),[,o]=(0,u.z)(),onChange=(e,r)=>{p.A.promise((async()=>{let l=await n({input:{id:t.id,lockVerticalScroll:"vertical"===r?e:void 0,lockHorizontalScroll:"horizontal"===r?e:void 0}});if(l.error)throw Error(l.error.message);let a=await o({input:{id:t.collectionId,defaultLockVerticalScroll:"vertical"===r?e:void 0,defaultLockHorizontalScroll:"horizontal"===r?e:void 0}});if(a.error)throw Error(a.error.message)})(),{loading:"Updating scroll lock...",success:"Updated scroll lock",error:e=>(0,d.q)(e.message)})};return(0,r.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,r.jsx)(w.XZ,{labelText:"Lock vertical scroll",name:"lockVerticalScroll",className:"m-0",checked:!!t.lockVerticalScroll,onChange:e=>onChange(e,"vertical")}),(0,r.jsx)(w.XZ,{labelText:"Lock horizontal scroll",name:"lockHorizontalScroll",className:"m-0",checked:!!t.lockHorizontalScroll,onChange:e=>onChange(e,"horizontal")})]})};let ScrollLockControlPopoverButto};var ScreenshotCaptureEditControls_ScrollLockControl=e=>{let[,t]=useBatchUpdateScreenshotBasedCapturesMutation(),[,n]=(0,u.z)(),applyToTheme=async()=>{let r=await t({input:{collectionId:e.capture.collectionId,lockVerticalScroll:e.capture.lockVerticalScroll,lockHorizontalScroll:e.capture.lockHorizontalScroll,scrollTop:e.capture.scrollTop,scrollLeft:e.capture.scrollLeft}});if(r.error)throw Error(r.error.message);let o=await n({input:{id:e.capture.collectionId,defaultLockHorizontalScroll:e.capture.lockHorizontalScroll,defaultLockVerticalScroll:e.capture.lockVerticalScroll}});if(o.error)throw Error(o.error.message)},onAddToTheme=()=>{p.A.promise(applyToTheme(),{loading:"Adding to theme...",success:"Added to theme",erro)})};return(0,r.jsxs)(l.J,{className:"relative",children:[(0,r.jsx)(l.J.Panel,{static:!1,className:g,childre}}),(0,r.jsx)(l.J.Button,{as:"div",children:(0,r.jsx)(ScreenshotCaptureEditControls_ControlContainer,{label:"ScrollLock",children:(0,r.jsx)(ScrollLockControlPopoverButton,{capture:e.capture})})})]})},Capture_ScreenshotCaptureEditControls=e=>{let[t,n]=(0,o.useState)(!1);return(0,r.jsxs)("div",{className:"bottom-0 flex w-full items-center justify-center space-x-8 bg-slate-100 py-3",children:[(0,r.jsx)(ScreenshotUploadControl,{capture:e.capture}),(0,r.jsx)(ScreenshotCaptureEditControls_DeviceControl,{capture:e.capture,isLandscape:t,onIsLandscapeChange:n}),(0,r.jsx)(ScreenshotCaptureEditControls_ScrollLockControl,{capture:e.capture}),(0,r.jsx)(ScreenshotCaptureEditControls_BackgroundControl,{capture:e.capture}),(0,r.jsx)(ScreenshotCaptureEditControls_CancelEditButton,{exitEditMode:e.exitEditMode})]})}},2341},3079},7053},19627:function(e,t,n){n.d(t,{Z:function(){return CreateCaptureCollection}});var r=n(52322),o=n(2784),l=n(94629),a=n(8583),i=n(44665),c=n(18318),s=n(47330),u=n(83122);let d=[{id:s.TG.Web,name:"Web"},{id:s.TG.Screenshot,name:"Image-based"}],Ico},renderOptio}var p=n(77512),h=n(75909),m=n(82468),f=n(94145),g=n(94171),x=n(32517),C=n(78066),v=n(36761),b=n(73235),j=n(66547),w=n(46951),y=n(26806);function _templateObject(){let e=(0,b._)(["\n    mutation DuplicateProjectCaptureCollectionMutation($collectionId: String!, $targetProjectId: String!, $name: String) {\n  duplicateProjectCaptureCollection(\n    collectionId: $collectionId\n    targetProjectId: $targetProjectId\n    name: $name\n  ) {\n    ...ProjectCaptureCollection\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let S=(0,j.ZP)(_templateObject(),w.V);var k=n(46085),_=n(1422),N=n(65538),T=n(45152),E=n(64627),F=n(5632),B=n(56958);let O=[{name:"New",value:g.fm.Blank,Icon:a.pOD,Component:function(e){let{createOptionsState:t,dispatchCreateOptions:n}=e;return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(SelectAppType,{selected:t.blank.type,onChange:e=>n({type:"update-blank",payload:{...t.blank,type:e}})}),t.blank.type===s.TG.Web&&(0,r.jsx)(p.oi,{labelText:"App URL",className:"mb-4 mt-3 w-full",placeholder:"Enter URL",name:"url",onChang),value:t.blank.url})]})}},{name:"Make Copy",value:g.fm.Duplicate,Icon:a.TIy,Componen}}];var CreateCaptureCollection=e=>{let{projectId:t,open:n,handleClose:i}=e,[c,u]=(0,o.useState)(!1),[,d]=(0,v.f)(),[,h]=y.Db(S),m=(0,F.useRouter)(),[b,j]=(0,o.useReducer)(g.BS,g.Bu),{hasCxt:w}=(0,N.K)(),{workspace:P}=(0,T.cF)(),D=(0,T.NK)(P,s.TT.ClickToCapture),A=(0,o.useCallback},[m]),I=(0,o.useCallback)(async()=>{var e;let n=await d({input:{name:b.name,projectId:t,type:b.blank.type,url:(0,k.oz)(b.blank.url)}});if(n.error){(0,x.Rn)((0,_.q)(n.error.message));return}let r=null===(e=n.data)||void 0===e?void 0:e.createProjectCaptureCollection;if(!r){(0,x.Rn)("Got empty created collection");return}if(b.blank.type===s.TG.Web){let e=await (0,E.Y6)({collectionId:r.id,url:r.webCaptureCollection.url,clickToCaptureEnabled:D});if(e.error){(0,x.Rn)(e.error);return}}A(r.id)},[d,b.name,b.blank.type,b.blank.url,t,A,D]),R=(0,o.useCallback)(async()=>{var e;let n=await h({targetProjectId:t,collectionId:b.duplicate.id,name:b.name});if(n.error){(0,x.Rn)((0,_.q)(n.error.message));return}let r=null===(e=n.data)||void 0===e?void 0:e.duplicateProjectCaptureCollection;if(!r){(0,x.Rn)("Got empty created collection");return}A(r.id)},[A,b,t,h]),Z=(0,o.useCallback},[I,R]),L=(0,o.useCallback)(async()=>{if(!b.name){(0,x.Rn)("Please enter a name");return}if(b.method===g.fm.Blank&&b.blank.type===s.TG.Web&&!b.blank.url){(0,x.Rn)("Please enter a URL");return}B.A.promis},{loading:"Creating collection...",success:"Created collection",erro)})},[b.blank.type,b.blank.url,b.method,b.name,Z,i]);return(0,r.jsx)(C.Z,{title:"Create capture collection",open:n,handleClose:i,handleNext:L,nextText:c?(0,r.jsx)(a.L4p,{}):"Create",nextDisabled:c,nextOnEnter:!0,children:(0,r.jsxs)(l.Z,{hasCxt:w,children:[(0,r.jsx)(p.oi,{labelText:"Name",className:"mb-4 w-full",autoFocus:!0,placeholder:"Enter name",name:"name",onChang),value:b.name}),(0,r.jsx)(f.Z,{createOptionsState:b,dispatchCreateOptions:j,methods:O})]})})}},44665:function(e,t,n){n.d(t,{Z:function(){return CreateMethodDiv}});var r=n(52322}},94145:function(e,t,n){n.d(t,{Z:function(){return CreateMethodTabs}});var r=n(52322),o=n(83122),l=n(45152);function CreateMethodTabs(e){var t;let{workspace:n}=(0,l.cF)(),{currentUser:a}=(0,l.xJ)(),{methods:i,...c}=e,{createOptionsState:s,dispatchCreateOptions:u}=c,d=null===(t=i.fin}))||void 0===t?void 0:t.Component;return(0,r.jsxs)("div",{className:"rounded-md border border-gray-300 shadow-sm",children:[(0,r.jsx)("div",{className:(0,o.AK)(d&&"border-b border-gray-200"),children:(0,r.jsx)("nav",{className:"-mb-px flex gap-x-4 pl-4","aria-label":"Tabs",children:i.filte}).ma})})}),d&&(0,r.jsx)(d,{...c})]})}},94171:function(e,t,n){n.d(t,{BS:function(){return createOptionsReducer},Bu:function(){return a},fm:function(){return o}});var r,o,l=n(47330);(r=o||(o={})).Blank="Blank",r.NewCaptures="New captures",r.FromCollection="From collection",r.Duplicate="Make Copy",r.Import="Import";let a={method:"Blank",name:"",boards:[],blank:{type:l.TG.Web,url:""},fromCollection:{collectionId:""},duplicate:{id:""},newCaptures:{url:""},import:{fileName:"",json:""}},createOptionsReduce}},7590},8246},3102},5960},35056:function(e,t,n){n.d(t,{m:function(){return x}});var r=n(73235),o=n(66547),l=n(77243);function _templateObject(){let e=(0,r._)(["\n    fragment DialogButton on DialogButton {\n  id\n  actions {\n    ...FlowDocumentAction\n  }\n  appearance\n  text\n}\n    ",""]);return _templateObject=function(){return e},e}let a=(0,o.ZP)(_templateObject(),l.$);function flowEscapeView_templateObject(){let e=(0,r._)(["\n    fragment FlowEscapeView on FlowEscapeView {\n  id\n  content\n  textAlign\n  buttons {\n    ...DialogButton\n  }\n}\n    ",""]);return flowEscapeView_templateObject=function(){return e},e}let i=(0,o.ZP)(flowEscapeView_templateObject(),a);function embeddedWebCapture_templateObject(){let e=(0,r._)(["\n    fragment EmbeddedWebCapture on EmbeddedWebCapture {\n  id\n  collectionId\n}\n    "]);return embeddedWebCapture_templateObject=function(){return e},e}let c=(0,o.ZP)(embeddedWebCapture_templateObject());function embeddedScreenshotCapture_templateObject(){let e=(0,r._)(["\n    fragment EmbeddedScreenshotCapture on EmbeddedScreenshotCapture {\n  id\n  collectionId\n}\n    "]);return embeddedScreenshotCapture_templateObject=function(){return e},e}let s=(0,o.ZP)(embeddedScreenshotCapture_templateObject());function selector_templateObject(){let e=(0,r._)(["\n    fragment Selector on Selector {\n  screenshotHeight\n  screenshotWidth\n  pixelRatio\n  dimensions {\n    height\n    bottom\n    top\n    left\n    width\n    right\n  }\n  freeSelectDimensions {\n    height\n    bottom\n    top\n    left\n    width\n    right\n  }\n  cssSelector\n  imageUrl\n  nv_id\n  nv_roots\n  roots\n}\n    "]);return selector_templateObject=function(){return e},e}let u=(0,o.ZP)(selector_templateObject());function trigger_templateObject(){let e=(0,r._)(["\n    fragment Trigger on Trigger {\n  id\n  type\n  value\n  state\n  actions {\n    ...FlowDocumentAction\n  }\n  selector {\n    ...Selector\n  }\n}\n    ","\n",""]);return trigger_templateObject=function(){return e},e}let d=(0,o.ZP)(trigger_templateObject(),l.$,u}let p=(0,o.ZP)(beacon_templateObject(),u,l.$);function form_templateObject(){let e=(0,r._)(["\n    fragment Form on Form {\n  id\n  title\n  subTitle\n  fields {\n    id\n    label\n    placeHolder\n    type\n    personalizationVariableId\n    metadataId\n    required\n    requireWorkEmail\n  }\n}\n    "]);return form_templateObject=function(){return e},e}let h=(0,o.ZP)(form_templateObject()}let m=(0,o.ZP)(step_templateObject(),c,s,a,d,p,u,h);var f=n(17554}let g=(0,o.ZP)(flowDocument_templateObject(),a,i,m,f.A);function flowVersion_templateObject(){let e=(0,r._)(["\n    fragment FlowVersion on FlowVersion {\n  id\n  createdAt\n  updatedAt\n  entityTag\n  screenshot\n  doc {\n    ...FlowDocument\n  }\n}\n    ",""]);return flowVersion_templateObject=function(){return e},e}let x=(0,o.ZP)(flowVersion_templateObject(),g)},3676},6639},2371},40338:function(e,t,n){n.d(t,{F:function(){return jitIfAvailable},_:function(){return downloadStyles}});var r=n(98751),o=n(89370),l=n(49830),a=n(45436);let i=new Map;async function fetchStyle(e){let{href:t}=e.attributes,n=await fetch(t);if(!(null==n?void 0:n.ok)){i.set(t,"");return}let r=await n.text();r?i.set(t,r):i.set(t,"")}async function fetchAndStoreStyle(e){let{href:t}=e.attributes;if(!t)return;let n=i.get(t);return n?await n:(fetchStyle(e),await (0,a.R)(i,t,3e4),3406},97015:function(e,t,n){let r;n.d(t,{Cj:function(){return adjustRectWithScale},G8:function(){return adjustClientRectWithZoom},IR:function(){return getPlayerFrame},Jt:function(){return absoluteToDoc},M},SX:function(){return isTopLevelPlayer},T},UU:function(){return adjustRectWithPadding},XM:function(){return getAbsoluteSrcsetString},ZF:function(){return removeNode},_H:function(){return hasDimensions},cv:function(){return stepUpTree},eB:function(){return getPlayerScale},gI:function(){return applyScaleToRect},ge:function(){return d},iA:function(){return getOwnerFrame},lW:function(){return elHasMoved},pF:function(){return isRectFullyInView},sI:function(){return getActualParentWindow},wS:function(){return getHref}});var o=n(34061);n(50733);var l=n(89370),a=n(55283),i=n(20851),c=n(71664);let elHasMove),clientRectsEqua}let removeNod},s=/^[^ \t\n\r\u000c]+/,u=/^[, \t\n\r\u000c]+et getPlayerFram}let d=["a","animate","animateMotion","animateTransform","discard","feImage","image","linearGradient","mpath","pattern","radialGradient","script","set","svg","textPath","use"],searchForThisWindo},getActualParentWindo},hasDimensions=e=>!!e&&"number"==typeof e.innerWidth&&"number"==typeof e.innerHeighet applyScaleToRec},adjustRectWithScal},scaleFromMatri),getElementScal},4983},5528},7166}}]);
//# sourceMappingURL=7560-6536a79f90ad89db.js.map