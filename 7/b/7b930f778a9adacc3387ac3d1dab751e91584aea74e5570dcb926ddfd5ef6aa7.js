"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4225],{99135:57574:function(e,t,a){a.d(t,{BY:function(){return ChecklistBuilderActions},ol:function(){return FlowBuilderActions},M_:function(){return NewAction}});var l=a(52322),n=a(2784),o=a(61036),i=a(16544),r=a(22918),s=a(83389),d=a(83536),c=a(66379),u=a(84061),p=a(87862),m=a(43913);ar h=a(18318),x=a(83817),f=a(47330),g=a(83122),b=a(53954),v=a(77512),y=a(6676),j=a.n(y),C=a(5632),w=a(99135),N=a(40240);et S="rounded text-white p-1";et k={[f.yo.NextStep]:(0,l.jsx)("div",{className:"".concat(S," bg-cyan-500"),children:(0,l.jsx)(i.YHf,{className:"h-3 w-3"})}),[f.yo.PrevStep]:(0,l.jsx)("div",{className:"".concat(S," bg-sky-500"),children:(0,l.jsx)(i.g6,{className:"h-3 w-3"})}),[f.yo.GoToStep]:(0,l.jsx)("div",{className:"".concat(S," bg-cyan-500"),children:(0,l.jsx)(i.C5i,{className:"h-3 w-3"})}),[f.yo.StartFlow]:(0,l.jsx)("div",{className:"".concat(S," bg-teal-500"),children:(0,l.jsx)(i.Dx1,{className:"h-3 w-3"})}),[f.yo.OpenChecklist]:(0,l.jsx)("div",{className:"".concat(S," bg-emerald-500"),children:(0,l.jsx)(i.yAY,{className:"h-3 w-3"})}),[f.yo.Navigate]:(0,l.jsx)("div",{className:"".concat(S," bg-blue-400"),children:(0,l.jsx)(i.lDB,{className:"h-3 w-3"})}),[f.yo.CompleteFlow]:(0,l.jsx)("div",{className:"".concat(S," bg-green-500"),children:(0,l.jsx)(i.U65,{className:"h-3 w-3"})}),[f.yo.Converted]:(0,l.jsx)("div",{className:"".concat(S," bg-violet-500"),children:(0,l.jsx)(i.U65,{className:"h-3 w-3"})}),[f.yo.StartChecklist]:null,[f.yo.CloseFlow]:null},T=[{name:"Go to next step",value:f.yo.NextStep},{name:"Go back a step",value:f.yo.PrevStep},{name:"Jump to a step",value:f.yo.GoToStep},{name:"Start a flow",value:f.yo.StartFlow},{name:"Open checklist",value:f.yo.OpenChecklist,icon:(0,l.jsx)("div",{className:"".concat(S," bg-emerald-500"),children:(0,l.jsx)(i.yAY,{className:"h-3 w-3"})})},{name:"Navigate to url",value:f.yo.Navigate},{name:"Complete flow",value:f.yo.CompleteFlow},{name:"Mark as converted",value:f.yo.Converted}].map(,P=T.filter(,SelectStep=e=>{let{selected:t,onChange:a,flowDoc:o}=e,i=(0,n.useMemo)(()=>o.steps.map((e,t)=>({id:e.id,name:"".concat(t+1,". ").concat(e.name||"Untitled step")})),[o]);return(0,l.jsx)(h.Z,{items:i,selected:t,onChange:a})},B="bg-white py-4 shadow text-gray-500",ActionOption=e=>{let{handleRemove:t,action:a,projectId:n,selectStartFlow:o}=e,r=null==a?void 0:a.type;switch(r){case f.yo.NextStep:return(0,l.jsx)(w.Z,{bannerClassName:B,bannerName:"Go to next step",bannerIcon:k[r],handleRemove:t});case f.yo.PrevStep:return(0,l.jsx)(w.Z,{bannerClassName:B,bannerName:"Go back a step",bannerIcon:k[r],handleRemove:t});case f.yo.GoToStep:if("flow"!==e.docType)break;return(0,l.jsx)(w.Z,{bannerClassName:B,bannerName:"Jump to a step",bannerIcon:k[r],handleRemove:t,children:(0,l.jsx)(SelectStep,{flowDoc:e.flowDoc,selected:a.goToStep,onChange:e.setJumpToStep})});case f.yo.StartFlow:var s;return(0,l.jsx)(w.Z,{bannerClassName:B,bannerName:"Start a flow",bannerIcon:k[r],handleRemove:t,children:(0,l.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,l.jsx)(SelectProjectFlow,{projectId:n,selected:null!==(s=a.startFlow)&&void 0!==s?s:void 0,onChange:o})})});case f.yo.OpenChecklist:return(0,l.jsx)(w.Z,{bannerClassName:B,bannerName:"Open checklist",bannerIcon:(0,l.jsx)("div",{className:"".concat(S," bg-emerald-500"),children:(0,l.jsx)(i.yAY,{className:"h-3 w-3"})}),handleRemove:t});case f.yo.Navigate:return(0,l.jsx)(w.Z,{bannerClassName:B,bannerName:"Navigate to url",bannerIcon:k[r],handleRemove:t,children:(0,l.jsx)(NavigateContent,{...e})});case f.yo.CompleteFlow:return(0,l.jsx)(w.Z,{bannerClassName:B,bannerName:"Complete flow",bannerIcon:k[r],handleRemove:t});case f.yo.Converted:return(0,l.jsx)(w.Z,{bannerClassName:B,bannerName:"Mark as converted",bannerIcon:k[r],handleRemove:t})}return null},F=[{name:"URL",value:"url"},{name:"Personalized URL",value:"personalizedURL"}]; ChecklistBuilderActions=e=>{var t;let a=(0,C.useRouter)(),o=a.query.id,{handleChange:i,taskIndex:r,checklistDoc:s}=e,c=s.tasks[r],u=null!==(t=c.actions)&&void 0!==t?t:[];return(0,l.jsx)(d.q,{title:"Actions",children:(0,l.jsxs)("div",{onClick:e=>e.stopPropagation(),children:[u.map((e,t)=>{var a;return(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)(ActionOption,{docType:"checklist",action:e,projectId:o,handleRemove:selectStartFlow:setNavigateUrl:e=>{i({type:"update-task-action",payload:{taskIndex:r,actionIndex:t,patch:{url:e}}})},setOpenNewTab:e=>{i({type:"update-task-action",payload:{taskIndex:r,actionIndex:t,patch:{newTab:e}}})},setShareLinkCTA:e=>{i({type:"update-task-action",payload:{taskIndex:r,actionIndex:t,patch:{shareLinkCTA:e}}})}}),u.length>1&&t!==u.length-1&&(0,l.jsx)("div",{className:"flex w-full justify-center",children:(0,l.jsx)("div",{className:"mb-3 inline-block rounded bg-gray-100 px-2 py-1 text-sm font-semibold tracking-wider text-gray-700",style:{fontSize:"10px"},children:"AND"})})]},null!==(a=e.id)&&void 0!==a?a:"action-".concat(t))}),(0,l.jsx)(NewAction,{options:P,title:"Add click action",handleCreate:)]})})},FlowBuilderActions=e=>{var t,a;let{title:i,handleChange:r,target:s,targetIndex:c,stepIndex:u,flowDoc:p}=e,m=(0,C.useRouter)(),h=m.query.id,x=null!==(a=null===(t=(0,o.Y)({target:s,doc:p,targetIndex:c,stepIndex:u}))||void 0===t?void 0:t.actions)&&void 0!==a?a:[],g=(0,b.T4)(f.TT.JumpToStep),v=g?T:T.filter(e=>e.value!==f.yo.GoToStep);return(0,l.jsx)(d.q,{title:"Actions",children:(0,l.jsxs)("div",{onClick:e=>e.stopPropagation(),children:[i&&(0,l.jsx)("div",{className:"label-small",children:i}),x.map((e,t)=>{var a;return(0,l.jsxs)(n.Fragment,{children:[(0,l.jsx)(ActionOption,{docType:"flow",action:e,projectId:h,handleRemove:selectStartFlow:setNavigateUrl:e=>{r({type:"set-action-navigate-url",payload:{target:s,stepIndex:u,targetIndex:c,actionIndex:t,url:e}})},setOpenNewTab:e=>{r({type:"set-action-navigate-new-tab",payload:{target:s,stepIndex:u,targetIndex:c,actionIndex:t,newTab:e}})},setShareLinkCTA:e=>{r({type:"set-action-sharelink-cta",payload:{target:s,stepIndex:u,targetIndex:c,actionIndex:t,shareLinkCTA:e}})},flowDoc:p,setJumpToStep:e=>{e&&r({type:"set-go-to-step",payload:{target:s,stepIndex:u,targetIndex:c,actionIndex:t,goToStep:{id:e.id,name:e.name}}})}}),x.length>1&&t!==x.length-1&&(0,l.jsx)("div",{className:"flex w-full justify-center",children:(0,l.jsx)("div",{className:"mb-3 inline-block rounded bg-gray-100 px-2 py-1 text-sm font-semibold tracking-wider text-gray-700",style:{fontSize:"10px"},children:"AND"})})]},null!==(a=e.id)&&void 0!==a?a:"action-".concat(t))}),(0,l.jsx)(NewAction,{options:v,title:"Add ".concat("trigger"===s?"trigger":"click"," action"),handleCreate:)]})})}},55653:function(e,t,a){a.d(t,{Z:function(){return CaptureBlock},P:function(){return getStepCapture}});var l=a(52322);a(2784);var n=a(16544),o=a(3710),i=a(61096),r=a(78468),s=a(74262),d=a(1821),c=a(83777),u=a(47330),p=a(55015);let StepEmptyCapture=CaptureDetailsContainer=e=>(0,l.jsx)("div",{className:"flex flex-row space-x-1",children:e.children}),CollectionName=e=>(0,l.jsx)(p.X1,{className:"w-[200px] truncate",children:e.name}),Separator=),m="border-gray-200",MediaCaptureStep=e=>{let{id:t}=e.capture,[{data:a}]=(0,d.U)({variables:{id:t}}),[,s]=(0,r.z)(),c=null==a?void 0:a.getMediaCapture,u=null==c?void 0:c.createdAt,h=null==c?void 0:c.updatedAt;return c?(0,l.jsxs)(p.lW,{clickHandler:e.clickHandler,children:[(0,l.jsx)(p.dn,{borderClass:m,clickHandler:e.clickHandler,children:(0,l.jsx)(o.Z,{containerClass:"h-[170px]",deviceHeightClass:"h-[170px]",allowAudio:!1,capture:c})}),(0,l.jsxs)(p.$_,{borderClass:m,children:[(0,l.jsxs)(p.Li,{children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)("div",{className:"mr-2 justify-self-start text-slate-600",children:(0,l.jsx)(n.Uoy,{className:"h-4 w-4"})}),(0,l.jsx)("div",{className:"flex-1",onClick:e.clickHandler,children:(0,l.jsx)("div",{className:"flex justify-between",children:(0,l.jsx)(i.s,{tight:!0,className:"text-base",textColorClass:"text-gray-600",placeholder:"Untitled",text:(null==c?void 0:c.name)||"",onValueChang},disabled:!e.canEdit})})})]}),(0,l.jsxs)(CaptureDetailsContainer,{children:[(0,l.jsx)(p.gp,{createdAt:u,updatedAt:h}),(0,l.jsx)(Separator,{}),(0,l.jsx)(CollectionName,{name:c.collection.name})]})]}),(0,l.jsx)(p.oR,{capture:e.capture})]})]}):null},WebCaptureSte},StepWithCaptur}var h=a(12853),x=a(99135);let embeddedWebToStepCapture=e=>{if(e)return{id:e.id,collectionId:e.collectionId,type:u.TG.Web}},embeddedMediaCaptureToStepCaptur},getStepCaptur}},55015:function(e,t,a){a.d(t,{$_:function(){return Footer},Li:function(){return CaptureCardFooterMain},T5:function(){return WebCapturePreviewScreenshot},X1:function(){return DetailedInfoContainer},ZI:function(){return MediaCaptureCard},dn:function(){return PreviewCaptureContainer},gp:function(){return TimeSinceMessage},lW:function(){return StepWithCaptureContainer},oR:function(){return OpenModalSection},zO:function(){return WebCaptureCard}});var l=a(52322),n=a(2784),o=a(73459),i=a(16544),r=a(3710),s=a(61096),d=a(47330),c=a(46085),u=a(83122),p=a(20851);let WebCapturePreviewScreenshot=e=>{let{capture:t}=e;return t.screenshot?(0,l.jsx)("div",{className:"h-full w-full bg-gray-100 bg-cover",style:{backgroundImage:"url(".concat(t.screenshot,")")}}):null},StepWithCaptureContainer=e=>{let{clickHandler:t,children:a}=e;return(0,l.jsx)("div",{className:"relative flex h-52 cursor-pointer flex-col rounded-md bg-white shadow-sm",onClick:t,children:a})},OpenModalSectio},PreviewCaptureContaine),Foote),DetailedInfoContaine),TimeSinceMessag},CaptureCardFooterMai),MediaCaptureCar},WebCaptureCar}},8275:function(e,t,a){a.d(t,{Z:function(){return ElementSelector}});var l=a(52322),n=a(55653),o=a(73459),i=a(16544),r=a(14120),s=a(32517),d=a(47330),c=a(83122),u=a(2784),p=a(67569);function ZoomPhoto(e){var t,a,n,o,i,r,s,d,c,m,h;let{selector:x}=e,f=(0,u.useRef)(null),g=(0,u.useRef)(0),[b,v]=(0,u.useState)(g.current),[y,j]=(0,u.useState)(!1),[C,w]=(0,u.useState)(!0);(0,u.useEffect},[x]);let{imageUrl:N,dimensions:S,freeSelectDimensions:k}=x,T=null!==(t=x.screenshotHeight)&&void 0!==t?t:0,P=null!==(a=x.screenshotWidth)&&void 0!==a?a:0,B=null!==(n=x.pixelRatio)&&void 0!==n?n:2,F=k?{right:(null!==(o=null==S?void 0:S.right)&&void 0!==o?o:0)-(null!==(i=k.right)&&void 0!==i?i:0),left:(null!==(r=null==S?void 0:S.left)&&void 0!==r?r:0)+(null!==(s=k.left)&&void 0!==s?s:0),top:(null!==(d=null==S?void 0:S.top)&&void 0!==d?d:0)+(null!==(c=k.top)&&void 0!==c?c:0),bottom:(null!==(m=null==S?void 0:S.bottom)&&void 0!==m?m:0)-(null!==(h=k.bottom)&&void 0!==h?h:0),width:k.width,height:k.height}:S,I=b/1.8,M={},A={},E="",V=P/B,O=T/B;if(null!=F&&null!=V&&null!=O){let e,t,a,l;let{bottom:n,left:o,right:i,top:r,height:s,width:d}=F,c=V/O,u=d||i-o,p=s||n-r,m=C?30:9999999;u/p>=1.8?(e=Math.min((V-u)/2,Math.max((b-u)/2,m)),t=((l=(a=Math.min(V,u+2*e))/c)-p)/2):(t=Math.min((T-p)/2,Math.max((I-p)/2,m)),e=((a=(l=Math.min(O,p+2*t))*c)-u)/2);let h=Math.min(1,b/a,I/l),x=-Math.max(0,Math.min(V-a,(null!=o?o:0)-e)),f=-Math.max(0,Math.min(O-l,(null!=r?r:0)-t));M={height:"".concat(I,"px")},A={width:"".concat(V,"px"),height:"".concat(O,"px")},E="scale(".concat(h,") translateX(").concat(x,"px) translateY(").concat(f,"px)")}else M={};let R=C?"zoom-out":"zoom-in",_=null==N?void 0:N.includes("/nv_static/v/");return(0,l.jsx)("div",{style:{position:"relative",cursor:R,overflow:"hidden",...M},onClick:()=>w(!C),ref:f,children:(0,l.jsxs)("div",{style:{transform:E,transformOrigin:"top left",transition:y?"transform .4s cubic-bezier(0.25, 0.8, 0.5, 1)":""},children:[_?(0,l.jsx)("video",{src:N||"",className:"",style:{display:"block",position:"absolute",maxWidth:"none",transformOrigin:"top left",top:0,left:0,...A},autoPlay:!0,playsInline:!0,loop:!0,muted:!0}):(0,l.jsx)("img",{src:null!=N?N:"",style:{display:"block",position:"absolute",maxWidth:"none",transformOrigin:"top left",top:0,left:0,...A}}),(0,l.jsx)("div",{style:{position:"absolute",borderRadius:2,...x.dimensions,...p.N}})]})})}let m=["INPUT","TEXTAREA","SELECT"}},2778},15127:function(e,t,a){a.d(t,{Z:function(){return LanguageDropdown},b:function(){return LanguagesSearchCombobox}});var l=a(52322),n=a(2784),o=a(18318),i=a(77128),r=a(47330),s=a(83122),d=a(98269),c=a(53954),u=a(5632);function LanguagesSearchCombobox(e){let{languages:t,selectedLanguage:a,onChange:i}=e,r=(0,n.useMemo),[t]);return(0,l.jsx)(o.Z,{items:r,selected:a,onChange:i})}function LanguageDropdown(e){let{selectedLanguage:t,onChange:a}=e,{workspace:o}=(0,c.cF)(),d=(0,u.useRouter)(),p=(0,s.H8)(d.query),m=p.id,h=(0,c.NK)(o,r.TT.Multilingual),[{data:x}]=(0,i.w)({variables:{projectId:m}}),f=(0,n.useMemo},[x]);return!h||f.length<2?null:(0,l.jsx)(LanguagesSearchCombobox,{languages:f,selectedLanguage:t,onChange:e=>{let{id:t}=e;return a(t)}})}},27907:function(e,t,a){a.d(t,{H:function(){return FlowSettingsButton},O:function(){return ChecklistSettingsButton}});var l=a(52322),n=a(12853),o=a(16544),i=a(47330);let ChecklistSettingsButto},FlowSettingsButton=e=>{let{flowDoc:t,flowBuilderState:a,canEdit:r,handleChange:s}=e,{openSidePanel:d,closeSidePanel:c}=(0,n.u)();return r&&t?(0,l.jsxs)("button",{className:"mr-3 flex items-center gap-1.5 px-1 py-2 text-sm font-medium text-gray-400 hover:text-gray-300",onClick:()=>d({panelType:"SETTINGS",props:{type:i.De.Flow,flow:t,flowBuilderState:a,handleChange:s,handleClose:c}}),children:[(0,l.jsx)(o.ewm,{className:"h-4 w-4 text-gray-400"}),"Settings"]}):null}},2103},271},7345},3189},37074:function(e,t,a){var l=a(52322),n=a(39097),o=a.n(n),i=a(5632);t.Z=e=>{let{dependentSteps:t}=e,a=(0,i.useRouter)();return(0,l.jsxs)("div",{"data-testid":"dependent-steps-error",children:[(0,l.jsxs)("div",{children:["Cannot delete step. It is referenced by the following"," ",1===t.length?"step":"steps",":"]}),(0,l.jsx)("ul",{className:"ml-4 mt-2 list-disc",children:t.map(e=>(0,l.jsx)("li",{children:(0,l.jsxs)(o(),{className:"link",href:{query:{...a.query,s:e.index.toString()}},children:[e.index+1,". ",e.name||"(Untitled)"," (",e.source,")"]})},e.id))})]})}},1285},8228},82057:function(e,t,a){a.d(t,{Z:function(){return Panel}});var l,n,o,i,r,s,d,c,u,p,m=a(73235),h=a(52322),x=a(2784),f=a(2397),g=a(47330),b=a(83122),v=a(8275),y=a(83536),j=a(3016),C=a(77512),w=a(82281),N=a(16544),Panel_PanelBas}var S=a(57574),k=a(95623}var T=a(83817);function BeaconSize(e){let{beaconSize:t,onCheckedChange:a,onSizeChange:l}=e;return(0,h.jsx)(y.q,{title:"Custom pulse size",isClosed:!t,renderSwitch:()=>(0,h.jsx)(C.rs,{checked:!!t,onChange:e=>a(e)}),children:(0,h.jsx)(T.Z,{tabs:w.XI,selectedIndex:w.XI.findIndex(e=>{let{value:a}=e;return a===t}),onChange:e=>l(w.XI[e].value)})})}(l=s||(s={})).Pulse="Pulse",l.Highlight="Highlight",l.Both="Both";let P=[{name:"Pulse",value:"Pulse",icon:()=>(0,h.jsx)("div",{className:"my-2 h-1 w-1 rounded-full bg-gray-400 outline outline-gray-500 ring-[6px] ring-gray-200"})},{name:"Highlight",value:"Highlight",ico)},{name:"Both",value:"Both",ico)}(n=d||(d={})).Beacon="beacon",n.Trigger="trigger",(o=c||(c={})).Position="Pulse position",o.Size="Pulse size",o.Appearance="appearance",(i=u||(u={})).Width="width",i.Backdrop="backdrop",i.LockHorizontalAutoScroll="lock horizontal auto-scroll",i.LockVerticalAutoScroll="lock vertical auto-scroll";let B=[{id:d.Beacon,name:"Beacon"},{id:d.Trigger,name:"Trigger"}],F=[{id:d.Beacon,name:"Beacon"},{id:g.XB.Tooltip,name:"Tooltip"}],I={[d.Beacon]:[c.Appearance,c.Size,c.Position],[g.XB.Tooltip]:[u.Width,u.Backdrop,u.LockHorizontalAutoScroll,u.LockVerticalAutoScroll]};var M=a(32517),A=a(6676),E=a.n(Ar V=a(18318let O=[...B,{name:"Tooltip",id:g.XB.Tooltip}}let ChecklistBackdropSelecvar R=a(20851let _=Object.values(g.XB).ma)}var Z=a(87017),D=a(15363),z=a(86414);function MassEditSettings(e){let{flowBuilderState:t,handleChange:a,dispatchFlowBuilder:l,steps:n}=e,[o,i]=(0,x.useState)(g.XB.Tooltip),[r,s]=(0,x.useState)(g.XB.Tooltip),[u,p]=(0,x.useState)(d.Beacon),[m,f]=(0,x.useState)(d.Beacon),[b,v]=(0,x.useState)(d.Beacon),[j,C]=(0,x.useState)(d.Beacon),[w,S]=(0,x.useState)(c.Appearance),[k,T]=(0,x.useState)("home"),P=[{name:"Anchored elements",description:"Change between beacons, triggers, and tooltips",value:"swap-anchors",Icon:N.iLY,Component:(0,h.jsx)(MassAnchorSwapForm,{fromOption:u,toOption:m,setFromOption:p,setToOption:f,flowBuilderState:t,handleChange:a,dispatchFlowBuilder:l,steps:n})},{name:"Step Appearances",description:"Bulk edit step appearances",value:"swap-appearances",Icon:N.OQg,Component:(0,h.jsx)(MassAppearanceSwapForm,{fromOption:o,toOption:r,setFromOption:i,setToOption:s,flowBuilderState:t,handleChange:a,dispatchFlowBuilder:l,steps:n})},{name:"Beacons & Tooltips",description:"Update properties of beacons & tooltips",value:"update-anchors",Icon:N.T$Z,Component:(0,h.jsx)(MassAnchorUpdate,{option:j,setOption:C,property:w,setProperty:S,flowBuilderState:t,handleChange:a,dispatchFlowBuilder:l,steps:n})},{name:"Multidelete",description:"Delete all beacons and triggers at once",value:"delete",Icon:N.XHJ,Component:(0,h.jsx)(DeleteAllForm,{option:b,setOption:v,flowBuilderState:t,handleChange:a,dispatchFlowBuilder:l,steps:n})}],B=P.find(e=>e.value===k);return(0,h.jsxs)(y.q,{title:"Multistep editors",children:[(0,h.jsx)("div",{className:"px-3",children:"home"!==k&&B?(0,h.jsx)("div",{className:"pb-3",children:(0,h.jsx)(Z.Z,{block:{...B,Component:B.Component},handleBack:()=>{l({type:"exit-selecting-steps"}),T("home")}})}):(0,h.jsx)(D.Z,{tabs:P,onSelectBlock:e=>{T(e),z.Z.track("bulk_editor_".concat(e,"_opened").replaceAll("-","_"))}})}),(0,h.jsx)(y.k,{children:"Apply edits across multiple steps at once. Publish before using editors to avoid unexpected edits."})]}}(r=p||(p={})).HOME="home",r.SWAP_ANCHORS="swap-anchors",r.SWAP_APPEARANCES="swap-appearances",r.UPDATE_ANCHORS="update-anchors",r.DELETE="delete";var L=a(98269),H=a(53954);function PanelButton(e){var t,a,l,n,o,i;let{flowDoc:r,stepIndex:s,buttonIndex:d,canDelete:c=!0,handleChange:u,handleClose:p,isEscapeView:m,language:x}=e,{workspace:f}=(0,H.cF)(),b=(0,H.NK)(f,g.TT.Multilingual),v=m?null===(a=r.escapeView)||void 0===a?void 0:null===(t=a.buttons)||void 0===t?void 0:t[d]:null===(l=r.steps[s].buttons)||void 0===l?void 0:l[d],j=null!==(n=null==v?void 0:v.appearance)&&void 0!==n?n:g.lu.Primary,k=b?null!==(o=(0,L._k)(null==v?void 0:v.multilingualText,x))&&void 0!==o?o:"":null!==(i=null==v?void 0:v.text)&&void 0!==i?i:"";return(0,h.jsxs)(Panel_PanelBase,{title:"Button",onClose:p,renderActions:):void 0,children:[(0,h.jsxs)("div",{className:"w-auto",children:[(0,h.jsx)("label",{className:"label-small",htmlFor:"text",children:"Text"}),(0,h.jsx)(C.oi,{autoFocus:!0,placeholder:"Enter button text",name:"text",className:"mb-4 w-full",value:k,onChange:e=>{if(m){let t=x?{multilingualText:(0,L.Gy)(null==v?void 0:v.multilingualText,null!=e?e:"",x)}:{};u({type:"update-escape-view-button",payload:{buttonIndex:d,patch:{text:e,...t}}});return}u({type:"set-step-button-text",payload:{stepIndex:s,buttonIndex:d,text:e}}),x&&u({type:"set-step-button-multilingual-text",payload:{stepIndex:s,buttonIndex:d,text:e,language:x}})}})]}),(0,h.jsx)(S.ol,{handleChange:u,target:m?"escape-view-button":"button",targetIndex:d,stepIndex:s,flowDoc:r}),(0,h.jsx)(y.q,{title:"Appearance",children:(0,h.jsx)(T.Z,{tabs:w.xf,selectedIndex:w.xf.findIndex(e=>{let{value:t}=e;return t===j}),onChang}})})]})}var U=a(31899),q=a(66547),G=a(26806);function _templateObject(){let e=(0,m._)(["\n    mutation UpdateFlowDefaultCaptureCollection($flowId: String!, $captureCollectionId: String) {\n  updateFlowDefaultCaptureCollection(\n    flowId: $flowId\n    captureCollectionId: $captureCollectionId\n  ) {\n    id\n    defaultCaptureCollectionId\n  }\n}\n    "]);return _templateObject=function(){return e},e}let W=(0,q.ZP)(_templateObject());var X=a(66329),K=a(11412),$=a(7444),Y=a(71659),J=a(5632),Q=a(55015),ee=a(6390),et=a(70358),Panel_AddCaptureButto};let CaptureCollectionIco),sortByCreatedA0,CaptureSelectio}let AddCollectionFoote}function PanelChecklistLauncher(e){let{checklistDoc:t,language:a,handleChange:l,handleClose:n}=e,{workspace:o}=(0,H.cF)(),i=(0,H.NK)(o,g.TT.Multilingual),{checklistLauncherText:r,multilingualLauncherText:s,checklistLauncherShowRemainder:d=!0}=t,c=i?(0,L._k)(s,a):r;return(0,h.jsxs)(Panel_PanelBase,{title:"Checklist launcher",onClose:n,children:[(0,h.jsxs)("div",{className:"w-auto",children:[(0,h.jsx)("label",{className:"label-small",htmlFor:"checklistLauncherText",children:"Launcher text"}),(0,h.jsx)(C.oi,{autoFocus:!0,placeholder:"Enter Launcher Text",name:"checklistLauncherText",value:c||"Get Started",className:"w-full",onChange:e=>{l({type:"update-checklist-doc",payload:{patch:{checklistLauncherText:e}}}),a&&e&&l({type:"set-multilingual-launcher-text",payload:{content:e,language:a}})}})]}),(0,h.jsx)(y.q,{title:"Remaining count",renderSwitc)})]})}var ea=a(12853),el=a(57256),en=a(83389),eo=a(95631),ei=a(56268),er=a(6312),es=a(77815),ed=a(54786);function getPersonalizationVariable_templateObject(){let e=(0,m._)(["\n    query GetPersonalizationVariable($id: String!) {\n  personalizationVariable(id: $id) {\n    ...PersonalizationVariable\n  }\n}\n    ",""]);return getPersonalizationVariable_templateObject=function(){return e},e}let ec=(0,q.ZP)(getPersonalizationVariable_templateObject(),ed.s);var eu=a(55839),ep=a(85982),em=a(50337);let eh=/\[(.+?)\](\((.+?))?\)/g,SwitcherLabe}function PanelFormTitle(e){var t,a,l,n;let{index:o,flowDoc:i,language:r,handleChange:s,handleClose:d}=e,{workspace:c}=(0,H.cF)(),u=(0,H.NK)(c,g.TT.Multilingual),p=i.steps[o],m=p.form,x=u?null!==(t=(0,L._k)(null==m?void 0:m.multilingualTitle,r))&&void 0!==t?t:"":null!==(a=null==m?void 0:m.title)&&void 0!==a?a:"",f=u?null!==(l=(0,L._k)(null==m?void 0:m.multilingualSubtitle,r))&&void 0!==l?l:"":null!==(n=null==m?void 0:m.subTitle)&&void 0!==n?n:"";return(0,h.jsxs)(Panel_PanelBase,{title:"Form title",onClose:d,children:[(0,h.jsxs)("div",{className:"w-auto",children:[(0,h.jsx)("label",{className:"label-small",htmlFor:"title",children:"Title"}),(0,h.jsx)(C.oi,{value:x,placeholder:"Enter title",name:"title",className:"w-full",onChange:e=>{s({type:"set-form-title",payload:{index:o,title:e}}),r&&s({type:"set-form-multilingual-title",payload:{index:o,title:e,language:r}})}})]}),(0,h.jsxs)("div",{className:"w-auto",children:[(0,h.jsx)("label",{className:"label-small mt-3",htmlFor:"subTitle",children:"Subtitle"}),(0,h.jsx)(C.oi,{value:f,placeholder:"Enter subtitle",className:"w-full",name:"subTitle",onChange:e=>{s({type:"set-form-subtitle",payload:{index:o,subtitle:e}}),r&&s({type:"set-form-multilingual-subtitle",payload:{index:o,subtitle:e,language:r}})}})]})]})}let ButtonEdit=e=>{let{flowDoc:t,handleChange:a,defaultText:l,btn:n,stepIndex:o,target:i,language:r}=e,{workspace:s}=(0,H.cF)(),d=(0,H.NK)(s,g.TT.Multilingual),c=d?(0,L._k)(null==n?void 0:n.multilingualText,r):null==n?void 0:n.text;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("label",{className:"label-small",htmlFor:"text",children:"Text"}),(0,h.jsx)(C.oi,{placeholder:"Enter button text",name:"text",className:"mb-4 w-full",value:c||l,onChange:e=>{"complete-button"===i?(a({type:"set-complete-btn-text",payload:{text:e}}),r&&a({type:"set-complete-btn-multilingual-text",payload:{text:e,language:r}})):(a({type:"set-step-nav-btn-text",payload:{stepIndex:o,target:i,text:e}}),r&&a({type:"set-step-nav-btn-multilingual-text",payload:{stepIndex:o,target:i,text:e,language:r}}))}}),(0,h.jsx)(S.ol,{handleChange:a,target:i,targetIndex:0,stepIndex:o,flowDoc:t})]})};function PanelNavigationButtons(e){var t,a,l,n;let{stepIndex:o,flowDoc:i,language:r,handleChange:s,handleClose:d}=e,c=i.steps||[],u=c[o],{hasNavigationCompleteBtn:p,completeBtn:m}=i,{id:f,backBtn:b,nextBtn:v}=u,j=null===(l=u.hasNextBtn)||void 0===l||l,w=null===(n=u.hasBackBtn)||void 0===n||n,S=f===(null===(t=c[0])||void 0===t?void 0:t.id),k=f===(null===(a=c[c.length-1])||void 0===a?void 0:a.id);(0,x.useEffect},[b,v]);let T=!S&&!1!==w,P=!k&&!1!==j;return(0,h.jsxs)(Panel_PanelBase,{title:"Navigation buttons",onClose:d,renderAction),children:[(0,h.jsx)(y.q,{title:"Back button",isClosed:!T,renderSwitc),children:(0,h.jsx)(ButtonEdit,{target:"back-button",defaultText:"Back",handleChange:s,btn:b,flowDoc:i,stepIndex:o,language:r})}),!k&&(0,h.jsx)(y.q,{title:"Next button",renderSwitc),isClosed:!j,children:(0,h.jsx)(ButtonEdit,{target:"next-button",defaultText:"Next",handleChange:s,btn:v,flowDoc:i,stepIndex:o,language:r})}),k&&(0,h.jsx)(y.q,{title:"Complete button",isClosed:!p,renderSwitc),children:(0,h.jsx)(ButtonEdit,{defaultText:"Complete",handleChange:s,btn:m,flowDoc:i,stepIndex:o,target:"complete-button",language:r})})]})}var ex=a(38426),ef=a(17554);function getThemePublished_templateObject(){let e=(0,m._)(["\n    query GetThemePublished($id: String!) {\n  theme(id: $id) {\n    id\n    name\n    published {\n      ...ThemeVersion\n    }\n  }\n}\n    ",""]);return getThemePublished_templateObject=function(){return e},e}let eg=(0,q.ZP)(getThemePublished_templateObject(),ef.A);var eb=a(341unction FlowSettings(e){let{flow:t,flowBuilderState:a,handleChange:l,handleClose:n}=e,{hasNavigationBtns:o,hasNavigationCompleteBtn:i,escapeView:r,hasStepCount:s,theme:d}=t,addEscapeView=()=>{var e;let t=null!==(e=a.language)&&void 0!==e?e:g.sp.En,n={id:E()(),actions:[{id:E()(),type:g.yo.Converted},{id:E()(),type:g.yo.Navigate}],appearance:g.lu.Primary,text:"Book Demo",multilingualText:[{language:t,content:L._b[eb.C7.BookDemo][t]}]},o={id:E()(),buttons:[n]};l({type:"set-escape-view",payload:o}),setTimeou},200)},scrollIntoEscapeVie};return(0,h.jsxs)(Panel_PanelBase,{title:"Settings",onClose:n,children:[(0,h.jsx)(SelectTheme,{theme:d,handleChange:l}),(0,h.jsx)(ManageNavigationButtons,{hasNavigationBtns:null!=o&&o,hasNavigationCompleteBtn:null!=i&&i,hasStepCount:null!=s&&s,handleChange:l}),(0,h.jsx)(y.q,{title:"Escape view",renderSwitc),isClosed:!0,renderClose)})]})}function PanelSettingsContent(e){return e.type===g.De.Checklist?(0,h.jsx)(CheckListSettings,{checklist:e.checklist,handleChange:e.handleChange,handleClose:e.handleClose}):(0,h.jsx)(FlowSettings,{flow:e.flow,flowBuilderState:e.flowBuilderState,handleChange:e.handleChange,handleClose:e.handleClose})}var ev=a(47819),ey=a(56958),ej=a(37074);function PanelStep(e){var t;let{index:a,flowDoc:l,flowBuilderState:n,handleChange:o,handleClose:i}=e,{hasNavigationBtns:r}=l,{hideNavigationBtns:s,appearance:d,markCompleted:c,modalPosition:u,showBackdrop:p,tooltipSize:m,backdropStyle:x,customModalLeftPercentage:f,customModalTopPercentage:b,lockHorizontalScroll:v,lockVerticalScroll:S,resetScrollToTop:P,customDialogHeight:B,disableEscapeView:F}=l.steps[a],I=!!v,A=!!S,{workspace:V}=(0,H.cF)(),[{data:O,error:R}]=(0,es.x)({variables:{workspaceId:V.id},pause:!(null==V?void 0:V.id)}),_=null==O?void 0:O.formFieldMetadata,Z=null==_?void 0:_.fine),[{data:D,fetching:z,error:U}]=(0,eu.U)({variables:{workspaceId:V.id},pause:!(null==V?void 0:V.id)}),q=null==D?void 0:null===(t=D.personalizationVariables)||void 0===t?void 0:t.fin}),updateAppearance=async e=>{var t;if(!(null==Z?void 0:Z.id)){ey.A.error("Form metadata not initialized yet");return}let l=null!==(t=n.language)&&void 0!==t?t:g.sp.En;if(e===g.XB.Form&&d!==g.XB.Form){let e={id:E()(),title:"",multilingualTitle:[{language:l,content:""}],subTitle:"",multilingualSubtitle:[{language:l,content:""}],fields:[(0,ev.Mi)({emailFieldMetadataId:Z.id,emailPersonalizationVariableId:(null==q?void 0:q.id)||null})]},t={id:E()(),actions:[{id:E()(),type:g.yo.NextStep}],appearance:g.lu.Primary,text:"Submit",multilingualText:[{language:l,content:L._b.Submit[l]}]};o({type:"set-step-buttons",payload:{index:a,buttons:[t]}}),o({type:"set-step-form",payload:{index:a,form:e}})}e===g.XB.Tooltip&&d!==g.XB.Tooltip&&o({type:"set-step-buttons",payload:{index:a,buttons:[]}}),o({type:"update-step",payload:{index:a,patch:{appearance:e}}})};return(0,h.jsxs)(Panel_PanelBase,{title:"Step",onClose:i,renderActions:()=>(0,h.jsxs)("button",{className:"btn-red",onClick:()=>{let e=(0,ev.Lz)(l,a);if(e.length>0){(0,M.Rn)((0,h.jsx)(ej.Z,{dependentSteps:e}));return}o({type:"delete-step",payload:{index:a}}),i()},children:[(0,h.jsx)(N.pJl,{className:"-ml-0.5 mr-2 h-4 w-4","aria-hidden":"true"}),"Delete Step"]}),children:[(0,h.jsx)(y.q,{title:"Appearance",children:(0,h.jsx)(T.Z,{tabs:w._A,selectedIndex:w._A.findInde}),onChang)})}),(0,h.jsx)(y.q,{title:"Disable escape view",renderSwitch:()=>(0,h.jsx)(C.rs,{checked:null!=F&&F,onChange:e=>o({type:"update-step",payload:{index:a,patch:{disableEscapeView:e}}})})}),(0,h.jsx)(y.q,{title:"Completion step",renderSwitch:()=>(0,h.jsx)(C.rs,{checked:null!=c&&c,onChange:e=>o({type:"update-step",payload:{index:a,patch:{markCompleted:e}}})})}),(0,h.jsx)(y.q,{title:"Reset scroll to top",renderSwitch:()=>(0,h.jsx)(C.rs,{checked:null!=P&&P,onChange:e=>o({type:"update-step",payload:{index:a,patch:{resetScrollToTop:e}}})})}),d!==g.XB.Invisible&&(0,h.jsx)(StepBackdropSelect,{backdrop:null!=p&&p,backdropStyle:x,onCheckedChange:e=>o({type:"update-step",payload:{index:a,patch:{showBackdrop:e}}}),onStyleChanged:e=>o({type:"update-step",payload:{index:a,patch:{backdropStyle:e}}})}),r&&d!==g.XB.Invisible&&d!==g.XB.Form&&(0,h.jsx)(y.q,{title:"Hide navigation buttons",renderSwitc)}),d===g.XB.Modal&&(0,h.jsxs)(y.q,{title:"Custom modal position",isClosed:!u,renderSwitc),children:[(0,h.jsx)(j.Z,{items:w.OS,placeHolder:"Select position",field:"name",mb:0,className:"mb-0 w-full flex-1",onChang},selected:u||""}),u===g.z.Custom&&(0,h.jsxs)("div",{className:"flex flex-col justify-between gap-1",children:[(0,h.jsx)("div",{children:(0,h.jsx)(k.Z,{unit:"%",labelClass:"text-sm text-gray-600",label:"Percentage from left",min:0,max:100,value:null!=f?f:0,onChange:(e,t)=>{let{valueAsNumber:l}=t;o({type:"update-step",payload:{index:a,patch:{customModalLeftPercentage:l,customModalTopPercentage:b}}})}})}),(0,h.jsx)("div",{children:(0,h.jsx)(k.Z,{unit:"%",labelClass:"text-sm text-gray-600 ",label:"Percentage from top",min:0,max:100,value:null!=b?b:0,onChang}})})]})]}),d===g.XB.Tooltip&&(0,h.jsx)(y.q,{title:"Disable auto-scroll into view",isClosed:!(I||A),renderSwitc),children:(0,h.jsxs)("div",{className:"space-y-3",children:[(0,h.jsx)(C.XZ,{labelText:w.MI.title,checked:I,onChange:e=>{o({type:"update-step",payload:{index:a,patch:{lockHorizontalScroll:e}}})}}),(0,h.jsx)(C.XZ,{labelText:w.w4.title,checked:A,onChang}})]})}),d===g.XB.Tooltip&&(0,h.jsx)(TooltipWidth,{tooltipSize:m,onCheckedChang),onSizeChang)}),d===g.XB.Modal||d===g.XB.Tooltip?(0,h.jsx)(y.q,{title:"Fixed Height",isClosed:!B,renderSwitc),children:(0,h.jsx)("div",{className:"space-y-3",children:(0,h.jsx)(k.Z,{unit:"px",labelClass:"text-sm text-gray-600",label:"Height",min:200,max:2e3,value:null!=B?B:0,onChang}})})}):null]})}function PanelTask(e){let{taskIndex:t,checklistDoc:a,language:l,handleChange:n,handleClose:o}=e,{workspace:i}=(0,H.cF)(),r=(0,H.NK)(i,g.TT.Multilingual),{title:s,multilingualTitle:d,body:c,multilingualBody:u}=a.tasks[t],p=r?(0,L._k)(d,l):s,m=r?(0,L._k)(u,l):c;return(0,h.jsxs)(Panel_PanelBase,{title:"Task",onClose:o,renderAction),children:[(0,h.jsxs)("div",{className:"w-auto",children:[(0,h.jsx)("label",{className:"label-small",htmlFor:"title",children:"Title"}),(0,h.jsx)(C.oi,{className:"mb-3 w-full",value:null!=p?p:"",placeholder:"Enter title",name:"title",autoFocus:!0,onChange:e=>{n({type:"update-task",payload:{index:t,patch:{title:e}}}),l&&e&&n({type:"set-task-multilingual-title",payload:{index:t,language:l,content:e}})}})]}),(0,h.jsxs)("div",{className:"w-auto",children:[(0,h.jsxs)("label",{className:"label-small",htmlFor:"body",children:["Body",(0,h.jsx)("span",{className:"ml-2 font-normal text-gray-400",children:"(optional)"})]}),(0,h.jsx)(C.oi,{className:"mb-5 w-full",value:null!=m?m:"",placeholder:"Enter body",name:"body",onChange:e=>{n({type:"update-task",payload:{index:t,patch:{body:e}}}),l&&e&&n({type:"set-task-multilingual-body",payload:{index:t,language:l,content:e}})}})]}),(0,h.jsx)(S.BY,{handleChange:n,taskIndex:t,checklistDoc:a})]})}function PanelTaskHeader(e){let{checklistDoc:t,language:a,handleChange:l,handleClose:n}=e,{workspace:o}=(0,H.cF)(),i=(0,H.NK)(o,g.TT.Multilingual),{checklistTitle:r,multilingualTitle:s,checklistBody:d,multilingualBody:c}=t,u=i?(0,L._k)(s,a):r,p=i?(0,L._k)(c,a):d;return(0,h.jsxs)(Panel_PanelBase,{title:"Checklist Title",onClose:n,children:[(0,h.jsxs)("div",{className:"w-auto",children:[(0,h.jsx)("label",{className:"label-small",htmlFor:"title",children:"Title"}),(0,h.jsx)(C.oi,{value:null!=u?u:"",className:"mb-3 w-full",placeholder:"Enter title",name:"checklistTitle",onChange:e=>{l({type:"update-checklist-doc",payload:{patch:{checklistTitle:e}}}),a&&e&&l({type:"set-multilingual-title",payload:{language:a,content:e}})}})]}),(0,h.jsxs)("div",{className:"w-auto",children:[(0,h.jsx)("label",{className:"label-small",htmlFor:"btnText",children:"Body"}),(0,h.jsx)(C.oi,{className:"mb-3 w-full",value:null!=p?p:"",placeholder:"Enter body",name:"checklistBody",onChange:e=>{l({type:"update-checklist-doc",payload:{patch:{checklistBody:e}}}),a&&e&&l({type:"set-multilingual-body",payload:{language:a,content:e}})}})]})]})}var eC=a(74503}function Panel_templateObject(){let e=(0,m._)(["\n  width: 410px;\n  background-color: #fefefe;\n  overflow-y: auto;\n  overflow-x: hidden;\n  transition: 0.25s ease;\n  opacity: 0;\n  z-index: 99999999;\n  transform: translate3d(100%, 0, 0);\n  &.open {\n    opacity: 1;\n    transform: translate3d(0, 0, 0);\n  }\n"]);return Panel_templateObject=function(){return e},e}function PanelContents(e){let{panelType:t,props:a,flowBuilderState:l}=e;switch(t){case"STEP":return(0,h.jsx)(PanelStep,{...a,flowBuilderState:l});case"ANCHOR":return(0,h.jsx)(PanelAnchor,{...a});case"BUTTON":return(0,h.jsx)(PanelButton,{...a});case"TASK":return(0,h.jsx)(PanelTask,{...a});case"CHECKLIST":return(0,h.jsx)(PanelTaskHeader,{...a});case"SETTINGS":if(a.type===g.De.Checklist)return(0,h.jsx)(PanelSettingsContent,{...a});return(0,h.jsx)(PanelSettingsContent,{...a,flowBuilderState:l});case"INPUT":return(0,h.jsx)(PanelFormField,{...a});case"FORM":return(0,h.jsx)(PanelFormTitle,{...a});case"TRIGGER":return(0,h.jsx)(PanelTrigger,{...a});case"BEACON":return(0,h.jsx)(PanelBeacon,{...a});case"CAPTURE":return(0,h.jsx)(PanelCapture,{...a});case"LAUNCHER":return(0,h.jsx)(PanelChecklistLauncher,{...a});case"NAVIGATION_BUTTONS":return(0,h.jsx)(PanelNavigationButtons,{...a});case"BULK_EDITOR":return(0,h.jsx)(PanelBulkEditor,{...a,flowBuilderState:l});default:return null}}let ew=f.Z.div(Panel_templateObject()}},1741},74503:function(e,t,a){a.d(t,{D:function(){return FlowBuilderTriggerCondition}});var l=a(52322),n=a(8275),o=a(16544),i=a(83536),r=a(3016),s=a(47330),d=a(77512),c=a(6676),u=a.n(c),p=a(99135),m=a(57574);let h=[{name:"Is equal to",value:s.EI.Equal},{name:"Contains",value:s.EI.Contains}],x="rounded text-white p-1",f=[{name:"Element is clicked",value:s.wS.Element,defaultState:s.EI.Clicked,icon:(0,l.jsx)("div",{className:"".concat(x," bg-amber-500"),children:(0,l.jsx)(o.ZD,{className:"h-3 w-3"})})},{name:"Text input has value",value:s.wS.Input,defaultState:s.EI.Equal,icon:(0,l.jsx)("div",{className:"".concat(x," bg-slate-500"),children:(0,l.jsx)(o.QrB,{className:"h-3 w-3"})}),isAllowed:e=>{var t;let{step:a}=e;return!!(null==a?void 0:null===(t=a.capture)||void 0===t?void 0:t.webCapture)}},{name:"Timer",value:s.wS.Timer,icon:(0,l.jsx)("div",{className:"".concat(x," bg-blue-500"),children:(0,l.jsx)(o.T39,{className:"h-3 w-3"})}),isAllowed:e=>{var t;let{step:a}=e;return!!(null==a?void 0:null===(t=a.triggers)||void 0===t?void 0:t.everr))}}],g="bg-white py-4 shadow text-gray-500",TriggerConditionConfig=e=>{let{step:t,stepIndex:a,triggerIndex:i,editMode:c,handleRemove:u,trigger:m,handleChange:f}=e;switch(m.type){case s.wS.Input:var b;return(0,l.jsx)(p.Z,{bannerClassName:g,bannerName:"Text input has value",bannerIcon:(0,l.jsx)("div",{className:"".concat(x," bg-slate-500"),children:(0,l.jsx)(o.QrB,{className:"h-3 w-3"})}),handleRemove:c?u:void 0,children:(0,l.jsxs)("div",{onClick:e=>e.stopPropagation(),children:[(0,l.jsx)(n.Z,{selector:m.selector,step:t,context:{target:"trigger",stepIndex:a,targetIndex:i},canEdit:c}),(0,l.jsx)(r.Z,{items:h,mb:2,field:"name",className:"mt-2",onChang},selected:(null==m?void 0:m.state)||"EQUAL"}),(0,l.jsx)(d.oi,{value:null!==(b=null==m?void 0:m.value)&&void 0!==b?b:"",placeholder:"Enter value",className:"w-full",name:"value",onChang}})]})});case s.wS.Timer:return(0,l.jsx)(p.Z,{bannerClassName:g,bannerName:"Timer",bannerIcon:(0,l.jsx)("div",{className:"".concat(x," bg-blue-500"),children:(0,l.jsx)(o.T39,{className:"h-3 w-3"})}),handleRemove:c?u:void 0,children:(0,l.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,l.jsx)(d.Y2,{value:m.timeUntilActions?m.timeUntilActions/1e3:10,unit:"seconds",min:5,max:120,onChange:e=>{f({type:"update-trigger",payload:{stepIndex:a,triggerIndex:i,patch:{timeUntilActions:1e3*e}}})}})})});case s.wS.Element:default:return(0,l.jsx)(p.Z,{bannerClassName:g,bannerName:"Element is clicked",bannerIcon:(0,l.jsx)("div",{className:"".concat(x," bg-amber-500"),children:(0,l.jsx)(o.ZD,{className:"h-3 w-3"})}),handleRemove:c?u:void 0,children:(0,l.jsx)("div",{onClic),children:(0,l.jsx)(n.Z,{selector:m.selector,step:t,context:{target:"trigger",stepIndex:a,targetIndex:i},canEdit:c})})})}},FlowBuilderTriggerCondition=e=>{let{step:t,stepIndex:a,triggerIndex:n,trigger:o,handleChange:r,editMode:d}=e,{type:c}=o;return(0,l.jsx)(i.q,{title:"Condition",children:c?(0,l.jsx)(TriggerConditionConfig,{step:t,stepIndex:a,triggerIndex:n,trigger:o,handleChange:r,handleRemov},editMode:d}):(0,l.jsx)(m.M_,{title:"Add condition",options:f,handleCreate:e=>{let{value:t}=e,l=f.fint),i={actions:(null==o?void 0:o.actions)||[],id:u()(),type:t,state:null==l?void 0:l.defaultState,timeUntilActions:t===s.wS.Timer?1e4:null};r({type:"update-trigger",payload:{stepIndex:a,triggerIndex:n,patch:i}})},step:t})})}},8621},8256},61036:function(e,t,a){a.d(t,{Y:function(){return getActionsParent},Z:function(){return flowDocumentReducer}});var l=a(82563),n=a(98269),o=a(86210);let getActionsParen},getActio};function flowDocumentReducer(e,t){var a,i,r,s,d,c,u,p,m,h,x;if("set-flow"===t.type)return t.payload;if(!e)return e;if("set-name"===t.type)return{...e,name:t.payload};if("set-default-capture-collection-id"===t.type)return{...e,defaultCaptureCollectionId:t.payload};if(!e.editVersion)return e;switch(t.type){case"set-steps":return e.editVersion.doc.steps=t.payload,{...e};case"set-escape-view":return e.editVersion.doc.escapeView=t.payload,{...e};case"update-escape-view":{let{patch:a}=t.payload;if(e.editVersion.doc.escapeView){let t=e.editVersion.doc.escapeView;return(0,o.a)(t,a),{...e}}break}case"update-multilingual-escape-view-content":{let{content:a,language:l}=t.payload;if(e.editVersion.doc.escapeView){let t=e.editVersion.doc.escapeView;(0,o.a)(t,{multilingualContent:(0,n.Gy)(t.multilingualContent,a,l)})}return{...e}}case"update-flow-doc":return(0,o.a)(e.editVersion.doc,t.payload.patch),{...e};case"set-theme":return e.editVersion.doc.theme=t.payload,e.editVersion.doc.themeId=null===(a=t.payload)||void 0===a?void 0:a.id,{...e};case"insert-step":{let{step:a,index:l}=t.payload;return e.editVersion.doc.steps=[...e.editVersion.doc.steps.slice(0,l),a,...e.editVersion.doc.steps.slice(l)],{...e}}case"delete-step":{let{index:a}=t.payload;return e.editVersion.doc.steps=[...e.editVersion.doc.steps.slice(0,a),...e.editVersion.doc.steps.slice(a+1)],{...e}}case"rename-step":{let{index:a,name:l}=t.payload;return e.editVersion.doc.steps[a].name=l,{...e}}case"set-step-buttons":{let{index:a,buttons:l}=t.payload;return e.editVersion.doc.steps[a].buttons=l,{...e}}case"set-step-button-text":{let{stepIndex:a,buttonIndex:l,text:n}=t.payload,o=e.editVersion.doc.steps[a].buttons;if(o&&o[l])return o[l].text=n,{...e};break}case"set-step-button-multilingual-text":{let{stepIndex:a,buttonIndex:l,text:o,language:i}=t.payload,r=e.editVersion.doc.steps[a].buttons;if(r&&r[l])return r[l].multilingualText=(0,n.Gy)(r[l].multilingualText,null!=o?o:"",i),{...e};break}case"set-step-nav-btn-text":{let{stepIndex:a,target:l,text:n}=t.payload,o=e.editVersion.doc.steps[a];if(o){let t=(()=>{switch(l){case"next-button":return o.nextBtn;case"back-button":return o.backBtn}})();if(t)return t.text=n,{...e}}break}case"set-step-nav-btn-multilingual-text":{let{stepIndex:a,target:l,text:o,language:i}=t.payload,r=e.editVersion.doc.steps[a];if(r){let t})();if(t)return t.multilingualText=(0,n.Gy)(t.multilingualText,null!=o?o:"",i),{...e}}break}case"delete-step-button":{let{stepIndex:a,buttonIndex:l}=t.payload,n=e.editVersion.doc.steps[a].buttons;if(n&&n[l])return e.editVersion.doc.steps[a].buttons=[...n.slice(0,l),...n.slice(l+1)],{...e};break}case"update-escape-view-button":{let{buttonIndex:a,patch:l}=t.payload,n=null===(i=e.editVersion.doc.escapeView)||void 0===i?void 0:i.buttons;if(n&&n[a]){let t=n[a];return(0,o.a)(t,l),{...e}}break}case"delete-escape-view-button":{let{buttonIndex:a}=t.payload,l=null===(r=e.editVersion.doc.escapeView)||void 0===r?void 0:r.buttons;if(l&&l[a])return e.editVersion.doc.escapeView.buttons=[...l.slice(0,a),...l.slice(a+1)],{...e};break}case"append-dialog-button":{let{stepIndex:a,button:l}=t.payload,n=e.editVersion.doc.steps[a].buttons;return n||(e.editVersion.doc.steps[a].buttons=[]),e.editVersion.doc.steps[a].buttons.push(l),{...e}}case"append-escape-view-button":{let a=null===(s=e.editVersion.doc.escapeView)||void 0===s?void 0:s.buttons;return a||(e.editVersion.doc.escapeView.buttons=[]),e.editVersion.doc.escapeView.buttons.push(t.payload.button),{...e}}case"set-step-form":{let{index:a,form:l}=t.payload;return e.editVersion.doc.steps[a].form=l,{...e}}case"append-form-field":{let{index:a,formField:l}=t.payload,n=e.editVersion.doc.steps[a].form;if(n)return n.fields||(n.fields=[]),n.fields=[...n.fields,l],{...e};break}case"update-form-field":{let{index:a,formFieldIndex:l,patch:n}=t.payload,i=e.editVersion.doc.steps[a].form;if(i&&(null===(d=i.fields)||void 0===d?void 0:d[l])){let t=i.fields[l];return(0,o.a)(t,n),{...e}}break}case"delete-form-field":{let{index:a,formFieldIndex:l}=t.payload,n=e.editVersion.doc.steps[a].form;if(n&&(null===(c=n.fields)||void 0===c?void 0:c[l]))return n.fields=[...n.fields.slice(0,l),...n.fields.slice(l+1)],{...e};break}case"set-form-title":{let{index:a,title:l}=t.payload,n=e.editVersion.doc.steps[a].form;if(n)return n.title=l,{...e};break}case"set-form-multilingual-title":{let{index:a,title:l,language:o}=t.payload,i=e.editVersion.doc.steps[a].form;if(i)return i.multilingualTitle=(0,n.Gy)(i.multilingualTitle,null!=l?l:"",o),{...e};break}case"set-form-subtitle":{let{index:a,subtitle:l}=t.payload,n=e.editVersion.doc.steps[a].form;if(n)return n.subTitle=l,{...e};break}case"set-form-multilingual-subtitle":{let{index:a,subtitle:l,language:o}=t.payload,i=e.editVersion.doc.steps[a].form;if(i)return i.multilingualSubtitle=(0,n.Gy)(i.multilingualSubtitle,null!=l?l:"",o),{...e};break}case"append-action":{let{stepIndex:a,targetIndex:l,target:n,action:o}=t.payload,i=getActionsParent({doc:e.editVersion.doc,stepIndex:a,target:n,targetIndex:l});if(i)return i.actions||(i.actions=[]),i.actions.push(o),{...e};break}case"delete-action":{let{stepIndex:a,actionIndex:l,targetIndex:n,target:o}=t.payload,i=getActionsParent({doc:e.editVersion.doc,stepIndex:a,target:o,targetIndex:n});if(null==i?void 0:i.actions)return i.actions=[...i.actions.slice(0,l),...i.actions.slice(l+1)],{...e};break}case"set-start-flow":{let{stepIndex:a,actionIndex:l,startFlow:n,target:o,targetIndex:i}=t.payload,r=getAction({doc:e.editVersion.doc,stepIndex:a,target:o,targetIndex:i,actionIndex:l});if(r)return r.startFlow=n,r.startFlowId=n.id,{...e};break}case"set-go-to-step":{let{stepIndex:a,actionIndex:l,goToStep:n,target:o,targetIndex:i}=t.payload,r=getAction({doc:e.editVersion.doc,stepIndex:a,target:o,targetIndex:i,actionIndex:l});if(r)return r.goToStep=n,{...e};break}case"set-action-navigate-url":{let{stepIndex:a,actionIndex:l,url:n,target:o,targetIndex:i}=t.payload,r=getAction({doc:e.editVersion.doc,stepIndex:a,target:o,targetIndex:i,actionIndex:l});if(r)return r.url=n,{...e};break}case"set-action-navigate-new-tab":{let{stepIndex:a,actionIndex:l,newTab:n,target:o,targetIndex:i}=t.payload,r=getAction({doc:e.editVersion.doc,stepIndex:a,target:o,targetIndex:i,actionIndex:l});if(r)return r.newTab=n,{...e};break}case"set-action-sharelink-cta":{let{stepIndex:a,actionIndex:l,shareLinkCTA:n,target:o,targetIndex:i}=t.payload,r=getAction({doc:e.editVersion.doc,stepIndex:a,target:o,targetIndex:i,actionIndex:l});return r&&(r.shareLinkCTA=n),{...e}}case"set-selector":{let{stepIndex:a,target:l,selector:n}=t.payload,o=e.editVersion.doc.steps[a];if(o){let a})();if(a)return a.selector=n,{...e}}break}case"set-selector-image-url":{let{stepIndex:a,target:l,url:n}=t.payload,o=e.editVersion.doc.steps[a];if(o){let a})();if(a)return a.imageUrl=n,{...e}}break}case"append-beacon":{let{stepIndex:a,beacon:l}=t.payload,n=e.editVersion.doc.steps[a];if(n)return n.beacons||(n.beacons=[]),n.beacons.push(l),{...e};break}case"update-beacon":{let{stepIndex:a,beaconIndex:l,patch:n}=t.payload,i=e.editVersion.doc.steps[a];if(i&&(null===(u=i.beacons)||void 0===u?void 0:u[l])){let t=i.beacons[l];return(0,o.a)(t,n),{...e}}break}case"delete-beacon":{let{stepIndex:a,beaconIndex:l}=t.payload,n=e.editVersion.doc.steps[a];if(n&&(null===(p=n.beacons)||void 0===p?void 0:p[l]))return n.beacons=[...n.beacons.slice(0,l),...n.beacons.slice(l+1)],{...e};break}case"delete-all-beacons":{let{stepIndex:a}=t.payload,l=e.editVersion.doc.steps[a];return l.beacons=[],{...e}}case"delete-all-triggers":{let{stepIndex:a}=t.payload,l=e.editVersion.doc.steps[a];return l.triggers=[],{...e}}case"update-step":{let{index:a,patch:l}=t.payload,n=e.editVersion.doc.steps[a];return(0,o.a)(n,l),{...e}}case"append-trigger":{let{stepIndex:a,trigger:l}=t.payload,n=e.editVersion.doc.steps[a];if(n)return n.triggers||(n.triggers=[]),n.triggers.push(l),{...e};break}case"update-trigger":{let{stepIndex:a,triggerIndex:l,patch:n}=t.payload,i=e.editVersion.doc.steps[a];if(i&&(null===(m=i.triggers)||void 0===m?void 0:m[l])){let t=i.triggers[l];return(0,o.a)(t,n),{...e}}break}case"delete-trigger":{let{stepIndex:a,triggerIndex:l}=t.payload,n=e.editVersion.doc.steps[a];if(n&&(null===(h=n.triggers)||void 0===h?void 0:h[l]))return n.triggers=[...n.triggers.slice(0,l),...n.triggers.slice(l+1)],{...e};break}case"update-button":{let{stepIndex:a,buttonIndex:l,patch:n}=t.payload,i=e.editVersion.doc.steps[a];if(i&&(null===(x=i.buttons)||void 0===x?void 0:x[l])){let t=i.buttons[l];return(0,o.a)(t,n),{...e}}break}case"set-complete-btn-text":{let{text:a}=t.payload;return e.editVersion.doc.completeBtn&&(e.editVersion.doc.completeBtn.text=a),{...e}}case"set-complete-btn-multilingual-text":{let{text:a,language:l}=t.payload;return e.editVersion.doc.completeBtn&&(e.editVersion.doc.completeBtn.multilingualText=(0,n.Gy)(e.editVersion.doc.completeBtn.multilingualText,null!=a?a:"",l)),{...e}}case"set-has-nav-complete-btn":{let{hasNavigationCompleteBtn:a}=t.payload;return a&&!e.editVersion.doc.completeBtn&&(e.editVersion.doc.completeBtn={...l.D}),(0,o.a)(e.editVersion.doc,{hasNavigationCompleteBtn:a}),{...e}}case"update-multilingual-step-content":{let{stepIndex:a,content:l,language:i}=t.payload,r=e.editVersion.doc.steps[a],{multilingualContent:s}=r;return(0,o.a)(r,{multilingualContent:(0,n.Gy)(s,l,i)}),{...e}}}return e}},7120},3852)}},83)}},38)}},78{})}},90306:function(e,t,a){a.d(t,{c:function(){return o}});var l=a(73235),n=a(66547);function _templateObject(){let e=(0,l._)(["\n    fragment FlowFormFieldMetadata on FlowFormFieldMetadata {\n  id\n  attributeName\n  displayName\n  type\n  workspaceId\n}\n    "]);return _templateObject=function(){return e},e}let o=(0,n.ZP)(_templateObject())}(r)}},77815:function(e,t,a){a.d(t,{x:function(){return useGetFormFieldMetadataQuery}});var l=a(73235),n=a(66547),o=a(90306),i=a(26806);function _templateObject(){let e=(0,l._)(["\n    query GetFormFieldMetadata($workspaceId: String!) {\n  formFieldMetadata(workspaceId: $workspaceId) {\n    ...FlowFormFieldMetadata\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let r=(0,n.ZP)(_templateObject(),o.c);function useGetFormFieldMetadataQuery(e){return i.aM({query:r,...e})}},1821:function(e,t,a){a.d(t,{U:function(){return useGetMediaCaptureQuery}});var l=a(73235),n=a(66547),o=a(87205),i=a(26806);function _templateObject(){let e=(0,l._)(["\n    query GetMediaCapture($id: String!) {\n  getMediaCapture(id: $id) {\n    ...MediaCapture\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let r=(0,n.ZP)(_templateObject(),o.f);function useGetMediaCaptureQuery(e){return i.aM({query:r,...e})}},e})}},e})}},1991:function(e,t,a){a.d(t,{$T:function(){return apiProjectVersionIdRoute},CW:function(){return apiGuideVisitorsRoute},T6:function(){return apiIntegrationSalesforceSobjectsRoute},ZA:function(){return apiIntegrationMarketoProgramsRoute},e9:function(){return previewFlowFlowIdRoute},g5:function(){return apiAuthSsoPortalRoute},g9:function(){return apiIntegrationMarketoFieldsRoute},h7:function(){return apiEnrichmentRoute},iu:function(){return apiGuideTimeMeasurementsRoute},nt:function(){return previewCaptureIdRoute},p3:function(){return previewProjectIdRoute},u4:function(){return apiEdgeExportVisitorsRoute},xH:function(){return apiEdgeExportAccountsRoute}});let previewProjectIdRoute=e=>{let{id:t}=e;return"/preview/project/".concat(t)},previewFlowFlowIdRoute=e=>{let{flow_id:t}=e;return"/preview/flow/".concat(t)},previewCaptureIdRoute=e=>{let{id:t}=e;return"/preview/capture/".concat(t)},apiProjectVersionIdt(t)},apiGuideVisitorsRoute=()=>"/api/guide/visitors",apiGuideTimeMeasurementsRoute=()=>"/api/guide/time-measurements",apiEnrichmentRoute=()=>"/api/enrichment",apiIntegrationSalesforceSobjectsRoute=()=>"/api/integration/salesforce/sobjects",apiIntegrationMarketoProgramsRoute=()=>"/api/integration/marketo/programs",apiIntegrationMarketoFieldsRoute=()=>"/api/integration/marketo/fields",apiEdgeExportVisitorsRoute=()=>"/api/edge/export/visitors",apiEdgeExportAccountsRoute=()=>"/api/edge/export/accounts",apiAuthSsoPortalrtal"},n a}},=e}}},SENT},".")}}]);
//# sourceMappingURL=4225-f5e3ba82f52b0d9c.js.map