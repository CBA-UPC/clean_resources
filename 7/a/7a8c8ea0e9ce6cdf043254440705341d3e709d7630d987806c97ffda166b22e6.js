"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[3159],{55127:function(e,t,r){r.d(t,{Z:function(){return i}});var n=r(99881),o=r(46417);function i(e){return(0,o.jsx)(n.Z,{"data-test":"alert",elevation:6,variant:"filled",severity:e.severity,sx:{marginBottom:"12px",zIndex:100},children:e.children})}},65079:function(e,t,r){r.d(t,{Z:function(){return l}});var n=r(16031),o=r(55127),i=r(46417);function l(e){var t=e.error;if(!t)return null;var r=t.networkError,l=t.graphQLErrors;return(0,n.isEmpty)(l)?r?(0,i.jsx)(o.Z,{severity:"error",children:r.message}):null!==t&&void 0!==t&&t.networkError?(0,i.jsxs)(o.Z,{severity:"error",children:["Network Error: ",t.networkError.message]}):null:(0,i.jsx)(i.Fragment,{children:t.graphQLErrors.map((function(e){return(0,i.jsx)(o.Z,{severity:"error",children:e.message},"".concat(e.name,"-").concat(e.path))}))})}l.defaultProps={error:void 0}},64271:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(46417);function o(e){var t=e.width,r=e.height;return(0,n.jsxs)("svg",{width:t,height:r,viewBox:"0 0 114 98",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{d:"M105.708 18.8333H54.8843C53.2152 18.8333 51.6562 18.0005 50.7282 16.6131L44.904 7.90522C44.5121 7.31922 43.9812 6.83872 43.3583 6.50636C42.7354 6.174 42.0399 6.00007 41.3333 6H11.2917C10.1534 6 9.06184 6.45069 8.257 7.25293C7.45216 8.05517 7 9.14324 7 10.2778L7 78.7222C7 79.8568 7.45216 80.9448 8.257 81.7471C9.06184 82.5493 10.1534 83 11.2917 83H105.708C106.847 83 107.938 82.5493 108.743 81.7471C109.548 80.9448 110 79.8568 110 78.7222V23.1111C110 21.9766 109.548 20.8885 108.743 20.0863C107.938 19.284 106.847 18.8333 105.708 18.8333Z",fill:"url(#paint0_linear)",fillOpacity:"0.8"}),(0,n.jsx)("path",{d:"M102.042 12H55.393C53.7127 12 52.1447 11.156 51.2194 9.75345L45.96 1.7815C45.5986 1.23356 45.1089 0.784258 44.5344 0.473482C43.9599 0.162706 43.3183 6.61295e-05 42.6667 0H14.9583C13.9085 0 12.9017 0.421428 12.1594 1.17157C11.417 1.92172 11 2.93913 11 4V68C11 69.0609 11.417 70.0783 12.1594 70.8284C12.9017 71.5786 13.9085 72 14.9583 72H102.042C103.091 72 104.098 71.5786 104.841 70.8284C105.583 70.0783 106 69.0609 106 68V16C106 14.9391 105.583 13.9217 104.841 13.1716C104.098 12.4214 103.091 12 102.042 12Z",fill:"url(#paint1_linear)",fillOpacity:"0.5"}),(0,n.jsx)("path",{d:"M41.5359 14.8928L41.536 14.8929L48.1415 24.8009C49.1616 26.331 50.8788 27.25 52.7177 27.25H109.25C110.377 27.25 111.458 27.6978 112.255 28.4948C113.052 29.2918 113.5 30.3728 113.5 31.5V93.25C113.5 94.3772 113.052 95.4582 112.255 96.2552C111.458 97.0522 110.377 97.5 109.25 97.5H4.75C3.62283 97.5 2.54182 97.0522 1.7448 96.2552C0.947767 95.4582 0.5 94.3772 0.5 93.25V17.25C0.5 16.1228 0.947767 15.0418 1.7448 14.2448C2.54183 13.4478 3.62283 13 4.75 13H38C38.6996 13.0001 39.3884 13.1729 40.0053 13.5031C40.6221 13.8333 41.1479 14.3107 41.5359 14.8928Z",fill:"url(#paint2_linear)",stroke:"url(#paint3_diamond)"}),(0,n.jsx)("path",{d:"M71.2822 49L99.2822 85H38.2822L71.2822 49Z",fill:"url(#paint4_linear)"}),(0,n.jsx)("path",{d:"M37 56L59 85H17L37 56Z",fill:"url(#paint5_linear)"}),(0,n.jsx)("circle",{cx:"99",cy:"44",r:"5",fill:"url(#paint6_linear)",fillOpacity:"0.4"}),(0,n.jsxs)("defs",{children:[(0,n.jsxs)("linearGradient",{id:"paint0_linear",x1:"136.265",y1:"39.7124",x2:"59.7924",y2:"79.8056",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{offset:"0.136937",stopColor:"#B6CEFC"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#C2E4FF"})]}),(0,n.jsxs)("linearGradient",{id:"paint1_linear",x1:"130.225",y1:"31.5233",x2:"59.2782",y2:"68.2128",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{offset:"0.136937",stopColor:"#B6CEFC"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#C2E4FF"})]}),(0,n.jsxs)("linearGradient",{id:"paint2_linear",x1:"143.07",y1:"49.9339",x2:"51.3013",y2:"102.3",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{offset:"0.136937",stopColor:"#9FBEFA"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#C2E4FF"})]}),(0,n.jsxs)("radialGradient",{id:"paint3_diamond",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(6.00001 13) rotate(65.3981) scale(150.128 200.171)",children:[(0,n.jsx)("stop",{stopColor:"white"}),(0,n.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})]}),(0,n.jsxs)("linearGradient",{id:"paint4_linear",x1:"-5.03583e-07",y1:"54",x2:"99",y2:"92.5",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{stopColor:"#C5D8FE"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#84A9EF"})]}),(0,n.jsxs)("linearGradient",{id:"paint5_linear",x1:"-5.03583e-07",y1:"54",x2:"99",y2:"92.5",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{stopColor:"#C5D8FE"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#84A9EF"})]}),(0,n.jsxs)("linearGradient",{id:"paint6_linear",x1:"94",y1:"43.0446",x2:"100.356",y2:"49.8326",gradientUnits:"userSpaceOnUse",children:[(0,n.jsx)("stop",{stopColor:"#7EABFF"}),(0,n.jsx)("stop",{offset:"1",stopColor:"#B0CBFF"})]})]})]})}o.defaultProps={width:114,height:98}},13159:function(e,t,r){r.r(t),r.d(t,{default:function(){return re}});var n=r(93433),o=r(58467),i=r(31805),l=r(61511),a=r(85109),s=r(3404),d=r(24193),c=r(61113),u=r(2135),h=r(28422),p=r(46417);function b(){var e=(0,o.UO)(),t=e.bucketId,r=e.albumId,n=(0,l.x)().cache.readFragment({id:"BucketAlbum:".concat(r),fragment:h.HOg}),i=(null===n||void 0===n?void 0:n.parentId)===t;return r?(0,p.jsxs)(s.Z,{separator:(0,p.jsx)(a.Z,{fontSize:"small"}),children:[(0,p.jsx)(d.Z,{color:"primary",to:"/bucket/".concat(t,"/albums"),component:u.rU,style:{textTransform:"none"},children:"All Albums"}),!i&&(0,p.jsx)(d.Z,{color:"primary",to:"/bucket/".concat(t,"/album/").concat(null===n||void 0===n?void 0:n.parentId,"/subalbums"),component:u.rU,children:"..."}),(0,p.jsx)(c.Z,{sx:{fontSize:"14px",color:"black",fontWeight:"600"},children:null===n||void 0===n?void 0:n.title},r)]}):null}var m=r(15861),f=r(1413),x=r(64687),v=r.n(x),g=r(19860),j=r(24813),C=r(36241),w=r(47313),Z=r(8566),y=r(17189),k=r(72657),I=r(91345),S=r(16031),U=r(72668),A=r(68728),M=r(90891),F=r(19536),L=r(73984),E=r(56854),H=r(9289),O=r(71651),P=r(64271),T=r(25258),_=r(59824),R=r(80082),B=r(48529),G=r(62606),N=r(33317);function z(e){var t,r,n=e.bucketId,o=e.albumId,i=e.boundary,l=e.handleClick,a=e.isRootAlbum,s=(0,R.Z)().createAlert,d=(null===(t=(0,U.a)(h.Bzm,{skip:!n,variables:{bucketId:n,albumId:a?null:o,limit:4},onError:).data)||void 0===t||null===(r=t.bucketMediaByAlbumId)||void 0===r?void 0:r.items)||[],c=function(e){e.stopPropagation(),e.currentTarget.src=_.N,e.currentTarget.srcset=_.N};return d&&d.length?(0,p.jsx)(L.Z,{sx:{width:i,height:i,margin:0,overflow:"hidden"},variant:"quilted",cols:2,rowHeight:Math.floor(Number(i||0)/2),onClick:l,children:d.map((function(e,t){var r=(0,G.Z)(e,i),n=function(e,t){var r={0:{cols:1,rows:1},1:{cols:1,rows:1},2:{cols:1,rows:1},3:{cols:1,rows:1}};switch(e){case 1:r[0]={cols:2,rows:2};break;case 2:r[0]={cols:1,rows:2},r[1]={cols:1,rows:2};break;case 3:r[0]={cols:1,rows:1},r[1]={cols:1,rows:2},r[2]={cols:1,rows:1}}return r[t]}(d.length,t),o=n.cols,l=n.rows;return r?(0,p.jsx)(E.Z,{cols:o,rows:l,children:(0,p.jsx)("img",{src:r,alt:e.filename,onError:c,loading:"lazy"})},e.id):null}))}):(0,p.jsx)(L.Z,{sx:{width:i,height:i,margin:0},cols:1,rowHeight:Number(i||0),onClick:l,children:(0,p.jsx)(E.Z,{cols:1,rows:1,sx:{justifyContent:"center",alignItems:"center"},children:(0,p.jsx)(P.Z,{})})})}function D(e){var t,r,n,i,a,s,d,b=e.album,m=e.boundary,f=(0,o.UO)().bucketId,x=(0,o.s0)(),v=(0,g.Z)(),j=(0,l.x)(),C=(0,w.useRef)(null),Z=(0,O.Z)(C),y=(0,B.Z)(),k=y.toggleSelectAlbum,I=y.selectedAlbums,S=y.selectedModeEnabled,U=b&&!!I.get(b.id),L=null===b.parentId,E=j.cache.readFragment({id:"BucketAlbum:".concat(b.id),fragment:h.HOg}),P=j.cache.readFragment({id:"Bucket:".concat(f),fragment:h.cfG}),T=1===(null===E||void 0===E||null===(t=E.counters)||void 0===t?void 0:t.totalMedia)?"Item":"Items",_=1===(null===P||void 0===P||null===(r=P.counters)||void 0===r?void 0:r.totalMediaMinusTrash)?"Item":"Items",R="".concat((null===E||void 0===E||null===(n=E.counters)||void 0===n?void 0:n.totalMedia)||0," ").concat(T),G="".concat((null===P||void 0===P||null===(i=P.counters)||void 0===i?void 0:i.totalMediaMinusTrash)||0," ").concat(_);return f?(0,p.jsxs)("div",{ref:C,style:{padding:12,position:"relative"},children:[(0,p.jsxs)(N.Z,{isActive:S||U||Z,sx:{top:8,left:8,zIndex:1,backgroundColor:U?v.palette.primary.main:"rgba(71,85,105,0.5)","&:hover":{backgroundColor:U?"white":"rgba(71,85,105,0.9)"}},onClick:"data-id":b.id,"data-test":U?"deselect":"select",children:[U&&(0,p.jsx)(A.Z,{color:"inherit",sx:{background:v.palette.primary.main,borderRadius:"50%",padding:"1px"}}),!U&&(0,p.jsx)(A.Z,{color:"inherit",sx:{background:"transparent",borderRadius:"50%",padding:"1px"}})]}),(0,p.jsx)(z,{bucketId:f,albumId:b.id,boundary:m,handleClick:function(){x(L?"/bucket/".concat(f):"/bucket/".concat(f,"/album/").concat(b.id))},isRootAlbum:L}),(0,p.jsx)(H.Z,{disableGutters:!0,sx:{paddingTop:2},children:(0,p.jsxs)("div",{children:[(0,p.jsx)(c.Z,{variant:"subtitle2",children:b.title}),(0,p.jsxs)(c.Z,{variant:"caption",sx:{display:"flex",flexWrap:"wrap"},children:[(0,p.jsx)(M.Z,{component:u.rU,to:L?"/bucket/".concat(f):"/bucket/".concat(f,"/album/").concat(b.id),children:L?G:R}),!L&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(F.Z,{orientation:"vertical",sx:{marginLeft:1,marginRight:1}}),(0,p.jsx)(M.Z,{component:u.rU,to:"/bucket/".concat(f,"/album/").concat(b.id,"/subalbums"),children:"".concat(null!==E&&void 0!==E&&null!==(a=E.counters)&&void 0!==a&&a.totalSubalbums?null===E||void 0===E||null===(s=E.counters)||void 0===s?void 0:s.totalSubalbums:"0"," Album").concat(1===(null===E||void 0===E||null===(d=E.counters)||void 0===d?void 0:d.totalSubalbums)?"":"s")})]})]})]})})]}):null}var W=r(29439),V=r(41434),Y=r(61689),q=r(47131),Q=r(20201),X=r(12990),J=r(50102);function K(e){var t,r=e.boundary,n=(0,Q.Z)(),i=(0,o.TH)(),l=(0,X.Z)().bucketUser,a=(0,o.UO)(),s=a.bucketId,d=a.albumId,u=(0,w.useState)(!1),h=(0,W.Z)(u,2),b=h[0],m=h[1],f=!(null!==l&&void 0!==l&&null!==(t=l.permissions)&&void 0!==t&&t.albumCreate),x=!1===f;return(0,w.useEffect)((function(){var e=(i.state?i.state:{createNewAlbum:!1}).createNewAlbum;m(!!e)}),[i]),s?(0,p.jsxs)("div",{style:{marginTop:12,marginLeft:12,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",textAlign:"center",height:r,width:r,border:"1px dashed #0672CB",backgroundColor:"rgba(6, 114, 203, 0.08)"},children:[!b&&(0,p.jsx)(Y.Z,{PopperProps:{disablePortal:x},disableFocusListener:x,disableHoverListener:x,disableTouchListener:x,title:"Your viewer role for this bucket does not allow you to create albums.",children:(0,p.jsxs)("div",{children:[(0,p.jsx)(q.Z,{onClick:disabled:f,"data-test":"create-album-add-button",size:"large",id:"create-album-add-button",children:(0,p.jsx)(V.Z,{})}),(0,p.jsx)(c.Z,{color:f?n.palette.customGrey[400]:"primary",style:{fontWeight:"bold"},children:"Create new album"})]})}),b&&(0,p.jsx)(J.Z,{parentAlbumId:d||s,onClose:)]}):null}function $(e){var t=e.data,r=e.rowIndex,n=e.columnIndex,o=e.style,i=t.zoom,l=t.items[r*i+n];return(0,S.isUndefined)(l)?null:(0,S.isNull)(l)?(0,p.jsx)("div",{style:o,children:(0,p.jsx)(K,{boundary:Number(o.width)-12})}):(0,p.jsx)("div",{style:o,children:(0,p.jsx)(D,{album:l,boundary:Number(o.width)-12})})}var ee=(0,w.forwardRef)((function(e,t){var r=e.children,n=e.style,o=e.onScroll;return(0,p.jsx)("div",{id:"gallery",style:(0,f.Z)((0,f.Z)({},n),{},{overflowX:"hidden"}),onScroll:o,ref:t,children:r})}));function te(e){var t=e.items,r=e.fetchMore,n=e.hasMore,i=C.isMobile?0:14,l=a=(0,g.Z)(),s=(0,j.Z)(a.breakpoints.up("sm")),d=(0,j.Z)(a.breakpoints.up("md")),c=(0,j.Z)(a.breakpoints.up("lg")),u=(0,j.Z)(a.breakpoints.up("xl")),h=(0,o.UO)().albumId;(0,w.useEffect)((function(){return(0,I.MD)(null),(0,I.eG)({}),function(){(0,I.MD)(null),(0,I.eG)({})}}),[h]);var b=function(){var e=(0,m.Z)(v().mark((function e(n,o){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t[o]||r();case 1:case"end":return e.stop()}}),e)})));return (),f=2;return u?f=5:c?f=4:d?f=3:s&&(f=2),(0,p.jsx)("div",{"data-test":"drag-and-drop",style:{flex:1,position:"relative"},children:(0,p.jsx)(Z.Z,{children:function(e){var r=e.height,o=e.width;return o&&r?(0,p.jsx)(k.Z,{isItemLoaded:l,itemCount:t.length+Number(n),loadMoreItems:b,children:function(e){var n=e.onItemsRendered,l=e.ref;return(0,p.jsx)(y.Ym,{columnCount:f,columnWidth:Math.floor(o/f)-Math.floor(i/f),height:r,itemData:{items:t,zoom:f},ref:l,outerElementType:ee,rowCount:Math.ceil(t.length/f),rowHeight:Math.floor(o/f)-Math.floor(i/f)+100,width:o,onItemsRendered:function(e){var t=e.overscanRowStartIndex*f,r=e.overscanRowStopIndex*f,o=e.visibleRowStartIndex*f,i=e.visibleRowStopIndex*f;n({overscanStartIndex:t,overscanStopIndex:r,visibleStartIndex:o,visibleStopIndex:i})},children:$})}}):(0,p.jsx)("div",{})}})})}function re(){var e=(0,o.UO)().albumId,t=(0,X.Z)(e),r=t.bucketAlbums,l=t.fetchMore,a=t.nextToken,s=(null===r||void 0===r?void 0:r.items)||[],d=[null].concat((0,n.Z)(s));return(0,p.jsxs)(i.sH,{children:[(0,p.jsx)(b,{}),(0,p.jsx)(te,{items:d,fetchMore:l,hasMore:!!a})]})}},50102:function(e,t,r){r.d(t,{Z:function(){return p}});var n=r(29439),o=r(61689),i=r(24193),l=r(16783),a=r(47313),s=r(58467),d=r(65079),c=r(80526),u=r(71675),h=r(46417);function p(e){var t=e.parentAlbumId,r=e.onClose,p=(0,u.Z)(),b=p.restrictions,m=p.tooltipTitle,f=(0,c.Z)(),x=f.disabled,v=f.mutation,g=f.results,j=(0,a.useState)(),C=(0,n.Z)(j,2),w=C[0],Z=C[1],y=(0,a.useState)(),k=(0,n.Z)(y,2),I=k[0],S=k[1],U=(0,s.UO)().bucketId,A=b.modifyAlbums,M=!1===A&&!1===x,F=x?"Your viewer role for this bucket does not allow you to create albums.":m("modifyAlbums"),L=function(e){(null===e||void 0===e||e.preventDefault(),U&&w)&&(v({variables:{bucketId:U,data:{title:w,parentId:t}}}),r())};return(0,h.jsxs)("form",{onSubmit:L,children:[(0,h.jsx)(d.Z,{error:g.error}),(0,h.jsx)(o.Z,{PopperProps:{disablePortal:M},disableFocusListener:M,disableHoverListener:M,disableTouchListener:M,title:m,children:(0,h.jsx)(l.Z,{autoFocus:!0,inputProps:{"data-test":"create-album-title"},error:!!I,disabled:A,fullWidth:!0,label:"Album Name",margin:"normal",name:"title",placeholder:"Album Title",required:!0,onChange:value:null!==w&&void 0!==w?w:""})}),(0,h.jsx)(o.Z,{PopperProps:{disablePortal:M},disableFocusListener:M,disableHoverListener:M,disableTouchListener:M,title:F,children:(0,h.jsx)(i.Z,{color:"primary",disabled:x,variant:"contained",onClick:L,type:"submit","data-test":"submit-create-album",children:"Create Album"})}),(0,h.jsx)(i.Z,{onClick:r,children:"Cancel"})]})}},33317:function(e,t,r){var n=r(47131),o=r(17592);t.Z=(0,o.ZP)(n.Z,{shouldForwardProp:)((function(e){var t=e.isActive;return{position:"absolute",color:e.theme.palette.primary.contrastText,backgroundColor:"rgba(71,85,105,0.5)",padding:"2px",display:t?"inline-flex":"none","&:hover":{display:"inline-flex"}}}))},62606:function(e,t,r){r.d(t,{Z:);var n=r(36241);function o(e){var t,r,o,i,l,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(null!==e&&void 0!==e&&e.imageUrl){var s=null!==(t=e.width)&&void 0!==t?t:1/0,d={width:null!==(r=null===(o=e.width)||void 0===o?void 0:o.toString())&&void 0!==r?r:"590",height:null!==(i=null===(l=e.height)||void 0===l?void 0:l.toString())&&void 0!==i?i:"590",fit:"bounds"};if(a<=590&&s>=590&&(d.width="590",d.height="590"),a<=320&&s>=320&&(d.width="320",d.height="320"),!n.isMobile&&a>320&&s>=320){var c={width:"320",height:"320",fit:"bounds"},u=new URLSearchParams(c).toString(),h=new Image;h.src="".concat(e.imageUrl,"?").concat(u)}var p=new URLSearchParams(d).toString();return"".concat(e.imageUrl,"?").concat(p)}}}}]);