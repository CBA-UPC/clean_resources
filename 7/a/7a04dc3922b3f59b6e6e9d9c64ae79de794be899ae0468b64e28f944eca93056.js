window.configFile = "https://van.najva.com/static/js/scripts/technolife-website-9288-527e38cb-dd64-4535-bb15-41c45a09d8d8.json";

// version: 1.13.6-refresh-fb-token
(()=>{var e={5752:4594:1313:449:3645:1923:6808:1296:3379:655:,t={};.n=n.d=n.g=),n.o=n.r=(()=>{"use strict";function e(e,t){return fetch(e,t).then(()}function t(e,t){return fetch(e,t).then(()}ar i,o,a;!function(e){e.TEST="test",e.STAGING="staging",e.PRODUCTION="production"}(i||(i={})),a||(a={}));var s="\nOriginal Error -> {$error}",c=((o={})[a.UNSUPPORTED_BROWSER]="This browser doesn't support the API's required to use the firebase and najva SDK."+s,o[a.INCOGNITO_BROWSER]="najva sdk will not run in brower incognito mode."+s,o[a.MISSING_APP_CONFIG_VALUES]="Missing App configuration value: {$valueName}.",o[a.CONFIGURATION_FAILED]="failed to get configuration file from {$url}."+s,o[a.SW_REGISTRATION_FAILED]="We are unable to register the default service worker. {$browserErrorMessage}."+s,o[a.SW_UNREGISTRATION_FAILED]="We are unable to unregister the najva-messaging service worker."+s,o[a.FIREBASE_INITIALIZATION_FAILED]="failed to initialize firebase app. {$firebaseErrorMessage}."+s,o[a.FIREBASE_REGISTRAION_FAILED]="failed to get registration token from firebase. {$firebaseErrorMessage}."+s,o[a.FIREBASE_TOKEN_UPDATE_FAILED]="failed to update firebase token. {$firebaseErrorMessage}.",o[a.FIREBASE_DELETE_TOKEN_FAILED]="failed to delete firebase token. {$firebaseErrorMessage}."+s,o[a.NAJVA_SUBSCRIPTION_FAILED]="failed to subscribe firebase token {$firebaseToken} to najva."+s,o[a.COOKIE_TOKEN_UPDATE_FAILED]="failed to update cookie_token for najva user {$najva_token}."+s,o[a.ADD_ATTRIBUTE_FAILED]="failed to add attribute {$object}."+s,o[a.DELETE_ATTRIBUTE_FAILED]="failed to delete attribute {$key}."+s,o[a.GET_ATTRIBUTES_FAILED]="failed to get attributes."+s,o[a.INVALID_KEY_FOR_IDB]="faild to update indexed db. the {$key} is not a valid key for object store {$objStoreName}."+s,o[a.DB_UPDATE_FAILED]="failed to update {$key} with {$value} for {$objectStoreName}. {$browserErrorMessage}."+s,o[a.DB_DELETE_FAILED]="failed to update {$key} with {$value} for {$objectStoreName}. {$browserErrorMessage}."+s,o[a.DB_READ_FAILED]="failed to read {$key} from {$objectStoreName}. {$browserErrorMessage}."+s,o[a.DB_OBJ_STORE_CLEAR_FAILED]="failed to clear {$objectStoreName}. {$browserErrorMessage}."+s,o[a.SEND_LOCATION_FAILED]="failed to send location to the server: {$errorStatus}.",o[a.UPDATE_USER_ACTIVITY_FAILED]="failed to update user activity {$browserErrorMessage}."+s,o[a.REPORT_SCRIPT_VERSION_FAILED]="failed to report version {$version} to {$url}. {$browserErrorMessage}."+s,o[a.LOAD_YEKTANET_ANALYTICS_SCRIPT_FAILED]="failed to load tag script with app_id: {$appId}."+s,o[a.INIT_EMAIL_FAILED]="failed to init email."+s,o[a.ADD_EMAIL_SUBSCRIBER_IDENTIFIER_FAILED]="failed to add email subscriber identifier."+s,o[a.IDENTIFY_EMAIL_SUBSCRIBER_FAILED]="failed to identify email subscriber."+s,o[a.SUBSCRIBE_TO_EMAIL_FAILED]="failed to subscribe to email."+s,o[a.CREATE_HTML_FAILED]="failed to create html element with string: {$value}.",o[a.SELECT_ELEMENT_FAILED]="failed to select element with selector: {$value}.",o[a.HEX_TO_RGB_FAILED]="failed to convert hex color to rgb format with value: {$value}.",o),u=/\{\$([^}]+)}/g;function l(e,t){var n=t||{},r=c[e],i=r?r,n):"Error";return new Error(i)}var f,d,p={"۰":"0","٠":"0","۱":"1","١":"1","۲":"2","٢":"2","۳":"3","٣":"3","۴":"4","٤":"4","۵":"5","٥":"5","۶":"6","٦":"6","۷":"7","٧":"7","۸":"8","٨":"8","۹":"9","٩":"9"};function h(e){try{return e.toString().replace(/[\u0660-\u06ion(e){return p[e]}))}catch(t){return e}}!function(e){e.email="email",e.phone="phone",e.required="required"}(f||(f={}));var b=((d={})[f.email]={fa:"ایمیل نامعتبر است.",en:"Email is not valid"},d[f.phone]={fa:"شماره موبایل نامعتبر است.",en:"Phone is not valid"},d[f.required]={fa:"این فیلد الزامی است.",en:"This field is required"},d);var v,w={messaging_sender_id:"334645784830",najva_settings:{campaign_id:"",app_id:"",account_id:"",without_popup:!0,with_popup:!1,api_key:"fd4f22c3-0f92-43ee-b7ed-8b905eb9c7ba",najva_subdomain:"https://app.najva.com/",website_id:18846,location_permission:!0,request_text:"آیا میخواهید پربازدیدترین موضوعات برای شما ارسال شود؟",request_description:"",accept_text:"بله",denied_text:"خیر",request_icon:"https://www.najva.com/wp-content/uploads/2017/07/Najva-Logo-OK-04.png",extra_css:"",dismiss_cookie_days:3,request_permission:{delay:{enable:0,value:20},scroll:{enable:1,value:50},visit:{minimum:{enable:0,value:1},maximum:{enable:0,value:3},interval:{enable:0,value:3}}},show_bell:1,show_bell_in_mobile:1,bell_direction:"right",tooltip_direction:"left",bell_color_hover:"#7a7a7a",bell_color:"#444444",bell_tooltip:"مشترک شوید",show_backdrop:!1,show_backdrop_mobile:!1,native_permission:!0,backdrop_text:"«برای دریافت مطالب مشابه روی گزینه Allow کلیک کنید.»"},custom_links:[],website_policy:{notification_queue:1,notification_countdown:10,notification_blocked:!1,notification_button_enabled:!1,use_najva_firebase_account:!0,recommender_permission:!1,tag_enabled:!1,email_enabled:!0},sw_path:"/",email_settings:{id:79328,uuid:"4ad01101-a47a-4ca5-8ea9-8aaac023d098",show_condition:{delay:{enable:1,value:2},scroll:{enable:0,value:10},visit:{minimum:{enable:0,value:1},maximum:{enable:0,value:1},interval:{enable:0,value:4}}},title:"🎁ایمیل خود را وارد کنید و یک کد تخفیف خرید هدیه بگیرید🎁",background_color:"2d292e",button_color:"ccd1d9",send_btn_text:"عضویت",success_message:"ارسال با موفقیت انجام شد.",affeer_reported_version",e.LastCookieMatchingSent="last_cookie_matching_sent",e.HasMigrated="has_migrated",e. Weanew )or",oB.open(e,t),s=N(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(N(a.result),e.oldVersion,et!cludes(n))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let a=o.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&o.done]))[0]};return C.set(t,o),o}I=(e=>({...e,get:(t,n,r)=>j(t,n)||e.get(t,n,r),has:(t,n)=>!!j(t,n)||e.has(t,n)}))(I);var M,R="token";!function(e){e.Firebase="fb_token",e.Cookie="cookie_token",e.Najva="najva_token"}(M||(M={}));var B=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},U=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function F(e,t,n){return B(this,void 0,void 0,(function(){var r,i,o;return U(this,(function(s){switch(s.label){case 0:return s.trys.push([0,8,,9]),[4,Ie()];case 1:return r=s.sent(),[4,(i=r.transaction(R,"readwrite")).store.get(e)];case 2:return s.sent()?[4,i.store.put({name:e,value:t,timestamp:n})]:[3,4];case 3:return s.sent(),[3,6];case 4:return[4,i.store.add({name:e,value:t,timestamp:n})];case 5:s.sent(),s.label=6;case 6:return[4,i.done];case 7:return s.sent(),[3,9];case 8:throw o=s.sent(),l(a.DB_UPDATE_FAILED,{key:e,value:t,objectStoreName:R,browserErrorMessage:o.message,error:o});case 9:return[2]}}))}))}function W(e){return B(this,void 0,void 0,(function(){var t,n,r,i;return U(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),[4,Ie()];case 1:return t=o.sent(),[4,(n=t.transaction(R,"readonly")).store.get(e)];case 2:return r=o.sent(),[4,n.done];case 3:return o.sent(),r?[2,{value:r.value.toString(),timestamp:r.timestamp.toString()}]:[2,{value:"",timestamp:""}];case 4:throw i=o.sent(),l(a.DB_READ_FAILED,{key:e,objectStoreName:R,browserErrorMessage:i.message,error:i});case 5:return[2]}}))}))}var K,G="website";!function(e){e.WebsiteId="website_id",e.SenderId="messagind_sender_id"}(K||(K={}));var z=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},V=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function H(e){return z(this,void 0,void 0,(function(){var t,n,r,i;return V(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),[4,Ie()];case 1:return t=o.sent(),[4,(n=t.transaction(G,"readwrite")).store.get(e)];case 2:return r=o.sent(),[4,n.done];case 3:return o.sent(),r?[2,r.value]:[2,""];case 4:throw i=o.sent(),l(a.DB_READ_FAILED,{key:e,objectStoreName:G,browserErrorMessage:i.message,error:i});case 5:return[2]}}))}))}function q(e,t){return z(this,void 0,void 0,(function(){var n,r,i;return V(this,(function(o){switch(o.label){case 0:return o.trys.push([0,8,,9]),[4,Ie()];case 1:return n=o.sent(),[4,(r=n.transaction(G,"readwrite")).store.get(e)];case 2:return o.sent()?[4,r.store.put({name:e,value:t})]:[3,4];case 3:return o.sentre.add({nam;case 8:throw i=o.sent(),l(a.DB_UPDATE_FAILED,{key:e,value:t,objectStoreName:G,browserErrorMessage:i.message,error:i});case 9:return[2]}}))}))}var Y,$,X="opt-in";!function(e){e.Popup="pop_up"}(Y||(Y={})),function(e){e.ShownCount="shown_count",e.LastShownTime="last_shown_count",e.Reject="reject"}($||($={}));var J=function(){return(J=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Z=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Q=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function ee(e){return Z(this,void 0,void 0,(function(){var t,n,r,i;return Q(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),[4,Ie()];case 1:return t=o.sent(),[4,(n=t.transaction(X,"readwrite")).store.get(Y.Popup)];case 2:return r=o.sent(),[4,n.done];case 3:return o.sent(),r&&r[e]?[2,r[e]]:[2,""];case 4:throw i=o.sent(),l(a.DB_READ_FAILED,{key:Y+"."+e,objectStoreName:X,browserErrorMessage:i.message,error:i});case 5:return[2]}}))}))}function te(e,t){return Z(this,void 0,void 0,(function(){var n,r,i,o,s,c;return Q(this,(function(u){switch(u.label){case 0:return u.trys.push([0,8,,9]),[4,Ie()];case 1:return n=u.sent(),[4,(r=n.transaction(X,"readwrite")).store.get(Y.Popup)];case 2:return(i=u.sent())?[4,r.store.put(J(J({},i),(s={},s[e]=t,s)))]:[3,4];case 3:return u.sent(),[3,6];case 4:return[4,r.store.add((c={name:Y.Popup},c[e]=t,c))];case 5:u.sent(),u.label=6;case 6:return[4,r.done];case 7:return u.sent(),[3,9];case 8:throw o=u.sent(),l(a.DB_UPDATE_FAILED,{key:Y+"."+e,objectStoreName:X,value:t,browserErrorMessage:o.message,error:o});case 9:return[2]}}))}))}var ne="attribute",re=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ie=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function oe(e,t,n){return re(this,void 0,void 0,(function(){var r,i,o;return ie(this,(function(s){switch(s.label){case 0:return s.trys.push([0,8,,9]),[4,Ie()];case 1:return r=s.sent(),[4,(i=r.transaction(ne,"readwrite")).store.get(e)];case 2:return s.sent()?[4,i.store.put({key:e,value:t,timestamp:n})]:[3,4];case 3:return s.sent(),[3,6];case 4:return[4,i.store.add({key:e,value:t,timestamp:n})];case 5:s.sent(),s.label=6;case 6:return[4,i.done];case 7:return s.sent(),[3,9];case 8:throw o=s.sent(),l(a.DB_UPDATE_FAILED,{key:e,value:t,objectStoreName:ne,browserErrorMessage:o.message,error:o});case 9:return[2]}}))}))}function ae(e){return re(this,void 0,void 0,(function(){var t,n,r;return ie(this,(function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,Ie()];case 1:return t=i.sent(),[4,(n=t.transaction(ne,"readwrite")).store.delete(e)];case 2:return i.sent(),[4,n.done];case 3:return i.sent(),[3,5];case 4:throw r=i.sent(),l(a.DB_READ_FAILED,{key:e,objectStoreName:ne,browserErrorMessage:r.message,error:r});case 5:return[2]}}))}))}function se(){return re(this,void 0,void 0,(function(){var e,t;return ie(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,Ie()];case 1:return e=n.sent(),[4,e.transaction(ne,"readwrite").objectStore(ne).clear()];case 2:return n.sent(),[3,4];case 3:throw t=n.sent(),l(a.DB_OBJ_STORE_CLEAR_FAILED,{browserErrorMessage:t.message,objectStoreName:ne,error:t});case 4:return[2]}}))}))}function ce(){function(){var e,t,n,r,i;return ie(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),[4,Ie()];case 1:return e=o.sent(),[4,(t=e.transaction(ne,"readwrite")).store.getAll()];case 2:return n=o.sent(),[4,t.done];case 3:return o.sent(),r={},n.forEach((function(e){r[e.key]=e.value})),[2,r];case 4:throw i=rn[2]}}))}))}var ue=n(6808),le=n.n(ue);function fe(e){var t=e.split("."),n=t[t.length-1],r=t[t.length-2];return r&&r.length>2?"."+r+"."+n:t&&t.length>2?"."+t[t.length-3]+"."+r+"."+n:e}function de(e){return le().get(e)}function pe(e){le().remove(e,{domain:fe(window.location.hostname),path:"/"})}var he=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},be=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function ve(){return he(this,void 0,void 0,(function(){return be(this,(function(e){return[2,Promise.all([q(K.WebsiteId,""),F(M.Cookie,"",(new Date).toISOString()),te($.LastShownTime,""),te($.ShownCount,""),se(),Pe()])]}))}))}function we(e,t){return he(this,void 0,void 0,(function(){var n,r,i;return be(this,(function(o){switch(o.label){case 0:return(n=de("najva_last_active_time:"+t)||de("najva_last_active_time-"+e))?[4,Ae(v.LastActiveTime,n)]:[3,2];case 1:o.sent(),pe("najva_last_active_time:"+t),pe("najva_last_active_time-"+e),o.label=2;case 2:return(r=de("pushNotification:shownCount:"+t)||de("pushNotification-shownCount-"+e))?[4,Ae(v.VisitCount,r)]:[3,4];case 3:o.sent(),pe("pushNotification:shownCount:"+t),pe("pushNotification-shownCount-"+e),o.label=4;case 4:return[4,De(v.LastCookieMatchingSent)];case 5:return o.sent()?[3,7]:(i=Math.floor(30*Math.random()),[4,Ae(v.LastCookieMatchingSent,new Date(Date.now()-24*i*60*60*1e3).toISOString())]);case 6:o.sent(),o.label=7;case 7:return pe("cookie_matching"),[2]}}))}))}function _e(e){return he(this,void 0,void 0,(function(){var t,n=this;return be(this,(function(r){return t=function(e){var t=Object.keys(localStorage),n=e+"-tag-",r=t.filter((function(e){return e.startsWith(n)})),i={};return r.forEach((function(e){var t,r=e.substr(n.length);i[d 0===t?void 0:t.toString()})),i}(e),Object.keys(t).forEach((function(r){return he(n,void 0,void 0,(function(){return be(this,(function(n){switch(n.label){case 0:return[4,oe(r,t[r],(new Date).toISOString())];case 1:return n.sent(),localStorage.removeItem(function(e,t){return e&&t?e+"-tag-"+t:""}(e,r)),[2]}}))}))})),[2]}))}))}function me(e,t){return he(this,void 0,void 0,(function(){var n;return be(this,(function(r){switch(r.label){case 0:return(n=de("pushNotification:notWantPopUp:"+t)||de("pushNotification-notWantPopUp-"+e))?[4,te($.Reject,n)]:[3,2];case 1:r.sent(),pe("pushNotification:notWantPopUp:"+t),pe("pushNotification-notWantPopUp-"+e),r.label=2;case 2:return[2]}}))}))}function ye(e,t){return he(this,void 0,void 0,(function(){var n,r,i;return be(this,(function(o){switch(o.label){case 0:return(n=de("token_id:"+t)||de("token_id-"+e))?[4,F(M.Firebase,n,(new Date).toISOString())]:[3,2];case 1:o.sent(),pe("token_id:"+t),pe("token_id-"+e),o.label=2;case 2:return(r=localStorage.getItem("_njt")||de("najva_token"))?[4,F(M.Najva,r,(new Date).toISOString())]:[3,4];case 3:o.sent(),pe("najva_token"),localStorage.removeItem("_njt"),o.label=4;case 4:return(i=de("cookie_token:"+t)||de("cookie_token-"+e))?[4,F(M.Cookie,i,(new Date).toISOString())]:[3,6];case 5:o.sent(),pe("cookie_token:"+t),pe("cookie_token-"+e),o.label=6;case 6:return[2]}}))}))}function ge(e,t){return he(this,void 0,void 0,(function(){var n;return be(this,(function(r){switch(r.label){case 0:return[4,Ae(v.HasMigrated,"true")];case 1:return r.sent(),[4,H(K.WebsiteId)];case 2:return n=r.sent(),e==n?[3,4]:[4,ve()];case 3:r.sent(),r.label=4;case 4:return[4,Promise.all([q(K.WebsiteId,e),ye(e,t),me(e,t),_e(e),we(e,t)])];case 5:return r.sent(),[2]}}))}))}var Ee,Se,ke=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Te=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function Ie(){return ke(this,void 0,void 0,(function(){return Te(this,(function(e){switch(e.label){case 0:return Ee?[3,2]:[4,A("najva-native-subscription-database",5,{upgrade:function(e,t){return ke(this,void 0,void 0,(function(){return Te(this,(function(n){return t>0&&t<5&&(e.deleteObjectStore(R),e.deleteObjectStore(G),e.deleteObjectStore(X),e.deleteObjectStore(ne),e.deleteObjectStore(_)),e.createObjectStore(R,{keyPath:"name"}),e.createObjectStore(G,{keyPath:"name"}),e.createObjectStore(X,{keyPath:"name"}),e.createObjectStore(ne,{keyPath:"key"}),e.createObjectStore(_,{keyPath:"name"}),[2]}))}))}})];case 1:Ee=e.sent(),e.label=2;case 2:return[2,Ee]}}))}))}function xe(e){return ke(this,void 0,void 0,(function(){var t;return Te(this,(function(n){switch(n.label){case 0:return Se=e,[4,Ie()];case 1:return n.sent(),[4,De(v.HasMigrated)];case 2:return"string"!=typeof(t=n.sent())||"true"===t?[3,4]:[4,ge(Se.website_id,Se.campaign_id)];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))}var Oe=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ne=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function De(e){return Oe(this,void 0,void 0,(function(){var t,n,r,i;return Ne(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),[4,Ie()];case 1:return t=o.sent(),[4,(n=t.transaction(_,"readwrite")).store.get(e)];case 2:return r=o.sent(),[4,n.done];case 3:return o.sent(),r?[2,r.value]:[2,""];case 4:throw i=o.sent(),l(a.DB_READ_FAILED,{key:e,objectStoreName:_,browserErrorMessage:i.message,error:i});case 5:return[2]}}))}))}function Ae(e,t){return Oe(this,void 0,void 0,(function(){var n,r,i;return Ne(this,(function(o){switch(o.label){case 0:return o.trys.push([0,8,,9]),[4,Ie()];case 1:return n=o.sent(),[4,(r=n.transaction(_,"readwrite")).store.get(e)];case 2:return o.sent()?[4,r.store.put({name:e,value:t})]:[3,4];case 3:return o.sent(),[3,6];case 4:return[4,r.store.add({name:e,value:t})];case 5:o.sent(),o.label=6;case 6:return[4,r.done];case 7:return o.sent(),[3,9];case 8:throw i=o.sent(),l(a.DB_UPDATE_FAILED,{key:e,value:t,objectStoreName:_,browserErrorMessage:i.message,error:i});case 9:return[2]}}))}))}function Pe(){return Oe(this,void 0,void 0,(function(){var e,t;return Ne(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,Ie()];case 1:return e=n.sent(),[4,e.transaction(_,"readwrite").objectStore(_).clear()];case 2:return n.sent(),[3,4];case 3:throw t=n.sent(),l(a.DB_OBJ_STORE_CLEAR_FAILED,{browserErrorMessage:t.message,objectStoreName:_,error:t});case 4:return[2]}}))}))}var Le=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ce=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},je=null;function Me(){return Le(this,void 0,void 0,(function(){var t,n,o;return Ce(this,(function(s){switch(s.label){case 0:if("production"===i.TEST)return[2,w];if(t=window.configFile+"?v="+r(),je)return[2,je];s.label=1;case 1:return s.trys.push([1,5,,6]),[4,e(t,{method:"GET",credentials:"omit"})];case 2:return function(e){var t=e.messaging_sender_id,n=e.najva_settings,r="";if(t||(r="messaging_sender_id"),n?n.api_key?n.website_id||(r="najva_settings.website_id"):r="najva_settings.api_key":r="najva_settings",r)throw l(a.MISSING_APP_CONFIG_VALUES,{valueName:r})}(n=s.sent()),[4,q(K.WebsiteId,n.najva_settings.website_id.toString())];case 3:return s.sent(),[4,q(K.SenderId,n.messaging_sender_id)];case 4:return s.sent(),[2,n];case 5:throw o=s.sent(),l(a.CONFIGURATION_FAILED,{url:window.configFile,error:o});case 6:return[2]}}))}))}function Re(){return Le(this,void 0,void 0,(function(){return Ce(this,(function(e){switch(e.label){case 0:return[4,Me()];case 1:return[2,je=e.sent()]}}))}))}var Be,Ue,Fe,We=n(1923),Ke=n.n(We),Ge=n(5752),ze=n(655),Ve=n(1313),He=((Be={})["only-available-in-window"]="This method is available in a Window context.",Be["only-available-in-sw"]="This method is available in a service worker context.",Be["should-be-overriden"]="This method should be overriden by extended classes.",Be["bad-sender-id"]="Please ensure that 'messagingSenderId' is set correctly in the options passed into firebase.initializeApp().",Be["permission-default"]="The required permissions were not granted and dismissed instead.",Be["permission-blocked"]="The required permissions were not granted and blocked instead.",Be["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",Be["notifications-blocked"]="Notifications have been blocked.",Be["failed-serviceworker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",Be["sw-registration-expected"]="A service worker registration was the expected input.",Be["get-subscription-failed"]="There was an error when trying to get any existing Push Subscriptions.",Be["invalid-saved-token"]="Unable to access details of the saved token.",Be["sw-reg-redundant"]="The service worker being used for push was made redundant.",Be["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",Be["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",Be["token-subscribe-no-push-set"]="FCM returned an invalid response when getting an FCM token.",Be["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",Be["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",Be["token-update-no-token"]="FCM returned no token when updating the user to push.",Be["use-sw-before-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",Be["invalid-delete-token"]="You must pass a valid token into deleteToken(), i.e. the token from getToken().",Be["delete-token-not-found"]="The deletion attempt for token could not be performed as the token was not found.",Be["delete-scope-not-found"]="The deletion attempt for service worker scope could not be performed as the scope was not found.",Be["bg-handler-function-expected"]="The input to setBackgroundMessageHandler() must be a function.",Be["no-window-client-to-msg"]="An attempt was made to message a non-existant window client.",Be["unable-to-resubscribe"]="There was an error while re-subscribing the FCM token for push messaging. Will have to resubscribe the user on next visit. {$errorInfo}",Be["no-fcm-token-for-resubscribe"]="Could not find an FCM token and as a result, unable to resubscribe. Will have to resubscribe the user on next visit.",Be["failed-to-delete-token"]="Unable to delete the currently saved token.",Be["no-sw-in-reg"]="Even though the service worker registration was successful, there was a problem accessing the service worker itself.",Be["bad-scope"]="The service worker scope must be a string with at least one character.",Be["bad-vapid-key"]="The public VAPID key is not a Uint8Array with 65 bytes.",Be["bad-subscription"]="The subscription must be a valid PushSubscription.",Be["bad-token"]="The FCM Token used for storage / lookup was not a valid token string.",Be["bad-push-set"]="The FCM push set used for storage / lookup was not not a valid push set string.",Be["failed-delete-vapid-key"]="The VAPID key could not be deleted.",Be["invalid-public-vapid-key"]="The public VAPID key must be a string.",Be["use-public-key-before-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",Be["public-vapid-key-decryption-failed"]="The public VAPID key did not equal 65 bytes when decrypted.",Be),qe=new Ve.ErrorFactory("messaging","Messaging",He),Ye=new Uint8Array([4,51,148,247,223,161,235,177,220,3,162,94,21,113,219,72,211,46,237,237,178,52,219,183,71,58,12,143,196,204,225,111,60,140,132,223,171,182,102,62,242,12,212,139,254,227,249,118,47,20,28,99,8,106,111,45,177,26,149,176,206,55,192,156,110]),$e="https://fcm.googleapis.com";
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applic language governing permissions and
 * limitations under the License.
 */
function Xe(e,t){if(null==e||null==t)return!1;if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(var n=new DataView(e),r=new DataView(t),i=0;i<e.byteLength;i++)if(n.getUint8(i)!==r.getUint8(i))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by appliied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(e){return function(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,(0,ze.__spread)(t)))}(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BA for the specific la[4,fetch($e+"/fcm/connect/unsubscribe",o)];case 2:return[4,u.sent().json()];case 3:if((a=u.sent()).error)throw s=a.error.message,qe.create("token-unsubscribe-failed",{errorInfo:s});return[3,5];case 4:throw c=u.sent(),qe.create("token-unsubscribe-failed",{errorInfo:c});case 5:return[2]}}))}))},e}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by appliplied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * toreNames.contains(tt)){var t=e.transaction(tt).objectStore(tt),n=new Ze,r=t.openCursor();r.onerror=function(e){},r.onsuccess=function(){var t=r.result;if(t){var i=t.value;n.deleteToken(i.fcmSenderId,i.fcmToken,i.fcmPushSet),t.continue()}else e.close(),indexedDB.deleteDatabase(et)}}}(e.result)}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable lfursion);r.onsuccess=function(){t(r.result)},r.onerror=function(){e.dbPromise=null,n(r.error)},r.onupgradeneeded=function(t){return e.onDbUpgrade(r,t)}}))),this.dbPromise},e}();function it(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable ln(n).p256dh&&!(e.p256dh instanceof ArrayBuffer))throw qe.create("bad-subscription");if(e.fcmSenderId&&("string"!=typeof e.fcmSenderId||0===e.fcmSenderId.length))throw qe.create("bad-sender-id");if(e.fcmPushSet&&("string"!=typeof e.fcmPushSet||0===e.fcmPushSet.length))throw qe.create("bad-push-set")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable l){retur}))},e.pr,t;rle law or astenushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabledotype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}dt=Ge.default,pt={isSupported:bt},dt.INTERNAL.registerService("messaging",(function(e){if(!bt())throw qe.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new ut(e):new ht(e)}),pt);var vt,wt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},_t=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},mt={messaging_sender_id:"",isNativeMode:!1};function yt(){return wt(this,void 0,void 0,(function(){var e,t,n;return _t(this,(function(r){switch(r.label){case 0:e=Ke().messaging(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,e.getToken()];case 2:if(!(t=r.sent()))throw l(a.FIREBASE_TOKEN_UPDATE_FAILED,{firebaseErrorMessage:"empty firebase token"});return[2,t];case 3:throw n=r.sent(),l(a.FIREBASE_REGISTRAION_FAILED,{firebaseErrorMessage:n.message,error:n});case 4:return[2]}}))}))}function gt(){return wt(this,void 0,void 0,(function(){var e;return _t(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,yt()];case 1:return e=t.sent(),[4,Ke().messaging().deleteToken(e)];case 2:return t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2]}}))}))}var Et="najva-reset",St="najva-hidden",kt="najva-float-left",Tt="najva-float-right",It="najva-clearfix",xt="2147483645",Ot="najva-style-container",Nt={extra_css:""};function Dt(e){e&&"string"==typeof e&&function(){var e=document.getElementById(Ot);return e||((e=document.createElement("style")).setAttribute("id",Ot),document.getElementsByTagName("head")[0].appendChild(e),e)}().appendChild(document.createTextNode(e))}function At(e){var t;t="\n  ."+Et+': {\n            background-attachment: scroll;\n            background-color: transparent;\n            background-image: none;\n            background-position: 0 0;\n            background-repeat: repeat;\n            border-color: #000;\n            border: medium none currentColor;\n            bottom: auto;\n            clear: none;\n            clip: auto;\n            color: inherit;\n            counter-increment: none;\n            counter-reset: none;\n            cursor: auto;\n            direction: inherit;\n            display: inline;\n            float: none;\n            font-family: inherit;\n            font-size: inherit;\n            font-style: inherit;\n            font-variant: normal;\n            font-weight: inherit;\n            height: auto;\n            left: auto;\n            letter-spacing: normal;\n            line-height: inherit;\n            list-style-type: inherit;\n            list-style-position: outside;\n            list-style-image: none;\n            margin: 0;\n            max-height: none;\n            max-width: none;\n            min-height: 0;\n            min-width: 0;\n            opacity: 1;\n            outline: medium none invert;\n            overflow: visible;\n            padding: 0;\n            position: static;\n            quotes: "" "";\n            right: auto;\n            table-layout: auto;\n            text-align: inherit;\n            text-decoration: inherit;\n            text-indent: 0;\n            text-transform: none;\n            top: auto;\n            unicode-bidi: normal;\n            vertical-align: baseline;\n            visibility: inherit;\n            white-space: normal;\n            width: auto;\n            word-spacing: normal;\n            z-index: auto;\n            background-origin: padding-box;\n            background-clip: border-box;\n            background-size: auto;\n            -o-border-image: none;\n            border-image: none;\n            border-radius: 0;\n            box-shadow: none;\n            box-sizing: content-box;\n            column-count: auto;\n            column-gap: normal;\n            column-rule: medium none #000;\n            column-span: 1;\n            column-width: auto;\n            -webkit-font-feature-settings: normal;\n            font-feature-settings: normal;\n            overflow-x: visible;\n            overflow-y: visible;\n            -webkit-hyphens: manual;\n            -ms-hyphens: manual;\n            hyphens: manual;\n            -ms-perspective: none;\n            -o-perspective: none;\n            perspective: none;\n            -ms-perspective-origin: 50% 50%;\n            -o-perspective-origin: 50% 50%;\n            perspective-origin: 50% 50%;\n            -webkit-backface-visibility: visible;\n            backface-visibility: visible;\n            text-shadow: none;\n            transition: all 0s ease 0s;\n            transform: none;\n            transform-origin: 50% 50%;\n            transform-style: flat;\n            word-break: normal;\n        }\n        .'+St+" {\n            opacity: 0 !important;\n            visibility: hidden !important;\n        }\n        ."+kt+" {\n            float: left!important;\n        }\n        \n        ."+Tt+" {\n            float: right!important;\n        }\n        \n        ."+It+":after, ."+It+':before {\n            content: " "!important;\n            display: table!important;\n        }\n        \n        .'+It+":after {\n            clear: both!important;\n        }\n        \n        ."+It+" {\n            zoom: 1!important;\n            width: auto!important;\n        }\n                               \n    ",(Nt=e).extra_css&&(t+=Nt.extra_css),Dt(t)}var Pt=fe.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function Lt(e){var t=document.createElement("div");if(t.innerHTML=e.trim(),!t.firstElementChild)throfunction(){var e=[],t=!1,n=!1;function r(){var n,r;if(!t){!0;try{for(var i=Pt(e),o=i.next();!o.done;i.next()){o.value.call(window)}}catch(e){({error:e})}finally{try{o&&!o.done&&i.return&&r.call(i)}finally{if(n)throw n.error}}[]}}}();function Ct(e,t){var n=Math.abs(e-t);return Math.ceil(n/864e5)}var jt,Mt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Rt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Bt={website_id:"",najva_subdomain:"",api_key:""},Ut="najva-resubscribe";function Ft(e){return Mt(this,void 0,void 0,(function(){return Rt(this,(function(t){return Bt=e,function(){if(!document.querySelector("#"+Ut)){var e=Lt('<iframe id="'+Ut+'" style="display: none !important;" src="'+Bt.najva_subdomain+"resubscribe/?website="+Bt.website_id+"&api_key="+Bt.api_key+'"></iframe>');e&&document.body.appendChild(e)}}(ue")}()}!function(e){e.NOTIF_PROMPT_OPEN="najva_notification_prompt_open",e.NOTIF_PROMPT_CLOSE="najva_notification_prompt_close",e.NOTIF_ACCESS_GRANTED="najva_notification_access_granted",e.NOTIF_ACCESS_DENIED="najva_notification_access_denied",e.NOTIF_ACCESS_ASK="najva_notification_access_ask"}(jt||(jt={}));var Kt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Gt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},zt="granted",Vt="denied",Ht="prompt";function qt(){return Kt(this,void 0,void 0,(function(){return Gt(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,navigator.permissions.query({name:"notifications"})];case 1:return[2,e.sent()];case 2:return e.sent(),[2,null];case 3:return[2]}}))}))}function Yt(){return Kt(this,void 0,void 0,(function(){var e;return Gt(this,(function(t){switch(t.label){case 0:return[4,qt()];case 1:return(e=t.sent())?[2,e.state]:window.Notification?[2,Notification.permission]:[2,null]}}))}))}function $t(){return Kt(this,void 0,void 0,(function(){return Gt(this,(function(e){switch(e.label){case 0:return t=new Event(jt.NOTIF_PROMPT_OPEN),window.dispatchEvent(t),[4,Notification.requestPermission()];case 1:return e.sent(),function(){var e=new Event(jt.NOTIF_PROMPT_CLOSE);window.dispatchEvent(e)}(),[2]}var t}))}))}function Xt(){return Kt(this,void 0,void 0,(function(){var e,t=this;return Gt(this,(function(n){switch(n.label){case 0:return[4,qt()];case 1:return(e=n.sent())?(e.onchange=function(e){return Kt(t,void 0,void 0,(function(){var t;return Gt(t=zt?[3,1]:(function(){var e=new Event(jt.NOTIF_ACCESS_GRANTED);window.dispatchEvent(e)}(),[3,4]);case 1:return t!==Vt?[3,2]:(function(){var e=new Event(jt.NOTIF_ACCESS_DENIED);window.dispatchEvent(e)}(),[3,4]);case 2:return function(){var e=new Event(jt.NOTIF_ACCESS_ASK);window.dispatchEvent(e)}(),[4,$t()];case 3:n.sent(),n.label=4;case 4:return[2]}}))}))},[2]):[2]}}))}))}function Jt(){return Kt(this,void 0,void 0,(function(){return Gt(this,(function(e){switch(e.label){case 0:return[4,Yt()];case 1:return[2,e.sent()===zt]}}))}))}function Zt(){return Kt(this,void 0,void 0,(function(){return Gt(this,(function(e){switch(e.label){case 0:return[4,Yt()];case 1:return[2,e.sent()===Vt]}}))}))}function Qt(){return Kt(this,void 0,void 0,(function(){return Gt(this,(function(e){switch(e.label){case 0:return[4,Yt()];case 1:return[2,e.sent()===Ht]}}))}))}var en="https://report.najva.com";function tn(e){for(var t=e||0,n=[],r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<t;i++)n.push(r.charAt(Math.floor(Math.random()*r.length)));return n.join("")}var nn,rn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},on=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&unction(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function sn(e,t,n){var r,i,o=[],a=JSON.parse((null==e?void 0:e.buttons)||"[]");if(a&&a.length)try{for(var s=an(a),c=s.next();!c.done;c=s.next()){var u=c.value;[0,5,6].includes(Number(u.onclick_action))&&o.push({title:u.title,icon:u.icon_url,action:"BUTTON_CLICKED_"+u.button_id})}}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return{title:""+((null==e?void 0:e.title)||"title not provided"),options:{body:(null==e?void 0:e.body)||"body not provided",icon:(null==e?void 0:e.icon)+(n?"?n="+t:""),image:null==e?void 0:e.image,requireInteraction:!0,tag:(null==e?void 0:e.tag)||"",data:e,actions:o}}}function cn(e){return rn(this,void 0,void 0,(function(){var t;return on(this,(function(n){switch(n.label){case urn[3,4];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,W(M.Najva)];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return[2,e||(null==t?void 0:t.value)||tn(15)]}}))}))}function un(e){var t=0;return function n(r){r().catch((function(i){t<e&&(t+=1,setTimeout((function(){n(r)}),5e3)),nn(i)}))}}void 0===nn&&(nn=console.error);function ln(e,n){return rn(this,void 0,void 0,(function(){var r,i,o,a,s,c,u,l,f;return on(this,(function(d){switch(d.label){case 0:return r=n.websiteId,i=n.notificationId,o=n.notificationData,a=n.isReportEnabled,s=n.version,[4,cn(n.najvaTokenFromNotificationPayload)];case 1:return c=d.sent(),u=sn(o,c,a),l=u.title,f=u.options,a&&un(2)((function(){return function(e){var n=e.websiteId,r=e.notificationId,i=e.najvaToken,o=e.version;return t(en+"/deliver?website_id="+n+"&notif_id="+r+"&sub_id="+i+"&version="+o,{credentials:"include"})}({websiteId:r,notificationId:i,najvaToken:c,version:s})})),[2,e.showNotification(l,f).then((function(){a&&un(2)((function(){return function(e){var n=e.websiteId,r=e.notificationId,i=e.najvaToken,o=e.version;return t(en+"/show?website_id="+n+"&notif_id="+r+"&sub_id="+i+"&version="+o,{credentials:"include"})}({websiteId:r,notificationId:i,najvaToken:c,version:s})}))})).catch(nn)]}}))}))}var fn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},dn=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function pn(e,t){var n,r,i,o;return fn(this,void 0,void 0,(function(){return dn(this,(function(a){switch(a.label){case 0:return[4,ln(t,{websiteId:(null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.website_id)||"",notificationId:(null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.notification_id)||"",notificationData:(null==e?void 0:e.data)||{},isReportEnabled:"true"===(null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.is_report_enabled),version:"1.13.6-refresh-fb-token",najvaTokenFromNotificationPayload:null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.naisNativeMode:!1};function vn(e,t){bn=e,hn=t,Xt(),bn.isNativeMode&&function(e){var t=this;if(!document.hidden){var n=Ke().messaging();n&&n.onMessage((function(n){return fn(t,void 0,void 0,(function(){return dn(this,(function(t){switch(t.label){case 0:return[4,pn(n,e)];case 1:return t.sent(),[2]}}))}))}))}}(hn),function(e,t){var n=this;window.addEventListener("message",(function(r){return fn(n,void 0,void 0,(function(){var n,i;return dn(this,(function(o){switch(o.label){case 0:return r.data.api_key!==t||r.data.website_id!==e?[3,3]:(n=r.data.cookie_token,i=r.data.najva_token,n&&i?[4,F(M.Cookie,n,(new Date).toISOString())]:[3,3]);case 1:return o.sent(),[4,F(M.Najva,i,(new Date).toISOString())];case 2:o.sent(),r.data.subscribe&&window.najvaUserSubscribed&&window.najvaUserSubscribed(n),o.label=3;case 3:return[2]}}))}))}),!1)}(bn.website_id,bn.api_key)}const wn={STATIC_IMAGES:"https://app.najva.com/static/images",BASE:"https://api.najva.com"};var _n=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},mn=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function yn(e,t){return void 0===t&&(t=1),_n(this,void 0,void 0,(function(){return mn(this,(function(n){return[2,new Promise((function(n){var r=!1,i=function(){var t,o,a,s;r&&window.removeEventListener("scroll",i),t=document.documentElement,o=document.body,s="scrollHeight",(t[a="scrollTop"]||o[a])/((t[s]||o[s])-window.innerHeight)*100>e.scroll.value&&(r=!0,n(!0))};e.visit.maximum.enable||e.visit.minimum.enable||e.visit.interval.enable?(e.visit.minimum.enable||(e.visit.minimum.value=1),e.visit.maximum.enable||(e.visit.maximum.value=1e5),e.visit.interval.enable||(e.visit.interval.value=1),t>=e.visit.minimum.value&&t<=e.visit.maximum.value&&(t-e.visit.minimum.value)%e.visi0&&(e.delay.enable||e.scroll.enable?(e.scroll.enable&&window.addEventListener("scroll",i),e.delay.enable&&setTimeout((function(){n(!0)}),1e3*e.delay.value)):n(!0))):e.delay.enable||e.scroll.enable?(e.scroll.enable&&window.addEventListener("scroll",i),e.delay.enable&&setTimeout((function(){n(!0)}),1e3*e.delay.value)):n(!0)}))]}))}))}var gn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},En=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Sn={website_id:"",api_key:"",without_popup:!1,request_permission:{delay:{enable:0,value:0},scroll:{enable:0,value:0},visit:{minimum:{enable:0,value:0},maximum:{enable:0,value:0},interval:{enable:0,value:0}}}};function kn(t,n,r){return gn(this,void 0,void 0,(function(){var i,o,a,s,c,u,l,f;return En(this,(function(d){switch(d.label){case 0:return[4,W(M.Cookie)];case 1:return i=d.sent().value,[4,W(M.Najva)];case 2:return o=d.sent().value,a={token_id:t,website_id:n,api_key:r},o&&(a.najva_token=o),i&&(a.cookie_token=i),[4,e(wn.BASE+"/api/v1/add/",{method:"POST",body:new URLSearchParams(a),headers:{"Content-type":"application/x-www-form-urlencoded"},credentials:"include"})];case 3:return s=d.sent(),c=s.cookie_token,u=s.najva_token,l=s.status,f=s.detail,l&&"failure"!==l||"fail to subscribe"===f?[4,F(M.Firebase,t,(new Datew Date).toISOString())]:[3,6];case 5:d.sent(),window.najvaUserSubscribed&&window.najvaUserSubscribed(c),d.label=6;case 6:return u?[4,F(M.Najva,u,(new Date).toISOString())]:[3,8];case 7:d.sent(),d.label=8;case 8:return[2]}}))}))}function Tn(e){window.addEventListener("najva-subscription-end",e)}function In(e,t){return gn(this,void 0,void 0,(function(){var n,r,i,o;return En(this,(function(a){switch(a.label){case 0:return[4,W(M.Firebase)];case 1:return n=a.sent().value,[4,W(M.Najva)];case 2:return r=a.sent().value,[4,W(M.Cookie)];case 3:return i=a.sent().value,[4,yt()];case 4:return o=a.sent(),n===o&&r&&i?[3,6]:[4,kn(o,e,t)];case 5:a.sent(),s=new Event("najva-subscription-end"),window.dispatchEvent(s),a.label=6;case 6:return[2]}var s}))}))}function xn(){return gn(this,void 0,void 0,(function(){var e=this;return En(this,(function(t){return[2,new Promise((function(t){return gn(e,void 0,void 0,(function(){return En(this,(function(e){switch(e.label){case 0:return[4,Qt()];case 1:return e.sent()?[4,$t()]:[3,3];case 2:return e.sent(),t(),[3,7];case 3:return[4,Jt()];case 4:return e.sent()?[4,In(Sn.website_id,Sn.api_key)]:[3,6];case 5:return e.sent(),t(),[3,7];case 6:t(),e.label=7;case 7:return[2]}}))}))}))]}))}))}function On(e,t){return gn(this,void 0,void 0,(function(){var n,r;return En(this,(function(i){switch(i.label){case 0:return[4,W(M.Najva)];case 1:return n=i.sent().value,[4,De(v.LastFirebaseTokenRefreshed)];case 2:return r=i.sent(),n.startsWith("00")&&(!r||Ct((new Date).getTime(),new Date(r).getTime())>10)?[4,gt()]:[3,6e(v.LastFirebaseTokenRefreshed,(new Date).toISOString())];case 5:i.sent(),i.label=6;case 6:return[2]}}))}))}function Nn(e){return gn(this,void 0,void 0,(function(){var t,n=this;return En(this,(function(r){switch(r.label){case 0:Sn=e,function(e){window.addEventListener(jt.NOTIF_ACCESS_GRANTED,e)}((function(){return gn(n,void 0,void 0,(function(){return En(this,(function(e){switch(e.label){case 0:return[4,In(Sn.website_id,Sn.api_key)];case 1:return e.sent(),[2]}}))}))})),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,On(Sn.website_id,Sn.api_key)];case 2:return r.sent(),[3,4];case 3:return r.sent(),[3,4];case 4:return[4,Jt()];case 5:return r.sent()?[4,In(Sn.website_id,Sn.api_key)]:[3,7];case 6:return r.sent(),[3,11];case 7:return Sn.without_popup?[4,De(v.VisitCount)]:[3,11];case 8:return t=r.sent(),[4,yn(e.request_permission,t?Number(t):1)];case 9:return r.sent(),[4,xn()];case 10:r.sent(),r.label=11;case 11:return[2]}}))}))}var Dn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},An=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Pn={website_id:"",campaign_id:"",api_key:"",najva_subdomain:"",without_popup:!1,isNativeMode:!1,request_permission:{delay:{enable:0,value:0},scroll:{enable:0,value:0},visit:{minimum:{enable:0,value:0},maximum:{enable:0,value:0},interval:{enable:0,value:0}}}};function Ln(e){return Dn(this,void 0,void 0,(function(){return An(this,(function(t){switch(t.label){case 0:return(Pn=e).isNativeMode?[4,Nn({website_id:Pn.website_id,api_key:Pn.api_key,without_popup:Pn.without_popup,request_permission:Pn.request_permission})]:[3,2];case 1:return t.sent(),[3,4];case 2:return[4,Ft({website_id:Pn.website_id,api_key:Pn.api_key,najva_subdomain:Pn.najva_subdomain})];case 3:t.sent(),t.label=4;case 4:return[2]}}))}))}function Cn(){return Dn(this,void 0,void 0,(function(){return An(this,(function(e){switch(e.label){case 0:return Pn.isNativeMode?[4,xn()]:[3,2];case 1:return e.sent(),[3,3];case 2:Wt(),e.label=3;case 3:return[2]}}))}))}function jn(){return Dn(this,void 0,void 0,(function(){var e,t,n;return An(this,(function(r){switch(r.label){case 0:return[4,W(M.Firebase)];case 1:return e=r.sent(),[4,W(M.Cookie)];case 2:return t=r.sent(),[4,W(M.Najva)];case 3:return n=r.sent(),[2,Boolean(e&&t&&n)]}}))}))}var Mn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Rn=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Bn={najva_subdomain:""};function Un(){return Mn(this,void 0,void 0,(function(){var e;return Rn(this,(function(t){switch(t.label){case 0:return[4,De(v.LastCookieMatchingSent)];case 1:return(e=t.sent())?[2,Ct((new Date).getTime(),new Date(e).getTime())<30]:[2,!1]}}))}))}function Fn(e){return Mn(this,void 0,void 0,(function(){var t;return Rn(this,(function(n){switch(n.label){case 0:return document.querySelector("#najva-cmif")?[3,2]:((t=Lt('<iframe id="najva-cmif" style="display: none!important;" src="'+e+'cmif/"></iframe>'))&&document.body.appendChild(t),[4,Ae(v.LastCookieMatchingSent,(new Date).toISOString())]);case 1:n.sent(),n.label=2;case 2:return[2]}}))}))}var Wn=n(1296),Kn="najva_location_access_granted";var Gn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},zn=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.labll(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Vn="granted";function Hn(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){!function(e){var t=new CustomEvent(Kn,{detail:e});window.dispatchEvent(t)}(e)}),void 0,{enableHighAccuracy:!0,maximumAge:0})}function qn(){return Gn(this,void 0,void 0,(function(){var e;return zn(this,(function(t){switch(t.label){case 0:return"permissions"in navigator?[4,navigator.permissions.query({name:"geolocation"})]:[3,2];case 1:return"state"in(e=t.sent())?[2,e.state===Vn]:[2,!1];case 2:return[2,!1]}}))}))}var Yn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};var Xn=n.n(Wn)()((function(t){return Yn(this,void 0,void 0,(function(){var n,r,i;return $n(this,(function(o){switch(o.label){case 0:if(!t)return[2];n=t.coords,r={accuracy:n.accuracy,altitude:n.altitude,latitude:n.latitude,longitude:n.longitude},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e(wn.BASE+"/api/v1/location/",{method:"POST",body:JSON.stringify(r),credentials:"include",headers:{"Content-Type":"application/json"}})];case 2:return o.sent(),[3,4];case 3:throw i=o.sent(),l(a.SEND_LOCATION_FAILED,{errorStatus:i});case 4:return[2]}}))}))}),1e3);function Jn(e){return Yn(this,void 0,void 0,(function(){var t,n;return $n(this,(function(r){switch(r.label){case 0:return e.location_permission&&"geolocation"in navigator&&"permissions"in navigator?(n=e.isNativeMode)?[4,qn()]:[3,2]:[3,5];case 1:n=r.sent(),r.l:[3,4];case 3:t=r.sent(),r.label=4;case 4hinrn"permissions"in navigator?[4,navigator.per Z]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},er="najva-messaging-sw.js";function tr(e){return Zn(this,void 0,void 0,(function(){var t;return Qn(this,(function(n){switch(n.label){case 0:try{["/","/firebase-cloud-messaging-push-scope"].forEach((function(e){navigator.serviceWorker.getRegistration(e).then((function(e){var t,n;(null===(n=null===(t=null==e?void 0:e.active)||void 0===t?void 0:t.scriptURL)||void 0===n?void 0:n.includes(er))&&e.unregister()})).catch((function(e){throw l(a.SW_UNREGISTRATION_FAILED,{error:e})}))}))}catch(e){}n.label=1;case 1:return n.trys.push([1,3,,4]),[4,navigator.serviceWorker.register(e.sw_path+er,{scope:e.sw_path+"najva-messaging-scope",updateViaCache:"none"})];case 2:return[2,n.sent()];case 3:throw t=n.sent(),l(a.SW_REGISTRATION_FAILED,{browserErrorMessage:t.message,error:t});case 4:return[2]}}))}))}var nr=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},rr=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ir={website_id:"",api_key:"",campaign_id:""};function or(t){return nr(this,void 0,void 0,(function(){var n,r;return rr(this,(function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),[4,De(v.LastCurrentUserAPICalled)];case 1:return(n=i.sent())&&n===(new Date).toLocaleDateString()?[3,4]:[4,Ae(v.LastCurrentUserAPICalled,(new Date).toLocaleDateString())];case 2:return i.sent(),[4,e("https://cr.najva.com/api/v2/current/user/",{method:"POST",body:new URLSearchParams({website:t}),headers:{"Content-type":"application/x-www-form-urlencoded"},credentials:"include"})];case 3:i.sent(),i.label=4;case 4:return[3,6];case 5:throw r=i.sent(),l(a.UPDATE_USER_ACTIVITY_FAILED,{browserErrorMessage:r.message,error:r});case 6:return[2]}}))}))}function ar(){return nr(this,void 0,void 0,(function(){return rr(this,(function(e){switch(e.label){case 0:return[4,Ae(v.LastActiveTime,(new Date).toISOString())];case 1:return e.sent(),[2]}}))}))}function sr(){return nr(this,void 0,void 0,(function(){var e;return rr(this,(function(t){switch(t.label){case 0:return[4,De(v.VisitCount)];case 1:return(e=t.sent())||(e=0),e=parseInt(e.toString()),[4,Ae(v.VisitCount,e+1)];case 2:return t.sent(),[2]}}))}))}function cr(e){return nr(this,void 0,void 0,(function(){return rr(this,(function(t){switch(t.label){case 0:return ir=e,[4,jn()];case 1:return t.sent()&&function(){nr(this,void 0,void 0,(function(){return rr(this,(function(e){switch(e.label){case 0:return[4,sr()];case 1:e.sent(),e.label=2;case 2:return e.trys.push([2,5,,6]),[4,or(ir.website_id)];case 3:return e.sent(),[4,ar()];case 4:case 5:return e.sent(),[3,6];case 6:return[2]}}))}))}(),[2]}}))}))}var ur=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},lr=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},fr={website_id:""};function dr(t){return ur(this,void 0,void 0,(function(){var n,r,i=this;return lr(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),[4,jn()];case 1:return o.sent()?[4,e(wn.BASE+"/api/v2/subscriber/tag/",{method:"POST",body:JSON.stringify({website_id:fr.website_id,tags:t}),headers:{"Content-Type":"application/json"},credentials:"include"})]:[3,4];case 2:return n=o.sent(),"not found"===n.message?[3,4]:[4,Promise.all(Object.keys(t).map((function(e){return ur(i,void 0,void 0,(function(){return lr(this,(function(n){return[2,oe(e,t[e],(new Date).toISOString())]}))}))})))];case 3:o.sent(),o.label=4;case 4:return[3,6];case 5:throw r=o.sent(),l(a.ADD_ATTRIBUTE_FAILED,{object:t,error:r});case 6:return[2]}}))}))}function pr(){return ur(this,void 0,void 0,(function(){var t,n,r,i;return lr(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,e(wn.BASE+"/api/v2/subscriber/tag/?website_id="+fr.website_id,{method:"GET",credentials:"include"})];case 1:return t=o.sent(),n=t.message,r=t.tags,"not found"===n||null===r?[2,{}]:[2,r];case 2:throw i=o.sent(),l(a.GET_ATTRIBUTES_FAILED,{error:i});case 3:return[2]}}))}))}function hr(t){return ur(this,void 0,void 0,(function(){var n,r,i,o;return lr(this,(function(s){switch(s.label){case 0:return s.trys.push([0,4,,5]),[4,e(wn.BASE+"/api/v2/subscriber/tag/",{method:"DELETE",body:JSON.stringify({website_id:fr.website_id,key:t}),headers:{"Content-Type":"application/json"},credentials:"include"})];case 1:return n=s.sent(),r=n.message,i=n.tags,"not found"===r?[3,3]:[4,ae(t)];case 2:s.sent(),s.label=3;case 3:return i?[2,i]:[2,[]];case 4:throw o=s.sent(),l(a.DELETE_ATTRIBUTE_FAILED,{key:t,error:o});case 5:return[2]}}))}))}function br(){var e,t=!1;return e=window.navigator.userAgent||window.navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(|85tes+)engt=n,process.platform},mr=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},yr=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},gr=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Er=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Sr=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],kr=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows ];var o=i.join("."),a=function(e){for(var t=0,n=kr.length;t<n;t++){var r=kr[t],i=r[0];if(r[1].exec(e))return i}return null}(e),s=Er.exec(e);return s&&s[1]?new mr(n,o,a,s[1]):new wr(n,o,a)}function Or(){var e=Tr();return!!e&&"firefox"===e.name}function Nr(){var e=Tr();return e?e.version:null}var Dr,Ar,Pr=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Lr=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function Cr(){return Pr(this,void 0,void 0,(function(){return Lr(this,(function(e){return[2,new Prorage.estimate().then((function(n){var r=n.quota;r&&r<12e7&&e(),t()}));var n=window.RequestFileSystem||window.webkitRequestFileSystem;n?n(window.TEMPORARY,100,(function(){t()}),(function(){e()})):e()}))]}))}))}function window.localStorage.setIthis,void 0,void 0,(function(){return Lr(this,(function(e){return[2,new Promise((function(e,t){window.indexeon Br(){return Pr(this,void 0,void 0,(function(){return Lr(this,(function(e){switch(e.label){case 0:if(function(){var e=window.navigator.userAgent.toLowerCase();if(0===e.indexOf("msie")&&0===e.indexOf("trident"))return!1;var t=/(?:msie|rv:)10)}())return[2,Rr()];if(!Or())return[3,5];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Mr()];case 2:return e.sent(),[2,!0];case 3:return e.sent(),[2,!1];case 4:return[3,10];case 5:return(t=Tr())&&"safari"===t.name?[2,jr()]:[3,6];case 6:if(!function(){var e=Tr();return!!e&&"chrome"===e.name}())return[3,10];e.label=7;case 7:return e.trys.push([7,9,,10]),[4,Cr()];case 8:return e.sent(),[2,!0];case 9:return e.sent(),[2,!1];case 10:return[2,!1]}var t}))}))}!function(e){e.POPUP_BUTTON="najva-popup-button"}(Dr||(Dr={})),function(e){e.POPUP="najva-popup",e.POPUP_IMAGE_WRAPPER="najva-popup-image-wrapper",e.POPUP_IMAGE="najva-popup-image",e.POPUP_BODY_WRAPPER="najva-popup-body-wrapper",e.POPUP_TEXT="najva-popup-text",e.POPUP_DESCRIPTION="najva-popup-description",e.POPUP_BUTTON_WRAPPER="najva-popup-button-wrapper",e.POPUP_REJECT_BUTTON="najva-popup-reject-button",e.POPUP_ACCEPT_BUTTON="najva-popup-accept-button"}(Ar||(Ar={}));var Ur=!1;var Fr=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Wr=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Kr={request_icon:"",request_text:"",request_description:"",denied_text:"",accept_text:"",without_popup:!0,with_popup:!0,dismiss_cookie_days:0,isNativeMode:!1,request_permission:{delay:{enable:1,value:5},scroll:{enable:0,value:50},visit:{minimum:{enable:1,value:1},maximum:{enable:0,value:24},interval:{enable:0,value:3}}}};function Gr(){var e=document.getElementById(Ar.POPUP);e&&e.classList.add(St)}function zr(){var e=this;!function(e){if(!document.getElementById(Ar.POPUP)){var t=Lt('\n    <div id="'+Ar.POPUP+'" class="'+St+'">\n        <div id="'+Ar.POPUP_IMAGE_WRAPPER+'">\n            <img id="'+Ar.POPUP_IMAGE+'" src="'+e.request_icon+'">\n        </div>\n        <div id="'+Ar.POPUP_BODY_WRAPPER+'" class="'+It+'">\n            <p id="'+Ar.POPUP_TEXT+'">'+e.request_text+"</p>\n            "+(e.request_description?'<p id="'+Ar.POPUP_DESCRIPTION+'">'+e.request_description+"</p>":"")+'\n            <div id="'+Ar.POPUP_BUTTON_WRAPPER+'" class="'+kt+'">\n                <button id="'+Ar.POPUP_REJECT_BUTTON+'" class="'+Dr.POPUP_BUTTON+'">\n                    '+e.denied_text+'\n                </button>\n                <button id="'+Ar.POPUP_ACCEPT_BUTTON+'" class="'+Dr.POPUP_BUTTON+'">\n                    '+e.accept_text+"\n                </button>\n            </div>\n        </div>\n    </div>\n");t&&document.body.appendChild(t)}}(Kr);var t=document.getElementById(Ar.POPUP_ACCEPT_BUTTON),n=document.getElementById(Ar.POPUP_REJECT_BUTTON);t&&t.addEventListener("click",(function(){return Fr(e,void 0,void 0,(function(){return Wr(this,(function(e){switch(e.label){case 0:return Gr(),[4,Cn()];case 1:return e.sent(),[2]}}))}))})),n&&n.addEventListener("click",(function(){return Fr(e,void 0,void 0,(function(){return Wr(this,(function(e){switch(e.label){case 0:return Gr(),ai(),[4,te($.Reject,!0)];case 1:return e.sent(),[2]}}))}))}))}function Vr(){return Fr(this,void 0,void 0,(function(){var e;return Wr(this,(function(t){switch(t.label){case 0:return[4,ee($.ShownCount)];case 1:return(e=t.sent())||(e=0),[2,e]}}))}))}function Hr(){return Fr(this,void 0,void 0,(function(){var e;return Wr(this,(function(t){switch(t.label){case 0:return[4,Vr()];case 1:return e=t.sent(),[4,te($.ShownCount,e+1)];case 2:return t.sent(),[2]}}))}))}function qr(){return Fr(this,void 0,void 0,(function(){return Wr(this,(function(e){switch(e.label){case 0:return n=Kr,Ur||(Ur=!0,Dt("\n    #"+Ar.POPUP+" {\n        z-index: "+xt+";\n        -webkit-box-shadow: 0 1px 8px 0 rgba(0,0,0,.2), 0 3px 4px 0 rgba(0,0,0,.14), 0 3px 3px -2px rgba(0,0,0,.12) !important;\n        box-shadow: 0 1px 8px 0 rgba(0,0,0,.2), 0 3px 4px 0 rgba(0,0,0,.14), 0 3px 3px -2px rgba(0,0,0,.12) !important;\n        direction: rtl;\n        position: fixed;\n        "+(n.with_popup?"top: 10px;left: 15px;":"")+"\n        width: 500px;\n        top: 0px;\n        left: 50%;\n        -webkit-transform: translateX(-50%);\n        -ms-transform: translateX(-50%);\n        transform: translateX(-50%);\n        background-color: #fff;\n        border-bottom-right-radius: 4px;\n        border-bottom-left-radius: 4px;\n        border: 1px solid #eaeaea;\n        -webkit-transition: opacity 0.5s, visibility 0.5s;\n        -o-transition: opacity 0.5s, visibility 0.5s;\n        transition: opacity 0.5s, visibility 0.5s;\n    }\n\n    #"+Ar.POPUP_IMAGE_WRAPPER+" {\n        width: 25%;\n        position: absolute;\n        top: 50%;\n        -webkit-transform: translateY(-50%);\n        -ms-transform: translateY(-50%);\n        transform: translateY(-50%);\n        text-align: center;\n    }\n\n    #"+Ar.POPUP_IMAGE+" {\n        width: 75%;\n        height: auto;\n        vertical-align: middle;\n    }\n\n    #"+Ar.POPUP_BODY_WRAPPER+" {\n        margin-right: 25%;\n        border-right: 1px solid #eaeaea;\n        padding: 10px;\n        font-size: 1.1em;\n        line-height: 1.2em;\n    }\n \n    #"+Ar.POPUP_TEXT+" {\n        margin: 0;\n        line-height: 1.5em;\n        color: #000;\n        font-size: 1em;\n    }\n\n    #"+Ar.POPUP_DESCRIPTION+" {\n        font-size: 0.8em;\n        color: gray;\n        margin:0;\n    }\n\n    #"+Ar.POPUP_BUTTON_WRAPPER+" {\n        margin-top: 7px;\n    }\n\n    ."+Dr.POPUP_BUTTON+" {\n        -webkit-appearance: button;\n        text-transform: none;\n        overflow: visible;\n        margin: 0;\n        font-family: inherit;\n        display: inline-block;\n        font-weight: 400;\n        text-align: center;\n        white-space: nowrap;\n        vertical-align: middle;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n        border: 1px solid transparent;\n        padding: .375rem 1rem;\n        font-size: 1.2em;\n        line-height: 1.5;\n        border-radius: .25rem;\n        transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\n        -webkit-transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\n        -o-transition: color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out;\n        background: initial;\n    }\n\n    #"+Ar.POPUP_REJECT_BUTTON+":hover {\n        background-color: #e2e6ea !important;\n        border-color: #dae0e5 !important;\n    }\n\n    #"+Ar.POPUP_REJECT_BUTTON+" {\n        color: #212529 !important;\n        background-color: #f8f9fa !important;\n        border-color: #f8f9fa !important; \n    }\n\n    #"+Ar.POPUP_ACCEPT_BUTTON+" {\n        color: #fff !important;\n        background-color: #007bff !important;\n        border-color: #007bff !important;\n    }\n\n    #"+Ar.POPUP_ACCEPT_BUTTON+":hover {\n        background-color: #0069d9 !important;\n        border-color: #0062cc !important;\n        text-decoration: none;\n    }\n\n    @media screen and (max-width: 767px) {\n      #"+Ar.POPUP+" {\n          width: 100%;\n          top: auto;\n          bottom: 0;\n          left:0;\n          -webkit-transform: none;\n          -ms-transform: none;\n          transform: none;\n          border-bottom-right-radius: 0;\n          border-bottom-left-radius: 0;\n          border-top-right-radius: 10px;\n          border-top-left-radius: 10px;\n      }\n\n      #"+Ar.POPUP_BODY_WRAPPER+"{\n          font-size: 15px;\n      }\n\n      ."+Dr.POPUP_BUTTON+" {\n          width: 100px;\n          font-size: 1em\n      }\n\n      #"+Ar.POPUP_BUTTON_WRAPPER+" {\n          text-align: center;\n          float: inherit;\n      } \n    }\n  ")),ii(St),zr(),(t=document.getElementById(Ar.POPUP))&&t.classList.remove(St),[4,te($.LastShownTime,(new Date).toISOString())];case 1:return e.sent(),[4,Hr()];case 2:return e.sent(),[2]}var t,n}))}))}function Yr(){return Fr(this,void 0,void 0,(function(){var e,t,n;return Wr(this,(function(r){switch(r.label){case 0:return[4,Qt()];case 1:return e=r.sent(),[4,De(v.HasNajvaSubscriptionWindowOpened)];case 2:return t=r.sent(),Kr.isNa[2,!0]}}))}))}var $r,Xr=!1;!function(e){e.BELL="najva-bell",e.BELL_IMAGE_WRAPPER="najva-bell-image-wrapper",e.BELL_IMAGE="najva-bell-image",e.BELL_DENIED_HELP="najva-bell-denied-help",e.BELL_DENIED_HELP_CLOSE="najva-bell-denied-help-close",e.BELL_DENIED_HELP_IMAGE="najva-bell-denied-help-image"}($r||($r={}));var Jr=!1;function Zr(e){if(!Jr){Jr=!0,Xr||(Dt("\n      [najvatooltip] {\n        margin: 20px 60px;\n        position: relative;\n        display: inline-block;\n        font-family: inherit;\n    }\n\n    [najvatooltip]::before {\n        content: \"\";\n        position: absolute;\n        top: -6px;\n        left: 50%;\n        transform: translateX(-50%);\n        border-width: 4px 6px 0 6px;\n        border-style: solid;\n        border-color: rgba(0, 0, 0, 0.7) transparent transparent transparent;\n        z-index: 99;\n        opacity: 0;\n    }\n\n    [najvatooltip-position='left']::before {\n        left: 0%;\n        top: 50%;\n        margin-left: -12px;\n        transform: translatey(-50%) rotate(-90deg)\n    }\n\n    [najvatooltip-position='top']::before {\n        left: 50%;\n    }\n\n    [najvatooltip-position='buttom']::before {\n        top: 100%;\n        margin-top: 8px;\n        transform: translateX(-50%) translatey(-100%) rotate(-180deg)\n    }\n\n    [najvatooltip-position='right']::before {\n        left: 100%;\n        top: 50%;\n        margin-left: 1px;\n        transform: translatey(-50%) rotate(90deg)\n    }\n\n    [najvatooltip]::after {\n        content: attr(najvatooltip);\n        position: absolute;\n        left: 50%;\n        top: -6px;\n        transform: translateX(-50%) translateY(-100%);\n        background: rgba(0, 0, 0, 0.7);\n        text-align: center;\n        color: #fff;\n        padding: 4px 2px;\n        font-size: 12px;\n        min-width: 80px;\n        border-radius: 5px;\n        pointer-events: none;\n        padding: 4px 4px;\n        z-index: 99;\n        opacity: 0;\n    }\n\n    [najvatooltip-position='left']::after {\n        left: 0%;\n        top: 50%;\n        margin-left: -8px;\n        transform: translateX(-100%) translateY(-50%);\n    }\n\n    [najvatooltip-position='top']::after {\n        left: 50%;\n    }\n\n    [najvatooltip-position='buttom']::after {\n        top: 100%;\n        margin-top: 8px;\n        transform: translateX(-50%) translateY(0%);\n    }\n\n    [najvatooltip-position='right']::after {\n        left: 100%;\n        top: 50%;\n        margin-left: 8px;\n        transform: translateX(0%) translateY(-50%);\n    }\n\n    [najvatooltip]:hover::after, [najvatooltip]:hover::before {\n        opacity: 1\n    }\n  "),Xr=!0);var t="\n      #"+$r.BELL+" {\n        -webkit-box-shadow: 0 1px 6px rgba(0, 0, 0, .06), 0 2px 32px rgba(0, 0, 0, .16) !important;\n        box-shadow: 0 1px 6px rgba(0, 0, 0, .06), 0 2px 32px rgba(0, 0, 0, .16) !important;\n        max-width: initial;\n        z-index: "+xt+";\n        position: fixed;\n        width: 50px;\n        height: 50px;\n\n        bottom: 30px;\n        cursor: pointer;\n        background-color: transparent;\n        border-radius: 50%;\n        -webkit-transition: background-color 0.7s;\n        -o-transition: background-color 0.7s;\n        transition: background-color 0.7s;\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        box-sizing: border-box;\n    }\n\n    #"+$r.BELL_IMAGE_WRAPPER+" {\n        padding: 0;\n        margin: 0;\n        border-radius: 50%;\n        width: 50px;\n        height: 50px;\n        text-align: center;\n        /*background-color: #444;*/\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        -webkit-transform: translate(-50%, -50%);\n        -ms-transform: translate(-50%, -50%);\n        transform: translate(-50%, -50%);\n        -webkit-transition: width 0.3s, height 0.3s;\n        -o-transition: width 0.3s, height 0.3s;\n        transition: width 0.3s, height 0.3s;\n  }\n\n    #"+$r.BELL_IMAGE+" {\n        width: 40px;\n        height: 40px;\n        position: absolute;\n        left: 50%;\n        top: 50%;\n        max-width: initial;\n        -webkit-transform: translate(-50%, -50%);\n        -ms-transform: translate(-50%, -50%);\n        transform: translate(-50%, -50%);\n        border: 2px solid #fff;\n        border-radius: 50%;\n        padding: 5px;\n        -webkit-transition: width 0.3s, height 0.3s;\n        -o-transition: width 0.3s, height 0.3s;\n        transition: width 0.3s, height 0.3s;\n  }\n\n    #"+$r.BELL+":hover #"+$r.BELL_IMAGE_WRAPPER+" {\n        width: 20px;\n        height: 20px;\n    }\n\n    #"+$r.BELL+":hover #"+$r.BELL_IMAGE+" {\n        width: 50px;\n        height: 50px;\n        border-color: transparent;\n    }\n\n    #"+$r.BELL+" {\n        "+e.bell_direction+": 30px;\n    }\n\n    #"+$r.BELL+":hover {\n        background-color: "+e.bell_color_hover+";\n    }\n\n    #"+$r.BELL_IMAGE_WRAPPER+" {\n        background-color: "+e.bell_color+";\n    }\n\n    #"+$r.BELL_DENIED_HELP_CLOSE+"{\n        position: absolute;\n        top: 0;\n        right: 0;\n        padding: 2px 4px;\n        color: gray;\n        cursor: pointer;\n        border: 1px solid #d6d6d6;\n        border-top-right-radius: 5px;\n        font-size: 15px;\n        font-family: arial;\n    }\n\n    #"+$r.BELL_DENIED_HELP+"{\n        z-index: "+xt+";\n        position: fixed;\n        bottom: 110px;\n        "+e.bell_direction+": 30px;\n        background: white;\n        padding: 25px 15px 15px;\n        color: #000;\n        direction: rtl;\n        border-radius: 5px;\n        width:230px;\n    }\n\n  @media screen and (max-width: 767px) {\n      #"+$r.BELL+" {\n        width: 4em;\n        height: 4em;\n        margin:0;\n    }\n\n    #"+$r.BELL_IMAGE+" {\n        width: 3em;\n        height: 3em;\n    }\n\n    #"+$r.BELL+":hover #"+$r.BELL_IMAGE_WRAPPER+" {\n        width: 1em;\n        height: 1em;\n    }\n\n    #"+$r.BELL+":hover #"+$r.BELL_IMAGE+" {\n        width: 4em;\n        height: 4em;\n    }\n  \n    #"+$r.BELL_IMAGE_WRAPPER+" {\n        width: 4em;\n        height: 4em;\n    }\n  }\n\n  ";e.show_bell_in_mobile||(t+="\n    @media screen and (max-width: 768px) {\n        #"+$r.BELL+" {\n            visibility: hidden!important;\n            opacity: 0!important;\n        }\n    }"),Dt(t)}}var Qr,ei,ti=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ni=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:tip_direction:"left",bell_color_hover:"#7a7a7a",bell_color:"#444444",bell_tooltip:"",without_popup:!0,isNativeMode:!1};function ii(e){var t=document.getElementById($r.BELL);t&&t.classList.add(e)}function oi(e){var t=document.getElementById($r.BELL);t&&t.classList.remove(e)}function ai(){oi(St)}function si(){var e,t=document.getElementById($r.BELL_DENIED_HELP);if(!t){var n=Lt('\n    <div\n        id="'+$r.BELL_DENIED_HELP+'"\n        class="'+St+'"\n    >\n        <span id="'+$r.BELL_DENIED_HELP_CLOSE+'">x</span>\n        <p>\n            شما اجازه ارسال نوتیف را به ما ندادید. طبق تصویر زیر، اجازه ارسال نوتیف را صادر کنید.\n        </p>\n        <img id="'+$r.BELL_DENIED_HELP_IMAGE+'" src="'+(br()?wn.STATIC_IMAGES+"/android-chrome-denied-help.png":Or()?wn.STATIC_IMAGES+"/firefox-denied-help.png":wn.STAT)+'"\n           height="'+(br()?319:Or()?112:274)+'"\n           width="230"\n           alt="notif denied help image"\n        >\n    </div>\n');n&&document.body.appendChild(n)}t=document.getElementById($r.BELL_DENIED_HELP),null===(e=document.getElementById($r.BELL_DENIED_HELP_CLOSE))||void 0===e||e.addEventListener("click",(function(){t&&t.classList.add(St)}),!1)}function ci(){var e=document.getElementById($r.BELL),t=document.getElementById($r.BELL_DENIED_HELP);e&&(e.onclick=function(){return ti(this,void 0,void 0,(function(){var e;return ni(this,(function(n){switch(n.label){case 0:return[4,Zt()];case 1:return e=n.sent(),ri.isNativeMode&&e?(t&&((r=t)&&(r.classList.contains(St)?r.classList.remove(St):r.classList.add(St))),[3,5]):[3,2];case 2:return ri.without_popup?(Cn(),[3,5]):[3,3];case 3:return[4,qr()];case 4:n.sent(),n.label=5;case 5:return[2]}var r}))}))})}function ui(e){si(),function(e){if(Zr(e),!document.getElementById($r.BELL)){var t=Lt('\n    <div\n        id="'+$r.BELL+'"\n        najvatooltip="'+e.bell_tooltip+'‍"\n        najvatooltip-position="'+e.tooltip_direction+'"\n        class="'+St+'"\n    >\n        <div id="'+$r.BELL_IMAGE_WRAPPER+'">\n            <img\n                id="'+$r.BELL_IMAGE+'"\n                src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/PjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUzIDUzIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1MyA1MzsiIHhtbDpzcGFjZT0icHJlc2VydmUiIHdpZHRoPSI2NHB4IiBoZWlnaHQ9IjY0cHgiPjxwYXRoIHN0eWxlPSJmaWxsOiNFN0VDRUQ7IiBkPSJNMTIuODIxLDQ2LjYzOGMxMC43MDEsMS44NDcsMTYuNjU5LDEuODQ3LDI3LjM2LDBMNDkuNjcxLDQ1bDAsMGMtNC42ODUtNC42NTctNy4zMTctMTAuNDE1LTcuMzE3LTE3ICB2LTljMC4wMzgtNi4wNDctMy45NTctMTAuNDc4LTcuOTQ2LTEyLjMwMWMtNC45OTktMi4yODUtMTAuODE1LTIuMjk0LTE1LjgwNiwwLjAwOEMxNC42NDgsOC41MywxMC4zNjcsMTIuOTU4LDEwLjMyOSwxOXY5ICBjMCw2LjU4NS0yLjMxNSwxMi4zNDMtNywxN2wwLDBMMTIuODIxLDQ2LjYzOHoiLz48cGF0aCBzdHlsZT0iZmlsbDojRkZGRkZGOyIgZD0iTTE1LjMyOSwyMGMtMC4wMDIsMC0wLjAwNCwwLTAuMDA2LDBjLTAuNTUyLTAuMDA0LTAuOTk3LTAuNDU0LTAuOTk0LTEuMDA2ICBjMC4wMy00LjY4MiwzLjc1Mi03LjY0Myw1Ljk0OC04LjY1NGMzLjg0OS0xLjc3NSw4LjU5NC0xLjc3MiwxMi40NjktMC4wMDJjMC41MDIsMC4yMjksMC43MjMsMC44MjIsMC40OTQsMS4zMjUgIGMtMC4yMywwLjUwMi0wLjgyMywwLjcyNC0xLjMyNiwwLjQ5M2MtMy4zNTMtMS41MzMtNy40NjktMS41MzctMTAuNzk5LDBjLTEuNzY3LDAuODE0LTQuNzYyLDMuMTczLTQuNzg1LDYuODUgIEMxNi4zMjYsMTkuNTU3LDE1Ljg3OSwyMCwxNS4zMjksMjB6Ii8+PHBhdGggc3R5bGU9ImZpbGw6I0M3Q0FDNzsiIGQ9Ik0zMC4zMjksNS4zODFWNGMwLTIuMjA5LTEuNzkxLTQtNC00cy00LDEuNzkxLTQsNHYxLjQ1M0MyNC45NTgsNC44NjIsMjcuNjksNC44NDEsMzAuMzI5LDUuMzgxeiIvPjxwYXRoIHN0eWxlPSJmaWxsOiNDN0NBQzc7IiBkPSJNMTguMjM1LDQ3LjQ2YzEuNDQ1LDMuMjY4LDQuNjAyLDUuNTQsOC4yNzcsNS41NGMzLjY3NiwwLDYuODM0LTIuMjczLDguMjc4LTUuNTQzICBDMjguODYyLDQ4LjIwOSwyNC4xNTksNDguMjEsMTguMjM1LDQ3LjQ2eiIvPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjxnPjwvZz48Zz48L2c+PGc+PC9nPjwvc3ZnPg=="\n            />\n        </div>\n    </div>\n');t&&document.body.appendChild(t),ci()}}(e),ai()}function li(e){return ti(this,void 0,void 0,(function(){var t,n;return ni(this,(function(r){switch(r.label){case 0:retutypeof t||"true"!==t))&&ui(ri),function(e){window.addEventListener(jt.NOTIF_ACCESS_DENIED,e)}((function(){ui(ri)})),r.label=3;case 3:return[2]}}))}))}!function(e){e.BACKDROP_CONTAINER="najva-backdrop-container",e.HIDDEN_IN_BACKDROP="najva-hidden-in-backdrop",e.BACKDROP_TEXT_CONTAINER_DOWN="najva-backdrop-text-container-down",e.BACKDROP_TEXT="najva-backdrop-text"}(Qr||(Qr={})),function(e){e.BACKDROP="najva-backdrop",e.BACKDROP_CLOSE="najva-backdrop-close",e.BACKDROP_TEXT_CONTAINER="najva-backdrop-text-container",e.BACKDROP_ARROW="najva-backdrop-arrow",e.DENIED_HELP_BACKDROP="najva-denied-help-backdrop",e.DENIED_HELP_CLOSE="najva-denied-help-close",e.DENIED_HELP_IMAGE="najva-denied-help-img"}(ei||(ei={}));var fi,di,pi=!1;function hi(){pi||(pi=!0,Dt("\n    #"+ei.BACKDROP+"{\n        position:fixed;\n        top:0;\n        left:0;\n        width: 100vw;\n        height: 100vh;\n        z-index: "+xt+";\n        background-color: #000;\n        opacity: 0.8;\n    }\n\n    #"+ei.BACKDROP_TEXT_CONTAINER+"{\n        direction: rtl;\n        display: flex;\n        max-width: 600px;\n        z-index: 2147483645;\n        margin: 200px auto;\n        position: fixed;\n        right: 0;\n        left: 0;\n        top: 0;\n    }\n\n    #"+ei.BACKDROP_TEXT_CONTAINER+"."+Qr.BACKDROP_TEXT_CONTAINER_DOWN+"{\n        margin: 250px auto;\n    }\n\n    #"+ei.BACKDROP_TEXT_CONTAINER+" ."+Qr.BACKDROP_TEXT+"{\n        direction: rtl;\n        z-index: "+xt+";\n        font-size: 30px;\n        font-weight: bold;\n        line-height: normal;\n        color: white;\n        font-family: inherit;\n        text-align: right;\n        display: flex;\n        align-items: flex-end;\n        max-width: 520px;\n        padding-left: 20px;\n    }\n\n    ."+Qr.BACKDROP_TEXT_CONTAINER_DOWN+" ."+Qr.BACKDROP_TEXT+"{\n        align-items: flex-start;\n    }\n\n    #"+ei.BACKDROP_ARROW+" {\n        flex-basis: 80px;\n        height: 160px;\n        background-size: contain;\n        transform: rotate(170deg);\n        background-image: url("+wn.STATIC_IMAGES+"/arrow-white.png);\n        background-repeat: no-repeat;\n    }\n\n    ."+Qr.BACKDROP_TEXT_CONTAINER_DOWN+" #"+ei.BACKDROP_ARROW+" {\n        transform: rotate(0deg);\n    }\n\n    #"+ei.BACKDROP_CLOSE+" {\n        position: fixed;\n        right: 20px;\n        top: 30px;\n        width: 55px;\n        height: 32px;\n        cursor: pointer;\n        z-index: "+(xt+1)+"\n    }\n\n    #"+ei.BACKDROP_CLOSE+":before,#"+ei.BACKDROP_CLOSE+':after  {\n        position: fixed;\n        right: 48px;\n        content: " ";\n        height: 33px;\n        width: 3px;\n        background-color: #ffffff;\n    }\n\n    #'+ei.BACKDROP_CLOSE+":before {\n        transform: rotate(45deg);\n    }\n\n    #"+ei.BACKDROP_CLOSE+":after {\n        transform: rotate(-45deg);\n    }\n\n    #"+ei.DENIED_HELP_BACKDROP+"{\n        position: fixed;\n        color: white;\n        font-family: inherit;\n        z-index:"+xt+";\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        width: 100%;\n        top: 30px;\n        margin: auto;\n        left: 0;\n        right: 0;\n    }\n\n    #"+ei.DENIED_HELP_BACKDROP+" p {\n        direction: rtl;\n        font-size: 1.5em;\n        font-weight: bold;\n    }\n\n    #"+ei.DENIED_HELP_BACKDROP+" #"+ei.DENIED_HELP_CLOSE+" {\n        color: white;\n        border: 1px solid white;\n        border-radius: 10px;\n        position: fixed;\n        top:play: none;\n    }\n\n    @media screen and (max-width: 767px) {\n      #"+ei.DENIED_HELP_BACKDROP+" #"+ei.DENIED_HELP_IMAGE+" {\n          width: 90%;\n      }\n\n      #"+ei.DENIED_HELP_BACKDROP+" p {\n          text-align: justify;\n          padding: 1em;\n      }\n    }\n  "))}function bi(){var e=document.getElementById(di.POWERED_BY);e&&e.classList.add(St)}!function(e){e.POWERED_BY="najva-powered-by",e.POWERED_BY_UP="najva-powered-by-up"}(fi||(fi={})),function(e){e.POWERED_BY="najva-powered-by"}(di||(di={}));var vi=!1;function wi(e){if(!e.notification_button_enabled){var t=document.querySelector("."+Qr.BACKDROP_CONTAINER);if(t){vi||(vi=!0,Dt("\n  ."+Qr.BACKDROP_CONTAINER+" ."+fi.POWERED_BY+" {\n        direction: rtl;\n        display: flex;\n        flex-direction: row;\n        color: white;\n        width: 165px;\n        font-size: 12px;\n        align-items: center;\n        font-family: inherit;\n        cursor: pointer;\n        z-index: "+xt+";\n        position: fixed;\n        bottom: 10px;\n        right: 10px;\n    }\n\n    ."+Qr.BACKDROP_CONTAINER+" ."+fi.POWERED_BY+" img {\n        width: 50px;\n        height: 50px;\n        margin-right: -5px;\n        margin-top: -13px;\n\n    }\n    ."+Qr.BACKDROP_CONTAINER+" ."+fi.POWERED_BY+"."+fi.POWERED_BY_UP+"{\n        top: 10px;\n        bottom:var n=Lt('\n  <div id="'+di.POWERED_BY+'" class="'+fi.POWERED_BY+" "+(br()?fi.POWERED_BY_UP:"")+'">\n      <span>طراحی‌شده توسط</span>\n      <img src="'+wn.STATIC_IMAGES+'/najva-flag-typography-white.svg">\n    </div>\n  ');n&&t.appendChild(n);var r=document.getElementById(di.POWERED_BY);r&&r.addEventListener("click",(function(){window.open("https://najva.com")}))}}}var _i="najva-backdrop-close";var mi,yi,gi,Ei,Si={show_backdrop:!1,show_backdrop_mobile:!1,backdrop_text:"",website_policy:ase_account:!1,notification_countdown:1,notification_blocked:!1,recommender_permission:!1,tag_enabled:!1,email_enabled:!1}};function ki(){var e,t=Nr();if(t){var n=t.split(".")[0];if((e=Tr())&&"edge"===e.name&&Numbereturn document.querySelector("."+Qr.BACKDROP_CONTAINER)}function Ii(){var e=Ti();e&&e.classList.add(Qr.HIDDEN_IN_BACKDROP)}function xi(){var e=Ti();if(e)e.classList.remove(Qr.HIDDEN_IN_BACKDROP);else{var t=Lt('<div class="'+Qr.BACKDROP_CONTROP+"></div>\n      </div>");t&&document.body.appendChild(t)}}function Oi(){ii(Qr.HIDDEN_IN_BACKDROP)}function Ni(){var e,t;Ii(),bi(),(e=document.getElementById(ei.BACKDROP_TEXT_CONTAINER))&&e.classList.add(Qr.HIDDEN_IN_BACKDROP),(t=document.getElementById(ei.BACKDROP_CLOSE))&&t.classList.add(Qr.HIDDEN_IN_BACKDROP),oi(Qr.HIDDEN_IN_BACKDROP)}function Di(){br()?(Ii(),bi()):Ni()}function Ai(){var e=Ti();if(e){var t=document.getElementById(ei.BACKDROP_CLOSE);if(t)t.classList.remove(Qr.HIDDEN_IN_BACKDROP);else{var n=Lt("<div id="+ei.BACKDROP_CLOSE+"></div>");n&&e.appendChild(n)}(t=document.getElementById(ei.BACKDROP_CLOSE))&&t.addEventListener("click",(function(){var e;Di(),e=new Event(_i),window.dispatchEvent(e)}))}}function Pi(){hi(),xi(),wi(Si.website_policy),Ai(),function(){var e=Ti();if(e){var t=document.getElementById(ei.BACKDROP_TEXT_CONTAINER);if(t)t.classList.remove(Qr.HIDDEN_IN_BACKDROP);else{var ,Oi()):!br()&&Si.show_backdrop&&(Pi(),Oi()))}function Ci(e){Si=e,funion Ki(e){return e===Ri(ji(Mi(window.location.pathname)))}fyi.EndsWith?Ui(t):e===yi.MatchRegex?Wi(t):e===yi.NotContains?!Fi(t):e===yi.NotEndsWith?function(e){return!Ui(e)}(t):e===yi.NotMatcn(e){e[e.And=0]="And",e[e.Or=1]="Or"}(mi||(mi={})),function(e){e[e.EqualsTo=0]="EqualsTo",e[e.StartsWiths=3]="Contains",e[e.MatchRegex=4]="MatchReabbb";!function(e){e.CUSTOM_LINK_CONTAINER="najva-custom-link-container",e.CUSTOM_LINK="najva-custom-link",e.CUSTOM_LINK_LINK="najva-custom-link-link",e.CUSTOM_LINK_BUTTON="najva-custom-link-button",e.CUSTOM_LINK_LARGE="najva-custom-link-large",e.CUSTOM_LINK_MEDIUM="najva-custom-link-medium",e.CUSTOM_LINK_SMALL="najva-custom-link-small",e.DISABLED="najva-custom-link-disabled"}(Vi||(Vi={}));var Yi=!1;var $i=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Xi=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ji=null,Zi=[];function Qi(e){return $i(this,void 0,void 0,(function(){var t,n,r;return Xi(this,(function(i){switch(i.label){case 0:return[4,ce()];case 1:return t=i.sent(),e&&t?0===(n=Object.keys(e)).length?[2,!1]:(r=!0,n.forEach((function(n){(!t[n]||t[n]&&t[n]!==e[n])&&(r=!1)})),[2,r]):[2,!1]}}))}))}function eo(e){return $i(this,void 0,void 0,(function(){var t,n;return Xi(this,(function(,[2,e.allod(Vi.CUSTOM_LINK),t.classList.add(Et),e?[4,Qi(e.tags)]:[3,2];case 1:n.sent()&&t.classList.add(Vi.DISABLED),function(e,t){t===Ei.Button?e.classList.add(Vi.CUSTOM_LINK_BUTTON):e.classList.add(Vi.CUSTOM_LINK_LINK)}(t,e.type),function(e,t){t===gi.Small&&e.classList.add(Vi.CUSTOM_LINK_SMALL),t===gi.Medium?e.classList.add(Vi.CUSTOM_LINK_MEDIUM):e.classList.add(Vi.CUSTOM_LINK_LARGE)}(t,e.size),function(e,t,n,r){n&&(e.style.color="#"+n),t===Ei.Button&&(e.style.backgroundColor="#"+r)}(t,e.type,e.text_color,e.background_color),n.label=2;case 2:return[2]}}))}))}function no(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){switch(t.label){case 0:return"",[4,eo(e)];case 1:return[2,t.sent()?e.unsubscribe_text?e.unsubscribe_text:"unsubscribe":e.subscribe_text?e.subscribe_text:"subscribe"]}}))}))}function ro(e){return $i(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,c,u,l,f;return Xi(this,(function(d){switch(d.label){case 0:return e.tags&&Object.keys(e.tags).length>0?[4,dr(e.tags)]:[3,3];case 1:return d.sent(),e.welcome_notification_enabled&&Ji?(t=e.welcome_notification,n=t.title,r=t.body,i=t.icon,o=t.image,a=t.url,s=t.actions,c={title:n,body:r,icon:i,image:o,buttons:JSON.stringify(s.map((function(e,t){return{title:e.title,onclick_action:0,button_id:t,icon_url:"",complete_url:e.url}}))),complete_url:a,tag:"",pusher:"",require_interaction:"",light_up_screen:"",notification_id:"",priority:"",url:",onclick_action:"",website_id:"",is_report_enabled:"",najva_token:""},u=sn(c,"",!1),l=u.title,f=u.options,[4,Ji.showNotification(l,f)]):[3,3];case 2:d.sent(),d.label=3;case 3:return[2]}}))}))}function io(e){return $i(this,void 0,void 0,(function(){return Xi(this,(function(t){switch(t.label){case 0:return e.tags?[4,Promise.all(Object.keys(e.tags).map((function(e){return hr(e)})))]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}function oo(e){return $i(this,void 0,void 0,(function(){var t,n,r,i,o;return Xi(this,(function(a){switch(a.label){case 0:return t=e.container_id,(n=document.getElementById(t))?[4,Qi(e.tags)]:[2];case 1:return(r=a.sent())?[4,eo(e)]:[3,3];case 2:r=!a.sent(),a.label=3;case 3:if(r)return[2];for(;n.lastChild;)n.removeChild(n.lastChild);return zi(e.urls.operation,e.urls.matchings)?[4,no(e)]:[3,7];case 4:return i=a.sent(),(o=Lt("<button>"+i+"</button>"))?(n.appendChild(o),[4,ao(e,o)]):[3,7];case 5:return a.sent(),[4,to(e,o)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))}function ao(e,t){return $i(this,void 0,void 0,(function(){var n=this;return Xi(this,(function(r){switch(r.label){case 0:return[4,eo(e)];case 1:return r.sent()?t.addEventListener("click",(function(){return $i(n,void 0,void 0,(function(){return Xi(this,(function(n){switch(n.label){case 0:t.disabled=!0,n.label=1;case 1:return n.trys.push([1,4,,5]),[4,io(e)];case 2:return n.sent(),[4,oo(e)];case 3:return n.sent(),t.disabled=!1,[3,5];case 4:return n.sent(),t.disabled=!1,[3,5];case 5:return[2]}}))}))})):t.addEventListener("click",(function(){return $i(this,void 0,void 0,(function(){return Xi(this,(function(n){switch(n.label){case 0:t.disabled=!0,n.label=1;case 1:return n.trys.push([1,7,,8]),[4,Cn()];case 2:return n.sent(),[4,ro(e)];case 3:return n.sent(),e.allow_unsubscribe?[4,oo(e)]:[3,5];case 4:return n.sent(),[3,6];case 5:this.remove(),n.label=6;case 6:return t.disabled=!1,[3,8];case 7:return n.sent(),t.disabled=!1,[3,8];case 8:return[2]}}))}))})),[2]}}))}))}function so(){return $i(this,void 0,void 0,(function(){var e=this;return Xi(this,(function(t){return Yi||(Yi=!0,Dt("\n ."+Vi.CUSTOM_LINK_CONTAINER+"{\n    display: inline-block;\n  }\n\n."+Vi.CUSTOM_LINK+" {\n  cursor: pointer;\n  text-transform: uppercase;\n  font-weight: 600;\n  font-family:inherit;\n  border: unset;\n  background-color: unset;\n  font-family: inherit;\n  color: #"+Hi+"\n}\n\n\n."+Vi.CUSTOM_LINK+":active,."+Vi.CUSTOM_LINK+":focus  {\n  border: none;\n  outline: none;\n}\n\n."+Vi.CUSTOM_LINK+"."+Et+" {\n  display: inline-block;\n  transition: all .1s;\n}\n\n."+Et+"{\n  font-size: medium;\n  line-height: 1;\n  direction: ltr;\n  text-align: left;\n  text-align: start;\n  font-style: normal;\n  font-weight: 400;\n  text-decoration: none;\n  list-style-type: disc\n}\n\n."+Vi.CUSTOM_LINK_LINK+"{\n  cursor: pointer;\n  text-transform: uppercase;\n  font-weight: 600\n}\n\n."+Vi.CUSTOM_LINK_LINK+":hover{\n  text-decoration: underline\n}\n\n."+Vi.CUSTOM_LINK_BUTTON+"{\n  text-transform: uppercase;\n    -ms-touch-action: manipulation;\n    touch-action: manipulation;\n    font-weight: 600;\n    border-radius: 4px;\n    box-shadow: 1px 1px 1px grey;\n    cursor: pointer;\n    background-color:#"+qi+"\n}\n\n."+Vi.CUSTOM_LINK_BUTTON+":hover{\n  text-decoration: none;\n  box-shadow: 2px 3px 4px grey\n}\n\n."+Vi.CUSTOM_LINK+"."+Vi.CUSTOM_LINK_BUTTON+"."+Vi.CUSTOM_LINK_SMALL+"{\n  font-size: 13px;\n  padding: 4px 12px;\n}\n\n."+Vi.CUSTOM_LINK+"."+Vi.CUSTOM_LINK_BUTTON+"."+Vi.CUSTOM_LINK_MEDIUM+"{\n  font-size: 15px;\n  padding: 8px 16px;\n}\n\n."+Vi.CUSTOM_LINK+"."+Vi.CUSTOM_LINK_BUTTON+"."+Vi.CUSTOM_LINK_LARGE+"{\n  font-size: 18px;\n  padding: 12px 20px;\n}\n\n\n."+Vi."+Vi.CUSTOM_LINK_LINK+"."+Vi.CUSTOM_LINK_MEDIUM+"{\n  font-size: 15px;\n}\n\n."+Vi.CUSTOM_LINK+"."+Vi.CUSTOM_LINK_LINK+"."+Vi.CUSTOM_LINK_LARGE+"{\n  font-size: 18px;\n}\n\n."+Vi.DISABLED+" {\n  opacity: 0.5;\n}\n  ")),Zi.forEach((function(t){return $i(e,void 0,void 0,(function(){return Xi(this,(function(e){switch(e.label){case 0:return[4,oo(t)];case 1:return e.sent(),[2]}}))}))})),[2]}))}))}function co(e,t){Ji=t,(Zi=e)&&0!==Zi.length&&so()}var uo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},lo=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function fo(e){return uo(this,void 0,void 0,(function(){return lo(this,(function(t){switch(t.label){case 0:return[4,Br()];case 1:return t.sent()||e&&!Ke().messaging.isSupported()?[2,!1]:e||(self?"PushManager"in self&&"Notification"in self&&PushSubscription.prototype.hasOwnProperty("getKey"):navigator.cookieEnabled&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&PushSubscription.prototype.hasOwnProperty("getKey"))?[2,!0]:[2,!1]}}))}))}var po=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ho=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},bo={website_id:""},vo="1.13.6-refresh-fb-token",wo="https://report.najva.com/version";function _o(){return po(this,void 0,void 0,(function(){var e;return ho(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,t(wo+"?"+new URLSearchParams({version_type:"script",version:vo,website_id:bo.website_id}),{method:"GET",headers:{"Content-Type":"text/plain",Accept:"text/plain"}})];case 1:return n.sent(),[4,Ae(v.LastScriptReportedVersion,vo)];case 2:return n.sent(),[3,4];case 3:throw e=n.sent(),l(a.REPORT_SCRIPT_VER(){return ho(this,(function(t){switch(t.label){case 0:return bo=e,[4,De(v.LastScriptReportedVersion)];case 1:return t.sent()===vo?[3,3]:[4,_o()];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))}function yo(e,t){return new Promise((function(n,r){var i=document.createElement("script");i.type="text/javascript",i.src=e,i.async=!0,i.onload=n,i.onerror=r,document[t].appendChild(i)}))}var go=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Eo=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1);continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};var So,ko="email";!function(e){e.Email="email",e.Phone="phone",e.Attribute="attribute",e.WebsiteVisitCount="website-visit-count",e.LastCookieSet="last-cookie-set",e.LastTimeCookieMatched="last-time-cookie-matched",e.LastShownTime="last-shown-time"}(So||(So={}));var To,Io,xo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Oo=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&aops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function No(){return xo(this,void 0,void 0,(function(){return Oo(this,(function(e){switch(e.label){case 0:return To?[3,2]:[4,A("najva-email-subscription-database",1,{upgrade:function(e){e.createObjectStore(ko,{keyPath:"name"})}})];case 1:To=e.sent(),e.label=2;case 2:return[2,To]}}))}))}function Do(e){return xo(this,void 0,void 0,(function(){var t,n,r,i;return Oo(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),[4,No()];case 1:return t=o.sent(),[4,(n=t.transaction(ko,"readwrite")).store.get(e)];case 2:return r=o.sent(),[4,n.done];case 3:return o.sent(),r?[2,r.value]:[2,r];case 4:throw i=o.sent(),l(a.DB_READ_FAILED,{key:e,objectStoreName:ko,browserErrorMessage:i.message,error:i});case 5:return[2]}}))}))}function Ao(e){return xo(this,void 0,void 0,(function(){var t,n,r;return Oo(this,(function(i){switch(i.label){case 0:return i.trys.push([0,8,,9]),[4,No()];case 1:return t=i.sent(),[4,(n=t.transactioent(),i.label=6;case 6:return[4,n.done];case 7:return i.sent(),[3,9];case 8:throw r=i.sent(),l(a.DB_UPDATE_FAILED,{key:e.name,value:e.value,objectStoreName:ko,browserErrorMessage:r.message,error:r});case 9:return[2]}}))}))}function Po(){window.dispatchEvent(new Event("najva-email-subscription-end"))}!function(e){e[e.close=0]="close",e[e.success=1]="success",e[e.fail=2]="fail"}(Io||(Io={}));var Lo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Co=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function jo(){return Lo(this,void 0,void 0,(function(){var e;return Co(this,(function(t){switch(t.label){case 0:return[4,Do(So.LastTimeCookieMatched)];case 1:return(e=t.sent())?[2,Ct((new Date).getTime(),new Date(e).getTime())<30]:[2,!1]}}))}))}var Mo="najva-email-cookie_matching_pixel";function Ro(){return Lo(this,void 0,void 0,(function(){var e;return Co(this,(function(t){switch(t.label){case 0:return document.querySelector("#"+Mo)?[3,2]:('\n      <img \n        id="'+Mo+'" \n        alt="'+Mo+'" \n        style="display: none!important;" \n        src="https://ua.yektanet.com/pixel?id=njv-email"\n      />\n    ',(e=Lt('\n      <img \n        id="najva-email-cookie_matching_pixel" \n        alt="najva-email-cookie_matching_pixel" \n        style="display: none!important;" \n        src="https://ua.yektanet.com/pixel?id=njv-email"\n      />\n    '))&&document.body.appendChild(e),[4,Ao({name:So.LastTimeCookieMatched,value:(new Datfunction Bo(){return Lo(this,void 0,voin r.sent()?[3,5]:[4,Do(So.Email)];case 2:return e=r.sent(),[4,Do(So.Phone)];case 3:return t=r.sent(),e||t?[4,Ro()]:[3,5];case 4:r.sent(),r.label=5;case 5:return function(e){window.addEventListener("najva-email-subscription-end",e)}((function(){return Lo(n,void 0,void 0,(function(){return Co(this,(function(e){switch(e.label){case 0:return[4,Ro()];case 1:return e.sent(),[2]}}))}))})),[2]}}))}))}var Uo=n(3379),Fo=n.n(Uo),Wo=n(449),Ko={insert:"head",singleton:!1};Fo()(Wo.Z,Ko);Wo.Z.locals;var Go=function(){return(Go=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},zo=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Vo=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.lengtho=[}}},Ho=function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},qo=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ho(arguments[t]));return e};function Yo(){return zo(this,void 0,void 0,(function(){var e;return Vo(this,(function(t){switch(t.label){case 0:return[4,Do(So.WebsiteVisitCount)];case 1:return(e=t.sent())||(e=0),e=parseInt(e.toString(),10),[4,Ao({name:So.WebsiteVisitCount,value:e+1})];case 2:return t.sent(),[2]}}))}))}var $o=!1;function Xo(t){function n(n){return zo(this,void 0,void 0,(function(){var r,i=this;return Vo(this,(function(o){switch(o.label){case 0:$o=!0,o.label=1;case 1:if(o.trys.push([1,5,,6]),!t.website_policy.email_enabled)return[3,4];if(!n||"object"!=typeof n||0===Object.keys(n).length)throw new Error("Unexpected input: "+n);return Object.keys(n).forEach((function(e){if(e!==So.Email&&e!==So.Phone&&e!==So.Attribute)throw new Error("Unexpected field name: "+e+". Please provide a valid field name: "+So.Email+" | "+So.Phone+" | "+So.Attribute);var t=n[e];if(!t)throw new Erfor field: "+e+". "+b.required.en);if(e!==So.Attribute&&!function(e,t){switch(e){case f.email:return/^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)+$/.test(h(t));case f.phone:return/^(0|\+98|0098)?9\d{9}$/.test(h(t));case f.required:return Boolean(t);default:throw new Error("please provide a valide validationType: "+Object.keys(b).map((function(e){return e})).join(" | "))}}(f[e],t.toString()))throw new Error("Unexpected field value. "+b[e].en)})),[4,Object.keys(n).reduce((function(e,t){return zo(i,void 0,void 0,(function(){var r,i;return Vo(this,(function(o){switch(o.label){case 0:return[4,e];case 1:return(r=o.sent())?[3,3]:[4,Do(t)];case 2:return i=o.sent(),t!==So.Attribute?[2,Promise.resolve(r||n[t]!==i)]:[2,Promise.resolve(r||JSON.stringify(n[t])!==JSON.stringify(i))];case 3:return[2,e]}}))}))}),Promise.resolve(!1))];case 2:return o.sent()?[4,e("https://email.najva.com/v1/user-management/emails/identify/"+t.najva_settings.account_id+"/",{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"},credentials:"include"}).then((function(){return Promise.all(qo(Object.keys(n).map((function(e){var t=n[e];return t&&e!==So.Attribute?Ao({name:e,value:t.toString()}):t&&"string"!=typeof t?Ao({name:So.Attribute,value:t}):Promise.resolve()})),[Ao({name:So.LastCookieSet,value:(new Date).toISOString()})]))})).then(Po).catch((function(e){throw l(a.IDENTIFY_EMAIL_SUBSCRIBER_FAILED,{error:e})}))]:[3,4];case 3:o.sent(),o.label=4;case 4:return $o=!1,[3,6];case 5:throw r=o.sent(),$o=!1,l(a.ADD_EMAIL_SUBSCRIBER_IDENTIFIER_FAILED,{error:r});case 6:return[2]}}))}))}return window.dispatchEvent(new CustomEvent("najva-subscriber-identify",{detail:n})),window.Najva=Go(Go({},window.Najva),{identifyEmailSubscriber:n}),n}function Jo(e){return zo(this,void 0,void 0,(function(){var t,n,r,i,o,a;return;case 1:return(t=s.sent())&&Ct((new Date).getTime(),new Date(t).getTime())>30?(n=Xo(e),[4,Promise.all([Do(So.Email),Do(So.Phone),Do(So.Attribute)])]):[3,3];case 2:r=Ho.apply(void 0,[s.sent(),3]),i=r[0],o=r[1],a=r[2],n({email:i,phone:o,attribute:a||{}}),s.label=3;case 3:return[2]}}))}))}var Zo=null,Qo=null;function ea(){Zo&&(Zo.style.display="none"),Qo&&(Qo.style.display="none")}var ta="https://van.najva.com";function na(e){return zo(this,void 0,void 0,(function(){var t,n,i;return Vo(this,(function(o){switch(o.label){case 0:(Zo=Lt('<div class="najva-email-backdrop"></div>')).onclick=ea,t="",n="",o.label=1;case 1:return o.trys.push([1,4,,5]),[4,Do(So.Email)];case 2:return n=o.sent()||"",[4,Do(So.Phone)];case 3:return t=o.sent()||"",[3,5];case 4:return o.sent(),[3,5];case 5:return(i=Lt('\n    <iframe \n      title="Najva Email Subscription Form"\n      src="https://van.najva.com/static/cdn/email/email-iframe.html?v='+r()+'"\n      name="najva-email"\n    ></iframe>\n  ')).onload=function(){i.contentWindow&&i.contentWindow.postMessage({config:e,phone:t,email:n},ta)},(Qo=Lt('<div class="najva-email-container"></div>')).appendChild(i),document.body.appendChild(Zo),document.body.appendChild(Qo),[2]}}))}))}function ra(e){return zo(this,void 0,void 0,(function(){var t,n,r,i=this;return Vo(this,(function(o){switch(o.label){case 0:return[4,e.email_settings.fields.reduce((function(e,t){return zo(i,void 0,void 0,(function(){var n,r,i;return Vo(this,(function(o){switch(o.label){case 0:return[4,e];case 1:return n=o.sent(),t.key!==So.Email?[3,3]:[4,Do(So.Email)];case 2:return r=o.sent(),[2,Promise.resolve(Boolean(r)&&n)];case 3:return t.key!==So.Phone?[3,5]:[4,Do(So.Phone)];case 4:return i=o.sent(),[2,Promise.resolve(Boolean(i)&&n)];case 5:return[2,e]}}))}))}),Promise.resolve(!0))];case 1:return t=o.sent(),[4,Do(So.LastShownTime)];case 2:return n=o.sent(),r=n?Ct((new Date).getTime(),new Date(n).getTime()):0,!e.website_policy.email_enabled||$o||t||e.email_settings.affected_urls&&!zi(e.email_settings.affected_urls.operation,e.email_settings.affected_urls.url_matchings)||n&&!(r>(e.email_settings.show_interval||e.najva_settings.dismiss_cookie_days))?[2,!1]:[2,!0]}}))}))}function ia(e){return zo(this,void 0,void 0,(function(){var t,n;return Vo(this,(function(r){switch(r.label){case 0:return r.trys.push([0,11,,12]),[4,Yo()];case 1:return r.sent(),[4,ra(e)];case 2:return r.sent()?[4,Do(So.WebsiteVisitCount)]:[3,7];case 3:return t=r.sent(),[4,yn(e.email_settings.show_condition,t?Number(t):1)];case 4:return r.sent(),[4,na(e)];case 5:return r.sent(),[4,Ao({name:So.LastShownTime,value:(new Date).toISOString()})];case 6:r.sent(),function(){var e=this;window.addEventListener("message",(function(t){return zo(e,void 0,void 0,(function(){var e,n,r,i,o;return Vo(this,(function(a){switch(a.label){case 0:if(t.origin!==ta)return[3,6];switch(null===(i=t.data)||void 0===i?void 0:i.action){case Io.close:return[3,1];case Io.success:return[3,2];case Io.fail:return[3,4]}return[3,5];case 1:return ea(),[3,6];case 2:return e=null===(o=t.data)||void 0===o?void 0:o.submitedData,[4,Promise.all(qo([Ao({name:So.LastCookieSet,value:(new Date).toISOString()})],Object.keys(e).map((function(t){var n=e[t];return n?t!==So.Attribute?Ao({name:t,value:n.toString()}):Ao({name:So.Attribute,value:n}):Promise.resolve()}))))];caJo(e)];case 8:r.sent(),r.label=9;case 9:return[4,Bo()];case 10:return r.sent(),[3,12];case 11:throw n=r.sent(),l(a.INIT_EMAIL_FAILED,{error:n});case 12:return[2]}}))}))}var oa=function(){return(oa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},aa=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},sa=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function ca(e){returng_sender_id})]:[2];case 2:return r.sent(),n=null,t?[4,tr(e)]:[3,4];case 3:n=r.sent(),function(e,t){mt=e,vt=t;try{mt.isNativeMode&&(Ke().initializeApp({messagingSenderId:e.messaging_sender_id}),Ke().messaging().useServiceWorker(vt)),window.localStorage.removeItem("najva-reload-counter")}catch(e){throw l(a.FIREBASE_INITIALIZATION_FAILED,{firebaseErrorMessage:e.message,error:e})}}({messaging_sender_id:e.messaging_sender_id,isNativeMode:t},n),vn({website_id:e.najva_settings.website_id,api_key:e.najva_settings.api_key,isNativeMode:t},n),Ci({show_backdrop:e.najva_settings.show_backdrop,show_backdrop_mobile:e.najva_settings.show_backdrop_mobile,backdrop_text:e.najva_settings.backdrop_text,website_policy:e.website_policy}),r.label=4;case 4:return[4,cr({website_id:e.najva_settings.website_id.toString(),campaign_id:e.najva_settings.campaign_id.toString(),api_key:e.najva_settings.api_key})];case 5:return r.sent(),[4,Ln({website_id:e.najva_settings.website_id.toString(),campaign_id:e.najva_settings.campaign_id,api_key:e.najva_settings.api_key,najva_subdomain:e.najva_settings.najva_subdomain,without_popup:e.najva_settings.without_popup,request_permission:e.najva_settings.request_permission,isNativt=this;return Rn(this,(function(n){switch(n.label){case 0:return Bn=e,[4,Un()];case 1:return n.sent()?[3,4]:[4,jn()];case 2:return n.sent()?[4,Fn(Bn.najva_subdomain)]:[3,4];case 3:n.sent(),n.label=4;case 4:return Tn((functioid 0,void 0,(function(){return Rn(this,(function(e){switch(e.label){case 0:return[4,Fn(Bn.najva_subdomain)];case 1:return e.sent(),[2]}}))}))})),[2]}}))}))}({najva_subdomain:e.najva_settings.najva_subdomain}),[4,Jn({location_permission:e.najva_settings.location_permission,najva_subdomain:e.najva_settings.najva_subdomain,isNativeMode:t})];case 7:return r.sent(),function(e){fr=e}({website_id:e.najva_settings.website_id}),li({show_bell:e.najva_settings.show_bell,show_bell_in_mobile:e.najva_settings.show_bell_in_mobile,bell_direction:e.najva_settings.bell_direction,tooltip_direction:e.najva_settings.tooltip_direction,bell_color_hover:e.najva_settings.bell_color_hover,bell_color:e.najva_settings.bell_color,bell_tooltip:e.najva_settings.bell_tooltip,without_popup:e.najva_settings.without_popup,isNativeMode:t}),co(e.custom_links?e.custom_links:[],n),function(e){Fr(this,void 0,void 0,(function(){var t;return Wr(this,(function(n){switch(n.label){case 0:return Kr=e,[4,Yr()];case 1:return n.sent()?[4,De(v.VisitCount)]:[3,5];case 2:return t=n.sent(),[4,yn(Kr.request_permission,t?Number(t):1)];case 3:return n.sent(),[4,qr()];case 4:n.sent(),n.label=5;case 5:return[2]}}))}))}({request_icon:e.najva_settings.request_icon,request_text:e.najva_settings.request_text,request_description:e.najva_settings.request_description,denied_text:e.najva_settings.denied_text,accept_text:e.najva_settings.accept_text,without_popup:e.najva_settings.without_popup,with_popup:e.najva_settings.with_popup,dismiss_cookie_days:e.najva_settings.dismiss_cookie_days,request_permission:e.najva_settings.request_permission,isNativeMode:t}),[4,mo({website_id:e.najva_settings.website_id.toString()})];case 8:return r.sent(),[2]}}))}))}!function(){aa(this,void 0,void 0,(function(){var e,t;return sa(this,(function(n){switch(n.label){case 0:return[4,Re()];case 1:return Xo(e=n.sent()),ia(e).catch(console.error),function(e){return go(this,void 0,void 0,(function(){var t;return Eo(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),e.website_policy.tag_enabled?[4,yo("https://cdn.yektanet.com/rg_woebegone/scripts_v4/"+e.najva_settings.app_id+"/complete.js","head")]:[3,2];case 1:n.sent(),n.label=2;case 2:return[3,4];case 3:return t=n.sent(),l(a.LOAD_YEKTANET_ANALYTICS_SCRIPT_FAILED,{appId:(null==e?void 0:e.najva_settings.app_id)||"failed to load config --\x3e appId: -",error:t}),[3,4];case 4:return[2]}}))}))}(e).catch(console.error),[4,ca(e)];case 2:return n.sent(),t={subscribe:Cn,hasSubscribed:jn,addAttribute:dr,getAttributes:pr,deleteAttribute:hr},window.Najva=oa(oa({},window.Najva),t),window.dispatchEvent(new Event("najva-execution-end")),[2]}}))}))}()})()})();