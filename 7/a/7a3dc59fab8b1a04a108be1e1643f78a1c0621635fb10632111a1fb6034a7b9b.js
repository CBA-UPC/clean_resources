(function(){var e=function(e){this.container=e.container,this.adData=e.adData||[],this.container&&this.container.length&&this.adData&&this.adData.length&&this.init()};e.prototype.init=e.prototype.getXYAxis=function(e,t){var n=W(t).getXY()||[],r=n[0],i=n[1];return[parseInt(e.pageX-r),parseInt(e.pageY-i)]},e.prototype.updateStamp=function(e,t,n,r){if(!n.clktk||!n.curl)return;var i,s,o=W(t).attr("href")?W(t):W(t).query("a"),u=(new Date).getTime(),a=this.getXYAxis(e,t),f=a[0],l=a[1],c=W(t).parentNode().getRect(),h=c.width,p=c.height;r==="start"?(i=n.clktk.replace(/__EVENT_TIME_START__/g,u).replace(/__OFFSET_X__/g,f).replace(/__OFFSET_Y__/g,l).replace(/__ADSPACE_W__/g,h).replace(/__ADSPACE_H__/g,p),s=n.curl.replace(/__EVENT_TIME_START__/g,u).replace(/__OFFSET_X__/g,f).replace(/__OFFSET_Y__/g,l).replace(/__ADSPACE_W__/g,h).replace(/__ADSPACE_H__/g,p)):r==="end"?(i=W(t).attr("data-clktk").replace(/__EVENT_TIME_END__/g,u),s=o.attr("href").replace(/__EVENT_TIME_END__/g,u)):(i=n.clktk,s=n.curl),o.attr("data-clktk",i),o.attr("href",s)},e.prototype.bindEvt=function(){var e=this;W(this.container).delegate("a","click",function(){if(!W(this).attr("data-clktk"))return;var e=W(this).attr("data-clktk").split("|");e&&e.length&&e.forEach(}),W(this.container).delegate("a","mousedown",function(t){var n=W(t.target).attr("data-index");e.adData[n]&&e.updateStamp(t,W(this),e.adData[n],"start")}),W(this.container).delegate("a","mouseup",function(t){var n=W(t.target).attr("data-index");e.adData[n]&&e.updateStamp(t,W(this),e.adData[n],"end")})},window.logAdclkSender=e})();(function(){function e(e,t){this.pubbleEle=W(e),this.parentNode=this.pubbleEle.parentNode(),this.conf=t||{},this.data=this._setData(),this.cssLoaded=!1,this._init()}e.prototype._init=function(){if(this.data.text.length<4)return;this._render(),this._animate()},e.prototype._setData=function(){var e=this.pubbleEle[0].innerText.split("").slice(0,4),t=this.pubbleEle[0].getAttribute("href"),n=this.pubbleEle[0].getAttribute("left-pos")||this.parentNode[0].clientWidth+8;return{text:e||"",url:t||"javascript:void(0);",left:n||0}},e.prototype._render=function(){this.cssLoaded||(qboot.load.css(this._cssStyle(),"pubble-shape-style"),this.cssLoaded=!0),W(this._htmlTpl().tmpl(this.data)).appendTo(this.parentNode),this.pubbleEle.removeNode()},e.prototype._animate=function(){var e=this.parentNode.query(".pubble-shape-wrap"),t=e.query(".white-red-font1"),n=e.query(".white-red-font2"),r=e.query(".white-red-font3"),i=e.query(".white-red-font4"),s=e.query(".red-white-font1"),o=e.query(".red-white-font2"),u=e.query(".red-white-font3"),a=e.query(".red-white-font4"),f=14,l=14,c=80,h=function(){var e=0,r=function(){e<f?(e+=1,t.css({width:e+"px"}),n.css({width:f-e+"px",left:f+e+"px",textIndent:-e+"px"}),setTimeout(r,c)):p()};t.css({height:l+"px",width:0}),u.css({height:l+"px",width:0}),r()},p=function(){var e=0,t=function(){e<l?(e+=1,a.css({height:e+"px"}),n.css({height:e+"px"}),setTimeout(t,c)):d()};n.css({width:f+"px",height:0,left:f+"px",textIndent:0}),t()},d=function(){var e=0,t=function(){e<f?(e+=1,a.css({width:f-e+"px"}),u.css({width:e+"px",left:f-e+"px",textIndent:e-f+"px"}),setTimeout(t,c)):v()};t()},v=function(){var e=0,n=function(){e<l?(e+=1,u.css({height:l-e+"px"}),t.css({height:l-e+"px"}),setTimeout(n,c)):h()};r.css({width:f+"px"}),a.css({width:f+"px",height:0}),n()};setTimeout(1e3)},e.prototype._htmlTpl=e.prototype._cssStyle=function(){return[".pubble-shape-wrap {width: 28px; height: 28px; padding: 1px 0 1px 2px; border: 1px solid #ff9b1b; background-color: #fff; -moz-border-radius: 2px; -webkit-border-radius: 2px; border-radius: 2px; position: absolute; left: 78px; top: 2px; z-index: 2;}",'.pubble-shape-wrap::before, .pubble-shape-wrap::after {display: block; content: ""; position: absolute; top: 50%; margin-top: -6px; width: 0; height: 0; border-width: 6px; border-style: dashed solid dashed dashed; border-color: transparent #fff transparent transparent;}',".pubble-shape-wrap::before { left: -12px; border-color: transparent #ff9b1b transparent transparent; }",".pubble-shape-wrap::after { left: -11px; border-color: transparent #fff transparent transparent; }",".pubble-shape-wrap .cont { display: block; width: 28px; height: 28px; font-size: 12px; line-height: 14px; white-space: nowrap; position: relative; }",".pubble-shape-wrap .font {position: absolute; width: 50%; height: 14px; overflow: hidden; font-weight: normal;}",".pubble-shape-wrap .red-white-font {color: #fff; background: #ee3300;}",".pubble-shape-wrap .white-red-font {color: #ee3300; background: #fff;}",".pubble-shape-wrap .red-white-font1 {top: 0; left: 0;}",".pubble-shape-wrap .red-white-font2 {top: 0; left: 50%;}",".pubble-shape-wrap .red-white-font3 {width: 0; top: 50%; left: 50%;}",".pubble-shape-wrap .red-white-font4 {height: 0; top: 50%; left: 50%;}",".pubble-shape-wrap .white-red-font1 {width: 0; left: 0; top: 0; }",".pubble-shape-wrap .white-red-font2 {left: 50%; top: 0; }",".pubble-shape-wrap .white-red-font3 {left: 0; top: 50%; }",".pubble-shape-wrap .white-red-font4 {left: 50%; top: 50%; }"].join("")},QW.NodeW.pluginHelper({sitesPubble:function(t,n){if(Dom.isElement(t)){var r=W(t).query(".sites-pubble-anim"),i={};for(var s=0;s<r.length;s++){var o=r[s];new e(o,qboot.mix({},i,n))}}}},"opreator")})();(function(){function e(){var e=document.getElementById("sites-lib-subpage"),t=e.querySelectorAll(".sites-lib-title");for(var n=0;n<t.length;n++){var r=t[n].querySelector(".sites-lib-site-text span").innerText||"",i=hao360.md5(r).substring(8,24);t[n].setAttribute("class-id",i)}}try{W("#sites-lib-flow").sitesPubble()}catch(t){alert(t)}e()})();(function(){function e(){this.init()}e.prototype.TYPE_ITEM_NUM=1,e.prototype.init=function(){function t(){if(window.IGUESS_2020.renderStatus===!1)return;window.IGUESS_2020.renderStatus===undefined?setTimeout(t,500):(e.SITES_ITEM_NUM=window.IGUESS_2020.tagnum||0,e.TYPE_ITEM_NUM=window.IGUESS_2020.cnum||1,e.sendshowLog(),e.bindEvt())}var e=this;this.logType={click:2,show:4},this.iguessWrap=W("#iguess-container-2020"),this.iguessSite=W("#famous-section"),t()},e.prototype.sendshowLog=function(e){var t=window.IGUESS_2020.guess,n=[];for(var r=0;r<this.TYPE_ITEM_NUM;r++){var i=t[r];if(i.asin&&i.asin.length>0)for(var s=0;s<i.asin.length;s++)logPureSender(i.asin[s]);var o=i.sites,u=i.type_item&&i.type_item.id;for(var a=0;a<this.SITES_ITEM_NUM;a++){var f="";o[a].aid?f=[u,o[a].aid,2].join("_"):f=[u,o[a].id,1].join("_"),n.push(f)}}n.length>0&&this.sendNormalLog(this.logType.show,n)},e.prototype.sendNormalLog=function(e,t){var n=this.iguessWrap.attr("data-trackhost"),r={jzqchl:2,bidid:this.iguessWrap.attr("data-bidid"),mid:hao360.mid,type:e,p:Object.isArray(t)?t.join(","):t};if(!r.p)return;var i=[];for(var s in r)i.push(s+"="+encodeURIComponent(r[s]));var o=n+(n.indexOf("?")>-1?"&":"?")+i.join("&");logPureSender(o)},e.prototype.bindEvt=function(){var e=this;this.iguessWrap.delegate("a","click",function(t){var n=e.link4Log(t.target);e.sendNormalLog(e.logType.click,n);var r=W(t.target).attr("clk");r&&(hao360.isHttps()&&(r=r.replace(/^http:/ig,"https:")),logPureSender(r))}),this.iguessSite.delegate("a","click",function(t){if(!e.checkOpsId(W(t.target).attr("id")))return;var n=e.link4Log(t.target);e.sendNormalLog(e.logType.click,n);var r=W(t.target).attr("clk");r&&(hao360.isHttps()&&(r=r.replace(/^http:/ig,"https:")),logPureSender(r))})},e.prototype.link4Log=function(e){var t=W(e).attr("typeid"),n=W(e).attr("siteid"),r=W(e).attr("aid");return r?[t,r,2].join("_"):[t,n,1].join("_")},e.prototype.checkOpsId=function(e){for(var t=0;t<window.IGUESS_2020.opsIds.length;t++){var n=window.IGUESS_2020.opsIds[t];if(n===e)return!0}return!1};var t=new e})();(function(){.prototype.init=function(){function t(){if(window.HOTSITE_MEDIAV_2020.renderStatus===!1)return;window.HOTSITE_MEDIAV_2020.renderStatus===undefined?setTimeout(t,500):e.bindEvt()}var e=this;this.mediavWrap=W("#hotsitemediav-container-2020"),this.mediavSite=W("#famous-section"),t()},e.prototype.bindEvt=function(){new logAdclkSender({container:this.mediavWrap,adData:HOTSITE_MEDIAV_2020.ads}),new logAdclkSender({container:this.mediavSite,adData:HOTSITE_MEDIAV_2020.ads})},new e})();(function(){var e=W("#sites-lib-classify"),t=W("#mysite-section"),n=W("#mysite-list"),r=".sites-lib-flow-title";e.delegate(r,"click",function(){var t=W(this),r=t.attr("id").split("-")[0];if(e.hasClass(r))return;(new AppData("api.hao.360.cn")).set("mysite-active",r);if(r==="mysite"&&n.getHtml().trim()===""){var i=hao360.g("mysite-empty-template").innerHTML;n.setHtml(i)}LogHub&&LogHub.behavior("site-tab-switch",r);var s=["classify","mysite","eleven"],o="";s.every(function(t){return e.hasClass(t)?(o=t,!1):!0}),e.toggleClass(o,r)}),t.delegate("#mysite-section-btn-more","click",})();window.userFeature&&window.userFeature.is("hotsite",function(){var e={data:new AppData("api.hao.360.cn"),name:"popular-website",value:"1",check:function(){return this.data.get(this.name)!==this.value}};e.check()&&qboot.load("sitePlus",function(){})});(function(){var e='<div>            <span>{tag}</span>            <a href="{url}">{title}</a>        </div>',t=function(){var e={};return (),n={tpl:e,dataAdapter:function(e){var t=[];for(var n=0;n<e.length;n++){var r=e[n];t.push({title:r.t,url:r.pcurl,tag:r.attr&&r.attr[0]&&r.attr[0].content})}return t},getHTML:function(e,t){var n=[];for(var r=0;r<t.length;r++)n.push(R.tmpl(e,t[r]));return n.join("")},init:function(e){var n=e.tpl||this.tpl,r=W(e.container),i=this.dataAdapter(e.data),s=this.getHTML(n,i);t(e.container,,r.html(s)}};window.govNewsIsOn&&window.govNewsIsOn["infoflow-right"]&&qboot.events.on("infoflow-right-gov-news",})();(function(){function t(){qboot.load("mysitePanel"),W("#doc-view-front").insertAdjacentHTML("afterbegin",e)}var e=['<div id="mysite" class="g-hide">','<div class="mysite-title gclearfix">','<div class="left"></div>','<div class="right">','<h2 class="title">\u7ba1\u7406\u6211\u7684\u7f51\u5740</h2>','<span class="intro">\u4f60\u6709\u4ec0\u4e48\u5efa\u8bae\uff0c\u6216\u8005\u9047\u5230\u4ec0\u4e48\u95ee\u9898\uff0c<a href="http://feedback.hao.360.cn/" class="js-feedback-sign">\u70b9\u6b64\u544a\u8bc9\u6211\u4eec>></a></span>',"</div>","</div>",'<div class="mysite-custom gclearfix">','<div class="left">','<h3 class="subtitle">\u6211\u6dfb\u52a0\u7684\u7f51\u5740<span class="arrow arrow-left"><span class="border"></span><span class="bg"></span></span></h3>',"</div>",'<div class="right">','<div class="mysite-list-null" style="display:none">\u4f60\u6dfb\u52a0\u7684\u7f51\u5740\u4f1a\u663e\u793a\u5728\u8fd9\u91cc\uff0c\u5feb\u5230\u4e0b\u9762\u6dfb\u52a0\u5427</div>','<ul class="edit-mysite gclearfix" id="edit-mysite">','<li class="btn-add-site btn-mini">','<div class="item">','<a href="" class="btn">\u6dfb\u52a0\u7f51\u5740</a>',"</div>","</li>","</ul>","</div>","</div>",'<div class="mysite-add gclearfix">','<div class="left">','<h3 class="subtitle">\u624b\u52a8\u6dfb\u52a0<span class="arrow arrow-left"><span class="border"></span><span class="bg"></span></span></h3>',"</div>",'<div class="right">','<div class="form">',"<form>","<fieldset>","<legend>\u6dfb\u52a0\u7f51\u5740</legend>",'<div class="txt">\u7f51\u7ad9\u540d\u79f0\uff1a</div>','<div class="site-input site-name">','<input type="text" name="sitename" id="mysite-name-add" placeholder="\u5982\uff1a360\u641c\u7d22" />',"</div>",'<div class="txt txt-url">\u7f51\u5740\uff1a</div>','<div class="site-input site-url">','<input type="text" name="siteurl" id="mysite-url-add" placeholder="\u5982\uff1awww.so.com" />',"</div>",'<button id="btn-site-add" type="submit">\u6dfb\u52a0</button>',"</fieldset>","</form>","</div>","</div>","</div>",'<div class="mysite-reco gclearfix">','<div class="left">','<h3 class="subtitle">\u4ece\u70ed\u95e8\u4e2d\u6dfb\u52a0<span class="arrow arrow-left"><span class="border"></span><span class="bg"></span></span></h3>','<div class="tab">','<ul class="gclearfix" id="tab-list">',"</ul>","</div>","</div>",'<div class="right">','<div id="reco-list" class="reco-list">','<div class="loading">\u52a0\u8f7d\u4e2d...</div>',"</div>","</div>","</div>",'<div class="js-tips">','<div class="g-tips g-tips-top success tips-success" style="top:16px;left:62px;">','<div class="cont">\u6dfb\u52a0\u6210\u529f</div>',"</div>",'<div class="g-tips g-tips-top tips-cancel" style="top:16px;left:62px;">','<div class="cont">\u5df2\u6dfb\u52a0\uff0c\u70b9\u51fb\u53d6\u6d88</div>',"</div>",'<div class="g-tips g-tips-top error tips-error" style="top:16px;left:428px;">','<div class="cont">\u7f51\u7ad9\u540d\u79f0\u8fc7\u957f</div>',"</div>",'<div class="g-tips error tips-warning" style="top:147px;left:34px;">','<div class="cont">\u6682\u65f6\u53ea\u80fd\u6dfb\u52a0\u8fd9\u4e48\u591a\u7f51\u5740\u4e86</div>',"</div>","</div>",'<a href="" class="btn close-mysite" title="\u5173\u95ed">\u5173\u95ed</a>',"</div>"].join("");t()})();(function(e){var t=function(e){return Object.prototype.toString.call(e)==="[object Function]"},n=r=e("#tab-list"),i=e("#reco-list"),s=i.query(".loading"),o='<li class="{className} {type}" data-key="{key}"><a href="" onclick="return false;">{tab}<span class="mark">{type}</span></a></li>',u='<div class="line"><span class="split">\u2022</span><h3 class="title {type}"><span class="cont">{title}<span class="mark">{type}</span></span></h3></div>',a='<div class="g-tips g-tips-right tips-reco {display}" style="right:-{right}px"><div class="cont">{tip}</div><!--[if lte IE 7]><span class="arrow-border"></span><span class="arrow-background"></span><![endif]--></div>',f='<li data-sid="{sid}" class="{className}"><a href="{url}" class="{color}" data-nordr="true"><span class="name">{name}</span>'+a+"</a></li>",l="add-success",c={cache:{},DEFAULTKEY:"common",_filter:function(e,t){var r=[];for(var i=0,s=t.length;i<s;i++){var o=t[i];if(n(o)){var u=o[2],a=o[3];o=new SiteEnt(o[0],o[1])}u&&(o.color=u),e==o.sid&&(o.className=l),a&&(o.tip=a,o.display="show",o.right=a.byteLen()*6+16),o&&(r[i]=o)}return r},reFilterRecoSites:function(e,t,n){var r=function(e){e.removeClass(l)};n&&n=="add"&&(r=;for(var i=0,s=t.length;i<s;i++){var o=t.item(i);o.attr("data-sid")==e&&r(o)}},renderRecommendArea:function(e,n){var r=this,o=!1;typeof e=="object"?(n=e,e=this.DEFAULTKEY):n=n||{},setTimeout(function(){!o&&!n.preload&&(i.query(".reco").hide(),s.show())},500),mysiteService.getRecommendSites(e).then(function(i){if(n.preload)return;o=!0,s.hide();var u=i.current,a=u&&u.key,f=u&&u.url;r._renderRecommendTabs(i.category,e),r._renderRecommendSites(f,a),t(n.callback)&&n.callback()})},_renderRecommendTabs:function(e,t){if(this.cache.tab)return;var n=[];for(var i=0,s=e.length;i<s;i++){var u={},a=e[i];if(!a[1])continue;u.key=a[0],u.className="",u.key==t&&(u.className="cur"),u.type=a[2],u.tab=a[1];var f=R.tmpl(o,u);u.key==this.DEFAULTKEY?n.unshift(f):n.push(f)}r.html(n.join("")),this.cache.tab=!0},switchRecommendTab:function(e,t){var n=r.query("li");e&&(n.removeClass("cur"),r.query("li[data-key="+e+"]").addClass("cur")),t=t||function(){},this.renderRecommendArea(e,{callback:t})},_renderRecommendSites:function(e,t){var n=this;mysiteService.getCustomSites().then(function(r){var o=['<div class="reco" data-type="'+t+'">'];for(var a=0,l=e&&e.length;a<l;a++){var c=e[a][0],h=e[a][1];if(!c[0])continue;var p={};p.type=c[1],p.title=c[0];var d=R.tmpl(u,p);res=[d+'<ul class="gclearfix">'];if(r.length==0)h=n._filter(null,h);else for(var v=0,m=r.length;v<m;v++){var g=SiteEnt.getSid(r[v].url);h=n._filter(g,h)}for(var v=0,m=h.length;v<m;v++){if(!h[v].name)continue;res.push(R.tmpl(f,h[v]))}res.push("</ul>"),o.push(res.join(""))}o.push("</div>");var y=o.join("");i.query(".reco").hide(),s.hide(),i.html(i.html()+y),n.cache[t]='div[data-type="'+t+'"]'})},initRecommendArea:function(e){e=e||this.DEFAULTKEY,this.renderRecommendArea(e)}};window.mysiteRecommend=c})(W);(function(){function g(e,t){var n=null;t=="hover"?n=l:t=="click"&&(n=f,setTimeout(function(){n.hide()},p));var r=m(n[0]),i=m(W(".js-tips")[0]),s=m(e[0]),o=s.width,u=s.top-i.top-25,a=s.left-i.left+o/2-r.width/2;n.css({left:a+"px",top:u+"px"}).show()}function y(e,t){var n=W(".js-tips").getRect(),r=e.getRect(),i=r.top-n.top-25,o=r.left-n.left;c.query(".cont").html(t),c.css({left:o+"px",top:i+"px"}).show(),e.addClass(s),setTimeout(p);if(e.query("input[type=text]")[0]){var u=e.query("input[type=text]")[0];setTimeout(function(){u.focus()},20)}}function b(e){h.query(".cont").html(e);var t=m(h[0]).width,n=m(W(".js-tips")[0]).width,r=10,i=n/2-t/2;h.css({left:i+"px",top:r+"px"}).show(),setTimeout(function(){h.hide()},p)}function w(e){var t=[].concat(e);for(var n=0,r=t.length;n<r;n++)t[n].hide()}function E(e){var n=r.query(".site-name"),i=r.query(".site-url");switch(e){case t.NameIsNull:n[0].value="",y(n,"\u8bf7\u8f93\u5165\u7f51\u7ad9\u540d\u79f0");break;case t.UrlIsNull:i[0].value="",y(i,"\u8bf7\u8f93\u5165\u7f51\u5740");break;case t.NameLengthErr:y(n,"\u60a8\u8f93\u5165\u7684\u540d\u79f0\u8fc7\u957f");break;case t.UrlLengthErr:y(i,"\u60a8\u8f93\u5165\u7684\u7f51\u5740\u8fc7\u957f");break;case t.SiteIsExist:b("\u8be5\u7f51\u5740\u5df2\u5b58\u5728");break;case t.SidIsNull:alert("sid is null");break;case t.SiteIsNotExist:alert("site is not exist");break;default:alert("\u4fc4\u4e5f\u5e03\u5409\u5c9b\u662f\u80bf\u4e48\u56de\u4e8b\uff01")}}var e=new MysiteCache,t=e.ERRORCODE,n=qboot.mix,r=W("#mysite"),i="add-success",s="site-input-error",o=W("#edit-mysite"),u=W(".mysite-list-null"),a=W("#reco-list"),f=r.query(".tips-success"),l=r.query(".tips-cancel"),c=r.query(".tips-error"),h=r.query(".tips-warning"),p=3e3,d='<li style="display:{display}"><div class="item"><a href="{url}" class="site"><img src="{favicon}" class="favicon"><span>{name}</span></a><a href="###" class="btn delete-site" data-sid="{sid}" title="\u5220\u9664">\u5220\u9664</a></div></li>',v={_renderCustomSites:function(e){var t=this,r=e&&e.sid||null,i=e&&e.type||null;mysiteService.getCustomSites().then(function(e){var t=e.length,s=null,a=[];for(var f=0;f<t;f++){var l=n({},e[f]);l.name=l.name.encode4Html();if(r==l.sid&&i=="add"){s=f;var c=n({display:"none"},l);a.push(R.tmpl(d,c))}else a.push(R.tmpl(d,l))}var h=a.join("");o.html(h),t?(u.hide(),o.show()):(u.show(),o.hide());if(s!=null){var l=o.query("li").item(s);i=="add"&&l.fadeIn()}}).otherwise(},relateMysiteToRecommandsite:function(e,t,n){this._renderCustomSites({type:t,sid:e}),siteList=a.query("li"),mysiteRecommend.reFilterRecoSites(e,siteList,t),t=="add"&&n?W(document).tweet("mysite:add-site",{name:n.name,url:n.url,domain:n.domain}):t=="delete"&&W(document).tweet("mysite:delete-site",n.id)},addSite:function(n,r){var i=this,s=function(e){var t=r&&r.type||"click",s=e.res,o=e.res.sid;n.domain=s.domain,i.relateMysiteToRecommandsite(o,"add",n);var u=[];if(t=="form"){var a=r&&r.form||W("form")[0];a.sitename.value="",W(a.siteurl).val(""),a.sitename.focus(),u=[f,h,c]}else if(t=="click"){var l=r&&r.site;g(l,t),u=[h,c]}w(u)},o=e.isSiteFull()?b("\u6682\u65f6\u53ea\u80fd\u6dfb\u52a0\u8fd9\u4e48\u591a\u7f51\u5740\u4e86"):e.add(n,function(e){e.errCode==t.NoError?s(e):o(e)})},deleteSite:function(n){var r=this,i=MysiteCacheData.map[n]&&MysiteCacheData.map[n].id,s=MysiteCacheData.map[n]&&MysiteCacheData.map[n].name,o=function(){W(document).tweet("mysiteTweet:delete-site",{name:s}),r.relateMysiteToRecommandsite(n,"delete",{id:i}),w([f,h,c,l])};e.remove(n,},init:;window.CustomSites=v;var m=function(e){var t={position:"absolute",visibility:"hidden",display:"block"},n=return W(e).isVisible()?W(e).getRect():n(e,t,};r.delegate(".close-mysite","click",.delegate(".reco-list li a","click",function(e){e.preventDefault(),LogHub.behavior("mysite_2020","add-by-tuijian");var t=W(this),n=t.parentNode("li");if(n.hasClass(i)){var r=n.attr("data-sid");v.deleteSite(r)}else{var s={name:t.query(".name").html(),url:t.attr("href")};v.addSite(s,{type:"click",site:t})}}).delegate(".reco-list li a","mouseenter",function(e){var t=W(this);t.parentNode("li").hasClass(i)&&(w([f]),g(t,"hover"))}).delegate(".reco-list li","mouseleave",function(e){var t=W(this);t.hasClass(i)&&w(l)}).delegate(".tips-success","mouseenter",.delegate("#tab-list li","mouseenter",function(e){var t=W(this),n=t.attr("data-key");t.addClass("hover"),mysiteRecommend.renderRecommendArea(n,{preload:!0})}).delegate("#tab-list li","mouseleave",function(e){W(this).removeClass("hover")}).delegate("#tab-list li","click",function(e){e.preventDefault();if(W(this).hasClass("cur"))return;var t=W(this).attr("data-key");mysiteRecommend.switchRecommendTab(t,function(){w([f,h,c,l])})}).delegate(".mysite-add .site-input","keydown",function(e){W(this).hasClass(s)&&(w(c),W(this).removeClass(s))}),r.query("form").on("submit",function(e){e.preventDefault(),LogHub.behavior("mysite_2020","add-by-user");var t={name:W(this.sitename).val().trim(),url:W(this.siteurl).val().trim()};v.addSite(t,{type:"form",form:this})}),r.query("#btn-site-add").hover(function(e){W(this).addClass("hover")},function(e){W(this).removeClass("hover").removeClass("mousedown")}).on("mousedown",.on("mouseup",,o.delegate("li .delete-site","click",})();(function(){function u(){if(hao360.g("reco-site")){var e="recoSite_tips",t=escape(hao360.g("tips-reco-comment").innerHTML.trim());qboot.cookie.set(e,[3,t].join("|"),{expires:2592e6}),W("#tips-reco-site").hide(),W(document).tweet("page-height-resize")}}function a(){var e=W("#mysite-list li").length-1;if(e){LogHub&&LogHub.behavior("mysite_2020","hasData");var t=[],n=MysiteCacheData.map,r=/^http:\/\/tu.360.cn\/\w+$/,i=new MysiteCache,s=!1;for(var o in n){var u=n[o],a=u.type;if(!a||a=="0")s=!0,r.test(u.url)?a=2:a=1,i.modify(u.sid,{type:a});var f=encodeURIComponent(u.name)+"|"+encodeURIComponent(u.url)+"|"+a;t.push(f)}s&&R("mysite-list").reRender();var e=Math.ceil(t.length/10);for(var l=0;l<e;l++){var c=t.splice(0,10);LogHub.mysiteShow(c)}}}function f(){var e=new MysiteCache,t=MysiteCacheData.map;for(var n in t){var r=t[n];r.type==3&&e.remove(r.sid)}}var e=W("#sites-lib-classify"),t=W("#mysite"),n=!0,r=W("#mysite-list").attr("data-key"),i="site-input-error",s=function(){qboot.load("mysitequery"),s=function(){}},o={isShowed:!1,mask:null,resizeMaskPosition:function(){var e=W("body").getRect(),t=e.height+"px",n=e.width+"px";this.mask.css({height:t,width:n})},maskShow:function(){if(!this.isShowed){var e=W("#doc-view-front");if(Browser.ie6){var t=document.createElement("iframe");t.className="mask-iframe",e.appendChild(t)}var n=document.createElement("div");n.className="mask-panel",e.appendChild(n),this.isShowed=!0,this.mask=W(".mask-panel,.mask-iframe")}else this.mask.show();Browser.ie6&&(this.resizeMaskPosition(),W(window).on("scroll",this.resizeMaskPosition).on("resize",this.resizeMaskPosition))},maskHide:function(){this.mask.hide(),W(window).un("scroll",this.resizeMaskPosition).un("resize",this.resizeMaskPosition)},EscPress:open:function(){t.removeClass("g-hide"),t.query("form")[0].sitename.focus(),this.maskShow(),W(document).on("keydown",this.EscPress),W(document).tweet("mysite-panel-turn-on")},close:function(){W(".tips-warning,.tips-error").hide(),W(".site-input").removeClass(i),t.addClass("g-hide"),this.maskHide(),R("mysite-list").reRender(),setTimeout(100),W(document).un("keydown",this.EscPress),W(document).tweet("mysite-panel-turn-off")}};window.panelMysite=o,e.delegate(".btn-add-site .btn,.btn-add-site .hxd,.mysite-manage,.mysite-icon","click",function(e){e.preventDefault(),u(),LogHub.behavior("mysite_2020","btn-add"),W(document).tweet("mysite-editpanel-open")}).delegate("#tips-reco-site .btn-reco-site","click",function(e){e.preventDefault(),u();var t=W(this).attr("data-type");W(document).tweet("mysite-editpanel-open",{recoType:t})}).delegate(".btn-add-site","mouseenter",.delegate("#tips-reco-site .close","click",.delegate("#tips-reco-site","mouseenter",function(e){var t=W("#reco-site").attr("data-type");mysiteRecommend.switchRecommendTab(t,{preload:!0})}).delegate(".mysite-list .site","click",function(e){var t=W(this),n=t[0].innerText,r=t.attr("href"),i=t.attr("data-type"),s=encodeURIComponent(n)+"|"+encodeURIComponent(r)+"|"+i;LogHub.mysiteClk(s)}),W(document).receive("mysite-editpanel-open",function(e){n&&CustomSites.init(e.data&&e.data.recoType),n=!1,o.open(),s()}),a(),f()})();(function(e){var t=window.configHuodong&&configHuodong.mysite_tweet;if(!t)return;var n=new MysiteCache,r=qboot.cookie,i=t.name,s=W(".reco-info"),o=+(new Date(t.endTime)),u=+hao360.todayObj,a=o-u,f=[],l={filter:function(e){var t=MysiteCacheData.map,n=[];for(var r=0,i=e.length;r<i;r++){var s=e[r],o=SiteEnt.getSid(s.url),u=!0;for(var a in t)if(s.text==t[a].name||o==a){u=!1;break}u&&n.push(s)}return n},tweet:function(){var e=this;if(n.isSiteFull())return;mysiteService.getCommonUseSites().then(function(t){var u=MysiteCacheData.order.length,l=e.filter(t.coolsite),c=0;r.set(i,1,{expires:a});var h=new AppData("api.hao.360.cn",HAO_CONFIG.mysiteTweet.r);h.set(HAO_CONFIG.mysiteTweet.api,1,o),LogHub.behavior("mysiteTweet","add");if(l.length<1)return;LogHub.behavior("mysiteTweet","add-success");var p=[];for(var d=0,v=l.length;d<v;d++){var m=l[d],g={name:m.text,url:m.url,domain:m.domain,type:"2"};m.order==1?(n.unshift(g),c++):n.add(g),f.push(g);switch(m.url){case"http://tu.360.cn/5A":p.push("qq"),LogHub.behavior("tweetMark","qq");break;case"http://tu.360.cn/q3yg":p.push("renren"),LogHub.behavior("tweetMark","renren")}}p.length>0&&qboot.cookie.set("tweetMark",p.join("-"),{expires:2592e6});var y=l.length-c;for(var d=0,v=f.length;d<v;d++)setTimeout(function(e){return (f[d]),500*d);y>0&&(s.show(),s.query(".num").html(y)),R("mysite-list").reRender();var b=W(".mysite-list .item");for(var d=0;d<y;d++){var w=u+d+c;b.item(w).addClass("reco-auto")}})},tweetStatic:function(e,t){var r=this;if(n.isSiteFull())return;n.getAll(function(i){var s=i.res;for(var o=0,u=s.length;o<u;o++)s[o].type=="3"&&n.remove(s[o].sid);var a=r.filter(e),f=new AppData("api.hao.360.cn",HAO_CONFIG.mysiteTweet.r),l=f.get("mysiteBlack")||[];for(var o=0,u=a.length;o<u;o++){var c=a[o],h=!1;for(var p=0,d=l.length;p<d;p++)if(l[p]==c.text){h=!0;break}if(h)continue;var v={name:c.text,url:c.url,domain:c.domain,favicon:c.favicon,type:"3"};c.order==1?n.unshift(v):n.add(v)}t&&t()})}};window.mysiteTweet=l,W(document).receive("mysite-editpanel-open",,W("#mysite-section").delegate(".know","click",.delegate(".delete-site","click",function(e){e.preventDefault();var t=W(this).previousSibling("a.site").attr("href"),n=SiteEnt.getSid(t),r=MysiteCacheData.map[n]&&MysiteCacheData.map[n].id;CustomSites.deleteSite(n),W(this).parentNode("li").removeNode(),LogHub.behavior("mysiteTweet","delete"),W(document).tweet("mysiteTweet:delete-site",{id:r,sid:n})})})();(function(){
	if(location.protocol == 'https:'){
		return;
	}
	var mysiteTweetConf = window.configHuodong && configHuodong.mysite_tweet;

	if(!mysiteTweetConf){
		return;
	}
	var cookie = qboot.cookie,
		queryGuid = hao360.queryUrl(location.href,"guid"),
		isOn = queryGuid  ? 1 : 0,
		cookieTweet = mysiteTweetConf.name,	
		switchMysiteTweet = parseInt(mysiteTweetConf.isOn),	// 常用网址推荐阀门，1为打开推荐，0为关闭推荐
		startTime = +new Date(mysiteTweetConf.startTime),	// 推荐开始时间
		endTime = +new Date(mysiteTweetConf.endTime),	// 推荐结束时间
		now = +hao360.todayObj;

	var random = 1;
	if(!qboot.cookie.get('tweetSiteFlag')){
		qboot.cookie.set('tweetSiteFlag2',1,{expires:1000*3600*24*60});
		random = Math.random() < mysiteTweetConf.random;
	}else{
		LogHub.behavior('tweetSite','flag');
	}
	// 小流量测试，减缓式放量
	function putOnline(){
		var condition = switchMysiteTweet && now > startTime && now < endTime;
		var localFlag = !cookie.get(cookieTweet) && !new AppData('api.hao.360.cn', HAO_CONFIG.mysiteTweet.r).get(HAO_CONFIG.mysiteTweet.api);
		if((random && condition && localFlag) || isOn){
			mysiteTweet.tweet();
		}
	}

	putOnline();
})();(function(){function o(){t.delegate(".collapse","click",function(e){e.preventDefault(),t.hide(),n.fadeIn(300),r.set("front-news","v2"),qboot.events.fire("frontnews:collapse")}),n.delegate(".expand","click",function(e){e.preventDefault(),n.hide(),t.fadeIn(300),r.remove("front-news"),s&&r.set("front-news","v1"),qboot.events.fire("frontnews:expand")}),e.delegate(".front-news_inner a","click",u)}function u(){a("https://papi.look.360.cn/srv/c",{uid:hao360.mid||qboot.cookie.get("__guid")||qboot.cookie.get("__huid"),sign:"360_c109fef1",url:this.href,version:"",device:"2",net:"5",scene:"4900",refer_scene:"0",t:(new Date).getTime(),act:"click",channel:"",a:"",c:"",source:"",s:"",sid:"",ext:"",position:"",where:""})}function a(e,t){var e=e,n=new Image;n.src=e+"?"+qboot.encodeURIJson(t)}function f(){n.length===0?t.delegate(".front-news_inner a","click",u):(t.insertAdjacentHTML("beforeend",'<a href="###" class="collapse" target="_self" text="collapse"><i class="icon-hao360">&#xe904;</i></a>'),n.insertAdjacentHTML("beforeend",'<a href="###" class="expand" target="_self" text="expand"><i class="icon-hao360">&#xe903;</i></a>'),o()),s&&!r.get("front-news")&&r.set("front-news","v2")}var e=W(document),t=W("#front-news"),n=W("#front-news-min"),r=new AppData("api.hao.360.cn"),i=window.FrontNewsConf?window.FrontNewsConf.special:!0,s=!i;f()})();(function(){function r(t){this.conf=e({wrapEl:"#search",tabsEl:".tab>li",engsElWap:".eng-list",defaultCate:"webpage",defaultEng:"somulti",cateChangeEvent:"click",engChangeEvent:"click",tabsOnClass:"on"},t,!0),e(this,this.conf),this._init()}var e=QW.ObjectH.mix,t=QW.CustEvent.createEvents,n=ObjectH.isArray;r.UI=function(t){e(this,e(t,{kwEl:"#search-kw",sbtnEl:"#search-btn",lng-logo",formEl:"#search-form"}),!0),this._init()},r.UI.prototype={_init:function(){},selectTab:function(e){W(this.tabsEl+"[data-cate]",W(this.wrapEl)).removeClass(this.tabsOnClass),W(this.tabsEl+"[data-cate="+e+"]",W(this.wrapEl)).addClass(this.tabsOnClass)},updateForms:function(e,t,n){var r=n[0],i=n[1],s=n[5]||n[2]+"\u641c\u7d22",o=n[3],u=n[4],a=u.split(";"),f=W(this.formEl);if(!f&&W(this.kwEl,f))return;var l='<input type="hidden" name="$1" value="$2" />',c=e+"-"+t;W(".others-params input",f)bled=!0});if(W("."+c,f).length)W("."+c+" input",f).forEach(function(e){e.disabled=!1});else{var h=W('<div class="others-params" style="display:none"></div>'),p="";h.addClass(c),h.addClass("cates-"+e),a.forEach(function(e){var t=e.split(":");p+=l.replace("$1",t[0].encode4HtmlValue()).replace("$2",(t[1]||"").encode4HtmlValue())}),h.html(p),f.insert("afterbegin",h)}W(this.kwEl,f).attr("name",i).val(W(this.kwEl,f).val()).focus();var d=W(this.sbtnEl,f);d[0]&&d[0].nodeName.toLowerCase()=="button"?d[0].innerHTML=s:d.val(s),f.attr("action",r),W(this.logoShowEl,W(this.wrapEl)).length&&W(this.logoShowEl,W(this.wrapEl)).attr("className",t).attr("href",o).attr("title",n[2])},rmHiddenInputs:function(e,t){if(!W(this.formEl))return;var n=this;e.forEach(function(e){var r=W("."+t+"-"+e);r.length&&W(n.formEl).removeChild(r)})},rmTabs:function(e){n(e)||(e=[e]);var t=this;e.forEach(function(e){W(W(".cates-"+e),t.formEl).length&&W(t.formEl).removeChild(W(".cates-"+e))})},updateTabs:function(e,t){if(!e)return;var n=W(this.formEl);if(!n)return;var r=this;e.forEach(function(e,i){W(r.tabsEl+"[data-cate="+e+"]",W(r.wrapEl)).attr("data-cate",t[i]),W(".cates-"+e,n).toggleClass("cates-"+e,"cates-"+t[i])})}};var i=["change","catechange","error","update"];e(r.prototype,{_init:function(){this.cate=this.defaultCate,this.eng=this.defaultByCate[this.cate],this.engid=[this.cate,this.eng].join("-"),this.lastEngOfCate=e(this.defaultByCate,{}),this.lastEngOfCate[this.cate]=this.eng,t(this,i),this.ui=new r.UI(this.conf)},_onUpdate:function(e,t,n){e=="update"&&t&&this.ui.rmHiddenInputs(t,n)},_onUpdateCate:function(e,t,n){switch(e){case"removecate":this.ui.updateTabs(t,n)}},_onChangeCate:function(){this.ui.selectTab(this.cate)},_onChangeEng:function(){var e.eng];t)},getCate:function(){return this.cate},getEng:function(){return[this.cate,this.eng]},getIsLoadSug:function(e){if(!e)return!0;var t=this.wrapEl+" "+this.tabsEl+"[data-cate="+e+"]",n=W(t);return n.attr("data-sug")!=="no"},setCate:function(e,t,n){return e==this.cate&&!n||!this.engData[e]?(this.fire("error",{code:"301",data:{funcName:"setCate",cate:this.cate,eng:this.eng},msg:"\u9519\u8bef\u7684cate\u540d\u6216cate\u540d\u65e0\u53d8\u5316"}),this):(this.cate=e,this.setEng(t||this.lastEngOfCate[e],e),this.fire("catechange",{cate:this.cate,eng:this.lastEngOfCate[this.cate],isLoadSug:this.getIsLoadSug(e),data:this.engData[this.cate]})&&this._onChangeCate(),this)},setEng:function(e,t,n){var t=t||this.cate;return!e||this.engid==[t,e].join("-")&&!n?(this.fire("error",{code:"302",data:{funcName:"setEng",cate:this.cate,eng:this.eng},msg:"\u672a\u6307\u5b9a\u641c\u7d22\u5f15\u64ce\u540d\u6216\u6307\u5b9a\u7684\u641c\u7d22\u5f15\u64ce\u4e0e\u5f53\u524d\u6ca1\u53d8\u5316"}),this):!this.engData[t]||!this.engData[t][e]?(this.fire("error",{code:"404",data:{funcName:"setEng",cate:this.cate,eng:this.eng},msg:"\u6ca1\u6709\u8be5\u641c\u7d22\u5f15\u64ce"}),this):t!=this.cate?(this.setCate(t,e),this):(this.eng=e,this.engid=[t,e].join("-"),this.lastEngOfCate[t]=this.eng,this.fire("change",{cate:this.cate,eng:this.eng,data:this.engData[this.cate][this.eng]})&&this._onChangeEng(),this)},forceChange:function(e,t){this.cate=e,this.eng=t||this.lastEngOfCate[e],this.engid=[e,this.eng].join("-"),this.lastEngOfCate[this.cate]=this.eng,this.fire("catechange",{cate:this.cate,eng:this.lastEngOfCate[this.cate],data:this.engData[this.cate],isLoadSug:this.getIsLoadSug(this.cate),isForce:!0})&&this._onChangeCate(),this.fire("change",{cate:this.cate,eng:tis.eng()},set:function(e,t){return this.setEng(e,t)},get:function(){return this.getEng()},setDefaults:function(t,n){var r={};if(cateof(t)=="string"&&n)r[t]=n;else{if(cateof(t)!="object")return this.fire("error",{code:"400",data:{funcName:"setDefaults",cate:this.cate,eng:this.eng},msg:"\u53c2\u6570\u9519\u8bef"}),this;r=e(r,t,!0)}for(var i in r)this.defaultByCate[i]&&this.engData[i][r[i]]?this.defaultByCate[i]=r[i]:this.fire("error",{code:"404",data:{funcName:"setDefaults",cate:this.cate,eng:this.eng},msg:"\u6ca1\u6709\u5982\u4e0bcate\u6216\u641c\u7d22\u5f15\u64ce\uff1a"+[i,r[i]]});return this},update:function(e,t,n){t=t||this.cate;var r=this,i=[];for(var s in e){var o=s;if(!r.engData[t][s]||!n)r.engData[t][s]=e[s],i.push(o)}var u=n?"add":"update";return this.fire("update",{action:u,keys:i})&&this._onUpdate(u,i,t),t==this.cate&&i.indexOf(this.eng)!=-1&&this.setEng(this.eng,this.cate,!0),this},updateParams:function(t,r,i){var s=this;return i=n(i)?i:[i],i.forEach(function(n){var i=s.engData[n],o=i[r];if(o){var u={},a=[],f={},l=o[4].split(";");l.forEach(function(e){var t=e.split(":");u[t[0]]=t[1]}),e(u,t,!0)o[4]=a.join(";"),f[r]=o,s.update(f,n)}}),this},add:function(e,t){this.update(e,t,!0)},remove:function(e,t){t=t||this.cate;var r=this;if(!this.engData[t])return this.fire("error",{code:"404",data:{funcName:"remove",cate:this.cate,eng:this.eng},msg:"\u6ca1\u6709\u8be5\u5206\u7c7b\u7684\u641c\u7d22\u5f15\u64ce\u6570\u636e"}),this;n(e)||(e=[e]);var i=!0,s=[];return e.forEach(function(e){r.eng==e&&(r.fire("error",{code:"405",data:{funcName:"remove",cate:this.cate,eng:this.eng},msg:"\u4e0d\u80fd\u5220\u9664\u5f53\u524d\u6b63\u5728\u4f7f\u7528\u7684\u641c\u7d22\u5f15\u64ce:"+e}),i=!1),r.engData[t][e]||(r.fire("error",{code:"404",data:{funcName:"remove",cate:this.cate,eng:this.eng},msg:"\u6ca1\u6709\u8be5\u641c\u7d22\u5f15\u64ce:"+e}),i=!1),i&&(delete r.engData[t][e],s.push(e)),i=!0}),this.fire("update",{action:"remove",keys:s})&&this._onUpdate("remove",s,t),this},addCate:function(e,t,n){if(this.engData[e]){this.fire("error",{code:"409",data:{funcName:"addCate",cate:this.cate,eng:this.eng},msg:"\u5df2\u6709\u8be5\u5206\u7c7b\uff1a"+e});return}return this.defaultByCate[e]=t||"",this.engData[e]={},n&&this.add(n,e),this.fire("update",{action:"addcate",cates:e})&&this._onUpdateCate("addcate",e),this},removeCate:function(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),n(e)||(e=[e]);var t=this,r=[];return e.forEach(function(e){if(!t.engData[e]){t.fire("error",{code:"404",data:{funcName:"removeCate",cate:this.cate,eng:this.eng},msg:"\u6ca1\u6709\u8be5\u5206\u7c7b\uff1a"+e});return}if(e==t.cate){t.fire("error",{code:"405",data:{funcName:"removeCate",cate:this.cate,eng:this.eng},msg:"\u4e0d\u80fd\u5220\u9664\u5f53\u524d\u6b63\u5728\u4f7f\u7528\u7684\u5206\u7c7b"+e});return}delete t.defaultByCate[e],delete t.engData[e],r.push(e)}),this.fire("update",{action:"removecate",cates:r})&&this._onUpdateCate("removecate",r),this},updateCate:function(e,t){var r=Array.prototype.slice.call(arguments);n(r[0])||(r=[[r[0],r[1]]]);var i=this,s=[],o=[];return r.forEach(function(e){var t=e[0],n=e[1];!t||!newcate?i.fire("error",{code:"400",data:{funcName:"updateCate",cate:this.cate,eng:this.eng},msg:"\u53c2\u6570\u9519\u8bef"}):i.engData[t]?i.engData[newcate]?i.fire("error",{code:"501",data:{funcName:"updateCate",cate:this.cate,eng:this.eng},msg:"\u4e0d\u80fd\u547d\u540d\u6210\u4ee5\u4e0b\u5206\u7c7b\uff0c\u56e0\u4e3a\u5206\u7c7b\u5df2\u5b58\u5728\uff1a"+n}):t==i.cate?i.fire("error",{code:"405",data:{funcName:"updateCate",cate:this.cate,eng:this.eng},msg:"\u4e0d\u80fd\u66f4\u65b0\u6b63\u5728\u4f7f\u7528\u7684\u5206\u7c7b\uff1a"+t}):(i.defaultByCate[newcate]=i.defaultByCate[t],i.engData[newcate]=i.engData[t],delete i.defaultByCate[t],delete i.engData[t],s.push(t),o.push(newcate)):i.fire("error",{code:"404",data:{funcName:"updateCate",cate:this.cate,eng:this.eng},msg:"\u6ca1\u6709\u8be5\u5206\u7c7b\uff1a"+t})}),this.fire("update",{action:"updatecate",cates:s})&&this._onUpdateCate("updatecate",s,o),this},_cateChangeListener:function(){if(!this.tabsEl)return;var e=this,t=this.wrapEl+" "+this.tabsEl+"[data-cate]";W(document).delegate(t,this.cateChangeEvent,function(t){W(this).hasClass(e.tabsOnClass)||t.preventDefault(),e.setCate(W(this).attr("data-cate"))}).delegate(t,"mouseover",function(e){W(this).addClass("hover")}).delegate(t,"mouseout",function(e){W(this).removeClass("hover")})},_engChangeListener:function(){if(!this.engsElWap)return;var e=this,t=this(t){t.preventDefault(),e.setEng(W(this).attr("data-site"),W(this).attr("data-cate"))})},render:function(e,t,n){var t=t||W(this.tabsEl+"."+this.tabsOnClass,W(this.wrapEl)).attr("data-cate")||this.cate,e=e||this.defaultByCate[t]||this.eng;return n!==!1&&this.wrapEl&&(this._cateChangeListener(),this._engChangeListener()),this.setCate(t,e,!0).setEng(e,t,!0),this}}),QW.provide("SearchTab",r)})();M({container:"#search"},function(e,t){function g(t){if(e("#widget-"+t).html()||m[t])return;m[t]=!0,qboot.jsonp(v.host,{widget:t,v2:v.v},function(){},{threshold:v.threshold,jsonp:"r"})}var n=qboot.cookie,r=HAO_CONFIG.search,i=HAO_DATA.searchTabData,s=new AppData("api.hao.360.cn",r.r),o={webpage:"\u641c\u7f51\u9875",news:"\u641c\u8d44\u8baf",video:"\u641c\u89c6\u9891",image:"\u641c\u56fe\u7247",liangyi:"\u641c\u826f\u533b",weibo:"\u641c\u5fae\u535a",map:"\u641c\u5730\u56fe",wenda:"\u641c\u95ee\u7b54"},u=s.get("defaultEng")||"somulti",a="webpage";if(/^\?1009(\W|$)/.test(location.search)){var f=ObjectH.mix(i.defaultByCate,{image:"so360",webpage:"so360"},!0),l=i.searchEngConf;for(var c in f){if(c=="shopping")continue;var h=f[c],p=l[c][h];l[c]={},l[c][h]=p}i.searchEngConf=l,u="so360"}var d=new SearchTab({engData:i.searchEngConf,defaultByCate:i.defaultByCate});window.search=d,d.on("catechange",function(n){var r=n.cate,i=n.eng,s=this.engData[r],o="html-"+r,u='<a class="$1" title="$2" data-site="$1" data-cate="$3">$1</a>',a='<a class="jump" title="$1" href="$2">$1\u641c\u7d22</a>',f="";for(var l in s)if(l!="jump")f+=u.replace(/\$1/g,l).replace(/\$2/g,s[l][2]).replace(/\$3/g,r);else{f+='<span class="divide">\u4ee5\u4e0b\u5f39\u51fa\u641c\u7d22</span><div class="jump-rect">';for(var c in s.jump)f+=a.replace(/\$1/g,s.jump[c][2]).replace(/\$2/g,s.jump[c][0]);f+="</div>"}e(".eng-list").html(f),e("#search-engine")[ObjectH.keys(n.data).length===1?"addClass":"removeClass"]("single"),t.tweet("search-cate-change",{cate:r,eng:i,data:n.data})}),d.on("change",function(e){t.tweet("search-eng-change",{cate:e.cate,eng:e.eng,data:e.data,isForce:!!e.isForce})}),d.render(u,a),t.receive("search-cate-change",function(t){e(".hotwords-cate").removeClass("hotwords-cate-show"),e(".hotwords-cate-"+t.data.cate).addClass("hotwords-cate-show")}),t.delegate(".eng-list>a","click",function(t){var n=e(this).attr("data-cate");if(n=="webpage"){t.preventDefault();var r=e(this).attr("data-site"),i;r!="so360"&&(expiresDays=(1+Math.floor(Math.random()*1))*864e5,i=(new Date).getTime()+expiresDays),s.set("defaultEng",r,i)}e("#search-engine").toggleClass("open")}),t.delegate(".divide","click",function(n){$this=e(this),$this.hasClass("expend")?t.query(".jump-rect").hide():t.query(".jump-rect").show(),$this.toggleClass("expend")});var v=HAO_CONFIG.widget,m={};t.receive("widget-change",function(t){var n=t.data.widget;e(".form-group").hide(),e(".widget-group").hide(),e("#widget-"+n).show(),g(n)}),e("[data-widget]").click(function(n){t.tweet("widgeoggle").click(functionogo").click(function(t){e("#search-engine").removeClass("open").removeClass("hover")});var y={};e("[data-link]").forEach(function(t){e(t).attr("data-href",e(t).query("a").attr("href"))}),t.query("ul.tab li").hover(function(t){e(this).toggleClass("hover")}).click(function(n){(!e(n.target).hasClass("link")||!e(n.target).parentNode(".on").length)&&n.preventDefault();if(e(this).attr("data-link")){window.open(e(this).query("a").attr("href"));return}e(this).attr("data-cate")&&!e(".form-group").isVisible()&&(e(".widget-group").hide(),e(".form-group").show()),e(this).hasClass("on")&&e(this).query(".link").attr("href")&&LogHub.search("jump",{cate:e(this).attr("data-cate")}),t.query("ul.tab li").removeClass("on"),e(this).addClass("on"),n.target.tagName=="A"&&n.target.blur()}).on("mouseover",function(){e(this).attr("data-widget")&&g(e(this).attr("data-widget"))}).on("mousedown",function(t){if(e(this).attr("data-link")){var n=e("#search-kw").val(),r=e(this).attr("data-link");if(!n){e(this).query(">a").attr("href",e(this).attr("data-href"));return}if(!y[r]){var s=i.searchEngConf[r]&&i.defaultByCate[r]&&i.surn;var o=s[4].split(";"),u={};o.forEach(function(e){var t=e.split(":");u[t[0]]=t[1]}),y[r]={k:s[1],url:s[0],querys:u}}var a=y[r];a.querys[a.k]=n;var f=a.url+"?"+ObjectH.encodeURIJson(a.querys);e(this).query("a").attr("href",f)}}),e("#search-btn").hover(function(t){e(this).toggleClass("hover")}).on("mousedown",function(t){e(this).addClass("mousedown")}).on("mouseup",function(t){e(this).removeClass("mousedown")}).on("mouseout",function(t){e(this).removeClass("mousedown")}),QW.W(document).click(function(t){var n=t.target,r=e(n);r.attr("id")=="search-engine"||r.parentNode("#search-engine").length||r.hasClass("eng-list")||r.parentNode(".eng-list").length||e("#search-engine").removeClass("open")});var b=d.lastEngOfCate.webpage;setTimeout(function(){var e=n.get("customEng"),t=(new Date).getMonth()+1+"-"+(new Date).getDate();e!==t&&(LogHub.search("custom",{eng:d.lastEngOfCate.webpage}),n.set("customEng",t))},1500),e(t).query("#search-kw").on("mouseenter",function(){e("#search-kw").val().trim()==""&&e("#search-kw").focus()}).on("click,keyup",function(){if(!window.preHttps){var e=s.ge=="so360"||e=="somulti")window.preHttps=!0,setTimeout(function(){window.preHttps=!1},2e4),setTimeout(function(){var e=+(new Date)+Math.random(),Image;n.src="https://www.so.com/_.gif?"+e,n.onload=n.error=function(){window[t]=null}},0)}})}),function(){var e=QW.W,t=function(e){var t=e!=null&&e==e.window;return t?e:e.nodeType===9?e.defaultView||e.parentWindow:!1},n=function(t,n){return{top:e(t).getRect().top+41,left:e(t).getRect().left}},r=function(e){var n=t(e),r="scrollTop",i="pageYOffset";return n?i in n?n[i]:n.document.documentElement[r]:e[r]},i=function(){var t="so360",i="webpage",s="hao_360so_top",o=window.search,u={},a=e(window),f=e(document),l=e("#search-wrap"),c=e("#search-engine"),h=c.query(".eng-list"),p=e("#eng-logo"),d=l.query(".theme-search-tab"),v=e("#search-hotword"),m=e("#search-form"),g="search-fixed",y=e("#search-frame"),b=e("#search-input"),w={fixedHeight:n(y[0]).top,cate:i,eng:t,webpageEng:t},E=function(){var e=d.query(".on");w.cate=e.getAttr("data-cate")||e.getAttr("data-widget"),w.eng=p.getAttr("clion(){w.fixedHeight=n(y[0]).top},x=function(){return l.hasClass(g)?"fixed":"default"},T=function(){var e=w.fixedHeight,t=r(a[0]);return t>=e?"fixed":"default"},N=function(){return Browser.ie?e("#suggest-container").css("visibility")=="inherit":e("#suggest-container").css("visibility")=="visible"},C=function(){return c.hasClass("open")},k=function(){v.removeClass("open"),e("#suggest-container").css(unction(){c.removeClass("open")},A=function(e){return["car","flytrip"].indexOf(e)>-1},O=function(e,t,n){if(n){var r=d.query('[data-cate="{key}"]'.replace("{key}",e));r.length||(r=d.query('[data-widget="{key}"]'.replace("{key}",e))),r.length&&r.fire("click"),h.query("."+t).fire("click"),c.removeClass("open")}else setTimeout(function(){e!==o.cate&&o.forceChange(e,t)},0)},M=function(e){var t=m.query(".webpage-so360 input[name=src]");w.src=t.getValue(),t.setValue( input[name=src]");e.setValue(w.src)},D=function(e){e?l.addClass(g):l.removeClass(g)},P=function(e,t){f.tweet(e,t)},H=function(e){switch(e){case"fixed":E(),O(i,t,A(w.cate)),D(!0),P("search-fixed-state-turn","fixed");break;case"default":default:O(i,w.webpageEng,!1),O(w.cate,w.eng,A(w.cate)),D(!1),P("search-fixed-state-turn","default")}},B=function(){var e=x(),t=T(),n=e!=t,r=N(),i=C();r&&k(),i&&L(),n&&(S(),H(t),qboot.events&&qboot.events.fire("seach)};return u.init=function(){if(Browser.ie<7)return;E(),a.on("scroll",function(e){B()})},u}();i.init()}(),function(){var e=window.MAJIA_SDK_DATA?MAJIA_SDK_DATA.searchRightTopConfData:{},t=+hao360.todayObj,n=location.href.queryUrl("previewTime"),r=location.href.queryUrl("top")||e.top,i=location.href.queryUrl("right")||e.right,s=+(new Date(e.startTime.replace(/\-/g,"/"))),o=+(new Date(e.endTime.replace(/\-/g,"/"))),u=e.isOn==="1";n&&(t=+(new Date(n.replace(/\-/g,"/"))),u=!0,window.MAJIA_SDK_DATA.searchRightTopConfData.top=r,window.MAJIA_SDK_DATA.searchRightTopConfData.right=i);if(!u||t<s||t>o)return!1;W("#search-frame").appendChild('<div id="search-operate-rt"></div>'),window.moniter&&moniter.setId(["search-operate-rt"]),qboot.load("searchRightTopOpt")}();(function(){function n(){var e=".search-redbag{position:absolute;height:24px;width:78px;right:-45px;top:8px;}.search-redbag a{display:block;overflow:hidden;}",t='<a href="https://www.so.com/s?ie=utf-8&src=hao_sousuo_jbs&fr=hao_sousuo_jbs&q=%E6%9E%97%E5%BE%B7%E4%BC%AF%E6%A0%BC%E7%BB%91%E6%9E%B6%E6%A1%88"><img src="https://hao2.qhimg.com/t01523e3b45e041fb97.gif" height="24" width=78" /></a>';qboot.load.css(e),W("#redbag").html(t),LogHub&&LogHub.behavior("redbag","show")}function r(){var e=window.searchRedBagConfig,t=new Date(e.startTime),n=new Date(e.endTime),r=hao360.queryUrl(location.href,"previewTime")||hao360.todayObj;return t<new Date(r)&&n>new Date(r)&&e.isOn}if(!hao360.mid||!window.searchRedBagConfig)return;var e="https://api.ssl.so.com/daohang_bloom_check",t=hao360.mid;r()&&qboot.jsonp(e,{val:t},function(e){e&&e.errno==0&&e.result&&n()},{jsonp:"callback"})})();(function(){if(!window.TOPIC_CONFIG)return;var e=TOPIC_CONFIG.weatherPaoPaoConfig,t=e.id,n=new AppData("apIC_CONFIG.blackList,i=W("#doc-hd"),s=function(){return qboot.cookie.get("wpaoclose")},o=function(e,t){if(!e||!t)return!1;var n=hao360.queryUrl(location.href,"previewTime");return n=n?new Date(n):hao360.todayObj,n>e&&n<t},u=function(e){return e.name&&e.img&&o(e.startTime,e.endTime)},a=function(e){var t=e[1][0];return r.join().indexOf(t)>-1},f=function(){var e=["weather-paopao"];window.moniter&&moniter.setId(e)},l=function(){m(),qboot.cookie.set("wpaoclose",1,{expires:864e5})},c=function(){var e=W("#"+t);e.delegate("a","click",function(e){l();var n=W(this).attr("data-tag");LogHub.behavior(t,"click-"+n)}).delegate("#close-paopao","click",function(e){l(),LogHub.behavior(t,"close")})},h=function(t){var n=e.special,r=e.normal,i,s;if(n&&n[0])for(s=0;s<n.length;s++){i=n[s];if(t==i.keyword&&u(i))return{img:i.img,name:i.name,isSpecial:!0}}return r&&u(r)?{img:r.img,name:r.name,isSpecial:!1}:{img:"",name:"",isSpecial:!1}},p=function(e){var t=e[0][0],n=e[1][0],r=h(t),i="http://zonghe.hao.360.cn/query?q="+n,s;return r.isSpecial?{img:r.img,url:i,name:r.name}:(r=h(n),{img:r.img,url:i,name:r.name})},d=function(n){var r=e.isOn,i=W("#"+t);if(!r||!n||a(n)||s()){g();return}var o=p(n);if(!o.img||!o.name)return;o.tag=o.name;var u='<a href="{$url}" data-tag="{$tag}"><img src="{$img}" width="90" height="50"></a>';i.query(".main").empty().appendChild(W(u.tmpl(o))),i.show()},v=function(){var t='<div class="container" style="position:relative"><div id="{$id}"><div class="arrow"></div><div class="main"></div><div id="close-paopao"></div></div></div>';W(t.tmpl(e)).appendTo(i[0]),c()},m=function(){var e=W("#"+t);e.undelegate(),i.removeChild(e.parentNode()[0])},g=function(){var e=W("#"+t);e.query(".main").empty(),e.hide()},y=function(){var e=W("#"+t);e.hide()},b=function(){var e=W("#"+t)r:d,hide:y,show:b,init:function(){v(),qboot.await(function(){return n.get("weather")},function(){var e=n.get("weather").area;d(e)})}};window.WeatherPaoPao=w,w.init()})();M({container:"#weather"},function(e,t){function r(t){e(".setting")[t=="show"?"hide":"show"](),"set"==t&&!e("#weather-prov").val()&&Weather.getProvince(function(e){i(e,"prov",hao360.area.get("prov"))})}function i(t,n,r){var i="",n=n||"prov";t.forEach(function(e,t){r!=e[1]?i+='<option value="'+e[1]+'">'+e[0]+"</option>":i+='<option selected="selected" value="'+e[1]+'">'+e[0]+"</option>"}),e("#weather-"+n).html(i).fire("change")}function u(){var t=e("#weather-inner .weathertoday"),n=t.getRect(),r=t.query(".inside").getRect(),i=t.query(".degree span").getRect();return(n.width-r.width)/2+40+i.width}var n=QW.g;QW.W(document).delegate("#weather-change","click",function(e){e.preventDefault(),r("set"),window.WeatherPaoPao&&WeatherPaoPao.hide()}),e("#weather-cancel").click(function(e){e.preventDefault(),r("show"),window.WeatherPaoPao&&WeatherPaoPao.show()}),e(".done").click(function(i){i.preventDefault();var s=this;e(this).attr("disabled","disabled");if(e(this).attr("disabled")=="disabled")return;var o={prov:n("weather-prov").value,city:n("weather-city").value,town:n("weather-town").value},u=function(n){var i=n.area[2][1],o="weather-template2022";R("weather-inner").render(o,n),window.WeatherPaoPao&&WeatherPaoPao.render(n.area),r("show"),ode.set(i),t.tweet("weather-loaded",{code:i})},a=function(){e(s).attr("disabled","")};Weather.getWeather(function(e){e?u(e):a(),qboot.events.fire("weather-changed")},o.town,1)}),e(".setting select").on("change",function(t){var n={"weather-prov":"city","weather-cityattr("id")],s=hao360.area.get(r);if(!r)return;Weather.getArea(r,function(e){i(e,r,s)},e(this).val())}),e("#weather-cancelv2").click(function(e){e.preventDefault(),r("show")}),QW.W(document).on("click",function(t){var n=e(t.target),i=n.parentNode(".cityset").length||n.hasClass("cityset")||n.attr("id")==="weather-change";i||r("show")});var s=["\u7a7a\u6c14\u8d28\u91cf\u4f18\uff0c\u53ef\u4ee5\u5c3d\u60c5\u4eab\u53d7\u6e05\u65b0\u7a7a\u6c14","\u7a7a\u6c14\u8d28\u91cf\u826f\uff0c\u6781\u5c11\u6570\u654f\u611f\u4eba\u7fa4\u5e94\u51cf\u5c11\u6237\u5916\u6d3b\u52a8","\u7a7a\u6c14\u8f7b\u5ea6\u6c61\u67d3\uff0c\u6613\u611f\u4eba\u7fa4\u5728\u6237\u5916\u6d3b\u52a8\u65f6\u95f4\u4e0d\u5b9c\u8fc7\u957f\uff0c\u8001\u4eba\u3001\u513f\u7ae5\u5e94\u51cf\u5c11\u6237\u5916\u6d3b\u52a8","\u7a7a\u6c14\u4e2d\u5ea6\u6c61\u67d3\uff0c\u5bf9\u8001\u4eba\u3001\u5c0f\u5b69\u3001\u547c\u5438\u9053\u75be\u75c5\u60a3\u8005\u7b49\u654f\u611f\u4eba\u7fa4\u5f71\u54cd\u8f83\u5927\uff0c\u5916\u51fa\u4f69\u6234\u53e3\u7f69","\u7a7a\u6c14\u91cd\u5ea6\u6c61\u67d3\uff0c\u5bb9\u6613\u8bf1\u53d1\u547c\u5438\u7cfb\u7edf\u75be\u75c5\uff0c\u6240\u6709\u4eba\u5e94\u9002\u5f53\u51cf\u5c11\u5ba4\u5916\u6d3b\u52a8\uff0c\u5916\u51fa\u4f69\u6234\u53e3\u7f69","\u7a7a\u6c14\u4e25\u91cd\u6c61\u67d3\uff0c\u6240\u6709\u4eba\u7684\u5065\u5eb7\u90fd\u4f1a\u53d7\u5230\u5371\u5bb3\uff0c\u5e94\u5c3d\u91cf\u907f\u514d\u6237\u5916\u6d3b\u52a8","\u7a7a\u6c14\u6c61\u67d3\u7269\u4e25\u91cd\u8d85\u6807\uff0c\u7a7a\u6c14\u5bf9\u60a8\u7684\u8eab\u4f53\u4f24\u5bb3\u5de8\u5927\uff0c\u5e94\u5c3d\u91cf\u907f\u514d\u6237\u5916\u6d3b\u52a8"],o='<li><a href="http://www.so.com/s?ie=utf-8&amp;src=hao_360weather&amp;q={$city}pm2.5" class="pm25 pm-level{$step}" title="{$title}"><em>{$level}</em></a></li>';t.receive("weather-loaded",function(n){Weather.getPm25(function(n){n&&(n.title="\u4eca\u65e5pm2.5\u6307\u6570\u4e3a"+n.pm25+"\uff0c"+s[n.step],qboot.await(function(){return R("weather-inner").getStatus()==R.STATUS_OK},function(){var r=e(".name a").html()||e(".name").html();n.city=encodeURIComponent(r);var i=0;i=u(),e(".extend-list").appendChild(e(o.tmpl(n))).css("left",i+"px"),qboot.events.on("screen",function(){i=u(),e(".extend-list").css("left",i+"px")}),t.tweet("pm25-loaded"),e(".weather-extend").hover(function(t){e(".today").toggleClass("hover")})},function(){},50,20))},n.data.code,1)}),t.tweet("weather-loaded",{code:hao360.cityCode.get()})});(function(){var e=QW.EventTargetH,t=QW.CustEvent,n=e.delegate,r=e.undelegate,i=e.on,s=QW.Selector.filter,o=QW.ObjectH.keys,u=function(e){return e=e||document,{on:function(t,r,i){i=i||{};var s=o(r);s.forEach(function(r){var s=this;n(e,r,t,function(e){i.preventDefault&&e.preventDefault(),s[r].call(this,e)})},r)},off:function(t,n,i){var s=o(n);s.forEach(function(n){var s=this;i?r(e,n,t,i):r(e,n,t)},n)}}};QW.provide("uiproxy",u)})();(function(){function u(){function r(e){return function(){var n,r;t=this.slice().reverse();while(r=t.pop())n=r[e].apply(r,arguments);return t=!1,n}}var e=[],t=!1;return n(e,{call:r("call"),apply:r("apply"),clear:function(e){if(!e)this.length=0;else{var n=this.length,r=n-t.length;for(var i=this.length-1;i>=0;i--)this[i]===e&&(this.splice(i,1),t&&i>=r&&t.splice(n-i-1,1));if(i<0)return!1}return!0}}),e}var e=QW.EventTargetH,t=e.on,n=QW.ObjectH.mix,r=QW.ObjectH.isFunction,i=QW.Selector.filter,s=QW.ObjectH.keys,o=QW.ArrayH.forEach,a=function(){function r(e){var t=this;e=e||{},this.target=e.target||document,this.keyHandlers={},this.globalKeyHandlers={},this.rules=[],this.sequence={},this.sequenceNums=[],this.history=[],this.trace=e.trace,this.traceStack=e.traceStack||[],this.forTextarea=e.forTextarea||!1,this._handler=function(e){if(t.forTextarea&&!/textarea|input/i.test(e.target.nodeName)&&e.target.type!=="text")return;if(!t.forTextarea&&this!==e.target&&(/textarea|select/i.test(e.target.nodeName)||e.target.type==="text"))return;var n,r=t.lock||!t.check(this,e),s=t.keyHandlers[e.type],o=t.globalKeyHandlers[e.type];if(s){var u=i(e),a,f;for(var l in u){a=s[l];if(a)break}if(t.sequenceNums.length&&!r){var c=t.history;c.push(l),c.length>10&&c.shift();if(c.length>1)for(var h=t.sequenceNums.length-1;h>=0;h--){f=s[c.slice(0-t.sequenceNums[h]).join("->")];if(f)return t.trace&&t._trace(h),n=f.apply(this,arguments),c.length=0,n||e.preventDefault(),n}}if(a){if(r)return!1;t.trace&&t._trace(l),n=a.apply(this,arguments),n||e.preventDefault()}}if(o){if(r)return!1;n=o.apply(this,arguments),n||e.preventDefault()}return n}}function i(e){var r=e.type!=="keypress"&&t[e.which],i=String.fromCharCode(e.which).toLowerCase(),s="",o={};e.altKey&&r!=="alt"&&(s+="alt+"),e.ctrlKey&&r!=="ctrl"&&(s+="ctrl+"),e.metaKey&&!e.ctrlKey&&r!=="meta"&&(s+="meta+"),e.shiftKey&&r!=="shift"&&(s+="shift+");if(r)o[s+r]=!0;else{var [s+u]=!0,s==="shift+"&&(u=n[i],u&&(o[u]=!0)))}return o}function s(e){return new r(e)}var t={8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":":","'":'"',",":"<",".":">","/":"?","\\":"|"};return r.prototype={addHandler:function(t,n,r){function o(e){if(e){var n=e.split("->");if(n.length>1){i.sequence[n.le in i.sequence)o.push(parseInt(a,10));i.sequenceNums=o.sort(function(e,t){return e-t})}var f=e.toLowerCase();s[f]||(s[f]=u()),s[f].push(r)}else{var l=i.globalKeyHandlers[t];l||(l=i.globalKeyHandlers[t]=u()),l.push(r)}}var i=this,s=this.keyHandlers[t];return r||(r=n,n=""),s||(s=this.keyHandlers[t]={},e.on(this.target,t,this._handler)),ObjectH.isArray(n)?n.forEach(function(e){o(e)}):o(n),this},_trace:function(e){this.traceStack.unshift("["+e+"]"),this.traceStack.length>this.trace&&this.traceStack.pop()},reset:function(){for(var t in this.keyHandlers)e.un(t,this._handler);this.keelete this._handler,this.lock=!1},addRul.rules.push(e),this},enable:function(){this.lock=!1},disable:function(){this.lock=!0},check:function(e,t){var n=!0,r=this.rules;for(var i=0,s=r.length;i<s;i++)if(!r[i].call(e,t)){n=!1;break}return n}},["down","up","press"].forEach(function(e){this[e]=function(t,n){return this.addHandler("key"+e,t,n),this}},r.prototype),s.KEYS_CODE=t,s}();QW.provide("Konami",a)})();(function(){function e(e,t){this._dom=e,this._containter=t.refercontainer||document,this._hasVisible=!1,this._totalVisible=!1,this.onentervisible=t.onentervisible,this.ontotalvisible=t.ontotalvisible,this.onovervisible=t.onovervisible,this.threshold=t.threshold||0,this.triggers=t.triggers||[{window:"resize"},{window:"scroll"}],this._init()}e.prototype._init=function(){if(this.triggers){var e={window:window,document:document},t=this;t.dealWithVisible(),this.triggers.forEach(function(n){for(var r in n){var i=n[r];e[r]&&(r=e[r]),W(r).on(i,function(){t.dealWithVisible()})}})}},e.prototype.dealWithVisible=function(){var e=DomU.getDocRect(this._containter),t={left:e.scrollX,right:e.width+e.scrollX+this.threshold,top:e.scrollY,bottom:e.height+e.scrollY+this.threshold},n=NodeH.getRect(this._dom),r={top:t.top-n.top,bottom:t.bottom-n.bottom,left:t.left-n.left,right:t.right-n.right},i=function(){return r.top<0&&r.bottom>0&&r.left<0&&r.right>0};DomU.rectIntersect(n,t)&&(!this._hasVisible&&this.onentervisible&&(this.onentervisible(),this._hasVisible=!0),i()&&!this._totalVisible&&this.ontotalvisible&&(this.ontotalvisible(),this._totalVisible=!0),this.onovervisible&&this.onovervisible(r))},window.visibleDetector=e})();var vendor=function(){var e=document.createElement("div").style,t=function(){var t="webkitT,t,MozT,msT,OT".split(","),n,r=0,i=t.length;for(;r<i;r++){n=t[r]+"ransform";if(n in e)return t[r].substr(0,t[r].length-1)}return!1}(),n=t?"-"+t.toLowerCase()+"-":"",r=function(e){return t===""?e:(e=e.charAt(0).toUpperCase()+e.substr(1),t+e)},i=r("transform"),s=r("transition"),o=r("transitionProperty"),u=r("transitionDuration"),a=r("transformOrigin"),f=r("transitionTimingFunction"),l=r("transitionDelay"),c=function(){return t==="webkit"||t==="O"?t.toLowerCase()+"TransitionEnd":"transitionend"}(),h=r("animation"),p=r("animationName"),d=r("animationDuration"),v=r("animationTimingFunction"),m=r("animationDelay");return e=null,{propPrefix:t,cssPrefix:n,transform:i,transformOrigin:a,transition:s,transitionProperty:o,transitionDuration:u,transitionTimingFunction:f,transitionDelay:l,transitionEndEvent:c,animation:h,anition:v,animationDelay:m,isPlaying:function(e){return e&&e.length&&e.hasClass("play")},animate:function(e,t,n){if(this.isPlaying(e))return;t.animationDuration=parseInt(t.animationDuration,10)||0,t.animated=t.animation+" animated play",this.listenTransition(e[0],t.animationDuration,function(){!t.animationInfinite&&e.removeClass(t.animated),n&&n(t)}),e.css(this.cssPrefix+"animation-duration",t.animationDuration+"ms"),e.addClass(t.animated)},listenTransition:function(e,t,n){var r=this,i=function(){e.transitionTimer&&clearTimeout(e.transitionTimer),e.transitionTimer=null,e.removeEventListener&&e.removeEventListener(this.transitionEndEvent,s,!1)},s=function(){i(),n&&n.call(r),n=null};i(),e.addEventListener&&e.addEventListener(this.transitionEndEvent,s,!1),e.transitionTimer=setTimeout(s,t+50)}}}();(function(){var e=window.configHuodong&&configHuodong.sidebar||{},t="";if(e.data&&e.data.length>0){var n=e.data;for(var r=0;r<n.length;r++)if(n[r].iconTitle==="\u4e3e\u62a5"){t=n[r];break}}else{if(!MAJIA_SDK_DATA.jubao||MAJIA_SDK_DATA.jubao.iconTitle!=="\u4e3e\u62a5")return;t=MAJIA_SDK_DATA.jubao}var i=function(e){this.options=e||{},this.data=t,this.panel=W("#toolbar-report"),this.init()};i.prototype.init=function(){this.render()},i.prototype.render=function(){var e=this,t=this.createTmpl();this.panel.appendChild(R.tmpl(t.tpl(),this.data));var n=function(){var n=[];return W(e.data.list.forEach(function(e){e.image=e.image.clipImage({whq:"190_110_75",webp:!0}),n.push(R.tmpl(t.slideTpl(),e))})),n.join("")}();this.panel.query(".slide-column-wrap").html(n),this.switchable(),this.event()},i.prototype.switchable=function(){this.data.imageSwitch&&this.data.list.length>1&&(this.panel.query(".pic-switch").switchable({animType:"scroll",viewSelector:".piclist",pageUpSelector:".slide-column-pageup",pageDownSelector:".slide-column-pagedown",mouseenterSwitchTime:null,autoPlay:!0,autoPlayTime:3e3,animDur:150}),this.panel.query(".slide-switch").hover(function(){W(this).addClass("slide-switch-hover")},function(){W(this).removeClass("slide-switch-hover")}))},i.prototype.createTmpl=function(){return{tpl:function(){return['<div class="report-content" id="report-content">','<span class="title">','<a href="{zhiboIconLink}"><span class="big">{zhiboTitle}</span></a><span class="big">\u2022</span>{videoTitle}',"</span>",'<div class="switch-content">','<div class="slide-switch pic-switch">','<div class="slide-content">','<div class="slide-column-wrap">',"</div>","</div>",'<a href="###" class="slide-column-pageup"><span>\u4e0a\u4e00\u5c4f</span><i class="bg"></i></a>','<a href="###" class="slide-column-pagedown"><span>\u4e0b\u4e00\u5c4f</span><i class="bg"></i></a>',"</div>","</div>","</div>"].join("")},slideTpl:function(){return['<div class="piclist">','<div class="g-pic">','<a href="{extendLink}">','<img loading="lazy" src="{image}">','<img loading="lazy" src="{imagePin}" class="pin-pic">','<div class="pic-title">',"<span>{title}</span>",'<img loading="lazy" src="//hao2.qhimg.com/t0155645fabaae3f369.png" class="play">','<div class="bg"></div>',"</div>","</a>","</div>","</div>"].join("")}}},i.prototype.event=function(){var e=function(e){var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(/^(rgb|RGB)/.test(e)){var n=e.replace(/(?:\(|\)|rgb|RGB)*/g,"").split(","),r="#";for(var i=0;i<n.length;i++){var s=Number(n[i]).toString(16);s==="0"&&(s+=s),r+=s}return r.length!==7&&(r=e),r}if(!t.test(e))return e;var o=e.replace(/#/,"").split("");if(o.length===6)return e;if(o.length===3){var u="#";for(var i=0;i<o.length;i+=1)u+=o[i]+o[i];return u}},t=function(e,t){if(!e)return;return e.currentStyle?e.currentStyle[t]:window.getComputedStyle(e,null)[t]};this.panel.hover(function(){W(this).addClass("toolbar-report-hover");var n=W(this).query(".report-ass("important-report-text")},function(){W(this).removeClass("toolbar-report-hover")})},new i({})})();M("#topbar",function(e,t){var n=function(t){var t=t||"on";t=="off"?(e("#toolbar-edition").removeClass("on"),e(".more-edition").hide()):(e("#toolbar-edition").addClass("on"),e(".more-edition").show())};e("#toolbar-edition").click(function(e){e.preventDefault(),n()ction(t){e("#toolbar-edition").addClass("on")}).on("mouseleave",function(e){n("off")});var r=function(){return window.topBarConfig&&!window.topBarConfig.redbagTips.isOn?!1:(new AppData("api.hao.360.cn")).get("topbar-redbag-tips-close")?!1:!0};r()&&e(".redbag-tool #top-tips").show(),e(".redbag-tool").delegate(".toolsite, .close, .inner-tips","click",function(t){e(".redbag-tool #top-tips").hide(),(new AppData("api.hao.360.cn")).set("topbar-redbag-tips-close",1,(new Date).getTime()+864e5)}),e(".more-edition>div").hover(function(t){e(this).toggleClass("hover")}).click(function(n){n.preventDefault(),t.tweet("index-change",{index:e(this).attr("data-v")})});var i={my:"https://hao.360.com",kuanping:"https://hao.360.com"};QW.TweetH.receive(document,"index-change",function(e){var t=i[e.data.index]et("360WEBINDEXCK",t,{expires:31536e6}),setTimeout(function(){window.location.href=t},200)):typeof t=="function"&&t()}),e("#toolbar-themetrigger").on("mouseover",function(){var e=QW.W("#theme-panel").css("display")=="none";t.tweet("global:themeTrigger",{action:"over",status:e?"open":"close"})}),e("#toolbar-themetrigger").click(function(e){e.preventDefault(),document.body.scrollTop==0?document.documentElement.scrollTop=0:document.body.scrollTop=0;var n=QW.W("#theme-panel").css("display")=="none";t.tweet("global:themeTrigger",{action:"click",status:n?"open":"close"})}),Dom.ready(function(){if(!hao360.is360se()&&!hao360.is360se6()&&!hao360.is360ee()){var t="";t+='<div id="download-se360" class="download-se360" data-state="close">',t+="<p><em>\u4eb2\uff0c\u60f3\u628a360\u5bfc\u822a\u8bbe\u4e3a\u4e3b\u9875\uff1f</em></p>",t+="<p>\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u4e00\u952e\u8bbe\u4e3a\u4e3b\u9875\uff0c</p>",t+="<p>\u5efa\u8bae\u4e0b\u8f7d360\u5b89\u5168\u6d4f\u89c8\u5668\uff0c\u4e0a\u7f51\u66f4\u5b89\u5168\uff01</p>",t+='<div class="download"><a id="start-download" href="http://down.360safe.com/se/sedh.exe">\u4e0b\u8f7d360\u5b89\u5168\u6d4f\u89c8\u5668</a></div>',t+='<p class="link"><a id="goto-sethome" href="http://hao.360.com/sub/sethomepage.html" onclick="try{this.style.behavior=\'url(#default#homepage)\';this.setHomePage(\''+location.protocol+"//"+hao360.host+"/');return(false);}catch(e){}\">\u5982\u4f55\u624b\u52a8\u8bbe\u7f6e360\u5bfc\u822a\u4e3a\u4e3b\u9875\uff1f</a></p>",t+='<a href="###" class="close">\u5173\u95ed</a>',t+='<span class="arrow arrow-top"><span class="border"></span><span class="bg"></span></span>',t+="</div>",e(".topbar-bd").appendChild(e(t)[0]);var n=e("#download-se360"),r=function(e){e==="clolose")):(n.show(),n.attr("data-state","open"))},i=function(e,t){LogHub.behavior(e,t)};e(document).on("click",function(){r("close")}),e("#setHomepage").on("click",function(e){e.preventDefault(),e.stopPropagation(),r("open"),n.addCl"click")}),e("#download-se360").on("click",function(e){e.stopPropagation(),r("open")}),e("#start-download").on("click",function(e){e.stopPropagation();try{hao360.downloadSe360(1900009566)!=="fail"&&e.preventDefault()}catch(t){}r("close"),i("start-downloadethome").on("click",function(e){e.stopPropagation(),setTimeout(function(){ > .close").on("click",function(e){e.preventDefault(),e.stopPropagation(),r("close")})}})});(function(){function r(){var t="https://api.ssl.so.com/realhot?query=360",n={realhot_limit:10,src:"hao_360so_hotwords_cube"};qboot.jsonp(t,n,function(t){t&&t.errno===0&&Object.isArray(t.data)&&t.data.length>0&&(e=t.data,i(),s(),c())},{jsonp:"callback",timeout:5e3})}function i(){var e=[".search-input_diwen #search-input input, .search-input_hotword #search-input input{margin:0;padding:11px 6px 11px 6px}",".search-input_diwen .form-group .hot-word-carousel, .search-input_hotword .form-group .hot-word-carousel{display:none;position:absolute;top:13px;left:120px;overflow:hidden;height:22px;width:600px;user-select:none;cursor:text;}",".search-input_diwen .search-fixed .form-group .hot-word-carousel, .search-input_hotword .search-fixed .form-group .hot-word-carousel{left:17px;top:28px;}",".search-input_diwen .form-group .hot-word-carousel .hot-word-list, .search-input_hotword .form-group .hot-word-carousel .hot-word-list{height:22px;overflow:hidden;}",".search-input_diwen .form-group .hot-word-carousel .hot-word-list .item, .search-input_hotword .form-group .hot-word-carousel .hot-word-list .item{height:22px;line-height:22px;font-size:18px;color:#999;overflow:hidden;}"];qboot.load.css(e.join(""),"hotwordcarousel")}function s(){if(!e.length)return;var t='<div class="hot-word-carousel"><ul class="hot-word-list">{cd}</li>',i="";childNode=[],e.forEach(function(e){var t=R.tmpl(r,e);childNode.push(t)}),i=R.tmpl(t,{childNode:childNode.join("")}),W("#search .form-group").insertAdjacentHTML("beforeend",i),W("#search-kw").val()==""&&(W("#search .form-group .hot-word-carousel").show(),n=!0,a())}function o(e){var r=e.itemSelector,i=e.duration,s=e.interval,o=e.$container,a=o.getRect().height,f=function(){var e=arguments;if(!n)return;o.query(r).length>1&&o.query(r).first().animate({marginTop:{by:-a}},i,function(){W(this).removeAttrn(){e.callee()},s)})};u(),t=setTimeout(f,s)}function u(){t&&(clearTimeout(t),t=null)}function a(){o({$container:W("#search .form-group .hot-word-list"),itemSelector:"li",duration:300,interval:4e3})}function f(){if(!n)return;n=!1,u(),W("#search .form-group .hot-word-carousel").hide()}function l(){if(n)return;n=!0,W("#search .form-group .hot-word-carousel"useup",function(e){e.stopPropagation(),u(),qboot.events.fire("soQs:view:inputClick")}),W(document).on("mouseup",function(e){var r=W(e.target);!t&&!r.parentNode(".hot-word-carousel")[0]&&!r.parentNode("#search-input")[0]&&n&&a()}),qboot.events.on("soHw:carousel:hide",f),qboot.events.on("soHw:carousel:show",l),qboot.events.on("soHw:carsousel:stop",u),qboot.events.on("soHw:carousel:preSubmit",function(e){var t=W("#search .form-group .hot-word-list").query("li").first().html();f(),e.querySys.setTextInputVal(t),LogHub&&LogHub.behavior("search-input-diwen","click")}),qboot.events.on("soQs:view:cateChange",function(e){var t=e.cate,n=e.ui;t==="webpage"&&n.getTextInputVal()==""?l():f()})}if(!VersionHub||!VersionHub.is("search","input_diwen")&&!VersionHub.is("search","input_hotword"))return;var e=[],t=null,n=!1;r()})();~function(){var e=HAO_CONFIG.hotwordinject,t=HAO_CONFIG.hotword,n=qSuggest.log,r="placeholder"in document.createElement("input")&&(!Browser.ie||Browser.ie>=10),i="so-history-status",s=VersionHub.is("search","search_beta"),o="hotword",u="suggest",a="",f="mixin",l="multi",c="normal",h="suggest",p="mixin",d=function(){try{var e=searchInputPlaceHolderText;if(e&&e.isOn){var t=QW.ArrayH.filter(e.options,function(e){var t=hao360.queryUrl(location.href,"previewTime"),n=(new Date(e.startTime)).getTime(),r=(new Date(e.endTime)).getTime(),i=(t?new Date(t):new Date).getTime();return i>=n&&i<=r});if(t&&t.length)return t.pop().text}}catch(n){}return""},v=function(e){if(!e||!parseInt(e.is_online))return!1;var t=+hao360.todayObj,n=location.href.queryUrl("previewTime"),r=+(new Date(e.begin_time.replace(/\-/g,"/"))),i=+(new Date(e.end_time.replace(/\-/g,"/")));return n&&(t=+(new Date(n.replace(/\-/g,"/")))),t<r||t>i?!1:!0},m=function(e){return String(e).replace(/[^\x00-\xff]/g,"abc").replace(/[\d]/g,"abc").length},g=function(){return hao360.project==="cube"&&VersionHub&&(VersionHub.is("search","input_diwen")||VersionHub.is("search","input_hotword"))},y=function(){return window.search&&search.cate==="webpage"&&VersionHub.is("search","search_beta")},b=function(e){this.init(e)};b.hook=function(e){var t=!0;return function(){t&&arguments[1]&&arguments[1].length&&(e&&e.apply(null,arguments),t=!1)}},b.QUERY_DATA_HISTORY=1,b.QUERY_DATA_RECOMMEND=2,b.QUERY_DATA_NEWS=3,b.QUERY_DATA_BUSINESS=4,b.QUERY_DATA_SUGGEST=5,b.QUERY_DATA_DEFAULT=6,b.QUERY_DATA_PERSONAL=7,b.QUERY_DATA_MAP={1:"history",2:"recommend",3:"news",4:"business",5:"suggest",6:"default",7:"personal"},b.QUERY_MONITOR_MAP={1:"history",2:"rec",3:"hot",4:"ad",5:"suggest",6:"",7:"pERY_DATA_MAP[e]||"other"},b.getDataSrc=function(e){return b.QUERY_MONITOR_MAP[e]||""},b.prototype.constructor=b,b.prototype.defaultOptions={},b.prototype.init=function(e){QW.CustEvent.createEvents(this),this.options=qboot.mix(e||{},this.defaultOptions),this.queryInterface=new Interface(this.options.interface),this.filterHandler=new FilterHandler(this.options.filterHandler),this.hotwordStorage=s?new MapStorage(this.options.mixinHotwordStorage):new MapStorage(this.options.hotwordStorage),this.cache={},this.currentQuery="",this.initRemoteDataSource()},b.prototype.initRemoteDataSource=function(){var e=this,t=this.options.search,n=this.options.remoteDataSource,r={};r[u]=[1,80],n.bindGroupHandler(u,{request:function(n,i){if(!i||!n)=r[u][0]&&estData({word:n,cate:t.getCate()},function(e,t){i(e)})},receive:function(e){return e}})},b.prototype.loadPlaceholderData=function(e,t){var n=this;this.queryInterface.excute("getPlaceHolderRecData",e,function(r){var i=n.filterHandler.excute("filterPlaceHolderRecData",r),s=i.version;n.setInterfaceVersion(s),t.apply(n,[i,r,e])})},b.prototype.loadSmartSuggestData=function(e,t){var n=this;e.pid=="shopping"&&!e.word?this.queryInterface.excute("getShoppingData",function(r){var i=n.filterHandler.excute("filterShoppingData",r);t.apply(n,[i,r,e])}):this.queryInterface.excute("getSmartSuggestData",e,function(r){var i=n.filterHandler.excute("filterSmartSuggestData",r),s=i.version;n.setInterfaceVersion(s),t.apply(n,[i,r,e])})},b.prototype.setInterfaceVersion=function(e){this.hotwordStorage.set("interface_version",e),this.fire("updateInterfaveVersion",{version:e})},b.prototype.getInterfaceVersion=function(){return this.hotwordStorage.set("interface_version")},b.prototype.loadBusinessData=function(e,t,n){typeof e=="function"&&(n=t,t=e,e={});var r=this;n&&this.cache.businessData?t.apply(this,[this.cache.businessData]):this.queryInterface.excute("getBusinessData",this.formatBusinessDataReqParams(e),function(n){n&&n.hotwordinject&&(r.cache.businessData=r.filterHandler.excute("filterBusinessData",n.hotwordinject)),t.apply(r,[r.cache.businessData,n,e])})},b.prototype.formatBusinessDataReqParams=function(e){try{return{pos:e.join(",")}}catch(t){return{}}},b.prototype.loadSuggestData=function(e,t){var n=this;this.loadSmartSuggestData({word:e.word,pid:e.cate},function(r){t.apply(n,[n.filterHandler.excute("filterSuggestData",r),r,e])})},b.prototype.loadHotwordData=function(e,t){var n=this,r=e.cate,i=hao360.channel.self;y()?this.loadPlaceholderData({pid:r},function(s){t.apply(n,[n.filterHandler.excute("filterPlaceHolderData",{cate:r,channel:i,rawData:s}),s,e])}):this.loadSmartSuggestData({pid:r},function(s){t.apply(n,[n.filterHandler.excute("filterHotwordData",{cate:r,channel:i,rawData:s}),s,e])})},b.prototype.cleanHistory=function(e){var t=this;this.queryInterface.excute("clearHistory",function(n){e.apply(t,[n])})},b.prototype.delHistory=function(e,t){var n=this;this.queryInterface.excute("deleteHistory",{q:e},function(e){t.apply(n,[e])})},b.prototype.closeHistory=function(e){var t=this;qboot.cookie.set(i,0),this.queryInterface.excute("closeHistory",function(n){e.apply(t,[n])})},b.prototype.openHistory=.cookie.set(i,1),this.queryInterface.excute("openHistory",function(n){e.apply(t,[n])})},b.prototype.getHistoryStatus=function(e){var t=this;return this.queryInterface.excute("getHistoryStatus",function(n){var r=n&&n.errno==0&&n.data=="on"?1:0;qboot.cookie.set(i,r),e&&e.apply(t,[!!r])}),qboot.cookie.get(i)},b.prototype.recordHistory=function(e){this.currentQuery=e},b.prototype.reloadHotwordData=function(e,t,n){var r=this,i=this.hotwordStorage,s=i.get(e),o=this.isValid(e)&&s;n&&o?t&&t.apply(this,[s]):r.loadHotwordData({cate:e},function(n){if(y()){var o=r.filterHandler.excute("convertPlaceHolderRenderData",n),u={list:o,mixinList:r.filterHandler.excute("convertMixinRenderData",o)};if(o.length>0)t&&t.apply(r,[u]),i.set(e,u),this.validCache(e);else{var a="data_error";s?(a="use_cache",t&&t.apply(this,[s])):(a="no_cache",t&&t.apply(this,[u])),r.fire("loadHotwordFail",{cate:e,reason:a,data:u,version:r.getInterfaceVersion()})}}else r.loadBusinessData(function(o){var u=r.filterHandler.excute("convertHotwordRenderData",{cate:e,hotwordData:n,businessData:o}),a={list:u},f=u&&u.length||0;if(f>=10)t&&t.apply(r,[a]),i.set(e,a),this.validCache(e);else{var l="data_error";s?l="use_cache":l="no_cache",t&&t.apply(this,[s]),r.fire("loadHotwordFail",{cate:e,reason:l,data:a,version:r.getInterfaceVersion()})}},!0)})},b.prototype.invalidCache=function(e){this.hotwordStorage.set("cate_invalid_"+e,!1)},b.prototype.isShowDiwen=function(){return window.searchInputPlaceHolderHot&&!!window.searchInputPlaceHolderHot.isOn&&VersionHub.is("so","search-diwen")},b.prototype.filterDiwenWord=function(e){var t="https://uadrec.so.360.cn/gasucs/user_ad_rec",n={mid:hao360.mid,huid:qboot.cookie.get("__huid"),src:"hao_360so_diwen_b_cube",count:1,_t:(new Date).getTime(),ret_type:"jsonp"},r=this,i=new AppData("api.hao.360.cn");qboot.jsonp(t,n,function(t){try{var n="";if(t&&t.status&&t.status.error===0&&t.data&&Object.isArray(t.data)&&t.data.length>0)r.searchDiwenWord=t.data[0].kw,n=t.data[0].q_attr,i.set("searchDiwenWord",t.data[0].kw),e&&e();else{var s=i.get("searchDiwenWord");r.searchDiwenWord=s,e&&e(),LogHub&&LogHub.behavior("search-diwenword","error")}if(r.searchDiwenWord){var o="https://s.qhupdate.com/so/click.gif?",u={pro:"so",pid:"llts",mod:"uadrec",src:"hao_360so_diwen_b_cube",mid:hao360.mid,p3:qboot.cookie.get("__huid"),nlpv:t&&t.ver?t.ver:"",type:"show",p1:r.searchDiwenWord,p2:n};logPureSender(o+qboot.encodeURIJson(u))}}catch(a){LogHub&&LogHub.behavior("search-diwenword","dataerror")}},{jsonp:"callback",timeout:5e3})},b.prototype.vali)},b.prototype.isValid=function(e){return this.hotwordStorage.get("cate_invalid_"+e)};var w=function(e){this.init(e)};w.prototype.constructor=w,w.prototype.defaultOptions={},w.prototype.init=function(e){QW.CustEvent.createEvents(this),this.options=qboot.mix(e||{},this.defaultOptions),this.inputSelector=this.options.inputSelector,this.containerSelector=this.options.containerSelector,this.searchHotwordSelector=this.options.searchHotwordSelector,this.newHotwordCountSelector=this.options.newHotwordCountSelector,this.searchHotwordTipsSelector=this.options.searchHotwordTipsSelector,this.reciAutoShowSelector=this.options.reciAutoShowSelector,this.reciAutoCloseSelector=this.options.reciAutoCloseSelector,this.reciNoHistorySelector=this.options.reciNoHistorySelector,this.reciCleanHistorySelector=this.options.reciCleanHistorySelector,this.hotwordGroupItemSelector=this.options.hotwordGroupItemSelector,this.selectItemSelector=this.options.selectItemSelector,this.suggestGroupItemSelector=this.options.suggestGroupItemSelector,this.version=this.options.version,this.placeHolderText=this.options.placeHolderText,this.placeHolderFixSelector=this.options.placeHolderFixSelector,this.mixinGroupSelector=this.options.mixinGroupSelector,this.mixinGroupItemSelector=this.options.mixinGroupItemSelector,this.mixinGroupHistoryListSelector=this.options.mixinGroupHistoryListSelector,this.mixinGroupHistoryItemSelector=this.options.mixinGroupHistoryItemSelector,this.mixinGroupHotRetrySelector=this.options.mixinGroupHotRetrySelector,this.$inputSelector=W(this.inputSelector),this.$searchHotword=W(this.searchHotwordSelector),this.$container=W(this.containerSelector),this.$newHotwordCount=W(this.newHotwordCountSelector),this.$searchHotwordTips=W(this.searchHotwordTipsSelector),this.$placeHolderFix=W(this.placeHolderFixSelector),this.multiWrapTpl=this.options.multiWrapTpl,this.multiItemTpl=this.options.multiItemTpl,this.suggestWrapTpl=this.options.suggestWrapTpl,this.normalWrapTpl=this.options.normalWrapTpl,this.normalItemTpl=this.options.normalItemTpl,this.suggestItemTpl=this.options.suggestItemTpl,this.mixinWrapTpl=this.options.mixinWrapTpl,this.mixinHisItemTpl=this.options.mixinHisItemTpl,this.mixinHisEmptyTpl=this.options.mixinHisEmptyTpl,this.mixinHotItemTpl=this.options.mixinHotItemTpl,this.mixinHotEmptyTpl=this.options.mixinHotEmptyTpl,this.mixinPerItemTpl=this.options.mixinPerItemTpl,this.cleanHistoryTpl=this.options.cleanHistoryTpl,this.ui=this.options.ui,this.search=this.options.search,this.cache={},this.data={},this.last={},this.historyStatus=!1,this.selectedSsid="",this.isItemSelEvt()},w.prototype.getItemText=function(e){return decodeURI(e.attr("data-text")||"")},w.prototype.getItemSsid=function(e){return e.attr("data-ssid")?e.attr("data-ssid").decode4Html():""},w.prototype.triggerDeleteItem=function(e){this.dispatch("itemDelete",{text:this.getItemText(e)})},w.prototype.triggerCtotype.triggerCustormClose=function(){this.closePanel(),this.dispatch("customClose")},w.prototype.triggerPlaceHolderRetry=function(){this.dispatch("placeHolderRetry")},w.prototype.triggerTextInputClick=function(){this.last={action:"click",content:""},this.hideNewHotwordCount(),this.setStateNewHotwordCount(),this.dispatch("textInputClick",null,!0)},w.prototype.triggerItemSelect=function(e,t){var n=null;e.attr("data-ssid")&&(n=e.attr("data-ssid").decode4Html()),this.dispatch("itemSelect",{index:t.index,ssid:n,text:this.getItemText(e),label:e.attr("data-label"),link:e.attr("data-href")||e.attr("href")}),this.closePanel()},w.prototype.triggerItemFocus=function(e,t){e.addClass("hover"),this.dispatch("itemFocus",null,!0)},w.prototype.triggerItemBlur=function(e){e.removeClass("hoverl,!0)},w.prototype.triggpatch("show")},w.prototype.triggeark()},w.prototype.triggerResetPosition=function(){this.dispatch("resetPos",null,!0)},w.prototype.triggerChange=function(e){this.last={action:"change",content:e},!e&&!qboot.cookie.get("reciDenyAutoShow")&&this.dispatchy:e})},w.prototype.triggerTextInputDown=function(){this.$searchHotword.fire("click")},w.prototype.triggeroseHistory")},w.prototype.triggerOpenHistory=function(){this.dispatch("openHistory")},w.prototype.adaptDataSrc=function(e,t,n,r){var i=this.search,s=i.getCate(),o=i.get()[1],a=i.engData[s][o][4].split(";"),f="",l=[],c={hao_360so:!0,hao_search:!0,dlm:!0,hao_360so_a1004:!0,hao_360so_a1111:!0,hao_360so_q0001:!0,hj_llqzq:!0,hj_llq2a:!0,hj_llq1:!0,hj_llq3:!0,hj_llq2c:!0,hj_llq1a:!0,hj_llq5:!0,hj_llq6:!0,hj_llq7:!0,hj_llq7a:!0,hj_llqzq:!0,hj_llqss:!0,hj_llqee:!0},h={somulti:!0,so360:!0,sonews:!1,sovideo:!1,soimage:!1,somusic:!1,somap:!1,sowenda:!1};QW.ArrayH.forEach(a,function(e){var t=e.split(":"),n=t[0],r=t[1];n==="src"&&(f=r)});if(f&&c[f]&&h[o]){l=[f],e&&l.push(e),n&&l.push(n),hao360.project==="cube"&&l.push(hao360.project);if(t){var p=hao360.queryUrl(t,"eci"),d=hao360.queryUrl(t,"nlpv");y()&&this.buildGroupType!==u?i.updateParams({nlpv:d},o,s):i.updateParams({eci:p,nlpv:d},o,s)}i.updateParams({src:l.join("_"),ssid:r?r:""},o,s),setTimeout(function(){i.updateParams({src:f},o,s)},10)}},w.prototype.triggerSubmit=function(e,t,n,r,i){var s=this.getVersion();e||(n="button",s=""),this.adaptDataSrc(n,r,s,i),this.dispatch("formSubmit",{input:e,query:t})},w.prototype.bindDelEvent=function(e){var t=this;e&&e.length&&e.query(".del").on("click",function(e){return e.preventDefault(),e.stopPropagation(),t.triggerDeleteItem(W(this).parentNode("a.item")),!1})},w.prototype.renderPlaceHolder=function(){var e=this.placeHolderText,t=this.ui,n=t.textInput,i=this.$placeHolderFix;n&&e&&(r?n.attr("placeholder).item(0).html(e),i.parentNode().show(),i.on("click",function(e){n.fire("mousedown")}))),this.adaptPlaceHolder()},w.prototype.adaptPlaceHolder=function(){var e=this.ui,t=e.getTextInputVal();this.triggerPlaceHolder(!t)},w.prototype.triggerPlaceHolder=function(e){var t=this.placeHolderText,n=this.ui,i=n.textInput,s=this.$placeHolderFix,o=this.search;if(o.cate!="webpage")return;r?e?i.attr("placeholder",t):i.attr("placeholder",""):e?s.show():s.hide()},w.prototype.setTextInputVal=function(e){var t=this.ui;this.triggerPlaceHolder(!e),t.setTextInputVal(e)},w.prototype.setItemSsid=function(e){this.selectedSsid=e},w.prototype.setItemSelectedVal=function(e){this.isItemSelected=e},w.prototype.destroyPlaceHolder=function(){var e=this.ui.textInput,t=this.$placeHolderFix;e&&(r?e.attr("placeholder",""):(t.parentNode().hide(),t.un("click")))},w.prototype.isPlaceHolder=function(){var e=this.ui.textInput,t=this.$placeHolderFix.parentNode();return r?e.attr("placeholder"):t&&t.css("display")!="none"},w.prototype.preSubmitForPlaceHolder=function(){var e=this,t=this.isPlaceHolder()?this.placeHolderText:"";t&&(e.setTextInputVal(t),setTimeout(function(){e.setTextInputVal("")},50))},w.prototype.adjustPosition=function(){var e=this.ui,t=e.wrap,n=W("#search-input"),r=n.getRect().bottom-W("#doc-view-front").getRect().top;netOffset=r,t.css({top:netOffset+"px"})},w.prototype.initUI=function(){var e=this,t=this.ui,n=this.search,r=this.hotwordGroupItemSelector,i=this.suggestGroupItemSelector,s=this.s!0;return{lock:function(){e=!0},unlock:function(){e=!1},isLock:function(){return e}}}();this.renderPlaceHolder(),t.searchForm.on("submit",function(n){var r=W(s),i=t.getFocusedGroup(),u=t.getTextInputVal(),a=t.query,f=r.attr("href"),l=r.attr("data-src"),c=e.selectedSsid,d=null;r.attr("data-ext")&&(d=r.attr("data-ext").decode4Html()),r.attr("data-ssid")&&(c=r.attr("data-ssid").decode4Html()),i==o&&r[0]&&f&&!p.isLock()&&(n.preventDefault&&n.preventDefault(),window.open(f),p.lock()),u||(e.preSubmitForPlaceHolder(),e.showSearchCarousel()&&qboot.events.fire("soHw:carousel:preSubmit",{querySys:e}),u=t.getTextInputVal()),h=u,e.triggerSubmit(u,a,l,d,c)}),t.textInput.on("mousedown",function(n){var r=t.getTextInputVal().trim(),i=t.isVisible(),s=qboot.cookie.get("reciDenyAutoShow");r||e.triggerPlaceHolder(!0),r==""&&(i||!s)?e.triggerTextInputDown():r!=""&&!i&&t.fire("change",{query:r}),e.showSearchCarousel()&&qboot.events.fire("soHw:carsousel:stop")}),t.textInput.on("keydown",function(n){var r=t.container.html()?!0:!1;!r&&n.keyCode==40&&t.getTextInputVal().trim()==""&&e.triggerTextInputDown();if(e.showSearchCarousel()){var i=n.keyCode;(i>47&&i<58||i==32||i>64&&i<91||i>95&&i<112||i>185&&i<193||i>218&&i<223||i==229)&&qboot.events.fire("soHw:carousel:hide"),i==8&&setTimeout(function(){t.getTextInputVal()===""&&qboot.events.fire("soHw:carousel:show")})}}),t.bindGroupHandler(o,{render:{setup:function(){c[o]=[]},build:function(r){if(!r)return;if(!(!r||t.query!=""&&e.last.action!="click")){var i=n.getCate(),s=r.type,u=e.build(o,i,s);return t.setGroupTotal(o,u.total),u.content.replace("checkedtmpl",qboot.cookie.get("reciDenyAutoShow")?"checked":"").replace("hCheckedtmpl",e.historyStatus==0?"checked":"")}e.toggleArrow(!1)},teardown:function(){c[o]=W(r),e.bindDelEvent(c[o])}},init:function(){t.initGroupMouseBehavior(o,r),t.container.delegate(r,"click",function(e){W(this).attr("href")||e.preventDefault()}),t.on("itemSelect",function(n){if(n.group!==o)return;if(n.index>-1&&c[o][n.index]){var r=c[o].item(n.index),i=e.getItemText(r),s=n.trigger;s!="keyboard"&&e.setTextInputVal(i),r.attr("href")?s=="keyboard"&&t.getTextInputVal()==i&&p.unlock():(e.setItemSelectedVal(!0),t.fire("enter",{trigger:s})),e.triggerItemSelect(r,n),e.triggerItemBlur(r)}}),t.on("itemFocus",function(n){if(n.group!==o)return;if(n.index>-1&&c[o][n.index]){var r=c[o].item(n.index);n.trigger==="keyboard"&&e.setTextInputVal(e.getItemText(r)),e.triggerItemFocus(r,n)}e.showSearchCarousel()&&n.trigger==="keyboard"&&(n.index!==-1?qboot.events.fire("soHw:carousel:hide"):t.query==""&&qboot.events.fire("soHw:carousel:show"))}),t.on("itemBlur",function(t){if(t.group!==o)return;t.index>-1&&c[o][t.index]&&e.triggerItemBlur(c[o].item(t.index),t)})}}),t.bindGroupHandler(f,{render:{setup:function(){c[f]=[]},build:function(r){if(!r)return;if(!(!r||t.query!=""&&e.last.action!="click")){var i=n.getCate(),s=r.type,o=e.build(f,i,s);return t.setGroupTotal(f,o.total),o.content.replace("checkedtmpl",qboot.cookie.get("reciDenyAutoShow")?"checked":"").replace("hCheckedtmpl",e.historyStatus==0?"checked":"")}e.toggleArrow(!1)},teardown:function(){c[f]=W(l),e.bindDelEvent,t.container.delegate(l,"click",function(e){W(this).attr("href")||e.preventDefault()}),t.on("itemSelect",function(n){if(n.group!==f)return;if(n.index>-1&&c[f][n.index]){var r=c[f].item(n.index),i=e.getItemText(r),s=n.trigger;s!=="keyboard"&&e.setTextInputVal(i),r.attr("href")?s=="keyboard"&&t.getTextInputVal()==i&&p.unlock():t.fire("enter",{trigger:s}),e.triggerItemSelect(r,n),e.triggerItemBlur(r)}}),t.on("itemFocus",function(n){if(n.group!==f)return;var r=function(e){var t=c[f].item(e);return t&&(t.hasClass("history")&&t.css("visibiss("personal"))},i=function(){return QW.ArrayH.filter(c[f],function(e,t){return r(t)})},s=i().length;n.trigger==="keyboard"&&r(n.index)&&(n.triggerType==="up"?n.index=n.index-s:n.triggerType==="down"&&(n.index=n.index+s,n._cb&&n._cb(n.index)),n._cb&&n._cb(n.index));if(n.index>-1&&c[f][n.index]){var o=c[f].item(n.index);n.trigger==="keyboard"&&e.setTextInputVal(e.getItemText(o)),e.triggerItemFocus(o,n)}e.showSearchCarousel()&&n.trigger==="keyboard"&&(n.index!==-1?qboot.events.fire("soHw:carousel:hide"):t.query==""&&qboot.events.fire("soHw:carousel:show"))}),t.on("itemBlur",function(t){if(t.group!==f)return;t.index>-1&&c[f][t.indur(c[f].item(t.index),t)})}}),t.bindGroupHandler(u,{render:{setup:function(){c[u]=[]},build:function(){var n=0;return function(r){if(r&&r.length){var i=e.build(u,r);return t.setGroupTotal(u,i.total),n!=i.total&&(n=i.total),i.content}return""}}(),teardown:function(){c[u]=W(i),e.bindDelEvent(c[u])}},init:function(){t.initGroupMouseBehavior(u,i),t.container.delegate(u,"click",function(e){e.preventDefault()}),t.on("itemSelect",function(n){if(n.group!==u)return;if(n.index>-1&&c[u][n.index]){var r=c[u].item(n.index);n.trigger!="keyboard"&&e.setTextInputVal(e.getItemText(r)),e.setItemSelectedVal(!0),t.fire("enter",{trigger:n.trigger}),e.triggerItemSelect(r,n),e.triggerItemBlur(r)}}),t.on("itemFocus",function(n){if(n.group!==u){e.setItemSsid("");return}if(n.index>-1&&c[u][n.index]){var r=c[u].item(n.index);n.trigger==="keyboard"&&(e.setTextInputVal(e.getItemText(r)),e.setItemSsid(e.getItemSsid(r))),e.triggerItemFocus(r,n)}e.showSearchCarousel()&&n.trigger==="keyboard"&&(n.index!==-1?qboot.events.fire("soHw:carousel:hide"):t.query==""&&qboot.events.fire("soHw:carousel:show"))}),t.on("itemBlur",function(t){if(t.group!==u)return;t.index>-1&&c[u][t.index]&&e.triggerItemBlur(c[u].item(t.index),t)})}}),t.on("show",function(n){W(r).length>0?e.mark(o):W(i).length>0?e.mark(u):W(a).length>0&&e.mark(f),t.getTextInputVal().tsetHisItemVisib1)}),t.on("change",function(t){var n=t.query;e.triggerChange(n),e.adaptPlaceHolder()}),t.on("resetPos",function(t){e.triggerResetPosition()}),W(document).receive("search-cate-change",function(e){t.query==""&&W("#suggest-reci")[0]&&(t.fillContent(),t.query=t.getTextInputVal())}),W(document).on("mouseup",function(n){var r=W(n.target);if(r[0]==document)return;(!r.attr("id")||["search-kw","search-hotword","suggest-container"].indexOf(r.attr("id"))==-1)&&!r.parentNode("#search-kw")[0]&&!r.parentNode("#suggest-container")[0]&&!r.parentNode("#search-hotword")[0]&&!r.parentNode(".ie-placeholder-wrapper")[0]&&t.hide(),r.parentNode("#search-input")[0]||e.adaptPlaceHolder()}),W(window).on("blur",function(e){t.hide()})},w.prototype.addAntiSpamCp=function(e){var t=this.search,n=this.ui,r=n.searchForm,i=SoUtils.encp(e||"");if(t.cate!=="webpage"){r.query('input[name="cp"]').removeNode();return}r.query('input[name="cp"]').length<1&&r.insert("beforeend",'<input type="hidden" name="cp"/>'),r.query('input[name="cp"]').val(i)},w.prototype.bindEvt=function(){var e=this,t=this.$container,n=this.$searchHotword,r=this.$newHotwordCount,i=this.reciNoHistorySelector,s=this.reciAutoShowSelector,o=this.reciAutoCloseSelector,u=this.reciCleanHistorySelector,a=this.mixinGroupHotRetrySelector;n.on("click",function(t){e.triggerTextInputClick(),e.focus(),e.changeShutdown(),e.showSearchCarousel()&&qboot.events.fire("soHw:carsousel:stop")}),r.on("click",function(){e.triggerTextInputClick(),e.focus(),e.changeShutdown(),LogHub.behavior("suggest","newHotwordCount"),e.showSearchCarousel()&&qboot.events.fire("soHw:carsousel:stop")}),t.delegate(s,"click",function(t){W(this).attr("checked")?e.hideAutoCloseTip():e.showAutoCloseTip()}).delegate(i,"click",function(t){W(this).attr("checked")?e.triggerCloseHistory():e.triggerOpenHistory()}).delegate(o,"click",function(t){e.triggerCustormClose()}).delegate(u,"click",function(t){e.triggerCleanHistory()}).delegate(a,"click",function(t){e.triggerPlaceHolderRetry()})},w.prototype.showSearchCarousel=function(){return g()&&this.search.cate==="webpage"},w.prototype.update=function(e,t){if(y())if(this.data[e])for(var n in t)this.data[e][n]=t[n];else this.data[e]=t;else this.data[e]=t},w.prototype.setHistoryStatus=function(e){this.historyStatus=.$searchHotwordTips;e.fadeIn(1e3,function(){setTimeout(functioneTip=function(){this.$searchHotwordTips.fadeOut(1e3),this.triggerAutoCloseChange(!1)},w.prototype.triggerAutoCloseChange=function(e){this.dispatch("denyAutoShow",{close:+e})},w.prototype.closePanel=function(){this.ui.hide()},w.prototype.showPanel=function(){var e=this.ui;e.on("change",function(t){e.hide(),e.un("change",arguments.callee)})},w.prototype.renderPanel=function(e){var t={};t[e.group]={type:e.type},this.ui.render(t)},w.prototype.switchTo=function(e){var t=e.group,n=e.refresh;this.last.refresh=!!n;switch(t){case o:this.toggleArrow(!0),this.renderPanel(e);break;case f:this.toggleArrow(!0),this.renderPanel(e);break;case u:this.toggleArrow(!1),this.renderPanel(e);break;case a:this.toggleArrow(!1),this.closePanel()}delete this.last.refresh},w.prototype.mark=function(e){var t=this.$container,n=t.attr("data-group"),r=t.attr("data-type"),i=this.current();t.attr("data-group",e).removeClass(n).addClass(e).attr("data-type",i).removeClass(r).addClass(i)},w.prototype.unMark=function(){var e=this.$container,t=e.attr("data-group"),n=e.attr("data-type");e.attr("data-group","").removeClass(t).attr("data-type","").removeClass(n)},w.prototype.getGroup=function(){return this.$container.attr("data-gon=function(){return this.version},w.prototype.setVersion=function(e){this.version=e},w.prototype.dispatch=function(e,t,n){t=t||{},n||(t=qboot.mix(this.collectEnvParams(),t,!0)),this.fire(e,{params:t})},w.prototype.collectEnvParams=function(){return{cate:this.search.getCate(),eng:this.search.get()[1],group:this.getGroup(),type:this.current(),orgin:this.last.action,refresh:this.last.refresh,version:this.getVersion()}},w.prototype.setHisItemVisible=function(){if(!y())return;var e=W(this.mixinGroupHistoryListSelector),t=W(this.mixinGroupHistoryItemSelector),n=e.getRect();t.forEach(function(e){var t=W(e),r=t.getRect();Dom.rectContains(n,r)||t.css("visibility","hidden")})},w.prototype.inputStyleUpdate=function(e){if(!s)return;var t=this.$inputSelector.parentNode(),n=e?"addClass":"removeClass";t[n]("sgopen")},w.prototype.focus=function(){this.ui.focusTextInput()},w.prototype.toggleArrow=function(e){va]("open")},w.prototycurrent=function(){return this.$container.query(".suggest-bd>div").attr("data-type")},w.prototype.build=function(e,t,n){var r=this.data,i=[];e==o&&(i=r[t]||{list:[]}),e===f&&(i=r[t]||{list:[],mixinList:{}}),e==u&&(n=h,i={list:t});try{return{total:e===f?i.mixinList.total||0:i.list.length,content:this.buildFragement(n,i)}}catch(s){return DEBUG&&console.error(s),{total:0,content:""}}},w.prototype.buildFragement=function(e,t){var n=this,r=!y()||e!=="normal"&&e!=="multi"?this[e+"ItemTpl"]:this[e+"ItemTplBeta"],i=this[e+"WrapTpl"];this.buildGroupType=e;if(y()&&e===f){var s=t.mixinList.his.length,o=t.mixinList.hot.length,u=t.mixinList.per.length;return R.tmpl(i,{cleanHisContent:s>0?n.cleanHistoryTpl:"",hisContent:s>0?QW.ArrayH.map(t.mixinList.his,function(e,t){return e.index=t,R.tmpl(n.mixinHisItemTpl,e)}).join(""):n.mixinHisEmptyTpl,perContent:QW.ArrayH.map(t.mixinList.per,function(e,t){return e.index=s+t,R.tmpl(n.mixinPerItemTpl,e)}).join(""),hotContent:o>0?QW.ArrayH.map(t.mixinList.hot,function(e,t){return e.index=s+u+t,e.serial=t+1,R.tmpl(n.mixinHotItetyTpl})}return R.tmpl(i,{content:QW.ArrayH.map(t.list,function(e){return R.tmpl(r,e)}).join("")})},w.prototype.setNewHotwordCount=function(e){var t=qboot.cookie.get("click_hotword_count");t!=="1"&&(this.$newHotwordCount.html(e),this.showNewHotwordCount(),LogHub.behavior("suggest","showNewHotwordCount"))},w.prototype.showNewHotwordCount=function(){var e=qboot.cookie.get("click_hotword_count");e!=="1"&&this.sount.show()},w.prototype.hideNewHotwordCount=function(){this.$newHotwordCount.hide()},w.prototype.setStateNewHotwordCount=function(){this.sear.cookie.set("click_hotword_count",1,{expires:828e5})};var E=function(e){this.init(e)};E.prototype.constructor=E,E.prototype.defaultOptions={},E.prototype.init=function(n){var r=this,i=W("#search-kw")[0],o=W("#search-input")[0],u=W("#suggest-container")[0],a=W("#suggest-container .suggest-bd")[0];QW.CustEvent.createEvents(this),this.options=qboot.mix(n||{},this.defaultOptions),this.suggest=new qSuggest(i,{uiReferElem:o,uiWrapElem:u,uiContainerElem:a,posAdjust:{width:s?-4:-2,top:0},recAllTimeout:Browser.webkit?0:120}),this.search=search,this.ui=this.suggest.ui,this.data=this.suggest.data,this.model=new b({remoteDataSource:this.data,"interface":{namespace:"hao_360so",host:STATIC_CONFIG.search.soSmartSuggest,timeout:5e3,baseParams:{},apiMap:{getShoppingData:{url:t.host+"/"+t.api,params:{fmt:"jsonp","m[]":"hotword,"+t.v+","+t.r},jsonpName:"_callback"},getBusinessData:{url:e.host+"/"+e.api,params:{pos:"5,7,9","m[]":"hotwordinject,"+e.v+","+e.r,crec:function(){var e=window.personalization;return e?e.getData("ad")?0:1:0}()},jsonpName:"_callback"},getPlaceHolderRecData:{url:"//api.ssl.so.com/placeholder_rec",params:{crec:function(){var e=window.personalization;return e?e.getData("content")?0:1:0}(),pid:"webpage",src:hao360.channel.lm?"dlm_null":"hao_360so_null",hisnum:20,huid:qboot.cookie.get("__huid"),asc:hao360.asc||""},jsonpName:"callback",cache:!1},getSmartSuggestData:{api:"suggest",params:{crec:function(){var e=window.personalization;return e?e.getData("content")?0:1:0}(),pid:"webpage",word:"",srcg:"",src:hao360.channel.lm?"dlm_suggest":"hao_360so_suggest",encodein:"utf-8",encodeout:"utf-8",count:10},jsonpName:"callback",cache:!1},deleteHistory:{api:"historyDelete",jsonpName:"callback",params:{src:"hao_home",q:""},cache:!1},clearHistory:{api:"historyClear",jsonpName:"callback",params:{src:"hao_home"},cache:!1},closeHistory:{api:"historyClose",jsonpName:"callback",params:{src:"hao_home"},cache:!1},openHistory:{api:"historyOpen",jsonpName:"callback",params:{src:"hao_home"},cache:!1},getHistoryStatus:{api:"historyStatus",jsonpName:"callback",params:{src:"hao_home"},cache:!1}}},filterHandler:{filters:{filterShoppingData:function(e){try{var t=e.hotword.shopping;if(t&&t.length)return QW.ArrayH.map(t,function(e){return{n:e[2],q:e[0],t:"hot",href:e[1]}});return}catch(n){return}},filterPlaceHolderRecData:function(e){if(e&&e.errno==0&&e.data){var t=r.search.getCate();return r.view.data[t]={ssid:e.ssid},{src:e.src||"",ssid:e.ssid||"",ext:e.ext||"",data:e.data,version:e.abv||""}}return!1},filterSmartSuggestData:function(e){return e&&e.errno==0&&e.data?(e.data.version=e.abv||"",e.data):!1},checkBusinessData:function(e){var t={};for(var n in e)for(var r=0,i;r<e[n].length;r++)i=e[n][r],v(i)&&(t[n]=i.data);return t},formatChannelData:function(e){var t={a1004:!0,q0001:!0,a1111:!0},n=urn!t[r]||n!="webpage"&&n!="news"?i:QW.ArrayH.map(i,function(e){return e.channel=r,e})},formatBusinessData:function(e){for(var t in e){var n=e[t],r=n[0],i=n[1];e[t]={text:r,href:i,news:!!n[2],label:b.QUERY_DATA_BUSINESS}}return e},formatSuggestData:function(e){if(e&&e.query&&e.result&&e.result.length>0)return{query:e.query,data:e.result,ext:e.ext||"",ssid:e.ssid||"",sp:e.sp||""}},formatSuggestRenderData:function(e){if(e){var t=e.data,n=e.query,r=e.ext.encode4HtmlValue(),i=e.ssid.encode4HtmlValue(),s=n.length,o=0;e.data=QW.ArrayH.filter(QW.ArrayH.map(t,function(e,t){e.word=e.word.encode4Html();var u=e.resrc=="his",a=e.word.trim().toLowerCase(),f=a,l=b.getDataSrc(b.QUERY_DATA_SUGGEST)+(u?"_history":"");return a===n?(o-=1,!1):(a.indexOf(n)===0&&(f=n+"<b>"+a.substring(s)+"</b>"),{src:l,text:hao360.escapeHTML(e.word),index:t+o,encodeText:encodeURI(e.word),suggest:f,ext:r,ssid:i,label:b.getDataType(b.QUERY_DATA_SUGGEST),itemClass:["item",e.resrc].join(" "),extraDom:u?'<span class="del">\u5220\u9664</span>':""})}),function(e){return!!e})}return e},mergeHotwordData:function(e){var t=e.cate||"webpage",n=e.hotwordData||[],r=e.businessData||{};if(t==="webpage")for(var i in r)n[i-1]=r[i];return n.slice(0,10)},formatHotwordRenderData:function(e){var t=e||[];return QW.ArrayH.map(t,function(e,n){var r=b.getDataType(e.label),i=b.getDataSrc(e.label),s=n+1===t.length,o=e.label===b.QUERY_DATA_HISTORY;return{src:i,hotCls:n<3?"hot":"",newCls:+e.news?"new":"",href:e.href||"",text:hao360.escapeHTML(e.text),encodeText:encodeURI(e.text),index:n,serial:n+1,label:r,itemClass:["item",r].join(" "),extraDom:o?'<span class="del">\u5220\u9664</span>':""}})},formatHotwordData:function(e){return!e||!e.length?[]:QW.ArrayH.map(e,function(e){var t=b.QUERY_DATA_DEFAULT;switch(e.t){case"his":t=b.QUERY_DATA_HISTORY;break;case"rec":t=b.QUERY_DATA_RECOMMEND;break;case"hot":t=b.QUERY_DATA_NEWS}return{label:t,text:e.q,channel:e.channel,news:!!e.n,href:e.href}})},deDuplicatioData:function(e){var t={};return QW.ArrayH.filter(e,function(e){return t[e.text]?,filterEmptyItem:function(e){return e=e||[],QW.ArrayH.filter(e,function(e){return!!e})},formatPlaceHolderChannelData:function(e){var t={a1004:!0,q0001:!0,a1111:!0},n=e.cate,r=e.channel,i=e.rawData;return t[r]&&(n=="webpage"||n=="news")&&(i.channel=r),i
},formatPlaceHolderData:function(e){if(!(e&&e.data&&e.data.length))return[];var t=e.data,n=e.channel,r=e.ext.encode4HtmlValue(),i=e.ssid.encode4HtmlValue(),s=QW.ArrayH.map(t,function(e,t){var s=function(e){var t=b.QUERY_DATA_DEFAULT;switch(e){case"his":t=b.QUERY_DATA_HISTORY;break;case"hot":t=b.QUERY_DATA_NEWS;break;case"personal":t=b.QUERY_DATA_PERSONAL}return t}(e.t);return{label:s,ext:r,ssid:i,channel:n,text:e.q,news:e.n==="1",href:e.href,face:e.face?e.face:e.t==="personal"?"https://hao1.qhimg.com/t01176ae5e67713e9b1.png":""}});return s},formatPlaceHolderRenderData:function(e){var t=e||[];return QW.ArrayH.map(t,function(e,t){var n=b.getDataType(e.label),r=b.getDataSrc(e.label),i=e.label===b.QUERY_DATA_HISTORY,s=e.label===b.QUERY_DATA_NEWS,o=hao360.clipImage(e.face,{whq:"14_14_75",webp:!0});return{ssid:e.ssid,ext:e.ext,src:r,hotCls:e.label===b.QUERY_DATA_NEWS?"hot":"",newCls:+e.news?"new":"",href:e.href||"",text:hao360.escapeHTML(e.text),encodeText:encodeURI(e.text),index:t,serial:t+1,label:n,face:o,itemClass:["item",n].join(" "),extraDom:function(){return i?'<span class="del"><i></i></span>':s&&o?'<span class="face"><img src="'nction(e){var t=function(t){return QW.ArrayH.filter(e,function(e){return e.src===t})};return{his:t("history"),hot:t("hot").slice(0,9),per:t("personal")}},deDuplicationHisData:function(e){if(e.his&&e.his.length>0){var t={};e.his=QW.ArrayH.filter(e.his,function(e){return t[e.text]?!1:(t[e.text]=!0,!0)})}return e},mergePersonalMajiaData:function(e){var t=e.per.length,n=6;if(t<n){var r=window.MAJIA_SDK_DATA&&MAJIA_SDK_DATA.searchSoPersonal||[],i=QW.ArrayH.map(r,function(e,t){var n=b.getDataType(b.QUERY_DATA_PERSONAL),r=b.getDataSrc(b.QUERY_DATA_PERSONAL),i=e.icon||"https://hao1.qhimg.com/t015b131fc07d45c027.png";return{ssid:"",ext:"",src:r,label:n,itemClass:["item",n].join(" "),face:hao360.clipImage(i,{whq:"14_14_75",webp:!0}),text:e.title,encodeText:encodeURI(e.title),href:e.url||""}});e.per=e.per.concat(i)}return e.per=e.per.slice(0,n),e},mixinDataTotal:function(e){var t=0;for(var n in e)t+=e[n].length;return e.total=t,e}},rules:{filterBusinessData:["checkBusinessData","formatBusinessData"],filterSuggestData:["formatSuggestData","formatSuggestRenderData"],filterHotwordData:["formatChannelData","formatHotwordData","deDuplicatioData"],convertHotwordRenderData:["mergeHotwordData","formatHotwordRenderData","filterEmptyItem"],filterPlaceHolderData:["formatPlaceHolderChannelData","formatPlaceHolderData"],convertPlaceHolderRenderData:["formatPlaceHolderRenderData","filterEmptyItem"],convertMixinRenderData:["filterMixinSrcData","deDuplicationHisData","mergePersonalMajiaData","mixinDataTotal"]}},search:this.search,hotwordStorage:{key:"multi-hotword",expires:1728e5},mixinHotwordStorage:{key:"mixin-hotword",expires:1728e5}}),this.view=new w({placeHolderText:d(),placeHolderFixSelector:"#search-input .ie-placeholder-wrapper .placeholder",containerSelector:"#suggest-container",inputSelector:"#search-kw",searchHotwordSelector:"#search-hotword",newHotwordCountSelector:"#search-new-hotword-count",searchHotwordTipsSelector:"#search-hotword-tips",reciAutoShowSelector:"#reci-auto-show",reciAutoCloseSelector:"#reci-auto-close",reciNoHistorySelector:"#reci-no-history",reciCleanHistorySelector:"#reci-clean-history",hotwordGroupItemSelector:"#suggest-reci>a",suggestGroupItemSelector:"#suggest-common>a",selectItemSelector:"#suggest-container>.suggest-bd a.hover",mixinGroupSelector:"#suggest-reci>.reci-inner",mixinGroupItemSelector:"#suggest-reci>.reci-inner .item",mixinGroupHistoryListSelector:"#suggest-reci .reci-his_list",mixinGroupHistoryItemSelector:"#suggest-reci .reci-his_list a.item",mixinGroupHotRetrySelector:"#reci-hot-retry",search:this.search,ui:this.ui,version:this.model.getInterfaceVersion(),multiWrapTpl:'<div id="suggest-reci" data-type="multi" style="background:none;">                    {content}                     <div class="reci-setting">                        <label for="reci-auto-show">                            <input id="reci-auto-show" type="checkbox" checkedtmpl/>\u4e0d\u518d\u81ea\u52a8\u663e\u793a                        </label>                        <label id="reci-clean-history" href="javascript:void(0);">\u6e05\u7a7a\u5386\u53f2\u8bb0\u5f55</label>                        <label class="mul-declare">\u7531360\u641c\u7d22\u63d0\u4f9b</label>                    </div>                 </div>',normalWrapTpl:'<div id="suggest-reci" data-type="normal">                     {content}                    <div class="reci-setting">                        <label for="reci-auto-show">                            <input id="reci-auto-show" type="checkbox" checkedtmpl/>\u4e0d\u518d\u81ea\u52a8\u663e\u793a                        </label>                        <label class="mul-declare">\u7531360\u641c\u7d22\u63d0\u4f9b</label>                    </div>                </div>',suggestWrapTpl:'<div id="suggest-common" data-type="suggest">{content}</div><label class="suggest-declare">\u7531360\u641c\u7d22\u63d0\u4f9b</label>',multiItemTpl:'<a class="{itemClass}" href="{href}" data-text="{encodeText}" data-label="{label}" data-index="{index}" data-src="{src}">                     <span class="text">{text}</span>                    {extraDom}                </a>',multiItemTplBeta:'<a class="{itemClass}" href="{href}" data-text="{encodeText}" data-label="{label}" data-index="{index}" data-src="{src}" data-ext="{ext}" data-ssid="{ssid}">                 <span class="text">{text}</span>                {extraDom}            </a>',normalItemTpl:'<a class="{itemClass}" href="{href}" data-text="{encodeText}" data-label="{label}" data-index="{index}" data-src="{src}">                     <em></em>                    <span class="{newCls} text">{text}</span>                    {extraDom}                </a>',normalItemTplBeta:'<a class="{itemClass}" href="{href}" data-text="{encodeText}" data-label="{label}" data-index="{index}" data-src="{src}" data-ext="{ext}" data-ssid="{ssid}">                 <em></em>                <span class="{newCls} text">{text}</span>                {extraDom}            </a>',suggestItemTpl:'<a class="{itemClass}" data-text="{encodeText}" data-label="{label}"  data-index="{index}" data-src="{src}" data-ext="{ext}" data-ssid="{ssid}">                     <span class="text">{suggest}</span>                    {extraDom}                </a>',mixinWrapTpl:'<div id="suggest-reci" class="gclearfix" data-type="mixin">                 <div class="reci-inner">                    <div class="reci-col_lt">                        <div class="reci-his">                            <div class="reci-his_top gclearfix">                                <span class="reci-his_tit">\u641c\u7d22\u5386\u53f2:</span>                                {cleanHisContent}                            </div>                            <div class="reci-his_list gclearfix" id="sug-reci-his">                                {hisContent}                            </div>                        </div>                        <div class="reci-per">                            <div class="reci-per_list gclearfix" id="sug-reci-per">                                {perContent}                            </div>                        </div>                    </div>                    <div class="reci-col_rt">                        <div class="reci-hot">                            <div class="reci-hot_top gclearfix">                                <span class="reci-hot_tit">\u5b9e\u65f6\u70ed\u641c:</span>                            </div>                            <div class="reci-hot_list">                                {hotContent}                            </div>                        </div>                        <div class="reci-setting gclearfix">                            <label class="reci-set_show" for="reci-auto-show">                                <input id="reci-auto-show" type="checkbox" checkedtmpl/>\u4e0d\u518d\u81ea\u52a8\u663e\u793a                            </label>                            <label class="reci-set_declare">\u7531360\u641c\u7d22\u63d0\u4f9b</label>                        </div>                    </div>                </div>            </div>',mixinHisItemTpl:'<a class="{itemClass}" href="{href}" data-text="{encodeText}" data-label="{label}" data-index="{index}" data-src="{src}" text="{text}" data-ext="{ext}" data-ssid="{ssid}">                     <span class="text" title="{text}">{text}</span>                    {extraDom}                </a>',mixinHisEmptyTpl:'<div class="empty">                    <span class="img"><img src="https://hao1.qhimg.com/t01d025094563a298eb.png" srcset="https://hao1.qhimg.com/t01a9e1aa77bb299613.png 2x" width="160" height="80"/></span>                    <span class="txt">\u65e0\u641c\u7d22\u5386\u53f2\uff0c\u8d76\u5feb\u53bb\u641c\u7d22\u5427~</span>                </div>',mixinPerItemTpl:'<a class="{itemClass}" href="{href}" title="{text}" data-text="{encodeText}" data-label="{label}" data-index="{index}" data-src="{src}" text="{text}" data-ext="{ext}" data-ssid="{ssid}">                    <img src="{face}" class="icon" width="14" height="14"/>                    <span class="text">{text}</span>                    </a>',mixinHotItemTpl:'<a class="{itemClass}" href="{href}" title="{text}" data-text="{encodeText}" data-label="{label}" data-index="{index}" data-src="{src}" text="{text}" data-ext="{ext}" data-ssid="{ssid}">                     <b class="serial{serial}">{serial}.</b>                    <span class="text {newCls}">{text}</span>                    {extraDom}                </a>',mixinHotEmptyTpl:'<div class="empty">                    <span class="img"><img src="https://hao1.qhimg.com/t01f6677b91e41b53e7.png" srcset="https://hao1.qhimg.com/t0187bc1ee4794bf042.png 2x" width="150" height="93"/></span>                    <span class="txt">\u6570\u636e\u5f02\u5e38~</span>                    <span class="retry" id="reci-hot-retry"><b></b>\u70b9\u51fb\u5237\u65b0</span>                </div>',cleanHistoryTpl:'<span class="reci-his_clean" id="reci-clean-hhis.bindEvt()},E.prototype.refresh=function(){this.switchTo(this.view.getGroup(),!0)},E.prototype.switchTo=function(e,t){var n=this,r=this.view,i=this.model,s=this.search,h=s.getCate(),d=c,v={group:e,cate:h,type:d,refresh:!!t},m=!t;switch(e){case a:r.switchTo(v);bre&&e.list){var t=QW.ArrayH.some(e.list,function(e){return e.src!=="hot"&&e.src!=="ad"});t&&(v.type=l),r.update(h,e),r.switchTo(v)}else n.fire("switchToHotwordFail",{reason:"no_data",cate:h})},m);break;case f:i.reloadHotwordData(h,function(e){e&&e.list?(v.type=p,r.update(h,e),r.switchTo(v)):n.fire("switchToHotwordFail",{reason:"no_data",cate:h})},m);break;case u:var g=this.ui.query;this.data.setOne(u,g,null),this.ui.fire("change",{query:g});break;default:}},E.prototype.showSearchCarousel=function(){return g()&&this.search.cate==="webpage"},E.prototype.logHubReplaceParams=function(e){if(!y())return e;if(e.group===f){var t=W(this.view.mixinGroupHistoryItemSelector).length;qboot.mix(e,{group:o,type:t?l:c},!0)}return e},E.prototype.bindEvt=function(){var e=this,t=this.view,r=this.model,i=this.search,s=this.ui;CustomEventHub.on(CustomEventHub.Interface_RequestComplete,function(e){var t=e.data,n=t.status,r=t.namespace,i=t.key,s=t.reason,o=t.params;r=="hao_360so"&&(i=="getSmartSuggestData"?o&&o.word==""?i="getHotword":i="getSuggest":i=="getPlaceHolderRecData"&&(i="getHotword"),n=="error"&&LogHub.reci("error",{namespace:r,key:i,reason:s}))}),r.on("loadHotwordFail",function(e){LogHub.reci("error",{namespace:"hao_3e.cate})}),r.on("updateInterfaveVersion",function(e){var n=e.version;t.setVersion(n)}),e.on("switchToHotwordFail",function(e){LogHub.reci("error",{namespace:"hao_360so",key:"showHotword",reason:e.reason,cate:e.cate})}),i.on("catechange",function(n){var i=n.cate;i=="webpage"?(t.renderPlaceHolder(),t.showNewHotwordCount()):(t.destroyPlaceHolder(),t.hideNewHotwordCount()),n.isLoadSug?(e.suggest.enable(),e.view.$searchHotword.show(),r.reloadHotwordData(i,null,!1)):(e.suggest.disable(),e.view.$searchHotword.hide()),g()&&qboot.events.fire("soQs:view:cateChange",{cate:i,ui:s})}),t.on("textInputClick",function(n){t.isOpen()||!e.search.getIsLoadSug(e.search.cate)?e.switchTo(a):y()?e.switchTo(f):e.switchTo(o)}),t.on("empty",function(t){y()?e.switchTo(f):e.switchTo(o),e.showSearchCarousel()&&s.getTextInputVal()==""&&qboot.events.fire("soHw:carousel:show")}),t.on("itemSelect",function(t){var r=t.params,i=r.group,s=r.eng,a=r.index,l=r.text,c=r.ssid,h=e.suggest.renderQuery,p=e.suggest.query;i===o?LogHub.reci("click",r):i===u?(n("itemSelect[COMMON] index:"+a),LogHub.suggest("commonClk",{inputKw:h,suggestKw:l,index:a,eng:s,ssid:c}),h!=p&&LogHub.behavior("suggest","queryIsDifferent")):i===f&&LogHub.reci("click",e.logHubReplaceParams(r)),e.showSearchCarousel()&&qboot.events.fire("soHw:carousel:hide")}),t.on("formSubmit",function(n){var i=n.params,u=i.input,a=i.query,f=i.cate;u&&u.trim()&&(r.recordHistory(u),r.invalidCache(f),e.data.cleanAll()),u==a&&LogHub.suggest("nosuggestClk",{inputKw:u}),i.group!==o&&LogHub.search("query",{query:u});var l="";if(t.isItemSelected){var c=s.getFocusedGroup();l=c===o?"001":e.data.suggestCp||"",t.setItemSelectedVal(!1)}t.addAntiSpamCp(l)}),t.on("placeHolderRetry",function(t){e.refresh(),LogHub&&LogHub.behavior("search-placeholder","retry")}),t.on("cleanHistory",function(t){r.cleanHistory(function(t){e.refresh()}),LogHub.reci("clean",e.logHubReplaceParams(t.params))}),t.on("closeHistory",function(t){r.closeHistory(function(t){e.refresh()}),LogHub.reci("closeHistory",t.params)}),t.on("openHistory",function(t){r.openHistory(function(t){e.refresh()}),LogHub.reci("openHistory")}),t.on("itemDelete",function(t){var n=t.params;r.delHistory(n.text,function(t){e.rlaceParams(t.params))}),t.on("customClose",function(e){LogHub.reci("close",e.params)}),t.on("show",function(n){var r=n.params,i=r.refresh;if(!i){if(y()){var s=e.search.getCate(),o=t.data,u=o[s].ssid||"";r.ssid=u}LogHub.reci("show",e.logHubReplaceParams(r))}}),t.on("resetPos",function(e){t.adjustPosition()}),t.on("change",function(e){W("#search-kw").tweet("query-change",{query:e.params.query})}),t.on("denyAutoShow",function(t){var n=t.params,r=n.close;r?qboot.cookie.set("reciDenyAutoShow",1,{expires:31536e6}):qboot.cookie.remove("reciDenyAutoShow"),LogHub.reci("denyAutoShow",e.logHubReplaceParams(n))})},E.prototype.prepare=function(e){var t=this.model,e=e||this.search.getCate(),n=this.view,r=t.isShowDiwen;t.reloadHotwordData(e,function(e){if(!e)return;var t=0;if(y()){var r=e.mixinList.his,i=e.mixinList.hot;QW.ArrayH.forEach(i,function(e,n){e.newCls==="new"&&t++}),r.length<=0&&t&&n.setNewHotwordCount(t)}else{var s=QW.ArrayH.some(e.list,function(e){return e.newCls==="new"&&t++,e.srfilterDiwenWord(function(){n.placeHolderText=t.searchDiwenWord,n.renderPlaceHolder()})},window.QuerySystem=E}(),qboot.load(function(){var e=VersionHub.is("search","search_beta");e?document.getElementById("suggest-container")||QW.W("#doc-view-front").insertAdjacentHTML("beforeend",'<div id="suggest-container" style="visibility: hidden;"><div class="suggest-line"></div><div class="suggest-bd"></div></div>'):document.getElementById("suggest-container")||QW.W("#doc-view-front").insertAdjacentHTML("beforeend",'<div id="suggest-container" style="visibility: hidden;"><div class="suggest-bd"></div></div>')},function(){var e=new QuerySystem;e.prepare(),hao360.project==="cube"&&VersionHub&&(VersionHub.is("search","input_diweon("soQs:view:inputClick",function(){e.view.focus(),e.ui.textInput.fire("mousedown")})});(function(){function e(e,t){t=t||{},this.el=e,this.namespace=t.namespace,this.targetSelector=t.targetSelector,this.selectedValue=t.selectedValue,this.trigger=t.trigger||"click",this.menus=t.menus||this.model.menus,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.onClick=t.onClick||this.onClick,this.afterClick=t.afterClick||function(){},this.init()}e.prototype.model={dropdownInsertWrap:"#doc-view-front",dropdownTriggerClass:"dropdown-trigger",dropdownClass:"defaul-dropdown",dropdownIndex:"dropdown-index",dropdownValue:"dropdown-value",dropdownStyle:"            .{ns}{position:absolute;top:-999em;left:-999em;background:#fff;border:solid 1px #cfd1d4;text-align:center;z-index:430;}            .{ns} li{height:32px;line-height:32px;cursor:pointer;_width:88px;}            .{ns} li a{display:block;height:100%;white-space:nowrap;padding:0 10px;text-decoration:none;color:#666;_height:auto;_padding:8px 10px;}            .{ns} li a:hover{color:#e30b20;_text-decoration:none;}",menus:[{title:'<span class="icon-express">&#xe605;</span> <em>\u67e5\u5feb\u9012</em>',attr:{href:"https://www.so.com/s?q=%E5%6%9F%A5%E8%AF%A2&src=hao_360so_express","dropdown-value":"a"},onClick:function(e,t){}}]},e.prototype.onClick=function(e,t){this.buildSelectedView(W(t).attr(this.model.dropdownValue)),this.removeView()},e.prototype.loadStyle=function(){if(!e.prototype._styleLoaded){var t=this.model.dropdownStyle;t=R.tmpl(t,{ns:this.model.dropdownClass}),qboot.load.css(t,this.model.dropdownClass),e.prototype._styleLoaded=!0}},e.prototype.insertView=function(){W(this.model.dropdownInsertWrap).appendChild(this.view),W(this.el).addClass("active")},e.prototype.removeView=function(){this.view&&(W(this.view).removeNode(),this.view=null,W(this.el).removeClass("active"))},e.prototype.buildView=function(){var e=document.createElement("ul"),t,n,r;e.className=this.model.dropdownClass;for(var i=0;i<this.menus.length;i++){t=document.createElement("li"),n=document.createElement("a"),r=this.menus[i].attr,n.setAttribute(this.model.dropdownIndex,i);for(var s in r)n.setAttribute(s,r[s]);n.innerHTML=this.menus[i].title,t.appendChild(n),e.appendChild(t)}this.view=e},e.prototype.buildSelectedView=function(e){var t,n,r,i=W(this.targetSelector);for(var s=0;s<this.menus.length;s++){r=this.menus[s].attr[this.model.dropdownValue];if(r===e){t=document.createElement("a"),n=this.menus[s].attr,t.setAttribute(this.model.dropdownIndex,s);for(var o in n)t.setAttribute(o,n[o]);t.innerHTML=this.menus[s].title,i&&i.length&&(t.className=i[0].className,i.replaceNode(t));break}}},e.prototype.getRect=function(){this.rect||(this.rect=W(this.view).getSize())},e.prototype.computeStyle=function(e){var t=Dom.getDocRect(),n=W(this.model.dropdownInsertWrap).getRect(),r=W(e.target).getRect(),i=r.left-n.left+r.width+this.offsetX-this.rect.width,s=r.top-n.top+r.height+this.offsetY;W(this.view).setXY(i,s)},e.prototype.buildEvent=function(){if(!this._eventBuilded){var e=this;this._scrollHandler=function(){W(window).un("scroll",e._scrollHandler),e.removeView()},this._resizeHandler=function(){W(window).un("resize",e._resizeHandler),e.removeView()},this._clickHandler=function(t){t.stopPropagation(),W(document).un("click",e._docClickHandler);var n=parseInt(W(this).attr(e.model.dropdownIndex),10),r=W(this).attr(e.model.dropdownValue);e.menus[n].onClick&&e.menus[n].onClick.call(e,t,this),e.onClick.call(e,t,this),e.afterClick.call(e,r),e.namespace&&r&&LogHub&&LogHub.behavior(e.namespace,"click-dropdown-"+r)},this._docClickHandler=function(){W(document).un("clientBuilded=!0,this._mouseLeaveHandler=function(){e.trigger==="hover"&&e.removeView()}}},e.prototype.bindEvent=function(){var e=this;W(e.view).delegate("["+e.model.dropdownIndex+"]","click",e._clickHandler),W(window).on("scroll",e._scrollHandler),W(window).on("resize",e._resizeHandler),W(document).on("click",e._docClickHandler),W(e.view).on("mouseleave",e._mouseLeaveHandler)},e.prototype.controller=function(e){this.removeView(),this.loadStyle(),this.buildView(),this.insertView(),this.getRect(),this.computeStyle(e),this.buildEvent(),this.bindEvent()},e.prototype.init=function(){this.el._dropdown=this,W(this.el).addClass(this.model.dropdownTriggerClass),this.selectedValue&&this.buildSelectedView(this.selectedValue);if(!e.prototype._isDelegated){var t=this.trigger==="hl.dropdownTriggerClass,t,function(e){e.preventDefault(),this._dropdown.controller(e)}),e.prototype._isDelegated=!0}},QW.NodeW.pluginHelper({dropdown:function(t,n){if(Dom.isElement(t))return new e(t,n)}},"opreator")})();(function(){var e=W("#famous-section"),t=e.query(".hover-expand");if(t.length===0)return;for(var n=0;n<t.length;n++){var r=W(t[n]).parentNode("li"),i=r.cloneNode(!0),s=i.removeChild(i.query(".site-dropdown"));r.query(".expand-sites").insert("afterbegin",s.addClass("expand-sites-item")),function(e,t){var n=function(){if(W(t).hasClass("expand-dropdown"))return;W(e).hide(),W(t).addClass("expand-dropdown");var n=W(t).query(".expand-sites .expand-sites-item a span");LogHub.behavior("hot-site-more-show",n.html())},r=function(){W(e).show(),W(t).removeClass("expand-dropdown")};W(t).delegate(">a","mousemove",function(){n()}),W(e).on("mousemove",function(){n()}),W(t).on("mouseleave",function(){r()}),W(t).query(".expand-sites").on("click",function(e){var t=W(e.target).parentNode("a").query("span");LogHub.behavior("hot[n],r)}})();(function(){function o(e){return Math.floor(Math.random()*Math.floor(e))}var e="search_tool",t=new AppData("api.hao.360.cn"),n="search-tools",r=t.get(e),i=[{title:'<span class="icon-express">&#xe606;</span> <em>\u67e5\u90ae\u7bb1</em>',attr:{href:"https://www.so.com/s?ie=utf-8&src=hao_360so_mail&shb=1&q=%E9%82%AE%E7%AE%B1%E7%99%BB%E5%BD%95","dropdown-value":"email",target:"_blank"}},{title:'<span class="icon-express">&#xe605;</span> <em>\u67e5\u5feb\u9012</em>',attr:{href:"https://www.so.com/s?q=%E5%BF%AB%E9%80%92%E6%9F%A5%E8%AF%A2&src=hao_360so_express","dropdown-value":"express",target:"_blank"}},{title:'<span class="icon-express">&#xe608;</span> <em>\u67e5\u5f69\u7968</em>',attr:{href:"https://www.so.com/s?q=%E5%BD%A9%E7%A5%A8&src=hao_360so_lottery","dropdown-value":"lottery",target:"_blank"}},{title:'<span class="icon-express">&#xe60B;</span> <em>\u67e5\u8fdd\u7ae0</em>',attr:{href:"https://www.so.com/s?q=%E8%BF%9D%E7%AB%A0%E6%9F%A5%E8%AF%A2&src=hao_360so_trafficViolation","dropdown-value":"violation",target:"_blank"}},{title:'<span class="icon-express">&#xe609;</span> <em>\u67e5\u8f66\u7968</em>',attr:{href:"https://www.so.com/s?q=%E7%81%AB%E8%BD%A6%E7%A5%A8%E6%9F%A5%E8%AF%A2&src=hao_360so_ticket","dropdown-value":"ticket",target:"_blank"}},{title:'<span class="icon-express">&#xe60C;</span> <em>\u67e5\u9650\u53f7</em>',attr:{href:"https://www.so.com/s?q=%E4%BB%8A%E6%97%A5%E9%99%90%E8%A1%8C&src=hao_360so_numberLimit","dropdown-value":"carLimit",target:"_blank"}},{title:'<span class="icon-express icon-tax">&#xe60D;</span> <em>\u67e5\u4e2a\u7a0e</em>',attr:{href:"https://www.so.com/s?q=%E4%B8%AA%E7%A8%8E%E8%AE%A1%E7%AE%97%E5%99%A8&src=hao_360so_incomeCalculate","dropdown-value":"tax",target:"_blank"}},{title:'<span class="icon-express">&#xe60A;</span> <em>\u67e5\u6c47\u7387</em>',attr:{href:"https://www.so.com/s?q=%E8%B4%A7%E5%B8%81%E6%8D%A2%E7%AE%97&src=hao_360so_exchange","dropdown-value":"exchange",target:"_blank"}},{title:'<span class="icon-copyright">&#xe900;</span> <em>\u67e5\u7248\u6743</em>',attr:{href:"https://chacha.so.com/home?src=daohang","dropdown-value":"copyright",target:"_blank"}}];r||(r=i[o(i.length)].attr["dropdown-value"]);var s=W("#topbar-daily-tools-toggle");s.dropdown({targetSelector:".topbar-daily-tools-last",selectedValue:r,namespace:n,trigger:"hover",offsetX:hao360.screen.wide?11:12,offsetY:-26,afterClick:function(n){t.set(e,n);for(var r=0;r<i.length;r++)if(n===i[r].attr["dropdown-value"]){window.moniter&&window.moniter.sendClklog(n,i[r].attr.href,"search-tools");break}},menus:i});var u=".topbar-daily-tools-last";W(document).delegate(u,"click",function(){var e=W(this).attr("dropdown-value");LogHub&&LogHub.behavior(n,"click-default-"+e)})})();(function(){var e=window.newGuide,t="        html,body{scroll-behavior: smooth}        #new2020-floor.floor-wrap{width: 66px;color:#666;visibility:hidden;transition:all .3s;}        #new2020-floor.floor-wrap.active{visibility: visible;}        #new2020-floor.floor-wrap li{width: 66px; height: 39px;}        #new2020-floor.floor-wrap a{display:block;width:34px;height:32px;line-height:32px;text-align:left;font-size:12px;color:#666;border:solid 1px #e3e3e3;text-decoration:none;overflow:hidden;background:#fff;position:relative;padding-left:30px;}        #new2020-floor.floor-wrap a:hover{border-color:#00c13c;color:#00c13c;background:#fff;}        #new2020-floor.floor-wrap i{display:block;width:14px;height:12px;position:absolute;top:8px;left:8px;background-color: #666; background-repeat: no-repeat; background-position: 0 0;}        #new2020-floor.floor-wrap i.guide{background-image:url(https://p3.ssl.qhimg.com/t019a71b185f9e9155a.png);height:14px;}        #new2020-floor.floor-wrap .back{background-position:0 0;}        #new2020-floor.floor-wrap .top{background-position:0 -32px;}        #new2020-floor.floor-wrap .guide{background-position:0 -35px;}        #new2020-floor.floor-wrap a:hover i{background-color: #00c13c;}        #new2020-floor.floor-wrap a.text{width:64px;padding-left:0;text-align:center}        #new2020-floor.floor-wrap li.show{visibility: visible}        #new2020-floor.floor-wrap li.activity a{color:red}  guide2020:function(){window.guideEl?window.guideEl._zeroGuide():window.guideEl=new e},backTo2019:function(){qboot.cookie.get("page")!==null&&qboot.cookie.set("page","index",{expires:31536e6,secure:!window.DEBUG}),/(\?|&)classic($|&)/.test(location.search)&&qboot.cookie.remove("yqlm_classic",{domain:".hao.360.com",path:"/"}),window.DEBUG?qboot.cookie.set("new2020",2):qboot.cookie.set("new2020",2,{domain:".hao.360.com",expires:3153,scrollToTop:function(){document.body.scrollTop=document.documentElement.scrollTop=0}},r={data:[{text:"\u8fd4\u56de\u65e7\u7248",classname:"show",action:n.backTo2019},{icon:"top",text:"\ss="{classname}"><a class="text" href="{href}" data-index="{index}">{text}</a></li>'},css:function(){var e="https://hao1.qhimg.com/t01eca3f5f7d9f16cc0.png",n="https://hao1.qhimg.com/t016322b10b5c99e268.png",r=hao360.clipImage(e,{whq:"14_44_75",webp:!0}),i=hao360.clipImage(n,{whq:"28_88_75",webp:!0}),s="#new2020-floor.floor-wrap i{background-image: url("+r+"); background-image: -webkit-image-set(url("+r+") 1x, url("+i+") 2x); background-image: image-set(url("+r+") 1x, url("+i+") 2x);}";return t+s}(),init:function(){qboot.load.css(this.css,this.class+"-style");var e=document.createElement("ul");e.setAttribute("id","new2020-floor"),e.className=this.class,e.innerHTML=this.makeHMTL(this.data),this.$wrap=W(e);var t=document.getElementById(this.container);t&&t.appendChild(e),moniter.setId(["new2020-floor"]),this.bindEvent()},makeHMTL:function(e){var t=[];for(var n=0,r=e.length;n<r;n++)e[n].href=e[n].href||"###",e[n].classname=e[n].classname||"normal",e[n].index=n,t.push(R.tmpl(this.tpl(e[n]),e[n]));return t.join("")},bindEvent:function(){var e=this.data,t=W(window),n=this.$wrap;n.delegate("a","click",function(t){var n=parseInt(W(this).attr("data-index"),10),r=e[n].action;r&&(t.preventDefault(),r())});var r=null,i="active";t.on("scroll",function(){clearTimeout(r),r=setTimeout(function(){var e=document.body.scrollTop||document.documentElement.scrollTop;e>300?n.addClass(i):n.removeClass(i)},100)})}};r.init()})();(function(){function e(e,t,n){var s=i[e]?i[e[e][t]=n,{check:function(){return s.check(t)},onClose:function(lete r[e][t],s.remove(t)},resetRule:function(e){return s.resetRule&&s.resetRule(t,e)}}):!1}function t(e){var e=parseInt(e,10)?parseInt(e,10)-1:0,t=new Date,n=t.getHours(),r=t.getMinutes(),i=t.getSeconds(),s=86400-(n*3600+r*60+i);return(s+e*3600*24)*1e3}var n="api.hao.360.cn",r={},i={forever:{cacheKey:"close-forever",check:function(e){var t=new AppData(n),r=this.cacheKey,i=t.get(r)||[];return i.indexOf(e)===-1?!0:!1},onClose:function(e){var t=new AppData(n),r=this.cacheKey,i=t.get(r)||[];i.indexOf(e)===-1&&(i.push(e),t.set(r,i))},remove:function(e){var t=new AppData(n),r=this.cacheKey,i=t.get(r)||[],s=i.indexOf(e);s!==-1&&(i.splice(s,1),t.set(r,i))}},showTimes:{cacheKey:"close-by-show-times",check:function(e){var t=[e,0],n=this._getCache(e)||t,i=n[1],s=r.showTimes[e];return i<s?(n[1]++,this._setCache(e,n),!0):!1},onClose:function(e){var t=r.showTimes[e];this._setCache(e,[e,t])},remove:function(e){var t=new AppData(n),r=this.cacheKey,i=t.get(r)||[],s=this._indexOf(i,e);s>-1&&(i.splice(s,1),t.set(r,i))},_setCache:function(e,t){var r=new AppData(n),i=this.cacheKey,s=r.get(i)||[],o=this._indexOf(s,e);o>-1?s[o]=t:s.push(t),r.set(i,s)},_getCache:function(e){var t=new AppData(n),r=this.cacheKey,i=t.get(r)||[];return index=this._indexOf(i,e),index>-1?i[index]:null},_indexOf:function(e,t){var n=-1;for(var r=0;r<e.length;r++)if(e[r][0]===t){n=r;break}return n}},closeTimesRange:{cacheKey:"close-count",check:function(e){var t=this.cacheKey+"-"+e,n=qboot.cookie.get(t),r=hao360.queryUrl(location.href,"previewTime"),i=(r?new Date(r):new Date).getTime(),s;return n&&n.indexOf("_")>-1?(s=parseInt(n.split("_")[1],10),i>s?!0:!1):!0},onClose:function(e){var t=r.closeTimesRange[e]||this._defaultRule,n=this.cacheKey+"-"+e,i=qboot.cookie.get(n)||"_",s=i.split("_"),o=parseInt(s[0],10)||0,u=(new Date).getTime(),a=t[0].range[0],f=t[t.length-1].range[1],l,c,h;o++,o>=f&&(o=a+1);for(var p=0;p<t.length;p++){l=t[p],c=l.range;if(o>=c[0]&&o<c[1]){u+=l.expires,h=l.expires+864e5;break}}h&&qboot.cookie.set(n,o+"_"+u,{expires:h}),LogHub&&LogHub.behavior(e,this.cacheKey+"s.cacheKey+"-"+e;qboot.cookie.remove(t)},resetRule:function(e,t){this._defaultRule=t},_defaultRule:[{range:[0,3],expires:t(1)},{range:[3,6],expires:t(7)},{range:[6,7],expires:t(30)}]}};e.getCookieExpiresByDays=t,window.CloseStrategy=e})();M("#activity",function(e,t){function m(e){if(e.length){var t=e.attr("data-src");!e.attr("src")&&t&&e.attr("src",t.clipImage({whq:"222_96_75",webp:!0}))}}var n=e("#activity-imgs-switch"),r=n.query(".slide-item"),i=r.length,s=1e4,o=function(){function f(n){if(!n){var i=e(".act-topic-list>li").first();t.appendChild(i)}e(".act-topic-list").animate({top:{from:0,to:-r+"px"}}),s=setTimeout(function(){f()},a)}var t=e(".act-topic-list"),n=e(".act-topic-list>li").length,r=e(".act-topic-list>li").first().getSize().height,i=0,s=0,o=0,ut-topic-list").delegate("li","mouseenter",function(){clearTimeout(s),clearTimeout(o)}).delegate("li","mouseleave",function(){o=setTimeout(f,a/2)}),f(!0)},u)},u=function(){if(e("[data-face]").length<=1)return;var t=function(){var t=e(".action-a"),n=e(".action-b"),r=e(".btn-tucao"),i=32,s=57,o=128,u=30,a=0,f=null,l={init:function(){var e=this;e.actionAAnim(),t.on("click",function(n){n.preventDefault(),t.css({"background-position":"0 0"}),e.actionBAnim()})},actionAAnim:function(){var e=this;e.frameAnim(t,i)},actionBAnim:function(){var e=this;n.css("top","0"),e.frameAnim(n,s)},frameAnim:function(e,t){var n=this;f&&(a=0,clearInterval(f)),f=setInterval(function(){if(a>=t){a=0,clearInterval(f),e.hasClass("action-a")&&n.actionAAnim(),e.hasClass("action-b")&&r.css({display:"block"});return}a++,e.css("background-position","0 -"+a*o+"px")},u)},reset:function(){clearInterval(f),n.css({"background-position":"0 0",top:"128px"}),r.hide()}};return l}(),n=function(t,n){var i,s=function(e){clearTimeout(i)},o=function(u){i=setTimeout(function(){r(n),e("[data-face="+t+"]").un("mouseenter",s).un("mouseleave",o)},1e4)};e("[data-face="+t+"]").on("mouseenter",s).on("mouseleave",o)},r=function(r){var i=e("[data-face="+r+"]");if(i[0]){e("[data-face]").fadeOut(200),i.fadeIn(100);var s=i.attr("data-autoTurnFace");s&&e("[data-face="+s+"]")[0]&&n(r,s),r=="a"?gate("[data-clickTurnFace]","click",function(){r(e(this).attr("data-clickTurnFace"))})},a,f=function(){a=new QW.Slide(g("activity-imgs-switch"),{animType:"fade",autoPlayTime:s,viewSelector:".slide-content div",aute:300,selectedIndex:0,onbeforeswitch:function(t){var n=e(t.toView).query("img");m(n)}}),n.hover(function(t){t.type=="mouseover"?e(".slide-btn").show():e(".slide-btn").hide()})},l=function(){var e=function(e){var t=200,n;return function(r){clearTimeout(n),n=setTimeout(function(){n=null,e.apply(this,[r])},t)}},t=e(function(){c()&&(p(),QW.W(window).un("scroll",t),QW.W(window).un("resize",t))});QW.W(window).on("scroll",t),QW.W(window).on("resize",t)},c=function(){var e=Dom.getDocRect(),n=t.getRect();return t.isVisible()&&n.top<e.height+e.scrollY},h=null,p=function(){if(h)return;h=!0;var t=r.item(1),n=hao360.project==="cube"?"wasaiImagePMPNEW":"wasaiImagePMP";t.loadMediav(n,{aContainer:".act-toppic",imgSelector:"img",textSelector:".txt",directPv:0,directOnceRender:!0,afterRenderData:function(t,n,r){var i=e(t);i.query(".ad")[0]||i.appendChild(e('<span class="ad"></span>')),n.ldtype&&n.ldtype===6&&(i.query("span").toArray()[0].className="ad-minipro-long")},onSuccessEnd:function(t){a&&(a.onafterswitch=function(n){var r=e(n.toView).query("a").toArray().slice(0,1);t.view.sendJointPv(r)})}});var i=hao360.project==="cube"?"wasaiTextCPCNew":"wasaiTextCPC";t.query(".g-list").loadMediav(i,{aContainer:"a",imgSelector:"img",textSelector:"span",directPv:0,directOnceRender:!0})},d=function(){var n="activity_me_hide";e("#acti-me").delegate(".ad-close-btn","click",function(e){e.preventDefault(),t.removeNode(),QW.W("#bangbang-l").tweet("page-height-resize"),qboot.cookie.set(n,1,{expires:864e5}),LogHub.behavior("activity","close")})};e(".act-topic-list")[0]&&o(),e("[data-face]")[0]&&u(),m(n.query(".first img")),i>1&&f(),e("#acti-me").length>0&&d();var v=hao360.queryUrl(location.href,"test");if(v||t.hasClass("backup")&&i==3)l(),c()&&p()});M({container:"#top_activity"},function(e,t){t.query("a").hover(function(t){var n=e(this).query("img"),r=n.attr("src"),i=n.attr("data-hover");i&&(n.attr("data-origin",r),n.attr("src",n.attr("data-hover")))},function(t){var n=e(this).query("img"),r=n.attr("data-origin");r&&n.attr("src",n.attr("data-origin"))})});var Plane=function(){var e={},t=W("#plane"),n=W("#goBottom"),r=W("#goTop"),i=Dom.getDocRect().scrollHeight,s=navigator.userAgent.indexOf("MSIE 6.0")!==-1,o=function(){TweetH.receive(document,"page-size-changed",function(e){e.data.spaceWidth<=68?t.hide():(t.show(),h())})},u=function(){if(W("#plane .plane-hd.plane-majia img").length){W("#plane .plane-hd").show();var e=W("#plane .plane-hd img")[0].src,t=new Image;t.onload=function(){var e=t.width;e&&(W("#plane .plane-hd").css({width:e+"px"}),W("#plane .close-btn").css({left:e+"px"}))},t.src=e}W("#plane").delegate(".close-btn","click",function(e){e.preventDefault(),W("#plane .plane-hd").removeNode();var t=new Date;t.setDate(t.getDate()+1),qboot.cookie.set("planeImageClose",1,{expires:new Date(t.format("YYYY/MM/dd"))}),LogHub&&LogHub.behavior("planeImage","closecard").addClass("card-show")},function(e){W("#plane .card").removeClass("card-show")})},a=function(){if(!window.planePMPConfig||planePMPConfig.isOn==0)return!1;var e=new Date(planePMPConfig.startTime),t=new Date(planePMPConfig.endTime),n=hao360.queryUrl(location.href,"previewTime")||hao360.todayObj;return e>new Date(n)||new Date(n)>t?!1:!0}(),f=function(){var e=W(".plane-priming");e.length&&(W("#plane .plane-hd").show(),W("#plane .plane-priming-content").show())},l=function(){var e='<div class="plane-hd plane-adsvc"><a href="##" class="close-btn"></a><a href="" class="plane-ad" rel="noopener"><img loading="lazy" crossorigin="anonymous" src="" width="74" height="82" data-whq="74_82_75" data-clipRule="png"/><span class="ad"></span></a></div>';W("#plane").insertBefore(W(e)[0],W("#plane").firstChild()[0]),W("#plane").loadMediav("planePMPNEW",{aContainer:".plane-ad",imgSelector:"img",textSelector:".txt",directPv:1,directOnceRender:!0,afterRenderData:function(e,t,n){var r=W(e);t.ldtype&&t.ldtype===6&&(r.query("span").toArray()[0].className="ad-minipro-mini"),r.attr("title","")},onSuccessEnd:function(e){W("#plane .plane-ad").attr("data-monitor")&&(W("#plane .plane-hd").css({width:"74px"}),W("#plane .close-btn").css({left:"74px"}),W("#plane .plane-hd").show())},onError:function(){W("#plane").removeChild(W(".plane-adsvc")[0]),f()}})},c=!1,h=function(){var e=hao360.queryUrl(location.href,"pmp")==="plane";if(W("#plane .plane-majia")[0]){if(!e)return;W("#plane").removeChild(W(".plane-majia")[0])}if(qboot.cookie.get("planeImageClose"))return;if(c)return;c=!0;if(!a)f();else{if(window.adOnOff&&window.adOnOff.plane_home_2020==="off")return;l()}};return e.init=function(){o(),u(),window.isCloseLicai==="close"&&W("#licaiTab").hide()},e}();Plane.init();(function(){var e=function(e){if(e=="")return e;var t=0,n="",r=+(new Date),i="qiho3600com",s=Math.floor(Math.random()*15),o;while(t<2)n+=i.charAt(Math.floor(Mareplace(o,r),e=n+e+o+"."+s,e},t=function(){return window.PROJECT_SIGN==="extra_wide"},n="#topbar-my-follow";W(document).delegate(n,"mouseenter",function(e){W(this).addClass("action")}).delegate(n,"mouseleave",function(e){W(this).removeClass("action")}).delegate(n,"click",function(n){n.preventDefault();var r="https://www.360kuai.com/pc/zmt/following?",i={sign:"360_36e79513",refer_scene:0},s="";hao360.mid?i.sc_id=e(hao360.mid):i.uid=qboot.cookie.get("__guid")||qboot.cookie.get("__huid")||"",t()&&(i.type="browse",s="#zmt");var o=r+qboot.encodeURIJson(i)+s;window.open(o),moniter&&moniter.sendClklog("\u5173\u6ce8\u9891\u9053","javascript:void(0);","my-follow")})})();(.isReadyFast?f(t.userInfo):t.userInfo?a(t.userInfo):u(r),c()}function u(e){n.html(e)}function ame))}function f(e){var t=s.tmpl();u(t(e))}function l(){n.query(".fast-tips").hide()}function c(){t.on("FastReady",function(e){f(e)}),t.on("UserInfo",function(e){a(e)}),t.on("NoLog",function(){u(r)}),t.on("Logout",function(){u(r)}),n.delegate(".login-btn","click",function(e){e.preventDefault(),t.login()}),n.delegate(".fastlogin-btn","click",function(e){e.preventDefault();var t=n.query(".fast-tips");t.show()}),n.delegate(".logout-btn","click",function(e){e.preventDefault(),t.logout()}),n.delegate(".btn-fast-login","click",function(e){e.preventDefault(),t.fastLogin()}),n.delegate(".btn-login"(),l()}),n.delegate(".btn-reg","click",function(e){e.preventDefault(),t.signUp(),l()}),n.delegate(".user-info","mouseenter",function(e){e.preventDefault();var t=W(this),n=t.getRect().width,r=t.query(".nickname").getRect().width,i=n-r>30?"hover":"fix-hover";t.addClass(i)}),n.delegate(".user-info","mouseleave",function(e){e.preventDefault();var t=W(this);t.removeClass("hover").removeClass("fix-hover")}),W("body").on("click",function(e){if(W(e.target).parentNode(".fast-tips").length===1||e.tareturn;l()})}function h(){qboot.load("userLoginVipCss"),qboot.load("userLoginVipJs")}function p(e){var t=e.split("."),n=parseInt(t[0],10),r=parseInt(t[1],10),i=parseInt(t[2],10),s=parseInt(t[3],10),o=!1;return s===64?n>15?o=!0:n===15&&(r>1?o=!0:r===1&&i>=2e3&&(o=!0)):s===0&&n===15&&r===0&&i>=2e3&&(o=!0),o}var t=window.haoUser,n=W("#topbar-user-login"),r='<a href="javascript:void(0)" class="login-btn">\u767b\u5f55/\u6ce8\u518c</a>',i=['<div class="user-info gclearfix">','<span class="nickname">{opts}</span>','<ul class="login-dropdown">','<li class="login-dropdown_follow" id="topbar-my-follow">',"<span>\u5173\u6ce8\u9891\u9053</span>","</li>",'<li><a href="javascript:void(0);" class="logout-btn">\u9000\u51fa\u8d26\u53f7</a></li>',"</ul>","</div>"].join(""),s=["<div>",'<a href="javascript:void(0)" class="fastlogin-btn">\u4e00\u952e\u767b\u5f55</a>','<div class="fast-tips">','<div class="avatar"><img src="{$avatar}" alt="" /></div>','<div class="nickname">{$nickname||$username}</div>','<div class="">','<a href="javascript:void(0)" class="btn-fast-login">\u7528\u8be5\u8d26\u53f7\u4e00\u952e\u767b\u5f55</a>',"</div>",'<div class="opt">','<a href="javascript:void(0)" class="btn-login">\u7528\u5176\u4ed6\u8d26\u53f7</a>','<span class="hr">|</span>','<a href="javascript:void(0)" class="btn-reg">\u6ce8\u518c\u65b0\u8d26\u53f7</a>',"</div>","</div>","</div>"].join("");try{var d=external.GetVersion(external.GetSID(window));p(d)?(h(),LogHub.behavior("vip_user","ai")):o()}catch(v){hao360.queryUrl(location.href,"user_vip")==="1"?h():o()}})();(function(){function e(e){this.options=e||{},this.showTimer=null,this.showCount=18e4}if(!VersionHub||!VersionHub.is("dropdown-guide","beta")||qboot.cookie.get("drop_down_guide")==="1")return;e.prototype.model={parentWrap:"#doc-view-front",dropDownGuideWrap:"dropdown-guide",viewTpl:['<div class="dropdown-guide" id="dropdown-guide">','<a class="dropdown-guide_inner" href="javascript:void(0);" text="\u4e0b\u62c9\u5f15\u5bfc">','<div class="dropdown-guide_cont">','<span class="dropdown-guide_txt">\u53d1\u73b0\u66f4\u591a\u7cbe\u5f69</span>','<span class="dropdown-guide_arrow"><i></i></span>',"</div>","</a>","</div>"].join(""),viewStyle:[".dropdown-guide{        width: 1170px;        height: 0px;        position: fixed;        bottom: 0;        left: 50%;        margin-left: -585px;        z-index: 410;        opacity: 0;      }",".dropdown-guide_inner{        display: block;        width: 100%;        height: 100%;        overflow: hidden;        background: url(https://hao1.qhimg.com/t01dcc1dcff27d8034f.png) 0 0 no-repeat;      }",".dropdown-guide_inner:hover{        background-position: 0 -54px;        text-decoration: none;      }",".dropdown-guide_cont{        width: 80px;        margin: 0 auto;      }",".dropdown-guide_txt{        display: block;        text-align: center;        color: #fff;        margin-top: 10px;      }",".dropdown-guide_arrow{        display: block;        text-align: center;        margin-top: 3px;      }",".dropdown-guide_arrow i{        display: inline-block;        width: 18px;        height: 9px;        background: url(https://hao1.qhimg.com/t018bb8837168ab10bf.png) 0 0 no-repeat;        background-image: image-set(url(https://hao1.qhimg.com/t018bb8837168ab10bf.png) 1x, url(https://hao1.qhimg.com/t0157478111db36fa46.png) 2x);        -webkit-animation: dropDownGuideArrowBounce 2s linear infinite;        -moz-animation: dropDownGuideArrowBounce 2s linear 0s infinite;        -ms-animation: dropDownGuideArrowBounce 2s linear 0s infinite;        animation: dropDownGuideArrowBounce 2s linear 0s infinite;      }","@keyframes dropDownGuideArrowBounce {        25% {transform: translateY(5px);}        50% {transform: translateY(0);}        75% {transform: translateY(5px);}        100% {transform: translateY(0);}      }"].join("")},e.prototype.init=function(){this.showCountDown()},e.prototype.showCountDown=function(){var e=this;e.showTimer=setTimeout(function(){e.check()&&(e.loadStyle(),e.initView(),e.buildEvent(),e.bindEvent()),clearTimeout(e.showTimer),e.showTimer=null},e.showCount)},e.prototype.check=function(){var e=document.body.scrollTop||document.documentElement.scrollTop,t=W("#doc-main-bd"),n=t.getXY&&t.getXY()[1],r=96,i=n-r;return this.scrollTop=i,i>e},e.prototype.loadStyle=function(){if(this.isLoadStyle)return;var e=this.model.viewStyle;qboot.load.css(e,this.model.dropDownGuideWrap+"-style"),this.isLoadStyle=!0},e.prototype.initView=function(){if(this.isInitView)return;var e=this.model.viewTpl;W(this.model.parentWrap).appendChild(e),W("#"+this.model.dropDownGuideWrap).animate({height:{to:"54px"},opacity:{to:1}},500);var t=new Date;t.setDate(t.getDate()+1),qboot.cookie.set("drop_down_guide",1,{expires:new Date(t.format("YYYY/MM/dd"))}),this.isInitView=!0},e.prototype.removeView=function(){var e=this,t=W("#"+e.model.dropDownGuideWrap);if(!t.length)return;t.animate({opacity:{to:0}},300,function(){t.removeNode(),W(window).un("scroll",e.scrollHandler)})},e.prototype.buildEvent=function(){var e=this;if(e.isBuildEvent)return;e.scrollHandler=function(){e.removeView()},e.clickHandler=function(t){t=t||window.event,t.preventDefault(),e.scrollTop&&(document.body.scrollTop=document.documentElement.scrollTop=e.scrollTop),qboot.events.fire("dropdown:guide:trigger"),window.moniter&&moniter.setId(["dropdown-guide"])},e.isBuildEvent=!0},e.prototype.bindEvent=function(){var e=this;W(window).on("scroll",e.scrollHandler),W("#"+e.model.dropDownGuideWrap).on("click",e.clickHandler)};var t=new e({});qboot.events.on("openscreen:close",function(){t.init()}),qboot.events.on("openscreen:hitclosed",function(){t.init()}),qboot.events.on("openscreen:miss",function(){t.init()})})();(function(){function e(e,t){this.tpl=e||"",this.replaceParams=teThemeHtml:function(e){function r(e){var r={};return n.forEach(function(t){r[t]=e[t]}),t.tmpl(r)}if(!e)retueplaceParams;if(Array.isArray(e)){var i=[];return e.forEach(function(e){i.push(r(e))}),i.join("")}return r(e)}},window.themeController?"":window.themeController={},window.themeController.HTMLMaker=e})();(function(){function e(e){this.options={},this.toggleProject=e.toggleProject,Object.defineProperty(this.options,"html",{configurable:!0,enumerable:!0,set:e.htmlSetFunction}),Object.defineProperty(this.options,"countHtml",{configurable:!0,enumerable:!0,set:e.countHtmlSetFunction}),this.options.html=e.html,this.options.countHtml=e.countHtml,e.fn&&e.fn()}e.prototype={togglePanel:function(){W(this.toggleProject.w).toggleClass(this.toggleProject.toggleClass[0],this.toggleProject.toggleClass[1]),qboot.events.fire("skin:panel:toggle",{$container:W(this.toggleProject.w),unExpandClass:this.toggleProject.toggleClass[0],expandClass:this.toggleProject.toggleClass[1],offsetHeight:242})}},window.themeController?"":window.themeController={},window.themeController.Panel=e})();(function(){function e(e){function r(){var e=[],t=Math.ceil(this.page_total/this.page_count);for(var r=0;r<t;r++)e.push(n.createThemeHtml({className:this.page===r?"list_active":"",index:r}));return e.join("")}this.html=e.main_data,this.countHtml="",this.page_total=e.page_total,this.page_count=e.page_count,this.page=e.page;var t=this;Obdata",{enumerable:!0,get:function(){return e.html},set:function(n){e.html=n,t.html=n}}),Object.defineProperty(this,"page_count",{enumerable:!0,get:function(){return e.page_count},set:function(n){e.page_count=n,t.countHtml=r.call(t)}able:!0,get:function(){return e.page},set:function(n){e.page=n,t.countHtml=r.call(t)}}),Object.del",{enumerable:!0,get:function(){return e.page_total},set:function(t){e.page_total=t}});var n=new window.themeController.HTMLMaker(e.countTpl,e.replaceParams);this.countHtml=r.call(this)}e.prototype={prev:function(){return this.page===0?!1:(this.page=this.page-1,!0)},next:function(){return this.page===Math.ceil(this.page_total/this.page_count)-1?!1:(this.page=this.page+1,!0)},jump:function(e,t){return t===this.page&&e===this.page_count?!1:(this.page=t,this.page_count=e,!0)}},window.themeController?"":window.themeController={},window.themeController.Slider=e})();(function(){function e(e){this.urls=[],this.current=e.current||"",this.container={},this.callback=e.callback||"",this.current&&this.load(this.current)}e.prototype={load:function(e){var t=this.urls.indexOf(e);if(t>-1)this.container[this.current].disabled=!0,this.container[e].disabled=!1,this.current=e;else{this.container[this.current]?this.container[this.current].disabled=!0:"";var n=document.createElement("link");n.href=e,n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("class","cssLoaderLink"),document.getElementsByTagName("head")[0].appendChild(n),this.urls.push(e),this.container[e]=n,this.current=e}this.callback&&this.callback(e)}},window.themeContrr={},window.themeController.CssLoader=e})();(function(){function e(e){this.address=e}e.prototype.log=function(e,t){var n={type:t,act:"settheme",tname:e,guid:qboot.cookie.get("__guid")},r=this.address+"?"+qboot.encodeURIJson(n);window.LogSender&&window.LogSender(r)},window.themeController?"":window.themeController={},window.themeController.ThemeMonitor=e})();(function(){function t(){qboot.load("themePanel"),W("#doc-main").insertAdjacentHTML("afterbegin",e)}var e=['<div class="theme_panel theme_col g-hide" id="theme_panel">','<ul class="theme_cover">',"</ul>",'<a class="theme_change_button theme_prev"><i class="theme_prev_icon"></i></a>','<a class="theme_change_button theme_next"><i class="theme_next_icon"></i></a>','<ul class="theme_list_count">',"</ul>",'<div class="theme_bottom">','<a class="theme_feedback" href="http://feedback.hao.360.cn/">\u76ae\u80a4\u5efa\u8bae\u4e0e\u53cd\u9988</a>','<div class="theme_no">','<i class="theme_no_icon"></i>',"<span>\u4e0d\u4f7f\u7528\u76ae\u80a4</span>","</div>",'<div class="theme_collapse">','<i class="theme_col_icon"></i>',"<span>\u6536\u8d77</span>","</div>","</div>","</div>"].join("");t()})();(function(){function e(e){function s(e){function t(e){n&&(n=!1,W(".theme_panel .theme_cover").delegate("li","click",function(t){var n=t.target.parentNangeClass(n),e.chooseTheme(n)}))}this.data=e,t(this)}function o(e){this.themeTpls=[]}function u(e,t){var n=!1,r=qboot.when.defer();i.forEach(function(r,i){r.page===t&&r.page_count===e&&(n=i.toString())});if(n)return r.resolve(i[n].info),r.promise;var s={start:e*t,end:e*(t+1),page:t,page_count:e},o={c:"theme",a:"index",tag:"yulemingxing2022",bgn:s.start,cnt:s.end-s.start,ver:HAO_CONFIG.themeConfig.v,fmt:"jsonp",dst_ver:THEME_CONF.DSTVER};DEBUG&&(o.debug=1);var u=HAO_CONFIG.themeConfig.cdn_host+"index.php?"+qboot.encodeURIJson(o);return qboot.jsonp(u,function(n){i.push({page:t,page_count:e,info:n}),r.resolve(n)}),r.promise}function a(e){return e?HAO_CONFIG.themeConfig.cdn_host+"index.php?"+qboot.encodeURIJson({c:"theme",a:"css",key:e,ver:HAO_CONFIG.themeConfig.v,dst_ver:THEME_CONF.DSTVER}):""}function f(e,t,n){var r=Math.ceil(n/t)-1;if(e===0)return r;if(e===r)return 0}function l(e){var t=new Date(e.startTime.replace(/-/g,"/")),n=new Date(e.endTime.replace(/-/g,"/")),r=location.href.queryUrl("previewTime"),i=r?new Date(r):hao360.todayObj;if(t>i||n<i)return;var s=new AppData("forceThemeClose")===e.themeName)return;return e.themeName}function S(){this.lock=!1}this.themeStatus={isUsed:!1};var t=this,n=!0,r=[],i=[];s.prototype={changeClass:function(e){W(".theme_panel .theme_cover .is-active").removeClass("is-active");var t=W(".theme_panel li [data-key="+e+"]");e===(new AppData("api.hao.360.cn")).get("cubeUserTheme")?t.removeClass("is-active"):t.addClass("is-active")},chooseTheme:function(e){var t=(new AppData("api.hao.360.cn")).get("cubeUserTheme"),n=t===e,r=e;n?r="":b.log(r,"panel"),(new AppData("api.hao.360.cn")).set("cubeUserTheme",r),m.load(a(r))}},o.prototype.getSingleThemeList=function(e,t,n){var e=e||[],r=e.length||n,i=t*n,o=(new AppData("api.hao.360.cn")).get("cubeUserTheme"),u=[];for(var a=0+i;a<r+i;a++)this.themeTpls[a]||(this.themeTpls[a]=new s(e[a-i])),this.themeTpls[a].data.className=o===this.themeTpls[a].data.keyword?"is-active":"",u.push(g.createThemeHtml(this.themeTpls[a].data));return u.join("")};var c=window.themeController,h=new AppData("api.hao.360.cn"),p=h.get("cubeUserTheme")||window.forceThemeConfig&&l(forceThemeConfig),d=["<li>",'<a class="theme_item {$className}" title="{$author}" id="{$keyword}" data-key="{$keyword}">','<img src="{$cover}">','<p class="theme_cover_bg">{$hot_weight}\u4e07\u4eba\u4f7f\u7528</p>','<p class="theme_title">{$name}</p>',"</a>","</li>"].join(""),v=["cover","hot_weight","name","author","className","keyword"],m=new c.CssLoader({current:a(p),callback:function(n){n?(t.themeStatus.isUsed=!0,e.turnon&&e.turnon()):(t.themeStatus.isUsed=!1,e.turnoff&&e.turnoff())}}),g=new c.HTMLMaker(d,v),y=new o,b=new c.ThemeMonitor("https://s.360.cn/wzdh/theme2013.html"),w,E=new c.Panel({html:"",countHtml:"",toggleProject:{w:".theme_panel",toggleClass:["theme_col","theme_expand"]},htmlSetFunction:function(e){if(e){var t=W(".theme_panel .theme_cover [data-isActive=true]").html(),n=e.replace("is-active","");HtmlIndexOf=r.indexOf(n),t&&W(".theme_panel .theme_cover [data-isActive=true]").attr("data-isActive","false").fadeOut(200),HtmlIndexOf>-1?W(".theme_panel .theme_cover #PanelHtmlArray"+HtmlIndexOf+"").attr("data-isActive","true").fadeIn(200):(W(".theme_panel .theme_cover").appendChild(W('<div style="display:none;" id="PanelHtmlArray'+r.length+'">'+e+"</h(n))}},countHtmlSetFunction:function(e){W(".theme_panel .theme_list_count").html(e)}});p&&b.log(p,"use"),S.prototype.FirstFetchRender=function(){this.lock=!0;var e=hao360.screen.wide?9:7;u(e,0).then(function(t){w=new c.Slider({page:0,page_count:e,page_total:parseInt(t.data.theme_total)||0,main_data:"",countTpl:'<li class="{$className}" data-index="{$index}"></li>',replaceParams:["className","index"]}),E.options.countHtml=w.countHtml,E.options.html=y.getSingleThemeList(t.data.theme_data,0,w.page_count)})};var x=new S,T=function(){x.lock||(x.FirstFetchRender(),W("#toolbar-themetrigger").un("mouseenter",T).un("focus",T))};W("#toolbar-themetrigger").on("mouseenter",T).on("focus",T),W("#toolbar-themetrigger").on("click",function(){E.togglePanel()}),W(".theme_panel .theme_prev").on("click",function(e){var t=w.prev(),n=w.page,r=w.page_count,i=w.page_total;t||(w.page=f(n,r,i),n=w.page),E.options.countHtml=w.countHtml,u(r,n).then(function(e){E.options.html=y.getSingleThemeList(e.data.theme_data,n,r)})}),W(".theme_panel .theme_next").on("click",function(e){var t=w.next(),n=w.page,r=w.page_count,i=w.page_total;t||(w.page=f(n,r,i),n=w.page),E.options.countHtml=w.countHtml,u(r,n).then(function(e){E.options.html=y.getSingleThemeList(e.data.theme_data,n,r)})}),W(".theme_panel .theme_list_count").delegate("li","click",function(e){var t=parseInt(W(e.target).attr("data-index")),n=w.page_count,r=w.jump(n,t);r&&(E.options.countHtml=w.countHtml,u(n,t).then(function(e){E.options.html=y.getSingleThemeList(e.data.theme_data,t,n)}))}),W(window).on("resize",function(){var e=hao360.screen.wide?9:7;if(w&&e!==w.page_count){var t=w.jump(e,0);if(t){var n=w.page,r=w.page_count;E.options.countHtml=w.countHtml,u(r,0).then(function(e){E.options.html=y.getSingleThemeList(e.data.theme_data,n,r)})}}}),W(".theme_panel .theme_no").on("click",function(e){W(".theme_panel .theme_cover .is-active").removeClass("is-active");var t=new AppData("api.hao.360.cn");t.remove("cubeUserTheme"),window.forceThemeConfig&&l(forceThemeConfig)&&t.set("forceThemeClose",forceThemeConfig.themeName),m.load(a())}),W(".theme_panel .theme_collapse").on("click",function(){E.togglePanel()})}function ubeThemeChange::use")},turnoff:funcmeChange::none")}});window.themeController.getStatus=function(){return t.themeStatus}}window.themeController.getStatus=function(){return{isUsed:!!(new AppData("api.hao.360.cn")).get("cubeUserTheme")}},t()})();(function(e){if(!(e&&Object.isArray(e)&&e.length>0))return;var t=function(){var t=e[0].recordTime;if(!t)return;window.soHotUtils&&soHotUtils.timeConvert(t,function(e){if(!e)return;if(W("#front-news-sohot .rtime").html()!=="")return;W("#front-news-sohot .rtime").html(e)})};t()})(window.SO_HOT_RANK);(function(){function e(e,t,n){var e=new Date(e),t=new Date(t),r=hao360.queryUrl(location.href,"previewTime")||new Date;return e<=new Date(r)&&t>=new Date(r)&&n}function t(e){var t=qboot.when.defer();return e(function(e){t.resolve(e)},function(e){t.reject(e)}),t.promise}function n(e,t,n){qboot.events.on(e+":end",function(){t(n)});var r=qboot.events.fire(e+":start",{eventName:n});r&&t(n)}function r(){var r=QW.ArrayH.map(festivalChainConfig.chain,function(e){var t=typeof e=="string"?window[e]:e;return t&&(t.isChain=!0),t}),i=QW.ArrayH.filter(r,function(t){return t&&e(t.startTime,t.endTime,t.isOn)}),s=t(funcvalChainConfig.fireEventList.forEach(function(t){qboot.events.on(t,fuforEach(i,function(e){s=s.then(function(r){return t(function(t,i){n(e.eventName,t,r)})})}),s.then(function(){})}if("undefined"==typeof festivalChainConfig)return;e(festivalChainConfig.startTime,festivalChainConfig.endTime,festivalChainConfig.isOn)&&r()})();(function(){function t(){var e=!1;if(hao360.is360ee()&&window.browser360eeFestivalControl&&browser360eeFestivalControl.isOn){var t=browser360eeFestivalControl,n=new Date(t.startTime.replace(/-/g,"/")),r=new Date(t.endTime.replace(/-/g,"/")),i=location.href.queryUrl("previewTime"),s=i?new Date(i):hao360.todayObj;s>=n&&s<r&&(e=!0)}return e}var e="festival_360ee_close";window.festival360ee={isClosed:t}})();(function(e){function t(e){this.options=e||{},this.wrap=this.options.wrap,this.$wrap=W(this.wrap),this.onlineData=null,this.init()}if(!e)return;t.prototype.model={festivalWrap:"festival-search-bg",festivalScene:"festival-search-bg_scene",festivalRedpacket:"festival-search-bg_redpacket",sceneTpl:'<div id="festival-search-bg_scene">{imgsDom}</div>',adTpl:'<span class="ad"></span>',extraTpl:'<span class="festival-search-bg_redpacket anim" id="festival-search-bg_redpacket" style="left:{left}px; top:{top}px"><img src="{pic}"/></span>',picTpl:'<img src="{pic}" class="pic" loading="lazy"/>',picItemTpl:['<div class="festival-search-bg_item" data-depth="{speed}" style="z-index: {zIndex}">',"{extraDom}",'<img src="{pic}" width="{width}" height="100%" class="img" style="left: {offsetX}" loading="lazy"/>',"</div>"].join(""),viewLinkTpl:['<div id="festival-search-bg">','<div class="festival-search-bg_link" id="festival-search-bg_link">',"{adDom}","{bgImgDom}","</div>","</div>"].join(""),viewTpl:['<div id="festival-search-bg">',"{adDom}","{bgImgDom}","</div>"].join(""),viewStyle:["#{wrap} {width: 998px; height: 100%; background: #fff; position: absolute; left: 0; top: 0; z-index: 1; overflow: hidden;}","#{wrap} .festival-search-bg_link {cursor: pointer;}","#{wrap} .festival-search-bg_link .ad {z-index: 1;}","#{wrap} .festival-search-bg_link .pic {pointer-events: none;}","#{wrap} .festival-search-bg_item {width: 998px; height: 134px; position: relative;}","#{wrap} .festival-search-bg_item .img {display: block; position: relative; object-fit: cover;}","#{wrap} .festival-search-bg_redpacket {display: block; position: absolute; transform-origin: 50% 100%; -webkit-transform-origin: 50% 100%; z-index: 1;}","#{wrap} .festival-search-bg_redpacket.anim {-webkit-animation: shake 10s linear infinite; animation: shake 10s linear 5;}",".w-lg #{wrap} {width: 1168px;}",".w-lg #{wrap} .festival-search-bg_item {width: 1168px;}","@-webkit-keyframes shake {0%, 9.6% {transform: rotate(0deg);} 0.8%, 4%, 7.2% {transform: rotate(-15deg);} 2.4%, 5.6%, 8.8% {transform: rotate(15deg);}}","@keyframes shake {0%, 9.6% {transform: rotate(0deg);} 0.8%, 4%, 7.2% {transform: rotate(-15deg);} 2.4%, 5.6%, 8.8% {transform: rotate(15deg);}}"].join("")},t.prototype.init=function(){var e=this;this.filterOnlineData(function(){if(!e.onlineData)return;e.loadStyle(),e.render(),e.bindEvents()})},t.prototype.filterOnlineData=function(t){var n=+hao360.todayObj,r=location.href.queryUrl("previewTime");r&&(n=+(new Date(r)));var i=e.filter(function(e,t){var r=e.isOn==="1",i=+(new Date(e.startTime)),s=+(new Date(e.endTime));return r&&n>=i&&n<=s});this.onlineData=i[0],t&ents=function(){var e=this,t=e.model;qboot.events.on("screen",function(t){e.render()}),e.$wrap.hover(function(){W("#"+t.festivalRedpacket).css({"-webkit-animation-play-state":"paused","animation-play-state":"paused"})},function(){W("#"+t.festivalRedpacket).css({"-webkit-animation-play-state":"running","animation-play-state":"running"})}),W("#festival-search-bg_link").on("click",function(n){var r=e.onlineData.name||"\u641c\u7d22\u533a\u80cc\u666f",i=e.onlineData.link;window.open(i),window.moniter&&window.moniter.sendClklog(r,i,t.festivalWrap)}),qboot.events.on("ziqi-cube-dialog:hide",function(){function t(){var e,t=document.createElement("div"),n={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd",MSAnimation:"MSAnimationEnd"};for(e in n)if(t.style[e]!==undefined)return n[e]}var n="breath",r=t();if(r)qboot.load.css(["@keyframes breath { 0% {box-shadow: rgba(0,0,0,0) 0px 0px 0px;} 50% {box-shadow: rgba(0,0,0,.4) 0px 0px 10px;} 100% {box-shadow: rgba(0,0,0,0) 0px 0px 0px;}}","@-webkit-keyframes breath { 0% {box-shadow: rgba(0,0,0,0) 0px 0px 0px;} 50% {box-shadow: rgba(0,0,0,.4) 0px 0px 10px;} 100% {box-shadow: rgba(0,0,0,0) 0px 0px 0px;}}","@-moz-keyframes breath { 0% {box-shadow: rgba(0,0,0,0) 0px 0px 0px;} 50% {box-shadow: rgba(0,0,0,.4) 0px 0px 10px;} 100% {box-shadow: rgba(0,0,0,0) 0px 0px 0px;}}","@-o-keyframes breath { 0% {box-shadow: rgba(0,0,0,0) 0px 0px 0px;} 50% {box-shadow: rgba(0,0,0,.4) 0px 0px 10px;} 100% {box-shadow: rgba(0,0,0,0) 0px 0px 0px;}}","@-ms-keyframes breath { 0% {box-shadow: rgba(0,0,0,0) 0px 0px 0px;} 50% {box-shadow: rgba(0,0,0,.4) 0px 0px 10px;} 100% {box-shadow: rgba(0,0,0,0) 0px 0px 0px;}}",e.wrap+"."+n+" {border: 1px solid #b2ffca;animation: breath 1.2s 3;-webkit-animation: breath 1.2s 3;-moz-animation: breath 1.2s 3;-o-animation: breath 1.2s 3;-ms-animationh-bg-animate"),e.$wrap.addClass(n),r&&e.$wrap.on(r,function(){W(this).removeClass(n)});else{qboot.load.css(e.wrap+"."+n+" {border: 1px solid #b2ffca;}","search-bg-animate"),e.$wrap.addClass(n);var i=function(e,t){var n=24,r=Math.ceil(e*n/1e3),i=0,s=setInterval(function(){i++,i>=r&&clearInterval(s),t(i/r)},1e3/n);return s},s=function(t){i(600,function(n){var r=(.4*n).toFixed(2);e.$wrap.css({"box-shadow":"0px 0px 10px rgba(0,0,0,"+r+")"}),n===1&&t&&t()})},o=function(t){i(600,function(n){var r=(.4*(1-n)).toFixed(2);e.$wrap.css({"box-shadow":"0px 0px 10px rgba(0,0,0,"+r+")"}),n===1&&t&&t()})},u=function(e,t){vtion(){n++,e[n]?r():t&&t()})};r()};u([s,o,s,o,s,o],function(){e.$wrap.removeClass(n)})}})},t.prototype.loadStyle=function(){var e=this.model,t=e.viewStyle;t=R.tmpl(t,{wrap:e.festivalWrap}),qboot.load.css(t,e.festivalWrap+"_style")},t.prototype.render=function(){var e=this.model,t=this.onlineData.link?e.viewLinkTpl:e.viewTpl,n=e.adTpl,r=this.generateBgImgHtml();if(!r)return;var i=R.tmpl(t,{link:this.onlineData.link,name:this.onlineData.name,adDom:this.onlineData.isAd=="1"?n:"",bgImgDom:r});W("#"+e.festivalWrap).length&&W("#"+e.festivalWrap).removeNode(),this.$wrap.insertAdjacentHTML("afterbegin",i),W("#"+e.festivalScene)[0]&&this.initParallax()},t.prototype.generateExtraHtml=function(){var e="";return this.onlineData.extra&&(e=R.tmpl(this.model.extraTpl,{pic:hao360.clipImage(hao360.screen.wide?this.onlineData.extra.widePic:this.onlineData.extra.pic,{webp:!0}),left:hao360.screen.wide?this.onlineData.extra.wideLeft:this.onlineData.extra.left,top:hao360.screen.wide?this.onlineData.extra.wideTop:this.onlineData.extra.top})),e},t.prototype.generateBgImgHtml=function(){var e=this,t=this.mod75":"998_134_75",i=this.onlineData.pics.filter(function(e,t){return e.pic&&e.widePic});if(i.length===1)n=R.tmpl(t.picTpl,{pic:hao360.clipImage(hao360.screen.wide?i[0].widePic:i[0].pic,{whq:r,webp:!0})});else if(i.length>1){var s=[{speed:.2,zIndex:3,width:"103%",offsetX:"-20px"},{speed:.1,zIndex:2,width:"102%",offsetX:"-10px"},{speed:.05,zIndex:1,width:"101%",offsetX:"-5px"}],o="";this.onlineData.pics.forEach(function(n,i){var u=s[i];qboot.mix(u,n,!0),u.pic=hao360.clipImage(hao360.screen.wide?n.widePic:n.pic,{whq:r,webp:!0}),u.extraDom=i===0?e.generateExtraHtml():"",o+=R.tmpl(t.picItemTpl,u)}),n=R.tmpl(t.sceneTpl,{imgsDom:o})}return n},t.prototype.initParallax=function(){function t(){var t=W("#"+e.model.festivalScene)[0];new Parallax(t,{hoverOnly:!0,limitY:0})}var e=this;typeof Parallax!="undefined"?t():qboot.load("parallaxSdk",function(){t()})};try{new t({wrap:"#search-frame"})}catch(n){DEBUG&&console.error(n)}})(window.MAJIA_SDK_DATA&&MAJIA_SDK_DATA.searchBgConf);var isSupportAnimation=function(){var e=["","webkit-","Moz-","ms-","o-"];for(var t=0;t<e.length;t++){var n=e[t]+"animation";if(n in document.documentElement.style)return!0}return!1}(),animationendEvt=function(){var e=document.createElement("div"),t={animation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(var n in t)if(e.style[n]!==undefined)return t[n]}();(function(e){function t(){function t(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform==="Windows":navigator.platform==="Win32"}function n(){return moniter.getBrowser()==="chrome"}function r(e,t){var n=location.href.queryUrl("previewTime")?new Date(location.href.queryUrl("previewTime")):hao360.todayObj;return n>=new Date(e)&&n<=new Date(t)}return e.isOn===1&&r(e.startTime,e.endTime)&&hao360.mid===""&&t()&&n()}function n(e,n){try{navigator.userAgentData&&navigator.userAgentData.getHighEntropyValues?navigator.userAgentData.getHighEntropyValues(["platformVersion"]).then(function(r){r.platformVersion==="0.1.0"?e():t()?n():e()}).catch(function(){e()}):/Windows NT 6.1/.test(navigator.userAgent)?e():t()?n():e()}catch(r){e()}}function r(t,r){e?n(r,t):r()}wind=r})(window.weishiOpenscreenConfig);(function(){funon(){clearTimeout(i),window.BrowserTabVisibility&&BrowserTabVisibility.offVisible(o)},o=function(){var e=+(new Date);e-n>=t&&r()};W(document).once("click",s),W(document).once("scroll",s),window.BrowserTabVisibility&&BrowserTabVisibility.onVisible(o)}function n(){return"scrollBehavior"in document.documentElement.style}function r(){var e=97,t=W("#doc-main-bd").getRect().top-e;n()?window.scrollTo({top:t,behavior:"instant"}):window.scrollTo(0,t)}var e=qboot.mix(window.noclickScrollConfig||{},{isOn:1,timeout:10});if(!e.isOn||e.timeout===0)return;window.userFeature&&window.userFeature.is("roll",function(){t(function(){r()},e.timeout*60*1e3)})})();(function(){var e=function(e){var t=[];for(var n in e){var r=n+"="+e[n];t.push(r)}return t.join("&")};W(document).delegate(".cube-card","click",function(t){var n=W(t.target),r=n.parentNode(".cube-card");if(r){var i=n[0];i.tagName!=="A"&&(i=n.parentNode("a")[0]);if(i.tagName==="A"){var s=W(i).attr("href"),o=W(i).attr("re-tmprtp")==1;if(o)return;var u=s.split("?")[0],a=i.hash,f;if(i.hostname==="www.360kuai.com"){var l=hao360.queryUrl(s),c=l.tmprtp||"";if(c){var h=hao360.queryUrl(c),p=VersionHub&&VersionHub.hit(),d=h.expf||"";if(p.length){d?d=d+","+p.join(","):d=p.join(",");var v=qboot.mix(h,{expf:d},!0);f=qboot.mix(l,{tmprtp:e(v)},!0)}}if(f){var m=u+"?"+qboot.encodeURIJson(f)+a;W(i).attr("href",m),W(i).attr("re-tmprtp","1")}}}}})})();