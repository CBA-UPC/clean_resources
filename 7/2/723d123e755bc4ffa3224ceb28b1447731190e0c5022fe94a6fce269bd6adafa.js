(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1188],{51768:function(t,n,e){!function(){"use strict";var t=function(t){return function(n){return function(t){var n=typeof t;return null===t?"null":"object"===n&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===n&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":n}(n)===t}},n=o=r=t("string"),i=t("object"),u=t("array"),a=o(null),c=n("boolean"),s=o(void 0),f=l=function(t){return!f(t)},d=n("function"),m=n("number"),g=p=h=v=b=function(t){return t},y=function(t,n){return t===n};ar w=S=k=v(!1),C=v(!0),O=tinymce.util.Tools.resolve("tinymce.ThemeManager"),_=r D=function(){return B},B=),M=A={some:M,none:D,from:function(t){return null===t||void 0===t?B:M(t)}},F=Array.prototype.slice,I=Array.prototype.indexOf,R=Array.prototype.push,V=function(t,n){return I.call(t,n)},P=H=z=N=function(t,n){for(var e=[],o=0;o<t.length;o+=n){var r=F.call(t,o,o+n);e.push(r)}return e},L=W=U=j=G=function(t,n,e){return function(t,n){for(var e=t.length-1;e>=0;e--)n(t[e],e)}(t,(function(t,o){e=n(e,t,o)})),e},X=q=Y=K=J=$=Q=Z=tt=nt=function(t){return[t]},et=ot=rt=function(t){return ot(t,0)},it=ut=d(Array.from)?Array.from:function(t){return F.call(t)},at=ct=Object.keys,st=Object.hasOwnProperty,ft=lt=dt=mt=function(t,n){var e={};return function(t,n,e,o){ft(t,()}(t,n,e),p),e},gt=pt=ht=function(t){return gt(t,b)},vt=bt=yt=xt=wt=St=kt=Ct=Ot=_t=Tt=Et=/^\s+|\s+$/g),Dt=function(t){return t.length>0},Bt=Mt=function(t){if(null===t||void 0===t)throw new Error("Node cannot be null or undefined");return{dom:t}},At={fromHtml:fromTag:function(t,n){var e=(n||document).createElement(t);return Mt(e)},fromText:fromDom:Mt,fromPoint:;"undefined"!==typeof window?window:Function("return this;")();var Ft,It=function(t){return t.dom.nodeName.toLowerCase()},Rt=function(t){return function(n){return function(t){return t.dom.nodeType}(n)===t}},Vt=Rt(1),Pt=Rt(3),Ht=Rt(9),zt=Rt(11),Nt=Lt=function(){return Wt(0,0)},Wt=function(t,n){return{major:t,minor:n}},Ut={nu:Wt,detect:unknown:Lt},jt=Gt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Xt=function(t){return function(n){return Ot(n,t)}},qt=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:,{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Gt],search:,{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return Ot(t,"msie")||Ot(t,"trident")}},{name:"Opera",versionRegexes:[Gt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Xt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Xt("firefox")},{name:"Safari",versionRegexes:[Gt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:],Yt=[{name:"Windows",search:Xt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return Ot(t,"iphone")||Ot(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Xt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Xt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Xt("linux"),versionRegexes:[]},{name:"Solaris",search:Xt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Xt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Xt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Kt={browsers:v(qt),oses:v(Yt)},Jt="Edge",$t="Chrome",Qt="Opera",Zt="Firefox",tn="Safari",nn=en={unknown:function(){return nn({current:void 0,version:Ut.unknown()})},nu:nn,edge:v(Jt),chrome:v($t),ie:v("IE"),opera:v(Qt),firefox:v(Zt),safari:v(tn)},on="Windows",rn="Android",un="Linux",an="Solaris",cn="FreeBSD",sn="ChromeOS",fn=ln={unknown:nu:fn,windows:v(on),ios:v("iOS"),android:v(rn),linux:v(un),osx:v("OSX"),solaris:v(an),freebsd:v(cn),chromeos:v(sn)},dn=mn=function(t){return window.matchMedia(t).matches},gn=Nt((),pn=function(){return gn()},hn=vn=bn=yn=function(t,n){return function(t,n){return function(t,n,e){return 0!==(t.compareDocumentPosition(n)&e)}(t,n,Node.DOCUMENT_POSITION_CONTAINED_BY)}(t.dom,n.dom)},xn=wn=function(t){return At.fromDom(t.dom.ownerDocument)},Sn=kn=function(t){return At.fromDom(Sn(t).dom.documentElement)},Cn=On=function(t){return A.from(t.dom.parentNode).map(At.fromDom)},_n=function(t){return A.from(t.dom.offsetParent).map(At.fromDom)},Tn=function(t){return L(t.dom.childNodes,At.fromDom)},En=Dn=function(t,n){return{element:t,offset:n}},Bn=Mn=An=d(Element.prototype.attachShadow)&&d(Node.prototype.getRootNode),Fn=v(An),In=An?Sn,Rn=function(t){return Mn(t)?t:At.fromDom(Sn(t).dom.body)},Vn=Pn=Hn=function(t){return l(t.dom.shadowRoot)},zn=function(t){var n=Pt(t)?t.dom.parentNode:t.dom;if(void 0===n||null===n||null===n.ownerDocument)return!1;var e,o,r=n.ownerDocument;return Vn(At.fromDom(n)).fold((function(){return r.body.contains(n)}),(e=zn,o=Pn,function(t){return e(o(t))}))},Nn=Ln=function(t){var n=t.dom.body;if(null===n||void 0===n)throw new Error("Body is not available yet");return At.fromDom(n)},Wn=Un=jn=function(t,n){var e=t.dom;ft(n,(function(t,n){Wn(e,n,t)}))},Gn=Xn=qn=Yn=function(t,n){t.dom.removeAttribute(n)},Kn=Jn=$n=Qn=Zn=function(t,n){var e=t.dom;ft(n,()},te=ne=ee=oe=re=ie=function(t,n){var e=t.dom;Jn(e,n),xt(Xn(t,"style").map(Et),"")&&Yn(t,"style")},ue=function(t){return t.dom.offsetWidth},ae=ce=ae("height",(),se=function(t){return ce.get(t)},fe=function(t){return ce.getOuter(t)},le=de=le,me=ge=function(t){var n=t.dom.ownerDocument,e=n.body,o=n.defaultView,r=n.documentElement;if(e===t.dom)return de(e.offsetLeft,e.offsetTop);var i=me(null===o||void 0===o?void 0:o.pageYOffset,r.scrollTop),u=me(null===o||void 0===o?void 0:o.pageXOffset,r.scrollLeft),a=me(r.clientTop,e.clientTop),c=me(r.clientLeft,e.clientLeft);return pe(t).translate(u-c,i-a)},pe=he=ae("width",(function(t){return t.dom.offsetWidth})),ve=function(t){return he.get(t)},be=function(t){return he.getOuter(t)},ye=function(t){var n=At.fromDom(t).getOr(t.target)),e=function(){return t.stopPropagation()},o=function(){return t.preventDefault()},r=h(o,e);return n,t.clientX,t.clientY,e,o,r,t)},xe=function(t,n,e,o,r){var i=e,o);return t.dom.addEventListener(n,i,r),{unbind:x(we,t,n,i,r)}},we=Se=ke=function(t,n){var e=t);e.fold((,(function(t){Se(t,n)}))},Ce=function(t,n){var e=function(t){return En(t,0)}(t);e.fold((function(){Oe(t,n)}),()},Oe=_e=function(t,n){W(n,(function(n){Oe(t,n)}))},Te=Ee=De=Be=Me=Ae=function(t,n,e,o){return{x:t,y:n,width:e,height:o,right:t+e,bottom:n+o}},Fe=Ie=Re=Object.freeze({__proto__:null,view:owner:function(t){return wn(t)}}),Ve=function(t){var n=At.fromDom(document),e=Be(n),o=function(t,n){var e=n.owner(t),o=Ie(n,e);return A.some(o)}(t,Re);return o.fold(x(ge,t),()},Pe=He=function(t){var n=ge(t),e=be(t),o=fe(t);return Pe(n.left,n.top,e,o)},ze=Ne=function(){return Fe(window)},Le=We=Ue={value:Le,error:We,fromOption:;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(Ft||(Ft={}));var je=function(t,n,e){return t.stype===Ft.Error?n(t.serror):e(t.svalue)},Ge=function(t){return{stype:Ft.Value,svalue:t}},Xe=qe=function(t){return t.fold(Xe,Ge)},Ye=function(t){return je(t,Ue.error,Ue.value)},Ke=Ge,Je=function(t){var n=[],e=[];return W(t,(),{values:n,errors:e}},$e=Xe,Qe=function(t,n){return t.stype===Ft.Value?n(t.svalue):t},Ze=to=function(t,n){return t.stype===Ft.Value?{stype:Ft.Value,svalue:n(t.svalue)}:t},no=eo=je,oo=ro=function(t,n,e){switch(t.tag){case"field":return n(t.key,t.newKey,t.presence,t.prop);case"custom":return e(t.newKey,t.instantiator)}},io=function(t){return ,uo=io((),ao=io((function(t,n){return n})),co=function(t){return{tag:"defaultedThunk",process:t}},so=function(t){return co(v(t))},fo=lo=mo=function(t){var n=Je(t);return n.errors.length>0?lo(n.errors):Ke(n.values)},go=function(t){return i(t)&&ct(t).length>100?" removed due to size":JSON.stringify(t,null,2)},po=ho=function(t){return{extract:function(n,e){return Ze(t(e),(function(t){return function(t,n){return po(t,v(n))}(n,t)}))},toString:v("val")}},vo=ho(Ke),bo=function(t,n,e,o){return vt(n,e).fold((function(){return function(t,n,e){return po(t,(function(){return'Could not find valid *required* value for "'+n+'" in '+go(e)}))}(t,e,n)}),o)},yo=function(t,n,e,o){return o(vt(t,n).getOrThunk((function(){return e(t)})))},xo=function(t,n,e,o,r){var i=function(t){return r.extract(n.concat([o]),t)},u=function(t){return t.fold((function(){return Ke(A.none())}),()};switch(t.tag){case"required":return bo(n,e,o,i);case"defaultedThunk":return yo(e,o,t.process,i);case"option":return e,o,u);case"defaultedOptionThunk":return function(t,n,e,o){return o(vt(t,n).map(())}(e,o,t.process,u);case"mergeWithThunk":return yo(e,o,v({}),(function(n){var o=uo(t.process(e),n);return i(o)}))}},wo=function(t){return{extract:function(n,e){return t().extract(n,e)},toString:function(){return t().toString()}}},So=ko=function(t){var n=Co(t),e=G(t,(,{});return{extract:function(t,o){var r=c(o)?[]:So(o),i=j(r,(function(t){return!yt(e,t)}));return 0===i.length?n.extract(t,o):function(t,n){return po(t,()}(t,i)},toString:n.toString}},Co=function(t){return{extract:function(n,e){return function(t,n,e){for(var o={},r=[],i=0,u=e;i<u.length;i++){var a=u[i];ro(a,(,()}return r.length>0?$e(r):Ke(o)}(n,e,t)},toString:function(){var n=L(t,();return"obj{\n"+n.join("\n")+"}"}}},Oo=function(t){return{extract:toString:function(){return"array("+t.toString()+")"}}},_o=function(t){return{extract:toString:},To=function(t,n){return{extract:function(e,o){var r=ct(o),i=function(n,e){return Oo(ho(t)).extract(n,e)}(e,r);return Qe(i,(function(t){var r=L(t,(function(t){return oo(t,t,{tag:"required",process:{}},n)}));return Co(r).extract(e,o)}))},toString:},Eo=h(Oo,Co),Do=v(vo),Bo=function(t,n){return ho(()},Mo=Bo(m,"number"),Ao=Bo(r,"string"),Fo=Bo(c,"boolean"),Io=Bo(d,"function"),Ro=Vo=ho((),Po=function(t,n,e,o){return vt(e,o).fold((function(){return function(t,n,e){return po(t,(function(){return'The chosen schema: "'+e+'" did not exist in branches: '+go(n)}))}(t,e,o)}),()},Ho=function(t,n){return{extract:function(e,o){return vt(o,t).fold((function(){return function(t,n){return po(t,()}(e,t)}),(function(t){return Po(e,o,n,t)}))},toString:},zo=function(t){return ho(()},No=function(t,n){return To((function(n){return qe(t(n))}),n)},Lo=function(t,n,e){return Ye(function(t,n,e){var o=n.extract([t],e);return no(o,(function(t){return{input:e,errors:t}}))}(t,n,e))},Wo=Uo=jo=function(t){return"Errors: \n"+function(t){var n=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:v("... (only showing first ten failures)")}]):t;return L(n,()}(t.errors).join("\n")+"\n\nInput object: "+go(t.input)},Go=function(t,n){return Ho(t,lt(n,Co))},Xo=oo,qo=function(t,n){return{tag:"custom",newKey:t,instantiator:n}},Yo=function(t){return zo(()},Ko=function(t){return Xo(t,t,{tag:"required",process:{}},Do())},Jo=function(t,n){return Xo(t,t,{tag:"required",process:{}},n)},$o=function(t){return Jo(t,Mo)},Qo=function(t){return Jo(t,Ao)},Zo=function(t,n){return Xo(t,t,{tag:"required",process:{}},Yo(n))},tr=function(t){return Jo(t,Io)},nr=function(t,n){return Xo(t,t,{tag:"required",process:{}},Co(n))},er=function(t,n){return Xo(t,t,{tag:"required",process:{}},Eo(n))},or=function(t,n){return Xo(t,t,{tag:"required",process:{}},Oo(n))},rr=function(t){return Xo(t,t,{tag:"option",process:{}},Do())},ir=function(t,n){return Xo(t,t,{tag:"option",process:{}},n)},ur=function(t){return ir(t,Mo)},ar=function(t){return ir(t,Ao)},cr=function(t){return ir(t,Io)},sr=function(t,n){return ir(t,Oo(n))},fr=function(t,n){return ir(t,Co(n))},lr=dr=mr=function(t,n){return dr(t,n,Mo)},gr=function(t,n){return dr(t,n,Ao)},pr=function(t,n,e){return dr(t,n,Yo(e))},hr=function(t,n){return dr(t,n,Fo)},vr=function(t,n){return dr(t,n,Io)},br=function(t,n,e){return dr(t,n,Oo(e))},yr=xr=wr=wr([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Sr,kr=function(t,n){return function(t,n){var e={};return ft(t,(),e}(t,n)},Cr=function(t,n){return t,n)},Or=function(t){return function(t){var n={};return W(t,(),n}(t)},_r=function(t,n){var e,o=t);return o.errors.length>0?(e=o.errors,Ue.error(K(e))):function(t,n){return 0===t.length?Ue.value(n):Ue.value(uo(n,ao.apply(void 0,t)))}(o.values,n)},Tr=Er=Dr=Br=Mr={can:C,abort:k,run:p},Ar=function(t){if(!yt(t,"can")&&!yt(t,"abort")&&!yt(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return _(_({},Mr),t)},Fr=function(t){var n=function(t,n){return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];return X(t,(function(t,o){return t&&n(o).apply(void 0,e)}),!0)}}(t,(function(t){return t.can})),e=function(t,n){return (t,(function(t){return t.abort}));return{can:n,abort:e,run:},Ir=v,Rr=Ir("touchstart"),Vr=Ir("touchmove"),Pr=Ir("touchend"),Hr=Ir("touchcancel"),zr=Ir("mousedown"),Nr=Ir("mousemove"),Lr=Ir("mouseout"),Wr=Ir("mouseup"),Ur=Ir("mouseover"),jr=Ir("focusin"),Gr=Ir("focusout"),Xr=Ir("keydown"),qr=Ir("keyup"),Yr=Ir("input"),Kr=Ir("change"),Jr=Ir("click"),$r=Ir("transitioncancel"),Qr=Ir("transitionend"),Zr=Ir("transitionstart"),ti=Ir("selectstart"),ni=ei={tap:ni("tap")},oi=ni("focus"),ri=ni("blur.post"),ii=ni("paste.post"),ui=ni("receive"),ai=ni("execute"),ci=ni("focus.item"),si=ei.tap,fi=ni("longpress"),li=ni("sandbox.close"),di=ni("typeahead.cancel"),mi=ni("system.init"),gi=ni("system.touchmove"),pi=ni("system.touchend"),hi=ni("system.scroll"),vi=ni("system.resize"),bi=ni("system.attached"),yi=ni("system.detached"),xi=ni("system.dismissRequested"),wi=ni("system.repositionRequested"),Si=ni("focusmanager.shifted"),ki=ni("slotcontainer.visibility"),Ci=ni("change.tab"),Oi=ni("dismiss.tab"),_i=ni("highlight"),Ti=ni("dehighlight"),Ei=function(t,n){Ai(t,t.element,n,{})},Di=Bi=function(t){Ei(t,ai())},Mi=Ai=Fi=function(t,n,e,o){t.getSystem().triggerEvent(e,n,o.event)},Ii=function(t){return Or(t)},Ri=function(t,n){return{key:t,value:Ar({abort:n})}},Vi=function(t){return{key:t,value:Ar({run:)}},Pi=function(t,n){return{key:t,value:Ar({run:n})}},Hi=function(t,n,e){return{key:t,value:Ar({run:)}},zi=function(t){return ,Ni=function(t,n,e){return function(t,n){return Pi(t,()}(t,n.partUids[e])},Li=function(t,n){return Pi(t,()},Wi=function(t){return Pi(t,(function(t,n){n.cut()}))},Ui=ji=Gi=zi(bi()),Xi=zi(yi()),qi=zi(mi()),Yi=ai()),Ki=function(t){return t.dom.innerHTML},Ji=function(t,n){var e=wn(t).dom,o=At.fromDom(e.createDocumentFragment()),r=function(t,n){var e=(n||document).createElement("div");return e.innerHTML=t,Tn(At.fromDom(e))}(n,e);_e(o,r),Te(t),Oe(t,o)},$i=function(t){return t,!1)},Qi=function(t){return Mn(t)?"#shadow-root":function(t){var n=At.fromTag("div"),e=At.fromDom(t.dom.cloneNode(!0));return Oe(n,e),Ki(n)}($i(t))},Zi=function(t){return Qi(t)},tu=Ii([oi(),(function(t,n){var e=n.event,o=e.originator,r=e.target;return!function(t,n,e){return bn(n,t.element)&&!bn(n,e)}(t,o,r)||(console.warn(oi()+" did not get interpreted by the desired target. \nOriginator: "+Zi(o)+"\nTarget: "+Zi(r)+"\nCheck the "+oi()+" event handlers"),!1)}))]),nu=Object.freeze({__proto__:null,events:tu}),eu=0,ou=ru=v("alloy-id-"),iu=v("data-alloy-id"),uu=ru(),au=iu(),cu=su=function(t){var n=Vt(t)?t.dom[au]:null;return A.from(n)},fu=function(t){return ou(t)},lu=b,du=function(t){var n=function(n){return"The component must be in a context to execute: "+n+(t?"\n"+Zi(t().element)+" is not in context.":"")},e=function(t){return ,o=return{debugInfo:v("fake"),triggerEvent:o("triggerEvent"),triggerFocus:o("triggerFocus"),triggerEscape:o("triggerEscape"),broadcast:o("broadcast"),broadcastOn:o("broadcastOn"),broadcastEvent:o("broadcastEvent"),build:e("build"),addToWorld:e("addToWorld"),removeFromWorld:e("removeFromWorld"),addToGui:e("addToGui"),removeFromGui:e("removeFromGui"),getByUid:e("getByUid"),getByDom:e("getByDom"),isConnected:k}},mu=du(),gu=pu=hu=ou("alloy-premade"),vu=function(t){return Cr(hu,t)},bu=function(t){return function(t,n){var e=n.toString(),o=e.indexOf(")")+1,r=e.indexOf("("),i=e.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=t}((,t)},yu={init:,xu=wu=function(t,n){var e={};return ft(t,(),e},Su=function(t){return{classes:s(t.classes)?[]:t.classes,attributes:s(t.attributes)?{}:t.attributes,styles:s(t.styles)?{}:t.styles}},ku=function(t){return t.cHandler},Cu=function(t,n){return{name:t,handler:n}},Ou=function(t,n,e){var o=_(_({},e),function(t,n){var e={};return W(t,(),e}(n,t));return wu(o,Cu)},_u=function(t){var n=function(t){return d(t)?{can:C,abort:k,run:t}:t}(t);return ,Tu=function(t,n,e){var o=n[e];return o?function(t,n,e,o){try{var r=et(e,();return Ue.value(r)}catch(i){return Ue.error([i])}}("Event: "+e,"name",t,o).map((function(t){var n=L(t,(function(t){return t.handler}));return Fr(n)})):function(t,n){return Ue.error(["The event ("+t+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(L(n,(function(t){return t.name})),null,2)])}(e,t)},Eu=function(t,n){var e=gt(t,(function(t,e){return(1===t.length?Ue.value(t[0].handler):Tu(t,n,e)).map((function(o){var r=_u(o),i=t.length>1?j(n[e],(function(n){return H(t,(function(t){return t.name===n}))})).join(" > "):t[0].name;return Cr(e,function(t,n){return{handler:t,purpose:n}}(r,i))}))}));return _r(e,{})},Du="alloy.base.behaviour",Bu=Co([Xo("dom","dom",{tag:"required",process:{}},Co([Ko("tag"),lr("styles",{}),lr("classes",[]),lr("attributes",{}),rr("value"),rr("innerHtml")])),Ko("components"),Ko("uid"),lr("events",{}),lr("apis",{}),Xo("eventOrder","eventOrder",function(t){return fo(v(t))}((Sr={},Sr[ai()]=["disabling",Du,"toggling","typeaheadevents"],Sr[oi()]=[Du,"focusing","keying"],Sr[mi()]=[Du,"disabling","toggling","representing"],Sr[Yr()]=[Du,"representing","streaming","invalidating"],Sr[yi()]=[Du,"representing","item-events","tooltipping"],Sr[zr()]=["focusing",Du,"item-type-events"],Sr[Rr()]=["focusing",Du,"item-type-events"],Sr[Ur()]=["item-type-events","tooltipping"],Sr[ui()]=["receiving","reflecting","tooltipping"],Sr)),Do()),rr("domModification")]),Mu=function(t){return t.events},Au=Fu=Iu=Ru=Vu=Pu=Hu=function(t,n){Fu(t)?t.dom.classList.remove(n):Ru(t,n);Pu(t)},zu=Nu=function(t,n){W(n,(function(n){Vu(t,n)}))},Lu=Wu=Uu=function(t,n){if(void 0===n)throw new Error("Value.set was undefined");t.dom.value=n},ju=function(t,n){return function(t,n){var e=L(n,(),o=Lo("component.behaviours",Co(e),t.behaviours).fold((,b);return{list:n,data:lt(o,(function(t){var n=t.map(();return v(n)}))}}(t,n)},Gu=function(t){var n=function(t){var n=vt(t,"behaviours").getOr({});return J(ct(n),()}(t);return ju(t,n)},Xu=function(t,n,e){var o,r,i,u=_(_({},(o=t).dom),{uid:o.uid,domChildren:L(o.components,(function(t){return t.element}))}),a=function(t){return t.domModification.fold((function(){return Su({})}),Su)}(t),c={"alloy.base.modification":a},s=n.length>0?function(t,n,e,o){var r=_({},n);W(e,();var i=wu(r,(function(t,n){return{name:t,modification:n}})),u=function(t){return G(t,(,{})},a=G(i.classes,(,[]),c=u(i.attributes),s=u(i.styles);return Su({classes:a,attributes:c,styles:s})}(e,c,n,u):a;return i=s,_(_({},r=u),{attributes:_(_({},r.attributes),i.attributes),styles:_(_({},r.styles),i.styles),classes:r.classes.concat(i.classes)})},qu=function(t,n,e){var o={"alloy.base.behaviour":Mu(t)};return function(t,n,e,o){var r=Ou(t,e,o);return Eu(r,n)}(e,t.eventOrder,n,o).getOrDie()},Yu=function(t){var n=function(){return f},e=xr(mu),o=Wo(function(t){return Lo("custom.definition",Bu,t)}(t)),r=Gu(t),i=function(t){return t.list}(r),u=function(t){return t.data}(r),a=Xu(o,i,u)),c=qu(o,i,u),s=xr(o.components),f={uid:t.uid,getSystem:e.get,config:hasConfigured:spec:t,readState:getApis:function(){return o.apis},connect:function(t){e.set(t)},disconnect:element:a,syncComponents:function(){var t=Tn(a),n=J(t,();s.set(n)},components:s.get,events:c};return f},Ku=function(t){var n=lu(t),e=n.events,o=T(n,["events"]),r=function(t){var n=vt(t,"components").getOr([]);return L(n,Zu)}(o),i=_(_({},o),{events:_(_({},nu),e),components:r});return Ue.value(Yu(i))},Ju=$u=Qu=fu,Zu=function(t){return function(t){return vt(t,hu)}(t).getOrThunk((function(){var n=function(t){return bt(t,"uid")}(t)?t:_({uid:Qu("")},t);return Ku(n).getOrDie()}))},ta=vu;ar ea,oa=ra=ia=function(t,n,e){return ra(t,n,e).isSome()},ua=aa=function(t,n){return t,(function(t){return hn(t,n)}))},ca=sa=fa=function(){var t=ou("aria-owns");return{id:t,link:function(n){Un(n,"aria-owns",t)},unlink:function(t){Yn(t,"aria-owns")}}},la=function(t,n){return function(t){return ra(t,(function(t){if(!Vt(t))return!1;var n=Gn(t,"id");return void 0!==n&&n.indexOf("aria-owns")>-1})).bind((function(t){var n=Gn(t,"id"),e=In(t);return ca(e,'[aria-owns="'+n+'"]')}))}(n).exists((function(n){return da(t,n)}))},da=function(t,n){return ia(n,(function(n){return bn(n,t.element)}),k)||la(t,n)},ma="unknown";!function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"}(ea||(ea={}));var ga=xr({}),pa=function(t,n,e){switch(vt(ga.get(),t).orThunk((function(){var n=ct(ga.get());return at(n,(function(n){return t.indexOf(n)>-1?A.some(ga.get()[n]):A.none()}))})).getOr(ea.NORMAL)){case ea.NORMAL:return e(ba());case ea.LOGGING:var o=function(t,n){var e=[],o=(new Date).getTime();return{logEventCut:function(t,n,o){e.push({outcome:"cut",target:n,purpose:o})},logEventStopped:function(t,n,o){e.push({outcome:"stopped",target:n,purpose:o})},logNoParent:function(t,n,o){e.push({outcome:"no-parent",target:n,purpose:o})},logEventNoHandlers:logEventResponse:write:}(t,n),r=e(o);return o.write(),r;case ea.STOP:return!0}},ha=["alloy/data/Fields","alloy/debugging/Debugging"],va=function(t,n,e){return pa(t,n,e)},ba=v({logEventCut:p,logEventStopped:p,logNoParent:p,logEventNoHandlers:p,logEventResponse:p,write:p}),ya=v([Ko("menu"),Ko("selectedMenu")]),xa=v([Ko("item"),Ko("selectedItem")]);v(Co(xa().concat(ya())));var wa=v(Co(xa())),Sa=nr("initSize",[Ko("numColumns"),Ko("numRows")]),ka=function(){return nr("markers",[Ko("backgroundMenu")].concat(ya()).concat(xa()))},Ca=Oa=function(t,n,e){return function(){var t=new Error;if(void 0!==t.stack){var n=t.stack.split("\n");return q(n,(function(t){return t.indexOf("alloy")>0&&!H(ha,()})).getOr(ma)}}(),Xo(n,n,e,zo(())},_a=Ta=Ea=function(t){return Oa(0,t,{tag:"required",process:{}})},Da=function(t){return Oa(0,t,{tag:"required",process:{}})},Ba=Ma=function(t){return qo(t,b)},Aa=v(Sa),Fa=function(t,n,e,o,r,i,u,a){return void 0===a&&(a=!1),{x:t,y:n,bubble:e,direction:o,placement:r,restriction:i,label:u+"-"+r,alwaysFit:a}},Ia=wr([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Ra=Ia.southeast,Va=Ia.southwest,Pa=Ia.northeast,Ha=Ia.northwest,za=Ia.south,Na=Ia.north,La=Ia.east,Wa=Ia.west,Ua=function(t,n,e,o){var r=t+n;return r>o?e:r<e?o:r},ja=Ga=function(t,n){return tt(["left","right","top","bottom"],(function(e){return vt(n,e).map((function(n){return function(t,n){switch(n){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}}(t,n)}))}))},Xa="layout",qa=function(t){return t.x},Ya=function(t,n){return t.x+t.width/2-n.width/2},Ka=Ja=function(t,n){return t.y-n.height},$a=function(t){return t.y+t.height},Qa=Za=function(t,n,e){return Fa(qa(t),$a(t),e.southeast(),Ra(),"southeast",Ga(t,{left:1,top:3}),Xa)},tc=function(t,n,e){return Fa(Ka(t,n),$a(t),e.southwest(),Va(),"southwest",Ga(t,{right:0,top:3}),Xa)},nc=function(t,n,e){return Fa(qa(t),Ja(t,n),e.northeast(),Pa(),"northeast",Ga(t,{left:1,bottom:2}),Xa)},ec=function(t,n,e){return Fa(Ka(t,n),Ja(t,n),e.northwest(),Ha(),"northwest",Ga(t,{right:0,bottom:2}),Xa)},oc=rc=ic=function(t,n,e){return Fa(function(t){return t.x+t.width}(t),Qa(t,n),e.east(),La(),"east",Ga(t,{left:0}),Xa)},uc=function(t,n,e){return Fa(function(t,n){return t.x-n.width}(t,n),Qa(t,n),e.west(),Wa(),"west",Ga(t,{right:1}),Xa)},ac=function(){return[Za,tc,nc,ec,rc,oc,ic,uc]},cc=sc=function(){return[nc,ec,Za,tc,oc,rc]},fc=function(){return[ec,nc,tc,Za,oc,rc]},lc=function(){return[Za,tc,nc,ec,rc,oc]},dc=mc=Object.freeze({__proto__:null,events:function(t){return Ii([Pi(ui(),(function(n,e){var o=t.channels,r=ct(o),i=e,u=function(t,n){return n.universal?t:j(t,(function(t){return P(n.channels,t)}))}(r,i);W(u,()}))])}}),gc=[Jo("channels",No(Ue.value,ko([Ea("onReceive"),lr("schema",Do())])))],pc=hc=function(t,n,e){return function(t,n,e){var o=e.toString(),r=o.indexOf(")")+1,i=o.indexOf("("),u=o.substring(i+1,r-1).split(/,\s*/);return t.toFunctionAnnotation=t}((,e,n)},vc=bc=function(t,n,e,o,r,i,u){var a=c=lt(r,(function(t,n){return hc(e,t,n)})),s=lt(i,(function(t,n){return pu(t,n)})),f=_(_(_({},s),c),{revoke:x(vc,e),config:schema:v(n),exhibit:name:v(e),handlers:);return f},yc=function(t){return Or(t)},xc=ko([Ko("fields"),Ko("name"),lr("active",{}),lr("apis",{}),lr("state",yu),lr("extra",{})]),wc=function(t){var n=Uo("Creating behaviour: "+t.name,xc,t);return function(t,n,e,o,r,i){var u,a,c=ko(t),s=fr(n,[(u="config",a=t,ir(u,ko(a)))]);return bc(c,s,n,e,o,r,i)}(n.fields,n.name,n.active,n.apis,n.extra,n.state)},Sc=ko([Ko("branchKey"),Ko("branches"),Ko("name"),lr("active",{}),lr("apis",{}),lr("state",yu),lr("extra",{})]),kc=function(t){var n=Uo("Creating behaviour: "+t.name,Sc,t);return function(t,n,e,o,r,i){var u=t,a=fr(n,[ir("config",t)]);return bc(u,a,n,e,o,r,i)}(Go(n.branchKey,n.branches),n.name,n.active,n.apis,n.extra,n.state)},Cc=v(void 0),Oc=wc({fields:gc,name:"receiving",active:mc}),_c=Object.freeze({__proto__:null,exhibit:),Tc=function(){return At.fromDom(document)},Ec=function(t){return t.dom.focus()},Dc=Bc=function(t){return void 0===t&&(t=Tc()),A.from(t.dom.activeElement).map(At.fromDom)},Mc=function(t){return Bc(In(t)).filter(()},Ac=function(t,n){var e=In(n),o=Bc(e).bind((function(t){var e=function(n){return bn(t,n)};return e(n)?A.some(n):function(t,n){var e=return e(t.dom)}(n,e)})),r=t(n);return o.each((),r},Fc=function(t,n,e,o,r){var i=return{position:t,left:n.map(i),top:e.map(i),right:o.map(i),bottom:r.map(i)}},Ic=function(t,n){Zn(t,n))},Rc=wr([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),Vc=function(t,n,e,o,r,i){var u=n.rect,a=u.x-e,c=u.y-o,s=r-(a+u.width),f=i-(c+u.height),l=A.some(a),d=A.some(c),m=A.some(s),g=A.some(f),p=A.none();return n.direction,(function(){return Fc(t,l,d,p,p)}),(function(){return Fc(t,p,d,m,p)}),(function(){return Fc(t,l,p,p,g)}),(function(){return Fc(t,p,p,m,g)}),(function(){return Fc(t,l,d,p,p)}),(function(){return Fc(t,l,p,p,g)}),(function(){return Fc(t,l,d,p,p)}),(function(){return Fc(t,p,d,m,p)}))},Pc=function(t,n){return t.fold((,(function(t,e,o,r){return Vc("absolute",n,t,e,o,r)}),()},Hc=function(t,n){var e=x(Ve,n),o=t.fold(e,e,(),r=be(n),i=fe(n);return Pe(o.left,o.top,r,i)},zc=function(t,n){return n.fold((,()},Nc=Rc.none;var Lc,Wc=Rc.relative,Uc=Rc.fixed,jc=function(t,n){return function(t,n){return{anchorBox:t,origin:n}}(t,n)},Gc="data-alloy-placement",Xc=function(t){return Xn(t,Gc)},qc=wr([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Yc=function(t,n,e,o){var r=t.bubble,i=r.offset,u=function(t,n,e){var o=function(o,r){return n[o].map(().getOr(r)},r=o("left",t.x),i=o("top",t.y),u=o("right",t.right),a=o("bottom",t.bottom);return Pe(r,i,u-r,a-i)}(o,t.restriction,i),a=t.x+i.left,c=t.y+i.top,s=Pe(a,c,n,e),f=function(t,n){var e=n.x,o=n.y,r=n.right,i=n.bottom,u=t.x,a=t.y,c=t.right,s=t.bottom,f=t.width,l=t.height;return{originInBounds:u>=e&&u<=r&&a>=o&&a<=i,sizeInBounds:c<=r&&c>=e&&s<=i&&s>=o,visibleW:Math.min(f,u>=e?r-u:c-e),visibleH:Math.min(l,a>=o?i-a:s-o)}}(s,u),l=f.originInBounds,d=f.sizeInBounds,m=f.visibleW,g=f.visibleH,p=l&&d,h=p?s:function(t,n){var e=n.x,o=n.y,r=n.right,i=n.bottom,u=t.x,a=t.y,c=t.width,s=t.height,f=Math.max(e,r-c),l=Math.max(o,i-s),d=ja(u,e,f),m=ja(a,o,l),g=Math.min(d+c,r)-d,p=Math.min(m+s,i)-m;return Pe(d,m,g,p)}(s,u),b=h.width>0&&h.height>0,y=function(t,n,e){var o=v(n.bottom-e.y),r=v(e.bottom-n.y),i=function(t,n,e,o){return t.fold(n,n,o,o,n,o,e,e)}(t,r,r,o),u=v(n.right-e.x),a=v(e.right-n.x),c=function(t,n,e,o){return t.fold(n,o,n,o,e,e,n,o)}(t,a,a,u);return{maxWidth:c,maxHeight:i}}(t.direction,h,o),x=y.maxWidth,w={rect:h,maxHeight:y.maxHeight,maxWidth:x,direction:t.direction,placement:t.placement,classes:{on:r.classesOn,off:r.classesOff},layout:t.label,testY:c};return p||t.alwaysFit?qc.fit(w):qc.nofit(w,m,g,b)},Kc=Jc=function(){return Kc((function(t){return t.destroy()}))},$c=Qc=function(){var t=Kc(p);return _(_({},t),{on:)},Zc=C,ts=function(t,n,e){return function(t,n,e,o){return xe(t,n,e,o,!1)}(t,n,Zc,e)},ns=function(t,n,e){return t,n,Zc,e)},es=ye,os=["top","bottom","right","left"],rs="data-alloy-transition-timer",is=function(t,n){return t,n.classes)},us=function(t,n){var e=return pt(n,(function(n,o){var r,i,u,a=t[o].map(e),c=n.map(e);return void 0===u&&(u=y),!St(r=a,i=c,u).getOr(r.isNone()&&i.isNone())})).isSome()},as=function(t,n){var e,o=$c(),i=$c(),u=function(n){var e,o=null!==(e=n.raw.pseudoElement)&&void 0!==e?e:"";return bn(n.target,t)&&!Dt(o)&&P(os,n.raw.propertyName)},a=function(r){if(f(r)||u(r)){o.clear(),i.clear();var a=null===r||void 0===r?void 0:r.raw.type;(f(a)||a===Qr())&&(clearTimeout(e),Yn(t,rs),Lu(t,n.classes))}},c=function(){o.set(ts(t,Qr(),a)),i.set(ts(t,$r(),a))};if("ontransitionstart"in t.dom)var s=ts(t,Zr(),();else c();var l=function(t){var n=function(n){var e=te(t,n),o=r(e)?e.split(/\s*,\s*/):[];return j(o,Dt)},e=function(t){if(r(t)&&/^[\d.]+/.test(t)){var n=parseFloat(t);return Tt(t,"ms")?n:1e3*n}return 0},o=n("transition-delay"),i=n("transition-duration");return X(i,(,0)}(t);requestAnimationFrame(()},cs=function(t,n,e,o,r,i){var u=function(t,n,e){return e.exists(()}(o,r,i);if(u||is(t,o)){$n(t,"position",e.position);var a=Hc(n,t),c=Pc(n,_(_({},r),{rect:a})),s=tt(os,(function(t){return c[t]}));us(e,s)&&(Zn(t,s),u&&function(t,n){Nu(t,n.classes),Xn(t,rs).each((),as(t,n)}(t,o),ue(t))}else Lu(t,o.classes)},ss=function(t,n,e,o){ie(n,"max-height"),ie(n,"max-width");var r,i={width:be(r=n),height:fe(r)};return function(t,n,e,o,r,i){var u=o.width,a=o.height,c=function(n,c,s,f,l){var d=n(e,o,r,t,i),m=Yc(d,u,a,i);return m.fold(v(m),(function(t,n,e,o){return(l===o?e>f||n>s:!l&&o)?m:qc.nofit(c,s,f,l)}))},s=X(n,(,qc.nofit({rect:e,maxHeight:o.height,maxWidth:o.width,direction:Ra(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:e.y},-1,-1,!1));return s.fold(b,b)}(n,o.preference,t,i,e,o.bounds)},fs=function(t,n){!function(t,n){Un(t,Gc,n)}(t,n.placement)},ls=function(t,n){!function(t,n){var e=ce.max(t,n,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);$n(t,"max-height",e+"px")}(t,Math.floor(n))},ds=v((),ms=v((function(t,n){ls(t,n)})),gs=ps=function(t,n,e,o){var r=ss(t,n,e,o);return function(t,n,e){var o=Pc(e.origin,n);e.transition.each((),Ic(t,o)}(n,r,o),fs(n,r),function(t,n){var e=n.classes;Lu(t,e.off),Nu(t,e.on)}(n,r),function(t,n,e){(0,e.maxHeightFunction)(t,n.maxHeight)}(n,r,o),n,r,o),{layout:r.layout,placement:r.placement}},hs=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],vs=function(t,n,e,o){void 0===o&&(o=1);var r=t*o,i=n*o,u=function(t){return vt(e,t).getOr([])},a=function(t,n,e){var o=Z(hs,e);return{offset:de(t,n),classesOn:J(e,u),classesOff:J(o,u)}};return{southeast:southwest:south:northeast:northwest:north:east:west:insetNortheast:insetNorthwest:insetNorth:insetSoutheast:insetSouthwest:insetSouth:insetEast:insetWest:},bs=ys=b,xs=ws=!Lc||(Lc={}));var Ss="data-alloy-vertical-dir",ks=function(t){return ia(t,()},Cs=function(){return fr("layouts",[Ko("onLtr"),Ko("onRtl"),rr("onBottomLtr"),rr("onBottomRtl")])},Os=function(t,n,e,o,r,i,u){var a=u.map(ks).getOr(!1),c=n.layouts.map((function(n){return n.onLtr(t)})),s=n.layouts.map((function(n){return n.onRtl(t)})),f=a?n.layouts.bind((function(n){return n.onBottomLtr.map((function(n){return n(t)}))})).or(c).getOr(r):c.getOr(e),l=a?n.layouts.bind(().or(s).getOr(i):s.getOr(o);return xs(f,l)(t)},_s=[Ko("hotspot"),rr("bubble"),lr("overrides",{}),Cs(),Ba("placement",(function(t,n,e){var o=n.hotspot,r=Hc(e,o.element),i=Os(t.element,n,lc(),dc(),sc(),fc(),A.some(n.hotspot.element));return A.some(ys({anchorBox:r,bubble:n.bubble.getOr(bs()),overrides:n.overrides,layouts:i,placer:A.none()}))}))],Ts=[Ko("x"),Ko("y"),lr("height",0),lr("width",0),lr("bubble",bs()),lr("overrides",{}),Cs(),Ba("placement",()],Es=wr([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Ds=function(t){return t.fold(b,()},Bs=function(t){return t.fold(b,b)},Ms=function(t){return X(t,(,de(0,0))},As=function(t){var n=L(t,Bs);return Ms(n)},Fs=Es.screen,Is=Es.absolute,Rs=function(t,n,e){var o=wn(t.element),r=Be(o),i=function(t,n,e){var o=Cn(e.root).dom;return A.from(o.frameElement).map(At.fromDom).filter((function(n){var e=wn(n),o=wn(t.element);return bn(e,o)})).map(ge)}(t,0,e).getOr(r);return Is(i,r.left,r.top)},Vs=function(t,n,e,o){var r=Fs(de(t,n));return A.some(r,e,o))},Ps=function(t,n,e,o,r){return t.map((function(t){var i,u,a,c=[n,t.point],s=(i=function(){return As(c)},u=function(){return As(c)},a=function(){return c)},o.fold(i,u,a)),f=function(t,n,e,o){return{x:t,y:n,width:e,height:o}}(s.left,s.top,t.width,t.height),l=e.showAbove?sc():lc(),d=e.showAbove?fc():dc(),m=Os(r,e,l,d,l,d,A.none());return ys({anchorBox:f,bubble:e.bubble.getOr(bs()),overrides:e.overrides,layouts:m,placer:A.none()})}))},Hs=[Ko("node"),Ko("root"),rr("bubble"),Cs(),lr("overrides",{}),lr("showAbove",!1),Ba("placement",()],zs=Ns=wr([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Ls=(Ns.before,Ns.on,Ns.after,function(t){return t.fold(b,b,b)}),Ws=wr([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Us={domRange:Ws.domRange,relative:Ws.relative,exact:Ws.exact,exactFromRange:getWin:range:zs},js=function(t,n,e){var o,r=t.document.createRange();return o=r,n.fold((function(t){o.setStartBefore(t.dom)}),(function(t,n){o.setStart(t.dom,n)}),(function(t){o.setStartAfter(t.dom)})),function(t,n){n.fold((function(n){t.setEndBefore(n.dom)}),(,()}(r,e),r},Gs=function(t,n,e,o,r){var i=t.document.createRange();return i.setStart(n.dom,e),i.setEnd(o.dom,r),i},Xs=qs=wr([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Ys=Ks=function(t,n){var e=t,n);return function(t,n){var e=n.ltr();return e.collapsed?n.rtl().filter(().map(().getOrThunk(():Ys(0,qs.ltr,e)}(0,e)},Js=function(t,n){return Ks(t,n).match({ltr:function(n,e,o,r){var i=t.document.createRange();return i.setStart(n.dom,e),i.setEnd(o.dom,r),i},rtl:)};qs.ltr,qs.rtl;var $s,Qs=Pt,"text"),Zs=function(t){return Qs.getOption(t)},tf=["img","br"],nf=function(t){var n=Zs(t).filter(().isSome();return n||P(tf,It(t))},ef=of=rf=function(t,n,e,o){var r=function(t,n,e,o){var r=wn(t).dom.createRange();return r.setStart(t.dom,n),r.setEnd(e.dom,o),r}(t,n,e,o),i=bn(t,e)&&n===o;return r.collapsed&&!i},uf=function(t){if(t.rangeCount>0){var n=t.getRangeAt(0),e=t.getRangeAt(t.rangeCount-1);return A.some(zs(At.fromDom(n.startContainer),n.startOffset,At.fromDom(e.endContainer),e.endOffset))}return A.none()},af=function(t){if(null===t.anchorNode||null===t.focusNode)return uf(t);var n=At.fromDom(t.anchorNode),e=At.fromDom(t.focusNode);return rf(n,t.anchorOffset,e,t.focusOffset)?A.some(zs(n,t.anchorOffset,e,t.focusOffset)):uf(t)},cf=function(t){return t).filter(().bind(af)},sf=function(t,n){return Js(t,n))},ff=function(t,n){return Js(t,n))},lf=function(t,n){return{element:t,offset:n}},df=function(t,n){var e=Tn(t);if(0===e.length)return lf(t,n);if(n<e.length)return lf(e[n],0);var o=e[e.length-1],r=Pt(o)?function(t){return Qs.get(t)}(o).length:Tn(o).length;return lf(o,r)},mf=gf=function(t,n){return n.getSelection.getOrThunk(()().map(()},pf=[rr("getSelection"),Ko("root"),rr("bubble"),Cs(),lr("overrides",{}),lr("showAbove",!1),Ba("placement",(function(t,n,e){var o=Cn(n.root).dom,r=Rs(t,0,n),i=gf(o,n).bind((function(t){var n=ff(o,Us.exactFromRange(t)).orThunk(();return n.bind(()})),u=gf(o,n).bind((function(t){return Vt(t.start)?A.some(t.start):function(t){return On(t)}(t.start)})),a=u.getOr(t.element);return Ps(i,r,n,e,a)}))],hf="link-layout",vf=bf=yf=xf=function(t){return t.y},wf=function(t,n,e){return Fa(vf(t),xf(t),e.southeast(),Ra(),"southeast",Ga(t,{left:0,top:2}),hf)},Sf=kf=function(t,n,e){return Fa(vf(t),yf(t,n),e.northeast(),Pa(),"northeast",Ga(t,{left:0,bottom:3}),hf)},Cf=Of=function(){return[wf,Sf,kf,Cf]},_f=Tf=[Ko("item"),Cs(),lr("overrides",{}),Ba("placement",()],Ef=Go("type",{selection:pf,node:Hs,hotspot:_s,submenu:Tf,makeshift:Ts}),Df=[or("classes",Ao),pr("mode","all",["all","layout","placement"])],Bf=[lr("useFixed",k),rr("getBounds")],Mf=[Jo("anchor",Ef),fr("transition",Df)],Af=function(t,n,e,o,r,i,u){return function(t,n,e,o,r,i,u,a){var c=gs(u,"maxHeightFunction",ds()),s=gs(u,"maxWidthFunction",p),f=t.anchorBox,l=t.origin,d={bounds:zc(l,i),origin:l,preference:o,maxHeightFunction:c,maxWidthFunction:s,lastPlacement:r,transition:a};return ps(f,n,e,d)}(jc(e.anchorBox,n),r.element,e.bubble,e.layouts,i,o,e.overrides,u)},Ff=function(t,n,e,o,r,i){var u=i.map(He);return If(t,n,e,o,r,u)},If=function(t,n,e,o,r,i){var u=Uo("placement.info",Co(Mf),r),a=u.anchor,c=o.element,s=e.get(o.uid);Ac((function(){$n(c,"position","fixed");var r=ee(c,"visibility");$n(c,"visibility","hidden");var f=n.useFixed()?function(){var t=document.documentElement;return Uc(0,0,t.clientWidth,t.clientHeight)}():function(t){var n=ge(t.element),e=t.element.dom.getBoundingClientRect();return Wc(n.left,n.top,e.width,e.height)}(t),l=a.placement,d=i.map(v).or(n.getBounds);l(t,a,f).each((),r.fold((,(),ee(c,"left").isNone()&&ee(c,"top").isNone()&&ee(c,"right").isNone()&&ee(c,"bottom").isNone()&&xt(ee(c,"position"),"fixed")&&ie(c,"position")}),c)},Rf=Object.freeze({__proto__:null,position:positionWithin:Ff,positionWithinBounds:If,getMode:reset:function(t,n,e,o){var r=o.element;W(["position","left","right","top","bottom"],(function(t){return ie(r,t)})),function(t){Yn(t,Gc)}(r),e.clear(o.uid)}}),Vf=Object.freeze({__proto__:null,init:),Pf=wc({fields:Bf,name:"positioning",active:_c,apis:Rf,state:Vf}),Hf=zf=Nf=Lf=function(t,n){var e=t.components();!function(t){W(t.components(),(function(t){return Ee(t.element)})),Te(t.element),t.syncComponents()}(t);var o=Z(e,n);W(o,(),W(n,()},Wf=function(t,n){Uf(t,n,Oe)},Uf=jf=function(t){Hf(t),Ee(t.element),t.getSystem().removeFromWorld(t)},Gf=function(t){var n=On(t.element).bind(();jf(t),n.each(()},Xf=function(t){var n=t.components();W(n,jf),Te(t.element),t.syncComponents()},qf=function(t,n){Yf(t,n,Oe)},Yf=Kf=function(t){var n=Tn(t.element);W(n,(),Ee(t.element)},Jf=function(t,n,e,o){e.get().each((function(n){Xf(t)}));var r=n.getAttachPoint(t);Wf(r,t);var i=t.getSystem().build(o);return Wf(t,i),e.set(i),i},$f=Qf=function(t,n,e){e.get().each(()},Zf=function(t,n,e){return e.isOpen()},tl=function(t,n,e){var o=n.getAttachPoint(t);$n(t.element,"position",Pf.getMode(o)),function(t,n,e,o){ee(t.element,n).fold((,(),$n(t.element,n,o)}(t,"visibility",n.cloakVisibilityAttr,"hidden")},nl=function(t,n,e){(function(t){return H(["top","left","right","bottom"],()})(t.element)||ie(t.element,"position"),function(t,n,e){Xn(t.element,e).fold((,()}(t,"visibility",n.cloakVisibilityAttr)},el=Object.freeze({__proto__:null,cloak:tl,decloak:nl,open:$f,openWhileCloaked:close:Qf,isOpen:Zf,isPartOf:getState:function(t,n,e){return e.get()},setContent:),ol=Object.freeze({__proto__:null,events:),rl=[_a("onOpen"),_a("onClose"),Ko("isPartOf"),Ko("getAttachPoint"),lr("cloakVisibilityAttr","data-precloak-visibility")],il=Object.freeze({__proto__:null,init:),ul=wc({fields:rl,name:"sandboxing",active:ol,apis:el,state:il}),al=v("dismiss.popups"),cl=v("reposition.popups"),sl=v("mouse.released"),fl=ko([lr("isExtraPart",k),fr("fireEventInstead",[lr("event",xi())])]),ll=function(t){var n,e=Uo("Dismissal",fl,t);return(n={})[al()]={schema:ko([Ko("target")]),onReceive:,n},dl=ko([fr("fireEventInstead",[lr("event",wi())]),tr("doReposition")]),ml=function(t){var n,e=Uo("Reposition",dl,t);return(n={})[cl()]={onReceive:,n},gl=function(t,n,e){n.store.manager.onLoad(t,n,e)},pl=hl=Object.freeze({__proto__:null,onLoad:gl,onUnload:pl,setValue:getValue:getState:),vl=Object.freeze({__proto__:null,events:),bl=function(){var t=xr(null);return xu({set:t.set,get:t.get,isNotSet:clear:readState:)},yl=function(){var t=xr({}),n=xr({});return xu({readState:lookup:update:function(e){var o=t.get(),r=n.get(),i={},u={};W(e,(function(t){i[t.value]=t,vt(t,"meta").each(()})),t.set(_(_({},o),i)),n.set(_(_({},r),u))},clear:)},xl=Object.freeze({__proto__:null,memory:bl,dataset:yl,manual:init:),wl=function(t,n,e,o){var r=n.store;e.update([o]),r.setValue(t,o),n.onSetValue(t,o)},Sl=[rr("initialValue"),Ko("getFallbackEntry"),Ko("getDataKey"),Ko("setValue"),Ba("manager",{setValue:wl,getValue:onLoad:onUnload:function(t,n,e){e.clear()},state:yl})],kl=[Ko("getValue"),lr("setValue",p),rr("initialValue"),Ba("manager",{setValue:getValue:onLoad:onUnload:p,state:yu.init})],Cl=[rr("initialValue"),Ba("manager",{setValue:getValue:function(t,n,e){return e.get()},onLoad:onUnload:state:bl})],Ol=[dr("store",{mode:"memory"},Go("mode",{memory:Cl,manual:kl,dataset:Sl})),_a("onSetValue"),lr("resetOnDom",!1)],_l=wc({fields:Ol,name:"representing",active:vl,apis:hl,extra:{setValueFrom:,state:xl}),Tl=function(t,n){return yr(t,{},L(n,(function(n){return e=n.name(),o="Cannot configure "+n.name()+" for "+t,Xo(e,e,{tag:"option",process:{}},ho(());var e,o})).concat([qo("dump",b)]))},El=function(t){return t.dump},Dl=function(t,n){return _(_({},yc(n)),t.dump)},Bl=Tl,Ml=Dl,Al="placeholder",Fl=wr([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Il=Rl=function(t,n,e,o){return Il(e)&&e.uiType===Al?function(t,n,e,o){return t.exists(()?Fl.single(!0,v(e)):vt(o,e.name).fold((,()}(t,0,e,o):Fl.single(!1,v(e))},Vl=function(t,n,e,o){return Rl(t,0,e,o).fold((function(r,i){var u=Il(e)?i(n,e.config,e.validated):i(n),a=vt(u,"components").getOr([]),c=J(a,(function(e){return Vl(t,n,e,o)}));return[_(_({},u),{components:c})]}),()},Pl=function(t,n,e,o){var r=lt(o,(function(t,n){return function(t,n){var e=!1;return{name:v(t),required:used:function(){return e},replace:}(n,t)})),i=t,n,e,r);return ft(r,(),i},Hl=Fl.single,zl=Fl.multiple,Nl=v(Al),Ll=wr([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Wl=lr("factory",{sketch:b}),Ul=lr("schema",[]),jl=Ko("name"),Gl=Xo("pname","pname",co((),Do()),Xl=qo("schema",(),ql=lr("defaults",v({})),Yl=lr("overrides",v({})),Kl=Co([Wl,Ul,jl,Gl,ql,Yl]),Jl=Co([Wl,Ul,jl,ql,Yl]),$l=Co([Wl,Ul,jl,Gl,ql,Yl]),Ql=Co([Wl,Xl,jl,Ko("unit"),Gl,ql,Yl]),Zl=function(t){return t.fold(A.some,A.none,A.some,A.some)},td=function(t){var n=function(t){return t.name};return t.fold(n,n,n,n)},nd=ed=nd(Ll.required,Kl),od=nd(Ll.external,Jl),rd=nd(Ll.optional,$l),id=nd(Ll.group,Ql),ud=v("entirety"),ad=Object.freeze({__proto__:null,required:ed,external:od,optional:rd,group:id,asNamedPart:Zl,name:td,asCommon:original:ud}),cd=function(t,n,e,o){return uo(n.defaults(t,e,o),e,{uid:t.partUids[n.name]},n.overrides(t,e,o))},sd=function(t,n){var e={};return W(n,(),e},fd=ld=function(t,n,e){return{uiType:Nl(),owner:t,name:n,config:e,validated:{}}},dd=function(t){return J(t,()},md=function(t){return L(t,td)},gd=function(t,n,e){return function(t,n,e){var o={},r={};return W(e,(function(t){t.fold((function(t){o[t.pname]=Hl(!0,(function(n,e,o){return t.factory.sketch(cd(n,t,e,o))}))}),(,(,(function(t){o[t.pname]=zl(!0,(function(n,e,o){var r=n[t.name];return L(r,()}))}))})),{internals:v(o),externals:v(r)}}(0,n,e)},pd=function(t,n,e){return Pl(A.some(t),n,n.components,e)},hd=function(t,n,e){var o=n.partUids[e];return t.getSystem().getByUid(o).toOptional()},vd=bd=function(t,n,e){var o={},r=n.partUids,i=t.getSystem();return W(e,(),o},yd=function(t,n){var e=t.getSystem();return lt(n.partUids,()},xd=function(t){return ct(t.partUids)},wd=function(t,n,e){var o={},r=n.partUids,i=t.getSystem();return W(e,(),o},Sd=function(t,n){var e=md(n);return Or(L(e,())},kd=Cd=Object.freeze({__proto__:null,generate:sd,generateOne:ld,schemas:dd,names:md,substitutes:gd,components:pd,defaultUids:Sd,defaultUidsSchema:kd,getAllParts:yd,getAllPartNames:xd,getPart:hd,getPartOrDie:vd,getParts:bd,getPartsOrDie:wd}),Od=function(t,n,e,o,r){var i=function(t,n){return(t.length>0?[nr("parts",t)]:[]).concat([Ko("uid"),lr("dom",{}),lr("components",[]),Ma("originalSpec"),lr("debug.sketcher",{})]).concat(n)}(o,r);return Uo(t+" [SpecSchema]",ko(i.concat(n)),e)},_d=function(t,n,e,o,r){var i=Td(r),u=dd(e),a=kd(e),c=Od(t,n,i,u,[a]),s=gd(0,c,e);return o(c,pd(t,c,s.internals()),i,s.externals())},Td=function(t){return function(t){return bt(t,"uid")}(t)?t:_(_({},t),{uid:fu("uid")})},Ed=ko([Ko("name"),Ko("factory"),Ko("configFields"),lr("apis",{}),lr("extraApis",{})]),Dd=ko([Ko("name"),Ko("factory"),Ko("configFields"),Ko("partFields"),lr("apis",{}),lr("extraApis",{})]),Bd=function(t){var n=Uo("Sketcher for "+t.name,Ed,t),e=lt(n.apis,bu),o=lt(n.extraApis,(function(t,n){return pu(t,n)}));return _(_({name:n.name,configFields:n.configFields,sketch:function(t){return function(t,n,e,o){var r=Td(o);return e(Od(t,n,r,[],[]),r)}(n.name,n.configFields,n.factory,t)}},e),o)},Md=function(t){var n=Uo("Sketcher for "+t.name,Dd,t),e=sd(n.name,n.partFields),o=lt(n.apis,bu),r=lt(n.extraApis,(function(t,n){return pu(t,n)}));return _(_({name:n.name,partFields:n.partFields,configFields:n.configFields,sketch:parts:e},o),r)},Ad=Fd=Object.freeze({__proto__:null,getCurrent:),Id=[Ko("find")],Rd=wc({fields:Id,name:"composing",apis:Fd}),Vd=["input","button","textarea","select"],Pd=function(t,n,e){(n.disabled()?Ud:jd)(t,n)},Hd=function(t,n){return!0===n.useNative&&P(Vd,It(t.element))},zd=function(t){Un(t.element,"disabled","disabled")},Nd=function(t){Yn(t.element,"disabled")},Ld=function(t){Un(t.element,"aria-disabled","true")},Wd=Ud=function(t,n,e){n.disableClass.each((function(n){Vu(t.element,n)})),(Hd(t,n)?zd:Ld)(t),n.onDisabled(t)},jd=function(t,n,e){n.disableClass.each((function(n){Hu(t.element,n)})),(Hd(t,n)?Nd:Wd)(t),n.onEnabled(t)},Gd=function(t,n){return Hd(t,n)?t):function(t){return"true"===Gn(t.element,"aria-disabled")}(t)},Xd=Object.freeze({__proto__:null,enable:jd,disable:Ud,isDisabled:Gd,onLoad:Pd,set:),qd=Object.freeze({__proto__:null,exhibit:events:),Yd=[vr("disabled",k),lr("useNative",!0),rr("disableClass"),_a("onDisabled"),_a("onEnabled")],Kd=wc({fields:Yd,name:"disabling",active:qd,apis:Xd}),Jd=function(t,n,e,o){var r=of(t.element,"."+n.highlightClass);W(r,()},$d=function(t,n,e,o){Jd(t,n,0,[o]),Qd(t,n,e,o)||(Vu(o.element,n.highlightClass),n.onHighlight(t,o),Ei(o,_i()))},Qd=Zd=function(t,n,e,o){var r=of(t.element,"."+n.itemClass);return A.from(r[o]).fold((,t.getSystem().getByDom)},tm=function(t,n,e){return ca(t.element,"."+n.itemClass).bind((function(n){return t.getSystem().getByDom(n).toOptional()}))},nm=function(t,n,e){var o=of(t.element,"."+n.itemClass);return(o.length>0?A.some(o[o.length-1]):A.none()).bind((function(n){return t.getSystem().getByDom(n).toOptional()}))},em=function(t,n,e,o){var r=of(t.element,"."+n.itemClass),i=Y(r,(function(t){return zu(t,n.highlightClass)}));return i.bind(()},om=function(t,n,e){var o=of(t.element,"."+n.itemClass);return wt(L(o,(function(n){return t.getSystem().getByDom(n).toOptional()})))},rm=Object.freeze({__proto__:null,dehighlightAll:dehighlight:function(t,n,e,o){Qd(t,n,e,o)&&(Hu(o.element,n.highlightClass),n.onDehighlight(t,o),Ei(o,Ti()))},highlight:$d,highlightFirst:function(t,n,e){tm(t,n).each((function(o){$d(t,n,e,o)}))},highlightLast:function(t,n,e){nm(t,n).each((function(o){$d(t,n,e,o)}))},highlightAt:function(t,n,e,o){Zd(t,n,e,o).fold((,(function(o){$d(t,n,e,o)}))},highlightBy:function(t,n,e,o){var r=om(t,n);q(r,o).each((function(o){$d(t,n,e,o)}))},isHighlighted:Qd,getHighlighted:getFirst:tm,getLast:nm,getPrevious:getNext:getCandidates:om}),im=[Ko("highlightClass"),Ko("itemClass"),_a("onHighlight"),_a("onDehighlight")],um=wc({fields:im,name:"highlighting",apis:rm}),am=[8],cm=[9],sm=[13],fm=[27],lm=[32],dm=[37],mm=[38],gm=[39],pm=[40],hm=vm=bm=ym=xm=function(t){return ,wm=Sm=function(t){return!0===t.raw.shiftKey},km=Cm=w(Sm),Om=function(t,n){return{matches:t,classification:n}},_m=function(t,n,e){n.exists(()||Di(t,Si(),{prevFocus:n,newFocus:e})},Tm=function(){var t=function(t){return Mc(t.element)};return{get:t,set:function(n,e){var o=t(n);n.getSystem().triggerFocus(e,n.element);var r=t(n);_m(n,o,r)}}},Em=function(){var t=function(t){return um.getHighlighted(t).map((function(t){return t.element}))};return{get:t,set:};!function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"}($s||($s={}));var Dm,Bm=function(t,n,e,o,r){var i=function(t,n,e,o,r){return function(t,n){var e=q(t,(function(t){return t.matches(n)}));return e.map((function(t){return t.classification}))}(e(t,n,o,r),n.event).bind((function(e){return e(t,n,o,r)}))},u={schema:processKey:i,toEvents:function(t,n){var u=t.focusInside!==$s.OnFocusMode?A.none():r(t).map((),a=[Pi(Xr(),(function(o,u){i(o,u,e,t,n).fold((function(){!function(e,o){var i=xm(lm.concat(sm))(o.event);t.focusInside===$s.OnEnterOrSpaceMode&&i&&Br(e,o)&&r(t).each(()}(o,u)}),(function(t){u.stop()}))})),Pi(qr(),()];return Ii(u.toArray().concat(a))}};return u},Mm=function(t){var n=[rr("onEscape"),rr("onEnter"),lr("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),lr("firstTabstop",0),lr("useTabstopAt",C),rr("visibilitySelector")].concat([t]),e=function(t,n){var e=t.visibilitySelector.bind((function(t){return sa(n,t)})).getOr(n);return se(e)>0},o=function(t,n,o){(function(t,n){var o=of(t.element,n.selector),r=j(o,(function(t){return e(n,t)}));return A.from(r[n.firstTabstop])})(t,n).each((function(e){n.focusManager.set(t,e)}))},r=function(t,n,o,r,i){return i(n,o,(function(t){return function(t,n){return e(t,n)&&t.useTabstopAt(n)}(r,t)})).fold((,()},i=function(t,n,e,o){var i=of(t.element,e.selector);return function(t,n){return n.focusManager.get(t).bind((function(t){return sa(t,n.selector)}))}(t,e).bind((function(n){return Y(i,x(bn,n)).bind((function(n){return r(t,i,n,e,o)}))}))},u=v([Om(wm([Sm,xm(cm)]),(function(t,n,e){var o=e.cyclic?hm:vm;return i(t,0,e,o)})),Om(xm(cm),(function(t,n,e){var o=e.cyclic?bm:ym;return i(t,0,e,o)})),Om(xm(fm),(function(t,n,e){return e.onEscape.bind((function(e){return e(t,n)}))})),Om(wm([Cm,xm(sm)]),()]),a=v([]);return Bm(n,yu.init,u,a,(function(){return A.some(o)}))},Am=Mm(qo("cyclic",k)),Fm=Mm(qo("cyclic",C)),Im=function(t,n,e){return Ad(e)&&xm(lm)(n.event)?A.none():function(t,n,e){return Mi(t,e,ai()),A.some(!0)}(t,0,e)},Rm=Vm=[lr("execute",Im),lr("useSpace",!1),lr("useEnter",!0),lr("useControlEnter",!1),lr("useDown",!1)],Pm=Hm=Bm(Vm,yu.init,(function(t,n,e,o){var r=e.useSpace&&!Ad(t.element)?lm:[],i=e.useEnter?sm:[],u=e.useDown?pm:[],a=r.concat(i).concat(u);return[Om(xm(a),Pm)].concat(e.useControlEnter?[Om(wm([km,xm(sm)]),Pm)]:[])}),(,(function(){return A.none()})),zm=function(){var t=Qc();return xu({readState:setGridSize:getNumRows:function(){return t.get().map((function(t){return t.numRows}))},getNumColumns:)},Nm=Object.freeze({__proto__:null,flatgrid:zm,init:function(t){return t.state(t)}}),Lm=function(t){return ,Wm=function(t,n){var e=xs(t,n);return Lm(e)},Um=jm=Gm=Xm=jm,qm=jm,Ym=jm,Km=function(t){return!t.dom)},Jm=function(t,n,e){var o=of(t,e);return function(t,n){return Y(t,n).map((function(n){return{index:n,candidates:t}}))}(j(o,Km),(function(t){return bn(t,n)}))},$m=function(t,n){return Y(t,(function(t){return bn(n,t)}))},Qm=function(t,n,e,o){return o(Math.floor(n/e),n%e).bind((function(n){var o=n.row*e+n.column;return o>=0&&o<t.length?A.some(t[o]):A.none()}))},Zm=function(t,n,e,o,r){return Qm(t,n,o,()},tg=function(t,n,e,o,r){return Qm(t,n,o,()},ng=[Ko("selector"),lr("execute",Im),Ta("onEscape"),lr("captureTab",!1),Aa()],eg=function(t,n,e){ca(t.element,n.selector).each((function(e){n.focusManager.set(t,e)}))},og=function(t){return ,rg=function(t,n,e){return e.captureTab?A.some(!0):A.none()},ig=og((function(t,n,e,o){return Zm(t,n,e,o,-1)})),ug=og((function(t,n,e,o){return Zm(t,n,e,o,1)})),ag=og((),cg=og((),sg=v([Om(xm(dm),Wm(ig,ug)),Om(xm(gm),Um(ig,ug)),Om(xm(mm),Xm(ag)),Om(xm(pm),qm(cg)),Om(wm([Sm,xm(cm)]),rg),Om(wm([Cm,xm(cm)]),rg),Om(xm(fm),(function(t,n,e){return e.onEscape(t,n)})),Om(xm(lm.concat(sm)),(function(t,n,e,o){return function(t,n){return n.focusManager.get(t).bind((function(t){return sa(t,n.selector)}))}(t,e).bind((function(o){return e.execute(t,n,o)}))}))]),fg=v([Om(xm(lm),Rm)]),lg=Bm(ng,zm,sg,fg,(function(){return A.some(eg)})),dg=function(t,n,e,o){var r=function(t,n,e){var i,u=Ua(n,o,0,e.length-1);return u===t?A.none():(i=e[u],"button"===It(i)&&"disabled"===Gn(i,"disabled")?r(t,u,e):A.from(e[u]))};return Jm(t,e,n).bind(()},mg=[Ko("selector"),lr("getInitial",A.none),lr("execute",Im),Ta("onEscape"),lr("executeOnMove",!1),lr("allowVertical",!0)],gg=function(t,n,e){return function(t,n){return n.focusManager.get(t).bind((function(t){return sa(t,n.selector)}))}(t,e).bind((function(o){return e.execute(t,n,o)}))},pg=function(t,n,e){n.getInitial(t).orThunk(().each((function(e){n.focusManager.set(t,e)}))},hg=function(t,n,e){return dg(t,e.selector,n,-1)},vg=function(t,n,e){return dg(t,e.selector,n,1)},bg=function(t){return ,yg=function(t,n,e){return e.onEscape(t,n)},xg=v([Om(xm(lm),Rm)]),wg=Bm(mg,yu.init,(,xg,(function(){return A.some(pg)})),Sg=function(t,n,e){return A.from(t[n]).bind(()},kg=function(t,n,e,o){var r=t[n].length,i=Ua(e,o,0,r-1);return Sg(t,n,i)},Cg=Og=function(t,n,e,o){var r=t[n].length,i=ja(e+o,0,r-1);return Sg(t,n,i)},_g=Tg=[nr("selectors",[Ko("row"),Ko("cell")]),lr("cycles",!0),lr("previousSelector",A.none),lr("execute",Im)],Eg=function(t,n,e){n.previousSelector(t).orThunk(().each((function(e){n.focusManager.set(t,e)}))},Dg=function(t,n){return function(e,o,r){var i=r.cycles?t:n;return sa(o,r.selectors.row).bind((function(t){var n=of(t,r.selectors.cell);return $m(n,o).bind((function(n){var o=of(e,r.selectors.row);return $m(o,t).bind((function(t){var e=function(t,n){return L(t,()}(o,r);return i(e,t,n).map((function(t){return t.cell}))}))}))}))}},Bg=Dg((function(t,n,e){return kg(t,n,e,-1)}),(function(t,n,e){return Og(t,n,e,-1)})),Mg=Dg((function(t,n,e){return kg(t,n,e,1)}),(function(t,n,e){return Og(t,n,e,1)})),Ag=Dg((function(t,n,e){return Cg(t,e,n,-1)}),(),Fg=Dg((function(t,n,e){return Cg(t,e,n,1)}),(),Ig=v([Om(xm(dm),Wm(Bg,Mg)),Om(xm(gm),Um(Bg,Mg)),Om(xm(mm),Xm(Ag)),Om(xm(pm),qm(Fg)),Om(xm(lm.concat(sm)),()]),Rg=v([Om(xm(lm),Rm)]),Vg=Bm(Tg,yu.init,Ig,Rg,(function(){return A.some(Eg)})),Pg=[Ko("selector"),lr("execute",Im),lr("moveOnTab",!1)],Hg=function(t,n,e){return e.focusManager.get(t).bind((function(o){return e.execute(t,n,o)}))},zg=function(t,n,e){ca(t.element,n.selector).each((function(e){n.focusManager.set(t,e)}))},Ng=function(t,n,e){return dg(t,e.selector,n,-1)},Lg=function(t,n,e){return dg(t,e.selector,n,1)},Wg=v([Om(xm(mm),Ym(Ng)),Om(xm(pm),Ym(Lg)),Om(wm([Sm,xm(cm)]),(function(t,n,e,o){return e.moveOnTab?Ym(Ng)(t,n,e,o):A.none()})),Om(wm([Cm,xm(cm)]),(),Om(xm(sm),Hg),Om(xm(lm),Hg)]),Ug=v([Om(xm(lm),Rm)]),jg=Bm(Pg,yu.init,Wg,Ug,(function(){return A.some(zg)})),Gg=[Ta("onSpace"),Ta("onEnter"),Ta("onShiftEnter"),Ta("onLeft"),Ta("onRight"),Ta("onTab"),Ta("onShiftTab"),Ta("onUp"),Ta("onDown"),Ta("onEscape"),lr("stopSpaceKeyup",!1),rr("focusIn")],Xg=Bm(Gg,yu.init,(,(,(function(t){return t.focusIn})),qg=Am.schema(),Yg=Fm.schema(),Kg=wg.schema(),Jg=lg.schema(),$g=Vg.schema(),Qg=Hm.schema(),Zg=jg.schema(),tp=Xg.schema(),np=kc({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:qg,cyclic:Yg,flow:Kg,flatgrid:Jg,matrix:$g,execution:Qg,menu:Zg,special:tp}),name:"keying",active:{events:function(t,n){return t.handler.toEvents(t,n)}},apis:{focusIn:setGridSize:function(t,n,e,o,r){!function(t){return yt(t,"setGridSize")}(e)?console.error("Layout does not support setGridSize"):e.setGridSize(o,r)}},state:Nm}),ep=op=function(t,n,e,o){var r=rp(t),i=q(r,(function(t){return bn(o.element,t.element)}));i.each(Gf)},rp=function(t,n){return t.components()},ip=function(t,n,e,o,r){var i=rp(t);return A.from(i[o]).map((function(n){return op(t,0,0,n),r.each((function(n){ep(t,0,(function(t,n){!t,n,o)}),n)})),n}))},up=Object.freeze({__proto__:null,append:function(t,n,e,o){ep(t,0,Oe,o)},prepend:remove:op,replaceAt:ip,replaceBy:function(t,n,e,o,r){var i=rp(t);return Y(i,o).bind(()},set:contents:rp}),ap=wc({fields:[],name:"replacing",apis:up}),cp=function(t,n){var e=function(t,n){var e=Ii(n);return wc({fields:[Ko("enabled")],name:t,active:{events:v(e)}})}(t,n);return{key:t,value:{config:{},me:e,configAsRaw:v({}),initialConfig:{},state:yu}}},sp=function(t,n){n.ignore||(Ec(t.element),n.onFocus(t))},fp=Object.freeze({__proto__:null,focus:sp,blur:function(t,n){n.ignore||t.element)},isFocused:function(t){return Dc(t.element)}}),lp=Object.freeze({__proto__:null,exhibit:function(t,n){var e=n.ignore?{}:{attributes:{tabindex:"-1"}};return Su(e)},events:),dp=[_a("onFocus"),lr("stopMousedown",!1),lr("ignore",!1)],mp=wc({fields:dp,name:"focusing",active:lp,apis:fp}),gp=function(t,n,e){var o=n.aria;o.update(t,o,e.get())},pp=function(t,n,e){n.toggleClass.each((function(n){e.get()?Vu(t.element,n):Hu(t.element,n)}))},hp=function(t,n,e){yp(t,n,e,!e.get())},vp=function(t,n,e){e.set(!0),pp(t,n,e),gp(t,n,e)},bp=function(t,n,e){e.set(!1),pp(t,n,e),gp(t,n,e)},yp=function(t,n,e,o){(o?vp:bp)(t,n,e)},xp=function(t,n,e){yp(t,n,e,n.selected)},wp=Object.freeze({__proto__:null,onLoad:xp,toggle:hp,isOn:function(t,n,e){return e.get()},on:vp,off:bp,set:yp}),Sp=Object.freeze({__proto__:null,exhibit:function(){return Su({})},events:),kp=function(t,n,e){Un(t.element,"aria-expanded",e)},Cp=[lr("selected",!1),rr("toggleClass"),lr("toggleOnExecute",!0),dr("aria",{mode:"none"},Go("mode",{pressed:[lr("syncWithExpanded",!1),Ba("update",(function(t,n,e){Un(t.element,"aria-pressed",e),n.syncWithExpanded&&kp(t,n,e)}))],checked:[Ba("update",(function(t,n,e){Un(t.element,"aria-checked",e)}))],expanded:[Ba("update",kp)],selected:[Ba("update",()],none:[Ba("update",p)]}))],Op=wc({fields:Cp,name:"toggling",active:Sp,apis:wp,state:(Dm=!1,{init:function(){var t=xr(Dm);return{get:function(){return t.get()},set:function(n){return t.set(n)},clear:function(){return t.set(Dm)},readState:function(){return t.get()}}}})}),_p=function(){var t=function(t,n){n.stop(),Bi(t)};return[Pi(Jr(),t),Pi(si(),t),Wi(Rr()),Wi(zr())]},Tp=function(t){return Ii(K([t.map(().toArray(),_p()]))},Ep="alloy.item-hover",Dp="alloy.item-focus",Bp=function(t){(Mc(t.element).isNone()||mp.isFocused(t))&&(mp.isFocused(t)||mp.focus(t),Di(t,Ep,{item:t}))},Mp=function(t){Di(t,Dp,{item:t})},Ap=v(Ep),Fp=v(Dp),Ip=[Ko("data"),Ko("components"),Ko("dom"),lr("hasSubmenu",!1),rr("toggling"),Bl("itemBehaviours",[Op,mp,np,_l]),lr("ignoreFocus",!1),lr("domModification",{}),Ba("builder",(),lr("eventOrder",{})],Rp=[Ko("dom"),Ko("components"),Ba("builder",(function(t){return{dom:t.dom,components:t.components,events:Ii([Ui(ci())])}}))],Vp=v("item-widget"),Pp=v([ed({name:"widget",overrides:)]),Hp=[Ko("uid"),Ko("data"),Ko("components"),Ko("dom"),lr("autofocus",!1),lr("ignoreFocus",!1),Bl("widgetBehaviours",[_l,mp,np]),lr("domModification",{}),kd(Pp()),Ba("builder",(function(t){var n=gd(Vp(),t,Pp()),e=pd(Vp(),t,n.internals()),o=r=function(n,e){return Ad(e.event.target)?A.none():t.autofocus?(e.setSource(n.element),A.none()):A.none()};return{dom:t.dom,components:e,domModification:t.domModification,events:Ii([Yi((),Pi(Ur(),Bp),Pi(ci(),()]),behaviours:Ml(t.widgetBehaviours,[_l.config({store:{mode:"memory",initialValue:t.data}}),mp.config({ignore:t.ignoreFocus,onFocus:function(t){Mp(t)}}),np.config({mode:"special",focusIn:t.autofocus?function(t){o(t)}:Cc(),onLeft:r,onRight:r,onEscape:function(n,e){return mp.isFocused(n)||t.autofocus?t.autofocus?(e.setSource(n.element),A.none()):A.none():(mp.focus(n),A.some(!0))}})])}}))],zp=Go("type",{widget:Hp,item:Ip,separator:Rp}),Np=v([id({factory:{sketch:,name:"items",unit:"item",defaults:overrides:)]),Lp=v([Ko("value"),Ko("items"),Ko("dom"),Ko("components"),lr("eventOrder",{}),Tl("menuBehaviours",[um,_l,Rd,np]),dr("movement",{mode:"menu",moveOnTab:!0},Go("mode",{grid:[Aa(),Ba("config",()],matrix:[Ba("config",(),Ko("rowSelector")],menu:[lr("moveOnTab",!0),Ba("config",()]})),Jo("markers",wa()),lr("fakeFocus",!1),lr("focusManager",Tm()),_a("onHighlight")]),Wp=v("alloy.menu-focus"),Up=Md({name:"Menu",configFields:Lp(),partFields:Np(),factory:),jp=Gp=Xp=function(t){return"prepared"===t.type?A.some(t.menu):A.none()},qp={init:function(){var t=xr({}),n=xr({}),e=xr({}),o=Qc(),r=xr({}),i=function(n,e,o){return u(n).bind((function(r){return function(n){return pt(t.get(),()}(n).bind(()}))},u=a=function(t){return vt(n.get(),t)},c=function(n){return vt(t.get(),n)};return{setMenuBuilt:setContents:function(i,u,a,c){o.set(i),t.set(a),n.set(u),r.set(c);var s=Gp(c,a);e.set(s)},expand:refresh:collapse:function(t){return vt(e.get(),t).bind((function(t){return t.length>1?A.some(t.slice(1)):A.none()}))},lookupMenu:a,lookupItem:c,otherMenus:getPrimary:function(){return o.get().bind(u)},getMenus:function(){return n.get()},clear:isClear:function(){return o.get().isNone()},getTriggeringPath:function(t,n){var r=j(c(t).toArray(),();return vt(e.get(),t).bind((function(t){var e=Q(r.concat(t));return J(e,(function(t,r){return i(t,n,e.slice(0,r+1)).fold((,()})))}))}}},extractPreparedMenu:Xp},Yp=v("collapse-item"),Kp=Bd({name:"TieredMenu",configFields:[Da("onExecute"),Da("onEscape"),Ea("onOpenMenu"),Ea("onOpenSubmenu"),_a("onRepositionMenu"),_a("onCollapseMenu"),lr("highlightImmediately",!0),nr("data",[Ko("primary"),Ko("menus"),Ko("expansions")]),lr("fakeFocus",!1),_a("onHighlight"),_a("onHover"),ka(),Ko("dom"),lr("navigateOnHover",!0),lr("stayInDom",!1),Tl("tmenuBehaviours",[np,um,Rd,ap]),lr("eventOrder",{})],apis:{collapseMenu:function(t,n){t.collapseMenu(n)},highlightPrimary:function(t,n){t.highlightPrimary(n)},repositionMenus:function(t,n){t.repositionMenus(n)}},factory:function(t,n){var e,o=Qc(),r=qp.init(),i=function(n){var e=function(n,e,o){return lt(o,(function(o,r){var i=function(){return Up.sketch(_(_({},o),{value:r,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:t.onHighlight,focusManager:t.fakeFocus?Em():Tm()}))};return r===e?{type:"prepared",menu:n.getSystem().build(i())}:{type:"notbuilt",nbMenu:i}}))}(n,t.data.primary,t.data.menus),o=a();return r.setContents(t.data.primary,e,t.data.expansions,o),r.getPrimary()},u=function(t){return _l.getValue(t).value},a=function(n){return lt(t.data.menus,()},c=function(t,n){um.highlight(t,n),um.getHighlighted(n).orThunk((function(){return um.getFirst(n)})).each((function(n){Mi(t,n.element,ci())}))},s=function(t,n){return wt(L(n,())},f=function(n,e,o){var r=s(e,e.otherMenus(o));W(r,()},l=function(n,e){var r=function(n){return o.get().getOrThunk((function(){var e={},r=of(n.element,"."+t.markers.item),i=j(r,();return W(i,(),o.set(e),e}))}(n);ft(r,()},d=function(n,e,o){return A.from(o[0]).bind(()};!function(t){t[t.HighlightSubmenu=0]="HighlightSubmenu",t[t.HighlightParent=1]="HighlightParent"}(e||(e={}));var m=function(n,o,i){if(void 0===i&&(i=e.HighlightSubmenu),o.hasConfigured(Kd)&&Kd.isDisabled(o))return A.some(o);var a=u(o);return r.expand(a).bind((function(u){return l(n,u),A.from(u[0]).bind((function(a){return r.lookupMenu(a).bind((function(c){var s=function(t,n,e){if("notbuilt"===e.type){var o=t.getSystem().build(e.nbMenu());return r.setMenuBuilt(n,o),o}return e.menu}(n,a,c);return zn(s.element)||ap.append(n,ta(s)),t.onOpenSubmenu(n,o,s,Q(u)),i===e.HighlightSubmenu?(um.highlightFirst(s),d(n,r,u)):(um.dehighlightAll(s),A.some(o))}))}))}))},g=function(n,e){var o=u(e);return r.collapse(o).bind(()},h=function(n){return ,v=Ii([Pi(Wp(),(),Yi((),Gi(()].concat(t.navigateOnHover?[Pi(Ap(),(function(n,o){var i=o.event.item;!function(t,n){var e=u(n);r.refresh(e).bind(()}(n,i),m(n,i,e.HighlightParent),t.onHover(n,i)}))]:[])),b=function(t){return um.getHighlighted(t).bind(um.getHighlighted)},y={collapseMenu:highlightPrimary:repositionMenus:function(n){var e=r.getPrimary().bind((function(t){return b(n).bind((function(t){var n=u(t),e=ht(r.getMenus()),o=wt(L(e,qp.extractPreparedMenu));return r.getTriggeringPath(n,(function(t){return function(t,n,e){return at(n,(function(t){if(!t.getSystem().isConnected())return A.none();var n=um.getCandidates(t);return q(n,()}))}(0,o,t)}))})).map((function(n){return{primary:t,triggeringPath:n}}))}));e.fold((function(){(function(t){return A.from(t.components()[0]).filter(()})(n).each(()}),(function(e){var o=e.primary,r=e.triggeringPath;t.onRepositionMenu(n,o,r)}))}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:Dl(t.tmenuBehaviours,[np.config({mode:"special",onRight:h((),onLeft:h((),onEscape:h((),focusIn:),um.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),Rd.config({find:function(t){return um.getHighlighted(t)}}),ap.config({})]),eventOrder:t.eventOrder,apis:y,events:v}},extraApis:{tieredData:function(t,n,e){return{primary:t,menus:n,expansions:e}},singleData:collapseItem:}),Jp=Bd({name:"InlineView",configFields:[Ko("lazySink"),_a("onShow"),_a("onHide"),cr("onEscape"),Tl("inlineBehaviours",[ul,_l,Oc]),fr("fireDismissalEventInstead",[lr("event",xi())]),fr("fireRepositionEventInstead",[lr("event",wi())]),lr("getRelated",A.none),lr("isExtraPart",k),lr("eventOrder",A.none)],factory:function(t,n){var e=function(t,n,e,r){o(t,n,e,()},o=r=function(n,e,o,r){var i=function(t,n,e,o,r){var i=function(){return t.lazySink(n)},u="horizontal"===o.type?{layouts:{onLtr:function(){return lc()},onRtl:function(){return dc()}}}:{},a=function(t){return function(t){return 2===t.length}(t)?u:{}};return Kp.sketch({dom:{tag:"div"},data:o.data,markers:o.menu.markers,highlightImmediately:o.menu.highlightImmediately,onEscape:onExecute:function(){return A.some(!0)},onOpenMenu:onOpenSubmenu:onRepositionMenu:)}(t,n,e,o,r);ul.open(n,i),_l.setValue(n,A.some({mode:"menu",menu:i}))},i=function(n){ul.isOpen(n)&&_l.getValue(n).each(()},u={setContent:function(t,n){ul.setContent(t,n)},showAt:showWithin:e,showWithinBounds:o,showMenuAt:showMenuWithinBounds:r,hide:getContent:function(t){return ul.getState(t)},reposition:i,isOpen:ul.isOpen};return{uid:t.uid,dom:t.dom,behaviours:Dl(t.inlineBehaviours,[ul.config({isPartOf:function(n,e,o){return da(e,o)||n,o)},getAttachPoint:onOpen:function(n){t.onShow(n)},onClose:function(n){t.onHide(n)}}),_l.config({store:{mode:"memory",initialValue:A.none()}}),Oc.config({channels:_(_({},ll(_({isExtraPart:n.isExtraPart},t.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),ml(_(_({},t.fireRepositionEventInstead.map(().getOr({})),{doReposition:i})))})]),eventOrder:t.eventOrder,apis:u}},apis:{showAt:function(t,n,e,o){t.showAt(n,e,o)},showWithin:function(t,n,e,o,r){t.showWithin(n,e,o,r)},showWithinBounds:function(t,n,e,o,r){t.showWithinBounds(n,e,o,r)},showMenuAt:showMenuWithinBounds:hide:function(t,n){t.hide(n)},isOpen:function(t,n){return t.isOpen(n)},getContent:function(t,n){return t.getContent(n)},setContent:function(t,n,e){t.setContent(n,e)},reposition:function(t,n){t.reposition(n)}}}),$p="layout-inset",Qp=function(t){return t.x},Zp=function(t,n){return t.x+t.width/2-n.width/2},th=function(t,n){return t.x+t.width-n.width},nh=function(t){return t.y},eh=function(t,n){return t.y+t.height-n.height},oh=function(t,n){return t.y+t.height/2-n.height/2},rh=function(t,n,e){return Fa(th(t,n),eh(t,n),e.insetSouthwest(),Ha(),"southwest",Ga(t,{right:0,bottom:3}),$p)},ih=function(t,n,e){return Fa(Qp(t),eh(t,n),e.insetSoutheast(),Pa(),"southeast",Ga(t,{left:1,bottom:3}),$p)},uh=function(t,n,e){return Fa(th(t,n),nh(t),e.insetNorthwest(),Va(),"northwest",Ga(t,{right:0,top:2}),$p)},ah=function(t,n,e){return Fa(Qp(t),nh(t),e.insetNortheast(),Ra(),"northeast",Ga(t,{left:1,top:2}),$p)},ch=function(t,n,e){return Fa(Zp(t,n),nh(t),e.insetNorth(),za(),"north",Ga(t,{top:2}),$p)},sh=function(t,n,e){return Fa(Zp(t,n),eh(t,n),e.insetSouth(),Na(),"south",Ga(t,{bottom:3}),$p)},fh=function(t,n,e){return Fa(th(t,n),oh(t,n),e.insetEast(),Wa(),"east",Ga(t,{right:0}),$p)},lh=function(t,n,e){return Fa(Qp(t),oh(t,n),e.insetWest(),La(),"west",Ga(t,{left:1}),$p)},dh=function(t){switch(t){case"north":return ch;case"northeast":return ah;case"northwest":return uh;case"south":return sh;case"southeast":return ih;case"southwest":return rh;case"east":return fh;case"west":return lh}},mh=function(t,n,e,o,r){return Xc(o).map(dh).getOr(ch)(t,n,e,o,r)},gh=ph=function(t,n,e,o,r){return Xc(o).map(gh).getOr(ch)(t,n,e,o,r)},hh=tinymce.util.Tools.resolve("tinymce.util.Delay"),vh=Bd({name:"Button",factory:function(t){var n=Tp(t.action),e=t.dom.tag,o=function(n){return vt(t.dom,"attributes").bind((function(t){return vt(t,n)}))};return{uid:t.uid,dom:t.dom,components:t.components,events:n,behaviours:Ml(t.buttonBehaviours,[mp.config({}),np.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"===e){var t=o("type").getOr("button"),n=o("role").map((function(t){return{role:t}})).getOr({});return _({type:t},n)}return{role:o("role").getOr("button")}}()},eventOrder:t.eventOrder}},configFields:[lr("uid",void 0),Ko("dom"),lr("components",[]),Bl("buttonBehaviours",[mp,np]),rr("action"),rr("role"),lr("eventOrder",{})]}),bh=function(t){var n=t)&&yt(t,"uid")?t.uid:fu("memento");return{get:function(t){return t.getSystem().getByUid(n).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(n).toOptional()},asSpec:},yh=tinymce.util.Tools.resolve("tinymce.util.I18n"),xh={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},wh="temporary-placeholder",Sh=function(t){return ,kh=function(t,n){var e=t.toLowerCase();if(yh.isRtl()){var o=function(t,n){return Tt(t,n)?t:t,n)}(e,"-rtl");return bt(n,o)?o:e}return e},Ch=Oh=function(t,n){var e=n();return Ch(t,e).getOrThunk(Sh(e))},_h=function(){return cp("add-focusable",[Gi((function(t){aa(t.element,"svg").each((function(t){return Un(t,"focusable","false")}))}))])},Th=function(t,n,e,o){var r,i,u=function(t){return!!yh.isRtl()&&bt(xh,t)}(n)?["tox-icon--flip"]:[],a=vt(e,kh(n,e)).or(o).getOrThunk(Sh(e));return{dom:{tag:t.tag,attributes:null!==(r=t.attributes)&&void 0!==r?r:{},classes:t.classes.concat(u),innerHtml:a},behaviours:yc(E(E([],null!==(i=t.behaviours)&&void 0!==i?i:[],!0),[_h()],!1))}},Eh=function(t,n,e,o){return void 0===o&&(o=A.none()),Th(n,t,e(),o)},Dh={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},Bh=Bd({name:"Notification",factory:function(t){var n=bh({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:yc([ap.config({})])}),e=function(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}},o=function(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}},r=bh({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[e(0)]},o(0)],behaviours:yc([ap.config({})])}),i={updateProgress:updateText:function(t,e){if(t.getSystem().isConnected()){var o=n.get(t);ap.set(o,[Ju(e)])}}},u=K([t.icon.toArray(),t.level.toArray(),t.level.bind((function(t){return A.from(Dh[t])})).toArray()]),a=bh(vh.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Eh("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:function(n){t.onAction(n)}})),c=function(t,n,e){var o=e(),r=q(t,();return Th(n,r.getOr(wh),o,A.none())}(u,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),s=[c,{dom:{tag:"div",classes:["tox-notification__body"]},components:[n.asSpec()],behaviours:yc([ap.config({})])}];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(().getOr(["tox-notification","tox-notification--in"])},behaviours:yc([mp.config({}),cp("notification-events",[Pi(jr(),(function(t){a.getOpt(t).each(mp.focus)}))])]),components:s.concat(t.progress?[r.asSpec()]:[]).concat(t.closeButton?[a.asSpec()]:[]),apis:i}},configFields:[rr("level"),Ko("progress"),Ko("icon"),Ko("onAction"),Ko("text"),Ko("iconProvider"),Ko("translationProvider"),hr("closeButton",!0)],apis:{updateProgress:function(t,n,e){t.updateProgress(n,e)},updateText:function(t,n,e){t.updateText(n,e)}}});function Mh(t,n,e){var o=n.backstage.shared;return{open:function(n,r){var i=!n.closeButton&&n.timeout&&(n.timeout>0||n.timeout<0),u=a=Zu(Bh.sketch({text:n.text,level:P(["success","error","warning","warn","info"],n.type)?n.type:void 0,progress:!0===n.progressBar,icon:A.from(n.icon),closeButton:!i,onAction:u,iconProvider:o.providers.icons,translationProvider:o.providers.translate})),c=Zu(Jp.sketch(_({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:o.getSink,fireDismissalEventInstead:{}},o.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));e.add(c),n.timeout>0&&hh.setTimeout((function(){u()}),n.timeout);var s=function(){var n=He(At.fromDom(t.getContentAreaContainer())),e=Ne(),o=ja(e.x,n.x,n.right),r=ja(e.y,n.y,n.bottom),i=Math.max(n.right,e.right),u=Math.max(n.bottom,e.bottom);return A.some(Pe(o,r,i-o,u-r))};return{close:u,moveTo:moveRel:function(t,n){var e=ta(a),r={maxHeightFunction:ms()};if("banner"!==n&&l(t)){var i=n),u={type:"node",root:Nn(),node:A.some(At.fromDom(t)),overrides:r,layouts:{onRtl:function(){return[i]},onLtr:function(){return[i]}}};Jp.showWithinBounds(c,e,{anchor:u},s)}else{var f=_(_({},o.anchors.banner()),{overrides:r});Jp.showWithinBounds(c,e,{anchor:f},s)}},text:function(t){Bh.updateText(a,t)},settings:n,getEl:progressBar:{value:function(t){Bh.updateProgress(a,t)}}}},close:function(t){t.close()},reposition:function(t){t.length>0&&W(t,()},getArgs:function(t){return t.settings}}}var Ah,Fh=Ih=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),Rh=function(t,n,e,o,r){var i=Ih(t,(function(n){return function(t,n){return t.isBlock(n)||P(["BR","IMG","HR","INPUT"],n.nodeName)||"false"===t.getContentEditable(n)}(t,n)}));return A.from(i.backwards(n,e,o,r))},Vh=function(t,n){return Ph(At.fromDom(t.selection.getNode())).getOrThunk((function(){var e=At.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());return Oe(e,At.fromDom(n.extractContents())),n.insertNode(e.dom),On(e).each((function(t){return t.dom.normalize()})),function(t){return ef(t,nf)}(e).map((function(n){t.selection.setCursorLocation(n.dom,n))})),e}))},Ph=function(t){return sa(t,"[data-mce-autocompleter]")},Hh=zh=Nh=function(t,n){return t.substring(n.length)},Lh=function(t,n,e,o){if(void 0===o&&(o=0),!(r=n).collapsed||3!==r.startContainer.nodeType)return A.none();var r,i=t.getParent(n.startContainer,t.isBlock)||t.getRoot();return Rh(t,n.startContainer,n.startOffset,(function(t,n,o){return function(t,n,e){var o;for(o=n-1;o>=0;o--){var r=t.charAt(o);if(zh(r))return A.none();if(r===e)break}return A.some(o)}(o,n,e).getOr(n)}),i).bind(()},Wh=function(t,n,e,o){return void 0===o&&(o=0),Ph(At.fromDom(n.startContainer)).fold((function(){return Lh(t,n,e,o)}),()},Uh=function(t,n){n.on("keypress compositionend",t.onKeypress.throttle),n.on("remove",t.onKeypress.cancel);var e=function(t,n){Di(t,Xr(),{raw:n})};n.on("keydown",(function(n){var o=function(){return t.getView().bind(um.getHighlighted)};8===n.which&&t.onKeypress.throttle(n),t.isActive()&&(27===n.which&&t.cancelIfNecessary(),t.isMenuOpen()?13===n.which?(o().each(Bi),n.preventDefault()):40===n.which?(o().fold((,(function(t){e(t,n)})),n.preventDefault(),n.stopImmediatePropagation()):37!==n.which&&38!==n.which&&39!==n.which||o().each(():13!==n.which&&38!==n.which&&40!==n.which||t.cancelIfNecessary())})),n.on("NodeChange",()},jh=tinymce.util.Tools.resolve("tinymce.util.Promise"),Gh=function(t,n){return{container:t,offset:n}},Xh=function(t){if(function(t){return 3===t.nodeType}(t))return Gh(t,t.data.length);var n=t.childNodes;return n.length>0?Xh(n[n.length-1]):Gh(t,n.length)},qh=function(t,n){var e=t.childNodes;return e.length>0&&n<e.length?qh(e[n],0):e.length>0&&function(t){return 1===t.nodeType}(t)&&e.length===n?Xh(e[e.length-1]):Gh(t,n)},Yh=function(t){return function(n){var e=qh(n.startContainer,n.startOffset);return!function(t,n){return Rh(t,n.container,n.offset,(,t.getRoot()).filter((function(t){var n=t.container.data.charAt(t.offset-1);return!zh(n)})).isSome()}(t,e)}},Kh=function(t,n){var e=n(),o=t.selection.getRng();return function(t,n,e){return at(e.triggerChars,(function(e){return Wh(t,n,e)}))}(t.dom,o,e).bind((function(e){return Jh(t,n,e)}))},Jh=function(t,n,e,o){void 0===o&&(o={});var r=n(),i=t.selection.getRng().startContainer.nodeValue,u=j(r.lookupByChar(e.triggerChar),(function(n){return e.text.length>=n.minChars&&n.matches.getOrThunk(()(e.range,i,e.text)}));if(0===u.length)return A.none();var a=jh.all(L(u,());return A.some({lookupData:a,context:e})},$h=Co([Qo("type"),ar("text")]),Qh=Co([lr("type","autocompleteitem"),lr("active",!1),lr("disabled",!1),lr("meta",{}),Qo("value"),ar("text"),ar("icon")]),Zh=Co([Qo("type"),Qo("ch"),mr("minChars",1),lr("columns",1),mr("maxResults",10),cr("matches"),tr("fetch"),tr("onAction"),br("highlightOn",[],Ao)]),tv=[hr("disabled",!1),ar("tooltip"),ar("icon"),ar("text"),vr("onSetup",(function(){return p}))],nv=Co([Qo("type"),tr("onAction")].concat(tv)),ev=function(t){return Lo("toolbarbutton",nv,t)},ov=[hr("active",!1)].concat(tv),rv=Co(ov.concat([Qo("type"),tr("onAction")])),iv=function(t){return Lo("ToggleButton",rv,t)},uv=[vr("predicate",k),pr("scope","node",["node","editor"]),pr("position","selection",["node","selection","line"])],av=tv.concat([lr("type","contextformbutton"),lr("primary",!1),tr("onAction"),qo("original",b)]),cv=ov.concat([lr("type","contextformbutton"),lr("primary",!1),tr("onAction"),qo("original",b)]),sv=tv.concat([lr("type","contextformbutton")]),fv=ov.concat([lr("type","contextformtogglebutton")]),lv=Go("type",{contextformbutton:av,contextformtogglebutton:cv}),dv=Co([lr("type","contextform"),vr("initValue",v("")),ar("label"),or("commands",lv),ir("launch",Go("type",{contextformbutton:sv,contextformtogglebutton:fv}))].concat(uv)),mv=Co([lr("type","contexttoolbar"),Qo("items")].concat(uv)),gv=function(t){var n=t.ui.registry.getAll().popups,e=lt(n,(function(t){return(n=t,Lo("Autocompleter",Zh,n)).fold((,b);var n})),o=function(t){var n={};return W(t,(),ct(n)}(gt(e,(function(t){return t.ch}))),r=ht(e);return{dataset:e,triggerChars:o,lookupByChar:function(t){return j(r,(function(n){return n.ch===t}))}}};!function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(Ah||(Ah={}));var pv,hv=Ah,vv="tox-menu-nav__js",bv="tox-collection__item",yv="tox-swatch",xv={normal:vv,color:yv},wv="tox-collection__item--enabled",Sv="tox-collection__item-icon",kv="tox-collection__item-label",Cv="tox-collection__item-caret",Ov="tox-collection__item--active",_v="tox-collection__item-container",Tv="tox-collection__item-container--row",Ev=Dv=Bv=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:Dv(t),tieredMenu:"tox-tiered-menu"}},Mv=function(t){var n=Bv(t);return{backgroundMenu:n.backgroundMenu,selectedMenu:n.selectedMenu,menu:n.menu,selectedItem:n.selectedItem,item:Ev(t)}},Av=function(t,n,e){var o=Bv(e);return{tag:"div",classes:K([[o.menu,"tox-menu-"+n+"-column"],t?[o.hasIcons]:[]])}},Fv=[Up.parts.items({})],Iv=function(t,n,e){var o=Bv(e);return{dom:{tag:"div",classes:K([[o.tieredMenu]])},markers:Mv(e)}},Rv=function(t,n){return function(e){var o=N(e,n);return L(o,()}},Vv=function(t,n){var e=[],o=[];return W(t,(function(t,r){n(t,r)?(o.length>0&&e.push(o),o=[],bt(t.dom,"innerHtml")&&o.push(t)):o.push(t)})),o.length>0&&e.push(o),L(e,()},Pv=function(t,n,e){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===t?["tox-collection--list"]:["tox-collection--grid"])},components:[Up.parts.items({preprocess:function(e){return"auto"!==t&&t>1?Rv({tag:"div",classes:["tox-collection__group"]},t)(e):Vv(e,(function(t,e){return"separator"===n[e].type}))}})]}},Hv=function(t){return H(t,()},zv=function(t){return console.error(jo(t)),console.log(t),A.none()},Nv=function(t,n,e,o,r){var i,u=(i=e,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Up.parts.items({preprocess:)]});return{value:t,dom:u.dom,components:u.components,items:e}},Lv=function(t,n,e,o,r){if("color"===r){var i=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Up.parts.items({preprocess:"auto"!==t?Rv({tag:"div",classes:["tox-swatches__row"]},t):b})]}]}}(o);return{value:t,dom:i.dom,components:i.components,items:e}}if("normal"===r&&"auto"===o)return{value:t,dom:(i=Pv(o,e)).dom,components:i.components,items:e};if("normal"===r&&1===o)return{value:t,dom:(i=Pv(1,e)).dom,components:i.components,items:e};if("normal"===r)return{value:t,dom:(i=Pv(o,e)).dom,components:i.components,items:e};if("listpreview"===r&&"auto"!==o){i=function(t){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Up.parts.items({preprocess:Rv({tag:"div",classes:["tox-collection__group"]},t)})]}}(o);return{value:t,dom:i.dom,components:i.components,items:e}}return{value:t,dom:Av(n,o,r),components:Fv,items:e}},Wv=[Qo("type"),Qo("src"),ar("alt"),br("classes",[],Ao)],Uv=Co(Wv),jv=[Qo("type"),Qo("text"),ar("name"),br("classes",["tox-collection__item-label"],Ao)],Gv=Co(jv),Xv=wo((),qv=Co([Qo("type"),gr("direction","horizontal"),gr("align","left"),gr("valign","middle"),or("items",Xv)]),Yv=[hr("disabled",!1),ar("text"),ar("shortcut"),Xo("value","value",co((function(){return ou("menuitem-value")})),Do()),lr("meta",{})],Kv=Co([Qo("type"),ar("label"),or("items",Xv),vr("onSetup",(function(){return p})),vr("onAction",p)].concat(Yv)),Jv=Co([Qo("type"),hr("active",!1),ar("icon")].concat(Yv)),$v=[Qo("type"),Qo("fancytype"),vr("onAction",p)],Qv=[lr("initData",{})].concat($v),Zv=[yr("initData",{},[hr("allowCustomColors",!0),sr("colors",Do())])].concat($v),tb=Go("fancytype",{inserttable:Qv,colorswatch:Zv}),nb=Co([Qo("type"),vr("onSetup",(function(){return p})),vr("onAction",p),ar("icon")].concat(Yv)),eb=Co([Qo("type"),tr("getSubmenuItems"),vr("onSetup",(function(){return p})),ar("icon")].concat(Yv)),ob=Co([Qo("type"),ar("icon"),hr("active",!1),vr("onSetup",(function(){return p})),tr("onAction")].concat(Yv)),rb=function(t,n,e){var o=of(t.element,"."+e);if(o.length>0){var r=Y(o,().getOr(o.length);return A.some({numColumns:r,numRows:Math.ceil(o.length/r)})}return A.none()},ib=ub=ab=ou("tooltip.exclusive"),cb=ou("tooltip.show"),sb=ou("tooltip.hide"),fb=function(t,n,e){t.getSystem().broadcastOn([ab],{})},lb=Object.freeze({__proto__:null,hideAllExclusive:fb,setComponents:),db=Object.freeze({__proto__:null,events:function(t,n){var e=function(e){n.getTooltip().each((),n.clearTimer()};return Ii(K([[Pi(cb,(function(e){n.resetTimer((function(){!function(e){if(!n.isShowing()){fb(e);var o=t.lazySink(e).getOrDie(),r=e.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:Ii("normal"===t.mode?[Pi(Ur(),(function(t){Ei(e,cb)})),Pi(Lr(),(function(t){Ei(e,sb)}))]:[]),behaviours:yc([ap.config({})])});n.setTooltip(r),Wf(o,r),t.onShow(e,r),Pf.position(o,r,{anchor:t.anchor(e)})}}(e)}),t.delay)})),Pi(sb,(),Pi(ui(),(function(t,n){var o=n;o.universal||P(o.channels,ab)&&e(t)})),Xi((function(t){e(t)}))],"normal"===t.mode?[Pi(jr(),(function(t){Ei(t,cb)})),Pi(ri(),(function(t){Ei(t,sb)})),Pi(Ur(),(function(t){Ei(t,cb)})),Pi(Lr(),(function(t){Ei(t,sb)}))]:[Pi(_i(),(function(t,n){Ei(t,cb)})),Pi(Ti(),(function(t){Ei(t,sb)}))]]))}}),mb=[Ko("lazySink"),Ko("tooltipDom"),lr("exclusive",!0),lr("tooltipComponents",[]),lr("delay",300),pr("mode","normal",["normal","follow-highlight"]),lr("anchor",(),_a("onHide"),_a("onShow")],gb=wc({fields:mb,name:"tooltipping",active:db,state:Object.freeze({__proto__:null,init:function(){var t=Qc(),n=Qc(),e=function(){t.on(clearTimeout)},o=v("not-implemented");return xu({getTooltip:n.get,isShowing:n.isSet,setTooltip:n.set,clearTooltip:n.clear,clearTimer:e,resetTimer:readState:o})}}),apis:lb}),pb=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),hb=tinymce.util.Tools.resolve("tinymce.EditorManager"),vb=function(t){return t.getParam("height",Math.max(t.getElement().offsetHeight,200))},bb=function(t){return t.getParam("width",pb.DOM.getStyle(t.getElement(),"width"))},yb=function(t){return A.from(t.getParam("min_width")).filter(m)},xb=function(t){return A.from(t.getParam("min_height")).filter(m)},wb=function(t){return A.from(t.getParam("max_width")).filter(m)},Sb=function(t){return A.from(t.getParam("max_height")).filter(m)},kb=function(t){return!1!==t.getParam("menubar",!0,"boolean")},Cb=function(t){var n=t.getParam("toolbar",!0),e=!0===n,o=r(n),i=u(n)&&n.length>0;return!_b(t)&&(i||o||e)},Ob=function(t){var n=z(9,(),e=j(n,();return e.length>0?A.some(e):A.none()},_b=function(t){return Ob(t).fold((function(){return t.getParam("toolbar",[],"string[]").length>0}),C)};!pv||(pv={}));var Tb,Eb=function(t){return t.getParam("toolbar_mode","","string")};!Tb||(Tb={}));var Db,Bb,Mb=Ab=Fb=function(t){if(!t.inline)return A.none();var n=function(t){return t.getParam("fixed_toolbar_container","","string")}(t);if(n.length>0)return ca(Nn(),n);var e=function(t){return t.getParam("fixed_toolbar_container_target")}(t);return l(e)?A.some(At.fromDom(e)):A.none()},Ib=function(t){return t.inline&&Fb(t).isSome()},Rb=function(t){return Fb(t).getOrThunk(()},Vb=function(t){return t.inline&&!kb(t)&&!Cb(t)&&!_b(t)},Pb=function(t){return(t.getParam("toolbar_sticky",!1,"boolean")||t.inline)&&!Ib(t)&&!Vb(t)},Hb=function(t){var n=t.getParam("menu");return n?lt(n,():{}},zb=function(t){return t.getParam("menubar")},Nb=function(t){return t.getParam("anchor_top","#top")},Lb=function(t){return t.getParam("anchor_bottom","#bottom")},Wb="silver.readonly",Ub=Co([(Db="readonly",Jo(Db,Fo))]),jb=function(t,n){var e=t.outerContainer.element;n&&(t.mothership.broadcastOn([al()],{target:e}),t.uiMothership.broadcastOn([al()],{target:e})),t.mothership.broadcastOn([Wb],{readonly:n}),t.uiMothership.broadcastOn([Wb],{readonly:n})},Gb=function(t,n){t.on("init",(),t.on("SwitchMode",(),function(t){return t.getParam("readonly",!1,"boolean")}(t)&&t.setMode("readonly")},Xb=function(){var t;return Oc.config({channels:(t={},t[Wb]={schema:Ub,onReceive:,t)})},qb=function(t){return Kd.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},Yb=Kb=Jb=$b=function(t,n){var e=t.getApi(n);return function(t){t(e)}},Qb=function(t,n){return Gi(()},Zb=function(t,n){return Xi(()},ty=function(t,n){return Yi(()},ny=((Bb={})[ai()]=["disabling","alloy.base.behaviour","toggling","item-events"],Bb),ey=wt,oy=function(t,n,e,o){var r=xr(p);return{type:"item",dom:n.dom,components:ey(n.optComponents),data:t.data,eventOrder:ny,hasSubmenu:t.triggersSubmenu,itemBehaviours:yc([cp("item-events",[ty(t,e),Qb(t,r),Zb(t,r)]),qb((function(){return t.disabled||o.isDisabled()})),Xb(),ap.config({})].concat(t.itemBehaviours))}},ry=function(t){return{value:t.value,meta:_({text:t.text.getOr("")},t.meta)}},iy=tinymce.util.Tools.resolve("tinymce.Env"),uy=function(t){var n=iy.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},e=t.split("+"),o=L(e,();return iy.mac?o.join(""):o.join("+")},ay=function(t,n,e){return void 0===e&&(e=[Sv]),Eh(t,{tag:"div",classes:e},n)},cy=function(t){return{dom:{tag:"div",classes:[kv]},components:[Ju(yh.translate(t))]}},sy=fy=function(t,n){return{dom:{tag:"div",classes:[kv]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Ju(yh.translate(n))]}]}},ly=function(t){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:uy(t)}}},dy=my=function(t,n,e){var o=t.ariaLabel,r=t.value,i=t.iconContent.map((function(t){return function(t,n,e){var o=n();return Ch(t,o).or(e).getOrThunk(Sh(o))}(t,n.icons,e)}));return{dom:function(){var t=i.getOr(""),e=o.map(().getOr({}),u={tag:"div",attributes:e,classes:["tox-swatch"]};return _(_({},u),"custom"===r?{tag:"button",classes:E(E([],u.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:t}:"remove"===r?{classes:E(E([],u.classes,!0),["tox-swatch--remove"],!1),innerHtml:t}:{attributes:_(_({},u.attributes),{"data-mce-color":r}),styles:{"background-color":r}})}(),optComponents:[]}},gy=function(t){var n=t.map(().getOr({});return _({tag:"div",classes:[vv,bv]},n)},py=function(t,n,e,o){return void 0===o&&(o=A.none()),"color"===t.presets?my(t,n,o):function(t,n,e,o){var r={tag:"div",classes:[Sv]},i=e?t.iconContent.map(().orThunk(():A.none(),u=t.checkMark,a=A.from(t.meta).fold((function(){return cy}),(),c=t.htmlContent.fold((function(){return t.textContent.map(a)}),();return{dom:gy(t.ariaLabel),optComponents:[i,c,t.shortcutContent.map(ly),u,t.caret]}}(t,n,e,o)},hy=function(t,n){return vt(t,"tooltipWorker").map(().getOr([])},vy=function(t,n){var e=function(t){return pb.DOM.encode(t)}(yh.translate(t));if(n.length>0){var o=new RegExp(n),"gi");return e.replace(o,()}return e},by=function(t,n){return L(t,(function(t){switch(t.type){case"cardcontainer":return function(t,n){var e="vertical"===t.direction?"tox-collection__item-container--column":Tv,o="left"===t.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right";return{dom:{tag:"div",classes:[_v,e,o,)]},components:n}}(t,by(t.items,n));case"cardimage":return function(t,n,e){return{dom:{tag:"img",classes:n,attributes:{src:t,alt:e.getOr("")}}}}(t.src,t.classes,t.alt);case"cardtext":var e=t.name.exists((),o=e?A.from(n.cardText.matchText).getOr(""):"";return sy(vy(t.text,o),t.classes)}}))},yy=sd(Vp(),Pp()),xy=function(t){return{value:t}},wy=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Sy=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ky=Cy=function(t){return function(t,n){return _t(t,n)?function(t,n){return t.substring(n)}(t,n.length):t}(t,"#").toUpperCase()},Oy=function(t){var n=function(t){var n=t.value.replace(wy,();return{value:n}}(t),e=Sy.exec(n.value);return null===e?["FFFFFF","FF","FF","FF"]:e},_y=function(t){var n=t.toString(16);return(1===n.length?"0"+n:n).toUpperCase()},Ty=function(t){var n=_y(t.red)+_y(t.green)+_y(t.blue);return xy(n)},Ey=Math.min,Dy=Math.max,By=Math.round,My=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,Ay=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,Fy=function(t,n,e,o){return{red:t,green:n,blue:e,alpha:o}},Iy=function(t){var n=parseInt(t,10);return n.toString()===t&&n>=0&&n<=255},Ry=function(t){var n,e,o,r=(t.hue||0)%360,i=t.saturation/100,u=t.value/100;if(i=Dy(0,Ey(i,1)),u=Dy(0,Ey(u,1)),0===i)return n=e=o=By(255*u),Fy(n,e,o,1);var a=r/60,c=u*i,s=c*(1-Math.abs(a%2-1)),f=u-c;switch(Math.floor(a)){case 0:n=c,e=s,o=0;break;case 1:n=s,e=c,o=0;break;case 2:n=0,e=c,o=s;break;case 3:n=0,e=s,o=c;break;case 4:n=s,e=0,o=c;break;case 5:n=c,e=0,o=s;break;default:n=e=o=0}return n=By(255*(n+f)),e=By(255*(e+f)),o=By(255*(o+f)),Fy(n,e,o,1)},Vy=function(t){var n=Oy(t),e=parseInt(n[1],16),o=parseInt(n[2],16),r=parseInt(n[3],16);return Fy(e,o,r,1)},Py=Hy=zy=Ny=Fy(255,0,0,1),Ly=Wy=function(t,n,e){return{hue:t,saturation:n,value:e}},Uy=function(t){var n,e=0,o=0,r=t.red/255,i=t.green/255,u=t.blue/255,a=Math.min(r,Math.min(i,u)),c=Math.max(r,Math.max(i,u));return a===c?Wy(0,0,100*(o=a)):(e=60*((e=r===a?3:u===a?1:5)-(r===a?i-u:u===a?r-i:u-r)/(c-a)),n=(c-a)/c,o=c,Wy(Math.round(e),Math.round(100*n),Math.round(100*o)))},jy=Gy=function(t){return(n=t,ky(n)?A.some({value:Cy(n)}):A.none()).orThunk(().getOrThunk((function(){var n=document.createElement("canvas");n.height=1,n.width=1;var e=n.getContext("2d");e.clearRect(0,0,n.width,n.height),e.fillStyle="#FFFFFF",e.fillStyle=t,e.fillRect(0,0,1,1);var o=e.getImageData(0,0,1,1).data,r=o[0],i=o[1],u=o[2],a=o[3];return Ty(Fy(r,i,u,a))}));var n},Xy=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),qy="tinymce-custom-colors";var Yy,Ky="choiceitem",Jy=[{type:Ky,text:"Light Green",value:"#BFEDD2"},{type:Ky,text:"Light Yellow",value:"#FBEEB8"},{type:Ky,text:"Light Red",value:"#F8CAC6"},{type:Ky,text:"Light Purple",value:"#ECCAFA"},{type:Ky,text:"Light Blue",value:"#C2E0F4"},{type:Ky,text:"Green",value:"#2DC26B"},{type:Ky,text:"Yellow",value:"#F1C40F"},{type:Ky,text:"Red",value:"#E03E2D"},{type:Ky,text:"Purple",value:"#B96AD9"},{type:Ky,text:"Blue",value:"#3598DB"},{type:Ky,text:"Dark Turquoise",value:"#169179"},{type:Ky,text:"Orange",value:"#E67E23"},{type:Ky,text:"Dark Red",value:"#BA372A"},{type:Ky,text:"Dark Purple",value:"#843FA1"},{type:Ky,text:"Dark Blue",value:"#236FA1"},{type:Ky,text:"Light Gray",value:"#ECF0F1"},{type:Ky,text:"Medium Gray",value:"#CED4D9"},{type:Ky,text:"Gray",value:"#95A5A6"},{type:Ky,text:"Dark Gray",value:"#7E8C8D"},{type:Ky,text:"Navy Blue",value:"#34495E"},{type:Ky,text:"Black",value:"#000000"},{type:Ky,text:"White",value:"#ffffff"}],$y=function(t){void 0===t&&(t=10);var n,e=Xy.getItem(qy),o=r(e)?JSON.parse(e):[],i=t-(n=o).length<0?n.slice(0,t):n,u=return{add:function(n){((i,n).each(u),i.unshift(n),i.length>t&&i.pop(),Xy.setItem(qy,JSON.stringify(i))},state:function(){return i.slice(0)}}}(10),Qy=Zy=function(t){var n=function(t){return t.getParam("color_map")}(t);return void 0!==n?n):Jy},tx=function(t){$y.add(t)},nx="#000000",ex=function(t){var n=Zy(t).length);return t,n)},ox=function(t){var n="choiceitem",e={type:n,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[e,{type:n,text:"Custom color",icon:"color-picker",value:"custom"}]:[e]},rx=function(t,n,e,o){"custom"===e?fx(t)((,nx):"remove"===e?(o(""),t.execCommand("mceRemoveTextcolor",n)):(o(e),t.execCommand("mceApplyTextcolor",n,e))},ix=function(t,n){return t.concat(L($y.state(),().concat(ox(n)))},ux=ax=function(t,n,e){var o="forecolor"===n?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(o,e)},cx=function(t,n,e,o,r){t.ui.registry.addSplitButton(n,{tooltip:o,presets:"color",icon:"forecolor"===n?"text-color":"highlight-bg-color",select:function(n){var o=function(t,n){var e;return t.dom.getParents(t.selection.getStart(),(),A.from(e)}(t,e);return o.bind(().getOr(!1)},columns:ex(t),fetch:ux(Zy(t),Qy(t)),onAction:onItemAction:function(o,i){rx(t,e,i,(function(e){r.set(e),t,{name:n,color:e})}))},onSetup:function(e){ax(e,n,r.get());var o=function(t){t.name===n&&ax(e,t.name,t.color)};return t.on("TextColorChange",o),function(){t.off("TextColorChange",o)}}})},sx=function(t,n,e,o){t.ui.registry.addNestedMenuItem(n,{text:o,icon:"forecolor"===n?"text-color":"highlight-bg-color",getSubmenuItems:)},fx=function(t){return function(n,e){var o=!1,r={colorpicker:e};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:r,onAction:onSubmit:onClose:p,onCancel:)}},lx=function(t,n,e,o,r,i,u,a){var c=Hv(n),s=dx(n,e,o,"color"!==r?"normal":"color",i,u,a);return Lv(t,c,s,o,r)},dx=function(t,n,e,o,r,i,u){return wt(L(t,(function(a){return"choiceitem"===a.type?(c=a,Lo("choicemenuitem",Jv,c)).fold(zv,():A.none();var c})))},mx=function(t,n){var e=Mv(n);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+e.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===n?"tox-swatches__row":"tox-collection__group")}},gx=function(t,n){var e=t.initData.allowCustomColors&&n.colorinput.hasCustomColors();return t.initData.colors.fold((,(function(t){return t.concat(ox(e))}))},px=ou("cell-over"),hx=ou("cell-execute"),vx=function(t,n,e){var o,r=function(e){return Di(e,hx,{row:t,col:n})},i=return Zu({dom:{tag:"div",attributes:(o={role:"button"},o["aria-labelledby"]=e,o)},behaviours:yc([cp("insert-table-picker-cell",[Pi(Ur(),mp.focus),Pi(ai(),r),Pi(Jr(),i),Pi(si(),i)]),Op.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),mp.config({onFocus:)])})},bx=yx=xx={inserttable:function(t){var n=ou("size-label"),e=function(t,n,e){for(var o=[],r=0;r<n;r++){for(var i=[],u=0;u<e;u++)i.push(vx(r,u,t));o.push(i)}return o}(n,10,10),o=yx(0,0),r=bh({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:n}},components:[o],behaviours:yc([ap.config({})])});return{type:"widget",data:{value:ou("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[yy.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:bx(e).concat(r.asSpec()),behaviours:yc([cp("insert-table-picker",[Gi((),Li(px,(function(t,n,o){var i=o.event,u=i.row,a=i.col;!function(t,n,e,o,r){for(var i=0;i<o;i++)for(var u=0;u<r;u++)Op.set(t[i][u],i<=n&&u<=e)}(e,u,a,10,10),ap.set(r.get(t),[yx(u+1,a+1)])})),Li(hx,()]),np.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(t,n){var e=gx(t,n),o=n.colorinput.getColorCols(),r="color",i=lx(ou("menu-value"),e,(,o,r,hv.CLOSE_ON_EXECUTE,k,n.shared.providers),u=_(_({},i),{markers:Mv(r),movement:mx(o,r)});return{type:"widget",data:{value:ou("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[yy.widget(Up.sketch(u))]}}},wx=Sx=kx=Cx=function(t,n,e,o,r){void 0===o&&(o=!0),void 0===r&&(r=!1);var i,u=r?(i=e.icons,ay("chevron-down",i,[Cv])):function(t){return ay("chevron-right",t,[Cv])}(e.icons),a=py({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:A.none(),ariaLabel:t.text,caret:A.some(u),checkMark:A.none(),shortcutContent:t.shortcut},e,o);return oy({data:ry(t),getApi:disabled:t.disabled,onAction:p,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},a,n,e)},Ox=_x=Tx=function(t,n,e,o){var r={dom:gy(t.label),optComponents:[A.some({dom:{tag:"div",classes:[_v,Tv]},components:by(t.items,o)})]};return oy({data:ry(_({text:A.none()},t)),disabled:t.disabled,getApi:onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:A.from(o.itemBehaviours).getOr([])},r,n,e.providers)};!Yy||(Yy={}));var Ex=function(t,n,e,o,r){var i,u=e.shared.providers,a=function(t){return r?_(_({},t),{shortcut:A.none(),icon:t.text.isSome()?A.none():t.icon}):t};switch(t.type){case"menuitem":return(i=t,Lo("menuitem",nb,i)).fold(zv,(function(t){return A.some(kx(a(t),n,u,o))}));case"nestedmenuitem":return function(t){return Lo("nestedmenuitem",eb,t)}(t).fold(zv,();case"togglemenuitem":return function(t){return Lo("togglemenuitem",ob,t)}(t).fold(zv,();case"separator":return function(t){return Lo("separatormenuitem",$h,t)}(t).fold(zv,(function(t){return A.some(Sx(t))}));case"fancymenuitem":return function(t){return Lo("fancymenuitem",tb,t)}(t).fold(zv,(function(t){return _x(a(t),e)}));default:return console.error("Unknown item in general menu",t),A.none()}},Dx=function(t,n,e,o,r,i,u){var a=1===o,c=!a||Hv(t);return wt(L(t,(function(t){switch(t.type){case"separator":return(o=t,Lo("Autocompleter.Separator",$h,o)).fold(zv,();case"cardmenuitem":return function(t){return Lo("cardmenuitem",Kv,t)}(t).fold(zv,(function(t){return A.some(Tx(_(_({},t),{onAction:),r,i,{itemBehaviours:hy(t.meta,i),cardText:{matchText:n,highlightOn:u}}))}));default:return function(t){return Lo("Autocompleter.Item",Qh,t)}(t).fold(zv,(function(t){return A.some(wx(t,n,a,"normal",e,r,i,c))}))}var o})))},Bx=function(t,n,e,o,r){var i=Hv(n),u=wt(L(n,(function(t){var n=function(t){return Ex(t,e,o,function(t){return r?!bt(t,"text"):i}(t),r)};return"nestedmenuitem"===t.type&&t.getSubmenuItems().length<=0?n(_(_({},t),{disabled:!0})):n(t)})));return(r?Nv:Lv)(t,i,u,1,"normal")},Mx=Ax=function(t,n){var e=Qc(),o=xr(!1),r=Zu(Jp.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:yc([cp("dismissAutocompleter",[Pi(xi(),()])]),lazySink:n.getSink})),i=u=a=function(){if(i()){var n=e.get().map((function(t){return t.element}));Ph(n.getOr(At.fromDom(t.selection.getNode()))).each(De),u(),e.clear(),o.set(!1)}},c=Nt((function(){return gv(t)})),s=function(n,e,o,i){n.matchLength=e.text.length;var u=at(o,(function(t){return A.from(t.columns)})).getOr(1);Jp.showAt(r,Up.sketch(function(t,n,e,o){var r=e===Yy.ContentFocus?Em():Tm(),i=mx(n,o),u=Mv(o);return{dom:t.dom,components:t.components,items:t.items,value:t.value,markers:{selectedItem:u.selectedItem,item:u.item},movement:i,fakeFocus:e===Yy.ContentFocus,focusManager:r,menuBehaviours:ub("auto"!==n?[]:[Gi(()])}}(Lv("autocompleter-value",!0,i,u,"normal"),u,Yy.ContentFocus,"normal")),{anchor:{type:"node",root:At.fromDom(t.getBody()),node:A.from(n.element)}}),Jp.getContent(r).each(um.highlightFirst)},f=function(r){(function(n){return e.get().map(().getOrThunk(()})(r).fold(a,(function(r){!function(n){if(!i()){var r=Vh(t,n.range);e.set({triggerChar:n.triggerChar,element:r,matchLength:n.text.length}),o.set(!1)}}(r.context),r.lookupData.then((function(i){e.get().map((function(e){var c=r.context;if(e.triggerChar===c.triggerChar){var l=function(e,r){var i=at(r,().getOr(1);return J(r,(function(r){var c=r.items;return Dx(c,r.matchText,(,i,hv.BUBBLE_TO_SANDBOX,n,r.highlightOn)}))}(c.triggerChar,i);l.length>0?s(e,c,i,l):c.text.length-e.matchLength>=10?a():u()}}))}))}))},l={onKeypress:Fh((,50),cancelIfNecessary:a,isMenuOpen:function(){return Jp.isOpen(r)},isActive:i,isProcessingAction:o.get,getView:function(){return Jp.getContent(r)}};!1===t.hasPlugin("rtc")&&Uh(l,t)},Fx=Ix=function(t,n){var e=null;return{cancel:schedule:},Rx=function(t){var n=t.raw;return void 0===n.touches||1!==n.touches.length?A.none():A.some(n.touches[0])},Vx=function(t){var n=Qc(),e=xr(!1),o=Ix((,400),r=Or([{key:Rr(),value:,{key:Vr(),value:function(t){return o.cancel(),Rx(t).each((function(t){n.on((function(e){((t,e)&&n.clear()}))})),A.none()}},{key:Pr(),value:function(r){o.cancel();return n.get().filter(().map(()}}]);return{fireIfReady:},Px=Hx=function(t,n){var e=_({stopBackspace:!0},n),o=Vx(e),r=L(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(),i=Qc(),u=ts(t,"paste",(),a=ts(t,"keydown",(function(t){e.triggerEvent("keydown",t)?t.kill():e.stopBackspace&&function(t){return t.raw.which===am[0]&&!P(["input","textarea"],It(t.target))&&!Fx(t.target,'[contenteditable="true"]')}(t)&&t.prevent()})),c=function(t,n){return Px()?ns(t,"focus",n):ts(t,"focusin",n)}(t,(),s=Qc(),f=function(t,n){return Px()?ns(t,"blur",n):ts(t,"focusout",n)}(t,();return{unbind:},zx=function(t,n){var e=vt(t,"target").getOr(n);return xr(e)},Nx=wr([{stopped:[]},{resume:["element"]},{complete:[]}]),Lx=function(t,n,e,o,r,i){var u=t(n,o),a=function(t,n){var e=xr(!1),o=xr(!1);return{stop:function(){e.set(!0)},cut:function(){o.set(!0)},isStopped:e.get,isCut:o.get,event:t,setSource:n.set,getSource:n.get}}(e,r);return u.fold((,()},Wx=Ux=function(t,n,e){var o=function(t){var n=xr(!1);return{stop:cut:p,isStopped:n.get,isCut:k,event:t,setSource:S("Cannot set source of a broadcasted event"),getSource:S("Cannot get source of a broadcasted event")}}(n);return W(t,(function(t){var n=t.descHandler;ku(n)(o)})),o.isStopped()},jx=Gx=function(){var t={};return{registerId:function(n,e,o){ft(o,(function(o,r){var i=void 0!==t[r]?t[r]:{};i[e]=function(t,n){return e=x.apply(void 0,[t.handler].concat(n)),o=t.purpose,{cHandler:e,purpose:o};var e,o}(o,n),t[r]=i}))},unregisterId:filterByType:function(n){return vt(t,n).map((function(t){return gt(t,(function(t,n){return function(t,n){return{id:t,descHandler:n}}(n,t)}))})).getOr([])},find:function(n,e,o){return vt(t,e).bind((function(t){return Dr(o,(function(n){return function(t,n){return su(n).bind((function(n){return vt(t,n)})).map(()}(t,n)}),n)}))}}},Xx=function(){var t=Gx(),n={},e=function(t){var n=t.element;return su(n).getOrThunk((function(){return function(t,n){var e=ou(uu+t);return cu(n,e),e}("uid-",t.element)}))},o=function(e){su(e.element).each(()};return{find:filter:function(n){return t.filterByType(n)},register:function(r){var i=e(r);yt(n,i)&&function(t,e){var r=n[e];if(r!==t)throw new Error('The tagId "'+e+'" is already used by: '+Zi(r.element)+"\nCannot use it for: "+Zi(t.element)+"\nThe conflicting element is"+(zn(r.element)?" ":" not ")+"already in the DOM");o(t)}(r,i);var u=[r];t.registerId(u,i,r.events),n[i]=r},unregister:o,getById:function(t){return vt(n,t)}}},qx=Bd({name:"Container",factory:configFields:[lr("components",[]),Tl("containerBehaviours",[]),lr("events",{}),lr("domModification",{}),lr("eventOrder",{})]}),Yx=function(t){var n=function(n){return On(t.element).fold(C,(function(t){return bn(n,t)}))},e=Xx(),o=r=Hx(t.element,{triggerEvent:function(t,n){return va(t,n.target,(function(e){return function(t,n,e,o){return jx(t,n,e,e.target,o)}(o,t,n,e)}))}}),i={debugInfo:v("real"),triggerEvent:triggerFocus:function(t,n){su(t).fold((function(){Ec(t)}),(function(e){va(oi(),t,(function(e){return function(t,n,e,o,r){var i=zx(e,o);Lx(t,n,e,o,i,r)}(o,oi(),{originator:n,kill:p,prevent:p,target:t},t,e),!1}))}))},triggerEscape:getByUid:function(t){return g(t)},getByDom:function(t){return h(t)},build:Zu,addToGui:function(t){c(t)},removeFromGui:function(t){s(t)},addToWorld:function(t){u(t)},removeFromWorld:function(t){a(t)},broadcast:function(t){l(t)},broadcastOn:function(t,n){d(t,n)},broadcastEvent:isConnected:C},u=a=c=function(n){Wf(t,n)},s=function(t){Gf(t)},f=function(t){var n=e.filter(ui());W(n,(function(n){var e=n.descHandler;ku(e)(t)}))},l=d=m=g=h=return u(t),{root:t,element:t.element,destroy:add:c,remove:s,getByUid:g,getByDom:h,addToWorld:u,removeFromWorld:a,broadcast:l,broadcastOn:d,broadcastEvent:m}},Kx=v([lr("prefix","form-field"),Tl("fieldBehaviours",[Rd,_l])]),Jx=v([rd({schema:[Ko("dom")],name:"label"}),rd({factory:{sketch:,schema:[Ko("text")],name:"aria-descriptor"}),ed({factory:{sketch:function(t){var n=kr(t,["factory"]);return t.factory.sketch(n)}},schema:[Ko("factory")],name:"field"})]),$x=Md({name:"FormField",configFields:Kx(),partFields:Jx(),factory:function(t,n,e,o){var r=Dl(t.fieldBehaviours,[Rd.config({find:function(n){return hd(n,t,"field")}}),_l.config({store:{mode:"manual",getValue:setValue:})]),i=Ii([Gi(()]),u={getField:function(n){return hd(n,t,"field")},getLabel:;return{uid:t.uid,dom:t.dom,components:n,behaviours:r,events:i,apis:u}},apis:{getField:function(t,n){return t.getField(n)},getLabel:function(t,n){return t.getLabel(n)}}}),Qx=Object.freeze({__proto__:null,exhibit:),Zx=[lr("tabAttr","data-alloy-tabstop")],tw=wc({fields:Zx,name:"tabstopping",active:Qx}),nw=tinymce.util.Tools.resolve("tinymce.html.Entities"),ew=ow=rw=iw=function(t,n){return $x.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(t)}})},uw=ou("form-component-change"),aw=ou("form-close"),cw=ou("form-cancel"),sw=ou("form-action"),fw=ou("form-submit"),lw=ou("form-block"),dw=ou("form-unblock"),mw=ou("form-tabchange"),gw=ou("form-resize"),pw=function(t,n){var e,o,r,i=t.label.map((),u=function(t){return ,a=u((),c=[Pi(Ur(),u(()),Pi(Jr(),a),Pi(si(),a),Pi(jr(),u(()),Pi(Gr(),u(()),Yi(u(())],s=function(t,n){return L(of(t.element,".tox-collection__item"),n)},f=$x.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==t.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:b},behaviours:yc([Kd.config({disabled:n.isDisabled,onDisabled:onEnabled:),Xb(),ap.config({}),_l.config({store:{mode:"memory",initialValue:[]},onSetValue:function(e,o){!function(e,o){var r=L(o,(),i="auto"!==t.columns&&t.columns>1?N(r,t.columns):[r],u=L(i,();Ji(e.element,u.join(""))}(e,o),"auto"===t.columns&&rb(e,5,"tox-collection__item").each((),Ei(e,gw)}}),tw.config({}),np.config((o=t.columns,r="normal",1===o?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===o?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===r?".tox-swatches__row":".tox-collection__group",cell:"color"===r?".tox-swatch":"."+bv}})),cp("collection-events",c)]),eventOrder:(e={},e[ai()]=["disabling","alloy.base.behaviour","collection-events"],e)});return ew(i,f,["tox-form__group--collection"],[])},hw=v([rr("data"),lr("inputAttributes",{}),lr("inputStyles",{}),lr("tag","input"),lr("inputClasses",[]),_a("onSetValue"),lr("styles",{}),lr("eventOrder",{}),Tl("inputBehaviours",[_l,mp]),lr("selectOnFocus",!0)]),vw=function(t){return yc([mp.config({onFocus:t.selectOnFocus?p})])},bw=function(t){return _(_({},vw(t)),Dl(t.inputBehaviours,[_l.config({store:_(_({mode:"manual"},t.data.map(().getOr({})),{getValue:function(t){return Wu(t.element)},setValue:),onSetValue:t.onSetValue})]))},yw=function(t){return{tag:t.tag,attributes:_({type:"text"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},xw=Bd({name:"Input",configFields:hw(),factory:function(t,n){return{uid:t.uid,dom:yw(t),components:[],behaviours:bw(t),eventOrder:t.eventOrder}}}),ww={},Sw={exports:ww};!function(t,n,o,r){!function(e,r){"object"===typeof n&&"undefined"!==typeof o?o.exports=r():"function"===typeof t&&t.amd?t(r):(e="undefined"!==typeof globalThis?globalThis:e||self).EphoxContactWrapper=r()}(this,(function(){var t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e.g?e.g:"undefined"!==typeof self?self:{},n={exports:{}};!function(n){!function(t){var e=setTimeout;unction r(t){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],f(t,this)}otype.catch=r.prototype.then=r.all=function(t){var n=Array.prototype.slice.call(t);return new r((function(t,e){if(0===n.length)return t([]);var o=n.length;or(var i=0;i<n.length;i++)r(i,n[i])}))},r.resolve=r.reject=r.race=r._immediateFn="function"===typeof setImmediate?r._unhandledRejectionFn=r._setImmediateFn=function(t){r._immediateFn=t},r._setUnhandledRejectionFn=n.exports?n.exports=r:t.Promise||(t.Promise=r)}(t)}(n);var o=n.exports;return{boltExport:("undefined"!==typeof window?window:Function("return this;")()).Promise||o}}))}(void 0,ww,Sw);var kw,Cw=Sw.exports.boltExport,Ow=_w={nu:Ow,pure:,Tw=Ew=Dw=Bw=Mw=["input","textarea"],Aw=function(t){var n=It(t);return P(Mw,n)},Fw=function(t,n){var e=n.getRoot(t).getOr(t.element);Hu(e,n.invalidClass),n.notify.each(()},Iw=function(t,n,e,o){var r=n.getRoot(t).getOr(t.element);Vu(r,n.invalidClass),n.notify.each(()},Rw=function(t,n,e){return n.validator.fold((,(function(n){return n.validate(t)}))},Vw=function(t,n,e){return n.notify.each((function(n){n.onValidate(t)})),Rw(t,n).map(()},Pw=Object.freeze({__proto__:null,markValid:Fw,markInvalid:Iw,query:Rw,run:Vw,isInvalid:function(t,n){var e=n.getRoot(t).getOr(t.element);return zu(e,n.invalidClass)}}),Hw=Object.freeze({__proto__:null,events:),zw=[Ko("invalidClass"),lr("getRoot",A.none),fr("notify",[lr("aria","alert"),lr("getContainer",A.none),lr("validHtml",""),_a("onValid"),_a("onInvalid"),_a("onValidate")]),fr("validator",[Ko("validate"),lr("onEvent","input"),lr("validateOnLoad",!0)])],Nw=wc({fields:zw,name:"invalidating",active:Hw,apis:Pw,extra:{validation:}),Lw=Object.freeze({__proto__:null,getCoupled:),Ww=[Jo("others",No(Ue.value,Do()))],Uw=Object.freeze({__proto__:null,init:function(){var t={},n=v({});return xu({readState:n,getOrCreate:function(n,e,o){var r=ct(e.others);if(r)return vt(t,o).getOrThunk((function(){var r=vt(e.others,o).getOrDie("No information found for coupled component: "+o)(n),i=n.getSystem().build(r);return t[o]=i,i}));throw new Error("Cannot find coupled component: "+o+". Known coupled components: "+JSON.stringify(r,null,2))}})}}),jw=wc({fields:Ww,name:"coupling",apis:Lw,state:Uw}),Gw=v("sink"),Xw=v(rd({name:Gw(),overrides:v({dom:{tag:"div"},behaviours:yc([Pf.config({useFixed:C})]),events:Ii([Wi(Xr()),Wi(zr()),Wi(Jr())])})}));!function(t){t[t.HighlightFirst=0]="HighlightFirst",t[t.HighlightNone=1]="HighlightNone"}(kw||(kw={}));var qw,Yw,Kw,Jw=function(t,n){var e=t.getHotspot(n).getOr(n),o="hotspot",r=t.getAnchorOverrides();return t.layouts.fold((,()},$w=function(t,n,e,o,r,i,u){var a=function(t,n,e,o,r,i,u){var a=function(t,n,e){return(0,t.fetch)(e).map(n)}(t,n,o),c=nS(o,t);return a.map(()}(t,n,Jw(t,e),e,o,r,u);return a.map(()},Qw=Zw=function(t,n,e,o,r,i){var u=jw.getCoupled(e,"sandbox");return(ul.isOpen(u)?Qw:$w)(t,n,e,u,o,r,i)},tS=function(t,n,e){var o=Rd.getCurrent(n).getOr(n),r=ve(t.element);e?$n(o.element,"min-width",r+"px"):function(t,n){he.set(t,n)}(o.element,r)},nS=eS=function(t){ul.getState(t).each((function(t){Kp.repositionMenus(t)}))},oS=function(t,n,e){var o=fa(),r=nS(n,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:o.id,role:"listbox"}},behaviours:Ml(t.sandboxBehaviours,[_l.config({store:{mode:"memory",initialValue:n}}),ul.config({onOpen:function(r,i){var u=Jw(t,n);o.link(n.element),t.matchWidth&&tS(u.hotspot,i,t.useMinWidth),t.onOpen(u,r,i),void 0!==e&&void 0!==e.onOpen&&e.onOpen(r,i)},onClose:isPartOf:function(t,e,o){return da(e,o)||da(n,o)},getAttachPoint:function(){return r().getOrDie()}}),Rd.config({find:),Oc.config({channels:_(_({},ll({isExtraPart:k})),ml({doReposition:eS}))})])}},rS=iS=function(){return[lr("sandboxClasses",[]),Bl("sandboxBehaviours",[Rd,Oc,ul,_l])]},uS=v([Ko("dom"),Ko("fetch"),_a("onOpen"),Ta("onExecute"),lr("getHotspot",A.some),lr("getAnchorOverrides",v({})),Cs(),Tl("dropdownBehaviours",[Op,jw,np,mp]),Ko("toggleClass"),lr("eventOrder",{}),rr("lazySink"),lr("matchWidth",!1),lr("useMinWidth",!1),rr("role")].concat(iS())),aS=v([od({schema:[ka()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),Xw()]),cS=Md({name:"Dropdown",configFields:uS(),partFields:aS(),factory:function(t,n,e,o){var r,i,u=function(t){ul.getState(t).each((function(t){Kp.highlightPrimary(t)}))},a={expand:function(n){Op.isOn(n)||Zw(t,b,n,o,p,kw.HighlightNone).get(p)},open:isOpen:Op.isOn,close:repositionMenus:,c=function(t,n){return Bi(t),A.some(!0)};return{uid:t.uid,dom:t.dom,components:n,behaviours:Dl(t.dropdownBehaviours,[Op.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),jw.config({others:{sandbox:function(n){return oS(t,n,{onOpen:function(){return Op.on(n)},onClose:function(){return Op.off(n)}})}}}),np.config({mode:"special",onSpace:c,onEnter:c,onDown:function(t,n){if(cS.isOpen(t)){var e=jw.getCoupled(t,"sandbox");u(e)}else cS.open(t);return A.some(!0)},onEscape:),mp.config({})]),events:Tp(A.some(()),eventOrder:_(_({},t.eventOrder),(r={},r[ai()]=["disabling","toggling","alloy.base.behaviour"],r)),apis:a,domModification:{attributes:_(_({"aria-haspopup":"true"},t.role.fold((function(){return{}}),(function(t){return{role:t}}))),"button"===t.dom.tag?{type:(i="type",vt(t.dom,"attributes").bind((function(t){return vt(t,i)}))).getOr("button")}:{})}}},apis:{open:function(t,n){return t.open(n)},expand:function(t,n){return t.expand(n)},close:function(t,n){return t.close(n)},isOpen:function(t,n){return t.isOpen(n)},repositionMenus:function(t,n){return t.repositionMenus(n)}}}),sS=Object.freeze({__proto__:null,events:exhibit:),fS=wc({fields:[],name:"unselecting",active:sS}),lS=ou("color-input-change"),dS=ou("color-swatch-change"),mS=ou("color-picker-cancel"),gS=function(t,n,e){var o=$x.parts.field({factory:xw,inputClasses:["tox-textfield"],onSetValue:inputBehaviours:yc([Kd.config({disabled:n.providers.isDisabled}),Xb(),tw.config({}),Nw.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return On(t.element)},notify:{onValid:,validator:{validateOnLoad:!1,validate:})]),selectOnFocus:!1}),r=t.label.map((function(t){return iw(t,n.providers)})),i=function(t,n){Di(t,dS,{value:n})},u=bh(function(t,n){return cS.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:yc([Yb(n.providers.isDisabled),Xb(),fS.config({}),tw.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:n.getSink,fetch:parts:{menu:Iv(0,0,t.presets)}})}({dom:{tag:"span",attributes:{"aria-label":n.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[tc,Za,rc]},onLtr:,components:[],fetch:ux(e.getColors(),e.hasCustomColors()),columns:e.getColorCols(),presets:"color",onItemAction:,n));return $x.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:r.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[o,u.asSpec()]}]),fieldBehaviours:yc([cp("form-field-events",[Pi(lS,(),Pi(dS,(),Pi(mS,()])])})},pS=rd({schema:[Ko("dom")],name:"label"}),hS=function(t){return rd({name:t+"-edge",overrides:)},vS=hS("top-left"),bS=hS("top"),yS=hS("top-right"),xS=hS("right"),wS=hS("bottom-right"),SS=hS("bottom"),kS=hS("bottom-left"),CS=hS("left"),OS=ed({name:"thumb",defaults:v({dom:{styles:{position:"absolute"}}}),overrides:),_S=ed({schema:[qo("mouseIsDown",(function(){return xr(!1)}))],name:"spectrum",overrides:function(t){var n=t.model.manager,e=function(e,o){return n.getValueFromEvent(o).map((function(o){return n.setValueFrom(e,t,o)}))};return{behaviours:yc([np.config({mode:"special",onLeft:function(e){return n.onLeft(e,t)},onRight:function(e){return n.onRight(e,t)},onUp:function(e){return n.onUp(e,t)},onDown:function(e){return n.onDown(e,t)}}),mp.config({})]),events:Ii([Pi(Rr(),e),Pi(Vr(),e),Pi(zr(),e),Pi(Nr(),()])}}}),TS=[pS,CS,xS,bS,SS,vS,yS,kS,wS,OS,_S],ES=v("slider.change.value"),DS=function(t){var n=t.event.raw;if(n)){var e=n;return void 0!==e.touches&&1===e.touches.length?A.some(e.touches[0]).map((function(t){return de(t.clientX,t.clientY)})):A.none()}var o=n;return void 0!==o.clientX?A.some(o).map((function(t){return de(t.clientX,t.clientY)})):A.none()},BS=function(t){return t.model.minX},MS=function(t){return t.model.minY},AS=function(t){return t.model.minX-1},FS=IS=function(t){return t.model.maxX},RS=function(t){return t.model.maxY},VS=function(t){return t.model.maxX+1},PS=HS=zS=function(t){return HS(t,IS,BS)},NS=function(t){return HS(t,RS,MS)},LS=function(t){return zS(t)/2},WS=US=function(t){return t.stepSize},jS=function(t){return t.snapToGrid},GS=function(t){return t.snapStart},XS=function(t){return t.rounded},qS=YS=function(t){return qS(t,"left")},KS=function(t){return qS(t,"right")},JS=function(t){return qS(t,"top")},$S=function(t){return qS(t,"bottom")},QS=function(t){return t.model.value.get()},ZS=function(t){return{x:t}},tk=function(t){return{y:t}},nk=function(t,n){return{x:t,y:n}},ek=function(t,n){Di(t,ES(),{value:n})},ok=function(t,n,e,o){return t<n?t:t>e?e:t===n?n-1:Math.max(n,t-o)},rk=function(t,n,e,o){return t>e?t:t<n?n:t===e?e+1:Math.min(e,t+o)},ik=uk=function(t){var n=t.min,e=t.max,o=t.range,r=t.value,i=t.step,u=t.snap,a=t.snapStart,c=t.rounded,s=t.hasMinEdge,f=t.hasMaxEdge,l=t.minBound,d=t.maxBound,m=t.screenRange,g=s?n-1:n,p=f?e+1:e;if(r<l)return g;if(r>d)return p;var h=function(t,n,e){return Math.min(e,Math.max(t,n))-n}(r,l,d),v=ik(h/m*o+n,g,p);return u&&v>=n&&v<=e?function(t,n,e,o,r){return r.fold((,(function(n){var r=(t-n)%o,i=Math.round(r/o),u=Math.floor((t-n)/o),a=Math.floor((e-n)/o),c=n+Math.min(a,u+i)*o;return Math.max(n,c)}))}(v,n,e,i,a):c?Math.round(v):v},ak=function(t){var n=t.min,e=t.max,o=t.range,r=t.value,i=t.hasMinEdge,u=t.hasMaxEdge,a=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,f=t.centerMaxEdge;return r<n?i?0:s:r>e?u?a:f:(r-n)/o*c},ck="top",sk="right",fk="bottom",lk="left",dk=mk=gk=function(t){var n=dk(t);return mk(n,lk)},pk=function(t){var n=dk(t);return mk(n,sk)},hk=function(t){var n=dk(t);return mk(n,ck)},vk=bk=function(t){var n=dk(t);return mk(n,"width")},yk=xk=function(t,n,e){return(t+n)/2-e},wk=function(t,n){var e=dk(t),o=dk(n),r=mk(e,lk),i=mk(e,sk),u=mk(o,lk);return xk(r,i,u)},Sk=function(t,n){var e=dk(t),o=dk(n),r=mk(e,ck),i=mk(e,fk),u=mk(o,ck);return xk(r,i,u)},kk=function(t,n){Di(t,ES(),{value:n})},Ck=function(t){return{x:t}},Ok=function(t,n,e){var o={min:BS(n),max:IS(n),range:zS(n),value:e,step:US(n),snap:jS(n),snapStart:GS(n),rounded:XS(n),hasMinEdge:YS(n),hasMaxEdge:KS(n),minBound:gk(t),maxBound:pk(t),screenRange:bk(t)};return uk(o)},_k=function(t){return function(n,e){return function(t,n,e){var o=(t>0?rk:ok)(QS(e).x,BS(e),IS(e),US(e));return kk(n,Ck(o)),A.some(o)}(t,n,e).map(C)}},Tk=function(t,n,e,o,r,i){var u=function(t,n,e,o,r){var i=bk(t),u=o.bind((function(n){return A.some(wk(n,t))})).getOr(0),a=r.bind((function(n){return A.some(wk(n,t))})).getOr(i),c={min:BS(n),max:IS(n),range:zS(n),value:e,hasMinEdge:YS(n),hasMaxEdge:KS(n),minBound:gk(t),minOffset:0,maxBound:pk(t),maxOffset:i,centerMinEdge:u,centerMaxEdge:a};return ak(c)}(n,i,e,o,r);return gk(n)-gk(t)+u},Ek=_k(-1),Dk=_k(1),Bk=A.none,Mk=A.none,Ak={"top-left":A.none(),top:A.none(),"top-right":A.none(),right:A.some((function(t,n){ek(t,ZS(VS(n)))})),"bottom-right":A.none(),bottom:A.none(),"bottom-left":A.none(),left:A.some((function(t,n){ek(t,ZS(AS(n)))}))},Fk=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){var o=Ok(t,n,e),r=Ck(o);return kk(t,r),o},setToMin:function(t,n){var e=BS(n);kk(t,Ck(e))},setToMax:function(t,n){var e=IS(n);kk(t,Ck(e))},findValueOfOffset:Ok,getValueFromEvent:function(t){return DS(t).map((function(t){return t.left}))},findPositionOfValue:Tk,setPositionFromValue:function(t,n,e,o){var r=QS(e),i=Tk(t,o.getSpectrum(t),r.x,o.getLeftEdge(t),o.getRightEdge(t),e),u=ve(n.element)/2;$n(n.element,"left",i-u+"px")},onLeft:Ek,onRight:Dk,onUp:Bk,onDown:Mk,edgeActions:Ak}),Ik=function(t,n){Di(t,ES(),{value:n})},Rk=function(t){return{y:t}},Vk=function(t,n,e){var o={min:MS(n),max:RS(n),range:NS(n),value:e,step:US(n),snap:jS(n),snapStart:GS(n),rounded:XS(n),hasMinEdge:JS(n),hasMaxEdge:$S(n),minBound:hk(t),maxBound:vk(t),screenRange:yk(t)};return uk(o)},Pk=function(t){return function(n,e){return function(t,n,e){var o=(t>0?rk:ok)(QS(e).y,MS(e),RS(e),US(e));return Ik(n,Rk(o)),A.some(o)}(t,n,e).map(C)}},Hk=function(t,n,e,o,r,i){var u=function(t,n,e,o,r){var i=yk(t),u=o.bind((function(n){return A.some(Sk(n,t))})).getOr(0),a=r.bind(().getOr(i),c={min:MS(n),max:RS(n),range:NS(n),value:e,hasMinEdge:JS(n),hasMaxEdge:$S(n),minBound:hk(t),minOffset:0,maxBound:vk(t),maxOffset:i,centerMinEdge:u,centerMaxEdge:a};return ak(c)}(n,i,e,o,r);return hk(n)-hk(t)+u},zk=A.none,Nk=A.none,Lk=Pk(-1),Wk=Pk(1),Uk={"top-left":A.none(),top:A.some((function(t,n){ek(t,tk(FS(n)))})),"top-right":A.none(),right:A.none(),"bottom-right":A.none(),bottom:A.some((function(t,n){ek(t,tk(PS(n)))})),"bottom-left":A.none(),left:A.none()},jk=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){var o=Vk(t,n,e),r=Rk(o);return Ik(t,r),o},setToMin:function(t,n){var e=MS(n);Ik(t,Rk(e))},setToMax:function(t,n){var e=RS(n);Ik(t,Rk(e))},findValueOfOffset:Vk,getValueFromEvent:findPositionOfValue:Hk,setPositionFromValue:onLeft:zk,onRight:Nk,onUp:Lk,onDown:Wk,edgeActions:Uk}),Gk=function(t,n){Di(t,ES(),{value:n})},Xk=function(t,n){return{x:t,y:n}},qk=function(t,n){return function(e,o){return function(t,n,e,o){var r=t>0?rk:ok,i=n?QS(o).x:r(QS(o).x,BS(o),IS(o),US(o)),u=n?r(QS(o).y,MS(o),RS(o),US(o)):QS(o).y;return Gk(e,Xk(i,u)),A.some(i)}(t,n,e,o).map(C)}},Yk=qk(-1,!1),Kk=qk(1,!1),Jk=qk(-1,!0),$k=qk(1,!0),Qk={"top-left":A.some((function(t,n){ek(t,nk(AS(n),FS(n)))})),top:A.some((function(t,n){ek(t,nk(LS(n),FS(n)))})),"top-right":A.some((function(t,n){ek(t,nk(VS(n),FS(n)))})),right:A.some((function(t,n){ek(t,nk(VS(n),WS(n)))})),"bottom-right":A.some((function(t,n){ek(t,nk(VS(n),PS(n)))})),bottom:A.some((function(t,n){ek(t,nk(LS(n),PS(n)))})),"bottom-left":A.some((function(t,n){ek(t,nk(AS(n),PS(n)))})),left:A.some(()},Zk=Object.freeze({__proto__:null,setValueFrom:function(t,n,e){var o=Ok(t,n,e.left),r=Vk(t,n,e.top),i=Xk(o,r);return Gk(t,i),i},setToMin:function(t,n){var e=BS(n),o=MS(n);Gk(t,Xk(e,o))},setToMax:function(t,n){var e=IS(n),o=RS(n);Gk(t,Xk(e,o))},getValueFromEvent:function(t){return DS(t)},setPositionFromValue:onLeft:Yk,onRight:Kk,onUp:Jk,onDown:$k,edgeActions:Qk}),tC=Md({name:"Slider",configFields:[lr("stepSize",1),lr("onChange",p),lr("onChoose",p),lr("onInit",p),lr("onDragStart",p),lr("onDragEnd",p),lr("snapToGrid",!1),lr("rounded",!0),rr("snapStart"),Jo("model",Go("mode",{x:[lr("minX",0),lr("maxX",100),qo("value",(function(t){return xr(t.mode.minX)})),Ko("getInitialValue"),Ba("manager",Fk)],y:[lr("minY",0),lr("maxY",100),qo("value",(),Ko("getInitialValue"),Ba("manager",jk)],xy:[lr("minX",0),lr("maxX",100),lr("minY",0),lr("maxY",100),qo("value",(),Ko("getInitialValue"),Ba("manager",Zk)]})),Tl("sliderBehaviours",[np,_l]),qo("mouseIsDown",(function(){return xr(!1)}))],partFields:TS,factory:function(t,n,e,o){var r,i=function(n){return vd(n,t,"thumb")},u=function(n){return vd(n,t,"spectrum")},a=function(n){return hd(n,t,"left-edge")},c=function(n){return hd(n,t,"right-edge")},s=function(n){return hd(n,t,"top-edge")},f=function(n){return hd(n,t,"bottom-edge")},l=t.model,d=l.manager,m=function(n,e){d.setPositionFromValue(n,e,t,{getLeftEdge:a,getRightEdge:c,getTopEdge:s,getBottomEdge:f,getSpectrum:u})},g=function(t,n){l.value.set(n);var e=i(t);m(t,e)},p=function(n){var e=t.mouseIsDown.get();t.mouseIsDown.set(!1),e&&hd(n,t,"thumb").each(()},h=function(n,e){e.stop(),t.mouseIsDown.set(!0),t.onDragStart(n,i(n))},v=function(n,e){e.stop(),t.onDragEnd(n,i(n)),p(n)};return{uid:t.uid,dom:t.dom,components:n,behaviours:Dl(t.sliderBehaviours,[np.config({mode:"special",focusIn:),_l.config({store:{mode:"manual",getValue:function(t){return l.value.get()}}}),Oc.config({channels:(r={},r[sl()]={onReceive:p},r)})]),events:Ii([Pi(ES(),(),Gi((),Pi(Rr(),h),Pi(Pr(),v),Pi(zr(),h),Pi(Wr(),v)]),apis:{resetToMin:function(n){d.setToMin(n,t)},resetToMax:function(n){d.setToMax(n,t)},setValue:g,refresh:m},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(t,n,e){t.setValue(n,e)},resetToMin:function(t,n){t.resetToMin(n)},resetToMax:function(t,n){t.resetToMax(n)},refresh:function(t,n){t.refresh(n)}}}),nC=ou("rgb-hex-update"),eC=ou("slider-update"),oC=ou("palette-update"),rC="form",iC=[Tl("formBehaviours",[_l])],uC=function(t){return"<alloy.field."+t+">"},aC=function(t,n){return{uid:t.uid,dom:t.dom,components:n,behaviours:Dl(t.formBehaviours,[_l.config({store:{mode:"manual",getValue:function(n){var e=yd(n,t);return lt(e,(function(t,n){return t().bind((function(t){var e,o,r=Rd.getCurrent(t);return e=r,o=new Error("Cannot find a current component to extract the value from for form part '"+n+"': "+Zi(t.element)),e.fold((function(){return Ue.error(o)}),Ue.value)})).map(_l.getValue)}))},setValue:})]),apis:{getField:}},cC={getField:bu((),sketch:function(t){var n=function(){var t=[];return{field:record:v(t)}}(),e=t(n),o=n.record(),r=L(o,();return _d(rC,iC,r,aC,e)}},sC=ou("valid-input"),fC=ou("invalid-input"),lC=ou("validating-input"),dC="colorcustom.rgb.",mC=function(t,n,e,o){var r=function(e,o){return Nw.config({invalidClass:n("invalid"),notify:{onValidate:function(t){Di(t,lC,{type:e})},onValid:function(t){Di(t,sC,{type:e,value:_l.getValue(t)})},onInvalid:,validator:{validate:validateOnLoad:!1}})},i=function(e,o,i,u,a){var c=t("colorcustom.rgb.range"),s=$x.parts.label({dom:{tag:"label",innerHtml:i,attributes:{"aria-label":u}}}),f=$x.parts.field({data:a,factory:xw,inputAttributes:_({type:"text"},"hex"===o?{"aria-live":"polite"}:{}),inputClasses:[n("textfield")],inputBehaviours:yc([r(o,e),tw.config({})]),onSetValue:),l=[s,f],d="hex"!==o?[$x.parts["aria-descriptor"]({text:c})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:l.concat(d)}},u=function(t,n){var e=n.red,o=n.green,r=n.blue;_l.setValue(t,{red:e,green:o,blue:r})},a=bh({dom:{tag:"div",classes:[n("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),c=function(t,n){a.getOpt(t).each(()},s=Bd({factory:function(){var r={red:xr(A.some(255)),green:xr(A.some(255)),blue:xr(A.some(255)),hex:xr(A.some("ffffff"))},s=function(t){return r[t].get()},f=l=function(t){var n=t.red,e=t.green,o=t.blue;f("red",A.some(n)),f("green",A.some(e)),f("blue",A.some(o))},d=function(t,n){var e=n.event;"hex"!==e.type?f(e.type,A.none()):o(t)},m=function(t,n,e){var o=parseInt(e,10);f(n,A.some(o)),s("red").bind(().each((function(n){var e=function(t,n){var e=Ty(n);return cC.getField(t,"hex").each((),e}(t,n);Di(t,nC,{hex:e}),c(t,e)}))},g=function(t,n){var o=n.event;!function(t){return"hex"===t.type}(o)?m(t,o.type,o.value):t,o.value)},p=function(n){return{label:t(dC+n+".label"),description:t(dC+n+".description")}},h=p("red"),v=p("green"),b=p("blue"),y=p("hex");return uo(cC.sketch((),{apis:{updateHex:function(t,n){_l.setValue(t,{hex:n.value}),function(t,n){var e=Vy(n);u(t,e),l(e)}(t,n),c(t,n)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,n,e){t.updateHex(n,e)}},extraApis:{}});return s},gC=function(t,n){var e=tC.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[n("sv-palette-spectrum")]}}),o=tC.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[n("sv-palette-thumb")],innerHtml:"<div class="+n("sv-palette-inner-thumb")+' role="presentation"></div>'}}),r=function(t,n){var e=t.width,o=t.height,r=t.getContext("2d");if(null!==r){r.fillStyle=n,r.fillRect(0,0,e,o);var i=r.createLinearGradient(0,0,e,0);i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=i,r.fillRect(0,0,e,o);var u=r.createLinearGradient(0,0,0,o);u.addColorStop(0,"rgba(0,0,0,0)"),u.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=u,r.fillRect(0,0,e,o)}},i=Bd({factory:name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(t,n,e){!function(t,n){var e=t.components()[0].element.dom,o=Wy(n,100,100),i=Ry(o);r(e,zy(i))}(n,e)},setThumb:function(t,n,e){!function(t,n){var e=Uy(Vy(n));tC.setValue(t,{x:e.saturation,y:100-e.value})}(n,e)}},extraApis:{}});return i},pC=function(t,n){var e=Bd({name:"ColourPicker",configFields:[Ko("dom"),lr("onValidHex",p),lr("onInvalidHex",p)],factory:function(e){var o=mC(t,n,e.onValidHex,e.onInvalidHex),r=gC(0,n),i=function(t){return 100-t/360*100},u={paletteRgba:xr(Ny),paletteHue:xr(0)},a=bh(function(t,n){var e=tC.parts.spectrum({dom:{tag:"div",classes:[n("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=tC.parts.thumb({dom:{tag:"div",classes:[n("hue-slider-thumb")],attributes:{role:"presentation"}}});return tC.sketch({dom:{tag:"div",classes:[n("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:v({y:0})},components:[e,o],sliderBehaviours:yc([mp.config({})]),onChange:)}(0,n)),c=bh(r.sketch({})),s=bh(o.sketch({})),f=l=function(t,n){s.getOpt(t).each((function(t){o.updateHex(t,n)}))},d=function(t,n,e){a.getOpt(t).each(()},m=function(t,n){c.getOpt(t).each((function(t){r.setThumb(t,n)}))},g=function(t,n,e,o){!n,e),W(o,(function(o){o(t,n,e)}))};return{uid:e.uid,dom:e.dom,components:[c.asSpec(),a.asSpec(),s.asSpec()],behaviours:yc([cp("colour-picker-events",[Pi(nC,function(){var t=[f,d,m];return function(n,e){var o=e.event.hex,r=function(t){return Uy(Vy(t))}(o);g(n,o,r.hue,t)}}()),Pi(oC,function(){var t=[l];return function(n,e){var o=e.event.value,r=u.paletteHue.get(),i=Wy(r,o.x,100-o.y),a=jy(i);g(n,a,r,t)}}()),Pi(eC,function(){var t=[f,l];return function(n,e){var o=function(t){return(100-t)/100*360}(e.event.value.y),r=u.paletteRgba.get(),i=Uy(r),a=Wy(o,i.saturation,i.value),c=jy(a);g(n,c,o,t)}}())]),Rd.config({find:function(t){return s.getOpt(t)}}),np.config({mode:"acyclic"})])}}});return e},hC=vC=bC=yC={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},xC=wC=tinymce.util.Tools.resolve("tinymce.Resource"),SC=tinymce.util.Tools.resolve("tinymce.util.Tools"),kC=Co([lr("preprocess",b),lr("postprocess",b)]),CC=function(t,n,e){return _l.config(uo({store:{mode:"manual",getValue:n,setValue:e}},t.map((function(t){return{store:{initialValue:t}}})).getOr({})))},OC=function(t,n,e){return CC(t,(function(t){return n(t.element)}),()},_C=TC=CC,EC=function(t){return OC(t,Ki,Ji)},DC=BC=function(t,n){var e=function(t,n){n.stop()},o=function(t){return function(n,e){W(t,(function(t){t(n,e)}))}},r=function(t,n){if(!Kd.isDisabled(t)){var e=n.event.raw;u(t,e.dataTransfer.files)}},i=function(t,n){var e=n.event.raw.target;u(t,e.files)},u=function(e,o){_l.setValue(e,function(t,n){var e=SC.explode(n.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string"));return j(ut(t),()}(o,n)),Di(e,uw,{name:t.name})},a=bh({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:yc([cp("input-file-events",[Wi(Jr()),Wi(si())])])}),c=t.label.map((function(t){return iw(t,n)})),s=$x.parts.field({factory:{sketch:});return ew(c,s,["tox-form__group--stretched"],[])},MC=ou("alloy-fake-before-tabstop"),AC=ou("alloy-fake-after-tabstop"),FC=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:yc([mp.config({ignore:!0}),tw.config({})])}},IC=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[FC([MC]),t,FC([AC])],behaviours:yc([bC(1)])}},RC=function(t,n){Di(t,Xr(),{raw:{which:9,shiftKey:n}})},VC=function(t,n){var e=n.element;zu(e,MC)?RC(t,!0):zu(e,AC)&&RC(t,!1)},PC=function(t){return Fx(t,["."+MC,"."+AC].join(","),k)},HC=!(pn().browser.isIE()||pn().browser.isEdge()),zC=function(t,n){var e=HC&&t.sandboxed,o=_(_({},t.label.map((function(t){return{title:t}})).getOr({})),e?{sandbox:"allow-scripts allow-same-origin"}:{}),r=function(t){var n=xr("");return{getValue:function(t){return n.get()},setValue:function(e,o){if(t)Un(e.element,"srcdoc",o);else{Un(e.element,"src","javascript:''");var r=e.element.dom.contentWindow.document;r.open(),r.write(o),r.close()}n.set(o)}}}(e),i=t.label.map((function(t){return iw(t,n)})),u=$x.parts.field({factory:{sketch:});return ew(i,u,["tox-form__group--stretched"],[])},NC=function(t,n){return UC(document.createElement("canvas"),t,n)},LC=function(t){var n=NC(t.width,t.height);return WC(n).drawImage(t,0,0),n},WC=function(t){return t.getContext("2d")},UC=jC=function(t){return t.naturalWidth||t.width},GC=function(t){return t.naturalHeight||t.height},XC=function(t){return new Cw((function(n,e){(function(t){var n=t.split(","),e=/data:([^;]+)/.exec(n[0]);if(!e)return A.none();for(var o=e[1],r=n[1],i=1024,u=atob(r),a=u.length,c=Math.ceil(a/i),s=new Array(c),f=0;f<c;++f){for(var l=f*i,d=Math.min(l+i,a),m=new Array(d-l),g=l,p=0;g<d;++p,++g)m[p]=u[g].charCodeAt(0);s[f]=new Uint8Array(m)}return A.some(new Blob(s,{type:o}))})(t).fold((,n)}))},qC=function(t,n,e){return n=n||"image/png",d(HTMLCanvasElement.prototype.toBlob)?new Cw(():XC(t.toDataURL(n,e))},YC=function(t){return function(t){return new Cw((function(n,e){var o=URL.createObjectURL(t),r=new Image,i=u=a=r.addEventListener("load",u),r.addEventListener("error",a),r.src=o,r.complete&&setTimeout(u,0)}))}(t).then(()},KC=function(t){URL.revokeObjectURL(t.src)},JC=function(t,n,e){var o=n.type,r=v(o),i=v(e),u=function(n,e){return t.then((function(t){return function(t,n,e){return n=n||"image/png",t.toDataURL(n,e)}(t,n,e)}))};return{getType:r,toBlob:function(){return Cw.resolve(n)},toDataURL:i,toBase64:toAdjustedBlob:toAdjustedDataURL:u,toAdjustedBase64:toCanvas:function(){return t.then(LC)}}},$C=function(t){return t).then(()},QC=function(t,n){return qC(t,n).then(()},ZC=function(t,n,e){var o="string"===typeof t?parseFloat(t):t;return o>e?o=e:o<n&&(o=n),o},tO=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],nO=function(t,n){for(var e,o=[],r=new Array(25),i=0;i<5;i++){for(var u=0;u<5;u++)o[u]=n[u+5*i];for(u=0;u<5;u++){e=0;for(var a=0;a<5;a++)e+=t[u+5*a]*o[a];r[u+5*i]=e}}return r},eO=function(t,n){return t.toCanvas().then((function(e){return oO(e,t.getType(),n)}))},oO=function(t,n,e){var o=WC(t),r=function(t,n){for(var e,o,r,i,u=t.data,a=n[0],c=n[1],s=n[2],f=n[3],l=n[4],d=n[5],m=n[6],g=n[7],p=n[8],h=n[9],v=n[10],b=n[11],y=n[12],x=n[13],w=n[14],S=n[15],k=n[16],C=n[17],O=n[18],_=n[19],T=0;T<u.length;T+=4)e=u[T],o=u[T+1],r=u[T+2],i=u[T+3],u[T]=e*a+o*c+r*s+i*f+l,u[T+1]=e*d+o*m+r*g+i*p+h,u[T+2]=e*v+o*b+r*y+i*x+w,u[T+3]=e*S+o*k+r*C+i*O+_;return t}(o.getImageData(0,0,t.width,t.height),e);return o.putImageData(r,0,0),QC(t,n)},rO=function(t,n,e){var o=WC(t),r=o.getImageData(0,0,t.width,t.height),i=o.getImageData(0,0,t.width,t.height);return i=function(t,n,e){for(var o=r=Math.round(Math.sqrt(e.length)),i=Math.floor(r/2),u=t.data,a=n.data,c=t.width,s=t.height,f=0;f<s;f++)for(var l=0;l<c;l++){for(var d=0,m=0,g=0,p=0;p<r;p++)for(var h=0;h<r;h++){var v=o(l+h-i,0,c-1),b=4*(o(f+p-i,0,s-1)*c+v),y=e[p*r+h];d+=u[b]*y,m+=u[b+1]*y,g+=u[b+2]*y}var x=4*(f*c+l);a[x]=o(d,0,255),a[x+1]=o(m,0,255),a[x+2]=o(g,0,255)}return n}(r,i,e),o.putImageData(i,0,0),QC(t,n)},iO=function(t){return function(n,e){return eO(n,t([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],e))}},uO=function(t){return function(n){return eO(n,t)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1]),aO=iO((function(t,n){return n=ZC(255*n,-255,255),nO(t,[1,0,0,0,n,0,1,0,0,n,0,0,1,0,n,0,0,0,1,0,0,0,0,0,1])})),cO=iO((function(t,n){var e;return n=ZC(n,-1,1),e=(n*=100)<0?127+n/100*127:127*(e=0===(e=n%1)?tO[n]:tO[Math.floor(n)]*(1-e)+tO[Math.floor(n)+1]*e)+127,nO(t,[e/127,0,0,0,.5*(127-e),0,e/127,0,0,.5*(127-e),0,0,e/127,0,.5*(127-e),0,0,0,1,0,0,0,0,0,1])})),sO=function(t,n,e,o){return eO(t,function(t,n,e,o){return n=ZC(n,0,2),e=ZC(e,0,2),o=ZC(o,0,2),nO(t,[n,0,0,0,0,0,e,0,0,0,0,0,o,0,0,0,0,0,1,0,0,0,0,0,1])}([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],n,e,o))},fO=(qw=[0,-1,0,-1,5,-1,0,-1,0],function(t){return function(t,n){return t.toCanvas().then((function(e){return rO(e,t.getType(),n)}))}(t,qw)}),lO=(Yw=,dO=function(t,n,e){var o=jC(t),r=GC(t),i=n/o,u=e/r,a=!1;(i<.5||i>2)&&(i=i<.5?.5:2,a=!0),(u<.5||u>2)&&(u=u<.5?.5:2,a=!0);var c=mO(t,i,u);return a?c.then((function(t){return dO(t,n,e)})):c},mO=gO=function(t,n){void 0===n&&(n=2);var e=Math.pow(10,n),o=Math.round(t*e);return Math.ceil(o/e)},pO=hO=vO=bO=function(t){return uO(t)},yO=function(t){return fO(t)},xO=function(t,n){return lO(t,n)},wO=function(t,n){return aO(t,n)},SO=function(t,n){return cO(t,n)},kO=function(t,n){return function(t,n){return t.toCanvas().then((function(e){return hO(e,t.getType(),n)}))}(t,n)},CO=function(t,n,e,o,r){return function(t,n,e,o,r){return t.toCanvas().then(()}(t,n,e,o,r)},OO=function(t,n,e){return function(t,n,e){return t.toCanvas().then(()}(t,n,e)},_O=function(t,n){return function(t,n){return t.toCanvas().then(()}(t,n)},TO=function(t,n,e){return Eh(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:e},n)},EO=DO=function(t,n){return TO(t,n,[ap.config({})])},BO=function(t,n,e){return{dom:{tag:"span",innerHtml:e.translate(t),classes:[n+"__select-label"]},behaviours:yc([ap.config({})])}},MO=ou("toolbar.button.execute"),AO=((Kw={})[ai()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],Kw),FO=ou("update-menu-text"),IO=ou("update-menu-icon"),RO=function(t,n,e){var o=xr(p),r=t.text.map((),i=t.icon.map((),u=function(t,n){var e=_l.getValue(t);return mp.focus(e),Di(e,"keydown",{raw:n.event.raw}),cS.close(e),A.some(!0)},a=t.role.fold((function(){return{}}),(function(t){return{role:t}})),c=t.tooltip.fold((function(){return{}}),(),s=Eh("chevron-down",{tag:"div",classes:[n+"__select-chevron"]},e.providers.icons);return bh(cS.sketch(_(_(_({},t.uid?{uid:t.uid}:{}),a),{dom:{tag:"button",classes:[n,n+"--select"].concat(L(t.classes,()),attributes:_({},c)},components:ey([i.map((function(t){return t.asSpec()})),r.map((function(t){return t.asSpec()})),A.some(s)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:yc(E(E([],t.dropdownBehaviours,!0),[Yb((),Xb(),fS.config({}),ap.config({}),cp("dropdown-events",[Qb(t,o),Zb(t,o)]),cp("menubutton-update-display-text",[Pi(FO,(),Pi(IO,()])],!1)),eventOrder:uo(AO,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:yc([np.config({mode:"special",onLeft:u,onRight:u})]),lazySink:e.getSink,toggleClass:n+"--active",parts:{menu:Iv(0,t.columns,t.presets)},fetch:))).asSpec()},VO=function(t){return"separator"===t.type},PO={type:"separator"},HO=function(t,n){var e=X(t,(function(t,e){return function(t){return r(t)}(e)?""===e?t:"|"===e?t.length>0&&!VO(t[t.length-1])?t.concat([PO]):t:bt(n,e.toLowerCase())?t.concat([n[e.toLowerCase()]]):t:t.concat([e])}),[]);return e.length>0&&VO(e[e.length-1])&&e.pop(),e},zO=function(t,n){return function(t){return bt(t,"getSubmenuItems")}(t)?function(t,n){var e=t.getSubmenuItems(),o=NO(e,n);return{item:t,menus:uo(o.menus,Cr(t.value,o.items)),expansions:uo(o.expansions,Cr(t.value,t.value))}}(t,n):{item:t,menus:{},expansions:{}}},NO=function(t,n){var e=HO(r(t)?t.split(" "):t,n);return G(e,(function(t,e){var o=e),r=zO(o,n);return{menus:uo(t.menus,r.menus),items:[r.item].concat(t.items),expansions:uo(t.expansions,r.expansions)}}),{menus:{},expansions:{},items:[]})},LO=function(t,n,e,o){var r=ou("primary-menu"),i=NO(t,e.shared.providers.menuItems());if(0===i.items.length)return A.none();var u=Bx(r,i.items,n,e,o),a=lt(i.menus,(),c=uo(a,Cr(r,u));return A.from(Kp.tieredData(r,c,i.expansions))},WO=function(t){return{isDisabled:function(){return Kd.isDisabled(t)},setDisabled:function(n){return Kd.set(t,n)},setActive:isActive:},UO=function(t,n,e,o){return RO({text:t.text,icon:t.icon,tooltip:t.tooltip,role:o,fetch:onSetup:t.onSetup,getApi:WO,columns:1,presets:"normal",classes:[],dropdownBehaviours:[tw.config({})]},n,e.shared)},jO=function(t,n,e){var o=function(t){return ,r=return function(n){n(L(t,(function(t){var n=t.text.fold((function(){return{}}),(function(t){return{text:t}}));return _(_({type:t.type,active:!1},n),{onAction:o(t),onSetup:r(t)})})))}},GO=function(t,n,e,o,r,i){void 0===e&&(e=[]);var u=n.fold((function(){return{}}),(function(t){return{action:t}})),a=_({buttonBehaviours:yc([Yb((function(){return t.disabled||i.isDisabled()})),Xb(),tw.config({}),cp("button press",[Vi("click"),Vi("mousedown")])].concat(e)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},u),c=uo(a,{dom:o});return uo(c,{components:r})},XO=function(t,n,e,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map(().getOr({})},i=t.icon.map((function(t){return EO(t,e.icons)})),u=ey([i]);return GO(t,n,o,r,u,e)},qO=function(t,n,e,o){void 0===o&&(o=[]);var r=XO(t,A.some(n),e,o);return vh.sketch(r)},YO=function(t,n,e,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=e.translate(t.text),u=t.icon?t.icon.map((function(t){return EO(t,e.icons)})):A.none(),a=u.isSome()?ey([u]):[],c=u.isSome()?{}:{innerHtml:i},s=E(E(E(E([],t.primary||t.borderless?["tox-button"]:["tox-button","tox-button--secondary"],!0),u.isSome()?["tox-button--icon"]:[],!0),t.borderless?["tox-button--naked"]:[],!0),r,!0),f=_(_({tag:"button",classes:s},c),{attributes:{title:i}});return GO(t,n,o,f,a,e)},KO=function(t,n,e,o,r){void 0===o&&(o=[]),void 0===r&&(r=[]);var i=YO(t,A.some(n),e,o,r);return vh.sketch(i)},JO=function(t,n){return ,$O=function(t,n,e){if(0,n)){var o=t,r=_(_({},t),{onSetup:fetch:jO(o.items,(function(){return i}),e)}),i=bh(UO(r,"tox-tbtn",e,A.none()));return i.asSpec()}if(0,n)){var u=JO(t.name,n),a=_(_({},t),{borderless:!1});return KO(a,u,e.shared.providers,[])}console.error("Unknown footer button type: ",n)},QO=function(t,n){var e,o,r=JO(t.name,"custom");return e=A.none(),o=$x.parts.field(_({factory:vh},YO(t,A.some(r),n,[DC(""),hC()]))),ew(e,o,[],[])},ZO=v([lr("field1Name","field1"),lr("field2Name","field2"),Ea("onLockedChange"),Ca(["lockClass"]),lr("locked",!1),Bl("coupledFieldBehaviours",[Rd,_l])]),t_=function(t,n){return ed({factory:$x,name:t,overrides:function(t){return{fieldBehaviours:yc([cp("coupled-input-behaviour",[Pi(Yr(),(function(e){(function(t,n,e){return hd(t,n,e).bind(Rd.getCurrent)})(e,t,n).each(()}))])])}}})},n_=v([t_("field1","field2"),t_("field2","field1"),ed({factory:vh,schema:[Ko("dom")],name:"lock",overrides:)]),e_=Md({name:"FormCoupledInputs",configFields:ZO(),partFields:n_(),factory:function(t,n,e,o){return{uid:t.uid,dom:t.dom,components:n,behaviours:Ml(t.coupledFieldBehaviours,[Rd.config({find:A.some}),_l.config({store:{mode:"manual",getValue:function(n){var e,o=wd(n,t,["field1","field2"]);return(e={})[t.field1Name]=_l.getValue(o.field1()),e[t.field2Name]=_l.getValue(o.field2()),e},setValue:})]),apis:{getField1:function(n){return hd(n,t,"field1")},getField2:function(n){return hd(n,t,"field2")},getLock:function(n){return hd(n,t,"lock")}}}},apis:{getField1:function(t,n){return t.getField1(n)},getField2:function(t,n){return t.getField2(n)},getLock:function(t,n){return t.getLock(n)}}}),o_=function(t){var n=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null!==n){var e=parseFloat(n[1]),o=n[2];return Ue.value({value:e,unit:o})}return Ue.error(t)},r_=function(t,n){var e={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},o=function(t){return bt(e,t)};return t.unit===n?A.some(t.value):o(t.unit)&&o(n)?e[t.unit]===e[n]?A.some(t.value):A.some(t.value/e[t.unit]*e[n]):A.none()},i_=function(t){return A.none()},u_=function(t,n){var e=o_(t).toOptional(),o=o_(n).toOptional();return St(e,o,(function(t,n){return r_(t,n.unit).map(().map((function(t){return function(t,n){return (t,n.unit)})).getOr(i_)})).getOr(i_)},a_=function(t,n){var e=i_,o=ou("ratio-event"),r=function(t){return Eh(t,{tag:"span",classes:["tox-icon","tox-lock-icon__"+t]},n.icons)},i=e_.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:n.translate(t.label.getOr("Constrain proportions"))}},components:[r("lock"),r("unlock")],buttonBehaviours:yc([Kd.config({disabled:function(){return t.disabled||n.isDisabled()}}),Xb(),tw.config({})])}),u=function(t){return{dom:{tag:"div",classes:["tox-form__group"]},components:t}},a=function(e){return $x.parts.field({factory:xw,inputClasses:["tox-textfield"],inputBehaviours:yc([Kd.config({disabled:function(){return t.disabled||n.isDisabled()}}),Xb(),tw.config({}),cp("size-input-events",[Pi(jr(),(),Pi(Kr(),(function(n,e){Di(n,uw,{name:t.name})}))])]),selectOnFocus:!1})},c=function(t){return{dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(t)}}},s=e_.parts.field1(u([$x.parts.label(c("Width")),a(!0)])),f=e_.parts.field2(u([$x.parts.label(c("Height")),a(!1)]));return e_.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[s,f,u([c("&nbsp;"),i])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,n,o){o_(_l.getValue(t)).each((function(t){e(t).each((function(t){_l.setValue(n,function(t){var n,e={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},o=t.value.toFixed((n=t.unit)in e?e[n]:1);return-1!==o.indexOf(".")&&(o=o.replace(/\.?0*$/,"")),o+t.unit}(t))}))}))},coupledFieldBehaviours:yc([Kd.config({disabled:function(){return t.disabled||n.isDisabled()},onDisabled:function(t){e_.getField1(t).bind($x.getField).each(Kd.disable),e_.getField2(t).bind($x.getField).each(Kd.disable),e_.getLock(t).each(Kd.disable)},onEnabled:),Xb(),cp("size-input-events2",[Pi(o,(function(t,n){var o=n.event.isField1,r=o?e_.getField1(t):e_.getField2(t),i=o?e_.getField2(t):e_.getField1(t),u=r.map(_l.getValue).getOr(""),a=i.map(_l.getValue).getOr("");e=u_(u,a)}))])])})},c_={undo:v(ou("undo")),redo:v(ou("redo")),zoom:v(ou("zoom")),back:v(ou("back")),apply:v(ou("apply")),swap:v(ou("swap")),transform:v(ou("transform")),tempTransform:v(ou("temp-transform")),transformApply:v(ou("transform-apply"))},s_=v("save-state"),f_=v("disable"),l_=v("enable"),d_={formActionEvent:sw,saveState:s_,disable:f_,enable:l_},m_=function(t,n){var e=function(t,e,o,r){return bh(KO({name:t,text:t,disabled:o,primary:r,icon:A.none(),borderless:!1},e,n))},o=function(t,e,o,r){return bh(qO({name:t,icon:A.some(t),tooltip:A.some(e),disabled:r,primary:!1,borderless:!1},o,n))},r=function(t,n){t.map((function(t){var e=t.get(n);e.hasConfigured(Kd)&&Kd.disable(e)}))},i=function(t,n){t.map(()},u={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},a=p,c=s=function(t){return Ei(t,d_.disable())},f=l=function(t,n){s(t),c(t,c_.transform(),{transform:n}),f(t)},d=function(t){return ,m=function(t,n){s(t),c(t,c_.transformApply(),{transform:n,swap:d(t)}),f(t)},g=function(){return e("Back",(function(t){return c(t,c_.back(),{swap:d(t)})}),!1,!1)},h=function(){return bh({dom:{tag:"div",classes:["tox-spacer"]},behaviours:yc([Kd.config({})])})},b=function(){return e("Apply",(,!0,!0)},y=[g(),h(),e("Apply",(function(n){var e=function(n){var e=t.getRect();return CO(n,e.x,e.y,e.w,e.h)};m(n,e),t.hideCrop()}),!1,!0)],x=qx.sketch({dom:u,components:y.map((function(t){return t.asSpec()})),containerBehaviours:yc([cp("image-tools-crop-buttons-events",[Pi(d_.disable(),(function(t,n){r(y,t)})),Pi(d_.enable(),(function(t,n){i(y,t)}))])])}),w=bh(a_({name:"size",label:A.none(),constrain:!0,disabled:!1},n)),S=[g(),h(),w,h(),e("Apply",(function(t){w.getOpt(t).each((function(n){var e=_l.getValue(n),o=parseInt(e.width,10),parseInt(e.height,10));m(t,o)}))}),!1,!0)],k=qx.sketch({dom:u,components:S.map((function(t){return t.asSpec()})),containerBehaviours:yc([cp("image-tools-resize-buttons-events",[Pi(d_.disable(),(function(t,n){r(S,t)})),Pi(d_.enable(),(function(t,n){i(S,t)}))])])}),C=O=C(kO,"h"),_=C(kO,"v"),T=C(_O,-90),E=C(_O,90),D=function(t,n){!function(t,n){s(t),c(t,c_.tempTransform(),{transform:n}),f(t)}(t,n)},B=[g(),h(),o("flip-horizontally","Flip horizontally",(function(t){D(t,O)}),!1),o("flip-vertically","Flip vertically",(function(t){D(t,_)}),!1),o("rotate-left","Rotate counterclockwise",(function(t){D(t,T)}),!1),o("rotate-right","Rotate clockwise",(function(t){D(t,E)}),!1),h(),b()],M=qx.sketch({dom:u,components:B.map((function(t){return t.asSpec()})),containerBehaviours:yc([cp("image-tools-fliprotate-buttons-events",[Pi(d_.disable(),(function(t,n){r(B,t)})),Pi(d_.enable(),(function(t,n){i(B,t)}))])])}),F=function(t,e,o,r,i){var u=tC.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:n.translate(t)}}),a=tC.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),c=tC.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return bh(tC.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:o,maxX:i,getInitialValue:v({x:r})},components:[u,a,c],sliderBehaviours:yc([mp.config({})]),onChoose:e}))},I=function(t,n,e,o,r){return F(t,(function(t,e,o){var r=C(n,o.x/100);l(t,r)}),e,o,r)},R=function(t,n,e,o,a){var c=function(t,n,e,o,r){return[g(),I(t,n,e,o,r),b()]}(t,n,e,o,a);return qx.sketch({dom:u,components:c.map((function(t){return t.asSpec()})),containerBehaviours:yc([cp("image-tools-filter-panel-buttons-events",[Pi(d_.disable(),(function(t,n){r(c,t)})),Pi(d_.enable(),(function(t,n){i(c,t)}))])])})},V=[g(),h(),b()],P=qx.sketch({dom:u,components:V.map((function(t){return t.asSpec()}))}),H=R("Brightness",wO,-100,0,100),z=R("Contrast",SO,-100,0,100),N=R("Gamma",xO,-100,0,100),L=function(t,n,e){return function(o){return o,t,n,e)}},W=function(t){return F(t,(function(t,n,e){var o=U.getOpt(t),r=G.getOpt(t),i=j.getOpt(t);o.each((function(n){r.each((function(e){i.each((function(o){var r=_l.getValue(n).x/100,i=_l.getValue(o).x/100,u=_l.getValue(e).x/100,a=L(r,i,u);l(t,a)}))}))}))}),0,100,200)},U=W("R"),j=W("G"),G=W("B"),X=[g(),U,j,G,b()],q=qx.sketch({dom:u,components:X.map((function(t){return t.asSpec()}))}),Y=function(t,n,e){return ,K=A.some(yO),J=A.some(bO),$=[o("crop","Crop",Y(x,A.none(),(function(n){t.showCrop()})),!1),o("resize","Resize",Y(k,A.none(),(),!1),o("orientation","Orientation",Y(M,A.none(),a),!1),o("brightness","Brightness",Y(H,A.none(),a),!1),o("sharpen","Sharpen",Y(P,K,a),!1),o("contrast","Contrast",Y(z,A.none(),a),!1),o("color-levels","Color levels",Y(q,A.none(),a),!1),o("gamma","Gamma",Y(N,A.none(),a),!1),o("invert","Invert",Y(P,J,a),!1)],Q=qx.sketch({dom:u,components:$.map((function(t){return t.asSpec()}))}),Z=qx.sketch({dom:{tag:"div"},components:[Q],containerBehaviours:yc([ap.config({})])}),tt=bh(Z);return{memContainer:tt,getApplyButton:},g_=tinymce.util.Tools.resolve("tinymce.geom.Rect"),p_=tinymce.util.Tools.resolve("tinymce.util.Observable"),h_=tinymce.util.Tools.resolve("tinymce.util.VK"),v_=function(t){if(function(t){return l(t.changedTouches)}(t))for(var n="screenX screenY pageX pageY clientX clientY".split(" "),e=0;e<n.length;e++)t[n[e]]=t.changedTouches[0][n[e]]};function b_(t,n){var e,o,r,i,u,a,c,s=[],f=[],d=null!==(e=n.document)&&void 0!==e?e:document,m=null!==(o=n.root)&&void 0!==o?o:d,g=At.fromDom(d),p=At.fromDom(m.getElementById(null!==(r=n.handle)&&void 0!==r?r:t)),h=function(t){var e=t.raw,o=function(t){var n=Math.max,e=t.documentElement,o=t.body,r=n(e.scrollWidth,o.scrollWidth),i=n(e.clientWidth,o.clientWidth),u=n(e.offsetWidth,o.offsetWidth),a=n(e.scrollHeight,o.scrollHeight),c=n(e.clientHeight,o.clientHeight);return{width:r<u?i:r,height:a<n(e.offsetHeight,o.offsetHeight)?c:a}}(d);v_(e),t.prevent(),u=e.button,a=e.screenX,c=e.screenY;var r=te(p,"cursor");i=At.fromTag("div",d),Qn(i,{position:"absolute",top:"0",left:"0",width:o.width+"px",height:o.height+"px","z-index":"2147483647",opacity:"0.0001",cursor:r}),Oe(Ln(g),i),f.push(ts(g,"mousemove",v),ts(g,"touchmove",v),ts(g,"mouseup",b),ts(g,"touchend",b)),n.start(e)},v=function(t){var e=t.raw;if(v_(e),e.button!==u)return b(t);e.deltaX=e.screenX-a,e.deltaY=e.screenY-c,t.prevent(),n.drag(e)},b=return s.push(ts(p,"mousedown",h),ts(p,"touchstart",h)),{destroy:}var y_=0,x_=function(t,n,e,o,r){var i,u=[],a="tox-crid-"+y_++,c=At.fromDom(o),s=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],f=["top","right","bottom","left"],l=d=function(n,o,r,i){var u=o.x+r*n.deltaX,a=o.y+i*n.deltaY,c=Math.max(20,o.w+r*n.deltaW),s=Math.max(20,o.h+i*n.deltaH),f=t=g_.clamp({x:u,y:a,w:c,h:s},e,"move"===n.name);f=l(e,f),h.fire("updateRect",{rect:f}),p(f)},m=function(t){var e=function(t,n){ca(c,"#"+a+"-"+t).each(()};W(s,(),e("top",{x:n.x,y:n.y,w:n.w,h:t.y-n.y}),e("right",{x:t.x+t.w,y:t.y,w:n.w-t.x-t.w+n.x,h:t.h}),e("bottom",{x:n.x,y:t.y+t.h,w:n.w,h:n.h-t.y-t.h+n.y}),e("left",{x:n.x,y:t.y,w:t.x-n.x,h:t.h}),e("move",t)},g=p=function(t){var n,o;g((n=e,{x:(o=t).x+n.x,y:o.y+n.y,w:o.w,h:o.h}))};!function(){var n=At.fromTag("div");jn(n,{id:a,class:"tox-croprect-container",role:"grid","aria-dropeffect":"execute"}),Oe(c,n),W(f,(),W(s,(),i=L(s,(),m(t);var e=function(t){Un(t.target,"aria-grabbed","focus"===t.raw.type?"true":"false")};u.push(ts(c,"focusin",e),ts(c,"focusout",e),ts(c,"keydown",(function(n){var e;W(s,();var o=function(t,n,o,r,i){t.stopPropagation(),t.preventDefault(),d(e,o,r,i)};switch(n.raw.keyCode){case h_.LEFT:o(n,0,t,-10,0);break;case h_.RIGHT:o(n,0,t,10,0);break;case h_.UP:o(n,0,t,0,-10);break;case h_.DOWN:o(n,0,t,0,10);break;case h_.ENTER:case h_.SPACEBAR:n.prevent(),r()}})))}();var h=_(_({},p_),{toggleVisibility:setClampRect:function(n){e=n,m(t)},setRect:g,getInnerRect:function(){return l(e,t)},setInnerRect:p,setViewPortRect:destroy:);return h},w_=function(t){var n=bh({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),e=xr(1),o=function(){var t=Jc();return _(_({},t),{run:function(n){return t.get().each(n)}})}(),r=xr({x:0,y:0,w:1,h:1}),i=xr({x:0,y:0,w:1,h:1}),u=function(t,i){s.getOpt(t).each(()},a=function(t,n){var o,a=At.fromTag("img");return Un(a,"src",n),(o=a.dom,new jh(()).then((function(){t.getSystem().isConnected()&&s.getOpt(t).map((function(t){var n=$u({element:a});ap.replaceAt(t,1,A.some(n));var o=i.get(),c={x:0,y:0,w:a.dom.naturalWidth,h:a.dom.naturalHeight};i.set(c);var f=g_.inflate(c,-20,-20);r.set(f),o.w===c.w&&o.h===c.h||function(t,n){s.getOpt(t).each((function(t){var o=ve(t.element),r=se(t.element),i=n.dom.naturalWidth,u=n.dom.naturalHeight,a=Math.min(o/i,r/u);a>=1?e.set(1):e.set(a)}))}(t,a),u(t,a)}))}))},c=qx.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[n.asSpec(),{dom:{tag:"img",attributes:{src:t}}},{dom:{tag:"div"},behaviours:yc([cp("image-panel-crop-events",[Gi((),Xi((function(){o.clear()}))])])}],containerBehaviours:yc([ap.config({}),cp("image-panel-events",[Gi((function(n){a(n,t)}))])])}),s=bh(c);return{memContainer:s,updateSrc:a,zoom:function(t,n){var o=e.get(),r=n>0?Math.min(2,o+.1):Math.max(.1,o-.1);e.set(r),s.getOpt(t).each(()},showCrop:function(){o.run((function(t){t.toggleVisibility(!0)}))},hideCrop:getRect:function(){return r.get()},getMeasurements:},S_=function(t,n,e,o,r){return qO({name:t,icon:A.some(n),disabled:e,tooltip:A.some(t),primary:!1,borderless:!1},o,r)},k_=var C_,O_=function(t){var n=xr(t),e=Qc(),o=function(){var t=[],n=-1,e=o=return{data:t,add:undo:redo:canUndo:e,canRedo:o}}();o.add(t);var r=function(t){n.set(t)},i=u=function(t){URL.revokeObjectURL(t.url)},a=c=function(t){var n=i(t);r(n);var e,a=o.add(n).removed;return e=a,SC.each(e,u),n.url};return{getBlobState:function(){return n.get()},setBlobState:r,addBlobState:c,getTempState:updateTempState:addTempState:applyTempState:destroyTempState:a,undo:function(){var t=o.undo();return r(t),t.url},redo:getHistoryStates:},__=function(t,n){var e=O_(t.currentState),o=function(t){var n=e.getHistoryStates();d.updateButtonUndoStates(t,n.undoEnabled,n.redoEnabled),Di(t,d_.formActionEvent,{name:d_.saveState(),value:n.undoEnabled})},r=function(t){return t.toBlob()},i=function(t){Di(t,d_.formActionEvent,{name:d_.disable(),value:{}})},u=a=c=function(t,n,e,c,s){i(t),function(t){return $C(t)}(n).then(e).then(r).then(c).then((function(n){return a(t,n)})).then(().catch(()},s=function(t,n,o){var r=e.getBlobState().blob;c(t,r,n,(function(t){return e.updateTempState(t)}),o)},f=function(t){var n=e.getBlobState().url;return e.destroyTempState(),o(t),n},l=w_(t.currentState.url),d=function(t){var n=bh(S_("Undo","undo",!0,(function(t){Di(t,c_.undo(),{direction:1})}),t)),e=bh(S_("Redo","redo",!0,(function(t){Di(t,c_.redo(),{direction:1})}),t)),o=qx.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[n.asSpec(),e.asSpec(),S_("Zoom in","zoom-in",!1,(,t),S_("Zoom out","zoom-out",!1,(,t)]});return{container:o,updateButtonUndoStates:}(n),m=m_(l,n);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[m.memContainer.asSpec(),l.memContainer.asSpec(),d.container],behaviours:yc([_l.config({store:{mode:"manual",getValue:function(){return e.getBlobState()}}}),cp("image-tools-events",[Pi(c_.undo(),(function(t,n){var r=e.undo();a(t,r).then((function(n){u(t),o(t)}))})),Pi(c_.redo(),(),Pi(c_.zoom(),(function(t,n){var e=n.event.direction;l.zoom(t,e)})),Pi(c_.back(),(function(t,n){!function(t){var n=f(t);a(t,n).then((function(n){u(t)}))}(t),(0,n.event.swap)(),l.hideCrop()})),Pi(c_.apply(),(),Pi(c_.transform(),(),Pi(c_.tempTransform(),(function(t,n){return function(t,n){var o=e.getTempState().blob;c(t,o,n,(function(t){return e.addTempState(t)}),p)}(t,n.event.transform)})),Pi(c_.transformApply(),(function(t,n){return function(t,n,o){var r=e.getBlobState().blob;c(t,r,n,(,o)}(t,n.event.transform,n.event.swap)})),Pi(c_.swap(),(function(t,n){!t);var e=n.event.transform,o=n.event.swap;e.fold((function(){o()}),(function(n){s(t,n,o)}))}))]),hC()])}},T_=E_="data-value",D_=B_=M_=Bd({name:"HtmlSelect",configFields:[Ko("options"),Tl("selectBehaviours",[mp,_l]),lr("selectClasses",[]),lr("selectAttributes",{}),rr("data")],factory:),A_=function(t,n){var e=t.label.map((function(t){return iw(t,n)})),o=[Kd.config({disabled:function(){return t.disabled||n.isDisabled()}}),Xb(),np.config({mode:"execution",useEnter:!0!==t.multiline,useControlEnter:!0===t.multiline,execute:function(t){return Ei(t,fw),A.some(!0)}}),cp("textfield-change",[Pi(Yr(),(function(n,e){Di(n,uw,{name:t.name})})),Pi(ii(),(function(n,e){Di(n,uw,{name:t.name})}))]),tw.config({})],r=t.validation.map(().toArray(),i=t.placeholder.fold(v({}),(function(t){return{placeholder:n.translate(t)}})),u=t.inputMode.fold(v({}),(function(t){return{inputmode:t}})),a=_(_({},i),u),c=$x.parts.field({tag:!0===t.multiline?"textarea":"input",inputAttributes:a,inputClasses:[t.classname],inputBehaviours:yc(K([o,r])),selectOnFocus:!1,factory:xw}),s=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),f=[Kd.config({disabled:function(){return t.disabled||n.isDisabled()},onDisabled:function(t){$x.getField(t).each(Kd.disable)},onEnabled:function(t){$x.getField(t).each(Kd.enable)}}),Xb()];return ew(e,c,s,f)},F_=Object.freeze({__proto__:null,events:),I_=function(t){var n=xr(null);return xu({readState:setTimer:function(t){n.set(t)},cancel:)},R_=Object.freeze({__proto__:null,throttle:I_,init:function(t){return t.stream.streams.state(t)}}),V_=[Jo("stream",Go("mode",{throttle:[Ko("delay"),lr("stopEvent",!0),Ba("streams",{setup:state:I_})]})),lr("event","input"),rr("cancelEvent"),Ea("onStream")],P_=wc({fields:V_,name:"streaming",active:F_,state:R_}),H_=z_=function(t,n){var e=t.element,o=Wu(e),r=e.dom;"number"!==Gn(e,"type")&&n(r,o)},N_=L_=function(t,n,e){if(t.selectsOver){var o=_l.getValue(n),r=t.getDisplayText(o),i=_l.getValue(e);return 0===t.getDisplayText(i).indexOf(r)?A.some((function(){H_(0,n,e),function(t,n){z_(t,()}(n,r.length)})):A.none()}return A.none()},W_=v("alloy.typeahead.itemexecute"),U_=v([rr("lazySink"),Ko("fetch"),lr("minChars",5),lr("responseTime",1e3),_a("onOpen"),lr("getHotspot",A.some),lr("getAnchorOverrides",v({})),lr("layouts",A.none()),lr("eventOrder",{}),yr("model",{},[lr("getDisplayText",(),lr("selectsOver",!0),lr("populateFromBrowse",!0)]),_a("onSetValue"),Ta("onExecute"),_a("onItemExecute"),lr("inputClasses",[]),lr("inputAttributes",{}),lr("inputStyles",{}),lr("matchWidth",!0),lr("useMinWidth",!1),lr("dismissOnBlur",!0),Ca(["openClass"]),rr("initialData"),Tl("typeaheadBehaviours",[mp,_l,P_,np,Op,jw]),qo("previewing",()].concat(hw()).concat(iS())),j_=v([od({schema:[ka()],name:"menu",overrides:function(t){return{fakeFocus:!0,onHighlight:function(n,e){t.previewing.get()?n.getSystem().getByUid(t.uid).each((function(o){L_(t.model,o,e).fold((,()})):n.getSystem().getByUid(t.uid).each((function(n){t.model.populateFromBrowse&&H_(t.model,n,e)})),t.previewing.set(!1)},onExecute:onHover:}})]),G_=Md({name:"Typeahead",configFields:U_(),partFields:j_(),factory:function(t,n,e,o){var r=function(n,e,r){t.previewing.set(!1);var i=jw.getCoupled(n,"sandbox");if(ul.isOpen(i))Rd.getCurrent(i).each(();else{$w(t,u(n),n,i,o,(function(t){Rd.getCurrent(t).each(r)}),kw.HighlightFirst).get(p)}},i=vw(t),u=function(t){return function(n){return n.map((function(n){var e=ht(n.menus),o=J(e,();return _l.getState(t).update(L(o,(function(t){return t.data}))),n}))}},a=[mp.config({}),_l.config({onSetValue:t.onSetValue,store:_({mode:"dataset",getDataKey:function(t){return Wu(t.element)},getFallbackEntry:setValue:,t.initialData.map((function(t){return Cr("initialValue",t)})).getOr({}))}),P_.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:function(n,e){var r=jw.getCoupled(n,"sandbox");if(mp.isFocused(n)&&Wu(n.element).length>=t.minChars){var i=Rd.getCurrent(r).bind((function(t){return um.getHighlighted(t).map(_l.getValue)}));t.previewing.set(!0);$w(t,u(n),n,r,o,(,kw.HighlightFirst).get(p)}},cancelEvent:di()}),np.config({mode:"special",onDown:function(t,n){return r(t,n,um.highlightFirst),A.some(!0)},onEscape:onUp:onEnter:),Op.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),jw.config({others:{sandbox:}),cp("typeaheadevents",[Yi((function(n){var e=p;Zw(t,u(n),n,o,e,kw.HighlightFirst).get(p)})),Pi(W_(),()].concat(t.dismissOnBlur?[Pi(ri(),()]:[]))];return{uid:t.uid,dom:yw(uo(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:_(_({},i),Dl(t.typeaheadBehaviours,a)),eventOrder:t.eventOrder}}}),X_=q_=function(t){return X_(Dw(t))},Y_=q_,K_={type:"separator"},J_=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:p}},$_=function(t,n){return{type:"menuitem",value:n,text:t,meta:{attach:void 0},onAction:p}},Q_=function(t,n){return function(t){return L(t,J_)}(t,n))},Z_=function(t){return Q_("header",t.targets)},tT=nT=function(t){return A.from(t.anchorTop).map((function(t){return $_("<top>",t)})).toArray()},eT=function(t){return A.from(t.anchorBottom).map(().toArray()},oT=function(t,n){var e=t.toLowerCase();return j(n,(function(t){var n=void 0!==t.meta&&void 0!==t.meta.text?t.meta.text:t.text;return Ot(n.toLowerCase(),e)||Ot(t.value.toLowerCase(),e)}))},rT=function(t,n,e){var o=_l.getValue(n),r=void 0!==o.meta.text?o.meta.text:o.value;return e.getLinkInformation().fold((function(){return[]}),(function(n){var o,i=oT(r,function(t){return L(t,(function(t){return $_(t,t)}))}(e.getHistory(t)));return"file"===t?(o=[i,oT(r,Z_(n)),oT(r,K([nT(n),tT(n),eT(n)]))],X(o,(,[])):i}))},iT=ou("aria-invalid"),uT=function(t){return ,aT={bar:uT((function(t,n){return function(t,n){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:L(t.items,n.interpreter)}}(t,n.shared)})),collection:uT((function(t,n){return pw(t,n.shared.providers)})),alertbanner:uT((function(t,n){return function(t,n){return qx.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+t.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[vh.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:Oh(t.icon,n.icons),attributes:{title:n.translate(t.iconTooltip)}},action:buttonBehaviours:yc([_h()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:n.translate(t.text)}}]})}(t,n.shared.providers)})),input:uT((function(t,n){return function(t,n){return A_({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:t.disabled,classname:"tox-textfield",validation:A.none(),maximized:t.maximized},n)}(t,n.shared.providers)})),textarea:uT((function(t,n){return function(t,n){return A_({name:t.name,multiline:!0,label:t.label,inputMode:A.none(),placeholder:t.placeholder,flex:!0,disabled:t.disabled,classname:"tox-textarea",validation:A.none(),maximized:t.maximized},n)}(t,n.shared.providers)})),label:uT((function(t,n){return function(t,n){var e={dom:{tag:"label",innerHtml:n.providers.translate(t.label),classes:["tox-label"]}},o=L(t.items,n.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[e].concat(o),behaviours:yc([hC(),ap.config({}),EC(A.none()),np.config({mode:"acyclic"})])}}(t,n.shared)})),iframe:function(t){return ((function(t,n){return zC(t,n.shared.providers)})),button:uT((function(t,n){return QO(t,n.shared.providers)})),checkbox:uT((function(t,n){return function(t,n){var e=_l.config({store:{mode:"manual",getValue:setValue:}),o=function(t){return t.element.dom.click(),A.some(!0)},r=$x.parts.field({factory:{sketch:b},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:yc([hC(),Kd.config({disabled:function(){return t.disabled||n.isDisabled()}}),tw.config({}),mp.config({}),e,np.config({mode:"special",onEnter:o,onSpace:o,stopSpaceKeyup:!0}),cp("checkbox-events",[Pi(Kr(),(function(n,e){Di(n,uw,{name:t.name})}))])])}),i=$x.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:n.translate(t.label)},behaviours:yc([fS.config({})])}),u=function(t){return Eh("checked"===t?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t]},n.icons)},a=bh({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[u("checked"),u("unchecked")]});return $x.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[r,a.asSpec(),i],fieldBehaviours:yc([Kd.config({disabled:function(){return t.disabled||n.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(t){$x.getField(t).each(Kd.disable)},onEnabled:function(t){$x.getField(t).each(Kd.enable)}}),Xb()])})}(t,n.shared.providers)})),colorinput:uT((),colorpicker:uT((function(t){var n=function(t){return"tox-"+t},e=pC(xC,n),o=bh(e.sketch({dom:{tag:"div",classes:[n("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function(t){Di(t,sw,{name:"hex-valid",value:!0})},onInvalidHex:));return{dom:{tag:"div"},components:[o.asSpec()],behaviours:yc([_l.config({store:{mode:"manual",getValue:setValue:}),hC()])}})),dropzone:uT((function(t,n){return BC(t,n.shared.providers)})),grid:uT((function(t,n){return function(t,n){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+t.columns+"col"]},components:L(t.items,n.interpreter)}}(t,n.shared)})),listbox:uT((function(t,n){return function(t,n){var e=n.shared.providers,o=rt(t.items).filter(T_),r=t.label.map((function(t){return iw(t,e)})),i=$x.parts.field({dom:{},factory:{sketch:function(e){return RO({uid:e.uid,text:o.map((function(t){return t.text})),icon:A.none(),tooltip:t.label,role:A.none(),fetch:function(e,o){var r=D_(e,t.name,t.items,_l.getValue(e));o(LO(r,hv.CLOSE_ON_EXECUTE,n,!1))},onSetup:v(p),getApi:v({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[tw.config({}),_l.config({store:{mode:"manual",initialValue:o.map((function(t){return t.value})).getOr(""),getValue:function(t){return Gn(t.element,E_)},setValue:})]},"tox-listbox",n.shared)}}}),u={dom:{tag:"div",classes:["tox-listboxfield"]},components:[i]};return $x.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:K([r.toArray(),[u]]),fieldBehaviours:yc([Kd.config({disabled:v(t.disabled),onDisabled:function(t){$x.getField(t).each(Kd.disable)},onEnabled:function(t){$x.getField(t).each(Kd.enable)}})])})}(t,n)})),selectbox:uT((function(t,n){return function(t,n){var e=L(t.items,(),o=t.label.map((function(t){return iw(t,n)})),r=$x.parts.field({dom:{},selectAttributes:{size:t.size},options:e,factory:M_,selectBehaviours:yc([Kd.config({disabled:function(){return t.disabled||n.isDisabled()}}),tw.config({}),cp("selectbox-change",[Pi(Kr(),()])])}),i=t.size>1?A.none():A.some(Eh("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},n.icons)),u={dom:{tag:"div",classes:["tox-selectfield"]},components:K([[r],i.toArray()])};return $x.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:K([o.toArray(),[u]]),fieldBehaviours:yc([Kd.config({disabled:function(){return t.disabled||n.isDisabled()},onDisabled:function(t){$x.getField(t).each(Kd.disable)},onEnabled:),Xb()])})}(t,n.shared.providers)})),sizeinput:uT((function(t,n){return a_(t,n.shared.providers)})),urlinput:uT((function(t,n){return function(t,n,e){var o,r=n.shared.providers,i=u=$x.parts.field({factory:G_,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":iT,type:"url"},minChars:0,responseTime:0,fetch:function(o){var r=rT(t.filetype,o,e),i=LO(r,hv.BUBBLE_TO_SANDBOX,n,!1);return Bw(i)},getHotspot:function(t){return d.getOpt(t)},onSetValue:typeaheadBehaviours:yc(K([e.getValidationHandler().map((function(n){return Nw.config({getRoot:function(t){return On(t.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:,validator:{validate:function(e){var o=_l.getValue(e);return Y_((function(e){n({type:t.filetype,url:o.value},(function(t){if("invalid"===t.status){var n=Ue.error(t.message);e(n)}else{var o=Ue.value(t.message);e(o)}}))}))},validateOnLoad:!1}})})).toArray(),[Kd.config({disabled:function(){return t.disabled||r.isDisabled()}}),tw.config({}),cp("urlinput-events",K(["file"===t.filetype?[Pi(Yr(),()]:[],[Pi(Kr(),(function(n){Di(n,uw,{name:t.name}),i(n)})),Pi(ii(),()]]))]])),eventOrder:(o={},o[Yr()]=["streaming","urlinput-events","invalidating"],o),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:n.shared.getSink,parts:{menu:Iv(0,0,"normal")},onExecute:onItemExecute:),a=t.label.map((function(t){return iw(t,r)})),c=bh(function(t,n,e,o){return void 0===e&&(e=t),void 0===o&&(o=t),Eh(e,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+t],attributes:_({title:r.translate(o),"aria-live":"polite"},n.fold((function(){return{}}),(function(t){return{id:t}})))},r.icons)}("invalid",A.some(iT),"warning")),s=bh({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[c.asSpec()]}),f=e.getUrlPicker(t.filetype),l=ou("browser.url.event"),d=bh({dom:{tag:"div",classes:["tox-control-wrap"]},components:[u,s.asSpec()],behaviours:yc([Kd.config({disabled:function(){return t.disabled||r.isDisabled()}})])}),m=bh(KO({name:t.name,icon:A.some("browse"),text:t.label.getOr(""),disabled:t.disabled,primary:!1,borderless:!0},(function(t){return Ei(t,l)}),r,[],["tox-browse-url"]));return $x.sketch({dom:rw([]),components:a.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:K([[d.asSpec()],f.map((function(){return m.asSpec()})).toArray()])}]),fieldBehaviours:yc([Kd.config({disabled:onDisabled:function(t){$x.getField(t).each(Kd.disable),m.getOpt(t).each(Kd.disable)},onEnabled:),Xb(),cp("url-input-events",[Pi(l,()])])})}(t,n,n.urlinput)})),customeditor:uT((function(t){var n=Qc(),e=bh({dom:{tag:t.tag}}),o=Qc();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:yc([cp("custom-editor-events",[Gi((function(r){e.getOpt(r).each((function(e){(!function(t){return bt(t,"init")}(t)?wC.load(t.scriptId,t.scriptUrl).then(():t.init(e.element.dom)).then(()}))}))]),_l.config({store:{mode:"manual",getValue:setValue:}),hC()]),components:[e.asSpec()]}})),htmlpanel:uT((),imagetools:uT((),table:uT((function(t,n){return function(t,n){var e,o,r=function(t){return{dom:{tag:"th",innerHtml:n.translate(t)}}},i=u=return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(o=t.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:L(o,r)}]}),(e=t.cells,{dom:{tag:"tbody"},components:L(e,u)})],behaviours:yc([tw.config({}),mp.config({})])}}(t,n.shared.providers)})),panel:uT((function(t,n){return t,n)}))},cT={field:,sT=function(t,n,e){var o=uo(e,{shared:{interpreter:function(n){return fT(t,n,o)}}});return fT(t,n,o)},fT=lT={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},dT=function(t,n,e){var o={maxHeightFunction:ms()};return ,mT=function(t,n,e){return ,gT=function(t,n){return ,pT=function(t){return ,hT=function(t,n,e){var o=Ib(t),r=function(){return At.fromDom(t.getBody())},i=u=function(){return o||!e()};return{inlineDialog:dT(i,n,u),banner:mT(i,n,u),cursor:gT(t,r),node:pT(r)}},vT=function(t){return ,bT=function(t){return function(){return Qy(t)}},yT=function(t){return function(){return Zy(t)}},xT=wT=ST=function(t){return function(){return function(t){return t.getParam("draggable_modal",!1,"boolean")}(t)}},kT=CT=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],OT=function(t){return X(t,(function(t,n){if(bt(n,"items")){var e=OT(n.items);return{customFormats:t.customFormats.concat(e.customFormats),formats:t.formats.concat([{title:n.title,items:e.formats}])}}if(function(t){return bt(t,"inline")}(n)||function(t){return bt(t,"block")}(n)||function(t){return bt(t,"selector")}(n)){var o="custom-"+(r(n.name)?n.name:n.title.toLowerCase());return{customFormats:t.customFormats.concat([{name:o,format:n}]),formats:t.formats.concat([{title:n.title,format:o,icon:n.icon}])}}return _(_({},t),{formats:t.formats.concat(n)})}),{customFormats:[],formats:[]})},_T=function(t){return t).map((function(n){var e=function(t,n){var e=OT(n),o=function(n){W(n,()};return t.formatter?o(e.customFormats):t.on("init",(),e.formats}(t,n);return t)?CT.concat(e):e})).getOr(CT)},TT=function(t,n,e){var o={type:"formatter",isSelected:n(t.format),getStylePreview:e(t.format)};return uo(t,o)},ET=function(t,n,e,o){var i=function(n){return L(n,(function(n){var u=ct(n);if(yt(n,"items")){var a=i(n.items);return uo(n),{getStyleItems:v(a)})}return yt(n,"format")?function(t){return TT(t,e,o)}(n):1===u.length&&P(u,"title")?uo(n,{type:"separator"}):function(n){var i=r(n.name)?n.name:ou(n.title),u="custom-"+i,a={type:"formatter",format:u,isSelected:e(u),getStylePreview:o(u)},c=uo(n,a);return t.formatter.register(i,c),c}(n)}))};return i(n)},DT=function(t){var n=e=function(n){return function(){var e=t.formatter.get(n);return void 0!==e?A.some({tag:e.length>0&&(e[0].inline||e[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(n))}):A.none()}},o=function(t){var n=t.items;return void 0!==n&&n.length>0?J(n,o):[t.format]},r=xr([]),i=xr([]),u=xr([]),a=xr([]),c=xr(!1);t.on("PreInit",(),t.on("addStyleModifications",();return{getData:function(){var t=c.get()?[]:r.get(),n=u.get();return t.concat(n)},getFlattenedKeys:},BT=SC.trim,MT=function(t){return function(n){if(n)){if(n.contentEditable===t)return!0;if(n.getAttribute("data-mce-contenteditable")===t)return!0}return!1}},AT=MT("true"),FT=MT("false"),IT=RT=VT=function(t){return function(t){return t&&"A"===t.nodeName&&void 0!==(t.id||t.name)}(t)&&HT(t)},PT=HT=zT=NT=function(t){var n=t);return IT("header",RT(t),"#"+n,t),()},LT=WT=function(t){var n,e,o=(n="h1,h2,h3,h4,h5,h6,a:not([href])",e=t,L(of(At.fromDom(e),n),(function(t){return t.dom})));return o},UT=jT=function(t){var n=WT(t);return j(function(t){return L(j(t,zT),NT)}(n).concat(n)),UT)},GT="tinymce-url-history",XT=qT=function(t){return i(t)&&pt(t,().isNone()},YT=function(){var t,n=Xy.getItem(GT);if(null===n)return{};try{t=JSON.parse(n)}catch(e){if(e instanceof SyntaxError)return console.log("Local storage "+GT+" was not valid JSON",e),{};throw e}return qT(t)?t:(console.log("Local storage "+GT+" was not valid format",t),{})},KT=function(t){var n=YT();return vt(n,t).getOr([])},JT=function(t,n){if(XT(t)){var e=YT(),o=vt(e,n).getOr([]),r=j(o,();e[n]=[t].concat(r).slice(0,5),e)}},$T=QT=ZT=function(t){return A.from(function(t){return t.getParam("file_picker_callback")}(t)).filter(d)},tE=function(t,n){var e=function(t){var n=A.some(function(t){return t.getParam("file_picker_types")}(t)).filter($T),e=A.some(t)).filter($T),o=n.or(e).map(QT);return ZT(t).fold(k,(function(t){return o.fold(C,(function(t){return ct(t).length>0&&t}))}))}(t);return c(e)?e?ZT(t):A.none():e[n]?ZT(t):A.none()},nE=function(t){return A.from(t).filter(r).getOrUndefined()},eE=function(t){return{getHistory:KT,addToHistory:JT,getLinkInformation:function(){return function(t){return t)?A.none():A.some({targets:jT(t.getBody()),anchorTop:nE(Nb(t)),anchorBottom:nE(Lb(t))})}(t)},getValidationHandler:function(){return function(t){return A.from(function(t){var n=t.getParam("file_picker_validator_handler",void 0,"function");return void 0===n?t.getParam("filepicker_validator_handler",void 0,"function"):n}(t))}(t)},getUrlPicker:function(n){return function(t,n){return tE(t,n).map(()}(t,n)}}},oE=function(t,n,e){var o=xr(!1),r=function(t){var n=xr(Ab(t)?"bottom":"top");return{isPositionedAtTop:function(){return"top"===n.get()},getDockingMode:n.get,setDockingMode:n.set}}(n),i={shared:{providers:{icons:function(){return n.ui.registry.getAll().icons},menuItems:translate:yh.translate,isDisabled:getSetting:n.getParam.bind(n)},interpreter:function(t){return t,i)},anchors:hT(n,e,r.isPositionedAtTop),header:r,getSink:function(){return Ue.value(t)}},urlinput:eE(n),styleselect:DT(n),colorinput:wT(n),dialog:kT(n),isContextMenuOpen:function(){return o.get()},setContextMenuState:function(t){return o.set(t)}};return i},rE=Cd,iE=ad,uE=v([lr("shell",!1),Ko("makeItem"),lr("setupItem",p),Bl("listBehaviours",[ap])]),aE=rd({name:"items",overrides:function(){return{behaviours:yc([ap.config({})])}}}),cE=v([aE]),sE=v("CustomList"),fE=Md({name:sE(),configFields:uE(),partFields:cE(),factory:function(t,n,e,o){var r=t.shell?{behaviours:[ap.config({})],components:[]}:{behaviours:[],components:n},i=function(n){return t.shell?A.some(n):hd(n,t,"items")};return{uid:t.uid,dom:t.dom,components:r.components,behaviours:Dl(t.listBehaviours,r.behaviours),apis:{setItems:function(n,e){i(n).fold((function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(function(o){var r=ap.contents(o),i=e.length,u=i-r.length,a=u>0?z(u,(function(){return t.makeItem()})):[],c=r.slice(i);W(c,(function(t){return ap.remove(o,t)})),W(a,();var s=ap.contents(o);W(s,()}))}}}},apis:{setItems:function(t,n,e){t.setItems(n,e)}}}),lE=v([Ko("dom"),lr("shell",!0),Tl("toolbarBehaviours",[ap])]),dE=v([rd({name:"groups",overrides:)]),mE=Md({name:"Toolbar",configFields:lE(),partFields:dE(),factory:function(t,n,e,o){var r=function(n){return t.shell?A.some(n):hd(n,t,"groups")},i=t.shell?{behaviours:[ap.config({})],components:[]}:{behaviours:[],components:n};return{uid:t.uid,dom:t.dom,components:i.components,behaviours:Dl(t.toolbarBehaviours,i.behaviours),apis:{setGroups:function(t,n){r(t).fold((,(function(t){ap.set(t,n)}))}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:}),gE=p,pE=k,hE=v([]),vE=Object.freeze({__proto__:null,setup:gE,isDocked:pE,getBehaviours:hE}),bE=function(t){return(xt(ee(t,"position"),"fixed")?A.none():_n(t)).orThunk(()},yE=function(t){return bE(t).map(ge).getOrThunk(()},xE=wr([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),wE=function(t,n){var e=t.element;Vu(e,n.transitionClass),Hu(e,n.fadeOutClass),Vu(e,n.fadeInClass),n.onShow(t)},SE=function(t,n){var e=t.element;Vu(e,n.transitionClass),Hu(e,n.fadeInClass),Vu(e,n.fadeOutClass),n.onHide(t)},kE=function(t,n,e){return $(t,(function(t){switch(t){case"bottom":return n,e);case"top":return n,e)}}))},CE=function(t,n){return n.getInitialPos().map(()},OE=function(t,n,e){return e.getInitialPos().bind(()},_E=function(t,n,e){var o=He(t);if(kE(e.getModes(),o,n))return A.none();!function(t,n,e){e.setInitialPos({style:oe(t),position:te(t,"position")||"static",bounds:n})}(t,o,e);var r=Ne(),i=o.x-r.x,u=n.y-r.y,a=r.bottom-n.bottom,c=o.y<=n.y;return A.some(xE.fixed(Fc("fixed",A.some(i),c?A.some(u):A.none(),A.none(),c?A.none():A.some(a))))},TE=function(t,n,e){var o=t.element;return xt(ee(o,"position"),"fixed")?function(t,n,e){return CE(t,e).filter(().bind((function(n){return OE(t,n,e)}))}(o,n,e):_E(o,n,e)},EE=function(t,n,e){e.setDocked(!1),W(["left","right","top","bottom","position"],(),n.onUndocked(t)},DE=function(t,n,e,o){var r="fixed"===o.position;e.setDocked(r),Ic(t.element,o),(r?n.onDocked:n.onUndocked)(t)},BE=function(t,n,e,o,r){void 0===r&&(r=!1),n.contextual.each((function(n){n.lazyContext(t).each((function(i){var u=i,o);u!==e.isVisible()&&(e.setVisible(u),r&&!u?(Nu(t.element,[n.fadeOutClass]),n.onHide(t)):(u?wE:SE)(t,n))}))}))},ME=function(t,n,e){var o=t.element;e.setDocked(!1),function(t,n){var e=t.element;return CE(e,n).bind(()}(t,e).each((),e.setVisible(!0),n.contextual.each((),AE(t,n,e)},AE=function(t,n,e){t.getSystem().isConnected()&&function(t,n,e){var o=n.lazyViewport(t);e.isDocked()&&BE(t,n,e,o),TE(t,o,e).each(()}(t,n,e)},FE=IE=Object.freeze({__proto__:null,refresh:AE,reset:FE,isDocked:function(t,n,e){return e.isDocked()},getModes:setModes:),RE=Object.freeze({__proto__:null,events:function(t,n){return Ii([ji(Qr(),(function(e,o){t.contextual.each((function(t){zu(e.element,t.transitionClass)&&(Lu(e.element,[t.transitionClass,t.fadeInClass]),(n.isVisible()?t.onShown:t.onHidden)(e));o.stop()}))})),Pi(hi(),(function(e,o){AE(e,t,n)})),Pi(vi(),()])}}),VE=[fr("contextual",[Qo("fadeInClass"),Qo("fadeOutClass"),Qo("transitionClass"),tr("lazyContext"),_a("onShow"),_a("onShown"),_a("onHide"),_a("onHidden")]),vr("lazyViewport",Ne),br("modes",["top","bottom"],Ao),_a("onDocked"),_a("onUndocked")],PE=wc({fields:VE,name:"docking",active:RE,apis:IE,state:Object.freeze({__proto__:null,init:)}),HE=v(ou("toolbar-height-change")),zE={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},NE="tox-tinymce--toolbar-sticky-on",LE="tox-tinymce--toolbar-sticky-off",WE=UE=function(t){var n=t.element;On(n).each((function(e){var o="padding-"+PE.getModes(t)[0];if(PE.isDocked(t)){var r=ve(e);$n(n,"width",r+"px"),$n(e,o,function(t){return fe(t)+(parseInt(te(t,"margin-top"),10)||0)+(parseInt(te(t,"margin-bottom"),10)||0)}(n)+"px")}else ie(n,"width"),ie(e,o)}))},jE=function(t,n){n?(Hu(t,zE.fadeOutClass),Nu(t,[zE.transitionClass,zE.fadeInClass])):(Hu(t,zE.fadeInClass),Nu(t,[zE.fadeOutClass,zE.transitionClass]))},GE=function(t,n){var e=At.fromDom(t.getContainer());n?(Vu(e,NE),Hu(e,LE)):(Vu(e,LE),Hu(e,NE))},XE=function(t,n){var e=Qc(),o=n.getSink,r=function(t){o().each((function(n){return t(n.element)}))},i=function(n){t.inline||UE(n),GE(t,PE.isDocked(n)),n.getSystem().broadcastOn([cl()],{}),o().each(()},u=t.inline?[]:function(){var t;return[Oc.config({channels:(t={},t[HE()]={onReceive:UE},t)})]}();return E([mp.config({}),PE.config({contextual:_({lazyContext:onShow:onShown:function(t){r((),e.get().each((function(n){!function(t,n){var e=wn(n);Bc(e).filter(().filter(().each(()}(t.element,n),e.clear()}))},onHide:function(t){(function(t,n){return Mc(t).orThunk(()})(t.element,o).fold(e.clear,e.set),r(()},onHidden:,zE),lazyViewport:function(n){var e=Ne(),o=t),r=e.y+(WE(n,"top")?o:0),i=e.height-(WE(n,"bottom")?o:0);return Pe(e.x,r,e.width,i)},modes:[n.header.getDockingMode()],onDocked:i,onUndocked:i})],u,!0)},qE=Object.freeze({__proto__:null,setup:function(t,n,e){t.inline||(n.header.isPositionedAtTop()||t.on("ResizeEditor",(function(){e().each(PE.reset)})),t.on("ResizeWindow ResizeEditor",(),t.on("SkinLoaded",(),t.on("FullscreenStateChanged",()),t.on("AfterScrollIntoView",(function(t){e().each((function(n){PE.refresh(n);var e=n.element;Km(e)&&function(t,n){var e=wn(n),o=e.dom.defaultView.innerHeight,r=Be(e),i=At.fromDom(t.elm),u=ze(i),a=se(i),c=u.y,s=c+a,f=ge(n),l=se(n),d=f.top,m=d+l,g=Math.abs(d-r.top)<2,p=Math.abs(m-(r.top+o))<2;if(g&&c<m)Me(r.left,c-l,e);else if(p&&s>d){var h=c-o+a+l;Me(r.left,h,e)}}(t,e)}))})),t.on("PostRender",()},isDocked:getBehaviours:XE}),YE=Co([Qo("type"),Jo("items",_o([Eo([Qo("name"),or("items",Ao)]),Ao]))].concat(tv)),KE=[ar("text"),ar("tooltip"),ar("icon"),tr("fetch"),vr("onSetup",(function(){return p}))],JE=Co(E([Qo("type")],KE,!0)),$E=QE=Co([Qo("type"),ar("tooltip"),ar("icon"),ar("text"),cr("select"),tr("fetch"),vr("onSetup",(),pr("presets","normal",["normal","color","listpreview"]),lr("columns",1),tr("onAction"),tr("onItemAction")]),ZE=Bd({factory:function(t,n){var e={focus:np.focusIn,setMenus:function(t,e){var o=L(e,(function(t){var e={type:"menubutton",text:t.text,fetch:,o=$E(e).mapError(().getOrDie();return UO(o,"tox-mbtn",n.backstage,A.some("menuitem"))}));ap.set(t,o)}};return{uid:t.uid,dom:t.dom,components:[],behaviours:yc([ap.config({}),cp("menubar-events",[Gi((),Pi(Ur(),(),Pi(Si(),()]),np.config({mode:"flow",selector:".tox-mbtn",onEscape:function(n){return t.onEscape(n),A.some(!0)}}),tw.config({})]),apis:e,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Ko("dom"),Ko("uid"),Ko("onEscape"),Ko("backstage"),lr("onSetup",p)],apis:{focus:function(t,n){t.focus(n)},setMenus:function(t,n,e){t.setMenus(n,e)}}}),tD=function(t,n){return n.getAnimationRoot.fold((function(){return t.element}),(function(n){return n(t)}))},nD=function(t){return t.dimension.property},eD=function(t,n){return t.dimension.getDimension(n)},oD=function(t,n){var e=tD(t,n);Lu(e,[n.shrinkingClass,n.growingClass])},rD=function(t,n){Hu(t.element,n.openClass),Vu(t.element,n.closedClass),$n(t.element,nD(n),"0px"),ue(t.element)},iD=function(t,n){Hu(t.element,n.closedClass),Vu(t.element,n.openClass),ie(t.element,nD(n))},uD=function(t,n,e,o){e.setCollapsed(),$n(t.element,nD(n),eD(n,t.element)),ue(t.element),oD(t,n),rD(t,n),n.onStartShrink(t),n.onShrunk(t)},aD=cD=function(t,n,e){var o=eD(n,t.element);("0px"===o?uD:aD)(t,n,e,A.some(o))},sD=function(t,n,e){var o=tD(t,n),r=zu(o,n.shrinkingClass),i=eD(n,t.element);iD(t,n);var u=eD(n,t.element);(r?function(){rD(t,n)})(),Hu(o,n.shrinkingClass),Vu(o,n.growingClass),iD(t,n),$n(t.element,nD(n),u),e.setExpanded(),n.onStartGrow(t)},fD=function(t,n,e){var o=tD(t,n);return!0===zu(o,n.growingClass)},lD=function(t,n,e){var o=tD(t,n);return!0===zu(o,n.shrinkingClass)},dD=Object.freeze({__proto__:null,refresh:function(t,n,e){if(e.isExpanded()){ie(t.element,nD(n));var o=eD(n,t.element);$n(t.element,nD(n),o)}},grow:shrink:function(t,n,e){e.isExpanded()&&cD(t,n,e)},immediateShrink:function(t,n,e){e.isExpanded()&&uD(t,n,e)},hasGrown:function(t,n,e){return e.isExpanded()},hasShrunk:function(t,n,e){return e.isCollapsed()},isGrowing:fD,isShrinking:lD,isTransitioning:function(t,n,e){return fD(t,n)||lD(t,n)},toggleGrow:disableTransitions:oD}),mD=Object.freeze({__proto__:null,exhibit:function(t,n,e){var o=n.expanded;return Su(o?{classes:[n.openClass],styles:{}}:{classes:[n.closedClass],styles:Cr(n.dimension.property,"0px")})},events:),gD=[Ko("closedClass"),Ko("openClass"),Ko("shrinkingClass"),Ko("growingClass"),rr("getAnimationRoot"),_a("onShrunk"),_a("onStartShrink"),_a("onGrown"),_a("onStartGrow"),lr("expanded",!1),Jo("dimension",Go("property",{width:[Ba("property","width"),Ba("getDimension",(function(t){return ve(t)+"px"}))],height:[Ba("property","height"),Ba("getDimension",()]}))],pD=wc({fields:gD,name:"sliding",active:mD,apis:dD,state:Object.freeze({__proto__:null,init:)}),hD="container",vD=[Tl("slotBehaviours",[])],bD=function(t){return"<alloy.field."+t+">"},yD=function(t,n){var e,o=function(n){return xd(t)},r=function(n,e){return ,i=function(t,n){return"true"!==Gn(t.element,"aria-hidden")},u=r(i,!1),a=r((function(t,n){if(i(t)){var e=t.element;$n(e,"display","none"),Un(e,"aria-hidden","true"),Di(t,ki(),{name:n,visible:!1})}})),c=(e=a,,s=r((function(t,n){if(!i(t)){var e=t.element;ie(e,"display"),Yn(e,"aria-hidden"),Di(t,ki(),{name:n,visible:!0})}})),f={getSlotNames:o,getSlot:function(n,e){return hd(n,t,e)},isShowing:u,hideSlot:a,hideAllSlots:showSlot:s};return{uid:t.uid,dom:t.dom,components:n,behaviours:El(t.slotBehaviours),apis:f}},xD=lt({getSlotNames:function(t,n){return t.getSlotNames(n)},getSlot:function(t,n,e){return t.getSlot(n,e)},isShowing:function(t,n,e){return t.isShowing(n,e)},hideSlot:function(t,n,e){return t.hideSlot(n,e)},hideAllSlots:function(t,n){return t.hideAllSlots(n)},showSlot:function(t,n,e){return t.showSlot(n,e)}},(function(t){return bu(t)})),wD=_(_({},xD),{sketch:function(t){var n=function(){var t=[];return{slot:function(n,e){return t.push(n),ld(hD,bD(n),e)},record:v(t)}}(),e=t(n),o=n.record(),r=L(o,(function(t){return ed({name:t,pname:bD(t)})}));return _d(hD,vD,r,yD,e)}}),SD=Co([ar("icon"),ar("tooltip"),vr("onShow",p),vr("onHide",p),vr("onSetup",(function(){return p}))]),kD=function(t){return{element:function(){return t.element.dom}}},CD=function(t,n){var e=L(ct(n),(function(t){var e=n[t],o=Wo(function(t){return Lo("sidebar",SD,t)}(e));return{name:t,getApi:kD,onSetup:o.onSetup,onShow:o.onShow,onHide:o.onHide}}));return L(e,(function(n){var o=xr(p);return t.slot(n.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:ub([Qb(n,o),Zb(n,o),Pi(ki(),(function(t,n){var o=n.event,r=q(e,(function(t){return t.name===o.name}));r.each(()}))])})}))},OD=function(t){return wD.sketch((function(n){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:CD(n,t),slotBehaviours:ub([Gi((function(t){return wD.hideAllSlots(t)}))])}}))},_D=function(t){return Rd.getCurrent(t).bind(()},TD=ou("FixSizeEvent"),ED=ou("AutoSizeEvent"),DD=Object.freeze({__proto__:null,block:unblock:),BD=[vr("getRoot",A.none),hr("focus",!0),_a("onBlock"),_a("onUnblock")],MD=wc({fields:BD,name:"blocking",apis:DD,state:Object.freeze({__proto__:null,init:)}),AD=function(t){var n=At.fromHtml(t),e=Tn(n),o=function(t){var n=void 0!==t.dom.attributes?t.dom.attributes:[];return X(n,(,{})}(n),r=n),i=0===e.length?{}:{innerHtml:Ki(n)};return _({tag:It(n),classes:r,attributes:o},i)},FD=ID=function(t,n,e,o){var r=n.element;if(function(t,n){var e="tabindex",o="data-mce-tabindex";A.from(t.iframeElement).map(At.fromDom).each(()}(t,e),e)MD.block(n,function(t){return (o)),ie(r,"display"),Yn(r,"aria-hidden"),t.hasFocus()&&FD(n);else{var i=Rd.getCurrent(n).exists((function(t){return Dc(t.element)}));MD.unblock(n),$n(r,"display","none"),Un(r,"aria-hidden","true"),i&&t.focus()}},RD=function(t,n,e){var o=xr(!1),r=Qc(),i=function(e){var r;!o.get()||function(t){return"focusin"===t.type}(r=e)&&(r.composed?rt(r.composedPath()):A.from(r.target)).map(At.fromDom).filter(Vt).exists((function(t){return zu(t,"mce-pastebin")}))||(e.preventDefault(),FD(n()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",();var u=function(r){r!==o.get()&&(o.set(r),ID(t,n(),r,e.providers),t.fire("AfterProgressState",{state:r}))};t.on("ProgressState",(function(n){if(r.on(hh.clearTimeout),m(n.time)){var e=hh.setEditorTimeout(t,(function(){return u(n.state)}),n.time);r.set(e)}else u(n.state),r.clear()}))},VD=function(t,n,e){return{within:t,extra:n,withinWidth:e}},PD=function(t,n,e){var o=function(t,n){var e=X(t,(,{len:0,list:[]});return e.list}(t,(),r=j(o,(),i=G(r,(,0);return{within:r,extra:o.slice(r.length),withinWidth:i}},HD=zD=function(t,n,e,o){var r=function(t,n,e){var o=PD(n,t,e);return 0===o.extra.length?A.some(o):A.none()}(t,n,e).getOrThunk((),i=r.within,u=r.extra,a=r.withinWidth;return 1===u.length&&u[0].width<=e(o)?function(t,n,e){var o=HD(t.concat(n));return VD(o,[],e)}(i,u,a):u.length>=1?function(t,n,e,o){var r=HD(t).concat([e]);return VD(r,HD(n),o)}(i,u,o,a):function(t,n,e){return VD(HD(t),[],e)}(i,0,a)},ND=function(t,n){var e=L(n,(function(t){return ta(t)}));mE.setGroups(t,e)},LD=function(t,n,e){var o=n.builtGroups.get();if(0!==o.length){var r=vd(t,n,"primary"),i=jw.getCoupled(t,"overflowGroup");$n(r.element,"visibility","hidden");var u=o.concat([i]),a=at(u,();e([]),ND(r,u);var c=ve(r.element),s=zD(c,n.builtGroups.get(),(function(t){return ve(t.element)}),i);0===s.extra.length?(ap.remove(r,i),e([])):(ND(r,s.within),e(s.extra)),ie(r.element,"visibility"),ue(r.element),a.each(mp.focus)}},WD=v([Tl("splitToolbarBehaviours",[jw]),qo("builtGroups",(function(){return xr([])}))]),UD=v([Ca(["overflowToggledClass"]),cr("getOverflowBounds"),Ko("lazySink"),qo("overflowGroups",()].concat(WD())),jD=v([ed({factory:mE,schema:lE(),name:"primary"}),od({schema:lE(),name:"overflow"}),od({name:"overflow-button"}),od({name:"overflow-group"})]),GD=v((function(t,n){!function(t,n){var e=he.max(t,n,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);$n(t,"max-width",e+"px")}(t,Math.floor(n))})),XD=v([Ca(["toggledClass"]),Ko("lazySink"),tr("fetch"),cr("getBounds"),fr("fireDismissalEventInstead",[lr("event",xi())]),Cs()]),qD=v([od({name:"button",overrides:),od({factory:mE,schema:lE(),name:"toolbar",overrides:)]),YD=function(t,n){var e=jw.getCoupled(t,"toolbarSandbox");ul.isOpen(e)?ul.close(e):ul.open(e,n.toolbar())},KD=function(t,n,e,o){var r=e.getBounds.map((function(t){return t()})),i=e.lazySink(t).getOrDie();Pf.positionWithinBounds(i,n,{anchor:{type:"hotspot",hotspot:t,layouts:o,overrides:{maxWidthFunction:GD()}}},r)},JD=function(t,n,e,o,r){mE.setGroups(n,r),KD(t,n,e,o),Op.on(t)},$D=Md({name:"FloatingToolbarButton",factory:function(t,n,e,o){return _(_({},vh.sketch(_(_({},o.button()),{action:function(t){YD(t,o)},buttonBehaviours:Ml({dump:o.button().buttonBehaviours},[jw.config({others:{toolbarSandbox:function(n){return function(t,n,e){var o=fa();return{dom:{tag:"div",attributes:{id:o.id}},behaviours:yc([np.config({mode:"special",onEscape:function(t){return ul.close(t),A.some(!0)}}),ul.config({onOpen:onClose:isPartOf:getAttachPoint:),Oc.config({channels:_(_({},ll(_({isExtraPart:k},e.fireDismissalEventInstead.map((function(t){return{fireEventInstead:{event:t.event}}})).getOr({})))),ml({doReposition:))})])}}(n,e,t)}}})])}))),{apis:{setGroups:reposition:toggle:function(t){YD(t,o)},getToolbar:function(t){return ul.getState(jw.getCoupled(t,"toolbarSandbox"))},isOpen:})},configFields:XD(),partFields:qD(),apis:{setGroups:function(t,n,e){t.setGroups(n,e)},reposition:function(t,n){t.reposition(n)},toggle:function(t,n){t.toggle(n)},getToolbar:function(t,n){return t.getToolbar(n)},isOpen:function(t,n){return t.isOpen(n)}}}),QD=v([Ko("items"),Ca(["itemSelector"]),Tl("tgroupBehaviours",[np])]),ZD=v([id({name:"items",unit:"item"})]),tB=Md({name:"ToolbarGroup",configFields:QD(),partFields:ZD(),factory:),nB=eB=function(t,n,e){LD(t,e,()},oB=Md({name:"SplitFloatingToolbar",configFields:UD(),partFields:jD(),factory:apis:{setGroups:function(t,n,e){t.setGroups(n,e)},refresh:function(t,n){t.refresh(n)},reposition:function(t,n){t.reposition(n)},toggle:function(t,n){t.toggle(n)},isOpen:function(t,n){return t.isOpen(n)},getOverflow:function(t,n){return t.getOverflow(n)}}}),rB=v([Ca(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),_a("onOpened"),_a("onClosed")].concat(WD())),iB=v([ed({factory:mE,schema:lE(),name:"primary"}),ed({factory:mE,schema:lE(),name:"overflow",overrides:),od({name:"overflow-button",overrides:),od({name:"overflow-group"})]),uB=function(t,n){hd(t,n,"overflow-button").bind(().each(()},aB=function(t,n){hd(t,n,"overflow").each(()},cB=Md({name:"SplitSlidingToolbar",configFields:rB(),partFields:iB(),factory:function(t,n,e,o){var r="alloy.toolbar.toggle";return{uid:t.uid,dom:t.dom,components:n,behaviours:Dl(t.splitToolbarBehaviours,[jw.config({others:{overflowGroup:}),cp("toolbar-toggle-events",[Pi(r,(function(n){uB(n,t)}))])]),apis:{setGroups:function(n,e){!function(n,e){var o=L(e,n.getSystem().build);t.builtGroups.set(o)}(n,e),aB(n,t)},refresh:function(n){return aB(n,t)},toggle:function(n){return uB(n,t)},isOpen:function(n){return function(t,n){return hd(t,n,"overflow").map(pD.hasGrown).getOr(!1)}(n,t)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,n,e){t.setGroups(n,e)},refresh:function(t,n){t.refresh(n)},toggle:function(t,n){t.toggle(n)},isOpen:function(t,n){return t.isOpen(n)}}}),sB=function(t){var n=t.title.fold((function(){return{}}),(function(t){return{attributes:{title:t}}}));return{dom:_({tag:"div",classes:["tox-toolbar__group"]},n),components:[tB.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:yc([tw.config({}),mp.config({})])}},fB=function(t){return tB.sketch(sB(t))},lB=function(t,n){var e=Gi(();return yc([Jb(t.providers.isDisabled),Xb(),np.config({mode:n,onEscape:t.onEscape,selector:".tox-toolbar__group"}),cp("toolbar-events",[e])])},dB=function(t){var n=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":sB({title:A.none(),items:[]}),"overflow-button":XO({name:"more",icon:A.some("more-drawer"),disabled:!1,tooltip:A.some("More..."),primary:!1,borderless:!1},A.none(),t.providers)},splitToolbarBehaviours:lB(t,n)}},mB=gB=pB=function(t){var n=t.cyclicKeying?"cyclic":"acyclic";return mE.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===pv.scrolling?["tox-toolbar--scrolling"]:[])},components:[mE.parts.groups({})],toolbarBehaviours:lB(t,n)})},hB=iE.optional({factory:ZE,name:"menubar",schema:[Ko("backstage")]}),vB=iE.optional({factory:{sketch:,name:"multiple-toolbar",schema:[Ko("dom"),Ko("onEscape")]}),bB=iE.optional({factory:{sketch:function(t){var n=t);return n({type:t.type,uid:t.uid,onEscape:function(){return t.onEscape(),A.some(!0)},cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes})}},name:"toolbar",schema:[Ko("dom"),Ko("onEscape"),Ko("getSink")]}),yB=iE.optional({factory:{sketch:,name:"header",schema:[Ko("dom")]}),xB=iE.optional({name:"socket",schema:[Ko("dom")]}),wB=iE.optional({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:yc([tw.config({}),mp.config({}),pD.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:onGrown:function(t){Ei(t,ED)},onStartGrow:onStartShrink:),ap.config({}),Rd.config({find:)])}],behaviours:yc([bC(0),cp("sidebar-sliding-events",[Pi(TD,(),Pi(ED,()])])}}},name:"sidebar",schema:[Ko("dom")]}),SB=iE.optional({factory:{sketch:,name:"throbber",schema:[Ko("dom")]}),kB=Md({name:"OuterContainer",factory:function(t,n,e){var o={getSocket:function(n){return rE.getPart(n,t,"socket")},setSidebar:function(n,e){rE.getPart(n,t,"sidebar").each((function(t){return function(t,n){Rd.getCurrent(t).each((function(t){return ap.set(t,[OD(n)])}))}(t,e)}))},toggleSidebar:function(n,e){rE.getPart(n,t,"sidebar").each((function(t){return function(t,n){Rd.getCurrent(t).each(()}(t,e)}))},whichSidebar:getHeader:function(n){return rE.getPart(n,t,"header")},getToolbar:function(n){return rE.getPart(n,t,"toolbar")},setToolbar:setToolbars:function(n,e){rE.getPart(n,t,"multiple-toolbar").each((function(t){fE.setItems(t,e)}))},refreshToolbar:toggleToolbarDrawer:function(n){rE.getPart(n,t,"toolbar").each((function(t){var n,e;n=t.getApis().toggle,e=function(n){return n(t)},void 0!==n&&null!==n?A.some(e(n)):A.none()}))},isToolbarDrawerToggled:getThrobber:focusToolbar:setMenubar:focusMenubar:;return{uid:t.uid,dom:t.dom,components:n,apis:o,behaviours:t.behaviours}},configFields:[Ko("dom"),Ko("behaviours")],partFields:[yB,hB,bB,vB,xB,wB,SB],apis:{getSocket:function(t,n){return t.getSocket(n)},setSidebar:function(t,n,e){t.setSidebar(n,e)},toggleSidebar:function(t,n,e){t.toggleSidebar(n,e)},whichSidebar:function(t,n){return t.whichSidebar(n)},getHeader:function(t,n){return t.getHeader(n)},getToolbar:function(t,n){return t.getToolbar(n)},setToolbar:function(t,n,e){var o=L(e,(function(t){return fB(t)}));t.setToolbar(n,o)},setToolbars:refreshToolbar:function(t,n){return t.refreshToolbar(n)},toggleToolbarDrawer:function(t,n){t.toggleToolbarDrawer(n)},isToolbarDrawerToggled:function(t,n){return t.isToolbarDrawerToggled(n)},getThrobber:function(t,n){return t.getThrobber(n)},setMenubar:function(t,n,e){t.setMenubar(n,e)},focusMenubar:function(t,n){t.focusMenubar(n)},focusToolbar:function(t,n){t.focusToolbar(n)}}}),CB={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},OB=function(t){return"string"===typeof t?t.split(" "):t},_B=function(t,n){var e=_(_({},CB),n.menus),o=ct(n.menus).length>0,r=void 0===n.menubar||!0===n.menubar?OB("file edit view insert format tools table help"):OB(!1===n.menubar?"":n.menubar),i=j(r,(),u=L(i,(function(o){var r=e[o];return function(t,n,e){var o=function(t){return t.getParam("removed_menuitems","")}(e).split(/[ ,]/);return{text:t.title,getItems:}({title:r.title,items:OB(r.items)},n,t)}));return j(u,(function(t){return t.getItems().length>0&&H(t.getItems(),()}))},TB=function(t){var n=function(){t._skinLoaded=!0,function(t){t.fire("SkinLoaded")}(t)};return ,EB=function(t,n,e){return new jh(()},DB=function(t,n){return EB(t,n+"/skin.min.css",t.ui.styleSheetLoader)},BB=function(t,n){var e;return(e=At.fromDom(t.getElement()),Vn(e).isSome())?EB(t,n+"/skin.shadowdom.min.css",pb.DOM.styleSheetLoader):jh.resolve()},MB=function(t,n){var e=function(t){var n=t.getParam("skin"),e=t.getParam("skin_url");if(!1!==n){var o=n||"oxide";e=e?t.documentBaseURI.toAbsolute(e):hb.baseURL+"/skins/ui/"+o}return e}(n);e&&n.contentCSS.push(e+(t?"/content.inline":"/content")+".min.css"),!1===function(t){return!1===t.getParam("skin")}(n)&&r(e)?jh.all([DB(n,e),BB(n,e)]).then(TB(n),function(t,n){return function(){return function(t,n){return t.fire("SkinLoadError",n)}(t,{message:n})}}(n,"Skin could not be loaded")):TB(n)()},AB=x(MB,!1),FB=x(MB,!0),IB=function(t,n){return function(e){var o=$c(),r=function(){e.setActive(t.formatter.match(n));var r=t.formatter.formatChanged(n,e.setActive);o.set(r)};return t.initialized?r():t.once("init",r),},RB=function(t,n,e){return function(o){var r=function(){return e(o)},i=return t.initialized?i():t.once("init",i),},VB=function(t){return function(n){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("mceToggleFormat",!1,n.format)}))}}},PB=HB=function(t,n,e){var o=function(t,o,i,u){var a=n.shared.providers.translate(t.title);if("separator"===t.type)return A.some({type:"separator",text:a});if("submenu"===t.type){var c=J(t.getStyleItems(),(function(t){return r(t,o,u)}));return 0===o&&c.length<=0?A.none():A.some({type:"nestedmenuitem",text:a,disabled:c.length<=0,getSubmenuItems:)}return A.some(_({type:"togglemenuitem",text:a,icon:t.icon,active:t.isSelected(u),disabled:i,onAction:e.onAction(t)},t.getStylePreview().fold((function(){return{}}),()))},r=i=function(t){var n=e.getCurrentValue(),o=e.shouldHide?0:1;return J(t,(function(t){return r(t,o,n)}))};return{validateItems:i,getFetch:function(t,n){return function(e,o){var r=n(),u=i(r);o(LO(u,hv.CLOSE_ON_EXECUTE,t,!1))}}}},zB=function(t,n,e){var o=e.dataset,r="basic"===o.type?o.getData;return{items:HB(0,n,e),getStyleItems:r}},NB=function(t,n,e){var o=zB(0,n,e),r=o.items,i=o.getStyleItems,u=RB(t,"NodeChange",();return RO({text:e.icon.isSome()?A.none():e.text,icon:e.icon,tooltip:A.from(e.tooltip),role:A.none(),fetch:r.getFetch(n,i),onSetup:u,getApi:function(t){return{getComponent:v(t)}},columns:1,presets:"normal",classes:e.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",n.shared)};!function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"}(C_||(C_={}));var LB,WB=function(t,n,e,o){var r=function(t){return L(t,(function(t){var n=t,e=t,o=t.split("=");return o.length>1&&(n=o[0],e=o[1]),{title:n,format:e}}))}(function(t,n){return n===C_.SemiColon?t.replace(/;$/,"").split(";"):t.split(" ")}(t.getParam(n,e,"string"),o));return{type:"basic",data:r}},UB=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],jB=function(t){var n={type:"basic",data:UB};return{tooltip:"Align",text:A.none(),icon:A.some("align-left"),isSelectedFor:function(n){return function(){return t.formatter.match(n)}},getCurrentValue:A.none,getPreviewFor:function(t){return A.none},onAction:updateText:function(n){var e=q(UB,(function(n){return t.formatter.match(n.format)})),o=e.fold(v("left"),(function(t){return t.title.toLowerCase()}));Di(n,IO,{icon:"align-"+o})},dataset:n,shouldHide:!1,isInvalid:},GB=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],XB=function(t){var n=t.split(/\s*,\s*/);return L(n,(function(t){return t.replace(/^['"]+|['"]+$/g,"")}))},qB=function(t){var n="System Font",e=function(){var e=function(t){return t?XB(t)[0]:""},r=t.queryCommandValue("FontName"),i=o.data,u=r?r.toLowerCase():"",a=q(i,().orThunk((function(){return kt(function(t){return 0===t.indexOf("-apple-system")&&function(){var n=XB(t.toLowerCase());return $(GB,()}()}(u),{title:n,format:u})}));return{matchOpt:a,font:r}},o=WB(t,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",C_.SemiColon);return{tooltip:"Fonts",text:A.some(n),icon:A.none(),isSelectedFor:function(t){return function(n){return n.exists((function(n){return n.format===t}))}},getCurrentValue:function(){return e().matchOpt},getPreviewFor:onAction:function(n){return function(){t.undoManager.transact((function(){t.focus(),t.execCommand("FontName",!1,n.format)}))}},updateText:function(t){var n=e(),o=n.matchOpt,r=n.font,i=o.fold(v(r),(function(t){return t.title}));Di(t,FO,{text:i})},dataset:o,shouldHide:!1,isInvalid:k}},YB={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},KB={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},JB=function(t,n){return/[0-9.]+px$/.test(t)?72*parseInt(t,10)/96,n||0)+"pt":vt(KB,t).getOr(t)},$B=function(t){var n=function(){var n=A.none(),e=o.data,r=t.queryCommandValue("FontSize");if(r)for(var i=function(t){var o=JB(r,t),i=o);n=q(e,()},u=3;n.isNone()&&u>=0;u--)i(u);return{matchOpt:n,size:r}},e=v(A.none),o=WB(t,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",C_.Space);return{tooltip:"Font sizes",text:A.some("12pt"),icon:A.none(),isSelectedFor:getPreviewFor:e,getCurrentValue:onAction:updateText:dataset:o,shouldHide:!1,isInvalid:k}},QB=function(t,n){var e=n(),o=L(e,(function(t){return t.format}));return A.from(t.formatter.closest(o)).bind(().orThunk(()},ZB=function(t){var n="Paragraph",e=WB(t,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",C_.SemiColon);return{tooltip:"Blocks",text:A.some(n),icon:A.none(),isSelectedFor:function(n){return function(){return t.formatter.match(n)}},getCurrentValue:A.none,getPreviewFor:function(n){return function(){var e=t.formatter.get(n);return A.some({tag:e.length>0&&(e[0].inline||e[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(n))})}},onAction:VB(t),updateText:function(o){var r=QB(t,().fold(v(n),(function(t){return t.title}));Di(o,FO,{text:r})},dataset:e,shouldHide:!1,isInvalid:function(n){return!t.formatter.canApply(n.format)}}},tM=function(t,n){var e="Paragraph";return{tooltip:"Formats",text:A.some(e),icon:A.none(),isSelectedFor:function(n){return function(){return t.formatter.match(n)}},getCurrentValue:A.none,getPreviewFor:function(n){return function(){var e=t.formatter.get(n);return void 0!==e?A.some({tag:e.length>0&&(e[0].inline||e[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(n))}):A.none()}},onAction:VB(t),updateText:function(n){var o=function(t){var n=t.items;return void 0!==n&&n.length>0?J(n,o):[{title:t.title,format:t.format}]},r=J(_T(t),o),i=QB(t,v(r)).fold(v(e),(function(t){return t.title}));Di(n,FO,{text:i})},shouldHide:t.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(n){return!t.formatter.canApply(n.format)},dataset:n}},nM=Object.freeze({__proto__:null,events:function(t,n){var e=function(e,o){t.updateState.each((),t.renderComponents.each((function(t){var r=t(o,n.get()),i=L(r,e.getSystem().build);Lf(e,i)}))};return Ii([Pi(ui(),(function(n,o){var r=o;if(!r.universal){var i=t.channel;P(r.channels,i)&&e(n,r.data)}})),Gi(()])}}),eM=Object.freeze({__proto__:null,getState:function(t,n,e){return e}}),oM=[Ko("channel"),rr("renderComponents"),rr("updateState"),rr("initialData")],rM=Object.freeze({__proto__:null,init:),iM=wc({fields:oM,name:"reflecting",active:nM,apis:eM,state:rM}),uM=v([Ko("toggleClass"),Ko("fetch"),Ea("onExecute"),lr("getHotspot",A.some),lr("getAnchorOverrides",v({})),Cs(),Ea("onItemExecute"),rr("lazySink"),Ko("dom"),_a("onOpen"),Tl("splitDropdownBehaviours",[jw,np,mp]),lr("matchWidth",!1),lr("useMinWidth",!1),lr("eventOrder",{}),rr("role")].concat(iS())),aM=ed({factory:vh,schema:[Ko("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:yc([mp.revoke()])}},overrides:),cM=ed({factory:vh,schema:[Ko("dom")],name:"button",defaults:overrides:),sM=v([aM,cM,rd({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[Ko("text")],name:"aria-descriptor"}),od({schema:[ka()],name:"menu",defaults:),Xw()]),fM=Md({name:"SplitDropdown",configFields:uM(),partFields:sM(),factory:function(t,n,e,o){var r,i=function(t){Rd.getCurrent(t).each((function(t){um.highlightFirst(t),np.focusIn(t)}))},u=function(n){Zw(t,b,n,o,i,kw.HighlightFirst).get(p)},a=function(n){var e=vd(n,t,"button");return Bi(e),A.some(!0)},c=_(_({},Ii([Gi(()])),Tp(A.some(u))),s={repositionMenus:function(t){Op.isOn(t)&&rS(t)}};return{uid:t.uid,dom:t.dom,components:n,apis:s,eventOrder:_(_({},t.eventOrder),(r={},r[ai()]=["disabling","toggling","alloy.base.behaviour"],r)),events:c,behaviours:Dl(t.splitDropdownBehaviours,[jw.config({others:{sandbox:}),np.config({mode:"special",onSpace:a,onEnter:a,onDown:),mp.config({}),Op.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(t,n){return t.repositionMenus(n)}}}),lM=function(t){return{isDisabled:function(){return Kd.isDisabled(t)},setDisabled:function(n){return Kd.set(t,n)}}},dM=function(t){return{setActive:function(n){Op.set(t,n)},isActive:function(){return Op.isOn(t)},isDisabled:function(){return Kd.isDisabled(t)},setDisabled:function(n){return Kd.set(t,n)}}},mM=function(t,n){return t.map((function(t){return{"aria-label":n.translate(t),title:n.translate(t)}})).getOr({})},gM=ou("focus-button"),pM=function(t,n,e,o,r,i){var u;return{dom:{tag:"button",classes:["tox-tbtn"].concat(n.isSome()?["tox-tbtn--select"]:[]),attributes:mM(e,i)},components:ey([t.map((function(t){return EO(t,i.icons)})),n.map((function(t){return BO(t,"tox-tbtn",i)}))]),eventOrder:(u={},u[zr()]=["focusing","alloy.base.behaviour","common-button-display-events"],u),buttonBehaviours:yc([Jb(i.isDisabled),Xb(),cp("common-button-display-events",[Pi(zr(),()])].concat(o.map(().toArray()).concat(r.getOr([])))}},hM=function(t,n,e){var o,r=xr(p),i=pM(t.icon,t.text,t.tooltip,A.none(),A.none(),e);return vh.sketch({dom:i.dom,components:i.components,eventOrder:AO,buttonBehaviours:yc([cp("toolbar-button-events",[(o={onAction:t.onAction,getApi:n.getApi},Yi(()),Qb(n,r),Zb(n,r)]),Jb((function(){return t.disabled||e.isDisabled()})),Xb()].concat(n.toolbarButtonBehaviours))})},vM=function(t,n,e){return hM(t,{toolbarButtonBehaviours:[].concat(e.length>0?[cp("toolbarButtonWith",e)]:[]),getApi:lM,onSetup:t.onSetup},n)},bM=function(t,n,e){return uo(hM(t,{toolbarButtonBehaviours:[ap.config({}),Op.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(e.length>0?[cp("toolbarToggleButtonWith",e)]:[]),getApi:dM,onSetup:t.onSetup},n))},yM=function(t,n,e){return ,xM=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],wM=function(t,n){return ,SM={button:wM(ev,(function(t,n){return e=t,o=n.backstage.shared.providers,vM(e,o,[]);var e,o})),togglebutton:wM(iv,(function(t,n){return e=t,o=n.backstage.shared.providers,bM(e,o,[]);var e,o})),menubutton:wM($E,(),splitbutton:wM((function(t){return Lo("SplitButton",QE,t)}),(function(t,n){return function(t,n){var e,o=ou("channel-update-split-dropdown-display"),r=function(t){return{isDisabled:function(){return Kd.isDisabled(t)},setDisabled:function(n){return Kd.set(t,n)},setIconFill:function(n,e){ca(t.element,'svg path[id="'+n+'"], rect[id="'+n+'"]').each((function(t){Un(t,"fill",e)}))},setIconStroke:setActive:isActive:},i=xr(p),u={getApi:r,onSetup:t.onSetup};return fM.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:_({"aria-pressed":!1},mM(t.tooltip,n.providers))},onExecute:onItemExecute:splitDropdownBehaviours:yc([Kb(n.providers.isDisabled),Xb(),cp("split-dropdown-events",[Pi(gM,mp.focus),Qb(u,i),Zb(u,i)]),fS.config({})]),eventOrder:(e={},e[bi()]=["alloy.base.behaviour","split-dropdown-events"],e),toggleClass:"tox-tbtn--enabled",lazySink:n.getSink,fetch:yM(r,t,n.providers),parts:{menu:Iv(0,t.columns,t.presets)},components:[fM.parts.button(pM(t.icon,t.text,A.none(),A.some(o),A.some([Op.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),n.providers)),fM.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Oh("chevron-down",n.providers.icons)},buttonBehaviours:yc([Kb(n.providers.isDisabled),Xb(),_h()])}),fM.parts["aria-descriptor"]({text:n.providers.translate("To open the popup, press Shift+Enter")})]})}(t,n.backstage.shared)})),grouptoolbarbutton:wM((function(t){return Lo("GroupToolbarButton",YE,t)}),(function(t,n,e){var o,r=e.ui.registry.getAll().buttons,i=((o={})[Ss]=n.backstage.shared.header.isPositionedAtTop()?Lc.TopToBottom:Lc.BottomToTop,o);if(Eb(e)===pv.floating)return function(t,n,e,o){var r=n.shared;return $D.sketch({lazySink:r.getSink,fetch:markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:pM(t.icon,t.text,t.tooltip,A.none(),A.none(),r.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:o}}}})}(t,n.backstage,(,i);throw new Error("Toolbar groups are only supported when using floating toolbar mode")})),styleSelectButton:function(t,n){return function(t,n){var e=_({type:"advanced"},n.styleselect);return NB(t,n,tM(t,e))}(t,n.backstage)},fontsizeSelectButton:function(t,n){return function(t,n){return NB(t,n,$B(t))}(t,n.backstage)},fontSelectButton:function(t,n){return function(t,n){return NB(t,n,qB(t))}(t,n.backstage)},formatButton:function(t,n){return function(t,n){return NB(t,n,ZB(t))}(t,n.backstage)},alignMenuButton:function(t,n){return function(t,n){return NB(t,n,jB(t))}(t,n.backstage)}},kM={styleselect:SM.styleSelectButton,fontsizeselect:SM.fontsizeSelectButton,fontselect:SM.fontSelectButton,formatselect:SM.formatButton,align:SM.alignMenuButton},CM=function(t){var n=t.toolbar,e=t.buttons;return!1===n?[]:void 0===n||!0===n?function(t){var n=L(xM,();return j(n,(function(t){return t.items.length>0}))}(e):r(n)?function(t){var n=t.split("|");return L(n,()}(n):function(t){return g(t,()}(n)?n:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},OM=function(t,n,e,o,r,i){return vt(n,e.toLowerCase()).orThunk(().fold((,(function(n){return"grouptoolbarbutton"!==n.type||o?function(t,n,e){return vt(SM,t.type).fold((,()}(n,r,t):(console.warn("Ignoring the '"+e+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),A.none())}))},_M=function(t,n,e,o){var r=CM(n),i=L(r,(function(r){var i=J(r.items,(function(r){return 0===r.trim().length?[]:OM(t,n.buttons,r,n.allowToolbarGroups,e,o).toArray()}));return{title:A.from(t.translate(r.name)),items:i}}));return j(i,()},TM=function(t,n,e,o){var i=n.outerContainer,u=e.toolbar,a=e.buttons;if(g(u,r)){var c=u.map(();kB.setToolbars(i,c)}else kB.setToolbar(i,_M(t,e,{backstage:o},A.none()))},EM=pn(),DM=EM.os.isiOS()&&EM.os.version.major<=12,BM=Object.freeze({__proto__:null,render:function(t,n,e,o,r){var i=xr(0),u=n.outerContainer;AB(t);var c=At.fromDom(r.targetNode),s=Rn(In(c));!function(t,n){Yf(t,n,ke)}(c,n.mothership),qf(s,n.uiMothership),t.on("PostRender",(function(){TM(t,n,e,o),i.set(t.getWin().innerWidth),kB.setMenubar(u,_B(t,e)),kB.setSidebar(u,e.sidebar),function(t,n){var e=t.dom,o=t.getWin(),r=t.getDoc().documentElement,i=xr(de(o.innerWidth,o.innerHeight)),u=xr(de(r.offsetWidth,r.offsetHeight)),a=function(){var n=i.get();n.left===o.innerWidth&&n.top===o.innerHeight||(i.set(de(o.innerWidth,o.innerHeight)),Ly(t))},c=function(){var n=t.getDoc().documentElement,e=u.get();e.left===n.offsetWidth&&e.top===n.offsetHeight||(u.set(de(n.offsetWidth,n.offsetHeight)),Ly(t))},s=function(n){return function(t,n){return t.fire("ScrollContent",n)}(t,n)};e.bind(o,"resize",a),e.bind(o,"scroll",s);var f=ns(At.fromDom(t.getBody()),"load",c),l=n.uiMothership.element;t.on("hide",(),t.on("show",(function(){ie(l,"display")})),t.on("NodeChange",c),t.on("remove",()}(t,n)}));var f=kB.getSocket(u).getOrDie("Could not find expected socket element");if(DM){Qn(f.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var l=(function(){t.fire("ScrollContent")}),20),d=ts(f.element,"scroll",l.throttle);t.on("remove",d.unbind)}Gb(t,n),t.addCommand("ToggleSidebar",(),t.addQueryValueHandler("ToggleSidebar",(function(){return kB.whichSidebar(u)}));var m=Eb(t);m!==pv.sliding&&m!==pv.floating||t.on("ResizeWindow ResizeEditor ResizeContent",();var g={enable:function(){jb(n,!1)},disable:function(){jb(n,!0)},isDisabled:function(){return Kd.isDisabled(u)}};return{iframeContainer:f.element.dom,editorContainer:u.element.dom,api:g}}}),MM=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?A.some(parseInt(""+t,10)):A.none()},AM=FM=function(t,n,e){var o=n.filter((),r=e.filter((function(n){return t>n}));return o.or(r).getOr(t)},IM=function(t){var n=function(t){var n=vb(t),e=xb(t),o=Sb(t);return MM(n).map((function(t){return FM(t,e,o)}))}(t);return n.getOr(vb(t))},RM=function(t){var n=bb(t),e=yb(t),o=wb(t);return MM(n).map((function(t){return FM(t,e,o)}))},VM=function(t,n,e,o,r){var i=e.uiMothership,u=e.outerContainer,a=pb.DOM,c=Ib(t),s=Pb(t),f=wb(t).or(RM(t)),l=o.shared.header,d=l.isPositionedAtTop,m=Eb(t),g=m===pv.sliding||m===pv.floating,p=xr(!1),h=b=function(t){return g?t.fold(v(0),(function(t){return t.components().length>1?se(t.components()[1].element):0})):0},y=function(){i.broadcastOn([cl()],{})},x=function(t){if(void 0===t&&(t=!1),h()){if(c||function(){var t=f.getOrThunk(();$n(r.get().element,"max-width",t+"px")}(),g&&kB.refreshToolbar(u),c||function(){var t=kB.getToolbar(u),e=b(t),o=He(n),i=d()?Math.max(o.y-se(r.get().element)+e,0):o.bottom;Qn(u.element,{position:"absolute",top:Math.round(i)+"px",left:Math.round(o.x)+"px"})}(),s){var e=r.get();t?PE.reset(e):PE.refresh(e)}y()}},w=function(e){if(void 0===e&&(e=!0),!c&&s&&h()){var o=l.getDockingMode(),i=function(e){switch(Mb(t)){case Tb.auto:var o=kB.getToolbar(u),r=b(o),i=se(e.element)-r,a=He(n);if(a.y>i)return"top";var c=kn(n),s=Math.max(c.dom.scrollHeight,se(c));return a.bottom<s-i||Ne().bottom<a.bottom-i?"bottom":"top";case Tb.bottom:return"bottom";case Tb.top:default:return"top"}}(r.get());i!==o&&(!i),e&&x(!0))}};return{isVisible:h,isPositionedAtTop:d,show:hide:update:x,updateMode:w,repositionPopups:y}},PM=function(t,n){var e=He(t);return{pos:n?e.y:e.bottom,bounds:e}},HM=Object.freeze({__proto__:null,render:function(t,n,e,o,r){var i=n.mothership,u=n.uiMothership,a=n.outerContainer,c=xr(null),s=At.fromDom(r.targetNode),f=VM(t,s,n,o,c),l=function(t){return t.getParam("toolbar_persist",!1,"boolean")}(t);FB(t);var d=function(){if(c.get())f.show();else{c.set(kB.getHeader(a).getOrDie());var r=Rb(t);qf(r,i),qf(r,u),TM(t,n,e,o),kB.setMenubar(a,_B(t,e)),f.show(),function(t,n,e,o){var r=xr(PM(n,e.isPositionedAtTop())),i=function(o){var i=PM(n,e.isPositionedAtTop()),u=i.pos,a=i.bounds,c=r.get(),s=c.pos,f=c.bounds,l=a.height!==f.height||a.width!==f.width;r.set({pos:u,bounds:a}),l&&Ly(t,o),e.isVisible()&&(s!==u?e.update(!0):l&&(e.updateMode(),e.repositionPopups()))};o||(t.on("activate",e.show),t.on("deactivate",e.hide)),t.on("SkinLoaded ResizeWindow",(function(){return e.update(!0)})),t.on("NodeChange keydown",(),t.on("ScrollWindow",(function(){return e.updateMode()}));var u=$c();u.set(ns(At.fromDom(t.getBody()),"load",i)),t.on("remove",(function(){u.clear()}))}(t,s,f,l),t.nodeChanged()}},m=function(){return hh.setEditorTimeout(t,d,0)};t.on("show",d),t.on("hide",f.hide),l||(t.on("focus",m),t.on("blur",f.hide)),t.on("init",(),Gb(t,n);var g={show:function(){f.show()},hide:function(){f.hide()},enable:function(){jb(n,!1)},disable:function(){jb(n,!0)},isDisabled:function(){return Kd.isDisabled(a)}};return{editorContainer:a.element.dom,api:g}}}),zM="contexttoolbar-hide",NM=function(t,n){return Pi(MO,(function(e,o){var r=function(t){return{hide:getValue:function(){return _l.getValue(t)}}}(t.get(e));n.onAction(r,o.event.buttonApi)}))},LM=function(t,n,e){var o={backstage:{shared:{providers:e}}};return"contextformtogglebutton"===n.type?function(t,n,e){var o=n.original;o.primary;var r=T(o,["primary"]),i=Wo(iv(_(_({},r),{type:"togglebutton",onAction:p})));return bM(i,e.backstage.shared.providers,[NM(t,n)])}(t,n,o):t,n,o)},WM=function(t,n){var e=t.label.fold((function(){return{}}),(),o=bh(xw.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:e,selectOnFocus:!0,inputBehaviours:yc([np.config({mode:"special",onEnter:onLeft:function(t,n){return n.cut(),A.none()},onRight:)])})),r=function(t,n,e){var o=L(n,();return{asSpecs:findPrimary:}(o,t.commands,n);return[{title:A.none(),items:[o.asSpec()]},{title:A.none(),items:r.asSpecs()}]},UM=WM,jM=function(t,n,e){return void 0===e&&(e=.01),n.bottom-t.y>=e&&t.bottom-n.y>=e},GM=function(t){var n=t.selection.getRng());if(t.inline){var e=Be();return Pe(e.left+n.left,e.top+n.top,n.width,n.height)}var o=ze(At.fromDom(t.getBody()));return Pe(o.x+n.left,o.y+n.top,n.width,n.height)},XM=function(t,n,e,o){void 0===o&&(o=0);var r=Fe(window),i=He(At.fromDom(t.getContentAreaContainer())),u=kb(t)||Cb(t)||_b(t),a=function(t,n,e){var o=Math.max(t.x+e,n.x);return{x:o,width:Math.min(t.right-e,n.right)-o}}(i,r,o),c=a.x,s=a.width;if(t.inline&&!u)return Pe(c,r.y,s,r.height);var f=t,i,r,n.header.isPositionedAtTop(),e,o),l=f.y,d=f.bottom;return Pe(c,l,s,d-l)},qM={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},YM={maxHeightFunction:ms(),maxWidthFunction:GD()},KM=function(t){return"node"===t},JM=function(t,n,e,o,r){var i=GM(t),u=o.lastElement().exists((function(t){return bn(e,t)}));return function(t,n){var e=t.selection.getRng(),o=Bn(At.fromDom(e.startContainer),e.startOffset);return e.startContainer===e.endContainer&&e.startOffset===e.endOffset-1&&bn(o.element,n)}(t,e)?u?mh:ch:u?function(t,n,e){var o=ee(t,"position");$n(t,"position",n);var r=e(t);return o.each((function(n){return $n(t,"position",n)})),r}(n,o.getMode(),(function(){return jM(i,He(n))&&!o.isReposition()?ph:mh})):("fixed"===o.getMode()?r.y+Be().top:r.y)+(se(n)+12)<=i.y?ch:sh},$M=function(t,n,e,o){var r=function(n){return ,i=function(t){return KM(o)?[r(t)]:[]};return n?{onLtr:function(t){return[rc,Za,tc,nc,ec,oc].concat(i(t))},onRtl:function(t){return[rc,tc,Za,ec,nc,oc].concat(i(t))}}:{onLtr:function(t){return[oc,rc,nc,Za,ec,tc].concat(i(t))},onRtl:},QM=function(t,n){var e=j(n,(function(n){return n.predicate(t.dom)})),o=U(e,(function(t){return"contexttoolbar"===t.type}));return{contextToolbars:o.pass,contextForms:o.fail}},ZM=function(t,n,e){var o=QM(t,n);if(o.contextForms.length>0)return A.some({elem:t,toolbars:[o.contextForms[0]]});var r=QM(t,e);if(r.contextForms.length>0)return A.some({elem:t,toolbars:[r.contextForms[0]]});if(o.contextToolbars.length>0||r.contextToolbars.length>0){var i=function(t){if(t.length<=1)return t;var n=function(n){return H(t,(function(t){return t.position===n}))},e=function(n){return j(t,(function(t){return t.position===n}))},o=n("selection"),r=n("node");if(o||r){if(r&&o){var i=e("node"),u=L(e("selection"),();return i.concat(u)}return e(o?"selection":"node")}return e("line")}(o.contextToolbars.concat(r.contextToolbars));return A.some({elem:t,toolbars:i})}return A.none()},tA=function(t,n,e){return t(n)?A.none():Er(n,(function(t){if(Vt(t)){var n=QM(t,e.inNodeScope),o=n.contextToolbars,r=n.contextForms,i=r.length>0?r:function(t){if(t.length<=1)return t;var n=function(n){return q(t,(function(t){return t.position===n}))},e=n("selection").orThunk((function(){return n("node")})).orThunk((function(){return n("line")})).map((function(t){return t.position}));return e.fold((function(){return[]}),(function(n){return j(t,(function(t){return t.position===n}))}))}(o);return i.length>0?A.some({elem:t,toolbars:i}):A.none()}return A.none()}),t)},nA=function(t,n){var e={},o=[],r=[],i={},u={},a=function(t,a){var c=Wo(Lo("ContextForm",dv,a));e[t]=c,c.launch.map((),"editor"===c.scope?r.push(c):o.push(c),u[t]=c},c=function(t,n){var e;(e=n,Lo("ContextToolbar",mv,e)).each((function(e){"editor"===n.scope?r.push(e):o.push(e),u[t]=e}))},s=ct(t);return W(s,(function(n){var e=t[n];"contextform"===e.type?a(n,e):"contexttoolbar"===e.type&&c(n,e)})),{forms:e,inNodeScope:o,inEditorScope:r,lookupTable:u,formNavigators:i}},eA=ou("forward-slide"),oA=ou("backward-slide"),rA=ou("change-slide-event"),iA="tox-pop--resizing",uA="tox-pop--transition",aA=function(t,n,e,o){var r=o.backstage,i=r.shared,u=pn().deviceType.isTouch,a=Qc(),c=Qc(),s=Qc(),f=Zu(function(t){var n=xr([]);return Jp.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:inlineBehaviours:yc([cp("context-toolbar-events",[ji(Qr(),(),Pi(rA,(),Pi(eA,(),Pi(oA,()]),np.config({mode:"special",onEscape:)]),lazySink:function(){return Ue.value(t.sink)}})}({sink:e,onEscape:)),l=function(){var n=s.get().getOr("node"),e=KM(n)?1:0;return XM(t,i,n,e)},d=function(){return!t.removed&&!(u()&&r.isContextMenuOpen())},m=function(){if(d()){var n=l(),e=xt(s.get(),"node")?function(t,n){return n.filter(zn).map(ze).getOrThunk((function(){return GM(t)}))}(t,a.get()):GM(t);return n.height<=0||!jM(e,n)}return!0},g=h=function(){if(Jp.isOpen(f)){var t=f.element;ie(t,"display"),m()?$n(t,"display","none"):(c.set(0),Jp.reposition(f))}},v=function(n){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[n],behaviours:yc([np.config({mode:"acyclic"}),cp("pop-dialog-wrap-events",[Gi((),Xi(()])])}},b=Nt((),y=function(n){var e=t.ui.registry.getAll().buttons,r=b(),u=_(_({},e),r.formNavigators),a=Eb(t)===pv.scrolling?pv.scrolling:pv.default,c=K(L(n,(function(n){return"contexttoolbar"===n.type?function(n,e){return _M(t,{buttons:n,toolbar:e.items,allowToolbarGroups:!1},o,A.some(["form:"]))}(u,n):function(t,n){return UM(t,n)}(n,i.providers)})));return pB({type:a,uid:ou("context-toolbar"),initGroups:c,onEscape:A.none,cyclicKeying:!0,providers:i.providers})},x=function(n,o){var r="node"===n?i.anchors.node(o):i.anchors.cursor(),s=function(t,n,e,o){return"line"===n?{bubble:vs(12,0,qM),layouts:{onLtr:function(){return[ic]},onRtl:function(){return[uc]}},overrides:YM}:{bubble:vs(0,12,qM,1/12),layouts:$M(t,e,o,n),overrides:YM}}(t,n,u(),{lastElement:a.get,isReposition:getMode:function(){return Pf.getMode(e)}});return uo(r,s)},w=function(t,n){if(S.cancel(),d()){var o=y(t),r=t[0].position,i=x(r,n);s.set(r),c.set(1);var u=f.element;ie(u,"display"),function(t){return xt(St(t,a.get(),bn),!0)}(n)||(Hu(u,uA),Pf.reset(e,f)),Jp.showWithinBounds(f,v(o),{anchor:i,transition:{classes:[uA],mode:"placement"}},(function(){return A.some(l())})),n.fold(a.clear,a.set),m()&&$n(u,"display","none")}},S=Fh((function(){t.hasFocus()&&!t.removed&&(zu(f.element,uA)?S.throttle():function(t,n){var e=At.fromDom(n.getBody()),o=function(t){return bn(t,e)},r=At.fromDom(n.selection.getNode());return r)?A.none():ZM(r,t.inNodeScope,t.inEditorScope).orThunk((function(){return tA(o,r,t)}))}(b(),t).fold(g,())}),17);t.on("init",(function(){t.on("remove",g),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",h),t.on("click keyup focus SetContent",S.throttle),t.on(zM,g),t.on("contexttoolbar-show",(function(n){var e=b();vt(e.lookupTable,n.toolbarKey).each(()})),t.on("focusout",(),t.on("SwitchMode",(),t.on("AfterProgressState",(),t.on("NodeChange",()}))},cA={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},sA=function(){var t="[0-9]+",n="[eE][+-]?[0-9]+",e=function(t){return"(?:"+t+")?"},o=["Infinity","[0-9]+\\."+e(t)+e(n),"\\.[0-9]+"+e(n),t+e(n)].join("|");return new RegExp("^("+("[+-]?(?:"+o+")")+")(.*)$")}(),fA=function(t,n){return A.from(sA.exec(t)).bind((function(t){var e=Number(t[1]),o=t[2];return function(t,n){return H(n,()}(o,n)?A.some({value:e,unit:o}):A.none()}))},lA=function(t,n){var e=function(){var e=n.getOptions(t),o=n.getCurrent(t).map(n.hash),r=Qc();return L(e,(function(e){return{type:"togglemenuitem",text:n.display(e),onSetup:function(i){var u=function(t){t&&(r.on((),r.set(i)),i.setActive(t)};u(xt(o,n.hash(e)));var a=n.watcher(t,e,u);return ,onAction:function(){return n.setCurrent(t,e)}}}))};t.ui.registry.addMenuButton(n.name,{tooltip:n.text,icon:n.icon,fetch:onSetup:n.onToolbarSetup}),t.ui.registry.addNestedMenuItem(n.name,{type:"nestedmenuitem",text:n.text,getSubmenuItems:e,onSetup:n.onMenuSetup})},dA={name:"lineheight",text:"Line height",icon:"line-height",getOptions:hash:function(t){return function(t,n){return fA(t,n).map((function(t){return t.value+t.unit}))}(t,["fixed","relative","empty"]).getOr(t)},display:b,watcher:getCurrent:setCurrent:function(t,n){return t.execCommand("LineHeight",!1,n)}},mA=function(t){lA(t,dA),function(t){var n=A.from(function(t){return t.getParam("content_langs",void 0,"array")}(t));return n.map((function(n){return{name:"language",text:"Language",icon:"language",getOptions:v(n),hash:display:function(t){return t.title},watcher:getCurrent:function(t){var n=At.fromDom(t.selection.getNode());return Dr(n,()},setCurrent:onToolbarSetup:}))}(t).each((function(n){return lA(t,n)}))},gA=function(t,n){!function(t,n){var e=zB(0,n,jB(t));t.ui.registry.addNestedMenuItem("align",{text:n.shared.providers.translate("Align"),getSubmenuItems:function(){return e.items.validateItems(e.getStyleItems())}})}(t,n),function(t,n){var e=zB(0,n,qB(t));t.ui.registry.addNestedMenuItem("fontformats",{text:n.shared.providers.translate("Fonts"),getSubmenuItems:function(){return e.items.validateItems(e.getStyleItems())}})}(t,n),function(t,n){var e=_({type:"advanced"},n.styleselect),o=zB(0,n,tM(t,e));t.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}})}(t,n),function(t,n){var e=zB(0,n,ZB(t));t.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return e.items.validateItems(e.getStyleItems())}})}(t,n),function(t,n){var e=zB(0,n,$B(t));t.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:)}(t,n)},pA=function(t){return RB(t,"NodeChange",()},hA=function(t){!function(t){t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:pA(t),onAction:PB(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:PB(t,"indent")})}(t)},vA=bA=function(t){!t),function(t){SC.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],()}(t),function(t){SC.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(function(n){t.ui.registry.addToggleButton(n.name,{tooltip:n.text,icon:n.icon,onAction:PB(t,n.action),onSetup:IB(t,n.name)})}))}(t)},yA=function(t){bA(t),function(t){SC.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],(),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:vA(t,"code")})}(t)},xA=function(t,n){return RB(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",()},wA=function(t){!function(t){t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:xA(t,"hasUndo"),onAction:PB(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:xA(t,"hasRedo"),onAction:PB(t,"redo")})}(t),function(t){t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:xA(t,"hasUndo"),onAction:PB(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:xA(t,"hasRedo"),onAction:PB(t,"redo")})}(t)},SA=function(t){return RB(t,"VisualAid",(function(n){n.setActive(t.hasVisual)}))},kA=function(t){!function(t){t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:PB(t,"mceToggleVisualAid")})}(t),function(t){t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:SA(t),onAction:PB(t,"mceToggleVisualAid")})}(t)},CA=function(t,n){!function(t){W([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:PB(t,"JustifyNone")})}(t),yA(t),gA(t,n),wA(t),function(t){!function(t){t.addCommand("mceApplyTextcolor",(function(n,e){!t,n,e)})),t.addCommand("mceRemoveTextcolor",(function(n){!t,n)}))}(t);var n=xr(nx),e=xr(nx);cx(t,"forecolor","forecolor","Text color",n),cx(t,"backcolor","hilitecolor","Background color",e),sx(t,"forecolor","forecolor","Text color"),sx(t,"backcolor","hilitecolor","Background color")}(t),kA(t),hA(t),mA(t)},OA=_A=function(t){return"longpress"===t.type||0===t.type.indexOf("touch")},TA=function(t,n){var e=pb.DOM.getPos(t);return n,e.x,e.y)},EA=function(t,n){return"contextmenu"===n.type||"longpress"===n.type?t.inline?function(t){if(_A(t)){var n=t.touches[0];return OA(n.pageX,n.pageY)}return OA(t.pageX,t.pageY)}(n):TA(t.getContentAreaContainer(),n)):DA(t)},DA=BA=function(t,n,e){switch(e){case"node":return function(t){return{type:"node",node:A.some(At.fromDom(t.selection.getNode())),root:At.fromDom(t.getBody())}}(t);case"point":return EA(t,n);case"selection":return DA(t)}},MA=AA={onLtr:function(){return[rc,Za,tc,nc,ec,oc,ch,sh,ah,ih,uh,rh]},onRtl:,FA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},IA=function(t,n,e,o,r,i,u){var a=function(t,n,e){var o=BA(t,n,e);return _({bubble:vs(0,"point"===e?12:0,FA),layouts:AA,overrides:{maxWidthFunction:GD(),maxHeightFunction:ms()}},o)}(t,n,i);LO(e,hv.CLOSE_ON_EXECUTE,o,!0).map(()},RA=function(t,n,e,o,r,i){var u=pn(),a=u.os.isiOS(),c=u.os.isOSX(),s=u.os.isAndroid(),f=u.deviceType.isTouch(),l=function(){var u=e();IA(t,n,u,o,r,i,!(s||a||c&&f))};if((c||a)&&"node"!==i){var d=function(){!function(t){var n=t.selection.getRng(),e=function(){hh.setEditorTimeout(t,(,10),i()};t.once("touchend",e);var o=t.on("mousedown",o,!0);var r=function(){return i()};t.once("longpresscancel",r);var i=(t),l()};!function(t,n){var e=t.selection;if(e.isCollapsed()||n.touches.length<1)return!1;var o=n.touches[0],r=e.getRng();return sf(t.getWin(),Us.domRange(r)).exists(()}(t,n)?(t.once("selectionchange",d),t.once("touchend",()):d()}else l()},VA=PA=function(t){return t.getParam("contextmenu_never_use_native",!1,"boolean")},HA=function(t){return function(t,n,e){var o=t.ui.registry.getAll().contextMenus;return A.from(t.getParam(n)).map(VA).getOrThunk((function(){return j(VA(e),(function(t){return bt(o,t)}))}))}(t,"contextmenu","link linkchecker image imagetools table spellchecker configurepermanentpen")},zA=function(t){return r(t)?"|"===t:"separator"===t.type},NA={type:"separator"},LA=function(t){var n,e=if(r(t))return t;switch(t.type){case"separator":return NA;case"submenu":return _(_({type:"nestedmenuitem"},e(t)),{getSubmenuItems:);default:return _(_({type:"menuitem"},e(t)),{onAction:(n=t.onAction,function(){return n()})})}},WA=function(t,n){if(0===n.length)return t;var e=it(t).filter((function(t){return!zA(t)})),o=e.fold((function(){return[]}),();return t.concat(o).concat(n).concat([NA])},UA=function(t,n){return"longpress"!==n.type&&(2!==n.button||n.target===t.getBody()&&""===n.pointerType)},jA=function(t,n){return UA(t,n)?t.selection.getStart(!0):n.target},GA=function(t,n,e){var o=pn().deviceType.isTouch,i=Zu(Jp.sketch({dom:{tag:"div"},lazySink:n,onEscape:function(){return t.focus()},onShow:function(){return e.setContextMenuState(!0)},onHide:fireDismissalEventInstead:{},inlineBehaviours:yc([cp("dismissContextMenu",[Pi(xi(),()])])})),u=function(t){return Jp.hide(i)},a=function(n){if(PA(t)&&n.preventDefault(),!function(t,n){return n.ctrlKey&&!PA(t)}(t,n)&&!function(t){return!1===t.getParam("contextmenu")}(t)){var u=function(t,n){var e=function(t){return t.getParam("contextmenu_avoid_overlap","","string")}(t),o=UA(t,n)?"selection":"point";if(Dt(e)){var r=jA(t,n);return Fx(At.fromDom(r),e)?"node":o}return o}(t,n);(o()?RA:MA)(t,n,(function(){var e=jA(t,n),o=t.ui.registry.getAll(),i=HA(t);return function(t,n,e){var o=X(n,(function(n,o){return vt(t,o.toLowerCase()).map((function(t){var o=t.update(e);if(r(o))return WA(n,o.split(" "));if(o.length>0){var i=L(o,LA);return WA(n,i)}return n})).getOrThunk(()}),[]);return o.length>0&&zA(o[o.length-1])&&o.pop(),o}(o.contextMenus,i,e)}),e,i,u)}};t.on("init",()},XA=wr([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),qA=function(t){return ,YA=KA=function(t){return ,JA=function(t,n,e){return t.fold(KA([YA(e),qA(n)]),KA([qA(n)]),KA([]))},$A=function(t,n,e){return t.fold(KA([YA(e)]),KA([]),KA([YA(n)]))},QA=function(t,n,e){return t.fold(KA([]),KA([qA(e)]),KA([YA(n),qA(e)]))},ZA=function(t,n,e){var o=t.fold((function(t,n){return{position:A.some("absolute"),left:A.some(t+"px"),top:A.some(n+"px")}}),(,();return _({right:A.none(),bottom:A.none()},o)},tF=function(t,n,e,o){var r=function(t,r){return ;return t.fold(r(QA,nF),r($A,eF),r(JA,oF))},nF=XA.offset,eF=XA.absolute,oF=XA.fixed,rF=function(t,n){var e=Gn(t,n);return s(e)?NaN:parseInt(e,10)},iF=function(t,n,e,o){return function(t,n){var e=t.element,o=rF(e,n.leftAttr),r=rF(e,n.topAttr);return isNaN(o)||isNaN(r)?A.none():A.some(de(o,r))}(t,n).fold((function(){return e}),()},uF=function(t,n,e,o,r,i){var u=iF(t,n,e,o),a=n.mustSnap?sF(t,n,u,r,i):fF(t,n,u,r,i),c=JA(u,r,i);return function(t,n,e){var o=t.element;Un(o,n.leftAttr,e.left+"px"),Un(o,n.topAttr,e.top+"px")}(t,n,c),a.fold((,()},aF=function(t,n){!function(t,n){var e=t.element;Yn(e,n.leftAttr),Yn(e,n.topAttr)}(t,n)},cF=function(t,n,e,o){return at(t,(function(t){var r=t.sensor,i=function(t,n,e,o,r,i){var u=$A(t,r,i),a=$A(n,r,i);return Math.abs(u.left-a.left)<=e&&Math.abs(u.top-a.top)<=o}(n,r,t.range.left,t.range.top,e,o);return i?A.some({output:tF(t.output,n,e,o),extra:t.extra}):A.none()}))},sF=function(t,n,e,o,r){var i=n.getSnapPoints(t);return cF(i,e,o,r).orThunk((function(){var t=X(i,(function(t,n){var i=n.sensor,u=function(t,n,e,o,r,i){var u=$A(t,r,i),a=$A(n,r,i),c=Math.abs(u.left-a.left),s=Math.abs(u.top-a.top);return de(c,s)}(e,i,n.range.left,n.range.top,o,r);return t.deltas.fold((,()}),{deltas:A.none(),snap:A.none()});return t.snap.map(()}))},fF=function(t,n,e,o,r){var i=n.getSnapPoints(t);return cF(i,e,o,r)},lF=Object.freeze({__proto__:null,snapTo:function(t,n,e,o){var r=n.getTarget(t.element);if(n.repositionTarget){var i=wn(t.element),u=Be(i),a=yE(r),c=function(t,n,e){return{coord:tF(t.output,t.output,n,e),extra:t.extra}}(o,u,a),s=ZA(c.coord,0,a);Zn(r,s)}}}),dF="data-initial-z-index",mF=function(t,n){t.getSystem().addToGui(n),function(t){On(t.element).filter(Vt).each(()}(n)},gF=function(t){!function(t){On(t.element).filter(Vt).each(()}(t),t.getSystem().removeFromGui(t)},pF=function(t,n,e){return t.getSystem().build(qx.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[n]},events:e}))},hF=fr("snaps",[Ko("getSnapPoints"),_a("onSensor"),Ko("leftAttr"),Ko("topAttr"),lr("lazyViewport",Ne),lr("mustSnap",!1)]),vF=[lr("useFixed",k),Ko("blockerClass"),lr("getTarget",b),lr("onDrag",p),lr("repositionTarget",!0),lr("onDrop",p),vr("getBounds",Ne),hF],bF=function(t){return(n=ee(t,"left"),e=ee(t,"top"),o=ee(t,"position"),r=n.isSome()&&e.isSome()&&o.isSome()?A.some(r(n.getOrDie(),e.getOrDie(),o.getOrDie())):A.none()).getOrThunk(();var n,e,o,r},yF=function(t,n,e,o,r,i,u){return function(t,n,e,o,r){var i=r.bounds,u=$A(n,e,o),a=ja(u.left,i.x,i.x+i.width-r.width),c=ja(u.top,i.y,i.y+i.height-r.height),s=eF(a,c);return n.fold((function(){var t=QA(s,e,o);return nF(t.left,t.top)}),v(s),()}(0,n.fold((function(){var t,n,u,a=(t=e,n=i.left,u=i.top,t.fold((function(t,e){return nF(t+n,e+u)}),(function(t,e){return eF(t+n,e+u)}),()),c=JA(a,o,r);return oF(c.left,c.top)}),(),o,r,u)},xF=function(t,n){return{bounds:t.getBounds(),height:fe(n.element),width:be(n.element)}},wF=function(t,n,e,o,r){var i=e.update(o,r),u=e.getStartData().getOrThunk((function(){return xF(n,t)}));i.each((function(e){!function(t,n,e,o){var r=n.getTarget(t.element);if(n.repositionTarget){var i=wn(t.element),u=Be(i),a=yE(r),c=bF(r),s=yF(t,n.snaps,c,u,a,o,e),f=ZA(s,0,a);Zn(r,f)}n.onDrag(t,r,o)}(t,n,u,e)}))},SF=function(t,n,e,o){n.each(gF),e.snaps.each((function(n){aF(t,n)}));var r=e.getTarget(t.element);o.reset(),e.onDrop(t,r)},kF=function(t){return function(n,e){var o=return Ii(E([Pi(hi(),()],t(n,e,o),!0))}},CF=Object.freeze({__proto__:null,getData:getDelta:function(t,n){return de(n.left-t.left,n.top-t.top)}}),OF=function(t,n,e){return[Pi(zr(),(function(o,r){if(0===r.event.raw.button){r.stop();var i=u=Ix(i,200),a={drop:i,delayDrop:u.schedule,forceDrop:i,move:,c=pF(o,t.blockerClass,function(t){return Ii([Pi(zr(),t.forceDrop),Pi(Wr(),t.drop),Pi(Nr(),(function(n,e){t.move(e.event)})),Pi(Lr(),t.delayDrop)])}(a));e(o),mF(o,c)}}))]},_F=E(E([],vF,!0),[Ba("dragger",{handlers:kF(OF)})],!1),TF=Object.freeze({__proto__:null,getData:function(t){var n=t.raw.touches;return 1===n.length?function(t){var n=t[0];return A.some(de(n.clientX,n.clientY))}(n):A.none()},getDelta:),EF=function(t,n,e){var o=Qc(),r=function(e){SF(e,o.get(),t,n),o.clear()};return[Pi(Rr(),(function(i,u){u.stop();var a=function(){return r(i)},c={drop:a,delayDrop:p,forceDrop:a,move:,s=pF(i,t.blockerClass,function(t){return Ii([Pi(Rr(),t.forceDrop),Pi(Pr(),t.drop),Pi(Hr(),t.drop),Pi(Vr(),()])}(c));o.set(s);e(i),mF(i,s)})),Pi(Vr(),(),Pi(Pr(),(function(t,n){n.stop(),r(t)})),Pi(Hr(),r)]},DF=_F,BF=E(E([],vF,!0),[Ba("dragger",{handlers:kF(EF)})],!1),MF=E(E([],vF,!0),[Ba("dragger",{handlers:kF(()})],!1),AF=Object.freeze({__proto__:null,mouse:DF,touch:BF,mouseOrTouch:MF}),FF=Object.freeze({__proto__:null,init:function(){var t=A.none(),n=A.none(),e=v({});return xu({readState:e,reset:update:function(n,e){return n.getData(e).bind((function(e){return n,e)}))},getStartData:function(){return n},setStartData:)}}),IF=kc({branchKey:"mode",branches:AF,name:"dragging",active:{events:,extra:{snap:,state:FF,apis:lF}),RF=function(t,n,e,o,r,i){return t.fold((,()},VF=function(t,n,e){return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(t,o){var r=o.td;((n.get(),r)||(n.set(r),e(r))},mustSnap:!0}},PF=function(t){return bh(vh.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:yc([IF.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),fS.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},HF=function(t,n){var e=xr([]),o=xr([]),r=xr(!1),i=Qc(),u=Qc(),a=function(t){var e=ze(t);return RF(l.getOpt(n),t,e.x,e.y,e.width,e.height)},c=function(t){var e=ze(t);return RF(d.getOpt(n),t,e.right,e.bottom,e.width,e.height)},s=VF((function(){return L(e.get(),(function(t){return a(t)}))}),i,(function(n){u.get().each((function(e){t.fire("TableSelectorChange",{start:n,finish:e})}))})),f=VF((function(){return L(o.get(),(function(t){return c(t)}))}),u,(),l=PF(s),d=PF(f),m=Zu(l.asSpec()),g=Zu(d.asSpec()),p=function(n,e,o,r){var i=o(e);IF.snapTo(n,i);!function(n,e,o,r){var i=e.dom.getBoundingClientRect();ie(n.element,"display");var u=Cn(At.fromDom(t.getBody())).dom.innerHeight,a=o(i),c=r(i,u);(a||c)&&$n(n.element,"display","none")}(n,e,(,()},h=function(t){return p(m,t,a,"top")},v=pn().deviceType.isTouch()&&(t.on("TableSelectionChange",(),t.on("ResizeEditor ResizeWindow ScrollContent",(),t.on("TableSelectionClear",())},zF=function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1},NF=function(t,n,e){n.delimiter||(n.delimiter="\xbb");return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:yc([np.config({mode:"flow",selector:"div[role=button]"}),Kd.config({disabled:e.isDisabled}),Xb(),tw.config({}),ap.config({}),cp("elementPathEvents",[Gi((function(o,r){t.shortcuts.add("alt+F11","focus statusbar elementpath",(function(){return np.focusIn(o)})),t.on("NodeChange",(function(r){var i=function(n){for(var e=[],o=n.length;o-- >0;){var r=n[o];if(1===r.nodeType&&!zF(r)){var i=t.fire("ResolveName",{name:r.nodeName.toLowerCase(),target:r});if(i.isDefaultPrevented()||e.push({name:i.name,element:r}),i.isPropagationStopped())break}}return e}(r.parents);i.length>0?ap.set(o,function(o){var r=L(o||[],(),i={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+n.delimiter+" "}};return X(r.slice(1),(,[r[0]])}(i)):ap.set(o,[])}))}))])]),components:[]}};!LB||(LB={}));var LF=function(t,n,e){var o=At.fromDom(t.getContainer()),r=function(t,n,e,o,r){var i={};return i.height=FM(o+n.top,xb(t),Sb(t)),e===LB.Both&&(i.width=FM(r+n.left,yb(t),wb(t))),i}(t,n,e,se(o),ve(o));ft(r,(),t)},WF=function(t,n,e,o){var r=de(20*e,20*o);return LF(t,r,n),A.some(!0)},UF=function(t,n){var e=function(t){var n=!t.hasPlugin("autoresize"),e=t.getParam("resize",n);return!1===e?LB.None:"both"===e?LB.Both:LB.Vertical}(t);return e===LB.None?A.none():A.some(Eh("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:n.translate("Resize")},behaviours:[IF.config({mode:"mouse",repositionTarget:!1,onDrag:blockerClass:"tox-blocker"}),np.config({mode:"special",onLeft:onRight:function(){return WF(t,e,1,0)},onUp:onDown:),tw.config({}),mp.config({})]},n.icons))},jF=function(t,n){var e=function(){var e=[];return t.getParam("elementpath",!0,"boolean")&&e.push(NF(t,{},n)),t.hasPlugin("wordcount")&&e.push(function(t,n){var e,o=function(t,e,o){return ap.set(t,[Ju(n.translate(["{0} "+o,e[o]]))])};return vh.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:yc([Yb(n.isDisabled),Xb(),tw.config({}),ap.config({}),_l.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),cp("wordcount-events",[Yi((),Gi(()])]),eventOrder:(e={},e[ai()]=["disabling","alloy.base.behaviour","wordcount-events"],e)})}(t,n)),t.getParam("branding",!0,"boolean")&&e.push(function(){var t=yh.translate(["Powered by {0}","Tiny"]);return{dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+t+'">'+t+"</a>"}}}()),e.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:e}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:function(){var o=e(),r=UF(t,n);return o.concat(r.toArray())}()}},GF=function(t){var n,e=t.inline,o=e?HM:BM,r=Pb(t)?qE:vE,i=A.none(),u=pn(),a=u.browser.isIE()?["tox-platform-ie"]:[],c=u.deviceType.isTouch()?["tox-platform-touch"]:[],s=Ab(t),f=Rb(t),l=yh.isRtl()?{attributes:{dir:"rtl"}}:{},d={attributes:(n={},n[Ss]=s?Lc.BottomToTop:Lc.TopToBottom,n)},m=g=h=Zu(function(){var t=bn(Nn(),f)&&"grid"===te(f,"display"),n={dom:_({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(a).concat(c)},l),behaviours:yc([Pf.config({useFixed:function(){return r.isDocked(m)}})])},e={dom:{styles:{width:document.body.clientWidth+"px"}},events:Ii([Pi(vi(),g)])};return uo(n,t?e:{})}()),v=function(){return Ue.value(h)},b=bh({dom:{tag:"div",classes:["tox-anchorbar"]}}),y=function(){return i.bind((function(t){return kB.getThrobber(t)})).getOrDie("Could not find throbber element")},x=oE(h,t,(function(){return i.bind((function(t){return b.getOpt(t)})).getOrDie("Could not find a anchor bar element")})),w=kB.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:x,onEscape:function(){t.focus()}}),S=Eb(t),k=kB.parts.toolbar(_({dom:{tag:"div",classes:["tox-toolbar"]},getSink:v,providers:x.shared.providers,onEscape:function(){t.focus()},type:S,lazyToolbar:lazyHeader:,d)),C=kB.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:x.shared.providers,onEscape:type:S}),O=kB.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),T=kB.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),E=kB.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:x}),D=t.getParam("statusbar",!0,"boolean")&&!e?A.some(jF(t,x.shared.providers)):A.none(),B={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[O,T]},M=_b(t),F=Cb(t),I=kb(t),R=kB.parts.header({dom:_({tag:"div",classes:["tox-editor-header"]},d),components:K([I?[w]:[],M?[C]:F?[k]:[],Ib(t)?[]:[b.asSpec()]]),sticky:Pb(t),editor:t,sharedBackstage:x.shared}),V=K([s?[]:[R],e?[]:[B],s?[R]:[]]),P=K([[{dom:{tag:"div",classes:["tox-editor-container"]},components:V}],e?[]:D.toArray(),[E]]),H=Vb(t),z=_(_({role:"application"},yh.isRtl()?{dir:"rtl"}:{}),H?{"aria-hidden":"true"}:{}),N=Zu(kB.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(e?["tox-tinymce-inline"]:[]).concat(s?["tox-tinymce--toolbar-bottom"]:[]).concat(c).concat(a),styles:_({visibility:"hidden"},H?{opacity:"0",border:"0"}:{}),attributes:z},components:P,behaviours:yc([Xb(),Kd.config({disableClass:"tox-tinymce--disabled"}),np.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}));i=A.some(N),t.shortcuts.add("alt+F9","focus menubar",(function(){kB.focusMenubar(N)})),t.shortcuts.add("alt+F10","focus toolbar",(function(){kB.focusToolbar(N)})),t.addCommand("ToggleToolbarDrawer",(function(){kB.toggleToolbarDrawer(N)})),t.addQueryStateHandler("ToggleToolbarDrawer",(function(){return kB.isToolbarDrawerToggled(N)}));var L=Yx(N),U=Yx(h);!function(t,n,e){var o=function(t,o){W([n,e],(function(n){n.broadcastEvent(t,o)}))},r=function(t,o){W([n,e],()},i=function(t){return r(al(),{target:t.target})},u=Tc(),a=ts(u,"touchstart",i),c=ts(u,"touchmove",(function(t){return o(gi(),t)})),s=ts(u,"touchend",(),f=ts(u,"mousedown",i),l=ts(u,"mouseup",(),d=function(t){return r(al(),{target:At.fromDom(t.target)})},m=function(t){0===t.button&&r(sl(),{target:At.fromDom(t.target)})},g=function(){W(t.editorManager.get(),()},p=h=function(t){r(cl(),{}),o(vi(),es(t))},v=function(){return r(cl(),{})},b=function(n){n.state&&r(al(),{target:At.fromDom(t.getContainer())})},y=function(t){r(al(),{target:At.fromDom(t.relatedTarget.getContainer())})};t.on("PostRender",(),t.on("remove",(),t.on("detach",()}(t,L,U);var j=function(){var n=AM(IM(t)),e=AM(t));return t.inline||(re("div","width",e)&&$n(N.element,"width",e),re("div","height",n)?$n(N.element,"height",n):$n(N.element,"height","200px")),n};return{mothership:L,uiMothership:U,backstage:x,renderUI:function(){r.setup(t,x.shared,m),CA(t,x),GA(t,v,x),function(t){var n=t.ui.registry.getAll().sidebars;W(ct(n),(function(e){var o=n[e],r=function(){return xt(A.from(t.queryCommandValue("ToggleSidebar")),e)};t.ui.registry.addToggleButton(e,{icon:o.icon,tooltip:o.tooltip,onAction:onSetup:function(n){var e=return t.on("ToggleSidebar",e),})}))}(t),RD(t,y,x.shared),lt(t),();var n=t.ui.registry.getAll(),e=n.buttons,i=n.menuItems,u=n.contextToolbars,a=n.sidebars,c=Ob(t),s={menuItems:i,menus:Hb(t),menubar:zb(t),toolbar:c.getOrThunk((function(){return t)})),allowToolbarGroups:S===pv.floating,buttons:e,sidebar:a};aA(t,u,h,{backstage:x}),HF(t,h);var f=t.getElement(),l=j(),d={mothership:L,uiMothership:U,outerContainer:N},g={targetNode:f,height:l};return o.render(t,d,s,x,g)},getUi:},XF=v([Ko("lazySink"),rr("dragBlockClass"),vr("getBounds",Ne),lr("useTabstopAt",C),lr("eventOrder",{}),Tl("modalBehaviours",[np]),Ta("onExecute"),Da("onEscape")]),qF={sketch:b},YF=v([rd({name:"draghandle",overrides:),ed({schema:[Ko("dom")],name:"title"}),ed({factory:qF,schema:[Ko("dom")],name:"close"}),ed({factory:qF,schema:[Ko("dom")],name:"body"}),rd({factory:qF,schema:[Ko("dom")],name:"footer"}),od({factory:{sketch:,schema:[lr("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),lr("components",[])],name:"blocker"})]),KF=Md({name:"ModalDialog",configFields:XF(),partFields:YF(),factory:function(t,n,e,o){var r,i=Qc(),u=ou("modal-events"),a=_(_({},t.eventOrder),((r={})[bi()]=[u].concat(t.eventOrder["alloy.system.attached"]||[]),r));return{uid:t.uid,dom:t.dom,components:n,apis:{show:hide:getBody:function(n){return vd(n,t,"body")},getFooter:function(n){return vd(n,t,"footer")},setIdle:function(t){MD.unblock(t)},setBusy:,eventOrder:a,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Dl(t.modalBehaviours,[ap.config({}),np.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),MD.config({getRoot:i.get}),cp(u,[Gi((function(n){!function(t,n){var e=Xn(t,"id").fold((function(){var t=ou("dialog-label");return Un(n,"id",t),t}),b);Un(t,"aria-labelledby",e)}(n.element,vd(n,t,"title").element),function(t,n){var e=A.from(Gn(t,"id")).fold((,b);Un(t,"aria-describedby",e)}(n.element,vd(n,t,"body").element)}))])])}},apis:{show:function(t,n){t.show(n)},hide:function(t,n){t.hide(n)},getBody:function(t,n){return t.getBody(n)},getFooter:function(t,n){return t.getFooter(n)},setBusy:function(t,n,e){t.setBusy(n,e)},setIdle:function(t,n){t.setIdle(n)}}}),JF=Co([Qo("type"),Qo("name")].concat(Yv)),$F=Fo,QF=[Xo("name","name",co((function(){return ou("button-name")})),Ao),ar("icon"),pr("align","end",["start","end"]),hr("primary",!1),hr("disabled",!1)],ZF=E(E([],QF,!0),[Qo("text")],!1),tI=E([Zo("type",["submit","cancel","custom"])],ZF,!0),nI=E([Zo("type",["menu"]),ar("text"),ar("tooltip"),ar("icon"),or("items",JF)],QF,!0),eI=Go("type",{submit:tI,cancel:tI,custom:tI,menu:nI}),oI=[Qo("type"),Qo("text"),Zo("level",["info","warn","error","success"]),Qo("icon"),lr("url","")],rI=Co(oI),iI=[Qo("type"),Qo("text"),hr("disabled",!1),hr("primary",!1),Xo("name","name",co((function(){return ou("button-name")})),Ao),ar("icon"),hr("borderless",!1)],uI=Co(iI),aI=[Qo("type"),Qo("name"),Qo("label"),hr("disabled",!1)],cI=Co(aI),sI=Fo,fI=[Qo("type"),Qo("name")],lI=fI.concat([ar("label")]),dI=lI.concat([lr("columns","auto")]),mI=Co(dI),gI=Eo([Qo("value"),Qo("text"),Qo("icon")]),pI=Co(lI),hI=Ao,vI=Co(lI),bI=Ao,yI=fI.concat([gr("tag","textarea"),Qo("scriptId"),Qo("scriptUrl"),function(t,n){return dr(t,n,Vo)}("settings",void 0)]),xI=fI.concat([gr("tag","textarea"),tr("init")]),wI=zo((),SI=Ao,kI=Co(lI),CI=Oo(vo),OI=function(t){return[Qo("type"),$o("columns"),t]},_I=[Qo("type"),Qo("html"),pr("presets","presentation",["presentation","document"])],TI=Co(_I),EI=lI.concat([hr("sandboxed",!0)]),DI=Co(EI),BI=Ao,MI=lI.concat([Jo("currentState",Co([Ko("blob"),Qo("url")]))]),AI=Co(MI),FI=lI.concat([ar("inputMode"),ar("placeholder"),hr("maximized",!1),hr("disabled",!1)]),II=Co(FI),RI=Ao,VI=function(t){return[Qo("type"),Qo("label"),t]},PI=[Qo("text"),Qo("value")],HI=[Qo("text"),or("items",function(t,n){return function(t,n){var e=Nt(n);return{extract:toString:}(0,n)}(0,(function(){return zI})))],zI=_o([Co(PI),Co(HI)]),NI=lI.concat([or("items",zI),hr("disabled",!1)]),LI=Co(NI),WI=Ao,UI=lI.concat([er("items",[Qo("text"),Qo("value")]),mr("size",1),hr("disabled",!1)]),jI=Co(UI),GI=Ao,XI=lI.concat([hr("constrain",!0),hr("disabled",!1)]),qI=Co(XI),YI=Co([Qo("width"),Qo("height")]),KI=[Qo("type"),or("header",Ao),or("cells",Oo(Ao))],JI=Co(KI),$I=lI.concat([ar("placeholder"),hr("maximized",!1),hr("disabled",!1)]),QI=Co($I),ZI=Ao,tR=lI.concat([pr("filetype","file",["image","media","file"]),lr("disabled",!1)]),nR=Co(tR),eR=Co([Qo("value"),lr("meta",{})]),oR=function(t){return Xo("items","items",{tag:"required",process:{}},Oo(zo(()))},rR=wo((function(){return Ho("type",{alertbanner:rI,bar:Co((t=oR("bar"),[Qo("type"),t])),button:uI,checkbox:cI,colorinput:pI,colorpicker:vI,dropzone:kI,grid:Co(OI(oR("grid"))),iframe:DI,input:II,listbox:LI,selectbox:jI,sizeinput:qI,textarea:QI,urlinput:nR,customeditor:wI,htmlpanel:TI,imagetools:AI,collection:mI,label:Co(VI(oR("label"))),table:JI,panel:uR});var t})),iR=[Qo("type"),lr("classes",[]),or("items",rR)],uR=Co(iR),aR=[Xo("name","name",co((),Ao),Qo("title"),or("items",rR)],cR=[Qo("type"),er("tabs",aR)],sR=Co(cR),fR=ZF,lR=eI,dR=Co([Qo("title"),Jo("body",Ho("type",{panel:uR,tabpanel:sR})),gr("size","normal"),or("buttons",lR),lr("initialData",{}),vr("onAction",p),vr("onChange",p),vr("onSubmit",p),vr("onClose",p),vr("onCancel",p),lr("onTabChange",p)]),mR=Co(E([Zo("type",["cancel","custom"])],fR,!0)),gR=Co([Qo("title"),Qo("url"),ur("height"),ur("width"),sr("buttons",mR),vr("onAction",p),vr("onCancel",p),vr("onClose",p),vr("onMessage",p)]),pR=hR=vR={checkbox:sI,colorinput:hI,colorpicker:bI,dropzone:CI,input:RI,iframe:BI,sizeinput:YI,selectbox:GI,listbox:WI,size:YI,textarea:ZI,urlinput:eR,customeditor:SI,collection:gI,togglemenuitem:$F},bR=function(t){var n=t),e=J(n,(function(t){return t).fold((function(){return[]}),()}));return Co(e)},yR=function(t){return{internalDialog:Wo(Lo("dialog",dR,t)),dataValidator:bR(t),initialData:t.initialData}},xR={open:openUrl:redial:function(t){return yR(t)}},wR=function(t){var n=[],e={};return ft(t,(),n.length>0?Ue.error(n):Ue.value(e)},SR=function(t,n){var e=bh(cC.sketch(());return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[e.asSpec()]}],behaviours:yc([np.config({mode:"acyclic",useTabstopAt:w(PC)}),vC(e),_C(e,{postprocess:)])}},kR=Bd({name:"TabButton",configFields:[lr("uid",void 0),Ko("value"),Xo("dom","dom",fo((),Do()),rr("action"),lr("domModification",{}),Tl("tabButtonBehaviours",[mp,np,_l]),Ko("view")],factory:),CR=v([Ko("tabs"),Ko("dom"),lr("clickToDismiss",!1),Tl("tabbarBehaviours",[um,np]),Ca(["tabClass","selectedClass"])]),OR=id({factory:kR,name:"tabs",unit:"tab",overrides:function(t){var n=function(t,n){um.dehighlight(t,n),Di(t,Oi(),{tabbar:t,button:n})},e=return{action:function(o){var r=o.getSystem().getByUid(t.uid).getOrDie(),i=um.isHighlighted(r,o);(i&&t.clickToDismiss?n:i?p:e)(r,o)},domModification:{classes:[t.markers.tabClass]}}}}),_R=v([OR]),TR=Md({name:"Tabbar",configFields:CR(),partFields:_R(),factory:),ER=Bd({name:"Tabview",configFields:[Tl("tabviewBehaviours",[ap])],factory:),DR=v([lr("selectFirst",!0),_a("onChangeTab"),_a("onDismissTab"),lr("tabs",[]),Tl("tabSectionBehaviours",[])]),BR=ed({factory:TR,schema:[Ko("dom"),nr("markers",[Ko("tabClass"),Ko("selectedClass")])],name:"tabbar",defaults:),MR=ed({factory:ER,name:"tabview"}),AR=v([BR,MR]),FR=Md({name:"TabSection",configFields:DR(),partFields:AR(),factory:function(t,n,e,o){var r=function(n,e){hd(n,t,"tabbar").each(()};return{uid:t.uid,dom:t.dom,components:n,behaviours:El(t.tabSectionBehaviours),events:Ii(K([t.selectFirst?[Gi(()]:[],[Pi(Ci(),(function(n,e){!function(n){var e=_l.getValue(n);hd(n,t,"tabview").each((function(o){var r=q(t.tabs,(function(t){return t.value===e}));r.each(()}))}(e.event.button)})),Pi(Oi(),()]])),apis:{getViewItems:showTab:function(t,n){r(t,(function(t){var e=um.getCandidates(t);return q(e,().filter(()}))}}}},apis:{getViewItems:function(t,n){return t.getViewItems(n)},showTab:function(t,n,e){t.showTab(n,e)}}}),IR=function(t,n){$n(t,"height",n+"px"),pn().browser.isIE()?ie(t,"flex-basis"):$n(t,"flex-basis",n+"px")},RR=function(t,n,e){ua(t,'[role="dialog"]').each((function(t){ca(t,'[role="tablist"]').each((function(o){e.get().map((function(e){return $n(n,"height","0"),$n(n,"flex-basis","0"),Math.min(e,function(t,n,e){var o,r=kn(t).dom,i=ua(t,".tox-dialog-wrap").getOr(t);o="fixed"===te(i,"position")?Math.max(r.clientHeight,window.innerHeight):Math.max(r.offsetHeight,r.scrollHeight);var u=se(n),a=n.dom.offsetLeft>=e.dom.offsetLeft+ve(e)?Math.max(se(e),u):u,c=parseInt(te(t,"margin-top"),10)||0,s=parseInt(te(t,"margin-bottom"),10)||0;return o-(se(t)+c+s-a)}(t,n,o))})).each((function(t){IR(n,t)}))}))}))},VR=function(t){return ca(t,'[role="tabpanel"]')},PR=function(t){var n=function(){var n=Qc(),e=[Gi((function(e){var o=e.element;VR(o).each((function(r){$n(r,"visibility","hidden"),e.getSystem().getByDom(r).toOptional().each((function(e){var o=function(t,n,e){return L(t,()}(t,r,e),i=function(t){return rt(et(t,())}(o);i.fold(n.clear,n.set)})),RR(o,r,n),ie(r,"visibility"),function(t,n){rt(t).each(()}(t,e),hh.requestAnimationFrame(()}))})),Pi(vi(),(),Pi(gw,(function(t,e){var o=t.element;VR(o).each((function(t){var e=Bc(In(t));$n(t,"visibility","hidden");var r=ee(t,"height").map((function(t){return parseInt(t,10)}));ie(t,"height"),ie(t,"flex-basis");var i=t.dom.getBoundingClientRect().height;r.forall(()?(n.set(i),RR(o,t,n)):r.each((function(n){IR(t,n)})),ie(t,"visibility"),e.each(Ec)}))}))];return{extraEvents:e,selectFirst:!1}}();return{smartTabHeight:n,naiveTabHeight:{extraEvents:[],selectFirst:!0}}},HR="send-data-to-section",zR="send-data-to-view",NR=function(t,n){var e=xr({}),o=function(t){var n=_l.getValue(t),o=wR(n).getOr({}),r=e.get(),i=uo(r,o);e.set(i)},r=i=xr(null),u=L(t.tabs,(),a=PR(u).smartTabHeight;return FR.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:tabs:u,components:[FR.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[TR.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:yc([tw.config({})])}),FR.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:a.selectFirst,tabSectionBehaviours:yc([cp("tabpanel",a.extraEvents),np.config({mode:"acyclic"}),Rd.config({find:),_l.config({store:{mode:"manual",getValue:setValue:})])})},LR=ou("update-dialog"),WR=ou("update-title"),UR=ou("update-body"),jR=ou("update-footer"),GR=ou("body-send-message"),XR=function(t,n,e,o){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:_(_({},n.map((function(t){return{id:t}})).getOr({})),o?{"aria-live":"polite"}:{})},components:[],behaviours:yc([bC(0),iM.config({channel:UR,updateState:renderComponents:function(t){return"tabpanel"===t.body.type?[NR(t.body,e)]:[SR(t.body,e)]},initialData:t})])}},qR=iy.deviceType.isTouch(),YR=function(t,n){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,n]}},KR=function(t,n){return KF.parts.close(vh.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":n.translate("Close")}},action:t,buttonBehaviours:yc([tw.config({})])}))},JR=function(){return KF.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},$R=function(t,n){return KF.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:AD("<p>"+n.translate(t)+"</p>")}]}]})},QR=function(t){return KF.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},ZR=function(t,n){return[qx.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),qx.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:n})]},tV=function(t){var n,e="tox-dialog",o=e+"-wrap",r=o+"__backdrop",i=e+"__disable-scroll";return KF.sketch({lazySink:t.lazySink,onEscape:useTabstopAt:dom:{tag:"div",classes:[e].concat(t.extraClasses),styles:_({position:"relative"},t.extraStyles)},components:E([t.header,t.body],t.footer.toArray(),!0),parts:{blocker:{dom:AD('<div class="'+o+'"></div>'),components:[{dom:{tag:"div",classes:qR?[r,r+"--opaque"]:[r]}}]}},dragBlockClass:o,modalBehaviours:yc(E([mp.config({}),cp("dialog-events",t.dialogEvents.concat([ji(jr(),(function(t,n){np.focusIn(t)}))])),cp("scroll-lock",[Gi((function(){Vu(Nn(),i)})),Xi(()])],t.extraBehaviours,!0)),eventOrder:_((n={},n[ai()]=["dialog-events"],n[bi()]=["scroll-lock","dialog-events","alloy.base.behaviour"],n[yi()]=["alloy.base.behaviour","dialog-events","scroll-lock"],n),t.eventOrder)})},nV=function(t){return vh.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[Eh("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:function(t){Ei(t,cw)}})},eV=function(t,n,e){var o=return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:_({},n.map((function(t){return{id:t}})).getOr({}))},components:o(t),behaviours:yc([iM.config({channel:WR,renderComponents:o})])}},oV=rV=function(t,n){return function(t,n){var e=KF.parts.title(eV(t,A.none(),n)),o=KF.parts.draghandle(oV()),r=KF.parts.close(nV(n)),i=[e].concat(t.draggable?[o]:[]).concat([r]);return qx.sketch({dom:AD('<div class="tox-dialog__header"></div>'),components:i})}({title:n.shared.providers.translate(t),draggable:n.dialog.isDraggableModal()},n.shared.providers)},iV=function(t,n,e){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":e.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:n,components:[{dom:AD('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},uV=function(t,n,e){return{onClose:function(){return e.closeWindow()},onBlock:onUnblock:},aV=function(t,n,e,o){var r;return Zu(tV(_(_({},t),{lazySink:o.shared.getSink,extraBehaviours:E([iM.config({channel:LR,updateState:function(t,n){return A.some(n)},initialData:n}),DC({})],t.extraBehaviours,!0),onEscape:function(t){Ei(t,cw)},dialogEvents:e,eventOrder:(r={},r[ui()]=[iM.name(),Oc.name()],r[bi()]=["scroll-lock",iM.name(),"messages","dialog-events","alloy.base.behaviour"],r[yi()]=["alloy.base.behaviour","dialog-events","messages",iM.name(),"scroll-lock"],r)})))},cV=function(t){return L(t,(function(t){return"menu"===t.type?function(t){var n=L(t.items,();return _(_({},t),{items:n})}(t):t}))},sV=function(t){return X(t,(function(t,n){return"menu"===n.type?X(n.items,(,t):t}),{})},fV=function(t,n){return[Li(jr(),VC),t(aw,(),t(cw,(),Pi(dw,(),Pi(lw,()]},lV=function(t,n){var e=function(n,e){return Pi(n,(function(n,r){o(n,(function(o,i){e(t(),o,r.event,n)}))}))},o=function(t,n){iM.getState(t).get().each((function(e){n(e,t)}))};return E(E([],fV(e,n),!0),[e(sw,(function(t,n,e){n.onAction(t,{name:e.name})}))],!1)},dV=function(t,n,e){var o=function(n,e){return Pi(n,(function(n,o){r(n,()}))},r=function(t,n){iM.getState(t).get().each(()};return E(E([],fV(o,n),!0),[o(fw,(function(t,n){return n.onSubmit(t)})),o(uw,(),o(sw,(function(t,n,o,r){var i=function(){return np.focusIn(r)},u=function(t){return qn(t,"disabled")||Xn(t,"aria-disabled").exists(()},a=In(r.element),c=Bc(a);n.onAction(t,{name:o.name,value:o.value}),Bc(a).fold(i,()})),o(mw,(),Xi(()],!1)},mV=function(t,n){var e=n.map((function(t){return t.footerButtons})).getOr([]),o=U(e,(),r=function(t,n){return qx.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:L(n,()})};return[r("start",o.pass),r("end",o.fail)]},gV=function(t,n){return{dom:AD('<div class="tox-dialog__footer"></div>'),components:[],behaviours:yc([iM.config({channel:jR,initialData:t,updateState:function(t,e){var o=L(e.buttons,(function(t){var e=bh(t,n));return{name:t.name,align:t.align,memento:e}}));return A.some({lookupByName:function(t,n){return function(t,n,e){return q(n,().bind(()}(t,o,n)},footerButtons:o})},renderComponents:mV})])}},pV=hV=function(t,n){if(t.getRoot().getSystem().isConnected()){var e=Rd.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return cC.getField(e,n).fold((,()}return A.none()},vV=function(t,n,e){var o=function(n){var e=t.getRoot();e.getSystem().isConnected()&&n(e)},i={getData:setData:function(n){o((function(o){var r=i.getData(),u=_(_({},r),n),a=function(t,n){var e=t.getRoot();return iM.getState(e).get().map(().getOr(n)}(t,u),c=t.getFormWrapper();_l.setValue(c,a),ft(e,()}))},disable:function(n){hV(t,n).each(Kd.disable)},enable:function(n){hV(t,n).each(Kd.enable)},focus:block:function(t){if(!r(t))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o((function(n){Di(n,lw,{message:t})}))},unblock:function(){o((function(t){Ei(t,dw)}))},showTab:redial:close:function(){o((function(t){Ei(t,aw)}))}};return i},bV=function(t,n,e){var o=rV(t.internalDialog.title,e),r=function(t,n){var e=XR(t,A.none(),n,!1);return KF.parts.body(e)}({body:t.internalDialog.body},e),i=cV(t.internalDialog.buttons),u=sV(i),a=pV({buttons:i},e),c=dV((function(){return m}),uV((function(){return l}),e.shared.providers,n),e.shared.getSink),s=function(t){switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(t.internalDialog.size),f={header:o,body:r,footer:A.some(a),extraClasses:s,extraBehaviours:[],extraStyles:{}},l=aV(f,t,c,e),d={getRoot:v(l),getBody:function(){return KF.getBody(l)},getFooter:function(){return KF.getFooter(l)},getFormWrapper:function(){var t=KF.getBody(l);return Rd.getCurrent(t).getOr(t)}},m=vV(d,n.redial,u);return{dialog:l,instanceApi:m}},yV=function(t,n,e,o){var r,i,u,a,c,s=ou("dialog-label"),f=ou("dialog-content"),l=bh((u={title:t.internalDialog.title,draggable:!0},a=s,c=e.shared.providers,qx.sketch({dom:AD('<div class="tox-dialog__header"></div>'),components:[eV(u,A.some(a),c),oV(),nV(c)],containerBehaviours:yc([IF.config({mode:"mouse",blockerClass:"blocker",getTarget:snaps:{getSnapPoints:leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),d=bh({body:t.internalDialog.body},f,e,o)),m=cV(t.internalDialog.buttons),g=sV(m),p=bh({buttons:m},e)),h=dV((function(){return y}),{onBlock:onUnblock:onClose:function(){return n.closeWindow()}},e.shared.getSink),b=Zu({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:(r={role:"dialog"},r["aria-labelledby"]=s,r["aria-describedby"]=f,r)},eventOrder:(i={},i[ui()]=[iM.name(),Oc.name()],i[ai()]=["execute-on-form"],i[bi()]=["reflecting","execute-on-form"],i),behaviours:yc([np.config({mode:"cyclic",onEscape:useTabstopAt:),iM.config({channel:LR,updateState:initialData:t}),mp.config({}),cp("execute-on-form",h.concat([ji(jr(),()])),MD.config({getRoot:function(){return A.some(b)}}),ap.config({}),DC({})]),components:[l.asSpec(),d.asSpec(),p.asSpec()]}),y=vV({getRoot:v(b),getFooter:function(){return p.get(b)},getBody:getFormWrapper:,n.redial,g);return{dialog:b,instanceApi:y}},xV=tinymce.util.Tools.resolve("tinymce.util.URI"),wV=["insertContent","setContent","execCommand","close","block","unblock"],SV=kV=function(t,n,e,o){var u,a=rV(t.title,o),s=function(t){var n={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[IC({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:yc([tw.config({}),mp.config({})])})]}],behaviours:yc([np.config({mode:"acyclic",useTabstopAt:w(PC)})])};return KF.parts.body(n)}(t),f=t.buttons.bind((),l=lV((function(){return y}),uV((function(){return b}),o.shared.providers,n)),d=_(_({},t.height.fold((function(){return{}}),(function(t){return{height:t+"px","max-height":t+"px"}}))),t.width.fold((,()),m=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],g=new xV(t.url,{base_uri:new xV(window.location.href)}),p=g.protocol+"://"+g.host+(g.port?":"+g.port:""),h=$c(),v=[cp("messages",[Gi((function(){var n=ts(At.fromDom(window),"message",(function(n){if(g.isSameOrigin(new xV(n.raw.origin))){var o=n.raw.data;SV(o)?e,y,o):function(t){return!SV(t)&&i(t)&&bt(t,"mceAction")}(o)&&t.onMessage(y,o)}}));h.set(n)})),Xi(h.clear)]),Oc.config({channels:(u={},u[GR]={onReceive:,u)})],b=aV({header:a,body:s,footer:f,extraClasses:m,extraBehaviours:v,extraStyles:d},t,l,o),y=function(t){var n=function(n){t.getSystem().isConnected()&&n(t)};return{block:unblock:function(){n((function(t){Ei(t,dw)}))},close:sendMessage:}(b);return{dialog:b,instanceApi:y}},CV=function(t,n,e){return n&&e?[]:[PE.config({contextual:{lazyContext:fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]},OV=function(t){var n=t.backstage,e=t.editor,o=Pb(e),r=function(t){var n=t.backstage.shared;return{open:function(e,o){var r=i=bh($O({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:A.none()},"cancel",t.backstage)),u=JR(),a=KR(r,n.providers),c=Zu(tV({lazySink:function(){return n.getSink()},header:YR(u,a),body:$R(e,n.providers),footer:A.some(QR(ZR([],[i.asSpec()]))),onEscape:r,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Pi(cw,r)],eventOrder:{}}));KF.show(c);var s=i.get(c);mp.focus(s)}}}(t),i=function(t){var n=t.backstage.shared;return{open:function(e,o){var r=i=bh($O({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:A.none()},"submit",t.backstage)),u=$O({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:A.none()},"cancel",t.backstage),a=JR(),c=KR((function(){return r(!1)}),n.providers),s=Zu(tV({lazySink:function(){return n.getSink()},header:YR(a,c),body:$R(e,n.providers),footer:A.some(QR(ZR([],[u,i.asSpec()]))),onEscape:function(){return r(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Pi(cw,(function(){return r(!1)})),Pi(fw,(function(){return r(!0)}))],eventOrder:{}}));KF.show(s);var f=i.get(s);mp.focus(f)}}}(t),u=function(t,o){return xR.openUrl((,t)},a=function(t,e){return xR.open((function(t,o,r){var i=o,u=bV({dataValidator:r,initialData:i,internalDialog:t},{redial:xR.redial,closeWindow:,n);return KF.show(u.dialog),u.instanceApi.setData(i),u.instanceApi}),t)},c=function(t,r,i,u){return xR.open((function(t,a,c){var s=Wo(Lo("data",c,a)),f=Qc(),l=n.shared.header.isPositionedAtTop(),d=function(){return f.on((function(t){Jp.reposition(t),PE.refresh(t)}))},m=yV({dataValidator:c,initialData:s,internalDialog:t},{redial:xR.redial,closeWindow:,n,u),g=Zu(Jp.sketch(_(_({lazySink:n.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},l?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:yc(E([cp("window-manager-inline-events",[Pi(xi(),()])],CV(e,o,l),!0)),isExtraPart:function(t,n){return n)}})));return f.set(g),Jp.showWithin(g,ta(m.dialog),{anchor:r},A.some(Nn())),o&&l||(PE.refresh(g),e.on("ResizeEditor",d)),m.instanceApi.setData(s),np.focusIn(m.dialog),m.instanceApi}),t)};return{open:openUrl:function(t,n){return u(t,n)},alert:close:function(t){t.close()},confirm:};O.add("silver",(function(t){var n=GF(t),e=n.uiMothership,o=n.backstage,r=n.renderUI,i=n.getUi;Ax(t,o.shared);var u=OV({editor:t,backstage:o});return{renderUI:r,getWindowManagerImpl:v(u),getNotificationManagerImpl:ui:i()}}))}()}}]);