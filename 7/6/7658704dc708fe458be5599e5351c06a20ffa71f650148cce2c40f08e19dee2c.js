(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"+qrm":function(e,t,r){"use strict";r.d(t,"b",function(){return y}),r.d(t,"e",function(){return v}),r.d(t,"d",function(){return h}),r.d(t,"a",function(){return b}),r.d(t,"c",function(){return m}),r.d(t,"g",function(){return E}),r.d(t,"h",function(){return O}),r.d(t,"f",function(){return g});var s=r("6Typ");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function _(n){var o=u();return function(){var e,t,r=c(n);return e=o?(e=c(this).constructor,Reflect.construct(r,arguments,e)):r.apply(this,arguments),r=this,!(t=e)||"object"!==i(t)&&"function"!=typeof t?l(r):t}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){var r="function"==typeof Map?new Map:void 0;return(d=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return n(e,arguments,c(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)})(e)}function n(e,t,r){return(n=u()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);t=new(Function.bind.apply(e,n));return r&&o(t,r.prototype),t}).apply(null,arguments)}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}var y=function(){a(c,d(Error));var u=_(c);function c(e,t){var r,n,o,i,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return f(this,c),p(l(r=u.call(this,"")),"url",void 0),p(l(r),"option",void 0),p(l(r),"status",void 0),p(l(r),"statusText",void 0),p(l(r),"headers",void 0),p(l(r),"data",void 0),p(l(r),"originError",void 0),p(l(r),"isRequestError",void 0),p(l(r),"event",void 0),o=t,i=a,(n=e).message="request ".concat(o.method,' "').concat(o.url,'" ').concat(i.status||"fail",": ").concat(n.message),n.stack=n.stack||"empty stack",i.data&&((o=Object(s.a)(i.data)).CLOGGING_TRACE_ID&&(n.message+='\nCLOGGING_TRACE_ID: "'.concat(o.CLOGGING_TRACE_ID,'"')),o.RootMessageId&&(n.message+='\nRootMessageId: "'.concat(o.RootMessageId,'"'))),Object.assign(l(r),e),r.message=e.message,r.stack=e.stack,r.originError=e,r.url=t.url||"",r.option=t,r.status=a.status,r.statusText=a.statusText,r.headers=a.headers,r.data=a.data,r.isRequestError=!0,r}return c}();var v=function(e,t){return E(e)?e:new y(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})},h=function(){a(n,d(Error));var r=_(n);function n(e,t){return f(this,n),e=r.call(this,"promise timeout of ".concat(e,"ms exceeded")),t&&(e.stack=t),e}return n}(),b=function(){a(i,d(Error));var o=_(i);function i(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",r=1<arguments.length?arguments[1]:void 0,n=2<arguments.length?arguments[2]:void 0;return f(this,i),p(l(e=o.call(this,"request aborted".concat(t?", because: ".concat(t):""))),"isCancelByUser",void 0),r&&(e.stack=r),e.isCancelByUser=null!=n?n:t===i.MANUAL_ABORT_MESSAGE,e}return i}(),m=(p(b,"MANUAL_ABORT_MESSAGE","user manual abort request"),p(b,"MANUAL_ABORT_ERROR",function(){return new b(b.MANUAL_ABORT_MESSAGE,void 0,!0)}),function(){a(o,d(Error));var n=_(o);function o(e,t){var r;return f(this,o),p(l(r=n.call(this,'Soa "'.concat(t.serviceCode||"UnknownService",".").concat(t.method,'" response status or code error'))),"response",void 0),p(l(r),"request",void 0),r.request=t,r.response=e,r}return o}());function E(e){return"boolean"==typeof e.isRequestError}function O(e){e=E(e)?e.originError:e;return e instanceof h||-1<e.message.indexOf("timeout")}function g(e){e=E(e)?e.originError:e;return e instanceof b||-1<e.message.indexOf("aborted")}},"/Xzw":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(e){var n=e;return n.get=n.get||function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t.method="GET",t.url=e,n(t)},n.post=n.post||function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r.method="POST",r.url=e,r.data=t,n(r)},n.put=n.put||function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return r.method="PUT",r.url=e,r.data=t,n(r)},n}},"1Tfa":function(e,t,r){"use strict";function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return function(e,t){return e=0<arguments.length&&void 0!==e?e:"GET",t=1<arguments.length&&void 0!==t?t:"GET",e&&t&&e.toUpperCase()===t.toUpperCase()}(e.method,t.method)&&e.url===t.url&&function(e,t){if(n(e)!==n(t))return;if("object"===n(e)&&null!==e)try{return JSON.stringify(e)===JSON.stringify(t)}catch(e){return}return e===t}(e.data,t.data)}r.d(t,"a",function(){return u});var u=function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");i(this,"maxSize",void 0),i(this,"cacheList",void 0),this.maxSize=30,this.cacheList=[]}var t,r,n;return t=e,(r=[{key:"exist",value:function(e){return!!this.get(e)}},{key:"get",value:function(e){for(var t=this.cacheList,r=0;r<t.length;r++){var n=t[r],o=n.option,n=n.promise;if(a(o,e))return n}}},{key:"add",value:function(e,t){this.exist(e)||(this.cacheList.push({option:e,promise:t}),this.cacheList.length>this.maxSize&&this.cacheList.shift())}}])&&o(t.prototype,r),n&&o(t,n),e}()},"3Dls":function(e,t,r){"use strict";var n=r("ec4o"),T=r.n(n);r.d(t,"a",function(){return o});function o(t,e){if(!t)return"";try{var r=e||{},n=r.isCover,o=r.isOnline,i=r.isH5,a=(w=(g=(g={isOnline:o,isH5:i})||{}).isOnline,g=g.isH5,T.a.getLocale(w?"online":g?"h5":void 0)),u=(O=(E=(E={isOnline:o,isH5:i})||{}).isOnline,E=E.isH5,T.a.getCurrency(O?"online":E?"h5":void 0)),c=t,s={locale:a,currency:u},f={isCover:n};if(!c)return"";try{var _=(f||{}).isCover,l=s.locale,d=s.currency,p=c,y={replaceStr:void 0},v=(p.startsWith("//")?(y.replaceStr=/^https:/,p="https:"+p):p.startsWith("/")&&(p="https://www.trip.com"+p,y.replaceStr=/^https:\/\/www.trip.com/),new URL(p)),h=l,b=d,m=(_||(h=v.searchParams.get("locale")||l,b=v.searchParams.get("curr")||v.searchParams.get("currency")||d),v.searchParams.set("locale","".concat(h)),v.searchParams.set("curr","".concat(b)),v.searchParams.delete("currency"),v.href);return m=y.replaceStr?m.replace(y.replaceStr,""):m}catch(e){return c}return}catch(e){return t}var E,O,g,w}},"6Typ":function(e,t,r){"use strict";function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}r.d(t,"a",function(){return n});var s={RootMessageId:!0,CLOGGING_TRACE_ID:!0};function n(e){var t={};try{if("object"===c(e)){var r=e.ResponseStatus||e.responseStatus||e.ResponseStatusType,n=r&&(r.Extension||r.extension);if(n)for(var o=0;o<n.length;o++){var i=n[o],a=i.Id||i.id,u=i.Value||i.value;a&&u&&a in s&&(t[a]=u)}}}catch(e){}return t}},A2f7:function(e,t,r){"use strict";r.r(t);function n(e,t,r,n,o){if(o=o.serviceCode,e){var i=e.responseStatus||e.ResponseStatus,i=i&&(i.ack||i.Ack),a=e.ResponseHead||e.responseHead,a=a&&(a.Code||a.code);if(i&&"success"!==i.toLowerCase()||a&&200!==Number(a))throw new u.c(e,{method:t,params:r,serviceCode:o})}}var y=r("NWuY"),u=r("+qrm"),o=r("e/0d"),v=r("UeE3");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="/restapi/soa2";function a(e,t){return"".concat(i,"/").concat(e,"/json/").concat(t)}function c(s){function f(r,n){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!r)return Object(y.d)(Promise.reject(new Error("miss method")));var e=o.query,t=o.timeout,i=o.head,a=o.headers,u=void 0!==(c=o.responseIncludeHeaders)&&c,c=p(s,r)+(e?"?".concat(Object(y.a)(e)):"");return!_||!n||_ in n||(e=l(f.getData()),n[_]=Object.assign({},e||{},i||{})),Object(v.a)({url:c,method:"POST",data:n,timeout:t,headers:a,transformResponse:function(e,t){t=t.headers;return d&&d(e,r,n,o,{serviceCode:String(s)}),u&&"object"===h(e)&&null!==e&&(e["SOA.ResponseHeaders"]=t),e}})}var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=e.headKey,_=void 0===t?null:t,l=void 0===(t=e.getHead)?function(){return{}}:t,d=void 0===(t=e.invalidResponse)?n:t,p=void 0===(t=e.getRequestURL)?a:t;return f._data={},f.setData=function(e){f._data=e},f.getData=function(){return f._data},f}var s=1;function f(o){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},t=e.callbackKey,t=void 0===t?"callback":t,r=e.useAjax,a=void 0!==r&&r,r=e.timeout,e=void 0===r?0:r,u="TripHelperJSONPCallback".concat(s++),c=(i[t]=u,"".concat(o,"?").concat(Object(y.a)(i))),r=new Promise(function(t,e){var r,n;window[u]=function(e){t(e),delete window[u]},a?Object(v.a)({url:o,method:"GET",data:i,dataType:"script"}).catch(e):(r=c,n=e,(e=document.createElement("script")).src=r,e.async=!0,e.onerror=function(e){return n(e)},document.body.appendChild(e))});return e&&0<e?Object(y.e)(e,r):r}var _=r("RQ7R");r.d(t,"RequestError",function(){return u.b}),r.d(t,"isRequestError",function(){return u.g}),r.d(t,"TimeoutError",function(){return u.d}),r.d(t,"isTimeoutError",function(){return u.h}),r.d(t,"AbortError",function(){return u.a}),r.d(t,"isAbortError",function(){return u.f}),r.d(t,"setDefaultErrorHandler",function(){return o.b}),r.d(t,"buildQuery",function(){return y.a}),r.d(t,"parseQuery",function(){return y.c}),r.d(t,"promiseTimeout",function(){return y.e}),r.d(t,"promiseAbort",function(){return y.d}),r.d(t,"isAbortable",function(){return y.b}),r.d(t,"validStatus",function(){return y.f}),r.d(t,"request",function(){return v.a}),r.d(t,"createSoaAgent",function(){return c}),r.d(t,"jsonp",function(){return f}),r.d(t,"trackAjax",function(){return _.a}),r.d(t,"trackAjaxFail",function(){return _.b}),r.d(t,"trackAjaxSuccess",function(){return _.c})},NWuY:function(e,t,r){"use strict";r.d(t,"a",function(){return o}),r.d(t,"c",function(){return u}),r.d(t,"e",function(){return c}),r.d(t,"d",function(){return s}),r.d(t,"b",function(){return f}),r.d(t,"f",function(){return _});var i=r("+qrm");function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=function(){var e,t,r=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:encodeURIComponent,i=[];for(e in r)Object.hasOwnProperty.call(r,e)&&(t=r[e],n&&null==t||("function"==typeof t?t=t():null===t&&(t=""),i.push("".concat(e,"=").concat(o(void 0===t?"":String(t))))));return i.join("&")};function u(e){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:decodeURIComponent;if("string"!=typeof e)return{};var i={};return e.split("&").forEach(function(e){var t,e=a(e.split("="),2),r=e[0],e=e[1];r&&(e=function(t,e){if(!t)return"";try{return e(t)}catch(e){return t}}(e,o),(t=i[r])&&!n?"[object Array]"===Object.prototype.toString.call(t)?t.push(e):i[r]=[t,e]:i[r]=e)}),i}function c(e,n){var o=!1;return new Promise(function(t,r){n.then(function(e){o=!0,t(e)}).catch(function(e){o=!0,r(e)}),setTimeout(function(){o||r(new i.d(e))},e)})}function s(r){var n,e=new Promise(function(e,t){r.then(e,t),n=t});return e.abort=function(){var e;null!=(e=n)&&e(i.a.MANUAL_ABORT_ERROR())},e}function f(e){return"function"==typeof e.abort}function _(e,t){return 200<=e&&e<300||304===e||"file:"===t&&0===e}},RQ7R:function(e,t,r){"use strict";function n(e,t){return-1<e.indexOf(t)}var o=function(){if("undefined"==typeof navigator)return!1;var e=navigator.userAgent.toLowerCase();return/(ctrip|android|iphone|mobile|webos)/.test(e)&&!/(ipad|pad)/.test(e)};function i(e){var e=void 0===e?{}:e,t=e.isOnline,t=void 0===t?!function(){if("undefined"==typeof window)return!1;var e=window.location.pathname;return/^\/m/.test(e)||o()}():t,e=e.isDomestic,e=void 0===e?"ctrip"==("undefined"!=typeof window&&n(window.location.hostname||window.location.host,"ctrip")?"ctrip":"trip"):e;return t?e?"//webresource.c-ctrip.com/code/ubt/_bfa.min.js":"//webresource.tripcdn.com/ares2/sysdev/ubt/*/default/_bfa.min.js":e?"//webresource.c-ctrip.com/code/ubt/_mubt.min.js":"//webresource.tripcdn.com/ares2/sysdev/ubt/*/default/_mubt.min.js"}function a(){for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var r=e[t],n=r.src;if(n&&(-1<n.indexOf("/code/ubt")||-1<n.indexOf("/sysdev/ubt")))return r}return null}function u(){return void 0!==window.$_bf||window.__bfi&&"function"==typeof window.__bfi.push&&window.__bfi.push!==Array.prototype.push||window.__BF_LOADING_FLAG__}function c(e){if(u())return Promise.resolve();var t,r,n=a()||(void 0===(e=e)&&(e=i()),n="?v="+(n=new Date).getFullYear()+n.getMonth()+"_"+n.getDate(),(t=document.createElement("script")).type="text/javascript",t.charset="utf-8",t.async=!0,t.src=e+n,(e=document.getElementsByTagName("script")[0])&&e.parentElement?e.parentElement.insertBefore(t,e):document.body.appendChild(t),t);return r=n,new Promise(function(e,t){r.addEventListener("error",function(e){t(e)}),r.addEventListener("load",function(){e()}),r.addEventListener("readystatechange",function(){"loaded"!==r.readyState&&"complete"!==r.readyState||e()})})}var s=function(){var e;"object"==typeof window&&window.__BF_CUSTOM_LOAD_FLAG__||(u()||a()?s=function(){}:("undefined"==typeof window?Promise.resolve():window.__BF_LOAD_PROMISE__||(e=c(e),window.__BF_LOAD_PROMISE__=e)).then(function(){s=function(){}}))};function f(e,t){s(),window.__bfi||(window.__bfi=[]);var r=window.__bfi;t.unshift(e),r.push(t)}function _(r){return new Promise(function(t){var e=r;e.callback=function(e){t(e)},f("_trackMetric",[e])})}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,u=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){u=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function y(n){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?p(Object(o),!0).forEach(function(e){var t,r;t=n,r=o[e=e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(o)):p(Object(o)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(o,e))})}return n}var v="ibu_ajax_perf",h=100;function b(e,t,r){var n,o,r=2<arguments.length&&void 0!==r?r:{},e=y({url:e},(n=t,o={},Object.keys(n).forEach(function(e){var t;"string"==typeof e&&"number"==typeof n[e]&&(t=Math.max(n[e],0),o[e]=t)}),o));return"string"==typeof r.region&&(e.region=r.region),_({name:v,value:t.duration,sample:h,tag:e})}function m(e,t){return 0<t&&t<e?e-t:0}function E(e,t,r){var t=1<arguments.length&&void 0!==t?t:{},r=2<arguments.length?r:void 0,n={DNSTime:m(e.domainLookupEnd,e.domainLookupStart),TCPTime:m(e.connectEnd,e.connectStart),SSLTime:m(e.connectEnd,e.secureConnectionStart),requestTime:m(e.responseStart,e.requestStart||e.fetchStart||e.startTime),responseTime:m(e.responseEnd,e.responseStart),duration:e.duration||m(e.responseEnd,e.fetchStart)};return Promise.all([b(e.name,n,t),r?function(e,t){if(e&&0!==Object.keys(e).length)return _({name:"JS.Lizard.AjaxReady",tag:y(y({},t),e),value:t.duration||0})}(r,{url:e.name,duration:n.duration}):Promise.reject()]).then(function(e){return l(e,1)[0]})}function O(e){var t=e.originError;f("_trackError",[{message:e.message,stack:e.stack,line:null==t?void 0:t.lineNumber,column:null==t?void 0:t.columnNumber,file:null==t?void 0:t.fileName}])}var g="xmlhttprequest",w="fetch",T="x-gate-region",P=r("+qrm"),R=r("z51s"),S=r("6Typ"),A=r("t3gs");function j(e){t=e;for(var t,r="function"==typeof performance.getEntriesByName?performance.getEntriesByName(t):"function"==typeof performance.getEntriesByType?performance.getEntriesByType("resource"):[],n=null,o=-1,i=r.length-1;0<=i;i--){var a=r[i];a.initiatorType!==g&&a.initiatorType!==w||a.name===e&&a.responseEnd>o&&(o=a.responseEnd,n=a)}return n}function D(e,t,r){try{O(Object(P.e)(Object(A.a)(e),t))}catch(e){}}function M(e,t,r){var n=t.url,t=t.responseHeaders;try{var o=function(e){var t="",r=window.location,n=r.protocol,r=r.host;{if(!e)return"";t=/^http/.test(e)?e:/^\/\//.test(e)?n+e:/^\//.test(e)?n+"//"+r+e:n+"//"+e}return t}(n),i=j(o);if(!i)throw new Error("[track ajax] can't find ResourceTiming, url \"".concat(o,'" may not correct'));var a=Object(S.a)(e);return E(i,{region:t&&t[T]||r&&r.getResponseHeader(T)||""},a)}catch(e){return Promise.resolve(-1)}}function C(o,i){return new Promise(function(e,t){var r=function(){e(M({},{url:i},o))};if(o.readyState===R.c)return r();function n(e){D(e,{url:i}),t(e)}o.addEventListener("error",n),o.addEventListener("timeout",n),o.addEventListener("abort",n),o.addEventListener("readystatechange",function(){o.readyState===R.c&&r()})})}r.d(t,"b",function(){return D}),r.d(t,"c",function(){return M}),r.d(t,"a",function(){return C})},UeE3:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return request});var _shared_constant__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("qTVb"),_shared_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("NWuY"),_shared_cache__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("1Tfa"),_track__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("RQ7R"),_helper__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("/Xzw"),_shared_errors__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("+qrm"),_constant__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("z51s"),_shared_default_error_handler__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("e/0d"),_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("t3gs");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var WIN_KEY="__TRIP_COMPONENT_REQUEST_CACHE__",cacheManager=window[WIN_KEY]=window[WIN_KEY]||new _shared_cache__WEBPACK_IMPORTED_MODULE_2__.a;function noop(){}function getSubEnv(){try{if("object"===("undefined"==typeof localStorage?"undefined":_typeof(localStorage))&&window.localStorage&&"function"==typeof localStorage.getItem)return window.localStorage.getItem(_constant__WEBPACK_IMPORTED_MODULE_6__.a)}catch(e){return null}}function isDevOrFat(){var e=window.location.host;return-1<e.indexOf(".qa.nt")||-1<e.indexOf("localhost")}function getResponseDataType(e){if(e)return e=e.split(";",1)[0],_shared_constant__WEBPACK_IMPORTED_MODULE_0__.a[e]}function trim(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function getResponseHeaders(e){var e=trim(e.getAllResponseHeaders()).split(/[\r\n]+/),r={};return e.forEach(function(e){var e=e.split(": "),t=e.shift(),e=e.join(": ");t&&(r[t]=e)}),r}var decodeResponse=function decodeResponse(xhr,dataType){var response,response,responseDataType;return"arraybuffer"===xhr.responseType||"blob"===xhr.responseType?response=xhr.response:(response=xhr.responseText,responseDataType=dataType||getResponseDataType(xhr.getResponseHeader("content-type")),"script"===responseDataType?eval(response):"json"===responseDataType&&(response=""===trim(response)?null:JSON.parse(response))),response};function _ajax(r){function e(){if(Object(_shared_utils__WEBPACK_IMPORTED_MODULE_1__.f)(p.status,y))try{var e=decodeResponse(p,s);h(null,e)}catch(e){h(e)}else{e=new Error('url "'.concat(n,'" response status "').concat(p.status,'" is not correct'));h(e)}}function t(e){h(e)}var n=r.url,o=r.method,o=void 0===o?"GET":o,i=r.params,a=r.data,a=void 0===a?null:a,u=r.contentType,u=void 0===u?null:u,c=r.dataType,s=void 0===c?null:c,c=r.__success,f=void 0===c?noop:c,c=r.__error,_=void 0===c?noop:c,c=r.timeout,l=void 0===c?0:c,c=r.headers,d=void 0===c?{}:c,o=o.toUpperCase(),p=new XMLHttpRequest,y=/^([\w-]+:)\/\//.test(n)?RegExp.$1:window.location.protocol,v=!1,h=function(e,t){v||(e?(e=Object(_shared_errors__WEBPACK_IMPORTED_MODULE_5__.e)(Object(_utils__WEBPACK_IMPORTED_MODULE_8__.a)(e),r,{status:p.status,statusText:p.statusText,data:p.responseText||p.response,headers:getResponseHeaders(p)}),_(e,p)):f({url:n,response:t,xhr:p},p),v=!0)},c=getSubEnv();c&&isDevOrFat()&&((i=i||{})[_constant__WEBPACK_IMPORTED_MODULE_6__.b]=c),i&&(n+=(-1<n.indexOf("?")?"&":"?")+Object(_shared_utils__WEBPACK_IMPORTED_MODULE_1__.a)(i)),p.onreadystatechange=function(){p.readyState===_constant__WEBPACK_IMPORTED_MODULE_6__.c&&(p.onreadystatechange=noop,setTimeout(function(){v||e()},0))},p.onload=e,p.onerror=t,p.ontimeout=function(){return t(new _shared_errors__WEBPACK_IMPORTED_MODULE_5__.d(l))},p.onabort=function(){p.__abortByUser?t(_shared_errors__WEBPACK_IMPORTED_MODULE_5__.a.MANUAL_ABORT_ERROR()):t(new _shared_errors__WEBPACK_IMPORTED_MODULE_5__.a)},p.open(o,n,!0,null,null);for(var b=0,m=Object.keys(d);b<m.length;b++){var E=m[b],O=d[E];p.setRequestHeader(E,O)}return"POST"!==o||d["Content-Type"]||p.setRequestHeader("Content-Type",u||"application/json"),0<l&&(p.timeout=l),p.send(a&&"GET"!==o?JSON.stringify(a):null),p}var _request=function(n){if(n.cache){var e=cacheManager.get(n);if(e&&Object(_shared_utils__WEBPACK_IMPORTED_MODULE_1__.b)(e))return e}var o,e=new Promise(function(e,t){var r=n;r.__success=e,r.__error=t,o=_ajax(r)}).then(function(e){var t=e.response,r=e.url,e=e.xhr;if(Object(_track__WEBPACK_IMPORTED_MODULE_3__.c)(t,{url:r},e),"function"==typeof n.transformResponse)try{return n.transformResponse(t,{headers:getResponseHeaders(e)})}catch(e){return t}return t}).catch(function(e){var t=Object(_shared_errors__WEBPACK_IMPORTED_MODULE_5__.e)(e,n);if(n.trackError&&Object(_track__WEBPACK_IMPORTED_MODULE_3__.b)(e,n,o),!_shared_default_error_handler__WEBPACK_IMPORTED_MODULE_7__.a)throw t;Object(_shared_default_error_handler__WEBPACK_IMPORTED_MODULE_7__.a)(t)});return e.abort=function(){o&&(o.__abortByUser=!0,o.abort())},Object.defineProperty(e,"_xhr",{get:function(){return o}}),n.cache&&cacheManager.add(n,e),e},request=Object(_helper__WEBPACK_IMPORTED_MODULE_4__.a)(_request)},"e/0d":function(e,t,r){"use strict";var n;function o(e){n=e}r.d(t,"a",function(){return n}),r.d(t,"b",function(){return o})},qTVb:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={"text/javascript":"script","application/javascript":"script","application/x-javascript":"script","application/json":"json","text/html":"document","text/plain":"text","application/octet-stream":"blob"}},t3gs:function(e,t,r){"use strict";function n(e){if(e instanceof Error)return e;var t=new Error("");return t.event=e,t}r.d(t,"a",function(){return n})},z51s:function(e,t,r){"use strict";r.d(t,"c",function(){return n}),r.d(t,"a",function(){return o}),r.d(t,"b",function(){return i});var n=4,o="component-sub_env",i="subEnv"}}]);turn!!e&&(e.keyCode||e.which)==se},ie=function(e,t){e&&(e.style["-webkit-transform"]=t,e.style["-moz-transform"]=t,e.style["-o-transform"]=t,e.style["-ms-transform"]=t,e.style.transform=t)},oe=function(e){return"number"!==typeof e?0|parseFloat(e):e},ce=200,le=200,se=27,ue={popupContent:{tooltip:{position:"absolute",zIndex:2,width:"".concat(ce,"px")},modal:{position:"absolute",width:"50%",margin:"auto",top:"50%",left:"50%",WebkitTransform:"translate(-50%, -50%)",MozTransform:"translate(-50%, -50%)",OTransform:"translate(-50%, -50%)",msTransform:"translate(-50%, -50%)",transform:"translate(-50%, -50%)",WebkitBackfaceVisibility:"hidden",backfaceVisibility:"hidden"}},popupArrow:{height:"10px",width:"10px",position:"absolute",WebkitTransform:"rotate(45deg)",MozTransform:"rotate(45deg)",OTransform:"rotate(45deg)",msTransform:"rotate(45deg)",transform:"rotate(45deg)",margin:"-5px",zIndex:-1,background:"rgb(255, 255, 255)",boxShadow:"rgba(0, 0, 0, 0.2) 1px 1px 1px"},overlay:{tooltip:{position:"fixed",top:0,bottom:0,left:0,right:0},modal:{position:"fixed",top:0,bottom:0,left:0,right:0,background:"rgba(0, 0, 0, 0.5)",zIndex:999}},helper:{position:"absolute",top:0,left:0}},de=n(747),pe=n.n(de);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ve=function(e){var t=e.offlineData||{},n=t.cookieId,r=t.uid,a=t.eid,i=t.UserInfo,o=void 0===i?{}:i,l=e.ProductId,s=e.SaleCityId,u=e.DepartCityId,d=(e.showCompareBtns,e.disableIntentOrderBtn),p=o||{},f=p.BindMobilePhone,m=p.Ani,v=p.BindCountryCode,h=Object(L.useCtrl)(),g=Object(L.useModelState)(),y=Object(R.useState)(""),b=c()(y,2),E=b[0],_=b[1],O=Object(R.useState)(!1),k=c()(O,2),C=k[0],T=k[1],I=Object(R.useState)(!1),S=c()(I,2),N=S[0],P=S[1],w=Object(R.useState)(!1),D=c()(w,2),A=D[0],B=D[1],U=Object(R.useState)(!0),M=c()(U,2),F=M[0],V=M[1];Object(R.useEffect)((function(){"undefined"!=typeof window&&_("//".concat(window.location.host.replace("booking","order"),"/tour/offline_booking/index?module=2706"))}),[]);var G=H()({disabled:d}),q=d?"javascript:void(0);":function(e,t){var n=e.uid,r=e.cookieId,a=e.from,i=void 0===a?"booking":a,o=e.sbu,c=e.productId,l=e.tempOrderId,s=e.startCityId,u=e.destid,d=e.startDateFrom,p=e.startDateTo,f=e.travelDayFrom,m=e.travelDayTo,v=e.budget,h=e.adultNum,g=e.childNum,y=(t||{}).basicInfo;if(y&&(t=me(me({},y),t)),t){var b=t||{},E=b.isGroupTravel,_=b.IsGroupTravel,O=b.isFreeTravel,k=b.IsFreeTravel,C=b.isProxyFreeTravel,T=b.IsProxyFreeTravel,I=b.isFreeTravelInter,S=b.IsFreeTravelInter,N=b.isVisa,P=b.IsVisa,w=b.isStudy,D=b.IsStudy,R=b.isThemeProduct,j=b.IsThemeProduct,A=b.ProductType,L=b.productType,B=b.ProductId,U=b.ProductID,M=b.productId,F=b.query,V=b.SuccessInfo,H=b.tempOrderId,G=b.TempOrderId,q=b.tempOrderID,z=b.TempOrderID,Y=b.DepartureId,W=b.DepartureCityId,Q=b.DepartureCityID,K=b.DepartureCity,J=b.departureId,X=b.departureCityId,Z=b.departureCityID,$=b.departureCity,ee=b.DepartDate,te=b.departDate,ne=b.DepartureDate,re=b.departureDate,ae=b.DestCityId,ie=b.destCityId,oe=b.TravelDays,ce=b.travelDays,le=b.ReturnDate,se=b.returnDate,ue=b.SegmentInfo,de=b.segmentInfo,fe=b.ShoppingDetailGetInfo,ve=b.shoppingResp,he=b.PriceDetail,ge=b.priceDetail,ye=b.priceInfo,be=b.adultCount,Ee=b.AdultCount,_e=b.adultNums,Oe=b.AdultNums,ke=b.AduNumber,Ce=b.aduNumber,Te=b.childCount,Ie=b.ChildCount,Se=b.childNums,Ne=b.ChildNums,Pe=b.ChlidNumber,we=b.chlidNumber,xe=(F||{}).temporderid,De=(V||{}).TempOrderId,Re=fe||ve||{},je=Re.SegmentInfo,Ae=Re.ReturnDate,Le=ue||de||je||{},Be=Le.MinTravelDays,Ue=Le.MaxTravelDays;E=E||_,O=O||k,C=C||T,I=I||S,N=N||P,w=w||D,j=j||R,A=A||L,B=B||U||M||0,H=H||G||q||z||0,K=+K||0,$=+$||0,Y=Y||W||Q||K||J||X||Z||$||0,ee=ee||te||ne||re,ae=ae||ie||0,oe=oe||ce||0,le=le||se||Ae,be=be||Ee||_e||Oe||Ce||ke||0,Te=Te||Ie||Se||Ne||we||Pe||0;var Me=(((he=he||ge)||{}).TotalPrice||{}).TotalPrice,Fe=(ye||{}).totalPrice;if(B>0&&void 0==c&&(c=B),c>0&&void 0==o&&(o=j?64:N?32:w?8:O||I||C?2:E?0:A>0?1==A?0:2:0),xe>0&&void 0==l&&(l=xe),De>0&&void 0==l&&(l=De),H>0&&void 0==l&&(l=H),Y>0&&void 0==s&&(s=Y),ae>0&&void 0==u&&(u=ae),void 0==d&&ee&&"string"===typeof ee&&(d=ee.substring(0,10)),void 0==p){if(d&&oe>0){var Ve=pe()(d).add(+oe,"day");Ve&&Ve.isValid()&&(p=Ve.format("YYYY-MM-DD"))}le&&"string"===typeof le&&(p=le.substring(0,10))}if(void 0==f){if(oe>0&&(f=oe),d&&p&&"string"===typeof d&&"string"===typeof p){var He=pe()(d),Ge=pe()(p),qe=Math.abs(He.diff(Ge,"days"))||0;qe>0&&(f=qe+1)}Be>=0&&(f=Be)}if(void 0==m&&(Ue>0&&(m=Ue),f>=0&&void 0==m&&(m=f)),be>0&&void 0==h&&(h=be),Te>0&&void 0==g&&(g=Te),h=h||0,g=g||0,Fe&&void 0==Me&&(Me=Fe.totalPrice||0),Me>0&&void 0==v){var ze=parseInt(h+g)||1;v=Math.ceil(Me/ze)}}else void 0==o&&(o=0);var Ye={uid:n,CookieID:r,from:i,sbu:o,productId:c,tempOrderId:l,startCityId:s,destid:u,startDateFrom:d,startDateTo:p,travelDayFrom:f,travelDayTo:m,budget:v,adultNum:h,childNum:g};return"/chase-orders/pages/orderEnter?".concat(x.a.stringify(Ye))}({uid:r,cookieId:n},g);return j.a.createElement("div",{id:"Div1",className:"bg_miancolor",style:{paddingBottom:0}},j.a.createElement("div",{className:"indent_fixed"},j.a.createElement("a",{href:E},"\u9884\u8ba2\u9996\u9875"),j.a.createElement("div",{className:"indent_dian02 "},j.a.createElement("a",{id:"transfer",href:"javascript:void(0);"},"\u8f6c"),j.a.createElement(he,{uid:r,Ani:m})),j.a.createElement("a",{href:"http://order.package.ctripcorp.com/tour/offline_booking/index?uid=".concat(r),target:"_blank"},"\u8ba2\u5355\u67e5\u8be2"),j.a.createElement("a",{href:"/chase-orders/pages/orderQuery?from=out&uid=".concat(r,"&CookieID=").concat(n),target:"_blank"},"\u8ffd\u5355\u8ba2\u5355"),j.a.createElement("a",{className:G,href:q,target:"_blank"},"\u610f\u5411\u5355"),j.a.createElement("a",{id:"sendSMS_btn",href:"javascript:void(0)",onClick:function(){return T(!0)}},"\u53d1\u9001\u77ed\u4fe1"),j.a.createElement("div",{className:"indent_dian"},j.a.createElement("a",{className:"dian_icon choose",href:"javascript:;"},"\xb7\xb7\xb7"),j.a.createElement("div",{className:"indent_dian_more",style:{top:0}},j.a.createElement("a",{href:"http://offlineplatform.ctripcorp.com/bbzoffline/promptlist?module=301296&uid=".concat(r||"","&CookieID=").concat(n||""),target:"_blank"},"\u5ba2\u6237\u63d0\u793a\u4fe1\u606f")))),C&&j.a.createElement(te,{width:640,height:400,open:C,closeOnOuterClick:!1},(function(e,t){return j.a.createElement(Q,{state:{ProductId:l,SaleCityId:s,DepartCityId:u,Mobile:f,Zone:v,uid:r,eid:a,fetch:h.fetch},handlers:{handleCloseSendSmsPopup:function(){return T(!1)},handleShowTipBox:function(){return P(!0)},handleSetStatus:function(e){V(e),B(!0),e&&T(!1)},closePopup:e},ctrl:h})})),N&&j.a.createElement(te,{width:330,height:190,open:N,closeOnOuterClick:!1},(function(e,t){return j.a.createElement("div",{className:"tell_esc"},j.a.createElement("p",null,"\u60a8\u5bf9\u77ed\u4fe1\u5185\u5bb9\u4f5c\u4e86\u6539\u52a8"),j.a.createElement("p",null,"\u662f\u5426\u8981\u7ee7\u7eed\u9000\u51fa\uff1f"),j.a.createElement("div",{className:"tell_esc_btn"},j.a.createElement("a",{href:"javascript:void(0)",id:"exist",onClick:function(){T(!1),P(!1)}},"\u9000\u51fa"),j.a.createElement("a",{className:"enter",href:"javascript:void(0)",onClick:function(){return P(!1)}},"\u53d6\u6d88")))})),A&&j.a.createElement(te,{width:270,height:156,open:A,closeOnOuterClick:!1},j.a.createElement(ge,{status:F,handlers:{handlerLazyClose:function(){return B(!1)}}})))},he=function(e){e.uid,e.Ani;var t=["841229","841249","841255","840532","841200","840621","840510","840639"];return j.a.createElement("div",{id:"redirectMore",className:"indent_dian_more"},["\u9152\u5e97\u9884\u8ba2","\u56fd\u5185\u673a\u7968","\u56fd\u9645\u673a\u7968","\u5ba2\u6237\u670d\u52a1","\u95e8\u7968\u9884\u8ba2","\u90ae\u8f6e\u9884\u8ba2","\u9e3f\u9e44\u9038\u6e38","\u6e38\u5b66\u9884\u8ba2"].map((function(e,n){return j.a.createElement("a",{key:n,href:"javascript:void(0)",onClick:function(e){e.preventDefault(),function(e){var n,r="function"==typeof(null===(n=window)||void 0===n?void 0:n.btoa)?"&uui=".concat(window.btoa(JSON.stringify({type:22})),":encoding=base64"):"",a="implus://telephone?phonenum=".concat(t[e],"&").concat(r);window.__ctrip&&window.__ctrip.openUrl?window.__ctrip.openUrl(a,(function(e){0!=e.code&&(window.location.href=a)})):window.location.href=a}(n)}},e)})))},ge=function(e){var t=e.status,n=e.handlers,r=null;return Object(R.useEffect)((function(){return r=setTimeout(n.handlerLazyClose,2e3),function(){return clearTimeout(r)}})),t?j.a.createElement("div",{className:"tell_send_box tell_success_box"},j.a.createElement("em",{className:"success_ico"}),"\u53d1\u9001\u6210\u529f"):j.a.createElement("div",{className:"tell_send_box tell_failure_box"},j.a.createElement("em",{className:"failure_ico"}),"\u53d1\u9001\u5931\u8d25")},ye=n(525),be=n.n(ye);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oe=function(e){var t=null;return e.isServer?t=e.req.cookies.Servers_Eid:e.isClient&&(t=be.a.get("Servers_Eid")),t},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(L.useCtrl)(),n=Object(L.useModel)(),r=c()(n,2),a=r[0],i=r[1],o=a||{},l=o.isOffline,s=o.offlineUserInfo,u=Object(R.useState)(e.offlineUserInfo||s),d=c()(u,2),p=d[0],f=d[1],m=(null===p||void 0===p?void 0:p.uid)||(null===e||void 0===e?void 0:e.uid)||"",v=null===p||void 0===p?void 0:p.cookieId,h=Oe(t.context),g=!1,y=Object(R.useCallback)((function(){return Ne(m,v,h,t)}),[m,v,h]);return Object(R.useEffect)((function(){if(l){if(S.a.isEmpty(p))return y().then((function(e){var t=e||[],n=c()(t,4),r=n[0],a=n[1],i=n[2],o=n[3];if(!g){var l=_e(_e({},r),{},{uid:a,cookieId:i,eid:o});f(l)}})).catch((function(e){})),function(){g=!0};i.UPDATE_STATE({offlineUserInfo:p})}}),[m,h,g,l]),p},Ce=function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.uid){e.next=2;break}return e.abrupt("return",[t.uid,t.cookieid]);case 2:if(!t.shoppingid){e.next=10;break}return e.next=6,Te(t.shoppingid,n);case 6:i=e.sent,o=c()(i,2),r=o[0],a=o[1];case 10:return e.abrupt("return",[r,a]);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Te=function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var r,a,i,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.API.shoppingDetailGet,a={shoppingId:t,PlatformId:5},e.prev=2,e.next=5,we(n,r,a);case 5:c=e.sent,(l=c.Header)&&l.length&&l.forEach((function(e){"uid"===e.Name.toLowerCase()&&e.Value&&(i=e.Value),"cookieid"===e.Name.toLowerCase()&&e.Value&&(o=e.Value)})),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:return e.abrupt("return",[i,o]);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n){return e.apply(this,arguments)}}(),Ie=function(){var e=s()(regeneratorRuntime.mark((function e(t,n,r){var a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={HeadTagList:[{Key:"uid",Value:t||""}]},!t&&n&&(a.ShoppingId=n),e.prev=3,e.next=6,we(r,r.API.getOfflineUserInfo,a,{raw:!0});case 6:return i=e.sent,o=(i||{}).Data,e.abrupt("return",o);case 11:e.prev=11,e.t0=e.catch(3);case 14:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n,r){return e.apply(this,arguments)}}(),Se=function(){var e=s()(regeneratorRuntime.mark((function e(t){var n,r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=null,e.next=4,we(t,"/list/sso-user",{},{raw:!0});case 4:return r=e.sent,i=(a=r||{}).login,o=a.data,n=!!i&&(null===o||void 0===o?void 0:o.eid),e.abrupt("return",n?{Eid:n,eid:n}:null);case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=s()(regeneratorRuntime.mark((function e(t,n,r,a){var i,o,c,l,s,u,d,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,o=n,"undefined"!=typeof window&&(i={},c=window.location.search))for(c=x.a.parse(c.replace("?","")),l=0,s=Object.keys(c);l<s.length;l++)u=s[l],i[u.toLowerCase()]=c[u];if(t){e.next=9;break}return e.next=6,Ce(i,a);case 6:d=e.sent,o=d[1],t=d[0];case 9:return e.next=11,Ie(t,i.shoppingid,a);case 11:if(p=e.sent,t=p&&p.UserInfo&&p.UserInfo.Uid||t,r){e.next=18;break}return e.next=16,Se(a);case 16:f=e.sent,r=f?f.Eid:null;case 18:return e.abrupt("return",[p,t,o,r]);case 19:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),Pe=new Map,we=function(e,t,n,r){var a=JSON.stringify({url:t,params:n});if(Pe.has(a))return Pe.get(a);var i=null===e||void 0===e?void 0:e.post(t,n,r);return Pe.set(a,i),i},xe=n(748),De=function(e){var t=Object(L.useModelState)().isOffline,n=ke(e);return t?j.a.createElement("div",null,j.a.createElement(xe.OfflineHeader,n),j.a.createElement(ve,U()({offlineData:n},e))):null};De.propTypes={offlineUid:F.a.string,offlineData:F.a.object,showCompareBtns:F.a.bool,disableIntentOrderBtn:F.a.bool};var Re=De;function je(e){var t=e.showIndex,n=e.index,r=e.data,a=e.handleCityChanged,i=Object.keys(r);return j.a.createElement("ul",{className:"station_search_list",style:{display:t===n?"block":"none"}},i.map((function(e,t){return j.a.createElement("li",{key:t},j.a.createElement("span",null,e),r[e].map((function(e,t){var n=e.DepartureCityName;return j.a.createElement("a",{key:t,href:"javascript:;",onClick:function(t){return a(e)}},n)})))})))}function Ae(e){var t=e.data,n=e.handleCityChanged;return j.a.createElement("div",{className:"hot_station"},j.a.createElement("h4",null,"\u70ed\u95e8\u51fa\u53d1\u57ce\u5e02"),j.a.createElement("p",null,t&&t.map((function(e,t){var r=e.DepartureCityName;return j.a.createElement("a",{key:t,href:"javascript:;",onClick:function(t){return n(e)}},r)}))))}function Le(e,t,n){return t=_()(t),v()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],_()(e).constructor):t.apply(e,n))}var Be=function(e){function t(){var e;d()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Le(this,t,[].concat(r)),T()(g()(e),"state",{searchResult:null}),T()(g()(e),"handleSearch",(function(t){var n=t.target.value,r=e.props.data;if(""!==n){var a=Ue(n,r);e.setState({searchResult:a})}else e.setState({searchResult:null})})),e}return k()(t,e),f()(t,[{key:"render",value:function(){var e=this.props.handleCityChanged,t=this.state.searchResult,n=this.refs.input,r=t||n&&""!==n.value;return j.a.createElement("div",null,j.a.createElement("div",{className:"station_search_box"},j.a.createElement("p",{style:{display:r?"none":"block"}},"\u641c\u7d22\u57ce\u5e02\uff08\u652f\u6301\u6c49\u5b57\u3001\u9996\u5b57\u6bcd\u67e5\u8be2\uff09"),j.a.createElement("input",{type:"text",onChange:this.handleSearch,ref:"input"})),j.a.createElement("div",{className:"station_search_result",style:{display:t?"block":"none"}},t?t.length?t.map((function(t,n){var r=t.DepartureCityName;return j.a.createElement("a",{key:n,href:"javascript:;",onClick:function(n){return e(t)}},r)})):j.a.createElement("p",null,"\u6ca1\u6709\u627e\u5230\u7ed3\u679c"):null))}}]),t}(R.PureComponent),Ue=function(e,t){var n;if(Me(e)){var r=new RegExp(e);n=(t=t.chineseAssociate).filter((function(e){var t=e.DepartureCityName;return!!r.test(t)}))}else if(Fe(e)){t=t.alphaAsscciate;var a=(e=e.split("")).splice(0,1)[0];n=t[a.toUpperCase()],e.length&&(n=function(e,t){var n;return e.filter((function(e){var r,a=e.PinYin.substring(1);for(n=0;n<t.length;){r=t[n];var i=a.indexOf(r);if(-1===i)return!1;a=a.substring(i+1),n++}return!0}))}(t[a.toUpperCase()],e))}return n&&(n=n.slice(0,5)),n};var Me=function(e){return/^([\u4E00-\u9FA5])*$/.test(e)},Fe=function(e){if(!e)return!1;return/^[a-zA-Z]+$/.test(e)};function Ve(e,t,n){return t=_()(t),v()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],_()(e).constructor):t.apply(e,n))}var He=function(e){function t(){var e;d()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=Ve(this,t,[].concat(r)),T()(g()(e),"state",{showIndex:0}),T()(g()(e),"handleSelectionClick",(function(t){var n=t.target;if("A"===n.tagName){var r=+n.getAttribute("data-index");e.setState({showIndex:r})}})),e}return k()(t,e),f()(t,[{key:"render",value:function(){var e=this.props,t=e.cityStationShow,n=e.data,r=e.handleCityChanged,a=this.handleSelectionClick,i=this.state.showIndex,o=n||{},c=o.hotCityList,l=o.departureCityList,s=Object.keys(l||{});return j.a.createElement("dd",{className:"city_searchBox",style:{display:t?"block":"none",left:61},onClick:function(e){return e.nativeEvent.stopImmediatePropagation()}},j.a.createElement(Ae,{data:c,handleCityChanged:r}),j.a.createElement("div",{className:"station_search"},j.a.createElement(Be,{data:n,handleCityChanged:r}),j.a.createElement("div",{className:"station_wordsselect",onClick:a},s.map((function(e,t){return j.a.createElement("a",{href:"javascript:void(0);","data-index":t,className:i===t?"on":"",key:t},e)}))),s.map((function(e,t){var n=l[e];return j.a.createElement(je,{handleCityChanged:r,data:n,showIndex:i,index:t,key:t})}))))}}]),t}(R.PureComponent);function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e,t,n){return t=_()(t),v()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],_()(e).constructor):t.apply(e,n))}var Ye={64:"grouptravel",2:"freetravel",32:"visa",8192:"youxue",4:"cruise",dp20:"dp20",dp20h5:"dp20h5"},We=[{value:"\u67e5\u8be2\u56e2\u961f\u6e38",tab:"64"},{value:"\u67e5\u8be2SDP",tab:"2"},{value:"\u67e5\u8be2DP2.0",tab:"dp20"},{value:"\u67e5\u8be2\u7b7e\u8bc1",tab:"32"},{value:"\u67e5\u8be2\u6e38\u5b66",tab:"8192"},{value:"\u67e5\u8be2\u90ae\u8f6e",tab:"4"},{value:"\u67e5\u8be2DP2.0 H5",tab:"dp20h5"}],Qe=["ABCDEFGH","JKLMNOPQ","RSTWX","YZ"],Ke=0,Je=function(e){function t(e){var n;return d()(this,t),n=ze(this,t,[e]),T()(g()(n),"handlerWinClick",(function(){n.setState({isShowSaleCity:!1})})),T()(g()(n),"isShow",(function(e,t){return!("[object Array]"===Object.prototype.toString.call(e)&&e.indexOf(t)>-1||e===t)})),T()(g()(n),"onClick",function(){var e=s()(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.state.isShowSaleCity,n.setState({isShowSaleCity:!r});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T()(g()(n),"onSaleCityBlur",function(){var e=s()(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({isShowSaleCity:!1});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T()(g()(n),"onSaleCityMouseDown",function(){var e=s()(regeneratorRuntime.mark((function e(t){var r,a,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.state.SaleCityName,a=t.SaleCityId,i=t.DepartureCityName,o=t.DepartureCityId,n.setState({SaleCityName:i||r,SaleCityId:a,DepartureCityId:o,isShowSaleCity:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T()(g()(n),"onChange",function(){var e=s()(regeneratorRuntime.mark((function e(t){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.props.ctrl,a=t.currentTarget.value,n.setState({DestCity:a}),i=function(){var e=s()(regeneratorRuntime.mark((function e(){var t,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=$e(),i=et(a),e.next=4,r.post(t,i);case 4:o=e.sent,n.setState({destCityList:tt(o),isShowHot:!a});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),clearTimeout(Ke),Ke=setTimeout((function(){return i()}),100);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T()(g()(n),"onMouseDown",function(){var e=s()(regeneratorRuntime.mark((function e(t){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.props.data.DestCity,a=t.currentTarget.getAttribute("data-value"),n.setState({DestCity:a||r,destCityList:null,isShowHot:!1});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T()(g()(n),"onFocus",function(){var e=s()(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.props.data.DestCity,n.setState({isShowHot:!r});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T()(g()(n),"onBlur",function(){var e=s()(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({isShowHot:!1,destCityList:null});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T()(g()(n),"handleGetSalePlaceInfo",s()(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.ctrl,r={IsInternal:!0,ProductType:"AGG"},e.prev=2,e.next=5,t.post(t.API.departureCity,r);case 5:a=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2);case 11:a&&a.Data||(a={}),a&&a.Data&&n.setState({saleCityList:Xe(a.Data)});case 13:case"end":return e.stop()}}),e,null,[[2,8]])})))),T()(g()(n),"handleOfflineSearchProduct",function(){var e=s()(regeneratorRuntime.mark((function e(t){var r,a,i,o,c,l,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.props.data,a=r.offlineUid,i=r.offlineCookieId,o=r.isNewRedirectUrl,c=r.isVisaMigrated,l=n.state.DestCity,s=t.currentTarget.getAttribute("data-tabid"),u={handler:"offlinesearch",action:"do",targetTab:s,salecity:n.state.SaleCityId,departurecity:n.state.DepartureCityId,uid:a,CookieID:i,keyword:escape(l)},l||s.startsWith("dp20")){e.next=7;break}return alert("\u8bf7\u5148\u8f93\u5165\u76ee\u7684\u5730"),e.abrupt("return",!1);case 7:o&&4!=s?n.redirectListPage(qe(qe({},u),{},{keyword:l,isVisaMigrated:c})):window.location.href="/vacationsoffline/actionhandler.ashx?".concat(x.a.stringify(u));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T()(g()(n),"redirectListPage",function(){var e=s()(regeneratorRuntime.mark((function e(t){var r,a,i,o,c,l,s,u,d,p,f,m,v,h,g,y,b,E,_,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=n.props.ctrl,a="",i="",o=t.targetTab,c=t.keyword,l=void 0===c?"":c,s=t.uid,u=void 0===s?"":s,d=t.CookieID,p=void 0===d?"":d,f=t.salecity,m=void 0===f?"":f,v=t.departurecity,h=void 0===v?"":v,g=t.isVisaMigrated,y=Ye[o],"dp20"!=o){e.next=10;break}a="//".concat(window.location.host.replace("booking","diytour"),"/idiytour/newEntry?uid=").concat(u,"&scid=").concat(m,"&keyword=").concat(l,"&from=").concat(encodeURIComponent(window.location.href)),e.next=20;break;case 10:if("dp20h5"!=o){e.next=14;break}a="//".concat(window.location.host.replace("booking","idiytour"),"?uid=").concat(u,"&scid=").concat(m,"&keyword=").concat(l,"&from=").concat(encodeURIComponent(window.location.href)),e.next=20;break;case 14:return e.next=16,r.post(r.API.poi,{forSearch:!0,Names:[l]});case 16:b=e.sent,null!=(E=(b||{}).poiQuery)&&E.length>0?(a="/list/".concat(y,"/").concat(E[0].dataType,"--").concat(E[0].id,".html?startcity=").concat(h,"&uid=").concat(u,"&CookieID=").concat(p),i="tab=".concat(y,"&startcity=").concat(m,"&poid=").concat(E[0].id,"&type=1&uid=").concat(u,"&CookieID=").concat(p,"&poiType=").concat(E[0].dataType)):(_="searchvalue",!isNaN(+l)&&+l>0&&(_="productid"),O=encodeURIComponent(l),a="/list/".concat(y,"/sc").concat(h,".html?").concat(_.replace("searchvalue","sv"),"=").concat(O,"&uid=").concat(u,"&CookieID=").concat(p),i="tab=".concat(y,"&startcity=").concat(m,"&").concat(_,"=").concat(O,"&searchtext=").concat(O,"&type=2&uid=").concat(u,"&CookieID=").concat(p)),32==o&&(a=g?"/visa/searchlist?".concat(i):"/vacationsoffline/search.aspx?".concat(i));case 20:window.location.href=a,e.next=27;break;case 23:e.prev=23,e.t0=e.catch(0),alert("\u67e5\u8be2\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");case 27:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}()),T()(g()(n),"handleGetHotCities",s()(regeneratorRuntime.mark((function e(){var t,r,a,i,o,c,l,s,u,d,p,f,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null===(t=n.props)||void 0===t?void 0:t.ctrl,a={KeyList:["tour_offline_hot_cities"]},e.prev=2,e.next=5,r.post(r.API.qConfig,a);case 5:i=e.sent,o=i.ResponseStatus,c=i.Data,"Success"===o.Ack&&c&&(s=(c||{}).AppSettingList,u=null!==(l=null===s||void 0===s?void 0:s.find((function(e){return"tour_offline_hot_cities"===e.Key})))&&void 0!==l?l:{},d=u.Value,p=JSON.parse(d),m=(f=null!==p&&void 0!==p?p:{}).oversea,v=f.inland,n.setState({mainlandCities:JSON.parse(v),overseaCities:JSON.parse(m)})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))),n.state={SaleCityName:n.props.data.saleCityName||"\u4e0a\u6d77",SaleCityId:n.props.data.saleCityId||2,DepartureCityId:n.props.data.departureCityId||n.props.data.saleCityId||2,DestCity:n.props.data.DestCity||"",saleCityList:null,isShowSaleCity:!1,destCityList:null,isShowHot:!1,mainlandCities:["\u53a6\u95e8","\u5317\u4eac","\u4e3d\u6c5f","\u6842\u6797","\u821f\u5c71","\u6606\u660e","\u65e0\u9521","\u4e5d\u5be8\u6c9f","\u676d\u5dde","\u4e0a\u6d77","\u5343\u5c9b\u6e56","\u897f\u5858","\u6df1\u5733","\u9ec4\u5c71","\u82cf\u5dde","\u9752\u5c9b","\u897f\u5b89","\u5e38\u5dde","\u5927\u8fde","\u4e09\u5ce1","\u5357\u4eac","\u5f20\u5bb6\u754c","\u4e4c\u9547","\u6210\u90fd","\u5e7f\u5dde"],overseaCities:["\u9999\u6e2f","\u666e\u5409\u5c9b","\u97e9\u56fd","\u53f0\u6e7e","\u6cf0\u56fd","\u9a6c\u5c14\u4ee3\u592b","\u5df4\u5398\u5c9b","\u65e5\u672c","\u6fb3\u95e8","\u65b0\u52a0\u5761","\u67ec\u57d4\u5be8","\u610f\u5927\u5229","\u6cd5\u56fd","\u5e0c\u814a","\u585e\u73ed\u5c9b","\u82f1\u56fd","\u7f8e\u56fd","\u6bdb\u91cc\u6c42\u65af","\u957f\u6ee9\u5c9b","\u4fc4\u7f57\u65af","\u5965\u5730\u5229","\u745e\u58eb"]},n}return k()(t,e),f()(t,[{key:"componentDidMount",value:function(){this.handleGetSalePlaceInfo(),this.handleGetHotCities(),window.addEventListener("click",this.handlerWinClick)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.handlerWinClick)}},{key:"render",value:function(){var e=this,t=(this.props.data||{}).hideSearchBtns,n=this.state,r=n.saleCityList,a=n.isShowSaleCity,i=We.filter((function(n){var r=n.tab,a=Ye[r];return e.isShow(t,a)}));return j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{className:"s_item_box"},j.a.createElement("div",{className:"s_item",onClick:Ze},"\u51fa\u53d1\u5730",j.a.createElement("span",{className:"color_orange"},"*"),j.a.createElement("input",{type:"text",value:this.state.SaleCityName,readOnly:"readOnly",className:"s_vca_dest","data-cityid":this.state.DepartureCityId,onClick:this.onClick}),r&&j.a.createElement(He,{cityStationShow:a,data:r,handleCityChanged:function(t){e.onSaleCityMouseDown(t)}})),j.a.createElement("div",{className:"s_item2",style:{width:170}},"\u76ee\u7684\u5730",j.a.createElement("span",{className:"color_orange"},"*"),j.a.createElement("input",{className:"indent_input",style:{width:80},id:"destCityInput",type:"text",value:this.state.DestCity||"",onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur}),this.state.isShowHot&&j.a.createElement("div",{id:"hotDestPanel",className:"indent_head_box"},j.a.createElement("h3",null,"\u70ed\u95e8\u641c\u7d22"),j.a.createElement("dl",{className:"indent_index_hotsearch"},j.a.createElement("dt",null,"\u56fd\u5185"),this.state.mainlandCities&&this.state.mainlandCities.map((function(t,n){return j.a.createElement("a",{href:"javascript:void(0);","data-value":t,onMouseDown:e.onMouseDown,key:n},t)})),j.a.createElement("dt",{style:{float:"none"}},"\u51fa\u5883"),this.state.overseaCities&&this.state.overseaCities.map((function(t,n){return j.a.createElement("a",{href:"javascript:void(0);","data-value":t,onMouseDown:e.onMouseDown,key:n},t)}))),j.a.createElement("a",{id:"btn_CloseSearches",className:"close",href:"javascript:void(0);",onMouseDown:this.onMouseDown},"\xd7")),!!this.state.destCityList&&j.a.createElement("div",{id:"tuna_address",className:"c_address_select"},j.a.createElement("div",{className:"c_address_wrap"},j.a.createElement("div",{className:"c_address_list"},this.state.destCityList&&this.state.destCityList.map((function(t,n){return j.a.createElement("a",{href:"javascript:void(0);","data-value":t.name,onMouseDown:e.onMouseDown,key:n},t.name,j.a.createElement("span",null))})))))),i.map((function(t,n){var r=t.value,a=t.tab;return n>5?null:j.a.createElement("input",{key:n,type:"button",className:"indent_search_btn2",value:r,"data-tabid":a,onClick:e.handleOfflineSearchProduct})}))),i.length>6&&j.a.createElement("div",{className:"s_item_box",style:{paddingLeft:400}},i.slice(6).map((function(t,n){var r=t.value,a=t.tab;return j.a.createElement("input",{key:n,type:"button",className:"indent_search_btn2",value:r,"data-tabid":a,onClick:e.handleOfflineSearchProduct})}))))}}]),t}(R.Component),Xe=function(e){var t=e||{},n=t.HotCityList,r=void 0===n?[]:n,a=t.DepartureCityList,i=void 0===a?[]:a;i=i||[];var o=(r=r||[]).map((function(e){var t=e.DepartureCityId,n=e.DepartureCityName;return{DepartureCityId:t,SaleCityId:e.SaleCityId,DepartureCityName:n}})),c={},l=[],s={};return Qe.forEach((function(e){c[e]={}})),i.forEach((function(e){var t=e.Alpha,n=e.CityList;(n=n||[]).forEach((function(e){var t=e.DepartureCityName,n=e.PinYin,r=e.DepartureEName,a=e.DepartureCityId,i=e.SaleCityId;r||(r=n.substring(0,1).toUpperCase()+n.substring(1)),r=r.replace(/[^A-Za-z0-9]/g,""),e.DepartureEName=r,l.push({DepartureCityId:a,SaleCityId:i,DepartureCityName:t,DepartureEName:r,PinYin:n})})),s[t]=n,Qe.forEach((function(e){(function(e,t){var n;return"string"===typeof e&&(n=-1!==e.indexOf(t)),n})(e,t)&&(c[e][t]=n)}))})),{hotCityList:o,departureCityList:c,chineseAssociate:l,alphaAsscciate:s}},Ze=function(e){e.stopPropagation()},$e=function(){var e;return{fat:"http://gateway.m.fws.qa.nt.ctripcorp.com/restapi/soa2/20577/suggest",prod:"http://apigateway.ctripcorp.com/restapi/soa2/20577/suggest"}[null!==(e=location)&&void 0!==e&&null!==(e=e.hostname)&&void 0!==e&&e.includes(".fat")?"fat":"prod"]},et=function(e){return{client:{locale:"zh-CN",currency:"CNY",source:"offline",cid:"",variables:[{key:"CHANNEL_ID",value:"114"},{key:"SPECIFIED_MODULES",value:"SUGGESTIONS"},{key:"NO_OPERATE_REORDER",value:"true"}]},tab:1,keyword:e,channel:"ONLINE",geo:{departure:{id:2,type:"base",category:3}}}},tt=function(e){var t=null,n=(null===e||void 0===e?void 0:e.modules)||[];if(null!==n&&void 0!==n&&n.length){var r,a,i=(null===n||void 0===n?void 0:n.find((function(e){return 7===(null===e||void 0===e?void 0:e.id)})))||{};if(null!==i&&void 0!==i&&null!==(r=i.items)&&void 0!==r&&r.length)t=null===i||void 0===i||null===(a=i.items)||void 0===a?void 0:a.map((function(e){var t=e||{};return{id:t.id,name:t.name}}))}return t};function nt(e,t,n){return t=_()(t),v()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],_()(e).constructor):t.apply(e,n))}var rt=function(e){function t(e){var n;return d()(this,t),n=nt(this,t,[e]),T()(g()(n),"onChange",(function(e){var t=e.target.validity.valid?e.target.value:n.state.inputValue;n.setState({inputValue:t.trim()})})),T()(g()(n),"onCheck",(function(e){var t=e.target.getAttribute("data-type");n.setState(T()({},t,e.target.checked))})),T()(g()(n),"handleOfflineSearchProduct",function(){var e=s()(regeneratorRuntime.mark((function e(t){var r,a,i,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.state.inputValue,a=n.props.data,i=a.offlineUid,o=a.offlineCookieId,"\u8bf7\u8f93\u5165\u4ea7\u54c1ID",r){e.next=6;break}return alert("\u8bf7\u8f93\u5165\u4ea7\u54c1ID"),e.abrupt("return",!1);case 6:c="/tour/detail/p".concat(r,"s2.html?uid=").concat(encodeURIComponent(i),"&CookieID=").concat(encodeURIComponent(o)),window.open(c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T()(g()(n),"handleOfflineSearchTempOrder",function(){var e=s()(regeneratorRuntime.mark((function e(t){var r,a,i,o,c,l,s,u,d,p,f,m,v,h,g,y,b,E,_,O;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.state.inputValue,a=n.props.data,i=a.offlineUid,o=a.offlineCookieId,c=n.props.ctrl,""!=(l=r.trim())){e.next=7;break}return alert("\u8bf7\u5f55\u5165\u6682\u5b58\u8ba2\u5355\u53f7"),e.abrupt("return");case 7:return e.prev=7,s={OrderID:l,PlatformId:5,RequestTypeList:["Basic"],LifeCycle:"Uncertain",Version:811e3,SourceFrom:"100027462"},e.next=11,c.post(c.API.getOrderDetailV3,s);case 11:if(u=e.sent,p=(d=u||{}).ResponseStatus,f=d.Data,v=(m=p||{}).Ack,h=m.Errors,g=h&&h[0]||{},"Success"==v){e.next=19;break}alert(g.Message||"\u67e5\u8be2\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5"),e.next=27;break;case 19:if(y=(f||{}).BasicInfo,b=y.UID,E=y.OrderId,_=y.OrderType,O="",b==i){e.next=25;break}return alert("\u6682\u5b58\u5355\u975e\u5f53\u524dUID"),e.abrupt("return");case 25:O="6"==_?"//idiytour.package".concat("fat"===n.context.env?".fat29.qa.nt":"",".ctripcorp.com/confirm?action=share&uid=").concat(encodeURIComponent(i),"&orderid=").concat(E,"&CookieID=").concat(encodeURIComponent(o)):"//order.package".concat("fat"===n.context.env?".fat29.qa.nt":"",".ctripcorp.com/tour/order_detail/temp_page_offline?orderId=").concat(E,"&uid=").concat(encodeURIComponent(i),"&CookieID=").concat(encodeURIComponent(o)),window.open(O);case 27:e.next=32;break;case 29:e.prev=29,e.t0=e.catch(7),alert("\u67e5\u8be2\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");case 32:case"end":return e.stop()}}),e,null,[[7,29]])})));return function(t){return e.apply(this,arguments)}}()),T()(g()(n),"handleOfflineSearchOrder",function(){var e=s()(regeneratorRuntime.mark((function e(t){var r,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.state.inputValue,a=n.props.data,a.offlineUid,a.offlineCookieId,"\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7",r){e.next=6;break}return alert("\u8bf7\u8f93\u5165\u8ba2\u5355\u53f7"),e.abrupt("return",!1);case 6:i="//".concat("membersint.members."+window.location.host.match(/(fat|ctripcorp).*/)[0].replace(/fat\d+/,"fat47"),"/modulejump/tNetv.aspx?module=4126&location=frame&OrderID=").concat(r),window.open(i);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T()(g()(n),"handleReloadPage",s()(regeneratorRuntime.mark((function e(){var t,r,a,i,o,c,l,s,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.state,r=t.forceCheckBox,a=t.leadCheckBox,i=n.props.data,o=i.ProductId,c=i.DepartureId,l=i.offlineUid,s=i.offlineCookieId,u={pkg:o,startcity:c,specialDiscountID:0,chkForceOrder:r,chkNotSubOrder:r&&!a,chkLeaderOrder:a,uid:encodeURIComponent(l),CookieID:encodeURIComponent(s)},d="".concat(window.location.pathname,"?").concat(x.a.stringify(u)),window.location.href=d;case 5:case"end":return e.stop()}}),e)})))),n.state={inputValue:"",forceCheckBox:n.props.data.offlineChkForceOrder,leadCheckBox:n.props.data.offlineChkLeaderOrder,errmessage:""},n}return k()(t,e),f()(t,[{key:"render",value:function(){var e=(this.props.data||{}).isShowOrderOptionButton;return j.a.createElement("div",{className:"indent_ensure"},j.a.createElement("input",{type:"text",className:"indent_input inputSel",value:this.state.inputValue,placeholder:"\u8bf7\u8f93\u5165\u4ea7\u54c1ID\u6216\u8ba2\u5355\u53f7",onChange:this.onChange,pattern:"[0-9]*"}),j.a.createElement("input",{type:"button",className:"indent_search_btn4",value:"\u67e5\u4ea7\u54c1ID","data-type":"product",onClick:this.handleOfflineSearchProduct}),j.a.createElement("input",{type:"button",className:"indent_search_btn3",value:"\u67e5\u6682\u5b58\u8ba2\u5355","data-type":"temporder",onClick:this.handleOfflineSearchTempOrder}),j.a.createElement("input",{type:"button",className:"indent_search_btn4",value:"\u67e5\u6b63\u5f0f\u8ba2\u5355","data-type":"order",onClick:this.handleOfflineSearchOrder}),e&&j.a.createElement(j.a.Fragment,null,j.a.createElement("label",{className:"indent_base_label"},"\xa0\xa0",j.a.createElement("input",{type:"checkbox","data-type":"forceCheckBox",checked:this.state.forceCheckBox,onChange:this.onCheck}),"\u5f3a\u5236\u8ba2\u5355\uff08\u4e0d\u4e0b\u5b50\u8ba2\u5355\uff09"),j.a.createElement("label",{className:"indent_base_label"},j.a.createElement("input",{type:"checkbox","data-type":"leadCheckBox",checked:this.state.leadCheckBox,onChange:this.onCheck}),"\u9886\u961f\u8ba2\u5355"),j.a.createElement("span",{className:"color_gray"},"(\u5f3a\u5236\u8ba2\u5355\u3001\u9886\u961f\u8ba2\u5355\u4e0d\u66f4\u65b0\u56e2\u623f\u4f7f\u7528\u91cf)"),j.a.createElement("a",{href:"javascript:;",className:"indent_search_btn5",onClick:this.handleReloadPage},"\u786e\u5b9a")))}}]),t}(R.Component),at=function(e){var t=Object(L.useModelState)().isOffline,n=Object(L.useCtrl)(),r=e.ProductId,a=e.DepartureId,i=e.isNewRedirectUrl,o=e.isShowOrderOptionButton,c=e.isVisaMigrated,l=e.hideSearchBtns,s=e.saleCityId,u=e.saleCityName,d=e.keyword,p=e.offlineChkForceOrder,f=e.offlineChkLeaderOrder,m=ke(e)||{},v=m.uid,h=m.cookieId;return t?j.a.createElement("div",{className:"indent_search_box"},j.a.createElement("div",{className:"indent_search"},j.a.createElement("div",{className:"indent_bill"},j.a.createElement(Je,{data:{fetch:n.fetch,offlineUid:v,offlineCookieId:h,isNewRedirectUrl:i,isVisaMigrated:c,hideSearchBtns:l,saleCityId:s,saleCityName:u,DestCity:d},ctrl:n}),j.a.createElement(rt,{data:{fetch:n.fetch,ProductId:r,offlineCookieId:h,offlineUid:v,DepartureId:a,offlineChkForceOrder:p,offlineChkLeaderOrder:f,isShowOrderOptionButton:o},ctrl:n})))):null};at.propTypes={isNewRedirectUrl:F.a.bool,isVisaMigrated:F.a.bool,isShowOrderOptionButton:F.a.bool,keyword:F.a.string,saleCityId:F.a.oneOfType([F.a.string,F.a.number]),saleCityName:F.a.string,hideSearchBtns:F.a.oneOfType([F.a.string,F.a.array]),offlineChkForceOrder:F.a.bool,offlineChkLeaderOrder:F.a.bool},at.defaultProps={isNewRedirectUrl:!1,isVisaMigrated:!0,isShowOrderOptionButton:!1,hideSearchBtns:"",keyword:"",saleCityId:"",saleCityName:"",offlineChkForceOrder:!1,offlineChkLeaderOrder:!1};var it=at;function ot(e,t,n){return t=_()(t),v()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],_()(e).constructor):t.apply(e,n))}var ct="javascript:void(0)",lt=function(){return j.a.createElement("span",{className:"page_ellipsis"},"...")},st=function(e){var t=e.pageId,n=e.page;return"grp-".concat(t,"-comment-number-").concat(n)},ut=function(e){for(var t=e.pageIndex,n=e.totalPage,r=e.pageChange,a=e.pageId,i=[],o=1;o<=n;o++)i.push(o);return j.a.createElement("div",{className:"detail_page_list"},t>=1&&j.a.createElement("a",{href:ct,onClick:function(){r(t-1)},id:st({pageId:a,page:t-1})},"\u4e0a\u4e00\u9875"),i.map((function(e){return j.a.createElement("a",{href:ct,className:e===t+1?"current":"",onClick:function(){t+1!==e&&r(e-1)},key:e,id:st({pageId:a,page:e})},e)})),t<n-1&&j.a.createElement("a",{href:ct,onClick:function(){r(t+1)},id:st({pageId:a,page:t+1})},"\u4e0b\u4e00\u9875"))},dt=function(e){var t=e.pageIndex,n=e.totalPage,r=e.pageChange,a=e.pageId,i=[],o=[],c=[];if(t<=3){for(var l=1;l<=5;l++)i.push(l);c=[n]}else if(t>=n-4){i=[1];for(var s=n-4;s<=n;s++)c.push(s)}else i=[1],o=[t-1,t,t+1,t+2,t+3],c=[n];return j.a.createElement("div",{className:"detail_page_list"},t>=1&&j.a.createElement("a",{href:ct,onClick:function(){r(t-1)},id:st({pageId:a,page:t-1})},"\u4e0a\u4e00\u9875"),i.map((function(e){return j.a.createElement("a",{href:ct,className:e===t+1?"current":"",onClick:function(){t+1!==e&&r(e-1)},key:e,id:st({pageId:a,page:e})},e)})),j.a.createElement(lt,null),!!o.length&&o.map((function(e){return j.a.createElement("a",{href:"javascript:void(0)",className:e===t+1?"current":"",onClick:function(){t+1!==e&&r(e-1)},key:e,id:st({pageId:a,page:e})},e)})),!!o.length&&j.a.createElement(lt,null),c.map((function(e){return j.a.createElement("a",{href:"javascript:void(0)",className:e===t+1?"current":"",onClick:function(){t+1!==e&&r(e-1)},key:e,id:st({pageId:a,page:e})},e)})),t<n-1&&j.a.createElement("a",{href:ct,onClick:function(){r(t+1)},id:st({pageId:a,page:t+1})},"\u4e0b\u4e00\u9875"))},pt=function(e){function t(){var e;d()(this,t);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=ot(this,t,[].concat(r)),T()(g()(e),"pageRedirect",(function(t){var n=e.props,r=n.pageSize,a=n.total,i=Math.ceil(a/r),o=+e.refs.pageNum.value.trim();o&&((o-=1)<=0?o=0:o>=i&&(o=i-1),e.props.pageChange(o)),e.refs.pageNum.value=""})),e}return k()(t,e),f()(t,[{key:"render",value:function(){var e=this.props,t=e.pageIndex,n=e.pageSize,r=e.total,a=e.pageId,i=Math.ceil(r/n);return j.a.createElement("div",{className:"basefix detail_page"},i<=6&&j.a.createElement(ut,{totalPage:i,pageIndex:t,pageChange:this.props.pageChange,pageId:a}),i>6&&j.a.createElement(dt,{totalPage:i,pageIndex:t,pageChange:this.props.pageChange,pageId:a}),j.a.createElement("div",{className:"pagevalue"},"\u5230",j.a.createElement("input",{type:"number",className:"page_num",ref:"pageNum"}),"\u9875",j.a.createElement("input",{type:"button",className:"page_submit",value:"\u786e\u5b9a",onClick:this.pageRedirect})))}}]),t}(R.Component),ft=function(e){var t=e.offlineUid,n=e.offlineCookieId,r=e.handleCloseFavourite,a=Object(R.useState)(0),i=c()(a,2),o=i[0],l=i[1],s=Object(R.useState)(!0),u=c()(s,2),d=u[0],p=u[1],f=mt(t,o,p),m=f.FavoriteList,v=f.TotalRecord;return j.a.createElement("div",{className:"sign_info"},j.a.createElement("h2",null,j.a.createElement("a",{className:"close",onClick:r}),"\u7528\u6237\u6536\u85cf"),d&&j.a.createElement("div",{className:"i_loading"},j.a.createElement("img",{src:"//pic.ctrip.com/common/loading.gif",alt:""}),"\u67e5\u8be2\u4e2d\uff0c\u8bf7\u7a0d\u5019..."),!d&&(!m||m.length<=0)&&j.a.createElement("div",{className:"no_product"},"\u6682\u65e0\u4ea7\u54c1"),!d&&m&&m.length>0&&j.a.createElement(vt,{list:m,offlineUid:t,offlineCookieId:n}),m&&m.length>0&&j.a.createElement(pt,{pageIndex:o,pageSize:10,total:v,pageChange:function(e){try{if(Math.round(e)!=e)return;l(e)}catch(t){}},type:"offline"}))},mt=function(e,t,n){var r=Object(R.useState)({}),a=c()(r,2),i=a[0],o=a[1],l=Object(L.useCtrl)(),u=Object(L.useModelState)();u.isFreeTravel,u.isGroupTravel,u.isProxyFreeTravel;return Object(R.useEffect)((function(){(function(){var r=s()(regeneratorRuntime.mark((function r(){var a,i,c,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n(!0),a=10*t+1,r.next=4,l.post(l.API.getMyFavoritesBySoa,{QueryList:[{BizType:"GROUP_TRAVEL"}],UID:e,SortType:0,StartOffset:a||1,ReturnCount:10},{raw:!0});case 4:i=r.sent,c=i.FavoriteList,s=i.TotalRecord,o({FavoriteList:c,TotalRecord:s}),n(!1);case 8:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}})()()}),[e,t]),i},vt=function(e){var t=e.list,n=e.offlineUid,r=e.offlineCookieId;return j.a.createElement("ul",{className:"indent_collect_list"},t&&t.map((function(e,t){return j.a.createElement("li",{key:t},j.a.createElement("div",{className:"content"},j.a.createElement("a",{href:"/tour/detail/p".concat(e.ProductID,"s").concat(e.SaleCityID,".html?uid=").concat(n,"&CookieID=").concat(r),title:e.ProductName,target:"_blank"},e.ProductName)),j.a.createElement("div",{className:"collect_prise"},e.Price>0?j.a.createElement("span",{className:"color_orange"},j.a.createElement("dfn",null,"\uffe5"),j.a.createElement("strong",null,e.Price),"\u8d77"):j.a.createElement("span",{className:"color_orange"},"\u5b9e\u65f6\u8ba1\u4ef7")))})))},ht=n(516),gt=function(e){var t=Object(R.useState)("user"),n=c()(t,2),r=n[0],a=n[1],i=Object(R.useState)(null),o=c()(i,2),l=o[0],s=(o[1],Object(R.useState)(!0)),u=c()(s,2),d=u[0],p=u[1],f=bt(e.uid,e.cookieId,p);return j.a.createElement("div",{className:"sign_info"},j.a.createElement("h2",{id:"userTable"},j.a.createElement("a",{className:"close",onClick:e.handleCloseBrowseHistory}),j.a.createElement("span",{className:"user"==r?"cur":"",onClick:function(){return a("user")}},"\u7528\u6237\u6d4f\u89c8\u8bb0\u5f55"),j.a.createElement("span",{className:"my"==r?"cur":"",onClick:function(){return a("my")}},"\u6211\u7684\u6d4f\u89c8\u8bb0\u5f55")),("user"!=r||d||f&&f.length)&&("my"!=r||d||l&&l.length)?null:j.a.createElement("div",{className:"no_product"},"\u6682\u65e0\u4ea7\u54c1"),d&&j.a.createElement("div",{className:"i_loading"},j.a.createElement("img",{src:"//pic.ctrip.com/common/loading.gif",alt:""}),"\u67e5\u8be2\u4e2d\uff0c\u8bf7\u7a0d\u5019..."),j.a.createElement(yt,{listData:"user"===r?f:l}))},yt=function(e){var t=e.listData;return j.a.createElement("div",{className:"user_browse"},j.a.createElement("ul",{className:"indent_collect_list"},t&&t.map((function(e,t){return j.a.createElement("li",{key:t},j.a.createElement("div",{className:"content"},j.a.createElement("a",{href:e.Url,title:e.Name,target:"_blank"},e.Name)),j.a.createElement("div",{className:"collect_prise"},e.MinPrice>0?j.a.createElement("span",{className:"color_orange"},j.a.createElement("dfn",null,"\uffe5"),j.a.createElement("strong",null,e.MinPrice),"\u8d77"):j.a.createElement("span",{className:"color_orange"},"\u5b9e\u65f6\u8ba1\u4ef7")))}))))},bt=function(e,t,n){var r=Object(L.useCtrl)(),a=Object(R.useState)(null),i=c()(a,2),o=i[0],l=i[1];return Object(R.useEffect)((function(){e&&function(){var a=s()(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(!0),a.prev=1,a.next=4,Et(e,t,r);case 4:i=a.sent,a.next=10;break;case 7:a.prev=7,a.t0=a.catch(1);case 10:n(!1),l(i);case 12:case"end":return a.stop()}}),a,null,[[1,7]])})));return function(){return a.apply(this,arguments)}}()()}),[e,t]),o},Et=function(){var e=s()(regeneratorRuntime.mark((function e(t,n,r){var a,i,o,c,l,s,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.post(r.API.getBrowseHistoryOffline,{bizTypes:["Tour_diy","Tour_pkg","Tour_private","Tour_self"],uid:t,beginDate:new Date(+new Date+288e5-6048e5).toISOString().replace(/t/i," ").substring(0,19),channel:"Online",pageIndex:1,pageSize:15},{raw:!0});case 2:if(a=e.sent,i=(a||{}).historyInfos,!((o=S.a.uniqBy(S.a.map(i,(function(e){return{productId:e.productId,fromCityId:e.fromCityId,title:e.title}})),"productId"))&&o.length>0)){e.next=14;break}return c=o[0].fromCityId,l=o.map((function(e){return{Id:e.productId,departureCityId:e.fromCityId,productType:"GT"}})),e.next=10,r.post(r.API.productSearch,{requestSource:"tour",head:{auth:null},client:{locale:"zh-CN",currency:"CNY",channel:Number(Object(ht.b)(r.context)),location:{cityId:c,cityType:3,locatedCityId:c},version:"85000"},productKeys:l,productOption:{needBasicInfo:!0,needPrice:!0}});case 10:return s=e.sent,u=(s||{}).products,d=S.a.map(u,(function(e,r){var a,i=e||{},l=i.id,s=i.priceInfo,u=i.basicInfo.name,d=(s||{}).price,p=null===o||void 0===o||null===(a=o[r])||void 0===a?void 0:a.title;return{Name:u||p,ProductId:l,MinPrice:d,Url:"/tour/detail/p".concat(l,"s").concat(c,".html?uid=").concat(t,"&CookieID=").concat(n)}})),e.abrupt("return",d);case 14:return e.abrupt("return",[]);case 15:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),_t=function(e){var t=e.handleClosePunish,n=e.data||{},r=n.resourceProductId,a=n.isMoreLine,i=n.productLineList,o=n.selectedDepartDate,l=n.productId,s=n.env,u=i||[],d=Object(R.useState)(r||l),p=c()(d,2),f=p[0],m=p[1],v=Object(R.useState)(""),h=c()(v,2),g=h[0],y=h[1],b=Object(R.useState)(!1),E=c()(b,2),_=E[0],O=E[1],k=Object(R.useState)(1),C=c()(k,2),T=C[0],I=C[1],S=Object(R.useState)(!0),N=c()(S,2),P=N[0],w=N[1],x=function(e){var t=e.target.value;I(t-0)};Object(R.useEffect)((function(){2==T?o?(u.some((function(e){var t=e.Description,n=e.ProductId,i=e.Alias;if(a&&n===r)return y("".concat(i,"\u7ebf ").concat(t)),!0})),w(!1)):(w(!0),O(!0)):(w(!1),O(!1))}),[T]);var D="javascript:void(0);";if(!P){var A=f;D="//vendor.package.".concat("fat"===s?"fat29.qa.nt.":"","ctripcorp.com/ivbk/quality/punishment/product?type=").concat(1===T?"offline":"close","&from=beforeSale"),2===T&&o&&(A=r||l,D="".concat(D,"&schedule=").concat(o)),D="".concat(D,"&productId=").concat(A)}return j.a.createElement("div",{className:"questions_mask"},j.a.createElement("h2",null,j.a.createElement("a",{href:"javascript:;",className:"close",onClick:t},"x"),"\u4ea7\u54c1\u60e9\u7f5a"),j.a.createElement("div",{className:"masking_padding"},j.a.createElement("div",{className:"off_punish_box"},j.a.createElement("span",{className:"off_punish_title"},"\u64cd\u4f5c\u7c7b\u578b\uff1a"),j.a.createElement("label",{className:"off_punish_s"},j.a.createElement("input",{type:"radio",name:"closetype",checked:1===T,value:"1",onChange:x}),"\u4e0b\u7ebf\u7ebf\u8def"),j.a.createElement("label",{className:"off_punish_s"},j.a.createElement("input",{type:"radio",name:"closetype",checked:2===T,value:"2",onChange:x}),"\u5173\u95ed\u73ed\u671f")),u&&(null===u||void 0===u?void 0:u.length)>1&&1===T&&a&&j.a.createElement("div",{className:"off_punish_box"},j.a.createElement("span",{className:"off_punish_title"},"\u9009\u62e9\u7ebf\u8def\uff1a"),j.a.createElement("select",{className:"off_punish_select",value:f,onChange:function(e){var t=e.target.value;m(t)}},!f&&j.a.createElement("option",null,"\u8bf7\u9009\u62e9\u7ebf\u8def"),u.map((function(e){var t=e.Description,n=e.ProductId,r=e.Alias;return j.a.createElement("option",{key:n,value:n},r,"\u7ebf ",t)})))),_&&j.a.createElement("p",{className:"off_punish_tip"},"*\u8bf7\u5148\u5728\u8be6\u60c5\u9875\u4e0a\u9009\u62e9\u8981\u5173\u95ed\u7684\u73ed\u671f\u548c\u7ebf\u8def"),!_&&!!o&&2===T&&j.a.createElement("p",{className:"off_punish_text"},"\u73ed\u671f\uff1a",o," \u661f\u671f",function(e){return["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"][new Date(e).getDay()]}(o)," ",j.a.createElement("br",null),a&&!!g&&j.a.createElement(j.a.Fragment,null,"\u7ebf\u8def\uff1a",g)),j.a.createElement("div",{className:"off_punish_btn_box"},j.a.createElement("a",{href:D,target:"_blank",className:P?"btn_middle_disabled":"btn_blue_middle",style:{marginLeft:0}},"\u4e0b\u4e00\u6b65"))))},Ot=function(e){window.scrollTo(0,0)},kt=function(e){var t=Object(L.useModelState)().isOffline,n=Object(L.useModelState)(),r=(Object(L.useCtrl)().context||{}).env,a=ke(),i=Object(R.useState)(!1),o=c()(i,2),l=o[0],s=o[1],u=n.resourceProductId,d=n.isMoreLine,p=n.productLineList,f=n.selectedDepartDate,m=n.productId;if(!t)return null;var v=function(e){s(l!=e&&e)},h=a||{},g=h.uid,y=h.cookieId,b=(e.ProductId,e.SaleCityId,e.DepartCityId,e.hideFooterBtns),E=!0===b,_="string"===typeof b?[b]:b,O=!E&&(!_||_&&-1===_.indexOf("history")),k=!E&&(!_||_&&-1===_.indexOf("favourite")),C=!E&&(!_||_&&-1===_.indexOf("punish")),T=!E&&(!_||_&&-1===_.indexOf("backtop"));return j.a.createElement("div",{className:"browse_fixed"},j.a.createElement("div",{className:"browse_fixed_box"},O&&j.a.createElement("div",{className:"indent_browse_box",onClick:function(){return v("history")}},j.a.createElement("a",{href:"javascript:;"},"\u6d4f\u89c8\u8bb0\u5f55")),k&&j.a.createElement("div",{className:"indent_collect",onClick:function(){return v("favourite")}},j.a.createElement("a",{href:"javascript:;"},"\u7528\u6237\u6536\u85cf")),C&&j.a.createElement("div",{className:"indent_collect",onClick:function(){return v("punish")}},j.a.createElement("a",{href:"javascript:;"},"\u4ea7\u54c1\u60e9\u7f5a")),T&&j.a.createElement("a",{onClick:Ot,href:"javascript:;"},"\u56de\u5230\u9876\u7aef")),"history"==l&&j.a.createElement(gt,{uid:g,cookieId:y,handleCloseBrowseHistory:function(){return v(!1)}}),"favourite"==l&&j.a.createElement(ft,{offlineUid:g,offlineCookieId:y,handleCloseFavourite:function(){return v(!1)}}),"punish"==l&&j.a.createElement(te,{width:522,height:190,open:"punish"==l,closeOnEsc:!1,closeOnOuterClick:!1},j.a.createElement(_t,{data:{resourceProductId:u,isMoreLine:d,productLineList:p,selectedDepartDate:f,productId:m,env:r},handleClosePunish:function(){return v("punish")}})))},Ct=kt;kt.propTypes={ProductId:F.a.oneOfType([F.a.string,F.a.number]),SaleCityId:F.a.oneOfType([F.a.string,F.a.number]),DepartCityId:F.a.oneOfType([F.a.string,F.a.number]),hideFooterBtns:F.a.oneOfType([F.a.bool,F.a.string,F.a.array])};var Tt=function(){var e=Object(L.useModelState)(),t=e.isOffline,n=e.isVisaMigrated,r=e.departureCity,a=e.search;if(t){var i=r||{},o=i.cityId,c=i.cityName,l=(a||{}).keyword;return j.a.createElement(j.a.Fragment,null,j.a.createElement(Re,null),j.a.createElement(it,{isNewRedirectUrl:!0,isVisaMigrated:n,isShowOrderOptionButton:!1,hideSearchBtns:["cruise","dp20h5","dp20"],saleCityId:o,saleCityName:c,keyword:l}),j.a.createElement(Ct,{hideFooterBtns:["punish"]}))}return null};var It=function(e){return e.isBestone},St=function(){var e=Object(L.useModelState)(),t=e.isBestone,n=e.isTradePrice,r=Object(L.useCtrl)().handleChangeBestoneType,a=Object(R.useState)(!1),i=c()(a,2),o=i[0],l=i[1],s=Object(R.useState)(n),u=c()(s,2),d=u[0],p=u[1],f=d?"\u540c\u884c\u4ef7":"\u5efa\u8bae\u5356\u4ef7",m=H()("bestone_trade",{bestone_trade_show:o}),v=H()("price_btn",{price_yellow:!d}),h=H()({price_btn_show:o}),g=H()("price_btn_one",{choose:!0}),y=H()("price_btn_two",{choose:!0}),b=Object(R.useCallback)((function(){l((function(e){return!e}))}),[]),E=Object(R.useCallback)((function(e){l(!1),p(e),r(e)}),[r]),_=Object(R.useCallback)((function(){l(!1)}),[]);return It({isBestone:t})?j.a.createElement("div",{className:"bestone_tel_main"},j.a.createElement("div",{className:"bestone_tel_box basefix"},j.a.createElement("div",{className:"bestone_tel_span basefix"},j.a.createElement("p",null,j.a.createElement("i",{className:"lcbz_ico_service"}),j.a.createElement("em",{className:"lcbz_stress"},"\u653e\u5fc3\u7684\u670d\u52a1"),j.a.createElement("span",{className:"lcbz_splitline"}),j.a.createElement("span",{className:"lcbz_text"},"\u9886\u5148\u7684\u670d\u52a1\u6807\u51c6 \u72ec\u521b\u7684\u4fdd\u969c\u4f53\u7cfb")),j.a.createElement("p",null,j.a.createElement("i",{className:"lcbz_ico_price"}),j.a.createElement("em",{className:"lcbz_stress"},"\u653e\u5fc3\u7684\u4ef7\u683c"),j.a.createElement("span",{className:"lcbz_splitline"}),j.a.createElement("span",{className:"lcbz_text"},"\u5177\u7ade\u4e89\u529b\u7684\u4ef7\u683c \u65e0\u4efb\u4f55\u9690\u5f62\u8d39\u7528"))),j.a.createElement(A.OuterClickWrapper,{onClick:_},j.a.createElement("div",{className:m},j.a.createElement("span",{className:v,onClick:b},f,j.a.createElement("i",{className:h})),o&&j.a.createElement("div",{className:"price_btn_box"},j.a.createElement("span",{className:g,onClick:function(){return E(!1)}},"\u5efa\u8bae\u5356\u4ef7"),"\xa0\xa0\xa0\xa0",j.a.createElement("span",{className:y,onClick:function(){return E(!0)}},"\u540c\u884c\u4ef7")))))):null},Nt=n(597),Pt={22:"icon_theme",2:"icon_circum",3:"icon_inland",4:"icon_hk",5:"icon_jp",6:"icon_asia",7:"icon_europe",8:"icon_america",9:"icon_other",23:"icon_inland",24:"icon_hk",25:"icon_jp",26:"icon_asia",27:"icon_naya",28:"icon_america",29:"icon_europe",32:"icon_other",33:"icon_nam"};function wt(e){var t=e.navigation,n=t.category,r=t.destList,a=void 0===r?[]:r,i=t.hotList,o=void 0===i?[]:i,c=e.curCategory,l=e.handleNavChange,s=c===n?"cur":"",u=[3,23].includes(n)?"destination_col  destination_inland":"destination_col";return j.a.createElement("li",{className:s,onMouseEnter:function(e){l(n)},"data-category":n},j.a.createElement("div",{className:u},j.a.createElement("i",{className:"icon_side ".concat(Pt[n])}),j.a.createElement("h3",null,a.map((function(e,t){var n=e.text,r=e.linkUrl,a=r?j.a.createElement("a",{href:r},n):n;return j.a.createElement("span",{key:t},a,"\xa0")}))),j.a.createElement("p",null,o.map((function(e,t){var n=e.text,r=e.highLight,a=e.linkUrl;return j.a.createElement("a",{key:t,href:a,className:r?"orange":""},n)}))),j.a.createElement("i",{className:"icon_side icon_arrow"})))}var xt=n(510),Dt=n.n(xt),Rt=["PRODUCT_TAG","RECOMMEND_TAG","FESTIVAL_TAG","SCHEDULE_TAG","PROMOTION_TAG","BARGAIN_TAG","FAVORITE_TAG"],jt=["PRE_SALE_TYPE_TAG","RISK_SCHEDULE_TAG"],At=420,Lt=420,Bt={bestone:"\u767e\u4e8b\u901a\u95e8\u5e97",ctripshop:"\u643a\u7a0b\u95e8\u5e97",youtripshop:"\u60a0\u7a0b\u95e8\u5e97",bestoneb2b:"\u5176\u4ed62B\u95e8\u5e97"},Ut={cityId:2,cityName:"\u4e0a\u6d77",saleCityId:2},Mt="d",Ft="shanghai",Vt=2,Ht="ONE",Gt="TWO",qt="TWO_NO_TITLE",zt="THREE",Yt="keyword",Wt="poi",Qt="tiny",Kt="full",Jt=999999999,Xt=1200,Zt=726,$t=926,en={WHOLE:126,GROUP_TRAVEL:64,AROUND:512,FREE_TRAVEL:2,DEST_FREE_TRAVEL:65536,PRIVATE_GROUP:1048576,DEST_PRIVATE_GROUP:2097152,CRUISE:4,SCENIC_HOTEL:262144,STUDY_ABROAD:8192,THEME_TRAVEL:68,DING_ZHI:131072,HH_TRAVEL:-16,LOCAL_ACTIVITY:-2,TICKET:-4,DAILY_TOUR:1024,VISA:32,VENDOR:-32,STORE:186},tn={WHOLE:"whole",GROUP_TRAVEL:"grouptravel",AROUND:"around",FREE_TRAVEL:"freetravel",DEST_FREE_TRAVEL:"destfreetravel",PRIVATE_GROUP:"personalgroup",DEST_PRIVATE_GROUP:"dstprgoup",SCENIC_HOTEL:"scenichotel",STUDY_ABROAD:"youxue",THEME_TRAVEL:"themetravel"},nn=[en.WHOLE,en.GROUP_TRAVEL,en.AROUND,en.FREE_TRAVEL,en.DEST_FREE_TRAVEL,en.STUDY_ABROAD],rn=[en.VISA,en.TICKET,en.LOCAL_ACTIVITY],an=[en.WHOLE,en.GROUP_TRAVEL,en.AROUND,en.FREE_TRAVEL,en.DEST_FREE_TRAVEL,en.PRIVATE_GROUP,en.DEST_PRIVATE_GROUP,en.CRUISE,en.STUDY_ABROAD,en.DAILY_TOUR,en.STORE],on=[en.GROUP_TRAVEL,en.AROUND,en.FREE_TRAVEL,en.DEST_FREE_TRAVEL,en.STUDY_ABROAD,en.VISA,en.STORE],cn=[en.GROUP_TRAVEL,en.AROUND,en.FREE_TRAVEL,en.DEST_FREE_TRAVEL,en.STUDY_ABROAD,en.VISA,en.STORE],ln="D",sn="S",un="R",dn="H",pn="B",fn=T()(T()(T()(T()(T()({},ln,"D"),sn,"SS"),un,"R"),dn,"H"),pn,"B"),mn="COUNTRY",vn="//vacations.ctrip.com/tangram/MzQ5MQ==?ctm_ref=vactang_page_3491",hn="//vacations.ctrip.com/tangram/MjExNQ==?ctm_ref=vactang_page_2115",gn="//vacations.ctrip.com/tangram/NDUxNQ==?ctm_ref=vactang_page_4515",yn="10320608962",bn="10320613204",En="TravelIntroBox",_n="BusinessEntryBox",On="CustomTravelEntryBox",kn="DiamondEntryBox",Cn="SixGuaranteesBox",Tn="MobileOrderQRBox",In="MicroLeaderQRBox",Sn="ScenicHotelTaocanBox",Nn="YouxueQualityBox",Pn="WeatherBox",wn="SearchAgainBox",xn="HistoryBox",Dn="FavoriteBox",Rn=["PLAY_LINE_EX","TravelDays","SaleDepartureStat","DepartureDate","Vehicle","ProductNewLine","ProductLine","HotDestination","HotScenicSpot","ProviderBrand","ProductPattern","ProductLevel","ProductDistrict","ADSuitPersons","ADNLineCharacteristic","ADNSpecialProject","PriceRange","RiskSchedule","ServicesTag"],jn=[{id:en.WHOLE,name:"\u5168\u90e8\u4ea7\u54c1",ename:"whole",flag:"\u65c5\u6e38",pageId:"104317",pageTab:"vac",filters:["ProductNewLine","ProductLine","PLAY_LINE_EX","HotDestination","HotScenicSpot","SaleDepartureStat","TravelDays","DepartureDate","ProductPattern","ProductLevel","ADSuitPersons","ADServiceCharacteristic","ADIsDirectFlight","ADHotelCharacteristic","ADNLineCharacteristic","ProductDistrict","ProviderBrand","PriceRange","ADServiceGarantee"],showDpSearchEntry:!0,showRecommendPoiList:!0,showProUserComment:!0,sideBoxConfig:[_n,On,En,Pn,wn,xn,Dn]},{id:en.GROUP_TRAVEL,name:"\u51fa\u53d1\u5730\u53c2\u56e2",ename:"grouptravel",flag:"\u8ddf\u56e2\u6e38",offlinePageId:"10650034834",pageId:"600000435",pageTab:"pkg",filters:["ProductNewLine","ProductLine","PLAY_LINE_EX","HotDestination","HotScenicSpot","SaleDepartureStat","TravelDays","DepartureDate","Vehicle","ProductPattern","ProductLevel","ADSuitPersons","ADNLineCharacteristic","ADNSpecialProject","ProductDistrict","SelectionOfRecommend","ProviderBrand","PriceRange","RiskSchedule","ServicesTag","PreSaleType"],showDpSearchEntry:!1,showRecommendPoiList:!0,showProUserComment:!0,sideBoxConfig:[_n,On,Cn,kn,Pn,wn,xn,Dn]},{id:en.AROUND,name:"\u76ee\u7684\u5730\u53c2\u56e2",ename:"around",flag:"\u5468\u8fb9\u6e38",offlinePageId:"10650035769",pageId:"600000436",pageTab:"dst",filters:["ProductNewLine","ProductLine","PLAY_LINE_EX","HotDestination","HotScenicSpot","SaleDepartureStat","TravelDays","DepartureDate","ProductPattern","ProductLevel","ADSuitPersons","ADNLineCharacteristic","ADNSpecialProject","ProductDistrict","SelectionOfRecommend","ProviderBrand","PriceRange","RiskSchedule","ServicesTag","PreSaleType"],showDpSearchEntry:!1,showRecommendPoiList:!0,showProUserComment:!0,sideBoxConfig:[_n,On,Cn,kn,Pn,wn,xn,Dn]},{id:en.FREE_TRAVEL,name:"\u81ea\u7531\u884c",ename:"freetravel",flag:"\u81ea\u7531\u884c",pageId:"103722",pageTab:"diy",filters:["ProductNewLine","ProductLine","PLAY_LINE_EX","HotDestination","HotScenicSpot","SaleDepartureStat","TravelDays","DepartureDate","DIYX","ProductLevel","ADSuitPersons","ADNLineCharacteristic","ADNSpecialProject","ADIsDirectFlight","ProductDistrict","SelectionOfRecommend","ProviderBrand","PriceRange"],showDpSearchEntry:!0,showRecommendPoiList:!0,showProUserComment:!1,sideBoxConfig:[Tn,In,kn,On,xn]},{id:en.DEST_FREE_TRAVEL,name:"\u76ee\u7684\u5730\u81ea\u7531\u884c",ename:"destfreetravel",flag:"\u81ea\u7531\u884c",pageId:"10320641961",pageTab:"dstdiy",filters:["ProductNewLine","ProductLine","PLAY_LINE_EX","HotDestination","HotScenicSpot","SaleDepartureStat","TravelDays","DepartureDate","DIYX","ProductLevel","ADSuitPersons","ADNLineCharacteristic","ADNSpecialProject","ADIsDirectFlight","ProductDistrict","SelectionOfRecommend","ProviderBrand","PriceRange"],showDpSearchEntry:!0,showRecommendPoiList:!0,showProUserComment:!1,sideBoxConfig:[Tn,In,kn,On,xn]},{id:en.PRIVATE_GROUP,name:"\u51fa\u53d1\u5730\u79c1\u5bb6\u56e2",ename:"personalgroup",flag:"\u79c1\u5bb6\u56e2",pageId:"10650025927",pageTab:"pgrp",filters:["ProductNewLine","ProductLine","PLAY_LINE_EX","HotDestination","HotScenicSpot","SaleDepartureStat","TravelDays","DepartureDate","ProductPattern","ProductLevel","ADSuitPersons","ADNLineCharacteristic","ADNSpecialProject","ProductDistrict","SelectionOfRecommend","ProviderBrand","PriceRange"],showDpSearchEntry:!1,showRecommendPoiList:!0,showProUserComment:!0,sideBoxConfig:[_n,On,Cn,kn,Pn,wn,xn,Dn]},{id:en.DEST_PRIVATE_GROUP,name:"\u76ee\u7684\u5730\u79c1\u5bb6\u56e2",ename:"dstprgoup",flag:"\u79c1\u5bb6\u56e2",pageId:"10650025334",pageTab:"dstpgrp",filters:["ProductNewLine","ProductLine","PLAY_LINE_EX","HotDestination","HotScenicSpot","SaleDepartureStat","TravelDays","DepartureDate","ProductPattern","ProductLevel","ADSuitPersons","ADNLineCharacteristic","ADNSpecialProject","ProductDistrict","SelectionOfRecommend","ProviderBrand","PriceRange"],showDpSearchEntry:!1,showRecommendPoiList:!0,showProUserComment:!0,sideBoxConfig:[_n,On,Cn,kn,Pn,wn,xn,Dn]},{id:en.CRUISE,name:"\u90ae\u8f6e"},{id:en.STUDY_ABROAD,name:"\u6e38\u5b66",ename:"youxue",flag:"\u6e38\u5b66",pageId:"600000437",pageTab:"stt",filters:["YouXueAge","StudyAbroadPerson","YouXueLevel","TravelDays","DepartureDate","SaleDepartureStat","ProductDistrict","ProviderBrand","PriceRange"],showDpSearchEntry:!1,showRecommendPoiList:!0,showProUserComment:!1,sideBoxConfig:[Nn,_n,On,Cn,Pn,wn,xn,Dn]},{id:en.THEME_TRAVEL,name:"\u4e3b\u9898\u6e38",ename:"themetravel",flag:"\u4e3b\u9898\u6e38",pageId:"",pageTab:"thm",filters:["themeId","areaPoi","NewDestinationNavIDs","ProductDistrict","TravelDays","DepartureDate","ProductPattern","ProviderBrand","PriceRange","ServicesTag"],showDpSearchEntry:!1,showRecommendPoiList:!1,showProUserComment:!1,sideBoxConfig:[]},{id:en.HH_TRAVEL,name:"\u9ad8\u7aef\u6e38"},{id:en.LOCAL_ACTIVITY,name:"\u5f53\u5730\u6d3b\u52a8"},{id:en.TICKET,name:"\u95e8\u7968"},{id:en.DAILY_TOUR,name:"\u4e00\u65e5\u6e38"},{id:en.VISA,name:"\u7b7e\u8bc1",ename:"visa"},{id:en.STORE,name:"\u4f9b\u5e94\u5546\u5e97\u94fa",ename:"store",flag:"\u65c5\u6e38",offlinePageId:"10650055224",bestonePageId:"10650055222",pageId:"10650055224",pageTab:"vac",filters:["ProductNewLine","ProductLine","HotDestination","HotScenicSpot","SaleDepartureStat","TravelDays","DepartureDate","ProductPattern","ProductLevel","ADSuitPersons","ADServiceCharacteristic","ADIsDirectFlight","ADHotelCharacteristic","ADNLineCharacteristic","ProductDistrict","ProviderBrand","PriceRange","ADServiceGarantee"],showDpSearchEntry:!1,showRecommendPoiList:!1,showProUserComment:!1,sideBoxConfig:[_n,On,En,Pn,wn,xn,Dn]}],An=[58,617],Ln="TradePrice",Bn="RecommendPrice",Un={ONLINE:["whole","grouptravel","around","freetravel","destfreetravel","personalgroup","dstprgoup","youxue"],OFFLINE:["whole","grouptravel","around","freetravel","destfreetravel","youxue","themetravel"],BESTONE:["whole","grouptravel","around","freetravel","destfreetravel","youxue","themetravel","vendor"]},Mn={fat:{ONLINE:"//vacations.ctrip.fat30.qa.nt.ctripcorp.com",OFFLINE:"http://booking.package.fat30.qa.nt.ctripcorp.com",BESTONE:"//tourbst.ctrip.fat30.qa.nt.ctripcorp.com"},uat:{ONLINE:"//vacations.ctrip.uat.qa.nt.ctripcorp.com",OFFLINE:"http://booking.package.uat.qa.nt.ctripcorp.com",BESTONE:"//tourbst.ctrip.uat.qa.nt.ctripcorp.com "},prod:{ONLINE:"//vacations.ctrip.com",OFFLINE:"http://booking.package.ctripcorp.com",BESTONE:"//tourbst.ctrip.com"}},Fn={fat:{ONLINE:"//vacations.ctrip.fat13.qa.nt.ctripcorp.com",OFFLINE:"http://booking.package.fat13.qa.nt.ctripcorp.com",BESTONE:"//tourbst.ctrip.fat13.qa.nt.ctripcorp.com"},uat:{ONLINE:"//vacations.ctrip.uat.qa.nt.ctripcorp.com",OFFLINE:"http://booking.package.uat.qa.nt.ctripcorp.com",BESTONE:"//tourbst.ctrip.uat.qa.nt.ctripcorp.com "},prod:{ONLINE:"//vacations.ctrip.com",OFFLINE:"http://booking.package.ctripcorp.com",BESTONE:"//tourbst.ctrip.com"}},Vn=(T()(T()(T()(T()(T()(T()({},en.WHOLE,"\u65c5\u6e38"),en.GROUP_TRAVEL,"\u8ddf\u56e2\u6e38"),en.AROUND,"\u8ddf\u56e2\u6e38"),en.FREE_TRAVEL,"\u81ea\u7531\u884c"),en.DEST_FREE_TRAVEL,"\u81ea\u7531\u884c"),en.STUDY_ABROAD,"\u6e38\u5b66"),{1:"PLANE_HOTEL",2:"GROUP_TRAVEL",8:"ACTIVITY",8192:"YOUXUE",262144:"VACATION_VIEWHOTEL"}),Hn=[{path:"d-beijing-1",title:"\u5317\u4eac\u65c5\u6e38",inChina:!0},{path:"d-shanghai-2",title:"\u4e0a\u6d77\u65c5\u6e38",inChina:!0},{path:"d-tianjin-154",title:"\u5929\u6d25\u65c5\u6e38",inChina:!0},{path:"d-chongqing-158",title:"\u91cd\u5e86\u65c5\u6e38",inChina:!0},{path:"d-heilongjiang-100055",title:"\u9ed1\u9f99\u6c5f\u65c5\u6e38",inChina:!0},{path:"d-jilin-100031",title:"\u5409\u6797\u65c5\u6e38",inChina:!0},{path:"d-liaoning-100061",title:"\u8fbd\u5b81\u65c5\u6e38",inChina:!0},{path:"d-hebei-100059",title:"\u6cb3\u5317\u65c5\u6e38",inChina:!0},{path:"d-henan-100058",title:"\u6cb3\u5357\u65c5\u6e38",inChina:!0},{path:"d-shandong-100039",title:"\u5c71\u4e1c\u65c5\u6e38",inChina:!0},{path:"d-shanxi-100056",title:"\u5c71\u897f\u65c5\u6e38",inChina:!0},{path:"d-shanxi-100057",title:"\u9655\u897f\u65c5\u6e38",inChina:!0},{path:"d-gansu-100060",title:"\u7518\u8083\u65c5\u6e38",inChina:!0},{path:"d-ningxia-100063",title:"\u5b81\u590f\u65c5\u6e38",inChina:!0},{path:"d-jiangsu-100066",title:"\u6c5f\u82cf\u65c5\u6e38",inChina:!0},{path:"d-zhejiang-100065",title:"\u6d59\u6c5f\u65c5\u6e38",inChina:!0},{path:"d-anhui-100068",title:"\u5b89\u5fbd\u65c5\u6e38",inChina:!0},{path:"d-jiangxi-100054",title:"\u6c5f\u897f\u65c5\u6e38",inChina:!0},{path:"d-fujian-100038",title:"\u798f\u5efa\u65c5\u6e38",inChina:!0},{path:"d-hubei-100067",title:"\u6e56\u5317\u65c5\u6e38",inChina:!0},{path:"d-hunan-100053",title:"\u6e56\u5357\u65c5\u6e38",inChina:!0},{path:"d-sichuan-100009",title:"\u56db\u5ddd\u65c5\u6e38",inChina:!0},{path:"d-guangdong-100051",title:"\u5e7f\u4e1c\u65c5\u6e38",inChina:!0},{path:"d-guangxi-100052",title:"\u5e7f\u897f\u65c5\u6e38",inChina:!0},{path:"d-yunnan-100007",title:"\u4e91\u5357\u65c5\u6e38",inChina:!0},{path:"d-guizhou-100064",title:"\u8d35\u5dde\u65c5\u6e38",inChina:!0},{path:"d-qinghai-100032",title:"\u9752\u6d77\u65c5\u6e38",inChina:!0},{path:"d-innermongolia-100062",title:"\u5185\u8499\u53e4\u65c5\u6e38",inChina:!0},{path:"d-xinjiang-100008",title:"\u65b0\u7586\u65c5\u6e38",inChina:!0},{path:"d-tibet-100003",title:"\u897f\u85cf\u65c5\u6e38",inChina:!0},{path:"d-hainan-100001",title:"\u6d77\u5357\u65c5\u6e38",inChina:!0},{path:"d-hongkong-38",title:"\u9999\u6e2f\u65c5\u6e38",inChina:!0},{path:"d-macau-39",title:"\u6fb3\u95e8\u65c5\u6e38",inChina:!0},{path:"d-taiwan-100076",title:"\u53f0\u6e7e\u65c5\u6e38",inChina:!0}],Gn=[{path:"d-malaysia-100022",title:"\u9a6c\u6765\u897f\u4e9a\u65c5\u6e38",inChina:!1},{path:"d-philippines-100044",title:"\u83f2\u5f8b\u5bbe\u65c5\u6e38",inChina:!1},{path:"d-srilanka-100084",title:"\u65af\u91cc\u5170\u5361\u65c5\u6e38",inChina:!1},{path:"d-vietnam-100046",title:"\u8d8a\u5357\u65c5\u6e38",inChina:!1},{path:"d-italy-100026",title:"\u610f\u5927\u5229\u65c5\u6e38",inChina:!1},{path:"d-greece-100036",title:"\u5e0c\u814a\u65c5\u6e38",inChina:!1},{path:"d-newzealand-100078",title:"\u65b0\u897f\u5170\u65c5\u6e38",inChina:!1},{path:"d-brazil-100109",title:"\u5df4\u897f\u65c5\u6e38",inChina:!1},{path:"d-germany-100025",title:"\u5fb7\u56fd\u65c5\u6e38",inChina:!1},{path:"d-argentina-100111",title:"\u963f\u6839\u5ef7\u65c5\u6e38",inChina:!1}],qn=[{path:"d-beijing-1",title:"\u5317\u4eac\u65c5\u6e38"},{path:"d-shanghai-2",title:"\u4e0a\u6d77\u65c5\u6e38"},{path:"d-hangzhou-14",title:"\u676d\u5dde\u65c5\u6e38"},{path:"d-suzhou-11",title:"\u82cf\u5dde\u65c5\u6e38"},{path:"d-chengdu-104",title:"\u6210\u90fd\u65c5\u6e38"},{path:"d-guilin-28",title:"\u6842\u6797\u65c5\u6e38"},{path:"d-chongqing-158",title:"\u91cd\u5e86\u65c5\u6e38"},{path:"d-guangzhou-152",title:"\u5e7f\u5dde\u65c5\u6e38"},{path:"d-jiuzhaigou-25",title:"\u4e5d\u5be8\u6c9f\u65c5\u6e38"},{path:"d-sanya-61",title:"\u4e09\u4e9a\u65c5\u6e38"},{path:"d-ningbo-83",title:"\u5b81\u6ce2\u65c5\u6e38"},{path:"d-lijiang-32",title:"\u4e3d\u6c5f\u65c5\u6e38"},{path:"d-huangshan-19",title:"\u9ec4\u5c71\u65c5\u6e38"},{path:"d-jiaxing-272",title:"\u5609\u5174\u65c5\u6e38"},{path:"d-quanzhou-243",title:"\u6cc9\u5dde\u65c5\u6e38"},{path:"d-shenzhen-26",title:"\u6df1\u5733\u65c5\u6e38"},{path:"d-xian-7",title:"\u897f\u5b89\u65c5\u6e38"},{path:"d-qingdao-5",title:"\u9752\u5c9b\u65c5\u6e38"},{path:"d-qinhuangdao-132",title:"\u79e6\u7687\u5c9b\u65c5\u6e38"},{path:"d-zhangjiajie-23",title:"\u5f20\u5bb6\u754c\u65c5\u6e38"},{path:"d-hongkong-38",title:"\u9999\u6e2f\u65c5\u6e38"},{path:"d-macau-39",title:"\u6fb3\u95e8\u65c5\u6e38"},{path:"d-taiwan-100076",title:"\u53f0\u6e7e\u65c5\u6e38"}],zn=[{path:"d-maldives-330",title:"\u9a6c\u5c14\u4ee3\u592b\u65c5\u6e38"},{path:"d-phuket-364",title:"\u666e\u5409\u5c9b\u65c5\u6e38"},{path:"d-bali-438",title:"\u5df4\u5398\u5c9b\u65c5\u6e38"},{path:"d-thailand-100021",title:"\u6cf0\u56fd\u65c5\u6e38"},{path:"d-japan-100041",title:"\u65e5\u672c\u65c5\u6e38"},{path:"d-unitedstates-100047",title:"\u7f8e\u56fd\u65c5\u6e38"},{path:"d-singapore-53",title:"\u65b0\u52a0\u5761\u65c5\u6e38"},{path:"d-australia-100048",title:"\u6fb3\u5927\u5229\u4e9a\u65c5\u6e38"},{path:"d-mauritius-444",title:"\u6bdb\u91cc\u6c42\u65af\u65c5\u6e38"},{path:"d-kohsamui-566",title:"\u82cf\u6885\u5c9b\u65c5\u6e38"},{path:"d-switzerland-100050",title:"\u745e\u58eb\u65c5\u6e38"},{path:"d-boracay-610",title:"\u957f\u6ee9\u5c9b\u65c5\u6e38"},{path:"d-dubai-1062",title:"\u8fea\u62dc\u65c5\u6e38"},{path:"d-chiangmai-209",title:"\u6e05\u8fc8\u65c5\u6e38"},{path:"d-cambodia-100081",title:"\u67ec\u57d4\u5be8\u65c5\u6e38"},{path:"d-unitedkingdom-20354",title:"\u82f1\u56fd\u65c5\u6e38"},{path:"d-tokyo-294",title:"\u4e1c\u4eac\u65c5\u6e38"},{path:"d-kyoto-430",title:"\u4eac\u90fd\u65c5\u6e38"},{path:"d-goldcoast-456",title:"\u9ec4\u91d1\u6d77\u5cb8\u65c5\u6e38"},{path:"d-france-100024",title:"\u6cd5\u56fd\u65c5\u6e38"},{path:"d-russia-100083",title:"\u4fc4\u7f57\u65af\u65c5\u6e38"}],Yn=T()(T()(T()({},ln,[{title:"\u70ed\u95e8\u76ee\u7684\u5730\u63a8\u8350",list:[].concat(Hn,Gn),filter:"inChina"},{title:"\u51fa\u5883\u666f\u533a\u63a8\u8350",list:zn,toggleabe:!0},{title:"\u5883\u5185\u70ed\u95e8\u63a8\u8350",list:qn,toggleabe:!0}]),sn,[{title:"\u70ed\u95e8\u76ee\u7684\u5730\u63a8\u8350",list:[].concat(Hn,Gn),filter:"inChina"},{title:"\u51fa\u5883\u65c5\u6e38\u63a8\u8350",list:zn,toggleabe:!0},{title:"\u70ed\u95e8\u65c5\u6e38\u63a8\u8350",list:[{path:"d-hainan-100001",title:"\u6d77\u5357\u65c5\u6e38"},{path:"d-xizang-100003",title:"\u897f\u85cf\u65c5\u6e38"},{path:"d-yunnan-100007",title:"\u4e91\u5357\u65c5\u6e38"},{path:"d-xinjiang-100008",title:"\u65b0\u7586\u65c5\u6e38"},{path:"d-sichuan-100009",title:"\u56db\u5ddd\u65c5\u6e38"},{path:"d-jilin-100031",title:"\u5409\u6797\u65c5\u6e38"},{path:"d-qinghai-100032",title:"\u9752\u6d77\u65c5\u6e38"},{path:"d-fujian-100038",title:"\u798f\u5efa\u65c5\u6e38"},{path:"d-shandong-100039",title:"\u5c71\u4e1c\u65c5\u6e38"},{path:"d-guangdong-100051",title:"\u5e7f\u4e1c\u65c5\u6e38"},{path:"d-guangxi-100052",title:"\u5e7f\u897f\u65c5\u6e38"},{path:"d-hunan-100053",title:"\u6e56\u5357\u65c5\u6e38"},{path:"d-jiangxi-100054",title:"\u6c5f\u897f\u65c5\u6e38"},{path:"d-heilongjiang-100055",title:"\u9ed1\u9f99\u6c5f\u65c5\u6e38"},{path:"d-shanxi-100056",title:"\u5c71\u897f\u65c5\u6e38"},{path:"d-shanxi-100057",title:"\u9655\u897f\u65c5\u6e38"},{path:"d-henan-100058",title:"\u6cb3\u5357\u65c5\u6e38"},{path:"d-hebei-100059",title:"\u6cb3\u5317\u65c5\u6e38"},{path:"d-gansu-100060",title:"\u7518\u8083\u65c5\u6e38"},{path:"d-liaoning-100061",title:"\u8fbd\u5b81\u65c5\u6e38"},{path:"d-neimenggu-100062",title:"\u5185\u8499\u53e4\u65c5\u6e38"},{path:"d-ningxia-100063",title:"\u5b81\u590f\u65c5\u6e38"},{path:"d-guizhou-100064",title:"\u8d35\u5dde\u65c5\u6e38"},{path:"d-zhejiang-100065",title:"\u6d59\u6c5f\u65c5\u6e38"},{path:"d-jiangsu-100066",title:"\u6c5f\u82cf\u65c5\u6e38"},{path:"d-hubei-100067",title:"\u6e56\u5317\u65c5\u6e38"},{path:"d-anhui-100068",title:"\u5b89\u5fbd\u65c5\u6e38"},{path:"d-taiwan-100076",title:"\u53f0\u6e7e\u65c5\u6e38"},{path:"d-hongkong-38",title:"\u9999\u6e2f\u65c5\u6e38"},{path:"d-macau-39",title:"\u6fb3\u95e8\u65c5\u6e38"}],toggleabe:!0}]),un,[{title:"\u70ed\u95e8\u533a\u57df\u65c5\u6e38",list:[{path:"r-meizhou-102",title:"\u7f8e\u6d32\u65c5\u6e38"},{path:"r-beiou-103",title:"\u5317\u6b27\u65c5\u6e38"},{path:"r-zhongou-104",title:"\u4e2d\u6b27\u65c5\u6e38"},{path:"r-dongou-105",title:"\u4e1c\u6b27\u65c5\u6e38"},{path:"r-xiou-106",title:"\u897f\u6b27\u65c5\u6e38"},{path:"r-fayirui-107",title:"\u6cd5\u610f\u745e\u65c5\u6e38"},{path:"r-dongya-108",title:"\u4e1c\u4e9a\u65c5\u6e38"},{path:"r-nanya-109",title:"\u5357\u4e9a\u65c5\u6e38"},{path:"r-dongnanya-110",title:"\u4e1c\u5357\u4e9a\u65c5\u6e38"},{path:"r-gangaotai-115",title:"\u6e2f\u6fb3\u53f0\u65c5\u6e38"},{path:"r-aoxinnantai-114",title:"\u6fb3\u65b0\u5357\u592a\u65c5\u6e38"},{path:"r-rihan-111",title:"\u65e5\u97e9\u65c5\u6e38"},{path:"r-xinmatai-112",title:"\u65b0\u9a6c\u6cf0\u65c5\u6e38"},{path:"r-dongbei-116",title:"\u4e1c\u5317\u65c5\u6e38"},{path:"r-zhongdongfei-113",title:"\u4e2d\u4e1c\u975e\u65c5\u6e38"},{path:"r-huabei-117",title:"\u534e\u5317\u65c5\u6e38"},{path:"r-huadong-118",title:"\u534e\u4e1c\u65c5\u6e38"},{path:"r-jingjinji-123",title:"\u4eac\u6d25\u5180\u65c5\u6e38"},{path:"r-huanan-119",title:"\u534e\u5357\u65c5\u6e38"},{path:"r-huazhong-120",title:"\u534e\u4e2d\u65c5\u6e38"},{path:"r-chuanyu-122",title:"\u5ddd\u6e1d\u65c5\u6e38"},{path:"r-xibei-121",title:"\u897f\u5317\u65c5\u6e38"}]},{title:"\u51fa\u5883\u666f\u533a\u63a8\u8350",list:zn,toggleabe:!0},{title:"\u5883\u5185\u70ed\u95e8\u63a8\u8350",list:qn,toggleabe:!0}]),Wn={1:en.DAILY_TOUR,2:en.CRUISE,3:en.TICKET,4:en.VISA,9:en.STUDY_ABROAD},Qn=[{aid:0,name:"\u5176\u4ed6",siteIds:[],defaultNumber:"400-810-5522",remark:"\u5176\u4ed6\u8054\u76df",formatId:600005},{aid:4897,name:"\u767e\u5ea6\u54c1\u4e13",siteIds:[155952,182042],defaultNumber:"400-828-9986",remark:"\u767e\u5ea6\u54c1\u4e13",formatId:600004},{aid:4897,name:"\u767e\u5ea6PPC",siteIds:[],defaultNumber:"400-810-5522",remark:"\u767e\u5ea6\u5176\u4ed6\u6e20\u9053",formatId:600005},{aid:5376,name:"360\u54c1\u4e13",siteIds:[153507,763079],defaultNumber:"400-828-3966",remark:"360\u54c1\u4e13",formatId:600006},{aid:5376,name:"360PPC",siteIds:[],defaultNumber:"400-810-5522",remark:"New",formatId:600005},{aid:4901,name:"\u641c\u72d7PPC",siteIds:[],defaultNumber:"400-810-5522",remark:"New",formatId:600005},{aid:4899,name:"Google",siteIds:[],defaultNumber:"400-620-2250",remark:"WS_SS_Google\u624b\u673a",formatId:600008},{aid:6864,name:"\u53bb\u54ea\u513f",siteIds:[],defaultNumber:"400-653-7920",remark:"New",formatId:600009}],Kn=n(495),Jn=n(514),Xn=["columnCount"],Zn=["id","child"],$n=["id","child"],er=["child"],tr=T()(T()(T()(T()({},Ht,Object(R.forwardRef)(rr)),Gt,Object(R.forwardRef)(ar)),qt,Object(R.forwardRef)(or)),zt,Object(R.forwardRef)(ir));function nr(e){var t=e.data,n=t.columnCount,r=Dt()(t,Xn),a=e.category,i=Object(R.useState)({visibility:"hidden",top:"0px"}),o=c()(i,2),l=o[0],s=o[1],u=Object(R.useRef)(null);Object(R.useEffect)((function(){if(u&&u.current){var e,t,n,r=document.querySelector(".channel_hot_bd"),i=r.querySelector("li[data-category='".concat(a,"']")),o=u.current,c=document.documentElement.clientHeight||document.body.clientHeight,l=r.getBoundingClientRect().top,d=i.getBoundingClientRect().top,p=o.clientHeight,f=o.style.paddingBottom;if(f)n=p+parseInt(f.substr(0,f.length-2));else n=p;var m=c-(n+l);e=(t=d-l)<0?0:t>m?Math.max(0,m):t,s({visibility:"visible",top:e+"px"})}}),[a,u]);var d=tr[n]||"div";return j.a.createElement(d,U()({},r,{boxStyle:l,ref:u}))}function rr(e,t){var n=e.boxStyle,r=e.destAreaList,a=e.pictures[0];return j.a.createElement("div",{className:"side_jmp jmp_pic",style:n,ref:t},j.a.createElement("ul",{className:"side_jmp_dest"},r.map((function(e,t){var n=e.text,r=e.child;return j.a.createElement("li",{key:t},j.a.createElement("h4",null,n),j.a.createElement("div",{className:"link_wrap"},r.map((function(e,t){return j.a.createElement(lr,U()({key:t},e))}))))}))),j.a.createElement("div",null,a&&j.a.createElement("a",{href:a.picSubjectUrl,target:"_blank"},j.a.createElement(Jn.a,{className:"jmp_img",src:a.picUrl,defaultSrc:Kn.e,alt:"",width:"100%"}))))}function ar(e,t){var n=e.boxStyle,r=e.destAreaList,a=e.pictures;return j.a.createElement("div",{className:"side_jmp jmp_pic_2",style:n,ref:t},r.map((function(e,t){e.id;var n=e.child,r=Dt()(e,Zn);return j.a.createElement("div",{className:0===t?"left_detail":"right_detail",key:t},j.a.createElement("h3",{className:"side_jmp_hd"},j.a.createElement(lr,r)),j.a.createElement(cr,{data:n}))})),a.map((function(e,t){var n=e.picSubjectUrl,r=e.picUrl,a=e.text;return j.a.createElement("a",{href:n,className:0==t?"side_img_l":"side_img_r",target:"_blank",key:t},j.a.createElement(Jn.a,{src:r,defaultSrc:Kn.e,alt:a}))})))}function ir(e,t){var n=e.boxStyle,r=e.destAreaList,a=e.pictures,i=["left_detail","middle_detail","right_detail"],o=["side_img_l","side_img_m","side_img_r"];return j.a.createElement("div",{className:"side_jmp jmp_pic_3",style:n,ref:t},r.map((function(e,t){e.id;var n=e.child,r=Dt()(e,$n);return j.a.createElement("div",{className:i[t],key:t},j.a.createElement("h3",{className:"side_jmp_hd"},j.a.createElement(lr,r)),j.a.createElement(cr,{data:n}))})),a.map((function(e,t){var n=e.picSubjectUrl,r=e.picUrl,a=e.text;return j.a.createElement("a",{href:n,className:o[t],target:"_blank",key:t},j.a.createElement(Jn.a,{src:r,defaultSrc:Kn.e,alt:a}))})))}function or(e,t){var n=e.boxStyle,r=e.destAreaList,a=Math.floor(r.length/2),i=[r.slice(0,a),r.slice(a)];return j.a.createElement("div",{className:"side_jmp jmp_nopic_2 jmp_nopic",style:n,ref:t},i.map((function(e,t){return j.a.createElement("div",{className:0===t?"left_detail":"right_detail",key:t},e.map((function(e,t){var n=e.child,r=Dt()(e,er);return j.a.createElement("dl",{className:"subdetail_list",key:t},j.a.createElement("h4",{className:"subdetail_list_hd"},j.a.createElement(lr,r)),j.a.createElement("p",{className:"subdetail_list_bd"},n.map((function(e,t){return j.a.createElement(lr,U()({key:t},e))}))))})))})))}function cr(e){var t=e.data;return j.a.createElement("div",{className:"subother_list"},t.map((function(e,t){var n=e.text,r=e.child;return[j.a.createElement(R.Fragment,{key:t},j.a.createElement("h4",{className:"subother_list_hd"},n),j.a.createElement("p",{className:"subother_list_bd"},r.map((function(e,t){return j.a.createElement(lr,U()({key:t},e))}))))]})))}function lr(e){var t=e.text,n=e.highLight,r=e.linkUrl;return j.a.createElement("a",{href:r,target:"_blank",className:n?"orange":""},t)}function sr(e){var t=e.navigationList,n=e.navigationPopList,r=Object(R.useState)(-1),a=c()(r,2),i=a[0],o=a[1],l=Object(R.useCallback)((function(e){o(e)}),[]),s=Object(R.useCallback)((function(){o(-1)}),[]),u=n?n.find((function(e){return e.category===i})):null;return j.a.createElement("dd",{onMouseLeave:s},j.a.createElement("div",{className:"channel_hot_bd"},j.a.createElement("ul",{className:"destination_list"},t.map((function(e,t){return j.a.createElement(wt,{key:t,navigation:e,curCategory:i,handleNavChange:l})}))),u&&j.a.createElement(nr,{data:u,category:i})))}function ur(e){var t=e.navigation,n=Object(L.useCtrl)().handleFetchNavigationInfo,r=Object(R.useState)(!1),a=c()(r,2),i=a[0],o=a[1],l=Object(R.useCallback)((function(){o(!1)}),[]);return j.a.createElement(A.OuterClickWrapper,{onClick:l},j.a.createElement("dl",{className:i?"channel_hot_dest city_spread":"channel_hot_dest",onClick:function(e){t||n(),o((function(e){return!e}))}},j.a.createElement("dt",null,"\u70ed\u95e8\u76ee\u7684\u5730",j.a.createElement("b",null)),i&&t&&j.a.createElement(sr,t)))}var dr=n(511),pr=n(524);function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vr=function(e){var t=e||{},n=t.isOnline,r=t.isOffline,a=t.isBestone,i=t.tabInfo,o=(void 0===i?{}:i).id;return yr(o)||br({tabId:o,isOffline:r,isBestone:a})||Er({tabId:o,isOnline:n})?hr(e):Hr({tabId:o})?hr(mr(mr({},e),{},{alwaysAppendKwd:!0})):gr(e)},hr=function(e){var t=e.search,n=e.filterList,r=e.tabInfo,a=e.nextCity,i=e.departureCity,o=e.pageNumber,c=e.sortType,l=e.location,s=e.isBestone,u=e.cleanFromDo,d=void 0===u||u,p=e.alwaysAppendKwd,f=void 0!==p&&p,m=e.isTabChanged,v=void 0!==m&&m,h=_r(n),g=t||{},y=g.type,b=g.poi,E=g.keyword,_=r||{},O=_.id,k=_.ename,C="",T=l&&l.query?l.query:{};if(y===Wt){var I=b||{},N=I.id,P=I.type,w=I.ename;if(C="/".concat(k,"/").concat(P,"-").concat(w,"-").concat(N,".html"),T.filter=h,a){var D=a.DepartureCityId,R=a.DepartureCityName,j=a.SaleCityId;T.startcity=D,T.cityname=R,T.salecity=j}}else{var A=E,L=a?a.DepartureCityId:i.cityId;C="/".concat(k,"/sc").concat(L,".html"),T.filter=h,T.sv=A,T.st=A}f?T.sv=E:y===Wt&&(delete T.sv,delete T.st),v&&(T.switched=1),T.p=o>1?o:"",c>0&&(T.s=c),c==Ii({tabId:O,isBestone:s})&&delete T.s,d&&ra(T)&&delete T.from;for(var B=Object.keys(T),U=0;U<B.length;U++){var M=B[U];T[M]||delete T[M]}return S.a.isEmpty(T)||(C+="?".concat(x.a.stringify(T))),C},gr=function(e){var t=e.search,n=e.tabInfo,r=e.departureCity,a=e.location,i=e.env,o=e.isOnline,c=e.isOffline,l=e.isBestone,s=e.isVisaMigrated,u=void 0===s||s,d=e.isThemeTravelMigrated,p=void 0===d||d,f=(n||{}).id,m=t||{},v=m.type,h=m.poi,g=m.keyword,y=r||{},b=y.saleCityId,E=y.cityName,_=(a||{}).query,O=encodeURIComponent(g);switch(f){case en.CRUISE:return"//cruise.ctrip.com/dest?query=".concat(O);case en.HH_TRAVEL:if(v==Wt){var k=h.id,C=h.type;if((C=C.toUpperCase())!=sn&&C!=ln)return"//hhtravel.ctrip.com/top/search_p/".concat(b,"-").concat(k,"?query=").concat(O)}return"//hhtravel.ctrip.com/top/search_p/".concat(b,"?query=").concat(O);case en.DAILY_TOUR:return"//huodong.ctrip.com/dailytour/search?keyword=".concat(O);case en.LOCAL_ACTIVITY:return"//huodong.ctrip.com/activity/search/?keyword=".concat(O);case en.TICKET:return"\u5468\u8fb9"!=g&&"\u5468\u8fb9\u6e38"!=g||(O=encodeURIComponent(E)),"//piao.ctrip.com/piao.html?keyword=".concat(O);case en.THEME_TRAVEL:return Or({searchType:v,poi:h,saleCityId:b,keyword:g,query:_,isOffline:c,isBestone:l,isThemeTravelMigrated:p});case en.VISA:return kr({searchType:v,poi:h,saleCityId:b,keyword:g,query:_,env:i,isOnline:o,isOffline:c,isBestone:l,isVisaMigrated:u})}},yr=function(e){return nn.includes(e)},br=function(e){var t=e.tabId,n=e.isOffline,r=e.isBestone;return en.THEME_TRAVEL==t&&(n||r)},Er=function(e){var t=e.tabId,n=e.isOnline;return Vr({tabId:t})&&n},_r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=S.a.uniqBy(e,"type");return t.map((function(e){var t=e.clientType;return e.items.filter((function(e){return e.value})).map((function(e){return t+e.value})).join("")})).join("")},Or=function(e){var t,n=e.searchType,r=e.poi,a=e.saleCityId,i=e.keyword,o=e.query,c=e.isOffline,l=e.isBestone,s={};return e.isThemeTravelMigrated||c||l&&(n==Wt?t="/mainsite/bst/".concat(r.type,"-").concat(r.ename,"-").concat(r.id,"/themetravel"):(t="/mainsite/bstthemetravel-".concat(a,"B68/"),s={searchValue:i,searchText:i})),s=mr(mr({},o),s),S.a.isEmpty(s)?t:"".concat(t,"?").concat(x.a.stringify(s))},kr=function(e){var t,n=e.searchType,r=e.poi,a=e.saleCityId,i=e.keyword,o=e.query,c=e.env,l=e.isOnline,s=e.isOffline,u=e.isBestone,d=e.isVisaMigrated,p=void 0===d||d,f={};if(c=(c||"prod").toLowerCase(),p||l){var m=ca({isOnline:l,isOffline:s,isBestone:u}),v=Fn[c][m]||"";t="".concat(v,"/visa/searchlist"),f=n==Wt?{poitype:r.type,poid:r.id}:{searchValue:i,searchText:i}}else s?(t="/vacationsoffline/search.aspx",f=mr(mr({},f={tab:"visa",startcity:a}),{},n==Wt?{type:1,poiType:(r.type||"").toUpperCase(),poid:r.id}:{type:2,searchvalue:i,searchtext:i})):u&&(n==Wt?t="/mainsite/bst/".concat(r.type,"-").concat(r.ename,"-").concat(r.id,"/visa"):(t="/mainsite/bstvisa-".concat(a,"B32/"),f={searchValue:i,searchText:i}));return delete o.sv,delete o.st,f=mr(mr({},o),f),S.a.isEmpty(f)?t:"".concat(t,"?").concat(x.a.stringify(f))};function Cr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cr(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ir=function(e){var t=e.url,n=e.isOnline,r=e.isOffline,a=e.isBestone,i=e.isThemeTravelMigrated,o=e.env;if(!t)return null;try{var c=(t=t||"").match(/^((https?:)?\/\/([^\/]+))?(\/[^\?\#]+)?(\/)?(\?)?([^\#]*)?(#[^\#]+)?$/i),l=c&&c.length>0,s=l?c[4]:"",u=l?c[7]:"";u=x.a.parse(u),u=dr.h(u)||{},s=s.replace(/^\/tour-mainsite-vacations/i,"");var d=null,p=null;if(n&&/^\/(whole-|grouptravel-|around-|freetravel-|destfreetravel-|scenichotel-|youxue-|visa-|personalgroup-|dstprgoup-|tours\/)/i.test(s))if(/^\/tours/i.test(s)){d=s.replace(/^\/tours\/(([a-zA-Z])-(\w*)-(\d+))(\/(grouptravel|around|freetravel|destfreetravel|scenichotel|youxue|visa|personalgroup|dstprgoup))?(\/(\w+))?/i,(function(e,t,n,r,a,i,o,c,l){var s=o||"whole",d=t,f=a;if("visa"===(s||"").toLowerCase())return p=x.a.stringify(Tr({poid:f},u)),"/visa/searchlist";var m=l,v=Pr(m),h=wr(m);return p=x.a.stringify(dr.c(Tr({filter:Nr(m),p:v,s:h},u))),"/list/".concat(s,"/").concat(d,".html")}))}else{d=s.replace(/^\/(whole|grouptravel|around|freetravel|destfreetravel|scenichotel|youxue|visa|personalgroup|dstprgoup)-(\d+)?b\d+(\w+)?/i,(function(e,t,n,r){var a=t;if("visa"===(a||"").toLowerCase())return p=x.a.stringify(u),"/visa/searchlist";var i=n||"",o=r||"",c=Pr(o),l=wr(o),s=u,d=s.searchvalue,f=s.searchtext;return delete u.searchvalue,delete u.searchtext,p=x.a.stringify(dr.c(Tr({filter:Nr(o),p:c,s:l,sv:d,st:f},u))),"/list/".concat(a,"/sc").concat(i,".html")}))}else if(r&&/^\/vacationsoffline\/search\.aspx/i.test(s)){var f=u,m=f.tab,v=f.startcity,h=f.type,g=f.searchvalue,y=f.searchtext,b=f.poid,E=f.poitype,_=f.param;if("visa"===(m||"").toLowerCase())d="/visa/searchlist",p=x.a.stringify(u);else if(1==h){var O=Pr(_),k=wr(_);delete u.tab,delete u.param,delete u.poitype,delete u.poid,d="/list/".concat(m,"/").concat(E,"-").concat("","-").concat(b,".html"),p=x.a.stringify(dr.c(Tr({filter:Nr(_),p:O,s:k},u)))}else{var C=Pr(_),T=wr(_);delete u.tab,delete u.param,delete u.searchvalue,delete u.searchtext,d="/list/".concat(m,"/sc").concat(v,".html"),p=x.a.stringify(dr.c(Tr({filter:Nr(_),p:C,s:T,sv:g,st:y},u)))}}else if(a&&/^\/mainsite\/bst/i.test(s))if(/^\/mainsite\/bst\//i.test(s)){d=s.replace(/^\/mainsite\/bst\/(([a-zA-Z])-(\w*)-(\d+))(\/(grouptravel|around|freetravel|destfreetravel|scenichotel|youxue|themetravel|visa))?(\/(\w+))?/i,(function(e,t,n,r,c,l,s,d,f){var m=s||"whole",v=t,h=c;if("visa"===(m||"").toLowerCase()){var g=Dr({env:o,isBestone:a,isVisa:!0});return p=x.a.stringify(Tr({poid:h},u)),g+"/visa/searchlist"}if("themetravel"===(m||"").toLowerCase()&&!i)return p=x.a.stringify(u),e;var y=f,b=Pr(y),E=wr(y);return p=x.a.stringify(dr.c(Tr({filter:Nr(y),p:b,s:E,bst:a?"1":""},u))),"/list/".concat(m,"/").concat(v,".html")}))}else{d=s.replace(/^\/mainsite\/bst(whole|grouptravel|around|freetravel|destfreetravel|scenichotel|youxue|themetravel|visa)-(\d+)?b\d+(\w+)?/i,(function(e,t,n,r){var c=t;if("visa"===(c||"").toLowerCase()){var l=Dr({env:o,isBestone:a,isVisa:!0});return p=x.a.stringify(u),l+"/visa/searchlist"}if("themetravel"===(c||"").toLowerCase()&&!i)return p=x.a.stringify(u),e;var s=n||"",d=r||"",f=Pr(d),m=wr(d),v=xr(d),h=u,g=h.searchvalue,y=h.searchtext;return delete u.searchvalue,delete u.searchtext,p=x.a.stringify(dr.c(Tr({filter:Nr(d),p:f,s:m,sv:g,st:y,bst:a?"1":"",bstvd:v?"1":""},u))),"/list/".concat(c,"/sc").concat(s,".html")}))}return d||p?p?"".concat(d,"?").concat(p):"".concat(d):null}catch(I){}return null},Sr=function(e,t){var n=null;n=e.isServer?e&&e.req?e.req.originalUrl:null:window.location.href;var r=e||{},a=r.isOnline,i=r.isOffline,o=r.isBestone,c=r.env,l=(t||{}).isThemeTravelMigrated;return Ir({url:n,isOnline:a,isOffline:i,isBestone:o,isThemeTravelMigrated:l,env:c})},Nr=function(e){return(e||"").replace(/(kwdtp1)|(p\d+)|(s\d+)/gi,"")},Pr=function(e){var t=(e||"").match(/p(\d+)/i);return t&&t.length>1?t[1]:""},wr=function(e){var t=(e||"").match(/s(\d+)/i);return t&&t.length>1?t[1]:""},xr=function(e){var t=(e||"").match(/(kwdtp1)/i);return t&&t.length>1?t[1]:""},Dr=function(e){var t=e.env,n=e.isBestone,r=e.isVisa;t=(t||"prod").toLowerCase();return n&&r?{fat:"//tourbst.ctrip.fat13.qa.nt.ctripcorp.com",uat:"//tourbst.ctrip.uat.qa.nt.ctripcorp.com ",prod:"//tourbst.ctrip.com"}[t]:""},Rr=function(e,t,n){var r=n.isOnline,a=n.isOffline,i=n.isBestone,o=(n.env,n.search),c=n.departureCity,l=(n.query,n.isVisaMigrated,e[Kn.wb]),s=Wn[l],u=S.a.find(t,(function(e){return e&&e.type==s&&e.count>0}));if(+l>0&&void 0!==s&&u&&u.url){var d=(S.a.find(jn,(function(e){return e&&e.id==s}))||{}).ename,p=yr(s),f=p?Ir({url:u.url,isOnline:r,isOffline:a,isBestone:i}):u.url,m=en.STUDY_ABROAD==s,v=(i?[en.CRUISE,en.DING_ZHI,en.HH_TRAVEL,en.LOCAL_ACTIVITY,en.TICKET,en.DAILY_TOUR]:[]).some((function(e){return e==s}));if(i){var h=(o||{}).keyword,g=(c||{}).cityId;if(!m)return null;f="/list/youxue/sc".concat(g,".html?sv=").concat(encodeURIComponent(h))}return{ename:d,url:f,isVacationBu:p,isNoneResultTab:v}}return null},jr=function(e){return e==en.WHOLE},Ar=function(e){return e==en.GROUP_TRAVEL},Lr=function(e){return e==en.SCENIC_HOTEL},Br=function(e){return e==en.STUDY_ABROAD},Ur=function(e){return e==en.THEME_TRAVEL},Mr=function(e){return Ar(e)||function(e){return e==en.AROUND}(e)},Fr=function(e){return function(e){return e==en.FREE_TRAVEL}(e)||function(e){return e==en.DEST_FREE_TRAVEL}(e)},Vr=function(e){var t=e.tabId,n=e.tabEname;return function(e,t){return e==en.PRIVATE_GROUP||"personalgroup"==(t||"").toLowerCase()}(t,n)||function(e,t){return e==en.DEST_PRIVATE_GROUP||"dstprgoup"==(t||"").toLowerCase()}(t,n)},Hr=function(e){var t=e.tabId,n=e.tabEname;return t==en.STORE||"store"==(n||"").toLowerCase()},Gr=function(e){return e?(S.a.find(jn,(function(t){return t&&t.id==e}))||{}).sideBoxConfig:null},qr=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.isOnline;n=(n||"").toUpperCase();var i=!1;if(e){var o=S.a.find(jn,(function(t){return t&&t.id==e}));i=!!o&&o.showRecommendPoiList}return a&&i&&t==Wt&&(n==ln||n==sn)},zr=function(e,t){return-1!==(Gr(e)||[]).indexOf(t)},Yr=function(e){return e.isOnline},Wr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isOnline,r=e||{},a=r.districtType;return Yr({isOnline:n})&&!S.a.isEmpty(e)&&(a||"").toUpperCase()!==mn},Qr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isOnline;return Yr({isOnline:n})&&zr(e,wn)},Kr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isOnline;return Yr({isOnline:n})&&zr(e,xn)},Jr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isOnline;return Yr({isOnline:n})&&zr(e,Dn)},Xr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isOnline;return t=(t||"").toUpperCase(),r&&e==Wt&&(t==ln||t==sn||t==un)},Zr=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isOnline;return t=(t||"").toUpperCase(),r&&e==Wt&&(t==ln||t==sn)},$r=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isOnline;return Xr(e,t,{isOnline:r})},ea=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isOffline;return!t},ta=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0==e?t:"string"===typeof e?"TRUE"===(e=(e||"").toUpperCase())||"T"===e||"YES"===e||"Y"===e:!0===e},na=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return null==e||null==t?n:(e=(e||"").toLowerCase())===(t=(t||"").toLowerCase())},ra=function(e){var t=(e||{}).from,n=S.a.isArray(t),r=S.a.isString(t);return n&&(t=S.a.map(t,(function(e){return String(e).toLowerCase()}))),e&&(r&&na(t,"do")||n&&-1!==t.indexOf("do"))},aa=function(e,t){return!e&&t},ia=function(e,t){return!e&&t&&t.length},oa=function(e){var t=e.isOnline,n=(e.tabId,e.tabEname,t?en.WHOLE:en.GROUP_TRAVEL),r=jn[0];return S.a.find(jn,(function(e){return e&&e.id==n}))||r},ca=function(e){var t=e.isOnline,n=e.isOffline,r=e.isBestone;return t?"ONLINE":n?"OFFLINE":r?"BESTONE":""},la=function(e){return"SS"===(e+"").toUpperCase()&&(e="S"),e=(e||ln).toUpperCase(),fn[e]};function sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sa(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var da=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isOnline,a=n.isOffline,i=n.isBestone,o=e||{},c=o.navigationList,l=void 0===c?[]:c,s=o.navigationPopList,u=void 0===s?[]:s;u=u||[];var d=[],p=function(e){var t=Ir({url:e.linkUrl,isOnline:r,isOffline:a,isBestone:i}),n=Ir({url:e.picSubjectUrl,isOnline:r,isOffline:a,isBestone:i}),o=e&&e.linkUrl,c=e&&e.picSubjectUrl;return ua(ua(ua({},e),o?{_linkUrl:e.linkUrl,linkUrl:t||e.linkUrl}:null),c?{_picSubjectUrl:e.picSubjectUrl,picSubjectUrl:n||e.picSubjectUrl}:null)},f=function(e){return S.a.map(e,p)};return l=S.a.map(l,(function(e){return ua(ua({},e),{},{destList:f(e.destList),hotList:f(e.hotList)})})),(u=S.a.map(u,(function(e){return ua(ua({},e),{},{destAreaList:S.a.map(e.destAreaList,(function(e){return ua(ua({},p(e)),{},{child:S.a.map(e.child,(function(e){var t=e&&e.child;return ua(ua({},p(e)),t?{child:f(e.child)}:null)}))})}))})}))).forEach((function(e){var t,n=e||{},r=n.category,a=n.destAreaList,i=[];a&&a.length&&(t=a[0].child&&a[0].child[0]&&a[0].child[0].child?3===a.length?zt:Gt:a.length>12?qt:Ht,a.forEach((function(e){var t=e||{},n=t.picSubjectUrl,r=t.picUrl;n&&r&&i.push({picSubjectUrl:n,picUrl:r})})),d.push({destAreaList:a,category:r,columnCount:t,pictures:i}))})),{navigationList:l.sort((function(e,t){return e.sort-t.sort})).map((function(e){var n=e.category,r=e.destList;return 2==n?ua(ua({},e),{},{destList:r.map((function(e){var n=e.id,r=e.text;return 2==n?ua(ua({},e),{},{text:"".concat(t).concat(r)}):e}))}):e})),navigationPopList:d}},pa=function(e){var t,n=e||{},r=n.name,a=n.ename,i=n.id,o=n.dataType,c=n.districtType,l=n.parentName,s=n.parentPath,u=n.parentID,d=n.inChina;if(e&&o&&o.toUpperCase()==ln){var p=s.split(","),f=p.length;f>1&&(t=p.slice(0,f-1).filter((function(e){return 11e4!=e})).map((function(e){return{id:e}})))}return{id:i,name:r,parentName:l,type:(o||"").toLowerCase()[0],ename:(a||"").replace(/[^A-Za-z0-9]/g,"").toLowerCase(),districtType:(c||"").toUpperCase(),inChina:d,parentID:u,path:t}},fa=function(e){return(e=e.toUpperCase())==sn?"SS":e},ma=function(e){var t=null===e||void 0===e?void 0:e.filter((function(e){return"PRESALE_STATUS"!=(null===e||void 0===e?void 0:e.type)}));return S.a.map(t,(function(e){var t=e||{},n=t.type,r=t.items,a=r||[];return za(e)&&(a=S.a.reduce(r||[],(function(e,t){return S.a.concat(e,t.items||[])}),[])),{type:n,items:a.map((function(e){var t=e||{};return{type:t.type,name:t.name}}))}}))},va=function(e,t){return t=t||[],null===e||void 0===e?void 0:e.map((function(e){var n=e.type,r=e.items,a=t.find((function(e){return e.type==n})),i=a&&a.items?a.items:[];return ua(ua({},e),{},{items:r.map((function(e){if(null!==e&&void 0!==e&&e.name&&null!==e&&void 0!==e&&e.value)return e;var t=i.find((function(t){return t.type==e}));return{name:t?t.name:e,value:e}}))})}))},ha=function(e,t){var n=(e||{}).id,r=yr(n);if(!S.a.isEmpty(e)){var a=(S.a.find(t,(function(e){return e&&e.type==n}))||{}).name;e=ua(ua(ua({},e),a?{name:a}:null),{},{isVacationBu:r})}return e},ga=function(e){return null===e||void 0===e?void 0:e.map((function(e){var t=(null===e||void 0===e?void 0:e.extras)||{};return ua(ua({},e),{},{url:(null===e||void 0===e?void 0:e.url)||(null===t||void 0===t?void 0:t.url)||""})}))},ya=function(e,t,n,r){var a=Object.values(Kn.s).find((function(t){return t.server==e}));return!!a&&(!(!r||!Mr(n)||e!==Kn.E)||("\u9a6c\u5c14\u4ee3\u592b"==t&&e===Kn.p||Boolean(a.isExposed)))},ba=function(e){var t=e.isOffline,n=e.isBestone,r=e.filters,a=e.tabId,i=r=r||[];return t||(i=i.filter((function(e){return"RiskSchedule"!==e&&"PreSaleType"!==e}))),n||(i=i.filter((function(e){return"1_2Tags"!==e}))),n&&Ur(a)&&(i=i.filter((function(e){return"areaPoi"!==e}))),t&&Ur(a)&&(i=i.filter((function(e){return"ProductPattern"!==e&&"ServicesTag"!==e}))),n||i.push("PRESALE_STATUS"),i.join()},Ea=function(e,t,n,r,a){var o;t=t||[],e=e||[];var l=n||{},s=l.filters,u=l.id;return e=function(e){var t=S.a.find(e,qa),n=S.a.find(e,za),r=S.a.filter(e,(function(e){var n=Ya(e),r=t?Ga(e):qa(e);return!n&&!r}));if(n){var a=n.items,i=S.a.reduce(a,(function(e,t){return S.a.concat(e,t.items)}),[]);S.a.forEach(r,(function(e){za(e)&&(e.items=i,e.layerItems=a)}))}return r}(e=S.a.uniqBy(e,"type")),s=function(e){var t=e.filterList,n=e.tabId,r=e.isBestone;if(jr(n)||Mr(n)||Fr(n)||Vr({tabId:n})){var a=Mr(n)&&r,o=(t=t.filter((function(e){return!["ProductNewLine","NewLine","NewTag","NewDest","NewTheme"].includes(e)}))).findIndex((function(e){return e===Kn.r})),c=t.findIndex((function(e){return e===Kn.x})),l=t.findIndex((function(e){return e===Kn.I}));a?((t=i()(Rn)).splice(c,0,"NewLine","NewTag","NewDest"),t.splice(l,0,"NewTheme")):(t.splice(o,0,"NewLine","NewTag","NewDest"),t.splice(l,0,"NewTheme"))}return t}({filterList:s,tabId:u,isBestone:a}),null===(o=e=e.filter((function(e){var n,r=e.type,a=e.items,i=Ha(e)&&(t.find(Ha)||t.find(ri)),o=Za(e)||!t.find((function(e){return e.type==r})),c=(null===(n=s)||void 0===n?void 0:n.includes(r))&&(null===a||void 0===a?void 0:a.length)>0&&"PRESALE_STATUS"!=r;return o&&c&&!i})).map((function(e){var t=e.type,n=e.items,r=e.layerItems;n=n||[];for(var a={},i=function(){var i=c()(l[o],2),s=i[0],u=i[1],d=u.server,p=u.describe;if(d==t)return a.clientType=s,a.name=p,a.items=n.filter((function(e){return e.name})).filter((function(t,n){return Ja(e)?0==n:t})).map((function(t){var n;return Qa(e)&&(t.type="1"),Ka(e)&&(t.name=p),ua(ua({},t),{},{value:t.type,moreText:t.value,type:d,serverType:d,clientType:s,percent:t.percent||Number((null===t||void 0===t||null===(n=t.extras)||void 0===n?void 0:n.PERCENT)||"")||0})})),r&&(a.layerItems=r.map((function(e){return ua(ua({},e),{},{value:e.type,moreText:e.value,type:d,serverType:d,clientType:s,items:(e.items||[]).map((function(e){var t;return ua(ua({},e),{},{value:e.type,moreText:e.value,type:d,serverType:d,clientType:s,percent:e.percent||Number((null===e||void 0===e||null===(t=e.extras)||void 0===t?void 0:t.PERCENT)||"")||0})}))})}))),1},o=0,l=Object.entries(Kn.s);o<l.length&&!i();o++);return ua(ua({},e),a)})).sort((function(e,t){var n=function(e){var t=e.filterList,n=e.keyword,r=(e.tabId,e.isBestone,i()(t));try{if("\u9a6c\u5c14\u4ee3\u592b"==n){var a=r.findIndex((function(e){return e===Kn.r})),o=r.findIndex((function(e){return e===Kn.p}));-1!=a&&-1!=o&&o>a&&(r.splice(o,1),r.splice(a+1,0,Kn.p))}}catch(c){r=i()(t)}finally{return r}}({filterList:s,keyword:r,tabId:u,isBestone:a});return n.indexOf(e.type)-n.indexOf(t.type)})))||void 0===o?void 0:o.filter((function(e){return(!(jr(u)||Mr(u)||Fr(u)||Vr({tabId:u}))||"NewLine"!=(null===e||void 0===e?void 0:e.type))&&((!(jr(u)||Mr(u)||Fr(u)||Vr({tabId:u}))||"HotDestination"!=(null===e||void 0===e?void 0:e.type))&&((!(jr(u)||Mr(u)||Fr(u)||Vr({tabId:u})||Br(u))||"ProductDistrict"!=(null===e||void 0===e?void 0:e.type))&&(!Fr(u)||"HotScenicSpot"!=(null===e||void 0===e?void 0:e.type))))}))},_a=function(e,t){var n=t.isOnline,r=t.isOffline,a=t.isBestone,i=(t.currentTabInfo.id,t.search),o=void 0===i?{}:i,c=o.type,l=o.keyword;e=(e||[]).filter((function(e){return e.count})).map((function(e){return ua(ua({},e),"T126"===e.type?{type:"68"}:null)})).map((function(e){var t=e.type,n=jn.find((function(e){return e.id==t}));return t==en.WHOLE&&c==Wt?ua(ua(ua({},n),e),{},{name:"".concat(l,"\u65c5\u6e38")}):ua(ua({},n),e)}));var s=[],u=[];return n?(s=an,u=rn):r?s=on:a&&(s=cn),{left:e.filter((function(e){return s.includes(+e.type)})),right:e.filter((function(e){return u.includes(+e.type)}))}},Oa=function(e){return S.a.map(e,(function(e){var t=function(e){var t=(e||{}).hightLightItems,n=S.a.find(t,(function(e){return e&&"HIGHTLIGHT_NAME"===e.key}));try{n=n&&n.value?JSON.parse(n.value):null}catch(r){n=null}return n}(e);return ua(ua({},e),{},{highlightText:t})}))},ka=function(e,t,n){return S.a.map(e,(function(e){var r=e||{},a=(r.id,r.basicInfo),o=r.tagGroups,c=r.preSaleInfo,l=(a||{}).extras,s=(null===o||void 0===o?void 0:o.find((function(e){return"PRODUCT_TAG"==e.groupCode})))||{},u=(null===s||void 0===s?void 0:s.tags)||[],d=null===u||void 0===u?void 0:u.filter((function(e){return Kn.Bb.includes(e.tagFlag)})),p=null===u||void 0===u?void 0:u.find((function(e){return e.tagFlag==Kn.Ab})),f=(null===p||void 0===p?void 0:p.tagName)||"",m=null===u||void 0===u?void 0:u.find((function(e){return e.tagFlag==Kn.T})),v=!t&&!!m,h=!!(null===u||void 0===u?void 0:u.find((function(e){return e.tagFlag==Kn.N}))),g=(null===o||void 0===o?void 0:o.find((function(e){return"RISK_SCHEDULE_TAG"==e.groupCode})))||{},y=(null===g||void 0===g?void 0:g.tags)||[],b=null===y||void 0===y?void 0:y.map((function(e){return e.tagName})).join("\u3001"),E=(null===o||void 0===o?void 0:o.find((function(e){return"PRE_SALE_TYPE_TAG"==e.groupCode})))||{},_=(null===E||void 0===E?void 0:E.tags)||[],O=[].concat(i()(Kn.Bb),[Kn.Ab,Kn.T,Kn.N]),k=null===u||void 0===u?void 0:u.filter((function(e){return!O.includes(e.tagFlag)})),C=null===k||void 0===k?void 0:k.filter((function(e){return 30==e.tagType})),T=null===k||void 0===k?void 0:k.filter((function(e){return 40==e.tagType})),I=null===l||void 0===l?void 0:l.TARGET_IMG_ID;I=+I>0?+I:0;var S="true"===(null===l||void 0===l?void 0:l.IS_NEW_PRODUCT),N=null===l||void 0===l?void 0:l.IS_PACKAGE;N="true"===N;var P=null===l||void 0===l?void 0:l.PRODUCT_PATTERN,w=null===l||void 0===l?void 0:l.SALE_MODE,x="2"===P&&"S"===w,D="2"===P&&"P"===w,R=null===l||void 0===l?void 0:l.supportWishOrder;R=ta(R);var j=null===l||void 0===l?void 0:l.supportTelConsulting;j=ta(j);var A=null===l||void 0===l?void 0:l.supportTelBooking;A=ta(A);var L=Ci({basicInfo:a,preSaleInfo:c,isBestone:t});return ua(ua({},e),{},{youxue:d,vehicle:f,isOptimal:v,isGoldShop:h,riskScheduleReminder:b,tags:{marketing:C,normal:T,presale:_},imageId:I,isNewProduct:S,isPackage:N,isCtripDiy:x,isProxyDiy:D,saleMode:w,recommendation:0,supportWishOrder:R,supportTelConsulting:j,supportTelBooking:A,formatPreSaleInfo:L,isLoaded:!0,needTailoring:n})}))},Ca=function(e,t){var n=[];try{n=[].concat(i()(t),i()(e)).slice(0,5).map((function(e){var t,n=((e||{}).basicInfo||{}).mediaInfo,r=null===n||void 0===n||null===(t=n.images)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.url;return dr.o(r)}))}catch(r){n=[]}finally{return n}},Ta=function(e,t,n){var r=n.currentTabInfo,a=n.pageNumber,i=n.isOnline,o=n.variables,c=(r||{}).id;return 1==a&&i&&function(e){return Mr(e)||Fr(e)||Vr({tabId:e})||Br(e)}(c)&&"true"!=(null===o||void 0===o?void 0:o["VIP-USER"])&&"true"==(null===o||void 0===o?void 0:o.ENABLE_AD_DEDUPLICATION)?null===e||void 0===e?void 0:e.filter((function(e){return!(null!==t&&void 0!==t&&t.some((function(t){return(null===t||void 0===t?void 0:t.id)==(null===e||void 0===e?void 0:e.id)})))})):e},Ia=function(e,t){return S.a.map(e,(function(e){var n=!!S.a.find(t,(function(t){return t&&e&&t.ProductID==e.id}));return ua(ua({},e),{},{isFavorited:n})}))},Sa=function(e){return(e=e||[]).map((function(e){var t=e||{},n=t.commentTime,r=t.replies;return ua(ua({},e),{},{commentTime:dr.d(n,dr.a),replies:r?r.map((function(e){var t=(e||{}).replyTime;return ua(ua({},e),{},{replyTime:dr.d(t,dr.a)})})):null})}))},Na=function(e){var t=e[Kn.nb],n=e[Kn.hb],r=e[Kn.ob],a=e[Kn.ib],i=e[Kn.xb],o=e[Kn.sb],c=e[Kn.tb],l=e[Kn.pb],s=e[Kn.lb];return{locale:r||"",bizLine:a||"",analysisType:n||"",termTypes:i?JSON.parse(i):[],keywordAttribute:t?JSON.parse(t):[],residentPlaceId:o||"",residentPlaceName:c||"",personalRecommend:l||"",intentionOrderSource:s||""}},Pa=function(e){return e[Kn.vb]||""},wa=function(e){return e[Kn.rb]||""},xa=function(e){return e[Kn.yb]||""},Da=function(e){return e[Kn.mb]||""},Ra=function(e){return Number(e[Kn.qb])||0},ja=function(e){return"true"===e[Kn.jb]},Aa=function(e){return"true"===e[Kn.zb]},La=function(e){var t=e.type;return[Kn.o,Kn.w,Kn.D].includes(t)},Ba=function(e){var t=e.type;return[Kn.F,Kn.J,Kn.H,Kn.z].includes(t)},Ua=function(e){var t=e.type;return[Kn.w,Kn.D,Kn.F,Kn.o,Kn.y].includes(t)},Ma=function(e){return e.type===Kn.A},Fa=function(e){return e.type==Kn.q},Va=function(e){return e.type==Kn.t},Ha=function(e){var t=e.type;return[Kn.q,Kn.t].includes(t)},Ga=function(e){return e.type==Kn.r},qa=function(e){return e.type==Kn.u},za=function(e){return e.type==Kn.v},Ya=function(e){return e.type==Kn.C},Wa=function(e){var t=e.type;return!La({type:t})&&!Ba({type:t})&&!Ma({type:t})},Qa=function(e){var t=e.type;return La({type:t})},Ka=function(e){var t=e.type;return La({type:t})||t==Kn.F},Ja=function(e){var t=e.type;return La({type:t})||t==Kn.F},Xa=function(e){var t=e.type;return!ti({type:t})},Za=function(e){var t=e.type;return La({type:t})||Ba({type:t})},$a=function(e){return e.type==Kn.K},ei=function(e){return e.type==Kn.G},ti=function(e){var t=e.type;return[Kn.m,Kn.l,Kn.i,Kn.j].includes(t)},ni=function(e){var t=e.type;return![Kn.m,Kn.l,Kn.i,Kn.j].includes(t)},ri=function(e){var t=e.type;return[Kn.i,Kn.j].includes(t)},ai=function(e){return e.type==Kn.m},ii=function(e){return e.type==Kn.l},oi=function(e){return e.type==Kn.i},ci=function(e){return e.type==Kn.j},li=function(e,t){if("price"==t){var n=c()(e,2),r=n[0],a=n[1];if(r&&a)return"".concat(r,"-").concat(a,"\u5143");if(r&&!a)return"".concat(r,"\u5143\u4ee5\u4e0a");if(!r&&a)return"".concat(a,"\u5143\u4ee5\u4e0b")}if("date"==t){var i=c()(e,2),o=i[0],l=i[1];if(o&&l)return"".concat(o,"~").concat(l);if(o&&!l)return"".concat(o,"\u4ee5\u540e");if(!o&&l)return"".concat(l,"\u4e4b\u524d")}},si=function(e){for(var t=[],n=ui(e),r=n.normalEntire,a=ua(ua({},n.extraEntire),r),i=0,o=Object.entries(a);i<o.length;i++){var l=c()(o[i],2),s=l[0],u=l[1],d=u.items,p=u.clientType,f=u.describe;t.push({type:s,clientType:p,describe:f,items:d})}return t},ui=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={normalEntire:{},normal:[],extraEntire:{},extra:{}},n={filterFull:/([a-zA-Z_]+)([\d\-]+)/gi,filterKey:/([a-zA-Z_]+)/gi,filterValue:/([\d\-]+)/gi},r=e.match(n.filterFull);if(!e||!r||!r.length)return t;for(var a in r.forEach((function(e){var r=e.match(n.filterKey)[0],a=e.match(n.filterValue)[0];if(Object.keys(Kn.k).includes(r)){var i=Number(a);if(!isNaN(i)){var o=Kn.k[r],c=o.server,l=o.describe;t.extra[c]=i,t.extraEntire[c]={clientType:r,describe:l,items:[i]}}}else if(Object.keys(Kn.h).includes(r)){var s=dr.n(a);if(s){var u=Kn.h[r],d=u.server,p=u.describe;t.extra[d]=s,t.extraEntire[d]={clientType:r,describe:p,items:[s]}}}else if(Object.keys(Kn.s).includes(r)){var f=Kn.s[r],m=f.server,v=f.describe;t.normalEntire[m]=t.normalEntire[m]||{clientType:r,describe:v,items:[]},t.normalEntire[m].items.push(a)}})),t.normalEntire){var i=t.normalEntire[a].items.join();t.normal.push({type:"FILTERED",key:a,value:i})}return t},di=function(e){var t=e||{},n=t.hasNextPage,r=t.historyInfos;return{hasNextPage:n,historyInfos:pi(r)}},pi=function(e){return S.a.filter(e,(function(e){return e&&e.productId>0&&e.price>=0}))},fi=function(e){var t=(e||{}).orderInfoList;return{orderInfoList:t=S.a.map(t,(function(e){var t=e||{},n=t.uid,r=t.orderDate,a=t.startCity,i=t.destCity,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;if(!e)return"\u533f\u540d";var r=S.a.repeat(t,n);return e.length<=n?e.replace(/^(.)/,"$1".concat(r)):e.substring(0,2)+r+e.slice(-2)}(n),c=dr.m();return r=dr.d(r),{maskedUid:o,orderSecondsAgo:Math.abs(P.a.differenceInSeconds(c,r))||0,startCity:a,destCity:i}}))}},mi=function(e,t){return S.a.map(e,(function(e){var n=(t||{}).poiQuery,r=S.a.find(n,(function(t){return t&&t.name==e.destCityName})),a=r||{},i=a.dataType,o=a.id,c=function(e){var t=e||{},n=t.ename,r=t.pinyin,a=n;return a||(a=r),a||(a="travel"),Object(pr.j)(a).toLowerCase()}(r),l=i&&c&&o>0;i=(i||"").toLowerCase();var s=l?"/list/whole/".concat(i,"-").concat(c,"-").concat(o,".html"):"";return l?ua(ua({},e),{},{destPoiType:i,destPoiEname:c,destPoiId:o,destUrl:s}):e}))},vi=function(e){var t,n=(e||{}).basicInfo||{},r=n.departures,a=n.extras,i=(null===a||void 0===a||a.TYPE,"true"===(null===a||void 0===a?void 0:a.IS_HONGKONG)),o="",c="",l="";return null!==r&&void 0!==r&&r.length&&null!==(t=r[0])&&void 0!==t&&t.name&&(o=r[0].name),o&&(c=i?"".concat(o,"/\u9999\u6e2f"):o,l="".concat(c,"\u51fa\u53d1")),c||l?{cityValue:c,cityText:l}:null},hi=function(e,t){var n=((e||{}).bestoneInfo||{}).distributionChannel;return n||dr.e(t)},gi=function(e){var t=!1;try{var n=e||{},r=n.statusInfo,a=n.extras,i=null===a||void 0===a?void 0:a.EXPIRE_DATE,o=i?Number(i):0,c=((new Date).getTime(),null===r||void 0===r?void 0:r.isActive);null===r||void 0===r||r.isOnline;t=!!c}catch(l){t=!1}finally{return t}},yi=function(e,t){var n,r=t.isOnline,a=t.isOffline,i=t.isBestone,o=t.env,c=t.attachInfo,l=e||{},s=l.basicInfo,u=l.id,d=s||{},p=d.departures,f=d.extras,m=(c||{}).preSaleId,v=m||u,h=(null===p||void 0===p||null===(n=p[0])||void 0===n?void 0:n.id)||(null===f||void 0===f?void 0:f.departureCityId)||0;return _i(v,{cityId:h,isOnline:r,isOffline:a,isBestone:i,env:o})},bi=function(e,t){var n,r=t.isOnline,a=t.isOffline,i=t.isBestone,o=t.env,c=e||{},l=c.id,s=c.basicInfo,u=s.departures,d=s.extras,p=c.productType,f=c.tagGroups,m=(null===f||void 0===f?void 0:f.find((function(e){return"SCHEDULE_TAG"==e.groupCode})))||{},v=(null===m||void 0===m?void 0:m.tags)||[],h=null!==v&&void 0!==v&&v.length?null===v||void 0===v||null===(n=v[0])||void 0===n?void 0:n.tagName:"",g="0001-01-01"==h?"":h,y=null!==u&&void 0!==u&&u.length?null===u||void 0===u?void 0:u[0].id:0,b="CRUISE_PACKAGE"==p?l:(null===d||void 0===d?void 0:d.voyaId)||0;if("CRUISE_PACKAGE"==p)return _i(b,{cityId:y,isOnline:r,isOffline:a,isBestone:i,env:o});var E=y>0?"&departurecityid=".concat(y):"";return"https://cruise.ctrip.com/newpackage/c/".concat(b,".html?departure=").concat(g).concat(E)},Ei=function(e,t,n){var r=n.isOnline,a=n.isOffline,i=n.isBestone,o=n.env,c=e||{},l=c.id,s=c.ruleId,u=c.stayRules,d=S.a.find(t,$a),p=(d||{}).items;if(d&&p&&p.length){var f=S.a.map(u,(function(e){return String(e.ruleId)})),m=S.a.map(p,(function(e){return e.value})),v=S.a.intersection(f,m);v&&v.length&&(s=v[0])}if(!s){var h=u&&u.length?u[0]:null;h&&h.ruleId&&(s=h.ruleId)}return _i(l,{ruleId:s,isOnline:r,isOffline:a,isBestone:i,env:o})},_i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.cityId,r=(t.ruleId,t.isOnline),a=t.isOffline,i=t.isBestone,o=t.env,c=ca({isOnline:r,isOffline:a,isBestone:i});o=(o||"prod").toLowerCase();var l=Mn[o][c]||"//vacations.ctrip.com",s="";return+n>0&&(s+="?city=".concat(n)),"".concat(l,"/travel/detail/p").concat(e).concat(s)},Oi=function(e){var t=e.isOffline,n=e.isBestone;return t?"VacationsOffline":n?"NBestoneSearch":"NVacationSearchV2"},ki=function(e){return 2==e?"grp":1==e||-4==e?"diy":2048==e?"hdiy":4096==e?"pgrp":8192==e?"stt":-2==e?"shx":262144==e?"jid":4==e||128==e?"cru":8==e?"otd":"grp"},Ci=function(e){var t=e.basicInfo,n=e.preSaleInfo,r=e.isBestone,a={isPreSale:!1},i=(t||{}).preSaleStatus;if(r)return a;if(1===i){var o=n||{},c=o.preSaleProductId,l=o.title,s=o.price,u=o.description;c&&l&&s&&(a.isPreSale=!0,a.preSaleId=c,a.title=l,a.price=s,a.description=u||"")}return a},Ti=function(e){var t=e||"";return e&&(t=t.replace(/[|&;$%@"'<>()+,\r\n\\]/g,"")),t},Ii=function(e){var t=e.tabId;return e.isBestone&&(Mr(t)||Fr(t))?Kn.d:Kn.c};function Si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Si(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pi=function(e){var t=e.currentTabInfo,n=(void 0===t?{}:t).id,r=e.departureCity,a=(void 0===r?{}:r).cityId,i=2;switch(n){case en.WHOLE:i=1;break;case en.FREE_TRAVEL:case en.DEST_FREE_TRAVEL:i=3}var o=0;return n===en.PRIVATE_GROUP?o=11:n===en.DEST_PRIVATE_GROUP&&(o=12),Ni({startCity:a,businessUnit:i,type:0,version:null,Category:0},o?{urlType:o}:{})},wi=function(e,t,n){var r=e.filter,a=e.isBestone,i=e.isOffline,o=e.sortType,c=e.pageNumber,l=e.isTradeFilter,s=e.isSearchBestoneVendor,u=e.isSearchVendorStore,d=e.modifiedId,p=e.modifiedType,f=e.departureCity,m=(void 0===f?{}:f).cityId,v=e.currentTabInfo,h=void 0===v?{}:v,g=h.id,y=h.filters,b=void 0===y?[]:y,E=e.search,_=void 0===E?{}:E,O=_.type,k=_.poi,C=_.keyword,T=e.bestoneInfo,I=(void 0===T?{}:T).ouid,S=void 0===I?"":I,N=n||{},P=N.aid,w=N.sid,x=N.vid,D=N.offlineUid,R=N.ignoreFilter,j={client:{},poiType:{},filtered:{},returnType:{}},A=ui(r),L=A.normal,B=A.extra;j.client={trace:"none",device:"PC",source:Oi({isBestone:a,isOffline:i}),variables:[{key:"SHXVERSION",value:"B"},{key:"200918_VAC_ryjjh",value:"B"},{key:"FILTERED_SCOPE",value:"custom"},{key:"USE_NEW_LEVEL",value:"true"},{key:"ALLIANCE_ID",value:String(P)},{key:"SID",value:String(w)}],cid:x},i&&(j.client.uid=D),a&&j.client.variables.push({key:"ouid",value:String(S)},{key:"CHANNEL",value:hi(e,t)});var U={poid:0,type:"",keyword:""};j.poiType=U,"poi"==O&&(j.poiType.poid=k.id,j.poiType.type=fa(k.type)),C&&(j.poiType.keyword=C),s&&(j.poiType.type="PN"),u&&(j.poiType=U,j.poiType.keyword=C),d&&(j.poiType.poid=d),p&&(j.poiType.type=p),a&&l&&L.unshift({type:"FILTERED",key:"priceType",value:"tradePrice"}),j.filtered=Ni(Ni({sort:o||8,channel:i?"Offline":"Online",tab:jr(g)?"A126":Ur(g)?"T126":String(g),saleCity:Number(m)||2,startCity:Number(m)||2,pageSize:30,pageIndex:c},R?null:{items:L}),R?null:B);var M={key:"CHANNEL_ID",value:String(Object(ht.c)(t))};return j.filtered.items=j.filtered.items||[],j.filtered.items.unshift(M),j.returnType={type:"all",filters:ba({isBestone:a,isOffline:i,filters:b,tabId:g}),recommendProduct:!a&&1==c},j},xi=function(e,t){var n=Ni({},e),r=t||{},a=r.query,i=r.isBestone,o=(a||{}).hssg;n.filtered||(n.filtered={});var c={key:"HasSegment",value:"1"===o?"true":"false"};return n.filtered.items=n.filtered.items||[],i&&n.filtered.items.unshift(c),n},Di=function(e){var t=e.products,n=e.recommendProducts;t=t||[],n=n||[];var r=[].concat(i()(t),i()(n));return{QueryList:S.a.uniqBy(S.a.compact(S.a.map(r,(function(e){if(e&&e.id>0){var t=Vn[e.type]||"GROUP_TRAVEL";return{ProductId:+e.id,BizType:t}}return null}))),"ProductId")}},Ri=function(e){return Mr(e)||Br(e)?["Tour_pkg"]:Fr(e)?["Tour_diy"]:Lr(e)?["Tour_jid"]:["Tour_pkg","Tour_diy","Tour_jid","Activity"]},ji=function(e){var t,n=e||{},r=n.id,a=n.name,i=n.type,o=n.path,c="",l="";if(i==sn){var s=S.a.get(o,"[0].id"),u=S.a.get(o,"[0].name");t=s>0?s:-1,c=u,l="".concat(u,"\u5468\u8fb9\u666f\u70b9\u63a8\u8350")}else t=r,c=a,l="".concat(a,"\u666f\u70b9\u63a8\u8350");return{recommendPoiId:t,recommendPoiName:c,recommendPoiTitle:l}},Ai=function(e,t){return t=+t>0?+t:18,{requestFrom:"100020727",searchField:{key1:"orderInfo.startCity>0&orderInfo.pkg>0&orderInfo.orderDate>".concat(e,"&orderInfo.uid.keyword!=test111111,wwwwww&orderInfo.pkgSaleMode.keyword!=P")},orderQueryTypeList:["orderInfo"],pageSize:t,pageNum:1,sortList:[{field:"orderInfo.orderDate",sortType:"desc"}]}},Li=function(e,t){t=+t>0?+t:10;var n=S.a.compact(S.a.take(e,t)),r=S.a.uniq(S.a.flatten(S.a.map(n,(function(e){return[e.startCity,e.destCity]}))));return{keys:S.a.map(r,(function(e){return{globalid:+e,geocategoryid:3,type:"base"}}))}},Bi=function(e,t){t=+t>0?+t:10;var n=S.a.compact(S.a.take(e,t));return{names:S.a.map(S.a.filter(n,(function(e){return e&&e.startCityName&&e.destCityName})),(function(e){return e.destCityName}))}},Ui=function(e,t,n,r,a,i){var o=i.isOnline,c=i.isOffline,l=i.isBestone,s=e||{},u=s.type,d=s.poi,p=s.keyword;if(t.id==en.SCENIC_HOTEL)return Fi(e,n,a,{isOnline:o,isOffline:c,isBestone:l});if(u==Wt)switch(d.type.toUpperCase()){case sn:return Vi(e,t,a,{isOnline:o,isOffline:c,isBestone:l});case ln:return Hi(e,t,a,{isOnline:o,isOffline:c,isBestone:l});case un:return Gi(p,a,{isOnline:o,isOffline:c,isBestone:l})}return u==Yt?Mi(r,e,t,a,{isOnline:o,isOffline:c,isBestone:l}):Gi(p,a,{isOnline:o,isOffline:c,isBestone:l})},Mi=function(e,t,n,r,a){var i=a.isOnline,o=a.isOffline,c=a.isBestone,l=(t||{}).keyword,s=e&&e.length?e[0]:null;if(s){var u=s||{},d=u.poid,p=u.type,f=u.keyword,m={keyword:f,poiName:f,path:e.length>1?e.map((function(e){return{name:e.keyword,id:e.poid}})):[]};if(0!=d&&"U"!=p)switch("SS"==p?sn:p.toUpperCase()){case sn:return Vi(t,n,r,{isOnline:i,isOffline:o,isBestone:c},m);case ln:return Hi(t,n,r,{isOnline:i,isOffline:o,isBestone:c},m);case un:return Gi(f,r,{isOnline:i,isOffline:o,isBestone:c},m)}}return Gi(l,r,{isOnline:i,isOffline:o,isBestone:c})},Fi=function(e,t,n,r){var a=r.isOnline,i=r.isOffline,o=r.isBestone;t=t||[];var c=e.keyword,l=t.filter((function(e){return!e.channel})).map((function(e){var t=e.items;return(void 0===t?[]:t).filter((function(e){return e.name!=e.value})).map((function(e){return e.name})).filter(Boolean).join()})).filter(Boolean).join();return[qi({isOnline:a,isOffline:i,isBestone:o,isScenicHotel:!0,query:n}),{text:"".concat(c,"\u666f\u70b9\u5957\u9910"),tabId:en.SCENIC_HOTEL},{text:"".concat(l,"\u666f\u70b9\u5957\u9910\u9884\u8ba2")}]},Vi=function(e,t,n,r,a){var i=r.isOnline,o=r.isOffline,c=r.isBestone,l=(e||{}).keyword;a&&(l=a.keyword);var s=t.flag,u=t.id,d=[qi({isOnline:i,isOffline:o,isBestone:c,query:n})];return Vr({tabId:u})||d.push({text:"".concat(l,"\u65c5\u6e38")}),d.push({text:"".concat(l).concat(s)}),d},Hi=function(e,t,n,r,a){var o=r.isOnline,c=r.isOffline,l=r.isBestone,s=e||{},u=s.poi,d=void 0===u?{}:u,p=d.name,f=d.path,m=s.keyword;a&&(m=a.keyword,p=a.poiName,f=a.path);var v=t.id,h=t.name,g=Vr({tabId:v})?"\u79c1\u5bb6\u56e2":"\u65c5\u6e38",y=f?f.map((function(e){var t=e.name,n=e.id;return{text:"".concat(t).concat(g),poiId:n}})):[],b=[qi({isOnline:o,isOffline:c,isBestone:l,query:n})].concat(i()(S.a.reverse(y)),[{text:"".concat(m).concat(g)}]);switch(v){case en.GROUP_TRAVEL:case en.AROUND:case en.STUDY_ABROAD:var E;E=["\u53f0\u6e7e","\u53f0\u5317"].includes(p)?"\u5165\u53f0\u8bc1":["\u9999\u6e2f","\u6fb3\u95e8"].includes(p)?"\u7b7e\u6ce8":h,b.push({text:"".concat(m).concat(E)});break;case en.FREE_TRAVEL:case en.DEST_FREE_TRAVEL:b.push({text:"".concat(m).concat(h)})}return b},Gi=function(e,t,n,r){var a=n.isOnline,i=n.isOffline,o=n.isBestone;return r&&(e=r.keyword),[qi({isOnline:a,isOffline:i,isBestone:o,query:t}),{text:"".concat(e)}]},qi=function(e){var t=e.isOnline,n=e.isOffline,r=e.isBestone,a=e.isScenicHotel,i=void 0!==a&&a,o="\u65c5\u6e38",c="/",l=e.query||{},s=l.uid,u=l.cookieid;return s=s||"",u=u||"",t?i&&(o="\u9152\u5e97+\u666f\u70b9",c="/diysh"):n?(o="\u9996\u9875",c="/offline?module=2707&uid=".concat(s,"&CookieID=").concat(u)):r&&(c="//bst.ctrip.com/"),{text:o,url:c}},zi=function(e){switch((e.currentTabInfo||{}).id){case en.FREE_TRAVEL:case en.DEST_FREE_TRAVEL:return function(e){var t=e.search,n=Ki(),r=(t||{}).keyword;return{title:"".concat(r,"\u81ea\u7531\u884c,").concat(r,"\u81ea\u7531\u884c\u653b\u7565,").concat(r,"\u81ea\u7531\u884c\u7ebf\u8def\u62a5\u4ef7_\u643a\u7a0b\u65c5\u884c"),description:"\u643a\u7a0b\u81ea\u7531\u884c\u4e3a\u60a8\u63d0\u4f9b\u5355\u7a0b\uff0c\u5f80\u8fd4\uff0c\u8054\u7a0b\u673a\u7968\u52a0\u9152\u5e97\u67e5\u8be2\u9884\u8ba2\u3001\u65c5\u6e38\u7ebf\u8def\u63a8\u8350\u3001\u65c5\u6e38\u653b\u7565\u7b49\u670d\u52a1\u3002\u4e3a\u60a8\u4f11\u95f2\u65c5\u6e38\u6216\u5546\u52a1\u884c\u7a0b\u63d0\u4f9b\u66f4\u591a\u9152\u5e97\u673a\u7968\u9009\u62e9\u3002\u540c\u65f6\uff0c\u60a8\u4e0d\u4f46\u53ef\u4ee5\u9009\u62e9\u7531\u643a\u7a0b\u4e3a\u60a8\u63a8\u8350\u7684\u7279\u60e0\u673a\u7968\u9152\u5e97\u7ec4\u5408\uff0c\u8fd8\u80fd\u81ea\u7531\u7ec4\u5408\u5957\u9910\u4e2d\u673a\u7968\u548c\u9152\u5e97\uff0c\u968f\u5fc3\u642d\u914d\u60a8\u81ea\u7531\u884c\u548c\u5546\u52a1\u884c\u7a0b\u3002",keywords:"".concat(r,"\u81ea\u7531\u884c,").concat(r,"\u81ea\u7531\u884c\u653b\u7565,").concat(r,"\u81ea\u7531\u884c\u7ebf\u8def\u62a5\u4ef7,").concat(n).concat(r,"\u81ea\u7531\u884c")}}(e)}return Yi(e)},Yi=function(e){var t=e.search||{},n=t.type,r=t.poi;return n==Wt&&r.type.toUpperCase()==sn?Wi(e):Qi(e)},Wi=function(e){var t=e.search,n=e.total,r=e.currentFilters,a=e.currentTabInfo,i=Ki(),o=t||{},l=o.keyword,s=o.poi,u=(a||{}).flag,d=eo(n,r),p=c()(d,2),f=p[0],m=void 0===f?"":f,v=p[1],h=void 0===v?"":v,g=Ji(r),y="".concat(l).concat(u);if(m||h)return{title:"".concat(i).concat(m).concat(l).concat(h).concat(u,"\u7ebf\u8def\u62a5\u4ef7, ").concat(y,"\u653b\u7565").concat(g,"\u3010\u643a\u7a0b\u65c5\u6e38\u3011"),description:"".concat(i).concat(m).concat(l).concat(h).concat(u,"\u7ebf\u8def\u62a5\u4ef7,\u643a\u7a0b\u65c5\u6e38\u7f51\u63d0\u4f9b").concat(n,"\u6761").concat(y,"\u7ebf\u8def\u62a5\u4ef7, ").concat(y,"\u653b\u7565\u4ee5\u53ca").concat(l,"\u81ea\u7531\u884c\u3001\u8ddf\u56e2\u6e38\u3001\u534a\u81ea\u52a9\u6e38\u3001\u5468\u8fb9\u6e38\u7b49\u591a\u79cd\u51fa\u6e38\u5f62\u5f0f\uff0c\u60f3\u8981").concat(l,"\u65c5\u6e38\u627e\u643a\u7a0b\u3002"),keywords:"".concat(i).concat(m).concat(l).concat(h).concat(u,"\u7ebf\u8def\u62a5\u4ef7, ").concat(l,"\u653b\u7565")};var b=(s||{}).parentName,E=void 0===b?"":b;return{title:"".concat(i).concat(y,"\u597d\u73a9\u5417,").concat(y,"\u600e\u4e48\u6837,").concat(y,"\u653b\u7565").concat(g,"\u3010\u643a\u7a0b\u65c5\u6e38\u3011"),description:"".concat(y,"\u600e\u4e48\u6837,").concat(y,"\u597d\u73a9\u5417,\u643a\u7a0b\u65c5\u884c\u7f51\u4e3a\u60a8\u63d0\u4f9b").concat(i).concat(n,"\u6761").concat(E).concat(y,"\u65c5\u6e38\u7ebf\u8def\u62a5\u4ef7,").concat(y,"\u653b\u7565,\u60f3\u8981\u53bb").concat(l,"\u6e38\u73a9\u627e\u643a\u7a0b\u3002"),keywords:"".concat(i).concat(y,"\u597d\u73a9\u5417,").concat(y,"\u600e\u4e48\u6837,").concat(y,"\u653b\u7565")}},Qi=function(e){var t=e.search,n=e.total,r=e.currentFilters,a=e.currentTabInfo,i=Ki(),o=(t||{}).keyword,c=(a||{}).flag,l=Zi(n,r),s=Ji(r),u="".concat(o).concat(c);return l?{title:"".concat(o).concat(l).concat(c,"\u7ebf\u8def\u62a5\u4ef7,").concat(u,"\u63a8\u8350").concat(s,"\u3010\u643a\u7a0b\u65c5\u6e38\u3011"),description:"".concat(i).concat(o).concat(l).concat(c,"\u666f\u70b9\u63a8\u8350,\u643a\u7a0b\u65c5\u6e38\u7f51\u63d0\u4f9b").concat(n,"\u6761").concat(o).concat(l).concat(c,"\u7ebf\u8def\u62a5\u4ef7,").concat(o).concat(l).concat(c,"\u653b\u7565,").concat(o).concat(l).concat(c,"\u666f\u70b9\u4ee5\u53ca").concat(o,"\u81ea\u7531\u884c,\u8ddf\u56e2\u6e38,\u534a\u81ea\u52a9\u6e38,\u56e2\u961f\u6e38\u7b49\u591a\u79cd\u51fa\u6e38\u5f62\u5f0f,\u60f3\u8981").concat(o,"\u65c5\u6e38\u627e\u643a\u7a0b\u3002"),keywords:"".concat(o).concat(l).concat(c,"\u7ebf\u8def,").concat(o).concat(l).concat(c,"\u666f\u70b9,").concat(o).concat(l).concat(c,"\u653b\u7565,").concat(o).concat(l).concat(c,"\u7ebf\u8def\u62a5\u4ef7,").concat(i).concat(l).concat(c)}:{title:"".concat(u,",").concat(u,"\u666f\u70b9,").concat(i).concat(u,"\u7ebf\u8def\u62a5\u4ef7").concat(s,"\u3010\u643a\u7a0b\u65c5\u6e38\u3011"),keywords:"".concat(u,",").concat(u,"\u666f\u70b9,").concat(u,"\u653b\u7565,").concat(u,"\u7ebf\u8def\u62a5\u4ef7,").concat(i).concat(u),description:"".concat(i).concat(u,"\u666f\u70b9\u63a8\u8350,\u643a\u7a0b\u65c5\u6e38\u7f51\u63d0\u4f9b").concat(n,"\u6761").concat(u,"\u7ebf\u8def\u62a5\u4ef7,").concat(u,"\u653b\u7565,").concat(u,"\u666f\u70b9\u4ee5\u53ca").concat(o,"\u81ea\u7531\u884c,\u8ddf\u56e2\u6e38,\u534a\u81ea\u52a9\u6e38,\u56e2\u961f\u6e38\u7b49\u591a\u79cd\u51fa\u6e38\u5f62\u5f0f,\u60f3\u8981").concat(o,"\u65c5\u6e38\u627e\u643a\u7a0b\u3002")}},Ki=function(){var e=(new Date).getMonth();return"".concat(Kn.Q[e],"\u6708")},Ji=function(e){var t=(e=e||[]).find((function(e){return"p"==e.flag}));if(!t)return"";var n=t.items,r=((void 0===n?[]:n)[0]||{}).type;return r?"\u7b2c".concat(r," \u9875"):""},Xi=["minPrice","maxPrice","beginDate","endDate"],Zi=function(e,t){if(t=(t=t||[]).filter((function(e){return!Xi.includes(null===e||void 0===e?void 0:e.type)})),!e)return"";var n="",r="",a=t.filter((function(e){var t=e.flag,a=e.items,i=void 0===a?[]:a,o=e.channel,c=(i[0]||{}).type;return"y"==t&&1==c?n="\u7279\u4ef7":"s"==t&&(5==c?r="\u4ef7\u683c\u6700\u4f4e":6==c&&(r="\u4ef7\u683c\u6700\u9ad8")),!o})).map((function(e){return e.items.map((function(e){return e.name})).filter(Boolean).join()})).filter(Boolean).join("");return"".concat(a).concat(n).concat(r)},$i=["ProviderBrand","SaleDepartureStat","Month"],eo=function(e,t){return t=(t=t||[]).filter((function(e){return!Xi.includes(null===e||void 0===e?void 0:e.type)})),e?[t.filter((function(e){return $i.includes(e.type)})).sort((function(e,t){return $i.indexOf(e.type)-$i.indexOf(t.type)})).map((function(e){var t=e.type,n=e.items,r=(n=n||[]).map((function(e){return e.name})).filter(Boolean).join("");return r?"".concat(r,"ProviderBrand"==t?" \u63d0\u4f9b":" \u51fa\u53d1"):r})).filter(Boolean).join(""),t.filter((function(e){return!$i.includes(e.type)&&!e.channel})).map((function(e){var t=e.items;return(t=t||[]).map((function(e){return e.name})).filter(Boolean).join("")})).filter(Boolean).join("")]:[]};function to(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function no(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?to(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):to(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ro=function(e,t,n){var r={state:e,context:t,options:n},a=ao(r),i=io(r);return{client:oo(r),marketingInfo:co(r),destination:a.destination,filtered:a.filtered,searchOption:a.searchOption,imageOption:i.imageOption,productOption:i.productOption,productKeys:i.productKeys,requestSource:"tour",debug:!1,extras:lo(r)}},ao=function(e){var t=e.state,n=(e.context,e.options),r=t.filter,a=t.isBestone,i=t.isOffline,o=t.sortType,c=t.pageNumber,l=t.isTradeFilter,s=t.modifiedId,u=t.modifiedType,d=t.isSearchBestoneVendor,p=t.currentTabInfo,f=void 0===p?{}:p,m=f.id,v=f.filters,h=void 0===v?[]:v,g=t.search,y=void 0===g?{}:g,b=y.type,E=y.poi,_=y.keyword,O=n.ignoreFilter,k=ui(r),C=k.normal,T=k.extra,I=null===C||void 0===C?void 0:C.map((function(e){return{method:"FILTERED",type:e.key,value:e.value}}));a&&l&&I.unshift({method:"FILTERED",type:"priceType",value:"tradePrice"});var S=ba({isBestone:a,isOffline:i,filters:h,tabId:m}),N={destination:{poid:0,type:"",keyword:_||""},filtered:{tab:String(m),preItems:[],items:I||[],minPrice:(null===T||void 0===T?void 0:T.minPrice)||0,maxPrice:(null===T||void 0===T?void 0:T.maxPrice)||0,beginDate:(null===T||void 0===T?void 0:T.beginDate)||"",endDate:(null===T||void 0===T?void 0:T.endDate)||"",sort:o||Ii({tabId:m,isBestone:a}),pageIndex:c||1,pageSize:30,extras:{}},searchOption:{returnMode:"all",filters:[S],needAdProduct:!a&&1==c,needUpStream:!1,needRiskPolicyInfo:!0}};return O&&(N.filtered=no(no({},N.filtered),{},{items:[],minPrice:0,maxPrice:0,beginDate:"",endDate:""})),"poi"==b&&(N.destination.poid=E.id,N.destination.type=fa(E.type)),s&&(N.destination.poid=s),u&&(N.destination.type=u),d&&(N.destination.type="PN"),N},io=function(e){var t=e.state,n=(e.context,e.options),r=t.isOffline,a=n.productKeys,o=n.needTailoring,c=null!==a&&void 0!==a&&a.length?a:[],l=r?[].concat(i()(Rt),i()(jt)):Rt;return{imageOption:{width:At,height:Lt,autoCrop:!0},productOption:o?{needBasicInfo:!0}:{needBasicInfo:!0,needPrice:!0,needVendor:!0,needComment:!0,needOrder:!0,needRanking:!0,tagOption:l},productKeys:c}},oo=function(e){var t=e.state,n=e.context,r=e.options,a=t.isBestone,i=t.isOffline,o=t.departureCity,c=(void 0===o?{}:o).cityId,l=r.vid,s=r.offlineUid,u=Oi({isBestone:a,isOffline:i}),d={lat:"",lon:"",cityId:c?Number(c):2,cityType:3,locatedCityId:0},p={version:"",channel:Object(ht.c)(n),locale:"zh-CN",currency:"CNY",source:u,cid:l,location:d,extras:{}};return i&&s&&(p.uid=s),p},co=function(e){e.state,e.context;var t=e.options,n=t.aid,r=t.sid,a={allianceId:0,sid:0};return n&&(a.allianceId=Number(n)),r&&(a.sid=Number(r)),a},lo=function(e){var t=e.state,n=e.context,r=(e.options,t.query),a=t.isBestone,i=t.isOffline,o=t.isOnline,c=t.bestoneInfo,l=(void 0===c?{}:c).ouid,s=void 0===l?"":l,u=function(e){var t=e.isOnline,n=e.isOffline,r=e.isBestone;return t?"pc_online":n?"pc_offline":r?"pc_tds":void 0}({isOnline:o,isOffline:i,isBestone:a}),d={USE_OLD_RISK:"true",USE_OLD_FILTER:"true",USE_NEW_LEVEL:"true",USE_NEW_PRICE:"true",needUserDiscountPrice:"true",FILTERED_SCOPE:"custom",NEED_DEPARTURE_TAB_REDIRECT:"true"};return a&&(d.DEVICE_FORM="ONLINE",d.ouid=String(s),d.CHANNEL=hi(t,n)),a||(d.NEED_PRE_SALE_FILTER="true"),1!=(null===r||void 0===r?void 0:r.redirected)&&1!=(null===r||void 0===r?void 0:r.switched)&&(d.DEFAULT_NATIVE_REQUEST="true"),u&&(d.TAB_SCENE_CODE=u),d},so=function(e,t,n){var r=e.isBestone,a=e.isOffline,i=e.departureCity,o=(void 0===i?{}:i).cityId,c=n.productId;return{client:{version:"",channel:Object(ht.c)(t),locale:"zh-CN",currency:"CNY",source:Oi({isBestone:r,isOffline:a}),cid:"",location:{lat:"",lon:"",cityId:o?Number(o):2,cityType:3,locatedCityId:0},extras:{}},destination:{poid:0,type:"",keyword:""},filtered:{tab:"126",items:[],minPrice:0,maxPrice:0,beginDate:"",endDate:"",sort:8,pageIndex:1,pageSize:2,extras:{productKeys:JSON.stringify([{id:String(c)}])}},searchOption:{returnMode:"all",filters:[],needAdProduct:!1,needUpStream:!1},productOption:{needBasicInfo:!0},requestSource:"tour",extras:no({INPUT_PRODUCTID_SEARCH:"true"},r?{CHANNEL:hi(e,t)}:null)}},uo=function(e,t,n){e.isBestone,e.isOffline;var r=e.departureCity,a=(void 0===r?{}:r).cityId,i=n.productId;return{client:{version:"10.15.7",crnVersion:"10.15.7",channel:Object(ht.c)(t),locale:"zh-CN",currency:"CNY",cid:"",uid:"",pageId:"",location:{lat:"",lon:"",cityId:a?Number(a):2,cityType:3,locatedCityId:0},extras:{}},destination:{poid:0,type:"",keyword:""},filtered:{tab:"4",items:[],minPrice:0,maxPrice:0,beginDate:"",endDate:"",sort:0,pageIndex:1,pageSize:20,departureCity:0,extras:{}},searchOption:{returnMode:"PRODUCT",filters:[],needAdProduct:!1},productOption:{needBasicInfo:!0,needComment:!0,needOrder:!0,needPrice:!0,needRanking:!0,needVendor:!0,tagOption:["PRODUCT_TAG","IS_AD_TAG","PM_RECOMMENDATION_TAG"]},productKeys:[{id:String(i),departureCityId:a?Number(a):0,productType:"CRUISE_PACKAGE",extras:{IS_ID_SEARCH:"true"}},{id:String(i),departureCityId:a?Number(a):0,productType:"CRUISE",extras:{IS_VOYA_ID:"true",IS_ID_SEARCH:"true"}}],requestSource:"cruise",extras:{CRUISE_PACKAGE_FIRST:"true"}}};var po=function(e){var t=e.isOnline,n=e.isBestone;return t||n},fo=function(e){var t=e.tabId,n=e.isOnline,r=e.isSearchBestoneVendor,a=e.isSearchVendorStore,i=t;(r&&(i=en.VENDOR),a)&&(i=oa({isOnline:n,tabId:t}).id);return i},mo=function(){var e=Object(L.useCtrl)(),t=e.context,n=e.handleCityChanged,r=e.handleBestonTrack,a=(t||{}).env,i=Object(L.useModelState)(),o=i.isOnline,c=i.isBestone,l=i.isVisaMigrated,s=i.isThemeTravelMigrated,u=i.departureCity,d=void 0===u?{}:u,p=d.cityId,f=d.cityName,m=d.saleCityId,v=i.navigation,h=i.currentTabInfo,g=void 0===h?{}:h,y=g.id,b=g.pageId,E=g.pageTab,_=i.isSearchBestoneVendor,O=i.isSearchVendorStore,k=i.search,C=(void 0===k?{}:k).keyword,T=Object(R.useMemo)((function(){return{beforeJump:function(e){var t=(e||{}).DepartureCityId;return!(!An.includes(t)||!o)||(n(e),!1)}}}),[]),I=Object(R.useMemo)((function(){return{beforeJump:function(e,t){return r(t),!0}}}),[]),S=fo({tabId:y,isOnline:o,isSearchBestoneVendor:_,isSearchVendorStore:O}),N=Object(R.useMemo)((function(){return{defaultTab:S}}),[S]),P=O?function(e){var t=e.cityId,n=e.keyword;return"/list/store/sc".concat(t||"",".html?sv=").concat(encodeURIComponent(n))}:null;if(!po({isOnline:o,isBestone:c}))return null;var w=Object(ht.c)(t),x=c?"\u8bf7\u8f93\u5165\u76ee\u7684\u5730\u3001\u4e3b\u9898\u6216\u5173\u952e\u5b57":null;return j.a.createElement("div",{className:"index_top_wrap basefix",id:"search-box-container"},j.a.createElement("div",{className:"city_wrap"},j.a.createElement(Nt.a,{cityId:p,cityName:f,callback:T}),o&&j.a.createElement(ur,{navigation:v})),j.a.createElement(Nt.b,U()({env:a,cityId:p,cityName:f,saleCityId:m,pageInfo:N,channelId:w,isBestone:c,keyword:C,useNewListUrl:!0,useNewAssociate:!0,isVisaMigrated:l,isThemeTravelMigrated:s,defaultSearchText:x,trackInfo:{pageId:b,pageTab:E},isDirectSearch:O,directSearchUrlFn:P},c?{callback:I}:null)))};function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var go=function(){for(var e=Object(L.useModelState)(),t=e.search,n=e.search.poi,r=e.crumbs,a=e.currentTabInfo,i=(void 0===a?{}:a).id,o=Object(L.useCtrl)().handleSearchChanged,c=r.map((function(e,t){var n=e.text,a=e.url,i=e.poiId,o=e.tabId;if(a)return j.a.createElement("a",{href:a,key:t},n);var c=t<r.length-1?"a":"h1";return j.a.createElement(c,{href:"javascript:;",key:t,"data-poid":i,"data-tabid":o},n)})),l=0;l<r.length-1;l++)c.splice(2*l+1,0,j.a.createElement(R.Fragment,{key:r.length+l},"\xa0>\xa0"));return j.a.createElement("div",{className:"crumbs",onClick:function(e){var r=e.target;if("A"==r.tagName.toUpperCase()&&"javascript:;"==r.href){var a,c=r.getAttribute("data-tabid")||i,l=r.getAttribute("data-poid");if(l&&n.id!=l){var s=n.id==l?n:(n.path||[]).find((function(e){return e.id==l}));a=ho(ho({},t),{},{poi:s})}else a=t;o(a,c)}}},c)};var yo=function(){var e=Object(L.useModelState)(),t=e.total,n=e.isSearchCompleted,r=e.currentTabInfo,a=(void 0===r?{}:r).id,i=e.totalTabs,o=void 0===i?{}:i,c=o.left,l=o.right;c=c||[],l=l||[];var s=Object(L.useCtrl)().handleTabChanged,u=Object(R.useCallback)((function(e){var t=e.target;if("A"===t.tagName.toUpperCase()){var n=+t.getAttribute("data-tab");if(n!=a){var r=c.concat(l).find((function(e){return e.id===n}));s(r)}}}),[s,c,l,a]);return aa(t,n)?null:j.a.createElement("div",{className:"search_filtrate"},j.a.createElement("div",{className:"filtrate_nav basefix",onClick:u},c.map((function(e){var t=e.id,n=e.name,r=H()("filtrate_list",{current:t===a});return j.a.createElement("a",{key:t,"data-tab":t,href:"javascript:;",className:r},n)})),l.map((function(e){var t=e.id,n=e.name;return j.a.createElement("a",{key:t,"data-tab":t,href:"javascript:;",className:"filtrate_sub"},n)}))))};var bo=function(e,t){var n=Kn.bb.standard;return t&&(n=Mr(e)||Fr(e)?Kn.bb.bestoneMain:Kn.bb.bestone),n},Eo=function(e,t){return Array.isArray(t)?t.map((function(e){return e.key})).includes(e):t==e},_o=function(e,t,n,r){if(r=r||[],e){var a=r.find((function(e){return e.key==t}));return a&&a.text?a.text:""}return n},Oo=function(){var e=Object(L.useModelState)(),t=e.sortType,n=e.isBestone,r=e.currentTabInfo.id,a=Object(L.useCtrl)().handleSortChanged,i=bo(r,n),o=t||Ii({tabId:r,isBestone:n}),c=function(e){e!=o&&a(e)};return j.a.createElement(j.a.Fragment,null,i.map((function(e){if("single"==e.type){var t=e.key,n=e.text,r=Eo(o,t);return j.a.createElement("span",{key:n,className:"list_recommend_text ".concat(r?"cur":""),onClick:function(){c(t)}},n)}if("double"==e.type){var a=e.parentText,i=e.childConfig,l=e.boxWidth,s=Eo(o,i),u=_o(s,o,a,i);return j.a.createElement("div",{key:a,className:"list_recommend_distance"},j.a.createElement("span",{className:"list_distance_text ".concat(s?"cur":"")},u,j.a.createElement("i",null)),j.a.createElement("div",{className:"list_distance_box",style:{width:"".concat(l,"px")}},i.map((function(e){var t=e.key,n=e.text;return j.a.createElement("p",{key:n,className:"list_distance_tip",onClick:function(){c(t)}},n)}))))}})))};var ko=function(e){var t=e.title;return e.type,j.a.createElement("div",{className:"list_cate_title"},t)},Co=n(835),To=n.n(Co),Io=n(148),So=n.n(Io),No=function(e,t,n,r){return(e=e.toString()).length<t&&(n=new Array(t).join(n||" "),e=r?(n+e).substr(-t):(e+n).substring(0,t)),e},Po=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],wo=/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\.[0-9]+)?(Z)?((\+|-)?\d{1,2}:00)?$/,xo=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];d()(this,e);var r=e.handleZone(Date.now());if(t)if(/^-\d+$/.test(t)){if(n)return this.date=new Date(""),this;t=e.handleZone(t)}else if(/^\+?\d+$/.test(t))t=e.handleZone(t);else if("object"===So()(t)&&t instanceof e)return this.date=t;if("string"===typeof(t=t||r)){var a=/^(\d{4})\-?(\d{1,2})(?:\-(\d{1,2}))?/i;t.match(a)&&(t=t.replace(a,(function(e,t,n,r){return"".concat(t,"/").concat(n||"01","/").concat(r||"01")})))}this.date=new Date(t)}return f()(e,[{key:"addDay",value:function(e){return e=e||0,this.date.setDate(this.date.getDate()+e),this}},{key:"addMonth",value:function(e){return e=e||0,this.date.setMonth(this.date.getMonth()+e),this}},{key:"addHours",value:function(e){return e=e||0,this.date.setHours(this.date.getHours()+e),this}},{key:"addMinutes",value:function(e){return e=e||0,this.date.setMinutes(this.date.getMinutes()+e),this}},{key:"addSeconds",value:function(e){return e=e||0,this.date.setSeconds(this.date.getSeconds()+e),this}},{key:"addYear",value:function(e){return e=e||0,this.date.setYear(this.date.getFullYear()+e),this}},{key:"toBJZone",value:function(){return new e(e.handleZone(this.date.getTime()))}},{key:"setHours",value:function(){return this.date.setHours.apply(this.date,arguments),this}},{key:"setMinutes",value:function(){return this.date.setMinutes.apply(this.date,arguments),this}},{key:"valueOf",value:function(){return this.date}},{key:"getTime",value:function(){return this.date.valueOf()}},{key:"toString",value:function(){return this.date.toString()}},{key:"format",value:function(e){var t=this.date;return(e=e||"YYYY-MM-DD").replace(/Y+|M+|D+|H+|m+|s+|w+/g,(function(e){var n=e.substr(0,1),r=e.length;switch(n){case"Y":return t.getFullYear().toString().substr(4-r);case"M":return No(t.getMonth()+1,r,"0",!0);case"D":return No(t.getDate(),r,"0",!0);case"H":return No(t.getHours(),r,"0",!0);case"m":return No(t.getMinutes(),r,"0",!0);case"s":return No(t.getSeconds(),r,"0",!0);case"w":return Po[t.getDay()]}}))}},{key:"diffMonth",value:function(t){var n=parseInt(this.format("YYYY"),10),r=parseInt(this.format("MM"),10),a=new e(t);return 12*(parseInt(a.format("YYYY"),10)-n)+(parseInt(a.format("MM"),10)-r)}},{key:"isValid",value:function(){return this.date&&!isNaN(this.date.getTime())}}]),e}();Object.assign(xo,{parse:function(e,t,n){return"object"===So()(e)?(e instanceof xo&&(e=e.valueOf()),t?new Date(e):new xo(e)):((e+="").indexOf("Date")>-1?e=e.match(/((\+|-)?\d+)/)[0]:wo.test(e)&&(e=xo.transformTimeStampISO8601(e)),isNaN(e)||(e=parseInt(e)),t?new xo(e,n).valueOf():new xo(e,n))},minuteDiff:function(e,t){var n=xo.parse(e,!0);return(xo.parse(t,!0)-n)/6e4},hourDiff:function(e,t){var n=xo.parse(e,!0);return(xo.parse(t,!0)-n)/36e5},dayDiff:function(e,t){var n=xo.parse(e,!0),r=xo.parse(t,!0);return n.setHours(0,0,0,0),r.setHours(0,0,0,0),parseInt((r-n)/864e5)},diffMonth:function(e,t){return(e=new xo(e)).diffMonth(t)},timeRange:function(e,t,n){var r=xo.dayDiff(e,n),a=xo.dayDiff(n,t);return r>=0&&a>=0},format:function(e,t,n){return e=this.parse(e,!0,n),new xo(e,n).format(t)},handleZone:function(e){if(!e||isNaN(e))return e;return+e+6e4*(new Date).getTimezoneOffset()+288e5},transformTimeStamp:function(e){var t=e.match(/^\/Date\(-?(\d+)(\+|-)\d+\)\/$/);return t?xo.handleZone(t[1]):e.match(/^(\d{4})\-?(\d{1,2})(?:\-(\d{1,2}))?/i)?new Date(e).getTime():e},transformTimeStampISO8601:function(e){var t=e.match(wo);if(t&&t.length){var n=t[1],r=void 0==t[2]?0:t[2]-1,a=t[3],i=t[4],o=t[5],c=t[6];return new Date(n,r,a,i,o,c).getTime()-288e5-6e4*(new Date).getTimezoneOffset()}return null},transformServerDate:function(e){return"/Date("+(e=xo.handleZone(e))+"+0800)/"}});var Do=function(e){To()(e);var t=Object(R.useRef)(null),n=Object(R.useRef)(null),r=Object(R.useRef)(null),a=Object(L.useCtrl)().handleFilterChanged,i=Object(L.useModelState)().currentFilters;i=i||[];var o=Object(R.useState)(""),l=c()(o,2),s=l[0],u=l[1],d=Object(R.useState)(""),p=c()(d,2),f=p[0],m=p[1],v=Object(R.useState)(!1),h=c()(v,2),g=h[0],y=h[1],b=Object(R.useCallback)((function(){y(!0)}),[]),E=Object(R.useCallback)((function(e){t.current.contains(e.target)||y(!1)}),[t]),_=Object(R.useCallback)((function(){if(s&&f&&s>f){var e=s;u(f),m(e)}}),[s,f]),O=Object(R.useCallback)((function(){(s||f)&&(u(""),m(""))}),[s,f]),k=Object(R.useCallback)((function(){var e=s.replace(/-/g,""),t=f.replace(/-/g,"");C({ea:{name:e,value:e},fa:{name:t,value:t}})}),[s,f]),C=function(e){var t=e.ea,n=e.fa,r=i.find((function(e){return"ea"==e.clientType})),o=i.find((function(e){return"fa"==e.clientType}));r?r.items=[t]:i.push({type:"beginDate",clientType:"ea",describe:"\u51fa\u53d1\u65e5\u671f",items:[t]}),o?o.items=[n]:i.push({type:"endDate",clientType:"fa",describe:"\u51fa\u53d1\u65e5\u671f",items:[n]}),a(i)};return Object(R.useEffect)((function(){return document.addEventListener("click",E),function(){document.removeEventListener("click",E)}}),[E]),Object(R.useEffect)((function(){var e=new xo(new Date),t=new xo(new Date).addMonth(6),a=e.format("YYYY-MM-DD"),i=t.format("YYYY-MM-DD");"undefined"!==typeof cQuery&&(cQuery(n.current).regMod("calendar","6.0",{options:{autoShow:!1,showWeek:!0,minDate:a,maxDate:i},listeners:{onChange:function(e,t){u(t)}}}),cQuery(r.current).regMod("calendar","6.0",{options:{autoShow:!1,showWeek:!0,minDate:a,maxDate:i},listeners:{onChange:function(e,t){m(t)}}}))}),[]),j.a.createElement("div",{className:"list_prise_k ".concat(g?"list_prise_k_focused":"")},j.a.createElement("div",{ref:t,className:"list_field"},j.a.createElement("label",{htmlFor:"search-input-begin-date",style:{display:"none"}},"\u6700\u65e9\u51fa\u53d1\u65e5\u671f"),j.a.createElement("input",{ref:n,type:"text",id:"search-input-begin-date",className:"list_input_range",value:s,style:{width:72,padding:"4px 2px"},placeholder:"\u6700\u65e9\u51fa\u53d1\u65e5\u671f",onFocus:b,onChange:function(){},onBlur:_}),"\xa0\xa0\u81f3\xa0\xa0",j.a.createElement("label",{htmlFor:"search-input-end-date",style:{display:"none"}},"\u6700\u665a\u51fa\u53d1\u65e5\u671f"),j.a.createElement("input",{ref:r,type:"text",id:"search-input-end-date",className:"list_input_range",value:f,style:{width:72,padding:"4px 2px"},placeholder:"\u6700\u665a\u51fa\u53d1\u65e5\u671f",onFocus:b,onChange:function(){},onBlur:_}),j.a.createElement("div",{className:"list_ctrl basefix"},j.a.createElement("span",{className:"list_ctrl_btn list_ctrl_btn_chancel ".concat(s||f?"":"list_ctrl_gray"),onClick:O},"\u6e05\u7a7a"),j.a.createElement("span",{className:"list_ctrl_btn",onClick:k},"\u786e\u8ba4"))))};var Ro=function(e){return e.isMergeDate},jo=function(e){var t=e.info;return e.isBestone&&t.type==Kn.E},Ao=function(e){var t=e.info,n=e.selected;return t.items.length==n.length},Lo=function(e){var t=e.info;return e.isBstProviderCase?i()(t.items):[]},Bo=function(e){var t=e.info,n=e.isPrefer,r=e.status,a=e.tools,o=e.showMultiBtn,l=e.contentEle,s=e.isMaldivesCase,u=Object(R.useState)(!1),d=c()(u,2),p=d[0],f=d[1],m=Object(L.useCtrl)(),v=m.handleFilterChanged,h=m.handleJumpYouxueQuality,g=m.handleJumpDiamond,y=Object(L.useModelState)(),b=y.isBestone,E=y.currentFilters,_=y.screenWidthInfo,O=y.isJest;E=E||[];var k=jo({info:t,isBestone:b}),C=Object(R.useState)(Lo({info:t,isBstProviderCase:k})),I=c()(C,2),S=I[0],N=I[1],P=r.isMore,w=r.isMulti,x=a.onMoreBtnClick,D=a.onCollapseBtnClick,A=a.onMultiBtnClick,B=a.onCancelBtnClick,U=n?"prefers":"normals",M=H()({list_area_box:!0,multiple_choice_box:w}),F=Object(R.useCallback)((function(e){var t=e.value,n=e.type;if(w){var r=S.findIndex((function(e){return e.value==t&&e.type==n}));N(r>-1?[].concat(i()(S.slice(0,r)),i()(S.slice(r+1))):[].concat(i()(S),[e]))}else G(T()({},U,[e]))}),[w,S]),V=Object(R.useCallback)((function(){S.length>0&&(G(T()({},U,S)),B())}),[S]),G=function(e){var n=e.normals,r=e.prefers;if(n&&n.length)if(Ro(t)){var a=n.filter(Fa),i=n.filter(Va);if(a.length){var o=a[0],c={type:o.type,clientType:o.clientType,describe:"\u51fa\u53d1\u8282\u65e5",items:a};E.push(c)}if(i.length){var l=i[0],s={type:l.type,clientType:l.clientType,describe:"\u51fa\u53d1\u6708\u4efd",items:i};E.push(s)}v(E)}else{var u={type:t.type,clientType:t.clientType,describe:t.name,items:n};E.push(u),v(E)}else r&&r.length&&(r.forEach((function(e){var t=e.type,n=e.clientType,r=e.describe,a=E.find((function(e){return e.type==t}));if(a)a.items.push(e);else{var i={type:t,clientType:n,describe:r,items:[e]};E.push(i)}})),v(E))};return Object(R.useEffect)((function(){if(null!==l&&void 0!==l&&l.current){var e=s?200:55,t=l.current.getBoundingClientRect().height;f(t>e)}O&&f(!0)}),[_]),j.a.createElement(j.a.Fragment,null,!w&&j.a.createElement("div",{className:"list_cate_right"},o&&j.a.createElement("span",{className:"list_multiple_choice",onClick:A},"\u591a\u9009",j.a.createElement("i",{className:"icon_list_add"})),p&&j.a.createElement("span",{className:P?"list_more_up":"list_more_down",onClick:P?D:x},P?"\u6536\u8d77":"\u66f4\u591a",j.a.createElement("i",null))),j.a.createElement("div",{className:"list_cate_left"},j.a.createElement("div",{className:M},j.a.createElement("div",{ref:l,className:"basefix"},w&&k&&j.a.createElement("span",{className:Ao({info:t,selected:S})?"cur":"",onClick:function(){Ao({info:t,selected:S})?N([]):N(i()(t.items))}},"\u5168\u90e8"),t.items.map((function(e){var t=e.name,n=e.type,r=e.value,a=e.percent,i=Math.round(100*a),o=S?S.find((function(e){return e.value==r&&e.type==n})):null;return j.a.createElement("span",{key:"".concat(r,"-").concat(t),className:o?"cur":"",onClick:function(){F(e)}},t,a>0&&j.a.createElement(j.a.Fragment,null,"\xa0(",j.a.createElement("em",{className:"list_blue_text"},i,"%"),"\u9009\u62e9)"))})),!w&&!b&&t.type===Kn.B&&j.a.createElement("span",{onClick:g},j.a.createElement("i",{className:"icon_list_help"}),"\u94bb\u7ea7\u8bf4\u660e"),!w&&!b&&t.type===Kn.L&&j.a.createElement("span",{onClick:h},j.a.createElement("i",{className:"list_youxue_icon"}),"\u6e38\u5b66\u9009\u54c1\u6807\u51c6"),!w&&Ro(t)&&j.a.createElement(Do,null)),w&&j.a.createElement("p",{className:"multiple_choice_btn"},j.a.createElement("i",{className:"multiple_choice_cancel",onClick:B},"\u53d6\u6d88"),j.a.createElement("i",{className:"multiple_choice_yes ".concat(S.length?"":"multiple_choice_gray"),onClick:V},"\u786e\u8ba4")))))};var Uo=function(e){var t=e.info,n=e.isMarketing,r=e.isService,a=Object(L.useCtrl)().handleFilterChanged,o=Object(L.useModelState)().currentFilters;o=o||[];var c=i()(o),l=Object(R.useCallback)((function(e){var t=e.serverType,n=e.value,r=c?c.find((function(e){return e.type==t})):null;if(!r)return!1;var a=r&&r.items?r.items.find((function(e){return e.value==n})):null;return Boolean(a)}),[c]);if(r){var s,u,d=null===t||void 0===t||null===(s=t.items)||void 0===s?void 0:s.filter((function(e){return Kn.M.includes(null===e||void 0===e?void 0:e.value)})),p=null===t||void 0===t||null===(u=t.items)||void 0===u?void 0:u.filter((function(e){return!Kn.M.includes(null===e||void 0===e?void 0:e.value)}));t.items=[].concat(i()(d),i()(p))}return j.a.createElement(j.a.Fragment,null,t.items.map((function(e){var t=e.value,s=e.name,u=H()({list_recommend_label:n,list_checklist_text:r,cur:l(e)});return j.a.createElement("span",{key:t,className:u,onClick:function(){!function(e){var t=e.serverType,n=e.clientType,r=e.value,s=o.find((function(e){return e.type==t})),u=o.findIndex((function(e){return e.type==t}));if(l(e))if(s&&s.items&&1==s.items.length)c=[].concat(i()(o.slice(0,u)),i()(o.slice(u+1)));else{var d=s.items.findIndex((function(e){return e.value==r}));s.items.splice(d,1),c=[].concat(i()(o.slice(0,u)),[s],i()(o.slice(u+1)))}else if(!s){var p={type:t,clientType:n,items:[e]};c=[].concat(i()(o),[p])}else s.items.push(e),c=i()(o);a(c)}(e)}},r&&j.a.createElement("i",null),j.a.createElement("span",null,s))})))};var Mo=function(e){var t=e.filterInfo,n=e.contentInfo,r=e.selected,a=e.setSelected,o=e.shouldRenderSubTitle,l=e.showMultiBtn,s=Object(R.useRef)(null),u=Object(R.useState)(!1),d=c()(u,2),p=d[0],f=d[1],m=Object(R.useState)(!1),v=c()(m,2),h=v[0],g=v[1],y=Object(R.useState)(!1),b=c()(y,2),E=b[0],_=b[1],O=Object(L.useCtrl)().handleFilterChanged,k=Object(L.useModelState)(),C=k.currentFilters,T=k.screenWidthInfo;C=C||[];var I=Object(R.useCallback)((function(){_(!0)}),[]),S=Object(R.useCallback)((function(){_(!1)}),[]),N=Object(R.useCallback)((function(){g(!0),_(!0)}),[]),P=Object(R.useCallback)((function(){g(!1),_(!1)}),[]),w=Object(R.useCallback)((function(e){var t=e.value,n=e.type;if(h){var o=r.findIndex((function(e){return e.value==t&&e.type==n}));a(o>-1?[].concat(i()(r.slice(0,o)),i()(r.slice(o+1))):[].concat(i()(r),[e]))}else D([e])}),[h,r]),x=Object(R.useCallback)((function(){r.length>0&&(D(r),P())}),[r]),D=function(e){var n={type:t.type,clientType:t.clientType,describe:t.name,items:e};C.push(n),O(C)},A=H()({list_cate_content_left:o,list_cate_content:!0,basefix:!0,list_cate_height:!h&&!E}),B=H()({list_area_box:!0,multiple_choice_box:h});return Object(R.useEffect)((function(){if(null!==s&&void 0!==s&&s.current){var e=s.current.getBoundingClientRect().height;f(e>55)}}),[T]),j.a.createElement("div",{className:A},!h&&j.a.createElement("div",{className:"list_cate_right"},l&&j.a.createElement("span",{className:"list_multiple_choice",onClick:N},"\u591a\u9009",j.a.createElement("i",{className:"icon_list_add"})),p&&j.a.createElement("span",{className:E?"list_more_up":"list_more_down",onClick:E?S:I},E?"\u6536\u8d77":"\u66f4\u591a",j.a.createElement("i",null))),j.a.createElement("div",{className:"list_cate_left"},o&&j.a.createElement("div",{className:"list_cate_content_title"},n.name,"\uff1a"),j.a.createElement("div",{className:B},j.a.createElement("div",{ref:s,className:"basefix"},n.items.map((function(e){var t=e.name,n=e.type,a=e.value,i=e.percent,o=Math.round(100*i),c=r?r.find((function(e){return e.value==a&&e.type==n})):null;return j.a.createElement("span",{key:"".concat(a,"-").concat(t),className:c?"cur":"",onClick:function(){w(e)}},t,i>0&&j.a.createElement(j.a.Fragment,null,"\xa0(",j.a.createElement("em",{className:"list_blue_text"},o,"%"),"\u9009\u62e9)"))}))),h&&j.a.createElement("p",{className:"multiple_choice_btn"},j.a.createElement("i",{className:"multiple_choice_cancel",onClick:P},"\u53d6\u6d88"),j.a.createElement("i",{className:"multiple_choice_yes ".concat(r.length?"":"multiple_choice_gray"),onClick:x},"\u786e\u8ba4")))))};var Fo=function(e){var t,n=e.info,r=Object(R.useState)([]),a=c()(r,2),i=a[0],o=a[1],l=(null===(t=n.layerItems)||void 0===t?void 0:t.length)>1;return j.a.createElement("div",{className:"list_cate_select basefix"},j.a.createElement(ko,{title:n.name,type:n.type}),j.a.createElement(j.a.Fragment,null,n.layerItems.map((function(e,t){var r;return j.a.createElement(Mo,{key:t,filterInfo:n,contentInfo:e,selected:i,setSelected:o,shouldRenderSubTitle:l,showMultiBtn:(null===(r=e.items)||void 0===r?void 0:r.length)>1})}))))};var Vo=function(e){var t=e.isMaldivesCase,n=e.contentEle,r=e.isMulti,a=e.isMore;try{if(t&&(!r&&!a)&&n.current){var i=n.current.clientHeight+8;return{height:Math.min(i,188)}}}catch(o){return{}}return{}},Ho=function(e){var t=e.info,n=e.isPrefer,r=e.showMultiBtn,a=e.isMaldivesCase,i=Object(R.useRef)(null),o=Wa(t),l=La(t),s=Ba(t),u=(Object(L.useModelState)().search.keyword,za(t)),d=Object(R.useState)(!1),p=c()(d,2),f=p[0],m=p[1],v=Object(R.useState)(!1),h=c()(v,2),g=h[0],y=h[1],b={isMore:g,isMulti:f},E={onMoreBtnClick:Object(R.useCallback)((function(){y(!0)}),[]),onCollapseBtnClick:Object(R.useCallback)((function(){y(!1)}),[]),onMultiBtnClick:Object(R.useCallback)((function(){m(!0),y(!0)}),[]),onCancelBtnClick:Object(R.useCallback)((function(){m(!1),y(!1)}),[])};if(u)return j.a.createElement(Fo,{info:t});if(n||o){var _=H()({list_cate_select:!0,basefix:!0,list_cate_height:!f&&!g&&!Ha(t)}),O=Vo({isMaldivesCase:a,contentEle:i,isMulti:f,isMore:g});return j.a.createElement("div",{className:_,style:O},j.a.createElement(ko,{title:t.name,type:t.type}),j.a.createElement("div",{className:"list_cate_content basefix"},j.a.createElement(Bo,{info:t,isPrefer:n,status:b,tools:E,showMultiBtn:r,contentEle:i,isMaldivesCase:a})))}return l||s?j.a.createElement(Uo,{info:t,isMarketing:l,isService:s}):null};var Go=function(e){var t=e.title,n=e.isFolded,r=e.onTitleClick,a=H()({list_filter_title:!0,cur:!n});return j.a.createElement("div",{className:"list_cate_select basefix"},j.a.createElement("div",{className:"list_cate_title"},"\u9ad8\u7ea7\u7b5b\u9009"),j.a.createElement("div",{className:"list_cate_filter basefix"},j.a.createElement("div",{className:a},j.a.createElement("span",{className:"list_filter_title_text",onClick:r},t,j.a.createElement("i",{className:"list_filter_title_icon"})))))},qo=function(e){var t=e.filters;return j.a.createElement("div",{className:"list_cate_select_more"},t.map((function(e){var t=e.type,n=e.items;return j.a.createElement(Ho,{key:t,info:e,showMultiBtn:(null===n||void 0===n?void 0:n.length)>1})})))},zo=function(e){var t=e.filters,n=Object(L.useModelState)(),r=n.isBestone,a=n.currentFilters,i=n.search.keyword,o=n.currentTabInfo.id,l=(a=a||[]).filter((function(e){return Wa(e)&&!ti(e)})).some((function(e){return!ya(e.type,i,o,r)})),s=Object(R.useState)(!l),u=c()(s,2),d=u[0],p=u[1],f=t.map((function(e){return e.name})).join(" / "),m=Object(R.useCallback)((function(){p((function(e){return!e}))}),[]);return j.a.createElement(j.a.Fragment,null,!l&&j.a.createElement(Go,{title:f,isFolded:d,onTitleClick:m}),!d&&j.a.createElement(qo,{filters:t}))};function Yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qo=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(e=e||[]).map((function(e){var t=Wo(Wo({},e),{},{items:e&&e.items?e.items.filter((function(e){return e.name!=e.value})):[]});if(0==t.items.length){var n={name:"\u5df2\u9009\u62e9".concat(e.items.length,"\u9879"),value:"slot"};t.items.push(n)}return t})),n=e.find(ai),r=e.find(ii),a=e.find(oi),i=e.find(ci),o=Jo({minPrice:n,maxPrice:r,beginDate:a,endDate:i}),c=o.price,l=o.date;return c&&t.unshift(c),l&&t.unshift(l),t.filter(Xa)},Ko=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.describe,n=e.items.map((function(e){return e.name})).filter(Boolean).join("\uff0c");return Ua(e)?t:"".concat(t," | ").concat(n)},Jo=function(e){var t=e.minPrice,n=e.maxPrice,r=e.beginDate,a=e.endDate,i={},o=t?t.items[0].value:0,c=n?n.items[0].value:0,l=r?r.items[0].name:"",s=a?a.items[0].name:"";return(o||c)&&(i.price={type:"Price",describe:"\u4ef7\u683c\u533a\u95f4",items:[{name:li([o,c],"price")}]}),(l||s)&&(i.date={type:"Date",describe:"\u51fa\u53d1\u65e5\u671f",items:[{name:li([l,s],"date")}]}),i},Xo=function(){var e=Object(L.useModelState)(),t=e.currentFilters,n=e.screenWidthInfo,r=Object(L.useCtrl)().handleFilterChanged,a=Object(R.useRef)(null),o=Object(R.useState)(!1),l=c()(o,2),s=l[0],u=l[1],d=Object(R.useState)(!1),p=c()(d,2),f=p[0],m=p[1],v=Object(R.useCallback)((function(){m(!0)}),[]),h=Object(R.useCallback)((function(){m(!1)}),[]),g=H()({list_choose_select:!0,basefix:!0,list_choose_height:!f}),y=i()(t),b=Qo(t);return Object(R.useEffect)((function(){if(null!==a&&void 0!==a&&a.current){var e=a.current.getBoundingClientRect().height;u(e>55)}}),[n]),b&&b.length?j.a.createElement("div",{className:g},j.a.createElement("div",{className:"list_choose_title"},"\u60a8\u5df2\u9009\u62e9"),j.a.createElement("div",{className:"list_choose_content basefix"},j.a.createElement("div",{className:"list_cate_right"},j.a.createElement("span",{className:"list_multiple_choice",onClick:function(){r([])}},"\u6e05\u7a7a"),s&&j.a.createElement("span",{className:f?"list_more_up":"list_more_down",onClick:f?h:v},f?"\u6536\u8d77":"\u66f4\u591a",j.a.createElement("i",null))),j.a.createElement("div",{ref:a,className:"list_choose_left"},b.map((function(e){var t=e.type;return j.a.createElement("div",{key:t,className:"list_choose_tip"},j.a.createElement("span",{className:"list_choose_text"},Ko(e)),j.a.createElement("span",{className:"list_choose_cha_box",onClick:function(){!function(e){if(["Price","Date"].includes(e))"Price"==e&&(y=y.filter((function(e){return!ai(e)&&!ii(e)}))),"Date"==e&&(y=y.filter((function(e){return!oi(e)&&!ci(e)}))),r(y);else{var t=y.findIndex((function(t){return t.type==e}));t>-1&&(y.splice(t,1),r(y))}}(t)}},j.a.createElement("i",{className:"list_choose_cha"})))}))))):null};var Zo=function(){var e=Object(L.useModelState)(),t=e.total,n=e.pageNumber,r=Object(L.useCtrl)().handlePageChanged,a=Math.ceil(t/Kn.U),i=1==n,o=n==a,c=function(e){"left"!=e||i||r(n-1),"right"!=e||o||r(n+1)};return j.a.createElement("div",{className:"list_paging_box basefix"},j.a.createElement("span",{className:"list_paging_left ".concat(i?"gray_cur":""),"data-page-left":n-1,onClick:function(){c("left")}},j.a.createElement("i",{className:"icon_list_paging_left"})),j.a.createElement("span",{className:"list_paging_text"},j.a.createElement("em",null,n),"/",a),j.a.createElement("span",{className:"list_paging_right ".concat(o?"gray_cur":""),"data-page-right":n+1,onClick:function(){c("right")}},j.a.createElement("i",{className:"icon_list_paging_right"})))};function $o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ec(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$o(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tc=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={showPriceRange:!1,priceRange:[]};if(null!==t&&void 0!==t&&null!==(e=t[0])&&void 0!==e&&e.items.length){var r=t[0].items.map((function(e){var t;return ec(ec({},e),{},{percent:e.percent||Number((null===e||void 0===e||null===(t=e.extras)||void 0===t?void 0:t.PERCENT)||"")||0})}));n.showPriceRange=!0,n.priceRange=nc(r)}return n},nc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e.map((function(e){return e.percent})),n=.9/Math.max.apply(Math,i()(t));return e.map((function(e){var t=(e.type.endsWith("-")?"".concat(e.type,"0"):e.type).split("-"),r=c()(t,2),a=r[0],i=r[1],o=e.percent*n;return ec(ec({},e),{},{min:Number(a),max:Number(i),enhancedPercent:o})}))},rc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={initialMinPrice:0,initialMaxPrice:0},n=(e=e||[]).find((function(e){return"min"==e.clientType})),r=e.find((function(e){return"max"==e.clientType}));return n&&(t.initialMinPrice=n.items[0].value),r&&(t.initialMaxPrice=r.items[0].value),t},ac=function(e){var t=e.minHover,n=e.minPrice,r=e.maxHover,a={renderMinPrice:n||"",renderMaxPrice:e.maxPrice||""};return e.hoverIndex>-1&&(a.renderMinPrice=t||"",a.renderMaxPrice=r||""),a},ic=function(e){var t=e?"trade":"normal";return Kn.a.find((function(e){return e.key==t})).text},oc=function(e,t){return e==t},cc=function(e){var t=e.info,n=Object(R.useRef)(null),r=Object(L.useCtrl)(),a=r.handleFilterChanged,i=r.handleChangeBestoneFilterType,o=Object(L.useModelState)(),l=o.currentFilters,s=o.isBestone,u=o.isTradeFilter;l=l||[];var d=tc(t),p=d.showPriceRange,f=d.priceRange,m=rc(l),v=m.initialMinPrice,h=m.initialMaxPrice,g=Object(R.useState)(0),y=c()(g,2),b=y[0],E=y[1],_=Object(R.useState)(0),O=c()(_,2),k=O[0],C=O[1],T=Object(R.useState)(v),I=c()(T,2),S=I[0],N=I[1],P=Object(R.useState)(h),w=c()(P,2),x=w[0],D=w[1],A=Object(R.useState)(!1),B=c()(A,2),U=B[0],M=B[1],F=Object(R.useState)(-1),V=c()(F,2),H=V[0],G=V[1],q=Object(R.useCallback)((function(e,t){var n=c()(t,2),r=n[0],a=n[1];G(e),E(r),C(a)}),[]),z=Object(R.useCallback)((function(e){n.current.contains(e.target)||M(!1)}),[n]),Y=Object(R.useCallback)((function(){M(!0)}),[]),W=Object(R.useCallback)((function(e,t){var n=e.target?e.target.value.trim():"";n=n.replace(/\D/g,""),n=Math.min(Number(n),Jt),"min"==t?N(n):D(n)}),[]),Q=Object(R.useCallback)((function(){if(S&&x&&S>x){var e=S;N(x),D(e)}}),[S,x]),K=Object(R.useCallback)((function(){(S||x)&&(N(0),D(0))}),[S,x]),J=Object(R.useCallback)((function(){$({min:{name:S,value:S},max:{name:x,value:x}})}),[S,x]),X=Object(R.useCallback)((function(e){var t=c()(e,2),n=t[0],r=t[1];$({min:{name:n,value:n},max:{name:r,value:r}})}),[]),Z=Object(R.useCallback)((function(e){var t=Boolean("trade"===e);i(t)}),[]),$=function(e){var t=e.min,n=e.max,r=l.find((function(e){return"min"==e.clientType})),i=l.find((function(e){return"max"==e.clientType}));r?r.items=[t]:l.push({type:"minPrice",clientType:"min",describe:"\u4ef7\u683c\u533a\u95f4",items:[t]}),i?i.items=[n]:l.push({type:"maxPrice",clientType:"max",describe:"\u4ef7\u683c\u533a\u95f4",items:[n]}),a(l)};Object(R.useEffect)((function(){return document.addEventListener("click",z),function(){document.removeEventListener("click",z)}}),[z]);var ee=ac({minHover:b,minPrice:S,maxHover:k,maxPrice:x,hoverIndex:H}),te=ee.renderMinPrice,ne=ee.renderMaxPrice;return j.a.createElement(j.a.Fragment,null,s&&j.a.createElement("div",{className:"list_recommend_distance"},j.a.createElement("span",{className:"list_distance_text"},ic(u),j.a.createElement("i",null)),j.a.createElement("div",{className:"list_distance_box",style:{width:"60px"}},Kn.a.map((function(e){var t=e.key,n=e.text;return j.a.createElement("p",{key:n,className:"list_distance_tip",onClick:function(){Z(t)}},n)})))),p&&j.a.createElement("div",{className:"list_histogram_box basefix"},f.map((function(e,t){var n=e.min,r=e.max,a=e.percent,i=e.enhancedPercent,o=Math.round(100*a);return j.a.createElement("div",{key:t,className:"list_histogram_border",onMouseEnter:function(){q(t,[n,r])},onMouseLeave:function(){q(-1,[0,0])},onClick:function(){X([n,r])}},j.a.createElement("span",{className:"list_histogram_bg",style:{height:"".concat(100*i,"%")}}),oc(H,t)&&j.a.createElement("div",{className:"list_histogram_pop"},j.a.createElement("span",{className:"list_histogram_tips"},o,"%\u7528\u6237\u559c\u6b22\u7684\u4ef7\u4f4d"),j.a.createElement("span",{className:"list_histogram_arrdown"})))}))),j.a.createElement("div",{className:"money_prise_k ".concat(U?"money_prise_k_focused":"")},j.a.createElement("div",{ref:n,className:"money_field"},j.a.createElement("label",{htmlFor:"search-input-min-price",style:{display:"none"}},"\u6700\u4f4e\u4ef7\u683c"),j.a.createElement("input",{type:"number",id:"search-input-min-price",className:"money_input_range",value:te,style:{width:53},placeholder:"\u6700\u4f4e\u4ef7\u683c",onFocus:Y,onChange:function(e){W(e,"min")},onBlur:Q}),"\xa0\xa0\uff5e\xa0\xa0",j.a.createElement("label",{htmlFor:"search-input-max-price",style:{display:"none"}},"\u6700\u9ad8\u4ef7\u683c"),j.a.createElement("input",{type:"number",id:"search-input-max-price",className:"money_input_range",value:ne,style:{width:53},placeholder:"\u6700\u9ad8\u4ef7\u683c",onFocus:Y,onChange:function(e){W(e,"max")},onBlur:Q}),j.a.createElement("div",{className:"money_ctrl"},j.a.createElement("span",{id:"price-input-clear",className:"money_ctrl_btn money_ctrl_btn_chancel ".concat(te||ne?"":"money_ctrl_gray"),onClick:K},"\u6e05\u7a7a"),j.a.createElement("span",{id:"price-input-submit",className:"money_ctrl_btn",onClick:J},"\u786e\u8ba4")))))};var lc=function(e){var t=e.isVisible,n=Object(L.useCtrl)().handleBackToFilterBoxTop,r=t?{}:{display:"none"};return j.a.createElement("span",{className:"list_recommend_top",style:r,onClick:n},"\u56de\u5230\u9876\u90e8\u7b5b\u9009",j.a.createElement("i",null))};var sc=function(){var e=Object(R.useRef)(!1);return Object(R.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e};var uc=function(e){e.stickBoxEl;var t=e.scrollPointEl,n=Object(R.useState)(!1),r=c()(n,2),a=r[0],i=r[1];return Object(R.useEffect)((function(){var e=0,n=S.a.throttle((function(){var n,r=function(){var t=window.pageYOffset-e;return e=window.pageYOffset,t>0?"UP":"DOWN"}(),a=!!(n=t.current)&&n.getBoundingClientRect().top>0;"UP"!=r||a||i(!0),"DOWN"==r&&a&&i(!1)}),50);return document.addEventListener("scroll",n),function(){document.removeEventListener("scroll",n)}}),[]),a},dc=(n(515),n(526)),pc=n(527);var fc=function(e){var t=e.slotInfo,n=e.isMainSlot,r=t.marketingFilters,a=t.serviceFilters,i=t.isBestone;if(n){if(i)return null;if(gc(r))return j.a.createElement(j.a.Fragment,null,r.map((function(e){return j.a.createElement(Ho,{key:e.type,info:e})})))}else if(i){if(gc(r)||gc(a)){var o=gc(r)&&gc(a);return j.a.createElement("div",{className:"list_checklist_box basefix"},r.map((function(e){return j.a.createElement(Ho,{key:e.type,info:e})})),o&&j.a.createElement("span",{className:"line"}),a.map((function(e){return j.a.createElement(Ho,{key:e.type,info:e})})))}}else if(gc(a))return j.a.createElement("div",{className:"list_checklist_box basefix"},a.map((function(e){return j.a.createElement(Ho,{key:e.type,info:e})})));return null},mc=function(e){return{normalFilters:(e=e||[]).filter(Wa),marketingFilters:e.filter(La),serviceFilters:e.filter(Ba),priceRangeFilters:e.filter(Ma)}},vc=function(e,t,n,r){return{exposedFilters:(e=hc(e)||[]).filter((function(e){return ya(e.type,t,n,r)})),hiddenFilters:e.filter((function(e){return!ya(e.type,t,n,r)}))}},hc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e=e||[],n=e.findIndex(Ha),r=e.filter(Ha);return r.length&&t.splice(n,r.length,{type:"DepartureDate",name:"\u51fa\u53d1\u65f6\u95f4",clientType:"dd",isMergeDate:!0,items:S.a.flatten(r.map((function(e){return e.items})))}),t},gc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Boolean(e.length)},yc=function(e,t){return"\u9a6c\u5c14\u4ee3\u592b"==e&&t.type==Kn.p},bc=function(){var e=Object(R.useRef)(null),t=Object(R.useState)(0),n=c()(t,2),r=n[0],a=n[1],i=uc({stickBoxEl:v,scrollPointEl:e}),o=Object(L.useModelState)(),l=o.total,s=o.prefers,u=o.totalFilters,d=o.currentFilters,p=o.isBestone,f=(o.screenWidthInfo,o.search.keyword),m=o.currentTabInfo.id,v=Object(R.useCallback)((function(e){if(null!==e){var t=e.getBoundingClientRect().height;a(t)}}),[]),h=mc(u),g=h.normalFilters,y=h.marketingFilters,b=h.serviceFilters,E=h.priceRangeFilters,_=vc(g,f,m,p),O=_.exposedFilters,k=_.hiddenFilters,C={marketingFilters:y,serviceFilters:b,isBestone:p};return function(e,t){return!e&&(!t||!t.length)}(l,d)?null:ia(l,d)?j.a.createElement("div",{className:"list_newse_filter"},j.a.createElement(Xo,null)):j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{id:"filter_box_point",className:"list_newse_filter"},gc(s)&&j.a.createElement(Ho,{info:{name:"\u4e3a\u60a8\u63a8\u8350",items:s},isPrefer:!0,showMultiBtn:(null===s||void 0===s?void 0:s.length)>1}),gc(O)&&O.map((function(e){var t=e.type,n=e.items,r=yc(f,e);return j.a.createElement(Ho,{key:t,info:e,showMultiBtn:(null===n||void 0===n?void 0:n.length)>1,isMaldivesCase:r})})),gc(k)&&j.a.createElement(zo,{filters:k}),j.a.createElement(Xo,null)),j.a.createElement("div",{ref:e,style:{position:"relative"}}),j.a.createElement("div",{ref:v,className:"list_stick_box ".concat(i?"list_stick_fixed":"")},j.a.createElement("div",{className:"list_recommend_box"},j.a.createElement("div",{className:"list_recommend_content basefix"},j.a.createElement(Oo,null),j.a.createElement(cc,{info:E}),j.a.createElement(fc,{slotInfo:C,isMainSlot:!0}),j.a.createElement(Zo,null),j.a.createElement(lc,{isVisible:i})),j.a.createElement(fc,{slotInfo:C,isMainSlot:!1}))),j.a.createElement("div",{style:{height:i?r:0}}))};function Ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _c=function(){var e=sc(),t=Object(L.useModelState)(),r=t.currentTabInfo,a=t.currentFilters,i=t.departureCity,o=t.serverPoiPath,l=t.isOffline,s=t.isBestone,u=(r||{}).id,d=(i||{}).cityId,p=Object(R.useRef)(null),f=Object(R.useReducer)((function(e){return e+1}),0),m=c()(f,2),v=(m[0],m[1]);Object(R.useEffect)((function(){s&&n.e(3).then(n.t.bind(null,838,7)).then((function(e){p.current=e.NewFhxEntry,v()})).catch((function(e){}))}),[s]);var h=p&&p.current;if(!h)return null;if(!e.current)return null;if(function(e){return Boolean(e&&e.length)}(a))return null;if(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isOffline;if(n)return!1;if(e){var r=S.a.find(jn,(function(t){return t&&t.id==e}));return!!r&&r.showDpSearchEntry}return!1}(u,{isOffline:l})&&d>0){var g=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ec(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ec(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({marginBottom:16},s?{marginTop:0}:null),y=o&&o.length?o[0]:null;return s?j.a.createElement(h,{type:"list_search",departCityId:d,wrapperStyle:g,channel:"isBestone",jumpIsBlank:!0,entranceParams:y,shoppingCartConfig:{home:{showFlightHotelTab:!0,showTrainHotelTab:!1,showTicketHotelTab:!0}}}):null}return null};function Oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cc=function(e){return!e.isOffline},Tc=function(e){return Ar(e)},Ic=function(e){var t,n=(e||{}).product,r=Object(L.useModelState)(),a=r.isOffline,i=r.currentTabInfo.id;if(!Cc({isOffline:a}))return null;if(!n)return null;var o=vi(n),c=n||{},l=c.basicInfo,s=c.tagGroups,u=c.vehicle,d=c.formatPreSaleInfo,p=l||{},f=p.mainName,m=p.mediaInfo,v=p.extras,h=((d||{}).isPreSale,null===m||void 0===m||null===(t=m.images)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.url),g={width:210,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},y=null===v||void 0===v?void 0:v.TYPE_NAME,b=(null===s||void 0===s?void 0:s.find((function(e){return"FAVORITE_TAG"==e.groupCode})))||{},E=(null===b||void 0===b?void 0:b.tags)||[],_=(null===E||void 0===E?void 0:E.length)>0,O=o,k=u;return j.a.createElement("div",{className:"list_product_left",style:{marginRight:16}},j.a.createElement("div",{className:"bg-gray-skeleton",style:kc(kc({},g),{},{width:"100%",height:"100%"})}),j.a.createElement("img",{className:"list_product_pic",src:dr.o(h)||Kn.W,style:g,alt:f,title:f,loading:"lazy",onError:function(e){e.target.onerror=null,e.target.src=Kn.W}}),j.a.createElement("p",{className:"list_product_tip truncate",style:{maxWidth:150}},j.a.createElement("span",{className:"list_product_name"},y||"\u65c5\u6e38"),O&&j.a.createElement("i",{className:"list_product_heng"}),O&&j.a.createElement("span",{className:"list_product_place"},o.cityText)),k&&Tc(i)&&j.a.createElement("p",{className:"list_product_black absolute bottom-0 box-border w-full"},u),_&&j.a.createElement("i",{className:"list_product_collect"}))};var Sc=function(e){return e.isOffline},Nc=function(e){var t=(e||{}).product,n=Object(L.useModelState)().isOffline;if(!Sc({isOffline:n}))return null;if(!t)return null;var r=((t||{}).basicInfo||{}).extras,a=null===r||void 0===r?void 0:r.TYPE_NAME;return j.a.createElement("span",{className:"list_offline_tip"},a)},Pc=["as","html","innerRef","children"];function wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xc(e,t,n){return t=_()(t),v()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],_()(e).constructor):t.apply(e,n))}var Dc=function(e){function t(){return d()(this,t),xc(this,t,arguments)}return k()(t,e),f()(t,[{key:"render",value:function(){var e=this.props,t=e.as,n=e.html,r=e.innerRef,a=e.children,i=Dt()(e,Pc);return Object(R.createElement)(t,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wc(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({dangerouslySetInnerHTML:{__html:n},ref:r},i),a)}}]),t}(R.Component);function Rc(e){var t=(e||{}).product||{},n=t.basicInfo,r=t.needTailoring,a=null!==n&&void 0!==n&&n.level?parseInt(n.level):0;if(!(Boolean(a&&a>=1)&&!r))return null;var i="//pic.c-ctrip.com/VacationOnlinePic/tourpic/group_travel/list/diamond_".concat(a,".png"),o="".concat(a,"\u94bb");return j.a.createElement("img",{src:i,alt:o,style:{height:16,paddingLeft:4,marginBottom:-2}})}function jc(e){return((e||{}).product||{}).isOptimal?j.a.createElement("span",{className:"list_product_youxuan"},"\u4f18\u9009"):null}function Ac(e){var t=((e||{}).product||{}).youxue,n=void 0===t?[]:t;return j.a.createElement(j.a.Fragment,null,n.map((function(e,t){var n=(e||{}).tagFlag,r=H()({list_jin_icon:n==Kn.Cb,list_yin_icon:n==Kn.Db});return j.a.createElement("i",{key:t,className:r})})))}T()(Dc,"propTypes",{as:F.a.string,html:F.a.string,innerRef:F.a.func}),T()(Dc,"defaultProps",{as:"div",html:""});var Lc=function(e,t){if(!e||S.a.isEmpty(t))return e;t=S.a.isArray(t)?t:[t];for(var n=e||"",r=0;r<t.length;r++)n=n.replace(new RegExp("(".concat(t[r],")"),"ig"),'<span class="list_highlight_text">$1</span>');return n},Bc=function(e){var t=(e||{}).product,n=t||{},r=n.basicInfo,a=n.highlightText,i=r||{},o=i.mainName,c=i.subName;if(!t||!o)return null;var l=Lc(o,a);return j.a.createElement(j.a.Fragment,null,j.a.createElement("p",{className:"list_product_title",title:o},j.a.createElement(Nc,{product:t}),j.a.createElement(jc,{product:t}),j.a.createElement(Ac,{product:t}),j.a.createElement(Dc,{as:"span",html:l}),j.a.createElement(Rc,{product:t})),!!c&&j.a.createElement("p",{className:"list_product_subtitle",title:c},c))};function Uc(e){var t=e.commentScore,n=+t>0?(+t).toFixed(1):"";return n?j.a.createElement("span",{className:"list_product_score"},j.a.createElement("span",null,n),"\u5206"):null}function Mc(e){var t=e.travelDesc,n=e.commentCount;return j.a.createElement(j.a.Fragment,null,j.a.createElement("span",{className:"list_product_travel"},t),n>0&&j.a.createElement("span",{className:"list_travel_comment_separator"}))}function Fc(e){e.type;var t=e.commentCount;e.commentVisible,e.onCommentClick;return t>0?j.a.createElement("span",{className:"list_product_comment"},t,"\u6761\u70b9\u8bc4"):null}var Vc=function(e){var t=e||{},n=t.product,r=t.commentVisible,a=t.onCommentClick,i=n||{},o=i.basicInfo,c=i.statistics,l=(o||{}).extras,s=null===l||void 0===l?void 0:l.TYPE,u=c||{},d=u.commentInfo,p=u.orderInfo,f=null===d||void 0===d?void 0:d.score,m=null===d||void 0===d?void 0:d.count,v=p||{},h=v.touristCounts,g=v.saleCounts,y=(h||{}).TotalDesc,b=(g||{}).TotalDesc,E=s==Kn.fb?b:y;return!f&&!E&&!m?null:j.a.createElement("div",{className:"list_tiny_comment_box"},j.a.createElement(Uc,{commentScore:f}),j.a.createElement(Mc,{travelDesc:E,commentCount:m}),j.a.createElement(Fc,{type:s,commentCount:m,commentVisible:r,onCommentClick:a}))};var Hc=function(e){return e?"vac-".concat(e,"-recommend-share"):""},Gc=function(e){var t=(e||{}).product,n=Object(L.useModelState)(),r=n.isOffline,a=n.pageId,i=Object(L.useCtrl)().getOnlineProductDetailUrl,o=Object(R.useState)(!1),l=c()(o,2),s=l[0],u=l[1],d=Object(R.useRef)(null),p=i(t),f=Hc(a),m=Object(R.useCallback)((function(e){e.stopPropagation();var t=document.createElement("input");t.setAttribute("value",p),d.current.appendChild(t),t.select(),document.execCommand("copy")&&(document.execCommand("copy"),u(!0),setTimeout((function(){return u(!1)}),2e3)),d.current.removeChild(t)}),[d,p]);return r?j.a.createElement("span",{className:"list_offline_btn",onClick:m,ref:d,id:f},"\u590d\u5236\u5916\u7f51\u94fe\u63a5",j.a.createElement("div",{className:"copy_tip_box",style:{display:s?"inherit":"none"}},j.a.createElement("b",{className:"tip_triangle"}),"\u5916\u7f51\u94fe\u63a5\u5df2\u590d\u5236")):null};function qc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qc(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yc=function(e){var t=e||{},n=t.isCtripDiy,r=t.isProxyDiy,a=t.formatPriceInfo||{},i=a.customOriginalPrice,o=a.customPreferentialAmount,c=a.customPreferentialPriceDetails,l=a.customPrice,s=a.minPriceRemark,u=[],d=c.map((function(e){var t=(e||{}).preferentialTitle;return u.includes(t)?zc(zc({},e),{},{shouldNotRenderTitle:!0}):(u.push(t),e)}));return j.a.createElement("div",{className:"preferential_wrapper"},j.a.createElement("div",{className:"preferential_container"},j.a.createElement("div",{className:"preferential_block_before"},j.a.createElement("div",{className:"preferential_title","data-testid":"base_tour_fee"},n||r?"\u5957\u9910\u8d39":"\u57fa\u672c\u56e2\u8d39"),j.a.createElement("div",{className:"preferential_title_price"},j.a.createElement("span",{className:"preferential_title_price_prefix"},"\u6bcf\u6210\u4eba"),j.a.createElement("span",{className:"preferential_title_price_mark"},"\xa5"),j.a.createElement("span",{className:"preferential_title_price_number"},Math.floor(i)))),j.a.createElement("div",{className:"preferential_block_detail"},j.a.createElement("div",{className:"preferential_detail_title"},j.a.createElement("div",{className:"preferential_title","data-testid":"preferential_detail_title"},"\u4f18\u60e0"),j.a.createElement("div",{className:"preferential_title_price"},j.a.createElement("span",{className:"preferential_title_price_prefix"},"\u6bcf\u6210\u4eba"),j.a.createElement("span",{className:"preferential_title_price_mark"},"- \xa5"),j.a.createElement("span",{className:"preferential_title_price_number"},Math.floor(o)))),j.a.createElement("div",{className:"preferential_detail_list","data-testid":"preferential_detail_content"},d.map((function(e,t){var n=e||{},r=n.shouldNotRenderTitle,a=n.preferentialTitle,i=(n.preferentialType,n.preferentialName),o=n.preferentialPrice;return j.a.createElement("div",{key:t,className:"preferential_detail_item"},!r&&j.a.createElement("div",{className:"preferential_detail_item_type"},j.a.createElement("div",{className:"preferential_detail_item_label"},a)),j.a.createElement("div",{className:"preferential_detail_item_content"},j.a.createElement("div",{className:"preferential_detail_item_describe"},i),j.a.createElement("div",{className:"preferential_detail_item_price"},j.a.createElement("span",null,"- \xa5"),j.a.createElement("span",null,Math.floor(o)))))}))),j.a.createElement("div",{className:"preferential_detail_suffix"},"*\u5177\u4f53\u4f18\u60e0\u91d1\u989d\u4ee5\u63d0\u4ea4\u8ba2\u5355\u663e\u793a\u4e3a\u51c6")),j.a.createElement("div",{className:"preferential_block_after"},j.a.createElement("div",{className:"preferential_title","data-testid":"current_starting_price"},"\u5f53\u524d\u8d77\u4ef7"),j.a.createElement("div",{className:"preferential_title_price"},j.a.createElement("span",{className:"preferential_title_price_prefix"},"\u6bcf\u6210\u4eba"),j.a.createElement("span",{className:"preferential_title_price_mark"},"\xa5"),j.a.createElement("span",{className:"preferential_title_price_number_big"},Math.floor(l)))),j.a.createElement("div",{className:"preferential_block_remark"},j.a.createElement("div",{className:"preferential_title","data-testid":"starting_price_description"},"\u8d77\u4ef7\u8bf4\u660e"),j.a.createElement("div",{dangerouslySetInnerHTML:{__html:s}}))))},Wc=n(607),Qc=["title","content","arrow","containerClassName","bodyClassName","titleClassName","prependedChildren","appendedChildren"];var Kc=function(e){var t=e||{},n=t.title,r=void 0===n?"":n,a=t.content,i=void 0===a?"":a,o=t.arrow,c=void 0===o||o,l=t.containerClassName,s=void 0===l?"base_alert_down02":l,u=t.bodyClassName,d=void 0===u?"alert_info":u,p=t.titleClassName,f=void 0===p?"zhuanji_title":p,m=t.prependedChildren,v=t.appendedChildren,h=Dt()(t,Qc),g="boolean"===typeof c&&c?j.a.createElement(j.a.Fragment,null,j.a.createElement("b",null),j.a.createElement("i",null)):"function"===typeof c?c(e):c,y="function"===typeof r?r(e):null,b="function"===typeof r?null:r,E="function"===typeof i?i(e):i;return r||i?j.a.createElement("div",U()({className:s},h),m,j.a.createElement("div",{className:d},y,b&&j.a.createElement("p",{className:f},r),E),g,v):null};function Jc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jc(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zc(e){var t=e.priceInfo,n=e.showPeerPrice,r=e.isCtripDiy,a=e.isProxyDiy,i=tl(t,n),o=i||{},c=o.isValidPrice,l=o.isValidOriginalPrice,s=o.isValidPreferentialAmount,u=o.isValidPreferentialPriceDetails;if(c&&l&&s&&u){var d,p=i||{},f=p.customPreferentialPriceDetails,m=p.customPreferentialAmount,v=null===(d=S.a.uniqBy(f,"preferentialTitle"))||void 0===d?void 0:d.map((function(e){return null===e||void 0===e?void 0:e.preferentialTitle})),h=j.a.createElement("div",{className:"list_pricetag_container"},v.map((function(e,t){var n=H()({list_pricetag_label:!0,list_pricetag_label_first:0===t});return j.a.createElement("span",{key:t,className:n},e)})),j.a.createElement("span",{className:"list_pricetag_display"},j.a.createElement("span",null,"\u5df2\u51cf".concat(Math.floor(m)))));return j.a.createElement(Wc.a,{trigger:h,position:"top right",on:"hover",mouseLeaveDelay:400,closeOnHoverContent:!1,contentStyle:{zIndex:99}},(function(e,t){return j.a.createElement(j.a.Fragment,null,j.a.createElement($c,{isCtripDiy:r,isProxyDiy:a,formatPriceInfo:i}),j.a.createElement("span",{className:"preferential_pop_arrow"}))}))}return null}function $c(e){var t=e.isCtripDiy,n=e.isProxyDiy,r=e.formatPriceInfo,a=j.a.createElement(Yc,{isCtripDiy:t,isProxyDiy:n,formatPriceInfo:r});return j.a.createElement(Kc,{content:a,arrow:!1,containerClassName:"preferential_wrapper"})}function el(e){var t=e.profit,n=e.isBestone,r=e.isTradePrice;return n&&r&&t>=0?j.a.createElement("span",{className:"tds_tip"},j.a.createElement("i",null,"\u5229"),t,"\u5143"):null}var tl=function(e,t){var n,r=e.preferentialPriceDetails,a=e.preferentialAmountDetails,i=e.price,o=e.tradePrice,c=e.originalPrice,l=e.originalTradePrice,s=function(e){return t?2===(null===e||void 0===e?void 0:e.channelType):1===(null===e||void 0===e?void 0:e.channelType)},u=t?o:i,d=t?l:c,p=null===r||void 0===r?void 0:r.filter(s),f=null===a||void 0===a||null===(n=a.find(s))||void 0===n?void 0:n.preferentialAmount,m=Boolean(u),v=Boolean(d),h=Boolean(f&&f>0),g=Boolean(p&&(null===p||void 0===p?void 0:p.length)>0);return Xc(Xc({},e),{},{isValidPrice:m,isValidOriginalPrice:v,isValidPreferentialAmount:h,isValidPreferentialPriceDetails:g,customPrice:u,customOriginalPrice:d,customPreferentialAmount:f,customPreferentialPriceDetails:p})},nl=function(e){var t=(e||{}).product,n=t||{},r=n.isLoaded,a=n.priceInfo,i=n.isCtripDiy,o=n.isProxyDiy,c=a||{},l=c.price,s=c.tradePrice,u=Object(L.useModelState)(),d=u.isBestone,p=u.isTradePrice,f=l-s,m=p?s:l,v=H()("list_sr_price_box basefix",{bestone_list_green:d&&p}),h=(a||{}).isNewPrice;if(r&&m>0){return j.a.createElement("div",{className:v},j.a.createElement(el,{profit:f,isBestone:d,isTradePrice:p}),j.a.createElement("div",{className:"list_sr_price"},j.a.createElement("dfn",null,"\uffe5"),j.a.createElement("strong",null,m),"\u8d77"),j.a.createElement(Gc,{product:t}),!!h&&j.a.createElement(Zc,{priceInfo:a,showPeerPrice:p,isCtripDiy:i,isProxyDiy:o}))}return r?j.a.createElement("div",{className:v},j.a.createElement("div",{className:"list_sr_price"},j.a.createElement("strong",null,"\u5b9e\u65f6\u8ba1\u4ef7")),j.a.createElement(Gc,{product:t})):null},rl=function(e){var t=e||{},n=t.product,r=t.handleCardClick,a=(n||{}).formatPreSaleInfo||{},i=a.isPreSale,o=a.preSaleId,c=a.title,l=a.price,s=a.description;return i?j.a.createElement("div",{className:"flex flex-row justify-between relative mt-4 p-8 rounded-4",style:{backgroundColor:"#f8fafd"},onClick:function(e){e.stopPropagation(),r({preSaleId:o})}},j.a.createElement("div",{className:"flex flex-row overflow-hidden",style:{height:18,lineHeight:"18px"}},j.a.createElement("div",{className:"mr-8 whitespace-nowrap"},j.a.createElement("span",{className:"text-12 font-bold color-gray-3"},c)),!!s&&j.a.createElement("div",{className:"mr-8 truncate"},j.a.createElement("span",{className:"text-12 color-gray-3 truncate"},s)),j.a.createElement("div",{className:"flex mr-8 text-11",style:{color:"#ff6600"}},j.a.createElement("dfn",{className:"text-10",style:{paddingTop:1}},"\xa5"),j.a.createElement("span",{style:{font:"13px tahoma"}},l),j.a.createElement("span",null,"\u8d77"))),j.a.createElement("div",{className:"text-12"},j.a.createElement("span",{className:"icon_base icon_arr_right color-gray-9",style:{verticalAlign:"-3px"}}))):null};var al=function(e){return e.isOffline},il=function(e){var t=e.product,n=Object(L.useModelState)().isOffline;if(!al({isOffline:n}))return null;var r=t||{},a=r.supportWishOrder,i=(r.supportTelConsulting,r.supportTelBooking);return j.a.createElement(j.a.Fragment,null,null!=a&&!a&&j.a.createElement("span",{className:"list_label_red"},"\u4e0d\u652f\u6301\u610f\u5411\u5355"),null!=i&&!i&&j.a.createElement("span",{className:"list_label_red"},"\u4e0d\u652f\u6301\u7535\u8bdd\u9884\u8ba2"))};function ol(e){var t=e.marketing,n=(e.promotions,e.isOffline);return j.a.createElement(j.a.Fragment,null,t.map((function(e,t){return j.a.createElement("span",{key:t,className:ll(e,n)},e.tagName)})))}function cl(e){var t=e.normal,n=e.presale,r=e.isOffline?[].concat(i()(t),i()(n)):t,a=null===r||void 0===r?void 0:r.filter((function(e){return!(null===e||void 0===e||!e.tagName)}));return j.a.createElement(j.a.Fragment,null,a.map((function(e,t){return j.a.createElement("span",{key:t,className:sl(e),title:e.tagTitle},j.a.createElement("span",null,e.tagName))})))}var ll=function(e,t){return e&&e.tagFlag&&Kn.eb.includes(e.tagFlag.toUpperCase())&&t?"list_label_multicolored":"list_label_yellow"},sl=function(e){return Kn.X.includes(e.tagId)?"list_label_red":"list_label_blue"},ul=function(e){var t=(e||{}).product,n=Object(L.useModelState)(),r=n.isOffline;if(n.currentTabInfo.id,!t)return null;var a=t||{},i=(a.level,a.type,a.tags),o=a.promotions,c=i||{},l=c.normal,s=void 0===l?[]:l,u=c.marketing,d=void 0===u?[]:u,p=c.presale,f=void 0===p?[]:p;return j.a.createElement("div",{className:"list_label_box"},j.a.createElement(il,{product:t}),j.a.createElement(ol,{marketing:d,promotions:o,isOffline:r}),j.a.createElement(cl,{normal:s,presale:f,isOffline:r}))};var dl=function(e){var t=e||{},n=t.product,r=t.isBestone,a=n||{},i=a.basicInfo,o=a.vendorInfo,c=a.saleMode,l=a.isGoldShop,s=(i||{}).extras,u=null===s||void 0===s?void 0:s.TYPE,d=o||{},p=d.brandName,f=d.vendorFullName;if(!n||!p)return null;if(u==Kn.fb)return null;var m=f,v=null;switch(c){case"S":case"P":v=j.a.createElement("p",{className:"list_product_retail",title:m},"\u4f9b\u5e94\u5546\uff1a",p);break;case"G":m="\u4e0a\u6d77\u643a\u7a0b\u56fd\u9645\u65c5\u884c\u793e\u6709\u9650\u516c\u53f8\uff0c".concat(f),v=j.a.createElement("p",{className:"list_product_retail",title:m},"\u4f9b\u5e94\u5546\uff1a\u8054\u5408\u53d1\u56e2");break;case"R":m="\u4e0a\u6d77\u643a\u7a0b\u56fd\u9645\u65c5\u884c\u793e\u6709\u9650\u516c\u53f8\uff0c".concat(f),v=j.a.createElement("p",{className:"list_product_retail",title:m},"\u96f6\u552e\u5546\uff1a",j.a.createElement("span",{className:"gray"},"\u7531"),p,j.a.createElement("span",{className:"gray"},"\u76f4\u552e\uff0c\u5e76\u63d0\u4f9b\u54a8\u8be2/\u9884\u8ba2/\u552e\u540e\u670d\u52a1"))}if(!r){if("\u643a\u7a0b\u81ea\u8425"==p)return j.a.createElement("p",{className:"list_product_retail",title:m},"\u4f9b\u5e94\u5546\uff1a",j.a.createElement("span",{className:"list_container_supplier_special"},j.a.createElement("i",{className:"list_icon_yoyo"},"\ue0ae"),p));if(l)return j.a.createElement("p",{className:"list_product_retail",title:m},"\u4f9b\u5e94\u5546\uff1a",j.a.createElement("span",{className:"list_container_supplier_special"},j.a.createElement("i",{className:"list_icon_wheat"},"\udb81\udeea"),"\u91d1\u724c\u5e97\u94fa",j.a.createElement("i",{className:"list_icon_wheat"},"\udb81\udeeb")),j.a.createElement("span",{style:{paddingLeft:5}},p))}return v};var pl=function(e){return e.isOffline},fl=function(e){return Ar(e)},ml=function(e){var t=(e||{}).product,n=Object(L.useModelState)(),r=n.isOffline,a=n.currentTabInfo.id;if(!pl({isOffline:r}))return null;if(!t)return null;var i=t||{},o=i.id,c=i.vehicle,l=vi(t),s=o>0,u=l,d=c;return j.a.createElement("p",{className:"offline_id_box"},s&&j.a.createElement("span",{className:"offline_id"},"ID\uff1a",o),u&&j.a.createElement(j.a.Fragment,null,j.a.createElement("i",{className:"offline_id_shu"}),j.a.createElement("span",{className:"offline_id_text"},l.cityText)),d&&fl(a)&&j.a.createElement(j.a.Fragment,null,j.a.createElement("i",{className:"offline_id_shu"}),j.a.createElement("span",{className:"offline_id_text"},c)))};function vl(e){var t=e.product,n=e.detailVisible,r=e.handleToggleDetail,a=Object(L.useModelState)().isOffline;if(!gl({isOffline:a}))return null;var i=t||{},o=i.riskScheduleReminder,c=i.isPackage;if(o){var l=H()({list_down:!n,list_up:n}),s=c?"\u98ce\u9669\u73ed\u671f\uff08A\u7ebf\uff09\uff1a":"\u98ce\u9669\u73ed\u671f\uff1a",u=n?"\u6536\u8d77":"\u66f4\u591a",d=yl(o);return j.a.createElement("div",{className:"list_product_schedule offline_product_schedule"},j.a.createElement("p",null,j.a.createElement("span",{className:"offline_red"},s),d,j.a.createElement("a",{href:"javascript:",className:"list_sea_schedule",onClick:function(e){e.stopPropagation(),r()}},u,j.a.createElement("b",{className:l}))))}return null}function hl(e){var t=e.product,n=e.currentFilters,r=t||{},a=r.riskScheduleReminder,i=r.isPackage;if(a){var o=bl({isPackage:i,currentFilters:n}),c="".concat(o,"<br/><br/>").concat(a);return j.a.createElement("div",{className:"offline_risk_table"},j.a.createElement(Dc,{as:"div",html:c,className:"offline_scroll_wrap"}))}return null}var gl=function(e){return e.isOffline},yl=function(e){return e.split("\u3001").slice(0,7).join("\u3001")},bl=function(e){var t=e.isPackage,n=(e.currentFilters,t?"\u3001A\u7ebf":"");return"\u4ec5\u5c55\u793a".concat("3\u4e2a\u6708\u5185").concat(n,"\u7684\u98ce\u9669\u73ed\u671f\uff1a")};var El=function(e){var t=e||{},n=t.product,r=t.currentFilters,a=t.isBestone,i=t.handleCardClick,o=t.commentVisible,c=t.onCommentClick,l=t.riskScheduleDetailVisible,s=t.handleToggleRiskScheduleDetail;return j.a.createElement(j.a.Fragment,null,j.a.createElement(ul,{product:n}),j.a.createElement(ml,{product:n}),j.a.createElement(Vc,{product:n,commentVisible:o,onCommentClick:c}),j.a.createElement("div",{className:"flex flex-col"},j.a.createElement("div",{className:"absolute"},j.a.createElement(dl,{product:n,isBestone:a})),j.a.createElement("div",{className:"flex flex-col"},j.a.createElement(nl,{product:n}),j.a.createElement(rl,{product:n,handleCardClick:i}))),j.a.createElement(vl,{product:n,detailVisible:l,handleToggleDetail:s}),l&&j.a.createElement(hl,{product:n,currentFilters:r}))},_l=function(){return j.a.createElement("div",{className:"relative",style:{height:111}},j.a.createElement("p",{className:"bg-gray-skeleton mb-8",style:{height:18}}),j.a.createElement("p",{className:"bg-gray-skeleton mb-8",style:{height:18}}),j.a.createElement("p",{className:"bg-gray-skeleton mb-8",style:{width:200,height:18}}),j.a.createElement("p",{className:"bg-gray-skeleton absolute mt-8",style:{width:100,height:18,right:0,bottom:0}}))},Ol=function(e){var t=e||{},n=t.product,r=t.traceInfo,a=(t.calendarVisible,t.commentVisible),i=(t.calendarEmpty,t.onCalendarClick,t.onCommentClick),o=Object(L.useModelState)(),l=(o.isOffline,o.isOnline,o.isBestone),s=o.currentFilters,u=Object(L.useCtrl)().handleGoToDetail,d=Object(R.useState)(!1),p=c()(d,2),f=p[0],m=p[1],v=Object(R.useCallback)((function(){m((function(e){return!e}))}),[]),h=function(e){u({product:n,traceInfo:r,attachInfo:e})};return n?j.a.createElement("div",{className:"list_product_item flex flex-row",onClick:h},j.a.createElement(Ic,{product:n}),j.a.createElement("div",{className:"list_product_right",style:{flex:1,width:"1%",minHeight:150}},j.a.createElement(Bc,{product:n}),null!==n&&void 0!==n&&n.needTailoring?j.a.createElement(_l,null):j.a.createElement(El,{product:n,currentFilters:s,isBestone:l,handleCardClick:h,commentVisible:a,onCommentClick:i,riskScheduleDetailVisible:f,handleToggleRiskScheduleDetail:v}))):null};var kl=function(e){var t=e||{},n=t.product,r=(t.isTradePrice,t.isRecommend),a=void 0!==r&&r,i=t.innerPos,o=(n||{}).id,l={innerPos:i,isRecommend:a},s=Object(R.useState)(!1),u=c()(s,2),d=u[0],p=u[1],f=Object(R.useState)(!1),m=c()(f,2),v=m[0],h=m[1],g=Object(R.useState)(!1),y=c()(g,2),b=y[0],E=(y[1],Object(R.useCallback)((function(e){e.stopPropagation(),p(!1),h((function(e){return!e}))}),[])),_=Object(R.useCallback)((function(e){e.stopPropagation(),h(!1),p((function(e){return!e}))}),[]);return j.a.createElement("div",{className:"list_product_box js_product_item","data-track-product-id":o,"data-track-is-recommend":a,"data-track-inner-pos":i},j.a.createElement("div",{className:"list_product_item_border"},j.a.createElement(Ol,{product:n,traceInfo:l,calendarVisible:d,commentVisible:v,calendarEmpty:b,onCalendarClick:_,onCommentClick:E})))};var Cl=function(){var e=Object(L.useModelState)(),t=e.recommendProducts,n=e.isOffline,r=e.isTradePrice,a=e.isVipUser,i=e.isAdCollapsed,o=Object(L.useCtrl)(),c=o.handleFoldAdProducts,l=o.handleUnfoldAdProducts;return sc(),null!==t&&void 0!==t&&t.length?j.a.createElement("div",{className:"list_ad_box"},j.a.createElement("span",{className:"list_ads_tip"},n?"\u643a\u7a0b\u63a8\u8350":"\u5e7f\u544a"),a&&j.a.createElement("span",{className:"list_ad_title"},"\u54c1\u8d28\u7528\u6237\u4e13\u4eab"),i&&j.a.createElement("span",{className:"list_ad_text",onClick:l},"\u5df2\u4e3a\u60a8\u6536\u8d77\u5e7f\u544a",j.a.createElement("i",{className:"ad_fewer"})),a&&!i&&j.a.createElement("span",{className:"list_ad_text",onClick:c},"\u6536\u8d77\u5e7f\u544a",j.a.createElement("i",{className:"ad_unfold"})),!i&&t.map((function(e,t){return j.a.createElement(kl,{product:e,isTradePrice:r,isRecommend:!0,innerPos:t,key:t})}))):null};var Tl=function(){sc();var e=Object(L.useModelState)(),t=e.products,n=e.isTradePrice;return null!==t&&void 0!==t&&t.length?j.a.createElement(j.a.Fragment,null,t.map((function(e,t){return j.a.createElement(kl,{product:e,isTradePrice:n,innerPos:t,key:t})}))):null};var Il=function(){return Object(L.useModelState)().search.keyword,j.a.createElement("div",{className:"list_no_box"},j.a.createElement("img",{className:"list_no_pic",src:Kn.Eb,alt:"\u62b1\u6b49"}),j.a.createElement("div",{className:"list_no_text_box"},j.a.createElement("p",{className:"list_no_text"},"\u5f88\u62b1\u6b49\uff0c\u6ca1\u6709\u627e\u5230\u76f8\u5173\u4ea7\u54c1\uff0c\u5efa\u8bae\u60a8\uff1a",j.a.createElement("br",null),"1\u3001\u5c1d\u8bd5\u5176\u4ed6\u5173\u952e\u8bcd",j.a.createElement("br",null),'2\u3001\u8c03\u6574 "\u4ef7\u683c\u533a\u95f4" \u6216 "\u51fa\u53d1\u65f6\u95f4"',j.a.createElement("br",null),"3\u3001\u9002\u5f53\u51cf\u5c11\u7b5b\u9009\u6761\u4ef6")))};function Sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sl(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pl=function(){var e=Object(R.useState)(!1),t=c()(e,2),n=t[0],r=t[1],a=Object(L.useModelState)(),i=a.operationBanner,o=a.riskWarning,l=(a.serverVipLevel,a.serverIsSuperUser,a.isBestone),s=(a.isOffline,a.currentTabInfo.id),u=Object(L.useCtrl)(),d=u.triggerTrack,p=u.getTrackModuleInfo,f=u.getTrackMemberInfo,m=u.handleJumpMemberRight,v=u.getShowMemberRightFromLocal,h=u.setShowMemberRightToLocal;Object(R.useEffect)((function(){var e=v();r(e)}));var g=Nl(Nl(Nl({},p()),f()),{},{module_name:"\u4f1a\u5458\u6743\u76ca\u611f\u77e5"}),y={"data-module-type":"memberRight","data-module-info":"single","data-trace-key":"list_page_module_expo","data-trace-value":JSON.stringify(g)};return i&&null!==i&&void 0!==i&&i.imgurl&&null!==i&&void 0!==i&&i.url?l||!n||null!==o&&void 0!==o&&o.length||jr(s)?null:j.a.createElement("div",U()({className:"basefix js_module_item",style:{position:"relative",marginBottom:16,lineHeight:1},onClick:function(){return function(e){var t=e.url;d("list_page_module_click",g),m(t)}({url:i.url})}},y),j.a.createElement("img",{style:{width:"100%"},alt:"\u4f1a\u5458\u6743\u76ca",src:i.imgurl}),j.a.createElement("span",{className:"SuperMember_box_cha",style:{position:"absolute",right:0,top:18,color:"#999"},onClick:function(e){e.stopPropagation(),r(!1),h()}},j.a.createElement("i",null))):null};var wl=function(e){var t=e.tags;return e.shouldRenderTags?j.a.createElement(j.a.Fragment,null,null===t||void 0===t?void 0:t.map((function(e,t){var n=e||{},r=n.name,a="1"==n.tagLevel?"tag_orange":"tag_green";return j.a.createElement("span",{key:t,className:"risk_tag ".concat(a)},r)}))):null},xl=function(e){var t=e.content,n=e.setFoldable,r=e.shouldFormatLink,a=Object(R.useRef)(null);if(Object(R.useEffect)((function(){null!==a&&void 0!==a&&a.current&&(a.current.getBoundingClientRect().height>20&&n(!0))}),[]),r){var i=function(e){var t=null===e||void 0===e?void 0:e.replace(/(https?|http):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/g,(function(e,t,n){return"<a href=".concat(e," style='color: #0086f6' target='_blank' rel='noopener noreferrer'>").concat(e,"</a>")}));return null===t||void 0===t?void 0:t.replace(/\n/g,"")}(t);return j.a.createElement("span",{ref:a,className:"risk_content",dangerouslySetInnerHTML:{__html:i}})}return j.a.createElement("span",{ref:a},t)},Dl=function(){var e=function(e){var t=[];return null===e||void 0===e||e.forEach((function(e){var n=[],r=null===e||void 0===e?void 0:e.tabType,a=(null===e||void 0===e?void 0:e.policies)||[];null===a||void 0===a||a.forEach((function(e){var t={tabType:r,level:e.urgencyLevel,title:e.title,tags:e.tags,content:e.policyText};n.push(t)})),"0"===r&&(null===n||void 0===n||n.sort((function(e,t){return e.level-t.level}))),t=[].concat(i()(t),n)})),t}(Object(L.useModelState)().riskWarning),t=Object(R.useState)(!0),n=c()(t,2),r=n[0],a=n[1],o=Object(R.useState)((null===e||void 0===e?void 0:e.length)>3),l=c()(o,2),s=l[0],u=l[1];if(null===e||void 0===e||!e.length)return null;var d=r?null===e||void 0===e?void 0:e.slice(0,3):e,p=(null===e||void 0===e?void 0:e.some((function(e){return"0"!=(null===e||void 0===e?void 0:e.tabType)})))&&!r,f=null!==e&&void 0!==e&&e.some((function(e){return"0"===(null===e||void 0===e?void 0:e.level)}))?"background_red":"background_orange";return j.a.createElement("div",{className:"list_risk_warning ".concat(f)},j.a.createElement("div",{className:"risk_container"},d.map((function(e,t){var n=e||{},a=n.tabType,i=n.level,o=n.title,c=n.tags,l=n.content,s=r?"multi_omit":"",d="0"===i?"icon_red":"icon_orange",p="0"===i?"info_red":"1"===i?"info_orange":"info_gray",f="0"!=a&&(null===c||void 0===c?void 0:c.length)>0,m="0"!=a;return j.a.createElement("div",{key:t,className:"risk_single"},j.a.createElement("i",{className:"risk_icon ".concat(d)}),j.a.createElement("p",{className:"risk_info info_gray ".concat(s)},j.a.createElement("span",{className:p,style:{fontWeight:"bold"}},o,"\uff1a"),j.a.createElement(wl,{tags:c,shouldRenderTags:f}),j.a.createElement(xl,{content:l,setFoldable:u,shouldFormatLink:m})))})),p&&j.a.createElement("div",{style:{color:"#f70",marginTop:8}},"*\u9274\u4e8e\u76ee\u7684\u5730\u3001\u7ecf\u505c\uff08\u8f6c\uff09\u5730\u7684\u5165\u5883\u653f\u7b56\u53ca\u75ab\u60c5\u9632\u63a7\u653f\u7b56\u7684\u968f\u65f6\u53ef\u80fd\u8c03\u6574\uff0c\u9875\u9762\u4fe1\u606f\u53ef\u80fd\u5b58\u5728\u6ede\u540e\u6027\uff0c\u8bf7\u60a8\u5728\u51fa\u884c\u524d\u4ed4\u7ec6\u67e5\u9605\u5165\u5883\u8981\u6c42\u53ca\u6700\u65b0\u75ab\u60c5\u9632\u63a7\u89c4\u5b9a\uff0c\u5408\u7406\u5b89\u6392\u60a8\u7684\u51fa\u884c\u3002")),s&&j.a.createElement("span",{className:r?"arrow_down risk_arrow":"arrow_up risk_arrow",onClick:function(){a(!r)}}))};function Rl(e){var t=sc(),n=e.page,r=e.pageSize,a=e.total,i=e.handlePageChanged,o=Object(dc.a)({page:n,pageSize:r,total:a,handlePageChanged:i}),c=o.pageValue,l=o.left,s=o.middle,u=o.right,d=o.shake,p=o.setShake,f=o.onPageCellClick,m=o.onPageInput,v=o.onPageKeyPress,h=o.onConfirmClick,g=H()("up","paging_item",{up_nocurrent:n<=1}),y=H()("down","paging_item",{down_nocurrent:n>=a}),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t.includes("up_nocurrent")||t.includes("down_nocurrent");if(!n)return f(e)};return isNaN(a)?null:t.current?j.a.createElement("div",{className:"pkg_page basefix"},j.a.createElement("div",{className:g,onClick:function(e){b(e,g)},"data-page":n-1},j.a.createElement("b",null),"\u4e0a\u4e00\u9875"),l.map((function(e){return j.a.createElement("div",{className:H()("paging_item",{current:n==e}),onClick:f,key:e,"data-page":e},e)})),s&&j.a.createElement(j.a.Fragment,null,j.a.createElement("span",{className:"pkg_page_ellipsis"},"..."),s.map((function(e){return j.a.createElement("div",{className:H()("paging_item",{current:n==e}),onClick:f,key:e,"data-page":e},e)}))),u&&j.a.createElement(j.a.Fragment,null,j.a.createElement("span",{className:"pkg_page_ellipsis"},"..."),u.map((function(e){return j.a.createElement("div",{className:H()("paging_item",{current:n==e}),onClick:f,key:e,"data-page":e},e)}))),j.a.createElement("div",{className:y,onClick:function(e){b(e,y)},"data-page":n+1},"\u4e0b\u4e00\u9875",j.a.createElement("b",null)),j.a.createElement("span",{className:"pkg_pagevalue",style:{position:"relative"}},"\u5230",j.a.createElement("label",{htmlFor:"search-input-page-index",style:{display:"none"}},"\u8f93\u5165\u9875\u7801"),j.a.createElement("input",{type:"number",id:"search-input-page-index",className:"pkg_page_num",style:{visibility:d?"hidden":"visible"},value:c||"",onChange:m,onKeyPress:v}),d&&j.a.createElement(jl,{pageValue:c,setShake:p}),"\u9875",j.a.createElement("input",{type:"button",className:"pkg_page_submit",value:"\u786e\u5b9a",onClick:h}))):null}function jl(e){var t=e.pageValue,n=e.setShake,r=Object(R.useState)({x:14,y:2}),a=c()(r,2),i=a[0],o=a[1];return Object(R.useEffect)((function(){var e=0,t=setInterval((function(){e++,o((function(t){return{x:t.x+1*Math.cos(e),y:t.y+2*Math.sin(e)}})),e>=15&&(clearInterval(t),n(!1))}),30);return function(){clearInterval(t)}}),[]),j.a.createElement("input",{type:"number",className:"pkg_page_num",style:{position:"absolute",left:"".concat(i.x,"px"),top:"".concat(i.y,"px")},defaultValue:t})}Rl.defaultProps={pageSize:8};var Al=Rl;var Ll=function(){var e=Object(L.useModelState)(),t=e.total,n=e.pageNumber,r=e.isSearchCompleted,a=Object(L.useCtrl)().handlePageChanged;return aa(t,r)?j.a.createElement("div",{className:"main_col"},j.a.createElement(Il,null),j.a.createElement(_c,null)):j.a.createElement("div",{className:"main_col"},j.a.createElement(Dl,null),j.a.createElement(Pl,null),j.a.createElement(_c,null),j.a.createElement(Cl,null),j.a.createElement(Tl,null),j.a.createElement(Al,{page:n,total:Math.ceil(t/Kn.U),handlePageChanged:a}))};var Bl=function(){var e=Object(R.useState)(0),t=c()(e,2),n=t[0],r=t[1];Object(R.useEffect)((function(){var e=0,t=setInterval((function(){++e<20?r(4.25*e):e<100?r(85+.125*(e-20)):e<150?r(95+.06*(e-100)):(clearInterval(t),t=0)}),20);return function(){t&&(clearInterval(t),t=0)}}),[]);var a={width:"".concat(n,"%"),height:"3px"};return j.a.createElement("div",{className:"top_loading",style:{display:"block"}},j.a.createElement("div",{className:"progress",style:a}),j.a.createElement("img",{src:"//pic.c-ctrip.com/vacation_v2/group_travel/s_loading.gif"}))};var Ul=["titleRows","listRows","titleConfig","listConfig"];var Ml=function(e){var t=e||{},n=t.titleRows,r=t.listRows,a=t.titleConfig,i=t.listConfig,o=Dt()(t,Ul);if(r=+r||0,a=a||{left:!0,right:!0},i=i||{picture:!0,solidRows:2,dashRows:1},(n=+n||0)<=0&&r<=0)return null;var c=S.a.range(0,n),l=S.a.range(0,r);return j.a.createElement("div",U()({className:"skeketon_right_border"},o),c.map((function(e,t){var n=a,r=n.left,i=n.right;return j.a.createElement("p",{className:"skeketon_right_title basefix",key:t},r&&j.a.createElement("span",{className:"skeketon_float_left"}),i&&j.a.createElement("span",{className:"skeketon_float_right"}))})),l.map((function(e,t){var n=i,r=n.picture,a=n.solidRows,o=n.dashRows,c=S.a.range(0,a),l=S.a.range(0,o);return j.a.createElement("div",{className:"skeketon_right_item basefix",key:t},r&&j.a.createElement("span",{className:"skeketon_right_pic"}),(a>0||o>0)&&j.a.createElement("div",{className:"skeketon_right_content"},c.map((function(e,t){return j.a.createElement("p",{className:"skeketon_right_first",key:t})})),l.map((function(e,t){return j.a.createElement("p",{className:"skeketon_right_two",key:t},j.a.createElement("span",{className:"skeketon_span_first"}),j.a.createElement("span",{className:"skeketon_span_two"}))}))))})))};var Fl=function(){return sc().current?j.a.createElement("div",{className:"side_mod ad_tourism"},j.a.createElement("h3",null,"\u643a\u7a0b\u65c5\u6e38"),j.a.createElement("ul",null,j.a.createElement("li",null,j.a.createElement("i",{className:"ico_ad_right"}),"\u4e13\u4e1a\u5728\u7ebf\u5ea6\u5047\u5e73\u53f0"),j.a.createElement("li",null,j.a.createElement("i",{className:"ico_ad_right"}),"\u65c5\u884c\u76ee\u7684\u5730\u5168\u8986\u76d6"),j.a.createElement("li",null,j.a.createElement("i",{className:"ico_ad_right"}),"\u8d34\u5fc3\u65c5\u6e38\u670d\u52a1\u4fdd\u969c"),j.a.createElement("li",null,j.a.createElement("i",{className:"ico_ad_right"}),"\u540c\u7c7b\u4ea7\u54c1\u4ef7\u683c\u4eab\u4f18"))):j.a.createElement(Ml,{titleRows:0,listRows:1})};var Vl=function(){return sc().current?j.a.createElement("div",{className:"side_mod ad_bussi"},j.a.createElement("a",{href:"//m.ctrip.com/webapp/vacations/vbk/businessHome?enter=3#ctm_ref=ctm_Onlinetour_tours/whole/dest_retail",target:"_blank"},j.a.createElement("i",{className:"ico_ad_private"}),j.a.createElement("em",{className:"ad_title"},"\u5546\u5bb6\u5165\u9a7b"),j.a.createElement("p",{className:"ad_text"},"\u70b9\u51fb\u6b64\u5904\u67e5\u770b\u8be6\u60c5\xa0>"))):j.a.createElement(Ml,{titleRows:0,listRows:1})};var Hl=function(){return sc().current?j.a.createElement("div",{className:"side_mod ad_package"},j.a.createElement("a",{href:"//vacations.ctrip.com/customtravel/index",target:"_blank"},j.a.createElement("i",{className:"baotuan_icon"})," ",j.a.createElement("em",{className:"ad_title"},"\u5305\u56e2\xb7\u5b9a\u5236"),j.a.createElement("p",{className:"ad_text"},"\u4e0d\u8ddf\u56e2\u4e0d\u81ea\u52a9,\u4e0d\u8ba9\u4f60\u8d39\u5fc3\xa0>"))):j.a.createElement(Ml,{titleRows:0,listRows:1})},Gl=["\u4eca\u5929","\u660e\u5929","\u540e\u5929"];var ql=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"weather_icon0";return e>=0?"weather_icon".concat(e):t},zl=function(){var e=sc(),t=Object(L.useModelState)(),n=t.districtDetail,r=t.weatherForecasts,a=t.travelRecordInfo,i=n||{},o=i.name,l=i.simpleIntroduce,s=i.districtDetailUrl,u=a||{},d=u.districtName,p=u.moreTravelRecordUrl,f=u.travelRecords,m=o||d,v=Object(L.useCtrl)().handleGoToDistrictDetail,h=Object(R.useState)(!1),g=c()(h,2),y=g[0],b=g[1],E=Object(R.useCallback)((function(e){b("boolean"===typeof e?e:function(e){return!e})}),[]),_=Object(R.useCallback)((function(){b(!1)}),[]),O=l,k=r&&r.length>0,C=f&&f.length>0,T=k?r[0]:null;return e.current?O||k||C?j.a.createElement("div",{className:"side_mod"},(O||k)&&j.a.createElement("div",{className:"search_bar_weather"},j.a.createElement("div",{className:"basefix"},j.a.createElement("h2",null,m),k&&j.a.createElement("div",{className:"weather",onClick:function(e){e.preventDefault(),e.stopPropagation(),E(!0)}},T&&j.a.createElement("a",{href:"javascript:void(0);"},j.a.createElement("i",{className:"weather_icon ".concat(ql(T.DayWeatherNo))}),T.hasTemperature&&j.a.createElement(j.a.Fragment,null,T.maxTemperature,"\u2103/",T.minTemperature,"\u2103"),j.a.createElement("b",null)))),O&&j.a.createElement("p",{className:"line",onClick:function(){return v(s)}},l),y&&k?j.a.createElement(A.OuterClickWrapper,{onClick:_},j.a.createElement("ul",{className:"weather_content",onClick:function(){return E(!1)}},r.map((function(e,t){var n=e||{},r=n.DayWeatherNo,a=n.hasTemperature,i=n.minTemperature,o=n.maxTemperature;return j.a.createElement("li",{key:t},Gl[t]||"",j.a.createElement("i",{className:"weather_icon ".concat(ql(r))}),a&&j.a.createElement(j.a.Fragment,null,o,"\u2103/",i,"\u2103"))})),j.a.createElement("a",{href:"javascript:void(0);",className:"close"}))):null),C&&j.a.createElement("div",{className:"travel_notes"},j.a.createElement("h2",null,j.a.createElement("a",{href:p||"javascript:void(0);",target:"_blank",className:"more"},"\u66f4\u591a"),m,"\u6e38\u8bb0"),j.a.createElement("ul",{className:"travel_notes_content"},f.map((function(e,t){var n=e||{},r=n.url,a=n.title;return j.a.createElement("li",{key:t},j.a.createElement("a",{href:Object(pr.l)(r),target:"_blank",title:a},j.a.createElement("i",null),a))}))))):null:j.a.createElement(Ml,{titleRows:0,listRows:2})};var Yl=function(){var e=sc(),t=Object(L.useModelState)(),n=t.currentTabInfo,r=t.search,a=t.otherCities,i=(n||{}).id,o=(r||{}).keyword,c=Object(L.useCtrl)().handleSearchChanged,l=Object(R.useCallback)((function(e){var t=e.target.getAttribute("data-city");t&&c({type:Yt,keyword:t},i)}),[i,c]);return e.current?a&&a.length?j.a.createElement("div",{className:"side_mod similarity_region"},j.a.createElement("h2",null,"\u641c\u8fc7\u201c",o,"\u201d\u7684\u5ba2\u4eba\u8fd8\u641c\u8fc7"),j.a.createElement("p",{className:"basefix",onClick:l},a.map((function(e,t){var n=e.cityName;return j.a.createElement("a",{href:"javascript:;",key:t,"data-city":n,title:n},n)})))):null:j.a.createElement(Ml,{titleRows:0,listRows:1})};function Wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ql(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wl(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kl=function(){var e=Object(R.useState)(null),t=c()(e,2),n=t[0],r=t[1],a=Object(R.useState)({loading:!1}),i=c()(a,2),o=i[0],l=i[1],s=Object(R.useState)(1),u=c()(s,2),d=u[0],p=u[1],f=Object(L.useCtrl)().handleFetchBrowserHistory,m=n||{},v=m.hasNextPage,h=m.historyInfos,g=d>1,y=!!v,b=H()("left",{left_disable:!g}),E=H()("right",{right_disable:!y}),_=Object(R.useCallback)((function(){g&&p((function(e){return e-1}))}),[g]),O=Object(R.useCallback)((function(){y&&p((function(e){return e+1}))}),[y]);return Object(R.useEffect)((function(){l((function(e){return Ql(Ql({},e),{},{loading:!0})})),f(d).then((function(e){l((function(e){return Ql(Ql({},e),{},{loading:!1,error:null})})),e&&r(e)}),(function(e){l((function(t){return Ql(Ql({},t),{},{loading:!1,error:e})}))}))}),[d,f]),!o.loading&&o.error||S.a.isEmpty(n)||S.a.isEmpty(h)?null:j.a.createElement("div",{className:"side_mod side_listbox"},j.a.createElement("h2",null,"\u6d4f\u89c8\u5386\u53f2"),j.a.createElement("ul",{className:"side_list","data-side-mod-type":"history"},h.map((function(e,t){var n=e||{},r=n.detailURL,a=n.picURL,i=n.title,o=n.price;return j.a.createElement("li",{key:t},j.a.createElement("a",{href:Object(pr.l)(r),target:"_blank"},j.a.createElement("div",{className:"list_pic"},j.a.createElement(Jn.a,{src:Object(pr.l)(a),defaultSrc:Kn.e,alt:i})),i&&j.a.createElement("p",null,i),o>0&&j.a.createElement("span",{className:"prise"},j.a.createElement("dfn",null,"\xa5"),o,"\u8d77"),0==o&&j.a.createElement("span",{className:"prise"},"\u5b9e\u65f6\u8ba1\u4ef7")))}))),j.a.createElement("div",{className:"paging_button_frame"},j.a.createElement("div",{className:"paging_button "},j.a.createElement("a",{className:b,href:"javascript:void(0);",onClick:_}),j.a.createElement("a",{className:E,href:"javascript:void(0);",onClick:O}))))},Jl=n(550);var Xl=function(){var e=Object(L.useModelState)(),t=e.favoriteCount,n=e.defaultFavorites,r=Object(L.useCtrl)(),a=r.handleGoToAllFavorites,i=r.handleRemoveFavorite;return n&&n.length?j.a.createElement(Jl.b,{favoriteCount:t,defaultFavorites:n,handleRemoveFavorite:i,handleShowFavoriteLayer:a}):null};function Zl(){return j.a.createElement("div",{className:"standard_box_broadside"},j.a.createElement("div",{className:"standard_box"},j.a.createElement("a",{href:hn,target:"_blank"},j.a.createElement(Jn.a,{src:"//pic.c-ctrip.com/VacationOnlinePic/vacation_v2/searchresult/zhuanji2.jpg",defaultSrc:Kn.e,alt:"\u65b0\u94bb\u7ea7\u8bf4\u660e"}))))}function $l(){return j.a.createElement("div",{className:"new_ad_tourism"},j.a.createElement("div",{className:"new_tourism_box"},j.a.createElement("div",{className:"diamond_shows"},j.a.createElement("h3",null,"\u94bb\u7ea7\u4f53\u9a8c"),j.a.createElement("p",{className:"diamond_content"},"\u643a\u7a0b\u4e3a\u5168\u65b9\u4f4d\u63d0\u5347\u5ba2\u6237\u4f53\u9a8c\uff0c\u503e\u529b\u6253\u9020\u81ea\u7531\u884c3\u94bb\u52305\u94bb\u7b49\u7ea7\u6807\u51c6",j.a.createElement("a",{href:gn,target:"_blank"},"\u94bb\u7ea7\u8bf4\u660e\xa0>")))))}var es=function(e){var t=e.tabId;return sc().current?t>0?Mr(t)?j.a.createElement(Zl,null):Fr(t)?j.a.createElement($l,null):null:null:j.a.createElement(Ml,{titleRows:0,listRows:1})};var ts=function(){return sc().current?j.a.createElement("div",{className:"side_mod"},j.a.createElement("a",{href:"javascript:void(0);"},j.a.createElement(Jn.a,{src:"//pic.c-ctrip.com/VacationOnlinePic/vacation_v2/searchresult/ziyouxing.png",defaultSrc:Kn.e,alt:"\u5fae\u9886\u961f",style:{width:"100%",height:"100%",display:"block"}}))):j.a.createElement(Ml,{titleRows:0,listRows:1})};var ns=function(){return sc().current?j.a.createElement("div",{className:"side_mod"},j.a.createElement("a",{href:"//app.ctrip.com/#ctm_ref=ad_3181_11187",target:"_blank"},j.a.createElement(Jn.a,{src:"//images3.c-ctrip.com/rk/201405/lb240150.jpg",defaultSrc:Kn.e,alt:"\u624b\u673a\u9884\u8ba2",style:{width:"100%",height:"100%",display:"block"}}))):j.a.createElement(Ml,{titleRows:0,listRows:1})};var rs=function(){var e=Object(L.useModelState)(),t=e.scenicHotelAdLink,n=e.scenicHotelAdImg;return sc().current?(t=t||"javascript:void(0);",n=n||"//images3.c-ctrip.com/dj/201704/yhk_24090.jpg",j.a.createElement("div",{className:"side_mod"},j.a.createElement("div",{className:"ticket_standard"},j.a.createElement("h2",null,"\u666f\u9152\u5957\u9910",j.a.createElement("b",null)),j.a.createElement("p",null,j.a.createElement("span",{className:"bold"},"\u7701"),"\u6253\u5305\u5957\u9910\u66f4\u52a0\u4f18\u60e0"),j.a.createElement("p",null,j.a.createElement("span",null,"\u5feb"),"\u9884\u5b9a\u4fbf\u6377\u54c1\u8d28\u4fdd\u969c"),j.a.createElement("p",null,j.a.createElement("span",null,"\u591a"),"500\u57ce\u5e02\u5168\u9762\u8986\u76d6"),j.a.createElement("p",null,j.a.createElement("span",null,"\u597d"),"\u642d\u914d\u5408\u7406\u60ec\u610f\u65c5\u7a0b")),j.a.createElement("a",{className:"ticket_advert",href:t},j.a.createElement(Jn.a,{src:n,defaultSrc:Kn.e})))):j.a.createElement(Ml,{titleRows:0,listRows:2})};var as=function(){return sc().current?j.a.createElement("div",{className:"new_ad_tourism"},j.a.createElement("div",{className:"new_tourism_box"},j.a.createElement("a",{href:"//pages.ctrip.com/groupTravelUED/pc/20180125/lc_guarantee.html",target:"_blank"},j.a.createElement("h3",null,j.a.createElement("span",{className:"num"},"6"),"\u91cd\u65c5\u6e38\u4fdd\u969c",j.a.createElement("strong",null,"\xb7"),"\u8ddf\u56e2\u6e38"),j.a.createElement("ul",null,j.a.createElement("li",null,"\u56e2\u961f\u6e38\u4f53\u9a8c\u4fdd\u969c"),j.a.createElement("li",null,"\u7279\u6b8a\u539f\u56e0\u9000\u8ba2\u4fdd\u969c"),j.a.createElement("li",null,"\u707e\u5bb3\u65c5\u6e38\u4f53\u9a8c\u4fdd\u969c\u91d1"),j.a.createElement("li",null,"\u65c5\u6e38\u9884\u8b66\u673a\u5236"),j.a.createElement("li",null,"\u5e94\u6025\u63f4\u52a9\u4f53\u7cfb"),j.a.createElement("li",null,"\u4e00\u7ad9\u5f0f\u65c5\u6e38\u4fdd\u9669"))))):j.a.createElement(Ml,{titleRows:0,listRows:1})};var is=function(){return sc().current?j.a.createElement("div",{className:"standard_box_broadside"},j.a.createElement("div",{className:"standard_box"},j.a.createElement("a",{href:vn,target:"_blank"},j.a.createElement(Jn.a,{src:"//pic.c-ctrip.com/VacationOnlinePic/vacation_v2/searchresult/jinpai01.png",defaultSrc:Kn.e,alt:"\u643a\u7a0b\u6e38\u5b66\u54c1\u8d28\u8425\u6807\u51c6"})))):j.a.createElement(Ml,{titleRows:0,listRows:1})};var os=function(){var e=Object(L.useModelState)(),t=e.currentTabInfo,n=e.isOnline;if(!Yr({isOnline:n}))return null;var r=(t||{}).id,a=Gr(r),i=S.a.map(a,(function(e,t){return function(e,t){var n=null;switch(e){case En:n=j.a.createElement(Fl,{key:t});break;case _n:n=j.a.createElement(Vl,{key:t});break;case On:n=j.a.createElement(Hl,{key:t});break;case kn:n=j.a.createElement(es,{key:t,tabId:r});break;case Cn:n=j.a.createElement(as,{key:t});break;case Tn:n=j.a.createElement(ns,{key:t});break;case In:n=j.a.createElement(ts,{key:t});break;case Sn:n=j.a.createElement(rs,{key:t});break;case Nn:n=j.a.createElement(is,{key:t});break;case Pn:n=j.a.createElement(zl,{key:t});break;case wn:n=j.a.createElement(Yl,{key:t});break;case xn:n=j.a.createElement(Kl,{key:t});break;case Dn:n=j.a.createElement(Xl,{key:t})}return n}(e,t)}));return j.a.createElement("div",{className:"side_col"},i)},cs=n(608);var ls=function(){var e=Object(L.useModelState)().recommendPoiInfo||{},t=(e.recommendPoiName,e.recommendPoiTitle),n=(e.recommendPoiMoreUrl,e.recommendPoiTotalCount,e.recommendPoiList);if(!n||!n.length)return null;var r={width:160,height:90};return j.a.createElement("div",{className:"main_box scenic_spots"},j.a.createElement("h2",{className:"box_title"},t),j.a.createElement("ul",{className:"scenic_list"},n.map((function(e,t){var n=e||{},a=n.districtUrl,i=n.coverImageUrl,o=n.name,c=n.introduceText;return j.a.createElement("li",{key:t},j.a.createElement("a",{className:"search_newrecomimg",href:a,target:"_blank"},j.a.createElement(cs.a,{src:i||"",placeholder:Kn.V,animate:!0,className:"list_product_pic",style:r,alt:o,title:o}),j.a.createElement("span",{className:"preferential_info"},o)),j.a.createElement("a",{className:"search_newrecomname",href:a,target:"_blank"},c))}))))};var ss=function(e,t){return Hr({tabId:e})&&t?Kn.bb.bestoneStore:[]},us=function(e,t){return Array.isArray(t)?t.map((function(e){return e.key})).includes(e):t==e},ds=function(e,t,n,r){if(r=r||[],e){var a=r.find((function(e){return e.key==t}));return a&&a.text?a.text:""}return n},ps=function(){var e=Object(L.useModelState)(),t=e.sortType,n=e.isBestone,r=e.currentTabInfo.id,a=Object(L.useCtrl)().handleSortChanged,i=ss(r,n),o=t||Kn.c,c=function(e){e!=o&&a(e)};return j.a.createElement(j.a.Fragment,null,i.map((function(e){if("single"==e.type){var t=e.key,n=e.text,r=us(o,t);return j.a.createElement("span",{key:n,className:"list_recommend_text ".concat(r?"cur":""),onClick:function(){c(t)}},n)}if("double"==e.type){var a=e.parentText,i=e.childConfig,l=e.boxWidth,s=us(o,i),u=ds(s,o,a,i);return j.a.createElement("div",{key:a,className:"list_recommend_distance"},j.a.createElement("span",{className:"list_distance_text ".concat(s?"cur":"")},u,j.a.createElement("i",null)),j.a.createElement("div",{className:"list_distance_box",style:{width:"".concat(l,"px")}},i.map((function(e){var t=e.key,n=e.text;return j.a.createElement("p",{key:n,className:"list_distance_tip",onClick:function(){c(t)}},n)}))))}})))};var fs=function(){var e=Object(L.useModelState)(),t=e.total,n=e.pageNumber,r=Object(L.useCtrl)().handlePageChanged,a=Math.ceil(t/Kn.U),i=1==n,o=n==a,c=function(e){"left"!=e||i||r(n-1),"right"!=e||o||r(n+1)};return j.a.createElement("div",{className:"list_paging_box basefix"},j.a.createElement("span",{className:"list_paging_left ".concat(i?"gray_cur":""),onClick:function(){c("left")}},j.a.createElement("i",{className:"icon_list_paging_left"})),j.a.createElement("span",{className:"list_paging_text"},j.a.createElement("em",null,n),"/",a),j.a.createElement("span",{className:"list_paging_right ".concat(o?"gray_cur":""),onClick:function(){c("right")}},j.a.createElement("i",{className:"icon_list_paging_right"})))};var ms=function(){var e=Object(L.useCtrl)().handleToggleFilterHasSegment,t=Object(L.useModelState)(),n=t.query,r=t.isBestone,a="1"===(n||{}).hssg;if(!r)return null;var i=H()("list_checklist_text",{cur:a});return j.a.createElement("div",{className:"list_checklist_box basefix"},j.a.createElement("span",{className:i,onClick:e},j.a.createElement("i",null),"\u76ee\u7684\u5730\u5546\u5bb6"))},vs=function(){var e=Object(R.useRef)(null),t=Object(R.useState)(0),n=c()(t,2),r=n[0],a=n[1],i=uc({stickBoxEl:u,scrollPointEl:e}),o=Object(L.useModelState)(),l=o.total,s=(o.currentFilters,o.isBestone),u=Object(R.useCallback)((function(e){if(null!==e){var t=e.getBoundingClientRect().height;a(t)}}),[]);return s?!l||l<0?null:j.a.createElement(j.a.Fragment,null,j.a.createElement("div",{id:"filter_box_point",className:"list_newse_filter"}),j.a.createElement("div",{ref:e,style:{position:"relative"}}),j.a.createElement("div",{ref:u,className:"list_stick_box ".concat(i?"list_stick_fixed":"")},j.a.createElement("div",{className:"list_recommend_box"},j.a.createElement("div",{className:"list_recommend_content basefix"},j.a.createElement(ps,null),j.a.createElement(fs,null)),j.a.createElement(ms,null))),j.a.createElement("div",{style:{height:i?r:0}})):null};var hs=function(){return j.a.createElement("div",{className:"list_no_box"},j.a.createElement("img",{className:"list_no_pic",src:Kn.Eb,alt:"\u62b1\u6b49"}),j.a.createElement("div",{className:"list_no_text_box"},j.a.createElement("p",{className:"list_no_text"},"\u5f88\u62b1\u6b49\uff0c\u6ca1\u6709\u627e\u5230\u76f8\u5173\u4ea7\u54c1\uff0c\u5efa\u8bae\u60a8\uff1a",j.a.createElement("br",null),"1\u3001\u5c1d\u8bd5\u5176\u4ed6\u5173\u952e\u8bcd",j.a.createElement("br",null),"2\u3001\u9002\u5f53\u51cf\u5c11\u7b5b\u9009\u6761\u4ef6")))};var gs=function(e){var t=e;if(/\d+\+?/.test(e)&&"0"!==e&&"0+"!==e);else if("\u8fd1\u767e\u4eba"!==e)return{customerVal:"\u65b0\u5e97\u94fa",customerText:"\u5df2\u670d\u52a1\u4eba\u6570"};return{customerVal:t,customerText:"\u5df2\u670d\u52a1\u4eba\u6570"}},ys=function(e,t){var n="";return t?n="\u643a\u7a0b\u81ea\u8425":(n="\u65b0\u4f19\u4f34",e>=10?n="\u5353\u8d8a\u4f19\u4f34":e>=7?n="\u6770\u51fa\u4f19\u4f34":e>=4?n="\u51fa\u8272\u4f19\u4f34":e>=1&&(n="\u4f18\u8d28\u4f19\u4f34")),{yearText:n}},bs=function(e,t,n){return"boolean"===typeof t&&n&&(e=t?"\u643a\u7a0b\u81ea\u8425\u5883\u5185\u5e97":"\u643a\u7a0b\u81ea\u8425\u5883\u5916\u5e97"),e},Es=function(){var e=Object(L.useModelState)(),t=e.total,n=e.shopInfoList,r=e.pageNumber,a=e.isSearchCompleted,i=e.isBestone,o=Object(L.useCtrl)(),c=o.handlePageChanged,l=o.handleGoToStoreDetail;return aa(t,a)||S.a.isEmpty(n)?j.a.createElement("div",{className:"main_col"},j.a.createElement(hs,null)):j.a.createElement("div",{className:"main_col"},j.a.createElement("div",null,n.map((function(e,t){var n=e||{},r=n.shopType,a=n.brandName,o=n.providerName,c=n.cooperationYears,s=n.customersCount,u=n.storeInfo,d=n.storeNum,p=n.complainOnRoutine,f=n.inLand,m="self"===r,v=1==(null===u||void 0===u?void 0:u.storeTypeId),h=H()({store_type:v||m,self_sale:m});a=bs(a,f,m);var g=ys(c,m).yearText,y=gs(s),b=y.customerVal,E=y.customerText,_={cursor:"pointer",paddingLeft:24},O=H()("store_list_item",{store_list_item_bst:i});return j.a.createElement("div",{className:O,style:_,key:t,onClick:function(){return l(e)}},a&&j.a.createElement("div",{className:"store_pro line1"},j.a.createElement("h2",{className:"store_pro_text"},a),(v||m)&&j.a.createElement("label",{className:h})),o&&j.a.createElement("div",{className:"store_name line1"},o),j.a.createElement("div",{className:"right_con"},j.a.createElement("div",{className:"store_info_item"},g&&j.a.createElement(j.a.Fragment,null,m&&j.a.createElement(j.a.Fragment,null,j.a.createElement("p",{className:"info_con"},"\u5408\u4f5c\u5e74\u6570"),j.a.createElement("span",{className:"info_tit"},g)),!m&&j.a.createElement(j.a.Fragment,null,j.a.createElement("p",{className:"info_con"},c>0?"".concat(c,"\u5e74"):"\u5408\u4f5c\u5e74\u6570"),j.a.createElement("span",{className:"info_tit"},g)))),j.a.createElement("div",{className:"store_info_item"},!!b&&j.a.createElement(j.a.Fragment,null,j.a.createElement("p",{className:"info_con"},E),j.a.createElement("span",{className:"info_tit"},b))),i&&j.a.createElement("div",{className:"store_info_item"},d>0&&j.a.createElement(j.a.Fragment,null,j.a.createElement("p",{className:"info_con"},d,"\u5bb6"),j.a.createElement("span",{className:"info_tit"},"\u8fd1\u671f\u5408\u4f5c\u95e8\u5e97"))),i&&j.a.createElement("div",{className:"store_info_item"},p>=0&&j.a.createElement(j.a.Fragment,null,j.a.createElement("p",{className:"info_con"},(100*p).toFixed(2),"%"),j.a.createElement("span",{className:"info_tit"},"\u8fd16\u4e2a\u6708\u6295\u8bc9\u7387")))))}))),j.a.createElement(Al,{page:r,total:Math.ceil(t/Kn.U),handlePageChanged:c}))};var _s=function(){return Object(L.useModelState)().isSearchVendorStore?j.a.createElement("div",{className:"vacation_bd"},j.a.createElement(mo,null),j.a.createElement(go,null),j.a.createElement(yo,null),j.a.createElement(vs,null),j.a.createElement(Es,null),j.a.createElement(os,null)):j.a.createElement("div",{className:"vacation_bd"},j.a.createElement(mo,null),j.a.createElement(go,null),j.a.createElement(yo,null),j.a.createElement(bc,null),j.a.createElement(Ll,null),j.a.createElement(os,null),j.a.createElement(ls,null))};function Os(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ks(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Os(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Os(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Cs(e){var t=e.poiType,n=e.poiName,r=e.keyword,a=e.handleToggleAll,i=null;switch(t){case ln:i=j.a.createElement("p",{className:"to_sitemap"},"\u643a\u7a0b\u65c5\u6e38\u4e3a\u60a8\u63d0\u4f9b\u4ee5\u4e0b\u7d22\u5f15\uff1a",j.a.createElement("a",{href:"//vacations.ctrip.com/tours",target:"_blank"},"\u5883\u5185\u65c5\u6e38\u666f\u533a"),"\xa0",j.a.createElement("a",{href:"//vacations.ctrip.com/tours/inter",target:"_blank"},"\u51fa\u5883\u65c5\u6e38\u666f\u533a"),"\xa0",j.a.createElement("a",{href:"//pages.ctrip.com/public/sitemap/dj.html"},"\u65c5\u6e38\u7d22\u5f15"),"\xa0",j.a.createElement("a",{className:"gray_link",href:"javascript:void(0)",id:"seemoreseo",onClick:a},"\u67e5\u770b\u5168\u90e8"));break;case sn:i=j.a.createElement("p",{className:"to_sitemap"},"\u7cbe\u9009",r,"\u65c5\u6e38\u7ebf\u8def\u63a8\u8350\uff0c\u643a\u7a0b\u65c5\u884c\u7f51\u63d0\u4f9b",n,"\u65c5\u6e38\u7ebf\u8def\uff0c",n,"\u65c5\u6e38\u4fe1\u606f\uff0c",n,"\u65c5\u6e38\u653b\u7565\uff0c\u60f3\u8981\u627e",j.a.createElement("a",{href:"//vacations.ctrip.com/tours",target:"_blank"},"\u5883\u5185\u65c5\u6e38\u666f\u533a"),"\xa0",j.a.createElement("a",{href:"//vacations.ctrip.com/tours/inter",target:"_blank"},"\u51fa\u5883\u65c5\u6e38\u666f\u533a"),"\xa0 \u4e0a\u643a\u7a0b\u3002",j.a.createElement("a",{className:"gray_link",href:"javascript:void(0)",rel:"nofollow",id:"seemoreseo",onClick:a},"\u67e5\u770b\u5168\u90e8"));break;case un:i=j.a.createElement("p",{className:"to_sitemap"},"\u643a\u7a0b\u65c5\u6e38\u4e3a\u60a8\u63d0\u4f9b\u4ee5\u4e0b\u7d22\u5f15\uff1a",j.a.createElement("a",{href:"//vacations.ctrip.com/dest",target:"_blank"},"\u5883\u5185\u65c5\u6e38\u666f\u533a"),"\xa0",j.a.createElement("a",{href:"//vacations.ctrip.com/dest/inter",target:"_blank"},"\u51fa\u5883\u65c5\u6e38\u666f\u533a"),"\xa0",j.a.createElement("a",{href:"//pages.ctrip.com/public/sitemap/dj.html"},"\u65c5\u6e38\u7d22\u5f15"),"\xa0",j.a.createElement("a",{className:"gray_link",href:"javascript:void(0)",rel:"nofollow",id:"seemoreseo",onClick:a},"\u67e5\u770b\u5168\u90e8"))}return i}function Ts(e){var t=e.aroundRecommendPoiInfo,n=e.keyword,r=t||{},a=r.aroundRecommendPoiList,i=r.parentPoi;if(!a||!a.length)return null;a=a.slice(0,30);var o=i&&i.name?i.name:n;return j.a.createElement("dl",null,j.a.createElement("dt",null,o,"\u65c5\u6e38\u5468\u8fb9\u63a8\u8350\uff1a"),j.a.createElement("dd",null,a.map((function(e,t){var n=e||{},r=n.searchUrl,a=n.poiName;return j.a.createElement("a",{key:t,href:r,target:"_blank"},a)}))))}function Is(e){var t=e||{},n=t.rows;t.inChina;return j.a.createElement(j.a.Fragment,null,n.map((function(t,n){var r=t||{},a=r.title,i=r.list,o=r.filter,c=r.toggleabe;o&&(i=S.a.filter(i,(function(t){return t&&t[o]==e[o]})));var l=H()("seo_spread",{seo_hot:!!c});return i&&i.length?j.a.createElement("dl",{key:n,className:l},j.a.createElement("dt",null,a,"\uff1a"),j.a.createElement("dd",null,i.map((function(e,t){var n=e||{},r=n.path,a=n.title;return j.a.createElement("a",{href:"/list/whole/".concat(r,".html"),target:"_blank",key:t},a)})))):null})))}function Ss(e){var t=e.latestOrderInfo,n=e.handleMarqueeEffect,r=(t||{}).orderInfoList,a=Object(R.useRef)(null);return Object(R.useEffect)((function(){"function"===typeof n&&n(a)})),r&&r.length?j.a.createElement("div",{className:"booking_now"},j.a.createElement("strong",null,"\u6700\u65b0\u9884\u8ba2"),j.a.createElement("div",{className:"booking_info_box",ref:a},r.map((function(e,t){var n=e||{},r=n.orderSecondsAgo,a=n.maskedUid,i=n.startCityName,o=n.destCityName,c=n.destUrl,l=Ps(r);return j.a.createElement("span",{key:t},l?"[".concat(l,"]"):"",a,"\u9884\u8ba2\u4e86",i,o&&"\u5230",o&&!c&&"".concat(o,"\u65c5\u6e38"),o&&c&&j.a.createElement("a",{href:c,target:"_blank"},o,"\u65c5\u6e38"))})))):null}var Ns=Object(R.memo)(Ss,(function(e,t){var n=(e||{}).latestOrderInfo,r=(t||{}).latestOrderInfo,a=(n||{}).orderInfoList,i=(r||{}).orderInfoList,o=function(e){return e?"".concat(e.maskedUid,"/").concat(e.startCity,"/").concat(e.destCity,"/").concat(e.destPoiId):""};return S.a.map(a,o).join(",")===S.a.map(i,o).join(",")})),Ps=function(e){var t=Math.floor(e/60),n=Math.floor(e/3600),r=Math.floor(e/86400),a=t>0,i=r>0?"".concat(r,"\u5929"):n>0?"".concat(n,"\u5c0f\u65f6"):"".concat(t,"\u5206\u949f");return void 0==e?"":a?"".concat(i,"\u524d"):"\u521a\u521a"},ws=function(){var e=Object(L.useModelState)(),t=e.search,n=e.aroundRecommendPoiInfo,r=e.latestOrderInfo,a=e.isOnline,i=t||{},o=i.type,l=i.poi,s=i.keyword,u=l||{},d=u.type,p=u.name,f=u.inChina;d=(d||"").toUpperCase();var m=Yn[d]||[],v=Object(R.useState)(m),h=c()(v,2),g=h[0],y=h[1],b=Object(L.useCtrl)().handleLatestOrderBoxMarqueeEffect,E=Object(R.useCallback)((function(){y((function(e){return S.a.map(e,(function(e){return e&&void 0==e.toggleabe?e:ks(ks({},e),{},{toggleabe:!e.toggleabe})}))}))}),[]);return Xr(o,d,{isOnline:a})?j.a.createElement("div",{className:"seo_col"},j.a.createElement("div",{className:"detail_seo"},j.a.createElement(Cs,{poiType:d,poiName:p,keyword:s,handleToggleAll:E}),j.a.createElement(Ts,{aroundRecommendPoiInfo:n,keyword:s}),j.a.createElement(Is,{rows:g,inChina:f}),j.a.createElement(Ns,{latestOrderInfo:r,handleMarqueeEffect:b}))):null};var xs=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isOnline;return t}({isOnline:Object(L.useModelState)().isOnline})?j.a.createElement("div",{className:"bottom_advantage_wrap"},j.a.createElement("div",{className:"bottom_advantage"},j.a.createElement("dl",{className:"security"},j.a.createElement("dt",null,j.a.createElement("i",null),"6\u91cd\u65c5\u6e38\u4fdd\u969c"),j.a.createElement("dd",null,j.a.createElement("a",{href:"//pages.ctrip.com/groupTravelUED/pc/20180125/lc_guarantee.html",target:"_blank",rel:"nofollow"},"\u56e2\u961f\u6e38\u4f53\u9a8c\u4fdd\u969c")),j.a.createElement("dd",null,j.a.createElement("a",{href:"//pages.ctrip.com/groupTravelUED/pc/20180125/lc_guarantee.html",target:"_blank",rel:"nofollow"},"\u7279\u6b8a\u539f\u56e0\u9000\u8ba2\u4fdd\u969c")),j.a.createElement("dd",null,j.a.createElement("a",{href:"//pages.ctrip.com/groupTravelUED/pc/20180125/lc_guarantee.html",target:"_blank",rel:"nofollow"},"\u707e\u5bb3\u65c5\u6e38\u4f53\u9a8c\u4fdd\u969c\u91d1")),j.a.createElement("dd",null,j.a.createElement("a",{href:"//pages.ctrip.com/groupTravelUED/pc/20180125/lc_guarantee.html",target:"_blank",rel:"nofollow"},"\u65c5\u6e38\u9884\u8b66\u673a\u5236")),j.a.createElement("dd",null,j.a.createElement("a",{href:"//pages.ctrip.com/groupTravelUED/pc/20180125/lc_guarantee.html",target:"_blank",rel:"nofollow"},"\u5e94\u6025\u63f4\u52a9\u4f53\u7cfb")),j.a.createElement("dd",null,j.a.createElement("a",{href:"//pages.ctrip.com/groupTravelUED/pc/20180125/lc_guarantee.html",target:"_blank",rel:"nofollow"},"\u4e00\u7ad9\u5f0f\u65c5\u6e38\u4fdd\u9669"))),j.a.createElement("dl",{className:"help"},j.a.createElement("dt",null,j.a.createElement("i",null),"\u9884\u8ba2\u5e2e\u52a9"),j.a.createElement("dd",null,j.a.createElement("a",{href:"//pages.ctrip.com/commerce/vacations/knowledge/index.html#/",target:"_blank",rel:"nofollow"},"\u5982\u4f55\u9884\u8ba2\u65c5\u6e38\u4ea7\u54c1")),j.a.createElement("dd",null,j.a.createElement("a",{href:"//pages.ctrip.com/commerce/promote/201004/package/dj/page_4.htm",target:"_blank",rel:"nofollow"},"\u652f\u4ed8\u65b9\u5f0f")),j.a.createElement("dd",null,j.a.createElement("a",{href:"//pages.ctrip.com/commerce/vacations/use_coupon_guideline/coupon_use.html",target:"_blank",rel:"nofollow"},"\u62b5\u7528\u5238\u4f7f\u7528\u6307\u5357"))),j.a.createElement("dl",{className:"guide"},j.a.createElement("dt",null,j.a.createElement("i",null),"\u5b89\u5168\u6307\u5357"),j.a.createElement("dd",null,j.a.createElement("a",{href:"//pages.ctrip.com/commerce/promote/201004/package/dj/page_5.htm",target:"_blank",rel:"nofollow"},"\u51fa\u884c\u5b89\u5168\u5e38\u8bc6")),j.a.createElement("dd",null,j.a.createElement("a",{href:"//pages.ctrip.com/commerce/promote/201004/package/dj/page_5.htm",target:"_blank",rel:"nofollow"},"\u65c5\u6e38\u6d3b\u52a8\u98ce\u9669\u9632\u8303")),j.a.createElement("dd",null,j.a.createElement("a",{href:"//pages.ctrip.com/commerce/promote/201004/package/dj/page_5.htm",target:"_blank",rel:"nofollow"},"\u7279\u6b8a\u4eba\u7fa4\u5b89\u5168\u9632\u8303"))))):null};var Ds=function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isBestone;return t}({isBestone:Object(L.useModelState)().isBestone})?j.a.createElement("div",{className:"footer_box"},j.a.createElement("div",{className:"footer_nav"},j.a.createElement("p",{className:"copyright"},j.a.createElement("a",{href:"https://pages.ctrip.com/public/copyright.htm",target:"_blank"},"Copyright\xa9"),"\xa02007-2019\xa0\u65c5\u6e38\u767e\u4e8b\u901a\u7248\u6743\u6240\u6709\xa0\xa0\u65c5\u884c\u793e\u8bb8\u53ef\u8bc1\u7f16\u53f7\uff1aL-CQ-CJ00001"))):null},Rs=["containerCls","btnCls","iconCls","text"];var js=function(e){var t=e.containerCls,n=e.btnCls,r=e.iconCls,a=e.text,i=Dt()(e,Rs),o=function(){var e=Object(R.useState)({display:"none"}),t=c()(e,2),n=t[0],r=t[1],a=Object(R.useState)(!1),i=c()(a,2),o=i[0],l=i[1],s=Object(R.useState)(!1),u=c()(s,2),d=u[0],p=u[1],f=Object(R.useState)(!1),m=c()(f,2),v=m[0],h=m[1];return Object(R.useEffect)((function(){var e=Object(pc.b)((function(){var e=document.documentElement.scrollTop||document.body.scrollTop;l(e>document.documentElement.clientHeight)}),300);return window.addEventListener("scroll",e),e(),function(){window.removeEventListener("scroll",e)}}),[]),Object(R.useEffect)((function(){var e;return o?d?e=Object(pc.d)(0,1,(function(e){r({display:"block",opacity:e})}),(function(){r({display:"block"})})):(r({display:"block"}),p(!0)):v?e=Object(pc.d)(1,0,(function(e){r({display:"block",opacity:e})}),(function(){r({display:"none"})})):(r({display:"none"}),h(!0)),e}),[o,d,v]),{boxStyle:n,onTopClick:Object(R.useCallback)((function(){window.scrollTo(0,0)}),[])}}(),l=o.boxStyle,s=o.onTopClick;return t=t||"",n=n||"revision_function_btn",r=r||"revision_function_top",a=a||"\u56de\u5230\u9876\u7aef",j.a.createElement("li",U()({className:t,onClick:s},i),j.a.createElement("a",{href:"javascript:void(0);",className:n,style:l},j.a.createElement("i",{className:r}),a))};var As=function(e){return e?"grp-".concat(e,"-right-service"):""},Ls=function(){var e=Object(L.useModelState)(),t=e.isOnline,n=e.pageId,r=Object(R.useState)(!1),a=c()(r,2),i=a[0],o=a[1],l=As(n),s=Object(R.useCallback)((function(){o(!0)}),[]),u=Object(R.useCallback)((function(){o(!1)}),[]),d=Object(L.useCtrl)().handleJumpIM;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isOnline;return t}({isOnline:t})?j.a.createElement("li",{id:l,onMouseEnter:s,onMouseLeave:u,onClick:d},j.a.createElement("a",{href:"javascript:;",className:"revision_function_btn"},j.a.createElement("i",{className:"list_function_kefu"}),"\u5728\u7ebf\u5ba2\u670d"),i&&j.a.createElement("div",{className:"list_function_collect_pop"},j.a.createElement("span",{className:"revision_mark"},j.a.createElement("i",null),j.a.createElement("b",null)),j.a.createElement("div",{className:"customer_service_box"},j.a.createElement("div",{className:"customer_service_left"},j.a.createElement("img",{src:"//pic.c-ctrip.com/VacationOnlinePic/vacation_v2/searchresult/zixun02.png",alt:"\u54a8\u8be2"})),j.a.createElement("div",{className:"customer_service_right"},j.a.createElement("p",{className:"customer_service_title"},"\u8054\u7cfb\u5728\u7ebf\u5ba2\u670d"),j.a.createElement("p",{className:"customer_service_text"},"\u670d\u52a1\u65f6\u95f4: 8:00~23:00"),j.a.createElement("p",{className:"customer_service_text"},"\u643a\u7a0b\u5ba2\u670d\u4e13\u5458\u63d0\u4f9b\u5728\u7ebf\u670d\u52a1\uff0c\u89e3\u7b54\u5ea6\u5047\u76f8\u5173\u95ee\u9898"))))):null};var Bs=function(){var e=Object(L.useModelState)(),t=e.isOnline,n=e.telNumber,r=Object(R.useState)(!1),a=c()(r,2),i=a[0],o=a[1],l=Object(R.useCallback)((function(){o(!0)}),[]),s=Object(R.useCallback)((function(){o(!1)}),[]);return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.isOnline,n=e.telNumber;return t&&n}({isOnline:t,telNumber:n})?j.a.createElement("li",{onMouseEnter:l,onMouseLeave:s},j.a.createElement("a",{className:"revision_function_btn",href:"javascript:;"},j.a.createElement("i",{className:"list_function_collect"}),"\u8054\u7cfb\u6211\u4eec"),i&&j.a.createElement("div",{className:"list_function_kefu_pop"},j.a.createElement("span",{className:"revision_mark"},j.a.createElement("i",null),j.a.createElement("b",null)),j.a.createElement("div",{className:"customer_service_box"},j.a.createElement("div",{className:"customer_service_left"},j.a.createElement("img",{src:"//pic.c-ctrip.com/VacationOnlinePic/vacation_v2/searchresult/zixun01.png",alt:"\u62e8\u6253"})),j.a.createElement("div",{className:"customer_service_right"},j.a.createElement("p",{className:"customer_service_title"},"\u552e\u524d\u54a8\u8be2\u7535\u8bdd"),j.a.createElement("p",{className:"customer_service_text_blue"},n),j.a.createElement("p",{className:"customer_service_text"},"\u670d\u52a1\u65f6\u95f4: 7:00~24:00"),j.a.createElement("p",{className:"customer_service_text"},"\u7535\u8bdd\u63a5\u901a\u540e\uff0c\u8bf7\u544a\u77e5\u5ba2\u670d\u51fa\u884c\u76ee\u7684\u5730\u3001\u5929\u6570\u7b49\u610f\u5411"))))):null},Us=n(609);function Ms(){var e=Object(L.useModelState)(),t=e.isOnline,n=e.isOffline,r=e.isBestone;return ea({isOffline:n})?t?j.a.createElement("ul",{className:"revision_side_function"},j.a.createElement(Ls,null),j.a.createElement(Bs,null),j.a.createElement(js,null)):r?j.a.createElement("ul",{className:"side_function"},j.a.createElement(js,{btnCls:"function_btn",iconCls:"function_top"})):null:null}var Fs=function(){var e=Object(L.useModelState)(),t=e.isOnline,n=e.isOffline,r=e.isBestone,a=e.telNumber,i=e.tab,o=e.pageId;if(!ea({isOffline:n}))return null;if(jr(i))return j.a.createElement(Ms,null);if(t){var c={btnId:o?"grp-".concat(o,"-right-service"):"",pageType:"search",servicePhoneNum:a};return j.a.createElement(Us.b,{isAbleBackTop:!0},j.a.createElement(Us.a,c))}return r?j.a.createElement(Us.b,{isAbleBackTop:!0}):null};var Vs=["isWarning"],Hs=["content","imageUrl"];var Gs,qs,zs=(Gs=function(){var e=Object(L.useModelState)().transitLoading;return j.a.createElement(j.a.Fragment,null,j.a.createElement(_s,null),j.a.createElement(ws,null),j.a.createElement(xs,null),j.a.createElement(Ds,null),j.a.createElement(Fs,null),e&&j.a.createElement(Bl,null))},qs=function(e){var t=e.content,n=e.imageUrl,r=Dt()(e,Hs);return n=n||"//pic.c-ctrip.com/VacationOnlinePic/vacation_v2/searchresult/list2019_icon/yoyo02.gif",t=t||"\u7f51\u7edc\u4e0d\u7ed9\u529b\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5",j.a.createElement("div",U()({className:"list_no_box"},r),j.a.createElement("img",{className:"list_no_pic02",src:n}),j.a.createElement("div",{className:"list_no_text_box"},j.a.createElement(Dc,{className:"list_no_text02",as:"p",html:t})))},function(e){var t=e||{},n=t.isWarning,r=Dt()(t,Vs);return n?j.a.createElement(qs,r):Gs?j.a.createElement(Gs,r):null});function Ys(){var e=Object(L.useModelState)().criticalWarning;return j.a.createElement(j.a.Fragment,null,j.a.createElement(A.Style,{name:"list_ssr"}),j.a.createElement(Tt,null),j.a.createElement(St,null),j.a.createElement(zs,{isWarning:e}))}function Ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ws(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ks={html:{title:"",description:"",keywords:""},departureCity:{cityId:0,saleCityId:0,cityName:null},search:{type:null,keyword:"",ename:""},currentFilters:[],allFilters:[],totalFilters:[],prefers:[],navigation:null,recommendProducts:[],products:[],crumbs:[],serverMeta:{},isVipUser:!1,isAdCollapsed:!1,loading:!1,telNumber:"",screenWidthInfo:{},isVisaMigrated:!0,isThemeTravelMigrated:!0},Js=function(e,t){return Qs(Qs({},e),{},{departureCity:Qs(Qs({},e.departureCity),t)})},Xs=function(e,t){var n=(t.Data||{}).DepartureCityList;n=n||[];var r=e.departureCity;return r=function(e,t){for(var n=0;n<e.length;n++){var r=e[n].CityList,a=(r=r||[]).find((function(e){return e.DepartureCityId==t}));if(a){var i=a.DepartureCityName,o=a.SaleCityId;return{cityId:t,saleCityId:o,cityName:i}}}return null}(n,(r||{}).cityId)||Ut,Qs(Qs({},e),{},{departureCity:r})},Zs=function(e,t){var n,r,a=e.search,i=e.isOnline,o=(a||{}).poi,c=(o||{}).id,l=t||{},s=l.tab,u=l.poiType,d=l.poiName,p=l.poiId,f=l.filter,m=l.keyword,v=l.isSearchCompleted,h=oa({isOnline:i,tabEname:s}).ename;(s=s||h,u)?n=Qs({type:Wt,poi:Qs(Qs(Qs(Qs({},c==p?o:null),void 0==p?null:{id:p}),void 0==u?null:{type:u}),void 0==d?null:{ename:d})},void 0==m?null:{keyword:m}):n=Qs({type:Yt},void 0==m?null:{keyword:m});return r=jn.find((function(e){return e.ename==s}))||{},Qs(Qs({},e),{},{search:n,currentTabInfo:r,isSearchCompleted:v},void 0==f?null:{currentFilters:si(f)})},$s=function(e,t){var n=t.poiQuery,r=!n||!n.length;if(r)return Qs(Qs({},e),{},{isPoiFetchedEmpty:r});var a=((n=n||[])[0]||{}).name;return Qs(Qs({},e),{},{search:Qs({type:Wt,poi:pa(n[0])},void 0==a?null:{keyword:a})})},eu=function(e,t){var n=e.search,r=e.search.poi,a=function(e,t){if(!t||!t.poiQuery||!e.path)return null;var n=t.poiQuery;return n=n||[],S.a.compact(S.a.map(e.path,(function(e){var t=e.id,r=n.find((function(e){return e.id==t}));return r?pa(r):null})))}(r,t);return Qs(Qs({},e),{},{search:Qs(Qs({},n),{},{poi:Qs(Qs({},r),{},{path:a})})})},tu=function(e){var t=e.search,n=e.currentTabInfo,r=e.currentFilters,a=e.serverPoiPath,i=e.isOnline,o=e.isOffline,c=e.isBestone,l=e.query;return Qs(Qs({},e),{},{crumbs:Ui(t,n,r,a,l,{isOnline:i,isOffline:o,isBestone:c})})},nu=function(e,t){var n=e.departureCity.cityName,r=e.isOnline,a=e.isOffline,i=e.isBestone;return Qs(Qs({},e),{},{navigation:da(t,n,{isOnline:r,isOffline:a,isBestone:i})})},ru=function(e,t){var n=e.search,r=e.search.keyword,a=e.currentTabInfo,o=e.currentFilters,l=e.allFilters,s=(e.isOnline,e.isOffline,e.isBestone),u=(e.env,t||{}),d=u.filters,p=u.total,f=void 0===p?0:p,m=u.prefers,v=u.products,h=u.recommendProducts,g=u.tabs,y=u.server||{},b=y.variables,E=y.poiPath;d=d||[],m=m||[],v=v||[],h=h||[],g=g||[],b=b||[],E=E||[];var _=[].concat(i()(v),i()(h)).length;o=va(o,l),a=ha(a,g);var O=Aa(b),k=ja(b),C=function(e){var t=(S.a.find(e,(function(e){return e&&e.key===Kn.ub}))||{}).value;return Object(dr.p)(t)||[]}(b),T=xa(b),I=Da(b),N=Ra(b),P=Pa(b),w=wa(b),x=Na(b),D=Rr(b,g,e),R=function(e){var t=(S.a.find(e,(function(e){return e&&e.key===Kn.kb}))||{}).value;return parseInt(t)||0}(b),j=function(e){return{selectedPrefer:(e=(e=e||[]).filter((function(e){return!ei(e)})).map((function(e){for(var t=e.type,n=e.values,r={},a=0,i=Object.entries(Kn.s);a<i.length;a++){var o=c()(i[a],2),l=o[0],s=o[1],u=s.server,d=s.describe;if(u==t){r.clientType=l,r.describe=d,r.value=n[0],r.traceType=e.flag;break}}return S.a.omit(ua(ua({},e),r),["flag","values"])}))).filter((function(e){return e.selected})),unselectedPrefer:e.filter((function(e){return!e.selected}))}}(m),A=j.selectedPrefer,L=j.unselectedPrefer,B=E;return Qs(Qs({},e),{},{total:f,currentTotal:_,html:zi({search:n,total:f,currentFilters:o,currentTabInfo:a}),prefers:L,selectedPrefers:A,currentFilters:o,currentTabInfo:a,totalFilters:Ea(d,o,a,r,s),products:Oa(v),recommendProducts:Oa(h),isVipUser:O,isAdCollapsed:O,isCrawlerLoad:k,riskWarning:C,serverVipLevel:T,serverIsSuperUser:I,privateGroupCount:N,serverSightPoi:P,serverTraceId:w,serverAnalysis:x,serverTargetTab:D,serverPoiPath:B,destCityIdOfStore:R})},au=function(e,t){var n=t||{},r=n.filters,a=n.tabs;return r=r||[],a=ga(a=a||[]),Qs(Qs({},e),{},{totalTabs:_a(a,e),allFilters:ma(r)})},iu=function(e,t){var n=e.search,r=e.search.keyword,a=e.currentTabInfo,o=e.currentFilters,l=e.allFilters,s=e.isOnline,u=(e.isOffline,e.isBestone),d=e.pageNumber,p=(e.env,t||{}),f=p.total,m=void 0===f?0:f,v=p.filters,h=p.fastFilters,g=p.products,y=p.recommends,b=p.riskPolicyInfos,E=p.tabs,_=p.server,O=p.needTailoring,k=_||{},C=k.extras,T=k.destinationPath;v=v||[],h=h||[],g=g||[],y=y||[],C=C||{},T=T||[],b=b||[],E=ga(E=E||[]),h=function(e){var t=null===e||void 0===e?void 0:e.find((function(e){return"TOP"==(null===e||void 0===e?void 0:e.type)}));return(null===t||void 0===t?void 0:t.items)||[]}(h),g=Ta(g,y,{currentTabInfo:a,pageNumber:d,isOnline:s,variables:C});var I=[].concat(i()(g),i()(y)).length;o=va(o,l),a=ha(a,E);var N=function(e,t){return{selectedPrefer:(e=(e=e||[]).filter((function(e){return!ei(e)})).map((function(e){for(var n=e.type,r=e.values,a={},i=0,o=Object.entries(Kn.s);i<o.length;i++){var l=c()(o[i],2),s=l[0],u=l[1],d=u.server,p=u.describe;if(d==n){var f;a.clientType=s,a.describe=p,a.value=r[0],a.traceType=e.flag;var m=null===t||void 0===t?void 0:t.find((function(e){return e.type==n}));if(null!==m&&void 0!==m&&null!==(f=m.items)&&void 0!==f&&f.length){var v,h=null===(v=m.items)||void 0===v?void 0:v.map((function(e){return e.value}));null!==h&&void 0!==h&&h.includes(a.value)&&(a.selected=!0)}break}}return S.a.omit(ua(ua({},e),a),["flag","values"])}))).filter((function(e){return e.selected})),unselectedPrefer:e.filter((function(e){return!e.selected}))}}(h,o),P=N.selectedPrefer,w=N.unselectedPrefer,x=Aa(C),D=ja(C),R=xa(C),j=Da(C),A=Ra(C),L=Pa(C),B=wa(C),U=Na(C),M=Rr(C,E,e),F=T;return Qs(Qs({},e),{},{total:m,currentTotal:I,html:zi({search:n,total:m,currentFilters:o,currentTabInfo:a}),prefers:w,selectedPrefers:P,currentFilters:o,currentTabInfo:a,totalFilters:Ea(v,o,a,r,u),products:ka(g,u,O),recommendProducts:ka(y,u,O),preloadProductImageList:Ca(g,y),isVipUser:x,isAdCollapsed:x,isCrawlerLoad:D,riskWarning:b,serverVipLevel:R,serverIsSuperUser:j,privateGroupCount:A,serverSightPoi:L,serverTraceId:B,serverAnalysis:U,serverTargetTab:M,serverPoiPath:F,serverMeta:C})},ou=function(e,t){return Qs(Qs({},e),{},{operationBanner:t})},cu=function(e,t){var n=(t||{}).ResultList,r=e.products,a=e.recommendProducts;return Qs(Qs({},e),{},{products:Ia(r,n),recommendProducts:Ia(a,n)})},lu=function(e,t){var n=e.productCommentMap,r=t||{},a=r.productId,i=r.comments;if(a>0&&i&&i.length){var o=Qs(Qs({},n),{},T()({},a,i));return Qs(Qs({},e),{},{productCommentMap:o})}return e},su=function(e,t){return Qs(Qs({},e),{},{isAdCollapsed:!!t})},uu=function(e,t){return Qs(Qs({},e),{},{transitLoading:t})},du=function(e,t){return Qs(Qs({},e),{},{criticalWarning:t})},pu=function(e,t){var n=function(e){var t=(e||{}).result;if(!t||!t.length)return null;var n=t[0],r=n||{},a=r.seoEName,i=r.eName,o=r.districtId,c=(a||i)&&o>0?"//you.ctrip.com/place/".concat(a||Object(dr.l)(i).toLowerCase()).concat(o,".html"):"//you.ctrip.com/";return ua(ua({},n),{},{districtDetailUrl:c})}(t);return S.a.isEmpty(n)?e:Qs(Qs({},e),{},{districtDetail:n})},fu=function(e,t){var n=function(e){var t=(e||{}).GetDistrictWeatherForecastListResponseType;if(!t||!t.length)return null;var n=(t[0]||{}).WeatherForecasts;return n&&n.length?S.a.map(n,(function(e){var t=e||{},n=t.DayWeatherNo,r=t.DayTemperature,a=t.NightTemperature;n=+n||0,a=+a||-100;var i=-100!==(r=+r||-100)&&-100!==a,o=Math.min(r,a),c=Math.max(r,a);return ua(ua({},e),{},{DayWeatherNo:n,hasTemperature:i,minTemperature:o,maxTemperature:c})})):null}(t);return S.a.isEmpty(n)?e:Qs(Qs({},e),{},{weatherForecasts:n})},mu=function(e,t){var n=function(e){var t=e||{},n=t.districtName,r=t.travelResult;if(!r||!r.length)return null;var a=r[0]||{},i=a.districtEName,o=a.districtId;return{districtName:n,moreTravelRecordUrl:i&&o>0?"//you.ctrip.com/travels/".concat(i).concat(o,".html"):"//you.ctrip.com/",travelRecords:r}}(t);return S.a.isEmpty(n)?e:Qs(Qs({},e),{},{travelRecordInfo:Qs(Qs({},e.travelRecordInfo),n)})},vu=function(e,t){var n=(t||{}).items;return n&&n.length?Qs(Qs({},e),{},{otherCities:n.map((function(e){return e.city})).slice(0,8)}):e},hu=function(e,t){var n=t.TotalRecord,r=t.FavoriteList;return Qs(Qs({},e),{},{favoriteCount:n,defaultFavorites:r})},gu=function(e,t){var n=t.TotalRecord,r=t.FavoriteList;return Qs(Qs({},e),{},{favoriteCount:n,favoriteList:r})},yu=function(e,t){var n=function(e){var t=e||{},n=t.recommendPoiName,r=t.recommendPoiTitle,a=t.resp||{},i=a.result;return{recommendPoiName:n,recommendPoiTitle:r,recommendPoiMoreUrl:"",recommendPoiTotalCount:a.totalCount,recommendPoiList:S.a.map(i,(function(e){var t=e||{},n=t.districtEName,r=t.districtId,a=t.businessId,i=t.businessDesc,o=t.introduce;n=dr.l(n).toLowerCase();var c="//you.ctrip.com/sight/".concat(n).concat(r,"/").concat(a,".html"),l=i||S.a.trim(dr.k(o));return ua(ua({},e),{},{districtUrl:c,coverImageUrl:null,introduceText:l})}))}}(t);return Qs(Qs({},e),{},{recommendPoiInfo:n})},bu=function(e,t){var n=e.recommendPoiInfo,r=function(e,t){var n=S.a.mapValues(S.a.groupBy(S.a.compact(S.a.map(t,(function(e){return e.imageSizeMap&&e.imageSizeMap.length&&e.imageSizeMap[0]?{key:e.id,value:e.imageSizeMap[0].imageUrl}:null}))),(function(e){return e.key})),(function(e){return e[0].value}));return S.a.map(e,(function(e){var t=(e||{}).coverImageId,r=dr.o(S.a.isEmpty(n)?null:n[t]);return ua(ua({},e),{},{coverImageUrl:r})}))}((n||{}).recommendPoiList,(t||{}).result);return Qs(Qs({},e),{},{recommendPoiInfo:Qs(Qs({},n),{},{recommendPoiList:r})})},Eu=function(e,t){var n=e||{},r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(t.isOnline,t.isOffline,t.isBestone,e||{}),r=n.resp,a=n.parentPoi,i=r||{},o=i.items,c=S.a.map(o,(function(e){var t=e||{};return{searchUrl:t.searchUrl,poiName:(t.poi||{}).name||""}}));return{aroundRecommendPoiList:c,parentPoi:a}}(t,{isOnline:n.isOnline,isOffline:n.isOffline,isBestone:n.isBestone});return Qs(Qs({},e),{},{aroundRecommendPoiInfo:r})},_u=function(e,t){var n=fi(t);return Qs(Qs({},e),{},{latestOrderInfo:n})},Ou=function(e,t){var n,r,a=(e.latestOrderInfo||{}).orderInfoList,i=(n=a,r=t,S.a.map(n,(function(e){var t=(r||{}).locationInfos,n=S.a.find(t,(function(t){return t&&t.globalid==e.startCity})),a=n&&n.name?n.name:"",i=S.a.find(t,(function(t){return t&&t.globalid==e.destCity})),o=i&&i.name?i.name:"";return ua(ua({},e),{},{startCityName:a,destCityName:o})})));return Qs(Qs({},e),{},{latestOrderInfo:Qs(Qs({},e.latestOrderInfo),{},{orderInfoList:i})})},ku=function(e,t){var n=(e.latestOrderInfo||{}).orderInfoList,r=mi(n,t);return Qs(Qs({},e),{},{latestOrderInfo:Qs(Qs({},e.latestOrderInfo),{},{orderInfoList:r})})},Cu=function(e,t){var n=t.bestoneStoreList;if(!n||!n.length)return e;var r=e.bestoneInfo;return Qs(Qs({},e),{},{bestoneInfo:Qs(Qs({},r),n[0])})},Tu=function(e,t){return Qs(Qs({},e),{},{total:0,isSearchCompleted:!0})},Iu=function(e,t){var n=(e||{}).products,r=(t||{}).shopInfoList,a=S.a.map(r,(function(e,t){return Qs(Qs({},e),{},{product:n[t]})}));return Qs(Qs({},e),{},{shopInfoList:a})},Su=n(546);function Nu(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return Pu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pu(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function Pu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function wu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wu(Object(n),!0).forEach((function(t){T()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Du(e,t,n){return t=_()(t),v()(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],_()(e).constructor):t.apply(e,n))}var Ru=function(e){function t(e,n){var a;return d()(this,t),a=Du(this,t,[e,n]),T()(g()(a),"View",Ys),T()(g()(a),"Model",r),T()(g()(a),"resetScrollOnMount",!1),T()(g()(a),"exposeContainer",{}),T()(g()(a),"handleFetchNavigationInfo",s()(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.getState(),n=Pi(t),e.next=4,a.post(a.API.navigationInfo,n);case 4:r=e.sent,(0,a.store.actions.UPDATE_NAVIGATION)(r);case 7:case"end":return e.stop()}}),e)})))),T()(g()(a),"handleCityChanged",(function(e){var t=a.store.getState(),n=t.departureCity,r=t.search,i=t.currentTabInfo,o=t.isOnline,c=t.isOffline,l=t.isBestone,s=t.isVisaMigrated,u=t.isThemeTravelMigrated,d=a.context.env,p=(i||{}).id,f=vr({search:r,tabInfo:i,nextCity:e,departureCity:n,sortType:Ii({tabId:p,isBestone:l}),location:a.location,env:d,isOnline:o,isOffline:c,isBestone:l,isVisaMigrated:s,isThemeTravelMigrated:u});a.navigateTo(f)})),T()(g()(a),"handleFilterChanged",(function(e){var t=a.store.getState(),n=t.departureCity,r=t.search,i=t.currentTabInfo,o=t.isOnline,c=t.isOffline,l=t.isBestone,s=t.isVisaMigrated,u=t.isThemeTravelMigrated,d=a.context.env,p=vr({search:r,filterList:e,tabInfo:i,departureCity:n,location:a.location,env:d,isOnline:o,isOffline:c,isBestone:l,isVisaMigrated:s,isThemeTravelMigrated:u});a.navigateTo(p)})),T()(g()(a),"handlePageChanged",(function(e){var t=a.store.getState(),n=t.search,r=t.currentFilters,i=t.currentTabInfo,o=t.departureCity,c=t.isOnline,l=t.isOffline,s=t.isBestone,u=t.isVisaMigrated,d=t.isThemeTravelMigrated,p=a.context.env,f=vr({search:n,filterList:r,tabInfo:i,departureCity:o,pageNumber:e,location:a.location,env:p,isOnline:c,isOffline:l,isBestone:s,isVisaMigrated:u,isThemeTravelMigrated:d});a.navigateTo(f)})),T()(g()(a),"handleSortChanged",(function(e){var t=a.store.getState(),n=t.search,r=t.currentFilters,i=t.currentTabInfo,o=t.departureCity,c=t.isOnline,l=t.isOffline,s=t.isBestone,u=t.isVisaMigrated,d=t.isThemeTravelMigrated,p=a.context.env,f=vr({search:n,filterList:r,tabInfo:i,departureCity:o,sortType:e,location:a.location,env:p,isOnline:c,isOffline:l,isBestone:s,isVisaMigrated:u,isThemeTravelMigrated:d});a.navigateTo(f)})),T()(g()(a),"handleTabChanged",(function(e){var t=a.store.getState(),n=t.search,r=t.departureCity,i=t.isOnline,o=t.isOffline,c=t.isBestone,l=t.isVisaMigrated,s=t.isThemeTravelMigrated,u=a.context.env,d=vr({search:n,tabInfo:e,departureCity:r,sortType:Ii({tabId:+e.id,isBestone:c}),location:a.location,env:u,isOnline:i,isOffline:o,isBestone:c,isVisaMigrated:l,isThemeTravelMigrated:s,isTabChanged:!0}),p=+e.id;a.logActionInfo({value:p,role:"usr",action:"click",scene:"tab\u5207\u6362",module:"tab"}),yr(p)||br({tabId:p,isOffline:o,isBestone:c})||Er({tabId:p,isOnline:i})||Hr({tabId:p})?a.navigateTo(d):window.location.href=d})),T()(g()(a),"handleSearchChanged",(function(e,t){var n=a.store.getState(),r=n.departureCity,i=n.isOnline,o=n.isOffline,c=n.isBestone,l=n.isVisaMigrated,s=n.isThemeTravelMigrated,u=a.context.env,d=oa({isOnline:i,tabId:t}).id;t=t||d;var p=vr({search:e,tabInfo:jn.find((function(e){return e.id==t})),departureCity:r,sortType:Ii({tabId:t,isBestone:c}),location:a.location,env:u,isOnline:i,isOffline:o,isBestone:c,isVisaMigrated:l,isThemeTravelMigrated:s});a.navigateTo(p)})),T()(g()(a),"handleFetchProductComment",function(){var e=s()(regeneratorRuntime.mark((function e(t){var n,r,i,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n={productId:t,sortType:2,paging:{pageSize:6,pageNo:1}},r=null,e.prev=2,i=a.store.getState(),!(o=i.productCommentMap)||!o[t]){e.next=8;break}r=o[t],e.next=15;break;case 8:return e.next=10,a.post(a.API.listComments,n);case 10:c=e.sent,l=(c||{}).comments,r=Sa(l),(0,a.store.actions.UPDATE_PRODUCT_COMMENT_MAP)({productId:t,comments:r});case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2);case 20:return e.abrupt("return",r);case 21:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}()),T()(g()(a),"handleGoToDetail",(function(e){var t=e.product,n=e.traceInfo,r=e.attachInfo,i=n.isRecommend,o=n.innerPos;a.trackListProductClick({product:t,isRecommend:i,innerPos:o,attachInfo:r}),a.goToProductDetail(t,r)})),T()(g()(a),"handleGoToComment",(function(e){a.goToProductDetail(e)})),T()(g()(a),"handleFoldAdProducts",(function(){(0,a.store.actions.UPDATE_AD_FOLD_STATUS)(!0)})),T()(g()(a),"handleUnfoldAdProducts",(function(){(0,a.store.actions.UPDATE_AD_FOLD_STATUS)(!1)})),T()(g()(a),"handleJumpIM",(function(){var e=a.store.getState().pageId,t=("prod"==a.context.env?"//vacations.ctrip.com/tour/im/group":"//vacations.ctrip.fat30.qa.nt.ctripcorp.com/tour/im/group")+"?"+x.a.stringify({pageId:e,isPreSale:1,platformId:4,IMCode:"00000900"});a.goTo(t)})),T()(g()(a),"handleJumpMemberRight",(function(e){a.goTo(e)})),T()(g()(a),"handlePost",(function(){var e;return(e=a).post.apply(e,arguments)})),T()(g()(a),"handleFetch",(function(){var e;return(e=a).fetch.apply(e,arguments)})),T()(g()(a),"handleGoToAllFavorites",(function(){var e=(a.store.getState().currentTabInfo||{}).id,t="";Mr(e)?t="GROUP_TRAVEL|0|0|4|0|0|0":Fr(e)?t="PLANE_HOTEL|0|0|6|0|0|0":Lr(e)&&(t="VACATION_GROUP|0|0|5|0|0|0");var n="//my.ctrip.com/favorite/myfav#".concat(t);a.goTo(n)})),T()(g()(a),"handleRemoveFavorite",function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.post(a.API.myFavoritesDelete,{FavoriteIdList:[t]});case 3:if(0===e.sent.ResultCode){e.next=6;break}return e.abrupt("return");case 6:n?(r=a.store.getState(),0==r.favoriteList.length&&n--,a.getPageFavorites((n-1)*Kn.f,n*Kn.f)):a.getDefaultFavorites(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),T()(g()(a),"handleGoToDistrictDetail",(function(e){a.goTo(e)})),T()(g()(a),"handleFetchBrowserHistory",function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.getBrowserHistory(t);case 2:return n=e.sent,e.abrupt("return",di(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),T()(g()(a),"handleLatestOrderBoxMarqueeEffect",(function(e){var t=e&&e.current?e.current:null;t&&function(e,t){var n;t=t||50;for(var r=e.querySelectorAll("span"),a=0;r.length>a;a++){var i=r[a].cloneNode(!0);e.appendChild(i),0==a&&(n=i.offsetLeft-r[0].offsetLeft)}setInterval((function(){n>e.scrollLeft?e.scrollLeft++:e.scrollLeft=0}),t)}(t)})),T()(g()(a),"handleBackToSearchBoxTop",(function(){a.scrollToSearchBoxTop()})),T()(g()(a),"handleBackToFilterBoxTop",(function(){a.scrollToFilterBoxTop()})),T()(g()(a),"handleChangeBestoneType",(function(e){var t=e?Ln:Bn,n=e?"\u767e\u4e8b\u901a_\u5207\u5230\u540c\u884c\u4ef7":"\u767e\u4e8b\u901a_\u5207\u5230\u5efa\u8bae\u5356\u4ef7";a.removeCookie("Booking_TradeStatus"),a.setCookie("Booking_TradeStatus",t,{expires:new Date(Date.now()+24e5),domain:dr.f()}),a.trackSimpleFunctionClick({fun:n,trackType:"bestone"}),a.reload()})),T()(g()(a),"handleChangeBestoneFilterType",(function(e){var t=a.store.actions.UPDATE_STATE,n=e?1:0;a.removeCookie("PriceFilter"),a.setCookie("PriceFilter",n,{expires:new Date(Date.now()+24e5),domain:dr.f()}),t({isTradeFilter:e})})),T()(g()(a),"handleBestonTrack",(function(e){a.trackBestoneSearchBox(e)})),T()(g()(a),"handleJumpYouxueQuality",(function(){var e=vn;a.goTo(e)})),T()(g()(a),"handleJumpDiamond",(function(){var e=(a.store.getState().currentTabInfo||{}).id,t=Fr(e)?gn:hn;a.goTo(t)})),T()(g()(a),"handlePageBack",(function(){a.history.goBack()})),T()(g()(a),"handlePrivateGroupEntryClick",(function(){var e={id:en.PRIVATE_GROUP,ename:"personalgroup"},t=a.store.getState(),n=t.search,r=t.departureCity,i=t.isOnline,o=t.isOffline,c=t.isBestone,l=t.isVisaMigrated,s=t.isThemeTravelMigrated,u=a.context.env,d=vr({search:n,tabInfo:e,departureCity:r,sortType:Ii({tabId:en.PRIVATE_GROUP,isBestone:c}),location:a.location,env:u,isOnline:i,isOffline:o,isBestone:c,isVisaMigrated:l,isThemeTravelMigrated:s});d="//".concat(window.location.host,"/list").concat(d),a.goTo(d)})),T()(g()(a),"handleGoToStoreDetail",(function(e){var t=a.store.getState(),n=function(e){var t=e.shop,n=e.destCityIdOfStore,r=e.startCityId,a=e.query,i=e.isOffline,o=e.isBestone,c=e.env,l=t||{},s=l.product,u=l.brandId,d=l.providerId,p=l.shopId,f=(s||{}).id,m=a||{},v=m.uid,h=m.cookieid;if(!f||f<0)return null;var g={productid:f,brandid:+u>0?u:"",deptcityid:+r>0?+r:"",deptcityname:"",destcityid:+n>0?+n:"",providerid:+d>0?+d:"",shopid:+p>0?+p:""},y="";if(i)g=ua(ua({},g),{},{uid:v,cookieid:h});else if(o){y={fat:"//tourbst.ctrip.fat30.qa.nt.ctripcorp.com",uat:"//tourbst.ctrip.uat.qa.nt.ctripcorp.com",prod:"//tourbst.ctrip.com"}[c=(c||"prod").toLowerCase()]||""}return"".concat(y,"/travel/store-detail?").concat(x.a.stringify(g))}({shop:e,destCityIdOfStore:t.destCityIdOfStore,startCityId:t.startCityId,query:t.query,isOffline:t.isOffline,isBestone:t.isBestone,env:a.context.env});a.goTo(n)})),T()(g()(a),"handleToggleFilterHasSegment",(function(){var e=a.store.getState().query,t=a.getPathnameWithoutBasename(),n=xu(xu({},e),{},{hssg:"1"===e.hssg?"0":"1"}),r="".concat(t,"?").concat(x.a.stringify(n));a.navigateTo(r)})),T()(g()(a),"setPageMeta",(function(){var e=a.store.actions.UPDATE_STATE,t=a.getPageMeta(),n=t.pageId,r=t.pageTab;a.asyncSetPageId(n),e({pageTab:r})})),T()(g()(a),"setPageParams",(function(){(0,a.store.actions.UPDATE_STATE)(a.getPageParams())})),T()(g()(a),"setEnvParams",(function(){(0,a.store.actions.UPDATE_STATE)(a.getEnvParams())})),T()(g()(a),"initStartCity",s()(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.actions.UPDATE_DEPARTURE_CITY,e.t1=a.getStartCityFromQuery()||a.getStartCityFromPath()||a.getStartCityFromCookie(),e.t1){e.next=6;break}return e.next=5,a.getStartCityFromServer();case 5:e.t1=e.sent;case 6:if(e.t0=e.t1,e.t0){e.next=9;break}e.t0=Ut;case 9:return n=e.t0,t(n),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})))),T()(g()(a),"initStartCityList",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.departureCity,i=(r=n||{}).cityId,o=r.cityName,c=r.saleCityId,i&&o&&c){e.next=5;break}return e.next=5,a.getDepartureCityList();case 5:case"end":return e.stop()}}),e)})))),T()(g()(a),"fixPageParams",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,l,s,u,d,p,f,m,v,h,g,y,b,E,_,O,k,C,T,I,S,N,P,w,D,R,j,A,L,B,U,M,F,V,H,G,q,z,Y,W,Q,K,J,X,Z,$,ee,te,ne,re,ae,ie,oe,ce,le,se,ue,de,pe,fe,me,ve,he,ge,ye,be,Ee,_e,Oe;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=a.store.getState(),n=a.store.actions.UPDATE_SEARCH_NO_RESULT,r=t.currentTabInfo,i=t.currentFilters,o=t.total,l=t.departureCity,s=t.search,u=t.serverTargetTab,d=t.serverSightPoi,p=t.productId,f=t.query,m=t.isOnline,v=t.isOffline,h=t.isBestone,g=t.serverMeta,y=t.isJest,{currentTabInfo:r,currentFilters:i,total:o,departureCity:l,search:s,serverTargetTab:u,serverSightPoi:d,productId:p,query:f,isOnline:m,isOffline:v,isBestone:h,serverMeta:g,isJest:y},E=(b=r||{}).id,_=b.ename,b.isVacationBu,O=(l||{}).cityId,C=(k=s||{}).poi,T=k.keyword,S=(I=C||{}).type,N=I.ename,P=I.id,w=!1,D=1==(null===f||void 0===f?void 0:f.redirected),R=1==(null===f||void 0===f?void 0:f.switched),!(p>0)||R){e.next=54;break}if(j=a.context.env,A=jr(E)&&1!=(null===f||void 0===f?void 0:f.try_cruise_id),L=jr(E)&&1==(null===f||void 0===f?void 0:f.try_cruise_id),B=Mr(E)||Fr(E)||Vr({tabId:E,tabEname:_})||Br(E),!A&&!B){e.next=34;break}return e.next=20,a.getProductSearchResultOfProductId(p);case 20:if(U=e.sent,M=(U||{}).products,!U||1!==(null===M||void 0===M?void 0:M.length)){e.next=34;break}if(G=(null===M||void 0===M?void 0:M[0])||{},q=G.id,z=G.basicInfo,Y=null===z||void 0===z||null===(F=z.extras)||void 0===F?void 0:F.PRODUCT_PATTERN,W=(null===z||void 0===z||null===(V=z.departures)||void 0===V||null===(V=V[0])||void 0===V?void 0:V.id)||(null===z||void 0===z||null===(H=z.extras)||void 0===H?void 0:H.departureCityId)||O,!["1","2","3","4"].includes(Y)){e.next=34;break}if(!gi(z)){e.next=34;break}if(!q||!W){e.next=34;break}return w=!0,Q=yi(M[0],{isOnline:m,isOffline:v,isBestone:h,env:j}),Q=a.attachTransferParams(Q,0),a.redirect(Q,!0),e.abrupt("return",!0);case 34:if(!A&&!L){e.next=51;break}if(!m){e.next=51;break}return e.next=38,a.getProductSearchResultOfProductId(p,!0);case 38:if(K=e.sent,J=(K||{}).products,null===(X=null===J||void 0===J?void 0:J.filter((function(e){var t,n;return"CRUISE_PACKAGE"==e.productType&&(null===(t=e.basicInfo)||void 0===t||null===(t=t.statusInfo)||void 0===t?void 0:t.isOnline)||"CRUISE"==e.productType&&(null===(n=e.basicInfo)||void 0===n||null===(n=n.extras)||void 0===n?void 0:n.voyaId)})))||void 0===X||!X.length){e.next=46;break}return w=!0,Z=bi(X[0],{isOnline:m,isOffline:v,isBestone:h,env:j}),a.redirect(Z,!0),e.abrupt("return",!0);case 46:if(!L){e.next=51;break}return w=!0,$="https://cruise.ctrip.com/dest?query=".concat(p),a.redirect($,!0),e.abrupt("return",!0);case 51:if(T||(T=String(p)),!y){e.next=54;break}return e.abrupt("return",String(p));case 54:if(!m||!d){e.next=58;break}return ee="https://you.ctrip.com/sight/0/0.html?poiId=".concat(d),a.redirect(ee,!0),e.abrupt("return",!0);case 58:if(ne=(te=u||{}).ename,re=te.url,ae=te.isNoneResultTab,!u||!ae){e.next=62;break}return n(),e.abrupt("return",!1);case 62:if(!u||!re||ne==_){e.next=66;break}return w=!0,a.redirect(re,!0),e.abrupt("return",!0);case 66:if(ie=a.getFallbackTab(_),ce=(oe=ie||{}).ename,le=oe.url,se=oe.isVacationBu,!oe.isMagicBestone){e.next=71;break}return n(),e.abrupt("return",!1);case 71:if(se){e.next=75;break}return w=!0,a.redirect(le,!0),e.abrupt("return",!0);case 75:if(ce!=_&&(_=ce,w=!0),(ue=a.getValidTab(_))!=_&&(w=!!(_=ue)),null!==g&&void 0!==g&&g.REDIRECT_TAB&&!D)for(de=Number(null===g||void 0===g?void 0:g.REDIRECT_TAB),pe=0,fe=Object.entries(en);pe<fe.length;pe++)me=c()(fe[pe],2),ve=me[0],me[1]==de&&(he=tn[ve])&&(_=he,w=!0);if((ge=a.getValidStartCityId(O))!=O&&(O=ge,w=!0),!w||D){e.next=88;break}return ye=a.location||{},be=ye.query,Ee=ye.hash,be=xu(xu({},be),{},{redirected:1}),S?(be=x.a.stringify(be),_e=be?"?".concat(be).concat(Ee):"".concat(Ee),a.redirect("/list/".concat(_,"/").concat(S,"-").concat(N,"-").concat(P,".html").concat(_e),!0)):(T&&(be.sv=T,be.st=T),be=x.a.stringify(be),Oe=be?"?".concat(be).concat(Ee):"".concat(Ee),a.redirect("/list/".concat(_,"/sc").concat(O,".html").concat(Oe),!0)),e.abrupt("return",!0);case 88:return(0,a.store.actions.UPDATE_SEARCH)({tab:_,poiType:S,poiName:N,poiId:P,keyword:T,isSearchCompleted:!0}),e.abrupt("return",!1);case 91:e.next=101;break;case 93:if(e.prev=93,e.t0=e.catch(0),!(e.t0 instanceof Error)){e.next=99;break}e.next=100;break;case 99:throw e.t0;case 100:return e.abrupt("return",!1);case 101:case"end":return e.stop()}}),e,null,[[0,93]])})))),T()(g()(a),"showTransitLoading",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=a.store.actions.UPDATE_TRANSIT_LOADING;t(!!e)})),T()(g()(a),"showCriticalWarning",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=a.store.actions.UPDATE_CRITICAL_WARNING;t(!!e)})),T()(g()(a),"getPreload",s()(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.context.isOnline,n=t?{list_ssr:"/css/online/searchresult2019_ssr-907a1cddc3.css"}:null,!a.SSR||!n){e.next=11;break}return e.prev=3,e.next=6,a.fetchPreload(n);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})))),T()(g()(a),"getPageMeta",(function(){var e=a.store.getState(),t=e.products,n=e.currentTabInfo,r=n.offlinePageId,i=n.bestonePageId,o=n.pageId,c=n.pageTab,l=e.isOffline,s=e.isBestone,u={pageId:"0",pageTab:c};return u.pageId=l?r||"0":s?i||bn:t.length>0?o:yn,u})),T()(g()(a),"getPageParams",(function(){var e=a.location||{},t=e.params,n=e.pattern,r=t||{},i=r.tab,o=r.startCityId,c=r.poiType,l=r.poiName,s=r.poiId,u=a.store.getState().query||{},d=u.filter,p=u.sv,f=u.st,m=u.p,v=u.s,h=u.bstvd,g=u.productid,y=u.moi,b=u.mot;if(!i&&n.includes("themetravel")){var E=(t||{}).type,_=/sc(\d*)(\.?html?)?/i.exec(E),O=/([a-zA-Z]+)-(\w*)-(\d+)(\.?html?)?/i.exec(E);_&&(i="themetravel",o=_[1]),O&&(i="themetravel",c=O[1],l=O[2],s=O[3])}return"SS"===(c+"").toUpperCase()&&(c="S"),{tab:i||"",startCityId:+o||0,filter:d||"",searchValue:Ti(p||""),searchText:Ti(f||""),pageNumber:+m||1,sortType:+v||0,isSearchBestoneVendor:1===+h,isSearchVendorStore:Hr({tabEname:i}),poiType:(c||"").toLowerCase(),poiName:(l||"").toLowerCase(),poiId:+s||0,productId:+g||0,modifiedId:+y||0,modifiedType:b||""}})),T()(g()(a),"getEnvParams",(function(){var e=a.store.getState().isBestone,t="TradePrice"==a.getCookie("Booking_TradeStatus")?1:2,n=a.getCookie("PriceFilter");return{bestoneType:t,isTradePrice:e&&1==t,isTradeFilter:e&&1==n}})),T()(g()(a),"getFallbackTab",(function(e){var t=a.store.getState(),n=t.totalTabs,r=t.isOnline,i=t.isOffline,o=t.isBestone;return function(e,t,n){var r=n.isOnline,a=n.isOffline,i=n.isBestone,o=-1,c=S.a.find([["grouptravel","around"],["freetravel","destfreetravel"],["personalgroup","dstprgoup"]],(function(t){return-1!==(o=S.a.findIndex(t,(function(t){return na(t,e)})))})),l=c&&c.length?c[0===o?1:0]:null,s=S.a.find(t,(function(t){return t&&na(t.ename,e)})),u=S.a.find(t,(function(e){return e&&na(e.ename,l)})),d=t&&t.length?t[0]:null;if(!s)if(u&&u.ename)e=u.ename;else if(d&&d.ename&&yr(d.id))e=d.ename;else{var p=oa({isOnline:r,tabEname:e}).ename;e=p}var f=d&&(yr(d.id)||br({tabId:d.id,isOffline:a,isBestone:i})||Er({tabId:d.id,isOnline:r})),m=d&&d.url?d.url:"";return m=f&&m?Ir({url:m,isOnline:r,isOffline:a,isBestone:i}):m,{ename:e,url:m,isVacationBu:!d||f,isMagicBestone:!(!d||f)&&i&&d&&d.url}}(e,(n||{}).left,{isOnline:r,isOffline:i,isBestone:o})})),T()(g()(a),"getValidTab",(function(e){var t=a.store.getState(),n=t.isOnline,r=t.isOffline,i=t.isBestone,o=oa({isOnline:n,tabEname:e}).ename;return function(e,t){var n=t.isOnline,r=t.isOffline,a=t.isBestone;return!e||(e=(e||"").toLowerCase(),n?-1!==Un.ONLINE.indexOf(e):r?-1!==Un.OFFLINE.indexOf(e):!!a&&-1!==Un.BESTONE.indexOf(e))}(e,{isOnline:n,isOffline:r,isBestone:i})?e:o})),T()(g()(a),"getValidStartCityId",(function(e){return e>=0?e:2})),T()(g()(a),"getStartCityFromPath",(function(){var e=((a.location||{}).params||{}).startCityId;return+e?{cityId:+e}:null})),T()(g()(a),"getStartCityFromQuery",(function(){var e=a.store.getState().query||{},t=e.startcity,n=void 0===t?0:t,r=e.salecity,i=void 0===r?0:r,o=e.cityname;return+n||+i?{cityId:+n||+i,cityName:void 0===o?"":o,saleCityId:+i}:null})),T()(g()(a),"getStartCityFromCookie",(function(){var e=a.getCookie("StartCity_Pkg");if(!e)return null;var t=/PkgStartCity=(\d+)/.exec(e);return t&&t[1]?{cityId:+t[1]}:null})),T()(g()(a),"getDepartureCityList",s()(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.store.actions.UPDATE_DEPARTURE_CITY_LIST,n={IsInternal:!0,ProductType:"AGG"},e.prev=2,e.next=5,a.post(a.API.departureCity,n);case 5:r=e.sent,t(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))),T()(g()(a),"doSelfJumpIfNeeded",(function(){var e=window.location.search,t=/(\?|&)?(\b)(slfjmp=1)(\b)(&|#)?/gi,n="";t.test(e)&&(n=e.replace(t,(function(e,t,n,r,a,i){if(e)return"?"===t?"?".concat(i||""):"&"===t&&i||""})))!==e&&("undefined"!==typeof history&&"function"===typeof history.replaceState?history.replaceState(null,"",n):window.location.href=n)})),T()(g()(a),"initBstSdk",(function(){var e;a.store.getState().isBestone&&null!==(e=window)&&void 0!==e&&e.initBstSdk&&window.initBstSdk({sdkName:"topheader",sdkVersion:"2.0.8",sdkInitData:{autoRender:!0}})})),T()(g()(a),"getBestoneLoginRedirectUrl",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.context,n=t.isBestone,r=t.env,!n){e.next=25;break}if(!a.context.isBestoneLogin){e.next=4;break}return e.abrupt("return",null);case 4:return i=null,o=!1,c="",e.prev=7,l=a.getCookie("bticket"),e.next=11,a.post(a.API.getCurrentUserInfo,{needUserInfo:!0},{headers:{"x-tour-auth-from":"tds"}});case 11:i=e.sent,{bticket:l,resp:i},u=(s=i||{}).user,d=s.ResponseStatus,o=i&&u,a.context.isBestoneLogin=o,c=S.a.get(d,"Errors[0].Message","\u7528\u6237\u672a\u767b\u5f55"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(7);case 22:if(o){e.next=24;break}return e.abrupt("return","fat"===(r||"prod")?"https://bst.ctrip.fat30.qa.nt.ctripcorp.com/transfer_page?msg=".concat(c,"&code=101"):"//bst.ctrip.com/transfer_page?msg=".concat(c,"&code=101"));case 24:case 25:return e.abrupt("return",null);case 26:case"end":return e.stop()}}),e,null,[[7,19]])})))),T()(g()(a),"getBestoneStoreInfo",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),!t.isBestone){e.next=17;break}return e.prev=2,e.next=5,a.post(a.API.queryBestoneStore);case 5:if(n=e.sent,i=(r=n||{}).isSuccess,o=r.ret,c=(o||{}).code,i&&(!o||0==c)){e.next=10;break}return e.abrupt("return");case 10:(0,a.store.actions.UPDATE_BESTONE_INFO)(n),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2);case 17:case"end":return e.stop()}}),e,null,[[2,14]])})))),T()(g()(a),"getOfflineLoginRedirectUrlSSO2",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.context,n=t.isOffline,t.env,!n){e.next=28;break}if(!a.context.isServer||!a.context.req||"POST"!==a.context.req.method){e.next=4;break}return e.abrupt("return",null);case 4:if(!a.context.isOfflineLogin){e.next=6;break}return e.abrupt("return",null);case 6:return r=null,i=!1,e.prev=8,e.next=11,a.get("/list/sso-user","",{raw:1});case 11:r=e.sent,c=(o=r||{}).login,l=o.data,s=(l||{}).eid,i=!!c&&!!s,s&&a.setCookie("Servers_Eid",s),a.context.isOfflineLogin=i,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8);case 22:if(i){e.next=27;break}return u=-1===(u=a.getHref()).indexOf("?")?"".concat(u,"?slfjmp=1"):"".concat(u,"&slfjmp=1"),d=encodeURIComponent(u),e.abrupt("return","/list/sso-login?redirect=".concat(d));case 27:case 28:return e.abrupt("return",null);case 29:case"end":return e.stop()}}),e,null,[[8,19]])})))),T()(g()(a),"getStartCityRedirectUrl",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s,u,d,p,f,m,v,h,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.initStartCity();case 2:return t=null,n=a.store.getState(),r=n.departureCity,i=(r||{}).cityId,o=a.getStartCityFromQuery()||{},c=o.cityId,l=a.getStartCityFromPath()||{},+(s=l.cityId)>0&&+s!==+c&&(u=a.getPathname(),d=a.store.getState(),p=d.query,(f=xu({},p)).startcity=s,t="".concat(u,"?").concat(x.a.stringify(f))),+i>0&&+i!==+c&&(m=a.getPathname(),v=a.store.getState(),h=v.query,(g=xu({},h)).startcity=i,t="".concat(m,"?").concat(x.a.stringify(g))),e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})))),T()(g()(a),"getStoreRedirectUrlIfUnsupport",(function(){var e=a.store.getState(),t=e.isSearchVendorStore,n=e.poiType,r=e.query,i=null;if(t&&n){var o=S.a.isEmpty(r)?"":"?".concat(x.a.stringify(r));i="/list/store/sc.html".concat(o)}return i})),T()(g()(a),"getH5WirelessRedirectUrl",(function(){var e=a.store.getState(),t=e.isOnline,n=e.isSearchVendorStore;if(!t)return null;var r=null;try{if(a.context&&a.context.req&&a.context.req.headers&&(a.context.req.headers["user-agent"]||"").toLowerCase().match(/AppleWebKit.*Mobile.*/i)){var i=xu({},a.store.getState().query),o=(a.location?a.location.params:null)||{},c=o.tab,l=o.startCityId,s=o.poiType,u=o.poiId,d=i||{},p=d.sv,f=d.st,m=d.filter,v=d.startcity,h=d.salecity,g={};if(c){var y={whole:{searchtype:"all",tab:126},grouptravel:{searchtype:"all",tab:64},around:{searchtype:"all",tab:512},freetravel:{searchtype:"all",tab:2},destfreetravel:{searchtype:"all",tab:65536},personalgroup:{searchtype:"all",tab:1048576},dstprgoup:{searchtype:"all",tab:2097152},youxue:{searchtype:"all",tab:8192},store:{searchtype:"tour",tab:186}}[(c||"").toLowerCase()]||{},b=y.searchtype,E=y.tab;E&&(g.tab=E),b&&(g.searchtype=b)}s&&u>0?(g.poitype=s,g.poid=u):(p||f)&&(g.kwd=p||f),m&&(g.filter=m),(l>0||v>0||h>0)&&(g.scity=l||v||h),delete i.sv,delete i.st,delete i.filter,delete i.startcity,delete i.salecity,delete i.p,delete i.s,delete i.productid,delete i.bst,delete i.bstvd,delete i.uid,delete i.cookieid,delete i.from,(g=xu(xu({},g),i)).frompc=1,r="//m.ctrip.com/webapp/vacations/tour/".concat(n?"shoplist":"list","?").concat(x.a.stringify(g))}}catch(_){}return r})),T()(g()(a),"getPoiInfo",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s,u,d,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=a.store.getState(),n=t.search,i=(r=void 0===n?{}:n).type,o=r.poi,c=r.keyword,i==Wt){e.next=4;break}return e.abrupt("return",null);case 4:return s=(l=o||{}).id,u=l.type,d=a.store.actions.UPDATE_POI,p=i==Yt?{names:[c]}:{dataType:la(u),ids:[+s]},e.next=9,a.post(a.API.poi,p);case 9:return f=e.sent,{param:p,data:f},d(f),e.next=14,a.getPoiPath();case 14:return e.abrupt("return",e.sent);case 17:return e.prev=17,e.t0=e.catch(0),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,null,[[0,17]])})))),T()(g()(a),"getPoiPath",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=a.store.getState(),n=t.search,i=(r=void 0===n?{}:n).type,o=r.poi,i!=Wt||!o.path||!o.path.length){e.next=11;break}return c={dataType:la(ln),ids:o.path.map((function(e){return e.id}))},e.next=6,a.post(a.API.poi,c);case 6:return l=e.sent,s=a.store.actions.UPDATE_POI_PATH,{param:c,pathData:l},s(l),e.abrupt("return",l);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0);case 16:return e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})))),T()(g()(a),"getProductSearchFilter",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s,u,d,p,f,m,v,h,g=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},n=t.resOnly,r=void 0!==n&&n,i=t.needTailoring,o=void 0!==i&&i,e.prev=1,c=a.store.actions.UPDATE_PRODUCT_SEARCH_FILTER,l=a.store.getState(),s=a.getVID(),u=a.getOfflineUid(),d=a.getUnionId(),p=d.aid,f=d.sid,m={aid:p,sid:f,vid:s,offlineUid:u,needTailoring:o,ignoreFilter:!0},v=ro(l,a.context,m),e.next=11,a.post(a.API.productSearch,v);case 11:if(h=e.sent,!r){e.next=14;break}return e.abrupt("return",h);case 14:return c(h),e.abrupt("return",h);case 18:e.prev=18,e.t0=e.catch(1),a.showCriticalWarning();case 22:return e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,null,[[1,18]])})))),T()(g()(a),"getSearchResult",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s,u,d,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.store.actions,n=t.UPDATE_SEARCH_RESULT,r=t.UPDATE_CRUMB,i=a.store.getState(),o=a.getVID(),c=a.getOfflineUid(),l=a.getUnionId(),s=l.aid,u=l.sid,d={aid:s,sid:u,vid:o,offlineUid:c},p=wi(i,a.context,d),e.next=10,a.post(a.API.search,p);case 10:return f=e.sent,{params:p,res:f},n(f),r(),e.abrupt("return",f);case 17:e.prev=17,e.t0=e.catch(0),a.showCriticalWarning();case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})))),T()(g()(a),"getProductSearchResult",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s,u,d,p,f,m,v,h,g,y,b=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},n=t.resOnly,r=void 0!==n&&n,i=t.needTailoring,o=void 0!==i&&i,e.prev=1,c=a.store.actions,l=c.UPDATE_PRODUCT_SEARCH_RESULT,s=c.UPDATE_CRUMB,u=a.store.getState(),d=a.getVID(),p=a.getOfflineUid(),f=a.getUnionId(),m=f.aid,v=f.sid,h={aid:m,sid:v,vid:d,offlineUid:p,needTailoring:o},g=ro(u,a.context,h),e.next=11,a.post(a.API.productSearch,g);case 11:if(y=e.sent,a.logActionInfo({value:"-",role:"sys",action:"show",scene:"\u641c\u7d22\u4e3b\u8c03\u7528 ProductSearch",module:"\u63a5\u53e3\u8bf7\u6c42"}),{params:g,res:y},!r){e.next=16;break}return e.abrupt("return",y);case 16:return l(xu(xu({},y||{}),{},{needTailoring:o})),s(),e.abrupt("return",y);case 22:e.prev=22,e.t0=e.catch(1),a.showCriticalWarning(),a.logInterruption("vac_10091","\u641c\u7d22\u6838\u5fc3\u63a5\u53e3\u5f02\u5e38");case 27:return e.abrupt("return",null);case 28:case"end":return e.stop()}}),e,null,[[1,22]])})))),T()(g()(a),"getProductSearchResultOfProductId",function(){var e=s()(regeneratorRuntime.mark((function e(t){var n,r,i,o,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],e.prev=1,r=a.store.getState(),i={productId:t},o=n?uo(r,a.context,i):so(r,a.context,i),e.next=7,a.post(a.API.productSearch,o);case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()),T()(g()(a),"getSearchResultOfStore",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s,u,d,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=a.store.actions,n=t.UPDATE_SEARCH_RESULT,r=t.UPDATE_CRUMB,i=a.store.getState(),o=a.getVID(),c=a.getOfflineUid(),l=a.getUnionId(),s=l.aid,u=l.sid,d={aid:s,sid:u,vid:o,offlineUid:c},p=xi(wi(i,a.context,d),i),e.next=10,a.post(a.API.search,p);case 10:return f=e.sent,{params:p,res:f},n(f),r(),e.abrupt("return",f);case 17:e.prev=17,e.t0=e.catch(0),a.showCriticalWarning();case 21:return e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[0,17]])})))),T()(g()(a),"getShopListOfStore",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=a.store.actions,n=t.UPDATE_SHOP_LIST,r=t.UPDATE_SEARCH_NO_RESULT,i=a.store.getState(),o=i.destCityIdOfStore,c=i.products,l=Number(Object(ht.c)(a.context)),!(o>0)){e.next=15;break}return s=S.a.map(c,(function(e){return{providerId:null===e||void 0===e?void 0:e.providerId,brandId:null===e||void 0===e?void 0:e.brandId}})),u={destinationCityId:o,conditionList:s,channelId:l},e.next=9,a.post(a.API.queryShopList,u);case 9:return d=e.sent,{params:u,res:d},n(d),e.abrupt("return",d);case 15:r();case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(0),a.showCriticalWarning();case 22:return e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,null,[[0,18]])})))),T()(g()(a),"getOperationBanner",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.store.getState(),r=n.isOffline,i=a.store.actions.UPDATE_OPERATION_BANNER_INFO,o=Number(Object(ht.c)(a.context)),c={debug:!1,needBanner:!0,pageid:0,channelId:o,bizLineType:6},r&&(c.uid=a.getOfflineUid()),e.next=8,a.post(a.API.getOperation,c);case 8:return l=e.sent,a.logActionInfo({value:"-",role:"sys",action:"show",scene:"\u8fd0\u8425Banner GetOperation",module:"\u63a5\u53e3\u8bf7\u6c42"}),{params:c,res:l},null!==l&&void 0!==l&&null!==(t=l.data)&&void 0!==t&&null!==(t=t.operationList)&&void 0!==t&&t.length&&(s=l.data.operationList[0],i(s)),e.abrupt("return",l);case 15:e.prev=15,e.t0=e.catch(0),a.logInterruption("vac_10099","\u8fd0\u8425Banner\u6570\u636e\u5f02\u5e38");case 19:return e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})))),T()(g()(a),"getProFavoriteInfo",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=a.store.actions.UPDATE_PRODUCT_FAVORITE_INFO,n=a.store.getState(),r=n.isOnline,i=n.currentTotal,r&&i){e.next=6;break}return e.abrupt("return",null);case 6:return o=Di(n),e.next=9,a.post(a.API.isMyFavorites,o);case 9:if(c=e.sent,a.logActionInfo({value:"-",role:"sys",action:"show",scene:"\u6536\u85cf\u5217\u8868 IsMyFavorites",module:"\u63a5\u53e3\u8bf7\u6c42"}),{params:o,res:c},s=(l=c||{}).ResultCode,u=l.ResultList,0==s&&u&&u.length){e.next=15;break}return e.abrupt("return",null);case 15:return t(c),e.abrupt("return",c);case 19:e.prev=19,e.t0=e.catch(0),a.logInterruption("vac_10100","\u6536\u85cf\u5217\u8868\u67e5\u8be2\u5931\u8d25");case 23:return e.abrupt("return",null);case 24:case"end":return e.stop()}}),e,null,[[0,19]])})))),T()(g()(a),"getWeatherInfo",(function(){var e=a.store.getState(),t=e.search,n=e.currentTabInfo,r=e.isOnline,i=t||{},o=i.type,c=i.poi,l=(n||{}).id,s=c||{},u=s.id;(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=r.isOnline;return n=(n||"").toUpperCase(),Yr({isOnline:a})&&zr(e,Pn)&&t==Wt&&n==ln})(l,o,s.type,{isOnline:r})&&(!u||u<0||(a.getDistrictDetail(u),a.getWeatherForecasts(u),a.getTravelRecords(u)))})),T()(g()(a),"getDistrictDetail",function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.post(a.API.getDistrictDetail,{districtIds:[+t]});case 3:n=e.sent,(0,a.store.actions.UPDATE_DISTRICT_DETAIL)(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),T()(g()(a),"getWeatherForecasts",function(){var e=s()(regeneratorRuntime.mark((function e(t){var n,r,i,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.store.getState(),r=n.search,i=n.isOnline,o=(r||{}).poi,Wr(o,{isOnline:i})){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,c=dr.m(Su.a),e.next=8,a.post(a.API.getDistrictWeatherForecast,{Ids:[+t],Date:c,Days:3},{raw:!0});case 8:l=e.sent,(0,a.store.actions.UPDATE_WEATHER_FORECASTS)(l),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4);case 16:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(t){return e.apply(this,arguments)}}()),T()(g()(a),"getTravelRecords",function(){var e=s()(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.post(a.API.getTravelList,{orderType:3,districtId:t,pageIndex:1,pageSize:2,source:"Tour"},{raw:!0});case 3:n=e.sent,(0,a.store.actions.UPDATE_TRAVEL_RECORDS)(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()),T()(g()(a),"getSearchAgain",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.departureCity.cityId,r=t.search.keyword,i=t.currentTabInfo,o=t.isOnline,c=(i||{}).id,Qr(c,{isOnline:o})){e.next=4;break}return e.abrupt("return");case 4:if(r){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,e.next=9,a.post(a.API.searchAndSearch,{cityID:n,keyword:r});case 9:l=e.sent,(0,a.store.actions.UPDATE_SEARCH_AGAIN)(l),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})))),T()(g()(a),"getBrowserHistory",function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var r,i,o,c,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.store.getState(),i=r.currentTabInfo,o=r.isOnline,c=(i||{}).id,Kr(c,{isOnline:o})){e.next=4;break}return e.abrupt("return",null);case 4:return l=Ri(c),e.next=7,a.post(a.API.getBrowseHistory,{requestSource:"Favorite",serviceVersion:4,clientVersion:"2",pageIndex:+t>0?+t:1,pageSize:+n>0?+n:6,bizTypes:l,vid:a.getVID()});case 7:if((s=e.sent)&&s.result&&0===s.result.resultCode){e.next=10;break}return e.abrupt("return",null);case 10:return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),T()(g()(a),"getDefaultFavorites",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.currentTabInfo,r=t.isOnline,i=(n||{}).id,Jr(i,{isOnline:r})){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,a.post(a.API.getMyFavorites,{QueryList:[{BizType:"GROUP_TRAVEL"}],SortType:0,StartOffset:1,ReturnCount:6});case 7:if((o=e.sent)&&0===o.ResultCode){e.next=10;break}return e.abrupt("return");case 10:(0,a.store.actions.UPDATE_MY_DEFAULT_FAVORITE)(o),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4);case 17:case"end":return e.stop()}}),e,null,[[4,14]])})))),T()(g()(a),"getPageFavorites",function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.post(a.API.getMyFavorites,{QueryList:[{BizType:"GROUP_TRAVEL"}],SortType:0,StartOffset:t,ReturnCount:6});case 3:if((r=e.sent)&&0===r.ResultCode){e.next=6;break}return e.abrupt("return");case 6:(0,a.store.actions.UPDATE_MY_FAVORITE)(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n){return e.apply(this,arguments)}}()),T()(g()(a),"getRecommendPoiList",function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var r,i,o,c,l,s,u,d,p,f,m,v,h,g,y,b,E;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.store.getState(),i=r.currentTabInfo,o=r.search,c=r.isOnline,l=(i||{}).id,u=(s=o||{}).type,d=s.poi,p=(d||{}).type,qr(l,u,p,{isOnline:c})){e.next=6;break}return e.abrupt("return");case 6:if(f=ji(d),m=f.recommendPoiId,v=f.recommendPoiName,h=f.recommendPoiTitle,!(m<=0)){e.next=9;break}return e.abrupt("return");case 9:return e.prev=9,g={onlyGsShow:!0,orderType:"Score_Desc",start:+t>0?+t:1,count:+n>0?+n:10,districtId:m,poiType:"SIGHT"},y={},e.next=14,a.post(a.API.searchPoiList,g,y);case 14:if(b=e.sent,{params:g,options:y,resp:b},E=(b||{}).result,b&&E){e.next=19;break}return e.abrupt("return");case 19:(0,a.store.actions.UPDATE_RECOMMEND_POI_LIST)({recommendPoiName:v,recommendPoiTitle:h,resp:b}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(9);case 26:case"end":return e.stop()}}),e,null,[[9,23]])})));return function(t,n){return e.apply(this,arguments)}}()),T()(g()(a),"getRecommendPoiImages",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.recommendPoiInfo,r=(n||{}).recommendPoiList,(i=S.a.compact(S.a.map(r,(function(e){return Number(e.coverImageId)}))))&&i.length){e.next=5;break}return e.abrupt("return");case 5:return e.prev=5,e.next=8,a.post(a.API.getImageDetail,{imageIds:i,imageSizes:["C_224_126_M_Q90_TJPG"]});case 8:if(o=e.sent,c=(o||{}).result,o&&c){e.next=12;break}return e.abrupt("return");case 12:(0,a.store.actions.UPDATE_RECOMMEND_POI_LIST_IMAGES)(o),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5);case 19:case"end":return e.stop()}}),e,null,[[5,16]])})))),T()(g()(a),"getAroundRecommendPoiList",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s,u,d,p,f,m,v,h,g,y,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.search,r=t.isOnline,o=(i=n||{}).type,c=i.poi,s=(l=c||{}).id,u=l.type,d=l.parentID,u=(u||"").toUpperCase(),Zr(o,u,{isOnline:r})){e.next=6;break}return e.abrupt("return");case 6:if(s&&!(s<=0)){e.next=8;break}return e.abrupt("return");case 8:if(p=null,u!=sn){e.next=24;break}return e.prev=10,f={dataType:la(ln),ids:[d]},m={},e.next=15,a.post(a.API.poi,f,m);case 15:v=e.sent,h=v.poiQuery,p=h&&h.length?h[0]:null,{params:f,options:m,poiQuery:h},e.next=24;break;case 21:e.prev=21,e.t0=e.catch(10);case 24:return p&&(s=p.id),e.prev=25,g={poid:s},y={},e.next=30,a.post(a.API.parentPoiList,g,y);case 30:b=e.sent,{params:g,options:y,resp:b},(0,a.store.actions.UPDATE_AROUND_RECOMMEND_POI_LIST)({parentPoi:p,resp:b}),e.next=39;break;case 36:e.prev=36,e.t1=e.catch(25);case 39:case"end":return e.stop()}}),e,null,[[10,21],[25,36]])})))),T()(g()(a),"getQueryOrderList",function(){var e=s()(regeneratorRuntime.mark((function e(t){var n,r,i,o,c,l,s,u,d,p,f,m,v,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.context.isClient){e.next=2;break}return e.abrupt("return");case 2:if(n=a.store.getState(),r=n.search,i=n.isOnline,c=(o=r||{}).type,l=o.poi,s=(l||{}).type,$r(c,s,{isOnline:i})){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,u=P.a.addDays(new Date,-3),u=dr.d(u,Su.a),d=Ai(u,t),p={raw:!0},e.next=14,a.post(a.API.queryOrderListByMap,d,p);case 14:if(f=e.sent,{reqParams:d,options:p,resp:f},v=(m=f||{}).isSucess,h=m.orderInfoList,f&&v&&h&&h.length){e.next=19;break}return e.abrupt("return");case 19:return(0,a.store.actions.UPDATE_LATEST_ORDER_INFO)(f),e.next=23,a.getQueryOrderListCityInfos(h);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(7);case 28:case"end":return e.stop()}}),e,null,[[7,25]])})));return function(t){return e.apply(this,arguments)}}()),T()(g()(a),"getQueryOrderListCityInfos",function(){var e=s()(regeneratorRuntime.mark((function e(t,n){var r,i,o,c,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,r=Li(t,n),i={},e.next=7,a.post(a.API.getLocationInfos,r,i);case 7:if(o=e.sent,{reqParams:r,options:i,resp:o},l=(c=o||{}).resultCode,s=c.locationInfos,o&&0==l&&s&&s.length){e.next=12;break}return e.abrupt("return");case 12:(0,a.store.actions.UPDATE_LATEST_ORDER_INFO_CITIES)(o),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(2);case 19:case"end":return e.stop()}}),e,null,[[2,16]])})));return function(t,n){return e.apply(this,arguments)}}()),T()(g()(a),"getQueryOrderListPoiInfos",function(){var e=s()(regeneratorRuntime.mark((function e(t){var n,r,i,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.store.getState(),r=n.latestOrderInfo,(i=(r||{}).orderInfoList)&&i.length){e.next=4;break}return e.abrupt("return");case 4:if(e.prev=4,(o=Bi(i,t))&&o.names&&o.names.length){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,a.post(a.API.poi,o);case 10:if(c=e.sent,l=(c||{}).poiQuery,c&&l&&l.length){e.next=14;break}return e.abrupt("return");case 14:(0,a.store.actions.UPDATE_LATEST_ORDER_INFO_POIS)(c),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(4);case 21:a.setLatestOrderInfoToLocal();case 22:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}()),T()(g()(a),"getCustomerServiceTelNumebr",s()(regeneratorRuntime.mark((function e(){var t,n,r,i,o,c,l,s,u,d,p,f,m,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.store.getState(),n=t.currentTabInfo,r=(n||{}).id,jr(r)||Mr(r)||Br(r)){e.next=5;break}return e.abrupt("return");case 5:if(i="",o=null,c=a.getUnionId(),l=c.aid,s=c.sid,d=(u=Qn).find((function(e){return 0==e.aid})),p=u.filter((function(e){return e.formatId})).map((function(e){return String(e.formatId)})),!(l<1)){e.next=13;break}return e.abrupt("return");case 13:if(0==s?(o=u.find((function(e){return e.aid==l&&!e.siteIds.length})))||(o=d):(f=u.filter((function(e){return e.aid==l})))&&f.length?(o=f.find((function(e){return e.siteIds.includes(s)})))||(o=f.find((function(e){return!e.siteIds.length}))):o=d,o){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,a.getTelNumberInfo(p);case 18:(m=e.sent)&&m.length?(v=m.find((function(e){return e.formatTelId==o.formatId})),i=v&&v.formatTelNum?v.formatTelNum:o.defaultNumber):i=o.defaultNumber,(0,a.store.actions.UPDATE_STATE)({telNumber:i});case 22:case"end":return e.stop()}}),e)})))),T()(g()(a),"getTelNumberInfo",function(){var e=s()(regeneratorRuntime.mark((function e(t){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,a.post(a.API.queryBatchFormatNum,{formatTelId:S.a.uniq(t),appId:a.context.appId});case 4:r=e.sent,i=r.formatNums,n=(void 0===i?[]:i).map((function(e){var t=e.formatTelId,n=e.formatTelJson;return xu(xu({},JSON.parse(n)[0]),{},{formatTelId:t})})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),n=null;case 14:return e.prev=14,e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,null,[[1,10,14,17]])})));return function(t){return e.apply(this,arguments)}}()),T()(g()(a),"getUnionId",(function(){var e={aid:0,sid:0},t=function(t,n){e.aid=Number(t)||0,e.sid=Number(n)||0};try{var n=a.store.getState().query,r=n.allianceid,i=n.sid;if(r||i)t(r,i);else{var o=a.getCookie("Union"),c=x.a.parse(o)||{},l=c.AllianceID,s=c.SID;if(l||s)t(l,s);else if(a.context.isClient){var u=JSON.parse(localStorage.getItem("UNION"))||{},d=u.timeout,p=void 0===d?0:d,f=u.data,m=void 0===f?{}:f,v=m.AllianceID,h=m.SID;(new Date).getTime()>new Date(p).getTime()||!v&&!h||t(v,h)}}}catch(g){t(0,0)}finally{return e}})),T()(g()(a),"storeCurrentCity",(function(){var e=a.store.getState().departureCity,t=(void 0===e?{}:e).cityId;a.removeCookie("StartCity_Pkg"),a.setCookie("StartCity_Pkg","PkgStartCity=".concat(t),{expires:new Date(+new Date+2592e6),domain:dr.f()})})),T()(g()(a),"getDerivedLatestOrderInfo",(function(){var e=a.store.getState(),t=e.search,n=e.isOnline,r=t||{},i=r.type,o=(r.poi||{}).type;if($r(i,o,{isOnline:n})){var c=a.store.getState().latestOrderInfo,l=a.getLatestOrderInfoFromLocal();if(S.a.isEmpty(c)&&!S.a.isEmpty(l))(0,a.store.actions.UPDATE_STATE)({latestOrderInfo:l})}})),T()(g()(a),"setLatestOrderInfoToLocal",(function(){var e=a.store.getState().latestOrderInfo,t=null;try{t=JSON.stringify(e)}catch(n){}t&&localStorage.setItem("TOUR_LATEST_ORDER_INFO",t)})),T()(g()(a),"getLatestOrderInfoFromLocal",(function(){var e=null;try{var t=localStorage.getItem("TOUR_LATEST_ORDER_INFO");e=JSON.parse(t)}catch(n){}return e})),T()(g()(a),"setShowMemberRightToLocal",(function(){try{var e={showBanner:!1,timeout:(new Date).getTime()+864e5};localStorage.setItem("TOUR_MEMBER_INFO",JSON.stringify(e))}catch(t){}})),T()(g()(a),"getShowMemberRightFromLocal",(function(){try{var e=localStorage.getItem("TOUR_MEMBER_INFO");if(JSON.parse(e)){var t=JSON.parse(e),n=t.showBanner,r=t.timeout;return!!((new Date).getTime()>r)||n}return!0}catch(a){return!1}})),T()(g()(a),"setScrollRestoration",(function(){window.history.scrollRestoration="manual"})),T()(g()(a),"setScreenWidthInfo",(function(){var e=a.store.actions.UPDATE_STATE,t=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0)>Xt;e({screenWidthInfo:{screenWidthType:t?Kt:Qt,filterContentWidth:t?$t:Zt}})})),T()(g()(a),"betterScrollTop",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n="scrollBehavior"in document.documentElement.style;if(n){var r=dr.j()||{},a=r.y,i=window.innerHeight;if(t>a/i)try{window.scrollTo({top:e,behavior:"smooth"})}catch(o){window.scrollTo(0,e)}else window.scrollTo(0,e)}else window.scrollTo(0,e)})),T()(g()(a),"navigateTo",(function(e){a.showTransitLoading(!0),a.history.push(e)})),T()(g()(a),"goTo",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"_blank";if(e){var n=window.open(e,t);setTimeout((function(){n||(window.location.href=e)}),0)}})),T()(g()(a),"goToProductDetail",(function(e,t){var n=a.getProductDetailUrl(e,t);a.logActionInfo({value:n,role:"usr",action:"click",scene:"\u4ea7\u54c1\u8df3\u8f6c",module:"\u4ea7\u54c1"}),a.goTo(n)})),T()(g()(a),"getProductDetailUrl",(function(e,t){var n=e||{},r=n.basicInfo,i=n.detailUrl,o=n.imageId,c=(r||{}).extras,l=null===c||void 0===c?void 0:c.TYPE,s=a.store.getState(),u=s.currentFilters,d=s.isOnline,p=s.isOffline,f=s.isBestone,m=a.context.env;return l==Kn.gb?i=Ei(e,u,{isOnline:d,isOffline:p,isBestone:f,env:m}):l==Kn.fb?i=function(e){var t=(e||{}).id;return"https://huodong.ctrip.com/ottd-activity/dest/t".concat(t,".html")}(e):(i=yi(e,{isOnline:d,isOffline:p,isBestone:f,env:m,attachInfo:t}),i=a.attachTransferParams(i,o)),i})),T()(g()(a),"getOnlineProductDetailUrl",(function(e){var t=e||{},n=t.basicInfo,r=(t.detailUrl,(n||{}).extras),i=null===r||void 0===r?void 0:r.TYPE,o=a.store.getState().currentFilters,c=a.context.env;return"https:"+(i==Kn.gb?Ei(e,o,{isOnline:!0,isOffline:!1,isBestone:!1,env:c}):yi(e,{isOnline:!0,isOffline:!1,isBestone:!1,env:c}))})),T()(g()(a),"attachTransferParams",(function(e,t){var n=a.getTransferParams(t);if(n){var r=e.includes("?")?"&":"?";return"".concat(e).concat(r).concat(n)}return e})),T()(g()(a),"getTransferParams",(function(e){var t=a.store.getState(),n=t.query,r=t.isBestone,i=t.isOffline,o=r?["originPage"]:i?["uid","CookieID"]:[],c={};return o.length&&(c=o.reduce((function(e,t){var r=t.toLowerCase();return n[r]&&(e[r]=n[r]),e}),{})),e&&(c.imageid=e),x.a.stringify(c)})),T()(g()(a),"getBestoneStoreTypeName",(function(){var e=a.store.getState(),t=hi(e,a.context);return Bt[(t||"").toLowerCase()]||""})),T()(g()(a),"scrollToTop",(function(){var e=a.store.getState(),t=e.isOffline,n=e.query,r=e.total,i=e.currentFilters,o=n.s||n.filter,c=ia(r,i);t?a.scrollToPageTop():o&&!c?a.scrollToFilterBoxTop():a.scrollToSearchBoxTop()})),T()(g()(a),"scrollToPageTop",(function(){window.scrollTo(0,0)})),T()(g()(a),"scrollToSearchBoxTop",(function(){var e=document.querySelector("#search-box-container");if(e){var t=e.offsetTop;a.betterScrollTop(t)}})),T()(g()(a),"scrollToFilterBoxTop",(function(){var e=document.querySelector("#filter_box_point");if(e){var t=e.offsetTop-3;a.betterScrollTop(t)}})),T()(g()(a),"getOfflineUid",(function(){var e=a.store.getState(),t=e.query;return e.offlineUid||t.uid||""})),T()(g()(a),"prefixPageParams",(function(){var e=a.store.getState(),t=e.search,n=e.isPoiFetchedEmpty,r=t||{},i=r.type,o=r.keyword;if(i==Wt&&n||i==Yt&&!o){var c=a.getDefaultRedirectUrl();return a.redirect(c,!0),!0}return!1})),T()(g()(a),"getDefaultRedirectUrl",(function(){var e=a.location||{},t=e.query,n=e.hash,r=a.store.getState(),i=r.currentTabInfo,o=r.isOnline,c=(i||{}).ename,l=Mt,s=Ft,u=Vt,d=(t=x.a.stringify(t))?"?".concat(t).concat(n):"".concat(n),p=oa({isOnline:o,tabEname:c}).ename;return"/list/".concat(c=c||p,"/").concat(l,"-").concat(s,"-").concat(u,".html").concat(d)})),T()(g()(a),"isInViewport",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1,r=t?e:document.querySelector(e);if(r){var a=r.getBoundingClientRect(),i=window.innerHeight,o=window.innerWidth;n=a.bottom-a.top>0&&a.top<i&&a.right-a.left>0&&a.left<o}return n})),T()(g()(a),"scrollHandler",(function(e){a.trackModuleExposeIfNeed(),a.trackListProductExposeIfNeed()})),T()(g()(a),"resizeHandler",(function(){a.setScreenWidthInfo()})),T()(g()(a),"trackListProductExposeIfNeed",(function(){var e=a.store.getState(),t=e.recommendProducts,n=e.products,r=i()(document.querySelectorAll(".js_product_item"));if(r.length){var o,c=Nu(r);try{var l=function(){var e=o.value;if(a.isInViewport(e,!0)){var r=[].concat(i()(t),i()(n)),c=e.getAttribute("data-track-product-id"),l=S.a.find(r,(function(e){return e.id==c}));if(null!==l&&void 0!==l&&l.priceInfo){var s="true"===e.getAttribute("data-track-is-recommend"),u="".concat(s?"recommend":"normal","-").concat(c);if(!(a.exposeContainer.product&&a.exposeContainer.product.includes(u))){var d=e.getAttribute("data-track-inner-pos");a.exposeContainer.product=a.exposeContainer.product||[],a.exposeContainer.product.push(u),a.trackListProductExpose({product:l,isRecommend:s,innerPos:d})}}}};for(c.s();!(o=c.n()).done;)l()}catch(s){c.e(s)}finally{c.f()}}})),T()(g()(a),"trackModuleExposeIfNeed",(function(){var e=i()(document.querySelectorAll(".js_module_item"));if(e.length){var t,n=Nu(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(a.isInViewport(r,!0)){var o=r.getAttribute("data-module-type"),c=r.getAttribute("data-module-info"),l=r.getAttribute("data-trace-key"),s=r.getAttribute("data-trace-value");a.exposeContainer[o]&&a.exposeContainer[o].includes(c)||"0"!==l&&(a.exposeContainer[o]=a.exposeContainer[o]||[],a.exposeContainer[o].push(c),a.triggerTrack(l,JSON.parse(s)))}}}catch(u){n.e(u)}finally{n.f()}}})),T()(g()(a),"getTrackBaseInfo",(function(){var e=a.store.getState(),t=e.departureCity,n=e.currentTabInfo,r=e.search,i=e.search.poi,o=(n||{}).id;return{from:{cityname:t.cityName,cityid:t.cityId},to_poi:{poiname:i&&i.name?i.name:"",poiid:i&&i.id?i.id:""},tab:o,keywords:r.keyword,searchtype:"all"}})),T()(g()(a),"getTrackPageInfo",(function(){var e=a.store.getState(),t=e.pageTab,n=e.departureCity,r=e.currentTabInfo,i=e.serverMeta,o=e.serverAnalysis,c=e.pageId,l=e.query,s=e.search,u=e.search.poi,d=(r||{}).id,p=o||{},f=p.locale,m=p.bizLine,v=p.analysisType,h=p.termTypes,g=p.keywordAttribute,y=p.residentPlaceId,b=p.residentPlaceName,E=p.personalRecommend,_=p.intentionOrderSource;return{channel:"online",pagetabid:d,pagetab:t,pagecode:c,departcityid:n.cityId,departcityname:n.cityName,locatecityid:"",locatecityname:"",recidencecityid:y,recidencecityname:b,trace_id:(null===i||void 0===i?void 0:i.TRACE_ID)||"",server_uuid:(null===i||void 0===i?void 0:i.product_extension_trace_id)||"",screenid:"",is_floor_page:"0",kwd:s.keyword,poiid:u&&u.id?u.id:"",kwdtype:g,termTypes:h,kwdtactic:v,bizline:m,locale:f,person_recommend_state:E,intention_order_source:_,is_user_category_prefered:(null===i||void 0===i?void 0:i.IS_USER_CATEGORY_PREFERED)||"",black_word:(null===i||void 0===i?void 0:i.BLACK_WORD)||"",black_word_type:(null===i||void 0===i?void 0:i.BLACK_WORD_TYPE)||"",intension_query_type:(null===i||void 0===i?void 0:i.INTENSION_QUERY_TYPE)||"",gsdistrictid:"",kwdcat:"",sortby:"",filter:"",isfilter:l.filter?1:0,issrch:l.filter?0:1,kwdfrom:"",queryrule:""}})),T()(g()(a),"getTrackRecInfo",(function(){return{pkgcount:a.store.getState().total}})),T()(g()(a),"getTrackAttachInfo",(function(){var e=a.store.getState(),t=e.serverMeta,n=e.departureCity,r={};if("true"==(null===t||void 0===t?void 0:t["AROUND-SEARCH"])&&(r.around_search="T"),"true"==(null===t||void 0===t?void 0:t["RESIDENT-PLACE-SEARCH"])&&(r.permanent_residence_search="T"),null!==t&&void 0!==t&&t["RESIDENT-PLACE-ID"]){var i=null===t||void 0===t?void 0:t["RESIDENT-PLACE-ID"],o=n.cityId;r.permanent_residence_cityid=i,r.permanent_residence_equals_departcity=i==o?"T":"F"}return r})),T()(g()(a),"getTrackMemberInfo",(function(){var e=a.store.getState().operationBanner,t=(null===e||void 0===e?void 0:e.extendInfo)||{},n={};return null!==t&&void 0!==t&&t.is_supper_user&&(n.is_supper_user=t.is_supper_user),null!==t&&void 0!==t&&t.vip_level_code&&(n.vip_level_code=t.vip_level_code),null!==t&&void 0!==t&&t.vip_level_name&&(n.vip_level_name=t.vip_level_name),null!==t&&void 0!==t&&t.is_flight_member&&(n.is_flight_member=t.is_flight_member),n})),T()(g()(a),"getTrackProductInfo",(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.product,r=t.isRecommend,i=t.innerPos,o=t.attachInfo,c=t.isClick,l=a.store.getState(),s=l.pageNumber,u=l.recommendProducts,d=n.basicInfo,p=n.priceInfo,f=n.id,m=n.formatPreSaleInfo,v=n.isNewProduct,h=d||{},g=h.departures,y=h.extras,b=m||{},E=b.isPreSale,_=o||{},O=_.preSaleId,k=null===y||void 0===y?void 0:y.TYPE,C=(null===g||void 0===g||null===(e=g[0])||void 0===e?void 0:e.id)||(null===y||void 0===y?void 0:y.departureCityId)||0,T=u.length,I=ki(k),S=r?0:s,N=Number(i)+1,P=r?N:T+N,w={pkgposition:P,stcityid:C,pkgid:k==Kn.fb?"".concat(f,"_otd"):f,bu:I,lob:I,module:S,list_seq:N,page:s,display_price:(null===p||void 0===p?void 0:p.price)||"",original_price:(null===p||void 0===p?void 0:p.originalPrice)||"",is_new_product:v?1:0};return w.is_presale=E?1:0,c&&(w.is_presale_click=O?1:0),w})),T()(g()(a),"getTrackModuleInfo",(function(){var e=a.store.getState(),t=e.search,n=e.currentTabInfo,r=e.pageId,i=e.pageTab,o=e.departureCity,c=e.serverAnalysis,l=(n||{}).id,s=c||{},u=s.keywordAttribute,d=s.locale,p=s.bizLine,f=s.termTypes,m=s.residentPlaceId,v=s.residentPlaceName,h=s.personalRecommend,g=s.intentionOrderSource;return{pagetabid:l,pagetab:i,departcityid:o.cityId,departcityname:o.cityName,locatecityid:"",locatecityname:"",recidencecityid:m,recidencecityname:v,kwd:t.keyword,kwdtype:u,bizline:p,locale:d,termTypes:f,pagecode:r,person_recommend_state:h,intention_order_source:g}})),T()(g()(a),"getTrackFilterInfo",(function(){var e={},t={},n=a.store.getState(),r=n.currentFilters,i=n.sortType,o=n.isTradeFilter,c=n.isBestone,l=(n.currentTabInfo||{}).id,s=(r=r||[]).filter(ni),u=r.filter(ti),d=i||Ii({tabId:l,isBestone:c});e.seq=Kn.cb[d];var p=s.map((function(e){var t=e.items;return{key:e.clientType,value:t.map((function(e){var t=e.name,n=e.value;return t==n?"".concat(n,"_"):"".concat(n,"_").concat(t)})).join()}}));(p=p||[]).forEach((function(t){var n=t.key,r=t.value,a=Kn.s[n],i=a&&a.traceCode?a.traceCode:n;e[i]=r}));var f=u.map((function(e){var t=e.items;return{key:e.clientType,value:t.map((function(e){return String(e.name).replace(/\-/g,"")})).join()}}));if((f=f||[]).forEach((function(e){var n=e.key,r=e.value;t[n]=r})),t.ea||t.fa){var m=t.ea||"",v=t.fa||"";e.dpdarea="".concat(m,"-").concat(v)}if(t.min||t.max){var h=t.min||"",g=t.max||"";e[o?"trade_price_area":"prcarea"]="".concat(h,"-").concat(g)}return e})),T()(g()(a),"getTrackFilterQuickInfo",(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={},n=[],r=[],i=[],o=a.store.getState(),c=o.selectedPrefers,l=o.prefers,s=e?c:l;return(s=s||[]).forEach((function(e){var t=e.traceType,a=e.clientType,o=e.name,c=e.value,l=Kn.s[a],s=l&&l.traceCode?l.traceCode:a,u="".concat(s,"#").concat(c,"_").concat(o);"Prefer"==t&&n.push(u),"Custom"==t&&r.push(u),["Prefer","Custom"].includes(t)||i.push(u)})),n.length&&(t.ftpre=n.join()),r.length&&(t.ftoper=r.join()),i.length&&(t.ftboot=i.join()),t})),T()(g()(a),"getTrackValueGeneralParts",(function(){return xu(xu(xu(xu({},a.getTrackBaseInfo()),a.getTrackPageInfo()),a.getTrackRecInfo()),a.getTrackAttachInfo())})),T()(g()(a),"triggerTrack",(function(e,t,n){var r=a.store.getState(),i=r.isOnline,o=r.isBestone,c=r.isOffline;("undefined"===typeof n||i&&"online"===n||o&&"bestone"===n||c&&"offline"===n)&&a.tracelog(e,t)})),T()(g()(a),"trackListPageLoad",(function(){var e=a.store.getState(),t=e.products,n=e.totalFilters,r=e.isCrawlerLoad,i=0==t.length,o="pkg_list_load_online_basic";i&&(o="pkg_nolist_load_online"),r&&(o="pkg_nolist_crawlerload_online");var c=xu(xu(xu({},a.getTrackValueGeneralParts()),a.getTrackFilterInfo()),a.getTrackFilterQuickInfo());i&&a.logInterruption("vac_42000","\u67e5\u8be2\u65e0\u7ed3\u679c"),null!==n&&void 0!==n&&n.length||a.logInterruption("vac_10097","\u65e0\u7b5b\u9009\u9879\u7c7b\u522b"),a.triggerTrack(o,c)})),T()(g()(a),"trackListProductClick",(function(e){var t=e.product,n=e.isRecommend,r=e.innerPos,i=e.attachInfo,o=xu(xu(xu(xu({},a.getTrackValueGeneralParts()),a.getTrackFilterInfo()),a.getTrackFilterQuickInfo()),a.getTrackProductInfo({product:t,isRecommend:n,innerPos:r,attachInfo:i,isClick:!0}));a.triggerTrack("pkg_list_pkgclick_online",o)})),T()(g()(a),"trackListProductExpose",(function(e){var t=e.product,n=e.isRecommend,r=e.innerPos,i=xu(xu(xu(xu({},a.getTrackValueGeneralParts()),a.getTrackFilterInfo()),a.getTrackFilterQuickInfo()),a.getTrackProductInfo({product:t,isRecommend:n,innerPos:r}));a.triggerTrack("pkg_list_pkgexpos_online",i)})),T()(g()(a),"trackListFilterExpose",(function(){var e=xu(xu(xu({},a.getTrackValueGeneralParts()),a.getTrackFilterInfo()),a.getTrackFilterQuickInfo());a.triggerTrack("pkg_list_filterclick_online",e),a.triggerTrack("pkg_list_chsclick_online",e)})),T()(g()(a),"trackListQuickFilterExpose",(function(){var e=xu(xu({},a.getTrackValueGeneralParts()),a.getTrackFilterQuickInfo(!1));a.triggerTrack("pkg_list_ftexpos_online",e)})),T()(g()(a),"trackSimpleFunctionExpose",(function(e){var t=e.fun,n=e.moreParam,r=void 0===n?{}:n,i=e.trackType,o=e.exposePoint;if(!a.exposeContainer[o]){var c=a.store.getState(),l=xu({fun:t,pagetab:c.pageTab,departcityid:c.departureCity.cityId},r);a.exposeContainer[o]=1,a.triggerTrack("pkg_list_funexpos_online",l,i)}})),T()(g()(a),"trackSimpleFunctionClick",(function(e){var t=e.fun,n=e.moreParam,r=void 0===n?{}:n,i=e.trackType,o=a.store.getState(),c=xu({fun:t,pagetab:o.pageTab,departcityid:o.departureCity.cityId},r);a.triggerTrack("pkg_list_funclick_online",c,i)})),T()(g()(a),"trackBestoneSearchBox",(function(e){var t=e||{},n=t.userInput,r=t.recType,i=t.tabName,o=t.cityId,c=t.cityName,l={button:n,pageid:a.store.getState().pageId,cityid:o,cityname:c,sourcetype:a.getBestoneStoreTypeName(),rec_type:r,tabname:i};a.triggerTrack("tds-lst-search-button-cityid",l,"bestone")})),T()(g()(a),"logPageInfo",(function(){var e=a.store.getState(),t=e.search,n=e.departureCity,r=e.currentTabInfo,i=e.isOnline,o=e.isOffline,l=e.isBestone,s=e.total,u=e.query,d=(r||{}).id;try{var p={desc:"\u57fa\u672c\u4fe1\u606f",attrs:[{key:"kwd",value:t.keyword}],contents:[{key:"\u51fa\u53d1\u57ce\u5e02",value:n.cityName+"("+n.cityId+")"},{key:"\u641c\u7d22\u8bcd",value:t.keyword},{key:"tab",value:d},{key:"\u4ea7\u54c1\u8ba1\u6570",value:s}]},f={desc:"\u6e20\u9053\u4fe1\u606f",attrs:[{key:"kwd",value:t.keyword}],contents:[{key:"Online",value:i},{key:"Offline",value:o},{key:"Bestone",value:l}]},m={desc:"\u53c2\u6570\u4fe1\u606f",attrs:[{key:"kwd",value:t.keyword}],contents:Object.entries(u).map((function(e){var t=c()(e,2),n=t[0],r=t[1];return{key:n,value:String(r)}}))};a.DHTLogger.logPageInfo(p),a.DHTLogger.logPageInfo(f),a.DHTLogger.logPageInfo(m)}catch(v){}})),T()(g()(a),"logActionInfo",(function(e){var t=a.store.getState().search;try{var n=xu({attrs:[{key:"kwd",value:t.keyword}]},e);a.DHTLogger.logActionInfo(n)}catch(r){}})),T()(g()(a),"logError",(function(e,t){try{var n={pageName:"pc_tour_list",message:e,ex:t};a.DHTLogger.logError(n)}catch(t){}})),T()(g()(a),"logMessage",(function(e){try{a.DHTLogger.logMessage(e)}catch(t){}})),T()(g()(a),"logInterruption",(function(e,t){if(!a.context.isServer)try{a.logActionInfo({key:e,value:t,module:"\u53ef\u8ba2\u963b\u65ad"})}catch(n){}})),a.scrollHandlerThrottled=S.a.throttle(a.scrollHandler,300).bind(g()(a)),a.resizeHandlerThrottled=S.a.throttle(a.resizeHandler,300).bind(g()(a)),a}return k()(t,e),f()(t,[{key:"shouldComponentCreate",value:function(){var e=s()(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setPageParams(),t=Sr(this.context,this.store.getState())){e.next=6;break}return e.next=5,this.getBestoneLoginRedirectUrl();case 5:t=e.sent;case 6:if(t){e.next=10;break}return e.next=9,this.getOfflineLoginRedirectUrlSSO2();case 9:t=e.sent;case 10:if(t||(t=this.getQueryBstRedirectUrl()),t||(t=this.getStoreRedirectUrlIfUnsupport()),t){e.next=16;break}return e.next=15,this.getStartCityRedirectUrl();case 15:t=e.sent;case 16:if(t||(t=this.getH5WirelessRedirectUrl()),!t){e.next=20;break}return this.redirect(t,!0),e.abrupt("return",!1);case 20:return e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillCreate",value:function(){var e=s()(regeneratorRuntime.mark((function e(){var t,n,r,a,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.store.getState(),n=t.isSearchVendorStore,r=t.query,this.setEnvParams(),this.initSearchInfo(),!r.sv&&!r.st){e.next=9;break}if(a=this.getUserAgent(),!/Googlebot/i.test(a)&&"true"!=r.isgooglebot){e.next=9;break}return this.context.res.sendStatus(404),e.abrupt("return");case 9:return e.next=11,Promise.all([this.getPreload(),this.getBestoneStoreInfo(),this.getPoiInfo()]);case 11:if(!n){e.next=21;break}return e.next=14,this.initStartCityList();case 14:return e.next=16,this.getProductSearchFilter();case 16:return e.next=18,this.getSearchResultOfStore();case 18:return e.next=20,this.getShopListOfStore();case 20:return e.abrupt("return");case 21:if(!this.prefixPageParams()){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,Promise.all([this.getProductSearchFilter({resOnly:!0,needTailoring:!0}),this.getProductSearchResult({resOnly:!0,needTailoring:!0}),this.initStartCityList()]).then((function(e){var t=i.store.actions,n=t.UPDATE_PRODUCT_SEARCH_FILTER,r=t.UPDATE_PRODUCT_SEARCH_RESULT,a=t.UPDATE_CRUMB,o=(null===e||void 0===e?void 0:e[0])||{},c=(null===e||void 0===e?void 0:e[1])||{};n(o),r(xu(xu({},c),{},{needTailoring:!0})),a()}));case 25:return e.next=27,this.fixPageParams();case 27:return!e.sent&&this.renderView(),e.next=31,Promise.all([this.getRecommendPoiList(),this.getAroundRecommendPoiList(),this.getQueryOrderList()]);case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidFirstMount",value:function(){b()(_()(t.prototype),"componentDidFirstMount",this).call(this),this.doSelfJumpIfNeeded(),this.setPageMeta(),this.setScrollRestoration(),this.setScreenWidthInfo(),this.initBstSdk(),this.logPageInfo()}},{key:"componentDidMount",value:function(){if(this.store.getState().isSearchVendorStore)return this.scrollToTop(),this.showTransitLoading(!1),this.storeCurrentCity(),this.getWeatherInfo(),this.getSearchAgain(),this.getDefaultFavorites(),window.addEventListener("scroll",this.scrollHandlerThrottled),void window.addEventListener("resize",this.resizeHandlerThrottled);this.scrollToTop(),this.showTransitLoading(!1),this.storeCurrentCity(),this.getDerivedLatestOrderInfo(),this.getProductSearchResult(),this.getOperationBanner(),this.getWeatherInfo(),this.getSearchAgain(),this.getDefaultFavorites(),this.getRecommendPoiImages(),this.getQueryOrderListPoiInfos(),this.getCustomerServiceTelNumebr(),this.trackListPageLoad(),this.trackListFilterExpose(),this.trackListQuickFilterExpose(),this.trackModuleExposeIfNeed(),this.trackListProductExposeIfNeed(),window.addEventListener("scroll",this.scrollHandlerThrottled),window.addEventListener("resize",this.resizeHandlerThrottled)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.scrollHandlerThrottled),window.removeEventListener("resize",this.resizeHandlerThrottled)}},{key:"initSearchInfo",value:function(){var e=this.store.getState(),t=e.tab,n=e.poiType,r=e.poiName,a=e.poiId,i=e.filter,o=e.searchValue,c=e.searchText;(0,this.store.actions.UPDATE_SEARCH)({tab:t,poiType:n,poiName:r,poiId:a,filter:i,keyword:o||c})}},{key:"getStartCityFromServer",value:function(){var e=s()(regeneratorRuntime.mark((function e(){var t,n,r,a,i,o,c,l,s,u,d,p,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=dr.g(this.context.req),dr.b(t)){e.next=3;break}return e.abrupt("return",null);case 3:return e.prev=3,e.next=6,this.post(this.API.getIpInfo,{ip:t},{});case 6:if(r=e.sent,a=r.result||r.Result||{},i=a.Longitude,o=a.Latitude,c=a.CountryNameEN,l=a.longitude,s=a.latitude,u=a.countryNameEN,i=void 0==i?l:i,o=void 0==o?s:o,n={ip:t,lonLat:r},"China"===(c=void 0==c?u:c)){e.next=14;break}return e.abrupt("return",null);case 14:return e.next=16,this.post(this.API.locationCity,{Longitude:i,Latitude:o,Type:1,ProductType:"AGG",CoordType:"WGS84"},{});case 16:return d=e.sent,n=xu(xu({},n),{},{Longitude:i,Latitude:o,locationInfo:d}),p=(d||{}).Data,f=(p||{}).DepartureCityId,e.abrupt("return",{cityId:f});case 23:return e.prev=23,e.t0=e.catch(3),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,this,[[3,23]])})));return function(){return e.apply(this,arguments)}}()}]),t}(D.a)}}]);