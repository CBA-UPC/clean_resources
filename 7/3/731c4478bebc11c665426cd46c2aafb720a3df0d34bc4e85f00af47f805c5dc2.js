(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1534],{64537:15329:function(e,t,n){"use strict";n.d(t,{Z:function(){return MissingViewPermission}});var s=n(52322),a=n(8583),o=n(51830);,68808:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return et},default:function(){return en}});var s=n(52322),a=n(2784),o=n(57643),i=n(66379),r=n(43913),l=n(68810),c=n(32660),d=n(50926);let u=[{id:"clnuq6z4p00ryrwc2jd2uye36",companyAccount:{id:"clnuq6z4p00ryrwc2jd2uye36",name:"Dropbox",websiteDomain:"dropbox.com",engaged:!0},visitorCount:4,sessionTime:496975,sessionCount:8},{id:"clnuq6z4l00rsrwc2xab4k4zr",companyAccount:{id:"clnuq6z4l00rsrwc2xab4k4zr",name:"PagerDuty",websiteDomain:"pagerduty.com",engaged:!0},visitorCount:6,sessionTime:475990,sessionCount:6},{id:"clnuq6z4p00ryrwc2jd2uye36",companyAccount:{id:"clnuq6z4p00ryrwc2jd2uye36",name:"Ramp",websiteDomain:"ramp.com",engaged:!1},visitorCount:10,sessionTime:486975,sessionCount:10},{id:"clnuq6z4l00rsrwc2xab4k4zr",companyAccount:{id:"clnuq6z4l00rsrwc2xab4k4zr",name:"Brex",websiteDomain:"brex.com",engaged:!0},visitorCount:3,sessionTime:365990,sessionCount:6},{id:"clnuq6z4o00rvrwc29msq5hhv",companyAccount:{id:"clnuq6z4o00rvrwc29msq5hhv",name:"Drift",websiteDomain:"drift.com",engaged:!1},visitorCount:12,sessionTime:385595,sessionCount:13},{id:"clnuq6z4o00rvrwc29msq5hhv",companyAccount:{id:"clnuq6z4o00rvrwc29msq5hhv",name:"Datadog",websiteDomain:"datadog.com",engaged:!0},visitorCount:6,sessionTime:225595,sessionCount:6},{id:"clnuq6z4o00rvrwc29msq5hhv",companyAccount:{id:"clnuq6z4o00rvrwc29msq5hhv",name:"Mixpanel",websiteDomain:"mixpanel.com",engaged:!1},visitorCount:6,sessionTime:325595,sessionCount:8}];var m=n(1991),x=n(86414),p=n(93303),g=n(37876),h=n(45152),j=n(7967),v=n(35455),b=n(18484),Account_ExportAccountsButton=e=>{let{projectId:t}=e,[n,o]=(0,a.useState)(!1),[i,r]=(0,a.useState)(!0),{rqlFilter:l}=(0,p.Z)(),{searchText:c}=(0,g.Z)(),{workspace:d}=(0,h.cF)();return(0,s.jsxs)("div",{children:[(0,s.jsx)(v.Z,{onClick:()=>o(!0)}),(0,s.jsx)(b.Z,{title:"Export Accounts",open:n,handleClose:()=>o(!1),nextText:"Export",handleNext:()=>{let e=new URLSearchParams;e.append("workspaceId",d.id),i?(l&&e.append("filter",l),c&&e.append("searchText",c),t&&e.append("projectId",t)):e.append("filter",j.QN.updatedAllTime().toString());let n="".concat((0,m.xH)(),"?").concat(e.toString());x.Z.track("exported_accounts",{download_url:n}),window.open(n,"_blank"),o(!1)},subText:"Accounts will be downloaded as a CSV file containing up to 5,000 rows.",exportWithFilters:i,setExportWithFilters:r})]})},y=n(97739),f=n(8583),w=n(78066);function InteractiveDemoModal(e){let{demoLink:t,demoName:n,open:o,handleClose:i}=e,r=(0,a.useRef)(null),{currentUser:l}=(0,h.xJ)(),{workspace:c}=(0,h.cF)();return(0,a.useEffect)(()=>{setTimeout(()=>{var e,t;null===(t=r.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.postMessage({kind:"navattic:identify",attributes:{"user.name":null==l?void 0:l.fullName,"user.email":null==l?void 0:l.email,"company.name":c.name,"company.websiteDomain":c.domain}},"*")},3e3)},[o,r,l,c]),(0,s.jsx)(w.Z,{open:o,handleClose:i,hideFooter:!0,nextText:"Close",isRaw:!0,children:(0,s.jsxs)("div",{className:"inline-block h-[85vh] w-full max-w-[90vw] transform overflow-hidden rounded-lg bg-gray-50 text-left align-bottom shadow-xl ring-4 ring-gray-900/30 transition-all sm:align-middle",children:[(0,s.jsxs)("div",{className:"flex h-[50px] w-full items-center justify-between border-b px-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-x-2 text-sm font-medium",children:[(0,s.jsx)("div",{className:"rounded bg-gray-200 p-1",children:(0,s.jsx)(f.S4n,{className:"h-3.5 w-3.5"})}),"Viewing Interactive Demo",(0,s.jsx)("div",{className:"rounded-full border border-gray-300 bg-white px-2 py-1 text-sm text-gray-900",children:n})]}),(0,s.jsx)("button",{className:"btn-zinc px-2 py-1 text-base font-medium",onClick:i,children:"Close"})]}),(0,s.jsx)("iframe",{ref:r,src:t,className:"h-full w-full border-none"})]})})}var A=n(96577),N=n.n(A);function AnnounceAccountBasedEngagement(e){let{demoLink:t}=e,[n,o]=(0,a.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(y.Z.Root,{children:[(0,s.jsx)(y.Z.Header,{title:"Account based engagement",description:"Automatically reveal the company and enriched firmographic information of visitors."}),(0,s.jsx)(y.Z.Body,{children:(0,s.jsxs)("div",{onClick:()=>o(!0),className:"group mb-5 cursor-pointer overflow-hidden rounded-md border",children:[(0,s.jsxs)("div",{className:"relative pt-2",children:[(0,s.jsx)("div",{className:"mx-auto flex w-fit rounded-2xl bg-gradient-to-b from-gray-100/50 to-gray-200/50 p-2 ",children:(0,s.jsx)("div",{className:"relative w-full overflow-hidden rounded-lg border",children:(0,s.jsx)("div",{className:"h-[110px] w-[170px]",children:(0,s.jsx)(N(),{alt:"Product Demo Details Page",src:"/account-based-engagement.png",fill:!0,style:{objectFit:"contain"},priority:!0})})})}),(0,s.jsx)("div",{className:"absolute bottom-0 z-10 h-20 w-full bg-gradient-to-t from-white"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between border-t bg-gray-50 px-4 py-2 text-base font-medium group-hover:bg-gray-100",children:["Try an interactive demo",(0,s.jsx)("div",{className:"rounded bg-gray-200 p-1",children:(0,s.jsx)(f.S4n,{className:"h-3.5 w-3.5"})})]})]})}),(0,s.jsx)(y.Z.Footer,{children:(0,s.jsx)(y.Z.NextButton,{onClick:children:"Contact us to enable"})})]}),(0,s.jsx)(InteractiveDemoModal,{demoLink:t,demoName:"Account based engagement",open:n,handleClose:)]})}var C=n(2612),Z=n(75312),P=n(84038);let E={id:"all-projects",name:"All Product Demos"};function AccountsFilterProject(e){var t;let{setProjectId:n,projectId:a}=e,{workspace:o}=(0,h.cF)(),i=a||E.id,[{data:r}]=(0,P.O)({variables:{data:{workspaceId:o.id,limit:100,archived:!1}}}),l=[E,...(null==r?void 0:null===(t=r.projects)||void 0===t?void 0:t.results)||[]],c=l.map(,d=new Map(l.map(),labelGetter=return(0,s.jsx)(Z.Z,{options:c,value:i,optionLabelGetter:label:"Product Demos",onChange:e=>{n(e===E.id?null:e)}})}var _=n(47294),q=n(57473),T=n(21002),z=n(18406),k=n(170),D=n(15329),F=n(13507),I=n(81291),S=n(25948),L=n(54532),M=n(70805),B=n(49323),H=n(51904),O=n(73235),G=n(66547),V=n(26806);et R=(0,G.ZP)(_templateObject());var K=n(43123);et $=(0,G.ZP)(listCompanyAccount_templateObject(),K.h);var J=n(47330),Q=n(83122),U=n(48464),W=n(19340),X=n(20851),Y=n(77512);let ee=[{id:"Company Account",Header:(0,s.jsx)(d.Z,{}),width:"300px",accessor:"companyAccount",Cell:e=>{let{cell:{value:t}}=e;return(0,s.jsx)(T.T3,{companyAccount:t})}},{Header:"Engagement",accessor:"companyAccount",Cell:e=>{let{cell:{value:t}}=e;return(0,s.jsx)(T.eL,{engaged:t.engaged})}},{Header:"Visitors",accessor:"visitorCount",Cell:e=>{let{cell:{value:t}}=e;return(0,s.jsx)(T.b1,{visits:t})}},{Header:"Total Time",accessor:"sessionTime",Cell:e=>{let{cell:{value:t}}=e;return(0,s.jsx)(T.Ti,{totalTime:t})}},{Header:"Visits",accessor:"sessionCount",Cell:],FilterAccountEngaged=()=>{var e,t;let{setRqlFilter:n,presetFilters:a}=(0,p.Z)(),[o,i]=(0,X.QZ)(a,e=>e.args[0]===j.Eu.Engaged),r=null!==(t=null===(e=o[0])||void 0===e?void 0:e.args[1])&&void 0!==t?t:"Any";return(0,s.jsx)(Z.Z,{options:["Any","High","Low"],value:r,optionLabelGetter:e=>"string"==typeof e?e:e?"High":"Low",label:"Engaged",onChange:e=>{if("Any"===e){n(new W.ZP("and",[...i]));return}if("High"===e){n(new W.ZP("and",[...i,new W.ZP("eq",[j.Eu.Engaged,!0])]));return}if("Low"===e){n(new W.ZP("and",[...i,new W.ZP("eq",[j.Eu.Engaged,!1])]));return}}})},AccountFilterPanel=e=>{let{setProjectId:t,projectId:n}=e,{setRqlFilter:a}=(0,p.Z)();return(0,s.jsxs)("div",{className:"min-w-[400px] space-y-3",children:[(0,s.jsx)(AccountsFilterProject,{setProjectId:t,projectId:n}),(0,s.jsx)(FilterAccountEngaged,{}),(0,s.jsx)("div",{className:"mx-3 flex justify-start",children:(0,s.jsx)("button",{className:"mt-2 text-sm text-gray-500 hover:text-gray-700",onClick:children:"Clear all"})})]})},AccountFilterButton=e=>{let{setProjectId:t,projectId:n}=e,[o,c]=(0,a.useState)(null),[d,u]=(0,a.useState)(null),{x:m,y:x,strategy:g}=(0,i.YF)({placement:"bottom-start",elements:{reference:d,floating:o}}),{presetFilters:h}=(0,p.Z)(),v=h.filter(e=>e.args[0]&&![j.Eu.UpdatedAllTime,j.Eu.UpdatedGt30Days,j.Eu.UpdatedGt7Days].includes(e.args[0]));return(0,s.jsxs)(r.J,{children:[(0,s.jsx)(r.J.Button,{as:"div",ref:u,children:(0,s.jsxs)("button",{className:(0,Q.AK)(v.length>0?"border-blue-primary text-blue-primary":"border-gray-200 text-zinc-500","flex items-center rounded-md border bg-zinc-50 px-3.5 py-2 text-base font-normal"),children:[(0,s.jsx)(f.eqi,{className:"-ml-.5 mr-1 h-3.5 w-3.5"}),"Filters"," ",v.length>0&&(0,s.jsxs)("span",{className:"ml-1",children:["(",v.length,")"]})]})}),(0,s.jsx)(l.u,{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,s.jsx)(r.J.Panel,{ref:c,style:{position:g,top:null!=x?x:0,left:null!=m?m:0,width:"max-content"},className:"z-10 mt-2 rounded-md border bg-zinc-50 px-2 py-3 text-lg shadow-lg",children:)})]})};function CompanyAccountsListPage(e){var t;let{workspace:n}=(0,h.cF)(),{startIndex:i,isStart:r,isEnd:l,setTotalCount:d,getNext:m,getPrev:x}=(0,U.Z)(25),j=(0,h.NK)(n,J.TT.Enrichment),{searchText:v,setSearchText:b}=(0,g.Z)(),{rqlFilter:y}=(0,p.Z)(),[w,A]=(0,a.useState)(null),[N]=(0,o._)((0,F.$X)(n.id),!1),Z={workspaceId:n.id,searchText:v,rqlFilter:y,projectId:w,showDemoData:N},[{data:P,fetching:E}]=(t={variables:{data:{...Z,limit:25,skip:i}},pause:!(null==n?void 0:n.id)},V.aM({query:$,...t})),T=(0,a.useMemo)([P]),[{data:k,fetching:O}]=V.aM({query:R,variables:{data:Z}}),G=(0,a.useMemo)([k]);(0,a.useEffect)([P,d,G]);let K=(0,h.j_)(J.KG.CompanyAccounts);return j?(0,s.jsxs)(L.Z,{workspaceItem:J.KG.CompanyAccounts,children:[(0,s.jsx)(I.Z,{title:"Accounts",includeSlug:!0}),(0,s.jsxs)(z.Z,{children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(S.Z,{title:"Accounts",fetching:E,count:G}),(0,s.jsx)(Account_ExportAccountsButton,{projectId:w})]}),(0,s.jsxs)("div",{className:"mt-5 flex flex-row justify-between",children:[(0,s.jsxs)("div",{className:"flex gap-x-3",children:[(0,s.jsx)(Y.E1,{value:v,onChange:b,placeholder:"Search company by name",className:"w-[20em]"}),(0,s.jsx)(AccountFilterButton,{setProjectId:A,projectId:w})]}),(0,s.jsx)("div",{className:"min-w-[135px]",children:(0,s.jsx)(_.Z,{})})]}),(0,s.jsx)("div",{className:"h-5"}),K===J.KA.None?(0,s.jsx)("div",{className:"mx-8 mt-5 flex-1",children:(0,s.jsx)(D.Z,{})}):(0,s.jsxs)(q.ZP,{children:[(0,s.jsx)(H.Z,{}),(0,s.jsx)(c.Z,{}),(0,s.jsx)(B.Z,{columns:ee,data:T,loading:E,Empty:()=>(0,s.jsx)(C.r,{title:v?"No matching accounts found":"No existing company accounts",description:v?"Change your filters or search to expand your results":"",icon:(0,s.jsx)(f.ZyV,{className:"mx-auto h-6 w-6 text-gray-300"})})})]}),(0,s.jsx)("div",{className:"mb-1 pt-5",children:(0,s.jsx)(M.Z,{loading:O,isStart:r,isEnd:l,handleNext:m,handlePrev:x})})]})]}):(0,s.jsxs)(z.Z,{children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)(S.Z,{title:"Accounts",count:u.length}),(0,s.jsx)("div",{className:"w-auto",children:(0,s.jsx)("div",{className:"rounded-full bg-gray-600 px-2 py-1 text-[13px] font-medium text-white",children:"Showing example data"})})]}),(0,s.jsx)("div",{className:"h-5"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(B.Z,{columns:ee,data:u,loading:!1}),(0,s.jsx)("div",{className:"absolute left-0 top-0 z-10 h-full w-full"}),(0,s.jsx)("div",{className:"absolute bottom-0 z-10 h-[350px] w-full bg-gradient-to-t from-white"})]}),(0,s.jsx)(AnnounceAccountBasedEngagement,{...e})]})}CompanyAccountsListPage.getLayout=var et=!0,en=CompanyAccountsListPage}},);
//# sourceMappingURL=accounts-fed0c0fba4affb54.js.map