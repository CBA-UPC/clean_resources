!function(){var e={588:function(e){self,e.exports=(()=>{"use strict";var e={d:o:r:,t={};function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}e.r(t),e.d(t,{getLanguage:()=>s,interpolate:()=>d,setLanguage:()=>o,setupI18n:()=>r,translate:);var a="i18n",i={supportedLanguages:{}},r=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.supportedLanguages,s=void 0===r?{}:r,o=t.language;s&&"object"===n(s)&&0!==Object.keys(s).length?(o&&Object.prototype.hasOwnProperty.call(s,o)?e=o:(e=Object.keys(s)[0],console.log(a,"No language explicitly set, using",e)),i={supportedLanguages:s,language:e}):console.log(a,"Invalid config",s)},s=function(){return i.language},o=function(e){e&&Object.prototype.hasOwnProperty.call(i.supportedLanguages,e)?i=Object.assign({},i,{language:e}):console.log(a,"Invalid language: ".concat(e))},c=function(e){var t=i.language;if(!t||!i.supportedLanguages[t])return"";var n=i.supportedLanguages[t];if(!Object.prototype.hasOwnProperty.call(n,e))return"string"==typeof e?e:"";for(var a=n[e]||"",r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return d.apply(void 0,[a].concat(s))},d=function(e){if("string"!=typeof e||0===e.length)return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return[].concat(n).forEach((function(t,n){if("string"==typeof t||"number"==typeof t){var a=new RegExp("\\{".concat(n,"\\}"),"g");e=e.replace(a,t)}})),e};return t})()},846:function(){function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:writable:!0,configurable:!0})},808:function(e){maxFromBits=t.limitUI04=t.maxFromBits(4),t.limitUI06=t.maxFromBits(6),t.limitUI08=t.maxFromBits(8),t.limitUI12=t.maxFromBits(12),t.limitUI14=t.maxFromBits(14),t.limitUI16=t.maxFromBits(16),t.limitUI32=t.maxFromBits(32),t.limitUI40=t.maxFromBits(40),t.limitUI48=t.maxFromBits(48),t.randomUI04=function(){return n(0,t.limitUI04-1)},t.randomUI06=function(){return n(0,t.limitUI06-1)},t.randomUI08=function(){return n(0,t.limitUI08-1)},t.randomUI12=function(){return n(0,t.limitUI12-1)},t.randomUI14=function(){return n(0,t.limitUI14-1)},t.randomUI16=function(){return n(0,t.limitUI16-1)},t.randomUI32=t.randomUI40=t.randomUI48=t.paddedString=t.prototype.fromParts=t.prototype.toString=t.prototype.toURN=t.prototype.toBytes=t.prototype.equals=t.getTimeFieldValues=t._create4=t._create1=function(){var e=(new Date).getTime(),n=t.randomUI14(),a=1099511627776*(1|t.randomUI08())+t.randomUI40(),i=t.randomUI04(),r=0;e!=r?(e<r&&n++,r=e,i=t.randomUI04()):Math.random()<1/4&&i<9984?i+=1+t.randomUI04():n++;var s=t.getTimeFieldValues(r),o=s.low+i,c=4095&s.hi|4096,d=(n&=16383)>>>8|128,u=255&n;return(new t).fromParts(o,s.mid,c,d,u,a)},t.create=t.fromTime=t.firstFromTime=function(e){return t.fromTime(e,!1)},t.lastFromTime=t.fromURN=t.fromBytes=t.fromBinary=t.new=function(){return this.create(4)},t.newTS=e.exports=t}},t={};.n=n.d=n.o=function(){"use strict";"US",l="web-sdk",h={CLIENT_DEVICE:"ASAPP-ClientDevice",CLIENT_TYPE:"ASAPP-ClientType",CLIENT_VERSION:"ASAPP-ClientVersion",COMPANY_MARKER:"ASAPP-CompanyMarker",PARTNER_APP_VERSION:"ASAPP-PartnerAppVersion",LANGUAGE:"ASAPP-Language",REGION_CODE:"ASAPP-RegionCode"},f="JS API: Action",E="JS API: Send",g="JS API: SetIntent",S="Set Context",I="chatinstead",p="chatinstead.abc",A="chatinstead.gbm",m="chatinstead.getchannelsettings",C="chatinstead.phone",T="chatinstead.sms",v="chatinstead.web",y="web.api.action.off",O="web.api.action.on",b="web.api.getstate",N="web.api.hide",_="web.api.send",L="web.api.set",M="web.api.setintent",D="web.api.show",P="web.api.showchatinstead",R="web.api.unload",w="web.notification",B="called",F="dismiss",k="display",U="request.failure",H="request.start",G="request.success",x="select",V="count",j="device_type",$="Continue Session",q="conversational",W="direct",K="Opt-in",Y="Opt-out",z="sdk.asapp.com",J=[].concat(d=[])||d)||c(d)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[z,"sdk.uat.asapp.com"]).map((function(e){return"https://"+(/\.asapp\.com$/.test(e)?e:e+":3000")})),Z="sidebar",X={DESKTOP:"desktop",MOBILE:"mobile",TABLET:"tablet",UNKNOWN:"unknown",WATCH:"watch"},Q={MOBILE:414,TABLET_LANDSCAPE:1024,TABLET_PORTRAIT:768},ee={WEB_DESKTOP:"web_desktop",WEB_IOS:"web_iOS",WEB_ANDROID:"web_android"},te="asappChatSDK",ne="asapp-chat-sdk-",ae={HOSTHTML:{CLASSNAME:{DEFAULT:te+"HostHTML",CHAT_OPEN:te+"HostHTML_chatOpened",CHAT_FULLSCEEN:te+"HostHTML_chatFullscreen",CHAT_SIDEBAR:te+"HostHTML_chatSideBar",LEFT:te+"HostHTML_chatLeft",RIGHT:te+"HostHTML_chatRight"}},BADGE:{CLASSNAME:{CLOSED:te+"Badge_closed",DEFAULT:te+"Badge",HIDDEN:te+"Badge_hidden",LEFT:te+"Badge_left",OPENED:te+"Badge_opened",RIGHT:te+"Badge_right"},ID:ne+"badge",TEXT:{CLASSNAME:te+"Badge__text"},UNREAD_INDICATOR:{CLASSNAME:te+"Badge__unreadIndicator",VISIBLE:te+"Badge__unreadIndicator_visible"}},CHAT_INSTEAD:{CLASSNAME:{BODY:te+"chatInstead__body",BODY_CLOSED:te+"chatInstead__body_closed",BODY_OPENED:te+"chatInstead__body_opened",CONTAINER:te+"chatInstead__container",CONTAINER_CLOSED:te+"chatInstead__container_closed",CONTAINER_OPENED:te+"chatInstead__container_opened",HEADER:te+"chatInstead__header",LOADING:te+"chatInstead__loading",TITLE:te+"chatInstead__title",CLOSE_BUTTON:te+"chatInstead__closeButton",OPTIONS_CONTAINER:{DEFAULT:te+"chatInstead__optionsContainer",LOADING:te+"chatInstead__optionsContainer_loading"},OPTION:{ICON:te+"chatInstead__optionIcon",ITEM:te+"chatInstead__optionItem",LABEL:te+"chatInstead__optionLabel",TEXT:te+"chatInstead__optionText",TEXT_CONTAINER:te+"chatInstead__optionTextContainer",TITLE:te+"chatInstead__optionTitle"}},ID:{BODY:ne+"chat-instead-body",TITLE:ne+"chat-instead-title"}},FRAME_EL:{CLASSNAME:{DEFAULT:te+"FrameEl"},ID:ne+"frame-el"},MODAL_BACKGROUND:{CLASSNAME:{DEFAULT:te+"ModalBackground",OPENED:te+"ModalBackground_opened",CLOSED:te+"ModalBackground_closed"}},IFRAME:{CLASSNAME:{CLOSED:te+"IFrame_closed",CLOSED_FINISHED:te+"IFrame_closedFinished",DEFAULT:te+"IFrame",IS_FULLSCREEN:te+"IFrame_isFullscreen",IS_MOBILE:te+"IFrame_isMobile",LEFT:te+"IFrame_left",OPENED:te+"IFrame_opened",RIGHT:te+"IFrame_right",SIDEBAR:te+"IFrame_sideBar",SMS_FORM:te+"IFrame_smsForm"},ID:ne+"iframe"},PROACTIVE_MESSAGE:{CLASSNAME:{DEFAULT:te+"Notification",BUTTON:{DEFAULT:te+"Notification__button",CONTAINER:te+"Notification__buttonContainer"},CLOSE_BUTTON:te+"Notification__closeButton",CONTAINER:{DEFAULT:te+"NotificationContainer",HIDDEN:te+"NotificationContainer_hidden"},CONVERSATIONAL:te+"Notification_conversational",DIRECT:te+"Notification_direct",ICON:te+"Notification__icon",LEFT:te+"NotificationContainer_left",RIGHT:te+"NotificationContainer_right",TEXT:te+"Notification__text",TITLE:te+"Notification__title"},ID:{PREFIX:ne+"notification",CONTAINER:ne+"notification-container"}},INTEGRATION:{SEND:{TYPES:{CUSTOMER:"customer",REPORTING:"reporting"},REPORTING_TYPES:{TRANSACTION:"transaction"}},ACTION:{EVENTS:{CHAT_SHOW:"chat:show",CHAT_HIDE:"chat:hide",ISSUE_NEW:"issue:new",ISSUE_END:"issue:end",AGENT_ASSIGNED:"agent:assigned",MESSAGE_RECEIVED:"message:received",FLOW_END:"flow:end",FEEDBACK_REQUESTED:"feedback:requested",FEEDBACK_RECEIVED:"feedback:received"},SENDER_TYPES:{SRS:"srs",AGENT:"agent"}}},JS:{ACTION_OFF:"off",ACTION_ON:"on",GET_STATE:"getState",HIDE:"hide",LOAD:"load",REFRESH:"refresh",SEND:"send",SET:"set",SET_CUSTOMER:"setCustomer",SET_INTENT:"setIntent",SHOW:"show",SHOW_CHAT_INSTEAD:"showChatInstead",UNLOAD:"unload",DEBUG:"debug"}},ie={},re={get:set:function(e,t){"string"==typeof e?null==t?delete ie[e]:ie[e]=t:Be("store.js","#set",'Can only accept a key as a "string"')}},se={LEFT:"left",RIGHT:"right"},oe=280,ce={OMNI:"omni",BADGE:"badge",TRAY:"tray",NONE:"none"},de={INACTIVE:"badgeInactive",ACTIVE:"badgeActive"},ue={ABC:"abc",CHAT:"chat",GBM:"gbm",PHONE:"phone",SMS:"sms"},le={CONVERSATION:"proactiveMessageConversation"},he="close",fe="loading",Ee="/api/noauth/ShouldDisplayWebChat",ge={COBROWSING_TIMESTAMP:"cobrowsingTimeStamp",DEBUG_ENABLED:"debugEnabled",IFRAME_COORDINATES:"iframeCoordinates",IS_ACTIVE_SESSION:"isActiveSession",IS_FULLSCREEN:"isFullscreen",IS_LIVE_CHAT:"isLiveChat",IS_LOGGING_IN:"isLoggingIn",IS_MOBILE:"isMobile",IS_OPEN:"isOpen",IS_PROACTIVE_MESSAGE_DISPLAYED:"isProactiveMessageDisplayed",LOAD_IDENTIFIERS:"loadIdentifiers",PROACTIVE_MESSAGE_IMPRESSION:"notificationImpression",SUPRESSING_FULLSCREEN_OPEN:"supressingFullscreenOpen",UNREAD_MESSAGES:"unreadMessages",ORIGINAL_WINDOW_TITLE:"originalWindowTitle",BLINK_TAB_TIMEOUT_ID:"blinkTabTimeoutId"},Se={API_HOSTNAME:"APIHostname",BADGE_REF:"BadgeRef",CHAT_INSTEAD_REF:"ChatInsteadRef",COMPANY_MARKER:"CompanyMarker",CUSTOMER_ID:"CustomerId",DEEP_LINK_HANDLER:"DeepLinkHandler",DEVICE_INFO:"DeviceInfo",DISPLAY_SETTINGS:"DisplaySettings",HOST_LOCATION:"HostLocation",IFRAME_REF:"IFrameRef",INITIATION_TYPE:"InitiationType",INTENT:"Intent",IS_CHAT_OPEN:"IsChatOpen",LANGUAGE:"Language",LOAD_LANGUAGE:"LoadLanguage",SUPPORTED_LANGUAGES:"SupportedLanguageGate",LOAD_IDENTIFIERS:"LoadIdentifiers",MODAL_BACKGROUND:"ModalBackground",PROACTIVE_MESSAGE_REF:"ProactiveMessageRef",PROACTIVE_MESSAGE_STATUS:"ProactiveMessageStatus",ON_LOAD_COMPLETE:"OnLoadComplete",REFERRER_URL:"ReferrerUrl",REGION_CODE:"RegionCode",SDK_LOADED:"SDKLoaded",SDK_LOAD_TIME:"SDKLoadTime",SETTINGS:"Settings",SOUND:"Sound",TRIGGER:"Trigger"},Ie="webSDK",pe="appleBusinessChat",Ae="phone",me="gbm",Ce="sms",Te="external",ve="proactive",ye=["customerid","issueid"],Oe=new RegExp('"('.concat(ye.join("|"),')":\\s*(\\d{16,})'),"gi"),be=new RegExp('("(?:'.concat(ye.join("|"),')":\\s*)"(\\d{16,})n"'),"gi"),Ne={parse:function(e,t){if("string"!=typeof e)return e;var n=e.replace(Oe,'"$1": "$2n"');return JSON.parse(n,(function(e,n){return ye.indexOf(e.toLowerCase())>=0&&"string"==typeof n&&/^\d{16,}n$/.test(n)&&(n=BigInt(n.slice(0,-1))),"function"==typeof t?t(e,n):n}))},stringify:function(e,t,n){var a=JSON.stringify(e,(function(e,n){return"bigint"==typeof n&&(n=ye.indexOf(e.toLowerCase())>=0?n.toString()+"n":n.toString()),"function"==typeof t?t(e,n):n}),n);return a&&a.replace(be,"$1$2")}},_e=function(){function t(e){i(this,t),this.storageKey="".concat(ne,"storage");try{var n=new Date;(this.storage=window[e]).setItem(n,n);var a=this.storage.getItem(n)!==n.toString();this.storage.removeItem(n),a&&(this.storage=!1)}catch(e){this.storage=!1}this.storage&&!this.storage.getItem(this.storageKey)&&this.storage.setItem(this.storageKey,Ne.stringify({}))}return s(t,[{key:"get",value:function(e){if(this.storage){var t=Ne.parse(this.storage.getItem(this.storageKey))||{};return"string"==typeof e?t[e]:t}return!1}},{key:"remove",value:function(e){if(!this.storage||!e)return!1;var t=this.get();delete t[e],this.storage.setItem(this.storageKey,Ne.stringify(t))}},{key:"set",value:function(t,n){if(!this.storage||!t)return!1;var i=Object.assign({},this.get(),"object"===e(t)?t:a({},t,n));this.storage.setItem(this.storageKey,Ne.stringify(i));var r=re.get(Se.IFRAME_REF);r&&r.setIFrameLocalStorage(t,n)}}]),t}(),Le=new _e("sessionStorage"),Me=new _e("localStorage"),De=Le&&"function"==typeof Le.get&&Le.get(ge.DEBUG_ENABLED),Pe=[].indexOf(window.location.hostname)>=0;function Re(e,t,n){if(De||Pe||n){var a=Array.prototype.slice.call(t||[]);a.unshift("Chat SDK:"),e.apply(console,a)}}e.Error=function(){Re(console.error,arguments,!0)},we.Warn=function(){Re(console.warn,arguments,!0)};var Be=we,Fe=[ge.COBROWSING_TIMESTAMP,ge.DEBUG_ENABLED,ge.IFRAME_COORDINATES,ge.PROACTIVE_MESSAGE_IMPRESSION,ge.SUPRESSING_FULLSCREEN_OPEN];function ke(){return J.indexOf(window.ASAPP.Host)>=0?window.ASAPP.Host:"https://".concat(z)}unction He(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!n.length)return e;var r=n.shift();if(Ue(e)&&Ue(r))for(var s in r)Ue(r[s])?(e[s]||Object.assign(e,a({},s,{})),He(e[s],r[s])):r[s]&&""!==r[s]&&Object.assign(e,a({},s,r[s]));return He.apply(void 0,[e].concat(n))}var Ge=function(e,t){if(!Ve(e))return Be.Error("on:",'"event type" is required and must be valid.',"Currently defined as:",e);var n=je();n&&n.addEventListener(e,t)},xe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.type||!Ve(e.type))return Be.Error("fire:",'"event type" is required and must be valid.',"Currently defined as:",e.type);e.detail||(e.detail={issueId:void 0,customerId:void 0,externalSenderId:void 0});var t=!1;e.type!==ae.INTEGRATION.ACTION.EVENTS.CHAT_SHOW&&e.type!==ae.INTEGRATION.ACTION.EVENTS.CHAT_HIDE||(t=!0);var n=new CustomEvent(e.type,{detail:e.detail,cancelable:t}),a=je();a&&a.dispatchEvent(n)},Ve=function(e){return!!Object.keys(ae.INTEGRATION.ACTION.EVENTS).some(()},je=function(){var e=re.get(Se.IFRAME_REF);return e&&e.$iframe},$e=n(808),qe=n.n($e);function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ye="PersistentId",ze="PersistentCreatedTime",Je={transientID:function(e){var t,n=e.generateID,i=e.generateTS;return a(t={},"TransientId",n()),a(t,"TransientCreatedTime",i()),t},persistentID:function(e){var t,n=e.generateID,i=e.generateTS,r=(Me&&Me.get())[ge.LOAD_IDENTIFIERS],s=(a(t={},Ye,r&&r[Ye]||n()),a(t,ze,r&&r[ze]||i()),t);return Me&&Me.set(ge.LOAD_IDENTIFIERS,s),s}};var Ze,Xe,Qe,et,tt,nt="FRAME_TITLE",at="NOTIFICATION_TITLE_SINGLE",it="NOTIFICATION_TITLE_MULTIPLE",rt="BADGE_OPEN",st="BADGE_CLOSE",ot="BADGE_UNREAD_INDICATOR",ct="BADGE_UNREAD_INDICATOR_NUMBER",dt="BLINK_TAB_INDICATOR",ut="CHAT_INSTEAD_HEADER_CONTACT_US",lt="CHAT_INSTEAD_HEADER_CHOOSE_OPTION",ht="CHAT_INSTEAD_HEADER_CLOSE_BUTTON",ft="CHAT_INSTEAD_PHONE_TITLE",Et="CHAT_INSTEAD_LOADING",gt="PROACTIVE_MESSAGE_MESSAGE",St="PROACTIVE_MESSAGE_DISMISS",It="PROACTIVE_MESSAGE_DECLINE",pt=(a(Ze={},nt,"Chat Window"),a(Ze,at,"New Message"),a(Ze,it,"{0} new messages"),a(Ze,rt,"Open chat"),a(Ze,st,"Minimize chat"),a(Ze,ot,"Unread messages"),a(Ze,ct,"{0} unread messages"),a(Ze,dt,"({0}) messages"),a(Ze,ut,"Contact Us"),a(Ze,lt,"Choose an option"),a(Ze,ht," Close Dialog"),a(Ze,ft,"Call: {0}"),a(Ze,Et,"Loading options"),a(Ze,gt,"MESSAGE"),a(Ze,St,"Dismiss message"),a(Ze,It,"No, thanks"),Ze),At=(a(Xe={},nt,"Ventana de chat"),a(Xe,at,"Nuevo mensaje"),a(Xe,it,"{0} mensajes nuevos"),a(Xe,rt,"Abrir chat"),a(Xe,st,"Minimizar chat"),a(Xe,ot,"Mensajes no leídos"),a(Xe,ct,"{0} mensajes no leídos"),a(Xe,dt,"({0}) mensajes"),a(Xe,ut,"Contáctenos"),a(Xe,lt,"Elija una opción"),a(Xe,ht,"Cerrar"),a(Xe,ft,"Llamar: {0}"),a(Xe,Et,"Cargando opciones"),a(Xe,gt,"MENSAJE"),a(Xe,St,"Ignorar mensaje"),a(Xe,It,"No, gracias"),Xe),mt=(a(Qe={},nt,"Fenêtre de Chat"),a(Qe,at,"Nouveau message"),a(Qe,it,"{0} nouveaux messages"),a(Qe,rt,"Ouvrir le chat"),a(Qe,st,"Réduire le chat"),a(Qe,ot,"Messages non lus"),a(Qe,ct,"{0} messages non lus"),a(Qe,dt,"({0}) messages"),a(Qe,ut,"Contactez-nous"),a(Qe,lt,"Choisissez une option"),a(Qe,ht,"Fermer le dialogue"),a(Qe,ft,"Appel : {0}"),a(Qe,Et,"Chargement des options"),a(Qe,gt,"MESSAGE"),a(Qe,St,"Ignorer le message"),a(Qe,It,"Non, merci"),Qe),Ct=n(588),Tt={supportedLanguages:(et={},a(et,"en",pt),a(et,"es",At),a(et,"fr",mt),et)},vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.loadLanguage,n=e.gatedLanguages,a=Object.keys(Tt.supportedLanguages),i=yt(a,n),r=Ot(t,i);return!r&&i.length>0?r=i[0]:r||(r="en"),Be("Load","resolveLanguage",{loadLanguage:t,gatedLanguages:n},"set",r),r},yt=function(e,t){return Array.isArray(e)&&Array.isArray(t)?e.fie,t)})):[]},Ot=function(e,t){if(e&&Array.isArray(t)){if(t.hasOwnProperty(e))return e;var n=bt(e).code;return t.hasOwnProperty(n)?n:t.===n}))}},bt=function(e){var t={};if("string"!=typeof e)return t;)}()}(e.toLowerCase().split("-"),2),a=n[0],i=n[1],r=a&&2===a.length,s=!i||2===i.length;return r&&s?{code:a,region:i}:t},Nt=de,_t=ue,Lt=le,Mt=he,Dt=fe,Pt=Object.freeze((a(tt={},Nt.ACTIVE,'<g><path d="M44 0H17a4 4 0 0 0-4 4v18a4 4 0 0 0 4 4h12l12 9v-9h3a4 4 0 0 0 4-4V4a4 4 0 0 0-4-4z"/><path d="M10 16H4a4 4 0 0 0-4 4v17a4 4 0 0 0 4 4v7l11-7h8a4 4 0 0 0 4-4v-8H14.8a4.8 4.8 0 0 1-4.8-4.8V16z"/></g>'),a(tt,Nt.INACTIVE,'<g><path d="M43 5v16h-7v4l-4-3-1.33-1H18V5h25zm1-5H17a4 4 0 0 0-4 4v18a4 4 0 0 0 4 4h12l12 9v-9h3a4 4 0 0 0 4-4V4a4 4 0 0 0-4-4z"></path><path d="M22 36h-8.46l-1.23.78L9 38.89V36H5V21h5v-5H4a4 4 0 0 0-4 4v17a4 4 0 0 0 4 4v7l11-7h8a4 4 0 0 0 4-4v-8h-5v7z"></path></g>'),a(tt,_t.ABC,'<path fill-rule="evenodd" clip-rule="evenodd" d="M24 40.964C37.2548 40.964 48 32.4655 48 21.982C48 11.4985 37.2548 3 24 3C10.7452 3 0 11.4985 0 21.982C0 28.3862 4.0098 34.0496 10.152 37.4874C10.1659 37.4952 10.218 37.5239 10.3082 37.5736C10.3878 37.6174 10.4441 37.6928 10.4628 37.7803C10.9912 40.2529 7.53478 42.4704 5.22463 43.95C12.8814 44.4221 16.7447 41.4195 17.8501 40.435C19.7245 40.8068 21.9798 40.964 24 40.964Z"/>'),a(tt,_t.CHAT,'<path fill-rule="evenodd" clip-rule="evenodd" d="M23.9999 1.52588e-05C10.752 1.52588e-05 -3.05176e-05 10.752 -3.05176e-05 24C-3.05176e-05 37.248 10.752 48 23.9999 48C37.248 48 48 37.248 48 24C48 10.752 37.248 1.52588e-05 23.9999 1.52588e-05ZM4.80014 24C4.80014 22.536 4.99214 21.096 5.30414 19.728L16.7761 31.2V33.6C16.7761 36.24 18.9361 38.4 21.5761 38.4V43.032C12.1441 41.832 4.80014 33.768 4.80014 24ZM33.576 33.6C35.736 33.6 37.512 35.016 38.136 36.96C41.256 33.552 43.2 28.992 43.2 24C43.2 15.96 38.208 9.04801 31.176 6.21601V7.20001C31.176 9.84001 29.016 12 26.376 12H21.5761V16.8C21.5761 18.12 20.4961 19.2 19.1761 19.2H14.3761V24H28.776C30.096 24 31.176 25.08 31.176 26.4V33.6H33.576Z" />'),a(tt,_t.PHONE,'<path d="M9.65333 20.7733C13.4933 28.32 19.68 34.48 27.2267 38.3467L33.0933 32.48C33.8133 31.76 34.88 31.52 35.8133 31.84C38.8 32.8267 42.0267 33.36 45.3333 33.36C46.8 33.36 48 34.56 48 36.0267V45.3333C48 46.8 46.8 48 45.3333 48C20.2933 48 0 27.7067 0 2.66667C0 1.2 1.2 0 2.66667 0H12C13.4667 0 14.6667 1.2 14.6667 2.66667C14.6667 6 15.2 9.2 16.1867 12.1867C16.48 13.12 16.2667 14.16 15.52 14.9067L9.65333 20.7733Z" />'),a(tt,_t.GBM,'<path fill-rule="evenodd" clip-rule="evenodd" d="M4.79998 0H43.2001C45.8399 0 47.9999 2.16 47.9999 4.80001V33.6C47.9999 36.2401 45.8399 38.4001 43.2001 38.4001H9.59999L0 48L0.0239907 4.80001C0.0239907 2.16 2.16 0 4.79998 0ZM9.59999 28.7999H38.4V24H9.59999V28.7999ZM38.4 21.6H9.59999V16.8H38.4V21.6ZM9.59999 14.4H38.4V9.59999H9.59999V14.4Z"/>'),a(tt,_t.SMS,'<path d="M14.3581 0L36.2582 0.0218172C38.6673 0.0218172 40.6383 1.96363 40.6383 4.36364V43.6363C40.6383 46.0364 38.6673 48 36.2582 48H14.3581C11.9491 48 10 46.0364 10 43.6363V4.36364C10 1.96363 11.9491 0 14.3581 0ZM14.3581 39.2728H36.2582V8.72728H14.3581V39.2728Z" />'),a(tt,Mt,'<path d="M48.17 5.87l-5.7-5.7-18.3 18.3L5.87.17l-5.7 5.7 18.3 18.3-18.3 18.3 5.7 5.7 18.3-18.3 18.3 18.3 5.7-5.7-18.3-18.3z" />'),a(tt,Dt,'<path d="M24.02 0l.708 4.013A20.36 20.36 0 0 0 24 4C12.954 4 4 12.954 4 24s8.954 20 20 20c8.565 0 15.872-5.384 18.723-12.951l3.997.705C43.496 41.204 34.542 48 24 48 10.745 48 0 37.255 0 24S10.745 0 24 0h.02z" />'),a(tt,Lt.CONVERSATION,'<g><path d="M48 5.57447C47.9946 4.62811 47.6163 3.72205 46.9471 3.05286C46.278 2.38368 45.3719 2.00536 44.4255 2L24 2C23.0537 2.00536 22.1476 2.38368 21.4784 3.05286C20.8092 3.72205 20.4309 4.62811 20.4255 5.57447V11.1915H23.4894V5.06383H44.9362V20.383H38.2979C37.9662 20.3815 37.6432 20.4891 37.3787 20.6894L31.6596 24.9787V21.9149C31.6543 21.5102 31.4912 21.1237 31.205 20.8375C30.9189 20.5514 30.5323 20.3883 30.1277 20.383H26.5532V23.4468H28.5957V28.0426C28.5957 28.327 28.675 28.6059 28.8245 28.8479C28.9741 29.0899 29.1881 29.2855 29.4426 29.4127C29.697 29.54 29.9819 29.5938 30.2652 29.5683C30.5486 29.5427 30.8192 29.4388 31.0468 29.2681L38.8085 23.4468H44.4255C45.3719 23.4414 46.278 23.0631 46.9471 22.3939C47.6163 21.7248 47.9946 20.8187 48 19.8723V5.57447Z" /><path d="M15.8297 14.2553C14.3148 14.2553 12.8339 14.7046 11.5743 15.5462C10.3147 16.3878 9.33295 17.5841 8.75322 18.9837C8.17348 20.3833 8.0218 21.9234 8.31735 23.4092C8.61289 24.895 9.3424 26.2598 10.4136 27.331C11.4848 28.4022 12.8496 29.1318 14.3354 29.4273C15.8212 29.7228 17.3613 29.5712 18.7609 28.9914C20.1605 28.4117 21.3568 27.4299 22.1984 26.1703C23.0401 24.9107 23.4893 23.4298 23.4893 21.9149C23.4893 19.8835 22.6823 17.9352 21.2459 16.4988C19.8094 15.0623 17.8612 14.2553 15.8297 14.2553ZM15.8297 26.5106C14.9208 26.5106 14.0323 26.2411 13.2765 25.7361C12.5207 25.2311 11.9317 24.5134 11.5838 23.6736C11.236 22.8339 11.145 21.9098 11.3223 21.0183C11.4996 20.1268 11.9373 19.3079 12.5801 18.6652C13.2228 18.0225 14.0417 17.5848 14.9332 17.4075C15.8246 17.2301 16.7487 17.3211 17.5885 17.669C18.4282 18.0168 19.146 18.6059 19.651 19.3616C20.156 20.1174 20.4255 21.0059 20.4255 21.9149C20.4255 22.5184 20.3066 23.116 20.0757 23.6736C19.8447 24.2312 19.5062 24.7378 19.0794 25.1646C18.6527 25.5913 18.146 25.9299 17.5885 26.1608C17.0309 26.3918 16.4333 26.5106 15.8297 26.5106V26.5106Z"/><path d="M0 45.9149H31.6596V44.383C31.6596 37.4587 25.1438 32.6383 15.8298 32.6383C6.51574 32.6383 0 37.4587 0 44.383V45.9149ZM3.41106 42.177C4.73872 38.0919 9.53872 35.7021 15.8298 35.7021C22.1209 35.7021 26.9209 38.1941 28.2485 42.177L28.4732 42.8511H3.18638L3.41106 42.177Z"/></g>'),tt));function Rt(e){var t=e.className,n=e.iconName,a=Pt[n];if(void 0===a)return Be("[Icon]","Icon not found",n),null;var i=["icon","icon_".concat(n),t].join(" ").trim();return'<svg class="'.concat(i,'"  aria-hidden="true" width="48" height="48" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">')+a+"</svg>"}var wt=function(){function t(e){i(this,t),this.proactiveMessage=e,this.triggerId=e&&e.triggerUuid,this.type=e&&e.type||W,this.dismissProactiveMessage=this.dismissProactiveMessage.bind(this),this.isValidProactiveMessage=this.isValidProactiveMessage.bind(this)}return s(t,[{key:"createCloseButton",value:function(){var e=this,t=document.createElement("button");return t.classList.add(ae.PROACTIVE_MESSAGE.CLASSNAME.CLOSE_BUTTON),t.setAttribute("title",(0,Ct.translate)(St)),t.innerHTML=Rt({iconName:he}),t.addEventListener("click",(function(){e.type===W&&re.set(Se.PROACTIVE_MESSAGE_STATUS,Y),e.dismissProactiveMessage()})),t}},{key:"createContainer",value:function(){var e=document.createElement("div");return e.id=ae.PROACTIVE_MESSAGE.ID.CONTAINER,e.classList.add(ae.PROACTIVE_MESSAGE.CLASSNAME.CONTAINER.DEFAULT),e.classList.add(ae.PROACTIVE_MESSAGE.CLASSNAME[re.get(Se.DISPLAY_SETTINGS).Align.toUpperCase()]),e}},{key:"createProactiveMessage",value:function(){var e;return this.type===q?(e=document.createElement("div")).classList.add(ae.PROACTIVE_MESSAGE.CLASSNAME.CONVERSATIONAL):((e=document.createElement("button")).classList.add(ae.PROACTIVE_MESSAGE.CLASSNAME.DIRECT),e.addEventListener("click",(function(){re.set(Se.PROACTIVE_MESSAGE_STATUS,K),re.set(Se.INITIATION_TYPE,ve),xe({type:ae.INTEGRATION.ACTION.EVENTS.CHAT_SHOW})}))),e.id="".concat(ae.PROACTIVE_MESSAGE.ID.PREFIX,"-").concat(this.triggerId),e.classList.add(ae.PROACTIVE_MESSAGE.CLASSNAME.DEFAULT),e.innerHTML=Rt({className:ae.PROACTIVE_MESSAGE.CLASSNAME.ICON,iconName:le.CONVERSATION}),e.appendChild(this.createTitle()),e.appendChild(this.createContent()),e}},{key:"createTitle",value:function(){var e=document.createElement("span");return e.classList.add(ae.PROACTIVE_MESSAGE.CLASSNAME.TITLE),e.textContent=(0,Ct.translate)(gt),e}},{key:"createActionButtons",value:function(){var e=this,t=document.createElement("div"),n=document.createElement("button"),a=document.createElement("button");return t.classList.add(ae.PROACTIVE_MESSAGE.CLASSNAME.BUTTON.CONTAINER),n.classList.add(ae.PROACTIVE_MESSAGE.CLASSNAME.BUTTON.DEFAULT),n.textContent=this.proactiveMessage.button.title,n.addEventListener("click",(function(){re.set(Se.PROACTIVE_MESSAGE_STATUS,K),re.set(Se.INITIATION_TYPE,ve),xe({type:ae.INTEGRATION.ACTION.EVENTS.CHAT_SHOW})})),t.appendChild(n),a.classList.add(ae.PROACTIVE_MESSAGE.CLASSNAME.BUTTON.DEFAULT),a.textContent=(0,Ct.translate)(It),a.addEventListener("clge()})),t.appendChild(a),t}},{key:"createContent",value:function(){var e,t=document.createElement("div"),n=document.createElement("p");return n.classList.add(ae.PROACTIVE_MESSAGE.CLASSNAME.TEXT),this.type===q?(n.textContent=this.proactiveMessage.text,e=this.createActionButtons()):n.textContent=this.proactiveMessage.text,t.appendChild(n),e&&t.appendChild(e),t}},{key:"isValidProactiveMessage",value:function(){var t=this.proactiveMessage,n=t||{},a=n.button,i=n.text,r=n.type;if("object"!==e(t))return!1;switch(r){case q:return!!a&&!!i;case W:return!!i;default:return Be("[ProactiveMessage]","Unknown message type"),!1}}},{key:"dismissProactiveMessage",value:function(){var e;Le.set((a(e={},ge.IS_PROACTIVE_MESSAGE_DISPLAYED,!1),a(e,ge.IS_ACTIVE_SESSION,!0),e)),this.$container&&(this.$container.classList.add(ae.PROACTIVE_MESSAGE.CLASSNAME.CONTAINER.HIDDEN),setTimeout(this.removeContent.bind(this),oe))}},{key:"removeContent",value:function(){for(;this.$container&&this.$container.firstChild;)this.$container.removeChild(this.$container.firstChild)}},{key:"unmount",value:function(){this.$container&&document.body.removeChild(this.$container)}},{key:"render",value:function(){this.isValidProactiveMessage()&&(this.type===W&&re.set(Se.PROACTIVE_MESSAGE_STATUS,K),this.$container=this.createContainer(),this.$container.appendChild(this.createCloseButton()),this.$container.appendChild(this.createProactiveMessage()),document.body.appendChild(this.$container))}}]),t}(),Bt=(n(846),function(){function e(){i(this,e),this.$badge=document.createElement("button"),this.$unreadMessages=document.createElement("span"),this.unreadMessageCount=0,this.displaySettings=re.get(Se.DISPLAY_SETTINGS)||{},this.updateUnreadMessages=this.updateUnreadMessages.bind(this),this.setBadgeOptions()}return s(e,[{key:"addEventListeners",value:function(){var e=this,t=this.$badge;t.addEventListener("click",(function(){if(re.get(Se.IS_CHAT_OPEN))xe({type:ae.INTEGRATION.ACTION.EVENTS.CHAT_HIDE});else{if(re.set(Se.INITIATION_TYPE,"default"),e.displaySettings.BadgeType===ce.OMNI)return $n(e.channel);xe({type:ae.INTEGRATION.ACTION.EVENTS.CHAT_SHOW})}window.setTimeout((function(){t.blur()}),oe)})),window.setTimeout((function(){Ge(ae.INTEGRATION.ACTION.EVENTS.MESSAGE_RECEes()}))}),10)}},{key:"showBadge",value:function(){this.displaySettings.BadgeType===ce.OMNI&&(this.channel=jn()),this.$badge.classList.remove(ae.BADGE.CLASSNAME.HIDDEN)}},{key:"setBadgeOptions",value:function(){var e=this.displaySettings,t=e.BadgeColor,n=e.BadgeText,a=e.BadgeType,i=e.PrimaryColor,r=e.DarkColor;n&&a===ce.TRAY&&(this.$text=document.createElement("span"),this.$text.classList.add(ae.BADGE.TEXT.CLASSNAME),this.$text.textContent=n),this.appendStyle({BadgeColor:t,PrimaryColor:i,DarkColor:r})}},{key:"appendStyle",value:function(e){var t=e.BadgeColor,n=e.PrimaryColor,a=e.DarkColor,i=[];if("string"==typeof t){var r=ae.BADGE.CLASSNAME.DEFAULT;i.push("\n            .".concat(r,"{background-color:").concat(t,";}\n            .").concat(r,":focus,\n            .").concat(r,":hover,\n            .").concat(r,":active{background-color:#fff;color:").concat(t,";}\n            .").concat(r,":focus .icon,\n            .").concat(r,":hover .icon,\n            .").concat(r,":active .icon{fill:").concat(t,";}\n            "))}if("string"==typeof n){var s=ae.PROACTIVE_MESSAGE.CLASSNAME.ICON,o=ae.PROACTIVE_MESSAGE.CLASSNAME.BUTTON.DEFAULT;i.push("\n            .".concat(s,"{fill:").concat(n,";}\n            .").concat(o,"{border-color:").concat(n,"; color:").concat(n,"}\n            .").concat(o,":focus,\n            .").concat(o,":hover,\n            .").concat(o,":active{background-color:").concat(n,";color:#fff;}\n            "))}if("string"==typeof a){var c=ae.PROACTIVE_MESSAGE.CLASSNAME.TEXT,d=ae.PROACTIVE_MESSAGE.CLASSNAME.TITLE;i.push("\n            .".concat(c,"{color:").concat(a,";}\n            .").concat(d,"{color:").concat(a,";}\n            "))}if(i.length){var u=document.createElement("style");u.textContent=i.join(""),document.head.appendChild(u)}}},{key:"renderUnreadMessageIndicator",value:function(){Fn(this.$unreadMessages,{"aria-hidden":!0,role:"status",class:ae.BADGE.UNREAD_INDICATOR.CLASSNAME,title:(0,Ct.translate)(ot)}),this.$badge.appendChild(this.$unreadMessages),this.unreadMessageCount=parseInt(Le.get(ge.UNREAD_MESSAGES)||"0",10),this.unreadMessageCount>0&&this.updateUnreadMessages(!0)}},{key:"render",value:function(){var e=this.$badge,t=this.displaySettings,n=t.Align,a=t.BadgeType;e.innerHTML=Rt({iconName:de.INACTIVE})+Rt({iconName:de.ACTIVE}),this.$text&&e.appendChild(this.$text),Fn(e,{"aria-controls":ae.IFRAME.ID,class:[re.get(Se.COMPANY_MARKER),ae.BADGE.CLASSNAME.DEFAULT,ae.BADGE.CLASSNAME.HIDDEN,ae.BADGE.CLASSNAME.CLOSED,ae.BADGE.CLASSNAME[n.toUpperCase()],"".concat(ae.BADGE.CLASSNAME.DEFAULT,"_").concat(a)],"data-target":ae.BADGE.ID,id:ae.BADGE.ID,title:(0,Ct.translate)(rt),type:"button"}),this.renderUnreadMessageIndicator(),document.body.appendChild(e),this.addEventListeners()}},{key:"resetUnreadMessages",value:function(){this.unreadMessageCount=0,Le.set(ge.UNREAD_MESSAGES,this.unreadMessageCount),this.$unreadMessages.classList.remove(ae.BADGE.UNREAD_INDICATOR.VISIBLE),this.$unreadMessages.innerText="",this.$unreadMessages.setAttribute("aria-hidden",!0),this.$unreadMessages.setAttribute("aria-label","")}},{key:"updateOpenStatus",value:function(){var e=this.$badge;re.get(Se.IS_CHAT_OPEN)?(e.classList.add(ae.BADGE.CLASSNAME.OPENED),e.classList.remove(ae.BADGE.CLASSNAME.CLOSED),e.classList.remove(ae.BADGE.CLASSNAME.HIDDEN),Fn(e,{title:(0,Ct.translate)(st)}),this.resetUnreadMessages()):(e.classList.add(ae.BADGE.CLASSNAME.CLOSED),e.classList.remove(ae.BADGE.CLASSNAME.OPENED),Fn(e,{title:(0,Ct.translate)(rt)}))}},{key:"unmount",dge)}},{key:"updateUnreadMessages",value:function(e){if(!0===e||!re.get(Se.IS_CHAT_OPEN)){var t,n=this.$unreadMessages;"boolean"!=typeof e&&this.unreadMessageCount++,Le.set(ge.UNREAD_MESSAGES,this.unreadMessageCount),this.unreadMessageCount<=5?t=this.unreadMessageCount:this.unreadMessageCount>5&&(t="".concat(5,"+")),(this.unreadMessageCount<=6||!0===e)&&(n.textContent=t,n.setAttribute("aria-hidden",!1),n.setAttribute("aria-label",(0,Ct.translate)(ct,t)),n.classList.add(ae.BADGE.UNREAD_INDICATOR.VISIBLE))}}}]),e}()),Ft=function(){function e(){i(this,e),this.nextSubId=1,this.subsBySignal={},this.signalBySubId={}}return s(e,[{key:"on",value:function(e,t){var n=this.nextSubId;return this.nextSubId+=1,this.subsBySignal[e]||(this.subsBySignal[e]={}),this.subsBySignal[e][n]=t,this.signalBySubId[n]=e,n}},{key:"off",value:function(e,t){for(var n=this.subsBySignal[e]||{},a=Object.keys(n),i=0;i<a.length;i++){var r=a[i];if(t===n[r]){delete this.subsBySignal[e][r],delete this.signalBySubId[r];break}}}},{key:"once",)}))}},{key:"fire",value:function(e){for(var t=this.subsBySignal[e],n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];for(var r in t)t[r].apply(this,a)}}]),e}(),kt=function(){function e(t,n,a){if(i(this,e),/\//.test(n)){var r=n.split("/");n="".concat(r[0],"//").concat(r[2])}this.name=a||this.constructor.name,this.target=t,this.targetOrigin=n,this._pubsub=new Ft,this._isListening=!1,this.handleMessageEvent=this.handleMessageEvent.bind(this),this.startListening()}return s(e,[{key:"handleMessageEvent",value:function(e){if(e&&e.data&&e.data.type){var t=e.data.type,n=e.data.data||{};this.targetOrigin&&e.origin!==this.targetOrigin?Be("MessageBus.js","".concat(this.name,": Ignoring message event from origin '").concat(e.origin,"' because it does not match targetOrigin '").concat(this.targetOrigin,"'.\n  Event: { type: ").concat(t,", message:"),n,"}"):this._pubsub.fire(t,n,e.origin)}}},{key:"startListening",nt))}},{key:"stopListening",nt))}},{key:"on",value:function(e,t){this._pubsub.on(e,t)}},{key:"once",value:function(e,t){this._pubsub.once(e,t)}},{key:"off",e,t)}},{key:"post",value:function(e,t){this.target&&"function"==typeof this.target.postMessage&&this.targetOrigin?this.target.postMessage({type:e,data:t},this.targetOrigin):Be("MessageBus.js","".concat(this.name,": Unable to post message with invalid target or targetOrigin: target="),this.target,", targetOrigin=",this.targetOrigin)}}]),e}(),Ut=function(){function e(t){i(this,e),this.$draggableEl=t,this.frameTop=0,this.frameLeft=0,this.getNextPos=this.getNextPos.bind(this),this.handleDragEvent=this.handleDragEvent.bind(this),this.handleDragStart=this.handleDragStart.bind(this),this.handleDragEnd=this.handleDragEnd.bind(this),this.handleFrameMouseMove=this.handleFrameMouseMove.bind(this)}return s(e,[{key:"getNextPos",value:function(e,t){var n=this.frameLeft+e,a=this.frameTop+t;return window.innerWidth-n<this.width&&(n=window.innerWidth-this.width),window.innerHeight-a<this.height&&(a=window.innerHeight-this.height),{x:Math.max(0,n),y:Math.max(0,a)}}},{key:"handleDragEvent",value:function(e){switch(e.type){case"Dragging start":this.handleDragStart();break;case"Dragging move":this.handleFrameMouseMove(e.offsetX,e.offsetY);break;case"Dragging end":this.handleDragEnd()}}},{key:"handleDragStart",value:function(){var e=this.$draggableEl,t=e.offsetTop,n=e.offsetLeft,a=e.offsetWidth,i=e.offsetHeight;this.frameTop=t,this.frameLeft=n,this.width=a,this.height=i,document.addEventListener("mouseup",this.handleDragEnd)}},{key:"handleDragEnd",value:function(){Le.set(ge.IFRAME_COORDINATES,{x:this.frameLeft,y:this.frameTop}),document.removeEventListener("mouseup",this.handleDragEnd)}},{key:"handleFrameMouseMove",value:function(e,t){var n=this.getNextPos(e,t);this.frameTop=n.y,this.frameLeft=n.x,this.$draggableEl.style.top=n.y+"px",this.$draggableEl.style.left=n.x+"px"}}]),e}(),Ht=ae.MODAL_BACKGROUND.CLASSNAME;function Gt(){if(!re.get(Se.MODAL_BACKGROUND)){var e=document.createElement("div");e.classList.add(Ht.DEFAULT),e.classList.add(Ht.OPENED),document.body.appendChild(e),re.set(Se.MODAL_BACKGROUND,e)}}function xt(){var e=re.get(Se.MODAL_BACKGROUND);e&&(e.classList.remove(Ht.OPENED),e.classList.add(Ht.CLOSED),setTimeout((function(){document.body.removeChild(e),re.set(Se.MODAL_BACKGROUND,null)}),oe))}var Vt="5)}"only screen and (max-width: ".concat(Vt,") and (orientation: portrait)")," only screen and (max-width: ".concat("768px",") and (max-height: ").concat(Vt,") and (orientation: landscape)"),"only screen and (max-height: ".concat(Vt,")"),"only screen and (min-width:  ".concat("992px",")");vn),a}(Wt(Eru)}var Zt={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Xt=/^#[a-fA-F0-9]{6}$/,Qt=/^#[a-fA-F0-9]{8}$/,en=/^#[a-fA-F0-9]{3}$/,tn=/^#[a-fA-F0-9]{4}$/,nn=/^rgb\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*\)$/i,an=/^rgb(?:a)?\(\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,)?\s*(\d{1,3})\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i,rn=/^hsl\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,sn=/^hsl(?:a)?\(\s*(\d{0,3}[.]?[0-9]+(?:deg)?)\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,)?\s*(\d{1,3}[.]?[0-9]?)%\s*(?:,|\/)\s*([-+]?\d*[.]?\d+[%]?)\s*\)$/i;v(6)}function un(e,t,n,a){if("string"==typeof e&&"number"==typeof t){t(5)}(e);return"rgba("+i.red+","+i.green+","+i.blue+","+t+")"}if("number"==typeof e&&"number"==typeof t&&"number"==typeof n&&"number"==typeof a)return a>=1?dn(e,t,n):"rgba("+e+","+t+","+n+","+a+")";if("object"==typeof e&&void 0===t&&void 0===n&&void 0===a)return e.alpha>=1?dn(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")";throw new Kt(7)}function ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ln(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fn,En={colors:{background:"#fff",black:"#000",error:"#c30019",onBackground:"#000",onPrimary:"#fff",primary:"#0078d2",success:"#008266",warning:"#faaf00",white:"#fff"}},gn=function(e){var t=e.onBackground;return{gray85:un(t,.85),gray60:un(t,.6),gray50:un(t,.5),gray25:un(t,.25),gray12:un(t,.12),gray5:un(t,.05)}},Sn=function(e){var t=e.buttons,n=void 0===t?{}:t,a=e.primary,i=e.onPrimary,r=e.onBackground;return{primary:hn({background:a,text:i},n.primary),secondary:hn({text:r,border:a},n.secondary),textPrimary:hn({text:a},n.textPrimary)}},In=function(e){var t=e||{},n=t.primary;return{quickReplyButtonPrimary:n,quickReplyButtonOnPrimary:t.onPrimary,newQuestionButtonPrimary:n,borderColor:un(t.onBackground,.12)}},pn=function(){var e,t,n,a,i,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=r[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default"]||r.default,o=He(En,s);return hn(hn({},o),{},{colors:hn(hn(hn(hn(hn({},(e=o.colors,t=e||{},n=t.primary,a=t.onPrimary,i=t.onBackground,{customerMessageBackground:n,customerMessageText:a,repMessageBackground:un(i,.12),repMessageText:i})),gn(o.colors)),In(o.colors)),o.colors),{},{buttons:Sn(o.colors)})})},An=["","moz","MS","o","webkit"],mn="".concat(te,"-iframe-status"),Cn="openStatus",Tn="isLoggingIn",vn="IFrame",yn=(a(fn={},ge.IS_LOGGING_IN,!0),a(fn,ge.IS_OPEN,!0),fn),On=function(){function t(){var e,n,a,r,s,o,c;i(this,t),this.$iframe=document.createElement("div"),this.$frameEl=document.createElement("iframe"),this.queuedMessages=[],this.hasReceivedIframeLoaded=!1,this.iframeLoadCheckInterval=null,this.browserNotificationCount=0,this.originalTitle=parent.document.title,this.$frameEl.addEventListener("load",this.setIFrameMessageBus.bind(this)),this.handleAnimationToggle=this.handleAnimationToggle.bind(this),this.handleNotificationPermissionRequest=this.handleNotificationPermissionRequest.bind(this),this.handleIFrameLoaded=this.handleIFrameLoaded.bind(this),this.handleRequestContext=this.handleRequestContext.bind(this),this.handleRequestUserLogin=this.handleRequestUserLogin.bind(this),this.hide=this.hide.bind(this),this.setScreenSizeClassnames=(e=this.setScreenSizeClassnames,99,s=null,ull)},function(){var t=Date.now(),i=99-(t-o);return n=this,a=arguments,i<=0||i>99?(s&&(clearTimeout(s),s=null),o=t,r=e.apply(n,a),s||(n=a=null)):s||(s=setTimeout(c,i)),r}).bind(this),this.showChat=this.showChat.bind(this),this.showSMSForm=this.showSMSForm.bind(this),this.displayIFrame=this.displayIFrame.bind(this),this.requestProactiveMessage=this.requestProactiveMessage.bind(this),this.getIFrameStatus=this.getIFrameStatus.bind(this),this.setIFrameStatus=this.setIFrameStatus.bind(this),this.updateHostLocation=this.updateHostLocation.bind(this),this.requestCobrowsingUserId=this.requestCobrowsingUserId.bind(this),this.handleCobrowsingLoad=this.handleCobrowsingLoad.bind(this),this.handleDockChat=this.handleDockChat.bind(this),this.resetPosition=this.resetPosition.bind(this),this.setIFrameLocalStorage=this.setIFrameLocalStorage.bind(this),this.pushBrowserNotification=this.pushBrowserNotification.bind(this),this.removeBrowserNotification=this.removeBrowserNotification.bind(this),this.startIframeLoadCheckPoll=this.startIframeLoadCheckPoll.bind(this),this.draggable=new Ut(this.$iframe)}return s(t,[{key:"componentDidMount",tle)}},{key:"setIFrameMessageBus",value:function(){var e=this;this.messageBus=new kt(this.$frameEl.contentWindow,ke(),"IFrameMessageBus"),this.queuedMessages.length&&(this.queuedMessages.forn,a)})),this.queuedMessages=[]),this.addMessageBusListeners(),this.startIframeLoadCheckPoll()}},{key:"startIframeLoadCheckPoll",value:function(){var e=this;this.hasReceivedIframeLoaded||(this.iframeLoadCheckInterval=setInterval((function(){e.messageBus&&!e.hasReceivedIframeLoaded&&(Be(vn,"IframeLoadCheckPoll: checking for load..."),e.postMessage("Has iFrame Loaded",{}))}),500))}},{key:"addEventListeners",value:function(){var e=this,t=this.$iframe;window.addEventListener("resize",this.setScreenSizeClassnames),window.addEventListener("hashchange",this.updateHostLocation),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState&&e.notification&&e.removeBrowserNotification()})),t.addEventListener(ae.INTEGRATION.ACTION.EVENTS.CHAT_SHOW,this.showChat),t.addEventListener(ae.INTEGRATION.ACTION.EVENTS.CHAT_HIDE,this.hide),An.forEach((function(n){t.addEventListener("".concat(n,"AnimationEnd"),e.handleAnimationToggle,!1),t.addEventListener("".concat(n,"AnimationStart"),e.handleAnimationToggle,!1),t.addEventListener("".concat(n,"TransitionEnd"),e.handleAnimationToggle,!1),t.addEventListener("".concat(n,"TransitionStart"),e.handleAnimationToggle,!1)}))}},{key:"addMessageBusListeners",value:function(){this.messageBus?(this.messageBus.on("Hide Chat",(function(){xe({type:ae.INTEGRATION.ACTION.EVENTS.CHAT_HIDE})})),this.messageBus.on("Request Context",this.handleRequestContext),this.messageBus.on("Request Login",this.handleRequestUserLogin),this.messageBus.on("Redirect Link Action",Rn),this.messageBus.on("iFrame Loaded",this.handleIFrameLoaded),this.messageBus.on("Request Cobrowsing UserId",this.requestCobrowsingUserId),this.messageBus.on("Show Proactive Message",Bn),this.messageBus.on(f,xe),this.messageBus.on("Set Cobrowsing Timestamp",(function(e){Le.set(ge.COBROWSING_TIMESTAMP,e.timestamp)})),this.messageBus.on("Set isLiveChat)})),this.messageBus.on("Initiate Cobrowsing",this.handleCobrowsingLoad),this.messageBus.on("Drag event",this.draggable.handleDragEvent),this.messageBus.on("Toggle Chat Instead",this.toggleChatInstead),this.messageBus.on("Dock chat",this.handleDockChat),this.messageBus.on("Request Notification Permission",this.handleNotificationPermissionRequest),this.messageBus.on("Push Browser Notification",this.pushBrowserNotification)):Be(vn,"addMessageBusListeners()","Missing messageBus")}},{key:"postMessage",:t})}},{key:"requestProactiveMessage",value:function(){var e=Le.get(ge.PROACTIVE_MESSAGE_IMPRESSION),t=re.get(Se.PROACTIVE_MESSAGE_REF);this.postMessage("Request Proactive Message",{UnauthedImpression:e,ActiveTriggerId:t&&t.triggerId})}},{key:"buildIFrameSRC",value:function(){var e="".concat(location.protocol,"//").concat(location.host).concat(location.pathname),t=["APIHostname=".concat(encodeURIComponent(re.get(Se.API_HOSTNAME))),"CompanyMarker=".concat(encodeURIComponent(re.get(Se.COMPANY_MARKER))),"Origin=".concat(encodeURIComponent(e)),"RegionCode=".concat(encodeURIComponent(re.get(Se.REGION_CODE))),"Language=".concat(encodeURIComponent(re.get(Se.LANGUAGE)))].join("&");return[ke(),Pn(),"/chat-sdk-iframe.html","?",t].join("")}},{key:"handleAnimationToggle",value:function(e){var t=/end/i.test(e.type)&&this.$iframe.classList.contains(ae.IFRAME.CLASSNAME.CLOSED)?"add":"remove";this.$iframe.classList[t](ae.IFRAME.CLASSNAME.CLOSED_FINISHED)}},{key:"handleDockChat",value:function(e){var t=e.isDocked;if(this.resetPosition(),re.get(Se.DISPLAY_SETTINGS).FrameStyle===Z){var n=document.querySelector("html");t?(this.$iframe.classList.add(ae.IFRAME.CLASSNAME.SIDEBAR),n.classList.add(ae.HOSTHTML.CLASSNAME.CHAT_SIDEBAR)):(this.$iframe.classList.remove(ae.IFRAME.CLASSNAME.SIDEBAR),n.classList.remove(ae.HOSTHTML.CLASSNAME.CHAT_SIDEBAR))}}},{key:"resetPosition",value:function(){Le.remove(ge.IFRAME_COORDINATES),this.$iframe.style.right="",this.$iframe.style.top="",this.$iframe.style.left="",this.$iframe.style.bottom=""}},{key:"handleIFrameLoaded",value:function(e){this.hasReceivedIframeLoaded=!0,clearInterval(this.iframeLoadCheckInterval),Le.set(e);var t=re.get(Se.BADGE_REF),n=re.get(Se.DISPLAY_SETTINGS),a=n.HideBadgeOnLoad,i=n.FrameDraggable;t&&!a&&t.showBadge(),this.sendInitialData(),this.requestProactiveMessage(),function(e){var t=re.get(Se.ON_LOAD_COMPLETE);if("function"==typeof t)try{t(e)}catch(t){Be.Warn("WARNING: Could not call the provided onLoadComplete handler",e?"":"The Chat SDK is not configured to display on this page. Check the first argument of your provided onLoadComplete callback to determine whether or not to run your custom action")}}(re.get(Se.TRIGGER));var r=Le.get()||{},s=r[ge.COBROWSING_TIMESTAMP],o=r[ge.IS_ACTIVE_SESSION],c=r[ge.IS_LOGGING_IN],d=r[ge.IS_MOBILE],u=r[ge.IS_OPEN],l=r[ge.SUPRESSING_FULLSCREEN_OPEN],h=r[ge.IFRAME_COORDINATES];if(void 0===o&&Le.set(ge.IS_ACTIVE_SESSION,!1),s&&function(e,t){if(!e)return null;t=t?t.toLowerCase():"seconds";var n=Date.now();switch(t){case"seconds":default:return Math.ceil((n-e)/1e3);case"minutes":return Math.ceil((n-e)/6e4);case"hours":return Math.ceil((n-e)/36e5);case"days":return Math.ceil((n-e)/864e5)}}(s,"hours")<5&&this.handleCobrowsingLoad(),i&&h&&!d&&(this.$iframe.style.top=h.y+"px",this.$iframe.style.left=h.x+"px"),u||l){if(c){if(!re.get(Se.CUSTOMER_ID))return;this.setIFrameStatus(Tn,!1),Le.remove(ge.IS_LOGGING_IN),Le.remove(ge.SUPRESSING_FULLSCREEN_OPEN)}else if(d)return this.setIFrameStatus(Cn,!1),void Le.set(ge.IS_OPEN,!1);re.set(Se.INITIATION_TYPE,Te),xe({type:ae.INTEGRATION.ACTION.EVENTS.CHAT_SHOW})}}},{key:"handleRequestContext",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.ASAPP&&"function"==typeof window.ASAPP.ContextProvider?(Be(vn,"Calling ContextProvider()","refreshToken:",!!n.needsRefresh),window.ASAPP.ContextProvider((function(n){if("object"===e(n)&&null!==n)for(var a in n)ea(a,n[a]);t.postMessage(S,Qn())}),n.needsRefresh)):(Be(vn,"Missing ContextProvider"),this.postMessage(S,Qn()))}},{key:"handleRequestUserLogin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};window.ASAPP&&"function"==typeof window.ASAPP.UserLoginHandler?(this.setIFrameStatus(Tn,!0),Le.set(ge.IS_LOGGING_IN,!0),Le.get(ge.IS_FULLSCREEN)&&(Le.set(ge.SUPRESSING_FULLSCREEN_OPEN,!0),xe({type:ae.INTEGRATION.ACTION.EVENTS.CHAT_HIDE})),window.ASAPP.UserLoginHandler(e)):Be(vn,"Missing UserLoginHandler.")}},{key:"setScreenSizeClassnames",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(re.get(Se.IS_CHAT_OPEN)){var n=this.$iframe,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.document.documentElement.clientWidth;return{large:e>=Q.TABLET_LANDSCAPE,medium:e>Q.MOBILE&&e<Q.TABLET_LANDSCAPE,small:e<=Q.MOBILE}}(),r=[{label:ae.IFRAME.CLASSNAME.IS_FULLSCREEN,add:i.small},{label:ae.IFRAME.CLASSNAME.IS_MOBILE,add:i.medium||i.small}];r.forEach((function(e){n.classList[e.add?"add":"remove"](e.label)})),i.small?document.querySelector("html").classList.add(ae.HOSTHTML.CLASSNAME.CHAT_FULLSCEEN):document.querySelector("html").classList.remove(ae.HOSTHTML.CLASSNAME.CHAT_FULLSCEEN),Le.set((a(e={},ge.IS_FULLSCREEN,i.small),a(e,ge.IS_MOBILE,i.small||i.medium),e)),this.postMessage("Set Screen Size",{currentScreenSize:i,mobileClassnames:r,shouldDock:"resize"===t.type||!Le.get(ge.IFRAME_COORDINATES)})}}},{key:"setIFrameLocalStorage",value:function(t,n){var i={},r=!1;"object"===e(t)?Object.keys(t).for=!0)})):yn[t]&&(i=a({},t,n),r=!0),r&&this.postMessage("Set Host Settings",i)}},{key:"hide",value:function(){var e=this.$iframe,t=re.get(Se.BADGE_REF);re.set(Se.IS_CHAT_OPEN,!1),this.setIFrameStatus(Cn,!1),Le.set(ge.IS_OPEN,!1),this.setScreenSizeClassnames(),document.body.removeEventListener("touchmove",wn),document.querySelector("html").classList.remove(ae.HOSTHTML.CLASSNAME.CHAT_OPEN),e.classList.remove(ae.IFRAME.CLASSNAME.OPENED),e.classList.add(ae.IFRAME.CLASSNAME.CLOSED),e.classList.contains(ae.IFRAME.CLASSNAME.SMS_FORM)&&setTimORM)}),oe),t&&(t.updateOpenStatus(),t.$badge.focus())}},{key:"toggleChatInstead",value:function(e){var t=e.showChatInstead,n=re.get(Se.CHAT_INSTEAD_REF);n?t?n.show():n.hide():xt()}},{key:"showSMSForm",value:function(e){Gt(),this.displayIFrame(),this.$iframe.classList.add(ae.IFRAME.CLASSNAME.SMS_FORM),this.postMessage("Show SMS Form",e)}},{key:"showChat",value:function(){var e=Le.get(ge.IS_OPEN);re.set(Se.IS_CHAT_OPEN,!0),this.setIFrameStatus(Cn,!0),Le.set(ge.IS_OPEN,!0),Le.set(ge.IS_ACTIVE_SESSION,!0),this.displayIFrame();var t=re.get(Se.PROACTIVE_MESSAGE_REF),n=re.get(Se.BADGE_REF);this.postMessage("Show Chat",{proactiveMessage:t&&t.proactiveMessage||null,proactiveMessageStatus:re.get(Se.PROACTIVE_MESSAGE_STATUS),initiationType:re.get(Se.INITIATION_TYPE),isAutoOpen:e}),t&&(t.dismissProactiveMessage(),re.set(Se.PROACTIVE_MESSAGE_REF,null),re.set(Se.PROACTIVE_MESSAGE_STATUS,null)),n&&n.updateOpenStatus()}},{key:"displayIFrame",value:function(){var e=this,t=document.querySelector("html");this.setScreenSizeClassnames(),document.body.addEventListener("touchmove",wn),t.classList.add(ae.HOSTHTML.CLASSNAME.CHAT_OPEN),re.get(Se.DISPLAY_SETTINGS).FrameStyle!==Z||Le.get(ge.IFRAME_COORDINATES)||(t.classList.add(ae.HOSTHTML.CLASSNAME.CHAT_SIDEBAR),this.$iframe.classList.add(ae.IFRAME.CLASSNAME.SIDEBAR)),this.$iframe.classList.remove(ae.IFRAME.CLASSNAME.CLOSED),this.$iframe.classList.remove(ae.IFRAME.CLASSNAME.CLOSED_FINISHED),window.setTimeout((function(){e.$iframe.style.height="",e.$iframe.classList.add(ae.IFRAME.CLASSNAME.OPENED)}),20)}},{key:"render",value:function(){var e=this.$iframe,t=this.$frameEl,n=re.get(Se.DISPLAY_SETTINGS),a=n.Align.toUpperCase();e.style.height=0,Fn(e,{"aria-label":ae.FRAME_EL.ID,class:[ae.IFRAME.CLASSNAME.DEFAULT,ae.IFRAME.CLASSNAME.CLOSED,ae.IFRAME.CLASSNAME.CLOSED_FINISHED,ae.IFRAME.CLASSNAME[a],"".concat(ae.IFRAME.CLASSNAME.DEFAULT,"_").concat(n.BadgeType)],"data-target":ae.IFRAME.ID,id:ae.IFRAME.ID}),document.querySelector("html").classList.add(ae.HOSTHTML.CLASSNAME[a]),Fn(t,{class:ae.FRAME_EL.CLASSNAME.DEFAULT,id:ae.FRAME_EL.ID,title:(0,Ct.translate)(nt)}),t.frameBorder=0,t.allowTransparency="true",t.src=this.buildIFrameSRC(),e.appendChild(t),document.body.appendChild(e),this.addEventListeners()}},{key:"sendInitialData",value:function(){var e=re.get(Se.SETTINGS)||{},t=re.get(Se.DISPLAY_SETTINGS)||{};this.postMessage("Send Initial Data",{apiHostname:re.get(Se.API_HOSTNAME),appId:re.get(Se.COMPANY_MARKER),customerId:re.get(Se.CUSTOMER_ID),deviceInfo:re.get(Se.DEVICE_INFO),displaySettings:t,intent:re.get(Se.INTENT),loadIdentifiers:re.get(Se.LOAD_IDENTIFIERS),regionCode:re.get(Se.REGION_CODE),language:re.get(Se.LANGUAGE),sound:re.get(Se.SOUND),host:{sdkLoadTime:re.get(Se.SDK_LOAD_TIME),referrerUrl:re.get(Se.REFERRER_URL),location:re.get(Se.HOST_LOCATION),notificationPermission:Wn()?Notification.permission:"unsupported"},contextProviderTimeout:e.ContextProviderTimeout,theme:pn(e.Styles,t.Identity)})}},{key:"setIFrameStatus",value:function(e,t){try{window.sessionStorage.setItem(mn,Ne.stringify(Object.assign({},this.getIFrameStatus(),a({},e,t))))}catch(e){this.showSessionStorageError()}}},{key:"getIFrameStatus",value:function(){try{var e=window.sessionStorage.getItem(mn);return e?Ne.parse(e):{}}catch(e){this.showSessionStorageError()}}},{key:"showSessionStorageError",or")}},{key:"unmount",value:function(){var e=this;this.postMessage("Unmount IFrame"),this.messageBus&&this.messageBus.stopListening(),clearInterval(this.iframeLoadCheckInterval),window.setTimame)}),1e3),Le.remove(ge.BLINK_TAB_TIMEOUT_ID)}},{key:"updateHostLocation",value:function(){var e=Ne.parse(Ne.stringify(window.location));re.set(Se.HOST_LOCATION,e),this.postMessage(" Update Host Location",e)}},{key:"handleNotificationPermissionRequest",value:function(){var e=this;try{Notification&&Notification.requestPermis",t)}))}catch(e){Be("handleNotificationPermissionRequest()",e)}}},{key:"pushBrowserNotification",value:function(e){var t,n=this,i=e.body;this.browserNotificationCount++;var r,s,o,c,d=qn(this.browserNotificationCount);if(this.browserNotificationCount>0&&"hidden"===document.visibilityState){var u=Le.get(ge.BLINK_TAB_TIMEOUT_ID);u&&clearInterval(u),r=(0,Ct.translate)(dt,this.browserNotificationCount),s=this.removeBrowserNotification,(c=Le.get(ge.ORIGINAL_WINDOW_TITLE))||(Le.set(ge.ORIGINAL_WINDOW_TITLE,parent.document.title),c=parent.document.title),o||(o=setInterval((function(){parent.document.title=parent.document.title===r?c:r}),1e3),Le.set(ge.BLINK_TAB_TIMEOUT_ID,o),parent.document.addEventListener("visibilitychange",(function e(){clearInterval(o),parent.document.title=c,parent.document.removeEventListener("visibilitychange",e),o=null,s()})))}this.notification=new Notification(d,{body:i||"",tag:"ASAPPWebNotification",requireInteraction:!0});var l=(re.get(Se.DEVICE_INFO)||{}).deviceType,h=(a(t={},j,l),a(t,V,this.browserNotificationCount),t);this.notification.addEventListener("s:h})})),this.notification.addEventListener("click",(function(){window.focus(),n.removeBrowserNotification(),Un({label:w,type:x,tags:h})}))}},{key:"removeBrowserNotification",e())}},{key:"handleCobrowsingLoad",value:function(){var e,t=this;"function"!=typeof window.Upscope&&(Be(vn,"Initiate Upscope"),e=re.get(Se.API_HOSTNAME),"function"!=typeof window.Upscope&&(window.Upscope=zn,function(e){var t=document.getElementsByTagName("script")[0],n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="//".concat(e,"/cobrowsing/upscope.js"),t.parentNode.insertBefore(n,t)}(e)),window.Upscope("init",{apiKey:"PEbyfAbnaP",showUpscopeLink:!1,allowRemoteConsole:!1,allowRemoteClick:!1,allowRemoteScroll:!0,allowRemoteType:!1,domChangesDelay:50,maskedElements:["input","textarea",".hideCobrowsing"]})),window.Upscope("on","sessionContid($)}))}},{key:"requestCobrowsingUserId",value:function(e){var t=this;Be(vn,"Requesting Cobrowsing UserId"),"function"!=typeof window.Upscope&&this.handleCobrowsingLoad(),window.Upscope("getUserId",(function(n){Be(vn,"Cobrowsing UserId: ",n),"Accept"===e?t.postMessage("Accept Cobrowsing",n):e===$&&t.postMessage("Cobrowsing Session Continue",{timestamp:Le.get(ge.COBROWSING_TIMESTAMP),userId:n})}))}}]),t}(),bn="displaySettings:",Nn=Object.freeze({Align:"right",AlwaysShowMinimize:!1,BadgeColor:null,BadgeText:null,BadgeType:ce.BADGE,FrameDraggable:!1,FrameStyle:"default",FrameTitle:void 0,HideBadgeOnLoad:!1,Identity:void 0,PrimaryColor:null,DarkColor:null});function _n(t){if("object"!==e(t))return{};var n=Object.assign({},t);return Object.keys(t).forEach((function(a){var i=t[a];if(["function","object","undefined"].indexOf(e(i))>=0)delete n[a];else switch(a){case"BadgeType":ce.hasOwnProperty(i.toUpperCase())?n[a]=i.toLowerCase():(Be.Warn(bn,'BadgeType "'.concat(i,'" is not supported')),delete n[a]);break;case"BadgeText":"string"!=typeof i&&delete n[a];break;case"Align":se.hasOwnProperty(i.toUpperCase())||delete n[a];break;case"BadgeColor":t.PrimaryColor||(n.PrimaryColor=i);break;case"PrimaryColor":t.BadgeColor||(n.BadgeColor=i)}})),n}function Ln(e){re.set("DisplaySettings",Object.assign({},re.get(Se.DISPLAY_SETTINGS),_n(e)))}function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Dn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pn(e){var t=e||window.location.href,n=t.match(/^https:\/\/(.*)circle-artifacts.com|^https:\/\/s3.amazonaws.com/i);if(n&&n.length>0){var a=t.split(n[0])[1];return a.substring(0,a.lastIndexOf("/"))}return""}function Rn(e){"string"==typeof e&&window.open(e,"_self")}function wn(e){var t=e&&e.target&&e.target.parentElement&&e.target.parentElement.clientWidth;if(re.get(Se.IS_CHAT_OPEN)&&t<=Q.TABLET_PORTRAIT)return e.preventDefault(),!1}function Bn(e){if(!re.get(Se.IS_CHAT_OPEN)){var t;if(!e)return;var n=re.get(Se.PROACTIVE_MESSAGE_REF);n&&n.unmount();var i=new wt(e);re.set(Se.PROACTIVE_MESSAGE_REF,i),i.render();var r=Le.get(ge.PROACTIVE_MESSAGE_IMPRESSION)||{},s=r[e.triggerUuid]||[];Le.set((a(t={},ge.IS_PROACTIVE_MESSAGE_DISPLAYED,!0),a(t,ge.PROACTIVE_MESSAGE_IMPRESSION,Dn(Dn({},r),{},a({},e.triggerUuid,s.concat(Date.now())))),t))}}function Fn(e,t){for(var n in t)"class"===n?("string"==typeof t[n]&&(t[n]=[t[n]]),t[n].forEach((function(t){e.classList.add(t)}))):e.setAttribute(n,t[n]);return e}function kn(t,n){var a=n.key,i=n.value;return!("array"!==t||!Array.isArray(i))||e(i)===t&&null!==i||null!=i&&Be.Error('"'.concat(a,'"'),'Value must be "'.concat(t,'"'))}function Un(e){var t=re.get(Se.IFRAME_REF);t&&"function"==typeof t.postMessage&&t.postMessage("Post Hostpage Metrics",e)}function Hn(e){var t,n,i,r,s,o,c,d,l,h,f,E,g,S,I=e.APIHostname,p=e.AppId,A=e.ContextProvider,m=e.Language,C=e.RegionCode;document.querySelector("html").classList.add(ae.HOSTHTML.CLASSNAME.DEFAULT),function(){if(window.ASAPP&&window.ASAPP.Host&&!/localhost/.test(window.ASAPP.Host)){var e=document.createElement("link");Fn(e,{href:"".concat(window.ASAPP.Host+Pn(),"/chat-sdk.css"),media:"screen",rel:"stylesheet",type:"text/css"}),document.head.insertBefore(e,document.head.firstChild)}}(),Le.set(a({},ge.IS_PROACTIVE_MESSAGE_DISPLAYED,!1)),re.set(Se.API_HOSTNAME,I),re.set(Se.COMPANY_MARKER,p),re.set(Se.LOAD_LANGUAGE,m),re.set(Se.REGION_CODE,((t=C)?"string"!=typeof t||2!=t.length?(Be.Warn("Load","Invalid RegionCode '".concat(t,"'. Please use a ISO 3166-1 alpha-2 code. Adopting '").concat(u,"' instead.")),n=u):n=t:n=u,n)),re.set(Se.DEVICE_INFO,(r=window.document.documentElement.clientWidth,s="orientation"in window,o="ontouchend"in document,c=!s&&r>=Q.TABLET_PORTRAIT,d=s&&r<Q.TABLET_PORTRAIT,l=s&&r>=Q.TABLET_PORTRAIT,h=!s&&r<=Q.MOBILE,f=!(c||d||l||h),a(i={},X.DESKTOP,c),a(i,X.MOBILE,d),a(i,X.TABLET,l),a(i,X.UNKNOWN,f),a(i,X.WATCH,h),{clientDevice:E=i,clientDeviceName:Object.keys(E).fiE[e]}))[0],deviceType:(S=c,S?ee.WEB_DESKTOP:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return/iPad|iPhone|iPod/.test(e)&&!window.MSStream}()?ee.WEB_IOS:ee.WEB_ANDROID),features:{orientation:s,smartdevice:l||d,touch:o}})),re.set(Se.LOAD_IDENTIFIERS,(g={gener.hex},generng()}},Ke(Ke({},Je.persistentID(g)),Je.transientID(g)))),re.set(Se.REFERRER_URL,function(){try{return window.parent&&window.parent.document&&window.parent.document.referrer}catch(e){return""}}()),ASAPP.ContextProvider=A}function Gn(e){var t=e.onSuccess,n=e.onFailure,a=e.path,i=e.withASAPPRequestHeader,r=re.get(Se.API_HOSTNAME);if(r&&a){var s=new XMLHttpRequest;if(s.addEventListener("readystatechange",(function(){if(4===s.readyState){if(200===s.status){var e=s.response;try{if("function"==typeof t){var a=Ne.parse(e||"{}");t(a)}return}catch(t){Be.Error("makeRequest()","Unable to parse from response:",e,"\nFailed with error:",t)}}"function"==typeof n&&n(s)}})),i)s.open("POST","https://".concat(r).concat(a),!0),s.setRequestHeader(h.CLIENT_TYPE,l),s.setRequestHeader(h.CLIENT_VERSION,"4.0.0");else{var o=["".concat(h.CLIENT_TYPE,"=").concat(l),"".concat(h.CLIENT_VERSION,"=").concat("4.0.0")].join("&");s.open("POST","https://".concat(r).concat(a,"?").concat(o),!0)}s.setRequestHeader("Content-Type","text/plain"),s.timeout=7e3;var c={CompanyMarker:re.get(Se.COMPANY_MARKER),LoadIdentifiers:re.get(Se.LOAD_IDENTIFIERS),OriginURL:window.location.href,RegionCode:re.get(Se.REGION_CODE)};window.ASAPP&&"function"==typeof window.ASAPP.ContextProvider?ASAPP.ContextProvider((function(e){e&&e.CompanySubdivision&&(c.CompanySubdivision=e.CompanySubdivision),s.send(Ne.stringify(c))})):s.send(Ne.stringify(c))}else Be("makeRequest()","Invalid request","APIHostname:",r,"path:",a)}function xn(e){var t=e.businessId,n=e.groupId,a=void 0===n?"":n,i=e.intentId,r=void 0===i?"":i;t&&window.open("https://bcrw.apple.com/sms:open?service=iMessage&recipient=urn:biz:".concat(t,"&biz-group-id=").concat(a,"&biz-intent-id=").concat(r))}function Vn(e){var t,n,a,i,r=e.gbmId;r&&window.open("https://businessmessages.google.com/widget/agent/".concat(r,"?ctx=").concat((n=(t=Qn()||{}).Segments,a=t.CompanySubdivision,i=(re.get(Se.LOAD_IDENTIFIERS)||{}).PersistentId,btoa(Ne.stringify({Segments:n,CompanySubdivision:a,PersistentId:i})))))}function jn(e){var t=(re.get(Se.SETTINGS)||{}).OmniBadge,n=void 0===t?{}:t,a=(re.get(Se.DEVICE_INFO)||{}).deviceType;e&&e.length||(e=n.channels||[]);for(var i=0;i<e.length;i++){var r=e[i],s=!1;switch(r){case pe:a===ee.WEB_IOS&&n.abcBusinessId&&(s=!0);break;case Ce:re.get(Se.IFRAME_REF)&&n.smsPhoneNumberFormat&&(s=!0);break;case me:n.gbmId&&a===ee.WEB_ANDROID&&(s=!0);break;case Ie:s=!0}if(s)return r}return Ie}function $n(e){var t=(re.get(Se.SETTINGS)||{}).OmniBadge,n=void 0===t?{}:t;switch(e){case pe:xn({businessId:n.abcBusinessId,groupId:"ASAPP_Badge_Mobile_Web"});break;case me:Vn({gbmId:n.gbmId});break;case Ce:re.get(Se.IFRAME_REF).showSMSForm({smsPhoneNumberFormat:n.smsPhoneNumberFormat,entryType:"omniBadge"});break;default:xe({type:ae.INTEGRATION.ACTION.EVENTS.CHAT_SHOW})}}var qn=function(e){return e>1?(0,Ct.translate)(it,e):(0,Ct.translate)(at)},Wn=function(){if(!window.Notification||!Notification.requestPermission)return!1;if("granted"==Notification.permission)return!0;try{new Notification("")}catch(e){if("TypeError"==e.name)return!1}return!0};function Kn(){var e=new On;e.render(),re.set(Se.IFRAME_REF,e)}function Yn(e){var t=e.DisplayCustomerSupport,n=e.Settings;Be("Trigger enabled:",t),re.set(Se.TRIGGER,t),re.set(Se.SETTINGS,n);var a,i=vt({loadLanguage:re.get(Se.LOAD_LANGUAGE),gatedLanguages:n.SupportedLanguages});(0,Ct.setupI18n)(Dn(Dn({},Tt),{},{language:i})),re.set(Se.LANGUAGE,i),t||Le.get(ge.IS_OPEN)?(function(e){if(e&&e.Display){var t=re.get(Se.DEVICE_INFO).clientDeviceName,n=e.Display[t];n&&Ln(n)}}(n),n.OmniBadge&&n.OmniBadge.enabled&&Ln({BadgeType:ce.OMNI}),re&&re.get(Se.DISPLAY_SETTINGS).BadgeType!==ce.NONE&&void 0===re.get(Se.BADGE_REF)&&((a=new Bt).render(),re.set(Se.BADGE_REF,a)),re&&void 0===re.get(Se.IFRAME_REF)&&Kn()):Kn()}vnts)};zn.q=[]h(e)};var Jn="Set:",Zn="unknown",n Xn}function ea(e,t){return"string"!=typeof e?Be.Error(Jn,"First argument must be a string"):"string"==typeof e&&void 0===t?Be(Jn,"No value provided for key: ".concat(e,". Value will not be updated")):Xn.hasOwnProperty(e)?Xn[e]=t:(Be(Jn,'Setting unknown Context "'.concat(e,'" as'),t),Xn[Zn+e]=t)}Object.defineProperties(Xn,{_access_token:{enumerable:!1,writable:!0},_Auth:{enumerable:!1,writable:!0},_CompanySubdivision:{enumerable:!1,writable:!0},_CustomerInfo:{enumerable:!1,writable:!0},_DebugSettings:{enumerable:!1,writable:!0},_ExternalSessionId:{enumerable:!1,writable:!0},_ExternalSessionType:{enumerable:!1,writable:!0},_PartnerAnalytics:{enumerable:!1,writable:!0},_Segments:{enumerable:!1,writable:!0},access_token:{enumerable:!0,writeable:!1,get:function(){return Xn._access_token},set:function(e){kn("string",{key:"access_token",value:e})&&(Xn._access_token=e)}},Auth:{enumerable:!0,writeable:!1,get:function(){return Xn._Auth},set:function(e){kn("object",{key:"Auth",value:e})&&(Xn._Auth=e)}},CompanySubdivision:{enumerable:!0,writeable:!1,get:function(){return Xn._CompanySubdivision},set:function(e){kn("string",{key:"CompanySubdivision",value:e})&&(Xn._CompanySubdivision=e)}},CustomerInfo:{enumerable:!0,writeable:!1,get:function(){return Xn._CustomerInfo},set:function(e){kn("object",{key:"CustomerInfo",value:e})&&(Xn._CustomerInfo=Object.assign({},Xn._CustomerInfo,e))}},DebugSettings:{enumerable:!0,writeable:!1,get:function(){return Xn._DebugSettings},set:function(e){kn("object",{key:"DebugSettings",value:e})&&(Xn._DebugSettings=e)}},ExternalSessionId:{enumerable:!0,writeable:!1,get:function(){return Xn._ExternalSessionId},set:function(e){kn("string",{key:"ExternalSessionId",value:e})&&(Xn._ExternalSessionId=e)}},ExternalSessionType:{enumerable:!0,writeable:!1,get:function(){return Xn._ExternalSessionType},set:function(e){kn("string",{key:"ExternalSessionType",value:e})&&(Xn._ExternalSessionType=e)}},PartnerAnalytics:{enumerable:!0,writeable:!1,get:function(){return Xn._PartnerAnalytics},set:function(e){kn("object",{key:"PartnerAnalytics",value:e})&&(Xn._PartnerAnalytics=e)}},Segments:{enumerable:!0,writeable:!1,get:function(){return Xn._Segments},set:function(e){kn("array",{key:"Segments",value:e})&&(Xn._Segments=e)}}});var ta="Load";function na(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Be("Load API called with",e),re.get(Se.SDK_LOADED)&&Be.Warn(ta,"SDK already loaded."),re.set(Se.SDK_LOADED,!0);var t,n,i,r,s=e.Align,o=e.APIHostname,c=e.AppId,d=e.BadgeText,u=e.BadgeType,l=e.ContextProvider,h=e.CustomerId,f=e.Display,E=e.DeepLinkHandler,g=e.Intent,S=e.Language,I=e.onLoadComplete,p=e.RegionCode,A=e.Sound,m=e.UserLoginHandler;o?c?(Hn({APIHostname:o,AppId:c,ContextProvider:l,Language:S,RegionCode:p}),re.set(Se.CUSTOMER_ID,h),re.set(Se.DEEP_LINK_HANDLER,E),re.set(Se.HOST_LOCATION,Ne.parse(Ne.stringify(window.location))),re.set(Se.INTENT,g),re.set(Se.SOUND,!!A),re.set(Se.SDK_LOAD_TIME,Date.now()),re.set(Se.ON_LOAD_COMPLETE,I),t=re.get(Se.COMPANY_MARKER),i="_".concat(t,"_CUSTOMER_ACCOUNT_ID"),r=i.slice(1),Xn.hasOwnProperty(r)?Be(Jn,'"'.concat(r,'" is already defined')):Object.defineProperties(Xn,(a(n={},i,{enumerable:!1,writable:!0}),a(n,r,{enumerable:!0,writeable:!n[i]},set:function(e){kn("string",{key:r,value:e})&&(Xn[i]=e)}}),n)),ea("".concat(c,"_CUSTOMER_ACCOUNT_ID"),h),function(e){var t=e.Align,n=e.BadgeText,a=e.BadgeType,i=e.Display,r={Align:t,BadgeText:n,BadgeType:a},s=Object.assign({},Nn,_n(r),_n(i));re.set(Se.DISPLAY_SETTINGS,s)}({Align:s,BadgeText:d,BadgeType:u,Display:f}),ASAPP.UserLoginHandler=m,Gn({path:Ee,onSuccess:Yn})):Be.Error(ta,"AppId is required for Load"):Be.Error(ta,"APIHostname is required for Load")}function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}var ia,ra="[Send]",sa="[SetCustomer]",oa="[setIntn e}var ua,la=ae.CHAT_INSTEAD,ha=la.CLASSNAME,fa=la.ID,Ea=Object.freeze((a(ia={},pe,ue.ABC),a(ia,me,ue.GBM),a(ia,Ae,ue.PHONE),a(ia,Ce,ue.SMS),a(ia,Ie,ue.CHAT),ia)),ga=function(){function e(t){var n,r=t.phoneNumber;i(this,e),this.phoneNumber=r,this.options=[],this.settings={},this.fetchSettings=this.fetchSettings.bind(this),this.handleABCSelected=this.handleABCSelected.bind(this),this.handleClick=this.handleClick.bind(this),this.handleDismiss=this.handleDismiss.bind(this),this.handleFailure=this.handleFailure.bind(this),this.handleGBMSelected=this.handleGBMSelected.bind(this),this.handlePhoneSelected=this.handlePhoneSelected.bind(this),this.handleSMSSelected=this.handleSMSSelected.bind(this),this.handleSettings=this.handleSettings.bind(this),this.handleWebSDKSelected=this.handleWebSDKSelected.bind(this),this.hide=this.hide.bind(this),this.hideContainer=this.hideContainer.bind(this),this.show=this.show.bind(this),this.unmount=this.unmount.bind(this),this.displaySettings=re.get(Se.DISPLAY_SETTINGS)||{},this.deviceInfo=re.get(Se.DEVICE_INFO)||{},this.metricsTags=a({},j,this.deviceInfo.deviceType),this.clickHandlers=(a(n={},pe,this.handleABCSelected),a(n,Ae,this.handlePhoneSelected),a(n,Ie,this.handleWebSDKSelected),a(n,me,this.handleGBMSelected),a(n,Ce,this.handleSMSSelected),n),this.fetchSettings(),this.render()}return s(e,[{key:"fetchSettings",value:function(){Gn({path:"/api/noauth/getChannelSettings",onSuccess:this.handleSettings,onFailure:this.handleFailure,withASAPPRequestHeader:!0}),Un({label:m,type:H})}},{key:"handleSettings",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.settings=t;var n=this.deviceInfo.clientDeviceName,a=this.settings,i=a.DisplayChatInstead,r=a.groupLabel,s=a.supportedChannels,o=void 0===s?[]:s,c=a.supportedDevices,d=void 0===c?[]:c,u=a.SupportedLanguages,l=a.testGroup,h=vt({loadLanguage:re.get(Se.LOAD_LANGUAGE),gatedLanguages:u});(0,Ct.setupI18n)(da(da({},Tt),{},{language:h})),re.set(Se.LANGUAGE,h),i&&d.indexOf(n)>=0&&o.forh(t)})),this.addPhoneOption(),this.updateContent(),this.metricsTags.group_label=r,this.metricsTags.test_group=l,Un({label:m,type:G}),Un({label:I,type:k,data:{DisplayChatInstead:i,displayedChannels:this.options},tags:this.metricsTags})}},{key:"handleFailure",value:function(e){Be("[ChatInstead]","Unable to fetch channel settings"),this.addPhoneOption(),this.updateContent(),Un({label:m,type:U,data:{error:e.response,code:e.status}})}},{key:"addPhoneOption",value:function(){this.options.push({channel:Ae,title:(0,Ct.translate)(ft,this.phoneNumber)})}},{key:"updateContent",value:function(){var e=this;if(this.$optionsContainer){for(;this.$optionsContainer.firstChild;)this.$optionsContainer.removeChild(this.$optionsContainer.firstChild);this.$optionsContainer.classList.remove(ha.OPTIONS_CONTAINER.LOADING),this.options.for(t))})),this.$headerTitle.textContent=this.getHeaderTitleText(),this.$optionsContainer.focus()}}},{key:"isValidChannel",value:function(e){if(!e.enabled)return!1;var t=this.deviceInfo.deviceType,n=this.settings,a=n.abcBusinessId,i=n.gbmId,r=n.smsPhoneNumberFormat;switch(e.channel){case pe:return a&&t===ee.WEB_IOS||!1;case Ie:return re.get(Se.TRIGGER)||!1;case me:return i&&t===ee.WEB_ANDROID||!1;case Ce:return!(t===ee.WEB_IOS||!r||!r.length||(void 0===re.get(Se.IFRAME_REF)&&Kn(),0));default:return!1}}},{key:"createBody",value:function(){var e=document.createElement("div");return e.id=fa.BODY,e.classList.add(ha.BODY),e.addEventListener("click",this.handleClick),e}},{key:"createContainer",value:function(){var e=document.createElement("div");return e.role="dialog",e.classList.add(ha.CONTAINER),e.appendChild(this.createHeader()),this.$optionsContainer=this.createOptionsContainer(),e.appendChild(this.$optionsContainer),e}},{key:"createCloseButton",value:function(){var e=document.createElement("button");return e.addEventListener("click",this.handleDismiss),e.classList.add(ha.CLOSE_BUTTON),e.title=(0,Ct.translate)(ht),e.innerHTML=Rt({iconName:he}),e}},{key:"createHeader",value:function(){var e=document.createElement("div"),t=document.createElement("h3"),n=this.getHeaderTitleText();return this.$headerTitle=t,t.id=fa.TITLE,t.classList.add(ha.TITLE),t.style.color=this.displaySettings.DarkColor,t.textContent=n,e.classList.add(ha.HEADER),e.appendChild(t),e.appendChild(this.createCloseButton()),e}},{key:"createOptionsContainer",value:function(){var e=this,t=document.createElement("div");return t.classList.add(ha.OPTIONS_CONTAINER.DEFAULT),t.setAttribute("aria-labelledby",fa.TITLE),t.role="group",this.options.length?this.options.for(n))})):(t.classList.add(ha.OPTIONS_CONTAINER.LOADING),t.appendChild(this.createLoadingView())),t.tabIndex=-1,t}},{key:"createLoadingView",value:function(){var e=document.createElement("div"),t=(0,Ct.translate)(Et);return e.classList.add(ha.OPTION.ITEM),e.appendChild(this.createIcon(fe)),e.appendChild(this.createTextContainer(t)),e.title=t,e.classList.add(ha.LOADING),e}},{key:"createOptionItem",value:function(e){var t=this,n=e.title,a=e.text,i=e.label,r=e.channel;if(!r)return null;var s=document.createElement("a");return s.tabIndex=0,s.setAttribute("aria-label",n),s.classList.add(ha.OPTION.ITEM),s.classList.add("".concat(ha.OPTION.ITEM,"_").concat(r)),s.appendChild(this.createIcon(Ea[r])),s.appendChild(this.createTextContainer(n,a)),i&&s.appendChild(this.createLabel(i)),r===Ae&&(s.href="tel:".concat(this.phoneNumber)),s.addEventListener("cln(e)})),s}},{key:"createIcon",value:function(e){var t=document.createElement("span");return e===ue.CHAT&&(t.style.backgroundColor=this.displaySettings.PrimaryColor),t.classList.add(ha.OPTION.ICON),t.innerHTML=Rt({iconName:e}),t}},{key:"createLabel",value:function(e){var t=document.createElement("span");return t.classList.add(ha.OPTION.LABEL),t.innerHTML=e,t}},{key:"createTextContainer",value:function(e,t){var n=document.createElement("div"),a=document.createElement("span"),i=document.createElement("p");return n.classList.add(ha.OPTION.TEXT_CONTAINER),a.classList.add(ha.OPTION.TITLE),a.style.color=this.displaySettings.DarkColor,a.textContent=e,n.appendChild(a),t&&(i.classList.add(ha.OPTION.TEXT),i.style.color=this.displaySettings.DarkColor,i.textContent=t,n.appendChild(i)),n}},{key:"getHeaderTitleText",value:function(){return this.options.length?this.settings.headerTitle||(this.options.length>1?(0,Ct.translate)(lt):(0,Ct.translate)(ut)):""}},{key:"extractMetricsData",bel}}},{key:"handleClick",ss()}},{key:"handleABCSelected",value:function(e){var t=Qn(),n=t&&Array.isArray(t.Segments)&&t.Segments[0];this.hide(),xn({businessId:this.settings.abcBusinessId,groupId:"ASAPP_Chat_Instead_Mobile_Web",intentId:n||""}),Un({label:p,type:x,data:this.extractMetricsData(e),tags:this.metricsTags})}},{key:"handleGBMSelected",value:function(e){this.hide(),Vn({gbmId:this.settings.gbmId}),Un({label:A,type:x,data:this.extractMetricsData(e),tags:this.metricsTags})}},{key:"handlePhoneSelected",value:function(e){this.hide(),Un({label:C,type:x,data:this.extractMetricsData(e),tags:this.metricsTags})}},{key:"handleSMSSelected",value:function(e){this.hideContainer(),re.get(Se.IFRAME_REF).showSMSForm({smsPhoneNumberFormat:this.settings.smsPhoneNumberFormat,entryType:"chatInstead"}),Un({label:T,type:x,data:this.extractMetricsData(e),tags:this.metricsTags})}},{key:"handleWebSDKSelected",value:function(e){this.hide(),re.set(Se.INITIATION_TYPE,"chatInstead"),xe({type:ae.INTEGRATION.ACTION.EVENTS.CHAT_SHOW}),Un({label:v,type:x,data:this.extractMetricsData(e),tags:this.metricsTags})}},{key:"handleDismiss",value:function(){this.hide(),Un({label:I,type:F,tags:this.metricsTags})}},{key:"hide",value:function(){xt(),this.hideContainer(),clearTimeout(this.timeout),this.timeout=setTimeout(this.unmount,oe)}},{key:"hideContainer",value:function(){this.$container&&(this.$container.classList.remove(ha.CONTAINER_OPENED),this.$container.classList.add(ha.CONTAINER_CLOSED),this.containerHidden=!0)}},{key:"show",value:function(){Gt(),this.$container&&(this.$container.classList.remove(ha.CONTAINER_CLOSED),this.$container.classList.add(ha.CONTAINER_OPENED),this.containerHidden=!1)}},{key:"unmount",value:function(){re.set(Se.CHAT_INSTEAD_REF,null),this.$body&&document.body.removeChild(this.$body)}},{key:"render",value:function(){this.$container=this.createContainer(),this.$body=this.createBody(),this.$body.appendChild(this.$container),document.body.appendChild(this.$body),this.show()}}]),e}(),Sa="[ShowChatInstead]";function Ia(){if(Le.get(ge.IS_OPEN)||Le.get(ge.IS_LIVE_CHAT))Be.Warn("[Unload]","The Chat SDK is currently active. It cannot be unloaded");else{var e=re.get(Se.BADGE_REF),t=re.get(Se.IFRAME_REF),n=re.get(Se.PROACTIVE_MESSAGE_REF);e&&(e.unmount(),re.set(Se.BADGE_REF,null)),t&&(t.unmount(),re.set(Se.IFRAME_REF,null)),n&&(n.unmount(),re.set(Se.PROACTIVE_MESSAGE_REF,null)),re.set(Se.SDK_LOADED,!1)}}var pa=(a(ua={},ae.JS.GET_STATE,(function(e){Un({label:b,type:B}),function(e){var t=re.get(Se.CUSTOMER_ID),n=Object.assign({},Le&&Le.get(),a({},"hasCustomerId",!!t));if(Fe.forn[e]})),"function"!=typeof e)return n;e(n)}(e)})),a(ua,ae.JS.HIDE,(function(){Un({label:N,type:B}),xe({type:ae.INTEGRATION.ACTION.EVENTS.CHAT_HIDE})})),a(ua,ae.JS.a(e)})),a(ua,ae.JS.REFRESH,(function(){var e=re.get(Se.IFRAME_REF);e&&e.updateHostLocation(),Ia(),Gn({path:Ee,onSuccess:Yn})})),a(ua,ae.JS.ACTION_OFF,(function(e,t){Un({label:y,type:B,data:{eventType:e}}),function(e,t){if(!Ve(e))return Be.Error("off:",'"event type" is required and must be valid.',"Currently defined as:",e);var n=je();n&&n.removeEventListener(e,t)}(e,t)})),a(ua,ae.JS.ACTION_ON,(function(e,t){Un({label:O,type:B,data:{eventType:e}}),Ge(e,t)})),a(ua,ae.JS.SEND,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Un({label:_,type:B,data:{type:e.type}}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Be(ra,"args:",e);var t,n=e.type;if(n===ae.INTEGRATION.SEND.TYPES.CUSTOMER)t=function(e){ea("CustomerInfo",e.data);var t=Qn().CustomerInfo,n=re.get(Se.PROACTIVE_MESSAGE_REF);return{data:Ne.stringify(t||{}),metadata:{UnauthedImpression:Le.get(ge.PROACTIVE_MESSAGE_IMPRESSION),ActiveTriggerId:n&&n.triggerId}}}(e);else{if(n!==ae.INTEGRATION.SEND.TYPES.REPORTING)return Be.Error(ra,'Unknown "type". Please see documentation for available types.',"Currently defined as:",n);t=function(e){return{data:Ne.stringify(e.data||{}),metadata:{reportingType:e.reportingType}}}(e)}try{re.get(Se.IFRAME_REF).postMessrn e}({type:n},t))}catch(e){Be.Error(ra,"Failed. Unable to find document frame.")}}(e)})),a(ua,ae.JS.SET,(function(e,t){Un({label:L,type:B,data:{updatedKey:e}}),ea(e,t)})),a(ua,ae.JS.SET_CUSTOMER,(function(e){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Be(sa,e);var t=e.CustomerId,n=e.ContextProvider,a=e.UserLoginHandler,i=re.get(Se.CUSTOMER_ID),r=t||"",s=re.get(Se.IFRAME_REF);re.set(Se.CUSTOMER_ID,r),ea("".concat(re.get(Se.COMPANY_MARKER),"_CUSTOMER_ACCOUNT_ID"),t),n&&(ASAPP.ContextProvider=n),a&&(ASAPP.UserLoginHandler=a),s?(s.setIFrameStatus(Tn,!1),s.postMessage("Set Customer",{customerId:r}),i!==r&&s.requestProactiveMessage(),Le.get(ge.IS_LOGGING_IN)&&(Le.set(ge.IS_LOGGING_IN,!1),Le.set(ge.SUPRESSING_FULLSCREEN_OPEN,!1),xe({type:ae.INTEGRATION.ACTION.EVENTS.CHAT_SHOW}))):Be.Warn(sa,"Chat SDK has not finished initializing. Consider using the following:",'\n * "load" JavaScript API: Provide your user information at page load to prevent UX issues and race conditions','\n * "onLoadComplete" setting: Your provided callback will be run after the SDK has initialized')}(e)})),a(ua,ae.JS.SET_INTENT,(function(t){Un({label:M,type:B,data:{Code:t&&t.Code}}),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==e(t)||"string"!=typeof t.Code)return Be.Error(oa,'Invalid intent "Code", must be a string. Please see documentation for setIntent.');re.set(Se.INTENT,t);try{re.get(Se.IFRAME_REF).postMessage(g,t)}catch(e){Be.Error(oa,"Failed. Unable to find document frame.")}}(t)})),a(ua,ae.JS.SHOW,(function(e){Un({label:D,type:B,data:{options:e}}),re.set(Se.INITIATION_TYPE,Te),e&&Array.isArray(e.channels)?$n(jn(e.channels)):xe({type:ae.INTEGRATION.ACTION.EVENTS.CHAT_SHOW})})),a(ua,ae.JS.SHOW_CHAT_INSTEAD,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Un({label:P,type:B}),function(e){if(Be(Sa,e),e&&e.phoneNumber)if(re.get(Se.CHAT_INSTEAD_REF))Be(Sa,"Chat Instead already active");else{if(!re.get(Se.SDK_LOADED)){var t=e.APIHostname,n=e.AppId,a=e.ContextProvider,i=e.Language,r=e.RegionCode;if(!t)return void Be.Error(Sa,"APIHostname is required");if(!n)return void Be.Error(Sa,"AppId is required");Hn({APIHostname:t,AppId:n,ContextProvider:a,Language:i,RegionCode:r})}window.event&&window.event.preventDefault();var s=new ga({phoneNumber:e.phoneNumber});re.set(Se.CHAT_INSTEAD_REF,s)}else Be.Error(Sa,"phoneNumber is required for ShowChatInstead")}(e)})),a(ua,ae.JS.UNIa()})),a(ua,ae.JS.DEBUG,(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Le.set(ge.DEBUG_ENABLED,e),console.log("Debug mode is now ".concat(e?"enabled":"disabled",". Please reload the page."))})),ua);function Aa(e){var t=e[0].slice(0,1).toLowerCase()+e[0].slice(1),n=Array.prototype.slice.call(e,1),a=pa[t];a?a.apply(this,n):Be.Error("chat-sdk: Unknown command",t,n)}!function(){var e;try{e=ASAPP._}catch(e){return void Be.Error("chat-sdk: ASAPP namespace does not exist.","Please check your integration and try again")}if(ASAPP._={push:Aa},e&&e.length)for(var t=0;t<e.length;t++)Aa(e[t])}()}()}();