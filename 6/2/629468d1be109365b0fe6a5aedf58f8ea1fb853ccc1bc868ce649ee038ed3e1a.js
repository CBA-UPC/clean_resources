(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{100:function(e,t,n){},104:function(e,t,n){},113:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},22:function(e,t,n){"use strict";n.d(t,"d",function(){return l}),n.d(t,"h",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"g",function(){return b}),n.d(t,"f",function(){return f}),n.d(t,"i",function(){return h}),n.d(t,"m",function(){return m}),n.d(t,"l",function(){return O}),n.d(t,"b",function(){return j}),n.d(t,"a",function(){return v}),n.d(t,"j",function(){return g}),n.d(t,"k",function(){return E}),n.d(t,"e",function(){return w});var a=n(2),r=n.n(a),c=n(3),o=n(6),s=n(7),i=n(25),u=function(e){var t=new Error(e.errorMessage||"");throw t.status=e.status||400,t},l=function(){var e=Object(c.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(s.a)(),e.prev=1,e.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/users/linkedin"),{method:"GET",headers:t});case 4:return n=e.sent,e.next=7,n.text();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),e.prev=1,e.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/users/linkedin"),{method:"POST",headers:n,body:JSON.stringify(t)});case 4:if((a=e.sent).ok){e.next=10;break}return e.next=8,a.json();case 8:c=e.sent,u(c);case 10:return e.next=12,a.json();case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}},e,null,[[1,15]])}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(c.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(s.a)(),e.prev=1,e.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/users/google"),{method:"GET",headers:t});case 4:return n=e.sent,e.next=7,n.text();case 7:return e.abrupt("return",e.sent);case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),e.prev=1,e.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/users/google"),{method:"POST",headers:n,body:JSON.stringify(t)});case 4:if((a=e.sent).ok){e.next=10;break}return e.next=8,a.json();case 8:c=e.sent,u(c);case 10:return e.next=12,a.json();case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}},e,null,[[1,15]])}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),e.prev=1,e.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/users/concept3d"),{method:"POST",headers:n,body:JSON.stringify(t)});case 4:if((a=e.sent).ok){e.next=10;break}return e.next=8,a.json();case 8:c=e.sent,u(c);case 10:return e.next=12,a.json();case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}},e,null,[[1,15]])}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),e.prev=1,e.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/users"),{method:"POST",headers:n,body:JSON.stringify(t)});case 4:if((a=e.sent).ok){e.next=10;break}return e.next=8,a.json();case 8:c=e.sent,u(c);case 10:return e.next=12,a.json();case 12:return e.abrupt("return",e.sent);case 15:throw e.prev=15,e.t0=e.catch(1),e.t0;case 18:case"end":return e.stop()}},e,null,[[1,15]])}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c,i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),a=localStorage.getItem("uid"),e.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/users/").concat(a),{method:"PUT",credentials:"include",headers:n,body:JSON.stringify(t)});case 4:if(!((c=e.sent).status>=400)){e.next=8;break}throw i=Object.keys(t).join(", "),new Error(409===c.status?"Failed to update ".concat(i,". Already in use."):"Error updating ".concat(i,". Wait and try again later."));case 8:return e.abrupt("return",c.status);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),O=function(e){var t=Object(s.a)();return fetch("".concat(o.a.accountsAPI,"/api/admin/users/privacy"),{method:"PATCH",credentials:"include",headers:t,body:JSON.stringify(e)}).then(function(e){return e.json()}).then(},j=function(e){var t=Object(s.a)(),n=e||localStorage.getItem("uid");return fetch("".concat(o.a.accountsAPI,"/api/admin/v2/users/").concat(encodeURIComponent(n)),{headers:t,credentials:"include"}).then(function(e){if(e.status>=400)throw new Error("Failed fetching user");return e.json()}).then(function(e){return e})},v=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),a=localStorage.getItem("uid"),e.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/users/").concat(a,"/password"),{method:"PUT",headers:n,credentials:"include",body:JSON.stringify({password:t})});case 4:if(!((c=e.sent).status>=400)){e.next=7;break}throw new Error("Failed to change password");case 7:return e.next=9,c.text();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),e.next=3,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/users/").concat(t,"/sendPasswordReset"),{method:"PUT",headers:n,credentials:"include"});case 3:return a=e.sent,e.next=6,Object(i.a)(a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),a=localStorage.getItem("uid"),e.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/users/").concat(a,"/federated-identity"),{method:"DELETE",headers:n,credentials:"include",body:JSON.stringify({federatedIdentity:t})});case 4:if(!((c=e.sent).status>=400)){e.next=7;break}throw new Error("Failed to unlink ".concat(t," account"));case 7:return e.next=9,c.text();case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(r.a.mark(function e(){var t,n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(s.a)(),n=localStorage.getItem("uid"),e.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/users/").concat(n,"/roles"),{method:"GET",headers:t,credentials:"include"});case 4:return a=e.sent,e.next=7,Object(i.a)(a);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},23:25:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return l});var a=n(2),r=n.n(a),c=n(3),o=n(28),s=n(23),i=function(){var e=Object(c.a)(r.a.mark(function e(t,n){var a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.headers.get("Content-Type"),!n&&u(t,o.a),!a||!a.includes("application/json")){e.next=8;break}return e.next=5,t.json();case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,t.text();case 10:e.t0=e.sent;case 11:if(c=e.t0,t.ok){e.next=14;break}throw c;case 14:return e.abrupt("return",c);case 15:case"end":return e.stop()}},e)}));return (),u=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.status,a=c.length>1&&void 0!==c[1]?c[1]:{},401===n&&(a.authenticated?s.a.push("/error/unnauthorized"):a.login());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.status,t.ok||401===n||s.a.push("/share/error/".concat(n));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},27:function(e,t,n){"use strict";var a=n(0),r=c=n(2),o=n.n(c),s=n(3),i=n(11),u=n(43),l=n(42),d=n.n(l),p=function(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)(function(){e&&function(){var t=Object(s.a)(o.a.mark(function t(n){var a;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.c)(e);case 2:if(!(a=t.sent)){t.next=7;break}return t.abrupt("return",a);case 7:return t.abrupt("return",d.a);case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()(e).then(},[e]),r},b=function(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)(function(){var t=!1;return e&&function(){var t=Object(s.a)(o.a.mark(function t(){var n;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u.e)(e);case 3:if(!(n=t.sent)){t.next=6;break}return t.abrupt("return",n);case 6:t.next=11;break;case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return",d.a);case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(){return t.apply(this,arguments)}}()(e).then(function(e){return!t&&c(URL.createObjectURL(e))}),,[e]),r};function f(e){var t=Object(a.useState)(e?"loading":"idle"),n=Object(i.a)(t,2),r=n[0],c=n[1];return Object(a.useEffect)(function(){if(e){var t=document.querySelector('script[src="'.concat(e,'"]'));if(t)c(t.getAttribute("data-status"));else{(t=document.createElement("script")).src=e,t.async=!0,t.setAttribute("data-status","loading"),document.body.appendChild(t);var n=t.addEventListener("load",n),t.addEventListener("error",n)}var a=return t.addEventListener("load",a),t.addEventListener("error",a),c("idle")},[e]),r}var h=n(22),m=function(e){var t=e.onSuccess,n=void 0===t?function(){}:t,r=e.onFailure,c=void 0===r?function(){}:r,i=e.isCallback;function u(){return(u=Object(s.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault(),e.next=3,Object(h.c)();case 3:n=e.sent,window.location.href=n;case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(a.useEffect)(function(){if(i){var e=new URLSearchParams(window.location.search),t=e.get("code"),a=e.get("error"),r=window.location.pathname;e.delete("state"),e.delete("error"),e.delete("error_description"),e.delete("code"),e.delete("scope"),e.delete("authuser"),e.delete("prompt"),e.delete("hd"),e.toString()&&(r=r+"?"+e.toString()),window.history.replaceState(null,null,r),a?c(a):t&&n(t)}},[i,c,n]),{signIn:function(e){return u.apply(this,arguments)}}},O=function(e){var t=e.onSuccess,n=void 0===t?function(){}:t,r=e.onFailure,c=void 0===r?function(){}:r,i=e.isCallback;function u(){return(u=Object(s.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault(),e.next=3,Object(h.d)();case 3:n=e.sent,window.location.href=n;case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(a.useEffect)(function(){if(i){var e=new URLSearchParams(window.location.search),t=e.get("code"),a=e.get("error"),r=window.location.pathname;e.delete("state"),e.delete("error"),e.delete("error_description"),e.delete("code"),e.toString()&&(r=r+"?"+e.toString()),window.history.replaceState(null,null,r),a?c(a):t&&n(t)}},[i,c,n]),{signIn:function(e){return u.apply(this,arguments)}}},j=n(17),v=function(e){var t=e.onSuccess,n=void 0===t?t,r=(e.onFailure,e.isCallback),c=Object(j.b)(),i=c.keycloak,u=c.initialized;function l(){return(l=Object(s.a)(o.a.mark(function e(t){var n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.preventDefault(),n="".concat(window.origin,"/tos/concept3d/callback"),i.login({redirectUri:n});case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}return Object(a.useEffect)(function(){r&&u&&i.authenticated&&(n(),localStorage.removeItem("tb_signup"))},[u,r,i.authenticated,i.token,n]),{signIn:function(e){return l.apply(this,arguments)}}},g=n(36),E={manageTours:"manage tours",publishTours:"publish tours",manageUsers:"manage users",deleteAccount:"delete the account",viewTour:"view restricted tours"},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Object(a.useState)(!1),n=Object(i.a)(t,2),r=n[0],c=n[1],o=Object(g.e)(function(e){return e.userCredentials}),s=o.permissions,u=o.rootAdmin;return Object(a.useEffect)(function(){c(u||s[e]||!1)},[u,e,s]),[r,r?"":"Sorry! You do not have access to ".concat(E[e],". Contact your tour admin to make changes here.")]};n.d(t,"g",function(){return r}),n.d(t,"d",function(){return p}),n.d(t,"c",function(){return b}),n.d(t,"e",function(){return m}),n.d(t,"f",function(){return O}),n.d(t,"b",function(){return v}),n.d(t,"h",function(){return f}),n.d(t,"a",function(){return w})},28:function(e,t,n){"use strict";var a=n(74),r=new(n.n(a).a)("/keycloak.json");t.a=r},35:function(e,t,n){"use strict";var a=n(12),r=n(0),c=n.n(r),o=n(24),s=n.n(o),i=(n(84),["children","className","handleClick","active","myRef"]);t.a=function(e){var t=e.children,n=e.className,r=e.handleClick,o=e.active,u=e.myRef,l=Object(a.a)(e,i);return c.a.createElement("button",Object.assign({className:s()(n,{active:o}),onClick:r,ref:u},l),t)}},38:function(e,t,n){"use strict";n.d(t,"a",function(){return u}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return d});var a=n(2),r=n.n(a),c=n(3),o=n(6),s=n(7),i=n(25),u=function(){var e=Object(c.a)(r.a.mark(function e(){var t,n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("aid"),n=Object(s.a)(),e.prev=2,e.next=5,fetch("".concat(o.a.tourAPI,"/v2/").concat(t,"/sessions"),{method:"GET",headers:n,credentials:"include"});case 5:return a=e.sent,e.next=8,Object(i.a)(a);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("aid"),a=Object(s.a)(),e.prev=2,e.next=5,fetch("".concat(o.a.tourAPI,"/v2/").concat(n,"/sessions/").concat(t),{method:"PUT",headers:a,credentials:"include",body:JSON.stringify({})});case 5:return c=e.sent,e.next=8,Object(i.a)(c);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(c.a)(r.a.mark(function e(t){var n,a,c;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("aid"),a=Object(s.a)(),e.prev=2,e.next=5,fetch("".concat(o.a.tourAPI,"/v2/").concat(n,"/sessions/").concat(t),{method:"DELETE",headers:a,credentials:"include"});case 5:return c=e.sent,e.next=8,Object(i.a)(c);case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(2),e.t0;case 14:case"end":return e.stop()}},e,null,[[2,11]])}));return function(t){return e.apply(this,arguments)}}()},41:function(e,t,n){"use strict";var a=n(2),r=n.n(a),c=n(3),o=n(0),s=n.n(o),i=n(54),u=n(17),l=n(83),d=n(24),p=n.n(d),b=n(27),f=n(22);n(113);t.a=function(e){var t=e.provider,n=e.overlay,a=e.fadeout,o=Object(u.b)().keycloak,d=Object(l.e)(),h="google"===t,m="linkedin"===t,O="concept3d"===t,j=function(){o.login({idpHint:t,redirectUri:window.location.origin})},v=function(){var e=Object(c.a)(r.a.mark(function e(){var t,n,a,c=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:"",n={code:t,privacyPolicy:!0},!h){e.next=12;break}return e.prev=3,e.next=6,Object(f.g)(n);case 6:j(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),d.push({pathname:"/tos/google",state:{error:e.t0.message}});case 12:if(!m){e.next=22;break}return e.prev=13,e.next=16,Object(f.h)(n);case 16:j(),e.next=22;break;case 19:e.prev=19,e.t1=e.catch(13),d.push({pathname:"/tos/linkedin",state:{error:e.t1.message}});case 22:if(!O){e.next=34;break}return e.prev=23,e.next=26,Object(f.f)(n);case 26:a=e.sent,console.log(a),j(),e.next=34;break;case 31:e.prev=31,e.t2=e.catch(23),d.push({pathname:"/tos/concept3d",state:{error:e.t2.message}});case 34:case"end":return e.stop()}},e,null,[[3,9],[13,19],[23,31]])}));return function(){return e.apply(this,arguments)}}(),g=Object(b.e)({onSuccess:v,onFailure:g,isCallback:h}),Object(b.f)({onSuccess:v,onFailure:g,isCallback:m}),Object(b.b)({onSuccess:v,onFailure:g,isCallback:O});var E=p()("auth-callback",{overlay:n,fadeout:a});return s.a.createElement("div",{className:E},s.a.createElement("div",{className:"auth-callback__spinner-wrapper"},s.a.createElement("i",{className:"material-icons"},"lock"),s.a.createElement(i.PuffLoader,{color:"#009b65"})))}},42:43:function(e,t,n){"use strict";var a=n(2),r=n.n(a),c=n(3),o=n(6),s=n(7),i=function(e,t){return Object.keys(e).reduce(function(t,n){return t.append(n,"file"===n||"string"===typeof e[n]?e[n]:JSON.stringify(e[n])),t},new FormData)};n.d(t,"a",function(){return u}),n.d(t,"d",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return p}),n.d(t,"e",function(){return b});var u=function(){var e=Object(c.a)(r.a.mark(function e(t,n,a,c){var u,l;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u=Object(s.a)(!0),l=i(c),e.abrupt("return",fetch("".concat(o.a.tourAPI,"/v2/").concat(t,"/stops/").concat(n,"/hotspots?type=").concat(a),{method:"POST",headers:u,body:l,credentials:"include"}).then(function(e){return e.json()}).then(function(e){return e}));case 3:case"end":return e.stop()}},e)}));return function(t,n,a,r){return e.apply(this,arguments)}}(),l=function(){var e=Object(c.a)(r.a.mark(function e(t,n,a,c,u){var l,d;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=Object(s.a)(!0),d=i(c),e.abrupt("return",fetch("".concat(o.a.tourAPI,"/v2/").concat(t,"/stops/").concat(n,"/hotspots/").concat(u,"?type=").concat(a),{method:"PUT",headers:l,body:d,credentials:"include"}).then(function(e){return e.json()}).then();case 3:case"end":return e.stop()}},e)}));return (),d=function(){var e=Object(c.a)(r.a.mark(function e(t,n,a,c){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Object(s.a)(),e.abrupt("return",fetch("".concat(o.a.tourAPI,"/v2/").concat(t,"/stops/").concat(n,"/hotspots/").concat(a,"?tourId=").concat(c),{method:"DELETE",headers:i,credentials:"include"}).then(function(e){return e.json()}).then();case 2:case"end":return e.stop()}},e)}));return (),p=function(){var e=Object(c.a)(r.a.mark(function e(t){var n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.a)(),e.abrupt("return",fetch("".concat(o.a.tourAPI,"/v2/temp/media/videos/thumbnail?url=").concat(t),{headers:n,credentials:"include"}).then(function(e){return e.blob()}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(c.a)(r.a.mark(function e(t){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(t,{}).then();case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},48:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"history",function(){return j}),n.d(t,"store",function(){return E});var a=n(0),r=n.n(a),c=n(30),o=n(44),s=n(70),i=n(13),u=n(31),l=n.n(u),d=(n(100),n(82)),p=n(75),b=n(81),f=n(79),h=n(80),m=n(17),O=n(28);e.embedpano=window.embedpano;var j=Object(i.a)(),v=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),g=[s.a,Object(o.routerMiddleware)(j)],E=Object(c.d)(b.a,v,c.a.apply(void 0,g));E.subscribe(function(){Object(h.a)()||localStorage.setItem("tier",E.getState().account.tier)});var w=r.a.createElement(m.a,{keycloak:O.a,initConfig:{checkLoginIframe:!1,onLoad:"check-sso"}},r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,null),r.a.createElement(d.a,null)));l.a.render(w,document.getElementById("root")),f.a()}.call(this,n(21))},5:function(e,t,n){"use strict";var a=n(71),r=n.n(a),c=n(59);t.a=function(e){return r()({loader:e,loading:c.a,delay:2e3})}},53:function(e,t,n){"use strict";var a=n(4),r=n(0),c=n.n(r),o=n(76),s=n.n(o),i=n(35),u=n(24),l=n.n(u);n(148);t.a=function(e){var t,n=e.children,r=e.styles,o=e.className,u=e.closeModal,d=e.isOpen,p=e.shouldCloseOnOverlayClick,b=e.ariaAttributes,f=e.id,h=e.hideBackground,m="object"===typeof b&&Object.keys(b).length>0,O=f||"",j=l()("dialog-modal",Object(a.a)({},o,o)),v=l()("dialog-modal-overlay",(t={},Object(a.a)(t,o,o),Object(a.a)(t,"no-background",h),t));return c.a.createElement(s.a,{isOpen:d,style:r,className:j,overlayClassName:v,id:O,onRequestClose:u,closeTimeoutMS:500,shouldCloseOnOverlayClick:p,aria:m?b:{},appElement:document.querySelector("#root")},p&&c.a.createElement(i.a,{handleClick:u,className:"dialog-modal-close-btn","aria-label":"close modal","data-cy":"dialog-modal-close-btn"},"\xd7"),n)}},57:function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"b",function(){return s}),n.d(t,"e",function(){return i}),n.d(t,"a",function(){return u}),n.d(t,"c",function(){return d});var a=n(2),r=n.n(a),c=n(3),o=s=i=unction l(){return(l=Object(c.a)(r.a.mark(function e(){var t;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!1,window.addEventListener("deviceorientation",!0),e.next=4,new Promise(function(e,n){return setTimeout(500)});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var d=function(){var e=!1;if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)][0]>=13&&(e=!0)}return e}},58:function(e,t,n){"use strict";var a=n(4),r=n(1),c=n(11),o=n(0),s=n.n(o);n.d(t,"a",function(){return i});var i=Object(o.createContext)(),u={"multi-user":!1,revisions:!1,"out-of-world":!0};t.b=function(e){var t=e.children,n=function(e,t){var n=Object(o.useState)(,a=Object(c.a)(n,2),r=a[0],s=a[1];return[r,}("flags",u),l=Object(c.a)(n,2),d=l[0],p=l[1];return Object(o.useEffect)(function(){var e=new URLSearchParams(window.location.search).getAll("flag"),t=null===e||void 0===e?void 0:e.reduce({});e.length>0?p(Object(r.a)(Object(r.a)({},d),t)):p(u)},[]),s.a.createElement(i.Provider,{value:{checkFlag:setNewFlag:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p(Object(r.a)(Object(r.a)({},d),{},Object(a.a)({},e,t)))}}},t)}},59:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=function(e){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 74.25 59.3",className:"c3d-loader"},r.a.createElement("g",{transform:"translate(-0.025)"},r.a.createElement("path",{className:"loader-2",d:"M73,27.3l-2-1.2-27.5,16a12.524,12.524,0,0,1-12.6,0L3.3,26.2l-2,1.2a2.623,2.623,0,0,0,0,4.5L31.6,49.4a11.2,11.2,0,0,0,11.2,0L73,31.8A2.623,2.623,0,0,0,73,27.3Z"}),r.a.createElement("path",{className:"loader-3",d:"M73,35.8l-2-1.2L43.5,50.5a12.524,12.524,0,0,1-12.6,0L3.4,34.6,1.3,35.8a2.623,2.623,0,0,0,0,4.5L31.6,57.8a11.2,11.2,0,0,0,11.2,0L73,40.2A2.536,2.536,0,0,0,73,35.8Z"})," ",r.a.createElement("path",{className:"loader-1",d:"M1.3,23.4,31.6,40.9a11.2,11.2,0,0,0,11.2,0L73,23.4a2.623,2.623,0,0,0,0-4.5L42.8,1.5A11.477,11.477,0,0,0,37.2,0a11.2,11.2,0,0,0-5.6,1.5L1.3,19A2.536,2.536,0,0,0,1.3,23.4Z"}),r.a.createElement("path",{className:"loader-1-inner",d:"M14,23.9,32.1,34.4a10.265,10.265,0,0,0,10,0L60.2,23.9a3,3,0,0,0,0-5.2L53.7,15l-5.9,3.5,4.9,2.8L39.1,29.2a4.072,4.072,0,0,1-4,0L21.5,21.3l13.6-7.9a4.072,4.072,0,0,1,4,0l3.3,1.9,5.9-3.5L42.2,8.3a9.934,9.934,0,0,0-10,0L14,18.7a2.984,2.984,0,0,0-1.5,2.6A2.794,2.794,0,0,0,14,23.9Z"})))};n(104),t.a=function(e){var t=e.error;return e.pastDelay?r.a.createElement("div",{id:"async-loading"},r.a.createElement(c,null)):t?(console.log(t),r.a.createElement("div",{id:"async-error"},console.log(t),r.a.createElement("p",{className:"async-error-text"},"Sorry, there was a problem loading the page. Please refresh your browser"))):null}},6:62:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(50),o=n.n(c);t.a=function(e){var t=e.faviconId;return r.a.createElement(r.a.Fragment,null,t?r.a.createElement(o.a,{link:[{href:"https://res.cloudinary.com/concept3d/image/upload/q_auto,f_auto,dpr_1.0,h_32,w_32/v1/images/".concat(t),rel:"icon",type:"image/png",sizes:"32x32"},{href:"https://res.cloudinary.com/concept3d/image/upload/q_auto,f_auto,dpr_2.0,h_180,w_180/v1/images/".concat(t),rel:"apple-touch-icon",type:"image/png",sizes:"180x180"},{href:"https://res.cloudinary.com/concept3d/image/upload/q_auto,f_auto,dpr_1.0,h_192,w_192/v1/images/".concat(t),rel:"icon",type:"image/png",sizes:"192x192"}]}):r.a.createElement(o.a,{link:[{href:"/favicon_32.png",rel:"icon",type:"image/png",sizes:"32x32"},{href:"/favicon_180.png",rel:"apple-touch-icon",type:"image/png",sizes:"180x180"},{href:"/favicon_192.png",rel:"icon",type:"image/png",sizes:"192x192"}]}))}},7:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n(28),r=function(e){var t=new Headers,n=a.a.token;return n&&t.append("Authorization","Bearer ".concat(n)),e?t.append("Accept","*/*"):t.append("Content-Type","application/json"),t}},75:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(35),o=n(53),s=n(77);n(149);t.a=function(){var e=Object(s.a)(),t=e.isUpToDate,n=e.refreshCacheAndReload;return r.a.createElement(o.a,{isOpen:!t,className:"cache-buster-modal",hideBackground:!0},r.a.createElement("div",{className:"cache-buster-modal__content-wrapper"},r.a.createElement("p",null,"Your app is out of date. Please refresh and reload to get the latest experience"),r.a.createElement(c.a,{className:"red-btn",handleClick:n},"Refresh and Reload")))}},77:function(e,t,n){"use strict";(function(e){var a=n(2),r=n.n(a),c=n(3),o=n(11),s=n(0),i=n(78);e.appVersion=i.a;var u=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.split(/\./g),a=t.split(/\./g);n.length||a.length;){var r=Number(n.shift()),c=Number(a.shift());if(r!==c)return r>c||isNaN(c)}return!1};t.a=function(){var t=Object(s.useState)({loading:!0,isUpToDate:!0}),n=Object(o.a)(t,2),a=n[0],i=a.loading,l=a.isUpToDate,d=n[1],p=function(){console.log("Clearing cache and reloading..."),"caches"in window&&caches.keys().then(function(e){e.forEach(function(){var e=Object(c.a)(r.a.mark();return ())}),window.location.reload()},b=function(){var t=Object(c.a)(r.a.mark(function t(){var n,a,c,o,s,i,l=arguments;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>0&&void 0!==l[0]&&l[0],t.prev=1,t.next=4,fetch("/meta.json",{cache:"no-store"});case 4:return a=t.sent,t.next=7,a.json();case 7:c=t.sent,o=c.version,s=e.appVersion,i=u(o,s),console.log("Current Version",s),i?(d({loading:!1,isUpToDate:!1}),n&&p()):d({loading:!1,isUpToDate:!0}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(1),console.error(t.t0);case 18:case"end":return t.stop()}},t,null,[[1,15]])}));return ();return Object(s.useEffect)([]),{loading:i,isUpToDate:l,refreshCacheAndReload:p}}}).call(this,n(21))},78:79:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");a?(console.log("YES LOCAL HOST"),function(e,t){fetch(e).then(.catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then():c(t,e)})}},80:function(e,t,n){"use strict";.d(t,"a",},81:function(e,t,n){"use strict";var a=n(30),r=n(44),c=n(1),o={accountsList:[],active:!0,tourAccountId:"",tier:"",status:"active",stripeId:"",permissions:{},payment:{},invoices:[],stripeError:"",swapError:"",updating:!1,gaId:null,mapboxToken:""};var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_ACCOUNT_INFO":return Object.assign({},e,{stripeId:"foundation"===t.tier?t.stripeId:null,tier:t.tier,status:t.status,payment:"foundation"===t.tier?t.payment:null,permissions:t.permissions,packageQuantity:t.packageQuantity,tourAccountId:t.aid,tourAccountName:t.name,gaId:t.gaId,mapboxToken:t.mapboxToken});case"UPDATE_PACKAGE_QUANTITY":return Object.assign({},e,{packageQuantity:t.quantity,permissions:t.permissions});case"SAVE_PAYMENT_INFO":return Object.assign({},e,{payment:t.data});case"SAVE_INVOICE_HISTORY":return Object.assign({},e,{invoices:t.data});case"SET_STRIPE_ERROR":return Object.assign({},e,{stripeError:t.error});case"ACCOUNT_UPDATING":return Object.assign({},e,{updating:!e.updating});case"SAVE_ALL_ACCESSIBLE_ACCOUNTS":return Object.assign({},e,{accountsList:t.accounts});case"TOUR_ACCOUNT_SWAP_ERROR":return Object.assign({},e,{swapError:t.value?"Erorr Occured When Swapping Accounts":""});case"UPDATE_GAID":return Object(c.a)(Object(c.a)({},e),{},{gaId:t.gaId});default:return e}},i={hasEdits:!1};var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_EDIT_CHANGES":return Object.assign({},e,{hasEdits:t.value});default:return e}},l={accounts:[],privacyPolicy:null,rootAdmin:!1,firstname:"",lastname:"",email:"",picture:"",identityProviders:"",username:"",permissions:{deleteAccount:!1,manageTours:!1,manageUsers:!1,publishTours:!1}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_USER_CREDS":return Object.assign({},e,{accounts:t.data.accounts,email:t.data.email,firstname:t.data.firstName,identityProviders:t.data.federatedIdentities,lastname:t.data.lastName,picture:t.data.picture,username:t.data.username});case"SET_ROOT_ADMIN":return Object.assign({},e,{rootAdmin:!0});case"SET_USER_PERMISSIONS":return Object(c.a)(Object(c.a)({},e),{},{permissions:t.permissions});case"SAVE_POLICY_STATUS":return Object.assign({},e,{privacyPolicy:t.privacyPolicy});default:return e}},p=n(4),b={tours:{},stops:{},stopDescriptionMinimized:!0},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0,n=t.panos,a=t.stopData,r=t.stops,o=t.stop,s=t.styles,i=t.type,u=t.tour,l=t.tourId,d=t.tours,f=t.updatedTour,h=t.updatedStop,m=t.updatedStops,O=t.data;switch(i){case"SAVE_ALL_TOUR_ACCOUNT_DATA":return Object.assign({},e,{tours:d,stops:r});case"SAVE_ACCOUNT_TOUR":return Object(c.a)(Object(c.a)({},e),{},{tours:Object(c.a)(Object(c.a)({},e.tours),{},Object(p.a)({},l,Object(c.a)({},u)))});case"UPDATE_ACCOUNT_TOUR":return Object(c.a)(Object(c.a)({},e),{},{tours:Object(c.a)(Object(c.a)({},e.tours),{},Object(p.a)({},l,Object(c.a)(Object(c.a)({},e.tours[l]),O)))});case"DELETE_ACCOUNT_TOUR":return Object(c.a)(Object(c.a)({},e),{},{tours:Object(c.a)({},d)});case"UPDATE_ACCOUNT_PANOS":return Object.assign({},e,{panos:n,stops:r,tours:d});case"SAVE_ACCOUNT_STOP":return Object(c.a)(Object(c.a)({},e),{},{tours:Object(c.a)(Object(c.a)({},e.tours),{},Object(p.a)({},f.id,Object(c.a)({},f))),stops:Object(c.a)(Object(c.a)({},e.stops),{},Object(p.a)({},h.id,Object(c.a)({},h)))});case"DELETE_ACCOUNT_STOP":return Object(c.a)(Object(c.a)({},e),{},{tours:Object(c.a)(Object(c.a)({},e.tours),{},Object(p.a)({},f.id,Object(c.a)({},f))),stops:Object(c.a)({},m)});case"SAVE_PUBLISHED_TOUR":var j=O.tour;return Object.assign({},e,{tours:Object.assign({},e.tours,Object(p.a)({},j.id,Object.assign({},e.tours[j.id],j)))});case"UPDATE_ACCOUNT_TOUR_STOPS":return Object.assign({},e,{tours:Object.assign({},a.tours),stops:Object.assign({},a.stops)});case"SAVE_NEW_STOP_ORDER":return Object(c.a)(Object(c.a)({},e),{},{tours:Object(c.a)(Object(c.a)({},e.tours),{},Object(p.a)({},l,Object(c.a)({},u)))});case"SAVE_TOUR_STYLE":return Object(c.a)(Object(c.a)({},e),{},{tours:Object(c.a)(Object(c.a)({},e.tours),{},Object(p.a)({},l,Object(c.a)(Object(c.a)({},e.tours[l]),{},{styles:s,uptoDate:!1})))});case"UPDATE_STOP":return Object(c.a)(Object(c.a)({},e),{},{stops:Object(c.a)(Object(c.a)({},e.stops),{},Object(p.a)({},o.id,o))});case"SHOW_STOP_DESCRIPTION":return Object(c.a)(Object(c.a)({},e),{},{stopDescriptionMinimized:!1});case"HIDE_STOP_DESCRIPTION":return Object(c.a)(Object(c.a)({},e),{},{stopDescriptionMinimized:!0});default:return e}},h=n(11),m={mediaFetched:!1,mediaFetching:"fetch_success",mediaUploading:!1,rawUploading:!1,mediaBuilding:!1,mediaSaving:!1,mediaDeleting:!1,mediaUploadFailed:!0,mediaDeleteFailed:!0,error:{},panos:{},images:{},videos:{},videos360:{},audio:{},isMainMediaPlaying:!1};var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,a=t.pano,r=t.panos,o=t.images,s=t.error,i=t.videos,u=t.videos360,l=t.audio,d=t.mediaType,b=t.media,f=t.isMainMediaPlaying;switch(n){case"MEDIA_FETCHING":return Object(c.a)(Object(c.a)({},e),{},{mediaFetching:"fetching"});case"MEDIA_FETCH_ERROR":return Object(c.a)(Object(c.a)({},e),{},{mediaFetching:"fetch_error",error:s});case"MEDIA_FETCH_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{mediaFetched:!0,mediaFetching:"fetch_success"});case"START_MEDIA_UPLOAD":return Object(c.a)(Object(c.a)({},e),{},{mediaUploading:!0});case"START_RAW_UPLOAD":return Object(c.a)(Object(c.a)({},e),{},{rawUploading:!0});case"START_MEDIA_BUILD":return Object(c.a)(Object(c.a)({},e),{},{rawUploading:!1,mediaBuilding:!0});case"START_MEDIA_SAVE":return Object(c.a)(Object(c.a)({},e),{},{mediaBuilding:!1,mediaSaving:!0});case"MEDIA_UPLOAD_COMPLETE":return Object(c.a)(Object(c.a)({},e),{},{mediaUploading:!1,mediaSaving:!1});case"MEDIA_UPLOAD_FAILED":return Object(c.a)(Object(c.a)({},e),{},{mediaUploading:!1,mediaBuilding:!1,mediaUploadFailed:!0,error:s});case"MEDIA_FAIL_RESET":return Object(c.a)(Object(c.a)({},e),{},{mediaUploadFailed:!1,mediaDeleteFailed:!1,error:{}});case"MEDIA_DELETING":return Object(c.a)(Object(c.a)({},e),{},{mediaDeleting:!0});case"MEDIA_DELETED":return Object(c.a)(Object(c.a)({},e),{},{mediaDeleting:!1});case"MEDIA_DELETE_FAILED":return Object(c.a)(Object(c.a)({},e),{},{mediaDeleting:!1,mediaDeleteFailed:!0});case"SAVE_ACCOUNT_PANO":var O=Object.values(r).filter(function(t){return!e.panos[t.id]}),j=Object(h.a)(O,1)[0];return Object(c.a)(Object(c.a)({},e),{},{panos:Object(c.a)(Object(c.a)({},e.panos),{},Object(p.a)({},j.id,j))});case"UPDATE_ACCOUNT_PANO":return Object(c.a)(Object(c.a)({},e),{},{panos:Object(c.a)(Object(c.a)({},e.panos),{},Object(p.a)({},a.id,Object(c.a)(Object(c.a)({},e.panos[a.id]),a)))});case"SAVE_ACCOUNT_MEDIA":var v=Object.values(b).filter(,g=Object(h.a)(v,1)[0];return Object(c.a)(Object(c.a)({},e),{},Object(p.a)({},d,Object(c.a)(Object(c.a)({},e[d]),{},Object(p.a)({},g.id,g))));case"UPDATE_ACCOUNT_MEDIA":return Object(c.a)(Object(c.a)({},e),{},Object(p.a)({},d,Object(c.a)(Object(c.a)({},e[d]),{},Object(p.a)({},b.id,Object(c.a)(Object(c.a)({},e[d][b.id]),b)))));case"SAVE_ALL_ACCOUNT_MEDIA":return Object(c.a)(Object(c.a)({},e),{},{panos:r,images:o,videos:i,videos360:u,audio:l});case"TOGGLE_MAIN_MEDIA_STATUS":return Object(c.a)(Object(c.a)({},e),{},{isMainMediaPlaying:f});default:return e}},j={aid:null,tourId:null,panos:null,images:null,videos:null,videos360:null,audio:null,tours:null,email:null,tier:null,active:!0,gaId:null,mapboxToken:null};var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_PUBLIC_TOUR":return Object.assign({},e,{aid:t.aid,tourId:t.id,panos:t.panos,videos:t.videos,videos360:t.videos360,images:t.images,audio:t.audio,stops:t.stops,tier:t.tier,tours:t.tours,active:t.active,gaId:t.gaId,mapboxToken:t.mapboxToken});default:return e}},g={show:"map"},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SWITCH_MAP_VIEW":return Object.assign({},e,{show:t.show});default:return e}},w={showSnackBar:!1,message:""},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POPULATE_SNACKBAR":return Object(c.a)(Object(c.a)({},e),t.snackBarData);case"CLEAR_SNACKBAR":return Object(c.a)(Object(c.a)({},e),{showSnackBar:!1});default:return e}},S={userMenuOpen:!1,helpMenuOpen:!1,publishQueueOpen:!1};var T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TOGGLE_HEADER_DROPDOWNS":return Object(c.a)(Object(c.a)({},e),t.newDropDownState);default:return e}},_={state:"ok",error:{}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SUBMIT_HOTSPOT":return Object(c.a)(Object(c.a)({},e),{},{state:"saving"});case"SUBMIT_HOTSPOT_ERROR":return Object(c.a)(Object(c.a)({},e),{},{state:"error",error:t.error});case"SUBMIT_HOTSPOT_SUCCESS":return Object(c.a)(Object(c.a)({},e),{},{state:"ok",error:{}});default:return e}},k={state:"ok",error:{}},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SUCCESS_TOUR_FORM_OPERATION":return Object(c.a)(Object(c.a)({},e),{},{state:"ok",error:{}});case"ERROR_TOUR_FORM_OPERATION":return Object(c.a)(Object(c.a)({},e),{},{state:"error",error:t.error});default:return e}},x=n(29),P=n.n(x),C={stops:{},status:"ok",errorMessage:""},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SAVE_STOP":return Object(c.a)(Object(c.a)({},e),{},{stops:Object(c.a)(Object(c.a)({},e.stops),{},Object(p.a)({},t.stop.id,Object(c.a)(Object(c.a)({},e.stops[t.stop.id]),t.stop)))});case"DELETE_STOP":return Object(c.a)(Object(c.a)({},e),{},{stops:P()(e.stops,t.stopId)});case"STOPS_STATUS":return Object(c.a)(Object(c.a)({},e),{},{status:t.status,errorMessage:t.errorMessage});default:return e}},N=n(37),D={tours:{},status:"ok",errorMessage:""},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SAVE_TOUR":return Object(c.a)(Object(c.a)({},e),{},{tours:Object(c.a)(Object(c.a)({},e.tours),{},Object(p.a)({},t.tour.id,Object(c.a)(Object(c.a)({},e.tours[t.tour.id]),t.tour)))});case"DELETE_TOUR":return Object(c.a)(Object(c.a)({},e),{},{tours:P()(e.tours,t.tourId)});case"TOURS_STATUS":return Object(c.a)(Object(c.a)({},e),{},{status:t.status,errorMessage:t.errorMessage});case"CLEAR_TOURS":return Object(c.a)(Object(c.a)({},e),{},{tours:{}});case"ADD_STOP_TO_TOUR":return Object(c.a)(Object(c.a)({},e),{},{tours:Object(c.a)(Object(c.a)({},e.tours),{},Object(p.a)({},t.tourId,Object(c.a)(Object(c.a)({},e.tours[t.tourId]),{},{stopIds:[].concat(Object(N.a)(e.tours[t.tourId].stopIds),[t.stopId])})))});default:return e}},L={activeUsers:{},activeTours:{}},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_ACTIVE_SESSIONS":return t.data.reduce(function(e,t){var n;return(null===t||void 0===t?void 0:t.activeTours)&&t.activeTours.length>0&&t.activeTours.forEach(function(n){var a=e.activeTours[n]||[];e.activeTours[n]=[].concat(Object(N.a)(a),[t.uid])}),(null===(n=e.activeUsers[t.uid])||void 0===n?void 0:n.active)||(e.activeUsers[t.uid]=t),e},{activeTours:{},activeUsers:{}});default:return e}},F={accountUsers:{},roles:{},assignments:{},status:"ok",errorMessage:"",errorCode:""},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SAVE_ACCOUNT_USER":return Object(c.a)(Object(c.a)({},e),{},{accountUsers:Object(c.a)(Object(c.a)({},e.accountUsers),{},Object(p.a)({},t.user.id,Object(c.a)(Object(c.a)({},e.accountUsers[t.user.id]),t.user)))});case"SAVE_ACCOUNT_ROLE":return Object(c.a)(Object(c.a)({},e),{},{roles:Object(c.a)(Object(c.a)({},e.roles),{},Object(p.a)({},t.role.rid,Object(c.a)(Object(c.a)({},e.roles[t.role.rid]),t.role)))});case"SAVE_ACCOUNT_ASSIGNMENT":return Object(c.a)(Object(c.a)({},e),{},{assignments:Object(c.a)(Object(c.a)({},e.assignments),{},Object(p.a)({},t.assignment.uid,Object(c.a)(Object(c.a)({},e.assignments[t.assignment.uid]),t.assignment)))});case"ACCOUNT_USERS_STATUS":return Object(c.a)(Object(c.a)({},e),{},{status:t.status,errorMessage:t.errorMessage,errorCode:t.errorCode});case"DELETE_ACCOUNT_USER":return Object(c.a)(Object(c.a)({},e),{},{accountUsers:P()(e.accountUsers,t.id)});case"RESET_ACCOUNT_USERS":return F;default:return e}},B=Object(a.c)({router:r.routerReducer,userCredentials:d,account:s,config:u,media:O,publicTour:v,tourData:f,miniMap:E,snackBar:y,header:T,hotspots:A,forms:I,stops:U,tours:R,sessions:M,accountUsers:V});t.a=B},82:function(e,t,n){"use strict";var a=n(12),r=n(0),c=n.n(r),o=n(83),s=n(36),i=n(5),u=n(62),l=n(23),d=n(48),p=n(57),b=n(11),f=n(17),h=n(41),m=["component","auth"],O=Object(r.memo)(function(e){var t=e.component,n=(e.auth,Object(a.a)(e,m)),s=Object(f.b)(),i=Object(b.a)(s,2),u=i[0],l=i[1],d=Object(o.f)();return Object(r.useEffect)(function(){l&&!u.authenticated&&d.pathname.includes("/home")&&u.login()},[l,u,d]),c.a.createElement(o.a,Object.assign({},n,{render:function(e){return c.a.createElement(c.a.Fragment,null,!!u.authenticated&&c.a.createElement(t,Object.assign({keycloak:u},e)),c.a.createElement(h.a,{fadeout:!!u.authenticated}))}}))}),j=n(6),v=n(58),g=n(38),E=n(27),w=function(e){var t=e.match,n=Object(E.g)(t.params.tid);return Object(r.useEffect)(function(){n!==t.params.tid&&(n&&Object(g.b)(n),Object(g.c)(t.params.tid))},[t.params.tid,n]),Object(r.useEffect)(function(){return ,[]),null},y=["match"],S=["match"],T=["match"],_=["match"],A=["match"],k=["match"],I=["match"],x=["match"],P=["match"],C=Object(i.a)(function(){return window.location.href=j.a.forgotPassword,null}),U=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(11),n.e(3),n.e(26)]).then(n.bind(null,1526))}),N=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(11),n.e(3),n.e(26)]).then(n.bind(null,1527))}),D=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(11),n.e(3),n.e(26)]).then(n.bind(null,1556))}),R=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(7),n.e(23)]).then(n.bind(null,1547))}),L=Object(i.a)(function(){return n.e(33).then(n.bind(null,408))}),M=Object(i.a)(function(){return Promise.all([n.e(0),n.e(2),n.e(4),n.e(5),n.e(18)]).then(n.bind(null,1546))}),F=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(38)]).then(n.bind(null,1545))}),V=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(29)]).then(n.bind(null,1551))}),B=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(50)]).then(n.bind(null,1540))}),H=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(5),n.e(39)]).then(n.bind(null,1542))}),G=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(21)]).then(n.bind(null,1544))}),W=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(43)]).then(n.bind(null,1554))}),z=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(5),n.e(3),n.e(44)]).then(n.bind(null,1562))}),J=Object(i.a)(,Y=Object(i.a)(,q=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(6),n.e(13)]).then(n.bind(null,1555))}),Q=Object(i.a)(,Z=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(5),n.e(10),n.e(27)]).then(n.bind(null,1541))}),K=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(6),n.e(14)]).then(n.bind(null,1558))}),X=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(24)]).then(n.bind(null,1539))}),$=Object(i.a)(function(){return n.e(45).then(n.bind(null,1529))}),ee=Object(i.a)(function(){return n.e(32).then(n.bind(null,1530))}),te=Object(i.a)(function(){return n.e(16).then(n.bind(null,1531))}),ne=Object(i.a)(function(){return n.e(16).then(n.bind(null,1532))}),ae=Object(i.a)(function(){return n.e(46).then(n.bind(null,1533))}),re=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(6),n.e(31)]).then(n.bind(null,1563))}),ce=Object(i.a)(function(){return n.e(47).then(n.bind(null,1534))}),oe=Object(i.a)(function(){return n.e(47).then(n.bind(null,1535))}),se=Object(i.a)(,ie=Object(i.a)(function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(4),n.e(43)]).then(n.bind(null,1552))}),ue=Object(i.a)(;t.a=Object(f.c)(Object(r.memo)(function(e){var t=e.keycloak;return e.keycloakInitialized?Object(p.b)()?c.a.createElement(ae,null):c.a.createElement(s.a,{store:d.store},c.a.createElement(v.b,null,c.a.createElement(o.b,{history:l.a},c.a.createElement(u.a,null),c.a.createElement(o.a,{path:"/",exact:!0,render:function(e){return c.a.createElement(N,e)}}),c.a.createElement(o.a,{path:"/forgotpassword",exact:!0,render:function(e){return c.a.createElement(C,e)}}),c.a.createElement(o.a,{path:"/login",exact:!0,render:function(e){return c.a.createElement(N,e)}}),c.a.createElement(o.a,{path:"/signup",exact:!0,render:function(e){return c.a.createElement(D,Object.assign({show:"signup",keycloak:t},e))}}),c.a.createElement(o.a,{path:"/tos/email/:email",exact:!0,render:function(e){return c.a.createElement(D,Object.assign({keycloak:t,show:"tos",type:"email"},e))}}),c.a.createElement(o.a,{path:"/tos/:provider",exact:!0,render:function(e){var n=e.match,r=Object(a.a)(e,y);return c.a.createElement(D,Object.assign({keycloak:t,show:"tos",type:n.params.provider,match:n},r))}}),c.a.createElement(o.a,{path:"/tos/:provider/callback",exact:!0,render:function(e){var t=e.match,n=Object(a.a)(e,S);return c.a.createElement(c.a.Fragment,null,c.a.createElement(D,Object.assign({show:"tos",type:t.params.provider,match:t,hasChecked:!0},n)),c.a.createElement(h.a,Object.assign({provider:t.params.provider,match:t,overlay:!0},n)))}}),c.a.createElement(o.a,{path:"/share/:id/stop/:activestop",exact:!0,render:function(e){var t=e.match,n=Object(a.a)(e,T);return c.a.createElement(B,Object.assign({},n,{tourId:t.params.id,activeStop:parseInt(t.params.activestop,10),baseUrl:"/share/".concat(t.params.id,"/stop"),publicTour:!0}))}}),c.a.createElement(o.a,{path:"/share/error/ios-device-motion",exact:!0,component:ce}),c.a.createElement(o.a,{path:"/share/error/ios-13-device-motion",exact:!0,component:oe}),c.a.createElement(o.a,{path:"/share/error/404",exact:!0,component:ee}),c.a.createElement(o.a,{path:"/error/404",exact:!0,component:te}),c.a.createElement(o.a,{path:"/error/acountnotfound",exact:!0,component:ne}),c.a.createElement(o.a,{path:"/error/unnauthorized",exact:!0,render:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(U,Object.assign({basic:!0},e)),c.a.createElement($,e))}}),c.a.createElement(O,{path:"/home",component:function(e){return c.a.createElement(R,e)}}),!!t.authenticated&&c.a.createElement(c.a.Fragment,null,c.a.createElement(o.a,{path:"/home/medialibrary",render:function(e){return c.a.createElement(V,e)}}),c.a.createElement(o.a,{path:["/home/:tid/edit","/home/:tid/hotstpots-manager"],render:),c.a.createElement(o.a,{path:"/home/settings",render:function(e){return c.a.createElement(Y,Object.assign({},e,{path:e.location.pathname,routes:[{path:"/home/settings/subscription/upgrade",component:Q},{path:"/home/settings/account",component:Z},{path:"/home/settings/user",component:ue}]}))}}),c.a.createElement(o.a,{path:"/home/accountsmanager",render:function(e){return c.a.createElement(q,Object.assign({},e,{path:e.location.pathname,history:l.a}))}}),c.a.createElement(o.a,{path:"/home/accounts",render:function(e){return c.a.createElement(K,Object.assign({},e,{path:e.location.pathname,history:l.a}))}}),c.a.createElement(o.a,{path:"/home/newtour/:id/:subRoute",exact:!0,render:function(e){var t=e.match,n=Object(a.a)(e,_);return c.a.createElement(M,Object.assign({},n,{path:n.location.pathname,tourId:t.params.id,newTour:!0,routes:[{dataCy:"tour-general-btn",name:"General",path:"/home/newtour/".concat(t.params.id,"/general"),component:G},{dataCy:"tour-stops-btn",name:"Tour Stops",path:"/home/newtour/".concat(t.params.id,"/stops"),component:z},{dataCy:"tour-buttons-btn",name:"Buttons",path:"/home/newtour/".concat(t.params.id,"/buttons"),component:J},{dataCy:"tour-styles-btn",name:"Styles",path:"/home/newtour/".concat(t.params.id,"/styles"),component:H},{dataCy:"tour-forms-btn",name:"Forms",path:"/home/newtour/".concat(t.params.id,"/forms"),component:ie},{dataCy:"tour-share-btn",name:"Share & Publish",path:"/home/newtour/".concat(t.params.id,"/publish"),component:W}]}))}}),c.a.createElement(o.a,{path:"/home/:id/edit/:subRoute",exact:!0,render:function(e){var t=e.match,n=Object(a.a)(e,A);return"newstop"!==t.params.subRoute?c.a.createElement(M,Object.assign({},n,{path:n.location.pathname,tourId:t.params.id,routes:[{dataCy:"tour-general-btn",name:"General",path:"/home/".concat(t.params.id,"/edit/general"),component:G},{dataCy:"tour-stops-btn",name:"Tour Stops",path:"/home/".concat(t.params.id,"/edit/stops"),component:z},{dataCy:"tour-buttons-btn",name:"Buttons",path:"/home/".concat(t.params.id,"/edit/buttons"),component:J},{dataCy:"tour-styles-btn",name:"Styles",path:"/home/".concat(t.params.id,"/edit/styles"),component:H},{dataCy:"tour-forms-btn",name:"Forms",path:"/home/".concat(t.params.id,"/edit/forms"),component:ie},{dataCy:"tour-share-btn",name:"Share & Publish",path:"/home/".concat(t.params.id,"/edit/publish"),component:W}]})):null}}),c.a.createElement(o.a,{path:"/home/:id/edit/newstop",render:function(e){var t=e.match,n=Object(a.a)(e,k);return c.a.createElement(L,{route:"edit-stop"},c.a.createElement(F,Object.assign({},n,{tourId:t.params.id,path:n.location.pathname,newStop:!0})))}}),c.a.createElement(o.a,{path:"/home/:id/edit/stop/:stopId",render:function(e){var t=e.match,n=Object(a.a)(e,I);return c.a.createElement(L,{route:"edit-stop"},c.a.createElement(F,Object.assign({},n,{path:n.location.pathname,stopId:t.params.stopId,tourId:t.params.id})))}}),c.a.createElement(o.a,{path:"/home/view/:id/stop/:activestop",render:function(e){var t=e.match,n=Object(a.a)(e,x);return c.a.createElement(B,Object.assign({},n,{tourId:t.params.id,previewTour:!0,activeStop:parseInt(t.params.activestop,10),baseUrl:"/home/view/".concat(t.params.id,"/stop")}))}}),c.a.createElement(o.a,{path:"/home/privacy",render:function(e){var n=Object.assign({},e);return c.a.createElement(re,Object.assign({},n,{auth:t}))}}),c.a.createElement(o.a,{path:"/home/:id/hotspots-manager/:stopId",render:function(e){var t=e.match,n=Object(a.a)(e,P);return c.a.createElement(X,Object.assign({},n,{history:l.a,path:n.location.pathname,stopId:t.params.stopId,tourId:t.params.id}))}})),c.a.createElement(o.a,{path:"/token/error/404",exact:!0,component:se})))):null}))},84:92:,[[92,53,54]]]);