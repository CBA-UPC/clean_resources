/* Version: 1.64.0 - Build: Mon, 22 Jan 2024 14:16:01 GMT */
var requirejs,require,define;!function(ba){function J(e){return"[object Function]"===N.call(e)}on S(e,i,n,s){return i&&H(i,(function(i,o){!n&&t(e,o)||(s&&"string"!=typeof i?(e[o]||(e[o]={}),S(e[o],i,n,s)):e[o]=i)})),e}ction B(e,t,i,n){return(t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e)).requireType=e,t.requireModules=n,i&&(t.originalError=i),t}function ia(e){function i(e,t,i){var n,s,o,r,a,l,c,u=t&&t.split("/");n=u;var h=k.map,d=h&&h["*"];if(e&&"."===e.charAt(0))if(t){for(t=e=(n=m(k.pkgs,t)?u=[t]:u.slice(0,u.length-1)).concat(e.split("/")),n=0;t[n];n+=1)if("."===(s=t[n]))t.splice(n,1),n-=1;else if(".."===s){if(1===n&&(".."===t[2]||".."===t[0]))break;0<n&&(t.splice(n-1,2),n-=2)}n=m(k.pkgs,t=e[0]),e=e.join("/"),n&&e===t+"/"+n.main&&(e=t)}else 0===e.indexOf("./")&&(e=e.substring(2));if(i&&h&&(u||d)){for(n=(t=e.split("/")).length;0<n;n-=1){if(o=t.slice(0,n).join("/"),u)for(s=u.length;0<s;s-=1)if((i=m(h,u.slice(0,s).join("/")))&&(i=m(i,o))){r=i,a=n;break}if(r)break;!l&&d&&m(d,o)&&(l=m(d,o),c=n)}!r&&l&&(r=l,a=c),r&&(t.splice(0,a,r),e=t.join("/"))}return e}ction r(e,t,n,s){var r,a,l=null,c=t?t.name:null,u=e,h=!0,d="";return e||(h=!1,e="_@r"+(L+=1)),l=(e=o(e))[0],e=e[1],l&&(l=i(l,c,s),a=m(M,l)),e&&(l?d=a&&a.normalize?a.normalize(e,():i(e,c,s):(l=(e=o(d=i(e,c,s)))[0],d=e[1],n=!0,r=T.nameToUrl(d))),{prefix:l,name:d,parentMap:t,unnormalized:!!(n=!l||a||n?"":"_unnormalized"+(D+=1)),url:r,originalName:u,isDefine:h,id:(l?l+"!"+d:d)+n}}nction c(e,t){var i=e.requireModules,n=!1;t?t(e):(z(i,(),n||h.onError(e))}nction p(){var e,t,i,o,r=(i=1e3*k.waitSeconds)&&T.startTime+i<(new Date).getTime(),a=[],l=[],u=!1,h=!0;if(!w){if(w=!0,H(I,(function(i){if(e=i.map,t=e.id,i.enabled&&(e.isDefine||l.push(i),!i.error))if(!i.inited&&r)s(t)?u=o=!0:(a.push(t),n(t));else if(!i.inited&&i.fetched&&e.isDefine&&(u=!0,!e.prefix))return h=!1})),r&&a.length)return(i=B("timeout","Load timeout for modules: "+a,null,a)).contextName=T.contextName,c(i);h&&z(l,(function(e){!function e(t,i,n){var s=t.map.id;t.error?t.emit("error",t.error):(i[s]=!0,z(t.depMaps,(),n[s]=!0)}(e,{},{})})),r&&!o||!u||!A&&!ea||E||(E=setTimeout((,50)),w=!1}}unction g(e){e=e.currentTarget||e.srcElement;var t=T.onScriptLoad;return e.detachEvent&&!Z?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=T.onScriptError,(!e.detachEvent||Z)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function y(){var e;for(u();N.length;){if(null===(e=N.shift())[0])return c(B("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));f(e)}}var w,b,T,C,E,k={waitSeconds:7,baseUrl:"./",paths:{},pkgs:{},shim:{},config:{}},P={},I={},O={},N=[],M={},x={},L=1,D=1;return C={require:exports:module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){var t=m(k.pkgs,e.map.id);return m(k.config,t?e.map.id+"/"+t.main:e.map.id)||{}},exports:M[e.map.id]}}},(b=.prototype={init:defineDep:fetch:load:check:function(){if(this.enabled&&!this.enabling){var e,t,i=this.map.id;t=this.depExports;var n=this.exports,s=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,1>this.depCount&&!this.defined){if(J(s)){if(this.events.error&&this.map.isDefine||h.onError!==ca)try{n=T.execCb(i,s,t,n)}catch(t){e=t}else n=T.execCb(i,s,t,n);if(this.map.isDefine&&((t=this.module)&&void 0!==t.exports&&t.exports!==this.exports?n=t.exports:void 0===n&&this.usingExports&&(n=this.exports)),e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",c(this.error=e)}else n=s;this.exports=n,this.map.isDefine&&!this.ignore&&(M[i]=n,h.onResourceLoad)&&h.onResourceLoad(T,this.map,this.depMaps),d(i),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,n=e.id,s=r(e.prefix);this.depMaps.push(s),l(s,"defined",v(this,(function(s){var o,u;u=this.map.name;var p=this.map.parentMap?this.map.parentMap.name:null,f=T.makeRequire(e.parentMap,{enableBuildCallback:!0});this.map.unnormalized?(s.normalize&&(u=s.normalize(u,()||""),l(s=r(e.prefix+"!"+u,this.map.parentMap),"defined",v(this,()),(u=m(P,s.id))&&(this.depMaps.push(s),this.events.error&&u.on("error",v(this,(function(e){this.emit("error",e)}))),u.enable())):((o=v(this,()).error=v(this,(),o.fromText=v(this,(),s.load(e.name,f,o,k))}))),T.enable(s,this),this.pluginMaps[s.id]=s},enable:function(){I[this.map.id]=this,this.enabling=this.enabled=!0,z(this.depMaps,v(this,(function(e,i){var n,s;if("string"==typeof e){if(e=r(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[i]=e,n=m(C,e.id))return void(this.depExports[i]=n(this));this.depCount+=1,l(e,"defined",v(this,()),this.errback&&l(e,"error",v(this,this.errback))}n=e.id,s=P[n],!t(C,n)&&s&&!s.enabled&&T.enable(e,this)}))),H(this.pluginMaps,v(this,()),this.enabling=!1,this.check()},on:emit:,(T={config:k,contextName:e,registry:P,defined:M,urlFetched:x,defQueue:N,Module:b,makeModuleMap:r,nextTick:h.nextTick,onError:c,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=k.pkgs,i=k.shim,n={paths:!0,config:!0,map:!0};H(e,(),e.shim&&(H(e.shim,(),k.shim=i),e.packages&&(z(e.packages,(function(e){t[(e="string"==typeof e?{name:e}:e).name]={name:e.name,location:e.location||e.name,main:(e.main||"main").replace(ka,"").replace(fa,"")}})),k.pkgs=t),H(P,(),(e.deps||e.callback)&&T.require(e.deps||[],e.callback)},makeShimExports:makeRequire:function(n,s){function o(i,l,u){var d,m;return s.enableBuildCallback&&l&&J(l)&&(l.__requireJsBuild=!0),"string"==typeof i?J(l)?c(B("requireargs","Invalid require call"),u):n&&t(C,i)?C[i](P[n.id]):h.get?h.get(T,i,n,o):(d=(d=r(i,n,!1,!0)).id,t(M,d)?M[d]:c(B("notloaded",'Module name "'+d+'" has not been loaded yet for context: '+e+(n?"":". Use require([])")))):(y(),T.nextTick((),o)}return s=s||{},S(o,{isBrowser:A,toUrl:defined:specified:),n||(o.undef=,o},enable:completeLoad:function(e){var i,n,o=m(k.shim,e)||{},r=o.exports;for(u();N.length;){if(null===(n=N.shift())[0]){if(n[0]=e,i)break;i=!0}else n[0]===e&&(i=!0);f(n)}if(n=m(P,e),!i&&!t(M,e)&&n&&!n.inited){if(k.enforceDefine&&(!r||!da(r)))return s(e)?void 0:c(B("nodefine","No define call for "+e,null,[e]));f([e,o.deps||[],o.exportsFn])}p()},nameToUrl:function(e,t,i){var n,s,o,r,a,l;if(h.jsExtRegExp.test(e))r=e+(t||"");else{for(n=k.paths,s=k.pkgs,a=(r=e.split("/")).length;0<a;a-=1){if(o=m(s,l=r.slice(0,a).join("/")),l=m(n,l)){K(l)&&(l=l[0]),r.splice(0,a,l);break}if(o){e=e===o.name?o.location+"/"+o.main:o.location,r.splice(0,a,e);break}}r=r.join("/"),r=("/"===(r+=t||(/\?/.test(r)||i?"":".js")).charAt(0)||r.match(/^[\w\+\.\-]+:/)?"":k.baseUrl)+r}return k.urlArgs?r+(-1===r.indexOf("?")?"?":"&")+k.urlArgs:r},load:execCb:onScriptLoad:onScriptError:).require=T.makeRequire(),T}var h,x,y,E,L,F,R,M,s,ga,ma=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,na=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,fa=/\.js$/,ka=/^\.\//;x=Object.prototype;var N=x.toString,ha=x.hasOwnProperty,ja=Array.prototype.splice,A=!("undefined"==typeof window||!navigator||!window.document),ea=!A&&"undefined"!=typeof importScripts,la=A&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Z="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),G={},u={},U=[],Q=!1;if(void 0===define){if(void 0!==requirejs){if(J(requirejs))return;u=requirejs,requirejs=void 0}void 0!==require&&!J(require)&&(u=require,require=void 0),h=requirejs=function(e,t,i,n){var s,o="_";return!K(e)&&"string"!=typeof e&&(s=e,K(t)?(e=t,t=i,i=n):e=[]),s&&s.context&&(o=s.context),(n=m(G,o))||(n=G[o]=h.s.newContext(o)),s&&n.configure(s),n.require(e,t,i)},h.config=function(e){return h(e)},h.nextTick="undefined"!=typeof setTimeout?require||(require=h),h.version="2.1.6",h.jsExtRegExp=/^\/|:|\?|\.js$/,h.isBrowser=A,x=h.s={contexts:G,newContext:ia},h({}),z(["toUrl","undef","defined","specified"],(),A&&(y=x.head=document.getElementsByTagName("head")[0],E=document.getElementsByTagName("base")[0])&&(y=x.head=E.parentNode),h.onError=ca,h.load=function(e,t,i){var n,s=e&&e.config||{};if(A)return(n=s.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script")).type=s.scriptType||"text/javascript",n.charset="utf-8",n.async=!0,n.setAttribute("data-requirecontext",e.contextName),n.setAttribute("data-requiremodule",t),!n.attachEvent||n.attachEvent.toString&&0>n.attachEvent.toString().indexOf("[native code")||Z?(n.addEventListener("load",e.onScriptLoad,!1),n.addEventListener("error",e.onScriptError,!1)):(Q=!0,n.attachEvent("onreadystatechange",e.onScriptLoad)),n.src=i,M=n,E?y.insertBefore(n,E):y.appendChild(n),M=null,n;if(ea)try{importScripts(i),e.completeLoad(t)}catch(n){e.onError(B("importscripts","importScripts failed for "+t+" at "+i,n,[t]))}},A&&O(document.getElementsByTagName("script"),(),define=function(e,t,i){var n,s;"string"!=typeof e&&(i=t,t=e,e=null),K(t)||(i=t,t=null),!t&&J(i)&&(t=[],i.length&&(i.toString().replace(ma,"").replace(na,(),t=(1===i.length?["require"]:["require","exports","module"]).concat(t))),Q&&((n=M)||(R&&"interactive"===R.readyState||O(document.getElementsByTagName("script"),(),n=R),n&&(e||(e=n.getAttribute("data-requiremodule")),s=G[n.getAttribute("data-requirecontext")])),(s?s.defQueue:U).push([e,t,i])},define.amd={jQuery:!0},h.exec=h(u)}}(this),function(e){define("mediator",[],(function(){return function(){return function(e,t){"function"==typeof e.exports?e.exports.Mediator=t():e.Mediator=t()}(this,(function(){function e(t,i,n){if(!(this instanceof e))return new e(t,i,n);this.id=),this.fn=t,this.options=i,this.context=n,this.channel=null}function t(e,i){if(!(this instanceof t))return new t(e);this.namespace=e||"",this._subscribers=[],this._channels=[],this._parent=i,this.stopped=!1}function i(){if(!(this instanceof i))return new i;this._channels=new t("")}return e.prototype={update:function(e){e&&(this.fn=e.fn||this.fn,this.context=e.context||this.context,this.options=e.options||this.options,this.channel&&this.options&&void 0!==this.options.priority&&this.channel.setPriority(this.id,this.options.priority))}},t.prototype={addSubscriber:function(t,i,n){return t=new e(t,i,n),i&&void 0!==i.priority?(i.priority>>=0,0>i.priority&&(i.priority=0),i.priority>=this._subscribers.length&&(i.priority=this._subscribers.length-1),this._subscribers.splice(i.priority,0,t)):this._subscribers.push(t),t.channel=this,t},stopPropagation:function(){this.stopped=!0},getSubscriber:function(e){for(var t=0,i=this._subscribers.length;t<i;t++)if(this._subscribers[t].id===e||this._subscribers[t].fn===e)return this._subscribers[t]},setPriority:function(e,t){var i,n=0,s=0;s=0;for(i=this._subscribers.length;s<i&&this._subscribers[s].id!==e&&this._subscribers[s].fn!==e;s++)n++;s=this._subscribers[n],i=this._subscribers.slice(0,n),n=this._subscribers.slice(n+1),this._subscribers=i.concat(n),this._subscribers.splice(t,0,s)},addChannel:hasChannel:function(e){return this._channels.hasOwnProperty(e)},returnChannel:function(e){return this._channels[e]},removeSubscriber:function(e){var t=this._subscribers.length-1;if(e)for(;0<=t;t--)this._subscribers[t].fn!==e&&this._subscribers[t].id!==e||(this._subscribers[t].channel=null,this._subscribers.splice(t,1));else this._subscribers=[]},publish:function(e){for(var t,i,n=0,s=this._subscribers.length,o=!1;n<s;n++)this.stopped||(void 0!==(t=this._subscribers[n]).options&&"function"==typeof t.options.predicate?t.options.predicate.apply(t.context,e)&&(t.fn.apply(t.context,e),o=!0):(o=this._subscribers.length,t.fn.apply(t.context,e),s=i=this._subscribers.length,i===o-1&&n--,o=!0)),o&&t.options&&void 0!==t.options&&(t.options.calls--,1>t.options.calls&&(this.removeSubscriber(t.id),s--,n--));this._parent&&this._parent.publish(e),this.stopped=!1}},i.prototype={getChannel:function(e){var t=this._channels,i=e.split(":"),n=0,s=i.length;if(""===e)return t;if(0<i.length)for(;n<s;n++)t.hasChannel(i[n])||t.addChannel(i[n]),t=t.returnChannel(i[n]);return t},subscribe:function(e,t,i,n){return i=i||{},n=n||{},(e=this.getChannel(e)).addSubscriber(t,i,n)},once:function(e,t,i,n){return(i=i||{}).calls=1,this.subscribe(e,t,i,n)},getSubscriber:remove:function(e,t){this.getChannel(e).removeSubscriber(t)},publish:function(e){var t=Array.prototype.slice.call(arguments,1),i=this.getChannel(e);t.push(i),this.getChannel(e).publish(t)}},i.prototype.on=i.prototype.subscribe,i.prototype.bind=i.prototype.subscribe,i.prototype.emit=i.prototype.publish,i.prototype.trigger=i.prototype.publish,i.prototype.off=i.prototype.remove,i.Channel=t,i.Subscriber=e,i.version="0.9.4",i})),e.Mediator=Mediator}.apply(e,arguments)}))}(this),function(e,t){var i,n,s=typeof t,o=e.location,r=e.document,a=r.documentElement,l=e.jQuery,c=e.$,u={},h=[],d="1.10.0",p=h.concat,m=h.push,f=h.slice,g=h.indexOf,v=u.toString,y=u.hasOwnProperty,w=d.trim,b=S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=/\S+/g,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,E=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,P=/(?:^|:|,)(?:\s*\[)+/g,I=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,O=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,N=/^-ms-/,M=/-([\da-z])/gi,x=function(e,t){return t.toUpperCase()},L=H=.fn=b.prototype={jquery:d,constructor:b,init:selector:"",length:0,toArray:get:pushStack:each:ready:slice:first:function(){return this.eq(0)},last:eq:map:end:push:m,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=b.extend({expando:"jQuery"+(d+Math.random()).replace(/\D/g,""),noConflict:isReady:!1,readyWait:1,holdReady:ready:isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||isWindow:isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:isPlainObject:isEmptyObject:error:parseHTML:parseJSON:parseXML:noop:function(){},globalEval:camelCase:nodeName:each:trim:w&&!w.call("\ufeff "),makeArray,inArray,merge,grep,map,guid:1,proxy,access,now,swap}),b.ready.promise,b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),)),n=b(r),function(e,t){var i,n,s,o,r,a,l,c,u,h,d,p,m,f,g,v,y,w="sizzle"+-new Date,S=e.document,T=0,C=0,E=re(),A=re(),k=re(),P=!1,I=function(){return 0},O=typeof t,N={}.hasOwnProperty,M=[],x=M.pop,L=M.push,H=M.push,D=M.slice,R=M.indexOf|,_="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",F="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",V=B.replace("w","w#"),$="\\["+F+"*("+B+")"+F+"*(?:([*^$|!~]?=)"+F+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+V+")|)|)"+F+"*\\]",z=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+$.replace(3,8)+")*)|.*)\\)|)",U=RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g"),j=RegExp("^"+F+"*,"+F+"*"),q=RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),G=RegExp(F+"*[+~]"),W=RegExp("="+F+"*([^\\]'\"]*)"+F+"*\\]","g"),K=RegExp(z),Y=RegExp("^"+V+"$"),J={ID:RegExp("^#("+B+")"),CLASS:RegExp("^\\.("+B+")"),TAG:RegExp("^("+B.replace("w","w*")+")"),ATTR:RegExp("^"+$),PSEUDO:RegExp("^"+z),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:RegExp("^(?:"+_+")$","i"),needsContext:RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},X=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/^(?:input|select|textarea|button)$/i,ee=/^h\d$/i,te=/'|\\/g,ie=RegExp("\\\\([\\da-f]{1,6}"+F+"?|("+F+")|.)","ig"),ne;try{H.apply(M=D.call(S.childNodes),S.childNodes),M[S.childNodes.length].nodeType}catch(e){H={apply:M.length}tion ce(e,t,i){for(var n,s=(e=e.split("|")).length,r=i?null:t;s--;)(n=o.attrHandle[e[s]])&&n!==t||(o.attrHandle[e[s]]=r)in a=se.isXML,n=se.support={},h=se.setDocument=function(e){var i=e?e.ownerDocument||e:S;return i!==d&&9===i.nodeType&&i.documentElement?(d=i,p=i.documentElement,m=!a(i),n.attributes=le()),n.input=le()),ce("value",de,n.attributes&&n.input),n.getElementsByTagName=le()),n.getElementsByClassName=le()),n.getById=le()),n.getById?(o.find.ID,o.filter.ID):(delete o.find.ID,o.filter.ID),o.find.TAG=n.getElementsByTagName,o.find.CLASS=n.getElementsByClassName&,g=[],f=[],(n.qsa=oe(i.querySelectorAll))&&(le()),le())),(n.matchesSelector=oe(v=p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le()),f=f.length&&RegExp(f.join("|")),g=g.length&&RegExp(g.join("|")),y=oe(p.contains)||p.compareDocumentPosition,n.sortDetached=le()),I=p.compareDocumentPosition,i):d},se.matches,se.matchesSelector,se.contains,se.attr,se.error,se.uniqueSort,r=se.getText,o=se.selectors={cacheLength:50,createPseudo:ae,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR,CHILD,PSEUDO},filter:{TAG,CLASS,ATTR,CHILD,PSEUDO},pseudos:{not:ae()),has:ae()),contains:ae()),lang:ae()),target,root:function(e){return e===p},focus,enabled:function(e){return!1===e.disabled},disabled,checked,selected,empty,parent,header:function(e){return ee.test(e.nodeName)},input:function(e){return Z.test(e.nodeName)},button,text,first:ge()),last:ge()),eq:ge()),even:ge((function(e,t){for(var i=0;t>i;i+=2)e.push(i);return e})),odd:ge()),lt:ge()),gt:ge())}},{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})o.pseudos[i]=me(i);for(i in{submit:!0,reset:!0})o.pseudos[i]=fe(i) ke(){}l=se.compile,o.pseudos.nth=o.pseudos.eq,ke.prototype=o.filters=o.pseudos,o.setFilters=new ke,n.sortStable=w.split("").sort(I).join("")===w,h(),[0,0].sort(I),n.detectDuplicates=P,b.find=se,b.expr=se.selectors,b.expr[":"]=b.expr.pseudos,b.unique=se.uniqueSort,b.text=se.getText,b.isXMLDoc=se.isXML,b.contains=se.contains}(e);var R={};b.Callbacks=function(e){e="string"==typeof e?R[e]|(e):b.extend({},e);var i,n,s,o,r,a,l=[],c=!e.once&&[],u,h={add,remove,has,empty,disable,disabled:function(){return!l},lock,locked,fireWith,fire,fired};return h},b.extend({Deferred,when}),b.support({});var _=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/gxtend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData,data,removeData,_data,_removeData,acceptData}),b.fn.extend({data,removeData:function(e){return this.each((function(){b.removeData(this,e)}))}}),b.extend({queue,dequeue,_queueHooks}),b.fn.extend({queue,dequeue:function(e){return this.each((function(){b.dequeue(this,e)}))},delay,clearQueue,promise});var U,j,q=/[\t\r\n\f]/g,G=/\r/g,W=/^(?:input|select|textarea|button|object)$/i,K=/^(?:a|area)$/i,Y=/^(?:checked|selected)$/i,J=b.support.getSetAttribute,X=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr,prop,removeProp,addClass,removeClass,toggleClass,hasClass,val}),b.extend({valHooks:{option:{get},select:{get,set}},attr,removeAttr,attrHooks:{type:{set}},propFix:{for:"htmlFor",class:"className"},prop,propHooks:{tabIndex:{get}}}),j={set},b.each(b.expr.match.bool.source.match(/\w+/g),)),X&&J||(b.attrHooks.value={set}),J||(U={set},b.expr.attrHandle.id=b.expr.attrHandle.name=b.expr.attrHandle.coords,b.valHooks.button={get,set:U.set},b.attrHooks.contenteditable={set},b.each(["width","height"],))),b.support.hrefNormalized||b.each(["href","src"],)),b.support.style||(b.attrHooks.style={get,set}),b.support.optSelected||(b.propHooks.selected={get}),b.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],)),b.support.enctype||(b.propFix.enctype="encoding"),b.each(["radio","checkbox"],));var Q=/^(?:input|select|textarea)$/i,Z=/^key/,ee=/^(?:mouse|contextmenu)|click/,te=/^(?:focusinfocus|focusoutblur)$/,ie=/^([^.]*)(?:\.(.+)|)$/;function ne(){return!0.event={global:{},add,remove,trigger,dispatch,handlers,fix,props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter},special:{load:{noBubble:!0},focus:{trigger,delegateType:"focusin"},blur:{trigger,delegateType:"focusout"},click:{trigger,_default},beforeunload:{postDispatch}},simulate},b.removeEvent=r.removeEventListener,b.Event,b.Event.prototype={isDefaultPrevented:se,isPropagationStopped:se,isImmediatePropagationStopped:se,preventDefault,stopPropagation,stopImmediatePropagation},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},)),b.support.submitBubbles||(b.event.special.submit={setup,postDispatch,teardown}),b.support.changeBubbles||(b.event.special.change={setup,handle,teardown}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},)),b.fn.extend({on,one,off,trigger,triggerHandler});var re=/^.[^:#\[\.,]*$/,ae=/^(?:parents|prev(?:Until|All))/,le=b.expr.match.needsContext,ce={children:!0,contents:!0,next:!0,prev:!0}fn.extend({find,has,not:function(e){return this.pushStack(he(this,e||[],!0))},filter,is,closest,index,add,addBack}),b.each({parent,parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,i){return b.dir(e,"parentNode",i)},next:function(e){return ue(e,"nextSibling")},prev:function(e){return ue(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,i){return b.dir(e,"nextSibling",i)},prevUntil,siblings,children,contents},)),b.extend({filter,dir,sibling});var pe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",me=/ jQuery\d+="(?:null|\d+)"/g,fe=RegExp("<(?:"+pe+")[\\s/>]","i"),ge=/^\s+/,ve=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ye=/<([\w:]+)/,we=/<tbody/i,be=/<|&#?\w+;/,Se=/<(?:script|style|link)/i,Te=/^(?:checkbox|radio)$/i,Ce=/checked\s*(?:[^=]|=\s*.checked.)/i,Ee=/^$|\/(?:java|ecma)script/i,Ae=/^true\/(.*)/,ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Pe={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ie=de(r).appendChild(r.createElement("div"))roup=Pe.option,Pe.tbody=Pe.tfoot=Pe.colgroup=Pe.caption=Pe.thead,Pe.th=Pe.td,b.fn.extend({text,append,prepend,before,after,remove,empty,clone,html,replaceWith,detach:function(e){return this.remove(e,!0)},domManip}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},)),b.extend({clone,buildFragment,cleanData,_evalUrl}),b.fn.extend({wrapAll,wrapInner,wrap,unwrap});var _e,Fe,Be,Ve=/alpha\([^)]*\)/i,$e=/opacity\s*=\s*([^)]*)/,ze=/^(top|right|bottom|left)$/,Ue=/^(none|table(?!-c[ea]).+)/,je=/^margin/,qe=RegExp("^("+S+")(.*)$","i"),Ge=RegExp("^("+S+")(?!px)[a-z%]+$","i"),We=RegExp("^([+-])=("+S+")","i"),Ke={BODY:"block"},Ye={position:"absolute",visibility:"hidden",display:"block"},Je={letterSpacing:0,fontWeight:400},Xe=["Top","Right","Bottom","Left"],Qe=["Webkit","O","Moz","ms"]tend({css,show,hide,toggle}),b.extend({cssHooks:{opacity:{get}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:b.support.cssFloat?"cssFloat":"styleFloat"},style,css}),e.getComputedStyle?(Fe,Be):r.documentElement.currentStyle&&(Fe=function(e){return e.currentStyle},Be),b.each(["height","width"],)),b.support.opacity||(b.cssHooks.opacity={get,set}),b()),b.expr&&b.expr.filters&&(b.expr.filters.hidden,b.expr.filters.visible),b.each({margin:"",padding:"",border:"Width"},));var at=/%20/g,lt=/\[\]$/,ct=/\r?\n/g,ut=/^(?:submit|button|image|reset|file)$/i,ht=/^(?:input|select|textarea|keygen)/ib.fn.extend({serialize,serializeArray}),b.param,b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),)),b.fn.extend({hover,bind,unbind,delegate,undelegate});var pt,mt,ft=b.now(),gt=/\?/,vt=/#.*$/,yt=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,bt=/^(?:GET|HEAD)$/,St=/^\/\//,Tt=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ct=b.fn.load,Et={},At={},kt="*/".concat("*");try{mt=o.href}catch(e){(mt=r.createElement("a")).href="",mt=mt.href=Tt.exec(mt.toLowerCase())||[],b.fn.load,b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],)),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:mt,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(pt[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":kt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup,ajaxPrefilter:Pt(Et),ajaxTransport:Pt(At),ajax:function(e,i){"object"==typeof e&&(i=e,e=t),i=i||{};var n,s,o,r,a,l,c,u,h=b.ajaxSetup({},i),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?b(d):b.event,m=b.Deferred(),f=b.Callbacks("once memory"),g=h.statusCode||{},v={},y={},w=0,S="canceled",C={readyState:0,getResponseHeader,getAllResponseHeaders,setRequestHeader,overrideMimeType,statusCode,abort};if(m.promise(C).complete=f.add,C.success=C.done,C.error=C.fail,h.url=((e||h.url||mt)+"").replace(vt,"").replace(St,pt[1]+"//"),h.type=i.method||i.type||h.method||h.type,h.dataTypes=b.trim(h.dataType||"*").toLowerCase().match(T)||[""],null==h.crossDomain&&(n=Tt.exec(h.url.toLowerCase()),h.crossDomain=!(!n||n[1]===pt[1]&&n[2]===pt[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(pt[3]||("http:"===pt[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=b.param(h.data,h.traditional)),It(Et,h,i,C),2===w)return C;for(s in(l=h.global)&&0==b.active++&&b.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!bt.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(gt.test(o)?"&":"?")+h.data,delete h.data),!1===h.cache&&(h.url=yt.test(o)?o.replace(yt,"$1_="+ft++):o+(gt.test(o)?"&":"?")+"_="+ft++)),h.ifModified&&(b.lastModified[o]&&C.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&C.setRequestHeader("If-None-Match",b.etag[o])),(h.data&&h.hasContent&&!1!==h.contentType||i.contentType)&&C.setRequestHeader("Content-Type",h.contentType),C.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+kt+"; q=0.01":""):h.accepts["*"]),h.headers)C.setRequestHeader(s,h.headers[s]);if(h.beforeSend&&(!1===h.beforeSend.call(d,C,h)||2===w))return C.abort();for(s in S="abort",{success:1,error:1,complete:1})C[s](h[s]);if(c=It(At,h,i,C)){C.readyState=1,l&&p.trigger("ajaxSend",[C,h]),h.async&&h.timeout>0&&(a=setTimeout((function(){C.abort("timeout")}),h.timeout));try{w=1,c.send(v,E)}catch(e){if(!(2>w))throw e;E(-1,e)}}else E(-1,"No Transport");function E(e,i,n,s){var u,v,y,S,T,E=i;2!==w&&(w=2,a&&clearTimeout(a),c=t,r=s||"",C.readyState=e>0?4:0,u=e>=200&&300>e||304===e,n&&(S=function(e,i,n){var s,o,r,a,l=e.contents,c=e.dataTypes;for(;"*"===c[0];)c.shift(),o===t&&(o=e.mimeType||i.getResponseHeader("Content-Type"));if(o)for(a in l)if(l[a]&&l[a].test(o)){c.unshift(a);break}if(c[0]in n)r=c[0];else{for(a in n){if(!c[0]||e.converters[a+" "+c[0]]){r=a;break}s||(s=a)}r=r||s}return r?(r!==c[0]&&c.unshift(r),n[r]):t}(h,C,n)),S(h,S,C,u),u?(h.ifModified&&((T=C.getResponseHeader("Last-Modified"))&&(b.lastModified[o]=T),(T=C.getResponseHeader("etag"))&&(b.etag[o]=T)),204===e||"HEAD"===h.type?E="nocontent":304===e?E="notmodified":(E=S.state,v=S.data,u=!(y=S.error))):(y=E,(e||!E)&&(E="error",0>e&&(e=0))),C.status=e,C.statusText=(i||E)+"",u?m.resolveWith(d,[v,E,C]):m.rejectWith(d,[C,E,y]),C.statusCode(g),g=t,l&&p.trigger(u?"ajaxSuccess":"ajaxError",[C,h,u?v:y]),f.fireWith(d,[C,E]),l&&(p.trigger("ajaxComplete",[C,h]),--b.active||b.event.trigger("ajaxStop")))}return C},getJSON,getScript}),b.each(["get","post"],)),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script"}}),b.ajaxPrefilter("script",)),b.ajaxTransport("script",));var Nt=[],Mt=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback}),b.ajaxPrefilter("json jsonp",));var xt,Lt,Ht=0,Dt=e.ActiveXObject&b.ajaxSettings.xhr=e.ActiveXObject:Rt,Lt=b.ajaxSettings.xhr(),b.support.cors=!!Lt&&"withCredentials"in Lt,(Lt=b.support.ajax=!!Lt)&&b.ajaxTransport());var _t,Ft,Bt=/^(?:toggle|show|hide)$/,Vt=RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),$t=/queueHooks$/,zt=],Ut={"*":[function(e,t){var i=this.createTween(e,t),n=i.cur(),s=Vt.exec(t),o=s&&s[3]||(b.cssNumber[e]?"":"px"),r=(b.cssNumber[e]||"px"!==o&&+n)&&Vt.exec(b.css(i.elem,e)),a=1,l=20;if(r&&r[3]!==o){o=o||r[3],s=s||[],r=+n||1;do{r/=a=a||".5",b.style(i.elem,e,r+o)}while(a!==(a=i.cur()/n)&&1!==a&&--l)}return s&&(i.unit=o,i.start=+r||+n||0,i.end=s[1]?r+(s[1]+1)*s[2]:+s[2]),i}]}mation=b.extend(Gt,{tweener,prefilter}),b.Tween=Wt,Wt.prototype={constructor:Wt,init,cur,run},Wt.prototype.init.prototype=Wt.prototype,Wt.propHooks={_default:{get,set}},Wt.propHooks.scrollTop=Wt.propHooks.scrollLeft={set},b.each(["toggle","show","hide"],)),b.fn.extend({fadeTo,animate,stop,finish}),b.each({slideDown:Kt("show"),slideUp:Kt("hide"),slideToggle:Kt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},)),b.speed,b.easing={linear:function(e){return e},swing},b.timers=[],b.fx=Wt.prototype.init,b.fx.tick,b.fx.timer,b.fx.interval=13,b.fx.start,b.fx.stop,b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated),b.fn.offset,b.offset={setOffset},b.fn.extend({position,offsetParent}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},)),b.each({Height:"height",Width:"width"},)),b.fn.size=function(){return this.length},b.fn.andSelf=b.fn.addBack,"object"==typeof module&&"object"==typeof module.exports?module.exports=b:(e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define("jquery",[],)))}(window),function(e){define("underscore",[],(function(){return function(){return function(){var e=this,t=e._,i={},n=Array.prototype,s=Object.prototype,o=Function.prototype,r=n.push,a=n.slice,l=n.concat,c=s.toString,u=s.hasOwnProperty,h=n.forEach,d=n.map,p=n.reduce,m=n.reduceRight,f=n.filter,g=n.every,v=n.some,y=n.indexOf,w=n.lastIndexOf,b=Array.isArray,S=Object.keys,T=o.bind,C;"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=C),exports._=C):e._=C,C.VERSION="1.4.4";var E=C.each=C.forEach;C.map=C.collect;var A="Reduce of empty array with no initial value";C.reduce=C.foldl=C.inject,C.reduceRight=C.foldr,C.find=C.detect,C.filter=C.select,C.reject,C.every=C.all;var k=C.some=C.any;C.contains=C.include,C.invoke,C.pluck,C.where,C.findWhere,C.max,C.min,C.shuffle;var P;C.sortBy;var I;C.groupBy,C.countBy,C.sortedIndex=function(e,t,i,n){for(var s=(i=null==i?C.identity:P(i)).call(n,t),o=0,r=e.length;r>o;){var a=o+r>>>1;s>i.call(n,e[a])?o=a+1:r=a}return o},C.toArray,C.size,C.first=C.head=C.take,C.initial,C.last,C.rest=C.tail=C.drop,C.compact;var O;C.flatten,C.without,C.uniq=C.unique,C.union,C.intersection,C.difference,C.zip,C.object,C.indexOf=function(e,t,i){if(null==e)return-1;var n=0,s=e.length;if(i){if("number"!=typeof i)return e[n=C.sortedIndex(e,t)]===t?n:-1;n=0>i?Math.max(0,s+i):i}if(y&&e.indexOf===y)return e.indexOf(t,i);for(;s>n;n++)if(e[n]===t)return n;return-1},C.lastIndexOf,C.range,C.bind,C.partial,C.bindAll,C.memoize,C.delay,C.defer,C.throttle,C.debounce,C.once,C.wrap,C.compose,C.after,C.keys=S|,C.values,C.pairs,C.invert,C.functions=C.methods,C.extend,C.pick,C.omit,C.defaults,C.clone,C.tap;var N=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof C&&(e=e._wrapped),t instanceof C&&(t=t._wrapped);var s=c.call(e);if(s!=c.call(t))return!1;switch(s){case"[object String]":return e==t+"";case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var o=i.length;o--;)if(i[o]==e)return n[o]==t;i.push(e),n.push(t);var r=0,a=!0;if("[object Array]"==s){if(a=(r=e.length)==t.length)for(;r--&&(a=N(e[r],t[r],i,n)););}else{var l=e.constructor,u=t.constructor;if(l!==u&&!(C.isFunction(l)&&l instanceof l&&C.isFunction(u)&&u instanceof u))return!1;for(var h in e)if(C.has(e,h)&&(r++,!(a=C.has(t,h)&&N(e[h],t[h],i,n))))break;if(a){for(h in t)if(C.has(t,h)&&!r--)break;a=!r}}return i.pop(),n.pop(),a};C.isEqual,C.isEmpty,C.isElement,C.isArray=b|,C.isObject,E(["Arguments","Function","String","Number","Date","RegExp"],)),C.isArguments(arguments)||(C.isArguments),"function"!=typeof/./&&(C.isFunction),C.isFinite,C.isNaN,C.isBoolean,C.isNull,C.isUndefined,C.has,C.noConflict=function(){return e._=t,this},C.identity,C.times,C.random;var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=C.invert(M.escape);var x={escape:RegExp("["+C.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+C.keys(M.unescape).join("|")+")","g")};C.each(["escape","unescape"],)),C.result,C.mixin;var L=0;C.uniqueId,C.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;C.template=function(e,t,i){var n;i=C.defaults({},i,C.templateSettings);var s=RegExp([(i.escape||H).source,(i.interpolate||H).source,(i.evaluate||H).source].join("|")+"|$","g"),o=0,r="__p+='";e.replace(s,)),r+="';\n",i.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{n=Function(i.variable||"obj","_",r)}catch(e){throw e.source=r,e}if(t)return n(t,C);var a;return a.source="function("+(i.variable||"obj")+"){\n"+r+"}",a},C.chain;var _;C.mixin(C),E(["pop","push","reverse","shift","sort","splice","unshift"],)),E(["concat","join","slice"],)),C.extend(C.prototype,{chain,value})}.call(this),e._=function(){return _.templateSettings={evaluate:/\{\%(.+?)\}\}/g,interpolate:/\{\{(.+?)\}\}/g},_}.apply(this,arguments)||_}.apply(e,arguments)}))}(this)(this,(function(e,t,i,n){var s=e.Backbone,o=[],r=o.slice;t.VERSION="1.1.2",t.$=n,t.noConflict,t.emulateHTTP=!1,t.emulateJSON=!1;var a=t.Events={on,once,off,trigger,stopListening},l=/\s+/,c,u;i.each({listenTo:"on",listenToOnce:"once"},)),a.bind=a.on,a.unbind=a.off,i.extend(t,a);var h=t.Model;i.extend(h.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON,sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape,has,set,unset,clear,hasChanged,changedAttributes,previous,previousAttributes,fetch,save,destroy,url,parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew,isValid,_validate});i.each(["keys","values","pairs","invert","pick","omit"],(function(e){h.prototype[e]=function(){var t=r.call(arguments);return t.unshift(this.attributes),i[e].apply(i,t)}}));var d=t.Collection,p={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};i.extend(d.prototype,a,{model:h,initialize:function(){},toJSON,sync,add,remove,set,reset,push,pop,unshift,shift,slice,get,at,where,findWhere,sort,pluck,fetch,create,parse,clone,_reset,_prepareModel,_addReference,_removeReference,_onModelEvent});i.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"],));i.each(["groupBy","countBy","sortBy","indexBy"],));var f=t.View,g=/^(\S+)\s*(.*)$/,v=["model","collection","el","id","attributes","className","tagName","events"];i.extend(f.prototype,a,{tagName:"div",$,initialize:function(){},render,remove,setElement,delegateEvents,undelegateEvents,_ensureElement}),t.sync;var y=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),w={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax;var b=t.Router,S=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,C=/\*\w+/g,E=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(b.prototype,a,{initialize,route,execute,navigate,_bindRoutes,_routeToRegExp,_extractParameters});var A=t.History,k=/^[#\/]|\s+$/g,P=/^\/+|\/+$/g,I=/msie [\w.]+/,O=/\/$/,N=/#.*$/;A.started=!1,i.extend(A.prototype,a,{interval:50,atRoot,getHash,getFragment,start,stop,route,checkUrl,loadUrl,navigate,_updateHash}),t.history=new A;h.extend=d.extend=b.extend=f.extend=A.extend;var M,x;return t})),function(e){define("marionette",["jquery","underscore","backbone"],(function(){return function(){var t=function(e,t,i){"use strict";function n(e,t){var i=new Error(e);throw i.name=t||"Error",i}!function(e,t){var i=e.ChildViewContainer;e.ChildViewContainer=function(e,t){var i;t.extend(i.prototype,{add,findByModel,findByModelCid:function(e){var t=this._indexByModel[e];return this.findByCid(t)},findByCustom,findByIndex,findByCid:function(e){return this._views[e]},remove,call,apply,_updateLength:function(){this.length=t.size(this._views)}});return t.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"],)),i}(0,t),e.ChildViewContainer.VERSION="0.1.4",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=i,this},e.ChildViewContainer}(t,i),function(e,t){var i=e.Wreqr,n=e.Wreqr={};e.Wreqr.VERSION="1.3.1",e.Wreqr.noConflict=function(){return e.Wreqr=i,this},n.Handlers=function(e,t){var i=function(e){this.options=e,this._wreqrHandlers={},t.isFunction(this.initialize)&&this.initialize(e)};return i.extend=e.Model.extend,t.extend(i.prototype,e.Events,{setHandlers,setHandler,hasHandler,getHandler:function(e){var t=this._wreqrHandlers[e];if(t)return},removeHandler,removeAllHandlers:function(){this._wreqrHandlers={}}}),i}(e,t),n.CommandStorage=function(){var i;return t.extend(i.prototype,e.Events,{getCommands,addCommand,clearCommands}),i}(),n.Commands=function(e){return e.Handlers.extend({storageType:e.CommandStorage,constructor:function(t){this.options=t||{},this._initializeStorage(this.options),this.on("handler:add",this._executeCommands,this);var i=Array.prototype.slice.call(arguments);e.Handlers.prototype.constructor.apply(this,i)},execute,_executeCommands,_initializeStorage})}(n),n.RequestResponse=function(e){return e.Handlers.extend({request:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return this.hasHandler(e)?this.getHandler(e).apply(this,t):void 0}})}(n),n.EventAggregator(e,t),n.Channel(),n.radio=function(e){var i;t.extend(i.prototype,{channel,_getChannel,_proxyMethods});var n={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},s=function(e,t,i){return function(n){var s=e._getChannel(n)[t],o=Array.prototype.slice.call(arguments,1);return s[i].apply(s,o)}};return new i}(n),e.Wreqr}(t,i);var s={};t.Marionette=s,s.$=t.$;var o=Array.prototype.slice;return s.extend=t.Model.extend,s.getOption=function(e,t){if(e&&t)return e.options&&t in e.options&&void 0!==e.options[t]?e.options[t]:e[t]},s.normalizeMethods=function(e){var t,n={};return i.each(e,(function(e,s){t=e,i.isFunction(t)||(t=this[t]),t&&(n[s]=t)}),this),n},s.normalizeUIKeys=function(e,t){return void 0!==e?(i.each(i.keys(e),(function(i){var n=/@ui.[a-zA-Z_$0-9]*/g;i.match(n)&&(e[i.replace(n,))]=e[i],delete e[i])})),e):void 0},s.actAsCollection=function(e,t){i.each(["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck"],))},s.triggerMethod=function()var t=/(^|:)(\w)/gi;return function(n){var s="on"+n.replace(t,e),o=this[s];return i.isFunction(this.trigger)&&this.trigger.apply(this,arguments),i.isFunction(o)?o.apply(this,i.tail(arguments)):void 0}}(),s.MonitorDOMRefresh=function(e){function t(e){e._isShown&&e._isRendered&&n(e)&&i.isFunction(e.triggerMethod)&&e.triggerMethod("dom:refresh")return function(e){e.listenTo(e,"show",(function(){!function(e){e._isShown=!0,t(e)}(e)})),e.listenTo(e,"render",(function(){(e)}))}}(document.documentElement),function(e){function t(e,t,s,o){var r=o.split(/\s+/);i.each(r,(function(i){var o=e[i];o||n("Method '"+i+"' was configured as an event handler, but does not exist."),e.listenTo(t,s,o)}))}function s(e,t,i,n){e.listenTo(t,i,n)unction a(e,t,n,s,o){t&&n&&(i.isFunction(n)&&(n=n.call(e)),i.each(n,)))}e.bindEntityEvents=function(e,i,n){a(e,i,n,s,t)},e.unbindEntityEvents}(s),s.Callbacks,i.extend(s.Callbacks.prototype,{add:function(e,t){this._callbacks.push({cb:e,ctx:t}),this._deferred.done())},run,reset}),s.Controller,s.Controller.extend=s.extend,i.extend(s.Controller.prototype,t.Events,{close:function(){this.stopListening();var e=Array.prototype.slice.call(arguments);this.triggerMethod.apply(this,["close"].concat(e)),this.off()}}),s.Region=function(e){if(this.options=e||{},this.el=s.getOption(this,"el"),this.el||n("An 'el' must be specified for a region.","NoElError"),this.initialize){var t=Array.prototype.slice.apply(arguments);this.initialize.apply(this,t)}},i.extend(s.Region,{buildRegion:function(e,t){var s,o,r=i.isString(e),a=i.isString(e.selector),l=i.isUndefined(e.regionType),c=i.isFunction(e);c||r||a||n("Region must be specified as a Region type, a selector string or an object with selector property"),r&&(s=e),e.selector&&(s=e.selector,delete e.selector),c&&(o=e),!c&&l&&(o=t),e.regionType&&(o=e.regionType,delete e.regionType),(r||c)&&(e={}),e.el=s;var u=new o(e);return e.parentEl&&(u.getEl=function(t){var n=e.parentEl;return i.isFunction(n)&&(n=n()),n.find(t)}),u}}),i.extend(s.Region.prototype,t.Events,{show:function(e,t){this.ensureEl();var n=t||{},o=e.isClosed||i.isUndefined(e.$el),r=e!==this.currentView;return!!!n.preventClose&&r&&this.close(),e.render(),s.triggerMethod.call(this,"before:show",e),i.isFunction(e.triggerMethod)?e.triggerMethod("before:show"):s.triggerMethod.call(e,"before:show"),(r||o)&&this.open(e),this.currentView=e,s.triggerMethod.call(this,"show",e),i.isFunction(e.triggerMethod)?e.triggerMethod("show"):s.triggerMethod.call(e,"show"),this},ensureEl,getEl:function(e){return s.$(e)},open,close:function(){var e=this.currentView;e&&!e.isClosed&&(e.close?e.close():e.remove&&e.remove(),s.triggerMethod.call(this,"close",e),delete this.currentView)},attachView:function(e){this.currentView=e},reset}),s.Region.extend=s.extend,s.RegionManager=function(e){var t=e.Controller.extend({constructor,addRegions:function(e,t){var n={};return i.each(e,(function(e,s){i.isString(e)&&(e={selector:e}),e.selector&&(e=i.defaults({},e,t));var o=this.addRegion(s,e);n[s]=o}),this),n},addRegion:function(t,n){var s,o=i.isObject(n),r=i.isString(n),a=!!n.selector;return s=r||o&&a||i.isFunction(n)?e.Region.buildRegion(n,e.Region):n,this._store(t,s),this.triggerMethod("region:add",t,s),s},get:function(e){return this._regions[e]},removeRegion,removeRegions,closeRegions,close,_store,_remove:function(e,t){t.close(),t.stopListening(),delete this._regions[e],this._setLength(),this.triggerMethod("region:remove",e,t)},_setLength});return e.actAsCollection(t.prototype,"_regions"),t}(s),s.TemplateCache=function(e){this.templateId=e},i.extend(s.TemplateCache,{templateCaches:{},get,clear}),i.extend(s.TemplateCache.prototype,{load:function(){if(this.compiledTemplate)return this.compiledTemplate;var e=this.loadTemplate(this.templateId);return this.compiledTemplate=this.compileTemplate(e),this.compiledTemplate},loadTemplate,compileTemplate:function(e){return i.template(e)}}),s.Renderer={render:function(e,t){return e||n("Cannot render the template since it's false, null or undefined.","TemplateNotFoundError"),("function"==typeof e?e:s.TemplateCache.get(e))(t)}},s.View=t.View.extend({constructor:function(e){i.bindAll(this,"render"),this.options=i.extend({},i.result(this,"options"),i.isFunction(e)?e.call(this):e),this.events=this.normalizeUIKeys(i.result(this,"events")),i.isObject(this.behaviors)&&new s.Behaviors(this),t.View.prototype.constructor.apply(this,arguments),s.MonitorDOMRefresh(this),this.listenTo(this,"show",this.onShowCalled)},triggerMethod:s.triggerMethod,normalizeMethods:s.normalizeMethods,getTemplate:function(){return s.getOption(this,"template")},mixinTemplateHelpers,normalizeUIKeys,configureTriggers:function(){if(this.triggers){var e={},t=this.normalizeUIKeys(i.result(this,"triggers"));return i.each(t,(function(t,n){var s=i.isObject(t),o=s?t.event:t;e[n]=function(e){if(e){var i=e.preventDefault,n=e.stopPropagation,r=s?t.preventDefault:i,a=s?t.stopPropagation:n;r&&i&&i.apply(e),a&&n&&n.apply(e)}var l={view:this,model:this.model,collection:this.collection};this.triggerMethod(o,l)}}),this),e}},delegateEvents,_delegateDOMEvents:function(e){e=e||this.events,i.isFunction(e)&&(e=e.call(this));var n={},s=i.result(this,"behaviorEvents")||{},o=this.configureTriggers();i.extend(n,s,e,o),t.View.prototype.delegateEvents.call(this,n)},undelegateEvents,onShowCalled:function(){},close:function(){if(!this.isClosed){var e=Array.prototype.slice.call(arguments),t=this.triggerMethod.apply(this,["before:close"].concat(e));!1!==t&&(this.isClosed=!0,this.triggerMethod.apply(this,["close"].concat(e)),this.unbindUIElements(),this.remove())}},bindUIElements:function(){if(this.ui){this._uiBindings||(this._uiBindings=this.ui);var e=i.result(this,"_uiBindings");this.ui={},i.each(i.keys(e),),this)}},unbindUIElements}),s.ItemView=s.View.extend({constructor:function(){s.View.prototype.constructor.apply(this,arguments)},serializeData,render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var t=this.getTemplate(),i=s.Renderer.render(t,e);return this.$el.html(i),this.bindUIElements(),this.triggerMethod("render",this),this.triggerMethod("item:rendered",this),this},close:function(){this.isClosed||(this.triggerMethod("item:before:close"),s.View.prototype.close.apply(this,arguments),this.triggerMethod("item:closed"))}}),s.CollectionView=s.View.extend({itemViewEventPrefix:"itemview",constructor:function(){this._initChildViewStorage(),s.View.prototype.constructor.apply(this,arguments),this._initialEvents(),this.initRenderBuffer()},initRenderBuffer,startBuffering,endBuffering:function(){this.isBuffering=!1,this.appendBuffer(this,this.elBuffer),this._triggerShowBufferedChildren(),this.initRenderBuffer()},_triggerShowBufferedChildren:function(){this._isShown&&(i.each(this._bufferedChildren,(function(e){i.isFunction(e.triggerMethod)?e.triggerMethod("show"):s.triggerMethod.call(e,"show")})),this._bufferedChildren=[])},_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this.addChildView),this.listenTo(this.collection,"remove",this.removeItemView),this.listenTo(this.collection,"reset",this.render))},addChildView:function(e){this.closeEmptyView();var t=this.getItemView(e),i=this.collection.indexOf(e);this.addItemView(e,t,i)},onShowCalled:function(){this.children.each((function(e){i.isFunction(e.triggerMethod)?e.triggerMethod("show"):s.triggerMethod.call(e,"show")}))},triggerBeforeRender:function(){this.triggerMethod("before:render",this),this.triggerMethod("collection:before:render",this)},triggerRendered,render,_renderChildren:function(){this.startBuffering(),this.closeEmptyView(),this.closeChildren(),this.isEmpty(this.collection)?this.showEmptyView():this.showCollection(),this.endBuffering()},showCollection,showEmptyView:function(){var e=this.getEmptyView();if(e&&!this._showingEmptyView){this._showingEmptyView=!0;var i=new t.Model;this.addItemView(i,e,0)}},closeEmptyView,getEmptyView:function(){return s.getOption(this,"emptyView")},getItemView:function(){var e=s.getOption(this,"itemView");return e||n("An `itemView` must be specified","NoItemViewError"),e},addItemView:function(e,t,n){var o=s.getOption(this,"itemViewOptions");i.isFunction(o)&&(o=o.call(this,e,n));var r=this.buildItemView(e,t,o);return this.addChildViewEventForwarding(r),this.triggerMethod("before:item:added",r),this.children.add(r),this.renderItemView(r,n),this._isShown&&!this.isBuffering&&(i.isFunction(r.triggerMethod)?r.triggerMethod("show"):s.triggerMethod.call(r,"show")),this.triggerMethod("after:item:added",r),r},addChildViewEventForwarding:function(e){var t=s.getOption(this,"itemViewEventPrefix");this.listenTo(e,"all",(function(){var n=o.call(arguments),r=n[0],a=this.normalizeMethods(this.getItemEvents());n[0]=t+":"+r,n.splice(1,0,e),void 0!==a&&i.isFunction(a[r])&&a[r].apply(this,n),s.triggerMethod.apply(this,n)}),this)},getItemEvents:function(){return i.isFunction(this.itemEvents)?this.itemEvents.call(this):this.itemEvents},renderItemView,buildItemView,removeItemView,removeChildView:function(e){e&&(e.close?e.close():e.remove&&e.remove(),this.stopListening(e),this.children.remove(e)),this.triggerMethod("item:removed",e)},isEmpty,checkEmpty,appendBuffer,appendHtml:function(e,t){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):e.$el.append(t.el)},_initChildViewStorage:function(){this.children=new t.ChildViewContainer},close:function(){this.isClosed||(this.triggerMethod("collection:before:close"),this.closeChildren(),this.triggerMethod("collection:closed"),s.View.prototype.close.apply(this,arguments))},closeChildren}),s.CompositeView=s.CollectionView.extend({constructor,_initialEvents:function(){this.once("render",))},getItemView:function(){var e=s.getOption(this,"itemView")||this.constructor;return e||n("An `itemView` must be specified","NoItemViewError"),e},serializeData:function(){var e={};return this.model&&(e=this.model.toJSON()),e},render,_renderChildren:function(){this.isRendered&&(this.triggerMethod("composite:collection:before:render"),s.CollectionView.prototype._renderChildren.call(this),this.triggerMethod("composite:collection:rendered"))},renderModel:function(){var e={};e=this.serializeData(),e=this.mixinTemplateHelpers(e);var t=this.getTemplate();return s.Renderer.render(t,e)},appendBuffer,appendHtml:function(e,t){e.isBuffering?(e.elBuffer.appendChild(t.el),e._bufferedChildren.push(t)):this.getItemViewContainer(e).append(t.el)},getItemViewContainer:function(e){if("$itemViewContainer"in e)return e.$itemViewContainer;var t,o=s.getOption(e,"itemViewContainer");if(o){var r=i.isFunction(o)?o.call(e):o;(t="@"===r.charAt(0)&&e.ui?e.ui[r.substr(4)]:e.$(r)).length<=0&&n("The specified `itemViewContainer` was not found: "+e.itemViewContainer,"ItemViewContainerMissingError")}else t=e.$el;return e.$itemViewContainer=t,t},resetItemViewContainer}),s.Layout=s.ItemView.extend({regionType:s.Region,constructor,render:function(){return this.isClosed&&this._initializeRegions(),this._firstRender?this._firstRender=!1:this.isClosed||this._reInitializeRegions(),s.ItemView.prototype.render.apply(this,arguments)},close:function(){this.isClosed||(this.regionManager.close(),s.ItemView.prototype.close.apply(this,arguments))},addRegion,addRegions,removeRegion,getRegion:function(e){return this.regionManager.get(e)},_buildRegions,_initializeRegions:function(e){var t;this._initRegionManager(),t=i.isFunction(this.regions)?this.regions(e):this.regions||{},this.addRegions(t)},_reInitializeRegions,_initRegionManager}),s.Behavior=function(e,t){function i(t,i){this.view=i,this.defaults=e.result(this,"defaults")||{},this.options=e.extend({},this.defaults,t),this.$=function(){return this.view.$.apply(this.view,arguments)},this.initialize.apply(this,arguments)}return e.extend(i.prototype,t.Events,{initialize:function(){},close:function(){this.stopListening()},triggerMethod:s.triggerMethod}),i.extend=s.extend,i}(i,t),s.Behaviors=function(e,t){function i(e){this.behaviors=i.parseBehaviors(e,t.result(e,"behaviors")),i.wrap(e,this.behaviors,["bindUIElements","unbindUIElements","delegateEvents","undelegateEvents","behaviorEvents","triggerMethod","setElement","close"])}var n={setElement:function(e,i){e.apply(this,t.tail(arguments,2)),t.each(i,),this)},close:function(e,i){var n=t.tail(arguments,2);e.apply(this,n),t.invoke(i,"close",n)},bindUIElements:function(e,i){e.apply(this),t.invoke(i,e)},unbindUIElements:function(e,i){e.apply(this),t.invoke(i,e)},triggerMethod:function(e,i){var n=t.tail(arguments,2);e.apply(this,n),t.each(i,(function(t){e.apply(t,n)}))},delegateEvents:function(i,n){var s=t.tail(arguments,2);i.apply(this,s),t.each(n,(function(t){e.bindEntityEvents(t,this.model,e.getOption(t,"modelEvents")),e.bindEntityEvents(t,this.collection,e.getOption(t,"collectionEvents"))}),this)},undelegateEvents:function(i,n){var s=t.tail(arguments,2);i.apply(this,s),t.each(n,(function(t){e.unbindEntityEvents(t,this.model,e.getOption(t,"modelEvents")),e.unbindEntityEvents(t,this.collection,e.getOption(t,"collectionEvents"))}),this)},behaviorEvents:function(i,n){var s={},o=t.result(this,"ui");return t.each(n,(function(i,n){var r={},a=t.clone(t.result(i,"events"))||{},l=t.result(i,"ui"),c=t.extend({},o,l);a=e.normalizeUIKeys(a,c),t.each(t.keys(a),(function(e){var s=e+new Array(n+2).join(" "),o=t.isFunction(a[e])?a[e]:i[a[e]];r[s]=t.bind(o,i)})),s=t.extend(s,r)})),s}};return t.extend(i,{behaviorsLookup:function(){throw new Error("You must define where your behaviors are stored. See https://github.com/marionettejs/backbone.marionette/blob/master/docs/marionette.behaviors.md#behaviorslookup")},getBehaviorClass:function(e,n){return e.behaviorClass?e.behaviorClass:t.isFunction(i.behaviorsLookup)?i.behaviorsLookup.apply(this,arguments)[n]:i.behaviorsLookup[n]},parseBehaviors:function(e,n){return t.map(n,(function(t,n){return new(i.getBehaviorClass(t,n))(t,e)}))},wrap}),i}(s,i),s.AppRouter=t.Router.extend({constructor:function(e){t.Router.prototype.constructor.apply(this,arguments),this.options=e||{};var i=s.getOption(this,"appRoutes"),n=this._getController();this.processAppRoutes(n,i),this.on("route",this._processOnRoute,this)},appRoute,_processOnRoute:function(e,t){var n=i.invert(this.appRoutes)[e];i.isFunction(this.onRoute)&&this.onRoute(e,n,t)},processAppRoutes,_getController,_addAppRoute:function(e,t,s){var o=e[s];o||n("Method '"+s+"' was not found on the controller"),this.route(t,s,i.bind(o,e))}}),s.Application=function(e){this._initRegionManager(),this._initCallbacks=new s.Callbacks,this.vent=new t.Wreqr.EventAggregator,this.commands=new t.Wreqr.Commands,this.reqres=new t.Wreqr.RequestResponse,this.submodules={},i.extend(this,e),this.triggerMethod=s.triggerMethod},i.extend(s.Application.prototype,t.Events,{execute,request,addInitializer:function(e){this._initCallbacks.add(e)},start,addRegions:function(e){return this._regionManager.addRegions(e)},closeRegions:function(){this._regionManager.closeRegions()},removeRegion:function(e){this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},module,_initRegionManager:function(){this._regionManager=new s.RegionManager,this.listenTo(this._regionManager,"region:add",)),this.listenTo(this._regionManager,"region:remove",))}}),s.Application.extend=s.extend,s.Module=function(e,t,n){this.moduleName=e,this.options=i.extend({},this.options,n),this.initialize=n.initialize||this.initialize,this.submodules={},this._setupInitializersAndFinalizers(),this.app=t,this.startWithParent=!0,this.triggerMethod=s.triggerMethod,i.isFunction(this.initialize)&&this.initialize(this.options,e,t)},s.Module.extend=s.extend,i.extend(s.Module.prototype,t.Events,{initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start,stop:function(){this._isInitialized&&(this._isInitialized=!1,s.triggerMethod.call(this,"before:stop"),i.each(this.submodules,(function(e){e.stop()})),this._finalizerCallbacks.run(void 0,this),this._initializerCallbacks.reset(),this._finalizerCallbacks.reset(),s.triggerMethod.call(this,"stop"))},addDefinition,_runModuleDefinition,_setupInitializersAndFinalizers}),i.extend(s.Module,{create:function(e,t,n){var s=e,r=o.call(arguments);r.splice(0,3);var a=(t=t.split(".")).length,l=[];return l[a-1]=n,i.each(t,),this),s},_getModule,getClass,_addModuleDefinition,_getStartWithParent,_getDefine,_addStartWithParent}),s}(0,Backbone,_);return e.Marionette=t}.apply(e,arguments)}))}(this),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("socketio",[],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.io=e()}}((function(){return({1:[function(e,t,i){t.exports=e("./lib/")},{"./lib/":2}],2:[function(e,t,i){var n=e("./url"),s=e("socket.io-parser"),o=e("./manager"),r=e("debug")("socket.io-client");t.exports=i=l;var a=i.managers={};function l(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var i,s=n(e),l=s.source,c=s.id;return t.forceNew||t["force new connection"]||!1===t.multiplex?(r("ignoring socket cache for %s",l),i=o(l,t)):(a[c]||(r("new io instance for %s",l),a[c]=o(l,t)),i=a[c]),i.socket(s.path)}i.protocol=s.protocol,i.connect=l,i.Manager=e("./manager"),i.Socket=e("./socket")},{"./manager":3,"./socket":5,"./url":6,debug:10,"socket.io-parser":46}],3:[function(e,t,i){e("./url");var n=e("engine.io-client"),s=e("./socket"),o=e("component-emitter"),r=e("socket.io-parser"),a=e("./on"),l=e("component-bind"),c=(e("object-component"),e("debug")("socket.io-client:manager")),u=e("indexof"),h=e("backo2")t.exports=d,d.prototype.emitAll,d.prototype.updateSocketIds,o(d.prototype),d.prototype.reconnection,d.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},d.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},d.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},d.prototype.reconnectionDelayMax,d.prototype.timeout,d.prototype.maybeReconnectOnOpen,d.prototype.open=d.prototype.connect,d.prototype.onopen,d.prototype.ondata,d.prototype.ondecoded=function(e){this.emit("packet",e)},d.prototype.onerror,d.prototype.socket,d.prototype.destroy,d.prototype.packet,d.prototype.processPacketQueue,d.prototype.cleanup,d.prototype.close=d.prototype.disconnect,d.prototype.onclose,d.prototype.reconnect,d.prototype.onreconnect},{"./on":4,"./socket":5,"./url":6,backo2:7,"component-bind":8,"component-emitter":9,debug:10,"engine.io-client":11,indexof:42,"object-component":43,"socket.io-parser":46}],4:,{}],5:[function(e,t,i){var n=e("socket.io-parser"),s=e("component-emitter"),o=e("to-array"),r=e("./on"),a=e("component-bind"),l=e("debug")("socket.io-client:socket"),c=e("has-binary");t.exports=d;var u={connect:1,connect_error:1,connect_timeout:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1},h=s.prototype.emits(d.prototype),d.prototype.subEvents,d.prototype.open=d.prototype.connect,d.prototype.send,d.prototype.emit,d.prototype.packet,d.prototype.onopen,d.prototype.onclose,d.prototype.onpacket,d.prototype.onevent,d.prototype.ack,d.prototype.onack,d.prototype.onconnect,d.prototype.emitBuffered,d.prototype.ondisconnect,d.prototype.destroy,d.prototype.close=d.prototype.disconnect},{"./on":4,"component-bind":8,"component-emitter":9,debug:10,"has-binary":38,"socket.io-parser":46,"to-array":50}],6:[function(e,t,i){(function(i){var n=e("parseuri"),s=e("debug")("socket.io-client:url");t.exports=function(e,t){var o=e;t=t||i.location;null==e&&(e=t.protocol+"//"+t.host);"string"==typeof e&&("/"==e.charAt(0)&&(e="/"==e.charAt(1)?t.protocol+e:t.hostname+e),/^(https?|wss?):\/\//.test(e)||(s("protocol-less url %s",e),e=void 0!==t?t.protocol+"//"+e:"https://"+e),s("parse %s",e),o=n(e));o.port||(/^(http|ws)$/.test(o.protocol)?o.port="80":/^(http|ws)s$/.test(o.protocol)&&(o.port="443"));return o.path=o.path||"/",o.id=o.protocol+"://"+o.host+":"+o.port,o.href=o.protocol+"://"+o.host+(t&&t.port==o.port?"":":"+o.port),o}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:10,parseuri:44}],7:,{}],8:,{}],9:,{}],10:[function(e,t,i).exports=n,n.names=[],n.skips=[],n.enable,n.disable=function(){n.enable("")},n.humanize,n.enabled;try{window.localStorage&&n.enable(localStorage.debug)}catch(e){}},{}],11:[function(e,t,i){t.exports=e("./lib/")},{"./lib/":12}],12:,{"./socket":13,"engine.io-parser":25}],13:[function(e,t,i){(function(i){var n=e("./transports"),s=e("component-emitter"),o=e("debug")("engine.io-client:socket"),r=e("indexof"),a=e("engine.io-parser"),l=e("parseuri"),c=e("parsejson"),u=e("parseqs")t.exports=h,h.priorWebsocketSuccess=!1,s(h.prototype),h.protocol=a.protocol,h.Socket=h,h.Transport=e("./transport"),h.transports=e("./transports"),h.parser=e("engine.io-parser"),h.prototype.createTransport=function(e){o('creating transport "%s"',e);var t(this.query);return t.EIO=a.protocol,t.transport=e,this.id&&(t.sid=this.id),new n[e]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:t,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized})},h.prototype.open,h.prototype.setTransport,h.prototype.probe,h.prototype.onOpen,h.prototype.onPacket,h.prototype.onHandshake,h.prototype.onHeartbeat,h.prototype.setPing,h.prototype.ping=function(){this.sendPacket("ping")},h.prototype.onDrain,h.prototype.flush,h.prototype.write=h.prototype.send,h.prototype.sendPacket,h.prototype.close,h.prototype.onError,h.prototype.onClose,h.prototype.filterUpgrades}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":14,"./transports":15,"component-emitter":9,debug:22,"engine.io-parser":25,indexof:42,parsejson:34,parseqs:35,parseuri:36}],14:,{"component-emitter":9,"engine.io-parser":25}],15:,{"./polling-jsonp":16,"./polling-xhr":17,"./websocket":19,xmlhttprequest:20}],16:[function(e,t,i){(function(i){var n=e("./polling"),s=e("component-inherit");t.exports=c;var o,r=/\n/g,a=/\\n/g;function l(){s(c,n),c.prototype.supportsBinary=!1,c.prototype.doClose,c.prototype.doPoll,c.prototype.doWrite}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":18,"component-inherit":21}],17:,{"./polling":18,"component-emitter":9,"component-inherit":21,debug:22,xmlhttprequest:20}],18:[function(e,t,i){var n=e("../transport"),s=e("parseqs"),o=e("engine.io-parser"),r=e("component-inherit"),a=e("debug")("engine.io-client:polling");t.exports=c;var l=null!=new(e("xmlhttprequest"))({xdomain:!1}).responseTyper(c,n),c.prototype.name="polling",c.prototype.doOpen=function(){this.poll()},c.prototype.pause,c.prototype.poll,c.prototype.onData,c.prototype.doClose,c.prototype.write,c.prototype.uri},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,xmlhttprequest:20}],19:[function(e,t,i){var n=e("../transport"),s=e("engine.io-parser"),o=e("parseqs"),r=e("component-inherit"),a=e("debug")("engine.io-client:websocket"),l=e("ws")t.exports=c,r(c,n),c.prototype.name="websocket",c.prototype.supportsBinary=!0,c.prototype.doOpen,c.prototype.addEventListeners,"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(c.prototype.onData),c.prototype.write,c.prototype.onClose,c.prototype.doClose,c.prototype.uri,c.prototype.check},{"../transport":14,"component-inherit":21,debug:22,"engine.io-parser":25,parseqs:35,ws:37}],20:,{"has-cors":40}],21:,{}],22:[function(e,t,i)(i=t.exports=e("./debug")).log,i.formatArgs,i.save,i.load=n,i.useColors,i.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],i.formatters.j=function(e){return JSON.stringify(e)},i.enable(n())},{"./debug":23}],23:,{ms:24}],24:[function(e,t,i){var n=1e3,s=6e4,o=60*s,r=24*ot.exports=function(e,t){return t=t||{},"string"==typeof e?function(e){var t=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(e);if(!t)return;var i=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"y":return 315576e5*i;case"days":case"day":case"d":return i*r;case"hours":case"hour":case"h":return i*o;case"minutes":case"minute":case"m":return i*s;case"seconds":case"second":case"s":return i*n;case"ms":return i}}(e):t.long?a(i=e,r,"day")||a(i,o,"hour")||a(i,s,"minute")||a(i,n,"second")||i+" ms"(e);var i}},{}],25:[function(e,t,i){(function(t){var n=e("./keys"),s=e("has-binary"),o=e("arraybuffer.slice"),r=e("base64-arraybuffer"),a=e("after"),l=e("utf8"),c=navigator.userAgent.match(/Android/i),u=/PhantomJS/i.test(navigator.userAgent),h=c||u;i.protocol=3;var d=i.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=n(d),m={type:"error",data:"parser error"},f=e("blob")i.encodePacket=function(e,n,s,o){"function"==typeof n&&(o=n,n=!1),"function"==typeof s&&(o=s,s=null);var r=void 0===e.data?void 0:e.data.buffer||e.data;if(t.ArrayBuffer&&r instanceof ArrayBuffer)return(e,n,o);if(f&&r instanceof t.Blob)return(e,n,o);if(r&&r.base64)return(e,o);var a=d[e.type];return void 0!==e.data&&(a+=s?l.encode(String(e.data)):String(e.data)),o(""+a)},i.encodeBase64Packet,i.decodePacket,i.decodeBase64Packet,i.encodePayload,i.decodePayload,i.encodePayloadAsArrayBuffer,i.encodePayloadAsBlob,i.decodePayloadAsBinary}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:27,"arraybuffer.slice":28,"base64-arraybuffer":29,blob:30,"has-binary":31,utf8:33}],26:,{}],27:,{}],28:,{}],29:,{}],30:[function(e,t,i){(function(e){var i=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,n=function(){try{return 2==new Blob(["hi"]).size}catch(e){return!1}}(),s=i&&i.prototype.append&&i.prototype.getBlobt.exports=n?e.Blob:s?o:void 0}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],31:,{isarray:32}],32:,{}],33:[function(e,t,i){(function(e){!function(n){var s="object"==typeof i&&i,o="object"==typeof t&&t&&t.exports==s&&t,r="object"==typeof e&&e;r.global!==r&&r.window!==r||(n=r);var a,l,c,u=String.fromCharCodection f(){var e,t;if(c>l)throw Error("Invalid byte index");if(c==l)return!1;if(e=255&a[c],c++,0==(128&e))return e;if(192==(224&e)){if((t=(31&e)<<6|m())>=128)return t;throw Error("Invalid continuation byte")}if(224==(240&e)){if((t=(15&e)<<12|m()<<6|m())>=2048)return t;throw Error("Invalid continuation byte")}if(240==(248&e)&&(t=(15&e)<<18|m()<<12|m()<<6|m())>=65536&&t<=1114111)return t;throw Error("Invalid UTF-8 detected")}var g={version:"2.0.0",encode,decode};if(s&&!s.nodeType)if(o)o.exports=g;else{var v={}.hasOwnProperty;for(var y in g)v.call(g,y)&&(s[y]=g[y])}else n.utf8=g}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],34:,{}],35:,{}],36:,{}],37:,{}],38:,{isarray:39}],39:[function(e,t,i){t.exports=e(32)},{}],40:,{global:41}],41:,{}],42:,{}],43:,{}],44:,{}],45:[function(e,t,i){(function(t){var n=e("isarray"),s=e("./is-buffer");i.deconstructPacket,i.reconstructPacket,i.removeBlobs}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":47,isarray:48}],46:[function(e,t,i){var n=e("debug")("socket.io-parser"),s=e("json3"),o=(e("isarray"),e("component-emitter")),r=e("./binary"),a=e("./is-buffer");function l(){rotocol=4,i.types=["CONNECT","DISCONNECT","EVENT","BINARY_EVENT","ACK","BINARY_ACK","ERROR"],i.CONNECT=0,i.DISCONNECT=1,i.EVENT=2,i.ACK=3,i.ERROR=4,i.BINARY_EVENT=5,i.BINARY_ACK=6,i.Encoder=l,i.Decoder=u,l.prototype.encode,o(u.prototype),u.prototype.add,u.prototype.destroy,h.prototype.takeBinaryData,h.prototype.finishedReconstruction},{"./binary":45,"./is-buffer":47,"component-emitter":9,debug:10,isarray:48,json3:49}],47:,{}],48:,{}],49:[function(e,t,i){!function(e){var t,n,s={}.toString,o="object"==typeof JSON&&JSON,r="object"==typeof i&&i&&!i.nodeType&&i;r&&o?(r.stringify=o.stringify,r.parse=o.parse):r=e.JSON=o||{};var a=new Date(-0xc782b5b800cec);try{a=-109252==a.getUTCFullYear()&&0===a.getUTCMonth()&&1===a.getUTCDate()&&10==a.getUTCHours()&&37==a.getUTCMinutes()&&6==a.getUTCSeconds()&&708==a.getUTCMilliseconds()}catch(e){if(!l("json")){var c=l("bug-string-char-index");if(!a)var u=Math.floor,h=[0,31,59,90,120,151,181,212,243,273,304,334],d;(t={}.hasOwnProperty)||(t);var p={boolean:1,number:1,string:1,undefined:1};if(n=function(e,i){var o,r,a,l=0;for(a in(o).prototype.valueOf=0,r=new o)t.call(r,a)&&l++;return o=r=null,l?n=2==l:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],n=function(e,i){var n,o,a="[object Function]"==s.call(e),l=!a&&"function"!=typeof e.constructor&(e,"hasOwnProperty")?e.hasOwnProperty:t;for(n in e)a&&"prototype"==n||!l.call(e,n)||i(n);for(o=r.length;n=r[--o];l.call(e,n)&&i(n));}),n(e,i)},!l("json-stringify")){var m={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},f,g=function(e){var t,i='"',n=0,s=e.length,o=s>10&&c;for(o&&(t=e.split(""));n<s;n++){var r=e.charCodeAt(n);switch(r){case 8:case 9:case 10:case 12:case 13:case 34:case 92:i+=m[r];break;default:if(r<32){i+="\\u00"+f(2,r.toString(16));break}i+=o?t[n]:c?e.charAt(n):e[n]}}return i+'"'},v;r.stringify=function(e,t,i){var n,o,r,a;if("function"==typeof t||"object"==typeof t&&t)if("[object Function]"==(a=s.call(t)))o=t;else if("[object Array]"==a){r={};for(var l,c=0,u=t.length;c<u;l=t[c++],("[object String]"==(a=s.call(l))||"[object Number]"==a)&&(r[l]=1));}if(i)if("[object Number]"==(a=s.call(i))){if((i-=i%1)>0)for(n="",i>10&&(i=10);n.length<i;n+=" ");}else"[object String]"==a&&(n=i.length<=10?i:i.slice(0,10));return v("",((l={})[""]=e,l),o,r,n,"",[])}}if(!l("json-parse")){var y,w,b=String.fromCharCode,S={92:"\\",34:'"',47:"/",98:"\b",116:"  ",110:"\n",102:"\f",114:"\r"},T,C,E,A,k;r.parse}}}(this)},{}],50:,{}]},{},[1])(1)})),define("libs/libs",["mediator","backbone","underscore","jquery","marionette","socketio"],(function(){})),define("app/polyfills",[],(function(){console.table||(console.table=function(){}),Number.isNaN=Number.isNaN||function(e){var t=Number(e);return t!=t},Array.prototype.find=Array.prototype.find|,String.prototype.padStart=String.prototype.padStart|})),define("$eventsDefautLocale",[],(function(){var e={eventCodes:[]};return e.eventCodes[0]="Start First Half",e.eventCodes[1]="Half Time",e.eventCodes[2]="Start 2nd Half",e.eventCodes[3]="Full Time",e.eventCodes[4]="Start 1st Half Extra",e.eventCodes[5]="End 1st Half Extra",e.eventCodes[6]="Start 2nd Half Extra",e.eventCodes[7]="End 2nd Half Extra",e.eventCodes[8]="Start Penalty Shootout",e.eventCodes[9]="Stop Penalty Shootout",e.eventCodes[10]="Start RT1 Team 1",e.eventCodes[11]="Start RT1 Team 2",e.eventCodes[12]="Start RT2 Team 1",e.eventCodes[13]="Start RT2 Team 2",e.eventCodes[14]="Start OT1 Team 1",e.eventCodes[15]="Start OT1 Team 2",e.eventCodes[16]="Start OT2 Team 1",e.eventCodes[17]="Start OT2 Team 2",e.eventCodes[18]="Start PEN Team 1",e.eventCodes[19]="Start PEN Team 2",e.eventCodes[20]="Stop Game",e.eventCodes[128]="Safe Safe",e.eventCodes[129]="Danger",e.eventCodes[132]="Injury Break",e.eventCodes[133]="Players Are Coming Out",e.eventCodes[134]="Players Lined Up",e.eventCodes[135]="National Anthem Singing",e.eventCodes[136]="Shake Hands",e.eventCodes[137]="Flip Coin",e.eventCodes[138]="Minute Of Silent",e.eventCodes[139]="Prize Giving Ceremony",e.eventCodes[140]="Photo Taking",e.eventCodes[141]="Game About To Start",e.eventCodes[142]="Missed Penalty",e.eventCodes[143]="PRC Possible red card",e.eventCodes[144]="PPEN Possible penalty",e.eventCodes[145]="No RC No RC after PRC",e.eventCodes[146]="No Pen No PEN after PPEN",e.eventCodes[147]="Retake Pen Retake Penalty",e.eventCodes[148]="Restart Restart Game (eg after injury break)",e.eventCodes[150]="Next Penalty",e.eventCodes[207]="Possible Free Kick",e.eventCodes[208]="No Free Kick",e.eventCodes[209]="Referee Ball",e.eventCodes[260]="Extra Time Indicates the extra time.",e.eventCodes[262]="Zone Information",e.eventCodes[524]="Jersey Changed",e.eventCodes[1024]="Attack",e.eventCodes[1025]="Corner",e.eventCodes[1026]="Dangerous Attack",e.eventCodes[1027]="Free Kick",e.eventCodes[1028]="Free Kick",e.eventCodes[1029]="Goal",e.eventCodes[1030]="Goal Canceled",e.eventCodes[1031]="Penalty",e.eventCodes[1032]="Red Card",e.eventCodes[1033]="Shot",e.eventCodes[1034]="Yellow Card",e.eventCodes[1039]="Shot On Target",e.eventCodes[1040]="Shot Off Target",e.eventCodes[1041]="Hit Woodwork",e.eventCodes[1042]="Foul",e.eventCodes[1043]="Offside",e.eventCodes[1044]="Kick Off",e.eventCodes[1045]="Yellow / Red Card",e.eventCodes[1046]="Cancel Card",e.eventCodes[1047]="Cancel Red Card",e.eventCodes[1048]="Cancel Yellow Card",e.eventCodes[1049]="Cancel Penalty",e.eventCodes[1050]="Cancel Corner",e.eventCodes[1051]="In Possession",e.eventCodes[1052]="Danger",e.eventCodes[1053]="Goal kick",e.eventCodes[1054]="Throw In",e.eventCodes[1055]="Substitution",e.eventCodes[1056]="Dangerous Shot",e.eventCodes[1057]="Shot Saved",e.eventCodes[1058]="Shot Blocked",e.eventCodes[1059]="Retake Penalty",e.eventCodes[1060]="Missed Penalty",e.eventCodes[1064]="Counter Attack",e.eventCodes[1122]="Injury",e})),define("localisation/csb/default",[],(function(){return{HOME:"Home",AWAY:"Away",ALL:"Total",VS:"-",BACK:"Back",TEMPO:"Tempo",SCORED:"Scored",MISSED:"Missed",UNDER_CONSTRUCTION:"Under Construction",GAME_CANCELLED:"Game Cancelled",GAME_DELAYED:"Game Delayed","PREMATCH->COUNTDOWN":"COUNTDOWN","PREMATCH->STARTS_AT":"STARTS AT","PREMATCH->TODAY":"Today","PREMATCH->ABOUT_TO_START":"Game about to start",MISSING:"Missing",MISSINGMESSAGE:"The page you were looking for could not be found","COMMON->STR->INVALIDUSER":"Sorry - you are not permitted to view this event","COMMON->STR->FAIRUSEBREACH":"Error 123 - please contact the supplier of this video quoting this code","COMMON->STR->NOROLE":"There is an issue with this events settings. Please contact your account representative","COMMON->STR->EVENTOVER":"The event requested has already finished","COMMON->STR->NOENCODER":"Sorry - A stream cannot be found for this event","COMMON->STR->GEOBLOCKED":"This service is restricted to users based in certain geographical regions. Your computer's address indicates that you are viewing the service from outside these regions","COMMON->STR->INVALIDKEY":"Sorry - This player is not allowed","COMMON->STR->INVALIDEVENTID":"Sorry - the event you are trying to watch does not exist","COMMON->STR->INVALIDPARTNERID":"Sorry - the partner does not exist","COMMON->STR->101":"Sorry, the event cannot be displayed – Error 101","COMMON->STR->102":"Sorry, the event cannot be displayed – Error 102","COMMON->STR->103":"Sorry, the event cannot be displayed – Error 103","COMMON->STR->104":"Sorry, the event cannot be displayed – Error 104","COMMON->STR->105":"Sorry, the event cannot be displayed – Error 105","COMMON->STR->ADBLOCK_MSG":"Please disable ad block for the visualisation to work","IH->P1":"P1","IH->P2":"P2","IH->P3":"P3","IH->P4":"P4","IH->OT":"OT","BB->Q1":"Q1","BB->Q2":"Q2","BB->Q3":"Q3","BB->Q4":"Q4","BB->OT":"OT","BB->H1":"H1","BB->H2":"H2","BB->Q1234":"Q1, Q2, Q3, Q4","BB->QUARTERFOUL":"Personal Fouls in Q","BB->HALFFOUL":"Personal Fouls in Half","VB->S1":"S1","VB->S2":"S2","VB->S3":"S3","VB->S4":"S4","VB->S5":"S5","VB->GS":"GS",KST:"Key Stats","KST->TEMPOWAVE":"Tempo Wave","KST->SUMMARY":"Summary","KST->SUMMARY->1ST_TO_SCORE":"1st to Score","KST->SUMMARY->FIRST_TO_SCORE":"First to Score","KST->SUMMARY->AVE_GOALS_SCORED":"Avg Scored","KST->SUMMARY->AVE_GOALS_CONCEDED":"Avg Conceded","KST->SUMMARY->WINS":"Wins","KST->SUMMARY->LOSSES":"Losses","KST->SUMMARY->DRAWS":"Draws","KST->SUMMARY->LEADING_AT_HT":"Leading at Half Time","KST->SUMMARY->LEADING_AT_HT_SHORT":"Leading at HT","KST->SUMMARY->NO-DATA":"SUMMARY DATA IS NOT AVAILABLE","KST->SUMMARY->FREE_THROWS":"Free throws","KST->SUMMARY->1ST_TO_3_GOALS":"1st to 3 goals","KST->SUMMARY->WIN_FIRST_SET":"Win #1 Set","KST->SUMMARY->SAVE_RATE":"Save Rate","KST->INGAME":"In-game",LAST5MINUTES:"Last 5 Minutes",LAST10MINUTES:"Last 10 Minutes",LAST15MINUTES:"Last 15 Minutes","KST->INGAME->NOT_STARTED":"IN GAME STATISTICS AVAILABLE ONCE GAME STARTS",H2H:"Head-to-head",H2HMINI:"H-2-H","H2H->NO_DATA":"HEAD TO HEAD DATA IS NOT AVAILABLE",FORM:"Form","FORM->NO_DATA":"FORM DATA IS NOT AVAILABLE",TEAMS:"Teams","TEAMS->LINE_UP":"Line Up","TEAMS->GOALS":"Goals","TEAMS->ASSISTS":"Assists","TEAMS->MVP":"MVP","TEAMS->FORMATION":"Formation","TEAMS->LINE_UP->SUBSTITUTES":"Substitutes","TEAMS->LINE_UP->REFEREE":"Referee","TEAMS->LINE_UP->ASSISTANTS":"Assistants","TEAMS->LINE_UP->FOURTH_OFFICIAL":"Fourth Official","TEAMS->LINE_UP->NO_DATA":"LINE UP DATA IS NOT AVAILABLE","TEAMS->GOALS->GPG":"Goals Per Game","TEAMS->GOALS->SCR":"SRC","TEAMS->GOALS->NO_DATA":"GOAL DATA IS NOT AVAILABLE","TEAMS->MVP->ASSISTS":"ASSISTS PER GAME","TEAMS->ASSISTS->APG":"Apg","TEAMS->ASSISTS->NO_DATA":"ASSISTS DATA IS NOT AVAILABLE","TEAMS->MVP->HEADER":"% TEAM WINS WHEN PLAYS","TEAMS->MVP->POS":"Pos","TEAMS->MVP->WIN_RATE":"Win Rate","TEAMS->MVP->NO_DATA":"MVP DATA IS NOT AVAILABLE","TEAMS->FORMATION->NO_DATA":"FORMATION DATA IS NOT AVAILABLE","BB->TEAMS->LINE_UP->POSPG":"PG","BB->TEAMS->LINE_UP->POSSG":"SG","BB->TEAMS->LINE_UP->POSC":"SC","BB->TEAMS->LINE_UP->POSSF":"SF","BB->TEAMS->LINE_UP->POSCC":"C","BB->TEAMS->LINE_UP->POSG":"G","BB->TEAMS->LINE_UP->POSFC":"FC","BB->TEAMS->LINE_UP->POSGF":"GF","BB->KST->COMMENTARY->ENDQ1":"End of Q1","BB->KST->COMMENTARY->ENDQ2":"End of Q2","BB->KST->COMMENTARY->ENDQ3":"End of Q3","BB->KST->COMMENTARY->ENDQ4":"End of Q4","BB->NCAA->ENDH1":"End of H1","BB->NCAA->ENDH2":"End of H2","TEAMS->FIELD_GOAL":"Field Goals","TEAMS->FIELD_GOAL->NO_DATA":"FIELD GOAL DATA IS NOT AVAILABLE","TEAMS->PPG":"PPG","TEAMS->PPG->POINTSPERGAME":"Points Per Game","TEAMS->PPG->NO_DATA":"PPG DATA IS NOT AVAILABLE","TEAMS->FREE_THROWS":"Free Throws","TEAMS->FREE_THROWS->NO_DATA":"FREE THROWS DATA IS NOT AVAILABLE","TEAMS->SAVES->HEADER":"Saves Per Game","TEAMS->SAVES_PER_GAME":"Saves","TEAMS->SAVES->NO_DATA":"SAVES DATA IS NOT AVAILABLE","IH->GOALS->PP":"PP","IH->GOALS->PP2":"PP2","IH->GOALS->SH":"SH",COMMENTS:"Commentary","COMMENTS->NOT_STARTED":"COMMENTARY AVAILABLE ONCE GAME STARTS","TEAMS->POINTS->NO_DATA":"POINTS DATA IS NOT AVAILABLE","TEAMS->ACES->NO_DATA":"ACES DATA IS NOT AVAILABLE","TEAMS->KILLS->NO_DATA":"KILLS DATA IS NOT AVAILABLE","TEAMS->POINTS->POINTS":"Points","TEAMS->ACES->ACES":"Aces","TEAMS->KILLS->KILLS":"Kills","STATISTIC->ATTACK":"Attacks","STATISTIC->DANGEROUSATTACK":"Attacks (Dangerous)","STATISTIC->CORNER":"Corners","STATISTIC->FOUL":"Fouls","STATISTIC->FREEKICK":"Freekicks","STATISTIC->DANGEROUSFREEKICK":"Dangerous Free Kicks","STATISTIC->GOALKICK":"Goalkicks","STATISTIC->OFFSIDE":"Offsides","STATISTIC->SHOT":"Shots","STATISTIC->TOTALSHOT":"Total Shots","STATISTIC->SHOTBLOCKED":"Blocked Shots","STATISTIC->SHOTOFFTARGET":"Shots (Off Target)","STATISTIC->SHOTONTARGET":"Shots On Target","STATISTIC->SHOTWOODWORK":"Shots (Woodwork)","STATISTIC->THROWIN":"Throw Ins","STATISTIC->YELLOWCARD":"Yellow Cards","STATISTIC->REDCARD":"Red Cards","STATISTIC->SUBSTITUTION":"Substitutions","STATISTIC->GOAL":"Goals","STATISTIC->MISS":"Misses","STATISTIC->TIMEOUT":"Time Outs","STATISTIC->ACES":"Aces","STATISTIC->SERVICEERROR":"Service errors","STATISTIC->KILL":"Kills","STATISTIC->BLOCK":"Blocks","STATISTIC->OUT":"Outs","STATISTIC->ERROR":"Errors","STATISTIC->PENALTYPOINT":"Penalty points","STATISTIC->PENALTY":"Penalties","STATISTIC->EXPULSION":"Expulsions","STATISTIC->DISQUALIFICATION":"Disqualifications","STATISTIC->RALLYWINNER":"Rally winners","STATISTIC->RALLYERROR":"Rally errors","STATISTIC->POINTS":"Pts","STATISTIC->FTS":"Free Throws","STATISTIC->TECHNICAL":"Total Fouls - Tech","STATISTIC->PERSONAL":"Total Fouls - Pers","STATISTIC->2PTS":"Field Goals 2pt","STATISTIC->3PTS":"Field Goals 3pt","STATISTIC->TIMEOUTS":"Time outs","STATISTIC->DISQUALIFIEDPLAYER":"Disqualified Player","STATISTIC->FOULEDOUT":"Fouled Out","STATISTIC->POINTS_DIFFERENCE":"Points Differance","STATISTIC->RUNNINGPENALTY":"Running Penalties","STATISTIC->PENALTYSHOT":"Penalty Shots","STATISTIC->2MINS":"2 mins","STATISTIC->+2MINS":"+2 mins","STATISTIC->5MINS":"5 mins","STATISTIC->+5MINS":"+5 mins","STATISTIC->FACEOFFWON":"Face Offs Won","STATISTIC->ICING":"Icing","PERIODICALSTATS->GOALS":"Goals","PERIODICALSTATS->CORNERS":"Corners","PERIODICALSTATS->CARDS":"Cards","PERIODICALSTATS->HT->DRAW":"Draw first half","PERIODICALSTATS->HT->WINS":" Wins first half","PERIODICALSTATS->HT->CORNERS":"First half corners","PERIODICALSTATS->HT->CARDS":"First half cards","PERIODICALSTATS->SCOREDFIRST":" scored first","PERIODICALSTATS->SCOREDLAST":" scored last","PERIODICALSTATS->MATCHGOALSOVER":"Match goals over","PERIODICALSTATS->MATCHGOALSUNDER":"Match goals under","PERIODICALSTATS->FT->WINSMATCH":" wins match","PERIODICALSTATS->FT->SECONDHALFCORNERS":"Second half corners","PERIODICALSTATS->FT->SECONDHALFCARDS":"Second half cards","PERIODICALSTATS->FT->MATCHCORNERS":"Match corners","PERIODICALSTATS->FT->MATCHCARDS":"Match cards","PERIODICALSTATS->FT->MATCHDRAW":"Match draw","PERIODICALSTATS->FT->DRAW":"Draw second half","PERIODICALSTATS->FT->WONSECONDHALF":"Won second half","PERIODICALSTATS->OVER":"Over","PERIODICALSTATS->UNDER":"Under","PERIODICALSTATS->FT->GOALSSECONDHALF":"Goals second half","PERIODICALSTATS->MATCH":"Match","PERIODICALSTATS->TOTAL":"Total","PERIODICALSTATS->POINTS":"Points","PERIODICALSTATS->HANDICAP":"Handicap","PERIODICALSTATS->EVEN":"Even","PERIODICALSTATS->ODD":"Odd","PERIODICALSTATS->WIN":"Win","PERIODICALSTATS->WON":"Won","PERIODICALSTATS->DRAW":"Draw","PERIODICALSTATS->HT":"HT","PERIODICALSTATS->FT":"FT","PERIODICALSTATS->ET":"ET","PS->PEN->SCORED":"Penalties scored","PS->PEN->MISSED":"Penalties missed","PS->PEN->WIN":"Won penalty shootout","PERIODICALSTATS->TEAM_WINS_MATCH":"{0} wins match","PERIODICALSTATS->MATCH_HANDICAP_TEAM":"Match handicap {0}","PERIODICALSTATS->TOTAL_MATCH_POINTS":"Total match points","PERIODICALSTATS->TEAM_WINS_LAST_SET":"{0} wins last set","PERIODICALSTATS->TEAM_WINS_SET":"{0} wins","PERIODICALSTATS->SET_HANDICAP_TEAM":"Handicap {0}","PERIODICALSTATS->SET_HANDICAP":"Last set handicap","PERIODICALSTATS->SET_POINTS_LAST":"Last set points","PERIODICALSTATS->SET_POINTS":"Total set points","PERIODICALSTATS->SET_NUMBER":"Set {0}","PERIODICALSTATS->RACE_TO":"Race to {0}","COMMON->STR->MONTH_0":"JANUARY","COMMON->STR->MONTH_1":"FEBRUARY","COMMON->STR->MONTH_2":"MARCH","COMMON->STR->MONTH_3":"APRIL","COMMON->STR->MONTH_4":"MAY","COMMON->STR->MONTH_5":"JUNE","COMMON->STR->MONTH_6":"JULY","COMMON->STR->MONTH_7":"AUGUST","COMMON->STR->MONTH_8":"SEPTEMBER","COMMON->STR->MONTH_9":"OCTOBER","COMMON->STR->MONTH_10":"NOVEMBER","COMMON->STR->MONTH_11":"DECEMBER","COMMON->STR->FULL_TIME":"Full time","PREROLL->SKIP_IN":"Skip advert in","PREROLL->SKIP":"Skip","PREROLL->STARTS_IN":"Broadcast starts in","COMMON->WDAY_0":"Monday","COMMON->WDAY_1":"Tuesday","COMMON->WDAY_2":"Wednesday","COMMON->WDAY_3":"Thursday","COMMON->WDAY_4":"Friday","COMMON->WDAY_5":"Saturday","COMMON->WDAY_6":"Sunday","COMMON->STR->SELECT_MATCH":"Select a match to view","COMMON->STR->IN_PLAY":"In Play","COMMON->STR->IN_PLAY_ONE_ITEM":"In Play","COMMON->STR->NO_MATCHES":"Sorry, no matches to display","COMMON->STR->ALL_ITEMS":"All","COMMON->STR->ALL_LEAGUES":"All leagues","COMMON->STR->UPCOMING":"Upcoming","VB->KST->COMMENTARY->ENDS1":"End of first set","VB->KST->COMMENTARY->ENDS2":"End of second set","VB->KST->COMMENTARY->ENDS3":"End of third set","VB->KST->COMMENTARY->ENDS4":"End of fourth set","VB->KST->COMMENTARY->ENDS5":"End of fifth set","VB->KST->COMMENTARY->ENDGS":"End of Golden Set"}})),define("shared/enums",[],(function(){return{getBorderTi{return[]},TimeToStart:{MoreThanOneHour:0,OneHourOrLess:1,Started:2},PreMatchDisplayModes:{KickOff:1,Countdown:2},CountDownTimeFormat:{DaysHoursMinutes:0,HoursMinutes:1,Minutes:2},LogLevels:{all:0,prod:1,preprod:2,debug:3,redirect:4},StatsValueType:{Int:1,Float:2,Percentage:3,Custom:4},DefaultColors:{Home:"8A45B9",Away:"338ECC"},CollapsedTimerFormat:{MinutesOnly:1,Full:2},Sport:{2:"basketball",1:"soccer",3:"tennis",204:"cricket",11:"snooker",200:"badminton",201:"bandy",202:"beachsoccer",16:"beachvolleyball",203:"boxing",12:"darts",205:"fieldhockey",4:"handball",8:"icehockey",208:"netball",209:"pool",210:"rugbyleague",211:"squash",9:"volleyball"},VideoError:{203:"203 - Error while parsing XML",204:"204 - Cannot load the eventdata",205:"205 - No purchase order found",206:"206 - Event is over",207:"207 - Event has not started yet",208:"208 - Event is geoblocked",209:"209 - User is not logged in",210:"210 - Invalid partner id",211:"211 - Invalid event id",212:"212 - No encoder",213:"213 - Security error",214:"214 - Out of range",215:"215 - Georestricted purchase",216:"216 - Fair use breach",217:"217 - Dvr event expired",218:"218 - Wrong configuration",219:"219 - Invalid key",402:"402 - Full-screen mode error; could not go in or out of full-screen mode",405:"405 - The player did not emit canplay event yet and is not ready to try to go into fullscreen mode",406:"406 - Full-screen mode is not allowed",410:"410 - Smart Stats Overlays feature subscription error",411:"411 - Highlights are not supported for the given fixtureId event",10300:"Please contact support teams quoting error 10300",10310:"Please contact support teams quoting error 10310",10311:"Please contact support teams quoting error 10311",10313:"Please contact support teams quoting error 10313",10314:"Please contact support teams quoting error 10314",10400:"Stream is not live. Please check start and end time of the event",20210:"Stream has not started yet. Please check start time of the event",default:"Unexpected error"}}})),define("$enums",["require","underscore","shared/enums"],(function(e){var t=e("underscore"),i=e("shared/enums");return t.extend(i,{getBorderTickerStates:function(){return[this.TickerStates.HalfTime,this.TickerStates.HalfExtra,this.TickerStates.Finished,this.TickerStates.FinishRegular,this.TickerStates.FinishExtra]},EventsPriority:{goal:0,"red-card":1,"yellow-card":2,substitution:3},GamePeriods:{FirstHalf:"1",SecondHalf:"2",FirstExtra:"3",SecondExtra:"4",Penalties:"5"},TickerStates:{NotStarted:1,FirstHalf:2,HalfTime:4,SecondHalf:8,Finished:16,FinishRegular:32,FirstExtra:64,HalfExtra:128,SecondExtra:256,FinishExtra:512,PenaltyShootout:1024},TickerToGame:{2:"1",8:"2",64:"3",256:"4",1024:"5"},Statistic:{Attack:"attack",DangerousAttack:"dangerous-attack",Corner:"corner",Foul:"foul",FreeKick:"free-kick",DangerousFreeKick:"dangerous-free-kick",GoalKick:"goal-kick",Offside:"offside",Shot:"shot",ShotBlocked:"shot-blocked",ShotOffTarget:"shot-off-target",ShotOnTarget:"shot-on-target",ShotWoodwork:"shot-woodwork",TotalShot:"total-shots",ThrowIn:"throw-in",YellowCard:"yellow-card",RedCard:"red-card",Substitution:"substitution",Goal:"goal",Miss:"miss",Injury:"player-injured"},OvertimeEdgesForPeriod:{1:45,2:90}})})),define("shared/logger",["require","$enums"],(function(e){var t=e("$enums").LogLevels;function i(){if(window.console&&"function"==typeof window.console.log&&(window.console.log.apply(window.console,Array.prototype.slice.call(arguments)),this.callStack)){var e=new Error;console.error(e.stack)}}function n(){var e=new Date;return"["+e.getHours()+":"+e.getMinutes()+":"+e.getSeclStack=!1}return s.prototype.debug=function(){window.logLevel===t.debug&&i.apply(this,arguments)},s.prototype.prod=function(){window.logLevel>=t.prod&&i.apply(this,arguments)},s.prototype.preprod=function(){window.logLevel>=t.preprod&&i.apply(this,arguments)},s.prototype.redirect=function(){if(window.logLevel===t.redirect){var e=Array.prototype.slice.call(arguments);i.apply(this,arguments),$.ajax({method:"POST",url:"http://traderclient.inplayiptv.co.uk/CorsService/cors/log",data:{message:n()+" "+JSON.stringify(e)}})}},s.prototrguments)},s.prototype.toggleCallStack=function(e){this.callStack=e},new s})),define("localisation/manager",["require","$eventsDefautLocale","localisation/csb/default","shared/logger","jquery","underscore","backbone"],(function(e){var t=e("$eventsDefautLocale"),i=e("localisation/csb/default"),n=e("shared/logger"),s=e("jquery"),o=e("underscore"),r=e("backbone"),a=["soccer","basketball","icehockey","volleyball","beachvolleyball"],l=function(){this.csbLocale=i,this.eventLocale=t,this.lang="en","string"==typeof window.sport&&(this.sport=window.sport.toLowerCase()),this.eventsHandled=!1,this.csbHandled=!1};return l.prototype.handleLocaleLoad=function(e){var t=e.type;if(this[t+"Handled"]=!0,e.success)try{var i=JSON.parse(e.data);e.toBeMerged?this.mergeCollections(this[t+"Locale"],i,t):this[t+"Locale"]=i,r.trigger("localisation:loaded")}catch(e){n.always(e)}(this.csbHandled&&this.eventHandled&&this.shouldLoadVisLocale||this.csbHandled&&!this.shouldLoadVisLocale)&&this.bootstrapCallback()},l.prototype.mergeCollections=function(e,t){try{o.extend(e,t)}catch(e){n.debug(e,"could not merge diff localisation")}},l.prototype.loadDiffLocales=function(e,t){this.eventsHandled=!1,this.csbHandled=!1,e?this.loadLocales(this.lang,this.sport,t,e):t()},l.prototype.loadLocales=function(e,t,i,n){this.lang=e,this.sport=t,this.shouldLoadVisLocale=-1!==o.indexOf(a,this.sport);var s=void 0!==n,r=n||"/localisation",l=r+"/csb/"+e+".json",c=r+"/vis/"+t+"/"+e+".json";this.bootstrapCallback=i,this.ajaxRequestLocale(l,"csb",s),this.shouldLoadVisLocale&&this.ajaxRequestLocale(c,"event",s)},l.prototype.ajaxRequestLocale=function(e,t,i){var o=this;s.ajax({url:e,dataType:"text",async:!1,timeout:200,success:function(e){o.handleLocaleLoad({data:e,type:t,success:!0,toBeMerged:i})},error:function(){n.always("failed to load CSB localisation "+e),o.handleLocaleLoad({type:t,success:!1})}})},l.prototype.get=function(e){if("string"==typeof e){if(this.csbLocale[e.toUpperCase()])return this.csbLocale[e.toUpperCase()];if(this.csbLocale!==i&&i[e.toUpperCase()])return i[e.toUpperCase()]}return e},l.prototype.format=function(e,t){var i,n=this.get(e);return o.keys(t).forEach((function(e){if(!(i=new RegExp("{{"+e+"}}","gi")).test(n))return n="",!1;n=n.replace(i,t[e])})),n},l.prototype.getMonthNames=function(){var e;if(!this.monthGenerated)for(this.monthGenerated=!0,this.months=[],e=0;e<12;e++)this.months.push(this.get("COMMON->STR->MONTH_"+e));return this.months},l.prototype.getEventCodeById=function(e){var t,i=(e=parseInt(e,10)).toString();return 4===i.length&&"2"===i.charAt(0)&&(e-=1024),void 0===this.eventLocale.eventCodes[e]?!1!==(t=this.eventCodeGenerator(e))?t:void 0!==this.eventLocale.eventCodes[e]?this.eventLocale.eventCodes[e]:"LOC_NOT_FOUND "+e:(!1===(t=this.eventCodeGenerator(e))&&(t=this.eventLocale.eventCodes[e]),t)},"string"==typeof window.sport&&"soccer"===window.sport.toLowerCase()?l.prototype.eventCodeGenerator=function(e){var t=!1;switch(e){case 142:t=this.eventLocale.eventCodes[1060];break;case 1028:t=this.eventLocale.eventCodes[1027];break;case 20:t=this.eventLocale.eventCodes[3]}return t}:l.prototype.eventCodeGenerator=function(){return!1},new l})),define("shared/utils",["require","localisation/manager"],(function(e){var t=e("localisation/manager");function i(e,t){var i=e.get(t);i&&i.toUpperCase&&e.set(t,i.toUpperCase())}return{isMobile:function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t||/ipad|ios|android|android\s3\.0|xoom|sch-i800|playbook|tablet|kindle/i.test(window.navigator.userAgent.toLowerCase())},findEventInRecent:function(e){if(e||0===e)for(var t=0;t<window.recentEvents.length;t++)if(e===window.recentEvents[t].EventNumber)return window.recentEvents[t];return!1},findEvent195inRecentEvents:function(){for(var e=0;e<window.recentEvents.length;e++)if(195===window.recentEvents[e].EventCodeId)return window.recentEvents[e];return!1},isTrueStr:function(e){return"true"===e||"y"===e},||"n"===e},isTrueParam:function(e){var t=this.splitGetParameters(),i=e.toLowerCase();return!(!t[i]||!this.isTrueStr(t[i]))},isFalseParam:function(e){var t=this.splitGetParameters(),i=e.toLowerCase();return!(!t[i]||!this.isFalseStr(t[i]))},isPremVis:function(){return!0!==window.widgetVisError&&this.shouldBePremVis()},shouldBePremVis:function(){var e="string"==typeof window.sport&&"soccer"===window.sport.toLowerCase();return!(!e||!this.isTrueParam("forcepremium"))||e&&"true"===window.premium&&!this.isFalseParam("premvis")},numberParity:function(e){var i=e%2==0?"EVEN":"ODD";return t.get(i)},fillWindowParamsFromQueryString:function(e){var t=this.splitGetParameters(!0);e.forEach((function(e){if("string"!=typeof e)throw new Error("parameter name must be a string!");window[e]=t[e]||window[e]}))},format:function(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return e.replace(/\{\{|\}\}|\{(\d+)\}/g,(function(e,i){return"{{"===e?"{":"}}"===e?"}":t[i]}))},getVersionPath:function(){var e=document.location.pathname,t=new RegExp("^/(?:csb|animation)/([0-9]{1}\\.[0-9]{1,2})/.+","gi").exec(e);if(Array.isArray(t))return t[1]},splitGetParameters:function(e){for(var t=window.location.search.substr(1).split("&"),i={},n=0;n<t.length;n++)if(t[n].length){var s=t[n].split("=");i[e?s[0]:s[0].toLowerCase()]=decodeURIComponent(s[1])}return i},getHostFromTopReferer:function(e){for(var t,i,n=["performgroup.com","premiumtv.co.uk"],s=0;!t&&s<n.length;)(i=new RegExp("(www.|secure.)?(.*?)."+n[s],"i").exec(e))&&i[2]&&"string"==typeof i[2]?t=i[2]:s++;return-1===["vislocal","visualisation","visualisationpp","visualisationdev","wab-visualisation"].indexOf(t)&&t?t+"."+n[s]:"contdist.performgroup.com"Finite(e)},parseMilliseconds:function(e){var t={};return t.inMilliseconds=e,t.seconds=Math.floor(t.inMilliseconds/1e3),t.minutes=Math.floor(t.seconds/60),t.seconds%=60,t},formPlaytimeString:function(e){return(1===e.minutes.toString().length?"0":"")+e.minutes+"."+(1===e.seconds.toString().length?"0":"")+e.seconds},normalizeDate:function(e){var t=60*e.getTimezoneOffset()*1e3,i=e.valueOf();return new Date(i-t)},convertDate:function(e){var t,i;if(e)return t=new Date(e.substr(0,4),e.substr(5,2)-1,e.substr(8,2),e.substr(11,2),e.substr(14,2),parseInt(e.substr(17),10)),!0===isNaN(t.getDate())&&(t=new Date(parseInt(e.substr(6),10)),i=parseInt(e.substr(20,2),10),!1===isNaN(t.getDate())&&t.setHours(t.getHours()+i)),{date:t,normalized:void 0!==i}},upperCaseModelString:function(e,t){if("object"==typeof t&&t instanceof Array)for(var n=0;n<t.length;n++)i(e,t[n]);else"string"==typeof t&&i(e,t)},prt(2,"0")},formatDate:function(e){return this.prependZero(e.getDate())+"/"+this.prependZero(e.getMonth())+"/"+this.prependZero(e.getYear()%100)},trimString:function(e,t,i){var n="";if("string"==typeof e){var s,o=0;return void 0!==i&&!0===i.enlarge&&(o=1),e.length>t+o?(s=null!=t?t:18,n=e.substr(0,s),void 0!==i&&"string"==typeof i.ending&&(n+=i.ending),n):e}return!1},applyTeamNameRules:function(e){return e?e.replace(/\b(youth)\b/i,"(Yth)").replace(/\b(reserve)\b/i,"(Res)").replace(/\b(women)\b/i,"W").replace(/\b(\s?RSC\s?)\b/gi," ").replace(/\b(\s?AS\s?)\b/gi," ").replace(/\b(\s?SC\s?)\b/gi," ").replace(/\b(\s?FK\s?)\b/gi," ").replace(/\b(\s?FC\s?)\b/gi," ").replace(/\b(\s?FCO\s?)\b/gi," ").replace(/\b(\s?AC\s?)\b/gi," ").replace(/\b(\s?AFC\s?)\b/gi," ").replace(/\b(\s?CS\s?)\b/gi," ").replace(/\b(\s?CA\s?)\b/gi," ").replace(/\b(\s?PFC\s?)\b/gi," ").replace(/\b(\s?NK\s?)\b/gi," ").replace(/\b(\s?HNK\s?)\b/gi," ").replace(/\b(\s?HC\s?)\b/gi," ").replace(/\b(\s?HK\s?)\b/gi," ").replace(/\b(\s?IF\s?)\b/gi," ").replace(/(^\s+|\s+$)/g,""):e},adaptPlayerPosition:function(e){if(e){var t=e.split(" "),i="";return t.forEach((function(e){e&&(i+=e[0].toUpperCase())})),i}return""},toPercentage:function(e){var t=e<1?e.toPrecision(2):e.toPrecision(3),i=t.split(".")[0]+t.split(".")[1];return Math.floor(i)+"%"},toTitleCase:function(e){return e.charAt(0).toUpperCase()+e.substr(1,e.length).toLowerCase()},decorateWithExtraTimeLocale:function(e,t){var i;for(i in e)e.hasOwnProperty(i)&&(e[i]=e[i]+" "+t)},getDeepProperty:function(e,t){if(null!=e&&t&&"string"==typeof t)return t.split(".=e?e:e[t]}),e)},getHiveInitObject:function(){return{name:"init",token:this.splitGetParameters().token||window.validationToken,apptype:"PremCSB",version:window.customerVersion,referer:window.location.href,topReferer:window.topReferer}},isTestMatch:function(){var e="file:"===window.location.protocol,t=null!==String(window.matchId).match(/^TEST_.+_RB$/);return e||t},isMatcBMatch())},isOldWBMatch:function(e){var t=e||window;return!!(t.wbeventid&&!isNaN(parseInt(t.wbeventid,10))&&t.wbeventid>0&&t.wbtoken&&"WBTOKEN"!==t.wbtoken)},isNewWBMatch:function(e){var t=e||this.splitGetParameters();return!(!t.oauthtoken||!t.streamuuid)},idgetvis")},isVideoOnly:function(){var e=this.splitGetParameters();if(window.wbtoken=e.wbtoken||window.wbtoken,this.isTestMatch())return!1;var t=this.isMatchWithVideo()&&this.isTrueParam("streamonly")&&"stats"!==e.defaultview&&"vis"!==e.defaultview&&!this.isTrueParam("visswitch")&&!this.isTrueParam("statsswitch");return this.isTrueParam("videoonly")||t},friendlySportName:function(e,t){if("volleyball"===e.toLowerCase()&&16===parseInt(t,10))return"Beach Volleyball";return{horseracing:"Horse Racing",icehockey:"Ice Hockey",greyhoundracing:"Greyhound Racing",fieldhockey:"Field Hockey",beachsoccer:"Beach Soccer",rugbyleague:"Rugby League"}[e]||this.toTitleCase(e)},getOptaSportName:function(){return"soccer"===window.sport.toLowerCase()?"football":window.sport.toLowerCase()},shouldLoadSoccerWidget:function(){return this.isPremVis()||"soccer"===window.sport.toLowerCase()&&this.isTrueParam("widgetvis")},shouldLoadBasketballWidget:function(){return"basketball"===window.sport.toLowerCase()&&this.isTrueParam("widgetvis")},isOptaFactafacts")},shouldLoadPrematchOptaFacts:function(){return this.shouldLoadSoccerWidget()},shouldLoadKeyStatPremVis()},setTranmOrigin=t},scaleElement(e,t,i){var n="scale("+t+")";i&&(n+=" translate(-50%, -50%)"),e.style.webkitTransform=n,e.style.transform=n,e.style.oTransform=n,e.style.mozTransform=n,e.style.msTransform=n,this.setTransformOrigin(e,"0 0")},scaleVideo(e,t,i){var n=e/t,s=100*n+"%",o=1/n;i.style.transform="scale("+o+")",i.style.width=s,i.style.height=s},applyElementScaling(e,t,i){var n=e/t;1!==n&&this.scaleElement(i,n)},applyCssTransform(e,t,i){e.style.webkitTransform=t,e.style.webkitTransformOrigin=i,e.style.transform=t,e.style.transformOrigin=i,e.style.oTransform=t,e.style.oTransformOrigin=i,e.style.mozTransform=t,e.style.mozTransformOrigin=i,e.style.msTransform=t,e.style.msTransformOrigin=i}}})),define("app/iframe",["require","shared/utils"],(function(e){var t=e("shared/utils");function i(e,i){var n=document.getElementById("footer"),s=document.getElementById("csb-body"),o=document.getElementById("csb-root-container"),r=document.getElementById("content-visualization"),a=e?60:50,l=e?30:50,c=o.classList.contains("body-disabled")?headerDisabled?"0 0":"0 "-l+"px":"0 "+l+"px";t.applyCssTransform(n,"scale("+i+")",c),e&&(r.style.width="600px",t.applyCssTransform(r,"scale("+i+")","0 0")),o.classList.contains("stream-only")||(o.classList.contains("header-disabled")||(s.style.marginTop=a*i-a+"px"),o.classList.contains("footer-disabled")||(s.style.marginBottom=l*i-l+"px"))}function n(e){if("message:height"===e.data){var n=document.getElementById("csb-root-container");n.style.height&&e.source.postMessage("height:"+n.style.height,e.origin)}"width:update"===e.data.target&&e.data.width&&function(e){var n=document.getElementById("csb-root-container"),s=document.getElementById("csb-body"),o=document.getElementById("control-panel"),r=document.getElementById("content-prematch"),a=e/Number(n.style.width.replace("px",""));if(n.style.height=Number(n.style.height.replace("px",""))*a+"px",n.style.width=e+"px",s.style.height=Number(s.style.height.replace("px",""))*a+"px",n.classList.contains("stream-only")){var l=n.classList.contains("stream-only")?0:100;r.style.height=window.clientHeight-l+"px",s.style.margin=0}if(1!==a){var c=e/600,u=document.getElementById("header");u&&t.applyCssTransform(u,"scale("+c+")","0 0"),o&&(o.style.top=-window.clientHeight*c+"px",t.applyCssTransform(o,"scale("+c+")","0 0")),i(n.classList.contains("sport-cricket"),c),document.getElementById("stats-screen-container")&&t.scaleElement(document.getElementById("stats-screen-container"),c,!0),r&&t.applyCssTransform(r,"scale("+c+")","0 0")}}(e.data.width)}return document.getElementById("csb-root-container").classList.contains("sport-cricket")&&i(!0,window.clientWidth/600),{addMessge",n,!1)}}})),define("units/loader",["jquery"],(function(e){var t=e("body"),i=e("body #csb-loading-screen-cements={}}n.prototype.c;return!0},n.prototype.hideLoader=function(){var n=e("#root-container");i.animate({opacity:0},1500,(function(){e(this).hide(),"true"===window.isVis&&n.addClass("loaded"),t.addClass("loaded")}))},n.prototype.showLoader=function(){i.css({opacity:1}).show(),t.removeClass("loaded")},n.prototype.rewLoader()},n.prototype.registerElements=function(e){var t=this,i=function(e){t.elements.hasOwnProperty(e)||(t.elements[e]=!1)};Array.isArray(e)?e.forEach((function(e){i(e)})):"string"==typeof e&&i(e)},n.prototype.changeElementsState=function(e){var t=this,i=function(e){t.elements.hasOwnProperty(e)&&(t.elements[e]=!0,t.checkStatus()&&t.hideLoader())};Array.isArray(e)?n(e){i(e)})):"string"==typeof e&&i(e)},window.loader||(window.loader=new n)})),define("units/StatisticAggregator",["require","underscore","backbone"],(function(e){var t=e("underscore"),i=e("batMinute=0};return n.prototype.getAdaptedStatByName=function(e,i){return{homeValue:t.where(i[e],{direction:"home"}).length,awayValue:t.where(i[e],{direction:"away"}).length}},n.prototype.getStatistic=function(e,i){return t.where(this.statisticContainer[e],{direction:i}).length},n.prototype.adaptEventsToStatistic=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=this.getAdaptedStatByName(i,e));return t},n.prototype.addEvent=function(e,t){var n,s=this.statisticContainer[t];if(void 0===s)return this.generateMessageUpdateObject&&(n=this.generateMessageUpdateObject()),void i.trigger("statistic:not-updated",n);s.push(e),this.eventsCache.push({eventNumber:parseInt(e.eventNumber,10),types:e.typesToBeCashed||[t]}),this.eventsCache.length>20&&this.eventsCache.shift(),e.fromHistory||(this.generateMessageUpdateObject&&(n=this.generateMessageUpdateObject()),i.trigger("statistic:updated",n))},n.prototype.removeEvent=function(e){var i=this;this.findEventInCache(e,(function(n){var s=i.statisticContainer[n];i.statisticContainer[n]=t.without(s,t.findWhere(s,{eventNumber:e.eventNumber}))}))},n.prototype.handlePlayerName=function(e){var i=this;this.findEventInCache(e,(function(n){var s=i.statisticContainer[n],o=t.findWhere(s,{eventNumber:e.eventNumber});e.playerName&&(o.playerName=e.playerName),e.playerNumber&&"00"!==e.playerNumber&&(o.playerNumber=e.playerNumber),e.playerInSubstitution&&(o.inName=e.playerInSubstitution),e.playerOutSubstitution&&(o.outName=e.playerOutSubstitution),e.jerseyInSubstitution&&(o.inNumber=e.jerseyInSubstitution),e.jerseyOutSubstitution&&(o.outNumber=e.jerseyOutSubstitution)}))},n.prototype.findEventInCache=function(e,n){var s=t.where(this.eventsCache,{eventNumber:e.eventNumber});t.each(s,(function(e){var s;t.each(e.types,n,this),this.generateMessageUpdateObject&&(s=this.generateMessageUpdateObject()),i.trigger("statistic:updated",s)}),this)},n.prototype.getCurrenontainer)},n.prototype.getEventsForLastNMinutes=function(e){if(0===e)return this.statisticContainer;var t={};for(var i in this.statisticContainer)if(this.statisticContainer.hasOwnProperty(i)){var n=this.statisticContainer[i].length;if(t[i]=[],0===n)continue;for(var s=this.currentMinute-e,o=n-1;o>=0&&this.statisticContainer[i][o].minutes>s;o--)t[i].push(this.statisticContainer[i][o])}return t},n.prototype.getEventsForPeriod=function(e){var t={};if(!e)return this.statisticContainer;for(var i in this.statisticContainer)if(this.statisticContainer.hasOwnProperty(i)){var n=this.statisticContainer[i].length;if(t[i]=[],0===n)continue;for(var s=n-1;s>=0;s--)+this.statisticContainer[i][s].period==+e&&t[i].push(this.statisticContainer[i][s])}return t},n.prototype.getEventsForRange=function(e){var t={},i=e.overtime;for(var n in this.statisticContainer)if(this.statisticContainer.hasOwnProperty(n)){var s=this.statisticContainer[n].length;if(t[n]=[],0===s)continue;for(var o=s-1;o>=0;o--){var r=this.statisticContainer[n][o].minutes;r>e.from&&(i||r<=e.to)&&t[n].push(this.statisticContainer[n][o])}}return t},n})),define("app/matchContext",["require","backbone","$enums","shared/utils","underscore"],(function(e){var t,i,n=e("backbone"),s=e("$enums"),o=e("shared/utils"),r=e("underscore"),a={awayTeam:"",homeTeam:"",sportName:"",stadiumName:"",leagueName:"",country:"",forcedAwayTeam:"",forcedHomeTeam:"",forcedAwayTeamAbbr:"",forcedHomeTeamAbbr:"",originalAwayTeam:"",originalHomeTeam:"",originalAwayTeamAbbr:"",originalHomeTeamAbbr:"",homeTeamAbbr:"HOM",awayTeamAbbr:"AWA"};return n.on("match:ticker-state",(function e(t){s.TickerToQuarter?a.period=s.TickerToQuarter[t]:n.off("match:ticker-state",e)})),n.on("app:forced-params-strings",(function(e){a.forcedHomeTeam=a.homeTeam=e.homeTeam||"",a.forcedAwayTeam=a.awayTeam=e.awayTeam||"",a.forcedHomeTeamAbbr=a.homeTeamAbbr=e.homeTeamAbbr||o.trimString(o.applyTeamNameRules(a.homeTeam),3).toUpperCase()||"",a.forcedAwayTeamAbbr=a.awayTeamAbbr=e.awayTeamAbbr||o.trimString(o.applyTeamNameRules(a.awayTeam),3).toUpperCase()||"",a.forcedCompetition=e.competitionName||"",a.forcedCountry=e.countryName||"",t=!0,i=!!e.homeTeamAbbr||!!e.awayTeamAbbr})),n.on("app:match-data-received",(function(e){var l,c;a.originalAwayTeam=e.AwayTeam,a.originalHomeTeam=e.HomeTeam,a.originalAwayTeamAbbr=e.AwayTeamAbbr,a.originalHomeTeamAbbr=e.HomeTeamAbbr,t?(a.awayTeam=a.forcedAwayTeam||e.AwayTeam||"AWAY",a.homeTeam=a.forcedHomeTeam||e.HomeTeam||"HOME",a.awayTeamAbbr=a.forcedAwayTeamAbbr||e.AwayTeamAbbr||"AWAY",a.homeTeamAbbr=a.forcedHomeTeamAbbr||e.HomeTeamAbbr||"HOME"):(a.awayTeam=e.AwayTeam||"AWAY",a.homeTeam=e.HomeTeam||"HOME",a.awayTeamAbbr=e.AwayTeamAbbr||"AWAY",a.homeTeamAbbr=e.HomeTeamAbbr||"HOME"),a.awayTeam=a.awayTeam.trim(),a.homeTeam=a.homeTeam.trim(),a.sport=e.SportName||window.sport||"",a.sport=a.sport.replace(/[ -]/g,""),"volleyball"===a.sport.toLowerCase()&&"16"===window.sportId&&(a.sport="Beach Volleyball"),a.stadium=e.StadiumName||window.stadiumName||"",a.league=a.forcedCompetition||e.LeagueName||window.leagueName||"",i||(t?(a.homeTeamAbbr=a.forcedHomeTeam?o.trimString(o.applyTeamNameRules(a.forcedHomeTeam),3).toUpperCase():e.HomeTeamAbbr||o.trimString(o.applyTeamNameRules(a.homeTeam),3).toUpperCase(),a.awayTeamAbbr=a.forcedAwayTeam?o.trimString(o.applyTeamNameRules(a.forcedAwayTeam),3).toUpperCase():e.AwayTeamAbbr||o.trimString(o.applyTeamNameRules(a.awayTeam),3).toUpperCase()):(a.homeTeamAbbr=e.HomeTeamAbbr||o.trimString(o.applyTeamNameRules(a.homeTeam),3).toUpperCase(),a.awayTeamAbbr=e.AwayTeamAbbr||o.trimString(o.applyTeamNameRules(a.awayTeam),3).toUpperCase())),a.country=a.forcedCountry||e.CountryName||window.country||"";var u=r.extend({},e);if(u.HomeTeam=""===a.forcedHomeTeam?a.originalHomeTeam:a.forcedHomeTeam,u.AwayTeam=""===a.forcedAwayTeam?a.originalAwayTeam:a.forcedAwayTeam,u.HomeTeamAbbr=a.homeTeamAbbr,u.AwayTeamAbbr=a.awayTeamAbbr,a.lastMessage=u,a.video={eventId:"WBEVENTID"!==window.wbeventid?window.wbeventid:"",partnerId:"WBPARTNERID"!==window.wbpartnerid?window.wbpartnerid:"",userId:"WBUSERID"!==window.wbuserid?window.wbuserid:""},s.hasOwnProperty("TickerToQuarter")?l=s.TickerToQuarter:s.hasOwnProperty("TickerToSet")&&(l=s.TickerToSet),void 0!==l&&(a.period=l[u.TickerStateId],0===a.period&&(c=u.Timeline)))for(var h=c.length-1;h>=0;h--)if(c[h].P){a.period=Number(c[h].P);break}n.trigger("data:match-context",a)})),a.generateTeamNames=function(){var e={};return e.HomeTeam=a.homeTeam,e.AwayTeam=a.awayTeam,e.HomeTeamAbbr=a.homeTeamAbbr,e.AwayTeamAbbr=a.awayTeamAbbr,e.LeagueName=a.league,e.StadiumName=a.stadium,void 0!==window.mediator&&window.mediator.publish("csb:forced-team-names",e),e},a})),define("$statisticAggregator",["require","$enums","backbone","underscore","localisation/manager","shared/utils","units/StatisticAggregator","app/matchContext"],(function(e){var t=e("$enums"),i=e("backbone"),n=e("underscore"),s=e("localisation/manager"),o=e("shared/utils"),r=e("units/StatisticAggregator"),a=e("app/matchContext");function l(e,t){return-1===t.sentMilestones.indexOf(e)&&(t.sentMilestones.push(e),!0)}function c(e){var t=e.drawText,i=e.winText,n=e.score;return n.homeValue>n.awayValue?a.homeTeam+" "+i:n.awayValue>n.homeValue?a.awayTea.push(t)}function h(e,t){i.trigger("stats:update",e),"undefined"==typeof mediator||t||mediator.publish("stats:update",e)}var d=function(){this.intervalForStats=15,this.minutesToSkip=[45,90,105,120],this.sentMilestones=[],this.initializeData(),this.bindListeners(),this.initializeLocalisation(),this.shotsSubset=[t.Statistic.Shot,t.Statistic.ShotBlocked,t.Statistic.ShotOffTarget,t.Statistic.ShotWoodwork,t.Statistic.ShotOnTarget,t.Statistic.Goal]};return(d.prototype=new r).initializeData=function(){var e;for(e in this.lastSentPeriodicalMinute=0,t.Statistic)t.Statistic.hasOwnProperty(e)&&(this.statisticContainer[t.Statistic[e]]=[]);this.sentMilestones=[]},d.prototype.initializeLocalisation=function(){this.locale={over:s.get("PERIODICALSTATS->OVER"),under:s.get("PERIODICALSTATS->UNDER"),scoredLast:s.get("PERIODICALSTATS->SCOREDLAST"),scoredFirst:s.get("PERIODICALSTATS->SCOREDFIRST"),matchGoalsOver:s.get("PERIODICALSTATS->MATCHGOALSOVER"),matchGoalsUnder:s.get("PERIODICALSTATS->MATCHGOALSUNDER"),goals:s.get("PERIODICALSTATS->GOALS"),cards:s.get("PERIODICALSTATS->CARDS"),corners:s.get("PERIODICALSTATS->CORNERS"),halfTime:s.get("PERIODICALSTATS->HT"),halfDraw:s.get("PERIODICALSTATS->HT->DRAW"),halfWins:s.get("PERIODICALSTATS->HT->WINS"),halfCards:s.get("PERIODICALSTATS->HT->CARDS"),halfCorners:s.get("PERIODICALSTATS->HT->CORNERS"),fullTime:s.get("PERIODICALSTATS->FT"),wonMatch:s.get("PERIODICALSTATS->FT->WINSMATCH"),matchDraw:s.get("PERIODICALSTATS->FT->MATCHDRAW"),matchCards:s.get("PERIODICALSTATS->FT->MATCHCARDS"),matchCorners:s.get("PERIODICALSTATS->FT->MATCHCORNERS"),wonSecondHalf:s.get("PERIODICALSTATS->FT->WONSECONDHALF"),drawSecondHalf:s.get("PERIODICALSTATS->FT->DRAW"),goalsSecondHalf:s.get("PERIODICALSTATS->FT->GOALSSECONDHALF"),secondHalfCards:s.get("PERIODICALSTATS->FT->SECONDHALFCARDS"),secondHalfCorners:s.get("PERIODICALSTATS->FT->SECONDHALFCORNERS"),wonPenaltyShootoutText:s.get("PS->PEN->WIN"),goalsPenaltyShootout:s.get("PS->PEN->SCORED"),missedPenaltyShootout:s.get("PS->PEN->MISSED"),extraTime:s.get("PERIODICALSTATS->ET")},this.minuteToPeriod={15:"00.00'-15.00'",30:"15.01'-30.00'",45:o.format("30.01'-{0}'",this.locale.halfTime),60:o.format("{0}'-60.00'",this.locale.halfTime),75:"60.01'-75.00'",90:o.format("75.01'-{0}'",this.locale.fullTime)}},d.prototype.bindListeners=function(){i.on("game:event",this.handleGameEvent,this),i.on("event:canceled",this.removeEvent,this),i.on("localisation:loaded",(function(){this.initializeLocalisation()}),this),i.on("scoreboard:minutes",(function(e){this.currentMinute=e-1;var t=45!==this.currentMinute&&this.currentMinute<90;this.currentMinute%this.intervalForStats==0&&t&&this.calculatePeriodicalStats(this.currentMinute)}),this),i.on("comments:recalculate-periodical",this.calculatePeriodicalStats,this),i.on("comments:goal-event",this.calculateGoalsOverStats,this),i.on("match:period-end",this.handlePeriodEnd,this)},d.prototype.handlePeriodEnd=function(e){switch(e.type){case"first-half":this.calculatePeriodicalStats(45,{silent:e.fromHistory,overtime:!0}),this.calculateShortBetting(1,s.getEventCodeById(1));break;case"second-half":this.calculatePeriodicalStats(90,{silent:e.fromHistory,overtime:!0}),this.calculateFullBetting(2,s.getEventCodeById(3));break;case"first-extra":this.calculateShortBetting(3,s.getEventCodeById(5));break;case"second-extra":this.calculateFullBetting(4,s.getEventCodeById(7));break;case"penalty-shootout":this.calculatePenaltyBetting(5,s.getEventCodeById(9));break;case"end-of-match":this.calculatePeriodicalStats(e.minutes,{silent:!0,overtime:!0});var t=n.last(this.sentMilestones);this.calculateFullBetting(++t,s.getEventCodeById(20))}},d.prototype.handlePeriodicalFromHistory=function(e){var t=e.minutes-1,i=45!==t&&t<90,n=this.lastSentPeriodicalMinute+this.intervalForStats;i&&t>=n&&this.calculatePeriodicalStats(n,{silent:!0})},d.prototype.handleGameEvent=function(e){e.typesToBeCashed=[e.type],-1!==this.shotsSubset.indexOf(e.type)&&(e.type===t.Statistic.Goal&&(this.statisticContainer[t.Statistic.ShotOnTarget].push(e),e.typesToBeCashed.push(t.Statistic.ShotOnTarget)),this.statisticContainer[t.Statistic.TotalShot].push(e),e.typesToBeCashed.push(t.Statistic.TotalShot)),this.addEvent(e,e.type),e.fromHistory&&this.handlePeriodicalFromHistory(e)},d.prototype.calculateGoalsOverStats=function(e){var i=this.getEventsForPeriod(e.period)[t.Statistic.Goal].length-.5;i>0&&h({data:[o.format("{0} {1} {2}",this.locale.over,i,this.locale.goalsSecondHalf)],type:"goals-over-info",minute:e.minutes,eventNumber:e.eventNumber},e.fromHistory)},d.prototype.calculatePeriodicalStats=function(e,i){if(i=i||{},e>this.lastSentPeriodicalMinute||i.force){var n={data:[],type:"periodical-info"},s=this.getEventsForRange({from:e-this.intervalForStats,to:e,overtime:i.overtime}),r=s[t.Statistic.YellowCard].length+s[t.Statistic.RedCard].length,a=s[t.Statistic.Corner].length,l=s[t.Statistic.Goal].length;this.lastSentPeriodicalMinute=e,n.header=this.minuteToPeriod[e],n.minute=e,u(n,o.format("{0} # {1}",this.locale.goals,l)),u(n,o.format("{0} # {1}",this.locale.corners,a)),u(n,o.format("{0} # {1}",this.locale.cards,r)),h(n,i.silent)}},d.prototype.generateMessageUpdateObject=function(){var e={};return e.goals=this.statisticContainer[t.Statistic.Goal],e.substitutions=this.statisticContainer[t.Statistic.Substitution],e.bookings=this.statisticContainer[t.Statistic.YellowCard].concat(this.statisticContainer[t.Statistic.RedCard]),e},d.prototype.calculateShortBetting=function(e,i){if(l(e,this)){var s=3===e,r={wins:this.locale.halfWins,draw:this.locale.halfDraw,firstHalfCorners:this.locale.halfCorners,firstHalfCards:this.locale.halfCards};s&&o.decorateWithExtraTimeLocale(r,this.locale.extraTime);var d,p={data:[],type:"betting-info",header:i},m=this.getEventsForPeriod(e),f=this.statisticContainer[t.Statistic.Goal],g=this.getAdaptedStatByName(t.Statistic.Goal,m),v=m[t.Statistic.YellowCard].length+m[t.Statistic.RedCard].length,y=m[t.Statistic.Corner].length,w=this.locale.matchGoalsUnder+" 0.5",b=c({drawText:r.draw,winText:r.wins,score:g});0!==f.length&&(w=o.format("{0} {1}",this.locale.matchGoalsOver,f.length-.5),fd,10)===e})),d=a[n.first(f).direction+"Team"]+" "+this.locale.scoredFirst),u(p,b),u(p,d),u(p,w),u(p,o.format("{0} #{1}",r.firstHalfCorners,y)),u(p,o.format("{0} #{1}",r.firstHalfCards,v)),h(p)}},d.prototype.calculateFullBetting=function(e,i){if(l(e,this)){var s=4===e,r={wins:this.locale.wonSecondHalf,draw:this.locale.drawSecondHalf,goalsSecondHalf:this.locale.goalsSecondHalf,cornersSecondHalf:this.locale.secondHalfCorners,cardsSecondHalf:this.locale.secondHalfCards};s&&o.decorateWithExtraTimeLocale(r,this.locale.extraTime);var d,p={data:[],type:"betting-info",header:i},m=this.getEventsForPeriod(e),f=this.getAdaptedStatByName(t.Statistic.Goal,m),g=m[t.Statistic.YellowCard].length+m[t.Statistic.RedCard].length,v=m[t.Statistic.Corner].length,y=this.getAdaptedStatByName(t.Statistic.Goal,this.statisticContainer),w=this.statisticContainer[t.Statistic.Corner].length,b=this.statisticContainer[t.Statistic.YellowCard].length+this.statisticContainer[t.Statistic.RedCard].length,S=this.locale.matchGoalsUnder+" 0.5",T=this.statisticContainer[t.Statistic.Goal],C=o.format("{0} 0.5 {1}",this.locale.under,r.goalsSecondHalf),E=c({drawText:this.locale.matchDraw,winText:this.locale.wonMatch,score:y}),A=c({drawText:r.draw,winText:r.wins,score:f});0!==T.length&&(d=a[n.last(T).direction+"Team"]+" "+this.locale.scoredLast,S=o.format("{0} {1}",this.locale.matchGoalsOver,y.homeValue+y.awayValue-.5)),f.homeValue+f.awayValue!==0&&(C=o.format("{0} {1} {2}",this.locale.over,f.homeValue+f.awayValue-.5,r.goalsSecondHalf)),u(p,E),u(p,A),u(p,d),u(p,C),u(p,S),u(p,o.format("{0} #{1}",r.cornersSecondHalf,v)),u(p,o.format("{0} #{1}",r.cardsSecondHalf,g)),u(p,o.format("{0} #{1}",this.locale.matchCorners,w)),u(p,o.format("{0} #{1}",this.locale.matchCards,b)),h(p)}},d.prototype.calculatePenaltyBetting=function(e,i){if(l(e,this)){var n={data:[],type:"betting-info",header:i},s=this.getEventsForPeriod(e),r=this.getAdaptedStatByName(t.Statistic.Goal,s),d=this.getAdaptedStatByName(t.Statistic.Miss,s);u(n,c({winText:this.locale.wonPenaltyShootoutText,score:r})),u(n,o.format("{0} {1} {2}",a.homeTeam,r.homeValue,this.locale.goalsPenaltyShootout)),u(n,o.format("{0} {1} {2}",a.awayTeam,r.awayValue,this.locale.goalsPenaltyShootout)),u(n,o.format("{0} {1} {2}",a.homeTeam,d.homeValue,this.locale.missedPenaltyShootout)),u(n,o.format("{0} {1} {2}",a.awayTeam,d.awayValue,this.locale.missedPenaltyShootout)),h(n)}},new d})),define("units/EventsHandler",["require","backbone","underscore","$statisticAggregator"],(function(e){var t=e("backbone"),i=e("underscore"),n=e("$statisticAggregator"),s=function(){i.extend(this,t.Events),this.homeTeam="home",this.homeTeamAbbr="home",this.awayTeam="away",this.awayTeamAbbr="away",this.counters={},this.messageQueue=[],this.publishedEventNumbers=[],this.listenTo(t,"data:matchyTeamAbbr})),this.listenTo(t,"scoreboard:minutes",(function(e){this.scoreboardMinutes=e})),this.listenTo(t,"scoreboard:playtime",(function(e){this.scoreboardPlaytime=e})),this.listenTo(t,"match:ticker-state",(function(e){this.currentPeriod=e}))};return s.prototype.publishEvent=function(e){var t=e.composedEvent,i=e.event;this.calculateCounters(t),"home"===t.direction?(t.teamName=this.homeTeam,t.teamNameAbbr=this.homeTeamAbbr):(t.teamName=this.awayTeam,t.teamNameAbbr=this.awayTeamAbbr),void 0!==e.minutes&&(t.minutes=e.minutes),!0===i.fromHistory&&(t.fromHistory=!0),this.currentEvent&&(t.eventId=t.eventId||this.currentEvent.eventCodeId)},s.prototype.cancelEvent=function(e){this.calculateCounters(e),t.trigger("event:canceled",e)},s.prototype.calculateCounters=function(e){e.counter=n.getStatistic(e.type,e.direction)+1},s})),define("$eventsHandler",["require","$enums","units/EventsHandler"],(function(e){var t=e("$enums"),i=e("units/EventsHandler"),n={areOn:!1,directionCodes:{1029:"home",1031:"home",1060:"home",2053:"away",2055:"away",2084:"away"},shotCodes:[142,1029,2053,1060,2084],lastDir:void 0};function s(){this.handledPenalties={},Backbone.on("match:penalty-shootout",(function(e){"match:period-start"===e.type&&(n.areOn=!0)})),Backbone.on("match:peareOn=!1)}))}return s.prototype=new i,s.prototype.publishEvent=function(e){var n=e.composedEvent,s=e.minutes,o=t.OvertimeEdgesForPeriod;i.prototype.publishEvent.call(this,e),s&&(n.period&&s>o[n.period]?(n.overtime=s-o[n.period],n.minutes=o[n.period]):n.overtime=0,Backbone.trigger("game:event",n))},s.prototype.process=function(e){var i,s=e.period||t.TickerToGame[e.TickerStateId],o=parseInt(e.eventNumber,10),r=parseInt(e.relatedEventNumber,10),a=e.minutes||this.scoreboardMinutes,l=e.playerNumber||"00",c=e.playerName||"";if(n.areOn){if(n.directionCodes[e.eventCodeId]&&(n.currentDir=n.directionCodes[e.eventCodeId]),~n.shotCodes.indexOf(e.eventCodeId)){if(n.lastDir===n.currentDir)return;n.lastDir=n.currentDir}s=5}switch(this.currentEvent=e,e.eventCodeId){case 1:Backbone.trigger("match:period-end",{type:"first-half",minutes:45,fromHistory:!0,ignoredByMidrolls:!0});break;case 3:Backbone.trigger("match:period-end",{type:"second-half",minutes:90,fromHistory:!0,ignoredByMidrolls:!0});break;case 5:Backbone.trigger("match:period-end",{type:"first-extra",minutes:105,fromHistory:!0,ignoredByMidrolls:!0});break;case 7:Backbone.trigger("match:period-end",{type:"second-extra",minutes:120,fromHistory:!0,ignoredByMidrolls:!0});break;case 9:n.areOn=!1,Backbone.trigger("match:period-end",{type:"penalty-shootout",minutes:120,fromHistory:!0,ignoredByMidrolls:!0});break;case 8:case 18:case 19:n.areOn=!0,Backbone.trigger("match:penalty-shootout",{fromHistory:!0,type:"match:period-start",eventId:8});break;case 0:case 10:case 11:Backbone.trigger("match:first-half",{fromHistory:!0,type:"match:period-start",eventId:0});break;case 2:case 12:case 13:Backbone.trigger("match:second-half",{fromHistory:!0,type:"match:period-start",eventId:2});break;case 4:case 14:case 15:Backbone.trigger("match:first-extra",{fromHistory:!0,type:"match:period-start",eventId:4});break;case 6:case 16:case 17:Backbone.trigger("match:second-extra",{fromHistory:!0,type:"match:period-start",eventId:6});break;case 133:case 137:Backbone.trigger("app:start-video");break;case 256:var u=e.cancelEvents.splitInt(e,10)}));_.each(u,(function(t){this.cancelEvent({eventId:e.eventCodeId,eventNumber:t,period:e.TickerStateId,type:"cancel"})}),this);break;case 1029:i={type:t.Statistic.Goal,direction:"home",tempo:!0};break;case 2053:i={type:t.Statistic.Goal,direction:"away",tempo:!0};break;case 1033:i={type:t.Statistic.Shot,direction:"home",tempo:!0};break;case 2057:i={type:t.Statistic.Shot,direction:"away",tempo:!0};break;case 1034:i={type:t.Statistic.YellowCard,direction:"home",tempo:!0};break;case 2058:i={type:t.Statistic.YellowCard,direction:"away",tempo:!0};break;case 1032:i={type:t.Statistic.RedCard,direction:"home",tempo:!0};break;case 2056:i={type:t.Statistic.RedCard,direction:"away",tempo:!0};break;case 1045:i={type:t.Statistic.YellowCard,direction:"home",eventId:1034,period:s,playerName:c,playerNumber:l,eventNumber:o},this.publishEvent.call(this,{composedEvent:i,event:e,minutes:a}),i={type:t.Statistic.RedCard,direction:"home",eventId:1032};break;case 2069:i={type:t.Statistic.YellowCard,direction:"away",eventId:2058,period:s,playerName:c,playerNumber:l,eventNumber:o},this.publishEvent.call(this,{composedEvent:i,event:e,minutes:a}),i={type:t.Statistic.RedCard,direction:"away",eventId:2056};break;case 1064:i={direction:"home"};break;case 2088:i={direction:"away"};break;case 1055:i={type:t.Statistic.Substitution,direction:"home",jerseyInSubstitution:e.jerseyInSubstitution||"",jerseyOutSubstitution:e.jerseyOutSubstitution||"",playerInSubstitution:e.playerInSubstitution||"",playerOutSubstitution:e.playerOutSubstitution||""};break;case 2079:i={type:t.Statistic.Substitution,direction:"away",jerseyInSubstitution:e.jerseyInSubstitution||"",jerseyOutSubstitution:e.jerseyOutSubstitution||"",playerInSubstitution:e.playerInSubstitution||"",playerOutSubstitution:e.playerOutSubstitution||""};break;case 142:case 1060:case 2084:i={type:t.Statistic.Miss,direction:n.currentDir};break;case 1051:i={direction:"home"};break;case 2075:i={direction:"away"};break;case 1024:i={direction:"home",type:t.Statistic.Attack};break;case 2048:i={direction:"away",type:t.Statistic.Attack};break;case 1025:i={type:t.Statistic.Corner,direction:"home"};break;case 2049:i={type:t.Statistic.Corner,direction:"away"};break;case 1026:i={type:t.Statistic.DangerousAttack,direction:"home"};break;case 2050:i={type:t.Statistic.DangerousAttack,direction:"away"};break;case 1027:i={type:t.Statistic.FreeKick,direction:"home"};break;case 2051:i={type:t.Statistic.FreeKick,direction:"away"};break;case 1028:i={direction:"home",type:t.Statistic.FreeKick};break;case 2052:i={direction:"away",type:t.Statistic.FreeKick};break;case 1031:i={direction:"home",type:"penalty"};break;case 2055:i={direction:"away",type:"penalty"};break;case 1039:i={direction:"home",type:t.Statistic.ShotOnTarget,tempo:!0};break;case 2063:i={direction:"away",type:t.Statistic.ShotOnTarget,tempo:!0};break;case 1040:i={direction:"home",type:t.Statistic.ShotOffTarget,tempo:!0};break;case 2064:i={direction:"away",type:t.Statistic.ShotOffTarget,tempo:!0};break;case 1041:i={direction:"home",type:t.Statistic.ShotWoodwork,tempo:!0};break;case 2065:i={direction:"away",type:t.Statistic.ShotWoodwork,tempo:!0};break;case 1042:i={direction:"home",type:t.Statistic.Foul};break;case 2066:i={direction:"away",type:t.Statistic.Foul};break;case 1043:i={direction:"home",type:t.Statistic.Offside};break;case 2067:i={direction:"away",type:t.Statistic.Offside};break;case 1044:i={direction:"home",type:t.Statistic.KickOff};break;case 2068:i={direction:"away",type:t.Statistic.KickOff};break;case 1053:i={direction:"home",type:t.Statistic.GoalKick};break;case 2077:i={direction:"away",type:t.Statistic.GoalKick};break;case 1054:i={type:t.Statistic.ThrowIn,direction:"home"};break;case 2078:i={type:t.Statistic.ThrowIn,direction:"away"};break;case 1058:i={direction:"home",type:t.Statistic.ShotBlocked,tempo:!0};break;case 2082:i={direction:"away",type:t.Statistic.ShotBlocked,tempo:!0};break;case 1122:i={direction:"home",type:t.Statistic.Injury};break;case 2146:i={direction:"away",type:t.Statistic.Injury};break;case 1030:case 1046:case 1047:case 1048:case 1049:case 1050:this.cancelEvent({eventId:e.eventCodeId,eventNumber:r,direction:"home",type:"cancel",period:e.TickerStateId});break;case 2054:case 2070:case 2071:case 2072:case 2073:case 2074:this.cancelEvent({eventId:e.eventCodeId,eventNumber:r,direction:"away",type:"cancel",period:e.TickerStateId})}void 0!==i&&(i.period=s,i.playerName=c,i.playerNumber=l,i.eventNumber=o,i.eventId=i.eventId||e.eventCodeId,this.publishEvent({composedEvent:i,event:e,minutes:a}))},new s})),define("units/headToHeadHandler",["require","underscore","backbone"],(function(e){var t=e("underscore"),i=e("backbone");function n(){this.mType:e.T}},i.on("app:statistics-received",this.parse,this)}return n.prototype.parse=function(e){if(e&&e.Head2Head){var n=e.Head2Head,s={History:t.map(n.HST,this.mapCallback)};i.trigger("data:head-to-head",s)}},new n})),define("$headToHeadHandler",["require","units/headToHeadHandler")})),define("units/teamColorsHandler",["require","backbone"],(function(e){var t=e("backbone");function i(){this.colorShadingAvailable=void 0!==window.sport&&"volleyball"===window.sport.toLowerCase(),t.on("app:color-data-received",this.parse,this)}return i.prototype.shadeColor=function(e,t){var i=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16);return i=parseInt(i*(100+t)/100,10),n=(n=parseInt(n*(100+t)/100,10))<255?n:255,s=(s=parseInt(s*(100+t)/100,10))<255?s:255,(1===(i=i<255?i:255).toString(16).length?"0"+i.toString(16):i.toString(16))+(1===n.toString(16).length?"0"+n.toString(16):n.toString(16))+(1===s.toString(16).length?"0"+s.toString(16):s.toString(16))},i.prototype.parse=function(e){var i={};e&&(e[0].hasOwnProperty("IHT")&&!0===e[0].IHT?(i.home=this.parseTeamColors(e[0]),i.away=this.parseTeamColors(e[1])):(i.home=this.parseTeamColors(e[1]),i.away=this.parseTeamColors(e[0])),!this.colorShadingAvailable||"FFFFFF"!==i.home.Color1&&"FFFFFF"!==i.home.Color2&&"FFFFFF"!==i.away.Color1&&"FFFFFF"!==i.away.Color2||(i.home.Color1=this.shadeColor(i.home.Color1,-20),i.home.Color2=this.shadeColor(i.home.Color2,-20),i.away.Color1=this.shadeColor(i.away.Color1,-20),i.away.Color2=this.shadeColor(i.away.Color2,-20)),t.trigger("data:team-colors",i))},i.prototype.parseTeamColors=function(e){return{Color1:((e=e||{}).C1||"FFFFFFFF").toUpperCase().substr(2,8),Color2:(e.C2||"FFFFFFFF").toUpperCase().substr(2,8),Pants:(e.P||"FFFFFFFF").toUpperCase().substr(2,8),Socks:(e.S||"FFFFFFFF").toUpperCase().substr(2,8)}},new i})),define("units/summaryHandler",["require","backbone","underscore"],(function(e){var t=e("backbone"),i=e("underscore");function n(){t.on("app:statistics-received",this.parse,this),this.results={}}return n.prototype._adaptStatistic=function(e,t,n){this.results={W:0,L:0,D:0},void 0!==n&&(t=i.where(t,{T:n}));var s=i.bind(this._checkGameResult,this);return i.each(t,s),i.extend(this._adaptSpecificStats(e,t),{averageScored:Number(e.AS),averageConceded:Number(e.AC),wins:this.results.W,losses:this.results.L})},n.prototype._adaptSpecificStats=function(e){return{firstToScore:e.FS,leadingAtHT:e.LH,draws:this.results.D}},n.prototype._checkGameResult=function(e){e.A===e.H?this.results.D++:e.H>e.A&&"H"===e.T||e.A>e.H&&"A"===e.T?this.results.W++:this.results.L++},n.prototype.parse=function(e){if(e&&e.Form&&e.Form.HS&&e.Form.AS){var n=e.Form,s=i.first(n.HM,10),o=i.first(n.AM,10),r={HomeStatistic:{All:(window.isUsSport,this._adaptStatistic(n.HS.AL,s)),Home:window.isUsSport?this._adaptStatistic(n.HS.AW,s,"H"):this._adaptStatistic(n.HS.HO,s,"H")},AwayStatistic:{All:(window.isUsSport,this._adaptStatistic(n.AS.AL,o)),Away:window.isUsSport?this._adaptStatistic(n.AS.HO,o,"A"):this._adaptStatistic(n.AS.AW,o,"A")}};t.trigger("data:summary",r)}},n})),define("$summaryHandler",["require","units/summaryHandler"],(function(e){var t=e("units/summaryHandler");t.prototype._adaptSpecificStats=function(e){return{firstToScore:e.FS,leadingAtHT:e.LH,draws:this.results.D}};var i=new t;return i.results.D=0,i})),define("units/lineupHandler",["require","backbone"],(function(e){var t=e("backbone");function i(){}return i.prototype.bindListeners=function(){t.on("app:lineup-received",this.parse,this)},i.prototype.sorting=function(e){if(void 0!==e.playerNumber){var t=parseInt(e.playerNumber,10)/100,i=e.X||e.playerPosition;if(void 0!==i){var n=this.priorities[i]||7;return n+=t}return t}return e.playerName},i.prototype.sortParsedLineup=function(e){e.AwayLineup=_.sortBy(e.AwayLineup,this.sorting.bind(this)),e.HomeLineup=_.sortBy(e.HomeLineup,this.sorting.bind(this)),e.HomeSubstitutes=_.sortBy(e.HomeSubstitutes,this.sorting.bind(this)),e.AwaySubstitutes=_.sortBy(e.AwaySubstitutes,this.sorting.bind(this)),t.trigger("data:lineup",e)},i})),define("$lineupHandler",["require","shared/utils","units/lineupHandler"],(function(e){var t=e("shared/utils"),i=e("units/lineupHandler");function n(){this.bindListeners(),this.priorities={GK:1,D1:2,D2:2,DM:3,M:4,AM:5,A:6}}return n.prototype=new i,n.prototype.parse=function(e){if(e&&e.Lineup){var i=e.Lineup;i.RF=i.""!==e.RF}));var n={HomeLineup:_.map(i.HLU,(function(e){return{playerName:e.PL,playerNumber:t.prependZero(e.PN),X:e.X,Y:e.Y}})),AwayLineup:_.map(i.ALU,(function(e){return{playerName:e.PL,playerNumber:t.prependZero(e.PN),X:e.X,Y:e.Y}})),HomeSubstitutes:_.map(i.HSUB,(function(e){return{playerName:e.PL,playerNumber:t.prependZero(e.PN)}})),AwaySubstitutes:_.mro(e.PN)}})),MainReferee:[],Assistants:[],Fourth:[],Referees:[]};for(var s in i.RF)if(i.RF[s].RF)n.MainReferee.push({playerName:i.RF[s].RF}),n.Referees.push({playerName:i.RF[s].RF,type:"referee"});else if(i.RF[s].FO)n.Fourth.push({playerName:i.RF[s].FO}),n.Referees.push({playerName:i.RF[s].FO,type:"fourth"});else{var o=i.RF[s].A;if(!o)for(var r=0;r<5;r++)i.RF[s]["A"+r]&&(o=i.RF[s]["A"+r]);o&&(n.Assistants.push({playerName:o}),n.Referees.push({playerName:o,type:"assistant"}))}this.sortParsedLineup(n)}},new n})),define("units/MessageHandler",["require","backbone","underscore","$eventsHandler","shared/utils","$headToHeadHandler","units/teamColorsHandler","$summaryHandler","$lineupHandler"],(function(e){var t=e("backbone"),i=e("underscore"),n=e("$eventsHandler"),s=e("shared/utils");e("$headToHeadHandler"),e("units/teamColorsHandler"),e("$summaryHandler"),e("$lineupHandler");var o=function(){};return o.prototype.binack,this)},o.prototype.initialize=function(){this.matchInfoInitialized_=!1,this.lastEventCodeId_=void 0,this.timelineEventNumbers_=[],this.lastEvents=[],this.timeoutActivated=!1,this.lastProcessedEventNumber=-1},o.prototype.addEvs.shift()},o.prototype.eventShouldBeIgnored=function(e){var t=parseInt(e.EN,10);return t<=this.lastProcessedEventNumber||(this.lastProcessedEventNumber=t,!1)},o.prototype.getReumber:e})},o.prototype.setPlayerName=function(e){void 0!==e.eventNumber&&t.trigger("event:player-name",e)},o.prototype.processTimelineEvents=function(e){for(var o=0;o<e.length;o++)if(!this.eventShouldBeIgnored(e[o])){var r={eventCodeId:e[o].EID,eventNumber:e[o].EN,minutes:e[o].M,counter:e[o].I,seconds:s.parseMilliseconds(e[o].CP).seconds,period:e[o].P,currentPlayTime:e[o].CP,score:e[o].SL,playerName:e[o].PN,playerNumber:e[o].JN,fromHistory:!0};1055!==e[o].EID&&2079!==e[o].EID||i.extend(r,{playerOutSubstitution:e[o].PO,playerInSubstitution:e[o].PI,jerseyOutSubstitution:e[o].JO,jerseyInSubstitution:e[o].JI}),n.process(r)}t.trigger("event:history-handled")},o.prototype.processMatchlized_=!0},o.prototype.processLineup=function(e){t.trigger("app:lineup-received",e)},o.prototype.processMatcheived",e)},o.prototype.processTeamColors=function(e){t.trigger("app:color-data-received",e.TeamColors)},o.prototype.processTeamData=function(e){t.trigger("app:team-data-received",e.TeamData)},o.prototype.procesempoData)},o.prototype.doesEventNeedToBeAdded=function(e){return(0===this.timelineEventNumbers_.length||-1===i.indexOf(this.timelineEventNumbers_,e.EventNumber))&&((3!==e.EventCodeId&&20!==e.EventCodeId||3!==this.lastEventCodeId_&&20!==this.lastEventCodeId_)&&(this.lastEventCodeId_=e.EventCodeId,!0))},o})),define("$messageHandler",["require","backbone","underscore","$eventsHandler","shared/utils","units/MessageHandler","$enums"],(function(e){var t=e("backbone"),i=e("underscore"),n=e("$eventsHandler"),s=e("shared/utils"),o=e("units/MessageHandler"),r=etialize()}return a.prototype=new o,a.prototype.process=function(e){if(!0!==this.matchInfoInitialized_&&this.processMatchInfoEvents(e),void 0===e.Head2Head&&void 0===e.Form||this.processMatchStatistics(e),void 0!==e.TeamColors&&this.processTeamColors(e),void 0!==e.TickerStateId){var o=r.TickerToGame[e.TickerStateId];t.trigger("match:ticker-state",e.TickerStateId),window.mediator&&void 0!==o&&window.mediator.publish("match:period",r.TickerToGame[e.TickerStateId])}void 0!==e.Lineup&&this.processLineup(e),void 0!==e.TeamData&&this.processTeamData(e),void 0!==e.TempoData&&this.processTempoData(e),void 0!==e.CurrentPlaytime&&"true"===e.ClockRunning&&t.trigger("match:current-playtime",e.CurrentPlaytime),e.InPlayFacts&&t.trigger("ipf:message",e.InPlayFacts),void 0!==e.Timeline&&(this.processTimelineEvents(e.Timeline),this.timelineEventNumbers_=i.map(e.Timeline,(function(e){return e.EN})));var a,l=parseInt(e.EventCodeId,10);switch(l){case 1:t.trigger("match:period-end",{type:"first-half",minutes:45,eventCodeId:1,midrollType:2}),this.doesEventNeedToBeAdded(e)&&n.process({eventCodeId:e.EventCodeId,minutes:s.parseMilliseconds(e.CurrentPlaytime).minutes+1});break;case 3:t.trigger("match:period-end",{type:"second-half",minutes:90,eventCodeId:3}),t.trigger("midroll-event",{delay:2,eventCodeId:3,midrollType:3}),this.doesEventNeedToBeAdded(e)&&n.process({eventCodeId:e.EventCodeId,minutes:s.parseMilliseconds(e.CurrentPlaytime).minutes+1});break;case 5:t.trigger("match:period-end",{type:"first-extra",minutes:105,eventCodeId:5,midrollType:4});break;case 7:t.trigger("match:period-end",{type:"second-extra",minutes:120,eventCodeId:7,midrollType:5});break;case 9:t.trigger("match:period-end",{type:"penalty-shootout",minutes:120,eventCodeId:9,midrollType:6});break;case 8:t.trigger("match:penalty-shootout",{type:"match:period-start",eventId:8}),t.trigger("match:penalty-shootout-start",{type:"match:period-start",eventId:8});break;case 18:case 19:t.trigger("match:penalty-shootout",{type:"match:period-start",eventId:8});break;case 0:case 10:case 11:t.trigger("match:first-half",{type:"match:period-start",eventId:0});break;case 2:case 12:case 13:t.trigger("match:second-half",{type:"match:period-start",eventId:2});break;case 4:case 14:case 15:t.trigger("match:first-extra",{type:"match:period-start",eventId:4});break;case 6:case 16:case 17:t.trigger("match:second-extra",{type:"match:period-start",eventId:6});break;case 20:t.trigger("match:stop-game");var c=this.countClosestMilestoneTime(e.CurrentPlaytime);t.trigger("match:period-end",{type:"end-of-match",minutes:c,eventCodeId:20,midrollType:7});break;case 133:case 137:t.trigger("prematch:message",l),n.process({eventCodeId:e.EventCodeId,minutes:s.parseMilliseconds(e.CurrentPlaytime).minutes+1});break;case 134:case 135:case 136:case 138:case 139:case 140:t.trigger("prematch:message",l);break;case 141:t.trigger("prematch:message",l),t.trigger("midroll-event",{delay:3,eventCodeId:141,midrollType:1});break;case 260:t.trigger("match:extra-time");break;case 261:if(void 0===(a=this.getRelatedEvent(Number(e.RelatedEventNumber))))break;this.setPlayerName({eventId:a.eventId,direction:a.direction,eventNumber:Number(e.RelatedEventNumber),playerName:e.PlayerName,playerNumber:e.PlayerNumber,minutes:a.minutes});break;case 283:if(void 0===(a=this.getRelatedEvent(Number(e.RelatedEventNumber))))break;this.setPlayerName({eventId:a.eventId,direction:a.direction,eventNumber:Number(e.RelatedEventNumber),jerseyOutSubstitution:e.JerseyOutSubstitution,jerseyInSubstitution:e.JerseyInSubstitution,playerOutSubstitution:e.PlayerOutSubstitution,playerInSubstitution:e.PlayerInSubstitution,minutes:a.minutes});break;case 1055:case 2079:this.doesEventNeedToBeAdded(e)&&n.process({eventCodeId:e.EventCodeId,TickerStateId:e.TickerStateId,eventNumber:parseInt(e.EventNumber,10),jerseyInSubstitution:e.JerseyInSubstitution,jerseyOutSubstitution:e.JerseyOutSubstitution,playerInSubstitution:e.PlayerInSubstitution,playerOutSubstitution:e.PlayerOutSubstitution,minutes:e.minutes});break;default:this.doesEventNeedToBeAdded(e)&&n.process({eventCodeId:e.EventCodeId,TickerStateId:e.TickerStateId,eventNumber:parseInt(e.EventNumber,10),playerNumber:e.PlayerNumber,playerName:e.PlayerName,minutes:e.minutes,cancelEvents:e.CancelEvents,relatedEventNumber:e.RelatedEventNumber})}},a.prototype.countClosestMilestoneTime=function(e){var t,i,n=[45,90,105,120],o=s.parseMilliseconds(e),r=n.length,a=o.minutes-n[0];for(t=1;t<r&&(i=o.minutes-n[t],(i=Math.abs(i))<a);t++)a=i;return n[t-1]},a})),define("test/dataService",["require","backbone","shared/utils","shared/enums","underscore"],(function(e){var t=e("backbone"),i=e("shared/utils"),n=e("shared/enums"),s=e("underscore"),o=t.Model.extend({defaults:{stadiumName:"Camp Nou",competitionName:"League",homeTeamName:"Home",awayTeam:"Away"}});function r(e,t,n){var s=new Date(e.getTime()+Math.random()*(t.getTime()-e.getTime()));return n?[s.getFullYear(),i.prependZero(s.getMonth()+1),i.prependZero(s.getDate())].j;return i}function l(){}l.prototype.triggerGoals=function(){for(var e=0;e<2;e++)t.trigger("game:event",{eventId:1029,direction:"home",type:"goal",eventNumber:1,minutes:10}),t.trigger("game:event",{eventId:1029,direction:"home",type:"goal",eventNumber:2,minutes:15}),t.trigger("game:event",{eventId:2053,direction:"away",type:"goal",eventNumber:3,minutes:20}),t.trigger("event:canceled",{eventId:1030,eventNumber:3,period:n.TickerStates.FirstHalf})},l.prototype.triggerPenaltyShootoutGoals=function(){for(var e=0;e<2;e++)t.trigger("game:event",{eventId:1029,direction:"home",type:"goal",eventNumber:1,minutes:120,period:n.GamePeriods.Penalties}),t.trigger("game:event",{eventId:2053,direction:"away",type:"goal",eventNumber:3,minutes:120,period:n.GamePeriods.Penalties})},l.prototype.triggerHeadToHead=function(e){var i,n,s=[],o=e||10;if("volleyball"!==window.sport.toLowerCase()&&"beachvolleyball"!==window.sport.toLowerCase())for(var a=0;a<o;a++)s.push({ID:(1e5*Math.random()).toFixed(0),Date:r(new Date(2012,0,1),new Date,!0),Time:"21:00:00",HomeScore:Number((10*Math.random()).toFixed(0)),AwayScore:Number((10*Math.random()).toFixed(0)),Type:a%2==0?"H":"A",ExtraScoreWin:"icehockey"===window.sport.toLowerCase()?a%2==0?"E":"P":""});else for(var l=0;l<o;l++)i=l%3==0?3:1,n=l%3==0?1:3,s.push({ID:(1e5*Math.random()).toFixed(0),Date:r(new Date(2012,0,1),new Date,!0),Time:"16:00:00",HomeScore:i,AwayScore:n,Type:l%2==0?"A":"H"});t.trigger("data:head-to-head",{History:s})},l.prototype.triggerHeadToHead.help="Name: triggerHeadToHead. \n\rDescription : Triggers Head to Head data sending. \n\rOptions: \n\r@itemCount : head to head items count.",l.prototype.matchInfourn new o},l.prototype.triggerSummary=function(){var e={HomeStatistic:[],AwayStatistic:[]};function i(){return{averageScored:Math.random(),averageConceded:Math.random(),firstToScore:Math.random(),leadingAtHT:Math.random(),freeThrowsRate:Math.random(),wins:Math.random(),draws:Math.random(),losses:Math.random(),winFirstSet:Math.random(),saveRate:Math.random(),firstToThreeGoals:Math.random()}}e.HomeStatistic={All:[],Home:[]},e.AwayStatistic={All:[],Away:[]},e.HomeStatistic.All=i(),e.HomeStatistic.Home=i(),e.AwayStatistic.All=i(),e.AwayStatistic.Away=i(),t.trigger("data:summary",e)},l.prototype.triggerSummary.help="Name: triggerSummary. \n\rDescription : Triggers summary data sending. \n\rOptions: \n\r@itemCount : summary items count.",l.prototype.triggerForm=function(){var e,i,ngetDate()};if("volleyball"!==window.sport.toLowerCase()&&"beachvolleyball"!==window.sport.toLowerCase()){for(i=0;i<10;i++)n.push({TN:a(7),LN:a(10),H:(10*Math.random()).toFixed(0),A:(10*Math.random()).toFixed(0),T:a(1,"HA"),DT:o(r(new Date(2012,0,1),new Date))});for(i=0;i<10;i++)s.push({TN:a(7),LN:a(10),H:(10*Math.random()).toFixed(0),A:(10*Math.random()).toFixed(0),T:a(1,"HA"),DT:o(r(new Date(2012,0,1),new Date))})}else n.push({ID:52671,DT:"2014-04-27",H:3,A:2,T:"A",LN:"PlusLiga Kobiet",TN:"BKS Bielsko-Biała"}),n.push({ID:52670,DT:"2014-04-26",H:3,A:0,T:"A",LN:"PlusLiga Kobiet",TN:"BKS Bielsko-Biała"}),n.push({ID:52669,DT:"2014-04-16",H:3,A:1,T:"H",LN:"PlusLiga Kobiet",TN:"BKS Bielsko-Biała"}),n.push({ID:52230,DT:"2014-04-10",H:3,A:1,T:"H",LN:"PlusLiga Kobiet",TN:"Budowlani Łódź"}),n.push({ID:52228,DT:"2014-04-02",H:1,A:3,T:"A",LN:"PlusLiga Kobiet",TN:"Budowlani Łódź"}),n.push({ID:51460,DT:"2014-03-23",H:0,A:3,T:"H",LN:"PlusLiga Kobiet",TN:"Impel Wroclaw"}),n.push({ID:51457,DT:"2014-03-18",H:3,A:0,T:"A",LN:"PlusLiga Kobiet",TN:"Impel Wroclaw"}),n.push({ID:51453,DT:"2014-03-17",H:3,A:0,T:"A",LN:"PlusLiga Kobiet",TN:"Impel Wroclaw"}),s.push({ID:51118,DT:"2014-04-06",H:3,A:0,T:"A",LN:"PlusLiga Kobiet",TN:"PTPS Farmutil Piła"}),s.push({ID:51117,DT:"2014-04-05",H:3,A:0,T:"A",LN:"PlusLiga Kobiet",TN:"PTPS Farmutil Piła"}),s.push({ID:51116,DT:"2014-03-30",H:2,A:3,T:"H",LN:"PlusLiga Kobiet",TN:"PTPS Farmutil Piła"}),s.push({ID:51115,DT:"2014-03-22",H:3,A:1,T:"A",LN:"PlusLiga Kobiet",TN:"PTPS Farmutil Piła"}),s.push({ID:48834,DT:"2014-02-08",H:3,A:0,T:"A",LN:"PlusLiga Kobiet",TN:"Dąbrowa Gornicza"}),s.push({ID:48827,DT:"2014-02-03",H:1,A:3,T:"H",LN:"PlusLiga Kobiet",TN:"Atom Trefl Sopot"}),s.push({ID:48825,DT:"2014-01-27",H:3,A:0,T:"A",LN:"PlusLiga Kobiet",TN:"Siódemka Legionovia"}),s.push({ID:48816,DT:"2014-01-20",H:0,A:3,T:"H",LN:"PlusLiga Kobiet",TN:"Chemik Police"});e={Form:{HM:n,AM:s}},t.trigger("app:statistics-received",e)},l.prototype.triggerForm.help="Name: triggerForm. \n\rDescription : Triggers form data sending. \n\rOptions: \n\r@itemCount : form items count.",l.prototype.triggerLineup2=function(){"soccer"!==window.sport.toLowerCase()&&"icehockey"!==window.sport.toLowerCase()||(this.Lineup={HLU:[{PL:"Karina Morse",PN:59,X:"A"},{PL:"Ford Boone ex",PN:2,X:"AM"},{PL:"Rivera Bridges",PN:1,X:"GK"},{PL:"Spence Ramirez",PN:72,X:"D1"},{PL:"Molina Frye duis",PN:77,X:"LB"},{PL:"Rosanna Mccarty",PN:18,X:"D1"},{PL:"Mcmillan Hurley duis",PN:75,X:"D1"},{PL:"Weeks Solis",PN:87,X:"M"},{PL:"Garcia Luna",PN:35,X:"M"},{PL:"Ayers Hanson ut",PN:78,X:"M"},{PL:"Sonia Joyner",PN:52,X:"A"}],ALU:[{PL:"Franco Burton ea",PN:25,X:"A"},{PL:"Rachel Sanders",PN:51,X:"D2"},{PL:"Le Copeland",PN:3,X:"D2"},{PL:"Brock Everett eu",PN:59,X:"M"},{PL:"Josie Durham",PN:2,X:"DM"},{PL:"Hull Norris",PN:13,X:"M"},{PL:"Larson Clayton",PN:30,X:"M"},{PL:"Pamela Coleman",PN:46,X:"D1"},{PL:"Delores Pollard",PN:63,X:"A"},{PL:"Lucille Daniel eu",PN:66,X:"D1"},{PL:"Crane Davenport",PN:49,X:"GK"}],HSUB:[{PL:"Vickie Ware amet",PN:96,X:"M"},{PL:"Eunice Buck",PN:6,X:"M"},{PL:"Katy Meyer",PN:69,X:"DM"},{PL:"Lucy Larson",PN:24,X:"D1"},{PL:"Casey Vang do",PN:12,X:"D2"}],ASUB:[{PL:"Carolina Benjamin",PN:22,X:"A"},{PL:"Laura Cooper id",PN:93,X:"M"},{PL:"Angelica Burch aute",PN:87,X:"M"},{PL:"Erica Warner et",PN:48,X:"D2"},{PL:"Rosalinda Britt",PN:49,X:"A"},{PL:"Adseeeer Britt",PN:41,X:"DM"}],RF:[]},this.Lineup.RF.push({RF:"Main Referee"}),this.Lineup.RF.push({A1:"Assistant 1"}),this.Lineup.RF.push({A2:"Assistant 2"}),this.Lineup.RF.push({FO:"Fourth"})),t.trigger("app:lineup-received",this)},l.prototype.triggerLineup=function(){"soccer"===window.sport.toLowerCase()||"icehockey"===window.sport.toLowerCase()?(this.Lineup||(this.Lineup={HLU:[{PL:"Karina Morse",PN:59,X:a(2).toUpperCase()},{PL:"Ford Boone ex",PN:2,X:a(2).toUpperCase()},{PL:"Rivera Bridges",PN:1,X:a(2).toUpperCase()},{PL:"Spence Ramirez",PN:72,X:a(2).toUpperCase()},{PL:"Molina Frye duis",PN:77,X:a(2).toUpperCase()},{PL:"Rosanna Mccarty",PN:18,X:a(2).toUpperCase()},{PL:"Mcmillan Hurley duis",PN:75,X:a(2).toUpperCase()},{PL:"Weeks Solis",PN:87,X:a(2).toUpperCase()},{PL:"Garcia Luna",PN:35,X:a(2).toUpperCase()},{PL:"Ayers Hanson ut",PN:78,X:a(2).toUpperCase()},{PL:"Sonia Joyner",PN:52,X:a(2).toUpperCase()}],ALU:[{PL:"Franco Burton ea",PN:25,X:a(2).toUpperCase()},{PL:"Rachel Sanders",PN:51,X:a(2).toUpperCase()},{PL:"Le Copeland",PN:3,X:a(2).toUpperCase()},{PL:"Brock Everett eu",PN:59,X:a(2).toUpperCase()},{PL:"Josie Durham",PN:2,X:a(2).toUpperCase()},{PL:"Hull Norris",PN:13,X:a(2).toUpperCase()},{PL:"Larson Clayton",PN:30,X:a(2).toUpperCase()},{PL:"Pamela Coleman",PN:46,X:a(2).toUpperCase()},{PL:"Delores Pollard",PN:63,X:a(2).toUpperCase()},{PL:"Lucille Daniel eu",PN:66,X:a(2).toUpperCase()},{PL:"Crane Davenport",PN:49,X:a(2).toUpperCase()}],HSUB:[{PL:"Vickie Ware amet",PN:96,X:a(2).toUpperCase()},{PL:"Eunice Buck",PN:6,X:a(2).toUpperCase()},{PL:"Katy Meyer",PN:69,X:a(2).toUpperCase()},{PL:"Lucy Larson",PN:24,X:a(2).toUpperCase()},{PL:"Casey Vang do",PN:12,X:a(2).toUpperCase()}],ASUB:[{PL:"Carolina Benjamin",PN:22,X:a(2).toUpperCase()},{PL:"Laura Cooper id",PN:93,X:a(2).toUpperCase()},{PL:"Angelica Burch aute",PN:87,X:a(2).toUpperCase()},{PL:"Erica Warner et",PN:48,X:a(2).toUpperCase()},{PL:"Rosalinda Britt",PN:48,X:a(2).toUpperCase()},{PL:"Adseeeer Britt",PN:41,X:a(2).toUpperCase()}],RF:[]},this.Lineup.RF.push({RF:"Main Referee"}),this.Lineup.RF.push({A1:"Assistant 1"}),this.Lineup.RF.push({A2:"Assistant 2"}),this.Lineup.RF.push({FO:"Fourth"})),t.trigger("app:lineup-received",this)):"basketball"===window.sport.toLowerCase()?t.trigger("app:lineup-received",{Lineup:{HLU:[{PL:"M. Creek",PN:23,PO:"Point Guard"},{PL:"A. Gibson",PN:1,PO:"Guard"},{PL:"D. Johnson",PN:21,PO:"Power Forward"},{PL:"A. Petrie",PN:17,PO:"Forward"},{PL:"B. Teys",PN:7,PO:"Center"}],ALU:[{PL:"C. Goulding",PN:43,PO:"Center"},{PL:"S. Morrison",PN:13,PO:"Forward"},{PL:"N. Tomlinson",PN:1,PO:"Power Forward"},{PL:"L. Walker",PN:24,PO:"Point Guard"},{PL:"M. Worthington",PN:33,PO:"Guard"}],HSUB:[{PL:"K. Adman",PN:6,PO:"Forward"},{PL:"BJ. Anthony",PN:20,PO:"Power Forward"},{PL:"J. Cadee",PN:4,PO:"Point Guard"},{PL:"R. Carter",PN:15,PO:"Guard"},{PL:"L. Schenscher",PN:10,PO:"Center"},{PL:"D. Sims",PN:8,PO:"Center"}],ASUB:[{PL:"A. Ballinger",PN:54,PO:"Forward"},{PL:"M. Farrakhan",PN:9,PO:"Forward"},{PL:"T. Greer",PN:5,PO:"Center"},{PL:"A. MacMillan",PN:42,PO:"Center"},{PL:"O. Odigie",PN:15,PO:"Point Guard"}],RF:[{RF:"Paul Miller"},{RF:"Edvard Snow"},{RF:"Brew Master"}]}}):"volleyball"!==window.sport.toLowerCase()&&"beachvolleyball"===window.sport.toLowerCase()||t.trigger("app:lineup-received",{Lineup:{HLU:[{PL:"A. Kudakova",PN:7,PO:"Unknown"},{PL:"D. Paszek",PN:9,PO:"Spiker"},{PL:"A. Babicz",PN:11,PO:"Unknown"},{PL:"M. Wawrzyniak",PN:6,PO:"Diagonal"},{PL:"F. Kingsley",PN:13,PO:"Unknown"},{PL:"E. Kajzer",PN:4,PO:"Setter"}],ALU:[{PL:"K. Połeć",PN:5,PO:"Middle"},{PL:"T. Kaliszuk",PN:14,PO:"Spiker"},{PL:"A. Pura",PN:13,PO:"Setter"},{PL:"M. Naczk",PN:12,PO:"Middle"},{PL:"J. Sawoczkina",PN:10,PO:"Setter"},{PL:"P. Głaz",PN:9,PO:"Spiker"}],HSUB:[{PL:"I. Archangielskaja",PN:15,PO:"Setter"},{PL:"M. Hawryła",PN:16,PO:"Middle"},{PL:"N. Krawulska",PN:10,PO:"Spiker"},{PL:"M. Kuehn-Jarek",PN:3,PO:"Libero"},{PL:"J. Kuligowska",PN:2,PO:"Spiker"},{PL:"C. Ward",PN:14,PO:"Unknown"}],ASUB:[{PL:"M. Biedziak",PN:4,PO:"Setter"},{PL:"Z. Czyznielewska",PN:11,PO:"Unknown"},{PL:"K. Dybek",PN:7,PO:"Spiker"},{PL:"M. Skorupa",PN:17,PO:"Middle"},{PL:"K. Szostak",PN:1,PO:"Middle"}],RF:[{RF:"J. Makowski"},(e,t){return e.width<t.width};return l.prototype.triggerLineup.help="Name: triggerLineup. \n\rDescription : Triggers lineup data sending.",l.prototype.triggerTeams=function(e)max(e.homeValue,e.awayValue)}));t=Math.max(t.hom(e,(function(e){e.localMax=t}))}if("soccer"===window.sport.toLowerCase()||"icehockey"===window.sport.toLowerCase()){var o,r={GoalPerGame:[],AssistsPerGame:[],MVPPerGame:[],Saves:[]},l=e||10;for(o=0;o<l;o++)r.GoalPerGame.push({direction:Math.random()>.5?"home":"away",additionValue:"GPG "+Math.random().toFixed(2),width:100*Math.random(),value:+(10*Math.random()).toFixed(0),title:a(10),valueType:n.StatsValueType.Float});for(o=0;o<l;o++)r.AssistsPerGame.push({direction:Math.random()>.5?"home":"away",width:100*Math.random(),value:+(10*Math.random()).toFixed(0),title:a(10),additionValue:"APG "+Math.random().toFixed(2),valueType:n.StatsValueType.Float});for(o=0;o<l;o++)r.MVPPerGame.push({direction:Math.random()>.5?"home":"away",width:100*Math.random(),value:Math.random(),title:a(10),valueType:n.StatsValueType.Percentage});for(o=0;o<l;o++)r.Saves.push({direction:Math.random()>.5?"home":"away",width:100*Math.random(),value:Math.random(),title:a(10),valueType:n.StatsValueType.Float});i(r.GoalPerGame.sort(c)),i(r.AssistsPerGame.sort(c)),i(r.MVPPerGame.sort(c)),i(r.Saves.sort(c)),t.trigger("data:team-data",r)}else"basketball"===window.sport.toLowerCase()?t.trigger("data:team-data",{PointPerGame:[{title:"B. Madgen",value:91,additionValue:"PPG 22.75",direction:"home",width:100},{title:"C. Goulding",value:135,additionValue:"PPG 22.5",direction:"home",width:70},{title:"S. Young",value:63,additionValue:"PPG 21",direction:"away",width:60},{title:"J. Ennis",value:81,additionValue:"PPG 20.25",direction:"away",width:50},{title:"T. Abercrombie",value:72,additionValue:"PPG 18",direction:"away",width:45},{title:"R. Clarke",value:83,additionValue:"PPG 20.75",direction:"home",width:40},{title:"D. Johnson",value:118,additionValue:"PPG 19.67",direction:"home",width:30},{title:"S. Young",value:56,additionValue:"PPG 18.67",direction:"home",width:20},{title:"G. Ervin",value:111,additionValue:"PPG 18.5",direction:"home",width:10},{title:"T. Abercrombie",value:65,additionValue:"PPG 16.25",direction:"away",width:5}],FreeThrows:[{title:"B. Madgen",value:91,direction:"home",width:100},{title:"C. Goulding",value:135,direction:"home",width:70},{title:"S. Young",value:63,direction:"away",width:60},{title:"J. Ennis",value:81,direction:"away",width:50},{title:"T. Abercrombie",value:72,direction:"away",width:45},{title:"R. Clarke",value:83,direction:"home",width:40},{title:"D. Johnson",value:118,direction:"home",width:30},{title:"S. Young",value:56,direction:"home",width:20},{title:"G. Ervin",value:111,direction:"home",width:10},{title:"T. Abercrombie",value:65,direction:"away",width:5}],FieldGoals:[{title:"J. Frye",value:.35,direction:"home",PO:"Small Forward",width:100},{title:"A. Gibson",value:.34,direction:"away",PO:"Guard",width:70},{title:"D. Johnson",value:.32,direction:"away",PO:"Center",width:60},{title:"G. Ervin",value:.31,direction:"home",PO:"Guard",width:50},{title:"A. Petrie",value:.31,direction:"away",PO:"Forward",width:45},{title:"C. Goulding",value:.26,direction:"home",PO:"Guard",width:40},{title:"M. Worthington",value:.25,direction:"home",PO:"Power Forward",width:30},{title:"N. Tomlinson",value:.25,direction:"home",PO:"Guard",width:20},{title:"S. Morrison",value:.22,direction:"home",PO:"Center",width:10},{title:"L. Walker",value:.22,direction:"away",PO:"Small Forward",width:5}]}):"volleyball"!==window.sport.toLowerCase()&&"beachvolleyball"===window.sport.toLowerCase()||t.trigger("app:team-data-received",{HP:[{PL:"B. Madgen",P:91,PPG:22.75},{PL:"C. Goulding",P:135,PPG:22.5},{PL:"R. Clarke",P:83,PPG:20.75},{PL:"D. Johnson",P:118,PPG:19.67},{PL:"S. Young",P:56,PPG:18.67},{PL:"G. Ervin",P:111,PPG:18.5}],AP:[{PL:"S. Young",P:63,PPG:21},{PL:"J. Ennis",P:81,PPG:20.25},{PL:"T. Abercrombie",P:72,PPG:18},{PL:"T. Abercrombie",P:65,PPG:16.25}],HA:[{PL:"M. Mazurek",A:91,APG:22.75},{PL:"A. Jagieło",A:135,APG:22.5},{PL:"K. Różycka",A:83,APG:20.25},{PL:"D. Kaliszuk",A:118,APG:19.67},{PL:"T. Naczk",A:72,APG:18},{PL:"G. Twardowska",A:111,APG:18.5}],AA:[{PL:"S. Wojcieska",A:372,APG:21},{PL:"K. Połeć",A:83,APG:20.75},{PL:"A. Sawoczkina",A:72,APG:18},{PL:"T. Plchotova",A:65,APG:16.25}],HK:[{PL:"A. Jagieło",K:696,KPG:26.77},{PL:"M. Kurnikowska",K:410,KPG:25.63},{PL:"R. Piatek",K:83,KPG:20.75},{PL:"D. Różycka",K:118,KPG:19.67},{PL:"S. Young",K:56,KPG:18.67},{PL:"G. Ervin",K:111,KPG:18.5}],AK:[{PL:"T. Kaliszuk",K:63,KPG:21},{PL:"A. Pura",K:329,KPG:20.25},{PL:"J. Twardowska",K:72,KPG:18},{PL:"Z. Pieczka",K:65,KPG:16.25}]})},l.prototype.triggerTeams.help="Name: triggerTeams. \n\rDescription : Triggers teams data sending.",l.prototype.triggerFormattion=function(){t.trigger("formation:test-data")},l.prototype.triggerFormattion.help="Name: triggerFormattion. \n\rDescription : Triggers formattion data sending.",new l})),define("test/initializationHelper",["require","backbone"],(function(e){var t=e("backbone");funr("debug:show-tab",{tab:e,subtab:i})},i.prototype.showTab.help="Name: showTab. \n\rDescription : Open the specified tab. \n\rOptions: \n\r@tab tab name for openning (key-stats, summary, teams, head-to-head, form),\n\r@subtab subtab name for opening within tab",new i})),define("units/StatsHandler",["require","backbone","underscore","localisation/manager"],(function(e){var t=e("backbone"),i=e("underscore"),n=e("localisation/manager");function s(){i.extend(this,t.Events),this.listenTo(t,"app:message",(function(e){if(e.Statistics){var t=this.splitStatistics(e.Statistics);this.upsert(t,e)}})),this.names={},this.names.Shots={name:"total Shots"},this.names.ShotsOnTarget={name:"shots On Target",active:!0,key:"STATISTIC->SHOTONTARGET"},this.names.ShotsBlocked={name:"shots Blocked"},this.names.DangerousAttacks={name:"dangerous Attacks",active:!0,key:"STATISTIC->DANGEROUSATTACK"},this.names.FreeKicks={name:"free Kicks"},this.names.Corners={name:"corners",active:!0,key:"STATISTIC->CORNER"},this.names.Fouls={name:"fouls"},this.names.Offside={name:"offsides"},this.names.YellowCards={name:"yellow Cards",active:!0,key:"STATISTIC->YELLOWCARD"},this.names.RedCards={name:"red Cards",active:!0,key:"STATISTIC->REDCARD"},this.names.Attacks={name:"attacks"},this.names.ShotsWoodwork={name:"shots Woodwork"},this.names.ShotsOffTarget={name:"shots Off Target"},this.names.Substitutions={name:"substitutions"}}return s.prototype.splitStatistics=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i].split(":"));for(var n in t)t.hasOwnProperty(n)&&(t[n][0]=parseInt(t[n][0],10),t[n][1]=parseInt(t[n][1],10));return t},s.prototype.matchStatType=function(e){var t=[];t[1043]="Offside",t[1024]="Attacks",t[1025]="Corners",t[1026]="DangerousAttacks",t[1042]="Fouls",t[1028]="FreeKicks",t[1033]="Shots",t[1041]="ShotsWoodwork",t[1034]="YellowCards",t[1032]="RedCards",t[1039]="ShotsOnTarget",t[1058]="ShotsBlocked",t[1040]="ShotsOffTarget",t[1055]="Substitutions",t[1058]="ShotsBlocked",t[1031]="Penalties";var i=parseInt(e,10);return i in t?t[i]:i-1024 in t&&t[i-1024]},s.prototype.upsert=function(e,i){var s=[];for(var o in e)if(void 0!==this.names[o]&&void 0!==this.names[o].active){var r={name:o,homeValue:e[o][0],awayValue:e[o][1],title:n.get(this.names[o].key)};s.push(r)}t.trigger("stats:parsed",{statsArray:s,message:i})},new s})),define("test/testing",["require","backbone","$messageHandler","./dataService","./initializationHelper","../shared/logger","underscore","units/StatsHandler","app/matchContext"],(function(e){var i=e("backbone"),n=e("$messageHandler"),s=e("./dataService"),o=e("./initializationHelper"),r=e("../shared/logger"),a=e("underscore"),l=new n,c=e("units/StatsHandler"),u=e("app/matchContext"),h=[1029,2053,1034,2058,1032,2056,1055,2079,1060,2084,1122,2146],d=[1030,1047,1048,1049,2054,2071,2072,2073],p=[],m=0,f=0,g=2,v=1e3,y=1e3;window.ts={},a.extend(window.ts,s),a.exsage",(function(e){g=e.TickerStateId})),i.on("game:event",(function(e){var t;f=e.minutes,-1!==a.indexOf(h,e.eventId)&&(t=parseInt(e.eventNumber,10),y=t,v=t,p.push(e))})),i.on("event:canceled",(function(e){if(-1!==a.indexOf(d,e.eventId)){if(p=a.without(p,a.findWhere(p,{eventNumber:v})),void 0===a.last(p))return;y=a.last(p).eventNumber+1,v=a.last(p).eventNumber}}));function w(e,t){var i="volleyball"===window.sport.toLowerCase()?0:5,n=parseInt(e,10),s={};if((t=t||{}).testEvent=!0,-1!==e){switch(s.EventCodeId=n,s.EventNumber=(t.eventNumber||++y).toString(),s.CancelEvents=t.cancelEvents,s.RelatedEventNumber=t.relatedEventNumber||v,s.TickerStateId=function(e){switch(e){case"first-half":return 2;case"second-half":return 8;case"first-extra":return 64;case"second-extra":return 256;case"penalties":return 1024;case"first-quarter":return 2001;case"second-quarter":return 2002;case"third-quarter":return 2003;case"fourth-quarter":return 2004;case"over-time":return 2005;case"first-set":return 2101;case"second-set":return 2102;case"third-set":return 2103;case"fourth-set":return 2104;case"fifth-set":return 2105;case"golden-set":return 2150;case"set-break":return 2100}}(t.period)||m||g,g=s.TickerStateId,s.minutes=t.minutes||f||i,s.CurrentPlaytime=60*s.minutes*1e3,s.eventCodeId=n,s.testEvent=!0,s.eventNumber=s.EventNumber,n){case 157:case 199:case 1422:case 2446:case 0:s.ClockRunning=!1;break;default:s.ClockRunning=!0}return 0===t.minutes&&(s.minutes=0),t.period&&(s.period=t.period),s.PlayerNumber=t.playerNumber||"00",s.PlayerName=t.playerName||"",t.TeamColors&&(s.TeamColors=a.defaults(t.TeamColor.teamName,eventNumber:e.eventNumber}})))}ts.triggerError=function(e){"string"==typeof e&&e.length>0?i.trigger("csb:app-error",e):i.trigger("csb:app-error","This is default error message")},ts.triggerPremiumVisStart=function(e){var t={date:1479492e3,match_id:853261,period_id:2,sport_id:1,state:"live"};"object"==typeof e&&e.hasOwnProperty("state")&&(t=e),i.trigger("app:premium-vitriggerLineup(),ts.triggerComments()},ts.triggerComments=function(){var e,t,i,n;if("icehockey"===window.sport.toLowerCase()){m=2301,ts.se(10001),ts.se(160),ts.se(160),ts.se(133),ts.se(210),ts.se(134),ts.se(135),ts.se(524),ts.se(524),ts.se(136),ts.se(214),ts.se(141),ts.se(60),ts.se(195),ts.se(212),ts.se(213),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(277),ts.se(1485),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(278),ts.se(2529),ts.se(277),ts.se(2509),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(278),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(278),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(278),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(174),ts.se(277),ts.se(195),ts.se(1479),ts.se(212),ts.se(276),ts.se(213),ts.se(278),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(278),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(2529),ts.se(1492),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(2499),ts.se(277),ts.se(278),ts.se(195),ts.se(212),ts.se(276),ts.se(1487),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(277),ts.se(195),ts.se(2512),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(277),ts.se(149),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(278),ts.se(1505),ts.se(2529),ts.se(277),ts.se(195),ts.se(1505),ts.se(2513),ts.se(262),ts.se(212),ts.se(276),ts.se(2511),ts.se(2529),ts.se(1505),ts.se(278),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(277),ts.se(195),ts.se(212),ts.se(276),ts.se(1487),ts.se(1505),ts.se(277),ts.se(174),ts.se(195),ts.se(2503),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(278),ts.se(277),ts.se(1485),ts.se(195),ts.se(212),ts.se(276),ts.se(1487),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(1475),ts.se(277),ts.se(278),ts.se(195),ts.se(2516),ts.se(212),ts.se(276),ts.se(1487),ts.se(2529),ts.se(278),ts.se(1505),ts.se(278),ts.se(2529),ts.se(277),ts.se(2509),ts.se(195),ts.se(149),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(278),ts.se(1505),ts.se(1485),ts.se(277),ts.se(195),ts.se(212),ts.se(276),ts.se(2511),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(1485),ts.se(277),ts.se(278),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(277),ts.se(2509),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(278),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(277),ts.se(2509),ts.se(195),ts.se(212),ts.se(276),ts.se(2511),ts.se(1505),ts.se(278),ts.se(2529),ts.se(1505),ts.se(277),ts.se(149),ts.se(195),ts.se(278),ts.se(262),ts.se(212),ts.se(276),ts.se(1487),ts.se(2529),ts.se(277),ts.se(61),m=2302,ts.se(280),ts.se(258),ts.se(133),ts.se(141),ts.se(62),ts.se(195),ts.se(212),ts.se(1487),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(1485),ts.se(2529),ts.se(1505),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(278),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(277),ts.se(195),ts.se(278),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(277),ts.se(174),ts.se(195),ts.se(1479),ts.se(262),ts.se(2529),ts.se(212),ts.se(276),ts.se(213),ts.se(2509),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(2509),ts.se(1505),ts.se(2529),ts.se(277),ts.se(2509),ts.se(278),ts.se(195),ts.se(212),ts.se(276),ts.se(2511),ts.se(1505),ts.se(2529),ts.se(277),ts.se(195),ts.se(2512),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(1492),ts.se(278),ts.se(278),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(277),ts.se(1485),ts.se(278),ts.se(195),ts.se(149),ts.se(262),ts.se(212),ts.se(276),ts.se(1487),ts.se(1475),ts.se(277),ts.se(278),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(277),ts.se(1485),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(2529),ts.se(277),ts.se(278),ts.se(195),ts.se(1505),ts.se(2513),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(277),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(2529),ts.se(277),ts.se(278),ts.se(195),ts.se(1505),ts.se(2513),ts.se(262),ts.se(212),ts.se(276),ts.se(1487),ts.se(2529),ts.se(278),ts.se(1505),ts.se(1485),ts.se(2529),ts.se(1505),ts.se(277),ts.se(1485),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(278),ts.se(2529),ts.se(277),ts.se(2509),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(2509),ts.se(277),ts.se(2509),ts.se(278),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(1505),ts.se(2529),ts.se(278),ts.se(277),ts.se(2509),ts.se(195),ts.se(212),ts.se(276),ts.se(1487),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(277),ts.se(278),ts.se(195),ts.se(149),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(278),ts.se(1505),ts.se(2529),ts.se(277),ts.se(2509),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(277),ts.se(2509),ts.se(278),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(2499),ts.se(277),ts.se(195),ts.se(212),ts.se(276),ts.se(2511),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(277),ts.se(195),ts.se(1488),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(2529),ts.se(277),ts.se(195),ts.se(1505),ts.se(2513),ts.se(262),ts.se(212),ts.se(276),ts.se(1487),ts.se(1485),ts.se(2529),ts.se(277),ts.se(195),ts.se(1505),ts.se(2513),ts.se(262),ts.se(212),ts.se(276),ts.se(1487),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(2499),ts.se(277),ts.se(2518),ts.se(276),ts.se(2509),ts.se(278),ts.se(1505),ts.se(2529),ts.se(277),ts.se(195),ts.se(2512),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(278),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(277),ts.se(195),ts.se(2529),ts.se(1489),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(277),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(277),ts.se(195),ts.se(262),ts.se(212),ts.se(276),ts.se(2511),ts.se(1505),ts.se(277),ts.se(1485),ts.se(63),m=2303,ts.se(280),ts.se(133),ts.se(141),ts.se(64),ts.se(195),ts.se(212),ts.se(2511),ts.se(1505),ts.se(2529),ts.se(277),ts.se(195),ts.se(1505),ts.se(2513),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(2529),ts.se(1505),ts.se(277),ts.se(195),ts.se(2529),ts.se(1489),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(278),ts.se(2509),ts.se(2509),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(1485),ts.se(1475),ts.se(277),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(2529),ts.se(1505),ts.se(278),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(277),ts.se(195),ts.se(1488),ts.se(262),ts.se(212),ts.se(276),ts.se(1487),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(277),ts.se(2509),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(278),ts.se(174),ts.se(277),ts.se(195),ts.se(1479),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(2499),ts.se(277),ts.se(195),ts.se(1492),ts.se(212),ts.se(276),ts.se(213),ts.se(1505),ts.se(2529),ts.se(278),ts.se(1505),ts.se(277),ts.se(195),ts.se(2529),ts.se(1489),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(277),ts.se(2509),ts.se(195),ts.se(212),ts.se(276),ts.se(2511),ts.se(1505),ts.se(277),ts.se(195),ts.se(2529),ts.se(1489),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(278),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(277),ts.se(195),ts.se(2512),ts.se(149),ts.se(212),ts.se(276),ts.se(213),ts.se(277),ts.se(278),ts.se(278),ts.se(195),ts.se(1505),ts.se(212),ts.se(276),ts.se(213),ts.se(2529),ts.se(278),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(277),ts.se(2509),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(277),ts.se(195),ts.se(212),ts.se(276),ts.se(213),ts.se(278),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(2529),ts.se(2509),ts.se(1505),ts.se(174),ts.se(277),ts.se(195),ts.se(2503),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2516),ts.se(2529),ts.se(2499),ts.se(277),ts.se(278),ts.se(195),ts.se(157),ts.se(2514),ts.se(212),ts.se(276),ts.se(213),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(277),ts.se(195),ts.se(1505),ts.se(2513),ts.se(262),ts.se(212),ts.se(276),ts.se(213),ts.se(2529),ts.se(278),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(1502),ts.se(2529),ts.se(1505),ts.se(277),ts.se(1485),ts.se(195),ts.se(157),ts.se(1490),ts.se(262),ts.se(212);ts.se(276),ts.se(213),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(1505),ts.se(1485),ts.se(2529),ts.se(1505),ts.se(1485),ts.se(2529),ts.se(1505),ts.se(2529),ts.se(277),ts.se(20)}else"basketball"===window.sport.toLowerCase()?(ts.se(31),ts.se(101),ts.se(36),ts.se(32),ts.se(102),ts.se(36),ts.se(33),ts.se(103),ts.se(36),ts.se(34),ts.se(104),ts.se(20)):"volleyball"===window.sport.toLowerCase()||"beachvolleyball"===window.sport.toLowerCase()?(ts.se(41),ts.se(1408),ts.se(1429),ts.se(1414),ts.se(1421),ts.se(1408),ts.se(1429),ts.se(2433),ts.se(2445),ts.se(2432),ts.se(2453),ts.se(2438),ts.se(2445),ts.se(2432),ts.se(2453),ts.se(1412),ts.se(2445),ts.se(2432),ts.se(2453),ts.se(2438),ts.se(2445),ts.se(1408),ts.se(1429),ts.se(1412),ts.se(2445)):(ts.se(0),ts.se(1026),e=[{func:ts.se,args:[1026,{playerNumber:"59"}]},{func:ts.se,args:[2050,{playerNumber:"46"}]},{func:ts.se,args:[1027,{playerNumber:"77"}]},{func:ts.se,args:[2051,{playerNumber:"30"}]},{func:ts.se,args:[1031,{playerNumber:"75"}]},{func:ts.se,args:[1029]},{func:ts.se,args:[261,{playerNumber:"77",playerName:"PUSKAS AKADEMIA U21"}]},{func:ts.se,args:[2055,{playerNumber:"13"}]},{func:ts.se,args:[1030,{playerNumber:"01"}]},{func:ts.se,args:[2054,{playerNumber:"49"}]},{func:ts.se,args:[1039,{playerNumber:"78"}]},{func:ts.se,args:[2063,{playerNumber:"66"}]},{func:ts.se,args:[1032,{playerNumber:"52"}]},{func:ts.se,args:[2056,{playerNumber:"30"}]},{func:ts.se,args:[1040,{playerNumber:"18"}]},{func:ts.se,args:[2064,{playerNumber:"46"}]},{func:ts.se,args:[1034,{playerNumber:"77"}]},{func:ts.se,args:[2058,{playerNumber:"46"}]},{func:ts.se,args:[2146,{playerNumber:"46"}]},{func:ts.se,args:[1122,{playerNumber:"77"}]},{func:ts.se,args:[1029,{minutes:47,eventNumber:2e3}]},{func:ts.se,args:[261,{playerNumber:"2",playerName:"Phonang Steelers Phonang Steelers"}]},{func:ts.se,args:[1]},{func:ts.se,args:[2]},{func:ts.se,args:[1041,{playerNumber:"72",minutes:55,period:"second-half"}]},{func:ts.se,args:[2065,{playerNumber:"46",minutes:58,period:"second-half"}]},{func:ts.se,args:[1042,{playerNumber:"35",minutes:60,period:"second-half"}]},{func:ts.se,args:[2066,{playerNumber:"63",minutes:64,period:"second-half"}]},{func:ts.se,args:[1034,{playerNumber:"78",minutes:67,period:"second-half"}]},{func:ts.se,args:[2067,{playerNumber:"63",minutes:69,period:"second-half"}]},{func:ts.se,args:[1044,{playerNumber:"35",minutes:70,period:"second-half"}]},{func:ts.se,args:[2068,{playerNumber:"13",minutes:71,period:"second-half"}]},{func:ts.se,args:[1045,{playerNumber:"77",minutes:72,period:"second-half"}]},{func:ts.se,args:[1029,{playerNumber:"59",minutes:73,period:"second-half"}]},{func:ts.se,args:[1041,{playerNumber:"35",minutes:74,period:"second-half"}]},{func:ts.se,args:[2053,{playerNumber:"63",minutes:75,period:"second-half"}]},{func:ts.se,args:[1054,{playerNumber:"72",minutes:80,period:"second-half"}]},{func:ts.se,args:[2078,{playerNumber:"59",minutes:81,period:"second-half"}]},{func:ts.se,args:[1055,{playerNumber:"72",minutes:82,period:"second-half"}]},{func:ts.se,args:[2058,{playerNumber:"13",minutes:83,period:"second-half"}]},{func:ts.se,args:[1029,{playerNumber:"72",minutes:14,period:"second-half"}]},{func:ts.se,args:[1029,{playerNumber:"72",minutes:18,period:"second-half"}]},{func:ts.se,args:[2053,{playerNumber:"46"}]},{func:ts.se,args:[2053,{minutes:94,period:"second-half"}]},{func:ts.se,args:[261,{playerNumber:"3",playerName:"Puskas Akademia U21"}]},{func:ts.se,args:[3]}],t=0,i=e.length,n=setInterval((function(){var s=e[t].func,o=e[t].args;s.apply(this,o),++t>=i&&clearInterval(n)}),50))},ts.triggerLineup.help="Name: triggerLineup. \n\rDescription : Triggers lineup data sending.",ts.triggerGameStarted=function(){i.trigger("app:game-started",{shouldReload:!1}),ts.se(0)},ts.triggerGameStarted.help="Name: triggerGameStarted. \n\rDescription : Triggers game started.",ts.triggerTeamColors=function(e,t){var n=function(e){return{red:"ff0000",black:"000",green:"00ff00",blue:"0000ff",yellow:"ffff00",purple:"ff00ff",gray:"c0c0c0",white:"ffffff"}[e]||e},s=n(e)||"8A45B9",o=n(t)||"338ECC";i.trigger("data:team-colors",{home:{MainColor:s},away:{MainColor:o}}),window.mediator.trigger("app:message",{TeamColors:[{C1:s+"FF",C2:s+"FF",P:s+"FF",S:s+"FF"},{C1:o+"FF",C2:o+"FF",P:o+"FF",S:o+"FF"}],SportId:window.sportId?~~window.sportId:1})},ts.triggerTeamColors.help="Name: triggerTeamColors. \n\rDescription : Triggers team colors. You could specify color in text format or in hex. Allowed colors in text : red, black, green, blue, yellow, purple, gray, white\n\r@params : event params. Available options: \n\r@homeColor : home color in hex (8A45B9) \n\r@awayColor : away color in hex (338ECC)",ts.triggerNonCSBPrematch=function(e){e=e||{};var t="/Date("+new Date(e.KickOff||"5 Dec, 2015 23:15:00").getTime()+"+0000)/";window.extendedSchedule="[Q] Ivo Karlovic (CRO) V Kei Nishikori (JAP)|[WC] Gabashvili Teymuraz (RUS) V [Q] Pablo Carreno-Busta (ESP)|Andre Begemann (GER) & Julian Knowle (AUS) V [WC] Jamie Murray (GBR) & John Peers (AUS) | [PR] Maria Sharapova (RUS) V Vorranavaporn Vorranavaporn (THA)",i.trigger("data:no-rball"),i.trigger("match:initial-message",{KickOff:t,SportName:e.SportName||window.sport.charAt(0).toUpperCase()+window.sport.slice(1),StadiumName:e.StadiumName||"Stadium Court",LeagueName:e.LeagueName||"ATP Delray Beach",CountryName:e.CountryName||"Spain",WatchAndBetId:e.WatchAndBetId||window.wbeventid||"800000",TickerStateId:e.TickerStateId||1})},ts.triggerPrematch=function(e){e=e||{};var t="/Date("+new Date(e.KickOff||"5 Dec, 2015 23:15:00").getTime()+"+0000)/";i.trigger("match:initial-message",{KickOff:t,HomeTeam:e.HomeTeam||"Dinamo Kyiv (women)",AwayTeam:e.AwayTeam||"ARSENAL",HomeTeamAbbr:e.HomeTeamAbbr||"CHS",AwayTeamAbbr:e.AwayTeamAbbr||"ARS",SportName:e.SportName||window.sport.charAt(0).toUpperCase()+window.sport.slice(1),StadiumName:e.StadiumName||"Stanford Bridge",LeagueName:e.LeagueName||"Superleague (men) - Promotion/Relegation Playoffs",CountryName:e.CountryName||"Spain",WatchAndBetId:e.WatchAndBetId||window.wbeventid||"800000",TickerStateId:e.TickerStateId||1}),ts.triggerForm()},ts.triggerPrematch.help="Name: : triggerPrematch. \n\rDescription : Trigger prematch screen\n\r@params Prematch params object\n\r@default\n\r{\n\rKickOff: '5 Dec, 2014 23:15:00'  // When the match will start,\n\rHomeTeam: 'Dinamo Kyiv (women)' // home team name,\n\rAwayTeam: 'ARSENAL' // away team name,\n\rHomeTeamAbbr: 'CHS' // home team abbr,\n\rAwayTeamAbbr: 'ARS' // away team abbr,\n\rSportName: 'Basketball' // sport name,\n\rStadiumName: 'Stanford Bridge' // stadium name,\n\rLeagueName: 'English Premier League' // league name,\n\rFormData: true // tridata:no-rball"),ts.triggerPrematch()},ts.triggerPlayer.help="Name: : triggerPlayer. \n\rDescription : Trigger player screen",ts.se=function(e,n){var s=w(e,n);u.generateTeamNames();void 0!==window.t&&t.se(e,n),i.trigger("app:message",s),l.process(s),r.debug(s)},ts.mu=function(e,t){var n=w(e,t);if(n.HomeTeam="Arsenal",n.AwayTeam="Manchester",!ts.mu.muInitialized){ts.mu.score=[0,0];var s=[];ts.mu.statistics={},"soccer"===window.sport.toLowerCase()&&(s=["Offsides","Attacks","Corners","DangerousAttacks","Fouls","FreeKicks","Shots","ShotsWoodwork","YellowCards","RedCards","ShotsOnTarget","ShotsBlocked","ShotsOffTarget","Substitutions","ShotsBlocked","Penalties"]),s.forEach((function(e){ts.mu.statistics[e]=[0,0]})),ts.mu.muInitialized=!0}1029===e&&ts.mu.score[0]++,2053===e&&ts.mu.score[1]++,n.ScoreHome=ts.mu.score[0],n.ScoreAway=ts.mu.score[1];var o=c.matchStatType(e);if(ts.mu.statistics[o]){var r="1"===e.toString()[0]?0:1;ts.mu.statistics[o][r]++}for(var a in n.Statistics={},ts.mu.statistics)n.Statistics[a]=ts.mu.statistics[a].join(":");i.trigger("app:message",n),l.process(n)},ts.se.help="Name: se. \n\rDescription : Send specific event into CSB and Vis.\n\rOptions. \n\r@params : event params. Available options: \n\r@eventNumber : the number of event. Default value - the latest received event number + 1 or 0. \n\r@relatedEventNumber : related event number for current event. Uses for events canceling. Default value - the latest received event number. \n\r@period : the period of the game. Available values 'first-half','second-half','first-extra','second-extra','penalties'. Default value - current game period.\n\r@minutes : minute when event was occured. Default value - current game minute.",ts.help=function(){for(var e in this)void 0!==this[e].help&&(console.group(),console.log(this[e].help),conggerSummary(),ts.triggerHeadToHead()},ts.populateWithData.help="Name: populateWithData. \n\rDescription: Send all possible data to CSB."})),define("app/appContext",[],(function(){return{lang:"en",ipf:!0,ipfTimeout:"30",betslip:!0,betslipStopTime:"3",betslipVersion:1,pitch:void 0,cssPath:void 0,chevrons:void 0,defaultView:"video",streamOnly:!1,visSwitch:!1,statsSwitch:!1,wbOnly:!1,isMini:!1,ncaa:!1,ussport:!1,wbretail:!1,videoonly:!1,isTestMatch:!1,isHiveData:!1}})),define("units/MessageUpdatesHandler",["require","backbone","underscore","app/matchContext","app/appContext","$statisticAggregator"],(function(e){var t=e("backbone"),i=e("underscore"),n=e("app/matchContext"),s=e("app/appContext"),o=e("$statisticAggregator"),r=function(){};return r.prototype.initialize=function(){i.extend(this,t.Events),this.bindListeners(),this.declareMessageProperties()},r.prototype.bindListeners=function(){this.listenTo(t,"app:message",this.onMessage,this),this.listenTo(t,"statistic:updated",this.onStatisticUpdated,this),this.listenTo(t,"statistic:not-updated",this.onStatisticUpdated,this),this.listenTo(t,"event:history-handled",this.onHistoryHandled,this)},r.prototype.onHistoryHandled=function(){var e;o.generateMessageUpdateObject&&(e=o.generateMessageUpdateObject()),this.onStatisticUpdated(e)},r.prototype.onMessage=function(e){if(s.messageUpdatesEnabled){var t={};e.CurrentPlaytime&&(t.time=e.CurrentPlaytime),e.ScoreHome&&(t.score=e.ScoreHome+":"+e.ScoreAway);for(var i=0;i<this.messageProperties.length;i++)this.messageProperties[i]in e&&(t[this.messageProperties[i]]=e[this.messageProperties[i]]);t.HomeTeam=n.homeTeam||e.HomeTeam,t.HomeTeamAbbr=n.homeTeamAbbr||e.HomeTeamAbbr,t.AwayTeam=n.awayTeam||e.AwayTeam,t.AwayTeamAbbr=n.awayTeamAbbr||e.AwayTeamAbbr,t.stats={};for(var o=0;o<this.statsProperties.length;o++)e.Statistics&&this.statsProperties[o]in e.Statistics&&(t.stats[this.statsProperties[o]]=e.Statistics[this.statsProperties[o]]);this.messageToBeSent=t,this.messageToBeSent.message="csb-updates",this.onStatisticUpdated()}else this.stopListening()},r.prototype.onStatisticUpdated=function(){throw new Error("onStatisticUpdated is not implemented in sport-specific MessageUpdatesHandler")},r.prototype.declareMessageProperties=function(){this.messageProperties=["EventCodeId","PlayerInSubstitution","PlayerOutSubstitution","JerseyInSubstitution","JerseyOutSubstitution","Zone","(e){window.parent.postMessage(e,"*")},r})),define("$messageUpdatesHandler",["require","units/MessageUpdatesHandler","shared/utils"],(function(e){var t=e("units/MessageUpdatesHandler"),i=e("shared/utils").splitGetParameters(),n=function(){this.statsProperties=["Offsides","Attacks","Corners","DangerousAttacks","Fouls","FreeKicks","Shots","ShotsWoodwork","YellowCards","RedCards","ShotsOnTarget","ShotsBlocked","ShotsOffTarget","Substitutions","ShotsBlocked","Penalties"],i.mu&&this.initialize(object SoccerMessageUpdatesHandler]"},n.prototype.onStatisticUpdated=function(e){if(this.aggregatedEvents={},this.tempEvents={goals:{home:[],away:[]},bookings:{home:[],away:[]},substitutions:{home:[],away:[]}},e?this.stats=e:e=this.stats?this.stats:{goals:[],bookings:[],substitutions:[]},this.aggregatedEvents.goals=e.goals.map(this.mapFunction.bind(this,"goals")),this.aggregatedEvents.substitutions=e.substitutions.map(this.mapFunction.bind(this,"substitutions")),this.aggregatedEvents.bookings=e.bookings.map(this.mapFunction.bind(this,"bookings")),this.messageToBeSent){for(var t in this.aggregatedEvents)this.aggregatedEvents.hasOwnProperty(t)&&(this.messageToBeSent[t]=this.aggregatedEvents[t]);this.sendPostMessage(this.messageToBeSent)}},n.prototype.mapFunction=function(e,t){this.tempEvents[e][t.direction].push(t);var i={eventCodeId:t.eventId,teamName:t.teamName,minute:t.minutes,count:this.tempEvents[e].home.length+":"+this.tempEvents[e].away.length};return t.playerName&&(i.playerName=t.playerName),t.playerNumber&&"00"!==t.playerNumber&&(i.playerNumber=t.playerNumber),t.playerInSubstitution&&(i.inName=t.playerInSubstitution),t.playerOutSubstitution&&(i.outName=t.playerOutSubstitution),t.jerseyInSubstitution&&(i.inNumber=t.jerseyInSubstitution),t.jerseyOutSubstitution&&(i.outNumber=t.jerseyOutSubstitution),i},new n})),define("units/PostMessageHandler",["require","backbone","shared/logger"],(function(e){var t=e("backbone"),i=e("shared/logger"),n=function(){this.listeners={visible:"sendResumeRequest",invisible:"sendPauseRequest"},$(window).on("message",_.bind(this.handle,this))};return n.prototype.handle=function(e){e=e.originalEvent,this.listeners[e.data.message]&&this[this.listeners[e.data.message]]()},n.prototype.sendResumeRequest=function(){t.trigger("liverail-resume-re{t.trigger("liverail-pause-request")},n.prototype.postMLUFrame=function(e){var t=window.top,n=document.referrer;if(window.top!==window.parent&&(t=window.top,n=window.topReferer||window.topreferer),!(["visualisationpp.performgroup.com","ec2-54-74-36-91.eu-west-1.compute.amazonaws.com","watchandbetretail.test.rball.com","watchandbet-retail.performgroup.com","retailsolutions.performgroup.com","retailsolutions-preprod.performgroup.com","retailsolutions-pp.performgroup.com","retailsolutions.test.rball.com","retailsolutions-dev.performgroup.com","prs.dev.performgroup.com","watchandbet.dev","retailsolutions.dev","performretail.performgroup.com","secure.performretail.performgroup.com","retaretail.performgroup.com","secure.retaretail.performgroup.com","www.eurobetretail.performgroup.com","secure.eurobetretail.performgroup.com","www.macauslotretail.performgroup.com","secure.macauslotretail.performgroup.com","www.bet3000retail.performgroup.com","secure.bet3000retail.performgroup.com","www.tipicoretail.performgroup.com","secure.tipicoretail.performgroup.com","www.bet25retail.performgroup.com,","secure.bet25retail.performgroup.com","hhdprs-dev01.dev.hh.perform.local","www.singaporepoolsretail.performgroup.com","secure.singaporepoolsretail.performgroup.com","secure.danskespilretail.performgroup.com","danskespilretail.performgroup.com","secure.snairetail.performgroup.com","snairetail.performgroup.com","www.stage.eventtest.performgroup.com"].filter((function(e,t,i){return-1!==n.indexOf(i[t])})).length>0))return i.debug("origin is not allowed."),!1;t.postMessage(e,"*")},new n})),dction:"vis-opta-widget-live-action"}})),define("units/imageLoadingHelper",["require","jquery"],(function(e){var t=e("jquery");return function(e){var i=this;t(window).ready((function(){var n=/url\(\s*(['"]?)(.*?)\s*(['"]?)\)/g,s=0,o=[];t(i).find("*").each((function(){var e=t(this).css("backgroundImage");if("none"!==e){var i=n.exec(e);null!==i&&"data:"!==i[2].substring(0,5)&&o.push(i[2])}})),(s=o.length)?o.forEach((function(i){var n=new Image;n.src=i,t(n).one("load error",(function(){0===--s&&void 0!==e&&e()})).each((function(){(this.complete||void 0===this.complete)&&t(this).load()}))})):e()}))}})),define("units/MSports",[],(function(){fun2H(e),this.processKeyStatsSummary(e)},e.prototype.processHomeAndAwayScore=function(e){var t,i;e.SCH&&e.SCA&&(t=e.SCH,i=e.SCA,e.SCH=i,e.SCA=t)},e.prototype.processTimeline=function(e){e.T&&e.T.forEach((function(t,i){e.T[i].EID>=this.homeEventsMinNr+1024?e.T[i].EID-=1024:e.T[i].EID>=this.homeEventsMinNr&&e.T[i].EID<=this.homeEventsMaxNr&&(e.T[i].EID+=1024)}),this)},e.prototype.processKeyStatsSummary=function(e){var t,i;e.FORM&&e.FORM.HS&&e.FORM.AS&&(t=JSON.parse(JSON.stringify(e.FORM.HS)),i=JSON.parse(JSON.stringify(e.FORM.AS)),e.FORM.HS=i,e.FORM.AS=t)},e.prototype.processEventNumber=function(e){e.EID>=this.homeEventsMinNr+1024?e.EID-=1024:e.EID>=this.homeEventsMinNr&&e.EID<=this.homeEventsMaxNr&&(e.EID+=1024)},e.prototype.processHomeAndAwayTeam=function(e){var t,i,n,s;e.HT&&e.AT&&(t=e.HT,i=e.AT,e.HT=i,e.AT=t,e.HTLA&&e.ATLA?(n=e.HTLA,s=e.ATLA):e.HTLA?n=e.HTLA:e.ATLA&&(s=e.ATLA),e.HTLA&&delete e.HTLA,e.ATLA&&delete e.ATLA,s&&(e.HTLA=s),n&&(e.ATLA=n))},e.prototype.processTeamColors=function(e){e.TK&&e.TK.length>0&&e.TK[0].hasOwnProperty("IHT")?(delete e.TK[0].IHT,e.TK[1].IHT=!0):e.TK&&e.TK.length>0&&e.TK[1].hasOwnProperty("IHT")&&(delete e.TK[1].IHT,e.TK[0].IHT=!0)},e.prototype.processForm=function(e){var t,i,n,s;e.FORM&&e.FORM.HM&&e.FORM.AM&&(t=JSON.parse(JSON.stringify(e.FORM.HM)),i=JSON.parse(JSON.stringify(e.FORM.AM)),e.FORM.HM=i,e.FORM.AM=t,e.FORM.HM.forEach((function(t,i){e.FORM.HM[i].T="H"===e.FORM.HM[i].T?"A":"H",n=e.FORM.HM[i].H,s=e.FORM.HM[i].A,e.FORM.HM[i].H=s,e.FORM.HM[i].A=n})),e.FORM.AM.forEach((function(t,i){e.FORM.AM[i].T="H"===e.FORM.AM[i].T?"A":"H",n=e.FORM.AM[i].H,s=e.FORM.AM[i].A,e.FORM.AM[i].H=s,e.FORM.AM[i].A=n})))},e.prototype.processLineups=function(e){var t,i,n,s;e.LU&&e.LU.HLU&&e.LU.ALU&&(t=JSON.parse(JSON.stringify(e.LU.HLU)),i=JSON.parse(JSON.stringify(e.LU.HSUB)),n=JSON.parse(JSON.stringify(e.LU.ALU)),s=JSON.parse(JSON.stringify(e.LU.ASUB)),e.LU.HLU=n,e.LU.ALU=t,e.LU.HSUB=s,e.LU.ASUB=i)},e.prototype.processStats=function(e){var t,i,n;if(e.ST)for(var s in e.ST)e.ST.hasOwnProperty(s)&&(t=(n=e.ST[s].split(":"))[0],i=n[1],e.ST[s]=i+":"+t)},e.prototype.processH2H=function(e){var t,i;e.H2H&&e.H2H.HST&&e.H2H.HST.length>0&&e.H2H.HST.forEach((function(n,s){t=e.H2H.HST[s].H,i=e.H2H.HST[s].A,e.H2H.HST[s].H=i,e.H2H.HST[s].A=t}))},e})),define("$messageAdapterUsSports",["require","units/MessageAdapterUsSports"],(function(e){var t=e("units/MessageAdapterUsSports");function i(){this.homeEventsMinNr=1024,this.homeEventsMaxNr=1065}return i.prototype=new t,i.prototype.process=function(e){t.prototype.process(e),this.processTeamData(e),this.processTimeline(e),this.processHomeAndAwayScore(e),this.processStats(e),this.processEventNumber(e)},i.prototype.processTeamData=function(e){var t,i,n,s,o,r;e.TD&&(e.TD.HA&&(t=JSON.parse(JSON.stringify(e.TD.HA))),e.TD.HG&&(i=JSON.parse(JSON.stringify(e.TD.HG))),e.TD.HV&&(n=JSON.parse(JSON.stringify(e.TD.HV))),e.TD.AA&&(s=JSON.parse(JSON.stringify(e.TD.AA))),e.TD.AG&&(o=JSON.parse(JSON.stringify(e.TD.AG))),e.TD.AV&&(r=JSON.parse(JSON.stringify(e.TD.AV))),e.TD.HA=s,e.TD.HG=o,e.TD.HV=r,e.TD.AA=t,e.TD.AG=i,e.TD.AV=n)},new i})),define("$messageAdapter",["require","$messageAdapterUsSports"],(function(e){var t=e("$messageAdapterUsSports");return function(){var e={ID:"MatchId",KO:"KickOff",HT:"HomeTeam",HTLA:"HomeTeamAbbr",AT:"AwayTeam",ATLA:"AwayTeamAbbr",EN:"EventNumber",CPT:"CurrentPlaytime",CR:"ClockRunning",FORM:"Form",H2H:"Head2Head",SCH:"ScoreHome",SCA:"ScoreAway",EID:"EventCodeId",PI:"PlayerInSubstitution",PO:"PlayerOutSubstitution",JN:"PlayerNumber",PN:"PlayerName",PID:"PlayerId",PSID:"PlayStateID",JI:"JerseyInSubstitution",JO:"JerseyOutSubstitution",Z:"Zone",RE:"RelatedEventNumber",AMQTS:"SentToActiveMQTimestamp",ST:"Statistics",TSID:"TickerStateId",L:"LeagueName",LU:"Lineup",STA:"StadiumName",SN:"SportName",SI:"SportId",T:"Timeline",TD:"TeamData",TMP:"TempoData",TK:"TeamColors",WBID:"WatchAndBetID",GSMID:"GSMID",CE:"CancelEvents",IPF:"InPlayFacts"},i={TI:"TeamIndication",MKT:"MarketType",OUT:"Outcome",M:"CurrentMinute",FCT:"Facts"},n={O:"Offside",AT:"Attacks",CR:"Corners",DAT:"DangerousAttacks",F:"Fouls",FK:"FreeKicks",SH:"Shots",SHW:"ShotsWoodwork",YC:"YellowCards",RC:"RedCards",GK:"GoalKick",TI:"ThrowIn",SHG:"ShotsOnTarget",SHB:"ShotsOffTarget",SB:"ShotsBlocked",SUB:"Substitutions"};this.process=function(s){window.isUsSport&&t.process(s);var o,r={};for(o in s)s.hasOwnProperty(o)&&(r[e[o]]=s[o]);return s.IPF?r.InPlayFacts=function(e){var t={};for(var n in e.IPF)e.IPF.hasOwnProperty(n)&&(t[i[n]]=e.IPF[n]);return e.IPF.FCT&&Array.isArray(e.IPF.FCT)?t.Facts=e.IPF.FCT.map((function(e){return{Language:e.L,Text:e.T}})):t.Facts=[],t}(s):r.InPlayFacts=null,s.ST?(r.Statistics=function(e){var t,i={};for(t in n)n.hasOwnProperty(t)&&(i[n[t]]="0:0");for(t in e.ST)e.ST.hasOwnProperty(t)&&(i[n[t]]=e.ST[t]);return i}(s),r.FullTimeScore=s.ST.SFT,r.FullTimeScoreExtraTime=s.ST.SETFT):r.Statistics=null,r}}})),define("units/SocketHandler",["require","backbone","$messageAdapter","$messageHandler","underscore","shared/logger","socketio","shared/enums","app/matchContext","localisation/manager","units/PostMessageHandler"],(function(e){var t=e("backbone"),i=e("$messageAdapter"),n=e("$messageHandler"),s=e("underscore"),o=e("shared/logger"),r=e("socketio"),a=e("shared/enums"),l=e("app/matchContext"),c=e("localisation/manager"),u=e("units/PostMessageHandler");function h(){this.animationInitialized=!1,this.settings={reconnect:!0,"reconnection delay":5e3,"max reconnection attempts":100},this.checkWebSocketSupport()&&(this.settings.transports=["websocket"]),this.messageAdapter=new i,this.messageHandler=new n,this.teamColors=[{C1:"ff"+a.DefaultColors.Home,C2:"ff"+a.DefaultColors.Home},{C1:"ff"+a.DefaultColors.Away,C2:"ff"+a.DefaultColors.Away}],this.lastProcessedEventNumber=-1,this.bindListeners()}return h.prototype.checkWebSocketSupport=function(){return!this.oldAndroid()&&("WebSocket"in window&&("function"==typeof WebSocket||"object"==typeof WebSocket))},h.prototype.oldAndroid=function(){var e=navigator.userAgent.toLowerCase().match(/android\s([0-9\.]*)/),t=!1;e&&(t=parseFloat(e[1])<=4.3ived",(function(t){e.teamColors=t}))},h.prototype.resetMM=function(){window.matchId=void 0,this.lastProcessedEventNumber=void 0},h.prototype.initialize=function(e){if(e&&(this.options=e),this.options.token&&this.options.token.split(".")[1]){var t=JSON.parse(atob(this.options.token.split(".")[1]));Math.floor((new Date).getTime()/1e3)>=t.exp?o.debug("SocketHandler | initialize | don't connect because token is expired"):(o.debug("SocketHandler | initialize | connect"),this.socket=r.connect(this.options.socketServer+"?token="+this.options.token+"&referer="+window.location.href+"&topreferer="+window.topReferer+"&version="+window.customerVersion,this.settings),this.bindSocketEvents())}else o.debug("SocketHandler | initialize | don't connect because token doesn't exists")},h.prototype.bindSocketEvents=function(){var e=this;this.socket.on("connect",(function(){o.debug("ConkToFixturesTriggered||e.onMessage(t)})),this.socket.on("error",(function(e){o.debug("error",e)})),this.socket.on("disconnect",(function(){o.debug("Disconnected")})),this.socket.on("connect_failed",(function(){o.debug("All connection attempts failed")})),this.socket.on("reconnecting",(function(){o.debug("Reconnecting")}))},h.prototype.subscribe=function(e){this.backToFixturesTriggered=!1,o.debug("socket subscribe"),this.matchId=e.rbid||e.optaid,this.matchId?void 0!==this.socket&&this.socket.emit("subscribe",{Topic:this.matchId,MatchUuid:e.uuid,LiveUpdates:"true",OddsUpdates:"true",VideoUpdates:"true",ConditionsUpdates:"true"}):o.debug("Subscription error: no rbid and no optaid!")},h.prototype.onMessage=function(e){var i,n,r,a,h,d,p;if(e.SubscribeReceipt)o.debug("Subscribed to "+e.SubscribeReceipt);else if(e.DuplicateSubsription)o.debug("Already Subscribed to "+e.DuplicateSubsription);else if(e.InvalidUnsubscribe)o.debug("Cannot unsubscribe from "+e.InvalidUnsubscribe);else if(e.UnsubscribeReceipt)o.debug("Unsubscribed from "+e.UnsubscribeReceipt);else if(e.UnauthorizedAccess)o.debug(e.UnauthorizedAccess);else if(e.ActiveMQMessage){r=!0;try{a=$.parseJSON(e.ActiveMQMessage)}catch(e){r=!1}if(r){if(a&&void 0!==a.MLU){if(window.isMLUPostingEnabled&&u.postMLUFrame(JSON.stringify(a)),h=this.messageAdapter.process(a.MLU),(i=parseInt(h.EventNumber,10))<=this.lastProcessedEventNumber)return;if(this.lastProcessedEventNumber=i,2===Number(a.MLU.PSID))return void t.trigger("app:error",{caption:c.get("GAME_CANCELLED"),description:n,code:this.mid});513===Number(a.MLU.EID)?"cancelled"===this.specialEvent?t.trigger("app:error",{caption:c.get("GAME_CANCELLED"),description:n,code:this.mid}):"delayed"===this.specialEvent?t.trigger("app:delayed",c.get("GAME_DELAYED")):t.trigger("app:message",h):t.trigger("app:message",h),this.messageHandler.process(h),void 0!==window.mediator&&(d=l.generateTeamNames(),s.extend(h,d),h.TeamColors||(h.TeamColors=this.teamColors)),void 0!==window.mediator&&(window.mediator.publish("app:message",h),o.debug(h),o.redirect(h))}a&&void 0!==a.SYSM&&"string"==typeof(n=a.SYSM.M)&&((p=parseInt(a.SYSM.MID,10))>=400&&p<500?(this.specialEvent="cancelled",this.mid=p,t.trigger("app:error",{caption:c.get("GAME_CANCELLED"),description:n,code:this.mid})):502!==p&&601!==p&&627!==p||(this.specialEvent="delayed",this.mid=p))}}},h.prototype.unsubscribe=function(){o.debug("socket unsubscribe"),void 0!==this.socket&&this.socket.emit("unsubscribe",{Topic:this.matchId}),this.backToFixturesTriggered=!0},h})),define("units/hive/MessageAdapter",["require","app/appContext"],(function(e){var t=e("app/appContext");function i(){this.frameTypes={POEH:this.processPOEH.bind(this),POEM:this.processPOEM.bind(this)}}return i.prototype.process=function(e){var t=this,i={};return Object.keys(e).forEach((function(n){t.frameTypes.hasOwnProperty(n)&&(i[n]=t.frameTypes[n](e[n].data))})),i},i.prototype.processPOEH=function(e){var t=this;if(e.POEH&&Array.isArray(e.POEH))return e.POEH.map((function(e){return t.processPOEM(e)}))},i.prototype.processPOEM=function(e){var i;if(e)return e.hasOwnProperty("POEM")&&(e=e.POEM),e.TUUID&&e.TUUID!==window.hometeamUuid&&!t.ussport||e.TUUID===window.hometeamUuid&&t.ussport?i="away":void 0!==e.TUUID&&(i="home"),{direction:i,statistics:e.STAT,periodId:e.PID,typeID:e.TID,eventID:e.EVID,teamUUID:e.TUUID,teamID:e.TEAMID,timeStamp:e.TS,minute:e.S>0?e.M+1:e.M,playerName:e.PN,qualifiers:e.Q}},i})),define("units/hive/constants",[],(function(){return{POEM:{eventTypes:{pass:1,offsidePass:2,takeOn:3,foul:4,out:5,cornerAwarded:6,tackle:7,interception:8,turnover:9,overrunInRecentSeasonsSave:10,claim:11,clearance:12,miss:13,post:14,attemptSaved:15,goal:16,card:17,playerOff:18,playerOn:19,playerRetired:20,playerReturns:21,playerBecomesGoalkeeper:22,goalkeeperBecomesPlayer:23,conditionChange:24,officialChange:25,startDelay:27,endDelay:28,end:30,start:32,teamSetUp:34,playerChangedPosition:35,playerChangedJersey:36,collectionEnd:37,temp_Goal:38,temp_Attempt:39,formationChange:40,punch:41,goodSkill:42,deletedEvent:43,aerial:44,challenge:45,rescindedCard:47,ballRecovery:49,dispossessed:50,error:51,keeperPickUp:52,crossNotClaimed:53,smother:54,offsideProvoked:55,shieldBallOpp:56,foulThrowIn:57,penaltyFaced:58,keeperSweeper:59,chanceMissed:60,ballTouch:61,temp_Save:63,resume:64,contentiousRefereeDecision:65,possessionData:66,5050:67,refereeDropBall:68,failedToBlock:69,injuryTimeAnnouncement:70,coachSetup:71,caughtOffside:72,otherBallContact:73,blockedPass:74,delayedStart:75,earlyEnd:76,playerOffPitch:77},qualifierTypes:{relatedEvent:55,yellowCard:31,secondYellowCard:32,redCard:33,ownGoal:28,jerseyNumber:59},periodId:{firstHalf:1,secondHalf:2,firstPeriodExtraTime:3,secondPeriodExtraTime:4,penalty:5},periodTime:{1:{start:0,end:45},2:{start:45,end:90},3:{start:90,end:105},4:{start:105,end:120}},typeNames:{16:"goal",17:{31:"yellow-card",32:"yellow-red-card",33:"red-card"},18:"substitution",19:"substitution",38:"goal",58:"miss"}}}})),define("units/hive/EventsHandler",["require","jquery","shared/logger","./constants"],(function(e){var t=e("jquery"),i=e("shared/logger"),n=e("./constants");function s(){this.eventTypeHandlers={POEH:this.eventsHandlerPOEH.bind(this)},this.aggregatedRelatedEvents={},this.aggregatedScore={},this.aggregatedPreviousCards={},this.currentPeriod}return s.prototype.handle=function(e,t){this.eventTypeHandlers.hasOwnProperty(t)&&this.eventTypeHandlers[t](e)},s.prototype.eventsHandlerPOEH=function(e){var s=n.POEM.eventTypes,o=n.POEM.qualifierTypes,r=n.POEM.typeNames,a=n.POEM.periodId,l=n.POEM.periodTime;function c(e,t){var i=!1;return e.qualifiers.forEach((function(e){e.hasOwnProperty("I")&&e.I===t&&(i=!0)})),i}function u(e,t){var i;return e.qualifiers.forEach((function(e){e.hasOwnProperty("I")&&e.I===t&&(i=e.V[0])})),i}function h(e){return function(e){return e.typeID===s.goal&&c(e,o.ownGoal)}(e)||e.typeID===s.penaltyFaced?"home"===e.direction?"away":"home":e.direction}function d(e,t){if(this.aggregatedRelatedEvents.hasOwnProperty("POEH")&&this.aggregatedRelatedEvents.POEH.hasOwnProperty(e)&&this.aggregatedRelatedEvents.POEH[e].hasOwnProperty(t))return this.aggregatedRelatedEvents.POEH[e][t]}function p(){var e=0,t=0;return this.aggregatedScore.hasOwnProperty("POEH")&&(this.aggregatedScore.POEH.hasOwnProperty("home")&&(e=this.aggregatedScore.POEH.home.length),this.aggregatedScore.POEH.hasOwnProperty("away")&&(t=this.aggregatedScore.POEH.away.length)),{ScoreHome:e,ScoreAway:t}}function m(e){if(this.aggregatedPreviousCards.hasOwnProperty("POEH")&&this.aggregatedPreviousCards.POEH.hasOwnProperty(e.teamUUID)&&this.aggregatedPreviousCards.POEH[e.teamUUID].hasOwnProperty(e.eventID))return this.aggregatedPreviousCards.POEH[e.teamUUID][e.eventID]}function f(e){var t=h(e);this.aggregatedScore.hasOwnProperty("POEH")||(this.aggregatedScore.POEH={}),this.aggregatedScore.POEH.hasOwnProperty(t)||(this.aggregatedScore.POEH[t]=[]),this.aggregatedScore.POEH[t].push(e.eventID)}function g(e){this.aggregatedRelatedEvents.hasOwnProperty("POEH")||(this.aggregatedRelatedEvents.POEH={}),this.aggregatedRelatedEvents.POEH.hasOwnProperty(e.teamUUID)||(this.aggregatedRelatedEvents.POEH[e.teamUUID]={}),this.aggregatedRelatedEvents.POEH[e.teamUUID][e.eventID]=t.extend({},e)}function v(e){var t;return c(e,o.yellowCard)?t=o.yellowCard:c(e,o.secondYellowCard)?t=o.secondYellowCard:c(e,o.redCard)&&(t=o.redCard),t}function y(e,i){var n,o=i.typeID!==s.card?r[i.typeID]:r[i.typeID][v(i)],a=i.periodId,c=l.hasOwnProperty(a)&&l[a].end,u=i.minute;return c&&u>c&&(n=u-c,u=c),t.extend({},e,{minutes:u,overtime:n||0,direction:h(i),hiveData:!0,playerName:i.playerName,eventId:i.typeID,eventNumber:i.eventID,type:o,period:a})}function w(e){var t={cardTypeId:v(e)};return this.aggregatedPreviousCards.hasOwnProperty("POEH")||(this.aggregatedPreviousCards.POEH={}),this.aggregatedPreviousCards.POEH[e.eventID]=t,t}function b(e){var t,i,n=e.typeID===s.playerOn;return c(e,o.relatedEvent)?(i=u(e,o.relatedEvent),(t=d.call(this,e.teamUUID,i))?(g.call(this,e),{playerInSubstitution:n?e.playerName:t.playerName,jerseyInSubstitution:u(n?e:t,o.jerseyNumber),playerOutSubstitution:n?t.playerName:e.playerName,jerseyOutSubstitution:u(n?t:e,o.jerseyNumber)}):void g.call(this,e)):{}}function S(){this.currentPeriod!==a.penalty&&(this.currentPeriod=a.penalty,Backbone.trigger("match:penalty-shootout",{type:"match:period-start"}))}e.direction?e.cancel?function e(i){var n,r,l,f=h(i);switch(i.typeID){case s.goal:case s.temp_Goal:i.periodId<a.penalty&&(this.aggregatedScore.POEH[f]=_.without(this.aggregatedScore.POEH[f],i.eventID));break;case s.playerOff:case s.playerOn:c(i,o.relatedEvent)&&(n=u(i,o.relatedEvent),(r=d.call(this,i.teamUUID,n))&&(delete this.aggregatedRelatedEvents.POEH[i.teamUUID][i.eventID],e.call(this,r)))}l=t.extend(!0,{},y({cancel:!0},i),p.call(this),m.call(this,i)),Backbone.trigger("csb:hive-event-cancelled",l)}.call(this,e):function(e){var t;switch(e.typeID){case s.goal:case s.temp_Goal:e.periodId<a.penalty?(f.call(this,e),Backbone.trigger("csb:hive-message-goal",y(p.call(this),e))):(S.call(this),Backbone.trigger("csb:hive-message-penalty",y(p.call(this),e)));break;case s.penaltyFaced:e.periodId===a.penalty&&(S.call(this),Backbone.trigger("csb:hive-message-penalty",y(p.call(this),e)));break;case s.card:Backbone.trigger("csb:hive-message-card",y(w.call(this,e),e));break;case s.playerOff:case s.playerOn:(t=b.call(this,e))&&Backbone.trigger("csb:hive-message-substitution",y(t,e))}}.call(this,e):function(e){if(i.debug("Missing direction field in Hive message. Score fallback."),[s.goal,s.temp_Goal].includes(e.typeID)&&e.periodId<a.penalty&&e.statistics&&e.statistics.SC&&e.statistics.SC.length){var t=e.statistics.SC.split(":"),n=t.pop(),o=t.pop();Backbone.trigger("csb:hive-message-score-fallback",y({ScoreHome:o,ScoreAway:n},e))}}.call(this,e)},s})),define("units/hive/MessageHandler",["require","jquery","./EventsHandler"],(function(e){varedFrames={},this.eventshandler=new i}return n.prototype.prction(e){return JSON.stringify(e)}))}function a(e){if(s.processedFrames[e])return Array.isArray(s.processedFrames[e])?r(s.processedFrames[e]).reverse():JSON.stringify(s.processedFrames[e])}function l(e,i,n){e&&(Array.isArray(e)?e.forEach((function(r,a){var l=i.indexOf(r),c=e.length-a-1;l>-1?o.push(l):s.eventshandler.handle(t.extend(!0,{},s.processedFrames[n][c],{cancel:!0}),n)})):e===i&&s.eventshandler.handle(t.extend(!0,{},s.processedFrames[n],{cancel:!0}),n))}for(var c in e)e.hasOwnProperty(c)&&(i=e[c],n=a(c),Array.isArray(i)?(l(n,r(i),c),i.forEach((function(e,t){o.indexOf(t)>-1||s.eventshandler.handle(e,c)})),this.processedFrames[c]=i.slice()):(l(n,JSON.stringify(i),c),this.eventshandler.handle(i,c),this.processedFrames[c]=i))},n})),define("units/hive/SocketHandler",["require","backbone","./MessageAdapter","./MessageHandler","shared/utils"],(function(e){var t=e("backbone"),i=e("./MessageAdapter"),n=e("./MessageHandler"),s=e("shared/utils"),o=s.splitGetParameters();function r(){this.hiveUrl=o.hiveurl?o.hiveurl:window.hiveUrl,this.uuid=window.uuid,this.sportid=window.sportId,this.outletKey=window.outletKey,this.topReferer=window.topReferer,this.wsProtocol="https:"===window.location.protocol?"wss:":"ws:",this.framesSubscriptionArray=[],this.reconnectionTicker=0,this.messageAdapter=new i,this.messageHandler=new n}return r.prototype.initialize=function(){this.hiveUrl&&"HIVE_URL"!==this.hiveUrl&&this.uuid&&"INJECT_UUID"!==this.uuid&&this.outletKey&&"OUTLET_KEY"!==this.outletKey&&this.topReferer&&(this.isAutorised=!1,this.isConnected=!1,this.webSocketError=!1,this.ws=new WebSocket(this.wsProtocol+"//"+this.hiveUrl+"?topreferer="+this.topReferer),this.bindSocketEvents(),0===this.reconnectionTicker&&this.bindEventListeners())},r.prototype.bindEventListeners=function(){var e=this;t.on("csb:hive-subscribe-frames",(function(t){e.addFramesTypesToCacheArray(t),e.isAutorised&&e.subscribe(t)})y(t),e.isAutorised&&e.unsubscribe(t)})),t.on("csb:hive-close-connection",(function(){e.disconnect()}))},r.prototype.bindSocketEventsn(){e.isConnected=e.isInReadyState()},this.ws.onerror=function(){e.webSocketErrorHandler()},this.ws.onclose=function(t){switch(t.code){case 1006:e.reconnect();break;default:e.isConnected=e.isInReadyState()}},this.ws.onmessage=function(t){e.webSocketMessage(t)}},r.prototype.reconnect=function(){this.reconnectionTicker<10&&(window.console.warn("WebSocket connection to "+this.hiveUrl+" lost. Attempting reconnection in "+(this.reconnectionTicker+1)+" second(s). Attempt "+(this.reconnectionTicker+1)+" out of 10."),this.reconnectionTicker++,setTimeout(this.initialize.bind(this),1e3*(this.reconnectionTicker+1)))},r.prototype.authorise=function(){if(this.isConnected&&!this.isAutorised){var e={OutletKeyService:{outletid:this.outletKey}};this.sendData("outlet",e)}},r.prototype.webSocketErrorHandler=function(){this.isConnected=this.isInReadyState(),this.webSocketError=!0,window.console.warn("Error in WebSocket connection to "+this.hiveUrl+". WebSocket in state "+this.ws.readyState+".")},r.prototype.webSocketMessage=function(e){var t=this.parseFrameJSON(e.data);t&&(t.welcome&&this.authorise(),t.outlet&&this.handleOutletFrame(t.outlet),t.csb&&this.handleCSBFrame(t.csb))},r.prototype.parseFrameJSON=function(e){var t;try{t=JSON.parse(e)}catch(e){window.console.warn("Frame parsing error: "+e.message)}return t},r.prototype.sendData=function(e,t){var i;switch(e){case"csb":i={csb:t};break;case"outlet":i={outlet:t};break;default:i={csb:t}}this.ws.send(JSON.stringify(i))},r.prototype.sendInitObject=function(){this.sendData("csb",s.getHiveInitObject())},r.prototype.handleOutletFrame=function(e){("is_authorised"===e||e.hasOwnProperty("msg")&&"is_authorised"===e.msg)&&this.sendInitObject()},r.prototype.handleCSBFrame=function(e){e.hasOwnProperty("msg")&&"init ok"===e.msg?(this.isAutorised=!0,this.framesSubscriptionArray.length&&this.subscribe(this.framesSubscriptionArray)):this.isAutorised&&this.messageHandler.process(this.messageAdapter.process(e))},r.prototype.subscribe=function(e){var t={name:"subscribe",messagetype:Array.isArray(e)?e:[e],sportid:"1",eventuuid:this.uuid,sendLastData:!0};this.sendData("csb",t)},r.prototype.unsubscribe=function(e){var t={name:"unsubscribe",messagetype:Array.isArray(e)?e:[e],sportid:"1",eventuuid:this.uuid};this.sendData("csb",t)},r.prototype.addFramesTyp)&&t.framesSubscriptionArray.push(e)}Array.isArray(e)?e.forEach((function(e){i(e)})):i(e)},r.prototype.removeFramesTypesFromCacheArray=function(e){var t=this;function i(e){var i=t.framesSubscriptionArray.indexOf(e);-1!==i&&t.framesSubscriptionArray.splice(i,1)}Array.isArray(e)?e.forEach((function(e){i(e)})):i(e)},r.prototype.disconnect=function(){this.wturn this.ws&&1===this.ws.readyState},r})),define("shared/analytics",[],(function(){function e(e){this.isDisabledGA||(googleAnalytics(this.product+"Tracker.set","page",e||window.location.href),googleAnalytics(this.product+"Tracker.send","pageview"),this.customerAnalyticsId&&(googleAnalytics("partnerTracker.set","page",e||window.location.href),googleAnalytics("partnerTracker.send","pageview")))}function t(e){this.isDisabledGA||e&&e.eventCategory&&e.eventAction&&(e.hitType="event",googleAnalytics(this.product+"Tracker.send",e),this.customerAnalyticsId&&googleAnalytics("partnerTracker.send",e))}return function(i){var n={customerAnalyticsId:i.gacode,googleAnalyticsID:window.GACode,params:i,product:"true"===window.isVis?"vis":"csb",isDisabledGA:"false"===i.datatracking};if(!n.isDisabledGA){var s=document.getElementsByTagName("script")[0],o=document.createElement("script");window.GoogleAnalyticsObject="googleAnalytics",window.googleAnalytics.q||[]).push(arguments)},window.googleAnalytics.l=1*new Date,o.async=1,o.src="https://www.google-analytics.com/analytics.js",s.parentNode.insertBefore(o,s),googleAnalytics("create",n.googleAnalyticsID,"auto",n.product+"Tracker",{sampleRate:1}),n.customerAnalyticsId&&(googleAnalytics("create",n.customerAnalyticsId,"auto","partnerTracker"),googleAnalytics("partnerTracker.set","dimension1",topReferer),googleAnalytics("partnerTracker.set","dimension2",window.outletKey),googleAnalytics("partnerTracker.set","dimension3",window.sportId)),googleAnalytics(n.product+"Tracker.set","dimension1",topReferer),googleAnalytics(n.product+"Tracker.set","dimension2",window.outletKey),googleAnalytics(n.product+"Tracker.set","dimension3",window.sportId)}window.analytics={trackPageView:e.bind(n),trackEvent:t.bind(n)},t.call(n,{eventCategory:"product version",eventAction:n.product+"-"+window.customerVersion,eventLabel:window.customerId}),t.call(n,{eventCategory:"match info",eventAction:["Sport",window.sportId,"Match",window.matchId,"Video",window.videoId].join("_"),eventLabel:window.customerId});var r=[];for(var a of new URL(document.location.href).searchParams.keys())r.push(a);t.call(n,{eventCategory:"query params",eventAction:r.toString(),eventLabel:window.outletKey})}})),define("config/modules",[],(function(){return{comments:!0,form:!0,headToHead:!0,keyStats:{inGame:!0,summary:!0,tempoWave:!1},teams:{lineup:!0,assists:!0,goals:!0,mvp:!0,formation:!0,ppg:!0,fieldGoal:!0,freeThrows:!0,vbPoints:!0,vbAces:!0,vbKills:!0},prematch:!0,video:!0,visualisation:!0,scoreboard:!0,timeline:!0,tempo:!0,disableRunningBallControls:function(){this.comments=!1,this.form=!1,this.headToHead=!1,this.keyStats=void 0,thieadToHead||this.keyStats||this.teams}}})),define("controlPanel/control/controlPanelTabView",["require","backbone","marionette"],(function(e){var t=e("backbone");return e("marionette").ItemView.extend({temme,id:this.tab,isHidden:this.hidden}},toggle:function(e){this.$el.toggtrigger("cp:activate-view",this.tab)},events:{click:"activateView"},initialize:function(e){this.tab=e.tab,this.name=e.name,this.hidden=!!e.hidden},onRender:function(){return this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el),this}})})),define("controlPanel/control/controlPanelView",["require","backbone","marionette","jquery","underscore","controlPanel/control/controlPanelTabView","config/modules","app/appContext"],(function(e){var t=e("backbone"),i=e("marionette"),n=e("jquery"),s=e("underscore"),o=e("controlPanel/control/controlPanelTabView"),r=e("config/modules"),a=e("app/appContext");return t.View.extend({el:n("#control-panel"),controlPanelRegion:new i.Region({el:"#cp-body"}),initialize:function(){this.$el.css("top",-window.clientHeight*window.scaleProportion.y),this.toggleButton=n("#cp-toggle-button"),this.csbRootContainer=n("#csb-root-container"),this.activateCPButton(),a.bodyDisabled?this.toggleButton.hide():this.toggleButton.on("click",n.proxy(this.setActive,this)),r.isControlPanelEnabled()?(this.bindListeners(),this.initializeViewContainer(),this.renderHeaders(),this.showFirss.findByIndex(0);e&&e.activateView()},addTab:function(e,t,i){this.content.add(new e,t),this.tabs.add(new o({tab:t,name:i,hidden:"teeams");e&&e.$el.removeAttr("hidden")},initializeViewContainer:function(){this.content=new t.ChildViewContainer,this.tabs=new t.ChildViewContainer},renderHeaders:function(){var e=n("#cnction(t){t.render().$el.appendTo(e)})),a.isMini&&this.applyMiniHeader(e)},applyMiniHeader:function(e){var t=e.width(),i=e.children().filter((function(e,i){return(t-=n(i).outerWidth())<=30}));i.length&&(n(s.template(n("#control-panel-plus-template").html(),{})).appendTo(e),this.plusSign=n("#plus-sign"),this.plusContainer=n("#plus-container"),this.dropdownContainer=n("#plus-dropdown-contai(function(e,t){this.renderInPopup(t)}.bind(this)))},hidePlusDropdown:function(){this.dropdownContainer.removeClass("visible")},bindPlusListeners:function(){this.plusSign.click(function(){this.dropdownContainer.toggleClass("visible")}.bind(this)),this.plusContainer.mouseleave(this.hidePlusDropdown.bind(this)),this.dropdownContainer.click(this.hidePlusDropdown.bind(this))},renderInPopup:function(e){n(e).detach().prependTo(this.dropdownContainer)},bindListeners:function(){this.listenTo(this.model,"change:active",this.toggle),this.listenTo(t,"teams:data-received",this.showTeamsTabAndSubTabs),this.listenTo(t,"cp:activate-view",this.activateView),this.listenTo(t,"cp:activate-view",this.activateTab),this.listenTo(t,"cp:show-tab",this.showTab)},activateCPButton:function(){this.toggleButton.on("click",n.proxy(this.setActive,this)),this.toggleButton.removeClass("inactive")},showTab:function(e){var t=this.tabs.findByCustom(e.tab);t?(t.activateView(),!0!==this.model.get("active")&&this.setActive()):console.error("tab "+e.tab+" not found")},setActive:function(){var e=this;this.isCpActivated||(this.reactivateView(),this.isCpActivated=!0),void 0===this.showTimeout&&(this.showTimeout=setInterval((function(){clearInterval(e.showTimeout),delete e.showTimeout}),700),this.model.toggleActive())},toggle:function(){var e=this,i=this.model.get("active");"function"==typeof window.animationParams&&window.animationParams({collapsed:i}),this.model.get("withoutAnimation")?(this.$el.css("top",!0===i?0:-window.clientHeight*window.scaleProportion.y),t.trigger("cp:change-active",i)):!0===i?this.$el.animate({top:Container.toggleClass("cp-opened",i)}}):(t.trigger("cp:change-active",i),this.$el.animate({top:-window.clientHeight*window.scaleProportion.yContainer.toggleClass("cp-opened",i)}})),this.toggleButton.toggleClass("active",i),this.$el.toggleClass("cp-active",i),e.csbRootContainer.toggleClass("cp-opened",i)},activateView:function(e){var t=this.content.findByCustom(e);this.activeViewName=e,this.controlPanelRegion.currentView!==t&&this.contrame);this.controlPanelRegion.show(e)},activateTab:function(e){var i=this.tabs.findByCustom(e);this.activeView!==i&&(t.trigger("data:send-GA-stats",{eventCategory:e.toUpperCase(),eventAction:"click"}),this.activeView&&this.activeView.toggle(!1),this.activeView=i,i.toggle(!0))}})})),define("opta/widgets/optaFactsModel",["require","shared/utils","backbone"],(function(e){var t=e("shared/utils");return e("backbone").Model.extend({defaults:{sport:"football",widget:"optafacts",template:"carousel",show_logo:"false",breakpoints:"400"},initialize:function(){t.isOptaFactsTestMode()?(this.set("competition",5),this.set("season",2016),this.set("match",914017)):(this.set("competition",window.optaCompetitionId),this.set("season",window.optaSeason),this.splebar",t):(e=e||self).SimpleBar=t()ng){try{return!!e(tion(e){return i!OString"==("Can't call method on "+e);return e},a=function(e){return Obje){return isNetpeof e?null!==e:"ray||function(e){return"Array"==n(e)},f="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?gl(t={exports:{}},t.exports),t.exports}var v,y,w,b,S="object"==typeof window&&window&&window.Math==Math?window:"object"==typeof self&&self&&self.Math==Math{},"a",{get:function(){return 7}}).a})),C=S.document}),"in convert object to primitive valu;reablei)ry{M(2019 Denis Pushkarev (zl0===e?t((function(){return!Strin|(F[e]=_&&B[e]||(0),new(void 0===i?Array:i)(0===t?0:t)},U=function(t,i){var n=1==t,s=2==t,r=3==t,l=4==t,c=6==t,u=5==t||c,h=i||z;return function(i,p,m){for(var f,g,v=a(i),y=o(v),w=fuunction(e,n,s){return t.call(i,e,n,s)}}(p,m),b=d(y.length),S=0,T=n?h(i,b):s?h(i,0):void 0;b>S;S++)if((u||S in y)&&(g=w(f=y[S],S,v),t))if(n)T[S]=g;else if(g)switch(t){case 3:return!0;case 5:return f;case 6:return S;case 2:T.push(f)}else if(l)return!1;return c?-1:r||l?l:T}},j=V("species"),q={}.propertyIsEnumerable,G=Object.getOwnProper t=Gable}:q},K=function(e){return o(r(e))},Y={}.hasOwnProperty,J=function(e,t){return Y.call(e,t)},X=Ob(J(e,t))return N(!W.f.call(e,t),e[t])}},Z=L("native-function-to-string",Function.toString),ee=S.WeakMap,te="function"==typeof ee&&/native code/.test(Z.call(ee)),ie=L("keys"),ne={},se=S.WeakMap;if(te){var oe=un=f}},w=function(e){return ae.call(oe,e)}}else{var ce=i!0y=function(e){return J(e,ce)?e[ce]:{}},w=function(e){return J(e,:function( receivthis&&t(this).source||Z.call(this)}))})),de=Math.max,pe=Math.min,me=(!1,funcr i=u(e);return i<0?de(i+t,0):pe(i,t)}(i,s);for(0;s>o;o++)if(o ins++])&&(~me(o,i)||o.push(i));return o},ge=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ve=ge.concat("length","prototype"),ye={f:Object.getOwnPropertyNames||function(e){return fe(e,ve)}},we={f:Object.getOwnPropertySy(e)++){var r=i[o];J(e,r)||n!=Pe&&("functionring(e).replace(Ce,".").toLowerCase()},ke=Ee.data={},Pe=Ee.NATIVE=&s.sham)&&M(o,"sham",!0),he(i,n,o,e)}},xe=U(2);Me({target:urn{foo:1}},1!==e.filter(Boolean).foo})))},{filter:function(e){reall(null,i||function(){throw 1},1)}))},ion(e){return De(this,e,arguments[1])}:He;Me({target:"Array",proto:!0,forced:[].forEach!=Re},{forEach:Re}),Me({target:"Array",proto:!0,forced:Le("reduce")},{reduce:function(t){return function(t,i,n,s,r){e(i);var l=a(t),c=o(l),u=d(l.length),h=0;if(n<2)for(;;){if(h in c){s=c[h],h+=1;break}if(u<=(h+=1))throw TypeError("Reduce of empty array with no initial value")}for(;u>h;h+=1)h in c&&(s=i(s,c[h],h,l));return s}(this,t,arguments.length,arguments[1])}});var _e=O.f,Fe=Function.prototype,Be=Fe.toString,Ve=/^\s*function ([^ (]*)/;!T||"name"inthis).match(Ve)[1]}catect.keys||function(e){returnhiall(u,c=h[p++])&&(i[c]=u[c]);return i}:ze;Me({target:"Object",stat:!0,forced:Object.assign!==Ue},{assign:Ue});var je="\t\n\v\f\r                　\u2028\u2029\ufeff",qe="["+je+"]",Ge=RegExp("^"+qe+qe+"*"),We=RegExp(qe+qe+"*$"),Ke=S.parseInt,Ye=/^[-+]?0[xX]/,Je=8!==Ke(je+"08")||22!==Ke(je+"0x16")?function(e,t){var i=function(e,t){return e=(e=(e=String(r(e))).replace(Ge,"")).replace(We,"")}(String(e));return Ke(i,t>>>0||(Ye.test(i)?16:10))}:Ke;Me({global:!0,forced:parseInt!=Je},{parseInt:Je});var Xe,Qe,Ze=RegExp.prototype.exec,et=String.prototype.replace,tt=Ze,it=(Xe=/a/,Qe=/b*/g,Ze.call(Xe,"a"),Ze.call(Qe,"a"),0!==Xe.last1;s<arguments.length-2;s++)void 0===arguments[s]&&(n[s]=void 0)})),n});var st=tt;Me({target:"RegExp",proto:!0,forced:/./.exec!==st},{exec:st});var ot=function(e,t,i){return t+(i?function(e,t,i){var n,s,o=String(r(e)),a=u(t),l=o.length;return a<0||a>=l?"":(n=o.charCodeAt(a))<55296||n>56319||a+1===l||(s=o.charCodeAr("RegExp#exec called oion(){varts)};tion(e){return===u&&(s.lastIndex=ot(o,d(s.lastIndex),r)),c++}return 0===c?null:l}]}));var ht=Math.max,dt=Math.min,pt=Math.floor,mt=/\$([$&`']|r.charAt(1):s[h-1]+r.charAt(1):t}a=s[u-1]}return void 0===a?"":a}))}})),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var vt=S[gt],yt=vt&&vt.prototype;if(yt&&yt.forEach!==Re)try{M(yt,"forEach",Re)}catch(e){yt.forEach=Re}}var wt="Expected a function",bt=/^\s+|\s+$/g,St=/^[-+]0x[0-9a-f]+$/i,Tt=/^0b[01]+$/i,Ct=/^0o[0-7]+$/i,Et=parseInt,At="object"==typeof f&&f&&f.Object===Object&&f,kt="object"==typeof self&&self&&self.Object===Object&&self,Pt=At||kt||Function("return this")(),It=Object.prototype.toString,Ot=Math.max,Nt=Math.min,Mt=function(){return Pt.Date.now()};function xt(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Lt(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==It.call(e)}(e))return NaN;if(xt(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=xt(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(bt,"");var i=Tt.test(eturn void 0===a?r:g(Mt())},v}(e,t,{leading:n,maxWait:t,trailing:s})},Dt=/^\s+|\s+$/g,Rt=/^[-+]0x[0-9a-f]+$/i,_t=/^0b[01]+$/i,Ft=/^0o[0-7]+$/i,Bt=parseInt,Vt="object"==typeof f&&f&&f.Object===Object&&f,$t="object"==typeof self&&self&&self.Object===Object&&self,zt=Vt||$t||Function("re.toString,jt=Math.max,qt=Math.min,Gt=function(){return zt.Date.now()};.test(=0,n=l=s=a=void 0},v.flush=function(){return void 0===a?r:g(Gt())},v},Jt="__lodash_hash_undefined__",Xt=/^\[object .+?Constructor\]$/,Qt="object"==typeof f&&f&&f.Object===Object&&f,Zt="object"==typeof self&&self&&self.Object===Object&&self,ei=Qt||Zt||Function("return this")(),ti=Array.prototype,ii=ec(si&&si.keys&&si.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ri=ii.toString,ai=ni.hasOwnProperty,li=ni.toString,ci=RegExp("^"+ri.call(ai).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ui=ti.splice,hi=yi(ei,"Map"),di=yi(Object,"create");function pi(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function mi(e){var t=-1,i=on bi(e){var tion"==t)}pi.prototyotype.delete=funci){var i=t[e];retfunction(e){var te.set=function(e,t)void 0===t?Jt:t,thisa__,i=gi(t,e);ret=function(e){var :t[i][1]},mi.protar i=this.__data__,function(){this.__data__={hash:new pi,map:new(hi||mi),string:new pi}},fi.prototype.delete=function(e){return vi(this,e).delete(e)},fihis,e).get(e)},fis(e)},fi.prototype.set=fuis.__entries__;i<n.length;i++){var s=n[i];e.call(t,s[1],s[0])}},t}()}(),Ci="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,Ei="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),Ai="ftion(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},ki=["top","right","bottom","left","width"instae,snction(e){return t.reduce((function(t,i){return t+xi(e["borp,a,leturns,rype.hasActive=function(){return this.activeObservations present.");var i=Ii.getInstance(),n=new Bi(t,pe[e]=function(){var t;return(t=Vi.get(this))[e].apply(t,arguments)}}));var zi=void 0!==Ei.ResizeObserver?Ei.ResizeObserver:$i,Ui=!("undefind(t);var n=t.getBs),64,{leading:t!==o.left&&o.lements),windowbreak;case void 0:e[n]=!0;break;default:e[n]=t.value}}return e}),{})},e.removeObserversimplebar]")ft:t.left+(window.pageXOffset||d(),this.scs.classNames.visbserver.observ"y"),this.toggleTras.scrollbarMaxSize&&rm="x"===t?"translate3d(axis[e].isOverflowing?Overflowing||this.axiover)):this.axis[e].trr),this.axis[e].s.axis[e].isViarTimeout(this.removePreventClickId),this.removePreventClickId=null)},t.getContentElement=function(){return this.contentEl},t.getScre.cancel()},t.unMount=fuon(e){return nullseX<=e.left+e.width&&this.mouseY>=e.top&&this.mouseY<=e.top+e.height},e}();return qi.defaultOptions={autoHide:!0,forceVisible:!1,classNames:{contentEl:"simplebar-content",contentWrapper:"simplebar-content-wrapper",offset:"simplebar-offset",mask:"simplebar-mask",wrapper:"simplebar-wrapper",placeholder:"simplebar-placeholder",scrollbar:"simplebar-scrollbar",track:"simplebar-track",heightAutoObserverWrapperEl:"simplebar-height-auto-observer-wrapper",heightAutoObserverEl:"simplebar-height-auto-observer",visible:"simplebar-visible",horizontal:"simplebar-horizontal",vertical:"simplebar-vertical",hover:"simplebar-hover",dragging:"simplebar-dragging"},scrollbarMinSize:25,scrollbarMaxSize:0,timeout:1e3},Ui&&qi.initHtmlApi(),qi})),define("units/Scrollbar",["require","simplebar","backbone"],(function(e){var t=e("simplebar"),i=e("backbone");function n(){}return n.prototype.init=function(e){var n;if((e instanceof $||e instanceof i.$)&&e.length){if(this.isInitialized(e))return e;if(n=e.get(0))return e.data("scrollbar",new t(n,{autoHide:!1})),this.update(e),e}},n.prototype.isInitialized=function(e){return(e instanceof $||e instanceof i.$)&&e.length&&!!e.data("scrollbar")},n.prototype.update=function(e,t){var i;if(e){if(this.isInitialized(e))if(i=e.data("scrollbar"),t){var n=i.getScrollElement();t="end"===t?0:t,i.axis.y.isOverflowing?n.scrollTop=t:i.axis.x.isOverflowing&&(n.scrollLeft=t)}else i.recalculate();return e}},n.prototype.updateOrInit=function(e,t){return this.isInitialized(e)?this.update(e,t):this.init(e),e},new n})),define("shared/controlsV",["require","marionette","underscore","units/Scrollbar","shared/utils"],(function(e){var t=e("marionette"),i=e("underscore"),n=e("units/Scrollbar"),s=e("shared/utils");return t.ItemView.extend({constructor:function(e){this.ui={},this.placeholders&&i.extend(this.ui,this.placeholders),t.ItemView.call(this,e),this.listenTo(Backbone,"cp:change-active",this.showScrollbar)},render:function(){this.isClosed=!1,this.triggerMethod("before:render",this),this.triggerMethod("item:before:render",this);var e=this.serializeData();e=this.mixinTemplateHelpers(e);var i=this.getTemplate(),n=t.Renderer.render(i,e);for(var s in this.$el.html(n),this.bindUIElements(),this.ui)if(this.ui.hasOwnProperty(s)){var o=this.views[s];o&&(o.setElement(this.ui[s]),o.render())}return this.triggerMethod("rendis),this},rerenderView:function(e){var t=this.views[e];t&&t.render()},onShow:function(){this.showScrollbar()},updateScrollbar:function(e){var t=this.ui.content||s.getDeepProperty(this.ui,this.scrollbarContainerPath);n.update(t,e)},showScrollbar:function(){var e=this.ui.content||s.getDeepProperty(this.ui,this.scrollbarContainerPath);n.updateOrInit(e,0)}})})),define("opta/paramsValidator",["shared/utils"],(function(){var e=require("shared/utils");e.fillWindowParamsFromQueryString(["optaCompetitionId","optaMatchId","optaSeason","optaSubscriptionId"]);var t=function(){this.errors=[],this.validation={optaFacts:{params:[{value:window.optaMatchId,message:"Match ID"},{value:window.optaCompetitionId,message:"Competition ID"},{value:window.optaSubscriptionId,message:"Subscription ID"}],regexp:/^(undefined)|(null)|(0)$|^$/i},liveAction:{params:[{value:window.uuid,message:"Match UUID"},{value:window.leagueUuid,message:"Competition UUID"},{value:window.tmclUuid,message:"Season UUID"}],regexp:/^(INJECT_UUID)|(LEAGUE_UUID)|(TMCL_UUID)$/i}}};return t.prototype.paramsValidator=function(e){var t=this,i=this.validation[e].params,n=this.validation[e].regexp;i.forEach((function(e){e.isProper=t.checkParams(e.value,n)})),this.validate(i)},t.prototype.optaFactsValidator=function(){e.isOptaFactsTestMode()||this.paramsValidator("optaFacts")},t.prototype.liveActionValidator=fction")},t.prototype.checkParams=function(e,t){return e&&!e.match(t)},t.prototype.validate=funcrors=[]),e.forEach((function(e){e.isProper||t.errors.push(e.message)})),this.errors.length>0)throw new Error("Following opta params do not exist: "+this.errors.join(", "))},new t})),define("opta/opta",["require","jquery","shared/utils"],(function(e){var t=e("jquery"),i=e("shared/utils"),n=i.splitGetParameters(),s=n.optaurl||"http://widget.cloud.opta.net/v3/v3.opta-widgets.js",o=n.optassl||"https://secure.widget.cloud.opta.net/v3/v3.opta-widgets.js",r=function(){this.handlers=[],this.index=0,this.optaNamingPattern=new RegExp("(OptaEmbedded_|Opta_)[0-9]{1,}(_[a-zA-Z])*$","i"),this.optaWidgetLocation="https:"===window.location.protocol?o:s,this.defaultOptaLang="en_GB",this.optaLangMap={ar:"ar_SA",bg:"bg_BG",cs:"cs_CZ",da:"da_DK",de:"de_DE",el:"el_GR",en:"en_GB",es:"es_ES",fr:"fr_FR",id:"id_ID",it:"it_IT",ja:"ja_JP",ko:"ko_KR",nl:"nl_NL",pl:"pl_PL",pt:"pt_BR",ro:"ro_RO",ru:"ru_RU",sv:"sv_SE",th:"th_TH",tr:"tr_TR",vi:"vi_VN",zht:"zh_HK",zhs:"zh_CN"},this.setOptaParams()};return r.prototype.createDOM=function(e){var t=document.createElement("opta-widget");for(var i in e)e.hasOwnProperty(i)&&t.setAttribute(i,e[i]);var n=document.createElement("div");return n.style.visibility="hidden",n.className="opta-widget-wrapper",n.appendChild(t),n},r.prototype.handleWidgetEvent=function(e,t){if(-1!==["drawn","error"].indexOf(e)){var i=t.widget;if(!i)throw new Error("widget object must be supplied in the event object.");var n=t.error;if("error"===e&&!n)throw new Error("error object must be supplied in the event object.");var s=this.handlers[i.id];if(s){if(s.timeout&&(clearTimeout(s.timeout),delete s.timeout),!s.errored&&!s.succeeded){s["drawn"===e?"succeeded":"errored"]=!0;var o=s["drawn"===e?"successHandler":"errorHandler"];if(!o)throw new Error("No handler found for widget id:"+i.id+". All widgets must be initialized using optaHandler.");if(o(n),"drawn"===e){var r=s.element;r&&(r.style.visibility="visible")}}}else if(!this.optaNamingPattern.test(i.id))throw new Error("Widget object not found.")}},r.prototype.addWidget=function(e,i,n){if("object"!=typeof e)throw new Error("options must be an object.");if("function"!=typeof i)throw new Error("errorHandler must be a function.");var s="OptaEmbedded_"+this.index++,o=this.createDOM(t.extend({},e,{widget_id:s}));if(this.handlers[s])throw new Error("Handler already exists.");return this.handlers[s]={errorHandler:i||function(){},successHandler:n||function(){},element:o,initialized:!1,errored:!1,succeeded:!1},o},r.prototype.embedOptaCssFile=function(){var e=i.getOptaSportName();t("<link/>",{rel:"stylesheet",type:"text/css",href:window.location.protocol+"//secure.widget.cloud.opta.net/v3/css/v3."+e+".opta-widgets.css"}).appendTo("head")},r.prototype.setOptaParams=function(){var e=this.defaultOptaLang;n.lang&&this.optaLangMap.hasOwnProperty(n.lang)&&(e=this.optaLangMap[n.lang]);var t={subscription_id:window.optaSubscriptionId,language:e,timezone:"user",load_when_visible:!1,opta_tracking:"false"!==n.datatracking},s=n.hiveurl||window.hiveUrl;"true"===n.testpremium&&(t.hive_test_token="p4japgvya5ja1ll8fis1osoxo"),i.isPremVis()&&(t.hive_app_type=window.isVis?"PremVis":"PremCSB"),"HIVE_URL"!==s&&(t.hive_url=("http:"===window.location.protocol?"ws":"wss")+"://"+s),t.hive_user_token=n.token||window.validationToken,t.hive_csb_version=window.customerVersion,n.imageconfig&&(t.config_jsonp=n.imageconfig),window.opta_settings=t},r.prototype.addOptaEventHandleleWidgetEvent("drawn",t),Backbone.trigger("csb:opta-widget-drawn",t)})),window.Opta.events.subscribe("widget.error",(function(t){e.handleWidgetEvent("error",t)})),window.Opta.events.subscribe("match.state",(function(e){e&&e.hasOwnProperty("state")&&window.mediator.publish("app:premium-vis-started",e.state)}))},r.prototype.startOpta=function(){try{window.Opta.checkPermissions(),window.Opta.start()}catch(e){throw e}},r.prototype.ready=function(){var e=this;return new Promise((function(i,n){window.optaHandlerPromiseDone&&i(e.startOpta.bind(e)),window.optaInitPromise||(winvar s=!1,o=setTimeout((function(){n("Opta script load timeout"),s=!0}),1e4);t.getScript(e.optaWidgetLocation,w.console.warn("Opta did not bootstrap")on(){e.embedOptaCssFile(),e.addOptaEventHandlers(),e.startOpta(),i()})))}))}))),window.optaInitPromise.then((function(){window.optaHandlerPromiseDone=!0,i(e.startOpta.bind(e))})).catch((function(e){n(e)}))}))},new r})),define("controlPanel/keyStats/optaFacts/keyStatsOptaFactsV",["require","shared/controlsV","backbone","opta/paramsValidator","units/loaderElementsNames","opta/opta"],(function(e){var t=e("shared/controlsV"),i=e("backbone"),n=e("opta/paramsValidator"),s=n.optaFactsValidator.bind(n),o=e("units/loaderElementsNames").optaWidgetFacts,r=e("opta/opta");return t.extend({initialize:function(){var e=this;try{s()}catch(e){this.widgetError(e)}this.$el.html('<div id="key-stats-opta-facts-csb" class="opta-facts-csb"><div class="key-stats-opta-logo"></div></div>'),r.ready().then((function(t){var i=r.addWidget(e.model.attributes,e.widgetError,e.widgetSuccess.bind(e)),n=window.mini?$("#csb-container").width()+"px":"410px";$("#stats-opta-facts-container").css("width",n).append(i),t()})).catch((function(t){e.widgetError(t)}))},widgetSuccess:function(){this.widgetReady=!0,this.appendWidget(),window.loader.changeElementsState(o)},widgetError:function(e){window.loader.changeElementsState(o),window.console.warn("Key stats opta facts not initialized:",e),$("#key-stats-opta-facts-csb").css("display","none"),i.trigger("csb:key-stats-opta-facts-widget-error")},render:function(){},onShow:function(){this.appendWidget()},appendWidget:function(){this.widgetReady&&($("#key-stats-opta-facts-csb #stats-opta-facts-container").length||$("#stats-opta-facts-container").appendTo("#key-stats-opta-facts-csb"),$("#content-prematch").show(),$("#control-panel").addClass("with-opta-facts"))}})})),define("controlPanel/keyStats/summary/summaryItems/blockItemM",["require","backbone","shared/utils","$enums"],(function(e){var t=e("backbone"),i=e("shared/utils"),n=e("$enums");return t.Model.extend({defaults:{title:"default",score:1,valueType:n.StatsValueType.Int,type:"default"},initialize:function(){switch(this.get("valueType")){case n.StatsValueType.Int:this.set("displayValue",this.get("score").toFixed(0));break;case n.StatsValueType.Percentage:var e=i.toPercentage(this.get("score"));e="0%"===e?"-":e,this.set("displayValue",e);break;case n.StatsValueType.Float:this.set("displayValue",this.get("score").toFixed(2))}}})})),define("controlPanel/keyStats/summary/summaryItems/blockItemC",["require","backbone","./blockItemM"],(function(e){var t=e("backbone"),i=e("./blockItemM");return t.Collection.extend({model:i})})),define("controlPanel/keyStats/summary/summaryItems/histogramM",["require","backbone","shared/enums"],(function(e){var t=e("backbone"),i=e("shared/enums");return t.Model.extend({defaults:{value:0,barCount:0,barPercent:0,title:"",max:1,direction:"home",barColor1:"#8A45B9",barColor2:"#FFFFFF"},initialize:function(){this.setHistlors",(function(e){this.setHistogramColor({home:e.home,away:e.away})})),this.on("change:max change:value",this.calculateBars)},calculateBars:function(){var e=this.get("value"),t=this.get("max");this.set("barCount",(e/t*10).toFixed(0)),this.set("barPercent",(e/t*100).toFixed(0))},setHistogramColor:function(e){e=e||{home:{},away:{}},"home"===this.get("direction")?(this.set("barColor1","#"+(e.home.Color1||i.DefaultColors.Home)),this.set("barColor2","#"+(e.home.Color2||i.DefaultColors.Home))):(this.set("barColor1","#"+(e.away.Color1||i.DefaultColors.Away)),this.set("barColor2","#"+(e.away.Color2||i.DefaultColors.Away)))}})})),define("controlPanel/keyStats/summary/summaryItemM",["require","backbone","./summaryItems/blockItemC","./summaryItems/histogramM"],(function(e){var t=e("backbone"),i=e("./summaryItems/blockItemC"),n=e("./summaryItems/histogramM");return t.Model.extend({initModels:function(e){this.set("scoredHistogram",new n({title:e.scoredTitle,direction:e.direction})),this.set("concededHistogram",new n({title:e.concededTitle,direction:e.direction})),this.set("otherData",new i)},updateData:function(e,t){var i=this.get("scoredHistogram"),n=this.get("concededHistogram");i.set("value",e.scored),i.set("max",e.max),n.set("value",e.conceded),n.set("max",e.max),this.get("otherData").reset(t)}})})),define("controlPanel/keyStats/summary/summaryM",["require","backbone","controlPanel/keyStats/summary/summaryItemM"],(function(e){var t=e("backbone"),i=e("controlPanel/keyStats/summary/summaryItemM");return t.Model.extend({defaults:{homeFilter:"all-home",awayFilter:"all-away",dataReceived:!1},initialize:function(){this.defineHeaders(),this.gameStarted=!0,this.homeModel=new i,this.awayModel=new i,this.homeModel.initModels({scoredTitle:this.headers.avgScored,concededTitle:this.headers.avgConceded,direction:"home"}),this.awayModel.initModels({scoredTitle:this.headers.avgScored,concededTitle:this.headers.avgConceded,direction:"away"}),this.bindListeners()},bindListeners:function(){this.listenTo(t,"data:summary",(function(e){this.homeSummary=e.HomeStatistic,this.awaySummary=e.AwayStatistic,this.set("dataReceived",!0,{silent:this.gameStarted}),this.setCurrentStatistic()})),this.listenTo(t,"app:game-not-started",(function(){this.gameStarted=!1})),this.on("change:homeFilter",this.setCurrentStatistic,this),this.on("change:awayFilter",this.setCurrentStatistic,this)},setCurrentStatistic:function(){var e="ALL-HOME"===this.get("homeFilter").toUpperCase()?this.homeSummary.All:this.homeSummary.Home,t="ALL-AWAY"===this.get("awayFilter").toUpperCase()?this.awaySummary.All:this.awaySummary.Away,i=Math.max(e.averageScored,e.averageConceded,t.averageScored,t.averageConceded),n={scored:e.averageScored.toFixed(2),conceded:e.averageConceded.toFixed(2),max:i},s={scored:t.averageScored.toFixed(2),conceded:t.averageConceded.toFixed(2),max:i},o=this.getBlockData(e,t);this.homeModel.updateData(n,o.home),this.awayModel.updateData(s,o.away)},defineHeaders:function(){throw new Error("You have to define your own defineHeaders method in SummaryM's childs")},getBlockData:function(){throw new Error("You have to define your own getBlockData in SummaryM's childs")}})})),define("$summaryM",["require","controlPanel/keyStats/summary/summaryM","localisation/manager","$enums"],(function(e){var t=e("controlPanel/keyStats/summary/summaryM"),i=e("localisation/manager"),n=e("$enums");return t.extend({defineHeaders:function(){this.headers={avgScored:i.get("KST->SUMMARY->AVE_GOALS_SCORED"),avgConceded:i.get("KST->SUMMARY->AVE_GOALS_CONCEDED"),leadingHalf:i.get("KST->SUMMARY->1ST_TO_SCORE"),firstToScore:i.get("KST->SUMMARY->LEADING_AT_HT_SHORT"),wins:i.get("KST->SUMMARY->WINS"),losses:i.get("KST->SUMMARY->LOSSES"),draws:i.get("KST->SUMMARY->DRAWS")}},getBlockData:function(e,t){return{home:[{title:this.headers.wins,score:e.wins},{title:this.headers.draws,score:e.draws},{title:this.headers.losses,score:e.losses},{title:this.headers.leadingHalf,score:e.firstToScore,valueType:n.StatsValueType.Percentage,extended:!0},{title:this.headers.firstToScore,score:e.leadingAtHT,valueType:n.StatsValueType.Percentage,extended:!0}],away:[{title:this.headers.wins,score:t.wins},{title:this.headers.draws,score:t.draws},{title:this.headers.losses,score:t.losses},{title:this.headers.leadingHalf,score:t.firstToScore,valueType:n.StatsValueType.Percentage,extended:!0},{title:this.headers.firstToScore,score:t.leadingAtHT,valueType:n.StatsValueType.Percentage,extended:!0}]}}})})),define("controlPanel/control/switchControl/switchControlM",["require","backbone","shared/logger"],(function(e){var t=e("backbone"),i=e("shared/logger");return t.Model.extend({defaults:{e){this.initOptions=e,this.initializeOptions(e),this.bindListeners()},initializeOptions:function(e){var t=[],i=e.source;for(var n in i)i.hasOwnProperty(n)&&t.push(i[n]);this.set("count",t.length),this.set("options",t),this.set("selected",e.defaultKeyt=_.filter(this.get("options"),(function(t){return String(t.key)===e}));if(t.length)return t[0].name;i.debug("switchControlM: no such option")},setOptionNameByKey:function(e,t){for(var i=this.get("options"),n=i.length-1;n>=0;n--)if(i[n].key===e){i[n].name=t;break}this.set("options",i)},bindListeners:function(){}})})),define("controlPanel/control/switchControl/switchControlV",["require","marionette","./switchControlM"],(function(e){var t=e("marionction(){return"#switch-control-"+this.model.get("mode")+"-template"},initialize:function(e){e.model||(this.model=new i(e))},ui:{container:".switch-control",label:".switch-selected-text"},events:{"click .switch-control-option":"clicked","click .switch-selected-text, .switch-icon":"changeCollapsed","mouseleave .switch-control":"collapse"},modelEvents:{"change:options":"render","change:collapsed":"handleCollapsed"},onRender:function(){var e=this.model.get("selected");this.adelegateEvents():function(){thisis.ui.coed:function(e){var t=e.target.id;this.selectByKey(t),this.collapse()},activate:function(e){this.$(".switch-control-option.switch-active").toggleClass("switch-active",!1),this.$("#"+e).toggleClass("switch-active",!0),this.ui.label.text(this.model.getOptionNameByKey(e))},onClose:function(){this.undelegateEvents()},selectByKey:function(e){this.model.get("selected")!==e&&(this.trigger("switched",e),this.model.set("selected",e),this.activate(e))}})})),define("config/filterSettings",["require","jquery"],(function(e){var t=e("jquery"),i={keyStats:{summary:{home:"all",away:"all"},inGame:{filter:"all"}},form:{home:"all",away:"all"},headToHead:{stadium:"all"},teams:{assists:{home:"all",away:"all"},goals:{home:"all",away:"all"},mvp:{home:"all",away:"all"}},commentary:{all:"all"}},n=window.clientConfig;return"string"==typeof n&&"CLIENT_CONFIG"!==n?(n=JSON.parse(n),t.extend(!0,{},i,n)):i})),define("controlPanel/keyStats/summary/summaryItems/histogramV",["require","marionette"],(function(e){return e("marionette").ItemView.extend({className:"summary-histogram",getTemplate:function(){return"#summary-histograms-filled-template"},initialize:function(){this.listenTo(this.model,"change:barPercent",this.render),this.listenTo(this.model,"change:barColor1",this.render),this.listenTo(this.model,"change:barColor2",this.render)}})})),define("controlPanel/keyStats/summary/summaryItems/blockItemV",["require","marionette","./blockItemM"],(function(e){var t=e("marionette"),i=e("./blockItemM");return t.ItemView.extend({className:function(){var e="summary-"+this.model.get("type")+"-block";return this.model.get("extended")?e+" summary-block-item-extended":e+" summary-block-item"},template:"#summary-block-item",model:i})})),define("controlPanel/keyStats/summary/summaryItems/blockItemCV",["require","marionette","./blockItemV"],(function(e){var t=e("marionette"),i=e("./blockItemV");return t.CollectionView.extend({itemView:i})})),define("controlPanel/keyStats/summary/summaryItemV",["require","shared/controlsV","./summaryItems/histogramV","./summaryItems/blockItemCV"],(function(e){var t=e("shared/controlsV"),i=e("./summaryItems/histogramV"),n=e("./summaryItems/blockItemCV");return t.extend({template:"#summary-item-template",placeholders:{histogramScored:".summary-histogram-scored",histogramConceded:".summary-histogram-conceded",other:".summary-other-data"},initialize:function(){this.views={histogramScored:new i({model:this.model.get("scoredHistogram")}),histogramConceded:new i({model:this.model.get("concededHistogram")}),other:new n({collection:this.model.get("otherData")})}}})})),define("controlPanel/keyStats/summary/summaryV",["require","shared/controlsV","controlPanel/control/switchControl/switchControlV","localisation/manager","config/filterSettings","controlPanel/keyStats/summary/summaryItemV","app/appContext"],(function(e){var t=e("shared/controlsV"),i=e("controlPanel/control/switchControl/switchControlV"),n=e("localisation/manager"),s=e("config/filterSettings"),o=e("controlPanel/keyStats/summary/summaryItemV"),r=e("app/appContext");return t.extend({getTemplate:function(){return this.model.get("dataReceived")?"#summary-template":"#summary-template-empty"},className:"key-stats-summary",placeholders:{content:"#summary-content",summaryHome:"#summary-content-home",summaryAway:"#summary-content-away",awayFilter:"#summary-away-filter",homeFilter:"#summary-home-filter"},initialize:function(){var e="all"===s.keyStats.summary.home?"all-home":s.keyStats.summary.home,t="all"===s.keyStats.summary.away?"all-away":s.keyStats.summary.away,a=r.isMini?"mini":"filter";this.defaultDataInitialized=!1,this.cid="summary",this.views={homeFilter:new i({source:[{name:window.isUsSport?n.get("AWAY"):n.get("HOME"),key:"home"},{name:n.get("ALL"),key:"all-home"}],defaultKey:e,mode:a}),awayFilter:new i({source:[{name:window.isUsSport?n.get("HOME"):n.get("AWAY"),key:"away"},{name:n.get("ALL"),key:"all-away"}],defaultKey:t,mode:a}),summaryHome:new o({model:this.model.homeModel}),summaryAway:new o({model:this.model.awayModel})},this.bindListeners()},onRender:function(){this.listenTo(this.views.homeFilter,"switched",this.homeSwitched),this.listenTo(this.views.awayFilter,"switched",this.awaySwitched)},onShow:function(){t.prototype.onShow.call(this),!this.defaultDataInitialized&&this.model.get("dataReceived")&&(this.models.render,this),this.model.on("change:dataReceived",this.onShow,this)},homeSwitched:function(e){this.model.set("homeFilter",e)},awaySwitched:function(e){this.model.set("awayFilter",e)}})})),define("controlPanel/control/subMenu/subMenuC",["require","backbone"],(function(e){var t=e("backbone"),i=t.Model.extend({defaults:{tabName:"",displayName:"",selected:!1},itemSelected:function(){!0!==this.get("selected")&&(this.trigger("item-selected",this.toJSON()),this.set("selected",!0))}});return t.Collection.extend({model:i,initialize:function(){this.on("item-selected",(function(e){this.each((function(e){e.set("selected",!1)})),this.trigger("tab-selected",e)}))}})})),define("controlPanel/control/subMenu/subMenuCV",["require","marionette"],(function(e){var t=e("marionette"),i=t.ItemView.extend({template:"#sub-tab-template",events:{click:"handleClick"},initialize:function(){!0===this.model.get("selected")&&this.$el.toggleClass("selected",!0),this.listenTo(this.model,"change",(function(){this.$el.toggleClass("selected",this.model.get("selected")||!1)})),this.$el.attr("id",this.model.get("tabName")+"-sub-tab"),this.el.style.display=this.model.get("isHidden")?"none":null},handleClick:function(){this.model.itemSelected(),Backbone.trigger("data:send-GA-stats",{eventCategory:this.model.get("tabName").toUpperCase(),eventAction:"click"})}});return t.CollectionView.extend({itemView:i})})),define("controlPanel/control/subMenu/subTabView",["require","backbone","marionette","shared/utils","controlPanel/control/subMenu/subMenuC","controlPanel/control/subMenu/subMenuCV","units/Scrollbar"],(function(e){var t=e("backbone"),i=e("marionette"),n=e("shared/utils"),s=e("controlPanel/control/subMenu/subMenuC"),o=e("controlPanel/control/subMenu/subMenuCV"),r=e("units/Scrollbar");return i.Layout.extend({_initialize:function(){this.menuItems=new s,this.menuView=new o({collection:this.menuItems}),this.contentViews=new t.ChildViewContainer},bindListeners:function(){"#teams-template"===this.template&&this.listenTo(t,"teams:data-received",this.setSubTabVisible.bind(this)),this.listenTo(this.menuItems,"tab-selected",(function(e){var t=e.tabName;this.getView(t)&&(this.content.reset(),this.setSelectedView(t),this.content.show(this.getSelected{this.menuItems.models.find((function(t){return t.get("tabName")===eateChildViews:function(){this.contentViews=new t.ChildViewContainer},getView:function(e){return this.contentViews.findByCustom(e)},setSelectedView:function(e){this.selectedView=e},getSelectedView:function(){return this.getView(this.selectedView)},onShow:function(){this.bindListeners(),this.menu.show(this.menuView),this.content.show(this.getSelectedView()),this.tabsRendered&&this.tabsRendered()},hideTeamsSubMenu:functioate&&this.menuItems.models.forEach((function(e){e.set("isHidden",!0)}))},selectFirstChildView:function()r e=this.menuItems.models.find((function(e){return!e.get("isHidden")}))||this.menuItems.models[0];this.content.reset(),this.setSelectedView(e.get("tabName")),!0!==e.get("selected")&&e.set("selected",!0)}},getScrollbarContainer:function(){var e=this.getSelectedView(),t=e&&e.ui&&e.ui.content;return e&&!t&eScrollbar:function(){var e=this.getScrollbarContainer();r.update(e)}})})),define("controlPanel/statItem/statItemV",["require","marionette"],(function(e){return e("marionette").ItemView.extend({className:"stat-item",getTemplate:function(){return"#stat-item-template"},initialize:function(){this.listenTo(this.model,"change:homeValue change:awayValue",this.render)}})})),define("controlPanel/keyStats/inGame/inGameV",["require","shared/controlsV","controlPanel/statItem/statItemV","marionette"],(function(e){var t=e("shared/controlsV"),i=e("controlPanel/statItem/statItemV"),n=e("marionette").CollectionView.extend({itemView:i});return t.extend({getTemplate:function(){return this.model.get("gameStarted")?"#in-game-template":"#in-game-not-started-template"},placeholders:{filter:"#in-game-filter",collectionView:"#in-game-stats",content:"#in-game-stats-container"},initialize:function(){this.cid="in-game",this.views={},this.views.filter=this.initializeFilters(),this.views.collectionView=new n({collection:this.model.statsCollection})},onRender:function(){this.bindListeners()},bindListeners:function(){this.listenTo(this.views.filter,"switched"Backbone,"event:hitched:function(e){this.model.set("filter",e),this.updateScrollbar(0)}})})),define("$inGameV",["require","controlPanel/keyStats/inGame/inGameV","controlPanel/control/switchControl/switchControlV","config/filterSettings","localisation/manager","app/appContext"],(function(e){var t=e("controlPanel/keyStats/inGame/inGameV"),i=e("controlPanel/control/switchControl/switchControlV"),n=e("config/filterSettings"),s=e("localisation/manager"),o=e("app/appContext");return t.extend({initializeFilters:function(){var e=o.isMini?"dropdown":"filter";return new i({source:[{name:s.get("ALL"),key:"all"},{name:s.get("LAST5MINUTES"),key:"last5minutes"},{name:s.get("LAST10MINUTES"),key:"last10minutes"},{name:s.get("LAST15MINUTES"),key:"last15minutes"}],defaultKey:n.keyStats.inGame.filter,mode:e})}})})),define("controlPanel/control/gameAwareM",["require","backbone"],(function(e){var t=e("backbone");return t.Model.extend({defaults:{gameStarted:!1},constructor:function(e){t.Model.call(this,e),t.on("app:game-started",(function(){this.set("gameStarted",!0)}),this)}})})),define("controlPanel/statItem/colorListener",["require","backbone","shared/enums","underscore"],(function(e){var t=e("backbone"),i=e("shared/enums"),n=function(){this.home={color1:"#"+i.DefaultColors.Home,color2:"#"+i.DefaultColors.Home},this.away={color1:"#"+i.DefaultColors.Away,color2:"#"+i.DefaultColors.Away},this.listenTo(t,"data:team-colors",(function(e){"undefined"!==e&&(e.home&&(this.home={color1:this.parseColor(e.home.Color1),color2:this.parseColor(e.home.Color2)}),e.away&&(this.away={color1:this.parseColor(e.away.Color1),color2:this.parseColor(e.away.Color2)}))}))};return e("underscore").extend(n.prototype,t.Events),n.prototype.parseColor=function(e){if("string"==typeof e)return"#"+e.substr(0,6)},new n})),define("controlPanel/statItem/statItemM",["require","backbone","./colorListener","shared/utils","$enums"],(function(e){var t=e("backbone"),i=e("./colorListener"),n=e("shared/utils"),s=e("$enums");return t.Model.extend({defaults:{homeValue:0,awayValue:0,homeDisplayValue:"0",awayDisplayValue:"0",valueType:s.StatsValueType.Int,negative:!1,type:"bar",colors:i},initialtion(){this.on("change:homeValue change:awayValue",this.updateStats)},updateStats:function(){var e,t,i=this.get("homeValue"),o=this.get("awayValue"),r=100,a=100,l="none",c=this.get("localMax");switch(i||(i=0),o||(o=0),"number"==typeof c&&c>0?(l=i>o?"home":o>i?"away":"both",a=(o/c*100).toFixed(),r=(i/c*100).toFixed()):i>o?(a=100*(0===o?0:o/i),l=this.get("negative")?"away":"home"):i+o!==0?(r=100*(i===o?1:i/o),l=i===o?"both":this.get("negative")?"home":"away"):(r=0,a=0),this.get("valueType")){case s.StatsValueType.Int:this.set("homeDisplayValue",this.get("homeValue")),this.set("awayDisplayValue",this.get("awayValue"));break;case s.StatsValueType.Percentage:this.set("homeDisplayValue",n.toPercentage(this.get("homeValue"))),this.set("awayDisplayValue",n.toPercentage(this.get("awayValue")));break;case s.StatsValueType.Float:e=this.get("homeValue"),t=this.get("awayValue"),e&&e<1?this.set("homeDisplayValue",e.toFixed(2).slice(0,6)):this.set("homeDisplayValue",e.toString()),t&&t<1?this.set("awayDisplayValue",t.toFixed(2).slice(0,6)):this.set("awayDisplayValue",t.toString())}this.set("homeWidth",r),this.set("awayWidth",a),this.set("winner",l)}})})),define("controlPanel/keyStats/inGame/inGameM",["require","backbone","$enums","controlPanel/control/gameAwareM","controlPanel/statItem/statItemM"],(function(e){var t=e("backbone"),i=e("$enums"),n=e("controlPanel/control/gameAwareM"),s=e("controlPanel/statItem/statItemM"),o=t.Collection.extend({model:s});return n.extend({defaults:{filter:"all"},initialize:function(){this.statsCollection=new o,this.initializeHeaders(),this.listenTo(t,"statistic:updated",this.updateStatistic),this.listenTo(t,"event:history-handled",this.updateStat:function(){this.statsCollection.reset(this.getStatisticForInGame())},getStatisticForInGame:function(){var e=[],t=this.queryStatistics();for(var n in this.inGameHeaders)if(this.inGameHeaders.hasOwnProperty(n)){var s=t[this.inGameHeaders[n].name];if(s){var o={title:this.inGameHeaders[n].title,homeValue:s.homeValue,awayValue:s.awayValue,negative:this.inGameHeaders[n].negative};s.homeDisplayValue&&(o.homeDisplayValue=s.homeDisplayValue,o.awayDisplayValue=s.awayDisplayValue,o.valueType=i.StatsValueType.Custom),e.push(o)}else e.push({title:this.inGameHeaders[n].title,homeValue:0,awayValue:0,negative:this.inGameHeaders[n].negative})}return e}})})),define("$inGameM",["require","$statisticAggregator","localisation/manager","$enums","controlPanel/keyStats/inGame/inGameM"],(function(e){var t=e("$statisticAggregator"),i=e("localisation/manager"),n=e("$enums");return e("controlPanel/keyStats/inGame/inGameM").extend({defaults:{filter:"all"},initializeHeaders:function(){this.inGameHeaders=[{name:n.Statistic.TotalShot,title:i.get("STATISTIC->TOTALSHOT")},{name:n.Statistic.ShotOnTarget,title:i.get("STATISTIC->SHOTONTARGET")},{name:n.Statistic.ShotBlocked,title:i.get("STATISTIC->SHOTBLOCKED")},{name:n.Statistic.DangerousAttack,title:i.get("STATISTIC->DANGEROUSATTACK")},{name:n.Statistic.Corner,title:i.get("STATISTIC->CORNER")},{name:n.Statistic.FreeKick,title:i.get("STATISTIC->FREEKICK")},{name:n.Statistic.Offside,title:i.get("STATISTIC->OFFSIDE"),negative:!0},{name:n.Statistic.ThrowIn,title:i.get("STATISTIC->THROWIN")},{name:n.Statistic.GoalKick,title:i.get("STATISTIC->GOALKICK")},{name:n.Statistic.YellowCard,title:i.get("STATISTIC->YELLOWCARD"),negative:!0},{name:n.Statistic.RedCard,title:i.get("STATISTIC->REDCARD"),negative:!0},{name:n.Statistic.Foul,title:i.get("STATISTIC->FOUL"),negative:!0}]},queryStatistics:function(){var e;switch(this.get("filter")){case"all":e=0;break;case"last5minutes":e=5;break;case"last10minutes":e=10;break;case"last15minutes":e=15;break;default:e=0}var i=t.getEventsForLastNMinutes(e);return t.adaptEventsToStatistic(i)}})})),define("controlPanel/keyStats/tempoWave/tempoWaveV",["require","backbone","shared/controlsV"],(function(e){return e("backbone"),e("shared/controlsV").extend({getTemplate:function(){return this.model.get("gameStarted")?"#tempo-wave-template":"#game-not-started-template"},initialize:function(){this.cid="tempo-wave"}})})),define("controlPanel/keyStats/tempoWave/tempoWaveM",["require","backbone","controlPanel/control/gameAwareM"],(function(e){return e("backbone"),e("controlPanel/control/gameAwareM").extend({})})),define("controlPanel/keyStats/keyStatsV",["require","opta/widgets/optaFactsModel","controlPanel/keyStats/optaFacts/keyStatsOptaFactsV","$summaryM","controlPanel/keyStats/summary/summaryV","controlPanel/control/subMenu/subTabView","$inGameV","$inGameM","controlPanel/keyStats/tempoWave/tempoWaveV","controlPanel/keyStats/tempoWave/tempoWaveM","config/modules","localisation/manager","shared/utils"],(function(e){var t=e("opta/widgets/optaFactsModel"),i=e("controlPanel/keyStats/optaFacts/keyStatsOptaFactsV"),n=e("$summaryM"),s=e("controlPanel/keyStats/summary/summaryV"),o=e("controlPanel/control/subMenu/subTabView"),r=e("$inGameV"),a=e("$inGameM"),l=e("controlPanel/keyStats/tempoWave/tempoWaveV"),c=e("controlPanel/keyStats/tempoWave/tempoWaveM"),u=e("config/modules"),h=e("localisation/manager"),d=e("shared/utils");return o.extend({template:"#key-stats-main-template",regs.bindListeners(),this.createMenuItems(),this.selectFirstChildView()},createMenuItems:function(){var e=[];d.shouldLoadKeyStatsOptaFacts()&&(e.push({tabName:"opta-facts",displayName:'<div id="prematch-opta-logo"></div><div id="opta-label">Facts</div>'}),this.contentViews.add(new i({model:new t}),"opta-facts")),!0===u.keyStats.summary&&(e.push({tabName:"summary",displayName:h.get("KST->SUMMARY")}),this.contentViews.add(new s({model:new n}),"summary")),!0===u.keyStats.inGame&&(e.push({tabName:"in-game",displayName:h.get("KST->INGAME")}),this.contentViews.add(new r({model:new a}),"in-game")),!0===u.keyStats.tempoWave&&(e.push({tabName:"tempo-wave",displayName:h.get("KST->TEMPOWAVE")}),this.contentViews.add(new l({model:new c}),"tempo-wave")),this.menuItems.reset(e)},changeActiveTab:function(e){var t=this.menuItems.findWhere({tabName:e});t&&t.itemSelected()},removeOptaFacts:function(){this.menuItems.remove(this.menuItems.findWhere({tabName:"opta-facts"})),this.contentViews.remove("opta-facts"),this.changeActiveTab("summary")},tabsRendered:function(){Backbone.trigger("csb:key-stats-tabs-rendered")},bindListeners:function(){o.prototype.bindListeners.call(this),this.listenTo(Backbone,"csb:key-stats-opta-facts-widget-error",(function(){var e=this;this.removeOptaFacts(),this.listenTo(Backbone,"csb:key-stats-tabs-rendered",(function(){e.removeOptaFacts()}))})),this.listenTo(Backbone,"csb:opta-facts-widget-error",(function(){this.removeOptaFacts()})),this.listenToOnce(Backbone,"app:game-started",(function(){this.contentViews.remove("in-game"),this.contentViews.add(new r({model:new a({gameStarted:!0})}),"in-game"),this.changeActiveTab("in-game")}))}})})),define("controlPanel/headToHead/headToHeadItemV",["require","marionette"],(function(e){return e("marionette").ItemView.extend({template:"#match-history-item-template",modelEvents:{change:"render"}})})),define("controlPanel/headToHead/headToHeadItem",["require","backbone","shared/utils"],(function(e){var t=e("backbone"),i=e("shared/utils");return t.Model.extend({defaults:{ID:0,Date:"",Time:"",HomeTeam:"HOME",AwayTeam:"AWAY",HomeScore:0,AwayScore:0,Winner:""},initialize:function(){i.upperCaseModelString(this,["HomeTeam","AwayTeam"]),this.set("Date",function(e){if("string"==typeof e&&10===e.length&&-1!==e.search(/^\d\d\d\d\-\d\d-\d\d$/)){var t=e.substr(0,4),i=e.substr(5,2);return e.substr(8,2)+"/"+i+"/"+t}return e}(this.get("Date")))},updateExtraScoreSignature:function(){if(!this.get("ExtraUpdated")){var e,t=this.get("ExtraScoreWin");t&&("home"===(e=this.get("Winner"))?this.set("HomeScore",t+this.get("HomeScore")):"away"===e&&this.set("AwayScore",t+this.get("AwayScore")),this.set("ExtraUpdated",!0))}}})})),define("controlPanel/headToHead/headToHeadM",["require","backbone","controlPanel/headToHead/headToHeadItem","underscore"],(function(e){var t=e("backbone"),i=e("controlPanel/headToHead/headToHeadItem"),n=e("underscore"),s=t.Collection.extend({model:i});return t.Model.extend({defaults:{filter:"all",stadium:"Stadium",dataReceived:!1,showStadiumSwitch:!1},homeTeam:"HOME",awayTeam:"AWAY",initialize:function(){this.itemsToBeShownCount=10,this.matchHistoryCollection=new s,this.filteredHistoryCollection=new s,t.on("data:match-context",(function(e){this.homeTeam=e.homeTeam,this.awayTeam=e.awayTeam,this.set("stadium",e.stadium,{silent:!0}),this.set("showStadiumSwitch",!0,{silent:!0}),this.filterCollection(),this.updateCollectionData()}),this),t.on("data:head-to-head",(function(e){e.History&&0!==e.History.length&&(this.matchHistoryCollection.reset(e.History,{silent:!0}),this.set("isDataEnabled",0!==n.first(this.matchHistoryCollection.where({Type:"H"}),this.itemsToBeShownCount).length,{silent:!0}),this.filterCollection(),this.updateCollectionData(),this.set("dataReceived",!0,{silent:!0}))}),this),this.filterCriteria={stadium:{Type:"H"},all:{}},this.on("change:filter",this.filterCollection)},filterCollection:function(){var e,t=this.filterCriteria[this.get("filter")];n.isEmpty(t)?(e=n.first(this.matchHistoryCollection.models,this.itemsToBeShownCount),this.filteredHistoryCollection.reset(e,{silent:!0})):(e=n.first(this.matchHistoryCollection.where(t),this.itemsToBeShownCount),this.filteredHistoryCollection.reset(e,{silent:!0}))},updateCollectionData:function(){var e=this.homeTeam,t=this.awayTeam;n.each(this.matchHistoryCollection.models,(function(i){"H"===i.get("Type")?(i.set("HomeTeam",e,{silent:!0}),i.set("AwayTeam",t,{silent:!0})):(i.set("HomeTeam",t,{silent:!0}),i.set("AwayTeam",e,{silent:!0}));var n,s=i.get("HomeScore"),o=i.get("AwayScore");"number"==typeof s&&"number"==typeof o&&(n=s>=o?s===o?"draw":"home":"away",i.set("Winner",n,{silent:!0})),i.updateExtraScoreSignature()}))}})})),define("controlPanel/headToHead/headToHeadV",["require","marionette","controlPanel/headToHead/headToHeadItemV","controlPanel/headToHead/headToHeadM","localisation/manager","config/filterSettings","controlPanel/control/switchControl/switchControlV","units/Scrollbar"],(function(e){var t=e("marionette"),i=e("controlPanel/headToHead/headToHeadItemV"),n=e("controlPanel/headToHead/headToHeadM"),s=e("localisation/manager"),o=e("config/filterSettings"),r=e("controlPanel/control/switchControl/switchControlV"),a=e("units/Scrollbar"),l=t.CollectionView.extend({itemView:i});return t.Layout.extend({getTemplate:function(){return this.model.get("dataReceived")?"#head-to-head-template":"#head-to-head-template-empty"},regions:istoryR:"#h2h-match-history"},initialize:function(){this.model=new n},onRender:function(){this.createControls(),this.bindListeners(),this.filterR.show(this.filterView),this.matchHistoryR.show(this.matchHistoryItemsView)},onShow:function(){this.showScrollbar()},createControls:function(){this.viewsCreatead||(this.model.get("isDataEnabled")||!0===this.model.get("showStadiumSwitch")?this.filterView=new r({source:[{name:this.model.get("stadium"),key:"stadium"},{name:s.get("ALL"),key:"all"}],defaultKey:o.headToHead.stadium}):this.filterView=new r({source:[{name:s.get("ALL"),key:"all"}],defaultKey:"all"}),this.matchHistoryItemsView=new l({collection:this.mohowScrollbar:fched),this.listenTo(this.model,"change:stadium",this.changedStadium)},changedStadium:function(){this.filterView.model.setOptionNameByKey("stadium",this.mostory:function(){this.matchHistoryR.show(this.matchHistoryItemsView)},filterSwitched:function(e){var t=this.$("#h2h-match-history");this.model.set("filter",e),a.update(t)}})})),define("units/formHandler",["require","underscore","shared/utils","backbone"],(function(e){var t=e("underscore"),i=e("shared/utils"),n=e("backbone");function s(){n.on("app:statistics-received",this.parse,this)}return s.prototype.parse=function(e){function s(e,n){return t.map(e,(function(e){var t,s,o,r,a,l,c=(t=e.DT,s=t.split("-").map((function(e){return parseInt(e,10)})),o=s[0],r=s[1],a=s[2],new Date(o,r-1,a));return{team:e.TN,group:e.LN,homeScore:+e.H,awayScore:+e.A,direction:n,playedAt:(l=e.T,"H"===l?"home":"away"),date:c,displayDate:i.formatDate(c),extraScoreFlag:e.ESW||""}}))}if(e&&e.Form){var o={HomeHistory:t.first(s(e.Form.HM,"home"),10),AwayHistory:t.first(s(e.Form.AM,"away"),10)};n.trigger("data:form",o)}},new s})),define("controlPanel/form/formItemM",["require","backbone","app/matchContext","shared/utils"],(function(e){var t=e("backbone"),i=e("app/matchContext"),n=e("shared/utils");return t.Model.extend({defaults:{homeTeam:"",homeTeamAbbr:"",awayTeam:"",awayTeamAbbr:"",group:"",result:"",homeScore:0,awayScore:0,direction:"home",date:void 0,displayDate:"",playedAt:"home",extraScoreFlag:""},formatTeamName:function(e){return"string"==typeof e&&(e.length>3&&(e=e.substr(0,3)),e=e.toUpperCase()),e},formatDate:function(e){return n.prependZero(e.getDate(),2)+"/"+n.prependZero(e.getMonth()+1)},formatDateLong:function(e){return n.prependZero(e.getDate())+"/"+n.prependZero(e.getMonth()+1)+"/"+e.getFullYear()},setExtraScoreFlag:function(){var e=this.get("homeScore"),t=this.get("awayScore");""!==this.get("extraScoreFlag")&&(e>t?this.set("homeScore",this.get("extraScoreFlag")+e):t>e&&this.set("awayScore",this.get("extraScoreFlag")+t))},initialize:function(e){var t,n,s=e.team,o=i[e.direction+"TeamAbbr"],r=e.ourTeam;"home"===e.playedAt?(this.set("homeTeam",r),this.set("awayTeam",s),t="home",n="away"):"away"===e.playedAt&&(this.set("homeTeam",s),this.set("awayTeam",r),t="away",n="home"),this.set("result",function(e,t,i){return e===t?"D":"home"===i?e>t?"W":"L":"away"===i?t>e?"W":"L":void 0}(e.homeScore,e.awayScore,e.playedAt)),this.set(t+"TeamAbbr",o||this.formatTeamName(this.get(t+"Team"))),this.set(n+"TeamAbbr",this.formatTeamName(this.get(n+"Team"))),this.set("displayDate",this.formatDate(e.date)),this.set("displayDateLong",this.formatDateLong(e.date)),this.setExtraScoreFlag()}})})),define("controlPanel/form/formM",["require","backbone","app/matchContext","./formItemM"],(function(e){var t=e("backbone"),i=e("app/matchContext"),n=e("./formItemM"),s=t.Collection.extend({model:n,comparator:function(e){return-e.get("date").getTime()}});return new(t.Model.extend({defaults:{homeFilter:"all-home",awayFilter:"all-away",dataReceived:!1,today:!0},initialize:function(){this.homeData=[],this.awayData=[],this.homeDataLast5=[],this.awayDataLast5=[],this.homePreviousMatchesCollection=new s(this.homeData),this.awayPreviousMatchesCollection=new s(this.awayData),this.homePrevious_5_MatchesCollection=new s(this.homeDataLast5),this.awayPrevious_5_MatchesCollection=new s(this.awayDataLast5),this.bindListeners()},filterHome:function(e){e=e||{},"all-home"!==this.get("homeFilter")?this.homePreviousMatchesCollection.reset(_.filter(this.homeData,(function(e){return"home"===e.playedAt})),{silent:e.silent}):(this.homePreviousMatchesCollection.reset(this.homeData,{silent:e.silent}),this.homePrevious_5_MatchesCollection.reset(this.homeDataLast5,{silent:e.silent}))},filterAway:function(e){e=e||{},"all-away"!==this.get("awayFilt.reset(_.filter(this.awayData,(function(e){return"away"===e.playedAt})),{silent:e.silent}):(this.awayPreviousMatchesCollection.reset(this.awayData,{silent:e.silent}),this.awayPrevious_5_MatchesCollection.reset(this.awayDataLast5,{silent:e.silent}))},bindListeners:function(){this.listenTo(t,"prematch:not-today",(function(){this.set("today",!1)})),this.listenTo(t,"data:form",(function(e){var t=i.homeTeam,n=i.awayTeam;_.each(e.HomeHistory,(),_.each(e.AwayHistory,(function(e){e.ourTeam=n,e.currentTeam="away"})),this.homeData=e.HomeHistory,this.awayData=e.AwayHistory,this.homeDataLast5=_.first(e.HomeHistory,5),this.awayDataLast5=_.first(e.AwayHistory,5),this.filterHome({silent:!0}),this.filterAway({silent:!0}),this.set("dataReceived",!0)})),this.on("change:homeFilter",(function(){this.filterHome()})),this.on("change:awayFilter",(function(){this.filterAway()}))},resetForm:function(){this.homeData=[],this.awayData=[],this.homeDataLast5=[],this.awayDataLast5=[],this.filterHome(),this.filterAway(),this.set("dataReceived",!1)}}))})),define("controlPanel/form/formItemPreviewV",["require","marionette"],(function(e){return e("marionette").ItemView.extend({template:"#previous-match-item-preview-template",className:"previous-match-item-preview-container",modelEvenivateFormTab:function(){Backbone.trigger("cp:show-tab",{tab:"form"})},onRender:function(){switch(this.model.get("result")){case"W":this.$el.toggleClass("form-item-win");break;case"D":this.$el.toggleClass("form-item-draw");break;case"L":this.$el.toggleClass("form-item-loss")}}})})),define("controlPanel/control/rebindableCollection",["require","marionette"],(function(e){var t=e("marionette");return t.CollectionView.extend({render:function(){this.isClosed&&t.CollectionView.prototype._initialEvents.apply(this),t.CollectionView.prototype.render.apply(this)}})})),define("controlPanel/form/formPreviewV",["require","controlPanel/form/formM","shared/controlsV","controlPanel/form/formItemPreviewV","controlPanel/control/rebindableCollection","app/appContext"],(function(e){var t=e("controlPanel/form/formM"),i=e("shared/controlsV"),n=e("controlPanel/form/formItemPreviewV"),s=e("controlPanel/control/rebindableCollection"),o=e("app/appContext"),r=s.extend({itemView:n,onRender:function(){var e=$("#form-preview-home-previous .previous-match-item-preview-container:first-child");e.toggleClass("first");var t=$(document.createElement("div")).addClass("home-helper"),i=$(document.createElement("div")).addClass("form-item-triangle");t.append(i),e.prepend(t)}}),a=s.extend({itemView:n,onRender:function(){var e=$("#form-preview-away-previous .previous-match-item-preview-container:first-child");e.toggleClass("first");var t=$(document.createElement("div")).addClass("away-helper"),i=$(document.createElement("div")).addClass("form-item-triangle");t.append(i),e.prepend(t)}});return i.extend({getTemplate:function(){return this.model.get("dataReceived")?"#form-preview-template":"#form-preview-template-empty"},placeholders:{historyHomeR:"#form-preview-home-previous",historyAwayR:"#form-preview-away-previous"},initialize:function(){this.model=t,this.views={},this.views.historyHomeR=new r({collection:this.model.homePrevious_5_MatchesCollection}),this.views.historyAwayR=new a({collection:this.model.awayPrevious_5_MatchesCollection}),this.bindListeners()},onRender:function(){(o.streamOnly||o.headerDisabled)&&(this.views.historyHomeR.children.each((functs.views.historyAwastenTo(this.model,"change:dataReceived",(function(){this.render()}))}})})),define("controlPanel/form/formItemV",["require","marionet){return"#previous-match-item-template-"+this.model.get("direction")},className:"previous-match-item-container",modelEvents:{change:"render"},ui:{shortDate:".form-item-date > .form-item-date-short",longDate:".form-item-date > .form-item-date-long",homeTooltip:".form-item-home-tooltip",awayTooltip:".form-item-away-tooltip"},events:{"mouseenter .form-item-date":"showLongDate","mouseenter .form-item-team-name.home":"showHomeTooltip","mouseenter .form-item-team-name.away":"showAwayTooltip","mouseleave .form-item-date":"showShortDate","mouseleave .form-item-team-name.home":"hideHomeTooltip","mouseleave .form-item-team-name.away":"hideAwayTooltip"},showHomeTooltip:function(){this.ui.homeTooltip.show()},showAwayTooltip:function(){this.ui.awayTooltip.show()},hideHomeTooltip:function(){this.ui.homeTooltip.hide()},hideAwayTooltip:function(){this.ui.awayTooltip.hide()},showLongDate:functhortDate:function(){this.ui.shortDate.show(),this.ui.longDate.hide()},getResultClass:function(){var e=this.model.get("result");return"W"===e?"form-match-win":"D"===e?"form-match-draw":"L"===e?"form-match-lose":void 0},onRender:function(){this.showShortDate(),this.$el.toggleClass(this.getResultClass(),!0),this.$el.toggleClass(this.model.get("playedAt"),!0)}})})),define("controlPanel/form/formV",["require","units/formHandler","controlPanel/form/formPreviewV","controlPanel/statItem/statItemV","marionette","controlPanel/form/formM","localisation/manager","controlPanel/form/formItemV","controlPanel/control/switchControl/switchControlV","config/filterSettings","controlPanel/control/rebindableCollection","app/appContext","units/Scrollbar"],(function(e){e("units/formHandler"),e("controlPanel/form/formPreviewV"),e("controlPanel/statItem/statItemV");var t=e("marionette"),i=e("controlPanel/form/formM"),n=e("localisation/manager"),s=e("controlPanel/form/formItemV"),o=e("controlPanel/control/switchControl/switchControlV"),r=e("config/filterSettings"),a=e("controlPanel/control/rebindableCollection"),l=e("app/appContext"),c=e("units/Scrollbar"),u=a.extend({itemView:s});return t.Layout.extend({getTemplate:function(){return this.model.get("dataReceived")?"#form-template":"#form-template-empty"},regions:{homeSwitchR:"#form-home-filter",awaySwitchR:"#form-away-filter",historyHomeR:"#form-home-previous",historyAwayR:"#form-away-previous"},initialize:function(){this.model=i,this.model.on("change:dataReceived",this.render,this)},onRender:function(){this.createControls(),this.bindListeners(),this.homeSwitchR.show(this.homeSwitch),this.awaySwitchR.show(this.awaySwitch),this.historyHomeR.show(this.homePreviousItemsCollectionView),this.historyAwayR.show(this.awayPreviousItemsCollectionView),this.scrollbarContainer=this.$("#form-previous-container")},onShow:function(){this.showScrollbar()},createControls:function(){var e="all"===r.form.home?"all-home":r.form.home,t="all"===r.form.away?"all-away":r.form.away,i=l.isMini?"mini":"filter";this.viewsCreatead||(this.homeSwitch=new o({source:[{name:window.isUsSport?n.get("AWAY"):n.get("HOME"),key:"home"},{name:n.get("ALL"),key:"all-home"}],defaultKey:e,mode:i}),this.awaySwitch=new o({source:[{name:window.isUsSport?n.get("HOME"):n.get("AWAY"),key:"away"},{name:n.get("ALL"),key:"all-away"}],defaultKey:t,mode:i}),this.homePreviousItemsCollectionView=new u({collection:this.model.homePreviousMatchesCollection}),this.awayPreviousItemsCollectionView=new u({collection:this.model.awayPreviousMatchesCollection}),this.viewsCreatead=!0)},showScrollbar:function(){c.isInitialized(this.scrollbarContainer)||c.init(this.scrollbarContainer)},bindListeners:function(){this.listenTo(this.homeSwitch,"switched",this.homeSwitched),this.listenTo(this.awaySwitch,"switched",this.awaySwitched)},homeSwitched:function(e){tfunction(e){this.model.set("awayFilter",e),this.moveScrollbarToTop()},moveScrollbarToTop:function(){c.isInitialized(this.scrollbarContainer)&&c.update(this.scrollbarContainer)}})})),define("units/TeamDataHandler",["require","underscore","$enums"],(function(e){var t=e("underscore"),i=e("$enums");function n(){}var s=function(e,t){return e.value<t.value||e.value===t.value&&e.additionSelector<t.additionSelector};return n.prototype.adaptStatistic=function(e,n){var o=n.valueSelector,r=n.titleSelector,a=n.additionSelector,l=[],c=[];e[n.homeSource].forEach()),e[n.awaySource].forEach((function(e){e.direction="away",c.push(e)}));var u=0;return c.forEach((function(e){var s={};s.title=t.isUndefined(e[r])?"":e[r],s.value=t.isUndefined(e[o])?"":e[o],s.additionValue=t.isUndefined(e[a])?"":a+" "+e[a],s.valueType=n.valueType||i.StatsValueType.Int,s.direction=e.direction,s.additionSelector=t.isUndefined(e[a])?"":e[a],u=Math.max(u,s.value),l.push(s)})),t.each(l,(function(e){e.width=e.value/u*100})),l.sort(s)},n})),define("$teamDataHandler",["require","backbone","$enums","units/TeamDataHandler"],(function(e){var t=e("backbone"),i=e("$enums"),n=e("units/TeamDataHandler"),s=function(){t.on("app:team-data-received",this.parse,this)};return(s.prototype=new n).parse=function(e){if(e){var n={GoalPerGame:this.adaptStatistic(e,{homeSource:"HG",awaySource:"AG",valueSelector:"GPG",titleSelector:"PL",valueType:i.StatsValueType.Float}),AssistsPerGame:this.adaptStatistic(e,{homeSource:"HA",awaySource:"AA",valueSelector:"APG",titleSelector:"PL",valueType:i.StatsValueType.Float}),MVPPerGame:this.adaptStatistic(e,{homeSource:"HV",awaySource:"AV",valueSelector:"WR",titleSelector:"PL",valueType:i.StatsValueType.Percentage})};t.trigger("data:team-data",n)}},new s})),define("controlPanel/statItem/singleStats/singleStatItemM",["require","backbone","./../colorListener","shared/utils","$enums"],(function(e){var t=e("backbone"),i=e("./../colorListener"),n=e("shared/utils"),s=e("$enums");return t.Model.extend({defaults:{title:"",displayValue:"0",value:0,width:0,direction:"home",additionValue:0,color1:"#000",color2:"#FFF",valueType:s.StatsValueType.Int},initialize:function(){switch(this.get("valueType")){case s.StatsValueType.Int:this.set("displayValue",this.get("value"));break;case s.StatsValueType.Percentage:this.set("displayValue",n.toPercentage(this.get("value")));break;case s.StatsValueType.Float:this.set("displayValue",this.get("value").toFixed(2))}this.set({color1:i[this.get("direction")].color1,color2:i[this.get("direction")].color2})}})})),define("controlPanel/statItem/singleStats/singleStatItemC",["require","backbone","controlPanel/statItem/singleStats/singleStatItemM"],(function(e){var t=e("backbone"),i=e("controlPanel/statItem/singleStats/singleStatItemM");return t.Collection.extend({model:i})})),define("controlPanel/teams/soccer/goals/goalsM",["require","backbone","localisation/manager","controlPanel/statItem/singleStats/singleStatItemC"],(function(e){var t=e("backbone"),i=e("localisation/manager"),n=e("controlPanel/statItem/singleStats/singleStatItemC");return new(t.Model.extend({defaults:{valueHeader:i.get("TEAMS->GOALS->GPG"),header:i.get("TEAMS->GOALS->SCR")},initialize:function(){this.goalsData=new n,this.listenTo(t,"data:team-data",this.setGoals,this)},setGoals:function(e){void 0!==e.GoalPerGame&&0!==e.GoalPerGame.length&&(this.goalsData.reset(e.GoalPerGame,{silent:!0}),t.trigger("teams:data-received","goals"),this.set("dataReceived",!0,{silent:!0}))}}))})),define("controlPanel/statItem/singleStats/singleStatItemV",["require","marionette"],(function(e){return e("marionette").ItemView.extend({className:"single-stat-item",template:"#single-stat-item-template"})})),define("controlPanel/statItem/singleStats/singleStatItemCV",["require","marionette","controlPanel/statItem/singleStats/singleStatItemV"],(function(e){var t=e("marionette"),i=e("controlPanel/statItem/singleStats/singleStatItemV");return t.CollectionView.extend({itemView:i})})),define("controlPanel/teams/soccer/goals/goalsV",["require","config/filterSettings","shared/controlsV","localisation/manager","./goalsM","controlPanel/statItem/singleStats/singleStatItemCV"],(function(e){e("config/filterSettings");var t=e("shared/controlsV"),i=e("localisation/manager"),n=e("./goalsM"),s=e("controlPanel/statItem/singleStats/singleStatItemCV");return t.extend({className:"team-common",placeholders:{content:"#team-common-content",header:"#team-common-header"},onRender:function(){this.ui.header.text(i.get("TEAMS->GOALS->GPG"))},getTemplate:function(){return this.model.get("dataReceived")?"#common-view-template":"#goals-no-data"},initialize:function(){this.model=n,this.views={content:new s({collection:this.model.goalsData})}}})})),define("controlPanel/teams/soccer/lineup/lineupItemM",["require","backbone","app/appContext"],(function(e){var t=e("backbone"),i=e("app/appContext");return t.Model.extend({defaults:{playerName:"",playerNumber:"",goalCount:0,height:36},initialize:function(e){if(e.playerNumber&&"00"!==e.playerNumber||this.set("playerNumber",void 0),i.isMini){var t=this.get("playerName").split(" ").pop();this.set("playerName",t)}},getEventsCount:function(){var e=0;return void 0!==this.get("red")&&e++,void 0!==this.get("yellow")&&e++,void 0!==this.get("goal")&&e++,void 0!==this.get("substitution")&&e++,e>0&&i.isMini&&e++,e}})})),define("controlPanel/teams/soccer/lineup/lineupM",["require","backbone","localisation/manager","controlPanel/teams/soccer/lineup/lineupItemM","shared/utils"],(function(e){var t=e("backbone"),i=e("localisation/manager"),n=e("controlPanel/teams/soccer/lineup/lineupItemM"),s=e("shared/utils"),o=t.Collection.extend({model:n});return t.Model.extend({defaults:{dataReceived:!1,toBeShown:!1},initialize:function(){this.set("substitutes",i.get("TEAMS->LINE_UP->SUBSTITUTES")),this.homeLineup=new o,this.awayLineup=new o,this.homeSubstitutes=new o,this.awaySubstitutes=new o,this.mainReferee=new o,this.assistantReferee=new o,this.fourthReferee=new o,this.referees=new o,this.lineupEvents=[],this.allowedEvents=[1029,2053,1034,2058,1032,2056,1055,2079],this.listenTo(t,"data:lineup",this.updateData),this.listenTo(t,"event:player-name",this.updateEvents),this.listenTo(t,"game:event",this.updateEvents)},updateEvents:function(e){-1!==_.indexOf(this.allowedEvents,e.eventId)&&(this.lineupEvents.push(e),this.get("dataReceived")&&this.processEvent(e))},processEvent:function(e){var t,i,n,o,r,a,l=s.prependZero(e.playerNumber);"home"===e.direction?(o=this.homeModelsSource,r=this.awayModelsSource):(r=this.homeModelsSource,o=this.awayModelsSource);for(var c=o.length-1;c>=0;c--)o[c].get("playerNumber")===l&&(t=o[c],i=c);if(void 0!==t){switch(e.eventId){case 1029:case 2053:var u=t.get("goal"),h=t.get("goalCount");void 0===u&&(u=[]),h++,u.push(e.minutes+"'"),t.set("goal",u,{silent:e.fromHistory}),t.set("goalCount",h,{silent:e.fromHistory});break;case 1034:case 2058:t.set("yellow",e.minutes+"'",{silent:e.fromHistory});break;case 1032:case 2056:t.set("red",e.minutes+"'",{silent:e.fromHistory});break;case 1055:case 2079:t.set("substitution",e.minutes+"'",{silent:e.fromHistory})}a=r[i],n=Math.max(t.getEventsCount(),a.getEventsCount()),t.set("height",36*n,{silent:e.fromHistory}),a.set("height",36*n,{silent:e.fromHistory})}},updateData:function(e){this.homeLineup.reset(e.HomeLineup,{silent:!0}),this.awayLineup.reset(e.AwayLineup,{silent:!0}),this.homeSubstitutes.reset(e.HomeSubstitutes,{silent:!0}),this.awaySubstitutes.reset(e.AwaySubstitutes,{silent:!0}),this.mainReferee.reset(e.MainReferee,{silent:!0}),this.assistantReferee.reset(e.Assistants,{silent:!0}),this.fourthReferee.reset(e.Fourth,{silent:!0}),this.referees.reset(_.map(e.Referees,(function(e){var t="";switch(e.type){case"referee":t=i.get("TEAMS->LINE_UP->REFEREE");break;case"fourth":t=i.get("TEAMS->LINE_UP->FOURTH_OFFICIAL");break;case"assistant":t=i.get("TEAMS->LINE_UP->ASSISTANTS")}return _.extend({},e,{caption:t})}))),e.HomeLineup.length&&e.AwayLineup.length&&this.set("toBeShown",!0,{silent:!0}),t.trigger("teams:data-received","line-up"),this.set("dataReceived",!0,{silent:!0}),this.homeModelsSource=this.homeLineup.models.concat(this.homeSubstitutes.models),this.awayModelsSource=this.awayLineup.models.concat(this.awaySubstitutes.models);for(var n=this.lineupEvents.length-1;n>=0;n--)this.processEvent(this.lineupEvents[n])}})})),define("controlPanel/teams/soccer/lineup/lineupItemCV",["require","marionette","app/appContext","controlPanel/teams/soccer/lineup/lineupItemM"],(function(e){var t=e("marionette"),i=e("app/appContext"),n=e("controlPanel/teams/soccer/lineup/lineupItemM"),i?"#lineulate"},onReinitialize:function(){this.listenTo(this.model,"change",this.render)}});return t.CollectionView.extend({itemView:s})})),define("controlPanel/teams/soccer/lineup/lineupV",["require","shared/controlsV","marionette","controlPanel/teams/soccer/lineup/lineupM","controlPanel/teams/soccer/lineup/lineupItemCV"],(function(e){var t=e("shared/controlsV"),i=e("marionette"),n=e("controlPanel/teams/soccer/lineup/lineupM"),s=e("controlPanel/teams/soccer/lineup/lineupItemCV");return t.extend({getTemplate:function(){return this.model.get("dataReceived")&&this.model.get("toBeShown")?"#lineup-view-template":"#lineup-view-template-empty"},className:"lineup-view-content",placeholders:{content:"#lineup-container",homeLineup:"#lineup-teams-home",awayLineup:"#lineup-teams-away",homeSubstitutes:"#lineup-substitutes-home",awaySubstitutes:"#lineup-substitutes-away",referees:"#lineup-referees"},initialize:function(){this.model=new n;var e=i.CollectionView.extend({className:"lineup-referees",model:Backbone.Model,itemView:i.ItemView.extend({className:"lineup-referee-item",template:"#lineup-referee-item-template"})});this.views={homeLineup:new s({collection:this.model.homeLineup,itemViewOptions:{template:"#lineup-player-item-template"}}),awayLineup:new s({collection:this.model.awayLineup,itemViewOptions:{template:"#lineup-player-item-template"}}),homeSubstitutes:new s({className:"lineup-substitutes",collection:this.model.homeSubstitutes,itemViewOptions:{template:"#lineup-player-item-template"}}),awaySubstitutes:new s({className:"lineup-substitutes",collection:this.model.awaySubstitutes,itemViewOptions:{template:"#lineup-player-item-template"}}),referees:new e({collection:this.model.referees})}}})})),define("controlPanel/teams/soccer/mvp/mvpM",["require","backbone","localisation/manager","controlPanel/statItem/singleStats/singleStatItemC"],(function(e){var t=e("backbone"),i=e("localisation/manager"),n=e("controlPanel/statItem/singleStats/singleStatItemC");return new(t.Model.extend({defaults:{valueHeader:i.get("TEAMS->MVP->POS"),header:i.get("TEAMS->MVP->WIN_RATE")},initialize:function(){this.mvpData=new n,this.listenTo(t,"data:team-data",this.setMVP,this)},setMVP:function(e){void 0!==e.MVPPerGame&&0!==e.MVPPerGame.length&&(this.mvpData.reset(e.MVPPerGame,{silent:!0}),t.trigger("teams:data-received","mvp"),this.set("dataReceived",!0,{silent:!0}))}}))})),define("controlPanel/teams/soccer/mvp/mvpV",["require","shared/controlsV","localisation/manager","./mvpM","controlPanel/statItem/singleStats/singleStatItemCV"],(function(e){var t=e("shared/controlsV"),i=e("localisation/manager"),n=e("./mvpM"),s=e("controlPanel/statItem/singleStats/singleStatItemCV");return t.extend({className:"team-common",placeholders:{content:"#team-common-content",header:"#team-common-header"},onRender:function(){this.ui.header.text(i.get("TEAMS->MVP->HEADER"))},getTemplate:function(){return this.model.get("dataReceived")?"#common-view-template":"#mvp-no-data"},initialize:function(){this.model=n,this.views={content:new s({collection:this.model.mvpData})}}})})),define("controlPanel/teams/soccer/assists/assistsM",["require","backbone","localisation/manager","controlPanel/statItem/singleStats/singleStatItemC"],(function(e){var t=e("backbone"),i=e("localisation/manager"),n=e("controlPanel/statItem/singleStats/singleStatItemC");return new(t.Model.extend({defaults:{valueHeader:i.get("TEAMS->ASSISTS->APG"),header:i.get("TEAMS->ASSISTS")},initialize:function(){this.assistData=new n,this.listenTo(t,"data:team-data",this.setAssists,this)},setAssists:function(e){void 0!==e.AssistsPerGame&&0!==e.AssistsPerGame.length&&(this.assistData.reset(e.AssistsPerGame,{silent:!0}),t.trigger("teams:data-received","assists"),this.set("dataReceived",!0,{silent:!0}))}}))})),define("controlPanel/teams/soccer/assists/assistsV",["require","config/filterSettings","shared/controlsV","localisation/manager","./assistsM","controlPanel/statItem/singleStats/singleStatItemCV"],(function(e){e("config/filterSettings");var t=e("shared/controlsV"),i=e("localisation/manager"),n=e("./assistsM"),s=e("controlPanel/statItem/singleStats/singleStatItemCV");return t.extend({className:"team-common",placeholders:{content:"#team-common-content",header:"#team-common-header"},onRender:function(){this.ui.header.text(i.get("TEAMS->MVP->ASSISTS"))},getTemplate:function(){return this.model.get("dataReceived")?"#common-view-template":"#assists-no-data"},initialize:function(){this.model=n,this.views={content:new s({collection:this.model.assistData})}}})})),define("controlPanel/teams/soccer/formation/formationM",["require","backbone","jquery","app/appContext"],(function(e){var t=e("backbone"),i=e("jquery"),n=e("app/appContext"),s=t.Model.extend({initialize:function(e){var t,i=0,s=[],o=[];this.set("side",e.side),s.GK=4,s.D1=10,s.D2=16,s.DM=22,s.M=30,s.AM=36,s.A=44,t=s[e.x],"home"===e.side?(o.L=5,o.CL=25,o.C=45,o.CR=65,o.R=85):(o.L=85,o.CL=65,o.C=45,o.CR=25,o.R=5),i=o[e.y],n.isMini&&(i-=2),this.set("x",t-2),this.set("y",i),e.playerNumber?this.set("playerNumber",e.playerNumber):this.set("playerNumber",e.x),this.set("playerName",e.playerName)}}),o=t.Collection.extend({model:s});return t.Model.extend({initialize:function(){this.set("dataReceived",!1),this.collection=new o,this.bindListeners()},bindListeners:function(){t.on("data:lineup",(function(e){var n=_.map(e.HomeLineup,(),s=_.map(e.AwayLineup,(function(e){return i.extend(e,{side:"away"})})),o=_.filter(_.union(n,s),(function(e){return e.X&&""!==e.X&&e.Y&&""!==e.Y}));if(o.length>=11){var r,a=[];for(r=0;r<o.length;r++)a.push({side:o[r].side,x:o[r].X,y:o[r].Y,playerNumber:o[r].playerNumber,playerName:o[r].playerName});this.collection.reset(a),t.trigger("teams:data-received","formation"),this.set("dataReceived",!0)}}),this),t.on("formation:test-data",(function(){t.trigger("teams:data-received","formation"),this.set("dataReceived",!0);var e=0,i=function(t,i,n){return{side:n||"home",x:t,y:i,playerNumber:++e,playerName:"Roberto Carlos"}};this.collection.reset([i("GK","C"),i("D1","CL"),i("D1","CR"),i("D2","L"),i("D2","R"),i("M","C"),i("AM","CL"),i("AM","CR"),i("A","CL"),i("A","C"),i("A","CR"),i("GK","C","away"),i("D1","CL","away"),i("D1","CR","away"),i("D2","L","away"),i("D2","R","away"),i("M","C","away"),i("AM","CL","away"),i("AM","CR","away"),i("A","L","away"),i("A","C","away"),i("A","R","away")])}),this)}})})),define("controlPanel/teams/soccer/formation/formationV",["require","shared/controlsV","controlPanel/teams/soccer/formation/formationM","app/appContext","marionette"],(function(e){var t=e("shared/controlsV"),i=e("controlPanel/teams/soccer/formation/formationM"),n=e("app/appContext"),s=e("marionette"),o=s.ItemView.extend({className:"formation-item",template:"#formation-item-template",onRender:function(){var e=this.model.toJSON(),t=n.isMini?"top":"left",i=n.isMini?"bottom":"right",s=n.isMini?"right":"top",o={};"home"===e.side?(o[t]=e.x+"%",this.$el.toggleClass("home",!0)):(o[i]=e.x+"%",this.$el.toggleClass("away",!0)),o[s]=e.y+"%",this.$el.css(o);var r=this.$(".formation-item-tooltip");n.isMini&&(e.y>50?(r.toggleClass("home",!0),r.toggleClass("away",!1)):(r.toggleClass("home",!1),r.toggleClass("away",!0))),r.length>0&&this.$el.hover((function(){r.show()}),(function(){r.hide()}))}}),r=s.CollectionView.extend({itemView:o});return t.extend({classceived")?"#formation-view-template":"#formation-view-template-empty"},placeholders:{formations:"#formation-items-collection",content:"#formation-container"},scrollbarContainerPath:"$el",modelEvents:{"change:dataReceived":"render"},initialize:function(){this.model=new i,this.views={formations:new r({collection:this.model.collection})}}})})),define("$teamsV",["require","$teamDataHandler","controlPanel/control/subMenu/subTabView","controlPanel/teams/soccer/goals/goalsV","controlPanel/teams/soccer/lineup/lineupV","controlPanel/teams/soccer/mvp/mvpV","controlPanel/teams/soccer/assists/assistsV","controlPanel/teams/soccer/formation/formationV","localisation/manager","config/modules"],(function(e){e("$teamDataHandler");var t=e("controlPanel/control/subMenu/subTabView"),i=e("controlPanel/teams/soccer/goals/goalsV"),n=e("controlPanel/teams/soccer/lineup/lineupV"),s=e("controlPanel/teams/soccer/mvp/mvpV"),o=e("controlPanel/teams/soccer/assists/assistsV"),r=e("controlPanel/teams/soccer/formation/formationV"),a=e("localisation/manager"),l=e("config/modules");return t.extend({template:"#teams-templ.hideTeamsSubMenu(),this.bindListeners(),this.selectFirstChildView()},createMenuItems:function(){var e=[];l.teams.lineup&&(e.push({tabName:"line-up",displayName:a.get("TEAMS->LINE_UP")}),this.contentViews.add(new n,"line-up")),l.teams.formation&&(e.push({tabName:"formation",displayName:a.get("TEAMS->FORMATION")}),this.contentViews.add(new r,"formation")),l.teams.goals&&(e.push({tabName:"goals",displayName:a.get("TEAMS->GOALS")}),this.contentViews.add(new i,"goals")),l.teams.assists&&(e.push({tabName:"assists",displayName:a.get("TEAMS->ASSISTS")}),this.contentViews.add(new o,"assists")),l.teams.mvp&&(e.push({tabName:"mvp",displayName:a.get("TEAMS->MVP")}),this.contentViews.add(new s,"mvp")),this.menuItems.reset(e,{silent:!0})}})})),define("controlPanel/comments/soccer/commentsItemM",["require","backbone","localisation/manager","$enums"],(function(e){var t=e("backbone"),i=e("localisation/manager"),n=e("$enums");return t.Model.extend({defaults:{minute:0,counter:0,eventId:0,displayMinute:"",displayCounter:"",displayTeam:"",playerName:"",readableType:"",direction:"",type:"item"},initialize:function(e){var t=("goal"===e.type||"cancel"===e.type)&&this.get("score");if(e.minute){var s="mini"===window.mode?"&nbsp;":"",o=e.minute+"&#39;";e.overtime&&(o=n.OvertimeEdgesForPeriod[e.period]+"&#39; "+s+"(+"+e.overtime+")"),this.set("displayMinute",o)}e.counter&&this.set("displayCounter","#"+e.counter),e.teams&&this.set("displayTeam",e.teams[e.direction]),void 0!==e.eventId&&-1===[1,3,20].indexOf(e.eventId)&&this.set("readableType",e.playerName||i.getEventCodeById(e.eventId)),t&&(this.set("readableType",this.get("readableType")+" "+this.get("score").home+"-"+this.get("score").away),this.set("displayCounter","")),e.showOverGoals&&"2"===e.period&&this.set("betting",e.overGoals)}})})),define("controlPanel/comments/soccer/commentsM",["require","backbone","underscore","controlPanel/control/gameAwareM","controlPanel/comments/soccer/commentsItemM","shared/enums"],(function(e){var t=e("backbone"),i=e("underscore"),n=e("controlPanel/control/gameAwareM"),s=e("controlPanel/comments/soccer/commentsItemM"),o=e("shared/enums"),r=t.Collection.extend({model:s});return n.extend({defaults:{readableType:"",counter:"",eventId:"",minute:"",teams:{home:"",away:""},direction:"",type:"",score:"",overGoals:0},initialize:function(){this.comments=new r,this.homeTeam="home",this.awayTeam="away",this.score={home:0,away:0},this.ignoredEventCodes=[1,3,5,7,20,142,256,1031,2055,1051,2075],this.cancelGoalEvents=[1030,2054],this.specialEvents=["dangerous-attack"],this.ommitEvents=["attack"],this.bindListeners(),this.overGoalsCounter=0,this.historyHandled=!1},bindListeners:function(){this.listenTo(t,"data:match-context",(function(e){this.homeTeam=e.homeTeamistenTo(t,"event:history-handled",(function(){this.historyHandled=!0})),this.listenTo(t,"game:event",this.handleEvent),this.listenTo(t,"match:penalty-shootout match:first-half match:second-half match:first-extra match:second-extra",this.handleEvent),this.listenTo(t,"event:canceled",this.handleEvent),this.listenTo(t,"stats:update",this.handleStatsInfo),this.listenTo(t,"event:player-name",this.updateEvent)},handleStatsInfo:function(e){var t=new s(e);this.comments.add(t,{silent:!this.historyHandled,at:this.indexForPeriodical}),delete this.indexForPeriodical},updateCounters:function(e){e.minutes&&(this.lastKnownMinute=e.minutes),e.type===o.Statistic.Goal&&(this.score[e.direction]+=1)},getScore:function(){return this.n(){return this.lastKnownMinute},getOvertime:function(e){return e||0},shouldAddEvent:function(e){if(-1!==i.indexOf(this.specialEvents,e.type)){var t=e.counter;return 1===t||t%5xOf(this.ommitEvents,e.type)},setTimeStringEntry:function(){return!0},handleEvent:function(e){this.updateCounters(e),"cancel"===e.type?this.cancelRecentEvents(e):this.addEvent(e)},addEvent:function(e){if(this.shouldAddEvent(e)&&-1===this.ignoredEventCodes.indexOf(e.eventId)){var n=e.counter,r=this.getScore(),a=this.getMinutes(),l={counter:n,eventId:e.eventId,eventNumber:Number(e.eventNumber),minute:a,overtime:this.getOvertime(e.overtime),period:e.period,playerName:e.playerName,teams:{home:this.homeTeam,away:this.awayTeam},direction:e.direction,type:e.type,score:r};"substitution"===e.type&&i.extend(l,{jerseyOutSubstitution:e.jerseyOutSubstitution,jerseyInSubstitution:e.jerseyInSubstitution,playerOutSubstitution:e.playerOutSubstitution,playerInSubstitution:e.playerInSubstitution});var c=new s(l);this.comments.add(c,{silent:e.fromHistory}),2==+e.period&&e.type===o.Statistic.Goal&&t.trigger("comments:goal-event",e)}},recalculatePeriodicalStats:function(e){var i,n,s,r=[o.Statistic.Goal,o.StatCorner];(s=e.filter((function(e){return-1!==r.indexOf(e.get("type"))}))[0])&&(i=this.comments.indexOf(s),(n=this.comments.filter((function(e){return"periodical-info"===e.get("type")&&this.comments.indexOf(e)>i}),this)[0])&&(this.indexForPeriodical=this.comments.indexOf(n),t.trigger("comments:recalculate-periodical",n.get("minute"),{force:!0}),n.destroy()))},updateEvent:function(e){var t=this.comments.where({eventNumber:parseInt(e.eventNumber,10)});i.each(t,(function(t){if(""!==e.playerName)switch(t.get("type")){case o.Statistic.Goal:t.set({readableType:e.playerName+" "+t.get("score").home+"-"+t.get("score").away});break;case o.Statistic.YellowCard:case o.Statistic.RedCard:t.set({readableType:e.playerName});break;case o.Statistic.Substitution:t.set({jerseyOutSubstitution:e.jerseyOutSubstitution||"",jerseyInSubstitution:e.jerseyInSubstitution||"",playerOutSubstitution:e.playerOutSubstitution||"",playerInSubstitution:e.playerInSubstitution||""})}}),this)},cancelRecentEvents:function(e){var t=this.comments.where({eventNumber:e.eventNumber});this.recalculatePeriodicalStats(t),i.each(t,(function(e){e.get("type")===o.Statistic.Goal&&(this.score[e.get("direction")]-=1),e.destroy()}),this)}})})),define("controlPanel/comments/soccer/commentsItemV",["require","marionette"],(function(e){return e("marionette").ItemView.extend({className:"comments-item",getTemplate:function(){switch(this.model.get("type")){case"periodical-info":return"#comments-periodical-info";case"betting-info":return"#comments-betting-info";case"goals-over-info":return"#comments-goals-over-template";default:return"#comments-item-template"}},initialize:function(){var e,t="",i=this.model.get("playerInSubstitution"),n=this.model.get("jerseyInSubstitution");(void 0!==i&&""!==i||void 0!==n&&""!==n)&&(t="-detailed"),(e="comment-"+this.model.get("type")+t)&&this.$el.toggleClass(e,!0)},modelEvents:{change:"render"}})})),define("$commentsV",["require","shared/controlsV","controlPanel/comments/soccer/commentsM","controlPanel/comments/soccer/commentsItemV","controlPanel/control/rebindableCollection","units/Scrollbar"],(function(e){var t=e("shared/controlsV"),i=e("controlPanel/comments/soccer/commentsM"),n=e("controlPanel/comments/soccer/commentsItemV"),s=e("controlPanel/control/rebindableCollection"),o=e("units/Scrollbar"),rmments-item-collection",appendHtml:function(e,t){e.$el.prepend(t.el)}});return t.extend({getTemplate:function(){return!0===this.model.get("gameStarted")?"#comments-template-no-filter":"#commentary-not-started-template"},placeholders:{content:"#comments-content"},ui:{content:"#comments-content"},events:{"click .comment-item-periodical-collapse":"onCollapse"},onCollapse:function(e){$(e.currentTarget).toggleClass("collapsed").parent().siblings(".comment-item-content").slideToggle("fast",o.update.bind(o,this.ui.content))},onShow:function(){this.views.content.setElement(this.ui.content),this.views.content.render(),this.undelegateEvents(),this.delegateEvents(),o.updateOrInit(this.ui.content)},onClose:function(){},bindListeners:function(){this.listenTo(this.model,"change:gameStarted",(function(){this.render()})),this.listenTo(this.model.comments,"change reset add remove",o.update.bind(o,this.ui.content))},initialize:function(){this.model=new i,this.views={content:new r({collection:this.model.comments})},this.bindListeners()}})})),define("$controlPanelView",["require","controlPanel/control/controlPanelView","controlPanel/keyStats/keyStatsV","controlPanel/headToHead/headToHeadV","controlPanel/form/formV","$teamsV","$commentsV","config/modules","app/appContext","localisation/manager"],(function(e){var t=e("controlPanel/control/controlPanelView"),i=e("controlPanel/keyStats/keyStatsV"),n=e("controlPanel/headToHead/headToHeadV"),s=e("controlPanel/form/formV"),o=e("$teamsV"),r=e("$commentsV"),a=e("config/modules"),l=e("app/appContext"),c=e("localisation/manager");return t.extend({initializeViewContainer:function(){if(t.prototype.initializeViewContainer.call(this),a.keyStats&&this.addTab(i,"key-stats",c.get("KST")),a.headToHead){var e=l.isMini?c.get("H2HMINI"):c.get("H2H");this.addTab(n,"h2h",e)}a.form&&this.addTab(s,"form",c.get("FORM")),a.teams&&this.addTab(o,"teams",c.get("TEAMS")),a.comments&&this.addTab(r,"comments",c.get("COMMENTS"))}})})),define("controlPanel/control/controlPanelModel",["require","backbone"],(function(e){var t=e("backbone");returtion(){this.listenTo(t,"soh:toggle-control-panel",this.toggleActive)},toggleActive:function(e){var t;t=e&&void 0!==e.toBeSet?e.toBeSet:!this.get("active"),this.set("withoutAnimation",e&&e.withoutAnimation),this.set("active",t)}})})),define("prematch/playerkitView",["require","marionette","$enums"],(function(e){var t=e("marionette"),i=e("$enums");return t.ItemView.extend({template:"#player-kit-template",modelEvents:{change:"render"},ui:{color1:".color-1"},parseColor:function(e){return"string"==typeof e?"#"+e.substr(0,6):"transparent"},onRender:function(){var e;this.model.get("dataReceived")?(e=this.parseColor(this.model.get("color1")),this.$el.show(),this.ui.color1.css({background:e})):(e="home"===this.model.side?i.DefaultColors.Home:i.DefaultColors.Away,this.ui.color1.css({background:this.parseColor(e)}),this.$el.show())}})})),define("scoreboard/goalScoreM",["require","backbone","app/appContext","$enums"],(function(e){var t=e("backbone"),i=e("app/appContext");e("$enums");var n=t.Model.extend({defaults:{home:"",away:"",common:"",minute:""}}),s=t.Collection.extend({model:n});return t.Model.extend({initialize:function(){this.collection=new s,this.collection.comparator=this.orderByMinute,this.collectionFiltered=new s,this.bindeListeners()},bindeListeners:function(){this.listenTo(t,"game:event csb:hive-message-goal",this.addEvent),this.listenTo(t,"app:refresh-data-source",this.filterCollection),this.listenTo(t,"event:canceled csb:hive-event-cancelled",this.removeEvent),this.listenTo(t,"data:match-context",this.storeTeamNames),this.listenTo(t,"event:player-name",this.updateEvent),this.listenTo(this.collection,"update change add remove reset",this.filterCollection)},filterCollection:function(){var e=new s;e.reset(this.collection.where({isHiveData:i.isHiveData})),this.collectionFiltered.reset(e.toJSON())},orderByMinute:function(e){var t=e.get("minute");return"number"!=typeof t&&(t=parseInt(t,10)),t},removeEvent:function(e){this.collection.remove(this.collection.where(mNames:function(e){this.homeTeam=e.homeTeam,this.awayTeam=e.awayTeam},addEvent:function(){},updateEvent:function(e){var t=this.collection.where({eventNumber:Number(e.eventNumber)});_.each(t,(function(t){""!==e.playerName&&(""!==t.get("home")?t.set({home:e.playerName}):""!==t.get("away")&&t.set({away:e.playerName}))}),this)}})})),define("$goalScoreM",["require","scoreboard/goalScoreM","$enums"],(function(e){var t=e("scoreboard/goalScoreM"),i=e("$enums");return new(t.extend({addEvent:function(e){var t=e.minutes+"'",n=!!e.hiveData;if(e.overtime&&(t=i.OvertimeEdgesForPeriod[e.period]+"' (+"+e.overtime+")"),"goal"===e.type)switch(e.direction){case"home":this.collection.add({home:e.playerName||this.homeTeam,minute:t,eventNumber:Number(e.eventNumber),isHiveData:n});break;case"away":this.collection.add({away:e.playerName||this.awayTeam,minute:t,eventNumber:Number(e.eventNumber),isHiveData:n})}}}))})),define("scoreboard/goalScoreV",["require","marionette","shared/controlsV","$goalScoreM","../app/appContext","units/Scrollbar"],(function(e){var t=e("marionette"),i=e("shared/controlsV"),n=e("$goalScoreM"),s=e("../app/appContext");if(e("units/Scrollbar"),n){var o=t.ItemView.extend({template:"#scoreboard-goal-item-template",className:"goal-score-item-view",modelEvents:{change:"render"}}),r=t.CollectionView.extend({itemView:o});return new(i.extend({template:"#scoreboard-goals-template",placeholders:{items:"#goals-items",scores:"#goals-content",wrapper:"#goals-wrapper"},scoresShown:!1,isAnimated:!1,scrollbarContainerPath:"wrapper",collectionEvents:{"replace reset add remove":"showScrollbar"},initialize:function(){this.views={items:new r({collection:this.model.collectionFiltered})},this.listenTo(Backbone,"event:history-handled",this.render)},onRender:function(){this.delegateEvents(),s.isMini&&this.ui.items.addClass("mini"),this.ui.scores.css("display","none")},afterFadeIn:function(){this.ui.wrapper.animate({height:this.ui.items.height()},{duration:100,easing:"linear",complete:this.showScrolled=!1},afterFadeOut:function(){this.scoresShow=!1,this.isAnimated=!1},handleScoreClick:function(e){if(!this.isAnimated){var t="goal-mouseover-stub"===$(e.target).attr("id");this.scoresShown&&t?(this.isAnimated=!0,this.ui.scores.fadeOut(250,this.afterFadeOut.bind(this))):this.model.collectionFiltered.length>0&&(this.isAnimated=!0,this.ui.scores.fadeIn(250,this.afterFadeIn.bind(this)))}},handleScoreMouseEnter:function(){this.model.collectionFiltered.length>0&&(this.ui.scores.fadeIn(250,this.afterFadeIn.bind(this)),Backbone.trigger("data:send-GA-stats",{eventCa:function(){this.ui.scores.fadeOut(250,this.afterFadeOut.bind(this))}}))({model:n})}})),define("scoreboard/scoreboardV",["require","prematch/playerkitView","shared/controlsV","./goalScoreV","app/appContext"],(function(e){var t=e("prematch/playerkitView"),i=e("shared/controlsV"),n=e("./goalScoreV"),s=e("app/appContext");return i.extend({el:"#header-scoreboard-control",getTemplate:function(){return"#scoreboard-template"},placeholders:{scores:"#header-scores",headerScoresTrigger:"#header-scores-trigger",goalsContent:"#goals-content",goalContainer:"#goals-positioner",stub:"#goal-mouseover-stub",home:"#header-home-player-kit",away:"#header-away-player-kit"},events:{"click @ui.goalsContent":"handleScoreClick","click @ui.headerScoresTrigger":"handleScoreClick","mouseenter @ui.headerScoresTrigger":"handleScoreMouseEnter","mouseenter @ui.stub":"enterTimer","mouseenter @ui.goalContainer":"enterTimer","mouseleave @ui.stub":"leaveTimer","mouseleave @ui.goalContainer":"leaveTimer"},onRender:function(){var e=this.$("#header-scoreboard"),t=this.model.get("started");e.toggleClass("started",t),e.toggleClass("not-starerTimer:function(){var e=this;setTimeout((funar e=this;setTimeout((function(){e.flag=!0,e.handleScoreMouseLeave()}),50)},handleScoreClick:function(e){this.views.scores.handleScoreClick(e),this.clicked=!0},handleScoreMouseEnter:function(){s.bodyDisabled||(this.clicked?this.clicked=!1:this.views.scores.handleScoreMetTimeout((function(){e.flag&&e.views.scores.handleScoreMouseLeave()}),100)},isRealMouseLeave:function(){return this.flag},initialize:function(e){this.views={},this.views.scores=n,this.views.home=new t({model:e.homePlayerKit}),this.views.away=new t({model:e.awayPlayerKit}),this.listeningUpdates=!1,this.bindListeners()},bindListeners:function(){this.listenTo(Backbone,"app:game-not-started app:game-started event:history-handled",this.startListeningUpdates,this)},startListeningUpdates:function(){this.listeningUpdates||(this.render(),this.model.on("change",this.render,this),this.listeningUpdates=!0)}})})),define("scoreboard/scoreboardM",["require","backbone","$enums","app/appContext"],(function(e){var t=e("backbone"),i=e("$enums"),n=e("app/appContext");return t.Model.extend({defaults:{homeTeam:"HOME",awayTeam:"AWAY",homeTeamAbbr:"HOM",awayTeamAbbr:"AWA",homeScored:0,awayScored:0,started:!1},initialize:function(){this.namesForced={home:!1,away:!1},this.set("premHomeScored",0),this.set("premAwayScored",0),this.set("rballHomeScored",0),this.set("rballAwayScored",0),this.bindListeners()},bindListeners:function(){this.listenTo(t,"app:message",(function(e){this.setScore(e)})),this.listenTo(t,"csb:hive-mesb:hive-message-score-fallback",(function(e){this.setPremVisScore(e)})),this.listenTo(t,"csb:update-header-scores app:refresh-data-source",(function(){this.updateHeaderScores()})),this.listenTo(t,"data:match-his.listenTo(t,"app:game-started",(function(){this.set("started",!0)}))},setScore:function(e){if(e.ScoreHome&&e.ScoreAway){var t=e.ScoreHome+":"+e.ScoreAway;if((e.TickerStateId===i.TickerStates.PenaltyShootout||e.TickerStateId===i.TickerStates.Finished)&&(t=e.FullTimeScoreExtraTime||e.FullTimeScore||t),t){var n=t.split(":"),s=n.pop(),o=n.pop();this.set("rballHomeScored",o),this.set("rballAwayScored",s),this.updateHeaderScores()}}},setPremVisScore:function(e){void 0!==e.ScoreHome&&void 0!==e.ScoreAway&&(this.set("premHomeScored",e.ScoreHome),this.set("premAwayScored",e.ScoreAway),this.updateHeaderScores())},updateHeaderScores:function(){n.isHiveData?(this.set("homeScored",this.get("premHomeScored")),this.set("awayScored",this.get("premAwayScored"))):(this.set("homeScored",this.get("rballHomeScored")),this.set("awayScored",this.get("rballAwayScored")))},handleMatchContext:function(e){n.isMini?this.set({homeTeam:e.homeTeamAbbr,awayTeam:e.awayTeamAbbr},{silent:!0}):this.set({homeTeam:e.homeTeam,awayTeam:e.awayTeam},{silent:!0}),this.set({homeTeamAbbr:e.homeTeamAbbr,awayTeamAbbr:e.awayTeamAbbr})}})})),define("timeline/soccer/soccerPt/penaltyEventM",["require","backbone"],(function(e){return e("backbone").Model.extend({defaults:{isGoal:"none",index:1}})})),define("timeline/soccer/soccerPt/penaltyEventC",["require","backbone","./penaltyEventM"],(function(e){var t=e("backbone"),i=e("./penaltyEventM");return t.Collection.extend({model:i})})),define("timeline/soccer/soccerPt/penaltyM",["require","backbone","./penaltyEventC","underscore","app/appContext","units/hive/constants"],(function(e){var t=e("backbone"),i=e("./penaltyEventC"),n=e("underscore"),s=e("app/appContext"),o=e("units/hive/constants").POEM.eventTypes;return t.Model.extend({defaults:{homeScore:0,awayScore:0,period:5},initialize:function(){this.homePenaltyC=new i,this.awayPenaltyC=new i,this.homePenaltyCFiltered=new i,this.awayPenaltyCFiltered=new i,this.scoreHomeRB=0,this.scoreAwayRB=0,this.scoreHomeHive=0,this.scoreAwayHive=0,this.allowedEventsRB=[1029,2053,1060,2084,142],this.allowedEventsHive=[o.goal,o.penaltyFaced],this.penaltyEvents=[1031,2055],this.listenTo(t,"app:refresh-data-source",(function(){this.filterCollection(),this.refreshScores()})),this.initializeDefaultShots(),this.filterCollection()},filterCollection:function(){var e=new i,t=new i;e.reset(this.homePenaltyC.where({isHiveData:s.isHiveData})),t.reset(this.awayPenaltyC.where({isHiveData:s.isHiveData})),this.homePenaltyCFiltered.reset(e.toJSON()),this.awayPenaltyCFiltered.reset(t.toJSON())},initializeDefaultShots:function(){for(var e=1;e<=10;e++)this.homePenaltyC.push({isGoal:"none",index:Math.ceil(e/2),isHiveData:!!(e%2)}),this.awayPenaltyC.push({isGoal:"none",index:Math.ceil(e/2),isHiveData:!!(e%2)})},addEvent:function(e){var t=!!e.hiveData,i=t?this.allowedEventsHive:this.allowedEventsRB,s="number"==typeof e.period?e.period:parseInt(e.period,10);n.indexOf(this.penaltyEvents,e.eventId)>-1&&(this.lastPenaltyDirection=e.direction),e&&e.type&&-1!==n.indexOf(i,e.eventId)&&s===this.get("period")&&(e.direction||(e.direction=this.lastPenaltyDirection),e.isHiveData=t,"home"===e.direction?this.addItemToCollection(e,this.homePenaltyC):this.addItemToCollection(e,this.awayPenaltyC),this.filterCollection(),this.calculateScore_())},addItemToCollection:function(e,t){var i=t.where({isGoal:"none",isHiveData:e.isHiveData});0!==i.length?n.first(i).set({isGoal:e.type,eventNumber:e.eventNumber}):t.push({isGoal:e.type,eventNumber:e.eventNumber,isHiveData:e.isHiveData,index:this.getNextIndex_(t,e.isHiveData)})},getNextIndex_:function(e,t){return e.reject((function(e){return"none"===e.get("isGoal")&&e.get("isHiveData")!==t})).length+1},removeEvent:function(e){this.removeFromCollection_(e,this.homePenaltyC),this.removeFromCollection_(e,this.awayPenaltyC),this.filterCollection(),this.calculateScore_()},removeFromCollection_:function(e,t){var i=!!e.hiveData,n=t.findWhere({eventNumber:e.eventNumber,isHiveData:i});n&&(t.length<=10?n.set({isGoal:"none",eventNumber:0}):t.remove(n))},getFilteredGoalsAmount:function(e,t){return e.where({isGoal:"goal",isHiveData:t}).length},calculateScore_:function(){this.scoreHomeRB=this.getFilteredGoalsAmount(this.homePenaltyC,!1),this.scoreAwayRB=this.getFilteredGoalsAmount(this.awayPenaltyC,!1),this.scoreHomeHive=this.getFilteredGoalsAmount(this.homePenaltyC,!0),this.scoreAwayHive=this.getFilteredGoalsAmount(this.awayPenaltyC,!0),this.refreshScores()},refreshScores:function(){this.set("homeScore",s.isHiveData?this.scoreHomeHive:this.scoreHomeRB),this.set("awayScore",s.isHiveData?this.scoreAwayHive:this.scoreAwayRB)},onMinutesChanged:function(){}})})),define("timeline/soccer/soccerPt/penaltyEventV",["require","marionette"],(function(e){return e("marionette").ItemView.extend({template:"#penalty-item-template",className:"penalty-item",modelEvents:{change:"render"}})})),define("units/PenaltyScroll",["require","backbone"],(function(e){var t=e("backbone");function i(){}return i.prototype.init=function(e,i){if((e instanceof $||e instanceof t.$)&&e.length){if(this.isInitialized(e))return e;if(e.get(0)){var n=document.createElement("div");n.classList.add("viewport"),e.addClass("penalty-scroll"),e.contents().appendTo(n),e.append(n),this.delta=i||1;var s=this;return["left","right"].forEach((function(t){var i=document.createElement("a");i.classList.add("scroll-button",t),e.prepend(i),e.find(".scroll-button."+t).on("click",s._buttonClickHandler.bind(s,e,t))})),e.data("scrollbarPen",s),this.update(e),e}}},i.prototype._buttonClickHandler=function(e,t){var i,n=e.data("scrollbarPen").delta,s=e.find(".viewport");(i=s.scrollLeft()+n*("left"===t?-1:1))<0?i=0:i>s[0].scrollWidth-s[0].offsetWidth&&(i=s[0].scrollWidth-s[0].offsetWidth),s.scrollLeft(i)},i.prototype.isInitialized=function(e){return(e instanceof $||e instanceof t.$)&&e.length&&!!e.data("scrollbarPen")},i.prototype.update=function(e,t){if(this.isInitialized(e)){var i=e.find(".viewport")[0];i.scrollLeft="end"===t?i.scrollWidth:t}return e},new i})),define("timeline/soccer/soccerPt/penaltyEventCV",["require","marionette","./penaltyEventV","units/PenaltyScroll"],(function(e){var t=e("marionette"),i=e("./penaltyEventV"),n=e("units/PenaltyScroll");return t.CollectionView.extend({itemView:i,initialize:function(e){this.direction=e.direction,this.listenTo(this.collection,"all",this.removeItem),this.listenTo(BackimelineSwitch)},onTimelineSwitch:function(e){e&&this.scrollToStart()},removeItem:function(){this.$el.find(".viewport").html(""),this.render(),this.scrollToEnd()},addItemView:function(e,t){var i=this.$el.find(".viewport"),n=new t({model:e});return i.append(n.render().el),this.scrollToEnd(),this},scrollToStart:function(){n.update(this.$el,"left"===this.direction?"end":0)},scrollToEnd:function(){n.update(this.$el,"left"===this.direction?0:"end")}})})),define("timeline/soccer/soccerPt/penaltyV",["require","marionette","app/appContext","./penaltyEventCV","units/PenaltyScroll"],(function(e){var t=e("marionette"),i=e("app/appContext"),n=e("./penaltyEventCV"),s=e("units/PenaltyScroll");return t.ItemView.extend({template:"#timeline-penalty-template",ui:{score:"#total-penalty-score",container:"#timeline-penalty-template"},modelEvents:{"change:awayScore change:homeScore":"renderScore"},onShow:function(){this.homePenaltyCV=new n({el:"#home-penalty-score",collection:this.model.homePenaltyCFiltered,direction:"left"}),this.awayPenaltyCV=new n({el:"#away-penalty-score",collection:this.model.awayPenaltyCFiltered,direction:"right"}),this.applyScrollbars(),this.renderScore(),this.homePenaltyCV.render().scrollToStart(),this.awayPenaltyCV.render().scrollToStart()},applyScrollbars:function(){var e=this.$el.find("#home-penalty-score"),t=this.$el.find("#away-penalty-score"),n=i.isMini?21:41;s.init(e,n),s.init(t,n)},renderScore:function(){var e=this.model.get("homeScore")>9||this.model.get("awayScore")>9,t=this.model.get("homeScore")+"-"+this.model.get("awayScore");this.ui.container.toggleClass("long-score",e),this.ui.score.html(t)},onRender:function(){this.delegateEvents()}})})),define("timeline/soccer/tlEvent/timelineEventV",["require","marionette","underscore"],(function(e){var t=e("marionette"),i=e("underscore");return t.ItemView.extend({template:i.template($("#timeline-event-template").html()),tooltipTemplate:i.template($("#timeline-tooltip-template").html()),ui:{tooltip:".timeline-tooltip",eventDiv:".timeline-event",icon:".timeline-event-icon"},events:{"mouseenter @ui.icon":"showTooltip","mouseleave @ui.icon":"hideTooltip"},attach:function(e){void 0!==e&&(this.$el.appendTo(e),this.bindUIElements())},showTooltip:function(){window.mini||(this.tooltipRendered||(this.calculateTooltipOffset(),this.ui.tooltip.html(this.tooltipTemplate(this.model.toJSON())),this.tooltipRendered=!0),this.ui.tooltip.show(),this.ui.icon.css({"z-index":"21"}),Backbone.trigger("data:send-GA-stats",{eventCategory:"TIMELINE/"+this.model.get("type").toUpperCase(),eventAction:"mouseover"}))},calculateTooltipOffset:function(){var e=this.model.get("tooltip"),t=this.model.get("left"),i=this.ui.eventDiv.offset().left,n=this.model.get("side"),s=window.clientWidth;"right"===n?e.left=t+10:(e.right=s-(i+this.ui.eventDiv.outerWidth()),e.right=e.right/s*600+5),this.model.set("tooltip",e)},hideTooltip:function(){window.mini||(this.ui.tooltip.hide(),this.ui.icon.css({"z-index":"1"}))}})})),define("timeline/soccer/soccerRt/timelineV",["require","marionette","underscore","./../tlEvent/timelineEventV"],(function(e){var t=e("marionette"),i=e("underscore"),n=e("./../tlEvent/timelineEventV");return t.ItemView.extend({template:"#timeline-template-new-regular-time",timelineBarView:i.template($("#timeline-bar-item").html()),timelineElapsedTimeView:i.template($("#timeline-elapsed-time-control").html()),el:"#timeline-items",timelineAwayItem:".timeline-item-away",timelineHomeItem:".timeline-item-home",ui:{elapsedTimeControl:"#timeline-elapsed-time-bar",homeEventItem:"#home-tl-item-",awayEventItem:"#away-tl-item-",timelineItemshome:"#-away"},onShow:function(){this.bindUIElements(),this.bindListeners()},render:function(){t.ItemView.prototype.render.call(this),this.renderTimelineBars(),this.renderElapsedTime(),this.renderView()},renderTimelineBars:function(){var e=this.model.get("timelineNumberOfBars"),t=this.timelineBarView({total:e,type:"home"}),i=this.timelineBarView({total:e,type:"away"});this.ui.timelineItemshome.append(t),this.ui.timelineItapsedTime),this.listenTo(this.model,"event-changed",this.renderView)},renderElapsedTime:function(){var e=this.timelineElapsedTimeView(this.model.toJSON());$(this.ui.elapsedTimeControl.selector).remove(),this.$el.prepend(e)},renderView:function(){var e=this;$(this.timelineHomeItem,this.ui.timelineItemshome).empty(),$(this.timelineAwayItem,this.ui.timelineItemsaway).empty(),this.model.eventsFiltered.each((function(t){var i=new n({model:t}).render().el,s="#timeline-item-"+t.get("direction")+"-"+t.get("targetTimelineBar");$(s,e.ui["timelineItems"+t.get("direction")]).append(i)}))}})})),define("timeline/soccer/tlEvent/timelineEventM",["require","backbone","app/appContext"],(function(e){var t=e("backbone"),i=e("app/appContext");return t.Model.extend({defaults:{minutes:0,overtime:0,overtimeClass:"",type:"yellow-card",direction:"home",teamName:"home",teamNameAbbr:"home",playerName:"",eventNumber:0,left:0,top:0,tooltipSide:"right",aggregated:[],tooltipContent:"",playerOutSubstitution:"",playerInSubstitution:"",jerseyInSubstitution:"",jerseyOutSubstitution:""},initialize:function(){this.calculateTooltipContent();var e={eventNumber:this.get("eventNumber"),type:this.get("type"),minutes:this.get("minutes"),overtime:this.get("overtime"),overtimeClass:this.get("overtimeClass"),teamName:this.get("teamName"),teamNameAbbr:this.get("teamNameAbbr"),playerName:this.get("playerName"),tooltipContent:this.get("tooltipContent")};"substitution"===this.get("type")&&_.extend(e,{playerOutSubstitution:this.get("playerOutSubstitution"),playerInSubstitution:this.get("playerInSubstitution"),jerseyInSubstitution:this.get("jerseyInSubstitution"),jerseyOutSubstitution:this.get("jerseyOutSubstitution")}),this.set("aggregated",[e])},calculateTooltipContent:function(){i.isMini?this.set("tooltipContent",this.get("teamNameAbbr")):this.set("tooltipContent",this.get("playerName")||this.get("teamName"))}})})),define("timeline/soccer/tlEvent/timelineEventC",["require","backbone","./timelineEventM","$enums","app/appContext","underscore"],(function(e){var t=e("backbone"),i=e("./timelineEventM"),n=e("$enums"),s=e("app/appContext"),o=e("underscore");return t.Collection.extend({model:i,initialize:function(){this.aggregateRange=s.isMini?5:1},aggregate:function(){var e,t,i,n;for(this.models.sort((function(e,t){return e.get("minutes")<t.get("minutes")?-1:t.get("minutes")<e.get("minutes")?1:0})),e=0;e<=this.models.length-1;e++)if(0!==this.models[e].get("aggregated").length)for(this.models[e]&&this.models[e].set("overtimeClass",this.models[e].get("overtime")>0?"overtime":""),t=e+1;this.models[t]&&Math.abs(this.models[e].get("minutes")-this.models[t].get("minutes"))<=this.aggregateRange;)this.models[e].get("direction")===this.models[t].get("direction")?(n={eventNumber:(i=this.models[t]).get("eventNumber"),type:i.get("type"),minutes:i.get("minutes"),overtime:i.get("overtime"),teamName:i.get("teamName"),teamNameAbbr:i.get("teamNameAbbr"),playerName:i.get("playerName"),tooltipContent:i.get("tooltipContent")},"substitution"===i.get("type")&&o.extend(n,{playerOutSubstitution:i.get("playerOutSubstitution"),playerInSubstitution:i.get("playerInSubstitution"),jerseyOutSubstitution:i.get("jerseyOutSubstitution"),jerseyInSubstitution:i.get("jerseyInSubstitution")}),this.isAggregated(this.models[e].get("aggregated"),n)||this.models[e].get("aggregated").push(n),this.calculateAggregatedEventProperties(this.models[e]),this.remove(this.models[t]),--e<0&&(e=0)):this.calculateAggregatedEventProperties(this.models[e]),t++;else this.remove(this.models[e]),e--},calculateAggregatedEventProperties:function(e){e.get("aggregated").sort((function(e,t){return e.minutes+e.overtime<t.minutes+t.overtime?-1:t.minutes+t.overtimmin(e.get("aggregated"),(function(e){return n.Eventet("minutes",o.min(e.get("aggregated"),(function(e){return e.minutes})).minutes)},isAggregated:function(e,t){var i=!1;return e.forEach((function(e){e.hasOwnProperty("eventNumber")&&e.eventNumber===t.eventNumber&&e.hasOwnProperty("type")&&e.type===t.type&&(i=!0)})),i}})})),define("timeline/soccer/soccerRt/timelineM",["require","backbone","./../tlEvent/timelineEventC","./../tlEvent/timelineEventM","app/appContext","shared/utils","shared/enums","units/hive/constants"],(function(e){var t=e("backbone"),i=e("./../tlEvent/timelineEventC"),n=e("./../tlEvent/timelineEventM"),s=e("app/appContext"),o=e("shared/utils"),r=e("shared/enums"),a=e("units/hive/constants").POEM.eventTypes;return t.Model.extend({defaults:{filled:0,minutes:0,startPeriod:0,endPeriod:0,full:!1,width:0,elapsedTimePercentage:"0%",periods:[],timelineBarBreakpoints:{RT:{200:18,300:18,400:30,500:45},ET:{200:6,300:6,400:15,500:15}}},initialize:function(){this.timelineNumberOfBars=90,this.timelineType="RT",90===this.get("startPeriod")&&(this.timelineType="ET"),this.events=new i,this.eventsFiltered=new i,this.allowedEventsRB=[1029,2053,1034,2058,1032,2056,1055,2079],this.allowedEventsHive=[a.goal,a.temp_Goal,a.card,a.playerOff,a.playerOn],this.set("width",document.getElementById("timeline-items").offsetWidth);var e=Object.keys(this.get("timelineBarBreakpoints")[this.timelineType]).length,n=Object.keys(this.get("timelineBarBreakpoints")[this.timelineType]),s=0;do{if(this.get("width")<=parseInt(n[s],10)){this.timelineNumberOfBars=this.get("timelineBarBreakpoints")[this.timelineType][n[s]];break}s++}while(s<e);this.minutesPerBar=90/this.timelineNumberOfBars,"ET"===this.timelineType&&(this.minutesPerBar=30/this.timelineNumberOfBars),this.set("timelineNumberOfBars",this.timelineNumberOfBars),this.set("minutesPerBar",this.minutesPerBar),this.set("pxPerBar",Math.round(this.get("width")/this.get("timelineNumberOfBars")*100)/100),this.setTeamColors(),this.listenTo(t,"data:team-colors",this.setTeamColors),this.listenTo(t,"event:history-handled",this.historicalHandled),this.listenTo(t,"app:refresh-dat,"scoreboard:game-time",(function(e){this.isOvertime=e.time.overtime}))},setTeamColors:function(e){this.set("homeTeamColor","#"+(e?e.home.Color1:r.DefaultColors.Home)),this.set("awayTeamColor","#"+(e?e.away.Color1:r.DefaultColors.Away))},filterCollection:function(){var e=new i;e.reset(this.events.where({isHiveData:s.isHiveData})),this.eventsFiltered.reset(e.toJSON())},onMinutesChanged:function(e){var t=this.get("endPeriod"),i=this.get("startPeriod"),n=0;e>=t?(this.set("minutes",t),n="100%"):(this.set("minutes",e),n=Math.ceil((++e-i)/t*100)"elapsedTimePercentage",n)},onDestroy:function(){this.events.reset()},removeEvent:function(e){this.events.remove(this.events.where({eventNumber:e.eventNumber,isHiveData:!!e})),this.refreshEvents()},updateEvents:function(e){s.isMini||(this.events.models.every((function(t){var i,n,s=t.get("aggregated"),o=_.where(s,{eventNumber:e.eventNumber});if(0===o.length)return!0;for(i=0;i<o.length;i++)"substitution"===(n=o[i]).type?(n.playerOutSubstitution=e.playerOutSubstitution,n.playerInSubstitution=e.playerInSubstitution,n.jerseyOutSubstitution=e.jerseyOutSubstitution,n.jerseyInSubstitution=e.jerseyInSubstitution):(n.playerName=e.playerName,n.tooltipContent=n.playerName||n.teamName)})),this.refreshEvents())},addEvent:function(e){var t,i=!!e.hiveData,s=i?this.allowedEventsHive:this.allowedEventsRB,o=void 0!==e.minutes?e.minutes:this.get("minutes"),r="number"==typeof e.period?e.period:parseInt(e.period,10);-1!==_.indexOf(s,e.eventId)&&-1!==_.indexOf(this.get("periods"),r)&&(e.eventNumber=parseInt(e.eventNumber,10),e.teamName=this.prepareEventText(e.teamName),e.isHiveData=i,e.teamColor=this.get(e.direction+"TeamColor"),t=this.countPositionForEvent(o,e.direction),_.extend(e,t),_.extend(e,{minutes:o,number:this.eventsCount,targetTimelineBar:parseInt(o/this.minutesPerBar,10)}),90===o&&--e.targetTimelineBar,this.eventsCount++,this.events.add(new n(e),{silent:e.fromHistory}),this.refreshEvents())},historicalHandled:function(){this.refreshEvents()},prepareEventText:function(e){return o.trimString(o.applyTeamNameRules(e),18,{ending:"'"})},countPositionForEvent:function(e,t){var i={},n=this.get("width"),s=this.get("startPeriod"),o=this.get("endPeriod"),r={left:0,right:0,bottom:0};return i.top="away"===t?18:-6,e>=o?e=o-1:e%2!=0?e++:e<=s&&(e=s),i.left=Math.floor(e/this.get("minutesPerBar")*this.get("pxPerBar")-2),i.left>=this.get("width")-this.get("pxPerBar")?i.left=parseInt(this.get("width")-this.get("pxPerBar"),10):i.left-=this.get("pxPerBar"),i.side=i.left<=n/2?"right":"left","right"===i.side&&(r.left=n-i.left-this.get("pxPerBar"tion(),this.eventsFiltered.aggregate(),this.trigger("event-changed")}})})),define("scoreboard/playtimeM",["require","backbone","shared/utils","app/appContext"],(function(e){var t=e("backbone"),i=e("shared/utils"),n=e("app/appContext");return t.Model.extend({defaults:{playtime:"",minutes:0,timeIncrease:!0},initialize:function(){this.bindListeners()},bindListeners:function(){var e=this;this.listenTo(t,"match:current-playtime-pause",this.stopTimer),this.listenToOnce(t,"match:current-playtime",this.setCurrentPlaytimeAndStartTimer_),this.listenToOnce(t,"match:current-playtime-stopped",this.setCurrentPlaytime_),this.on("change:playtime",this.onPlaytimeChanged_),this.on("change:minutes",this.onMinuteo(t,"match:current-playtime",(function(t){e.startTimer(t,{force:!0})}))},setCurrentPlaytime_:function(e){this.currentPlaytime=e;var t=i.parseMilliseconds(e);this.set("playtime",i.formPlaytimeString(t)),this.set("minutes",t.minutes)},setCurrentPlaytimeAndStartTimer_:function(e){this.startTimer(e),this.currentPlaytime=e,this.listenToOnce(t,"match:current-playtime",(function(e){void 0!==e&&(this.currentPlaytime=e,this.startTimer(e,{force:!0}))}))},onPlaytimeChanged_:function(){var e=this.get("playtime");t.trigger("scoreboard:playtime",e)},stopTimer:function(e){if(void 0!==this.interval&&(clearInterval(this.interval),delete this.interval),void 0!==e){var t=e;t=i.parseMilliseconds(t),this.set("playtime",i.formPlaytimeString(t))}},startTimer:function(e,t){var n,s=0;if((void 0===this.interval||!t||!1!==t.force)&&void 0!==e){void 0!==this.lastEventStart&&(s=this.lastEventStart),n=i.parseMilliseconds(e-s),this.set("playtime",i.formPlaytimeString(n)),this.set("minutes",n.minutes+1);var o=this;this.stopTimer();var r=(new Date).getTime();this.interval=setInterval((function(){var t=(new Date).getTime();!0===o.get("timeIncrease")?n.inMilliseconds=t-r+e-s:n.inMilliseconds=r-t+e,n=i.parseMilliseconds(n.inMilliseconds),o.set("minutes",n.minutes+1),n.minutes>=0anged:function(){t.trigger("scoreboard:minutes",this.get("minutes"))}})})),define("scoreboard/soccer/playtimeM",["require","backbone","scoreboard/playtimeM","$enums"],(function(e){var t=e("backbone"),nd({initialize:function(){this.set("minutes",1),this.bindListeners()},bindListeners:function(){i.prototype.bindListeners.call(this),this.listenTo(t,"match:stop-timer",this.stopTimer),this.listenTo(t,"match:period-end",(function(e){this.stopTimer();var t=e.minutes||this.get("minutes");e.fromHistory||(this.set("playtime",--t+".00"),this.set("minutes",++t))})),this.listenTo(t,"match:first-half",(function(e){e&&e.fromHistory||this.startTimer(1)})),this.listenTo(t,"match:second-half",(function(e){e&&e.fromHistory||this.startTimer(276e4)})),this.listenTo(t,"match:first-extra",(function(e){e&&e.fromHistory||this.startTimer(546e4)})),this.listenTo(t,"match:second-extra",(function(e){e&&e.fromHistory||this.startTimer(636e4)})),this.on("change:minutes",this.onMinutesChanged),this.listenTo(t,"match:ticker-state",this.setTickerState_),this.listenTo(t,"scoreboard:playtime",this.onPlaytimeChanged_)},onPlaytimeChanged_:function(e){var i=e.get("playtime").split("."),s=parseInt(i[0],10)+1,o=i[1],r=n.TickerToGame[this.tickerStateId],a={overtime:!1};a.minutes=s,a.seconds=o,a.tickerStateId=this.tickerStateId,this.tickerStateId<n.TickerStates.FinishRegular&&s>=n.OvertimeEdgesForPeriod[r]&&(a.overMinutes=s-n.OvertimeEdgesForPeriod[r],a.overSeconds=o,a.minutes=n.OvertimeEdgesForPeriod[r],a.seconds="00",a.overtime=!0),t.trigger("scoreboard:ytime").length>5})},setTickerState_:function(e){this.tickerStateId=e}})})),define("$timelineControlV",["require","marionette","scoreboard/soccer/playtimeM","backbone","jquery","shared/enums"],(function(e){var t=e("marionette"),i=e("scoreboard/soccer/playtimeM"),n=e("backbone"),s=e("jquery"),o=s("#timeline-switch-tooltip"),r=e("shared/enums");return t.ItemView.extend({template:"#timeline-control-template",optionTemplate:_.template(s("#timeline-switch-option-template").html()),ui:{time:"#timeline-time-container",timeWrapper:"#timeline-time",minutes:"#timeline-time-minutes",seconds:"#timeline-time-seconds",overtime:"#timeline-time-overtime",teams:"#timeline-teams",homeTeam:"#timeline-teams-home span",awayTeam:"#timeline-teams-away span",homeTeamBg:"#timeline-teams-home",awayTeamBg:"#timeline-teams-away",switcher:"#timeline-switcher"},events:{"click @ui.switcher":"showTooltip"},initialize:function(){this.availableOptions_=0,this.playtime_=new i,this.bindListeners(),this.is.listenToOnce(n,"app:game-started",(function(){this.ui.time.hide()}))},bindListeners:function(){var e=this;this.listenTo(n,"data:team-colors",this.setTeamColors),this.listenTo(n,"scoreboard:game-time",this.onPlaytimeChanged_),this.listenToOnce(n,"match:penalty-shootout.homeTeam.text(e.homeTeamAbbr),this.ui.awayTeam.text(e.awayTeamAbbr)})),o.on("mouseleave",(function(){e.hideTooltip()}))},setTeamColors:function(e){this.ui.homeTeamBg.css("background-color","#"+(e?e.home.Color1:r.DefaultColors.Home)),this.ui.awayTeamBg.css("background-color","#"+(e?e.away.Color1:r.DefaultColors.Away))},onPlaytimeChanged_:function(e){var t=e.time;if(this.ui.timeWrapper.toggleClass("long-time",Boolean(e.long)),this.ui.time.show(),this.ui.minutes.text(t.minutes+"'"),t.overtime){var i="(+"+t.overMinutes+"."+t.overSeconds+")";this.ui.ovenaltyShootoutStart_:function(){this.$el.addClass("penalty-timeline")},addNewOption:function(e){var t=this.optionTemplate(e);o.prepend(t),this.availableOptions_++,this.availableOptions_>1&&this.ui.switcher.show()},showTooltip:function(){var e=s("body").height()-s("#csb-container").height(()-10;o.css("bottom",e+"px").show()},hideTooltip:function(){o.hide()}})})),define("$timelineController",["require","marionette","backbone","timeline/soccer/soccerPt/penaltyM","timeline/soccer/soccerPt/penaltyV","timeline/soccer/soccerRt/timelineV","timeline/soccer/soccerRt/timelineM","$timelineControlV"],(function(e){var t=e("marionette"),i=e("backbone"),n=e("timeline/soccer/soccerPt/penaltyM"),s=e("timeline/soccer/soccerPt/penaltyV"),o=e("timeline/soccer/soccerRt/timelineV"),r=e("timeline/soccer/soccerRt/timelineM"),a=e("$timelineControlV");return new(t.ItemView.extend({initialize:function(){this.currentRegion=new t.Region({el:"#timeline-active"}),this.models=[],this.initializeTimeline(),this.bindListeners()},initializeTimeline:function(){this.timelineControlContainer=$("#timeline-control"),this.minutes=0,this.width=window.mini?window.clientWidth-105:495,this.viewsContainer=new i.ChildViewContainer,this.timelineControl=new a,this.timelineControl.$el.appendTo(this.timelineControlContainer);var e=new r({periods:[1,2],startPeriod:1,endPeriod:90,width:this.width}),t=new o({model:e});this.createNewTimeline(e,t,"RT")},bindListeners:function(){this.listenTo(i,"game:event csb:hive-message-goal csb:hive-message-card csb:hive-message-substitution csb:hive-message-penalty",this.addEvent),this.listenTo(i,"event:canceled csb:hive-event-cancelled",this.removeEvent),this.listenTo(i,"scoreboard:minutes",this.onMinutesChanged_),this.listenTo(i,"event:player-name",this.updateEvent),this.listenTo(i,"match:first-extra",this.switchToExtraTime),this.listenToOnce(i,"match:penalty-shootout",this.switchToPenalties),$(document).on("click",".timeline-switch-option",$.proxy(this.onTimelineChange_,this))},switchToExtraTime:function(){var e=new r({periods:[3,4],startPeriod:90,endPeriod:120,width:this.width}),t=new o({model:e});this.createNewTimeline(e,t,"ET")},switchToPenalties:function(){var e=new n,t=new s({model:e});this.createNewTimeline(e,t,"Pens")},showTimeline:function(e){var t=this.viewsContainer.findByCid(e);this.currentRegion.show(t),this.timelineM=t.model,this.timelineM.onMinutesChanged(this.minutes)},addEvent:functent:function(e){this.models.forEach((function(t){t.removeEvent(e)}))},updateEvent:function(e)neM.updateEvents&&this.models.forEach((function(t){t.updateEvents(e)}))},createNewTimeline:function(e,t,i){this.timelineControl.addNewOption({name:i,cid:t.cid}),this.viewsContainer.add(t),this.models.push(t.modeanged_:function(e){this.minutes=e,this.timelineM.onMinutesChanged(e)},onTimelineChange_:function(e){var t=$(e.target).data("cid"),n="Pens"===$(e.target).data("name");this.showTimeline(t),this.timelineControl.hideTooltip(),this.timelineControl.$el.toggleClass("penalty-timeline",n),i.trigger("app:timeline-switched",!0)}}))})),define("tempo/tempoBarM",["require","backbone"],(function(e){var t=e("backbone");return t.Model.extend({defaults:{value:50,oldValue:50,rest:50,diff:"",teamColor:"#f5f5f5",initialized:!1},updateValue:function(e){this.set("value",e),this.get("initialized")&&this.set("diff",this.toDiffString(e-this.get("oldValue")));var i=100-e;this.set("rest",i>98?98:i),this.set("oldValue",e),85!==e&&90!==e&&95!==e&&100!==e||t.trigger("tempo:show-req"),this.set("initialized",!0)},toDiffString:function(e){return Number(e)!==Math.floor(e)&&(e=e.toFixed(1)),e&&Number(e)>0?"+"+e+"%":e&&Number(e)<0?e+"%":""}})})),define("tempo/tempoM",["require","backbone","./tempoBarM"],(function(e){var t=e("backbone"),i=e("./tempoBarM");return t.Model.extend({defaults:{minutes:"",homeTeam:"",awayTeam:"",tempoUpdatesCount:0},initialize:function(){this.bindListeners(),this.bars={home:new i,away:new i}},bindListeners:function(){this.listenTo(t,"data:tempo",(function(e){this.bars.home.updateValue(e.home),this.bars.away.updateValue(e.away),this.set("tempoUpdatesCount",this.get("tempoUpdatesCount")+1)})),this.listenTo(t,"data:team-colors",(function(e){this.bars.home.set("teamColor",e.home.Color1),this.bars.away.ses.listenTo(t,"scoreboard:minutes",(functs.set("homeTeam",e.homeTeamAbbr),this.set("awayTeam",e.awayTeamAbbr)})),this.listenTo(t,"game:event",(function(e){this.get("tempoUpdatesCount")>0&&!0!==e.fromHistory&&(e.tempo||"dangerous-attack"===e.type&&e.counter%5==0)&&t.trigger("tempo:show-req")}))}})})),define("tempo/tempoBarV",["require","marionette"],(function(e){return e("marionette").ItemView.extend({template:"#tempo-bar-template",ui:{color:".tempo-team-color"},modelEvents:{"change:teamColor":"colorUpdate"is.listenTo(Backbone,"bottom-panel:switch",(function(){this.render()}))},colorUpdate:function(){this.ui.color[0].style["background-color"]=this.model.get("teamColor")},onRender:function(){var e=this;this.mtive",!0),setTimeout((function(){e.$el.toggleClass("diff-active",!1)}),2e3))}})})),define("tempo/tempoV",["require","marionette","./tempoBarV"],(function(e){var t=e("marionette"),i=e("./tempoBarV");return t.ItemView.extend({template:_.template($("#tempo-template").html()),el:"#tempo-container",ui:{minutes:"#tempo-minutes",homeTeam:"#tempo-home-name",awayTeam:"#tempo-away-name"},modelEvents:{"change:minutes":"onMinutesChanged","change:homeTeam change:awayTeam":"changeTeamNames"},events:{},showTempoTab:function(){Backbone.trigger("cp:show-tab",{tab:"key-stats"})},initialize:function(){this.render(),this.bars={home:new i({model:this.model.bars.home,el:"#tempo-bar-home"}),away:new i({model:this.model.bars.away,el:"#tempo-bar-away"})},this.bars.home.render(),this.bars.away.render()},onMinutesChanged:function(){this.ui.minutes.text(this.model.get("minutes")+"'")},changeTeamNames:function(){this.ui.homeTeam.text(this.model.get("homeTeam")),this.ui.awayTeam.text(this.model.get("awayTeam"))}})})),define("app/bottomPanelController",["require","$timelineController","tempo/tempoM","tempo/tempoV","marionette"],(function(e){e("$timelineController");var t=e("tempo/tempoM"),i=e("tempo/tempoV"),n=e("marionette");return n.Controller.extend({initialize:function(){this.bindListeners();var e=new t;new i({model:e});this.bottomPanelRegion=new n.Region({el:"#bottom-panel-container"}),this.ui={timeline:$("#timeline-container"),tempo:$("#tempo-container")},this.activeViewName="timeline"},bindListeners:function(){var e=this;this.listenTo(Backbone,"tempo:show-req",(function(){this.switchTotchTo("timeline"),Backbone.trigger("bottom-panel:switch","timeline")}),1e4)}))},switchTo:function(e){this.ui[this.activeViewName].hide(),this.ui[e].show(),this.activeViewName=e}})})),define("prematch/playerkitModel",["require","backbone"],(function(e){var t=e("backbone");return t.Model.extend({initialize:function(e){this.side=e,this.set("dataReceived",!1),this.bindListeners()},bindListeners:function(){t.on("data:team-colors",this.handleData,this)},handleData:function(e){var t=this;function i(e){t.set({color1:e.Color1})}"home"===this.side?i(e.home):"away"===this.side&&i(e.away),this.set("dataReceived",!0)}})})),define("app/connectionInitializer",["require","./appContext","shared/utils"],(function(e){var t=e("./appContext"),i=e("shared/utils");function n(){this.initialized=!1}return n.prototype.initialize=function(e){(e=e||{}).videoDisabled&&(this.videoDisabled=!0),e.visualisationDisabled&&(this.visualisationDisabled=!0),this.initialized||(window.validationToken&&"VALIDATIONTOKEN"!==window.validationToken&&(this.token=window.validationToken,window.validationTokenCSB=window.validationToken),window.socketServerURL&&"SOCKETSERVERURL"!==window.socketServerURL&&(this.socketServerURL=window.socketServerURL),window.matchId&&"RB_ID"!==window.matchId&&(this.matchId=window.matchId),window.optaMatchId&&"OPTA_MATCH_ID"!==window.optaMatchId&&(this.optaMatchId=window.optaMatchId),window.wbpartnerid&&"WBPARTNERID"!==window.wbpartnerid&&(this.wbpartnerid=window.wbpartnerid),window.wbuserid&&"WBUSERID"!==window.wbuserid&&(this.wbuserid=window.wbuserid),window.wbeventid&&"WBEVENTID"!==window.wbeventid&&(this.wbeventid=window.wbeventid),window.wbtoken&&"WBTOKEN"!==window.wbtoken&&(this.wbtoken=window.wbtoken),window.wbtokenurl&&(this.wbtokenurl=window.wbtokenurl),window.wberr&&(this.wberr=window.wberr),window.country&&"COUNTRY_NAME"!==window.country&&"null"!==window.country&&(this.country=window.country),this.initialized=!0)},n.prototype.initilizeSocketHandler=function(e){this.isSocketHandlerAllowed()&&(e.initialize({socketServer:this.socketServerURL,token:this.token}),e.subscribe({rbid:this.matchId,optaid:this.optaMatchId}))},n.prototype.initilizeVisualisation=function(e){e&&(this.options=e),e=e||this.options||{};this.isVisualisationAllowed()&&!t.bodyDisabled&&(e.visualisation.set("matchId",this.matchId),e.visualisation.set("optaMatchId",this.optaMatchId),e.visualisation.set("token",this.token),void 0!==e.cssPath&&e.visualisation.set("cssPath",e.cssPath),void 0!==e.cssDiff&&e.visualisation.set("cssDiff",e.cssDiff),void 0!==e.pitch&&e.visualisation.set("pitch",e.pitch),void 0!==e.lang&&e.visualisation.set("lang",e.lang),void 0!==e.chevrons&&e.visualisation.set("chevrons","false"!==e.chevrons),void 0!==e.locdiff&&e.visualisation.set("locdiff",e.locdiff),e.visualisation.setSrc(),e.vion(){return parseInt(this.matchId,10)||parseInt(this.optaMatchId,10)},n.prototype.isVisualisationAllowed=function(){var e=this.token&&this.socketServerURL&&this.isMatchParameterPresent(),t=!this.visualisationDisabled&&e;return i.isTestMatch()||!i.isVideoOnly()&&t},n.prototype.isSocketHandlerAllowed=function(){return this.token&&this.socketServerURL&&this.isMatchParameterPresent()},n.prototype.isVideoAllowed=function(){return"true"!==window.isVis&&i.isMatchWithVideo()&&(t.videoonly||void 0===this.wberr)&&!this.videoDisabled},new n})),define("controlPanel/control/streamOnlyHeader",["require","backbone","marionette","jquery"],(function(e){var t=e("backbone"),i=e("marionette"),n=e("jquery");return i.ItemView.extend({template:"#stream-only-header",el:"#stream-only-panel",currentView:"visualisation",switchingAllowed:!1,initialize:function(e){this.controlPanelActive="stats"===e.defaultView,this.switchingAllowed=e.switching,this.visSwitch=e.visSwitch,this.statsSwitch=e.statsSwitch,this.statsSwitchHiding=e.statsSwitchHiding,this.defaultView=e.defaultView},ui:{videoBtn:".so-video-switcher",controlPannelBtn:".so-control-panel-switcher"},onRender:function(){"true"!==window.isVis&&this.visSwitch?this.ui.videoBtn.toggleClass("so-visible",!0):this.ui.videoBtn.toggleClass("so-visible",!1),"true"!==window.isVis&&this.statsSwitch?this.ui.controlPannelBtn.toggleClass("so-visible",!0):this.ui.controlPannelBtn.toggleClass("so-visible",!1),this.statsSwitchHiding||this.ui.controlPannelBtn.addClass("without-animation"),this.ui.videoBtn.on("click",n.proxy(this.videoVisualisationSwitcher,this)),this.ui.controlPannelBtn.on("click",n.proxy(_.throttle(this.controlPanelToggle,500),this)),this.initSwitcher()},initSwitcher:function(){"vis"===this.defaultView?(this.currentView="visualisation",this.ui.videoBtn.toggleClass("visualisation",!1),this.ui.videoBtn.toggleClass("video",!0)):(this.currentView="video",this.ui.videoBtn.toggleClass("visualisation",!0),this.ui.videoBtn.toggleClass("video",!1))},videoVisualisationSwitcher:function(){this.switchingAllowed&&("visualisation"===this.currentView?(this.currentView="video",this.ui.videoBtn.toggleClass("visualisation",!0)):(this.currentView="visualisation",this.ui.videoBtn.toggleClass("video",!0)),this.ui.videoBtn.toggleClass(this.currentView,!1),t.trigger("soh:switch-video-vis",this.currentView))},controlPanelToggle:function(){this.controlPanelActive=!this.controlPanelActive,this.ui.controlPannelBtn.toggleClass("active",this.controlPanelActive),t.trigger("soh:toggle-control-panel",{toBeSet:this.controlPanelActive});var e=this.controlPanelActive?"-50px":"-40px";this.ui.videoBtn.animate({top:e},500)},setSwitching:function(e){this.switchingAllowed=!0===e,this.ui.videoBtn.toggleClass("active",this.switchingAllowed&&!this.controlPanelActive)}})})),define("opta/widgets/optaFactsV",["require","backbone","units/loaderElementsNames","opta/paramsValidator","opta/opta"],(function(e){var t=e("backbone"),i=e("units/loaderElementsNames").optaWidgetFacts,n=e("opta/paramsValidator"),s=n.optaFactsValidator.bind(n),o=e("opta/opta"),r=$("#prematch-opta-facts-csb");return t.View.extend({initialize:function(){var e=this;try{s()}catch(e){this.widgetError(e)}o.ready().then((function(t){var i=o.addWidget(e.model.attributes,e.widgetError,e.widgetSuccess);r.append(i),t()})).catch((function(t){e.widgetError(t)}))},widgetError:function(e){window.console.warn("Opta facts not initialized:",e.message),t.trigger("csb:opta-facts-widget-error"),r.css("display","none"),window.loader.changeElementsState(i)},widgetSuccess:function(){$("#csb-root-container").addClass("opta-facts"),window.loader.changeElementsState(i)},render:function(){",optaWidgetFacts:"vis-opta-widget-facts",bootstrap:"vis-bootstrap"}})),define("opta/widgets/LiveAction",["require","jquery","shared/utils","opta/paramsValidator","vis/units/loaderElementsNames","opta/opta"],(function(e){var t=e("jquery"),i=e("shared/utils"),n=i.splitGetParameters(),s=e("opta/paramsValidator"),o=s.liveActionValidator.bind(s),r=e("vis/units/loaderElementsNames").optaWidgetLiveAction,a=e("opta/opta");function l(){this.DOMelements={widgetContainer:t("#opta-vis-container"),regularVis:t("#animation-background"),rootContainer:"true"===window.isVis?t("#root-container"):t("#csb-root-container")};var e=this.getDataType(),i=this.getDimension(e,n);this.commonAttr={widget:"live_action",template:"normal"},this.soccerAttr={live:"true",plot_events:"3",team_colours:"true",show_live:"true",show_logo:"true",show_crests:!1,zoom:"false",show_direction_of_play:"true",show_title:"false",show_dfp:"false",show_weather:"true",weather_animation:"5",player_naming:"match_name",breakpoints:"300, 700",dimension:i,data_type:e,flattened_background:void 0===n.imageconfig},this.basketballAttr={breakpoints:"400, 700",show_logo:!0,show_title:!1}}return l.prototype.init=function(e){try{if(o(),"object"!=typeof e)throw new Error("Live Action Vis: You need to pass options object");this.widgetTriggers();var i=t.extend(this.commonAttr,"basketball"===e.sport?this.basketballAttr:this.soccerAttr),n=t.extend({},i,e),s=a.addWidget(n,this.widgetError.bind(this),this.widgetSuccess.bind(this));this.DOMelements.widgetContainer.append(s),t("#content-visualization").css("display","block"),this.widgetSubscriptions()}catch(e){this.widgetError(e)}},l.prototype.widgetError=function(e){window.console.warn("Opta LiveAction widget not initialized:",e.message),t("#csb-container").removeClass("premium-vis-score"),window.widgetVisError||window.loader.changeElementsState(r),window.widgetVisError=!0,this.showRegularVis(),Backbone.trigger("csb:update-header-scores"),Backbone.trigger("csb:hive-close-connection")},l.prototype.widgetSuccess=function(){this.showWidget(),t("#prematch-background").css("background","none"),window.premVisLoaded||window.loader.changeElemubscribe("app:show-regular-vis",(function(){self.showRegularVis()}))},l.prototype.widgetTriggers=function(){Backboneype.getDataType=function(){return i.isPremVis()?"opta":"runningball"},l.prototype.getDimension=function(e,t){return"opta"===e?i.isTrueStr(t.vis2d)?"2D":"3D":i.isTrueStr(t.vis3d)?"3D":"2D"},l.prototype.showWidget=function(){this.DOMelements.rootContainer.addClass("live-action"),this.DOMelements.regularVis.css("display","none"),this.DOMelements.widgetContainer.css("visibility","visible")},l.prototype.showRegularVis=function(){this.DOMelements.regularVis.css("display","block"),this.DOMelements.rootContainer.removeClass("live-action"),this.DOMelements.widgetContainer.remove()},l})),define("app/widgets",["require","opta/opta","opta/widgets/optaFactsModel","opta/widgets/optaFactsV","units/loaderElementsNames","opta/widgets/LiveAction","vis/units/loaderElementsNames","shared/utils"],(function(e){var t=e("opta/opta"),i=e("opta/widgets/optaFactsModel"),n=e("opta/widgets/optaFactsV"),s=e("units/loaderElementsNames"),o=e("opta/widgets/LiveAction"),r=e("vis/units/loaderElementsNames"),a=e("shared/utils"),l=!1,c=function(){};return c.prototype.hidePrematchFacts=function(){l=!0,$("#prematch-opta-facts-csb").css("display","none")},c.prototype.prematchOptaFactsInit=function(){l?window.loader.changeElementsState(s.optaWidgetFacts):(this.optaFactsM=new i,this.optaFacts=new n({model:this.optaFactsM}),this.optaFacts.render())},c.prototype.initPrematchOptaFacts=function(){var e=tdgetFacts),t.ready().then((function(t){e.prematchOptaFactsInit(),t()})).catch((function(e){console.warn("Prematch Opta Facts not initialized:",e),window.loader.changeElementsState(s.optaWidgetFacts)}))},c.prototype.initLiveAction=function(){window.loader.registerElements(r.optaWidgetLiveAction),t.ready().then((function(e){(new o).init({sport:a.getOptaSportName(),competition:window.leagueUuid,season:window.tmclUuid,match:window.uuid}),e()})).catch((function(e){console.warn("Live action widget not initialized:",e),window.loader.changeElementsState([s.optaWidgetLiveAction])}))},new c})),define("prematch/prematchV",["require","shared/controlsV","prematch/playerkitView","controlPanel/form/formPreviewV","controlPanel/form/formM"],(function(e){var t=e("shared/controlsV"),i=e("prematch/playerkitView"),n=e("controlPanel/form/formPreviewV"),s=e("controlPanel/form/formM");return t.extend({attributes:{id:"prematch-background"},template:"#prematch-template",el:"#content-prematch",placeholders:{home:"#prematch-home-kit",away:"#prematch-away-kit",footer:"#prematch-footer"},initialize:function(e){this.csbContainer=$("#csb-container"),this.disableNavigation=!1,this.views={},this.views.home=new i({model:e.playerkitHomeModel}),this.views.away=new i({model:e.playerkitAwayModel}),this.views.footer=new n({model:s})},onRender:function(){var e=this.model.get("hasPlayerKitData");this.$("#prematch-background").toggleClass(this.model.get("sport"e:function(){this.csbContainer.removeClass("prematch"),this.remove()},modelEvents:{change:"render"}})})),define("prematch/prematchWBOnlyV",["require","marionette","jquery"],(function(e){var t=e("marionette"),i=e("jquery");return t.ItemView.extend({te-wbonly",el:"#content-prematch",initialize:function(){this.views={}},modelEvents:{change:"render"},onRender:function(){window.customBg&&i("#prematch-background-custom-header, #prematch-background-custom-footer").css({background:"#"+window.customBg})}})})),define("prematch/prematchM",["require","backbone","shared/utils","$enums","shared/logger","localisation/manager","app/matchContext"],(function(e){var t=e("backbone"),i=e("shared/utils"),n=e("$enums"),s=e("shared/logger"),o=e("localisation/manager"),r=e("app/matchContext"),a=n.PreMatchDisplayModes;return t.Model.extend({defaults:{sport:"",homeTeam:"",awayTeam:"",homeTeamAbbr:"",awayTeamAbbr:"",league:"",stadium:"",country:"",days:0,hours:0,minutes:0,kickOffDays:0,kickOffHours:0,kickOffMinutes:0,kickOffYear:"",kickOffMonth:"",kickOffDate:"",headerMessage:"",updated:0,isOptaWidget:!1},teamNamesForced:!1,initialize:function(){if(this.initalized=!1,!isNaN(parseInt(window.optaMatchId,10))&&!isNaN(parseInt(window.optaCompetitionId,10))){var e="true"===window.prematchFacts;e&&this.set("isOptaWidget",e)}this.monthNames=o.getMonthNames(),this.set("displayMode","kick-off"),this.set("sport",i.friendlySportName(window.sport,window.sportId)),this.set("sportClassName",window.sport.toLowerCase()),this.set("countdownDescription",o.get("PREMATCH->STARTS_AT")),o(t,"data:match-context",(function(){this.storeMatchContextValues(r)}),this),t.on("app:delayed",this.handleGameDelayed,this),t.on("app:game-not-started",this.handleGameStartingSoon,this),t.on("prematch:message",this.updateHeaderMessage,this),t.on("data:team-colors",(function(){this.set("hasPlayerKitData",!0)}),this)},handleGameDelayed:function(e){this.set("countdownDescription",o.get("PREMATCH->STARTS_AT")),this.set("displayMode","kick-off"),this.set("headerMessage",e)},handleGameStartingSoon:function(e){e.startingSoon&&("undefined"!=typeof kickOff&&(this.kickOff=e.kickOff,this.set("kickOffDays",i.prependZero(this.kickOff.getDate()),{silent:!0}),this.set("kickOffHours",i.prependZero(this.kickOff.getHours()),{silent:!0}),this.set("kickOffMinutes",i.prependZero(this.kickOff.getMinutes()),{silent:!0}),this.set("kickOffYear",this.kickOff.getFullYear(),{silent:!0}),this.set("kickOffMonth",this.monthNames[this.kickOff.getMonth()],{silent:!0}),this.set("kickOffDate",this.kickOff.getDate(),{silent:!0})),this.set("days","00",{silent:!0}),this.set("hours","00",{silent:!0}),this.set("minutes","00",{silent:!0}),this.set("headerMessage",o.get("PREMATCH->ABOUT_TO_START"))),this.set("updated",this.get("updated")+1)},initializeDefaultData:function(e){e.displayMode===a.KickOff?this.set("displayMode","kick-off",{silent:!0}):(this.set("displayMode","countdown",{silent:!0}),this.set("countdownDescription",o.get("PREMATCH->COUNTDOWN"),{silent:!0})),this.initalized||this.setKickOff(e.kickOff),e.startingSoon?this.handleGameStartingSoon(e.kickOff):this.setKickOff(e.kickOff),this.initialized=!0},updateHeaderMessage:function(e){var t=o.getEventCodeById(e);t?this.set("headerMessage",t):s.always("Translation not found for event: "+e)},setKickOff:function(e){var n=this,s=new Date;this.kickOff=e,this.calculateTimeToStart({silent:!0}),this.set("kickOffDays",i.prependZero(this.kickOff.getDate()),{silent:!0}),this.set("kickOffHours",i.prependZero(this.kickOff.getHours()),{silent:!0}),this.set("kickOffMinutes",i.prependZero(this.kickOff.getMinutes()),{silent:!0}),this.set("kickOffYear",this.kickOff.getFullYear(),{silent:!0}),this.set("kickOffMonth",this.monthNames[this.kickOff.getMonth()],{silent:!0}),this.set("kickOffDate",this.kickOff.getDate(),{silent:!0}),this.set("updated",this.get("updated")+1),this.get("kickOffDate")!==s.getDate()&&t.trigger("prematch:not-today"),clearInterval(this.countdownHandle),this.countdownHandle=setInterval((function(){n.calculateTimeToStart()}),1e3)},calculateTimeToStart:function(e){var t,n,s,r=new Date,a=this.kickOff.getTime()-r.getTime(),l=e&&!0===e.silent;a<0&&(a=0),a-=864e5*(s=Math.floor(a/864e5)),a-=36e5*(n=Math.floor(a/36e5)),t=Math.floor(a/6e4),this.set("days",i.prependZero(s),{silent:l}),this.set("hours",i.prependZero(n),{silent:l}),this.set("minutes",i.prependZero(t),{silent:l}),s+n+t===0&&this.set("headerMessage",o.get("PREMATCH->ABOUT_TO_START"))},safeAssign:function(e,t,i){"string"!=typeof t||"undefined"===t.toLowerCase()||"null"===t.toLowerCase()||t===i?this.set(e,"",{silent:!0}):this.set(e,t,{silent:!0})},storeMatchContextValues:function(e){this.safeAssign("awayTeam",e.awayTeam,"AWAY_TEAM"),this.safeAssign("homeTeam",e.homeTeam,"HOME_TEAM"),this.safeAssign("awayTeamAbbr",e.awayTeamAbbr,"AWAY_TEAM_ABBR"),this.safeAssign("homeTeamAbbr",e.homeTeamAbbr,"HOME_TEAM_ABBR"),this.safeAssign("sport",i.friendlySportName(e.sport,window.sportId),"SPORT_NAME"),this.safeAssign("stadium",e.stadium,"STADIUM_NAME"),this.safeAssign("league",e.league,"LEAGUE_NAME"),this.safeAssign("country",e.country,"COUNTRY_NAME")}})})),define("prematch/tennisPrematchV",["require","marionette"],(function(e){return e("marionette").ItemView.extend({attributes:{id:"prematch-background"},template:"#prematch-tennis-template",el:"#content-prematch",ui:{container:"#prematch-view",list:"#prematch-extended-schedule-container",header:"#prematch-header"},onRender:function(){var e=this;setTimeout((function(){e.showScrollbar()}),100),window.customBg&&$("#prematch-background-custom-header, #prematch-background-custom-footer").css({background:"#"+window.customBg})},showScrollbar:function(){window.mini&&this.ui.list.height(this.ui.container.height()-this.ui.header.height()-20)}})})),define("prematch/tennisPrematchM",["require","underscore","./prematchM"],(function(e){var t=e("underscore"),i=e("./prematchM"),n=function(){this.countryFinder=/\((\w+)\)/g},s=/(\/|\s+or\s+)/i,o=/\s+(&|and)\s+/i,r=/\s+(v|vs)\s+/gi;function a(e,i){var n=e.split(i);return t.filter(n,ototype={cleanStr:function(e){return e.replace(/\[.+?\]/g,"").trim()},findCountries:function(e){this.countryFinder.lastIndex=0;var t=this.,deleteCountries:function(e){return e.replace(this.countryFinder,"")},parseSingleSide:function(e){var t,i=this.cleanStr(e),n=this.findCountries(i),s=(t=n?{name:this.deleteCountries(i).trim(),country:n}:{name:i,country:""}).name.split(" "),o="",r="",a=!1;for(var l in s)if(s.hasOwnProperty(l)){for(var c=s[l].length,u=0,h=0;h<c;h++){var d=s[l].charAt(h);d===d.toUpperCase()&&(u+=1)}!a&&c>0&&u/c>.5&&(a=!0),a?r+=" "+s[l]:o+=" "+s[l]}return t.firstName=o.trim(),t.lastName=r.trim(),t},parseAndCase:function(e,t){var i=o,n=a(e,i),s=a(t,i);if(n.length===s.length){for(var r={home:[],away:[],type:"and"},l=n.length,c=0;c<l;c++)r.home.push(this.parseSingleSide(n[c])),r.away.push(this.parseSingleSide(s[c]));return r}},parseOrCase:function(e,t){var i=s,n=a(e,i),o=a(t,i);if(n&&0!==n.length&&o&&0!==o.length){for(var r=Math.max(n.length,o.length),l={home:[],away:[],type:"or"},c=0;c<r;c++)n[c]?l.home.push(this.parseSingleSide(n[c])):l.home.push({empty:!0}),o[c]?l.away.push(this.parseSingleSide(o[c])):l.away.push({empty:!0});return l}},parseMultilineCase:function(e,t,i){var n;switch(i){case"and":n=o;break;case"or":n=s;break;default:n=o}var r=a(e,n),l=a(t,n);if(r.length===l.length){for(var c={home:[],away:[],type:i},u=r.length,h=0;h<u;h++)c.home.push(this.parseSingleSide(r[h])),c.away.push(this.parseSingleSide(l[h]));return c}},parse:function(e){if(!("string"==typeof e&&e.indexOf("|")>-1))return[];for(var t,i=e.split("|"),n=[],l=0;l<i.length;l++){var c=i[l];if("string"==typeof c&&""!==c){var u=a(c,r);if(!u)continue;if(2===u.length){var h=u[0],d=u[1];s.test(h)||s.test(d)?(t=this.parseOrCase(h,d))&&n.push(t):o.test(h)&&o.test(d)?(t=this.parseAndCase(h,d))&&n.push(t):(t={type:"single",home:this.parseSingleSide(h),away:this.parseSingleSide(d)},n.push(t))}}}return n}},i.extend({splitExtendedSchedule:function(e){return this.parser.parse(e)},initialize:function(e){i.prototype.initialize.call(this,e),this.parser=new n,t.isUndefined(window.extendedSchedule)||(this.set("extendedSchedule",this.splitExtendedSchedule(window.extendedSchedule)),this.set("extended",!0))}})})),define("$videoM",["require","backbone","shared/utils"],(function(e){var t=e("backbone"),i=e("shared/utils");return t.Model.extend({defaults:{prematch:!1,shouldUnmuteOnStart:!1},initialize:function(e){(e=e||{}).window=e.window||{},e.params=e.params||{};let t={},n="ui",s={};e.params.highlightid&&(t.id=e.params.highlightid),e.params.highlightlist&&(t.list=Boolean(e.params.highlightlist)),e.params.highlighttooltip&&(t.tooltip=Boolean(e.params.highlighttooltip)),e.params.highlighttooltipdelay&&(t.tooltipDelay=Number(e.params.highlighttooltipdelay)),e.params.controls&&["true","false"].includes(e.params.controls)&&(n=Boolean("true"===e.params.controls)),e.params.debugshowclientid&&["true","false"].includes(e.params.debugshowclientid)&&(s.showClientId=Boolean("true"===e.params.debugshowclientid)),e.params.debugconsole&&["0","1","2","3"].includes(e.params.debugconsole)&&(s.console=Number(e.params.debugconsole)),e.params.debugverboselogenabled&&["true","false"].includes(e.params.debugverboselogenabled)&&(s.verboseLogsEnabled=Boolean("true"===e.params.debugverboselogenabled)),this.opts=e,e&&e.prematch&&this.set("prematch",!0),this.config={uiLang:e.params.lang?e.params.lang:void 0,controls:n,debug:s,customControlsDisplayTime:e.params.customcontrolsdisplaytime?Number(e.params.customcontrolsdisplaytime):void 0,hostname:window.location.hostname,fixture:window.uuid,highlight:t,signature:{name:"csb",build:window.csbVersion}},this.isNewWB=i.isNewWBMatch(e.params),this.isOldWB=i.isOldWBMatch(e.window),$.extend(this.config,this.getMutedAndAutoplayProperty(e)),$.extend(this.config,this.getStreamConfig(e)),e.prematch&&!this.config.muted&&("true"===e.params.wabdebug&&console.log("[wab] Setting muted sets to true because stream is initialized in prematch and the voice is hearable before the video is shown"),this.config.muted=!0,this.set("shouldUnmuteOnStart",!0)),this.bindListeners()},getWBKeyProperty:function(e){return this.isNewWB?e.params.oauthtoken:e.window.wbtoken?decodeURIComponent(e.window.wbtoken):void 0},getStreamConfig:function(e){var t="",n="",s="",o=this.getWBKeyProperty(e),r="",a="";if(e.params.audiolang&&(a=e.params.audiolang),this.isNewWB||(r=i.getHostFromTopReferer(e.window.topReferer)),this.isNewWB)t=e.window.outletKey,n=e.params.streamuuid,s=e.params.streamuser||"csb";else{if(!this.isOldWB)return{};t=e.window.wbpartnerid,n=e.window.wbeventid,s=e.window.wbuserid}var l={outlet:t,stream:n,user:s,key:o,audioLang:a};return this.isNewWB||(l.host=r),l},getMutedAndAutoplayProperty:function(e){var t=!1,n=!0;return i.isFalseStr(e.params.autoplay)&&(n=!1),n&&e.window.mobile&&(t=!0),i.isTrueStr(e.params.audio)&&(t=!1),i.isFalseStr(e.params.audio)&&(t=!0),{muted:t,autoplay:n,autoplayHybrid:!0}},bindListeners:function(){var e=this;this.get("midroll")&&this.listenTo(t,"app:game-started",(function(){e.set("prematch",!1)}))}})})),define("$videoV",["require","backbone","jquery","shared/utils","units/loaderElementsNames","$enums"],(function(e){var t,i=e("backbone"),n=e("jquery"),s=e("shared/utils").splitGetParameters(),o=e("units/loaderElementsNames"),r=e("$enums").VideoError,a=s.wabver;function l(){"true"===s.wabdebug&&console.log.apply(null,arguments)}return t=a?"//player.performgroup.com/wab.kit/releases/"+a+"/wab.kit":"//player.performgroup.com/wab.kit.2",i.View.extend({el:"#video-container",ui:{container:n("#video-container"),content:"video"},render:function(){var i=this;this.config=n.extend({visualization:{}},this.model.config,{container:this.ui.content}),void 0!==this.model.attributes.params.overlaysevents&&void 0!==window.uuid&&(this.config.visualization={fixtureId:window.uuid,events:this.model.attributes.params.overlaysevents.split(",")},void 0!==this.model.attributes.params.overlaysposition&&(this.config.visualization.position=this.model.attributes.params.overlaysposition)),["soccerInsights","tennisBigPoint","tennisBigPointConversionRate","tennisMomentum","tennisInsights"].forEach(e=>{this.config.visualization[e]="true"===this.model.attributes.params[e.toLowerCase()]}),this.config.key?(window.require.config({paths:{wab:t},shim:{wab:{exports:"WAB"}}}),e(["wab"],(function(){i.afterLoadVideo()}))):window.loader.changeElementsState(o.videoInitializer)},afterLoadVideo:function(){l("--- WAB CONFIG: ---",this.config),this.wab=new window.WAB(this.config),window.wabConfig=this.config,window.wab=this.wab,this.model.get("shouldUnmuteOnStart")&&(l("[wab] Setting a listener for app:game-started as wab.kit should be unmuted after start of the game."),this.listenTo(i,"app:game-started",function(){this.wab&&this.wab.player&&(l("[wab] Setting muted is set to false because prematch has ended and video is shown"),this.wab.player.muted=!1)}.bind(this))),window.loader.changeElementsState(o.videoInitializer),this.fixFlashBlocking(),this.config.key&&!this.model.get("prematch")&&this.ui.container.show(),this.bindListeners()},displayVideoError:function(e){if(e&&!0===e.fatal){~[207,212].indexOf(e.code)&&this.model.isOldWB&&i.trigger("video-player-reload");var t=r[e.code]||e.code+" - "+r.default,s=n("#video div.videoError");s.length?s[0].innerHTML.indexOf(t)<0&&s.append("<br /> "+t):n("#video").append("<div class='videoError'>"+t+"</div>"),window.analytics.trackEvent({eventCategory:"SPIELER_ERROR",eventAction:t+" "+window.matchId,eventLabel:window.customerId}),window.wab.player=null}},bindListeners:function(){var e=this;this.wab.on("error",e.displayVideoError.bind(this)),this.wab.player&&(this.wab.player.on("canplay",(function(){window.loader.changeElementsState(o.videoInitializer),e.fixFlashBlocking(),i.trigger("video-player-ready")})),this.wab.player.on("error",(function(t){"401"===t.code&&document.referrer&&navigator.userAgent.match(/(iPad|iPhone|iPod|Android)/g)?(n("#video-container .popup").hide(),window.parent.postMessage({message:"reload"},document.referrer)):e.displayVideoError(t),window.loader.changeElementsState(o.videoInitializer)})),this.wab.player.on("destroy",(function(){e.remove()})))},makeVideive",!0)},restoreSize:function(){i.trigger("video:change-active",!1)},fixFlashBlocking:function(){if(this.ui.container.width()<600||this.ui.container.hlass("fix"),setTimeout((function(){e.ui.container.removeClass("fix")}),100)}},mute:function(){this.hasOwnProperty("wab")&&this.wab.player&&(this.remehis.rememberedVolume&&(this.wab.player.volume=this.rememberedVolume)}})})),define("app/errorV",["require","marionette","backbone","jquery"],(function(e){var t=e("marionette"),i=e("backbone"),n=e("jquery");return new(t.ItemView.extend({template:"#application-error-template",el:"#content-error",modelEvents:{change:"render"},appContainters:{"csb-container":"#csb-container","stream-only-panel":"#stream-only-panel","stats-opta-facts-container":"#stats-opta-facts-container","inplay-facts-container":"#inplay-facts-container","timeline-switch-tooltip":"#timeline-switch-tooltip"},ui:{errorBg:"#error-bg",errorContent:"#error-content"},addMsgToStack:function(){},onBeforeRender:function(){this.$el.addClass("hidden")},removeContainers:function(){for(var e in this.appContainters)this.appContainters.hasOwnProperty(e)&&n(this.appContainters[e]).remove();window.loader.hideLoader()},hideContainers:function(){for(var e in this.appContainters)this.appContainters.hasOwnProperty(e)&&n(this.appContainters[e]).addClass("hidden");window.loader.hideLoader()},bindListeners:function(){i.on("csb:app-error",(function(e){this.update(e),this.hideContainers(),this.$el.removeClass("hidden"),this.$el.show()}),ththis.render()},update:function(e){e&&this.model.set("description",e)}}))({model:new(i.Model.extend({defaults:{description:""}}))})})),define("app/appV",["require","marionette","underscore","app/connectionInitializer","jquery","config/modules","app/appContext","backbone","controlPanel/control/streamOnlyHeader","shared/utils","app/widgets","prematch/prematchV","prematch/prematchWBOnlyV","prematch/prematchM","prematch/tennisPrematchV","prematch/tennisPrematchM","$videoM","$videoV","units/loaderElementsNames","app/errorV","localisation/manager"],(function(e){var t=e("marionette"),i=e("underscore"),n=e("app/connectionInitializer"),s=e("jquery"),o=e("config/modules"),r=e("app/appContext"),a=e("backbone"),l=e("controlPanel/control/streamOnlyHeader"),c=e("shared/utils"),u=e("app/widgets"),h=e("prematch/prematchV"),d=e("prematch/prematchWBOnlyV"),p=e("prematch/prematchM"),m=e("prematch/tennisPrematchV"),f=e("prematch/tennisPrematchM"),g=e("$videoM"),v=e("$videoV"),y=e("units/loaderElementsNames");e("app/errorV");var w=e("localisation/manager"),b=c.splitGetParameters();return window.loader.registerElements(y.csbAppV),t.ItemView.extend({el:s("#csb-body"),initialize:function(e){this.homePlayerKit=e.homePlayerKit,this.awayPlayerKit=e.awayPlayerKit,this.isSwitchingEnabled=!1,this.initialMessageReceived=!1,this.defaultView=r.defaultView,this.videoSwitcher=s("#video-visualisation-switch"),this.videoSwitcher.on("click",s.proxy(this.videoVisualisationSwitcher,this)),this.visualisationContainer=s("#content-visualization"),this.videoContainer=s("#video-container"),this.prematchContainer=s("#content-prematch"),this.prematchOptaContainer=s("#content-opta-prematch"),this.contentContainer=s("#content"),this.timeline=s("#timeline-container"),this.csbContainer=s("#csb-container"),this.bindListeners(),this.onShow();"stats"===this.defaultView&&a.trigger("soh:toggle-control-panel",{toBeSet:!0,withoutAnimation:!0})},isCsbLoaded:!1,onShow:function(){if(r.isTestMatch)return this.visualisationContainer.show(),this.currentContainer=this.visualisationContainer,void(this.streamOnlyHeaderView&&this.streamOnlyHeaderView.render());this.currentContainer=this.prematchContainer,this.streamOnlyHeaderView&&this.streamOnlyHeaderView.render(),r.bodyDisabled&&this.handleVisLoaded()},initializePrematch:function(){if(r.bodyDisabled)return!1;if(!this.prematchInitialized){var e,t;this.prematchInitialized=!0;var i=window.sport.toLowerCase();"tennis"===i||window.extendedSchedule?(e=new f,t=new m({model:e})):(e=new p,t=r.wbOnly?new d({model:e}):["soccer","basketball","icehockey","volleyball"].indexOf(i)>-1?new h({model:e,playerkitHomeModel:this.homePlayerKit,playerkitAwayModel:this.awayPlayerKit}):new d({model:e})),this.prematchModel=e,this.prematchV=t}return!0},initializeVideo:function(e){if(!this.videoInitialized){window.loader.registerElements(y.videoInitializer);var t=new g(s.extend({},e,{window:window,params:b})),i=new v({model:t});this.videoV=i,this.videoM=t,this.videoV.render(),this.videoInitialized=!0}},reInitializeVideo:function(){var e=this;e.videoShouldBeReloaded=!0,e.gameStarted&&(e.videoReloadTimeout||(e.videoReloadTimeout=setTimeout((function(){e.videoReloadTimeout=null,e.videoShouldBeReloaded=!1,e.videoV.el.querySelector("#video").innerHTML="",e.videoV.render()}),3e4)))},bindListeners:function(){this.listenTo(a,"data:send-GA-stats",analytics.trackEvent),this.listenTo(a,"app:game-started",this.handleGameStartedEvent),this.listenTo(a,"app:game-started",this.handleVideoStartedEvent),this.listenTo(a,"app:game-started",(function(){u.hidePrematchFacts(),this.videoShouldBeReloaded&&this.reInitializeVideo()})),this.listenTo(a,"app:start-video",this.handleVideoStartedEvent),this.listenTo(a,"app:game-not-started",this.handleGameNotStartedEvent),this.listenTo(a,"app:videoonly",this.handleVisLoaded),this.listenTo(a,"app:statsonly",this.handleVisLoaded),this.listenToOnce(a,"data:no-rball",this.handleNoRunningBall),this.listenToOnce(a,"match:initial-message",this.handleInitialMessage),this.listenTo(a,"cp:change-active",this.handleControlPanelSwitching),this.listenTo(a,"app:error",this.handleError),this.listenTo(a,"soh:switch-video-vis",(function(){this.videoVisualisationSwitcher()})),this.listenTo(a,"app:ready",this.checkNoRbError),this.listenToOnce(a,"app:stream-only",this.handleStreamOnly),this.listenToOnce(a,"visualisation:loaded",this.handleVisLoaded),this.listenToOnce(a,"video-player-ready",this.muteVideoOnStart),this.listenTo(a,"video-player-reload",this.reInitializeVideo),this.listenTo(a,"hide-prematch-view",(function(){this.prematchV&&this.prematchV.close(),this.currentContainer=null,this.checkNoRbError()})),this.listenTo(a,"app:premium-vis-started",(function(e){"live"===e&&(this.handleGameStartedEvent(),this.handleVideoStartedEvent())})),this.listenTo(a,"app:data-source-hive",this.changeDataSource),a.on("csb:opta-widget-drawn",(function(e){if("optafacts"===e.widget.attr.widget){var t,i,n,o=s("#content > #content-opta-prematch > #prematch-opta-facts-csb");s("#content > #content-opta-prematch > #prematch-opta-facts-csb > .prematch-opta-logo").show(),window.mini&&(t=s("#prematch-header").height(),i=s("#prematch-footer").height(),n=s("#prematch-background").height(),o.height(n-t-i))}}),this)},handleInitialMessage:function(){this.initialMessageReceived=!0},handleStreamOnly:function(){var e=this;this.visLoaded?this.makeStreamOnly():this.listenToOnce(a,"app:vis-loaded",(function(){e.makeStreamOnly()}))},handleVisLoaded:function(){var e=this;this.csbContainer.preloadImages((function(){e.csbLoaded(),e.visLoaded=!0,a.trigger("app:vis-loaded")}))},makeStreamOnly:function(){r.wbOnly||!0!==r.visSwitch&&!0!==r.statsSwitch||(this.streamOnlyHeaderView=new l({switching:this.isSwitchingEnabled,visSwitch:r.visSwitch,statsSwitch:r.statsSwitch,statsSwitchHiding:r.statsSwitchHiding,defaultView:this.defaultView}),this.streamOnlyHeaderView.render())},csbLoadedOptaInitializationStarted:!1,csbLoaded:function(){this.isCsbLoaded||(this.csbLoadedOptaInitializationStarted||(c.shouldLoadPrematchOptaFacts()&&u.initPrematchOptaFacts(),this.csbLoadedOptaInitializationStarted=!0),this.initialMessageReceived&&!r.preroll||r.isTestMatch?(this.isCsbLoaded=!0,window.loader.changeElementsState(y.csbAppV),this.contentContainer.show(),a.trigger("app:ready")):setTimeout(i.bind(this.csbLoaded,this),100))},handleGameStarted:function(e){e.shouldReload&&window.wbtokenurl&&document.referrer&&window.parent.postMessage({message:"reload"},document.referrer)},handleError:function(e){if(n.isVideoAllowed()&&"geoblocked"!==window.wberr)this.handleGameCancelledWithVideo();else{var t="string"==typeof e?e:e.description;this.closeCurrent(),a.trigger("csb:app-error",t)}},handleGameCancelledWithVideo:function(){var e;this.gameStarted||(this.prematchModel||a.trigger("match:rball-cancel-with-video"),e=new d({model:this.prematchModel}),this.prematchV=e,this.prematchV.render()),a.trigger("data:no-rball"),this.currentContainer=this.videoContainer,this.showCurrent()},handleNoRunningBall:function(){this.noRunningBall=!0,this.csbLoaded(),this.csbContainer.addClass("no-rball"),this.togglePremVisData(!0)},checkNoRbError:function(){this.noRunningBall&&!c.isPremVis()?this.csbContainer.hasClass("prematch")||c.isMatchWithVideo()&&!c.isTrueStr(window.isVis)||this.showNoDataError():this.noRunningBall&&"stats"===this.defaultView&&r.streamOnly&&this.showNoDataError()},enableSwitching:function(){c.isMatchWithVideo()&&(this.videoSwitcher.css({display:"block"}),this.isSwitchingEnabled=!0,this.streamOnlyHeaderView&&this.streamOnlyHeaderView.setSwitching(!0))},disableSwitching:function(){this.videoSwitcher.css({display:"none"}),this.streamOnlyHeaderView&&this.streamOnlyHeaderView.setSwitching(!1)},handleControlPanelSwitching:function(e){this.isControlPanelOpened=e,void 0!==this.currentContainer&&this.currentContainer!==this.prematchContainer&&(e?n.isVisualisationAllowed()&&o.visualisation?(a.trigger("data:send-GA-stats",{eventCategory:"DATA-SWITCH",eventAction:"click"}),this.uncollapsedContainer=this.currentContainer,this.currentContainer!==this.visualisationContainer&&this.isSwitchingEnabled&&this.videoVisualisationSwitcher(),this.disableSwitching()):this.videoVisualisationSwitcher(!0):(this.timeline.show(),this.uncollapsedContainer!==this.currentContainer&&this.isSwitchingEnabled&&this.videoVisualisationSwitcher(),this.isSwitchingEnabled?this.enableSwitching():this.currentContainer===this.videoContainer&&this.videoVisualisationSwitcher(!1)))},handleVideoStartedEvent:function(){n.isVideoAllowed()||this.sendToBack(this.videoContainer),n.isVideoAllowed()&&o.video&&!this.videoStarted&&!r.bodyDisabled?(window.mini&&(this.prematchContainer.hide(),this.prematchOptaContainer.hide()),this.videoStarted=!0,r.bodyDisabled||this.videoInitialized||(this.initializeVideo(),this.videoInitialized=!0),"stats"!==this.defaultView?this.enableSwitching():this.isSwitchingEnabled=!0,this.sendToBack(this.videoContainer),this.videoContainer.show(),this.isControlPanelOpened?r.streamOnly&&!this.currentContainer?(this.currentContainer=this.videoContainer,this.videoSwitcher.find("div").first().attr("class","live-video-button")):(this.currentContainer=this.visualisationContainer,this.videoSwitcher.find("div").first().attr("class","live-update-button")):"vis"!==this.defaultView||c.isVideoOnly()?(this.currentContainer=this.videoContainer,this.togglePremVisData(!1),this.videoSwitcher.find("div").first().attr("class","live-video-button")):(this.currentContainer=this.visualisationContainer,this.togglePremVisData(!0),this.videoSwitcher.find("div").first().attr("class","live-update-button")),this.showCurrent()):this.currentContainer!==this.videoContainer&&this.togglePremVisData(!0)},handleGameStartedEvent:function(){if(!r.bodyDisabled){var e;if(this.gameStarted=!0,this.prematchV&&a.trigger("hide-prematch-view"),void 0!==window.wberr)return n.isVisualisationAllowed()&&o.visualisation?(this.currentContainer=this.visualisationContainer,this.visualisationContainer.show(),this.togglePremVisData(!0),void this.videoSwitcher.hide()):(e=w.get("COMMON->STR->"+window.wberr.toUpperCase()),void this.handleError(e));if(this.videoInitialized||(this.initializeVideo(),this.videoInitialized=!0),n.isVisualisationAllowed()&&o.visualisation)c.isMatchWithVideo()&&"vis"!==r.defaultView||(this.currentContainer===this.videoContainer&&this.hideCurrent(),c.isMatchWithVideo()||this.disableSwitching(),this.currentContainer=this.visualisationContainer,this.showCurrent(),this.togglePremVisData(!0));else if(c.isMatchWithVideo()){if(r.streamOnly&&"video"!==r.defaultView&&!r.visSwitch&&!r.statsSwitch)return;e=w.get("COMMON->STR->NOENCODER"),this.handleError(e)}}},closeCurrent:function(){this.currentContainer&&this.currentContainer.hide()},hideCurrent:function(){this.currentContainer&&(this.currentContainer===this.videoContainer?(this.videoV&&this.videoV.mute(),this.sendToBack(this.currentContainer)):this.currentContainer.hide())},muteVideoOnStart:function(){var e=this.csbContainer.hasClass("prematch");c.isVideoOnly()||"video"===this.defaultView&&!e||!this.videoV||this.videoV.mute()},showCurrent:function(){this.currentContainer&&(this.currentContainer===this.videoContainer?(this.togglePremVisData(!1),this.videoV&&this.videoV.unmute(),this.bringToFront(this.currentContainer)):("footer"===this.currentContainer.parent().attr("id")&&this.timeline.hide(),this.togglePremVisData(!0),this.currentContainer.show(400,(function(){window.mediator&&window.mediator.publish("cp:view-switched-to-vis")}))))},handleGameNotStartedEvent:function(e){var t=null;"true"!==window.isVis?t=this.initializePrematch():(this.hideCurrent(),this.visualisationContainer.show(),this.csbContainer.addClass("prematch")),t&&!this.videoStarted&&(this.hideCurrent(),this.csbContainer.addClass("prematch"),this.prematchV.model.initializeDefaultData(e),this.prematchV.render(),this.currentContainer=this.prematchContainer,this.currentContainer.show()),this.initializeVideo({prematch:!0})},videoVisualisationSwitcher:function(e){"boolean"!=typeof e?(this.hideCurrent(),this.currentContainer===this.videoContainer?(this.currentContainer=this.visualisationContainer,this.togglePremVisData(!0),this.videoSwitcher.find("div").first().attr("class","live-update-button")):(this.currentContainer=this.videoContainer,this.togglePremVisData(!1),this.videoSwitcher.find("div").first().attr("class","live-video-button")),this.showCurrent()):e?this.hideCurrent():this.showCurrent()},sendToBack:function(e){e.css({"z-index":"-1",visibility:"hidden"})},bringToFront:function(e){e.css({"z-index":"2",visibility:"visible"})},togglePremVisData:function(e){c.isPremVis()&&(a.trigger("csb:update-hurce:function(e){r.isHiveData=e,a.trigger("app:refresh-data-source")},showNoDataError:function(){a.trigger("csb:app-error","Sorry, data is not available for this fixture")}})})),define("app/appM",["require","backbone"],(function(e){return e("backbone").Model.extend({defaults:{activeView:""}})})),define("visualisation/collapsedTimerV",["require","marionette","shared/enums","backbone"],(function(e){var t=e("marionette"),i=e("shared/enums"),n=e("backbone");return t.ItemView.extend({el:"#collapsed-time-container",modelEvents:{change:"render"},ui:{timeoutContainer:"#timeout-container"},initialize:function(){this.prematchContainer=$("#content-prematch"),this.listenTo(n,"app:game-started",this.handleGameSt.isFullFormat()?"#collapsed-time-full":"#collapsed-time-minute-only"},onRender:function(){!0===this.model.get("showTimeoutInfo")?this.ui.timeoutContainer.show():this.ui.timeoutContainer.hide();var e=this.isFullFormat()?nction(){return this.model.get("type")===i.CollapsedTimerFormat.Full}})})),define("visualisation/collapsedTimerM",["require","backbone","shared/enums","underscore"],(function(e){var t=e("backbone"),i=e("shared/enums"),n=e("underscore");return t.Model.extend({defaults:{minutes:"00",seconds:"00",overtime:"",playtime:"",type:i.CollapsedTimerFormat.Full,showTimeoutInfo:!1},initialize:function(e){this.listenTo(t,"match:display-timeout-info",this.displayTimeoutInfo),this.listenTo(t,"scoreboard:game-time",this.onGametimeChanged_),this.listenTo(t,"scoreboard:playtime",this.onPlaytimeChanged_),this.set("type",e)},displayTimeoutInfo:function(e){this.set("showTimeoutInfo",e)},onGametimeChanged_:function(e){var t=e.time;this.set("seconds",t.seconds),t.overtime?(this.set("overtime",t.overMinutes+1),this.set("minutes",t.minutes)):(this.set("overtime",""),i.getBorderTickerStates().indexOf(t.tickerStateId)>-1?this.set("minutes",t.minutes):this.set("minutes",+t.minutes))},onPlaytimeChanged_:function(e){var t=e.split(".");this.set("showTimeoutInfo",!1),n.isArray(t)?(this.set("minutes",t[0]),this.set("seconds",t[1])):this.set("playtime",e)}})})),define("$collapsedTimerV",["require","visualisation/collapsedTimerV","visualisation/collapsedTimerM","shared/enums"],(function(e){return new(e("visualisation/collapsedTimerV"))({model:new(e("visualisation/collapsedTimerM"))(e("shared/enums").CollapsedTimerFormat.MinutesOnly)})})),define("vis/app/setDimensions",[],(function(){var e=require("shared/utils"),t=e.splitGetParameters();!function(t){var i=t.width||(window.mini?300:600),n=Math.round(i/16*9),s=document.getElementById("root-container"),o=document.getElementById("animation-background"),r=document.getElementsByTagName("body")[0];300<=i&&168<=n?(i<=599||n<=337?s.classList.add("size-300"):i<=799||n<=449?s.classList.add("size-600"):i<=999||n<=562?s.classList.add("size-800"):s.classList.add("size-1000"),e.isPremVis()||(o.style.width="100%",o.style.height="100%",s.style.width="100%",s.style.height="100%")):"true"!==t.collapsed&&(s.classList.add("size-300"),o.style.width="300px",o.style.height="168px",s.style.width="300px",s.style.height="168px"),e.isPremVis()&&(s.style.width="100%",s.style.height="100%"),i<=400&&r.classList.add("size-lt-400"),window.mini?(o.setAttribute("style","width:100%;height:100%"),s.setAttribute("style","width:100%;height:100%"),s.classList.add("csb"),s.classList.add("mini")):i<300&&(i=300),i>=600&&e.scaleElement(document.getElementById("stats-screen-container"),window.clientWidth/600,!0)}(t),"true"===t.collapsed&&function(t){clientWidth=void 0!==t.width?t.width:600;var i=document.getElementById("root-container");i.classList.add("collapsed-loading");var n=document.getElementById("animation-background");if("icehockey"===window.sport||"basketball"===window.sport){var s=document.getElementById("collapsed-pitch");clientWidth>=300?e.applyElementScaling(clientWidth,600,s):(e.applyElementScaling(300,600,s),n.style.width="300px",n.style.height="24px")}i.style.height="44px"}(t)})),define("vis/units/fallbackpe.trim=function(){return this.replace(/^\s+/,"").ror(var i=0,n=this.length;i<n;i++)i in this&&e.call(t,this[i],i,this)}),Date.prototype.t|(Date.prototype.toJSON=function(){function e(e){return e<10?"0"+e:e}return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"Z"}),Date.prototype.toISOString=Date.prototype.toJSON),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if(0===i)return-1;var n=0;if(arguments.length>1&&("number"==typeof(n=Number(arguments[1]))&&isNaN(n)?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=i)return-1;for(var s=n>=0?n:Math.max(i-Math.abs(n),0);s<i;s++)if(s in t&&t[s]===e)return s;return-1}),"function"!=typeof Object.create&&(e=function(){},Object.create=function(t){if(arguments.length>1)throw new Error("Second argument not supported");if(null===t)throw new Error("Cannot set a null [[Prototype]]");if("object"!=typeof t)throw new TypeError("Argument must be an object");return e.prototype=t,new e})})),define("vis/units/Playtime",[],(function(){function e(e){e&&e.value&&(this.inMilliseconds=e.value,this.parseMiliseconds(e.value))}return e.prototype.parseMiliseconds=function(e){this.inMilliseconds=e,this.seconds=Math.floor(this.inMilliseconds/1e3),this.minutes=Math.floor(this.seconds/60),this.seconds%=60},e.prototype.startTimeIncreasing=function(e){var t=this;e&&e.minutes&&(t.inMilliseconds=60*e.minutes*1e3),this.timeInterval=setInterval((function(){t.inMilliseconds+=1e3,t.parseMiliseconds(t.inMilliseconds),e&&e.container&&e.container.html(t.minutes+" : "+(2===t.seconds.toString().length?t.seconds:"0"+t.seconds))}),1e3)},e.prototype.stopTimeIncreasing=function(){clearInterval(this.timeInterval)},e})),define("vis/units/TeamColorsHandler",[],(function(){return function(){var e=function(e,t){var i=parseInt(e.substr(0,2),16),n=parseInt(e.substr(2,2),16),s=parseInt(e.substr(4,2),16);return i=parseInt(i*(100+t)/100,10),n=(n=parseInt(n*(100+t)/100,10))<255?n:255,s=(s=parseInt(s*(100+t)/100,10))<255?s:255,(1===(i=i<255?i:255).toString(16).length?"0"+i.toString(16):i.toString(16))+(1===n.toString(16).length?"0"+n.toString(16):n.toString(16))+(1===s.toString(16).length?"0"+s.toString(16):s.toString(16))},t=function(e){return{Color1:((e=e||{}).C1||"FFFFFFFF").toUpperCase().substr(2,8),Color2:(e.C2||"FFFFFFFF").toUpperCase().substr(2,8),Pants:(e.P||"FFFFFFFF").toUpperCase().substr(2,8),Socks:(e.S||"FFFFFFFF").toUpperCase().substr(2,8)}};this.setTeamColors=function(t){var i,n=this.parse(t.TeamColors),s={home:{Color1:n.home.Color1,Color2:n.home.Color2},away:{Color1:n.away.Color1,Color2:n.away.Color2}};return 9!==t.SportId&&16!==t.SportId||("FFFFFF"!==(i=s).home.Color1&&"FFFFFF"!==i.home.Color2&&"FFFFFF"!==i.away.Color1&&"FFFFFF"!==i.away.Color2||(i.home.Color1=e(i.home.Color1,-20),i.home.Color2=e(i.home.Color2,-20),i.away.Color1=e(i.away.Color1,-20),i.away.Color2=e(i.away.Color2,-20)),s=i),{homeColor1:"#"+s.home.Color1,homeColor2:"#"+s.home.Color2,awayColor1:"#"+s.away.Color1,awayColor2:"#"+s.away.Color2}},this.parse=function(e){var i={};return e[0].hasOwnProperty("IHT")&&!0===e[0].IHT?(i.home=t(e[0]),i.away=t(e[1])):(i.home=t(e[1]),i.away=t(e[0])),i}}})),define("vis/units/MatchContext",["require","shared/utils","vis/units/TeamColorsHandler","jquery"],(function(e){var t,i=e("shared/utils"),n=new(e("vis/units/TeamColorsHandler")),s=e("jquery"),o={awayTeam:"",homeTeam:"",sportName:"",stadiumName:"",leagueName:"",country:"",forcedAwayTeam:"",forcedHomeTeam:"",originalAwayTeam:"",originalHomeTeam:"",homeTeamAbbr:"HOM",awayTeamAbbr:"AWA",homeColor1:"#8A45B9",homeColor2:"#8A45B9",awayColor1:"#338ECC",awayColor2:"#338ECC",scoreHome:0,scoreAway:0,pointsHome:0,pointsAway:0,getTeamAbbr:function(e){return"home"===e?this.homeTeamAbbr:this.awayTeamAbbr},getTeamName:functon(e){return"home"===e?this.ruledHomeTeamName:this.ruledAwayTeamName}};function r(e){o.originalAwayTeam=e.AwayTeam,o.originalHomeTeam=e.HomeTeam,e.TeamColors&&s.extend(o,n.setTeamColors(e)),t?(o.awayTeam=o.forcedAwayTeam||e.AwayTeam||"AWAY",o.homeTeam=o.forcedHomeTeam||e.HomeTeam||"HOME"):(o.awayTeam=e.AwayTeam||"AWAY",o.homeTeam=e.HomeTeam||"HOME"),o.ruledAwayTeamName=i.applyTeamNameRules(o.awayTeam).trim(),o.ruledHomeTeamName=i.applyTeamNameRules(o.homeTeam).trim(),o.awayTeam=i.trimString(o.awayTeam,30,{ending:"'"}),o.homeTeam=i.trimString(o.homeTeam,30,{ending:"'"}),o.sport=e.SportName||"",o.stadium=e.StadiumName||"",o.league=o.league||e.LeagueName||"",o.scoreHome=e.ScoreHome,o.scoreAway=e.ScoreAway,o.awayTeamAbbr=o.forcedAwayTeamAbbr||e.AwayTeamAbbr||i.trimString(i.applyTeamNameRules(o.awayTeam),3).toUpperCase(),o.homeTeamAbbr=o.forcedHomeTeamAbbr||e.HomeTeamAbbr||i.trimString(i.applyTeamNameRules(o.homeTeam),3).toUpperCase(),o.country=o.country||e.CountryName||window.country||"",window.mediator.publish("context:ready")}return window.mediator.subscribe("app:options-generated",(function(e){o.isUsSport="true"===e.ussport||"y"===e.ussport,o.league=e.competitionname||window.leagueName,o.country=e.countryname||window.country,o.forcedHomeTeam=e.hometeam,o.forcedAwayTeam=e.awayteam,o.forcedHomeTeamAbbr=e.hometeamabbr,o.forcedAwayTeamAbbr=e.awayteamabbr,o.forcedHomeTeam&&(o.forcedHomeTeamAbbr=e.hometeamabbr||i.trimString(i.applyTeamNameRules(o.forcedHomeTeam),3).toUpperCase(),t=!0),o.forcedAwayTeam&&(o.forcedAwayTeamAbbr=e.awayteamabbr||i.trimString(i.applyTeamNameRules(o.forcedAwayTeam),3).toUpperCase(),t=!0)})),window.mediator.subscribe("app:message",(function(e){o.scoreHome=e.ScoreHome,o.scoreAway=e.ScoreAway,e.TeamColors&&s.extend(o,n.setTeamColors(e))}),{priority:1}),window.mediator.once("app:message",r,{priority:0}),window.mediator.on("csb:reset-visualisation",(function(){window.mediator.once("app:message",r,{priority:t:pointsUpdate",(function(e){o.pointsHome=e.home,o.pointsAway=e.away}),{priority:0}),o})),define("vis/units/StatsHandler",[],(function(){function e(e){this.prehooksFunctionNames=e.prehooks,this.posthooksFunctionNames=e.posthooks;var t=this;void 0!==e&&(this.stats={},window.mediator.subscribe("app:animation-event",(function(e){t.handleEvent_(e)}),{priority:0}),window.mediator.subscribe("queue:not-recognized-event",(function(e){t.handleEvent_(e)}),{priority:0}),e.statCodesDict&&(this.statCodesDict=e.statCodesDict)),this.handleEvent_=function(e){e.message.Statistics&&(t.applyPrehooks(e),this.stats=t.splitStatistics(e.message.Statistics),t.applyPosthooks(e),window.mediator.publish("app:statistics",t.stats))},this.splitStatistics=function(e){var t,i;for(i in this.stats={},e)e.hasOwnProperty(i)&&(this.stats[i]=e[i].split(":"));for(t in this.statCodesDict)this.statCodesDict.hasOwnProperty(t)&&(i=this.statCodesDict[t],this.stats[i]=this.stats[i]||[0,0],this.stats[i][0]=Number(this.stats[i][0],0),this.stats[i][1]=Number(this.stats[i][1],0));return this.stats},this.matchStatType=function(e){if(void 0!==this.statCodesDict){var t=parseInt(e,10);return t in this.statCodesDict?this.statCodesDict[t]:t-1024 in this.statCodesDict&&this.statCodesDict[t-1024]}}}return e.prototype.applyPrehooks=function(e){for(var t=0;this.prehooksFunctionNames&&t<this.prehooksFunctionNames.length;t++)"function"==typeof this[this.prehooksFunctionNames[t]]&&this[this.prehooksFunctionNames[t]](e)},e.prototype.applyPosthooks=function(e){for(var t=0;this.posthooksFunctionNames&&t<this.posthooksFunctionNames.length;t++)"function"==typeof this[this.posthooksFunctionNames[t]]&&this[this.posthooksFunctionNames[t]](e)},e})),define("vis/units/StatsHandlerLocal",["require","vis/units/StatsHandler"],(function(e){var t=e("vis/units/StatsHandler"),i={};return i[1043]="Offside",i[1024]="Attacks",i[1025]="Corners",i[1026]="DangerousAttacks",i[1042]="Fouls",i[1028]="FreeKicks",i[1033]="Shots",i[1041]="ShotsWoodwork",i[1034]="YellowCards",i[1032]="RedCards",i[1039]="ShotsOnTarget",i[1058]="ShotsBlocked",i[1040]="ShotsOffTarget",i[1053]="GoalKick",i[1054]="ThrowIn",i[1055]="Substitutions",i[1058]="ShotsBlocked",i[1031]="Penalties",t.prototype.addGoals=function(e){var t=this.stats;t.Goals=[],t.Goals[0]=e.message.ScoreHome,t.Goals[1]=e.message.ScoreAway},t.prototype.getStatistics=function(){return this.stats},new t({statCodesDict:i,posthooks:["addGoals"]})})),define("vis/units/LocalisationHandler",["require","vis/units/StatsHandlerLocal","vis/units/MatchContext"],(function(e){var t=e("vis/units/StatsHandlerLocal"),i=e("vis/units/MatchContext");function n(e){var n=this;this.currentLang="en",this.lang=this.currentLang,this.eventCodes={},this.stats={},this.strings={};var s={},o={};function r(e,t){var s=n.lang,o=!t,r=(t||"/localisation")+"/vis/"+(i.sport||window.sport||"").toLowerCase()+"/"+n.lang+".json";$.ajax({type:"GET",dataType:"JSONction(t){n.applyLanguageRules(s,t,o),e&&e()},error:function(){e&&e()}})}function a(e,t){var i;for(i in t)t.hasOwnProperty(i)&&void 0===e[i]&&(e[i]=t[i])}this.statsHandler=t,this.sportIds={basketball:"2",soccer:"1",tennis:"3",cricket:"204",snooker:"11",badminton:"200",bandy:"201",beachsoccer:"202",beachvolleyball:"16",boxing:"203",darts:"12",fieldhockey:"205",handball:"4",icehockey:"8",netball:"208",pool:"209",rugbyleague:"210",squash:"211",volleyball:"9"},e.stats&&(this.stats.en=e.stats),e.strings&&(this.strings.en=e.strings),e.eventCodes&&(s=e.eventCodes),e.eventIdsToStrings&&(os",(function(){window.mediator.publish("app:stats-ibe("translations:ready",(function(e,t){n.applyLanguageRules(e,t,!0)})),this.eventCodes.en=s,this.getEventCodeById=function(e){var t,i=""+e;return e=parseInt(e,10),4===i.length&&"2"===i.charAt(0)&&(e-=1024),void 0===this.eventCodes[this.currentLang][e]?(t=this.eventCodeGenerator(e))||(void 0!==this.eventCodes.en[e]?this.eventCodes.en[e]:e):(!1===(t=this.eventCodeGenerator(e))&&(t=this.eventCodes[this.currentLang][e]),t)},this.getLocaleString=function(e){var t=e.toUpperCase();if(this.getEventCodeIdValueByString){var i=this.getEventCodeIdValueByString(t);if(i)return i}if(void 0===this.strings[this.currentLang][t]){if(o[e]){var n=o[e],s=this.getEventCodeById(n);return s||e}return void 0!==this.strings.en[t]?this.strings.en[t]:e}return this.strings[this.currentLang][t]},this.getMonthNames=function(){var e;if(!this.monthGenerated)for(this.monthGenerated=!0,this.months=[],e=0;e<12;e++)this.months.push(this.getLocaleString("MONTH_"+e));return this.months},this.getLocaleStatsValue=function(e){var t;return"number"==typeof e?t=this.statsHandler.matchStatType(e):"string"==typeof e&&(t=e),void 0!==t&&(t=t.toUpperCase(),void 0===this.stats[this.currentLang][t]?void 0!==this.stats.en[t]?this.stats.en[t]:t:this.stats[this.currentLang][t])},this.setUrl=function(e){this.url=e},this.setLanguage=function(e,t){this.lang=e,"en"!==e&&r(t)},this.setDiffPath=function(e,t){e?r(t,e):t&&t()},this.applyLanguageRules=function(e,t,i){var s;for(s in i&&(n.eventCodes[e]||(n.eventCodes[e]={}),this.strings[e]||(this.strings[e]={}),this.stats[e]||(this.stats[e]={})),t.strings)t.strings.hasOwnProperty(s)&&(this.strings[e][s]=t.strings[s]);for(s in t.eventCodes)t.eventCodes.hasOwnProperty(s)&&(n.eventCodes[e][parseInt(s,10)]=t.eventCodes[s]);for(s in t.stats)t.stats.hasOwnProperty(s)&&(this.stats[e][s]=t.stats[s]);a(this.strings[e],this.strings.en),a(n.eventCodes[e],n.eventCodes.en),n.currentLang=e,window.mediator.publish("app:stats-names",this.stats[e])}}return n.prototype.eventCodeGenerator=function(e){var t=!1;switch(e){case 1426:t=this.eventCodes[this.currentLang][1419];break;case 1433:t=this.eventCodes[this.currentLang][1421]}return t},n})),define("vis/units/LocalisationHandlerLocal",["require","vis/units/LocalisationHandler"],(function(e){var t,i=e("vis/units/LocalisationHandler"),n={},s={},o={};return s.en={SHOTS:"Total Shots",SHOTSONTARGET:"Shots On Target",SHOTSBLOCKED:"Shots Blocked",DANGEROUSATTACKS:"Dangerous Attacks",FREEKICKS:"Free Kicks",CORNERS:"Corners",FOULS:"Fouls",OFFSIDE:"Offsides",GOALKICK:"Goalkicks",THROWIN:"Throw Ins",YELLOWCARDS:"Yellow Cards",REDCARDS:"Red Cards",ATTACKS:"Attacks",SHOTSWOODWORK:"Shots Woodwork",SHOTSOFFTARGET:"Shots Off Target",SUBSTITUTIONS:"Substitutions"},o.en={STARTINGSHORTLY:"Starting Shortly","2NDYELLOWCARD":"2nd Yellow Card",OWNGOAL:"Own Goal",COUNTDOWN:"Countdown",TEAMFORM:"Team Form",HOME:"Home",AWAY:"Away",GAMESUSPENDED:"Game Suspended",STADIUMPOWERBLACKOUT:"Stadium Power Blackout",CROWDTROUBLE:"Crowd Trouble",BADWEATHER:"Bad Weather",PYROTECHNICS:"Pyrotechnics",PLAYERSFIGHTING:"Players Fighting",REFEREEINJURED:"Referee Injured",PLAYERISINJURED:"Player Injured",WATERBREAK:"Water Break",MOMENTUM:"Momentum",ATTACKINGPRESURE:"Attacking Presure",EXTRATIME:"Extra Time",PLAYERSINPOSITION:"Players In Position ",PENALTYSHOOTOUT:"Penalty Shootout",START:"Start",STOP:"Stop",AGGREGATESCORE:"Aggregate Score",GAMEABOUTTOSTART:"Game About To Start",PLAYERSARECOMINGOUT:"Players Are Coming Out",ENTERINGPITCH:"Entering Pitch",ANTHEMSINGING:"Anthem Singing",SHAKINGHANDS:"Shaking Hands",COINTOSS:"Coin Toss",MINUTEOFSILENT:"Minute Of Silent",PRIZEGIVINGCEREMONY:"Prize Giving Ceremony",PHOTOTAKING:"Photo Taking",MATCHCANCELLED:"Match Cancelled",MATCHDELAYED:"Match Delayed",LEADS:"Leads",WIN:"Win",DRAW:"Draw",SUBS:"Subs",MISSED:"Missed",STATSINGAME:"Summary - In Game",STARTSAT:"Starts At",CONFIRMEDSCORE:"Confirmed Score",CONFIRMEDYELLOWCARDS:"Confirmed Yellow Cards",CONFIRMEDREDCARDS:"Confirmed Red Cards",CONFIRMEDPENALTIES:"Confirmed Penalties",CONFIRMEDCORNERS:"Confirmed Corners",ADBLOCK_MSG:"Please disable ad block for the visualisation to work",TODAY:"Today","PREROLL->SKIP":"Skip","PREROLL->SKIP_IN":"Skip Advert in","PREROLL->STARTS_IN":"Broadcast Starts in","HALF-TIME":"Half Time",FULLTIME:"Full Time",MONTH_0:"January",MONTH_1:"February",MONTH_2:"March",MONTH_3:"April",MONTH_4:"May",MONTH_5:"June",MONTH_6:"July",MONTH_7:"August",MONTH_8:"September",MONTH_9:"October",MONTH_10:"November",MONTH_11:"December"},n[0]="Start 1st Half",n[1]="Half Time",n[2]="Start 2nd Half",n[3]="Full Time",n[4]="Kick Off | Extra Time #1",n[5]="Stop - Half Time | Extra Time #1",n[6]="Kick Off | Extra Time #2",n[7]="Full Time | Extra Time #2",n[8]="Start Penalty Shootout",n[9]="Stop Penalty Shootout",n[18]="Penalty Started",n[20]="Stop game",n[128]="Safe Safe",n[129]="Danger",n[132]="Injury Break",n[133]="Players Are Coming Out",n[134]="Players Lined Up",n[135]="National Anthem Singing",n[136]="Shake Hands",n[137]="Flip Coin",n[138]="Minute Of Silent",n[139]="Prize Giving Ceremony",n[140]="Photo Taking",n[141]="Game About To Start",n[142]="Missed Penalty",n[143]="Possible Red Card",n[144]="Possible Penalty",n[145]="No Rc No Rc After Prc",n[146]="No Pen No Pen After Ppen",n[147]="Retake Pen Retake Penalty",n[148]="Restart",n[150]="Next Penalty",n[207]="Possible Free Kick",n[208]="No Free Kick",n[209]="Referee Ball",n[260]="Extra Time Indicates The Extra Time.",n[262]="Zone Information",n[524]="Jersey Changed",n[1024]="Attack",n[1025]="Corner",n[1026]="Dangerous Attack",n[1027]="Free Kick",n[1028]="Free Kick",n[1029]="Goal",n[1030]="Goal Cancelled",n[1031]="Penalty",n[1032]="Red Card",n[1033]="Shot",n[1034]="Yellow Card",n[1039]="Shot On Target",n[1040]="Shot Off Target",n[1041]="Hit Woodwork",n[1042]="Foul",n[1043]="Offside",n[1044]="Kick Off",n[1045]="Yellow / Red Card",n[1046]="Cancel Yellow Card",n[1047]="Cancel Red Card",n[1048]="Cancel Yellow Card",n[1049]="Cancel Penalty",n[1050]="Cancel Corner",n[1051]="In Possession",n[1052]="Danger",n[1053]="Goal Kick",n[1054]="Throw In",n[1055]="Substitution",n[1056]="Dangerous Shot",n[1057]="Shot Saved",n[1058]="Shot Blocked",n[1059]="Retake Penalty",n[1060]="Missed Penalty",n[1064]="Counter Attack",t={eventCodes:n,stats:s.en,strings:o.en},i.prototype.eventCodeGenerator=function(e){var t=!1;switch(e){case 10:case 11:t=this.eventCodes[this.currentLang][0];break;case 12:case 13:t=this.eventCodes[this.currentLang][2];break;case 14:case 15:t=this.eventCodes[this.currentLang][4];break;case 16:case 17:t=this.eventCodes[this.currentLang][6];break;case 18:case 19:t=this.eventCodes[this.currentLang][8]}return t},i.prototype.getEventCodeIdValueByString=function(e){var t,i;switch(e){case"HALF-TIME":i=1;break;case"FULLTIME":i=3;break;case"END-EXTRA-1":i=5;break;case"END-EXTRA-2":i=7;break;case"END-PENALTY":i=9}return i&&(t=this.getEventCodeById(i)),t},new i(t)})),define("vis/units/KickOffVisualisation",["require","shared/utils","vis/units/Playtime","vis/units/MatchContext","vis/units/LocalisationHandlerLocal","jquery"],(function(e){var t=e("shared/utils"),i=e("vis/units/Playtime"),n=e("vis/units/MatchContext"),s=e("vis/units/LocalisationHandlerLocal"),o=e("jquery");function r(e){this.mediator=window.mediator,this.localisationHandler=s,this.$el={},this.$el.startTime=o("#kick-off-match-date"),this.$el.home=o("#kick-off-home-team"),this.$el.away=o("#kick-off-away-team"),this.$el.countdown=o("#kick-off-time"),this.$el.countdownContent=o("#kick-off-countdown-content"),this.$el.countdownDescription=o(".countdown-description","#kick-off-countdown-content"),this.$el.countdownDescription.addClass("vis-countdown-description"),e&&!0===e.canShowPictogramms&&(this.canShowPictogramms=!0),this.$el.headerContent=o("#kick-off-country-league"),this.$el.stadium=o("#kick-off-stadium"),this.$el.homeKit=o("#kick-off-home-kit"),this.$el.homeKitColor1=o("#kick-off-home-kit-color1"),this.$el.homeKitColor2=o("#kick-off-home-kit-color2"),this.$el.awayKit=o("#kick-off-away-kit"),this.$el.awayKitColor1=o("#kick-off-away-kit-color1"),this.$el.awayKitColor2=o("#kick-off-away-kit-color2"),this.$el.form={block:o("#kick-off-footer"),home:o("#kick-off-form-home > .form-item"),homeArrow:o("#kick-off-form-home > .form-arrow"),away:o("#kick-off-form-away > .form-item"),awayArrow:o("#kick-off-form-away > .form-arrow"),today:o("#kick-off-today")};var t=this;this.mediator.subscribe("data:form",(function(e,i){t.formData=e,i=i||{},t.setHappensTodayFlag(i||{}),t.showFormData()})),this.mediator.subscribe("data:colors",(function(e){t.homeColors={color1:e.home.Color1,color2:e.home.Color2},t.awayColors={color1:e.away.Color1,color2:e.away.Color2},t.applyColors()})),this.mediator.subscribe("app:kick-off",(function(e){t.launch(e)})),this.mediator.subscribe("queue:not-recognized-event",(function(e){if(e.event&&"prematch-update"===e.event.type){var i=s.getEventCodeById(e.message.EventCodeId);t.handlePrematchTexrContent.text(t.localisationHandler.getLocaleString("MATCHDELAYED"))})),this.sub=this.mediator.subscribe("app:animation-event",(function(e){t.destroy(e)})),this.mediator.subscribe("app:match-cancelled",(function(){t.destroy()})),this.mediator.subscribe("app:hide-normal-kick-off",(functiocribe("app:premium-vis-started",(function(e){"live"===e&&t.destroy()})),this.mediator.subscribe("pitch:collapsed",(function(e){t.collapsed=e})),this.mediator.subscribe("app:statistics-detail-update",(function(e){t.active?t.$el.headerContent.text(t.localisationHandler.getLocaleString(e.type)):(e.homeTeam=n.homeTeam,e.awayTeam=n.awayTeam,t.launch(e))})),this.happensToday=!0,this.active=!1,this.wasShown=!1,this.canBeLaunched=!0,this.collapsed=!1}return r.prototype.getKickOffDate=function(e){if(e){var i=t.convertDate(e),n=i.date;return i.normalized||(n=new Date(n.valueOf()-6e4*n.getTimezoneOffset())),n}},r.prototype.setHappensTodayFlag=function(e){var t=new Date,i=this.getKickOffDate(e.KickOff);i&&(this.happensToday=t.getDate()===i.getDate())},r.prototype.handlePrematchTextUpdate=function(e,t){var i=this.startCountdown.interval;i&&clearInterval(i),this.canBeLaunched&&this.launch({kickOff:t.KickOff,homeTeam:n.homeTeamAbbr,awayTeam:n.awayTeamAbbr,stadium:n.stadium,league:n.league,country:n.country});var s=o("<div/>").attr({class:"kick-off-status-helper"}).append(o("<div/>").attr({class:"kick-off-status-content"}).html(e));this.$el.countdownContent.html(""),s.appendTo(this.$el.countdownContent)},r.prototype.applyColors=function(){"object"==typeof this.homeColors&&"object"==typeof this.awayColors&&(this.$el.homeKitColor1.css({background:"#"+this.homeColors.color1}),this.$el.homeKitColor2.css({background:"#"+this.homeColors.color2}),this.$el.awayKitColor1.css({background:"#"+this.awayColors.color1}),this.$el.awayKitColor2.css({background:"#"+this.awayColors.color2}))},r.prototype.launch=function(e){var i=this;if(this.canBeLaunched&&!this.collapsed&&e&&e.kickOff&&!1===this.wasShown){var s=this.getKickOffDate(e.kickOff),r=new Date;o("#root-container").addClass("prematch");var a=n.homeTeamAbbr.toUpperCase(),l=n.awayTeamAbbr.toUpperCase();this.$el.home.html(a),this.$el.away.html(l),this.tryShowPictograms(),this.$el.startTime.text(this.formatStartTime(s)),this.$el.headerContent.text(this.formatHeader(e)),this.$el.stadium.html(e.stadium);var c=this.localisationHandler;if(e.type)this.$el.headerContent.text(c.getLocaleString(e.type).toUpperCase());else if(s>=r){var u=s-r;u>36e5?(setTimeout((function(){i.startCountdown()}),u-36e5),i.$el.countdownDescription.text(c.getLocaleString("startsAt").toUpperCase()),i.$el.countdown.text(t.prependZero(s.getHours())+":"+t.prependZero(s.getMinutes()))):(i.$el.countdownDescription.text(c.getLocaleString("countdown").toUpperCase()),this.startCountdown(u))}else this.$el.headerContent.text(c.getLocaleString("startingShortly").toUpperCase()),this.$el.countdown.text("00:00");this.active=!0,this.wasShown=!0,this.canBeLaunched=!1}},r.prototype.tryShowPictograms=function(){this.canShowPictogramms&&(this.$el.home.html("").append(o("<div/>").attr({class:"ko-pictogram ko-pictogram-left"})),this.$el.away.html("").append(o("<div/>").attr({class:"ko-pictogram ko-pictogram-right"})))},r.prototype.showFormData=function(){function e(e,t,i){var n;for(n=0;n<e.length&&n<5;n++)if(e[n]){var s=o(t[n]);s.show();var r="";switch(e[n].result){case"W":r="win";break;case"D":r="draw";break;case"L":r="loss"}s.removeClass("win draw loss").addClass(r),s.text(e[n].result),0===n&&(i.show(),i.removeClass("win draw loss").addClass(r))}}this.$el.form.block.toggleClass("enabled",!0),this.happensToday?(this.$el.form.today.text(this.localisationHandler.getLocaleString("TODAY",!0)),this.$el.form.today.show()):this.$el.form.today.hide(),e(this.formData.HomeHistory,this.$el.form.home,this.$el.form.homeArrow),e(this.formData.AwayHistory,this.$el.form.away,this.$el.form.awayArrow)},r.prototype.formatStartTime=function(e){var i=this.localisationHandler.getMonthNames(),n=e.getDate()+" "+i[e.getMonth()]+" "+e.getFullYear()+" ";return n+=t.prependZero(e.getHours())+":"+t.prependZero(e.getMinutes())},r.prototype.formatHeader=function(){var e=[],t=n.country;t&&"COUNTRY_NAME"!==t&&e.push(t);var i=n.league;return i&&"LEAGUE_NAME"!==i&&e.push(i),e.join(" > ")},r.prototype.destroy=function(e){e&&"kickOff"===e.eventItem.action||(this.canBeLaunched=!1,this.active&&(o("#root-container").removeClass("prematch"),this.mediator.remove("app:animation-event",this.sub.id),this.active=!1))},r.prototype.startCountdown=function(e){var n=this,s=new i({value:e||36e5});n.startCountdown.interval=setInterval((function(){s.parseMiliseconds(s.inMilliseconds),n.$el.countdown.text(t.prependZero(s.minutes)+":"+t.prependZero(s.seconds)),s.inMilliseconds-=1e3,Math.floor(s.inMilliseconds/1e3)<0&&(clearInterval(n.startCountdown.interval),n.$el.countdown.text("00:00"))}),1e3)},r})),define("vis/animations/ChevronsAnimation",[],(function(){var e=function(){var e=this;this.mediator=window.mediator,this.collapsed=!1,this.stopInterval=null,this.mediator.subscribe("pitch:collapsed",(function(t){e.collapsed=t})),this.chevrons={direction:null,count:0},this.initializeContainers()};return e.prototype.initializeContainers=function(){var e=$("#animation-background");this.$el={},this.$el.container=$("#arrows"),this.$el.chevronContainers=[],this.$el.chevronContainers.all=e.find(".arrow"),this.$el.chevronContainers.home=[],this.$el.chevronContainers.away=[];for(var t=0;t<5;t++)this.$el.chevronContainers.home[t]=e.find("#home_"+t),this.$el.chevronContainers.away[t]=e.find("#away_"+t)},e.prototype.show=function(e){var t,i,n,s;if(!this.collapsed){if(e.hasChevronsOffset?this.$el.container.toggleClass("offset",!0):this.$el.container.toggleClass("offset",!1),t=e.arrows,i=e.arrowsStill,n="home"===e.direction||"away"===e.direction?e.direction:"home",void 0===t||t<0?t=0:t>5&&(t=5),0===t)return this.clearChevrons(),this.chevrons={animateOnce:i,count:0,direction:null},null;if(i===this.chevrons.animateOnce&&n===this.chevrons.direction){for(s=0;s<t;s++)this.$el.chevronContainers[n][s].toggleClass("transparent",!1);for(s=t;s<5;s++)this.$el.chevronContainers[n][s].toggleClass("transparent",!0)}else for(this.clearChevrons(),this.slide(n,i),s=0;s<t;s++)this.$el.chevronContainers[n][s].toggleClass("transparent",!1);this.chevrons={animateOnce:i,count:t,direction:n}}},e.prototype.clearChevrons=function(){this.$el.chevronContainers.all.toggleClass("sliding",!1),this.$el.chevronContainers.all.toggleClass("sliding-once",!1),this.$el.chevronContainers.all.toggleClass("transparent",!0)},e.prototype.slide=function(e,t){for(var i=this,n=0;n<5;n++)!function(n){t?setTimeout((function(){i.$el.chevronContainers[e][n].toggleClass("sliding-once",!0)}),0):setTimeout((function(){i.$el.chevronContainers[e][n].toggleClass("sliding",!0)}),0)}(n)},e})),define("vis/animations/ZoneAnimation",["require","vis/units/MatchContext"],(function(e){var t=e("vis/units/MatchContext"),i=function(){var e=this;this.mediator=window.mediator,this.$el=[],this.$el.container=$("#deadball-container"),this.zoneEvent=null,this.zoneDirection=nulltor.subscribe("app:hide-animation",(function(){e.collapsed||e.hide()})),this.collapsed=!1,this.mediator.subscribe("pitch:collapsed",(function(t){e.collapsed=t})),this.width=85};return i.prototype.launch=function(e){var t,i=this;this.collapsed||(t=e.type+"-"+e.direction,e.zone&&(t+="-"+e.zone),this.zoneEvent={className:t,type:e.type},this.timeout=setTimeout((function(){!0===window.oldBrowser?(i.$el.container.toggleClass("disc-only",!0),i.$el.container.toggleClass(i.zoneEvent.className,!0)):(i.$el.container.toggleClass(i.zoneEvent.className,!0),i.$el.container.fadeTo(500,1)),"mini"===window.mode&&i.setMiniZonePositions(i.zoneEvent.className)}),1e3))},i.prototype.getHorizontalPos=function(e){var i=$("#root-container").width()/t.defaultWidth;return(this.width/2+e)*i-this.width/2},i.prototype.getVerticalPos=function(e){var i=$("#root-container").height()/t.defaultHeight;return(this.width/2+e)*i-this.width/2},i.prototype.setMiniZonePositions=function(e){switch(e){case"free-kick-away-1":case"penalty-away":case"missed-penalty-away":this.$el.container.css("left",this.getHorizontalPos(34));break;case"free-kick-home-1":case"penalty-home":case"missed-penalty-home":this.$el.container.css("right",this.getHorizontalPos(34));break;case"free-kick-home-gk":this.$el.container.css("left",this.getHorizontalPos(-7)),this.$el.container.css("top",this.getVerticalPos(67));break;case"free-kick-away-gk":this.$el.container.css("right",this.getHorizontalPos(-7)),this.$el.container.css("top",this.getVerticalPos(67))}},i.prototype.destroy=function(){this.timeout&&clearTimeout(this.timeout),this.zoneEvent&&(this.$el.container.removeAttr("class"),this.$el.container.removeAttr("style"))},i.prototype.hide=function(e){var t=this;this.timeout&&clearTimeout(this.timeout),this.zoneEvent&&this.zoneEvent.type&&this.$el.container.fadeOut(e,(function(){t.$el.container.removeAttr("stype.stopHiding=function(){this.zoneEvent&&this.$el.container.stop()},i})),define("vis/animations/ShotVisualisation",["require","vis/units/MatchContext"],(function(e){var t=e("vis/units/MatchContext"),i=function(){var e=this;this.shotType=null,this.mediator=window.mediator,this.collapsed=!1,this.$el={},this.$el.actionElement=$("#action-background"),this.mediator.subscribe("pitch:collapsed",(function(t){e.collapsed=t}))};return i.prototype.launch=function(e){var t=this;this.collapsed||(this.$el.actionElement.addClass("shot-"+e.direction),e.shotType&&(this.shotType=e.shotTyype),setTimeout((function(){t.$el.actionElement.addClass(e.shotType)}),0)))},i.prototype.adaptForMini=function(e){var t=112,i=338;switch(e){case"off_target":case"offside":this.scaleRoot(t,i);break;case"on_target":t=452,i=338,this.scaleRoot(t,i)}},i.prototype.scaleRoot=function(e,i){var n=t.defaultWidth,s=t.defaultHeight,o=e*(this.$el.actionElement.width()/n)+"px",r=i*(this.$el.actionElement.height()/s)+"px";this.$el.actionElement.css("background-size",o+" "+r)},i.prototype.destroy=function(){this.shotType&&(this.$el.actionElement.removeAttr("class"),this.shotType=null)},i.prototype.hide=function(e){var t=this;this.collapsed||(this.$el.actionElement.css({opacity:1,"-webkit-animation":"none","-moz-animation":"none","-o-animation":"none","-ms-animation":"none",animation:"none"}),this.$el.actionElement.fadeOut(e,(function(){t.$el.actionElement.removeAttr("style"),t.$el.actionElement.removeAttr("class")})))},i.prototype.stopHiding=function(){this.$el.actionElement.stop()},i})),define("vis/animations/PossessionArrow",["require","vis/units/StatsHandlerLocal"],(function(e){var t=e("vis/units/StatsHandlerLocal"),i=function(){this.mediator=window.mediator,this.names={},this.initializeContainers(),this.bindListeners()};return i.prototype.initializeContainers=function(){this.$el={},this.$el.container=$("#zone-arrow-container"),this.$el.teamName=this.$el.container.find("#zone-arrow-team-name"),this.$el.eventCode=this.$el.container.find("#zone-arrow-event-code"),this.$el.counter=this.$el.container.find("#danger-counter"),this.$el.collapsed={},this.$el.collapsed.container=$("#collapsed-zone-arrow"),this.$el.collapsed.textContainer=this.$el.collapsed.container.find("#cza-text")},i.prototype.bindListeners=function(){var e=this;this.mediator.subscribe("app:match-info",(function(t){"string"==typeof t.homeTeam&&(e.names.home=t.homeTeam),"string"==typeof t.awayTeam&&(e.names.away=t.awayTeam)})),this.collapsed=!1,this.mediator.subscribe("pitch:collapsed",(function(t){e.collapsed=t}))},i.prototype.launch=function(e,i){var n,s,o,r,a,l,c,u=this;this.collapsed?(this.$el.collapsed.container.toggleClass(e.type+"-"+e.direction,!0),c=e.collapsedEventCode||e.eventCode,this.$el.collapsed.textContainer.html(c+" "+e.teamAbbr)):(n=t.matchStatType(i.EventCodeId),s=t.getStatistics(),n&&s[n]&&(o=s[n]["home"===e.direction?0:1],this.$el.counter.text("#"+o)),setTimeout((function(){r=e.direction,a="shot-"+e.shotType,l=e.type,u.$el.container.toggleClass(r),u.$el.container.toggleClass(a),u.$el.container.toggleClass(l),void 0!==u.names[e.direction]?u.$el.teamName.html(u.names[e.direction]):u.$el.teamName.html(e.teamName),u.$el.eventCode.html(e.eventCode)}),10))},i.prototype.hide=function(e){var t=this;this.$el.container.css({opacity:1,"-webkit-animation":"none","-moz-animation":"none","-o-animation":"none","-ms-animation":"none",animation:"none"}),this.$el.container.fadeOut(e,(function(){t.destroy()}))},i.prototype.stopHiding=function(){this.$el.container.stop()},i.prototype.destroy=function(){this.$el.container.removeAttr("style"),this.$el.container.removeAttr("class"),this.$el.collapsed.container.removeAttr("style"),this.$el.collapsed.container.removeAttr("class")},i})),define("vis/animations/InfoBlockVisualisation",["require","vis/units/LocalisationHandlerLocal","vis/units/StatsHandlerLocal","vis/units/MatchContext"],(function(e){var t=e("vis/units/LocalisationHandlerLocal"),i=e("vis/units/StatsHandlerLocal"),n=e("vis/units/MatchContext"),s=function(){this.mediator=window.mediator,this.names={},this.initializeContainers(),this.bindListeners()};return s.prototype.initializeContainers=function(){var e=$("#info-block-container");this.$el={container:e,teamNameContainer:e.find("#ib-team-name-container"),teamName:e.find("#ib-team-name"),teamNameColor1:e.find("#ib-team-name-color1"),teamNameColor2:e.find("#ib-team-name-color2"),eventCode:e.find("#ib-event-code"),eventCodeEmulator:e.find("#ib-event-code-emulator"),image:e.find("#ib-image"),overlay:$("#ib-overlay")},this.$el.collapsed={},this.$el.collapsed.container=$("#collapsed-info-block-soc"),this.$el.collapsed.textContainer=this.$el.collapsed.container.find("#cib-text-wrapper")},s.prototype.launch=function(e,n){var s,o,r,a,l,c,u=this;this.collapsed||e.collapsedOnly?(o=(e.collapsedEventCode?e.collapsedEventCode:e.eventCode)+" "+("string"==typeof e.teamAbbr?e.teamAbbr:""),e.score&&(o+=" "+e.score),this.$el.collapsed.container.toggleClass("info-block-"+e.direction,!0),this.$el.collapsed.textContainer.html(o),e.type&&(this.$el.collapsed.container.toggleClass(e.type,!0),this.$el.collapsed.container.toggleClass(e.type+"-"+e.direction,!0))):(e.type&&this.$el.container.toggleClass(e.type,!0),e.direction&&"none"!==e.direction?(a="home"===e.direction?u.homeColor1:u.awayColor1,l="home"===e.direction?u.homeColor2:u.awayColor2,this.$el.teamNameColor1.css({"background-color":a}),this.$el.teamNameColor2.css({"background-color":l})):"none"===e.direction&&!0===e.extendedTeamName&&(c=this.buildLeadingTeamString(e).direction)?(a="home"===c?u.homeColor1:u.awayColor1,l="home"===c?u.homeColor2:u.awayColor2,this.$el.teamNameColor1.css({"background-color":a}),this.$el.teamNameColor2.css({"background-color":l})):(this.$el.teamNameColor1.css({"background-color":"transparent"}),this.$el.teamNameColor2.css({"background-color":"transparent"})),this.$el.container.toggleClass("ib-active",!0),this.$el.overlay.fadeTo(300,.2,(function(){u.$el.image.fadeIn(300),u.hideHeamNameContainer||u.$el.teamNa300,complete:function(){u.$el.teamNameContainer.animate({top:0},300)},start:function(){u.$el.eventCode.height()<=50?(u.$el.eventCode.toggleClass("ib-single-line-alignment-fix",!0),u.$el.eventCodeEmulator.toggleClass("ib-single-line-alignment-fix",!0)):(u.$el.eventCode.toggleClass("ib-single-line-alignment-fix",!1),u.$el.eventCodeEmulator.toggleClass("ib-single-line-alignment-fix",!1))}})})),"cancel"!==e.type?(e.extendedTeamName?this.$el.teamName.text(this.buildLeadingTeamString(e).str):void 0!==this.names[e.direction]?this.$el.teamName.text(this.names[e.direction]):"ko-penalty"===e.type?this.hideHeamNameContainer=!0:"periodical-stats"===e.type?this.$el.teamName.html(this.getPeriodicalStatsText(e.stats)):e.teamName?this.$el.teamName.text(e.teamName):this.hideHeamNameContainer=!0,this.$el.eventCode.html(e.eventCode),this.$el.eventCodeEmulator.html(e.eventCode)):(r=t.getLocaleString(e.description),e.score?r+=" "+e.score:r+=" "+(s=i.getStatistics()[e.statsType])[0]+"-"+s[1],this.$el.eventCode.html(r),this.$el.eventCodeEmulator.html(r),this.$el.teamName.text(t.getEventCodeById(n.EventCodeId,!0))))},s.prototype.destroy=function(){this.$el.container.removeAttr("class"),this.$el.container.removeAttr("style"),this.$el.collapsed.container.removeAttr("class"),this.$el.collapsed.container.removeAttr("style"),this.$el.overlay.removeAttr("style"),this.$el.teamNameContainer.removeAttr("style"),this.$el.eventCode.removeAttr("style"),this.$el.eventCode.removeAttr("class"),this.$el.image.removeAttr("style"),this.hideHeamNameContainer=!1},s.prototype.hide=function(e){var t=this;this.$el.container.css({opacity:1,"-webkit-animation":"none","-moz-animation":"none","-o-animation":"none","-ms-animation":"none",animation:"none"}),this.$el.container.fadeOut(e,(function(){t.destroy()}))},s.prototype.stopHiding=function(){this.$el.container.stop()},s.prototype.bindListeners=function(){var e=this;this.mediator.subscribe("app:match-info",(function(t){"string"==typeof t.homeTeam&&(e.names.home=t.homeTeam),"string"==typeof t.awayTeam&&(e.names.away=t.awayTeam)})),this.collapsed=!1,this.mediator.subscribe("pitch:collapsed",(function(t){e.collapsed=t})),this.mediator.subscribe("goal:redirect:info-block",(function(t){e.launch(t.event,t.message)})),this.mediator.subscribe("data:colors",(function(t){e.homeColor1="#"+t.home.Color1,e.homeColor2="#"+t.home.Color2,e.awayColor1="#"+t.away.Color1,e.awayColor2="#"+t.away.Color2}))},s.prototype.buildLeadingTeamString=function(e){var s,o,r,a;return o="half-time"===e.type?t.getLocaleString("leads",!0):t.getLocaleString("win",!0),(a=i.getStatistics().Goals)[0]>a[1]?(s=n.getTeamAbbr("home")+" "+o,r="home"):a[0]<a[1]?(s=n.getTeamAbbr("away")+" "+o,r="away"):s=t.getLocaleString("draw",!0),{str:s,direction:r}},s.prototype.getPeriodicalStatsText=function(e){for(var t,i,n,s=$("<div/>").addClass("periodical-stat"),o=e.length-1;o>=0;o--)n=$("<div></div>"),t=$('<div class="periodical-stat-text"></div>'),i=$('<div class="periodical-stat-value"></div>'),t.text(e[o].text),i.text(e[o].value),n.append(t),n.append(i),s.append(n);return s},s})),define("vis/units/languageConverter",[],(function(){var e={dk:"da","es-la":"es",fn:"fi",gr:"el",hg:"hu",nw:"no",vn:"vi",zhs:"zh",zht:"zh"};return{convert:function(t){return t=t.toLowerCase(),e[t]||t}}})),define("vis/animations/InPlayFacts",["require","vis/units/LocalisationHandlerLocal","vis/units/languageConverter","vis/units/MatchContext","shared/utils"],(function(e){var t,i,n,s,o,r=e("vis/units/LocalisationHandlerLocal"),a=e("vis/units/languageConverter"),l=e("vis/units/MatchContext"),c=e("shared/utils").splitGetParameters(),u=1e3*+c.ipftimeout||3e4,h=1e3*+c.betslipStopTime||3e3,d="true"===window.betslip&&"false"!==c.betslip,p="",m=!1,f=[],g=[2,8,64,256,1024],v=function(){this.mediator=window.mediator,this.trackEvent=window.analytics.trackEvent,this.initializeContainers(),this.bindListeners(),this.$el.closeButton.on("click",this.hideIpf.bind(this))};return v.prototype.initializeContainers=function(){var e=$("#inplay-facts-container");this.$el={container:e,message:e.find("#inplay-facts-message"),color1:e.find("#inplay-facts-team-color1"),color2:e.find("#inplay-facts-team-color2"),ipfBox:e.find("#inplay-facts-box"),closeButton:e.find("#inplay-facts-exit-button"),singleMessages:e.find(".inplay-facts-message-single")},t=a.convert(r.lang),n=l.isUsSport,this.colors={home:{color1:l.homeColor1,color2:l.homeColor2},away:{color1:l.awayColor1,color2:l.awayColor2}},d&&(this.$el.singleMessages.append('<span class="inplay-facts-betslip"></span>'),this.$el.container.addClass("betslip"))},v.prototype.bindListeners=function(){this.mediator.subscribe("ipf:message",(function(e){-1!==g.indexOf(o)&&e&&(s=e,m=!0,d?this.sendMessage("betslipRequest"):this.update())}),null,this),this.mediator.subscribe("app:message",(function(e){o=e.TickerStateId})),this.mediator.subscribe("match:period-end",this.hideIpf,null,this),this.mediator.subscribe("data:colors",(function(e){this.colors.home.color1="#"+e.home.Color1,this.colors.home.color2="#"+e.home.Color2,this.colors.away.color1="#"+e.away.Color1,this.colors.away.color2="#"+e.away.Color2}),null,this),this.mediator.subscribe("data:send-GA-stats",this.trackEvents),d&&(window.addEventListener("message",function(e){this.onBetslipMessage(e)}.bind(this)),this.$el.ipfBox.on("click",this.sendMessage.bind(this,"betslipClick")),this.$el.ipfBox.on("click",this.trackEvents.bind(this,"IPF-BETSLIP","click")),this.$el.ipfBox.on("mouseenter",this.trackEvents.bind(this,"IPF-BETSLIP","mouseover")))},v.prototype.showIpf=function(){clearTimeout(i),this.displayStats(!1),this.$el.container.fadeIn(100),this.animateMessage(),i=setTimeout(this.hideIpf.bind(this),u)},v.prototype.hideIpf=function(){clearTimeout(i),this.clearAnimationTimeouts(),this.$el.container.fadeOut(100),this.displayStats(!0),s=void 0},v.prototype.trackEvents=function(e,t){this.mediator.publish("data:send-GA-stats",{eventCategory:e,eventAction:t,eventLabel:[window.customerId,window.uuid,window.homeTeam,window.awayTeam].join("_")})},v.prototype.displayStats=function(e){$("#stats-inner-container").css("visibility",e?"visible":"hidden")},v.prototype.clearAnimationTimeouts=function(){for(var e=f.length;e--;)clearTimeout(f[e]);f=[]},v.prototype.animateMessage=function(){var e=this.$el.message,t=e.find(".inplay-facts-message-single"),i=e.find(".inplay-facts-betslip"),n=e.parent().width(),s=t.first().outerWidth(!0);function o(t,i,n){e.finish(),e.css({left:t}),e.animate({left:i+"px"},n,"linear")}function r(s){f.push(setTimeout((function r(){var a=t.first().find(".inplay-facts-text").outerWidth(!0),l=-a+n-i.outerWidth(!0),c=-18*l,u=s?h:3e3;s&&i.removeClass("inplay-facts-betslip--change"),o(0,l,c),f.push(setTimeout((function(){s&&i.first().text()!==p&&(i.addClass("inplay-facts-betslip--change"),i.text(p),a=t.first().find(".inplay-facts-text").outerWidth(!0),l=-a+(n-i.outerWidth(!0)),e.css({left:l})),f.push(setTimeout((function(){var e=-t.first().outerWidth(!0),i=-18*(e-l);o(l,e,i),f.push(setTimeout((function(){r()}),i))}),u))}),c+50))}),6e3))}$(t[1]).show(),$(t[2]).show(),e.finish(),e.css({left:0}),this.clearAnimationTimeouts(),d||s>n?r(!0):($(t[1]).hide(),$(t[2]).hide())},v.prototype.update=function(){for(var e,i=s.Facts.length,o={},r="",a=this.$el.message.find(".inplay-facts-text"),l=s.TeamIndication===(n?"a":"h")?"home":"away",c=0;c<i;c++)(e=s.Facts[c].Language.toLowerCase())!==t&&"en"!==e||(o[e]=s.Facts[c].Text);(r=o[t]||o.en)&&(r=$("<div>").html(r).text(),r=$("<div>").html(r).text(),a.html(r),this.$el.color1.css({"background-color":this.colors[l].color1}),this.$el.color2.css({"background-color":this.colors[l].color2}),this.showIpf(),m=!1,this.trackEvents("IPF-BETSLIP","view"))},v.prototype.sendMessage=function(e){window.top.postMessage({action:e,fixtureUuid:window.uuid,type:s.MarketType,outcome:s.Outcome},"*")},v.prototype.onBetslipMessage=function(e){var t=this.$el.message.find(".inplay-facts-betslip"),i=e.data;s&&i&&i.response&&"betslipResponse"===i.action&&i.fixtureUuid===window.uuid&&i.type===s.MarketType&&(m&&(this.update(),t.text(i.response)),p=i.response)},v})),define("vis/animations/GoalVisualisation",["require","vis/units/LocalisationHandlerLocal"],(function(e){var t=e("vis/units/LocalisationHandlerLocal"),i=function(){this.mediator=window.mediator,this.initializeContainers(),this.bindListeners(),this.collapsed=!1};return i.prototype.initializeContainers=function(){var e=$("#goal-block-container");this.$el={container:e,goalTitleWrapper:e.find("#goal-title-wrapper"),goalTitle:e.find("#goal-title"),teamName:e.find("#goal-team-name"),teamNameOverlay:e.find("#goal-team-name-overlay"),teamNameContainer:e.find("#goal-team-name-wrapper"),overlay:e.find("#goal-overlay"),goalTeamContainer:e.find("#goal-team-name-container"),homeActualCount:e.find("#goal-score-home-value-current"),homePreviousCount:e.find("#goal-score-home-value-previous"),awayActualCount:e.find("#goal-score-away-value-current"),awayPreviousCount:e.find("#goal-score-away-value-previous")}},i.prototype.bindListeners=function(){var e=this;this.mediator.subscribe("pitch:collapsed",(function(t){e.collapsed=t})),this.mediator.subscribe("data:colors",(function(t){e.homeColor="#"+t.home.MainColor,e.awayColor="#"+t.away.MainColor}))},i.prototype.launch=function(e,i){var n,s=this;this.$el.goalTitle.text(t.getEventCodeById(1029)),this.collapsed?(e.score=i.ScoreHome+" - "+i.ScoreAway,this.mediator.publish("goal:redirect:info-block",{event:e,message:i})):(n="home"===e.direction,this.$el.container.toggleClass("goal-active",!0),s.$el.homeActualCount.text(i.ScoreHome),s.$el.awayActualCount.text(i.ScoreAway),n?(s.$el.teamName.css({"border-bottom-color":s.homeColor}),s.$el.homePreviousCount.text(i.ScoreHome-1),s.$el.homePreviousCount.show(),s.$el.awayActualCount.show()):(s.$el.teamName.css({"border-bottom-color":s.awayColor}),s.$el.awayPreviousCount.text(i.ScoreAway-1),s.$el.awayPreviousCount.show(),s.$el.homeActualCount.show()),this.$el.overlay.fadeTo(300,1,(function(){s.$el.goalTeamContainer.show(),s.$el.goalTitleWrapper.fadeIn(300,(function(){s.$el.teamName.show(),s.$el.teamNameOverlay.show(),s.$el.teamNameContainer.animate({top:0},300,(function(){n?(s.$el.homeActualCount.fadeIn(1e3),s.$el.homePreviousCount.fadeOut(1e3)):(s.$el.awayActualCount.fadeIn(1e3),s.$el.awayPreviousCount.fadeOut(1e3))}))}))})),this.$el.teamName.html(e.teamName))},i.prototype.destroy=function(){this.$el.container.removeAttr("class"),this.$el.teamNameContainer.removeAttr("style"),this.$el.goalTitleWrapper.hide(),this.$el.homePreviousCount.hide(),this.$el.awayPreviousCount.hide(),this.$el.homeActualCount.hide(),this.$el.awayActualCount.hide()},i.prototype.hide=function(e){var t=this;this.$el.container.css({opacity:1,"-webkit-animation":"none","-moz-animation":"none","-o-animation":"none","-ms-animation":"none",animation:"none"}),this.$el.container.fadeOut(e,(function(){t.destroy()}))},i.prototype.stopHiding=function(){this.$el.container.stop()},i})),define("vis/animations/BottomStats",["require","vis/units/StatsHandlerLocal","vis/units/MatchContext"],(function(e){var t=e("vis/units/StatsHandlerLocal"),i=e("vis/units/MatchContext"),n=function(){this.mediator=window.mediator,this.stats={},this.collapsed=!1,this.initializeContainers(),this.bindListeners()};return n.prototype.initializeContainers=function(){var e=$("#stats-container");this.$el={container:e,homeTeam:e.find("#stats-team-home"),awayTeam:e.find("#stats-team-away"),homeActualCount:e.find("#stats-score-home-current"),homePreviousCount:e.find("#stats-score-home-previous"),awayActualCount:e.find("#stats-score-away-previous"),awayPreviousCount:e.find("#stats-score-away-current")}},n.prototype.bindListeners=function(){var e=this;this.mediator.subscribe("context:ready",(function(){e.initialize()})),this.mediator.subscribe("app:statistics",(function(t){t&&(e.stats=t)})),this.mediator.subscribe("pitch:collapsed",(function(t){e.collapsed=t}))},n.prototype.launch=function(e,i){var n,s,o,r;if(!this.collapsed&&(o=t.matchStatType(i.EventCodeId))){"YellowCards"===o||"RedCards"===o?(r="YellowCards"===o?"yellow":"red",this.$el.container.toggleClass("card-"+r+"-stats-"+e.direction,!0)):this.$el.container.toggleClass("shot-stats-"+e.direction,!0);try{n=this.stats[o][0],s=this.stats[o][1]}catch(e){return void this.$el.onArrowElement.toggleClass("wo-stats",!0)}this.$el.homeActualCount.text(n),this.$el.awayActualCount.text(s),"home"===e.direction?(this.$el.homePreviousCount.text(n-1),this.$el.homePreviousCount.show(),this.$el.homeActualCount.fadeIn(1e3),this.$el.homePreviousCount.fadeOut(1e3),this.$el.awayActualCount.show()):(this.$el.awayPreviousCount.text(s-1),this.$el.awayPreviousCount.show(),this.$el.awayActualCount.fadeIn(1e3),this.$el.awayPreviousCount.fadeOut(1e3),this.$el.homeActualCount.show())}},n.prototype.destroy=function(){this.$el.container.removeAttr("style"),this.$el.container.removeAttr("class"),this.$el.homePreviousCount.hide(),this.$el.awayPreviousCount.hide(),this.$el.homeActualCount.hide(),this.$el.awayActualCount.hide()},n.prototype.hide=function(e){var t=this;this.collapsed||this.$el.container.fadeOut(e,(function(){t.destroy()}))},n.prototype.sthomeTeam.html(i.homeTeamAbbr),this.$el.awayTeam.html(i.awayTeamAbbr)},n})),define("vis/units/StatisticsScreen",["require","vis/units/MatchContext","vis/units/LocalisationHandlerLocal","units/Scrollbar"],(function(e){var t=e("vis/units/MatchContext"),i=e("vis/units/LocalisationHandlerLocal"),n=e("units/Scrollbar");function s(e){var t,n=this;for(this.mediator=window.mediator,this.localisationHandler=i,this.stats=e.stats,this.displayPeriodicalStats=!0,this.$el={},this.$el.container=$("#stats-screen"),this.$el.homeTeam=this.$el.container.find("#ss-home-team"),this.$el.awayTeam=this.$el.container.find("#ss-away-team"),this.$el.title=this.$el.container.find("#stats-screen-title"),this.$el.type=this.$el.container.find("#stats-screen-type"),this.$el.statsBody=this.$el.container.find("#stats-screen-body"),this.$el.periodical=this.$el.container.find("#stats-periodical"),this.$el.homeStatsColor1=this.$el.statsBody.find(".ss-home-bar .bar-filled-color1"),this.$el.homeStatsColor2=this.$el.statsBody.find(".ss-home-bar .bar-filled-color2"),this.$el.awayStatsColor1=this.$el.statsBody.find(".ss-away-bar .bar-filled-color1"),this.$el.awayStatsColor2=this.$el.statsBody.find(".ss-away-bar .bar-filled-color2"),this.$el.lines=[],this.statHeaders=this.initializeStats(),this.availableStatsIndexes=[],this.itemsCount=this.stats.length,this.type="",t=0;t<this.itemsCount;t++)this.$el.lines[t]={},this.$el.lines[t].container=this.$el.container.find("#ss-"+t),this.$el.lines[t].title=this.$el.lines[t].container.find(".ss-title"),this.$el.lines[t].homeBar=this.$el.lines[t].container.find(".ss-home-bar .bar-filled"),this.$el.lines[t].awayBar=this.$el.lines[t].container.find(".ss-away-bar .bar-filled"),this.$el.lines[t].homeValue=this.$el.lines[t].container.find(".ss-home-value"),this.$el.lines[t].awayValue=this.$el.lines[t].container.find(".ss-away-value");this.mediator.subscribe("app:match-info",(funthis.mediator.subscribe("app:statistics",(function(e){e&&(n.stats=e)})),this.mediator.subscribe("app:animation-event",(function(){clearTimeout(n.timeout),delete n.timeout,n.hide()})),this.mediator.subscribe("csb:reset-visualisation",(function(){clearTimeout(n.timeout),delete n.timeout,n.periodicalStats=void 0,n.hide()})),this.mediator.subscribe("stats:periodical",(function(e){void 0!==e&&e.hasOwnProperty("data")&&(n.periodicalStats=e.data)})),this.mediator.subscribe("app:statistics-detail-update",(function(e){n.$el.type.text(" - "+n.localisationHandler.getLocaleString(e.type))})),this.mediator.publish("app:get-stat-names"),this.initialized=!1,this.collapsed=!1,this.mediator.subscribe("pitch:collapsed",(function(e){n.collapsed=e})),this.mediator.subscribe("cp:view-switched-to-vis",this.showScrollbar.bind(this))}s.prototype.showScrollbar=function(){var e=this;setTimeout((function(){n.isInitialized(e.$el.statsBody)?n.update(e.$el.statsBody):n.init(e.$el.statsBody)}),20)},s.prototype.launch=function(e){var i=this;if(clearTimeout(this.timeout),delete this.timeout,!e.matchStarted&&!t.isTestGame)return!1;this.$el.homeStatsColor1.css({"background-color":t.homeColor1}),this.$el.homeStatsColor2.css({"background-color":t.homeColor2}),this.$el.awayStatsColor1.css({"background-color":t.awayColor1}),this.$el.awayStatsColor2.css({"background-color":t.awayColor2}),this.collapsed||(this.updateStates(this.stats),this.type=void 0,this.$el.title.text(""),e.matchEnded?this.$el.title.text(this.localisationHandler.getLocaleString("FULLTIME")):"gameSuspended"!==e.type?this.$el.title.text(this.localisationHandler.getLocaleString(e.type)||e.eventCode):(this.$el.title.text(this.localisationHandler.getLocaleString("gameSuspended")),this.$el.title.text(this.$el.title.text()+" - "+this.localisationHandler.getLocaleString(e.type))),e.classNames.length>1?this.timeout=setTimeout((function(){i.mediator.publish("app:hide-animation",e),i.mediator.publish("app:should-queue-timeout",!1),delete i.timeout,o-be-shown"),i.timeout=setTimeout((function(){i.show(e),delete i.timeout}),1e3)}),3e3):this.show(e))},s.prototype.show=function(e){var t;if(t="object"==typeof e&&e&&e.number&&e.number<this.pagesCount?e.number:0,this.goToPage(t),void 0===this.periodicalStats&&this.mediator.publish("stats:getPeriodical"),void 0!==this.periodicalStats&&(this.$el.periodical.toggleClass("visible",this.displayPeriodicalStats),this.$el.periodical.html(this.getPeriodicasStatsContainer(this.periodicalStats))),this.$el.container.toggleClass("stats-screen-on",!0),$("#animation-background").hasClass("penalty-shootout")){var i=$("#root-container").height()-$("#stats-screen-body").offset().top-$("#vis-penalty-template").height()-15;this.$el.statsBody.height(i)}this.showScrollbar()},s.prototype.goToPage=function(){for(var e,i,n,s,o,r,a=this,l=this.itemsCount,c=function(e,t){setTimeout((function(){a.$el.lines[e].homeValue.text(t[0]),a.$el.lines[e].awayValue.text(t[1])}),0)},u=0;u<l;u++)r=this.$el.lines[u].container,o=this.statHeaders[u],r.toggleClass("stat-item-invisible",!1),o.name=this.localisationHandler.getLocaleStatsValue(o.id),o.name?this.$el.lines[u].title.html(o.name):this.$el.lines[u].title.html(""),void 0!==(s=this.stats[o.id])&&(c(u,s),n=Math.max(s[0],s[1]),i=s[0]/n,e=s[1]/n,0!==n&&(i=s.ratio?s.ratio[0]:i.toFixed(2),e=s.ratio?s.ratio[1]:e.toFixed(2),this.$el.lines[u].homeBar.css("width",100*i+"%"),this.$el.lines[u].awayBar.css("width",100*e+"%"),this.$el.lines[u].homeBar.css({"background-color":t.homeColor}),this.$el.lineon(){this.$el.container.removeAttr("class"),clearInterval(this.interva{t.$el.container.removeAttr("style"),t.$el.container.removeAttr("class")}))},s.prototype.stopHiding=function(){this.$el.container.stop()},s.prototype.initialize=function(e){!this.initialized&&e&&(this.initialized=!0)};var o=function(){for(var e=[],t=0;t<this.statHeaders.length;t++)!0!==this.statHeaders[t].available||this.statHeaders[t].turnedOff||e.push(t);return e},r=function(e){for(var t=0;t<this.statHeaders.length;t++)if(this.statHeaders[t].id===e)return t;return!1};return s.prototype.updateStates=function(e){for(var t,i=0;i<this.statHeaders.length;i++)this.statHeaders[i].available=!1;for(var n in e)void 0===e[n][0]&&void 0===e[n][1]||!1!==(t=r.call(this,n))&&(this.statHeaders[t].available=!0);this.availableStatsIndexes=o.call(this)},s.prototype.getPeriodicasStatsContainer=function(e){for(var t,i,n,s,o=$('<div class="periodical-stat-item"></div>'),r=0;r<e.length;r++)s=$('<div class="periodical-stat-container"></div>'),n=$('<div class="periodical-stat-item-dash">-</div>'),t=$('<div class="periodical-stat-item-text"></div>').html(e[r].text),i=$('<div class="periodical-stat-item-value"></div>').html(e[r].value),s.append(n).append(t).append(i),o.append(s);return o},s.prototype.initializeStats=function(){return this.stats},s})),define("vis/units/StatisticsScreenLocal",["require","vis/unr t=e("vis/units/StatisticsScreen");function i(){t.apply(this,arguments)}return i.prototype=t.prototype,i.prototype.getPeriodicasStatsContainer=function(e){for(var t,i,n,s=$('<div class="periodical-soccer-stat-item"></div>'),o=0;o<e.length;o++)t=$('<div class="periodical-stat-text-container"></div>'),n=$('<div class="periodical-stat-item-dash">-</div>'),i=$('<div class="periodical-stat-item-text"></div>').html(e[o]),t.append(n).append(i),s.append(t);return s},i})),define("vis/units/StatsHeaders",[],(function(){var e=[];return e.push({id:"Shots",available:!0}),e.push({id:"ShotsOnTarget",available:!0}),e.push({id:"ShotsBlocked",available:!0}),e.push({id:"DangerousAttacks",available:!0}),e.push({id:"Corners",available:!0}),e.push({id:"FreeKicks",available:!0}),e.push({id:"Offside",available:!0,negative:!0}),e.push({id:"ThrowIn",available:!0}),e.push({id:"GoalKick",available:!0}),e.push({id:"YellowCards",available:!0,negative:!0}),e.push({id:"RedCards",withinCSBOnly:!0,available:!0,negative:!0}),e.push({id:"Fouls",available:!0,negative:!0}),e.push({id:"Attacks",turnedOff:!0,available:!1}),e.push({id:"ShotsWoodwork",turnedOff:!0,available:!1}),e.push({id:"ShotsOffTarget",turnedOff:!0,available:!1}),e.push({id:"Substitutions",turnedOff:!0,available:!1}),e})),define("vis/units/ZoneHandler",["require","shared/utils"],(function(e){var t=e("shared/utils"),i=function(){};return i.prototype.recognizeZone=function(e){if(e){var i,n,s,o,r={},a=t.findEventInRecent(e.RelatedEventNumber);switch("TI"!==e.Zone.substr(0,2)&&(a||(n=e.Zone.substr(0,2))&&(a=this.findLatestSimilarEvent(n)),a&&(i="1"===a.EventCodeId.toString().charAt(0)?"home":"away")),e.Zone){case"PEN1":r={classNames:["zone"],type:"penalty",zone:"",direction:e.direction,related:a};break;case"MPEN1":r={classNames:["zone"],type:"missed-penalty",zone:"",direction:e.direction,related:a};break;case"CR_L":r={classNames:["zone"],type:"corner",zone:"left",direction:i,related:a};break;case"CR_R":r={classNames:["zone"],type:"corner",zone:"right",direction:i,related:a};break;case"FK1":case"FK2":case"FK3L":case"FK3R":case"FK4":case"FK5":case"FKgk":o=-1!==(s=e.Zone.indexOf("FK"))?e.Zone.substr(s+2):0,e.direction&&(i=e.direction),r={classNamess:["zone"],type:"free-kick",zone:o,direction:i,related:a,oppositeHalf:o&&0!==parseInt(o,10)&&5!==parseInt(o,10)&&"gk"!==o};break;case"TI1":case"TI2":case"TI3":e.direction?i=e.direction:a&&(i="1"===a.EventCodeId.toString().charAt(0)?"home":"away"),r={classNames:["zone"],type:"throw-in",zone:e.Zone.charAt(2),direction:i,related:a};break;default:r={classNames:["none"]}}return r}return{classNames:["none"]}},i.prototype.findLatestSimilarEvent=function(e){var t,i,n,s=[];if("CR"===e?(s[0]=1025,s[1]=2049):"FK"===e&&(s[0]=1028,s[1]=2052),"restart"===e){for(n=[1024,1026,1051,2048,2050,2075],t=0;t<window.recentEvents.length;t++)for(i=0;i<n.length;i++)if(window.recentEvents[t].EventCodeId===n[i])return window.recentEvents[t]}else if(e)for(t=0;t<window.recentEvents.length;t++)if(window.recentEvents[t].EventCodeId===s[0]||window.recentEvents[t].EventCodeId===s[1])return window.recentEvents[t];return!1},i.prototype.findBallPositionForTI=function(e){var t;for(t=0;t<window.recentEvents.length;t++)switch(parseInt(window.recentEvents[t].EventCodeId,10)){case 1051:case 2057:case 2063:case 2064:case 2065:case 2080:case 2076:case 2050:return"home"===e?"1":"3";case 1024:case 2048:return"2";case 1052:case 1033:case 1039:case 1040:case 1041:case 1056:case 1026:case 2075:return"home"===e?"3":"1"}return!1},new i})),define("vis/units/SharedMessageHandler",[],(function(){function e(){}return e.prototype.recognizeEvent=function(){},e.prototype.applyMatchStateToEventItem=function(e,t){e.matchStarted=void 0!==t.TickerStateId&&1!==t.TickerStateId,e.matchEnded=16===t.TickerStateId},e})),define("vis/units/MessageHandler",["require","shared/utils","vis/units/ZoneHandler","vis/units/LocalisationHandlerLocal","vis/units/SharedMessageHandler"],(function(e){var t=e("shared/utils"),i=e("vis/units/ZoneHandler"),n=e("vis/units/LocalisationHandlerLocal"),s=e("vis/units/SharedMessageHandler");function o(){this.scoreBeforePenaltiesHome=0,this.scoreBeforePenaltiesAway=0,this.penaltyShootout=!1,this.states={kickOffRendered:!1}}return o.prototype=new s,o.prototype.setScoreBeforePenalties=function(e){var t;if(e.Timeline)for(t=0;t<e.Timeline.length;t++)switch(e.Timeline[t].EID){case 8:case 18:case 19:return void(this.penaltyShootout=!0);case 1029:this.scoreBeforePenaltiesHome++;break;case 2053:this.scoreBeforePenaltiesAway++;break;case 1030:this.scoreBeforePenaltiesHome--;break;case 2054:this.scoreBeforePenaltiesAway--}},o.prototype.recognizeEvent=function(e){var s,o;switch(window.recentEvents.unshift(e),window.recentEvents.length>10&&window.recentEvents.pop(),this.setScoreBeforePenalties(e),parseInt(e.EventCodeId,10)){case 1e4:s={classNames:["statsScreen"],direction:"none",arrows:-1};break;case 10001:void 0!==e.KickOff&&null!==e.KickOff&&!1===this.states.kickOffRendered?(s={animation:!1,action:"kickOff",kickOff:e.KickOff},this.states.kickOffRendered=!0):s={classNames:null};break;case 10002:s={classNames:["infoBlock"],type:"periodical-stats",stats:e.PeriodicalStats,eventCode:e.StatsText};break;case 1:window.mediator.trigger("match:period-end",{type:"first-half",minutes:45,midrollType:2,eventCodeId:1}),s={classNames:["infoBlock","statsScreen"],type:"half-time",direction:"none",arrows:-1,time:-1,extendedTeamName:!0};break;case 3:window.mediator.trigger("match:period-end",{type:"second-half",minutes:90,midrollType:3,eventCodeId:3}),s={classNames:["infoBlock","statsScreen"],type:"full-time",direction:"none",arrows:-1,time:-1,extendedTeamName:!0};break;case 20:window.mediator.trigger("match:period-end",{type:"second-half",minutes:90,midrollType:7,eventCodeId:3}),s={classNames:["infoBlock","statsScreen"],type:"full-time",direction:"none",arrows:-1,time:-1,extendedTeamName:!0};break;case 5:window.mediator.trigger("match:period-end",{type:"first-extra",minutes:105,midrollType:4,eventCodeId:5}),s={classNames:["infoBlock","statsScreen"],type:"end-extra-1",direction:"none",arrows:-1,time:-1,extendedTeamName:!0};break;case 7:window.mediator.trigger("match:period-end",{type:"second-extra",minutes:120,midrollType:5,eventCodeId:7}),s={classNames:["infoBlock","statsScreen"],type:"end-extra-2",direction:"none",arrows:-1,time:-1,extendedTeamName:!0};break;case 0:s={classNames:["infoBlock"],type:"ko-1",direction:"none",arrows:-1,time:0};break;case 2:s={classNames:["infoBlock"],type:"ko-2",direction:"none",arrows:-1,time:45};break;case 4:s={classNames:["infoBlock"],type:"ko-extra-1",direction:"none",arrows:-1,time:90};break;case 6:s={classNames:["infoBlock"],type:"ko-extra-2",direction:"none",arrows:-1,time:105};break;case 8:s={classNames:["infoBlock","penaltyShootout"],type:"ko-penalty",direction:"none",arrows:-1},this.penaltyShootout=!0;break;case 9:window.mediator.trigger("match:period-end",{type:"penalty-shootout",eventCodeId:9,midrollType:6}),s={classNames:["infoBlock","statsScreen"],type:"end-penalty",direction:"none",arrows:-1},this.penaltyShootout=!1;break;case 1044:case 10:case 12:case 14:case 16:s={classNames:["infoBlock"],type:"kick-off",direction:"home",arrows:-1};break;case 2068:case 11:case 13:case 15:case 17:s={classNames:["infoBlock"],type:"kick-off",direction:"away",arrows:-1};break;case 1122:s={classNames:["infoBlock"],type:"player-injured",direction:"home",arrows:-1};break;case 2146:s={classNames:["infoBlock"],type:"player-injured",direction:"away",arrows:-1};break;case 132:s={classNames:["infoBlock"],type:"player-injured",arrows:-1,direction:"none"};break;case 133:s={classNames:[],type:"playersAreComingOut",isStatDetail:!0,kickOff:e.KickOff};break;case 134:s={classNames:[],type:"enteringPitch",isStatDetail:!0,kickOff:e.KickOff};break;case 135:s={classNames:[],type:"anthemSinging",isStatDetail:!0,kickOff:e.KickOff};break;case 136:s={classNames:[],type:"shakingHands",isStatDetail:!0,kickOff:e.KickOff};break;case 137:s={classNames:[],type:"coinToss",isStatDetail:!0,kickOff:e.KickOff};break;case 138:s={classNames:[],type:"minuteOfSilent",isStatDetail:!0,kickOff:e.KickOff};break;case 139:s={classNames:[],type:"prizeGivingCeremony",isStatDetail:!0,kickOff:e.KickOff};break;case 140:s={classNames:[],type:"photoTaking",isStatDetail:!0,kickOff:e.KickOff};break;case 141:window.mediator.trigger("midroll-event",{delay:3,eventCodeId:141,midrollType:1}),s={classNames:[],type:"gameAboutToStart",isStatDetail:!0,kickOff:e.KickOff};break;case 148:(o=t.findEvent195inRecentEvents("restart"))&&(s=this.recognizeEvent(o))?s.related=o:s={classNames:null};break;case 150:s={classNames:["infoBlock"]};break;case 262:(s=i.recognizeZone(e))||(s={classNames:null});break;case 1024:s={classNames:["possessionArrow"],type:"attack",arrows:4,direction:"home"};break;case 2048:s={classNames:["possessionArrow"],type:"attack",arrows:4,direction:"away"};break;case 1026:s={classNames:["possessionArrow","bottomStats"],statsType:n.getLocaleStatsValue(1026),type:"danger",arrows:5,direction:"home",stats:!0};break;case 2050:s={classNames:["possessionArrow","bottomStats"],statsType:n.getLocaleStatsValue(2050),type:"danger",arrows:5,direction:"away",stats:!0};break;case 1051:s={classNames:["possessionArrow"],type:"safe",arrows:3,direction:"home"};break;case 2075:s={classNames:["possessionArrow"],type:"safe",arrows:3,direction:"away"};break;case 1033:case 1056:s={classNames:["shot","bottomStats","possessionArrow"],type:"shot",collapsedEventCode:n.getEventCodeById(1033),statsType:"SHOTS",arrows:5,direction:"home",stats:!0,postponeOnPenaltyShootout:!0};break;case 1039:s={classNames:["shot","bottomStats","possessionArrow"],type:"shot",collapsedEventCode:n.getEventCodeById(1033),statsType:n.getLocaleStatsValue(1039),arrows:3,arrowsStill:!0,direction:"home",shotType:"on_target",stats:!0,postponeOnPenaltyShootout:!0};break;case 1040:s={classNames:["shot","bottomStats","possessionArrow"],type:"shot",collapsedEventCode:n.getEventCodeById(1033),statsType:n.getLocaleStatsValue(1040),arrows:4,hasChevronsOffset:!0,direction:"home",shotType:"off_target",stats:!0,postponeOnPenaltyShootout:!0};break;case 1041:s={classNames:["shot","bottomStats","possessionArrow"],type:"shot",collapsedEventCode:n.getEventCodeById(1033),arrows:4,hasChevronsOffset:!0,direction:"home",shotType:"hit_woodwork",statsType:n.getLocaleStatsValue(1041),stats:!0,postponeOnPenaltyShootout:!0};break;case 1058:s={classNames:["shot","bottomStats","possessionArrow"],type:"shot",collapsedEventCode:n.getEventCodeById(1033),statsType:n.getLocaleStatsValue(1058),arrows:4,hasChevronsOffset:!0,direction:"home",shotType:"shot_blocked",stats:!0,postponeOnPenaltyShootout:!0};break;case 2057:case 2080:s={classNames:["shot","bottomStats","possessionArrow"],type:"shot",collapsedEventCode:n.getEventCodeById(1033),statsType:"SHOTS",arrows:5,direction:"away",stats:!0,postponeOnPenaltyShootout:!0};break;case 2063:s={classNames:["shot","bottomStats","possessionArrow"],type:"shot",collapsedEventCode:n.getEventCodeById(1033),statsType:n.getLocaleStatsValue(2063),arrows:3,arrowsStill:!0,direction:"away",shotType:"on_target",stats:!0,postponeOnPenaltyShootout:!0};break;case 2064:s={classNames:["shot","bottomStats","possessionArrow"],type:"shot",collapsedEventCode:n.getEventCodeById(1033),statsType:n.getLocaleStatsValue(2064),arrows:4,hasChevronsOffset:!0,direction:"away",shotType:"off_target",stats:!0,postponeOnPenaltyShootout:!0};break;case 2065:s={classNames:["shot","bottomStats","possessionArrow"],type:"shot",collapsedEventCode:n.getEventCodeById(1033),arrows:4,hasChevronsOffset:!0,direction:"away",shotType:"hit_woodwork",statsType:n.getLocaleStatsValue(2065),stats:!0,postponeOnPenaltyShootout:!0};break;case 2082:s={classNames:["shot","bottomStats","possessionArrow"],type:"shot",collapsedEventCode:n.getEventCodeById(1033),statsType:n.getLocaleStatsValue(2082),arrows:4,hasChevronsOffset:!0,direction:"away",shotType:"shot_blocked",stats:!0,postponeOnPenaltyShootout:!0};break;case 1043:s={classNames:["shot","infoBlock","bottomStats"],type:"offside",direction:"home",shotType:"offside"};break;case 2067:s={classNames:["shot","infoBlock","bottomStats"],type:"offside",direction:"away",shotType:"offside"};break;case 1042:case 1045:case 1057:case 1059:s={classNames:["infoBlock"],direction:"home",arrows:0,stats:!0};break;case 142:s={classNames:["infoBlock"],direction:"none",arrows:0,type:"missed",stats:!0,collapsedEventCode:n.getLocaleString("missed")};break;case 1060:s={classNames:["infoBlock"],direction:"home",arrows:0,type:"missed",stats:!0,collapsedEventCode:n.getLocaleString("missed"),zone:!0,zonePos:1,zoneType:"MPEN"},mediator.trigger("app:penalty-shootout-shot",{team:"home",isGoal:!1});break;case 2084:s={classNames:["infoBlock"],direction:"away",arrows:0,type:"missed",stats:!0,collapsedEventCode:n.getLocaleString("missed"),zone:!0,zonePos:1,zoneType:"MPEN"},mediator.trigger("app:penalty-shootout-shot",{team:"away",isGoal:!1});break;case 1027:case 1028:s={classNames:["infoBlock"],direction:"home",arrows:0,zone:!0,stats:!0};break;case 2051:case 2052:s={classNames:["infoBlock"],direction:"away",arrows:0,zone:!0,stats:!0};break;case 1025:s={classNames:["infoBlock","bottomStats"],direction:"home",arrows:0,stats:!0,statsType:n.getLocaleStatsValue(1025)};break;case 2049:s={classNames:["infoBlock","bottomStats"],direction:"away",arrows:0,stats:!0,statsType:n.getLocaleStatsValue(2049)};break;case 2066:case 2069:case 2081:case 2083:s={classNames:["infoBlock"],direction:"away",arrows:0,stats:!0};break;case 1029:s={classNames:["goal"],direction:"home",arrows:0},!1===this.penaltyShootout?this.scoreBeforePenaltiesHome++:mediator.trigger("app:penalty-shootout-shot",{team:"home",isGoal:!0});break;case 2053:s={classNames:["goal"],direction:"away",arrows:0},!1===this.penaltyShootout?this.scoreBeforePenaltiesAway++:mediator.trigger("app:penalty-shootout-shot",{team:"away",isGoal:!0});break;case 1031:s={classNames:["infoBlock"],direction:"home",type:"penalty",arrows:0,stats:!0,zone:!0,zonePos:1,zoneType:"PEN"};break;case 18:s={classNames:["infoBlock","penaltyShootout"],direction:"home",type:"penalty",arrows:0,stats:!0,zone:!0,zonePos:1,zoneType:"PEN"},this.penaltyShootout=!0;break;case 2055:s={classNames:["infoBlock"],direction:"away",type:"penalty",arrows:0,stats:!0,zone:!0,zonePos:1,zoneType:"PEN"};break;case 19:s={classNames:["infoBlock","penaltyShootout"],direction:"away",type:"penalty",arrows:0,stats:!0,zone:!0,zonePos:1,zoneType:"PEN"},this.penaltyShootout=!0;break;case 1055:s={classNames:["infoBlock"],direction:"home",type:"substitution",collapsedEventCode:n.getLocaleString("subs"),arrows:0};break;case 2079:s={classNames:["infoBlock"],direction:"away",type:"substitution",collapsedEventCode:n.getLocaleString("subs"),arrows:0};break;case 1034:s={classNames:["infoBlock","bottomStats"],direction:"home",type:"yellow-card",arrows:0,stats:!0};break;case 2058:s={classNames:["infoBlock","bottomStats"],direction:"away",type:"yellow-card",arrows:0,stats:!0};break;case 1032:s={classNames:["infoBlock","bottomStats"],direction:"home",type:"red-card",arrows:0,stats:!0};break;case 2056:s={classNames:["infoBlock","bottomStats"],direction:"away",type:"red-card",arrows:0,stats:!0};break;case 1054:s={classNames:["infoBlock"],direction:"home",arrows:0,stats:!0,zone:!0,zonePos:i.findBallPositionForTI("home"),zoneType:"TI"};break;case 2078:s={classNames:["infoBlock"],direction:"away",arrows:0,stats:!0,zone:!0,zonePos:i.findBallPositionForTI("away"),zoneType:"TI"};break;case 1053:s={classNames:["infoBlock"],direction:"home",arrows:0,stats:!0,zone:!0,zonePos:"gk",zoneType:"FK"};break;case 2077:s={classNames:["infoBlock"],direction:"away",arrows:0,stats:!0,zone:!0,zonePos:"gk",zoneType:"FK"};break;case 1030:s={classNames:["infoBlock"],type:"cancel",direction:"home",description:"confirmedScore",score:e.ScoreHome+"-"+e.ScoreAway,arrows:-1},!1===this.penaltyShootout&&this.scoreBeforePenaltiesHome--;break;case 2054:s={classNames:["infoBlock"],type:"cancel",direction:"away",description:"confirmedScore",score:e.ScoreHome+"-"+e.ScoreAway,arrows:-1},!1===this.penaltyShootout&&this.scoreBeforePenaltiesAway--;break;case 1046:case 2070:s={classNames:["infoBlock"],type:"cancel",direction:"home",description:"confirmedYellowCards",statsType:"YellowCards",arrows:-1};break;case 1047:case 2071:s={classNames:["infoBlock"],type:"cancel",direction:"home",description:"confirmedRedCards",statsType:"RedCards",arrows:-1};break;case 1048:case 2072:s={classNames:["infoBlock"],type:"cancel",direction:"home",description:"confirmedYellowCards",statsType:"YellowCards",arrows:-1};break;case 1049:case 2073:s={classNames:["infoBlock"],type:"cancel",direction:"home",description:"confirmedPenalties",statsType:"Penalties",arrows:-1};break;case 1050:case 2074:s={classNames:["infoBlock"],type:"cancel",direction:"home",description:"confirmedCorners",statsType:"Corners",arrows:-1};break;case 1064:s={classNames:["possessionArrow"],type:"counter-attack",arrows:4,direction:"home"};break;case 2088:s={classNames:["possessionArrow"],type:"counter-attack",arrows:4,direction:"away"};break;default:s={classNames:null}}return this.penaltyShootout&&(s.arrows=-1,e.ScoreHome-=this.scoreBeforePenaltiesHome,e.ScoreAway-=this.scoreBeforePenaltiesAway),this.applyMatchStateToEventItem(s,e),s},o})),define("vis/units/MessageAdapterUsSports",[],(function(){function e(){}return e.prototype.process=function(e){this.processHomeAndAwayTeam(e),this.processHomeAndAwayScore(e),this.processTeamColors(e),this.processForm(e),this.processLineups(e),this.processKeyStatsSummary(e)},e.prototype.processHomeAndAwayScore=function(e){var t,i;e.SCH&&e.SCA&&(t=e.SCH,i=e.SCA,e.SCH=i,e.SCA=t)},e.prototype.processTimeline=function(e){e.T&&e.T.forEach((function(t,i){e.T[i].EID>=this.homeEventsMinNr+1024&&e.T[i].EID<=this.homeEventsMaxNr+1024?e.T[i].EID-=1024:e.T[i].EID>=this.homeEventsMinNr&&e.T[i].EID<=this.homeEventsMaxNr&&(e.T[i].EID+=1024)}),this)},e.prototype.processKeyStatsSummary=function(e){var t,i;e.FORM&&e.FORM.HS&&e.FORM.AS&&(t=JSON.parse(JSON.stringify(e.FORM.HS)),i=JSON.parse(JSON.stringify(e.FORM.AS)),e.FORM.HS=i,e.FORM.AS=t)},e.prototype.processEventNumber=function(e){e.EID>=this.homeEventsMinNr+1024&&e.EID<=this.homeEventsMaxNr+1024?e.EID-=1024:e.EID>=this.homeEventsMinNr&&e.EID<=this.homeEventsMaxNr&&(e.EID+=1024)},e.prototype.processHomeAndAwayTeam=function(e){var t,i,n,s;e.HT&&e.AT&&(t=e.HT,i=e.AT,e.HT=i,e.AT=t,e.HTLA&&e.ATLA?(n=e.HTLA,s=e.ATLA):e.HTLA?n=e.HTLA:e.ATLA&&(s=e.ATLA),e.HTLA&&delete e.HTLA,e.ATLA&&delete e.ATLA,s&&(e.HTLA=s),n&&(e.ATLA=n))},e.prototype.processTeamColors=function(e){e.TK&&e.TK[0].hasOwnProperty("IHT")?(delete e.TK[0].IHT,e.TK[1].IHT=!0):e.TK&&e.TK[1].hasOwnProperty("IHT")&&(delete e.TK[1].IHT,e.TK[0].IHT=!0)},e.prototype.processForm=function(e){var t,i;e.FORM&&e.FORM.HM&&e.FORM.AM&&(t=JSON.parse(JSON.stringify(e.FORM.HM)),i=JSON.parse(JSON.stringify(e.FORM.AM)),e.FORM.HM=i,e.FORM.AM=t)},e.prototype.processLineups=function(e){var t,i,n,s;e.LU&&e.LU.HLU&&e.LU.ALU&&(t=JSON.parse(JSON.stringify(e.LU.HLU)),i=JSON.parse(JSON.stringify(e.LU.HSUB)),n=JSON.parse(JSON.stringify(e.LU.ALU)),s=JSON.parse(JSON.stringify(e.LU.ASUB)),e.LU.HLU=n,e.LU.ALU=t,e.LU.HSUB=s,e.LU.ASUB=i)},e.prototype.processStats=function(e){var t,i,n;if(e.ST)for(var s in e.ST)e.ST.hasOwnProperty(s)&&(t=(n=e.ST[s].split(":"))[0],i=n[1],e.ST[s]=i+":"+t)},e})),define("vis/units/MessageAdapterUsSportsLocal",["require","vis/units/MessageAports");function i(){this.homeEventsMinNr=1024,this.homeEventsMaxNr=1065}return i.prototype=new t,i.prototype.process=function(e){t.prototype.process(e),this.processTimeline(e),this.processTeamData(e),this.initialMessageProcessed=!0,this.processStats(e),this.processEventNumber(e)},i.prototype.processTeamData=function(e){var t,i,n,s,o,r;e.TD&&(e.TD.HA&&(t=JSON.parse(JSON.stringify(e.TD.HA))),e.TD.HG&&(i=JSON.parse(JSON.stringify(e.TD.HG))),e.TD.HV&&(n=JSON.parse(JSON.stringify(e.TD.HV))),e.TD.AA&&(s=JSON.parse(JSON.stringify(e.TD.AA))),e.TD.AG&&(o=JSON.parse(JSON.stringify(e.TD.AG))),e.TD.AV&&(r=JSON.parse(JSON.stringify(e.TD.AV))),e.TD.HA=s,e.TD.HG=o,e.TD.HV=r,e.TD.AA=t,e.TD.AG=i,e.TD.AV=n)},new i})),define("vis/units/MessageAdapter",["require","vis/units/MatchContext","vis/units/MessageAdapterUsSportsLocal"],(function(e){var t=e("vis/units/MatchContext"),i=e("vis/units/MessageAdapterUsSportsLocal");return new function(){var e=[];e.ID="MatchId",e.KO="KickOff",e.HT="HomeTeam",e.HTLA="HomeTeamAbbr",e.AT="AwayTeam",e.ATLA="AwayTeamAbbr",e.EN="EventNumber",e.CPT="CurrentPlaytime",e.CR="ClockRunning",e.FORM="Form",e.SCH="ScoreHome",e.SCA="ScoreAway",e.EID="EventCodeId",e.PI="PlayerInSubstitution",e.PO="PlayerOutSubstitution",e.JI="JerseyInSubstitution",e.JO="JerseyOutSubstitution",e.Z="Zone",e.RE="RelatedEventNumber",e.AMQTS="SentToActiveMQTimestamp",e.ST="Statistics",e.TSID="TickerStateId",e.L="LeagueName",e.STA="StadiumName",e.SN="SportName",e.SI="SportId",e.TK="TeamColors",e.T="Timeline";var n={TI:"TeamIndication",MKT:"MarketType",OUT:"Outcome",M:"CurrentMinute",FCT:"InPlayFacts"},s=[];s.O="Offside",s.AT="Attacks",s.CR="Corners",s.DAT="DangerousAttacks",s.F="Fouls",s.FK="FreeKicks",s.SH="Shots",s.SHW="ShotsWoodwork",s.YC="YellowCards",s.RC="RedCards",s.GK="GoalKick",s.TI="ThrowIn",s.SHG="ShotsOnTarget",s.SHB="ShotsOffTarget",s.SB="ShotsBlocked",s.SUB="Substitutions",s.P="Penalties",s.BA="CounterAttacks";this.process=function(o){var r={};for(var a in t.isUsSport&&i.process(o),o)o.hasOwnProperty(a)&&(r[e[a]]=o[a]);if(o.IPF?r.InPlayFacts=function(e){var t={};for(var i in e.IPF)e.IPF.hasOwnProperty(i)&&(t[n[i]]=e.PF.FCT)?t.Facts=e.IPF.FCT.map((function(e){return{Language:e.L,Text:e.T}})):t.Facts=[],t}(o):r.InPlayFacts=null,o.ST){for(var l in r.Statistics={},s)s.hasOwnProperty(l)&&(r.Statistics[s[l]]="0:0");for(var c in o.ST)o.ST.hasOwnProperty(c)&&(r.Statistics[s[c]]=o.ST[c])}else r.Statistics=null;return r}}})),define("vis/app/enums",[],(function(){return{LogLevels:{all:0,prod:1,preprod:2,debug:3},TickerToSet:{1:0,16:0,2100:0,2101:1,2102:2,2103:3,2104:4,2105:5,2150:6}}})),define("vis/units/logger",["require","vis/app/enums"],(function(e){var t=e("vis/app/enums").LogLevels;function i(){if(window.console&&"function"==typeof window.console.error&&(window.console.error.apply(window.console,Array.prototype.slice.call(arguments)),this.callStack)){var e=new Error;console.error(e.stack)}}function n(){this.callStack=!1}return n.prototype.debug=function(){window.logLevel===t.debug&&i.apply(this,arguments)},n.prototype.prod=function(){window.logLevel>=t.prod&&i.apply(this,arguments)},n.prototype.preprod=function(){window.logLevel>=t.preprod&&i.apply(this,arguments)},n.prototype.always=function(){i.apply(this,arguments)},n.prototype.toggleCallStack=function(e){this.callStack=e},new n})),define("vis/units/FormHandler",[],(function(){function e(){}return e.prototype.calculateResult=function(e,t,i){return e===t?"D":"H"===i?e>t?"W":"L":t>e?"W":"L"},e.prototype.parseDate=function(e){var t=e.split("-").map((function(e){return parseInt(e,10(i,n-1,s)},e.prototype.parseType=function(e){return"H"===e?"home":"away"},e.prototype.parse=function(e){var t=this;function i(e,i){return e.map((function(e){var n=t.parseDate(e.DT);return{team:e.TN,group:e.LN,result:t.calculateResult(e.H,e.A,e.T),homeScore:e.H,awayScore:e.A,direction:i,playedAt:t.parseType(e.T),date:n}}))}if(e)return{HomeHistory:i(e.HM,"home"),AwayHistory:i(e.AM,"away")}},e})),define("vis/units/TestMessageSender",["require","vis/units/MessageAdapter","vis/units/LocalisationHandlerLocal","vis/units/logger","vis/units/FormHandler","shared/utils"],(function(e){var t=e("vis/units/MessageAdapter"),i=e("vis/units/LocalisationHandlerLocal"),n=e("vis/units/logger"),s=e("vis/units/FormHandler"),o=e("shared/utils");function r(){this.mediator=window.mediator,this.localisationHandler=i,this.scoreHome=0,this.scoreAway=0,this.homeTeam="HOME",this.awayTeam="AWAY",this.Events=[],this.messageAdapter=t;var e=this;e.teamInfo={},this.mediator.subscribe("csb:forced-team-names",(function(t){e.teamInfo=t})),this.Events[0]="Start RT1 Start first half",this.Events[1]="HALF TIME",this.Events[2]="Start RT2 Start second half",this.Events[3]="Stop RT2 Stop second half",this.Events[4]="Start OT1 Start first half extra time",this.Events[5]="Stop OT1 Stop first half extra time",this.Events[6]="Start OT2 Start second half extra time",this.Events[7]="Stop OT2 Stop second half extra time",this.Events[8]="Start PEN Start penalty shootout",this.Events[9]="Stop PEN Stop penalty shootout",this.Events[10]="Start RT1 Team 1",this.Events[11]="Start RT1 Team 2",this.Events[12]="Start RT2 Team 1",this.Events[13]="Start RT2 Team 2",this.Events[14]="Start OT1 Team 1",this.Events[15]="Start OT1 Team 2",this.Events[16]="Start OT2 Team 1",this.Events[17]="Start OT2 Team 2",this.Events[18]="Start PEN Team 1",this.Events[19]="Start PEN Team 2",this.Events[128]="Safe Safe",this.Events[129]="Danger",this.Events[132]="Injury Break",this.Events[133]="Players are coming out",this.Events[134]="Players lined up",this.Events[135]="National anthem singing",this.Events[136]="Shake hands",this.Events[137]="Flip coin",this.Events[138]="Minute of silent",this.Events[139]="Prize giving ceremony",this.Events[140]="Photo taking",this.Events[141]="Game about to start",this.Events[142]="Missed Penalty",this.Events[143]="PRC Possible red card",this.Events[144]="PPEN Possible penalty",this.Events[145]="No RC No RC after PRC",this.Events[146]="No Pen No PEN after PPEN",this.Events[147]="Retake Pen Retake Penalty",this.Events[148]="Restart Restart game (eg after injury break)",this.Events[150]="Next Penalty Scorer",this.Events[207]="Possible Free Kick",this.Events[208]="No Free Kick",this.Events[209]="Referee Ball",this.Events[260]="Extra Time Indicates the extra time.",this.Events[524]="Jersey Changed",this.Events[1024]="Attack Home",this.Events[1025]="Corner Home",this.Events[1026]="Dangerous attack Home",this.Events[1027]="Dangerous free kick Home",this.Events[1028]="Free kick Home",this.Events[1029]="Goal Home",this.Events[1030]="Cancel goal Home",this.Events[1031]="Penalty Home",this.Events[1032]="Red card Home",this.Events[1033]="Shot Home",this.Events[1034]="Yellow card Home",this.Events[1039]="Shot on target Home",this.Events[1040]="Shot off target Home",this.Events[1041]="Shot woodwork Home",this.Events[1042]="Foul Home",this.Events[1043]="Offside Home",this.Events[1044]="Kickoff Home",this.Events[1045]="Yellow / red card Home",this.Events[1046]="Cancel yellow / red card Home",this.Events[1047]="Cancel red card Home",this.Events[1048]="Cancel yellow card Home",this.Events[1049]="Cancel penalty Home",this.Events[1050]="Cancel corner Home",this.Events[1051]="Safe Home",this.Events[1052]="Danger Home",this.Events[1053]="Goal kick Home",this.Events[1054]="Throw in Home",this.Events[1055]="Substitution Home",this.Events[1056]="Dangerous shot Home",this.Events[1057]="Shot saved Home",this.Events[1058]="Shot blocked Home",this.Events[1059]="Retake penalty Home",this.Events[1060]="Missed penalty Home",this.Events[2048]="Attack Away",this.Events[2049]="Corner Away",this.Events[2050]="Dangerous attack Away",this.Events[2051]="Dangerous free kick Away",this.Events[2052]="Free kick Away",this.Events[2053]="Goal Away",this.Events[2054]="Cancel goal Away",this.Events[2055]="Penalty Away",this.Events[2056]="Red card Away",this.Events[2057]="Shot Away",this.Events[2058]="Yellow card Away",this.Events[2063]="Shot on target Away",this.Events[2064]="Shot off target Away",this.Events[2065]="Shot woodwork Away",this.Events[2066]="Foul Away",this.Events[2067]="Offside Away",this.Events[2068]="Kickoff Away",this.Events[2069]="Yellow / red card Away",this.Events[2070]="Cancel yellow / red car Away",this.Events[2071]="Cancel red card Away",this.Events[2072]="Cancel yellow card Away",this.Events[2073]="Cancel penalty Away",this.Events[2074]="Cancel corner Away",this.Events[2075]="Safe Away",this.Events[2076]="Danger Away",this.Events[2077]="Goal kick Away",this.Events[2078]="Throw in Away",this.Events[2079]="Substitution Away",this.Events[2080]="Dangerous shot Away",this.Events[2081]="Shot saved Away",this.Events[2082]="Shot blocked Away",this.Events[2083]="Retake penalty Away",this.Events[2084]="Missed penalty Away",this.Events[10001]="Kick off",this.Event=function(){return e.messageAdapter.process({ID:300538,KO:"/Date(1366037846601+0100)/",HT:"Năvodari",AT:"Braşov",EN:"598",CPT:3929868,CR:"true",SCH:2,SCA:1,EID:1053,PI:234,PO:234,JI:234,JO:234,Z:"GGG",RE:1234,TSID:2,AMQTS:"/Date(1366037846601+0100)/",L:"Stars League",STA:"&quot;Stadium Name",ST:{O:"1:0",CR:"1:0",DAT:"5:2",F:"0:0",FK:"111:234",SH:"13:22",SHW:"4:5",YC:"10:36",RC:"1:1",TI:"2:4",GK:"33:5",SHG:"1:0",SHB:"3:2",SB:"5:4",SUB:"1:0",P:"1:1"},TK:[{C1:"FF313131",C2:"FF111111"},{C1:"FF111111",C2:"FF333333"}]})},this.kickOffEvent=function(){return e.messageAdapter.process({AMQTS:"/Date(1368458910777+0100)/",AT:"Banik Ostravaasdasdasdasdasd",EID:10001,HT:"Teplice",ID:300717,KO:"/Date(1368534910777+0100)/",L:"Stars League",STA:"&quot;Stadium Name"})},this.se=this.sendEvent,this.sez=this.sendEventWithZone,this.matchInfo={RBallId:null,GSMId:0,WATId:0,SourceId:0,Descripton:null,KickOff:"0001-01-01T00:00:00",EndTime:"0001-01-01T00:00:00",Team1:"Team1",Team2:"Team2",Team1GsmId:0,Team2GsmId:0,League:"Pro league",LeagueCountry:null,LeagueCountryId:0,Stadium:"Pro Stadium",LiveOddsAvailable:!1,GsmSeasonId:0,Coverage:null,SportId:0,SportName:"Soccer",ScoutConfirmed:!1,Source:null,IsoAlpha2Code:null},this.possibleEvents=[1024,2048,1026,1052,2050,2076,1051,2075,1033,1039,1040,1041,1056,2057,2063,2064,2065,2080,1025,1028,1031,1032,1034,1042,1043,1044,1045,1053,1054,1055,1057,1058,1059,1060,2049,2052,2055,2056,2066,2067,2068,2069,2077,2078,2079,2081,2082,2083,2084,1029,2053],this.possibleZoneEvents=[1024,1052,1051,2048,2076,2075],this.possibleGoalEvents=[1029,2053],this.stats=[],this.sendEventWithZone.eventNumber=1e6}return r.prototype.amendTeamInfo=function(e){e.HomeTeam=this.teamInfo.HomeTeam||e.HomeTeam,e.AwayTeam=this.teamInfo.AwayTeam||e.AwayTeam,e.HomeTeamAbbr=this.teamInfo.HomeTeamAbbr||e.HomeTeamAbbr,e.AwayTeamAbbr=this.teamInfo.AwayTeamAbbr||e.AwayTeamAbbr,e.LeagueName=this.teamInfo.LeagueName||e.LeagueName,e.StadiumName=this.teamInfo.StadiumName||e.StadiumName},r.prototype.sendEvent=function(e,t){var i,n,s,o=new this.Event;this.amendTeamInfo(o);var r,a,l="1"===e.toString().charAt(0);if(t=t||{},e&&e.message)o=e.message;else if(e&&e.zone?e&&e.zone&&(n=this.possibleZoneEvents[Math.floor(Math.random()*this.possibleZoneEvents.length)]):n=this.possibleEvents[Math.floor(Math.random()*this.possibleEvents.length)],"number"==typeof e)o.EventCodeId=e,(i=this.localisationHandler.getEventCodeById(e))&&(o.EventCode=i,142===e&&(e=1e3),this.stats[e]=this.stats[e]?this.stats[e]+1:1);else if("string"==typeof e){for(var c in this.Events)if("string"==typeof this.Events[c]&&-1!==this.Events[c].toLowerCase().indexOf(e.toLowerCase())){o.EventCodeId=c,this.Events[c]&&(o.EventCode=this.localisationHandler.getEventCodeById(c),142===c&&(c=1e3),this.stats[c]=this.stats[c]?this.stats[c]+1:1);break}}else o.EventCodeId=n;if(o.ClockRunning=(a=o.EventCodeId,[1,3,5,7].indexOf(a)>-1?"false":"true"),e&&e.eventNumber&&(o.EventNumber=e.eventNumber),1029===o.EventCodeId?(o.ScoreHome=(parseInt(o.ScoreHome,10)+1).toString(),this.scoreHome++):2053===o.EventCodeId&&(o.ScoreAway=(parseInt(o.ScoreAway,10)+1).toString(),this.scoreAway++),"number"!=typeof e){if(("object"!=typeof o.Statistics&&e&&!e.statistics||!e)&&(s=parseInt(o.EventCodeId,10)+1024,o.Statistics=o.EventCodeId+"="+Math.floor(50*Math.random())+" "+s+"="+Math.floor(50*Math.random()),142===o.EventCodeId)){o.Statistics="1024="+Math.floor(50*Math.random())+" 2048="+Math.floor(50*Math.random())}}else l?(r=e,s=e+1024):(r=e-1024,s=e),"object"!=typeof o.Statistics&&(o.Statistics=r+"="+(this.stats[r]?this.stats[r]:0)+" "+s+"="+(this.stats[s]?this.stats[s]:0)),262===e&&(o=new this.ZoneInfoEvent);if(o.ScoreHome=this.scoreHome,o.ScoreAway=this.scoreAway,10001===e){o=this.kickOffEvent();var u=t.KickOff||new Date;t.KickOff||u.setSeconds(u.getSeconds()+5),o.KickOff="/Date("+u.valueOf()+"+0000)/",delete t.KickOxtra":return 64;case"second-extra":return 256;case"penalties":return 1024}}(t.period)),$.extend(o,t),this.mediator.publish("app:message",o),o},r.prototype.setMatchInfo=function(e){var t={};t.scoreHome=e&&e.scoreHome?e.scoreHome:this.scoreHome,t.scoreAway=e&&e.scoreAway?e.scoreAway:this.scoreAway,t.score=t.scoreHome+" - "+t.scoreAway,t.homeTeam=e&&e.homeTeam?e.homeTeam:this.homeTeam,t.awayTeam=e&&e.awayTeam?e.awayTeam:this.awayTeam,e&&e.kickOff&&(t.KickOff=e.kickOff),this.mediator.publish("app:match-info",t)},r.prototype.sendSequenceOfEvents=function(e){var t=e&&e.count?e.count:30,i=this,n=0;this.interval=setInterval((function(){n++,e&&e.toBeSent?i.sendEvent(e.toBeSent):i.sendEvent(topSequenceOfEvents=function(){this.interval&&clearInterval(this.interval)},r.prototype.sendEventWithZone=function(e,t,i){var s,r=this,a=i||0,l=0,c="",u=["CR_L","CR_R","FK1","FK2","FK3L","FK3R","FK4","FK5","TI1","TI2","TI3"],h=new this.Event,d=new this.Event;for(var p in t=t?t.toUpperCase():"",u)if(u[p]&&u[p].indexOf&&-1!==u[p].indexOf(t)){c=u[p];break}if(""===c&&n.debug("Zone not found. Possible values: ["+u.join(", ")+"]"),o.isNumber(e))l=e;else for(var m in this.Events)if(this.Events[m]&&this.Events[m].toLowerCase&&-1!==this.Events[m].toLowerCase().indexOf(e)){l=m;break}h.EventCodeId=l,h.EventCode=this.localisationHandler.getEventCodeById(l),h.EventNumber=this.sendEventWithZone.eventNumber,this.sendEvent({message:h}),d.zone=c,d.Zone=c,d.EventNumber=this.sendEventWithZone.eventNumber+1,d.RelatedEventNumber=this.sendEventWithZone.eventNumber,d.EventCode="Zone Info",d.Ene.eventNumber+=2,a>0?(s=d,setTimeout((function(){r.sendEvent({message:s})}),a)):r.sendEvent({message:d})},r.prototype.readDummyEvent=function(e){var t=this;this.iterations=0,e||(e="1/javascripts/dummyEvent/dummy_event.json"),$.ajax({type:"GET",dataType:"json",url:e,success:function(e){var i=new Date;t.dummyEventSequence=e,i.setSeconds(i.getSeconds()+10),t.setMatchInfo({kickOff:i.toISOString(),homeTeam:"Manchester United",awayTeam:"Chelsea"}),t.mediator.publish("app:kick-off",{KickOff:i.toISOString(),homeTeam:"Manchester United",awayTeam:"Chelsea"}),setTimeout((function(){t.generateCheckboxOptions(),t.showDummyEvent()}),1e3),$(t).bind("end_of_cycle",(function(){0===t.iterations?t.showDummyEvent():1===t.iteraunbind("end_of_cycle"),t.iterations++}))},error:function(e,t,i){n.debug(i)}})},r.prototype.generateCheckboxOptions=function(){var e=this,t=$("#event-checkbox");t.html("");for(var i=0;i<this.dummyEventSequence.events.length;i++)t.append("<option value="+i+">"+this.localisationHandler.getEventCodeById(this.dummyEventSequence.events[i].eventCodeId)+"</option>");t.parents("div").show(),t.on("change",(function(){var t=parseInt($(this).val(),10);t>2&&(t-=3),$(e).trigger("stop_animation"),clearTimeout(e.showDummyEvent.timeOut),e.showDummyEvent.isPlaying||e.showDummyEvent(t)}))},r.prototype.showDummyEvent=function(e){var t=this;if(this.setMatchInfo(),t.showDummyEvent.isPlaying=!1,this.showDummyEvent.forceStop=!1,$(this).bind("stop_animation",(function(){t.showDummyEvent.isPlaying&&(t.showDummyEvent.isPlaying=!1,t.showDummyEvent.forceStop=!0)})),null==e&&(e=0)t((function(){t.sendEvent(2),setTimeout((function(){t.sendEvent(3)}),27e5)}),9e5)}),27e5);var i=function(s){var o=s!==e?1e3*t.dummyEventSequence.events[s-1].duration:0;t.showDummyEvent.isPlaying=!0,t.showDummyEvent.timeOut=setTimeout((function(){n.debug(s),s<t.dummyEventSequence.events.length&&!t.showDummyEvent.forceStop?(t.sendEvent(t.dummyEventSequence.events[s].eventCodeId),i(s+1)):(t.showDummyEvent.isPlaying=!1,t.showDummyEvent.forceStop?(t.showDummyEvent.forceStop=!1,$(t).trigger("animation_stopped")):$(t).trigger("end_of_cycle"))}),o)};i(e)}else n.debug("dummy event is not initialized")},r.prototype.triggerForm=function(){var e=(new s).parse({HM:[{DT:"",H:2,A:1,T:"H"},{DT:"",H:2,A:1,T:"A"},{DT:""},{DT:""},{DT:"",H:2,A:1,T:"H"}],AM:[{DT:"",H:2,A:1,T:"H"},{DT:"",H:2,A:1,T:"A"},{DT:""},{DT:""},{DT:"",H:2,A:1,},r.prototype.triggerPrematch=function(){this.se(10001),this.triggerForm()},r.prototype.triggerPremiumVisStart=function(e){var t={date:1479492e3,match_id:853261,period_id:2,sport_id:1,state:"live"};"object"==typeof e&&e.hasOwnProperty("state")&&(t=e),window.mediator.publish("app:premium-vis-started",t.state)},r})),define("vis/units/Scoreboard",["require","shared/utils"],(function(e){var t=e("shared/utils");function i(e){this.homeTeam=e&&e.homeTeam?e.homeTeam:"HOME",this.awayTeam=e&&e.awayTeam?e.awayTeam:"AWAY",this.score="-",this.scoreHome=null,this.scoreAway=null,this.$el={},this.$el.homeTeamName=$("#bottom-line #home-team"),this.$el.awayTeamName=$("#bottom-line #away-team"),this.$el.score=$("#bottom-line #score"),this.areTeamsRepresented=!1;var t=this;this.initialized=!1,window.mediator.subscribe("app:match-info",(function(e){t.update(e)}),{priority:0}),window.mediator.once("app:forced-team-names",(function(e){!1===t.initialized&&(t.initialized=!0,t.initialize({homeTeam:e.HomeTeam,awayTeam:e.AwayTeam}),window.mediator.publish("app:match-info",{homeTeam:e.HomeTeam,awayTeam:e.AwayTeam}))})),window.mediator.publish("app:match-info",{homeTeam:this.homeTeam,awayTeam:this.awayTeam}),this.bindMatchListeners()}return i.prototype.bindMatchListeners=function(){var e=this;e.initialized=!1,window.mediator.on("app:message",(function(i){if(i.HomeTeam){var n=t.applyTeamNameRules(i.HomeTeam).trim();n=t.trimString(i.HomeTeam,28,{ending:"'"});var s=t.applyTeamNameRules(i.AwayTeam).trim();s=t.trimString(i.AwayTeam,28,{ending:"'"}),e.initialize({homeTeam:n,awayTeam:s}),window.mediator.publish("app:match-info",{homeTeam:n,awayTeam:s})}}),{priority:1})},i.prototype.update=function(e){var t=e&&e.homeTeam?e.homeTeam:this.homeTeam,i=e&&e.awayTeam?e.awayTeam:this.awayTeam,n=e&&e.score?e.score:this.score;this.homeTeam=t,this.awayTeam=i,this.score=n,this.$el.homeTeamName.html(t),this.$el.awayTeamName.html(i),this.$el.score.html(n)},i.prototype.initialize=function(e){if(!this.areTeamsRepresented){e.homeTeam?this.homeTeam=e.homeTeam:this.areTeamsRepresented=!1,e.awayTeam?this.awayTeam=e.awayTeam:this.areTeamsRepresented=!1,this.update()}},i.prototype.updateScore=function(e){null!==e.home&&void 0!==e.home&&null!==e.away&&void 0!==e.away&&(this.scoreHome=e.home,this.scoreAway=e.away,this.score=e.home+" - "+e.away,this.$el.s/configurations/configuration",[],(function(){return{fadeOutDuration:450}})),define("vis/app/BaseAnimation",["require","jquery","vis/units/MessageHandler","vis/units/TestMessageSender","vis/units/LocalisationHandlerLocal","vis/units/Scoreboard","vis/units/MatchContext","vis/configurations/configuration","vis/units/fallbacks"],(function(e){var t=e("jquery"),i=e("vis/units/MessageHandler"),n=e("vis/units/TestMessageSender"),s=e("vis/units/LocalisationHandlerLocal"),o=e("vis/units/Scoreboard"),r=e("vis/units/MatchContext"),a=e("vis/configurations/configuration"),l=window.mediator;return e("vis/units/fallbacks"),function(e){this.options=e,this.isTimeoutInfoBlock=function(e){return"infoBlock"===e.classNames[0]&&"timeout"===e.type},this.checkIfSummaryIsShown=function(e){return void 0!==e.classNames&&1===e.classNames.length&&"statsScreen"===e.classNames[0]&&(this.eventItem&&1===this.eventItem.classNames.length&&"statsScreen"===this.eventItem.classNames[0])},this.width=600,this.height=338,this.clientWidth=e.width||600,this.clientHeight=e.height,this.collapsed=!1,this.matchId=e.matchId||null,this.optaMatchId=e.optaMatchId||null,r.isTestGame=null!==window.location.search.match(/TEST_.+_RB/)||null!==window.location.search.match(/TEST_.+_WB/),this.initializeContainers=function(){this.$el={},this.$el.rootElement=t("#root-container"),this.$el.animationElement=t("#animation-background"),this.$el.bothPitches=this.$el.rootElement.find("#normal-pitch, #collapsed-pitch"),this.$el.collapsedPitch=this.$el.rootElement.find("#collapsed-pitch"),this.$el.normalPitch=this.$el.rootElement.find("#normal-pitch"),this.$el.gameClock=this.$el.rootElement.find("#game-clock-container"),this.initializeSportSpecificContainers&&this.initializeSportSpecificContainers(),this.collapsed?(this.$el.collapsedPitch.show(),this.$el.normalPitch.hide()):(this.$el.collapsedPitch.hide(),this.$el.normalPitch.show())},this.initializeUnits=function(){this.unit={},this.unit.localisationHandler=s,this.unit.messageHandler=new i,this.unit.scoreboard=new o,this.unit.test=new n({mediator:l})},this.initializeSubscriptions=function(){var e=this;this.isTimeoutAgain=!1,l.subscribe("app:should-queue-timeout",(function(t){e.isTimeoutAgain=t})),l.once("queue:not-recognized-event",(function(t){e.eventItem||(e.eventItem=e.replaceBySummaryIfNotShown(),e.message=t.message,e.isZoneLast=!1,e.eventItem.matchStarted=t.event.matchStarted,e.eventItem.matchEnded=t.event.matchEnded,e.processEvent({message:t.message,eventItem:e.eventItem}))})),l.subscribe("app:hide-animation".subscribe("csb:reset-visualisation",(function(){e.hideAnimations(e.event)})),this.initializeSportSpecificSubscriptions&&this.initializeSportSpecificSubscriptions()},this.hideAnimations=function(e){var t;if(this.event&&this.event.classNames){for(var i in t=[].slice.call(e.classNames),0,e.collapsedClassNames&&t.push.apply(t,e.collapsedClassNames),t)t[i]&&this.animation[t[i]]&&"function"==typeof this.animation[t[i]].hide&&this.animation[t[i]].hide(0);this.hideSportSpecificAnimations&&this.hideSportSpecificAnimations(e)}},this.getTeamAndEvent=function(e,t){var i,n,s=e.eventCode||this.unit.localisationHandler.getEventCodeById(t.EventCodeId);return!!s&&("home"===e.direction?(i=r.homeTeam,n=r.homeTeamAbbr,262!==s&&(s=s.replace(/home/i,""))):"away"===e.direction&&(i=r.awayTeam,n=r.awayTeamAbbr,262!==s&&(s=s.replace(/away/i,""))),{teamName:i,teamNameAbbr:n,eventCode:s})},this.setProp=function(e,t){var i=!0===t||"true"===t;switch(e){case"collapsed":i!==this.collapsed&&(this.collapsed=i,this.toggleCollapsed(this.collapsed));break;case"lang":this.lang=t;break;case"url":this.url=t,s.setUrl(this.url);break;case"width":this.clientWidth=t;break;case"height":this.clientHeight=t;break;default:this.setSportSpecificProp&&this.setSportSpecificProp(e,t)}},this.ttion);var o=function(e){s.$el.rootElement.toggleClass("collapsed-pitch",e)};if(-1!==["icehockey","basketball","volleyball","soccer"].indexOf(window.sport.toLowerCase())&&(s.clientWidth<300&&(s.clientWidth=300),s.collapsedHeight=s.clientWidth/16*9*.13),e)n=this.$el.animationElement.height(),i?(this.$el.animationElement.css({height:s.collapsedHeight||"44px","margin-top":this.collapsedMarginTop||0}),s.height=s.collapsedHeight||"44px",s.top=this.collapsedMarginTop||0,s.$el.bothPitches.toggle(),o()):this.$el.animationElement.animate({height:s.collapsedHeight||"44px","margin-top":n-s.collapsedHeight||44},{easing:"swing",complete:function(){s.height=s.collapsedHeight+"px"||"44px",s.top=0,s.$el.animationElement.css({height:s.height,"margin-top":s.collapsedMarginTop||s.top+"px"}),s.$el.bothPitches.nction(){o(!0)}))}});else{s.$el.bothPitches.fadeToggle(0,(function(){o(!1)}));var r="mini"===window.mode&&this.clientHeight?this.clientHeight+"px":"100%";s.$el.animationElement.css({"margin-top":this.animationElementHeight+"px",height:r}),this.$el.animationElement.animate({"margin-top":0},{easing:"swing",complete:function(){s.height=r,s.top=0,s.$el.animationElement.css({height:s.height,"margin-top":s.top+"px"})}})}void 0!==this.event&&this.hideAnimations(this.event),window.mediator.publish("pitch:collapsed",e),this.toggleSportSpecificColtTimeout((function(){s.processEvent({eventItem:s.event,message:s.message})}),a.fadeOutDuration+100)},this.replaceBySummaryIfNotShown=function(e,i){return(!e||-1!==t.inArray(i.EventCodeId,this.ignoredEventIds))&&(e={classNames:["statsScreen"],type:"statsInGame"})},this.bootstrap=function(){this.sportSpecificInitializers(),this.initializeContainers(),this.initializeAnimations(),this.initializeSubscriptions(),e.collapsed&&(this.collapsed=!0,this.toggleCollapsed(!0,{withoutAnimation:!0}))},this.initializeUnits();var c=this;void 0!==e.lang&&"en"!==e.lang?this.unit.localisationHandler.setLanguage(e.lang,(function(){c.unit.localisationHandler.setDiffPath(e.locdiff,(function(){c.bootstrap()}))})):this.unit.localisationHandler.setDiffPath(e.locdiff,this.bootstrap.bind(this))}})),define("vis/units/GameClock",[],(function(){function e(){}return e.prototype.parseMiliseconds=function(e){this.inMilliseconds=e,this.seconds=Math.floor(this.inMilliseconds/1e3),this.tensSeconds=Math.floor(this.seconds/10),this.minutes=Math.floor(this.seconds/60),this.tensminutes=Math.floor(this.minutes/10),this.seconds%=10,this.tensSeconds%=6,this.minutes%=10,this.tensminutes%=6},e.prototype.startTimeIncreasing=function(e){var t=this;e&&e.minutes&&(t.inMilliseconds=60*e.minutes*1e3),this.timeInterval=setInterval((function(){t.inMilliseconds+=1e3,t.parseMiliseconds(t.inMilliseconds),e&&e.container&&(e.container.find("#tens-minutes").html(t.tensminutes),e.container.find("#minutes").html(t.minutes),e.container.find("#separator").html(":"),e.container.find("#tens-seconds").html(t.tensSeconds),e.containe.prototype.stopTimeIncreasing=function(){clearInterval(this.timeInterval)},e.prototype.applyStaticClock=function(e){e&&e.minutes&&(this.inMilliseconds=60*e.minutes*1e3),this.inMilliseconds+=1e3,this.parseMiliseconds(this.inMilliseconds),e&&e.container&&e.container.html(this.minutes+" : 00")},e})),define("vis/units/hive/constants",[],(function(){return{POEM:{eventTypes:{pass:1,offsidePass:2,takeOn:3,foul:4,out:5,cornerAwarded:6,tackle:7,interception:8,turnover:9,overrunInRecentSeasonsSave:10,claim:11,clearance:12,miss:13,post:14,attemptSaved:15,goal:16,card:17,playerOff:18,playerOn:19,playerRetired:20,playerReturns:21,playerBecomesGoalkeeper:22,goalkeeperBecomesPlayer:23,conditionChange:24,officialChange:25,startDelay:27,endDelay:28,end:30,start:32,teamSetUp:34,playerChangedPosition:35,playerChangedJersey:36,collectionEnd:37,temp_Goal:38,temp_Attempt:39,formationChange:40,punch:41,goodSkill:42,deletedEvent:43,aerial:44,challenge:45,rescindedCard:47,ballRecovery:49,dispossessed:50,error:51,keeperPickUp:52,crossNotClaimed:53,smother:54,offsideProvoked:55,shieldBallOpp:56,foulThrowIn:57,penaltyFaced:58,keeperSweeper:59,chanceMissed:60,ballTouch:61,temp_Save:63,resume:64,contentiousRefereeDecision:65,possessionData:66,5050:67,refereeDropBall:68,failedToBlock:69,injuryTimeAnnouncement:70,coachSetup:71,caughtOffside:72,otherBallContact:73,blockedPass:74,delayedStart:75,earlyEnd:76,playerOffPitch:77},qualifierTypes:{relatedEvent:55,yellowCard:31,secondYellowCard:32,redCard:33,ownGoal:28,jerseyNumber:59},periodId:{firstHalf:1,secondHalf:2,firstPeriodExtraTime:3,secondPeriodExtraTime:4,penalty:5},typeNames:{16:"goal",17:{31:"yellow-card",32:"yellow-red-card",33:"red-card"},18:"substitution",19:"substitution",58:"miss"}}}})),define("vis/animations/PenaltyShootout",["require","jquery","units/PenaltyScroll","shared/utils","vis/units/hive/constants"],(function(e){var t=e("jquery"),i=e("units/PenaltyScroll"),n=e("shared/utils"),s=e("vis/units/hive/constants").POEM.periodId,o=n.splitGetParameters();function r(){this.mediator=window.mediator,this.$el=t("#vis-penalty-template"),this.$homeContainer=t("#vis-home-penalty-score"),this.$awayContainer=t("#vis-away-penalty-score"),this.$totalScore=t("#vis-total-penalty-score"),this.NUM_ITEMS=5,this.itemWidth=null,this.index={home:0,away:0},this.score={home:0,away:0},this.bindEvents()}return r.prototype.addShot=function(e,t){if(!(["home","away"].indexOf(e)<0)){var i=this.getNextCell(e);this.markCellGoal(i,t),this.index[e]++,t&&(this.score[e]++,this.updateScores()),this.index[e]>this.NUM_ITEMS&&this.applyScrollbar(e)}},r.prototype.removeShot=function(e,t){if(!(["home","away"].indexOf(e)<0)){this.index[e]--;var i=this.getLastCell(e);this.unMarkCellGoal(i,t),t&&(this.score[e]--,this.updateScores()),this.index[e]>this.NUM_ITEMS&&this.applyScrollbar(e)}},r.prototype.updateScores=function(){var e=this.score.home+" - "+this.score.away;this.$totalScore.text(e)},r.prototype.getLastCell=function(e){if(!(["home","away"].indexOf(e)<0))return("home"===e?this.$homeContainer:this.$awayContainer).find(".penalty-item").eq(this.index[e])},r.prototype.getNextCell=function(e){if(!(["home","away"].indexOf(e)<0)){var t,i="home"===e?this.$homeContainer:this.$awayContainer;if(this.index[e]>this.NUM_ITEMS-1){var n=i.find(".penalty-item").last();(t=n.clone().appendTo(n.parent())).children(".penalty-item-index").text(t.index()+1)}else t=i.find(".penalty-item").eq(this.index[e]);return t}},r.prototype.markCellGoal=function(e,t){t?e.children(".penalty-item-index").next().removeClass("penalty-item-none penalty-item-miss").addClass("penalty-item-goal"):e.children(".penalty-item-index").next().removeClass("penalty-item-none penalty-item-goal").addClass("penalty-item-miss")},r.prototype.unMarkCellGoal=function(e){e.children(".penalty-item-index").next().removeClass("penalty-item-goal penalty-item-miss").addClass("penalty-item-none")},r.prototype.bindEvents=function(){var e=this;n.isPremVis()&&"true"!==o.vis2d?(this.mediator.subscribe("app:hive-penalty-shootout-start",(function(){e.launch()})),this.mediator.subscribe("app:hive-penalty-shootout-shot",(function(t){var i="goal"===t.type;e.addShot(t.direction,i)})),this.mediator.subscribe("app:hive-event-cancelled",(function(t){if(!(t.period<s.penalty)){var i="goal"===t.type;e.removeShot(t.direction,i)}}))):(this.mediator.subscribe("app:penalty-shootout-start",(fuscribe("app:penalty-shootout-shot",(function(t){e.addShot(t.team,t.isGoal)})))},r.prototype.applyScrollbar=function(e){if(!(["home","away"].indexOf(e)<0)){var t="home"===e?this.$homeContainer:this.$awayContainer;i.isInitialized(t)?i.update(t,"home"===e?0:"end"):i.init(t,this.itemWidth*(window.mini?.5:1))}},r.prototype.setDimensions=function(){var e=this,i=this.$el.width(),n=5*Math.floor(.4*i/5),s=i-2*n;this.$totalScore.width(s),this.$homeContainer.width(n),this.$awayContainer.width(n),this.itemWidth=document.getElementById("vTEMS,t(".penalty-item").each((function(t,i){i.style.width=e.itemWidth+"px"}))},r.prototype.launch=function(){this.$el.show(),t("#animation-background").addClass("penalty-shootout"),this.$totalScore.css("fontSize",Math.min(this.$totalScore.width()/124*36,36)+"px"),this.setDimensions()},r.prototype.hide=function(){this.$el.hide()},r})),define("vis/animations/PeriodicalStats",["require","jquery"],(function(e){var t=e("jquery"),i=function(){this.mediator=window.mediator,this.mediator.subscribe("stats:update",t.proxy(this.handlePeriodicalStats,this))};return i.prototype.handlePeriodicalStats=function(e){switch(e.type){case"goals-over-info":break;case"betting-info":this.mediator.publish("stats:periodical",e);breakts:e.data.map((function(e){var t=e.split("#");return{text:t[0],value:t[1]}})),StatsText:e.header};this.mediator.publish("app:message",t)}},new i})),define("vis/animations/SportAnimation",["require","vis/units/fallbacks","vis/units/KickOffVisualisation","vis/animations/ChevronsAnimation","vis/animations/ZoneAnimation","vis/animations/ShotVisualisation","vis/animations/PossessionArrow","vis/animations/InfoBlockVisualisation","vis/animations/InPlayFacts","vis/animations/GoalVisualisation","vis/animations/BottomStats","vis/units/StatisticsScreenLocal","vis/units/StatsHeaders","vis/app/BaseAnimation","vis/configurations/configuration","vis/units/GameClock","shared/utils","vis/animations/PenaltyShootout","vis/animations/PeriodicalStats"],(function(e){e("vis/units/fallbacks");var t=e("vis/units/KickOffVisualisation"),i=e("vis/animations/ChevronsAnimation"),n=e("vis/animations/ZoneAnimation"),s=e("vis/animations/ShotVisualisation"),o=e("vis/animations/PossessionArrow"),r=e("vis/animations/InfoBlockVisualisation"),a=e("vis/animations/InPlayFacts"),l=e("vis/animations/GoalVisualisation"),c=e("vis/animations/BottomStats"),u=e("vis/units/StatisticsScreenLocal"),h=e("vis/units/StatsHeaders"),d=e("vis/app/BaseAnimation"),p=e("vis/configurations/configuration"),m=e("vis/units/GameClock"),f=e("shared/utils"),g=f.splitGetParameters();if(window.streamOnly)var v=e("vis/animations/PenaltyShootout");return e("vis/animations/PeriodicalStats"),d.prototype.sportSpecificInitializers=function(){this.ignoredEventIds=[128,129,132,143,144,145,146,147,148,150,207,208,209,260,262,524,1027,1052,1057,2051,2076,2081],this.chevrons="false"!==this.options.chevrons&&"mini"!==window.mode},d.prototype.setSportSpecificProp=function(e,t){switch(e){case"chevrons":this.chevrons=Boolean(t)&&"mini"!==window.mode,this.animation.chevrons.clearChevrons()}},d.prototype.initializeAnimations=function(){this.animation={},this.animation.chevrons=new i,this.animation.kickOff=new t,"true"!==window.inPlayFacts||g.ipf&&"true"!==g.ipf||(this.animation.inPlayFacts=new a),this.animation.zone=new n,this.animation.shot=new s,this.animation.possessionArrow=new o,this.animation.infoBlock=new r,this.animation.goal=new l,this.animation.bottomStats=new c,this.animation.statsScreen=new u({stats:h}),this.animation.gameClock=new m,window.streamOnly&&(this.animation.penaltyShootout=new v)},d.prototype.hideSportSpecificAnimations=function(){this.animation.chevrons.clearChevrons()},d.prototype.initializeSportSpecificSubscriptions=function(){var e,t=this;window.mediator.subscribe("app:animation-event",(function(i){t.eventItem||(e=t.replaceBySummaryIfNotShown(i.eventItem,i.message)),e||262!==i.message.EventCodeId?(t.eventItem=e||i.eventItem,t.message=i.message,t.isZoneLast=!1):(t.zoneEvent=i.eventItem,t.zoneMessage=i.message,t.isZoneLast=!0),t.processEvent({message:i.message,eventItem:e||i.eventItem})}))},d.prototype.initializeSportSpecificContainers=function(){this.$el.infoBlockElement=this.$el.rootElement.find("#info-block-container"),this.$el.goalBlockElement=this.$el.rootElement.find("#goal-block"),this.$el.goalWordElement=this.$el.rootElement.find("#goal-word"),this.$el.bottomElement=this.$el.rootElement.find("#bottom-line"),this.$el.playtimeElement=this.$el.rootElement.find("#playtime"),"mini"===window.mode&&this.$el.rootElement.toggleClass("mini",!0),window.mediator.publish("pitch:collapsed",this.collapsed),this.$el.rootElement.toggleClass("collapsed-pitch",this.collapsed),this.$el.collapsedPitch.toggle(this.collapsed),this.$el.normalPitch.toggle(!this.collapsed)},d.prototype.toggleSportSpecificCollapsed=function(){var e=this;void 0!==this.event&&(this.lastEvent=e.eventItem,void 0!==this.zoneEvent&&!0===this.isZoneLast?setTimeout((function(){e.processEvent({eventItem:e.eventItem,message:e.message,calledBy:"collapsed"}),e.processEvent({eventItem:e.zoneEvent,message:e.zoneMessage,calledBy:"collapsed"})}),p.fadeOutDuration+100):setTimeout((function(){e.processEvent({eventItem:e.eventItem,message:e.message,calledBy:"collapsed"})}),p.fadeOutDuration+100))},d.prototype.stopAnimations=function(e){for(var t in this.animation)void 0!==e&&"object"==typeof e.except&&-1!==e.except.indexOf(t)||("function"==typeof this.animation[t].destroy&&this.animation[t].destroy(),"function"==typeof this.animation[t].stopHiding&&this.animation[t].stopHiding())},d.prototype.processEvent=function(e){var t,i,n;if(e.message&&void 0!==e.message.EventCodeId){if(n=e.message,(i=e.eventItem).related&&(n=i.related),this.unit.scoreboard.updateScore({home:n.ScoreHome,away:n.ScoreAway}),i.classNames){for(var s in this.event=i,-1!==i.classNames.indexOf("zone")?this.stopAnimations({except:["infoBlock","shotStats","cards","percentageStats","bottomStats"]}):this.stopAnimations(),t=this.getTeamAndEvent(i,n),i.teamName=t.teamName,i.eventCode=t.eventCode,i.teamAbbr=t.teamNameAbbr,t.collapsedEventCode&&(i.collapsedEventCode=t.collapsedEventCode),i.classNames)!i.classNames.hasOwnProperty(s)||!this.animation[i.classNames[s]]||!0===i.postponeOnPenaltyShootout&&!0===i.penaltyShootout||"penaltyShootout"===i.classNames[s]&&f.isPremVis()||this.animation[i.classNames[s]].launch(i,n);this.chevrons&&this.animation.chevrons.show(i),!this.collapsed&&i.zonePos&&("collapsed"!==e.calledBy||"collapsed"===e.calledBy&&this.lastEvent===this.event)&&(n={EventCodeId:262,Zone:i.zoneType+i.zonePos,RelatedEventNumber:null,EventCode:"Zone Information",direction:i.direction},this.processEvent({message:n,eventItem:this.unit.messageHandler.recognizeEvent(n)}))}else i.animation||"kickOff"===i.action&&window.mediator.publish("app:kick-off",{kickOff:i.kickOff,homeTeam:this.unit.scoreboard.HTAbbr,awayTeam:this.unit.scoreboard.ATAbbr,stadium:e.message.StadiumName,league:e.message.LeagueName,country:e.message.Country});this.staticClockValues={0:0,1:45,2:45,3:90,4:90,5:115,6:115,7:120},window.streamOnly&&"true"===this.options.clock&&n.CurrentPlaytime&&("false"===n.ClockRunning?(this.$el.gameClock.hide(),this.animation.gameClock.timeInterval&&(this.clockInitialized=!1)):(this.clockInitialized||(this.animation.gameClock.startTimeIncreasing({minutes:n.CurrentPlaytime/60/1e3,container:this.$el.gameClock}),this.clockInitialized=!0),this.$el.gameClock.addClass("started")))}},d})),define("vis/units/TimedQueueSettings",[],(function(){var e=function(){var e=[],t=[];e[1029]=0,e[2053]=0,e[1040]=0,e[1058]=0,e[1041]=0,e[1039]=0,e[2064]=0,e[2082]=0,e[2065]=0,e[2063]=0,t[262]=0,t[1032]=2e3,t[1034]=500,t[1045]=2e3,t[2056]=2e3,t[2058]=2e3,t[2069]=2e3,t[1054]=3e3,t[2078]=3e3,t[1025]=3e3,t[2049]=3e3,t[1028]=3e3,t[2052]=3e3,t[1027]=3e3,t[2051]=3e3,t[1053]=3e3,t[2077]=3e3,t[1055]=2e3,t[2079]=2e3,t[1042]=2e3,t[1043]=2e3,t[2066]=2e3,t[2067]=2e3,t[1]=15e3,t[1040]=2e3,t[1058]=2e3,t[1041]=2e3,t[1039]=2e3,t[2064]=2e3,t[2082]=2e3,t[2065]=2e3,t[2063]=2e3,t[1024]=2e3,t[1026]=2e3,t[1051]=2e3,t[2048]=2e3,t[2050]=2e3,t[2075]=2e3,this.DefaultDurations=t,this.EventPriorities=e,this.DefaultDelay=2e3};return e.prototype.isZoneInfoEvent=function(e){return 262===e},e.prototype.isGoalEvent=function(e){return 1029===e||2053===e},new e})),define("vis/queue/message",["require","vis/units/TimedQueueSettings","vis/configurations/configuration"],(function(e){var t=e("vis/units/TimedQueueSettings"),i=e("vis/configurations/configuration");function n(e){var i=e.originalMessage;this.mediator=window.mediator,this.event=e.event,this.eventCodeId=parseInt(i.EventCodeId,10),this.isZoneInfoEvent=t.isZoneInfoEvent(this.eventCodeId),this.displayOrder=100,void 0!==t.EventPriorities[this.eventCodeId]&&(this.displayOrder=t.EventPriorities[this.eventCodeId]),this.defaultDelay=t.DefaultDelay,void 0!==t.DefaultDurations[this.eventCodeId]&&(this.defaultDelay=t.DefaultDurations[this.eventCodeId]),this.minDelay=this.defaultDelay,this.message=i,this.renderedAt=null,this.zoneInfoEvent=null,this.zoneInfoWasRendered=!1,this.isResetEvent=100!==this.displayOrder,this.isStatDetail=!0===this.event.isStatDetail,this.destroyed=!1,t.isGoalEvent&&(this.isGoalEvent=t.isGoalEvent(this.eventCodeId))}returnset=!0},n.prototype.getHideDuration=function(){return i.fadeOutDuration+25},n.prototype.getDisplayDuration=function(){var e=!0===this.wasReset?this.minDelay:this.defaultDelay,t=new Date;return null!==this.renderedAt&&(e-=t-this.renderedAt),e},n.prototype.render=function(){return null!==this.renderedAt?(this.zoneInfoWasRendered||null===this.zoneInfoEvent||(this.zoneInfoWasRendered=!0,this.mediator.publish("app:animation-event",{message:this.zoneInfoEvent.message,eventItem:this.zoneInfoEvent.event})),{}):(null===this.renderedAt&&(this.renderedAt=new Date),"free-throws:thrown"===this.event.specialCase?window.mediator.publish("free-throws:thrown",this.event.scored,this.message):this.message.hasOwnProperty("testEvent")&&!0===this.message.testEvent?!0===window.initialEventExecuted?this.mediator.publish("app:animation-event",{message:this.message,eventItem:this.event}):window.initialEventExecuted=!0:this.mediator.publish("app:animation-event",{message:this.message,eventItem:this.event}),this.zoneInfoWasRendered||null===this.zoneInfoEvent||(this.zoneInfoWasRendered=!0,this.mediator.publish("app:animation-event",{message:this.zoneInfoEvent.message,eventItem:this.zoneInfoEvent.event})),{renderingOccured:!0})},n.prototype.hide=function(){},n.prototype.buildShotEvent=function(){var e=jQuery.extend({},this.message);return 1029===this.eventCodeId?(e.EventCodeId=1039,e.EventCode="Shot on target Home"):2053===this.eventCodeId&&(e.EventCodeId=2063,e.EventCode="Shot on target Away"),e},n})),define("vis/queue/consumer",[],(function(){function e(t){this.messageQueue=t.messageQueue,this.renderer=t.renderer,this.state=e.States.InvisibleIdle,this.renderCallback=null,this.hideCallback=null,this.readyToHideCallback=null}return e.States={InvisibleIdle:"InvisibleIdle",Rendering:"Rendering",VisibleIdle:"VisibleIdle",Hiding:"Hiding",ResetDuringRendering:"ResetDuringRendering"},e.Events={QueueNotEmpty:"QueueNotEmpty",MessageRendered:"MessageRendered",MessageHidden:"MessageHidden",Reset:"Reset",ReadyToHideAfterReset:"ReadyToHideAfterReset",ZoneInfoMessageReceied:"ZoneInfoMessageReceied"},e.prototype.handleEvent=function(t){var i,n,s=this;switch(this.state){case e.States.InvisibleIdle:t===e.Events.QueueNotEmpty&&(this.currentMessage=this.messageQueue.shift(),this.currentMessage&&(i=this.currentMessage.getDisplayDuration(),this.renderer.renderEvent(this.currentMessage),this.state=e.States.Rendering,n=new Date,this.renderCallback=setTimeout((function(){s.handleEvent(e.Events.MessageRendered),s.checkSleeping(n,i)}),i)));break;case e.States.Rendering:t===e.Events.Reset?(clearTimeout(this.readyToHideCallback),clearTimeout(this.renderCallback),this.state=e.States.ResetDuringRendering,(i=this.currentMessage.getDisplayDuration())<=0?this.handleEvent(e.Events.ReadyToHideAfterReset):this.readyToHideCallback=setTimeout((function(){s.handleEvent(e.Events.ReadyToHideAfterReset)}),i)):t===e.Events.MessageRendered?(this.state=e.States.VisibleIdle,this.messageQueue.length>0&&this.handleEvent(e.Events.QueueNotEmpty)):t===e.Events.ZoneInfoMessageReceied&&this.zoneInfo&&this.zoneInfo.message&&this.currentMessage.message.EventNumber===this.zoneInfo.message.RelatedEventNumber&&(this.currentMessage.zoneInfoEvent=this.zoneInfo,this.renderer.renderEvent(this.currentMessage));break;case e.States.VisibleIdle:t===e.Events.QueueNotEmpty||t===e.Events.Reset?(i=this.currentMessage.getHideDuration(),this.currentMessage.hide(),this.state=e.States.Hiding,this.hideCallback=setTimeout((function(){s.handleEvent(e.Events.MessageHidden)}),i)):t===e.Events.ZoneInfoMessageReceied&&this.zoneInfo&&this.zoneInfo.message&&this.currentMessage.message.EventNumber===this.zoneInfo.message.RelatedEventNumber&&(this.currentMessage.zoneInfoEvent=this.zoneInfo,this.renderer.renderEvent(this.currentMessage));break;case e.States.ResetDuringRendering:t===e.Events.ReadyToHideAfterReset&&(i=this.currentMessage.getHideDuration(),this.cur.hideCallback=setTimeout((function(){s.handleEvent(e.Events.MessageHidden)}),i));break;case e.States.Hiding:t===e.Events.MessageHidden&&(this.state=e.States.InvisibleIdle,this.messageQueue.length>0&&this.handleEvent(e.Events.QueueNotEmpty));break;default:throw new Error("undefined state")}},e.prototype.reset=function(t){this.messageQueue=t,this.currentMessage&&this.currentMototype.onMessageAdded=functiction(t){this.zoneInfo=t,this.handleEvent(e.Events.ZoneInfoMessageReceied)},e.prototype.checkSleeping=function(e,t){(new Date).valueOf()-e.valueOf()>2*t&&(this.messageQueue.splice(0,this.messageQueue.length-1),this.messageQueue.length&&this.reset(this.messageQueue))},e})),define("vis/queue/queue",["require","vis/queue/message","vis/queue/consumer","vis/units/TimedQueueSettings","vis/units/FormHandler","vis/units/TeamColorsHandler","vis/units/MessageHandler","vis/units/MatchContext","vis/units/logger"],(function(e){var t=e("vis/queue/message"),i=e("vis/queue/consumer"),n=e("vis/units/TimedQueueSettings"),s=new(e("vis/units/FormHandler")),o=new(e("vis/units/TeamColorsHandler")),r=new(e("vis/units/MessageHandler"));e("vis/units/MatchContext"),e("vis/units/logger");var a=function(e,t,i){var n;if(void 0===e||void 0===t)return!1;if((null===t||null===e)&&t===e)return!0;if(e.hasOwnProperty("EventCodeId")&&e.EventCodeId>=10001||i)for(n in e){if(!e.hasOwnProperty(n)||!t.hasOwnProperty(n))return!1;if("object"!=typeof e[n]&&"object"!=typeof t[n]){if(e[n]!==t[n])return!1}else if(!a(e[n],t[n],!0))return!1}else if(e.hasOwnProperty("testEvent")){if(!(e.hasOwnProperty("EventCodeId")&&t.hasOwnProperty("EventCodeId")&&e.EventCodeId===t.EventCodeId&&e.hasOwnProperty("EventNumber")&&t.hasOwnProperty("EventNumber")))return!0}else if(!(e.hasOwnProperty("EventCodeId")&&t.hasOwnProperty("EventCodeId")&&e.EventCodeId===t.EventCodeId&&e.hasOwnProperty("EventNumber")&&t.hasOwnProperty("EventNumber")&&e.EventNumber===t.EventNumber))return!1;return!0};function l(){var e=this;this.mediator=window.mediator,this.settings=n,this.lastMessagevisualisation",(function(){e.resetQueue(),e.consumer.reset(e.messageQueue)})),this.mediator.subscribe("app:message",(function(t){var i=a(t,e.lastMessage,t.testEvent);t.Form&&e.mediator.publish("data:form",s.parse(t.Form),t),t.TeamColors&&e.mediator.publish("data:colors",o.parse(t.TeamColors),t),i||e.enqueMessage(t),e.lastMessage=t}),{priority:2}),this.consumer=new i({messageQueue:this.messageQueue,renderer:this})}return l.prototype.wrapMessage=function(e,i){return new t({originalMessage:e,mediator:this.mediator,event:i})},l.prototype.enqueMessage=function(e){var t,i,n=[];if(e){if(void 0===(i=r.recognizeEvent(e)))return;if(null===i.classNames&&!i.specialCase)return void this.mediator.publish("queue:not-recognized-event",{message:e,event:i});if(t=this.wrapMessage(e,i),!i.testZone&&t.isZoneInfoEvent){if(e.RelatedEventNumber)for(var s in this.messageQueue)this.messageQueue.hasOwnProperty(s)&&this.messageQueue[s].message&&this.messageQueue[s].message.EventNumber===e.RelatedEventNumber&&n.push(this.messageQueue[s]);else this.messageQueue.length>0&&(n=[this.messageQueue[this.messageQueue.length-1]]);return void(n.length>0?n[0].zoneInfoEvent=t:this.consumer.zoneInfoReceived(t))}if(t.isStatDetail)return void this.sendStatisticsDetailsUpdate(i);t.isGoalEvent&&!t.event.penaltyShootout&&this.enqueMessage(t.buildShotEvent()),t.isResetEvent&&(this.resetQueue(t),this.consumer.reset(this.messageQueue)),this.messageQueue.push(Update=function(e){this.mediator.publish("app:statistics-detail-update",e)},l.prototype.renderEvent=function(e){e.render()},l.prototype.resetQueue=function(e){var t,i=[];for(var n in e||(e={displayOrder:-1/0}),this.messageQueue)this.messageQueue.hasOwnProperty(n)&&(t=this.messageQueue[n]).displayOrder<=e.displayOrder&&(t.reset(),i.push(t));this.messageQueue=i},new l})),define("vis/app/appVis",["require","vis/app/setDimensions","vis/animations/SportAnimation","vis/app/enums","vis/units/logger","jquery","shared/utils","app/widgets","vis/units/loaderElementsNames","vis/units/fallbacks","vis/queue/queue"],(function(e){e("vis/app/setDimensions");var t=e("vis/animations/SportAnimation"),i=e("vis/app/enums"),n=e("vis/units/logger"),s=e("jquery"),o=e("shared/utils"),r=e("app/widgets"),a=e("vis/units/loaderElementsNames");e("vis/units/fallbacks"),e("vis/queue/queue"),window.recentEvents=[],window.requireBaseUrl&&requirejs.config({baseUrl:window.requireBaseUrl}),s(window).unload((function(){if(window.socketHandler)try{window.socketHandler.disconnect()}catch(e){n.debug(e)}})),s((function(){var e=o.splitGetParameters(),n=navigator.userAgent,l=["Trident","Android 2.3"],c=!0;window.logLevel=window.logLevel||i.LogLevels[e.clientsidelogging]||i.LogLevels.prod;for(var u=0;u<l.length;u++)n.indexOf(l[u])>-1&&(c=!1);c||s("html").attr("id","nobgsizeanim"),function(){window.loader.registerElements(a.bootstrap),(o.shouldLoadSoccerWidget()||o.shouldLoadBasketballWidget())&&r.initLiveAction(),e.matchId=window.matchId,e.optaMatchId=window.optaMatchId;var i=new t(e);window.t=i.unit.asses.split(","):[],l=s("body");n.forEach((function(e){l.toggleClass(e,!0)})),mediator.publish("app:options-generated",e),window.animationParams=function(e){if("object"==typeof e)for(var t in void 0!==e.locdiff&&(i.locDiffPath=e.locdiff),e)e.hasOwnProperty(t)&&i.setProp(t,e[t])},window.loader.changeElementsState(a.bootstrap)}(),document.oncontextmenu=function(){return!1},mediator.publish("vis:prepared")}))})),define("visualisation/visualisationV",["require","marionette","backbone","app/matchContext","$collapsedTimerV","localisation/manager","shared/utils"],(function(e){var t=e("marionette"),i=e("backbone"),n=e("app/matchContext"),s=e("$collapsedTimerV"),o=e("localisation/manager"),r=e("shared/utils");return t.ItemView.extend({template:"#visualisation-template",el:"#content-visualization",initialize:function(){this.timeline=$("#timeline-container"),this.collapsedTimeContainer=$("#collapsed-time-container"),this.csbContainer=$("#csb-container"),this.listenTo(this.model,"change:isAllowed",this.render),this.listenTo(this.model,"change:collapsed",this.toggleCollapsed),this.collapsedTimerV=s},onRender:function(){var t={width:this.model.get("width"),height:this.model.get("height"),collapsed:this.model.get("collapsed"),pitch:this.model.get("pitch"),url:this.model.get("sandbox"),lang:this.model.get("lang"),chevrons:this.model.get("chevrons"),locdiff:this.model.get("locdiff")},s=this;void 0!==window.mediator&&window.mediator.subscribe("vis:prepared",(function(){"true"!==window.isVis&&window.mediator.publish("translations:ready",t.lang,o.eventLocale),n.lastMessage?window.mediator.context",(function(e){window.mediator.publish("app:message",e.lastMessage)})),i.triggetPeriodical",(function(){i.trigger("stats:getPeriodical",window.mediator)}))})),e(["vis/app/appVis"]),this.collapsedTimerV.render()},toggleCollapsed:function(){var e=r.splitGetParameters();if(!r.isWidgetVis()&&"mini"!==e.mode){var t=this.model.get("collapsed")&&!this.csbContainer.hasClass("prematch");this.$el.toggleClass("visualisation-collapsed",t),this.collapsedTimeContainer.toggleClass("visible",t),this.$el.prependTo(t?"#footer":"#content")}}})})),define("visualisation/visualisationM",["require","backbone","app/appContext"],(function(e){var t=e("backbone"),i=e("app/appContext");return t.Model.extend({defaults:{sandbox:"/animation/v2",src:"",token:"",width:600,height:338,matchId:"",optaMatchId:"",lang:"en",pitch:"",cssPath:"",cssDiff:"",mode:"normal",collapsed:!1,isAllowed:!1,version:"",chevrons:!0},initialize:function(){this.namesForced={home:!1,away:!1};var e=100;i.headerDisabled&&(e-=50),i.footerDisabled&&(e-=50);var t=window.clientWidth,n=window.clientHeight-e;window.streamOnly&&"mini"===window.mode&&(n=window.clientHeight),window.version&&this.set("version",window.version),window.mode&&this.set("mode",window.mode),this.set("height",n),this.set("width",t),this.bindListeners()},setSrc:function(){var e="",t="",i="",n="",s="",o=this.get("lang");!0===this.namesForced.home&&(e+="&homeTeam="+this.get("homeTeam")),!0===this.namesForced.away&&(e+="&awayTeam="+this.get("awayTeam")),this.get("cssPath")&&""!==this.get("cssPath")&&(t="&cssPath="+this.get("cssPath")),this.get("cssDiff")&&""!==this.get("cssDiff")&&(i="&cssDiff="+this.get("cssDiff")),this.get("version")&&""!==this.get("version")&&(n="&version="+this.get("version")),this.get("mode")&&"normal"!==this.get("mode")&&(s="&mode="+this.get("mode")),this.set("src",this.get("sandbox")+"/index.html?token="+this.get("token")+"&height="+this.get("height")+"&width="+this.get("width")+e+t+i+n+s+"&lang="+o+(this.get("pitch")?"&pitch="+this.get("pitch"):""))},validate:function(){var e=!0,t=this.get("token"),i=this.get("matchId"),n=this.get("optaMatchId");return 0===parseInt(i,ollapsed),this.listtion(){window.mediator&&window.mediator.publish("csb:reset-visualisation")},forceTeamNames:function(e){void 0!==e.homeTeam&&(this.set("homeTeam",e.homeTeam),this.namesForced.home=!0),void 0!==e.awayTeam&&(this.set("awayTeam",e.awayTeam),this.namesForced.away=!0)},toggleCollapsed:function(e){this.set("collapsed",e)}})})),define("localisation/languageConverter",[],(function(){var e={dk:"da","es-la":"es",fn:"fi",gr:"el",hg:"hu",nw:"no",vn:"vi",zhs:"zh",zht:"zh"};return{convert:function(t){return t=t.toLowerCase(),e[t]||t}}})),define("inPlayFacts/inPlayFactsV",["require","marionette","backbone","app/appContext","localisation/languageConverter"],(function(e){var t,i,n,s,o,r,a=e("marionette"),l=e("backbone"),c=e("app/appContext"),u=e("localisation/languageConverter"),h=!1,d=[],p=[2,8,64,256,1024];return a.ItemView.extend({template:"#inplay-facts",el:"#inplay-facts-container",events:{"click @ui.closeButton":"hideIpf","mouseenter @ui.inPlayFactsBox":"mouseoverIpf","click @ui.inPlayFactsBox":"clickIpf"},modelEvents:{"change:ipfMessage":"render showIpf"},ui:{color1:"#inplay-facts-team-color1",color2:"#inplay-facts-team-color2",closeButton:"#inplay-facts-exit-button",message:"#inplay-facts-message",inPlayFactsBox:"#inplay-facts-box",betslip:".inplay-facts-betslip"},bindListeners:function(){l.on("ipf:message",(function(e){-1===p.indexOf(r)||!e||this.model.get("cpActive")||this.model.get("videoActive")||(this.model.set("ipfData",e),h=!0,this.model.get("betslipEnabled")?this.sendMessage("bhis.updateIpfMessage())}),this),l.on("match:ticker-state",(function(e){r=e}),this),l.on("data:team-colors",(function(e){this.model.colors.home.color1=e.home.Color1,this.model.colors.home.color2=e.home.Color2,this.model.colors.away.color1=e.away.Color1,this.model.colors.away.color2=e.away.Color2}),this),l.on("cp:change-active",(function(e){this.model.set("cpActive","boolean"==typeof e&&e),e&&this.hideIpf()}),this),l.on("match:period-end",(function(e){e&&this.hideIpf()}),this),l.on("video:change-active",(function(e){this.model.set("videoActive",e),e&&this.hideIpf()}),this)},initialize:function(){t=u.convert(c.lang),n=1e3*+c.ipfTimeout,s=1e3*+c.betslipStopTime,o=+c.betslipVersion,c.betslip?this.model.get("betslipEnabled")&&(this.model.set("betslipVersion",c.betslipVersion),window.addEventListener("message",this.onBetslipMessage.bind(this)),this.$el.addClass("betslip")):this.model.set("betslipEnabled",!1),this.bindListeners()},sendMessage:function(e){var t=this.model.get("ipfData");window.top.postMessage({action:e,fixtureUuid:window.uuid,type:t.MarketType,outcome:t.Outcome},"*")},showIpf:function(){clearTimeout(i),this.displayStats(!1),this.$el.fadeIn(100),this.animateMessage(),i=setTimeout(this.hideIpf.bind(this),n)},hideIpf:function(){clearTimeout(i),this.clearAnimationTimeouts(),this.$el.fadeOut(100),this.displayStats(!0),this.model.unset("ipfData")},onBetslipMessage:function(e){var t=e.data,i=this.model.get("ipfData");i&&t&&t.response&&"betslipResponse"===t.action&&t.fixtureUuid===window.uuid&&t.type===i.MarketType&&(h&&(this.updateIpfMessage(),this.ui.betslip.text(t.response)),2===o&&(t.response+=" BET NOW"),this.model.set("betslipMessage",t.response))},displayStats:function(e){(c.footerDisabled||c.streamOnly)&&$("#stats-inner-container").css("visibility",e?"visible":"hidden")},trackEvents:function(e,t){l.trigger("data:send-GA-stats",{eventCategory:e,eventAction:t,eventLabel:[window.customs.model.get("betslipEnabled")&&this.trackEvents("IPF-BETSLIP","mouseover")},clickIpf:function(){this.model.get("betslipEnabled")&&(this.trackEvents("IPF-BETSLIP","click"),this.sendMessage("betslipClick"))},clearAnimationTimeouts:function(){for(var e=d.length;e--;)clearTimeout(d[e]);d=[]},animateMessage:function(){var e=this,t=e.ui.message,i=t.find(".inplay-facts-message-single"),n=t.find(".inplay-facts-betslip"),o=t.parent().width(),r=i.first().outerWidth(!0);function a(e,i,n){t.finish(),t.css({left:e}),t.animate({left:i+"px"},n,"linear")}function l(r){d.push(setTimeout((function l(){var c=i.first().find(".inplay-facts-text").outerWidth(!0),u=-c+(o-n.outerWidth(!0)),h=-18*u,p=r?s:3e3;r&&e.ui.betslip.removeClass("inplay-facts-betslip--change"),a(0,u,h),d.push(setTimeout((function(){if(r){var s=e.model.get("betslipMessage");e.ui.betslip.first().text()!==s&&(e.ui.betslip.addClass("inplay-facts-betslip--change"),e.ui.betslip.text(s),c=i.first().find(".inplay-facts-text").outerWidth(!0),u=-c+o-n.outerWidth(!0),t.css({left:u}))}d.push(setTimeout((functiost().outerWidth(!0),t=-18*(e-u);a(u,e,t),d.push(setTimeout((function(){l()}),t))}),p))}),h+50))}),6e3))}t.finish(),t.css({left:0}),e.clearAnimationTimeouts(),e.model.get("betslipEnabled")?l(!0):r>o?l(!1):($(i[1]).remove(),$(i[2]).remove())},updateIpfMessage:function(){for(var e,i=this.model.get("ipfData"),n=i.Facts.length,s={},o="",r=i.TeamIndication===(c.ussport?"a":"h")?"home":"away",a=0;a<n;a++)(e=i.Facts[a].Language.toLowerCase())!==t&&"en"!==e||(s[e]=i.Facts[a].Text);(o=s[t]||s.en)&&(o=$("<div>").html(o).text(),o=$("<div>").html(o).text(),this.model.unset("ipfMessage",{silent:!0}),this.model.set("ipfMessage",o),this.ui.color1.css({"background-color":"#"+this.model.colors[r].color1}),this.ui.color2.css({"background-color":"#"+this.model.colors[r].color2}),h=!1,this.trackEvents("IPF-BETSLIP","view"))}})})),define("inPlayFacts/inPlayFactsM",["require","backbone","$enums"],(function(e){var t=e("backbone"),i=e("$enums");return t.Model.extend({defaults:{cpActive:!1,videoActive:!1,ipfData:void 0,ipfMessage:"",betslipEnabled:"true"===window.betslip,betslipMessage:""},colors:{home:{color1:i.DefaultColors.Home,color2:i.DefaultColors.Home},away:{color1:i.DefaultColors.Away,color2:i.DefaultColors.Away}}})})),define("app/cache",["require","config/modules","$controlPanelView","controlPanel/control/controlPanelModel","scoreboard/scoreboardV","scoreboard/scoreboardM","app/bottomPanelController","./appContext","prematch/playerkitModel","app/appV","app/appM","visualisation/visualisationV","visualisation/visualisationM","app/errorV","inPlayFacts/inPlayFactsV","inPlayFacts/inPlayFactsM"],(function(e){return function(){var t,i,n,s=e("config/modules"),o=e("$controlPanelView"),r=e("controlPanel/control/controlPanelModel"),a=e("scoreboard/scoreboardV"),l=e("scoreboard/scoreboardM"),c=e("app/bottomPanelController"),u=e("./appContext"),h=e("prematch/playerkitModel"),d=e("app/appV"),p=e("app/appM"),m=e("visualisation/visualisationV"),f=e("visualisation/visualisationM"),g=e("app/errorV"),v=e("inPlayFacts/inPlayFactsV"),y=e("inPlayFacts/inPlayFactsM");if(!u.bodyDisabled){i=new m({model:t=new f});new o({model:n=new r})}var w=new p({visualisationModel:t}),b=new h("home"),S=new h("away");if(s.scoreboard)new a({model:new l,homePlayerKit:b,awayPlayerKit:S});if("true"===window.inPlayFacts&&u.ipf)new v({model:new y});return new c,new d({model:w,availableViews:{visualisationView:i,errorView:g},homePlayerKit:b,awayPlayerKit:S}),{models:{visualisationModel:t,controlPanelModel:n,appModel:w}}}})),define("prematch/controller",["require","$enums","backbone","shared/utils","underscore"],(function(e){var t=e("$enums"),i=e("backbone"),n=e("shared/utils"),s=e("underscore"),o=function(){s.extend(this,i.Events),this.initializeDefaults(),this.bindListeners()};return o.prototype.initializeDefaults=function(){this.countdownHandle=void 0,this.kickOff=void 0,this.timeToStart=void 0,this.initialMessageHandled=!1,this.tickerStateId=t.TickerStates.NotStarted,this.noRball=!1,this.shouldReloadBeforeStart=!1,clearInterval(this.countdownHandle)},o.prototype.initalize=function(e){var i={};if(this.options={},this.options.countdownDelayMiliseconds=36e5,this.options.timeFormat=t.CountDownTimeFormat.DaysHoursMinutes,void 0!==e.countdown&&n.isNumber(e.countdown)&&(i.countdownDelayMiliseconds=1e3*parseInt(e.countdown,10)),"string"==typeof e.countdowntime)switch(e.countdowntime.toLowerCase()){case"days":i.timeFormat=t.CountDownTimeFormat.DaysHoursMinutes;break;case"hours":i.timeFormat=t.CountDownTimeFormat.HoursMinutes;break;case"minutes":i.timeFormat=t.CountDownTimeFormat.Minutes}if(i.countdownDelayMiliseconds&&(this.options.countdownDelayMiliseconds=i.countdownDelayMiliseconds),i.timeFormat)switch(i.timeFormat){case t.CountDownTimeFormat.DaysHoursMinutes:case t.CountDownTimeFormat.HoursMinutes:case t.CountDownTimeFormat.Minutes:this.options.timeFormat=i.timeFormat}},o.prototype.bindListeners=function(){this.listenTo(i,"match:initial-message",this.handleInitialPrematchMessage),this.listenTo(i,"match:ticker-state",this.handleTickerStateChange),this.listenTo(i,"data:no-rball",this.handleNoRunningBall)},o.prototype.calculateTimeToStart=function(){var e,i;return void 0===this.kickOff?t.TimeToStart.Started:(e=new Date,i=this.kickOff.getTime()-e.getTime(),("horseracing"===window.sport.toLowerCase()||"greyhoundracing"===window.sport.toLowerCase())&&i<=24e4?t.TimeToStart.Started:i>this.options.countdownDelayMiliseconds?t.TimeToStart.MoreThanOneHour:i>0?t.TimeToStart.OneHourOrLess:t.TimeToStart.Started)},o.prototype.triggerUpdates=function(e,n){if(e!==this.timeToStart||n!==this.tickerStateId){if(n!==t.TickerStates.NotStarted)return clearInterval(this.countdownHandle),void i.trigger("app:game-started",{watchAndBetId:this.WatchAndBetId,shouldReload:this.shouldReloadBeforeStart});switch(this.timeToStart=e,this.tickerStateId=n,this.timeToStart){case t.TimeToStart.MoreThanOneHour:this.shouldReloadBeforeStart=!0,i.trigger("app:game-not-started",{kickOff:this.kickOff,displayMode:t.PreMatchDisplayModes.KickOff,watchAndBetId:this.WatchAndBetId});break;case t.TimeToStart.OneHourOrLess:this.shouldReloadBeforeStart=!0,i.trigger("app:game-not-started",{kickOff:this.kickOff,displayMode:t.PreMatchDisplayModes.Countdown,watchAndBetId:this.WatchAndBetId});break;case t.TimeToStart.Started:clearInterval(this.countdownHandle),!0===this.noRball||this.tickerStateId!==t.TickerStates.NotStarted?i.trigger("app:game-started",{watchAndBetId:this.WatchAndBetId,shouldReload:this.shouldReloadBeforeStart}):i.trigger("app:game-not-started",{startingSoon:!0,watchAndBetId:this.WatchAndBetId,kickOff:this.kickOff})}}},o.prototype.parseDate=function(e){var t=n.convertDate(e),i=t.date;return t.normalized?i:new Date(i.valueOf()-60*i.getTimezoneOffset()*1e3)},o.prototype.startCountdown=function(){var e,i=this,n=i.calculateTimeToStart();i.triggerUpdates(n,i.tickerStateId),n!==t.TimeToStart.Started&&(clearInterval(i.countdownHandle),i.countdownHandle=setInterval((function(){i.kickOff&&(e=i.calculateTimeToStart(),i.triggerUpdates(e,i.tickerStateId))}),1e3))},o.prototype.handleNoRunningBall=function(){this.noRball=!0},o.prototype.handleTickerStateChange=function(e){var n;e!==t.TickerStates.NotStarted&&(this.stopListening(i,"match:ticker-state"),window.mediator&&window.mediator.remove("match:ticker-state")),n=this.calculateTimeToStart(),this.triggerUpdates(n,e)},o.prototype.handleInitialPrematchMessage=function(e){this.initialMessageHandled||(this.initialMessageHandled=!0,i.trigger("app:match-data-received",e),e.WatchAndBetId&&(this.WatchAndBetId=e.WatchAndBetId),void 0!==e.TickerStateId&&(this.tickerStateId=e.TickerStateId),e.KickOff?(this.kickOff=this.parseDate(e.KickOff),this.startCountdown()):this.triggerUpdates(t.TimeToStart.Started,e.TickerStateId))},new o})),define("mainApp",["require","app/polyfills","app/iframe","mediator","units/loader","test/testing","$messageUpdatesHandler","units/StatsHandler","app/matchContext","units/PostMessageHandler","units/loaderElementsNames","backbone","underscore","jquery","shared/logger","units/imageLoadingHelper","units/SocketHandler","units/hive/SocketHandler","shared/analytics","shared/utils","app/cache","$enums","config/modules","localisation/manager","prematch/controller","app/connectionInitializer","app/appContext","localisation/manager"],(function(e){e("app/polyfills"),e("app/iframe").addMessageHandler();var t=e("mediator"),i=window.location!==window.parent.location?document.referrer:document.location.href;window.topReferer=i.split("/")[2],void 0===window.mediator&&void 0!==t&&(window.mediator=new t),e("units/loader"),e("test/testing"),e("$messageUpdatesHandler"),e("units/StatsHandler"),e("app/matchContext"),e("units/PostMessageHandler");var n=e("units/loaderElementsNames"),s=e("backbone"),o=e("underscore"),r=e("jquery"),a=e("shared/logger"),l=e("units/imageLoadingHelper"),c=e("units/SocketHandler"),u=e("units/hive/SocketHandler"),h=e("shared/analytics"),d=e("shared/utils"),p=e("app/cache"),m=e("$enums"),f=e("config/modules"),g=e("localisation/manager"),v=e("prematch/controller"),y=e("app/connectionInitializer"),w=e("app/appContext"),b=e("localisation/manager");document.onselectstart=function(){return!1},r.fn.preloadImages=l;var S,T,C=d.splitGetParameters(),E=w.videoonly=d.isVideoOnly(),A=w.lang=C.lang||w.lang,k=w.pitch=C.pitch,P=w.cssPath=C.csspath,I=w.ussport="true"===C.ussport||"y"===C.ussport,O=w.cssDiff=C.cssdiff,N=w.chevrons=C.chevrons,M=w.localisationDiffPath=C.locdiff,x=w.defaultView="true"!==window.isVis?C.defaultview||"video":"vis",L=w.streamOnly=window.streamOnly,H=w.isTestMatch=d.isTestMatch(),D="y"===C.postmlu||"true"===C.postmlu,R=!1,_=r("#csb-container");window.loader.registerElements(n.csbApp),w.ipf=C.ipf?"true"===C.ipf:w.ipf,w.ipfTimeout=C.ipftimeout||w.ipfTimeout,w.betslip=C.betslip?"false"!==C.betslip:w.betslip,w.betslipStopTime=C.betslipstoptime||w.betslipStopTime,w.betslipVersion=C.betslipversion||w.betslipVersion,!window.sport&&window.sportId&&(window.sport=m.Sport[window.sportId]),window.premiumVisActive=d.isPremVis();var F,B=C.bodyclasses?C.bodyclasses.split(","):[],V=r("body");o.each(B,(function(e){V.addClass(e)})),F=s.trigger,s.trigger=function(e){"scoreboard:game-time"!==e&&(a.debug("Event Triggered:"),a.debug(arguments)),F.apply(this,Array.prototype.slice.call(arguments))},w.streamOnly?w.visSwitch="true"===C.visswitch:w.visSwitch="false"!==C.visswitch,w.statsSwitch="true"===C.statsswitch,w.statsSwitchHiding="false"!==C.statsswitchhiding,w.isMini=window.mini,window.mobile=d.isMobile(),window.wbeventid=C.wbeventid||window.wbeventid,window.wbuserid=C.wbuserid||window.wbuserid,window.wbpartnerid=C.partnerid||window.wbpartnerid,window.wbtoken=C.wbtoken||window.wbtoken,window.token=C.token,window.logLevel=m.LogLevels[C.clientsidelogging]||m.LogLevels.prod,window.testTools=C.ts,window.wberr=C.wberr,window.customBg=function(e){if("string"==typeof e&&/(^[0-9A-F]{6}$)|(^[0-9A-F]{3}$)/i.test(e))return e}(C.color),window.audioLang=C.audiolang,window.mode="true"!==window.isVis?C.mode:"normal",window.gacode=C.gacode,window.version=C.version,window.versionPath=d.getVersionPath(),window.isUsSport=I,window.isMLUPostingEnabled=D,a.redirect("location: "+JSON.stringify(location)),a.toggleCallStack(!1),"VALIDATIONTOKEN"===window.validationToken&&(window.validationToken=C.token),"RB_ID"===window.matchId&&(window.matchId=C.rbid),"OPTA_MATCH_ID"===window.optaMatchId&&(window.optaMatchId=C.optaid),"WBTOKEN"===window.wbtoken&&(window.wbtoken=C.wbtoken),"WBEVENTID"===window.wbeventid&&(window.wbeventid=C.wbeventid),"WBPARTNERID"===window.wbpartnerid&&(window.wbpartnerid=C.wbpartnerid),window.mobile&&C.mobpartner&&(window.wbpartnerid=C.mobpartner),"WBUSERID"===window.wbuserid&&(window.wbuserid=C.wbuserid),"EXTENDED_SCHEDULE"!==window.extendedSchedule&&"null"!==window.extendedSchedule&&"undefined"!==window.extendedSchedule||(window.extendedSchedule=void 0),"LEAGUE_NAME"!==window.leagueName&&"null"!==window.leagueName&&"undefined"!==window.extendedSchedule||(window.leagueName=void 0),"STADIUM_NAME"!==window.stadiumName&&"null"!==window.stadiumName&&"undefined"!==window.extendedSchedule||(window.stadiumName=void 0),"AVAIL_LANGS"!==window.availableLangs&&"null"!==window.availableLangs&&"undefined"!==window.availableLangs||(window.availableLangs=void 0),"STREAM_ONLY"===window.streamOnly&&(window.streamOnly=d.isTrueStr(C.streamonly)||!1),window.sport=window.sport.replace(" ","").toLowerCase();var $=-1===["soccer","basketball","icehockey","volleyball","beachvolleyball"].indexOf(window.sport.toLowerCase()),z=!window.matchId||0===parseInt(window.matchId,10);function U(){var e;s.trigger("data:no-rball"),"string"==typeof window.kickOff&&(e=new Date(Date.parse(window.kickOff.replace(/\-/g,"/"))),e="/Date("+(e=new Date(e.valueOf()-60*e.getTimezoneOffset()*1e3)).getTime()+"-0000)/",s.trigger("match:initial-message",{KickOff:e,HomeTeam:window.homeTeam,AwayTeam:window.awayTeam,SportName:window.sport,StadiumName:window.stadiumName,LeagueName:window.leagueName,WatchAndBetId:window.wbeventid}))}!H&&($||z||E)&&(f.disableRunningBallControls(),R=!0,r("#cp-toggle-button").hide(),r("#video-visualisation-switch").hide(),(!window.optaMatchId||0===parseInt(window.optaMatchId,10))&&r("#timeline-container").hide()),"vis"!==x&&"stats"!==x||R||!w.streamOnly||w.visSwitch||w.statsSwitch||(S=!0),("stats"===x&&!0===L&&!0!==w.statsSwitch||E)&&(T=!0),s.on("match:rball-cancel-with-video",U);var j=!1;function q(){var e,t,i,r,l;j||(window.loader.registerElements(n.bootstrap),h(C),o.l=function(e){return g.get(e)},o.forCode=function(e){return g.getEventCodeById(e)},w.wbOnly=R,e=p().models,r={},l=!1,"string"==typeof C.hometeam&&(r.homeTeam=C.hometeam,l=!0),"string"==typeof C.awayteam&&(r.awayTeam=C.awayteam,l=!0),"string"==typeof C.competitionname&&(r.competitionName=C.competitionname,l=!0),"string"==typeof C.countryname&&(r.countryName=C.countryname,l=!0),"string"==typeof C.hometeamabbr&&(r.homeTeamAbbr=C.hometeamabbr,l=!0),"string"==typeof C.awayteamabbr&&(r.awayTeamAbbr=C.awayteamabbr,l=!0),l&&s.trigger("app:forced-params-strings",r),L&&s.trigger("app:stream-only"),v.initalize(C),a.debug("initialize start"),y.initialize({videoDisabled:S,visualisationDisabled:T}),E||(a.debug("initilizeSocketHandler start"),i=new c,y.initilizeSocketHandler(i),d.isPremVis()&&(new u).initialize()),a.debug("initilizeVisualisation start"),y.initilizeVisualisation({visualisation:e.visualisationModel,pitch:k,lang:A,cssPath:P,cssDiff:O,chevrons:N,locdiff:w.localisationDiffPath}),a.debug("initilizeVideo start"),a.debug("initialize end"),R&&U(),["101","102","103","104","105"].indexOf(window.token||window.validationToken)>-1&&(t="COMMON->STR->"+(window.wberr||window.token||window.validationToken).toUpperCase(),window.premiumVisActive||(s.trigger("app:error",{description:b.get(t)}),s.trigger("data:no-rball"))),E&&s.trigger("app:videoonly"),T&&s.trigger("app:statsonly"),s.once("app:ready",window.analytics.trackPageView),window.premiumVisActive&&_.addClass("premium-vis"),window.loader.changeElementsState(n.bootstrap),j=!0)}r((functoadLocales(A,window.sport.toLowerCase(),(function(){g.loadDiffLocales(M,q)})):g.loadDiffLocales(M,q)})),window.loader.changeElementsState(n.csbApp)})),require(["libs/libs"],(function(){require(["mainApp","jquery"],(function(e,t){t.support.cors=!0,t.ajaxSetup({cache:!0}),"16"===window.sportId&&t("body").addClass("beachvolleyball")}))})),define("main",(function(){}));