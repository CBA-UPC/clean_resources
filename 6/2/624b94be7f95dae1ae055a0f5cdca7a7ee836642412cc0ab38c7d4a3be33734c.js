var k={exports:{}};/*! For license information please see einbliqio-stream-analytics.LICENSE.txt */(function(T,D){(function(C,P){T.exports=P()})(self,function(){return(()=>{var C={575:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(e,t,d,r){r===void 0&&(r=d),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[d]}})}:function(e,t,d,r){r===void 0&&(r=d),e[r]=t[d]}),_=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),h=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var d in e)d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)&&y(t,e,d);return _(t,e),t};Object.defineProperty(a,"__esModule",{value:!0}),a.AdapterDashJs=void 0;var o=h(l(105)),m=function(){function e(t,d){this._adapterManager=null,t&&d?(this._adapterManager=new n(t,d),this._adapterManager.coupleAdapter()):console.warn("EINBLIQ.IO | dash.js player or session configuratio not provided")}return e.prototype.terminateCurrentSession=function(){this._adapterManager&&this._adapterManager.deCoupleAdapter(!1)},e}();a.AdapterDashJs=m;var n=function(){function e(t,d){var r=this;this._isAutoPreload=!0,this._captionsActive=!1,this._session=new o.Session({}),this.onConnecting=function(){r._session.addPlayState(o.PlayStateIds.CONNECTING,r._adapterUtils.getCurrentPlaybackTimeInMillis(r._mediaElement))},this.onPlaying=function(){r._session.addPlayState(o.PlayStateIds.PLAYING,r._adapterUtils.getCurrentPlaybackTimeInMillis(r._mediaElement),r._adapterUtils.getCurrentBitrateInKbps(r._dashInstance))},this.onCanplay=function(){r._session.addPlayState(o.PlayStateIds.CANPLAY,r._adapterUtils.getCurrentPlaybackTimeInMillis(r._mediaElement))},this.onPause=function(){r._session.addPlayState(o.PlayStateIds.PAUSE,r._adapterUtils.getCurrentPlaybackTimeInMillis(r._mediaElement),r._adapterUtils.getCurrentBitrateInKbps(r._dashInstance))},this.onProgess=function(){r.checkMuted()},this.onWaiting=function(){r._session.addPlayState(o.PlayStateIds.BUFFERING,r._adapterUtils.getCurrentPlaybackTimeInMillis(r._mediaElement),r._adapterUtils.getCurrentBitrateInKbps(r._dashInstance))},this.onSeeking=function(){r._session.addPlayState(o.PlayStateIds.SEEKING,o.PlayStateIds.PLAYING,r._adapterUtils.getCurrentPlaybackTimeInMillis(r._mediaElement))},this.onSwitched=function(){r._session.addPlayState(o.PlayStateIds.SWITCHED,r._adapterUtils.getCurrentPlaybackTimeInMillis(r._mediaElement),r._adapterUtils.getCurrentBitrateInKbps(r._dashInstance))},this.onError=function(s){var u={message:"undefined error",description:"",severity:o.ErrorSeverityIds.CRITICAL};s&&s.error&&(s.error.code&&(u.message="Code: "+s.error.code.toString()),s.error.message&&(u.description=s.error.message),s.type&&s.type!="error"&&(u.severity=o.ErrorSeverityIds.WARNING)),r._session.addError(u.message,u.severity,u.description)},this.onEnded=function(s){s&&s.isLast&&(r._session.addPlayState(o.PlayStateIds.ENDED,r._adapterUtils.getCurrentPlaybackTimeInMillis(r._mediaElement)),r._session.terminate(),r.deCoupleAdapter(!0))},this.onCaptionRendered=function(){r._captionsActive||(r._captionsActive=!0,r._session.addCustomData({"web.subtitles.active":r._captionsActive}))},this.onFragLoaded=function(s){if(s&&s.request&&s.request.mediaType&&s.request.mediaType=="video"&&s.request.requestEndDate&&s.request.firstByteDate&&s.request.bytesTotal){var u=s.request.requestEndDate.getMilliseconds()-s.request.firstByteDate.getMilliseconds();if(!(u<25)){var f=Math.round(8*s.request.bytesTotal/u);r._session.addCurrentNetworkThroughput(f)}}},this.onCmcdInformationGenerated=function(s){s&&s.cmcdData&&r._session.addCmcdInformation(s.cmcdData)},this.checkMuted=function(){r._isMuted!==r._dashInstance.isMuted()&&(r._session.addCustomData({"web.mute":r._dashInstance.isMuted()}),r._isMuted=r._dashInstance.isMuted())},this.onPeriodSwitchStarted=function(s){if(s&&s.toStreamInfo){var u={isLast:s.toStreamInfo.isLast,relativeStartInMillis:1e3*s.toStreamInfo.start,relativeEndInMillis:1e3*(s.toStreamInfo.start+s.toStreamInfo.duration),name:s.toStreamInfo.id};r._session.addPeriodInformation(u)}},this.onDrmSystemSelected=function(s){if(s&&s.data&&s.data.ksConfiguration){var u={systemString:s.data.mksa.selectedSystemString,audioCapabilities:s.data.ksConfiguration.audioCapabilities,videoCapabilities:s.data.ksConfiguration.videoCapabilities,encryptionTypes:s.data.ksConfiguration.initDataTypes};r._session.addDrmInformation(u)}},this._adapterUtils=new i,this._dashInstance=t,this._sessionConfiguration=d,this._mediaElement=t.getVideoElement()}return e.prototype.coupleAdapter=function(){this._sessionConfiguration.autoPreload=this._isAutoPreload,this._session=new o.Session(this._sessionConfiguration),this.addInitialCustomData(),this.attachEventListeners(),console.log("session disabled?",this._session.isDisabled())},e.prototype.deCoupleAdapter=function(t){this._session&&(this._session.terminate(),this.removeEventListeners(),this._captionsActive=!1,t?this.coupleAdapter():(this._dashInstance=null,this._mediaElement=null,this._session=null,this._sessionConfiguration=null))},e.prototype.attachEventListeners=function(){this._mediaElement&&(this._mediaElement.addEventListener("loadstart",this.onConnecting),this._mediaElement.addEventListener("playing",this.onPlaying),this._mediaElement.addEventListener("canplay",this.onCanplay),this._mediaElement.addEventListener("pause",this.onPause),this._mediaElement.addEventListener("progress",this.onProgess),this._mediaElement.addEventListener("waiting",this.onWaiting)),this._dashInstance&&(this._dashInstance.on("playbackSeeking",this.onSeeking),this._dashInstance.on("qualityChangeRendered",this.onSwitched),this._dashInstance.on("error",this.onError),this._dashInstance.on("playbackError",this.onError),this._dashInstance.on("playbackEnded",this.onEnded),this._dashInstance.on("captionRendered",this.onCaptionRendered),this._dashInstance.on("fragmentLoadingCompleted",this.onFragLoaded),this._dashInstance.on("cmcdDataGenerated",this.onCmcdInformationGenerated),this._dashInstance.on("public_keySystemSelected",this.onDrmSystemSelected),this._dashInstance.on("periodSwitchStarted",this.onPeriodSwitchStarted))},e.prototype.removeEventListeners=function(){this._mediaElement&&(this._mediaElement.removeEventListener("loadstart",this.onConnecting),this._mediaElement.removeEventListener("playing",this.onPlaying),this._mediaElement.removeEventListener("canplay",this.onCanplay),this._mediaElement.removeEventListener("pause",this.onPause),this._mediaElement.removeEventListener("progress",this.onProgess),this._mediaElement.removeEventListener("waiting",this.onWaiting)),this._dashInstance&&(this._dashInstance.off("playbackSeeking",this.onSeeking),this._dashInstance.off("qualityChangeRendered",this.onSwitched),this._dashInstance.off("error",this.onError),this._dashInstance.off("playbackError",this.onError),this._dashInstance.off("playbackEnded",this.onEnded),this._dashInstance.off("captionRendered",this.onCaptionRendered),this._dashInstance.off("fragmentLoadingCompleted",this.onFragLoaded),this._dashInstance.off("cmcdDataGenerated",this.onCmcdInformationGenerated),this._dashInstance.off("public_keySystemSelected",this.onDrmSystemSelected),this._dashInstance.off("periodSwitchStarted",this.onPeriodSwitchStarted))},e.prototype.addInitialCustomData=function(){this._session.addCustomData({"web.player":"dash.js"}),this._dashInstance.getVersion()&&this._session.addCustomData({"web.player.version":this._dashInstance.getVersion()});var t=this._mediaElement;t.width&&t.height&&this._session.addCustomData({"web.surfaceSize":t+"x"+t.height}),window&&window.innerWidth&&window.innerHeight&&this._session.addCustomData({"web.applicationSize":window.innerWidth.toString()+"x"+window.innerHeight.toString()}),screen&&screen.width&&screen.height&&this._session.addCustomData({"web.screenSize":screen.width.toString()+"x"+screen.height.toString()}),this.checkMuted()},e}(),i=function(){function e(){}return e.prototype.getCurrentPlaybackTimeInMillis=function(t){return 1e3*t.currentTime},e.prototype.getCurrentBitrateInKbps=function(t){for(var d=0,r=["video","audio"],s=0;s<r.length;s++){var u=t.getQualityFor(r[s]),f=t.getBitrateInfoListFor(r[s]);if(u>=0&&f)for(var v=0;v<f.length;v++){var p=f[v];p&&p.qualityIndex===u&&p.bitrate&&(d+=Math.round(p.bitrate/1024))}}return d},e}();a.default=m},595:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(n,i,e,t){t===void 0&&(t=e),Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[e]}})}:function(n,i,e,t){t===void 0&&(t=e),n[t]=i[e]}),_=this&&this.__setModuleDefault||(Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i}),h=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&y(i,n,e);return _(i,n),i};Object.defineProperty(a,"__esModule",{value:!0}),a.AdapterJwPlayer=void 0;var o=h(l(105)),m=function(){function n(i,e){i||!i.on?e?(this.jwPlayer=i,this.einbliqIoSessionConfiguration=e,this.einbliqIoSessionConfiguration.autoPreload=!0,this.einbliqIoSessionConfiguration.customData?this.einbliqIoSessionConfiguration["web.player"]="JW Player":this.einbliqIoSessionConfiguration.customData={"web.player":"JW Player"},this.jwPlayer.on("setupError",(function(t){t&&(this.einbliqIoSessionConfiguration.mediaUrl||(this.einbliqIoSessionConfiguration.mediaUrl="jwplayer_setuperror_url"),this.einbliqIoSession=new o.Session(this.einbliqIoSessionConfiguration),this.einbliqIoSession.addError(this.getErrorMessage(t),o.ErrorSeverityIds.CRITICAL,this.getErrorDescription(t)))}).bind(this)),this.jwPlayer.on("ready",(function(){this.jwPlayer.on("playlistItem",(function(){this.einbliqIoSession&&this.einbliqIoSession.terminate(),this.einbliqIoSessionConfiguration.mediaUrl=this.getJwPlayerMediaUrl(this.jwPlayer),this.einbliqIoSession=new o.Session(this.einbliqIoSessionConfiguration),this.einbliqIoSession.addCustomData({"web.mute":this.jwPlayer.getMute()}),this.einbliqIoSession.addPlayState(o.PlayStateIds.CONNECTING)}).bind(this)),this.jwPlayer.on("levels",(function(t){this.einbliqIoSession.addPlayState(o.PlayStateIds.CANPLAY)}).bind(this)),this.jwPlayer.on("play",(function(){this.einbliqIoSession.addPlayState(o.PlayStateIds.PLAYING,this.getPlaybackPositionInMillis(this.jwPlayer.getPosition()))}).bind(this)),this.jwPlayer.on("pause",(function(){this.einbliqIoSession.addPlayState(o.PlayStateIds.PAUSE,this.getPlaybackPositionInMillis(this.jwPlayer.getPosition()))}).bind(this)),this.jwPlayer.on("buffer",(function(){this.einbliqIoSession.addPlayState(o.PlayStateIds.BUFFERING,this.getPlaybackPositionInMillis(this.jwPlayer.getPosition()))}).bind(this)),this.jwPlayer.on("complete",(function(){this.einbliqIoSession.addPlayState(o.PlayStateIds.ENDED,this.getPlaybackPositionInMillis(this.jwPlayer.getPosition())),this.einbliqIoSession.terminate()}).bind(this)),this.jwPlayer.on("error",(function(t){this.einbliqIoSession.addPlayState(o.PlayStateIds.ERROR,this.getPlaybackPositionInMillis(this.jwPlayer.getPosition())),this.einbliqIoSession.addError(this.getErrorMessage(t),o.ErrorSeverityIds.CRITICAL,this.getErrorDescription(t))}).bind(this)),this.jwPlayer.on("warning",(function(t){this.einbliqIoSession.addPlayState(o.PlayStateIds.ERROR,this.getPlaybackPositionInMillis(this.jwPlayer.getPosition())),this.einbliqIoSession.addError(this.getErrorMessage(t),o.ErrorSeverityIds.WARNING,this.getErrorDescription(t))}).bind(this)),this.jwPlayer.on("visualQuality",(function(t){var d=0;t&&t.level&&t.level.bitrate&&(d=t.level.bitrate/1e3),this.einbliqIoSession.addPlayState(o.PlayStateIds.SWITCHED,this.getPlaybackPositionInMillis(this.jwPlayer.getPosition()),d)}).bind(this)),this.jwPlayer.on("playbackRateChanged",(function(t){t&&t.playbackRate&&this.einbliqIoSession.addCustomData({"web.playbackRate":t.playbackRate})}).bind(this)),this.jwPlayer.on("fullscreen",(function(t){t&&this.einbliqIoSession.addCustomData({"web.fullscreen":t.fullscreen})}).bind(this)),this.jwPlayer.on("resize",(function(t){t&&t.width&&t.height&&this.einbliqIoSession.addCustomData({"web.surfaceSize":t.width.toString()+"x"+t.height.toString()})}).bind(this)),this.jwPlayer.on("seek",(function(){this.einbliqIoSession.addPlayState(o.PlayStateIds.SEEKING,this.getPlaybackPositionInMillis(this.jwPlayer.getPosition()))}).bind(this)),this.jwPlayer.on("mute",(function(t){t&&this.einbliqIoSession.addCustomData({"web.mute":t.mute})}).bind(this)),this.jwPlayer.on("remove",(function(){this.einbliqIoSession.terminate(),this.einbliqIoSession=null}).bind(this))}).bind(this))):console.error("einbliq.io | session configuration not defined. Disabling session"):console.error("einbliq.io | JW Player not defined. Disabling session")}return n.prototype.getJwPlayerMediaUrl=function(i){if(i&&i.getPlaylist()&&typeof i.getPlaylistIndex()=="number"){var e=i.getPlaylist()[i.getPlaylistIndex()];if(e&&e.file)return e.file}},n.prototype.getErrorMessage=function(i){var e="";return i&&(i.message?e+=i.message:i.key&&(e+=i.key),i.code&&(e+=" Code: "+i.code.toString())),e},n.prototype.getErrorDescription=function(i){var e="";return i&&i.sourceError&&(i.sourceError.details&&(e+=i.sourceError.details),i.sourceError.type&&(e+=". Type: "+i.sourceError.type)),e},n.prototype.getPlaybackPositionInMillis=function(i){return i&&typeof i=="number"?1e3*i:0},n}();a.AdapterJwPlayer=m,a.default=m},330:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(n,i,e,t){t===void 0&&(t=e),Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[e]}})}:function(n,i,e,t){t===void 0&&(t=e),n[t]=i[e]}),_=this&&this.__setModuleDefault||(Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i}),h=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&y(i,n,e);return _(i,n),i};Object.defineProperty(a,"__esModule",{value:!0}),a.AdapterVideoJs=void 0;var o=h(l(105)),m=function(){function n(i,e){var t=this;if(this._isAutoPreload=!0,this._isStarted=!1,this._activeCaptions=!1,this._isBuffering=!1,this._techInitialised=!1,this._session=new o.Session({}),this.errorLookup={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_DECODE",3:"MEDIA_ERR_NETWORK",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"},this.preloadLookup={none:!1,metadata:!0,auto:!0},i||i.on||i.tech)if(e){this.videoJsPlayer=i,this.einbliqIoSessionConfiguration=e,this._isMuted=this.videoJsPlayer.muted();var d=this.videoJsPlayer.preload();d in this.preloadLookup&&(this._isAutoPreload=this.preloadLookup[d]),this.initialiseSession(),this.initialiseTech(),this.videoJsPlayer.on("ready",function(){t.initialiseTech()}),this.videoJsPlayer.on("loadstart",function(){t.initialiseTech(),t._isBuffering=!1}),this.videoJsPlayer.on("canplay",function(){t.initialiseTech(),t._isBuffering=!1,t._session.addPlayState(o.PlayStateIds.CANPLAY,t.getPlaybackPositionInMillis())}),this.videoJsPlayer.on("firstplay",function(){t.initialiseTech(),t._isBuffering=!1,t._isStarted||(t._isStarted=!0,t._session.addPlayState(o.PlayStateIds.CONNECTING,t.getPlaybackPositionInMillis()))}),this.videoJsPlayer.on("playing",function(){t.initialiseTech(),t._isBuffering=!1,t._session.addPlayState(o.PlayStateIds.PLAYING,t.getPlaybackPositionInMillis(),t.getBitrateInKbps())}),this.videoJsPlayer.on("progress",function(){t._isStarted||(t._isStarted=!0,t._session.addPlayState(o.PlayStateIds.CONNECTING,t.getPlaybackPositionInMillis()))}),this.videoJsPlayer.on("seeking",function(){t._isBuffering=!1,t._session.addPlayState(o.PlayStateIds.SEEKING,t.getPlaybackPositionInMillis())}),this.videoJsPlayer.on("pause",function(){t._isBuffering=!1,t._session.addPlayState(o.PlayStateIds.PAUSE,t.getPlaybackPositionInMillis())}),this.videoJsPlayer.on("waiting",function(){t._isBuffering=!0,t._session.addPlayState(o.PlayStateIds.BUFFERING,t.getPlaybackPositionInMillis())}),this.videoJsPlayer.on("ended",function(){t._isBuffering=!1,t._session.addPlayState(o.PlayStateIds.ENDED,t.getPlaybackPositionInMillis()),t._session.isDisabled()||(t._session.terminate(),t.initialiseSession())}),this.videoJsPlayer.on("error",function(){var r=t.videoJsPlayer.error();t._session.addPlayState(o.PlayStateIds.ERROR,t.getPlaybackPositionInMillis()),t._session.addError(t.getErrorMessage(r),o.ErrorSeverityIds.CRITICAL,t.getErrorDescription(r))}),this.videoJsPlayer.qualityLevels!=null&&this.videoJsPlayer.qualityLevels().on("change",function(){t._session.addPlayState(o.PlayStateIds.SWITCHED,t.getPlaybackPositionInMillis(),t.getBitrateInKbps())}),this.videoJsPlayer.on("playbackrateschange",function(){var r=t.videoJsPlayer.playbackRate();r&&t._session.addCustomData({"web.playbackRate":r})}),this.videoJsPlayer.on("fullscreenchange",function(){t._session.addCustomData({"web.fullscreen":t.videoJsPlayer.isFullscreen()})}),this.videoJsPlayer.on("resize",function(){var r=t.videoJsPlayer.videoWidth(),s=t.videoJsPlayer.videoHeight();r&&s&&t._session.addCustomData({"web.surfaceSize":r.toString()+"x"+s.toString()})}),this.videoJsPlayer.on("volumechange",function(){t._isMuted!=t.videoJsPlayer.muted()&&(t._isMuted=t.videoJsPlayer.muted(),t._session.addCustomData({"web.mute":t._isMuted}))}),this.videoJsPlayer.on("dispose",function(){t._session.terminate(),t.initialiseSession()})}else console.error("einbliq.io | session configuration not defined. Disabling session");else console.error("einbliq.io | Video.js Player not defined. Disabling session")}return n.prototype.terminateCurrentSession=function(){this._session.terminate()},n.prototype.initialiseTech=function(){var i=this;if(!this._techInitialised){var e=this.videoJsPlayer.tech(!1);e&&(e.on("usage",function(t){if(t&&t.name)switch(t.name){case"vhs-gap-skip":case"vhs-rendition-blacklisted":case"vhs-rendition-change-exclude":case"vhs-unknown-waiting":case"vhs-live-resync":case"vhs-video-underflow":case"vhs-error-reload-initialized":case"vhs-error-reload":case"vhs-error-reload-canceled":i._session.addError(t.name,i._isBuffering?o.ErrorSeverityIds.CRITICAL:o.ErrorSeverityIds.WARNING)}}),this._techInitialised=!0)}},n.prototype.initialiseSession=function(){this.einbliqIoSessionConfiguration.autoPreload=this._isAutoPreload,this.einbliqIoSessionConfiguration.mediaUrl="videojs_setuperror_url",this.videoJsPlayer.currentSrc()&&(this.einbliqIoSessionConfiguration.mediaUrl=this.videoJsPlayer.currentSrc()),this._session=new o.Session(this.einbliqIoSessionConfiguration),this._session.addCustomData({"web.player":"Videojs Player","web.referrer":window.location.href}),this._isMuted&&this._session.addCustomData({"web.mute":this._isMuted}),this._session.on(o.Events.sendData,(function(){if(this.checkCaptions(),this.videoJsPlayer.bufferedEnd()>0&&this.videoJsPlayer.currentTime()>=0){var i=Math.round(1e3*(this.videoJsPlayer.bufferedEnd()-this.videoJsPlayer.currentTime()));this._session.addCustomData({"web.currentBufferLengthInMillis":i})}}).bind(this))},n.prototype.getErrorMessage=function(i){var e="";return i&&i.code&&(e+=this.errorLookup[i.code],e+=" Code: "+i.code.toString()),e},n.prototype.getErrorDescription=function(i){var e="";return i&&i.message&&(e+=i.message),e},n.prototype.getPlaybackPositionInMillis=function(){var i=this.videoJsPlayer.currentTime();return i&&typeof i=="number"?1e3*i:null},n.prototype.getBitrateInKbps=function(){if(this.videoJsPlayer.qualityLevels!=null){var i=this.videoJsPlayer.qualityLevels();if(i&&i.selectedIndex>=0){var e=i[i.selectedIndex].bitrate;if(e)return e/1e3}}return null},n.prototype.checkCaptions=function(){var i=this.videoJsPlayer.textTracks();if(i){for(var e=!1,t=0;t<i.length;t++){var d=i[t];d.mode==="showing"&&(e=!0),d.mode!=="showing"||this._activeCaptions||(this._session.addCustomData({"web.subtitles.active":!0,"web.subtitles.language":d.language}),this._activeCaptions=!0)}e!=this._activeCaptions&&(this._session.addCustomData({"web.subtitles.active":!1}),this._activeCaptions=!1)}},n}();a.AdapterVideoJs=m,a.default=m},852:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(i,e,t,d){d===void 0&&(d=t),Object.defineProperty(i,d,{enumerable:!0,get:function(){return e[t]}})}:function(i,e,t,d){d===void 0&&(d=t),i[d]=e[t]}),_=this&&this.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),h=this&&this.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&y(e,i,t);return _(e,i),e};Object.defineProperty(a,"__esModule",{value:!0});var o=h(l(18)),m=h(l(763)),n=function(){function i(e){if(this.sid=e.data.sessionId,this.rn=e.data.requestNumber,this.t=new Date().getTime()-e.data.initialisationTimeStamp,o.isNotEmptyArray(e.data.playStates)){this.ps=[];for(var t=0,d=e.data.playStates;t<d.length;t++){var r=d[t];this.ps.push(r.getBeaconPlayState())}}if(o.isNotEmptyArray(e.data.errors)){this.es=[];for(var s=0,u=e.data.errors;s<u.length;s++){var f=u[s];this.es.push(f.getBeaconError())}}if(o.isNotEmptyArray(e.data.customData)){this.cd=[];for(var v=0,p=e.data.customData;v<p.length;v++){var M=p[v];this.cd.push(M.getBeaconCustomData())}}if(o.isNotEmptyArray(e.data.cmcdArray)){this.cmcdList=[];for(var N=0,S=e.data.cmcdArray;N<S.length;N++){var c=S[N];this.cmcdList.push(c.getBeaconCmcdInformation(e.state.sendingFullCmcdInformation()))}}if(o.isNotEmptyArray(e.data.contentDeliveryNetworks)){this.cdns=[];for(var I=0,E=e.data.contentDeliveryNetworks;I<E.length;I++){var b=E[I];this.cdns.push(b.getBeaconContentDeliverNetwork())}}o.isDefined(e.data.networkThroughput)&&(this.netthr=e.data.networkThroughput.getBeaconNetworkThroughput()),o.isDefined(e.data.drmModelData)&&(this.drm=e.data.drmModelData.getBeaconDrmInformation()),o.isDefined(e.data.periodModelData)&&(this.per=e.data.periodModelData.getBeaconPeriodInformation()),o.isDefined(e.data.contentDeliveryNetworkHeader)&&(this.cdn=e.data.contentDeliveryNetworkHeader.getBeaconCdnHeader()),e.state.running||(this.sr=!1),e.state.terminated&&(this.st=!0),e.data.requestNumber===0&&(this.it=e.data.initialisationTimeStamp,this.mu=e.data.mediaUrl,this.mt=e.data.mediaTitle,this.ms=e.data.mediaSeries,this.mc=e.data.mediaCategory,this.mid=e.data.mediaId,this.tid=e.data.termId,this.crid=e.data.crid,this.av=e.data.applicationVersion,this.an=e.data.applicationName,this.lv=m.LIBRARY_VERSION)}return i.prototype.getUriEncodedData=function(){return encodeURIComponent(JSON.stringify(this))},i}();a.default=n},853:(g,a)=>{Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function y(_,h){this.time=_>0?new Date().getTime()-_:0,this.cmcd=h}return y.prototype.getBeaconCmcdInformation=function(_){var h={t:this.time,cmcd:{}};return _?(h.cmcd=this.cmcd,h):(this.cmcd.br&&(h.cmcd.br=this.cmcd.br),this.cmcd.bl&&(h.cmcd.bl=this.cmcd.bl),this.cmcd.d&&(h.cmcd.d=this.cmcd.d),this.cmcd.dl&&(h.cmcd.dl=this.cmcd.dl),this.cmcd.mtp&&(h.cmcd.mtp=this.cmcd.mtp),this.cmcd.nor&&(h.cmcd.nor=this.cmcd.nor),this.cmcd.nrr&&(h.cmcd.nrr=this.cmcd.nrr),this.cmcd.ot&&(h.cmcd.ot=this.cmcd.ot),this.cmcd.pr&&(h.cmcd.pr=this.cmcd.pr),this.cmcd.rtp&&(h.cmcd.rtp=this.cmcd.rtp),this.cmcd.su&&(h.cmcd.su=this.cmcd.su),this.cmcd.tb&&(h.cmcd.tb=this.cmcd.tb),h)},y}();a.default=l},763:(g,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BEACON_ERROR_COUNT_MAX=a.SESSION_INTERVAL=a.TIME=a.LIBRARY_VERSION=a.SERVER_DOMAIN=a.LIBRARY_TYPE=a.CDN_URL_NO_CACHE_PREFIX=a.EINBLIQIO_ERRORS=a.HEADERS_CDN_IP_KEYS=a.HEADERS_CDN_NAME_KEYS=a.HTTP_READY_STATE_2=a.HTTP_STATUS_CODE_200=a.CUSTOMER_ID_LENGTH=void 0,a.CUSTOMER_ID_LENGTH=8,a.HTTP_STATUS_CODE_200=200,a.HTTP_READY_STATE_2=2,a.HEADERS_CDN_NAME_KEYS=["CDN","cdn","X-EINBLIQIO-CDN-NAME","x-einbliqio-cdn-name"],a.HEADERS_CDN_IP_KEYS=["X-IP-ADDRESS","x-ip-address","X-GL-EDGEIP","x-gl-edgeip","X-EINBLIQIO-CDN-EDGE-IP","x-einbliqio-cdn-edge-ip"],a.EINBLIQIO_ERRORS={ERROR_ERROR_MESSAGE_NOT_DEFINED:"error message not defined",SENDER_BEACON_SEND_ERROR:"error sending beacon to einbliq.io backend"},a.CDN_URL_NO_CACHE_PREFIX="ern=",a.LIBRARY_TYPE="html5",a.SERVER_DOMAIN="1bliq.io",a.LIBRARY_VERSION="1.4.1",a.TIME={SECONDS_IN_MILLIS:1e3},a.SESSION_INTERVAL={MAX_BEACON_COUNT:10,INITIAL_SEND_DELAY_IN_MILLIS:5e3,REQUEST_NUMBER_INTERVAL_MAPPINGS:{ONE:5,TWO:10,THREE:15,DEFAULT:60},MIN_TIME_DIFF_BETWEEN_BEACONS_IN_MILLIS:2e3},a.BEACON_ERROR_COUNT_MAX=3},697:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(n,i,e,t){t===void 0&&(t=e),Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[e]}})}:function(n,i,e,t){t===void 0&&(t=e),n[t]=i[e]}),_=this&&this.__setModuleDefault||(Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i}),h=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&y(i,n,e);return _(i,n),i};Object.defineProperty(a,"__esModule",{value:!0});var o=h(l(18)),m=function(){function n(i,e){o.isNotNegativeNumber(i)&&(this.time=new Date().getTime()-i,this.url=e)}return n.prototype.getBeaconContentDeliverNetwork=function(){return{t:this.time,u:this.url}},n}();a.default=m},710:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(n,i,e,t){t===void 0&&(t=e),Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[e]}})}:function(n,i,e,t){t===void 0&&(t=e),n[t]=i[e]}),_=this&&this.__setModuleDefault||(Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i}),h=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&y(i,n,e);return _(i,n),i};Object.defineProperty(a,"__esModule",{value:!0});var o=h(l(18)),m=function(){function n(i,e){o.isNotEmptyString(i)&&(this.name=i),o.isNotEmptyString(e)&&(this.cdnEdgeIp=e)}return n.prototype.getBeaconCdnHeader=function(){var i={};return o.isNotEmptyString(this.name)&&(i.n=this.name),o.isNotEmptyString(this.cdnEdgeIp)&&(i.ceip=this.cdnEdgeIp),i},n}();a.default=m},791:(g,a)=>{Object.defineProperty(a,"__esModule",{value:!0});var l=function(){function y(_,h){this.time=_>0?new Date().getTime()-_:0,this.customData=h}return y.prototype.getBeaconCustomData=function(){return{t:this.time,cd:this.customData}},y}();a.default=l},503:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(n,i,e,t){t===void 0&&(t=e),Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[e]}})}:function(n,i,e,t){t===void 0&&(t=e),n[t]=i[e]}),_=this&&this.__setModuleDefault||(Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i}),h=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&y(i,n,e);return _(i,n),i};Object.defineProperty(a,"__esModule",{value:!0});var o=h(l(18)),m=function(){function n(i){this.drmModel=i}return n.prototype.getBeaconDrmInformation=function(){var i={};if(o.isDefined(this.drmModel.systemString)&&(i.ss=this.drmModel.systemString),o.isDefined(this.drmModel.audioCapabilities)&&this.drmModel.audioCapabilities!=null&&this.drmModel.audioCapabilities.length>0){i.ac=[];for(var e=0;e<this.drmModel.audioCapabilities.length;e++){var t={};o.isNotEmptyString(this.drmModel.audioCapabilities[e].contentType)&&(t.ct=this.drmModel.audioCapabilities[e].contentType),o.isNotEmptyString(this.drmModel.audioCapabilities[e].encryptionScheme)&&(t.es=this.drmModel.audioCapabilities[e].encryptionScheme),o.isNotEmptyString(this.drmModel.audioCapabilities[e].robustness)&&(t.r=this.drmModel.audioCapabilities[e].robustness),i.ac.push(t)}}if(o.isDefined(this.drmModel.videoCapabilities)&&this.drmModel.videoCapabilities!=null&&this.drmModel.videoCapabilities.length>0)for(i.vc=[],e=0;e<this.drmModel.videoCapabilities.length;e++){var d={};o.isNotEmptyString(this.drmModel.videoCapabilities[e].contentType)&&(d.ct=this.drmModel.videoCapabilities[e].contentType),o.isNotEmptyString(this.drmModel.videoCapabilities[e].encryptionScheme)&&(d.es=this.drmModel.videoCapabilities[e].encryptionScheme),o.isNotEmptyString(this.drmModel.videoCapabilities[e].robustness)&&(d.r=this.drmModel.videoCapabilities[e].robustness),i.vc.push(d)}return o.isDefined(this.drmModel.encryptionTypes)&&(i.tn=this.drmModel.encryptionTypes),i},n}();a.default=m},89:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(e,t,d,r){r===void 0&&(r=d),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[d]}})}:function(e,t,d,r){r===void 0&&(r=d),e[r]=t[d]}),_=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),h=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var d in e)d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)&&y(t,e,d);return _(t,e),t};Object.defineProperty(a,"__esModule",{value:!0}),a.isValidErrorSeverityId=void 0;var o=h(l(763)),m=h(l(18)),n=l(139),i=function(){function e(t,d,r,s){this.errorSeverity=n.ERRORS_SEVERITIES_MAPPING_IDS[d],this.errorSeverityId=d,this.time=new Date().getTime()-t,this.errorMessage=m.isNotEmptyString(r)?r:o.EINBLIQIO_ERRORS.ERROR_ERROR_MESSAGE_NOT_DEFINED,m.isNotEmptyString(s)&&s!==void 0&&(this.errorDescription=s)}return e.prototype.getBeaconError=function(){var t={t:this.time,sid:this.errorSeverityId,em:this.errorMessage};return m.isNotEmptyString(this.errorDescription)&&(t.ed=this.errorDescription),t},e}();a.default=i,a.isValidErrorSeverityId=function(e){return Object.values(n.ErrorSeverityIds).includes(e)}},11:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(n,i,e,t){t===void 0&&(t=e),Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[e]}})}:function(n,i,e,t){t===void 0&&(t=e),n[t]=i[e]}),_=this&&this.__setModuleDefault||(Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i}),h=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&y(i,n,e);return _(i,n),i};Object.defineProperty(a,"__esModule",{value:!0});var o=h(l(18)),m=function(){function n(){}return n.prototype.addCurrentNetworkThroughput=function(i,e){var t=new Date().getTime()-i;if(o.isDefined(this.startTime)||(this.startTime=t),(!o.isDefined(this.minimum)||e<this.minimum.throughput)&&(this.minimum={time:t,throughput:e}),(!o.isDefined(this.maximum)||this.maximum.throughput<e)&&(this.maximum={time:t,throughput:e}),o.isDefined(this.average)){var d=Math.round(this.average.duration/1e3),r=Math.round((t-this.average.time)/1e3),s=d+r,u=d*this.average.throughput+r*this.current.throughput;this.average.throughput=s?Math.round(u/(d+r)):e,this.average.time=t,this.average.duration=t-this.startTime}else this.average={time:t,throughput:e,duration:t-this.startTime};this.current={time:t,throughput:e}},n.prototype.getBeaconNetworkThroughput=function(){return{min:this.minimum.throughput,max:this.maximum.throughput,avg:this.average.throughput,cur:this.current.throughput}},n}();a.default=m},767:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(n,i,e,t){t===void 0&&(t=e),Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[e]}})}:function(n,i,e,t){t===void 0&&(t=e),n[t]=i[e]}),_=this&&this.__setModuleDefault||(Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i}),h=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&y(i,n,e);return _(i,n),i};Object.defineProperty(a,"__esModule",{value:!0});var o=h(l(18)),m=function(){function n(i){this.periodId=o.createSessionId(),this.periodModel=i}return n.prototype.getBeaconPeriodInformation=function(){var i={};return o.isNotEmptyString(this.periodId)&&(i.pid=this.periodId),o.isTrueBool(this.periodModel.isLast)&&(i.il=this.periodModel.isLast),o.isNotNegativeNumber(this.periodModel.relativeStartInMillis)&&isFinite(this.periodModel.relativeStartInMillis)&&(i.rs=this.periodModel.relativeStartInMillis),o.isNotNegativeNumber(this.periodModel.relativeEndInMillis)&&isFinite(this.periodModel.relativeEndInMillis)&&(i.re=this.periodModel.relativeEndInMillis),o.isNotEmptyString(this.periodModel.name)&&(i.n=this.periodModel.name),i},n}();a.default=m},822:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(i,e,t,d){d===void 0&&(d=t),Object.defineProperty(i,d,{enumerable:!0,get:function(){return e[t]}})}:function(i,e,t,d){d===void 0&&(d=t),i[d]=e[t]}),_=this&&this.__setModuleDefault||(Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e}),h=this&&this.__importStar||function(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var t in i)t!=="default"&&Object.prototype.hasOwnProperty.call(i,t)&&y(e,i,t);return _(e,i),e};Object.defineProperty(a,"__esModule",{value:!0}),a.isValidPlayStateId=void 0;var o=h(l(18)),m=l(75),n=function(){function i(e,t,d,r){this.playState=m.PLAYSTATES_MAPPING_IDS[t],this.playStateId=t,this.time=new Date().getTime()-e,d!==void 0&&o.isDefined(d)&&typeof d=="number"&&(this.currentPlaybackPositionInMillis=Math.round(d)),o.isNotNegativeNumber(r)&&r!==void 0&&(this.currentPlaybackRateInKbps=Math.round(r))}return i.prototype.getBeaconPlayState=function(){var e={t:this.time,id:this.playStateId};return o.isDefined(this.currentPlaybackPositionInMillis)&&(e.pp=this.currentPlaybackPositionInMillis),o.isDefined(this.currentPlaybackRateInKbps)&&(e.pr=this.currentPlaybackRateInKbps),e},i}();a.default=n,a.isValidPlayStateId=function(i){return Object.values(m.PlayStateIds).includes(i)}},253:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(t,d,r,s){s===void 0&&(s=r),Object.defineProperty(t,s,{enumerable:!0,get:function(){return d[r]}})}:function(t,d,r,s){s===void 0&&(s=r),t[s]=d[r]}),_=this&&this.__setModuleDefault||(Object.create?function(t,d){Object.defineProperty(t,"default",{enumerable:!0,value:d})}:function(t,d){t.default=d}),h=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var d={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&y(d,t,r);return _(d,t),d};Object.defineProperty(a,"__esModule",{value:!0});var o=h(l(18)),m=h(l(763)),n=l(139),i=function(){function t(){}return t.prototype.addCdnInfo=function(d){try{var r=!1,s=new XMLHttpRequest;s.open("HEAD",o.createCdnInfoUrl(d.state.cdnHeaderUrl,d.data.requestNumber)),s.onreadystatechange=function(){o.isDefined(this.readyState)&&o.isDefined(this.status)&&!r&&(this.readyState>=m.HTTP_READY_STATE_2&&this.status===m.HTTP_STATUS_CODE_200?(r=!0,d.data.tryAddCdnInfo(this)?d.manager.createAndSendBeacon(d):e(d)):this.status>m.HTTP_STATUS_CODE_200&&(r=!0,e(d)))},s.ontimeout=function(){e(d)},s.onerror=function(){e(d)},s.send()}catch{e(d)}},t.prototype.sendBeacon=function(d,r){try{var s=document.createElement("img");s.src=""+d.state.serverUrl+r.getUriEncodedData(),s.onload=function(){d.state.onBeaconSendSuccess(),d.data.onBeaconSendSuccess(),d.state.running&&d.manager.setNextTimer(d)},s.onerror=function(){d.data.addError(m.EINBLIQIO_ERRORS.SENDER_BEACON_SEND_ERROR,n.ErrorSeverityIds.CRITICAL),d.state.onBeaconSendError(),d.state.beaconSendErrorCount<=m.BEACON_ERROR_COUNT_MAX?d.manager.setNextTimer(d):d.state.onSessionDisable()}}catch{d.state.onSessionDisable()}},t}();function e(t){t.state.getCdnInfo&&(t.state.onDisableCdnInfo(),t.manager.createAndSendBeacon(t))}a.default=i},743:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(u,f,v,p){p===void 0&&(p=v),Object.defineProperty(u,p,{enumerable:!0,get:function(){return f[v]}})}:function(u,f,v,p){p===void 0&&(p=v),u[p]=f[v]}),_=this&&this.__setModuleDefault||(Object.create?function(u,f){Object.defineProperty(u,"default",{enumerable:!0,value:f})}:function(u,f){u.default=f}),h=this&&this.__importStar||function(u){if(u&&u.__esModule)return u;var f={};if(u!=null)for(var v in u)v!=="default"&&Object.prototype.hasOwnProperty.call(u,v)&&y(f,u,v);return _(f,u),f},o=this&&this.__importDefault||function(u){return u&&u.__esModule?u:{default:u}};Object.defineProperty(a,"__esModule",{value:!0}),a.Session=void 0;var m=o(l(488)),n=o(l(696)),i=o(l(77)),e=h(l(18)),t=h(l(763)),d=l(75),r=l(139),s=function(){function u(f){this.manager=new m.default,this.state=new n.default,this.data=new i.default,e.isDefined(f)&&(this.state.parseSessionConfiguration(f),this.state.valid&&this.data.parseSessionConfiguration(f))}return u.prototype.addPlayState=function(f,v,p){this.state.isDisabled()||(this.state.active||this.manager.activateSession(this),this.data.addPlayState(f,v,p),this.state.running||this.manager.startSession(this))},u.prototype.addError=function(f,v,p){this.state.isDisabled()||(this.state.active||this.manager.activateSession(this),this.data.addError(f,v,p),this.manager.onAddError(this))},u.prototype.addCustomData=function(f){this.state.isDisabled()||this.data.addCustomData(f)},u.prototype.addDroppedFrames=function(f){this.state.isDisabled()||this.data.addDroppedFrames(f)},u.prototype.addCmcdInformation=function(f){this.state.isDisabled()||this.data.addCmcdInformation(f)},u.prototype.addCurrentNetworkThroughput=function(f){this.state.isDisabled()||this.data.addCurrentNetworkThrouput(f)},u.prototype.addDrmInformation=function(f){this.state.isDisabled()||this.data.addDrmInformation(f)},u.prototype.addPeriodInformation=function(f){this.state.isDisabled()||(this.data.addPeriodInformation(f),this.manager.onAddPeriod(this))},u.prototype.terminate=function(){this.state.isDisabled()||this.manager.onTerminate(this)},u.prototype.getArgosPlayStateIds=function(){return d.PlayStateIds},u.prototype.getArgosErrorSeverityIds=function(){return r.ErrorSeverityIds},u.prototype.disable=function(){this.state.isDisabled()||this.manager.onDisable(this)},u.prototype.isDisabled=function(){return this.state.isDisabled()},u.prototype.getVersion=function(){return t.LIBRARY_VERSION},u.prototype.getArgosVersion=function(){return this.getVersion()},u.prototype.pause=function(){this.state.isDisabled()||this.state.active&&this.state.running&&this.manager.pauseSession(this)},u.prototype.resume=function(){this.state.isDisabled()||this.state.active&&!this.state.running&&this.manager.resumeSession(this)},u.prototype.on=function(f,v){this.state.isDisabled()||this.manager.addListener(f,v)},u.prototype.off=function(){this.state.isDisabled()||this.manager.removeListeners()},u.prototype.onCdnSwitch=function(f){!this.state.isDisabled()&&e.isNotEmptyString(f)&&(this.data.addCdn(f),this.state.onNewCdn(f))},u}();a.Session=s},77:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(S,c,I,E){E===void 0&&(E=I),Object.defineProperty(S,E,{enumerable:!0,get:function(){return c[I]}})}:function(S,c,I,E){E===void 0&&(E=I),S[E]=c[I]}),_=this&&this.__setModuleDefault||(Object.create?function(S,c){Object.defineProperty(S,"default",{enumerable:!0,value:c})}:function(S,c){S.default=c}),h=this&&this.__importStar||function(S){if(S&&S.__esModule)return S;var c={};if(S!=null)for(var I in S)I!=="default"&&Object.prototype.hasOwnProperty.call(S,I)&&y(c,S,I);return _(c,S),c},o=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(a,"__esModule",{value:!0});var m=l(75),n=l(139),i=h(l(822)),e=h(l(89)),t=o(l(710)),d=o(l(697)),r=o(l(11)),s=o(l(791)),u=o(l(853)),f=o(l(503)),v=o(l(767)),p=h(l(18)),M=h(l(763)),N=function(){function S(){this.sessionId=p.createSessionId(),this.requestNumber=0,this.initialisationTimeStamp=0,this.playStates=[],this.customData=[],this.cmcdArray=[],this.errors=[],this.contentDeliveryNetworks=[],this.periodModelData=new v.default({})}return S.prototype.parseSessionConfiguration=function(c){if(p.isDefined(c)){var I=p.getConfigItemFromArray([c.mediaUrl,c.argosMediaUrl]);I!==void 0&&(this.mediaUrl=I),this.mediaId=p.getConfigItemFromArray([c.mediaId]),this.mediaTitle=p.getConfigItemFromArray([c.mediaTitle,c.argosMediaTitle]),this.mediaSeries=p.getConfigItemFromArray([c.mediaSeries,c.argosSeries]),this.mediaCategory=p.getConfigItemFromArray([c.mediaCategory,c.argosCategory]),this.termId=p.getConfigItemFromArray([c.termId,c.argosTermId]),this.crid=p.getConfigItemFromArray([c.crid,c.argosCrid]),this.applicationVersion=p.getConfigItemFromArray([c.applicationVersion,c.argosApplicationVersion]),this.applicationName=p.getConfigItemFromArray([c.applicationName]);var E=c.customData||c.argosCustomData;p.isDefined(E)&&E!==void 0&&this.customData.push(new s.default(0,E))}},S.prototype.onSessionActivate=function(){this.initialisationTimeStamp=new Date().getTime()},S.prototype.playbackStarted=function(){for(var c=0,I=this.playStates;c<I.length;c++)if(I[c].playStateId===m.PlayStateIds.PLAYING)return!0;return!1},S.prototype.hasSevereError=function(){for(var c=0,I=this.errors;c<I.length;c++)if(I[c].errorSeverityId>=n.ErrorSeverityIds.ERROR)return!0;return!1},S.prototype.addPlayState=function(c,I,E){i.isValidPlayStateId(c)&&this.playStates.push(new i.default(this.initialisationTimeStamp,c,I,E))},S.prototype.addError=function(c,I,E){var b=p.isNotNegativeNumber(I)?I:n.ErrorSeverityIds.WARNING;e.isValidErrorSeverityId(b)&&this.errors.push(new e.default(this.initialisationTimeStamp,b,c,E))},S.prototype.addCustomData=function(c){p.isDefined(c)&&this.customData.push(new s.default(this.initialisationTimeStamp,c))},S.prototype.addCmcdInformation=function(c){p.isDefined(c)&&this.cmcdArray.push(new u.default(this.initialisationTimeStamp,c))},S.prototype.addCurrentNetworkThrouput=function(c){p.isNotNegativeNumber(c)&&(this.networkThroughput||(this.networkThroughput=new r.default),this.networkThroughput.addCurrentNetworkThroughput(this.initialisationTimeStamp,c))},S.prototype.addDrmInformation=function(c){p.isDefined(c)&&(this.drmModelData=new f.default(c))},S.prototype.addPeriodInformation=function(c){p.isDefined(c)&&(this.periodModelData=new v.default(c))},S.prototype.addDroppedFrames=function(c){p.isNotNegativeNumber(c)&&c!==void 0&&(this.countOfDroppedFrames===void 0&&(this.countOfDroppedFrames=0),this.countOfDroppedFrames+=c)},S.prototype.addCdn=function(c){this.contentDeliveryNetworks.push(new d.default(this.initialisationTimeStamp,c))},S.prototype.tryAddCdnInfo=function(c){var I=!1;if(!p.isDefined(c))return I;var E=c.getAllResponseHeaders();if(p.isNotEmptyString(E)){for(var b=void 0,O=void 0,A=0,j=M.HEADERS_CDN_NAME_KEYS;A<j.length;A++){var R=j[A];E.includes(R)&&p.isNotEmptyString(c.getResponseHeader(R))&&(b=c.getResponseHeader(R))}for(var w=0,B=M.HEADERS_CDN_IP_KEYS;w<B.length;w++){var L=B[w];E.includes(L)&&p.isNotEmptyString(c.getResponseHeader(L))&&(O=c.getResponseHeader(L))}(I=p.isNotEmptyString(b)||p.isNotEmptyString(O))&&(this.contentDeliveryNetworkHeader=new t.default(b,O))}return I},S.prototype.onBeaconSendSuccess=function(){this.requestNumber++},S.prototype.clearValues=function(){this.playStates=[],this.errors=[],this.customData=[],this.cmcdArray=[],this.contentDeliveryNetworks=[],p.isNotNegativeNumber(this.countOfDroppedFrames)&&(this.countOfDroppedFrames=void 0),p.isDefined(this.contentDeliveryNetworkHeader)&&(this.contentDeliveryNetworkHeader=void 0),p.isDefined(this.networkThroughput)&&(this.networkThroughput=void 0),p.isDefined(this.drmModelData)&&(this.drmModelData=void 0),p.isDefined(this.periodModelData)&&(this.periodModelData=void 0)},S}();a.default=N},488:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(r,s,u,f){f===void 0&&(f=u),Object.defineProperty(r,f,{enumerable:!0,get:function(){return s[u]}})}:function(r,s,u,f){f===void 0&&(f=u),r[f]=s[u]}),_=this&&this.__setModuleDefault||(Object.create?function(r,s){Object.defineProperty(r,"default",{enumerable:!0,value:s})}:function(r,s){r.default=s}),h=this&&this.__importStar||function(r){if(r&&r.__esModule)return r;var s={};if(r!=null)for(var u in r)u!=="default"&&Object.prototype.hasOwnProperty.call(r,u)&&y(s,r,u);return _(s,r),s},o=this&&this.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(a,"__esModule",{value:!0});var m=o(l(852)),n=h(l(763)),i=h(l(18)),e=o(l(253)),t=l(459),d=function(){function r(){this.listeners=this.getCleanListeners(),this.timer=null,this.sender=new e.default}return r.prototype.activateSession=function(s){var u=this;s.state.onSessionActivate(),s.data.onSessionActivate(),s.state.autoPreload||(this.timer=setTimeout(function(){s.state.running||s.state.terminated||(s.state.onSessionStartOrResume(),s.state.onIntervalTimeChange(!0),u.onBeaconInterval(s,!1))},n.SESSION_INTERVAL.INITIAL_SEND_DELAY_IN_MILLIS))},r.prototype.startSession=function(s){s.data.playbackStarted()&&!s.state.running&&(s.state.onSessionStartOrResume(),s.state.onIntervalTimeChange(!0),this.onBeaconInterval(s,!1))},r.prototype.pauseSession=function(s){s.state.onSessionPause(),this.clearTimer(),this.transferDataNow(s,!1)},r.prototype.resumeSession=function(s){var u=this;this.timer=setTimeout(function(){s.state.running||(s.state.onSessionStartOrResume(),s.state.onIntervalTimeChange(!0),u.onBeaconInterval(s,!1))},n.SESSION_INTERVAL.INITIAL_SEND_DELAY_IN_MILLIS)},r.prototype.onBeaconInterval=function(s,u){s.state.isDisabled()||this.fireEvent(t.Events.sendData),this.clearTimer(),s.state.intervalTimeChange&&s.state.onIntervalTimeUpdate(),s.state.onBeaconSendStart(),!u&&i.getCdnInformation(s)?this.sender.addCdnInfo(s):this.createAndSendBeacon(s)},r.prototype.createAndSendBeacon=function(s){var u=new m.default(s);s.state.intervalBeaconCount<=n.SESSION_INTERVAL.MAX_BEACON_COUNT&&(s.state.beaconSendErrorCount===0&&s.data.clearValues(),this.sender.sendBeacon(s,u))},r.prototype.clearTimer=function(){this.timer!==null&&(clearTimeout(this.timer),this.timer=null)},r.prototype.setNextTimer=function(s){var u=this;this.clearTimer(),this.timer=setTimeout(function(){s.state.onIntervalTimeChange(!1),u.onBeaconInterval(s,!1)},i.getNextTimerIntervalInMillis(s))},r.prototype.onAddError=function(s){s.data.hasSevereError()&&(s.state.running||s.state.onSessionStartOrResume(),this.transferDataNow(s,!0))},r.prototype.onAddPeriod=function(s){s.state.running&&this.transferDataNow(s,!1)},r.prototype.onDisable=function(s){this.removeListeners(),this.clearTimer(),s.state.onSessionDisable()},r.prototype.onTerminate=function(s){this.clearTimer(),this.fireEvent(t.Events.sendData),this.removeListeners(),s.state.onSessionTerminate(),s.data.requestNumber>0&&this.transferDataNow(s,!1)},r.prototype.transferDataNow=function(s,u){var f=this,v=new Date().getTime()-s.state.lastRequestTimeStamp;if(s.state.lastRequestPending||v<n.SESSION_INTERVAL.MIN_TIME_DIFF_BETWEEN_BEACONS_IN_MILLIS){var p=n.SESSION_INTERVAL.MIN_TIME_DIFF_BETWEEN_BEACONS_IN_MILLIS+1e3;return s.state.lastRequestPending||(p=n.SESSION_INTERVAL.MIN_TIME_DIFF_BETWEEN_BEACONS_IN_MILLIS-v),void setTimeout(function(){f.transferDataNow(s,u)},p)}u&&!i.isNotEmptyArray(s.data.errors)||(s.state.onIntervalTimeChange(!0),this.onBeaconInterval(s,!0))},r.prototype.fireEvent=function(s){if(this.listeners[s].length>0)for(var u=0;u<this.listeners[s].length;u++)(0,this.listeners[s][u])()},r.prototype.getCleanListeners=function(){return{sendData:[]}},r.prototype.addListener=function(s,u){if(i.isNotEmptyString(s)&&u&&u instanceof Function)switch(s){case t.Events.sendData:this.listeners[t.Events.sendData].push(u)}},r.prototype.removeListeners=function(){this.listeners=this.getCleanListeners()},r}();a.default=d},696:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(n,i,e,t){t===void 0&&(t=e),Object.defineProperty(n,t,{enumerable:!0,get:function(){return i[e]}})}:function(n,i,e,t){t===void 0&&(t=e),n[t]=i[e]}),_=this&&this.__setModuleDefault||(Object.create?function(n,i){Object.defineProperty(n,"default",{enumerable:!0,value:i})}:function(n,i){n.default=i}),h=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var i={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&y(i,n,e);return _(i,n),i};Object.defineProperty(a,"__esModule",{value:!0});var o=h(l(18)),m=function(){function n(){this.valid=!1,this.active=!1,this.optOut=!1,this.running=!1,this.terminated=!1,this.autoPreload=!1,this.getCdnInfo=!0,this.lastRequestPending=!1,this.lastRequestTimeStamp=0,this.intervalTimeSeconds=new Date().getSeconds(),this.intervalBeaconCount=0,this.intervalTimeChange=!1,this.beaconSendErrorCount=0,this.sendFullCmcdInformationFlag=!0}return n.prototype.parseSessionConfiguration=function(i){var e=o.getConfigItemFromArray([i.customerId,i.argosProviderKey]);o.isNotEmptyString(e)&&o.isCustomerIdLength(e)&&(this.customerId=e,o.isNotEmptyString(o.getConfigItemFromArray([i.mediaUrl,i.argosMediaUrl]))&&(this.cdnHeaderUrl=o.getConfigItemFromArray([i.mediaUrl,i.argosMediaUrl]),this.valid=!0,this.serverUrl=o.createServerUrl(this.customerId),this.autoPreload=o.isTrueBool(i.autoPreload)||o.isTrueBool(i.argosAutoPreload)))},n.prototype.onSessionActivate=function(){this.active=!0},n.prototype.onSessionStartOrResume=function(){this.running=!0},n.prototype.onSessionPause=function(){this.running=!1},n.prototype.onSessionDisable=function(){this.active=!1,this.running=!1,this.optOut=!0},n.prototype.onSessionTerminate=function(){this.active=!1,this.running=!1,this.terminated=!0},n.prototype.onDisableCdnInfo=function(){this.getCdnInfo=!1},n.prototype.onBeaconSendStart=function(){this.lastRequestPending=!0,this.lastRequestTimeStamp=new Date().getTime()},n.prototype.onBeaconSendSuccess=function(){this.lastRequestPending=!1,this.intervalTimeChange?this.intervalBeaconCount++:this.intervalBeaconCount=0,this.beaconSendErrorCount=0},n.prototype.onBeaconSendError=function(){this.lastRequestPending=!1,this.beaconSendErrorCount++},n.prototype.onIntervalTimeUpdate=function(){this.intervalTimeSeconds=new Date().getSeconds()},n.prototype.onIntervalTimeChange=function(i){this.intervalTimeChange=i},n.prototype.onNewCdn=function(i){this.cdnHeaderUrl=i,this.getCdnInfo=!0},n.prototype.isDisabled=function(){return!this.valid||this.terminated||this.optOut},n.prototype.sendingFullCmcdInformation=function(){return this.sendFullCmcdInformationFlag?(this.sendFullCmcdInformationFlag=!1,!0):this.sendFullCmcdInformationFlag},n}();a.default=m},139:(g,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ErrorSeverityIds=a.ERRORS_SEVERITIES_MAPPING_IDS=void 0,a.ERRORS_SEVERITIES_MAPPING_IDS={0:"INFORMATION",1:"WARNING",2:"ERROR",3:"CRITICAL"},a.ErrorSeverityIds={INFORMATION:0,WARNING:1,ERROR:2,CRITICAL:3}},459:(g,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Events=void 0,a.Events={sendData:"sendData"}},75:(g,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PLAYSTATES_MAPPING_IDS=a.PlayStateIds=void 0,a.PlayStateIds={CONNECTING:0,BUFFERING:1,CANPLAY:2,PLAYING:3,PAUSE:4,SEEKING:5,STOP:6,ENDED:7,STALLED:8,ABORT:9,ERROR:10,SWITCHED:11},a.PLAYSTATES_MAPPING_IDS={0:"CONNECTING",1:"BUFFERING",2:"CANPLAY",3:"PLAYING",4:"PAUSE",5:"SEEKING",6:"STOP",7:"ENDED",8:"STALLED",9:"ABORT",10:"ERROR",11:"SWITCHED"}},18:function(g,a,l){var y=this&&this.__createBinding||(Object.create?function(e,t,d,r){r===void 0&&(r=d),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[d]}})}:function(e,t,d,r){r===void 0&&(r=d),e[r]=t[d]}),_=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),h=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var d in e)d!=="default"&&Object.prototype.hasOwnProperty.call(e,d)&&y(t,e,d);return _(t,e),t};Object.defineProperty(a,"__esModule",{value:!0}),a.getCdnInformation=a.getNextTimerIntervalInMillis=a.createCdnInfoUrl=a.createServerUrl=a.createSessionId=a.isCustomerIdLength=a.getConfigItemFromArray=a.isTrueBool=a.isNotNegativeNumber=a.isNotEmptyArray=a.isNotEmptyString=a.isDefined=void 0;var o=h(l(763));function m(e){return e!=null}function n(e){return m(e)&&typeof e=="string"&&e.length!==0}function i(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}a.isDefined=m,a.isNotEmptyString=n,a.isNotEmptyArray=function(e){return m(e)&&Array.isArray(e)&&e.length>0},a.isNotNegativeNumber=function(e){return m(e)&&typeof e=="number"&&e>=0},a.isTrueBool=function(e){return m(e)&&e===!0},a.getConfigItemFromArray=function(e){for(var t=0,d=e;t<d.length;t++){var r=d[t];if(n(r))return r}},a.isCustomerIdLength=function(e){return!(e===void 0||!n(e)||e.length!==o.CUSTOMER_ID_LENGTH)},a.createSessionId=function(){return i()+i()+"-"+i()+"-"+i()+"-"+i()+"-"+i()+i()+i()},a.createServerUrl=function(e){return"https://"+e+"."+o.SERVER_DOMAIN+"/qos/"+o.LIBRARY_TYPE+"?x="},a.createCdnInfoUrl=function(e,t){var d="?";return e.includes(d)&&(d="&"),""+e+d+o.CDN_URL_NO_CACHE_PREFIX+t.toString()},a.getNextTimerIntervalInMillis=function(e){switch(e.data.requestNumber){case 1:return o.SESSION_INTERVAL.REQUEST_NUMBER_INTERVAL_MAPPINGS.ONE*o.TIME.SECONDS_IN_MILLIS;case 2:return o.SESSION_INTERVAL.REQUEST_NUMBER_INTERVAL_MAPPINGS.TWO*o.TIME.SECONDS_IN_MILLIS;case 3:return o.SESSION_INTERVAL.REQUEST_NUMBER_INTERVAL_MAPPINGS.THREE*o.TIME.SECONDS_IN_MILLIS}var t=new Date().getSeconds();t<e.state.intervalTimeSeconds&&(t+=o.SESSION_INTERVAL.REQUEST_NUMBER_INTERVAL_MAPPINGS.DEFAULT);var d=t-e.state.intervalTimeSeconds;return(o.SESSION_INTERVAL.REQUEST_NUMBER_INTERVAL_MAPPINGS.DEFAULT-d)*o.TIME.SECONDS_IN_MILLIS},a.getCdnInformation=function(e){return!(!e.state.getCdnInfo||e.data.requestNumber>=1&&e.data.requestNumber<=3)}},105:(g,a,l)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AdapterDashJs=a.AdapterVideoJs=a.AdapterJwPlayer=a.Events=a.ErrorSeverityIds=a.PlayStateIds=a.Session=void 0;var y=l(743);Object.defineProperty(a,"Session",{enumerable:!0,get:function(){return y.Session}});var _=l(75);Object.defineProperty(a,"PlayStateIds",{enumerable:!0,get:function(){return _.PlayStateIds}});var h=l(139);Object.defineProperty(a,"ErrorSeverityIds",{enumerable:!0,get:function(){return h.ErrorSeverityIds}});var o=l(459);Object.defineProperty(a,"Events",{enumerable:!0,get:function(){return o.Events}});var m=l(595);Object.defineProperty(a,"AdapterJwPlayer",{enumerable:!0,get:function(){return m.AdapterJwPlayer}});var n=l(330);Object.defineProperty(a,"AdapterVideoJs",{enumerable:!0,get:function(){return n.AdapterVideoJs}});var i=l(575);Object.defineProperty(a,"AdapterDashJs",{enumerable:!0,get:function(){return i.AdapterDashJs}})}},P={};return function g(a){var l=P[a];if(l!==void 0)return l.exports;var y=P[a]={exports:{}};return C[a].call(y.exports,y,y.exports,g),y.exports}(105)})()})})(k);var q=k.exports;const U=()=>({AdapterVideoJs:q.AdapterVideoJs}),F=({einbliq:T,content:D,einbliqCustomerId:C,isMobileMode:P})=>g=>{const a={customerId:C,mediaUrl:D.hlsVideoSrc,mediaId:D.id,mediaTitle:D.name,applicationVersion:"3.3.1",applicationName:P?"mobileApp":"road"};return new T.AdapterVideoJs(g,a),g};export{U as einbliqLib,F as initEinbliqSession};
//# sourceMappingURL=einbliq-ac0c931a.js.map
