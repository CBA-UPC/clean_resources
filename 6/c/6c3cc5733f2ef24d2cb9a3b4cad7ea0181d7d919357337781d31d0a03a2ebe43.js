"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2198],{83603:91897:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(52322),a=n(2784),Builder_BuilderError=i=n(6781),o=n(83603),l=n(47330),s=n(70064),u=n(97015),c=n(50733),d=n(31475),p=n(20851);let f={min:{width:void 0,height:void 0,scale:.5},max:{width:void 0,height:void 0,scale:2}},cleanupElStyles=e=>{e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.transform=""};var use_web_capture_scalar=e=>{let{playerEl:t,strategy:n,embeddedInApp:r,updateTransformScalar:i,pause:o}=e,h=!o,m=(0,a.useRef)(!1),g=(0,d.jA)({"scale-to-fill":!0,responsive:!0,fixed:!0}),y=g["scale-to-fill"]?l.V1.ScaleToFill:g.fixed?l.V1.Fixed:g.responsive?l.V1.Responsive:n,v=(0,a.useRef)(y),{isMobile:b}=(0,s.qE)();(0,a.useEffect)(()=>{var e,n,a,o;let s=t||document.querySelector("#navattic-player"),d=null==s?void 0:s.contentWindow;if(!d||!h||b)return;let g=null==s?void 0:null===(n=s.contentDocument)||void 0===n?void 0:null===(e=n.__nv_sn)||void 0===e?void 0:e.clientWidth,w=null==s?void 0:null===(o=s.contentDocument)||void 0===o?void 0:null===(a=o.__nv_sn)||void 0===a?void 0:a.clientHeight,maybeCleanupFrameStyles=onResize=e=>{let t=s.parentElement,n=e.srcElement||e.currentTarget,r=null==t?void 0:t.clientWidth,a=null==t?void 0:t.clientHeight;if(!(0,u._H)(n))return;let o={width:r||Math.min(n.innerWidth,n.outerWidth),height:a||Math.min(n.innerHeight,n.outerHeight)},d=1;if(y===l.V1.ScaleToFill){if(g&&w){let{isPortrait:e,transformScalar:t=d}=function(e){let{playerFrame:t,viewportDimensions:n,originalDimensions:r=c.lk,wasPortrait:a}=e,i=t.contentDocument;if(!i)return{scaleFactor:0,isPortrait:!1};let o=(0,p.IV)({min:f.min.width,value:n.width,max:f.max.width}),l=(0,p.IV)({min:f.min.height,value:n.height,max:f.max.height}),s=l>o,u=(0,p.IV)({min:f.min.scale,value:o/r.width,max:f.max.scale}),d=(0,p.IV)({min:f.min.scale,value:l/r.height,max:f.max.scale}),h=s?d:u;t.style.width="".concat(100/u,"%"),t.style.height="".concat(s?100:100/h,"%");let m=1;return s?a||(t.style.transform="",t.ownerDocument.body.style.overflowX="auto"):(m=h,t.style.transformOrigin="top left",t.style.transform="scale(".concat(m,")"),a&&(t.ownerDocument.body.style.overflowX="")),{transformScalar:m,isPortrait:s}}({playerFrame:s,viewportDimensions:o,originalDimensions:{width:g,height:w},wasPortrait:m.current});d=t,m.current=e}}else y===l.V1.Fixed?(s.style.width="".concat(g,"px"),s.style.height="".concat(w,"px")):y===l.V1.Responsive&&maybeCleanupFrameStyles();null==i||i(d)};return onResize({srcElement:window,currentTarget:window}),window.addEventListener("resize",onResize),r&&d.addEventListener("resize",onResize),,[t,h,y,r,i,b])},h=n(2530),m=n(80638);let CaptureContent=g=a.forwardRef((e,t)=>{let{fetchingOrBuilding:n,errorMessage:i,scaleStrategy:l,updateTransformScalar:s}=e,u=a.useRef(null);return a.useImperativeHandle(t,,use_web_capture_scalar({playerEl:u.current,strategy:l,embeddedInApp:!0,updateTransformScalar:s,pause:n}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{ref:u,style:{visibility:i?"hidden":void 0,position:"absolute",height:"100%",width:"100%",margin:0}}),(0,r.jsx)(CaptureContent,{fetchingOrBuilding:n,errorMessage:i})]})});g.displayName="WebCapturePreview";var y=g},81291:19894:function(e,t,n){n.d(t,{Z:function(){return use_build_web_capture}});var r=n(2784),a=n(70274),i=n(87688),o=n(89370),l=n(83408),s=n(71664);let u=(0,l.hu)("debug:navattic:personalization"),parsePersonalizedElement=setPersonalizedSrc=async(e,t)=>{e.getAttribute("src")!==t&&e.setAttribute("src",t)},setPersonalizedBackgroundImage=setPersonalizedText=setPersonalizedInputValue=applyPersonalizationFallback=c="[".concat(o.lz,"][").concat(o.rX,"]"),applyPersonalization=applyPersonalizationToCapture=var d=n(30555),p=n(64627),use_fetch_capture=use_build_web_capture=,64627:function(e,t,n){n.d(t,{Az:function(){return getWebCaptureFromCache},J9:function(){return fetchWebCaptureCacheFirst},KE:function(){return requestThemeToken},Y6:function(){return initiateWebCapture},qd:function(){return requestProductDemoCaptureToken}});var r=n(24595),a=n(17840),i=n(16377),o=n(39391);let requestProductDemoCaptureToken=async e=>{let{collectionId:t,flowId:n}=e;return await r.Z.requestSessionToken({collectionId:t,flowId:n,action:"EDIT",mode:"product-demo"})};et initiateWebCapture=async e=>{let{collectionId:t,url:n,clickToCaptureEnabled:r}=e,i=await a.qE();if(!i)return{ok:!1,error:"Chrome extension needs to be installed"};let o=await requestProductDemoCaptureToken({collectionId:t});if(!o)return{ok:!1,error:"Failed to request session token for initiating capture"};let l=await a.Xi({url:n,token:o,collectionId:t,config:{clickToCapture:r}});return l?{ok:!1,error:l}:{ok:!0,error:void 0}},l=i.Z.CAPTURE_PLAYER_URL,fetchWebCapture=s=new Map,fetchWebCaptureCacheFirst=getWebCaptureFromCache=,50733:function(e,t,n){n.d(t,{$M:function(){return r},SW:function(){return i},lk:function(){return a}});let r=Symbol("nv_node_ref"),a={width:1200,height:750},i=800},63749:]);
//# sourceMappingURL=2198-a845594e85403d0c.js.map