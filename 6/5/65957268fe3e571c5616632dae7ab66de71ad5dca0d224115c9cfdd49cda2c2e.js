this.analytics=this.analytics||{},this.analytics.js=function(e){"use strict";function t(e,t){if(0==e.length)return[];for(var n=[],a=0;a<e.length;a++){var o=e[a];t(o)&&n.push(o)}return n}function n(e,t,n,a){void 0===a&&(a=!1);var o="",r=a?"; secure":"";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),o="; expires="+i.toUTCString()}document.cookie=e+"="+t+o+"; path=/"+r}function a(e,t,n){var a="";if(n){var o=new Date;o.setTime(o.getTime()+60*n*60*1e3),a="; expires="+o.toUTCString()}document.cookie=e+"="+t+a+"; path=/"}r i,_=(i=r,;function u(e,t,n,a){void 0===n&&(n=!0),void 0===a&&(a=!0);var o=new XMLHttpRequest;if("withCredentials"in o)o.open(e,t,a),o.withCredentials=n;else{if("undefined"==typeof XDomainRequest)return null;(o=new XDomainRequest).open(e,t)}return o}var s="sandbox",E=new RegExp("^[a-z-]*(fe|jp)[a-z.-]*$"),c=new RegExp("^[a-z-]*(eu|uk|de)[a-z.-]*$"),T="https://",d=function(e,t){for(var n=[],a=e.length,o=0;o<a;o++){var r=e[o];n.push(t(r))}return n}(["payments","payments-eu","payments-sandbox","payments-eu-sandbox","payments-fe","pmt.integ","payments-eu.integ","payments-fe.integ","payments-preprod","payments-eu-preprod-dub.dub.proxy","payments-jp-preprod"],;function m(e){return!!e&&d.indexOf(e.action)>=0}function N(e,n){if(e){var a=t(Array.prototype.slice.call(e.querySelectorAll("input[type=hidden]")),[0];if(a)return a.value}return"unknown"}function p(e){return m(e)?(t=e.action,(n=document.createElement("a")).href=t,n.hostname):null;var t,n}function A(e){return c.test(e)?"UK":E.test(e)?"JP":"US"}unction f(e){var t=N(e,s);return"unknown"!=t&&"true"==t}function I(e){for(var n=0,a=function(e){var n;return e?e instanceof HTMLElement&&(n=e.querySelectorAll("form")):n=document.querySelectorAll("form"),n?t(Array.prototype.slice.call(n),m):[]}(e);n<a.length;n++){var o=a[n];if(m(o))return o}return null}var O,g,h,S="apay-session-set";!O||(O={})),g||(g={})),h||(h={}));var P={en:"en_US",fr:"fr_FR",it:"it_IT",es:"es_ES",de:"de_DE",ja:"ja_JP","en-us":"en_US","en-gb":"en_GB","fr-fr":"fr_FR","it-it":"it_IT","es-es":"es_ES","de-de":"de_DE","ja-jp":"ja_JP"},C=[],D="/gp/widgets/sessionstabilizer",y=365,R="true",U=!1;function M(){var e,t,n=I();if(n){var a=p(n);if(a)return""+T+a+D+"?"+(e={countryOfEstablishment:A(a),ledgerCurrency:l(a),isSandbox:f(n)},t=["originDomain","returnDomain"],Object.keys(e).map(function(n){return r(e[n])?null:n+"="+(t.indexOf(n)>-1?e[n]:encodeURIComponent(e[n]))}).filter(_).join("&"))}return null}function v(e,t){if(null!=o(S))e();else if(C.push(e),!U){var a=t||M();if(U=!0,a){var r=u("GET",a,!0);r&&(r.onload=function(){if(U=!1,r&&200===r.status){var e=JSON.parse(r.responseText);e&&(R=e.apaySessionSet)}for(n(S,R,y,!0);C.length>0;){var t=C.pop();"function"==typeof t&&t()}},r.send())}}}var H={HTML_BUTTON_RENDER:"apay-html-button-render",HTML_BUTTON_RENDER_TAG:"pwa",SUB_PAGE_TYPE:"sub-page-type",CSS_BUTTON:"css_button",PAGE_ACTION:"page-action",ADDITIONAL_REQUEST_DATA:"additional-request-data",MERCHANT_DOMAIN_KEY:"window",SESSION_ID:"session-id",CORS_FAILURE:"cors-failure",INVALID_RESPONSE:"invalid-response",LATENCY:"cookie-creation-latency",MAXO_BUTTON:"maxo-button",MAXO_BUTTON_RENDER:"maxo-button-render",MAXO_WEBLAB_RESPONSE_RECIEVED:"maxo-weblab-response-received",MAXO_BUTTON_REDIRECT:"maxo-button-redirect",MAXO_BUTTON_CLICK:"maxo-button-click",MAXO_BUTTON_TAG:"maxo-button-tag",MAXO_BUTTON_RENDER_LATENCY:"maxo-button-render-latency",MAXO_BUTTON_REDIRECT_LATENCY:"maxo-button-redirect-latency",MAXO_BUTTON_DESIGN:"button-design",MAXO_BUTTON_COLOR:"color",BUTTON_PLACEMENT:"button-placement",CHECKOUT_SESSION_PRODUCT_TYPE:"checkout-session-product-type",CHANGE_SHIPPING_ADDRESS:"change-shipping-address",CHANGE_PAYMENT_METHOD:"change-payment-method",CHECKOUT_SESSION_ID:"checkout-session-id",MAXO_ADDITIONAL_INFO:"maxo-additional-info",INTEGRATION_TYPE:"integration-type",IS_SKIP_PREORDER_PAGE:"is-skip-preorder-page",MAXO_DEFAULT_INTEGRATION:"maxo-default-integration",SIGNATURE_BUTTON_SESSION_CONFIG:"maxo-button-signature-session-config",SIGNATURE_BUTTON_OBJECT:"maxo-button-signature-object",SIGNATURE_BUTTON_REDIRECT:"maxo-button-signature-redirect",WEBLAB_DATA:"weblab-data",MAXO_BUTTON_VIEW_INITIATED:"maxo-button-view-initiated",VIEW_TYPE:"viewType",BIND_UPGRADE_ACTION:"bind-upgrade-action",BIND_RECURRING_UPDATE_ACTION:"bind-recurring-update-action",MAXO_JS_LOAD_TIME:"maxo-js-load-time",MAXO_PAYMENT_BUTTON_TYPE:"maxo-payment-button-type",MAXO_BUTTON_RENDER_COMPLETE:"maxo-button-render-complete",PAYMENT_METHOD_ON_FILE_SETUP_INTENT:"payment-method-on-file-setup-intent",PAYMENT_METHOD_ON_FILE_PRE_ORDER:"payment-method-on-file-pre-order",PAYMENT_METHOD_ON_FILE_PMOF_APB:"payment-method-on-file-pmof-apb",PAYMENT_METHOD_ON_FILE_PRE_ORDER_UPDATE:"payment-method-on-file-pre-order-update",CHARGE_PERMISSION_TYPE:"chargePermissionType",PAYMENT_METHOD_ON_FILE_SETUP_TYPE:"paymentMethodOnFileSetupType",MAXO_RECURRING_INFO:"maxoRecurringInfo",CHARGE_PERMISSION_TYPE_PAYMENT_METHOD_ON_FILE:"PAYMENT_METHOD_ON_FILE",PAYMENT_METHOD_ON_FILE_SETUP_TYPE_SETUP_ONLY:"SETUP_ONLY",PAYMENT_METHOD_ON_FILE_SETUP_TYPE_SETUP_WITH_PURCHASE:"SETUP_WITH_PURCHASE",PAYMENT_METHOD_ON_FILE_SETUP_TYPE_UPDATE_ONLY:"UPDATE_ONLY",CPSP_CALLER_TYPE:"PaymentServiceProvider-Hybrid",MERCHANT_SITE_DYNAMIC_MESSAGING_WIDGET_RENDERED:"merchant-site-dynamic-messaging-widget-render",MERCHANT_SITE_DYNAMIC_MESSAGING_WIDGET_CLICKED:"merchant-site-dynamic-messaging-widget-click",DYNAMIC_MESSAGING_WIDGET_PLACEMENT:"dynamic-messaging-widget-placement",DYNAMIC_MESSAGING_WIDGET_TAG:"dynamic-messaging-widget-tag"},b=function(e,t,a,r,i){var _="https://"+t+"/cs/uedata",s=function(){var t,s,E=u("POST",_,!0);E&&(i||(t=e,s={name:H.SESSION_ID,value:o(H.SESSION_ID)},t.addInfo(s)),E.setRequestHeader("Content-type","application/x-www-form-urlencoded"),E.onload=E.send(e.toQueryString()+"&countryOfEstablishment="+a+"&ledgerCurrency="+r),E.onerror=function(){E&&0===E.status&&!o("amazon-pay-cors-blocked-status")&&navigator.userAgent.match(/Firefox/i)&&n("amazon-pay-cors-blocked-status","true",1/24)},E&&4===E.readyState&&200===E.status&&e.reset())};!0===i?s():v(s)};var G,L,B=function(){function e(e,t,n){this.merchantId=e,this.integrationPlatformId=t,this.metrics={counters:[],timings:[],info:[]},this.metricsPublisher=n}return e.prototype.addCounter=function(e){this.metrics.counters.push(e)},e.prototype.addTiming=function(e){this.metrics.timings.push(e)},e.prototype.addInfo=e.prototype.publish=function(e){this.metricsPublisher&&this.metricsPublisher(this,e)},e.prototype.reset=e.prototype.getPlatformIdString=e.prototype.toQueryString=function(){return"sellerId="+this.merchantId+this.getPlatformIdString()+"&data="+encodeURIComponent(JSON.stringify(this.metrics))},e}(),w="merchantId";function Y(){if(L)return L;var e=I();if(e){G=p(e);var t=N(e,w);L=new B(t);var n={name:H.SUB_PAGE_TYPE,value:H.CSS_BUTTON},a={name:H.PAGE_ACTION,value:H.HTML_BUTTON_RENDER},o=H.MERCHANT_DOMAIN_KEY+":"+window.location.host,r={name:H.ADDITIONAL_REQUEST_DATA,value:o};return L.addInfo(n),L.addInfo(a),L.addInfo(r),L}return null}function x(){var e,t,n;e=H.HTML_BUTTON_RENDER,t={name:e,tags:[H.HTML_BUTTON_RENDER_TAG]},(n=Y())&&n.addCounter(t)}var F={apchsHost:"https://apay-us.amazon.com",defaultAuthUIHost:"https://apay-us.amazon.com",authUIHostByLang:{en_US:"https://apay-us.amazon.com",en_GB:"__en_GB_authUIHost__",it_IT:"__it_IT_authUIHost__",de_DE:"__de_DE_authUIHost__",es_ES:"__es_ES_authUIHost__",fr_FR:"__fr_FR_authUIHost__",ja_JP:"__ja_JP_authUIHost__"},microTextVersion:{it_it:"_CB1558571088_",de_de:"_CB1558571088_",es_es:"_CB1558571088_",fr_fr:"_CB1558571088_",en_us:"_CB1558571088_",en_gb:"_CB440556592_",ja_jp:"_CB1568869902_"},coe:{USD:"US",EUR:"DE",GBP:"UK",JPY:"JP"},regionCode:"01",allowedLedgerCurrencies:"USD",domainFallbackLanguage:"en_US",allowedCheckoutLanguages:"en_US",supportedBrowserLanguages:"en,en-us",boltDomain:"https://connect.bolt.com",allowedCurrencyCodes:"USD",pwaButtonDenyListedMerchants:"A2YVOYIPQO5EPZ,A1EPC9BWE05HZC",allowListedCSP:"STRIPEID,A85B4L0NQ96QV,AFKYH81T7FFHK"};var z="amazon-pay-connectedAuth",k={CONNECTEDAUTH_GENERAL:"connectedAuth_general",LWA_GENERAL:"lwa_general"},X="language",j="apay-session-set",K="isConnectedAuth",W="language",J="apst",q="origin_url";function Q(e,t,n){if(n){var a=document.createElement("input");a.type="hidden",a.name=t,a.value=n,e.appendChild(a)}}function V(e){var t=N(e,W);if("unknown"!==t)return t.replace("-","_");var n=function(){var e=navigator.languages;if(r(e)&&!r(navigator.language)&&(e=[navigator.language]),!r(e))for(var t=0;t<e.length;t++)if(F.supportedBrowserLanguages.split(",").indexOf(e[t].toLowerCase())>-1)return P[e[t].toLowerCase()];return null}();return n&&Q(e,W,n.replace("_","-")),n}function Z(e,t){var n;if(n=t||I()){e(),a(z,k.CONNECTEDAUTH_GENERAL,1),Q(n,K,"true"),Q(n,q,window.location.origin);var r=o(j);r&&Q(n,J,r);var i=V(n);i&&a(X,i,1),b(L,G,A(G),l(G))}}var $=document.body;e();return new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(})}).observe($,{childList:!0,subtree:!0}),e.onAmazonPayFormReady=ee,e}({});
