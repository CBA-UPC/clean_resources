"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7521],{81952:(e,t,i)=>{i.d(t,{I:()=>A});var n=i(80552),s=i(50959),l=i(85648),a=(i(80378),i(58465),i(46758),i(53321),i(45205),i(27082),i(86277),i(2836),i(82187)),r=i.n(a),u=i(75802),o=i(69736),c=i(87025),d=i(80859),m=i(20580),x=i(49857),h=i(2800),p=i(76981);var g=i(6807),y=i(14892);const v="BkpKedcdaMGbvgXMlmcg",f="muYk5XIwKmqR9iNibk_f",j="OEFWODerafYHGp09iLlA",b="m20ShRDiGGDpJ5LSABTi",k="Hvv0e7WKQ4kyftgSQJhg",C="yxf_6IsQEmHjijEBUMTP",N="oaNVBli46GtVjaQKB15g",I="JdlKTdpMquftpMwwegZo",w="Nts_ArOCGeROTDZND3M6",P="FvDsfgxSvLvL3q8d7nQv";var S=i(11527);const U=e=>{let{items:t,activeItemId:i}=e;return(0,S.jsx)(g.v,{children:t.map((e=>e.disabled?(0,S.jsx)(y.s,{disabled:!0,role:"menuitemradio",className:C,onClick:e.handleClick,children:e.title},e.uri):(0,S.jsx)(y.s,{role:"menuitemradio",to:e.to,end:!0,"aria-checked":e.itemId===i,className:e=>{let{isActive:t}=e;return r()(C,{[N]:t})},onClick:e.handleClick,children:e.title},e.uri)))})};var E=i(64634);const q=(0,s.memo)((function(e){let{isCentered:t,links:i,landmarkLabel:n,className:a}=e;const g=(0,s.useRef)(null),[y,C]=(0,s.useState)([]),[q,O]=(0,s.useState)(0),[F,R]=(0,s.useState)([]),L=function(){const[e,t]=(0,s.useState)(window.innerWidth),{scrollNodeChildRef:i}=(0,s.useContext)(h.VX),n=(0,x.y1)((e=>{null!=e&&e.width&&t(e.width)}),250);return(0,p.y)({refOrElement:i,observeOnly:"width",onResize:n}),e}()??1/0,{pathname:Q}=(0,u.TH)(),A=i.find((e=>e.to===Q));return(0,s.useEffect)((()=>{g.current&&O(g.current.clientWidth)}),[L]),(0,s.useEffect)((()=>{if(!g.current)return;const e=Array.from(g.current.children).map((e=>e.clientWidth));C(e)}),[i]),(0,s.useEffect)((()=>{if(!g.current)return;if(y.slice(0,-1).reduce(((e,t)=>e+t),0)<=q)return void R([]);const e=y.reduce(((e,t)=>e>t?e:t),0),t=[];let i=e;y.forEach(((e,n)=>{q>=i+e?i+=e:t.push(n)})),R(t)}),[q,y]),(0,S.jsx)("nav",{className:r()(a,v),"aria-label":n,children:(0,S.jsxs)("ul",{className:t?f:w,ref:g,children:[i.filter(((e,t)=>!F.includes(t))).map((e=>{const t=(null==e?void 0:e.render)??(e=>e);return(0,S.jsx)(s.Fragment,{children:t((0,S.jsx)("li",{className:j,children:e.disabled?(0,S.jsx)("div",{className:I,children:(0,S.jsx)(o.x,{variant:"bodySmallBold",children:e.title})}):(0,S.jsx)(E.O,{end:!0,className:e=>{let{isActive:t}=e;return r()(I,{[N]:t})},to:e.to,onClick:e.handleClick,children:(0,S.jsx)(o.x,{variant:"bodySmallBold",children:e.title})})}))},e.to)})),F.length||0===y.length?(0,S.jsx)("li",{className:j,children:(0,S.jsx)(m.xV,{renderInline:!0,menu:(0,S.jsx)(U,{items:i.filter(((e,t)=>F.includes(t))),activeItemId:null==A?void 0:A.itemId}),children:(e,t,i)=>(0,S.jsxs)("button",{className:r()(b,{[k]:A}),type:"button",onClick:t,ref:i,children:[(0,S.jsx)(o.x,{variant:"bodySmallBold",children:A?A.title:l.ag.get("more")}),e?(0,S.jsx)(c.U,{size:"small",className:P,"aria-hidden":"true"}):(0,S.jsx)(d.i,{size:"small",className:P,"aria-hidden":"true"})]})})}):null]})})}));var O=i(8885),F=i(64847),R=i(98271);const L="vhW0kRN8JJD5UwW4TdXi",Q=()=>{const e=(0,R.Y)(),t=(0,s.useCallback)((e=>(0,S.jsx)(F.v,{placement:"bottomEnd",arrow:"topStart",title:l.ag.get("pick-and-shuffle.upsell.title.queue"),children:e})),[]),i=(0,s.useMemo)((()=>[{title:l.ag.get("playback-control.queue"),itemId:"queue",to:"/queue",uri:"spotify:app:queue",render:t,disabled:e},{title:l.ag.get("view.recently-played"),itemId:"history",to:"/history",uri:"spotify:app:history"}]),[e,t]);return(0,S.jsx)(O.w,{children:(0,S.jsx)(q,{className:L,links:i})})},A=e=>{let{children:t}=e;const i=(0,n.nF)();return(0,S.jsxs)("section",{className:"contentSpacing",children:[t,i&&(0,S.jsx)(Q,{})]})}},73040:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var n=i(50959),s=i(82187),l=i.n(s),a=i(69736),r=i(15304),u=i(75095),o=i(85648),c=i(41038),d=i(60046),m=i(37523),x=i(45438),h=i(8570),p=i(22527),g=i(80626),y=i(52438),v=i(11527);const f=e=>{let{onClick:t}=e;return(0,v.jsx)(y.P,{onClick:t,size:"small",children:o.ag.get("queue.clear-queue")})};var j=i(16626),b=i(94853),k=i(91295),C=i(36199),N=i(39131),I=i(13734),w=i(17162),P=i(95812),S=i(82857),U=i(58912),E=i(84573);const q=n.memo((function(e){let{tracks:t,ariaLabel:i,contextUri:s,currentlyPlayingContextUri:l=s,rowNumberOffset:a=0,section:r,usePlayContextItem:u}=e;const c=(0,I.o)(),d=(0,h.g)(),m=(0,n.useCallback)(((e,t)=>{c({intent:"remove-from-queue",type:"click"}),d.removeFromQueue(e).then(t)}),[d,c]),x=(0,n.useCallback)(((e,t)=>{if((0,P.iw)(e)){var i;const n=(0,U.X)(null===(i=e.show)||void 0===i?void 0:i.images,{desiredSize:40});return(0,v.jsx)(E.p,{index:t,rowNumberOffset:a,imgUrl:(null==n?void 0:n.url)||"",uri:(0,w.$)(e),uid:e.uid??e.uri,contextUri:s,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.show.name,uri:e.show.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:E.j.EPISODE,section:r,usePlayContextItem:u,isAutoPlay:"autoplay"===e.provider},`${t}${a}${e.uid}`)}if((0,P.G7)(e)){const i=(0,U.X)(e.images||void 0,{desiredSize:40});return(0,v.jsx)(E.p,{index:t,rowNumberOffset:a,imgUrl:(null==i?void 0:i.url)||"",uri:(0,w.$)(e),uid:e.uid??e.uri,contextUri:s,duration_ms:e.duration.milliseconds,name:e.name,artists:[],album:{name:e.book.name,uri:e.book.uri},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:E.j.CHAPTER,section:r,usePlayContextItem:u,isAutoPlay:"autoplay"===e.provider},`${t}${a}${e.uid}`)}if((0,P.k6)(e)){const i=(0,U.X)(e.images||void 0,{desiredSize:40});return(0,v.jsx)(E.p,{index:t,rowNumberOffset:a,imgUrl:(null==i?void 0:i.url)||"",uri:e.uri,uid:e.uid??e.uri,contextUri:s,duration_ms:e.duration.milliseconds,name:e.advertiser??e.title??o.ag.get("ad-formats.advertisement"),artists:[],album:{name:"",uri:""},isExplicit:!1,isPlayable:!0,isMOGEFRestricted:!1,type:E.j.AD,section:r,usePlayContextItem:u,isAutoPlay:"autoplay"===e.provider,isEnhanced:!1},`${t}${a}${e.uid}`)}if((0,P.G_)(e)||(0,P.RB)(e)){var n,c;const i=(0,U.X)(null==e||null===(n=e.album)||void 0===n?void 0:n.images,{desiredSize:40}),o=e.type===S.p.TRACK?e:null;return(0,v.jsx)(E.p,{index:t,rowNumberOffset:a,imgUrl:(null==i?void 0:i.url)||"",uri:(0,w.$)(e),uid:e.uid??e.uri,contextUri:s,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:(null==o?void 0:o.isExplicit)??!1,isPlayable:!0,isMOGEFRestricted:(null==o?void 0:o.is19PlusOnly)??!1,type:null!=o&&o.isLocal?E.j.LOCAL:E.j.TRACK,section:r,usePlayContextItem:u,isAutoPlay:"autoplay"===e.provider,isEnhanced:(0,N.$)(e),trackContextUri:(null===(c=e.metadata)||void 0===c?void 0:c.context_uri)??l},`${t}${a}${e.uid}`)}return(0,v.jsx)(C.Lb,{height:`${C.dN}px`})}),[a,s,l,r,u]),p=(0,n.useMemo)((()=>[C.QD.INDEX,C.QD.TITLE_AND_ARTIST,C.QD.ALBUM,C.QD.DURATION]),[]),g=(0,n.useCallback)((e=>({uri:e.uri,uid:e.uid??e.uri})),[]);return(0,v.jsx)(C.Pv,{ariaLabel:i,tracks:t,nrTracks:t.length,onRemove:m,renderRow:x,resolveItem:g,columns:p})}));var O=i(25598);const F="rHpv7osDRvs3SUPMpQ_g",R="DG9CsoFIptJhAneKoo_F",L="jf2HafzDEI9jn7Yo05eM",Q="H3Puuvc2nV0GoZRrfpRS",A="HckHyQocDDePWQL2baOY",D=()=>{const{uri:e,description:t,current:i,nextUp:s,queued:y,isEmpty:C,hasQueuedTracks:N,hasNextTracks:I}=(0,O.y)(),{spec:w,logger:P,UBIFragment:S}=(0,g.fU)(r.z,{data:{identifier:u.Wg.NOWPLAYING_QUEUE,uri:e??""}}),U=(0,n.useMemo)((()=>w.nowPlayingSectionFactory()),[w]),E=(0,n.useMemo)((()=>w.nextInQueueSectionFactory()),[w]),D=(0,n.useMemo)((()=>w.nextFromSectionFactory()),[w]),M=(0,h.g)(),[$,T]=(0,n.useState)(!1),B=(0,n.useCallback)((()=>{T(!1)}),[T]),_=(0,n.useCallback)((()=>{M.clearQueue(),T(!1)}),[M]),G=(0,n.useCallback)((()=>{let e;const t=E.clearQueueButtonFactory();y.length>0&&(e=t.hitRemoveItemsFromQueue({numberOfItemsToRemoveFromQueue:y.length}),P.logInteraction(e))}),[P,E,y.length]),z=(0,n.useCallback)((async()=>{G(),T(!0)}),[G]),{usePlayContextItem:H}=(0,p.n)({uri:e??""},{featureIdentifier:"queue"}),W=(0,n.useCallback)((async()=>{if(!I)return;const t=w.nextFromSectionFactory().queueContextLinkFactory().hitUiNavigate({destination:e??""});P.logInteraction(t)}),[I,P,w,e]);return C?(0,v.jsx)(b.Q,{}):(0,v.jsxs)("div",{className:F,children:[(0,v.jsx)(c.$,{children:o.ag.get("queue.page-title")}),(0,v.jsx)(S,{spec:w,children:(0,v.jsx)(m.A,{className:R,emptyStateComponent:(0,v.jsx)(a.x,{as:"h1",variant:"titleSmall",semanticColor:"textBase",className:R,children:o.ag.get("playback-control.queue")})})}),i&&e&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(a.x,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",className:L,children:o.ag.get("queue.now-playing")}),(0,v.jsx)(S,{spec:U,children:(0,v.jsx)(x.JL,{value:"now-playing",children:(0,v.jsx)(q,{ariaLabel:o.ag.get("queue.now-playing"),tracks:[i],contextUri:e,section:k.h.NowPlaying,usePlayContextItem:H})})})]}),N&&e&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{className:l()(A,L),children:[(0,v.jsx)(a.x,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",children:o.ag.get("queue.next-in-queue")}),N&&(0,v.jsx)(f,{onClick:z})]}),(0,v.jsx)(S,{spec:E,children:(0,v.jsx)(x.JL,{value:"next-in-queue",children:(0,v.jsx)(q,{ariaLabel:o.ag.get("queue.next-in-queue"),tracks:y,rowNumberOffset:1,contextUri:"spotify:app:queue:NextInQueue",currentlyPlayingContextUri:e,section:k.h.NextInQueue,usePlayContextItem:H})})})]}),I&&e&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(a.x,{as:"h2",variant:"bodyMediumBold",semanticColor:"textSubdued",className:L,children:t&&!(0,O.X)(i)?(0,v.jsxs)("span",{className:"standalone-ellipsis-one-line",children:[o.ag.get("queue.next-from"),"Â ",(0,v.jsx)(d.Link,{className:Q,to:e,onClick:W,children:t})]}):o.ag.get("queue.next-up")}),(0,v.jsx)(S,{spec:D,children:(0,v.jsx)(x.JL,{value:"next-up",children:(0,v.jsx)(q,{ariaLabel:o.ag.get("queue.next-up"),tracks:s,rowNumberOffset:1+((null==y?void 0:y.length)||0),contextUri:"spotify:app:queue:NextUp",currentlyPlayingContextUri:e,section:k.h.NextUp,usePlayContextItem:H})})})]}),(0,v.jsx)(j.$,{itemCount:(null==y?void 0:y.length)||0,isOpen:$,onClose:B,onConfirm:_})]})};var M=i(81952),$=i(98271),T=i(96989);const B=()=>(0,$.Y)()?(0,v.jsx)(T.InstrumentedRedirect,{to:"/history"}):(0,v.jsx)(M.I,{children:(0,v.jsx)(n.Suspense,{fallback:null,children:(0,v.jsx)(D,{})})})}}]);
//# sourceMappingURL=xpui-routes-queue-page.83633f71.js.map