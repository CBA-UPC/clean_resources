yolWPJsonp([15],{17:function(e,t,i){"use strict";var s,o,n;Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?a=t.Slick=void 0;!function(e){t.Slick=a=window.Slick||{},t.Slick=a=),a.prototype.activateADA=a.prototype.addSlide=a.prototype.slickAdd=a.prototype.animateHeight=a.prototype.animateSlide=a.prototype.getNavTarget=a.prototype.asNavFor=function(t){var i=this,s=i.getNavTarget();null!==s&&"object"===(void 0===s?"undefined":r(s))&&s.each(},a.prototype.applyTransition=a.prototype.autoPlay=a.prototype.autoPlayClear=a.prototype.autoPlayIterator=a.prototype.buildArrows=a.prototype.buildDots=a.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(,t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),!0===t.options.draggable&&t.$list.addClass("draggable")},a.prototype.buildRows=a.prototype.checkResponsive=a.prototype.changeSlide=a.prototype.checkNavigable=a.prototype.cleanUpEvents=a.prototype.cleanUpSlideEvents=a.prototype.cleanUpRows=a.prototype.clickHandler=a.prototype.destroy=a.prototype.disableTransition=a.prototype.fadeSlide=a.prototype.fadeSlideOut=a.prototype.filterSlides=a.prototype.slickFilter=a.prototype.focusHandler=a.prototype.getCurrent=a.prototype.slickCurrentSlide=a.prototype.getDotCount=a.prototype.getLeft=a.prototype.getOption=a.prototype.slickGetOption=function(e){return this.options[e]},a.prototype.getNavigableIndexes=a.prototype.getSlick=function(){return this},a.prototype.getSlideCount=a.prototype.goTo=a.prototype.slickGoTo=a.prototype.init=a.prototype.initADA=a.prototype.initArrowEvents=a.prototype.initDotEvents=a.prototype.initSlideEvents=a.prototype.initializeEvents=a.prototype.initUI=a.prototype.keyHandler=a.prototype.lazyLoad=a.prototype.loadSlider=a.prototype.next=a.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},a.prototype.orientationChange=a.prototype.pause=a.prototype.slickPause=a.prototype.play=a.prototype.slickPlay=a.prototype.postSlide=a.prototype.prev=a.prototype.slickPrev=a.prototype.preventDefault=a.prototype.progressiveLazyLoad=a.prototype.refresh=a.prototype.registerBreakpoints=a.prototype.reinit=a.prototype.resize=a.prototype.removeSlide=a.prototype.slickRemove=a.prototype.setCSS=a.prototype.setDimensions=a.prototype.setFade=a.prototype.setHeight=a.prototype.setOption=a.prototype.slickSetOption=a.prototype.setPosition=a.prototype.setProps=a.prototype.setSlideClasses=a.prototype.setupInfinite=a.prototype.interrupt=a.prototype.selectHandler=a.prototype.slideHandler=a.prototype.startLoad=a.prototype.swipeDirection=a.prototype.swipeEnd=a.prototype.swipeHandler=a.prototype.swipeMove=a.prototype.swipeStart=a.prototype.unfilterSlides=a.prototype.slickUnfilter=a.prototype.unload=a.prototype.unslick=a.prototype.updateArrows=a.prototype.updateDots=a.prototype.visibility=e.fn.slick=)},367:function(e,t,i){"use strict";i(17),i(1);!function(e){void 0===e.TOKYO2020&&(e.TOKYO2020={}),window.addEventListener("DOMContentLoaded",function(){if("function"==typeof jQuery&&e.TOKYO2020.SMOOTH_SCROLL.init(),e.TOKYO2020.COMMON.init(),e.TOKYO2020.HEADER_MENU.init(),e.TOKYO2020.HEADER_SCROLLFIXED.init(),e.TOKYO2020.HEADER_ACCORDION.init(),document.querySelectorAll(".p-olympic-2020-sidebar-countdown-day-date,.olympic-2020-top-title-countdown").length>0&&e.TOKYO2020.COUNTDOWN.init(),document.querySelectorAll(".p-olympic-2020-athletes").length>0&&e.TOKYO2020.ALIGN_HEIGHT.init(),e.TOKYO2020.SCHEDULE_TABLE.init(),e.TOKYO2020.DAZN.init(),document.querySelector(".uni-scrap")&&document.querySelector(".article-active-accordion-btn")&&e.TOKYO2020.UNI_SCRAP.init(),document.querySelector(".lazy")&&e.TOKYO2020.LAZYLOAD.init(),/\/olympic\/(paralympic)?2020\/torch/.test(location.pathname)&&e.TOKYO2020.RELAY_MAP.init(),/\/olympic\/(paralympic)?2020\/(athletes|foreign)/.test(location.pathname)&&e.TOKYO2020.ATHLETES.init(),/\/olympic\/(paralympic)?2020\/t\//.test(location.pathname)&&document.querySelector(".uni-olympic-2020-games-details")&&e.TOKYO2020.GAMES_DETAILS.init(),document.querySelector("#olympic-2020-datavisual-swimmedley")){var t=t.prototype.main=function(t){var i=this,s=document.getElementsByClassName("datavisual-swimming")[t].dataset.csv;jQuery.ajax({url:"/graphics/olympic2020/datavisual/swimming/csv/"+s+".csv"}).done(function(s){for(var o=s.split(/\r|\n|\rn/),n={},r=!1,a=0,l=[],c=0;c<o.length;c++){var d=o[c];if(r){if(/^\([1-9]\)/.test(d)){l[a]=d.replace(/\([1-9]\)|(\,)+/g,"");continue}if(""==d)continue;if(/^(\,)+$/.test(d)){a++;continue}var p=d.split(","),u=p[2].match(/\([a-zA-Z]+\)/)[0].replace(/\(|\)/g,"").toLowerCase();n[u]||(n[u]={current:0,turn:!1}),n[u].types||(n[u].types=[]),n[u].types[a]={type:l[a],name:p[0],gender:p[1],time:{before:e.TOKYO2020.DATAVISUAL.SWIM_RECORDS.convertToMili(p[3]),after:e.TOKYO2020.DATAVISUAL.SWIM_RECORDS.convertToMili(p[4])}}}/^\([1-9]\)/.test(d)&&(l[a]=d.replace(/\([1-9]\)|(\,)+/g,""),r=!0)}i._initialize(n,t)}).fail(function(e){for(var t=document.querySelectorAll(".olympic-2020-datavisual-swimming-canvas"),i=0;i<t.length;i++)t[i].innerHTML='<p style="position: absolute;top: 50%;left: 0;width: 100%;text-align: center;margin-top: -8px;">データの読み込みに失敗しました、画面を読み込み直して下さい</p>'})},t.prototype._initialize=function(t,i){var s=this;e.TOKYO2020.DATAVISUAL.IMAGES.init();for(var o=0,n=0;n<=2;n++){var r=new Image;r.addEventListener("load",function(n){e.TOKYO2020.DATAVISUAL.IMAGES.setImage(n.target.getAttribute("data-key"),n.target),3==++o&&s._loadFlags(t,i)}),r.setAttribute("data-key","result_"+n),r.src="/graphics/olympic2020/datavisual/swimming/images/result_{{}}.png".replace("{{}}",n)}},t.prototype._loadFlags=function(t,i){var s=0,o=Object.keys(t);e.TOKYO2020.COMMON.forEach(o,function(n,r){var a=new Image;a.addEventListener("load",function(n){if(e.TOKYO2020.DATAVISUAL.IMAGES.setImage(n.target.getAttribute("data-key"),n.target),++s==o.length){var r=new e.TOKYO2020.DATAVISUAL.SWIM_MEDLEY(document.getElementsByClassName("datavisual-swimming")[i].querySelector("canvas#swim"),document.getElementsByClassName("datavisual-swimming")[i].querySelector("#record"),t,i);document.getElementsByClassName("datavisual-swimming")[i].querySelector("canvas#swim_backstroke")&&(new e.TOKYO2020.DATAVISUAL.SWIM_MEDLEY(document.getElementsByClassName("datavisual-swimming")[i].querySelector("canvas#swim_backstroke"),document.querySelector("#timer_backstroke"),t),new e.TOKYO2020.DATAVISUAL.SWIM_MEDLEY(document.getElementsByClassName("datavisual-swimming")[i].querySelector("canvas#swim_butterfly"),document.querySelector("#timer_butterfly"),t),new e.TOKYO2020.DATAVISUAL.SWIM_MEDLEY(document.getElementsByClassName("datavisual-swimming")[i].querySelector("canvas#swim_breaststroke"),document.querySelector("#timer_breaststroke"),t),new e.TOKYO2020.DATAVISUAL.SWIM_MEDLEY(document.getElementsByClassName("datavisual-swimming")[i].querySelector("canvas#swim_free"),document.querySelector("#timer_free"),t)),document.getElementsByClassName("datavisual-swimming")[i].querySelector("#playback").addEventListener("click",function(){var t=function(e,t){if(e)return t.style.pointerEvents="nonents="auto"},s=this;t(!0,s),setTimeout(function(){t(!1,s)},1e3);for(var o=document.getElementById("swimmingImage0").getElementsByClassName("swimming-images"),n=0;n<o.length;n++)o[n].style.display="none";r.clear(),r.runAnimationAll(),"freestyle"!==document.getElementsByClassName("datavisual-swimming")[i].dataset.swimgenre&&e.TOKYO2020.COMMON.forEach(document.getElementsByClassName("datavisual-swimming")[i].querySelector(".olympic-2020-datavisual-swimming-canvasviewer").querySelectorAll(".olympic-2020-datavisual-swimming-title_bg"),function(t,i){0==i?(e.TOKYO2020.COMMON.addClass({target:t,key:"current"}),e.TOKYO2020.COMMON.addClass({target:t,key:"active"})):e.TOKYO2020.COMMON.removeClass({target:t,key:"current"}),e.TOKYO2020.COMMON.removeClass({target:t,key:"over"}),e.TOKYO2020.COMMON.removeClass({target:t,key:"active"})}),e.TOKYO2020.COMMON.forEach(document.getElementsByClassName("datavisual-swimming")[i].querySelectorAll(".olympic-2020-datavisual-swimming-record_current"),function(t,i){e.TOKYO2020.COMMON.removeClass({target:t,key:"active"}),e.TOKYO2020.COMMON.removeClass({target:t,key:"olympic-2020-datavisual-swimming-record_current--strong"})})});for(var a=document.getElementsByClassName("datavisual-swimming")[i].querySelectorAll(".olympic-2020-datavisual-swimming-control-speed-btn"),l=0;l<a.length;l++)a[l].addEventListener("click",function(e){"up"==this.getAttribute("data-type")&&10*r.MODULE.addtime<=100?r.MODULE.addtime*=10:"down"==this.getAttribute("data-type")&&r.MODULE.addtime/10>=10&&(r.MODULE.addtime/=10)})}}),a.setAttribute("data-key",n),a.src="/graphics/olympic2020/datavisual/swimming/images/flags/olympic-2020-datavisual-swim-icn_{{}}.png".replace("{{}}",n)})};for(var i=0;i<document.getElementsByClassName("datavisual-swimming").length;i++)(new t).main(i)}}),e.TOKYO2020.COMMON={init:function(){this.breakPoint=600,this.prefix="olympic-2020"},toggleClass:function(e){var t=e.class.indexOf(e.key);-1==t?e.target.setAttribute("class",(e.class.length>0?e.class.join(" ")+" ":"")+e.key):(e.class.splice(t,1),e.eturn e.getAttribute("class")?e.getAttribute("class"):""},addClass:function(e){var t=this.getClass(e.target).split(" ");-1==t.indexOf(e.key)&&e.target.setAttribute("class",(t.length>0?t.join(" ")+" ":"")+e.key)},removeClass:function(e){var t=this.getClass(e.target).split(" "),i=t.indexOf(e.key);-1!=i&&(t.splice(i,1),e.target.setAttribute("class",t.join(" ")))},hasClass:function(e){var t=e.target.getAttribute("clrEach:function(e,t){for(var i=0;i<e.length;i++)t(e[i],i)},scrollTo:function(e,t,i){void 0===Element.prototype.scrollTo?(e.scrollLeft=t,e.scrollTop=i):e.scrollTo(t,i)},breakPoint:600},e.TOKYO2020.SMOOTH_SCROLL={init:function(){this.setParams(),this.bindEvents()},setParams:function(){this.elem_targets=jQuery('a[href^="#"],a[href^="'+location.pathname+'#"]')},bindEvents:function(){var e=this;if(e.elem_targets.on("click",function(){var t=jQuery(this).attr("href").replace(location.pathname,""),i=jQuery("#"==t||""==t?"html":t);return e.scroll(i)}),-1!=location.href.indexOf("#")){var t=location.href.substr(location.href.indexOf("#")),i=jQuery("#"==t||""==t?"html":t);e.scroll(i)}},scroll:function(e){return e.length>0&&jQuery("html, body").animate({scrollTop:"html"==e.selector?e.offset().top:e.offset().top-jQuery(".p-olympic-2020-header").outerHeight()},300,"swing"),!1}},e.TOKYO2020.HEADER_ACCORDION={init:function(){this.setParams(),this.bindEvents()},setParams:function(){this.elm_targets=[document.querySelector("#js-"+e.TOKYO2020.COMMON.prefix+"-header-megamenu-games")],this.status={active:"active"}},runAccordion:function(t){var i=this,s=t.nextElementSibling,o={target:t.parentNode,key:i.status.active};e.TOKYO2020.COMMON.hasClass(o)?(e.TOKYO2020.COMMON.removeClass(o),s.removeAttribute("style")):(e.TOKYO2020.COMMON.addClass(o),s.setAttribute("style","height:"+s.children[0].getBoundingClientRect().height+"px"))},bindEvents:function(){var t=this;e.TOKYO2020.COMMON.forEach(this.elm_targets,function(i,s){i.addEventListener("click",function(i){window.innerWidth<e.TOKYO2020.COMMON.breakPoint&&t.runAccordion.call(t,this)})}),window.addEventListener("resize",function(){window.innerWidth>=e.TOKYO2020.COMMON.breakPoint&&e.TOKYO2020.COMMON.hasClass({target:t.elm_targets[0].parentNode,key:"active"})?t.elm_targets[0].nextElementSibling.removeAttribute("style"):window.innerWidth<e.TOKYO2020.COMMON.breakPoint&&e.TOKYO2020.COMMON.hasClass({target:t.elm_targets[0].parentNode,key:"active"})&&t.elm_targets[0].nextElementSibling.setAttribute("style","height:"+t.elm_targets[0].nextElementSibling.children[0].getBoundingClientRect().height+"px")})}},e.TOKYO2020.HEADER_SCROLLFIXED={init:function(){this.setParams(),this.bindEvents()},setParams:function(){this.elm_target=document.querySelector(".p-"+e.TOKYO2020.COMMON.prefix+"-header"),this.elm_body=document.querySelector("body"),this.status={active:"active",show:"show"},this.scroll={position:window.pageYOffset,ticking:!1},this.isFixed=!1},eventScroll:function(t){for(var i=this,s={target:i.elm_body,key:i.status.active},o=i.elm_target.nextElementSibling;;){if(0!=o.getBoundingClientRect().top)break;o=o.nextElementSibling}i.checkPosition.call(i,o)?(e.TOKYO2020.COMMON.addClass(s),i.eventShow.call(i,t)):e.TOKYO2020.COMMON.removeClass(s)},eventShow:function(t){var i=this,s=(t.changedTouches,{target:i.elm_body,key:i.status.show});i.scroll.position>window.pageYOffset?e.TOKYO2020.COMMON.addClass(s):e.TOKYO2020.COMMON.removeClass(s),i.scroll.position=window.pageYOffset},bindEvents:function(){var e=this;window.addEventListener("scroll",function(t){0==e.isFixed&&e.eventScroll.call(e,t)})},checkPosition:function(t){var i=window.pageYOffset,s=t.getBoundingClientRect().top+i;return e.TOKYO2020.COMMON.breakPoint<window.innerWidth?i+65>s:i>s}},e.TOKYO2020.HEADER_MENU={init:function(){this.setParams(),this.bindEvents()},setParams:function(){this.elm_btnDrop=document.querySelector(".p-"+e.TOKYO2020.COMMON.prefix+"-header-nav-menu-drop"),this.elm_btnSearch=document.querySelector(".p-"+e.TOKYO2020.COMMON.prefix+"-header-nav-menu-search"),this.elm_megaMenu=document.querySelector(".p-"+e.TOKYO2020.COMMON.prefix+"-header-megamenu"),this.elm_body=document.querySelector("body"),this.elm_btnClose=document.querySelector(".p-"+e.TOKYO2020.COMMON.prefix+"-header-megamenu-content-close"),this.scrollPositionY=0,this.entity_HEADER_SCROLLFIXED=e.TOKYO2020.HEADER_SCROLLFIXED,this.status={active:"active",show:"show",drop:"drop",search:"search"},this.props={drop:{target:this.elm_btnDrop,key:this.status.active},body:{show:{target:this.elm_body,key:this.status.show},drop:{target:this.elm_body,key:this.status.drop},search:{target:this.elm_body,key:this.status.search}},menu:{target:this.elm_megaMenu,key:this.status.active}}},menuOpen:function(){var t=this;t.scrollPositionY=window.pageYOffset,t.elm_body.setAttribute("style","position: fixed; top: "+-1*t.scrollPositionY+"px; left: 0; right: 0;"),e.TOKYO2020.COMMON.addClass(t.props.menu),e.TOKYO2020.COMMON.addClass(t.props.body.show),t.entity_HEADER_SCROLLFIXED.isFixed=!0},menuClose:function(){var t=this;e.TOKYO2020.COMMON.removeClass(t.props.menu),e.TOKYO2020.COMMON.removeClass(t.props.drop),e.TOKYO2020.COMMON.removeClass(t.props.body.drop),e.TOKYO2020.COMMON.removeClass(t.props.body.search),t.elm_body.removeAttributeimeout(function(){t.entity_HEADER_SCROLLFIXED.isFixed=!1},100)},eventBgClick:function(t){var i=this;t==i.elm_megaMenu&&(e.TOKYO2020.COMMON.removeClass(i.props.drop),i.menuClose.call(i))},eventCloseClick:function(t){var i=this;e.TOKYO2020.COMMON.removeClass(i.props.drop),i.menuClose.call(i)},eventMenuDrop:function(t){var i=this;e.TOKYO2020.COMMON.hasClass(i.props.drop)&&!e.TOKYO2020.COMMON.hasClass(i.props.body.search)?i.menuClose.call(i):(e.TOKYO2020.COMMON.addClass(i.props.drop),e.TOKYO2020.COMMON.addClass(i.props.body.drop),e.TOKYO2020.COMMON.hasClass(i.props.body.search)||i.menuOpen.call(i),e.TOKYO2020.COMMON.removeClass(i.props.body.search))},eventMenuSearch:function(t){var i=this;e.TOKYO2020.COMMON.hasClass(i.props.body.search)&&!e.TOKYO2020.COMMON.hasClass(i.props.body.drop)?i.menuClose.call(i):(e.TOKYO2020.COMMON.removeClass(i.props.drop),e.TOKYO2020.COMMON.addClass(i.props.body.search),e.TOKYO2020.COMMON.hasClass(i.props.body.drop)||i.menuOpen.call(i),e.TOKYO2020.COMMON.removeClass(i.props.body.drop))},bindEvents:function(){var e=this;e.elm_btnDrop.addEventListener("click",function(t){e.eventMenuDrotener("click",function(t){e.eventMenuSearntListener("click",function(t){e.evener("click",function(t){e.eventBgClick.call(e,t.target)})}},e.TOKYO2020.SCHEDULE_TABLE={init:function(){this.setParams(),this.CtrlEventHighLight.init.is.CtrlEventFixed.init.call(this)},setParams:function(){},CtrlEventHighLight:{init:function(){this.CtrlEventHighLight.setParams.call(this),this.CtrlEventHighLight.bindEvents.call(this.CtrlEventHighLight)},setParams:function(){var t=this.CtrlEventHighLight;t.super=this,t.elm_targets=document.querySelectorAll(".p-"+e.TOKYO2020.COMMON.prefix+"-schTable tbody td")},bindEvents:function(){var t=this;e.TOKYO2020.COMMON.forEach(t.elm_targets,function(e,i){e.addEventListener("mouseenter",function(e){t.eventHighLight.call(t,e)}),e.addEventListener("mouseleave",function(e){t.eventHighLight.call(t,e)})})},getIndexNumber:function(e){var t=e.parentNode;return Array.prototype.indexOf.call(t.querySelectorAll("td"),e)},trimClass:function(e){e.flg?e.target.classList.add(e.key):e.target.classList.remove(e.key)},eventHighLight:function(t){var i=this,s=i.getIndexNumber(t.target),o="mouseenter"==t.type;i.trimClass({target:t.target.parentNode,flg:o,key:"highLight"}),e.TOKYO2020.COMMON.forEach(document.querySelectorAll(".p-"+e.TOKYO2020.Cction(e,t){i.trimClass({target:e,flg:o,key:"highLight"})}),e.TOKYO2020.COMMON.forEach(document.querySelectorAll(".p-"+e.TOKYO2020.COMMON.prefix+"-schTableDate"),function(e,t){var n=e.querySelector("th:nth-of-type("+(s+1)+")");n&&i.trimClass({target:n,flg:o,key:"highLight"})})}},CtrlEventFixed:{init:function(){this.CtrlEventFixed.setParams.call(this),this.CtrlEventFixed.bindEvents.call(this.CtrlEventFixed)},setParams:function(){var t=this.CtrlEventFixed;t.super=this,t.elm_schHeadFixedScroll=document.querySelectorAll(".p-"+e.TOKYO2020.COMMON.prefix+"-schHeadFixedScroll"),t.elm_scheduleScroll=document.querySelectorAll(".p-"+e.TOKYO2020.COMMON.prefix+"-schTableScroll")},bindEvents:function(){var e=this;e.setDateRowStyle.call(e),e.setScrollBar.call(e),e.setFixedHeader.call(e)},setDateRowStyle:function(){var t=this,i=document.querySelectorAll(".p-"+e.TOKYO2020.COMMON.prefix+"-schBoxInner");e.TOKYO2020.COMMON.forEach(t.elm_schHeadFixedScroll,function(e,t){e.style.width=i[t].offsetWidth+"px";var s=0;window.addEventListener("resize",function(){clearTimeout(s),s=setTimeout(function(){e.style.width=i[t].offsetWidth+"px",e.style.left="auto"},200)})})},setScrollBar:function(){var t=this,i=document.querySelector(".p-olympic-2020-schTableDate th:last-child"),s=document.querySelector(".p-"+e.TOKYO2020.COMMON.prefix+"-schBoxInner");e.TOKYO2020.COMMON.forEach(t.elm_scheduleScroll,function(o,n){o.addEventListener("scroll",function(o){t.elm_schHeadFixedScroll[n].scrollTo(o.target.scrollLeft,0),i.getBoundingClientRect().right<window.innerWidth?e.TOKYO2020.COMMON.addClass({target:s,key:"end"}):e.TOKYO2020.COMMON.removeClass({target:s,key:"end"})})}),e.TOKYO2020.COMMON.forEach(t.elm_schHeadFixedScroll,function(o,n){o.addEventListener("scroll",function(o){t.elm_scheduleScroll[n].scrollTo(o.target.scrollLeft,0),i.getBoundingClientRect().right<window.innerWidth?e.TOKYO2020.COMMON.addClass({target:s,key:"end"}):e.TOKYO2020.COMMON.removeClass({target:s,key:"end"})})})},setFixedHeader:function(){function t(){return window.innerWidth<e.TOKYO2020.COMMON.breakPoint?e.TOKYO2020.COMMON.hasClass({target:document.querySelector("body"),key:"show"})?n.clientHeight:0:n.clientHeight}function i(){var i=this;e.TOKYO2020.COMMON.forEach(i.elm_scheduleScroll,function(e,s){var n=e.getBoundingClientRect().top+window.pageYOffset;window.pageYOffset>=n?window.pageYOffset<n+e.clientHeight-window.innerHeight/2?(i.elm_schHeadFixedScroll[s].classList.add("fixed"),o[s].classList.add("fixed"),i.elm_schHeadFixedScroll[s].style.top=t()+"px",o[s].style.top=t()+"px"):(i.elm_schHeadFixedScroll[s].classList.remove("fixed"),o[s].classList.remove("fixed")):(i.elm_schHeadFixedScroll[s].classList.remove("fixed"),o[s].classList.remove("fixed"),i.elm_schHeadFixedScroll[s].style.top="0px",o[s].style.top="0px")})}var s=this,o=document.querySelectorAll(".competitionFixed"),n=document.querySelector(".p-"+e.TOKYO2020.COMMON.prefix+"-header");setTimeout(fu),window.addEventListener("scroll",function(e){i.call(s)})}}},e.TOKYO2020.ALIGN_HEIGHT={init:function(){this.setParams(),this.bindEvents()},setParams:function(){this.elm_targets=document.querySelectorAll(".p-olympic-2020-athletes")},bindEvents:function(){var t=this;e.TOKYO2020.COMMON.forEach(t.elm_targets,function(e,i){var s=e.querySelectorAll(".p-olympic-2020-athletes-list-item-link-profile-name");t.setHeight.call(t,s);var o=setTimeout(function(){t.eventResize.call(t,s)},200);window.addEventmeout(o),o=setTimeout(:function(e){var t=this;t.removeHeight(e),t.setHeight(e)},getHeight:function(t){var i=0;return e.TOKYO2020.COMMON.forEach(t,function(e,t){i<e.clientHeight&&(i=e.clientHeight)}),i},setHeight:function(t)t,function(e,t){e.setAttribute("style","height:"+s+"px")OMMON.forEach(t,function(e,t){e.removeAttribute("style")})}},e.TOKYO2020.UNI_SCRAP={initn"),this.elm_target=document.querySelector(".uni-scrap")},bindEvents:function(){var e=this;e.elm_btn.setAttribute("class",e.elm_btn.getAttribute("class").addEventListener("click",function(){e.eventClick.call(e)})},eventClick:function(){var e=this;e.elm_target.setAttribute("class",e.elm_target.getAttribute("class").replace("inactive",""))}},e.TOKYO2020.COUNTDOWN={init:function(){this.setParams(),this.bindEvents()},setParams:function(){this.date=/olympic\/paralympic2020/.test(location.pathname)?"2021/8/24":"2021/7/23",this.milli2day=864e5,this.today=(new Date).getTime(),this.elm_targets=document.querySelectorAll(".p-olympic-2020-sidebar-countdown-day-date,.olympic-2020-top-title-countdown")},bindEvents:functEach(t.elm_targets,function(e,i){e.innerText=t.diffDay()})},diffDay:function(){var e=this,t=new Date(e.date).getTime()+72e6,i=Math.floor((t-e.today)/e.milli2day);return i>0?i:0}},e.TOKYO2020.DAZN={inition(){this.elm_target=document.querySelector("#js-dazn")},bindEvents:function(){var e=this;if(e.elm_target){if(e.checkPosition.call(e))retur.putDazn.call(e),window.removeEventListener("scroll",t))})}},putDazn:function(){var e=this,t=document.createElement("script");t.setAttribute("async",""),t.setAttribute("src",e.elm_target.getAttribute("data-src")),e.elm_target.appendChild(t)},checkPosition:function(){var e=this;return window.pageYOffset+window.innerHeight>=e.elm_target.getBoundingClientRect().top+window.pageYOffset}},e.TOKYO2020.LAZYLOAD={init:function(){this.setParams(),this.bindEvents()},setParams:function(){this.remove_classlist=["lazy","loading"],this.isLoading=!1},bindEvents:function(){var e=this;e.setImageSrc(document.querySelectorAll(".lazy"));var t=!1;window.addEventListener("scroll",function i(){if(!t&&0==e.isLoading){var s=document.querySelectorAll(".lazy");0==s.tener("scroll",i),setTimeout(function(){e.setImageSrc(s)})}t=!0,setTimeout(function(){t=!1},60)})},setImageSrc:function(e){for(var t=this,i=t.getLazyArray(e),s=e.length-1;s>=0;s--)if(e[s].getBoundingClientRect().top-1.5*window.innerHeight<=0)for(var o=t.getRenamedPath(e[s].getAttribute("data-src")),n=0,r=i.length;n<r;n++)if(-1!=i[n].path.indexOf(o)){t.isLoading=!0;var a=new Image;a.addEventListener("load",function(i){for(var s=i.target.getAttribute("data-id"),o=0,n=s.split(",").length;o<n;o++){for(var r=e[s.split(",")[o]],a=(r.getAttribute("class")?r.getAttribute("class"):"").split(" "),l=0;l<t.remove_classlist.length;l++){var c=a.indexOf(t.remove_classlist[l]);-1!=c&&(a.splice(c,1),r.setAttribute("class",a.join(" ")))}r.setAttribute("src",i.target.src)}t.isLoading=!1}),a.src=o,a.setAttribute("data-id",i[n].ids),i.splice(n--,1);break}},getRenamedPath:function(e){return/^https?:\/{2,}(.*?)(?:\/|\?|#|$)/.test(e)&&-1!=e.indexOf(location.host)?e.replace(/^https?:\/{2,}(.*?)(?:\/|\?|#|$)/,"/"):e},getLazyArray:function(e){for(var t=this,i=[],s=0;s<e.length;s++){var o=e[s],n=t.getRenamedPath(o.getAttribute("data-src"));if(0==i.length)i[0]={path:n,ids:s};else{for(var r=!1,a=0;a<i.length;a++){var l=i[a].path.indexOf(n);if(-1!=l){i[a].ids+=","+s;break}a==i.length-1&&-1==l&&(r=!0)}r&&i.push({path:n,ids:s})}}return i}},e.TOKYO2020.RELAY_MAP={init:function(){this.setParams(),this.bindEvents()},setParams:function(){this.canvas={},this.canvas.scrollPos={x_rate:.566666,y_rate:.680006},this.canvas.controle={},this.canvas.controle.plus=document.querySelector(".olympic-2020-torch-relay-map-zoom-controle-btn--plus"),this.canvas.controle.minus=document.querySelector(".olympic-2020-torch-relay-map-zoom-controle-btn--minus"),this.canvas.element=document.querySelector("canvas#relay"),this.canvas.zoom=this.canvas.element.getAttribute("data-zoom")?parseInt(this.canvas.element.getAttribute("data-zoom")):1,this.canvas.context=this.canvas.element.getContext("2d"),this.img={},this.img.map=new Image,this.prefectureInfo=[{link:"#hokkaido",box:3,pos:{x:1405,y:340}},{link:"#aomori",box:2,pos:{x:1330,y:583}},{link:"#iwate",box:2,pos:{x:1385,y:738}},{link:"#miyagi",box:2,pos:{x:1335,y:894}},{link:"#akita",box:2,pos:{x:1290,y:685}},{link:"#yamagata",box:2,pos:{x:1235,y:846}},{link:"#fukushima",box:2,pos:{x:1227,y:1001}},{link:"#ibaraki",box:2,pos:{x:1280,y:1139}},{link:"#tochigi",box:2,pos:{x:1201,y:1094}},{link:"#gunma",box:2,pos:{x:1121,y:1101}},{link:"#saitama",box:2,pos:{x:1138,y:1174}},{link:"#chiba",box:2,pos:{x:1219,y:1304}},{link:"#tokyo",box:2,pos:{x:1156,y:1216}},{link:"#kanagawa",box:3,pos:{x:1170,y:1258}},{link:"#niigata",box:2,pos:{x:1139,y:955}},{link:"#toyama",box:2,pos:{x:951,y:1070}},{link:"#ishikawa",box:2,pos:{x:863,y:1103}},{link:"#fukui",box:2,pos:{x:833,y:1147}},{link:"#yamanashi",box:2,pos:{x:1051,y:1214}},{link:"#nagano",box:2,pos:{x:1013,y:1141}},{link:"#gihu",box:2,pos:{x:925,y:1214}},{link:"#shizuoka",box:2,pos:{x:1056,y:1312}},{link:"#aichi",box:2,pos:{x:931,y:1285}},{link:"#mie",box:2,pos:{x:863,y:1350}},{link:"#shiga",box:2,pos:{x:812,y:1265}},{link:"#kyoto",box:2,pos:{x:738,y:1197}},{link:"#osaka",box:2,pos:{x:743,y:1318}},{link:"#hyogo",box:2,pos:{x:673,y:1247}},{link:"#nara",box:2,pos:{x:770,y:1388}},{link:"#wakayama",box:2,pos:{x:728,y:1461}},{link:"#tottori",box:2,pos:{x:582,y:1175}},{link:"#shimane",box:2,pos:{x:447,y:1182}},{link:"#okayama",box:2,pos:{x:560,y:1261}},{link:"#hiroshima",box:2,pos:{x:433,y:1259}},{link:"#yamaguchi",box:2,pos:{x:308,y:1289}},{link:"#tokushima",box:2,pos:{x:607,y:1402}},{link:"#kagawa",box:2,pos:{x:573,y:1334}},{link:"#ehime",box:2,pos:{x:452,y:1370}},{link:"#kochi",box:2,pos:{x:481,y:1445}},{link:"#fukuoka",box:2,pos:{x:241,y:1333}},{link:"#saga",box:2,pos:{x:158,y:1373}},{link:"#nagasaki",box:2,pos:{x:130,y:1442}},{link:"#kumamoto",box:2,pos:{x:230,y:1459}},{link:"#oita",box:2,pos:{x:304,y:1408}},{link:"#miyazaki",box:2,pos:{x:257,y:1538}},{link:"#kagoshima",box:3,pos:{x:166,y:1603}},{link:"#okinawa",box:2,pos:{x:550,y:610}}]},drawMaps:function(){var e=this;e.canvas.element.width=e.img.map.width,e.canvas.element.height=e.img.map.height,e.canvas.context.drawImage(e.img.map,0,0)},getScrollTo:{x:function(){return this.canvas.element.parentNode.offsetWidth*this.canvas.scrollPos.x_rate*(this.canvas.zoom-1)},y:function(){return this.canvas.element.parentNode.offsetHeight*this.canvas.scrollPos.y_rate*(this.canvas.zoom-1)}},checkCoord:function(t){var i=this,s=t.target.parentNode,o=t.clientX-s.getBoundingClientRect().left,n=t.clientY-s.getBoundingClientRect().top,r={x:document.querySelector(".olympic-2020-torch-relay-map-canvas").offsetWidth*i.canvas.zoom/i.canvas.element.width,y:document.querySelector(".olympic-2020-torch-relay-map-canvas").offsetHeight*i.canvas.zoom/i.canvas.element.height},a=null;return e.TOKYO2020.COMMON.forEach(i.prefectureInfo,function(e,t){var i=Math.floor(e.pos.x*r.x)-s.scrollLeft,l=Math.floor(e.pos.y*r.y)-s.scrollTop,c=Math.floor(29*e.box*r.x),d=Math.floor(32*r.y);o>=i&&o<=i+c&&n>=l&&n<=l+d&&(a=e)}),a},eventHover:function(e){var t=this,i=t.checkCoord.call(t,e);t.canvas.element.parentNode.style.cursor=i?"pointer":"default"},eventClick:{view:function(e){var t=this,i=t.checkCoord.call(t,e);i&&document.querySelector(i.link)&&document.querySelector(i.link).click()},plus:function(t){var i=this;if(i.canvas.zoom>2)return!1;i.canvas.element.setAttribute("data-zoom",++i.canvas.zoom),i.canvas.element.style.width=i.canvas.element.parentNode.offsetWidth*i.canvas.zoom+"px",i.canvas.element.style.height=.84*parseInt(i.canvas.element.style.width.replace("px",""))+"px",e.TOKYO2020.COMMON.scrollTo(i.canvas.element.parentNode,i.getScrollTo.x.call(i),i.getScrollTo.y.call(i)),i.canvas.zoom>2?e.TOKYO2020.COMMON.addClass({target:i.canvas.controle.plus,key:"inactive"}):e.TOKYO2020.COMMON.removeClass({target:i.canvas.controle.plus,key:"inactive"}),e.TOKYO2020.COMMON.removeClass({target:i.canvas.controle.minus,key:"inactive"})},minus:function(t){var i=this;if(i.canvas.zoom<2)return!1;i.canvas.element.setAttribute("data-zoom",--i.canvas.zoom),i.canvas.element.style.width=i.canvas.element.parentNode.offsetWidth*i.canvas.zoom+"px",i.canvas.element.style.height=.84*parseInt(i.canvas.element.style.width.replace("px",""))+"px",i.canvas.zoom>1&&e.TOKYO2020.COMMON.scrollTo(i.canvas.element.parentNode,i.getScrollTo.x.call(i),i.getScrollTo.y.call(i)),i.canvas.zoom<2?e.TOKYO2020.COMMON.addClass({target:i.canvas.controle.minus,key:"inactive"}):e.TOKYO2020.COMMON.removeClass({target:i.canvas.controle.minus,key:"inactive"}),e.TOKYO2020.COMMON.removeClass({target:i.canvas.controle.plus,key:"inactive"})}},bindEvents:function(){var t=this;t.img.map.addEventListener("load",function(){t.drawMaps.call(t),t.canvas.element.style.width=t.canvas.element.parentNode.offsetWidth*t.canvas.zoom+"px",t.canvas.element.style.height=.84*parseInt(t.canvas.element.style.width.replace("px",""))+"px",t.canvas.element.style.opacity=1;var i=!1;window.addEventListener("resize",function(){i||(i=!0,t.canvas.element.style.width=t.canvas.element.parentNode.offsetWidth*t.canvas.zoom+"px",t.canvas.element.style.height=.84*parseInt(t.can.width.replace("px",""))+"px",setTimeout(function(){i=!1},60))}),void 0!==window.onorientationchange&&window.addEventListener("orientationchange",function(e){setTimeout(function(){t.canvas.element.style.width=t.canvas.element.parentNode.offsetWidth*t.canvas.zoom+"px",t.canvas.element.style.height=.84*parseInt(t.canvas.element.style.width.replace("px",""))+"px"},100)}),e.TOKYO2020.COMMON.scrollTo(t.canvas.element.parentNode,t.getScrollTo.x.call(t),t.getScrollTo.y.call(t)),t.canvas.controle.minus.addEventListener("click",function(e){e.preventDefault(),t.eventClick.minus.call(t,e)}),e.TOKYO2020.COMMON.removeClass({target:t.canvas.controle.plus,key:"inactive"}),t.canvas.controle.plus.addEventListener("click",function(e){e.preventDefault(),t.eventClick.pListener("click",function(e){t.eventClick.view.tListener("mousemove",function(e){t.eventHover.call(t,e)})}),t.img.map.src=t.canvas.element.getAttribute("data-map")}},e.TOKYO2020.ATHLETES={init:function(){this.setParams(),this.bindEvents()},setParams:function(){this.elem_targets=document.querySelectorAll("[class^=uni] .p-olympic-2020-games-list-item-link"),this.elem_select=document.querySelector(".uni-olympic-2020-athletes-listCol"),this.elem_options=this.elem_select.children},bindEvents:function(){for(var t=this,i=0;i<t.elem_targets.length;i++)document.querySelector(t.elem_targets[i].getAttribute("href"))||e.TOKYO2020.COMMON.addClass({target:t.elem_targets[i].parentNode,key:"p-olympic-2020-disabled"});for(var i=0;i<t.elem_options.length;i++)document.querySelector("#"+t.elem_options[i].value)||t.elem_options[i].setAttribute("disabled","disabled");t.elem_select.addEventListener("change",function(e){var t=document.querySelector("[class^=uni] .p-olympic-2020-games-list-item-link[href$="+e.target.vaAILS={initetes="#games-athletes",this.key_foreign="#games-foreign"},bindEvents:function(){var e=this;document.querySelector(e.key_athletes)||e.remove(e.key_athletes),document.querySelector(e.key_foreign)||e.remove(e.key_foreign)},remove:function(e){for(var t=document.querySelectorAll(".olympic-2020-games-details-nav-list a"),i=0;i<t.length;i++)t[i].getAttribute("href")==e&&t[i].parentNode.parentNode.removeChild(t[i].parentNode)}},e.TOKYO202UAL.SWIM_RECORDS={init:function(e,t){this.setParams(e,t)},setParams:function(e,t){var i=this;i.graphNo=t;var s="";switch(void 0!==t&&(s=document.getElementsByClassName("datavisual-swimming")[t].dataset.csv.slice(0,-12)),s){case"m400m":console.log("男子400個人メドレー世界記録・オリンピック記録"),i.otherrecords={or:{color:"0,255,0",current:3,turn:!1,types:[{type:"butterfly",name:"マイケル・フェルプス",time:i.convertToMili("55.03")},{type:"backstroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"breaststroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"free",name:"マイケル・フェルプス",time:i.convertToMili("60.96")}]},wr:{color:"255,0,0",current:3,turn:!1,types:[{type:"butterfly",name:"マイケル・フェルプス",time:i.convertToMili("50.96")},{type:"backstroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"breaststroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"free",name:"マイケル・フェルプス",time:i.convertToMili("60.96")}]}};break;case"w400m":console.log("女子400個人メドレー世界記録・オリンピック記録"),i.otherrecords={or:{color:"0,255,0",current:3,turn:!1,types:[{type:"butterfly",name:"マイケル・フェルプス",time:i.convertToMili("55.03")},{type:"backstroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"breaststroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"free",name:"マイケル・フェルプス",time:i.convertToMili("60.96")}]},wr:{color:"255,0,0",current:3,turn:!1,types:[{type:"butterfly",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"backstroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"breaststroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"free",name:"マイケル・フェルプス",time:i.convertToMili("60.96")}]}};break;case"w4×100f":console.log("女子4x100フリーリレー世界記録・オリンピック記録"),i.otherrecords={or:{color:"0,255,0",current:3,turn:!1,types:[{type:"butterfly",name:"マイケル・フェルプス",time:i.convertToMili("80.03")},{type:"backstroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"breaststroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"free",name:"マイケル・フェルプス",time:i.convertToMili("60.96")}]},wr:{color:"255,0,0",current:3,turn:!1,types:[{type:"butterfly",name:"マイケル・フェルプス",time:i.convertToMili("70.96")},{type:"backstroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"breaststroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"free",name:"マイケル・フェルプス",time:i.convertToMili("60.96")}]}};break;case"w4×100m":console.log("女子4x100メドレーリレー世界記録・オリンピック記録"),i.otherrecords={or:{color:"0,255,0",current:3,turn:!1,types:[{type:"butterfly",name:"マイケル・フェルプス",time:i.convertToMili("52.03")},{type:"backstroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"breaststroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"free",name:"マイケル・フェルプス",time:i.convertToMili("60.96")}]},wr:{color:"255,0,0",current:3,turn:!1,types:[{type:"butterfly",name:"マイケル・フェルプス",time:i.convertToMili("40.96")},{type:"backstroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"breaststroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"free",name:"マイケル・フェルプス",time:i.convertToMili("60.96")}]}};break;case"mw4×100m":console.log("混合4x100メドレーリレー世界記録・オリンピック記録"),i.otherrecords={or:{color:"0,255,0",current:3,turn:!1,types:[{type:"butterfly",name:"マイケル・フェルプス",time:i.convertToMili("59.03")},{type:"backstroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"breaststroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"free",name:"マイケル・フェルプス",time:i,wr:{color:"255,0,0",current:3,turn:!1,types:[{type:"butterfly",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"backstroke",name:"マイケル・フェルプス",time:i.convertToMili("60.96")},{type:"breaststroke",name:"マイケル・フェルプス",time:i.convertT",name:"マイケル・フェルプス",time:i.convertToMili("60.96")}]}};default:console.log("無し")}for(var o in i.otherrecords){for(var n=[],r=0;r<i.otherrecords[o].types.length;r++)n.push(i.otherrecords[o].types[r].time);i.otherrecords[o].goaltime=n.reduce(function(e,t){return e+t})}document.querySelector(".olympic-2020-datavisual-swimming");i.records=e,void 0!==t&&(i.swimgenre=document.getElementsByClassName("datavisual-swimming")[t].dataset.swimgenre,i.graphNo=t),i.winner=null;for(var o in i.records){for(var n=[],r=0;r<i.records[o].types.length;r++)i.records[o].types[r].time.sum=i.records[o].types[r].time.before+i.records[o].types[r].time.after,n.push(i.records[o].types[r].time.sum);i.records[o].goaltime=n.reduce(function(e,t){return e+t}),i.winner?i.winner.time>i.records[o].goaltime&&(i.winner={key:o,time:,time:i.records[o].goaltime}}i.passedTime=0,i.loopperiod=10,i.addtime=100,i.lineColors=["16, 165, 230","71, 214, 154","147, 128, 250","255, 100, 124"],i.animation,i.isFinal=!1},setCanvas:function(e){this.canvas=e},clear:function(){var e=this;clearInterval(e.animation),e.isFinal=!1,e.passedTime=0;for(var t in e.records)e.records[t].current=0,e.records[t].turn=!1},checkIsGoaled:function(e){return e.current>=Object.keys(e.types).length},checkIsAnimationOver:function(){var e=this,t=0;for(var i in e.records)e.records[i].current>=Object.keys(e.records[i].types).length&&e.getCurrentTime(e.records[i])<=e.passedTime&&++t;return t==Object.keys(e.records).length},getDistance:function(e){for(var t=this,i=t.records[e].types,s=0,o=0,n=0,r=0;n<i.length&&(r+=i[n].time.before,o=t.canvas.element.width/i[n].time.before,t.passedTime>=r);n++){if(s+=o*i[n].time.before,r+=i[n].time.after,o=t.canvas.element.width/i[n].time.after,!(t.passedTime>=r)){s+=o*(r-t.passedTime);break}s+=o*i[n].time.after,r+=o*i[n].time.after}return s>>0},getCurrentSwimmer:function(e){return e.types[e.current]},getRanking:{country:function(e){var t=this,i=[];for(var s in t.records)i.push({key:s,time:t.records[s].goaltime});for(var o=0;o<i.length;o++)for(var n=i.length-1;n>o;n--)if(i[o].time>i[n].time){var r=i[o];i[o]=i[n],i[n]=r}for(var a=0;a<i.length&&i[a].key!=e;a++);return a},type:function(e,t){var i=this,s=[];for(var o in i.records)s.push({key:o,time:i.records[o].types[e].time.sum});for(var n=0;n<s.length;n++)for(var r=s.length-1;r>n;r--)if(s[n].time>s[r].time){var a=s[n];s[n]=s[r],s[r]=a}for(var l=0;l<s.length&&s[l].key!=t;l++);return l}},getCurrentTime:function(e){for(var t=e.types.slice(0,e.current+1),i=0,s=0;s<t.length;s++)i+=t[s].time.sum;return i},getCurrentPassedTime:function(e){var t=this;return t.passedTime-(t.getCurrentTime(e)-t.getCurrentSwimmer(e).time.sum)},convertToMili:function(e){var t=String(e).split("."),i=String(t[0]).split(":");return 1e3*(i.length>1?60*parseInt(i[0])+parseInt(i[1]):parseInt(t[0]))+etTimeForm4,i=1e3,s+1)*i<=e-,milisec:e-s*t-o*i>=100?String(e-s*tbstr(0,2)}},getTimesArrayWithKeyByIndex:function(e).push({key:s,name:o.types[e].name,origin:o.types[e].time.sum,type:o.types[e].type,val:o.types[e].time.sum})}return i},sortWithKeyByIndex(e),s=0;s<i.length;s++)for(var o=i.length-1;o>s;o--)if(i[s].val>i[o].val){var n=i[s];i[s]=i[o],i[o]=n}return i},desc:function(e){for(var t=this,i=t.getTimesArrayWithKeyByIndex(e),s=0;s<i.length;s++)for(var o=i.length-1;o>s;o--)if(i[s].val<i[o].val){var n=i[s];i[s]=i[o],i[o]=n}return i}},sortByGoalTimes:function(){var e=this,t=[];for(var i in e.records)t.push({key:i,val:e.records[i].goaltime});for(var s=0;s<t.length;s++)for(var o=t.length-1;o>s;o--)if(t[s].val>t[o].val){var n=t[s];t[s]=t[o],t[o]=n}return t}},e.TOKYO2020.DATAVISUAL.IMAGES={init:function(){this.setParams()},setParams:function(){this.images={}},setImage:function(e,t){this.images[e]=t},getImage:function(e){return this.images[e]}},e.TOKYO2020.DATAVISUAL.SWIM_MEDLEY=function(e,t,i,s){this.init(e,t,i,s)},e.TOKYO2020.DATAVISUAL.SWIM_MEDLEY.prototype={init:function(e,t,i,s){this.setParams(e,t,i,s),this.bindEvents()},setParams:function(t,i,s,o){var n=this;n.graphNo=o,n.MODULE=JSON.parse(JSON.stringify(e.TOKYO2020.DATAVISUAL.SWIM_RECORDS,function(e,t){return"function"==typeof t?t.toString():t}),function(e,t){return"string"==typeof t&&t.match(/^function/)?Function.call(this,"return "+t)():t}),n.MODULE.init(JSON.parse(JSON.stringify(s)),o);var r=t;r.width=r.parentNode.offsetWidth,r.height=r.parentNode.offsetHeight,n.MODULE.setCanvas({element:r,context:r.getContext("2d")}),n.elem_record=i,n.elem_records=o?{wr:document.getElementsByClassName("datavisual-swimming")[o].querySelector("#worldrecord"),or:document.getElementsByClassName("datavisual-swimming")[o].querySelector("#olympicrecord")}:{wr:document.querySelector("#worldrecord"),or:document.querySelector("#olympicrecord")},n.canvas_flags=t.nextElementSibling,n.context_flags=n.canvas_flags.getContext("2d"),n.canvas_flags.width=n.canvas_flags.parentNode.offsetWidth,n.canvas_flags.height=n.canvas_flags.parentNode.offsetHeight,n.canvas_texts=n.canvas_flags.nextElementSibling,n.context_texts=n.canvas_texts.getContext("2d"),n.canvas_texts.width=n.canvas_texts.parentNode.offsetWidth,n.canvas_texts.height=n.canvas_texts.parentNode.offsetHeight,n.fontFamily=window.getComputedStyle(document.body).fontFamily,n.laptimeText={left:{},right:{}};for(var a in n.MODULE.records)n.laptimeText.left[a]={opacity:0,fadeIn:!0},n.laptimeText.rig,clear:function(){var e=this;e.MODULE.clear.call(e.MODULE);for(var t in e.MODULE.records)e.laptimeText.left[t]={opacity:0,fadeIn:!0},e.laptimeText.right[t]={opacity:0,fadeIn:!0};for(var i in e.MODULE.otherrecords)document.getElementsByClassName("datavisual-swimming")[e.MODULE.graphNo].querySelector(".olympic-2020-datavisual-swimming-canvas-record--"+i).removeAttribute("style");e.laptimes=[],e.halftimes=[]},bindEvents:function(){var e=this,t=!1,i=!1,s=99==e.MODULE.canvas.element.getAttribute("data-current")?e.runAnimationAll:e.runAnimation;window.pageYOffset+.85*window.innerHeight>window.pageYOffset+e.MODULE.canvas.element.getBoundingClientRect().top&&window.pageYOffset+.15*window.innerHeight<window.pageYOffset+e.MODULE.canvas.element.getBoundingClientRect().top+e.MODULE.canvas.element.clientHeight&&(s.call(e),i=!0);var o=!1;window.addEventListener("resize",function(){o||(o=!0,e.resize.call(e),setTimeout(function(){o=!1},60))}),void 0!==window.onorientationchange&&window.addEventListener("orientationchange",function(){setTimeout(function(){e.resize.call(e)},100)}),window.addEventListener("scroll",function(){if(!t){var o=window.pageYOffset+e.MODULE.canvas.element.getBoundingClientRect().top;window.pageYOffset+.95*window.innerHeight>o&&window.pageYOffset+.25*window.innerHeight<o+e.MODULE.canvas.element.clientHeight?(i||s.call(e),i=!0):e.MODULE.animation&&i&&(i=!1,clearInterval(e.MODULE.animation)),setTimeout(function(){t=!1})}t=!0})},resize:function(){var e=this;e.MODULE.canvas.element.width=e.MODULE.canvas.element.parentNode.offsetWidth,e.MODULE.canvas.element.height=e.MODULE.canvas.element.parentNode.offsetHeight,e.canvas_flags.width=e.canvas_flags.parentNode.offsetWidth,e.canvas_flags.height=e.canvas_flags.parentNode.offsetHeight,e.canvas_texts.width=e.canvas_texts.parentNode.offsetWidth,e.canvas_texts.height=e.canvas_texts.parentNode.offsetHeight;var t=e.MODULE.canvas.element.getAttribute("data-current");99!=t?(e.drawStatics.call(e),e.MODULE.passedTime>e.MODULE.sortByTimes.desc.call(e.MODULE,t)[0].origin&&(clearInterval(e.MODULE.animation),e.drawResults.call(e))):e.drawStaticsAll.call(e)},styleNewRecord:function(){var t=this,i=!1;for(var s in t.MODULE.records)t.MODULE.checkIsGoaled.call(t.MODULE,t.MODULE.records[s])&&(i=!0);if(i)for(var o in t.MODULE.otherrecords)t.MODULE.otherrecords[o].goaltime<t.MODULE.passedTime&&(i=!1);i&&(e.TOKYO2020.COMMON.hasClass({target:t.elem_record.parentNode,key:"olympic-2020-datavisual-swimming-record_current--strong"})||(e.TOKYO2020.COMMON.addClass({target:t.elem_record.parentNode,key:"active"}),setTimeout(function(){e.TOKYO2020.COMMON.removeClass({target:t.elem_record.parentNode,key:"active"})},300)),e.TOKYO2020.COMMON.addClass({target:t.elem_record.parentNode,key:"olympic-2020-datavisual-swimming-record_current--strong"}))},draw:function(e){var t=this,i=t.MODULE.canvas.context,s=t.MODULE.canvas.element.width,o=t.MODULE.canvas.element.height,n=o/Object.keys(t.MODULE.records).length,r=t.MODULE.canvas.element.parentNode.lastChild;i.clearRect(0,0,s,o);var a=parseInt(t.MODULE.canvas.element.getAttribute("data-current"));for(var l in t.MODULE.records){var c=t.MODULE.records[l],d=n*Object.keys(t.MODULE.records).indexOf(l),p=c.types[a],u=s/(c.turn?p.time.after:p.time.before),m=t.MODULE.lineColors[c.current];i.beginPath();var h=t.MODULE.getCurrentSwimmer.call(t.MODULE,t.MODULE.records[l]).gender;i.fillStyle="rgba(155,155,155,.1)",i.fillRect(0,d+(n-1),s,1),i.closePath();var f=Object.keys(t.MODULE.records).indexOf(l);if(t.MODULE.passedTime<p.time.sum){if(i.beginPath(),r.getElementsByClassName("lane"+f)[0].style.display="block",r.getElementsByClassName("lane"+f)[1].style.display="block",c.turn){var g=Math.floor(u*(t.MODULE.passedTime-p.time.before)),y=i.createLinearGradient(0,d,g,d);y.addColorStop(0,"rgba("+m+",0)"),y.addColorStop(g/s,"rgba("+m+",0)"),y.addColorStop(1,"rgba("+m+",1)"),i.fillStyle=y,i.fillRect(0,d,g,n-1),r.getElementsByClassName("lane"+f)[0].style.right="unset",r.getElementsByClassName("lane"+f)[1].style.right="unset";var v=function(e){"男"===e?(window.innerWidth<550?r.getElementsByClassName("lane"+f)[0].style.left="calc(-15% + "+g+"px)":r.getElementsByClassName("lane"+f)[0].style.left=g-75+"px",r.getElementsByClassName("lane"+f)[0].style.top=d+3+"px",r.getElementsByClassName("lane"+f)[0].style.transform="scale(2, 2)",r.getElementsByClassName("lane"+f)[1].style.display="none"):(window.innerWidth<550?r.getElementsByClassName("lane"+f)[1].style.left="calc(-15% + "+g+"px)":r.getElementsByClassName("lane"+f)[1].style.left=g-75+"px",r.getElementsByClassName("lane"+f)[1].style.top=d+3+"px",r.getElementsByClassName("lane"+f)[1].style.transform="scale(2, 2)",r.getElementsByClassName("lane"+f)[0].style.display="none")};"0"===c.current?v(h):"1"===c.current?v(h):"2"===c.current?v(h):"3"===c.current&&v(h)}else{var g=-1*Math.floor(u*t.MODULE.passedTime),y=i.createLinearGradient(s+g,d,s,d);y.addColorStop(0,"rgba("+m+",1)"),y.addColorStop(1+g/s-(1+g/s)/100,"rgba("+m+",0)"),y.addColorStop(1,"rgba("+m+",0)"),i.fillStyle=y,i.fillRect(s,d,g,n-1);var v=function(e){"男"===e?(window.innerWidth<550?r.getElementsByClassName("lane"+f)[0].style.right="calc(-15% + "+-g+"px)":r.getElementsByClassName("lane"+f)[0].style.right=-g-75+"px",r.getElementsByClassName("lane"+f)[0].style.top=d+3+"px",r.getElementsByClassName("lane"+f)[0].style.transform="scale(-2, 2)",r.getElementsByClassName("lane"+f)[1].style.display="none"):(window.innerWidth<550?r.getElementsByClassName("lane"+f)[1].style.right="calc(-15% + "+-g+"px)":r.getElementsByClassName("lane"+f)[1].style.right=-g-75+"px",r.getElementsByClassName("lane"+f)[1].style.top=d+3+"px",r.getElementsByClassName("lane"+f)[1].style.transform="scale(-2, 2)",r.getElementsByClassName("lane"+f)[0].style.display="none")};"0"===c.current?v(h):"1"===c.current?v(h):"2"===c.current?v(h):"3"===c.current&&v(h)}i.closePath()}else r.getElementsByClassName("lane"+f)[0].style.display="none",r.getElementsByClassName("lane"+f)[1].style.display="none"}},drawAll:function(e){var t=this,i=t.MODULE.canvas.context,s=t.MODULE.canvas.element.width,o=t.MODULE.canvas.element.height,n=o/Object.keys(t.MODULE.records).length,r=t.MODULE.canvas.element.parentNode.lastChild;i.clearRect(0,0,s,o);for(var a in t.MODULE.records){var l=t.MODULE.records[a],c=n*Object.keys(t.MODULE.records).indexOf(a),d=Object.keys(t.MODULE.records).indexOf(a);if(i.beginPath(),i.fillStyle="rgba(155,155,155,.1)",i.fillRect(0,c+(n-1),s,1),i.closePath(),l.current<Object.keys(l.types).length){var p=t.MODULE.getCurrentSwimmer.call(t.MODULE,l),u=t.MODULE.canvas.element.width/(l.turn?p.time.after:p.time.before),m=t.MODULE.lineColors[l.current];i.beginPath();var h=t.MODULE.getCurrentSwimmer.call(t.MODULE,t.MODULE.records[a]).gender;if(r.getElementsByClassName("lane"+d)[2*l.current].style.display="block",r.getElementsByClassName("lane"+d)[2*l.current+1].style.display="block",l.turn){t.MODULE.isFinal||l.current!=Object.keys(l.types).length-1||(t.MODULE.isFinal=!0);var f=Math.floor(u*(t.MODULE.getCurrentPassedTime.call(t.MODULE,l)-p.time.before)),g=i.createLinearGradient(0,c,f,c);g.addColorStop(0,"rgba("+m+",0)"),g.addColorStop(Math.floor(f/s*100)/100,"rgba("+m+",0)"),g.addColorStop(1,"rgba("+m+",1)"),i.fillStyle=g,i.fillRect(0,c,f,n-1),r.getElementsByClassName("lane"+d)[2*l.current].style.right="unset",r.getElementsByClassName("lane"+d)[2*l.current+1].style.right="unset";var y=function(e,t){"男"===e?(window.innerWidth<550?r.getElementsByClassName("lane"+d)[2*l.current].style.left="calc(-15% + "+f+"px)":r.getElementsByClassName("lane"+d)[2*l.current].style.left=f-75+"px",r.getElementsByClassName("lane"+d)[2*l.current].style.top=c+3+"px",r.getElementsByClassName("lane"+d)[2*l.current].style.transform="scale(2, 2)",r.getElementsByClassName("lane"+d)[2*l.current+1].style.display="none"):(window.innerWidth<550?r.getElementsByClassName("lane"+d)[2*l.current+1].style.left="calc(-15% + "+f+"px)":r.getElementsByClassName("lane"+d)[2*l.current+1].style.left=f-75+"px",r.getElementsByClassName("lane"+d)[2*l.current+1].style.top=c+3+"px",r.getElementsByClassName("lane"+d)[2*l.current+1].style.transform="scale(2, 2)",r.getElementsByClassName("lane"+d)[2*l.current].style.display="none")};0===l.current?y(h,0):1===l.current?y(h,8):2===l.current?y(h,16):3===l.current&&y(h,24)}else{var f=-1*Math.floor(u*t.MODULE.getCurrentPassedTime.call(t.MODULE,l)),g=i.createLinearGradient(s+f,c,s,c);g.addColorStop(0,"rgba("+m+",1)"),g.addColorStop(1+f/s-(1+f/s)/100,"rgba("+m+",0)"),g.addColorStop(1,"rgba("+m+",0)"),i.fillStyle=g,i.fillRect(s,c,f,n-1);r.getElementsByClassName("lane"+d)[2*l.current].style.left="unset",r.getElementsByClassName("lane"+d)[2*l.current+1].style.left="unset";var y=function(e,t){"男"===e?(window.innerWidth<550?r.getElementsByClassName("lane"+d)[2*l.current].style.right="calc(-15% + "+-f+"px)":r.getElementsByClassName("lane"+d)[2*l.current].style.right=-f-75+"px",r.getElementsByClassName("lane"+d)[2*l.current].style.top=c+3+"px",r.getElementsByClassName("lane"+d)[2*l.current].style.transform="scale(-2, 2)",r.getElementsByClassName("lane"+d)[2*l.current+1].style.display="none"):(window.innerWidth<550?r.getElementsByClassName("lane"+d)[2*l.current+1].style.right="calc(-15% + "+-f+"px)":r.getElementsByClassName("lane"+d)[2*l.current+1].style.right=-f-75+"px",r.getElementsByClassName("lane"+d)[2*l.current+1].style.top=c+3+"px",r.getElementsByClassName("lane"+d)[2*l.current+1].style.transform="scale(-2, 2)",r.getElementsByClassName("lane"+d)[2*l.current].style.display="none")};0===l.current?y(h,0):1===l.current?(r.getElementsByClassName("lane"+d)[2*l.current-1].style.display="none",r.getElementsByClassName("lane"+d)[2*l.current-1-1].style.display="none",y(h,8)):2===l.current?(r.getElementsByClassName("lane"+d)[2*l.current-1].style.display="none",r.getElementsByClassName("lane"+d)[2*l.current-1-1].style.display="none",y(h,16)):3===l.current&&(r.getElementsByClassName("lane"+d)[2*l.current-1].style.display="none",r.getElementsByClassName("lane"+d)[2*l.current-1-1].style.display="none",y(h,24))}i.closePath()}else r.getElementsByClassName("lane"+d)[2*l.current-1-1].style.display="none",r.getElementsByClassName("lane"+d)[2*l.current-1].style.display="none"}if(t.MODULE.isFinal){for(var a in t.MODULE.otherrecords){var v=t.MODULE.otherrecords[a],O=v.types[v.types.length-1],u=t.MODULE.canvas.element.width/(O.time/2),w=t.MODULE.passedTime-(v.goaltime-O.time/2);if(w<0){document.getElementsByClassName("datavisual-swimming")[t.MODULE.graphNo].querySelector(".olympic-2020-datavisual-swimming-canvas-record--"+a).removeAttribute("style");break}var T=Math.floor(u*w);T<=t.MODULE.canvas.element.width?document.getElementsByClassName("datavisual-swimming")[t.MODULE.graphNo].querySelector(".olympic-2020-datavisual-swimming-canvas-record--"+a).setAttribute("style","display:block; left:"+T+"px"):document.getElementsByClassName("datavisual-swimming")[t.MODULE.graphNo].querySelector(".olympic-2020-datavisual-swimming-canvas-record--"+a).removeAttribute("style"),i.beginPath(),i.lineWidth=5,i.strokeStyle="rgb("+v.color+")",i.moveTo(T,0),i.lineTo(T,o),i.stroke(),i.closePath()}t.othertime+=t.MODULE.addtime}},drawStatics:function(){var t=this,i=t.context_flags,s=t.canvas_flags.width,o=t.canvas_flags.height,n=o/Object.keys(t.MODULE.records).length;i.clearRect(0,0,s,o);for(var r in t.MODULE.records){var a=e.TOKYO2020.DATAVISUAL.IMAGES.getImage(r).width*(n/3/e.TOKYO2020.DATAVISUAL.IMAGES.getImage(r).height),l=n/3;i.beginPath(),i.drawImage(e.TOKYO2020.DATAVISUAL.IMAGES.getImage(r),s-a,n*Object.keys(t.MODULE.records).indexOf(r)+l,a,l);var c=t.MODULE.getCurrentSwimmer.call(t.MODULE,t.MODULE.records[r]),d=n*Object.keys(t.MODULE.records).indexOf(r);i.closePath();var p=n/4>>0;i.beginPath(),i.fillStyle="rgb(155,155,155)",i.textAlign="right",i.textBaseline="top",i.font=p+"px "+t.fontFamily.replace(/"/g,""),i.fillText(c.name,s-(a+10),d+(n-p)/2),i.closePath()}},drawStaticsAll:function(){var t=this,i=t.context_flags,s=t.canvas_flags.width,o=t.canvas_flags.height,n=o/Object.keys(t.MODULE.records).length;i.clearRect(0,0,s,o);var r=0;for(var a in t.MODULE.records){var l=t.MODULE.records[a],c=e.TOKYO2020.DATAVISUAL.IMAGES.getImage(a),d=c.width*(n/3/c.height),p=n/3;i.beginPath(),i.drawImage(c,s-d,n*Object.keys(t.MODULE.records).indexOf(a)+p,d,p);var u=l.current<Object.keys(l.types).length?t.MODULE.getCurrentSwimmer.call(t.MODULE,l):l.types[l.current-1],m=n*Object.keys(t.MODULE.records).indexOf(a);i.closePath();var h=n/4>>0;i.beginPath(),i.fillStyle="rgb(155,155,155)",i.textAlign="right",i.textBaseline="top",i.font=h+"px "+t.fontFamily.replace(/"/g,""),i.fillText(u.name,s-(d+10),m+(n-h)/2),i.closePath(),r=Object.keys(l.types).length-1}if(t.laptimes[r]&&Object.keys(t.laptimes[r].records).length>0)for(var f=Object.keys(t.laptimes[r].records),g=0,y=f.length>2?2:f.length-1;g<=y;g++){var v=n-2,O=n*Object.keys(t.MODULE.records).indexOf(f[g]),w="result_"+g,T=e.TOKYO2020.DATAVISUAL.IMAGES.getImage(w),k=T.width*(v/T.height)>>0;i.beginPath(),i.drawImage(T,s-k,O+((n-v)/2>>0),k,v),i.closePath();var b=e.TOKYO2020.DATAVISUAL.IMAGES.getImage(f[g]),C=b.width*(v/b.height)>>0;i.beginPath(),i.drawImage(b,s-.29*k-C>>0,O+((n-v)/2>>0),C,v),i.closePath(),i.beginPath(),i.fillStyle="rgb(255,255,255)",i.textAlign="right",i.textBaseline="top",i.font=n/2.5+"px "+t.fontFamily.replace(/"/g,""),i.fillText(f[g].toUpperCase(),s-.14*k>>0,O+(n-n/2.5)/2>>0),i.closePath(),i.beginPath(),i.fillStyle="rgb(255,255,255)",i.textAlign="right",i.textBaseline="top",i.font=n/2.2+"px "+t.fontFamily.replace(/"/g,""),i.fillText("JPN"==f[g].toUpperCase()?t.MODULE.records[f[g]].types[r].name:t.MODULE.records[f[g]].types[r].name.split(/・|･/)[1],s-.51*k>>0,O+(n-n/2.2)/2>>0),i.closePath()}},drawTexts:function(){var e=this,t=e.context_texts,i=e.canvas_flags.width,s=e.canvas_flags.height;t.clearRect(0,0,i,s)},drawLapTime:function(t,i,s,o){var n=this,r=n.context_texts,a=n.canvas_flags.width,l=n.canvas_flags.height,c=l/Object.keys(n.MODULE.records).length,d=c*Object.keys(n.MODULE.records).indexOf(t),p=(e.TOKYO2020.COMMON.breakPoint<window.innerWidth?c/2:c/4)>>0;r.beginPath(),r.fillStyle=s,r.textAlign=e.TOKYO2020.COMMON.breakPoint<window.innerWidth?"center":"left",r.textBaseline="top",r.font=(o?" bold ":"")+p+"px "+n.fontFamily.replace(/"/g,""),r.fillText(i,e.TOKYO2020.COMMON.breakPoint<window.innerWidth?a/2:20,d+(c-p)/2),r.closePath()},drawLapTimeAll:{lap:function(e,t,i,s){var o=this;if(i==e.top)s.call(o,i,"Leader","rgba(254,13,13,"+t[i].opacity+")",!0);else if(e.records[i]){var n=o.MODULE.getTimeFormat(e.records[i]-e.records[e.top]);s.call(o,i,"+"+n.seconds+":"+n.milisec,"rgba(0,0,0,"+t[i].opacity+")",!0)}},left:function(e,t,i,s){var o=this,n=o.context_texts,r=(o.canvas_flags.width,o.canvas_flags.height),a=r/Object.keys(o.MODULE.records).length,l=a*Object.keys(o.MODULE.records).indexOf(e),c=a/5>>0;n.beginPath(),n.fillStyle=i,n.textAlign="left",n.textBaseline="bottom",n.font=(s?" bold ":"")+c+"px "+o.fontFamily.replace(/"/g,""),n.fillText(t,0,l+a-3),n.closePath()},right:function(e,t,i,s){var o=this,n=o.context_texts,r=o.canvas_flags.width,a=o.canvas_flags.height,l=a/Object.keys(o.MODULE.records).length,c=l*Object.keys(o.MODULE.records).indexOf(e),d=l/5>>0;n.beginPath(),n.fillStyle=i,n.textAlign="right",n.textBaseline="bottom",n.font=(s?" bold ":"")+d+"px "+o.fontFamily.replace(/"/g,""),n.fillText(t,r,c+l-3),n.closePath()},fade:function(e,t,i,s){var o=this;if(i.fadein||(i.fadein={}),!i.fadein||!i.fadein[t])var n=setInterval(function(){if(i.fadein[t]=!0,e[t].opacity<1)e[t].opacity+=.02,e[t].opacity=Math.floor(100*e[t].opacity)/100;else if(clearInterval(n),s)var r=setInterval(function(){var t=0;for(var i in o.MODULE.records)e[i].opacity>0?e[i].opacity-=.02:++t==Object.keys(o.MODULE.records).length-1&&clearInterval(r)},10)},10)}},drawLapTimeLine:function(e){var t=this,i=t.context_flags,s=t.canvas_flags.width,o=t.canvas_flags.height,n=o/Object.keys(t.MODULE.records).length,r=n*Object.keys(t.MODULE.records).indexOf(e);i.beginPath(),i.fillStyle="rgba(215,80,1,.1)",i.fillRect(s,r,s*(t.laptimeText.left[e].opacity>1?1:t.laptimeText.left[e].opacity)*-1,n-1),i.closePath()},drawResults:function(){var e=this,t=setInterval(function(){e.drawStatics(),e.drawTexts();var i=0;for(var s in e.MODULE.records){var o=e.MODULE.records[s],n=e.MODULE.getRanking.type.call(e.MODULE,o.current,s);if(0==n)e.drawLapTimeLine(s),e.drawLapTime(s,"区間トップ","rgba(254,13,13,"+e.laptimeText.left[s].opacity+")",!0);else{var r=e.MODULE.sortByTimes.asc.call(e.MODULE,o.current)[0],a=e.MODULE.getCurrentSwimmer.call(e.MODULE,o).time.sum-e.MODULE.records[r.key].types[o.current].time.sum,l=e.MODULE.getTimeFormat(a);e.drawLapTime(s,"+"+("0"+l.seconds).substr(-2)+":"+l.milisec,"rgba(0,0,0,"+(10*e.laptimeText.left[s].opacity>>0)/10+")",n<3)}e.laptimeText.left[s].opacity<1?e.laptimeText.left[s].opacity+=.02:i++}i==Object.keys(e.MODULE.records).length&&clearInterval(t)},10)},runAnimationAll:function(t){var i=this;for(var s in i.MODULE.otherrecords){var o=i.MODULE.getTimeFormat(i.MODULE.otherrecords[s].goaltime);i.elem_records[s].innerHTML="<span>"+("0"+o.minutes).substr(-2)+"</span> : <span>"+("0"+o.seconds).substr(-2)+"</span> : <span>"+o.milisec+"</span>"}i.MODULE.animation||(i.drawStaticsAll(),i.drawTexts()),setTimeout(function(){"freestyle"===i.MODULE.swimgenre?e.TOKYO2020.COMMON.addClass({target:document.getElementsByClassName("datavisual-swimming")[i.MODULE.graphNo].querySelector(".olympic-2020-datavisual-swimming-title_bg_3"),key:"active"}):e.TOKYO2020.COMMON.addClass({target:document.getElementsByClassName("datavisual-swimming")[i.MODULE.graphNo].querySelector(".olympic-2020-datavisual-swimming-title_bg_0"),key:"active"})},100);var n=(i.MODULE.canvas.element.previousElementSibling,0);setTimeout(function(){i.MODULE.animation=setInterval(function(){i.MODULE.passedTime+=i.MODULE.addtime,setTimeout(function(){++n,i.drawAll.call(i,n)}),setTimeout(function(){var e=i.MODULE.getTimeFormat(i.MODULE.passedTime>i.MODULE.winner.time?i.MODULE.winner.time:i.MODULE.passedTime);i.elem_record.innerHTML="<span>"+("0"+e.minutes).substr(-2)+"</span> : <span>"+("0"+e.seconds).substr(-2)+"</span> : <span>"+e.milisec+"</span>",i.styleNewRecord()}),i.drawStaticsAll(),i.drawTexts();for(var t in i.MODULE.records){var s=i.MODULE.records[t];if(i.MODULE.checkIsGoaled.call(i.MODULE,s)){if(0==i.MODULE.getRanking.country.call(i.MODULE,t))i.drawLapTimeAll.left.call(i,t,"Leader","rgba(254,13,13,"+i.laptimeText.left[t].opacity+")",!0),i.drawLapTimeAll.right.call(i,t,"Leader","rgba(254,13,13,"+i.laptimeText.right[t].opacity+")",!0);else{var o=i.MODULE.sortByGoalTimes.call(i.MODULE)[0],r=i.MODULE.getTimeFormat(s.goaltime-o.val);i.drawLapTimeAll.left.call(i,t,"+"+r.seconds+":"+r.milisec,"rgba(0,0,0,"+i.laptimeText.left[t].opacity+")",!0),i.drawLapTimeAll.right.call(i,t,"+"+r.seconds+":"+r.milisec,"rgba(0,0,0,"+i.laptimeText.right[t].opacity+")",!0)}}else i.halftimes[s.current]&&i.drawLapTimeAll.lap.call(i,i.halftimes[s.current],i.laptimeText.left,t,i.drawLapTimeAll.left),i.laptimes[s.current-1]&&i.drawLapTimeAll.lap.call(i,i.laptimes[s.current-1],i.laptimeText.right,t,i.drawLapTimeAll.right)}for(var t in i.MODULE.records){var s=i.MODULE.records[t];i.MODULE.getDistance.call(i.MODULE,t);if(i.laptimes[s.current]||(i.laptimes[s.current]={records:[]}),i.halftimes[s.current]||(i.halftimes[s.current]={records:[]}),i.MODULE.passedTime>=i.MODULE.getCurrentTime.call(i.MODULE,s)&&Object.keys(i.laptimes[s.current].records).length<=Object.keys(i.MODULE.records).length&&-1==Object.keys(i.laptimes[s.current].records).indexOf(t)?(0==Object.keys(i.laptimes[s.current].records).length&&(i.laptimes[s.current].top=t),i.laptimes[s.current].records[t]=i.MODULE.passedTime,s.current<Object.keys(s.types).length-1&&i.drawLapTimeAll.fade.call(i,i.laptimeText.right,t,i.laptimes[s.current],Object.keys(i.laptimes[s.current].records).length==Object.keys(i.MODULE.records).length)):s.current<Object.keys(s.types).length&&i.MODULE.passedTime>=i.MODULE.getCurrentTime.call(i.MODULE,s)-s.types[s.current].time.after&&Object.keys(i.halftimes[s.current].records).length<=Object.keys(i.MODULE.records).length&&-1==Object.keys(i.halftimes[s.current].records).indexOf(t)&&(0==Object.keys(i.halftimes[s.current].records).length&&(i.halftimes[s.current].top=t),i.halftimes[s.current].records[t]=i.MODULE.passedTime,i.drawLapTimeAll.fade.call(i,i.laptimeText.left,t,i.halftimes[s.current],Object.keys(i.halftimes[s.current].records).length==Object.keys(i.MODULE.records).length)),!i.MODULE.checkIsGoaled.call(i.MODULE,s)&&i.MODULE.getCurrentPassedTime.call(i.MODULE,s)>=i.MODULE.getCurrentSwimmer.call(i.MODULE,s).time.before&&(s.turn=!0),!i.MODULE.checkIsGoaled.call(i.MODULE,s)&&i.MODULE.getCurrentTime(s)<=i.MODULE.passedTime&&(s.turn=!1,++s.current,"freestyle"!==i.MODULE.swimgenre&&s.current<s.types.length)){i.drawStatics();var a=(document.getElementsByClassName("datavisual-swimming")[i.MODULE.graphNo].querySelector(".olympic-2020-datavisual-swimming-title"),document.getElementsByClassName("datavisual-swimming")[i.MODULE.graphNo].querySelector(".olympic-2020-datavisual-swimming-title_bg_"+s.current)),l=document.getElementsByClassName("datavisual-swimming")[i.MODULE.graphNo].querySelector(".olympic-2020-datavisual-swimming-title_bg_"+(s.current-1));e.TOKYO2020.COMMON.hasClass({target:a,key:"current"})||(e.TOKYO2020.COMMON.addClass({target:a,key:"current"}),setTimeout(function(){e.TOKYO2020.COMMON.addClass({target:a,key:"active"})},1e3),e.TOKYO2020.COMMON.addClass({target:l,key:"over"}),e.TOKYO2020.COMMON.removeClass({target:l,key:"current"}),e.TOKYO2020.COMMON.removeClass({target:l,key:"active"}),s.current>=2&&e.TOKYO2020.COMMON.removeClass({target:document.getElementsByClassName("datavisual-swimming")[i.MODULE.graphNo].querySelector(".olympic-2020-datavisual-swimming-title_bg_"+(s.current-2)),key:"over"}))}}i.MODULE.checkIsAnimationOver.call(i.MODULE)&&(clearInterval(i.MODULE.animation),i.MODULE.animation=null)},i.MODULE.loopperiod)},500)},runAnimation:function(){var e=this,t=0,i=e.MODULE.canvas.element.getAttribute("data-current");for(var s in e.MODULE.records)e.MODULE.records[s].current=i;e.drawStatics(),e.drawTexts(),e.MODULE.animation=setInterval(function(){e.MODULE.passedTime+=e.MODULE.addtime,setTimeout(function(){var t=e.MODULE.getTimeFormat(e.MODULE.passedTime>e.MODULE.sortByTimes.asc.call(e.MODULE,i)[0].origin?e.MODULE.sortByTimes.asc.call(e.MODULE,i)[0].origin:e.MODULE.passedTime);e.elem_record.innerHTML="<span>"+("0"+t.minutes).substr(-2)+"</span> : <span>"+("0"+t.seconds).substr(-2)+"</span> : <span>"+t.milisec+"</span>"}),setTimeout(function(){++t,e.draw.call(e,t)}),e.drawStatics(),e.drawTexts();for(var s in e.MODULE.records){var o=e.MODULE.records[s];Math.floor(e.MODULE.canvas.element.width/o.types[i].time.before*e.MODULE.passedTime)>e.MODULE.canvas.element.width&&(o.turn=!0)}e.MODULE.passedTime>e.MODULE.sortByTimes.desc.call(e.MODULE,i)[0].origin&&(clearInterval(e.MODULE.animation),e.drawResults.call(e))},e.MODULE.loopperiod)}}}("undefined"==typeof YOL?{}:YOL)}},[367]);