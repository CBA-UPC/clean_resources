!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("RcsVideoManager",[],t):"object"==typeof exports?exports.RcsVideoManager=t():e.RcsVideoManager=t()}(self,(function(){return(()=>{var e,t,i={3084:e=>{e.exports={months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"]}},6058:(e,t,i)=>{const o=i(3084),r={build:{corriere:{entryPublicPath:"https://components2.corriereobjects.it"},gazzetta:{entryPublicPath:"https://components2.gazzettaobjects.it"}},environment:"production",gazzanet:{endpointPlaylitGzn:"https://searchservice.gazzanet.it/api/##gznPartnerId##/latestVideos"},gazzetta:{layoutCommonPath:"https://components2.gazzettaobjects.it/rcs_gaz_gazzetta-layout/v2/gazzetta-common",api:{playlist:(e,t=10)=>`https://searchapiservice.gazzetta.it/api/video/playlist?solrSection=${e}&limit=${t}`}},linkUrlParamListener:{enabled:!0,params:["app_v2","app_name"]}};Object.assign(r,o),e.exports=r},2914:(e,t,i)=>{(e.exports=i(9252)(!1)).push([e.id,'.correlated-overlay{position:absolute;padding:5% 15%;width:100%;height:100%;z-index:1;background-color:rgba(0,0,0,.8);display:flex;flex-direction:column}.correlated-overlay .row{display:flex}.correlated-overlay .row .item{text-decoration:none;flex-basis:50%;position:relative;margin-bottom:1%}.correlated-overlay .row .item:last-child{padding-left:1%}.correlated-overlay .row .item:hover{text-decoration:none}.correlated-overlay .row .item img{width:100%;height:100%}.correlated-overlay .row .item .title-overlay{position:absolute;bottom:0;width:100%;color:#fff;background-color:rgba(0,0,0,.6);font-size:14px;font-family:"Roboto",sans-serif;padding:5px 10px;line-height:24px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.correlated-overlay .row .item .title-overlay:hover{background-color:#ff8400;color:#fff !important}.correlated-overlay .overlay-logo{position:absolute;right:3%;top:3%}.correlated-overlay .overlay-logo img{width:110px}',""])},9964:(e,t,i)=>{(e.exports=i(9252)(!1)).push([e.id,'@font-face{font-family:"iconfont";src:url("https://video.corriere.it/includes2013/LIBS/css/fonts/icons/corriereicon.eot?v=201703101016");src:url("https://video.corriere.it/includes2013/LIBS/css/fonts/icons/corriereicon.eot#iefix&") format("embedded-opentype"),url("https://video.corriere.it/includes2013/LIBS/css/fonts/icons/corriereicon.woff?v=201703101016") format("woff"),url("https://video.corriere.it/includes2013/LIBS/css/fonts/icons/corriereicon.ttf?v=201703101016") format("truetype"),url("https://video.corriere.it/includes2013/LIBS/css/fonts/icons/corriereicon.svg?v=201703101016#iconfont") format("svg");font-weight:normal;font-style:normal}.rcs-external-player .fallback-novideo{position:absolute;z-index:0;top:0;width:100%;height:100%;background-size:contain;background-color:#000;font-size:30px;max-width:100%}.rcs-external-player .fallback-novideo.is--mobile{font-size:16px}.rcs-external-player .fallback-novideo .msg{position:absolute;background:#000;text-align:center;color:#fff;top:42%;left:0;width:100%}.rcs-external-player .player{position:relative;height:100%;width:100%}.rcs-external-player i,.rcs-external-player figure{margin:0;padding:0;border:0;font:inherit;font-size:100%;vertical-align:baseline}.rcs-external-player .has-text-white{color:#fff}.rcs-external-player .icon{position:relative;align-items:center;display:inline-flex;justify-content:center;height:auto;width:auto}@media only screen and (max-width: 740px){.rcs-external-player .icon{position:relative;display:inline-flex;justify-content:center;align-items:center;width:auto;height:auto}}.rcs-external-player .image{display:block;position:relative;overflow:hidden}.rcs-external-player .image.is-16by9{padding-top:56.25%}.rcs-external-player .image img{display:block;position:absolute;top:0;left:0;min-width:100%;min-height:100%;width:100%;height:auto}.rcs-external-player .media-image .icon{position:absolute;z-index:10;top:50%;left:50%;transform:translate(-50%, -50%)}@media only screen and (max-width: 600px){.rcs-external-player .media-image .icon .icon-corriere-play{width:50px;height:50px;background:url("//images2.corriereobjects.it/includes2013/LIBS/css/assets/video/play_icon_50.png?v=201703101017") no-repeat;background-size:cover}}@media only screen and (min-width: 601px){.rcs-external-player .media-image .icon .icon-corriere-play:before{font-family:"iconfont";font-size:80px;content:"\\F104"}}',""])},4753:(e,t,i)=>{(e.exports=i(9252)(!1)).push([e.id,".fallback-novideo{position:absolute;z-index:0;top:0;width:100%;height:100%;background-size:contain;background-color:#000;font-size:30px;max-width:100%}.fallback-novideo.is--mobile{font-size:16px}.fallback-novideo .msg{position:absolute;background:#000;text-align:center;color:#fff;top:42%;left:0;width:100%}",""])},6673:(e,t,i)=>{(e.exports=i(9252)(!1)).push([e.id,".not-available{position:absolute;width:100%;height:100%;top:0;left:0;z-index:10;opacity:.8}.not-available a{text-decoration:none}.not-available .not-available__content{display:flex;height:100%;flex-direction:column;justify-content:center;align-items:center;background-color:#000;line-height:140%;padding:0 10px}.not-available .not-available__title{color:#fff;font-size:20px;text-transform:uppercase;margin-bottom:5px;text-align:center}.not-available .not-available__subtitle{color:#fff;font-size:15px;font-weight:normal;text-align:center;margin:0}.not-available .not-available__errorcode{color:#fff;font-size:13px;opacity:.5;text-align:center;margin:0}",""])},7369:(e,t,i)=>{(e.exports=i(9252)(!1)).push([e.id,'.bck-media-video,.bck-media-news{position:relative}.bck-media-video .video__content,.bck-media-news .video__content{position:relative}.bck-media-video .is--vertical .video__content,.bck-media-news .is--vertical .video__content{background-color:#3d3d3d}.bck-media-video .is--vertical figure,.bck-media-news .is--vertical figure{margin:auto}.bck-media-video .timebar,.bck-media-news .timebar{background-color:#000;padding:.53125rem 0 .40625rem .9375rem}.bck-media-video .timebar span,.bck-media-news .timebar span{font-family:"Roboto",sans-serif;font-size:.875rem;font-weight:700;color:#f07821}.bck-media-video .video__footer,.bck-media-news .video__footer{font-family:"Roboto",sans-serif;font-size:.875rem;font-weight:400;color:#fff;position:absolute;bottom:-55px;left:0}.bck-media-video .overlay-next-video,.bck-media-news .overlay-next-video{width:100%;height:100%;position:absolute;padding:56px 92px;top:0;box-shadow:0 2px 4px 0 rgba(0,0,0,.5);background-color:rgba(0,0,0,.6)}.bck-media-video .overlay-next-video .next-header>:not(:last-child):not(.icon),.bck-media-news .overlay-next-video .next-header>:not(:last-child):not(.icon){margin-right:70px}.bck-media-video .overlay-next-video .next-header .number,.bck-media-news .overlay-next-video .next-header .number{font-family:"Roboto Condensed",sans-serif;font-size:2.25rem;line-height:1.5;font-weight:700;width:65px;height:65px;border-radius:50%;background-color:#000;text-align:center;border:5px #f07821 solid}.bck-media-video .overlay-next-video .next-header .text,.bck-media-news .overlay-next-video .next-header .text{font-family:"Roboto",sans-serif;font-size:1.0625rem;font-weight:500}.bck-media-video .overlay-next-video .next-center,.bck-media-news .overlay-next-video .next-center{width:100%}.bck-media-video .overlay-next-video .next-center .text,.bck-media-news .overlay-next-video .next-center .text{font-family:"Roboto Condensed",sans-serif;font-size:1rem;font-weight:400;text-align:center;position:relative}.bck-media-video .overlay-next-video .next-center .text:after,.bck-media-news .overlay-next-video .next-center .text:after{content:"";position:absolute;height:1px;width:160px;border-bottom:solid 1px #afafaf;bottom:6px;right:-7px}.bck-media-video .overlay-next-video .next-center .text:before,.bck-media-news .overlay-next-video .next-center .text:before{content:"";position:absolute;height:1px;width:160px;border-bottom:solid 1px #afafaf;bottom:6px;left:-7px}.bck-media-video .overlay-next-video .next-footer .image,.bck-media-news .overlay-next-video .next-footer .image{width:160px;height:90px;margin-right:25px}.bck-media-video .overlay-next-video .next-footer .title,.bck-media-news .overlay-next-video .next-footer .title{font-family:"Roboto Condensed",sans-serif;font-size:1.125rem;font-weight:700;max-width:250px}.bck-media-video .is--player-embed .overlay-next-video,.bck-media-news .is--player-embed .overlay-next-video{padding:13% 92px}.bck-media-video .next-video,.bck-media-news .next-video{position:absolute;width:362px;height:92px;background-color:rgba(0,0,0,.8);border:solid 1px #979797;right:18px;bottom:60px}@media screen and (min-width: 1024px)and (max-width: 1439px){.bck-media-video .next-video,.bck-media-news .next-video{width:374px;bottom:60px}}.bck-media-video .next-video .image,.bck-media-news .next-video .image{height:90px;width:160px;flex-shrink:0;margin-right:10px}.bck-media-video .next-video .next-text,.bck-media-news .next-video .next-text{height:100%}.bck-media-video .next-video .next-text .title,.bck-media-news .next-video .next-text .title{font-family:"Roboto Condensed",sans-serif;font-size:14px;font-weight:700}.bck-media-video .next-video .next-text .text,.bck-media-news .next-video .next-text .text{font-family:"Roboto Condensed",sans-serif;font-size:14px;font-weight:400}.bck-media-video .vjs-fullscreen .overlay-next-video,.bck-media-news .vjs-fullscreen .overlay-next-video{width:650px;height:400px;padding:25px;top:50%;left:50%;transform:translate(-50%, -50%);cursor:pointer}.bck-media-video .vjs-fullscreen .overlay-next-video .next-header>:not(:last-child):not(.icon),.bck-media-news .vjs-fullscreen .overlay-next-video .next-header>:not(:last-child):not(.icon){margin-right:100px !important}.bck-media-video .vjs-fullscreen .overlay-next-video .next-center .text,.bck-media-news .vjs-fullscreen .overlay-next-video .next-center .text{font-size:17px !important}.bck-media-video .vjs-fullscreen .overlay-next-video .next-footer .image,.bck-media-news .vjs-fullscreen .overlay-next-video .next-footer .image{width:345px !important;height:195px !important;margin-right:20px}.bck-media-video .vjs-fullscreen .overlay-next-video .next-footer .title,.bck-media-news .vjs-fullscreen .overlay-next-video .next-footer .title{max-width:40% !important;font-family:"Roboto Condensed",sans-serif;font-size:17px !important;font-weight:700}.bck-media-news .media-left .overlay-next-video{padding:10px 22px}.bck-media-news .media-left .overlay-next-video .next-header .icon{position:relative;transform:none;top:auto;right:auto}.bck-media-news .media-left .overlay-next-video .next-center .text{font-size:14px}.bck-media-news .media-left .overlay-next-video .next-center .text:after,.bck-media-news .media-left .overlay-next-video .next-center .text:before{content:"";position:absolute;height:1px;width:90px;border-bottom:solid 1px #afafaf;bottom:7px;right:-7px}@media screen and (min-width: 1024px)and (max-width: 1439px){.bck-media-news .media-left .overlay-next-video .next-center .text:after,.bck-media-news .media-left .overlay-next-video .next-center .text:before{width:70px}}.bck-media-news .media-left .overlay-next-video .next-footer .image{width:136px;height:76px;margin-right:20px}.bck-media-news .media-left .overlay-next-video .next-footer .title{max-width:45%;font-family:"Roboto Condensed",sans-serif;font-size:14px;font-weight:700}@media screen and (min-width: 1024px)and (max-width: 1439px){.bck-media-news .media-left .overlay-next-video .next-footer .title{font-size:14px}}.bck-media-news .media-left .overlay-next-video .next-footer .text{font-family:"Roboto Condensed",sans-serif;font-size:14px;font-weight:400}',""])},3358:(e,t,i)=>{(e.exports=i(9252)(!1)).push([e.id,'.bck-media-video,.bck-media-news{position:relative}.bck-media-video .video__content,.bck-media-news .video__content{position:relative;margin:.625rem 0 0 0}.bck-media-video .timebar,.bck-media-news .timebar{background-color:#000;padding:.6875rem 0 .4375rem 1rem;margin:0 0 .625rem 0}.bck-media-video .timebar span,.bck-media-news .timebar span{font-family:"Roboto",sans-serif;font-size:.875rem;font-weight:500;color:#f07821}.bck-media-video .video__footer,.bck-media-news .video__footer{font-family:"Roboto",sans-serif;font-size:.875rem;font-weight:400;color:#b5b5b5;position:absolute}.bck-media-video .overlay-next-video,.bck-media-news .overlay-next-video{width:100%;height:100%;position:absolute;padding:10px 22px;top:0;box-shadow:0 2px 4px 0 rgba(0,0,0,.5);background-color:rgba(0,0,0,.6)}.bck-media-video .overlay-next-video .next-header>:not(:last-child):not(.icon),.bck-media-news .overlay-next-video .next-header>:not(:last-child):not(.icon){margin-right:40px}.bck-media-video .overlay-next-video .next-header .number,.bck-media-news .overlay-next-video .next-header .number{font-family:"Roboto Condensed",sans-serif;font-size:36px;font-weight:700;position:relative;width:55px;height:55px;border-radius:50%;background-color:#000;text-align:center;border:5px #f07821 solid;line-height:47px}.bck-media-video .overlay-next-video .next-header .text,.bck-media-news .overlay-next-video .next-header .text{font-family:"Roboto Condensed",sans-serif;font-size:17px;font-weight:400}.bck-media-video .overlay-next-video .next-center,.bck-media-news .overlay-next-video .next-center{width:100%}.bck-media-video .overlay-next-video .next-center .text,.bck-media-news .overlay-next-video .next-center .text{font-family:"Roboto Condensed",sans-serif;font-size:14px;font-weight:400;text-align:center;position:relative}.bck-media-video .overlay-next-video .next-center .text:after,.bck-media-news .overlay-next-video .next-center .text:after{content:"";position:absolute;height:1px;width:97px;border-bottom:solid 1px #afafaf;bottom:6px;right:-7px}.bck-media-video .overlay-next-video .next-center .text:before,.bck-media-news .overlay-next-video .next-center .text:before{content:"";position:absolute;height:1px;width:97px;border-bottom:solid 1px #afafaf;bottom:6px;left:-7px}.bck-media-video .overlay-next-video .next-footer .image,.bck-media-news .overlay-next-video .next-footer .image{width:136px;height:76px;margin-right:20px}.bck-media-video .overlay-next-video .next-footer .title,.bck-media-news .overlay-next-video .next-footer .title{font-family:"Roboto Condensed",sans-serif;font-size:16px;font-weight:700;width:45%}.bck-media-video .is--player-embed .overlay-next-video,.bck-media-news .is--player-embed .overlay-next-video{padding:13% 92px}@media(orientation: portrait){.bck-media-video .vjs-fullscreen .overlay-next-video,.bck-media-news .vjs-fullscreen .overlay-next-video{padding:16.5rem 1.375rem}}@media(orientation: landscape){.bck-media-video .vjs-fullscreen .overlay-next-video,.bck-media-news .vjs-fullscreen .overlay-next-video{padding:2rem}.bck-media-video .vjs-fullscreen .overlay-next-video .next-header>:not(:last-child):not(.icon),.bck-media-news .vjs-fullscreen .overlay-next-video .next-header>:not(:last-child):not(.icon){margin-right:90px !important}.bck-media-video .vjs-fullscreen .overlay-next-video .next-center .text,.bck-media-news .vjs-fullscreen .overlay-next-video .next-center .text{font-size:17px !important}.bck-media-video .vjs-fullscreen .overlay-next-video .next-center .text:after,.bck-media-news .vjs-fullscreen .overlay-next-video .next-center .text:after{width:150px;right:50px}.bck-media-video .vjs-fullscreen .overlay-next-video .next-center .text:before,.bck-media-news .vjs-fullscreen .overlay-next-video .next-center .text:before{width:150px;left:50px}.bck-media-video .vjs-fullscreen .overlay-next-video .next-footer .image,.bck-media-news .vjs-fullscreen .overlay-next-video .next-footer .image{width:202px !important;height:133px !important;margin-right:20px !important}.bck-media-video .vjs-fullscreen .overlay-next-video .next-footer .title,.bck-media-news .vjs-fullscreen .overlay-next-video .next-footer .title{max-width:55% !important;font-family:"Roboto Condensed",sans-serif;font-size:17px !important;font-weight:700}}',""])},2038:(e,t,i)=>{(e.exports=i(9252)(!1)).push([e.id,".rcs-video .vjs-muted #riattiva-audio{display:flex !important;align-items:center;z-index:1 !important}.rcs-video .vjs-muted #riattiva-audio #scritta{font-size:15px !important;margin:0}",""])},9252:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=function(e,t){var i=e[1]||"",o=e[3];if(!o)return i;if(t&&"function"==typeof btoa){var r=(s=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),a=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[i].concat(a).concat([r]).join("\n")}var s;return[i].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+i+"}":i})).join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(o[a]=!0)}for(r=0;r<e.length;r++){var s=e[r];"number"==typeof s[0]&&o[s[0]]||(i&&!s[2]?s[2]=i:i&&(s[2]="("+s[2]+") and ("+i+")"),t.push(s))}},t}},6337:()=>{!function(e,t){"use strict";if("IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype)"isIntersecting"in e.IntersectionObserverEntry.prototype||Object.defineProperty(e.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var i=[];r.prototype.THROTTLE_TIMEOUT=100,r.prototype.POLL_INTERVAL=null,r.prototype.USE_MUTATION_OBSERVER=!0,r.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(),this._checkForIntersections()}},r.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._observationTargets.length||(this._unmonitorIntersections(),this._unregisterInstance())},r.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorIntersections(),this._unregisterInstance()},r.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},r.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,i){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==i[t-1]}))},r.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},r.prototype._monitorIntersections=function(){this._monitoringIntersections||(this._monitoringIntersections=!0,this.POLL_INTERVAL?this._monitoringInterval=setInterval(this._checkForIntersections,this.POLL_INTERVAL):(a(e,"resize",this._checkForIntersections,!0),a(t,"scroll",this._checkForIntersections,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in e&&(this._domObserver=new MutationObserver(this._checkForIntersections),this._domObserver.observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0}))))},r.prototype._unmonitorIntersections=function(){this._monitoringIntersections&&(this._monitoringIntersections=!1,clearInterval(this._monitoringInterval),this._monitoringInterval=null,s(e,"resize",this._checkForIntersections,!0),s(t,"scroll",this._checkForIntersections,!0),this._domObserver&&(this._domObserver.disconnect(),this._domObserver=null))},r.prototype._checkForIntersections=function(){var t=this._rootIsInDom(),i=t?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(r){var a=r.element,s=n(a),d=this._rootContainsTarget(a),l=r.entry,c=t&&d&&this._computeTargetAndRootIntersection(a,i),h=r.entry=new o({time:e.performance&&performance.now&&performance.now(),target:a,boundingClientRect:s,rootBounds:i,intersectionRect:c});l?t&&d?this._hasCrossedThreshold(l,h)&&this._queuedEntries.push(h):l&&l.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)},r.prototype._computeTargetAndRootIntersection=function(i,o){if("none"!=e.getComputedStyle(i).display){for(var r,a,s,d,c,h,u,p,v=n(i),m=l(i),g=!1;!g;){var y=null,f=1==m.nodeType?e.getComputedStyle(m):{};if("none"==f.display)return;if(m==this.root||m==t?(g=!0,y=o):m!=t.body&&m!=t.documentElement&&"visible"!=f.overflow&&(y=n(m)),y&&(r=y,a=v,s=void 0,d=void 0,c=void 0,h=void 0,u=void 0,p=void 0,s=Math.max(r.top,a.top),d=Math.min(r.bottom,a.bottom),c=Math.max(r.left,a.left),h=Math.min(r.right,a.right),p=d-s,!(v=(u=h-c)>=0&&p>=0&&{top:s,bottom:d,left:c,right:h,width:u,height:p})))break;m=l(m)}return v}},r.prototype._getRootRect=function(){var e;if(this.root)e=n(this.root);else{var i=t.documentElement,o=t.body;e={top:0,left:0,right:i.clientWidth||o.clientWidth,width:i.clientWidth||o.clientWidth,bottom:i.clientHeight||o.clientHeight,height:i.clientHeight||o.clientHeight}}return this._expandRectByRootMargin(e)},r.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,i){return"px"==t.unit?t.value:t.value*(i%2?e.width:e.height)/100})),i={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return i.width=i.right-i.left,i.height=i.bottom-i.top,i},r.prototype._hasCrossedThreshold=function(e,t){var i=e&&e.isIntersecting?e.intersectionRatio||0:-1,o=t.isIntersecting?t.intersectionRatio||0:-1;if(i!==o)for(var r=0;r<this.thresholds.length;r++){var a=this.thresholds[r];if(a==i||a==o||a<i!=a<o)return!0}},r.prototype._rootIsInDom=function(){return!this.root||d(t,this.root)},r.prototype._rootContainsTarget=function(e){return d(this.root||t,e)},r.prototype._registerInstance=function(){i.indexOf(this)<0&&i.push(this)},r.prototype._unregisterInstance=function(){var e=i.indexOf(this);-1!=e&&i.splice(e,1)},e.IntersectionObserver=r,e.IntersectionObserverEntry=o}function o(e){this.time=e.time,this.target=e.target,this.rootBounds=e.rootBounds,this.boundingClientRect=e.boundingClientRect,this.intersectionRect=e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0},this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,i=t.width*t.height,o=this.intersectionRect,r=o.width*o.height;this.intersectionRatio=i?Number((r/i).toFixed(4)):this.isIntersecting?1:0}function r(e,t){var i,o,r,a=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(a.root&&1!=a.root.nodeType)throw new Error("root must be an Element");this._checkForIntersections=(i=this._checkForIntersections.bind(this),o=this.THROTTLE_TIMEOUT,r=null,function(){r||(r=setTimeout((function(){i(),r=null}),o))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(a.rootMargin),this.thresholds=this._initThresholds(a.threshold),this.root=a.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" ")}function a(e,t,i,o){"function"==typeof e.addEventListener?e.addEventListener(t,i,o||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,i)}function s(e,t,i,o){"function"==typeof e.removeEventListener?e.removeEventListener(t,i,o||!1):"function"==typeof e.detatchEvent&&e.detatchEvent("on"+t,i)}function n(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function d(e,t){for(var i=t;i;){if(i==e)return!0;i=l(i)}return!1}function l(e){var t=e.parentNode;return t&&11==t.nodeType&&t.host?t.host:t}}(window,document)},7238:()=>{[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach((function(e){e.hasOwnProperty("prepend")||Object.defineProperty(e,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),t=document.createDocumentFragment();e.forEach((function(e){var i=e instanceof Node;t.appendChild(i?e:document.createTextNode(String(e)))})),this.insertBefore(t,this.firstChild)}})}))},437:(e,t,i)=>{var o=i(7055);e.exports=function(e){var t,i="",r=e||{};return function(e,r,a,s){i=i+'<div class="media__image"><a'+o.attr("href",s,!0,!0)+' data-trkmenu="&amp;lid=nd&amp;lpos=foglia:video-embed"><figure class="has-media image is-16by9"><img class="is-opacity"'+o.attr("alt",e,!0,!0)+o.attr("src",r,!0,!0)+'><span class="icon is-large"><i class="icon-gazzetta-g-play fa-3x"></i></span><figcaption></figcaption></figure></a></div><div class="media__footer has-background-black"><h3 class="title is--large"><a class="has-text-white"'+o.attr("href",s,!0,!0)+' data-anchor="true" data-trkmenu="&amp;lid=nd&amp;lpos=foglia:video-embed">'+o.escape(null==(t=a)?"":t)+"</a></h3></div>"}.call(this,"description"in r?r.description:"undefined"!=typeof description?description:void 0,"thumbnailSrc"in r?r.thumbnailSrc:"undefined"!=typeof thumbnailSrc?thumbnailSrc:void 0,"title"in r?r.title:"undefined"!=typeof title?title:void 0,"url"in r?r.url:"undefined"!=typeof url?url:void 0),i}},9330:(e,t,i)=>{var o=i(7055);e.exports=function(e){var t="",i=e||{};return function(e,i){t=t+'<span class="overtitle-art is-small is-mr-b-8 is-line-h-11"></span><div class="bck-social-nav"'+o.attr("data-href",i,!0,!0)+o.attr("data-title",e,!0,!0)+'><div class="social"><ul class="fxr-between-center"><li class="social-item" data-social="share"><span class="icon"><i class="icon-corriere-Condividi fa-1-2x"></i></span></li></ul></div></div>'}.call(this,"title"in i?i.title:"undefined"!=typeof title?title:void 0,"videoUrl"in i?i.videoUrl:"undefined"!=typeof videoUrl?videoUrl:void 0),t}},9700:(e,t,i)=>{var o=i(7055);e.exports=function(e){var t,i="",r=e||{};return function(e,r){i=i+'<h4 class="title-art is-medium"><a class="has-text-black"'+o.attr("href",r,!0,!0)+">"+o.escape(null==(t=e)?"":t)+"</a></h4>"}.call(this,"title"in r?r.title:"undefined"!=typeof title?title:void 0,"videoUrl"in r?r.videoUrl:"undefined"!=typeof videoUrl?videoUrl:void 0),i}},5701:(e,t,i)=>{var o=i(7055);e.exports=function(e){var t,i="",r=e||{};return function(e,r){i+='<div class="correlated-overlay"><div class="row">',function(){var r=e;if("number"==typeof r.length)for(var a=0,s=r.length;a<s;a++){var n=r[a];i=i+'<a class="item"'+o.attr("href",n.url,!0,!0)+o.attr("onClick","(function(){window.top.location.href='"+n.url+"'})()",!0,!0)+"><img"+o.attr("src",n.thumbnail,!0,!0)+'><div class="title-overlay">'+o.escape(null==(t=n.titolo)?"":t)+"</div></a>"}else{s=0;for(var a in r){s++;n=r[a];i=i+'<a class="item"'+o.attr("href",n.url,!0,!0)+o.attr("onClick","(function(){window.top.location.href='"+n.url+"'})()",!0,!0)+"><img"+o.attr("src",n.thumbnail,!0,!0)+'><div class="title-overlay">'+o.escape(null==(t=n.titolo)?"":t)+"</div></a>"}}}.call(this),i+="</div>",r&&(i+='<div class="row">',function(){var e=r;if("number"==typeof e.length)for(var a=0,s=e.length;a<s;a++){var n=e[a];i=i+'<a class="item"'+o.attr("href",n.url,!0,!0)+o.attr("onClick","(function(){window.top.location.href='"+n.url+"'})()",!0,!0)+"><img"+o.attr("src",n.thumbnail,!0,!0)+'><div class="title-overlay">'+o.escape(null==(t=n.titolo)?"":t)+"</div></a>"}else{s=0;for(var a in e){s++;n=e[a];i=i+'<a class="item"'+o.attr("href",n.url,!0,!0)+o.attr("onClick","(function(){window.top.location.href='"+n.url+"'})()",!0,!0)+"><img"+o.attr("src",n.thumbnail,!0,!0)+'><div class="title-overlay">'+o.escape(null==(t=n.titolo)?"":t)+"</div></a>"}}}.call(this),i+="</div>"),i+='<div class="overlay-logo"><img src="https://images2.gazzettaobjects.it/images/assets-video/luminosa.png?v=2"></div></div>'}.call(this,"correlatedListFirst"in r?r.correlatedListFirst:"undefined"!=typeof correlatedListFirst?correlatedListFirst:void 0,"correlatedListSecond"in r?r.correlatedListSecond:"undefined"!=typeof correlatedListSecond?correlatedListSecond:void 0),i}},6454:(e,t,i)=>{i(7055);e.exports=function(e){var t="",i=e||{};return function(e){"WAITING"===e&&(t+='<div class="msg">LA DIRETTA AVRA\' INIZIO A BREVE</div>'),"CLOSED"===e&&(t+='<div class="msg">LA DIRETTA E\' TERMINATA</div>')}.call(this,"liveStatus"in i?i.liveStatus:"undefined"!=typeof liveStatus?liveStatus:void 0),t}},7522:(e,t,i)=>{var o=i(7055);e.exports=function(e){var t="",i=e||{};return function(e,i,r){t=t+'<div class="media__image"><a'+o.attr("href",r,!0,!0)+' data-trkmenu="&amp;lid=nd&amp;lpos=foglia:video-embed"><figure class="has-media image is-16by9"><img class="is-opacity"'+o.attr("alt",e,!0,!0)+o.attr("src",i,!0,!0)+'><span class="icon is-large"><i class="icon-gazzetta-g-play fa-3x"></i></span><figcaption></figcaption></figure></a></div>'}.call(this,"description"in i?i.description:"undefined"!=typeof description?description:void 0,"thumbnailSrc"in i?i.thumbnailSrc:"undefined"!=typeof thumbnailSrc?thumbnailSrc:void 0,"url"in i?i.url:"undefined"!=typeof url?url:void 0),t}},7142:(e,t,i)=>{var o=i(7055);e.exports=function(e){var t,i="",r=e||{};return function(e){i+='<div class="not-available__content">',e.title&&(i=i+'<h5 class="not-available__title">'+o.escape(null==(t=e.title)?"":t)+"</h5>"),e.subtitle&&(i=i+'<p class="not-available__subtitle">'+o.escape(null==(t=e.subtitle)?"":t)+"</p>"),e.errorcode&&(i=e.errorlink?i+"<a"+o.attr("href",e.errorlink,!0,!0)+'><p class="not-available__errorcode">'+o.escape(null==(t=e.errorcode)?"":t)+"</p></a>":i+'<p class="not-available__errorcode">'+o.escape(null==(t=e.errorlink)?"":t)+"</p>"),i+="</div>"}.call(this,"data"in r?r.data:"undefined"!=typeof data?data:void 0),i}},5530:(e,t,i)=>{var o=i(7055);e.exports=function(e){var t,i="",r=e||{};return function(e){i=i+'<a class="next-video fxr-between-top"><figure class="image"><img class="is-opacity"'+o.attr("src",e.thumbImg,!0,!0)+'></figure><span class="next-text fxc-center-left has-text-white"><p class="text is-uppercase">Prossimo video</p><p class="title">'+o.escape(null==(t=e.title)?"":t)+'</p></span><span class="icon"><i class="icon-gazzetta-g-close-inverse fa-1-7x"></i></span></a>'}.call(this,"nextVideoData"in r?r.nextVideoData:"undefined"!=typeof nextVideoData?nextVideoData:void 0),i}},2524:(e,t,i)=>{var o=i(7055);e.exports=function(e){var t,i="",r=e||{};return function(e,r){i+='<div class="overlay-next-video fxc-between-center-c"><div class="next-header fxr-center-center has-text-primary">',e&&(i+='<div class="fxc-center-center-c" data-action="forward"><span class="icon"><i class="icon-gazzetta-g-inoltra-sx fa-2x"></i></span><div class="text">Condividi</div></div>'),i=i+'<div class="number">5</div><div class="fxc-center-center-c" data-action="replay"><span class="icon"><i class="icon-gazzetta-g-restart fa-2x"></i></span><div class="text">Rivedi</div></div></div><div class="next-center"><p class="is-uppercase text has-text-white">Prossimo video</p></div><div'+(o.attr("class",o.classes(["next-footer",r.isMobile?"fxr-between-center":"fxr-center-center"],[!1,!0]),!1,!0)+o.attr("data-link",r.url,!0,!0))+'><figure class="image"><a><img'+o.attr("src",r.thumbImg,!0,!0)+'></a></figure><span class="title has-text-white">'+o.escape(null==(t=r.titleFull)?"":t)+"</span></div></div>"}.call(this,"isGazzetta"in r?r.isGazzetta:"undefined"!=typeof isGazzetta?isGazzetta:void 0,"nextVideoData"in r?r.nextVideoData:"undefined"!=typeof nextVideoData?nextVideoData:void 0),i}},7055:(e,t,i)=>{"use strict";var o=Object.prototype.hasOwnProperty;function r(e,t){return Array.isArray(e)?function(e,t){for(var i,o="",a="",s=Array.isArray(t),n=0;n<e.length;n++)(i=r(e[n]))&&(s&&t[n]&&(i=d(i)),o=o+a+i,a=" ");return o}(e,t):e&&"object"==typeof e?function(e){var t="",i="";for(var r in e)r&&e[r]&&o.call(e,r)&&(t=t+i+r,i=" ");return t}(e):e||""}function a(e){if(!e)return"";if("object"==typeof e){var t="";for(var i in e)o.call(e,i)&&(t=t+i+":"+e[i]+";");return t}return e+""}function s(e,t,i,o){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(o?e:e+'="'+e+'"');var r=typeof t;return"object"!==r&&"function"!==r||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),i||-1===t.indexOf('"'))?(i&&(t=d(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}t.merge=function e(t,i){if(1===arguments.length){for(var o=t[0],r=1;r<t.length;r++)o=e(o,t[r]);return o}for(var s in i)if("class"===s){var n=t[s]||[];t[s]=(Array.isArray(n)?n:[n]).concat(i[s]||[])}else if("style"===s){n=(n=a(t[s]))&&";"!==n[n.length-1]?n+";":n;var d=a(i[s]);d=d&&";"!==d[d.length-1]?d+";":d,t[s]=n+d}else t[s]=i[s];return t},t.classes=r,t.style=a,t.attr=s,t.attrs=function(e,t){var i="";for(var n in e)if(o.call(e,n)){var d=e[n];if("class"===n){d=r(d),i=s(n,d,!1,t)+i;continue}"style"===n&&(d=a(d)),i+=s(n,d,!1,t)}return i};var n=/["&<>]/;function d(e){var t=""+e,i=n.exec(t);if(!i)return e;var o,r,a,s="";for(o=i.index,r=0;o<t.length;o++){switch(t.charCodeAt(o)){case 34:a="&quot;";break;case 38:a="&amp;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}r!==o&&(s+=t.substring(r,o)),r=o+1,s+=a}return r!==o?s+t.substring(r,o):s}t.escape=d,t.rethrow=function e(t,o,r,a){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&o||a))throw t.message+=" on line "+r,t;try{a=a||i(7835).readFileSync(o,"utf8")}catch(i){e(t,null,r)}var s=3,n=a.split("\n"),d=Math.max(r-s,0),l=Math.min(n.length,r+s);s=n.slice(d,l).map((function(e,t){var i=t+d+1;return(i==r?"  > ":"    ")+i+"| "+e})).join("\n");throw t.path=o,t.message=(o||"Pug")+":"+r+"\n"+s+"\n\n"+t.message,t}},5937:(e,t,i)=>{var o=i(2914);"string"==typeof o&&(o=[[e.id,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};i(6723)(o,r);o.locals&&(e.exports=o.locals)},813:(e,t,i)=>{var o=i(9964);"string"==typeof o&&(o=[[e.id,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};i(6723)(o,r);o.locals&&(e.exports=o.locals)},1590:(e,t,i)=>{var o=i(4753);"string"==typeof o&&(o=[[e.id,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};i(6723)(o,r);o.locals&&(e.exports=o.locals)},8012:(e,t,i)=>{var o=i(6673);"string"==typeof o&&(o=[[e.id,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};i(6723)(o,r);o.locals&&(e.exports=o.locals)},8324:(e,t,i)=>{var o=i(7369);"string"==typeof o&&(o=[[e.id,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};i(6723)(o,r);o.locals&&(e.exports=o.locals)},9098:(e,t,i)=>{var o=i(3358);"string"==typeof o&&(o=[[e.id,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};i(6723)(o,r);o.locals&&(e.exports=o.locals)},2167:(e,t,i)=>{var o=i(2038);"string"==typeof o&&(o=[[e.id,o,""]]);var r={hmr:!0,transform:undefined,insertInto:void 0};i(6723)(o,r);o.locals&&(e.exports=o.locals)},6723:(e,t,i)=>{var o,r,a={},s=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),n=function(e){return document.querySelector(e)},d=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var i=n.call(this,e);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(e){i=null}t[e]=i}return t[e]}}(),l=null,c=0,h=[],u=i(1947);function p(e,t){for(var i=0;i<e.length;i++){var o=e[i],r=a[o.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](o.parts[s]);for(;s<o.parts.length;s++)r.parts.push(b(o.parts[s],t))}else{var n=[];for(s=0;s<o.parts.length;s++)n.push(b(o.parts[s],t));a[o.id]={id:o.id,refs:1,parts:n}}}}function v(e,t){for(var i=[],o={},r=0;r<e.length;r++){var a=e[r],s=t.base?a[0]+t.base:a[0],n={css:a[1],media:a[2],sourceMap:a[3]};o[s]?o[s].parts.push(n):i.push(o[s]={id:s,parts:[n]})}return i}function m(e,t){var i=d(e.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=h[h.length-1];if("top"===e.insertAt)o?o.nextSibling?i.insertBefore(t,o.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),h.push(t);else if("bottom"===e.insertAt)i.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=d(e.insertInto+" "+e.insertAt.before);i.insertBefore(t,r)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=h.indexOf(e);t>=0&&h.splice(t,1)}function y(e){var t=document.createElement("style");return e.attrs.type="text/css",f(t,e.attrs),m(e,t),t}function f(e,t){Object.keys(t).forEach((function(i){e.setAttribute(i,t[i])}))}function b(e,t){var i,o,r,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var s=c++;i=l||(l=y(t)),o=x.bind(null,i,s,!1),r=x.bind(null,i,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",f(t,e.attrs),m(e,t),t}(t),o=V.bind(null,i,t),r=function(){g(i),i.href&&URL.revokeObjectURL(i.href)}):(i=y(t),o=k.bind(null,i),r=function(){g(i)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var i=v(e,t);return p(i,t),function(e){for(var o=[],r=0;r<i.length;r++){var s=i[r];(n=a[s.id]).refs--,o.push(n)}e&&p(v(e,t),t);for(r=0;r<o.length;r++){var n;if(0===(n=o[r]).refs){for(var d=0;d<n.parts.length;d++)n.parts[d]();delete a[n.id]}}}};var w,P=(w=[],function(e,t){return w[e]=t,w.filter(Boolean).join("\n")});function x(e,t,i,o){var r=i?"":o.css;if(e.styleSheet)e.styleSheet.cssText=P(t,r);else{var a=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(a,s[t]):e.appendChild(a)}}function k(e,t){var i=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function V(e,t,i){var o=i.css,r=i.sourceMap,a=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||a)&&(o=u(o)),r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([o],{type:"text/css"}),n=e.href;e.href=URL.createObjectURL(s),n&&URL.revokeObjectURL(n)}},1947:e=>{e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var i=t.protocol+"//"+t.host,o=i+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,a=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?e:(r=0===a.indexOf("//")?a:0===a.indexOf("/")?i+a:o+a.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},3101:(e,t,i)=>{"use strict";i.d(t,{default:()=>x});var o=i(4761),r=i(8812),a=i(6086),s=i(5209),n=i(8615);const d=class{constructor(e,t,i,o=!0){this.propsResolver=new a.Z,this.config=e||{},this.video=null,this.opts=t||{},this.showPostRoll=o,this.blockAdv=!1,this.watermaksByPlayerType={oggi:{src:"//images2.corriereobjects.it/methode_image/watermark/oggi.png",position:"UP_RIGHT",style:"width: 8.5%"},partnership_dday:{src:"//images2.corriereobjects.it/methode_image/watermark/watermark-dday.png",position:"UP_RIGHT"}},this.cmsIdMap={corriere:682,gazzetta:922},this.customDFPUrl={leitv:()=>"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/57491254/leitv.it/video/Preroll&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&description_url="+encodeURI(this.video.canonicalUrl)+"&correlator=[timestamp]"},this.currentVideoOptions={},this.qsParams={},this.videoAttributes={}}getNewspaperVideoId(){return this.video&&this.video.newspaper&&this.video.newspaper.id}loadPlayer(e,t,i,o){this.qsParams=i,this.videoAttributes=o,this.video=t;let r=null;if("gazzetta"===this.getNewspaperVideoId()&&"true"===(0,n.ej)("rcsad_fast")&&(this.video.hierarchicalAssetProperties.blockAdv=!0),"corriere"===this.getNewspaperVideoId()&&window.localStorage.getItem("refreshAdvCookie")&&"LIVE"===this.video.liveStatus&&(this.video.hierarchicalAssetProperties.blockAdv=!0),this.currentVideoOptions=this.createOptions(e,t),this.loadInfoVideo(this.video),0===Object.keys(this.currentVideoOptions.src).length)return this.getErrorMsg("VIDEO NON DISPONIBILE",e),null;let a=this.isVideoActive(t);return!1===a.status?(this.getErrorMsg(a.msg,e),null):(this.currentVideoOptions.videoParams=this.video,window.extVideoPlayer&&"embed"===window.extVideoPlayer&&(this.qsParams.mute&&(this.qsParams.muted=this.qsParams.mute),void 0===this.qsParams.mute&&(this.qsParams.muted="true"),this.currentVideoOptions=this.mergeVideoOptions()),r=(new RCSVideo).generatePlayer(this.currentVideoOptions),window.currentPlayer=r,r)}mergeVideoOptions(){const e=this.currentVideoOptions;return["playerType","muted","autoPlay","disableFullScreen","skinColor"].forEach((t=>{this.qsParams[t]&&"playerType"!==t?e[t]=this.getPlayerProp(t):this.qsParams[t]&&"playerType"===t&&(e[t]=this.qsParams[t])})),e}loadPlaylist(e,t){return this.videoAttributes=t,this.video=e,this.currentVideoOptions=this.createOptions(r._G.playerId,this.video),this.loadInfoVideo(this.video),this.currentVideoOptions.videoParams=this.video,this.currentVideoOptions}loadInfoVideo(e){this.config.loadInfoVideo.call(this,e)}destroyPlayer(e){e.destroy()}videoHasBlockAdv(e){void 0!==this.qsParams.blockAdv?this.getBlockAdvFromQueryString():void 0!==this.videoAttributes.blockAdv?this.getBlockAdvFromDataAttr():void 0!==this.config.defaultValuesManager.getValue("blockAdv",this.qsParams.playerType)?(console.log("BLOCK ADV DEBUG: from default values",this.config.defaultValuesManager.getValue("blockAdv",this.qsParams.playerType)),!1===this.config.defaultValuesManager.getValue("blockAdv",this.qsParams.playerType)?this.getBlockAdvFromVideoProperty(e):this.blockAdv=!0):void 0!==this.propsResolver.resolveVideoProperty(e,"blockAdv")&&this.getBlockAdvFromVideoProperty(e)}getBlockAdvFromQueryString(){console.log("BLOCK ADV DEBUG: from query string",this.qsParams.blockAdv),"true"===this.qsParams.blockAdv?this.blockAdv=!0:"false"===this.qsParams.blockAdv&&(this.blockAdv=!1)}getBlockAdvFromDataAttr(){console.log("BLOCK ADV DEBUG: from data attribute",this.videoAttributes.blockAdv),this.blockAdv=this.videoAttributes.blockAdv}getBlockAdvFromVideoProperty(e){console.log("BLOCK ADV DEBUG: from json video property",this.propsResolver.resolveVideoProperty(e,"blockAdv")),this.blockAdv=this.propsResolver.resolveVideoProperty(e,"blockAdv")}createOptions(e,t){this.videoAttributes.uuid=t.id,window.RCSVideoManagerExternal&&navigator.userAgent.indexOf("Android",0)>=0&&(this.videoAttributes.tech="Html5");let i=(0,s._E)(r._G.containerPlayer,window[this.config.deviceDetectionVar],this.config.aspectRatio,this.qsParams.autosize),o=(0,s.Qk)(i.width,this.video,this.config),a={};try{a=this.getVideoSrc()}catch(t){this.getErrorMsg("VIDEO NON DISPONIBILE",e)}let n={id:e,src:a,width:i.width,height:i.height,poster:o,watermark:this.getWatermark(t),type:this.getType(t.newspaper.id),isLive:"LIVE"===t.mediaType,skinColor:"#003267"};if(this.videoHasBlockAdv(t),console.log("BLOCK ADV DEBUG PRIORITY RESULT:",this.blockAdv),!this.blockAdv&&!this.config.video360.isVideo360&&this.isCookiePolicyAccepted())try{let t,i,o=this.getPlayerContainerDimensions(e,this.config.aspectRatio),r={};if(window.extVideoPlayer&&"embed"===window.extVideoPlayer?(r.video_autoplay=this.qsParams.autoPlay||this.videoAttributes.autoplay,r.gestione_AMP=this.qsParams.gestione_AMP||!1,r.dimesione_player=o.width+"x"+o.height):(r.video_autoplay=this.videoAttributes.autoplay,r.dimesione_player=o.width+"x"+o.height,this.config.plSzAbTest&&(r.plSzAbTest=this.config.plSzAbTest)),t=this.getDFPData({customParams:r}),t){if(i=t.url,i&&(n.preRollUrl=i.replace("{TYPE_OF_ROLL}","/preRoll"),this.showPostRoll&&!this.videoAttributes.playlist&&(n.postRollUrl=i.replace("{TYPE_OF_ROLL}","/postRoll")),n.prebId=t.prebid,window.dfpTagConf&&window.dfpTagConf.overlayVidAd)){let e=i.replace("{TYPE_OF_ROLL}","/position2");e=e.replace("?sz=640x360","?sz=480x70"),n.inLogoUrl=e,console.log("inLogoUrl DFP: "+n.inLogoUrl)}}else console.log("%c[RCS_VIDEOMANAGER] Warning: cannot get dfpData","background: red; color: white;")}catch(e){console.warn("Problem during creation of DFP Url",e)}return this.qsParams.inactivityTimeout&&(this.videoAttributes.inactivityTimeout=this.qsParams.inactivityTimeout),n.autoplay&&this.config.isEmbed&&(n.autoplayMute=!0),Object.assign(n,this.videoAttributes)}setFirstVideoSrc(e,t){for(let i=0;i<t.length;i++)if(t[i].value.endsWith(".mp4")){e.mp4=t[i].value;break}}getVideoSrc(){let e={},t=this.video.mediaProfile.mediaFile.map((e=>(e.value=e.value.toString().replace("http:",""),e)));if("AUDIO"===this.video.mediaType)for(let i=0;i<t.length;i++)t[i].value.endsWith(".mp3")&&(e.mp4=t[i].value);else{for(let i=0;i<t.length;i++)if(t[i].value.endsWith(".m3u8")){let o=(0,r.Wz)("set-segment-duration");e.m3u8=!0===o?t[i].value+"?set-segment-duration="+o:t[i].value}if(this.video.mediaProfile.publishType&&"TRANSCODING"===this.video.mediaProfile.publishType){for(let i=0;i<t.length;i++)if(t[i].value.endsWith(".mp4")){let o=t[i].value.substring(t[i].value.lastIndexOf("_")+1,t[i].value.lastIndexOf("k."));if(800===parseInt(o,10)){e.mp4=t[i].value;break}o<800&&(e.mp4=t[i].value)}e.mp4||this.setFirstVideoSrc(e,t)}else this.setFirstVideoSrc(e,t)}for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=e[t].replace("media2vam.corriere.it.edgesuite.net","media2vam-corriere-it.akamaized.net").replace("media.youreporter.it.edgesuite.net","media-youreporter-it.akamaized.net"));return e.mp4&&(e.mp4=e.mp4.replace("media2vam.gazzetta.it.edgesuite.net","media2vam-gazzetta-it.akamaized.net"),e.mp4=e.mp4.replace("media2.gazzanet.gazzetta.it.edgesuite.net","media2-gazzanet-gazzetta-it.akamaized.net"),e.mp4=e.mp4.replace("gazzettapmd.gazzetta.it.edgesuite.net","gazzettapmd-gazzetta-it.akamaized.net"),e.mp4=e.mp4.replace("media2vam.corbologna.corriere.it.edgesuite.net","media2vam-bologna-corriere-it.akamaized.net"),e.mp4=e.mp4.replace("media2vam.corfiorentino.corriere.it.edgesuite.net","media2vam-fiorentino-corriere-it.akamaized.net"),e.mp4=e.mp4.replace("media2vam.cormezzogiorno.corriere.it.edgesuite.net","media2vam-mezzogiorno-corriere-it.akamaized.net"),e.mp4=e.mp4.replace("media2vam.corveneto.corriere.it.edgesuite.net","media2vam-veneto-corriere-it.akamaized.net"),e.mp4=e.mp4.replace("media2.oggi.it.edgesuite.net","media2-oggi-it.akamaized.net"),e.mp4=e.mp4.replace("media2.quimamme.it.edgesuite.net","media2-quimamme-it.akamaized.net"),e.mp4=e.mp4.replace("media2.amica.it.edgesuite.net","media2-amica-it.akamaized.net"),e.mp4=e.mp4.replace("media2.living.corriere.it.edgesuite.net","media2-living-corriere-it.akamaized.net"),e.mp4=e.mp4.replace("media2.style.corriere.it.edgesuite.net","media2-style-corriere-it.akamaized.net"),e.mp4=e.mp4.replace("media2.iodonna.it.edgesuite.net","media2-iodonna-it.akamaized.net")),this.transformSrc(e)}transformSrc(e){var t={"advrcs-vh.akamaihd":"","corriere-f.akamaihd":"","corrierepmd-corriere-it.akamaized":"","corrierepmd.corriere.it.edgesuite":"","corrprotetto-vh.akamaihd":"","gazzetta-f.akamaihd":"","gazzettapmd-gazzetta-it.akamaized":"","gazzprotetto-vh.akamaihd":"","periodici-f.akamaihd":"","periodicisecure-vh.akamaihd":"","videocoracademy-vh.akamaihd":"","corriere-f.akamaihd.net":""},i={"videoamica-vh.akamaihd":"amica","media2-amica-it.akamaized":"amica","corrierevam-vh.akamaihd":"corriere","media2vam-corriere-it.akamaized":"corriere","cormezzogiorno-vh.akamaihd":"corrieredelmezzogiorno","media2vam-mezzogiorno-corriere-it.akamaized":"corrieredelmezzogiorno","corveneto-vh.akamaihd":"corrieredelveneto","media2vam-veneto-corriere-it.akamaized":"corrieredelveneto","corbologna-vh.akamaihd":"corrieredibologna","media2vam-bologna-corriere-it.akamaized":"corrieredibologna","corfiorentino-vh.akamaihd":"corrierefiorentino","media2vam-fiorentino-corriere-it.akamaized":"corrierefiorentino","corinnovazione-vh.akamaihd":"corriereinnovazione","media2-gazzanet-gazzetta-it.akamaized":"gazzanet","videogazzanet-vh.akamaihd":"gazzanet","videogazzaworld-vh.akamaihd":"gazzaworld","gazzettavam-vh.akamaihd":"gazzetta","media2vam-gazzetta-it.akamaized":"gazzetta","videoiodonna-vh.akamaihd":"iodonna","media2-leitv-it.akamaized":"leitv","videoleitv-vh.akamaihd":"leitv","videoliving-vh.akamaihd":"living","media2-living-corriere-it.akamaized":"living","media2-oggi-it.akamaized":"oggi","videooggi-vh.akamaihd":"oggi","media2-quimamme-it.akamaized":"quimamme","quimamme-vh.akamaihd":"quimamme","videorunning-vh.akamaihd":"running","media2-style-corriere-it.akamaized":"style","style-vh.akamaihd":"style","videostyle-vh.akamaihd":"style","media2-stylepiccoli-it.akamaized":"stylepiccoli","stylepiccoli-vh.akamaihd":"stylepiccoli","doveviaggi-vh.akamaihd":"viaggi","media2-doveviaggi-it.akamaized":"viaggi","media2-vivimilano-corriere-it.akamaized":"vivimilano","vivimilano-vh.akamaihd":"vivimilano","media2-youreporter-it.akamaized":"youreporter"};if(e.m3u8&&-1===e.m3u8.indexOf("rcsquotidiani2-lh.akamaihd")&&e.mp4&&e.mp4.indexOf("akamai")>0){if(e.m3u8=e.m3u8.replace(".net//",".net/"),e.mp4=e.mp4.replace(".net//",".net/"),e.m3u8){let t=/(?:http:|https:)?\/\/(.*)\.net\/i(.*)/.exec(e.m3u8);e.m3u8=("https://vod.rcsobjects.it/hls/"+i[t[1]]+t[2].replace("///","/").replace("//","/")).replace(".csmil",".urlset")}if(e.mp4){let o=/(?:http:|https:)?\/\/(.*)\.net(.*)/.exec(e.mp4);void 0!==t[o[1]]?e.mp4="https://media2.corriereobjects.it"+o[2].replace("///","/").replace("//","/").replace("/fcs.quotidiani/mediacenter","").replace("/fcs.quotidiani_!/mediacenter",""):e.mp4="https://vod.rcsobjects.it/"+i[o[1]]+o[2].replace("///","/").replace("//","/")}}if(e.mp4){let i=/(?:http:|https:)?\/\/(.*)\.net(.*)/.exec(e.mp4);e.mp4.includes("fcs.quotidiani_!")&&(e.mp4=e.mp4.replace("vod.rcsobjects","vod-it.rcsobjects")),i&&void 0!==t[i[1]]&&(e.mp4="https://media2.corriereobjects.it"+i[2].replace("/fcs.quotidiani/mediacenter",""))}return e.m3u8&&e.m3u8.includes("fcs.quotidiani_!")&&(e.m3u8=e.m3u8.replace("vod.rcsobjects","vod-it.rcsobjects")),this.video.mediaProfile.geoblocking&&(e.m3u8&&(e.m3u8=e.m3u8.replace("vod.rcsobjects","vod-it.rcsobjects")),e.mp4&&(e.mp4=e.mp4.replace("vod.rcsobjects","vod-it.rcsobjects"))),e.m3u8&&e.m3u8.includes("csmil")&&e.m3u8.includes("vod")&&(e.m3u8=e.m3u8.replace(".csmil",".urlset")),e}normalizeDfpKey(e){return e?e.toLowerCase().replace(" ",""):""}getErrorMsg(e,t){this.config.getErrorMsg(e,t)}getCiuSzs(){return{desktop:"2x2,300x250,728x90,940x60,940x90,940x250,970x250,1920x1080",tablet:"2x2,300x250,728x90,940x60,940x90,940x250,970x250",mobile:"2x2"}[window.device]}getAdUnit(){const e=window.location.search;let t=`${new URLSearchParams(e).get("adunit")}`;return"null"===t?`${window.utag.data.video_dfp_adunit}/preRoll`:`${t}/preRoll`}getDFPData(e){let t=e||{};if(this.customDFPUrl[this.qsParams.newspaper])return this.customDFPUrl[this.qsParams.newspaper].call(this);let i="sky"===this.video.provider.toLowerCase()&&this.video.secondaryFeedsName&&this.video.secondaryFeedsName.feedRef&&this.video.secondaryFeedsName.feedRef.length>0?this.video.secondaryFeedsName.feedRef[0]:this.video.feed.title;if(!window.utag||"function"!=typeof window.utag.dfp_adunit)return void console.log("%c[RCS_VIDEOMANAGER] Warning: window.utag.dfp_adunit not loaded","background: red; color: white;");window.utag.dfp_adunit(this.video.id,this.qsParams.playerType,this.normalizeDfpKey(i),this.normalizeDfpKey(this.video.channel.urlName),this.video.newspaper.id);const o=this.config.deviceCompanionPos[window[this.config.deviceDetectionVar]],a=this.config.deviceCompanionPos[window.DeviceVideo];let s="//pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu={ADUNIT}"+(o||a)+"&impl=s&gdfp_req=1&env=vp&output=xml_vast3&unviewed_position_start=1&url=[referrer_url]&description_url={DESCRIPTION_URL}&{CMSID}&correlator=[timestamp]&hl=it&cust_params=",n="channel={CHANNEL_VALUE}&player={PLAYER_VALUE}&kuid={KUID}&ksegs={KRUX_DATA}&permutive={PERMUTIVE_SEGS_VIDEO_AD}&RCSadobe={RCSADOBE}&permutive-id={PERMUTIVE_ID}";n=n.replace("{CHANNEL_VALUE}",this.video.channel.urlName),n=n.replace("{PLAYER_VALUE}",this.qsParams.playerType),n=n.replace("{KUID}",window.utag.data.user_kruxUser),n=n.replace("{KRUX_DATA}",window.utag.data.user_kruxSegments),n=n.replace("{PERMUTIVE_SEGS_VIDEO_AD}",window.localStorage.getItem("_pdfps")?JSON.parse(window.localStorage.getItem("_pdfps")):""),n=n.replace("{RCSADOBE}",this.getCookie("UESeg")),n=n.replace("{PERMUTIVE_ID}",window.localStorage.getItem("permutive-id")?window.localStorage.getItem("permutive-id"):""),n=this.getAdditionalParams(t.customParams)+"&"+n;let d=(0,r.Wz)("adunit"),l=s.replace("{ADUNIT}",d||window.utag.data.video_dfp_adunit+"{TYPE_OF_ROLL}").replace("{DESCRIPTION_URL}",this.video.canonicalUrl).replace("{CMSID}",this.getDFPCmsId(this.video))+encodeURIComponent(n)+(this.qsParams.cust_params?encodeURIComponent("&")+this.qsParams.cust_params:"");try{this.dfpAdmantVideoAppend(l.length,(()=>{l+=encodeURIComponent("&"+window.dfpurlVideoAdmant)}))}catch(e){}return console.log(`%c[RCS_VIDEOMANAGER] dfpURL OK: ${l}`,"color: green;"),{url:l,prebid:{amazon:{pubId:"3692"},pubmatic:{adslot:this.getAdUnit(),publisherId:"158689"},cust_params:{tipo_video:this.getAdditionalParamsObj(t.customParams),video_autoplay:this.videoAttributes.autoplay,dimesione_player:this.getPlayerContainerDimensions(r._G.playerId,this.config.aspectRatio).width+"x"+this.getPlayerContainerDimensions(r._G.playerId,this.config.aspectRatio).height,channel:this.video.channel.urlName,player:this.qsParams.playerType,permutive:window.localStorage.getItem("_pdfps")?JSON.parse(window.localStorage.getItem("_pdfps")):"",RCSadobe:this.getCookie("UESeg"),"permutive-id":window.localStorage.getItem("permutive-id")?window.localStorage.getItem("permutive-id"):""},ciu_szs:this.getCiuSzs()}}}getAdditionalParams(e){let t=[];return this.opts.tipo_video&&t.push(`tipo_video=${this.opts.tipo_video}`),e&&Object.keys(e).forEach((function(i){t.push(i+"="+e[i])})),t}getAdditionalParamsObj(e){if(this.opts.tipo_video)return this.opts.tipo_video;e&&Object.keys(e).forEach((function(t){return t+"="+e[t]}))}isCookiePolicyAccepted(){return"undefined"!=typeof privacyok&&privacyok}isVideoActive(e){let t={status:!0};return"true"===(0,r.Wz)("mktTest")?t:"CLOSED"===e.liveStatus?(t.status=!1,t.msg="DIRETTA TERMINATA",t):t}getWatermark(e){const t=Boolean(navigator.platform.match(/iPhone/)),i="gazzetta"===e.newspaper.id,o=window.gznPartnerId;let r=this.watermaksByPlayerType[this.qsParams.playerType]||{src:this.propsResolver.resolveVideoProperty(e,"watermarkUrl"),position:this.propsResolver.resolveVideoProperty(e,"watermarkPosition")};return window.RCSVideoManagerExternal&&!r.src.startsWith("http")&&(r.src=`${window.location.protocol}//www.${e.newspaper.name}.it${r.src}`),("#"===r.src&&i||o&&!i)&&(r=!1),i&&t&&(r.src="https://images2.gazzettaobjects.it/images/assets-video/luminosa_iphone.png",r.style="width:4.7%;right:1.3%;"),r.src.includes("http://images2.corriereobjects.it")&&(r.src=r.src.replace("http://","https://")),r}getPlayerProp(e){return"skinColor"===e&&this.qsParams[e]?this.qsParams[e]:!(!this.qsParams[e]||"true"!==this.qsParams[e])||(!this.qsParams[e]||"false"!==this.qsParams[e])&&(this.config.isEmbed?(0,r.MX)(this.config.defaultValuesManager.getDefaultValues()[this.qsParams.playerType],e):"object"==typeof this.config.defaultValuesManager.getDefaultValues().onsite[e]&&null!==this.config.defaultValuesManager.getDefaultValues().onsite[e]?this.config.defaultValuesManager.getDefaultValues().onsite[e][window[this.config.deviceDetectionVar]]:this.config.defaultValuesManager.getDefaultValues().onsite[e])}getVideoAttr(e){return this.videoAttributes&&this.videoAttributes[e]}getType(e){return["gazzetta","gazzanet"].indexOf(e)>-1?"gazzetta":"corriere"}getPlayerHeight(e){return Math.round(e*this.config.aspectRatio.height/this.config.aspectRatio.width)}getPlayerWidth(e){return Math.round(this.config.aspectRatio.width*e/this.config.aspectRatio.height)}getPlayerContainerDimensions(e,t){let i={};return i.width=document.querySelector("#"+e).clientWidth,i.height=Math.round(i.width*t.height/t.width),i}getDFPCmsId(e){let t="";return Object.prototype.hasOwnProperty.call(this.cmsIdMap,e.newspaper.id)&&(t="vid="+e.id,t+="&cmsid="+this.cmsIdMap[e.newspaper.id]),t}getCookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}};const l=class extends d{constructor(e,t,i,o=!0){console.log("------------- VIDEOLOADER RCS --------------"),super(e,t,i,o),this.playerType="rcs"}playNextVideo(e){(0,n.gB)(e.videoParams.url),(0,n.yD)("PLAY NEXT VIDEO: URL",e.videoParams.url)}};var c=i(141),h=i(2720),u=i(3008);class p{constructor(e,t,i,o=!0){switch((0,u.fc)(i),i&&i.providerSrc){case"dugout":return new c.Z(e,t,i,o);case"sky":return new h.Z(e,t,i,o);case"rcs":return new l(e,t,i,o)}}}var v=i(7404),m=(i(6337),i(760));const g=class{constructor(e,t){this.videoManagerCount=1,void 0===window.videoManagerCount?window.videoManagerCount=1:(window.videoManagerCount+=1,this.videoManagerCount=window.videoManagerCount),this.playerContainer=e,this.playerContainerId=r._G.playerId,this.qsParams={playerType:window.gznPartnerId?`gazzanet_${window.gznPartnerId}`:"tv"},this.videoAttributes=t,this.playlist=null,this.playlistTitle=null,this.currentPlayer=null,this.currentVideo=null,this.isCorriere=(0,r.tF)(e),this.isGazzetta=(0,r.ns)(e),this.isNewspaperRcs=(0,r.Eg)(e),this.currentVideoPlayerLoader=null,this.propsResolver=new o.g,this.advAdexFirstCall=!0,this.abTestCorriereEnabled=!1,this.abTestGazzettaEnabled=!1,this.playerLoaderConfig={defaultValuesManager:new o.IG,aspectRatio:{width:640,height:360},defaultImage:"/includes2013/LIBS/css/assets/video/transparent-pixel.png",deviceDetectionVar:"device",plSzAbTest:this.isAbTestEnabled()&&window.plSzAbTest?window.plSzAbTest:void 0,sizeClass:this.isAbTestEnabled()&&window.plSzAbTest?"is--"+window.plSzAbTest:void 0,getErrorMsg:(e,t)=>{(0,m.getEventsBus)().error.dispatch({message:e});let i=document.createElement("div");i.classList.add("msg"),i.setAttribute("style","display: block; z-index: 1;"),i.innerHTML=e;let o=document.querySelector(`#${t}`);o.innerHTML="",o.setAttribute("style","background-color:black;position:relative"),o.append(i),"mobile"===window[this.playerLoaderConfig.deviceDetectionVar].innerHTML&&document.querySelector(`#${this.playerContainerId}`).setAttribute("style","background-color:black;position:relative;min-height:220px;height:100%;")},deviceCompanionPos:{desktop:"&ciu_szs=2x2,300x250,728x90,940x60,940x90,940x250,970x250,1920x1080",tablet:"&ciu_szs=2x2,300x250,728x90,940x60,940x90,940x250,970x250",mobile:"&ciu_szs=2x2"},isEmbed:this.isEmbed(),video360:{isVideo360:!1,VRMode:!1,postMsgEvents:{FINE_VISIONE:"fine_visione",PLAY:"play",FIRST_STEP_OK:"first_step_ok"}},embedFixedDimensions:{corrieremobileapp:{width:375,height:252}},loadInfoVideo:function(){}};const i={useractive:()=>{},userinactive:()=>{},nopostroll:()=>{},adserror:()=>{},"ad-ended":()=>{},playing:()=>{this.checkRefreshGazza(),this.sendPostMessage("it.chili.player.event.video.playing","*")},pause:()=>{this.checkRefreshGazza(!0),this.sendPostMessage("it.chili.player.event.video.pause","*")},started:()=>{this.sendPostMessage("it.chili.player.event.video.started","*")},adsbeforerequest:()=>{this.sendPostMessage("it.chili.player.event.video.adsbeforerequest","*")},"preroll-started":()=>{},"postroll-started":()=>{}},a=new o.Xi(["ready","preroll-started","postroll-started","started","preroll-started","postroll-started","ended","pause","paused","played","step25","step50","step75","stepLive","playing","seeked","seeking","waiting","skippable-state-changed","ad-skipped","adserror","adend"],this);this.eventListeners=this.initEventListeners([a.getEvents(),i])}initEventListeners(e){let t={};return e.forEach((e=>{for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]||(t[i]=[]),t[i].push(e[i]))})),t}initialize(e,t,i=!0){console.log(`initializing videoPlayerManager N${this.videoManagerCount}`),this.video=e,t.tipo_video||(t.tipo_video="embed"),"embed"===window.extVideoPlayer&&(this.qsParams=Object.assign({},this.qsParams,this.readQSParameter()),"false"!==this.qsParams.mute&&"false"!==this.qsParams.muted||(t.muted=!1),"true"!==this.qsParams.mute&&"true"!==this.qsParams.muted&&"true"!==this.qsParams.autoPlay||(t.muted=!0),this.qsParams&&this.qsParams.tipo_video&&(t.tipo_video=this.qsParams.tipo_video)),console.log("Video source",e?.providerSrc),this.currentVideoPlayerLoader||(this.currentVideoPlayerLoader=new p(this.playerLoaderConfig,t,e,i)),this.setPlayerContainer(),this.currentVideo=e,this.qsParams.playerType||(this.qsParams.newspaper?this.qsParams.playerType=this.qsParams.newspaper:this.qsParams.playerType=this.playerLoaderConfig.defaultValuesManager.defaultEmbedPlayerType),this.loadVideo(this.currentVideo)}loadVideo(e){const t=document.querySelector(`#${this.playerContainerId}`);t&&(this.currentPlayer&&this.currentVideoPlayerLoader.destroyPlayer(this.currentPlayer),window.currentPlayer&&this.currentVideoPlayerLoader.destroyPlayer(window.currentPlayer),this.cleanVideoContainer(this.playerContainer),this.isCorriere=(0,r.tF)(t),this.isCorriere&&t.classList.contains("custom-video-sticky")&&(this.qsParams.playerType="tvSticky"),this.setCurrentPlayer(this.currentVideoPlayerLoader.loadPlayer(this.playerContainerId,e,this.qsParams,this.videoAttributes)),window.player=this.currentPlayer,this.currentPlayer&&this.currentPlayer.video&&this.currentPlayer.video.setAttribute("title",e.title),this.advAdexFirstCall=!1,this.isCorriere&&(this.onVideoPlaying(document.querySelector(`#${this.playerContainerId}`)),void 0!==e.liveStatus&&"LIVE"===e.liveStatus||(0,r.Gv)()))}destroyPlayer(){this.currentVideoPlayerLoader.destroyPlayer(this.currentPlayer)}cleanVideoContainer(e){e.innerHTML=""}rollbackVideoThumb(e){e.removeAttribute("id"),e.removeAttribute("style"),e.removeAttribute("data-player-active"),e.classList.remove("rcs-video"),(0,r.P5)(e).adaptive&&"mobile"===window.device&&e.parentElement.classList.remove("play-video"),(0,r.$L)(),this.triggerRollbackVideo(e);const t="gazzetta"===document.body.getAttribute("data-newspaper");(0,r.P5)(e).tipo_video&&"embed"===(0,r.P5)(e).tipo_video&&!0===t&&(document.querySelector(".icon-gazzetta-g-play").style.display="none",document.querySelector("span.icon").innerHTML='<i class="icon-gazzetta-g-restart fa-5x"></i>')}triggerRollbackVideo(e){const t=new CustomEvent("RCSVideoManager:rollback",{detail:e});document.dispatchEvent(t)}setPlayerContainer(){this.playerContainer.setAttribute("id",this.playerContainerId),this.playerContainer.classList.add("rcs-video")}setCurrentPlayer(e){e&&(this.currentPlayer=e,this.attachEventListeners())}getCurrentPlayer(){return this.currentPlayer}attachEventListeners(){if(this.eventListeners){const e=this.videoManagerCount;for(let t in this.eventListeners)Object.prototype.hasOwnProperty.call(this.eventListeners,t)&&this.currentPlayer.on(t,(i=>{console.log("Event "+t,"VideoPlayerManger N "+e),this.eventListeners[t].forEach((e=>{try{switch(t){case"ready":this.onVideoReady();break;case"ended":this.onVideoEnded();break;case"playing":default:break;case"played":this.onVideoPlayed()}e.call(this,i)}catch(e){console.error(e)}}))}));this.areEventListenersAttached=!0}}onVideoReady(){const e=this.playerContainer.querySelector(".ima-countdown-div");null!==e&&e.setAttribute("style","font-size: 11px;"),document.dispatchEvent(new CustomEvent("RcsVideoExt:videoLoaded"))}onVideoEnded(){const e=document.querySelector(".rcs-video"),{playlist:t}=(0,r.P5)(e),i=this.videoAttributes.tipo_video&&"embed"===this.videoAttributes.tipo_video;if(t||i||this.rollbackVideoThumb(e),i&&"mobile"!==window.device)if(this.isCorriere||this.isNewspaperRcs)t||this.rollbackVideoThumb(e);else{new v.Z(this.playerContainer,this.playerContainer,this.videoAttributes).init().catch((i=>{console.log(i),t||this.rollbackVideoThumb(e)}))}else i&&"mobile"===window.device&&(t||this.rollbackVideoThumb(e));this.sendPostMessage("it.chili.player.event.video.ended","*"),document.dispatchEvent(new CustomEvent("RcsVideoExt:end"))}onVideoPlayed(){this.playerLoaderConfig.video360.isVideo360&&this.sendPostMessage(this.playerLoaderConfig.video360.postMsgEvents.PLAY)}isEmbed(){return!0}getVideoUrl(e){let t=e.url;return""!==e.canonicalUrl&&e.canonicalUrl!==e.url&&(t=e.canonicalUrl),t.replace("http:","")}getEmbedUr(e){return`${window.location.protocol}//${window.location.host}/video-embed${e.id}${window.location.search}`}readQSParameter(e){const t=e||{},i=location.search.substring(1,location.search.length);if(i){i.split("&").forEach((e=>{const i=e.split("=");t[i[0]]=i[1]}))}return t}sendPostMessage(e,t="*"){window.parent&&window.parent.postMessage(e,t)}isAbTestEnabled(){return this.isCorriere&&this.abTestCorriereEnabled||this.isGazzetta&&this.abTestGazzettaEnabled}checkRefreshGazza(e=!1){if(!this.currentPlayer.options.isLive){const t=new Event("refreshGazza");let i=0;if(!e){let e=this.currentPlayer.player.duration();if(e){e=1e3*Number(e);let t=0;this.currentPlayer.player.currentTime()&&(t=Math.round(1e3*this.currentPlayer.player.currentTime())),i=e-t+5e3}}t.waitRefreshGazza=i,t.fromElement="player",document.dispatchEvent(t)}}onVideoPlaying(e){if("mobile"===window[this.playerLoaderConfig.deviceDetectionVar]){let t;this.currentPlayer.on("ready",(()=>{t=new IntersectionObserver((e=>{const{isIntersecting:t}=e[0];t||r.tF||this.currentPlayer.player.muted(!0)})),t.observe(e)})),this.currentPlayer.on("ended",(()=>{t&&t.disconnect()}))}}};class y{#e=[];constructor(e,t,i=0){this.el=e,this.video=t,this.videoPlayerManager=null,this.videoDataAttrs=null,this.playlistCurrentVideoIndex=i}destroyPlayer(){this.videoPlayerManager.rollbackVideoThumb(this.el)}getVideoPlayerManager(e,t){let i;const o=this.#e.findIndex((t=>t.playerElement===e));return o<0?(i=new g(e,t),this.#e.push({instance:i,playerElement:e})):i=this.#e[o].instance,i}load(){this.videoDataAttrs=(0,r.ES)((0,r.P5)(this.el));const e=void 0!==this.videoDataAttrs.playlist,t=!e;this.videoPlayerManager=this.getVideoPlayerManager(this.el,this.videoDataAttrs),this.videoPlayerManager.initialize(this.video,this.videoDataAttrs,t),document.dispatchEvent(new CustomEvent("RCSVideoManager:startVideo",{detail:this.videoPlayerManager})),this.el.setAttribute("data-player-active",!0),e&&(this.videoDataAttrs.upnextInSeconds=5,Promise.resolve().then(i.bind(i,2597)).then((({default:e})=>{new e(this.el,this.videoPlayerManager,this.playlistCurrentVideoIndex).load()})))}}var f=i(6454),b=i.n(f),w=(i(2167),i(1590),i(6058)),P=i.n(w);i(813);class x{#t;#i="player-init";#o=null;#r=[];#a=null;constructor(e){this.#t=e}async initVideoTipology(e){const t=(0,r.P5)(e);if(this.isCorriere=(0,r.tF)(e),(0,r.Zs)(e)){const{newspaper:i,uuid:o}=t,a=await(0,r.kd)(i,o);if(this.setVideoPlaceholderImage(e,a,t.coverTemplate),(0,r.Ds)(a)){"WAITING"!==a.liveStatus&&"CLOSED"!==a.liveStatus||this.fallbackNoVideo(e,a);const{autoplay:i=!1}=t;this.handlePlayerPlay(e,a,i)}}}setVideoPlaceholderImage(e,t){t.thumbnailSrc=(0,r.ie)(e,t),e.innerHTML=`      \n      <div class="media__image">\n        <a href="${t.url}" data-trkmenu="&amp;lid=nd&amp;lpos=foglia:video-embed">\n        <figure class="has-media image is-16by9">\n          <img class="is-opacity" alt="${t.description}" \n          src="${t.thumbnailSrc}">\n          <span class="icon has-text-white">\n            <i class="icon-corriere-play"></i>\n          </span>\n          <figcaption></figcaption>\n        </figure></a></div>`}handlePlayerPlay(e,t,i){e.addEventListener("click",(i=>{i.preventDefault(),(0,r.E2)(e,i)&&this.loadVideo(e,t)}));new IntersectionObserver((o=>{const{isIntersecting:r}=o[0],a=null===e.getAttribute("data-stop-autoplay"),s=null===e.getAttribute("data-player-active");i&&r&&a&&s&&this.loadVideo(e,t)}),{rootMargin:"100px"}).observe(e)}getVideoDefaultManager(e,t){let i;const o=this.#r.findIndex((t=>t.playerElement===e));return o<0?(i=new y(e,t),this.#r.push({instance:i,playerElement:e})):i=this.#r[o].instance,i}loadVideo(e,t){(0,r.P5)(e).adaptive&&"mobile"===window.device&&(0,r.Eq)(e),this.handlePlayerDestroy(),this.#a=e.innerHTML,this.#o=this.getVideoDefaultManager(e,t),this.#o.load()}handlePlayerDestroy(){this.#o&&this.#o.el.getAttribute("data-player-active")&&this.#o.destroyPlayer()}fallbackNoVideo(e,t){const i=(0,r.nV)();i.classList.add("fallback-novideo"),"mobile"===window.device&&i.classList.add("is--mobile");const o=new Date(t.mediaLiveStart);i.innerHTML=b()({liveStatus:t.liveStatus,day:o.getDate(),month:P().months[o.getMonth()],year:o.getFullYear(),hours:o.getUTCHours(),minutes:o.getUTCMinutes()}),e.appendChild(i)}rollBackVideoTemplate(e){e.innerHTML=this.#a}deviceVideo(){let e;return/iPad|Kindle|Android|(P|p)lay(B|b)ook|Windows.*NT.*Touch/.test(navigator.userAgent)&&(e="tablet"),/iPhone|Android.*Mobile|IEMobile|(B|b)lack(B|b)erry|Windows.*Phone/.test(navigator.userAgent)&&(e="mobile"),e="desktop",e}addPlayers(){Array.from(document.querySelectorAll(this.#t)).forEach((e=>{e.classList.contains(this.#i)||(e.classList.add(this.#i),this.initVideoTipology(e))}))}render(){window.privacyok=Boolean((0,n.ej)("euconsent-v2"))||Boolean((0,n.ej)("eupubconsent-v2"))||Boolean((0,n.K5)(/(euconsent-v2|eupubconsent-v2)/)),window.DeviceVideo=this.deviceVideo(),(0,r.Kw)((e=>this.rollBackVideoTemplate(e)))}}},6395:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>k});var o=i(4761),r=i(8812),a=i(437),s=i.n(a),n=i(7522),d=i.n(n),l=i(9700),c=i.n(l),h=i(9330),u=i.n(h),p=i(6454),v=i.n(p),m=i(7142),g=i.n(m),y=(i(2167),i(1590),i(8012),i(6058)),f=i.n(y),b=i(8935),w=i(5209),P=i(8615),x=i(447);class k{constructor(e){this.myEls=[...document.querySelectorAll(e)],this.videoStickyManager=null,this.videoDefaultManager=null,this.currentTemplate=null,this.currentStickyTemplate=null,this.prevUuid=null,this.playlistCurrentVideoIndex=0,this.config={aspectRatio:{width:640,height:360},defaultImage:"/includes2013/LIBS/css/assets/video/transparent-pixel.png"}}async initVideoTipology(e){const t=(0,r.P5)(e);if(this.isCorriere=(0,r.tF)(e),(0,r.Zs)(e)){this.getPlaylistinPage(t);const{newspaper:i,uuid:o}=t;try{const a=await(0,r.kd)(i,o);if(this.setVideoPlaceholderImage(e,a,t.coverTemplate),this.setVideoPlaceholderIframe(a),!a.id)return void this.manageMissingVideo(e,o);this.getInfoFirstVideo(a,t);const s=(0,r.Ds)(a);!0===s?((0,r.rQ)()&&this.updateCurrentPlaylistIndex(a),"WAITING"===a.liveStatus||"CLOSED"===a.liveStatus?this.fallbackNoVideo(e,a):t.carousel?this.loadCarouselVideos(e,a,t):(0,r.Nr)((0,r.P5)(e))&&(0,r.RL)(e)&&(!window.isGazzetta||window.isGazzetta&&"true"!==(0,P.ej)("rcsad_fast"))?this.loadStickyVideo(e,a):this.loadDefaultVideo(e,a)):this.appendUnplayableVideoInfo(e,s.reason)}catch(t){this.manageMissingVideo(e,o)}}}getPlaylistinPage(e){if(r.tF&&(0,b.gt)(e)){if((0,P.yD)("hasPlaylistInPage",(0,b.gt)(e)),!(0,b.dA)(e)){(0,P.yD)("hasAttrSiteHp",(0,b.dA)(e));const t={video:[window.videoApertura1,window.videoApertura2,window.videoApertura3,window.videoApertura4]};window.playlist={videos:t}}if(window.playlist&&window.playlist.videos&&window.playlist.videos.video[0]){const t=window.playlist.videos.video[0].id;e.uuid=t,window.uuid=t}(0,P.yD)("playlist sitehp:",window.playlist)}}getInfoFirstVideo(e,t){if((0,b.gt)(t)){const t=document.querySelector("#title-link"),i=document.querySelector("#channelTitle"),o=document.querySelector("#video-date"),r=(0,P.KX)(e.pubDate);t&&(t.innerHTML=e.title,t.href=e.url),i&&(i.innerHTML=e.channel.title),o&&(o.innerHTML=r)}}updateCurrentPlaylistIndex(e){const t=window.playlist.videos;if(Array.isArray(t.video))t.video.forEach(((t,i)=>{void 0!==t&&t.id===e.id&&(this.playlistCurrentVideoIndex=i,window.thisIdVideo=i)}));else if(t.video&&t.video.id)if(t.video.id===e.id)window.playlist.videos.video=[t.video.id];else{const i={id:e.id,title:e.title};window.playlist.videos.video=[i,t.video.id]}window.thisIdVideo||(window.thisIdVideo=0)}asyncIterator(e){return{next:function(){return e.length?Promise.resolve({value:e.shift(),done:!1}):Promise.resolve({done:!0})}}}async getFirstPlayableVideo(e,t){if(!window.playlist||!window.playlist.videos||!window.playlist.videos.video)return!1;const i=window.playlist.videos.video,o=i.findIndex((e=>e.id===t.uuid));let a;-1!==o?(a=i.filter(((e,t)=>t>=o)),a.length||(a=i)):a=i;const s=(0,r.ii)(a);let n;for await(const t of s){const i=await(0,r.kd)(e,t.id);if(i.id){n=i;break}}return n}manageMissingVideo(e,t){const i="development"===f().environment&&!(0,x.Z)("forceProd"),o=window.location.href,a=(0,r.y)(o,"forceProd",t);this.appendUnplayableVideoInfo(e,{title:"Il video non  disponibile",subtitle:i?"Vuoi forzare caricamento da produzione? Aggiungi all'URL:":"",errorcode:i?`?forceProd=${t}`:"",errorlink:i?a:""})}appendUnplayableVideoInfo(e,t){let i={title:"Il video non  disponibile",subtitle:"",errorcode:"",errorlink:"",...t};const o=document.createElement("div");o.classList.add("not-available"),o.innerHTML=g()({data:i}),Array.from(e.querySelectorAll(".icon")).forEach((e=>{e.style.display="none"})),e.appendChild(o)}setVideoPlaceholderImage(e,t,i){"articleEmbed"===i?(t.thumbnailSrc=(0,r.ie)(e,t),e.innerHTML=s()(t)):"longformvideoEmbed"===i&&(t.thumbnailSrc=(0,r.ie)(e,t),e.innerHTML=d()(t))}setVideoPlaceholderIframe(e){const t=".js-dynamic-src",i=document.querySelector(t);if(!i)return;const o=i.querySelector("img");if(!o)return;const r=(0,b.BF)(),a=!r||!r.autosize||r.autosize;let s=(0,w._E)(t,window[this.config.deviceDetectionVar],this.config.aspectRatio,a),n=(0,w.Qk)(s.width,e,this.config);o.src=n,(0,P.yD)("POSTER URL",n)}loadStickyVideo(e,t){this.handlePlayerDestroy(),this.currentStickyTemplate=e.innerHTML,this.videoStickyManager=new o.Bu(e,t),this.videoStickyManager.load(),document.addEventListener("RCSVideoManager:startSticky",(()=>{this.videoDefaultManager&&this.videoDefaultManager.destroyPlayer()}));const i=(0,r.ES)((0,r.P5)(e));e.addEventListener("click",(t=>{t.preventDefault(),(0,r.E2)(e,t)&&(this.handlePlayerDestroy(),this.videoStickyManager.loadVideoSticky(i))}))}loadDefaultVideo(e,t){(0,P.yD)("loadDefaultVideo",t);const{autoplay:i,loadOnTitle:o}=(0,r.P5)(e);if(window.extVideoPlayer){if("embed"===window.extVideoPlayer){let{autoPlay:r}=(0,b.BF)(),a=i||r&&"true"===r;(0,P.yD)("type page isEmbed",window.extVideoPlayer),o&&this.loadOnTitle(e,t,o),this.handlePlayerPlay(e,t,a)}}else{const r=!0===i;o&&this.loadOnTitle(e,t,o),this.handlePlayerPlay(e,t,r)}}loadOnTitle(e,t,i){const o=i.top?e.previousElementSibling:e.nextElementSibling;null!==o&&o.addEventListener("click",(i=>{i.preventDefault(),(0,r.E2)(e,i)&&this.loadVideo(e,t,i)}))}handlePlayerPlay(e,t,i,o=!1){const a=(0,r.P5)(e),s=(0,b.BF)(),n=a.tipo_video&&"embed"===a.tipo_video,d=t.liveStatus&&"LIVE"===t.liveStatus,l=s.playerType&&"homepage"===s.playerType;if(t&&t.newspaper&&"gazzetta"===t.newspaper.id&&"true"===(0,P.ej)("rcsad_fast")){const t=(0,r.ES)((0,r.P5)(e));t.sticky&&"pagina_video"!==t.sticky.tipo_video&&(i=!1)}e.addEventListener("click",(i=>{i.preventDefault(),(0,r.E2)(e,i)&&this.loadVideo(e,t,i)})),o?(this.carouselIsEnable=!0,this.loadVideo(e,t)):this.carouselIsEnable=!1;const c=new IntersectionObserver((o=>{const{isIntersecting:r}=o[0],a=null===e.getAttribute("data-stop-autoplay"),s=null===e.getAttribute("data-player-active"),n=e.querySelector(".overlay-next-video");null!==n&&n.remove(),e.classList.contains("rcs-video")&&this.videoDefaultManager.videoPlayerManager.getCurrentPlayer().player&&this.videoDefaultManager.videoPlayerManager.getCurrentPlayer().player.isReady_?t.liveStatus&&"LIVE"!==t.liveStatus&&this.videoDefaultManager.videoPlayerManager.getCurrentPlayer().play():i&&r&&a&&s?this.loadVideo(e,t):i&&t.liveStatus&&"LIVE"===t.liveStatus&&a&&s&&this.isCorriere&&"desktop"===window.device&&(this.loadVideo(e,t),this.videoDefaultManager.videoPlayerManager.getCurrentPlayer().options.muted=!0)}),{rootMargin:"100px"});this.isCorriere&&n&&d&&l?(this.loadVideo(e,t),this.videoDefaultManager.videoPlayerManager.getCurrentPlayer().options.muted=!0):c.observe(e)}loadVideo(e,t){(0,r.P5)(e).adaptive&&"mobile"===window.device&&(0,r.Eq)(e),this.handlePlayerDestroy(),this.currentTemplate=e.innerHTML,this.isCorriere&&"desktop"===window.device?void 0!==t.liveStatus&&"LIVE"===t.liveStatus||(0,r.Gv)():window.isGazzetta||(0,r.Gv)(),void 0!==t.liveStatus&&"LIVE"===t.liveStatus&&document.dispatchEvent(new CustomEvent("RcsVideoLiveIsOn")),this.videoDefaultManager=new o.Yf(e,t,this.playlistCurrentVideoIndex),this.videoDefaultManager.load()}handlePlayerDestroy(){this.videoStickyManager&&this.videoStickyManager.currentPlayer?(this.videoStickyManager.destroyPlayer(),this.videoStickyManager.currentPlayer=null):this.videoDefaultManager&&this.videoDefaultManager.el.getAttribute("data-player-active")&&this.videoDefaultManager.destroyPlayer()}loadCarouselVideos(e,t,i){e.addEventListener("click",(e=>{if(e.preventDefault(),this.prevUuid!==i.uuid){this.prevUuid=i.uuid;const e=i.carousel&&i.carousel.selector||".frame-video",o=document.querySelector(e);o.setAttribute("data-video-carousel","true");const a=(0,r.nV)();o.appendChild(a),o.firstChild.setAttribute("data-config",JSON.stringify(i)),this.setVideoPlaceholderImage(o.firstChild,t,i.coverTemplate),this.handlePlayerPlay(o.firstChild,t,!1,!0),this.attachTitle(o,t),o.classList.add("bck-media-news")}}))}attachTitle(e,t){let i=e.querySelector("[data-video-title]"),o=(0,r.nV)();if(o.classList.add("content-header"),null===i&&(i=(0,r.nV)(),i.setAttribute("data-video-title",!0),i.classList.add("media-news__content")),i.innerHTML=c()({title:t.title,videoUrl:t.url}),o.innerHTML=u()({title:t.title,videoUrl:t.url}),e.appendChild(i),this.isCorriere&&"mobile"===window.device){i.insertBefore(o,i.childNodes[0]);const e=new CustomEvent("RcsVideoManager:initSocialBar");document.dispatchEvent(e)}}fallbackNoVideo(e,t){const i=(0,r.nV)();i.classList.add("fallback-novideo"),"mobile"===window.device&&i.classList.add("is--mobile");const o=new Date(t.mediaLiveStart),a=o.getDate(),s=f().months[o.getMonth()],n=o.getFullYear(),d=o.getUTCHours(),l=o.getUTCMinutes();i.innerHTML=v()({liveStatus:t.liveStatus,day:a,month:s,year:n,hours:d,minutes:l}),e.appendChild(i)}rollBackVideoTemplate(e){const t=e.parentElement.getAttribute("data-video-carousel"),i=e.classList.contains("custom-video-sticky");if(t){let t=e.parentElement.querySelector("[data-video-title]");e.parentElement.classList.remove("bck-media-news"),t.innerHTML=""}else this.prevUuid=null,e.innerHTML=i?this.currentStickyTemplate:this.currentTemplate}render(){this.myEls.forEach((e=>this.initVideoTipology(e))),(0,r.Kw)((e=>this.rollBackVideoTemplate(e)))}}},8138:(e,t,i)=>{const o=i(6395),{initialize:r,getEventsBus:a}=i(760);r({videoManager:{selector:".player"},eventsBus:{prefix:"RcsVideoManager"}}),a().error.addListener((e=>console.log(e.detail?.message))),"IntersectionObserver"in window?e.exports=o:i.e(429).then(i.bind(i,4136)).then(e.exports=o)},7404:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var o=i(8812),r=i(5701),a=i.n(r);i(5937);class s{constructor(e,t,i){this.el=e,this.newspaper=i.newspaper||null,this.uuid=i.uuid,this.counter=5,this.isMobile="mobile"===window.device}async init(){try{const e=await(0,o.Fw)(this.newspaper,this.uuid);if(e&&e.length>=2){const t=e.slice(0,2),i=e.length>4?e.slice(2,4):null;this.el.innerHTML=a()({correlatedListFirst:t,correlatedListSecond:i})}}catch(e){throw new Error(`Unable to init the Correlated component. Reason: ${e.message}`)}}}},6086:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var o=i(8812);const r=class{constructor(){this.hLevelsVideo=["","feed","channel","newspaper"]}resolve(e,t){console.debug("trying resolving property "+t);let i=null;for(let r=0;r<e.length;r++)if(null!==(0,o.MX)(e[r].hierarchicalAssetProperties,t)){i=e[r].hierarchicalAssetProperties[t];break}return i}resolveVideoProperty(e,t){console.debug(`Trying resolving property [${t}] on video [${e.id}]`);let i=null;for(let r=0;r<this.hLevelsVideo.length;r++){let a=null===this.hLevelsVideo[r]||""===this.hLevelsVideo[r]?"hierarchicalAssetProperties":`${this.hLevelsVideo[r]}.hierarchicalAssetProperties`;a=`${a}.${t}`;let s=(0,o.MX)(e,a);if(null!=s){i=s;break}}return i}}},1877:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var o=i(8812),r=i(6086),a=i(5209),s=i(8615);const n=class{constructor(e,t,i,o=!0){this.propsResolver=new r.Z,this.config=e||{},this.video=null,this.opts=t||{},this.showPostRoll=o,this.blockAdv=!1,this.watermaksByPlayerType={oggi:{src:"//images2.corriereobjects.it/methode_image/watermark/oggi.png",position:"UP_RIGHT",style:"width: 8.5%"},partnership_dday:{src:"//images2.corriereobjects.it/methode_image/watermark/watermark-dday.png",position:"UP_RIGHT"}},this.cmsIdMap={corriere:682,gazzetta:922},this.customDFPUrl={leitv:()=>"https://pubads.g.doubleclick.net/gampad/ads?sz=640x480&iu=/57491254/leitv.it/video/Preroll&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url=[referrer_url]&description_url="+encodeURI(this.video.canonicalUrl)+"&correlator=[timestamp]"},this.currentVideoOptions={},this.qsParams={},this.videoAttributes={}}getNewspaperVideoId(){return this.video&&this.video.newspaper&&this.video.newspaper.id}loadPlayer(e,t,i,o){this.qsParams=i,this.videoAttributes=o,this.video=t;let r=null;if("gazzetta"===this.getNewspaperVideoId()&&"true"===(0,s.ej)("rcsad_fast")&&(this.video.hierarchicalAssetProperties.blockAdv=!0),"corriere"===this.getNewspaperVideoId()&&window.localStorage.getItem("refreshAdvCookie")&&"LIVE"===this.video.liveStatus&&(this.video.hierarchicalAssetProperties.blockAdv=!0),this.currentVideoOptions=this.createOptions(e,t),this.loadInfoVideo(this.video),0===Object.keys(this.currentVideoOptions.src).length)return this.getErrorMsg("VIDEO NON DISPONIBILE",e),null;let a=this.isVideoActive(t);return!1===a.status?(this.getErrorMsg(a.msg,e),null):(this.currentVideoOptions.videoParams=this.video,window.extVideoPlayer&&"embed"===window.extVideoPlayer&&(this.qsParams.mute&&(this.qsParams.muted=this.qsParams.mute),void 0===this.qsParams.mute&&(this.qsParams.muted="true"),this.currentVideoOptions=this.mergeVideoOptions()),r=window.playerFactory?window.playerFactory.generatePlayer(this.currentVideoOptions):new RCSVideo(this.currentVideoOptions),window.currentPlayer=r,r)}mergeVideoOptions(){const e=this.currentVideoOptions;return["playerType","muted","autoPlay","disableFullScreen","skinColor"].forEach((t=>{this.qsParams[t]&&"playerType"!==t?e[t]=this.getPlayerProp(t):this.qsParams[t]&&"playerType"===t&&(e[t]=this.qsParams[t])})),e}loadPlaylist(e,t){return this.videoAttributes=t,this.video=e,this.currentVideoOptions=this.createOptions(o._G.playerId,this.video),this.loadInfoVideo(this.video),this.currentVideoOptions.videoParams=this.video,this.currentVideoOptions}loadInfoVideo(e){this.config.loadInfoVideo.call(this,e)}destroyPlayer(e){e.destroy()}videoHasBlockAdv(e){void 0!==this.qsParams.blockAdv?this.getBlockAdvFromQueryString():void 0!==this.videoAttributes.blockAdv?this.getBlockAdvFromDataAttr():void 0!==this.config.defaultValuesManager.getValue("blockAdv",this.qsParams.playerType)?(console.log("BLOCK ADV DEBUG: from default values",this.config.defaultValuesManager.getValue("blockAdv",this.qsParams.playerType)),!1===this.config.defaultValuesManager.getValue("blockAdv",this.qsParams.playerType)?this.getBlockAdvFromVideoProperty(e):this.blockAdv=!0):void 0!==this.propsResolver.resolveVideoProperty(e,"blockAdv")&&this.getBlockAdvFromVideoProperty(e)}getBlockAdvFromQueryString(){console.log("BLOCK ADV DEBUG: from query string",this.qsParams.blockAdv),"true"===this.qsParams.blockAdv?this.blockAdv=!0:"false"===this.qsParams.blockAdv&&(this.blockAdv=!1)}getBlockAdvFromDataAttr(){console.log("BLOCK ADV DEBUG: from data attribute",this.videoAttributes.blockAdv),this.blockAdv=this.videoAttributes.blockAdv}getBlockAdvFromVideoProperty(e){console.log("BLOCK ADV DEBUG: from json video property",this.propsResolver.resolveVideoProperty(e,"blockAdv")),this.blockAdv=this.propsResolver.resolveVideoProperty(e,"blockAdv")}createOptions(e,t){this.videoAttributes.uuid=t.id,window.RCSVideoManagerExternal&&navigator.userAgent.indexOf("Android",0)>=0&&(this.videoAttributes.tech="Html5");let i=(0,a._E)(o._G.containerPlayer,window[this.config.deviceDetectionVar],this.config.aspectRatio,this.qsParams.autosize),r=(0,a.Qk)(i.width,this.video,this.config),s={};try{s=this.getVideoSrc()}catch(t){this.getErrorMsg("VIDEO NON DISPONIBILE",e)}let n={id:e,src:s,width:i.width,height:i.height,poster:r,watermark:this.getWatermark(t),type:this.getType(t.newspaper.id),isLive:"LIVE"===t.mediaType,skinColor:"#003267"};if(this.videoHasBlockAdv(t),console.log("BLOCK ADV DEBUG PRIORITY RESULT:",this.blockAdv),!this.blockAdv&&!this.config.video360.isVideo360&&this.isCookiePolicyAccepted())try{let t,i,o=this.getPlayerContainerDimensions(e,this.config.aspectRatio),r={};if(window.extVideoPlayer&&"embed"===window.extVideoPlayer?(r.video_autoplay=this.qsParams.autoPlay||this.videoAttributes.autoplay,r.gestione_AMP=this.qsParams.gestione_AMP||!1,r.dimesione_player=o.width+"x"+o.height):(r.video_autoplay=this.videoAttributes.autoplay,r.dimesione_player=o.width+"x"+o.height,this.config.plSzAbTest&&(r.plSzAbTest=this.config.plSzAbTest)),t=this.getDFPData({customParams:r}),t){if(i=t.url,i&&(n.preRollUrl=i.replace("{TYPE_OF_ROLL}","/preRoll"),this.showPostRoll&&!this.videoAttributes.playlist&&(n.postRollUrl=i.replace("{TYPE_OF_ROLL}","/postRoll")),n.prebId=t.prebid,window.dfpTagConf&&window.dfpTagConf.overlayVidAd)){let e=i.replace("{TYPE_OF_ROLL}","/position2");e=e.replace("?sz=640x360","?sz=480x70"),n.inLogoUrl=e,console.log("inLogoUrl DFP: "+n.inLogoUrl)}}else console.log("%c[RCS_VIDEOMANAGER] Warning: cannot get dfpData","background: red; color: white;")}catch(e){console.warn("Problem during creation of DFP Url",e)}return this.qsParams.inactivityTimeout&&(this.videoAttributes.inactivityTimeout=this.qsParams.inactivityTimeout),n.autoplay&&this.config.isEmbed&&(n.autoplayMute=!0),Object.assign(n,this.videoAttributes)}setFirstVideoSrc(e,t){for(let i=0;i<t.length;i++)if(t[i].value.endsWith(".mp4")){e.mp4=t[i].value;break}}getVideoSrc(){let e={},t=this.video.mediaProfile.mediaFile.map((e=>(e.value=e.value.toString().replace("http:",""),e)));if("AUDIO"===this.video.mediaType)for(let i=0;i<t.length;i++)t[i].value.endsWith(".mp3")&&(e.mp4=t[i].value);else{for(let i=0;i<t.length;i++)if(t[i].value.endsWith(".m3u8")){let r=(0,o.Wz)("set-segment-duration");e.m3u8=!0===r?t[i].value+"?set-segment-duration="+r:t[i].value}if(this.video.mediaProfile.publishType&&"TRANSCODING"===this.video.mediaProfile.publishType){for(let i=0;i<t.length;i++)if(t[i].value.endsWith(".mp4")){let o=t[i].value.substring(t[i].value.lastIndexOf("_")+1,t[i].value.lastIndexOf("k."));if(800===parseInt(o,10)){e.mp4=t[i].value;break}o<800&&(e.mp4=t[i].value)}e.mp4||this.setFirstVideoSrc(e,t)}else this.setFirstVideoSrc(e,t)}for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t]=e[t].replace("media2vam.corriere.it.edgesuite.net","media2vam-corriere-it.akamaized.net").replace("media.youreporter.it.edgesuite.net","media-youreporter-it.akamaized.net"));return e.mp4&&(e.mp4=e.mp4.replace("media2vam.gazzetta.it.edgesuite.net","media2vam-gazzetta-it.akamaized.net"),e.mp4=e.mp4.replace("media2.gazzanet.gazzetta.it.edgesuite.net","media2-gazzanet-gazzetta-it.akamaized.net"),e.mp4=e.mp4.replace("gazzettapmd.gazzetta.it.edgesuite.net","gazzettapmd-gazzetta-it.akamaized.net"),e.mp4=e.mp4.replace("media2vam.corbologna.corriere.it.edgesuite.net","media2vam-bologna-corriere-it.akamaized.net"),e.mp4=e.mp4.replace("media2vam.corfiorentino.corriere.it.edgesuite.net","media2vam-fiorentino-corriere-it.akamaized.net"),e.mp4=e.mp4.replace("media2vam.cormezzogiorno.corriere.it.edgesuite.net","media2vam-mezzogiorno-corriere-it.akamaized.net"),e.mp4=e.mp4.replace("media2vam.corveneto.corriere.it.edgesuite.net","media2vam-veneto-corriere-it.akamaized.net"),e.mp4=e.mp4.replace("media2.oggi.it.edgesuite.net","media2-oggi-it.akamaized.net"),e.mp4=e.mp4.replace("media2.quimamme.it.edgesuite.net","media2-quimamme-it.akamaized.net"),e.mp4=e.mp4.replace("media2.amica.it.edgesuite.net","media2-amica-it.akamaized.net"),e.mp4=e.mp4.replace("media2.living.corriere.it.edgesuite.net","media2-living-corriere-it.akamaized.net"),e.mp4=e.mp4.replace("media2.style.corriere.it.edgesuite.net","media2-style-corriere-it.akamaized.net"),e.mp4=e.mp4.replace("media2.iodonna.it.edgesuite.net","media2-iodonna-it.akamaized.net")),this.transformSrc(e)}transformSrc(e){var t={"advrcs-vh.akamaihd":"","corriere-f.akamaihd":"","corrierepmd-corriere-it.akamaized":"","corrierepmd.corriere.it.edgesuite":"","corrprotetto-vh.akamaihd":"","gazzetta-f.akamaihd":"","gazzettapmd-gazzetta-it.akamaized":"","gazzprotetto-vh.akamaihd":"","periodici-f.akamaihd":"","periodicisecure-vh.akamaihd":"","videocoracademy-vh.akamaihd":"","corriere-f.akamaihd.net":""},i={"videoamica-vh.akamaihd":"amica","media2-amica-it.akamaized":"amica","corrierevam-vh.akamaihd":"corriere","media2vam-corriere-it.akamaized":"corriere","cormezzogiorno-vh.akamaihd":"corrieredelmezzogiorno","media2vam-mezzogiorno-corriere-it.akamaized":"corrieredelmezzogiorno","corveneto-vh.akamaihd":"corrieredelveneto","media2vam-veneto-corriere-it.akamaized":"corrieredelveneto","corbologna-vh.akamaihd":"corrieredibologna","media2vam-bologna-corriere-it.akamaized":"corrieredibologna","corfiorentino-vh.akamaihd":"corrierefiorentino","media2vam-fiorentino-corriere-it.akamaized":"corrierefiorentino","corinnovazione-vh.akamaihd":"corriereinnovazione","media2-gazzanet-gazzetta-it.akamaized":"gazzanet","videogazzanet-vh.akamaihd":"gazzanet","videogazzaworld-vh.akamaihd":"gazzaworld","gazzettavam-vh.akamaihd":"gazzetta","media2vam-gazzetta-it.akamaized":"gazzetta","videoiodonna-vh.akamaihd":"iodonna","media2-leitv-it.akamaized":"leitv","videoleitv-vh.akamaihd":"leitv","videoliving-vh.akamaihd":"living","media2-living-corriere-it.akamaized":"living","media2-oggi-it.akamaized":"oggi","videooggi-vh.akamaihd":"oggi","media2-quimamme-it.akamaized":"quimamme","quimamme-vh.akamaihd":"quimamme","videorunning-vh.akamaihd":"running","media2-style-corriere-it.akamaized":"style","style-vh.akamaihd":"style","videostyle-vh.akamaihd":"style","media2-stylepiccoli-it.akamaized":"stylepiccoli","stylepiccoli-vh.akamaihd":"stylepiccoli","doveviaggi-vh.akamaihd":"viaggi","media2-doveviaggi-it.akamaized":"viaggi","media2-vivimilano-corriere-it.akamaized":"vivimilano","vivimilano-vh.akamaihd":"vivimilano","media2-youreporter-it.akamaized":"youreporter"};if(e.m3u8&&-1===e.m3u8.indexOf("rcsquotidiani2-lh.akamaihd")&&e.mp4&&e.mp4.indexOf("akamai")>0){if(e.m3u8=e.m3u8.replace(".net//",".net/"),e.mp4=e.mp4.replace(".net//",".net/"),e.m3u8){let t=/(?:http:|https:)?\/\/(.*)\.net\/i(.*)/.exec(e.m3u8);e.m3u8=("https://vod.rcsobjects.it/hls/"+i[t[1]]+t[2].replace("///","/").replace("//","/")).replace(".csmil",".urlset")}if(e.mp4){let o=/(?:http:|https:)?\/\/(.*)\.net(.*)/.exec(e.mp4);void 0!==t[o[1]]?e.mp4="https://media2.corriereobjects.it"+o[2].replace("///","/").replace("//","/").replace("/fcs.quotidiani/mediacenter","").replace("/fcs.quotidiani_!/mediacenter",""):e.mp4="https://vod.rcsobjects.it/"+i[o[1]]+o[2].replace("///","/").replace("//","/")}}if(e.mp4){let i=/(?:http:|https:)?\/\/(.*)\.net(.*)/.exec(e.mp4);e.mp4.includes("fcs.quotidiani_!")&&(e.mp4=e.mp4.replace("vod.rcsobjects","vod-it.rcsobjects")),i&&void 0!==t[i[1]]&&(e.mp4="https://media2.corriereobjects.it"+i[2].replace("/fcs.quotidiani/mediacenter",""))}return e.m3u8&&e.m3u8.includes("fcs.quotidiani_!")&&(e.m3u8=e.m3u8.replace("vod.rcsobjects","vod-it.rcsobjects")),this.video.mediaProfile.geoblocking&&(e.m3u8&&(e.m3u8=e.m3u8.replace("vod.rcsobjects","vod-it.rcsobjects")),e.mp4&&(e.mp4=e.mp4.replace("vod.rcsobjects","vod-it.rcsobjects"))),e.m3u8&&e.m3u8.includes("csmil")&&e.m3u8.includes("vod")&&(e.m3u8=e.m3u8.replace(".csmil",".urlset")),e}normalizeDfpKey(e){return e?e.toLowerCase().replace(" ",""):""}getErrorMsg(e,t){this.config.getErrorMsg(e,t)}getCiuSzs(){return{desktop:"2x2,300x250,728x90,940x60,940x90,940x250,970x250,1920x1080",tablet:"2x2,300x250,728x90,940x60,940x90,940x250,970x250",mobile:"2x2"}[window.device]}getAdUnit(){const e=window.location.search;let t=`${new URLSearchParams(e).get("adunit")}`;return"null"===t?`${window.utag.data.video_dfp_adunit}/preRoll`:`${t}/preRoll`}getDFPData(e){let t=e||{};if(this.customDFPUrl[this.qsParams.newspaper])return this.customDFPUrl[this.qsParams.newspaper].call(this);let i="sky"===this.video.provider.toLowerCase()&&this.video.secondaryFeedsName&&this.video.secondaryFeedsName.feedRef&&this.video.secondaryFeedsName.feedRef.length>0?this.video.secondaryFeedsName.feedRef[0]:this.video.feed.title,r=null;if(window.network&&"gazzanet"===window.network){let e=document.querySelector("html");e.hasAttribute("data-type")&&"article"===e.getAttribute("data-type")?r="articolo":"home"===e.getAttribute("data-type")?r="homepage":"video"===e.getAttribute("data-type")?r="video":"cards"===e.getAttribute("data-type")&&(r="cards")}if(!window.utag||"function"!=typeof window.utag.dfp_adunit)return void console.log("%c[RCS_VIDEOMANAGER] Warning: window.utag.dfp_adunit not loaded","background: red; color: white;");window.utag.dfp_adunit(this.video.id,this.qsParams.playerType,this.normalizeDfpKey(i),this.normalizeDfpKey(this.video.channel.urlName),this.video.newspaper.id);const a=this.config.deviceCompanionPos[window[this.config.deviceDetectionVar]],s=this.config.deviceCompanionPos[window.DeviceVideo];let n="//pubads.g.doubleclick.net/gampad/ads?sz=640x360&iu={ADUNIT}"+(a||s)+"&impl=s&gdfp_req=1&env=vp&output=xml_vast3&unviewed_position_start=1&url=[referrer_url]&description_url={DESCRIPTION_URL}&{CMSID}&correlator=[timestamp]&hl=it&cust_params=",d="channel={CHANNEL_VALUE}&player={PLAYER_VALUE}&kuid={KUID}&ksegs={KRUX_DATA}&permutive={PERMUTIVE_SEGS_VIDEO_AD}&RCSadobe={RCSADOBE}&permutive-id={PERMUTIVE_ID}";d=d.replace("{CHANNEL_VALUE}",this.video.channel.urlName),d=d.replace("{PLAYER_VALUE}",this.qsParams.playerType),d=d.replace("{KUID}",window.utag.data.user_kruxUser),d=d.replace("{KRUX_DATA}",window.utag.data.user_kruxSegments),d=d.replace("{PERMUTIVE_SEGS_VIDEO_AD}",window.localStorage.getItem("_pdfps")?JSON.parse(window.localStorage.getItem("_pdfps")):""),d=d.replace("{RCSADOBE}",this.getCookie("UESeg")),d=d.replace("{PERMUTIVE_ID}",window.localStorage.getItem("permutive-id")?window.localStorage.getItem("permutive-id"):""),d=this.getAdditionalParams(t.customParams)+"&"+d;let l=(0,o.Wz)("adunit"),c=n.replace("{ADUNIT}",l||window.utag.data.video_dfp_adunit+"{TYPE_OF_ROLL}").replace("{DESCRIPTION_URL}",this.video.canonicalUrl).replace("{CMSID}",this.getDFPCmsId(this.video))+encodeURIComponent(d)+(this.qsParams.cust_params?encodeURIComponent("&")+this.qsParams.cust_params:"");try{this.dfpAdmantVideoAppend(c.length,(()=>{c+=encodeURIComponent("&"+window.dfpurlVideoAdmant)}))}catch(e){}return console.log(`%c[RCS_VIDEOMANAGER] dfpURL OK: ${c}`,"color: green;"),{url:c,prebid:{amazon:{pubId:"3692"},pubmatic:{adslot:this.getAdUnit(),publisherId:"158689"},cust_params:{tipo_video:this.getAdditionalParamsObj(t.customParams),video_autoplay:this.videoAttributes.autoplay,dimesione_player:this.getPlayerContainerDimensions(o._G.playerId,this.config.aspectRatio).width+"x"+this.getPlayerContainerDimensions(o._G.playerId,this.config.aspectRatio).height,channel:this.video.channel.urlName,player:this.qsParams.playerType,permutive:window.localStorage.getItem("_pdfps")?JSON.parse(window.localStorage.getItem("_pdfps")):"",RCSadobe:this.getCookie("UESeg"),"permutive-id":window.localStorage.getItem("permutive-id")?window.localStorage.getItem("permutive-id"):"",...r?{tipo_pagina:r}:{}},ciu_szs:this.getCiuSzs()}}}getAdditionalParams(e){let t=[];return this.opts.tipo_video&&t.push(`tipo_video=${this.opts.tipo_video}`),e&&Object.keys(e).forEach((function(i){t.push(i+"="+e[i])})),t}getAdditionalParamsObj(e){if(this.opts.tipo_video)return this.opts.tipo_video;e&&Object.keys(e).forEach((function(t){return t+"="+e[t]}))}isCookiePolicyAccepted(){return"undefined"!=typeof privacyok&&privacyok}isVideoActive(e){let t={status:!0};return"true"===(0,o.Wz)("mktTest")?t:"CLOSED"===e.liveStatus?(t.status=!1,t.msg="DIRETTA TERMINATA",t):t}getWatermark(e){const t=Boolean(navigator.platform.match(/iPhone/)),i="gazzetta"===e.newspaper.id,o=window.gznPartnerId;let r=this.watermaksByPlayerType[this.qsParams.playerType]||{src:this.propsResolver.resolveVideoProperty(e,"watermarkUrl"),position:this.propsResolver.resolveVideoProperty(e,"watermarkPosition")};return window.RCSVideoManagerExternal&&!r.src.startsWith("http")&&(r.src=`${window.location.protocol}//www.${e.newspaper.name}.it${r.src}`),("#"===r.src&&i||o&&!i)&&(r=!1),i&&t&&(r.src="https://images2.gazzettaobjects.it/images/assets-video/luminosa_iphone.png",r.style="width:4.7%;right:1.3%;"),r&&r.src.includes("http://images2.corriereobjects.it")&&(r.src=r.src.replace("http://","https://")),r}getPlayerProp(e){return"skinColor"===e&&this.qsParams[e]?this.qsParams[e]:!(!this.qsParams[e]||"true"!==this.qsParams[e])||(!this.qsParams[e]||"false"!==this.qsParams[e])&&(this.config.isEmbed?(0,o.MX)(this.config.defaultValuesManager.getDefaultValues()[this.qsParams.playerType],e):"object"==typeof this.config.defaultValuesManager.getDefaultValues().onsite[e]&&null!==this.config.defaultValuesManager.getDefaultValues().onsite[e]?this.config.defaultValuesManager.getDefaultValues().onsite[e][window[this.config.deviceDetectionVar]]:this.config.defaultValuesManager.getDefaultValues().onsite[e])}getVideoAttr(e){return this.videoAttributes&&this.videoAttributes[e]}getType(e){return["gazzetta","gazzanet"].indexOf(e)>-1?"gazzetta":"corriere"}getPlayerHeight(e){return Math.round(e*this.config.aspectRatio.height/this.config.aspectRatio.width)}getPlayerWidth(e){return Math.round(this.config.aspectRatio.width*e/this.config.aspectRatio.height)}getPlayerContainerDimensions(e,t){let i={};return i.width=document.querySelector("#"+e).clientWidth,i.height=Math.round(i.width*t.height/t.width),i}getDFPCmsId(e){let t="";return Object.prototype.hasOwnProperty.call(this.cmsIdMap,e.newspaper.id)&&(t="vid="+e.id,t+="&cmsid="+this.cmsIdMap[e.newspaper.id]),t}getCookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?t[2]:null}}},141:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var o=i(1877),r=i(8615),a=i(8935),s=i(8812);class n extends o.Z{constructor(e,t,i,o=!0){console.log("------------ VIDEOLOADER DUGOUT ------------"),super(e,t,i,o),this.videoSource=i,this.playerType="dugout"}loadPlayer(e,t,i,o){return this.qsParams=i,this.videoAttributes=o,this.video=t,this.iframe=void 0,this.currentPlayer={},this.currentVideoOptions=this.createOptions(e,t),this.loadInfoVideo(this.video),this.currentVideoOptions.videoParams=this.video,this.currentPlayer.options=this.currentVideoOptions,this.currentPlayer.options.isLive=!0,this.currentPlayer.playerType=this.playerType,this.currentPlayer.videoSource=this.videoSource,this.currentPlayer.player=document.querySelector("#"+e),this.currentPlayer.video=this.getIframe(this.currentPlayer.player,this.video),this.isCorriere=(0,s.tF)(this.currentPlayer.player),this.appendIframe(this.currentPlayer.player,this.currentPlayer.video),this.events=["ready","preroll-started","playing","started","ended","paused"],this.objEvents={},this.setEventListeners(),this.currentPlayer}setEventListeners(){this.events.forEach((e=>{this.objEvents[e]=new Event(`Dugout:${e}`)})),window.addEventListener("message",(e=>{if("string"==typeof e.data&&"dugout://"===e.data.substring(0,9)){const t=JSON.parse(e.data.substring(9)),i=this.setTrackingEventName(t.id);this.setAttributes(t,i),(0,r.yD)("EVENTS: LISTENER",t),this.events.includes(i)&&(this.currentPlayer.player.dispatchEvent(this.objEvents[i]),(0,r.yD)("EVENT UTAG",this.objEvents[i].videoParams.title))}})),this.addEventEmitter()}setAttributes(e,t){this.objEvents[t].videoParams=this.currentPlayer.videoSource,this.objEvents[t].duration=(0,r._A)(this.currentPlayer.videoSource.duration),this.objEvents[t].currentTime=e.position,this.currentPlayer.videoSource.provider="dugout",this.currentPlayer.videoSource.newspaper.id=""}setTrackingEventName(e){switch(e){case"playerReady":return"ready";case"adImpression":return"preroll-started";case"playStart":case"play_start":return this.setUnmutePlayer(),"playing";case"newVideo":case"new_video":return"started";case"playComplete":return"ended";case"playPause":return"paused"}}addEventEmitter(){this.currentPlayer.on=(e,t)=>{this.events.includes(e)&&this.currentPlayer.player.addEventListener("Dugout:"+e,t,!1)}}getIframe(e,t){const i=document.createElement("iframe");i.src=`${t.mediaProfile.mediaFile[0].value}${this.videoAttributes.autoplay,"&video_start=playinview"}${"true"===(0,r.ej)("rcsad_fast")?"&show_ads=no":""}`,i.style.width="100%",i.style.height=i.offsetWidth?i.offsetWidth/16*9+"px":e.offsetWidth/16*9+"px",i.style.minHeight="100%",i.setAttribute("allowfullscreen",!0),i.setAttribute("scrolling","no"),i.setAttribute("id","dugoutplayer");const{playlistTemplate:o}=this.videoAttributes;return this.videoAttributes.muted=Boolean(o)&&"videogazzetta"===o&&!0,i.setAttribute("muted",this.videoAttributes.muted),i.classList.add("video-js"),this.iframe=i,i}appendIframe(e,t){e.innerHTML="",e.prepend(t)}setUnmutePlayer(){const e=this.iframe;JSON.parse(e.getAttribute("muted"))||((0,a.eL)("unmute"),e.setAttribute("muted",!0))}destroyPlayer(e){e.destroy(),console.info("Destroy current player ",e)}updateInfoVideo(e){window.uuid={id:e.uuid},window.currentPlayer={options:{videoParams:{subtitle:e.videoParams.subtitle}}}}playNextVideo(e,t){if(this.playerType===t)if((0,r.yD)("SWITCH DUGOUT"),s.tF&&"video"===window.sezione)(0,r.gB)(e.videoParams.url);else{const t=`${e.videoParams.mediaProfile.mediaFile[0].value}${e.autoplay,"&video_start=playinview"}${e.muted?"&video_mute=true":"&video_mute=false"}${"true"===(0,r.ej)("rcsad_fast")&&"&show_ads=no"}`;this.videoSource=e.videoParams,this.iframe.src=t,this.iframe.title=e.videoParams.title,this.currentPlayer.videoSource=e.videoParams,this.updateInfoVideo(e)}else(0,r.gB)(e.videoParams.url)}restartVideo(){const e=this.iframe.src;this.iframe.src="",this.iframe.src=e,(0,r.yD)("RESTART: VIDEO URL",this.iframe.src)}shareVideo(){const e=new CustomEvent("RcsVideoManager:shareVideo",{detail:{url:this.videoSource&&this.videoSource.canonicalUrl,srcIframe:this.iframe.src||null}});(0,r.yD)("SHARE VIDEO: EVENT",e),document.dispatchEvent(e)}}const d=n},2720:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var o=i(1877),r=i(8615);class a extends o.Z{constructor(e,t,i,o=!0){super(e,t,i,o),this.videoSource=i,this.playerType="sky"}loadPlayer(e,t,i,o){return this.qsParams={playerType:"sky"},this.videoAttributes=o,this.video=t,this.ins=void 0,this.currentPlayer={},this.currentVideoOptions=this.createOptions(e,t),this.loadInfoVideo(this.video),this.currentVideoOptions.videoParams=this.video,this.currentPlayer.options=this.currentVideoOptions,this.currentPlayer.options.isLive=!0,this.currentPlayer.playerType=this.playerType,this.currentPlayer.videoSource=this.videoSource,this.currentPlayer.player=document.querySelector("#"+e),this.currentPlayer.video=this.getTagIns(this.video),this.appendTagIns(this.currentPlayer.player,this.currentPlayer.video,this.video),this.events=["ready","preroll-started","playing","started","ended","paused"],this.objEvents={},this.setEventListeners(),this.currentPlayer}setEventListeners(){this.events.forEach((e=>{this.objEvents[e]=new Event(`Sky:${e}`)})),this.currentPlayer.player.firstChild.addEventListener("fluidAdobe",(e=>{if("string"==typeof e.detail.message.action){const t=e.detail.message,i=this.setTrackingEventName(t.action);this.setAttributes(t,i),this.events.includes(i)&&(this.currentPlayer.player.dispatchEvent(this.objEvents[i]),(0,r.yD)("EVENT UTAG",this.objEvents[i].type))}})),this.addEventEmitter()}setAttributes(e,t){this.objEvents[t]&&(this.objEvents[t].videoParams=this.currentPlayer.videoSource,this.objEvents[t].duration=(0,r._A)(this.currentPlayer.videoSource.duration),this.objEvents[t].currentTime=e.position,this.currentPlayer.videoSource.provider="sky",this.currentPlayer.videoSource.newspaper.id="")}setTrackingEventName(e){switch(e){case"ready":return"ready";case"prerollStart":return"preroll-started";case"prerollEnd":case"restart":return"playing";case"pause":return"paused";case"start":return"started";case"complete":return"ended"}}addEventEmitter(){this.currentPlayer.on=(e,t)=>{this.events.includes(e)&&this.currentPlayer.player.addEventListener(`Sky:${e}`,t,!1)}}getTagIns(e){window.dexPresent=void 0;const t=document.createElement("ins"),i=e.mediaProfile.mediaFile[0].value;return t.setAttribute("data-revive-videoid",i),t.setAttribute("data-revive-zoneid",8664),t.setAttribute("id","skyplayer"),t.classList.add("video-js"),t.style.display="none",t}appendTagIns(e,t,i){e.innerHTML="",e.prepend(t),this.getVideo(i),this.addEventEmitter()}getVideo(e){const t=14594,i=8664,o=e.mediaProfile.mediaFile[0].value,r=`https://prx.videofluid.it/api/zones/${e.rTag.includes("news")?t:i}/video/${o}`,a=this.getDFPData();let s;a&&a.url?s=a.url.replace("{TYPE_OF_ROLL}","/Preroll"):console.log("%c[RCS_VIDEOMANAGER] Warning: cannot get dfpData","background: red; color: white;");const n=!0===this.videoAttributes.muted?"muted: true":"muted: false";fetch(`${r}`).then((e=>e.json())).then((e=>{let t=e[0].html.replace("{videoid}",`${o}`).replace("search: true","search: false").replace("muted: true",`${n}`);s&&(t=t.replace("[RCS_AD_TAG]",`https:${s}`),console.log(`%c[RCS_VIDEOMANAGER] RCS_AD_TAG: ${s}`,"color: green;"));const i=`<html><head></head><body>${t}</body></html>`;this.getIframe(i)})).catch((e=>console.error("Video Player Sky:",e)))}getIframe(e,t){let i=document.createElement("iframe");i.setAttribute("videoId",t),i.setAttribute("scrolling","no"),i.setAttribute("frameborder","0"),i.setAttribute("style","border: 0px; overflow: hidden; height: 1px; width: 1px;"),document.querySelector("ins").prepend(i),i.contentWindow.document.open(),i.contentWindow.document.write(e),i.contentWindow.document.close()}playNextVideo(){(0,r.gB)(this.video.url),(0,r.yD)("PLAY NEXT VIDEO: URL",this.video.url)}restartVideo(){(0,r.gB)(this.currentPlayer.videoSource.url),(0,r.yD)("RESTART: URL",this.currentPlayer.videoSource.url)}shareVideo(){const e=new CustomEvent("RcsVideoManager:shareVideo",{detail:{url:this.currentPlayer.videoSource.url}});document.dispatchEvent(e)}customEvent(){this.events.forEach((e=>{document.querySelector(`#${e}`).addEventListener("click",(()=>{this.objEvents[e]=new Event(`sky:${e}`);const t=this.customTrackingEventName(e);this.setAttributes(e,t),this.currentPlayer.player.dispatchEvent(this.objEvents[t])}))}))}customTrackingEventName(e){switch(e){case"ready":return"ready";case"playing":return"playing";case"started":return"started";case"ended":return"ended";case"paused":return"paused"}}}const s=a},2597:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>m});var o=i(8812),r=i(5530),a=i.n(r),s=i(2524),n=i.n(s),d=i(6086),l=i(3008),c=i(8615),h=i(6058),u=i.n(h),p=i(447),v=i(5838);"mobile"===window.device?i(9098):i(8324);class m{constructor(e,t,i=0,r){this.el=e,this.videoAttrs=(0,o.P5)(e),this.newspaper=this.videoAttrs.newspaper||null,this.videoPlayerManager=t,this.counter=5,this.videoSource=r,this.isMobile="mobile"===window.device,this.playlist={},this.nextVideoThumb=void 0,this.isLastVideo=!1,this.propsResolver=new d.Z,this.playlist={videos:[],currentVideoIndex:i},this.currentPlayer=t.currentVideoPlayerLoader.playerType,this.isCustomTemplate=JSON.parse(this.el.getAttribute("data-config"))?.playlistTemplate,this.search=window.location.search,this.forceProd=new URLSearchParams(this.search).get("forceProd"),this.isWepAppView=new URLSearchParams(this.search).get("app_v2"),this.isSubSubHomePage=window.isSubSubHome,this.isLeaf=window.isLeaf,this.webSection=!1,this.previuosVideoContext={},this.nextVideoContext={}}startCountdown(e){this.counter=5,this.nextVideoInterval=setInterval((async()=>{this.counter>1?(--this.counter,e.textContent=this.counter):(clearInterval(this.nextVideoInterval),this.overlay.remove(),"rcs"===this.currentPlayer&&(this.nextVideo=await this.getNextVideo()),this.playNextVideo())}),1e3)}async appendOverlay(){const e=document.querySelector(".bck-media-video-playlist");e&&this.isCustomTemplate&&e.classList.add("is-hidden"),this.nextVideoThumb&&this.nextVideoThumb.remove();const t=(0,o.nV)(),i="gazzetta"===document.body.getAttribute("data-newspaper");this.isCustomTemplate?(this.nextVideoOptions||(this.nextVideo=await this.getNextVideo()),this.playlistTemplateClass.innerTemplate(t,this.getNextVideoData())):t.innerHTML=n()({nextVideoData:this.getNextVideoData(),isGazzetta:i});this.el.querySelector(".video-js")&&this.el.appendChild(t.firstChild),this.overlay=this.el.querySelector(".overlay-next-video.fxc-between-center-c"),this.replayBtn=this.overlay.querySelector('[data-action="replay"]'),this.replayBtn.onclick=this.restartVideo.bind(this),i&&(this.shareBtn=this.overlay.querySelector('[data-action="forward"]'),this.shareBtn.onclick=this.shareVideo.bind(this));const{playlist:r}=this.videoPlayerManager.videoAttributes,{autoplay:a,hideCounter:s}=r,d=this.el.querySelector(".number");if(s)this.nextVideo=await this.getNextVideo(),this.playNextVideo();else if(a)this.startCountdown(d);else{const e=this.el.querySelector(".next-footer"),t=(0,v.g)(e.getAttribute("data-link"));e.setAttribute("data-link",t),e.addEventListener("click",(()=>{window.open(t,"_self")})),d.classList.add("is-hidden")}}restartVideo(){clearInterval(this.nextVideoInterval),this.overlay.remove(),this.switchCurrentVideoData(this.previuosVideoContext),"rcs"===this.currentPlayer?(window.currentPlayer.replay(),this.watchVideoLength()):(--this.playlist.currentVideoIndex,--window.thisIdVideo,this.videoPlayerManager.currentVideoPlayerLoader.restartVideo());const e=document.querySelector(".bck-media-video-playlist");e&&this.isCustomTemplate&&e.classList?.remove("is-hidden")}shareVideo(){if("rcs"===this.currentPlayer){const e=new CustomEvent("RcsVideoManager:shareVideo",{detail:{url:window.video.canonicalUrl,urlGlobal:window.video.url||null,srcIframe:`https://video.gazzetta.it/video-embed/${window.video.id}`||null}});document.dispatchEvent(e);const t=this.el.querySelector(".video-js");t&&t.classList.contains("vjs-fullscreen")&&document.exitFullscreen()}"rcs"!==this.currentPlayer&&this.videoPlayerManager.currentVideoPlayerLoader.shareVideo()}watchVideoLength(){this.videoLengthInterval=setInterval((()=>{this.el.querySelector("video").currentTime>=window.currentPlayer.player.duration()-1&&(window.currentPlayer.player.pause(),this.switchCurrentVideoData(this.nextVideoContext),document.dispatchEvent(new Event("RCSVideoManager:canShowOverlay")),clearInterval(this.videoLengthInterval))}),1e3)}getNextVideoData(){if(!this.nextVideoOptions)return;return{title:(e=this.nextVideoOptions.videoParams.title,t=80,e.length>t?e.substring(0,t-"...".length)+"...":e),titleFull:this.nextVideoOptions.videoParams.title,duration:this.nextVideoOptions.videoParams.duration.slice(3),thumbImg:(0,o.ie)(this.el,this.nextVideoOptions.videoParams),url:this.nextVideoOptions.videoParams.url,isMobile:this.isMobile,id:this.nextVideoOptions.videoParams.id};var e,t}appendNextVideoThumb(){const e=(0,o.nV)();e.innerHTML=a()({nextVideoData:this.getNextVideoData()}),this.el.appendChild(e.firstChild),this.nextVideoThumb=this.el.querySelector(".next-video.fxr-between-top"),this.nextVideoThumb.onclick=this.handleThumbAction.bind(this)}dinamicImport=async()=>{const{default:e}=await i.e(304).then(i.bind(i,8304));this.playlistTemplateClass=new e(this.el,this.playlist,this.videoAttrs),this.playlistTemplateClass.load()};async handleThumbAction(e){if(e.target.classList.contains("icon-gazzetta-g-close-inverse"))return this.nextVideoThumb.remove();clearInterval(this.videoLengthInterval),this.nextVideoThumb.remove(),this.nextVideo=await this.getNextVideo(),this.playNextVideo()}async initPlaylist(){const{playlist:e,uuid:t}=this.videoPlayerManager.videoAttributes,{selector:i,autoplay:r}=e;if(void 0!==r&&(this.videoPlayerManager.videoAttributes.autoplay=r),i){let e=[...document.querySelectorAll(`${i}[data-cmsid]`)];0===e.length&&(e=[...document.querySelectorAll(`${i} [data-cmsid]`)]),window.playlist={videos:{video:[{id:t}]}},e.forEach((e=>{const t=e.getAttribute("data-cmsid");window.playlist.videos.video.push({id:t})}))}this.playlist.videos=(0,o.rQ)()||await this.getPlaylist(),this.isCustomTemplate&&this.isLeaf&&(this.playlist.videos=await this.getCustomLeafPlaylist()),this.playlist.currentVideoPlayerLoader=this.videoPlayerManager.currentVideoPlayerLoader;const a=this.videoPlayerManager.getCurrentPlayer();document.addEventListener("RCSVideoManager:canShowOverlay",(()=>this.appendOverlay())),a.on("ready",(async()=>{this.nextVideo=await this.getNextVideo(),(0,c.yD)("VIDEO EVENT READY")})),a.on("ended",(()=>{if(this.isLastVideo)return document.dispatchEvent(new CustomEvent("playlistLastVideoEnded")),this.videoPlayerManager.rollbackVideoThumb(this.videoPlayerManager.playerContainer);this.nextVideoContext={video:this.nextVideo,attrs:this.videoPlayerManager.videoAttributes},this.switchCurrentVideoData(this.nextVideoContext),document.dispatchEvent(new Event("RCSVideoManager:canShowOverlay")),(0,c.yD)("VIDEO EVENT ENDED")})),a.on("upnext",(()=>{const{playlist:e}=this.videoPlayerManager.videoAttributes,{autoplay:t}=e,i=Boolean(this.videoPlayerManager.video.liveStatus),r=Boolean("gazzetta"===this.newspaper),a=Boolean("pagina_video"===this.videoAttrs.tipo_video),s=Boolean("articleEmbed"===this.videoAttrs.coverTemplate),n=Boolean("longformvideoEmbed"===this.videoAttrs.coverTemplate);this.isMobile||i||this.isLastVideo||!t||r&&(o.Nr||a||s||n)||this.appendNextVideoThumb()})),this.isCustomTemplate&&this.dinamicImport()}initPlaylistIndexForGazzanet(){!window.thisIdVideo&&window.gznPartnerId&&window.gznBlogId&&this.playlist.videos.forEach((e=>{const t=10-e.id.length;let i="";for(let e=0;e<t;e++)i+="0";e.id=`gazzanet-00${window.gznBlogId}-${i}${e.id}`}))}async getNextVideo(){if(!this.playlist.videos.length)return void(this.isCustomTemplate&&(this.isLastVideo=!0));const e="true"===(0,p.Z)("forceProdPlaylist"),{videoAttributes:t}=this.videoPlayerManager;this.initPlaylistIndexForGazzanet();const i=this.playlist.videos,r=i.findIndex((e=>e.id===t.uuid));let a,s=-1!==r,n=!1;s?(a=i.filter(((e,t)=>t>=r)),a.length<=1&&(a=i,n=!0)):a=i;const d={currentVideo:t.uuid,playlist:{length:i.length,full:i,filtered:a,currentExists:s,currentIndex:r}};if(!n){const i=(0,o.ii)(a);let r;for await(const a of i){let i=t.newspaper;if((0,o.V6)()&&a.newspaper&&(i=a.newspaper),!i)return;const s=await(0,o.kd)(i,a.id,!1,e);if(s.id){s.isPlayable=!1,d.nextCandidate=s,(0,l.fc)(s);if(!0!==(0,o.Ds)(s))return;s.isPlayable=!0,r=s,(0,o.V6)()&&a.permalink&&(r.url=a.permalink),this.playlist.currentVideoIndex>1&&document.dispatchEvent(new CustomEvent("trackNextVideo")),document.dispatchEvent(new CustomEvent("nextVideoPlaylist")),window.video=r;let e=this.playlist.videos.findIndex((e=>e.id===a.id));this.playlist.currentVideoIndex=e,window.thisIdVideo=e;break}}return r}this.isLastVideo=!0}switchCurrentVideoData(e={}){if(!e.video||!e.attrs)throw new Error("RCS:VideoManager: cannot find video settings to switch curent video");this.previuosVideoContext={video:this.videoPlayerManager.video,attrs:this.videoPlayerManager.videoAttributes},this.nextVideoOptions=this.playlist.currentVideoPlayerLoader.loadPlaylist(e.video,e.attrs)}playNextVideo(){const e=this.nextVideoOptions.videoParams.providerSrc,t=this.nextVideoOptions.videoParams.url,i=this.nextVideoOptions?.playlist?.blockRedirect;"rcs"===this.currentPlayer&&"rcs"===e?!i&&(o.tF&&"articolo"===window.tipologia||o.tF&&"video"===window.tipologia||o.V6&&void 0!==window.fogliaVideoRcs)?(0,c.gB)(t):((0,c.yD)("this.nextVideoOptions",this.nextVideoOptions),this.videoPlayerManager.currentPlayer.cmd.push(this.nextVideoOptions),this.videoPlayerManager.currentPlayer.nextVideo({type:1}),this.setVideoThumbImage()):this.videoPlayerManager.currentVideoPlayerLoader.playNextVideo(this.nextVideoOptions,e),this.setVideoInfo(),document.dispatchEvent(new CustomEvent("nextVideoPlaylistPlayed"));const r=document.querySelector(".bck-media-video-playlist");if(r&&this.isCustomTemplate&&r.classList.remove("is-hidden"),this.isCustomTemplate){if(this.isSubSubHomePage)"mobile"===window.device&&this.playlistTemplateClass.updateTemplate("mobileVideoFooter",this.nextVideoOptions?.videoParams);else if(this.isLeaf)if(this.isWepAppView){console.log("isWebAppView is this url? ",this.nextVideoOptions?.videoParams?.url);const e=new CustomEvent("playNextVideo",{detail:this.nextVideoOptions?.videoParams?.url});window.dispatchEvent(e)}else window.location.href=this.nextVideoOptions?.videoParams?.url;this.playlistTemplateClass.updateTemplate("updateVideoActiveInPlaylist",this.nextVideoOptions?.videoParams)}}setVideoThumbImage(){document.querySelector(".vjs-poster").style.backgroundImage=`url(${(0,o.ie)(this.el,this.nextVideoOptions.videoParams)})`}setVideoInfo(){this.videoPlayerManager.video=this.nextVideoOptions.videoParams;const e=new Event("RCSVideoManager:refreshVideoData");document.dispatchEvent(e)}getGazzanetPlaylistEndpoint(e){if(u()&&u().gazzanet&&u().gazzanet.endpointPlaylitGzn)return u().gazzanet.endpointPlaylitGzn.replace("##gznPartnerId##",e)}async getPlaylist(){if(this.videoSource){const e=window.gznPartnerId&&"video"===window.tipologia?this.getGazzanetPlaylistEndpoint(window.gznPartnerId):`https://www.gazzetta.it/linked_webroots/video.gazzetta.it/app-video-content/json/summary/playlist_${window.playlistId}_videos.json`;return this.propsResolver.resolveVideoProperty(this.videoSource,"playlistId"),(await(await fetch(e)).json()).videos.video}}getCustomLeafPlaylist=async()=>{if(this.webSection=(0,o.wg)(),this.webSection){const e=await fetch(u().gazzetta.api.playlist(this.webSection)),t=await e.json();return!(0===t.videos?.video?.length||!t.videos?.video)&&(t.videos.video[0].disabledUrl=!0,console.log("newLog NO PLAYLIST ",t.videos.video),t.videos.video)}return!1};load(){this.initPlaylist()}}},4761:(e,t,i)=>{"use strict";i.d(t,{IG:()=>r,g:()=>a.Z,Xi:()=>s,Yf:()=>E,Gi:()=>y,Bu:()=>V});var o=i(8812);const r=class{constructor(){this.defaultEmbedPlayerType="embed",this.defaultValues={onsite:{autoPlay:{mobile:!1,desktop:!0,tablet:!1},mute:!1,disableFullScreen:!1,skinColor:null,disableRelated:!0},embed:{autoPlay:!1,mute:!1,disableRelated:!1,blockAdv:!1,titolo:!0,infobar:!1,disableFullScreen:!1,skinColor:null},live:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},article:{autoPlay:!1,mute:!1,disableRelated:!1,blockAdv:!1,titolo:!0,infobar:!0,disableFullScreen:!1,skinColor:null},tv:{autoPlay:!0,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},homepage:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!0,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},homepage_refresh:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},homepage_wall:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},breakingnews:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},pubblicita:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},partnership_msn:{autoPlay:!0,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},partnership_gds:{autoPlay:!0,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},chili:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},partnership_dday:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!0,infobar:!0,disableFullScreen:!1,skinColor:null},digitaledition:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!0,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},video_articoli:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},corrieremobileapp:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!0,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},webreportage:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},iodonna:{autoPlay:!1,mute:!1,disableRelated:!1,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},oggi:{autoPlay:!1,mute:!1,disableRelated:!1,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},oggitv:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!0,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},"atcasa-corriere":{autoPlay:!1,mute:!1,disableRelated:!1,blockAdv:!0,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},living:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!0,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},amica:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},style:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},leitv:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},quimamme:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!0,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},tiscali:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},video360:{autoPlay:!1,mute:!1,disableRelated:!0,blockAdv:!0,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null},tvSticky:{autoPlay:!1,mute:!0,disableRelated:!0,blockAdv:!1,titolo:!1,infobar:!1,disableFullScreen:!1,skinColor:null}}}getValue(e,t,i){const r=t.replace(".","-");if(i||!0)return(0,o.MX)(this.defaultValues,r+"."+e)}getDefaultValues(){return this.defaultValues}};var a=i(6086);class s{constructor(e,t){this.events={},e.forEach((e=>{this.events[e]=i=>{this.send(e,t,i)}})),this.prerollStarted=!1}getEvents(){return this.events}send(e,t,i){const o=window.newspaper&&window.newspaper.domain||"",r=o&&"video.corriere.it"===o,a=t.playerContainer&&t.playerContainer.classList&&t.playerContainer.classList.contains("custom-video-sticky"),s=r?"tv":"tvSticky";let n={},d=i.videoParams;void 0===d&&(d=t.video);a&&!window.gznPartnerId&&(t.qsParams.playerType=s);const l=t.videoAttributes.playerPage||t.qsParams.playerType,c=d.channel&&d.channel.urlName?d.channel.urlName.split("/"):null;"preroll-started"===e&&(this.prerollStarted=!0),n.event_name=`video_${e}`,n.video_date=this.parseDate(d.pubDate),n.video_length=i.duration,n.video_provider=d.provider,n.video_provider_tv=d.provider_tv,n.video_title=d.title,n.video_url=t.getVideoUrl(d),n.video_id=d.id,n.video_syndacation=function(e){try{return t.propsResolver.resolveVideoProperty(d,e)}catch(e){return}}("syndication"),n.video_site=d.newspaper&&d.newspaper.id,n.video_feed=d.feed&&d.feed.title,n.video_content_type=d.mediaType,n.video_channel=d.channel&&d.channel.title,n.video_player_page=l,n.block_adv=t.currentVideoPlayerLoader.blockAdv,console.log(`%c dtl.block_adv (${n.video_id}): ${n.block_adv} `,"background: green; color: white;"),c&&(n.video_section=c[0],n.video_subsection=c[1]),n.video_preroll=this.prerollStarted,n.video_local=d.newspaper&&d.newspaper.id,n.video_autoplay=t.currentVideoPlayerLoader.currentVideoOptions.autoPlay?t.currentVideoPlayerLoader.currentVideoOptions.autoPlay:t.currentVideoPlayerLoader.currentVideoOptions.autoplay,n.video_page_url=window.location.href,n.video_currentTime=i.currentTime,d.secondaryFeedsName&&d.secondaryFeedsName.feedRef&&(n.secondaryFeedsName=d.secondaryFeedsName.feedRef.toString());try{console.log("%c DTL DEBUG: ","background: green; color: white;",n),window.utag.view(n),n.video_player_page&&"started"===e&&console.log(`%c dtl.video_player_page:${n.video_player_page}`,"background: green; color: white;")}catch(e){console.log(e)}}parseDate(e){try{const t=/(\d{4})-(\d{2})-(\d{2})/,i=e.match(t);if(Boolean(i)&&4===i.length)return i.shift(),i.reverse().join("/")}catch(e){}}}var n=i(1877),d=i(8615);class l extends n.Z{constructor(e,t,i,o=!0){console.log("------------- VIDEOLOADER RCS --------------"),super(e,t,i,o),this.playerType="rcs"}playNextVideo(e){(0,d.gB)(e.videoParams.url),(0,d.yD)("PLAY NEXT VIDEO: URL",e.videoParams.url)}}const c=l;var h=i(141),u=i(2720),p=i(3008);class v{constructor(e,t,i,o=!0){switch((0,p.fc)(i),i&&i.providerSrc){case"dugout":return new h.Z(e,t,i,o);case"sky":return new u.Z(e,t,i,o);case"rcs":return new c(e,t,i,o)}}}var m=i(7404),g=(i(6337),i(760));const y=class{constructor(e,t){this.playerContainer=e,this.playerContainerId=o._G.playerId,this.qsParams={playerType:window.gznPartnerId?`gazzanet_${window.gznPartnerId}`:"tv"},this.videoAttributes=t,this.playlist=null,this.playlistTitle=null,this.currentPlayer=null,this.currentVideo=null,this.isCorriere=(0,o.tF)(e),this.isGazzetta=(0,o.ns)(e),this.isNewspaperRcs=(0,o.Eg)(e),this.currentVideoPlayerLoader=null,this.propsResolver=new a.Z,this.advAdexFirstCall=!0,this.abTestCorriereEnabled=!1,this.abTestGazzettaEnabled=!1,this.playerLoaderConfig={defaultValuesManager:new r,aspectRatio:{width:640,height:360},defaultImage:"/includes2013/LIBS/css/assets/video/transparent-pixel.png",deviceDetectionVar:"device",plSzAbTest:this.isAbTestEnabled()&&window.plSzAbTest?window.plSzAbTest:void 0,sizeClass:this.isAbTestEnabled()&&window.plSzAbTest?"is--"+window.plSzAbTest:void 0,getErrorMsg:(e,t)=>{(0,g.getEventsBus)().error.dispatch({message:e});let i=document.createElement("div");i.classList.add("msg"),i.setAttribute("style","display: block; z-index: 1;"),i.innerHTML=e;let o=document.querySelector(`#${t}`);o.innerHTML="",o.setAttribute("style","background-color:black;position:relative"),o.append(i),"mobile"===window[this.playerLoaderConfig.deviceDetectionVar].innerHTML&&document.querySelector(`#${this.playerContainerId}`).setAttribute("style","background-color:black;position:relative;min-height:220px;height:100%;")},deviceCompanionPos:{desktop:"&ciu_szs=2x2,300x250,728x90,940x60,940x90,940x250,970x250,1920x1080",tablet:"&ciu_szs=2x2,300x250,728x90,940x60,940x90,940x250,970x250",mobile:"&ciu_szs=2x2"},isEmbed:this.isEmbed(),video360:{isVideo360:!1,VRMode:!1,postMsgEvents:{FINE_VISIONE:"fine_visione",PLAY:"play",FIRST_STEP_OK:"first_step_ok"}},embedFixedDimensions:{corrieremobileapp:{width:375,height:252}},loadInfoVideo:function(){}};const i={useractive:()=>{},userinactive:()=>{},nopostroll:()=>{},adserror:()=>{},"ad-ended":()=>{},playing:()=>{this.checkRefreshGazza(),this.sendPostMessage("it.chili.player.event.video.playing","*")},pause:()=>{this.checkRefreshGazza(!0),this.sendPostMessage("it.chili.player.event.video.pause","*")},started:()=>{this.sendPostMessage("it.chili.player.event.video.started","*")},adsbeforerequest:()=>{this.sendPostMessage("it.chili.player.event.video.adsbeforerequest","*")},"preroll-started":()=>{},"postroll-started":()=>{}},n=new s(["ready","preroll-started","postroll-started","started","preroll-started","postroll-started","ended","pause","paused","played","step25","step50","step75","stepLive","playing","seeked","seeking","waiting","skippable-state-changed","ad-skipped","adserror","adend"],this);this.eventListeners=this.initEventListeners([n.getEvents(),i])}initEventListeners(e){let t={};return e.forEach((e=>{for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]||(t[i]=[]),t[i].push(e[i]))})),t}initialize(e,t,i=!0){this.video=e,t.tipo_video||(t.tipo_video="embed"),"embed"===window.extVideoPlayer&&(this.qsParams=Object.assign({},this.qsParams,this.readQSParameter()),"false"!==this.qsParams.mute&&"false"!==this.qsParams.muted||(t.muted=!1),"true"!==this.qsParams.mute&&"true"!==this.qsParams.muted&&"true"!==this.qsParams.autoPlay||(t.muted=!0),this.qsParams&&this.qsParams.tipo_video&&(t.tipo_video=this.qsParams.tipo_video)),this.currentVideoPlayerLoader||(this.currentVideoPlayerLoader=new v(this.playerLoaderConfig,t,e,i)),this.setPlayerContainer(),this.currentVideo=e,this.qsParams.playerType||(this.qsParams.newspaper?this.qsParams.playerType=this.qsParams.newspaper:this.qsParams.playerType=this.playerLoaderConfig.defaultValuesManager.defaultEmbedPlayerType),this.loadVideo(this.currentVideo)}loadVideo(e){const t=document.querySelector(`#${this.playerContainerId}`);t&&(this.currentPlayer&&this.currentVideoPlayerLoader.destroyPlayer(this.currentPlayer),window.currentPlayer&&this.currentVideoPlayerLoader.destroyPlayer(window.currentPlayer),this.cleanVideoContainer(this.playerContainer),this.isCorriere=(0,o.tF)(t),this.isCorriere&&t.classList.contains("custom-video-sticky")&&(this.qsParams.playerType="tvSticky"),this.setCurrentPlayer(this.currentVideoPlayerLoader.loadPlayer(this.playerContainerId,e,this.qsParams,this.videoAttributes)),window.player=this.currentPlayer,this.currentPlayer&&this.currentPlayer.video&&this.currentPlayer.video.setAttribute("title",e.title),this.advAdexFirstCall=!1,this.isCorriere&&(this.onVideoPlaying(document.querySelector(`#${this.playerContainerId}`)),void 0!==e.liveStatus&&"LIVE"===e.liveStatus||(0,o.Gv)()))}destroyPlayer(){this.currentVideoPlayerLoader.destroyPlayer(this.currentPlayer)}cleanVideoContainer(e){e.innerHTML=""}rollbackVideoThumb(e){e.removeAttribute("id"),e.removeAttribute("style"),e.removeAttribute("data-player-active"),e.classList.remove("rcs-video"),(0,o.P5)(e).adaptive&&"mobile"===window.device&&e.parentElement.classList.remove("play-video"),(0,o.$L)(),this.triggerRollbackVideo(e);const t="gazzetta"===document.body.getAttribute("data-newspaper");(0,o.P5)(e).tipo_video&&"embed"===(0,o.P5)(e).tipo_video&&!0===t&&(document.querySelector(".icon-gazzetta-g-play").style.display="none",document.querySelector("span.icon").innerHTML='<i class="icon-gazzetta-g-restart fa-5x"></i>')}triggerRollbackVideo(e){const t=new CustomEvent("RCSVideoManager:rollback",{detail:e});document.dispatchEvent(t)}setPlayerContainer(){this.playerContainer.setAttribute("id",this.playerContainerId),this.playerContainer.classList.add("rcs-video")}setCurrentPlayer(e){e&&(this.currentPlayer=e,this.attachEventListeners())}getCurrentPlayer(){return this.currentPlayer}attachEventListeners(){if(this.eventListeners&&!window.areEventListenersAttached){for(let e in this.eventListeners)Object.prototype.hasOwnProperty.call(this.eventListeners,e)&&this.currentPlayer.on(e,(t=>{this.eventListeners[e].forEach((i=>{try{switch(e){case"ready":this.onVideoReady();break;case"ended":this.onVideoEnded();break;case"playing":default:break;case"played":this.onVideoPlayed()}i.call(this,t)}catch(e){console.error(e)}}))}));this.areEventListenersAttached=!0}}onVideoReady(){const e=this.playerContainer.querySelector(".ima-countdown-div");null!==e&&e.setAttribute("style","font-size: 11px;"),document.dispatchEvent(new CustomEvent("RcsVideoExt:videoLoaded"))}onVideoEnded(){const e=document.querySelector(".rcs-video"),{playlist:t}=(0,o.P5)(e),i=this.videoAttributes.tipo_video&&"embed"===this.videoAttributes.tipo_video;if(t||i||this.rollbackVideoThumb(e),i&&"mobile"!==window.device)if(this.isCorriere||this.isNewspaperRcs)t||this.rollbackVideoThumb(e);else{new m.Z(this.playerContainer,this.playerContainer,this.videoAttributes).init().catch((i=>{console.log(i),t||this.rollbackVideoThumb(e)}))}else i&&"mobile"===window.device&&(t||this.rollbackVideoThumb(e));this.sendPostMessage("it.chili.player.event.video.ended","*"),document.dispatchEvent(new CustomEvent("RcsVideoExt:end"))}onVideoPlayed(){this.playerLoaderConfig.video360.isVideo360&&this.sendPostMessage(this.playerLoaderConfig.video360.postMsgEvents.PLAY)}isEmbed(){return!0}getVideoUrl(e){let t=e.url;return""!==e.canonicalUrl&&e.canonicalUrl!==e.url&&(t=e.canonicalUrl),t.replace("http:","")}getEmbedUr(e){return`${window.location.protocol}//${window.location.host}/video-embed${e.id}${window.location.search}`}readQSParameter(e){const t=e||{},i=location.search.substring(1,location.search.length);if(i){i.split("&").forEach((e=>{const i=e.split("=");t[i[0]]=i[1]}))}return t}sendPostMessage(e,t="*"){window.parent&&window.parent.postMessage(e,t)}isAbTestEnabled(){return this.isCorriere&&this.abTestCorriereEnabled||this.isGazzetta&&this.abTestGazzettaEnabled}checkRefreshGazza(e=!1){if(!this.currentPlayer.options.isLive){const t=new Event("refreshGazza");let i=0;if(!e){let e=this.currentPlayer.player.duration();if(e){e=1e3*Number(e);let t=0;this.currentPlayer.player.currentTime()&&(t=Math.round(1e3*this.currentPlayer.player.currentTime())),i=e-t+5e3}}t.waitRefreshGazza=i,t.fromElement="player",document.dispatchEvent(t)}}onVideoPlaying(e){if("mobile"===window[this.playerLoaderConfig.deviceDetectionVar]){let t;this.currentPlayer.on("ready",(()=>{t=new IntersectionObserver((e=>{const{isIntersecting:t}=e[0];t||o.tF||this.currentPlayer.player.muted(!0)})),t.observe(e)})),this.currentPlayer.on("ended",(()=>{t&&t.disconnect()}))}}};i(7238);class f{constructor(e,t,i){this.videoManager=null,this.el=e,this.videoSource=t,this.showPostRoll=i,this.luminosaOff=e.getAttribute("data-sticky-luminosaoff"),this.loadVideo=!1,this.videoCloseEl=(0,d.nV)(),this.videoTitleEl=(0,d.nV)(),this.videoFakeEl=(0,d.nV)(),this.currentPlayer=null,this.isPlaying=!1,this.videoCloneEl=this.el.cloneNode(!0),this.config=(0,o.e$)(this.el),this.videoEnded=!1,this.previousTop=0,this.hasSticked=!1,this.showIconWithDelayTimeout=0,this.playlistEnded=!1,this.endlessStickynessInitialized=!1,this.isCorriere=(0,o.tF)(this.el),this.isIphone=Boolean(navigator.platform.match(/iPhone/)),this.isToggledOn=!1,this.offsetWidth=0,this.offsetHeight=0,this.canShowPlaylist=!1,this.isMobile="mobile"===window.device}autoPlayVideoPreRoll(e){const t=e.autoplay,i=e.newspaper||"corriere",r=!(0,o.Cj)(i),a=void 0===window.autoPlayVideoPreRoll&&window.tipologia&&"articolo"===window.tipologia&&!this.isCorriere;t&&(a&&r?this.handleAutoPlayPreRollListener(e):this.initializeVideo(e))}handleAutoPlayPreRollListener(e){document.addEventListener("autoPlayVideoPreRoll",(()=>{this.initializeVideo(e)}))}handleStartStickyListener(){document.addEventListener("RCSVideoManager:startSticky",(()=>{this.videoManager&&this.hasSticked&&this.destroyPlayer()}))}load(){if(!this.el)return;this.handleStartStickyListener();const e=(0,o.P5)(this.el)&&(0,o.ES)((0,o.P5)(this.el));e&&(this.el.addEventListener("click",(t=>{t.preventDefault(),(0,o.E2)(this.el,t)&&this.loadVideoSticky(e)})),!0===this.config.initStickyNoAutoplay&&document.addEventListener("RCSVideoManager:startVideo",(()=>{this.loadVideo=!0,this.initializeVideo(e)})),this.autoPlayVideoPreRoll(e))}initializeVideo(e){const t=new IntersectionObserver((i=>{const{isIntersecting:r,boundingClientRect:a}=i[0];if((0,o.GO)(this.previousTop,a.top)&&this.loadVideo&&!r&&!this.videoEnded)if(this.config.startOnFullVideoVisibility&&this.config.endlessSticky)t.disconnect(),this.setEndlessStickyness(e);else if(this.toggleVideo(),t.disconnect(),this.config.relocation){const t=new IntersectionObserver((i=>{const{isIntersecting:o}=i[0];o&&(document.dispatchEvent(new CustomEvent("RCSVideoManager:customSticky")),this.toggleVideo(!0),this.hasSticked=!1,t.disconnect(),this.config.endlessSticky&&this.setEndlessStickyness(e))}));t.observe(this.videoFakeEl),this.hasSticked=!0}}),{rootMargin:this.config.startOnFullVideoVisibility&&this.config.endlessSticky?`-${this.el.offsetHeight-60}px`:`${this.config.viewport}px`}),i=new IntersectionObserver((t=>{const r=(0,o.ES)((0,o.P5)(this.el)),{isIntersecting:a,boundingClientRect:s}=t[0];if((0,o.Nr)(r)&&a&&!this.videoEnded)this.el.classList.add("custom-video-sticky"),document.dispatchEvent(new CustomEvent("RCSVideoManager:startSticky",{detail:this.el.innerHTML})),this.loadVideo||this.loadVideoSticky(e),this.currentPlayer=this.videoManager.getCurrentPlayer(),this.currentPlayer.on("started",(()=>{this.showCloseBtn(),this.isPlaying=!0,this.checkLuminosa(),document.addEventListener("RcsVideoManager:AppPlay",(()=>{this.currentPlayer.play()})),document.addEventListener("RcsVideoManager:AppPause",(()=>{this.currentPlayer.pause()}))})),this.currentPlayer.on("ended",(()=>{this.destroyPlayer(),this.config.onVideoEndScrollBack&&(0,p.mL)(this.el)})),this.currentPlayer.on("preroll-started",(()=>{this.videoManagerTitle=this.getPreRollStartedTitle(),this.videoTitleEl.innerText=this.videoManagerTitle})),this.currentPlayer.on("playing",(()=>{this.videoManagerTitle=(0,d.WX)(this.videoManager.video.title),this.videoTitleEl.innerText=this.videoManagerTitle})),this.loadVideo=!0,this.previousTop=s.top;else if((0,o.GO)(this.previousTop,s.top)&&this.loadVideo&&!this.videoEnded)if(this.config.startOnFullVideoVisibility&&this.config.endlessSticky)i.disconnect(),this.setEndlessStickyness(e);else if(this.toggleVideo(),i.disconnect(),this.config.relocation){const t=new IntersectionObserver((i=>{const{isIntersecting:o}=i[0];o&&(document.dispatchEvent(new CustomEvent("RCSVideoManager:customSticky")),this.toggleVideo(!0),this.hasSticked=!1,t.disconnect(),this.config.endlessSticky&&this.setEndlessStickyness(e))}));t.observe(this.videoFakeEl),this.hasSticked=!0}}),{rootMargin:this.config.startOnFullVideoVisibility&&this.config.endlessSticky?`-${this.el.offsetHeight-60}px`:`${this.config.viewport}px`}),r=(0,o.ES)((0,o.P5)(this.el));this.isCorriere&&"articolo"===window.tipologia&&(0,o.Nr)(r)&&!this.isMobile?this.videoEnded||(this.el.classList.add("custom-video-sticky"),document.dispatchEvent(new CustomEvent("RCSVideoManager:startSticky",{detail:this.el.innerHTML})),this.loadVideo||this.loadVideoSticky(e),this.currentPlayer=this.videoManager.getCurrentPlayer(),this.currentPlayer.on("started",(()=>{this.showCloseBtn(),this.isPlaying=!0,this.checkLuminosa(),document.addEventListener("RcsVideoManager:AppPlay",(()=>{this.currentPlayer.play()})),document.addEventListener("RcsVideoManager:AppPause",(()=>{this.currentPlayer.pause()}))})),this.currentPlayer.on("ended",(()=>{this.destroyPlayer(),this.config.onVideoEndScrollBack&&(0,p.mL)(this.el)})),this.currentPlayer.on("preroll-started",(()=>{this.videoManagerTitle=this.getPreRollStartedTitle(),this.videoTitleEl.innerText=this.videoManagerTitle})),this.currentPlayer.on("playing",(()=>{this.videoManagerTitle=(0,d.WX)(this.videoManager.video.title),this.videoTitleEl.innerText=this.videoManagerTitle})),this.loadVideo=!0,this.previousTop=160,t.observe(this.el)):i.observe(this.el)}setEndlessStickyness(e){let t;const i=new IntersectionObserver((r=>{(0,o.Nr)(e)&&this.el.classList.add("custom-video-sticky");const{isIntersecting:a,boundingClientRect:s}=r[0];!a||this.videoEnded&&!e.playlist?(0,o.GO)(this.previousTop,s.top)&&this.loadVideo&&(!this.videoEnded||e.playlist)?(this.toggleVideo(),this.isPlaying&&this.showCloseBtn(),this.config.relocation&&(t=new IntersectionObserver((e=>{const{isIntersecting:t}=e[0];t&&(document.dispatchEvent(new CustomEvent("RCSVideoManager:customSticky")),this.toggleVideo(!0),this.hasSticked=!1)})),t.observe(this.videoFakeEl),this.hasSticked=!0)):(this.videoEnded&&!e.playlist||e.playlist&&this.playlistEnded)&&(this.disconnectObservers([i,t]),i&&i.disconnect(),t&&t.disconnect()):(this.currentPlayer=this.videoManager.getCurrentPlayer(),this.loadVideo=!0,this.previousTop=s.top)}),{rootMargin:`${this.config.viewport}px`});i.observe(this.el),this.endlessStickynessInitialized=!0,document.addEventListener("RcsDestroyPlayer",(()=>{this.disconnectObservers([i,t])}))}disconnectObservers(e){e.forEach((e=>e.disconnect()))}getVideoManagerTitle(){return this.config.stickyTitle||this.videoManager.video.stickyTitle||this.videoManager.video.title}getPreRollStartedTitle(){return this.config.stickyTitle?(0,d.WX)(this.config.stickyTitle):this.getVideoManagerTitle()}toggleVideo(e){if(this.videoManagerTitle||(this.videoManagerTitle=this.getVideoManagerTitle()),e){if(!this.isToggledOn)return;this.videoTitleEl.remove(),this.videoFakeEl.remove(),this.config.wrapper?(0,o.dU)(this.config,this.videoFakeEl,!1):(this.el.classList.remove(this.config.targetClass),this.setHeightContainer("remove"),this.videoManager.playerLoaderConfig.sizeClass&&this.el.classList.remove(this.videoManager.playerLoaderConfig.sizeClass),this.videoFakeEl.remove()),this.el.setAttribute("style",`width: ${this.offsetWidth}px; height: ${this.offsetHeight}px;`),this.el.classList.contains("rcs-video")&&window.dispatchEvent(new CustomEvent("resize")),this.isToggledOn=!1}else{if(this.isToggledOn)return;this.offsetWidth=this.el.offsetWidth,this.offsetHeight=this.el.offsetHeight,this.isPlaying&&this.showCloseBtn(),this.removeListPropriety(this.el.style,["width","height","min-height"]),this.videoFakeEl.setAttribute("style",`width: ${this.offsetWidth}px; height: ${this.offsetHeight}px;`),this.videoCloneEl.children[0]&&(this.videoCloneEl.children[0].setAttribute("style","width: 100%"),this.videoFakeEl.appendChild(this.videoCloneEl.children[0])),this.videoTitleEl.innerText=this.videoManagerTitle,this.videoTitleEl.classList.add("sticky-title");let e=document.querySelector("#ima-ad-container > div");null!==e&&(e.style.width="100%"),this.el.appendChild(this.videoTitleEl),this.config.wrapper?(0,o.dU)(this.config,this.videoFakeEl,!0):(this.el.classList.add(this.config.targetClass),this.setHeightContainer("add"),this.videoManager.playerLoaderConfig.sizeClass&&this.el.classList.add(this.videoManager.playerLoaderConfig.sizeClass),this.el.parentElement&&this.el.parentElement.prepend(this.videoFakeEl)),this.el.classList.contains("rcs-video")&&window.dispatchEvent(new CustomEvent("resize")),this.isToggledOn=!0}}removeListPropriety(e,t){t.forEach((t=>e.removeProperty(t)))}setHeightContainer(e){if(this.isCorriere&&this.isMobile&&"video"===window.sezione){const t=document.querySelector(".bck-media-news"),i=document.querySelector(".media-image")&&document.querySelector(".media-image").offsetHeight,o="has--height";t&&i&&("add"===e?(t.classList.add(o),t.style.height=`${i+240}px`):(t.classList.remove(o),t.style.height="initial"))}}showCloseBtn(){this.showIconWithDelayTimeout||this.showIconWithDelay(3e3)}hideCloseBtn(){this.videoCloseEl&&this.videoCloseEl.remove()}showIconWithDelay(e){this.showIconWithDelayTimeout=setTimeout((()=>{this.showIcon(),window.clearTimeout(this.showIconWithDelayTimeout),this.showIconWithDelayTimeout=!1}),e)}showIcon(){this.videoCloseEl.classList.add("sticky-close-icon"),this.videoCloseEl.innerHTML=this.getvideoCloseIcon(),this.videoCloseEl.onclick=e=>{e.preventDefault(),e.stopPropagation(),this.destroyPlayer(!0),document.dispatchEvent(new CustomEvent("RcsDestroyPlayer"))},this.el.appendChild(this.videoCloseEl),document.addEventListener("RcsVideoManager:AppDestroyPlayer",(()=>{this.destroyPlayer(!0)}))}getvideoCloseIcon(){return'<svg viewPort="0 0 12 12" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <line x1="1" y1="14"\n                x2="13" y2="1"\n                stroke="black"\n                stroke-width="2"/>\n            <line x1="1" y1="1"\n                x2="14" y2="14"\n                stroke="black"\n                stroke-width="2"/>\n            </svg>'}destroyPlayer(e=!1){this.videoEnded=!0,this.loadVideo=!1,this.isPlaying=!1,this.toggleVideo(!0),this.hideCloseBtn(),this.canShowPlaylist&&!0!==e||this.videoManager.rollbackVideoThumb(this.el)}checkLuminosa(){const e=this.el.querySelector(".vjs-overlay-luminosa");this.luminosaOff&&e&&(e.style.display="none"),this.isCorriere&&this.isMobile&&this.isIphone&&"LIVE"===this.videoSource.liveStatus&&(e.style.top="14%",e.style.right="3%")}loadVideoSticky(e){this.canShowPlaylist=void 0!==e.playlist,this.videoManager=new y(this.el,e),this.videoManager.initialize(this.videoSource,this.config,this.showPostRoll),this.el.setAttribute("data-player-active",!0),document.dispatchEvent(new CustomEvent("RCSVideoManager:startVideo",{detail:this.videoManager})),this.canShowPlaylist&&(e.upnextInSeconds=5,Promise.resolve().then(i.bind(i,2597)).then((({default:e})=>{new e(this.el,this.videoManager,0,this.videoSource).load()})),this.handlePlaylistEndedListener(),this.handleNextVideoPlayerListener())}handlePlaylistEndedListener(){document.addEventListener("playlistEnded",(()=>{this.playlistEnded=!0}))}handleNextVideoPlayerListener(){document.addEventListener("nextVideoPlaylistPlayed",(()=>{this.config.endlessSticky&&!this.endlessStickynessInitialized&&this.setEndlessStickyness({playlist:{},sticky:{targetClass:"sticky-video"}}),this.endlessStickynessInitialized=!0}))}}class b extends f{constructor(e,t,i){console.log("---------- STICKYMANAGER CORRIERE ----------"),super(e,t,i)}}class w extends f{constructor(e,t,i){console.log("---------- STICKYMANAGER GAZZETTA ----------"),super(e,t,i)}getVideoManagerTitle(){return this.config.stickyTitle||this.videoManager.video.stickyTitle||(0,d.WX)(this.videoManager.video.title)}}var P=i(8935);class x extends f{constructor(e,t,i){console.log("---------- STICKYMANAGER GAZZANET ----------"),super(e,t,i)}autoPlayVideoPreRoll(e){const t=e.autoplay,i=void 0===window.autoPlayVideoPreRoll&&window.tipologia&&"articolo"===window.tipologia;t?i?this.handleAutoPlayPreRollListener(e):this.initializeVideo(e):this.handleStartVideoListener(e)}handleAutoPlayPreRollListener(e){document.addEventListener("autoPlayVideoPreRoll",(()=>{this.initializeVideo(e)}))}handleStartVideoListener(e){document.addEventListener("RCSVideoManager:startVideo",(()=>{this.loadVideo=!0,this.videoEnded=!1,this.initializeVideo(e)}))}getVideoManagerTitle(){return this.config.stickyTitle||this.videoManager.video.stickyTitle||(0,d.WX)(this.videoManager.video.title)}}class k extends f{constructor(e,t,i){console.log("---------- STICKYMANAGER RCS ----------"),super(e,t,i)}autoPlayVideoPreRoll(e){e.autoplay&&this.initializeVideo(e)}}class V{constructor(e,t,i){switch((0,P.Hy)(e)){case"corriere":case"corrierefiorentino.corriere":case"corrieredelveneto.corriere":case"corrieredibologna.corriere":case"corrieredeltrentino.corriere":case"corrieredelmezzogiorno.corriere":case"corrieredellaltoadige.corriere":case"corrieredelfriuliveneziagiulia":return new b(e,t,i);case"gazzetta":return new w(e,t,i);case"gazzanet.gazzetta":return new x(e,t,i);case"rcs":return new k(e,t,i)}}}class E{constructor(e,t,i=0){this.el=e,this.video=t,this.videoPlayerManager=null,this.videoDataAttrs=null,this.playlistCurrentVideoIndex=i,this.isCorriere=(0,o.tF)(this.el),this.isIphone=Boolean(navigator.platform.match(/iPhone/)),this.isMobile="mobile"===window.device,this.currentPlayer=null}destroyPlayer(){this.videoPlayerManager.rollbackVideoThumb(this.el)}checkLuminosa(){const e=document.querySelector(".vjs-overlay-luminosa");this.isCorriere&&this.isMobile&&this.isIphone&&"LIVE"===this.video.liveStatus&&(e.style.top="14%",e.style.right="3%")}load(){this.videoDataAttrs=(0,o.ES)((0,o.P5)(this.el));const e=void 0!==this.videoDataAttrs.playlist,t=!e;this.videoPlayerManager=new y(this.el,this.videoDataAttrs),this.videoPlayerManager.initialize(this.video,this.videoDataAttrs,t),this.currentPlayer=this.videoPlayerManager.getCurrentPlayer(),document.dispatchEvent(new CustomEvent("RCSVideoManager:startVideo",{detail:this.videoPlayerManager})),this.currentPlayer.on("started",(()=>{this.checkLuminosa()})),this.el.setAttribute("data-player-active",!0),e&&(this.videoDataAttrs.upnextInSeconds=5,Promise.resolve().then(i.bind(i,2597)).then((({default:e})=>{new e(this.el,this.videoPlayerManager,this.playlistCurrentVideoIndex).load()})))}}i(2597)},8935:(e,t,i)=>{"use strict";i.d(t,{BF:()=>r,Eg:()=>p,Hy:()=>v,Nr:()=>l,P5:()=>o,RL:()=>d,V6:()=>u,Zs:()=>n,dA:()=>g,e$:()=>a,eL:()=>y,gt:()=>m,ns:()=>h,tF:()=>c});const o=e=>{try{const t=JSON.parse(e.getAttribute("data-config")),i={mobile:{},desktop:{}};return Object.assign(t,i[window.device||window.corriereDevice])}catch(e){console.error("Attributes object format is wrong!",e)}},r=e=>{const t=e||{},i=location.search.substring(1,location.search.length);if(i){i.split("&").forEach((e=>{const i=e.split("=");t[i[0]]=i[1]}))}return t},a=e=>{const t=o(e).sticky;if(t)return{targetClass:t.targetClass,times:parseInt(t.times,10)||1,relocation:null!==t.relocation&&t.relocation,viewport:t.viewport||0,tipo_video:t.tipo_video,showPostRoll:null===t.showPostRoll||t.showPostRoll,wrapper:t.wrapper||null,onVideoEndScrollBack:t.onVideoEndScrollBack,endlessSticky:t.endlessSticky||!1,startOnFullVideoVisibility:t.startOnFullVideoVisibility||!1,stickyTitle:t.stickyTitle||!1,initStickyNoAutoplay:t.initStickyNoAutoplay||!1}},s=e=>Object.keys(e).filter((t=>e[t].required)),n=e=>s({uuid:{required:!0},newspaper:{required:!0},thumb:{required:!1},muted:{required:!1},autoplay:{required:!1},disableFullScreen:{required:!1},skinColor:{required:!1},blockAdv:{required:!1},watermark:{required:!1},playerPage:{required:!1},sticky:{targetClass:{required:!0},relocation:{required:!0}},autosize:{required:!1},inactivityTimeout:{required:!1}}).every((t=>e.getAttribute("data-config").indexOf(t)>-1)),d=e=>s({targetClass:{required:!0},relocation:{required:!0}}).every((t=>void 0!==o(e).sticky[t])),l=e=>Boolean(e&&e.sticky&&e.sticky.targetClass),c=e=>"corriere"===o(e).newspaper,h=e=>"gazzetta"===o(e).newspaper,u=()=>Boolean(void 0!==window.network&&"verticali"===window.network),p=e=>"rcs"===o(e).newspaper,v=e=>o(e).newspaper,m=e=>e.playlist&&e.playlist.inpage,g=e=>e.playlist.sitehp,y=e=>{const t={id:e};document.querySelector("#dugoutplayer").contentWindow.postMessage("dugout://"+JSON.stringify(t),"*")}},8615:(e,t,i)=>{"use strict";i.d(t,{At:()=>c,K5:()=>p,KX:()=>h,WX:()=>d,_A:()=>n,ej:()=>u,gB:()=>a,nV:()=>r,yD:()=>s});var o=i(5838);const r=()=>document.createElement("div"),a=e=>{const t=(0,o.g)(e);window.location.href=t},s=(...e)=>{const[t,...i]=e;return i[1]||!1?console.log(`-- DEBUGGER ${t} --`,i[0]):""},n=e=>e.split(":").reduce(((e,t)=>60*e+Number(t))),d=e=>((e,t=137)=>e.length>t?e.substring(0,t)+"...":e)(e,window.innerWidth>=1440?137:95),l=(e,t,i)=>void 0===i||0===Number(i)?Math[e](t):(t=Number(t),i=Number(i),isNaN(t)||"number"!=typeof i||i%1!=0?NaN:(t=t.toString().split("e"),t=(t=Math[e](Number(t[0]+"e"+(t[1]?Number(t[1])-i:-i)))).toString().split("e"),Number(t[0]+"e"+(t[1]?Number(t[1])+i:i)))),c=(e,t)=>l("round",e,t),h=e=>{const t=new RegExp(/([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):.*/),i=e.match(t);return`${i[3]} ${{"01":"gen","02":"feb","03":"mar","04":"apr","05":"mag","06":"giu","07":"lug","08":"ago","09":"set",10:"ott",11:"nov",12:"dic"}[i[2]]} ${i[1]} - ${i[4]}:${i[5]}`};function u(e){for(var t=e+"=",i=document.cookie.split(";"),o=0;o<i.length;o++){for(var r=i[o];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}function p(e){let t="";const i=document.cookie.split(";");let o=e=>!1;o="string"==typeof e?t=>t.includes(e):t=>t.search(e)>-1;const r=i.find(o);return r&&(t=r.split("=")[1]),t}},447:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});const o=e=>{const t=location.search.substring(1,location.search.length);let i=!1;return t.split("&").forEach((t=>{t.substring(0,t.indexOf("="))===e&&(i=t.substring(t.indexOf("=")+1))})),i||!1}},8812:(e,t,i)=>{"use strict";i.d(t,{Eq:()=>b.Eq,E2:()=>b.E2,_G:()=>o,nV:()=>x.nV,MX:()=>r,ii:()=>b.ii,P5:()=>w.P5,Wz:()=>a.Z,ie:()=>b.ie,e$:()=>w.e$,dg:()=>m,wg:()=>y,Kw:()=>g,Zs:()=>w.Zs,RL:()=>w.RL,tF:()=>w.tF,ns:()=>w.ns,Cj:()=>f,Eg:()=>w.Eg,rQ:()=>b.EB,Nr:()=>w.Nr,V6:()=>w.V6,Ds:()=>b.Ds,GO:()=>b.GO,Gv:()=>b.Gv,$L:()=>b.$L,Fw:()=>v,kd:()=>u,ES:()=>p,dU:()=>P.d,y:()=>b.y});const o={playerId:"player_rcs",containerPlayer:"#player_rcs"},r=(e={},t="")=>{const i=t.split(".");let o=e;for(let e=0;e<i.length;++e){if(void 0===o[i[e]])return;o=o[i[e]]}return o};var a=i(447),s=i(6058),n=i.n(s),d=i(760);const l={hierarchicalAssetProperties:{linkAllowed:!0,mailAllowed:!0,syndication:!1}},c=(e,t,i,o,r)=>e.substring(e.indexOf(t),e.indexOf(i)).replace(o,r),h=(e,t,i=!1,o=!1)=>{const r=["gazzetta","gazzanet.gazzetta"];r.includes(e)||(i=!0);const s=(0,a.Z)("forceProd"),u=s?s.split(","):[],p=i?e:t.includes("gazzanet")?"gazzanet.gazzetta":"gazzetta",v="rcs"!==p&&"corriere"!==p&&"corrierefiorentino.corriere"!==p&&"corrieredelveneto.corriere"!==p&&"corrieredeltrentino.corriere"!==p&&"corrieredibologna.corriere"!==p&&"corrieredelfriuliveneziagiulia"!==p&&"corrieredelmezzogiorno.corriere"!==p&&"corrieredellaltoadige.corriere"!==p&&"gazzetta"!==p||"development"!==n().environment||u.includes(t)||!0===o?"video":"dev-video";return fetch(`https://${v}.${p}.it/video-json/${t}`).catch((e=>{throw new Error(e)})).then((e=>e.text())).then((e=>{let o={};try{o=JSON.parse(c(e,"##start-video##","##end-video##","##start-video##","")),o.feed=JSON.parse(c(e,"##start-feed##","##end-feed##","##start-feed##","")),o.channel=JSON.parse(c(e,"##start-channel##","##end-channel##","##start-channel##","")),o.newspaper=JSON.parse(c(e,"##start-newspaper##","##end-newspaper##","##start-newspaper##","")),a=o,o=Object.assign({},l,a)}catch(e){if(!i){const e=`ERROR FETCHING ON ${p} RETRY ON ${r.find((e=>e!==p))}`;return console.log(e),h(r.find((e=>e!==p)),t,!0)}const o=`ERROR FETCHING AFTER RETRYING ON ${p}`;(0,d.getEventsBus)().error.dispatch({message:o}),console.log(e)}var a;return Promise.resolve(o)}))},u=h,p=e=>{try{return JSON.parse(JSON.stringify(e))}catch(e){console.error("Serializazion Error",e)}},v=(e,t)=>{const i=t.split(/([a-zA-Z0-9]{2})/).filter((e=>e&&"-"!==e)).join("/");return fetch(`https://correlati.${e}.it/${e}/${i}/${t}.json`).catch((o=>{throw new Error(`Unable to load https://correlati.${e}.it/${e}/${i}/${t}.json`,{cause:o})})).then((e=>e.json())).then((e=>Promise.resolve(e)))},m=e=>{const t=new Date(e),i={weekday:"short",day:"numeric",month:"long",year:"numeric"},o=(new Date).getTime()+864e5;if(o>t){const e=(new Date).toLocaleTimeString("IT",{hour:"2-digit"})-new Date(t).toLocaleTimeString("IT",{hour:"2-digit"}),i=(new Date).toLocaleTimeString("IT",{hour:"2-digit"})-new Date(t).toLocaleTimeString("IT",{minute:"2-digit"});return e<1?(console.log("minutes",i),i<1?"adesso":`${i} minuti fa`):`${e} Ore fa`}if(o<t){return`${t.toLocaleDateString("it-IT",i)} - ${t.toLocaleTimeString("IT",{hour:"2-digit",minute:"2-digit"})}`}},g=e=>{document.addEventListener("RCSVideoManager:rollback",(t=>{const i=t.detail;e(i)}))},y=()=>{let e=!("undefined"==typeof webSectionsFromSolr||!webSectionsFromSolr||""===webSectionsFromSolr)&&JSON.parse(webSectionsFromSolr);const t=new Set(["sky","dugout","onefootball"]);e=e&&e.filter((e=>!t.has(e.toLowerCase())));const i=/(_hl)|(_HL)/;if(e){const t=e.find((e=>i.test(e)));return t||e[0]}return window.video?.webSections?.[0].webSection||!1},f=e=>{if(!e)return!1;return Boolean(["corrieredelmezzogiorno","corrieredeltrentino","corrieredelveneto","corrierefiorentino","corrieredibologna"].find((t=>e.includes(t))))};var b=i(3008),w=i(8935),P=i(8231),x=i(8615)},760:(e,t,i)=>{"use strict";i.r(t),i.d(t,{exists:()=>n,getEventsBus:()=>c,getVideoManager:()=>l,initialize:()=>s});const o=(e,t)=>({dispatch:i=>{const o={detail:i};document.dispatchEvent(new CustomEvent(`${t}:${e}`,o))},addListener:i=>{document.addEventListener(`${t}:${e}`,i)}});var r=i(3101);let a={initialized:!1,videoManager:{selector:""},eventsBus:{prefix:""}};const s=e=>{a={initialized:!0,...e}},n=e=>{let t=!1;return window.RcsVideoExtInstances&&window.RcsVideoExtInstances[e]&&(t=!0),t},d=(e,t)=>{let i=null;return a.initialized?(window.RcsVideoExtInstances&&window.RcsVideoExtInstances[e]||(window.RcsVideoExtInstances||(window.RcsVideoExtInstances={}),window.RcsVideoExtInstances[e]=t()),i=window.RcsVideoExtInstances[e]):console.error("No instances' configs"),i},l=()=>d("videoManager",(()=>new r.default(a.videoManager.selector))),c=()=>d("eventBus",(()=>(({prefix:e})=>({error:o("error",e)}))({prefix:a.eventsBus.prefix})))},5209:(e,t,i)=>{"use strict";i.d(t,{Qk:()=>a,_E:()=>r});var o=i(8615);const r=(e,t,i,o)=>{const r={},a={};return"desktop"===t?(r.width=document.querySelector(e).clientWidth,r.height=Math.round(r.width*i.height/i.width)):(r.height=Math.min(window.innerWidth,window.innerHeight),r.width=Math.round(r.height*i.width/i.height)),a.height="auto",a.width="auto","true"===o?a:r},a=(e,t,i)=>{let r=null;try{let a,s;const n=i.aspectRatio.width/i.aspectRatio.height;let d=t.thumbnails.thumbnail.filter((e=>{let t=e.width/e.height;return t===n||(0,o.At)(t,-2)===(0,o.At)(n,-2)}));d=d.sort(((e,t)=>e.width-t.width)),a=[],d.forEach((t=>t.width<=e&&a.push(t))),a=a.reverse();const l=d.reverse();s=[],l.forEach((t=>t.width<=e&&s.push(t)));const c=a[0],h=s[0];if(c&&h)r=e-c.width<h.width-e?c.value:h.value;else if(c)r=c.value;else if(h)r=h.value;else if(0===t.thumbnails.thumbnail.length)r=i.defaultImage;else{const e=Math.max(...t.thumbnails.thumbnail.map((e=>e.width)));r=t.thumbnails.thumbnail.find((t=>t.width===e)).value}}catch(e){console.warn("Error in searching poster image",e)}return(e=>{let t=e;if(t){const e=t.match(/(.*)images2?\.(.*)\.corriereobjects.it(.*)/);e&&(t=`${e[1]}images2-${e[2]}.corriereobjects.it${e[3]}`)}return t?t.replace("http:",""):t})(r)}},5838:(e,t,i)=>{"use strict";i.d(t,{g:()=>s});var o=i(6058),r=i.n(o),a=i(447);const s=e=>{const{params:t}=r().linkUrlParamListener;if(!t||!t.length)return e;const i=t.map((e=>({name:e,value:(0,a.Z)(e)}))).filter((e=>e.value));if(i.length){const t=i.map((e=>e.name+"="+e.value)).join("&");if(e&&(e.startsWith("http")||e.startsWith("/"))){const i=e.indexOf("#")>-1?e.substring(e.indexOf("#")):"";return(e=e.replace(i,"").trim())+(e.indexOf("?")>-1?"&":"?")+t+i}}return e}},8231:(e,t,i)=>{"use strict";i.d(t,{d:()=>o});const o=(e,t,i=!1)=>{const{wrapper:o,targetClass:r}=e,a=(e=>document.querySelector(`.${e}`))(o);a&&(i?(a.classList.add(r),a.parentElement.prepend(t)):a.classList.remove(r))}},3008:(e,t,i)=>{"use strict";i.d(t,{$L:()=>l,Ds:()=>g,E2:()=>s,EB:()=>h,Eq:()=>n,GO:()=>a,Gv:()=>d,fc:()=>v,ie:()=>r,ii:()=>f,mL:()=>c,y:()=>y});var o=i(760);const r=(e,t)=>{const i=e.offsetWidth;return t&&t.thumbnails&&t.thumbnails.thumbnail.reduce(((e,t)=>Math.abs(t.width-i)<Math.abs(e.width-i)?t:e)).value},a=(e,t)=>t<=0&&t<e,s=(e,t)=>!e.classList.contains("rcs-video")&&!t.target.getAttribute("data-anchor"),n=e=>{const t=e.closest(".media");t&&t.classList.toggle("play-video")},d=()=>{window.autorefresh&&window.autorefresh.pause()},l=()=>{window.autorefresh&&window.autorefresh.resume()},c=e=>{e.scrollIntoView({behavior:"smooth",block:"center"})},h=()=>window.playlist&&window.playlist.videos&&window.playlist.videos.video,u=e=>e.match('^(" "|[0-9])+$'),p=e=>e.includes("embed.dugout.com"),v=e=>{e.providerSrc="rcs",e.mediaProfile&&e.mediaProfile.mediaFile&&[{testingFunc:p,name:"dugout"},{testingFunc:u,name:"sky"}].forEach((t=>{t.testingFunc(e.mediaProfile.mediaFile[0].value.toString())&&(e.providerSrc=t.name)}))},m=e=>(e=>e&&e.feed&&e.feed.title&&e.feed.title.includes("HL")&&["Coppaitalia_HL","SerieA_HL"].indexOf(e.feed.title)>-1)(e)&&!((e,t=0,i=0)=>{e.pubDate=e.pubDate.replace(/Z$/,"");const o=new Date(e.pubDate);let r=new Date(e.pubDate);r.setHours(o.getHours()+t),r=r.getTime();const a=(new Date).getTime();let s=new Date(e.pubDate);return s.setDate(o.getDate()+i),s=s.getTime(),r>a||s>a})(e,3),g=e=>(e=>!e.id)(e)?((0,o.getEventsBus)().error.dispatch({message:"Video blocked by missing data"}),{reason:{title:"VIDEO NON DISPONIBILE",subtitle:""}}):m(e)?((0,o.getEventsBus)().error.dispatch({message:"Blocked by time window"}),{reason:{title:"VIDEO NON DISPONIBILE",subtitle:""}}):!(e=>!(!window.server_date_iso||!e.endDate)&&(new Date(window.server_date_iso).getTime()/1e3>new Date(e.endDate).getTime()/1e3||"ACTIVE"!==e.state))(e)||((0,o.getEventsBus)().error.dispatch({message:"Video blocked by expiration"}),{reason:{title:"VIDEO NON DISPONIBILE",subtitle:""}}),y=(e,t,i)=>{if(e&&t&&i)try{let o=new URL(e,`${window.location.origin}${window.location.pathname}`),r=new URLSearchParams(o.search.slice(1));return r.set(t,i),e.includes(window.location.origin)?`${window.location.origin}${o.pathname}?${decodeURIComponent(r)}`:`${o.pathname}?${decodeURIComponent(r)}`}catch(e){throw new Error("Unable to update url param")}},f=e=>{const t=e.length;return{[Symbol.asyncIterator](){let i=0;return{next(){const o=i===t||5===i;let r;if(!o){const{id:t,newspaper:o,permalink:a}=e[++i];r={id:t,newspaper:o,permalink:a}}return Promise.resolve({value:r,done:o})},return:()=>({done:!0})}}}}},7835:()=>{}},o={};function r(e){var t=o[e];if(void 0!==t)return t.exports;var a=o[e]={id:e,exports:{}};return i[e](a,a.exports,r),a.exports}r.m=i,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,i)=>(r.f[i](e,t),t)),[])),r.u=e=>"20240116143341206.extra/chunks/"+e+".min.js",r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="RcsVideoManager:",r.l=(i,o,a,s)=>{if(e[i])e[i].push(o);else{var n,d;if(void 0!==a)for(var l=document.getElementsByTagName("script"),c=0;c<l.length;c++){var h=l[c];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+a){n=h;break}}n||(d=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,r.nc&&n.setAttribute("nonce",r.nc),n.setAttribute("data-webpack",t+a),n.src=i),e[i]=[o];var u=(t,o)=>{n.onerror=n.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],n.parentNode&&n.parentNode.removeChild(n),r&&r.forEach((e=>e(o))),t)return t(o)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),d&&document.head.appendChild(n)}},r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="https://components2.corriereobjects.it/rcs_video-manager/v2/",(()=>{var e={826:0};r.f.j=(t,i)=>{var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)i.push(o[2]);else{var a=new Promise(((i,r)=>o=e[t]=[i,r]));i.push(o[2]=a);var s=r.p+r.u(t),n=new Error;r.l(s,(i=>{if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;n.message="Loading chunk "+t+" failed.\n("+a+": "+s+")",n.name="ChunkLoadError",n.type=a,n.request=s,o[1](n)}}),"chunk-"+t,t)}};var t=(t,i)=>{var o,a,[s,n,d]=i,l=0;if(s.some((t=>0!==e[t]))){for(o in n)r.o(n,o)&&(r.m[o]=n[o]);if(d)d(r)}for(t&&t(i);l<s.length;l++)a=s[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0},i=self.webpackChunkRcsVideoManager=self.webpackChunkRcsVideoManager||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var a=r(8138);return a=a.default})()}));