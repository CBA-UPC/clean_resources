(function(){var n="0.2.1",a,e="undefined",t=25,r=parseInt(1e3/t),i=a,o={"function":!0,object:!0},s={DEBUG_MODE:!1,counterID:"1034",instanceID:"externalConf###Instanceid"},u=c="HISTATS_CANVAS_DEBUG_ON";s.DEBUG_MODE=u(window[c])&&1==window[c];var f=function(){return s.instanceID},l="_HistatsCounterGraphics_",d,h=function(){return l+s.counterID},v=b=g=function(e,t){var o=e||{};try{var c=f={ANIMATION_RUNNING_STATUS:!0,ANIMATION_STARTED:!1,AUTOSTART:c(o),_STOPPED:!1,INSTANCE_ID:"-"+parseInt(1e4*Math.random())},l=function(){return f.INSTANCE_ID},v=100,g=1,p=function(){return t.document},m=w=A=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.msRequestAnimationFrame||t.oRequestAnimationFrame||w,C=t["Date"]||{},I=o.getInstanceID=l;var T=h();o.IS_HISTATS_CANVAS=!0,o.globalObjectName=T,o.$window=t;var S=_={w:0,h:0,yBase:0,xBase:0,hasShadow:!1,hasLabel:!1,shadowOffsetX:2,shadowOffsetY:2,shadowBlur:1,doMouseOverOut:1},B={msLastFrameDrawn:0,msPerFrame:r,frameCounter:0,isInAnimationTransition:!1,animation_duration_inFrames:20,waitframesBetweenTwoAnimations:80,framesBetweenTwoAnimations:100,currentLoopFrame:0,autoTriggerTextChange_onFrame:a,customization:{}},x={domCanvasObject:null,canvas2dContext:null,canvasProperties:_},y=),O=function(){return s.counterID},N=E=k=[],P=U=F=M=D=R=V=L=j=X=G=H=function(n,a,e){a.addEventListener?a.addEventListener(n,e,!1):a.attachEvent?a.attachEvent("on"+n,e):a[n]=e},Y=q=W=J=z=Q=y.subscribe("setAnimationProperties",,y.subscribe("draw-callback-publish-reconfiguration",,y.subscribe("configuration-changed",;var Z=K=function(){return x},$=nn=an=en=tn=rn=y.subscribe("setCanvasProperties",rn,10);var on=y.subscribe("clear-canvas-rectangle",on,10);var sn=un=cn=y.subscribe("draw-callback-requested-reconfiguration",cn,15),o.__CODE_VERSION=n,o.getCanvasObject=K,o.getCanvas2dContext=function(){return K().canvas2dContext},o.onCanvas2dContext=en,o.getXYCanvas=o.addDrawCallback=q,o.getCanvasProperties=o.setCanvasProperties=o.updateCanvasProperties=o.getAnimationFrames=function(){return B.frameCounter},o.getAnimationControl=function(){return B},o.setAnimationControl=function(n){for(var a in n)n.hasOwnProperty(a)&&(B[a]=n[a])},o.start=Y,o.changeRunningStatus=Z,o.getRunningStatus=function(){return f.ANIMATION_RUNNING_STATUS},o.eventBus=y,o.getDebugMode=function(){return s.DEBUG_MODE},function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var a=n.bars={},e=!1,t=3,r=1,i=0,o=[2,5,10];n.eventBus.subscribe("set-bars-params",function(a){f(a),n.eventBus.publish("configuration-changed",{})});var s=[],u={xBase:5,yBase:13,hMin:2,hMax:10,w:4,barsColours:[["#3e8bfd","#2572e4"],["#feb23f","#dc901d"],["#d83f3f","#b41b1b"]],parent:n},c=function(){return u},f=l=function(n){e=!0;for(var a=0;a<t;a++)n.push({x:a*(u.w+1),y:0,width:u.w,height:o[a],animateDirection:r,gradient:null,gradientStart:u.barsColours[a][0],gradientEnd:u.barsColours[a][1]})},d=function(a){var e=.5,t=a.height,o=n.getXYCanvas();a.animateDirection==r&&t>=u.hMax?a.animateDirection=i:a.animateDirection==i&&t<=u.hMin&&(a.animateDirection=r),t+=e*(a.animateDirection==r?1:-1),a.y=u.yBase-t+o.y,a.height=t},h=function(a){return function(e){var t=n.getXYCanvas();e.shadowOffsetX=0,e.shadowOffsetY=0,e.shadowBlur=0,e.beginPath(),e.fillStyle=g(a,e),e.fillRect(t.x+u.xBase+a.x,a.y,a.width,a.height)}},v=function(a){n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:b,priority:20,name:"bars_draw"}]})};n.eventBus.subscribe("draw-callback-requested-reconfiguration",v,11);var b=function(){e||l(s);for(var a in s)if(s.hasOwnProperty(a)){var t=s[a];d(t),n.onCanvas2dContext(h(t))}},g=function(a,e){var t=n.getXYCanvas(),r=u.xBase,i=e.createLinearGradient(r+a.x+t.x,a.y,r+a.x+a.width,a.height+a.y);return i.addColorStop(0,a.gradientStart),i.addColorStop(1,a.gradientEnd),i};a.getBoxProperties=c,a.setBoxProperties=f,a.transformBarsColour=a.draw=b}.call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var e=n.statsText={},t={xBase:0,yBase:0},r=i=function(){var a=n.getXYCanvas();return t.xBase=a.x,t.yBase=a.y,t},o=[],s={stats_values:[],indexStatToShow:0,drawValueCallback:a,drawValueCallbackWithValue:a,drawMetricCallback:a},u=25,c=0,f=l=n.eventBus.subscribe("set-textbox-style",function(a){o=a,n.eventBus.publish("configuration-changed",{})}),n.eventBus.subscribe("canvas-drawValueFunction",function(n){"undefined"!=typeof n["transformationFunction"]&&(s.drawValueCallback=n["transformationFunction"])});function d(n,a,e,t){n=(n+"").replace(/[^0-9+\-Ee.]/g,"");var r=isFinite(+n)?+n:0,i=isFinite(+a)?Math.abs(a):0,o="undefined"==typeof t?",":t,s="undefined"==typeof e?".":e,u="",c=return u=(i?c(r,i):""+Math.round(r)).split("."),u[0].length>3&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,o)),(u[1]||"").length<i&&(u[1]=u[1]||"",u[1]+=new Array(i-u[1].length+1).join("0")),u.join(s)}var h=function(e){if(s.stats_values=e,s.drawValueCallback!=a){var t=e[0].value;s.drawValueCallbackWithValue=s.drawValueCallback(t)}n.eventBus.publish("configuration-changed",{})},v=b=function(n){if(n===s.stats_values)return!1;if(typeof n==typeof[])for(var a in n)if(n.hasOwnProperty(a)&&typeof n[a]!=typeof{})return!1;return!0},g=p=function(){if(f()){var a=g();if("undefined"!=typeof n.$window&&"undefined"!=typeof n.$window[a]){var e=n.$window[a];b(e)&&h(e)}}},m=function(n){return(""+n).match(/^\s*[0-9]+\s*$/)?d(n,0,""," "):n},w=function(a,e){return function(t){t.shadowColor="transparent",t.font=a.name.font,t.textAlign=a.name.align,t.fillStyle=a.name.color,t.fillText(e.name,a.name.x+r().xBase,a.name.y+r().yBase),t.font=a.value.font,t.textAlign=a.value.align,t.fillStyle=a.value.color;var i=e.value;try{i=m(e.value)}catch(o){n.debug(o)}t.fillText(i,a.value.x+r().xBase,a.value.y+r().yBase)}},A=function(){s.indexStatToShow+=o.length,s.indexStatToShow>=s.stats_values.length&&(s.indexStatToShow=0)},C=!1;n.eventBus.subscribe("draw-hideText",function(n){C=!0},11),n.eventBus.subscribe("draw-unHideText",11);var I=function(n){if(!C){var a,e,t=s.indexStatToShow,r=v(),i=r.length;r.length>o.length&&(i=o.length);for(var u=0;u<i&&(t>=r.length&&(t=0),r[t]);u++)a=o[u],e=r[t],w(a,e)(n),t++}},T=function(n,e){return c++,p(),i(),s.drawValueCallbackWithValue!=a?(s.drawValueCallbackWithValue(n),void 0):(I(n),void 0)},S=n.eventBus.subscribe("draw-callback-requested-reconfiguration",S,11);var _=n.eventBus.subscribe("drawing-change-text",A,10);e.draw=T,e.setBoxes=l,e.setValues=h}.call(o),call(o),function(){var n=this;n.IS_HISTATS_CANVAS||(n={});var e=n.counter={};e.ID="1034",e.properties={w:150,h:23,hasShadow:!0};var t=!1,r={backgroundImageObject:a},i={xBase:6,yBase:17,barsColours:[["#999999","#999999"],["#999999","#999999"],["#999999","#999999"]]},o={animation_duration_inFrames:20,autoTriggerTextChange_onFrame:10,waitframesBetweenTwoAnimations:110},s=[{name:{x:26,y:16,align:"left",color:"#fff",font:"11px Arial"},value:{x:145,y:16,align:"right",color:"#fff",font:"11px Arial"}}];n.eventBus.publish("set-textbox-style",s),n.eventBus.publish("setCanvasProperties",e.properties),n.eventBus.publish("setAnimationProperties",o),n.eventBus.publish("set-bars-params",i);var u=c=function(e){r.backgroundImageObject!=a&&n.eventBus.publish("draw-callback-publish-reconfiguration",{canvasCallbacks:[{cb:u,priority:10,name:"drawBackground"}]})};return n.eventBus.subscribe("draw-callback-requested-reconfiguration",c,13),n.eventBus.subscribe("background-image-loaded",13),n}.call(o),f.AUTOSTART&&o.start()}catch(fn){}return o},p="base.js",m=window,w="_DEBUG_HISTATSCANVAS_RETURN_BUILDER";_value_RETURN_BUILDER=u(window[w])&&window[w]===!0,window[h()]=g,window["histats_canvascounters_"+p]=g}).call(this);