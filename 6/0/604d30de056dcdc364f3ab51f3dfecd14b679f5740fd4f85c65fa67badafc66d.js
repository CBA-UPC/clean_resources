/*! For license information please see 56.13f7fc82.chunk.js.LICENSE.txt */
(this.webpackJsonphost=this.webpackJsonphost||[]).push([[56],{100:1017:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={"ANDAMAN AND NICOBAR ISLAND":"AN","ANDHRA PRADESH":"AP","ARUNACHAL PRADESH":"AR",ASSAM:"AS",BIHAR:"BR",CHANDIGARH:"CH",CHHATTISGARH:"CT","DADRA AND NAGAR HAVELI":"DN","DAMAN AND DIU":"DD",DELHI:"DL",GOA:"GA",GUJARAT:"GJ",HARYANA:"HR","HIMACHAL PRADESH":"HP","JAMMU AND KASHMIR":"JK",JHARKHAND:"JH",KARNATAKA:"KA",KERALA:"KL",LAKSHADWEEP:"LD","MADHYA PRADESH":"MP",MAHARASHTRA:"MH",MANIPUR:"MN",MEGHALAYA:"ML",MIZORAM:"MZ",NAGALAND:"NL",ORISSA:"OR",PUDUCHERRY:"PY",PUNJAB:"PB",RAJASTHAN:"RJ",SIKKIM:"SK","TAMIL NADU":"TN",TELANGANA:"TG",TRIPURA:"TR","UTTAR PRADESH":"UP",UTTARAKHAND:"UT","WEST BENGAL":"WB",AN:"AN",AP:"AP",AR:"AR",AS:"AS",BR:"BR",CH:"CH",CT:"CT",DN:"DN",DD:"DD",DL:"DL",GA:"GA",GJ:"GJ",HR:"HR",HP:"HP",JK:"JK",JH:"JH",KA:"KA",KL:"KL",LD:"LD",MP:"MP",MH:"MH",MN:"MN",ML:"ML",MZ:"MZ",NL:"NL",OR:"OR",PY:"PY",PB:"PB",RJ:"RJ",SK:"SK",TN:"TN",TG:"TG",TR:"TR",UP:"UP",UT:"UT",WB:"WB"},i={country:"pidlDocInfo.parameters.allowedCountries"};nction s(e,t,n){if(void 0===n&&(n=!1),a(e)&&((l=t)&&"[object Array]"===o(l))){var r=Object.keys(e),i={};n?(t=t.map((function(e){return e.toLowerCase()})),r=r.map(()):r.forEach(();var s={};return r.forEach((function(n){t.indexOf(n)>=0&&(s[i[n]]=e[i[n]])})),s}var l}function l(e){var t=null;return e&&e.partnerData&&e.partnerData.inputParameters&&e.partnerData.inputParameters.pidlDocInfo&&e.partnerData.inputParameters.pidlDocInfo.parameters&&(t=e.partnerData.inputParameters.pidlDocInfo.parameters.allowedPaymentMethods),t&&t.length&&(t=t.map((function(e){return e.toUpperCase()}))),t}function u(e,t,n){var r=t(e);return!!r&&n(r)}function d(e){return e&&e.paymentMethod&&"credit_card"===e.paymentMethod.paymentMethodFamily}function c(e,t,n){return e&&e.paymentMethod&&e.paymentMethod.paymentMethodFamily===t&&e.paymentMethod.paymentMethodType===n}function p(e){return c(e,"offline_bank_transfer","check")}function m(e){return c(e,"credit_card","visa")}function f(e){return c(e,"credit_card","mc")}function h(e){return c(e,"credit_card","amex")}function y(e){return c(e,"credit_card","discover")}function g(e){return c(e,"credit_card","jcb")}function v(e){return c(e,"credit_card","hipercard")}function P(e){return c(e,"credit_card","elo")}function b(e){return c(e,"credit_card","unionpay_creditcard")}function I(e){return c(e,"credit_card","unionpay_debitcard")}function E(e){return c(e,"ewallet","paypal")}function S(e){return c(e,"ewallet","stored_value")}function D(e){return c(e,"direct_debit","ach")}function C(e){return c(e,"direct_debit","sepa")}unction k(e){return c(e,"mobile_billing_non_sim","spt-us-nonsim")}function x(e){return c(e,"mobile_billing_non_sim","vzw-us-nonsim")}function w(e){return c(e,"virtual","alipay")}function R(e){return c(e,"virtual","unionpay")}function A(e){return c(e,"virtual","invoice_basic")}nction F(e){if(e&&e.details&&d(e)){var t=e.details,n=t.expiryMonth,r=t.expiryYear,i=void 0,o=void 0;try{i=Number(n),o=Number(r)}catch(u){return!1}var a=new Date,s=a.getMonth()+1,l=a.getFullYear();return l>o||s>i&&l>=o}return!1}unction N(e){return e&&e.contextData&&e.contextData.primaryPaymentInstrument}function M(e){return e&&e.contextData&&e.contextData.backupPaymentInstrument}unction V(e){var t=[],n=null,r=l(e);if(e&&e.partnerData&&e.partnerData.inputParameters&&e.partnerData.inputParameters.pidlDocInfo&&e.partnerData.inputParameters.pidlDocInfo.parameters&&e.partnerData.inputParameters.pidlDocInfo.parameters.filters&&(n=e.partnerData.inputParameters.pidlDocInfo.parameters.filters.allowedCurrencies),n&&n.length&&(n=n.map(()),e&&e.contextData&&e.contextData.length)for(var i=e.contextData,o=0;o<i.length;o++){var a=i[o],s=a.currency&&a.currency.toUpperCase();if(!(n&&n.length&&n.indexOf(s)<0)){if(r&&r.length){var u=null,d=null,c=null,p=null,m=a.primaryPaymentInstrument&&a.primaryPaymentInstrument.paymentMethod;m&&(u=(m.paymentMethodFamily+"."+m.paymentMethodType).toUpperCase(),d=m.paymentMethodFamily.toUpperCase());var f=a.backupPaymentInstrument&&a.backupPaymentInstrument.paymentMethod;if(f&&(c=(f.paymentMethodFamily+"."+f.paymentMethodType).toUpperCase(),p=f.paymentMethodFamily.toUpperCase()),r.indexOf(u)<0&&r.indexOf(d)<0)continue;if(f&&r.indexOf(c)<0&&r.indexOf(p)<0)continue}t.push(a)}}return t}var U={filterBillingGroups:V,filterPaymentInstruments:function(e){var t=[],n=l(e),r=!1,i=e&&e.partnerData&&e.partnerData.inputParameters&&e.partnerData.inputParameters.pidlDocInfo;if(i&&i.parameters&&i.parameters.filters&&(r=i.parameters.filters.filterExpiredPayment),e&&e.contextData&&e.contextData.length){var o=e.contextData;if(e.partnerData&&e.partnerData.prefillData){var a=e.partnerData.prefillData.paymentInstruments;a&&o.push.apply(o,a)}for(var s=0;s<o.length;s++){var u=o[s];if(n&&n.length&&u.paymentMethod){var d=(u.paymentMethod.paymentMethodFamily+"."+u.paymentMethod.paymentMethodType).toUpperCase(),c=u.paymentMethod.paymentMethodFamily.toUpperCase();if(n.indexOf(d)<0&&n.indexOf(c)<0)continue}r&&F(u)||t.push(u)}}return t},filterOptions:function(e){var t=e.contextData;if(!t)return t;var n=t.propertyName,r=t.possible_values,o=t.possibleValues,l=t.possibleOptions;if(!n)return t;var u=function(e,t){if(e&&e.partnerData&&e.partnerData.inputParameters&&t){var n=i[t];if(n){var r=e.partnerData.inputParameters;return n.split(".").forEach((function(e){r=a(r)?r[e]:void 0})),r}}}(e,n);return u?(r&&(r=s(r,u,!0)),o&&(o=s(o,u,!0)),l&&(l=s(l,u,!0)),{propertyName:n,possible_values:r,possibleValues:o,possibleOptions:l}):t},getBalanceInLocalCurrency:function(e){var t=e||{},n=t.contextData,r=void 0===n?{}:n,i=t.partnerData,o=void 0===i?{}:i,a=r.currency,s=r.balanceAmount;if(void 0!==s&&null!==s){var l=o&&o.inputParameters&&o.inputParameters.pidlDocInfo&&o.inputParameters.pidlDocInfo.parameters&&o.inputParameters.pidlDocInfo.parameters.language;if(a&&l){var u={style:"currency",currency:a};try{return s.toLocaleString(l,u)}catch(d){}}return s.toString&&s.toString()}return s},getIndiaPANID:function(e){var t=e&&e.dataSources&&e.dataSources.taxResource&&e.dataSources.taxResource.value;if(t&&t.length)for(var n=0;n<t.length;n++){var r=t[n];if(r.type&&"INDIAPANID"===r.type.toUpperCase())return r.taxId}return null},getIndiaGSTID:function(e){var t=function(e){if(!e)return null;var t=e.dataSources,n=e.partnerData;if(!t)return null;var r=t.profileResource,i=t.addressResource;return r&&r.address&&r.address.region?r.address.region:r&&r.default_address&&r.default_address.region?r.default_address.region:i&&i.serviceUsageAddress&&i.serviceUsageAddress.state?i.serviceUsageAddress.state:n&&n.prefillData&&(n.prefillData.state||n.prefillData.region)?n.prefillData.region?n.prefillData.region:n.prefillData.state:null}(e),n=t&&r[t.toUpperCase()],i=e&&e.dataSources&&e.dataSources.taxResource&&e.dataSources.taxResource.value;if(n&&i&&i.length)for(var o=0;o<i.length;o++){var a=i[o];if(a.state&&a.state.toUpperCase()===n&&a.type&&"GSTINID"===a.type.toUpperCase())return a.taxId}return null},hasBGBackupPI:function(e){return u(e,M,()},isBGBackupPICheck:function(e){return u(e,M,p)},isBGBackupPICreditCard:function(e){return u(e,M,d)},isBGBackupPINonCCNonCheck:function(e){return!u(e,M,d)&&!u(e,M,p)},isBGBackupPINonCreditCard:function(e){return!u(e,M,d)},isBGPrimaryPICheck:function(e){return u(e,N,p)},isBGPrimaryPICreditCard:function(e){return u(e,N,d)},isBGPrimaryPINonCCNonCheck:function(e){return!u(e,N,d)&&!u(e,N,p)},isBGPrimaryPINonCreditCard:function(e){return!u(e,N,d)},isCreditCardExpired:function(e){return u(e,H,F)},isCreditCardNotExpired:function(e){return u(e,H,_)},isUserPICheck:function(e){return u(e,H,p)},isUserPICreditCard:function(e){return u(e,H,d)},isUserPINonCCNonCheck:function(e){return!u(e,H,d)&&!u(e,H,p)},isUserPINonCreditCard:isUserPIVisa:function(e){return u(e,H,m)},isUserPIMastercard:function(e){return u(e,H,f)},isUserPIAmex:function(e){return u(e,H,h)},isUserPIDiscover:function(e){return u(e,H,y)},isUserPIJCB:function(e){return u(e,H,g)},isUserPIHipercard:function(e){return u(e,H,v)},isUserPIElo:function(e){return u(e,H,P)},isUserPIUnionPayCreditCard:function(e){return u(e,H,b)},isUserPIUnionPayDebitCard:function(e){return u(e,H,I)},IsEwalletPayPal:function(e){return u(e,H,E)},IsEwalletStoredValue:function(e){return u(e,H,S)},isUserPIEWalletPayPal:function(e){return u(e,H,E)},isUserPIEWalletStoredValue:function(e){return u(e,H,S)},isUserPIDirectDebitAch:function(e){return u(e,H,D)},isUserPIDirectDebitSepa:function(e){return u(e,H,C)},isUserPISptNSM:function(e){return u(e,H,k)},isUserPIVzwNSM:function(e){return u(e,H,x)},isUserPINonSimMobi:function(e){return u(e,H,T)},isUserPIVirtualAlipay:function(e){return u(e,H,w)},isUserPIVirtualUnionpay:function(e){return u(e,H,R)},isUserPIVirtualInvoiceBasic:function(e){return u(e,H,A)},isUserPIVirtualInvoiceCheck:showAddBGLink:function(e){return u(e,B,(function(e){return e.showAddBillingGroupLink}))},showEditBGLink:function(e){e&&e.dataSources&&e.dataSources.billingGroups&&e.dataSources.billingGroups.value&&(e.contextData=e.dataSources.billingGroups.value);var t=V(e);return t&&t.length>0},showAddPILink:function(e){var t=l(e),n=e&&e.dataSources&&e.dataSources.paymentMethods;if(n&&n.length)for(var r=0;r<n.length;r++){var i=n[r];if(i.properties&&i.properties.userManaged){var o=(i.paymentMethodFamily+"."+i.paymentMethodType).toUpperCase(),a=i.paymentMethodFamily.toUpperCase();if(null==t||t.indexOf(o)>-1||t.indexOf(a)>-1)return!0}}return!1},showLEEditLink:function(e){return u(e,B,(function(e){return e.showEditLink}))},ordersExists:function(e){return e&&e.contextData&&e.contextData.orders&&e.contextData.orders.length>0},subscriptionsExists:function(e){return e&&e.contextData&&e.contextData.subs&&e.contextData.subs.length>0},isUserCSVFilled:function(e){return e&&e.contextData&&e.contextData.details&&e.contextData.details.balance>0},isUserCSVEmpty:function(e){return e&&e.contextData&&e.contextData.details&&e.contextData.details.balance<=0}};function L(e,t){return U.hasOwnProperty(e)?U[e].apply(null,[t]):null}function j(){try{window.pidlResourceHelpers={whitelistedFunctionMappings:U,executeExtensionFunc:L}}catch(e){}}j(),t.executeExtensionFunc=L,t.initializeResources=j,t.whitelistedFunctionMappings=U},1137:1138:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(298),i=n(678),o=n(679),a=n(415),s=n(1139),l=n(493),u=n(589),d=n(1143),c=n(1141),p=n(922),m=n(923),f=);t.default=f},1139:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(415),i=n(493),o=n(298),a=);t.default=a},1140:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1732),i=n(298),o=n(493),a=n(415),s=2936012,l=);t.default=l},1141:1142:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(298),i=n(678),o=n(1143),a=n(1138),s=n(589),l=n(493),u=n(923),d=function(){function e(){}return e.initialize=e.getSemanticContext=function(){return o.default.semanticContext},e.flush=function(e){this._isInitialized&&!this._isDestroyed&&s.default.flush(e)},e.flushAndTeardown=e.pauseTransmission=function(){this._isInitialized&&!this._isDestroyed&&s.default.pauseTransmission()},e.resumeTransmision=e.setTransmitProfile=function(e){this._isInitialized&&!this._isDestroyed&&s.default.setTransmitProfile(e)},e.loadTransmitProfiles=e.setContext=e.setContextWithPii=function(e,t,n,i){void 0===i&&(i=r.AWTPropertyType.Unspecified),o.default.logManagerContext.setPropertyWithPii(e,t,n,i)},e.setContextWithCustomerContent=e.getLogger=e.addNotificationListener=function(e){l.default.addNotificationListener(e)},e.removeNotificationListener=function(e){l.default.removeNotificationListener(e)},e._overrideValuesFromConfig=function(e){e.collectorUri&&(this._config.collectorUri=e.collectorUri),e.cacheMemorySizeLimitInNumberOfEvents>0&&(this._config.cacheMemorySizeLimitInNumberOfEvents=e.cacheMemorySizeLimitInNumberOfEvents),e.httpXHROverride&&e.httpXHROverride.sendPOST&&(this._config.httpXHROverride=e.httpXHROverride),e.propertyStorageOverride&&e.propertyStorageOverride.getProperty&&e.propertyStorageOverride.setProperty&&(this._config.propertyStorageOverride=e.propertyStorageOverride),e.userAgent&&(this._config.userAgent=e.userAgent),e.disableCookiesUsage&&(this._config.disableCookiesUsage=e.disableCookiesUsage),e.canSendStatEvent&&(this._config.canSendStatEvent=e.canSendStatEvent),e.enableAutoUserSession&&"undefined"!==typeof window&&window.addEventListener&&(this._config.enableAutoUserSession=e.enableAutoUserSession),e.clockSkewRefreshDurationInMins>0&&(this._config.clockSkewRefreshDurationInMins=e.clockSkewRefreshDurationInMins)},e._loggers={},e._isInitialized=!1,e._isDestroyed=!1,e._config={collectorUri:"https://browser.pipe.aria.microsoft.com/Collector/3.0/",cacheMemorySizeLimitInNumberOfEvents:1e4,disableCookiesUsage:!1,canSendStatEvent:clockSkewRefreshDurationInMins:0},e}();t.default=d},1143:1244:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,i=n(0),o=(r=i)&&"object"===typeof r&&"default"in r?r.default:r,a=n(232),s=n(941),l=n(28),u=n(113),d=n(326),c=n(1193),p=n(933),m=function(e,t){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function f(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}m(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var h=function(){return(h=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.create;Object.create;var y=function(e){function t(t){var n=e.call(this,t)||this;return n.renderIcon=function(e){var t={iconName:""};return e&&(e.indexOf("add-icon")>=0?t.iconName="Add":e.indexOf("edit-icon")>=0?t.iconName="PageEdit":e.indexOf("close-icon")>=0&&(t.iconName="ChromeClose")),t},s.initializeIcons(),n}return f(t,e),t.prototype.render=function(){var e=this.props,t=e.id,n=e.displayContent,r=e.onClick,o=e.disabled,s=e.ariaLabel,l=e.primary,u=e.propertyElementRef,d=this.props.additionalClassName,c={};return d&&(c.root={},d.indexOf("margin-left")>=0&&(c.root.marginLeft="16px",d=d.replace("pidlddc-margin-left","")),d.indexOf("button-blue")>=0&&(c.root.color="#006FC9",d=d.replace("pidlddc-button-blue","")),d.indexOf("full-width")>=0&&(c.root.width="100%",d=d.replace("pidlddc-full-width","")),d.indexOf("negative-margin")>=0&&(c.root.margin="-4px",d=d.replace("pidlddc-negative-margin","")),d.indexOf("no-padding")>=0&&(c.root.padding="0px",d=d.replace("pidlddc-no-padding","")),d.indexOf("marginleft-9")>=0&&(c.root.marginLeft="-9px",d=d.replace("pidlddc-marginleft-9",""))),d&&d.indexOf("action-trigger")>=0?i.createElement(a.ActionButton,{id:t,onClick:r,className:d,disabled:o,ariaLabel:s,primary:l,iconProps:this.renderIcon(d),componentRef:u,styles:c},n):d&&d.indexOf("close-icon")>=0?i.createElement(a.IconButton,{id:t,onClick:r,className:d,disabled:o,ariaLabel:"Close",primary:l,title:"Close",iconProps:this.renderIcon(d),componentRef:u}):l?i.createElement(a.PrimaryButton,{id:t,onClick:r,className:d,disabled:o,ariaLabel:s,primary:l,componentRef:u,styles:c},n):i.createElement(a.DefaultButton,{id:t,onClick:r,className:d,disabled:o,ariaLabel:s,primary:l,componentRef:u,styles:c},n)},t}(i.Component),g=function(e){var t=e.additionalClassName,n=e.ariaLabel,r=e.checked,o=e.disabled,s=e.displayContent,l=e.elementId,u=e.onChange,d=e.propertyElementRef;return i.createElement(a.Checkbox,{ariaLabel:n,className:t,defaultChecked:r,disabled:o,id:l,label:s,onChange:function(e,t){u&&u(t||e&&e.currentTarget&&e.currentTarget.checked)},componentRef:d})},v=function(e){function t(t){var n=e.call(this,t)||this;return n.toggle=s.initializeIcons(),n.state={visible:!1},n.escapeHandler=n.escapeHandler.bind(n),n}return f(t,e),t.prototype.escapeHandler=t.prototype.componentDidMount=function(){document.addEventListener("keydown",this.escapeHandler,!1)},t.prototype.componentWillUnmount=t.prototype.render=function(){var e=this.props,t=e.id,n=e.children,r=e.linkAdditionalClassName,o=e.linkText,s=e.linkAriaLabel,l=this.state.visible;return i.createElement(i.Fragment,null,i.createElement(a.IconButton,{key:t+"-toggle",id:t,className:r,iconProps:{iconName:"Info"},title:o,ariaLabel:s,onClick:this.toggle,styles:{root:{marginBottom:-3}},"aria-expanded":l}),l&&i.createElement(a.Callout,{key:t+"-dialog",id:t+"-dialog",target:"#"+t,setInitialFocus:!0,onDismiss:this.toggle,ariaDescribedBy:t+"-container",role:"alert",style:{padding:"20px"}},i.createElement("div",{id:t+"-container"},n&&n.map((function(e,t){return e&&i.cloneElement(e,{key:t})})))))},t}(i.Component),P="__placeholder__",b=function(e){function t(t){var n=e.call(this,t)||this;return n.dropdownOption=function(e){return n.optionsElements&&n.optionsElements[e.key.toString()]?i.createElement(i.Fragment,null,n.optionsElements[e.key.toString()]):i.createElement("div",{style:{display:"flex"}},e.data&&e.data.imageUrl&&i.createElement(a.Image,{src:e.data.imageUrl,"aria-hidden":"true",height:"2em"}),i.createElement("span",null,e.text))},n.dropdownTitle=n.downCaret=s.initializeIcons(),n}return f(t,e),t.prototype.render=function(){var e=this.props,t=e.id,n=e.onChange,r=e.value,o=e.inlineError,s=e.isInValidationErrorGroup,l=e.additionalClassName,u=e.hidden,d=e.disabled,c=e.required,p=e.dropdownOptions,m=e.optionsElements,f=e.placeholder,y=e.ariaLabelId,g=e.onFocus,v=e.onBlur,b=e.showDisplayName,I=e.displayName,E=e.propertyElementRef,S=b?I:null,D=s&&!d;this.dropdownOptions=p),this.optionsElements=h({},m),f&&(this.dropdownOptions.unshift({key:P,text:f}),this.optionsElements&&(this.optionsElements.__placeholder__=i.createElement("span",null,f)));var C=null;return d&&(C={label:{color:"rgb(118,118,118)"}}),i.createElement(a.Dropdown,{id:t,options:this.dropdownOptions,onChange:function(e,t,r){var i=t&&t.key&&t.key.toString();n&&n(i===P?"":i)},selectedKey:!f||void 0!==r&&""!==r?r:P,errorMessage:o||(D?" ":void 0),className:l,hidden:u,disabled:d,required:c,label:S,placeholder:f,"aria-labelledby":y,styles:C,onFocus:function(e){var t=e&&e.currentTarget&&e.currentTarget.value;g&&g(t===P?"":t)},onBlur:function(e){var t=e&&e.currentTarget&&e.currentTarget.value;v&&v(t===P?"":t)},onRenderOption:this.dropdownOption,onRenderTitle:this.dropdownTitle,onRenderCaretDown:this.downCaret,componentRef:E})},t}(i.Component),I=function(e){var t=e.errorMessage;if(!t)return null;var n=l.getTheme(),r=n.semanticColors,o={errorMessage:["pidl-office-fabric-error-message",l.AnimationClassNames.slideDownIn20,n.fonts.small,{color:r.errorText,margin:0,paddingTop:5,display:"flex",alignItems:"center"}]},a=u.classNamesFunction()(o,{hasErrorMessage:!0});return i.createElement("div",{role:"alert"},i.createElement("p",{className:a.errorMessage},i.createElement("span",null,t)))};"undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e||"undefined"!==typeof self&&self;var E=(),S=d.pidlReactClassPrefix+"office-fabric.",D=function(e){function t(t){return e.call(this,t)||this}return f(t,e),t.prototype.render=function(){var e,t=this.props,n=t.childNodes,r=void 0===n?[]:n,o=t.layoutOrientation,s=t.errorNode,l=t.labelNode,u=t.displaySettings,c=t.elementId,p=this.props.groupClassName,m=p.filter((function(e){return d.startsWith(e,S)})),f=(null===(e=null===u||void 0===u?void 0:u.submitButtonBlock)||void 0===e?void 0:e.id)&&c.endsWith(u.submitButtonBlock.id)&&!u.submitButtonBlock.show?{display:"none"}:void 0,y=(p=p.filter((function(e){return!d.startsWith(e,d.pidlReactClassPrefix)}))).includes("pidlddc-full-width"),g=y?{grow:1}:void 0;if(p.includes("pidlddc-absolute-bottom")){f=h(h({},f),{position:"absolute",bottom:"10px"}),y&&(f.width="100%")}var v={id:c,className:E(p),horizontal:"inline"===o,style:f};return p.includes("pidlddc-space-between")&&(v.horizontalAlign="space-between"),m.forEach((function(e){var t=(e=e.substring(S.length)).split(".");"columnGap"===t[0]&&(v=h(h({},v),{gap:"0 "+t[1]})),"gap"===t[0]&&(v=h(h({},v),{gap:t[1]+" "+(t[2]||0)}))})),i.createElement(a.Stack,h({},v),l,r&&r.map((function(e,t){return i.createElement(a.Stack.Item,h({},g,{align:"auto",key:t}),e&&i.cloneElement(e,{key:t}))})),s)},t}(i.Component),C=function(e){var t=e.id,n=e.displayContent,r=e.href,o=e.additionalClassName,s=e.ariaLabel,l=e.onClick;return i.createElement(a.Link,{id:t,href:r,className:o,"aria-label":s,onClick:function(e){e&&e.preventDefault&&e.preventDefault(),l&&l(e)}},n)},T=k=function(e){function t(t){return e.call(this,t)||this}return f(t,e),t.prototype.render=function(){var e=this.props,t=e.childNodes,n=(e.layoutOrientation,e.elementId),r=e.groupClassName,o=(e.displayId,e.type,e.displaySettings,e.open);return i.createElement(a.Modal,{key:n,containerClassName:E(r),isOpen:o},t)},t}(i.Component),x=function(e){function t(t){return e.call(this,t)||this}return f(t,e),t.prototype.render=function(){var e=this.props,t=e.elementId,n=e.children,r=e.additionalClassName,o=e.size,s=e.customWidth,l=e.hasCloseButton,u=e.isLightDismiss,d=e.closeButtonAriaLabel,c=e.onDismissed,p=void 0;switch(o){case"small":case"smallFixedFar":p=a.PanelType.smallFixedFar;break;case"smallFixedNear":p=a.PanelType.smallFixedNear;break;case"smallFluid":p=a.PanelType.smallFluid;break;case"medium":p=a.PanelType.medium;break;case"large":p=a.PanelType.large;break;case"largeFixed":p=a.PanelType.largeFixed;break;case"extraLarge":p=a.PanelType.extraLarge;break;case"custom":p=a.PanelType.custom;break;case"customNear":p=a.PanelType.customNear}return i.createElement(a.Panel,{key:t+"-Panel",className:r,onDismissed:c,type:p,customWidth:s,hasCloseButton:l,isLightDismiss:u,closeButtonAriaLabel:d,isOpen:!0},n)},t}(i.Component),w=function(e){eturn f(t,e),t.prototype.render=function(){var e=this.props,t=e.elementId,n=e.children,r=e.additionalClassName,o=e.isDarkThemed,s=e.onClick;return i.createElement(a.Overlay,{key:t+"-modal",className:r,isDarkThemed:o,onClick:s},n)},t}(i.Component),R=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e,t){n.props.onSelect&&n.props.onSelect(t.key)},n}return f(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.elementId,r=t.options,o=t.ariaLabel,s=t.showDisplayName,l=t.displayName,u=t.additionalClassName,d=t.disabled,c=t.required,p=t.selectedValue,m=t.optionsElements,f=(t.propertyName,t.propertyElementRef),h=a.mergeStyles({display:"flex",alignItems:"center"});this.optionsElements=m;var y=[];return r.forEach((function(t){var n,r,a,s,l,d,c,p,m,f={};u&&u.indexOf("gray-option")>=0&&(f.root={backgroundColor:"#e1dfdd"});var g={key:t.value,text:t.displayText,disabled:t.isDisabled,ariaLabel:t.displayText||o||t.key,styles:f};if(e.optionsElements){if(g&&g.key&&e.optionsElements[g.key]&&e.optionsElements[g.key].props){var v=e.optionsElements[g.key].props;!o&&(null===(n=null===v||void 0===v?void 0:v.childNodes)||void 0===n?void 0:n.length)>1&&((null===(s=null===(a=null===(r=v.childNodes[1].props)||void 0===r?void 0:r.element)||void 0===a?void 0:a.children)||void 0===s?void 0:s.length)>0&&(null===(c=null===(d=null===(l=v.childNodes[1].props)||void 0===l?void 0:l.element)||void 0===d?void 0:d.children[0].children)||void 0===c?void 0:c.length)>0?g.ariaLabel=v.childNodes[1].props.element.children[0].children[0].displayContent:null===(m=null===(p=v.childNodes[0].props)||void 0===p?void 0:p.element)||void 0===m||m.displayContent,g.ariaLabel=v.childNodes[0].props.element.displayContent)}g.onRenderField=function(t,n){return i.createElement("div",{className:h},n(t),e.optionsElements[g.key])}}y.push(g)})),i.createElement(a.ChoiceGroup,{id:n,className:E(u),defaultSelectedKey:p,options:y,onChange:this.onChange,label:s?l:"",required:c,disabled:d,componentRef:f})},t}(i.Component),A=function(e){var t=e.elementId,n=e.additionalClassName,r=e.ariaLabel,o=e.ariaLive,s=e.label,l=e.labelPosition,u=e.size;return i.createElement(a.Spinner,{id:t,className:n,ariaLabel:r,ariaLive:"assertive"===o?"assertive":"off"===o?"off":"polite",label:s,labelPosition:"left"===l?"left":"top"===l?"top":"right"===l?"right":"bottom",size:"xSmall"===u?0:"small"===u?1:"medium"===u?2:3})},O=function(e){return e.variant&&"xLarge"==e.variant?i.createElement(a.Text,{id:e.id,className:e.additionalClassName,block:!e.inline,variant:e.variant,style:e.style,as:"h2"},e.displayContent):i.createElement(a.Text,{id:e.id,className:e.additionalClassName,block:!e.inline,variant:e.variant,style:e.style},e.displayContent)},_=function(e){function t(t){var n=e.call(this,t)||this;return s.initializeIcons(),n}return f(t,e),t.prototype.render=function(){var e=a.mergeStyles({"margin-top":"4px","padding-right":"5px",color:"#C72127"});return this.props.additionalClassName&&this.props.additionalClassName.indexOf("pidlddc-warning-icon")>=0?i.createElement(a.Stack,{horizontal:!0,horizontalAlign:"space-between"},i.createElement(a.StackItem,null,i.createElement(a.Icon,{iconName:"Error",className:e})),i.createElement(a.StackItem,null,O(this.props))):O(this.props)},t}(i.Component),F=function(e){function t(t){var n=e.call(this,t)||this;return n.onChange=function(e){var t=n.props.onChange;t&&e.target&&t(e.target.value)},n.onGetErrorStyle=function(e){return!n.props.inlineError?{}:{fieldGroup:{borderColor:l.getTheme().semanticColors.errorText}}},n.onRenderLabel=function(){var e=n.props,t=e.showDisplayName,r=e.id,o=e.displayName,s=e.inlineHelpLink,l=e.required,u=r+"_label",d=t?i.createElement(a.Label,{required:l,htmlFor:r,id:u},o):null;return s?i.createElement(a.Stack,{horizontal:!0,verticalAlign:"center"},d,s):d},n}return f(t,e),t.prototype.render=function(){var e=this.props,t=e.id,n=e.value,r=e.additionalClassName,o=e.inlineError,s=e.isInValidationErrorGroup,l=e.hidden,u=e.disabled,d=e.required,c=e.placeholder,p=(e.ariaLabelId,e.maskInput),m=e.maxLength,f=e.onFocus,y=e.onBlur,g=e.inlineLogo,v=e.displayName,P=e.showDisplayName,b=e.inlineHelpLink,I=e.propertyElementRef,E={src:g,shouldFadeIn:!0,width:"1.5rem",height:"1.5rem"},S=s&&!u,D={id:t,iconProps:g?{iconType:a.IconType.image,imageProps:E}:null,value:n,onBlur:function(e){y&&e.currentTarget&&y(e.currentTarget.value)},onChange:this.onChange,onFocus:errorMessage:o||(S?" ":void 0),className:r,hidden:l,disabled:u,label:v,required:d,placeholder:c,maxLength:m,styles:this.onGetErrorStyle,componentRef:I};return P||(D["aria-labelledby"]=null,D.label=null,D.ariaLabel=v),b&&(D["aria-labelledby"]=t,D.onRenderLabel=this.onRenderLabel),p&&(D.type="password"),i.createElement(a.TextField,h({},D))},t}(i.Component),H=function(e){eturn f(t,e),t.prototype.render=function(){var e=this.props,t=e.additionalClassName,n=e.ariaLabel,r=e.elementId,o=e.sourceUrl,s={src:o,width:48,height:48,alt:n};return t&&t.indexOf("image-icon")>=0?i.createElement(a.Image,h({},s)):i.createElement("img",{id:r,src:o,alt:n,"aria-label":n,className:t})},t}(i.Component),N=function(){function e(){}return e.prototype.getApplicationInsights=e.prototype.getCorrelationVectorPlugin=e}(),M=function(){this.canCreate=function(e,t,n){return e===d.ElementType.dropdown?h(h({},n),{inlineError:!0,customDropdownOptions:!1,label:!0}):e===d.ElementType.textBox?h(h({},n),{inlineError:!0,customDropdownOptions:!1,label:!0,inlineHelpLink:!0}):e===d.ElementType.button||e===d.ElementType.checkbox||e===d.ElementType.error||e===d.ElementType.group||e===d.ElementType.heading||e===d.ElementType.helpDialog||e===d.ElementType.hyperlink||e===d.ElementType.label||e===d.ElementType.radio||e===d.ElementType.subheading||e===d.ElementType.text||e===d.ElementType.image?h(h({},n),{inlineError:!1}):null},this.create=function(e,t){switch(e){case d.ElementType.button:return o.createElement(y,h({},t));case d.ElementType.checkbox:return o.createElement(g,h({},t));case d.ElementType.dropdown:return o.createElement(b,h({},t));case d.ElementType.error:return o.createElement(I,h({},t));case d.ElementType.group:return o.createElement(D,h({},t));case d.ElementType.heading:return o.createElement(_,h({},t,{variant:"xLarge"}));case d.ElementType.helpDialog:return o.createElement(v,h({},t));case d.ElementType.hyperlink:return o.createElement(C,h({},t));case d.ElementType.label:return o.createElement(T,h({},t));case d.ElementType.radio:return o.createElement(R,h({},t));case d.ElementType.subheading:return o.createElement(_,h({},t,{variant:"large"}));case d.ElementType.text:return o.createElement(_,h({},t));case d.ElementType.textBox:return o.createElement(F,h({},t));case d.ElementType.modal:return o.createElement(k,h({},t));case d.ElementType.panel:return o.createElement(x,h({},t));case d.ElementType.spinner:return o.createElement(A,h({},t));case d.ElementType.overlay:return o.createElement(w,h({},t));case d.ElementType.image:return o.createElement(H,h({},t));default:return null}},this.getOneDSService=;t.Button=y,t.Callout=v,t.Checkbox=g,t.Dropdown=b,t.Error=I,t.Group=D,t.Hyperlink=C,t.Image=H,t.Label=T,t.Modal=k,t.OfficeFabricElementFactory=M,t.Overlay=w,t.Panel=x,t.Radio=R,t.Spinner=A,t.Text=_,t.TextBox=F,t.oneDSService=N}).call(this,n(220))},1301:1730:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(298),i=n(1731),o=n(589),a=n(1741),s=n(493),l=n(415),u=function(){eturn e.prototype.addEvent=e.prototype.sendEventsForPriorityAndAbove=e.prototype.hasEvents=e.prototype.addBackRequest=e.prototype.teardown=e.prototype.uploadNow=e.prototype.pauseTransmission=e.prototype.resumeTransmission=e.prototype.shouldDropEventsOnPause=function(e){this._shouldDropEventsOnPause=e},e.prototype._removeFirstQueues=e.prototype._addEmptyQueues=e.prototype._addEventToProperQueue=e.prototype._dropEventWithPriorityOrLess=e.prototype._batchEvents=e.prototype._uploadNow=e.prototype._checkOutboundQueueEmptyAndSent=e}();t.default=u},1731:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(298),i=n(1140),o=n(1738),a=n(1739),s=n(1740),l=n(1141),u=n(415),d=n(493),c=n(589),p="POST",m=function(){eturn e.prototype.hasIdleConnection=e.prototype.sendQueuedRequests=e.prototype.isCompletelyIdle=e.prototype.teardown=e.prototype.pause=e.prototype.resume=e.prototype.removeQueuedRequests=e.prototype.sendSynchronousRequest=e.prototype._sendRequest=e.prototype._retryRequestIfNeeded=function(e,t,n,i,a,s,l,u){var p=this,m=!0;if("undefined"!==typeof e){if(t){var f=this._killSwitch.setKillSwitchTenants(t["kill-tokens"],t["kill-duration-seconds"]);this._clockSkewManager.setClockSkew(t["time-delta-millis"]);for(var h=0;h<f.length;++h)d.default.eventsRejected(n[f[h]],r.AWTEventsRejectedReason.KillSwitch),delete n[f[h]],i--}else this._clockSkewManager.setClockSkew(null);if(200===e)return void this._handleRequestFinished(!0,n,l,u);(!o.default.shouldRetryForStatus(e)||i<=0)&&(m=!1)}if(m)if(u)this._activeConnections--,n[a][0].priority=r.AWTEventPriority.High,this._queueManager.addBackRequest(n);else if(s<1){for(var y in n)n.hasOwnProperty(y)&&d.default.eventsRetrying(n[y]);setTimeout((,o.default.getMillisToBackoffForRetry(s))}else this._activeConnections--,c.default.backOffTransmission(),this._queueManager.addBackRequest(n);else this._handleRequestFinished(!1,n,l,u)},e.prototype._handleRequestFinished=e.prototype._convertAllHeadersToMap=e}();t.default=m},1732:1733:1734:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(680),i=n(1735),o=n(1736);t._Utf8_GetBytes=t._Base64_GetString=t._Varint_GetBytes=t._Varint64_GetBytes=t._Double_GetBytes=t._Zigzag_EncodeZigzag32=t._Zigzag_EncodeZigzag64=,1735:1736:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e._IsDataViewSupport=e}();t.BrowserChecker=r},1737:1738:1739:1740:1741:1742:283:function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return m})),n.d(t,"d",(function(){return y})),n.d(t,"e",(function(){return P})),n.d(t,"f",(function(){return D})),n.d(t,"g",(function(){return E})),n.d(t,"h",(function(){return S})),n.d(t,"i",(function(){return C}));var r=n(159),i=n(42),o=n(32),a=n.n(o),s=n(54),l=n(23),u=n(73),d=n(40);function c(e,t,n){var r,i=e.reference,o=e.floating,a=Object(d.p)(t),s=Object(d.f)(t),l=Object(d.h)(s),u=Object(d.o)(t),c="y"===a,p=i.x+i.width/2-o.width/2,m=i.y+i.height/2-o.height/2,f=i[l]/2-o[l]/2;switch(u){case"top":r={x:p,y:i.y-o.height};break;case"bottom":r={x:p,y:i.y+i.height};break;case"right":r={x:i.x+i.width,y:m};break;case"left":r={x:i.x-o.width,y:m};break;default:r={x:i.x,y:i.y}}switch(Object(d.e)(t)){case"start":r[s]-=f*(n&&c?-1:1);break;case"end":r[s]+=f*(n&&c?-1:1)}return r}var p=function(){var e=Object(u.a)(a.a.mark((function e(t,n,r){var i,o,u,d,p,m,f,h,y,g,v,P,b,I,E,S,D,C,T,k,x,w,R,A,O,_;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.placement,o=void 0===i?"bottom":i,u=r.strategy,d=void 0===u?"absolute":u,p=r.middleware,m=void 0===p?[]:p,f=r.platform,h=m.filter(Boolean),e.next=4,null==f.isRTL?void 0:f.isRTL(n);case 4:return y=e.sent,e.next=7,f.getElementRects({reference:t,floating:n,strategy:d});case 7:g=e.sent,v=c(g,o,y),P=v.x,b=v.y,I=o,E={},S=0,D=0;case 13:if(!(D<h.length)){e.next=46;break}return C=h[D],T=C.name,k=C.fn,e.next=17,k({x:P,y:b,initialPlacement:o,placement:I,strategy:d,middlewareData:E,rects:g,platform:f,elements:{reference:t,floating:n}});case 17:if(x=e.sent,w=x.x,R=x.y,A=x.data,O=x.reset,P=null!=w?w:P,b=null!=R?R:b,E=Object(l.a)(Object(l.a)({},E),{},Object(s.a)({},T,Object(l.a)(Object(l.a)({},E[T]),A))),!(O&&S<=50)){e.next=43;break}if(S++,"object"!==typeof O){e.next=41;break}if(O.placement&&(I=O.placement),!O.rects){e.next=38;break}if(!0!==O.rects){e.next=36;break}return e.next=33,f.getElementRects({reference:t,floating:n,strategy:d});case 33:e.t0=e.sent,e.next=37;break;case 36:e.t0=O.rects;case 37:g=e.t0;case 38:_=c(g,I,y),P=_.x,b=_.y;case 41:return D=-1,e.abrupt("continue",43);case 43:D++,e.next=13;break;case 46:return e.abrupt("return",{x:P,y:b,placement:I,strategy:d,middlewareData:E});case 47:case"end":return e.stop()}}),e)})));return ();function m(e,t){return f.apply(this,arguments)}function f(){return(f=Object(u.a)(a.a.mark((function e(t,n){var r,i,o,s,u,c,p,m,f,h,y,g,v,P,b,I,E,S,D,C,T,k,x,w,R,A;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n={}),i=t.x,o=t.y,s=t.platform,u=t.rects,c=t.elements,p=t.strategy,m=Object(d.c)(n,t),f=m.boundary,h=void 0===f?"clippingAncestors":f,y=m.rootBoundary,g=void 0===y?"viewport":y,v=m.elementContext,P=void 0===v?"floating":v,b=m.altBoundary,I=void 0!==b&&b,E=m.padding,S=void 0===E?0:E,D=Object(d.n)(S),C="floating"===P?"reference":"floating",T=c[I?C:P],e.t0=d.t,e.t1=s,e.next=10,null==s.isElement?void 0:s.isElement(T);case 10:if(e.t2=r=e.sent,null==e.t2){e.next=15;break}e.t3=r,e.next=16;break;case 15:e.t3=!0;case 16:if(!e.t3){e.next=20;break}e.t4=T,e.next=26;break;case 20:if(e.t5=T.contextElement,e.t5){e.next=25;break}return e.next=24,null==s.getDocumentElement?void 0:s.getDocumentElement(c.floating);case 24:e.t5=e.sent;case 25:e.t4=e.t5;case 26:return e.t6=e.t4,e.t7=h,e.t8=g,e.t9=p,e.t10={element:e.t6,boundary:e.t7,rootBoundary:e.t8,strategy:e.t9},e.next=33,e.t1.getClippingRect.call(e.t1,e.t10);case 33:return e.t11=e.sent,k=(0,e.t0)(e.t11),x="floating"===P?Object(l.a)(Object(l.a)({},u.floating),{},{x:i,y:o}):u.reference,e.next=38,null==s.getOffsetParent?void 0:s.getOffsetParent(c.floating);case 38:return w=e.sent,e.next=41,null==s.isElement?void 0:s.isElement(w);case 41:if(!e.sent){e.next=50;break}return e.next=44,null==s.getScale?void 0:s.getScale(w);case 44:if(e.t13=e.sent,e.t13){e.next=47;break}e.t13={x:1,y:1};case 47:e.t12=e.t13,e.next=51;break;case 50:e.t12={x:1,y:1};case 51:if(R=e.t12,e.t14=d.t,!s.convertOffsetParentRelativeRectToViewportRelativeRect){e.next=59;break}return e.next=56,s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:x,offsetParent:w,strategy:p});case 56:e.t15=e.sent,e.next=60;break;case 59:e.t15=x;case 60:return e.t16=e.t15,A=(0,e.t14)(e.t16),e.abrupt("return",{top:(k.top-A.top+D.top)/R.y,bottom:(A.bottom-k.bottom+D.bottom)/R.y,left:(k.left-A.left+D.left)/R.x,right:(A.right-k.right+D.right)/R.x});case 63:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(e){return{name:"arrow",options:e,fn:function(t){return Object(u.a)(a.a.mark((function n(){var r,i,o,u,c,p,m,f,h,y,g,v,P,b,I,E,S,D,C,T,k,x,w,R,A,O,_,F,H,N,M,B,V,U,L,j;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(o=t.x,u=t.y,c=t.placement,p=t.rects,m=t.platform,f=t.elements,h=t.middlewareData,y=Object(d.c)(e,t)||{},g=y.element,v=y.padding,P=void 0===v?0:v,null!=g){n.next=4;break}return n.abrupt("return",{});case 4:return b=Object(d.n)(P),I={x:o,y:u},E=Object(d.f)(c),S=Object(d.h)(E),n.next=10,m.getDimensions(g);case 10:return D=n.sent,T=(C="y"===E)?"top":"left",k=C?"bottom":"right",x=C?"clientHeight":"clientWidth",w=p.reference[S]+p.reference[E]-I[E]-p.floating[S],R=I[E]-p.reference[E],n.next=19,null==m.getOffsetParent?void 0:m.getOffsetParent(g);case 19:if(A=n.sent,O=A?A[x]:0,n.t0=!O,n.t0){n.next=26;break}return n.next=25,null==m.isElement?void 0:m.isElement(A);case 25:n.t0=!n.sent;case 26:if(!n.t0){n.next=28;break}O=f.floating[x]||p.floating[S];case 28:return _=w/2-R/2,F=O/2-D[S]/2-1,H=Object(d.r)(b[T],F),N=Object(d.r)(b[k],F),M=H,B=O-D[S]-N,V=O/2-D[S]/2+_,U=Object(d.a)(M,V,B),L=!h.arrow&&null!=Object(d.e)(c)&&V!=U&&p.reference[S]/2-(V<M?H:N)-D[S]/2<0,j=L?V<M?V-M:V-B:0,n.abrupt("return",(i={},Object(s.a)(i,E,I[E]+j),Object(s.a)(i,"data",Object(l.a)((r={},Object(s.a)(r,E,U),Object(s.a)(r,"centerOffset",V-U-j),r),L&&{alignmentOffset:j})),Object(s.a)(i,"reset",L),i));case 39:case"end":return n.stop()}}),n)})))()}}};var y=function(e){return void 0===e&&(e={}),{name:"flip",options:e,fn:function(t){return Object(u.a)(a.a.mark((function n(){var o,s,l,u,c,p,f,h,y,g,v,P,b,I,E,S,D,C,T,k,x,w,R,A,O,_,F,H,N,M,B,V,U,L,j,W,z;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=t.placement,u=t.middlewareData,c=t.rects,p=t.initialPlacement,f=t.platform,h=t.elements,y=Object(d.c)(e,t),g=y.mainAxis,v=void 0===g||g,P=y.crossAxis,b=void 0===P||P,I=y.fallbackPlacements,E=y.fallbackStrategy,S=void 0===E?"bestFit":E,D=y.fallbackAxisSideDirection,C=void 0===D?"none":D,T=y.flipAlignment,k=void 0===T||T,x=Object(r.a)(y,["mainAxis","crossAxis","fallbackPlacements","fallbackStrategy","fallbackAxisSideDirection","flipAlignment"]),null==(o=u.arrow)||!o.alignmentOffset){n.next=4;break}return n.abrupt("return",{});case 4:return w=Object(d.o)(l),R=Object(d.o)(p)===p,n.next=8,null==f.isRTL?void 0:f.isRTL(h.floating);case 8:return A=n.sent,O=I||(R||!k?[Object(d.m)(p)]:Object(d.i)(p)),I||"none"===C||O.push.apply(O,Object(i.a)(Object(d.l)(p,k,C,A))),_=[p].concat(Object(i.a)(O)),n.next=14,m(t,x);case 14:if(F=n.sent,H=[],N=(null==(s=u.flip)?void 0:s.overflows)||[],v&&H.push(F[w]),b&&(M=Object(d.g)(l,c,A),H.push(F[M[0]],F[M[1]])),N=[].concat(Object(i.a)(N),[{placement:l,overflows:H}]),H.every(()){n.next=37;break}if(U=((null==(B=u.flip)?void 0:B.index)||0)+1,!(L=_[U])){n.next=25;break}return n.abrupt("return",{data:{index:U,overflows:N},reset:{placement:L}});case 25:if(j=null==(V=N.filter(().sort(()[0])?void 0:V.placement){n.next=35;break}n.t0=S,n.next="bestFit"===n.t0?30:"initialPlacement"===n.t0?33:35;break;case 30:return(z=null==(W=N.map(().sort(()[0])?void 0:W[0])&&(j=z),n.abrupt("break",35);case 33:return j=p,n.abrupt("break",35);case 35:if(l===j){n.next=37;break}return n.abrupt("return",{reset:{placement:j}});case 37:return n.abrupt("return",{});case 38:case"end":return n.stop()}}),n)})))()}}};r P=function(e){return void 0===e&&(e={}),{name:"hide",options:e,fn:function(t){return Object(u.a)(a.a.mark((function n(){var i,o,s,u,c,p,f,h,y;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:i=t.rects,o=Object(d.c)(e,t),s=o.strategy,u=void 0===s?"referenceHidden":s,c=Object(r.a)(o,["strategy"]),n.t0=u,n.next="referenceHidden"===n.t0?5:"escaped"===n.t0?10:15;break;case 5:return n.next=7,m(t,Object(l.a)(Object(l.a)({},c),{},{elementContext:"reference"}));case 7:return p=n.sent,f=g(p,i.reference),n.abrupt("return",{data:{referenceHiddenOffsets:f,referenceHidden:v(f)}});case 10:return n.next=12,m(t,Object(l.a)(Object(l.a)({},c),{},{altBoundary:!0}));case 12:return h=n.sent,y=g(h,i.floating),n.abrupt("return",{data:{escapedOffsets:y,escaped:v(y)}});case 15:return n.abrupt("return",{});case 16:case"end":return n.stop()}}),n)})))()}}};unction I(){return(I=Object(u.a)(a.a.mark((function e(t,n){var r,i,o,s,u,c,p,m,f,h,y,g,v,P;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.placement,i=t.platform,o=t.elements,e.next=3,null==i.isRTL?void 0:i.isRTL(o.floating);case 3:return s=e.sent,u=Object(d.o)(r),c=Object(d.e)(r),p="y"===Object(d.p)(r),m=["left","top"].includes(u)?-1:1,f=s&&p?-1:1,h=Object(d.c)(n,t),y="number"===typeof h?{mainAxis:h,crossAxis:0,alignmentAxis:null}:Object(l.a)({mainAxis:0,crossAxis:0,alignmentAxis:null},h),g=y.mainAxis,v=y.crossAxis,P=y.alignmentAxis,c&&"number"===typeof P&&(v="end"===c?-1*P:P),e.abrupt("return",p?{x:v*f,y:g*m}:{x:g*m,y:v*f});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var E=function(e){return void 0===e&&(e=0),{name:"offset",options:e,fn:function(t){return Object(u.a)(a.a.mark((function n(){var r,i,o;return a.a.wrap((,n)})))()}}},S=function(e){return void 0===e&&(e={}),{name:"shift",options:e,fn:function(t){return Object(u.a)(a.a.mark((function n(){var i,o,u,c,p,f,h,y,g,v,P,b,I,E,S,D,C,T,k,x,w,R,A,O,_;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t.x,u=t.y,c=t.placement,p=Object(d.c)(e,t),f=p.mainAxis,h=void 0===f||f,y=p.crossAxis,g=void 0!==y&&y,v=p.limiter,P=void 0===v?{fn::v,b=Object(r.a)(p,["mainAxis","crossAxis","limiter"]),I={x:o,y:u},n.next=5,m(t,b);case 5:return E=n.sent,S=Object(d.p)(Object(d.o)(c)),D=Object(d.k)(S),C=I[D],T=I[S],h&&(k="y"===D?"bottom":"right",x=C+E["y"===D?"top":"left"],w=C-E[k],C=Object(d.a)(x,C,w)),g&&(R="y"===S?"bottom":"right",A=T+E["y"===S?"top":"left"],O=T-E[R],T=Object(d.a)(A,T,O)),_=P.fn(Object(l.a)(Object(l.a)({},t),{},(i={},Object(s.a)(i,D,C),Object(s.a)(i,S,T),i))),n.abrupt("return",Object(l.a)(Object(l.a)({},_),{},{data:{x:_.x-o,y:_.y-u}}));case 14:case"end":return n.stop()}}),n)})))()}}},D=function(e){return void 0===e&&(e={}),{options:e,fn:function(t){var n,r=t.x,i=t.y,o=t.placement,a=t.rects,u=t.middlewareData,c=Object(d.c)(e,t),p=c.offset,m=void 0===p?0:p,f=c.mainAxis,h=void 0===f||f,y=c.crossAxis,g=void 0===y||y,v={x:r,y:i},P=Object(d.p)(o),b=Object(d.k)(P),I=v[b],E=v[P],S=Object(d.c)(m,t),D="number"===typeof S?{mainAxis:S,crossAxis:0}:Object(l.a)({mainAxis:0,crossAxis:0},S);if(h){var C="y"===b?"height":"width",T=a.reference[b]-a.floating[C]+D.mainAxis,k=a.reference[b]+a.reference[C]-D.mainAxis;I<T?I=T:I>k&&(I=k)}if(g){var x,w,R="y"===b?"width":"height",A=["top","left"].includes(Object(d.o)(o)),O=a.reference[P]-a.floating[R]+(A&&(null==(x=u.offset)?void 0:x[P])||0)+(A?0:D.crossAxis),_=a.reference[P]+a.reference[R]+(A?0:(null==(w=u.offset)?void 0:w[P])||0)-(A?D.crossAxis:0);E<O?E=O:E>_&&(E=_)}return n={},Object(s.a)(n,b,I),Object(s.a)(n,P,E),n}}},C=function(e){return void 0===e&&(e={}),{name:"size",options:e,fn:function(t){return Object(u.a)(a.a.mark((function n(){var i,o,s,u,c,p,f,h,y,g,v,P,b,I,E,S,D,C,T,k,x,w,R,A,O,_,F,H,N;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=t.placement,o=t.rects,s=t.platform,u=t.elements,c=Object(d.c)(e,t),p=c.apply,f=void 0===p?function(){}:p,h=Object(r.a)(c,["apply"]),n.next=4,m(t,h);case 4:if(y=n.sent,g=Object(d.o)(i),v=Object(d.e)(i),P="y"===Object(d.p)(i),b=o.floating,I=b.width,E=b.height,"top"!==g&&"bottom"!==g){n.next=28;break}return S=g,n.t0=v,n.next=14,null==s.isRTL?void 0:s.isRTL(u.floating);case 14:if(!n.sent){n.next=18;break}n.t1="start",n.next=19;break;case 18:n.t1="end";case 19:if(n.t2=n.t1,n.t0!==n.t2){n.next=24;break}n.t3="left",n.next=25;break;case 24:n.t3="right";case 25:D=n.t3,n.next=30;break;case 28:D=g,S="end"===v?"top":"bottom";case 30:return C=E-y[S],T=I-y[D],k=!t.middlewareData.shift,x=C,w=T,P?(R=I-y.left-y.right,w=v||k?Object(d.r)(T,R):R):(A=E-y.top-y.bottom,x=v||k?Object(d.r)(C,A):A),k&&!v&&(O=Object(d.q)(y.left,0),_=Object(d.q)(y.right,0),F=Object(d.q)(y.top,0),H=Object(d.q)(y.bottom,0),P?w=I-2*(0!==O||0!==_?O+_:Object(d.q)(y.left,y.right)):x=E-2*(0!==F||0!==H?F+H:Object(d.q)(y.top,y.bottom))),n.next=39,f(Object(l.a)(Object(l.a)({},t),{},{availableWidth:w,availableHeight:x}));case 39:return n.next=41,s.getDimensions(u.floating);case 41:if(N=n.sent,I===N.width&&E===N.height){n.next=44;break}return n.abrupt("return",{reset:{rects:!0}});case 44:return n.abrupt("return",{});case 45:case"end":return n.stop()}}),n)})))()}}}},298:326:function(e,t,n){"use strict";(function(e){bject.defineProperty(t,"__esModule",{value:!0}),n(1748);var i=n(0),o=r(i),a=r(n(1750)),s="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{};var l,u=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){!"undefined"!==typeof self?self:s)})),d=((l=u)&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")&&l.default,function(e,t){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)});function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}d(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var p=function(){return(p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};ect.create;function y(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var g,v,P,b,I,E,S,D,C,T,k,x,w,R,A,O,_,F,H,N,M,B,V,U,L,j,W,z,G,q,K,J,Q,Z,X,$,Y,ee,te,ne,re,ie,oe,ae,se,le,ue,de,ce,pe,me,fe,he,ye,ge,ve,Pe,be,Ie,Ee,Se,De,Ce,Te,ke,xe,we,Re,Ae,Oe,_e,Fe,He,Ne,Me,Be,Ve,Ue,Le,je;!function(e){e.Unknown="Unknown",e.iFrameMessageHandler="iFrameMessageHandler"}(g||(g={})),function(e){e.forSubmit="forSubmit",e.forDisplay="forDisplay"}(v||(v={})),function(e){e.message="message"}(P||(P={})),function(e){e.forFormat="forFormat",e.forModel="forModel"}(b||(b={})),function(e){e.Error="error",e.Fail="failed",e.Passed="passed"}(I||(I={})),function(e){e.PaymentInstrument="PaymentInstrument",e.Challenge="Challenge",e.Address="Address",e.Profile="Profile",e.PaymentSession="PaymentSession",e.Checkout="Checkout",e.PayeeTaxProfile="PayeeTaxProfile",e.WalletToken="WalletToken"}(E||(E={})),S||(S={})),function(e){e.index="pidlddc-inline-element-",e.taggedClass="pidlddc-"}(D||(D={})),C||(C={})),function(e){e.pageBlock="pagebodycontents",e.pageLogoBlock="pagelogoblock",e.pageBusyBlock="pagebusyblock",e.pageErrorBlock="pageerrorblock",e.pageSubmitBlock="pagesubmitblock",e.helpDialogBlock="pagehelpdialog",e.modalDialogBlock="pagemodaldialog",e.displayImage="displayImage",e.closeButton="closeButton",e.prefillCheckbox="prefillCheckbox"}(T||(T={})),k||(k={})),function(e){e.success="success",e.failure="failure",e.gohome="gohome"}(x||(x={})),w||(w={})),function(e){e.modelElementType_heading="h1",e.modelElementType_subheading="h2",e.modelElementType_text="p",e.modelElementType_expression="p",e.modelElementType_textGroup="p"}(R||(R={})),function(e){e.button="button",e.iFrame="iframe",e.div="div",e.hyperlink="a",e.image="img",e.input="input",e.label="label",e.select="select",e.span="span",e.h1="h1",e.h2="h2",e.hr="hr",e.audio="audio"}(A||(A={})),function(e){e.image="image",e.button="button",e.password="password",e.radio="radio",e.checkbox="checkbox",e.file="file"}(O||(O={})),_||(_={})),function(e){e.stringTrue="true",e.stringFalse="false",e.stringOptional="optional"}(F||(F={})),H||(H={})),N||(N={})),M||(M={})),B||(B={})),V||(V={})),function(e){e.formValidationFailed="formValidationFailed",e.editedPropertiesValidationFailed="editedPropertiesValidationFailed"}(U||(U={})),function(e){e.inputValidation="inputValidationError",e.userInputValidation="userInputValidationError",e.formValidation="formValidationFailed",e.unexpected="unexpected",e.serverError="serverError",e.missingImplementationError="missingImplementationError",e.invalidSetup="invalidSetup",e.paymentMethodFailure="paymentMethodFailure",e.failedToOpenWindow="failedToOpenWindow",e.unmatchedAmount="unmatchedAmount"}(L||(L={})),function(e){e.validationFailed="ValidationFailed",e.tokenizationFailed="TokenizationFailed",e.fileUploadFailed="FileUploadFailed"}(j||(j={})),function(e){e.property="property",e.group="group"}(W||(W={})),function(e){e.all="all",e.dirtyOnly="dirtyOnly"}(z||(z={})),function(e){e.empty="required_field_empty"}(G||(G={})),q||(q={})),K||(K={})),function(e){e.authorization="authorization",e.contentType="content-type",e.msCV="ms-cv",e.msCorrelationId="x-ms-correlation-id",e.msFlight="x-ms-flight",e.msTrackingId="x-ms-tracking-id",e.msRetryOnServerErr="x-ms-px-retry-servererr",e.correlationContext="Correlation-Context",e.msPidlsdkVersion="x-ms-pidlsdk-version",e.msTest="x-ms-test"}(J||(J={})),function(e){e.enablePaymentAgentChallenge="pidl-enable-payment-agent-challenge"}(Q||(Q={})),function(e){e.operation="operation"}(Z||(Z={})),function(e){e.role="role",e.required="required",e.src="src",e.controls="controls"}(X||(X={})),function(e){e.alt="alt",e.tabIndex="tabindex"}($||($={})),Y||(Y={})),function(e){e.alert="alert",e.dialog="dialog",e.combobox="combobox",e.radiogroup="radiogroup",e.radio="radio",e.presentation="presentation",e.group="group",e.image="img",e.separator="separator",e.audio="audio"}(ee||(ee={})),te||(te={})),function(e){e.polite="polite",e.assertive="assertive",e.off="off"}(ne||(ne={})),function(e){e.errorBlockId="data-pidl-error-block-id"}(re||(re={})),function(e){e.market="country"}(ie||(ie={})),function(e){e.country="market"}(oe||(oe={})),function(e){e.windows="windows"}(ae||(ae={})),function(e){e.closeButtonHelpText="closeButtonAccessiblityName",e.prefillDropdownDefault="dropdown_default",e.prefillDropdownNew="dropdown_new"}(se||(se={})),function(e){e.notInitialized="notInitialized",e.initialized="initialized",e.executing="executing",e.submitting="submitting"}(le||(le={})),function(e){e.clean="clean",e.editing="editing",e.dirty="dirty"}(ue||(ue={})),function(e){e.ready="ready",e.selected="selected",e.editing="editing",e.finished="finished"}(de||(de={})),function(e){e.empty="[]"}(ce||(ce={})),function(e){e.pageNavigated="pageNavigated",e.modelCreated="modelCreated",e.modelUpdated="modelUpdated",e.prefillChanged="prefillChanged"}(pe||(pe={})),me||(me={})),fe||(fe={})),function(e){e.hidden="hidden",e.number="number",e.bool="bool",e.object="object",e.returnObject="returnObject"}(he||(he={})),function(e){e.sessionId="sessionId",e.riskData="riskData",e.greenId="greenId"}(ye||(ye={})),function(e){e.userData="userData"}(ge||(ge={})),function(e){e.captchaType="captchaType"}(ve||(ve={})),function(e){e.Get="GET",e.Post="POST",e.Put="PUT",e.Delete="DELETE"}(Pe||(Pe={})),be||(be={})),function(e){e.noPidlddc="noPidlddc.",e.helpDialog="help.",e.pidlReact="pidlReact.",e.parent="parent."}(Ie||(Ie={})),function(e){e.allowedCountries="allowedCountries"}(Ee||(Ee={})),function(e){e.closeButtonAccessibilityName="closeButtonAccessibilityName",e.accessibilityName="accessibilityName",e.linkAccessibilityName="linkAccessibilityName"}(Se||(Se={})),function(e){e.primary="primary",e.secondary="secondary"}(De||(De={})),function(e){e.ignore="ignore",e.throw="throw"}(Ce||(Ce={})),function(e){e.token="piAuthKey",e.algorithm="hmacsha256",e.userCredential="userCredential"}(Te||(Te={})),function(e){e.jarvisError=".",e.paymentMethodName="."}(ke||(ke={})),function(e){e.partnerData="partnerData",e.contextData="contextData"}(xe||(xe={})),function(e){e.paymentTransaction="PaymentTransaction",e.recurringTransaction="RecurringTransaction",e.addCard="AddCard"}(we||(we={})),function(e){e.noPreference="NoPreference",e.noChallengeRequested="NoChallengeRequested",e.challengeRequestedPreference="ChallengeRequestedPreference",e.challengeRequestedMandate="ChallengeRequestedMandate"}(Re||(Re={})),function(e){e.small="01",e.medium="02",e.large="03",e.extraLarge="04",e.fullScreen="05"}(Ae||(Ae={})),function(e){e.Succeeded="Succeeded",e.ByPassed="ByPassed",e.Failed="Failed",e.Cancelled="Cancelled",e.TimedOut="TimedOut",e.NotApplicable="NotApplicable",e.Unknown="Unknown"}(Oe||(Oe={})),function(e){e.ThreeDS="threeds",e.CVV="cvv",e.SMS="sms"}(_e||(_e={})),function(e){e[e.Default=3e3]="Default"}(Fe||(Fe={})),function(e){e.link="]("}(He||(He={})),function(e){e.floatRight="floatRight",e.floatLeft="floatLeft"}(Ne||(Ne={})),Me||(Me={})),Be||(Be={})),function(e){e.pidlSdkMessageSource="PidlSdk",e.secureFieldMessageSource="PXSecureField",e.tokenizationValuePrefix="tokenized_"}(Ve||(Ve={})),function(e){e.viewTermsTriggered="viewTermsTriggered"}(Ue||(Ue={})),function(e){e.year="year",e.month="month",e.day="day",e.hour="hour",e.minute="minute"}(Le||(Le={})),function(e){e.applePay="be4de87d-7e38-4b2d-8836-9237eb32848e"}(je||(je={}));var We=Object.freeze({__proto__:null,get requestOriginator(){return g},get pidlTransformationTargets(){return v},get eventTypes(){return P},get displayTransformationTargets(){return b},get pidlResultType(){return I},get pidlResourceTypes(){return E},get htmlClassNames(){return S},get htmlClassPrefixes(){return D},get htmlElementIdPrefixes(){return C},get htmlElementIdSuffixes(){return T},get errorCode(){return k},get returnCallbackNames(){return x},get modelElementType(){return w},get textBlockTypes(){return R},get htmlBlockTypes(){return A},get htmlInputTypes(){return O},get telemetryPidlOperationType(){return _},get showDisplayNameValues(){return F},get supportedPidlActions(){return H},get resourceActions(){return N},get eventNames(){return M},get privateEventNames(){return B},get displayOptionNames(){return V},get errorNames(){return U},get errorTypes(){return L},get serverErrorTypes(){return j},get validationErrorTypes(){return W},get validationOptions(){return z},get validationErrorCodes(){return G},get htmlElementTypes(){return q},get containerTypes(){return K},get httpHeaders(){return J},get flightHeaders(){return Q},get httpUrlQueryParameters(){return Z},get htmlAttributes(){return X},get htmlTags(){return $},get htmlNodeTypes(){return Y},get htmlRoles(){return ee},get ariaTags(){return te},get ariaLiveInterruptLevels(){return ne},get dataAttributes(){return re},get sdkParamUrlQueryParamMap(){return ie},get pidlPropertyNameToPidlDocInfoProperty(){return oe},get themes(){return ae},get pidlStringKeys(){return se},get controlStates(){return le},get propertyEditState(){return ue},get controlOperationTypes(){return de},get errorValue(){return ce},get viewUpdateReasons(){return pe},get pidlDdcApiNames(){return me},get keyCodes(){return fe},get dataTypes(){return he},get clientDataTypes(){return ye},get propertyTypes(){return ge},get captchaPropertyName(){return ve},get httpActions(){return Pe},get knownTags(){return be},get knownTagPrefixes(){return Ie},get knownQueryParameters(){return Ee},get helpDialogPrefixedTags(){return Se},get scenarioContextResourceType(){return De},get scenarioContextTerminatingErrorHandling(){return Ce},get hmac(){return Te},get delimiters(){return ke},get dataStores(){return xe},get challengeScenario(){return we},get riskChallengeIndicator(){return Re},get challengeWindowSize(){return Ae},get challengeStatus(){return Oe},get challengeType(){return _e},get pollingInterval(){return Fe},get TextSymbols(){return He},get displayHelpPosition(){return Ne},get SecureFieldEvent(){return Me},get SecureFieldMessages(){return Be},get SecureFieldConstants(){return Ve},get CustomTriggerEventConstants(){return Ue},get FrequencyUnitConstants(){return Le},get PaymentMethodPIIDs(){return je}}),ze=Object.prototype.hasOwnProperty,Ge=Object.prototype.toString,qe=Object.defineProperty,Ke=Object.getOwnPropertyDescriptor,Je=Qe=Ze=Xe=$e=Ye=new function(){var e=this;this.serviceEndpoints={},this.currentEnv="prod",this.virtualEndpoints={billingAuth:{description:"Billing Auth Service",endpoint:"billingauth-endpoint",name:"billingauth",operation:"POST Tax ID"},bsxCommerce:{description:"BSX Commerce Service",endpoint:"bsxcommerce-endpoint",name:"bsxcommerce",operation:"GET MC PI"},hapi:{description:"HAPI Service",endpoint:"hapi-endpoint",name:"hapi",operation:"POST Tax ID"},jarvis:{description:"Jarvis FD",endpoint:"jarvis-endpoint",name:"jarvis",operation:"POST Jarvis"},jarvisAddress:{description:"Jarvis FD",endpoint:"jarvis-address-endpoint",name:"jarvisaddress",operation:"POST Jarvis Address"},paypalEncryptJS:{description:"Static Resource Service",endpoint:"paypalencryptjs-endpoint",name:"paypalencrypt",operation:"Download Paypal Encrypt JS"},pidl:{description:"PIDL Service",endpoint:"pidl-endpoint",name:"pidl",operation:"GET PIDL"},pidlEdge:{description:"PIDL Service on Edge",endpoint:"pidledge-endpoint",name:"pidledge",operation:"GET PIDL on Edge"},pifdBackend:{description:"PIFD Backend",endpoint:"pifdbackend-endpoint",name:"pifdbackend",operation:"PIFD operation on PIFDBackEnd"},pifd:{description:"Payment Instrument FD",endpoint:"pifd-endpoint",name:"pifd",operation:"POST PIDL"},pifdEdge:{description:"Payment Instrument FD on Edge",endpoint:"pifdedge-endpoint",name:"pifdedge",operation:"PIFD operation on Edge"},pifdAddress:{description:"Payment Instrument FD",endpoint:"pifd-address-endpoint",name:"pifdaddress",operation:"POST Address PIDL"},pifdProfile:{description:"Payment Instrument FD",endpoint:"pifd-profile-endpoint",name:"pifdprofile",operation:"POST Profile PIDL"},pifdPx:{description:"Payment Instrument FD",endpoint:"pifd-px-endpoint",name:"pifdpx",operation:"PIFD PX"},redirection:{description:"Redirection Service",endpoint:"redirection-endpoint",name:"redirection",operation:"Redirect"},redirectionv2:{description:"Redirection Service",endpoint:"redirectionv2-endpoint",name:"redirection",operation:"Redirect"},resource:{description:"Resource Service",endpoint:"resource-endpoint",name:"resource",operation:"GET Resource"},tokenization:{description:"Tokenization Service",endpoint:"tokenization-endpoint",name:"tokenization",operation:"Tokenize User Input"},tokenizationEdge:{description:"Tokenization Service on Payments Edge",endpoint:"tokenizationedge-endpoint",name:"tokenizationedge",operation:"Tokenize User Input on Edge"},transformation:{description:"Transformation Service",endpoint:"transformation-endpoint",name:"transformation",operation:"Transform User Input"},validation:{description:"Validation Service",endpoint:"validation-endpoint",name:"validation",operation:"Validate User Input"},commercemgmt:{description:"Commerce Management Endpoint",endpoint:"commercemgmt-endpoint",name:"commercemgmt",operation:"Commerce Management"},encryptJS:{description:"Static Resource Service",endpoint:"encryptjs-endpoint",name:"encrypt",operation:"Download external service specific Encrypt JS"},msrCryptoJS:{description:"Static Resource Service",endpoint:"msrcryptojs-endpoint",name:"msrcrypto",operation:"Download MSR Crypto JS"},staticResources:{description:"Static Resource Service",endpoint:"staticResources-endpoint",name:"staticresources",operation:"Download static resources"},tokenPolicy:{description:"Token Policy Service",endpoint:"tops-endpoint",name:"tokenpolicy",operation:"Verify CSV"},purchaseFrontDoor:{description:"Purchase FrontDoor Service",endpoint:"purchase-endpoint",name:"purchasefrontdoor",operation:"Apply CSV to user account"},payeeTaxProfile:{description:"Payee Tax Profile PIDL Service",endpoint:"payeetaxprofile-endpoint",name:"payeetaxprofile",operation:"Payee Tax Profile PIDL Service"},securePx:{description:"Secure PX Service",endpoint:"securepx-endpoint",name:"securepx",operation:"Secure field value handler"},provisionWalletToken:{description:"Wallet Token",endpoint:"pifd-endpoint",name:"pifd",operation:"POST Wallet Token"}},this.updateEndpoints=function(t){var n={};e.currentEnv=t,"int"===t?(n.billingAuth="billingapi.cp.microsoft-int.com",n.bsxCommerce="bsxcommerce.mp.microsoft-int.com/v1",n.hapi="commerceapi.officeppe.net/v1",n.jarvis="jcmsdf.account.microsoft-int.com",n.paypalencryptjs="pmservices.cp.microsoft-int.com/staticresourceservice/scripts/v6/int",n.encryptJS="pmservices.cp.microsoft-int.com/staticresourceservice/scripts/v6/int",n.msrCryptojs="pmservices.cp.microsoft-int.com/staticresourceservice/scripts/v6/int",n.staticResources="staticresources.payments.microsoft-int.com",n.pifdBackend="pifd.cp.microsoft-int.com/v6.0",n.pifd="pifd.cp.microsoft-int.com/v6.0",n.pifdEdge="edge.payments.microsoft-int.com/pifdint/v6.0",n.redirection="pmservices.cp.microsoft-int.com",n.redirectionv2="paymentsredirectionservice.cp.microsoft-int.com",n.tokenization="tokenization.cp.microsoft-int.com/tokens",n.tokenizationEdge="edge.payments.microsoft-int.com/tokenizationint/tokens",n.transformation="pifd.cp.microsoft-int.com/v6.0",n.validation="pifd.cp.microsoft-int.com/v6.0",n.commercemgmt="ppe.commercemgmt.m365.microsoft.com",n.tokenPolicy="tops-int.mp.microsoft.com/v1.0",n.purchaseFrontDoor="purchase-int.mp.microsoft.com/v7.0",n.securePx="securepxservice.cp.microsoft-int.com",n.payeeTaxProfile="taxservice-dev-gdfveqaqepcbgmc5.z01.azurefd.net"):"aircapi"===t?(n.billingAuth="billingapi.cp.microsoft-int.com",n.bsxCommerce="bsxcommerce.mp.microsoft-int.com/v1",n.hapi="commerceapi.officeppe.net/v1",n.jarvis="jcmsdf.account.microsoft-int.com",n.paypalencryptjs="pmservices.cp.microsoft-int.com/staticresourceservice/scripts/v6/int",n.encryptJS="pmservices.cp.microsoft-int.com/staticresourceservice/scripts/v6/int",n.msrCryptojs="pmservices.cp.microsoft-int.com/staticresourceservice/scripts/v6/int",n.staticResources="staticresources.payments.microsoft-int.com",n.pifdBackend="paymentexperience-aircapi-westus.azurewebsites.net/v7.0",n.pifd="paymentexperience-aircapi-westus.azurewebsites.net/v7.0",n.pifdEdge="edge.payments.microsoft-int.com/pifdint/v6.0",n.redirection="pmservices.cp.microsoft-int.com",n.redirectionv2="paymentsredirectionservice.cp.microsoft-int.com",n.tokenization="tokenization.cp.microsoft-int.com/tokens",n.tokenizationEdge="edge.payments.microsoft-int.com/tokenizationint/tokens",n.transformation="paymentexperience-aircapi-westus.azurewebsites.net/v7.0",n.validation="paymentexperience-aircapi-westus.azurewebsites.net/v7.0",n.commercemgmt="ppe.commercemgmt.m365.microsoft.com",n.tokenPolicy="tops-int.mp.microsoft.com/v1.0",n.purchaseFrontDoor="purchase-int.mp.microsoft.com/v7.0",n.securePx="localhost:44326",n.payeeTaxProfile="taxservice-dev-gdfveqaqepcbgmc5.z01.azurefd.net"):"ppe"===t?(n.billingAuth="billingapi.cp.microsoft.com",n.bsxCommerce="bsxcommerce.mp.microsoft.com/v1",n.hapi="commerceapi.office.net/v1",n.jarvis="jcmsfd.account.microsoft.com",n.paypalencryptjs="pmservices.cp.microsoft.com/staticresourceservice/scripts/v6/prod",n.encryptJS="pmservices.cp.microsoft.com/staticresourceservice/scripts/v6/prod",n.msrCryptojs="pmservices.cp.microsoft.com/staticresourceservice/scripts/v6/prod",n.staticResources="staticresources.payments.microsoft.com",n.pifdBackend="paymentinstruments-int.mp.microsoft.com/v6.0",n.pifd="paymentinstruments-int.mp.microsoft.com/v6.0",n.pifdEdge="edge.payments.microsoft-int.com/pifdppe/v6.0",n.redirection="pmservices.cp.microsoft.com",n.redirectionv2="paymentsredirectionservice.cp.microsoft.com",n.tokenization="tokenization.cp.microsoft.com/tokens",n.tokenizationEdge="edge.payments.microsoft-int.com/tokenizationppe/tokens",n.transformation="paymentinstruments-int.mp.microsoft.com/v6.0",n.validation="paymentinstruments-int.mp.microsoft.com/v6.0",n.commercemgmt="ppe.commercemgmt.m365.microsoft.com",n.tokenPolicy="tops.mp.microsoft.com/v1.0",n.purchaseFrontDoor="purchase.mp.microsoft.com/v7.0",n.securePx="securepxservice-ppe.cp.microsoft.com",n.payeeTaxProfile="taxservice-uat-htdmh4h7cxfjfecg.z01.azurefd.net"):"prod"===t?(n.billingAuth="billingapi.cp.microsoft.com",n.bsxCommerce="bsxcommerce.mp.microsoft.com/v1",n.hapi="commerceapi.office.net/v1",n.jarvis="jcmsfd.account.microsoft.com",n.paypalencryptjs="pmservices.cp.microsoft.com/staticresourceservice/scripts/v6/prod",n.encryptJS="pmservices.cp.microsoft.com/staticresourceservice/scripts/v6/prod",n.msrCryptojs="pmservices.cp.microsoft.com/staticresourceservice/scripts/v6/prod",n.staticResources="staticresources.payments.microsoft.com",n.pifdBackend="paymentinstruments.mp.microsoft.com/v6.0",n.pifd="paymentinstruments.mp.microsoft.com/v6.0",n.pifdEdge="edge.payments.microsoft.com/pifd/v6.0",n.redirection="pmservices.cp.microsoft.com",n.redirectionv2="paymentsredirectionservice.cp.microsoft.com",n.tokenization="tokenization.cp.microsoft.com/tokens",n.tokenizationEdge="edge.payments.microsoft.com/tokenization/tokens",n.transformation="paymentinstruments.mp.microsoft.com/v6.0",n.validation="paymentinstruments.mp.microsoft.com/v6.0",n.commercemgmt="commercemgmt.m365.microsoft.com",n.tokenPolicy="tops.mp.microsoft.com/v1.0",n.purchaseFrontDoor="purchase.mp.microsoft.com/v7.0",n.securePx="securepxservice.cp.microsoft.com",n.payeeTaxProfile="taxprofileservice-prod-hqgqe5g5f8fwfcdw.z01.azurefd.net"):"feature"===t&&(n.billingAuth="billingapi.cp.microsoft.com",n.bsxCommerce="bsxcommerce.mp.microsoft.com/v1",n.hapi="commerceapi.office.net/v1",n.jarvis="jcmsfd.account.microsoft.com",n.paypalencryptjs="pmservices.cp.microsoft.com/staticresourceservice/scripts/v6/prod",n.encryptJS="pmservices.cp.microsoft.com/staticresourceservice/scripts/v6/prod",n.msrCryptojs="pmservices.cp.microsoft.com/staticresourceservice/scripts/v6/prod",n.staticResources="staticresources.payments.microsoft.com",n.pifdBackend="paymentinstruments.mp.microsoft.com/v6.0",n.pifd="st-pifd-prod-ncus.azurewebsites.net/v6.0",n.pifdEdge="st-pifd-prod-ncus.azurewebsites.net/v6.0",n.redirection="pmservices.cp.microsoft.com",n.redirectionv2="paymentsredirectionservice.cp.microsoft.com",n.tokenization="tokenization.cp.microsoft.com/tokens",n.tokenizationEdge="edge.payments.microsoft.com/tokenization/tokens",n.transformation="st-pifd-prod-ncus.azurewebsites.net/v6.0",n.validation="st-pifd-prod-ncus.azurewebsites.net/v6.0",n.commercemgmt="commercemgmt.m365.microsoft.com",n.tokenPolicy="tops.mp.microsoft.com/v1.0",n.purchaseFrontDoor="purchase.mp.microsoft.com/v7.0",n.payeeTaxProfile="taxservice-dev-gdfveqaqepcbgmc5.z01.azurefd.net"),e.serviceEndpoints={},e.serviceEndpoints[e.virtualEndpoints.billingAuth.endpoint]=n.billingAuth,e.serviceEndpoints[e.virtualEndpoints.bsxCommerce.endpoint]=n.bsxCommerce,e.serviceEndpoints[e.virtualEndpoints.hapi.endpoint]=n.hapi,e.serviceEndpoints[e.virtualEndpoints.jarvis.endpoint]=n.jarvis,e.serviceEndpoints[e.virtualEndpoints.jarvisAddress.endpoint]=n.jarvis,e.serviceEndpoints[e.virtualEndpoints.paypalEncryptJS.endpoint]=n.paypalencryptjs,e.serviceEndpoints[e.virtualEndpoints.encryptJS.endpoint]=n.encryptJS,e.serviceEndpoints[e.virtualEndpoints.msrCryptoJS.endpoint]=n.msrCryptojs,e.serviceEndpoints[e.virtualEndpoints.staticResources.endpoint]=n.staticResources,e.serviceEndpoints[e.virtualEndpoints.pidl.endpoint]=n.pifd,e.serviceEndpoints[e.virtualEndpoints.pidlEdge.endpoint]=n.pifdEdge,e.serviceEndpoints[e.virtualEndpoints.pifdBackend.endpoint]=n.pifdBackend,e.serviceEndpoints[e.virtualEndpoints.pifd.endpoint]=n.pifd,e.serviceEndpoints[e.virtualEndpoints.pifdEdge.endpoint]=n.pifdEdge,e.serviceEndpoints[e.virtualEndpoints.pifdAddress.endpoint]=n.pifd,e.serviceEndpoints[e.virtualEndpoints.pifdProfile.endpoint]=n.pifd,e.serviceEndpoints[e.virtualEndpoints.pifdPx.endpoint]=n.pifd,e.serviceEndpoints[e.virtualEndpoints.redirection.endpoint]=n.redirection,e.serviceEndpoints[e.virtualEndpoints.redirectionv2.endpoint]=n.redirectionv2,e.serviceEndpoints[e.virtualEndpoints.resource.endpoint]=n.pifd,e.serviceEndpoints[e.virtualEndpoints.tokenization.endpoint]=n.tokenization,e.serviceEndpoints[e.virtualEndpoints.tokenizationEdge.endpoint]=n.tokenizationEdge,e.serviceEndpoints[e.virtualEndpoints.transformation.endpoint]=n.transformation,e.serviceEndpoints[e.virtualEndpoints.validation.endpoint]=n.validation,e.serviceEndpoints[e.virtualEndpoints.commercemgmt.endpoint]=n.commercemgmt,e.serviceEndpoints[e.virtualEndpoints.tokenPolicy.endpoint]=n.tokenPolicy,e.serviceEndpoints[e.virtualEndpoints.purchaseFrontDoor.endpoint]=n.purchaseFrontDoor,e.serviceEndpoints[e.virtualEndpoints.securePx.endpoint]=n.securePx,e.serviceEndpoints[e.virtualEndpoints.payeeTaxProfile.endpoint]=n.payeeTaxProfile},this.addGenericParameters=function(e,t,n){if(t&&t.parameters)for(var r in t.parameters){var i=ie[r];!t.parameters[r]||e[r]||e[i]||(e[r]=t.parameters[r])}return n&&(e.operationType=n),e},this.getGenericResourceParams=function(t,n,r){return e.addGenericParameters({},t,r)},this.getResourceEndpointParams=function(t,n,r,i){var o=e.addGenericParameters({},n,i);return o.resourceName=t,o},this.getOrderResourceEndpointParams=this.getPaymentResourceParams=function(t,n,r){var i=(n=n||{}).paymentMethod||{};return e.addGenericParameters({family:i.paymentMethodFamily,type:i.paymentMethodType,country:((n.details||{}).address||{}).country},t,r)},this.resourceTypeToPidlDoc={addressex:{description:"PIDL Service",getParams:this.getGenericResourceParams,operation:"GET Challenge PIDL",suffix:"Descriptions",template:"{pidl-endpoint}/users/{userId}/addressDescriptions"},challenge:{description:"PIDL Service",getParams:this.getGenericResourceParams,operation:"GET Challenge PIDL",suffix:"Descriptions",template:"{pidl-endpoint}/users/{userId}/challengeDescriptions"},order:{addResourceNameToQueryParam:!0,description:"PIDL Service",getParams:this.getOrderResourceEndpointParams,operation:"GET Order resource PIDLs",suffix:"Descriptions",template:"{pidl-endpoint}/users/{userId}/resourceDescriptions"},paymentinstrument:{description:"PIDL Service",getParams:this.getPaymentResourceParams,operation:"GET Payment Instrument PIDL",suffix:"Descriptions",template:"{pidl-endpoint}/users/{userId}/paymentMethodDescriptions",anonymousTemplate:"{pidl-endpoint}/paymentMethodDescriptions"},paymentmethod:{description:"PIDL Service",getParams:this.getPaymentResourceParams,operation:"GET Payment Method PIDL",suffix:"Descriptions",template:"{pidl-endpoint}/users/{userId}/paymentMethodDescriptions",anonymousTemplate:"{pidl-endpoint}/paymentMethodDescriptions"},payeetaxprofile:{description:"Payee Tax Profile PIDL Service",getParams:this.getPaymentResourceParams,operation:"GET Payee Tax Profile PIDL",suffix:"",template:"{payeetaxprofile-endpoint}/api/v1/getpidldocument",anonymousTemplate:"{payeetaxprofile-endpoint}/api/v1/getpidldocument",removeOperationParameter:!0},default:{description:"PIDL Service",getParams:this.getGenericResourceParams,operation:"GET PIDL",suffix:"Descriptions",template:"{pidl-endpoint}/users/{userId}/{resourceType}",anonymousTemplate:"{pidl-endpoint}/{resourceType}"}},this.resourceTypeToResource={paymentinstrument:{description:"Payment Instrument FD",operation:"GET Payment Instrument Resource",template:"{resource-endpoint}/users/{userId}/paymentInstrumentsEx/{id}"},paymentmethod:{description:"Payment Instrument FD",operation:"GET Payment Method Resource",template:"{resource-endpoint}/users/{userId}/paymentInstrumentsEx/{id}"},profile:{description:"Payment Instrument FD",operation:"GET Profile Resource",template:"{resource-endpoint}/users/{userId}/profiles/{id}"},address:{description:"Payment Instrument FD",operation:"GET Address Resource",template:"{resource-endpoint}/users/{userId}/addresses/{id}"},addressex:{description:"Payment Instrument FD",operation:"GET Address Resource",template:"{resource-endpoint}/users/{userId}/addressesEx/{id}"},legalentity:{description:"Jarvis FD",operation:"GET LegalEntity Profile Resource from Jarvis",template:"{jarvis-endpoint}/users/{userId}/profiles?type=legalentity"},billinggroup:{description:"HAPI Billing Groups",operation:"GET Billing Groups",template:"{hapi-endpoint}/{userId}/billinggroup"},wallettoken:{description:"PIDL Service",operation:"POST Provision Wallet Token",template:"{pifd-endpoint}/users/{userId}/provisionWalletToken"},default:{description:"Payment Instrument FD",operation:"GET Resource",template:"{resource-endpoint}/users/{userId}/{resourceType}/{id}"}},this.telemetryHeaders={names:["x-ms-operation-version","x-ms-flight"],prefixes:["x-ms-px"]},this.getServiceEndpoint=function(t){return e.serviceEndpoints[t]},this.getAlternateUrl=function(t){if(t){var n="https://",r="edge.payments.microsoft.com",i="edge.payments.signup.azure.com",o=n+e.serviceEndpoints[e.virtualEndpoints.pifd.endpoint],a=n+e.serviceEndpoints[e.virtualEndpoints.tokenization.endpoint],s=n+e.serviceEndpoints[e.virtualEndpoints.tokenizationEdge.endpoint],l=n+e.serviceEndpoints[e.virtualEndpoints.pifdEdge.endpoint],u=((window||{}).location||{}).hostname||"";u&&u.indexOf("signup.azure.com")>-1&&(l=l.replace(r,i),s=s.replace(r,i)),qt.startsWithIgnoreCase(t,o)?t=t.replace(o,l):qt.startsWithIgnoreCase(t,l)?t=t.replace(l,o):qt.startsWithIgnoreCase(t,a)?t=t.replace(a,s):qt.startsWithIgnoreCase(t,s)&&(t=t.replace(s,a))}return t},this.setEnv=function(t){e.updateEndpoints(t)},this.getEnv=function(){return e.currentEnv},this.updateEndpoints("prod")};function et(e,t){return e.debugMessage?qt.format(e.debugMessage,t):""}var tt,nt,rt,it,ot,at,st,lt,ut,dt,ct,pt,mt=function(e,t,n,r){this.message=n||"",this.name=t.name,this.code=t.code,this.type=e},ft=function(e){function t(t,n,r){var i=e.call(this,L.inputValidation,t,null,r)||this;return i.parameterName=n,i.debugMessage=et(t,r),i}return c(t,e),t}(mt),ht=function(e){function t(t,n,r){var i=e.call(this,L.inputValidation,t,null,r)||this;return i.apiName=n,i.debugMessage=et(t,r),i}return c(t,e),t}(mt),yt=function(e){function t(t,n,r,i){var o=e.call(this,L.userInputValidation,t,n,i)||this;return o.propertyName=r,o.errorCode=n,o.validationErrorType=W.property,o.debugMessage=et(t,i),o}return c(t,e),t}(mt),gt=function(e){function t(t,n,r,i){var o=e.call(this,L.userInputValidation,t,n,i)||this;return o.groupDisplayId=r,o.errorCode=n,o.validationErrorType=W.group,o.debugMessage=et(t,i),o}return c(t,e),t}(mt),vt=function(e){function t(t,n,r,i){var o=e.call(this,L.formValidation,t,n,i)||this;return o.errors=r,o.debugMessage=et(t,i),o}return c(t,e),t}(mt),Pt=function(e){function t(t,n,r){var i=e.call(this,L.unexpected,t,r,n)||this;return i.debugMessage=et(t,n),i}return c(t,e),t}(mt),bt=function(e){function t(t,n,r,i,o,a,s,l,u,d){var c=e.call(this,L.serverError,t,null,s)||this;return c.innererror=r,c.status=i,c.url=n,c.statusText=o,c.responseText=a,c.httpMethod=l,c.retryAttempt=u,c.retryable=d,c.debugMessage=et(t,s),c}return c(t,e),t}(mt),It=function(e){function t(t,n,r){var i=e.call(this,L.invalidSetup,t,n,r)||this;return i.debugMessage=et(t,r),i}return c(t,e),t}(mt),Et=function(e){function t(t,n,r){var i=e.call(this,L.paymentMethodFailure,t,n,r)||this;return i.debugMessage=et(t,r),i}return c(t,e),t}(mt),St=function(e){function t(t,n,r){var i=e.call(this,L.failedToOpenWindow,t,n,r)||this;return i.debugMessage=et(t,r),i}return c(t,e),t}(mt),Dt=function(e){function t(t,n,r){var i=e.call(this,L.unmatchedAmount,t,n,r)||this;return i.debugMessage=et(t,r),i}return c(t,e),t}(mt),Ct=mt),Tt=new(function(){function e(){this.inputParameterValidationFailedError=ft,this.apiValidationError=ht,this.propertyValidationFailedError=yt,this.groupValidationFailedError=gt,this.formValidationFailedError=vt,this.unexpectedError=Pt,this.serverError=bt,this.invalidSetupError=It,this.paymentMethodFailureError=Et,this.failedToOpenWindowError=St,this.unmatchedAmountError=Dt,this.testHookErrorBase=Ct}return e.prototype.isUnexpectedError=function(e){return qt.isObject(e)&&e.type===L.unexpected},e.prototype.isServerError=e}()),kt={inputParameterMissing:{code:1e3,name:"mandatoryInputParameterMissingOrNull",debugMessage:"Mandatory parameter '{0}' is missing or null"},inputParameterTypeMismatch:{code:1001,name:"inputParameterTypeMismatch",debugMessage:"Parameter type is mismatched. Expected type was '{0}', but actual type passed is '{1}'"},inputParameterNotInRange:{code:1002,name:"inputParameterNotInRange",debugMessage:"Value of parameter '{0}' is '{1}' not in the range of expected values. Valid range for the parameter is '{2}'"},containerIdNotFound:{code:1003,name:"containerIdNotFound",debugMessage:"Value of 'containerId' parameter '{0}' is not a valid element in current HTML DOM"},apiCannotStartAsControlNotInitialized:{code:1004,name:"apiCannotStartAsControlNotInitialized",debugMessage:"API '{0}' cannot start as display control is not initialized."},apiCannotStartAsNotAllowedInCurrentState:{code:1005,name:"apiCannotStartAsNotAllowedInCurrentState",debugMessage:"API '{0}' cannot start as current control state is '{1}' and the API is allowed only in following states '{2}'"},busyBlockShowHideHandlerAndbusyBlockIdAreExclusive:{code:1006,name:"busyBlockShowHideHandlerAndbusyBlockIdAreExclusive",debugMessage:"Both busyBlockShowHideHandler and busyBlockId are passed in displayOptions. They are exclusive and only one can be passed."},inputParameterSmallerThanMinLength:{code:1007,name:"inputParameterSmallerThanMinLength",debugMessage:"Array element '{0}' is expected to have minimum length '{1}' but it has a length of '{2}'."},inputParameterLargerThanMaxLength:{code:1008,name:"inputParameterLargerThanMaxLength",debugMessage:"Array element '{0}' is expected to have maximum length '{1}' but it has a length of '{2}'."},mandatoryPropertyValueMissing:{code:1101,name:"mandatoryPropertyValueMissing",debugMessage:"Property '{0}' is mandatory, but its value is missing"},propertyValidationFailed:{code:1102,name:"propertyValidationFailed",debugMessage:"Validation for property '{0}' failed with the message '{1}'"},formValidationFailed:{code:1103,name:"formValidationFailed",debugMessage:"Validation for form failed with the message '{0}'"},readUserInputFailed:{code:1104,name:"readUserInputFailed",debugMessage:"Read user input failed with the message '{0}'"},formSubmissionFailedBadUserInput:{code:1105,name:"formSubmissionFailedBadUserInput",debugMessage:"Form submission failed with error '{0}' due to bad user input"},editedPropertiesValidationFailed:{code:1106,name:"editedPropertiesValidationFailed",debugMessage:"Validation for edited properties failed with the message '{0}'"},propertyTransformationFailed:{code:1107,name:"propertyTransformationFailed",debugMessage:"Property transformation failed with the message '{0}'"},tokenizationFailed:{code:1108,name:"tokenizationFailed",debugMessage:"Tokenization failed with the message '{0}'"},hmacError:{code:1109,name:"hmacError",debugMessage:"HMAC error happened with the message '{0}'"},tokenizationError:{code:1110,name:"tokenizationError",debugMessage:"Some error happened during tokenization. Here is the error message '{0}'"},connectivityError:{code:1200,name:"connectivityError",debugMessage:"There was a connectivity error when attempting to download PIDL document. Error message: '{0}'"},pidlDocDownloadFailed:{code:1201,name:"pidlDocDownloadFailed",debugMessage:"Failed to download PIDL document. Error message: '{0}'"},formSubmitFailed:{code:1202,name:"formSubmitFailed",debugMessage:"Failed to submit form. Error message: '{0}'"},resourceInstanceDownloadFailed:{code:1203,name:"resourceInstanceDownloadFailed",debugMessage:"Failed to download resource instance. Error message: '{0}'"},commerceJsDownloadFailed:{code:1204,name:"commerceJsDownloadFailed",debugMessage:"Failed to download Commerce JS"},restMethodInvocationFailed:{code:1205,name:"restMethodInvocationFailed",debugMessage:"Rest method invocation for url '{0}' failed with error '{1}'"},missingSubmitActionInPidlDoc:{code:1501,name:"missingSubmitActionInPidlDoc",debugMessage:"Cannot perform submit action as the current PIDL document does not have it."},submitActionMissing:{code:1502,name:"submitActionMissing",debugMessage:"Submit action is missing in the PIDL document"},unknownActionType:{code:1503,name:"unknownActionType",debugMessage:"Unknown action type '{0}'"},unknownClientActionType:{code:1504,name:"unknownClientActionType",debugMessage:"Unknown client action type '{0}'"},cannotMoveToNextPageAsOnLastPage:{code:1505,name:"cannotMoveToNextPageAsOnLastPage",debugMessage:"Cannot move to next page as already on the last page"},cannotMoveToPrevPage:{code:1506,name:"cannotMoveToPrevPage",debugMessage:"Cannot move to previous page"},noMappingToGetPidlDocForResource:{code:1507,name:"noMappingToGetPidlDocForResource",debugMessage:"There is no mapping for getting PIDL document for the input resource type '{0}'"},noMappingToGetHtmlClassNameForElement:{code:1508,name:"noMappingToGetHtmlClassNameForElement",debugMessage:"There is no mapping for getting HTML class name for element '{0}'"},missingMandatoryParameterForHtmlCreation:{code:1509,name:"missingMandatoryParameterForHtmlCreation",debugMessage:"Display id '{0}' needs to be rendered as '{1}'. But the mandatory property '{2}' is missing or empty"},parameterTypeMismatchForHtmlCreation:{code:1510,name:"parameterTypeMismatchForHtmlCreation",debugMessage:"Display id '{0}' needs to be rendered as '{1}'. Property '{2}' is expected to be of type '{3}' but actual type is '{4}'"},modelNotPpopulated:{code:1511,name:"modelNotPopulated",debugMessage:"Model is not populated"},cannotMoveToPageIndex:{code:1512,name:"cannotMoveToPageIndex",debugMessage:"Cannot move to the given page index because it is out of bounds"},apiStateMappingNotFound:{code:1513,name:"apiStateMappingNotFound",debugMessage:"Api '{0}' does not have a mapping in state manager"},contextMissingFromPidlAction:{code:1514,name:"contextMissingFromPidlAction",debugMessage:"PIDL action '{0}' does not have should have a context"},restActionPidlActionMissingParameters:{code:1515,name:"restActionPidlActionMissingParameters",debugMessage:"Rest action is missing parameter '{0}' "},noPidlDocumentInPopulateRequest:{code:1516,name:"noPidlDocumentInPopulateRequest",debugMessage:"No PIDL documents are sent in the request for populating model"},noDisplayDescriptionInPidlDocument:{code:1517,name:"noDisplayDescriptionInPidlDocument",debugMessage:"No display description are found in the PIDL document"},multiplePagesInLinkedPidlForSinglePagePidlContainer:{code:1518,name:"multiplePagesInLinkedPidlForSinglePagePidlContainer",debugMessage:"Multiple pages extracted from a linked PIDL for a single page PIDL container (being a member of a PIDL Page)"},expectedPayloadValueNotPresentInServerResponse:{code:1519,name:"expectedPayloadValueNotPresentInServerResponse",debugMessage:"The expected value for the next submit payload was not present in server response"},noRedirectUrlToNavigate:{code:1520,name:"noRedirecturlToNavigate",debugMessage:"There is no redirection service url to navigate"},invalidCacheEntry:{code:1521,name:"invalidCacheEntry",debugMessage:"Cache entry for the handle given is invalid"},unexpectedPrefillDataCount:{code:1522,name:"unexpectedPrefillDataCount",debugMessage:"The expected count of prefill data objects for '{0}' is '{1}' but actual count was '{2}'"},defaultActionNotFound:{code:1523,name:"defaultActionNotFound",debugMessage:"Default action is not found on the page"},isDefaultPidlActionNotFound:{code:1524,name:"isDefaultPidlActionNotFound",debugMessage:"Pidl action with isDefault === true not found in the pidl with element ids: {0}"},displayElementPointingToMissingDataProperty:{code:1525,name:"noPropertyFoundForDisplayElement",debugMessage:"Display element '{0}' is pointing to missing data property '{1}'"},invalidReturnContextPidl:{code:1526,name:"invalidReturnContextPidl",debugMessage:"Downloaded pidl had returnContext client action type but context was empty"},duplicateDisplayHintIdOnPage:{code:1527,name:"duplicateDisplayHintIdOnPage",debugMessage:"DisplayId '{0}' appears multiple times on page '{1}'"},invalidNotInPurchasePendingState:{code:1528,name:"instanceNotInPurchasePendingState",debugMessage:"The PI downloaded was not a valid type for purchase pending state"},submitPidlRequestMissingParameters:{code:1529,name:"submitPidlRequestMissingParameters",debugMessage:"Submit pidl request is missing parameter '{0}'"},IFrameTimedOut:{code:1530,name:"iframetimedout",debugMessage:"Took to long to notify as successful. Operation timed out'"},unhandledRejection:{code:1531,name:"unhandledrejection",debugMessage:"Unhandled Promise Rejection at {0}"},iFrameReturnedFailure:{code:1532,name:"iFrameReturnedFailure",debugMessage:"iFrame POST message returned failure with message {0}"},failureClientActionReturned:{code:1533,name:"failureClientActionReturned",debugMessage:"Client action type failure is returned with payload {0}"},validationFailedForNonUserInputProperty:{code:1534,name:"validationFailedForNonUserInputProperty",debugMessage:"Validation for property '{0}' failed with error code '{1}' and message '{2}' which has caused flow termination because correct value for this property is expected either to be passed by the partner or is there as default value in the PIDL, not input by the user."},pollingTimedOut:{code:1535,name:"pollingTimedOut",debugMessage:"Polling exceeded maximum time allowed"},unableToSetupPolling:{code:1536,name:"unableToSetupPolling",debugMessage:"Unable to setup polling"},msrEncryptionFailed:{code:1537,name:"msrEncryptionFailed",debugMessage:"MSR Encryption failed with the message '{0}'"},onlyOneBusyBlockPropAllowed:{code:1538,name:"onlyOneBusyBlockPropAllowed",debugMessage:"Please pass in only one prop option for busyBlocks (busyBlockId, busyBlockElement, or busyBlockShowHideHandler)"},failurePollingResponseReturned:{code:1539,name:"failurePollingResponseReturned",debugMessage:"The following response from polling is unexpected: {0}"},fileUploadFailure:{code:1540,name:"fileUploadFailure",debugMessage:"Unable to upload the file"},invalidSetup:{code:1541,name:"invalidSetup",debugMessage:"PaymentAgent needs to be fully initialized"},paymentMethodFailure:{code:1542,name:"paymentMethodFailure",debugMessage:"Error processing payment sheet"},unmatchedAmount:{code:1543,name:"unmatchedAmount",debugMessage:"Authorization group total amount does not match amount"},failedToOpenWindow:{code:1544,name:"failedToOpenWindow",debugMessage:"Failed to Open Window"},unmatchedSecureFieldEvent:{code:1601,name:"unmatchedSecureFieldEvent",debugMessage:"The following secure field event is unexpected: {0}"},unexpectedSecureFieldMessage:{code:1602,name:"unexpectedSecureFieldMessage",debugMessage:"Unexpected secure field message."},secureFieldPromiseNotFound:{code:1602,name:"secureFieldPromiseNotFound",debugMessage:"Unable to find promise after secure field posted back message."}};function xt(e){return!qt.isNullOrUndefined(e)&&"propertyType"in e&&"type"in e&&"dataType"in e}function wt(e){return!qt.isNullOrUndefined(e)&&"displayType"in e}function Rt(e){return wt(e)&&(e.displayType===st.group||e.displayType===st.dataCollectionBindingGroup||e.displayType===st.page||e.displayType===st.textGroup)}function At(e){if(wt(e)){var t=e;return t&&t.propertyElementType&&t.propertyElementType===st.file}return!1}function Ot(e){return wt(e)&&e.displayType===st.logo}function _t(e){return wt(e)&&(e.displayType===st.property||e.displayType===st.prefillControl)}function Ft(e){return!qt.isNullOrUndefined(e)&&"identity"in e&&"data_description"in e}function Ht(e){return!qt.isNullOrUndefined(e)&&qt.isArray(e)&&e.length&&Ft(e[0])}function Nt(e){return!qt.isNullOrUndefined(e)&&"clientAction"in e}unction Bt(e){return!qt.isNullOrUndefined(e)&&qt.isString(e.type)&&(e.type===it.Pidl||e.type===it.Wait||e.type===it.Redirect||e.type===it.ReturnContext||e.type===it.ExecuteScriptAndResume||e.type===it.None||e.type===it.GoHome||e.type===it.Failure||e.type===it.MergeData||e.type===it.RestAction)}tt||(tt={})),nt||(nt={})),function(e){e.regex="regex",e.service="service"}(rt||(rt={})),it||(it={})),ot||(ot={})),at||(at={})),st||(st={})),function(e){e.inline="inline",e.vertical="vertical"}(lt||(lt={})),function(e){e.afterBase="afterBase",e.beforeBase="beforeBase",e.withBase="withBase"}(ut||(ut={})),dt||(dt={})),function(e){e.always="always",e.focusout="focusout"}(ct||(ct={})),pt||(pt={}));var Ut=Object.freeze({__proto__:null,get pidlOperationTypeValues(){return tt},get validationModesValues(){return nt},get transformationModesValues(){return rt},isDataDescription:xt,get clientActionTypeValues(){return it},get paymentInstrumentStatusValues(){return ot},get displayTransformationTypesValues(){return at},get pidlDisplayTypesValues(){return st},isDisplayDescription:wt,get groupLayoutOrientationTypesValues(){return lt},isContainerDisplayDescription:Rt,isFilePickerDisplayDescription:At,isGroupDisplayDescription:function(e){return wt(e)&&(e.displayType===st.group||e.displayType===st.dataCollectionBindingGroup)},isCaptchaDisplayDescription:function(e){return wt(e)&&e.displayType===st.captcha},isDataCollectionBindingGroupDisplayDescription:function(e){return wt(e)&&e.displayType===st.dataCollectionBindingGroup},isPageDisplayDescription:isContentDisplayDescription:function(e){return wt(e)&&(e.displayType===st.button||e.displayType===st.expression||e.displayType===st.heading||e.displayType===st.hyperlink||e.displayType===st.subheading||e.displayType===st.text||e.displayType===st.iFrame)},isLogoDisplayDescription:Ot,get pidlSubmitOrdersValues(){return ut},get pidlSelectTypeValues(){return dt},get resolutionPolicyValues(){return ct},isPropertyDisplayDescription:_t,get serverErrorRetryPolicyValues(){return pt},isPidlDocument:Ft,isPidlDocumentArray:Ht,isPidlDocumentWithClientAction:Nt,isPidlContainerDisplayDescription:Mt,isClientAction:Bt,isInvokeResourceActionApiParams:Vt}),Lt=new function(){var e=this;this.getResolvedPidls=function(t,n){var r=[];return t.forEach((function(t){var i=!1;for(var o in n){var a=jt.getPropertyFromDataDescription(t.data_description,o),s=n[o];if(s&&s.getValue&&!(i=e.resolveKeyProperty(a,s.getValue(a))))break}i&&r.push(t)})),r},this.getPidlContainersInSubmitOrder=function(t,n){t.forEach((function(t){if(Mt(t)){var r=t.submitOrder;r===ut.beforeBase?n.beforeBase.push(t):r===ut.afterBase?n.afterBase.push(t):n.withBase.push(t)}else Rt(t)&&t.members.length&&e.getPidlContainersInSubmitOrder(t.members,n)}))},this.resolveInfoDescriptionId=this.getFirstPidlWithValidDefaultKey=function(t,n){return e.getResolvedPidls(t,n)[0]},this.getPidlSubmitOrder=function(t){var n={beforeBase:[],withBase:[],afterBase:[]};return e.getPidlContainersInSubmitOrder(t.displayDescription,n),n},this.resolveKeyProperty=function(e,t){var n=(e||{validation:null}).validation;return!(qt.isUndefined(t)||!n)&&new RegExp(n.resolutionRegex||n.regex).test(t)}},jt=new function(){var e=this;this.getPropertyDescriptorsHelper=function(t,n,r){var i=[];for(var o in t){var a=t[o];if(a instanceof Array)for(var s=0;s<a.length;s++)i=i.concat(e.getPropertyDescriptorsHelper(a[s].data_description,n,r));else a.hasOwnProperty(n)&&a[n]===r&&i.push({propertyName:o,propertyDescriptor:a})}return i},this.getPropertyValueFromInputDataHelper=function(t,n){var r;for(var i in t){if(i===n){r=t[i];break}if(qt.isObject(t[i])&&void 0!==(r=e.getPropertyValueFromInputDataHelper(t[i],n)))break}return r},this.getPropertyFromDataDescriptionHelper=function(t,n,r){var i;if(void 0===r&&(r=!1),n)for(var o in t){var a=t[o];if(a instanceof Array){if(r&&o===n&&a[0])return a[0].data_description;if(a.some((function(t){return void 0!==(i=e.getPropertyFromDataDescriptionHelper(t.data_description,n,r))})),void 0!==i)break}else if(e.propertyMatchesDataDescriptionInternal(a,o,n)){i=a;break}}return i},this.getFirstResolvedPidlDocument=function(t,n){var r=null;return t.some((function(t){if(e.getKeyPropertyDescriptors(t.data_description).every((function(t){return Lt.resolveKeyProperty(t.propertyDescriptor,e.getPropertyValueFromInputData(n,t.propertyName))})))return r=t,!0})),r},this.propertyMatchesDataDescriptionInternal=function(e,t,n){return n&&(t===n||e&&e.display_property===n)},this.getPropertyNamesFromDataDescription=function(t,n,r){return e.getPropertyDescriptorsHelper(t,n,r)},this.getKeyPropertyDescriptors=this.getPropertyValueFromInputData=function(t,n){return e.getPropertyValueFromInputDataHelper(t,n)},this.getPropertyFromDataDescription=function(t,n){var r=e.getPropertyFromDataDescriptionHelper(t,n);return xt(r)?r:void 0},this.getPropertiesFromDataDescription=this.propertyMatchesDataDescription=function(t,n,r){return e.propertyMatchesDataDescriptionInternal(t,n,r)},this.getDisplayPropertyName=,Wt=new function(){var e=this;this.setService=function(t,n){e.services[t]=n},this.getService=function(t){return e.services[t]},this.getCommerceService=function(){return e.getService("commerce")},this.setCommerceService=function(t){e.setService("commerce",t)},this.getLoggingService=function(){return e.getService("logging")},this.setLoggingService=function(t){e.setService("logging",t)},this.getPidlService=function(){return e.getService("pidl")},this.setPidlService=function(t){e.setService("pidl",t)},this.getRedirectionService=function(){return e.getService("redirection")},this.setRedirectionService=function(t){e.setService("redirection",t)},this.getTelemetryInjectionService=function(){return e.getService("telemetry")},this.setTelemetryInjectionService=this.getPidlStoreService=function(){return e.getService("pidlStore")},this.setPidlStoreService=function(t){return e.setService("pidlStore",t)},this.getOneDSService=this.setOneDSService=this.testHookResetServices=function(){e.services={}},this.services={}},zt=new function(){var e=this;this.getDisplayDescriptionPidlActions=function(t,n){if(t&&(t.pidlAction&&n.push(t.pidlAction),Rt(t)&&t.members))for(var r=0;r<t.members.length;r++)e.getDisplayDescriptionPidlActions(t.members[r],n)},this.getLogoDescriptions=function(t,n){if(t&&n&&(Ot(t)&&n.push(t),Rt(t)&&t.members))for(var r=0;r<t.members.length;r++)e.getLogoDescriptions(t.members[r],n)},this.getPidlIdentityForProperty=function(t,n){var r;if(n)if(t instanceof Array){for(var i=0;i<t.length;i++)if(r=e.getPidlIdentityForProperty(t[i],n))return r}else if(t.data_description)for(var o in t.data_description){var a=t.data_description[o];if(a instanceof Array){if(r=e.getPidlIdentityForProperty(a,n))return r}else if(jt.propertyMatchesDataDescription(a,o,n))return t.identity}},this.createIdentityHash=function(e){var t="";for(var n in e)qt.isString(e[n])&&(t+=n+"_"+e[n]);return t},this.resolvePidlDocs=function(e,t){if(e instanceof Array){var n=[];if(t)for(var r=Wt.getCommerceService(),i=0;i<e.length;i++)for(var o=0;o<t.length;o++)if(r.areIdentitiesEqual(e[i].identity,t[o])){n.push(e[i]);break}return n}return[e]},this.getDisplayDescriptionsPidlActions=function(t){var n=[];if(e.getDisplayDescriptionPidlActions(t,n),_t(t)){var r=t.possibleOptions;if(r)for(var i in r){var o=r[i].pidlAction;o&&(n=y(y([],n,!0),[o],!1))}}return n},this.getSubmitPidlAction=function(t){if(t&&t.displayDescription){var n=[];return t.displayDescription.forEach((),qt.find(n,()}},this.isPrimaryResource=function(e){return(e&&e.scenarioContext&&e.scenarioContext.resourceType||De.primary)===De.primary},this.ignoreTerminatingError=function(e){return e&&e.length>0&&e[0]&&e[0].scenarioContext&&e[0].scenarioContext.terminatingErrorHandling&&e[0].scenarioContext.terminatingErrorHandling===Ce.ignore},this.matchPidlIdsToPidls=function(e,t,n){for(var r=t&&n&&t.length===n.length,i=0;r&&i<t.length;i++){for(var o=!1,a=0;a<n.length;a++){var s=n[a]?n[a].identity:null;o=o||e.areIdentitiesEqual(t[i],s)}r=r&&o}return r},this.translateErrorTargetsToDisplayProperties=function(e,t){var n=[];return e.forEach((function(e){var r=jt.getPropertyFromDataDescription(t.data_description,e);n.push(r&&r.display_property||e)})),n},this.doesKeyPropertyTriggerPidlDownload=function(e){return e&&qt.boolify(e.pidl_download_enabled||e.possible_values)},this.getKeyPropertyPidlDownloadUrlParam=function(e,t){return e&&(e.pidl_download_parameter||e.possible_values&&t)},this.createKeyPropertyMap=function(e,t){for(var n={},r=i=0,o=e.length;i<o;i++)for(var a=jt.getKeyPropertyDescriptors(e[i].data_description),s=0,l=a.length;s<l;s++){var u=a[s].propertyName,d=a[s].propertyDescriptor;n[u]={propertyDescriptor:d,getValue:r(u)}}return n},this.getPropertyValueGetter=function(e,t,n){return function(r,i){var o=e===r?t:n(r);return qt.toString(o)}},this.getDefaultPropertyValueGetter=function(){return ,this.getDataSourceLinks=function(e){var t=[];if(e&&(qt.isNullOrEmptyObject(e.dataSources)||t.push(e.dataSources),e.linkedPidls&&e.linkedPidls.length>0))for(var n=0;n<e.linkedPidls.length;n++)qt.isNullOrEmptyObject(e.linkedPidls[n].dataSources)||t.push(e.linkedPidls[n].dataSources);return t}},Gt=new(function(){function e(){var e=this;this.extend=$e,this.getSelectElementType=this.getErrorDetailsFromPidl=function(t,n){if(t&&n){var r=n[t];if(r&&r.Target)return e.extend(!0,r,{code:t,target:r.Target,message:r.ErrorMessage})}},this.processServerError=function(t,n,r){var i=[];if(t&&n&&n.length)for(var o=0;o<n.length;o++){var a=e.getFormatStringExpressionValue(n[o],{contextData:t}),s=e.getErrorDetailsFromPidl(a,r);if(s){i.push(s);break}}return i},this.processPimsPxError=function(t,n){var r=[];if(t)if(t.details&&t.details.length)for(var i=0;i<t.details.length;i++){var o=t.details[i];o&&r.push(o)}else{var a=e.getErrorDetailsFromPidl(t.code,n);a&&r.push(a)}return r},this.updatePidlDocUrlParamHelper=function(e,t,n){if(e&&e.parameters){if(e.parameters[t])return e.parameters[t]!==n&&(e.parameters[t]=n,!0);var r=oe[t];return r&&e.parameters[r]?e.parameters[r]!==n&&(e.parameters[r]=n,!0):(e.parameters[t]=n,!0)}return!1},this.s4=function(){return Math.floor(65536*(Math.random()+1)).toString(16).substring(1)},this.getAt=this.guid=this.parseJSON=function(e){var t={succeeded:!0,value:null};try{t.value=JSON.parse(e)}catch(n){t.value=n.message,t.succeeded=!1}return t},this.getHostName=function(e){if(e)return(e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0]).toLowerCase()},this.getBoolValue=function(e){var t=!1;qt.isString(e)?t="true"===e.toLowerCase():t=e;return t},this.getStringValue=function(e){for(var t="",n=0;n<e.length;++n)t+=e[n],t+=" ";return t.trim()},this.getModelElementType=function(t,n){var r={};switch(n.displayType){case st.page:r.type=w.page;break;case st.group:r.type=w.group;break;case st.captcha:r.type=w.captcha;break;case st.audio:r.type=w.audio;break;case st.textGroup:r.type=w.textGroup;break;case st.heading:r.type=w.heading;break;case st.subheading:r.type=w.subheading;break;case st.text:r.type=w.text;break;case st.hyperlink:r.type=w.hyperlink;break;case st.image:r.type=w.image;break;case st.logo:r.type=w.logo;break;case st.prefillControl:n.selectType===dt.checkBox?r.type=w.checkBox:n.selectType===dt.dropDown?r.type=w.dropdown:r.type=w.unknown;break;case st.property:t?_t(n)&&n.possibleOptions?r.type=e.getSelectElementType(n.selectType):"bool"===t.type?r.type=w.checkBox:At(n)?r.type=w.filePicker:r.type=w.textBox:r.error=new Tt.unexpectedError(kt.displayElementPointingToMissingDataProperty,[n.displayId,n.propertyName]);break;case st.button:r.type=w.button;break;case st.expression:r.type=w.expression;break;case st.pidlContainer:r.type=w.pidlContainer;break;case st.dataCollectionBindingGroup:r.type=w.dataCollectionBindingGroup;break;case st.iFrame:r.type=w.iFrame;break;case st.secureProperty:r.type=w.secureProperty;break;case st.separator:r.type=w.separator;break;case st.spinner:r.type=w.spinner;break;default:r.type=w.unknown}return r},this.getPidlOperationType=function(e){switch(e){case N.addAddress:case N.addPaymentInstrument:case N.addResource:case N.handleChallenge:return tt.add;case N.collectResourceInfo:return tt.renderPidlPage;case N.selectPaymentInstrument:case N.selectResource:return tt.selectInstance;case N.selectResourceType:return tt.select;case N.selectSingleResource:return tt.selectSingleInstance;case N.updateProfile:case N.updateResource:return tt.update}},this.createObjectWithNonNullProperties=function(e){var t=null;for(var n in e)qt.isNullOrUndefined(e[n])||(t||(t={}),t[n]=e[n]);return t},this.updatePidlDocUrlParams=function(t,n){var r=!1;for(var i in n){var o=zt.getKeyPropertyPidlDownloadUrlParam(n[i].propertyDescriptor,i),a=n[i].getValue(n[i].propertyDescriptor);if(o){var s=e.updatePidlDocUrlParamHelper(t,o,a);r=r||s}}return r},this.getRetryableTargettedErrors=function(e,t){if(e&&e.length)for(var n=0;n<e.length;n++){var r=e[n],i=!0;if(r.target||(i=!1),i&&t&&r.code){t[r.code]||(t[r.code]={retryCount:0});var o=r.retryPolicy;o&&o.type===pt.limitedRetry&&o.context&&!qt.isUndefined(o.context.maxRetryCount)&&r.retryPolicy.context.maxRetryCount<=t[r.code].retryCount&&(i=!1)}i?t&&r.code&&t[r.code].retryCount++:(qt.removeFromArray(e,n,1),n--)}return e},this.createParseErrorResponse=function(t,n,r,i,o){var a=[],s=void 0,l=void 0,u=void 0;if(i){var d=e.parseJSON(i.failureContent),c=d.succeeded?d.value:i.failureObject;if(u=i.failureContent,c){l=c;var p=c.innererror||c;switch(Jt.getErrorSourceFromUrl(t)){case Ye.virtualEndpoints.pifdProfile.endpoint:case Ye.virtualEndpoints.pifdAddress.endpoint:n=n||["({contextData.innererror.code})","({contextData.InnerError.ErrorCode})"];break;case Ye.virtualEndpoints.jarvisAddress.endpoint:n=n||["({contextData.error_code}.{contextData.parameters.property_name})","({contextData.error_code})"]}if(a=n?e.processServerError(c,n,r):e.processPimsPxError(p,r),a=e.getRetryableTargettedErrors(a,o),p&&p.clientAction&&(s=p.clientAction),!u)try{u=JSON.stringify(c)}catch(m){}}}else i=i||{status:I.Error};return{jsonResponse:l,clientAction:s,status:i.httpStatus,statusText:i.httpStatusText,responseText:u,errorMessage:i.errorMessage,targettedInnerErrors:a}},this.convertCustomErrorsInSdkErrors=function(t,n){for(var r=[],i=0;i<t.length;i++){var o=t[i],a=null;if(o.message?a={message:o.message,target:o.target,code:o.code}:o.code&&(a=e.getErrorDetailsFromPidl(o.code,n)),!a)return null;r.push(a)}return r},this.parseCustomSubmitError=function(t,n,r,i,o,a){return t||n&&0!==n.length?n&&0!==n.length?{jsonResponse:t,targettedInnerErrors:e.convertCustomErrorsInSdkErrors(n,o)}:e.createParseErrorResponse(r,i,o,{status:I.Error,failureContent:t},a):{clientAction:{type:it.None}}},this.parseServerError=this.createServerError=function(t,n,r,i,o){var a=e.parseServerError(n,null,o,r);return new Tt.serverError(t,n,a.jsonResponse,r.httpStatus,r.httpStatusText,r.failureContent,i)},this.createServerErrorFromIPxServiceError=function(e,t){var n=JSON.stringify(t);return new Tt.serverError(e,null,t,null,null,n,[])},this.createPropertyErrors=function(e,t,n,r,i){if(t){var o=new Tt.groupValidationFailedError(kt.propertyValidationFailed,r.code,t,[t,r.code]);o.message=r.message,i.push(o),n=null}for(var a=0;a<e.length;a++){var s=e[a],l=new Tt.propertyValidationFailedError(kt.propertyValidationFailed,r.code,s,[s,r.code]);l.message=s===n?r.message:"",i.push(l)}},this.createResponseHeadersDictionary=function(e){var t;e&&(t=e.split("\r\n").reduce((function(e,t,n){var r=t.split(": ");return r[0]&&r[1]&&(e[qt.toLowerCase(r[0])]=qt.toLowerCase(r[1])),e}),{}));return t},this.isTagPrefixKnown=function(e){for(var t in Ie)if(qt.startsWith(e,Ie[t]))return!0;return!1},this.getFormatStringExpressionValue=function(t,n,r){if(n&&qt.isFormatStringExpressionPlaceholder(t)){for(var i=t.substring(1,t.length-1),o=qt.getProperties(i,"<|","|>"),a=0;a<o.length;a++){var s=o[a],l=s.split("|"),u=l[0],d=l[1],c=void 0;if(d){var p=d.split(";");c=[];for(var m=0;m<p.length;m++)c[m]=e.getPropertyExpressionValue(p[m],n)}var f=e.getFunctionExecutionResult({functionName:u,arguments:c},n);f=qt.isNullOrUndefined(f)?"":f,i=i.replace("<|"+s+"|>",f)}var h=qt.getProperties(i,"{","}");for(a=0;a<h.length;a++){var y="{"+h[a]+"}",g=e.getPropertyExpressionValue(y,n)||"";r&&(g=r(g)),i=i.replace(y,g)}return i}return t},this.getExpressionValue=function(t,n){for(var r=t,i=qt.getProperties(t,"(",")"),o=0;o<i.length;o++){var a=qt.getProperties(i[o],"{","}")[0],s=e.getPropertyExpressionValue("{"+a+"}",n),l=void 0,u=void 0;s?(l=(r=r.replace("{"+a+"}",s)).indexOf("("),u=(r=r.substring(0,l)+r.substring(l+1,r.length)).indexOf(")"),r=r.substring(0,u)+r.substring(u+1,r.length)):(l=r.indexOf("("),u=r.indexOf(")"),r=r.substring(0,l)+r.substring(u+1,r.length))}return r},this.applyRegexTransformation=function(e,t,n){if(!qt.isNullOrUndefined(e)&&t&&n)return e.replace(RegExp(t),n).trim()},this.applyDisplayTransformation=function(t,n){var r=n;switch(t.type){case at.regex:(qt.isString(n)||qt.isNumber(n))&&(r=e.applyRegexTransformation(n.toString(),t.inputRegex,t.replacementPattern)||r);break;default:r=void 0}return r},this.getTextContent=function(t){if(-1===t.indexOf(He.link))return t;var n="",r=e.parseDisplayContent(t);if(1===r.length)return t;for(var i=0;i<r.length;i++){var o=r[i];-1===o.indexOf(He.link)?n+=o:n+=o.replace(o,o.match(/\[(.*?)\]/)[1])}return n},this.parseDisplayContent=function(e){for(var t=0,n=e.indexOf(He.link,t),r=-1,i=-1,o=[];-1!==n;){r=-1;for(var a=n;a<=n&&a>=0;a--)if("["===e[a]){r=a;break}if(-1===r)return(o=[]).push(e),o;o.push(e.substring(i,r)),i=-1;for(var s=n;s>=n&&s<e.length;s++)if(")"===e[s]){i=s+1;break}if(-1===i)return(o=[]).push(e),o;if(o.push(e.substring(r,i)),t=n+2,-1===(n=e.indexOf(He.link,t))){var l=e.substring(i,e.length);void 0!==l&&""!==l&&o.push(l)}}return o},this.convertBase64strIntoBlobUrl=function(e,t){e=e.replace("data:audio/mp3;base64,","");var n="";try{for(var r=window.atob(e),i=new ArrayBuffer(r.length),o=new Uint8Array(i),a=0;a<r.length;a++)o[a]=r.charCodeAt(a);var s=new Blob([o],{type:t});n=URL.createObjectURL(s)}catch(l){}return n},this.verifyClientSupported=function(e){var t,n=p({},e);n.parameters=p({},e.parameters);var r=n.parameters.allowedPaymentMethods;if((null===(t=null===window||void 0===window?void 0:window.paymentAgent)||void 0===t?void 0:t.clientSupported)&&(null===r||void 0===r?void 0:r.length)){var i=window.paymentAgent.clientSupported(r);n.parameters.allowedPaymentMethods=i}return n}}return e.prototype.getPropertyExpressionValue=function(e,t){if(t&&qt.isString(e)&&qt.isDataBindingPlaceholder(e)){var n=e.substring(1,e.length-1);if(n.indexOf(".")<0)return t.modelData&&(t.modelData.getDisplayPropertyValue(n)||t.modelData.getPropertyValue(n));var r=qt.getDataSourceDetails(n),i=null;switch(r.dataSourceName){case xe.contextData:i=t.contextData;break;case xe.partnerData:i=t.modelData&&t.modelData.getPartnerData();break;default:i=t.modelData&&t.modelData.getAllDataSources()}return i&&r.jpath?qt.getPropertyValueByJPath(i,r.jpath):null}return e},e.prototype.getFunctionExecutionResult=function(e,t,n){if(e&&e.functionName){var r={contextData:t&&t.contextData,partnerData:t&&t.modelData&&t.modelData.getPartnerData(),dataSources:t&&t.modelData&&t.modelData.getAllDataSources()};e.arguments&&(r.arguments=e.arguments);var i=void 0;try{i=window.pidlResourceHelpers}catch(l){}if(i&&i.executeExtensionFunc){var o=i.executeExtensionFunc(e.functionName,r);if(n&&"filterPaymentInstruments"===e.functionName&&qt.isArray(o)){var a={pidlDocInfo:r.partnerData&&r.partnerData.inputParameters&&r.partnerData.inputParameters.pidlDocInfo},s=o.map((function(e){return{id:e&&e.id,paymentMethodType:e&&e.paymentMethod&&e.paymentMethod.paymentMethodType,paymentMethodFamily:e&&e.paymentMethod&&e.paymentMethod.paymentMethodFamily}}));n.resourceHelpersFunctionExecuted(e.functionName,a,s)}return o}}return null},e}()),qt=new(function(){function e(){var e=this;this.getType=this.isArray=function(t){return t&&"[object Array]"===e.getType(t)},this.isObject=function(t){return t&&"[object Object]"===e.getType(t)},this.isFunction=this.isString=function(e){return"string"===typeof e},this.isBool=function(e){return"boolean"===typeof e},this.isNumber=function(e){return"number"===typeof e},this.isNullOrEmptyObject=function(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},this.isEmptyString=this.isWhiteSpaceString=function(t){return e.isString(t)&&0===t.trim().length},this.isNull=function(e){return!e&&null===e},this.isUndefined=this.isNullOrUndefined=this.isNullOrUndefinedOrWhiteSpaceString=this.contains=this.indexOf=this.includes=function(t,n){return!e.isNullOrUndefined(t)&&t.indexOf(n)>=0},this.keyCount=this.getFirstKey=function(t){return e.isObject(t)&&e.keyCount(t)>0&&Object.keys(t)[0]||void 0},this.serialize=function(t){if(e.isObject(t)||e.isArray(t))try{return JSON.stringify(t)}catch(n){return n&&n.message}return null===t||void 0===t?"":t},this.addSlashes=this.format=function(t,n){return e.isString(t)?((n=n||[])["{"]="{",n["}"]="}",t.replace(/{({|}|-?[0-9]+)}/g,(function(t){return e.addSlashes(e.serialize(n[t.substring(1,t.length-1)]))}))):t},this.attachAffixes=function(t,n,r){var i=e.isNullOrUndefined(t)?n:t+n;return e.isNullOrUndefined(r)?i:i+r},this.removeAffixes=function(t,n,r){if(e.isNullOrUndefined(n))return n;var i=e.isNullOrUndefined(t)?0:t.length,o=e.isNullOrUndefined(r)?n.length:n.length-r.length;return n.substring(i,o)},this.startsWithIgnoreCase=function(e,t){return!!e&&(!t||!t.length||e.slice(0,t.length).toLowerCase()===t.toLowerCase())},this.startsWith=function(e,t){return!!e&&(!t||!t.length||e.slice(0,t.length)===t)},this.endsWith=function(e,t){return!!e&&(!t||!t.length||e.slice(e.length-t.length)===t)},this.isDataBindingPlaceholder=function(t){return t&&e.isString(t)&&e.startsWith(t,"{")&&e.endsWith(t,"}")},this.isFormatStringExpressionPlaceholder=function(t){return t&&e.isString(t)&&e.startsWith(t,"(")&&e.endsWith(t,")")},this.isFunctionCallPlaceholder=function(t){return t&&e.isString(t)&&e.startsWith(t,"<|")&&e.endsWith(t,"|>")},this.getDataSourceDetails=function(e){var t=e,n=void 0,r=e.indexOf(".");return r>0&&(t=e.substr(0,r),n=e.substr(r+1)),{dataSourceName:t,jpath:n}},this.getPropertyValueByJPath=function(t,n){e.startsWith(n,"{$.")?n=n.substring(3,n.length-1):e.startsWith(n,"{")&&(n=n.substring(1,n.length-1));for(var r=(n=(n=n.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0;i<r.length;i++){var o=r[i];if(!t||!(o in t))return;t=t[o]}return t},this.getDataCollectionSource=this.getDataCollectionName=function(e){return e.split(".")[1]||e},this.toString=function(t){return!e.isUndefined(t)&&t.toString&&(t=t.toString()),t},this.toLowerCase=function(t){return e.isString(t)&&t.toLowerCase?t.toLowerCase():t},this.toUpperCase=function(t){return e.isString(t)&&t.toUpperCase?t.toUpperCase():t},this.equalsIgnoreCase=this.escapeCharactersForHtml=this.replaceCharactersForHtml=function(e){return e&&e.replace?e.replace(/(^[^A-Za-z])/,"a").replace(/([^A-Za-z0-9-_])/g,"_"):e},this.getProperties=function(e,t,n){for(var r=[],i=-1,o=t.length,a=n.length;;){var s=e.indexOf(t,-1===i?0:i+a);if(-1===s)break;if(-1===(i=e.indexOf(n,s+o)))break;r.push(e.substr(s+o,i-s-o))}return r},this.boolify=function(t){return e.isString(t)?!e.equalsIgnoreCase(t,"false")&&!e.isEmptyString(t):!!t},this.deepCopy=function(e,t){return t=t||{},e&&Gt.extend(!0,t,e)||{}},this.mergeObjectArray=function(e){var t={};if(e&&e.length)for(var n=0;n<e.length;n++)Gt.extend(t,e[n]);return t},this.removeFromArray=this.getKeys=this.getValues=this.filter=function(t,n){e.invokeIf(t,(function(e){return!(n||function(){return!0})(e)}),()},this.objectEquals=function(t,n){if(!t||!n||e.keyCount(t)!==e.keyCount(n))return!1;for(var r in t)if(t[r]!==n[r])return!1;return!0},this.bothNull=this.onlyOneNull=function(e,t){return!(e&&t)}}return e.prototype.copyArray=function(e){return e&&e.slice()||[]},e.prototype.invokeIf=function(e,t,n){if(e&&t)for(var r=e.length;r--;)t(e[r])&&n(r)},e.prototype.find=function(e,t){if(e&&t)for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]},e}()),Kt=new function(){var e=this;this.skipQueryParameter=function(e){if(!e)return!1;var t=qt.find(qt.getKeys(Ee),();return qt.boolify(t)},this.mapQueryParameter=this.buildUrlInternal=function(t,n,r){var i;if(i=qt.startsWith(t,"https://")?t:qt.startsWith(t,"http://")?"https://"+t.substr(7):"https://"+t,n)for(var o=0;o<n.length;o++)i+=qt.startsWith(n[o],"/")?n[o]:"/"+n[o];return r&&Object.keys(r).sort().forEach((function(t){if(!e.skipQueryParameter(t)){var n=r[t];n&&(i=e.addQueryParameter(i,e.mapQueryParameter(t),n))}})),i},this.createFromTemplateInternal=function(t,n,r,i,o,a){if(t){var s=Jt.replaceVirtualEndpointWithServiceAddress(t,n);return s=s.replace(/{id}/i,encodeURIComponent(i)).replace(/{resourcetype}/i,o),r&&(s=s.replace(/{userid}/i,r.getUserId(t))),e.buildUrlInternal(s,[],a)}},this.getUrlExpressionValue=function(t,n,r,i,o){var a=e.createFromTemplateInternal(t,n,r,i,null,null);return a&&o&&(a=Gt.getFormatStringExpressionValue("("+a+")",o,(function(e){return encodeURIComponent(e)}))),a},this.getResourceUrl=function(t,n){t=t||{};var r=Jt.getResourceEndpoint(t.resourceType);return{url:e.createFromTemplateInternal(r.template,t.resourceEndpoint,n,t.id,t.resourceType,t.parameters),template:r.template,recreateUrl:originalParameters:{resourceInfo:t,userContext:n},virtualEndpoint:r}},this.getPidlDocUrl=function(t,n,r){r=r||{};var i=qt.deepCopy(r.parameters||{});n&&(i[Z.operation]=n);var o=Jt.getPidlDocEndpoint(r.resourceType);o.addResourceNameToQueryParam&&(i.resourceName=qt.toLowerCase(r.resourceType)),o.removeOperationParameter&&delete i[Z.operation];var a=r.resourceType+(r.resourceSuffix||o.suffix),s=r.anonymousPidl&&o.anonymousTemplate?o.anonymousTemplate:o.template;return{url:e.createFromTemplateInternal(s,r.pidlEndpoint,t,null,a,i),template:s,recreateUrl:originalParameters:{userContext:t,operationType:n,pidlDocInfo:r},virtualEndpoint:o}},this.getSubmitUrl=function(t,n,r,i,o){return{url:e.getUrlExpressionValue(r.href,null,n,i,o),template:r.href,recreateUrl:originalParameters:{operationType:t,userContext:n,context:r,id:i,bindingDataContext:o},virtualEndpoint:Jt.findVirtualEndpointInTemplate(r.href)}},this.getRestMethodUrl=function(t,n,r,i){return{url:e.getUrlExpressionValue(t,null,n,r,i),template:t,recreateUrl:originalParameters:{template:t,userContext:n,id:r,bindingDataContext:i},virtualEndpoint:Jt.findVirtualEndpointInTemplate(t)}},this.addQueryParameter=function(e,t,n){qt.isString(n)||(n=JSON.stringify(n)),n=encodeURIComponent(n);var r=new RegExp("([?&])"+t+"=.*?(&|$)","i");if(e.match(r))return e.replace(r,"$1"+t+"="+n+"$2");var i=new RegExp("([?])");if(e.match(i))return e.replace(i,"$1"+t+"="+n+"&");var o=-1!==e.indexOf("?")?"&":"?";return e+o+t+"="+n},this.addQueryStringParameters=function(t,n){if(n)for(var r in n)n[r]&&(t=e.addQueryParameter(t,r,n[r]));return t},this.buildUrl=this.createFromTemplate=,Jt=new function(){var e=this;this.getContainingVirtualEndpoint=function(e){if(qt.isString(e)){var t=e.toLowerCase();for(var n in Ye.virtualEndpoints){var r="{"+Ye.virtualEndpoints[n].endpoint+"}";if(-1!==t.indexOf(r))return Ye.virtualEndpoints[n]}}},this.getPidlDocInfoFromResource=function(e,t){var n=qt.toLowerCase(e.resourceType),r=Ye.resourceTypeToPidlDoc[n]||Ye.resourceTypeToPidlDoc.default;return{resourceType:n,parameters:r.getParams&&r.getParams(e,t),anonymousPidl:e.anonymousPidl}},this.updatePidlDocInfo=function(e){if(e&&e.parameters&&e.parameters.allowedPaymentMethods&&qt.isArray(e.parameters.allowedPaymentMethods)){for(var t=!0,n=0,r=e.parameters.allowedPaymentMethods.length;n<r;n++)t=t&&qt.isObject(e.parameters.allowedPaymentMethods[n]);if(t){var i=e.parameters.allowedPaymentMethods;e.parameters.allowedPaymentMethods={};for(var o=0,a=i.length;o<a;o++){var s=i[o],l=s.family;l+=s.type?ke.paymentMethodName+s.type:"",e.parameters.allowedPaymentMethods[l]=s.disabled?0:1}}}},this.additionalRedirectParams=function(e,t){var n={};for(var r in t&&(t.paymentMethod&&(n.family=t.paymentMethod.paymentMethodFamily,n.type=t.paymentMethod.paymentMethodType),qt.equalsIgnoreCase(t.status,ot.Pending)&&t.details&&(n.pendingOn=t.details.pendingOn,n.picvRequired=t.details.picvRequired)),n)n[r]&&(e=Kt.addQueryParameter(e,r,n[r]));return e},this.getErrorSourceFromUrl=function(e){if(e=qt.toLowerCase(e))if(-1!==e.indexOf(Ye.getServiceEndpoint(Ye.virtualEndpoints.pifd.endpoint))){if(-1!==e.indexOf("/users")&&-1!==e.indexOf("/addresses"))return Ye.virtualEndpoints.pifdAddress.endpoint;if(-1!==e.indexOf("/users")&&-1!==e.indexOf("/profiles"))return Ye.virtualEndpoints.pifdProfile.endpoint}else if(-1!==e.indexOf(Ye.getServiceEndpoint(Ye.virtualEndpoints.jarvis.endpoint)))return Ye.virtualEndpoints.jarvisAddress.endpoint;return Ye.virtualEndpoints.pifd.endpoint},this.getResourceEndpoint=function(e){return Ye.resourceTypeToResource[qt.toLowerCase(e)]||Ye.resourceTypeToResource.default},this.getPidlDocEndpoint=function(e){return Ye.resourceTypeToPidlDoc[qt.toLowerCase(e)]||Ye.resourceTypeToPidlDoc.default},this.replaceVirtualEndpointWithServiceAddress=function(t,n){var r=e.getContainingVirtualEndpoint(t);if(!r)return t;var i="{"+r.endpoint+"}",o=new RegExp(i,"i");return t=t.replace(o,n||Ye.getServiceEndpoint(r.endpoint))},this.findVirtualEndpointInTemplate=function(t){return e.getContainingVirtualEndpoint(t)||{description:null,endpoint:null,name:null,operation:null}}},Qt=function(){function e(e){this.alwaysValidateOnChange=!1,this.busyBlockShowHideHandler=null,this.containerId=null,this.disableEnterKeyAction=!1,this.disableFocusOnLoad=!1,this.errorPrefix=C.error,this.htmlExtender=null,this.hidePropertyErrors=!1,this.showLogoInKeyField=null,this.showMandatoryIdentifier={show:!1,identifier:"*"},this.showPlaceholderInTextbox=!1,this.ieExtender=null,this.propagateCallbackException=!1,this.getAffixedPropertyElementId=null,this.getTrimmedPropertyElementId=null,this.getAffixedDisplayElementId=null,this.getTrimmedDisplayElementId=null,this.busyBlock={id:C.div+T.pageBusyBlock,preExists:!1,show:!0},this.errorBlock={id:T.pageErrorBlock,preExists:!1,show:!0},this.helpDialogBlock={id:T.helpDialogBlock,preExists:!1,show:!0},this.logoBlock={id:T.pageLogoBlock,preExists:!1,show:!0,displayConfiguration:function(e,t){var n=e&&e.length>0&&e[0],r=!t&&n&&e[0].displayHelpName&&e.length>13;return{totalToShow:r?13:e.length,dialogButtonText:r?e[0].displayHelpName:null}}},this.pageBodyBlock={id:T.pageBlock,preExists:!1,show:!0},this.submitButtonBlock={id:T.pageSubmitBlock,preExists:!1,show:!0},this.modalDialogBlock={id:T.modalDialogBlock,preExists:!1,show:!0},this.prefillCheckboxBlock={id:T.prefillCheckbox,preExists:!1,show:!0};var t="pidlInput_",n="",r="",i="";for(var o in e)switch(o){case V.containerId:this.containerId=e[o];break;case V.busyBlockId:this.setBlockId(this.busyBlock,e[o]);break;case V.busyBlockShowHideHandler:this.busyBlockShowHideHandler=e[o],this.busyBlock.preExists=!0;break;case V.inputPropertyIdPrefix:t=e[o]||t;break;case V.inputPropertyIdSuffix:n=e[o]||n;break;case V.displayElementIdPrefix:r=e[o]||r;break;case V.displayElementIdSuffix:i=e[o]||i;break;case V.inputPropertyErrorIdPrefix:this.errorPrefix=e[o];break;case V.showPlaceholderInTextbox:this.showPlaceholderInTextbox=Gt.getBoolValue(e[o]);break;case V.disableEnterKeyAction:this.disableEnterKeyAction=Gt.getBoolValue(e[o]);break;case V.showSubmitBlock:this.setShowBlock(this.submitButtonBlock,e[o]);break;case V.showErrorBlock:this.setShowBlock(this.errorBlock,e[o]);break;case V.hidePropertyErrors:this.hidePropertyErrors=Gt.getBoolValue(e[o]);break;case V.htmlExtender:this.htmlExtender=e[o];break;case V.disableFocusOnLoad:this.disableFocusOnLoad=Gt.getBoolValue(e[o]);break;case V.alwaysValidateOnChange:this.alwaysValidateOnChange=Gt.getBoolValue(e[o]);break;case V.ieExtender:this.ieExtender=e[o];break;case V.propagateCallbackException:this.propagateCallbackException=Gt.getBoolValue(e[o])}this.getAffixedPropertyElementId=this.getAffixesAttacher(t,n),this.getTrimmedPropertyElementId=this.getAffixesRemover(t,n),this.getAffixedDisplayElementId=this.getAffixesAttacher(r,i),this.getTrimmedDisplayElementId=this.getAffixesRemover(r,i)}return e.prototype.setBlockId=e.prototype.setShowBlock=e.prototype.getAffixesAttacher=function(e,t){return function(n){return qt.attachAffixes(e,n,t)}},e.prototype.getAffixesRemover=e}(),Zt=function(){},Xt=function $t(e){return Promise.resolve(e)}ar en,tn,nn=Object.freeze({__proto__:null,doNothing:Zt,throwException:Xt,createFakePromise:$t,createFakeRejectedPromise:Yt}),rn=function(e,t){var n=this;this.returnUrls={},this.returnCallbacks={},this.publicEventHandlers=[],this.privateEventHandlers=[],this.eventParameterExtenders={},this.telemetryContext=null,this.telemetryLogger=null,this.invokeReturnCallback=function(e,t){e(t=n.extendEventParameters(t))},this.invokePublicEvent=function(e,t,r,i){return t&&n.logMessage(e,t),n.invokeEventHandlers(n.publicEventHandlers,e,r,i)},this.invokePrivateEvent=function(e,t,r,i){return t&&(n.telemetryContext&&n.telemetryContext.enablePrivateEventConsoleLogging||!n.telemetryContext)&&n.logMessage(e,t),n.invokeEventHandlers(n.privateEventHandlers,e,r,i)},this.isEventConsoleLoggingEnabled=function(e){var t=(n.telemetryContext||{}).telemetryOverrides,r=void 0===t?null:t;return(n.telemetryContext&&n.telemetryContext.enableConsoleLogging||!n.telemetryContext)&&!(r&&r[e]&&r[e].disableConsoleLogging)},this.logMessage=function(e,t){if(n.isEventConsoleLoggingEnabled(e)){var r=Wt.getLoggingService();r&&r.logMessage(n.addExtendedParametersToLogMessage(t))}},this.logError=function(e,t,r){if(n.isEventConsoleLoggingEnabled(e)){var i=Wt.getLoggingService();i&&i.logError(t,r)}},this.getExtendedEventParameter=this.extendEventParameters=function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);for(var i in n.eventParameterExtenders)n.eventParameterExtenders.hasOwnProperty(i)&&!t.hasOwnProperty(i)&&(t[i]=n.getExtendedEventParameter(i));return t=Gt.createObjectWithNonNullProperties(t)},this.addExtendedParametersToUrl=function(e){for(var t in n.eventParameterExtenders)n.eventParameterExtenders.hasOwnProperty(t)&&(e=Kt.addQueryParameter(e,t,n.getExtendedEventParameter(t)));return e},this.addExtendedParametersToLogMessage=function(e){for(var t in n.eventParameterExtenders)n.eventParameterExtenders.hasOwnProperty(t)&&(e+=", ".concat(t,"=").concat(n.getExtendedEventParameter(t)));return e},this.redirectUrl=this.isEventTelemetryEnabled=function(e){var t=(n.telemetryContext||{}).telemetryOverrides,r=void 0===t?null:t;return!(r&&r[e]&&r[e].disableLogging)},this.logTelemetryEvent=function(e,t){if(n.telemetryLogger&&n.telemetryContext&&n.telemetryContext.enableLogging){if((e===M.propertyValidated||e===M.error)&&t&&t.controlOperationType===de.editing)return;n.isEventTelemetryEnabled(e)&&n.telemetryLogger.logEvent(e,t,n.telemetryContext)}},this.getCorrelationId=this.getHttpRequestCorrelationHeader=this.getCorrelationContextHeaderValue=function(){var e,t,r,i,o,a,s,l=null===(e=n.telemetryContext)||void 0===e?void 0:e.partnerContext,u=l.partnerName,d=l.scenarioId,c=l.sessionId;return!u&&(null===(r=null===(t=n.telemetryContext)||void 0===t?void 0:t.telemetryResource)||void 0===r?void 0:r.parameters.hasOwnProperty("partner"))&&(u=n.telemetryContext.telemetryResource.parameters.partner),c||(c=null===(i=n.telemetryContext)||void 0===i?void 0:i.sessionId),d||(d="commerce.payments.".concat(null===(a=null===(o=n.telemetryContext)||void 0===o?void 0:o.telemetryResource)||void 0===a?void 0:a.resourceType).concat(null===(s=n.telemetryContext)||void 0===s?void 0:s.operationType,".1")),"v=1,ms.b.tel.scenario=".concat(d,",ms.b.tel.partner=").concat(u,",ms.c.cfs.payments.partnerSessionId=").concat(c)},this.getPidlSdkVersionHeaderValue=function(){var e,t;return"".concat(null===(e=n.telemetryContext)||void 0===e?void 0:e.sdkVersion,"_").concat(null===(t=n.telemetryContext)||void 0===t?void 0:t.sdkViewType)},this.updateTelemetryContext=function(e){n.telemetryContext&&e&&n.telemetryContext.updateResourceInfo({resourceType:void 0,parameters:e})},this.invokeEventHandlers=function(e,t,r,i){n.logTelemetryEvent(t,n.extendEventParameters(i));var o=n.extendEventParameters(r),a=!1;if(e)return e.forEach((),a},this.addReturnOptions=function(e){n.returnUrls=e.urls?p({},e.urls):{},n.returnCallbacks=e.callbacks?p({},e.callbacks):{}},this.addPublicEventHandler=function(e){n.publicEventHandlers.push(e)},this.addPrivateEventHandler=this.registerEventExtender=function(e,t){n.eventParameterExtenders.hasOwnProperty(e)?n.logMessage(B.eventExtenderRegistered,"There is an existing event parameter extender for name ".concat(e)):n.eventParameterExtenders[e]=t},this.failure=function(e){e.cv=n.getCorrelationId(),n.invokePrivateEvent(B.failure,null,{error:e},{error:e}),n.logError(B.failure,"failure",e);var t=n.returnCallbacks[x.failure];if(t)n.invokeReturnCallback(t,{error:e,cv:n.getCorrelationId()});else{var r=n.returnUrls.failure;if(!r)throw e;var i=r;e&&(i=Kt.addQueryParameter(i,"errormessage",e.message)),n.redirectUrl(n.addExtendedParametersToUrl(i))}},this.success=function(e){(e=e||{}).cv=n.getCorrelationId(),n.logMessage(B.success,"Successfully completed operation: ".concat(e.operationType,". Id: ").concat(e.id)),n.invokePrivateEvent(B.success,null,{operationId:e.id,operationType:e.operationType},{operationId:e.id,operationType:e.operationType});var t=n.returnCallbacks[x.success];if(t)n.invokeReturnCallback(t,e);else{var r=n.returnUrls.success;if(r){var i=r;e.id&&(i=Kt.addQueryParameter(i,"id",e.id)),n.redirectUrl(n.addExtendedParametersToUrl(i))}}},this.gohome=function(){n.logMessage(B.gohome,"Going to call go-home"),n.invokePrivateEvent(B.gohome);var e=n.returnCallbacks[x.gohome];e?n.invokeReturnCallback(e,{cv:n.getCorrelationId()}):n.returnUrls.gohome&&n.redirectUrl(n.addExtendedParametersToUrl(n.returnUrls.gohome))},this.notifyNoSelectionOptionsFound=function(e,t,r,i){n.invokePublicEvent(M.noSelectionOptionsFound,"No Data found in element id: ".concat(e," of type: ").concat(i," and of displayId: ").concat(t),{id:e,displayId:t,pidlIdentity:r,propertyType:i},{id:e,displayId:t,pidlIdentity:r,propertyType:i})},this.selectionChanged=function(e,t,r){n.invokePublicEvent(M.selectionChanged,"selection changed for ".concat(e," and display id ").concat(t),{propertyName:e,displayId:t,propertyValue:r},{propertyName:e,displayId:t})},this.error=function(e,t){n.logError(M.error,"error",e),e.cv=n.getCorrelationId(),n.invokePublicEvent(M.error,null,{error:e},{error:e,controlOperationType:t})},this.apiCalled=function(e,t,r){n.invokePrivateEvent(B.apiCalled,"API called. name: ".concat(e),{name:e},{name:e,parametersPassed:t,sanitizedParameters:r})},this.apiReturned=function(e,t,r){r||(r=$t()),n.invokePrivateEvent(B.apiReturned,"API returned. name: ".concat(e),{name:e,succeeded:t,promise:r},{name:e,succeeded:qt.boolify(t)})},this.secureFieldEventReceived=function(e,t,r){n.invokePrivateEvent(B.secureFieldEventReceived,"secureField event received",{fieldName:e,event:t,correlationId:r},{fieldName:e,event:t,correlationId:r})},this.secureFieldEventQueued=function(e,t,r){n.invokePrivateEvent(B.secureFieldEventQueued,"secureField event queued",{fieldName:e,event:t,correlationId:r},{fieldName:e,event:t,correlationId:r})},this.secureFieldEventPosted=function(e,t,r){n.invokePrivateEvent(B.secureFieldEventPosted,"secureField event posted",{fieldName:e,event:t,correlationId:r},{fieldName:e,event:t,correlationId:r})},this.postMessageReceived=function(e,t,r){n.invokePrivateEvent(B.postMessageReceived,"postMessage received",{origin:e,expectedOrigin:t,dataLength:r},{origin:e,expectedOrigin:t,dataLength:r})},this.postMessageHandleSuccess=function(e){n.invokePrivateEvent(B.postMessageHandleSuccess,"postMessage handle success",{actionType:e},{actionType:e})},this.postMessageHandleFailure=function(e){n.invokePrivateEvent(B.postMessageHandleFailure,"postMessage handle failed",{failureDetails:e},{failureDetails:e})},this.postMessageTimeoutHandleSuccess=function(e){n.invokePrivateEvent(B.postMessageTimeoutHandleSuccess,"postMessageTimeout handle success",{actionType:e},{actionType:e})},this.postMessageTimeoutHandleFailure=function(e){n.invokePrivateEvent(B.postMessageTimeoutHandleFailure,"postMessageTimeout handle failed",{failureDetails:e},{failureDetails:e})},this.postMessageBusyTimerStarted=function(e){n.invokePrivateEvent(B.postMessageBusyTimerStarted,"postMessage busy timer started",{details:e},{details:e})},this.postMessageBusyTimerEnded=function(e){n.invokePrivateEvent(B.postMessageBusyTimerEnded,"postMessage busy timer ended",{details:e},{details:e})},this.resourceHelpersFunctionExecuted=function(e,t,r){n.invokePrivateEvent(B.resourceHelpersFunctionExecuted,"Executed Resource Helper Function ".concat(e),{functionName:e,inputParams:t,outputValue:r},{functionName:e,inputParams:t,outputValue:r})},this.fetchCallCompleted=function(e){n.invokePublicEvent(M.fetchCallCompleted,"Fetch call completed",{httpRequestTelemetryData:e},{httpRequestTelemetryData:e})},this.propertySelected=function(e,t,r){n.invokePublicEvent(M.propertySelected,"Input selected. id: ".concat(e),{id:e,propertyName:t,divId:r},{id:e,propertyName:t})},this.propertyValidated=function(e,t){n.invokePublicEvent(M.propertyValidated,"Property validation succeeded for property ".concat(e),{propertyName:e,controlOperationType:t},{propertyName:e,controlOperationType:t})},this.resourceSelected=function(e,t){n.invokePublicEvent(M.resourceSelected,"Resource selected ".concat(e),{resourceName:e,value:t},{resourceName:e,id:t&&t.id})},this.instanceDownloading=function(e){n.invokePublicEvent(M.instanceDownloading,"Downloading instance from url: ".concat(e),{url:e},{url:e})},this.instanceDownloaded=function(){n.invokePublicEvent(M.instanceDownloaded,"Downloaded instance")},this.pidlDownloading=function(e){n.invokePublicEvent(M.pidlDownloading,"Downloading PIDL document from url: ".concat(e),{url:e},{url:e})},this.pidlDownloaded=function(){n.invokePublicEvent(M.pidlDownloaded,"PIDL document successfully downloaded")},this.pageRendering=function(e){n.invokePublicEvent(M.pageRendering,"PIDL document rendering begins",{successPayload:e},{})},this.pageRendered=function(e,t,r,i,o,a,s){n.invokePublicEvent(M.pageRendered,"PIDL document rendered",{prevPageIndex:e,prevPageId:t,prevPageName:r,currentPageIndex:i,currentPageId:o,currentPageName:a,currentPageDescription:s},{prevPageIndex:e,prevPageId:t,prevPageName:r,currentPageIndex:i,currentPageId:o,currentPageName:a})},this.pageRefreshed=function(){n.invokePublicEvent(M.pageRefreshed,"PIDL document refreshed")},this.inputReading=function(){n.invokePublicEvent(M.inputReading,"Reading user input data")},this.inputRead=function(){n.invokePublicEvent(M.inputRead,"Read user input data")},this.inputValidating=function(){n.invokePublicEvent(M.inputValidating,"Validating user input data")},this.inputValidated=function(){n.invokePublicEvent(M.inputValidated,"Validated user input data")},this.inputTokenizing=function(){n.invokePublicEvent(M.inputTokenizing,"Tokenizing user input data")},this.inputTokenized=function(){n.invokePublicEvent(M.inputTokenized,"Tokenized user input data")},this.submitting=function(){n.invokePrivateEvent(B.submitting)},this.submitted=function(){n.invokePrivateEvent(B.submitted)},this.implementationMissing=function(e,t,r){n.invokePublicEvent(M.implementationMissing,"Implentation of ".concat(null!==t&&void 0!==t?t:"undefined"," missing in ").concat(e),r)},this.inputSubmitting=function(e){n.invokePublicEvent(M.inputSubmitting,"Submitting PIDL document: ".concat(e),{url:e},{url:e})},this.inputSubmitted=function(e){n.invokePublicEvent(M.inputSubmitted,"PIDL document submitted. Next action: ".concat(e),{clientAction:e},{clientAction:e})},this.propertyTokenizing=function(e,t){n.invokePublicEvent(M.propertyTokenizing,"Tokenizing property: ".concat(e),{propertyName:e,url:t},{propertyName:e,url:t})},this.propertyTokenized=function(e){n.invokePublicEvent(M.propertyTokenized,"Tokenized property: ".concat(e),{propertyName:e},{propertyName:e})},this.propertyTransforming=function(e){n.invokePublicEvent(M.propertyTransforming,"Transforming property: ".concat(e),{propertyName:e},{propertyName:e})},this.propertyTransformed=function(e){n.invokePublicEvent(M.propertyTransformed,"Transformed property: ".concat(e),{propertyName:e},{propertyName:e})},this.fileUploading=function(e,t){n.invokePublicEvent(M.fileUploading,"File uploading property: ".concat(e),{propertyName:e,url:t},{propertyName:e,url:t})},this.fileUploaded=function(e){n.invokePublicEvent(M.fileUploaded,"File uploaded property: ".concat(e),{propertyName:e},{propertyName:e})},this.redirecting=function(e){n.invokePublicEvent(M.redirecting,"Redirecting to url: ".concat(e),{url:e},{url:e})},this.navigate=function(e,t,r,i,o,a){var s=r?"Redirect":"Navigate";return n.invokePublicEvent(M.navigate,"".concat(s," to url: ").concat(t),{displayId:e,dest:o||e,url:t,piRedirection:r,context:i,destinationId:a},{displayId:e,dest:o||e,url:t,piRedirection:r,destinationId:a})},this.triggerEvent=function(e,t){return n.invokePublicEvent(M.triggerEvent,"Event triggered: ".concat(e),{eventName:e,params:t},{eventName:e,params:t})},this.partnerAction=function(e,t){return n.invokePublicEvent(M.partnerAction,"Invoke partner action on Id: ".concat(e),{displayId:e,context:t},{displayId:e})},this.pageNavigated=function(e,t,r,i,o,a,s){n.invokePublicEvent(M.pageNavigated,"Navigating from page: ".concat(e," to: ").concat(i),{prevPageIndex:e,prevPageId:t,prevPageName:r,currentPageIndex:i,currentPageId:o,currentPageName:a,currentPageDescription:s},{prevPageIndex:e,prevPageId:t,prevPageName:r,currentPageIndex:i,currentPageId:o,currentPageName:a})},this.click=function(e){n.invokePublicEvent(M.click,"Click display control for button with id ".concat(e),{id:e},{id:e})},this.captchaRendered=function(e){n.invokePublicEvent(M.captchaRendered,"Captcha is rendered with id ".concat(e),{id:e},{id:e})},this.propertyCreating=function(e,t,r){n.invokePublicEvent(M.propertyCreating,"Creating control with id ".concat(e),{id:e,displayDescription:t,htmlAttributes:r},{id:e})},this.payloadCreated=function(e){n.invokePublicEvent(M.payloadCreated,"Pidl payload created",{value:e},{})},this.restMethodInvoking=function(e,t){n.invokePublicEvent(M.restMethodInvoking,"invoking rest method with requestUrl: ".concat(e," operationType: ").concat(t),{requestUrl:e,operationType:t},{requestUrl:e,operationType:t})},this.restMethodInvoked=function(e){n.invokePublicEvent(M.restMethodInvoked,"rest method invoked, request url: ".concat(e),{requestUrl:e},{requestUrl:e})},this.pidlResolved=function(e,t){var r=[];t&&(r=t.map(());var i=qt.serialize(r);n.invokePrivateEvent(B.pidlResolved,"PIDL document resolved successfully for context: ".concat(e,". Pidl Identities ").concat(i),{context:e,resolvedPidlIdentity:i},{})},this.propertyUnselected=function(e,t,r){n.invokePrivateEvent(B.propertyUnselected,null,{id:e,propertyName:t,divId:r},{id:e,propertyName:t})},this.propertyCreated=function(e,t,r){n.invokePrivateEvent(B.propertyCreated,null,{propertyName:e,controlId:t,divId:r},{propertyName:e,controlId:t})},this.pollingStarted=function(e){n.invokePrivateEvent(B.pollingStarted,null,{id:e},{id:e})},this.pollingEnded=function(e){n.invokePrivateEvent(B.pollingEnded,null,{id:e},{id:e})},this.updatePollAndMoveLast=this.modelUpdated=function(e){n.invokePrivateEvent(B.modelUpdated,null,{created:e},{created:e})},this.dataUpdated=function(){n.invokePrivateEvent(B.dataUpdated)},this.conflictingInputValues=function(e){n.invokePrivateEvent(B.conflictingInputValues,null,{propertyName:e},{propertyName:e})},this.stateChanged=function(e,t){n.invokePrivateEvent(B.stateChanged,null,{oldState:e,newState:t},{oldState:e,newState:t})},this.testHookGetInternalState=this.pollClientActionSuccess=function(e){n.invokePrivateEvent(B.pollClientActionSuccess,"handle client action succeeded during polling",{actionType:e},{actionType:e})},this.pollClientActionFailure=function(e){n.invokePrivateEvent(B.pollClientActionFailure,"handle client action failed during polling",{failureDetails:e},{failureDetails:e})},this.hideModalDialog=this.pidlActionInvoked=function(e,t){n.invokePrivateEvent(B.pidlActionInvoked,"PidlAction ".concat(e," invoked"),{actionName:e,actionContext:t},{actionName:e,actionContext:t})},this.clientActionInvoked=function(e,t){n.invokePrivateEvent(B.clientActionInvoked,"ClientAction ".concat(e," invoked"),{actionName:e,actionContext:t},{actionName:e,actionContext:t})},this.propertyValueSelected=function(e,t){n.invokePrivateEvent(B.propertyValueSelected,"Property ".concat(e," has the selected value ").concat(t),{propertyName:e,propertyValue:t},{propertyName:e,propertyValue:t})},this.renderedPidlPage=function(){n.invokePublicEvent(M.renderedPidlPage,"Rendered PidlPage")},this.closePidlPage=this.telemetryContext=t,this.telemetryLogger=e};!en||(en={})),tn||(tn={}));var on=function(e,t,n,r,i,o,a,s,l){void 0===l&&(l=!1);var u=this;if(this.dataType="json",this.contentType="application/json",this.operationVersion="",this.getRequest=function(){var e={method:u.type,headers:new Headers(u.headers),mode:"cors",credentials:u.includeCredentials?"include":"omit"};return u.payload&&(e.body=u.payload),new Request(u.url,e)},this.url=e,this.type=t,this.headers=n,this.payload=r,this.retryCount=i?0:-1,this.retryOnServerError=i,this.currentOperationName=o||"pidlsdkOperation",this.operationName=a||"DependentOperationName",this.serviceName=s||"PidlSdkDependentService",this.includeCredentials=l,this.serverErrorCount=0,n&&qt.isObject(n)){var d=n,c=J.msRetryOnServerErr,p=d[c],f=m(d,["symbol"===typeof c?c:c+""]);this.retryOnServerError="false"!==p,this.headers=f}},an=function(e){function t(t,n,r,i,o){var a=e.call(this,"Failed to fetch")||this;return a.status=t,a.statusText=n,a.failureContent=r,a.hasResponseFromServer=i,a.canRetryOnServerError=o,a}return c(t,e),t}(Error),sn=1e3,ln=new(function(){function e(){var e=this;this.FetchOptions=on,this.getHttpTelemetryData=function(t,n){var r=t.url,i=t.type,o=t.contentType,a=t.currentOperationName,s=t.operationName,l=t.operationVersion,u=t.serviceName,d=t.retryCount,c=n.isSuccess,p=n.statusCode,m=n.headers,f=n.failureResponseText,h=n.timeTaken,y=n.serviceErrorCode,g=n.statusText,v=p?p.toString():"0",P=c||"200"===v?"":f||g,b=0;try{b=parseInt(n.headers.get("Content-Length"),10)}catch(I){}return{targetUri:r,requestMethod:i,responseContentType:o,operationName:a,dependencyOperationName:s,dependencyOperationVersion:l,serviceName:u,retryCount:d,succeeded:c,protocolStatusCode:v,failureResponse:P,contentLength:isNaN(b)?0:b,latencyMs:h,serviceErrorCode:y,headers:e.getDesiredResponseHeaders(m)}},this.getDesiredResponseHeaders=function(e){var t={};if(e&&e.forEach){var n=Ye.telemetryHeaders.names,r=Ye.telemetryHeaders.prefixes;e.forEach((function(e,i){n.indexOf(i)>-1?t[i]=e:r.forEach((function(n){qt.startsWithIgnoreCase(i,n)&&(t[i]=e)}))}))}return t},this.isFetchFailureError=this.addCVHeader=function(e,t){var n=e.getHttpRequestCorrelationHeader()||{name:void 0,value:void 0},r=n.name,i=n.value;r&&i&&(t[r]=i)},this.updateFetchOptions=function(t,n){n&&n.headers&&e.addCVHeader(t,n.headers)},this.handleFetchFailure=function(t,n,r){var i,o,a,s,l;if(e.isFetchFailureError(t))i=t.status,o=t.statusText,a=t.failureContent,s=t.hasResponseFromServer,r=r&&t.canRetryOnServerError;else if(t){var u=t;i=u.status,o=u.statusText,a=u.failureContent||t.message||qt.serialize(u)}var d=!1,c=!1,p=!1;s?(500!==i&&502!==i&&503!==i&&504!==i||(c=!0,d=r),l="HTTP Error |".concat(i,"|").concat(o,"|: |").concat(a,"|")):(l="|NetworkError|Status: ".concat(i,", StatusText: ").concat(o,", FailureContent: ").concat(a,"| Uncaught Error. |").concat(a,"|"),p=!0,d=!0);var m=Gt.parseJSON(a);return{failureMessage:{status:I.Error,errorMessage:l,httpStatus:i,httpStatusText:o,failureContent:a,failureObject:m&&m.succeeded?m.value:void 0,connectivityError:p},retryable:d,serverError:c}},this.fetchWrapper=this.xhrWrapper=function(t,n,r){return new Promise((function(i,o){var a=t.type,s=t.url,l=t.headers,u=t.payload,d=t.includeCredentials,c=new XMLHttpRequest;c.open(a,s),a===Pe.Get?c.timeout=12e3:c.timeout=42e3,l&&qt.getKeys(l).forEach((),d&&(c.withCredentials=d);var p=function(){var e=c.getAllResponseHeaders(),t={};qt.isEmptyString(e)||e.trim().split(/[\r\n]+/).forEach(();return t},m=function(){var e=void 0;return""!==c.responseType&&"text"!==c.responseType||(e=c.responseText),e};c.onload=function(){i(new Response(m(),{status:c.status,headers:new Headers(p()),statusText:c.statusText}))},c.onerror=function(){var i={isSuccess:!1,timeTaken:Date.now()-r,statusCode:c.status,headers:new Headers(p())};n&&n.fetchCallCompleted(e.getHttpTelemetryData(t,i));var a=m();o(new an(c.status,c.statusText,a,qt.boolify(a),!0))},c.ontimeout=function(){var i={isSuccess:!1,timeTaken:Date.now()-r,statusCode:c.status,headers:new Headers};n&&n.fetchCallCompleted(e.getHttpTelemetryData(t,i)),o(new an(c.status,c.statusText,void 0,!1,!0))},a===Pe.Post&&u?(c.setRequestHeader("Content-Type","application/json"),c.send(u)):c.send()}))},this.loadScript=function(e){return new Promise((function(t,n){try{if(document&&(document.head||document.body)){var r=document.createElement("script");r.onload=function(){t()},r.onerror=r.async=!0,r.src=e,(document.head||document.body).appendChild(r)}else n()}catch(i){n(i)}}))},this.getHttpHeaders=function(t,n,r,i,o){var a=e.getDefaultHttpHeaders(t);for(var s in n&&(a=n.getHeaders(a,i)),r&&(Gt.extend(!0,a,r),a.hasOwnProperty(J.msCorrelationId)&&qt.isNullOrUndefinedOrWhiteSpaceString(a[J.msCorrelationId])&&(a[J.msCorrelationId]=Gt.guid()),a.hasOwnProperty(J.msTrackingId)&&qt.isNullOrUndefinedOrWhiteSpaceString(a[J.msTrackingId])&&(a[J.msTrackingId]=Gt.guid())),i&&(i.indexOf("{pidl")>-1||i.indexOf("{pifd")>-1||i.indexOf("{resource-endpoint}")>-1)&&(a.hasOwnProperty(J.correlationContext)||(a[J.correlationContext]=null===t||void 0===t?void 0:t.getCorrelationContextHeaderValue()),a[J.msPidlsdkVersion]=null===t||void 0===t?void 0:t.getPidlSdkVersionHeaderValue()),a)a[s]=Gt.getFormatStringExpressionValue(a[s],o);return a},this.getDefaultHttpHeaders=function(t){var n,r=((n={})[J.contentType]="application/json",n);return e.addCVHeader(t,r),r},this.getPayeeFileUploadHttpHeaders=function(e,t){var n={};return t&&(n[J.authorization]=t),n},this.testHookSetRetryTimeout=this.testHookHandleFetchFailure=function(t,n,r){return void 0===n&&(n=Pe.Post),void 0===r&&(r=!1),e.handleFetchFailure(t,n,r)}}return e.prototype.successHandler=function(e,t,n,r,i){var o=this;return function(a){var s={isSuccess:a.ok,timeTaken:Date.now()-n,statusCode:a.status,headers:a.headers};if(s.isSuccess)try{e.fetchCallCompleted(o.getHttpTelemetryData(t,s))}catch(l){}return a.text().then((function(n){var u=Gt.parseJSON(n),d=!1;if(!s.isSuccess){s=p(p({},s),{statusText:a.statusText,serviceErrorCode:(u.value||{}).code,failureResponseText:n});try{e.fetchCallCompleted(o.getHttpTelemetryData(t,s))}catch(l){}d=t.serverErrorCount<2;try{var c=s.headers.get(J.msRetryOnServerErr);d="true"===c||"false"!==c&&d}catch(f){}}if(!a.ok||!qt.isEmptyString(n)&&!u.succeeded)throw new an(a.status,a.statusText,n,!0,d);try{var m=u.succeeded?u.value:{};i&&i(m),r.resolve(m)}catch(h){throw new an(a.status,a.statusText,h.message,!0,!1)}}))}},e.prototype.exceptionHandler=function(e,t,n,r,i,o){var a=this;return function(s){var l=a.handleFetchFailure(s,t.type,t.retryOnServerError),u=l.failureMessage,d=l.retryable&&t.retryCount>=0&&t.retryCount<5;e.error(new Tt.serverError(kt.restMethodInvocationFailed,t.url,u.failureObject||u.failureContent,u.httpStatus,u.httpStatusText,u.errorMessage,[t.url,u.httpStatusText],t.type,t.retryCount,d)),l.serverError&&t.serverErrorCount++,d?(t.retryCount+=1,2!==t.retryCount&&5!==t.retryCount||(t.url=Ye.getAlternateUrl(t.url)),setTimeout((function(){n=Date.now(),a.updateFetchOptions(e,t),t.retryCount<4?a.fetchWrapper(t).then(a.successHandler(e,t,n,r,i)).catch(a.exceptionHandler(e,t,n,r,i,o)):a.xhrWrapper(t,e,n).then(a.successHandler(e,t,n,r,i)).catch(a.exceptionHandler(e,t,n,r,i,o))}),sn*Math.pow(1.5,t.retryCount-1))):(o&&o(u),r.reject(u))}},e.prototype.invokeFetch=function(e,t,n,r,i,o,a,s,l,u,d,c){var p=this;void 0===c&&(c=!1);var m=Date.now(),f=new this.FetchOptions(r,n,i,o,t,l,u,d,c),h=this.fetchWrapper(f);return new Promise((function(t,n){var r={resolve:t,reject:n};h.then(p.successHandler(e,f,m,r,a)).catch(p.exceptionHandler(e,f,m,r,a,s))}))},e.prototype.post=function(e,t,n,r,i,o,a,s,l,u,d){return void 0===d&&(d=!1),this.invokeFetch(e,t,Pe.Post,n,r,i,o,a,s,l,u,d)},e.prototype.put=function(e,t,n,r,i,o,a,s,l,u,d){return void 0===d&&(d=!1),this.invokeFetch(e,t,Pe.Put,n,r,i,o,a,s,l,u,d)},e.prototype.get=function(e,t,n,r,i,o){return this.invokeFetch(e,!0,Pe.Get,t,n,null,null,null,r,i,o)},e.prototype.delete=function(e,t,n,r,i,o){return this.invokeFetch(e,!0,Pe.Delete,t,n,null,null,null,r,i,o)},e}()),un=new(function(){function e(){var e=this;this.returnOptionSchema={type:"object",children:{callbacks:{type:"object",optional:!0,children:{success:{type:"function",optional:!0},failure:{type:"function",optional:!0},gohome:{type:"function",optional:!0}}},urls:{type:"object",optional:!0,children:{success:{type:"string",optional:!0},failure:{type:"string",optional:!0},gohome:{type:"string",optional:!0}}}}},this.userContextSchema={type:"object",optional:!0,children:{authToken:{type:"string",optional:!0},userId:{type:"string",optional:!0},additionalHeaders:{type:"dictionary",optional:!0},serviceOverrides:{type:"object",optional:!0,ignoreUnspecifiedChild:!0,children:{authToken:{type:"string",optional:!0},userId:{type:"string",optional:!0},additionalHeaders:{type:"dictionary",optional:!0}}}}},this.pidlDocInfoSchema={type:"object",children:{resourceType:{type:"string"},anonymousPidl:{type:"boolean",optional:!0},parameters:{type:"dictionary"},resourceSuffix:{type:"string",optional:!0},pidlVersion:{type:"string",optional:!0},pidlEndpoint:{type:"string",optional:!0}}},this.resourceInfoSchema={type:"object",children:{resourceType:{type:"string"},anonymousPidl:{type:"boolean",optional:!0},parameters:{type:"dictionary"},id:{type:"string"},resourceEndpoint:{type:"string",optional:!0}}},this.pidlIdentitySchema={type:"object",ignoreUnspecifiedChild:!0,children:{country:{type:"string",optional:!0},description_type:{type:"string",optional:!0},operation:{type:"string",optional:!0},resource_id:{type:"string",optional:!0}}},this.displayOptionsSchema={type:"object",children:{containerId:{type:"string"},busyBlockId:{type:"string",optional:!0},busyBlockElement:{type:"any",optional:!0},helpDialogBlockId:{type:"string",optional:!0},showHelpDialogBlock:{type:"boolean",optional:!0},inputPropertyIdPrefix:{type:"string",optional:!0},inputPropertyIdSuffix:{type:"string",optional:!0},displayElementIdPrefix:{type:"string",optional:!0},displayElementIdSuffix:{type:"string",optional:!0},inputPropertyErrorIdPrefix:{type:"string",optional:!0},showPlaceholderInTextbox:{type:"boolean",optional:!0},disableEnterKeyAction:{type:"boolean",optional:!0},showSubmitBlock:{type:"boolean",optional:!0},showErrorBlock:{type:"boolean",optional:!0},htmlExtender:{type:"dictionary",optional:!0},busyBlockShowHideHandler:{type:"function",optional:!0},hidePropertyErrors:{type:"boolean",optional:!0},disableFocusOnLoad:{type:"boolean",optional:!0},alwaysValidateOnChange:{type:"boolean",optional:!0},ieExtender:{type:"dictionary",optional:!0},propagateCallbackException:{type:"boolean",optional:!0},useWebView2:{type:"boolean",optional:!0}}},this.suppressedEventsSchema={type:"object",optional:!0,children:{disableLogging:{type:"boolean",optional:!0},disableConsoleLogging:{type:"boolean",optional:!0}}},this.telemetryOptionsSchema={type:"object",optional:!0,children:{contextData:{type:"dictionary",optional:!0},disableLogging:{type:"boolean",optional:!0},disableConsoleLogging:{type:"boolean",optional:!0},enablePrivateEventConsoleLogging:{type:"boolean",optional:!0},customTelemetryFrameworkWindowNamespace:{type:"string",optional:!0},overrides:{type:"object",minLength:0,optional:!0,childType:this.suppressedEventsSchema,allowedChildNames:p(p({},M),B)}}},this.callbacksSchema={type:"object",optional:!0,children:{view:{type:"any",optional:!0},submit:{type:"function",optional:!0},getPidlDocument:{type:"function",optional:!0},iFrameMessageHandler:{type:"function",optional:!0},telemetryLogger:{type:"any",optional:!0},prefetcher:{type:"any",optional:!0},encryptionHandler:{type:"any",optional:!0}}},this.checkoutParamsSchema={type:"object",ignoreUnspecifiedChild:!0,children:{anonymousUser:{type:"boolean",optional:!0},checkoutId:{type:"string"},language:{type:"string"},market:{type:"string"},partner:{type:"string",optional:!0},paymentProviderId:{type:"string"},redirectUrl:{type:"string"}}},this.payeeTaxProfileParamsSchema={type:"object",ignoreUnspecifiedChild:!0,children:{section:{type:"string"},tenant:{type:"string"},sapidind:{type:"string",optional:!0},status:{type:"string",optional:!0},accounttype:{type:"string",optional:!0},payfromcc:{type:"array",minLength:1,optional:!0},residencecc:{type:"string",optional:!0},language:{type:"string",optional:!0}}},this.mockEventsSchema={type:"object",optional:!0,children:{name:{type:"string"},params:{type:"dictionary",optional:!0}}},this.mockFunctionSchema={type:"object",optional:!0,children:{name:{type:"string"},triggers:{type:"array",maxLength:1,childType:this.mockEventsSchema},returns:{type:"any",optional:!0}}},this.mockFunctionsSchema={type:"array",maxLength:1,optional:!0,childType:this.mockFunctionSchema},this.addUpdateOrDeleteOptionSchema={type:"object",optional:!0,children:{sessionId:{type:"string",optional:!0},riskData:{type:"object",optional:!0,children:{greenId:{type:"string"}}}}},this.selectOrRenderOptionSchema={type:"object",optional:!0},this.selectedResourceInfoSchema={type:"object",children:{id:{type:"string",optional:!0},backupId:{type:"string",optional:!0}}},this.handleSchema={type:"string"},this.prefillDataSchema={type:"object",ignoreUnspecifiedChild:!0},this.purchaseContextSchema={type:"object",children:{amount:{type:"number"},currency:{type:"string"},country:{type:"string"},threeDSScenario:{type:"string",possibleValues:qt.getValues(p({},we))},riskChallengeIndicator:{type:"string",optional:!0,possibleValues:qt.getValues(p({},Re))}}},this.purchaseRiskChallengeSchema={type:"object",children:{piResourceInfo:{type:"schema",schema:this.resourceInfoSchema},riskChallengeData:{type:"array",minLength:1},sessionId:{type:"string",optional:!0},orderId:{type:"string",optional:!0},options:{type:"dictionary",optional:!0}}},this.purchaseRiskChallengeSchemaForThreeDS={type:"object",children:{piResourceInfo:{type:"schema",schema:this.resourceInfoSchema},riskChallengeData:{type:"array",minLength:1},challengeWindowSize:{type:"string",possibleValues:qt.getValues(p({},Ae))},purchaseContext:{type:"schema",schema:this.purchaseContextSchema},sessionId:{type:"string",optional:!0},options:{type:"dictionary",optional:!0}}},this.purchasePendingStateSchema={type:"object",children:{piResourceInfo:{type:"schema",schema:this.resourceInfoSchema},sessionId:{type:"string"},orderId:{type:"string",optional:!0},options:{type:"dictionary",optional:!0}}},this.resourceOptionsSchema={type:"dictionary",optional:!0},this.showResourceParamsSchema={type:"object",children:{pidlDocInfo:{type:"schema",schema:this.pidlDocInfoSchema},prefillData:{type:"schema",schema:this.prefillDataSchema,optional:!0},options:{type:"schema",schema:this.resourceOptionsSchema,optional:!0}}},this.searchResourceParamsSchema={type:"object",children:{pidlDocInfo:{type:"schema",schema:this.pidlDocInfoSchema},options:{type:"schema",schema:this.resourceOptionsSchema,optional:!0}}},this.fundStoredValueParamsSchema={type:"object",children:{pidlDocInfo:{type:"schema",schema:this.pidlDocInfoSchema},options:{type:"schema",schema:this.resourceOptionsSchema,optional:!0}}},this.resourceActionParamsSchema={type:"object",children:{resourceActionContext:{type:"object",ignoreUnspecifiedChild:!0,children:{action:{type:"string",possibleValues:qt.getValues(p({},N))},handle:{type:"string",optional:!0},pidlDocInfo:{type:"schema",schema:this.pidlDocInfoSchema,optional:!0},pidlIdentity:{type:"schema",schema:this.pidlIdentitySchema,optional:!0},resourceInfo:{type:"schema",schema:this.resourceInfoSchema,optional:!0},prefillData:{type:"schema",schema:this.prefillDataSchema,optional:!0}}},prefillData:{type:"schema",schema:this.prefillDataSchema,optional:!0},options:{type:"dictionary",optional:!0},selectedResourceInfo:{type:"schema",schema:this.selectedResourceInfoSchema,optional:!0}}},this.authorizationGroupSchema={type:"object",children:{id:{type:"string"},totalAmount:{type:"number"},itemTitles:{type:"array"}}},this.paymentSessionDataSchema={type:"object",ignoreUnspecifiedChild:!0,children:{amount:{type:"number"},billableAccountId:{type:"string",optional:!0},caid:{type:"string",optional:!0},challengeScenario:{type:"string",possibleValues:qt.getValues(p({},we))},challengeWindowSize:{type:"string",possibleValues:qt.getValues(p({},Ae))},classicProduct:{type:"string",optional:!0},currency:{type:"string"},country:{type:"string"},hasPreOrder:{type:"boolean",optional:!0},isLegacy:{type:"boolean",optional:!0},isMOTO:{type:"boolean",optional:!0},language:{type:"string"},partner:{type:"string"},piCid:{type:"string",optional:!0},piid:{type:"string"},purchaseOrderId:{type:"string",optional:!0},redeemRewards:{type:"boolean",optional:!0},rewardsPoints:{type:"number",optional:!0},recurringPaymentDetails:{type:"object",optional:!0,ignoreUnspecifiedChild:!0,children:{frequencyUnit:{type:"string",possibleValues:qt.getValues(p({},Le))},frequency:{type:"number"}}},authorizationGroups:{type:"array",optional:!0,childType:this.authorizationGroupSchema}}},this.paymentSessionSchema={type:"object",ignoreUnspecifiedChild:!0,children:{id:{type:"string"},isChallengeRequired:{type:"boolean"},challengeStatus:{type:"string",possibleValues:qt.getValues(p({},Oe))},signature:{type:"string"},amount:{type:"number"},caid:{type:"string",optional:!0},challengeScenario:{type:"string",possibleValues:qt.getValues(p({},we))},challengeWindowSize:{type:"string",possibleValues:qt.getValues(p({},Ae))},currency:{type:"string"},country:{type:"string"},hasPreOrder:{type:"boolean",optional:!0},isLegacy:{type:"boolean",optional:!0},isMOTO:{type:"boolean",optional:!0},language:{type:"string"},partner:{type:"string"},piCid:{type:"string",optional:!0},piid:{type:"string"}}},this.visitInputSchema=function(t,n,r){var i=e.validate(t,n,r);if(i)return i;if("dictionary"===n.type||!r)return null;if(e.isObjectSchema(n)){var o=n.allowedChildNames,a=n.ignoreUnspecifiedChild,s=n.children,l=n.childType;if(o)for(var u in r){if(!o[u])return new Tt.inputParameterValidationFailedError(kt.inputParameterMissing,t,[n.type,qt.getType(r)]);if(l){var d=e.visitInputSchema(t+" element: ",l,r[u]);if(d)return d}}else{if(!a)for(var c in r)if(!s[c])return new Tt.inputParameterValidationFailedError(kt.inputParameterNotInRange,c,[c]);for(var p in s){var m=e.visitInputSchema(p,s[p],r[p]);if(m)return m}}}if(e.isArraySchema(n)){if(!qt.isArray(r))return new Tt.inputParameterValidationFailedError(kt.inputParameterTypeMismatch,t,[n.type,qt.getType(r)]);var f=n.minLength,h=n.maxLength;l=n.childType;if(f&&r.length<f)return new Tt.inputParameterValidationFailedError(kt.inputParameterSmallerThanMinLength,t,[t,f,r.length]);if(h&&r.length>h)return new Tt.inputParameterValidationFailedError(kt.inputParameterLargerThanMaxLength,t,[t,h,r.length]);if(l)for(var y=0;y<r.length;++y){var g=e.visitInputSchema(t+" element: "+y,l,r[y]);if(g)return g}}if(e.isSchemaSchema(n)){var v=e.visitInputSchema(t,n.schema,r);if(v)return v}return null},this.validate=function(e,t,n){if(!t.optional&&(null===n||void 0===n))return new Tt.inputParameterValidationFailedError(kt.inputParameterMissing,e,[e]);var r=t.type;if(!n||"any"===r)return null;var i=typeof n;return"dictionary"===r||"schema"===r?r="object":"array"===r&&qt.isArray(n)&&(i="array"),"boolean"===r&&"string"===i&&("true"!==n&&"false"!==n||(i="boolean")),r&&i&&r!==i?new Tt.inputParameterValidationFailedError(kt.inputParameterTypeMismatch,e,[r,i]):t.possibleValues&&!qt.contains(t.possibleValues,n)?new Tt.inputParameterValidationFailedError(kt.inputParameterNotInRange,e,[e,n,JSON.stringify(t.possibleValues)]):null},this.resultHandler=function(e,t){return t&&e.failure(t),!qt.boolify(t)},this.validateInputParameters=function(t,n,r,i,o){var a=e.resultHandler(t,e.visitInputSchema("userContext",e.userContextSchema,n));return(a=a&&e.resultHandler(t,e.visitInputSchema("displayOptions",e.displayOptionsSchema,r)))&&r.busyBlockShowHideHandler&&r.busyBlockId&&(a=e.resultHandler(t,new Tt.inputParameterValidationFailedError(kt.busyBlockShowHideHandlerAndbusyBlockIdAreExclusive))),a=(a=a&&e.resultHandler(t,e.visitInputSchema("telemetryOptions",e.telemetryOptionsSchema,i)))&&e.resultHandler(t,e.visitInputSchema("callbacks",e.callbacksSchema,o))},this.validateCheckoutParams=function(t,n){return e.resultHandler(t,e.visitInputSchema("checkoutParams",e.checkoutParamsSchema,n))},this.validatePayeeTaxProfileParams=function(t,n){return e.resultHandler(t,e.visitInputSchema("payeeTaxProfileParams",e.payeeTaxProfileParamsSchema,n))},this.validateMockFunctions=function(t,n){return e.resultHandler(t,e.visitInputSchema("mockFunctions",e.mockFunctionsSchema,n))},this.validateReturnOptions=function(t,n){return e.resultHandler(t,e.visitInputSchema("returnOptions",e.returnOptionSchema,n))},this.validatePidlDocInfo=function(t,n){return e.resultHandler(t,e.visitInputSchema("pidlDocInfo",e.pidlDocInfoSchema,n))},this.validateResourceInfo=function(t,n){return e.resultHandler(t,e.visitInputSchema("resourceInfo",e.resourceInfoSchema,n))},this.validateAddUpdateOrDeleteOptions=function(t,n){return e.resultHandler(t,e.visitInputSchema("options",e.addUpdateOrDeleteOptionSchema,n))},this.validateSelectOrRenderOptions=function(t,n){return e.resultHandler(t,e.visitInputSchema("options",e.selectOrRenderOptionSchema,n))},this.validateShowResourceParams=function(t,n){return e.resultHandler(t,e.visitInputSchema("showResourceParams",e.showResourceParamsSchema,n))},this.validateSearchResourceParams=function(t,n){return e.resultHandler(t,e.visitInputSchema("searchResourceParams",e.searchResourceParamsSchema,n))},this.validateFundStoredValueParams=function(t,n){return e.resultHandler(t,e.visitInputSchema("fundStoredValueParams",e.fundStoredValueParamsSchema,n))},this.validateResourceOptions=function(t,n){return e.resultHandler(t,e.visitInputSchema("options",e.resourceOptionsSchema,n))},this.validateResourceActionParams=function(t,n){return e.resultHandler(t,e.visitInputSchema("resourceActionParams",e.resourceActionParamsSchema,n))},this.validatePaymentSessionData=function(t,n){return e.resultHandler(t,e.visitInputSchema("paymentSessionData",e.paymentSessionDataSchema,n))},this.shouldValidateAuthorizationGroups=function(e,t){return t===je.applePay&&e.length>1},this.validatePaymentSessionOrData=function(t,n){var r,i;if(e.isPaymentSession(n))i=e.paymentSessionSchema;else{if(i=e.paymentSessionDataSchema,null===(r=null===n||void 0===n?void 0:n.recurringPaymentDetails)||void 0===r?void 0:r.frequencyUnit){var o=n.recurringPaymentDetails.frequencyUnit;n.recurringPaymentDetails.frequencyUnit=o.toLowerCase()}if((null===n||void 0===n?void 0:n.authorizationGroups)&&e.shouldValidateAuthorizationGroups(n.authorizationGroups,null===n||void 0===n?void 0:n.piid)){for(var a=0,s=0,l=n.authorizationGroups;s<l.length;s++){a+=100*l[s].totalAmount}if(a!==100*(null===n||void 0===n?void 0:n.amount)){var u=new Tt.unmatchedAmountError(kt.unmatchedAmount,JSON.stringify(n));t.error(u)}}}return e.resultHandler(t,e.visitInputSchema("paymentSessionOrData",i,n))},this.validatePurchaseRiskChallengeParams=function(t,n){var r="purchaseRiskChallengeSchema",i=e.purchaseRiskChallengeSchema;return n&&n.riskChallengeData&&n.riskChallengeData.length>0&&"threeds"===n.riskChallengeData[0].toLowerCase()&&(r="purchaseRiskChallengeSchemaForThreeDS",i=e.purchaseRiskChallengeSchemaForThreeDS),e.resultHandler(t,e.visitInputSchema(r,i,n))},this.validateHandlePurchasePendingStateParams=function(t,n){return e.resultHandler(t,e.visitInputSchema("purchasePendingStateSchema",e.purchasePendingStateSchema,n))},this.validateSelectedResourceInfo=function(t,n){return e.resultHandler(t,e.visitInputSchema("selectedResourceInfo",e.selectedResourceInfoSchema,n))},this.validateHandle=function(t,n){return e.resultHandler(t,e.visitInputSchema("handle",e.handleSchema,n))}}return e.prototype.isObjectSchema=function(e){return e&&"object"===e.type},e.prototype.isArraySchema=function(e){return e&&"array"===e.type},e.prototype.isSchemaSchema=e.prototype.isPaymentSession=function(e){return e&&qt.isString(e.id)&&e.id.length},e}()),dn=function(e){this.constants={},this.errors={};var t=e&&e.getResolvedOrFirstPidlDoc();if(t&&t.strings){var n=t.strings,r=n.constants,i=n.errorCodes;r&&(this.constants=p({},r)),i&&(this.errors=p({},i))}},cn=function(){function e(e){var t=this;this.cache=null,this.keyComparer=null,this.put=function(e,n){var r=t.getCacheEntryIndex(e);-1===r?t.cache.push({key:e,value:n}):t.cache[r].value=n},this.get=function(e){var n=t.getCacheEntryIndex(e);return-1!==n&&t.cache[n].value},this.remove=function(e){var n=t.getCacheEntryIndex(e),r=null;return-1!==n&&(r=t.cache[n],t.cache.splice(n,1)),r&&r.value},this.clear=this.removeIf=function(e){e&&qt.filter(t.cache,(function(t){return!t||!t.value||!e(t.value)}))},this.cache=[],this.keyComparer=qt.isFunction(e)?e:return e.prototype.getCacheEntryIndex=function(e){for(var t=0;t<this.cache.length;t++)if(this.keyComparer(this.cache[t].key,e))return t;return-1},e}(),pn=function(){function e(){var e=this;this.modelDataCache=null,this.dataSourceCache=null,this.partnerData=null,this.saveModelData=this.readModelData=this.saveDataSource=this.readDataSource=this.readAllDataSources=function(){return e.dataSourceCache},this.savePartnerData=this.readPartnerData=function(){return e.partnerData},this.clear=function(){e.modelDataCache.clear(),e.partnerData=null,e.clearDataSourceCache()},this.clearDataSourceCache=this.modelDataCache=new cn,this.dataSourceCache={}}return e.prototype.getModelData=function(e){var t={};if(e)for(var n in e){var r=e[n];r&&(t[n]=r.getValue())}return t},e}(),mn=new function(){var e=this;this.createModelElement=function(t,n,r,i,o,a,s,l,u){switch(t){case w.button:return e.addHandleToDisplayDescriptions(r,s),new Hn(n,r,i,o,a,l,u);case w.filePicker:return new On(n,r,i,o,a);case w.checkBox:return new An(n,r,i,o,a);case w.dropdown:return e.addHandleToDisplayDescriptions(r,s),new kn(n,r,i,o,a);case w.group:return new vn(t,n,r,i,o,a,u);case w.captcha:return new En(t,n,r,i,o,a,u);case w.page:return new Sn(n,r,i,o,a);case w.textGroup:return new Dn(n,r,i,o,a);case w.dataCollectionBindingGroup:return new Pn(n,r,i,o,a);case w.textBox:return new Rn(n,r,i,o,a,s);case w.radio:return e.addHandleToDisplayDescriptions(r,s),new xn(n,r,i,o,a);case w.buttonList:return e.addHandleToDisplayDescriptions(r,s),new wn(n,r,i,o,a);case w.secureProperty:return new zn(n,r,i,o,a,s);case w.iFrame:return new Gn(n,r,i,o,a);case w.heading:case w.subheading:case w.text:case w.hyperlink:return new Fn(t,n,r,i,o,a,l,u);case w.image:return new Bn(t,n,r,i,o,a,l,u);case w.logo:return new Ln(n,r,i,o,a,s,u);case w.audio:return new Nn(n,r,i,o,a,l,u);case w.expression:return new Mn(n,r,i,o,a,l,u);case w.pidlContainer:return new jn(n,r,i,o,a);case w.separator:return new Vn(t,n,r,i,o,a,u);case w.spinner:return new Un(t,n,r,i,o,a,u);default:return new hn(t,n,r,i,o,a)}},this.addHandleToDisplayDescriptions=function(e,t){if(t){var n=t.getOperationHandle();if(n)for(var r=zt.getDisplayDescriptionsPidlActions(e),i=0;i<r.length;i++){var o=r[i];o.type!==H.success&&o.type!==H.successWithPidlPayload||!qt.isObject(o.context)||(o.context.handle=n,qt.isObject(o.context.resourceActionContext)&&(o.context.resourceActionContext.handle=n))}}},this.getPidlIdentityHash=function(e,t){if(t.propertyName){var n=zt.getPidlIdentityForProperty(e,t.propertyName);return n?zt.createIdentityHash(n):void 0}},this.isErrorObject=this.addPage=function(t,n,r,i,o,a,s){var l=e.create(t,n,r,i,o,!1,{},null,a,s);if(e.isErrorObject(l))return l;var u=null,d=l.element,c=y([],l.warnings,!0);if(d)if($n(d)){var p=e.createLinkedPidlModelElements(o,i,d.linkedPidlId,!0,{});if(e.isErrorObject(p))return p;u=y([],p.elements,!0),c=y(y([],c,!0),p.warnings,!0)}else u=[d];return{elements:u,warnings:c}},this.create=function(t,n,r,i,o,a,s,l,u,d){var c=Gt.getModelElementType(n,r);if(c.error)return{error:c.error};var p=e.getPidlIdentityHash(t,r),m=e.createModelElement(c.type,n,r,i,p,a,o,u,d),f=[];if(s&&(m.displayType!==st.page&&s[m.displayId]&&(f=y(y([],f,!0),[new Tt.unexpectedError(kt.duplicateDisplayHintIdOnPage,[m.displayId,l])],!1)),l||(l=m.displayId),s[m.displayId]=!0),Jn(m))for(var h=m.displayDescription,g=["audioMembers","imageMembers"],v=0;v<g.length;v++)for(var P=0;P<h[g[v]].length;P++){var b=e.create(t,t&&jt.getPropertyFromDataDescription(t.data_description,h[g[v]][P].propertyName),h[g[v]][P],i,o,a,s,l,u,d);if(e.isErrorObject(b))return b;f=y(y([],f,!0),b.warnings,!0);var I=b.element;0===v?m.audioChildren.push(I):m.imageChildren.push(I)}else if(Kn(m))for(h=m.displayDescription,P=0;P<h.members.length;P++){if(b=e.create(t,t&&jt.getPropertyFromDataDescription(t.data_description,h.members[P].propertyName),h.members[P],i,o,a,s,l,u,d),e.isErrorObject(b))return b;if(f=y(y([],f,!0),b.warnings,!0),$n(I=b.element)){var E=e.createLinkedPidlModelElements(o,i,I.linkedPidlId,!1,s,l);if(e.isErrorObject(E))return E;m.children=y(y([],m.children,!0),E.elements,!0),f=y(y([],f,!0),E.warnings,!0)}else m.children.push(I)}else e.createPossibleOptionMembers(m,u);return{element:m,warnings:f}},this.createPossibleOptionMembers=function(t,n){if(Zn(t))for(var r in t.possibleOptions){var i=t.possibleOptions[r];if(i.displayContent){var o=e.createModelElementsFromDisplayDescriptions([i.displayContent],t.operationType,n).elements;o&&o.length>=1&&(i.displayContentContainer=o[0])}}},this.createLinkedPidlModelElements=function(t,n,r,i,o,a){for(var s=zt.createIdentityHash(r),l=t.getLinkedPidl(s),u={elements:[],warnings:[]},d=!1,c=0;c<l.displayDescription.length;c++){var p=l.displayDescription[c],m=e.create(l,jt.getPropertyFromDataDescription(l.data_description,p.propertyName),p,n,t,!0,o,a);if(e.isErrorObject(m))return m;var f=m.element,h=m.warnings;if(u.warnings=y(y([],u.warnings,!0),h,!0),!i&&Qn(f)){if(d)return{error:new Tt.unexpectedError(kt.multiplePagesInLinkedPidlForSinglePagePidlContainer)};u.elements=y(y([],u.elements,!0),f.children,!0),d=!0}else u.elements=y(y([],u.elements,!0),[f],!1)}return u},this.createModelElements=function(t,n){var r=t.getResolvedOrFirstPidlDoc(),i=[],o=[];if(r&&r.displayDescription&&r.displayDescription.length)for(var a=0;a<r.displayDescription.length;a++){var s=r.displayDescription[a],l=e.addPage(r,jt.getPropertyFromDataDescription(r.data_description,s.propertyName),s,n,t);if(e.isErrorObject(l))return l;i=y(y([],i,!0),l.elements,!0),o=y(y([],o,!0),l.warnings,!0)}return 0===i.length?{error:new Tt.unexpectedError(kt.noDisplayDescriptionInPidlDocument)}:{elements:i,warnings:o}},this.createModelElementsFromDisplayDescriptions=function(t,n,r,i,o,a){for(var s=[],l=0;l<t.length;l++){var u=t[l];if(u){var d=o&&o.data_description&&jt.getPropertyFromDataDescription(o.data_description,u.propertyName),c=e.addPage(o,d,u,n,a,r,i);e.isErrorObject(c)||(s=y(y([],s,!0),c.elements,!0))}}return{elements:s}}},fn=new(function(){function e(){var e=this;this.normalizeValueToOptions=function(e,t){var n=qt.find(e,();return n||(n=""),n},this.updateModelElements=function(t,n,r){e.propertiesVisitorProcessingAny(t,(function(e,t){return!!e.update&&e.update(t,r)}),n)},this.findFirstMatchingProperty=function(t,n){var r={properties:n};return e.propertiesVisitorProcessingDataProperty(t,(function(e,t){if(!e.isPrefillControl()&&qt.contains(t.properties,e.getPropertyName()))return t.matchedProperty=e.getPropertyName(),!0}),r),r.matchedProperty},this.getParentIfSame=function(t,n){for(var r=null,i=0;i<n.length;i++){var o={propertyName:n[i]};if(e.propertiesVisitorProcessingAny(t,(function(e,t){if(e&&e.children)for(var n=0;n<e.children.length;n++)if(e.children[n].isProperty()){var r=e.children[n];if(r&&r.getPropertyName&&r.getPropertyName()===t.propertyName)return t.parent=e,!0}}),o),o.parent)if(r){if(o.parent!==r)return null}else r=o.parent}return r},this.findPropertyElement=function(t,n){var r={propertyName:n};return e.propertiesVisitorProcessingDataProperty(t,(function(e,t){if(e.getPropertyName()===t.propertyName)return t.element=e,!0}),r),r.element},this.findElement=function(t,n){var r={};return e.propertiesVisitorProcessingAny(t,(function(e,t){if(n(e))return t.element=e,!0}),r),r.element},this.findAllElements=function(t,n){var r={elements:[]};return e.propertiesVisitorProcessingAny(t,(,r),r.elements},this.findPrefillControlElement=function(t){return e.findElement(t,(function(e){if(e&&e.displayType===st.prefillControl)return!0}))},this.findFirstVisibleEnabledPropertyElement=function(t){var n={};return e.propertiesVisitorProcessingAny(t,(function(e,t){if(e&&(e.isProperty()||e.isSecureProperty()||e.isPrefillControl())&&!e.disabled()&&!e.hidden())return t.element=e,!0}),n),n.element},this.isButtonWithDisplayDescription=function(e){return Yn(e)&&!qt.isNullOrUndefined(e.displayDescription)},this.findFirstButtonElement=function(t){return e.findElement(t,(function(e){return Yn(e)}))},this.findHighlightedButton=function(t){return e.findElement(t,()},this.findDefaultPidlActionButton=function(t){return e.findElement(t,(function(t){return e.isButtonWithDisplayDescription(t)&&t.displayDescription.pidlAction&&t.displayDescription.pidlAction.isDefault}))},this.getDefaultPidlActionButton=function(t,n){var r=e.findDefaultPidlActionButton(t);return r||(r=e.findHighlightedButton(t)||e.findFirstButtonElement(t)),r},this.getDefaultPidlAction=function(t,n){var r=e.findDefaultPidlActionButton(t);return r||(r=e.findHighlightedButton(t)),r&&r.displayDescription&&r.displayDescription.pidlAction},this.getDefaultSuccessPidlPayload=function(t,n){var r=e.getDefaultPidlAction(t,n);if(r&&(r.type===H.success||r.type===H.successWithPidlPayload))return r.context},this.normalizeValueToPossibleValues=function(t,n){var r=e.normalizeValueToOptions(qt.getKeys(t.possibleOptions),n);return qt.isEmptyString(r)&&t.dataDescription.possible_values&&(r=e.normalizeValueToOptions(qt.getKeys(t.dataDescription.possible_values),n)),r},this.normalizeValueToDisplayDescriptionPossibleOptions=function(t,n){return e.normalizeValueToOptions(qt.getKeys(t.possibleOptions),n)},this.getPollingPidlActions=function(t){var n={};return t.forEach((function(t){t.pidlAction&&t.pidlAction.type===H.poll&&(n[t.displayId]=t.pidlAction),t.children&&(n=p(p({},n),e.getPollingPidlActions(t.children)))})),n},this.findRadioElements=return e.prototype.propertyVisitorProcessingDataProperty=function(e,t,n){if(e){if(e.isProperty()||e.isSecureProperty()||e.isCaptcha()){var r=t(e,n);if(r)return r}if(e.children&&e.children.length>0&&(!n||!n.stopDescendantsProcessing))return this.propertiesVisitorProcessingDataProperty(e.children,t,n);n&&delete n.stopDescendantsProcessing}},e.prototype.propertyVisitorProcessingAny=function(e,t,n){if(e){var r=t(e,n);return r||(!(e.children&&e.children.length>0)||n&&n.stopDescendantsProcessing?void(n&&delete n.stopDescendantsProcessing):this.propertiesVisitorProcessingAny(e.children,t,n))}},e.prototype.propertiesVisitorProcessingDataProperty=function(e,t,n){if(e){if(!qt.isArray(e))return this.propertyVisitorProcessingDataProperty(e,t,n);for(var r=0;r<e.length;r++){var i=this.propertyVisitorProcessingDataProperty(e[r],t,n);if(i)return i}}},e.prototype.propertiesVisitorProcessingAny=function(e,t,n){if(e){if(!qt.isArray(e))return this.propertyVisitorProcessingAny(e,t,n);for(var r=0;r<e.length;r++){var i=this.propertyVisitorProcessingAny(e[r],t,n);if(i)return i}}},e}()),hn=function(){function e(e,t,n,r,i,o){var a=this;this.isText=function(){return a.isStaticText()||a.type===w.hyperlink},this.isStaticText=function(){return a.type===w.heading||a.type===w.subheading||a.type===w.text||a.type===w.expression},this.isProperty=function(){return a.displayDescription.displayType===st.property},this.isCaptcha=function(){return a.displayDescription.displayType===st.captcha},this.isPrefillControl=function(){return a.displayDescription.displayType===st.prefillControl},this.isButton=function(){return a.displayDescription.displayType===st.button},this.isHighlighted=function(){return a.displayDescription.isHighlighted},this.isIframe=function(){return a.displayDescription.displayType===st.iFrame},this.isSecureProperty=this.showKeyLogo=function(){return qt.boolify(a.dataDescription)&&!0===a.dataDescription.is_key},this.disabled=function(){return a.operationType===tt.update&&a.dataDescription&&!1===a.dataDescription.is_updatable||!0===a.isDisabled},this.hidden=this.canBeRendered=this.getPrefixedTags=function(e,t,n){n=n||function(e,t){return!0};var r={};return Object.keys(a.tags?a.tags:{}).forEach((function(i){var o=a.tags[i];qt.startsWith(i,e)&&n(i,o)&&(r[t?i.replace(e,""):o]=o)})),r},this.getParentHtmlClassTags=function(){return a.getPrefixedTags(Ie.parent,!1,(function(e,t){return!be[e.replace(Ie.parent,"")]}))},this.getHelpDialogTags=function(){return a.getPrefixedTags(Ie.helpDialog,!0,(function(e,t){return be[e.replace(Ie.helpDialog,"")]}))},this.update=function(e,t){return a.displayCondition&&(a.displayConditionResult=Gt.getFunctionExecutionResult(a.displayCondition,e)),a.updateModelElement(e,t)},this.operationType=r,this.dataDescription=t,this.displayDescription=n,this.type=e,this.pidlIdentity=i,this.isLinkedPidl=o,this.hasNoDataToShow=!1;var s=this.displayDescription,l=s.isHidden,u=s.displayCondition,d=s.displayId,c=s.displayType,p=s.tags,m=s.propertyName,f=s.pidlAction,h=s.displayHelpName,y=s.displayHelp,g=s.displayImage,v=s.isDisabled,P=s.styleHints;this.isHidden=!0===l,this.displayCondition=u,this.displayConditionResult=!this.displayCondition,this.pidlAction=f,this.displayId=d,this.displayType=c,this.tags=p,this.styleHints=P,this.displayHelpName=h,this.displayHelp=y,this.displayImage=g,this.accessibilityName=null,this.tabIndex=null,this.tags&&(this.accessibilityName=this.tags.accessibilityName,this.disabledAccessibilityName=this.tags.disabledAccessibilityName,this.tags.tabIndex&&(this.tabIndex=String(this.tags.tabIndex)),this.maxLengthMessage=this.tags.maxLengthMessage);var b=m;this.id=b||d,this.isDisabled=v,this.children=[],this.audioChildren=[],this.imageChildren=[]}return e.prototype.updateModelElement=function(e,t){return!1},e}(),yn=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,r,i,o,a)||this,l=r.layoutOrientation,u=r.layoutAlignment,d=r.containerDescription,c=r.members,p=r.displayName,m=r.showDisplayName;return s.layoutOrientation=l||lt.vertical,s.layoutAlignment=u,s.containerDescription=d,s.members=c,s.displayName=p,s.showDisplayName=p&&qt.boolify(m),s}return c(t,e),t}(hn),gn=function(e){function t(t,n,r,i,o,a,s){var l=e.call(this,t,n,r,i,o,a)||this,u=r.displayName,d=r.showDisplayName,c=r.isSubmitGroup,p=r.isModalGroup;return l.displayName=u,l.showDisplayName=u&&(!d||d===F.stringTrue),l.isSubmitGroup=c,l.isModalGroup=p,s&&(l.id+=s),l}return c(t,e),t}(yn),vn=function(e){function t(t,n,r,i,o,a,s){return e.call(this,t,n,r,i,o,a,s)||this}return c(t,e),t}(gn),Pn=function(e){function t(t,n,r,i,o){var a=e.call(this,w.dataCollectionBindingGroup,t,n,r,i,o)||this;return a.dataCollectionSource=n.dataCollectionSource,a.filterDescription=n.filterDescription,a.childrenTemplates=a.children,a}return c(t,e),t.prototype.updateModelElement=function(e){if(this.dataCollectionSource){var t=Gt.getPropertyExpressionValue(this.dataCollectionSource,e);this.filterDescription&&(t=Gt.getFunctionExecutionResult(this.filterDescription,{modelData:e.modelData,contextData:t}));var n=null;if(t&&t.length&&qt.isArray(t)){n=[];for(var r=0;r<t.length;r++)for(var i={modelData:e.modelData,contextData:t[r]},o=0;o<this.childrenTemplates.length;o++){var a=String(r);e.depth?(this.id=this.id+e.depth,a=e.depth+"_"+a,i.depth=a+String.fromCharCode(e.depth.charCodeAt(e.depth.length-1)+1)):i.depth=a+"a";var s=qt.deepCopy(this.childrenTemplates[o]),l=mn.createModelElementsFromDisplayDescriptions([s.displayDescription],this.operationType,i,a).elements;l&&l.length>=1&&(e.stopDescendantsProcessing=!0,fn.updateModelElements(l,i),n=n.concat(l))}}this.children=n}return!1},t}(gn),bn=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,r,i,o,a)||this,l=r.layoutOrientation,u=r.layoutAlignment,d=r.containerDescription,c=r.audioMembers,p=r.imageMembers,m=r.displayName,f=r.showDisplayName;return s.layoutOrientation=l||lt.vertical,s.layoutAlignment=u,s.containerDescription=d,s.audioMembers=c,s.imageMembers=p,s.displayName=m,s.showDisplayName=m&&qt.boolify(f),s}return c(t,e),t}(hn),In=function(e){function t(t,n,r,i,o,a,s){var l=e.call(this,t,n,r,i,o,a)||this;l.getPropertyName=function(){return l.displayDescription.propertyName},l.required=function(){return!(!0===l.dataDescription.is_optional)};var u=r.displayName,d=r.showDisplayName;return l.displayName=u,l.showDisplayName=u&&(!d||d===F.stringTrue),l.defaultValue=n.default_value,s&&(l.id+=s),l}return c(t,e),t}(bn),En=function(e){eturn c(t,e),t}(In),Sn=function(e){function t(t,n,r,i,o){var a=e.call(this,w.page,t,n,r,i,o)||this;return a.displayName=n.displayName,a.keyPidlActions=n.keyPidlActions,a}return c(t,e),t}(yn),Dn=function(e){function t(t,n,r,i,o){var a=e.call(this,w.textGroup,t,n,r,i,o)||this;return a.displayContent=n.displayContent,a}return c(t,e),t}(yn),Cn=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,r,i,o,a)||this;s.getPropertyName=s.getErrorMessage=function(e,t){var n,r=s.displayErrorMessages;if(r){if(t&&r.fromErrorCode)for(var i=0;i<r.fromErrorCode.length;i++){var o=r.fromErrorCode[i];if(o.errorCode===t){n=o.errorMessage;break}}else if(r.fromRegex)for(i=0;i<r.fromRegex.length;i++){var a=r.fromRegex[i];if(new RegExp(a.regex).test(e)){n=a.errorMessage;break}}n||(n=r.defaultErrorMessage)}return n},s.required=function(){return!(!0===s.dataDescription.is_optional)&&s.displayDescription.displayType!==st.prefillControl};var l=s.displayDescription,u=l.displayName,d=l.showDisplayName,c=l.displayErrorMessages,p=l.displayLogo,m=l.maskDisplay,f=l.resolutionPolicy,h=l.displayHelpPosition,y=n.is_key,g=n.transformation,v=n.displayOnly,P=n.default_value;return qt.isFormatStringExpressionPlaceholder(P)?s.defaultValueTemplate=P:s.defaultValue=P,s.displayName=u,s.showDisplayName=u&&(!d||d===F.stringTrue),s.isKeyProperty=!0===y,s.supportsDisplayTransformation=g&&!qt.isNullOrUndefined(g.forDisplay),s.displayErrorMessages=c,s.displayLogo=p,s.maskDisplay=m,s.triggerPidlDownloadOnChange=s.isKeyProperty&&zt.doesKeyPropertyTriggerPidlDownload(s.dataDescription),s.resolutionPolicy=f||ct.always,s.displayOnly=v,s.displayHelpPosition=h,s}return c(t,e),t.prototype.updateModelElement=function(e,t){if(this.defaultValueTemplate&&(this.defaultValue=Gt.getFormatStringExpressionValue(this.defaultValueTemplate,e),e.modelData&&this.defaultValue)){var n=e.modelData.getModelDataProperty(this.getPropertyName());n&&!n.getValue()&&n.setValue(this.defaultValue)}return this.updatePropertyElement(e,t)},t.prototype.updatePropertyElement=t}(hn),Tn=function(e){function t(t,n,r,i,o,a){var s=e.call(this,t,n,r,i,o,a)||this;s.firstElementIdSuffix=var l=r.possibleOptions,u=r.possibleValues,d=r.dataCollectionSource,c=r.filterDescription,p=r.displaySelectionText,m=r.displayPropertyDescription,f=r.isSelectFirstItem;if(s.possibleValues=u,s.possibleOptions=l,!s.possibleOptions&&u&&(s.possibleOptions=s.getPossibleOptions(u)),s.dataCollectionSource=d,s.filterDescription=c,s.displaySelectionText=p,s.description=m,s.isSelectFirstItem=f,s.selectedIndex=s.displaySelectionText?0:-1,s.dataCollectionSource){var h=Object.keys(s.possibleOptions);h&&h.length&&qt.isFormatStringExpressionPlaceholder(h[0])&&(s.possibleOptionsTemplate=s.possibleOptions[h[0]],s.possibleOptionsTemplate.key=h[0],s.possibleOptions={})}return s.isSelectFirstItem&&s.selectedIndex++,s}return c(t,e),t.prototype.updatePropertyElement=function(e,t){if(this.dataCollectionSource&&this.possibleOptionsTemplate){var n=[];if(qt.isArray(this.dataCollectionSource))for(var r=0,i=this.dataCollectionSource;r<i.length;r++){var o=i[r],a=Gt.getPropertyExpressionValue(o,e);n.push.apply(n,a)}else n=Gt.getPropertyExpressionValue(this.dataCollectionSource,e);this.filterDescription&&(n=Gt.getFunctionExecutionResult(this.filterDescription,{modelData:e.modelData,contextData:n},t));var s={},l=this.defaultValue;if(n&&n.length&&qt.isArray(n))for(var u=0;u<n.length;u++){var d={modelData:e.modelData,contextData:n[u]},c=Gt.getFormatStringExpressionValue(this.possibleOptionsTemplate.key,d);if(this.isSelectFirstItem&&qt.isNullOrUndefinedOrWhiteSpaceString(l)&&(l=c,e.modelData)){var p=e.modelData.getModelDataProperty(this.getPropertyName());p&&p.setValue(c)}var m={};for(var f in this.possibleOptionsTemplate)m[f]=Gt.getFormatStringExpressionValue(this.possibleOptionsTemplate[f],d);if(m.displayContent){var h=mn.createModelElementsFromDisplayDescriptions([m.displayContent],this.operationType,d,String(u));h.elements&&h.elements.length>=1&&(fn.updateModelElements(h.elements,d),m.displayContentContainer=h.elements[0])}m.pidlAction=m.pidlAction||{},m.pidlAction.context=n[u],s[c]=m}else t&&t.notifyNoSelectionOptionsFound(this.id,this.displayId,this.pidlIdentity,this.type);this.possibleOptions=s,this.hasNoDataToShow=0===qt.keyCount(this.possibleOptions)}if(!this.hasNoDataToShow){var y=Gt.getFunctionExecutionResult({functionName:"filterOptions"},{modelData:e.modelData,contextData:{propertyName:this.getPropertyName(),possible_values:this.dataDescription.possible_values,possibleValues:this.possibleValues,possibleOptions:this.possibleOptions}});if(y){var g=y.possible_values,v=y.possibleValues,P=y.possibleOptions;g&&(this.dataDescription.possible_values=g),v&&(this.possibleValues=v),P&&(this.possibleOptions=P)}}return this.displayDescription.disableSingleItemDropdown&&this.type===w.dropdown&&this.possibleOptions&&1===qt.keyCount(this.possibleOptions)?(this.isDisabled=!0,this.defaultValue=this.defaultValue||qt.getFirstKey(this.possibleOptions)):this.isDisabled=this.displayDescription.isDisabled,!1},t.prototype.getFirstElementIdSuffix=function(e){for(var t in e)return"_"+t},t.prototype.getPossibleOptions=function(e){var t={};for(var n in e)t[n]={displayText:e[n],isDisabled:void 0};return t},t}(Cn),kn=function(e){function t(t,n,r,i,o){var a=e.call(this,w.dropdown,t,n,r,i,o)||this;return a.defaultValue&&(a.defaultValue=fn.normalizeValueToPossibleValues(a,a.defaultValue)),a}return c(t,e),t}(Tn),xn=function(e){function t(t,n,r,i,o){var a=e.call(this,w.radio,t,n,r,i,o)||this;return a.defaultValue||(a.defaultValue=qt.getFirstKey(a.possibleValues)),a}return c(t,e),t}(Tn),wn=Tn),Rn=function(e){function t(t,n,r,i,o,a){var s=e.call(this,w.textBox,t,n,r,i,o)||this;s.getResolvedLogo=function(){return(s.pidlDocManager&&s.pidlDocManager.getResolvedLogo()||{sourceUrl:null}).sourceUrl},s.placeHolderText=function(){var e=s.displayDescription,t=e.displayPropertyDescription,n=e.displayExample;if(t){if(!s.showDisplayName||t!==s.displayDescription.displayName)return t}else if(n&&n.length>0)return n[0];return null},s.getTextBoxType=function(){var e=s.displayDescription,t=e.inputScope,n=e.maskInput;return t||(!0===n||"password"===s.dataDescription.type?"password":"text")};var l=n.maxLength,u=n.direction,d=n.textAlignment,c=n.displayTransformations;return s.displayTransformations=c,s.maxLength=l,s.direction=u,s.textAlignment=d,s.pidlDocManager=a,s}return c(t,e),t}(Cn),An=function(e){function t(t,n,r,i,o){var a=e.call(this,w.checkBox,t,n,r,i,o)||this;return a.description=n.displayPropertyDescription,a}return c(t,e),t}(Cn),On=function(e){function t(t,n,r,i,o){var a=e.call(this,w.filePicker,t,n,r,i,o)||this;return a.displayContent=n.displayContent,a}return c(t,e),t}(Cn),_n=function(e){function t(t,n,r,i,o,a,s,l){var u=e.call(this,t,n,r,i,o,a)||this;return u.displayContentTemplate=r.displayContent,u.displayContent=Gt.getFormatStringExpressionValue(u.displayContentTemplate,s),l&&(u.id+=l,u.displayId=u.id),u}return c(t,e),t.prototype.updateModelElement=function(e){return this.displayContent=Gt.getFormatStringExpressionValue(this.displayContentTemplate,e),this.pidlAction&&this.pidlAction.context&&this.pidlAction.context.resourceActionContext&&this.pidlAction.context.resourceActionContext.resourceInfo&&this.pidlAction.context.resourceActionContext.resourceInfo.id&&(this.pidlAction.context.resourceActionContext.resourceInfo.id=Gt.getFormatStringExpressionValue(this.pidlAction.context.resourceActionContext.resourceInfo.id,e)),this.pidlAction&&this.pidlAction.context&&this.pidlAction.context.resourceActionContext&&this.pidlAction.context.resourceActionContext.resourceObjPath&&(this.pidlAction.context.resourceActionContext.resource=Gt.getPropertyExpressionValue(this.pidlAction.context.resourceActionContext.resourceObjPath,e)),this.type===w.hyperlink&&this.pidlAction&&qt.isString(this.pidlAction.context)&&(this.pidlAction.context=Gt.getFormatStringExpressionValue(this.pidlAction.context,e)),!1},t}(hn),Fn=function(e){eturn c(t,e),t}(_n),Hn=function(e){function t(t,n,r,i,o,a,s){var l=e.call(this,w.button,t,n,r,i,o,a,s)||this;return l.tooltipText=n.tooltipText,l}return c(t,e),t}(_n),Nn=function(e){function t(t,n,r,i,o,a,s){var l=e.call(this,w.audio,t,n,r,i,o,a,s)||this;return l.audioUrl=Gt.convertBase64strIntoBlobUrl(n.audioUrl,"audio/mp3"),l}return c(t,e),t}(_n),Mn=function(e){function t(t,n,r,i,o,a,s){var l=e.call(this,w.expression,t,n,r,i,o,a,s)||this;return l.expression=n.displayContent,l}return c(t,e),t.prototype.updateModelElement=function(e){return this.displayContent=Gt.getExpressionValue(this.expression,e),!1},t}(_n),Bn=function(e){function t(t,n,r,i,o,a,s,l){var u=e.call(this,t,n,r,i,o,a)||this;return u.sourceUrlTemplate=r.sourceUrl,u.sourceUrl=Gt.getFormatStringExpressionValue(u.sourceUrlTemplate,s),u.accessibilityName=Gt.getFormatStringExpressionValue(u.accessibilityName,s),l&&(u.id+=l,u.displayId=u.id),u}return c(t,e),t}(hn),Vn=function(e){function t(t,n,r,i,o,a,s){var l=e.call(this,t,n,r,i,o,a)||this;return s&&(l.id+=s,l.displayId=l.id),l}return c(t,e),t}(hn),Un=function(e){function t(t,n,r,i,o,a,s){var l=e.call(this,t,n,r,i,o,a)||this;return s&&(l.id+=s,l.displayId=l.id),l}return c(t,e),t}(hn),Ln=function(e){function t(t,n,r,i,o,a,s){var l=e.call(this,w.logo,t,n,r,i,o)||this;return l.getResolvedLogo=function(){return(l.pidlDocManager&&l.pidlDocManager.getResolvedLogo()||{sourceUrl:null}).sourceUrl},l.getAllLogos=function(){return l.pidlDocManager.getAllLogos()},l.sourceUrl=n.sourceUrl,l.pidlDocManager=a,s&&(l.id+=s,l.displayId=l.id),l}return c(t,e),t}(hn),jn=function(e){function t(t,n,r,i,o){var a=e.call(this,w.pidlContainer,t,n,r,i,o)||this;return a.linkedPidlId=n.linkedPidlId,a}return c(t,e),t}(hn),Wn=zn=function(e){function t(t,n,r,i,o,a){var s=e.call(this,w.secureProperty,t,n,r,i,o)||this;s.placeHolderText=function(){var e=s.displayDescription,t=e.displayPropertyDescription,n=e.displayExample;if(t){if(!s.showDisplayName||t!==s.displayDescription.displayName)return t}else if(n&&n.length>0)return n[0];return null},s.getResolvedLogo=function(){return(s.pidlDocManager&&s.pidlDocManager.getResolvedLogo()||{sourceUrl:null}).sourceUrl};var l=n.sourceUrl,u=n.width,d=n.height,c=n.messageTimeout,p=n.frameName,m=n.displayName,f=n.propertyName,h=n.displayLogo;return s.sourceUrl=Kt.createFromTemplate(l),s.width=u,s.height=d,s.messageTimeout=c,s.frameName=p,s.displayName=m,s.propertyName=f,s.displayLogo=h,s.pidlDocManager=a,s}return c(t,e),t.prototype.validate=function(){return this.validationPromise()},t.prototype.prepareForSubmit=function(e){return this.submitPromise(e)},t}(Cn),Gn=function(e){function t(t,n,r,i,o){var a=e.call(this,w.iFrame,t,n,r,i,o)||this,s=n.sourceUrl,l=n.displayContent,u=n.width,d=n.height,c=n.expectedClientActionId,p=n.messageTimeout,m=n.messageTimeoutClientAction,f=n.useAuth,h=n.loadingMessage;return a.sourceUrl=s,a.displayContent=l,a.width=u,a.height=d,a.expectedClientActionId=c,a.messageTimeout=p,a.messageTimeoutClientAction=m,a.useAuth=f,a.loadingMessage=h,a}return c(t,e),t}(_n);function qn(e){return!qt.isNullOrUndefined(e)&&"type"in e}unction Jn(e){return qn(e)&&e.type===w.captcha}function Qn(e){return qn(e)&&e.type===w.page}function Zn(e){return qn(e)&&(e.type===w.dropdown||e.type===w.radio||e.type===w.buttonList)}function Xn(e){return qn(e)&&e.type===w.dropdown}function $n(e){return qn(e)&&e.type===w.pidlContainer}function Yn(e){return qn(e)&&e.type===w.button}function er(e){return qn(e)&&e.type===w.checkBox}function tr(e){return qn(e)&&e.type===w.group}function nr(e){return qn(e)&&e.type===w.textBox}function rr(e){return qn(e)&&e.type===w.radio}function ir(e){return qn(e)&&e.type===w.secureProperty}ar ar=Object.freeze({__proto__:null,ModelElement:hn,ContainerElement:yn,GenericGroupElement:gn,GroupElement:vn,DataCollectionBindingGroupElement:Pn,CaptchaContainerElement:bn,GenericCaptchaElement:In,CaptchaElement:En,PageElement:Sn,TextGroupElement:Dn,PropertyElement:Cn,SelectionElement:Tn,DropdownElement:kn,RadioElement:xn,ButtonListElement:wn,TextBoxElement:Rn,CheckBoxElement:An,FilePickerElement:On,GenericTextElement:_n,TextElement:Fn,ButtonElement:Hn,AudioElement:Nn,ExpressionElement:Mn,ImageElement:Bn,SeparatorElement:Vn,SpinnerElement:Un,LogoElement:Ln,PidlContainer:jn,SecurePropertyInitializations:Wn,SecurePropertyElement:zn,IFrameElement:Gn,isModelElement:qn,isContainerElement:Kn,isCaptchaElement:Jn,isPageElement:Qn,isSelectionElement:Zn,isDropdownElement:Xn,isPrefillDropdownElement:function(e){return Xn(e)&&e.displayType===st.prefillControl},isPidlContainerElement:$n,isImageElement:function(e){return qn(e)&&e.type===w.image},isLogoElement:function(e){return qn(e)&&e.type===w.logo},isButtonElement:Yn,isFilePickerElement:function(e){return qn(e)&&e.type===w.filePicker},isCheckBoxElement:er,isPrefilledCheckBoxElement:function(e){return er(e)&&e.displayType===st.prefillControl},isPageOrGroupOrDataCollectionBindingGroup:function(e){return qn(e)&&(e.type===w.page||e.type===w.group||e.type===w.dataCollectionBindingGroup)},isGroupElement:tr,isTextGroupElement:function(e){return qn(e)&&e.type===w.textGroup},isTextBoxElement:nr,isButtonListElement:function(e){return qn(e)&&e.type===w.buttonList},isRadioElement:rr,isTextElement:function(e){var t=[w.heading,w.subheading,w.text,w.hyperlink];return qn(e)&&qt.contains(t,e.type)},isDataCollectionBindingGroup:function(e){return qn(e)&&e.type===w.dataCollectionBindingGroup},isExpressionElement:function(e){return qn(e)&&e.type===w.expression},isIFrameElement:function(e){return qn(e)&&e.type===w.iFrame},isSecurePropertyElement:ir,isSeparatorElement:function(e){return qn(e)&&e.type===w.separator},isAudioElement:function(e){return qn(e)&&e.type===w.audio},isPropertyElement:or}),sr=lr=function(e,t,n,r,i){var o=this;if(this.possibleValues=[],this.index=-1,this.associatedModelDataProperties=null,this.pidlIdentity=null,this.getPossibleOptions=function(){for(var e={},t=0;t<o.possibleValues.length;t++)e[t]={displayText:o.possibleValues[t].value};return e},this.getIndex=function(){return o.index},this.setIndex=function(e){o.index=e;var t=o.possibleValues[o.index];if(t)for(var n=t.objectId,r=0;r<o.associatedModelDataProperties.length;r++)o.associatedModelDataProperties[r].setCurrentObjectId(n)},this.pidlIdentity=e,this.associatedModelDataProperties=r,this.possibleValues=[],i)for(var a=0;a<i.length;a++){var s=i[a];this.possibleValues.push(new sr(s,t))}for(var l=0;l<n.objectIds.length;l++){var u=n.objectIds[l];if(u!==t){for(var d=[],c=0;c<this.associatedModelDataProperties.length;c++){var p=this.associatedModelDataProperties[c];p.setCurrentObjectId(u);var m=p.getValue();m&&d.push(m),p.setCurrentObjectId(t)}this.possibleValues.push(new sr(Gt.getStringValue(d),u))}}},ur=function(e){this.modelDataProperties=[],this.pageIndex=e,this.allPropertyOnSamePage=!0,this.modelDataProperties=[]},dr=function(){this.currentObjectId=null,this.objectIds=[],this.currentObjectId=null,this.objectIds=[]},cr="pidlddc_object_id",pr=function(e){var t=this;this.prefillData=null,this.defaultInstanceId=null,this.multiPropertySelectors={},this.modelDataProperties={},this.pidlIdentityPrefillObjectMapping={},this.pidlDocInfos={},this.addId=function(e){if(qt.isArray(e))for(var n=0;n<e.length;n++)t.addId(e[n]);else if(qt.isObject(e))for(var r in e.pidlddc_object_id||(e.pidlddc_object_id=Gt.guid()),e)r!==cr&&t.addId(e[r])},this.getPropertyInstancesInternal=function(e,n,r){if(qt.isArray(n))for(var i=0;i<n.length;i++)t.getPropertyInstancesInternal(e,n[i],r);else if(qt.isObject(n)){var o=e.getPropertyName();for(var a in n){if(a===o){var s=n.pidlddc_object_id;s||(s=t.pidlIdentityPrefillObjectMapping[e.pidlIdentity]&&t.pidlIdentityPrefillObjectMapping[e.pidlIdentity].currentObjectId?t.pidlIdentityPrefillObjectMapping[e.pidlIdentity].currentObjectId:t.defaultInstanceId);var l=n[o];Xn(e)&&(l=fn.normalizeValueToPossibleValues(e,n[o])),r[s]=l}t.getPropertyInstancesInternal(e,n[a],r)}}},this.getPropertyInstances=function(e,n){var r={};return n&&t.getPropertyInstancesInternal(e,n,r),r},this.parsePrefillData=function(e){var n=t.getPropertyInstances(e,t.prefillData);if(t.modelDataProperties[e.getPropertyName()].setInstances(n),qt.keyCount(n)>0){var r=t.pidlIdentityPrefillObjectMapping[e.pidlIdentity];for(var i in r||(r=new dr,t.pidlIdentityPrefillObjectMapping[e.pidlIdentity]=r),n)qt.contains(r.objectIds,i)||r.objectIds.push(i);r.currentObjectId=r.objectIds[0]}},this.createPidlInfos=function(e,n){var r=n.pidlInfos[e.pidlIdentity];r||(r=new ur(n.pageIndex),n.pidlInfos[e.pidlIdentity]=r),r.pageIndex!==n.pageIndex&&(r.allPropertyOnSamePage=!1);var i=t.modelDataProperties[e.getPropertyName()];i&&r.modelDataProperties.push(i)},this.getPidlInfos=function(e){for(var n={},r=0;r<e.length;r++)fn.propertiesVisitorProcessingDataProperty(e[r].children,t.createPidlInfos,{pageIndex:r,pidlInfos:n});t.pidlDocInfos=n},this.getDefaultSelectionStrings=function(e,t,n){if(e&&t){var r=t.getIdentityString(e),i=r+"_"+se.prefillDropdownDefault,o=r+"_"+se.prefillDropdownNew,a=(n||{})[i],s=(n||{})[o];if(a&&s){var l=[];return l.push(a),l.push(s),l}}},this.createMultiPropertySelectors=function(e,n,r,i){var o=fn.findPrefillControlElement(e),a=!1;for(var s in t.pidlDocInfos){var l,u=t.pidlDocInfos[s],d=t.pidlIdentityPrefillObjectMapping[s],c=o&&u.allPropertyOnSamePage&&s===o.pidlIdentity;if(d&&d.objectIds&&u.modelDataProperties)if(c&&o.type===w.checkBox)d.objectIds.length>1&&i.error(new Tt.unexpectedError(kt.unexpectedPrefillDataCount,[s,"1",d.objectIds.length.toString()])),l=new lr(s,t.defaultInstanceId,d,u.modelDataProperties),t.multiPropertySelectors[s]=l,a=!0;else if(c&&o.type===w.dropdown&&d.objectIds.length>1){var p=t.getDefaultSelectionStrings(s,r,n);l=new lr(s,t.defaultInstanceId,d,u.modelDataProperties,p),t.multiPropertySelectors[s]=l}else for(var m=0;m<u.modelDataProperties.length;m++)u.modelDataProperties[m].setDefaultObjectAsCurrent()}return a},this.getPidlInfoMatch=function(e){for(var n in t.pidlDocInfos)for(var r=t.pidlDocInfos[n].modelDataProperties,i=0;i<r.length;i++)if(e[r[i].propertyName])return t.pidlDocInfos[n]},this.fillPrefillData=function(){for(var e=0;e<t.prefillData.length;e++){var n=t.prefillData[e],r=t.getPidlInfoMatch(n);if(r)for(var i=0;i<r.modelDataProperties.length;i++){var o=r.modelDataProperties[i].propertyName;n[o]=n[o]?n[o]:""}}},this.getPropertyValueInternal=function(e,n,r){if(n){if(void 0===r)if(qt.isArray(n))for(var i=0;i<n.length;i++)r=r||t.getPropertyValueInternal(e,n[i],r);else if(qt.isObject(n)||n.hasOwnProperty(e))for(var o in n)e===o?r=n[o]:void 0===r&&(r=t.getPropertyValueInternal(e,n[o],r));return r}},this.reset=function(){t.prefillData=null,t.multiPropertySelectors={},t.modelDataProperties={},t.pidlIdentityPrefillObjectMapping={},t.pidlDocInfos={}},this.parse=function(e,n,r,i,o,a){var s=!1;return t.prefillData=e,t.addId(t.prefillData),t.multiPropertySelectors={},t.modelDataProperties=r,t.getPidlInfos(n),t.prefillData&&(t.fillPrefillData(),fn.propertiesVisitorProcessingDataProperty(n,t.parsePrefillData),s=t.createMultiPropertySelectors(n,i,o,a)),{multiPropertySelectors:t.multiPropertySelectors,editable:s}},this.getPropertyValue=function(e){if(t.prefillData)return t.getPropertyValueInternal(e,t.prefillData)},this.testHookGetParsePrefillDataFunc=function(){return t.parsePrefillData},this.defaultInstanceId=e},mr=function(e,t,n,r){var i=this;this.objectId=null,this.defaultObjectId=null,this.objectIdValuesMapping={},this.propertyName=null,this.modelElement=null,this.editState=null,this.setCurrentObjectId=function(e){i.objectId=e},this.setDefaultObjectAsCurrent=function(){var e=null;for(e in i.objectIdValuesMapping)if(e!==i.defaultObjectId)break;var t=null;e&&(t=i.objectIdValuesMapping[e]),i.objectIdValuesMapping[i.defaultObjectId]=t,i.objectId=i.defaultObjectId},this.setValue=function(e){var t=!1;return!e&&i.modelElement&&i.modelElement.hidden()&&i.modelElement.defaultValue&&(e=i.modelElement.defaultValue),i.objectId!==i.defaultObjectId&&e!==i.objectIdValuesMapping[i.objectId]&&(i.objectId=i.defaultObjectId,t=!0),i.objectIdValuesMapping[i.objectId]=e,t},this.getValue=function(e,t){var n=i.objectIdValuesMapping[i.objectId];if(Zn(i.modelElement)&&qt.isObject(i.modelElement.possibleOptions)){if(!i.modelElement.possibleOptions[n])return fn.normalizeValueToPossibleValues(i.modelElement,n);if(e&&t&&n&&i.modelElement.possibleOptions[n].pidlAction)return i.modelElement.possibleOptions[n].pidlAction.context}return n},this.isEditable=function(e){return(i.objectId===i.defaultObjectId||e)&&(!i.modelElement||!i.modelElement.disabled())},this.setInstances=this.propertyName=e,this.modelElement=r,this.editState=ue.clean,this.objectId=t,this.defaultObjectId=t,this.objectIdValuesMapping=n},fr=function(e){var t=this;this.inputPrefillDataManager=null,this.multiPropertySelectors={},this.modelDataProperties={},this.inputInstance=null,this.pidlDocManager=null,this.dataStore=null,this.resourceResponse=null,this.getInstancePropertyValue=function(e,n,r){if(qt.isArray(n)){for(var i=0;i<n.length;i++)if(t.getInstancePropertyValue(e,n[i],r))return!0}else if(qt.isObject(n))for(var o in n){if(o===e)return r[e]=n[e],!0;if(t.getInstancePropertyValue(e,n[o],r))return!0}},this.getDisplayPropertyValueInternal=function(e){var n=t.displayData&&t.displayData.details&&t.displayData.details[e];if(n)return n;var r=t.modelDataProperties[e];if(r){var i=r.modelElement;if(i&&i.possibleOptions){var o=r.getValue(),a=i.possibleOptions[o];if(a)return a.displayText}}},this.maskPropertyValueFlagExists=function(e){var n=t.modelDataProperties[e];return n&&n.modelElement&&n.modelElement.maskDisplay},this.mergeUserDataInternal=function(e,n){var r=e.getPropertyName();if(n.userData.hasOwnProperty(r)){var i=n.userData[r],o=t.getMaskedPropertyValue(r);if(!o||i!==o){var a=t.modelDataProperties[r];i!==a.getValue(!1)&&n.conflictingInputValueReporter&&n.conflictingInputValueReporter(r),a.setValue(i)}}},this.updateModelElement=function(e){var n=e.getPropertyName(),r=t.modelDataProperties[n];r||(t.populateInternal(e),r=t.modelDataProperties[n]);var i=r.modelElement;if(i&&e.pidlIdentity!==i.pidlIdentity){r.modelElement=e;var o=t.multiPropertySelectors[i.pidlIdentity];o&&(t.multiPropertySelectors[e.pidlIdentity]=o,o.pidlIdentity=e.pidlIdentity,delete t.multiPropertySelectors[i.pidlIdentity])}},this.populateInternal=function(e){var n={},r=e.getPropertyName();t.modelDataProperties[r]||(n[t.defaultInstanceId]=e.defaultValue,t.modelDataProperties[r]=new mr(r,t.defaultInstanceId,n,e))},this.getPropertyInternal=function(e,n,r){var i=!0,o=null,a=t.modelDataProperties[e];return a?(o=a.getValue(n,r),i=a.isEditable(t.editablePrefillData)):o=t.inputInstance&&t.inputInstance.hasOwnProperty(e)?t.inputInstance[e]:t.inputPrefillDataManager.getPropertyValue(e),{value:o,editable:i,propertyName:e}},this.setJumpbackData=function(e){if(e)for(var n in t.modelDataProperties)e.hasOwnProperty(n)&&t.modelDataProperties[n].setValue(e[n])},this.removeClientAction=function(e){if(e){var t=qt.deepCopy(e);return delete t.clientAction,t}return e},this.setPrefillData=function(e,n,r,i){if(e.elements&&n){var o=t.inputPrefillDataManager.parse(n,e.elements,t.modelDataProperties,r,e.pidlDocManager,i);t.multiPropertySelectors=o.multiPropertySelectors,t.editablePrefillData=o.editable,t.setPrefillDataInPartnerDataSource(n)}},this.setPrefillDataInPartnerDataSource=function(e){var n=t.getPartnerData()||{};n.prefillData=e,t.setPartnerData(n)},this.setInputParametersInPartnerDataSource=function(e){var n=t.getPartnerData()||{};n.inputParameters=e,t.setPartnerData(n)},this.setDisplayData=function(e){t.displayData=e},this.updateUserData=function(e){t.setJumpbackData(e)},this.mergeUserData=function(e,n,r){n&&e&&e.elements&&fn.propertiesVisitorProcessingDataProperty(e.elements,t.mergeUserDataInternal,{userData:n,conflictingInputValueReporter:r})},this.updateModelElements=this.getPropertyValue=function(e,n,r){var i=t.getPropertyInternal(e,n,r);if(i)return i.value},this.getProperty=function(e){return t.getPropertyInternal(e)},this.getPropertyModelElement=this.getDisplayPropertyValue=function(e){return t.getDisplayPropertyValueInternal(e)},this.getMaskedPropertyValue=function(e){return t.maskPropertyValueFlagExists(e)&&t.displayData&&t.displayData.details&&t.displayData.details[e]},this.clearMaskedPropertyValue=function(e){t.maskPropertyValueFlagExists(e)&&t.displayData&&t.displayData.details&&t.displayData.details[e]&&(t.displayData.details[e]=null)},this.getModelDataProperty=function(e){return t.modelDataProperties[e]},this.setMultiPropertySelectorIndex=this.getMultiPropertySelectorIndex=function(e){var n=t.multiPropertySelectors[e];if(n)return n.getIndex()},this.getMultiPropertySelectorPossibleOptions=function(e){var n=t.multiPropertySelectors[e];if(n)return n.getPossibleOptions()},this.getId=function(){return t.inputInstance?t.inputInstance.hasOwnProperty("id")?t.inputInstance.id:void 0:t.inputPrefillDataManager.getPropertyValue("id")},this.setDataSource=this.getDataSource=function(e){return t.dataStore.readDataSource(e)},this.getAllDataSources=function(){return t.dataStore.readAllDataSources()},this.setPartnerData=function(e){t.dataStore.savePartnerData(e)},this.getPartnerData=function(){return t.dataStore.readPartnerData()},this.cacheFlow=function(){var e=t.pidlDocManager.getPidlIdentity();return e&&t.dataStore.saveModelData(zt.createIdentityHash(e),t.modelDataProperties),e},this.clearFlow=function(){t.displayData=null,t.modelDataProperties={},t.multiPropertySelectors={},t.inputInstance=null,t.inputPrefillDataManager.reset()},this.clearAll=function(){t.dataStore.clear(),t.resourceResponse=null,t.clearFlow()},this.clearDataSourceCache=function(){t.dataStore.clearDataSourceCache()},this.populate=function(e){fn.propertiesVisitorProcessingDataProperty(e,t.populateInternal)},this.getModelDataProperties=function(e){var n={properties:{}};return fn.propertiesVisitorProcessingDataProperty(e,(function(e,n){var r=e.getPropertyName(),i=t.modelDataProperties[r];i&&(n.properties[r]=i)}),n),n.properties},this.setInputInstance=function(e,n){n&&(fn.propertiesVisitorProcessingDataProperty(e,(function(e,n){var r={},i=e.getPropertyName();t.getInstancePropertyValue(i,n.inputInstanceDetails,r)&&t.modelDataProperties[i].setValue(r[i])}),{inputInstanceDetails:n}),t.inputInstance=n)},this.setPrimaryResourceResponse=function(e,n){var r=[];n&&n.length&&n.forEach((),t.resourceResponse={primary:t.removeClientAction(e),secondary:r}},this.retrieveFromCache=function(e,n){if(e=e||t.pidlDocManager.getPidlIdentity()){var r=t.dataStore.readModelData(zt.createIdentityHash(e));if(n)for(var i=0;i<n.length;i++)r.hasOwnProperty(n[i])&&delete r[n[i]];if(r)return t.setJumpbackData(r),!0}},this.getPrimaryResourceResponseId=this.getResourceResponse=function(){return t.resourceResponse},this.testHookSetMultiPropertySelectors=function(e){t.multiPropertySelectors=e},this.testHookGetMultiPropertySelectors=function(){return t.multiPropertySelectors},this.testHookSetModelDataProperties=function(e){t.modelDataProperties=e},this.testHookGetModelDataProperties=function(){return t.modelDataProperties},this.testHookGetDefaultInstanceId=function(){return t.defaultInstanceId},this.testHookGetDisplayData=function(){return t.displayData},this.testHookSetInputPrefillDataManager=function(e){t.inputPrefillDataManager=e},this.testHookSetEditablePrefillData=function(e){t.editablePrefillData=e},this.displayData=null,this.defaultInstanceId=Gt.guid(),this.inputPrefillDataManager=new pr(this.defaultInstanceId),this.multiPropertySelectors={},this.pidlDocManager=e,this.dataStore=new pn},hr=new function(){this.luhn=function(e){for(var t=0,n=!1,r=e.length-1;r>=0;r--){var i=parseInt(e.charAt(r));n&&(i*=2)>9&&(i-=9),t+=i,n=!n}return t%10===0}},yr=new function(){this.aggregateCommerceResults=function(e,t){return e.length?new Promise((function(n,r){var i=[],o=0,a=function(){if(++o===e.length){var r=i.length?i[0].error:null;r=i.length&&t?t(r):r,n({innerErrors:i,error:r})}};e.forEach((function(e){e.then(().catch((function(e){i.push({error:new Tt.unexpectedError(e)}),a()}))}))})):$t({innerErrors:[]})}},gr=new function(){var e=this;this.validateUserInputDataFromService=function(e,t,n,r,i,o){var a=Kt.buildUrl(Ye.getServiceEndpoint(Ye.virtualEndpoints.validation.endpoint),[o]),s={value:r,propertyName:n};t&&(s.urlValidationType=t);var l=JSON.stringify(s),u=ln.getDefaultHttpHeaders(e);return u[J.msFlight]="pxpidl",new Promise((function(t,r){ln.post(e,!0,a,u,l,(function(e){var r=qt.equalsIgnoreCase(e.status,I.Passed)?null:new Tt.propertyValidationFailedError(kt.propertyValidationFailed,e.errorCode,n,[n,e.errorCode]);t({error:r})}),(function(e){t({error:new Tt.propertyValidationFailedError(kt.propertyValidationFailed,G.empty,n,[n,G.empty])})}),i,Ye.virtualEndpoints.validation.operation,Ye.virtualEndpoints.validation.description,!0).catch(Zt)}))},this.validateUserInputDataInternal=function(t,n,r,i,o){var a=n.data_description,s=[];for(var l in a){var u=a[l];if(Ht(u)){var d=u&&u.length&&u[0];d&&(s=s.concat(e.validateUserInputDataInternal(t,d,r[l],i,o)))}else{if(u.displayOnly||i===tt.update&&!u.is_updatable)continue;var c=null;if(o){var p=o.getModelDataProperty(l);p&&(c=p.modelElement)}s.push(e.validatePropertyFromPropertyDescription(t,c,jt.getPropertyValueFromInputData(r,l),i,l,u))}}return s},this.validatePropertyFromPropertyDescription=function(t,n,r,i,o,a){var s=I.Passed,l=null,u=null;if((null===n||void 0===n?void 0:n.type)===w.secureProperty)u=n.validate().then((function(e){return e?{error:new Tt.propertyValidationFailedError(kt.propertyValidationFailed,e,a.display_property||o,[a.display_property||o,e])}:{error:null}}));else if(r){if(a.validation||a.validations)for(var d=null==a.validations?[a.validation]:a.validations,c=0;c<d.length&&s===I.Passed;c++)switch(d[c].validationType){case nt.regex:var p=new RegExp(d[c].regex);n&&n.type&&n.type===w.filePicker?r&&r.name&&!1===p.test(r.name)&&(s=I.Fail,l=d[c].error_code):!1===p.test(r)&&(s=I.Fail);break;case nt.function:hr[d[c].function]&&hr[d[c].function](r)||(s=I.Fail,l=d[c].error_code);break;case nt.service:u=e.validateUserInputDataFromService(t,d[c].urlValidationType,o,r,i,d[c].url);break;case nt.size:var m=d[c].maxFileSize;n&&n.type&&n.type===w.filePicker&&r&&r.size&&r.size>m&&(s=I.Fail,l=d[c].error_code)}}else a.is_optional||(s=I.Fail,l=G.empty);return u||(u=$t({error:s===I.Passed?null:new Tt.propertyValidationFailedError(kt.propertyValidationFailed,l,a.display_property||o,[a.display_property||o,l])})),u},this.validateUserInputData=function(t,n,r,i,o){var a=e.validateUserInputDataInternal(t,n,r,i,o);return yr.aggregateCommerceResults(a)},this.validateUserInputProperty=function(t,n,r,i){var o=e.validatePropertyFromPropertyDescription(t,n,r,i,n.getPropertyName(),n.dataDescription);return yr.aggregateCommerceResults([o])}},vr=function(e,t){var n=this;this.shouldValidateProperty=function(e,t){if(n.alwaysValidateOnChange)return!0;var r=e.editState,i=e.modelElement;if(!i||i.type!==w.textBox&&i.type!==w.dropdown&&i.type!==w.checkBox&&i.type!==w.secureProperty)return r===ue.clean?""!==e.getValue():t===de.editing||t===de.finished;switch(r){case ue.clean:return!1;case ue.editing:return t===de.finished;case ue.dirty:return!0}},this.shouldValidatePropertyInPageValidation=function(e,t){return t!==z.dirtyOnly||e===ue.dirty},this.getUpdatedPropertyState=function(e,t){var n=e.editState,r=e.modelElement;if(!r||r.type!==w.textBox&&r.type!==w.dropdown&&r.type!==w.checkBox&&r.type!==w.secureProperty)return n===ue.clean&&""!==e.getValue()?ue.dirty:null;switch(n){case ue.clean:return t===de.editing?ue.editing:null;case ue.editing:return t===de.finished?ue.dirty:null;case ue.dirty:return null}},this.validatePropertyValue=function(e,t){return gr.validateUserInputProperty(n.eventHub,e.modelElement,e.getValue(),t)},this.validatePageElements=function(e,t,r,i){var o=[];for(var a in e){var s=e[a];n.shouldValidatePropertyInPageValidation(s.editState,t)&&o.push(n.validatePropertyValue(s,r).then((function(t){var n=t.error;if(n){var r=e[n.propertyName];if(r){var o=r.modelElement;(or(o)||ir(o))&&(n.message=o.getErrorMessage(r.getValue(),n.errorCode)),r.editState=ue.dirty,i.push(n)}}})).catch((function(){return Zt})))}return o},this.validateProperty=function(e,t,r){var i=n.shouldValidateProperty(e,t),o=n.getUpdatedPropertyState(e,t);return o&&(e.editState=o),new Promise((function(o,a){i?n.validatePropertyValue(e,r).then((function(r){var i=r.error;if(i){var a=e.modelElement;(or(a)||ir(a))&&(i.message=a.getErrorMessage(e.getValue(),i.errorCode)),n.eventHub.error(i,t)}else n.eventHub.propertyValidated(e.propertyName,t);o()})).catch((function(){return Zt})):o()}))},this.clearElementEditState=this.validatePage=function(e,t,r){return t===z.all&&n.eventHub.inputValidating(),e?new Promise((function(i,o){var a=[],s=n.validatePageElements(e,t,r,a);Promise.all(s).then((function(){if(a.length){var e=new Tt.formValidationFailedError(t===z.all?kt.formValidationFailed:kt.editedPropertiesValidationFailed,"",a,[""]);n.eventHub.error(e),o(e)}else i(),t===z.all&&n.eventHub.inputValidated()}),(function(){o()}))})):(t===z.all&&n.eventHub.inputValidated(),$t())},this.eventHub=e,this.alwaysValidateOnChange=t},Pr=new function(){var e=this;this.getCryptoSubtleInstance=this.isSupported=function(){return e.getCryptoSubtleInstance()}},br={name:"HMAC",hash:{name:"SHA-256"}},Ir=function(){var e=this;this.init=function(){var t=Pr.getCryptoSubtleInstance();return t?new Promise((function(n,r){t.generateKey(br,!0,["sign"]).then((function(r){e.hmacKey=r,t.exportKey("raw",e.hmacKey).then((function(t){var r={};try{e.rawKey=btoa(String.fromCharCode.apply(null,new Uint8Array(t)))}catch(i){r.error=new Tt.unexpectedError(kt.hmacError,[i&&i.message])}n(r)}),(function(e){n({error:new Tt.unexpectedError(kt.hmacError,[e&&e.message])})}))}),(function(e){n({error:new Tt.unexpectedError(kt.hmacError,[e&&e.message])})}))})):$t({error:new Tt.unexpectedError(kt.hmacError,["Failed to Init hmac"])})},this.getRawKey=function(){return e.rawKey},this.sign=function(t){var n=Pr.getCryptoSubtleInstance();return n&&e.hmacKey?new Promise((function(r,i){for(var o=new Uint8Array(t.length),a=0;a<t.length;a++)o[a]=t.charCodeAt(a);n.sign(br,e.hmacKey,o).then((function(e){var t=null;try{var n=new Uint8Array(e);t=btoa(String.fromCharCode.apply(null,n))}catch(i){r({error:new Tt.unexpectedError(kt.hmacError,[i&&i.message])})}r({data:t})}),(function(e){r({error:new Tt.unexpectedError(kt.hmacError,[e&&e.message])})}))})):$t({error:new Tt.unexpectedError(kt.hmacError,["hmac not initialized"])})},this.testHookGetHmacAlgo=function(){return br},this.testHookSetHmacKey=function(t){e.hmacKey=t},this.hmacKey=null,this.rawKey=null},Er=new function(){var e=this;this.doServerTokenization=function(e,t,n,r,i){return new Promise((function(o,a){var s=i?Ye.virtualEndpoints.tokenizationEdge:Ye.virtualEndpoints.tokenization,l=Kt.buildUrl(Ye.getServiceEndpoint(s.endpoint),[t,"getToken"]);return ln.post(e,!0,l,ln.getDefaultHttpHeaders(e),'{ "data": "'+n+'" }',(function(e){o({data:e.data})}),(function(e){(e=e||{status:I.Fail}).failureObject=e.failureObject||{},e.failureObject.code=j.tokenizationFailed;var t=" ";if(qt.isString(n))for(var r=0;r<n.length;r++){var i=n.charCodeAt(r);t+=i>=48&&i<=57?"d":"c"}else t=" n_s";e.failureObject.message=e.failureObject.message?e.failureObject.message+t:t,o({error:new Tt.serverError(kt.tokenizationFailed,l,e.failureObject,e.httpStatus,e.httpStatusText,void 0,[e.errorMessage+t])})}),r,s.operation,s.description).catch((function(e){o({error:new Tt.unexpectedError(kt.tokenizationFailed,[e.message])})}))}))},this.serverTokenization=function(t,n,r,i,o,a){return r.propertyTokenizing(n,Kt.buildUrl(Ye.getServiceEndpoint(Ye.virtualEndpoints.tokenization.endpoint),[t.token_set,"getToken"])),e.doServerTokenization(r,t.token_set,i[n],o,a).then((function(e){return e.error||(i[n]=e.data,r.propertyTokenized(n)),{error:e.error}}))},this.doFileUpload=function(e,t,n,r,i){var o=n.hmacContext;return new Promise((function(n,a){var s=Ye.virtualEndpoints.payeeTaxProfile;return ln.post(e,!0,i,ln.getPayeeFileUploadHttpHeaders(e,o.userCredential),t,(,(function(e){(e=e||{status:I.Fail}).failureObject=e.failureObject||{},e.failureObject.code=j.fileUploadFailed,n({error:new Tt.serverError(kt.fileUploadFailure,i,e.failureObject,e.httpStatus,e.httpStatusText,void 0,[e.errorMessage])})}),r,s.operation,s.description).catch((function(e){n({error:new Tt.unexpectedError(kt.fileUploadFailure,[e.message])})}))}))},this.composePayeeFileUploadPayload=function(e,t){var n=new FormData;return n.append("file",e[t]),n.append("payeeid",e.payee_id),n.append("taxprofileid",e.tax_profile_id),n},this.fileUpload=function(t,n,r,i,o,a,s){var l=e.composePayeeFileUploadPayload(i,n),u=Kt.createFromTemplate(s);return r.fileUploading(n,u),e.doFileUpload(r,l,o,a,u).then((function(e){return e.error||(i[n]=e.data,r.fileUploaded(n)),{error:e.error}}))},this.msrCryptoEncryption=function(e,t,n,r){var i,o,a,s;n.propertyTokenizing(t,"");var l=e&&e.dataProtection&&e.dataProtection.parameters;if("undefined"!==typeof msrCrypto||l&&!l.encryptionLibrary)o=$t();else{a=l&&l.encryptionLibrary||void 0;var u=l&&l.encryptionLibraryUrl||Kt.buildUrl(Ye.getServiceEndpoint(Ye.virtualEndpoints.msrCryptoJS.endpoint),[a]);o=ln.loadScript(u)}if("undefined"!==typeof encryption)i=$t();else{s=l&&l.encryptionScript||void 0;var d=l&&l.encryptionScriptUrl||Kt.buildUrl(Ye.getServiceEndpoint(Ye.virtualEndpoints.encryptJS.endpoint),[s]);i=ln.loadScript(d)}return o.then((function(){return i.then((function(){return"undefined"===typeof encryption?{error:new Tt.unexpectedError(kt.msrEncryptionFailed,["Fail to initialize "+s+" instance"])}:new Promise((function(i,o){encryption.Encrypt(e,r[t],(function(e){r[t]=e,n.propertyTokenized(t),i({})}),(function(e){o(e)}))})).catch((function(e){var t="Encryption failure: "+JSON.stringify(e);return{error:new Tt.serverError(kt.msrEncryptionFailed,null,null,null,t,null,[t])}}))})).catch((function(e){var t="Fail to download "+s+" script file: "+JSON.stringify(e);return{error:new Tt.serverError(kt.msrEncryptionFailed,null,null,null,t,null,[t])}}))})).catch((function(e){var t="Fail to download "+a+" script file: "+JSON.stringify(e);return{error:new Tt.serverError(kt.msrEncryptionFailed,null,null,null,t,null,[t])}}))},this.payPalHECEncryption=function(e,t,n,r,i){var o;if(n.propertyTokenizing(t,""),"undefined"!==typeof PayPalCrypto)o=$t();else{var a=e&&e.dataProtection&&e.dataProtection.parameters,s=a&&a.encryptionScriptUrl;if(!s){var l=a&&a.encryptionScript||"paypalEncrypt.js";s=Kt.buildUrl(Ye.getServiceEndpoint(Ye.virtualEndpoints.paypalEncryptJS.endpoint),[l])}o=ln.loadScript(s)}var u=e;return o.then((function(){return"undefined"===typeof PayPalCrypto?{error:new Tt.unexpectedError(kt.hmacError,["Fail to initialize PayPal encryption instance"])}:new Promise((function(e,o){PayPalCrypto.Encrypt(u,i,r[t],(function(i){r[t]=btoa(String.fromCharCode.apply(null,i)),n.propertyTokenized(t),e({})}))}))})).catch((function(e){var t="Fail to download paypal encryption script file\n "+JSON.stringify(e);return{error:new Tt.serverError(kt.tokenizationFailed,null,null,null,t,null,[t])}}))},this.customEncryption=function(t,n,r,i,o,a,s){r.propertyTokenizing(n,"");var l=t;return new Promise((function(t,s){return f(e,void 0,void 0,(function(){var e;return h(this,(function(s){switch(s.label){case 0:return[4,a.encrypt(l,o,i[n])];case 1:return e=s.sent(),i[n]=e,r.propertyTokenized(n),t({}),[2]}}))}))})).catch((function(e){var t="".concat(s,"\n").concat(JSON.stringify(e));return{error:new Tt.serverError(kt.tokenizationFailed,null,null,null,t,null,[t])}}))},this.createHmacSignatureInternal=function(t,n,r,i,o,a,s){return t.init().then((function(l){if(l.error)return{error:l.error};var u=t.getRawKey(),d="Pan:"+o.pan+"|HMACKey:"+u+"|UserCredential:"+o.userCredential,c={keyToken:null,data:null};return e.doServerTokenization(n,Te.token,u,a,s).then((function(e){return e.error?e:(c.keyToken=e.data,t.sign(d))})).then((function(e){return e.error||(c.data=e.data,i[Te.userCredential]=o.userCredential,i[r]={algorithm:Te.algorithm,keyToken:c.keyToken,data:c.data}),{error:e.error}}))}))},this.getHmacSignatureFromSecurePX=function(e,t,n,r){var i=n;return new Promise((function(n,o){i.createHmacSignature("Pan",r).then((function(i){t[Te.userCredential]=r,t[e]=i.value,n({})})).catch((function(e){n({error:new Tt.serverError(kt.hmacError,null,null,null,e.message,null,[e.message])})}))}))},this.createHmacSignature=function(t,n,r,i,o,a){var s=i.hmacContext;return Pr.isSupported()&&s&&s.userCredential?s.panElement&&s.panElement.isSecureProperty()?e.getHmacSignatureFromSecurePX(n,r,s.panElement,s.userCredential):s.pan?e.createHmacSignatureInternal(new Ir,t,n,r,s,o,a):(r[n]=null,$t({})):(r[n]=null,$t({}))},this.tokenizeUserInputDataInternal=function(t,n,r,i,o,a,s){var l=n.data_description,u=o||n.clientContext,d=[];for(var c in l){var p=l[c];if(Ht(p)){var m=p&&p.length&&p[0];if(m){var f=e.tokenizeUserInputDataInternal(t,m,r[c],i,u,a,s);d=y(y([],d,!0),f,!0)}}else{if(p.displayOnly||i===tt.update&&!p.is_updatable)continue;if(p.token_set&&!p.token_set.startsWith(Ve.tokenizationValuePrefix)||p.dataProtection)if(r.hasOwnProperty(c)){var h=p.dataProtection&&p.dataProtection.protection_type&&qt.isString(p.dataProtection.protection_type)&&p.dataProtection.protection_type.toUpperCase(),g=p.token_set&&qt.isString(p.token_set)&&p.token_set.toUpperCase();if("HMACSIGNATURE"===h)d.push(e.createHmacSignature(t,c,r,a,i,p.useEdgeTokenization));else if("MSRENCRYPT"===h)d.push(e.msrCryptoEncryption(p,c,t,r));else if("PAYPALENCRYPTION"===g)s&&s[en.PayPal]?d.push(e.customEncryption(p,c,t,r,u,s[en.PayPal],"HEC Encryption failed.")):d.push(e.payPalHECEncryption(p,c,t,r,u));else if("FILEUPLOAD"===g){var v=a.fileUploadUrls[c];d.push(e.fileUpload(p,c,t,r,a,i,v))}else d.push(e.serverTokenization(p,c,t,r,i,p.useEdgeTokenization))}else p.is_optional||d.push($t({error:new Tt.unexpectedError(kt.tokenizationError,["DataDescription contains a required field '"+c+"' which is missing in the userInputData passed in."])}))}}return d},this.getFileUploadUrlsInDisplayDescription=function(t,n){if(t&&(At(t)&&(n[t.propertyName]=null===t||void 0===t?void 0:t.uploadUrl),Rt(t)&&t.members))for(var r=0;r<t.members.length;r++)e.getFileUploadUrlsInDisplayDescription(t.members[r],n)},this.getFileUploadUrlsInPidlDoc=function(t){var n={};if(t&&t.displayDescription&&t.displayDescription.length)for(var r=0;r<t.displayDescription.length;r++){var i=t.displayDescription[r];e.getFileUploadUrlsInDisplayDescription(i,n)}return n},this.tokenizeUserInputData=function(t,n,r,i,o,a,s){void 0===s&&(s=null);var l={hmacContext:{userCredential:o,pan:r&&r.details&&r.details.accountToken,panElement:s&&s.getPropertyModelElement("accountToken")}};l.fileUploadUrls=e.getFileUploadUrlsInPidlDoc(n);var u=e.tokenizeUserInputDataInternal(t,n,r,i,null,l,a);return yr.aggregateCommerceResults(u,(function(e){return e.code===kt.tokenizationFailed.code?e:new Tt.unexpectedError(kt.tokenizationFailed,[e.message])}))}},Sr=function(){function e(e){var t=this;this.operationType=null,this.pidlDocManager=null,this.operationOptions=null,this.modelData=null,this.showMaskedValues=!1,this.secureFieldOriginOverride=null,this.computedStyles={style:{}},this.secureFieldResolved=!1,this.urls=null,this.userContext=null,this.displaySettings=null,this.stateManager=null,this.view=null,this.eventHub=null,this.hasPidlResolved=!1,this.postMessageTimeoutInMs=200,this.maxRetryPostMessage=5,this.pageIndex=0,this.validator=null,this.currentlyRenderedPidl=null,this.callbacks=null,this.transformers=null,this.serverErrorRetries={},this.suspendedNextAction=null,this.elements=[],this.resources=null,this.getSubmitButton=function(){var e=t.getCurrentPage().children,n=fn.findElement(e,(function(e){if(tr(e)&&e.isSubmitGroup)return!0}));if(!n&&!t.callbacks.submit)return t.eventHub.failure(new Tt.unexpectedError(kt.missingSubmitActionInPidlDoc)),null;if(n){var r=fn.findElement([n],(function(e){for(var t=!1,n=Yn(e)&&e.pidlAction;!t&&n;)t=t||"submit"===n.type||n.type===H.successWithSelectedPidlAction||n.type===H.successWithPidlPayload||n.type===H.success||n.type===H.propertyBindingAction||n.type===H.mergeData,n=n.nextAction;return t}));return Yn(r)&&r}},this.getDataSources=function(e,n,r){var i=[];return(r=r||zt.getDataSourceLinks(t.pidlDocManager.getResolvedOrFirstPidlDoc()))&&r.length&&r.forEach((function(r){for(var o in r)t.modelData.getDataSource(o)||i.push(t.getResourceData(o,r[o],e,n))})),Promise.all(i)},this.populateModelInternal=function(e){t.resources=new dn(t.pidlDocManager);var n=mn.createModelElements(t.pidlDocManager,e);return mn.isErrorObject(n)?n.error:(n.warnings&&n.warnings.forEach((function(e){t.eventHub.error(e)})),t.elements=n.elements,t.setupSecureFields(),null)},this.populateModel=function(e,n,r,i,o){var a=t.populateModelInternal(e);if(a)return t.eventHub.pageRendering(void 0),t.eventHub.failure(a),Yt(a);t.eventHub.pageRendering(fn.getDefaultSuccessPidlPayload(t.elements,t.eventHub)),t.modelData.populate(t.elements),i&&t.modelData.retrieveFromCache(i,o);var s=[];return n&&(r?s.push(t.transformResourceInstance(t.elements,n).then((function(){t.modelData.setInputInstance(t.elements,n),fn.updateModelElements(t.elements,{modelData:t.modelData},t.eventHub)}))):t.modelData.setPrefillData(t,n,t.resources.constants,t.eventHub)),t.modelData.setPrefillDataInPartnerDataSource(n),s.push(t.getDataSources(e,{modelData:t.modelData}).then((function(){fn.updateModelElements(t.elements,{modelData:t.modelData},t.eventHub)}))),Promise.all(s).then(()},this.populateModelOnInternalCallback=function(e){var n=t.populateModelInternal(e);if(n)return t.eventHub.failure(n),n;t.modelData.updateModelElements(t.elements),fn.updateModelElements(t.elements,{modelData:t.modelData},t.eventHub),t.setupSecureFields(),t.eventHub.modelUpdated(!1)},this.setupSecureFields=this.setupSecureFieldsRecursive=function(e){if(e){var n=e.children;n&&n.forEach((function(e){if(null===e||void 0===e?void 0:e.isSecureProperty()){var n=e;n&&(n.validationPromise=function(){return t.postSecureFieldMessage(n.frameName,Be.validate,"")},n.submitPromise=function(e){return t.postSecureFieldMessage(n.frameName,Be.prepareForSubmit,{tokenSet:e})},n.createHmacSignature=function(e,r){return t.postSecureFieldMessage(n.frameName,Be.createHmacSignature,{tokenSet:e,userCredentials:r})},n.setFocus=}else(null===e||void 0===e?void 0:e.type)===w.group&&t.setupSecureFieldsRecursive(e)}))}},this.privateEventHandler=function(e,n){switch(e){case B.success:n&&n.operationType&&(n.operationType===tt.add||n.operationType===tt.update)&&t.pidlDocManager.clearCurrentPIDLResource();break;case B.failure:case B.gohome:t.clearAll()}},this.handleSuccess=function(e,n){t.pidlDocManager.clearCache(),e&&zt.isPrimaryResource(t.pidlDocManager.getResolvedOrFirstPidlDoc())&&t.modelData.setPrimaryResourceResponse(e,n);var r=e&&e.clientAction;if(r)return t.handleClientAction(r,e);var i=(t.pidlDocManager.getNextPidlRef()||{href:null}).href;if(!i)return t.eventHub.success(t.createSuccessEventPayload()),$t();var o=Kt.getRestMethodUrl(i,t.userContext,null,{modelData:t.modelData});t.pidlDocManager.downloadPidlDoc(t.eventHub,o,ln.getHttpHeaders(t.eventHub,t.userContext,null,i,{modelData:t.modelData})).then((function(e){return e&&e.type?t.handleClientAction(e):t.populate()}),(function(e){return t.eventHub.failure(Gt.createServerError(kt.pidlDocDownloadFailed,o.url,e,[e.errorMessage])),Yt(e)}))},this.createSuccessEventPayload=function(){var e=t.modelData.getResourceResponse(),n={id:t.modelData.getPrimaryResourceResponseId(),operationType:t.operationType,response:e&&e.primary};return e&&e.secondary&&e.secondary.length&&(n.secondaryResponses=e.secondary),n},this.handleServerError=function(e,n,r){var i=e.targettedInnerErrors,o=void 0===i?[]:i,a=e.clientAction;if(o.length||a){var s=$t();return a&&(s=t.doErrorNextClientAction(new Tt.serverError(kt.formSubmitFailed,n,e.jsonResponse,e.status,e.statusText,e.responseText,[e.errorMessage]),e.clientAction)),s.then((function(){var n=[],i="";o.forEach((function(e){e.message===ce.empty&&(e.message="");var o=qt.isString(e.target)?e.target.split(","):[];o=zt.translateErrorTargetsToDisplayProperties(o,r);var a=fn.getParentIfSame(t.elements,o),s=a&&a.children&&a.children.length===o.length&&a.layoutOrientation===lt.inline?a.displayId:null;Gt.createPropertyErrors(o,s,fn.findFirstMatchingProperty(t.elements,o),e,n),i||o.length||(i=e.message)}));var a=e.innerError,s=a&&a.message!==ce.empty?e.innerError.message:i;return t.clearElementEditStates(),t.handleRetryableError(new Tt.formValidationFailedError(kt.formSubmissionFailedBadUserInput,s,n,[s]),!0)}))}return Yt(new Tt.serverError(kt.formSubmitFailed,n,e.jsonResponse,e.status,e.statusText,e.responseText,[e.errorMessage]))},this.handleRetryableError=function(e,n){var r=$t(),i=e.errors;if(i&&i.length){var o=n?-1:t.pageIndex;e.errors.forEach((function(e){var n=e,r=t.getPropertyPageIndex(n.propertyName);o=-1===o||r>=0&&r<o?r:o})),o>=0&&(o<t.pageIndex||n)&&(r=t.moveToPageIndex(o))}return r.then((function(){return t.eventHub.error(e),{error:e}}))},this.clearFlow=function(){var e=t.modelData.cacheFlow();return t.modelData.clearFlow(),t.elements=[],t.resources={},t.pageIndex=0,t.pidlDocManager.reset(),t.showMaskedValues=!1,t.currentlyRenderedPidl=null,t.serverErrorRetries={},e},this.clearAll=this.clearElementEditStates=function(){t.elements.forEach((function(e){var n=t.modelData.getModelDataProperties([e]);for(var r in n)t.validator.clearElementEditState(n[r])}))},this.handleRestartFlow=function(){var e=t.pageIndex,n=t.getCurrentPage()||{};return t.clearFlow(),t.pidlDocManager.setToLastDownloadedPidlDoc(t.eventHub),t.populate(null,!0,e,n)},this.handleRenderPidlClientAction=function(e,n,r){if(n)for(var i in n)n.hasOwnProperty(i)&&"object"===typeof n[i]&&"details"!==i&&delete n[i];var o=t.pageIndex,a=t.getCurrentPage(),s=t.clearFlow(),l=$t();if(Ht(e.context))t.pidlDocManager.setPidlDoc(t.eventHub,e.context);else if(Vt(e.context)){var u=e.context.resourceActionContext,d=Gt.getPidlOperationType(u.action);t.pidlDocManager.setOperationInfo({operationType:d}),l=t.downloadPidlDocument(Kt.getPidlDocUrl(t.userContext,d,u.pidlDocInfo),u.pidlDocInfo)}return l.then((function(){return t.populate(n,r,o,a,e.pidlRetainUserInput?s:void 0,qt.isString(e.pidlUserInputToClear)?e.pidlUserInputToClear.split(","):e.pidlUserInputToClear).then((function(){if(e.pidlError){var n=t.pidlDocManager.getResolvedOrFirstPidlDoc(),r=Gt.parseServerError(void 0,void 0,n&&n.strings&&n.strings.serverErrorCodes,{status:I.Error,failureObject:e.pidlError},t.serverErrorRetries);return t.handleServerError(r,void 0,n).then((function(){return $t()}))}}))}))},this.handleRenderPidlPageClientAction=function(e,n,r){if(n)for(var i in n)n.hasOwnProperty(i)&&"object"===typeof n[i]&&"details"!==i&&delete n[i];if(e.context&&Ht(e.context)&&e.context.length>0){var o=e.context[0],a=mn.createModelElementsFromDisplayDescriptions(o.displayDescription,t.operationType,null,null,o,t.pidlDocManager).elements;if(a&&a.length>0)return t.modelData.updateModelElements(a),t.elements.splice(t.pageIndex+1,0,a[0]),t.moveNextPage().then((function(){return t.eventHub.renderedPidlPage(),$t()}))}},this.handleRenderModalClientAction=function(e,n,r){if(n)for(var i in n)n.hasOwnProperty(i)&&"object"===typeof n[i]&&"details"!==i&&delete n[i];if(e.context&&Ht(e.context)&&e.context.length>0){var o=e.context[0],a=mn.createModelElementsFromDisplayDescriptions(o.displayDescription,t.operationType,null,null,o,t.pidlDocManager).elements;if(a&&a.length>0){t.modelData.updateModelElements(a);var s=t.getCurrentPage();if(s&&s.children&&s.children.length>0){var l=s.children[s.children.length-1];tr(l)&&l.isModalGroup&&s.children.pop()}s.children=y(y([],s.children,!0),a[0].children,!0),t.eventHub.modelUpdated(!1)}}},this.setViewHandler=function(e){t.view=e},this.getLinkActionUrl=function(e,n,r){void 0===r&&(r=null);var i,o=e,a=t.urls,s=a.success,l=a.failure;if(o&&o.noCallbackParams){if(o&&o.baseUrl&&(i=Kt.createFromTemplate(o.baseUrl)),i)return i;n&&t.eventHub.failure(new Tt.unexpectedError(kt.noRedirectUrlToNavigate))}else if(s&&l){var u=s,d=l;if(o&&o.baseUrl)i=Kt.createFromTemplate(o.baseUrl),u=Kt.addQueryStringParameters(u,o.successParams),d=Kt.addQueryStringParameters(d,o.failureParams);else if(qt.isString(e)){i=Kt.createFromTemplate(e);var c=t.modelData.getPrimaryResourceResponseId();c&&(u=Kt.addQueryParameter(u,"id",c),u=Jt.additionalRedirectParams(u,r))}if(i)return i+="?ru="+(u=encodeURIComponent(u))+"&rx="+(d=encodeURIComponent(d));n&&t.eventHub.failure(new Tt.unexpectedError(kt.noRedirectUrlToNavigate))}else if(n){var p=s?"urls.failure":"urls.success";t.eventHub.failure(new Tt.inputParameterValidationFailedError(kt.inputParameterMissing,p,[p]))}},this.handleSecureFieldMessage=function(e,n){if(e&&e.data&&e.data.source&&e.data.source===Ve.secureFieldMessageSource&&e.data.event){var r,i,o;switch(t.eventHub.secureFieldEventReceived(e.data.field,e.data.event,e.data.correlationId),e.data.event){case Me.loaded:t.loadedSecureFields.includes(e.data.field)||t.loadedSecureFields.push(e.data.field),r=t.modelData.getModelDataProperty(e.data.field);var a=t.getSecurePropertyInitializationPayload(r);t.guaranteedPostMessage(e.data.field,t.buildMessage(Be.init,a),0),t.hasPidlResolved?t.guaranteedPostMessage(e.data.field,t.buildMessage(Be.hydrateState,""),0):t.guaranteedPostMessage(e.data.field,t.buildMessage(Be.clearState,""),0);var s=r.modelElement.getResolvedLogo(),l="";s&&"accountToken"===e.data.field&&t.hasPidlResolved&&(l="background-image: url(".concat(s,"); background-repeat: no-repeat; background-position: right center; ")),l&&t.guaranteedPostMessage(e.data.field,t.buildMessage(Be.applyCss,l),0);var u=r.modelElement.placeHolderText();u&&t.guaranteedPostMessage(e.data.field,t.buildMessage(Be.applyPlaceholder,u),0);break;case Me.initCompleted:t.queuedIFrameLoadedPromises.forEach((),t.queuedIFrameLoadedPromises=t.queuedIFrameLoadedPromises.filter(();break;case Me.keyPropertyResolved:if(t.hasPidlResolved=!0,t.secureFieldResolved=!0,r=t.modelData.getModelDataProperty(e.data.field),i=t.updatePropertyValue(r.modelElement,e.data.payload,de.finished,!1).then((function(){var n=t.getSecurePropertyInitializationPayload(r);t.guaranteedPostMessage(e.data.field,t.buildMessage(Be.init,n),0);var i=r.modelElement.getResolvedLogo(),o="";i&&(o="background-image: url(".concat(i,"); background-repeat: no-repeat; background-position: right center; ")),o&&t.guaranteedPostMessage(e.data.field,t.buildMessage(Be.applyCss,o),0),t.updatePropertyValue(r.modelElement,e.data.payload,de.finished,!1).catch(();var a=r.modelElement.placeHolderText();a&&t.guaranteedPostMessage(e.data.field,t.buildMessage(Be.applyPlaceholder,a),0);var s=t.modelData.getModelDataProperty("cvvToken");return n=t.getSecurePropertyInitializationPayload(s),t.guaranteedPostMessage("cvvToken",t.buildMessage(Be.init,n),0),t.updatePropertyValue(s.modelElement,"",de.finished,!1)})).catch((),n)return i;break;case Me.valueUpdated:var d=e.data.payload.editState,c=e.data.payload.operationType;if((r=t.modelData.getModelDataProperty(e.data.field)).editState=d,i=t.updatePropertyValue(r.modelElement,"",c,!1),n)return i;break;case Me.readyForSubmit:if(o=t.queuedSecureFieldPromises.find((function(t){return t.id===e.data.correlationId}))){if(e.data.payload.error)return void t.eventHub.failure(new Tt.unexpectedError(kt.tokenizationFailed,[e.data.payload.error]));var p={value:e.data.payload.value,propertyName:e.data.field};o.resolve(p)}else t.eventHub.failure(new Tt.unexpectedError(kt.secureFieldPromiseNotFound));break;case Me.validationCompleted:(o=t.queuedSecureFieldPromises.find((function(t){return t.id===e.data.correlationId})))?o.resolve(e.data.payload):t.eventHub.failure(new Tt.unexpectedError(kt.secureFieldPromiseNotFound));break;case Me.hmacSignatureCreated:if(o=t.queuedSecureFieldPromises.find(()){if(e.data.payload.error)return void t.eventHub.failure(new Tt.unexpectedError(kt.hmacError,[e.data.payload.error]));p={value:e.data.payload.value,propertyName:e.data.field};o.resolve(p)}else t.eventHub.failure(new Tt.unexpectedError(kt.secureFieldPromiseNotFound));break;default:var m=new Tt.unexpectedError(kt.unmatchedSecureFieldEvent,[e.data.event]);t.eventHub.failure(m)}}else{var f=new Tt.unexpectedError(kt.unexpectedSecureFieldMessage);t.eventHub.failure(f)}},this.handleClientAction=function(e,n,r){var i;switch(t.eventHub.clientActionInvoked(null===e||void 0===e?void 0:e.type,{originator:r}),e.type){case it.None:t.eventHub.success(t.createSuccessEventPayload());break;case it.Redirect:var o=t.getLinkActionUrl(e.context,!0,n);if(o){var a=t.pageIndex,s=t.getCurrentPage()||{};if(e.redirectPidl)return t.eventHub.navigate("",o,!0,e.context,null),t.clearFlow(),t.pidlDocManager.setPidlDoc(t.eventHub,e.redirectPidl),t.populate(n,!0,a,s);t.eventHub.navigate("",o,!0,e.context,null)||(t.eventHub.redirecting(o),Wt.getRedirectionService().redirect(o)),t.clearFlow()}break;case it.Pidl:return t.handleRenderPidlClientAction(e,n,!0);case it.ReturnContext:e.context?t.eventHub.success(e.context):(i=new Tt.unexpectedError(kt.invalidReturnContextPidl),t.eventHub.failure(i));break;case it.GoHome:t.eventHub.gohome();break;case it.Failure:var l=Gt.createServerErrorFromIPxServiceError(r===g.iFrameMessageHandler?kt.iFrameReturnedFailure:kt.failureClientActionReturned,e.context);t.eventHub.failure(l);break;case it.PidlModal:t.handleRenderModalClientAction(e,n,!0);break;case it.PidlPage:return t.handleRenderPidlPageClientAction(e,n,!0);case it.MergeData:if(e.context&&e.context.payload){var u=e.context.payload;t.modelData.updateUserData(u),t.eventHub.modelUpdated(!1)}break;case it.RestAction:if(e.context)return t.invokeRestMethod(e.context);default:i=new Tt.unexpectedError(kt.unknownClientActionType,[e.type]),t.eventHub.failure(i)}return i?Yt(i):$t()},this.doErrorNextClientAction=function(e,n){switch(n.type){case it.None:return $t();case it.Pidl:return t.handleRenderPidlClientAction(n,null,!1).then(();default:return Yt(e)}},this.readUserInputData=function(e){void 0===e&&(e=!1);var n=t.view.getPageElementValues();for(var r in n){var i=t.getPropertyModelElement(r),o=n[r];nr(i)&&(!t.showMaskedValues||!i.maskDisplay)&&i.displayTransformations&&i.displayTransformations.forModel&&qt.isString(o)&&(n[r]=Gt.applyDisplayTransformation(i.displayTransformations.forModel,o)||n[r])}var a=e?null:function(e){t.eventHub.conflictingInputValues(e)};t.modelData.mergeUserData(t,n,a)},this.resolveKeyProperty=function(e){for(var n in e){var r=e[n];if(r&&or(r.modelElement)){var i=r.modelElement,o=i.isKeyProperty&&!i.hidden()&&r.getValue();if(o)return t.updateResolvedPidlDoc(o,i,de.finished)}}return $t(!0)},this.validatePage=function(e){var n=t.modelData.getModelDataProperties([t.getCurrentPage()]);return(e===z.all&&t.resolveKeyProperty(n)||$t()).then((function(){return n=t.modelData.getModelDataProperties([t.getCurrentPage()]),t.validator.validatePage(n,e,t.operationType)}))},this.getClientDataProperties=function(){var e={sessionId:Gt.guid()};if(t.operationOptions){var n=t.operationOptions,r=n.sessionId,i=n.riskData;r&&(e.sessionId=r),i&&i.greenId&&(e.greenId=i.greenId)}return e},this.getInputDataFromResponse=function(e,t,n){for(var r in t){var i=t[r];if(i.match&&i.match(new RegExp("^{(.)*}$"))){var o=i.substring(1,i.length-1);if(!n||!n[o])return new Tt.unexpectedError(kt.expectedPayloadValueNotPresentInServerResponse);e[r]=n[o]}else e[r]=i}return null},this.invokeSubmitRequest=function(e,n,r){void 0===r&&(r=!0);var i=t.callbacks.submit,o=t.transformers.submissionSuccessTransformer;if(r&&i&&(zt.isPrimaryResource(e)||!n.url))return new Promise((function(r,o){i(n,{pidlDoc:e},(function(e){r(e)}),(function(r,i){o(Gt.parseCustomSubmitError(r,i,n.url,n.errorCodeExpressions,e&&e.strings&&e.strings.serverErrorCodes,t.serverErrorRetries))}))}));if(!n.url||!n.virtualEndpoint){var a=new Tt.unexpectedError(kt.submitPidlRequestMissingParameters,[n.url?"virtualEndpoint":"url"]);return t.eventHub.failure(a),Yt(a)}return new Promise((function(r,i){Wt.getPidlService().submitPidlDocument(t.eventHub,n,t.operationType,o).then((function(e){r(e)}),(function(r){i(Gt.parseServerError(n.url,n.errorCodeExpressions,e&&e.strings&&e.strings.serverErrorCodes,r,t.serverErrorRetries))}))}))},this.submitValidatedData=function(e,n,r,i,o,a){var s,l=t.modelData.getId();i=i||zt.getSubmitPidlAction(n)||{},o=o||1;var u=i.type!==H.validate,d=1===o?i.context:i["context"+o],c={modelData:t.modelData},p=d&&Kt.getSubmitUrl(t.operationType,t.userContext,d,l,c),m={method:d&&d.method?d.method:Pe.Post,url:p&&p.url,headers:d&&ln.getHttpHeaders(t.eventHub,t.userContext,d&&d.headers,p&&p.template,c),errorCodeExpressions:d&&d.errorCodeExpressions,virtualEndpoint:p&&p.virtualEndpoint},f=$t();if(d&&d.payload){var h={},y=t.getInputDataFromResponse(h,d.payload,a);if(y)return void e.reject(y);m.data=h}else{m.data=r;var g=Er.tokenizeUserInputData(t.eventHub,n,m.data,t.operationType,t.userContext.getUserCredential(),null===(s=t.callbacks)||void 0===s?void 0:s.encryptionHandler,t.modelData);f=new Promise((function(r,i){g.then((function(o){var a=o.error;if(a){if(Tt.isServerError(a)&&a.code===kt.tokenizationFailed.code&&400===a.status){var s=Gt.parseServerError(a.url,void 0,n&&n.strings&&n.strings.serverErrorCodes,{status:I.Error,errorMessage:a.debugMessage,httpStatus:a.status,httpStatusText:a.statusText,failureObject:a.innererror},t.serverErrorRetries);return t.handleServerError(s,a.url,n).then((function(t){e.resolve(t)})).catch(e.reject)}i(a)}else r()})).catch((function(e){return i(e)}))}))}f.then((function(){t.invokeSubmitRequest(n,m,u).then((function(a){o++,i["context"+o]?t.submitValidatedData(e,n,r,i,o,a):e.resolve({data:a})}),(function(r){return t.handleServerError(r,m.url,n).then((function(t){e.resolve(t)})).catch(e.reject)}))}),(function(t){e.reject(new Tt.serverError(kt.tokenizationFailed,null,t,null,null,null,[(t||{}).message]))}))},this.scopeDownPidlDocAndUserInput=function(e,t,n){if(e&&e.type===H.validate&&e.context&&e.context.propertyName){var r=e.context.propertyName;n=jt.getPropertyValueFromInputData(n,r);var i=p(p({},t),{data_description:{}}),o=jt.getPropertiesFromDataDescription(t.data_description,r);xt(o)?i.data_description[r]=o:i.data_description=o,t=i}return{pidlDocument:t,userInputData:n}},this.validatePidlArray=function(e,n,r,i,o){var a=y([n],r.map((),!0),s=[],l=null,u=a.map((function(n){var r=e.createUserInputData(n,t.modelData,i,t.operationType,!0);return gr.validateUserInputData(t.eventHub,n,r,t.operationType,t.modelData).then((function(e){var n=e.innerErrors;n&&n.length&&n.forEach((function(e){var n=t.createFormValidationError(e.error);Tt.isUnexpectedError(n)?l=n:s.push(n)}))}))}));return new Promise((function(e,t){Promise.all(u).then((function(){l?t(l):s.length>0?t(s):e()}),(function(e){var n=(e||{}).message;t(new Tt.formValidationFailedError(kt.formValidationFailed,n,[e],[n]))}))}))},this.getResolvedOrFirstPidlDoc=function(e,t){return 1!==e.length&&t&&jt.getFirstResolvedPidlDocument(e,t)||e[0]},this.createFormValidationError=function(e){var n=e.propertyName,r=e.errorCode,i=e.debugMessage;if(n){var o=t.modelData.getModelDataProperty(n);if(o){o.editState=ue.dirty;var a=fn.findPropertyElement(t.elements,n);return a&&(e.message=a.getErrorMessage(t.getPropertyValue(n),r)),e}return new Tt.unexpectedError(kt.validationFailedForNonUserInputProperty,[n,r,i])}},this.validateAndTransformUserInputPidlData=function(e,n,r,i,o,a,s){return e.createUserSecureInputData(n[0],t.modelData,r,t.operationType,!0).then((function(l){var u=e.createUserInputData(n[0],t.modelData,r,t.operationType,!0);u.details&&l?u.details=Gt.extend({},u.details,l):u&&l&&(u=Gt.extend({},u,l));var d=t.getResolvedOrFirstPidlDoc(n,u);if(o&&!e.canSubmitUserInputData(d,u))return $t({});var c=t.scopeDownPidlDocAndUserInput(i,d,u),p=c.pidlDocument,m=c.userInputData;return d=p,u=m,new Promise((function(n,r){var o=[];return gr.validateUserInputData(t.eventHub,d,u,t.operationType,t.modelData).then((function(e){var n=e.innerErrors;n&&n.length&&n.forEach((function(e){var n=t.createFormValidationError(e);n&&(Tt.isUnexpectedError(n)?r(n):o.push(n))}))})).then((function(){if(!o.length)return e.transformUserInputData(d,t.eventHub,u,t.operationType).then((function(){return s({resolve:n,reject:r},d,u,i)}),(function(e){var t=e&&e.message;r(new Tt.formValidationFailedError(kt.propertyTransformationFailed,t,[e],[t]))}));a("",o).then((function(e){n(e)})).catch(r)}),(function(e){var t=e||{},n=t.message;r(new Tt.formValidationFailedError(kt.formValidationFailed,n,[t],[n]))}))}))}))},this.handleRetryableValidationErrorsOnSubmit=function(e,n){return t.handleRetryableError(new Tt.formValidationFailedError(kt.formValidationFailed,e,n,[e]))},this.tokenizeUserInputData=function(e,n,r){var i;return Er.tokenizeUserInputData(t.eventHub,n,r,t.operationType,t.userContext.getUserCredential(),null===(i=t.callbacks)||void 0===i?void 0:i.encryptionHandler,t.modelData).then((function(t){var n=t.error;n?e.reject(n):e.resolve({data:r})})).catch((function(t){return e.reject(t)}))},this.submitLinkedPidlArray=function(e,n,r,i,o){return new Promise((function(a,s){if(i||e&&0!==e.length){n.pending=e.length+(i?1:0);var l=u=Wt.getCommerceService();i&&t.validateAndTransformUserInputPidlData(u,i,r,o,!1,t.handleRetryableValidationErrorsOnSubmit,t.submitValidatedData).then((function(e){e&&e.error?n.validationError=e.error:n.baseSuccessResponse=e&&e.data?e.data:e,l()}),(function(e){zt.ignoreTerminatingError(i)||(n.baseFailure=e),l()})),e.forEach((function(e){var i=t.pidlDocManager.getLinkedPidl(zt.createIdentityHash(e.linkedPidlId));t.validateAndTransformUserInputPidlData(u,[i],r,zt.getSubmitPidlAction(i),!0,t.handleRetryableValidationErrorsOnSubmit,t.submitValidatedData).then((function(e){n.linkedResponses.push(e),l()}),(function(e){zt.ignoreTerminatingError([i])||n.failures.push(e),l()}))}))}else a()}))},this.validateAndSubmitUserInputData=function(e){t.readUserInputData();var n=t.getClientDataProperties(),r=Wt.getCommerceService(),i={failures:[],pending:0,baseFailure:null,baseSuccessResponse:null,linkedResponses:[]};if(!t.stateManager.canApiStart(me.modelSubmitForm).result)return $t({result:i});t.eventHub.submitting(),t.stateManager.setState(le.submitting);var o=t.pidlDocManager.getResolvedOrAllPidlDocs(),a=r.getPidlSubmitOrder(o[0]);return new Promise((function(s,l){e.type===H.validate&&(a.beforeBase=[],a.withBase=[],a.afterBase=[]),t.validatePidlArray(r,o[0],a.beforeBase.concat(a.withBase,a.afterBase),n,e).then((function(){return t.submitLinkedPidlArray(a.beforeBase,i,n).then((function(){if(!(0!==i.failures.length||i.linkedResponses&&i.linkedResponses.length&&i.linkedResponses.some((function(e){return e.error}))))return t.submitLinkedPidlArray(a.withBase,i,n,o,e).then((function(){if(0===i.failures.length&&!i.baseFailure)return t.submitLinkedPidlArray(a.afterBase,i,n).then((function(){s()}));s()}));s()}))}),(function(e){if(!Tt.isUnexpectedError(e))return t.handleRetryableValidationErrorsOnSubmit("",Array.isArray(e)?y([],e,!0):[e]).then(();i.failures.push(e),s()})).catch(()})).then((function(){return t.stateManager.setState(le.executing),t.eventHub.submitted(),{result:i,basePidls:o}}))},this.transformResourceInstance=function(e,n){return Promise.all(t.transformResourceInstanceInternal(e,Wt.getCommerceService(),n)).then(Zt,Zt)},this.transformResourceInstanceInternal=function(e,n,r){var i=[];return e.forEach((function(e){if(or(e)&&e.supportsDisplayTransformation){var o=e&&e.isLinkedPidl&&e.pidlIdentity?[t.pidlDocManager.getLinkedPidl(e.pidlIdentity)]:t.pidlDocManager.getResolvedOrAllPidlDocs();i=y(y([],i,!0),[n.transformUserInputPropertyForDisplay(o,t.eventHub,e.getPropertyName(),r,t.operationType)],!1)}e.children&&e.children.length&&(i=y(y([],i,!0),t.transformResourceInstanceInternal(e.children,n,r),!0))})),i},this.updateResolvedPidlDoc=function(e,n,r){return new Promise((function(i,o){t.pidlDocManager.resolvePidlDoc(t.eventHub,t.getPropertyValue,e,n,r).then((function(e){if(e){var n=t.pidlDocManager.getResolvedOrFirstPidlDoc();t.currentlyRenderedPidl&&t.currentlyRenderedPidl.identity&&n&&n.identity&&qt.objectEquals(t.currentlyRenderedPidl.identity,n.identity)&&i(!1),n&&zt.isPrimaryResource(n)&&t.eventHub.updateTelemetryContext(n.identity),t.readUserInputData(!0),t.populateModelOnInternalCallback(t.operationType),t.currentlyRenderedPidl=n}i(e)})).catch(()}))},this.updatePropertyValueInternal=function(e,n,r){var i=t.modelData.getModelDataProperty(e.getPropertyName());return i?(i.setValue(n)&&t.setCurrentDataIndex(e.pidlIdentity,-1),t.sendResourceSelectedEventInternal(i,r),t.validator.validateProperty(i,r,t.operationType)):$t()},this.sendResourceSelectedEventInternal=function(e,n){t.operationType===tt.selectInstance&&n!==de.finished&&t.eventHub.resourceSelected(e.propertyName,e.getValue(!0,!0))},this.getPropertyPageIndex=function(e){var n=-1;return t.elements.some((function(t,r){if(t.children&&fn.findPropertyElement(t.children,e))return n=r,!0})),n},this.navigateToPageIndex=function(e){fn.updateModelElements(t.elements,{modelData:t.modelData});var n=t.pageIndex,r=t.getCurrentPage()||{};t.pageIndex=e;var i=t.getCurrentPage()||{};t.eventHub.pageNavigated(n,r.displayId,r.displayName,t.pageIndex,i.displayId,i.displayName,i.containerDescription)},this.isMaskedValue=function(e,n,r,i){return e&&e.maskDisplay&&i&&r===de.finished&&n===t.modelData.getMaskedPropertyValue(e.getPropertyName())},this.downloadPidlDocument=function(e,n,r){var i=ln.getHttpHeaders(t.eventHub,t.userContext,null,e.template,null);if(n.anonymousPidl){var o=i[J.msFlight];(!o||o.indexOf("pxpidl")<0)&&(i[J.msFlight]=o?o+",pxpidl":"pxpidl")}return t.pidlDocManager.downloadPidlDoc(t.eventHub,e,i,n,r).then((,(function(n){var r;r=n.connectivityError?kt.connectivityError:kt.pidlDocDownloadFailed;var i=Gt.createServerError(r,e.url,n,[n.errorMessage]);return t.eventHub.failure(i),Yt(i)}))},this.populate=function(e,n,r,i,o,a){if(t.pageIndex=0,t.pidlDocManager.isEmpty()){t.eventHub.pageRendering(void 0);var s=new Tt.unexpectedError(kt.noPidlDocumentInPopulateRequest);return t.eventHub.failure(s),Yt(s)}return t.populateModel(t.operationType,e,n,o,a).then((function(){i=i||{};var e=t.getCurrentPage()||{};t.stateManager&&t.stateManager.setState(le.executing),t.eventHub.pageRendered(r,i.displayId,i.displayName,t.pageIndex,e.displayId,e.displayName,e.containerDescription);var n=t.modelData.getModelDataProperties([t.getCurrentPage()]);return t.resolveKeyProperty(n).then((function(){return $t()}))}))},this.updatePropertyValue=function(e,n,r,i){if(i){if(t.isMaskedValue(e,n,r,i))return $t();t.modelData.clearMaskedPropertyValue(e.getPropertyName())}var o=return(e&&e.isKeyProperty&&(e.resolutionPolicy!==ct.focusout||r===de.finished)?t.updateResolvedPidlDoc(n,e,r):$t(!0)).then(o,o).then(()},this.sendSelectionChangeEvent=function(e,n){if(Zn(e)&&(t.eventHub.selectionChanged(e.getPropertyName(),e.displayId,n),e.possibleOptions&&e.possibleOptions[n]&&e.possibleOptions[n].pidlAction&&e.possibleOptions[n].pidlAction.type===H.partnerAction)){var r=qt.deepCopy(e.possibleOptions[n].pidlAction.context);t.eventHub.partnerAction(e.id,r)}},this.sendResourceSelectedEvent=function(e,n){var r=t.modelData.getModelDataProperty(e);r&&t.sendResourceSelectedEventInternal(r,n)},this.getPropertyValue=function(e){return t.modelData.getPropertyValue(e)},this.getPropertyModelElement=function(e){return t.modelData.getPropertyModelElement(e)},this.setCurrentDataIndex=this.getCurrentDataIndex=function(e){return t.modelData.getMultiPropertySelectorIndex(e)},this.getCurrentPage=this.getCurrentPageId=function(){return t.elements.length>t.pageIndex?t.elements[t.pageIndex].displayId:null},this.getCaptchaType=function(){var e=t.modelData.getPropertyValue(ve.captchaType);return e||null},this.validateEditedProperties=function(){return t.validatePage(z.dirtyOnly)},this.moveToLastPage=function(){var e=t.elements.length-1;return t.readUserInputData(),t.navigateToPageIndex(e),$t()},this.moveNextPage=function(){var e=t.pageIndex+1;return e>=t.elements.length?(t.eventHub.failure(new Tt.unexpectedError(kt.cannotMoveToNextPageAsOnLastPage)),$t()):(t.readUserInputData(),t.validatePage(z.all).then((function(){var n=Wt.getCommerceService(),r=n.createUserInputData(t.pidlDocManager.getResolvedOrFirstPidlDoc(),t.modelData,{},t.operationType,!1);return n.getUserDisplayDataPartial(t.eventHub,t.pidlDocManager,r,t.operationType).then(()})))},this.submitPage=function(){return t.readUserInputData(),t.validatePage(z.all).then((function(){var e=Wt.getCommerceService(),n=e.createUserInputData(t.pidlDocManager.getResolvedOrFirstPidlDoc(),t.modelData,{},t.operationType,!1);return e.getUserDisplayDataPartial(t.eventHub,t.pidlDocManager,n,t.operationType).then((function(e){t.modelData.setDisplayData(e)}))}))},this.movePrevPage=this.moveToFirstPage=function(){return t.moveToPageIndex(0)},this.moveToPageIndex=function(e){return t.pageIndex===e||e<0||e>=t.elements.length?(e<0?t.eventHub.failure(new Tt.unexpectedError(kt.cannotMoveToPrevPage)):e>=t.elements.length&&t.eventHub.failure(new Tt.unexpectedError(kt.cannotMoveToPageIndex)),$t()):t.pageIndex>e?(t.readUserInputData(),t.navigateToPageIndex(e),$t()):t.moveNextPage().then(()},this.submitForm=function(e){return t.validateAndSubmitUserInputData(e).then((function(e){var n=e.result,r=e.basePidls;return n.baseFailure?(t.eventHub.failure(n.baseFailure),Yt(n.baseFailure)):n.failures.length>=1?(t.eventHub.failure(n.failures[0]),Yt(n.baseFailure)):n.baseSuccessResponse||zt.ignoreTerminatingError(r)?t.handleSuccess(n.baseSuccessResponse,n.linkedResponses):void 0}))},this.validateForm=function(e){return t.validateAndSubmitUserInputData(e).then((function(n){var r=n.result;if(r.baseFailure||r.failures.length>=1||r.validationError)return r.baseFailure?(t.eventHub.failure(r.baseFailure),Yt(r.baseFailure)):r.failures&&r.failures.length>=1?(t.eventHub.failure(r.failures[0]),Yt(r.baseFailure)):Yt();if(r.baseSuccessResponse){var i=r.baseSuccessResponse&&r.baseSuccessResponse.clientAction;if(i)return i.type===it.MergeData?t.handleClientAction(i,r.baseSuccessResponse).then((function(){return $t()}),(function(e){return Yt(e)})):(e.nextAction&&(t.suspendedNextAction=e.nextAction),t.handleClientAction(i,r.baseSuccessResponse).then((function(){return Yt()}),(function(e){return Yt(e)})))}}))},this.createUserInputData=function(e,n){return t.readUserInputData(),Wt.getCommerceService().createUserInputData(t.pidlDocManager.getResolvedOrFirstPidlDoc(),t.modelData,t.getClientDataProperties(),t.operationType,e,n)},this.returnUserInputData=function(){return t.readUserInputData(),t.validateAndTransformUserInputPidlData(Wt.getCommerceService(),[t.pidlDocManager.getResolvedOrFirstPidlDoc()],t.getClientDataProperties(),null,!1,(function(e,t){return Yt(new Tt.formValidationFailedError(kt.formValidationFailed,e,t,[e]))}),t.tokenizeUserInputData)},this.gohome=this.moveNextOrSubmit=function(){if(t.pageIndex<t.elements.length-1)return t.moveNextPage();var e=t.getSubmitButton();return e&&e.pidlAction?t.invokePidlAction(e.pidlAction).then((function(){return $t()})):(t.eventHub.failure(new Tt.unexpectedError(kt.missingSubmitActionInPidlDoc)),Yt())},this.submitAction=function(){var e=t.getSubmitButton();return e&&e.pidlAction?t.invokePidlAction(e.pidlAction).then((function(){return $t()})):(t.eventHub.failure(new Tt.unexpectedError(kt.missingSubmitActionInPidlDoc)),Yt())},this.movePrevOrCancel=function(){return t.pageIndex>0?t.movePrevPage():(t.gohome(),$t())},this.invokePidlAction=function(e,n){var r=e.type,i=e.nextAction,o=e.context,a=null;return t.eventHub.pidlActionInvoked(r,{nextAction:null===i||void 0===i?void 0:i.type}),new Promise((function(i,s){var l;switch(r){case H.closePidlPage:t.movePrevPage().then((function(){t.elements.splice(t.pageIndex+1,1),i()}),(function(){return s()})),t.eventHub.closePidlPage();break;case H.closeModalDialog:t.eventHub.hideModalDialog();var u=t.getCurrentPage();if(u&&u.children&&u.children.length>0){var d=u.children[u.children.length-1];tr(d)&&d.isModalGroup&&u.children.pop()}i();break;case H.continueSuspendedAction:t.suspendedNextAction?t.invokePidlAction(t.suspendedNextAction,n).then((function(){return i()}),(function(e){return s(e)})):i();break;case H.propertyBindingAction:var c=o.bindingPropertyName,p=o.actionMap,m=t.getPropertyValue(c);qt.isBool(m)&&(m=qt.toString(m)),t.eventHub.propertyValueSelected(c,m);var f=p[m];f?t.invokePidlAction(f,n).then((function(){return i()}),(function(e){return s(e)})):i();break;case H.mergeData:var h=o.payload;t.modelData.updateUserData(h),t.eventHub.modelUpdated(!1),i();break;case H.submit:t.submitForm(e).then((function(){return i()}),(function(e){s(e)}));break;case H.validate:t.validateForm(e).then((function(){return i()}),(function(){return s()}));break;case H.gohome:t.gohome(),i();break;case H.first:t.moveToPageIndex(0).then((function(){return i()}),(function(){return s()}));break;case H.last:t.moveToLastPage().then((function(){return i()}),(function(){return s()}));break;case H.next:t.moveNextPage().then((function(){return i()}),(function(){return s()}));break;case H.prev:t.movePrevPage().then((function(){return i()}),(function(){return s()}));break;case H.moveToPageIndex:var y=o.pageIndex;t.moveToPageIndex(y).then((function(){return i()}),(function(){return s()}));break;case H.restartFlow:t.restartFlow().then((function(){return i()}),(function(){return s()}));break;case H.restAction:o?t.invokeRestMethod(o).then((function(){return i()}),(function(){return s()})):(t.eventHub.error(new Tt.unexpectedError(kt.contextMissingFromPidlAction,[e.type])),s());break;case H.success:n&&n.value?((a=qt.deepCopy(n.value)).operationType=t.operationType,t.eventHub.success(a)):t.eventHub.success(t.createSuccessEventPayload()),i();break;case H.partnerAction:n&&n.value&&(a=qt.deepCopy(n.value),t.eventHub.partnerAction(n.id,a)),i();break;case H.successWithPidlPayload:(a=qt.deepCopy(t.createUserInputData(!0))).operationType=t.operationType,n&&n.value&&(a.additionalData=qt.deepCopy(n.value)),t.eventHub.success(a),i();break;case H.successWithSelectedPidlAction:(a=qt.deepCopy(t.createUserInputData(!0,!0))).operationType=t.operationType,n&&n.value&&(a.additionalData=qt.deepCopy(n.value)),t.eventHub.success(a),i();break;case H.navigateAndNext:var g=t.getLinkActionUrl(o,!0);if(g){var v=Wt.getRedirectionService();!t.eventHub.navigate(n.id,g,!1,null,n.dest)&&v&&v.openInNewTab(g),t.moveNextPage().then((function(){return i()}),(function(){return s()}))}else s();break;case H.navigate:t.eventHub.navigate(n.id,o,!1,null,n.dest,e.dest),i();break;case H.triggerEvent:t.eventHub.triggerEvent(null!==(l=e.context.name)&&void 0!==l?l:"",e.context.params),i();break;case H.redirect:t.eventHub.navigate(n.id,t.getLinkActionUrl(o,!0),!0,o,null),i();break;case H.poll:i();break;case H.updatePollAndMoveLast:t.eventHub.updatePollAndMoveLast(o);break;case H.noAction:i();break;default:t.eventHub.error(new Tt.unexpectedError(kt.unknownActionType,[r])),s()}})).then((function(){return!i||t.invokePidlAction(i,n)}),(function(e){if(e)throw e;return!1}))},this.invokeDefaultPidlAction=function(){var e=fn.getDefaultPidlAction([t.getCurrentPage()],t.eventHub);return e?t.invokePidlAction(e):(t.eventHub.error(new Tt.unexpectedError(kt.defaultActionNotFound)),Yt(!1))},this.invokeRestMethod=function(e){if(!e.href||!e.method){var n=e.href?"method":"href";return t.eventHub.error(new Tt.unexpectedError(kt.restActionPidlActionMissingParameters,[n])),$t()}var r={modelData:t.modelData},i=e&&e.shouldHandleSuccess,o=Kt.getRestMethodUrl(e.href,t.userContext,t.modelData.getId(),r),a={url:o.url,method:e.method,headers:ln.getHttpHeaders(t.eventHub,t.userContext,e.headers,o.template,r),virtualEndpoint:o.virtualEndpoint,errorCodeExpressions:e.errorCodeExpressions,data:qt.serialize(e.payload)};return t.eventHub.restMethodInvoking(o.url,t.operationType),new Promise((function(e,n){Wt.getPidlService().invokeRestMethod(t.eventHub,a,t.operationType).then((function(n){t.eventHub.restMethodInvoked(a.url);var r=n&&n.clientAction;if(r)return t.handleClientAction(r,n);n&&i&&(t.modelData.setPrimaryResourceResponse(n),t.eventHub.success(t.createSuccessEventPayload())),e()}),(function(r){var i=t.pidlDocManager.getResolvedOrFirstPidlDoc();return t.handleServerError(Gt.parseServerError(a.url,a.errorCodeExpressions,i&&i.strings&&i.strings.serverErrorCodes,r),a.url,t.pidlDocManager.getResolvedOrFirstPidlDoc()).then((function(){return e()}),(function(e){return n(e)}))}))})).then(Zt,()},this.getMultiPropertySelectorPossibleOptions=function(e){return t.modelData.getMultiPropertySelectorPossibleOptions(e)},this.restartFlow=function(){return new Promise((function(e,n){t.handleRestartFlow().then((function(){t.modelData.retrieveFromCache()&&t.eventHub.dataUpdated(),e()}),(function(e){return n(e)}))}))},this.refreshData=function(e){var n=!1,r=$t(),i=zt.getDataSourceLinks(t.pidlDocManager.getResolvedOrFirstPidlDoc());return i&&i.length>0&&(t.modelData.clearDataSourceCache(),t.modelData.setPrefillDataInPartnerDataSource(e),r=t.getDataSources(t.operationType,{modelData:t.modelData},i),n=!0),r.then((function(){n&&(t.modelData.clearFlow(),t.modelData.populate(t.elements)),t.modelData.setPrefillData(t,e,t.resources.constants,t.eventHub),fn.updateModelElements(t.elements,{modelData:t.modelData}),n?t.eventHub.modelUpdated(!1):t.eventHub.dataUpdated()}))},this.loadedSecureFields=[],this.queuedSecureFieldPromises=[],this.queuedIFrameLoadedPromises=[],this.userContext=e.userContext,this.eventHub=e.eventHub,this.pidlDocManager=e.pidlDocManager,this.stateManager=e.stateManager,this.displaySettings=e.displaySettings||new Qt({containerId:""}),this.urls=e.urls||{},this.callbacks=e.callbacks||{},this.transformers=e.transformers||{},this.modelData=new fr(this.pidlDocManager),this.eventHub.addPrivateEventHandler(this.privateEventHandler),this.eventHub.registerEventExtender("pageId",this.getCurrentPageId),this.validator=new vr(this.eventHub,this.displaySettings.alwaysValidateOnChange),this.resources=new dn(this.pidlDocManager)}return e.prototype.getResourceData=function(e,t,n,r){var i=this,o=t.href,a=t.method,s=t.headers,l=Kt.getRestMethodUrl(o,this.userContext,this.modelData.getId(),r),u=l.url,d=l.template,c={url:u,method:a,virtualEndpoint:l.virtualEndpoint,pidlOperation:n,headers:ln.getHttpHeaders(this.eventHub,this.userContext,s,d,r)};return new Promise((function(t,n){Wt.getPidlService().getInstance(i.eventHub,c).then((function(n){i.eventHub.instanceDownloaded(),i.modelData.setDataSource(e,n),t()}),(function(e){var t=Gt.createServerError(kt.resourceInstanceDownloadFailed,c.url,e,[e.errorMessage]);i.eventHub.failure(t),n(t)}))}))},e.prototype.postSecureFieldMessage=function(e,t,n,r){var i=this;return new Promise((function(o,a){var s=i.buildMessage(t,n);r&&(s.correlationId=r),i.queuedSecureFieldPromises.push({id:s.correlationId,resolve:o,reject:a}),i.guaranteedPostMessage(e,s,0)}))},e.prototype.postGuaranteedSecureFieldMessage=function(e,t,n,r){var i=this.buildMessage(t,n);r&&(i.correlationId=r),this.guaranteedPostMessage(e,i,0)},e.prototype.queueSecureFieldLoadedPromise=function(e){var t=this;return new Promise(()},e.prototype.buildMessage=function(e,t){return{source:Ve.pidlSdkMessageSource,event:e,payload:t,correlationId:Gt.guid()}},e.prototype.guaranteedPostMessage=function(e,t,n){var r=this;if(!(n>this.maxRetryPostMessage))if(n++,this.loadedSecureFields.includes(e)&&window.frames[e]){var i="https://"+Ye.getServiceEndpoint(Ye.virtualEndpoints.securePx.endpoint);this.secureFieldOriginOverride&&(i=this.secureFieldOriginOverride),window.frames[e].postMessage(t,i),this.eventHub.secureFieldEventPosted(e,t.event,t.correlationId)}else this.eventHub.secureFieldEventQueued(e,t.event,t.correlationId),setTimeout((,this.postMessageTimeoutInMs)},e.prototype.getSecurePropertyInitializationPayload=function(e){var t,n,r,i=null===(t=null===e||void 0===e?void 0:e.modelElement)||void 0===t?void 0:t.dataDescription,o=null===(n=null===e||void 0===e?void 0:e.modelElement)||void 0===n?void 0:n.displayDescription,a=null===o||void 0===o?void 0:o.propertyName,s=null==i.validations?[i.validation]:i.validations;return{maxLength:null===o||void 0===o?void 0:o.maxLength,isOptional:i.is_optional,resolutionPolicy:null===(r=null===e||void 0===e?void 0:e.modelElement)||void 0===r?void 0:r.resolutionPolicy,keyPropertyResolutionMappings:i.keyPropertyResolutionMappings,propertyDataValidations:s,cssStyles:this.computedStyles.style[a],cVHeader:this.eventHub.getHttpRequestCorrelationHeader()}},e.prototype.testHookSetCurrentPage=function(e){this.pageIndex=e},e.prototype.testHookGetCurrentPage=function(){return this.pageIndex},e.prototype.testHookGetValidator=function(){return this.validator},e.prototype.testHookGetModelData=function(){return this.modelData},e.prototype.testHookClearElementEditStates=e.prototype.testHookSetCallbacks=function(e){this.callbacks=e},e.prototype.testHookSetSuspendedNextAction=e}(),Dr=function(e){var t=this;this.getPidlDocumentHook=null,this.originalPidlDocs=[],this.resolvedPidlDocs=[],this.pidlIdentityHashMapping={},this.downloadedPidlDocsByUrl={},this.lastDownloadedPidlDoc=null,this.operationInfo=null,this.currentUrl=null,this.currentHeaders=null,this.logos=[],this.updatePidlDocStore=function(e,n,r){if(t.operationInfo&&t.operationInfo.handle){var i=Wt.getPidlStoreService();if(i){var o=i.get(t.operationInfo.handle);e=e||o&&o.pidls;var a=n[0]&&n[0].identity||o&&o.resolvedPidlIdentity;i.put(t.operationInfo.handle,r||o.pidlDocInfo,e,a)}}},this.getResolvedLogoDescription=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(Ot(r))return r;if(Rt(r)&&r.members){var i=t.getResolvedLogoDescription(r.members);if(i)return i}}},this.getIdentityLessCountry=this.addIdentity=function(e){if(e&&e.identity){var n=zt.createIdentityHash(e.identity),r=t.getIdentityLessCountry(e.identity);t.pidlIdentityHashMapping[n]=r}},this.addLogo=function(e){var n=e.displayDescription;if(n&&qt.isArray(n))for(var r=0;r<n.length;r++){var i=[];zt.getLogoDescriptions(n[r],i);for(var o=0;o<i.length;o++){for(var a=!1,s=0;s<t.logos.length;s++)if(t.logos[s].displayId===i[o].displayId){a=!0;break}a||t.logos.push(i[o])}}},this.checkPidlDoc=function(e){if(e){t.addIdentity(e);var n=e.data_description;for(var r in n){var i=n[r];if(i instanceof Array)for(var o=0;o<i.length;o++)t.checkPidlDoc(i[o])}}},this.isPidlForCurrentOperation=function(e){return!(t.operationInfo&&t.operationInfo.operationType&&e&&e.identity&&e.identity.operation)||qt.equalsIgnoreCase(t.operationInfo.operationType,e.identity.operation)||qt.equalsIgnoreCase(tt.update,e.identity.operation)},this.swapPidlDoc=function(e,n,r){if(t.resetPidlDocs(),n){if(n instanceof Array)for(var i=0;i<n.length;i++)t.checkPidlDoc(n[i]),t.isPidlForCurrentOperation(n[i])&&(t.originalPidlDocs.push(n[i]),t.addLogo(n[i]));else t.checkPidlDoc(n),t.isPidlForCurrentOperation(n)&&(t.originalPidlDocs.push(n),t.addLogo(n));if(1===t.originalPidlDocs.length?t.resolvedPidlDocs=qt.copyArray(t.originalPidlDocs):r&&qt.invokeIf(t.originalPidlDocs,(,(),0===t.resolvedPidlDocs.length){var o=Wt.getCommerceService(),a=zt.createKeyPropertyMap(t.originalPidlDocs,zt.getDefaultPropertyValueGetter()),s=o.getFirstPidlWithValidDefaultKey(t.originalPidlDocs,a);s&&t.resolvedPidlDocs.push(s)}e&&e.pidlResolved("swapPidlDocs",t.resolvedPidlDocs)}},this.resetPidlDocs=function(){t.originalPidlDocs=[],t.resolvedPidlDocs=[],t.pidlIdentityHashMapping={},t.logos=[]},this.getPidlDocument=function(e,n){return e.pidlDownloading(n.url),new Promise((function(r,i){var o=qt.toLowerCase(n.url);if(!t.downloadedPidlDocsByUrl[o])return Wt.getPidlService().getPidlDocument(e,n,t.getPidlDocumentHook).then((,(function(e){i(e)}));r(t.downloadedPidlDocsByUrl[o])}))},this.setPidlDoc=function(e,n,r){t.clearCache(),n instanceof Array||(n=n?[n]:null),t.swapPidlDoc(e,n,r),t.updatePidlDocStore(n,t.resolvedPidlDocs,t.currentPidlDocInfo)},this.setToLastDownloadedPidlDoc=this.downloadPidlDoc=function(e,n,r,i,o){return new Promise((function(a,s){t.getPidlDocument(e,{url:n.url,headers:r,virtualEndpoint:n.virtualEndpoint,pidlOperation:t.operationInfo.operationType}).then((function(s){if(s&&s[0]&&s[0].clientAction)a(s[0].clientAction);else{var l=s;t.currentUrl=n,t.currentHeaders=r,t.currentPidlDocInfo=i||t.currentPidlDocInfo,t.lastDownloadedPidlDoc=l,t.swapPidlDoc(e,l,o),t.updatePidlDocStore(l,t.resolvedPidlDocs,i),a()}}),(function(e){s(e)}))}))},this.retrievePidlDocFromCache=function(e,n,r){return new Promise((function(i,o){var a=Wt.getPidlStoreService().get(n);a&&a.pidls?(t.lastDownloadedPidlDoc=a.pidls,t.swapPidlDoc(e,a.pidls,r),i()):o(kt.invalidCacheEntry)}))},this.shouldDownloadNewPidl=function(e,n,r,i){return!(e instanceof Array&&e.length>=1||!t.currentUrl)&&!(Xn(n)&&n.possibleOptions&&!r)&&n.triggerPidlDownloadOnChange&&(i===de.finished||Xn(n)&&i===de.editing)},this.resolvePidlDoc=function(e,n,r,i,o){var a=Wt.getCommerceService(),s=t.getAllPidlDocs(),l=zt.createKeyPropertyMap(s,zt.getPropertyValueGetter(i.getPropertyName(),r,n));return a.resolveInfoDescriptionId(s,l).then((function(s){if(t.shouldDownloadNewPidl(s,i,r,o)){var u=qt.deepCopy(t.currentUrl.originalParameters);if(Gt.updatePidlDocUrlParams(u.pidlDocInfo,l)){var d=t.currentUrl.recreateUrl(u);return t.downloadPidlDoc(e,d,t.currentHeaders,u.pidlDocInfo).then((function(){return e.pidlDownloaded(),t.resolvePidlDoc(e,n,r,i,o).then((function(){return!0}))}),(function(t){return e.failure(Gt.createServerError(kt.pidlDocDownloadFailed,d.url,t,[t.errorMessage])),!1}))}}else if(!zt.matchPidlIdsToPidls(a,s,t.resolvedPidlDocs)&&(t.resolvedPidlDocs=zt.resolvePidlDocs(t.originalPidlDocs,s),e.pidlResolved("resolvedPidlDocs",t.resolvedPidlDocs),0!==t.resolvedPidlDocs.length))return!0;return!1}))},this.isEmpty=this.getResolvedOrAllPidlDocs=function(){return 0!==t.resolvedPidlDocs.length?t.resolvedPidlDocs:t.originalPidlDocs},this.getResolvedOrFirstPidlDoc=function(){return t.resolvedPidlDocs.length>0?t.resolvedPidlDocs[0]:t.originalPidlDocs.length>0?t.originalPidlDocs[0]:null},this.getAllPidlDocs=function(){return t.originalPidlDocs},this.clearCurrentPIDLResource=function(){t.currentPidlDocInfo&&Wt.getPidlStoreService().removeResourceEntries(t.currentPidlDocInfo.resourceType)},this.getPidlIdentity=this.getAllLogos=function(){return t.logos},this.getResolvedLogo=function(){if(1===t.resolvedPidlDocs.length)return t.getResolvedLogoDescription(t.resolvedPidlDocs[0].displayDescription)},this.getIdentityString=function(e){return e&&e in t.pidlIdentityHashMapping?t.pidlIdentityHashMapping[e]:null},this.reset=this.clearCache=function(){t.downloadedPidlDocsByUrl={}},this.getNextPidlRef=function(){if(t.resolvedPidlDocs[0]&&t.resolvedPidlDocs[0].links)return t.resolvedPidlDocs[0].links.nextPidl},this.getLinkedPidls=this.getLinkedPidl=function(e){var n=t.getLinkedPidls();if(n)for(var r=0;r<n.length;r++)if(zt.createIdentityHash(n[r].identity)===e)return n[r]},this.setOperationInfo=function(e){t.operationInfo=e},this.getOperationHandle=this.testHookGetGetPidlDocumentHook=function(){return t.getPidlDocumentHook},this.testHookGetResolvedPidlDoc=function(){return t.resolvedPidlDocs},this.testHookSetResolvedPidlDocument=function(e){t.resolvedPidlDocs=e instanceof Array?e:[e]},this.testHookSetCurrentUrl=function(e){t.currentUrl=e},this.getPidlDocumentHook=e||null},Cr={addAddress:[le.initialized],selectPaymentInstrument:[le.initialized],addPaymentInstrument:[le.initialized],listAddress:[le.initialized],addResource:[le.initialized],applyResource:[le.initialized],replaceResource:[le.initialized],updateResource:[le.initialized],updateProfile:[le.initialized],selectResource:[le.initialized],selectSingleResource:[le.initialized],selectResourceType:[le.initialized],validateResource:[le.initialized],showResource:[le.initialized],searchResource:[le.initialized],deleteResource:[le.initialized],fundStoredValue:[le.initialized],createPaymentSession:[le.initialized],handleChallenge:[le.initialized],handlePaymentChallenge:[le.initialized],handlePurchaseRiskChallenge:[le.initialized],handlePurchasePendingState:[le.initialized],renderPidlPage:[le.initialized],getPidlPayload:[le.executing],invokePageDefaultAction:[le.executing],invokeResourceAction:[le.initialized,le.executing],moveNextPage:[le.executing],submitPage:[le.submitting,le.executing,le.initialized],movePrevPage:[le.executing],moveToLastPage:[le.executing],moveToFirstPage:[le.executing],refreshData:[le.executing],cancel:[le.initialized,le.executing,le.submitting],modelSubmitForm:[le.executing],handleAction:[le.initialized],getSelectedResource:[le.initialized,le.executing,le.submitting],renderPidlDocument:[le.initialized],postMessageToChildIFrames:[le.executing,le.submitting],profilePrerequisite:[le.initialized],handleCheckout:[le.initialized],getPayeeTaxProfile:[le.initialized],searchTransactions:[le.initialized]},Tr=function(){function e(e){this.state=le.notInitialized,this.eventHub=e;var t=this;this.eventHub.addPrivateEventHandler((function(e,n){t.privateEventHandler(e)}))}return e.prototype.privateEventHandler=function(e){if(this.state!==le.notInitialized)switch(e){case B.success:case B.failure:case B.gohome:this.setState(le.initialized)}},e.prototype.getState=e.prototype.setState=function(e){this.eventHub.stateChanged(this.state,e),this.state=e},e.prototype.canApiStart=function(e){if(this.state===le.notInitialized)return{error:new Tt.apiValidationError(kt.apiCannotStartAsControlNotInitialized,e,[e]),result:!1};var t=Cr[e];return t?qt.contains(t,this.state)?{result:!0}:{error:new Tt.apiValidationError(kt.apiCannotStartAsNotAllowedInCurrentState,e,[e,this.state,t.toString()]),result:!1}:{error:new Tt.unexpectedError(kt.apiStateMappingNotFound,[e]),result:!1}},e}(),kr=function(){function e(e){this.userContext=e}return e.prototype.getServiceParam=function(e,t){if(!this.userContext)return null;var n=Jt.findVirtualEndpointInTemplate(e);if(n&&n.name&&this.userContext.serviceOverrides)for(var r in this.userContext.serviceOverrides)if(qt.toLowerCase(r)===n.name)return this.userContext.serviceOverrides[r][t]||this.userContext[t];return this.userContext[t]},e.prototype.getAdditionalHeaders=function(e){return this.getServiceParam(e,"additionalHeaders")},e.prototype.getAuthToken=function(e){return this.getServiceParam(e,"authToken")},e.prototype.getUserId=e.prototype.getHeaders=function(e,t){e=e||{};var n=this.getAuthToken(t);n&&(e[J.authorization]=n);var r=this.getAdditionalHeaders(t);if(r)for(var i in r)e[i]=r[i];return e},e.prototype.getUserCredential=function(e){var t=this.getAuthToken(e);if(!t){var n=this.getAdditionalHeaders(e);for(var r in n)if(qt.equalsIgnoreCase(r,J.authorization)){t=n[r];break}}return t},e}(),xr=function(e){var t=this;this.displaySettings=null,this.model=null,this.userContext=null,this.eventHub=null,this.focusTarget=null,this.unseenErrors=[],this.errorPropertyGroups={},this.pollingActions={},this.valueSetters=[],this.view=null,this.pollingTimersAndCounters={},this.showHideBusy=function(e){t.displaySettings.busyBlockShowHideHandler?t.displaySettings.busyBlockShowHideHandler(e):t.view.showHideBusy(e)},this.applyForModelDisplayTransformation=function(e,t,n){if(nr(e)&&(!n||!e.maskDisplay)&&e.displayTransformations&&e.displayTransformations.forModel)return Gt.applyDisplayTransformation(e.displayTransformations.forModel,t)},this.hideError=this.showGroupError=function(e){return!!e.groupDisplayId&&(t.view.showGroupError(e)||t.unseenErrors.push(e),!0)},this.showPropertyError=function(e){return!!e.propertyName&&(t.view.showPropertyError(e)||t.unseenErrors.push(e),!0)},this.showPageError=function(e){return t.view.showPageError(e)},this.hideModalDialog=this.showError=function(e){var n=!1;switch(e.type){case L.formValidation:var r=e;if(r.errors&&r.errors.length>0){for(var i=0;i<r.errors.length;i++)if(r.errors[i].message===ce.empty&&(r.errors[i].message=""),!t.showError(r.errors[i]))return;e.name===kt.formSubmissionFailedBadUserInput.name&&r.message!==ce.empty&&(n=!0)}else n=!0;break;case L.userInputValidation:n=e.validationErrorType===W.group?!t.showGroupError(e):!t.showPropertyError(e);break;default:n=!0}return n&&t.showPageError(e),!0},this.fillForm=function(e){var n=t.view.getVisibleProperties();t.model.showMaskedValues=e===pe.pageNavigated;var r={isRadioProperty:!1,firstRadioChecked:!1,updateReason:e};if(n.forEach((function(e){var n=t.model.modelData.getProperty(e),i=t.model.getPropertyModelElement(e);r.isRadioProperty=rr(i);var o=t.model.showMaskedValues&&t.model.modelData.getMaskedPropertyValue(e)||nr(i)&&i.displayTransformations&&i.displayTransformations.forFormat&&Gt.applyDisplayTransformation(i.displayTransformations.forFormat,n.value)||n.value;t.model.showMaskedValues&&o!==n.value&&t.view.setAccessibilityText(i,i.tags&&i.tags.maskedAccessibilityName||i.accessibilityName||i.displayName),Xn(i)&&(r.dropdownElement=i),o&&t.model.sendResourceSelectedEvent(e,de.ready),t.view.updatePropertyValue(e,n.editable,o,r)})),t.valueSetters&&t.valueSetters.length)for(var i=0;i<t.valueSetters.length;i++)t.valueSetters[i].set();t.view.updatePrefillControls()},this.reset=function(){t.unseenErrors=[],t.errorPropertyGroups={},t.model.showMaskedValues=!1,t.view.reset(),t.valueSetters=[],t.stopAllPolling()},this.stopAllPolling=function(){for(var e in t.pollingTimersAndCounters)t.stopPoll(e);t.pollingTimersAndCounters={},t.pollingActions={}},this.stopPoll=function(e){t.pollingTimersAndCounters[e]&&(t.pollingTimersAndCounters[e].pollingCounter=0,clearInterval(t.pollingTimersAndCounters[e].pollingTimer))},this.startPollingWithNextAction=function(e){t.pollingActions[e]&&t.pollingActions[e].nextAction&&(t.pollingActions[e]=t.pollingActions[e].nextAction,t.pollingHandler(e,t.pollingActions[e]))},this.registerGroupedErrors=function(e){if(e&&e.errors&&e.errors.length)for(var n=[],r=0;r<e.errors.length;++r){var i=e.errors[r],o=e.errors[r];i.propertyName&&(n.push(i.propertyName),t.errorPropertyGroups[i.propertyName]=n),o.groupDisplayId&&(n.push(o.groupDisplayId),t.errorPropertyGroups[o.groupDisplayId]=n)}},this.deregisterGroupedErrors=function(e,n){if(n||(n=t.hideError),e&&t.errorPropertyGroups[e])for(var r=t.errorPropertyGroups[e],i=0;i<r.length;++i){var o=r[i];t.unseenErrors.length>0&&qt.filter(t.unseenErrors,(),n(o),delete t.errorPropertyGroups[o]}},this.handleErrorEvent=function(e){if(!t.displaySettings.hidePropertyErrors){var n=e.error;n&&((Tt.isServerError(n)&&!n.retryable||!Tt.isServerError(n))&&t.showHideBusy(!1),t.sortError(n),t.showError(n),n.name===kt.formSubmissionFailedBadUserInput.name?(t.registerGroupedErrors(n),t.view.setFocusOnFirstError()):n.name===kt.formValidationFailed.name&&t.view.setFocusOnFirstError())}},this.sortError=function(e){if(e.type===L.formValidation){var n=e;if(!(null===n.errors||n.errors.length<=1)){var r=t.model.getCurrentPage(),i=[];t.addError(r,n,i),n.errors=i}}},this.addError=function(e,n,r){if(null!==e&&void 0!==e)for(var i=0;i<e.children.length;i++){var o=e.children[i];if(or(o)||ir(o)){var a=o.getPropertyName(),s=t.getErrorByPropertyName(n.errors,a);null!==s&&r.push(s)}else if(Kn(o)){t.addError(o,n,r);var l=t.getErrorByDisplayId(n.errors,o.displayId);null!==l&&r.push(l)}}},this.getErrorByPropertyName=function(e,t){if(null===t||void 0===t)return null;for(var n=0;n<e.length;n++){var r=e[n];if(t===r.propertyName)return r}return null},this.getErrorByDisplayId=function(e,t){if(null===t||void 0===t)return null;for(var n=0;n<e.length;n++){var r=e[n];if(t===r.groupDisplayId)return r}return null},this.handlePropertyValidated=this.setSubmitButtonState=function(e){var n=t.model.getSubmitButton()||{},r=n.accessibilityName,i=void 0===r?null:r,o=n.disabledAccessibilityName,a=void 0===o?null:o,s=n.displayId,l=void 0===s?null:s;t.view.setDisabledByDisplayId(l,e,{accessibilityName:i,disabledAccessibilityName:a})},this.publicEventHandler=function(e,n){switch(e){case M.error:t.handleErrorEvent(n);break;case M.propertyValidated:t.handlePropertyValidated(n);break;case M.pidlDownloading:case M.pageRendering:case M.inputSubmitting:case M.redirecting:case M.instanceDownloading:case M.restMethodInvoking:t.showHideBusy(!0);break;case M.pageRendered:for(var r in t.pollingActions=fn.getPollingPidlActions(t.model.elements),t.pollingActions)t.pollingHandler(r,t.pollingActions[r]);fn.findRadioElements(t.model.elements).forEach((function(e){or(e)&&t.model.sendSelectionChangeEvent(e,e.defaultValue)}));case M.pidlDownloaded:case M.inputSubmitted:case M.instanceDownloaded:case M.restMethodInvoked:t.showHideBusy(!1);break;case M.pageNavigated:t.updateView(pe.pageNavigated);break;case M.propertySelected:t.view.markAsFilled(n.divId)}},this.privateEventHandler=function(e,n){switch(e){case B.modelUpdated:var r=n&&n.created?pe.modelCreated:pe.modelUpdated;t.updateView(r);break;case B.dataUpdated:t.fillForm();break;case B.success:case B.failure:case B.gohome:t.showHideBusy(!1),t.reset();break;case B.propertyCreated:var i=n;t.view.checkAndMarkAsFilled(i.divId,i.controlId);break;case B.propertyUnselected:var o=n;t.view.checkAndMarkAsUnfilled(o.divId,o.id);break;case B.postMessageBusyTimerStarted:t.showHideBusy(!0);break;case B.postMessageBusyTimerEnded:t.showHideBusy(!1);break;case B.hideModalDialog:t.hideModalDialog();break;case B.submitting:t.setSubmitButtonState(!0);break;case B.submitted:t.setSubmitButtonState(!1);break;case B.updatePollAndMoveLast:var a=n.pollId||"";t.stopPoll(a),t.startPollingWithNextAction(a),t.model.moveToLastPage().catch(Zt)}},this.getPollingPidlActionContext=function(e){var t=e.context,n=t.href,r=t.responseResultExpression,i=t.responseActions,o=t.method;if(n&&r&&i&&o)return e.context},this.getPidlActionFromPollingResponse=function(e,t,n){if(!e||!t||!n)return null;var r=qt.getPropertyValueByJPath(e,t);return qt.getPropertyValueByJPath(n,r)},this.getModelPropertyValue=function(e){return t.model.getPropertyValue(e)},this.updateModelPropertyValue=function(e,n,r){return t.model.updatePropertyValue(t.model.getPropertyModelElement(e),n,r,!1)},this.updateView=function(e){var n=t.model.getCurrentPage(),r=t.model.getCaptchaType();t.model.secureFieldResolved||t.view.reset();var i=t.view.render({updateReason:e,focusTarget:t.focusTarget,captchaType:r,pageElement:n,viewEventHandler:t,displaySettings:t.displaySettings,eventHub:t.eventHub});if(t.valueSetters=i.valueSetters,t.eventHub.pageRefreshed(),t.fillForm(e),t.view.restoreCaretPosition&&e!==pe.pageNavigated&&t.view.restoreCaretPosition(),t.model.validateEditedProperties().catch(Zt),e===pe.modelCreated)t.unseenErrors=[],t.errorPropertyGroups={};else{var o=t.unseenErrors;t.unseenErrors=[],t.showHideBusy(!1);for(var a=0;a<o.length;a++)t.showError(o[a]);e!==pe.modelUpdated&&t.view.setFocusOnFirstError()}},this.extractStylesFromStylesheet=function(e){for(var n=document.styleSheets,r=".".concat(S.errorStroke),i=".".concat(S.secureProperty),o=0;o<n.length;o++){var a=n[o];try{for(var s=a.cssRules||a.rules,l=0;l<s.length;l++){var u=s[l];if(u instanceof CSSStyleRule)for(var d=u.selectorText.split(","),c=0;c<d.length;c++){var p=d[c].trim();p.includes(".errorStroke")||p.includes(r)?e.push(p+"{ "+u.style.cssText+" }"):p.includes(i)&&(p=p.replace(i,""),e.push(p+"{ "+u.style.cssText+" }"))}}}catch(m){t.eventHub.error(m)}}},this.computeSecurePropertyStyles=function(e,n){var r=[];n&&0===Object.keys(n).length?t.extractStylesFromStylesheet(r):n&&t.computeStylesFromHardCodedStyles(n,r),t.model.computedStyles.style[e]=r},this.computeStylesFromHardCodedStyles=function(e,t){var n=Object.keys(e.textFieldStyles).map((function(t){return"".concat(t,":").concat(e.textFieldStyles[t])})).join(";");t.push('input[type="text"]{'+n+"}");var r=Object.keys(e.fieldGroupNormalStyles).map((function(t){return"".concat(t,":").concat(e.fieldGroupNormalStyles[t])})).join(";");t.push(".normalClass{"+r+"}");var i=Object.keys(e.fieldGroupFocusStyles).map((function(t){return"".concat(t,":").concat(e.fieldGroupFocusStyles[t])})).join(";");t.push(".focusClass{"+i+"}");var o=Object.keys(e.fieldGroupErrorStyles).map((function(t){return"".concat(t,":").concat(e.fieldGroupErrorStyles[t])})).join(";");t.push(".errorClass{"+o+"}");var a=Object.keys(e.fieldGroupFocusErrorStyles).map(().join(";");t.push(".focusErrorClass{"+a+"}")},this.getMultiPropertySelectorPossibleOptions=function(e){return t.model.getMultiPropertySelectorPossibleOptions(e)},this.inputHandler=function(e){t.model.showMaskedValues=!1;var n=t.applyForModelDisplayTransformation(e.propertyElement,e.val,t.model.showMaskedValues)||e.val;t.focusTarget=e.caretPosition&&e.caretPosition.id;var r=er(e.propertyElement)||Xn(e.propertyElement)?de.finished:de.editing;t.model.updatePropertyValue(e.propertyElement,n,r,t.model.showMaskedValues).catch(Zt),t.view.updateDisplayValue&&t.view.updateDisplayValue(e.id,e.propertyElement,n,e.caretPosition),t.view.updatePrefillControls()},this.focusoutHandler=function(e){var n=t.applyForModelDisplayTransformation(e.propertyElement,e.val,t.model.showMaskedValues)||e.val;t.focusTarget=e.focusTarget,t.model.updatePropertyValue(e.propertyElement,n,de.finished,t.model.showMaskedValues).catch(Zt),t.view.updatePrefillControls(),t.eventHub.propertyUnselected(e.id,e.propertyElement.getPropertyName(),e.divId)},this.dropdownSelectHandler=function(e){var n=e.val;t.focusTarget=e.focusTarget,t.model.updatePropertyValue(e.propertyElement,n,de.editing,t.model.showMaskedValues).catch(Zt),t.view.updatePrefillControls()},this.buttonClickHandler=function(e){t.eventHub.click(e.id),t.model.invokePidlAction(e.pidlAction,e).catch(t.displaySettings.propagateCallbackException?Xt:Zt)},this.invokePidlAction=function(e){t.model.invokePidlAction(e).catch(t.displaySettings.propagateCallbackException?Xt:Zt)},this.iFrameMessageTimeoutHandler=function(e){t.model.handleClientAction(e).then((function(){t.eventHub.postMessageTimeoutHandleSuccess(e.type)})).catch((function(){t.eventHub.postMessageTimeoutHandleFailure("specified client action is not successful. clientAction type: "+e.type)}))},this.postSecureFieldMessage=this.secureFieldMessageHandler=function(e){var n=Gt.getHostName(Ye.getServiceEndpoint(Ye.virtualEndpoints.securePx.endpoint));Gt.getHostName(e.origin)===n&&e&&e.data&&e.data.source===Ve.secureFieldMessageSource&&t.model.handleSecureFieldMessage(e)},this.iFrameMessageHandler=function(e){var n=Gt.getHostName(Ye.getServiceEndpoint(Ye.virtualEndpoints.pifd.endpoint)),r=Gt.getHostName(Ye.getServiceEndpoint(Ye.virtualEndpoints.pifdBackend.endpoint)),i=Gt.getHostName(e.origin);if(t.eventHub.postMessageReceived(i,n,e.data&&e.data.length),i===n||i===r){var o=Gt.parseJSON(e.data),a=o.succeeded?o.value:null;a?t.model.handleClientAction(a,null,g.iFrameMessageHandler).then((,():t.eventHub.postMessageHandleFailure("clientAction is not specified")}},this.iFrameBusyTimerStartedHandler=function(e){t.eventHub.postMessageBusyTimerStarted("Busy started for timer ".concat(e))},this.iFrameBusyTimerEndedHandler=this.hyperlinkClickHandler=function(e){var n=Wt.getRedirectionService(),r=e.pidlAction,i=!1;switch(r.type){case H.redirect:var o=t.model.getLinkActionUrl(r.context,!1);if(!(i=t.eventHub.navigate(e.id,o,!0,r.context,null))&&n)return n.redirect(o),!0;break;case H.navigate:default:if(!(i=t.eventHub.navigate(e.id,r.context,!1,null,r.dest))&&n)return!n.openInNewTab(r.context)}return!i},this.captchaHyperlinkClickHandler=function(e,n,r){t.updateModelPropertyValue(e,n,r).catch(Zt)},this.updatePrefillValue=function(e,n){return!0===n?t.model.setCurrentDataIndex(e,0):!1===n?t.model.setCurrentDataIndex(e,-1):t.model.setCurrentDataIndex(e,n),t.model.validateEditedProperties()},this.prefillChangeHandler=function(e){var n=e.type&&e.type===w.checkBox;n?e.val?t.model.setCurrentDataIndex(e.pidlIdentity,0):t.model.setCurrentDataIndex(e.pidlIdentity,-1):t.model.setCurrentDataIndex(e.pidlIdentity,e.val),t.fillForm(pe.prefillChanged),n||t.model.validateEditedProperties().catch(Zt)},this.propertySelectedHandler=function(e){t.eventHub.propertySelected(e.id,e.propertyName,e.divId)},this.propertyUnselectedHandler=this.postMessageToChildIFrames=function(e){return t.view.postMessageToChildIFrames(e)},this.pollingHandler=function(e,n){if(!n)return!1;t.pollingTimersAndCounters[e]={pollingTimer:null,pollingCounter:0};var r=t.getPollingPidlActionContext(n);if(!r)return!1;var i=r.method,o=r.payload,a=r.headers,s=r.interval,l=void 0===s?Fe.Default:s,u=r.responseResultExpression,d=r.responseActions,c=r.maxPollingAttempts,p=r.checkPollingTimeOut,m=ln.getHttpHeaders(t.eventHub,t.userContext,a),f=Kt.getSubmitUrl(t.model.operationType,t.userContext,r,t.model.modelData.getId()),h=f.virtualEndpoint,y=h.operation,g=h.description,v=function(e,n){clearInterval(t.pollingTimersAndCounters[n].pollingTimer),t.pollingTimersAndCounters[n].pollingCounter=0,delete t.pollingTimersAndCounters[n],t.eventHub.pollingEnded(n),t.eventHub.failure(e)};return t.pollingTimersAndCounters[e].pollingTimer=setInterval((function(){var r=null;if(i===Pe.Get)t.eventHub.pollingStarted(e),r=ln.get(t.eventHub,f.url,m,t.model.operationType,y,g);else if(i===Pe.Post)t.eventHub.pollingStarted(e),r=ln.post(t.eventHub,!0,f.url,m,JSON.stringify(o),null,null,t.model.operationType,y,g);else{if(i!==Pe.Put){var a=new Tt.unexpectedError(kt.unableToSetupPolling);return v(a,e),!1}t.eventHub.pollingStarted(e),r=ln.put(t.eventHub,!0,f.url,m,JSON.stringify(o),null,null,t.model.operationType,y,g)}if(null===r)return a=new Tt.unexpectedError(kt.unableToSetupPolling),v(a,e),!1;r.then((function(r){if(p&&t.pollingTimersAndCounters[e].pollingCounter++>c){var i=new Tt.unexpectedError(kt.pollingTimedOut);return v(i,e),!1}var o=t.getPidlActionFromPollingResponse(r,u,d)||n;if(o.type!==H.poll){if(clearInterval(t.pollingTimersAndCounters[e].pollingTimer),t.pollingTimersAndCounters[e].pollingCounter=0,delete t.pollingTimersAndCounters[e],t.eventHub.pollingEnded(e),o.type===H.moveNextAndPoll)return t.model.moveNextPage().catch(Zt),t.pollingActions[e]=n.nextAction,t.pollingHandler(e,n.nextAction);if(o.type===H.updatePoll)return t.pollingActions[e]=n.nextAction,t.pollingHandler(e,n.nextAction);if(o.type===H.handleFailure)return t.eventHub.failure(new Tt.unexpectedError(kt.failurePollingResponseReturned,[JSON.stringify(r)])),!1;r&&zt.isPrimaryResource(t.model.pidlDocManager.getResolvedOrFirstPidlDoc())&&t.model.modelData.setPrimaryResourceResponse(r)}if(!(r&&r.clientAction&&o&&o.type===H.success))return t.model.invokePidlAction(o);t.model.handleClientAction(r.clientAction).then(().catch(()}),()}),l),!0},this.testHookPublicEventHandler=function(e,n){t.publicEventHandler(e,n)},this.testHookPrivateEventHandler=function(e,n){t.privateEventHandler(e,n)},this.testHookGetUnseenErrors=function(){return t.unseenErrors},this.testHookSetUnseenErrors=function(e){t.unseenErrors=e},this.testHookFillForm=this.testHookGetErrorPropertyGroups=function(){return t.errorPropertyGroups},this.testHookRegisterGroupedErrors=function(e){t.registerGroupedErrors(e)},this.testHookDeregisterGroupedErrors=function(e,n){t.deregisterGroupedErrors(e,n)},this.testHookSetShowMaskedFlag=this.testHookGetRenderer=function(){return t.view},this.testHookUpdateView=function(e){t.updateView(e)},this.testHookSetFocusTarget=function(e){t.focusTarget=e},this.eventHub=e.eventHub,this.displaySettings=e.displaySettings,this.model=e.model,this.view=e.view,this.userContext=e.userContext,e.iFrameMessageHandler&&(this.iFrameMessageHandler=e.iFrameMessageHandler),this.eventHub.addPublicEventHandler((function(e,n){t.publicEventHandler(e,n)})),this.eventHub.addPrivateEventHandler((),this.view.initialize(this.eventHub,this.model,this.displaySettings,this),this.model.setViewHandler(this.view)},wr=new function(){var e=this;this.env="prod",this.envs=["int","ppe","prod","feature","aircapi"],this.get=function(){return e.env},this.set=function(t){var n=qt.toLowerCase(t);qt.contains(e.envs,n)&&(e.env=n,Ye.setEnv(e.env))},this.getAll=function(){return e.envs}},Rr=new Ar=new function(){var e=this;this.applicationInsightsInstance=null,this.cvPlugin=null,this.cvInstance=null,this.cvInitialValue=null,this.initOneDsObjects=function(){if(!e.applicationInsightsInstance)try{e.cvPlugin||e.initCVPlugin(),Wt.getOneDSService()&&(e.applicationInsightsInstance=Wt.getOneDSService().getApplicationInsights());var t={instrumentationKey:"4127950a47f84a01a75e9a7d49d79f14-b56cc96f-0faa-4455-912a-6b8df93eeac5-6769",extensions:[e.cvPlugin],extensionConfig:[]};e.applicationInsightsInstance&&qt.isFunction(e.applicationInsightsInstance.initialize)&&e.applicationInsightsInstance.initialize(t,[])}catch(n){Wt.getLoggingService()&&Wt.getLoggingService().logError("1DS Error : Error when attempting to initialize 1DS.",n)}},this.initCVPlugin=function(){if(!e.cvPlugin){Wt.getOneDSService()&&(e.cvPlugin=Wt.getOneDSService().getCorrelationVectorPlugin(e.cvInitialValue));var t=void 0;e.cvPlugin&&qt.isFunction(e.cvPlugin.getCv)&&(t=e.cvPlugin.getCv()),t&&qt.isFunction(t.isInit)&&t.isInit()?e.cvInstance=t:(Wt.getOneDSService()&&(e.cvPlugin=Wt.getOneDSService().getCorrelationVectorPlugin()),e.cvPlugin&&qt.isFunction(e.cvPlugin.getCv)&&(e.cvInstance=e.cvPlugin&&e.cvPlugin.getCv()))}},this.getCVInstance=function(){return e.cvInstance||e.initCVPlugin(),e.cvInstance},this.reset=this.getApplicationInsights=this.writeEvent=function(t,n,r){try{var i=e.getApplicationInsights();i&&qt.isFunction(i.trackEvent)?i.trackEvent({name:t,baseData:n},r):Wt.getLoggingService()&&Wt.getLoggingService().logError("1DS Error : ApplicationInsights is not correctly initialized")}catch(o){Wt.getLoggingService()&&Wt.getLoggingService().logError("1DS Error : Error when attempting to track event with 1DS.",o)}},this.getIncrementedCV=function(){try{var t=e.getCVInstance();return t&&qt.isFunction(t.increment)&&t.increment()}catch(n){Wt.getLoggingService()&&Wt.getLoggingService().logError("1DS Error : There was an issue with incrementing the correlation vector",n)}},this.getCVValue=function(){try{var t=e.getCVInstance();return t&&qt.isFunction(t.getValue)&&t.getValue()}catch(n){Wt.getLoggingService()&&Wt.getLoggingService().logError("1DS Error : There is an issue with correlation vector getValue function",n)}},this.initCV=function(t){try{t&&(e.cvInitialValue=t,e.reset())}catch(n){Wt.getLoggingService()&&Wt.getLoggingService().logError("1DS Error : There is an issue with Initializing CV",n)}},this.testHookReset=,Or=function(e,t){var n=this;this.partnerContext={},this.enableLogging=!0,this.enableConsoleLogging=!0,this.enablePrivateEventConsoleLogging=!1,this.sdkVersion=Rr.get(),this.env=wr.get(),this.sessionId=Gt.guid(),this.telemetryResource={resourceType:"",parameters:{id:null}},this.updateResourceInfo=function(e){if(e){try{for(var t in e.parameters)e.parameters.hasOwnProperty(t)&&(n.telemetryResource.parameters[t]=e.parameters[t])}catch(r){}e.id&&(n.telemetryResource.parameters.id=e.id),e.resourceType&&(n.telemetryResource.resourceType=e.resourceType)}},this.update=function(e,t){n.operationType=e,t&&n.updateResourceInfo(t)},this.trackNewOperation=function(e,t){n.operationId=Gt.guid(),n.update(e,t)},e&&(this.partnerContext=e.contextData||{},this.enableLogging=!e.disableLogging,this.enableConsoleLogging=!e.disableConsoleLogging,this.enablePrivateEventConsoleLogging=!!e.enablePrivateEventConsoleLogging,this.telemetryOverrides=e.overrides,this.customTelemetryFrameworkWindowNamespace=e.customTelemetryFrameworkWindowNamespace,this.partnerContext&&this.partnerContext.cvInitValue&&Ar&&Ar.initCV(this.partnerContext.cvInitValue));var r=this.partnerContext,i=r.sessionId,o=r.cvInitValue;!i&&o&&(i=o.substr(0,o.indexOf(".")),this.partnerContext.sessionId=i),!i&&this.sessionId&&(this.partnerContext.sessionId=this.sessionId),this.sdkViewType=t},_r=function(){function e(){}return e.prototype.logError=function(e,t){var n="";if(t)try{n=JSON.stringify(t)}catch(i){n=""}var r=e+"= "+n;console.error(r)},e.prototype.logWarning=function(e){console.warn(e)},e.prototype.logMessage=function(e){console.log(e)},e}(),Fr=new function(){var e=this;this.createUserDataPropertyValue=function(e,t,n,r,i){if(t.indexedOn&&t.possible_values){var o=n.getPropertyValue(t.indexedOn,!1);if(o&&t.possible_values[o])return t.possible_values[o]}var a=n.getPropertyValue(jt.getDisplayPropertyName(t,e),r,i);return a=void 0===a?Gt.getFormatStringExpressionValue(t.default_value,{modelData:n}):a,t.type===he.bool&&(a=qt.boolify(a)),a},this.createUserSecureInputDataInternal=function(t,n,r,i,o,a,s){var l=t.data_description,u=[];for(var d in l){var c=l[d];if(Ht(c)){var p=c&&c.length&&c[0];if(p){var m=e.createUserSecureInputDataInternal(p,n,r,i,o,a,s);u.push(m)}}else{var f=n.getModelDataProperty(d);if(f&&f.modelElement&&f.modelElement.isSecureProperty()){c.token_set&&c.token_set.startsWith(Ve.tokenizationValuePrefix)&&(c.token_set=c.token_set.replace(Ve.tokenizationValuePrefix,""));var h=f.modelElement.prepareForSubmit(c.token_set).then((function(e){var t=l[e.propertyName];t.token_set=Ve.tokenizationValuePrefix+t.token_set,o[e.propertyName]=e.value}));u.push(h)}}}return Promise.all(u).then((function(){}))},this.createUserInputDataInternal=function(t,n,r,i,o,a){var s,l={},u=t.data_description;for(var d in u){var c=u[d];if(Ht(c)){var p=c&&c.length&&c[0];p&&(l[d]=e.createUserInputDataInternal(p,n,r,i,o,a))}else{if(c.displayOnly&&!a||i===tt.update&&!c.is_updatable)continue;if(c.type===he.hidden){l[d]||(r[d]?l[d]=r[d]:l[d]=Gt.getFormatStringExpressionValue(c.default_value,{modelData:n}));continue}var m=e.createUserDataPropertyValue(d,c,n,o,a);m&&(o&&c.type===he.returnObject?(qt.isObject(m)||((s={})[d]=m,m=s),l=Gt.extend({},l,m)):l[d]=e.getValueInDataType(m,o,c))}}return l},this.getValueInDataType=function(e,t,n){if(t){if(n.type===he.number){var r=Number(e);return isNaN(r)?e:r}if(n.type===he.bool){if(!qt.isBool(e))return qt.equalsIgnoreCase(e,"true")}else if(n.type===he.object&&!qt.isObject(e))try{return JSON.parse(e)}catch(i){return e}}return e},this.canSubmitUserInputDataInternal=function(t,n,r){var i=t.data_description;for(var o in i){var a=i[o];if(Ht(a)){var s=a&&a.length&&a[0];if(s&&(e.canSubmitUserInputDataInternal(s,n?n[o]:n,r),r.canSubmit))return}else if(a.propertyType===ge.userData&&(r.noUserInputData=!1,!a.is_optional||n&&n[o]))return void(r.canSubmit=!0)}},this.createUserInputData=function(t,n,r,i,o,a){return e.createUserInputDataInternal(t,n,r,i,o,a)},this.createUserSecureInputData=function(t,n,r,i,o,a){var s={};return e.createUserSecureInputDataInternal(t,n,r,i,s,o,a).then((function(){return s}))},this.canSubmitUserInputData=function(t,n){var r={canSubmit:!1,noUserInputData:!0};return e.canSubmitUserInputDataInternal(t,n,r),r.canSubmit||r.noUserInputData}},Hr=new function(){var e=this;this.setPropertyValueOfInputData=function(t,n,r){for(var i in t){if(i===n){t[i]=r;break}qt.isObject(t[i])&&e.setPropertyValueOfInputData(t[i],n,r)}},this.checkForValidTransformationTarget=function(e,t){var n=e.transformation,r=void 0===n?{}:n;return t===v.forSubmit&&qt.boolify(r.forSubmit)||t===v.forDisplay&&qt.boolify(r.forDisplay)},this.transformUserInputDataFromService=function(e,t,n,r,i,o,a,s){var l={value:i,pidlIdentity:t.identity,propertyName:n,transformationTarget:r},u=ln.getDefaultHttpHeaders(e);u[J.msFlight]="pxpidl",ln.post(e,!0,Kt.buildUrl(Ye.getServiceEndpoint(Ye.virtualEndpoints.transformation.endpoint),[o]),u,JSON.stringify(l),(function(e){var t;t=qt.equalsIgnoreCase(e.status,I.Passed)?{status:I.Passed,transformedValue:e.transformedValue}:{status:I.Fail,errorCode:e.errorCode,errorMessage:e.errorMessage},s(t)}),(,a,Ye.virtualEndpoints.transformation.operation,Ye.virtualEndpoints.transformation.description,!0).catch(Zt)},this.transformPropertyInternal=function(t,n,r,i,o,a,s,l){var u=!1,d=n.data_description,c=function(c){var p=d[c];if(Ht(p)){var m=p.length&&p[0];m&&(u=e.transformPropertyInternal(t,m,r,i,o,a,(function(e){s(e)}),l)||u)}else if(c===r){var f=jt.getPropertyValueFromInputData(i,c);if(e.transformPropertyFromPropertyDescription(t,n,c,p,o,f,a,(function(t){t.status===I.Passed&&(e.setPropertyValueOfInputData(i,c,t.transformedValue),l()),t.status!==I.Error&&t.status!==I.Fail||s(new Error(t.errorMessage))})),e.checkForValidTransformationTarget(p,o))return{value:!0}}};for(var p in d){var m=c(p);if("object"===typeof m)return m.value}return u},this.transformUserInputDataInternal=function(t,n,r,i,o,a,s,l){var u=n.data_description,d=0,c=!1,p=l?r:u,m=function(p){var m=u[p];if(Ht(m)){var f=m&&m.length&&m[0];f&&(d++,c=e.transformUserInputDataInternal(t,f,r[p],i,(function(e){o(e)}),(function(){0===--d&&c&&a&&a()}),s,l)||c)}else{if(s===tt.update&&!m.is_updatable)return"continue";var h=jt.getPropertyValueFromInputData(r,p);if(!h){if(m.displayOnly||l)return"continue";m.is_optional||o(new Error(p+" is a required property per the pidlDocument but is missing in the userInputData object passed in."))}(c=e.transformPropertyFromPropertyDescription(t,n,p,m,i,h,s,(function(t){t.status===I.Passed&&e.setPropertyValueOfInputData(r,p,t.transformedValue),t.status!==I.Error&&t.status!==I.Fail||o(new Error(t.errorMessage)),t.mode===rt.service&&0===--d&&a&&a()})))&&d++}};for(var f in p)m(f);return 0===d&&a&&a(),d>0},this.transformPropertyFromPropertyDescription=function(t,n,r,i,o,a,s,l){var u={},d=!1;if(!a)return!1;if(i.transformation){var c=null;if(o===v.forSubmit){if(!i.transformation.forSubmit)return l(u),d;c=i.transformation.forSubmit}else{if(o!==v.forDisplay)throw new Error(r+"has invalid transformation type.");if(!i.transformation.forDisplay)return l(u),d;c=i.transformation.forDisplay}var p=c.inputregex,m=c.transformregex;if(p){if(m){var f=new RegExp(p),h=a.replace(f,m);u={status:I.Passed,transformedValue:JSON.parse('"'+h+'"')}}u.mode=rt.regex}else c.url&&(d=!0,e.transformUserInputDataFromService(t,n,r,o,a,c.url,s,(function(e){(u=e).mode=rt.service,l(u)})))}return d||l(u),d},this.getUserDisplayDataPartial=function(t,n,r,i,o,a){var s=qt.deepCopy(r);e.transformUserInputDataInternal(t,n,s,v.forDisplay,i,(,a,!0)},this.transformUserInputData=function(t,n,r,i,o,a){e.transformUserInputDataInternal(t,n,r,v.forSubmit,i,o,a)},this.transformUserInputPropertyForDisplay=function(t,n,r,i,o,a,s){e.transformPropertyInternal(t,n,r,i,v.forDisplay,o,a,s)||a(Error("The property with property Name:"+r+" does not have valid display transform in data description"))}},Nr=function(){function e(){var e=this;this.getParentOfProperty=function(t,n){for(var r in n){if(r===t)return n;if(qt.isObject(n[r])){var i=e.getParentOfProperty(t,n[r]);if(i)return i}}},this.areIdentitiesEqual=function(e,t){if(!e||!t)return!1;if(qt.keyCount(e)!==qt.keyCount(t))return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0},this.resolveInfoDescriptionId=function(t,n){return e.invoke((function(e){try{var r=Lt.resolveInfoDescriptionId(t,n);e.resolve(r)}catch(i){e.reject(i)}}))},this.getFirstPidlWithValidDefaultKey=function(e,t){return Lt.getFirstPidlWithValidDefaultKey(e,t)},this.createUserInputData=function(e,t,n,r,i,o){return Fr.createUserInputData(e,t,n,r,i,o)},this.createUserSecureInputData=function(e,t,n,r,i,o){return Fr.createUserSecureInputData(e,t,n,r,i,o)}}return e.prototype.invoke=function(e){return new Promise(()},e.prototype.getUserDisplayDataPartial=function(e,t,n,r){return this.invoke((function(i){try{var o=t.getResolvedOrAllPidlDocs(),a=jt.getFirstResolvedPidlDocument(o,n);null==a&&(a=o[0]),Hr.getUserDisplayDataPartial(e,a,n,(function(e){i.reject(e)}),(function(e){i.resolve(e)}),r)}catch(s){i.reject(s)}}))},e.prototype.transformUserInputData=function(e,t,n,r){return this.invoke((function(i){try{Hr.transformUserInputData(t,e,n,(,(,r)}catch(o){i.reject(o)}}))},e.prototype.transformUserInputPropertyForDisplay=function(e,t,n,r,i){var o=this;return this.invoke((function(a){var s=!1;t.propertyTransforming(n);try{var l=o.getParentOfProperty(n,r),u={};u[n]=l[n];var d=jt.getFirstResolvedPidlDocument(e,r);null==d&&(d=e[0]),Hr.transformUserInputPropertyForDisplay(t,d,n,u,i,(,(),s||(t.propertyTransformed(n),l[n]=u[n],a.resolve())}catch(c){a.reject(c)}}))},e.prototype.canSubmitUserInputData=e.prototype.getPidlSubmitOrder=function(e){return Lt.getPidlSubmitOrder(e)},e}();function Mr(e,t){return ln.get(e,t.url,t.headers,t.pidlOperation,t.virtualEndpoint.operation,t.virtualEndpoint.description)}var Br=function(){function e(){}return e.prototype.getPidlDocument=function(e,t,n){return n?new Promise(():Mr(e,t)},e.prototype.getInstance=function(e,t){return e.instanceDownloading(t.url),Mr(e,t)},e.prototype.submitPidlDocument=function(e,t,n,r){return e.inputSubmitting(t.url),new Promise((function(i,o){ln.invokeFetch(e,!0,t.method,t.url,t.headers,t.method.toUpperCase()===Pe.Get||t.method.toUpperCase()===Pe.Delete?null:JSON.stringify(t.data),(function(n){r&&(n=r(t,n));var o="None";Nt(n)&&n.clientAction&&(o=n.clientAction.type),e.inputSubmitted(o),i(n)}),(function(e){o(e)}),n,t.virtualEndpoint.operation,t.virtualEndpoint.description).catch(i)}))},e.prototype.invokeRestMethod=function(e,t,n){return new Promise((function(r,i){ln.invokeFetch(e,!0,t.method,t.url,t.headers,t.data,(function(e){r(e)}),(function(e){i(e)}),n,t.virtualEndpoint.operation,t.virtualEndpoint.description).catch(r)}))},e.prototype.getRequestInstance=function(e,t,n,r){var i=Kt.getResourceUrl(t,n);return{url:i.url,headers:ln.getHttpHeaders(e,n,null,i.template,null),virtualEndpoint:i.virtualEndpoint,pidlOperation:r}},e}(),Vr=function(){eturn e.prototype.put=function(e,t,n,r){var i={pidlDocInfo:t,pidls:n,resolvedPidlIdentity:r};this.cache.put(e,i)},e.prototype.get=function(e){return this.cache.get(e)},e.prototype.remove=e.prototype.removeResourceEntries=function(e){this.cache.removeIf(()},e}(),Ur=function(){function e(){}return e.prototype.redirect=function(e){window.location.replace(e),window.location.href=e},e.prototype.openInNewTab=function(e){return!(!window||!window.open)&&(window.open(e),!0)},e}(),Lr=function(){function e(e,t,n,r,i,o,a,s,l){var u=this;this.logConstructorCall=function(e,t,n,r,i){var o={userContext:qt.boolify(e),returnOptions:qt.boolify(t),eventHandler:qt.boolify(n),displayOptions:qt.boolify(r),telemetryOptions:qt.boolify(i)},a={returnOptions:t,displayOptions:r,telemetryOptions:i};u.eventHub.apiCalled(me.constructor,o,a)},this.unhandledRejectionHandler=function(e){var t=e.reason&&e.reason.stack;t&&u.eventHub.error(new Tt.unexpectedError(kt.unhandledRejection,[t]))},this.handlePrivateEvent=function(e,t){try{switch(e){case B.stateChanged:t&&t.newState===le.initialized&&window.addEventListener("unhandledrejection",u.unhandledRejectionHandler);break;case B.failure:case B.success:case B.gohome:window.removeEventListener("unhandledrejection",u.unhandledRejectionHandler)}}catch(n){}},this.canApiStart=function(e){var t=u.stateManager.canApiStart(e);return!!t.result||(u.eventHub.error(t.error),!1)},this.getChallengePidlInfo=function(e){var t={resourceType:"Challenge",parameters:qt.deepCopy(e.piResourceInfo.parameters)};return t.parameters.piid=e.piResourceInfo.id,t.parameters.sessionId=e.sessionId,t.parameters.orderId=e.orderId,t},this.provisionWalletToken=function(e,t){var n={piFamily:null===t||void 0===t?void 0:t.family,piType:null===t||void 0===t?void 0:t.type,tokenReference:null===t||void 0===t?void 0:t.tokenReference,sessionData:e};return new Promise((function(e,t){var r,i={resourceType:E.WalletToken,parameters:{}},o=Jt.getResourceEndpoint(i.resourceType),a=null===(r=Kt.getResourceUrl(i,u.userContext))||void 0===r?void 0:r.url;try{return ln.post(u.eventHub,!0,a,ln.getHttpHeaders(u.eventHub,u.userContext,void 0,o.template),JSON.stringify(n),(function(t){return e(t)}),(function(e){return t(e)}),tt.provisionWalletToken,o.operation,o.description,!0)}catch(s){t(s)}}))},this.handlePaymentAgentChallenge=function(e,t,n,r){var i,o;if(!(null===(o=null===(i=null===window||void 0===window?void 0:window.paymentAgent)||void 0===i?void 0:i.isReadyToPay)||void 0===o?void 0:o.call(i))){var a=new Tt.invalidSetupError(kt.invalidSetup);return u.eventHub.failure(a),u.apiFailure(!1)}var s=window.paymentAgent.handleChallenge(e,r).then((function(r){return r.tokenReference?u.provisionWalletToken(e,r).then((function(r){return n&&(n.current.style.display="flex",n.current.attributes["aria-hidden"]="false"),t.parameters.paymentSessionOrData=p(p({},e),r),u.renderPidlPageInternal(t)})):u.renderPidlPageInternal(t)})).catch((function(e){if("cancel"===(null===e||void 0===e?void 0:e.type)||"AbortError"===(null===e||void 0===e?void 0:e.name)||"CANCELED"===(null===e||void 0===e?void 0:e.statusCode))return u.model.gohome(),$t();var t={error:e,stack:null===e||void 0===e?void 0:e.stack,message:null===e||void 0===e?void 0:e.message},n=void 0;return n="failed to open window"===e?new Tt.failedToOpenWindowError(kt.failedToOpenWindow,JSON.stringify(t)):new Tt.paymentMethodFailureError(kt.paymentMethodFailure,JSON.stringify(t)),u.eventHub.failure(n),u.apiFailure(n)}));return u.apiSuccess(!0,s)},this.invokeResourceAction=function(e){if(u.telemetryContext.trackNewOperation(_.invokeResourceAction),u.eventHub.apiCalled(me.invokeResourceAction),!u.canApiStart(me.invokeResourceAction)||!e||!un.validateResourceActionParams(u.eventHub,e))return u.eventHub.apiReturned(me.invokeResourceAction,!1),u.apiFailure(!1);var t=e.resourceActionContext,n={result:null,promise:$t(null)};switch(t.action){case N.addResource:case N.addAddress:u.telemetryContext.update(_.add,t.pidlDocInfo),n=u.addResourceInternal(tt.add,t.pidlDocInfo,e.prefillData,e.options);break;case N.collectResourceInfo:u.telemetryContext.update(_.renderPidlPage,t.pidlDocInfo),n=u.renderPidlPageInternal(t.pidlDocInfo,e.options);break;case N.handleChallenge:u.telemetryContext.update(_.verify,t.resourceInfo),n=u.handleChallengeInternal(t.resourceInfo,e.options);break;case N.selectPaymentInstrument:case N.selectResource:u.telemetryContext.update(_.selectResource,t.pidlDocInfo),n=u.selectInstanceInternal(t.pidlDocInfo,e.options,t,e.selectedResourceInfo);break;case N.selectResourceType:u.telemetryContext.update(_.selectResourceType,t.pidlDocInfo),n=u.selectResourceTypeInternal(t.pidlDocInfo,e.options);break;case N.selectSingleResource:u.telemetryContext.update(_.selectSingleResource,t.pidlDocInfo),n=u.selectSingleInstanceInternal(t.pidlDocInfo,e.options,t,e.selectedResourceInfo);break;case N.updateProfile:case N.updateResource:u.telemetryContext.update(_.update,t.pidlDocInfo||t.resourceInfo),n=u.updateOrDeleteResourceInternal(t.resourceInfo,t.resource,t.pidlDocInfo,e.options);break;case N.deleteResource:u.telemetryContext.update(_.delete,t.pidlDocInfo||t.resourceInfo),n=u.updateOrDeleteResourceInternal(t.resourceInfo,t.resource,t.pidlDocInfo,e.options,tt.delete);break;case N.searchTransactions:u.telemetryContext.update(_.searchTransactions,t.pidlDocInfo),n=u.addResourceInternal(tt.searchTransactions,t.pidlDocInfo,void 0,e.options)}return u.eventHub.apiReturned(me.invokeResourceAction,qt.boolify(n.result),n.promise),n},this.addResourceInternal=function(e,t,n,r){if(!un.validatePidlDocInfo(u.eventHub,t)||!un.validateAddUpdateOrDeleteOptions(u.eventHub,r))return u.apiFailure(!1);var i=Kt.getPidlDocUrl(u.userContext,e,t);return u.apiSuccess(!0,u.getPidl(i,n,e,r,t))},this.addResource=function(e,t,n){if(u.telemetryContext.trackNewOperation(_.add,e),u.eventHub.apiCalled(me.addResource,{pidlDocInfo:qt.boolify(e),prefillData:qt.boolify(t),options:qt.boolify(n)},{pidlDocInfo:e}),!u.canApiStart(me.addResource))return u.eventHub.apiReturned(me.addResource,!1),u.apiFailure(!1);var r=u.addResourceInternal(tt.add,e,t,n);return u.eventHub.apiReturned(me.addResource,r.result,r.promise),r},this.searchTransactions=function(e){var t=e.pidlDocInfo,n=e.options;if(u.telemetryContext.trackNewOperation(_.searchTransactions,t),u.eventHub.apiCalled(me.searchTransactions,{pidlDocInfo:qt.boolify(t),options:qt.boolify(n)},{pidlDocInfo:t}),!u.canApiStart(me.searchTransactions))return u.eventHub.apiReturned(me.searchTransactions,!1),u.apiFailure(!1);var r=u.addResourceInternal(tt.searchTransactions,t,void 0,n);return u.eventHub.apiReturned(me.searchTransactions,r.result,r.promise),r},this.addPaymentInstrument=function(e,t,n){var r=p(p({},e),{resourceType:"PaymentInstrument"});if(u.telemetryContext.trackNewOperation(_.addPaymentInstrument,r),u.eventHub.apiCalled(me.addPaymentInstrument,{pidlDocInfo:qt.boolify(r),prefillData:qt.boolify(t),options:qt.boolify(n)},{pidlDocInfo:r}),!u.canApiStart(me.addPaymentInstrument))return u.eventHub.apiReturned(me.addPaymentInstrument,!1),u.apiFailure(!1);var i=u.addResourceInternal(tt.add,r,t,n);return u.eventHub.apiReturned(me.addPaymentInstrument,i.result,i.promise),i},this.applyResource=function(e,t,n){if(u.telemetryContext.trackNewOperation(_.applyResource,e),u.eventHub.apiCalled(me.applyResource,{pidlDocInfo:qt.boolify(e),prefillData:qt.boolify(t),options:qt.boolify(n)},{pidlDocInfo:e}),!u.canApiStart(me.applyResource))return u.eventHub.apiReturned(me.applyResource,!1),u.apiFailure(!1);var r=u.addResourceInternal(tt.apply,e,t,n);return u.eventHub.apiReturned(me.applyResource,r.result,r.promise),r},this.replaceResource=function(e,t,n){if(u.telemetryContext.trackNewOperation(_.replace,e),u.eventHub.apiCalled(me.replaceResource,{pidlDocInfo:qt.boolify(e),prefillData:qt.boolify(t),options:qt.boolify(n)},{pidlDocInfo:e}),!u.canApiStart(me.replaceResource))return u.eventHub.apiReturned(me.replaceResource,!1),u.apiFailure(!1);var r=u.addResourceInternal(tt.replace,e,t,n);return u.eventHub.apiReturned(me.replaceResource,r.result,r.promise),r},this.addAddress=function(e,t,n){var r=p(p({},e),{resourceType:"Address"});if(u.telemetryContext.trackNewOperation(_.addAddress,r),u.eventHub.apiCalled(me.addAddress,{pidlDocInfo:qt.boolify(r),prefillData:qt.boolify(t),options:qt.boolify(n)},{pidlDocInfo:r}),!u.canApiStart(me.addAddress))return u.eventHub.apiReturned(me.addAddress,!1),u.apiFailure(!1);var i=u.addResourceInternal(tt.add,r,t,n);return u.eventHub.apiReturned(me.addAddress,i.result,i.promise),i},this.validateAddress=function(e){var t=p(p({},e),{resourceType:"Address"});return u.validateResource(t)},this.handleCheckout=function(e){var t=e||{},n=t.checkoutId,r=t.partner,i=t.redirectUrl,o=t.paymentProviderId,a=t.language,s=t.market,l={resourceType:E.Checkout,parameters:{partner:r,checkoutId:n,redirectUrl:i,paymentProviderId:o,language:a,market:s},anonymousPidl:e.anonymousUser};if(u.telemetryContext.trackNewOperation(_.handleCheckout,l),u.eventHub.apiCalled(me.handleCheckout,{checkoutParams:qt.boolify(e)},{}),!u.canApiStart(me.handleCheckout)||!un.validateCheckoutParams(u.eventHub,e))return u.eventHub.apiReturned(me.handlePaymentChallenge,!1),u.apiFailure(!1);var d={resourceType:E.Checkout,parameters:{partner:r,checkoutId:n,redirectUrl:i,paymentProviderId:o,language:a,market:s},anonymousPidl:e.anonymousUser},c=u.renderPidlPageInternal(d);return u.eventHub.apiReturned(me.handleCheckout,c.result,c.promise),c},this.getPayeeTaxProfile=function(e){var t=e||{},n=t.section,r=t.tenant,i=t.sapidind,o=t.status,a=t.accounttype,s=t.payfromcc,l=t.residencecc,d=t.language,c={resourceType:E.PayeeTaxProfile,parameters:{section:n,tenant:r,sapidind:i,status:o,accounttype:a,payfromcc:s,residencecc:l,language:d}};if(u.telemetryContext.trackNewOperation(_.getPayeeTaxProfile,c),u.eventHub.apiCalled(me.getPayeeTaxProfile,{payeeTaxProfileParams:qt.boolify(e)},{}),!u.canApiStart(me.getPayeeTaxProfile)||!un.validatePayeeTaxProfileParams(u.eventHub,e))return u.eventHub.apiReturned(me.getPayeeTaxProfile,!1),u.apiFailure(!1);var p={resourceType:E.PayeeTaxProfile,parameters:{section:n,tenant:r,sapidind:i,status:o,accounttype:a,payfromcc:s,residencecc:l,language:d}},m=u.renderPidlPageInternal(p);return u.eventHub.apiReturned(me.getPayeeTaxProfile,m.result,m.promise),m},this.createPaymentSession=function(e){var t=e||{},n=t.partner,r=void 0===n?null:n,i=t.country,o=void 0===i?null:i,a=t.language,s=void 0===a?null:a,l={resourceType:E.PaymentSession,parameters:{partner:r,market:o,language:s,paymentSessionData:e}};if(u.telemetryContext.trackNewOperation(_.createPaymentSession,l),u.eventHub.apiCalled(me.createPaymentSession,{paymentSessionData:qt.boolify(e)},{}),!u.canApiStart(me.createPaymentSession)||!un.validatePaymentSessionData(u.eventHub,e))return u.eventHub.apiReturned(me.createPaymentSession,!1),u.apiFailure(!1);var d={resourceType:E.PaymentSession,parameters:{paymentSessionData:e}};e.billableAccountId&&(d.parameters.billableAccountId=e.billableAccountId),e.classicProduct&&(d.parameters.classicProduct=e.classicProduct);var c=u.addResourceInternal(tt.add,d);return u.eventHub.apiReturned(me.createPaymentSession,c.result,c.promise),c},this.renderPidlPageInternal=function(e,t){if(!un.validatePidlDocInfo(u.eventHub,e)||!un.validateSelectOrRenderOptions(u.eventHub,t))return u.apiFailure(!1);var n=tt.renderPidlPage,r=Kt.getPidlDocUrl(u.userContext,n,e);return u.apiSuccess(!0,u.getPidl(r,null,n,t,e))},this.renderPidlPage=function(e,t){if(u.telemetryContext.trackNewOperation(_.renderPidlPage,e),u.eventHub.apiCalled(me.renderPidlPage,{pidlDocInfo:qt.boolify(e),options:qt.boolify(t)},{pidlDocInfo:e}),!u.canApiStart(me.renderPidlPage))return u.eventHub.apiReturned(me.renderPidlPage,!1),u.apiFailure(!1);var n=u.renderPidlPageInternal(e,t);return u.eventHub.apiReturned(me.renderPidlPage,n.result,n.promise),n},this.handlePaymentChallenge=function(e,t){var n,r,i=e||{},o=i.partner,a=void 0===o?null:o,s=i.country,l=void 0===s?null:s,d=i.language,c=void 0===d?null:d,p={resourceType:E.Challenge,parameters:{partner:a,market:l,language:c,paymentSessionOrData:e,timezoneOffset:(new Date).getTimezoneOffset()}};if(u.telemetryContext.trackNewOperation(_.handlePaymentChallenge,p),u.eventHub.apiCalled(me.handlePaymentChallenge,{paymentSessionData:qt.boolify(e)},{}),!u.canApiStart(me.handlePaymentChallenge)||!un.validatePaymentSessionOrData(u.eventHub,e))return u.eventHub.apiReturned(me.handlePaymentChallenge,!1),u.apiFailure(!1);var m,f={resourceType:E.Challenge,parameters:{paymentSessionOrData:e,timezoneOffset:(new Date).getTimezoneOffset()}};e.billableAccountId&&(f.parameters.billableAccountId=e.billableAccountId),e.classicProduct&&(f.parameters.classicProduct=e.classicProduct);var h=u.userContext.getHeaders({},""),y=h[J.msFlight]||"",g=h[J.msTest]||"";if((null===y||void 0===y?void 0:y.includes(Q.enablePaymentAgentChallenge))&&(null===(r=null===(n=window.paymentAgent)||void 0===n?void 0:n.isPaymentAgentSupportedPI)||void 0===r?void 0:r.call(n,e)))m=u.handlePaymentAgentChallenge(e,f,t,g);else if(e.piid===tn.googlePay||e.piid===tn.applePay){var v=new Tt.invalidSetupError(kt.invalidSetup);u.eventHub.failure(v),m=u.apiFailure(!1)}else m=u.renderPidlPageInternal(f);return u.eventHub.apiReturned(me.handlePaymentChallenge,m.result,m.promise),m},this.handlePurchasePendingState=function(e){if(u.telemetryContext.trackNewOperation(_.handlePurchasePendingState),u.eventHub.apiCalled(me.handlePurchasePendingState),!u.canApiStart(me.handlePurchasePendingState)||!e||!un.validateHandlePurchasePendingStateParams(u.eventHub,e))return u.eventHub.apiReturned(me.handlePurchasePendingState,!1),u.apiFailure(!1);var t=u.getChallengePidlInfo(e),n=u.renderPidlPageInternal(t,e.options);return u.eventHub.apiReturned(me.handlePurchasePendingState,!0,n.promise),u.apiSuccess(!0,n.promise)},this.handlePurchaseRiskChallenge=function(e){if(u.telemetryContext.trackNewOperation(_.handlePurchaseRiskChallenge),u.eventHub.apiCalled(me.handlePurchaseRiskChallenge),!u.canApiStart(me.handlePurchaseRiskChallenge)||!e||!un.validatePurchaseRiskChallengeParams(u.eventHub,e))return u.eventHub.apiReturned(me.handlePurchaseRiskChallenge,!1),u.apiFailure(!1);var t=u.getChallengePidlInfo(e);t.parameters.type=e.riskChallengeData[0];var n=u.renderPidlPageInternal(t,e.options);return u.eventHub.apiReturned(me.handlePurchaseRiskChallenge,n.result,n.promise),n},this.handleChallengeInternal=function(e,t){if(!un.validateResourceInfo(u.eventHub,e)||!un.validateAddUpdateOrDeleteOptions(u.eventHub,t))return u.apiFailure(!1);var n=tt.add;u.model.operationType=n,u.model.operationOptions=t,u.model.pidlDocManager.setOperationInfo({operationType:n});var r=Wt.getPidlService(),i=r.getRequestInstance(u.eventHub,e,u.userContext,n),o=r.getInstance(u.eventHub,i);return u.apiSuccess(!0,o.then((function(t){u.stateManager.setState(le.executing),u.eventHub.instanceDownloaded();var r=Jt.getPidlDocInfoFromResource(e,t);if(u.telemetryContext.updateResourceInfo(r),t.clientAction)return u.model.handleClientAction(t.clientAction,t);u.eventHub.success({id:t.id,operationType:n,response:t})}),(function(e){var t=Gt.createServerError(kt.resourceInstanceDownloadFailed,i.url,e,[e.errorMessage]);return u.eventHub.failure(t),Yt(t)})))},this.handleChallenge=function(e,t){if(u.telemetryContext.trackNewOperation(_.verify,e),u.eventHub.apiCalled(me.handleChallenge,{resourceInfo:qt.boolify(e),options:qt.boolify(t)},{resourceInfo:e}),!u.canApiStart(me.handleChallenge))return u.eventHub.apiReturned(me.handleChallenge,!1),u.apiFailure(!1);var n=u.handleChallengeInternal(e,t);return u.eventHub.apiReturned(me.handleChallenge,n.result,n.promise),n},this.updateOrDeleteResourceInternal=function(e,t,n,r,i){if(n&&!un.validatePidlDocInfo(u.eventHub,n)||!un.validateAddUpdateOrDeleteOptions(u.eventHub,r))return u.apiFailure(!1);i=i||tt.update;u.model.operationType=i,u.model.operationOptions=r,u.model.modelData.setInputParametersInPartnerDataSource({pidlDocInfo:n}),u.model.pidlDocManager.setOperationInfo({operationType:i});var o=null;if(t)o=u.downloadPidlDocument(Kt.getPidlDocUrl(u.userContext,i,n),r,(function(){return u.model.populate(t,!0)}),n);else{if(!un.validateResourceInfo(u.eventHub,e))return u.apiFailure(!1);o=u.downloadInstance(e,n,i,r)}return u.apiSuccess(!0,o.then((function(){return u.stateManager.setState(le.executing)})))},this.updateResource=function(e,t,n,r){if(u.telemetryContext.trackNewOperation(_.update,n||e),u.eventHub.apiCalled(me.updateResource,{resourceInfo:qt.boolify(e),resource:qt.boolify(t),pidlDocInfo:qt.boolify(n),options:qt.boolify(r)},{resourceInfo:e,pidlDocInfo:n}),!u.canApiStart(me.updateResource))return u.eventHub.apiReturned(me.updateResource,!1),u.apiFailure(!1);var i=u.updateOrDeleteResourceInternal(e,t,n,r);return u.eventHub.apiReturned(me.updateResource,i.result,i.promise),i},this.selectResource=function(e,t,n,r,i,o,a){if(!o&&!e||e&&(!un.validatePidlDocInfo(u.eventHub,e)&&!un.validateResourceInfo(u.eventHub,e)||!un.validateSelectOrRenderOptions(u.eventHub,t))||o&&!un.validateHandle(u.eventHub,o)||a&&!un.validateSelectedResourceInfo(u.eventHub,a))return u.apiFailure(null);a&&(a.id||a.backupId)&&((e=e||{}).parameters=e.parameters||{},e.parameters.filters=e.parameters.filters||{},a.id&&(e.parameters.filters.id=a.id),a.backupId&&(e.parameters.filters.backupId=a.backupId));var s=o||Gt.guid();u.model.pidlDocManager.setOperationInfo({handle:s,operationType:n}),u.model.operationType=n,u.model.modelData.setInputParametersInPartnerDataSource({pidlDocInfo:e});var l=null;return o?l=new Promise((function(e,t){u.model.pidlDocManager.retrievePidlDocFromCache(u.eventHub,s,i).then((function(){r().then(e,()}),(function(e){u.eventHub.failure(new Tt.unexpectedError(e,[])),t()}))})):(u.model.operationOptions=t,Jt.updatePidlDocInfo(e),l=u.downloadPidlDocument(Kt.getPidlDocUrl(u.userContext,n,e),t,r,e,i)),u.apiSuccess(s,l.then((function(){return u.stateManager.setState(le.executing)})))},this.selectResourceTypeInternal=function(e,t){return u.selectResource(e,t,tt.select,u.onDownloadValidateOrSelectResourceType.bind(u))},this.selectResourceType=function(e,t){u.telemetryContext.trackNewOperation(_.selectResourceType,e);var n=e,r=u.userContext.getHeaders({},"")[J.msFlight]||"";if((null===r||void 0===r?void 0:r.includes(Q.enablePaymentAgentChallenge))&&(n=Gt.verifyClientSupported(e)),u.eventHub.apiCalled(me.selectResourceType,{pidlDocInfo:qt.boolify(n),options:qt.boolify(t)},{pidlDocInfo:n}),!u.canApiStart(me.selectResourceType))return u.eventHub.apiReturned(me.selectResourceType,!1),u.apiFailure(null);var i=u.selectResourceTypeInternal(n,t);return u.eventHub.apiReturned(me.selectResourceType,qt.boolify(i.result),i.promise),i},this.updateProfile=function(e,t,n,r){var i=p(p({},n),{resourceType:"Profile"});if(u.telemetryContext.trackNewOperation(_.updateProfile,i||e),u.eventHub.apiCalled(me.updateProfile,{resourceInfo:qt.boolify(e),resource:qt.boolify(t),pidlDocInfo:qt.boolify(i),options:qt.boolify(r)},{resourceInfo:e,pidlDocInfo:i}),!u.canApiStart(me.updateProfile))return u.eventHub.apiReturned(me.updateProfile,!1),u.apiFailure(!1);var o=u.updateOrDeleteResourceInternal(e,t,i,r);return u.eventHub.apiReturned(me.updateProfile,o.result,o.promise),o},this.selectInstanceInternal=function(e,t,n,r){return u.selectResource(e,t,tt.selectInstance,(function(){return u.onDownloadSelectResource(n&&n.prefillData)}),n&&n.targetIdentity,n&&n.handle,r)},this.selectInstance=function(e,t,n,r){u.telemetryContext.trackNewOperation(_.selectResource,e);var i=e,o=u.userContext.getHeaders({},"")[J.msFlight]||"";if((null===o||void 0===o?void 0:o.includes(Q.enablePaymentAgentChallenge))&&(i=Gt.verifyClientSupported(e)),u.eventHub.apiCalled(me.selectResource,{pidlDocInfo:qt.boolify(i),options:qt.boolify(t),actionContext:qt.boolify(n)},{pidlDocInfo:i}),!u.canApiStart(me.selectResource))return u.eventHub.apiReturned(me.selectResource,!1),u.apiFailure(null);var a=u.selectInstanceInternal(i,t,n,r);return u.eventHub.apiReturned(me.selectResource,qt.boolify(a.result),a.promise),a},this.listAddress=function(e,t,n,r){var i=p(p({},e),{resourceType:"Address"});if(u.telemetryContext.trackNewOperation(_.listAddress,i),u.eventHub.apiCalled(me.listAddress,{pidlDocInfo:qt.boolify(e),options:qt.boolify(t),actionContext:qt.boolify(n)},{pidlDocInfo:e}),!u.canApiStart(me.listAddress))return u.eventHub.apiReturned(me.listAddress,!1),u.apiFailure(null);var o=u.selectInstanceInternal(e,t,n,r);return u.eventHub.apiReturned(me.listAddress,qt.boolify(o.result),o.promise),o},this.selectPaymentInstrument=function(e,t,n,r){var i=p(p({},e),{resourceType:"PaymentInstrument"});if(u.telemetryContext.trackNewOperation(_.selectPaymentInstrument,i),u.eventHub.apiCalled(me.selectPaymentInstrument,{pidlDocInfo:qt.boolify(i),options:qt.boolify(t),actionContext:qt.boolify(n)},{pidlDocWithResource:i}),!u.canApiStart(me.selectPaymentInstrument))return u.eventHub.apiReturned(me.selectPaymentInstrument,!1),u.apiFailure(null);var o=u.selectInstanceInternal(i,t,n,r);return u.eventHub.apiReturned(me.selectPaymentInstrument,qt.boolify(o.result),o.promise),o},this.selectSingleInstanceInternal=function(e,t,n,r){return u.selectResource(e,t,tt.selectSingleInstance,(function(){return u.onDownloadSelectSingleResource(n&&n.handle)}),n&&n.targetIdentity,n&&n.handle,r)},this.selectSingleInstance=function(e,t,n,r){if(u.telemetryContext.trackNewOperation(_.selectSingleResource,e),u.eventHub.apiCalled(me.selectSingleResource,{pidlDocInfo:qt.boolify(e),options:qt.boolify(t),actionContext:qt.boolify(n)},{pidlDocInfo:e}),!u.canApiStart(me.selectSingleResource))return u.eventHub.apiReturned(me.selectSingleResource,!1),u.apiFailure(null);var i=u.selectSingleInstanceInternal(e,t,n,r);return u.eventHub.apiReturned(me.selectSingleResource,qt.boolify(i.result),i.promise),i},this.runApi=function(e,t,n,r,i){if(void 0===n&&(n=function(){return!1}),void 0===r&&(r=function(){return!0}),void 0===i&&(i=function(){}),u.eventHub.apiCalled(e),!u.canApiStart(e)||n())return u.eventHub.apiReturned(e,!1),u.apiFailure(!1);var o=t(),a=r();return u.eventHub.apiReturned(e,qt.boolify(a),o),u.apiSuccess(a,i()||o)},this.showResource=function(e){u.telemetryContext.trackNewOperation(_.show);var t=e.pidlDocInfo,n=e.prefillData,r=e.options;return u.runApi(me.showResource,(function(){var e=tt.show,i=Kt.getPidlDocUrl(u.userContext,e,t);return u.getPidl(i,n,e,r,t)}),(function(){return!e||!un.validateShowResourceParams(u.eventHub,e)||!un.validatePidlDocInfo(u.eventHub,t)||!un.validateResourceOptions(u.eventHub,r)}))},this.searchResource=function(e){u.telemetryContext.trackNewOperation(_.search);var t=e.pidlDocInfo,n=e.options;return u.runApi(me.searchResource,(function(){var e=tt.search,r=Kt.getPidlDocUrl(u.userContext,e,t);return u.getPidl(r,null,e,n,t)}),(function(){return!e||!un.validateSearchResourceParams(u.eventHub,e)}))},this.deleteResource=function(e){var t=e.resourceInfo,n=e.resource,r=e.pidlDocInfo,i=e.options;if(u.telemetryContext.trackNewOperation(_.delete,t||r),u.eventHub.apiCalled(me.deleteResource,{resourceInfo:qt.boolify(t),resource:qt.boolify(n),pidlDocInfo:qt.boolify(r),options:qt.boolify(i)},{resourceInfo:t,pidlDocInfo:r}),!u.canApiStart(me.deleteResource)||!e)return u.eventHub.apiReturned(me.deleteResource,!1),u.apiFailure(!1);var o=u.updateOrDeleteResourceInternal(t,n,r,i,tt.delete);return u.eventHub.apiReturned(me.deleteResource,o.result,o.promise),o},this.fundStoredValue=function(e){u.telemetryContext.trackNewOperation(_.fundStoredValue);var t=e.pidlDocInfo,n=e.options;return u.runApi(me.fundStoredValue,(function(){var e=tt.fundStoredValue,r=Kt.getPidlDocUrl(u.userContext,e,t);return u.getPidl(r,null,e,n,t)}),(function(){return!e||!un.validateFundStoredValueParams(u.eventHub,e)}))},this.validateResource=function(e,t,n,r){if(u.telemetryContext.trackNewOperation(_.validateResource,e),u.eventHub.apiCalled(me.validateResource,{pidlDocInfo:qt.boolify(e),options:qt.boolify(t),actionContext:qt.boolify(n)},{pidlDocInfo:e}),!u.canApiStart(me.validateResource))return u.eventHub.apiReturned(me.validateResource,!1),u.apiFailure(null);var i=u.selectResource(e,t,tt.validateInstance,u.onDownloadValidateOrSelectResourceType.bind(u),n&&n.targetIdentity,n&&n.handle,r);return u.eventHub.apiReturned(me.validateResource,qt.boolify(i.result),i.promise),i},this.moveNextPage=function(){return u.runApi(me.moveNextPage,(function(){return u.model.moveNextOrSubmit().catch(u.displaySettings.propagateCallbackException?Xt:Zt)}))},this.submitPage=function(){return u.runApi(me.submitPage,(function(){return u.model.submitAction().catch(u.displaySettings.propagateCallbackException?Xt:Zt)}))},this.moveToLastPage=function(){return u.runApi(me.moveToLastPage,(function(){return u.model.moveToLastPage().catch(Zt)}))},this.movePrevPage=function(){return u.runApi(me.movePrevPage,(function(){return u.model.movePrevOrCancel().catch(Zt)}))},this.moveToFirstPage=function(){return u.runApi(me.moveToFirstPage,(function(){return u.model.moveToFirstPage().catch(Zt)}))},this.refreshData=function(e){return u.runApi(me.refreshData,()},this.cancel=function(){return u.runApi(me.cancel,()},this.getSelectedResource=function(){return u.runApi(me.getSelectedResource,(function(){return $t()}),(function(){return!1}),(function(){var e={},t=u.model.getCurrentPage();if(t){var n=t.operationType;n===tt.selectSingleInstance?e=fn.getDefaultSuccessPidlPayload([t],u.eventHub):n!==tt.selectInstance&&n!==tt.select||(e=qt.deepCopy(u.model.createUserInputData(!0,!0)))}return e.operationType=u.model.operationType,e||(e=void 0),e}))},this.invokePageDefaultAction=function(){return u.runApi(me.invokePageDefaultAction,(,(function(){return!1}),(function(){return!0}),(function(){return $t()}))},this.returnUserInputData=function(){return new Promise((function(e,t){u.model.returnUserInputData().then((function(t){var n={};n.payload=qt.deepCopy(t),n.operationType=tt.getPidlPayload,e(n)}),()}))},this.getPidlPayload=function(){return u.runApi(me.getPidlPayload,(function(){return u.returnUserInputData().then((function(e){return u.eventHub.payloadCreated(e)}),Zt)}),(,(function(){return!0}),(function(){return $t()}))},this.postMessageToChildIFrames=function(e){return u.runApi(me.postMessageToChildIFrames,(function(){}),(function(){return!1}),(,()},this.testHookRenderPidl=function(e,t,n){return u.model.pidlDocManager.setPidlDoc(u.eventHub,e),u.model.operationType=t,u.model.populate(n).catch(Zt)},this.testHookRenderPidlPage=function(e,t,n,r){void 0===n&&(n=0),u.telemetryContext.trackNewOperation(_.renderPidlDocument),u.eventHub.apiCalled(me.renderPidlDocument);var i=u.testHookRenderPidl(e,t,r).then((function(){u.model.moveToPageIndex(n).catch(Zt),u.stateManager.setState(le.executing)}));return u.eventHub.apiReturned(me.renderPidlDocument,!0,i),!0};var d=i.telemetryLogger,c=i.getPidlDocument,m=i.view,f=m&&qt.isFunction(m.getViewType)&&m.getViewType();if(this.telemetryContext=new Or(o,f),this.eventHub=new rn(d,this.telemetryContext),this.stateManager=new Tr(this.eventHub),Wt.getLoggingService()||Wt.setLoggingService(new _r),!Wt.getOneDSService())if(s)Wt.setOneDSService(s);else{Wt.setOneDSService({getApplicationInsights:getCorrelationVectorPlugin:function(){return{getCv:function(){return{count:0,increment:function(){return this.count=this.count+1,this.getValue()},getValue:isInit:}}}})}if(this.logConstructorCall(e,t,n,r,o),un.validateReturnOptions(this.eventHub,t))if(this.eventHub.addReturnOptions(t),Wt.getCommerceService()||Wt.setCommerceService(new Nr),Wt.getRedirectionService()||Wt.setRedirectionService(new Ur),Wt.getPidlService()||Wt.setPidlService(new Br),Wt.getPidlStoreService()||Wt.setPidlStoreService(new Vr),n&&this.eventHub.addPublicEventHandler(n),this.eventHub.addPrivateEventHandler(this.handlePrivateEvent),a&&this.eventHub.addPrivateEventHandler(a),un.validateInputParameters(this.eventHub,e,r,o,i)){if(this.callbacks=i,this.transformers=l,this.userContext=new kr(e),this.displaySettings=new Qt(r),!this.displaySettings.containerId)return this.eventHub.failure(new Tt.inputParameterValidationFailedError(kt.containerIdNotFound,"containerId",[this.displaySettings.containerId])),void this.eventHub.apiReturned(me.constructor,!1);this.model=new Sr({urls:t.urls,userContext:this.userContext,displaySettings:this.displaySettings,eventHub:this.eventHub,pidlDocManager:new Dr(c),stateManager:this.stateManager,callbacks:this.callbacks,transformers:this.transformers});var h=this.callbacks,y=h.iFrameMessageHandler,g=h.view;this.viewEventHandler=new xr({eventHub:this.eventHub,model:this.model,displaySettings:this.displaySettings,view:g,iFrameMessageHandler:y,userContext:this.userContext}),this.stateManager.setState(le.initialized)}else this.eventHub.apiReturned(me.constructor,!1);else this.eventHub.apiReturned(me.constructor,!1)}return e.prototype.sumbitAction=e.prototype.apiSuccess=function(e,t){return{result:e,promise:t.catch(this.displaySettings.propagateCallbackException?Xt:Zt)||$t()}},e.prototype.apiFailure=e.prototype.onDownloadSelectResource=e.prototype.onDownloadValidateOrSelectResourceType=e.prototype.onDownloadSelectSingleResource=function(e){if(this.model.pidlDocManager.isEmpty()){var t={handle:e,action:"selectResource"};return this.eventHub.success(t),$t()}return this.model.populate()},e.prototype.getPidl=function(e,t,n,r,i){var o=this;return this.model.operationType=n,this.model.operationOptions=r,this.model.modelData.setInputParametersInPartnerDataSource({pidlDocInfo:i}),this.model.pidlDocManager.setOperationInfo({operationType:n}),this.downloadPidlDocument(e,r,(function(){return o.model.populate(t,!1)}),i).then((,Zt)},e.prototype.downloadInstance=function(e,t,n,r){var i=this;return new Promise((function(o,a){var s=Wt.getPidlService(),l=s.getRequestInstance(i.eventHub,e,i.userContext,n);s.getInstance(i.eventHub,l).then((function(s){i.eventHub.instanceDownloaded(),t||(t=Jt.getPidlDocInfoFromResource(e,s),i.telemetryContext.updateResourceInfo(t));var l=Kt.getPidlDocUrl(i.userContext,n,t);if(l&&l.url)return i.downloadPidlDocument(l,r,(,t).then((function(e){return o(e)}),a);a()}),(function(e){var t=Gt.createServerError(kt.resourceInstanceDownloadFailed,l.url,e,[e.errorMessage]);i.eventHub.failure(t),a(t)}))}))},e.prototype.downloadPidlDocument=function(e,t,n,r,i){var o=this;return this.model.downloadPidlDocument(e,r,i).then((function(e){return Bt(e)?o.model.handleClientAction(e):n()}))},e}(),jr=function(){function e(e,t){this.defaultWaitTime=500,this.eventHub=e,this.mockFunctions=t||[],this.mockFunctionsMap={},this.mockFunctions.forEach((,this)}return e.prototype.getMockedFunctionNames=function(){var e=[];return this.mockFunctions.forEach((),e},e.prototype.createMockedFunction=function(t,n){return e.setArity(function(){var e=this.mockFunctionsMap[t];return e.triggers.forEach((function(e){setTimeout(this.eventHub[e.name].bind(this.eventHub),this.defaultWaitTime,e.params)}),this),e.returns}.bind(this),n)},e.createArguments=function(e){if(e<1)return"arg";for(var t="arg0",n=1;n<e;n++)t=t+",arg"+n;return t},e.setArity=function(t,n){return new Function(e.createArguments(n),"return this.apply(this, arguments);").bind(t)},e}(),Wr=function(){function e(){Wt.getTelemetryInjectionService()||Wt.setTelemetryInjectionService(new zr)}return e.prototype.logEvent=e.prototype.getCorrelationId=e.prototype.getHttpRequestCorrelationHeader=function(){var e=Ar.getIncrementedCV();if(e)return{name:J.msCV,value:e}},e}(),zr=function(){eturn e.prototype.logEvent=function(e,t,n){t===M.fetchCallCompleted?this.logOSREvent(e,n&&n.httpRequestTelemetryData):this.logGenericEvent(e,t,n)},e.prototype.logGenericEvent=function(e,t,n){var r,i,o,a,s;try{if(qt.isObject(e)){var l=((window||{}).location||{}).href||"",u={name:"Microsoft.Commerce.Payments.PidlSdk.PageEvent",partB:{pageName:(document||{}).title||"",uri:l,destUri:l,customSessionGuid:e.sessionId,impressionGuid:e.operationId,contentJsonVer:1,content:JSON.stringify({eventName:t})},partC:{sdkVersion:e.sdkVersion,sdkViewType:e.sdkViewType,env:e.env,partnerName:null===(r=e.partnerContext)||void 0===r?void 0:r.partnerName,partnerContext:JSON.stringify(e.partnerContext),partnerContextMap:e.partnerContext,parentOperationId:(null===(i=e.partnerContext)||void 0===i?void 0:i.parentOperationId)||e.operationId,partnerFlowId:null===(o=e.partnerContext)||void 0===o?void 0:o.flowId,partnerSessionId:null===(a=e.partnerContext)||void 0===a?void 0:a.sessionId,partnerScenarioId:null===(s=e.partnerContext)||void 0===s?void 0:s.scenarioId,operationId:e.operationId,operationType:e.operationType,eventName:t,eventParameters:JSON.stringify(n),eventParametersMap:n,baseType:"Ms.Content.PageAction"}};qt.isObject(e.telemetryResource)&&(u.partC.resourceType=e.telemetryResource.resourceType,u.partC.resourceParameters=JSON.stringify(e.telemetryResource.parameters),u.partC.resourceParametersMap=e.telemetryResource.parameters),Ar.writeEvent(u.name,u.partB,u.partC)}}catch(d){Wt.getLoggingService().logError("TelemetryError",d)}},e.prototype.logOSREvent=function(e,t){var n,r,i,o,a;try{if(qt.isObject(e)){var s={partner:((e.telemetryResource||{}).parameters||{}).partner,telemetryContext:e,responseHeaders:t.headers},l={name:"Ms.Webi.OutgoingRequest",partB:{operationName:t.operationName,targetUri:t.targetUri,latencyMs:t.latencyMs,serviceErrorCode:t.succeeded||!t.serviceErrorCode||isNaN(t.serviceErrorCode)?-1:t.serviceErrorCode,succeeded:t.succeeded,requestMethod:t.requestMethod,responseContentType:t.responseContentType,protocolStatusCode:t.protocolStatusCode,dependencyOperationName:t.dependencyOperationName,dependencyOperationVersion:t.dependencyOperationVersion&&t.dependencyOperationVersion.toString(),dependencyName:t.serviceName,dependencyType:"webservice",responseSizeBytes:t.contentLength},partC:{customSessionGuid:e.sessionId,impressionGuid:e.operationId,message:t.failureResponse,retryCount:t.retryCount,customData:JSON.stringify(s),sdkVersion:e.sdkVersion,sdkViewType:e.sdkViewType,env:e.env,partnerName:null===(n=e.partnerContext)||void 0===n?void 0:n.partnerName,partnerContext:JSON.stringify(e.partnerContext),operationId:e.operationId,parentOperationId:(null===(r=e.partnerContext)||void 0===r?void 0:r.parentOperationId)||e.operationId,partnerFlowId:null===(i=e.partnerContext)||void 0===i?void 0:i.flowId,partnerSessionId:null===(o=e.partnerContext)||void 0===o?void 0:o.sessionId,partnerScenarioId:null===(a=e.partnerContext)||void 0===a?void 0:a.scenarioId,partnerContextMap:e.partnerContext,operationType:e.operationType,baseType:"Ms.Qos.OutgoingServiceRequest"}};Ar.writeEvent(l.name,l.partB,l.partC)}}catch(u){Wt.getLoggingService().logError("TelemetryError",u)}},e}(),Gr=new(function(){function e(){var e=this;this.getContainerClassName=function(e){if(e)switch(e){case K.busyBlock:return S.busyBlock;case K.errorBlock:return S.errorBlock;case K.helpDialogBlock:return S.helpDialogBlock;case K.helpDialogContentBlock:return S.helpDialogContentBlock;case K.modalDialogBlock:return S.modalDialogBlock;case K.modalDialogContentBlock:return S.modalDialogContentBlock;case K.pageContentBlock:return S.pageContentBlock;case K.submitBlock:return S.submitBlock}},this.getDivClassName=function(t,n,r){switch(n){case w.dropdown:return[S.dropdownDiv,S.propertyDiv];case w.checkBox:return[S.checkBoxDiv,S.propertyDiv];case w.textBox:return[S.textBoxDiv,S.propertyDiv];case w.secureProperty:return[S.propertyDiv];case w.image:return[S.imageDiv];case w.logo:return[S.logoDiv];case w.button:return[S.buttonDiv];case w.iFrame:return[S.iFrameDiv];case w.group:var i=[S.groupDiv],o=e.getContainerClassName(r);return o&&i.push(o),i}},this.generateClassName=function(t,n,r,i,o){var a=e.getClassName(t,n,r);if(i){var s=e.getDivClassName(t,i,o);s&&(a=a.concat(s))}if(a)return a.join(" ")},this.getClassName=function(t,n,r){switch(n){case q.div:return[S.div];case q.label:return[S.label];case q.dropdown:return[S.property,S.dropdown,e.getPropertyClassName(r)];case q.radio:return[S.property,S.radio,e.getPropertyClassName(r)];case q.buttonList:return[S.property,S.buttonList,e.getPropertyClassName(r)];case q.checkBox:return[S.property,S.checkBox,e.getPropertyClassName(r)];case q.textBox:return[S.property,S.textBox,e.getPropertyClassName(r)];case q.secureProperty:return[S.secureProperty];case q.button:return[S.button];case q.iFrame:return[S.iFrame];case q.heading:return[S.staticText,S.heading];case q.subHeading:return[S.staticText,S.subHeading];case q.text:return[S.staticText,S.text];case q.textGroup:return[S.staticText,S.text,S.textGroup];case q.hyperlink:return[S.hyperlink];case q.image:return[S.image];case q.logo:return[S.logo];case q.errorDiv:return[S.errorDiv];case q.error:return[S.error];case q.audio:return[S.audio];default:return void t.failure(new Tt.unexpectedError(kt.noMappingToGetHtmlClassNameForElement,[n]))}},this.getDivId=function(t){return e.getId(C.div,t)},this.getId=function(e,t){return qt.replaceCharactersForHtml(qt.startsWith(t,e)?t:e+t)},this.getPropertyClassName=this.concatIdElement=return e.prototype.concatClassName=function(e,t){return e&&t&&e.trim()+" "+t||e||t},e}()),qr=Object.freeze({__proto__:null}),Kr=Object.freeze({__proto__:null,constants:We,modelElementTypes:ar,promise:nn,eventArgs:qr,oneDSAdapter:Ar,commerce2:Lt,commerceHelper:jt,config:Ye,configManager:Jt,error:Tt,fetchHelper:ln,inputValidationHelper:un,iocContainer:Wt,modelElementFactory:mn,modelElementsHelper:fn,pidlDocHelper:zt,tokenizer:Er,typeHelper:qt,urlBuilder:Kt,userInputDataHelper:Fr,userInputDataTransformer:Hr,userInputDataValidator:gr,utils:Gt,validationFunctions:hr,version:Rr,webCrypto:Pr,htmlAttributeHelper:Gr,hmac:Ir,DisplaySettings:Qt,errorMessages:kt,EventHub:rn,mockFactory:jr,Resources:dn,stateManager:Tr,telemetryContext:Or,userContextWrapper:kr,ViewEventHandler:xr,DataCache:cn,DataStore:pn,InputPrefillDataManager:pr,Model:Sr,ModelData:fr,ModelDataProperty:mr,MultiPropertySelector:lr,pidlDocumentManager:Dr,Validator:vr,commerceService:Nr,loggingService:_r,pidlService:Br,pidlStoreService:Vr,redirectionService:Ur,oneDSLogger:Wr,telemetryInjectionService:zr}),Jr=Object.freeze({__proto__:null,env:wr,internal:Kr,pidlDocumentTypes:Ut,controlApi:Lr,get EncryptionTypes(){return en},get PaymentMethodPIIDs),Qr=ar Xr=Object.create;bject.create;var Yr,ei,ti=Ie.pidlReact,ni=qt.startsWith;(Yr=t.AppScenario||(t.AppScenario={})).None="none",Yr.AddAddress="addAddress",Yr.AddPaymentInstrument="addPaymentInstrument",Yr.EditPaymentInstrument="editPaymentInstrument",Yr.DeletePaymentInstrument="deletePaymentInstrument",Yr.ApplyPaymentInstrument="applyPaymentInstrument",Yr.SelectPaymentMethod="selectPaymentMethod",Yr.ConfirmPayment="confirmPayment",Yr.SelectPaymentInstrument="selectPaymentInstrument",Yr.ListAddress="listAddress",Yr.RiskChallenge="riskChallenge",Yr.ProfilePrerequisite="profilePrerequisite",Yr.PaymentInstrumentDetails="paymentInstrumentDetails",Yr.HandlePaymentChallenge="handlePaymentChallenge",Yr.VerifyAddress="verifyAddress",(ei=t.ElementType||(t.ElementType={})).alert="alert",ei.button="button",ei.buttonGroup="buttonGroup",ei.checkbox="checkbox",ei.dialog="dialog",ei.dropdown="dropdown",ei.error="error",ei.group="group",ei.captcha="captcha",ei.audio="audio",ei.heading="heading",ei.helpDialog="helpDialog",ei.hyperlink="hyperlink",ei.iframe="iframe",ei.secureProperty="secureProperty",ei.securePropertyLabel="securePropertyLabel",ei.image="image",ei.label="label",ei.logo="logo",ei.subheading="subheading",ei.text="text",ei.textBox="textBox",ei.radio="radio",ei.modal="modal",ei.overlay="overlay",ei.spinner="spinner",ei.panel="panel",ei.textgroup="textgroup",ei.filePicker="filePicker",ei.separator="separator",ei.tooltip="tooltip";var ri,ii,oi="prod",ai={DefaultAddressType:"jarvis_v3",Operation:"add",ContainerId:"addResource",ResourceType:"Address",UserId:"me",ViewTermsId:"viewTermsButton"},si={AllowedPaymentMethods:["credit_card","ewallet.paypal","ewallet.kakaopay","ewallet.stored_value","mobile_billing_non_sim","online_bank_transfer.paysafecard","ewallet.venmo"],Operation:"select",ContainerId:"selectResource",ResourceType:"PaymentInstrument",UserId:"me"},li={AddressType:"jarvis_v3",Operation:"update",ContainerId:"updateResource",ResourceType:"AddressEx",UserId:"me"},ui={ContainerId:"RiskChallenge",Operation:"RenderPidlPage",ResourceType:"Challenge",UserId:"me"},di={ContainerId:"RiskChallenge",Operation:"RenderPidlPage",ResourceType:"Challenge",UserId:"me",RiskChallengeData:"globalPIQrCode",ViewTermsId:"globalPIQrCodePrivacyStatement",RedirectButton:"globalPIQrCodeRedirectButton",RedirectButtonPage2:"globalPIQrCodeRedirectButtonPage2"},ci={Operation:"validateInstance",ContainerId:"validateResource",ResourceType:"Address",UserId:"me"},pi={isCreditCard:"isCreditCard",isCreditCardExpired:"isCreditCardExpired",isEwalletStoredValue:"IsEwalletStoredValue"},mi={AllowedPaymentMethods:["credit_card","direct_debit","online_bank_transfer.paysafecard","ewallet","finance_leasing","mobile_billing_non_sim","virtual"],Operation:"select",ContainerId:"selectResource",ResourceType:"PaymentInstrument",UserId:"me",SecondaryPIFilter:{SplitPaymentSupported:!0},SelectPaymentInstrument:"SelectPaymentInstrument"},fi={NewPaymentMethodLink:"newPaymentMethodLink",RedeemGiftCardLink:"redeemGiftCardLink",ManagePaymentInstrument:"ManagePaymentInstrument",redeemGiftCardHandlerName:"redeemGiftCardHandler"},hi={Operation:"selectInstance",ContainerId:"listAddress",ResourceType:"Address",UserId:"me",DefaultAddressType:"jarvis_v3"},yi={Operation:"add",ContainerId:"addPaymentInstrument",ResourceType:"PaymentInstrument",UserId:"me",ViewTermsId:"viewTermsButton",LogoRowElement:"acceptedCardsLogos"},gi={ContainerId:"deletePaymentInstrument",Operation:"delete",ResourceType:"PaymentInstrument",UserId:"me"},vi={ContainerId:"editPaymentInstrument",ViewTermsId:"viewTermsButton",Operation:"update",ResourceType:"PaymentInstrument",UserId:"me"},Pi={Operation:"add",ContainerId:"addPaymentInstrument",ResourceType:"PaymentInstrument",UserId:"me",ViewTermsId:"viewTermsButton",PaymentType:"mc",PaymentFamily:"credit_card",DefaultScenario:"xboxCreditCardInit"},bi={Operation:"update",ContainerId:"profilePrerequisite",ResourceType:"Profile",UserId:"me",type:"consumer"},Ii={Operation:"selectSingleInstance",ContainerId:"paymentInstrumentDetails",ResourceType:"PaymentInstrument",UserId:"me",type:"consumer",Scenario:"details",ChangeButtonId:"changeSinglePIButton"},Ei={ContainerId:"handlePaymentChallenge",Operation:"RenderPidlPage",ResourceType:"Challenge",UserId:"me",ViewTermsId:"viewTermsButton"},Si={ViewTermsId:"viewTermsButton"};(ri=t.AddressScenario||(t.AddressScenario={})).billing="billing",ri.shipping="shipping",ri.profile="profile",(ii=t.ApplyPaymentInstrumentScenario||(t.ApplyPaymentInstrumentScenario={})).xboxCoBrandedCard="xboxCoBrandedCard",ii.xboxApplyFullPageRender="xboxApplyFullPageRender";var Di={propertyName:function(e,t){return t.propertyName=e.getPropertyName()},elementId:function(e,t){return t.elementId=e.id},resolvedLogo:pidlKey:;function Ci(){return function(e,t){function n(n,r){var o=n.element;if(o){for(var a={},s=0,l=t;s<l.length;s++){var u=l[s],d=Di[u];if(d)d(o,a);else{var c=o[u];a[u]=c instanceof Function?c():o[u]}}return i.createElement(e,Xr({ref:r},a,n))}return null}return n.displayName="ElementWrapper(".concat(t.join("|")," => ").concat(e.displayName||"UnknownComponent",")"),i.forwardRef(n)}}var Ti=Ci(),ki=(Ci(),Ci(),Ci()),xi=Ci(),wi=Ci(),Ri=Ci(),Ai=Ci(),Oi=Ci(),_i=Ci(),Fi=Ci(),Hi=Ci(),Ni=Ci(),Mi=Ci(),Bi=Ci(),Vi=Ci(),Ui=Ci(),Li=Ci(),ji=Ci(),Wi=Ci(),zi=(Ci(),i.createContext({pidlDocs:[]}),i.createContext(!1)),Gi=i.createContext({values:{},accessibilityText:{},errors:{}}),qi=i.createContext({}),Ki=i.createContext({elementFactory:null,displayOptions:null,displaySettings:null,theme:null,userContext:null}),Ji=i.createContext(null),Qi=i.createContext(null);function Zi(e){void 0===e&&(e={});var t=[];if(e)for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];qt.startsWith(i,Ie.noPidlddc)||qt.startsWith(i,Ie.pidlReact)?t.push(e[i]):be[i]||Gt.isTagPrefixKnown(i)||t.push(D.taggedClass+e[i])}return t}function Xi(e){void 0===e&&(e={});var t=[];if(e)for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];qt.startsWith(i,Ie.pidlReact)&&t.push(e[i].substring(Ie.pidlReact.length))}return t}var $i=function(e){var n=e.propertyName,r=(0,Gr.getId)(We.htmlElementIdPrefixes.error,n);return i.createElement(Ki.Consumer,null,(function(e){return i.createElement(Gi.Consumer,null,(function(o){var s=e.elementFactory,l=(e.displayOptions,e.displaySettings,o.errors[n]?o.errors[n].message:null);if(!l)return null;var u={errorMessage:l};return s&&s.canCreate(t.ElementType.error,u,{})?s.create(t.ElementType.error,u):i.createElement("span",{className:a("pidlddc-error",{"d-none":!l},"text-danger"),id:r,tabIndex:-1,role:"alert"},l)}))}))};$i.displayName="Error";var Yi=function(e){var n=e.message;return i.createElement(Ki.Consumer,null,(function(e){var r=e.elementFactory,o=(e.displayOptions,e.displaySettings,{elementId:"pidlddc-page-alert-id",message:n});return r&&r.canCreate(t.ElementType.alert,o,{})?r.create(t.ElementType.alert,o):i.createElement("div",{id:o.elementId,className:"pidlddc-error-alert",role:"alert"},o.message)}))};Yi.displayName="PageAlert";var eo=function(e){var n=e.className,r=e.element,o=e.elementId,s=e.displayContent,l=e.pidlAction,u=e.disabled,d=e.accessibilityName,c=e.onClick,p=e.tags,m=e.styleHints,f=e.tooltipText,h=e.gridColumn,y=e.gridRow,g=l.type,v=l.isDefault,P="submit"===g||v,b=(0,Gr.getId)(We.htmlElementIdPrefixes.button,o),I=a(n,Zi(p)),E=r.propertyElementRef;return i.createElement(Ki.Consumer,null,(function(e){var n=e.elementFactory,r=e.theme,o={id:b,displayContent:s,onClick:c,additionalClassName:I,disabled:u,ariaLabel:d,primary:P,type:P?"primary":"secondary",propertyElementRef:E,theme:r,styleHints:m,tooltipText:f,gridColumn:h,gridRow:y};return n&&n.canCreate(t.ElementType.button,o,{})?n.create(t.ElementType.button,o):i.createElement("button",{id:b,className:a(P?"pidlddc-highlighted":"pidlddc-back",I),disabled:u,"aria-label":d,onClick:c},s)}))},to=Vi(eo,["elementId","pidlAction","disabled","displayContent","accessibilityName","tags","styleHints","tooltipText"]);to.displayName="Button";var no=function(e){var n=e.elementId,r=e.displayText,o=e.displayImageUrl,a=e.createElement,s=e.displayContentContainer,l=e.isDisabled,u=e.pidlKey,d=e.onClick,c=e.buttonAction,p=e.containerDisplayId,m=e.ariaLabel,f=e.propertyElementRef,h=e.styleHints,y=s?a(s):[o?i.createElement("img",{src:o,key:"".concat(n,"-img"),id:"pidlddc-buttonlist-".concat(n,"-").concat(u)}):null,r];return i.createElement(Ki.Consumer,null,(function(e){var r=e.elementFactory,o=e.displayOptions,a=Gr,s=(0,a.concatIdElement)((0,a.getId)(o.inputPropertyIdPrefix,n),u),g=function(){return d({id:s,pidlAction:c,value:c.context,dest:""})},v={id:s,key:u,onClick:g,additionalClassName:"",displayContent:y,disabled:l,primary:!1,type:"list",containerDisplayId:p,ariaLabel:m,propertyElementRef:f,styleHints:h};return r&&r.canCreate(t.ElementType.button,v,{})?r.create(t.ElementType.button,v):i.createElement("button",{id:s,disabled:l,onClick:g,"aria-label":m},v.displayContent)}))},ro=Wi(no,["displayImageUrl","displayContentContainer","displayText","isDisabled","displayContent","displayType","pidlKey","styleHints"]);ro.displayName="ButtonListElement";var io=function(e){var n=e.createElement,r=e.elementId,o=e.possibleOptions,s=e.onClick,l=e.tags,u=e.displayId,d=e.element,c=e.styleHints,p=[],m=(0,Gr.getId)(We.htmlElementIdPrefixes.buttongroup,r),f=d.propertyElementRef,h=!1;for(var y in o)if(o.hasOwnProperty(y)&&o[y]){var g=o[y],v=o[y].pidlAction||{context:{id:y},type:""},P=null;h||g.isDisabled||(P=f,h=!0),p.push(i.createElement(ro,{element:g,elementId:r,createElement:n,onClick:s,buttonAction:v,pidlKey:y,containerDisplayId:u,propertyElementRef:P,ariaLabel:null===g||void 0===g?void 0:g.accessibilityName}))}return i.createElement(Ki.Consumer,null,(function(e){var n=e.elementFactory,r={id:m,additionalClassName:a(Zi(l)),options:p,optionsDirection:"vertical",displayId:u,propertyElementRef:f,styleHints:c};return n&&n.canCreate(t.ElementType.buttonGroup,r,{})?n.create(t.ElementType.buttonGroup,r):i.createElement("div",{className:a(Zi(l)),id:r.id},p)}))},oo=Hi(io,["elementId","possibleOptions","disabled","hidden","tags","displayId","styleHints"]);oo.displayName="ButtonList";var ao=function(e){var n=e.elementId,r=e.required,o=e.disabled,s=e.hidden,l=e.propertyName,u=e.displayName,d=e.accessibilityName,c=e.onChange,p=e.tags,m=e.displayId,f=e.useDisplayIdAsKeyForCheckState,h=e.element,y=e.styleHints,g=h.propertyElementRef,v=Gr,P=v.getDivId,b=v.getId,I=P(n);return i.createElement(Ki.Consumer,null,(function(e){return i.createElement(Gi.Consumer,null,(function(n){var v=e.elementFactory,P=e.displayOptions,E=e.displaySettings,S=b(P.inputPropertyIdPrefix,h.displayType===st.prefillControl?E.prefillCheckboxBlock.id:l),D={elementId:S,displayContent:u,onChange:c,displayId:m,disabled:o,ariaLabel:n.accessibilityText[l]||d,additionalClassName:a(Zi(p)),inlineError:n.errors[l]?n.errors[l].message:void 0,checked:f?!!n.values[m]:!0===n.values[l]||"true"===n.values[l],hidden:s,required:r,id:S,propertyName:l,propertyElementRef:g,styleHints:y},C=v&&v.canCreate(t.ElementType.checkbox,D,{});if(C)return function(e,t){return(null===e||void 0===e?void 0:e.isReactNative)&&e.isReactNative()?t:i.createElement("div",{id:I},t)}(v,i.createElement(i.Fragment,null,v.create(t.ElementType.checkbox,D),C&&C.inlineError?null:i.createElement($i,{propertyName:l})));var T="".concat(D.elementId,"_label");return i.createElement("div",{id:I},i.createElement("label",{id:T,htmlFor:S,"aria-label":D.ariaLabel,hidden:D.hidden},i.createElement("input",{type:"checkbox",id:S,required:D.required,hidden:D.hidden,disabled:D.disabled,checked:D.checked,"aria-labelledby":T,onChange:),D.displayContent),i.createElement($i,{propertyName:l}))}))}))},so=Mi(ao,["elementId","propertyName","accessibilityName","displayName","required","hidden","disabled","tags","displayId","styleHints"]);so.displayName="CheckBox";var lo=function(){eturn e.prototype.addChild=e.prototype.addHeading=function(e,t){return this.addChild({displayId:e,displayContent:t,displayType:st.heading})},e.prototype.addSubheading=function(e,t){return this.addChild({displayId:e,displayContent:t,displayType:st.subheading})},e.prototype.addText=function(e,t){return this.addChild({displayId:e,displayContent:t,displayType:st.text})},e.prototype.addGroup=function(t,n,r){void 0===r&&(r=!1),this.group.members||(this.group.members=[]);var i={displayId:t,isSubmitGroup:r,displayType:st.group,layoutOrientation:lt.vertical,displayName:n||"",members:[]};return this.group.members.push(i),new e(i)},e.prototype.addInlineGroup=function(t,n,r){void 0===r&&(r=!1),this.group.members||(this.group.members=[]);var i={displayId:t,isSubmitGroup:r,displayType:st.group,layoutOrientation:lt.inline,displayName:n||"",members:[]};return this.group.members.push(i),new e(i)},e.prototype.addExpression=function(e,t){return this.addChild({displayId:e,displayContent:t,displayType:st.expression})},e.prototype.addTextGroup=function(t,n){this.group.members||(this.group.members=[]);var r={displayId:t,isSubmitGroup:!1,displayType:st.textGroup,layoutOrientation:lt.inline,displayName:n||"",members:[]};return this.group.members.push(r),new e(r)},e.prototype.addSubmitGroup=e.prototype.addButton=function(e,t,n,r){return void 0===r&&(r={}),this.addChild(Xr({displayId:e,pidlAction:n,displayContent:t,displayType:"button",tags:{accessibilityName:t}},r))},e.prototype.addSubmitButton=function(e,t,n){return n=Xr({type:"submit",isDefault:!0},n),this.addButton(e,t,n,{isHighlighted:!0})},e.prototype.addCancelButton=function(e,t,n){return n=Xr({type:"gohome"},n),this.addButton(e,t,n,{isBack:!0})},e}(),uo=function(e){var t=this;this.addDataDescription=this.addPage=function(e,n){var r={displayId:e,displayName:n,members:[],displayType:st.page};return t.pages.push(r),new lo(r)},this.build=this.identity=e,this.dataDescription={},this.pages=[]},co=function(e){var t=this;this.required=function(e,n){return t.validations.push({error_code:e,error_message:n,validationType:nt.regex,regex:"^(?!^[\\u0009\\u000A\\u000D\\u0020\\u2000-\\u200B]*$)[\\u0009\\u000A\\u000D\\u0020-\\uD7FF\\uE000-\\uFFFD\\u10000-\\u10FFFF]{1,128}$"}),t},this.hasLetters=function(e,n,r){var i="number"===typeof r?r:"".concat(r[0],",").concat(r[1]);return t.validations.push({error_code:e,error_message:n,validationType:nt.regex,regex:"^(?!^[\\u0009\\u000A\\u000D\\u0020\\u2000-\\u200B]*$)[\\u0009\\u000A\\u000D\\u0020-\\uD7FF\\uE000-\\uFFFD\\u10000-\\u10FFFF]{".concat(i,"}$")}),t},this.alphanumeric=function(e,n,r){var i="number"===typeof r?r:"".concat(r[0],",").concat(r[1]);return t.validations.push({error_code:e,error_message:n,validationType:nt.regex,regex:"^[A-Za-z0-9]{".concat(i,"}$")}),t},this.numeric=function(e,n,r){var i="number"===typeof r?r:"".concat(r[0],",").concat(r[1]);return t.validations.push({error_code:e,error_message:n,validationType:nt.regex,regex:"^\\d{".concat(i,"}$")}),t},this.exactly=function(e,n,r){return r=Array.isArray(r)?r.join("|"):r,t.validations.push({error_code:e,error_message:n,validationType:nt.regex,regex:"^".concat(r,"$")}),t},this.validations=e},po=function(e,t){var n=this;this.validations=[],this.possibleValues=null,this.possibleOptions=null,this.dataCollectionSource=null,this.defaultValue=null,this.isDisabled=null,this.setDataCollectionSource=function(e,t,r){return n.dataCollectionSource=e,n.possibleOptions={},n.possibleOptions[t]={displayText:r,isDisabled:!1},n},this.validate=this.setPossibleValues=function(e){n.possibleOptions={};for(var t=0,r=Object.keys(e);t<r.length;t++){var i=r[t];n.possibleOptions[i]={displayText:e[i],isDisabled:!1}}return n.possibleValues=e,n},this.setDisabled=this.setDefaultValue=this.buildData=function(){var e={validations:n.validations};return n.validations.length>0&&(e.validation=n.validations[0]),n.dataCollectionSource&&(e.possible_values={}),n.defaultValue&&(e.default_value=n.defaultValue),Xr(Xr({},n.base),e)},this.buildDisplay=function(e){var t=n.propertyName,r={};n.dataCollectionSource?(r.dataCollectionSource=n.dataCollectionSource,r.possibleOptions=n.possibleOptions):n.possibleValues&&(r.possibleValues={},r.possibleOptions={},Object.keys(n.possibleValues).forEach((function(e){var t=n.possibleValues&&n.possibleValues[e];t&&(r.possibleValues[e]=t,r.possibleOptions[e]={displayText:t,isDisabled:!1})})),r.displaySelectionText="--- ".concat(t," ---"));var i=n.validations[0],o=i?{defaultErrorMessage:i.error_message,fromErrorCode:[{errorCode:i.error_code,errorMessage:i.error_message}]}:{},a=!!n.isDisabled;return Xr(Xr({displayName:t,showDisplayName:"true",displayId:"display_".concat(t),displayType:"property",propertyName:t,tags:{accessibilityName:t},displayErrorMessages:o,isDisabled:a},r),e)},this.propertyName=e,this.base=t||{propertyType:"userData",type:"string",dataType:"string",is_updatable:!0}},mo=function(e){var t=e.displayId,n=e.required,r=e.disabled,o=e.hidden,a=e.elementId,s=e.propertyName,l=e.displayName,u=e.accessibilityName,d=e.onChange,c=e.tags,p=e.element,m=(0,e.getMultiPropertySelectorPossibleOptions)(p.pidlIdentity),f=o||!m;return i.createElement(so,{element:p,elementId:a,required:n,hidden:f,disabled:r,propertyName:s,displayName:l,accessibilityName:u,onChange:displayId:t,useDisplayIdAsKeyForCheckState:!0,tags:c})},fo=Mi(mo,["elementId","propertyName","accessibilityName","displayName","displayId","required","hidden","disabled","tags"]);fo.displayName="PrefillCheckBox";var ho=function(e){function n(t){var n=e.call(this,t)||this;return n.toggleDisplay=n.state={open:!0},n}return Zr(n,e),n.prototype.render=function(){var e=this.props,n=e.layoutOrientation,r=e.elementId,o=e.childNodes,s=e.tags,l=e.element,u=l.displayId,d=l.type,c=this.state.open,p=(0,Gr.getDivId)(r);return i.createElement(Ki.Consumer,null,(function(e){var l=e.elementFactory,m=e.displaySettings,f={childNodes:o,layoutOrientation:n,elementId:p,groupClassName:Zi(s),displayId:u,type:d,displaySettings:m,open:c};if(l&&l.canCreate(t.ElementType.modal,f,{}))return l.create(t.ElementType.modal,f);var h={position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"rgba(128,128,128,0.5)",display:c?"initial":"none"};return f.groupClassName=f.groupClassName.filter((),i.createElement("div",{key:"".concat(r,"-modal"),id:"".concat(r,"-modal"),style:h,className:a(f.groupClassName)},i.createElement("dialog",{key:"".concat(r,"-modal-content"),id:"".concat(r,"-modal-content"),tabIndex:-1,open:!0,style:{position:"fixed",top:"50vh",left:"50vw",transform:"translate(-50%,-50%)",height:"75%",width:"50%",backgroundColor:"white",padding:"50px",overflow:"scroll"}},i.createElement(zi.Provider,{value:"inline"===n},o)))}))},n}(i.Component),yo=ki(ho,["elementId","layoutOrientation","tags"]);yo.displayName="Modal";var go=Fi(function(e){function n(t){var n=e.call(this,t)||this;if(t.eventHub){var r=t.elementId,i=t.possibleOptions,o=t.displayId,a=t.maxLength,s=(0,Gr.getDivId)(r);t.eventHub.propertyCreating(s,{displayId:o,possibleOptions:i,maxLength:a},{})}return n}return Zr(n,e),n.prototype.render=function(){for(var e,n=this,r=this.props,o=r.elementId,a=r.possibleOptions,s=r.accessibilityName,l=r.displayName,u=r.showDisplayName,d=r.propertyName,c=r.hidden,p=r.isPrefill,m=r.onSelect,f=r.disabled,h=r.required,y=r.displaySelectionText,g=r.onFocus,v=r.onBlur,P=r.optionsElements,b=r.isSelectFirstItem,I=r.displayId,E=r.element,S=r.eventHub,D=r.styleHints,C=We,T=Gr,k=T.getDivId,x=T.generateClassName,w=Gr.getId,R=w(C.htmlElementIdPrefixes.error,o),A=w(C.htmlElementIdPrefixes.input,o),O="input_".concat(o,"dummyLabel"),_=k(o),F=E.propertyElementRef,H="".concat(O," ").concat(R),N=[],M=0,B=Object.keys(a||{});M<B.length;M++){var V=B[M];if(a[V]){e=!p&&!b||e?e:V;var U=a[V],L=U.displayText,j=U.isDisabled,W=U.displayImageUrl,z=U.styleHints;N.push({key:V,text:L,disabled:j,data:{imageUrl:W},styleHints:z})}}!c&&Object.keys(a).length;var G=q=k(o),K=x(null,C.htmlElementTypes.div,d,C.modelElementType.dropdown);return i.createElement(Ki.Consumer,null,(function(r){var o=r.elementFactory,a=r.theme;return function(e,t,n,r){return(null===e||void 0===e?void 0:e.isReactNative)&&e.isReactNative()?i.createElement(i.Fragment,null,r):i.createElement("div",{id:t,className:n},r)}(o,q,K,i.createElement(Gi.Consumer,null,(function(r){var g={},b=g?g.style:void 0,E=r.errors[d]?r.errors[d].message:void 0,S=!!r.errors[d],C={disabled:f,inlineError:E,isInValidationErrorGroup:S,onBlur:v,onFocus:G,optionsElements:P,required:h,showDisplayName:u,displayName:l,displayId:I,id:A,ariaLabelId:H,dropdownOptions:N,hidden:c||0===N.length,onChange:m,placeholder:p?void 0:y,value:r.values[d]&&r.values[d].toString()||e,style:b,propertyElementRef:F,theme:a,styleHints:D},T=o&&o.canCreate(t.ElementType.dropdown,C,{inlineError:!0,label:u}),k=null;k=T?o.create(t.ElementType.dropdown,C):n.renderDropdownElement(C);var x=!u||T&&T.label;return i.createElement(i.Fragment,null,function(e,t,r,o){return(null===e||void 0===e?void 0:e.isReactNative)&&e.isReactNative()?i.createElement(i.Fragment,null):i.createElement("label",{id:O,"aria-label":r,style:{display:o?"none":void 0},"aria-hidden":o},t,i.createElement("span",{className:"".concat(q,"-asterisk")},n.props.required?"*":""))}(o,l,r.accessibilityText[d]||s,x),k,T&&T.inlineError?null:i.createElement($i,{propertyName:d}))})))}))},n.prototype.renderDropdownElement=function(e){var t=e.id,n=e.dropdownOptions,r=e.onChange,o=e.value,s=e.additionalClassName,l=e.hidden,u=e.disabled,d=e.required,c=e.placeholder,p=e.ariaLabelId,m=e.inlineError,f=e.onFocus,h=e.onBlur,y=e.isInValidationErrorGroup,g=c?i.createElement("option",{value:""},c):null,v=m||y&&!u,P=[];return n.forEach((function(e){var t=e.key,n=e.text,r=e.disabled;P.push(i.createElement("option",{value:t,key:t,disabled:r},n))})),i.createElement("select",{id:t,className:v?a(s,"pidlddc-errorstroke"):s,hidden:l,disabled:u,required:d,"aria-labelledby":p,onFocus:function(e){f&&e&&e.currentTarget&&f(e.currentTarget.value)},onBlur:function(e){h&&e&&e.currentTarget&&h(e.currentTarget.value)},onChange:function(e){r&&e&&e.target&&r(e.target.value)},value:o},g,P)},n}(i.Component),["elementId","propertyName","possibleOptions","required","hidden","disabled","displayName","showDisplayName","displaySelectionText","accessibilityName","tags","isSelectFirstItem","displayId","styleHints"]);go.displayName="Dropdown";var vo=function(e){var n=e.elementId,r=e.isInline;return i.createElement(Ki.Consumer,null,(function(e){return i.createElement(qi.Consumer,null,(function(o){var s=e.elementFactory,l=(e.displayOptions,e.displaySettings,o[n]?o[n].message:""),u={errorMessage:l};if(s&&s.canCreate(t.ElementType.error,u,{}))return s.create(t.ElementType.error,u);var d={className:a("pidlddc-group-error",{"d-none":!l},"text-danger"),id:"pidlddc-error-".concat(n),tabIndex:-1,role:"alert"};return r?i.createElement("span",Xr({},d,{"aria-hidden":!l}),l):i.createElement("div",Xr({},d,{"aria-hidden":!l}),l)}))}))};vo.displayName="GroupError";var Po=ki((function(e){var n=e.layoutOrientation,r=e.elementId,o=e.childNodes,s=e.tags,l=e.labelNode,u=e.element,d=u.displayId,c=u.type,p=u.isSubmitGroup,m=e.styleHints,f=e.accessibilityName,h=e.gridColumn,y=e.gridRow;return i.createElement(Ki.Consumer,null,(function(e){var u=e.elementFactory,g=e.displaySettings,v=Gr.getDivId;return i.createElement(zi.Consumer,null,(function(e){var P=v(r),b=i.createElement(vo,{elementId:r,isInline:e}),I={childNodes:o,errorNode:b,labelNode:l,layoutOrientation:n,elementId:P,groupClassName:Zi(s),displayId:d,type:c,displaySettings:g,styleHints:m,isSubmitGroup:p,ariaLabel:f,gridColumn:h,gridRow:y};return u&&u.canCreate(t.ElementType.group,I,{})?u.create(t.ElementType.group,I):(I.groupClassName=I.groupClassName.filter((function(e){return!qt.startsWith(e,Ie.pidlReact)})),i.createElement("div",{id:I.elementId,className:a(I.groupClassName)},l,i.createElement(zi.Provider,{value:"inline"===n},o),b))}))}))}),["elementId","layoutOrientation","tags","accessibilityName","styleHints"]);Po.displayName="Group";var bo=wi((function(e){var n=e.layoutOrientation,r=e.elementId,o=e.children,s=e.tags,l=e.ariaLabelledBy,u=e.styleHints,d="inline"===n,c=(0,Gr.getId)(We.htmlElementIdPrefixes.div,r);return i.createElement(Ki.Consumer,null,(function(e){return function(e,n){var p={children:o,additionalClassName:a(Zi(s)),elementId:r,ariaLabelledBy:l,styleHints:u};return e&&e.canCreate(t.ElementType.textgroup,p,{})?e.create(t.ElementType.textgroup,p):(null===e||void 0===e?void 0:e.isReactNative)&&e.isReactNative()?i.createElement(i.Fragment,null,n):i.createElement("div",{id:c,className:a({"d-inline-block":d},Zi(s))},n)}(e.elementFactory,i.createElement(i.Fragment,null,o,i.createElement(vo,{elementId:r,isInline:!0})))}))}),["elementId","layoutOrientation","tags","styleHints"]);bo.displayName="TextGroup";var Io=function(e){function n(t){var n=e.call(this,t)||this;if(t.eventHub){var r=t.elementId,i=(0,Gr.getDivId)(r);t.eventHub.captchaRendered(i)}return n}return Zr(n,e),n.prototype.render=function(){var e=this.props,n=e.elementId,r=e.audioChildNodes,o=e.imageChildNodes,s=e.tags,l=e.element,u=e.required,d=l.displayId,c=l.type,p=l.id,m=l.displayName,f=l.showDisplayName,h=l.accessibilityName;return i.createElement(Ki.Consumer,null,(function(e){return i.createElement(Gi.Consumer,null,(function(l){var y=e.elementFactory,g=Gr.getDivId,v="image"==l.values[p],P=g(n),b={audioChildNodes:r,imageChildNodes:o,elementId:P,captchaClassName:Zi(s),displayId:d,type:c,showImageCaptcha:v,displayName:m,showDisplayName:f,required:u};if(y&&y.canCreate(t.ElementType.captcha,b,{}))return y.create(t.ElementType.captcha,b);var I=i.createElement("label",{className:a("pidlddc-label",f?"d-block":"d-none"),id:n,"aria-label":h},m);return b.captchaClassName=b.captchaClassName.filter((function(e){return!qt.startsWith(e,Ie.pidlReact)})),i.createElement("div",{id:b.elementId,className:a(b.captchaClassName)},I,v&&o,!v&&r)}))}))},n}(i.Component),Eo=xi(Io,["elementId","tags","required"]);Eo.displayName="Captcha";var So=function(e){var n=e.element,r=e.elementId,o=e.hidden,s=e.required,l=e.disabled,u=e.showDisplayName,d=e.displayName,c=e.accessibilityName;return u?i.createElement(Ki.Consumer,null,(function(e){var p=e.elementFactory,m=(e.displayOptions,e.displaySettings,(0,Gr.getId)(We.htmlElementIdPrefixes.label,r)),f={disabled:l,required:s,elementId:m,displayContent:d};if(p&&p.canCreate(t.ElementType.label,f,{}))return p.create(t.ElementType.label,f);for(var h=0;h<n.children.length;h++)if(null!=n.children[h].dataDescription&&!n.children[h].dataDescription.is_optional){f.required=!0;break}return i.createElement("label",{className:a("pidlddc-label",o||!u?"d-none":"d-block"),id:f.elementId,"aria-label":c},d,i.createElement("span",{className:"".concat(f.elementId,"-asterisk")},f.required?"*":""))})):null};So.displayName="GroupLabelInner";var Do=ki(So,["elementId","hidden","displayName","showDisplayName","accessibilityName"]);Do.displayName="GroupLabel";var Co=function(e){function n(t){var n=e.call(this,t)||this;return n.linkRef=i.createRef(),n.toggle=function(e){!e&&n.linkRef&&n.linkRef.current&&n.linkRef.current.focus&&n.linkRef.current.focus(),n.setState({open:e})},n.escapeHandler=n.state={open:!1},n}return Zr(n,e),n.prototype.componentDidUpdate=function(){var e,t=this.props,n=t.elementId,r=t.elementFactory,i=this.state.open;if(!(null===(e=null===r||void 0===r?void 0:r.isReactNative)||void 0===e?void 0:e.call(r))){var o=document.getElementById("".concat(n,"-dialog-body"));i?(document.addEventListener("keydown",this.escapeHandler,!1),o&&o.focus&&o.focus()):document.removeEventListener("keydown",this.escapeHandler,!1)}},n.prototype.render=function(){var e=this,r=this.props,o=r.elementId,a=r.displayHelpName,s=r.displayImage,l=r.children,u=r.element,d=this.state.open;if((!a||0===a.length)&&!s)return null;var c=u.getHelpDialogTags(),p=c&&c[Se.linkAccessibilityName]||u.accessibilityName,m=c&&c[Se.closeButtonAccessibilityName]||"",f="".concat(s?C.image:C.button).concat(o),h=s?S.helpImageLink:S.helpTextLink;return i.createElement(Ki.Consumer,null,(function(r){var u=r.elementFactory,c=(r.displayOptions,r.displaySettings);n.elementIdHelpDialogIndex[o]||(n.elementIdHelpDialogIndex[o]=n.latestHelpDialogIndex,n.latestHelpDialogIndex++);var y=0===n.elementIdHelpDialogIndex[o]?"":n.elementIdHelpDialogIndex[o],g=c?c.getAffixedDisplayElementId(C.helpDialogContent+c.helpDialogBlock.id+y):o,v={id:f,children:l,linkAdditionalClassName:h,linkText:a,linkImageSource:s,linkAriaLabel:p,contentId:g,closeButtonAccessibilityName:m};return u&&u.canCreate(t.ElementType.helpDialog,v,{})?u.create(t.ElementType.helpDialog,v):[i.createElement("a",{key:"".concat(f,"-toggle"),id:f,className:h,"aria-label":p,"aria-haspopup":"dialog",onClick:function(){return e.toggle(!0)},href:"javascript:void(null);",ref:e.linkRef},s?i.createElement("img",{src:s,alt:p}):a),i.createElement("dialog",{key:"".concat(o,"-dialog-body"),id:"".concat(o,"-dialog-body"),tabIndex:-1,onBlur:function(){return e.toggle(!1)},open:d},i.createElement("div",{key:"".concat(o,"-dialog-close-button"),id:"".concat(o,"-dialog-close-button"),style:{textAlign:"right",width:"100%",paddingBottom:"6px"}},i.createElement("button",{"aria-label":m,onClick:,i.createElement("span",{"aria-hidden":"true"},"x"))),l)]}))},n.elementIdHelpDialogIndex={},n.latestHelpDialogIndex=0,n}(i.Component),To=Ti(Co,["elementId","displayHelp","displayHelpName","displayImage"]);To.displayName="HelpDialog";var ko=Ri((function(e){var n=e.elementId,r=e.pidlAction,o=e.displayContent,s=e.accessibilityName,l=e.tags,u=e.onClick,d=e.styleHints,c=e.gridColumn,p=e.gridRow,m="javascript:void(null);",f=(0,Gr.getId)(We.htmlElementIdPrefixes.hyperlink,n),h=a(Zi(l)),y=g=function(e){e&&e.preventDefault&&e.preventDefault(),u&&u({pidlAction:r,id:n})};return i.createElement(Ki.Consumer,null,(function(e){var n=e.elementFactory,a=(e.displayOptions,e.displaySettings,e.theme),l={id:f,displayContent:o,additionalClassName:h,href:r&&r.context?r.context:m,ariaLabel:s,onClick:y,theme:a,styleHints:d,gridColumn:c,gridRow:p};return n&&n.canCreate(t.ElementType.hyperlink,l,{})?n.create(t.ElementType.hyperlink,l):i.createElement("a",{id:f,href:r&&r.context?r.context:m,"aria-label":s,className:h,onClick:g},o)}))}),["elementId","pidlAction","displayContent","accessibilityName","tags","styleHints"]);ko.displayName="Hyperlink";var xo=function(e){function t(t){var n=e.call(this,t)||this;return n.onEvent=function(e){var t=n.props,r=t.sourceUrl,i=t.expectedClientActionId,o=t.onIFrameMessage,a=t.onIFrameBusyTimerEnded,s=n.state.messageTimer;if(!r||!e.origin||0===r.indexOf(e.origin)){var l=Gt.parseJSON(e.data),u=l.succeeded?l.value:null;u&&i&&u.actionId!==i||(s&&(a(s),clearTimeout(s),n.setState({messageTimer:null})),o(e))}},n.iframe=i.createRef(),n.state={executing:!0,width:t.element.width,height:t.element.height},n}return Zr(t,e),t.prototype.postMessage=function(e){return!!(this.iframe&&this.iframe.current&&this.iframe.current.contentWindow&&this.iframe.current.contentWindow.postMessage)&&(this.iframe.current.contentWindow.postMessage(e.message,e.targetOrigin),!0)},t.prototype.updateHeight=t.prototype.componentDidMount=function(){var e=this.props,t=e.displayContent,n=e.sourceUrl,r=e.onIFrameMessageTimeout,i=e.messageTimeout,o=e.messageTimeoutClientAction,a=e.onIFrameBusyTimerStarted,s=e.onIFrameBusyTimerEnded,l=this.iframe.current,u=this.state.messageTimer;if(window.addEventListener(P.message,this.onEvent),!n&&t&&l){var d=l.contentDocument;d&&(d.open(),d.write(t),d.close())}if(!u&&i&&o){var c=window.setTimeout((,i);a(c),this.setState({messageTimer:c})}},t.prototype.componentDidUpdate=function(e,t,n){var r=this.props,i=r.displayContent,o=r.sourceUrl,a=this.iframe.current;if(!o&&i&&e&&e.displayContent!==i&&a){var s=a.contentDocument;s&&(s.open(),s.write(i),s.close())}},t.prototype.componentWillUnmount=function(){window.removeEventListener(P.message,this.onEvent)},t.prototype.render=function(){var e=this.props,t=e.displayId,n=e.accessibilityName,r=e.hidden,o=e.tags,s=e.sourceUrl,l=this.state,u=l.width,d=l.height,c={width:u,height:d},p=(0,Gr.getId)(We.htmlElementIdPrefixes.iframe,t),m=(u||d)&&0===Number((u+d).replace(/\D/g,""))?0:void 0;return this.state.executing?i.createElement("iframe",{key:p,className:a(Zi(o)),id:p,src:s,hidden:r,"aria-label":n,ref:this.iframe,style:c,frameBorder:m}):null},t}(i.Component),wo=function(e){return i.createElement(Ki.Consumer,null,(function(n){var r=n.elementFactory,o=n.userContext,a=n.displayOptions,s=e.displayId,l={};e.useAuth&&null!=(null===o||void 0===o?void 0:o.authToken)&&(l=function(e,t){var n,r;switch(e){case"xboxCoBrandedCardIframe":try{return{xuh:null===(n=t.split("=")[1])||void 0===n?void 0:n.split(";")[0],xt:null===(r=t.split("=")[1])||void 0===r?void 0:r.split(";")[1]}}catch(i){return{authorization:t}}default:return{authorization:t}}}(s,o.authToken));var u=Xr(Xr({},e),{headers:l,useWebView2:a.useWebView2||!1});return r&&r.canCreate(t.ElementType.iframe,u,{})?r.create(t.ElementType.iframe,u):i.createElement(xo,Xr({},u,{ref:u.iFrameElementRef}))}))},Ro=Oi(wo,["displayId","accessibilityName","hidden","tags","displayContent","sourceUrl","expectedClientActionId","messageTimeout","messageTimeoutClientAction","useAuth","loadingMessage"]),Ao=Ai((function(e){var n=e.accessibilityName,r=e.element,o=e.elementId,s=e.sourceUrl,l=e.tags,u=e.styleHints,d=e.gridColumn,c=e.gridRow,p=Gr.getId,m=We;return i.createElement(Ki.Consumer,null,(function(e){var f,h=e.elementFactory,y={additionalClassName:a(Zi(l)),ariaLabel:n||(null===(f=null===r||void 0===r?void 0:r.displayDescription)||void 0===f?void 0:f.accessibilityName),elementId:p(m.htmlElementIdPrefixes.image,o),sourceUrl:s,styleHints:u,gridColumn:d,gridRow:c};return h&&h.canCreate(t.ElementType.image,y,{})?h.create(t.ElementType.image,y):i.createElement("img",{id:y.elementId,src:s,alt:n,"aria-label":n,className:y.additionalClassName})}))}),["elementId","accessibilityName","sourceUrl","tags","styleHints"]);Ao.displayName="Image";var Oo=ji((function(e){var n=e.displayId,r=e.sourceUrl,o=e.tags,s=e.styleHints,l=e.gridColumn,u=e.gridRow,d=o&&o.accessibilityName?o.accessibilityName:void 0,c=Gr.getId,p=We;return i.createElement(Ki.Consumer,null,(function(e){var m=e.elementFactory,f={additionalClassName:a(Zi(o)),ariaLabel:d,elementId:c(p.htmlElementIdPrefixes.image,n),sourceUrl:r,styleHints:s,gridColumn:l,gridRow:u};return m&&m.canCreate(t.ElementType.logo,f,{})?m.create(t.ElementType.logo,f):i.createElement("img",{className:a("pidlddc-logo-image","pidlddc-logoBlock",f.additionalClassName),id:f.elementId,src:r,alt:d,"aria-label":d,style:{width:"48px",height:"48px"}})}))}),["displayId","sourceUrl","tags","styleHints"]);Oo.displayName="LogoElement";var _o=function(e){var t=e.elementId,n=e.hidden,r=e.showDisplayName,o=e.displayName,s=e.accessibilityName,l=e.element,u=(0,Gr.getId)(We.htmlElementIdPrefixes.label,t);return i.createElement(Gi.Consumer,null,(function(e){return i.createElement("label",{className:a("pidlddc-label",{"d-none":n||!r}),id:u,"aria-label":e.accessibilityText[l.getPropertyName()]||s},o,i.createElement("span",{className:"".concat(u,"-asterisk")},l.dataDescription.is_optional?"":"*"))}))},Fo=Ti(_o,["elementId","propertyName","hidden","displayName","showDisplayName","accessibilityName"]);Fo.displayName="PropertyLabel";var Ho=Bi(function(e){function n(t){return e.call(this,t)||this}return Zr(n,e),n.prototype.render=function(){var e=this.props,n=e.element,r=e.elementId,o=e.possibleOptions,s=e.accessibilityName,l=e.displayName,u=e.showDisplayName,d=e.propertyName,c=e.disabled,p=e.required,m=e.hidden,f=e.onSelect,h=e.tags,y=e.optionsElements,g=e.styleHints,v=[];for(var P in o)o.hasOwnProperty(P)&&v.push({key:P,value:o[P].key||P,isDisabled:o[P].isDisabled,displayText:o[P].displayText,displayImageUrl:o[P].displayImageUrl});return i.createElement(Ki.Consumer,null,(function(e){return i.createElement(zi.Consumer,null,(function(o){return i.createElement(Gi.Consumer,null,(function(P){var b,I=e.elementFactory,E=(e.displayOptions,e.displaySettings,e.theme),S=Gr.getId,D=We,C=S(D.htmlElementIdPrefixes.div,r),T={elementId:r,isInline:o,hidden:m,options:v,optionsElements:y,ariaLabel:P.accessibilityText[d]||s,showDisplayName:u,displayName:l||n.displayName,additionalClassName:a(Zi(h)),onSelect:f,disabled:c,propertyName:d,required:p,invalid:!1,selectedValue:P.values[d]&&P.values[d].toString(),propertyElementRef:n.propertyElementRef,theme:E,styleHints:g},k=I&&I.canCreate(t.ElementType.radio,T,{});return k?(null===(b=null===I||void 0===I?void 0:I.isReactNative)||void 0===b?void 0:b.call(I))?I.create(t.ElementType.radio,T):i.createElement("div",{id:C,className:a(C,S(D.htmlElementIdPrefixes.div,n.displayId))},I.create(t.ElementType.radio,T),k&&k.inlineError?null:i.createElement($i,{propertyName:d})):i.createElement("div",{className:a("pidlddc-input-".concat(r))},v.map((function(e){var t="input_".concat(r,"_").concat(e.value),n="".concat(t,"_displayTextLabel");return i.createElement("div",{key:t},i.createElement("label",{id:"".concat(t,"_displayNameLabel"),"aria-label":T.ariaLabel,className:a({"pidlddc-hidden":!u}),"aria-hidden":!u},l),i.createElement("div",{className:a(Zi(h))},i.createElement("label",{id:n,htmlFor:t,"aria-label":e.displayText,onClick:function(){return e.isDisabled||c?null:f(e.value)}},i.createElement("input",{id:t,type:"radio",name:"radio-input-".concat(d),disabled:e.isDisabled||c,required:p,"aria-labelledby":n,value:e.value,onChange:checked:T.selectedValue===e.value}),y&&y[e.value]?y[e.value]:e.displayText)))})),i.createElement($i,{propertyName:d}))}))}))}))},n}(i.Component),["elementId","propertyName","possibleOptions","required","hidden","disabled","showDisplayName","accessibilityName","tags"]);Ho.displayName="Radio";var No=function(e){var n=e.elementId,r=e.displayContent,o=e.tags,s=e.styleHints,l=a(Zi(o)),u=(0,Gr.getId)(We.htmlElementIdPrefixes.text,n);return i.createElement(Ki.Consumer,null,(function(e){var n=e.elementFactory,o=(e.displayOptions,e.displaySettings,e.theme),a={id:u,elementId:u,displayContent:r,additionalClassName:l,theme:o,styleHints:s};return n&&n.canCreate(t.ElementType.heading,a,{})?n.create(t.ElementType.heading,a):i.createElement("h2",{id:u,className:l},r)}))},Mo=Ri(No,["elementId","displayContent","tags","styleHints"]);Mo.displayName="Heading";var Bo=function(e){var n=e.elementId,r=e.displayContent,o=e.tags,s=e.styleHints,l=a(Zi(o)),u=(0,Gr.getId)(We.htmlElementIdPrefixes.text,n);return i.createElement(Ki.Consumer,null,(function(e){var n=e.elementFactory,o=(e.displayOptions,e.displaySettings,e.theme),a={id:u,elementId:u,displayContent:r,additionalClassName:l,theme:o,styleHints:s};return n&&n.canCreate(t.ElementType.subheading,a,{})?n.create(t.ElementType.subheading,a):i.createElement("h3",{id:u,className:l},r)}))},Vo=Ri(Bo,["elementId","displayContent","tags","styleHints"]);Vo.displayName="SubHeading";var Uo=function(e){var n=e.elementId,r=e.displayContent,o=e.tags,s=e.styleHints,l=e.gridColumn,u=e.gridRow,d=(0,Gr.getId)(We.htmlElementIdPrefixes.text,n),c=Xi(o),p=a(Zi(o));return i.createElement(zi.Consumer,null,(function(e){return i.createElement(Ki.Consumer,null,(function(n){var o=n.elementFactory,a=(n.displayOptions,n.displaySettings,n.theme),m={id:d,displayContent:r,additionalClassName:p,inline:e,theme:a,styleHints:s,gridColumn:l,gridRow:u};if(o){if(c.indexOf("labelText")>=0&&o.canCreate(t.ElementType.label,m,{}))return o.create(t.ElementType.label,m);if(o.canCreate(t.ElementType.text,m,{}))return o.create(t.ElementType.text,m)}return e?i.createElement("span",{id:d,className:p},r):i.createElement("p",{id:d,className:p},r)}))}))},Lo=Ri(Uo,["elementId","displayContent","tags","styleHints"]);Lo.displayName="Text";var jo=function(e){function t(n){var r=e.call(this,n)||this;return r.getTransformedLength=function(e,t,n){var r=t.substr(0,n),i=Gt.applyDisplayTransformation(e.forModel,r);return(i=Gt.applyDisplayTransformation(e.forFormat,i)).length},r.onFocus=function(e){var t=r.props.onFocus;t&&e&&e.currentTarget&&t(e.currentTarget.value)},r.onBlur=function(e){var t=r.props.onBlur;t&&e&&e.currentTarget&&t(e.currentTarget.value)},r.onChange=function(e){var n=r.props,i=n.element,o=n.onChange,a=n.id,s=i.displayTransformations;t.caretPosition={id:a,start:e.currentTarget.selectionStart,end:e.currentTarget.selectionEnd,direction:"forward"===e.currentTarget.selectionDirection?"forward":"backward"===e.currentTarget.selectionDirection?"backward":"none"};var l=e.currentTarget.value;if(s&&s.forModel&&s.forFormat&&(t.caretPosition.start=r.getTransformedLength(s,l,t.caretPosition.start),t.caretPosition.end=r.getTransformedLength(s,l,t.caretPosition.end)),o){var u=e.currentTarget.value;s&&s.forModel&&(u=Gt.applyDisplayTransformation(s.forModel,u)),o(u)}},r.onCompositionStart=function(e){r.inComposition=!0},r.onCompositionEnd=function(e){r.inComposition=!1},r.htmlInput=i.createRef(),r.inComposition=!1,r}return Zr(t,e),t.prototype.componentDidUpdate=function(){this.props.id===t.caretPosition.id&&this.htmlInput.current.setSelectionRange(t.caretPosition.start,t.caretPosition.end,t.caretPosition.direction)},t.prototype.render=function(){var e=this.props,t=e.element,n=e.additionalClassName,r=e.id,o=e.maskInput,s=e.maxLength,l=e.required,u=e.hidden,d=e.disabled,c=e.placeholder,p=e.ariaLabelId,m=e.inlineError,f=(e.onFocus,e.onBlur,e.onChange,e.isInValidationErrorGroup),h=(e.styleHints,this.props.value),y=t.displayTransformations,g=m||f&&!d;return!this.inComposition&&y&&y.forFormat&&(h=Gt.applyDisplayTransformation(y.forFormat,h)),i.createElement("input",{type:o?"password":"text",className:g?a(n,"pidlddc-errorstroke"):n,id:r,ref:this.htmlInput,maxLength:s,required:l,hidden:u,disabled:d,value:h,placeholder:c,"aria-labelledby":p,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange,onCompositionStart:this.onCompositionStart,onCompositionEnd:this.onCompositionEnd})},t.caretPosition={id:null,start:0,end:0,direction:"none"},t}(i.Component),Wo=Ni(function(e){function n(t){var n=e.call(this,t)||this;return n.onChange=function(e){var t=n.props;(0,t.onUpdateValue)(t.propertyName,e,de.editing)},n.onBlur=function(e){var t=n.props;(0,t.onUpdateValue)(t.propertyName,e,de.finished)},n.onSelected=function(e,t,r){n.props.eventHandler.propertySelectedHandler({id:e,propertyName:t,divId:r})},n.onUnselected=function(e,t,r){n.props.eventHandler.propertyUnselectedHandler({id:e,propertyName:t,divId:r})},n.onFocusInternal=function(e){var t=n.props,r=t.elementId,i=t.propertyName,o=t.displayOptions,a=t.onFocus,s=Gr,l=s.getDivId,u=s.getId,d=l(r),c=u(o.inputPropertyIdPrefix,i);n.onSelected&&n.onSelected(c,i,d),a&&a(e)},n.onBlurInternal=function(e){var t=n.props,r=t.elementId,i=t.propertyName,o=t.displayOptions,a=Gr,s=a.getDivId,l=a.getId,u=s(r),d=l(o.inputPropertyIdPrefix,i);n.onUnselected&&n.onUnselected(d,i,u),n.onBlur&&n.onBlur(e)},n}return Zr(n,e),n.prototype.render=function(){var e=this;return i.createElement(Ki.Consumer,null,(function(n){return i.createElement(Gi.Consumer,null,(function(r){var o=n.elementFactory,s=n.displayOptions,l=n.theme,u=e.props,d=u.elementId,c=u.element,p=u.required,m=u.disabled,f=u.hidden,h=u.propertyName,y=u.maxLength,g=u.displayHelpName,v=u.displayImage,P=u.tags,b=void 0===P?{}:P,I=u.placeHolderText,E=u.showKeyLogo,S=u.resolvedLogo,D=u.displayHelpChildren,C=(u.onFocus,u.displayId),T=u.accessibilityName,k=u.styleHints,x=c.displayName,w=c.showDisplayName,R=c.displayDescription,A=c.propertyElementRef,O=We,_=Gr,F=_.getDivId,H=_.getId,N=_.generateClassName,M=_.concatClassName,B=F(d),V=H(s.inputPropertyIdPrefix,h),U={inlineError:!0},L=r.errors[h]?r.errors[h].message:void 0,j=!!r.errors[h],W=w?i.createElement(Fo,{element:c}):null,z={id:d},G=g||v?i.createElement(To,Xr({},z,{element:c,children:D,elementFactory:o})):null,q={disabled:m,displayName:x,hidden:f,inlineError:L,isInValidationErrorGroup:j,maskInput:R&&R.maskInput,maxLength:y,onBlur:e.onBlurInternal,onChange:e.onChange,onFocus:e.onFocusInternal,required:p,showDisplayName:w,inlineHelpLink:G,additionalClassName:a(Zi(b)),ariaLabelId:"pidlddc-label-".concat(h," pidlddc-error-").concat(h),id:V,inlineLogo:E&&S,placeholder:I,value:r.values[h]&&r.values[h].toString()||"",propertyName:h,displayId:C,propertyElementRef:A,ariaLabel:T,theme:l,styleHints:k},K=null;(U=o&&o.canCreate(t.ElementType.textBox,q,U))?(K=o.create(t.ElementType.textBox,q),U.label&&(W=null),U.inlineHelpLink&&(G=null)):K=i.createElement(jo,Xr({},q,{element:c}));var J=N(null,O.htmlElementTypes.div,h,O.modelElementType.textBox);C&&(J=M(J,F(C)));var Q;return Q=i.createElement(i.Fragment,null,W&&G&&c.displayHelpPosition!==Ne.floatRight?i.createElement("span",null,W," ",G):W,G&&c.displayHelpPosition===Ne.floatRight?i.createElement("span",null,K," ",G):K,W&&G?null:G,U&&U.inlineError?null:i.createElement($i,{propertyName:h})),(null===o||void 0===o?void 0:o.isReactNative)&&o.isReactNative()?i.createElement(i.Fragment,null,Q):i.createElement("div",{id:B,className:J},Q)}))}))},n}(i.Component),["elementId","tags","propertyName","displayHelpName","maxLength","required","hidden","disabled","showKeyLogo","resolvedLogo","placeHolderText","displayImage","displayId","accessibilityName","styleHints"]);Wo.displayName="TextBox";var zo=Ui(function(e){function n(t){var n=e.call(this,t)||this;return n.inputFileRef=i.createRef(),n.onChange=function(e){var t=n.props,r=t.onUpdateValue,i=t.propertyName,o=n.inputFileRef.current.value;o?n.setState({selectedFile:o.split(/(\\|\/)/g).pop()}):n.setState({selectedFile:""}),r(i,e.target.files[0],de.finished)},n.state={selectedFile:""},n.onButtonClick=n.onButtonClick.bind(n),n}return Zr(n,e),n.prototype.onButtonClick=n.prototype.render=function(){var e=this;return i.createElement(Ki.Consumer,null,(function(n){return i.createElement(Gi.Consumer,null,(function(r){var o=n.elementFactory,s=e.state.selectedFile,l=e.props,u=l.className,d=l.element,c=l.propertyName,p=l.elementId,m=l.disabled,f=l.accessibilityName,h=l.tags,y=l.required,g=l.displayHelpName,v=l.displayHelpChildren,P=l.displayImage,b=d.displayName,I=d.showDisplayName,E=d.displayContent,S=(0,Gr.getId)(We.htmlElementIdPrefixes.filePicker,p),D=a(u,Zi(h)),C={inlineError:!0},T=I?i.createElement(Fo,{element:d}):null,k=i.createElement($i,{propertyName:c}),x={id:p},w=g||P?i.createElement(To,Xr({},x,{element:d,children:v,elementFactory:o})):null,R={id:S,additionalClassName:D,disabled:m,inlineHelpLink:w,onChange:e.onChange,onButtonClick:e.onButtonClick,ariaLabel:f,displayName:b,displayContent:E,showDisplayName:I,required:y,errorNode:k,selectedFile:s,inputFileRef:e.inputFileRef};return(C=o&&o.canCreate(t.ElementType.filePicker,R,C))?o.create(t.ElementType.filePicker,R):i.createElement("div",{id:S,className:a(D)},T&&w&&d.displayHelpPosition!==Ne.floatRight?i.createElement("span",null,T," ",w):T,T&&w?null:w,i.createElement("input",{type:"file",name:"file",ref:e.inputFileRef,onChange:style:{display:"none"}}),i.createElement("button",{id:S+"_button","aria-label":f,disabled:m,onClick:e.onButtonClick},E)," ",i.createElement("label",{id:S+"_label"}," ",s," "),C&&C.inlineError?null:i.createElement($i,{propertyName:c}))}))}))},n}(i.Component),["elementId","disabled","displayHelpName","displayImage","accessibilityName","tags","required"]);zo.displayName="FilePicker";var Go=function(e){var n=e.className,r=e.element,i=e.elementId,s=e.accessibilityName,l=e.tags,u=e.audioUrl,d=(0,Gr.getId)(We.htmlElementIdPrefixes.audio,i),c=a(n,Zi(l)),p=r.propertyElementRef;return o.createElement(Ki.Consumer,null,(function(e){var n=e.elementFactory,r=e.theme,i={id:d,additionalClassName:c,ariaLabel:s,propertyElementRef:p,theme:r,audioUrl:u};return n&&n.canCreate(t.ElementType.audio,i,{})?n.create(t.ElementType.audio,i):o.createElement("div",{id:d,className:c},o.createElement("audio",{"aria-label":s,src:u,controls:!0}))}))},qo=Li(Go,["elementId","accessibilityName","tags","audioUrl"]);qo.displayName="Audio";var Ko=Ri((function(e){var n=e.elementId,r=e.tags,o=(0,Gr.getId)(We.htmlElementIdPrefixes.separator,n),s=a(Zi(r));return i.createElement(Ki.Consumer,null,(function(e){var n=e.elementFactory,r={id:o,additionalClassName:s};return n&&n.canCreate(t.ElementType.separator,r,{})?n.create(t.ElementType.separator,r):i.createElement("hr",{id:o,className:s})}))}),["elementId","tags"]);Ko.displayName="Separator";var Jo=Ri((function(e){var n=e.elementId,r=e.tags,o=(0,Gr.getId)(We.htmlElementIdPrefixes.spinner,n),s=a(Zi(r));return i.createElement(Ki.Consumer,null,(function(e){var r=e.elementFactory,a={elementId:n,additionalClassName:s};return r&&r.canCreate(t.ElementType.spinner,a,{})?r.create(t.ElementType.spinner,a):i.createElement("hr",{id:o,className:s})}))}),["elementId","tags"]);Jo.displayName="Spinner";var Qo=_i(function(e){function n(t){var n,r,o=this;return(o=e.call(this,t)||this).onMessageEvent=function(e){var t,n,r,i,a,s,l=o.props,u=l.sourceUrl,d=l.propertyName,c=l.displayId,p=l.eventHandler,m=Gr,f=m.getDivId,h=m.getId,y=We,g=f(c),v=h(y.htmlElementIdPrefixes.secureProperty,d);(null===e||void 0===e?void 0:e.origin)&&0!==(null===u||void 0===u?void 0:u.indexOf(e.origin))||((null===(t=null===e||void 0===e?void 0:e.data)||void 0===t?void 0:t.event)!==y.SecureFieldEvent.focused||(null===(n=null===e||void 0===e?void 0:e.data)||void 0===n?void 0:n.field)!==d?(null===(r=null===e||void 0===e?void 0:e.data)||void 0===r?void 0:r.event)!==y.SecureFieldEvent.blurred||(null===(i=null===e||void 0===e?void 0:e.data)||void 0===i?void 0:i.field)!==d?(null===(a=null===e||void 0===e?void 0:e.data)||void 0===a?void 0:a.source)===y.SecureFieldConstants.secureFieldMessageSource&&(null===(s=null===e||void 0===e?void 0:e.data)||void 0===s?void 0:s.field)===d&&p.secureFieldMessageHandler(e):o.onBlurInternal(v,e.data.field,g):o.onFocusInternal(v,e.data.field,g))},o.onFocusInternal=function(e,t,n){o.props.eventHandler.propertySelectedHandler({id:e,propertyName:t,divId:n})},o.onBlurInternal=o.computeStyles=function(){var e=Gr,t=e.generateClassName,n=e.getPropertyClassName,r=e.concatClassName,i=We,s=o.props,l=s.propertyName,u=s.tags,d=s.eventHandler,c=t(null,i.htmlElementTypes.textBox,l);c=r(c,n(l)),c=r(c,a(Zi(u))),d.computeSecurePropertyStyles(l,o.securePropertyHardCodedStyles)},o.getStylesFromHints=function(e){if(e){for(var t={},n=0,r=e;n<r.length;n++){switch(r[n].toLowerCase()){case"width-fill":t=Xr(Xr({},t),{width:"100%"});break;case"width-half":t=Xr(Xr({},t),{width:"50%"});break;case"width-quarter":t=Xr(Xr({},t),{width:"25%"})}}return t}},o.iframe=i.createRef(),o.state={executing:!0,width:null===(n=t.element)||void 0===n?void 0:n.width,height:null===(r=t.element)||void 0===r?void 0:r.height},o}return Zr(n,e),n.prototype.componentDidMount=function(){var e=this.props.element;e.propertyElementRef&&e.setFocus(),this.computeStyles(),window.addEventListener(P.message,this.onMessageEvent)},n.prototype.componentWillUnmount=n.prototype.render=function(){var e=this;return i.createElement(Ki.Consumer,null,(function(n){return i.createElement(Gi.Consumer,null,(function(r){var o,s=n.elementFactory,l={},u=e.props,d=u.displayId,c=u.propertyName,p=u.accessibilityName,m=u.hidden,f=u.tags,h=u.sourceUrl,y=u.frameName,g=u.element,v=u.labelNode,P=u.displayHelpName,b=u.displayImage,I=u.displayHelpChildren,E=u.styleHints,S=e.state,D={width:S.width,height:S.height},C=Gr,T=C.getId,k=C.getDivId,x=C.generateClassName,w=C.concatClassName,R=We,A=T(R.htmlElementIdPrefixes.secureProperty,c),O=k(d),_=x(null,R.htmlElementTypes.div,null,R.modelElementType.secureProperty);c&&(_=w(_,k(c)));var F=x(null,R.htmlElementTypes.secureProperty);f&&(F=w(F,a(Zi(f))));var H={id:d},N=P||b?i.createElement(To,Xr({},H,{element:g,children:I,elementFactory:s})):null;(l=s&&s.canCreate(t.ElementType.secureProperty,null,l))&&(e.securePropertyHardCodedStyles=l.securePropertyHardCodedStyles,(null===(o=l.securePropertyHardCodedStyles)||void 0===o?void 0:o.secureIframeDimensions)&&(D=Xr({},l.securePropertyHardCodedStyles.secureIframeDimensions)),l.inlineHelpLink||(N=null)),E&&(D=Xr(Xr({},D),e.getStylesFromHints(E)));var M=i.createElement("iframe",{className:F,id:A,src:h,hidden:m,"aria-label":p,ref:e.iframe,style:Xr(Xr({},D),{verticalAlign:"middle"}),sandbox:"allow-same-origin allow-scripts",name:y,frameBorder:"0"});return e.state.executing?i.createElement("div",{id:O,className:_},v&&N&&g.displayHelpPosition===Ne.floatRight?i.createElement("span",null,v," ",N):v,N?i.createElement("span",null,N," ",M):M,i.createElement($i,{propertyName:c})):null}))}))},n}(i.Component),["displayId","propertyName","displayHelpName","displayImage","accessibilityName","hidden","frameName","tags","sourceUrl","styleHints"]),Zo=function(e){var n=e.element,r=e.elementId,o=e.hidden,s=e.required,l=e.disabled,u=e.displayId,d=e.displayHelpName,c=e.displayImage,p=e.showDisplayName,m=e.displayName,f=e.accessibilityName,h=e.displayHelpChildren;return p?i.createElement(Ki.Consumer,null,(function(e){var y=e.elementFactory,g=(0,Gr.getId)(We.htmlElementIdPrefixes.label,r),v={id:u},P=d||c?i.createElement(To,Xr({},v,{element:n,children:h,elementFactory:y})):null,b={disabled:l,required:s,elementId:g,displayContent:m,inlineHelpLink:P};return(null===y||void 0===y?void 0:y.canCreate(t.ElementType.securePropertyLabel,b,{}))?y.create(t.ElementType.securePropertyLabel,b):i.createElement("label",{className:a("pidlddc-label",o||!p?"d-none":"d-block"),id:b.elementId,"aria-label":f},m,i.createElement("span",{className:"".concat(b.elementId,"-asterisk")},s?"*":""))})):null};Zo.displayName="SecurePropertyLabelInner";var Xo=_i(Zo,["elementId","hidden","displayName","displayId","displayHelpName","displayImage","showDisplayName","accessibilityName","required"]);function $o(e,t,n,r,o){var a,s;if(!e.canBeRendered())return null;var l=e,u=l.getPropertyName&&l.getPropertyName()||"";if(e.hidden())return null;var d,c,p,m={element:e},f=e.displayHelp,h=e.operationType,y=w;switch(e.type){case y.page:return e.children&&e.children.map?e.children.map(Yo(t,n,r,o)):null;case y.dataCollectionBindingGroup:case y.group:var g=Xr(Xr({},m),{childNodes:e.children&&e.children.map?e.children.map(Yo(t,n,r,o)):null,labelNode:i.createElement(Do,Xr({},m))});return tr(e)&&e.isModalGroup?i.createElement(yo,Xr({},g,{ref:e.groupElementRef})):i.createElement(Po,Xr({},g));case y.captcha:return i.createElement(Ji.Consumer,null,(function(a){var s=Xr({},t),l=Xr({},t);s.buttonClickHandler=function(){var t=e.id;s.captchaHyperlinkClickHandler(t,"image",de.finished)},l.buttonClickHandler=function(){var t=e.id;l.captchaHyperlinkClickHandler(t,"audio",de.finished)};var u=Xr(Xr({},m),{audioChildNodes:e.audioChildren&&e.audioChildren.map?e.audioChildren.map(Yo(s,n,r,o)):null,imageChildNodes:e.imageChildren&&e.imageChildren.map?e.imageChildren.map(Yo(l,n,r,o)):null});return i.createElement(Eo,Xr({},u,{eventHub:a}))}));case y.textGroup:var v=void 0;return e.children&&e.children[0]&&e.children[0].id&&(v=Gr.getId(C.text,e.children[0].id)),i.createElement(bo,Xr({},m,{ariaLabelledBy:v}),i.createElement(zi.Provider,{value:!0},e.children&&e.children.map?e.children.map(Yo(t,n,r,o)):null));case y.heading:return i.createElement(Mo,Xr({},m));case y.subheading:return i.createElement(Vo,Xr({},m));case y.text:return i.createElement(Lo,Xr({},m));case y.hyperlink:return i.createElement(ko,Xr({onClick:(p=e.pidlAction,!p||p.type!==H.navigate&&p.type!==H.redirect?t.buttonClickHandler:t.hyperlinkClickHandler)},m));case y.image:return i.createElement(Ao,Xr({},m));case y.logo:var P=e.getAllLogos(),b=P&&P.map?P.map(():null;return i.createElement(Ki.Consumer,null,(function(e){return function(e,t,n){return n&&(null===e||void 0===e?void 0:e.createLogoWrapper)?e.createLogoWrapper(t):(null===e||void 0===e?void 0:e.isReactNative)&&e.isReactNative()?i.createElement(i.Fragment,null,t):i.createElement("div",{className:"pidlddc-div pidlddc-div-logo pidlddc-logoBlock",id:"pidlddc-div-pagelogoblock0"},t)}(e.elementFactory,b,!0)}));case y.dropdown:return i.createElement(Ji.Consumer,null,(function(a){if(e.displayType===st.prefillControl){var s=t.getMultiPropertySelectorPossibleOptions(e.pidlIdentity)||[];return i.createElement(go,{element:Xr(Xr({},e),{getPropertyName:function(){return e.displayId},possibleOptions:s}),isPrefill:!0,onSelect:function(t){var n=parseInt(t);isNaN(n)||r(e,n)},eventHub:a})}if(d=e.possibleOptions){c={};for(var l=0,p=Object.keys(d||{});l<p.length;l++){var f=p[l];if(d[f]){var h=d[f].displayContentContainer;h&&(c||(c={}),c[f]=$o(h,t,n,r,o))}}}return i.createElement(go,Xr({},m,{onSelect:function(e){n(u,e.toString(),de.editing),n(u,e.toString(),de.finished)},optionsElements:c,eventHub:a}))}));case y.checkBox:if(e.displayType===st.prefillControl){return i.createElement(fo,Xr({},m,{onChange:getMultiPropertySelectorPossibleOptions:t.getMultiPropertySelectorPossibleOptions}))}return i.createElement(so,Xr({},m,{onChange:function(e){n(u,e,de.editing)}}));case y.textBox:var I;if(f){var E=mn.createModelElementsFromDisplayDescriptions(f,h);I=E.elements&&E.elements.map?E.elements.map(Yo(t,n,r,o)):void 0}return i.createElement(Ki.Consumer,null,(function(e){return i.createElement(Wo,Xr({},m,{displayHelpChildren:I,onUpdateValue:n,propertyName:u,eventHandler:t,displayOptions:e.displayOptions}))}));case y.button:var S=e.pidlAction;return i.createElement(to,Xr({},m,{onClick:function(){return t.buttonClickHandler({id:e.id,pidlAction:S,value:S.context,dest:""})}}));case y.audio:return i.createElement(qo,Xr({},m));case y.radio:if(d=e.possibleOptions){c={};for(var D=0,T=Object.keys(d||{});D<T.length;D++){var k=T[D];if(d[k]){var x=d[k].displayContentContainer;x&&x[M.isDisabled]&&(x[M.isDisabled]=d[k].isDisabled),x&&(c||(c={}),c[d[k].key||k]=$o(x,t,n,r,o))}}}return i.createElement(Ho,Xr({},m,{onSelect:optionsElements:c}));case y.expression:return i.createElement(Lo,Xr({},m));case y.buttonList:return i.createElement(oo,Xr({},m,{onClick:t.buttonClickHandler,createElement:));case y.iFrame:var R=i.createRef(),A=i.createElement(Ro,Xr({},m,{key:e.id,onIFrameMessageTimeout:t.iFrameMessageTimeoutHandler,onIFrameMessage:function(e){return t.iFrameMessageHandler(e)},onIFrameBusyTimerStarted:t.iFrameBusyTimerStartedHandler,onIFrameBusyTimerEnded:t.iFrameBusyTimerEndedHandler,iFrameElementRef:R}));return o.push(R),A;case y.filePicker:var O=void 0;if(f)O=(null===(E=mn.createModelElementsFromDisplayDescriptions(f,h))||void 0===E?void 0:E.elements)&&(null===(a=null===E||void 0===E?void 0:E.elements)||void 0===a?void 0:a.map)?E.elements.map(Yo(t,n,r,o)):void 0;return i.createElement(zo,Xr({},m,{displayHelpChildren:O,propertyName:u,onUpdateValue:n}));case y.separator:return i.createElement(Ko,Xr({},m));case y.spinner:return i.createElement(Jo,Xr({},m));case y.secureProperty:var _=void 0;if(f)_=(null===(E=mn.createModelElementsFromDisplayDescriptions(f,h))||void 0===E?void 0:E.elements)&&(null===(s=null===E||void 0===E?void 0:E.elements)||void 0===s?void 0:s.map)?E.elements.map(Yo(t,n,r,o)):void 0;var F=Xr(Xr({},m),{labelNode:i.createElement(Xo,Xr({},m,{displayHelpChildren:_}))});return i.createElement(Qo,Xr({},F,{displayHelpChildren:_,eventHandler:t}));default:return}}function Yo(e,t,n,r){return Xo.displayName="SecurePropertyLabel";var ea,ta=function(e){function t(t){var n=e.call(this,t)||this;return n.update=function(e,t){e.run.apply(e,$r([n,t||function(){}],e.args,!1))},n.displayValues={},n.propertyNames=[],n.getPropertyNames(n.props.pageElement.children,n.propertyNames),n.state={propertyErrors:{},groupErrors:{},pendingValues:{},accessibilityText:{}},n}return Zr(t,e),t.prototype.updatePropertyValues=function(e){var t=this.props,n=t.getModelPropertyValue,r=t.onPropertyChange;for(var i in this.state.pendingValues){var o=n(i);void 0!==o&&r&&r(i,o)}this.setState({pendingValues:{}},e)},t.prototype.getPropertyNames=function(e,t){for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i.isProperty()){var o=i;o.displayType!==st.prefillControl&&t.push(o.getPropertyName())}else if(i.isCaptcha()){var a=i;t.push(a.getPropertyName())}i.children&&i.children.length&&this.getPropertyNames(i.children,t)}},t.prototype.getPropertyState=function(){var e=this.props,t=e.getModelPropertyValue,n=e.pageElement,r={};this.propertyNames=[],n&&n.children&&this.getPropertyNames(n.children,this.propertyNames);for(var i=0,o=this.propertyNames;i<o.length;i++){var a=o[i];r[a]=t(a)}var s=Xr(Xr(Xr({},this.displayValues),r),this.state.pendingValues);return{errors:this.state.propertyErrors,values:s,accessibilityText:this.state.accessibilityText}},t.prototype.render=function(){var e=this.props,t=e.children,n=e.elementFactory,r=e.displayOptions,o=e.displaySettings,a=e.eventHub,s=e.theme,l=e.userContext;return i.createElement(Ji.Provider,{value:a},i.createElement(qi.Provider,{value:this.state.groupErrors},i.createElement(Gi.Provider,{value:this.getPropertyState()},i.createElement(Ki.Provider,{value:{elementFactory:n,displayOptions:r,displaySettings:o,theme:s,userContext:l}},t))))},t}(i.Component),na=function(e,t,n){var r;e.setState({propertyErrors:Xr(Xr({},e.state.propertyErrors),(r={},r[n.propertyName]=n,r))},t)},ra=function(e,t,n){var r;e.setState({groupErrors:Xr(Xr({},e.state.groupErrors),(r={},r[n.groupDisplayId]=n,r))},t)},ia=function(e,t,n){var r=Xr({},e.state.propertyErrors);if(r[n])delete r[n],e.setState({propertyErrors:r},t);else{var i=Xr({},e.state.groupErrors);i&&i[n]&&(delete i[n],e.setState({groupErrors:i},t))}},oa=aa=function(e,t,n,r){var i;e.setState({accessibilityText:Xr(Xr({},e.state.accessibilityText),(i={},i[n]=r,i))},t)},sa=function(e,t,n,r){var i;e.setState({pendingValues:Xr(Xr({},e.state.pendingValues),(i={},i[n]=r,i))})},la=function(e,t,n,r){var i;e.displayValues=Xr(Xr({},e.displayValues),((i={})[n]=r,i)),e.forceUpdate(t)},ua=function(e,t){e.setState({propertyErrors:{},groupErrors:{}},t)},da=function e(t,n,r){t.map((function(t){if(t.isProperty()){var i=t,o=i.getPropertyName();r[o]=i}n[t.id]=t,e(t.children||[],n,r)}))},ca=function(e){function t(t){var n=e.call(this,t)||this;if(n._propertyElementRef=i.createRef(),n._propertyElementErrorRef=i.createRef(),n._modalRef=i.createRef(),n._navigationWrapperRef=i.createRef(),n.moreThanOneBusyBlockPropExists=function(){var e=n.props,t=e.busyBlockElement,r=e.displayOptions;return[r.busyBlockId,t,r.busyBlockShowHideHandler].filter(().length>1},n.moveNextPage=function(){var e;return!!(null===(e=n.pidlControlApi)||void 0===e?void 0:e.moveNextPage)&&n.pidlControlApi.moveNextPage().result},n.submitPage=function(){var e;return!!(null===(e=n.pidlControlApi)||void 0===e?void 0:e.submitPage)&&n.pidlControlApi.submitPage().result},n.moveToLastPage=function(){var e;return!!(null===(e=n.pidlControlApi)||void 0===e?void 0:e.moveToLastPage)&&n.pidlControlApi.moveToLastPage().result},n.movePrevPage=function(){var e;return!!(null===(e=n.pidlControlApi)||void 0===e?void 0:e.movePrevPage)&&n.pidlControlApi.movePrevPage().result},n.moveToFirstPage=function(){var e;return!!(null===(e=n.pidlControlApi)||void 0===e?void 0:e.moveToFirstPage)&&n.pidlControlApi.moveToFirstPage().result},n.cancel=function(){var e;return!!(null===(e=n.pidlControlApi)||void 0===e?void 0:e.cancel)&&n.pidlControlApi.cancel().result},n.getPidlExternalControlPropsMap=function(){return n.pidlExternalControlProps},n.getSelectedResource=n.getPidlPayload=n.postMessageToChildIFrames=function(e){return!(!n.pidlControlApi||!n.pidlControlApi.postMessageToChildIFrames)&&n.pidlControlApi.postMessageToChildIFrames(e).result},n.updateChildIFramesHeight=function(e){n.iFrameInnerRefs&&n.iFrameInnerRefs.forEach((function(t,n,r){t&&t.current&&t.current.updateHeight&&t.current.updateHeight(e)}))},n.focusOnPageRefresh=function(e){n.state.disableFocusOnLoad||(e===M.pageRendered||e===M.pageRefreshed?setTimeout((function(){var e,t,r,i;n.state.firstErrorPropertyName||(n.props.onPageRendered&&n.props.onPageRendered(),n.props.propertyElementRef||(null===(t=null===(e=n._propertyElementRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.focus)&&(null===(i=null===(r=n._propertyElementRef)||void 0===r?void 0:r.current)||void 0===i||i.focus()))}),100):e===M.pageNavigated&&setTimeout((function(){var e,t,r;if(!n.state.firstErrorPropertyName){var i=null!==(e=n.props.propertyElementRef)&&void 0!==e?e:n._propertyElementRef;(null===(t=null===i||void 0===i?void 0:i.current)||void 0===t?void 0:t.focus)&&(null===(r=null===i||void 0===i?void 0:i.current)||void 0===r||r.focus())}}),100))},n.busyBlockShowHide=function(e){n.setState({showBusyBlock:e})},n.toggleVisualCaptcha=n.shouldRenderBusyBlock=function(){var e=n.state.showBusyBlock,t=n.props.busyBlockElement;return t&&i.isValidElement(t)&&e},n.reset=function(){n.setState({properties:{},pageError:void 0,viewEventHandler:void 0,pageElement:void 0},(function(){return n.updateState({run:ua,args:[]})}))},n.findFirstVisibleErroredProperty=function(e,t){for(var r=[],i=0;i<t.length;i++)r.push(t[i].propertyName);var o={};return n.propertiesVisitorProcessingAny(e,(function(e,t){if(e&&e.isProperty()&&!e.disabled()&&!e.hidden()&&r.includes(e.getPropertyName()))return t.element=e,!0}),o),o.element},n.findFirstVisibleEnabledPropertyElement=function(e){var t={};return n.propertiesVisitorProcessingAny(e,(function(e,t){if(e&&(e.isIframe()||e.isSecureProperty()||e.isButton()||e.isPrefillControl()||e.isProperty())&&!e.disabled()&&!e.hidden())return(!rr(e)||!n.isRadioPossibleOptionsAllDisabled(e))&&(t.element=e,!0)}),t),t.element},n.findHighlightedButton=function(e){var t={};return n.propertiesVisitorProcessingAny(e,(function(e,t){if(e&&e.isButton()&&e.isHighlighted()&&!e.disabled()&&!e.hidden())return t.element=e,!0}),t),t.element},n.isRadioPossibleOptionsAllDisabled=function(e){for(var t=qt.getKeys(e.possibleOptions),n=!0,r=0;r<t.length;r++)n=n&&e.possibleOptions[t[r]].isDisabled;return n},n.findPropertyElementByPropertyName=function(e,t,r){var i={};return n.propertiesVisitorProcessingDataProperty(e,(function(e,i){if(e&&e.disabled&&!e.disabled()&&e.hidden&&!e.hidden()&&e.getPropertyName&&e.getPropertyName()===t&&(!rr(e)||r&&!qt.isEmptyString(fn.normalizeValueToDisplayDescriptionPossibleOptions(e,r))))return(!rr(e)||!n.isRadioPossibleOptionsAllDisabled(e))&&(i.element=e,!0)}),i),i.element},n.onUpdateValue=function(e,t,r){if(n.state.viewEventHandler){n.pendingPropertyValue(e,t);var i=function(){n.state.viewEventHandler.updateModelPropertyValue(e,t,r).then((function(){n.updatePropertyValues()}))};r===de.finished?setTimeout(i,1):i()}},n.onUpdatePrefill=function(e,t){if(n.state.viewEventHandler){var r=n.state.viewEventHandler.updatePrefillValue(e.pidlIdentity,t).then(r,r)}},n.updateState=function(e){if(e&&n.pendingUpdates.push(e),n.wrapper.current&&n.pendingUpdates.length>0){var t=n.pendingUpdates[0];n.pendingUpdates.splice(0,1),n.wrapper.current.update(t,(function(){return n.updateState()}))}},n.getTelemetryLogger=function(){var e,t,r,i,o=null===(t=null===(e=n.props.elementFactory)||void 0===e?void 0:e.isReactNative)||void 0===t?void 0:t.call(e),a=null===(r=n.props.callbacksIn)||void 0===r?void 0:r.telemetryLogger,s=null===(i=n.props.elementFactory)||void 0===i?void 0:i.telemetryLogger;return o&&s?n.props.elementFactory.telemetryLogger(a):a||new Wr},n.initPidl=function(){var e,t=n.props,r=t.userContext,i=t.returnOptions,o=t.displayOptions,a=t.telemetryOptions,s=t.callbacksIn,l=t.transformersIn,u=t.onShowHideBusy,d=t.pidlsdkMock,c=Xr({},l),p=Xr(Xr({},s),{telemetryLogger:n.getTelemetryLogger(),view:s&&s.view?s.view:{initialize:function(){},render:function(e){if(!e.pageElement||!e.pageElement.children||0===e.pageElement.children.length)return{succeeded:!1};var t={},r={},i={},o=n.transformPage(e.pageElement,e.displaySettings);for(var a in da(o.children,t,r),r)r.hasOwnProperty(a)&&(i[a]=e.viewEventHandler.getModelPropertyValue(a)||"");return e.viewEventHandler.captchaHyperlinkClickHandler=n.toggleVisualCaptcha,n.setState({elements:t,properties:r,pageElement:o,viewEventHandler:e.viewEventHandler,displaySettings:e.displaySettings,eventHub:e.eventHub}),{succeeded:!0}},reset:function(){},showHideBusy:markAsFilled:function(e){},markAsUnfilled:function(e){},checkAndMarkAsFilled:function(e,t){},checkAndMarkAsUnfilled:setFocusOnFirstError:function(){setTimeout((function(){var e,t,r,i;n.state.firstErrorPropertyName&&((null===(t=null===(e=n._propertyElementErrorRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.focus)&&(null===(i=null===(r=n._propertyElementErrorRef)||void 0===r?void 0:r.current)||void 0===i||i.focus()),n.setState({firstErrorPropertyName:void 0}))}),100)},showPropertyError:function(e){return n.showPropertyError(e),!0},showGroupError:showPageError:hidePropertyError:function(e){n.hidePropertyError(e)},hidePageError:postMessageToChildIFrames:function(e){var t=!0;return n.iFrameInnerRefs&&n.iFrameInnerRefs.forEach((function(n,r,i){if(n&&n.current&&n.current.postMessage){var o=n.current.postMessage(e);t=t&&o}else t=!1})),t},getPageElementValues:function(){return n.wrapper.current?n.wrapper.current.getPropertyState().values:{}},setDisabledByDisplayId:getVisibleProperties:function(){if(n.wrapper.current&&n.state.pageElement){var e=[];return n.wrapper.current.getPropertyNames([n.state.pageElement],e),e}return[]},updatePrefillControls:function(){n.updatePropertyValues()},updatePropertyValue:function(e,t,r,i){var o=n.state.properties[e];o&&n.updateDisplayValue(o.displayName,r)},setAccessibilityText:hideModalDialog:function(){var e,t;null===(t=null===(e=n._modalRef)||void 0===e?void 0:e.current)||void 0===t||t.toggleDisplay(!1)},getViewType:function(){return"reactview"}}});return e=d?d.initMock(r,i,n.eventHandler,o,a,p,c):new Lr(r,i,n.eventHandler,Xr(Xr({},o),{containerId:o.containerId||""}),p,a,n.privateEventHandler,n.oneDSService,c),n.props.operation(e),e},n.moreThanOneBusyBlockPropExists())throw new Error(kt.onlyOneBusyBlockPropAllowed.debugMessage);return n.eventHandler=function(e,t){var r,i,o,a,s,l,u,d,c,p,m;if(((null===(r=n.props.elementFactory)||void 0===r?void 0:r.createNavigationWrapper)&&(null===t||void 0===t?void 0:t.currentPageIndex)||(null===t||void 0===t?void 0:t.pageId))&&(t.currentPageIndex===n.state.currentPageIndex&&t.pageId===n.state.currentPageId||n.setState({currentPageIndex:null===t||void 0===t?void 0:t.currentPageIndex,currentPageId:null===t||void 0===t?void 0:t.pageId})),(null===(i=n.props.elementFactory)||void 0===i?void 0:i.createNavigationWrapper)&&e===M.pageRefreshed&&(null===(a=null===(o=n._navigationWrapperRef.current)||void 0===o?void 0:o.forceFocusRefRefresh)||void 0===a||a.call(o)),e===M.error&&n.state.pageElement&&((null===(s=null===t||void 0===t?void 0:t.error)||void 0===s?void 0:s.code)===kt.formSubmissionFailedBadUserInput.code||(null===(l=null===t||void 0===t?void 0:t.error)||void 0===l?void 0:l.code)===kt.formValidationFailed.code)&&(null===(u=null===t||void 0===t?void 0:t.error)||void 0===u?void 0:u.errors)&&(null===(d=null===t||void 0===t?void 0:t.error)||void 0===d?void 0:d.errors.length)>0&&((null===(c=null===t||void 0===t?void 0:t.error)||void 0===c?void 0:c.errors[0].propertyName)||(null===(p=null===t||void 0===t?void 0:t.error)||void 0===p?void 0:p.errors[0].groupDisplayId))){var f=n.findFirstVisibleErroredProperty(n.state.pageElement.children,t.error.errors);n.setState({firstErrorPropertyName:null!==(m=null===f||void 0===f?void 0:f.getPropertyName())&&void 0!==m?m:t.error.errors[0].propertyName})}return e===M.propertySelected&&n.setState({disableFocusOnLoad:!1,lastFocusedPropertyName:null===t||void 0===t?void 0:t.propertyName}),e===M.selectionChanged&&n.setState({disableFocusOnLoad:!1,lastFocusedPropertyName:null===t||void 0===t?void 0:t.propertyName,lastFocusedPropertyValue:null===t||void 0===t?void 0:t.propertyValue}),n.focusOnPageRefresh(e),n.props.onEvent&&n.props.onEvent(e,t)},n.privateEventHandler=function(e,t){e===B.propertyUnselected&&n.setState({lastFocusedPropertyName:void 0,firstErrorPropertyName:void 0}),e===B.success&&n.reset(),n.focusOnPageRefresh(e)},n.props&&n.props.elementFactory&&n.props.elementFactory.getOneDSService&&(n.oneDSService=n.props.elementFactory.getOneDSService()),n.wrapper=i.createRef(),n.pendingUpdates=[],n.iFrameInnerRefs=[],n.state={elements:{},properties:{},pageError:void 0,viewEventHandler:void 0,displaySettings:void 0,eventHub:void 0,showBusyBlock:!1,currentPageIndex:null,currentPageId:null,lastFocusedPropertyName:void 0,lastFocusedPropertyValue:void 0,firstErrorPropertyName:void 0,disableFocusOnLoad:n.props.displayOptions.disableFocusOnLoad},n}return Zr(t,e),t.prototype.componentDidMount=function(){var e=this.props.env;wr.set(e||oi),this.pidlControlApi=this.pidlControlApi||this.initPidl()},t.prototype.isAddResourceProps=t.prototype.componentDidUpdate=function(e){this.pidlControlApi=this.pidlControlApi||this.initPidl(),this.isAddResourceProps(this.props)&&e&&e.pidlDocInfo&&this.props.pidlDocInfo&&JSON.stringify(e.pidlDocInfo)!==JSON.stringify(this.props.pidlDocInfo)&&(this.pidlControlApi=this.initPidl())},t.prototype.wrapGroupedElements=function(e,t){var n=this.state.pageError;return(null===e||void 0===e?void 0:e.isReactNative)&&e.isReactNative()?i.createElement(i.Fragment,null,t):i.createElement("div",{className:a("pidl-react-page-error",{"d-none":!n||!n.message})},t)},t.prototype.render=function(){var e=this.props,t=e.displayOptions,n=e.children,r=e.onPropertyChange,o=e.elementFactory,a=e.busyBlockElement,s=e.propertyElementRef,l=e.theme,u=this.state,d=u.pageElement,c=u.viewEventHandler,p=u.pageError,m=u.displaySettings,f=u.eventHub,h=u.firstErrorPropertyName,y=u.lastFocusedPropertyName,g=u.lastFocusedPropertyValue,v=t;a&&i.isValidElement(a)&&(v.busyBlockShowHideHandler=this.busyBlockShowHide);var P=n;if(this.pidlControlApi&&d&&c){this.attachFocusRef(d,s,h,y,g),this.attachModalRef(d);var b=d.children.map(Yo(c,this.onUpdateValue,this.onUpdatePrefill,this.iFrameInnerRefs)),I=new Map,E=d.keyPidlActions;Object.keys(E||{}).forEach(();var S=(null===o||void 0===o?void 0:o.createNavigationWrapper)?o.createNavigationWrapper(b,this.state.currentPageIndex,this.state.currentPageId,this.cancel,this.movePrevPage,this.moveToLastPage,this.moveToFirstPage,this.moveNextPage,this._navigationWrapperRef,I):i.createElement(i.Fragment,null,b);P=i.createElement(ta,{ref:this.wrapper,getModelPropertyValue:c.getModelPropertyValue,onPropertyChange:r,pageElement:d,elementFactory:o,displayOptions:v,displaySettings:m,eventHub:f,theme:l,userContext:this.props.userContext},S)}var D=p?i.createElement(Yi,{message:p.message}):null;return i.createElement(i.Fragment,null,i.createElement(Ki.Provider,{value:{elementFactory:o,displayOptions:v,displaySettings:m,theme:l,userContext:this.props.userContext}},i.createElement(i.Fragment,null,this.wrapGroupedElements(o,D))),this.shouldRenderBusyBlock()&&((null===o||void 0===o?void 0:o.createBusyBlockWrapper)?o.createBusyBlockWrapper(i.cloneElement(a)):i.cloneElement(a)),P)},t.prototype.attachFocusRef=function(e,t,n,r,i){var o,a=e.children;if(n)(o=this.findPropertyElementByPropertyName(a,n))&&(o.propertyElementRef=this._propertyElementErrorRef);else{r&&(o=this.findPropertyElementByPropertyName(a,r,i))||(o=this.findFirstVisibleEnabledPropertyElement(a));var s=this.findHighlightedButton(a);o&&(o.isButton()&&s&&(o=s),o.propertyElementRef||(o.propertyElementRef=null!==t&&void 0!==t?t:this._propertyElementRef))}},t.prototype.attachModalRef=function(e){var t;e.children.forEach((),t&&(t.groupElementRef=this._modalRef)},t.prototype.propertiesVisitorProcessingDataProperty=function(e,t,n){if(e){if(!Array.isArray(e))return this.propertyVisitorProcessingDataProperty(e,t,n);for(var r=0;r<e.length;r++){var i=this.propertyVisitorProcessingDataProperty(e[r],t,n);if(i)return i}}},t.prototype.propertyVisitorProcessingDataProperty=function(e,t,n){if(e){if(e.isProperty()||e.isSecureProperty()||e.isButton()){var r=t(e,n);if(r)return r}if(e.children&&e.children.length>0&&(!n||!n.stopDescendantsProcessing))return this.propertiesVisitorProcessingDataProperty(e.children,t,n);n&&delete n.stopDescendantsProcessing}},t.prototype.propertiesVisitorProcessingAny=function(e,t,n){if(e){if(!Array.isArray(e))return this.propertyVisitorProcessingAny(e,t,n);for(var r=0;r<e.length;r++){var i=this.propertyVisitorProcessingAny(e[r],t,n);if(i)return i}}},t.prototype.propertyVisitorProcessingAny=function(e,t,n){if(e){var r=t(e,n);return r||(!(e.children&&e.children.length>0)||n&&n.stopDescendantsProcessing?void(n&&delete n.stopDescendantsProcessing):this.propertiesVisitorProcessingAny(e.children,t,n))}},t.prototype.pendingPropertyValue=function(e,t){this.updateState({run:sa,args:[e,t]})},t.prototype.updatePropertyValues=function(){this.updateState({run:oa,args:[]})},t.prototype.updateDisplayValue=function(e,t){this.updateState({run:la,args:[e,t]})},t.prototype.updateAccessibilityText=function(e,t){this.updateState({run:aa,args:[e,t]})},t.prototype.showGroupError=function(e){this.updateState({run:ra,args:[e]})},t.prototype.showPropertyError=function(e){this.updateState({run:na,args:[e]})},t.prototype.hidePropertyError=function(e){this.updateState({run:ia,args:[e]})},t.prototype.splitChildren=function(e,t){var n=$r([],e.children,!0);if(!n||!n.length)return n;var r=n[n.length-1];if(!tr(r)||!r.isSubmitGroup)return n;(null===r||void 0===r?void 0:r.isSubmitGroup)&&this.setExternalControlNames(r);var i=r.operationType,o=r.pidlIdentity,a=r.isLinkedPidl;n.pop();var s={displayId:T.pageBlock,displayType:st.group,displayName:null,styleHints:e.displayDescription.styleHints},l=new vn(w.group,null,s,i,o,a);return l.children=n,r.id=t.submitButtonBlock.id,[l,r]},t.prototype.transformPage=function(e,t){return Xr(Xr({},e),{children:this.splitChildren(e,t)})},t.prototype.setExternalControlNames=function(e){var t=new Map,n=H.gohome,r=H.submit,i=H.next,o=H.prev,a=e.members;a&&a.forEach((function(e){var a;e.displayContent&&(null===(a=e.pidlAction)||void 0===a?void 0:a.type)&&(e.pidlAction.type==n||e.pidlAction.type==r||e.pidlAction.type==i||e.pidlAction.type==o)&&(t[e.pidlAction.type]={type:e.pidlAction.type,displayContent:e.displayContent})})),this.pidlExternalControlProps=t},t.defaultProps={env:oi},t}(i.Component),pa=function(e){function t(t,n){var r=e.call(this,t)||this;return r.moveNextPage=function(){return!(!r.pidlRef.current||!r.pidlRef.current.moveNextPage)&&r.pidlRef.current.moveNextPage()},r.submitPage=function(){return!(!r.pidlRef.current||!r.pidlRef.current.submitPage)&&r.pidlRef.current.submitPage()},r.movePrevPage=function(){return!(!r.pidlRef.current||!r.pidlRef.current.movePrevPage)&&r.pidlRef.current.movePrevPage()},r.cancel=function(){return!(!r.pidlRef.current||!r.pidlRef.current.cancel)&&r.pidlRef.current.cancel()},r.getPidlExternalControlPropsMap=function(){return r.pidlRef.current&&r.pidlRef.current.getPidlExternalControlPropsMap?r.pidlRef.current.getPidlExternalControlPropsMap():null},r.getSelectedResource=function(){return r.pidlRef.current&&r.pidlRef.current.getSelectedResource()},r.getPidlPayload=r.postMessageToChildIFrames=function(e){return!(!r.pidlRef.current||!r.pidlRef.current.postMessageToChildIFrames)&&r.pidlRef.current.postMessageToChildIFrames(e)},r.implementationMissing=function(e,t,n){var i,o,a;if(!r.pidlRef.current)return null;var s=null===(a=null===(o=null===(i=r.pidlRef)||void 0===i?void 0:i.current)||void 0===o?void 0:o.state)||void 0===a?void 0:a.eventHub;null===s||void 0===s||s.implementationMissing(e,t,n)},r.updateChildIFramesHeight=r.pidlRef=i.createRef(),r.pidlOperation=n,r}return Zr(t,e),t.prototype.render=function(){return i.createElement(ca,Xr({},this.props,{ref:this.pidlRef,operation:this.pidlOperation}),this.props.children)},t}(i.Component),ma=function(e){function t(t){var n=e.call(this,t,(function(e){return e.addAddress(n.props.pidlDocInfo,n.props.prefillData,n.props.options)}))||this;return n}return Zr(t,e),t}(pa),fa=function(e){function n(n){var r=e.call(this,n)||this;r.compileParameters=function(e,n,r,i,o,a,s){var l={operation:ai.Operation,type:a||ai.DefaultAddressType,scenario:e,country:n,language:r,partner:i,setAsDefaultBilling:e===t.AddressScenario.profile||s};return o&&(l=Xr(Xr({},l),o)),l},r.FailureHandler=function(e){r.props.onFailure(e.error)},r.compileReturnOptions=function(e,t,n){return{callbacks:{success:e,failure:r.FailureHandler,gohome:n}}},r.onEvent=function(e,t){var n=r.props,i=n.onEvent,o=n.viewTermsHandler,a=We,s=a.eventNames,l=a.CustomTriggerEventConstants;(e===s.triggerEvent&&o&&t.eventName===l.viewTermsTriggered||e===s.navigate&&o&&t.displayId===ai.ViewTermsId)&&o(t),i&&i(e,t)};var i=r.props,o=i.elementFactory,a=i.partner,s=i.baseStyleOverrides,l=i.scenarioStyleOverrides,u=i.baseFocusStyleOverrides,d=i.scenarioFocusStyleOverrides,c=(null===o||void 0===o?void 0:o.initializeStyles)&&o.initializeStyles(t.AppScenario.AddAddress,a,s,l,u,d);return r.state={styleProvider:c},r}return Zr(n,e),n.prototype.render=function(){var e=this.props,t=e.authToken,n=e.env,r=e.parameters,i=e.busyBlockElement,a=e.country,s=e.language,l=e.scenario,u=e.addressType,d=e.partner,c=e.elementFactory,p=e.onSuccess,m=e.onFailure,f=e.onCancel,h=e.showSubmitBlock,y=void 0===h||h,g=e.busyBlockShowHideHandler,v=e.prefillData,P=e.pidlsdkMock,b=e.telemetryLogger,I=e.telemetryOptions,E=e.propertyElementRef,S=e.onPageRendered,D=e.setAsDefaultBilling,C=e.headers,T=e.callbacksIn,k=this.state.styleProvider,x=this.compileParameters(l,a,s,d,r,u,D),w=this.compileReturnOptions(p,m,f);return o.createElement(Qi.Provider,{value:{styleProvider:k}},o.createElement(ma,{busyBlockElement:i,displayOptions:{containerId:ai.ContainerId,busyBlockShowHideHandler:g,showSubmitBlock:y},pidlDocInfo:{resourceType:ai.ResourceType,parameters:x},env:n,returnOptions:w,onEvent:this.onEvent,userContext:{authToken:t,userId:ai.UserId,additionalHeaders:C},elementFactory:c,prefillData:v,pidlsdkMock:P,callbacksIn:Xr(Xr({},T),{telemetryLogger:b}),telemetryOptions:I,propertyElementRef:E,onPageRendered:S}))},n}(o.Component),ha=function(e){function t(t){var n=e.call(this,t,(function(e){return e.addPaymentInstrument(n.props.pidlDocInfo,n.props.prefillData,n.props.options)}))||this;return n}return Zr(t,e),t}(pa),ya=function(e){function n(n){var r=e.call(this,n)||this;r.baseComponentRef=o.createRef(),r.compileParameters=function(e,t,n,r,i,o,a){var s={operation:yi.Operation,country:e,language:t,partner:n,completePrerequisites:a,type:o,family:i};return r&&(s=Xr(Xr({},s),r)),s},r.FailureHandler=function(e){r.props.onFailure(e.error)},r.compileReturnOptions=function(e,t,n,i,o){return{urls:{success:e,failure:t},callbacks:{success:n,failure:r.FailureHandler,gohome:o}}},r.compileCallbacks=function(){var e=r.props,t=e.telemetryLogger,n=e.elementFactory,i=e.callbacksIn,o=Xr({},i);return t&&(o.telemetryLogger=t),(null===n||void 0===n?void 0:n.encryptionHandler)&&(o.encryptionHandler=n.encryptionHandler()),o},r.compileOptions=function(e){return e?{riskData:{greenId:e}}:null},r.onEvent=function(e,t){var n=r.props,i=n.onEvent,o=n.viewTermsHandler,a=We,s=a.eventNames,l=a.CustomTriggerEventConstants;(e===s.triggerEvent&&o&&t.eventName===l.viewTermsTriggered||e===s.navigate&&o&&t.displayId===yi.ViewTermsId)&&o(t),i&&i(e,t)},r.getRef=function(){return r.baseComponentRef};var i=r.props,a=i.elementFactory,s=i.partner,l=i.baseStyleOverrides,u=i.scenarioStyleOverrides,d=i.baseFocusStyleOverrides,c=i.scenarioFocusStyleOverrides,p=(null===a||void 0===a?void 0:a.initializeStyles)&&a.initializeStyles(t.AppScenario.AddPaymentInstrument,s,l,u,d,c);return r.state={styleProvider:p},r}return Zr(n,e),n.prototype.render=function(){var e=this.props,t=e.authToken,n=e.env,r=e.parameters,i=e.busyBlockElement,a=e.completePrerequisites,s=e.country,l=e.language,u=e.partner,d=e.paymentFamily,c=e.paymentType,p=e.elementFactory,m=e.onSuccess,f=e.onFailure,h=e.onCancel,y=e.showSubmitBlock,g=void 0===y||y,v=e.busyBlockShowHideHandler,P=e.prefillData,b=e.pidlsdkMock,I=(e.telemetryLogger,e.telemetryOptions),E=e.propertyElementRef,S=e.onPageRendered,D=e.headers,C=e.greenId,T=e.redirectionSuccessUrl,k=e.redirectionFailureUrl,x=e.serviceOverrides,w=this.state.styleProvider,R=this.compileParameters(s,l,u,r,d,c,a),A=this.compileReturnOptions(T,k,m,f,h),O=this.compileCallbacks(),_=this.compileOptions(C);return o.createElement(Qi.Provider,{value:{styleProvider:w}},o.createElement(ha,{busyBlockElement:i,displayOptions:{containerId:yi.ContainerId,busyBlockShowHideHandler:v,showSubmitBlock:g},pidlDocInfo:{resourceType:yi.ResourceType,parameters:R},env:n,returnOptions:A,onEvent:this.onEvent,userContext:{authToken:t,userId:yi.UserId,additionalHeaders:D,serviceOverrides:x},elementFactory:p,prefillData:P,pidlsdkMock:b,callbacksIn:O,telemetryOptions:I,propertyElementRef:E,onPageRendered:S,ref:this.baseComponentRef,options:_}))},n}(o.Component),ga=function(e){function t(t){var n=this,r=Xr(Xr({},t.pidlDocInfo),{resourceType:"PaymentInstrument"});return n=e.call(this,t,()||this}return Zr(t,e),t}(pa),va=function(e){function n(n){var r=e.call(this,n)||this;r.compileParameters=function(){var e=r.props,t=e.country,n=e.language,i=e.partner,o=e.parameters,a=e.paymentFamily,s=e.paymentType,l=e.scenario,u=e.prefillData,d=e.provider,c=e.channel,p=e.referrerId,m=e.sessionId,f=e.ocid,h={operation:Pi.Operation,country:t,language:n,partner:i,scenario:l,type:s,family:a,prefillData:u,provider:d,channel:c,referrerId:p,sessionId:m,ocid:f};return o&&(h=Xr(Xr({},h),o)),h},r.FailureHandler=function(e){var t,n,i,o=null===(i=null===(n=null===(t=null===Jr||void 0===Jr?void 0:Kr)||void 0===t?void 0:t.errorMessages)||void 0===n?void 0:n.pollingTimedOut)||void 0===i?void 0:i.code;o&&e.code===o.toString()?r.props.onTimeOut(e):r.props.onFailure(e)},r.compileReturnOptions=function(e,t,n,i){return{urls:i,callbacks:{success:e,failure:r.FailureHandler,gohome:n}}},r.compileCallbacks=function(){var e=r.props,t=e.telemetryLogger,n=e.elementFactory,i=e.callbacksIn,o=Xr({},i);return t&&(o.telemetryLogger=t),(null===n||void 0===n?void 0:n.encryptionHandler)&&(o.encryptionHandler=n.encryptionHandler()),o},r.onEvent=function(e,t){var n=r.props,i=n.onEvent,o=n.onNavigate;o&&e===M.navigate&&o(t),i&&i(e,t)};var i=r.props,o=i.elementFactory,a=i.partner,s=i.baseStyleOverrides,l=i.scenarioStyleOverrides,u=i.baseFocusStyleOverrides,d=i.scenarioFocusStyleOverrides,c=(null===o||void 0===o?void 0:o.initializeStyles)&&o.initializeStyles(t.AppScenario.ApplyPaymentInstrument,a,s,l,u,d);return r.state={styleProvider:c},r}return Zr(n,e),n.prototype.render=function(){var e=this.props,t=e.authToken,n=e.env,r=e.busyBlockElement,i=e.elementFactory,a=e.onSuccess,s=e.onFailure,l=e.onCancel,u=e.redirectReturnUrls,d=e.showSubmitBlock,c=void 0===d||d,p=e.busyBlockShowHideHandler,m=e.pidlsdkMock,f=e.prefillData,h=e.telemetryOptions,y=e.propertyElementRef,g=(e.onEvent,e.onPageRendered),v=e.headers,P=e.useWebView2,b=this.state.styleProvider,I=this.compileParameters(),E=this.compileReturnOptions(a,s,l,u),S=this.compileCallbacks();return o.createElement(Qi.Provider,{value:{styleProvider:b}},o.createElement(ga,{busyBlockElement:r,displayOptions:{containerId:Pi.ContainerId,busyBlockShowHideHandler:p,showSubmitBlock:c,useWebView2:P},pidlDocInfo:{resourceType:Pi.ResourceType,parameters:I},env:n,returnOptions:E,onEvent:this.onEvent,userContext:{authToken:t,userId:Pi.UserId,additionalHeaders:v},elementFactory:i,prefillData:f,pidlsdkMock:m,callbacksIn:S,telemetryOptions:h,propertyElementRef:y,onPageRendered:g}))},n}(o.Component),Pa=function(e){function t(t){var n=e.call(this,t,(function(e){return e.addResource(n.props.pidlDocInfo,n.props.prefillData,n.props.options)}))||this;return n}return Zr(t,e),t}(pa),ba=function(e){function t(t){var n=e.call(this,t,(function(e){return e.applyResource(n.props.pidlDocInfo,n.props.prefillData,n.props.options)}))||this;return n}return Zr(t,e),t}(pa),Ia=function(e){function t(t){var n=e.call(this,t,(function(e){return e.handlePurchasePendingState(n.props.parameters)}))||this;return n}return Zr(t,e),t}(pa),Ea=function(e){function n(n){var r=e.call(this,n)||this;r.compileDisplayOptions=function(){var e=r.props,t=e.busyBlockShowHideHandler,n=e.showSubmitBlock;return{containerId:di.ContainerId,busyBlockShowHideHandler:t,showSubmitBlock:void 0===n||n}},r.compileParameters=function(){var e=r.props,t=e.country,n=e.language,i=e.partner,o=e.piid,a=e.orderId,s=e.sessionId;return{piResourceInfo:{resourceType:di.ResourceType,parameters:{market:t,language:n,partner:i,sessionId:s,orderId:a},id:o},sessionId:s,orderId:a,options:{}}},r.FailureHandler=function(e){r.props.onFailure(e.error)},r.compileReturnOptions=function(){var e=r.props,t=e.onSuccess,n=e.onCancel;return{callbacks:{success:t,failure:r.FailureHandler,gohome:n}}},r.compileCallbacksIn=function(){return Xr(Xr({},r.props.callbacksIn),{telemetryLogger:r.props.telemetryLogger})};var i=r.props,o=i.elementFactory,a=i.partner,s=i.baseStyleOverrides,l=i.scenarioStyleOverrides,u=i.baseFocusStyleOverrides,d=i.scenarioFocusStyleOverrides,c=(null===o||void 0===o?void 0:o.initializeStyles)&&o.initializeStyles(t.AppScenario.ConfirmPayment,a,s,l,u,d);return r.state={styleProvider:c},r}return Zr(n,e),n.prototype.render=function(){var e=this.props,t=e.authToken,n=e.env,r=e.pidlsdkMock,i=e.propertyElementRef,a=e.telemetryOptions,s=e.onEvent,l=e.onPageRendered,u=e.elementFactory,d=e.busyBlockElement,c=this.state.styleProvider,p=this.compileDisplayOptions(),m=this.compileParameters(),f=this.compileReturnOptions(),h=this.compileCallbacksIn();return o.createElement(Qi.Provider,{value:{styleProvider:c}},o.createElement(Ia,{busyBlockElement:d,displayOptions:p,parameters:m,env:n,returnOptions:f,userContext:{authToken:t,userId:di.UserId},onEvent:s,elementFactory:u,pidlsdkMock:r,callbacksIn:h,telemetryOptions:a,propertyElementRef:i,onPageRendered:l}))},n}(o.Component),Sa=function(e){function t(t){var n=e.call(this,t,(function(e){return e.createPaymentSession(n.props.paymentSessionOrData)}))||this;return n}return Zr(t,e),t}(pa),Da=function(e){function t(t){var n=e.call(this,t,(function(e){return e.updateResource(n.props.resourceInfo,null,n.props.pidlDocInfo)}))||this;return n}return Zr(t,e),t}(pa),Ca=function(e){function n(n){var r=e.call(this,n)||this;r.compileParameters=function(e,t,n,r,i,o){var a=Xr({operation:li.Operation,type:li.AddressType,scenario:e},{country:t,language:n,partner:r,addressId:o});return i&&(a=Xr(Xr({},a),i)),a},r.FailureHandler=function(e){r.props.onFailure(e.error)},r.compileReturnOptions=function(e,t,n){return{callbacks:{success:e,failure:r.FailureHandler,gohome:n}}},r.onEvent=function(e,t){var n=r.props,i=n.onEvent,o=n.viewTermsHandler,a=We,s=a.eventNames,l=a.CustomTriggerEventConstants;(e===s.triggerEvent&&o&&t.eventName===l.viewTermsTriggered||e===s.navigate&&o&&t.displayId===ai.ViewTermsId)&&o(t),i&&i(e,t)};var i=r.props,o=i.elementFactory,a=i.partner,s=i.baseStyleOverrides,l=i.scenarioStyleOverrides,u=i.baseFocusStyleOverrides,d=i.scenarioFocusStyleOverrides,c=(null===o||void 0===o?void 0:o.initializeStyles)&&o.initializeStyles(t.AppScenario.AddAddress,a,s,l,u,d);return r.state={styleProvider:c},r}return Zr(n,e),n.prototype.render=function(){var e=this.props,t=e.authToken,n=e.addressId,r=e.env,i=e.parameters,a=e.busyBlockElement,s=e.scenario,l=e.country,u=e.language,d=e.partner,c=e.elementFactory,p=e.onSuccess,m=e.onFailure,f=e.onCancel,h=e.showSubmitBlock,y=void 0===h||h,g=e.busyBlockShowHideHandler,v=e.pidlsdkMock,P=e.telemetryLogger,b=e.propertyElementRef,I=e.onPageRendered,E=e.headers,S=this.state.styleProvider,D=this.compileParameters(s,l,u,d,i,n),C=this.compileReturnOptions(p,m,f);return o.createElement(Qi.Provider,{value:{styleProvider:S}},o.createElement(Da,{busyBlockElement:a,displayOptions:{containerId:li.ContainerId,busyBlockShowHideHandler:g,showSubmitBlock:y},resourceInfo:{id:n,resourceType:li.ResourceType,parameters:{}},pidlDocInfo:{resourceType:li.ResourceType,parameters:D},env:r,returnOptions:C,onEvent:this.onEvent,userContext:{authToken:t,userId:li.UserId,additionalHeaders:E},elementFactory:c,pidlsdkMock:v,callbacksIn:{telemetryLogger:P},propertyElementRef:b,onPageRendered:I}))},n}(o.Component),Ta=function(e){function t(t){var n=e.call(this,t,(function(e){return e.updateResource(n.props.resourceInfo,null,n.props.pidlDocInfo)}))||this;return n}return Zr(t,e),t}(pa),ka=function(e){function n(n){var r=e.call(this,n)||this;r.baseComponentRef=o.createRef(),r.onEvent=function(e,t){var n=r.props,i=n.onEvent,o=n.viewTermsHandler,a=We,s=a.eventNames,l=a.CustomTriggerEventConstants;(e===s.triggerEvent&&o&&t.eventName===l.viewTermsTriggered||e===s.navigate&&o&&t.displayId===vi.ViewTermsId)&&o(t),i&&i(e,t)},r.compileParameters=function(e,t,n,r,i,o){var a={country:e,language:t,partner:i,type:n,family:r};return o&&(a=Xr(Xr({},a),o)),a},r.FailureHandler=function(e){r.props.onFailure(e.error)},r.compileReturnOptions=function(e,t){return{callbacks:{success:e,failure:r.FailureHandler,gohome:t}}},r.getRef=function(){return r.baseComponentRef};var i=r.props,a=i.elementFactory,s=i.partner,l=i.baseStyleOverrides,u=i.scenarioStyleOverrides,d=i.baseFocusStyleOverrides,c=i.scenarioFocusStyleOverrides,p=(null===a||void 0===a?void 0:a.initializeStyles)&&a.initializeStyles(t.AppScenario.EditPaymentInstrument,s,l,u,d,c);return r.state={styleProvider:p},r}return Zr(n,e),n.prototype.render=function(){var e=this.props,t=e.authToken,n=e.paymentInstrumentId,r=e.paymentType,i=e.paymentFamily,a=e.env,s=e.parameters,l=e.busyBlockElement,u=e.country,d=e.language,c=e.partner,p=e.elementFactory,m=e.onSuccess,f=e.onCancel,h=e.showSubmitBlock,y=void 0===h||h,g=e.busyBlockShowHideHandler,v=e.pidlsdkMock,P=e.telemetryLogger,b=e.propertyElementRef,I=e.onPageRendered,E=e.headers,S=e.callbacksIn,D=this.state.styleProvider,C=this.compileParameters(u,d,r,i,c,s),T=this.compileReturnOptions(m,f);return o.createElement(Qi.Provider,{value:{styleProvider:D}},o.createElement(Ta,{busyBlockElement:l,env:a,returnOptions:T,onEvent:this.onEvent,userContext:{authToken:t,userId:vi.UserId,additionalHeaders:E},elementFactory:p,pidlsdkMock:v,callbacksIn:Xr(Xr({},S),{telemetryLogger:P}),propertyElementRef:b,onPageRendered:I,displayOptions:{containerId:vi.ContainerId,busyBlockShowHideHandler:g,showSubmitBlock:y},resourceInfo:{id:n,resourceType:vi.ResourceType,parameters:{partner:c}},pidlDocInfo:{resourceType:vi.ResourceType,parameters:C},ref:this.baseComponentRef}))},n}(o.Component),xa=function(e){function t(t){var n=e.call(this,t,(function(e){return e.fundStoredValue(n.props.fundStoredValueParams)}))||this;return n}return Zr(t,e),t}(pa),wa=function(e){function t(t){var n=e.call(this,t,(function(e){return e.handlePaymentChallenge(n.props.paymentSessionOrData,n.props.containerRef)}))||this;return n}return Zr(t,e),t}(pa),Ra=function(e){function t(t){var n=e.call(this,t,(function(e){return e.handlePurchaseRiskChallenge(n.props.parameters)}))||this;return n}return Zr(t,e),t}(pa);(ea=t.RiskPurchaseType||(t.RiskPurchaseType={})).CVV="cvv",ea.SMS="sms";var Aa,Oa=function(e){function t(t){var n=e.call(this,t,(function(e){return e.handlePurchaseRiskChallenge(n.props.parameters)}))||this;return n}return Zr(t,e),t}(pa),_a=function(e){function n(n){var r=e.call(this,n)||this;r.HandleRiskChallengeInternalRef=o.createRef(),r.onEvent=function(e,t){var n=r.props,i=n.onEvent,o=n.viewTermsHandler,a=We,s=a.eventNames,l=a.CustomTriggerEventConstants;(e===s.triggerEvent&&o&&t.eventName===l.viewTermsTriggered||e===s.navigate&&o&&t.displayId===Si.ViewTermsId)&&o(t),i&&i(e,t)},r.compileDisplayOptions=function(){var e=r.props,t=e.busyBlockShowHideHandler,n=e.showSubmitBlock;return{containerId:ui.ContainerId,busyBlockShowHideHandler:t,showSubmitBlock:void 0===n||n}},r.compileParameters=function(){var e=r.props,t=e.piid,n=e.language,i=e.country,o=e.partner,a=e.type,s=e.sessionId;return{options:{},piResourceInfo:{id:t,parameters:{language:n,market:i,partner:o},resourceType:ui.ResourceType},riskChallengeData:[a],sessionId:s}},r.FailureHandler=function(e){r.props.onFailure(e.error)},r.compileReturnOptions=function(){var e=r.props,t=(e.onSuccess,e.onCancel);return{callbacks:{success:r.onSuccess,failure:r.FailureHandler,gohome:t}}},r.onSuccess=function(e){var n=r.props,i=n.onSuccess;n.type===t.RiskPurchaseType.SMS?i({challengeType:t.RiskPurchaseType.SMS}):i(e)},r.compileCallbacksIn=function(){var e=r.props,n=e.onSuccess,i=e.telemetryLogger,o=e.callbacksIn,a=e.type,s=Xr(Xr({},o),{telemetryLogger:i});return a===t.RiskPurchaseType.CVV&&(s=Xr(Xr({},s),{submit:function(e){var t=null===e||void 0===e?void 0:e.data;n(t)}})),s},r.transformPidlString=function(e){return function(t,n){var r=n;return t?t.url?t.url.toLowerCase().includes("challenge/sms/validate")&&"string"===typeof n&&(r={value:n}):e.error(new Tt.unexpectedError(kt.inputParameterMissing,["request url"])):e.error(new Tt.unexpectedError(kt.inputParameterMissing,["request"])),r}},r.moveNextPage=function(){var e,t;null===(t=null===(e=r.HandleRiskChallengeInternalRef)||void 0===e?void 0:e.current)||void 0===t||t.moveNextPage()},r.movePrevPage=function(){var e,t;null===(t=null===(e=r.HandleRiskChallengeInternalRef)||void 0===e?void 0:e.current)||void 0===t||t.movePrevPage()},r.cancel=var i=r.props,a=i.elementFactory,s=i.partner,l=i.baseStyleOverrides,u=i.scenarioStyleOverrides,d=i.baseFocusStyleOverrides,c=i.scenarioFocusStyleOverrides,p=(null===a||void 0===a?void 0:a.initializeStyles)&&a.initializeStyles(t.AppScenario.RiskChallenge,s,l,u,d,c);return r.state={styleProvider:p},r}return Zr(n,e),n.prototype.render=function(){var e=this,t=this.state.styleProvider,n=this.props,r=n.authToken,i=n.busyBlockElement,a=n.env,s=n.elementFactory,l=n.pidlsdkMock,u=n.propertyElementRef,d=n.onPageRendered,c=n.telemetryOptions,p=n.headers,m=this.compileDisplayOptions(),f=this.compileParameters(),h=this.compileReturnOptions(),y=this.compileCallbacksIn();return o.createElement(Qi.Provider,{value:{styleProvider:t}},o.createElement(Ji.Consumer,null,(function(t){return o.createElement(Oa,{busyBlockElement:i,displayOptions:m,parameters:f,env:a,returnOptions:h,userContext:{authToken:r,userId:ui.UserId,additionalHeaders:p},onEvent:e.onEvent,elementFactory:s,pidlsdkMock:l,callbacksIn:y,telemetryOptions:c,propertyElementRef:u,onPageRendered:d,transformersIn:{submissionSuccessTransformer:e.transformPidlString(t)},ref:e.HandleRiskChallengeInternalRef})})))},n}(o.Component),Fa=function(e){function t(t){var n=e.call(this,t,(function(e){return e.listAddress(n.props.pidlDocInfo,n.props.options,n.props.actionContext,n.props.selectedResourceInfo)}))||this;return n}return Zr(t,e),t}(pa),Ha=function(e){function n(n){var r=e.call(this,n)||this;r.compileParameters=function(e,t,n,r,i,o,a){var s={operation:o,scenario:e,type:a||hi.DefaultAddressType,country:t,language:n,partner:r};return i&&(s=Xr(Xr({},s),i)),s},r.FailureHandler=function(e){r.props.onFailure(e.error)},r.compileReturnOptions=function(e,t,n){return{callbacks:{success:e,failure:r.FailureHandler,gohome:n}}};var i=r.props,o=i.elementFactory,a=i.partner,s=i.baseStyleOverrides,l=i.scenarioStyleOverrides,u=i.baseFocusStyleOverrides,d=i.scenarioFocusStyleOverrides,c=(null===o||void 0===o?void 0:o.initializeStyles)&&o.initializeStyles(t.AppScenario.ListAddress,a,s,l,u,d);return r.state={styleProvider:c},r}return Zr(n,e),n.prototype.render=function(){var e=this.props,t=e.authToken,n=e.env,r=e.parameters,i=e.busyBlockElement,a=e.country,s=e.language,l=e.partner,u=e.scenario,d=e.elementFactory,c=e.onSuccess,p=e.onFailure,m=e.onCancel,f=e.showSubmitBlock,h=void 0===f||f,y=e.busyBlockShowHideHandler,g=e.pidlsdkMock,v=e.telemetryLogger,P=e.telemetryOptions,b=e.addressType,I=e.propertyElementRef,E=e.onPageRendered,S=e.onEvent,D=e.callbacksIn,C=e.headers,T=this.state.styleProvider,k=this.compileParameters(u,a,s,l,r,hi.Operation,b),x=this.compileReturnOptions(c,p,m);return o.createElement(Qi.Provider,{value:{styleProvider:T}},o.createElement(Fa,{busyBlockElement:i,displayOptions:{containerId:hi.ContainerId,busyBlockShowHideHandler:y,showSubmitBlock:h},pidlDocInfo:{resourceType:hi.ResourceType,parameters:k},env:n,returnOptions:x,onEvent:S,userContext:{authToken:t,userId:hi.UserId,additionalHeaders:C},elementFactory:d,pidlsdkMock:g,callbacksIn:Xr(Xr({},D),{telemetryLogger:v}),telemetryOptions:P,propertyElementRef:I,onPageRendered:E}))},n}(o.Component),Na=function(e){function t(t){var n=e.call(this,t,(function(e){return e.selectSingleInstance(n.props.pidlDocInfo,n.props.options,n.props.actionContext,n.props.selectedResourceInfo)}))||this;return n}return Zr(t,e),t}(pa),Ma=function(e){function n(n){var r=e.call(this,n)||this;r.compileParameters=function(){var e=r.props,t=e.country,n=e.language,i=e.partner,o=e.parameters,a={operation:Ii.Operation,country:t,language:n,partner:i,filters:{id:r.props.paymentInstrument.id}};return o&&(a=Xr(Xr({},a),o)),a},r.compileReturnOptions=function(){var e=r.props,t=e.onCancel;return{callbacks:{failure:e.onFailure,gohome:t}}},r.eventHandler=function(e,t){var n=r.props,i=n.onChange,o=n.onEvent,a=n.paymentInstrument;e===M.click&&(null===t||void 0===t?void 0:t.id)===Ii.ChangeButtonId&&i&&i(a.id),o&&o(e,t)};var i=r.props,o=i.elementFactory,a=i.partner,s=i.baseStyleOverrides,l=i.scenarioStyleOverrides,u=i.baseFocusStyleOverrides,d=i.scenarioFocusStyleOverrides,c=i.baseDisabledStyleOverrides,p=i.scenarioDisabledStyleOverrides,m=(null===o||void 0===o?void 0:o.initializeStyles)&&o.initializeStyles(t.AppScenario.PaymentInstrumentDetails,a,s,l,u,d,null,c,p);return r.state={styleProvider:m},r}return Zr(n,e),n.prototype.render=function(){var e=this.props,t=e.authToken,n=e.env,r=e.busyBlockElement,i=e.elementFactory,a=e.showSubmitBlock,s=void 0===a||a,l=e.busyBlockShowHideHandler,u=e.pidlsdkMock,d=e.telemetryLogger,c=e.telemetryOptions,p=e.propertyElementRef,m=e.onPageRendered,f=e.callbacksIn,h=e.headers,y=this.state.styleProvider,g=this.compileParameters(),v=this.compileReturnOptions();return o.createElement(Qi.Provider,{value:{styleProvider:y}},o.createElement(Na,{busyBlockElement:r,displayOptions:{containerId:Ii.ContainerId,busyBlockShowHideHandler:l,showSubmitBlock:s},pidlDocInfo:{resourceType:Ii.ResourceType,parameters:g},env:n,returnOptions:v,onEvent:this.eventHandler,userContext:{authToken:t,userId:Ii.UserId,additionalHeaders:h},elementFactory:i,pidlsdkMock:u,callbacksIn:Xr(Xr({},f),{telemetryLogger:d}),telemetryOptions:c,propertyElementRef:p,onPageRendered:m}))},n}(o.Component),Ba=function(e){function t(t){var n=e.call(this,t,(function(e){return e.updateProfile(n.props.resourceInfo,n.props.resource,n.props.pidlDocInfo,n.props.options||{})}))||this;return n}return Zr(t,e),t}(pa),Va=function(e){function n(n){var r=e.call(this,n)||this;r.compilePidlDocParameters=function(e,t,n,r){var i={operation:bi.Operation,country:e,language:t,partner:n,type:"consumer"};return r&&(i=Xr(Xr({},i),r)),i},r.compileResourceParameters=function(e,t,n,r){return{country:e,language:t,partner:n,type:"consumer"}},r.FailureHandler=function(e){r.props.onFailure(e.error)},r.compileReturnOptions=function(e,t,n){return{callbacks:{failure:r.FailureHandler,success:e,gohome:n}}},r.onEvent=function(e,t){var n=r.props,i=n.onEvent,o=n.viewTermsHandler,a=We,s=a.eventNames,l=a.CustomTriggerEventConstants;(e===s.triggerEvent&&o&&t.eventName===l.viewTermsTriggered||e===s.navigate&&o&&t.displayId===yi.ViewTermsId)&&o(t),i&&i(e,t)};var i=r.props,o=i.elementFactory,a=i.partner,s=i.baseStyleOverrides,l=i.scenarioStyleOverrides,u=i.baseFocusStyleOverrides,d=i.scenarioFocusStyleOverrides,c=(null===o||void 0===o?void 0:o.initializeStyles)&&o.initializeStyles(t.AppScenario.ProfilePrerequisite,a,s,l,u,d);return r.state={styleProvider:c},r}return Zr(n,e),n.prototype.render=function(){var e=this.props,t=e.authToken,n=e.env,r=e.parameters,i=e.busyBlockElement,a=e.country,s=e.language,l=e.partner,u=e.elementFactory,d=e.onSuccess,c=e.onFailure,p=e.onCancel,m=e.showSubmitBlock,f=void 0===m||m,h=e.busyBlockShowHideHandler,y=e.pidlsdkMock,g=e.telemetryLogger,v=e.propertyElementRef,P=e.profileId,b=e.onPageRendered,I=e.callbacksIn,E=e.headers,S=this.state.styleProvider,D=this.compilePidlDocParameters(a,s,l,r),C=this.compileResourceParameters(a,s,l,r),T=this.compileReturnOptions(d,c,p);return o.createElement(Qi.Provider,{value:{styleProvider:S}},o.createElement(Ba,{busyBlockElement:i,displayOptions:{containerId:bi.ContainerId,busyBlockShowHideHandler:h,showSubmitBlock:f},pidlDocInfo:{resourceType:bi.ResourceType,parameters:D},resourceInfo:{resourceType:bi.ResourceType,parameters:C,id:P},env:n,returnOptions:T,onEvent:this.onEvent,userContext:{authToken:t,userId:bi.UserId,additionalHeaders:E},elementFactory:u,pidlsdkMock:y,callbacksIn:Xr(Xr({},I),{telemetryLogger:g}),propertyElementRef:v,onPageRendered:b}))},n}(o.Component),Ua=function(e){function t(t){var n=e.call(this,t,()||this;return n}return Zr(t,e),t}(pa),La=function(e){function t(t){var n=e.call(this,t,(function(e){return e.searchResource({pidlDocInfo:n.props.pidlDocInfo,options:n.props.options})}))||this;return n}return Zr(t,e),t}(pa),ja=function(e){function t(t){var n=e.call(this,t,(function(e){return e.selectPaymentInstrument(n.props.pidlDocInfo,n.props.options,n.props.actionContext,n.props.selectedResourceInfo)}))||this;return n}return Zr(t,e),t}(pa),Wa=function(e){function n(n){var r=e.call(this,n)||this;r.baseComponentRef=o.createRef(),r.compileParameters=function(){var e=r.props,t=e.country,n=e.language,i=e.partner,o=e.allowedPaymentMethods,a=e.defaultPaymentMethod,s=e.parameters,l=e.sessionId,u=e.orderId,d=e.merchantId,c=e.currency,p=e.filters,m=e.classicProduct,f=e.billableAccountId,h={allowedPaymentMethods:(null===o||void 0===o?void 0:o.length)?o:mi.AllowedPaymentMethods,operation:mi.Operation,country:t,language:n,partner:i};return l&&(h.sessionId=l),u&&(h.orderId=u),d&&(h.merchantId=d),c&&(h.currency=c),p&&(h.filters=p),m&&(h.classicProduct=m),f&&(h.billableAccountId=f),a&&(h.defaultPaymentMethod=a),s&&(h=Xr(Xr({},h),s)),h},r.failureHandler=function(e){r.props.onFailure(e.error)},r.compileReturnOptions=function(){var e=r.props,t=e.onCancel,n=e.onSuccess;return{callbacks:{failure:r.failureHandler,success:n,gohome:t}}},r.isCreditCard=function(e){if(null===window||void 0===window?void 0:window.pidlResourceHelpers)return Gt.getFunctionExecutionResult({functionName:pi.isCreditCard},{contextData:e})},r.isCreditCardExpired=function(e){if(null===window||void 0===window?void 0:window.pidlResourceHelpers)return Gt.getFunctionExecutionResult({functionName:pi.isCreditCardExpired},{contextData:e})},r.onEventInternal=function(e,t){var n=r.props,i=n.onEvent,o=n.paymentInstrumentSelectedHandler,a=n.userPiAvailableCheckHandler;return e==M.pageRefreshed&&t&&"noPaymentInstrumentSelectPage"==(null===t||void 0===t?void 0:t.pageId)&&(r.setState({userPiExists:!1}),a&&a(r.state.userPiExists)),o&&e===M.resourceSelected?o(r.getSelectedResource()):i?i(e,t):void 0},r.getRef=function(){return r.baseComponentRef},r.getSelectedResource=function(){var e,t,n,i,o,a,s,l,u,d,c,p=(null===(n=null===(t=null===(e=r.baseComponentRef)||void 0===e?void 0:e.current)||void 0===t?void 0:t.getSelectedResource())||void 0===n?void 0:n.instance)||{};return{id:p.id,paymentMethodFamily:null===(i=p.paymentMethod)||void 0===i?void 0:i.paymentMethodFamily,paymentMethodType:null===(o=p.paymentMethod)||void 0===o?void 0:o.paymentMethodType,displayName:null===(s=null===(a=p.paymentMethod)||void 0===a?void 0:a.display)||void 0===s?void 0:s.name,email:null===(l=p.details)||void 0===l?void 0:l.email,lastFourDigits:null===(u=p.details)||void 0===u?void 0:u.lastFourDigits,isExpired:r.isCreditCard(p)?r.isCreditCardExpired(p):void 0,soldToAddressRequired:null===(c=null===(d=p.paymentMethod)||void 0===d?void 0:d.properties)||void 0===c?void 0:c.soldToAddressRequired}};var i=r.props,a=i.elementFactory,s=i.partner,l=i.baseStyleOverrides,u=i.scenarioStyleOverrides,d=i.baseFocusStyleOverrides,c=i.scenarioFocusStyleOverrides,p=i.baseDisabledStyleOverrides,m=i.scenarioDisabledStyleOverrides,f=(null===a||void 0===a?void 0:a.initializeStyles)&&a.initializeStyles(t.AppScenario.SelectPaymentInstrument,s,l,u,d,c,p,m);return r.state={styleProvider:f,userPiExists:!0},r}return Zr(n,e),n.prototype.render=function(){var e=this.props,t=e.authToken,n=e.env,r=e.busyBlockElement,i=e.elementFactory,a=e.showSubmitBlock,s=void 0===a||a,l=e.busyBlockShowHideHandler,u=e.pidlsdkMock,d=e.telemetryLogger,c=e.telemetryOptions,p=e.propertyElementRef,m=(e.onEvent,e.onPageRendered),f=e.headers,h=e.callbacksIn,y=this.state.styleProvider,g=this.compileParameters(),v=this.compileReturnOptions();return o.createElement(Qi.Provider,{value:{styleProvider:y}},o.createElement(ja,{busyBlockElement:r,displayOptions:{containerId:mi.ContainerId,busyBlockShowHideHandler:l,showSubmitBlock:s},pidlDocInfo:{resourceType:mi.ResourceType,parameters:g},env:n,returnOptions:v,onEvent:this.onEventInternal,userContext:{authToken:t,userId:mi.UserId,additionalHeaders:f},elementFactory:i,pidlsdkMock:u,callbacksIn:Xr(Xr({},h),{telemetryLogger:d}),telemetryOptions:c,propertyElementRef:p,onPageRendered:m,ref:this.baseComponentRef}))},n}(o.Component),za=function(e){function t(t){var n=e.call(this,t,()||this;return n}return Zr(t,e),t}(pa),Ga=function(e){function n(n){var r=e.call(this,n)||this;r.baseComponentRef=o.createRef(),r.compileParameters=function(){var e=r.props,t=e.country,n=e.language,i=e.partner,o=e.parameters,a=e.defaultPaymentMethod,s=e.allowedPaymentMethods,l=e.filters,u=e.sessionId,d=e.orderId,c=e.merchantId,p=e.currency,m=e.pmGroupPageId,f={allowedPaymentMethods:(null===s||void 0===s?void 0:s.length)?s:si.AllowedPaymentMethods,operation:si.Operation,country:t,language:n,partner:i};return a&&(f.defaultPaymentMethod=a),u&&(f.sessionId=u),d&&(f.orderId=d),c&&(f.merchantId=c),p&&(f.currency=p),l&&(f.filters=l),m&&(f.pmGroupPageId=m),o&&(f=Xr(Xr({},f),o)),f},r.FailureHandler=r.compileReturnOptions=function(e,t,n){return{callbacks:{failure:r.FailureHandler,success:e,gohome:n}}},r.getRef=function(){return r.baseComponentRef};var i=r.props,a=i.elementFactory,s=i.partner,l=i.baseStyleOverrides,u=i.scenarioStyleOverrides,d=i.baseFocusStyleOverrides,c=i.scenarioFocusStyleOverrides,p=(null===a||void 0===a?void 0:a.initializeStyles)&&a.initializeStyles(t.AppScenario.SelectPaymentMethod,s,l,u,d,c);return r.state={styleProvider:p},r}return Zr(n,e),n.prototype.render=function(){var e=this.props,t=e.authToken,n=e.env,r=e.busyBlockElement,i=e.elementFactory,a=e.onSuccess,s=e.onFailure,l=e.onCancel,u=e.showSubmitBlock,d=void 0===u||u,c=e.busyBlockShowHideHandler,p=e.pidlsdkMock,m=e.callbacksIn,f=e.propertyElementRef,h=e.onEvent,y=e.onPageRendered,g=e.telemetryLogger,v=e.headers,P=this.state.styleProvider,b=this.compileParameters(),I=this.compileReturnOptions(a,s,l);return o.createElement(Qi.Provider,{value:{styleProvider:P}},o.createElement(za,{busyBlockElement:r,displayOptions:{containerId:si.ContainerId,busyBlockShowHideHandler:c,showSubmitBlock:d,disableFocusOnLoad:this.props.disableFocusOnLoad},pidlDocInfo:{resourceType:si.ResourceType,parameters:b},env:n,returnOptions:I,onEvent:h,userContext:{authToken:t,userId:si.UserId,additionalHeaders:v},elementFactory:i,pidlsdkMock:p,callbacksIn:Xr(Xr({},m),{telemetryLogger:g}),propertyElementRef:f,onPageRendered:y,ref:this.baseComponentRef}))},n}(o.Component),qa=function(e){function t(t){var n=e.call(this,t,(function(e){return e.selectInstance(n.props.pidlDocInfo,n.props.options,n.props.actionContext,n.props.selectedResourceInfo)}))||this;return n}return Zr(t,e),t}(pa),Ka=function(e){function t(t){var n=e.call(this,t,(function(e){return e.selectResourceType(n.props.pidlDocInfo,n.props.options)}))||this;return n}return Zr(t,e),t}(pa),Ja=function(e){function t(t){var n=e.call(this,t,(function(e){return e.selectSingleInstance(n.props.pidlDocInfo,n.props.options,n.props.actionContext,n.props.selectedResourceInfo)}))||this;return n}return Zr(t,e),t}(pa),Qa=function(e){function t(t){var n=e.call(this,t,(function(e){return e.showResource({pidlDocInfo:n.props.pidlDocInfo,prefillData:n.props.prefillData,options:n.props.options})}))||this;return n}return Zr(t,e),t}(pa),Za=function(e){function t(t){var n=e.call(this,t,(function(e){return e.testHookRenderPidlPage(n.props.pidlDocument,n.props.operation,n.props.pageIndex||0,n.props.prefillData)}))||this;return n}return Zr(t,e),t}(pa),Xa=function(e){function t(t){var n=e.call(this,t,(function(e){return e.updateResource(n.props.resourceInfo,n.props.resource,n.props.pidlDocInfo,n.props.options||{})}))||this;return n}return Zr(t,e),t}(pa),$a=function(e){function t(t){var n=e.call(this,t,(function(e){return e.validateAddress(n.props.pidlDocInfo)}))||this;return n}return Zr(t,e),t}(pa);(Aa=t.ValidateAddressPages||(t.ValidateAddressPages={}))[Aa.validateAddressPage=0]="validateAddressPage",Aa[Aa.editAddressPage=1]="editAddressPage";var Ya,es=function(e){function n(n){var r=e.call(this,n)||this;return r.onValidateAddressEvent=function(e,n){var i=r.props,o=i.onEvent,a=i.currentPageChangeHandler;if(e==M.pageRefreshed){switch(n.pageId){case"addressSuggestionPage1":r.setState({currentPage:t.ValidateAddressPages.validateAddressPage});break;case"addressSuggestionPage2":r.setState({currentPage:t.ValidateAddressPages.editAddressPage})}a&&a(r.state.currentPage)}if(o)return o(e,n)},r.getCurrentPage=function(){return r.state.currentPage},r.state={currentPage:t.ValidateAddressPages.validateAddressPage},r}return Zr(n,e),n.prototype.compileParameters=function(e,t,n,r,i,o){var a=Xr({operation:ci.Operation,type:i},{country:e,language:t,partner:n,addressId:r});return o&&(a=Xr(Xr({},a),o)),a},n.prototype.compileReturnOptions=function(e,t,n){return{callbacks:{success:e,failure:t,gohome:n}}},n.prototype.render=function(){var e=this.props,t=e.userContext,n=e.env,r=e.parameters,i=e.country,a=e.language,s=e.partner,l=e.addressId,u=e.addressType,d=e.elementFactory,c=e.returnOptions,p=e.pidlSdkRef,m=e.showSubmitBlock,f=void 0===m||m,h=e.busyBlockShowHideHandler,y=(e.onEvent,e.callbacksIn),g=this.compileParameters(i,a,s,l,u,r);return o.createElement($a,{displayOptions:{containerId:ci.ContainerId,busyBlockShowHideHandler:h,showSubmitBlock:f},pidlDocInfo:{resourceType:ci.ResourceType,parameters:g},env:n,returnOptions:c,userContext:t,elementFactory:d,ref:p,onEvent:this.onValidateAddressEvent,callbacksIn:y})},n}(o.Component),ts=function(e){function t(t){var n=e.call(this,t,(function(e){return e.validateResource(n.props.pidlDocInfo)}))||this;return n}return Zr(t,e),t}(pa),ns=function(e){function t(t){var n=e.call(this,t,(function(e){return e.handleCheckout(n.props.checkoutParams)}))||this;return n}return Zr(t,e),t}(pa),rs=function(e){function t(t){var n=e.call(this,t,(function(e){return e.deleteResource({resourceInfo:n.props.resourceInfo,resource:n.props.resource,pidlDocInfo:n.props.pidlDocInfo,options:n.props.options||{}})}))||this;return n}return Zr(t,e),t}(pa),is=function(e){function n(n){var r=e.call(this,n)||this;r.compileParameters=function(e,t,n,r,i,o){return{id:o,resourceType:gi.ResourceType,resourceEndpoint:void 0,parameters:{market:e,language:t,partner:n,family:r,type:i}}},r.FailureHandler=function(e){r.props.onFailure(e.error)},r.compileReturnOptions=function(e,t){return{callbacks:{success:e,failure:r.FailureHandler,gohome:t}}};var i=r.props,o=i.elementFactory,a=i.partner,s=i.baseStyleOverrides,l=i.scenarioStyleOverrides,u=i.baseFocusStyleOverrides,d=i.scenarioFocusStyleOverrides,c=(null===o||void 0===o?void 0:o.initializeStyles)&&o.initializeStyles(t.AppScenario.DeletePaymentInstrument,a,s,l,u,d);return r.state={styleProvider:c},r}return Zr(n,e),n.prototype.render=function(){var e=this.props,t=e.authToken,n=e.paymentInstrumentId,r=e.paymentType,i=e.paymentFamily,a=e.env,s=e.busyBlockElement,l=e.country,u=e.language,d=e.partner,c=e.elementFactory,p=e.onSuccess,m=e.onCancel,f=e.showSubmitBlock,h=void 0===f||f,y=e.busyBlockShowHideHandler,g=e.telemetryLogger,v=e.headers,P=e.callbacksIn,b=this.state.styleProvider,I=this.compileParameters(l,u,d,i,r,n),E=this.compileReturnOptions(p,m);return o.createElement(Qi.Provider,{value:{styleProvider:b}},o.createElement(rs,{returnOptions:E,busyBlockElement:s,env:a,options:void 0,resourceInfo:I,elementFactory:c,callbacksIn:Xr(Xr({},P),{telemetryLogger:g}),userContext:{authToken:t,userId:gi.UserId,additionalHeaders:v},displayOptions:{containerId:gi.ContainerId,busyBlockShowHideHandler:y,showSubmitBlock:h}}))},n}(o.Component),os=function(e){function t(t){var n=e.call(this,t,(function(e){return e.handlePaymentChallenge(n.props.paymentSessionOrData)}))||this;return n}return Zr(t,e),t}(pa),as=function(e){function n(n){var r=e.call(this,n)||this;r.compileDisplayOptions=function(){var e=r.props,t=e.busyBlockShowHideHandler,n=e.showSubmitBlock;return{containerId:Ei.ContainerId,busyBlockShowHideHandler:t,showSubmitBlock:void 0===n||n}},r.successHandler=function(e){"Cancelled"===e.challengeStatus||"Unknown"===e.challengeStatus?r.props.onCancel(e):"TimedOut"===e.challengeStatus?r.props.onFailure(e):r.props.onSuccess(e)},r.failureHandler=function(e){var t=null===e||void 0===e?void 0:e.error;r.props.onFailure(null===t||void 0===t?void 0:t.innererror)},r.compileReturnOptions=function(){var e=r.props.onCancel;return{callbacks:{success:r.successHandler,failure:r.failureHandler,gohome:e}}},r.compileCallbacksIn=var i=r.props,o=i.elementFactory,a=i.partner,s=i.baseStyleOverrides,l=i.scenarioStyleOverrides,u=i.baseFocusStyleOverrides,d=i.scenarioFocusStyleOverrides,c=(null===o||void 0===o?void 0:o.initializeStyles)&&o.initializeStyles(t.AppScenario.HandlePaymentChallenge,a,s,l,u,d);return r.state={styleProvider:c},r}return Zr(n,e),n.prototype.render=function(){var e=this.state.styleProvider,t=this.props,n=t.authToken,r=t.busyBlockElement,i=t.env,a=t.elementFactory,s=t.headers,l=t.paymentSessionOrData,u=t.pidlsdkMock,d=t.propertyElementRef,c=t.onEvent,p=t.onPageRendered,m=t.telemetryOptions,f=this.compileDisplayOptions(),h=this.compileReturnOptions(),y=this.compileCallbacksIn();return o.createElement(Qi.Provider,{value:{styleProvider:e}},o.createElement(os,{busyBlockElement:r,displayOptions:f,env:i,returnOptions:h,userContext:{authToken:n,userId:Ei.UserId,additionalHeaders:s},paymentSessionOrData:l,onEvent:c,elementFactory:a,pidlsdkMock:u,callbacksIn:y,telemetryOptions:m,propertyElementRef:d,onPageRendered:p}))},n}(o.Component);!function(e){e[e.SelectPaymentInstrument=0]="SelectPaymentInstrument",e[e.SelectPaymentMethod=1]="SelectPaymentMethod",e[e.AddPaymentInstrument=2]="AddPaymentInstrument",e[e.EditPaymentInstrument=3]="EditPaymentInstrument"}(t.AllowedViews||(t.AllowedViews={})),(Ya=t.ManagePaymentInstrumentMode||(t.ManagePaymentInstrumentMode={}))[Ya.Select=0]="Select";var ss,ls,us=function(e){function n(n){var r=e.call(this,n)||this;return r.SelectPaymentInstrumentRef=o.createRef(),r.SelectPaymentMethodRef=o.createRef(),r.AddPaymentInstrumentRef=o.createRef(),r.EditPaymentInstrumentRef=o.createRef(),r.isCreditCardExpired=function(e){if(null===window||void 0===window?void 0:window.pidlResourceHelpers)return Gt.getFunctionExecutionResult({functionName:pi.isCreditCardExpired},{contextData:e})},r.isGiftCard=function(e){if(null===window||void 0===window?void 0:window.pidlResourceHelpers)return Gt.getFunctionExecutionResult({functionName:pi.isEwalletStoredValue},{contextData:e})},r.onSelectPIEvent=function(e,n){var i,o,a=r.props,s=a.onEvent,l=a.paymentInstrumentSelectedHandler;return l&&e===M.resourceSelected&&r.state.currentView===t.AllowedViews.SelectPaymentInstrument?l(null===(o=null===(i=r.SelectPaymentInstrumentRef)||void 0===i?void 0:i.current)||void 0===o?void 0:o.getSelectedResource()):s?s(e,n):void 0},r.onSelectPISuccess=function(e){var n,i,o;if(e.resourceActionContext)switch(e.resourceActionContext.action){case"selectResourceType":r.setState({currentView:t.AllowedViews.SelectPaymentMethod});break;case"addResource":r.setState({paymentFamily:e.paymentMethodFamily,paymentType:e.paymentMethodType,currentView:t.AllowedViews.AddPaymentInstrument});break;case"editPaymentInstrument":r.setState({paymentFamily:e.resourceActionContext.resource.paymentMethod.paymentMethodFamily,paymentType:e.resourceActionContext.resource.paymentMethod.paymentMethodType,paymentInstrumentId:e.resourceActionContext.resource.id,currentView:t.AllowedViews.EditPaymentInstrument})}else{var a=e.instance,s=r.props,l=s.onSuccess,u=s.onFailure,d=s.redeemGiftCardHandler,c=fi.RedeemGiftCardLink,p=fi.ManagePaymentInstrument,m=fi.redeemGiftCardHandlerName;if("string"===typeof a){if(a===fi.NewPaymentMethodLink&&r.setState({currentView:t.AllowedViews.SelectPaymentMethod}),a===c)if(d)d();else{var f=null===(i=null===(n=r.SelectPaymentInstrumentRef)||void 0===n?void 0:n.current)||void 0===i?void 0:i.getRef();null===(o=null===f||void 0===f?void 0:f.current)||void 0===o||o.implementationMissing(p,m),u({name:L.missingImplementationError,message:"Implentation of ".concat(null!==m&&void 0!==m?m:"undefined"," missing in ").concat(p),code:"",type:L.missingImplementationError,debugMessage:""})}}else r.isCreditCardExpired(a)?r.setState({currentView:t.AllowedViews.EditPaymentInstrument,paymentFamily:a.paymentMethod.paymentMethodFamily,paymentType:a.paymentMethod.paymentMethodType,paymentInstrumentId:a.id}):l(a)}},r.onSelectPaymentMethodSuccess=function(e){r.isGiftCard({paymentMethod:{paymentMethodFamily:e.paymentMethodFamily,paymentMethodType:e.paymentMethodType}})?r.onSelectPISuccess({operationType:tt.select,instance:fi.RedeemGiftCardLink}):"windowssettings"===qt.toLowerCase(r.props.partner)&&"credit_card"!==qt.toLowerCase(e.paymentMethodFamily)?(0,r.props.onSuccess)(e):r.setState({paymentFamily:e.paymentMethodFamily,paymentType:e.paymentMethodType,currentView:t.AllowedViews.AddPaymentInstrument})},r.onAddPISuccess=function(e){try{var n=e.response;(0,r.props.onSuccess)(n)}catch(i){r.setState({currentView:t.AllowedViews.SelectPaymentInstrument})}},r.onEditPISuccess=r.cancelSelectPM=function(){r.pmGroupPageId=void 0,r.setState({currentView:t.AllowedViews.SelectPaymentInstrument,pmGroupPageId:r.pmGroupPageId})},r.cancelAddPI=function(){r.pmGroupPageId=r.state.paymentFamily,r.setState({currentView:t.AllowedViews.SelectPaymentMethod,pmGroupPageId:r.pmGroupPageId})},r.cancelEditPI=r.moveNextPage=function(){var e,n,i,o,a,s,l,u,d,c,p,m;switch(r.state.currentView){case t.AllowedViews.SelectPaymentInstrument:null===(i=null===(n=null===(e=r.SelectPaymentInstrumentRef)||void 0===e?void 0:e.current)||void 0===n?void 0:n.getRef().current)||void 0===i||i.moveNextPage();break;case t.AllowedViews.SelectPaymentMethod:null===(s=null===(a=null===(o=r.SelectPaymentMethodRef)||void 0===o?void 0:o.current)||void 0===a?void 0:a.getRef().current)||void 0===s||s.moveNextPage();break;case t.AllowedViews.AddPaymentInstrument:null===(d=null===(u=null===(l=r.AddPaymentInstrumentRef)||void 0===l?void 0:l.current)||void 0===u?void 0:u.getRef().current)||void 0===d||d.moveNextPage();break;case t.AllowedViews.EditPaymentInstrument:null===(m=null===(p=null===(c=r.EditPaymentInstrumentRef)||void 0===c?void 0:c.current)||void 0===p?void 0:p.getRef().current)||void 0===m||m.moveNextPage()}},r.movePrevPage=function(){var e,n,i,o,a,s,l,u,d,c,p,m;switch(r.state.currentView){case t.AllowedViews.SelectPaymentInstrument:null===(i=null===(n=null===(e=r.SelectPaymentInstrumentRef)||void 0===e?void 0:e.current)||void 0===n?void 0:n.getRef().current)||void 0===i||i.movePrevPage();break;case t.AllowedViews.SelectPaymentMethod:null===(s=null===(a=null===(o=r.SelectPaymentMethodRef)||void 0===o?void 0:o.current)||void 0===a?void 0:a.getRef().current)||void 0===s||s.movePrevPage();break;case t.AllowedViews.AddPaymentInstrument:null===(d=null===(u=null===(l=r.AddPaymentInstrumentRef)||void 0===l?void 0:l.current)||void 0===u?void 0:u.getRef().current)||void 0===d||d.movePrevPage();break;case t.AllowedViews.EditPaymentInstrument:null===(m=null===(p=null===(c=r.EditPaymentInstrumentRef)||void 0===c?void 0:c.current)||void 0===p?void 0:p.getRef().current)||void 0===m||m.movePrevPage()}},r.cancel=function(){var e,n,i,o,a,s,l,u,d,c,p,m;switch(r.state.currentView){case t.AllowedViews.SelectPaymentInstrument:null===(i=null===(n=null===(e=r.SelectPaymentInstrumentRef)||void 0===e?void 0:e.current)||void 0===n?void 0:n.getRef().current)||void 0===i||i.cancel();break;case t.AllowedViews.SelectPaymentMethod:null===(s=null===(a=null===(o=r.SelectPaymentMethodRef)||void 0===o?void 0:o.current)||void 0===a?void 0:a.getRef().current)||void 0===s||s.cancel();break;case t.AllowedViews.AddPaymentInstrument:null===(d=null===(u=null===(l=r.AddPaymentInstrumentRef)||void 0===l?void 0:l.current)||void 0===u?void 0:u.getRef().current)||void 0===d||d.cancel();break;case t.AllowedViews.EditPaymentInstrument:null===(m=null===(p=null===(c=r.EditPaymentInstrumentRef)||void 0===c?void 0:c.current)||void 0===p?void 0:p.getRef().current)||void 0===m||m.cancel()}},r.cancelSelectPaymentInstrument=function(){var e,n,i;r.state.currentView===t.AllowedViews.SelectPaymentInstrument&&(null===(i=null===(n=null===(e=r.SelectPaymentInstrumentRef)||void 0===e?void 0:e.current)||void 0===n?void 0:n.getRef().current)||void 0===i||i.cancel())},r.cancelOrMovePrevSelectPaymentMethod=function(){var e,n,i;r.state.currentView===t.AllowedViews.SelectPaymentMethod&&(null===(i=null===(n=null===(e=r.SelectPaymentMethodRef)||void 0===e?void 0:e.current)||void 0===n?void 0:n.getRef().current)||void 0===i||i.movePrevPage())},r.cancelAddPaymentInstrument=function(){var e,n,i;r.state.currentView===t.AllowedViews.AddPaymentInstrument&&(null===(i=null===(n=null===(e=r.AddPaymentInstrumentRef)||void 0===e?void 0:e.current)||void 0===n?void 0:n.getRef().current)||void 0===i||i.cancel())},r.cancelEditPaymentInstrument=function(){var e,n,i;r.state.currentView===t.AllowedViews.EditPaymentInstrument&&(null===(i=null===(n=null===(e=r.EditPaymentInstrumentRef)||void 0===e?void 0:e.current)||void 0===n?void 0:n.getRef().current)||void 0===i||i.cancel())},r.submitAddPaymentInstrument=function(){var e,n,i;r.state.currentView===t.AllowedViews.AddPaymentInstrument&&(null===(i=null===(n=null===(e=r.AddPaymentInstrumentRef)||void 0===e?void 0:e.current)||void 0===n?void 0:n.getRef().current)||void 0===i||i.moveNextPage())},r.submitEditPaymentInstrument=function(){var e,n,i;r.state.currentView===t.AllowedViews.EditPaymentInstrument&&(null===(i=null===(n=null===(e=r.EditPaymentInstrumentRef)||void 0===e?void 0:e.current)||void 0===n?void 0:n.getRef().current)||void 0===i||i.moveNextPage())},r.getCurrentView=function(){return r.state.currentView},r.getSelectedResource=function(){var e,n;if(r.state.currentView===t.AllowedViews.SelectPaymentInstrument)return null===(n=null===(e=r.SelectPaymentInstrumentRef)||void 0===e?void 0:e.current)||void 0===n?void 0:n.getSelectedResource()},r.state={currentView:t.AllowedViews.SelectPaymentInstrument,paymentFamily:"",paymentType:"",paymentInstrumentId:"",allowedPaymentMethods:r.props.allowedPaymentMethods},r.pmGroupPageId=void 0,r}return Zr(n,e),n.prototype.componentDidMount=function(){this.props.currentViewChangeHandler&&this.props.currentViewChangeHandler(t.AllowedViews.SelectPaymentInstrument)},n.prototype.componentDidUpdate=function(e,t,n){this.props.currentViewChangeHandler&&this.state.currentView!==t.currentView&&this.props.currentViewChangeHandler(this.state.currentView)},n.prototype.render=function(){var e=this.props,n=e.authToken,r=e.env,i=e.parameters,a=e.busyBlockElement,s=e.baseStyleOverrides,l=e.scenarioStyleOverrides,u=e.baseFocusStyleOverrides,d=e.scenarioFocusStyleOverrides,c=e.telemetryLogger,p=e.telemetryOptions,m=e.country,f=e.language,h=e.partner,y=e.elementFactory,g=e.onFailure,v=e.onCancel,P=e.busyBlockShowHideHandler,b=e.pidlsdkMock,I=e.propertyElementRef,E=e.onPageRendered,S=e.onEvent,D=e.completePrerequisites,C=e.viewTermsHandler,T=e.defaultPaymentMethod,k=e.sessionId,x=e.orderId,w=e.merchantId,R=e.currency,A=e.filters,O=e.headers,_=e.showSubmitBlock,F=void 0===_||_,H=this.state,N=H.currentView,M=H.paymentFamily,B=H.paymentType,V=H.paymentInstrumentId,U=H.allowedPaymentMethods;return o.createElement(o.Fragment,null,N===t.AllowedViews.SelectPaymentInstrument&&o.createElement(Wa,{baseStyleOverrides:s,scenarioStyleOverrides:l,baseFocusStyleOverrides:u,scenarioFocusStyleOverrides:d,elementFactory:y,authToken:n,env:r,onSuccess:this.onSelectPISuccess,onFailure:g,onCancel:v,busyBlockShowHideHandler:P,busyBlockElement:a,country:m,language:f,partner:h,parameters:i,pidlsdkMock:b,telemetryLogger:c,telemetryOptions:p,propertyElementRef:I,onPageRendered:E,onEvent:this.onSelectPIEvent,allowedPaymentMethods:U,filters:A,sessionId:k,orderId:x,merchantId:w,currency:R,headers:O,showSubmitBlock:F,ref:this.SelectPaymentInstrumentRef}),N===t.AllowedViews.SelectPaymentMethod&&o.createElement(Ga,{baseStyleOverrides:s,scenarioStyleOverrides:l,baseFocusStyleOverrides:u,scenarioFocusStyleOverrides:d,elementFactory:y,authToken:n,env:r,onSuccess:this.onSelectPaymentMethodSuccess,onFailure:g,onCancel:this.cancelSelectPM,busyBlockShowHideHandler:P,busyBlockElement:a,country:m,language:f,partner:h,parameters:i,pidlsdkMock:b,telemetryLogger:c,telemetryOptions:p,propertyElementRef:I,onPageRendered:E,onEvent:S,defaultPaymentMethod:T,allowedPaymentMethods:U,filters:A,sessionId:k,orderId:x,merchantId:w,currency:R,headers:O,pmGroupPageId:this.pmGroupPageId,showSubmitBlock:F,ref:this.SelectPaymentMethodRef}),N===t.AllowedViews.AddPaymentInstrument&&o.createElement(ya,{baseStyleOverrides:s,scenarioStyleOverrides:l,baseFocusStyleOverrides:u,scenarioFocusStyleOverrides:d,elementFactory:y,authToken:n,env:r,onSuccess:this.onAddPISuccess,onFailure:g,onCancel:this.cancelAddPI,busyBlockShowHideHandler:P,busyBlockElement:a,country:m,language:f,partner:h,paymentFamily:M,paymentType:B,completePrerequisites:D,parameters:i,pidlsdkMock:b,telemetryLogger:c,telemetryOptions:p,propertyElementRef:I,onPageRendered:E,onEvent:S,viewTermsHandler:C,showSubmitBlock:F,headers:"windowssettings"===qt.toLowerCase(this.props.partner)?Xr(Xr({},O),{"x-ms-flight":"PXUsePartnerSettingsService"}):O,ref:this.AddPaymentInstrumentRef}),N===t.AllowedViews.EditPaymentInstrument&&o.createElement(ka,{baseStyleOverrides:s,scenarioStyleOverrides:l,baseFocusStyleOverrides:u,scenarioFocusStyleOverrides:d,elementFactory:y,authToken:n,env:r,onSuccess:this.onEditPISuccess,onFailure:g,onCancel:this.cancelEditPI,busyBlockShowHideHandler:P,busyBlockElement:a,country:m,language:f,partner:h,paymentInstrumentId:V,paymentFamily:M,paymentType:B,parameters:i,pidlsdkMock:b,telemetryLogger:c,telemetryOptions:p,propertyElementRef:I,onPageRendered:E,onEvent:S,viewTermsHandler:C,showSubmitBlock:F,headers:"windowssettings"===qt.toLowerCase(this.props.partner)?Xr(Xr({},O),{"x-ms-flight":"PXUsePartnerSettingsService"}):O,ref:this.EditPaymentInstrumentRef}))},n}(o.Component);!function(e){e[e.ListAddress=0]="ListAddress",e[e.AddNewAddress=1]="AddNewAddress",e[e.EditAddress=2]="EditAddress"}(ss||(ss={})),(ls=t.ManageAddressMode||(t.ManageAddressMode={}))[ls.Select=0]="Select",ls[ls.Edit=1]="Edit";var ds,cs=function(e){function n(n){var r=e.call(this,n)||this;return r.onSuccessWrapper=function(e){"newAddressLink"===e.id&&r.props.onAddNewAddress?r.props.onAddNewAddress(e):"newAddressLink"===e.id?r.setState({currentView:ss.AddNewAddress}):r.shouldOpenEditView(e)?r.setState({currentView:ss.EditAddress,addressId:e.instance.id}):r.props.onSuccess(e)},r.shouldOpenEditView=function(e){var n,i,o=r.props,a=o.mode,s=o.scenario;return a===t.ManageAddressMode.Edit||a===t.ManageAddressMode.Select&&!((null===(n=null===e||void 0===e?void 0:e.instance)||void 0===n?void 0:n.first_name)&&(null===(i=null===e||void 0===e?void 0:e.instance)||void 0===i?void 0:i.last_name))&&s===t.AddressScenario.shipping},r.returnToListView=r.state={currentView:ss.ListAddress},r}return Zr(n,e),n.prototype.componentDidUpdate=function(e){var t=this.props,n=t.mode,r=t.scenario,i=t.country,o=t.language,a=t.partner,s=t.addressType;e.mode===n&&e.scenario===r&&e.country===i&&e.language===o&&e.partner===a&&e.addressType===s||this.setState({currentView:ss.ListAddress})},n.prototype.render=function(){var e=this.props,t=e.baseStyleOverrides,n=e.scenarioStyleOverrides,r=e.baseFocusStyleOverrides,i=e.scenarioFocusStyleOverrides,a=e.telemetryLogger,s=e.telemetryOptions,l=e.authToken,u=e.env,d=e.addressType,c=e.showSubmitBlock,p=void 0===c||c,m=e.busyBlockElement,f=e.country,h=e.language,y=e.partner,g=e.scenario,v=e.elementFactory,P=e.onFailure,b=e.onCancel,I=e.busyBlockShowHideHandler,E=e.pidlsdkMock,S=e.propertyElementRef,D=e.onPageRendered,C=e.onEvent,T=e.viewTermsHandler,k=e.headers,x=this.state,w=x.addressId,R=x.currentView;return o.createElement(o.Fragment,null,R===ss.ListAddress&&o.createElement(Ha,{authToken:l,elementFactory:v,env:u,scenario:g,addressType:d,country:f,language:h,partner:y,onSuccess:this.onSuccessWrapper,onFailure:P,onCancel:b,baseStyleOverrides:t,scenarioStyleOverrides:n,baseFocusStyleOverrides:r,scenarioFocusStyleOverrides:i,busyBlockElement:m,busyBlockShowHideHandler:I,pidlsdkMock:E,telemetryLogger:a,telemetryOptions:s,propertyElementRef:S,onPageRendered:D,onEvent:C,headers:k,showSubmitBlock:p}),R===ss.AddNewAddress&&o.createElement(fa,{authToken:l,elementFactory:v,env:u,country:f,language:h,partner:y,scenario:g,addressType:d,onSuccess:this.returnToListView,onFailure:P,onCancel:this.returnToListView,baseStyleOverrides:t,scenarioStyleOverrides:n,baseFocusStyleOverrides:r,scenarioFocusStyleOverrides:i,busyBlockElement:m,busyBlockShowHideHandler:I,pidlsdkMock:E,telemetryLogger:a,telemetryOptions:s,propertyElementRef:S,onPageRendered:D,onEvent:C,viewTermsHandler:T,headers:k,showSubmitBlock:p}),R===ss.EditAddress&&o.createElement(Ca,{authToken:l,addressId:w,elementFactory:v,env:u,country:f,scenario:g,language:h,partner:y,onSuccess:this.returnToListView,onFailure:P,onCancel:this.returnToListView,baseStyleOverrides:t,scenarioStyleOverrides:n,baseFocusStyleOverrides:r,scenarioFocusStyleOverrides:i,busyBlockShowHideHandler:I,onPageRendered:D,onEvent:C,viewTermsHandler:T,telemetryLogger:a,telemetryOptions:s,headers:k,showSubmitBlock:p}))},n}(o.Component),ps=function(e){function t(t){var n=e.call(this,t,(function(e){return e.validateAddress(n.props.pidlDocInfo)}))||this;return n}return Zr(t,e),t}(pa);(ds=t.VerifyAddressPages||(t.VerifyAddressPages={}))[ds.verifyAddressPage=0]="verifyAddressPage",ds[ds.editAddressPage=1]="editAddressPage",ds[ds.noAddressSuggestionsPage=2]="noAddressSuggestionsPage";var ms=function(e){function n(n){var r=e.call(this,n)||this;r.VerifyAddressRef=o.createRef(),r.moveNextPage=function(){var e,t;null===(t=null===(e=r.VerifyAddressRef)||void 0===e?void 0:e.current)||void 0===t||t.moveNextPage()},r.movePrevPage=function(){var e,t;null===(t=null===(e=r.VerifyAddressRef)||void 0===e?void 0:e.current)||void 0===t||t.movePrevPage()},r.cancel=function(){var e,t;null===(t=null===(e=r.VerifyAddressRef)||void 0===e?void 0:e.current)||void 0===t||t.cancel()},r.submitPage=function(){var e,t;null===(t=null===(e=r.VerifyAddressRef)||void 0===e?void 0:e.current)||void 0===t||t.submitPage()},r.onVerifyAddressEvent=function(e,n){var i=r.props,o=i.onEvent,a=i.currentPageChangeHandler;if(e==M.pageRefreshed)switch(n.pageId){case"addressSuggestionPage1":a&&a(t.VerifyAddressPages.verifyAddressPage);break;case"addressSuggestionPage2":a&&a(t.VerifyAddressPages.editAddressPage);break;case"noAddressSuggestionsPage":a&&a(t.VerifyAddressPages.noAddressSuggestionsPage)}if(o)return o(e,n)};var i=r.props,a=i.elementFactory,s=i.partner,l=i.baseStyleOverrides,u=i.scenarioStyleOverrides,d=i.baseFocusStyleOverrides,c=i.scenarioFocusStyleOverrides,p=(null===a||void 0===a?void 0:a.initializeStyles)&&a.initializeStyles(t.AppScenario.VerifyAddress,s,l,u,d,c);return r.state={styleProvider:p},r}return Zr(n,e),n.prototype.compileParameters=function(e,t,n,r,i,o){var a=Xr({operation:ci.Operation,type:i},{country:e,language:t,partner:n,addressId:r});return o&&(a=Xr(Xr({},a),o)),a},n.prototype.compileReturnOptions=n.prototype.render=function(){var e=this.props,t=e.env,n=e.parameters,r=e.country,i=e.language,a=e.partner,s=e.addressId,l=e.addressType,u=e.elementFactory,d=e.busyBlockElement,c=e.showSubmitBlock,p=void 0===c||c,m=e.busyBlockShowHideHandler,f=(e.onEvent,e.callbacksIn,e.onSuccess),h=e.onFailure,y=e.onCancel,g=e.headers,v=e.telemetryLogger,P=e.propertyElementRef,b=e.onPageRendered,I=e.pidlsdkMock,E=e.authToken,S=this.state.styleProvider,D=this.compileParameters(r,i,a,s,l,n),C=this.compileReturnOptions(f,h,y);return o.createElement(Qi.Provider,{value:{styleProvider:S}},o.createElement(ps,{busyBlockElement:d,displayOptions:{containerId:ci.ContainerId,busyBlockShowHideHandler:m,showSubmitBlock:p},pidlDocInfo:{resourceType:ci.ResourceType,parameters:D},env:t,returnOptions:C,onEvent:this.onVerifyAddressEvent,userContext:{authToken:E,userId:ci.UserId,additionalHeaders:g},elementFactory:u,pidlsdkMock:I,callbacksIn:{telemetryLogger:v},propertyElementRef:P,onPageRendered:b,ref:this.VerifyAddressRef}))},n}(o.Component),fs=function(e){function t(t){var n=e.call(this,t,(function(e){return e.searchTransactions({pidlDocInfo:n.props.pidlDocInfo,options:n.props.options})}))||this;return n}return Zr(t,e),t}(pa);t.AddAddress=fa,t.AddAddressConstants=ai,t.AddPaymentInstrument=ya,t.AddPaymentInstrumentConstants=yi,t.AddPaymentInstrumentInternal=ha,t.AddResource=Pa,t.ApplyPaymentInstrument=va,t.ApplyPaymentInstrumentConstants=Pi,t.ApplyPaymentInstrumentInternal=ga,t.ApplyResource=ba,t.Audio=qo,t.AudioInner=Go,t.BodyBlock=function(e){var t=e.children;return i.createElement("div",{className:"pidlddc-div pidlddc-div-group pidlddc-pagecontent-block",id:"pidlddc-div-pagebodycontents"},t)},t.Button=to,t.ButtonInner=eo,t.ButtonList=oo,t.ButtonListElement=ro,t.ButtonListElementInner=no,t.ButtonListInner=io,t.Captcha=Eo,t.CaptchaInner=Io,t.CheckBox=so,t.CheckBoxInner=ao,t.ConfirmPayment=Ea,t.ConfirmPaymentConstants=di,t.ConfirmPaymentInternal=Ia,t.CreatePaymentSession=Sa,t.DefaultIFrameElement=xo,t.DeletePaymentInstrument=is,t.DeletePaymentInstrumentConstants=gi,t.DeleteResource=rs,t.Dropdown=go,t.EditAddress=Ca,t.EditAddressConstants=li,t.EditPaymentInstrument=ka,t.EditPaymentInstrumentConstants=vi,t.Error=$i,t.FilePicker=zo,t.FundStoredValue=xa,t.Group=Po,t.GroupError=vo,t.GroupLabel=Do,t.GroupLabelInner=So,t.HandleCheckout=ns,t.HandleIndia3DSChallenge=as,t.HandleIndia3DSChallengeConstants=Ei,t.HandleIndia3DSChallengeInternal=os,t.HandlePaymentChallenge=wa,t.HandlePurchaseRiskChallenge=Ra,t.HandleRiskChallenge=_a,t.HandleRiskChallengeConstants=ui,t.HandleRiskChallengeInternal=Oa,t.Heading=Mo,t.HeadingInner=No,t.HelpDialog=To,t.HelpDialogInner=Co,t.Hyperlink=ko,t.IFrameElement=Ro,t.IFrameElementInner=wo,t.Image=Ao,t.ListAddress=Ha,t.ListAddressConstants=hi,t.LogoElement=Oo,t.ManageAddress=cs,t.ManagePaymentInstrument=us,t.ManagePaymentInstrumentConstants=fi,t.Modal=yo,t.ModalInner=ho,t.PageAlert=Yi,t.PageErrorBlock=function(e){var t=e.children;return i.createElement("div",{className:"pidlddc-div pidlddc-div-group pidlddc-error-block",id:"pidlddc-div-pageerrorblock","aria-live":"polite"},t)},t.PaymentInstrumentDetails=Ma,t.PaymentInstrumentDetailsConstants=Ii,t.PaymentInstrumentDetailsInternal=Na,t.PidlComponent=ca,t.PidlDocBuilder=uo,t.PidlPropertyBuilder=po,t.PrefillCheckBox=fo,t.PrefillCheckBoxInner=mo,t.ProfilePrerequisite=Va,t.ProfilePrerequisiteConstants=bi,t.PropertyLabel=Fo,t.PropertyLabelInner=_o,t.Radio=Ho,t.ReplaceResource=Ua,t.ResourceHelpersConstants=pi,t.RiskChallengeConstants=Si,t.SearchResource=La,t.SearchTransactions=fs,t.SelectPaymentInstrument=Wa,t.SelectPaymentInstrumentConstants=mi,t.SelectPaymentMethod=Ga,t.SelectPaymentMethodConstants=si,t.SelectPaymentMethodInternal=za,t.SelectResource=qa,t.SelectResourceType=Ka,t.SelectSingleResource=Ja,t.ShowResource=Qa,t.StyleProviderContext=Qi,t.SubHeading=Vo,t.SubHeadingInner=Bo,t.TestHookRenderPidl=Za,t.Text=Lo,t.TextBox=Wo,t.TextGroup=bo,t.TextInner=Uo,t.UpdateResource=Xa,t.ValidateAddress=es,t.ValidateAddressConstants=ci,t.ValidateResource=ts,t.VerifyAddress=ms,t.defaultEnvironment=oi,t.getClassNamesFromStyleHints=function(e){var t=[];if(e)for(var n=0,r=e;n<r.length;n++){var i=r[n];t.push(D.taggedClass+i)}return t},t.getPidlReactCustomProps=Xi,t.getTagClassNames=Zi,t.pidl=Jr,t.pidlReactClassPrefix=ti,t.startsWith=ni}).call(this,n(220))},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return g})),n.d(t,"f",(function(){return I})),n.d(t,"g",(function(){return E})),n.d(t,"h",(function(){return P})),n.d(t,"i",(function(){return S})),n.d(t,"j",(function(){return D})),n.d(t,"k",(function(){return v})),n.d(t,"l",(function(){return C})),n.d(t,"m",(function(){return T})),n.d(t,"n",(function(){return k})),n.d(t,"o",(function(){return y})),n.d(t,"p",(function(){return b})),n.d(t,"q",(function(){return l})),n.d(t,"r",(function(){return s})),n.d(t,"s",(function(){return a})),n.d(t,"t",(function(){return x})),n.d(t,"u",(function(){return u})),n.d(t,"v",(function(){return i}));var r=n(23),i=["top","right","bottom","left"],o=["start","end"],a=i.reduce((,[]),s=Math.min,l=Math.max,u=Math.round,d=Math.floor,c=p={left:"right",right:"left",bottom:"top",top:"bottom"},m={start:"end",end:"start"};nction y(e){return e.split("-")[0]}unction v(e){return"x"===e?"y":"x"}ion D(e){return e.replace(/start|end/g,(function(e){return m[e]}))}nction k(e){return"number"!==typeof e?function(e){return Object(r.a)({top:0,right:0,bottom:0,left:0},e)}(e):{top:e,right:e,bottom:e,left:e}},415:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(680),i=n(298),o=/[xy]/g,a=null;t.EventNameAndTypeRegex=/^[a-zA-Z]([a-zA-Z0-9]|_){2,98}[a-zA-Z0-9]$/,t.EventNameDotRegex=/\./g,t.PropertyNameRegex=/^[a-zA-Z](([a-zA-Z0-9|_|\.]){0,98}[a-zA-Z0-9])?$/,t.StatsApiKey="a387cfcf60114a43a7699f9fbb49289e-9bceb9fe-1c06-460f-96c5-6a0b247358bc-7238";var s=a,l=a,u=a;function d(e){return"string"===typeof e}function c(e){return"number"===typeof e}ction h(){return!("undefined"===typeof navigator||!navigator.product)&&"ReactNative"===navigator.product}function y(){return"object"===typeof self&&"ServiceWorkerGlobalScope"===self.constructor.name}numberToBondInt64=t.newGuid=t.isString=d,t.isNumber=c,t.isBoolean=p,t.isDate=m,t.msToTicks=f,t.getTenantId=t.isBeaconsSupported=function(){return s===a&&(s="undefined"!==typeof navigator&&Boolean(navigator.sendBeacon)),s},t.isUint8ArrayAvailable=function(){return l===a&&(l="undefined"!==typeof Uint8Array&&!function(){if("undefined"!==typeof navigator&&navigator.userAgent){var e=navigator.userAgent.toLowerCase();if((e.indexOf("safari")>=0||e.indexOf("firefox")>=0)&&e.indexOf("chrome")<0)return!0}return!1}()&&!h()),l},t.isPriority=t.sanitizeProperty=function(e,n){return!t.PropertyNameRegex.test(e)||v(n)?a:(v(n.value)&&(n={value:n,type:i.AWTPropertyType.Unspecified}),n.type=function(e,t){switch(t=function(e){if(c(e)&&e>=0&&e<=4)return!0;return!1}(t)?t:i.AWTPropertyType.Unspecified){case i.AWTPropertyType.Unspecified:return e);case i.AWTPropertyType.String:return d(e)?t:a;case i.AWTPropertyType.Boolean:return p(e)?t:a;case i.AWTPropertyType.Date:return m(e)&&NaN!==e.getTime()?t:a;case i.AWTPropertyType.Int64:return c(e)&&e%1===0?t:a;case i.AWTPropertyType.Double:return c(e)?t:a}return a}(n.value,n.type),n.type?(m(n.value)&&(n.value=f(n.value.getTime())),n.pii>0&&n.cc>0?a:n.pii?function(e){if(c(e)&&e>=0&&e<=13)return!0;return!1}(n.pii)?n:a:n.cc?n.cc)?n:a:n):a)},t.getISOString=t.useXDomainRequest=function(){if(u===a){var e=new XMLHttpRequest;u="undefined"===typeof e.withCredentials&&"undefined"!==typeof XDomainRequest}return u},t.useFetchRequest=t.isReactNative=h,t.isServiceWorkerGlobalScope=y},421:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));n(9);var r=n(32),i=n.n(r),o=n(73),a=n(42),s=n(23),l=n(40),u=n(283);ction m(e){return e instanceof Node||e instanceof c(e).Node}function f(e){return e instanceof Element||e instanceof c(e).Element}ction v(e){return["table","td","th"].includes(d(e))} k(e){var t=E(e),n=parseFloat(t.width)||0,r=parseFloat(t.height)||0,i=h(e),o=i?e.offsetWidth:n,a=i?e.offsetHeight:r,s=Object(l.u)(n)!==o||Object(l.u)(r)!==a;return s&&(n=o,r=a),{width:n,height:r,$:s}}unction w(e){var t=x(e);if(!h(t))return Object(l.b)(1);var n=t.getBoundingClientRect(),r=k(t),i=r.width,o=r.height,a=r.$,s=(a?Object(l.u)(n.width):n.width)/i,u=(a?Object(l.u)(n.height):n.height)/o;return s&&Number.isFinite(s)||(s=1),u&&Number.isFinite(u)||(u=1),{x:s,y:u}}var R=Object(l.b)(0);unction O(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=e.getBoundingClientRect(),o=x(e),a=Object(l.b)(1);t&&(r?f(r)&&(a=w(r)):a=w(e));var s=o,n,r)?A(o):Object(l.b)(0),u=(i.left+s.x)/a.x,d=(i.top+s.y)/a.y,p=i.width/a.x,m=i.height/a.y;if(o)for(var h=c(o),y=r&&f(r)?c(r):r,g=h.frameElement;g&&r&&y!==h;){var v=w(g),P=g.getBoundingClientRect(),b=E(g),I=P.left+(g.clientLeft+parseFloat(b.paddingLeft))*v.x,S=P.top+(g.clientTop+parseFloat(b.paddingTop))*v.y;u*=v.x,d*=v.y,p*=v.x,m*=v.y,u+=I,d+=S,g=c(g).frameElement}return Object(l.t)({width:p,height:m,x:u,y:d})}unction F(e,t,n){var r;if("viewport"===t)r=e,n);else if("document"===t)r=function(e){var t=p(e),n=S(e),r=e.ownerDocument.body,i=Object(l.q)(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=Object(l.q)(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight),a=-n.scrollLeft+_(e),s=-n.scrollTop;return"rtl"===E(r).direction&&(a+=Object(l.q)(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:a,y:s}}(p(e));else if(f(t))r=function(e,t){var n=O(e,!0,"fixed"===t),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=h(e)?w(e):Object(l.b)(1);return{width:e.clientWidth*o.x,height:e.clientHeight*o.y,x:i*o.x,y:r*o.y}}(t,n);else{var i=A(e);r=Object(s.a)(Object(s.a)({},t),{},{x:t.x-i.x,y:t.y-i.y})}return Object(l.t)(r)}unction N(e,t,n){var r=h(t),i=p(t),o="fixed"===n,a=O(e,!0,o,t),s={scrollLeft:0,scrollTop:0},u=Object(l.b)(0);if(r||!r&&!o)if(("body"!==d(t)||g(i))&&(s=S(t)),r){var c=O(t,!0,o,t);u.x=c.x+t.clientLeft,u.y=c.y+t.clientTop}else i&&(u.x=_(i));return{x:a.left+s.scrollLeft-u.x,y:a.top+s.scrollTop-u.y,width:a.width,height:a.height}}r V={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){var t=e.rect,n=e.offsetParent,r=e.strategy,i=h(n),o=p(n);if(n===o)return t;var a={scrollLeft:0,scrollTop:0},s=Object(l.b)(1),u=Object(l.b)(0);if((i||!i&&"fixed"!==r)&&(("body"!==d(n)||g(o))&&(a=S(n)),h(n))){var c=O(n);s=w(n),u.x=c.x+n.clientLeft,u.y=c.y+n.clientTop}return{width:t.width*s.x,height:t.height*s.y,x:t.x*s.x-a.scrollLeft*s.x+u.x,y:t.y*s.y-a.scrollTop*s.y+u.y}},getDocumentElement:p,getClippingRect:function(e){var t=e.element,n=e.boundary,r=e.rootBoundary,i=e.strategy,o="clippingAncestors"===n?t,this._c):[].concat(n),s=[].concat(Object(a.a)(o),[r]),u=s[0],c=s.reduce((,F(t,u,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}},getOffsetParent:B,getElementRects:function(){var e=Object(o.a)(i.a.mark((function e(t){var n,r,o,a,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.reference,r=t.floating,o=t.strategy,a=this.getOffsetParent||B,l=this.getDimensions,e.t0=N,e.t1=n,e.next=7,a(r);case 7:return e.t2=e.sent,e.t3=o,e.t4=(0,e.t0)(e.t1,e.t2,e.t3),e.t5=s.a,e.t6={x:0,y:0},e.next=14,l(r);case 14:return e.t7=e.sent,e.t8=(0,e.t5)(e.t6,e.t7),e.abrupt("return",{reference:e.t4,floating:e.t8});case 17:case"end":return e.stop()}}),e,this)})));return (),getClientRects:getDimensions:function(e){return k(e)},getScale:w,isElement:f,isRTL:;var U=function(e,t,n){var r=new Map,i=Object(s.a)({platform:V},n),o=Object(s.a)(Object(s.a)({},i.platform),{},{_c:r});return Object(u.b)(e,t,Object(s.a)(Object(s.a)({},i),{},{platform:o}))}},438:469:493:589:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1137),i=n(298),o=n(1730),a=n(1139),s=n(679),l=n(1142),u=n(415),d="awt_stats",c=);t.default=c},678:679:680:795:851:922:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(923),i=n(298),o=n(678),a="UserInfo.IdType",s="DeviceInfo.BrowserName",l="DeviceInfo.BrowserVersion",u=function(){eturn e.prototype.setAppId=function(e){this._addContext("AppInfo.Id",e)},e.prototype.setAppVersion=function(e){this._addContext("AppInfo.Version",e)},e.prototype.setAppLanguage=function(e){this._addContext("AppInfo.Language",e)},e.prototype.setDeviceId=e.prototype.setDeviceOsName=function(e){this._allowDeviceFields&&this._addContext("DeviceInfo.OsName",e)},e.prototype.setDeviceOsVersion=function(e){this._allowDeviceFields&&this._addContext("DeviceInfo.OsVersion",e)},e.prototype.getDeviceBrowserName=function(){var e=this._properties.getPropertyMap()[s];return e?e.value.toString():""},e.prototype.setDeviceBrowserName=function(e){this._allowDeviceFields&&this._addContext(s,e)},e.prototype.getDeviceBrowserVersion=function(){var e=this._properties.getPropertyMap()[l];return e?e.value.toString():""},e.prototype.setDeviceBrowserVersion=function(e){this._allowDeviceFields&&this._addContext(l,e)},e.prototype.setDeviceMake=function(e){this._allowDeviceFields&&this._addContext("DeviceInfo.Make",e)},e.prototype.setDeviceModel=e.prototype.setUserId=e.prototype.setUserAdvertisingId=function(e){this._addContext("UserInfo.AdvertisingId",e)},e.prototype.setUserTimeZone=function(e){this._addContext("UserInfo.TimeZone",e)},e.prototype.setUserLanguage=e.prototype._addContext=function(e,t){"string"===typeof t&&this._properties.setProperty(e,t)},e.prototype._addContextWithPii=function(e,t,n){"string"===typeof t&&this._properties.setPropertyWithPii(e,t,n)},e}();t.default=u},923:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(415),i="MicrosoftApplicationsTelemetryDeviceId",o="MicrosoftApplicationsTelemetryFirstLaunchTime",a="MSIE",s="Chrome",l="Firefox",u="Safari",d="Edge",c="Electron",p="SkypeShell",m="PhantomJS",f="Opera",h="Windows",y="Mac OS X",g="Windows Phone",v="Windows RT",P="iOS",b="Android",I="Linux",E="Chrome OS",S=/(windows|win32)/i,D=/ arm;/i,C=/windows\sphone\s\d+\.\d+/i,T=/(macintosh|mac os x)/i,k=/(iPad|iPhone|iPod)(?=.*like Mac OS X)/i,x=/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,w=/android/i,R=/CrOS/i,A={5.1:"XP","6.0":"Vista",6.1:"7",6.2:"8",6.3:"8.1","10.0":"10"},O="([\\d,.]+)",_="Unknown",F="undefined",H=);t.default=H},953:983:984:]);