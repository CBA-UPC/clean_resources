(self.webpackChunktama_web=self.webpackChunktama_web||[]).push([[7317],{10793:(e,t,r)=>{"use strict";r.d(t,{f:()=>p});var n=r(76955),i=r(52377),a=r(5154),s=r.n(a),o=r(54285);class p extends n.PureComponent{constructor(e){super(e),this.handleClick=this.handleClick.bind(this),this.handleInview=this.handleInview.bind(this),this.startListen=this.startListen.bind(this),this.stopListen=this.stopListen.bind(this),this.inviewTracked=!1,this.tapTracked=!1}static get defaultProps(){return{activate:["tap"],algorithmId:"",bloggerAmebaId:"",categories:[],categoryId:"",subCategoryId:"",children:null,contentId:"",disable:!1,displayPosition:"",entryId:"",orderId:"",pageId:"",sectionId:"",serviceId:"",tagName:"",tapLogger:s(),viewLogger:s()}}componentDidMount(){this.startListen()}componentDidUpdate(){this.startListen()}et params(){var{algorithmId:e,bloggerAmebaId:t,categoryId:r,subCategoryId:n,contentId:i,displayPosition:a,pageId:s,entryId:o,orderId:p,sectionId:c,serviceId:l,tagName:d}=this.props;return{algorithmId:e,bloggerAmebaId:t,categories:this.props.categories.filter((),categoryId:r,subCategoryId:n,contentId:i,displayPosition:a,pageId:s,entryId:o,orderId:p,sectionId:c,serviceId:l,tagName:d}}startListen(){-1===this.props.activate.indexOf("view")||this.inviewTracked||(p.intersectionListener||(p.intersectionListener=(0,o.T)({})),this.stopListen(),this.trigger=i.findDOMNode(this),this.trigger&&!this.unlisten&&(this.unlisten=p.intersectionListener.listen(this.trigger,(e=>{(e.isIntersecting||e.intersectionRatio>0)&&(this.stopListen(),this.handleInview())}))))}andleClick(e){var t=n.Children.only(this.props.children).props.onClick;t&&t(e),this.props.tapLogger(this.params)}ender(){if(this.props.disable)return this.props.children;var e=this.props.children;return-1!==this.props.activate.indexOf("tap")&&(e=n.cloneElement(e,{onClick:this.handleClick})),e}}p.displayName="Tracker"},38160:(e,t,r)=>{"use strict";r.d(t,{$j:()=>a,J:()=>s,Lt:()=>p,b$:()=>i,qD:()=>o,wI:()=>c,wo:()=>l});var n=r(72591),i={callback:window.process.env.HTTP_PATH_AMEBA,utm_medium:"ameba",utm_source:n.parse(window.process.env.HTTP_PATH_AMEBLO).hostname},a="".concat(window.process.env.HTTP_PATH_AUTH_USER,"/signup"),s="".concat(window.process.env.HTTP_PATH_BLOG_AMEBA,"/ucs/top.do"),o="".concat(window.process.env.HTTP_PATH_BLOG_AMEBA,"/ucs/logininput.do"),p="".concat(window.process.env.HTTP_PATH_SSO_AMEBA,"/v2/signout"),c="".concat(window.process.env.HTTP_PATH_AMEBLO),l="".concat(window.process.env.HTTP_PATH_CONTENT,"/subscription/no-advertisement/index.html")},33811:(e,t,r)=>{"use strict";r.d(t,{uw:()=>w,x0:()=>O});var n=r(41185),i=r(66062),a=r(18274),s=r(55752),o=r.n(s),p=r(5663),c=r.n(p),l=r(74890),d=r.n(l),u=r(62720),h=r(64123),g=r(11622),y=r(18966),b=r(41779);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=[u.Z.REBLOG,u.Z.HASH_TAG,u.Z.IMAGE,u.Z.VIDEO,u.Z.CLIPBLOG,u.Z.VOICE_BLOG,u.Z.PR,u.Z.AUTO_AD],v=T=(e,t,r)=>({type:y.V7,payload:{blogId:e,entryId:t,error:r},error:!0}),O=(0,a.H)((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0;return function(){var a=(0,i.Z)((function*(i,a,s){var{fetchr:p}=s,l=d()(m.concat(r)),u=o()(a(),["bloggerState","blogMap",e,"blog_name"],"");if(!u||!t)return null;var b=o()(a(),["entryState","entryMetaMap",t],null),f=o()(b,"pagingType",void 0),O=n===f,w=o()(a(),["entryState","entryMap",t],null);if(b&&O&&w&&(!c()(w.entry_text)||404===w.status_code))return null;try{i({type:y.Gh,payload:{blogId:e,entryId:t,fieldFilter:l,frm:n}});var P={amebaId:u,blogId:e,entryId:t,fieldFilter:l,frm:n},_=yield p.read(h.Z.BlogEntry).params(P).end(),k=_.data;if(!(!1!==a().deviceState.isEmojiSupported)&&k.entities&&k.entities.entryMap)try{k=I(I({},k),{},{entities:I(I({},k.entities),{},{entryMap:yield(0,g.R9)(k.entities.entryMap)})})}catch(L){console.warn(L),k=_.data}return i(v(e,t,k,n))}catch(M){return i(T(e,t,M))}}));return ()})),w=(0,a.H)(((e,t)=>function(){var r=(0,i.Z)((function*(r,n){var i=o()(n(),["bloggerState","blogMap",e,"blog_name"],"");if(!i||!t)return null;var a=o()(n(),["entryState","entryMap",t],null);if("amember"!==a.publish_flg||a&&(a.entry_text||404===a.statusCode))return null;try{r({type:y.tB,payload:{entryId:t}});var s={token:o()(n(),["amebloTokenState","amebloToken"],null),amebaId:i,entryId:parseInt(t,10)},p=yield(0,b.s)(s);return r(((t,p))}catch(c){return r(((e,t)=>({type:y.Ny,payload:{entryId:e,error:t},error:!0}))(t,c))}}));return ()))},83668:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:);var n,i,a,s=r(3e4),o=r(41185),p=r(66062),c=(r(91938),r(76955)),l=r(55752),d=r.n(l),u=r(29466),h=r.n(u),g=r(97175),y=r(66948),b=r(29842),f=r(73614),I=r(33811),m=r(81454),v=r(77442),T=r(5563),O=r(83917);nction _(){return(_=(0,p.Z)((function*(e){var{dispatch:t,getState:r,match:n,location:i}=e,{params:a}=n,s=a.amebaId,o=yield t((0,f.Rs)(s));if(!o||!o.error){var p=r().bloggerState,c=p.bloggerMap,l=p.blogMap[(c[s]||{}).blog];if(l&&l.blog_id){var d=a.entryId,{frm:u}=i.query;yield t((0,I.x0)(l.blog_id,d,[],u))}}}))).apply(this,arguments)}function k(){return(k=(0,p.Z)((function*(e){var{dispatch:t,getState:r,match:n}=e,{params:i}=n,a=i.amebaId,s=r().bloggerState,o=s.bloggerMap,p=s.blogMap[(o[a]||{}).blog];if(p&&p.blog_id){var c=r().entryState.entryMap,l=i.entryId,d=c[l]||{};if(d.entry_id)(0,b.M)(p,d).canIine&&(yield t((0,v.yr)(a,l))),t((0,m.l1)(p.blog_id,[l]))}}))).apply(this,arguments)}var L=(0,y.$j)((function(e,t){var{match:r}=t,{params:n,route:i}=r,a=n.amebaId,s=n.entryId,o=i.pageType,p=e.entryState,c=e.bloggerState,l=e.iineState,u=c.bloggerMap,h=c.blogMap,g=p.entryMap,y=u[a]||{},b=(y.attribute||{}).isOfficial,f=P(P({},g[s]),p.entryReactionsMap[s]),I=h[y.blog]||{},m=l.iineButtonMap[s]||{};return{amebaId:a,amebloOneTimeToken:d()(e,["amebloTokenState","amebloOneTimeToken"],""),blog:I,entry:f,iine:m,isOfficial:b,pageType:o}}),{fetchIineRequest:v.yr,executeIineRequest:v.Ry,cancelIineRequest:v.Xc,trackTapLog:T.XI})(n=(0,g.provideHooks)({defer:function(e){return _.apply(this,arguments)},done:)((a=i=class extends c.Component{houldComponentUpdate(e){return this.props.amebaId!==e.amebaId||this.props.amebloOneTimeToken!==e.amebloOneTimeToken||this.props.cancelIineRequest!==e.cancelIineRequest||this.props.executeIineRequest!==e.executeIineRequest||this.props.fetchIineRequest!==e.fetchIineRequest||this.props.isOfficial!==e.isOfficial||this.props.pageType!==e.pageType||this.props.trackTapLog!==e.trackTapLog||!h()(this.props.blog,e.blog)||!h()(this.props.entry,e.entry)||!h()(this.props.iine,e.iine)}render(){return this.props.entry.entry_id?(0,s.Z)(O.m,{amebaId:this.props.amebaId,amebloOneTimeToken:this.props.amebloOneTimeToken,blog:this.props.blog,cancelIineRequest:this.props.cancelIineRequest,entry:this.props.entry,executeIineRequest:this.props.executeIineRequest,fetchIineRequest:this.props.fetchIineRequest,iine:this.props.iine,isOfficial:this.props.isOfficial,pageType:this.props.pageType,trackTapLog:this.props.trackTapLog}):null}},i.displayName="PcEntryDetailReactions",n=a))||n)||n},74890:]);