utag.globals.dle.enrichments['prod-_-hl-content-mortgage-overview'] = {
    "attributes": {
        "updated": "2019-04-17-145941",
        "page-id": "HL:Content:Mortgage;overview"
    },
    "pageSettings": {
        "pixelTag": []
    },
    "customEventSettings": []
};t[o][0].call(d.exports,function(e){var n=t[o][1][e];return r(n||e)},d,d.exports,e,t,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}return e}()({1:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("./Validators"),u=i(e("./vanillaHelpers")),c=e("./Utils"),d=e("./constants/videoConstants"),l=function(){function e(t,n,i,a){r(this,e),this.bugsnag=t,this.isSmartUnitTester=i,this.accountId=n,this.configs=a}return o(e,[{key:"getLastParagraphNode",value:function(e){var t=e.node,n=e.index,i=void 0===n?1:n,r=e.accountId,a=u.default.getNodeDescription(t),o=(0,c.textNodesUnder)(t),l=(0,s.lastNodeValidation)({nodes:o,isSmartUnitTester:this.isSmartUnitTester,configs:this.configs});if((0,c.isNodeBlacklisted)(t,this.configs))return this.bugsnag.pushBreadCrumb({name:"".concat(a," is blacklisted")}),null;if(0===l.length){var h=t.querySelectorAll(d.videoSelectors);return h.length>0?t:(this.bugsnag.pushBreadCrumb({name:"".concat(a," is not validated")}),null)}var f=t.children;if(0===f.length)return this.bugsnag.pushBreadCrumb({name:"".concat(a," has no children")}),t;for(var p=f.length-i,v=f[p],m=0;m<f.length;m++)if((0,c.isNodeBlacklisted)(f[m],this.configs)){var g=m-1;if(g<0)continue;return f[g]}if((0,c.isNodeContainer)(v)){var y=this.getLastParagraphNode({node:v,accountId:r});return y?y:i===f.length-1?(this.bugsnag.pushBreadCrumb({name:"iterated through all sub nodes for ".concat(a,", no valid child found")}),null):(this.isSmartUnitTester&&v.setAttribute("style","background: rgb(255, 255, 0, 0.8)"),this.getLastParagraphNode({node:t,index:i+1,accountId:r}))}for(var b=f.length-1,k=f.length-1;k>=0;k--){var T=f[k];((0,c.nodeContainsBlacklistedNode)(T,this.configs)||(0,c.isNodeBlacklisted)(T,this.configs))&&(b=k-1)}return b<0?(this.bugsnag.pushBreadCrumb({name:"all children nodes of ".concat(a," are blacklisted")}),null):(this.isSmartUnitTester&&(f[b].setAttribute("style","background: #007AFF"),console.log("[KNOTCH] last node",f[b])),f[b])}}]),e}(),h=l;n.default=h},{"./Utils":5,"./Validators":6,"./constants/videoConstants":16,"./vanillaHelpers":18}],2:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("./PageDOMUtils.js")),c=r(t("./LastNodeFinder")),d=t("./constants/pageConstants"),l=t("./constants/configURLs"),h=r(t("./vanillaHelpers")),f=t("./configMethods"),p=function(e,t){return t(!0)},v=5,m=function(){function t(e,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:p,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0,u=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,d=arguments.length>7?arguments[7]:void 0;a(this,t),this.node=e,this.url=h.default.getCanonicalURL(),this.urlMap=n,this.injected=!1,this.scrollTimeout=null,this.accountId=u,this.isSmartUnitTester=d,this.touchEndListener=function(){return i.onScroll()},this.scrollListener=function(){return i.onScroll()},this.keyDownListener=function(e){return i.onKeyDown(e)},this.pageValidate=r,this.bugsnag=s,this.config=c,this.retries=0,this.inject=function(e){var t=e.pageBodyNode,r=e.lastParagraphNode,a=e.videoPlayer,s=e.knotchPlaceholder;return o({pageNode:i.node,pageBodyNode:t,lastParagraphNode:r,videoPlayer:a,urlMap:n,url:i.url,injectedCallback:function(){return i.injected=!0},unbindListeners:function(){return i.unbindListeners()},bugsnag:i.bugsnag,knotchPlaceholder:s})},this.init()}return s(t,[{key:"init",value:function(){var t=this;h.default.isMobile()?document.addEventListener("touchend",this.touchEndListener):(document.addEventListener("scroll",this.scrollListener),document.addEventListener("keydown",this.keyDownListener)),h.default.get("".concat(l.URLS[e.Knotch.config.env],"/").concat(this.accountId,".json"),{},function(e){t.handleBlacklistFetch(e)},function(e,n,i,r,a){return t.bugsnag.reportError(n,{data:{readyState:i,responseText:r,responseHeaders:a,status:e},severity:"info"})},this.bugsnag,{handle400:!0})}},{key:"handleBlacklistFetch",value:function(t){var n=this;this.blacklistKeywords=(0,f.combineBlacklists)(t),this.pageDOMUtils=new u.default(this.node,this.url,this.bugsnag,this.accountId,this.isSmartUnitTester,this.blacklistKeywords),this.lastNodeFinder=new c.default(this.bugsnag,this.accountId,this.isSmartUnitTester,this.blacklistKeywords),this.checkVisibility(),setTimeout(function(){n.injected||(n.checkVisibilityInterval=setInterval(function(){return n.checkVisibility()},1e3),e.setTimeout(function(){return clearInterval(n.checkVisibilityInterval)},1e4))},500)}},{key:"getYPos",value:function(){return e.pageYOffset+e.innerHeight}},{key:"onScroll",value:function(){var e=this;this.scrollTimeout&&clearTimeout(this.scrollTimeout),this.injected?this.unbindListeners():this.scrollTimeout=setTimeout(function(){return e.checkVisibility()},1e3)}},{key:"onKeyDown",value:function(e){var t=(e.code||"").toLowerCase();"space"!==t&&"arrowdown"!==t||this.onScroll()}},{key:"checkVisibility",value:function(){var t=this;if(this.injected)return void this.unbindListeners();var n=this.node.getBoundingClientRect(),i=n.top+n.height>=d.INVIEW_OFFSET&&n.top<e.innerHeight/2;if(i){if(this.url=h.default.getCanonicalURL(),!this.url)return this.unbindListeners(),this.bugsnag.pushBreadCrumb({name:"Canonical URL not found",type:"node finder"});if(this.infographic=this.pageDOMUtils.checkForInfographic(),this.urlMap){var r=this.urlMap[this.url];if(!r||!r.length)return this.bugsnag.pushBreadCrumb({name:"No map found for this URL",metaData:{url:this.url}}),this.unbindListeners();var a=this.node.querySelector(".knotch_placeholder"),o=this.node.querySelector('div[class*="knotch_'.concat(r[0],'"]'));o||(a?this.inject({urlMap:this.urlMap,url:this.url,bugsnag:this.bugsnag,knotchPlaceholder:a}):this.pageValidate(r[0],function(e){return t.validatePageBodyNode(e)}))}else{var s=this.findPageBodyNode();this.injectPage(s)}}}},{key:"validatePageBodyNode",value:function(e){var t=this;if(!e)return this.bugsnag.pushBreadCrumb({name:"Page validation failed",metaData:{url:this.url}}),this.unbindListeners();var n=this.findPageBodyNode();n?this.injectPage(n):this.infographic?this.injectPage(null):this.retries<v&&(this.retries+=1,setTimeout(function(){t.checkVisibility()},2e3),this.bugsnag.pushBreadCrumb({name:"findPageBodyNode retry #".concat(this.retries)}))}},{key:"findPageBodyNode",value:function(){var e;return e=this.config.pageBodySelectors?(0,f.getConfigPageBodyNode)(this.config.pageBodySelectors):this.pageDOMUtils.getPageBodyNode()}},{key:"injectPage",value:function(e){if(e){var t=this.pageDOMUtils.getVideoNodes(e),n=t&&t.length?t[0]:null,i=this.lastNodeFinder.getLastParagraphNode({node:e,accountId:this.accountId});!i&&this.infographic?this.inject({pageBodyNode:e,lastParagraphNode:this.infographic}):this.inject({pageBodyNode:e,lastParagraphNode:i,videoPlayer:n})}else if(this.infographic){var r=this.infographic.parentNode;this.inject({pageBodyNode:r,lastParagraphNode:this.infographic})}else this.unbindListeners()}},{key:"unbindListeners",value:function(){document.removeEventListener("scroll",this.scrollListener),document.removeEventListener("keydown",this.keyDownListener),document.removeEventListener("touchend",this.touchEndListener)}}]),t}(),g=m;i.default=g},{"./LastNodeFinder":1,"./PageDOMUtils.js":3,"./configMethods":9,"./constants/configURLs":11,"./constants/pageConstants":14,"./vanillaHelpers":18}],3:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=e("./Validators"),s=e("./Utils"),u=e("./constants/pageConstants"),c=e("./constants/nodeValidation"),d=e("./constants/videoConstants"),l=function(){function e(t,n,r,a,o,s){i(this,e),this.pageNode=t,this.url=n,this.bugsnag=r,this.isSmartUnitTester=o,this.accountId=a,this.configs=s}return a(e,[{key:"getPageBodyNode",value:function(){var e=this.getTopTextNodes(),t=this.getVideoNodes();if(this.isSmartUnitTester)if(t){console.groupCollapsed("found ".concat(t.length," video nodes:"));for(var n=0;n<t.length;n++)console.log(t[n]);console.groupEnd()}else console.log("no valid video nodes found");var i=[];if(e&&0!==e.length){var r=e.map(function(e){return e.textContent});this.bugsnag.pushBreadCrumb({name:"Found text nodes",metaData:{nodes:r.length,url:this.url,method:"getPageBodyNode()"}}),i=t&&t.length?(0,s.getCommonAncestors)(e.concat((0,s.nodeListToArray)(t))):(0,s.getCommonAncestors)(e)}else this.bugsnag.pushBreadCrumb({name:"No text nodes found for this page",metaData:{url:this.url}}),t&&t.length>0&&(i=1===t.length?[t[0].parentNode]:(0,s.getCommonAncestors)((0,s.nodeListToArray)(t)));if(i.length>0){if(this.isSmartUnitTester){console.groupCollapsed("found ".concat(i.length," parent nodes:"));for(var a=0;a<i.length;a++)console.log(i[a]);console.groupEnd()}this.bugsnag.pushBreadCrumb({name:"Found parent nodes",metaData:{parentNodes:i.length,url:this.url,method:"getPageBodyNode()"}});var o=(0,s.mode)(i);return this.isSmartUnitTester&&(o.setAttribute("style","border: 5px solid #007AFF"),console.groupCollapsed("found most common parent nodes:"),console.log(o),console.groupEnd()),o}return this.bugsnag.pushBreadCrumb({name:"No parent nodes found for this page",metaData:{url:this.url}})}},{key:"getTopTextNodes",value:function(){var e=(0,s.textNodesUnder)(this.pageNode),t=[];if(e.length){var n=0;for(t=(0,o.pageNodeValidation)({nodes:e,thresholdIndex:n,accountId:this.accountId,isSmartUnitTester:this.isSmartUnitTester,configs:this.configs});t.length<c.MIN_VALIDATED_NODES&&n<=c.THRESHOLD_INDEX_MAX;)n+=1,t=(0,o.pageNodeValidation)({nodes:e,thresholdIndex:n,accountId:this.accountId,isSmartUnitTester:this.isSmartUnitTester,configs:this.configs})}else this.bugsnag.pushBreadCrumb({name:"No text nodes found for this page",metaData:{url:this.url}});if(t=t.sort(function(e,t){return t.length-e.length}),t.length>=c.MIN_VALIDATED_NODES){if(this.bugsnag.pushBreadCrumb({name:"Found valid nodes",metaData:{validNodes:t.length,url:this.url,method:"getTopTextNode()"}}),this.isSmartUnitTester){console.groupCollapsed("found ".concat(t.length," validated nodes"));for(var i=0;i<t.length;i++)console.log(t[i]);console.groupEnd()}return t.slice(0,u.NODE_SAMPLE_SIZE)}return this.bugsnag.pushBreadCrumb({name:"No text nodes passed validation",metaData:{url:this.url}})}},{key:"getVideoNodes",value:function(e){return e?e.querySelectorAll(d.videoSelectors):document.querySelectorAll(d.videoSelectors)}},{key:"checkForInfographic",value:function(){for(var e,t=0,n=document.querySelectorAll("img"),i=0;i<n.length;i++){var r=n[i],a=r.getBoundingClientRect();a.height>t&&(t=r.height,e=r)}if(e){var o=e.width,s=t/o;if(s>u.MIN_IMAGE_HEIGHT_RATIO)return e}return this.bugsnag.pushBreadCrumb({name:"infographic not found"}),null}}]),e}(),h=l;n.default=h},{"./Utils":5,"./Validators":6,"./constants/nodeValidation":13,"./constants/pageConstants":14,"./constants/videoConstants":16}],4:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(t){this.pages=[],this.pageNodes=[],this.urlMap=t.urlMap||e.localURLToUnitList,this.pageValidate=t.pageValidate,this.isSmartUnitTester=t.isSmartUnitTester,this.accountId=t.accountId,this.bugsnag=t.bugsnag,this.inject=t.inject,this.canonicalUrl=u.default.getCanonicalURL(),this.accounts=(0,o.default)(this.canonicalUrl,this.accountId),this.knotchConfig=e.Knotch.config,this.init()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=r(t("./accounts/AccountExtractor")),s=r(t("./Page")),u=r(t("./vanillaHelpers")),c=t("./constants/configURLs"),d=t("./configMethods");a.prototype={init:function(){var e=this;u.default.get("".concat(c.URLS[this.knotchConfig.env],"/").concat(this.accountId,".json"),{},function(t){e.combineConfig(t)},function(t,n,i,r,a){return e.bugsnag.reportError(n,{data:{readyState:i,responseText:r,responseHeaders:a,status:t},severity:"info"})},this.bugsnag,{handle400:!0})},combineConfig:function(e){var t=this;this.config=(0,d.getConfig)(this.canonicalUrl,e),this.config&&this.config.waitUntilType?d.WAIT_UNTIL[this.config.waitUntilType].call(this,function(){return t.checkForNewPages()}):this.checkForNewPages()},checkForNewPages:function(){var t=this;this.checkPageNodesInterval=setInterval(function(){return t.checkPageNodes()},2e3),e.setTimeout(function(){return clearInterval(t.checkPageNodesInterval)},18e5),this.checkPageNodes()},checkPageNodes:function(){for(var e=document.querySelectorAll(this.config.scrollSelector),t=u.default.getCanonicalURL(),n=0;n<e.length;n++)(this.pageNodes.indexOf(e[n])<0||this.canonicalUrl!==t)&&(this.pages.push(new s.default(e[n],this.urlMap,this.pageValidate,this.inject,this.bugsnag,this.accountId,this.config,this.isSmartUnitTester)),this.pageNodes.push(e[n]),this.canonicalUrl=t,this.accounts=(0,o.default)(this.canonicalUrl,this.accountId))}};var l=a;i.default=l},{"./Page":2,"./accounts/AccountExtractor":7,"./configMethods":9,"./constants/configURLs":11,"./vanillaHelpers":18}],5:[function(e,t,n){"use strict";function i(e){return o(e)||a(e)||r()}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function a(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}Object.defineProperty(n,"__esModule",{value:!0}),n.fromHex=n.toHex=n.nodeListToArray=n.isNodeContainer=n.isNodeBlacklisted=n.nodeContainsBlacklistedNode=n.mode=n.getCommonAncestors=n.findFirstCommonAncestor=n.getAncestors=n.constructNodeBlacklist=n.textNodesUnder=void 0;var s=e("./constants/blacklists"),u=function(e){if(!e)return[];for(var t,n=[],i=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1);t=i.nextNode();)t.textContent.trim().length>0&&n.push(t);for(var r=0;r<n.length-1;r++)r>0&&n[r].parentNode.parentNode===n[r-1].parentNode&&n[r].parentNode.parentNode===n[r+1].parentNode&&n.splice(r-1,3,n[r-1].parentNode);return n};n.textNodesUnder=u;var c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document,r=e.map(function(e){var t,r=n.querySelectorAll(e),a=n.querySelectorAll("[class*=".concat(e,"]")),o=n.querySelectorAll("[id*=".concat(e,"]")),s=[].concat(i(Array.prototype.slice.call(r)),i(Array.prototype.slice.call(a)),i(Array.prototype.slice.call(o))),c=s.map(function(e){return u(e)});return(t=Array.prototype).concat.apply(t,i(c))});return(t=Array.prototype).concat.apply(t,i(r))};n.constructNodeBlacklist=c;var d=function e(t){return t!==document?[t].concat(e(t.parentNode)):[t]};n.getAncestors=d;var l=function e(t,n,i){if(t===n)return null;var r=i||d(n);return 0===r.length?null:r.indexOf(t)>-1?t:t===document?null:e(t.parentNode,n,r)};n.findFirstCommonAncestor=l;var h=function(e){var t,n,i=[];for(t=e.slice(),n=e.slice(),n.reverse();t.length;){var r=t.pop(),a=n[0]===r?n.pop():n.shift(),o=l(r,a);o&&i.push(o)}return i};n.getCommonAncestors=h;var f=function(e,t){for(var n=t.parentNode;null!=n;){if(n==e)return!0;n=n.parentNode}return!1},p=function(e,t){for(var n in e)if(f(e[n].node,t)&&"BODY"!==e[n].node.nodeName)return e[n].node;return t},v=function(e){var t=e.reduce(function(e,t){var n=e.filter(function(e){return e.node===t});return n.length>0?n[0].count++:e.push({node:t,count:1}),e},[]),n=t.reduce(function(e,t){return t.count>e.count?t:e},{count:0}),i=p(t,n.node);return i};n.mode=v;var m=function(e,t){for(var n=t[s.PAGEBODY_KEY],i=t[s.LASTNODE_KEY],r=!1,a=!1,o=0;o<n.length;o++){var u=c(n,e);(u.length>0||null===e.parentNode.offsetParent)&&(r=!0)}for(var d=0;d<i.length;d++){var l=c(i,e);(l.length>0||null===e.parentNode.offsetParent)&&(a=!0)}};n.nodeContainsBlacklistedNode=m;var g=function(e,t){var n=t[s.PAGEBODY_KEY],i=t[s.LASTNODE_KEY];if(n.indexOf(e.id)!==-1)return!0;for(var r=0;r<e.classList.length;r++)if(n.indexOf(e.classList[r])!==-1||i.indexOf(e.classList[r])!==-1)return!0};n.isNodeBlacklisted=g;var y=function(e){return e&&"DIV"===e.tagName&&e.children.length>0};n.isNodeContainer=y;var b=function(e){return Array.prototype.slice.call(e)};n.nodeListToArray=b;var k=function(e){for(var t="",n=0;n<e.length;n++)t+=e.charCodeAt(n).toString(16);return t};n.toHex=k;var T=function(e){var t;try{t=decodeURIComponent(e.replace(/(..)/g,"%$1"))}catch(e){t=null}return t};n.fromHex=T},{"./constants/blacklists":10}],6:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(n,"__esModule",{value:!0}),n.lastNodeValidation=n.pageNodeValidation=void 0;var s=e("./Utils"),u=e("./constants/nodeValidation"),c=e("./constants/blacklists"),d=i(e("./constants/validatorLogger")),l=[function(e){var t=e.nodeToCheck;return d.default[0].totalNodesChecked++,void 0!==t?(d.default[0].passed.push(t),!0):(d.default[0].failed.push(t),!1)},function(e){var t=e.nodeToCheck;d.default[1].totalNodesChecked++;var n=t.parentNode;return n&&"SCRIPT"!==n.tagName&&"NOSCRIPT"!==n.tagName?(d.default[1].passed.push(t),!0):(d.default[1].failed.push(t),!1)},function(e){var t=e.nodeToCheck;d.default[2].totalNodesChecked++;var n=t.parentNode;return n&&"STYLE"!==n.tagName&&"STYLE"!==n.tagName?(d.default[2].passed.push(t),!0):(d.default[2].failed.push(t),!1)},function(e){var t=e.nodeToCheck;d.default[3].totalNodesChecked++;var n=/footer/i,i=t.id,r=t.className;return t.parentNode&&n.test(t.parentNode.tagName)?(d.default[3].failed.push(t),!1):n.test(i)||n.test(r)?(d.default[3].failed.push(t),!1):(d.default[3].passed.push(t),!0)},function(e){var t=e.nodeToCheck;d.default[4].totalNodesChecked++;var n=t.parentNode;return n&&null!==n.offsetParent?(d.default[4].passed.push(t),!0):(d.default[4].failed.push(t),!1)},function(e){var t=e.nodeToCheck,n=e.options.blacklist;d.default[5].totalNodesChecked++;var i=n.indexOf(t)===-1;return i?d.default[5].passed.push(t):d.default[5].failed.push(t),i}],h=function(e){var t=e.nodeToCheck,n=e.options.thresholdIndex;return d.default[6].totalNodesChecked++,t.textContent.trim().length>u.TEXT_LENGTH_THRESHOLD-20*n?(d.default[6].passed.push(t),!0):(d.default[6].failed.push(t),!1)},f=function(e){var t=e.nodes,n=e.thresholdIndex,i=(e.accountId,e.isSmartUnitTester),r=e.configs,o=r[c.PAGEBODY_KEY],u=(0,s.constructNodeBlacklist)(o),f=[].concat(l,[h]),p=t.filter(function(e){var t=f.reduce(function(t,i){return t&&i({nodeToCheck:e,options:{thresholdIndex:n,blacklist:u}})},!0);if(i){var r=3===e.nodeType?e.parentNode:e;t?r.setAttribute("style","background: rgba(0,255,0,0.5);"):r.style.background||r.setAttribute("style","background: rgba(255,0,0,0.5);")}return t});if(i){console.groupCollapsed("Text Node validation");var v=d.default.map(function(e){return a({},e,{numPassed:e.passed.length,numFailed:e.failed.length})});console.table(v),console.groupEnd();for(var m=0;m<d.default.length-1;m++)d.default[m].totalNodesChecked=0,d.default[m].passed=[],d.default[m].failed=[]}return p};n.pageNodeValidation=f;var p=function(e){var t=e.nodes,n=e.isSmartUnitTester,i=e.configs,r=i[c.LASTNODE_KEY],o=(0,s.constructNodeBlacklist)(r),u=t.filter(function(e){var t=l.reduce(function(t,n){return t&&n({nodeToCheck:e,options:{blacklist:o}})},!0);if(n){var i=e.parentNode;t?i.setAttribute("style","background: rgba(0,255,0,0.5);"):i.style.background||i.setAttribute("style","background: rgba(255,0,0,0.5);")}return t});if(n){console.groupCollapsed("Last Node validation");var h=d.default.map(function(e){return a({},e,{numPassed:e.passed.length,numFailed:e.failed.length})});console.table(h),console.groupEnd();for(var f=0;f<d.default.length-1;f++)d.default[f].totalNodesChecked=0,d.default[f].passed=[],d.default[f].failed=[]}return u};n.lastNodeValidation=p},{"./Utils":5,"./constants/blacklists":10,"./constants/nodeValidation":13,"./constants/validatorLogger":15}],7:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("./accountValidators.js"),r=e("../Utils"),a=function(e,t){var n=i.encryptions[t],a={default:t,subAccounts:[]};if(!n)return null;for(var o in n)for(var s=n[o],u=0;u<s.length;u++){var c=(0,r.fromHex)(s[u]),d=new RegExp(c);if(!d.test(e))return null;a.subAccounts.push(o)}return a},o=a;n.default=o},{"../Utils":5,"./accountValidators.js":8}],8:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.encryptions=void 0;var i={"518afb38-d89b-4aa0-9b73-31ad26d491a6":{"15b3956bc9d8c9946c803ab80886ec74":["U2FsdGVkX1/C2X3X7pBEnAsXRWekDe3LuMdGGrevSEE50dB0Ve+EhyFKWTBBIHdV"],"7a53d7e2e57d8fbe5680e61358d23536":["U2FsdGVkX1/OXvPXbkoSsKXxPfG45+tXkiyse1puGVDNiAgQqg8tzJoPGatet4MUNWXPO8LSZ0O0k9vnSKBB6A==","U2FsdGVkX18Jf9fJlNGPRWdgktYusIjwqeDBw19tScNmMbLcEWLP1fZVPLk8drUK/pkPQy42hQzqIEWhGt53ZQ==","U2FsdGVkX19S7fI7yVo0Z7oNU5IdoS93j5S7GW1cvpCvBKFfaqK7MR9GuKFN6lei","U2FsdGVkX1978OVs1CXlStVfOqYszJmiEpfQLwV+IGZfYG/A7PqQKRXtTlnDnDIiwfE5CutGpUBSXzCIQfeN4w=="]},"59a8732185a483543bb543a3":{"1b24359f30b5b9407066a1eec22bd3f1":["U2FsdGVkX1/Ky5rMUtj1Un4F1Kc1nSuz1jiKrlLDqUJGjeNMuPuKlBxsh2o6C1RH"],abfc3a65538a6ec86502b2b498b6b4a6:["U2FsdGVkX19NYin5lY3CC81pvyQ9ywPw4rS5tK6MuPL4jOGnNxHlUQW7CnCjewc1"]},"b6b10bf5-6f47-466b-92fc-06a4d0465004":{bdd2b4735520a67128c5c41e13ba242b:["U2FsdGVkX1/ra5g+n0ONjyX8Owtd9kQ6cH+uWvd2EWSN5HHxfJEdtbaY+Xy/6GDR"],"4a4e823cd1c23ca5208dda302d47c4fe":["U2FsdGVkX19woCMy+Gc1ez/tvavScHa/Nj63oIX8pECGLOimBUZ0RvC1dy0uv8Sr"],"4c09c1c6592314382399dca560827142":["U2FsdGVkX18F1DDxVshKlDxLDxClxUaQfm2Y+Cnrb0Gl8FG9bu6hdwiZlECrITCR"]},"bce4b311-6d20-4d7f-89b8-de0ba080d5bb":{ab68f1b12242c0f27fd60fc1455df93f:["U2FsdGVkX1+ur52QbinpZ6rrucN6FXr6+tljSp77DW8TgBHlFQFy29o0jcLsYeVM"],baea48cd2b5a47254e40011531452fd7:["U2FsdGVkX18VNRJgq+wsj85LImghIumCERPqdwyxFoWD3INvGznzFZFbSSDMBjOJ","U2FsdGVkX1//swH9aJ7a51iYbMvFggSteKMg9qC1zr++hqc/yuMQ2Ukjf5i4Ga2WE/vRzXDtYSQHu3y/Om70UxOWIHveOI578eNDYtrxXVo="],"4aa6f508502e1c32214f480ab5ce559e":["U2FsdGVkX193i0oP0eprT0aIvg+c/2C4LflYnBTnik0l7/evAuafFru2uUjFJ2jGLGacMvYal26/U1HBGmw/7bmUXVL/5hi21tSBYgcDqx8="],"5f2a13115f830fd9487f8cd48ba988f6":["U2FsdGVkX1+KDIkyiGtfJg1kcGlOA844FhoTp+6kNRCcB7Kot6jaokBamvEgxziNdNbPjfDlInU3UoosZSkhunmwzvNnOl+X1Cg7/t4nMhk="]},"5babf273636f6fc04d62e363":{"34583e6829c62fded991aa86a5a99939":["U2FsdGVkX18AOs+7BwgiiNjBJVnGleJumNVvlFUdBcPRH3V6123xQ9/11CD+JKVd"],"2409eb721f8ebb8602068bb94b1db8ed":["U2FsdGVkX18xGicJKBNajCruAF+R3NJv5iDXERzkLN8UA7LFGCxCiF7MIrQnG+ys"]}};n.encryptions=i},{}],9:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0}),i.combineBlacklists=i.getConfig=i.urlHasConfig=i.getConfigPageBodyNode=i.WAIT_UNTIL=void 0;var a=t("./Utils"),o=r(t("./vanillaHelpers")),s=r(t("./constants/defaultConfig")),u=t("./constants/blacklists"),c="default",d={nuxt:function(t){var n=e.setInterval(function(){try{if(e.$nuxt&&e.$nuxt.$loading._isMounted)return t(),clearInterval(n),!0}catch(e){console.log(e.message)}},100);e.setTimeout(function(){return clearInterval(n)},18e5)}};i.WAIT_UNTIL=d;var l=function(e){for(var t=0;t<e.length;t++)if(document.querySelector(e[t]))return document.querySelector(e[t])};i.getConfigPageBodyNode=l;var h=function(e,t){if(e===c)return!0;var n=(0,a.fromHex)(e);if(!n)return!1;var i=new RegExp(n);return i.test(t)};i.urlHasConfig=h;var f=function(e,t){var n,i=s.default.default&&s.default.default.config;for(var r in t){var a=p(t,r);h(r,e)&&(n=o.default.extend(n,a))}return o.default.extend(i,n)};i.getConfig=f;var p=function(e,t){var n=e[t].config,i=n&&Object.keys(n).length>0;return i?n:{}},v=function(e){var t=o.default.getCanonicalURL(),n=s.default.default&&s.default.default.blacklist.pageBodyBlacklist,i=s.default.default&&s.default.default.blacklist.lastNodeBlacklist,r={pageBodyBlacklist:n,lastNodeBlacklist:i};for(var a in e){var c=m(e,a,u.PAGEBODY_KEY),d=m(e,a,u.LASTNODE_KEY);h(a,t)&&(r.pageBodyBlacklist=r.pageBodyBlacklist.concat(c),r.lastNodeBlacklist=r.lastNodeBlacklist.concat(d))}return r};i.combineBlacklists=v;var m=function(e,t,n){var i=e[t].blacklist,r=i&&Object.keys(i).length>0;if(r){var a=e[t].blacklist[n];if(Array.isArray(a)&&a.length>0)return a}return[]}},{"./Utils":5,"./constants/blacklists":10,"./constants/defaultConfig":12,"./vanillaHelpers":18}],10:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LASTNODE_KEY=n.PAGEBODY_KEY=void 0;var i="pageBodyBlacklist";n.PAGEBODY_KEY=i;var r="lastNodeBlacklist";n.LASTNODE_KEY=r},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.URLS=void 0;var i={development:"https://assets.knotch.host/crawl-config",test:"https://assets.knotch.host/crawl-config",production:"https://www.knotch-cdn.com/crawl-config"};n.URLS=i},{}],12:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i={default:{blacklist:{pageBodyBlacklist:["comment","disclaimer","footer","modal","about-wrapper","related-content-grid","resourceSlider","todolistcontainer"],lastNodeBlacklist:["tag-display","related-content","tag-cloud"]},config:{scrollSelector:"body"}}},r=i;n.default=r},{}],13:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MIN_VALIDATED_NODES=n.THRESHOLD_INDEX_MAX=n.TEXT_LENGTH_THRESHOLD_MIN=n.TEXT_LENGTH_THRESHOLD=void 0;var i=200;n.TEXT_LENGTH_THRESHOLD=i;var r=80;n.TEXT_LENGTH_THRESHOLD_MIN=r;var a=6;n.THRESHOLD_INDEX_MAX=a;var o=3;n.MIN_VALIDATED_NODES=o},{}],14:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MIN_IMAGE_HEIGHT_RATIO=n.INVIEW_OFFSET=n.NODE_SAMPLE_SIZE=void 0;var i=50;n.NODE_SAMPLE_SIZE=i;var r=100;n.INVIEW_OFFSET=r;var a=2;n.MIN_IMAGE_HEIGHT_RATIO=a},{}],15:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=[{name:"Undefined Check",totalNodesChecked:0,passed:[],failed:[]},{name:"Script Tag Check",totalNodesChecked:0,passed:[],failed:[]},{name:"Style Tag Check",totalNodesChecked:0,passed:[],failed:[]},{name:"Footer Check",totalNodesChecked:0,passed:[],failed:[]},{name:"Visible Check",totalNodesChecked:0,passed:[],failed:[]},{name:"Blacklist Check",totalNodesChecked:0,passed:[],failed:[]},{name:"Text Threshold Check",totalNodesChecked:0,passed:[],failed:[]}],r=i;n.default=r},{}],16:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.videoSelectors=void 0;var i="iframe[src*=youtube], [class*=brightcove], [class*=fave-player-INPUT], .jwplayer, [id^=wistia_simple_video], video";n.videoSelectors=i},{}],17:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=i(e("./Tracker"));t.exports=function(e){return new r.default(e)}},{"./Tracker":4}],18:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=i.h=void 0;var r={isMobile:function(){return"ontouchstart"in e||navigator.msMaxTouchPoints||navigator.userAgent.indexOf("IEMobile")!==-1},isEmptyObject:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},isValidNumber:function(e){return"number"==typeof e&&!isNaN(e)},isValidTagId:function(e){var t=/^[A-F\d]{8}-[A-F\d]{4}-4[A-F\d]{3}-[89AB][A-F\d]{3}-[A-F\d]{12}$/i;return e&&"string"==typeof e&&e.length>0&&(t.test(e)||e.match(/^[0-9a-fA-F]{24}$/))},getAccountId:function(){return r.getScriptAttribute("data-account")},getNodeDescription:function(e){if(!e)return null;var t=e.tagName;return e.id&&(t+="#".concat(e.id)),e.className&&e.className.length&&(t+=e.className.split(" ").join(".")),t},getScriptFlag:function(e){try{var t=document.querySelector('script[src*="knotch"]')||document.currentScript,n=""===t.getAttribute(e),i="true"===t.getAttribute(e)||"1"===t.getAttribute(e);return n||i}catch(e){return!1}},getScriptAttribute:function(e){try{var t=document.currentScript||document.querySelector('script[src*="knotch"]');return t.getAttribute(e)}catch(e){return!1}},validateURL:function(e){return/^((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/.test(e)},getCanonicalURL:function(){var e=document.querySelector("meta[property='og:url']"),t=document.querySelector("link[rel=canonical]"),n=document.querySelector("meta[name='canonical']");if(t&&t.getAttribute("href").length>0){var i=t.getAttribute("href");if(this.validateURL(i))return i}if(e&&e.getAttribute("content").length>0){var r=e.getAttribute("content");if(this.validateURL(r))return r}if(n&&n.getAttribute("content").length>0){var a=n.getAttribute("content");if(this.validateURL(a))return a}return console.warn("no valid canonical url was found"),null},getBrowserURL:function(t){var n=null;return document.URL?n=document.URL:e.location.href?n=e.location.href:e.location.host&&e.location.pathname&&(n="".concat(e.location.protocol,"//").concat(e.location.host).concat(e.location.pathname)),n?n:(t.reportError(new Error("browser URL doesn't exist"),this.localData),null)},get:function(t,n,i,r,a,o){var s,u="undefined"!=typeof XMLHttpRequest.DONE?XMLHttpRequest.DONE:4;return s=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),s.onerror=function(){return s.status>=500&&a.reportError(new Error(s.responseText),{name:"".concat(s.status," request error"),data:n}),!1},s.onreadystatechange=function(){if(s.readyState===u)if(200===s.status){var e=s.responseText;if(e)try{var n=JSON.parse(e)}catch(n){a.reportError(n,{name:"failed to parse request response",data:{responseText:e,url:t}})}i(n)}else s.status>=400&&o&&o.handle400?i(n):s.status>=500?r(s.status,s.statusText,s.readyState,s.responseText,s.getAllResponseHeaders()):0===s.status&&r(s.status,s.statusText,s.readyState)},s.open("GET",t,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.send(JSON.stringify(n)),s},post:function(t,n,i,r,a){var o,s="undefined"!=typeof XMLHttpRequest.DONE?XMLHttpRequest.DONE:4;return o=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),o.onloadend=function(){return o.status>=400&&a.reportError(new Error(o.responseText),{name:"404 - not found",data:n}),!1},o.onerror=function(){return o.status>=500&&a.reportError(new Error(o.responseText),{name:"".concat(o.status," request error"),data:n}),!1},o.onreadystatechange=function(){if(o.readyState===s){var e=o.responseText;if(e&&!e.match(/</))try{var n=JSON.parse(e)}catch(n){a.reportError(n,{name:"failed to parse request response",data:{responseText:e,url:t}})}200===o.status?i(n):0===o.stats&&r(o.status,o.statusText)}},o.open("POST",t,!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.send(JSON.stringify(n)),o},extend:function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e}};i.h=r;var a=r;i.default=a},{}],19:[function(t,n,i){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}var u=function(e,t){var n;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(i,r)},t)}},c=function(t){var n=!1,i=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",r),e.removeEventListener("load",r)):(document.detachEvent("onreadystatechange",r),e.detachEvent("onload",r))},r=function(){n||!document.addEventListener&&"load"!==event.type&&"complete"!==document.readyState||(n=!0,i(),t())};if("complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState||document.body)t();else if(document.addEventListener)document.addEventListener("DOMContentLoaded",r),e.addEventListener("load",r);else{document.attachEvent("onreadystatechange",r),e.attachEvent("onload",r);var a=!1;try{a=null==e.frameElement&&document.documentElement}catch(e){}a&&a.doScroll&&function e(){if(!n){try{a.doScroll("left")}catch(t){return setTimeout(e,50)}n=!0,i(),t()}}()}},d=function(){return"ontouchstart"in e||navigator.msMaxTouchPoints||-1!==navigator.userAgent.indexOf("IEMobile")},l=function(e){for(var t="",n=e,i="BODY"!==n.tagName;n!==document.body;){var r="";if(r+=n.tagName.toLowerCase(),n.id&&(r+="#".concat(n.id)),i&&n.className){var a=n.className.replace(/(\r\n|\n|\r)/gm," ");r+=".".concat(a.split(" ").filter(function(e){return e.length>0}).join("."))}n=n.parentNode,t=0===t.length?r:"".concat(r,">").concat(t)}return t},h=function(e){return e.href?e.href:""},f=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"A",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(null===t)return null;var r=i-1;return t.tagName===n?t:0===r?null:e(t.parentElement,n,r)},p=["scroll","keydown","click","focus","mousemove"],v=["touchstart","touchmove","touchend"],m=function(){function e(t){var n=this,i=t.callback;a(this,e);var r=u(function(){return n.trackEngagedTimeOnPage()},3e3);this.callback=i,c(function(){!function(e,t,n){function i(e,t){for(var i=0;i<t.length;i++)try{e.addEventListener?e.addEventListener(t[i],n,!1):e.attachEvent&&e.attachEvent("on".concat(t[i]),n)}catch(n){Knotch.bugsnag.reportError(n,{name:"Error while attaching event listener",data:{node:e,events:t}})}}if(t){var r=null;if(r=Array.isArray(e)&&e.length>0?e:[e],t instanceof NodeList||t instanceof HTMLCollection){t.length||(t=[t]);for(var a=0;a<t.length;a++)i(t[a],r)}else i(t instanceof Array?t[0]:t,r)}}(d()?v:p,document,function(){n.timeEngagedStart||(n.timeEngagedStart=Date.now()),r()})})}return s(e,[{key:"trackEngagedTimeOnPage",value:function(){var e=Date.now()-this.timeEngagedStart-3e3;if(this.timeEngagedStart=null,e>0&&!isNaN(e)){var t={type:"time_on_page_engaged",engaged_time:e};this.callback(t)}}}]),e}(),g=function(){var t,n,i,r,a,o,s,u,c,d,l,h,f,p,v,m;return u={},i=document,d=!1,l="active",o=6e4,a=!1,v={},p="__ceGUID",n={add:function(e,t,n){return e[p]=void 0,e[p]||(e[p]="ifvisible.object.event.identifier"),v[e[p]]||(v[e[p]]={}),v[e[p]][t]||(v[e[p]][t]=[]),v[e[p]][t].push(n)},remove:function(e,t,n){var i,r,a,o,s;if(n){if(e[p]&&v[e[p]]&&v[e[p]][t])for(r=a=0,o=(s=v[e[p]][t]).length;a<o;r=++a)if((i=s[r])===n)return v[e[p]][t].splice(r,1),i}else if(e[p]&&v[e[p]]&&v[e[p]][t])return delete v[e[p]][t]},fire:function(e,t,n){var i,r,a,o,s;if(e[p]&&v[e[p]]&&v[e[p]][t]){for(s=[],r=0,a=(o=v[e[p]][t]).length;r<a;r++)i=o[r],s.push(i(n||{}));return s}}},m=!1,t=function(e,t,n){return m||(m=e.addEventListener?function(e,t,n){return e.addEventListener(t,n,!1)}:e.attachEvent?function(e,t,n){return e.attachEvent("on"+t,n,!1)}:function(e,t,n){return e["on"+t]=n}),m(e,t,n)},s=function(){var e,t,n,r;for(r=3,n=i.createElement("div"),e=n.getElementsByTagName("i"),t=function(){return n.innerHTML="<!--[if gt IE "+ ++r+"]><i></i><![endif]-->",e[0]};t(););return r>4?r:void 0}(),r=!1,f=void 0,void 0!==i.hidden?(r="hidden",f="visibilitychange"):void 0!==i.mozHidden?(r="mozHidden",f="mozvisibilitychange"):void 0!==i.msHidden?(r="msHidden",f="msvisibilitychange"):void 0!==i.webkitHidden&&(r="webkitHidden",f="webkitvisibilitychange"),h=function(){var n,r;return n=[],(r=function(){return n.map(clearTimeout),"active"!==l&&u.wakeup(),a=+new Date,n.push(setTimeout(function(){if("active"===l)return u.idle()},o))})(),t(i,"mousemove",r),t(i,"keyup",r),t(i,"touchstart",r),t(e,"scroll",r),u.focus(r),u.wakeup(r)},c=function(){var n;return!!d||(!1===r?(n="blur",s<9&&(n="focusout"),t(e,n,function(){return u.blur()}),t(e,"focus",function(){return u.focus()})):t(i,f,function(){return i[r]?u.blur():u.focus()},!1),d=!0,h())},u={setIdleDuration:function(e){return o=1e3*e},getIdleDuration:function(){return o},getIdleInfo:function(){var e,t;return e=+new Date,t={},"idle"===l?(t.isIdle=!0,t.idleFor=e-a,t.timeLeft=0,t.timeLeftPer=100):(t.isIdle=!1,t.idleFor=e-a,t.timeLeft=a+o-e,t.timeLeftPer=(100-100*t.timeLeft/o).toFixed(2)),t},focus:function(e){return"function"==typeof e?this.on("focus",e):(l="active",n.fire(this,"focus"),n.fire(this,"wakeup"),n.fire(this,"statusChanged",{status:l})),this},blur:function(e){return"function"==typeof e?this.on("blur",e):(l="hidden",n.fire(this,"blur"),n.fire(this,"idle"),n.fire(this,"statusChanged",{status:l})),this},idle:function(e){return"function"==typeof e?this.on("idle",e):(l="idle",n.fire(this,"idle"),n.fire(this,"statusChanged",{status:l})),this},wakeup:function(e){return"function"==typeof e?this.on("wakeup",e):(l="active",n.fire(this,"wakeup"),n.fire(this,"statusChanged",{status:l})),this},on:function(e,t){return c(),n.add(this,e,t),this},off:function(e,t){return c(),n.remove(this,e,t),this},onEvery:function(e,t){var n,i;return c(),n=!1,t&&(i=setInterval(function(){if("active"===l&&!1===n)return t()},1e3*e)),{stop:function(){return clearInterval(i)},pause:function(){return n=!0},resume:function(){return n=!1},code:i,callback:t}},now:function(e){return c(),l===(e||"active")}}}(),y=function(){function t(e){var n=e.callback;a(this,t),this.callback=n,this.intervals={},this.pingCount=0,this.started=!1,this.init()}return s(t,[{key:"init",value:function(){var t=this;!function(t){var n=!1,i=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",r),e.removeEventListener("load",r)):(document.detachEvent("onreadystatechange",r),e.detachEvent("onload",r))},r=function(){n||!document.addEventListener&&"load"!==event.type&&"complete"!==document.readyState||(n=!0,i(),t())};if("complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState||document.body)t();else if(document.addEventListener)document.addEventListener("DOMContentLoaded",r),e.addEventListener("load",r);else{document.attachEvent("onreadystatechange",r),e.attachEvent("onload",r);var a=!1;try{a=null==e.frameElement&&document.documentElement}catch(e){}a&&a.doScroll&&function e(){if(!n){try{a.doScroll("left")}catch(t){return setTimeout(e,50)}n=!0,i(),t()}}()}}(function(){var e=function(){return t.startPing()},n=function(){return t.stopPing()};e(),g.on("blur",n),g.on("focus",e),g.on("idle",n),g.on("wakeup",e)})}},{key:"startPing",value:function(){var e=this;this.started||(this.started=!0,this.interval=setInterval(function(){e.pingCount+=1,720===e.pingCount&&clearInterval(e.interval),e.trackPingTimeOnPage()},5e3))}},{key:"stopPing",value:function(){this.started=!1,clearInterval(this.interval)}},{key:"trackPingTimeOnPage",value:function(){this.callback({type:"time_on_page_ping"})}}]),t}(),b=function(){function t(e){var n=this,i=e.selector,r=e.callback;a(this,t),this.callback=r,this.node=this.getTrackedNode(i),this.scrollTimeout=null,this.touchEndListener=function(){return n.onScroll()},this.scrollListener=u(function(){return n.onScroll()},200),this.keyDownListener=function(e){return n.onKeyDown(e)},this.thresholds={100:!1,75:!1,50:!1,25:!1,0:!1},this.node&&(this.yPosMax=this.getYPos(),c(function(){n.shouldTrackThreshold(),d()?document.addEventListener("touchend",n.touchEndListener):(document.addEventListener("scroll",n.scrollListener),document.addEventListener("keydown",n.keyDownListener))}))}return s(t,[{key:"getTrackedNode",value:function(t){return t?document.querySelector(t)?document.querySelector(t):e.Knotch.bugsnag.pushBreadCrumb({name:"Node unavailable for scroll depth tracking"}):document.documentElement?document.documentElement:e.Knotch.bugsnag.pushBreadCrumb({name:"Node unavailable for scroll depth tracking"})}},{key:"onScroll",value:function(){this.hasReachedBottomOfContent()&&(document.removeEventListener("scroll",this.scrollListener),document.removeEventListener("keydown",this.keyDownListener),document.removeEventListener("touchend",this.touchEndListener)),this.shouldTrackThreshold()}},{key:"shouldTrackThreshold",value:function(){var t=this,n=100*this.getYPos()/this.node.scrollHeight;for(var i in this.thresholds){var a=parseInt(i,10);if(!this.thresholds[a]&&n>=a){var o=function(){if(t.thresholds[a]=!0,clearTimeout(t.scrollTimeout),t.yPosMax=t.getYPos(),"number"!=typeof t.yPosMax||isNaN(t.yPosMax)||!t.node)return{v:e.Knotch.bugsnag.reportError(new Error("invalid scrolldepth yPosMax"),{data:{yPosMax:t.yPosMax}})};var n=Math.floor(100*t.yPosMax/t.node.scrollHeight);n<1&&(n=1);var i={type:"scroll_depth",scroll_position:t.yPosMax,scroll_pct:n};t.scrollTimeout=setTimeout(function(){return t.callback(i)},100)}();if("object"===r(o))return o.v}}}},{key:"onKeyDown",value:function(e){var t=(e.code||"").toLowerCase();"space"!==t&&"arrowdown"!==t||this.onScroll()}},{key:"getYPos",value:function(){return e.scrollY+e.innerHeight}},{key:"hasReachedBottomOfContent",value:function(){return!!this.node&&this.yPosMax&&this.yPosMax>=this.node.scrollHeight}}]),t}(),k=["textContent","className","id","href"],T=function(){function e(t){var n=this,i=t.callback;a(this,e),this.callback=i,document.addEventListener("click",function(e){return n.handleClick(e)}),document.addEventListener("auxclick",function(e){return n.handleClick(e)})}return s(e,[{key:"checkForHTML",value:function(e){return k.reduce(function(t,n){return t||(i=e[n])&&/<\s?[^\>]*\/?\s?>/.test(i);var i},!1)}},{key:"validateForNull",value:function(e){return k.reduce(function(t,n){return t||!!e[n]},!1)}},{key:"handleClick",value:function(e){var t,n,i,r,a=e.target,o=f(a,"A",3),s=o||a;if(n=s,i=["A","BUTTON","SVG","IMG","SPAN","H1","H2","H3","DIV"],(r=[function(e){return i.indexOf(e.tagName)>-1},function(e){return e.tagName===e.textContent.length<=50},function(e){return"INPUT"===e.tagName&&"submit"===e.type}]).reduce(function(e,t,i){return e||r[i](n)},!1)&&!this.checkForHTML(s)&&this.validateForNull(s)){var u={type:"content_interaction",interaction_type:"click",target_class:s.className,target_id:s.id,target_text:(t=s,"INPUT"===t.tagName?t.value:t.textContent&&t.textContent.trim().substring(0,50)),target_path:l(s),target_url:h(s),target_x:e.pageX,target_y:e.pageY};this.callback(u)}}}]),e}();n.exports={ScrollDepthTracker:b,PingTimeOnPageTracker:y,EngagedTimeOnPageTracker:m,ContentInteractionTracker:T}},{}],20:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){this.config=e||{},this.url="https://notify.bugsnag.com/js?",this.user={},this.device={},this.startTime=(new Date).getTime(),this.breadcrumbs=[{name:"Bugsnag Loaded",timestamp:this.startTime,type:"navigation"}]}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=r(t("./vanillaHelper")),s=30;a.prototype={setUser:function(e){this.user=e},setDevice:function(e){this.device=e},pushBreadCrumb:function(t){t.timestamp=(new Date).getTime(),t.type||(t.type="process"),this.breadcrumbs.push(t),this.breadcrumbs.length>s&&this.breadcrumbs.shift(),e.Knotch&&e.Knotch.debug&&o.default.log(t)},reportError:function(t,n){var i=e.Knotch&&e.Knotch.debug,r=this.config,a=r.env,s=r.version;if("development"===a||"test"===a||i||"development"===s)return void console.error(t);var u=o.default.serialize(this.payloadData(t,n)),c=new Image;c.src=this.url+u},payloadData:function(t,n){if(t)return n||(n={}),{apiKey:"581f50d456b1fa142bae175bdea5d2d8",breadcrumbs:this.breadcrumbs,context:e.location.href,ct:"img",cb:(new Date).getTime(),language:"en-US",message:t.message,metaData:n.data,name:n.name||t.message,notifierVersion:"3.0.7",payloadVersion:"3",releaseStage:this.config.env,severity:n.severity||"error",stacktrace:t.stack,url:e.location.href,user:this.user||n.user,userAgent:navigator.userAgent,appVersion:this.config.version||"dev"}}},self!==top&&(e.bugsnag=new a(e.knotchConfig));var u=a;i.default=u},{"./vanillaHelper":23}],21:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r={set:function(t,n,i,r){var a;return t?(r||(r={}),i&&(a=(new Date).getTime()+1e3*i),e.document.cookie=[encodeURIComponent(t),"=",encodeURIComponent(String(n)),a?"; expires="+new Date(a).toUTCString():"","; path="+(r.path?r.path:"/"),r.domain?"; domain="+r.domain:"",e.location&&"https:"===e.location.protocol?"; secure":""].join("")):null},get:function(t,n){return(n=new RegExp("(?:^|; )"+encodeURIComponent(t)+"=([^;]*)").exec(e.document.cookie))?decodeURIComponent(n[1]):null},delete:function(e,t){r.set(e,null,-1,t)}},a=r;i.default=a},{}],22:[function(t,n,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var r=function(){var t,n,i,r,a,o,s,u,c,d,l,h,f,p;return c={},i=document,l=!1,h="active",s=6e4,o=!1,n=function(){var e,t,n,i,r,a,o;return e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},r=function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},a={},n="__ceGUID",t=function(e,t,i){return e[n]=void 0,e[n]||(e[n]="ifvisible.object.event.identifier"),a[e[n]]||(a[e[n]]={}),a[e[n]][t]||(a[e[n]][t]=[]),a[e[n]][t].push(i)},i=function(e,t,i){var r,o,s,u,c;if(e[n]&&a[e[n]]&&a[e[n]][t]){for(u=a[e[n]][t],c=[],o=0,s=u.length;o<s;o++)r=u[o],c.push(r(i||{}));return c}},o=function(e,t,i){var r,o,s,u,c;if(i){if(e[n]&&a[e[n]]&&a[e[n]][t])for(c=a[e[n]][t],o=s=0,u=c.length;s<u;o=++s)if(r=c[o],r===i)return a[e[n]][t].splice(o,1),r}else if(e[n]&&a[e[n]]&&a[e[n]][t])return delete a[e[n]][t]},{add:t,remove:o,fire:i}}(),t=function(){var e;return e=!1,function(t,n,i){return e||(e=t.addEventListener?function(e,t,n){return e.addEventListener(t,n,!1)}:t.attachEvent?function(e,t,n){return e.attachEvent("on"+t,n,!1)}:function(e,t,n){return e["on"+t]=n}),e(t,n,i)}}(),r=function(e,t){var n;return i.createEventObject?e.fireEvent("on"+t,n):(n=i.createEvent("HTMLEvents"),n.initEvent(t,!0,!0),!e.dispatchEvent(n))},u=function(){var e,t,n,r,a;for(r=void 0,a=3,n=i.createElement("div"),e=n.getElementsByTagName("i"),t=function(){return n.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",e[0]};t(););return a>4?a:r}(),a=!1,p=void 0,"undefined"!=typeof i.hidden?(a="hidden",p="visibilitychange"):"undefined"!=typeof i.mozHidden?(a="mozHidden",p="mozvisibilitychange"):"undefined"!=typeof i.msHidden?(a="msHidden",p="msvisibilitychange"):"undefined"!=typeof i.webkitHidden&&(a="webkitHidden",p="webkitvisibilitychange"),f=function(){var n,r;return n=[],r=function(){return n.map(clearTimeout),"active"!==h&&c.wakeup(),o=+new Date,n.push(setTimeout(function(){if("active"===h)return c.idle()},s))},r(),t(i,"mousemove",r),t(i,"keyup",r),t(i,"touchstart",r),t(e,"scroll",r),c.focus(r),c.wakeup(r)},d=function(){var n;return!!l||(a===!1?(n="blur",u<9&&(n="focusout"),t(e,n,function(){return c.blur()}),t(e,"focus",function(){return c.focus()})):t(i,p,function(){return i[a]?c.blur():c.focus()},!1),l=!0,f())},c={setIdleDuration:function(e){return s=1e3*e},getIdleDuration:function(){return s},getIdleInfo:function(){var e,t;return e=+new Date,t={},"idle"===h?(t.isIdle=!0,t.idleFor=e-o,t.timeLeft=0,t.timeLeftPer=100):(t.isIdle=!1,t.idleFor=e-o,t.timeLeft=o+s-e,t.timeLeftPer=(100-100*t.timeLeft/s).toFixed(2)),t},focus:function(e){return"function"==typeof e?this.on("focus",e):(h="active",n.fire(this,"focus"),n.fire(this,"wakeup"),n.fire(this,"statusChanged",{status:h})),this},blur:function(e){return"function"==typeof e?this.on("blur",e):(h="hidden",n.fire(this,"blur"),n.fire(this,"idle"),n.fire(this,"statusChanged",{status:h})),this},idle:function(e){return"function"==typeof e?this.on("idle",e):(h="idle",n.fire(this,"idle"),n.fire(this,"statusChanged",{status:h})),this},wakeup:function(e){return"function"==typeof e?this.on("wakeup",e):(h="active",n.fire(this,"wakeup"),n.fire(this,"statusChanged",{status:h})),this},on:function(e,t){return d(),n.add(this,e,t),this},off:function(e,t){return d(),n.remove(this,e,t),this},onEvery:function(e,t){var n,i;return d(),n=!1,t&&(i=setInterval(function(){if("active"===h&&n===!1)return t()},1e3*e)),{stop:function(){return clearInterval(i)},pause:function(){return n=!0},resume:function(){return n=!1},code:i,callback:t}},now:function(e){return d(),h===(e||"active")}}}();i.default=r},{}],23:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return c(e)||u(e)||s()}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function u(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function c(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var d=r(t("./Cookies.js"));!function(){function t(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i?this:e,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(i.prototype=this.prototype),r.prototype=new i,r}),e.requestAnimFrame=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}(),"function"!=typeof e.CustomEvent&&(t.prototype=e.Event.prototype,e.CustomEvent=t)}();var l={getNodeDescription:function(e){if(!e)return null;var t=e.tagName;return e.id&&(t+="#".concat(e.id)),e.className&&e.className.length&&(t+=e.className.split(" ").join(".")),t},getQueryParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getBrowserURL(),t=e.split("?")[1],n=t?t.split("&"):[];return n.reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{})},getSentimentType:function(e){if("number"!=typeof e)return null;var t="";return e>10?t="positive":10===e?t="neutral":e<10&&(t="negative"),t},log:function(){var e=["%cJS Tag","color: #fb1359; background: #ffcad4; padding: 4px"].concat(o(Array.prototype.slice.call(arguments)));console.log.apply(console,e)},isMobile:function(){return"ontouchstart"in e||navigator.msMaxTouchPoints||navigator.userAgent.indexOf("IEMobile")!==-1},isEmptyObject:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},isValidNumber:function(e){return"number"==typeof e&&!isNaN(e)},isValidTagId:function(e){var t=/^[A-F\d]{8}-[A-F\d]{4}-4[A-F\d]{3}-[89AB][A-F\d]{3}-[A-F\d]{12}$/i;return e&&"string"==typeof e&&e.length>0&&(t.test(e)||e.match(/^[0-9a-fA-F]{24}$/))},isTopFrame:function(){return e.top===e},inKnotchPage:function(){var e=["views/unit.html","assets.knotch.host","www.knotch-cdn.com","/survey/"];return e.reduce(function(e,t){return e||location.href.indexOf(t)!==-1},!1)},inDevTestPage:function(){var t=e.location.hostname.indexOf("knotch.test")!==-1,n="test"===e.Knotch.config.env||"development"===e.Knotch.config.env;if(t&&n)return!0},isDemo:function(){var e=l.getScriptFlag("demo"),t="true"===d.default.get("knotch_demo");return!(!e&&!t)},isDebug:function(){var e=!this.isTopFrame()&&document.referrer?document.referrer:this.getBrowserURL(),t=Object.keys(this.getQueryParams(e)),n=t.indexOf("knotch_debug");return n!==-1||l.getScriptFlag("debug")},isAnalysis:function(){var e=!this.isTopFrame()&&document.referrer?document.referrer:this.getBrowserURL(),t=Object.keys(this.getQueryParams(e)),n=t.indexOf("knotch_analysis");return n!==-1||l.getScriptFlag("analysis")},getAccountId:function(){return l.getScriptAttribute("data-account")},getScriptFlag:function(e){try{var t=document.querySelector('script[src*="knotch"]')||document.currentScript,n=""===t.getAttribute(e),i="true"===t.getAttribute(e)||"1"===t.getAttribute(e);return n||i}catch(e){return!1}},getScriptAttribute:function(e){try{var t,n=document.currentScript,i=document.querySelector('script[src*="knotch.js"]'),r=document.querySelector('script[src*="knotch.min.js"]');if(i)t=i;else if(r)t=r;else{if(!n)return Knotch.debug.reportError(new Error("script not found"));t=n}return t.getAttribute(e)}catch(e){return!1}},getRelativePath:function(){var e,t=this.getScriptAttribute("src");t.indexOf("knotch.js")>-1?e=t.indexOf("knotch.js"):t.indexOf("knotch.min.js")>-1?e=t.indexOf("knotch.min.js"):Knotch.bugsnag.reportError(new Error("knotch script not on page"));var n=t.slice(0,e);return n},getReferrer:function(){return l.isTopFrame()?document.querySelector("link[rel=canonical]")?document.querySelector("link[rel=canonical]").getAttribute("href"):e.location.origin+e.location.pathname:this.localData.referrer=document.referrer},validateURL:function(e){return/^((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/.test(e)},getCanonicalURL:function(){var e=document.querySelector("meta[property='og:url']"),t=document.querySelector("link[rel=canonical]"),n=document.querySelector("meta[name='canonical']");if(t&&t.getAttribute("href")&&t.getAttribute("href").length>0){var i=t.getAttribute("href");if(this.validateURL(i))return i}if(e&&e.getAttribute("content")&&e.getAttribute("content").length>0){var r=e.getAttribute("content");if(this.validateURL(r))return r}if(n&&n.getAttribute("content")&&n.getAttribute("content").length>0){var a=n.getAttribute("content");if(this.validateURL(a))return a}return null},getBrowserURL:function(){var t=null;return document.URL?t=document.URL:e.location.href?t=e.location.href:e.location.host&&e.location.pathname&&(t="".concat(e.location.protocol,"//").concat(e.location.host).concat(e.location.pathname)),t?t:(e.Knotch.bugsnag.reportError(new Error("browser URL doesn't exist"),this.localData),null)},show:function(e){e&&(e.style.display="block")},hide:function(e){e&&(e.style.display="none")},hasClass:function(e,t){return!!e&&(e.classList&&e.classList.contains(t))},addClass:function(e,t){if(e)if(e instanceof NodeList||e instanceof HTMLCollection)for(var n=0,i=e.length;n<i;n++)this.hasClass(e[n],t)||e[n].classList.add(t);else e.classList.add(t)},removeClass:function(e,t){if(e)if(e instanceof NodeList||e instanceof HTMLCollection)for(var n=0,i=e.length;n<i;n++)this.hasClass(e[n],t)&&e[n].classList.remove(t);else e.classList.remove(t)},removeNode:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},has3dSupport:function(){var t=navigator.userAgent,n=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(null!==n.exec(t)){var i=parseFloat(RegExp.$1);return i>10}var r,a=document.createElement("p"),o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(a,null);for(var s in o)if(void 0!==a.style[s]){a.style[s]="translate3d(1px,1px,1px)";var u=e.getComputedStyle(a);r=u&&u.getPropertyValue(o[s])}return document.body.removeChild(a),r&&r.length>0&&"none"!==r},fadeIn:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;if(t){t.style.opacity=0,t.style.display="block";var i=+new Date,r=function r(){t.style.opacity=+t.style.opacity+(new Date-i)/n,i=+new Date,+t.style.opacity<1?e.requestAnimationFrame&&e.requestAnimationFrame(r)||setTimeout(r,16):t.style.opacity=1};r()}},fadeOut:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;if(t){t.style.opacity=1;var i=+new Date,r=function r(){t.style.opacity=+t.style.opacity-(new Date-i)/n,i=+new Date,+t.style.opacity>0?e.requestAnimationFrame&&e.requestAnimationFrame(r)||setTimeout(r,16):(t.style.opacity=0,t.style.display="none")};r()}},get:function(t,n,i,r){var a,o="undefined"!=typeof XMLHttpRequest.DONE?XMLHttpRequest.DONE:4;return a=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.onerror=function(){return a.status>=500&&Knotch.bugsnag.reportError(new Error(a.responseText),{name:"".concat(a.status," request error"),data:n}),!1},a.onreadystatechange=function(){if(a.readyState===o)if(200===a.status){var e=a.responseText;if(e)try{var n=JSON.parse(e)}catch(n){Knotch.bugsnag.reportError(n,{name:"failed to parse request response",data:{responseText:e,url:t}})}i(n)}else a.status>=500&&r(a.status,a.statusText,a.readyState,a.responseText,a.getAllResponseHeaders())},a.open("GET",t,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send(JSON.stringify(n)),a},post:function(t,n,i,r){var a,o="undefined"!=typeof XMLHttpRequest.DONE?XMLHttpRequest.DONE:4;return a=e.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),a.onloadend=function(){return a.status>=400&&Knotch.bugsnag.reportError(new Error(a.responseText),{name:"404 - not found",data:n}),!1},a.onerror=function(){return a.status>=500&&Knotch.bugsnag.reportError(new Error(a.responseText),{name:"".concat(a.status," request error"),data:n}),!1},a.onreadystatechange=function(){if(a.readyState===o){var e=a.responseText;if(e&&!e.match(/</))try{var n=JSON.parse(e)}catch(n){Knotch.bugsnag.reportError(n,{name:"failed to parse request response",data:{responseText:e,url:t}})}200===a.status?i(n):a.status>=400?r(a.status,a.statusText):0===a.stats&&r(a.status,a.statusText)}},a.open("POST",t,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.send(JSON.stringify(n)),a},onEvent:function(e,t,n){function i(e,t){for(var i=0;i<t.length;i++)try{e.addEventListener?e.addEventListener(t[i],n,!1):e.attachEvent&&e.attachEvent("on".concat(t[i]),n)}catch(n){Knotch.bugsnag.reportError(n,{name:"Error while attaching event listener",data:{node:e,events:t}})}}if(t){var r=null;if(r=Array.isArray(e)&&e.length>0?e:[e],t instanceof NodeList||t instanceof HTMLCollection){t.length||(t=[t]);for(var a=0;a<t.length;a++)i(t[a],r)}else{var o=t instanceof Array?t[0]:t;i(o,r)}}},offEvent:function(t,n,i){var r=[t];if(t.split(" ").length>1&&(r=t.split(" ")),n)if(n!==e){n.length||(n=[n]);for(var a=n.length,o=0;o<a;o++)for(var s=0;s<r.length;s++)try{if(1===n.length,n[o].removeEventListener)return n[o].removeEventListener(r[s],i,!1),!0;if(n[o].detachEvent)return n[o].detachEvent("on".concat(r[s]),i)}catch(e){Knotch.bugsnag.reportError(e,{name:"Error while detaching event listener",data:{nodeList:n,events:r}})}}else try{for(var s=0;s<r.length;s++)e.top.removeEventListener?e.top.removeEventListener(r[s],i,!1):e.top.detachEvent&&e.top.detachEvent("on".concat(r[s]),i)}catch(e){Knotch.bugsnag.reportError(e,{name:"Error while detaching event listener",data:{nodeList:n,events:r}})}},trigger:function(t,n,i){var r=null;e.CustomEvent?r=new CustomEvent(n,i):(r=document.createEvent("CustomEvent"),r.initCustomEvent(n,!0,!0,i)),t.dispatchEvent(r)},parents:function(e,t){var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;for(e=e.parentElement;e&&!n.call(e,t);)e=e.parentElement;return e},animate:function(e,t,n,i){e.style.transition="all ".concat(n/1e3,"s ease-out"),Object.keys(t).forEach(function(n){e.style[n]=t[n]}),i&&setTimeout(function(){e.removeAttribute("style")},n)},ready:function t(n){var t=!1,i=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",r),e.removeEventListener("load",r)):(document.detachEvent("onreadystatechange",r),e.detachEvent("onload",r))},r=function(){t||!document.addEventListener&&"load"!==event.type&&"complete"!==document.readyState||(t=!0,i(),n())};if("complete"!==document.readyState&&"loaded"!==document.readyState||!document.body)if(document.addEventListener)document.addEventListener("DOMContentLoaded",r),e.addEventListener("load",r);else{document.attachEvent("onreadystatechange",r),e.attachEvent("onload",r);var a=!1;try{a=null==e.frameElement&&document.documentElement}catch(e){}a&&a.doScroll&&!function e(){if(!t){try{a.doScroll("left")}catch(t){return setTimeout(e,50)}t=!0,i(),n()}}()}else e.Knotch&&e.Knotch.bugsnag.pushBreadCrumb({name:"calling callback because one of the following is true ",metaData:{documentReadyStateComplete:"complete"===document.readyState,documentReadyStateLoaded:"loaded"===document.readyState,documentReadyStateInteractive:"interactive"===document.readyState,documentBody:document.body}}),n()},extend:function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e},listen:function(e,t,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent(e,n)},scrollToY:function(t,n,i){function r(){o+=1/60;var n=o/s,c=u[i](n);n<1?(requestAnimFrame(r),e.scrollTo(0,a+(t-a)*c)):e.scrollTo(0,t)}var a=e.scrollY||document.documentElement.scrollTop,t=t||0,n=n||2e3,i=i||"easeOutSine",o=0,s=Math.max(.1,Math.min(Math.abs(a-t)/n,.8)),u={easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)}};r()},isChildOf:function(e,t){for(;(e=e.parentNode)&&e!==t;);return!!e},serialize:function(e,t){var n,i=[];for(n in e)if(e.hasOwnProperty(n)){var r=t?"".concat(t,"[").concat(n,"]"):n,o=e[n];i.push(null!==o&&"object"===a(o)?this.serialize(o,r):"".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(o)))}return i.join("&")},extractIdFromNode:function(e){if(!e)return null;var t=e.getAttribute("class");if(!t||t.length<1||"string"!=typeof t)return null;var n=t.split(" "),i=n.filter(function(e){return e.indexOf("knotch_")!==-1&&"knotch_placeholder"!==e})[0];if(!i)return null;var r=i.split("_")[1];return r?r:null},stringContains:function(e,t){return e&&e.length&&t&&t.length?e.indexOf(t)!==-1:null},debounce:function(e,t){var n;return function(){var i=this,r=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(i,r)},t)}},getLargestZIndex:function(t){var n,i=null,r=[];if(document.createTreeWalker){for(var a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,null,!1);n=a.nextNode();){var o=parseInt(e.getComputedStyle(n).zIndex,10);if(o&&o>-1){var s=parseInt(e.getComputedStyle(n).zIndex,10);r.push(s)}}if(0===r.length)return null;i=r.reduce(function(e,t){return Math.max(e,t)})}else for(var u=parent.children,c=0;c<u.length;c++){var d=parseInt(e.getComputedStyle(u[c]).zIndex,10);d>i&&(i=d+1)}return i},isStandalone:function(e){return!!e&&(l.isTopFrame()&&l.inKnotchPage()&&"inline"===e.layout&&null===e.videoType)},isValidSentimentValue:function(e){var t=parseInt(e,10);return"undefined"!=typeof e&&!Number.isNaN(t)&&[0,4,10,16,20].indexOf(t)!==-1}},h=l;i.default=h},{"./Cookies.js":21}],24:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("@knotchlabs/nodefinder")),c=r(t("../helpers/vanillaHelper.js")),d=t("./SmartUnitUtils.js"),l=function(){function t(e){var n=e.accountId,i=e.knotchConfig,r=e.bugsnag,o=e.debug;a(this,t),this.accountId=n,this.config=i,this.bugsnag=r,this.debug=o,this.smartUnitTracker=null,this.init()}return s(t,[{key:"init",value:function(){var t=this;c.default.ready(function(){e.localURLToUnitList?t.startNodefinder(e.localURLToUnitList):(0,d.getUnitList)(t.accountId,function(e){t.startNodefinder(e)})})}},{key:"startNodefinder",value:function(e){var t=this;this.smartUnitTracker=(0,u.default)({accountId:this.accountId,inject:d.inject,pageValidate:function(e,n){return(0,d.bypassSurveylessUnit)(e,n,t.bugsnag)},urlMap:e,bugsnag:this.bugsnag,debug:this.debug})}}]),t}(),h=l;i.default=h},{"../helpers/vanillaHelper.js":23,"./SmartUnitUtils.js":25,"@knotchlabs/nodefinder":17}],25:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(i,"__esModule",{value:!0}),i.bypassSurveylessUnit=i.getUnitList=i.testInject=i.inject=void 0;var a=r(t("../helpers/vanillaHelper.js")),o=t("../../../tmp/config.js"),s=function(t){var n=t.pageNode,i=t.lastParagraphNode,r=t.urlMap,s=t.url,u=t.injectedCallback,c=t.unbindListeners,d=t.bugsnag,l=t.videoPlayer,h=t.knotchPlaceholder,f=r[s];if(!f||!f.length)return c&&c(),d.pushBreadCrumb({name:"No placeholder ID found for this URL, URL is not linked.",unitsForPage:f});var p=f[0],v=function(e){if(null!==e.videoType){if(!l)return d.reportError(new Error("did not receive video player from nodefinder",{data:{url:s}}));l.setAttribute("data-knotch",p)}else{if(document.querySelector(".knotch_".concat(p))&&(d.pushBreadCrumb({name:"Unit already found on the page",unitsForPage:f}),n))return c();if(h&&h.className.indexOf("knotch_".concat(p))===-1)return h.className+=" knotch_".concat(p),h.setAttribute("style","clear: both;"),void d.pushBreadCrumb({name:"injecting unit into generic smartunit placeholder"});var t=document.createElement("div");if(t.setAttribute("class","knotch_".concat(p)),t.setAttribute("style","clear: both;"),!i)return c(),d.reportError(new Error("Last paragraph node could not be found"),{data:{url:s}});i.insertAdjacentElement("afterend",t),u(),c(),d.pushBreadCrumb({name:"Appended placeholder to page body",metaData:{tagName:i.tagName,class:i.className,id:i.id}})}};e.knotchData.units&&e.knotchData.units[p]?v(e.knotchData.units[p]):a.default.get("".concat(o.knotchConfig.metadata,"/").concat(p,".json"),{},function(t){e.knotchData.units[t.public_id]=t,v(t)})};i.inject=s;var u=function(e){var t=e.pageBodyNode,n=e.lastParagraphNode,i=e.injectedCallback,r=e.unbindListeners,a=e.knotchPlaceholder,o=document.createElement("div");if(o.setAttribute("class","knotch_unit"),o.setAttribute("style","clear: both; background-color: pink; height: 200px; text-align: center;"),o.innerText="KNOTCH SMART UNIT",a)document.querySelector(".knotch_unit")||(o.style.height=a.getAttribute("data-height"),o.style.width=a.getAttribute("data-width"),a.appendChild(o));else{if(!t)return alert("Page is not smart unit compatible");if(t.querySelector(".knotch_unit"))return t.querySelector(".knotch_unit")?(r(),alert("knotch unit already on page")):(r(),alert("page not compatible"));n.insertAdjacentElement("afterend",o),i(),r(),o.scrollIntoView(),alert("Succesfully appended smart unit to page body")}};i.testInject=u;var c=function(t,n){return t?e.urlMap?e.urlMap:(e.Knotch.bugsnag.pushBreadCrumb({name:"Fetching Unit to URL map"}),void a.default.get("https://units.knotch.it/url-map/".concat(t,".json"),null,function(t){return t&&!a.default.isEmptyObject(t)?n(t):e.Knotch.bugsnag.pushBreadCrumb({name:"Empty or invalid URL map provided",metaData:{data:t}})},function(n,i,r,a,o){e.Knotch.bugsnag.reportError(new Error("Failed to fetch unit list"),{data:{status:n,statusText:i,readyState:r,responseText:a,responseHeaders:o,accountId:t,url:"https://units.knotch.it/url-map/".concat(t,".json")}})})):e.Knotch.bugsnag.reportError(new Error("No account ID provided"),t)};i.getUnitList=c;var d=function(t,n,i){if(e.knotchData.units&&e.knotchData.units[t]){var r=e.knotchData.units[t];if(r&&r.surveyless){var s=document.createElement("div");return s.setAttribute("class","knotch_".concat(t)),document.body.appendChild(s),n(!1)}return n(!0)}a.default.get("".concat(o.knotchConfig.metadata,"/").concat(t,".json"),{},function(i){var r=i;if(e.knotchData.units[i.public_id]=i,r&&r.surveyless){var a=document.createElement("div");return a.setAttribute("class","knotch_".concat(t)),document.body.appendChild(a),n(!1)}return n(!0)},function(e,r,a,o,s){return i.reportError(r,{data:{id:t,readyState:a,responseText:o,responseHeaders:s,status:e},severity:"info"}),n(!1)})};i.bypassSurveylessUnit=d},{"../../../tmp/config.js":55,"../helpers/vanillaHelper.js":23}],26:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function u(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var c=t("../../../tmp/config"),d=r(t("../helpers/vanillaHelper")),l=function(){function t(n){o(this,t),this.iframe=this.createFrame(n),this.ready=!1,this.inIframe=n.inIframe,this.units={},this.queue=[],e.Knotch.bugsnag.pushBreadCrumb({name:"Added reporter"})}return u(t,[{key:"createFrame",value:function(e){var t=e.debug,n=document.createElement("iframe"),i=c.knotchConfig.reporter;return t&&(i+="?debug=true"),d.default.extend(n,{name:"measurementKnotchReporter",title:"Knotch Reporter Frame",src:i,frameBorder:"0",display:"none",id:"measurementKnotchReporter",width:"0",height:"0",ariaHidden:!0}),n.style.display="none",d.default.ready(function(){return document.body.appendChild(n)}),n}},{key:"init",value:function(){this.ready=!0,this.flush()}},{key:"flush",value:function(){for(var e=this.queue.length,t=0;t<e;t++){var n=this.queue.pop();this.send(n)}}},{key:"getPagePayload",value:function(){var t={content_type:"web",browser_url:document.referrer,user_agent:e.navigator.userAgent,unit_type:"iframe",unit_version:c.knotchConfig.version};return this.inIframe||d.default.extend(t,this.getDynamicPagePayload()),t}},{key:"getDynamicPagePayload",value:function(){var e={unit_type:"jstag"};return d.default.extend(e,{browser_url:d.default.getBrowserURL(),canonical_url:d.default.getCanonicalURL(),referrer_url:document.referrer}),document.body&&d.default.extend(e,{content_height:document.body.scrollHeight,content_width:document.body.scrollWidth}),e}},{key:"initUnit",value:function(t){var n=t.config&&t.config.thirdPartyPixels,i={organization_id:t.organizationId,survey_language:t.languageCode,survey_type:null!==t.videoType?"video":"article",survey_variation:t.public_id,survey_id:t.public_id},r=this.getPagePayload(),a=d.default.extend({},r,i);this.send({eventType:"updateUnitData",data:a,surveyId:t.public_id,productType:"measurement"}),n&&n.length&&(e.Knotch.bugsnag.pushBreadCrumb({name:"Sending third party pixel to reporter",metaData:t}),this.send({eventType:"thirdPartyPixel",data:n,surveyId:t.public_id,productType:"measurement"}))}},{key:"send",value:function(t){if(!this.iframe||!this.iframe.contentWindow||!this.ready)return e.Knotch.bugsnag.pushBreadCrumb({name:"iframe not ready yet",event:t.eventType,payloadType:t.data.type}),this.queue.push(t);var n=a(this.iframe.contentWindow.postMessage);return"function"!==n?(e.Knotch.bugsnag.pushBreadCrumb({name:"postMessage should be a function"}),this.queue.push(t)):t.eventType?void this.iframe.contentWindow.postMessage(t,c.knotchConfig.reporter):e.Knotch.bugsnag.pushBreadCrumb({name:"payload must have an eventType"})}},{key:"sendUnitEvent",value:function(e){var t=e.data,n=e.surveyId,i=e.timer,r=this.inIframe?{}:this.getDynamicPagePayload(),a=d.default.extend({},r,t,{timer:i});this.send({eventType:"unitEvent",data:a,surveyId:n,productType:"measurement"})}}]),t}(),h=l;i.default=h},{"../../../tmp/config":55,"../helpers/vanillaHelper":23}],27:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.PLACEHOLDER_CHECK_OPTIONS=void 0;var i={startInterval:200,startExpIndex:1,countsToIncrease:10,maxTime:18e5,autoStart:!0};n.PLACEHOLDER_CHECK_OPTIONS=i},{}],28:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){this.isMobile=o.default.isMobile(),this.isVideo=null!==t.videoType,this.videoType=this.isVideo&&t.videoType,this.isInIframe=!o.default.isTopFrame(),this.inKnotchPage=o.default.inKnotchPage(),this.inDevTestPage=o.default.inDevTestPage(),this.inGenerator=o.default.getScriptFlag("generator"),this.isValid=!0,this.data=t,this.node=e,this.parentNode=e.parentNode,this.container=document.querySelector(".knotch_".concat(t.public_id)),this.iframe=document.createElement("iframe"),this.iframe.frameBorder="0",this.iframe.title="Feedback Question By Knotch",this.iframe.id="knotchframe_".concat(t.public_id),this.setup(),this.trackRemoval()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=r(t("../../helpers/vanillaHelper.js")),s=r(t("../../helpers/Cookies.js")),u=t("../../../../tmp/config.js"),c={BRIGHTCOVE:0,YOUTUBE:1,VIMEO:2,OOYALA:3,NYLON:4,HTML5:5,JWPLAYER:7,VPAID:8,WISTIA:9,FAVE:10,SMPLAYER:11},d=[c.YOUTUBE,c.VIMEO,c.VPAID,c.BRIGHTCOVE],l={width:"100%",height:"100%",position:"absolute",top:0,left:0},h={borderRadius:"6px"},f="100%",p="320px";a.prototype={trackRemoval:function(){var t=this;if(e.MutationObserver){var n=new MutationObserver(function(n,i){n.forEach(function(n){var r=[].slice.call(n.removedNodes),a=r.indexOf(t.iframe)>-1,o=r.filter(function(e){return e.contains(t.iframe)}),s=o.length>0;a||!e.Knotch.units[t.data.public_id]?(i.disconnect(),e.Knotch.bugsnag.pushBreadCrumb({name:"Knotch Unit was removed"})):s&&(i.disconnect(),e.Knotch.bugsnag.pushBreadCrumb({name:"Knotch Unit Placeholder was removed"}),e.Knotch.bugsnag.pushBreadCrumb({name:"Reinjecting Knotch Unit Placeholder"}),t.parentNode.appendChild(o[0]),t.injectIframe())})});n.observe(this.container.parentNode,{subtree:!0,childList:!0})}},setup:function(){if(null!==this.node.querySelector("[id^=knotchframe_]"))return this.isValid=!1,e.Knotch.bugsnag.pushBreadCrumb({name:"A unit already exists"});o.default.onEvent("touchstart",this.iframe,function(e){return e.preventDefault()});var t=o.default.hasClass(this.node,"knotchArticleEmbed"),n=o.default.hasClass(this.node,"knotchVideoEmbed"),i=this.isVideo&&t||!this.isVideo&&n,r=d.indexOf(this.videoType)!==-1;if(this.inGenerator||this.isInIframe||r)e.Knotch.bugsnag.pushBreadCrumb({name:"Bypassing mismatch check ".concat(this.data.public_id)});else if(i)return this.isValid=!1,e.Knotch.bugsnag.pushBreadCrumb({name:"Mismatch between data & integration ".concat(this.data.public_id)});return this.isInIframe&&(this.inKnotchPage||this.inDevTestPage||this.inGenerator)?this.inKnotchIframe():this.inKnotchPage?this.onKnotchPage():this.onClientPage(),this.isValid?this.node.appendChild(this.iframe):e.Knotch.bugsnag.pushBreadCrumb({name:"Invalid unit integration: ".concat(this.data.public_id)})},getIframe:function(){return this.isValid?this.iframe:null},inKnotchIframe:function(){this.setLang(),this.isVideo&&!this.inGenerator&&this.createVidContainer(),o.default.extend(this.iframe.style,l);var e=document.querySelector(".centerContainer");e&&o.default.extend(e.style,{width:"100%",height:"100%",margin:0,top:0,left:0});var t=document.querySelector("#knotchFullPage > .overlay");document.getElementById("knotchFullPage").style.position="absolute",t&&o.default.removeNode(t)},injectIframe:function(){var t,n=document.querySelector(".knotch_".concat(this.data.public_id)),i=n.getAttribute("data-layout"),r=o.default.getQueryParams();try{t=JSON.stringify(this.data)}catch(t){return e.Knotch.bugsnag.reportError(t)}var a=e.knotchData.themes&&e.knotchData.themes[this.data.themeId],c={knotchedSentiment:s.default.get("knotched:".concat(this.data.public_id)),followedUp:s.default.get("followup:".concat(this.data.public_id)),isMobile:e.Knotch.isMobile,isDemo:e.Knotch.demo,survey:t,inGenerator:this.inGenerator,customLayout:JSON.stringify(i),knotchConfig:JSON.stringify(u.knotchConfig),standalone:o.default.isStandalone(this.data)};a&&(c.theme=JSON.stringify(a)),o.default.isTopFrame()&&o.default.inKnotchPage()&&r.ext_knotch_stm&&(c.externalKnotchSentiment=r.ext_knotch_stm);var d="";for(var l in c)d+="".concat("<script> window.").concat(l," = ").concat(c[l],"</scr")+"ipt>";var h=o.default.getRelativePath(),f="".concat(d).concat("<scri"+"pt src=".concat(h).concat(JSON.parse(c.knotchConfig).measurementUnit,">  </scri")+"pt>"),p=this.getIframeDoc();if(p){e.Knotch.bugsnag.pushBreadCrumb({name:"Injecting template in iframe  ".concat(this.data.public_id)});try{p.open(),p.writeln(f),p.close()}catch(t){e.Knotch.bugsnag.reportError(t)}}else e.Knotch.bugsnag.pushBreadCrumb({name:"Unable to find iFrame's document ".concat(this.data.public_id)})},setLang:function(){document.documentElement.setAttribute("lang",this.data.languageCode)},onKnotchPage:function(){this.setLang(),o.default.extend(this.iframe.style,l),this.isMobile?o.default.extend(this.container.style,l):"inline"!==this.data.layout&&o.default.extend(this.iframe.style,h),this.isVideo&&this.createVidContainer(),this.setupOwnedPageStyle(this.data)},onClientPage:function(){this.isVideo?this.onClientPageVideo():this.onClientPageArticle()},setupOwnedPageStyle:function(){var e=document.getElementById("knotchFullPage"),t=this.data;e&&t&&(t.imageUrl&&o.default.extend(e.style,{backgroundImage:"url(".concat(t.imageUrl,")")}),t.bgcolor&&(o.default.extend(e.style,{backgroundColor:t.bgcolor}),document.querySelector(".overlay").style.opacity="0.5"))},setThemeBackground:function(e){var t=e.global,n=t.bgColor,i=t.bgOverlay,r=t.bgImage,a=document.getElementById("knotchFullPage"),s=document.querySelector(".overlay"),u=this.data.imageUrl||this.data.bgcolor;a&&!u&&(r?(o.default.extend(a.style,{backgroundImage:"url(".concat(r,")")}),o.default.extend(s.style,{backgroundColor:i})):n&&(o.default.extend(a.style,{backgroundColor:n}),document.querySelector(".overlay").style.opacity="0"))},createVidContainer:function(){if(d.indexOf(this.videoType)!==-1){var e=document.createElement("div");e.id="knotchVideo",e.frameBorder="0",e.setAttribute("data-knotch",this.data.public_id),o.default.extend(this.container.style,l,{zIndex:-1,display:"none"}),o.default.extend(e.style,l,{zIndex:1}),this.node.parentNode.insertBefore(e,this.node)}},onClientPageArticle:function(){var e=f,t=p;this.node.hasAttribute("data-width")&&(e=this.node.getAttribute("data-width").match(/[\d\.]+(%|px)/g)),this.node.hasAttribute("data-height")&&(t=this.node.getAttribute("data-height").match(/[\d\.]+(%|px)/g)),o.default.extend(this.iframe.style,{width:e,height:t,margin:"18px auto",display:"block"})},onClientPageVideo:function(){var t=this,n=this.container.parentNode,i=document.querySelector('[data-knotch="'.concat(this.data.public_id,'"]'));if(this.videoType===c.BRIGHTCOVE&&(i=document.querySelector('video[data-knotch="'.concat(this.data.public_id,'"]'))||document.querySelector('[data-knotch="'.concat(this.data.public_id,'"]'))),!i)return void(this.isValid=!1);var r=e.getComputedStyle(n).position;"static"!==r&&""!==r||(n.style.position="relative");var a=i.offsetTop>-1?"".concat(i.offsetTop,"px"):0,s=i.offsetLeft>-1?"".concat(i.offsetLeft,"px"):0,u=e.getComputedStyle(i).transform||"none";o.default.extend(this.container.style,l,{zIndex:-1,display:"none"});var d=this.getUnitContainerSizing(i),h={top:a,left:s,height:"100%"},f=function(e){switch(e){case c.YOUTUBE:return{top:a,left:s,height:d.height,width:d.width,transform:u,maxWidth:d.maxWidth,maxHeight:d.maxHeight};default:return{top:a,left:s,maxWidth:d.maxWidth,maxHeight:d.maxHeight}}};o.default.extend(this.container.style,f(this.videoType)||h),o.default.extend(this.iframe.style,{height:"100%",width:"100%",maxWidth:d.width,maxHeight:d.height,margin:"auto",display:"none"}),o.default.onEvent("resize",e,o.default.debounce(function(){var e=t.getUnitContainerSizing(i),n={width:e.width,height:e.height,maxWidth:e.maxWidth,maxHeight:e.maxHeight};o.default.extend(t.container.style,n),o.default.extend(t.iframe.style,n)},500))},getUnitContainerSizing:function(e){var t={width:"100%",height:"100%"},n=getComputedStyle(e),i=n.width,r=n.height,a=e.getBoundingClientRect(),o=e.width,s=e.offsetWidth,u=e.height,c=e.offsetHeight;return i&&parseInt(i,10)>0?t.maxWidth=i:o?t.maxWidth="".concat(o,"px"):s>0?t.maxWidth="".concat(s,"px"):a.width&&(t.maxWidth="".concat(a.width,"px")),r&&parseInt(r,10)>0?t.maxHeight=r:u?t.maxHeight="".concat(u,"px"):c>0?t.maxHeight="".concat(c,"px"):a.height&&(t.maxHeight="".concat(a.height,"px")),t},getIframeDoc:function(){if(this.isValid)if(this.iframe&&this.iframe.nodeType===Node.ELEMENT_NODE)try{var t=this.iframe.document;if(this.iframe.contentDocument?t=this.iframe.contentDocument:this.iframe.contentWindow&&(t=this.iframe.contentWindow.document),t)return t;e.Knotch.bugsnag.pushBreadCrumb({name:"Invalid iframe document"})}catch(t){e.Knotch.bugsnag.reportError(t)}else e.Knotch.bugsnag.pushBreadCrumb({name:"Invalid node passed to getIframeDoc"});else e.Knotch.bugsnag.pushBreadCrumb({name:"Request iframe document from invalid unit"});return!1},fadeIn:function(){var e=this.node.parentElement,t=o.default.getLargestZIndex(e);t?this.container.style.zIndex=t:this.container.style.zIndex="auto",o.default.show(this.container),o.default.fadeIn(this.iframe,300)},fadeOut:function(){var e=this;o.default.fadeOut(this.iframe,300),setTimeout(function(){e.container.style.zIndex=-1,o.default.hide(e.container)},300)},onIframeEvent:function(e,t){o.default.onEvent(e,this.iframe,t)}};var v=a;i.default=v},{"../../../../tmp/config.js":55,"../../helpers/Cookies.js":21,"../../helpers/vanillaHelper.js":23}],29:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=function(e){return!(!e.children||!e.children[0]||"SOURCE"!==e.children[0].tagName)},r=function(e){return!!(e.src&&e.src.length>0)},a=function(e){return"IFRAME"===e.tagName},o=function(e){return"VIDEO"===e.tagName},s=function(e){var t=e.querySelector("video"),n="VIDEO-JS"===e.tagName;return!!t&&(n&&(i(t)||r(t)))},u={brightcove:function(e){return s(e)||o(e)&&(i(e)||r(e))},FAVE:function(e){return e.className.indexOf("FavePlayer")!==-1},html5video:function(e){return o(e)&&(i(e)||r(e))},jwplayer:function(e){return e.className.indexOf("jwplayer")!==-1},kaltura:function(e){return a(e)&&e.id.indexOf("_ifp")!==-1},VPAID:function(e){return e.className.indexOf("knotchVpaid")!==-1},youtube:function(e){return a(e)&&r(e)},smplayer:function(e){return a(e)&&e.className.indexOf("sm-iframe")!==-1}},c=u;n.default=c},{}],30:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=r(t("../helpers/Bugsnag.js")),u=r(t("../helpers/vanillaHelper.js")),c=r(t("./tracker.js")),d=r(t("./dom/UnitDOMHandler.js")),l=r(t("./dom/VideoDOMChecks.js")),h=r(t("../helpers/Cookies.js")),f=r(t("../smartunits/SmartUnitTracker.js")),p=t("../../../tmp/config.js"),v=r(t("./timers/DecayInterval.js")),m=t("./constants.js"),g=r(t("./trackers/GAFrameTracker.js")),y=r(t("./trackers/TrackCurrentOnlyManager.js")),b={init:function(){b.analysis&&performance.mark("starting_tag_init"),b.config=p.knotchConfig,b.bugsnag=new s.default(p.knotchConfig),b.units={},b.debug=u.default.isDebug(),b.analysis=u.default.isAnalysis(),b.isMobile=u.default.isMobile(),b.inIframe=!u.default.isTopFrame(),b.inKnotchPage=u.default.inKnotchPage(),b.demo=u.default.isDemo(),e.knotchData.units||(e.knotchData={units:{}});var t={demo:b.demo,inIframe:b.inIframe,inKnotchPage:b.inKnotchPage},n=u.default.getAccountId();n&&(b.SmartUnitTracker=new f.default({accountId:n,knotchConfig:p.knotchConfig,bugsnag:b.bugsnag,debug:b.debug})),b.tracker=new c.default(t),b.decayInterval=new v.default(a({callback:b.checkPlaceholders},m.PLACEHOLDER_CHECK_OPTIONS)),b.analysis&&(performance.mark("ending_tag_init"),performance.measure("tag_init_method","starting_tag_init","ending_tag_init")),this.checkOptout()},addUnit:function(t){if(!u.default.isValidTagId(t))return void console.warn("[Knotch#addUnit] The Unit ID ".concat(t," is not valid"));if(b.units[t]||document.getElementById("knotchframe_55ed7ee027ba796e6ff35103"))return void console.warn("[Knotch#addUnit] Unit ".concat(t," already exists"));var n=document.querySelector('div[class*="knotch_'.concat(t,'"]')),i=document.querySelector('[data-knotch="'.concat(t,'"]'));if(n)n.removeAttribute("knotch-ignore");else{if(!i)return void console.warn("[Knotch#addUnit] No placeholders found for id ".concat(t));i.removeAttribute("knotch-ignore")}e.Knotch.bugsnag.pushBreadCrumb({name:"[public API] Adding Unit",metaData:{id:t}}),b.checkPlaceholders()},enableUnit:function(t){if(!u.default.isValidTagId(t))return void console.warn("[Knotch#enableUnit] The Unit ID ".concat(t," is not valid"));var n=document.querySelector('div[class*="knotch_'.concat(t,'"]'));return n?(b.units[t]||console.warn("[Knotch#enableUnit] Unit ".concat(t," does not exist")),n.removeAttribute("hidden"),e.Knotch.bugsnag.pushBreadCrumb({name:"[public API] Enabling Unit",metaData:{id:t}}),b.units[t].disabled=!1,void b.tracker.enableUnit(t)):void console.warn("[Knotch#enableUnit] There is no placeholder with the id ".concat(t))},disableUnit:function(t){if(!u.default.isValidTagId(t))return void console.warn("[Knotch#disableUnit] The Unit ID ".concat(t," is not valid"));b.units[t]||console.warn("[Knotch#disableUnit] Unit ".concat(t," does not exist"));var n=document.querySelector('div[class*="knotch_'.concat(t,'"]'));return n?(n.setAttribute("hidden",!0),e.Knotch.bugsnag.pushBreadCrumb({name:"[public API] Disabling Unit",metaData:{id:t}}),b.units[t].disabled=!0,void b.tracker.disableUnit(t)):void console.warn("[Knotch#disableUnit] There is no placeholder with the id ".concat(t))},removeUnit:function(t){if(!u.default.isValidTagId(t))return void console.warn("[Knotch#removeUnit] The Unit ID ".concat(t," is not valid"));if(!b.units[t])return b.bugsnag.pushBreadCrumb({name:"unit does not exist"}),void console.warn("[Knotch#removeUnit] Unit does not exist or has already been removed");var n=document.querySelector('div[class*="knotch_'.concat(t,'"]'));if(!n)return void console.warn("[Knotch#removeUnit] There is no placeholder with the id ".concat(t));if(e.Knotch.bugsnag.pushBreadCrumb({name:"[public API] Removing Unit",metaData:{id:t}}),n.setAttribute("knotch-ignore",!0),u.default.hasClass(n,"knotchArticleEmbed")){var i=document.getElementById("knotchframe_".concat(t));if(!i)return void console.warn("[Knotch#removeUnit] No unit frame detected for ".concat(t));u.default.removeClass(n,"knotchArticleEmbed"),u.default.removeNode(i),delete b.units[t]}if(u.default.hasClass(n,"knotchVideoEmbed")){var r=document.querySelector('[data-knotch="'.concat(t,'"]'));if(!r)return void console.warn("[Knotch#removeUnit] No video player found with data-knotch = ".concat(t));r.setAttribute("knotch-ignore",!0),u.default.removeNode(n),delete b.units[t]}b.tracker.removeUnit(t)},setFocus:function(t){return u.default.isValidTagId(t)?(e.Knotch.bugsnag.pushBreadCrumb({name:"[Knotch#setFocus] Setting focus to unit ".concat(t),metaData:{id:t}}),Object.keys(b.units).map(function(e){e!==t&&b.removeUnit(e)}),void b.addUnit(t)):void console.warn("[Knotch#setFocus] The Unit ID ".concat(t," is not valid"))},checkPlaceholders:function(){b.analysis&&performance.mark("starting_checkplaceholders");for(var t=document.querySelectorAll('div[class*="knotch_"]'),n=document.querySelectorAll("[data-knotch]"),i=0;i<t.length;i++)if(!t[i].hasAttribute("knotch-ignore")&&!u.default.hasClass(t[i],"knotchArticleEmbed")){var r=u.default.extractIdFromNode(t[i]);if(r||e.Knotch.bugsnag.pushBreadCrumb({name:"id was not properly extracted"}),u.default.isValidTagId(r)&&!b.units[r]){e.Knotch.bugsnag.pushBreadCrumb({name:"fetching unit data"}),b.units[r]={},u.default.addClass(t[i],"knotchArticleEmbed");var a=t[i].getAttribute("data-track-current-only");a&&(b.trackCurrentOnly||(b.trackCurrentOnly=new y.default({knotch:b})),b.trackCurrentOnly.addUnit(r)),b.fetchData(r)}}for(var o=0;o<n.length;o++){var s=n[o];if(!s.hasAttribute("knotch-ignore")&&!u.default.hasClass(t[o],"knotchVideoEmbed")&&("DIV"!==s.tagName&&"VIDEO-JS"!==s.tagName||!(s.className.indexOf("video-js")>-1||s.className.indexOf("vjs")>-1))){var c=s.getAttribute("data-knotch");if(u.default.isValidTagId(c)&&!b.units[c]){var d=!1;for(var h in l.default)d=d||l.default[h](s);if(!d)return b.bugsnag.pushBreadCrumb({name:"the data-knotch attribute is on an unsupported node"});b.units[c]={};var f=document.createElement("div");f.className="knotch_".concat(c," knotchVideoEmbed");var p=document.querySelector('[data-knotch-video-container="'.concat(c,'"]'));p?p.appendChild(f):n[o].parentNode.insertBefore(f,n[o].nextSibling),b.fetchData(c)}}}b.analysis&&(performance.mark("ending_checkplaceholders"),performance.measure("checkplaceholders_method","starting_checkplaceholders","ending_checkplaceholders"))},fetchData:function(t){b.analysis&&performance.mark("starting_fetchData"),e.knotchData.units&&e.knotchData.units[t]?b.fillIframe(e.knotchData.units[t]):e.knotchUnits&&e.knotchUnits[t]?b.fillIframe(e.knotchUnits[t]):u.default.get("".concat(p.knotchConfig.metadata,"/").concat(t,".json"),{},function(e){b.fillIframe(e),b.analysis&&(performance.mark("ending_fetchData"),performance.measure("fetchData_method","starting_fetchData","ending_fetchData"))},function(e,n,i,r,a){return b.bugsnag.reportError(n,{data:{id:t,readyState:i,responseText:r,responseHeaders:a,status:e},severity:"info"})})},fillIframe:function(t){if(b.analysis&&performance.mark("starting_fillIframe"),t&&(!b.units[t.public_id]||!b.units[t.public_id].data)){b.units[t.public_id].data=t,e.knotchData.units[t.public_id]=t,b.bugsnag.pushBreadCrumb({name:"Valid Unit Data returned ".concat(t.public_id)});var n=document.querySelector(".knotch_".concat(t.public_id));if(!n)return b.bugsnag.pushBreadCrumb({name:"No available placeholder for unit setup ".concat(t.public_id)});if(t.surveyless)b.bugsnag.pushBreadCrumb({name:"Adding surveyless unit"}),b.units[t.public_id].isVisible=!1,b.tracker.addUnit(t);else{var i=new d.default(n,t);if(b.units[t.public_id].DOMHandler=i,b.units[t.public_id].isVisible=!0,!i.isValid)return b.bugsnag.pushBreadCrumb({name:"No iframe created ".concat(t.public_id)});var r=i.getIframeDoc();r&&(i.injectIframe(),b.tracker.addUnit(t))}if(b.analysis){performance.mark("ending_fillIframe"),performance.measure("fillIframe_method","starting_fillIframe","ending_fillIframe");var a=performance.getEntriesByType("measure");a.forEach(function(e){console.log("[ttfe_measure] ".concat(e.name,": ").concat(e.duration))})}}},setDemo:function(t){if("boolean"!=typeof t)return console.warn("[Knotch#setDemo] Please pass in a boolean value (true/false)");t&&b.demo===!0&&e.Knotch.bugsnag.pushBreadCrumb({name:"already in demo mode"}),e.Knotch.bugsnag.pushBreadCrumb({name:"setting demo mode"});var n=t===!0?"true":"false";h.default.set("knotch_demo",n),b.demo=t,b.tracker.demo=t,b.bugsnag.demo=t},checkOptout:function(){"0"===h.default.get("knotch_optout")&&this.setOptout(!0)},setOptout:function(t){return"boolean"!=typeof t?console.warn("[Knotch#setOptout] Please pass in a boolean value (true/false)"):(this.optoutGaFrame=new g.default({knotchId:"optout",optedOut:t,accountId:u.default.getAccountId()}),void(t?(e.Knotch.bugsnag.pushBreadCrumb({name:"[public API] Opted out!"}),h.default.set("knotch_optout",1,31536e3)):(e.Knotch.bugsnag.pushBreadCrumb({name:"[public API] Opted in!"}),h.default.delete("knotch_optout"))))}};e.Knotch||(e.Knotch=b,e.knotchData||(e.knotchData={units:{},themes:{}}),b.init())},{"../../../tmp/config.js":55,"../helpers/Bugsnag.js":20,"../helpers/Cookies.js":21,"../helpers/vanillaHelper.js":23,"../smartunits/SmartUnitTracker.js":24,"./constants.js":27,"./dom/UnitDOMHandler.js":28,"./dom/VideoDOMChecks.js":29,"./timers/DecayInterval.js":31,"./tracker.js":35,"./trackers/GAFrameTracker.js":36,"./trackers/TrackCurrentOnlyManager.js":40}],31:[function(t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=function(e){return 100*Math.pow(2,e)},u=function(){function t(e){var n=this,i=e.callback,a=e.startInterval,o=e.startExpIndex,u=e.countsToIncrease,c=e.newIntervalCalc,d=e.maxTime,l=e.autoStart;r(this,t),this.callback=i,this.interval=a,this.expIndex=o,this.newIntervalCalc=c||s,this.countsToIncrease=u,this.maxTime=d,this.count=0,this.timer=null,this.autoStart=l,this.autoStart&&setTimeout(function(){return n.startInterval()},0),setTimeout(function(){return n.stopInterval()},this.maxTime)}return o(t,[{key:"getNewInterval",value:function(){this.count++,this.count%this.countsToIncrease===0&&(e.Knotch.bugsnag.pushBreadCrumb({name:"incremented decay timer index"}),this.expIndex++),this.interval=this.newIntervalCalc(this.expIndex)}},{key:"startInterval",value:function(){this.getNewInterval(),this.callback(),this.nextInterval()}},{key:"stopInterval",value:function(){e.Knotch.bugsnag.pushBreadCrumb({name:"stopping decay timer"}),clearTimeout(this.timer)}},{key:"nextInterval",value:function(){clearTimeout(this.timer),this.timer=e.setTimeout(this.startInterval.bind(this),this.interval)}}]),t}(),c=u;i.default=c},{}],32:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.startStopTimes={},this.options=t,this.event=e,this.events={},this.debug=!1,this.disabled=!1,this.mobile=o.default.isMobile(),this.mobile&&this.mobileListeners()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=r(t("../../helpers/vanillaHelper.js")),s=r(t("../../helpers/ifvisible.js"));a.prototype={init:function(){var t=this;try{this.setIdleDurationInSeconds(9999);var n=function(){return t.startTimer()},i=function(){return t.stopTimer()};"time_playing_video"!==this.event&&(s.default.on("blur",i),s.default.on("focus",n),s.default.on("idle",i),s.default.on("wakeup",n))}catch(t){e.Knotch.bugsnag.reportError(t)}},startTimer:function(){function t(){return!(!e.performance||!e.performance.timing)}if(!this.disabled)if(void 0===this.startStopTimes[this.event])this.startStopTimes[this.event]=[];else{var n=this.startStopTimes[this.event],i=n[n.length-1];if(void 0!==i&&void 0===i.stopTime)return}var r=(new Date).getTime();t()&&"time_on_page"===this.event&&(r=e.performance.timing.navigationStart),this.startStopTimes[this.event].push({startTime:r,stopTime:void 0}),this.trigger("start")},stopTimer:function(){var e=this.startStopTimes[this.event];void 0!==e&&0!==e.length&&(void 0===e[e.length-1].stopTime&&(e[e.length-1].stopTime=(new Date).getTime()),this.trigger("stop"))},isStarted:function(){var e=this.startStopTimes[this.event];return"undefined"!=typeof e&&void 0===e[e.length-1].stopTime},resetRecordedPageTime:function(e){this.startStopTimes[e]=[]},resetAllRecordedPageTimes:function(){for(var e=Object.keys(this.startStopTimes),t=0;t<e.length;t++)this.resetRecordedPageTime(e[t])},setIdleDurationInSeconds:function(e){var t=parseFloat(e);if(isNaN(t)!==!1)throw new Error("An invalid duration time (".concat(e,") was provided."));s.default.setIdleDuration(t)},getTimeOnCurrentPage:function(){var t=this.startStopTimes[this.event];if(void 0===t)return void e.Knotch.bugsnag.pushBreadCrumb({name:"timer not started yet",metaData:{startStopTimes:this.startStopTimes,event:this.event}});for(var n=t[0].startTime,i=t[t.length-1].stopTime,r=0,a=0;a<t.length;a++){var o=t[a].startTime,s=t[a].stopTime;void 0===s&&(a<t.length-1&&e.Knotch.bugsnag.pushBreadCrumb({name:"setting stop time at interval ".concat(a+1,"/").concat(t.length," to current time: ").concat((new Date).getTime())}),s=(new Date).getTime(),i=s);var u=s-o;u<0&&e.Knotch.bugsnag.pushBreadCrumb({name:"negative time difference start",metaData:{startTime:o,stopTime:s,array:JSON.stringify(t)}});var c=parseInt(r,10)+parseInt(u,10);if(c>this.options.maxTime){this.disabled=!0,this.stopTimer(),this.clearBindings();break}r=c}return{startTime:n,endTime:i,timeSpent:r}},on:function(e,t){var n=this.events[e]||[];n.push(t),this.events[e]=n},clearBindings:function(){this.events[this.event]=[]},off:function(t,n){var i=this.events[t];return i?void(this.events[t]=i.filter(function(e){return e.name!==n.name})):e.Knotch.bugsnag.reportError(new Error("Event trying to be removed is not present"),{data:{events:this.events,event:t}})},trigger:function(e,t){var n=this.events[e];!n||n.length<1||[].forEach.call(n,function(e){e(t)})},mobileListeners:function(){var t=this;try{var n,i;if("undefined"!=typeof document.hidden)n="hidden",i="visibilitychange";else if("undefined"!=typeof document.mozHidden)n="mozHidden",i="mozvisibilitychange";else if("undefined"!=typeof document.msHidden)n="msHidden",i="msvisibilitychange";else{if("undefined"==typeof document.webkitHidden)return;n="webkitHidden",i="webkitvisibilitychange"}"undefined"==typeof document.addEventListener?(e.Knotch.bugsnag.reportError(new Error("addEventListener not supported")),this.stopTimer(),this.disabled=!0):document.addEventListener(i,function(){document[n]?t.stopTimer():t.startTimer()},!1)}catch(t){e.Knotch.bugsnag.reportError(t,{name:"Error in attaching mobile page visibility changes"})}}};var u=a;i.default=u},{"../../helpers/ifvisible.js":22,"../../helpers/vanillaHelper.js":23}],33:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(t){var n=t.timer,i=t.event,r=t.tracker,a=t.id,o=t.logOptions,s=t.autoStart;this.logOptions=o||{},this.id=a,this.timer=n,this.tracker=r,this.interval=1e3,this.autoStart=s,this.count=0,this.event=i,this.started=!1,this.url="/log/".concat(this.event),i||e.Knotch.bugsnag.reportError(new Error("Event Type required for Logging Timer.")),this.init()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("../../helpers/vanillaHelper.js")),c=r(t("./DecayInterval.js"));s.prototype={init:function(){var t=this;e.Knotch.bugsnag.pushBreadCrumb({name:"initializing TimerLogger"}),this.autoStart&&(e.Knotch.bugsnag.pushBreadCrumb({name:"autostart, starting timer"}),this.startTimer());try{this.decayInterval=new c.default({callback:this._poll.bind(this),startInterval:this.interval,startExpIndex:this.logOptions.startExpIndex,countsToIncrease:this.logOptions.countsToIncrease,newIntervalCalc:function(e){return 1e3*(Math.pow(2,e)-1)},maxTime:this.logOptions.maxTime,autoStart:this.autoStart}),this.timer.on("start",function(){return t.decayInterval.startInterval()}),this.timer.on("stop",function(){return t.decayInterval.stopInterval()}),u.default.onEvent("click",document.getElementById("killtop"),function(){t.timer.disabled=!0,t.stopTimer()})}catch(t){e.Knotch.bugsnag.reportError(t)}},startTimer:function(){e.Knotch.bugsnag.pushBreadCrumb({name:"".concat(this.event," timer started")}),this.started=!0,this.timer.startTimer()},stopTimer:function(){e.Knotch.bugsnag.pushBreadCrumb({name:"".concat(this.event," timer stopped")}),this.started=!1,this._logDataSync()},endTimer:function(){this.timer.disabled=!0,this.timer.stopTimer()},resetRecordedPageTime:function(e){this.startStopTimes[e]=[]},getTimeOnCurrentPage:function(){return this.timer.getTimeOnCurrentPage()},setMaxDuration:function(e){this.logOptions.maxTime=e},_poll:function(){var t=this.getTimeOnCurrentPage();if(!this.tracker.demo&&!this.timer.disabled&&t){var n=this.logOptions.maxTime,i=t.timeSpent>n,r={type:this.event,survey_id:this.id};if("time_playing_video"===this.event&&(r.video_seconds_watched=t.timeSpent),t.timeSpent<0||t.end<t.begin){this.decayInterval.stopInterval();var o=a({},this.data,{count:this.count});e.Knotch.bugsnag.reportError(new Error("Negative time difference, killing"),{data:o}),this.endTimer(),this.removeListeners()}else i?this.decayInterval?this.decayInterval.stopInterval():e.Knotch.bugsnag.reportError(new Error("DecayInterval does not exist yet"),{data:{timeData:t,maxTime:n,overTime:i}}):this.pollRequest=this.tracker.record(r)}},_logDataSync:function(){this.timer.stopTimer(),this.pollRequest&&this.pollRequest.abort(),this._poll()},errorHandler:function(t,n,i){this.decayInterval.stopInterval(),e.Knotch.bugsnag.reportError(i,{data:t})},removeListeners:function(){var e=this;this.timer.off("start",function(){return e.decayInterval.startInterval()}),this.timer.off("stop",function(){return e.decayInterval.stopInterval()})}};var d=s;i.default=d},{"../../helpers/vanillaHelper.js":23,"./DecayInterval.js":31}],34:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.THROTTLED_TIME_ON_PAGE_IDS=n.LOG_OPTIONS_TIME_PLAYING_VIDEO=n.LOG_OPTIONS_TIME_ON_PAGE_THROTTLED=n.LOG_OPTIONS_TIME_ON_PAGE=void 0;var i={countsToIncrease:16,startExpIndex:3,maxTime:36e5};n.LOG_OPTIONS_TIME_ON_PAGE=i;var r={countsToIncrease:16,startExpIndex:4,maxTime:3e5};n.LOG_OPTIONS_TIME_ON_PAGE_THROTTLED=r;var a={countsToIncrease:16,startExpIndex:3,maxTime:72e5};n.LOG_OPTIONS_TIME_PLAYING_VIDEO=a;var o=["518afb38-d89b-4aa0-9b73-31ad26d491a6"];n.THROTTLED_TIME_ON_PAGE_IDS=o},{}],35:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){this.demo=e.demo,this.inIframe=e.inIframe,this.inKnotchPage=e.inKnotchPage,this.inAdIframe=this.isInAdIframe(),this.inGenerator=u.default.getScriptFlag("generator"),this.mobile=u.default.hasClass(document.body,"mobile"),this.debug=u.default.isDebug(),this.analysis=u.default.isAnalysis(),this.units={},this.queue=[],this.init()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("../helpers/vanillaHelper")),c=r(t("./timers/TimerLogger")),d=r(t("./timers/SophistiTimer")),l=r(t("./ReporterHandler")),h=r(t("../helpers/Cookies")),f=r(t("./trackers/ViewabilityTracker")),p=r(t("./trackers/VideoTracker.js")),v=r(t("./trackers/ScrolledPastTracker")),m=r(t("./trackers/PageMetricTrackerManager")),g=r(t("./trackers/ScrollDepthManager")),y=t("./timers/constants.js"),b=r(t("./trackers/GAFrameTracker")),k=7e3;s.prototype={isInAdIframe:function(){var e=u.default.getBrowserURL();if(e){var t=/^(http|https):\/\/tpc\.googlesyndication/gm;return this.inIframe&&t.test(e)}return!1},init:function(){this.demo||(this.reporter=new l.default({inIframe:this.inIframe,debug:this.debug}),this.timeOnPageTimer=new d.default("time_on_page",y.LOG_OPTIONS_TIME_ON_PAGE),this.timeOnPageTimer.init(),this.timeOnPageTimer.startTimer(),this.viewability=new f.default(this),this.engagedTimeOnPage=new m.default({tracker:this,type:"engagedTimeOnPage"}),this.pingTimeOnPage=new m.default({tracker:this,type:"pingTimeOnPage"}),this.inIframe||this.inKnotchPage||(this.scrollDepth=new g.default({tracker:this})),this.contentInteractionTracker=new m.default({tracker:this,type:"contentInteraction"}),u.default.listen("message",e,this.handleEvents.bind(this)))},handleEvents:function(e){var t=e.data,n=t.data,i=t.eventType,r=t.id;switch(i){case"hideIframe":this.hideIframe(r);break;case"knotchEvent":this.record(n);break;case"knotchHandshake":this.reporter.init();break;case"knotchThemeLoaded":this.updateWithTheme(e.data);break;case"updateUnitData":this.connectKTag(e.data)}},connectKTag:function(t){var n=t.data;n&&e.ktag&&n.survey_id&&n.render_id&&n.visitor_id&&e.ktag.setDataLayer({msmt_survey_id:n.survey_id,msmt_render_id:n.render_id,msmt_visitor_id:n.visitor_id})},updateWithTheme:function(t){var n=t.id,i=t.theme;n&&i&&e.Knotch.units[n].DOMHandler.setThemeBackground(i)},thirdPartyEvent:function(t){if(!t||!t.name)return e.Knotch.bugsnag.reportError(new Error("Invalid third party event data"),t);e.Knotch.bugsnag.pushBreadCrumb({name:"Third party event sent: ".concat(t.name)});var n=a({type:"knotch_thirdparty"},t);e.parent.postMessage(n,"*")},initTimeOnPage:function(t){var n=this.units[t],i=n.data,r=i.videoType,a=i.organizationId,o=8===r;if(!n.logTimeOnPage&&!o){var s=y.THROTTLED_TIME_ON_PAGE_IDS.indexOf(a)!==-1,u=this.inAdIframe||s?y.LOG_OPTIONS_TIME_ON_PAGE_THROTTLED:y.LOG_OPTIONS_TIME_ON_PAGE;e.Knotch.bugsnag.pushBreadCrumb({name:"adding time on page timer ".concat(this.inAdIframe?"ad unit":""),metaData:{maxTime:u.maxTime}}),n.logTimeOnPage=new c.default({logOptions:u,timer:this.timeOnPageTimer,event:"time_on_page",tracker:this,id:t,autoStart:!0})}},hideIframe:function(t){var n=e.Knotch.units[t];n.isVisible?n.DOMHandler.fadeOut():e.Knotch.bugsnag.pushBreadCrumb({name:"invisible unit so nothing to fade out",type:"ui"});var i=this.units[t].videoTracker;this.thirdPartyEvent({knotchId:t,name:"unit_hidden"}),void 0!==i&&"function"==typeof i.handler.dismiss&&i.handler.dismiss()},record:function(t){var n=e.Knotch.trackCurrentOnly;if(!t)return e.Knotch.bugsnag.reportError(new Error("missing data object"));var i=t.survey_id;if(!this.demo&&!this.units[i].disabled){if(n&&n.initialUrlMap[i]&&!n.shouldSendEvent(i))return e.Knotch.bugsnag.pushBreadCrumb({name:"TrackCurrentOnly: URL DOES NOT MATCH, we should NOT send event for ".concat(i)});var r=this.timeOnPageTimer.getTimeOnCurrentPage().timeSpent,a=t.type;this.reporter.sendUnitEvent({data:t,surveyId:i,timer:r}),"survey_response"===a?this.unitResponse(t):"click_through_response"===a?this.units[i].GAFrameTracker.postRBTGA(t):"followup_response"===a&&h.default.set("followup:".concat(i),t.answer_index,604800)}},unitResponse:function(t){var n=this,i=t.survey_id;void 0!==this.units[i].videoTracker&&e.setTimeout(function(){n.hideIframe(i),n.thirdPartyEvent({knotchId:i,name:"unit_hidden"})},k),this.setKnotchedCookie(t),this.units[i].GAFrameTracker.postGA(t),this.thirdPartyEvent({knotchId:i,name:"unit_response"})},setKnotchedCookie:function(t){var n="knotched:".concat(t.survey_id),i=h.default.get("optout"),r=h.default.get(n);e.Knotch.bugsnag.pushBreadCrumb({name:"Setting knotched cookie",metaData:t}),r&&!Number.isNaN(r)||i||h.default.set(n,t.sentiment,604800)},addUnit:function(t){var n=this;this.analysis&&performance.mark("starting_tracker_addunit");var i=t.public_id;this.units[i]={data:t},e.Knotch.bugsnag.pushBreadCrumb({name:"Adding unit to the Tracker",metaData:{id:i}}),this.demo||(this.initTimeOnPage(i),this.reporter.initUnit(t),this.units[i].GAFrameTracker=new b.default({knotchId:i,debug:this.debug,accountId:t.organizationId}),this.engagedTimeOnPage.addUnit(i),this.pingTimeOnPage.addUnit(i),this.contentInteractionTracker&&this.contentInteractionTracker.addUnit(i),this.record({type:"content_view",survey_id:i}),t.surveyless||this.viewability.addUnit(i),this.inIframe||this.inKnotchPage||this.scrollDepth.addUnit(i),this.inAdIframe&&(this.scrolledPastTracker=new v.default(function(){return n.disableUnit(i)}))),null===t.videoType||this.inGenerator||(this.units[i].videoTracker=new p.default(t,this),this.units[i].isVideo=!0),this.analysis&&(performance.mark("ending_tracker_addunit"),performance.measure("tracker_addunit_method","starting_tracker_addunit","ending_tracker_addunit"))},removeUnit:function(t){var n=this.units[t];n&&(e.Knotch.bugsnag.pushBreadCrumb({name:"Removing unit from tracker",metaData:{id:t}}),n.isVideo&&(this.units[t].videoTracker.disabled=!0),this.units[t].GAFrameTracker.remove(),delete this.units[t],n.logTimeOnPage&&(n.logTimeOnPage.decayInterval.stopInterval(),n.logTimeOnPage.removeListeners()),this.scrollDepth&&this.scrollDepth.removeUnit(t),this.scrolledPastTracker&&(this.scrolledPastTracker=null),this.viewability&&this.viewability.removeUnit(t),this.engagedTimeOnPage&&this.engagedTimeOnPage.removeUnit(t),this.pingTimeOnPage&&this.pingTimeOnPage.removeUnit(t),this.contentInteractionTracker&&this.contentInteractionTracker.removeUnit(t))},enableUnit:function(t){var n=this.units[t];n&&n.disabled&&(e.Knotch.bugsnag.pushBreadCrumb({name:"Enabling unit in tracker",metaData:{id:t}}),n.disabled=!1,n.logTimeOnPage&&n.logTimeOnPage.decayInterval.startInterval(),n.isVideo&&(this.units[t].videoTracker.disabled=!1))},disableUnit:function(t){var n=this.units[t];n&&(n.isVideo&&(this.units[t].videoTracker.disabled=!0),n.disabled||(e.Knotch.bugsnag.pushBreadCrumb({name:"Disabling unit in tracker",metaData:{id:t}}),n.disabled=!0,n.logTimeOnPage&&n.logTimeOnPage.decayInterval.stopInterval()))}};var T=s;i.default=T},{"../helpers/Cookies":21,"../helpers/vanillaHelper":23,"./ReporterHandler":26,"./timers/SophistiTimer":32,"./timers/TimerLogger":33,"./timers/constants.js":34,"./trackers/GAFrameTracker":36,"./trackers/PageMetricTrackerManager":37,"./trackers/ScrollDepthManager":38,"./trackers/ScrolledPastTracker":39,"./trackers/VideoTracker.js":41,"./trackers/ViewabilityTracker":42}],36:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=t("../../../../tmp/config"),c=r(t("../../helpers/vanillaHelper")),d=function(){function t(e){a(this,t),this.iframe=this.setupIFrame(e),this.analysis=c.default.isAnalysis()}return s(t,[{key:"setupIFrame",value:function(t){var n=t.knotchId,i=t.debug,r=t.accountId,a=t.optedOut;this.analysis&&performance.mark("starting_gaframe_setupIframe");var o=document.createElement("iframe");return o.name="GAFrame_".concat(n),o.title="Knotch Analytics Frame",o.setAttribute("aria-hidden","true"),o.style.width="0",o.style.height="0",o.style.display="none",o.id="GAFrame_".concat(n),o.frameBorder="0",o.src="".concat(u.knotchConfig.gaframe,"?id=").concat(n,"&product_type=measurement&account_id=").concat(r),i&&(o.src+="&debug=true"),"undefined"!=typeof a&&(o.src+="&optout=".concat(a?1:0)),c.default.ready(function(){document.body.appendChild(o)}),e.Knotch.bugsnag.pushBreadCrumb({name:"Added GAFrame",metaData:{id:n}}),this.analysis&&(performance.mark("ending_gaframe_setupIframe"),performance.measure("gaframe_setupIframe_method","starting_gaframe_setupIframe","ending_gaframe_setupIframe")),o}},{key:"postGA",value:function(t){if(t.eventType="response",e.Knotch.bugsnag.pushBreadCrumb({name:"posting knotch response to GAFrame",metaData:t}),!t||isNaN(t.sentiment)){var n=new Error("Missing Google Analytics Sentiment data");return e.Knotch.bugsnag.reportError(n,t)}this.iframe&&this.iframe.contentWindow?this.iframe.contentWindow.postMessage(t,"*"):e.Knotch.bugsnag.pushBreadCrumb({name:"Missing iframe",metaData:{id:t.survey_id}})}},{key:"postRBTGA",value:function(t){return t.eventType="RBT",e.Knotch.bugsnag.pushBreadCrumb({name:"Posting RBT to GAFrame",metaData:t}),t.type?void(this.iframe&&this.iframe.contentWindow?this.iframe.contentWindow.postMessage(t,"*"):e.Knotch.bugsnag.pushBreadCrumb({name:"Missing iframe",metaData:{id:t.survey_id}})):e.Knotch.bugsnag.reportError(new Error("Missing Google Analytics RBT data"),t)}},{key:"remove",value:function(){c.default.removeNode(this.iframe)}},{key:"setOptout",value:function(e){this.iframe.contentWindow.postMessage({eventType:"setOptout",optedOut:e},"*")}}]),t}(),l=d;i.default=l},{"../../../../tmp/config":55,"../../helpers/vanillaHelper":23}],37:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("./index"),u=i(e("../../helpers/vanillaHelper")),c=function(){function e(t){var n=this,i=t.tracker,a=t.type;r(this,e),this.surveyIds=[],this.tracker=i,this.type=a,this.pageMetricTracker=s.trackers[a]&&new s.trackers[a]({callback:function(e){n.handleEvent(e)}})}return o(e,[{key:"handleEvent",value:function(e){var t=this;this.surveyIds.forEach(function(n){var i=u.default.extend(e,{survey_id:n});t.tracker.record(i)})}},{key:"addUnit",value:function(e){this.surveyIds.push(e)}},{key:"removeUnit",value:function(e){var t=this.surveyIds.indexOf(e);this.surveyIds.splice(t,1)}}]),e}(),d=c;n.default=d},{"../../helpers/vanillaHelper":23,"./index":43}],38:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=e("@knotchlabs/web-tag-libs/dist/index.cjs"),u=i(e("../../helpers/vanillaHelper")),c=function(){function e(t){var n=t.tracker;r(this,e),this.surveyIds=[],this.tracker=n}return o(e,[{key:"handleEvent",value:function(e){var t=this;this.surveyIds.forEach(function(n){var i=u.default.extend(e,{survey_id:n});t.tracker.record(i)})}},{key:"addUnit",value:function(e){var t=this;this.surveyIds.push(e),this.scrollDepthTracker||(this.scrollDepthTracker=new s.ScrollDepthTracker({callback:function(e){t.handleEvent(e)}}))}},{key:"removeUnit",value:function(e){var t=this.surveyIds.indexOf(e);this.surveyIds.splice(t,1)}}]),e}(),d=c;n.default=d},{"../../helpers/vanillaHelper":23,"@knotchlabs/web-tag-libs/dist/index.cjs":19}],39:[function(t,n,i){"use strict";function r(e){this.callback=e,this.inView=!1,this.hasViewed=!1,this.intObs=null,this.checks=[],this.init()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,r.prototype={init:function(){"IntersectionObserver"in e&&"IntersectionObserverEntry"in e&&"intersectionRatio"in e.IntersectionObserverEntry.prototype&&(this.intervalCheck=e.setInterval(this.addObs.bind(this),100))},addObs:function(){var e=this;document.body&&(this.intObs&&this.intObs.unobserve(document.body),this.intObs=new IntersectionObserver(function(t){return e.checkViewability(t[0])},{threshold:.5}),this.intObs.observe(document.body))},isInView:function(){return this.inView},stop:function(){clearInterval(this.intervalCheck)},checkViewability:function(t){var n=t.intersectionRatio>=.1;try{if(n instanceof Error)this.stop();else{if(this.checks.push(n),this.checks.length>10&&this.checks.shift(),10===this.checks.length){for(var i=!0,r=0;r<10;r++)i=i&&this.checks[r];this.viewed=i}this.viewed?this.hasViewed=!0:!this.viewed&&this.hasViewed&&(e.Knotch.bugsnag.pushBreadCrumb({name:"Unit has been scrolled past"}),this.intObs.unobserve(document.body),this.callback(),this.stop())}}catch(t){e.Knotch.bugsnag.reportError(t)}}};var a=r;i.default=a},{}],40:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("../../helpers/vanillaHelper")),c=function(){function t(e){var n=e.knotch;a(this,t),this.knotch=n,this.initialUrlMap={},this.checkInfiniteScroll()}return s(t,[{key:"checkInfiniteScroll",value:function(){var t=this;this.checkURL=e.setInterval(function(){for(var e in t.initialUrlMap)t.handleUnit(e)},2e3),e.setTimeout(function(){clearInterval(t.checkURL)},18e5)}},{key:"shouldSendEvent",value:function(e){var t=u.default.getBrowserURL();return this.handleUnit(e),t===this.initialUrlMap[e]}},{key:"handleUnit",value:function(e){var t=this.initialUrlMap[e],n=u.default.getBrowserURL(),i=this.knotch.units[e].disabled;n!==t&&i!==!0?(this.knotch.bugsnag.pushBreadCrumb({name:"TrackCurrentOnly: disabling unit ".concat(e)}),this.knotch.disableUnit(e)):n===t&&i===!0&&(this.knotch.bugsnag.pushBreadCrumb({name:"TrackCurrentOnly: enabling unit ".concat(e)}),this.knotch.enableUnit(e))}},{key:"addUnit",value:function(e){var t=u.default.getBrowserURL();this.initialUrlMap[e]=t}}]),t}(),d=c;i.default=d},{"../../helpers/vanillaHelper":23}],41:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(t,n){this.unit=t,this.finished=!1,this.knotched=null!==b.default.get("knotched:".concat(t.public_id)),this.duration=null,this.tracker=n,this.vidTimer=new g.default("time_playing_video",y.LOG_OPTIONS_TIME_PLAYING_VIDEO),this.videoType=t.videoType,this.disabled=!1,this.init();var i=k[this.videoType];if(!i){var r=new Error("There is no video handler available for this video type: ".concat(t.videoType));
return e.Knotch.bugsnag.reportError(r)}this.handler=new i(this,{url:t.videoUrl,surveyId:t.public_id})}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=r(t("../video/BrightcoveHandler.js")),s=r(t("../video/FAVEHandler.js")),u=r(t("../video/HTML5VidHandler.js")),c=r(t("../video/JWPlayerHandler.js")),d=r(t("../video/SMPlayerHandler.js")),l=r(t("../video/KalturaHandler.js")),h=r(t("../video/VimeoHandler.js")),f=r(t("../video/VPAIDHandler.js")),p=r(t("../video/WistiaHandler.js")),v=r(t("../video/YoutubeHandler.js")),m=r(t("../timers/TimerLogger.js")),g=r(t("../timers/SophistiTimer.js")),y=t("../timers/constants.js"),b=r(t("../../helpers/Cookies.js")),k={0:o.default,1:v.default,2:h.default,5:u.default,6:l.default,7:c.default,8:f.default,9:p.default,10:s.default,11:d.default};a.prototype.init=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.disabled){this.vidTimer.init();var n=y.LOG_OPTIONS_TIME_PLAYING_VIDEO;this.logVideoTimer||(e.Knotch.bugsnag.pushBreadCrumb({name:"initializing video timer",metaData:{autoplay:t}}),this.logVideoTimer=new m.default({timer:this.vidTimer,event:"time_playing_video",tracker:this.tracker,id:this.unit.public_id,logOptions:n,autoStart:t}))}},a.prototype.play=function(){this.disabled||this.logVideoTimer.started||this.finished||(e.Knotch.bugsnag.pushBreadCrumb({name:"video played"}),this.logVideoTimer.startTimer())},a.prototype.pause=function(){this.disabled||this.finished||(e.Knotch.bugsnag.pushBreadCrumb({name:"video paused"}),this.logVideoTimer.stopTimer())},a.prototype.finish=function(){var t=this.unit.public_id;if(this.knotched=null!==b.default.get("knotched:".concat(t)),e.Knotch.bugsnag.pushBreadCrumb({name:"video finished, knotched: ".concat(this.knotched,", finished: ").concat(this.finished,", disabled: ").concat(this.disabled)}),!this.disabled){if(!this.finished){this.logVideoTimer.stopTimer();var n={survey_id:t,type:"video_completed"};this.duration&&this.duration>0&&(n.video_duration=this.duration),e.Knotch.bugsnag.pushBreadCrumb({name:"recording video completed"}),this.tracker.record(n)}this.knotched||this.unit.surveyless?e.Knotch.bugsnag.pushBreadCrumb({name:"not fading in survey because already knotched or unit is surveyless",type:"ui"}):(e.Knotch.bugsnag.pushBreadCrumb({name:"fading in survey",type:"ui"}),e.Knotch.units[t].DOMHandler.fadeIn(),this.tracker.thirdPartyEvent({knotchId:t,name:"unit_shown"})),this.tracker.thirdPartyEvent({knotchId:t,name:"video_finished",unitHidden:this.knotched}),this.finished=!0}},a.prototype.setMaxTime=function(t){if(!this.disabled){if(t<1e3){var n=new Error("Improperly set maxTime: ".concat(t,"ms for videoType ").concat(this.videoType));return e.Knotch.bugsnag.reportError(n)}if(!this.logVideoTimer){var i=new Error("LogVideoTimer is undefined");return e.Knotch.bugsnag.reportError(i)}e.Knotch.bugsnag.pushBreadCrumb({name:"Setting max time to ".concat(t,"ms for videoType ").concat(this.videoType)}),this.logVideoTimer.setMaxDuration(t)}};var T=a;i.default=T},{"../../helpers/Cookies.js":21,"../timers/SophistiTimer.js":32,"../timers/TimerLogger.js":33,"../timers/constants.js":34,"../video/BrightcoveHandler.js":44,"../video/FAVEHandler.js":45,"../video/HTML5VidHandler.js":46,"../video/JWPlayerHandler.js":47,"../video/KalturaHandler.js":48,"../video/SMPlayerHandler.js":49,"../video/VPAIDHandler.js":50,"../video/VimeoHandler.js":51,"../video/WistiaHandler.js":52,"../video/YoutubeHandler.js":53}],42:[function(t,n,i){"use strict";function r(t){this.ids=[],this.tracker=t,this.checks={},this.viewed={},this.intervalCheck=e.setInterval(this.check.bind(this),100)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,r.prototype={check:function(){for(var t=e.innerHeight,n=0;n<this.ids.length;n++){var i=this.ids[n],r=document.getElementById("knotchframe_".concat(i));if(r){this.checks[i]||(this.checks[i]=[]),this.checks[i].length>10&&this.checks[i].shift();var a=document.getElementById("knotchframe_".concat(i)).getBoundingClientRect(),o=a.top+.5*a.height,s=o>0&&o<t;this.checks[i].push(s),this.isViewed(i)}else this.ids.splice(n,1)}},isViewed:function(t){for(var n=!0,i=0;i<10;i++)n=n&&this.checks[t][i];if(this.viewed[t]=n,this.viewed[t]){this.tracker.record({type:"viewability",survey_id:t,viewed:!0,viewability_type:"jstag"});var r=this.ids.indexOf(t);this.ids.splice(r,1),this.ids.length||e.clearInterval(this.intervalCheck)}},addUnit:function(t){this.ids.push(t),this.tracker.record({type:"viewability",survey_id:t,viewed:!1,viewability_type:"jstag"}),this.intervalCheck||(this.intervalCheck=e.setInterval(this.check.bind(this),100))},get:function(e){return!!this.viewed[e]},removeUnit:function(e){var t=this.ids.indexOf(e);t!==-1&&this.ids.splice(t,1)}};var a=r;i.default=a},{}],43:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.trackers=void 0;var i=e("@knotchlabs/web-tag-libs/dist/index.cjs"),r={pingTimeOnPage:i.PingTimeOnPageTracker,engagedTimeOnPage:i.EngagedTimeOnPageTracker,contentInteraction:i.ContentInteractionTracker};n.trackers=r},{"@knotchlabs/web-tag-libs/dist/index.cjs":19}],44:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(t,n){this.videoTracker=t,this.url=n.url,this.surveyId=n.surveyId,this.node=document.querySelector('video[data-knotch="'.concat(this.surveyId,'"]'))||document.querySelector('iframe[data-knotch="'.concat(this.surveyId,'"]')),!o.default.isTopFrame()&&this.url?this.videoProperties=this.getVideoProperties(this.url):e.Knotch.bugsnag.pushBreadCrumb({name:"not iframe integration or URL not provided - unable to parse necessary IDs"}),this.loadAPI(n)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=r(t("../../helpers/vanillaHelper"));a.prototype={interceptEvents:function(){var e=this,t=this.videoTracker;if(this.player.on("loadedmetadata",function(){e.autoplay&&(t.init(e.autoplay),t.play())}),this.player.on("timeupdate",function(){return e.progressHandler(event)}),this.player.on("ended",function(){return t.finish()}),this.player.on("play",function(){return t.play()}),this.player.on("pause",function(){return t.pause()}),this.node.duration){var n=Math.floor(1e3*this.node.duration);this.videoTracker.duration=n,this.videoTracker.setMaxTime(n)}},progressHandler:function(){if(this.videoTracker.play(),!this.videoTracker.knotched){if(this.node.duration&&!this.videoTracker.duration){var e=Math.floor(1e3*this.node.duration);this.videoTracker.duration=e,this.videoTracker.setMaxTime(e)}this.videoTracker.logVideoTimer||this.videoTracker.init(this.autoplay)}},loadAPI:function(){e.videojs?this.init():this.injectBrightcove()},injectBrightcove:function(){var t=this,n=document.createElement("script");this.videoProperties||(this.videoProperties=this.getVideoProperties(this.url)),this.videoProperties||e.Knotch.bugsnag.reportError(new Error("".concat(this.surveyId,": can't get Brightcove video propreties")));var i=this.videoProperties,r=i.accountId,a=i.playerId,o=i.videoId;n.src="//players.brightcove.net/".concat(r,"/").concat(a,"_default/index.js"),document.head.appendChild(n);var s=document.getElementById("knotchVideo"),u=document.createElement("video");u.setAttribute("data-video-id",o),u.setAttribute("data-account",r),u.setAttribute("data-player",a),u.setAttribute("data-embed","default"),u.setAttribute("class","video-js"),u.setAttribute("data-application-id",""),u.setAttribute("controls",""),u.style.width="100%",u.style.height="100%",s.appendChild(u),this.node=u,n.onload=function(){return t.init()}},init:function(){this.node?(this.player=e.videojs(this.node),this.autoplay=this.player.autoplay(),this.interceptEvents()):e.Knotch.bugsnag.pushBreadCrumb({name:"Brightcove video player node is missing"})},getVideoProperties:function(){if(this.url){var t=this.url.match(/(?:https?:\/\/)?(?:www\.)?players.brightcove.net\/(\d+)\/([A-Za-z0-9\-\_]+)\/?index.html\?videoId=(\d+)/);return t?{accountId:t[1],playerId:t[2].split("_")[0],videoId:t[3]}:void e.Knotch.bugsnag.pushBreadCrumb({name:"URL does not provide necessary IDs"})}}};var s=a;i.default=s},{"../../helpers/vanillaHelper":23}],45:[function(t,n,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=function(){function t(e,n){r(this,t),this.videoTracker=e,this.surveyId=n.surveyId,this.node=document.querySelector('[data-knotch="'.concat(n.surveyId,'"]')),this.init()}return o(t,[{key:"init",value:function(){var t=this,n=setInterval(function(){var i=e.FAVE&&Object.keys(e.FAVE.player.instances).length>0;return i?(t.playerId=document.querySelector("div[data-knotch]").id,e.Knotch.bugsnag.pushBreadCrumb({name:"FAVE player found",type:"ui"}),t.interceptEvents(),void clearInterval(n)):e.Knotch.bugsnag.pushBreadCrumb({name:"FAVE player not found",type:"ui"})},500);e.setTimeout(function(){(!e.FAVE||Object.keys(e.FAVE.player.instances).length<=0)&&e.Knotch.bugsnag.reportError(new Error("FAVE player not found within one minute")),clearInterval(n)},6e4)}},{key:"interceptEvents",value:function(){var t=this,n=this.videoTracker,i=e.FAVE.player.instances,r=i[this.playerId].getPlayer();r.addEventListener("playing",function(){n.play()}),r.addEventListener("pause",function(){n.pause()}),r.addEventListener("ended",function(){n.finished||n.finish()}),r.addEventListener("timeupdate",function(){var i=r.currentTime;!t.videoTracker.logVideoTimer.started&&i>0&&t.videoTracker.play(),i>=r.duration-2&&!n.finished&&(r.pause(),n.finish(),t.timeoutUnit||(t.timeoutUnit=e.setTimeout(function(){e.Knotch.tracker.hideIframe(t.surveyId),r.play()},1e4)))})}}]),t}(),u=s;i.default=u},{}],46:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(t,n){this.videoTracker=t,this.DOMHandler=e.Knotch.units[n.surveyId].DOMHandler,this.options=n,this.node=document.querySelector('video[data-knotch="'.concat(n.surveyId,'"]')),this.looped=this.isLooping(),this.autoplay=this.node.autoplay,this.interceptEvents()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=r(t("../../helpers/vanillaHelper")),s=1e4;a.prototype={interceptEvents:function(){var e=this,t=this.videoTracker;o.default.onEvent("loadedmetadata",this.node,function(){e.autoplay&&(t.init(e.autoplay),t.play())}),o.default.onEvent("timeupdate",this.node,function(t){return e.progressHandler(t)}),o.default.onEvent("play",this.node,function(){return t.play()}),o.default.onEvent("pause",this.node,function(){return t.pause()}),this.looped?(this.DOMHandler.onIframeEvent("mouseenter",function(){clearTimeout(e.backToLoopTimeOut),e.backToLoopTimeOut=null}),this.DOMHandler.onIframeEvent("mouseleave",function(){e.videoTracker.finished&&(e.backToLoopTimeOut=setTimeout(function(){return e.backToLoop()},s))})):o.default.onEvent("ended",this.node,function(){return t.finish()})},progressHandler:function(){var t=this;if(this.videoTracker.play(),!this.videoTracker.knotched){if(this.node.duration&&!this.videoTracker.duration){var n=Math.floor(1e3*this.node.duration);this.videoTracker.duration=n,this.videoTracker.setMaxTime(n)}this.videoTracker.logVideoTimer||(e.Knotch.bugsnag.pushBreadCrumb({name:"initializing HTML5 videoTracker",autoplay:this.autoplay}),this.videoTracker.init(this.autoplay));var i=this.node,r=i.currentTime,a=i.duration;if(Number.isNaN(r)||Number.isNaN(a))return void e.Knotch.bugsnag.pushBreadCrumb({name:"HTML5 video not ready yet",surveyId:this.options.surveyId,currentTime:r,duration:a});var o=r>a-.5;this.looped&&o&&!this.backToLoopTimeOut?(this.node.pause(),this.videoTracker.finish(),this.backToLoopTimeOut=setTimeout(function(){return t.backToLoop()},s)):!o&&this.backToLoopTimeOut&&(clearTimeout(this.backToLoopTimeOut),this.backToLoopTimeOut=null)}},backToLoop:function(){var e=this;setTimeout(function(){return e.DOMHandler.fadeOut()},500),this.node.play(),clearTimeout(this.backToLoopTimeOut),this.backToLoopTimeOut=null},isLooping:function(){return this.node?this.node._isLooping?this.node._isLooping:!!this.node.hasAttribute("x-celtra-media")||this.node.loop:e.Knotch.bugsnag.reportError(new Error("HTML5 video missing"))},dismiss:function(){this.looped&&this.backToLoop()}};var u=a;i.default=u},{"../../helpers/vanillaHelper":23}],47:[function(t,n,i){"use strict";function r(e,t){this.videoTracker=e,this.node=document.querySelector('video[data-knotch="'.concat(t.surveyId,'"]')),this.interceptEvents()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,r.prototype={interceptEvents:function(){var t=this.videoTracker,n=e.jwplayer&&e.jwplayer();if(n){var i=n.getDuration();if(i){var r=Math.floor(1e3*i);this.videoTracker.duration=r,this.videoTracker.setMaxTime(r)}var a=n.getState();"playing"===a&&(this.videoTracker.logVideoTimer||(e.Knotch.bugsnag.pushBreadCrumb({name:"initializing JWPlayer videoTracker"}),this.videoTracker.init(!0)),t.play()),n.on("playAttempt",function(){t.play()}),n.on("complete",function(){t.finished||t.finish()}),n.on("beforeComplete",function(){t.finished||t.finish()}),n.on("time",function(e){e.currentTime>e.duration-1&&!t.finished&&(n.pause(),t.finish())}),n.on("play",function(){t.play()}),n.on("pause",function(){t.pause()})}},dismiss:function(){var t=e.jwplayer&&e.jwplayer();t&&(t.play(),this.videoTracker.finished=!0)}};var a=r;i.default=a},{}],48:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){this.node=document.querySelector('[data-knotch="'.concat(t.surveyId,'"]')),this.videoTracker=e,this.init(),this.initialized=!1,this.timeoutUnit=null,this.duration=null}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=r(t("../../helpers/vanillaHelper"));a.prototype={init:function(){var t=this,n=setInterval(function(){e.kWidget&&(clearInterval(n),e.kWidget.addReadyCallback(function(e){return t.bindEvents(e)}))},500);e.setTimeout(function(){return clearInterval(n)},6e4)},bindEvents:function(t){var n=this;if(!this.initialized){this.initialized=!0;var i=document.getElementById(t);i.kBind("playerReady",function(){return n.videoTracker.init()}),i.kBind("playerPlayed",function(){return n.videoTracker.play()}),i.kBind("playerPaused",function(){return n.videoTracker.pause()}),i.kBind("playerPlayEnd",function(){return n.videoTracker.finish()}),i.kBind("playerUpdatePlayhead",function(t){if(!n.duration){n.duration=i.evaluate("{mediaProxy.entry.duration}");var r=Math.floor(1e3*n.duration);n.videoTracker.duration=r,n.videoTracker.setMaxTime(r)}!n.videoTracker.logVideoTimer.started&&t>0&&n.videoTracker.play(),n.duration&&t>n.duration-2&&!n.videoTracker.finished&&(n.videoTracker.finish(),i.sendNotification("doPause"),n.timeoutUnit||(n.timeoutUnit=e.setTimeout(function(){e.Knotch.tracker.hideIframe({data:{id:n.videoTracker.unit.public_id}}),i.sendNotification("doPlay")},1e4)))}),o.default.listen("message",e,function(t){t.data&&"hideIframe"===t.data.eventType&&(e.clearTimeout(n.timeoutUnit),i.sendNotification("doPlay"))})}}};var s=a;i.default=s},{"../../helpers/vanillaHelper":23}],49:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("../../helpers/vanillaHelper")),c="https://api.sele.co",d=function(){function t(e,n){a(this,t),this.videoTracker=e,this.node=document.querySelector('[data-knotch="'.concat(n.surveyId,'"]')),this.waitForAPI()}return s(t,[{key:"waitForAPI",value:function(){var t=this,n=setInterval(function(){var i=e.SM;i&&(clearInterval(n),t.init(),t.videoTracker.init())},500);e.setTimeout(function(){return clearInterval(n),e.Knotch.bugsnag.reportError(new Error("SM API not found"))},6e4)}},{key:"init",value:function(){var t=document.querySelector(".sm-iframe");if(!t)return e.Knotch.bugsnag.pushBreadCrumb({name:"sm iframe not found",type:"video_integration"});var n=t.getAttribute("src");u.default.stringContains(n,"autoStart=true")?(e.Knotch.bugsnag.pushBreadCrumb({name:"autoplaying sm player",type:"video_integration"}),this.videoTracker.play()):e.Knotch.bugsnag.pushBreadCrumb({name:"sm player either not autoplay, or invalid search strings",type:"video_integration"}),this.interceptEvents()}},{key:"interceptEvents",value:function(){var t=this.videoTracker;u.default.listen("message",e,function(n){if(n.origin===c){var i=JSON.parse(n.data);if(!i)return e.Knotch.bugsnag.pushBreadCrumb({name:"no sm player data",type:"video_integration"});switch(i.type){case"play":t.play();break;case"pause":t.pause();break;case"ended":t.finished||t.finish()}}})}}]),t}(),l=d;i.default=l},{"../../helpers/vanillaHelper":23}],50:[function(e,t,n){"use strict";function i(e,t){this.options=t,this.videoTracker=e}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,i.prototype={dismiss:function(){console.log("placeholder function")}};var r=i;n.default=r},{}],51:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("../../helpers/vanillaHelper.js")),c=function(){function t(e,n){a(this,t),this.videoTracker=e,this.url=n.url,this.surveyId=n.surveyId,this.node=document.querySelector('[data-knotch="'.concat(n.surveyId,'"]')),this.loadAPI()}return s(t,[{key:"loadAPI",value:function(){var t=this;if("undefined"==typeof e.Vimeo){var n=document.createElement("script");n.src="https://player.vimeo.com/api/player.js";var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i),n.onload=function(){t.init()}}else this.init()}},{key:"init",value:function(){var t=this;this.player=new e.Vimeo.Player(this.node,{id:this.getVimeoId(),transparent:!1}),this.player.ready().then(function(){t.bindListeners(),(e.Knotch.inIframe||u.default.inKnotchPage())&&u.default.extend(t.player.element.style,{width:"100%",height:"100%"}),t.player.getDuration().then(function(e){var n=Math.floor(1e3*e);t.videoTracker.duration=n,t.videoTracker.setMaxTime(n)})}).catch(function(t){e.Knotch.bugsnag.reportError(t)})}},{key:"bindListeners",value:function(){var e=this;this.player.on("play",function(){return e.videoTracker.play()}),this.player.on("pause",function(){return e.handlePauseAtEnd()}),this.player.on("error",function(t){return e.handleError(t)}),this.player.on("ended",function(){return e.videoTracker.finish()})}},{key:"handlePauseAtEnd",value:function(){var e=this;this.player.getCurrentTime().then(function(t){Math.floor(t)===e.videoTracker.duration/1e3?e.videoTracker.finish():e.videoTracker.pause()})}},{key:"handleError",value:function(t){if(t&&t.name)switch(t.name){case"NotAllowedError":e.Knotch.bugsnag.pushBreadCrumb({name:"error: NotAllowedError occured"});break;case"playInterrupted":e.Knotch.bugsnag.pushBreadCrumb({name:"error: playInterrupted occured"})}else e.Knotch.bugsnag.reportError(new Error("Vimeo integration error"),{data:t})}},{key:"getVimeoId",value:function(){var e=this.url&&this.url.match(/(?:https?:\/\/)?(?:www\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|)(\d+)(?:$|\/|\?)/);return e?e[3]||e[1]:null}}]),t}(),d=c;i.default=d},{"../../helpers/vanillaHelper.js":23}],52:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function s(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var u=r(t("../../helpers/vanillaHelper")),c=function(){function t(e,n){var i=n.surveyId;a(this,t),this.videoTracker=e,this.surveyId=i,this.node=document.querySelector('[data-knotch="'.concat(i,'"]')),this.id=this.extractId(),this.id&&this.waitForAPI(this.id)}return s(t,[{key:"extractId",value:function(){var t="wistia_async_",n=null;try{if("VIDEO"===this.node.tagName){for(var i=this.node;i&&i.className.indexOf(t)===-1;)i=i.parentNode;var r=i.className.split(" "),a=r.filter(function(e){return e.indexOf(t)!==-1});a.length&&a[0].length&&(n=a[0].substring(t.length,a[0].length))}else if("IFRAME"===this.node.tagName){var o=this.node.src;n=o.split("?")[0].split("/")[5]}n||e.Knotch.bugsnag.reportError(new Error("No id found"),{data:event})}catch(t){e.Knotch.bugsnag.reportError(t)}return n}},{key:"waitForAPI",value:function(t){var n=this;e._wq=e._wq||[],e._wq.push({id:t,onReady:function(){n.init()}})}},{key:"init",value:function(){return"VIDEO"===this.node.tagName||(this.node=this.node.querySelector("video"),this.node)?void this.bindListeners():e.Knotch.bugsnag.reportError(new Error("Wistia integration: video element not found"),{data:{pageNode:u.default.getNodeDescription(this.node)}})}},{key:"bindListeners",value:function(){var e=this,t=this.videoTracker;u.default.onEvent("timeupdate",this.node,function(t){return e.progressHandler(t)}),u.default.onEvent("play",this.node,function(){return t.play()}),u.default.onEvent("pause",this.node,function(){return t.pause()}),u.default.onEvent("ended",this.node,function(){return t.finish()})}},{key:"progressHandler",value:function(){if(this.videoTracker.play(),!this.videoTracker.knotched){if(this.node.duration&&!this.videoTracker.duration){var t=Math.floor(1e3*this.node.duration);this.videoTracker.duration=t,this.videoTracker.setMaxTime(t)}this.videoTracker.logVideoTimer||this.videoTracker.init(!0);var n=this.node,i=n.currentTime,r=n.duration;(Number.isNaN(i)||Number.isNaN(r))&&e.Knotch.bugsnag.pushBreadCrumb({name:"wistia video not ready yet",surveyId:this.options.surveyId,currentTime:i,duration:r})}}},{key:"handleError",value:function(t){e.Knotch.bugsnag.reportError(new Error("Wistia integration error"),{data:t})}}]),t}(),d=c;i.default=d},{"../../helpers/vanillaHelper":23}],53:[function(t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){this.surveyId=t.surveyId,this.node=document.querySelector('[data-knotch="'.concat(this.surveyId,'"]')),this.id=this.getIdFromUrl(this.getUrl(t)),this.hasAutoplay="1"===o.default.getQueryParams(this.getUrl(t)).autoplay,this.videoTracker=e,this.init()}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=r(t("../../helpers/vanillaHelper")),s=r(t("../../thirdparty/YoutubeIframeAPI.js"));a.prototype={init:function(){var t=this;"undefined"==typeof e.youTubeReadyCollection&&(e.youTubeReadyCollection=[]);var n=!("undefined"==typeof e.YT||"undefined"==typeof e.YT.Player);n?this.loadAPI():(e.youTubeReadyCollection.push(function(){return t.loadAPI()}),e.onYouTubePlayerAPIReady=function(){if("undefined"!=typeof e.youTubeReadyCollection&&e.youTubeReadyCollection.length)for(;e.youTubeReadyCollection.length;){var t=e.youTubeReadyCollection.pop();t()}},setTimeout(function(){(0,s.default)(e)},100))},getUrl:function(e){return o.default.isTopFrame()?this.node.getAttribute("src"):e.url},getIdFromUrl:function(e){var t=/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;return e.match(t)?e.match(t)[1]:null},loadAPI:function(){var t=this,n=null;"undefined"!=typeof this.node.id&&0!==this.node.id.length||(this.node.id="knotchVideo_".concat(this.id),e.Knotch.bugsnag.pushBreadCrumb({name:"node ID added"})),n=this.node.id,this.node.src&&this.enableAPI();var i=e.YT.get(n);i?(e.Knotch.bugsnag.pushBreadCrumb({name:"".concat(this.surveyId,": YouTube player exists, listening to events")}),this.player=i,this.player.addEventListener("onReady",function(e){return t.onReady(e)}),this.player.addEventListener("onStateChange",function(e,n){return t.onStateChange(e,n)})):(e.Knotch.bugsnag.pushBreadCrumb({name:"".concat(this.surveyId,": Adding a new YouTube player")}),this.player=new e.YT.Player(n,{height:"100%",width:"100%",videoId:this.id,playerVars:{modestbranding:0,fs:0,rel:0,wmode:"transparent",enablejsapi:1,autoplay:this.hasAutoplay,showinfo:0,loop:1},events:{onStateChange:function(e,n){return t.onStateChange(e,n)},onError:function(e){return t.onError(e)},onReady:function(e){return t.onReady(e)}}}))},enableAPI:function(){this.node.src.indexOf("enablejsapi")===-1&&(this.node.src.indexOf("?")===-1?this.node.src+="?enablejsapi=1":this.node.src+="&enablejsapi=1",e.Knotch.bugsnag.pushBreadCrumb({name:"".concat(this.surveyId,": youtube API enabled")}))},onReady:function(t){var n=t.target.getDuration();if(n){var i=Math.floor(1e3*n);this.videoTracker.duration=i,this.videoTracker.setMaxTime(i),e.Knotch.bugsnag.pushBreadCrumb({name:"".concat(this.surveyId,": Adding YouTube max time and duration to video tracker")})}this.hasAutoplay&&(this.videoTracker.init(this.hasAutoplay),this.videoTracker.play())},onError:function(t){e.Knotch.bugsnag.reportError(new Error("".concat(this.surveyId,": Youtube integration error")),{data:t})},onStateChange:function(t,n){switch(n&&n(),t.data){default:break;case 0:this.videoTracker.finish(),e.Knotch.bugsnag.pushBreadCrumb({name:"".concat(this.surveyId,": YouTube video finished")});break;case 1:this.videoTracker.play(),e.Knotch.bugsnag.pushBreadCrumb({name:"".concat(this.surveyId,": YouTube video played")});break;case 2:this.videoTracker.pause(),e.Knotch.bugsnag.pushBreadCrumb({name:"".concat(this.surveyId,": YouTube video paused")})}}};var u=a;i.default=u},{"../../helpers/vanillaHelper":23,"../../thirdparty/YoutubeIframeAPI.js":54}],54:[function(e,t,n){"use strict";function i(e){e.YT||(e.YT={loading:0,loaded:0}),e.YTConfig||(e.YTConfig={host:"http://www.youtube.com"}),e.YT.loading||(e.YT.loading=1,function(){var t=[];e.YT.ready=function(n){e.YT.loaded?n():t.push(n)},e.onYTReady=function(){e.YT.loaded=1;for(var n=0;n<t.length;n++)try{t[n]()}catch(e){}},e.YT.setConfig=function(e){for(var t in e)e.hasOwnProperty(t)&&(YTConfig[t]=e[t])};var n=document.createElement("script");n.type="text/javascript",n.id="www-widgetapi-script",n.src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vfl9cGVgZ/www-widgetapi.js",n.async=!0;var i=document.currentScript;if(i){var r=i.nonce||i.getAttribute("nonce");r&&n.setAttribute("nonce",r)}var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a)}())}Object.defineProperty(n,"__esModule",{value:!0}),n.default=i},{}],55:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.knotchConfig=void 0;var i={env:"production",version:"v4.45.3",pixel:"https://c.knotch.it/",root:"https://www.knotch.it",metadata:"https://units.knotch.it/units",theme:"https://units.knotch.it/themes",gaframe:"https://units.knotch.it/gaframe/ver-adb8932/index.html",reporter:"https://units.knotch.it/reporter/ver-fac59b9/index.html",measurementUnit:"measurementUnit.min.js"};n.knotchConfig=i},{}]},{},[30])}catch(e){Knotch.bugsnag&&Knotch.bugsnag.reportError(e)}}(window);["baseprofile","baseProfile"],["calcmode","calcMode"],["clippathunits","clipPathUnits"],["diffuseconstant","diffuseConstant"],["edgemode","edgeMode"],["filterunits","filterUnits"],["glyphref","glyphRef"],["gradienttransform","gradientTransform"],["gradientunits","gradientUnits"],["kernelmatrix","kernelMatrix"],["kernelunitlength","kernelUnitLength"],["keypoints","keyPoints"],["keysplines","keySplines"],["keytimes","keyTimes"],["lengthadjust","lengthAdjust"],["limitingconeangle","limitingConeAngle"],["markerheight","markerHeight"],["markerunits","markerUnits"],["markerwidth","markerWidth"],["maskcontentunits","maskContentUnits"],["maskunits","maskUnits"],["numoctaves","numOctaves"],["pathlength","pathLength"],["patterncontentunits","patternContentUnits"],["patterntransform","patternTransform"],["patternunits","patternUnits"],["pointsatx","pointsAtX"],["pointsaty","pointsAtY"],["pointsatz","pointsAtZ"],["preservealpha","preserveAlpha"],["preserveaspectratio","preserveAspectRatio"],["primitiveunits","primitiveUnits"],["refx","refX"],["refy","refY"],["repeatcount","repeatCount"],["repeatdur","repeatDur"],["requiredextensions","requiredExtensions"],["requiredfeatures","requiredFeatures"],["specularconstant","specularConstant"],["specularexponent","specularExponent"],["spreadmethod","spreadMethod"],["startoffset","startOffset"],["stddeviation","stdDeviation"],["stitchtiles","stitchTiles"],["surfacescale","surfaceScale"],["systemlanguage","systemLanguage"],["tablevalues","tableValues"],["targetx","targetX"],["targety","targetY"],["textlength","textLength"],["viewbox","viewBox"],["viewtarget","viewTarget"],["xchannelselector","xChannelSelector"],["ychannelselector","yChannelSelector"],["zoomandpan","zoomAndPan"]])},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prevElementSibling=e.nextElementSibling=e.getName=e.hasAttrib=e.getAttributeValue=e.getSiblings=e.getParent=e.getChildren=void 0;var n=r(110),i=[];function s(t){var e;return null!==(e=t.children)&&void 0!==e?e:i}function o(t){return t.parent||null}e.getChildren=s,e.getParent=o,e.getSiblings=function(t){var e=o(t);if(null!=e)return s(e);for(var r=[t],n=t.prev,i=t.next;null!=n;)r.unshift(n),n=n.prev;for(;null!=i;)r.push(i),i=i.next;return r},e.getAttributeValue=function(t,e){var r;return null===(r=t.attribs)||void 0===r?void 0:r[e]},e.hasAttrib=function(t,e){return null!=t.attribs&&Object.prototype.hasOwnProperty.call(t.attribs,e)&&null!=t.attribs[e]},e.getName=function(t){return t.name},e.nextElementSibling=function(t){for(var e=t.next;null!==e&&!(0,n.isTag)(e);)e=e.next;return e},e.prevElementSibling=function(t){for(var e=t.prev;null!==e&&!(0,n.isTag)(e);)e=e.prev;return e}},function(t,e,r){"use strict";function n(t){if(t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.parent){var e=t.parent.children;e.splice(e.lastIndexOf(t),1)}}Object.defineProperty(e,"__esModule",{value:!0}),e.prepend=e.prependChild=e.append=e.appendChild=e.replaceElement=e.removeElement=void 0,e.removeElement=n,e.replaceElement=function(t,e){var r=e.prev=t.prev;r&&(r.next=e);var n=e.next=t.next;n&&(n.prev=e);var i=e.parent=t.parent;if(i){var s=i.children;s[s.lastIndexOf(t)]=e}},e.appendChild=function(t,e){if(n(e),e.next=null,e.parent=t,t.children.push(e)>1){var r=t.children[t.children.length-2];r.next=e,e.prev=r}else e.prev=null},e.append=function(t,e){n(e);var r=t.parent,i=t.next;if(e.next=i,e.prev=t,t.next=e,e.parent=r,i){if(i.prev=e,r){var s=r.children;s.splice(s.lastIndexOf(i),0,e)}}else r&&r.children.push(e)},e.prependChild=function(t,e){if(n(e),e.parent=t,e.prev=null,1!==t.children.unshift(e)){var r=t.children[1];r.prev=e,e.next=r}else e.next=null},e.prepend=function(t,e){n(e);var r=t.parent;if(r){var i=r.children;i.splice(i.indexOf(t),0,e)}t.prev&&(t.prev.next=e),e.parent=r,e.prev=t.prev,e.next=t,t.prev=e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uniqueSort=e.compareDocumentPosition=e.removeSubsets=void 0;var n=r(110);function i(t,e){var r=[],i=[];if(t===e)return 0;for(var s=(0,n.hasChildren)(t)?t:t.parent;s;)r.unshift(s),s=s.parent;for(s=(0,n.hasChildren)(e)?e:e.parent;s;)i.unshift(s),s=s.parent;for(var o=Math.min(r.length,i.length),a=0;a<o&&r[a]===i[a];)a++;if(0===a)return 1;var l=r[a-1],u=l.children,c=r[a],h=i[a];return u.indexOf(c)>u.indexOf(h)?l===e?20:4:l===t?10:2}e.removeSubsets=function(t){for(var e=t.length;--e>=0;){var r=t[e];if(e>0&&t.lastIndexOf(r,e-1)>=0)t.splice(e,1);else for(var n=r.parent;n;n=n.parent)if(t.includes(n)){t.splice(e,1);break}}return t},e.compareDocumentPosition=i,e.uniqueSort=function(t){return(t=t.filter((function(t,e,r){return!r.includes(t,e+1)}))).sort((function(t,e){var r=i(t,e);return 2&r?-1:4&r?1:0})),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFeed=void 0;var n=r(182),i=r(186);e.getFeed=function(t){var e=l(h,t);return e?"feed"===e.name?function(t){var e,r=t.children,n={type:"atom",items:(0,i.getElementsByTagName)("entry",r).map((function(t){var e,r=t.children,n={media:a(r)};c(n,"id","id",r),c(n,"title","title",r);var i=null===(e=l("link",r))||void 0===e?void 0:e.attribs.href;i&&(n.link=i);var s=u("summary",r)||u("content",r);s&&(n.description=s);var o=u("updated",r);return o&&(n.pubDate=new Date(o)),n}))};c(n,"id","id",r),c(n,"title","title",r);var s=null===(e=l("link",r))||void 0===e?void 0:e.attribs.href;s&&(n.link=s);c(n,"description","subtitle",r);var o=u("updated",r);o&&(n.updated=new Date(o));return c(n,"author","email",r,!0),n}(e):function(t){var e,r,n=null!==(r=null===(e=l("channel",t.children))||void 0===e?void 0:e.children)&&void 0!==r?r:[],s={type:t.name.substr(0,3),id:"",items:(0,i.getElementsByTagName)("item",t.children).map((function(t){var e=t.children,r={media:a(e)};c(r,"id","guid",e),c(r,"title","title",e),c(r,"link","link",e),c(r,"description","description",e);var n=u("pubDate",e);return n&&(r.pubDate=new Date(n)),r}))};c(s,"title","title",n),c(s,"link","link",n),c(s,"description","description",n);var o=u("lastBuildDate",n);o&&(s.updated=new Date(o));return c(s,"author","managingEditor",n,!0),s}(e):null};var s=["url","type","lang"],o=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function a(t){return(0,i.getElementsByTagName)("media:content",t).map((function(t){for(var e=t.attribs,r={medium:e.medium,isDefault:!!e.isDefault},n=0,i=s;n<i.length;n++){e[u=i[n]]&&(r[u]=e[u])}for(var a=0,l=o;a<l.length;a++){var u;e[u=l[a]]&&(r[u]=parseInt(e[u],10))}return e.expression&&(r.expression=e.expression),r}))}function l(t,e){return(0,i.getElementsByTagName)(t,e,!0,1)[0]}function u(t,e,r){return void 0===r&&(r=!1),(0,n.textContent)((0,i.getElementsByTagName)(t,e,r,1)).trim()}function c(t,e,r,n,i){void 0===i&&(i=!1);var s=u(r,n,i);s&&(t[e]=s)}function h(t){return"rss"===t||"feed"===t||"rdf:RDF"===t}},function(t,e,r){"use strict";t.exports=t=>{if("string"!=typeof t)throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}},function(t,e,r){"use strict";
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function n(t){return"[object Object]"===Object.prototype.toString.call(t)}function i(t){var e,r;return!1!==n(t)&&(void 0===(e=t.constructor)||!1!==n(r=e.prototype)&&!1!==r.hasOwnProperty("isPrototypeOf"))}r.r(e),r.d(e,"isPlainObject",(function(){return i}))},function(t,e,r){"use strict";var n=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===i}(t)}(t)};var i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function s(t,e){return!1!==e.clone&&e.isMergeableObject(t)?c((r=t,Array.isArray(r)?[]:{}),t,e):t;var r}function o(t,e,r){return t.concat(e).map((function(t){return s(t,r)}))}function a(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function l(t,e){try{return e in t}catch(t){return!1}}function u(t,e,r){var n={};return r.isMergeableObject(t)&&a(t).forEach((function(e){n[e]=s(t[e],r)})),a(e).forEach((function(i){(function(t,e){return l(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,i)||(l(t,i)&&r.isMergeableObject(e[i])?n[i]=function(t,e){if(!e.customMerge)return c;var r=e.customMerge(t);return"function"==typeof r?r:c}(i,r)(t[i],e[i],r):n[i]=s(e[i],r))})),n}function c(t,e,r){(r=r||{}).arrayMerge=r.arrayMerge||o,r.isMergeableObject=r.isMergeableObject||n,r.cloneUnlessOtherwiseSpecified=s;var i=Array.isArray(e);return i===Array.isArray(t)?i?r.arrayMerge(t,e,r):u(t,e,r):s(e,r)}c.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,r){return c(t,r,e)}),{})};var h=c;t.exports=h},function(t,e,r){var n,i,s;i=[],void 0===(s="function"==typeof(n=function(){return function(t){function e(t){return" "===t||"\t"===t||"\n"===t||"\f"===t||"\r"===t}function r(e){var r,n=e.exec(t.substring(g));if(n)return r=n[0],g+=r.length,r}for(var n,i,s,o,a,l=t.length,u=/^[ \t\n\r\u000c]+/,c=/^[, \t\n\r\u000c]+/,h=/^[^ \t\n\r\u000c]+/,f=/[,]+$/,p=/^\d+$/,d=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,g=0,m=[];;){if(r(c),g>=l)return m;n=r(h),i=[],","===n.slice(-1)?(n=n.replace(f,""),b()):y()}function y(){for(r(u),s="",o="in descriptor";;){if(a=t.charAt(g),"in descriptor"===o)if(e(a))s&&(i.push(s),s="",o="after descriptor");else{if(","===a)return g+=1,s&&i.push(s),void b();if("("===a)s+=a,o="in parens";else{if(""===a)return s&&i.push(s),void b();s+=a}}else if("in parens"===o)if(")"===a)s+=a,o="in descriptor";else{if(""===a)return i.push(s),void b();s+=a}else if("after descriptor"===o)if(e(a));else{if(""===a)return void b();o="in descriptor",g-=1}g+=1}}function b(){var e,r,s,o,a,l,u,c,h,f=!1,g={};for(o=0;o<i.length;o++)l=(a=i[o])[a.length-1],u=a.substring(0,a.length-1),c=parseInt(u,10),h=parseFloat(u),p.test(u)&&"w"===l?((e||r)&&(f=!0),0===c?f=!0:e=c):d.test(u)&&"x"===l?((e||r||s)&&(f=!0),h<0?f=!0:r=h):p.test(u)&&"h"===l?((s||r)&&(f=!0),0===c?f=!0:s=c):f=!0;f?console&&console.log&&console.log("Invalid srcset descriptor found in '"+t+"' at '"+a+"'."):(g.url=n,e&&(g.w=e),r&&(g.d=r),s&&(g.h=s),m.push(g))}}})?n.apply(e,i):n)||(t.exports=s)},function(t,e,r){"use strict";(function(e){let n=r(156),i=r(133),s=r(188),o=r(118),a=r(244),l=r(135),u=r(246),c=r(158),h=r(193),f=r(137),p=r(161),d=r(159),g=r(136),m=r(160),y=r(194),b=r(162),w=r(128),v=r(134);function x(...t){return 1===t.length&&Array.isArray(t[0])&&(t=t[0]),new a(t)}x.plugin=function(t,r){let n,i=!1;function s(...n){console&&console.warn&&!i&&(i=!0,console.warn(t+": postcss.plugin was deprecated. Migration guide:\nhttps://evilmartians.com/chronicles/postcss-8-plugin-migration"),e.env.LANG&&e.env.LANG.startsWith("cn")&&console.warn(t+": 里面 postcss.plugin 被弃用. 迁移指南:\nhttps://www.w3ctech.com/topic/2226"));let s=r(...n);return s.postcssPlugin=t,s.postcssVersion=(new a).version,s}return Object.defineProperty(s,"postcss",{get:()=>(n||(n=s()),n)}),s.process=function(t,e,r){return x([s(r)]).process(t,e)},s},x.stringify=l,x.parse=m,x.fromJSON=u,x.list=y,x.comment=t=>new f(t),x.atRule=t=>new p(t),x.decl=t=>new i(t),x.rule=t=>new b(t),x.root=t=>new w(t),x.document=t=>new c(t),x.CssSyntaxError=n,x.Declaration=i,x.Container=o,x.Processor=a,x.Document=c,x.Comment=f,x.Warning=h,x.AtRule=p,x.Result=d,x.Input=g,x.Rule=b,x.Root=w,x.Node=v,s.registerPostcss(x),t.exports=x,x.default=x}).call(this,r(236))},function(t,e){var r,n,i=t.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var l,u=[],c=!1,h=-1;function f(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&p())}function p(){if(!c){var t=a(f);c=!0;for(var e=u.length;e;){for(l=u,u=[];++h<e;)l&&l[h].run();h=-1,e=u.length}l=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new d(t,e)),1!==u.length||c||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){var r=String,n=function(){return{isColorSupported:!1,reset:r,bold:r,dim:r,italic:r,underline:r,inverse:r,hidden:r,strikethrough:r,black:r,red:r,green:r,yellow:r,blue:r,magenta:r,cyan:r,white:r,gray:r,bgBlack:r,bgRed:r,bgGreen:r,bgYellow:r,bgBlue:r,bgMagenta:r,bgCyan:r,bgWhite:r}};t.exports=n(),t.exports.createColors=n},function(t,e,r){"use strict";e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,n=u(t),o=n[0],a=n[1],l=new s(function(t,e,r){return 3*(e+r)/4-r}(0,o,a)),c=0,h=a>0?o-4:o;for(r=0;r<h;r+=4)e=i[t.charCodeAt(r)]<<18|i[t.charCodeAt(r+1)]<<12|i[t.charCodeAt(r+2)]<<6|i[t.charCodeAt(r+3)],l[c++]=e>>16&255,l[c++]=e>>8&255,l[c++]=255&e;2===a&&(e=i[t.charCodeAt(r)]<<2|i[t.charCodeAt(r+1)]>>4,l[c++]=255&e);1===a&&(e=i[t.charCodeAt(r)]<<10|i[t.charCodeAt(r+1)]<<4|i[t.charCodeAt(r+2)]>>2,l[c++]=e>>8&255,l[c++]=255&e);return l},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,s=[],o=0,a=r-i;o<a;o+=16383)s.push(c(t,o,o+16383>a?a:o+16383));1===i?(e=t[r-1],s.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],s.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return s.join("")};for(var n=[],i=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=o.length;a<l;++a)n[a]=o[a],i[o.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,r){for(var i,s,o=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),o.push(n[(s=i)>>18&63]+n[s>>12&63]+n[s>>6&63]+n[63&s]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,i){var s,o,a=8*i-n-1,l=(1<<a)-1,u=l>>1,c=-7,h=r?i-1:0,f=r?-1:1,p=t[e+h];for(h+=f,s=p&(1<<-c)-1,p>>=-c,c+=a;c>0;s=256*s+t[e+h],h+=f,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=256*o+t[e+h],h+=f,c-=8);if(0===s)s=1-u;else{if(s===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),s-=u}return(p?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,r,n,i,s){var o,a,l,u=8*s-i-1,c=(1<<u)-1,h=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,d=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+h>=1?f/l:f*Math.pow(2,1-h))*l>=2&&(o++,l/=2),o+h>=c?(a=0,o=c):o+h>=1?(a=(e*l-1)*Math.pow(2,i),o+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(o=o<<i|a,u+=i;u>0;t[r+p]=255&o,p+=d,o/=256,u-=8);t[r+p-d]|=128*g}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},function(t,e,r){"use strict";r.r(e),r.d(e,"nanoid",(function(){return i})),r.d(e,"customAlphabet",(function(){return n}));let n=(t,e=21)=>(r=e)=>{let n="",i=r;for(;i--;)n+=t[Math.random()*t.length|0];return n},i=(t=21)=>{let e="",r=t;for(;r--;)e+="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"[64*Math.random()|0];return e}},function(t,e,r){"use strict";let n=r(133),i=r(243),s=r(137),o=r(161),a=r(128),l=r(162);const u={empty:!0,space:!0};t.exports=class{constructor(t){this.input=t,this.root=new a,this.current=this.root,this.spaces="",this.semicolon=!1,this.customProperty=!1,this.createTokenizer(),this.root.source={input:t,start:{offset:0,line:1,column:1}}}createTokenizer(){this.tokenizer=i(this.input)}parse(){let t;for(;!this.tokenizer.endOfFile();)switch(t=this.tokenizer.nextToken(),t[0]){case"space":this.spaces+=t[1];break;case";":this.freeSemicolon(t);break;case"}":this.end(t);break;case"comment":this.comment(t);break;case"at-word":this.atrule(t);break;case"{":this.emptyRule(t);break;default:this.other(t)}this.endFile()}comment(t){let e=new s;this.init(e,t[2]),e.source.end=this.getPosition(t[3]||t[2]);let r=t[1].slice(2,-2);if(/^\s*$/.test(r))e.text="",e.raws.left=r,e.raws.right="";else{let t=r.match(/^(\s*)([^]*\S)(\s*)$/);e.text=t[2],e.raws.left=t[1],e.raws.right=t[3]}}emptyRule(t){let e=new l;this.init(e,t[2]),e.selector="",e.raws.between="",this.current=e}other(t){let e=!1,r=null,n=!1,i=null,s=[],o=t[1].startsWith("--"),a=[],l=t;for(;l;){if(r=l[0],a.push(l),"("===r||"["===r)i||(i=l),s.push("("===r?")":"]");else if(o&&n&&"{"===r)i||(i=l),s.push("}");else if(0===s.length){if(";"===r){if(n)return void this.decl(a,o);break}if("{"===r)return void this.rule(a);if("}"===r){this.tokenizer.back(a.pop()),e=!0;break}":"===r&&(n=!0)}else r===s[s.length-1]&&(s.pop(),0===s.length&&(i=null));l=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(e=!0),s.length>0&&this.unclosedBracket(i),e&&n){if(!o)for(;a.length&&(l=a[a.length-1][0],"space"===l||"comment"===l);)this.tokenizer.back(a.pop());this.decl(a,o)}else this.unknownWord(a)}rule(t){t.pop();let e=new l;this.init(e,t[0][2]),e.raws.between=this.spacesAndCommentsFromEnd(t),this.raw(e,"selector",t),this.current=e}decl(t,e){let r=new n;this.init(r,t[0][2]);let i,s=t[t.length-1];for(";"===s[0]&&(this.semicolon=!0,t.pop()),r.source.end=this.getPosition(s[3]||s[2]||function(t){for(let e=t.length-1;e>=0;e--){let r=t[e],n=r[3]||r[2];if(n)return n}}(t));"word"!==t[0][0];)1===t.length&&this.unknownWord(t),r.raws.before+=t.shift()[1];for(r.source.start=this.getPosition(t[0][2]),r.prop="";t.length;){let e=t[0][0];if(":"===e||"space"===e||"comment"===e)break;r.prop+=t.shift()[1]}for(r.raws.between="";t.length;){if(i=t.shift(),":"===i[0]){r.raws.between+=i[1];break}"word"===i[0]&&/\w/.test(i[1])&&this.unknownWord([i]),r.raws.between+=i[1]}"_"!==r.prop[0]&&"*"!==r.prop[0]||(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let o,a=[];for(;t.length&&(o=t[0][0],"space"===o||"comment"===o);)a.push(t.shift());this.precheckMissedSemicolon(t);for(let e=t.length-1;e>=0;e--){if(i=t[e],"!important"===i[1].toLowerCase()){r.important=!0;let n=this.stringFrom(t,e);n=this.spacesFromEnd(t)+n," !important"!==n&&(r.raws.important=n);break}if("important"===i[1].toLowerCase()){let n=t.slice(0),i="";for(let t=e;t>0;t--){let e=n[t][0];if(0===i.trim().indexOf("!")&&"space"!==e)break;i=n.pop()[1]+i}0===i.trim().indexOf("!")&&(r.important=!0,r.raws.important=i,t=n)}if("space"!==i[0]&&"comment"!==i[0])break}t.some(t=>"space"!==t[0]&&"comment"!==t[0])&&(r.raws.between+=a.map(t=>t[1]).join(""),a=[]),this.raw(r,"value",a.concat(t),e),r.value.includes(":")&&!e&&this.checkMissedSemicolon(t)}atrule(t){let e,r,n,i=new o;i.name=t[1].slice(1),""===i.name&&this.unnamedAtrule(i,t),this.init(i,t[2]);let s=!1,a=!1,l=[],u=[];for(;!this.tokenizer.endOfFile();){if(e=(t=this.tokenizer.nextToken())[0],"("===e||"["===e?u.push("("===e?")":"]"):"{"===e&&u.length>0?u.push("}"):e===u[u.length-1]&&u.pop(),0===u.length){if(";"===e){i.source.end=this.getPosition(t[2]),this.semicolon=!0;break}if("{"===e){a=!0;break}if("}"===e){if(l.length>0){for(n=l.length-1,r=l[n];r&&"space"===r[0];)r=l[--n];r&&(i.source.end=this.getPosition(r[3]||r[2]))}this.end(t);break}l.push(t)}else l.push(t);if(this.tokenizer.endOfFile()){s=!0;break}}i.raws.between=this.spacesAndCommentsFromEnd(l),l.length?(i.raws.afterName=this.spacesAndCommentsFromStart(l),this.raw(i,"params",l),s&&(t=l[l.length-1],i.source.end=this.getPosition(t[3]||t[2]),this.spaces=i.raws.between,i.raws.between="")):(i.raws.afterName="",i.params=""),a&&(i.nodes=[],this.current=i)}end(t){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(t[2]),this.current=this.current.parent):this.unexpectedClose(t)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces}freeSemicolon(t){if(this.spaces+=t[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&"rule"===t.type&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(t){let e=this.input.fromOffset(t);return{offset:t,line:e.line,column:e.col}}init(t,e){this.current.push(t),t.source={start:this.getPosition(e),input:this.input},t.raws.before=this.spaces,this.spaces="","comment"!==t.type&&(this.semicolon=!1)}raw(t,e,r,n){let i,s,o,a,l=r.length,c="",h=!0;for(let t=0;t<l;t+=1)i=r[t],s=i[0],"space"!==s||t!==l-1||n?"comment"===s?(a=r[t-1]?r[t-1][0]:"empty",o=r[t+1]?r[t+1][0]:"empty",u[a]||u[o]||","===c.slice(-1)?h=!1:c+=i[1]):c+=i[1]:h=!1;if(!h){let n=r.reduce((t,e)=>t+e[1],"");t.raws[e]={value:c,raw:n}}t[e]=c}spacesAndCommentsFromEnd(t){let e,r="";for(;t.length&&(e=t[t.length-1][0],"space"===e||"comment"===e);)r=t.pop()[1]+r;return r}spacesAndCommentsFromStart(t){let e,r="";for(;t.length&&(e=t[0][0],"space"===e||"comment"===e);)r+=t.shift()[1];return r}spacesFromEnd(t){let e,r="";for(;t.length&&(e=t[t.length-1][0],"space"===e);)r=t.pop()[1]+r;return r}stringFrom(t,e){let r="";for(let n=e;n<t.length;n++)r+=t[n][1];return t.splice(e,t.length-e),r}colon(t){let e,r,n,i=0;for(let[s,o]of t.entries()){if(e=o,r=e[0],"("===r&&(i+=1),")"===r&&(i-=1),0===i&&":"===r){if(n){if("word"===n[0]&&"progid"===n[1])continue;return s}this.doubleColon(e)}n=e}return!1}unclosedBracket(t){throw this.input.error("Unclosed bracket",{offset:t[2]},{offset:t[2]+1})}unknownWord(t){throw this.input.error("Unknown word",{offset:t[0][2]},{offset:t[0][2]+t[0][1].length})}unexpectedClose(t){throw this.input.error("Unexpected }",{offset:t[2]},{offset:t[2]+1})}unclosedBlock(){let t=this.current.source.start;throw this.input.error("Unclosed block",t.line,t.column)}doubleColon(t){throw this.input.error("Double colon",{offset:t[2]},{offset:t[2]+t[1].length})}unnamedAtrule(t,e){throw this.input.error("At-rule without name",{offset:e[2]},{offset:e[2]+e[1].length})}precheckMissedSemicolon(){}checkMissedSemicolon(t){let e=this.colon(t);if(!1===e)return;let r,n=0;for(let i=e-1;i>=0&&(r=t[i],"space"===r[0]||(n+=1,2!==n));i--);throw this.input.error("Missed semicolon","word"===r[0]?r[3]+1:r[2])}}},function(t,e,r){"use strict";const n="'".charCodeAt(0),i='"'.charCodeAt(0),s="\\".charCodeAt(0),o="/".charCodeAt(0),a="\n".charCodeAt(0),l=" ".charCodeAt(0),u="\f".charCodeAt(0),c="\t".charCodeAt(0),h="\r".charCodeAt(0),f="[".charCodeAt(0),p="]".charCodeAt(0),d="(".charCodeAt(0),g=")".charCodeAt(0),m="{".charCodeAt(0),y="}".charCodeAt(0),b=";".charCodeAt(0),w="*".charCodeAt(0),v=":".charCodeAt(0),x="@".charCodeAt(0),S=/[\t\n\f\r "#'()/;[\\\]{}]/g,_=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,T=/.[\n"'(/\\]/,A=/[\da-f]/i;t.exports=function(t,e={}){let r,E,O,C,k,P,D,L,M,R,I=t.css.valueOf(),q=e.ignoreErrors,N=I.length,j=0,B=[],U=[];function F(e){throw t.error("Unclosed "+e,j)}return{back:function(t){U.push(t)},nextToken:function(t){if(U.length)return U.pop();if(j>=N)return;let e=!!t&&t.ignoreUnclosed;switch(r=I.charCodeAt(j),r){case a:case l:case c:case h:case u:E=j;do{E+=1,r=I.charCodeAt(E)}while(r===l||r===a||r===c||r===h||r===u);R=["space",I.slice(j,E)],j=E-1;break;case f:case p:case m:case y:case v:case b:case g:{let t=String.fromCharCode(r);R=[t,t,j];break}case d:if(L=B.length?B.pop()[1]:"",M=I.charCodeAt(j+1),"url"===L&&M!==n&&M!==i&&M!==l&&M!==a&&M!==c&&M!==u&&M!==h){E=j;do{if(P=!1,E=I.indexOf(")",E+1),-1===E){if(q||e){E=j;break}F("bracket")}for(D=E;I.charCodeAt(D-1)===s;)D-=1,P=!P}while(P);R=["brackets",I.slice(j,E+1),j,E],j=E}else E=I.indexOf(")",j+1),C=I.slice(j,E+1),-1===E||T.test(C)?R=["(","(",j]:(R=["brackets",C,j,E],j=E);break;case n:case i:O=r===n?"'":'"',E=j;do{if(P=!1,E=I.indexOf(O,E+1),-1===E){if(q||e){E=j+1;break}F("string")}for(D=E;I.charCodeAt(D-1)===s;)D-=1,P=!P}while(P);R=["string",I.slice(j,E+1),j,E],j=E;break;case x:S.lastIndex=j+1,S.test(I),E=0===S.lastIndex?I.length-1:S.lastIndex-2,R=["at-word",I.slice(j,E+1),j,E],j=E;break;case s:for(E=j,k=!0;I.charCodeAt(E+1)===s;)E+=1,k=!k;if(r=I.charCodeAt(E+1),k&&r!==o&&r!==l&&r!==a&&r!==c&&r!==h&&r!==u&&(E+=1,A.test(I.charAt(E)))){for(;A.test(I.charAt(E+1));)E+=1;I.charCodeAt(E+1)===l&&(E+=1)}R=["word",I.slice(j,E+1),j,E],j=E;break;default:r===o&&I.charCodeAt(j+1)===w?(E=I.indexOf("*/",j+2)+1,0===E&&(q||e?E=I.length:F("comment")),R=["comment",I.slice(j,E+1),j,E],j=E):(_.lastIndex=j+1,_.test(I),E=0===_.lastIndex?I.length-1:_.lastIndex-2,R=["word",I.slice(j,E+1),j,E],B.push(R),j=E)}return j++,R},endOfFile:function(){return 0===U.length&&j>=N},position:function(){return j}}}},function(t,e,r){"use strict";let n=r(245),i=r(188),s=r(158),o=r(128);class a{constructor(t=[]){this.version="8.4.16",this.plugins=this.normalize(t)}use(t){return this.plugins=this.plugins.concat(this.normalize([t])),this}process(t,e={}){return 0===this.plugins.length&&void 0===e.parser&&void 0===e.stringifier&&void 0===e.syntax?new n(this,t,e):new i(this,t,e)}normalize(t){let e=[];for(let r of t)if(!0===r.postcss?r=r():r.postcss&&(r=r.postcss),"object"==typeof r&&Array.isArray(r.plugins))e=e.concat(r.plugins);else if("object"==typeof r&&r.postcssPlugin)e.push(r);else if("function"==typeof r)e.push(r);else{if("object"!=typeof r||!r.parse&&!r.stringify)throw new Error(r+" is not a PostCSS plugin")}return e}}t.exports=a,a.default=a,o.registerProcessor(a),s.registerProcessor(a)},function(t,e,r){"use strict";let n=r(189),i=r(135),s=(r(192),r(160));const o=r(159);class a{constructor(t,e,r){e=e.toString(),this.stringified=!1,this._processor=t,this._css=e,this._opts=r,this._map=void 0;let s=i;this.result=new o(this._processor,void 0,this._opts),this.result.css=e;let a=this;Object.defineProperty(this.result,"root",{get:()=>a.root});let l=new n(s,void 0,this._opts,e);if(l.isMap()){let[t,e]=l.generate();t&&(this.result.css=t),e&&(this.result.map=e)}}get[Symbol.toStringTag](){return"NoWorkResult"}get processor(){return this.result.processor}get opts(){return this.result.opts}get css(){return this.result.css}get content(){return this.result.css}get map(){return this.result.map}get root(){if(this._root)return this._root;let t,e=s;try{t=e(this._css,this._opts)}catch(t){this.error=t}if(this.error)throw this.error;return this._root=t,t}get messages(){return[]}warnings(){return[]}toString(){return this._css}then(t,e){return this.async().then(t,e)}catch(t){return this.async().catch(t)}finally(t){return this.async().then(t,t)}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}sync(){if(this.error)throw this.error;return this.result}}t.exports=a,a.default=a},function(t,e,r){"use strict";let n=r(133),i=r(191),s=r(137),o=r(161),a=r(136),l=r(128),u=r(162);function c(t,e){if(Array.isArray(t))return t.map(t=>c(t));let{inputs:r,...h}=t;if(r){e=[];for(let t of r){let r={...t,__proto__:a.prototype};r.map&&(r.map={...r.map,__proto__:i.prototype}),e.push(r)}}if(h.nodes&&(h.nodes=t.nodes.map(t=>c(t,e))),h.source){let{inputId:t,...r}=h.source;h.source=r,null!=t&&(h.source.input=e[t])}if("root"===h.type)return new l(h);if("decl"===h.type)return new n(h);if("rule"===h.type)return new u(h);if("comment"===h.type)return new s(h);if("atrule"===h.type)return new o(h);throw new Error("Unknown node type: "+t.type)}t.exports=c,c.default=c}])]);