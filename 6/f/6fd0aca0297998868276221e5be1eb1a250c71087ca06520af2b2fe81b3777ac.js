!function(){"use strict";var __assign=Hook=),isObject=isNumber=isString=isArray=function(e){return Array.isArray(e)},getIndex=(lastEventId=+Date.now()+Number((""+Math.random()).slice(2,8)),,lastEventId,decrypto=decodeUrl=beforePageUnload=getIframeUrl=loadScript=isSupVisChange=selfAdjust=parseURL=parseUrlQuery=function(e){var t={};try{var i=parseURL(e).search;if(!i)return t;(i=i.slice(1)).split("&").forEach(}catch(e){}return t},hashCode=commonjsGlobal="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};ar js_cookie=createCommonjsModule(,_getCookie=function(e,t){try{return e?js_cookie.get(e,{domain:t||document.domain}):js_cookie.get()}catch(e){return""}},_setCookie=Memory=);function isSupportLS(){try{return localStorage.setItem("_ranger-test-key","hi"),localStorage.getItem("_ranger-test-key"),localStorage.removeItem("_ranger-test-key"),!0}catch(e){return!1}}ar local={getItem:function(e){try{var t=localStorage.getItem(e),i=t;try{t&&"string"==typeof t&&(i=JSON.parse(t))}catch(e){}return i||{}}catch(e){}return{}},setItem:function(e,t){try{var i="string"==typeof t?t:JSON.stringify(t);localStorage.setItem(e,i)}catch(e){}},removeItem:function(e){try{localStorage.removeItem(e)}catch(e){}},getCookie:function(e,t){return _getCookie(e,t)},setCookie:function(e,t,i,n){_setCookie(e,t,i,n)},isSupportLS:isSupportLS()},session={getItem:setItem:removeItem:getCookie:setCookie:isSupportSession:isSupportSession()},Storage=),UTM=Client=function(){eturn e.prototype.init=function(){var e=window.navigator.userAgent,t=window.navigator.language,i=document.referrer,n=i?parseURL(i).hostname:"",o=parseUrlQuery(window.location.href),s=/Mobile|htc|mini|Android|iP(ad|od|hone)/.test(this.appVersion)?"wap":"web";this.utm=UTM(this.appid,o,this.domain,this.cookie_expire);var r=this.browser(),a=this.os();return{browser:r.browser,browser_version:r.browser_version,platform:s,os_name:a.os_name,os_version:a.os_version,userAgent:e,screen_width:window.screen&&window.screen.width,screen_height:window.screen&&window.screen.height,device_model:this.getDeviceModel(a.os_name),language:t,referrer:i,referrer_host:n,utm:this.utm,latest_data:this.last(i,n)}},e.prototype.last=e.prototype.browser=function(){var e,t,i="",n=""+parseFloat(this.appVersion),o=this.userAgent;return-1!==o.indexOf("Edge")||-1!==o.indexOf("Edg")?(i="Microsoft Edge",-1!==o.indexOf("Edge")?(e=o.indexOf("Edge"),n=o.substring(e+5)):(e=o.indexOf("Edg"),n=o.substring(e+4))):-1!==(e=o.indexOf("MSIE"))?(i="Microsoft Internet Explorer",n=o.substring(e+5)):-1!==(e=o.indexOf("Lark"))?(i="Lark",n=o.substring(e+5,e+11)):-1!==(e=o.indexOf("MetaSr"))?(i="sougoubrowser",n=o.substring(e+7,e+10)):-1!==o.indexOf("MQQBrowser")||-1!==o.indexOf("QQBrowser")?(i="qqbrowser",-1!==o.indexOf("MQQBrowser")?(e=o.indexOf("MQQBrowser"),n=o.substring(e+11,e+15)):-1!==o.indexOf("QQBrowser")&&(e=o.indexOf("QQBrowser"),n=o.substring(e+10,e+17))):-1!==o.indexOf("Chrome")?-1!==(e=o.indexOf("MicroMessenger"))?(i="weixin",n=o.substring(e+15,e+20)):-1!==(e=o.indexOf("360"))?(i="360browser",n=o.substring(o.indexOf("Chrome")+7)):-1!==o.indexOf("baidubrowser")||-1!==o.indexOf("BIDUBrowser")?(-1!==o.indexOf("baidubrowser")?(e=o.indexOf("baidubrowser"),n=o.substring(e+13,e+16)):-1!==o.indexOf("BIDUBrowser")&&(e=o.indexOf("BIDUBrowser"),n=o.substring(e+12,e+15)),i="baidubrowser"):-1!==(e=o.indexOf("xiaomi"))?-1!==o.indexOf("openlanguagexiaomi")?(i="openlanguage xiaomi",n=o.substring(e+7,e+13)):(i="xiaomi",n=o.substring(e-7,e-1)):-1!==(e=o.indexOf("TTWebView"))?(i="TTWebView",n=o.substring(e+10,e+23)):-1!==(e=o.indexOf("Chrome"))?(i="Chrome",n=o.substring(e+7)):-1!==(e=o.indexOf("Chrome"))&&(i="Chrome",n=o.substring(e+7)):-1!==o.indexOf("Safari")?-1!==(e=o.indexOf("QQ"))?(i="qqbrowser",n=o.substring(e+10,e+16)):-1!==(e=o.indexOf("Safari"))&&(i="Safari",n=o.substring(e+7),-1!==(e=o.indexOf("Version"))&&(n=o.substring(e+8))):-1!==(e=o.indexOf("Firefox"))?(i="Firefox",n=o.substring(e+8)):-1!==(e=o.indexOf("MicroMessenger"))?(i="weixin",n=o.substring(e+15,e+20)):-1!==(e=o.indexOf("QQ"))&&(i="qqbrowser",n=o.substring(e+3,e+8)),-1!==(t=n.indexOf(";"))&&(n=n.substring(0,t)),-1!==(t=n.indexOf(" "))&&(n=n.substring(0,t)),-1!==(t=n.indexOf(")"))&&(n=n.substring(0,t)),{browser:i,browser_version:n}},e.prototype.os=function(){for(var e="",t="",i=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0|Windows NT 10.1)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Android",r:/Android/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/}],n=0;n<i.length;n++){var o=i[n];if(o.r.test(this.userAgent)){"Mac OS X"===(e=o.s)&&this.isNewIpad()&&(e="iOS");break}}var s=r=/Windows/.test(e)&&(t=s(/Windows (.*)/,e),e="windows");var a,c;switch(e){case"Mac OS X":t=r("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent),e="mac";break;case"Android":a=this.userAgent,(c=s(/Android ([\.\_\d]+)/,a))||(c=s(/Android\/([\.\_\d]+)/,a)),t=c,e="android";break;case"iOS":t=this.isNewIpad()?r("Mac[ +]OS[ +]X(?:[ /](?:Version )?(\\d+(?:[_\\.]\\d+)+))?",this.userAgent):(t=/OS (\d+)_(\d+)_?(\d+)?/.exec(this.appVersion))?t[1]+"."+t[2]+"."+(0|t[3]):"",e="ios"}return{os_name:e,os_version:t}},e.prototype.getDeviceModel=e.prototype.isNewIpad=e}(),LOG;LOG={cn:"1fz22z22z1nz21z4mz4bz4bz1kz1az21z4az28z1gz1hz1gz1cz18z1nz1gz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz21z1ez18z1jz1gz49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz1kz18z1jz1gz24z18z49z1kz1az21z4az19z27z22z1cz1mz24z1cz20z21z1cz18z4az1az1mz1k"};var AB_DOMAINS={cn:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",va:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az1gz22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k",sg:"1fz22z22z1nz21z4mz4bz4bz22z1mz19z1jz1mz1ez4az22z1mz19z21z1lz21z21z1bz1iz4az1az1mz1k"},LOG_URL=LOG,SDK_VERSION="5.0.39",SDK_USE_TYPE="npm";SDK_USE_TYPE="script";var SDK_TYPE=SDK_USE_TYPE,VISUAL_EDITOR_RANGERS="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-editor-rangers.js",VISUAL_AB_CORE="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-ab-core.js",VISUAL_AB_LOADER="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/visual-ab-loader.js",HOT_PIC_URL="https://lf-cdn-tos.bytescm.com/obj/static/log-sdk/collect/heatmap-core",VISUAL_URL_INSPECTOR="https://lf3-data.volccdn.com/obj/data-static/log-sdk/collect/tester-event-inspector",EventCheck=function(){eturn e.prototype.checkVerify=)}),this.checkEventParams(o){return!!e&&this.calculate(e,"event")},e.prototype.checkEventParams=function(e){var t=e;if("string"==typeof e&&(t=JSON.parse(t)),!Object.keys(t).length)return!0;for(var i in t)return!!this.calculate(i,"params")&&(!("string"==typeof t[i]&&t[i].length>1024)||(console.warn("params: "+i+" can not over 1024 byte, please check;"),!1));return!0},e.prototype.calculate=function(e,t){return-1!==("event"===t?this.eventNameWhiteList:this.paramsNameWhiteList).indexOf(e)||(!new RegExp("^\\$").test(e)&&!new RegExp("^__").test(e)||(console.warn(("event"===t?"event":"params")+" name: "+e+" can not start with $ or __, pleace checkonRecordReport="ses.DEVTOOL_WEB_READY="devtool-web-ready"}(DebuggerMesssge$1||(DebuggerMesssge$1={}));var Types$1=Types,undef=void 0,date=new Date,timeZoneMin=date.getTimezoneOffset(),timezone=parseInt(""+-timeZoneMin/60,10),tz_offset=60*timeZoneMin,WEBID_URL="/webid",TOB_URL="/tobid",REPORT_URL="/list",EXPIRE_TIME=7776e6,ConfigManager=function(){function e(e,t){this.is_first_time=!0,this.configPersist=!1,this.initConfig=t,this.collect=e;var i=new Client(t.app_id,t.cookie_domain||"",t.cookie_expire||EXPIRE_TIME).init();this.eventCheck=new EventCheck(e,t);var n="__tea_cache_first_"+t.app_id;this.configKey="__tea_cache_config_"+t.app_id,this.sessionStorage=new Storage(!1,"session"),this.localStorage=new Storage(!1,"local"),t.configPersist&&(this.configPersist=!0,this.storage=1===t.configPersist?this.sessionStorage:this.localStorage);var o=this.localStorage.getItem(n);o&&1==o?this.is_first_time=!1:(this.is_first_time=!0,this.localStorage.setItem(n,"1")),this.envInfo={user:{user_unique_id:undef,user_type:undef,user_id:undef,user_is_auth:undef,user_is_login:undef,device_id:undef,web_id:undef,ip_addr_id:undef,user_unique_id_type:undef},header:{app_id:undef,app_name:undef,app_install_id:undef,install_id:undef,app_package:undef,app_channel:undef,app_version:undef,ab_version:undef,os_name:i.os_name,os_version:i.os_version,device_model:i.device_model,ab_client:undef,traffic_type:undef,client_ip:undef,device_brand:undef,os_api:undef,access:undef,language:i.language,region:undef,app_language:undef,app_region:undef,creative_id:i.utm.creative_id,ad_id:i.utm.ad_id,campaign_id:i.utm.campaign_id,log_type:undef,rnd:undef,platform:i.platform,sdk_version:SDK_VERSION,sdk_lib:"js",province:undef,city:undef,timezone:timezone,tz_offset:tz_offset,tz_name:undef,sim_region:undef,carrier:undef,resolution:i.screen_width+"x"+i.screen_height,browser:i.browser,browser_version:i.browser_version,referrer:i.referrer,referrer_host:i.referrer_host,width:i.screen_width,height:i.screen_height,screen_width:i.screen_width,screen_height:i.screen_height,utm_term:i.utm.utm_term,utm_content:i.utm.utm_content,utm_source:i.utm.utm_source,utm_medium:i.utm.utm_medium,utm_campaign:i.utm.utm_campaign,tracer_data:JSON.stringify(i.utm.tracer_data),custom:{},wechat_unionid:undef,wechat_openid:undef}},this.ab_version="",this.evtParams={},this.reportErrorCallback=function(){},this.isLast=!1,this.setCustom(i),this.initDomain(),this.ininel;this.domain=decodeUrl(LOG_URL[t])}},e.prototype.setDomain=function(e){this.domain=e},e.prototype.getDomain=function(){retlStorage.getItem(e);this.setAbCache(t)},e.prototype.setAbCache=function(e){this.ab_cache=e},e.prototype.getAbCache=function(){return this.ab_cache},e.prototype.setAbVersion=function(e){this.ab_version=e},e.prototype.getAbVersion=function(){return this.ab_version},e.prototype.getUrl=function(e){var t="";switch(e){case"event":t=this.initConfig.report_url||REPORT_URL;break;case"webid":t=WEBID_URL;break;case"tobid":t=TOB_URL}var i="";return this.initConfig.caller&&(i="?sdk_version="+SDK_VERSION+"&sdk_name=web&app_id="+this.initConfig.app_id+"&caller="+this.initConfig.caller),""+thisInfo.header.cust[i]:t.envInfo.he,level:"error",time:D‰∫ÜÂºÇÂ∏∏",level:"errèëÁîü‰∫ÜÂºÇÂ∏∏",lev∏",level:"er+e)},e.protoe){try{AppLogBridge.profileAppend(e)}catch(e){console.error("profileAppend error")}},e}(),ERROR={NO_URL:4001,IMG_ON:4e3,IMG_CATCH:4002,BEACON_FALSE:4003,XHR_ON:500,RESPONSE:5001,TIMEOUT:5005};function fetch$1(e,t,i,n,o,s,r,a,c){try{var l=new XMLHttpRequest,u=a||"POST";l.open(u,""+e,!0),l.setRequestHeader("Content-Type","application/json; charset=utf-8"),r&&l.setRn&&(l.with{var e=nulponseText)}catch(t){e={}}o(e,t)}}},l.onerror=function(){l.abort(),s&&s(t,ERROR.XHR_ON)},c?l.send(t):l.send(JSON.stringify(t))}catch(e){}}var GIF_URL="/gif",ERROR$1={NO_URL:4001,IMG_ON:4e3,5},isSupportBeacon=function(){return!(!window.navigator||!window.navigator.sendBeacon)},encodePayload=function(e){var t="";for(var i in e)e.hasOwnProperty(i)&&void 0!==e[i]&&(t+="&"+i+"="+encodeURIComponent(JSON.stringify(e[i])));return t="&"===t[0]?t.slice(1):t},sendByImg=function(e,t,i,n){try{var o=e.match(/\/v\d\//),s="";s=o?o[0]:-1!==e.indexOf("/v1i&&i()},a.onerror=function(){a=null,n&&n(e,t,ERROR$1.IMG_ON)},a.src=""+r+GIF_URL+"?"+s})}catch(i){n&&n(e,t,ERROR$1.IMG_CATCH,i.message)}},request=function(e,t,i,n,o,s,r,a){var c=window.navigator.userAgent;if(-1===window.navigator.appName.indexOf("Microsoft Internet Explorer")||-1===c.indexOf("MSIE 8.0")&&-1===c.indexOf("MSIE 9.0")){if(r)return isSupportBeacon()?void(window.navigator.sendBeacon(e,JSON.stringify(t))?o():s(e,t,ERROR$1.BEACON_FALSE)):ce(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"nId()}),this.collect.on(Types$1.)}:e.timestamp=Date.now()is.sessionKey,t),this.sese.getItem(this.sessionKeyhis.sessionExp),this.sessioe={sessionId:sessionI{sessionId:sessionId()){this.eventLimit=50,this.enable_ttwebid=!1,this.eventCache=[],this.beconEventCache=[]}return e.prototype.apply=function(e,t){var i=this;this.collect=e,this.config=t,this.configManager=e.configManager,this.eventCheck=new EventCheck(e,t),this.cacheStorgae=new Storage(!0),this.localStorage=new Storage(!1),this.maxReport=t.max_report||10,this.reportTime=t.reportTime||30,this.timeout=t.timeout||1e5,this.enable_ttwebid=t.enable_ttwebid,this.reportUrl=this.configManager.getUrl("event"),this.eventKey="__tea_cache_events_"+this.configManager.get("app_id"),this.beconKey="__tea_cache_events_becon_"+this.configManager.get("app_id"),this.abKey="__tea_sdk_ab_version_"+this.configManager.get("app_id"),this.pageId=sessionId(),this.colcollect.on(Types$1.ConfigDomain,function(){i.reportUrl=i.configManager.getUrl("event")}),this.collect.on(Types$1.Event,function(e){i.event(e)}),this.collect.on(Types$1.BeconEvent,function(e){i.beconEvent(e)}),this.collect.visibilitychange",funceportAll(!0)},!1)}ge$1.DEBUGGER_MESSAGE_S.sdkReady&&(this.cacheSte.length&&(this.cacthis.eventKey)||[];t.le;var o=this.split(this.merge(n));this.send(o,t)}else{o=this.split(this.merge(e));this.send(o,t)}},e.prototype.merge=function(e,t){var i=this,n=this.configManager.get(),o=n.header,s=n.user;this.config.enable_pageid&&(o.custom.page_id=this.pageId),o.custom=JSON.stringify(o.custom);gerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",time:Date.now(),data:t.message}),e}}),l=JSON.parse(JSON.stringify({events:c,user:s,header:o}));l.local_time=Math.floor(Date.now()/1e3),l.user_unique_type=this.config.enreturn u.push(l),k)),i.c∏",level:"eunction e(t){retud=function(){return b().nfigWebId,function(e){i.sunction(){e.tokenRete(this.cacheToken):rlQuery(window.location.href);return!(!t||!t.Web_ID)&&(this.complete({web_id:""+t.Web_ID,user_unique_id:this.configManager.get("user_unique_id")||""+t.Web_ID}),!0)}return!1},e.prototype.remoteWebid=function(){var e=this,t=this.configManager.getUrl("webid"),i={app_key:this.config.app_key,app_id:this.config.app_id,url:location.href,user_agent:window.navigator.userAgent,referer:document.referrer,user_unique_id:""};this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK ÂèëËµ∑WEBIDËØ∑Ê±Ç",logType:"fetch",level:"info",time:Date.now(),data:i}),fetch$1(t,i,3e3,!1,function(t){t&&0===t.e?e.complete({web_id:e.configManager.get("web_id")||t.web_id,user_unique_id:e.configManager.get("user_unique_id")||t.web_id}):(e.collect.emit(Types$1.TokenError),console.warn("[]appid: "+e.config.app_id+" webid error, init error~")),e.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"WEBIDËØ∑Ê±ÇÊàêÂäü",logType:"fetch",level:"info",time:Date.now(),data:t})},function(){e.collect.emit(Types$1.TokenError),e.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGEn(e){var t=e.web_id,i=e.usr t=e.user_unique_id||"",i=this.configManager.get("user_unique_id");(i||t)&&this.configManager.set({user_unique_id:i||t}),this.setStorage(e),this.tokenReady=!0,this.collect.emit(Types$1.TokenComplete)},e.prototype.setUuid=function(e){if(e&&-1===["null","undefined","Null","None"].indexOf(e)){var t=String(e),i=this.configManager.get("user_unique_id"),n=this.cacheToken&&this.cacheToken.user_unique_id;if(t===i&&t===n)return;this.configManager.set({user_unique_id:t}),this.cacheToken?this.cacheToken.user_unique_id=t:(this.cacheToken={},this.cacheToken.user_unique_id=t),this.cacheToken.timestamp=Date.now(),this.setStorage(this.cacheToken),this.collect.emit(Types$1.TokenChange,"uuid"),this.collect.emit(Types$1.SessionReset)}else this.clearUuid()},e.prototype.clearUuid=function(){this.config.enable_ttwebid||this.configManager.get("web_id")&&this.configManager.get("user_unique_id")!==this.configManager.get("web_id")&&(this.configManager.set({user_unique_id:this.configManager.get("web_id")}),this.cacheToken&&this.cacheToken.ager.set({user_unique_irage.setCookie(this.tokenKey,e,this.expiresTime,this.cookieDomain),this.enabluser_unique_id"),web_id:e.configManager.get("web_id"),user_unique_id_type:e.configManager.get("user_unique_id_type")},3e4,e.enable_ttwebid,function(e){e&&0===e.e?i(e.tobid):i("")},function(){i("")})})},e}(),AutoBase=function(e){var t=e.app_id,i=e.channel,n=e.onTokenReady,o=LOG_URL[i]+"/webid",s=ator.userAgent,referer:document.referrer},3e3,!1,function(e){if(e&&0===e.e){n(e.web_id);var t={web_id:e.web_id,user_unique_id:e.web_id,timestamp:Date.now()};s.setItem(r,t)}else n("")},function(){n("")},!0)},Debugger=function(){function e(e,t){this.devToolReady=!1,this.devToolOrigin="*",this.sendAlready=!1,this.collect=e,this.config=t,this.app_id=t.app_id,this.filterEvent=["__bav_page","__bav_beat","__bav_page_statistics","__bav_click","__bav_page_exposure","bav2b_page","bav2b_beat","bav2b_page_statistics","bav2b_click","bav2b_page_exposure","_be_active","predefine_pageview","ad DevTool renderry(window.location.href)his.loadDevTool()}catch(e){console.log("debug fail, "+e.message)}},e.prototype.loadDevTool=function(){this.loadScript("https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/devtool/debug-web.js")},e.prototype.loadBaseInfo=function(){var e=this;this.info=[{title:"Âü∫Êú¨‰ø°ÊÅØ",type:1,infoName:{app_id:this.config.app_id,channel:this.config.channel,"‰∏äÊä•ÂüüÂêç":this.collect.configManager.getDomain(),"SDKÁâàÊú¨":SDK_VERSION,"SDKÂºïÂÖ•ÊñπÂºè":SDK_TYPE}},{title:"Áî®Êà∑‰ø°ÊÅØ",type:2,infoName:{uuid:this.collect.configManager.get("user").user_unique_id||"",web_id:this.collect.configManager.get("user").web_id||"",ssid:"ÁÇπÂáªËé∑ÂèñSSID"}},{title:"ÂÖ¨ÂÖ±ÂèÇÊï∞‰ø°ÊÅØ",type:2,infoName:{"ÊµèËßàÂô®":this.collect.configManager.get("browser"),"ÊµèËßàÂô®ÁâàÊú¨":this.collect.configManager.get("browser_version"),"Âπ≥Âè∞":this.collect.configManager.get("platform"),"ËÆæÂ§áÂûãÂè∑":this.collect.configManager.get("device_model"),"Êìç‰ΩúÁ≥ªÁªü":this.collect.configManager.get("os_name"),"Êìç‰ΩúÁ≥ªÁªüÁâàÊú¨":this.collect.configManager.get("os_version"),"Â±èÂπïÂàÜËæ®Áéá":this.collect.configManager.get("resolution"),"Êù•Ê∫ê":this.collect.configManager.get("r‰πâ‰ø°ÊÅØ"]=JSON.string_id),void e.updateInfo()s;window.addEventListrigin=t.origin,e.devTooweb:init",{info:e.info,log:e.log,event:e.event}),e.sendAlready=!0}t&&t.data&&"devtool:web:ssid"===t.data.type&&e.collect.getTokenfunction(e,t){try{var i={type:eger-applog-web">AppLogË∞ÉËØï</div>';var n=document.createElemeype:"devtool:web:ostroyInstance=!1,this.sdkReady=!1,this.adapters={},this.name=e,this.hook=new Hook,this.remotePlugin=new Map,this.Types=Types$1,this.adapters.fetch=fetch$1,this.adapters.storage=Storage}return e.usePlugin=function(t,i,n){if(i){for(var o=!1,s=0,r=e.plugins.length;s<r;s++){if(e.plugins[s].name===i){e.plugins[s].plugin=t,e.plugins[s].options=n||{},o=!0;break}}o||e.plugins.push({name:i,plugin:t,options:n})}else e.plugins.push({plugin:t})},e.prototype.usePlugin=function(e,t,i){e&&("full"===sdk_type&&this.remotePlugin.get(e)?console.info("your sdk version has "+e+" already ~"):t?"string"==typeof t?this.remotePlugin.get(e)||this.remotePlugin.set(e,{src:t,call:i}):this.remotePlugin.get(e)||this.remotePlugin.set(e,{instance:t}):this.remotePlugin.get(e)||this.remotePlugin.set(e,"sdk"))},e.prototype.init=function(t){var i=this;this.inited?console.warn("[instance: "+this.name+"], every instance's api: init,  can be call only one time!"):t&&isObject(t)?t.app_id&&isNumber(t.app_id)?!t.app_key||isString(t.app_key)?(t.channel_domain||-1!==["cn","sg","va"].indexOf(t.channel)||(console.warn("channel must be `cn`, `sg`,`va` !!!"),t.channel="cn"),this.logger=new Logger(this.name,t.log),this.appBridge=new AppBridge(this,t.enable_native),this.bridgeReport=this.appBridge.bridgeInject(),this.configManager=new ConfigManager(this,t),this.debugger=new Debugger(this,t),this.initConfig=t,this.emit(Types$1.Init),this.eMesssge$s$1.TokenReset,function(){i.logger.info("appid: "+t.app_id+" token reset, new userInfo:"+JSON.stringify(i.configManager.get("user"))),i.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK ÈáçÁΩÆ‰∫ÜÁî®Êà∑‰ø°ÊÅØ",time:Date.now(),secType:"USER",level:"info",data:i.configManager.get("user")})}),i.on(Types$1.RouteChange,function(e){e.init||t.disable_route_report||i.pageView()});try{(window.opener||window.parent).postMessage("[tea-sdk]ready","*")}catch(e){}}),this.tokenManager.apply(this,t),this.eventManager.apply(this,t),this.sessionManager.apply(this,t)),this.inited=!0):console.warn("app_key param is error, must be string, please check!"):console.warn("app_id param is error, must be number, please check!"):console.warn("init params error,please check")},e.prototype.config=function(e){if(this.inited)if(e&&isObject(e))if(this.bridgeReport)this.appBridge.setConfig(e);else{e._staging_flag&&1===e._staging_flag&&(this.staging=!0),e.disable_auto_pv&&(this.disableAutoPageView=!0,delete e.disable_auto_pv);var t=__assign({},e);if(this.initConfig&&this.initConfig.configPersist){var i=this.configManager.getStore();i&&(t=Object.assign(i,e)),this.configManager.setStore(e)}t.web_id,t.user_unique_id;var n=__rest(t,[r.set(n),t.hasOwnProperty(_id),t.hasOwnProperty("user_unique_id")&&this.emit(Types$1.ConfigUuid,t.user_unique_id),this.emit(DeFIG",level:"info",time params is error,ole.warn("config must be use after function init")},e.prototype.setUserUniqueID=function(e){this.config({user_unique_id:e})},e.prototype.setHeaderInfo=function(e,t){var i={};i[e]=t,this.config(i)},e.prototype.removeHeaderInfo=function(e){var t={};t[e]=void 0,this.config(t)},e.prototype.setDomain=function(e){this.configManager&&this.ction(e){var t=i.process,this.emit(Types$1.SessiontName is nullÔºå please.test(e)&&(i=e.slice(6));var n=t;"object"!=typeof n&&(n={}),n.profile?delete n.profile:n.event_index=getIndex();var o=void 0;return n.local_ms?(o=n.local_ms,delete n.llocal_time_ms:o,is_bav:this.initConfig&&this.initConfig.autotrack?1E,{type:DebuggerMesssge$1.DEBUfunction(e,t){this.hook.off(.hook.emit(e,t,i)},e.prototype.set=function(e){this.hook.set(e)},e.prototype.pageView=function(){this.disableAutoPageView||this.predefinePageView()},e.prototype.pred={});var t={title:document.titrrer,$is_first_time:""+thisefine_pageview",i)},e.prototypionID=function(e){if(e){var id:""+e})},e.prototyps$1.Stay)},e.prototype.resetStayParams=function(e,t,i){void 0===e&&(e=""),void 0===t&&(t=""),void 0===i&&(i=""),this.emit(Types$1.SetStay,{url_path:e,title:t,url:i},Types$1.Stay)},e.prototype.getToken=function(e,t){var i=this,n=!1,o=function(t){if(!n){n=!0;var o=i.configManager.get().user;return t&&(o.tobid=t,o["diss".split("").reverse().join("")]=t),e(__assign({},o))}},s=function(){i.tokenManager.getTobId().then(function(e){o(e)})};this.sdkReady?s():(t&&setTimeout(function(){o()},t),this.on(Types$1.Ready,function(){s()}))},e.prototype.profileSet=function(e){this.bridgeReport?this.appBridge.profileSet(JSON.stringify(e)):this.emit(Types):this.emit(Types$1.ProfiofileIncrement(JSON.stringify(e)):this.emit(Types$1.ProfileIncrement,e,Types$1.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK ÊâßË°åprofileIncrement",level:"info",time:Date.now(),data:e})},e.prototype.profileUnset=function(e){this.bridgeReport?this.appBridge.profileUnset(e):this.emMesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK ÊâßË°åprofileUnset",level:"info",time:Date.now(),data:e})},e.prototype.profileAppend=functs.emit(Types$1.ProfileAppend,e,Types$1.Profile),this.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssgeis.emit(Types$1.AbExternalVersion,"string"==typeof e&&e?(""+e).trim():null,Types$1.Ab)},e.prototype.getVar=function(e,t,i){this.emit(Types$1.AbVar,{name:e,defaultValue:t,callback:i},Types$1.Ab)},e.prototype.gs:e,callback:t},Types$1s.configManager.getAbVersion()},e.prototype.onAbSdkVersionChange=function(e){var t=this;reangeOff,e,Types$1.Ab)}},e.proto.openOverlayer=funypes$1.Ab)},e.prototype.getAllVaf window?(window.LogPluginObject||(window.LogPlugi].push(t)}function processMap[i]&&msgQueueMap[i].forEach(function(t){"function"==typeof t&&t(e,n)})}}function init(e,t){var i=__assign({},e);delete i.filter,(window.opener||window.parent).postMessage({type:"tea:sdk:info",config:i,version:t},"*"),window.addEventListener("message",processMsg,!1)}var VISUAL_URL="",isLoaded=!1;function loadEditorScript(e){var t=e.event,i=e.editorUrl;e.collectInstance,e.fromSession;isLoaded||(isLoaded=!0,loadScript(i,function(){dispatchMsg(t,"abEditorScriptloadSuccess")},function(){t&&dispatchMsg(t,"abEditorScriptloadError"),isLoaded=!1}))ta;if("string"==typeof i.data)try{o=JSON.parse(i.data)}catch(e){o=void 0}if(o){var s=o.lang;if(o.appId!==t.app_id)return dispatchMsg(i,"appIdError"),void console.e,collectInstance:e})}})}var loadMuiltlink=function(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{},window.TEAVisualEditor.appId=t.app_id,receiveMsg("tea:openTesterEventInspector",function(t){var i=t.data;if("string"==typeof t.data)try{i=JSON.parse(t.data)}catch(e){i=void 0}i.TEAVisualEditor.__editor_ajax_domain=n||"",window.TEAVisualEditor.__ab_appId=s||"",window.TEAVisualEditord visual render success")},function(){console.log("load visual render fail")})},CallbackType;!function(e){e[e.Var=0]="Var",e[e.All=1]="All"}(CallbackType||(CallbackType={}));var STORAGE_EXPRIRE=2592e6,API="/service/2/abtest_config/",Ab=function(){function e(){this.fetchStatus="no",this.refreshFetchStatus="complete",this.versions=[],this.extVersions=[],this.mulilinkVersions=[],this.enable_multilink=!1,this.enable_ab_visual=!1,this.editMode=!1,this.callbacks=[],this.data=null,this.changeListener=new Map,this.readyStatus=!1,this.exposureCache=[]}return e.prototype.apply=function(e,t){var i=this;if(this.collect=e,this.config=t,this.config.enable_ab_test){var n=t.enable_multilink,o=t.ab_channel_domain,s=t.enable_ab_visual,r=t.ab_cross,a=t.ab_cookie_domain,c=o||decodeUrl(AB_DOMAINS[e=new u(!1),this.fetch=h,this.enable_multilink=n,this.enable_ab_visual=s,this.abKey="__tea_sdk_ab_version_"+t.app_id,this.ab_cross=r,this.ab_cookie_domain=a||"",this.fetchUrl=""+c+API,this.reportUrl=""+e.configManager.getUrl("event"),this.exposureLimit=t.exposure_limit||20,this.ab_batch_time=t.ab_batch_time||500;var p=this.collect.Types;this.types=p,this.collect.on(p.TokenChange,function(e){"uuid"===e&&i.readyStatus&&(i.clearCache(),i.fetchAB())}),this.collect.on(p.TokenReset&(i.clearCache(),i.fetchAB())}),this.callback;i.getVar(t,n,o)}),this.collect.on(p.AbAllVars,function(e){i.getAllVars(e)}),this.collect.on(p.AbConfig,function(e){var t=e.params,n=e.callback;i.getABconfig(t,n)}),this.collect.on(p.AbExternalVersion,function(e){i.setExternalAbVersion(e)}),this.collect.on(p.AbOpenLayer,function(){i.openOverlayer()}),this.collect.on(p.AbCloseLayer,function(){i.closeOverlayer()}),this.collect.on(p.AbVersionChangeOn,function(e){i.changeListener.set(e,e)}),this.collect.on(p.AbVersionChangeOff,function(e){i.changeListener.get(e)&&i.changeListener.delete(e)}),this.loadMode(),(this.enable_ab_visual||this.enable_multilink)&&this.openOverlayer(this.config.multilink_timeout_ms||500),this.checkLocal(),this.ready("ab"),this.readyStatus||(this.fetchAB(),this.readyStatus=!0),this.collect.emit(p.AbReady)}},e.prototype.ready=function(e){var t=this;if(this.collect.set(e),this.collect.hook._hooksCache.hasOwnProperty(e)){var i=this.collect.hook._hooksCache[e];if(!Object.keydEditor(this.collect,thisnk&&loadMuiltlink(this.collat(this.extVersions);this.es.configVersions(r.>0&&this.changeListenereturn"$ab_url"===t?thisesssge$1.DEBUGGER_MESSAGE_Sn)}else o(n)},e.prototid!==s.user_unique_id)returigator.sendBeacon?window.navigator.sendBeacon(this.reportUrl,JSON.stringify([c])):this.reportExposure(c)}catch(e){this.reportExposure=function(e){var t=this;this.exposureCacheeout),this.exposureCacheTimeout(t.reportTimeout)},this.ab_batch_time)},e.prototype.report=function(){var e=this;this.fetch(this.reportUrl,this.exposureCache,2e4),this.exposureCache.forEach(function(t){e.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_EVENT,info:"ÂüãÁÇπ‰∏äÊä•ÊàêÂäü",time:Date.now(),data:[t],code:200,status:"success"})}),this.exposureCache=[]},e.prototype.setExternalAbVersion=function(e){this.extVersions=[e],this.updateVersions()},e.prototype.getABconfig=function(e,t){var i=Object.keys(e);i&&i.length&&this.collect.configManager.set(e),this.fetchAB(t)},e.prototype.get=function(e){if(this.ab_cross){var t=this.cacheAGE_EXPRIRE,this.ab_coounction(e){var t={ab_version:[],ab_ext_version:[],ab_version_multilink:[],data:null,timestamp:+new Date,uuid:""};return t=this.get(this.abKey)||t,Date.now()-t.timestamp>=STORAGE_EXPRIRE?(this.cacheStorgae.removeItem(this.abKey)tion(){var e=this.getABCache();e.ab_version_multilink=this.mulilinkVersions,e.ab_ext_version=this.extVersions,e.ab_version=this.versions,e.timestamp=Date.now(),this.set(this.abKey,e)},e.prototype.setAbCache=function(e){var t=this.getAstamp=Date.now(),this.set(this.abKey,t)},e.prototype.clearCache=function(){this.refreshFetchStatus="ing",this.data={},this.extVersions=[],this.mulilinkVersions=[],this.versions=[]},e.prototype.openOverlayer=function(e){var t=this;if(opseOverlayer(),clearTimeout(i)},e)},e.prototype.closeOverlayer=function(){closeOverlayer()},e.prototype.fetchComplete=function(e,t){var i=this;if(e&&"[object Object]"==Objeollect.destroyInstance)return;this.getVar("$ab_modification",window.locattilink){this.mulilinkVersions=this.mulilinkVersions.filter(function(e){return n.includes(e)});var r=o.val,a=o.vid;r&&a&&this.getVar("$ab_url",r,function(){i.editMode||(r!==window.location.href?setTimeout(function(){if(!i.collect.destroyInstance){var e=""+r;e=-1===e.indexOf("http")?"https://"+e:e,parseURL(e).host!==location.host?e=e+"&vid="+a:window.history.replaceState("","",e),window.location.href=e}},100):i.closeOverlayer())})}this.updateVersions()}else this.closeOverlayer();thiesssge$1.DEBUGGER_MESSAGE_SDK,info:"SDK ÂèëËµ∑ABÂÆûÈ™åËØ∑Ê±Ç",level:"info",logType:"fetch",time:Date.now(),data:n}),this.fetch(this.fetchUrl,n,this.config.ab_timeout||3e3,!1,function(n){t.fetchStatus="complete",t.refreshFetchStatus="complete";var o=n.data;"success"===n.message?(t.fetchComplete(o,i.user.user_unique_id),e&&e(o)):(t.fetchComplete(null,i.use",logType:"fetch",time:Date.now(),data:o})},function(){t.fetchStatus="complete",t.refreshFetchStatus="complete",t.fetchComplete(null,i.user.user_unique_id),t.collect.emit(t.types.AbTimeout),e&&e(null),t.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,secType:"AB",info:"ABÂÆûÈ™åËØ∑Ê±ÇÁΩëÁªúÂºÇÂ∏∏",level:"error",logType:"fetch",time:Date.now()})})},e.prototype.filt="&multilink=true[\0-√ø]*":-1!==e.indexOf("?multilink=true")&&(t="\\?multili.event_verify_url)if("string"==typeof t.event_verify_url){if(this.url=t.event_verify_url+"/v1/list_test",this.url){var n=e.Types;e.on(n.SubmitBefore,function(e){window.navigator.sendBeacon(i.url,JSON.stringify(e))})}}else console.logn e(e,t){this.maxDuration=432e5,this.aliveDTime=6e4,this.options={aliveName:"predefine_page_alive",params:{}},this.collect=e,this.config=t,this.pageStartTime=Date.now(),this.sessionStartTime=this.pageStartTime,this.timerHandler=null,isObject(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration))}return e.prototype.setParams=function(e,t,i){this.set_path=e,this.set_url=i,this.set_title=t},e.prototype.enable=function(e,t,i){this.url_path=e,this.url=i,this.title=t,this.disableCallback=this.enablePageAlive()},e.prototype.disable=function(){this.disableCallback(),this.pageStartTime=Date.now()},e.prototype.sendEvent=function(e,t){void 0===t&&(t=!1);var i=t?this.aliveDTime:Date.now()-this.sessionStartTime;i<0||i>this.aliveDTime||Date.now()-this.pageStartTime>this.maxDuration||(this.collect.beconEvent(this.options.aliveName,__assign({url_path:this.getParams("url_pityState,leave:e},this.optionath||this.url_path||locatthis.title||document.title||location.pathname;case"url":return this.set_url||this.url||location.href}},e.prototype.setUpTimer=function(){var e=this;return this.timerHandler&&clearInterval(this.timerHandler),setInterval(function(){Date.now()-e.sessionStartTime>e.aliveDTime&&e.sendEvent(!1,!0)},1e3)},e.prototype.visibilitychange=function(){"hidden"===document.visibilityState?this.timerHandler&&(clearInterval(this.timerHandler),this.sendEvent(!1)):"visible"===document.visibilityState&&(this.sessionStartTime=Date.now(),this.timerHandler=thisn document.addEveniveDTime=6e4,this.options={closeName:"predefine_page_close",params:{}},this.visibilitychange=function(){"hidden"===document.visibilityState?i.activeEndTime=Date.now():"visible"===document.visibilityState&&(i.activeEndTime&&(i.totalTime+=i.actid 0,i.activeStartTiartTime,i.config.autotrack){try{window.sessionStorage.setItem("_tea_cache_duration",JSON.stringify({duration:i.totalTime,page_title:document.title||location.pathname}))}catch(e){}}i.sendEventPageClose()},this.collect=e,this.config=t,this.maxDuration=t.maxDuration||864e5,this.pageStartTime=Date.now(),isObject(t.enable_stay_duration)&&(this.options=Object.assign(this.options,t.enable_stay_duration)),this.resetData()}return e.prototype.setParams=function(e,t,i){this.set_path=e,this.set_url=i,this.set_title=t},e.prototype.enable=function(e,t,i){this.url_path=e,this.url=i,this.title=t,this.disableCallback=this.enablePageClose()},e.prototype.disable=function(){this.disableCallback()},e.prototype.resetData=function(){this.activeStartTime=void 0===this.activeStartTime?this.pageStartTime:Date.now(),this.activeEndTime=void 0,this.actithis.getParams("url_path"),title:this.getParams("title"),url:this.getParams("url"),active_times:this.activeTimes,duration:this.totalTime,total_duration:e,is_support_visibility_change:isSupVisChange()},this.opt,location.h&(e=""),void 0===t&&(t=""),void 0===i&&(i=""),this.pageAlive.setParams(e,t,i),this.pageClose.setParams(e,t,i),this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMessor",time:DatsionInterval=6e4,this.startTime=0,this.lastTime=0,this.setInterval();var n=this.collect.Types;this.collect.on(n.SessionReset,function(){i.process()})}},e.prototype.endCurrentSession=function(){this.collect.event("_be_active",{start_time:this.startTime,end_time:this.lastTime,url:window.location.href,referrer:window.document.referrer,title:document.title||location.pathname}),thisnhasEvent||(this.isSessionhasEvent=!0,this.startTime=+new Date);var e=this.lastTime||+new Date;this.lastTime=+new Date,this.lastTime-e>this.sessionInterval&&(this.clearInterval(),this.endCurrentSession(),this.setInterval())},e}(),Monitor=function(){function e(){}return e.prototype.apply=function(e,t){var i=this;if(this.collect=e,this.config=t,!this.config.channel_domain){var n=e.adapters.fetch;if(this.fetch=n,!t.disable_track_event&&!t.disable_sdk_monitor){this.url=e.configManager.getUrl("event")},funarams,header:JSOttribute("data-tea-title"):e.hasAttribute("title")?t=e.getAttribute("title"):"INPUT"===e.nodeName&&["button","submit"].includes(e.getAttribute("type"))?t=e.getAttribute("value"):"IMG"==;return functi),i}function gn ignore(e){f.parenutes=function(e,t){if("string"==typeof t)return hasAttribute(e,t);if(isArray(t)){for(var i=!1,n=0;n<t.length;n++){if(hasAttribute(e,t[n])){i=!0;break}}return i}},getAttributes=function(e,t){var i={};if("string"==typeof t)hasAttribute(e,t)&&(i.attrs=e.getAttribute(t));else if(isArray(t))for(var n=0;n<t.length;n++){hasAttribute(e,t[n])&&(i[t[n]]=e.eturn![].slice.call(t).some(function(e){return e.children.length>0})}return!0},isSVG=function(e){if("=!1;t;)"svg"===t.tagNaurn!1;if(["HTML","BODYay&&(!!isNeedElement(i,"container")||!(!elementLevel(i)&&!t.svg))}var Listener=function(){function e(e,t,i){var n=this;this.clickEveeventName:"click"},e)},this.changeEvent=function(e){n.eventHandel({eventType:"dom",eventName:"change"},e)},this.submitEvent=function(e){n.eventHandel({eventType:"dom",eventName:"submit"},e)},this.getPageViewEvent=function(e,t){t&&"pushState"===t&&n.eventHandel({eventType:"dom",eventName:"beat"},__assign({beat_type:0},e)),n.eventHandel({eventType:"dom",eventName:"pa({eventType:"dom",eventName:"page_statistics"},{lcp:e})},this.config=i.getConfig().eventConfig,this.collect=t,this.opttistics=!1}return e.prototype.init=function(e){th("proxyListener("change",this.changeEvent,!0),this.config.submit&&window.document.addEventListener("submit",this.submitEvent,!0),thcomplete"===document.readyState?this.beatEvent(this.beatTime):wwindow.addEventListener("scroll",function(){clearTimeout(n),n=setTimeout(o,500),i=document.documentar s=window.performanc2e3);else this.getPageLoadEvent(0)}catch(e){this.getPageLoadEvent(0)}}},e.prototype.removeListener=function(){window.document.removeEventListener("click",{eventType:"dom",eventName:"beat"},{beat_type:3}),this.beatTime&&(i=setInterval(function(){t.eventHandel({eventType:"dom",eventName:"beat"},{beat_type:2})},e)),beforePageUnload(function(){t.eventHandel({eventType:"dom",eventName:"beat",eventSend:"becon"},{beat_type:0}),t.beatTime&&clearInterval(i)})}catch(e){}},e}(),defaultConfig={eventConfig:{mode:"proxy-capturing",submit:!1,click:!0,change:!1,pv:!0,beat:!0,hashTag:!1,impr:!1},scoutConfig:{mode:"xpath"}},Config=function(){function e(e,t){this.config=e,this.config.eventConfig=Object.assign(this.config.eventConfig,t)}return e.prottion getEventData(e,t){void 0===e&&(e={}),void 0===t&&(t={});var i=e.clientX,n=e.clientY,o=t.left,s=t.top,r=i-o>=0?i-o:0,a=n-s>=0?n-s:0;return{touch_x:Math.floor(r),touch_y:Math.floor(a)}}function getXpath(e){for(var t=[];null!==e.parentElement;)t.push(e),e=e.parentElrn t.forEach(function(e){var t=getXpathIndex(e),o=t.str,s=t.index;i.unshift(o),n.unshift(s)}),{element_path:"/"+i.join("/"),positions:n}}function getXpathIndex(e){if(null===e)return{str:"",index:0};var t=0,i=e.parentElement;if(i)for(var n=i.children,o=0;o<n.length&&n[o]!==e;o++)n[o].nodeName===e.nodeName&&t++;return{str:[e.nodeName.toLowerCase(),isNeedElement(e,"list")?"[]":""].join(""),index:t}}function getElementData(e,t,i,n){var o={},s=getPositionData(t),r=getEventData(e,s),a=s.element_width,c=s.element_height,l=r.touch_x,u=r.touch_y,h=getXpath(t),p=h.element_path,d=h.positions,g=getText(t),f=window.performance.timing.navigationStart,_=Date.now()-f,m=d.map(function(e){return""+e}),v=null;if(window.TEAVisualEditor&&window.TEAVisualEditor.getOriginXpath&&(v=window.TEAVisualEditor.getOriginXpath({xpath:p,positions:m})),o.element_path=v&lement_class_name=uch_x=l,o.touch_y=u,o.ps_html:1,page_key:window.location.href,page_title:document.title})},getExtraEventData=function(e,t){try{if("bav2b_change"===e)return t.hasAttribute("data-tea-track")?{value:t.value}:{}}catch(e){return{}}},EventHandle=function(){function e(e,t){this.ignore={text:!1},this.initConfig=e,this.options=t,this.eventName=t&&"tea"===t.custom?{click:"__bav_click",page:"__bav_page",beat:"__bav_beat",static:"__bav_page_statistics",exposure:"__bav_page_exposure"}:{click:"bav2b_click",page:"bav2b_page",beat:"bav2b_beat",static:"bav2b_page_statistics",exposure:"bav2b_exposure"},t&&!1rror(e),null}},e.prototype.handleVcrollTop+window.innerHeight:wventName.beat("beat event error "+JSON.stringify(e))}return e},e}(),Request=function(){function e(e){this.collect=e,this.eventNameList=["report_click_event","report_chaisualEditor.laEDIT_VERISON),n=window.TEAVisualEditor.__editor_url=window.TEAVisualEditor.__editor_url||js_cookie.get(COOKIE_EDIT_URL),o=+new Date,s=new Date(o+18e5);js_cookie.set(COOKIE_KEY,"1",{expires:s}),js_cookie.set(COOKIE_KEY_HOST,t,{expires:s}),js_cookie.set(COOKIE_EDIT_URL,n,{expires:s}),js_cookie.set(COOKIE_LANG,e,{expires:s}),js_c isLoaded$1=!1;function loadEditorScript$1(e){var t=e.event,i=e.editorUrl,n=e.autoTrackInstance;isLoaded$1||(isLoaded$1=!0,loadScript(i,function(){dispatchMsg(t,"editorScriptloadSuccess"),n.destroy()},function(){t&&dispatchMsg(t,"editorScriptloadError"),isLoaded$1=!1}))}function readyToLoadEditor$1(e,t){window.TEAVisualEditor=window.TEAVisualEditor||{};var i="",n=VISUAL_EDITOR_RANGERS+"?query="+Date.now();window.TEAVisualEditor. h=checkSessionHost(),p="";h&&(window.TEAVisnce:e}),setSession()}else try{receiveMsg("tea:openVisualEditor",function(t){var r=tx_domain=a),i=n,o){var l=r.version;i=s?""+s+(l?"/visual-editoforEach.call(e.unt,i.visiby)return;if(!0===e.target.visible)return;e.target.visible=!0,this.EventHandle({eventType:"dom",Exposure=functionStart=!1,this.colrack&&t.autotrack.ctotrack),this.collect."change"===i||"submi"page_statistics"===i){var o=void 0;o="page_view"===i?this.EventHandle.handleViewEvent(t):this.EventHandle.handleStatisticsEvent(t),this.Request.send({eventType:"custom",eventName:"repo===i){var s=this.EventHandle.handleBeadtEvent(t),r=e.eventSend;this.Request.send({eventType:"custom",eventName:"report_${eventName}_event",extra:{methods:"GET"},eventSend:r},s)}}catch(e){console.log("handel dom event error "+JSON.stringify(e))}},e.prototype.destroy=function(){if(!this.autoTrackStart)return console.warn("engine is undefined, make sure you have called autoTrack.start()");this.autoTrackStart=!1,this.Listener.removeListener()},e}(),State;try{var exportAutoTrack=function(e,t){(new AutoTrack).apply(e,t)},pluginObject$2=getLogPluginSpace();pluginObject$2&&(pluginObject$2.LogAutoTrack=exportAutoTrack)}catch(e){}!function(e){e.Net="net",e.FailNet="f_net",e.FailData="f_data"}(State||(State={}));var EventList={pv:["predefine_pageview"],sdk:["_be_active","predefine_pag","__profile_set","__profile_se,"bav2b_page","bav2b_beat","bav2b_page_statistics","__bav_click","__bav_p.collect.on(n.Event,functi((o=this.tracerCachsTracer(i,e,t)),this.tr.hasOwnProperty("sc")?this.addCount("log",t,s.length-n.sc):this.addCount("log",t,s.length),this.errorCode[t]=i):s.forEach(function(e){var n="log";for(var s in EventList)if(-1!==EventList[s].indexOf(e.event)){n=s;break}o.addCount(n,t,1),o.errorCode[t]=i}))}}catch(e){}},e.prototype.report=function(e){if(this.tracerCache){var t=[];this.tracerCacheager.merge(e);t&&window.navigator.sendBeacon(this.reportUrl,JSON.stringify(i)):this.fetch(this.reportUrl,i),this.tracerCache=null}catch(e){}},e.prototype.processTracer=function(e,t,i){var n={count:e,state:i,key:t,params_forSDK_VERSION};"f_net"!==i&&"f_data"!==i||(n.errorCode=this.errorCode[i]);var o=this.collect.processEvent("applog_trace",n);if(o&&o.event)return delete o.is_bav,o},e.prototype.listener=function(){var e=this;document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&e.leavePage()}),beforePageUnload(function(){e.leavePage()})},e.prototype.leavePage=function(){this.report(!0)},e}(),exportTracer=function(e,t){(netLogPluginSpacject$3.LogTracer=exportTracervents_"+t.app_id,this.ion(){i.checkStorage()})}},e.prototype.retryRightNow=function(e){var t=this;if(this.retryStatus)this.errorCache.push(e);else{var i=0;this.retryStatus=!0;var n=setInterval(function(){if(3===i)return t.storeData(t.errorCache),t.retryStatus=!1,void clearInterval(n);var o=e.eventData;t.fetchData(o,function(){t.retryStatus=!1,clearInterval(n),t.retryCach{var t=this.storage.getItem(this.eventKey),i=e.eventData;Object.keys(t).length!==this.storageNum&&(t[Date.now()]=i,this.stora.navigator.onLine)return;var t=this.storage.getItem(this.event=function(e,t){if(!e)return thiion(){return this.get("days")},t.asDays=function(){return this.as("days")},t.weeks=function(){return this.get("weeks")},t.asWeeks=function(){re this.get("years")},t.asYears=Plan=1,this.shouldSendEinterval,r.data=t.data,r.lasotype.initState=functiongleRule:n})}),t.stateArray.sge},quotas:e.quotas})}}),this.cepReady=!0,this.dealCache(),this.collect.emit(this.types.CepReady))},CepRule.prototype.check=function(e){var t=Date.now();return Date.now()>1e3*e.end_time?(console.log("event rules:"+e.plan_id+" is over"),!1):t<1e3*e.start_time||t>1e3*e.end_time?(console.log("rule:"+e.plan_id+" time error"),!1):(this.staing="testing"===e.staing,!(SDK_VERSION<e.web_sdk_version)||(this.support=!1,console.log("you sdk version is oldÔºåplease update to "+e.web_sdk_version+" at least"),!1))},CepRule.prototype.dealCache=function(){var e=this;if(this.eventCache.length){var t=1;this.eventCache.forEach(function(i){e.matchEvent(i),t++}),t===this.eventCache.length&&(this.eventCache=[])}},CepRule.prototype.matchEvent=function(e){if(this.support&&(!this.staing||this.test)&&e&&e.length)try{if(!this.cepReady)return void this.eventCache.push(e);var t=e[0],i=t.header,n=t.user,o=t.events;o.length&&o.reverse();for(var s=0;s<o.length;s++){var r=o[s].event;if(-1!==ignoreList.indexOf(r))return!1;this.matchRule(i,n,o[s])}}catch(e){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",time:Date.now(),data:e.message}),void console.log(e.message)}},CepRule.prototype.matchRule=function(e,t,i){try{for(var n=0;n<this.planData.length;n++){var o=this.planData[eArray.get(s).patternState,l=cues(l),h=u.next();!h.done;h=u.next()){var p=__read(h.value,2),d=p[0],g=p[1];if(g.after&&(!g.after||l.get(g.after).isMatch)){if("NOT_FOLLOWED_BY"===g.connection){g.isMatch?this.reset(a,d):Date.now()-l.get(g.after).matchTime>g.window?this.publish([l.get(g.after).event,g.event],a,d):this.startWait(a,d,g);break}g.isMatch?g.matchTime-l.get(g.after).matchTime<=g.window?this.publish([l.get(g.after).event,g.event],a,d):this.reset(a,d):Date.now()-l.get(g.after).matchTime>g.window?this.reset(a,d):this.startWait(a,d,g);break}}}catch(e){i={error:e}}finally{try{h&&!h.done&&(n=u.return)&&n.call(u)}finally{if(i)throw i.error}}}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},CepRule.prototype.startWait=function(e,t,i){var n=this;try{this.waitArray.get(e)||this.waitArray.set(e,new Map);var o=this.waitArray.get(e);if(!o.get(t)){var s=setTimeout(function(){var o=n.stateArray.get(e).patternState,s=o.get(t);if("NOT_FOLLOWED_BY"===s.connection)!s.isMatch&&o.get(s.after).isMatch||s.matchTime-o.get(s.after).matchTime>i.window?((r=n.waitArray.get(e).get(t)).triggerWait=!0,n.waitArray.set(e,n.waitArray.get(e).set(t,r)),n.publish([o.get(s.after).event],e,t)):n.reset(e,t);else if("FOLLOWED_BY"===s.connection){var r;if(s.isMatch&&o.geepRule.prototype.rule=function(e,t,i,n){var o=this;try{var s=i.event,r=i.params;if(r=JSONn.length;u+ength}),i(n[u].conditions,c);else{var h=o.scope(n[u].key),p=h.scope,d=h.key,g=h.key2,f=p?"header"===p?g?JSON.parse(e[g])[d]:e[d]:"user"===p?t[d]:r[d]:s,_=o.calculate(n[u].op,f,n[u].value);l.set(c,{op:n[u].op,result:_,fatherKey:a})}}(a,c);for(var u=l.get(0);void 0===u.result||u.resultList.length<u.resultLength;)l.forEach(function(e,t){if(void 0!==e.result&&void 0!==e.fatherKey){var i=l.get(e.fatherKey);i.resultList.length<i.resultLength&&-1===i.resultKey.indexOf(t)&&(i.resultKey.push(t),i.resultList.push(e.result),l.set(e.fatherKey,i))}}),l.forEach(function(e){e.resultList&&e.resultList.length===e.resultLength&&("and"===e.op&&(e.result=-1===e.resultList.indexOf(!1)),"or"===e.op&&(e.result=-1!==e.resultList.indexOf(!0)))});return l.get(0).result}return!1}var h=this.scope(n.key),p=h.scope,d=h.key,g=h.key2,f=p?"header"===p?g?JSON.parse(e[g])[d]:e[d]:"user"===p?t[d]:r[d]:s;return this.calculate(n.op,f,n.value)}catch(e){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",timets:e,extra:{url:window.locatioay.get(e).quotas;if(t&&t.lengt||(i[e]={value:0,lastTime:em(this.quotasKey,i)}},C].lastTime=Date.now(),this.storage.setItem(this.quotasKey,i),!0):!(i[e].value>=o)||(console.log("plan:"+e+" limit"),!1)}return!0},CepRule.prototype.clearQuotas=function(){this.storage.setItem(this.quotasKey,null)},CepRule.prototype.release=function(e){if("all"===e)return e;var t=dayjs_min.duration(e);return t?t.asMilliseconds():"all"},CepRule.prototype.reset=function(e,t){var i=this.stateArray.get(e);if(i.singleRule){var n=i.patternState.get(t);n.isMatch=!1,n.event=null,n.matchTime=0,n.initTime=Date.now(),i.patternState.set(t,n)}else i.get(t)&&(clearTimeout(o.get(t).waitFn),o.delete(t))},CepRule.prototype.event=function(e,t){try{var i={event:e,params:JSON.stringify({plan_id:t||"",biz_id:this.stateArray.get(t).pattern.biz_id}),local_time_ms:Date.now()},n=this.configManager.get(),o=n.header,s=n.user;o.custom=JSON.stringify(o.custom);var r={events:[i],user:s,header:o};this.fetch(this.reportUrl,[r])}catch(e){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",time:Date.now(),data:e.message}),void console.log(e.message)}},CepRule.prototype.scope=function(e){var t="",i="";if(e.indexOf(".")>-1){var n=e.split(".");t=n[0],e=n[1],"header"===t&&"custom"===e&&(e=n[2],i=n[1])}return{scope:t,key:e,key2:i}},CepRule.prototype.calculate=function(op,paramA,paramB){try{if("="===op)return paramA===paramB;if(-1!==["=","<",">",">=","<=","!="].indexOf(op))return eval(""+paramA+op+paramB);if(-1!==["in","contains"].indexOf(op))return-1!==paramB.indexOf(paramA);if(-1!==["is not null","is null"].indexOf(op))return"is null"===op?null==paramA:null!=paramA;if(-1!==["startswith","endswith"].indexOf(op)){if("startswith"===op)return 0===paramA.indexOf(paramB);var start=paramA.length-paramB.length,str=paramA.substr(start,paramB.length);return str===paramB}}catch(e){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",time:Date.now(),data:e.message}),console.log(e.message),!1}},CepRule}();try{var exportCep=function(e,t){(new CepRule).apply(e,t)},pluginObject$4=getLogPluginSpace();pluginObject$4&&(pluginObject$4.LogCep=exportCep)}catch(e){console.log(e)}var pluginExtendList={autotrack:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/autotrack.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/autotrack.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/autotrack.js"},object:"LogAutoTrack"},ab:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/ab.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/ab.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/ab.js"},object:"LogAb"},stay:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/stay.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/stay.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/stay.js"},object:"LogStay"},route:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/route.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/route.js",va:"https://sf16-scmcdn-va.ibytedtos.com/obj/static-us/log-sdk/collect/5.0/plugin/route.js"},object:"LogRoute"},cep:{src:{cn:"https://lf3-cdn-tos.bytescm.com/obj/static/log-sdk/collect/5.0/plugin/cep.js",sg:"https://sf16-scmcdn-sg.ibytedtos.com/obj/static-sg/log-sdk/collect/5.0/plugin/cep.js",va:"http-va.ibytedtos.com/obj/stom/obj/static/log-sdk/cn(){function e(){}.warn("your "+i+" isi){var n=this;pluginObj&&n.apply(this.collect,thinfig)}catch(t){this.coll(e,t,i,n){var o=this;try{var s=document.createElement("script");s.src=t,this._plugin[e]||(this._plugin[e]=[]),this._plugin[e].push(i),s.onerror=function(){n(t)},s.onload=function(){o._plugin[e].forEach(function(e){e()})},document.getElementsByTagName("head")[0].appendChild(s)}catch(e){this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",time:Date.now(),data:e.message})}},e}(),RuotePage=function(){function e(){this.autotrack=!1,this.spa=!1,this.cache={},this.allowHash=!1}return e.prototype.apply=function(e,t){if(t.spa||t.autotrack){var i=e.Types;this.collect=e,this.config=t,this.appid=t.app_id,this.allowHash=t.allow_hash,this.fncArray=new Map,this.setKey(),this.setLocation(),this.hack(),this.init(),this.listener(),e.emit(i.RouteReady)}},e.prototype.setKey=function(){var e=this.collect.adapters.storage;this.storage=new e(!1),this.cache_key="__tea_cache_refer_"+this.appid,this.cache={refer_key:location.href,refer_title:document.title||location.pathname,refer_manual_key:""},this.config.autotrack&&"object"==typeof this.config.autotrack&&this.config.autotrack.page_manual_key&&(this.cache.refer_manual_key=this.config.autotrack.page_manual_key),this.storage.setItem(ty.pushState;histoistory.onpushstate&&history.onpushstate({state:i});var s=t.call.apply(t,__spread([history,i],n));if(e.lastLocation!==location.href){var r=e.getPopStateChangeEventData();return e.lastLocation=location.href,e.sendPv(r,"pushState"),s}};var i=history.replaceState;history.replaceState=function(t){fostory,t],n));if(e.lastLocation!==locationLocation=location.href,e.sendPv(r),s}}},e.prototype.setLocation=function(){"undefined"!=typeof window&&(this.lastLocation=window.location.href)},e.prototype.init=function(){var e=this.getPopStateChangeEventData();this.collect.emit("route-change",{config:e,init:!0})},e.prototype.listener=function(){var e=this,t=null;window.addEventListener("hashchange",function(i){if(e.lastLocation!==window.location.href&&(clearTimeout(t),e.allowHash)){e.lastLocation=window.location.href;var n=e.getPopStateChangeEventData();e.sendPv(n)}}),window.addEventListener("popstate",function(i){e.lastLocation!==window.location.href&&(t=setTimeout(function(){e.lastLocation=window.location.href;var t=e.getPopStateChangeEventData();e.sendPv(t)},10))})},e.prototype.getPopStateChangeEventData=function(){var e=this){try{var e="",t=this.stocument.referrer?document.referrer:t&&t.refer_key||"";var n=this.storage.getItem("__tea_cache_first_"+this.appid);return i=!n||1!=n,{is_html:1,url:location.href,referrer:e,page_key:location.href,refer_page_key:e,page_title:document.title||location.pathname,page_manual_key:this.config.autotrack&&this.config.autotrack.page_manual_key||"",refer_page_manual_key:t&&t.refer_manual_key||"",refer_page_title:t&&t.refer_title||"",page_path:location.pathname,page_host:location.host,is_first_time:""+i}}catch(e){return this.collect.emit(DebuggerMesssge$1.DEBUGGER_MESSAGE,{type:DebuggerMesssge$1.DEBUGGER_MESSAGE_SDK,info:"ÂèëÁîü‰∫ÜÂºÇÂ∏∏",level:"error",time:Date.now(),data:e.message}),{}}},e.prototype.sendPv=function(e,t){this.collect.emit("route-change",{config:e,init:!1})},e}();try{var exportRoute=function(e,t){(new RuotePage).apply(e,t)},pluginObject$6=getLogPportRoute)}catch(e){console.log(e)}var asyncApi=["getConfig","getAbSdkVersion"],beforeApi=["init","usePlugin","autoInitializationRangers","on"],Process=function(){function e(e){this.task=[],this.newProcessTask=[],this.processMap=!1,this.Collector=e,this.collectMap=new Map,this.processMap=new Map}return e.prototype.processTask=function(){var e=this;if(this.task.length){var t=this.findIndex(this.task,beforeApi,"0");if(-1!==t){var i=this.processScope(this.task[t][0]).scope;this.processMap.set(i,!0),this.processCmd.apply(this,__spread(this.task[t])),this.newProcessTask=this.task.filter(function(e){if("default"===i){if(-1===e[0].indexOf("."))return e}else if(-1!==e[0].indexOf(i+"."))return e});var n=this.findIndex(this.newProcessTask,beforeApi,"0");this.newProcessTask.forEach(function(t,i){i!==n&&e.processCmd.apply(e,__spread(t))}),this.newProcessTask=[]}}},e.prototype.proce))return this.task.push(e!==beforeApi.indexOf(t)&&(this.collectMap.get(e)||(this.collect=new this.Collector(e),this.collectMap.set(e,this.collect))),!this.collectMap.get(e))return void console.log("init or use must be first call, cmd:"+t);var n=this.collectMap.get(e);if(n.__proto__.hasOwnProperty(t))if("event"===t)n.event.apply(n,__spread([t],i));else{if(-1!==asyncApi.indexOf(t))return n[t].apply(n,__spread(i));n[t].apply(n,__spread(i))}else n.event.apply(n,__spread([t],i))}catch(e){}},e.prototype.findIndex=function(e,t,i){var n=this,o=-1;try{e.forEach(function(e,s){var r=void 0!==i?e[i]:e,a=n.processScope(r).cmd;-1!==t.indexOf(a)&&(o=s)})}catch(e){return o}return o},e.prototype.processScope=function(e){var t="default";try{if("string"==typeof e&&e.indexOf(".")>-1){var i=e.split(".");t=i[0],e=i[1]}}catch(i){return{scope:t,cmd:e}}return{scope:t,cmd:e}},e}(),transferAsync=function(e){if("undefined"!=typeof window){var t=getNameSpace();if(t&&window[t]){var i=window[t];i.sdkLoad?console.log("you page has load sdk file already, do not load another sdk file"):(e.task=i.q||[],window[t]=e.processCmd.bind(e),window[t].sdkLoad=!0,e.processTask())}}};Collector.usePlugin(PluginExtend,"extend"),Collector.usePlugin(Ab,"ab"),Collector.usePlugin(Stay,"stay"),Collector.usePlugin(AutoTrack,"autotrack"),Collector.usePlugin(Store,"store"),Collector.usePlugin(Et,"et"),Collector.usePlugin(Profile,"profile"),Collector.usePlugin(CepRule,"cep"),Collector.usePlugin(HeartBeat,"heartbeat"),Collector.usePlugin(Monitor,"monitor"),Collector.usePlugin(RuotePage,"route"),Collector.usePlugin(Tracer,"tracer");var newProcess=new Process(Collector);transferAsync(newProcess)}();
