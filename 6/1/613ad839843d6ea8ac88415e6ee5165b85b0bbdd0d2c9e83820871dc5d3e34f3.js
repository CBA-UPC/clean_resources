var __assign=this&&this.__assign||var __awaiter=this&&this.__awaiter||var __generator=this&&this.__generator||function(i,t){var e={label:0,sent:trys:[],ops:[]},n,s,r,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol==="function"&&(o[Symbol.iterator]=,o;var __spreadArray=this&&this.__spreadArray||System.register(["./p-d715cc7e.system.js"],(function(i){"use strict";var t,e,n;return{setters:[,execute:function(){var s;(function(i){i["STREAM"]="stream";i["ANALYZE"]="video-analyze";i["LOGGING"]="logging";i["RENDER"]="render"})(s||(s={}));var r;((r||(r={}));var o;(function(i){i["STORED"]="STORED";i["STREAM"]="STREAM";i["LIVE"]="LIVE"})(o||(o={}));var a;(function(i){i["QUEUED"]="QUEUED";i["SUCCESS"]="SUCCESS";i["ANALYZING"]="ANALYZING";i["ANALYZED"]="ANALYZED";i["FAILED"]="FAILED"})(a||(a={}));var h;((h||(h={}));var l;(function(i){i[i["GPS_SERVICE"]=1]="GPS_SERVICE";i[i["IP_ADDRESS"]=2]="IP_ADDRESS";i[i["USER_PROVIDED"]=3]="USER_PROVIDED"})(l||(l={}));var u;(function(i){i[i["IMPRESSION"]=1]="IMPRESSION";i[i["VIEWABLE_MRC_50"]=2]="VIEWABLE_MRC_50";i[i["VIEWABLE_MRC_100"]=3]="VIEWABLE_MRC_100";i[i["VIEWABLE_VIDEO_50"]=4]="VIEWABLE_VIDEO_50"})(u||(u={}));var d;(function(i){i["ALL"]="all";i["NONE"]="none";i["QA"]="qa";i["CXO"]="cxo";i["INSERT"]="insert";i["INFO"]="info";i["ERROR"]="error";i["HIGHLIGHT"]="highlight";i["IMPORTANT"]="important";i["SELENIUM"]="selenium";i["TAM"]="tam";i["OVERLAYLOGS"]="overlaylogs"})(d||(d={}));var f;(function(i){i[i["CUE_START"]=1]="CUE_START";i[i["CUE_END"]=2]="CUE_END"})(f||(f={}));var c;((c||(c={}));var v;(function(i){i[i["TL"]=0]="TL";i[i["TR"]=1]="TR";i[i["BL"]=3]="BL";i[i["BR"]=4]="BR";i[i["CENTER"]=5]="CENTER";i[i["OUTSIDE"]=6]="OUTSIDE";i[i["COVER"]=7]="COVER"})(v||(v={}));var p;((p||(p={}));var m;(function(i){i[i["NEUTRAL"]=-1]="NEUTRAL";i[i["FALSE"]=0]="FALSE";i[i["TRUE"]=1]="TRUE"})(m||(m={}));var g;(function(i){i[i["TEXT"]=0]="TEXT";i[i["JSON"]=1]="JSON";i[i["RTB2"]=2]="RTB2";i[i["RTB25"]=2.5]="RTB25";i[i["RTB30"]=3]="RTB30"})(g||(g={}));var b;((b||(b={}));var y;((y||(y={}));var w;(function(i){i["CTV"]="ctv-on-stream";i["WEB"]="web-on-stream"})(w||(w={}));var O;(function(i){i["ALLOW_ADX"]="DEBUGallowADX";i["ALLOW_BLOCKED_DOMAINS"]="DEBUGallowBlockedDomains";i["ALLOW_REBIDS"]="DEBUGallowRebids";i["ALLOWED_INSERT_TYPES_ADD"]="DEBUGallowedInsertTypesAdd";i["ALLOWED_INSERT_TYPES_FORCE"]="DEBUGallowedInsertTypesForce";i["ALLOWED_INSERT_TYPES_ONSTREAM_FORCE"]="DEBUGallowedInsertTypesOnstreamForce";i["ALLOWED_INSERT_TYPES_FLOATING_FORCE"]="DEBUGallowedInsertTypesFloatingForce";i["ALLOWED_INSERT_TYPES_REMOVE"]="DEBUGallowedInsertTypesRemove";i["ALLOWED_EVENTS_PER_MINUTE"]="DEBUGallowedEventsPerMinute";i["ALLOWED_FAILED_BIDS"]="DEBUGallowedFailedBids";i["ANALYTICS_TIER"]="DEBUGanalyticsTier";i["BANNER_ALLOW_IFRAME_LOAD"]="DEBUGbannerAllowIframeLoad";i["BRAND_BUG"]="DEBUGbrandBug";i["CAROUSEL_MODE"]="DEBUGcarouselMode";i["CAROUSEL_SPEED"]="DEBUGcarouselSpeed";i["CX_LOG_MODE"]="cxLogMode";i["CX_LOG_TIMESTAMPS"]="cxLogTimestamps";i["CX_TIER"]="cxtier";i["DESTROY_INSERT_ON_CLOSE"]="DEBUGdestroyInsertOnClose";i["DISABLE_INSERT_OPEN_ANIMATION"]="DEBUGdisableInsertOpenAnimation";i["DISABLE_TAM"]="DEBUGdisableTAM";i["FORCE_ADX"]="DEBUGforceADX";i["FORCE_BANNER_CUSTOM_SQUEEZE"]="DEBUGforceBannerCustomSqueeze";i["FORCE_CTV_MODE"]="DEBUGforceCTVMode";i["FORCE_HORIZONTAL_BANNER_SQUEEZEBACK"]="DEBUGforceHorizontalBannerSqueezeback";i["FAKE_NATIVE_BID"]="DEBUGfakeNativeBid";i["FORCE_BRAINLY"]="DEBUGforceBrainly";i["FORCE_OUTBRAIN"]="DEBUGforceOutbrain";i["FORCE_PREBID"]="DEBUGforcePrebid";i["FORCE_REV_CONTENT"]="DEBUGforceRevContent";i["FORCE_VERTICAL_BANNER_SQUEEZEBACK"]="DEBUGforceVerticalBannerSqueezeback";i["HIGHLIGHT_LOGS"]="DEBUGhighlightLogs";i["INSERT_ADJUST_POSITION"]="DEBUGinsertAdjustPosition";i["INSERT_DURATION"]="DEBUGinsertDuration";i["INSERT_FREQUENCY"]="DEBUGinsertFrequency";i["INSERT_OVERRIDE_POSITION"]="DEBUGinsertOverridePosition";i["INSERT_OVERRIDE_LOCATION"]="DEBUGinsertOverrideLocation";i["INSERT_OVERRIDE_Y_OFFSET"]="DEBUGinsertOverrideYOffset";i["INSERT_TYPE_OVERRIDE"]="DEBUGinsertTypeOverride";i["PRIVACY_URL"]="DEBUGprivacyURL";i["PREVENT_BANNER_ENLARGE"]="DEBUGpreventBannerEnlarge";i["ONBOARDING"]="DEBUGonboarding";i["OVERRIDE_CONFIGS_GROUP_ID"]="DEBUGoverrideConfigsGroupId";i["OVERRIDE_GEO_BLOCKING"]="DEBUGoverrideGeoBlocking";i["OVERRIDE_GROUP_ID"]="DEBUGoverrideGroupId";i["OVERRIDE_OSD_BID_ORDER"]="DEBUGoverrideOsdBidOrder";i["PERSISTENT_INSERTS"]="DEBUGpersistentInserts";i["REMOVE_ASSET_DATA_OBJECT"]="DEBUGremoveAssetDataObject";i["REMOVE_LOGO"]="DEBUGremoveLogo";i["REMOVE_OSD"]="DEBUGremoveOSD";i["REMOVE_WATERFALL_BIDDING"]="DEBUGremoveWaterfall";i["REBID_ALLOWED_SIZE_DEVIATION"]="DEBUGrebidAllowedSizeDeviation";i["SHOW_CONSOLE_COMPONENT_SOURCE"]="DEBUGshowConsoleComponentSource";i["SHOW_CONSOLE_OVERLAY"]="DEBUGshowConsoleLogOverlay";i["TIMER_BASED_BIDDING"]="DEBUGtimerBasedBidding";i["ZONE_ACTIVE"]="DEBUGzoneActive";i["Z_INDEX_OVERRIDE"]="DEBUGzIndexOverride"})(O||(O={}));var T;(function(i){i["AIRTV"]="AIRTV";i["VIDEOINTELLIGENCE"]="VIDEOINTELLIGENCE";i["DAILYMOTION"]="DAILYMOTION";i["VDO"]="VDO";i["CONNATIX"]="CONNATIX";i["CLIX"]="CLIX";i["RUMBLE"]="RUMBLE";i["POWA_SHADOW"]="POWA_SHADOW";i["SYNCBAK"]="SYNCBAK";i["INSIGHT"]="INSIGHT";i["AKAMAI_AMP"]="AKAMAI_AMP";i["EXCO"]="EXCO";i["ANIPLAYER"]="ANIPLAYER";i["AVANTIS"]="AVANTIS";i["FIRE_TV"]="FIRE_TV";i["FLOWPLAYER"]="FLOWPLAYER";i["IN_HOUSE"]="IN_HOUSE";i["MINUTE_MEDIA"]="MINUTE_MEDIA";i["PLAYKIT"]="PLAYKIT";i["ANYCLIP"]="ANYCLIP";i["BRIDTV_PLAYER_2"]="BRIDTV_PLAYER_2";i["BRIDTV"]="BRIDTV";i["FAVE"]="FAVE";i["PRIMIS"]="PRIMIS";i["MPLAYER"]="MPLAYER";i["MG2PLAYER"]="MG2PLAYER";i["STN_SHADOW"]="STN_SHADOW";i["STN"]="STN";i["TGH5"]="TGH5";i["GOOGLE_AMP"]="GOOGLE_AMP";i["GSTREAM"]="GSTREAM";i["FUEL"]="FUEL";i["FLUID"]="FLUID";i["GLOMEX"]="GLOMEX";i["ZYPE"]="ZYPE";i["VIDAZOO_SHADOW"]="VIDAZOO_SHADOW";i["VIDAZOO_VDZ"]="VIDAZOO_VDZ";i["VIDAZOO"]="VIDAZOO";i["BLUEBILLYWIG"]="BLUEBILLYWIG";i["BRIGHTCOVE"]="BRIGHTCOVE";i["BRIGHTCOVE_INLINE"]="BRIGHTCOVE_INLINE";i["JWPLAYER"]="JWPLAYER";i["VIDEOJS"]="VIDEOJS";i["UNKNOWN"]="UNKNOWN";i["ALL"]="ALL"})(T||(T={}));var I;(function(i){i["MOBILE_ONSTREAM"]="mobile-onstream";i["MOBILE_INARTICLE"]="mobile-inarticle";i["MOBILE_FLOATING"]="mobile-floating";i["DESKTOP_ONSTREAM"]="desktop-onstream";i["DESKTOP_INARTICLE"]="desktop-inarticle";i["DESKTOP_FLOATING"]="desktop-floating"})(I||(I={}));var S;((S||(S={}));var E;((E||(E={}));var D;(function(i){i["POSITION"]="position";i["YOFFSET"]="yOffset"})(D||(D={}));var R;(function(i){i["EVENT_FROM_INSERT"]="event-from-insert";i["INSERT_INITIALIZED"]="insert-initialized";i["INSERT_CLOSED"]="insert-closed";i["INSERT_USER_CLOSED"]="insert-user-closed";i["INSERT_OPENED"]="insert-opened";i["INSERT_RENDERED"]="insert-rendered";i["INSERT_RERENDERED"]="insert-rerendered";i["INSERT_DESTROYED"]="insert-destroyed";i["INSERT_REQUEST_VIDEO"]="insert-request-video";i["INSERT_REQUEST_OSD_REFRESH"]="insert-request-osd-refresh";i["INSERT_SQUEEZE_START"]="insert-squeeze-start";i["INSERT_SQUEEZE_FINISH"]="insert-squeeze-finish";i["INSERT_TRACKING_EVENT"]="insert-tracking-event";i["INSERT_IMPRESSION"]="insert-impression";i["INSERT_DISPLAY_STARTED"]="insert-display-started";i["INSERT_BANNER_BLOCKED"]="insert-banner-blocked";i["INSERT_BANNER_FAILED"]="insert-banner-failed";i["INSERT_GPT_FAILED"]="insert-gpt-failed";i["INSERT_GPT_RENDER_FAILED"]="insert-gpt-render-failed";i["INSERT_VIEWED_EVENT"]="insert-viewed-event";i["INSERT_GPT_RESPONSE"]="insert-gpt-response";i["INSERT_GPT_REFRESH"]="insert-gpt-refresh";i["INSERT_GPT_RESET"]="insert-gpt-reset"})(R||(R={}));var _;((_||(_={}));var C;(function(i){i["OVERLAY"]="OVERLAY";i["SLIDESHOW"]="SLIDESHOW"})(C||(C={}));var k;(function(i){i["TOP_LEFT"]="tl";i["TOP_RIGHT"]="tr";i["BOTTOM_LEFT"]="bl";i["BOTTOM_RIGHT"]="br";i["DEFAULT"]="def"})(k||(k={}));var N;(function(i){i["TOP_LEFT"]="tl";i["TOP_RIGHT"]="tr";i["BOTTOM_LEFT"]="bl";i["BOTTOM_RIGHT"]="br";i["CENTER"]="center";i["TOP_CENTER"]="top-center"})(N||(N={}));var A;(function(i){i["IMPRESSION"]="cx-impression";i["INSERT_MOMENT_BEGIN"]="cx-insert-moment-begin";i["INSERT_MOMENT_END"]="cx-insert-moment-end"})(A||(A={}));var B;((B||(B={}));var x;(function(i){i["BID"]="BID";i["INSERT"]="INSERT";i["VIDEO"]="VIDEO";i["OVERLAY"]="OVERLAY";i["GAM"]="GAM";i["PREBID"]="PREBID";i["TAM"]="TAM"})(x||(x={}));var F;(function(i){i["BID_REQUEST"]="REQUEST";i["BID_NO_REQUEST"]="NO_REQUEST";i["BID_RESPONSE"]="RESPONSE";i["BID_RESPONSE_EMPTY"]="RESPONSE_EMPTY";i["GAM_REQUEST"]="REQUEST";i["GAM_RESPONSE"]="RESPONSE";i["GAM_RESPONSE_EMPTY"]="RESPONSE_EMPTY";i["GAM_RENDER_FAIL"]="RENDER_FAIL";i["GAM_RENDER_SUCCESS"]="RENDER_SUCCESS";i["GAM_SLOT_LOAD_SUCCESS"]="SLOT_LOAD_SUCCESS";i["PREBID_REQUEST"]="REQUEST";i["PREBID_RESPONSE"]="RESPONSE";i["PREBID_WON"]="WON";i["TAM_REQUEST"]="REQUEST";i["TAM_RESPONSE"]="RESPONSE";i["OVERLAY_INIT"]="INIT";i["OVERLAY_TIME_REACHED"]="TIME_REACHED";i["OVERLAY_ANDROID_WEB_VIEW"]="ANDROID_WEB_VIEW";i["OVERLAY_IN_APP_BROWSER_SHUTDOWN"]="IN_APP_BROWSER_SHUTDOWN";i["OVERLAY_PLAYER_UNKNOWN"]="PLAYER_UNKNOWN";i["OVERLAY_GROUPID_ZONE_MISMATCH"]="GROUPID_ZONE_MISMATCH";i["OVERLAY_GROUPID_NOT_FOUND"]="GROUPID_NOT_FOUND";i["OVERLAY_GEO_BLOCKED_REGION"]="GEO_BLOCKED_REGION";i["OVERLAY_GROUP_CONFIGS"]="OVERLAY_GROUP_CONFIGS";i["OVERLAY_FORCED_SHUTDOWN"]="FORCED_SHUTDOWN";i["OVERLAY_FETCH_MOMENTS"]="FETCH_MOMENTS";i["CLS_INIT"]="CLS_INIT";i["CLS_SHIFT_OBSERVED"]="CLS_SHIFT_OBSERVED";i["VIDEO_SRC_CHANGED"]="SRC_CHANGED";i["VIDEO_STARTED"]="STARTED";i["VIDEO_ENDED"]="ENDED";i["VIDEO_RESTARTED"]="RESTARTED";i["VIDEO_TIME_REACHED"]="TIME_REACHED";i["VIDEO_PLAY"]="PLAY";i["VIDEO_PAUSE"]="PAUSE";i["INSERT_CREATED"]="CREATED";i["INSERT_NOT_CREATED"]="NOT_CREATED";i["INSERT_CREATION_DELAYED"]="CREATION_DELAYED";i["INSERT_REBUILD"]="REBUILD";i["INSERT_INITIALIZED"]="INITIALIZED";i["INSERT_RENDERED"]="RENDERED";i["INSERT_RERENDERED"]="RERENDERED";i["INSERT_DESTROYED"]="DESTROYED";i["INSERT_DISPLAYED"]="DISPLAYED";i["INSERT_IMPRESSION"]="IMPRESSION";i["INSERT_NO_IMPRESSION"]="NO_IMPRESSION";i["INSERT_CLOSED"]="CLOSED";i["INSERT_USER_CLOSED"]="USER_CLOSED";i["INSERT_REOPENED"]="REOPENED";i["INSERT_CLICKTHROUGH"]="CLICKTHROUGH";i["INSERT_PRIVACY_CLICKTHROUGH"]="PRIVACY_CLICKTHROUGH";i["INSERT_LOGO_CLICKTHROUGH"]="LOGO_CLICKTHROUGH";i["INSERT_OUTBRAIN_CLICKTHROUGH"]="OUTBRAIN_CLICKTHROUGH";i["INSERT_VIEWED"]="VIEWED";i["INSERT_ADBLOCKED"]="ADBLOCKED";i["INSERT_BANNER_BLOCKED"]="BANNER_BLOCKED";i["INSERT_BANNER_LOAD_FAILED"]="LOAD_FAILED";i["INSERT_LOAD_FAILED"]="LOAD_FAILED"})(F||(F={}));var U;((U||(U={}));var q;(function(i){i["ALWAYS_ON"]="always-on";i["BRAINLY"]="brainly";i["DISABLE_OPEN_ANIMATION"]="disable-insert-animation";i["DISABLE_TAM"]="disable-tam";i["HIDE_UI"]="hide-ui";i["PREVENT_BANNER_UPSCALE"]="prevent-banner-upscale";i["REMOVE_INSERT_CLOSE_BUTTON"]="remove-insert-close-button";i["REMOVE_LOGO"]="remove-logo"})(q||(q={}));var M;(function(i){i["CX_EXCHANGE"]="CXE";i["ADK"]="ADK";i["ADX"]="ADX";i["REV_CONTENT"]="REV_CONTENT";i["OSD"]="OSD";i["PLATFORM"]="PLATFORM";i["OUTBRAIN"]="OUTBRAIN"})(M||(M={}));var L;(function(i){i["ALL"]="ALL";i["QORTEX_EXCLUDED"]="QORTEX_EXCLUDED";i["QORTEX_ONLY"]="QORTEX_ONLY"})(L||(L={}));var z;((z||(z={}));var P;((P||(P={}));var V;((V||(V={}));var j;((j||(j={}));var X;(function(i){i[i["SPONSORED"]=1]="SPONSORED";i[i["DESC"]=2]="DESC";i[i["RATING"]=3]="RATING";i[i["LIKES"]=4]="LIKES";i[i["DOWNLOADS"]=5]="DOWNLOADS";i[i["PRICE"]=6]="PRICE";i[i["SALEPRICE"]=7]="SALEPRICE";i[i["PHONE"]=8]="PHONE";i[i["ADDRESS"]=9]="ADDRESS";i[i["DESC2"]=10]="DESC2";i[i["DISPLAYURL"]=11]="DISPLAYURL";i[i["CTATEXT"]=12]="CTATEXT"})(X||(X={}));ar W=Object.prototype.toString;var H=Object.getPrototypeOf;var Y=Object.create(null));var J=function(i){i=i.toLowerCase();return ;var Q=var K=Array.isArray;var Z=Q("undefined");ar ii=J("ArrayBuffer");ar ei=Q("string");var ni=Q("function");var si=Q("number");var ri=var oi=var ai=function(i){if(Y(i)!=="object"){return false}var t=H(i);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)};var hi=J("Date");var li=J("File");var ui=J("Blob");var di=J("FileList");var fi=var ci=function(i){var t;return i&&(typeof FormData==="function"&&i instanceof FormData||ni(i.append)&&((t=Y(i))==="formdata"||t==="object"&&ni(i.toString)&&i.toString()==="[object FormData]"))};var vi=J("URLSearchParams");var pi=function mi(i,t,e){var n=e===void 0?{}:e,s=n.allOwnKeys,r=s===void 0?false:s;if(i===null||typeof i==="undefined"){return}var o;var a;if(typeof i!=="object"){i=[i]}if(K(i)){for(o=0,a=i.length;o<a;o++){t.call(null,i[o],o,i)}}else{var h=r?Object.getOwnPropertyNames(i):Object.keys(i);var l=h.length;var u=void 0;for(o=0;o<l;o++){u=h[o];t.call(null,i[u],u,i)}}}ar bi=function(){if(typeof globalThis!=="undefined")return globalThis;return typeof self!=="undefined"?self:typeof window!=="undefined"?window:global}();var yi=function wi(){var i=(yi(this)&&this||{}).caseless;var t={};var e=function(e,n){var s=i&&gi(t,n)||n;if(ai(t[s])&&ai(e)){t[s]=wi(t[s],e)}else if(ai(e)){t[s]=wi({},e)}else if(K(e)){t[s]=e.slice()}else{t[s]=e}};for(var n=0,s=arguments.length;n<s;n++){arguments[n]&&mi(arguments[n],e)}return t}var Oi=function(i,t,e,n){var s=n===void 0?{}:n,r=s.allOwnKeys;mi(t,(function(t,n){if(e&&ni(t)){i[n]=G(t,e)}else{i[n]=t}}),{allOwnKeys:r});return i};var Ti=function(i){if(i.charCodeAt(0)===65279){i=i.slice(1)}return i};var Ii=function(i,t,e,n){i.prototype=Object.create(t.prototype,n);i.prototype.constructor=i;Object.defineProperty(i,"super",{value:t.prototype});e&&Object.assign(i.prototype,e)};var Si=function(i,t,e,n){var s;var r;var o;var a={};t=t||{};if(i==null)return t;do{s=Object.getOwnPropertyNames(i);r=s.length;while(r-- >0){o=s[r];if((!n||n(o,i,t))&&!a[o]){t[o]=i[o];a[o]=true}}i=e!==false&&H(i)}while(i&&(!e||e(i,t))&&i!==Object.prototype);return t};var Ei=function(i,t,e){i=String(i);if(e===undefined||e>i.length){e=i.length}e-=t.length;var n=i.indexOf(t,e);return n!==-1&&n===e};var Di=function(i){if(!i)return null;if(K(i))return i;var t=i.length;if(!si(t))return null;var e=new Array(t);while(t-- >0){e[t]=i[t]}return e};var Ri=typeof Uint8Array!=="undefined"&&H(Uint8Array));var _i=function(i,t){var e=i&&i[Symbol.iterator];var n=e.call(i);var s;while((s=n.next())&&!s.done){var r=s.value;t.call(i,r[0],r[1])}};var Ci=function(i,t){var e;var n=[];while((e=i.exec(t))!==null){n.push(e)}return n};var ki=J("HTMLFormElement");var Ni=function(i){return i.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,()};var Ai=Object.prototype);var Bi=J("RegExp");var xi=function(i,t){var e=Object.getOwnPropertyDescriptors(i);var n={};mi(e,(function(e,s){var r;if((r=t(e,s,i))!==false){n[s]=r||e}}));Object.defineProperties(i,n)};var Fi=function(i){xi(i,(function(t,e){if(ni(i)&&["arguments","caller","callee"].indexOf(e)!==-1){return false}var n=i[e];if(!ni(n))return;t.enumerable=false;if("writable"in t){t.writable=false;return}if(!t.set){t.set=}))};var Ui=function(i,t){var e={};var n=K(i)?n(i):n(String(i).split(t));return e};var qi=function(){};var Mi=function(i,t){i=+i;return Number.isFinite(i)?i:t};var Li="abcdefghijklmnopqrstuvwxyz";var zi="0123456789";var Pi={DIGIT:zi,ALPHA:Li,ALPHA_DIGIT:Li+Li.toUpperCase()+zi};var Vi=function(i,t){if(i===void 0){i=16}if(t===void 0){t=Pi.ALPHA_DIGIT}var e="";var n=t.length;while(i--){e+=t[Math.random()*n|0]}return e};ar Xi=function(i){var t=new Array(10);var e=function(i,n){if(ri(i)){if(t.indexOf(i)>=0){return}if(!("toJSON"in i)){t[n]=i;var s=K(i)?[]:{};mi(i,();t[n]=undefined;return s}}return i};return e(i,0)};var Gi=J("AsyncFunction");var Wi=var Hi={isArray:K,isArrayBuffer:ii,isBuffer:$,isFormData:ci,isArrayBufferView:ti,isString:ei,isNumber:si,isBoolean:oi,isObject:ri,isPlainObject:ai,isUndefined:Z,isDate:hi,isFile:li,isBlob:ui,isRegExp:Bi,isFunction:ni,isStream:fi,isURLSearchParams:vi,isTypedArray:Ri,isFileList:di,forEach:mi,merge:wi,extend:Oi,trim:pi,stripBOM:Ti,inherits:Ii,toFlatObject:Si,kindOf:Y,kindOfTest:J,endsWith:Ei,toArray:Di,forEachEntry:_i,matchAll:Ci,isHTMLForm:ki,hasOwnProperty:Ai,hasOwnProp:Ai,reduceDescriptors:xi,freezeMethods:Fi,toObjectSet:Ui,toCamelCase:Ni,noop:qi,toFiniteNumber:Mi,findKey:gi,global:bi,isContextDefined:yi,ALPHABET:Pi,generateString:Vi,isSpecCompliantForm:ji,toJSONObject:Xi,isAsyncFn:Gi,isThenable:Wi};i.inherits(Yi,Error,{toJSON:);var Ji=Yi.prototype;var Qi={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(();Object.defineProperties(Yi,Qi);Object.defineProperty(Ji,"isAxiosError",{value:true});Yi.from=function(i,t,e,n,s,r){var o=Object.create(Ji);Hi.toFlatObject(i,o,(,();Yi.call(o,i.message,t,e,n,s);o.cause=i;o.name=i.name;r&&Object.assign(o,r);return o};var Ki=null;et=Hi.toFlatObject(Hi,{},null,();function nt(i,t,e){if(!Hi.isObject(i)){throw new TypeError("target must be an object")}t=t||new FormData;e=Hi.toFlatObject(e,{metaTokens:true,dots:false,indexes:false},false,();var n=e.metaTokens;var s=e.visitor||u;var r=e.dots;var o=e.indexes;var a=e.Blob||typeof Blob!=="undefined"&&Blob;var h=a&&Hi.isSpecCompliantForm(t);if(!Hi.isFunction(s)){throw new TypeError("visitor must be a function")}r d=[];var f=Object.assign(et,{defaultVisitor:u,convertValue:l,isVisitable:Zi});f(!Hi.isObject(i)){throw new TypeError("data must be an object")}c(i);return t}r ot=rt.prototype;ot.append=ot.toString=r lt=function(){.prototype.use=i.prototype.eject=i.prototype.clear=i.prototype.forEach=return i}();var ut={silentJSONParsing:true,forcedJSONParsing:true,clarifyTimeoutError:false};var dt=typeof URLSearchParams!=="undefined"?URLSearchParams:rt;var ft=typeof FormData!=="undefined"?FormData:null;var ct=typeof Blob!=="undefined"?Blob:null;var vt={isBrowser:true,classes:{URLSearchParams:dt,FormData:ft,Blob:ct},protocols:["http","https","file","blob","url","data"]};var pt=typeof window!=="undefined"&&typeof document!=="undefined";var mt=function(i){return pt&&["ReactNative","NativeScript","NS"].indexOf(i)<0}(typeof navigator!=="undefined"&&navigator.product);var gt=function(){return typeof WorkerGlobalScope!=="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts==="function"}();var bt=Object.freeze({__proto__:null,hasBrowserEnv:pt,hasStandardBrowserWebWorkerEnv:gt,hasStandardBrowserEnv:mt});var yt=__assign(__assign({},bt),vt);function wt(i,t){return nt(i,new yt.classes.URLSearchParams,Object.assign({visitor:function(i,t,e,n){if(yt.isNode&&Hi.isBuffer(i)){this.append(t,i.toString("base64"));return false}return n.defaultVisitor.apply(this,arguments)}},t))}function Ot(i){return Hi.matchAll(/\w+|\[(\w*)]/g,i).map((function(i){return i[0]==="[]"?"":i[1]||i[0]}))}unction It(i){function t(i,e,n,s){var r=i[s++];if(r==="__proto__")return true;var o=Number.isFinite(+r);var a=s>=i.length;r=!r&&Hi.isArray(n)?n.length:r;if(a){if(Hi.hasOwnProp(n,r)){n[r]=[n[r],e]}else{n[r]=e}return!o}if(!n[r]||!Hi.isObject(n[r])){n[r]=[]}var h=t(i,e,n[r],s);if(h&&Hi.isArray(n[r])){n[r]=Tt(n[r])}return!o}if(Hi.isFormData(i)&&Hi.isFunction(i.entries)){var e={};Hi.forEachEntry(i,();return e}return null}ar Et={transitional:ut,adapter:["xhr","http"],transformRequest:[,transformResponse:[,timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yt.classes.FormData,Blob:yt.classes.Blob},validateStatus:headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":undefined}}};Hi.forEach(["delete","get","head","post","put","patch"],();var Dt=Hi.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Rt=function(i){var t={};var e;var n;var s;i&&i.split("\n").forEach(();return t};var _t=Symbol("internals"); At=nction Ft(i,t){var e=Hi.toCamelCase(" "+t);["get","set","has"].forEach((function(n){Object.defineProperty(i,n+e,{value:configurable:true})}))}var Ut=function(){.prototype.set=function(i,t,e){var n=this;ar r=if(Hi.isPlainObject(i)||i instanceof this.constructor){r(i,t)}else if(Hi.isString(i)&&(i=i.trim())&&!At(i)){r(Rt(i),t)}else{i!=null&&s(t,i,e)}return this};i.prototype.get=i.prototype.has=function(i,t){i=Ct(i);if(i){var e=Hi.findKey(this,i);return!!(e&&this[e]!==undefined&&(!t||Bt(this,this[e],e,t)))}return false};i.prototype.delete=i.prototype.clear=i.prototype.normalize=function(i){var t=this;var e={};Hi.forEach(this,(function(n,s){var r=Hi.findKey(e,s);if(r){t[r]=kt(n);delete t[s];return}var o=i?xt(s):String(s).trim();if(o!==s){delete t[s]}t[o]=kt(n);e[o]=true}));return this};i.prototype.concat=function(){var i;var t=[];for(var e=0;e<arguments.length;e++){t[e]=arguments[e]}return(i=this.constructor).concat.apply(i,__spreadArray([this],t,false))};i.prototype.toJSON=function(i){var t=Object.create(null);Hi.forEach(this,(function(e,n){e!=null&&e!==false&&(t[n]=i&&Hi.isArray(e)?e.join(", "):e)}));return t};i.prototype[Symbol.iterator]=i.prototype.toString=function(){return Object.entries(this.toJSON()).map(().join("\n")};Object.defineProperty(i.prototype,Symbol.toStringTag,{get:enumerable:false,configurable:true});i.from=i.concat=function(i){var t=[];for(var e=1;e<arguments.length;e++){t[e-1]=arguments[e]}var n=new this(i);t.forEach((function(i){return n.set(i)}));return n};i.accessor=return i}();Ut.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Hi.reduceDescriptors(Ut.prototype,(function(i,t){var e=i.value;var n=t[0].toUpperCase()+t.slice(1);return{get:function(){return e},set:function(i){this[n]=i}}}));Hi.freezeMethods(Ut);inherits(Lt,Yi,{__CANCEL__:true});ar Pt=yt.hasStandardBrowserEnv?{write:function(i,t,e,n,s,r){var o=[i+"="+encodeURIComponent(t)];Hi.isNumber(e)&&o.push("expires="+new Date(e).toGMTString());Hi.isString(n)&&o.push("path="+n);Hi.isString(s)&&o.push("domain="+s);r===true&&o.push("secure");document.cookie=o.join("; ")},read:remove::{write:function(){},read:function(){return null},remove:function(){}}; Gt=yt.hasStandardBrowserEnv?):);nction Yt(i,t){var e=0;var n=Ht(50,250);return function(s){var r=s.loaded;var o=s.lengthComputable?s.total:undefined;var a=r-e;var h=n(a);var l=r<=o;e=r;var u={loaded:r,total:o,progress:o?r/o:undefined,bytes:a,rate:h?h:undefined,estimated:h&&o&&l?(o-r)/h:undefined,event:s};u[t?"download":"upload"]=true;i(u)}}var Jt=typeof XMLHttpRequest!=="undefined";var Qt=Jt&&function(i){return new Promise((function t(e,n){var s=i.data;var r=Ut.from(i.headers).normalize();var o=i.responseType,a=i.withXSRFToken;var h;ar u;if(Hi.isFormData(s)){if(yt.hasStandardBrowserEnv||yt.hasStandardBrowserWebWorkerEnv){r.setContentType(false)}else if((u=r.getContentType())!==false){var d=u?u.split(";").map(().filter(Boolean):[],f=d[0],c=d.slice(1);r.setContentType(__spreadArray([f||"multipart/form-data"],c,true).join("; "))}}var v=new XMLHttpRequest;if(i.auth){var p=i.auth.username||"";var m=i.auth.password?unescape(encodeURIComponent(i.auth.password)):"";r.set("Authorization","Basic "+btoa(p+":"+m))}var g=Xt(i.baseURL,i.url);v.open(i.method.toUpperCase(),ht(g,i.params,i.paramsSerializer),true);v.timeout=i.timeout;f("onloadend"in v){v.onloadend=b}else{v.onreadystatechange=v.onabort=v.onerror=v.ontimeout=if(yt.hasStandardBrowserEnv){a&&Hi.isFunction(a)&&(a=a(i));if(a||a!==false&&Gt(g)){var y=i.xsrfHeaderName&&i.xsrfCookieName&&Pt.read(i.xsrfCookieName);if(y){r.set(i.xsrfHeaderName,y)}}}s===undefined&&r.setContentType(null);if("setRequestHeader"in v){Hi.forEach(r.toJSON(),()}if(!Hi.isUndefined(i.withCredentials)){v.withCredentials=!!i.withCredentials}if(o&&o!=="json"){v.responseType=i.responseType}if(typeof i.onDownloadProgress==="function"){v.addEventListener("progress",Yt(i.onDownloadProgress,true))}if(typeof i.onUploadProgress==="function"&&v.upload){v.upload.addEventListener("progress",Yt(i.onUploadProgress))}if(i.cancelToken||i.signal){h=function(t){if(!v){return}n(!t||t.type?new Lt(null,i,v):t);v.abort();v=null};i.cancelToken&&i.cancelToken.subscribe(h);if(i.signal){i.signal.aborted?h():i.signal.addEventListener("abort",h)}}var w=Wt(g);if(w&&yt.protocols.indexOf(w)===-1){n(new Yi("Unsupported protocol "+w+":",Yi.ERR_BAD_REQUEST,i));return}v.send(s||null)}))};var Kt={http:Ki,xhr:Qt};Hi.forEach(Kt,();var Zt=var $t=function(i){return Hi.isFunction(i)||i===null||i===false};var ie={getAdapter:function(i){i=Hi.isArray(i)?i:[i];var t=i.length;var e;var n;var s={};for(var r=0;r<t;r++){e=i[r];var o=void 0;n=e;if(!$t(e)){n=Kt[(o=String(e)).toLowerCase()];if(n===undefined){throw new Yi("Unknown adapter '".concat(o,"'"))}}if(n){break}s[o||"#"+r]=n}if(!n){var a=Object.entries(s).map((function(i){var t=i[0],e=i[1];return"adapter ".concat(t," ")+(e===false?"is not supported by the environment":"is not available in the build")}));var h=t?a.length>1?"since :\n"+a.map(Zt).join("\n"):" "+Zt(a[0]):"as no adapter specified";throw new Yi("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return n},adapters:Kt};r ne=function se(i,t){t=t||{};var e={};={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:function(i,t){return s(ne(i),ne(t),true)}};Hi.forEach(Object.keys(Object.assign({},i,t)),();return e}var re="1.6.5";var oe={};["object","boolean","number","function","string","symbol"].forEach(();var ae={};oe.transitional=function i(t,e,n){eturn function(i,n,r){if(t===false){throw new Yi(s(n," has been removed"+(e?" in "+e:"")),Yi.ERR_DEPRECATED)}if(e&&!ae[n]){ae[n]=true;console.warn(s(n," has been deprecated since v"+e+" and will be removed in the near future"))}return t?t(i,n,r):true}};ar le={assertOptions:he,validators:oe};var ue=le.validators;var de=function(){.prototype.request=function(i,t){if(typeof i==="string"){t=t||{};t.url=i}else{t=i||{}}t=se(this.defaults,t);var e=t.transitional,n=t.paramsSerializer,s=t.headers;if(e!==undefined){le.assertOptions(e,{silentJSONParsing:ue.transitional(ue.boolean),forcedJSONParsing:ue.transitional(ue.boolean),clarifyTimeoutError:ue.transitional(ue.boolean)},false)}if(n!=null){if(Hi.isFunction(n)){t.paramsSerializer={serialize:n}}else{le.assertOptions(n,{encode:ue.function,serialize:ue.function},true)}}t.method=(t.method||this.defaults.method||"get").toLowerCase();var r=s&&Hi.merge(s.common,s[t.method]);s&&Hi.forEach(["delete","get","head","post","put","patch","common"],();t.headers=Ut.concat(r,s);var o=[];var a=true;this.interceptors.request.forEach(();var h=[];this.interceptors.response.forEach(();var l;var u=0;var d;if(!a){var f=[ee.bind(this),undefined];f.unshift.apply(f,o);f.push.apply(f,h);d=f.length;l=Promise.resolve(t);while(u<d){l=l.then(f[u++],f[u++])}return l}d=o.length;var c=t;u=0;while(u<d){var v=o[u++];var p=o[u++];try{c=v(c)}catch(i){p.call(this,i);break}}try{l=ee.call(this,c)}catch(i){return Promise.reject(i)}u=0;d=h.length;while(u<d){l=l.then(h[u++],h[u++])}return l};i.prototype.getUri=return i}();Hi.forEach(["delete","get","head","options"],();Hi.forEach(["post","put","patch"],();var fe=function(){function i(i){if(typeof i!=="function"){throw new TypeError("executor must be a function.")}var t;this.promise=new Promise((function i(e){t=e}));var e=this;this.promise.then((function(i){if(!e._listeners)return;var t=e._listeners.length;while(t-- >0){e._listeners[t](i)}e._listeners=null}));this.promise.then=i(()}i.prototype.throwIfRequested=i.prototype.subscribe=i.prototype.unsubscribe=i.source=return i}();r pe={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pe).forEach(();ar ge=me(Et);ge.Axios=de;ge.CanceledError=Lt;ge.CancelToken=fe;ge.isCancel=Mt;ge.VERSION=re;ge.toFormData=nt;ge.AxiosError=Yi;ge.Cancel=ge.CanceledError;ge.all=function i(t){return Promise.all(t)};ge.spread=ce;ge.isAxiosError=ve;ge.mergeConfig=se;ge.AxiosHeaders=Ut;ge.formToJSON=ge.getAdapter=ie.getAdapter;ge.HttpStatusCode=pe;ge.default=ge;var be="https://demand.qortex.ai";var ye="https://events.qortex.ai";var we=null;unction Te(i,t){if(t===void 0){t=[d.QA]}we.evaluateDebugLog(i,t)}function Ie(i){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){switch(t.label){case 0:return[4,ge.post("".concat(ye,"/api/v1/player-event"),i).catch((function(i){if(!i.response){Te("Error contacting server: ".concat(ye,"/api/v1/player-event"),d.ERROR)}else{Te("Error sending PlayerEvent: ("+i+" )",d.ERROR)}}))];case 1:return[2,t.sent()]}}))}))}function Se(i,t,e){return __awaiter(this,void 0,void 0,(function(){var n,s;return __generator(this,(function(r){n="null";if(window.location!==window.parent.location){Te("iframe detected",d.CXO);if(document.domain!==""&&document.domain!==undefined){n=document.domain.replace("www.","")}if(document.referrer!==""){Te("loading domain from referrer",d.CXO);n=new URL(document.referrer).hostname.replace("www.","");Te("".concat(n," from referrer"),d.CXO)}}else{if(document.domain!==""&&document.domain!==undefined){n=document.domain.replace("www.","")}}s="".concat(be,"/api/v1/monetize/moments/").concat(i,"/").concat(n,"/").concat(e,"?url=").concat(t);Te("initaiting trackcue Fetch ".concat(s),d.CXO);return[2,ge.get(s).then((function(i){return i.data})).catch((function(i){Te(["api error: ",i],d.ERROR);return null}))]}))}))}function Ee(i){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){Te("initaiting vast wrapper Fetch ".concat(i),d.CXO);return[2,ge.get(i).then((function(i){return i.data.text()})).catch((function(i){Te(["api error: ",i],d.ERROR);return null}))]}))}))}function De(i){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(t){Te("initaiting vast video Fetch ".concat(i),d.CXO);return[2,ge.get(i).then(().catch((function(i){Te(["api error: ",i],d.ERROR);return null}))]}))}))}function Re(i){return __awaiter(this,void 0,void 0,(function(){var t,e,n,s;return __generator(this,(function(r){t="null";if(document.location.host!==""&&document.location.host!==undefined){t=document.location.host.replace("www.","")}if(window.location!==window.parent.location){Te("iframe detected",d.CXO);if(document.referrer!==""){Te("loading domain from referrer",d.CXO);t=new URL(document.referrer).hostname.replace("www.","");Te("".concat(t," from referrer"),d.CXO)}}e=i.nativeSize!==null?"".concat(i.bannerSize,"_").concat(i.nativeSize):i.bannerSize;n=i.isRevContentBid?"".concat(be,"/api/v1/monetize/resources/revcontent"):i.isOutbrainBid?"".concat(be,"/api/v1/monetize/resources/outbrain"):"".concat(be,"/api/v1/monetize/resources");i.uid=i.isOutbrainBid&&i.uid==="NOT_FOUND"?"null":i.uid;s={groupId:i.groupId,domain:t,videoId:i.videoId,placementTypeId:i.placementTypeId,insertSizing:e,akuid:i.uid,eids:i.eidsIdentityHub,iiqEIDs:i.eidsIntentIQ,GPPString:i.gppString,GPPSids:i.gppSids,TCString:i.tcString,GDPRApplies:i.gdprApplies,USPString:i.uspString,sessionId:i.sessionId,bidId:i.bidId,mediaId:i.mediaId,logicalVideoId:i.logicalVideoId,startMilliseconds:i.startMilliseconds,endMilliseconds:i.endMilliseconds,marketplaceId:i.marketplaceId,storeId:i.storeId,bundleId:i.bundleId};if(typeof i.idx!=="undefined"&&i.idx!==null){s.idx=i.idx}if(typeof i.outbrainToken!=="undefined"&&i.outbrainToken!==null){s.outbrainToken=i.outbrainToken}Te(["Fetching ".concat(i.isRevContentBid?"Rev Content":i.isOutbrainBid?"Outbrain":"ADK"," resource:"),s],[d.QA]);return[2,ge.post(n,s).then((function(i){return i.data})).catch((function(t){Te(["Error on ".concat(i.isRevContentBid?"Rev Content":i.isOutbrainBid?"Outbrain":"ADK"," resource request: "),t],d.ERROR);return{}}))]}))}))}function _e(i){return __awaiter(this,void 0,void 0,(function(){var t,e,n,s;return __generator(this,(function(r){n=window.location.hostname||"null";if(window.self!==window.top){Te("iframe detected",d.CXO);try{n=window.top.location.hostname}catch(i){s=((e=(t=window.location)===null||t===void 0?void 0:t.ancestorOrigins)===null||e===void 0?void 0:e[window.location.ancestorOrigins.length-1])||window.document.referrer||null;if(s!==null){n=new URL(s).hostname}Te("iframe is not friendly to access window.top - referrer obtained ".concat(n),d.CXO)}}n=n.replace("www.","")||"null";return[2,ge.get("".concat(be,"/api/v1/group/configs/").concat(i,"/").concat(n)).then((function(i){return i.data})).catch((function(i){Te(["api error: ",i],d.ERROR);return null}))]}))}))}var Ce=function(){function i(){var i;var t=this;var e,n;this._logMode="".concat(d.INFO);this._componentSource="";this.topWindow=window;this.windowURL=window.location.href;this.storedLogs=[];this.startTime=new Date;this.timestampColor={r:Math.floor(Math.random()*130+20),g:Math.floor(Math.random()*130+20),b:Math.floor(Math.random()*130+20)};this.debugColors=(i={},i[d.CXO]="background-color: #512da8; color: #FFF;",i[d.QA]="background-color:rgba(255, 255, 217,1); color:rgb(64, 0, 255);",i[d.INFO]="background-color:rgba(255,255,255,1); color: rgba(0,100,0, 1);",i[d.INSERT]="background-color: rgba(229,239,229, 1); color: rgb(0,100,0);",i[d.ERROR]="background-color: rgba(255,229,229, 1); color: rgba(255,0,0, 1);",i[d.IMPORTANT]="background-color: rgba(199,5,5); color: rgba(255,255,255, 1);",i[d.HIGHLIGHT]="background-color: rgba(255,255,0); color: rgba(0,0,0, .75);",i[d.SELENIUM]="background-color: rgba(0,0,0, 1); color: rgba(255,255,255, .75);",i[d.OVERLAYLOGS]="background-color: rgba(3,22,52, 1); color: rgba(242,221,203, 1);",i[d.TAM]="background-color: rgba(230,254,255,1); color: rgba(23,0,135, 1);",i[d.ALL]="",i[d.NONE]="",i);this.showTimestamp=false;this.highlightLogs=false;this.logFunc=console.log.toString().includes("native code")?console.log:console.info.toString().includes("native code")?console.info:null;if(!this.windowURL.includes("DEBUG")&&!this.windowURL.includes(O.CX_TIER)&&window.self!==window.top){try{this.windowURL=window.top.location.href;this.topWindow=window.top}catch(i){this.windowURL=window.document.referrer||((n=(e=window.location)===null||e===void 0?void 0:e.ancestorOrigins)===null||n===void 0?void 0:n[window.location.ancestorOrigins.length-1])||this.windowURL;this.evaluateDebugLog(["unfriendly iframe detected at log manager url - referrer url determined: ".concat(this.windowURL)],d.ERROR)}}if(this.windowURL.includes("%")){this.windowURL=decodeURI(this.windowURL);this.windowURL=this.windowURL.includes("%")?decodeURIComponent(this.windowURL):this.windowURL}this.paramString=this.windowURL.substring(this.windowURL.indexOf("?")+1)||"";var s=this.paramString.split("?");this.paramArray=[];s.forEach((function(i){t.paramArray=t.paramArray.concat(i.split("&"))}));var r=this.getDebugParamValue(O.CX_LOG_MODE);if(r!==null){this._logMode=r;if(this._logMode.includes("most")){this._logMode+="qa-info-boot-insert-error-important"}}else if(this.windowURL.includes("localhost")||this.windowURL.includes("file:///")||this.windowURL.includes("127.0.0.1")){this._logMode="qa-info-insert-error-boot-important"}else if(this.windowURL.includes(O.CX_TIER+"=")){this._logMode+="-qa-important-error-"}if(this.getDebugParamValue(O.CX_LOG_TIMESTAMPS)!==null){this.showTimestamp=true}var o=this.getDebugParamValue(O.HIGHLIGHT_LOGS);if(o!==null&&o.includes("t")){this.highlightLogs=true}if(this.logFunc===null){this.evaluateDebugLog("no console logging available - will try to create iframe console.",d.IMPORTANT);this.createLoggingIframe()}}i.prototype.createLoggingIframe=function(){var i=this;var t=document.createElement("iframe");t.setAttribute("style","display:none; position:absolute; width:0px; height:0px;");document.body.appendChild(t);var e=setInterval((function(){var n;if(typeof((n=t===null||t===void 0?void 0:t.contentWindow)===null||n===void 0?void 0:n.console)!=="undefined"){i.logFunc=t.contentWindow.console.log;i.showStoredLogs();i.evaluateDebugLog("Log function created",d.IMPORTANT);clearInterval(e)}}),10)};Object.defineProperty(i.prototype,"timeStamp",{get:function(){var i=new Date;var t=i.getHours()>9?i.getHours():"0"+i.getHours();var e=i.getMinutes()>9?i.getMinutes():"0"+i.getMinutes();var n=i.getSeconds()>9?i.getSeconds():"0"+i.getSeconds();var s=i.getMilliseconds()>99?i.getMilliseconds():i.getMilliseconds()>9?"0"+i.getMilliseconds():"00"+i.getMilliseconds();return t+":"+e+":"+n+"."+s},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"timeElapsed",{get:function(){return(.001*((new Date).getTime()-this.startTime.getTime())).toFixed(3)},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"logMode",{get:function(){return this._logMode},set:function(i){this._logMode=i;this.evaluateDebugLog("Set log mode: "+i+" - "+this.logMode,[d.QA])},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"componentSource",{get:function(){return this._componentSource},set:function(i){if(this.getDebugParamValue(O.SHOW_CONSOLE_COMPONENT_SOURCE)){this._componentSource=i}},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"debugLogGroupId",{get:function(){return this._debugLogGroupId},set:function(i){this._debugLogGroupId=i!==null&&i!==void 0?i:""},enumerable:false,configurable:true});i.prototype.evaluateDebugLog=function(i,t,e){var n=this;if(e===void 0){e=""}if(e===""||this.logFunc===null){this.storedLogs.push([i,t,this.timeElapsed])}try{if(this.logMode.toLowerCase().indexOf(d.NONE)===-1){t=typeof t==="string"?[t]:t;var s=this.logMode.toLowerCase().indexOf(d.ALL)!==-1?true:false;if(s||t.find(()){var r=!Array.isArray(i)?[i]:__spreadArray([],i,true);var o="";var a=this.logMode.toLowerCase();if(this.logMode.toLowerCase().indexOf(d.SELENIUM)!==-1&&t.find((function(i){return i===d.SELENIUM}))){o=this.debugColors[d.SELENIUM];a=d.SELENIUM}else if(this.logMode.toLowerCase().indexOf(d.OVERLAYLOGS)!==-1&&t.find((function(i){return i===d.OVERLAYLOGS}))){o=this.debugColors[d.OVERLAYLOGS];a=d.OVERLAYLOGS}else if(this.logMode.toLowerCase().indexOf(d.HIGHLIGHT)!==-1&&t.find((function(i){return i===d.HIGHLIGHT}))){o=this.debugColors[d.HIGHLIGHT];a=d.HIGHLIGHT}else if((s||this.logMode.toLowerCase().indexOf(d.IMPORTANT)!==-1)&&t.find((function(i){return i===d.IMPORTANT}))){o=this.debugColors[d.IMPORTANT];a=d.IMPORTANT}else if((s||this.logMode.toLowerCase().indexOf(d.ERROR)!==-1)&&t.find((function(i){return i===d.ERROR}))){o=this.debugColors[d.ERROR];a=d.ERROR}else if((s||this.logMode.toLowerCase().indexOf(d.TAM)!==-1)&&t.find((function(i){return i===d.TAM}))){o=this.debugColors[d.TAM];a=d.TAM}else if((s||this.logMode.toLowerCase().indexOf(d.QA)!==-1)&&t.find((function(i){return i===d.QA}))){o=this.debugColors[d.QA];a=d.QA}else if((s||this.logMode.toLowerCase().indexOf(d.INFO)!==-1)&&t.find((function(i){return i===d.INFO}))){o=this.debugColors[d.INFO];a=d.INFO}else if((s||this.logMode.toLowerCase().indexOf(d.CXO)!==-1)&&t.find((function(i){return i===d.CXO}))){o=this.debugColors[d.CXO];a=d.CXO}else if((s||this.logMode.toLowerCase().indexOf(d.INSERT)!==-1)&&t.find(()){o=this.debugColors[d.INSERT];a=d.INSERT}if(o!==""){o+=this.highlightLogs?"padding: 1px 4px; display: inline-block; font-weight:normal;":"padding: 1px 4px; border-radius: 3px; display: inline-block; font-weight:bold;";var h=[];var l="      ";for(var u=0;u<r.length;u++){if(h.length===0){var f=typeof r[u]==="string"?"%s":typeof r[u]==="object"&&r[u]!==null&&typeof r[u].nodeType==="undefined"?"%O":"%o";h.push("%cCX%cLOGS.".concat(this.debugLogGroupId,"%c").concat(this.componentSource,"%c").concat(a.toUpperCase(),"%c").concat(!!e?e:this.timeElapsed,"%c").concat(f));if(!this.highlightLogs){h.push("padding: 1px 4px; border-radius: 3px; display: inline-block; background-color: #ffb700; color:rgba(255,255,255,1); font-weight:bold;");h.push("font-size:0; color:rgba(255,255,255,0); background-color:rgba(255,255,255,0);");h.push("padding: 1px 4px; border-radius: 3px; display: inline-block; background-color: ".concat(this.componentSource==="OVERLAY"?"#594aff":"#1d1459","; color:rgba(255,255,255,1); font-weight:bold;"));h.push(o);h.push("font-size:.8em; font-weight:bold; color:rgba(".concat(this.timestampColor.r,",").concat(this.timestampColor.g,",").concat(this.timestampColor.b,",1); background-color:rgba(255,255,255,0); margin:2px 3px;"));h.push("padding: 1px 4px; border-radius: 3px; display: inline-block; background-color: initial; color:initial; font-weight:normal;")}else{h.push("font-size:0; color:rgba(255,255,255,0); background-color:rgba(255,255,255,0);");h.push("font-size:0; color:rgba(255,255,255,0); background-color:rgba(255,255,255,0);");h.push("font-size:0; color:rgba(255,255,255,0); background-color:rgba(255,255,255,0);");h.push("font-size:0; color:rgba(255,255,255,0); background-color:rgba(255,255,255,0);");h.push("font-size:.8em; font-weight:bold; color:rgba(".concat(this.timestampColor.r,",").concat(this.timestampColor.g,",").concat(this.timestampColor.b,",1); background-color:rgba(255,255,255,0); margin:2px 3px;"));if(a===d.QA){o+="font-size:1.3em;"}h.push(o)}if(this.showTimestamp){h.push(this.timeStamp+" - "+r[u])}else{h.push(r[u])}}else if(typeof r[u]==="string"){h[0]+="\n".concat(l,"%s");h.push(r[u])}else{var f=typeof r[u]==="object"&&r[u]!==null&&typeof r[u].nodeType==="undefined"?"%O":"%o";h[0]+="\n"+l;h[0]+=f;h.push(r[u])}}if(this.logFunc!==null){this.logFunc.apply(this,h)}this.dispatchLoggerEvent({log:h,type:a});return true}}}}catch(i){console.warn("evaluateDebugLog error.",i)}return false};i.prototype.showStoredLogs=function(){var i=this;var t=[];this.storedLogs.forEach((function(e){if(!i.evaluateDebugLog(e[0],e[1],e[2])){t.push(e)}}));this.storedLogs=t};i.prototype.dispatchLoggerEvent=function(i){if(i===void 0){i={}}var t=new CustomEvent(B.DISPATCH_LOG,{bubbles:false,detail:i});window.dispatchEvent(t)};i.prototype.getDebugParamValue=function(i){var t,e;var n=[O.OVERRIDE_GROUP_ID,O.OVERRIDE_CONFIGS_GROUP_ID];var s="";if(this.paramString.indexOf(i)>=0){s=(t=this.paramArray.find(().split("="))===null||t===void 0?void 0:t[1]}else if((e=this.cxInjectorWindowDebug)===null||e===void 0?void 0:e[i]){s=this.cxInjectorWindowDebug[i]}if(!n.includes(i)){s=s.toLowerCase()}var r=s||null;var o=r!==null?d.QA:d.CXO;this.evaluateDebugLog("getDebugParamValue: ".concat(i," = ").concat(r," "),o);return r};Object.defineProperty(i.prototype,"cxInjectorWindowDebug",{get:function(){var i,t;var e=(t=(i=window["cxInjectorWindowDebug"])!==null&&i!==void 0?i:this.topWindow["cxInjectorWindowDebug"])!==null&&t!==void 0?t:{};return e},enumerable:false,configurable:true});return i}();var ke=function(){function i(i,t,e){this.logManager=null;this.locationInformation=null;this.deviceInformation=null;this.groupId=null;this.sessionId=null;this.logicalVideoId=null;this.mediaId=null;this.videoUrl=null;this.videoSessionId=null;this.eventCount=1;this.eventComponentSource=null;this.excludeEvents=[];this.eventsSentTimestamps=[];this.shutdown=false;this.allowedEventsPerMinute=150;this.bidResponseIds=[];this.analyticsTier=U.ALL;this.logManager=i;this.eventCount=1;this.shutdownFunction=t;this.allowedEventsPerMinute=e;this.logManager.evaluateDebugLog("Events dispatcher created with ".concat(this.allowedEventsPerMinute," events per minute allowed."),[d.CXO,d.QA])}i.prototype.assignEventsLocationData=function(i){this.locationInformation=i};i.prototype.assignEventsDeviceData=function(i){this.deviceInformation=i};i.prototype.assignEventsComponentSource=function(i){this.eventComponentSource=i};i.prototype.assignEventsGroupId=function(i){this.groupId=i};i.prototype.assignEventsSessionId=function(i){this.sessionId=i};i.prototype.assignLogicalVideoId=function(i){this.logicalVideoId=i};i.prototype.assignMediaId=function(i){this.mediaId=i};i.prototype.assignVideoUrl=i.prototype.assignPlayerEventFrequency=function(i){this.analyticsTier=i;this.logManager.evaluateDebugLog(["Setting player event frequency to ".concat(this.analyticsTier)],[d.CXO,d.QA]);switch(this.analyticsTier){case U.LOW:this.excludeEvents.push({eventType:x.OVERLAY,subType:F.OVERLAY_GROUPID_ZONE_MISMATCH});this.excludeEvents.push({eventType:x.OVERLAY,subType:F.OVERLAY_GROUP_CONFIGS});this.excludeEvents.push({eventType:x.TAM,subType:F.TAM_REQUEST});this.excludeEvents.push({eventType:x.TAM,subType:F.TAM_RESPONSE});this.excludeEvents.push({eventType:x.PREBID,subType:F.PREBID_REQUEST});this.excludeEvents.push({eventType:x.PREBID,subType:F.PREBID_RESPONSE});this.excludeEvents.push({eventType:x.GAM,subType:F.GAM_RESPONSE_EMPTY});this.excludeEvents.push({eventType:x.BID,subType:F.BID_NO_REQUEST});this.excludeEvents.push({eventType:x.OVERLAY,subType:F.CLS_INIT});this.excludeEvents.push({eventType:x.OVERLAY,subType:F.CLS_SHIFT_OBSERVED});this.excludeEvents.push({eventType:x.INSERT,subType:F.INSERT_CREATED});this.excludeEvents.push({eventType:x.VIDEO,subType:F.VIDEO_STARTED});this.excludeEvents.push({eventType:x.VIDEO,subType:F.VIDEO_RESTARTED});this.excludeEvents.push({eventType:x.VIDEO,subType:F.VIDEO_ENDED});case U.MEDIUM:this.excludeEvents.push({eventType:x.VIDEO,subType:F.VIDEO_PLAY});this.excludeEvents.push({eventType:x.VIDEO,subType:F.VIDEO_PAUSE});this.excludeEvents.push({eventType:x.VIDEO,subType:F.VIDEO_SRC_CHANGED});this.excludeEvents.push({eventType:x.INSERT,subType:F.INSERT_INITIALIZED});case U.HIGH:this.excludeEvents.push({eventType:x.OVERLAY,subType:F.OVERLAY_TIME_REACHED});this.excludeEvents.push({eventType:x.VIDEO,subType:F.VIDEO_TIME_REACHED});break;case U.ALL:this.excludeEvents.splice(0,this.excludeEvents.length);break}};i.prototype.sendEventObject=function(i,t,e,n,s,r,o){try{var a=new URL(e).hostname;var h={playerMode:s,groupId:this.groupId,hasAdkId:n,eventType:i,subType:t,eventOriginSource:r,componentSource:this.eventComponentSource,data:o,domain:a,pageUrl:e,sessionId:this.sessionId,userAgent:window.navigator.userAgent,regionInfo:this.locationInformation,deviceInfo:this.deviceInformation,eventOrder:this.eventCount++,activeWindow:!document.hidden};if(this.eventComponentSource==C.OVERLAY){h.videoUrl=this.videoUrl||null;h.videoSessionId=this.videoSessionId||null;h.logicalVideoId=this.logicalVideoId||null;h.mediaId=this.mediaId||null}if(!!this.excludeEvents.find(()||this.analyticsTier===U.NONE){this.logManager.evaluateDebugLog(["Not sending event - event in excluded list: ".concat(i," ").concat(t)],[d.CXO,d.QA])}else if(i===x.BID&&(t===F.BID_RESPONSE||t===F.BID_RESPONSE_EMPTY)){var l=o.bidRequestId||"";if(!this.bidResponseIds.includes(l)){this.logManager.evaluateDebugLog(["Sending ".concat(i," (").concat(r,"): ").concat(t," event to player-event-api :: ").concat(JSON.stringify(h.data)),h],[d.CXO,d.QA]);this.bidResponseIds.push(l);Ie(h)}else{this.logManager.evaluateDebugLog(["Not sending event: ".concat(i," ").concat(t," - bid response event already sent for bid id ").concat(l,".")],[d.CXO,d.QA])}}else{this.logManager.evaluateDebugLog(["Sending ".concat(i," (").concat(r,"): ").concat(t," event to player-event-api :: ").concat(JSON.stringify(h.data)),h],[d.CXO,d.QA]);Ie(h)}this.addEventTimestamp()}catch(e){this.logManager.evaluateDebugLog(["Error sending event: ".concat(i," ").concat(t),e],[d.CXO,d.QA])}};i.prototype.addEventTimestamp=function(){var i=(new Date).getTime();this.eventsSentTimestamps.push(i);for(var t=0;t<this.eventsSentTimestamps.length;t++){if(this.eventsSentTimestamps[t]+6e4<i){this.eventsSentTimestamps.splice(t,1);t--}else{break}}if(this.eventsSentTimestamps.length>this.allowedEventsPerMinute&&!this.shutdown){this.logManager.evaluateDebugLog("Events per minute has exceeded set limit of (".concat(this.allowedEventsPerMinute,"). Will remove client."),[d.CXO,d.QA]);this.shutdown=true;this.shutdownFunction()}};i.prototype.sendBidEvent=function(i,t,e,n,s,r){this.sendEventObject(x.BID,i,e,n,s,t,r)};i.prototype.sendBidResponseEvent=function(i,t,e,n,s,r){this.sendEventObject(x.BID,i,e,n,s,t,r)};i.prototype.sendPrebidEvent=function(i,t,e,n,s,r){this.sendEventObject(x.PREBID,i,e,n,s,t,r)};i.prototype.sendGAMEvent=function(i,t,e,n,s,r){this.sendEventObject(x.GAM,i,e,n,s,t,r)};i.prototype.sendTAMEvent=function(i,t,e,n,s,r){this.sendEventObject(x.TAM,i,e,n,s,t,r)};i.prototype.sendFetchMomentsEvent=function(i,t,e,n,s,r){this.sendEventObject(x.OVERLAY,i,e,n,s,t,r)};i.prototype.sendInsertEvent=function(i,t,e,n,s,o,a,h,l,u,d,f,c,v,p,m,g,b,y,w,O,T){var I={insertType:c.toUpperCase()||"null",overlayTime:u/1e3,activeOverlayTime:d/1e3,videoTime:l,insertId:f,insertViewability:0,containerViewability:Math.ceil(g*100),bidRequestId:m!==null&&m!==void 0?m:"null",adOpportunityId:p!==null&&p!==void 0?p:"null",impressionType:r.NATIVE,seat:e,cid:n,crid:s};if(typeof b!=="undefined"&&b!==null){I.debug=b}if(y!=null){I.insertViewability=Math.ceil(y*100)}if(w!=null){I.insertDisplayedTotalTime=w}if(O!=null){I.insertInViewTotalTime=O}if(typeof v!=="undefined"&&v!==null){I.bannerSize=v;I.impressionType=r.DISPLAY}if(typeof T!=="undefined"&&T!==null){I.insertAverageViewabilityValue=T||null}this.sendEventObject(x.INSERT,i,o,a,h,t,I)};i.prototype.sendInsertFailedEvent=function(i,t,e,n,s,o,a,h,l,u,d,f,c,v,p,m,g,b,y,w){var O={insertType:c.toUpperCase()||"null",overlayTime:u/1e3,activeOverlayTime:d/1e3,videoTime:l,insertId:f,insertViewability:0,containerViewability:Math.ceil(b*100),bidRequestId:m!==null&&m!==void 0?m:"null",adOpportunityId:p!==null&&p!==void 0?p:"null",impressionType:r.NATIVE,adm:g,seat:e,cid:n,crid:s};if(typeof y!=="undefined"&&y!==null){O.debug=y}if(w!=null){O.insertViewability=Math.ceil(w*100)}if(typeof v!=="undefined"&&v!==null){O.bannerSize=v;O.impressionType=r.DISPLAY}this.sendEventObject(x.INSERT,i,o,a,h,t,O)};i.prototype.sendInsertImpressionEvent=function(i,t,e,n,s,o,a,h,l,u,d,f,c,v,p,m,g,b,y,w){var O={insertType:c.toUpperCase()||"null",overlayTime:u/1e3,activeOverlayTime:d/1e3,videoTime:l,insertId:f,insertViewability:0,containerViewability:Math.ceil(g*100),bidRequestId:m!==null&&m!==void 0?m:"null",adOpportunityId:p!==null&&p!==void 0?p:"null",cpm:y!==null&&y!==void 0?y:null,impressionType:r.NATIVE,seat:e,cid:n,crid:s};if(typeof w!=="undefined"&&w!==null){O.debug=w}if(b!=null){O.insertViewability=Math.ceil(b*100)}if(typeof v!=="undefined"&&v!==null){O.bannerSize=v;O.impressionType=r.DISPLAY}this.sendEventObject(x.INSERT,i,o,a,h,t,O)};i.prototype.sendVideoEvent=function(i,t,e,n,s,r,o,a,h,l,u){var d={overlayTime:o/1e3,activeOverlayTime:a/1e3,videoTime:r,componentDimensions:l,containerViewability:Math.ceil(h*100)};if(typeof u!=="undefined"&&u!==null){d.timeReached=u}this.sendEventObject(x.VIDEO,i,e,n,s,t,d)};i.prototype.sendOverlayEvent=function(i,t,e,n,s,r,o,a,h){var l={overlayTime:r/1e3,activeOverlayTime:o/1e3,containerViewability:Math.ceil(a*100)};if(typeof h!=="undefined"&&h!==null){l.debug=h}this.sendEventObject(x.OVERLAY,i,e,n,s,t,l)};i.prototype.sendOverlayTimeEvent=function(i,t,e,n,s,r,o,a,h){var l={overlayTime:r/1e3,activeOverlayTime:o/1e3,containerViewability:Math.ceil(a*100),timeReached:h};this.sendEventObject(x.OVERLAY,i,e,n,s,t,l)};return i}();var Ne=function(){function i(i,t,e,n,s){this._repeatCount=0;this.completeCallback=this.complete.bind(this);this.defaultLogType=d.QA;this.id=t>0?setTimeout(this.completeCallback,t):null;this.createdTime=(new Date).getTime();this.startTime=this.createdTime;this.remainingTime=t;this.millisecondsTimeout=t;this.elapsedTotalTime=0;this.callbackFunction=i;this.logManager=n!==null&&n!==void 0?n:null;this.defaultLogType=s!==null&&s!==void 0?s:this.defaultLogType;this._name=e;this.debugLog("Timer '".concat(this.name,"' created with ").concat(t/1e3," seconds until callback."))}i.prototype.pause=function(){if(typeof this.id!=="undefined"&&this.id!==null){clearTimeout(this.id);var i=this.timeElapsedSinceStartTime;this.debugLog("Timer ".concat(this.name," timeChanged value: ").concat(i,", total time is ").concat(this.getTotalElapsedTime()));this.remainingTime-=i;this.elapsedTotalTime+=i;this.id=null;this.debugLog("Timer '".concat(this.name,"' paused with ").concat(this.remainingTime/1e3," seconds remaining."));return this.remainingTime}if(this.remainingTime>0){this.debugLog("Timer '".concat(this.name,"' | id=").concat(this.id," unable to pause."))}else{this.debugLog("Timer '".concat(this.name,"' not active - unable to pause."))}return 0};i.prototype.resume=function(){if(this.id===null&&this.remainingTime>0){this.id=setTimeout(this.completeCallback,this.remainingTime);this.startTime=(new Date).getTime();this.debugLog("Timer '".concat(this.name,"' resumed with ").concat(this.remainingTime/1e3," seconds remaining."));return this.remainingTime}if(this.remainingTime>0){this.debugLog("Timer '".concat(this.name,"' | id=").concat(this.id," unable to resume."))}else{this.debugLog("Timer '".concat(this.name,"' not active - unable to resume."))}return 0};i.prototype.cancel=function(){if(this.id!==null){this.elapsedTotalTime+=this.timeElapsedSinceStartTime,"cancel";clearTimeout(this.id);this.id=null;this.remainingTime=0;var i="";if(this.repeatCount>0){i=" ".concat(this.repeatCount," timeout repetitions remaining. Will reset repeat count to 0.");this.repeatCount=0}this.debugLog("Timer '".concat(this.name,"' cancelled.").concat(i))}};i.prototype.complete=function(){var i=this.timeElapsedSinceStartTime;this.elapsedTotalTime+=i;this.id=null;if(this.remainingTime>0){this.debugLog("Timer '".concat(this.name,"' completed in ").concat(i/1e3," seconds -- ").concat(((new Date).getTime()-this.createdTime)/1e3," seconds from Timer creation."))}this.remainingTime=0;if(this.repeatCount-- >0){this.debugLog("Timer '".concat(this.name,"' set to repeat ").concat(this.repeatCount+1," times. Resetting timer with a ").concat(this.millisecondsTimeout,"ms callback."));this.reset(this.millisecondsTimeout)}this.callbackFunction()};i.prototype.reset=function(i,t){if(this.id!==null){this.elapsedTotalTime+=this.timeElapsedSinceStartTime}var e="";if(this.id!==null){var n=this.timeRemainingInSeconds;e=" Previous callback cancelled with ".concat(n," second(s) remaining.");clearTimeout(this.id);this.id=null}this.remainingTime=i;this.millisecondsTimeout=i;this.createdTime=(new Date).getTime();this.startTime=this.createdTime;this.callbackFunction=t!==null&&t!==void 0?t:this.callbackFunction;if(i<=0){this.debugLog("Timer '".concat(this.name,"' reset and to execute callback immediately."));this.complete()}else{this.id=setTimeout(this.completeCallback,this.remainingTime);this.debugLog("Timer '".concat(this.name,"' reset with ").concat(i/1e3," seconds until callback.").concat(e))}};i.prototype.resetIfInactive=function(i,t){if(this.remainingTime===0){this.reset(i,t)}else{this.debugLog("Timer '".concat(this.name,"' not reset because ").concat(this.timeRemainingInSeconds," seconds still remains until callback."))}};i.prototype.resetInterval=i.prototype.execute=function(){this.reset(0)};i.prototype.getElapsedTimeSinceReset=function(){var i=this.timeElapsedSinceStartTime;return this.millisecondsTimeout-this.remainingTime+i};i.prototype.getTotalElapsedTime=function(){var i=this.timeElapsedSinceStartTime;return this.elapsedTotalTime+i};Object.defineProperty(i.prototype,"timeRemainingInSeconds",{get:enumerable:false,configurable:true});Object.defineProperty(i.prototype,"timeElapsedSinceStartTime",{get:function(){return this.id!==null?(new Date).getTime()-this.startTime:0},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"definedCallbackInMillseconds",{get:function(){return this.millisecondsTimeout},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"name",{get:function(){return this._name},enumerable:false,configurable:true});i.prototype.addToRemainingTime=function(i){if(this.remainingTime>0){this.remainingTime+=i*1e3}};Object.defineProperty(i.prototype,"repeatCount",{get:function(){return this._repeatCount},set:function(i){this._repeatCount=i},enumerable:false,configurable:true});i.prototype.debugLog=function(i,t){if(t===void 0){t=this.defaultLogType}if(typeof this.logManager!=="undefined"&&this.logManager!==null){this.logManager.evaluateDebugLog(i,t)}};return i}();function Ae(i){return i==null}var Be;((Be||(Be={}));var xe="https://demand.qortex.ai";var Fe=function(){function i(i,t){var e=this;this._logManager=null;this._analyticsEventDispatcher=null;this._foundUID=null;this.osdProperties=null;this.groupId=null;this.componentStartTime=(new Date).getTime();this._activeOverlayRuntime=0;this._activeOverlayDate=this.componentStartTime;this.containerViewabilityValue=0;this.osdConfig=null;this.timers={osdRefreshRenderEndedTimer:new Ne((function(){e.renderEndedTimeout()}),0,"CXO_OSD_REFRESH OSD Refresh renderEnded Timer",this.logManager,d.QA),clsTimer:new Ne((function(){e.checkCLSValue()}),0,"Check CLS Value Timer")};this.previousClsValue=0;this.clsValue=0;this._gdprApplies=0;this.destroyFunction=function(){};this.removeProhibitedInsertTypes=function(){};this.bidCount=0;this.rebidCount=0;this.impressionCount=0;this.allowedUnsuccessfulBids=1e3;this.currentDimensions={height:0,width:0,previousElementWidth:0,previousHeight:0,previousWidth:0,x:0,y:0,top:0,right:0,bottom:0,left:0,transform:["100","100"],winHeight:0,winWidth:0,scale:1,elementScale:1,isFloating:false,isFullscreen:false,insertPosition:"",elementDimensionsStable:true};this.allowedBannerSizes={squeezeback:[[320,50],[468,60],[728,90],[970,90]],wing:[[300,250],[336,280],[300,600],[300,1080]],wingTall:[[300,250],[300,600],[160,600]],flap:[[320,50],[468,60],[728,90],[970,90]],overlayFullwidth:[[320,50],[468,60],[728,90],[970,90]],overlayCorner:[[234,60],[320,50],[468,60],[728,90],[970,90]]};this.allowedOnstreamDirectDesktopSizes={squeezeback:[[320,50],[468,60],[728,90],[970,90]],wing:[[300,250],[336,280],[300,600],[300,1080]],wingTall:[[300,250],[300,600],[160,600]],flap:[[320,50],[468,60],[728,90],[970,90]],overlayFullwidth:[[320,50],[468,60],[728,90],[970,90]],overlayCorner:[[234,60],[320,50],[468,60],[728,90],[970,90]]};this.allowedOnstreamDirectMobileSizes={squeezeback:[[320,50],[468,60],[728,90],[970,90]],wing:[[300,250],[336,280],[300,600],[300,1080]],wingTall:[[300,250],[300,600],[160,600]],flap:[[320,50],[468,60],[728,90],[970,90]],overlayFullwidth:[[320,50],[468,60],[728,90],[970,90]],overlayCorner:[[234,60],[320,50],[468,60],[728,90],[970,90]]};this.allowedADXBannerSizes={squeezeback:[[88,31],[292,30],[300,50],[320,50],[468,60],[728,90],[970,90],[1024,90]],wing:[[120,60],[200,200],[300,250],[336,280],[480,320],[580,400],[768,1024]],wingTall:[[200,200],[300,250],[250,250],[320,400],[240,400],[320,480],[200,446],[300,600],[160,600],[120,600],[768,1024]],flap:[[88,31],[292,30],[300,50],[320,50],[468,60],[728,90],[970,90],[1024,90]],overlayFullwidth:[[88,31],[292,30],[300,50],[320,50],[468,60],[728,90],[970,90],[1024,90]],overlayCorner:[[88,31],[292,30],[300,50],[320,50],[468,60],[728,90],[970,90],[1024,90]]};this.groupId=i;this.logManager=new Ce;this.logManager.componentSource=this.componentName=t;this.logManager.debugLogGroupId=this.groupId;var n=parseInt(this.logManager.getDebugParamValue(O.ALLOWED_EVENTS_PER_MINUTE))>0?parseInt(this.logManager.getDebugParamValue(O.ALLOWED_EVENTS_PER_MINUTE)):150;this.analyticsEventDispatcher=new ke(this.logManager,this.shutdownComponent.bind(this,"Event frequency too high."),n);if(parseInt(this.logManager.getDebugParamValue(O.ALLOWED_FAILED_BIDS))>0){var s=parseInt(this.logManager.getDebugParamValue(O.ALLOWED_FAILED_BIDS));this.debugLog("Setting OSD failed bid limit to ".concat(s," using URL parameter ").concat(O.ALLOWED_FAILED_BIDS),[d.QA,d.CXO]);this.allowedUnsuccessfulBids=s}var r=this.logManager.getDebugParamValue(O.CX_LOG_MODE);if(r!==null){this.logManager.logMode=r;if(this.logManager.logMode.includes("most")){this.logManager.logMode+="qa-info-boot-insert-error-boot-important"}}if(this.logManager.logMode===d.ALL){this.debugLog("Logging type ALL - Verbose logging mode ON",d.QA)}var o=Object.values(d);for(var a in o){if(this.logManager.logMode.includes(d.QA)||this.logManager.logMode.includes(d.CXO)){this.debugLog("CX ".concat(o[a]," logs on"),o[a])}}Oe(this.logManager)}i.prototype.initializeRequiredData=function(i){this.componentElement=i.componentElement;this.getActiveElement=i.activeElement;this.containerElement=i.containerElement;this.getActiveResourceData=i.activeResourceData;this.getPlayerMode=i.playerMode;this.destroyFunction=i.destroyFunction;this.removeProhibitedInsertTypes=i.removeProhibitedInsertTypes;this.currentInserts=i.currentInserts;this.analyticsSessionIdentifier=this.generateUniqueId;this.analyticsEventDispatcher.assignEventsSessionId(this.analyticsSessionId);this.analyticsEventDispatcher.assignEventsGroupId(this.groupId);this.rebidCount=0;try{this.createPerformanceObserver()}catch(i){this.debugLog("Error creating PerformanceObserver",d.IMPORTANT)}};i.prototype.shutdownComponent=function(i){this.destroyFunction();this.analyticsEventDispatcher.sendOverlayEvent(F.OVERLAY_FORCED_SHUTDOWN,M.PLATFORM,this.currentWindowLocation.href,Boolean(this.foundUID!=="NOT_FOUND"),this.getPlayerMode(),this.elapsedOverlayTime,this.activeOverlayTime,this.containerViewabilityValue,{reason:i})};i.prototype.addSync=function(i){var t=this;var e="cxsyncadded-".concat(i);if(typeof window["".concat(e)]==="undefined"||window["".concat(e)]===null||!window["".concat(e)]){window["".concat(e)]=true;var n;var s=function(){if(!Ae(r.parentElement)){r.parentElement.removeChild(r);t.debugLog("addSync: removing sync '".concat(i,"' iframe from page."),[d.QA,d.CXO])}};window.addEventListener("message",(function(i){if(!Ae(i)&&!Ae(i.data)&&typeof i.data==="string"&&i.data.indexOf("akuid:")>-1){var e=i.data.split(":")[1];t._foundUID=e;document.cookie="akuid="+e+"; SameSite=None; Secure";t.debugLog("utils addSync: akuid received -- set akuid = "+e,[d.CXO,d.QA]);clearTimeout(n);s()}}));var r=document.createElement("iframe");var o=encodeURIComponent("".concat(xe,"/sync?akuid=").concat(window.location.origin,"|{UID}"));r.setAttribute("src","//sync.adkernel.com/user-sync?zone=".concat(i,"&r=").concat(o));r.setAttribute("style","display:none");r.setAttribute("width","0");r.setAttribute("height","0");r.setAttribute("frameborder","0");this.containerElement.appendChild(r);n=setTimeout(s,1e4);this.debugLog("addSync: cx-sync added to container. window['".concat(e,"']=true"),[d.QA,d.CXO])}else{this.debugLog("addSync: cx-sync '".concat(e,"' already attached to page. Will not re-initialize."),[d.QA,d.CXO])}};i.prototype.getGPPData=function(i){if(i===void 0){i=false}var t=this.availableTopWindow;if(t.hasOwnProperty("__gpp")){var e=t["__gpp"];try{var n=e("getGPPData"),s=n.applicableSections,r=n.gppString;this._gppString=r;this._gppSids=s;this.debugLog("Collected GPPData: gppString=".concat(this._gppString,", gppSids=").concat(this._gppSids),[d.QA])}catch(i){this.debugLog(["__gpp is not properly configured"],[d.QA])}}else{if(!i){this.debugLog(["__gpp is not found"],[d.QA])}else{this.debugLog(["__gpp is not found during bid request"],[d.CXO])}}};i.prototype.getTCData=function(i){var t=this;if(i===void 0){i=false}var e;var n=this.availableTopWindow;if(n.hasOwnProperty("__tcfapi")){var s=(e=n["__tcfapi"])!==null&&e!==void 0?e:null;if(s!==null){s("ping",2,(function(i){t.debugLog(["pingData:",i],[d.QA]);if(i.gdprApplies){t._gdprApplies=1;s("getTCData",2,(function(i){t._tcString=i.tcString}));t.debugLog("Collected TCString: ".concat(t._tcString),[d.QA])}else{t.debugLog(["GDPR does not apply"],[d.QA])}}))}}else{if(!i){this.debugLog(["__tcfapi is not found"],[d.QA])}else{this.debugLog(["__tcfapi is not found during bid request"],[d.CXO])}}};i.prototype.getUSPData=function(i){var t=this;if(i===void 0){i=false}var e,n;var s=this.availableTopWindow;if(s.hasOwnProperty("__uspapi")){var r=(e=s["__uspapi"])!==null&&e!==void 0?e:null;if(r!==null){r("getUSPData",1,(function(i){t._uspString=i===null||i===void 0?void 0:i.uspString}));this.debugLog("Collected uspString: ".concat(this._uspString),[d.QA]);(n=this._uspString)!==null&&n!==void 0?n:this._uspString=null}}else{if(!i){this.debugLog(["__uspapi is not found"],[d.QA])}else{this.debugLog(["__uspapi is not found during bid request"],[d.CXO])}}};i.prototype.registerIdentityHub=function(){var i=this;var t=window.location.href;var e="//ads.pubmatic.com/AdServer/js/pwt/161089/5500";var n="";if(t.indexOf("pwtv=")>0){var s=/pwtv=(.*?)(&|$)/g;var r=s.exec(t);if(r.length>=2&&r[1].length>0){n="/"+r[1]}}var o=document.createElement("script");o.async=true;o.type="text/javascript";o.src=e+n+"/pwt.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a);var h=function(){var t,e;if(typeof owpbjs!=="undefined"&&owpbjs!==null){i._eidsIdentityHub=(e=(t=owpbjs===null||owpbjs===void 0?void 0:owpbjs.getUserIdsAsEids)===null||t===void 0?void 0:t.call(owpbjs))!==null&&e!==void 0?e:null;i.debugLog(["Identity Hub UIDs received:",i._eidsIdentityHub],[d.QA,d.CXO])}else{i.debugLog("Cannot find Identity Hub Object 'owpbjs'. Will try again.",[d.QA,d.CXO]);if(i.getCXOActive){setTimeout(h,1e3)}}};h()};i.prototype.registerIntentIQ=function(){var i=this;var t,e;var n=localStorage.getItem("cxIntentIQ_1401077057");var s=!Ae(n)?(t=JSON.parse(n).retrievalTime)!==null&&t!==void 0?t:0:0;var r=(new Date).getTime()-s;var o=Math.floor(r/1e3);var a=Math.floor(o/60);var h=Math.floor(a/60);o=o%60;a=a%60;if(r>8*60*60*1e3){var l=h>1e3?"Intent IQ information has not been stored locally on this machine.":"Intent IQ information retrieved ".concat(h," hours, ").concat(a," minutes, and ").concat(o," seconds ago. Data is expired.");this.debugLog("".concat(l," Intent IQ information will be retrieved."),[d.QA,d.CXO]);if(document.querySelector("script[src*='IIQUniversalID.js']")===null){this.debugLog("Intent IQ script not found. Adding Intent IQ script to page.",[d.CXO]);var u="https://tags.qortex.ai"+"/assets/global-js/IIQUniversalID.js";var f=document.createElement("script");f.async=true;f.type="text/javascript";f.src=u;document.head.appendChild(f)}var c=function(){if(typeof IntentIqObject!=="undefined"&&IntentIqObject!==null){var t=new IntentIqObject({partner:1401077057,refreshInMillis:432e5,timeoutInMillis:5e3,isAsyncServerRequest:true,callback:function(t){i._eidsintentIQ=t===null||t===void 0?void 0:t.eids;i.debugLog(["Intent IQ callback method received. Will put in local storage: ",t],[d.QA,d.CXO]);i.storeIntentIQData(t)},enhanceRequests:true,sourceMetaData:"my_meta_data",mode:"Both",partnerClientId:i.groupId,partnerClientIdType:3});t===null||t===void 0?void 0:t.getIntentIqData()}else{i.debugLog("Cannot find IntentIqObject. Will try again.",[d.QA,d.CXO]);setTimeout(c,1e3)}};c()}else{this._eidsintentIQ=(e=JSON.parse(n))===null||e===void 0?void 0:e.eids;this.debugLog(["Intent IQ information found in local storage with an age of ".concat(h," hours, ").concat(a," minutes, and ").concat(o," seconds."),JSON.parse(n)],[d.CXO,d.QA])}};i.prototype.storeIntentIQData=function(i){i.retrievalTime=(new Date).getTime();localStorage.setItem("cxIntentIQ_1401077057",JSON.stringify(i))};Object.defineProperty(i.prototype,"foundUID",{get:function(){var i;(i=this._foundUID)!==null&&i!==void 0?i:this._foundUID="NOT_FOUND";if(this._foundUID==="NOT_FOUND"){var t="akuid=";var e=decodeURIComponent(document.cookie);var n=e.split(";");for(var s=0;s<n.length;s++){var r=n[s];while(r.charAt(0)==" "){r=r.substring(1)}if(r.indexOf(t)==0){this._foundUID=r.substring(t.length,r.length)}}this.debugLog("Attempting to find UID. Current identified UID: ".concat(this._foundUID,"."),[d.CXO])}return this._foundUID},enumerable:false,configurable:true});i.prototype.createPerformanceObserver=function(){var i=this;var t=false;var e=[];var n=0;new PerformanceObserver((function(s){for(var r=0,o=s.getEntries();r<o.length;r++){var a=o[r];var h=a;if(!h.hadRecentInput){var l=e[0];var u=e[e.length-1];if(n&&h.startTime-u.startTime<1e3&&h.startTime-l.startTime<5e3){n+=h.value;e.push(h)}else{n=h.value;e=[h]}if(n>i.clsValue){i.clsValue=n;if(t){i.checkCLSValue()}}}}if(!t){var d=+i.clsValue.toFixed(3);if(d>0){i.analyticsEventDispatcher.sendOverlayEvent(F.CLS_INIT,M.PLATFORM,i.currentWindowLocation.href,Boolean(i.foundUID!=="NOT_FOUND"),i.getPlayerMode(),i.elapsedOverlayTime,i.activeOverlayTime,i.containerViewabilityValue,{clsValue:d});i.previousClsValue=i.clsValue;t=true;i.timers.clsTimer.reset(1e3)}}})).observe({type:"layout-shift",buffered:true})};i.prototype.cancelAllTimers=function(){for(var i in this.timers){this.debugLog("Canceling timer '".concat(this.timers[i].name,"'"),[d.QA]);this.timers[i].cancel()}};i.prototype.checkCLSValue=function(){var i=+(this.clsValue-this.previousClsValue).toFixed(2);var t=+this.clsValue.toFixed(3);if(this.timers.clsTimer.timeRemainingInSeconds==0&&i>0){this.debugLog("CLS value has been increased by: "+i+"\nTotal CLS after increase: "+t,[d.QA,d.CXO]);this.analyticsEventDispatcher.sendOverlayEvent(F.CLS_SHIFT_OBSERVED,M.PLATFORM,this.currentWindowLocation.href,Boolean(this.foundUID!=="NOT_FOUND"),this.getPlayerMode(),this.elapsedOverlayTime,this.activeOverlayTime,this.containerViewabilityValue,{clsValue:t});this.previousClsValue=this.clsValue;this.timers.clsTimer.reset(1e3)}};i.prototype.initializeIntersectionObserver=function(){var i=this;var t=[];for(var e=0;e<=100;e++){t.push(e/100)}var n=new IntersectionObserver((,{threshold:t});n.observe(this.containerElement)};i.prototype.debugLog=function(i,t){if(t===void 0){t=[d.CXO]}this.logManager.evaluateDebugLog(i,t)};Object.defineProperty(i.prototype,"logManager",{get:function(){return this._logManager},set:function(i){this._logManager=i},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"analyticsEventDispatcher",{get:function(){return this._analyticsEventDispatcher},set:function(i){this._analyticsEventDispatcher=i},enumerable:false,configurable:true});i.prototype.findOnpagePBJS=function(){var i,t,e,n,s;var r=!!((i=this.groupConfig)===null||i===void 0?void 0:i.prebidObjectIdentifier)?this.groupConfig.prebidObjectIdentifier:null;if(r!==null){if(!!window[this.groupConfig.prebidObjectIdentifier]){this.debugLog("findOnpagePBJS Prebid object name ".concat(r," defined in zone config and found on page."),[d.CXO,d.QA])}else{this.debugLog("findOnpagePBJS Prebid object name ".concat(r," defined in zone config but is not found on page. Cannot use prebid object ").concat(r),[d.CXO,d.QA]);r=null}}r!==null&&r!==void 0?r:r=((t=window["pbjs"])===null||t===void 0?void 0:t.adUnits)&&((e=window["_pbjsGlobals"])===null||e===void 0?void 0:e.includes("pbjs"))?"pbjs":(n=window["_pbjsGlobals"])===null||n===void 0?void 0:n.find(();r!==null&&r!==void 0?r:r=typeof((s=window["owpbjs"])===null||s===void 0?void 0:s.adServers)!=="undefined"?"owpbjs":null;if(window[r]!=null){this.debugLog("findOnpagePBJS Compatible prebid object found on page with identifier '".concat(r,"'"),[d.CXO,d.QA,d.TAM])}return window[r]};i.prototype.normalizeOSDConfig=function(i){var t,e,n,s,r,o,a,h,l,u,f,c,v;if(this.logManager.getDebugParamValue(O.REMOVE_OSD)==="true"){this.debugLog("Forcing `null` OSD Config per request by URL Parameter",[d.QA,d.CXO]);return null}else{this.debugLog(["Normalizing slot refresh params."],[d.CXO,d.QA]);var p=i.slotRefreshParams;if(((t=p.gptAdUnitId)===null||t===void 0?void 0:t.length)>0){p.allowGAMRefresh=true;var m=p.gtagObject;p.gtagObject=(e=typeof m==="string"?window[m]:m)!==null&&e!==void 0?e:window["googletag"];if(window.self!==window.top){var g=this.availableTopWindow;if(typeof((n=p.gtagObject)===null||n===void 0?void 0:n.pubads)==="undefined"&&typeof g["googletag"]!=="undefined"&&g["googletag"]!==null){p.gtagObject=g["googletag"];this.debugLog(["Google tag object loaded from top window.",p.gtagObject],[d.QA,d.CXO])}}if(!p.gtagObject){this.debugLog(["Googletag object not found on page while adUnitId is provided. Cannot initialize On-Stream Direct."],[d.CXO,d.QA])}}else{this.debugLog("Ad Unit Id empty or missing - Removing gtag object",[d.CXO,d.QA]);p.gtagObject=null;p.allowGAMRefresh=false}var b=p.pbjsObject;p.pbjsObject=(s=typeof b==="string"?window[b]:b)!==null&&s!==void 0?s:this.findOnpagePBJS();if(!p.pbjsObject){this.debugLog(["PBJS object not found on page. Will remove bidderArray definition."],[d.CXO,d.QA]);p.bidderArray=null}if(((r=p.bidderArray)===null||r===void 0?void 0:r.length)===0){this.debugLog("Bidder array empty or missing - Removing prebid object",[d.CXO,d.QA]);p.pbjsObject=null;p.bidderArray=null}if(!this.logManager.getDebugParamValue(O.REMOVE_WATERFALL_BIDDING)){var y=(o=this.logManager.getDebugParamValue(O.OVERRIDE_OSD_BID_ORDER))===null||o===void 0?void 0:o.split("|");if((y===null||y===void 0?void 0:y.length)>0){p.osdBidOrder=y.map(();this.debugLog("OSD_WATERFALL_BIDDING osdBidOrder overriden by debug param ".concat(p.osdBidOrder),[d.QA,d.CXO,d.TAM])}else if(((h=(a=this.groupConfig)===null||a===void 0?void 0:a.osdBidOrder)===null||h===void 0?void 0:h.length)>0){p.osdBidOrder=this.groupConfig.osdBidOrder.map((function(i){return L[i]}));this.debugLog("OSD_WATERFALL_BIDDING waterfall bidding is active with bidorder ".concat(p.osdBidOrder),[d.QA,d.CXO,d.TAM])}else{this.debugLog("OSD_WATERFALL_BIDDING group config bid order array has no valid options ".concat(p.osdBidOrder),[d.QA,d.CXO,d.TAM])}}else{this.debugLog("OSD_WATERFALL_BIDDING waterfall has been removed due to url param override",[d.QA,d.CXO,d.TAM])}i.slotRefreshParams=p;(l=i.availableAdSizes)!==null&&l!==void 0?l:i.availableAdSizes=null;i.isPrebidAvailable=!Ae(p.pbjsObject)&&!Ae(p.bidderArray);this.debugLog("OSD configuration loaded:",[d.QA,d.CXO,d.TAM]);this.debugLog("OSD GPT Ad Slot Path = '".concat(i.slotRefreshParams.gptAdUnitId,"'"),[d.QA,d.CXO,d.TAM]);this.debugLog(["OSD available ad sizes:",((u=i===null||i===void 0?void 0:i.availableAdSizes)===null||u===void 0?void 0:u.length)>0?i.availableAdSizes:"ALL"],[d.QA,d.CXO,d.TAM]);this.debugLog(["OSD -- is Prebid script (pbjs) available? ".concat(!(typeof((f=i===null||i===void 0?void 0:i.slotRefreshParams)===null||f===void 0?void 0:f.pbjsObject)==="undefined"||((c=i===null||i===void 0?void 0:i.slotRefreshParams)===null||c===void 0?void 0:c.pbjsObject)===null)?"YES":"NO")],[d.QA,d.CXO,d.TAM]);this.debugLog(["OSD bidderArray:",((v=i.slotRefreshParams.bidderArray)===null||v===void 0?void 0:v.length)>0&&Object.keys(i.slotRefreshParams.bidderArray[0]).length>0?i.slotRefreshParams.bidderArray:"NONE"],[d.QA,d.CXO,d.TAM]);this.debugLog(["OSD allowGAMRefresh: ",i.slotRefreshParams.allowGAMRefresh],[d.QA,d.CXO,d.TAM]);return i}};i.prototype.initializePrebidEventHandlers=function(i,t,e,n){var s=this;i.onEvent("bidRequested",(function(i){var r,o,a,h;s.debugLog(["CXO_OSD_REFRESH pbjs bid requested from bidder ".concat(i===null||i===void 0?void 0:i.bidderCode),i,i===null||i===void 0?void 0:i.bids],[d.CXO]);if(((r=i===null||i===void 0?void 0:i.bids)===null||r===void 0?void 0:r.length)>0){if(((o=i.bids[0])===null||o===void 0?void 0:o.adUnitCode)===t){s.osdProperties.cxoBidInfo["pbjs_requested_"+(i===null||i===void 0?void 0:i.bidderCode)]=i}}if(!e.sent){var l={overlayTime:s.elapsedOverlayTime/1e3,activeOverlayTime:s.activeOverlayTime/1e3,totalBidsCount:s.bidCount,adOpportunityBidCount:s.rebidCount+1,adOpportunityId:s.adOpportunityId,bidRequestId:s.bidRequestId,bannerSizeRequested:"".concat(n[0][0],"x").concat(n[0][1]),componentDimensions:{width:s.currentDimensions.width,height:s.currentDimensions.height},containerViewability:s.containerViewabilityValue};if(s.componentName===C.OVERLAY&&!Ae((a=s.getActiveElement())===null||a===void 0?void 0:a.currentTime)){l.videoTime=!Ae((h=s.getActiveElement())===null||h===void 0?void 0:h.currentTime)?s.getActiveElement().currentTime:0}s.analyticsEventDispatcher.sendPrebidEvent(F.PREBID_REQUEST,M.OSD,s.currentWindowLocation.href,Boolean(s.foundUID!=="NOT_FOUND"),s.getPlayerMode(),l);e.sent=true}}));i.onEvent("noBid",(function(i){if((i===null||i===void 0?void 0:i.adUnitCode)===t){s.osdProperties.cxoBidInfo["pbjs_noBid_"+(i===null||i===void 0?void 0:i.bidder)]=i;s.debugLog(["CXO_OSD_REFRESH pbjs noBid received from bidder ".concat(i===null||i===void 0?void 0:i.bidder),i],[d.CXO])}}));i.onEvent("bidResponse",(function(i){if((i===null||i===void 0?void 0:i.adUnitCode)===t){s.osdProperties.cxoBidInfo["pbjs_response_"+(i===null||i===void 0?void 0:i.bidderCode)]=i;s.debugLog(["CXO_OSD_REFRESH pbjs bid response received from bidder ".concat(i===null||i===void 0?void 0:i.bidderCode),i],[d.CXO])}}));i.onEvent("bidWon",(function(i){var e,r,o;if((i===null||i===void 0?void 0:i.adUnitCode)===t){s.osdProperties.cxoBidInfo["pbjs_won_"+(i===null||i===void 0?void 0:i.bidderCode)]=i;s.osdProperties.cxoBidInfo["pbjs_won"]=i;s.debugLog(["CXO_OSD_REFRESH pbjs bid won received from bidder ".concat(i===null||i===void 0?void 0:i.bidderCode," at $").concat(i===null||i===void 0?void 0:i.cpm),i],[d.CXO,d.QA]);var a={bidder:(i===null||i===void 0?void 0:i.bidder)||(i===null||i===void 0?void 0:i.bidderCode),cpm:i.cpm,size:i.size,advertiser:(e=i===null||i===void 0?void 0:i.meta)===null||e===void 0?void 0:e.advertiserDomains};var h={overlayTime:s.elapsedOverlayTime/1e3,activeOverlayTime:s.activeOverlayTime/1e3,totalBidsCount:s.bidCount,adOpportunityBidCount:s.rebidCount+1,adOpportunityId:s.adOpportunityId,bidRequestId:s.bidRequestId,bannerSizeRequested:"".concat(n[0][0],"x").concat(n[0][1]),componentDimensions:{width:s.currentDimensions.width,height:s.currentDimensions.height},containerViewability:s.containerViewabilityValue,debug:a};if(s.componentName===C.OVERLAY&&!Ae((r=s.getActiveElement())===null||r===void 0?void 0:r.currentTime)){h.videoTime=!Ae((o=s.getActiveElement())===null||o===void 0?void 0:o.currentTime)?s.getActiveElement().currentTime:0}s.analyticsEventDispatcher.sendPrebidEvent(F.PREBID_WON,M.OSD,s.currentWindowLocation.href,Boolean(s.foundUID!=="NOT_FOUND"),s.getPlayerMode(),h)}}));this.debugLog(["CXO_OSD_REFRESH cxBidder object initialized and pbjs bidResponse and bidWon events added",this.osdProperties],[d.CXO,d.QA])};i.prototype.parseBidsBack=function(i,t,e,n,s){var r=this;var o,a,h;this.debugLog(["parseBidsBack: ",i,t,e,n,s],d.IMPORTANT);var l={overlayTime:this.elapsedOverlayTime/1e3,activeOverlayTime:this.activeOverlayTime/1e3,totalBidsCount:this.bidCount,adOpportunityBidCount:this.rebidCount+1,adOpportunityId:this.adOpportunityId,bidRequestId:this.bidRequestId,bannerSizeRequested:"".concat(e[0][0],"x").concat(e[0][1]),componentDimensions:{width:this.currentDimensions.width,height:this.currentDimensions.height},containerViewability:this.containerViewabilityValue};if(this.componentName===C.OVERLAY&&!Ae((o=this.getActiveElement())===null||o===void 0?void 0:o.currentTime)){l.videoTime=!Ae((a=this.getActiveElement())===null||a===void 0?void 0:a.currentTime)?this.getActiveElement().currentTime:0}this.analyticsEventDispatcher.sendPrebidEvent(F.PREBID_RESPONSE,M.OSD,this.currentWindowLocation.href,Boolean(this.foundUID!=="NOT_FOUND"),this.getPlayerMode(),l);if(!!((h=i[t])===null||h===void 0?void 0:h.bids)){this.debugLog(["parseBidsBack: filtering bids"],d.IMPORTANT);i[t].bids.forEach((function(i){var t;var o=e.concat([[1,1]]);if(!o.find((function(t){return t.toString()===[i.width,i.height].toString()}))){(t=s.rejectedBids)!==null&&t!==void 0?t:s.rejectedBids={};Object.keys(s).forEach((function(t){if(t.includes("pbjs_response")&&s[t].adId===i.adId){s.rejectedBids[t]=s[t];delete s[t]}}));r.debugLog(["parseBidsBack: mark bid as used: "+i.adId],d.IMPORTANT);n.markWinningBidAsUsed({adId:i.adId})}}))}};i.prototype.initiateNoGAMPrebidAuction=function(i,t,e,n,s){var r=this;var o,a,h,l,u;var f=i.slotRefreshParams,c=f.bidderArray,v=f.pbjsObject;var p=(o=i.availableAdSizes)!==null&&o!==void 0?o:[[300,250],[336,280],[300,600],[300,1080],[234,60],[320,50],[468,60],[728,90],[970,90]];this.debugLog(["Initiating prebid auction to be handled without GAM","availablesizes=",p,"\nsizes=",t,"\nbidData=",e,"\n"],[d.CXO,d.QA]);var m={sent:false};var g="qx-prebid-slot";if(typeof this.osdProperties==="undefined"||this.osdProperties===null){this.osdProperties={cxoAdSlot:null,cxoBidInfo:null,cxAdUnits:[{code:g,mediaTypes:{banner:{sizes:p}},bids:c}]};this.initializePrebidEventHandlers(v,g,m,t)}var b=this.osdProperties;b.cxoBidInfo=e;var y=(u=(l=(h=(a=b.cxAdUnits[0])===null||a===void 0?void 0:a.mediaTypes)===null||h===void 0?void 0:h.banner)===null||l===void 0?void 0:l.sizes)!==null&&u!==void 0?u:[[t[0],t[1]]];y=y.filter((function(i){return!!t.find((function(t){return t[0]===i[0]&&t[1]===i[1]}))}));b.cxAdUnits[0].mediaTypes.banner.sizes=y;b.cxAdUnits.forEach((function(i){var t,e;if(typeof((t=i===null||i===void 0?void 0:i.mediaTypes)===null||t===void 0?void 0:t.banner)!=="undefined"&&((e=i===null||i===void 0?void 0:i.mediaTypes)===null||e===void 0?void 0:e.banner)!==null){if(typeof(s===null||s===void 0?void 0:s.requestedInsertType)!=="undefined"&&(s===null||s===void 0?void 0:s.requestedInsertType)!==null){var n=s.requestedInsertType;if(n.includes("wing")){i.mediaTypes.banner.pos=E.WING}else if(n.includes("flap")){i.mediaTypes.banner.pos=E.FLAP}else if(n.includes("fullwidth")){i.mediaTypes.banner.pos=E.OVERLAY_FULLWIDTH}else if(n.includes("squeeze")){if(n.includes("custom")){i.mediaTypes.banner.pos=E.CUSTOM_SQUEEZEBACK}else{i.mediaTypes.banner.pos=E.BANNER_SQUEEZEBACK}}else if(n.includes("overlay")){i.mediaTypes.banner.pos=E.OVERLAY_CORNER}}}}));if(!v.adUnits.find((function(i){return i.code===g}))){v.addAdUnits(b.cxAdUnits)}v.requestBids({bidsBackHandler:function(i){r.parseBidsBack(i,g,t,v,e);var o=v.getHighestUnusedBidResponseForAdUnitCode(g);if(o===null||o===void 0?void 0:o.adId){e.pbjs_expected_winner=o;r.debugLog(["Winning prebid response:",o],[d.CXO,d.QA])}n(o,s)},timeout:1e3,adUnits:b.cxAdUnits})};i.prototype.initializeOSDRefresh=function(i,t,e,n,s){var r=this;var o,a;this.debugLog("Creating new OSD refresh function.",[d.CXO,d.QA]);var h=function(){};var l=!Ae(window["optiyield"]);var u=function(i,t){if(t===void 0){t=[d.IMPORTANT]}r.logManager.evaluateDebugLog(i,t)};if(window.self!==window.top){var f=this.availableTopWindow;if(typeof(e===null||e===void 0?void 0:e.pubads)==="undefined"&&typeof f["googletag"]!=="undefined"&&f["googletag"]!==null&&e!==f["googletag"]){this.osdConfig.slotRefreshParams.gtagObject=f["googletag"];e=f["googletag"];this.debugLog(["Google tag object loaded from top window.",e],[d.QA,d.CXO])}}if(typeof n!=="undefined"&&n!==null&&typeof t!=="undefined"&&t!==null){u("CXO_OSD_REFRESH Prebid Object found - Will utilize prebid in the slot refresh.",[d.CXO,d.QA]);var c={sent:false};var v=["qortex","catapultx","adkernel"];var p=(a=(o=this.osdConfig)===null||o===void 0?void 0:o.slotRefreshParams)===null||a===void 0?void 0:a.osdBidOrder;var m=false;var g=0;var b=var y=var w=var O=var T=function(){var i;return(i=p===null||p===void 0?void 0:p[g])!==null&&i!==void 0?i:null};h=function(o,a,h){var f,m,g,I,S,D,R,k;u(["CXO_OSD_REFRESH pbjs refreshFunction triggered","\nnodeId=",o.id,"\nnode=",o,"\nsizes=",a,"\nbidData=",h,"\n",r.osdProperties],[d.CXO,d.QA]);c.sent=false;y(false);w();if(typeof r.osdProperties==="undefined"||r.osdProperties===null){r.osdProperties={cxoAdSlot:null,cxoBidInfo:null,cxAdUnits:[{code:i,mediaTypes:{banner:{sizes:s}},bids:t}]};r.initializePrebidEventHandlers(n,i,c,a);var N=r.osdProperties;var A=function(){var i,t;var e={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(a[0][0],"x").concat(a[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((i=r.getActiveElement())===null||i===void 0?void 0:i.currentTime)){e.videoTime=!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendGAMEvent(F.GAM_REQUEST,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),e)};var B=function(){var i,t;var e={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(a[0][0],"x").concat(a[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((i=r.getActiveElement())===null||i===void 0?void 0:i.currentTime)){e.videoTime=!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendGAMEvent(F.GAM_RESPONSE,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),e)};var x=function(){var i,t;var e={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(a[0][0],"x").concat(a[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((i=r.getActiveElement())===null||i===void 0?void 0:i.currentTime)){e.videoTime=!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendGAMEvent(F.GAM_RESPONSE_EMPTY,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),e)};var U=function(){var i,t;var e={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(a[0][0],"x").concat(a[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((i=r.getActiveElement())===null||i===void 0?void 0:i.currentTime)){e.videoTime=!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendGAMEvent(F.GAM_RENDER_FAIL,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),e)};var z=function(){var i,t;var e={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(a[0][0],"x").concat(a[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((i=r.getActiveElement())===null||i===void 0?void 0:i.currentTime)){e.videoTime=!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendGAMEvent(F.GAM_RENDER_SUCCESS,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),e)};var P=function(){var i,t;var e={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(a[0][0],"x").concat(a[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((i=r.getActiveElement())===null||i===void 0?void 0:i.currentTime)){e.videoTime=!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendGAMEvent(F.GAM_SLOT_LOAD_SUCCESS,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),e)};e.pubads().addEventListener("slotRequested",(function(i){if(i.slot===N.cxoAdSlot){u("CXO_OSD_REFRESH 'slotRequested' cxoAdSlot load requested.",[d.QA,d.CXO]);A();y(true)}}));e.pubads().addEventListener("slotOnload",(function(i){if(i.slot===N.cxoAdSlot){var t=i.slot.getResponseInformation();G.cxoBidInfo.gptSlotOnload=t;window.postMessage({target:"cxo_gpt_prebid",message:"GPT load complete"},window.location.protocol+"//"+window.location.host);u(["CXO_OSD_REFRESH 'slotOnLoad' cxoAdSlot loaded.",JSON.stringify(t)],[d.QA,d.CXO]);P()}}));var V=r.timers.osdRefreshRenderEndedTimer;var j=function(){r.renderEndedTimeout(a[0][0],a[0][1])};var X=function(){r.renderEndedTimeout(a[0][0],a[0][1])};e.pubads().addEventListener("slotResponseReceived",(function(i){if(i.slot===N.cxoAdSlot){var t=i.slot.getResponseInformation();var e=i.slot.getAdUnitPath();var n=i.slot.getAttributeKeys();var s=i.slot.getCategoryExclusions();var r=i.slot.getSlotElementId();var o=i.slot.getTargetingKeys();var a={};o.forEach(();G.cxoBidInfo.gptSlotResponseReceived=t;if(t==null){window.postMessage({target:"cxo_gpt_prebid",message:"GPT load failed"},window.location.protocol+"//"+window.location.host);u(["CXO_OSD_REFRESH 'slotResponseReceived' googletag load failed (no bids).",JSON.stringify(t),e,r,a,n,s],[d.QA,d.CXO]);x();if(!Ae(p)){u(["OSD_WATERFALL_BIDDING attempting rebid on GAM failed response"],[d.QA,d.CXO]);ri()}}else{window.postMessage({target:"cxo_gpt_prebid",message:"GPT response received"},window.location.protocol+"//"+window.location.host);u(["CXO_OSD_REFRESH 'slotResponseReceived' googletag non-null response received.",JSON.stringify(t),e,r,a,n,s],[d.QA,d.CXO]);V.reset(3e3,j);B()}}}));e.pubads().addEventListener("slotRenderEnded",(function(i){u("CXO_OSD_REFRESH 'slotRenderEnded'",[d.CXO]);if(i.slot===N.cxoAdSlot){var t=i.slot.getResponseInformation();G.cxoBidInfo.gptSlotRenderEnded=i;u(["CXO_OSD_REFRESH 'slotRenderEnded' googletag slot render ended.",JSON.stringify(t)],[d.CXO]);if(t==null){window.postMessage({target:"cxo_gpt_prebid",message:"GPT load failed"},window.location.protocol+"//"+window.location.host);u(["CXO_OSD_REFRESH 'slotRenderEnded' googletag slot render failed.",JSON.stringify(t)],[d.QA,d.CXO]);U()}else{u(["CXO_OSD_REFRESH 'slotRenderEnded' googletag slot render successful.",JSON.stringify(t)],[d.QA,d.CXO]);X();z();u(["CXO_OSD_REFRESH refresh triggered? "+b()],d.IMPORTANT);y(true)}}}));e.pubads().addEventListener("slotVisibilityChanged",(function(i){if(i.slot===N.cxoAdSlot){u("CXO_OSD_REFRESH 'slotVisibilityChanged' googletag slot visibility for ".concat(i.slot.getSlotElementId()," changed to ").concat(i.inViewPercentage,"%"),d.CXO)}}));e.pubads().addEventListener("impressionViewable",(function(i){if(i.slot===N.cxoAdSlot){u(["CXO_OSD_REFRESH 'impressionViewable' googletag impression viewable received.",i.slot.getResponseInformation()])}}))}var G=r.osdProperties;G.cxoBidInfo=h;if(G.cxoAdSlot!==null){u((m=(f=G.cxoAdSlot).getSlotElementId)===null||m===void 0?void 0:m.call(f),[d.CXO,d.QA]);if(((I=(g=G.cxoAdSlot).getSlotElementId)===null||I===void 0?void 0:I.call(g))!==o.id){var W=(D=(S=G.cxoAdSlot).getSlotElementId)===null||D===void 0?void 0:D.call(S);var H=e.destroySlots([G.cxoAdSlot]);u(["CXO_OSD_REFRESH Node id ".concat(o.id," does not match current slot elementId ").concat(W,". Destroying existing googletag cxoAdSlot (was destroyed? ").concat(H,")")],[d.CXO,d.QA]);G.cxoAdSlot=null}else{u(["CXO_OSD_REFRESH Node id ".concat(o.id," matches current slot elementId ").concat((k=(R=G.cxoAdSlot).getSlotElementId)===null||k===void 0?void 0:k.call(R),". Refreshing existing googletag cxoAdSlot")],[d.CXO,d.QA]);r.dispatchOverlayEvent({type:_.OVERLAY_RESET_ACTIVE_OSD,uid:r.getActiveResourceData().uniqueId})}}if(G.cxoAdSlot==null){e.cmd.push((function(){G.cxoAdSlot=e.defineSlot(i,a,o.id).addService(e.pubads());e.pubads().enableSingleRequest();e.enableServices();u("CXO_OSD_REFRESH 'googletag.display'",[d.QA,d.CXO,d.IMPORTANT]);e.display(o)}))}u(["CXO_OSD_REFRESH defined googletag cxoAdSlot - ".concat(i,", ").concat(a,", ").concat(o.id)],[d.CXO,d.QA]);G.cxoAdSlot.clearTargeting();var Y=G.cxAdUnits;var J=[];Y.forEach((function(i){var t,e,n,s,r,h,l;J.push({adUnit:i,originalSizes:__spreadArray([],(e=(t=i===null||i===void 0?void 0:i.mediaTypes)===null||t===void 0?void 0:t.banner)===null||e===void 0?void 0:e.sizes,true)});var u=(r=(s=(n=i===null||i===void 0?void 0:i.mediaTypes)===null||n===void 0?void 0:n.banner)===null||s===void 0?void 0:s.sizes)!==null&&r!==void 0?r:[[a[0],a[1]]];u=u.filter((function(i){return!!a.find((function(t){return t[0]===i[0]&&t[1]===i[1]}))}));i.mediaTypes.banner.sizes=u;if(typeof((h=i===null||i===void 0?void 0:i.mediaTypes)===null||h===void 0?void 0:h.banner)!=="undefined"&&((l=i===null||i===void 0?void 0:i.mediaTypes)===null||l===void 0?void 0:l.banner)!==null){if(typeof o.id!=="undefined"&&o.id!==null){var d=o.id;if(d.includes("wing")){i.mediaTypes.banner.pos=E.WING}else if(d.includes("flap")){i.mediaTypes.banner.pos=E.FLAP}else if(d.includes("fullwidth")){i.mediaTypes.banner.pos=E.OVERLAY_FULLWIDTH}else if(d.includes("squeeze")){if(d.includes("custom")){i.mediaTypes.banner.pos=E.CUSTOM_SQUEEZEBACK}else{i.mediaTypes.banner.pos=E.BANNER_SQUEEZEBACK}}else if(d.includes("overlay")){i.mediaTypes.banner.pos=E.OVERLAY_CORNER}}}}));if(l){r.osdProperties.cxAdUnits[0].optiYield={adUnitPath:i,divId:o.id}}if(typeof n.adUnits.find((function(t){return t.code===i}))==="undefined"){if(l){r.debugLog("Setting price floors through OptiYield",d.IMPORTANT);window["optiyield"].cmd.push((function(){G.cxAdUnits=window["optiyield"].setPrebidFloors(G.cxAdUnits)}))}n.addAdUnits(G.cxAdUnits)}var Q=0;var K=2;var Z=2e3;var $=false;var ii=setTimeout((function(){if(!b()){u("CXO_OSD_REFRESH googletag.refresh called by timeout with ".concat(Q," of ").concat(K," responses."),d.IMPORTANT);Q=K;$=true;oi()}}),Z);var ti=function(){var i,t;var e={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(a[0][0],"x").concat(a[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((i=r.getActiveElement())===null||i===void 0?void 0:i.currentTime)){e.videoTime=!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendTAMEvent(F.TAM_REQUEST,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),e)};var ei=function(i){var t,e;var n={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(a[0][0],"x").concat(a[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue,debug:i};if(r.componentName===C.OVERLAY&&!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)){n.videoTime=!Ae((e=r.getActiveElement())===null||e===void 0?void 0:e.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendTAMEvent(F.TAM_RESPONSE,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),n)};var ni=window["apstag"];if(typeof(ni===null||ni===void 0?void 0:ni.fetchBids)!=="undefined"){if(!r.groupConfig.zoneModifications.includes(q.DISABLE_TAM)){try{u("CXO_OSD_REFRESH TAM apstag bids requested.",[d.QA,d.CXO]);ti();var si=[{slotID:o.id,slotName:i,sizes:a}];if(l){si[0].optiYield={adUnitPath:i,divId:o.id};window["optiyield"].cmd.push((function(){si=window["optiyield"].setAmazonFloors(si)}))}ni.fetchBids({slots:si,timeout:1e3},(function(i){Q++;u(["CXO_OSD_REFRESH apstag bids response ".concat(Q,"."),i],[d.QA,d.CXO]);var t=false;i.forEach((function(i){if(!!(i===null||i===void 0?void 0:i.amzniid)){u("CXO_OSD_REFRESH TAM bid success (".concat(i===null||i===void 0?void 0:i.size,"): amziid=").concat(i.amzniid),[d.QA,d.CXO]);t=true}}));if(t){ei(i)}else{u("CXO_OSD_REFRESH TAM bid failed - no results.",[d.QA,d.CXO])}e.cmd.push(()}))}catch(i){u("CXO_OSD_REFRESH TAM error on bid request.",[d.QA,d.CXO]);K--}}else{u("CXO_OSD_REFRESH TAM disabled with ZoneModification 'disable-tam'. Will not make TAM bid request.",[d.QA,d.CXO]);K--}}else{K--}var ri=function(t){if(t===void 0){t=false}var e=r.osdProperties.cxAdUnits[0],s=e.code,o=e.mediaTypes,l=e.bids;var f=new Object({code:s,mediaTypes:o});var c=T();if(Ae(c)&&(p===null||p===void 0?void 0:p.length)>0){u(["OSD_WATERFALL_BIDDING bid order has reached its end and new bids will not be requested"],[d.QA,d.CXO])}else{switch(c){case L.QORTEX_EXCLUDED:f["bids"]=l.filter(();break;case L.QORTEX_ONLY:f["bids"]=l.filter(();break;case L.ALL:f["bids"]=l;break;default:f["bids"]=l;break}if(Ae(c)){u(["CXO_OSD_REFRESH pbjs requested bids",l],[d.QA,d.CXO])}else{u(["OSD_WATERFALL_BIDDING pbjs bids requested with type ".concat(c),f["bids"]],[d.QA,d.CXO]);O()}n.requestBids({bidsBackHandler:function(e){var s,o,l;var f=false;if(!!((s=e[i])===null||s===void 0?void 0:s.bids)){e[i].bids.forEach((function(i){var t;var e=a.concat([[1,1]]);if(!e.find((function(t){return t.toString()===[i.width,i.height].toString()}))){(t=h.rejectedBids)!==null&&t!==void 0?t:h.rejectedBids={};Object.keys(h).forEach((function(t){if(t.includes("pbjs_response")&&h[t].adId===i.adId){h.rejectedBids[t]=h[t];delete h[t]}}));n.markWinningBidAsUsed({adId:i.adId})}else if(!f){f=true}}))}var v={osdBidType:c,overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(a[0][0],"x").concat(a[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((o=r.getActiveElement())===null||o===void 0?void 0:o.currentTime)){v.videoTime=!Ae((l=r.getActiveElement())===null||l===void 0?void 0:l.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendPrebidEvent(F.PREBID_RESPONSE,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),v);Object.keys(h).forEach((function(i){var t,e,n;if(i.includes("pbjs_response")){h.pbjs_expected_winner=((t=h===null||h===void 0?void 0:h.pbjs_expected_winner)===null||t===void 0?void 0:t.cpm)>((e=h[i])===null||e===void 0?void 0:e.cpm)&&typeof((n=h[i])===null||n===void 0?void 0:n.cpm)!=="undefined"?h.pbjs_expected_winner:h[i]}}));if(!Ae(T())&&!f&&!$){u(["OSD_WATERFALL_BIDDING rebidding due to no valid bids back",e],[d.QA,d.CXO]);ri(t)}else{if(t&&Q!=K)Q++;if(!r.osdConfig.slotRefreshParams.osdBidOrder){u(["CXO_OSD_REFRESH prebid bids response ".concat(Q,"."),e])}else{u(["OSD_WATERFALL_BIDDING prebid bids response, waterfall bid of type ".concat(c,"."),e])}n.setTargetingForGPTAsync([i],(function(t){return function(){u(["CXO_OSD_REFRESH - setting targeting on "+i,t.getAdUnitPath(),Boolean(i===t.getAdUnitPath())],d.CXO);return i===t.getAdUnitPath()}}));if(r.groupId==="17fW31pTika7HMf64JpPqQ"){u("CXO_OSD_REFRESH setTargeting for BJPenn - 'pubg_hb_src' = 'pubgenius'");G.cxoAdSlot.setTargeting("pubg_hb_src","pubgenius")}oi()}},timeout:1e3,adUnits:[f]})}};ri(true);var oi=function(){u("CXO_OSD_REFRESH googleTagRefresh called with ".concat(Q," of ").concat(K," responses."),d.CXO);if(!b()){if(Q===K){u("CXO_OSD_REFRESH googleTagRefresh ".concat(Q," of ").concat(K," responses received. Refreshing googletag."),[d.QA,d.CXO]);y(true);if(l){window["optiyield"].cmd.push(()}e.cmd.push((function(){u("CXO_OSD_REFRESH 'googletag.pubads().refresh'",[d.QA,d.CXO,d.IMPORTANT]);e.pubads().refresh([G.cxoAdSlot])}));clearTimeout(ii)}}else if(!Ae(p)&&!$){e.cmd.push((function(){u("OSD_WATERFALL_BIDDING refreshing new waterfall bids back",[d.QA,d.CXO,d.IMPORTANT]);e.pubads().refresh([G.cxoAdSlot])}))}else{u("CXO_OSD_REFRESH googleTagRefresh refresh triggered already.",[d.QA,d.CXO])}};setTimeout((function(){J.forEach(()}),1200)}}else{if(typeof n==="undefined"||n===null){this.debugLog("Prebid Object NOT found - Will only use googletag in the slot refresh.",[d.CXO,d.QA])}else{this.debugLog("Prebid bidder array not defined - Will only use googletag in the slot refresh.",[d.CXO,d.QA])}h=function(n,o,a){var h,l,f,c,v,p;u(["CXO_OSD_REFRESH refreshFunction triggered","\nnode=",n,"\nsizes=",o,"\nbidData=",a,"\n",r.osdProperties],[d.CXO,d.QA]);if(typeof r.osdProperties==="undefined"||r.osdProperties===null){r.osdProperties={cxoAdSlot:null,cxoBidInfo:null,cxAdUnits:[{code:i,mediaTypes:{banner:{sizes:s}},bids:t}]};var m=r.osdProperties;var g=r.timers.osdRefreshRenderEndedTimer;var b=function(){r.renderEndedTimeout(o[0][0],o[0][1])};var y=function(){r.renderEndedTimeout(o[0][0],o[0][1])};var w=function(){var i,t;var e={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(o[0][0],"x").concat(o[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((i=r.getActiveElement())===null||i===void 0?void 0:i.currentTime)){e.videoTime=!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendGAMEvent(F.GAM_REQUEST,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),e)};var O=function(){var i,t;var e={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(o[0][0],"x").concat(o[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((i=r.getActiveElement())===null||i===void 0?void 0:i.currentTime)){e.videoTime=!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendGAMEvent(F.GAM_RESPONSE,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),e)};var T=function(){var i,t;var e={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(o[0][0],"x").concat(o[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((i=r.getActiveElement())===null||i===void 0?void 0:i.currentTime)){e.videoTime=!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendGAMEvent(F.GAM_RESPONSE_EMPTY,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),e)};var I=function(){var i,t;var e={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(o[0][0],"x").concat(o[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((i=r.getActiveElement())===null||i===void 0?void 0:i.currentTime)){e.videoTime=!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendGAMEvent(F.GAM_RENDER_FAIL,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),e)};var S=function(){var i,t;var e={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(o[0][0],"x").concat(o[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((i=r.getActiveElement())===null||i===void 0?void 0:i.currentTime)){e.videoTime=!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendGAMEvent(F.GAM_RENDER_SUCCESS,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),e)};var E=function(){var i,t;var e={overlayTime:r.elapsedOverlayTime/1e3,activeOverlayTime:r.activeOverlayTime/1e3,totalBidsCount:r.bidCount,adOpportunityBidCount:r.rebidCount+1,adOpportunityId:r.adOpportunityId,bidRequestId:r.bidRequestId,bannerSizeRequested:"".concat(o[0][0],"x").concat(o[0][1]),componentDimensions:{width:r.currentDimensions.width,height:r.currentDimensions.height},containerViewability:r.containerViewabilityValue};if(r.componentName===C.OVERLAY&&!Ae((i=r.getActiveElement())===null||i===void 0?void 0:i.currentTime)){e.videoTime=!Ae((t=r.getActiveElement())===null||t===void 0?void 0:t.currentTime)?r.getActiveElement().currentTime:0}r.analyticsEventDispatcher.sendGAMEvent(F.GAM_SLOT_LOAD_SUCCESS,M.OSD,r.currentWindowLocation.href,Boolean(r.foundUID!=="NOT_FOUND"),r.getPlayerMode(),e)};e.pubads().addEventListener("slotRequested",(function(i){if(i.slot===m.cxoAdSlot){u("CXO_OSD_REFRESH 'slotRequested' cxoAdSlot load requested.");w()}}));e.pubads().addEventListener("slotOnload",(function(i){if(i.slot===m.cxoAdSlot){var t=i.slot.getResponseInformation();D.cxoBidInfo.gptSlotOnload=t;window.postMessage({target:"cxo_gpt_prebid",message:"GPT load complete"},window.location.protocol+"//"+window.location.host);u(["CXO_OSD_REFRESH 'slotOnload' cxoAdSlot loaded.",JSON.stringify(t)]);E()}}));e.pubads().addEventListener("slotResponseReceived",(function(i){if(i.slot===m.cxoAdSlot){var t=i.slot.getResponseInformation();D.cxoBidInfo.gptSlotResponseReceived=t;if(t==null){window.postMessage({target:"cxo_gpt_prebid",message:"GPT load failed"},window.location.protocol+"//"+window.location.host);u(["CXO_OSD_REFRESH 'slotResponseReceived' googletag load failed (no bids).",JSON.stringify(t)],[d.QA,d.CXO]);T()}else{u(["CXO_OSD_REFRESH 'slotResponseReceived' googletag non-null response received.",JSON.stringify(t)],[d.QA,d.CXO]);g.reset(3e3,b);O()}}}));e.pubads().addEventListener("slotRenderEnded",(function(i){if(i.slot===m.cxoAdSlot){var t=i.slot.getResponseInformation();D.cxoBidInfo.gptSlotRenderEnded=i;u(["CXO_OSD_REFRESH 'slotRenderEnded' googletag slot render ended.",t],d.CXO);if(t==null){window.postMessage({target:"cxo_gpt_prebid",message:"GPT load failed"},window.location.protocol+"//"+window.location.host);u(["CXO_OSD_REFRESH 'slotRenderEnded' googletag slot render failed.",t],[d.QA,d.CXO]);I()}else{window.postMessage({target:"cxo_gpt_prebid",message:"GPT response received"},window.location.protocol+"//"+window.location.host);u(["CXO_OSD_REFRESH 'slotRenderEnded' googletag slot render successful.",t],[d.QA,d.CXO]);y();S()}}}));e.pubads().addEventListener("slotVisibilityChanged",(function(i){if(i.slot===m.cxoAdSlot){u(["CXO_OSD_REFRESH 'slotVisibilityChanged' googletag slot visibility for ".concat(i.slot.getSlotElementId()," changed to ").concat(i.inViewPercentage,"%")])}}));e.pubads().addEventListener("impressionViewable",(function(i){if(i.slot===m.cxoAdSlot){u(["CXO_OSD_REFRESH 'impressionViewable' googletag impression viewable received.",i.slot.getResponseInformation()])}}))}var D=r.osdProperties;D.cxoBidInfo=a;if(D.cxoAdSlot!==null){if(((l=(h=D.cxoAdSlot).getSlotElementId)===null||l===void 0?void 0:l.call(h))!==n.id){var R=(c=(f=D.cxoAdSlot).getSlotElementId)===null||c===void 0?void 0:c.call(f);var _=e.destroySlots([D.cxoAdSlot]);u(["CXO_OSD_REFRESH Node id ".concat(n.id," does not match current slot elementId ").concat(R,". Destroying existing googletag cxoAdSlot (was destroyed? ").concat(_,")")],[d.CXO,d.QA]);D.cxoAdSlot=null}else{u(["CXO_OSD_REFRESH Node id ".concat(n.id," matches current slot elementId ").concat((p=(v=D.cxoAdSlot).getSlotElementId)===null||p===void 0?void 0:p.call(v),". Refreshing existing googletag cxoAdSlot")],[d.CXO,d.QA])}}e.cmd.push((function(){if(D.cxoAdSlot==null){D.cxoAdSlot=e.defineSlot(i,o,n.id).addService(e.pubads());u("CXO_OSD_REFRESH defined googletag adSlot - ".concat(i,", ").concat(o,", ").concat(n.id));e.enableServices();e.pubads().enableSingleRequest();e.pubads().disableInitialLoad();e.display(n)}else{u("CXO_OSD_REFRESH reusing defined googletag adSlot - ".concat(i,", ").concat(o,", ").concat(n.id))}e.pubads().refresh([D.cxoAdSlot])}));u("googletag bids requested",[d.CXO,d.QA])}}return h};i.prototype.renderEndedTimeout=function(i,t){if(i===void 0){i=0}if(t===void 0){t=0}var e,n,s,r,o,a,h,l;if(this.timers.osdRefreshRenderEndedTimer.timeRemainingInSeconds===0){this.debugLog("CXO_OSD_REFRESH render ended (failed) load time: ".concat(this.timers.osdRefreshRenderEndedTimer.definedCallbackInMillseconds,"ms."),[d.INSERT,d.QA]);this.debugLog("CXO_OSD_REFRESH_FAILED.  ".concat((e=this.osdProperties.cxoBidInfo.gptSlotResponseReceived)===null||e===void 0?void 0:e.advertiserId," - ").concat((n=this.osdProperties.cxoBidInfo.gptSlotResponseReceived)===null||n===void 0?void 0:n.campaignId," - ").concat((s=this.osdProperties.cxoBidInfo.gptSlotResponseReceived)===null||s===void 0?void 0:s.creativeId),[d.INSERT,d.QA]);window.postMessage({target:"cxo_gpt_prebid",message:"GPT render failed"},window.location.protocol+"//"+window.location.host);var u={overlayTime:this.elapsedOverlayTime/1e3,activeOverlayTime:this.activeOverlayTime/1e3,totalBidsCount:this.bidCount,adOpportunityBidCount:this.rebidCount+1,adOpportunityId:this.adOpportunityId,bidRequestId:this.bidRequestId,bannerSizeRequested:"".concat(i,"x").concat(t),componentDimensions:{width:this.currentDimensions.width,height:this.currentDimensions.height},containerViewability:this.containerViewabilityValue};if(this.componentName===C.OVERLAY&&!Ae((r=this.getActiveElement())===null||r===void 0?void 0:r.currentTime)){u.videoTime=!Ae((o=this.getActiveElement())===null||o===void 0?void 0:o.currentTime)?this.getActiveElement().currentTime:0}this.analyticsEventDispatcher.sendGAMEvent(F.GAM_RENDER_FAIL,M.OSD,this.currentWindowLocation.href,Boolean(this.foundUID!=="NOT_FOUND"),this.getPlayerMode(),u)}else{this.debugLog("CXO_OSD_REFRESH render ended (success) load time: ".concat(this.timers.osdRefreshRenderEndedTimer.timeElapsedSinceStartTime,"ms."),[d.INSERT,d.QA]);this.debugLog("CXO_OSD_REFRESH_SUCCESS. ".concat((a=this.osdProperties.cxoBidInfo.gptSlotResponseReceived)===null||a===void 0?void 0:a.advertiserId," - ").concat((h=this.osdProperties.cxoBidInfo.gptSlotResponseReceived)===null||h===void 0?void 0:h.campaignId," - ").concat((l=this.osdProperties.cxoBidInfo.gptSlotResponseReceived)===null||l===void 0?void 0:l.creativeId),[d.INSERT,d.QA]);this.timers.osdRefreshRenderEndedTimer.cancel()}};i.prototype.dispatchOverlayEvent=function(i){var t=new CustomEvent(_.EVENT_FROM_OVERLAY,{bubbles:false,detail:i});if(!Ae(this.getActiveElement())){this.getActiveElement().dispatchEvent(t)}else{this.debugLog("dispatchOverlayElement - Video element is null. Dispatching event from ".concat(this.componentName,"."),[d.CXO,d.QA]);this.componentElement.dispatchEvent(t)}};i.prototype.cleanOSDResponseData=function(i){var t,e,n,s,r,o,a,h,l;i!==null&&i!==void 0?i:i={};var u={osdData:i};var d=function(i){var t;var e={};for(var n in i){if(typeof i[n]!=="function"&&n!=="gdprConsent"){if(typeof i[n]==="object"){var s=d(i[n]);if(((t=Object.keys(s))===null||t===void 0?void 0:t.length)>0){e[n]=s}}else{e[n]=i[n]}}}return e};u.osdData.isBackfill=(o=(n=(e=(t=u.osdData)===null||t===void 0?void 0:t.gptSlotRenderEnded)===null||e===void 0?void 0:e["isBackfill"])!==null&&n!==void 0?n:(r=(s=u.osdData)===null||s===void 0?void 0:s.gptSlotResponseReceived)===null||r===void 0?void 0:r["isBackfill"])!==null&&o!==void 0?o:false;u.osdData.isEmpty=(l=(h=(a=u.osdData)===null||a===void 0?void 0:a.gptSlotRenderEnded)===null||h===void 0?void 0:h["isEmpty"])!==null&&l!==void 0?l:false;var f={osdData:d(u.osdData)};return f};i.prototype.determineInsertTypeOptions=function(){var i=this.groupConfig.insertConfig;var t;var e=this.groupConfig.zoneType==="ctv-on-stream"||this.logManager.getDebugParamValue(O.FORCE_CTV_MODE)==="true";switch(this.getPlayerMode()){case I.MOBILE_FLOATING:t=this.removeProhibitedInsertTypes(i.allowedInsertsMobileFloating.map((function(i){return i["insertType"]})));if(t.length>0){this.debugLog(["determineInsertTypeOptions --mobileFloatingPlayer --allowedList",t])}else{var n=e?[this.currentInserts.ctvOverlayCorner,this.currentInserts.ctvSqueeze]:!this.currentDimensions.isFullscreen?this.removeProhibitedInsertTypes([this.currentInserts.nativeFlap,this.currentInserts.nativeWing]):this.removeProhibitedInsertTypes([this.currentInserts.nativeOverlayFullwidth]);t=n;this.debugLog(["determineInsertTypeOptions --mobileFloatingPlayer --noAllowedInserts\nDefault insert options set:",t],[d.QA,d.CXO])}break;case I.DESKTOP_FLOATING:t=this.removeProhibitedInsertTypes(i.allowedInsertsDesktopFloating.map((function(i){return i["insertType"]})));if(t.length>0){this.debugLog(["determineInsertTypeOptions --desktopFloatingPlayer --allowedList",t])}else{var n=e?[this.currentInserts.ctvOverlayCorner,this.currentInserts.ctvSqueeze]:!this.currentDimensions.isFullscreen?this.removeProhibitedInsertTypes([this.currentInserts.nativeFlap,this.currentInserts.nativeWing]):this.removeProhibitedInsertTypes([this.currentInserts.nativeOverlayFullwidth]);t=n;this.debugLog(["determineInsertTypeOptions --desktopFloatingPlayer --noAllowedInserts\nDefault insert options set:",t],[d.QA,d.CXO])}break;case I.MOBILE_ONSTREAM:t=this.removeProhibitedInsertTypes(i.allowedInsertsMobileOnStream.map((function(i){return i["insertType"]})));if(t.length>0){this.debugLog(["determineInsertTypeOptions --mobileOnStreamPlayer --allowedList",t])}else{var n=e?[this.currentInserts.ctvOverlayCorner,this.currentInserts.ctvSqueeze]:this.removeProhibitedInsertTypes([this.currentInserts.nativeOverlayFullwidth]);t=n;this.debugLog(["determineInsertTypeOptions --mobileOnStreamPlayer --noAllowedInserts\nDefault insert options set:",t],[d.QA,d.CXO])}break;case I.DESKTOP_ONSTREAM:t=this.removeProhibitedInsertTypes(i.allowedInsertsDesktopOnStream.map((function(i){return i["insertType"]})));if(t.length>0){this.debugLog(["determineInsertTypeOptions --desktopOnStreamPlayer --allowedList",t])}else{var n=e?[this.currentInserts.ctvOverlayCorner,this.currentInserts.ctvSqueeze]:this.removeProhibitedInsertTypes([this.currentInserts.nativeOverlayFullwidth,this.currentInserts.nativeOverlayIcon]);t=n;this.debugLog(["determineInsertTypeOptions --desktopOnStreamPlayer --noAllowedInserts\nDefault insert options set:",t],[d.QA,d.CXO])}break;case I.MOBILE_INARTICLE:t=this.removeProhibitedInsertTypes(i.allowedInsertsMobileInArticle.map((function(i){return i["insertType"]})));if(t.length>0){this.debugLog(["determineInsertTypeOptions --mobileInArticlePlayer --allowedList",t])}else{var n=e?[this.currentInserts.ctvOverlayCorner,this.currentInserts.ctvSqueeze]:this.removeProhibitedInsertTypes([this.currentInserts.nativeOverlayFullwidth]);t=n;this.debugLog(["determineInsertTypeOptions --mobileInArticlePlayer --noAllowedInserts\nDefault insert options set:",t],[d.QA,d.CXO])}break;case I.DESKTOP_INARTICLE:t=this.removeProhibitedInsertTypes(i.allowedInsertsDesktopInArticle.map(());if(t.length>0){this.debugLog(["determineInsertTypeOptions --desktopInArticlePlayer --allowedList",t])}else{var n=e?[this.currentInserts.ctvOverlayCorner,this.currentInserts.ctvSqueeze]:this.removeProhibitedInsertTypes([this.currentInserts.nativeOverlayFullwidth,this.currentInserts.nativeOverlayIcon]);t=n;this.debugLog(["determineInsertTypeOptions --desktopInArticlePlayer --noAllowedInserts\nDefault insert options set:",t],[d.QA,d.CXO])}break;default:t=[];break}return t};i.prototype.updateAdOpportunityId=function(){this.adOpportunityIdentifier=this.generateUniqueId};Object.defineProperty(i.prototype,"adOpportunityId",{get:function(){return this.adOpportunityIdentifier},enumerable:false,configurable:true});i.prototype.updateBidRequestId=i.prototype.percentageDifference=function(i,t){return 100*Math.abs((i-t)/((i+t)*.5))||0};Object.defineProperty(i.prototype,"bidRequestId",{get:function(){return this.bidRequestIdentifier},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"analyticsSessionId",{get:function(){return this.analyticsSessionIdentifier},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"currentWindowLocation",{get:function(){var i=window.location;if(window.self!==window.top){try{this.debugLog("Current overlay is within an iframe. Top window url=".concat(window.top.location.href),d.CXO);i=window.top.location}catch(t){this.debugLog(["Current overlay is within an iframe, but unable to access top window url. Using url: ".concat(i.href)],d.CXO)}}return i},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"generateUniqueId",{get:function(){var i=Math.round(+new Date/1e3);var t;try{var e=new Uint32Array(1);t=crypto.getRandomValues(e)[0]}catch(i){t=Math.round(Math.random()*2147483647)}return"CX".concat(t,"X").concat(i)},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"elapsedOverlayTime",{get:enumerable:false,configurable:true});Object.defineProperty(i.prototype,"activeOverlayDate",{get:function(){return this._activeOverlayDate},set:enumerable:false,configurable:true});Object.defineProperty(i.prototype,"activeOverlayTime",{get:function(){var i=(new Date).getTime();if(this.activeOverlayDate!==0){this._activeOverlayRuntime+=i-this.activeOverlayDate;this.activeOverlayDate=i}this.activeOverlayDate=!document.hidden?i:0;return this._activeOverlayRuntime},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"tcString",{get:function(){return this._tcString},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"uspString",{get:function(){return this._uspString},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"gppString",{get:function(){return this._gppString},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"gppSids",{get:function(){return this._gppSids},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"eidsIdentityHub",{get:function(){return this._eidsIdentityHub},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"eidsintentIQ",{get:function(){return this._eidsintentIQ},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"gdprApplies",{get:function(){return this._gdprApplies},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isMobileDevice",{get:function(){var i=false;((navigator.userAgent||navigator.vendor);return i},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isInAppBrowser",{get:function(){var i=navigator.userAgent||navigator.vendor;var t=!!i.toLowerCase().match(/fbios|fb_iab/gi);var e=!!i.toLowerCase().match(/twitter/gi);var n=!!i.toLowerCase().match(/instagram/gi);var s=!!i.toLowerCase().match(/snapchat/gi);var r=!!i.toLowerCase().match(/micromessenger/gi);return t||e||n||s||r?true:false},enumerable:false,configurable:true});i.prototype.isBlockedRegion=function(i){if(i==="9qI3hQnDUEyvHOhqq4LRXw"){this.groupConfig.regions=["AU","CA","DE","FR","GB","US"];this.groupConfig.includeRegions=true}var t=this.groupConfig.regions;var e=this.groupConfig.includeRegions;var n=this.groupConfig.regionInfo;if(!!this.logManager.getDebugParamValue(O.OVERRIDE_GEO_BLOCKING)){this.debugLog(["Overriding geo blocking due to url parameter"],[d.CXO,d.QA]);return false}else if(Ae(t)||Ae(e)){this.debugLog(["Region blocking is not configured for this group"],[d.CXO,d.QA]);return false}else if(Ae(n)){this.debugLog(["Unable to determine the region of the client to apply region blocking config"],[d.CXO,d.QA]);return false}else if(t.length===0){return false}else{var s=t.includes(n.regionCode)||t.includes(n.country);return e?!s:s}};Object.defineProperty(i.prototype,"isDomainBlockedForInApp",{get:function(){var i=["factinate","roughmaps","moneyawaits","motorsearches","medical-news","sportscroll","motor-junkie","historycollection","moneyppl","sciencesensei","homeaddict"];return!!this.currentWindowLocation.hostname.toLowerCase().match(new RegExp(i.join("|"),"gi"))},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isAndroidWebView",{get:function(){var i=false;if(!navigator.userAgent.includes("AmazonWebAppPlatform")){if(/(Version\/\d+.*\/\d+.0.0.0 Mobile|; ?wv)/i.test(navigator.userAgent)){this.debugLog("Android webview navigator detected: "+navigator.userAgent,[d.CXO,d.QA]);i=true}else if(typeof window["Android"]!=="undefined"){this.debugLog("Android webview window.Android variable detected.",[d.CXO,d.QA]);i=true}else if(window.hasOwnProperty("Android ")){this.debugLog('Android webview window.hasOwnProperty("Android ") detected.',[d.CXO,d.QA]);i=true}}return i},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"availableTopWindow",{get:function(){var i=window;if(window.self!==window.top){try{if(window.top.location.href!==null){i=window.top}}catch(i){this.debugLog(["Unable to access window.top. Serving from inside an unsafe iframe.",i],[d.QA,d.IMPORTANT])}}return i},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"groupConfig",{get:function(){return this._groupConfig},set:function(i){var t;this._groupConfig=i;if(!Ae(this.groupConfig.prebidObjectIdentifier)&&!Ae((t=this.osdConfig)===null||t===void 0?void 0:t.slotRefreshParams)){this.osdConfig.slotRefreshParams.pbjsObject=this.findOnpagePBJS()}},enumerable:false,configurable:true});return i}();var Ue=new Ce;function qe(i,t){if(t===void 0){t=d.CXO}var e=typeof i==="string"?[i]:__spreadArray([],i,true);e[0]="js-load "+e[0];Ue.evaluateDebugLog(e,t)}var Me={};var Le="https://tags.qortex.ai";function ze(i,t){qe(["loading components for inserts: ",i]);qe(["esm inserts?: ",t]);var e=t?"inserts.esm.js":"inserts.js";var n=t?"module":"text/javascript";return Pe("/components/inserts/dist/inserts/".concat(e),n)}function Pe(i,t){i="".concat(Le).concat(i);if(Me[i]===undefined){var e=document.createElement("script");e.setAttribute("type",t);e.setAttribute("src",i);document.head.appendChild(e);Ve(i,e)}return Me[i]}function Ve(i,t){if(Me[i]===undefined){var e=new Promise((function(e,n){t.onload=t.onerror=function(){qe(["failed to load component from "+i,new Error("js-loader")]);n(new Error("failed "+i))};t.onabort=function(){qe(["aborted "+i,new Error("js-loader")]);n(new Error("aborted "+i))}}));Me[i]=e}}*!
             * GSAP 3.12.4
             * https://gsap.com
             *
             * @license Copyright 2008-2023, GreenSock. All rights reserved.
             * Subject to the terms at https://gsap.com/standard-license or for
             * Club GSAP members, the agreement issued with that membership.
             * @author: Jack Doyle, jack@greensock.com
            */var Ge={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},We={duration:.5,overwrite:false,delay:0},He,Ye,Je,Qe=1e8,Ke=1/Qe,Ze=Math.PI*2,$e=Ze/4,tn=0,en=Math.sqrt,nn=Math.cos,sn=Math.sin,rn=function i(t){return typeof t==="string"},on=function i(t){return typeof t==="function"},an=function i(t){return typeof t==="number"},hn=function i(t){return typeof t==="undefined"},ln=un=dn=fn=cn=typeof ArrayBuffer==="function"&&ArrayBuffer.isView||function(){},vn=Array.isArray,pn=/(?:-?\.?\d|\.)+/gi,mn=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,gn=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,bn=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,yn=/[+-]=-?[.\d]+/,wn=/[^,'"\[\]\s]+/gi,On=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Tn,In,Sn,En,Dn={},Rn={},_n,Cn=kn=Nn=An=Bn=xn={suppressEvents:true,isStart:true,kill:false},Fn={suppressEvents:true,kill:false},Un={suppressEvents:true},qn={},Mn=[],Ln={},zn,Pn={},Vn={},jn=30,Xn=[],Gn="",Wn=Hn=Yn=Jn=Qn=function i(t){return Math.round(t*1e5)/1e5||0},Kn=Zn=$n=is=ts=es=ns=ss=rs=os=function i(t,e){for(var n in e){t[n]=e[n]}return t},as=hs=ls=us=ds=fs=cs=function i(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t);t._act=0},vs=ps=ms=gs=bs=ys=ws=Os=Ts=Is=function i(t,e){var n;if(e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add)){n=ws(t.rawTime(),e);if(!e._dur||qs(0,e.totalDuration(),n)-e._tTime>Ke){e.render(n,true)}}if(vs(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration()){n=t;while(n._dp){n.rawTime()>=0&&n.totalTime(n._tTime);n=n._dp}}t._zTime=-Ke}},Ss=Es=Ds=Rs=_s=Cs=ks=Ns=As=Bs={_start:0,endTime:Bn,totalDuration:Bn},xs=Fs=Us=qs=Ms=Ls=zs=[].slice,Ps=Vs=js=Xs=Gs=Ws=function i(t){if(on(t)){return t}var e=ln(t)?t:{each:t},n=Nr(e.ease),s=e.from||0,r=parseFloat(e.base)||0,o={},a=s>0&&s<1,h=isNaN(s)||a,l=e.axis,u=s,d=s;if(rn(s)){u=d={center:.5,edges:.5,end:1}[s]||0}else if(!a&&h){u=s[0];d=s[1]}return function(i,t,a){var f=(a||e).length,c=o[f],v,p,m,g,b,y,w,O,T;if(!c){T=e.grid==="auto"?0:(e.grid||[1,Qe])[1];if(!T){w=-Qe;while(w<(w=a[T++].getBoundingClientRect().left)&&T<f){}T<f&&T--}c=o[f]=[];v=h?Math.min(T,f)*u-.5:s%T;p=T===Qe?0:h?f*d/T-.5:s/T|0;w=0;O=Qe;for(y=0;y<f;y++){m=y%T-v;g=p-(y/T|0);c[y]=b=!l?en(m*m+g*g):Math.abs(l==="y"?g:m);b>w&&(w=b);b<O&&(O=b)}s==="random"&&Gs(c);c.max=w-O;c.min=O;c.v=f=(parseFloat(e.amount)||parseFloat(e.each)*(T>f?f-1:!l?Math.max(T,f/T):l==="y"?f/T:T)||0)*(s==="edges"?-1:1);c.b=f<0?r-f:r;c.u=Ms(e.amount||e.each)||0;n=n&&f<0?Cr(n):n}f=(c[i]-c.min)/c.max||0;return Kn(c.b+(n?n(f):f)*c.v)+c.u}},Hs=Ys=Js=Qs=Ks=Zs=$s=ir=tr=er=nr=sr=rr=or=ar=hr,lr=[],ur=function i(t){if(dn()&&t){t=!t.name&&t["default"]||t;var e=t.name,n=on(t),s=e&&!n&&t.init?t,r={init:Bn,render:ao,add:zr,kill:lo,modifier:ho,rawVars:0},o={targetTest:0,get:0,getSetter:no,aliases:{},register:0};Tr();if(t!==s){if(Pn[e]){return}ss(s,ss(hs(t,r),o));os(s.prototype,os(r,hs(t,o)));Pn[s.prop=e]=s;if(t.targetTest){Xn.push(s);qn[e]=1}e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}An(e,s);t.register&&t.register(Ro,s,co)}else{t&&lr.push(t)}},dr=255,fr={aqua:[0,dr,dr],lime:[0,dr,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,dr],navy:[0,0,128],white:[dr,dr,dr],olive:[128,128,0],yellow:[dr,dr,0],orange:[dr,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[dr,0,0],pink:[dr,192,203],cyan:[0,dr,dr],transparent:[dr,dr,dr,0]},cr=vr=pr=mr=gr=),br=/hsl[a]?\(/,yr=wr,Or=),Tr=Ir={},Sr=/^[\d.\-M][\d.\-,\s]/,Er=/["']/g,Dr=Rr=_r=Cr=kr=Nr=Ar=Br=xr=Fr=Jn("Linear,Quad,Cubic,Quart,Quint,Strong",();Ir.Linear.easeNone=Ir.none=Ir.Linear.easeIn;Ar("Elastic",xr("in"),xr("out"),xr());((7.5625,2.75);Ar("Expo",();Ar("Circ",();Ar("Sine",();Ar("Back",Fr("in"),Fr("out"),Fr());Ir.SteppedEase=Ir.steps=Dn.SteppedEase={config:;We.ease=Ir["quad.out"];Jn("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",();var Ur=var qr=function(){ar t=i.prototype;t.delay=t.duration=t.totalDuration=t.totalTime=t.time=t.totalProgress=function i(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0};t.progress=function i(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-t:t)+bs(this),e):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0};t.iteration=t.timeScale=function i(t,e){if(!arguments.length){return this._rts===-Ke?0:this._rts}if(this._rts===t){return this}var n=this.parent&&this._ts?ws(this.parent._time,this):this._tTime;this._rts=+t||0;this._ts=this._ps||t===-Ke?0:this._rts;this.totalTime(qs(-Math.abs(this._delay),this._tDur,n),e!==false);Os(this);return ps(this)};t.paused=t.startTime=t.endTime=t.rawTime=t.revert=t.globalTime=function i(t){var e=this,n=arguments.length?t:e.rawTime();while(e){n=e._start+n/(Math.abs(e._ts)||1);e=e._dp}return!this.parent&&this._sat?this._sat.globalTime(t):n};t.repeat=t.repeatDelay=t.yoyo=t.seek=t.restart=t.play=t.reverse=t.pause=t.resume=t.reversed=t.invalidate=t.isActive=t.eventCallback=t.then=t.kill=return i}();ss(qr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:false,parent:null,_initted:false,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ke,_prom:0,_ps:false,_rts:1});var Mr=function(i){Xe(t,i);ar e=t.prototype;e.to=function i(t,e,n){Fs(0,arguments,this);return this};e.from=e.fromTo=e.set=e.call=e.staggerTo=e.staggerFrom=e.staggerFromTo=e.render=function i(t,e,n){var s=this._time,r=this._dirty?this.totalDuration():this._tDur,o=this._dur,a=t<=0?0:Kn(t),h=this._zTime<0!==t<0&&(this._initted||!o),l,u,d,f,c,v,p,m,g,b,y,w;this!==Tn&&a>r&&t>=0&&(a=r);if(a!==this._tTime||n||h){if(s!==this._time&&o){a+=this._time-s;t+=this._time-s}l=a;g=this._start;m=this._ts;v=!m;if(h){o||(s=this._zTime);(t||!e)&&(this._zTime=t)}if(this._repeat){y=this._yoyo;c=o+this._rDelay;if(this._repeat<-1&&t<0){return this.totalTime(c*100+t,e,n)}l=Kn(a%c);if(a===r){f=this._repeat;l=o}else{f=~~(a/c);if(f&&f===a/c){l=o;f--}l>o&&(l=o)}b=ys(this._tTime,c);!s&&this._tTime&&b!==f&&this._tTime-b*c-this._dur<=0&&(b=f);if(y&&f&1){l=o-l;w=1}if(f!==b&&!this._lock){var O=y&&b&1,T=O===(y&&f&1);f<b&&(O=!O);s=O?0:a%o?o:a;this._lock=1;this.render(s||(w?0:Kn(f*c)),e,!o)._lock=0;this._tTime=a;!e&&this.parent&&or(this,"onRepeat");this.vars.repeatRefresh&&!w&&(this.invalidate()._lock=1);if(s&&s!==this._time||v!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act){return this}o=this._dur;r=this._tDur;if(T){this._lock=2;s=O?o:-1e-4;this.render(s,true);this.vars.repeatRefresh&&!w&&this.invalidate()}this._lock=0;if(!this._ts&&!v){return this}kr(this,w)}}if(this._hasPause&&!this._forcing&&this._lock<2){p=ks(this,Kn(s),Kn(l));if(p){a-=l-(l=p._start)}}this._tTime=a;this._time=l;this._act=!m;if(!this._initted){this._onUpdate=this.vars.onUpdate;this._initted=1;this._zTime=t;s=0}if(!s&&l&&!e&&!f){or(this,"onStart");if(this._tTime!==a){return this}}if(l>=s&&t>=0){u=this._first;while(u){d=u._next;if((u._act||l>=u._start)&&u._ts&&p!==u){if(u.parent!==this){return this.render(t,e,n)}u.render(u._ts>0?(l-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(l-u._start)*u._ts,e,n);if(l!==this._time||!this._ts&&!v){p=0;d&&(a+=this._zTime=-Ke);break}}u=d}}else{u=this._last;var I=t<0?t:l;while(u){d=u._prev;if((u._act||I<=u._end)&&u._ts&&p!==u){if(u.parent!==this){return this.render(t,e,n)}u.render(u._ts>0?(I-u._start)*u._ts:(u._dirty?u.totalDuration():u._tDur)+(I-u._start)*u._ts,e,n||Ye&&(u._initted||u._startAt));if(l!==this._time||!this._ts&&!v){p=0;d&&(a+=this._zTime=I?-Ke:Ke);break}}u=d}}if(p&&!e){this.pause();p.render(l>=s?0:-Ke)._zTime=l>=s?1:-1;if(this._ts){this._start=g;Os(this);return this.render(t,e,n)}}this._onUpdate&&!e&&or(this,"onUpdate",true);if(a===r&&this._tTime>=this.totalDuration()||!a&&s)if(g===this._start||Math.abs(m)!==Math.abs(this._ts))if(!this._lock){(t||!o)&&(a===r&&this._ts>0||!a&&this._ts<0)&&cs(this,1);if(!e&&!(t<0&&!s)&&(a||s||!r)){or(this,a===r&&t>=0?"onComplete":"onReverseComplete",true);this._prom&&!(a<r&&this.timeScale()>0)&&this._prom()}}}return this};e.add=e.getChildren=e.getById=e.remove=e.totalTime=e.addLabel=e.removeLabel=e.addPause=e.removePause=e.killTweensOf=e.getTweensOf=e.tweenTo=e.tweenFromTo=e.recent=function i(){return this._recent};e.nextLabel=e.previousLabel=e.currentLabel=e.shiftChildren=e.invalidate=e.clear=e.totalDuration=t.updateRoot=return t}(qr);ss(Mr.prototype,{_lock:0,_hasPause:0,_forcing:0});var Lr=zr=Pr=Vr=jr,Xr,Gr=function i(t,e,n){var s=t.vars,r=s.ease,o=s.startAt,a=s.immediateRender,h=s.lazy,l=s.onUpdate,u=s.runBackwards,d=s.yoyoEase,f=s.keyframes,c=s.autoRevert,v=t._dur,p=t._startAt,m=t._targets,g=t.parent,b=g&&g.data==="nested"?g.vars.targets:m,y=t._overwrite==="auto"&&!He,w=t.timeline,O,T,I,S,E,D,R,_,C,k,N,A,B;w&&(!f||!r)&&(r="none");t._ease=Nr(r,We.ease);t._yEase=d?Cr(Nr(d===true?r:d,We.ease)):0;if(d&&t._yoyo&&!t._repeat){d=t._yEase;t._yEase=t._ease;t._ease=d}t._from=!w&&!!s.runBackwards;if(!w||f&&!s.stagger){_=m[0]?Hn(m[0]).harness:0;A=_&&s[_.prop];O=hs(s,qn);if(p){p._zTime<0&&p.progress(1);e<0&&u&&a&&!c?p.render(-1,true):p.revert(u&&v?Fn:xn);p._lazy=0}if(o){cs(t._startAt=Zr.set(m,ss({data:"isStart",overwrite:false,parent:g,immediateRender:true,lazy:!p&&un(h),startAt:null,delay:0,onUpdate:l&&stagger:0},o)));t._startAt._dp=0;t._startAt._sat=t;e<0&&(Ye||!a&&!c)&&t._startAt.revert(Fn);if(a){if(v&&e<=0&&n<=0){e&&(t._zTime=e);return}}}else if(u&&v){if(!p){e&&(a=false);I=ss({overwrite:false,data:"isFromStart",lazy:a&&!p&&un(h),immediateRender:a,stagger:0,parent:g},O);A&&(I[_.prop]=A);cs(t._startAt=Zr.set(m,I));t._startAt._dp=0;t._startAt._sat=t;e<0&&(Ye?t._startAt.revert(Fn):t._startAt.render(-1,true));t._zTime=e;if(!a){i(t._startAt,Ke,Ke)}else if(!e){return}}}t._pt=t._ptCache=0;h=v&&un(h)||h&&!v;for(T=0;T<m.length;T++){E=m[T];R=E._gsap||Wn(m)[T]._gsap;t._ptLookup[T]=k={};Ln[R.id]&&Mn.length&&is();N=b===m?T:b.indexOf(E);if(_&&(C=new _).init(E,A||O,t,N,b)!==false){t._pt=S=new co(t._pt,E,C.name,0,1,C.render,C,0,C.priority);C._props.forEach(();C.priority&&(D=1)}if(!_||A){for(I in O){if(Pn[I]&&(C=Vr(I,O,t,N,E,b))){C.priority&&(D=1)}else{k[I]=S=zr.call(t,E,I,"get",O[I],N,b,0,s.stringFilter)}}}t._op&&t._op[T]&&t.kill(E,t._op[T]);if(y&&t._pt){jr=t;Tn.killTweensOf(E,k,t.globalTime(e));B=!t.parent;jr=0}t._pt&&h&&(Ln[R.id]=1)}D&&fo(t);t._onInit&&t._onInit(t)}t._onUpdate=l;t._initted=(!t._op||t._pt)&&!B;f&&e<=0&&w.render(Qe,true,true)},Wr=function i(t,e,n,s,r,o,a,h){var l=(t._pt&&t._ptCache||(t._ptCache={}))[e],u,d,f,c;if(!l){l=t._ptCache[e]=[];f=t._ptLookup;c=t._targets.length;while(c--){u=f[c][e];if(u&&u.d&&u.d._pt){u=u.d._pt;while(u&&u.p!==e&&u.fp!==e){u=u._next}}if(!u){Xr=1;t.vars[e]="+=0";Gr(t,a);Xr=0;return h?Nn(e+" not eligible for reset"):1}l.push(u)}}c=l.length;while(c--){d=l[c];u=d._pt||d;u.s=(s||s===0)&&!r?s:u.s+(s||0)+o*u.c;u.c=n-u.s;d.e&&(d.e=Qn(n)+Ms(d.e));d.b&&(d.b=u.s+Ms(d.b))}},Hr=Yr=Jr=Qr=Gn+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",Kr={};Jn(Qr+",id,stagger,delay,duration,paused,scrollTrigger",(function(i){return Kr[i]=1}));var Zr=function(i){Xe(t,i);ar e=t.prototype;e.render=function i(t,e,n){var s=this._time,r=this._tDur,o=this._dur,a=t<0,h=t>r-Ke&&!a?r:t<Ke?0:t,l,u,d,f,c,v,p,m,g;if(!o){Cs(this,t,e,n)}else if(h!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==a){l=h;m=this.timeline;if(this._repeat){f=o+this._rDelay;if(this._repeat<-1&&a){return this.totalTime(f*100+t,e,n)}l=Kn(h%f);if(h===r){d=this._repeat;l=o}else{d=~~(h/f);if(d&&d===Kn(h/f)){l=o;d--}l>o&&(l=o)}v=this._yoyo&&d&1;if(v){g=this._yEase;l=o-l}c=ys(this._tTime,f);if(l===s&&!n&&this._initted&&d===c){this._tTime=h;return this}if(d!==c){m&&this._yEase&&kr(m,v);if(this.vars.repeatRefresh&&!v&&!this._lock&&this._time!==o&&this._initted){this._lock=n=1;this.render(Kn(f*d),true).invalidate()._lock=0}}}if(!this._initted){if(Ds(this,a?t:l,n,e,h)){this._tTime=0;return this}if(s!==this._time&&!(n&&this.vars.repeatRefresh&&d!==c)){return this}if(o!==this._dur){return this.render(t,e,n)}}this._tTime=h;this._time=l;if(!this._act&&this._ts){this._act=1;this._lazy=0}this.ratio=p=(g||this._ease)(l/o);if(this._from){this.ratio=p=1-p}if(l&&!s&&!e&&!d){or(this,"onStart");if(this._tTime!==h){return this}}u=this._pt;while(u){u.r(p,u.d);u=u._next}m&&m.render(t<0?t:!l&&v?-Ke:m._dur*m._ease(l/this._dur),e,n)||this._startAt&&(this._zTime=t);if(this._onUpdate&&!e){a&&ms(this,t,e,n);or(this,"onUpdate")}this._repeat&&d!==c&&this.vars.onRepeat&&!e&&this.parent&&or(this,"onRepeat");if((h===this._tDur||!h)&&this._tTime===h){a&&!this._onUpdate&&ms(this,t,true,true);(t||!o)&&(h===this._tDur&&this._ts>0||!h&&this._ts<0)&&cs(this,1);if(!e&&!(a&&!s)&&(h||s||v)){or(this,h===r?"onComplete":"onReverseComplete",true);this._prom&&!(h<r&&this.timeScale()>0)&&this._prom()}}}return this};e.targets=e.invalidate=e.resetTo=function i(t,e,n,s,r){wr||Or.wake();this._ts||this.play();var o=Math.min(this._dur,(this._dp._time-this._start)*this._ts),a;this._initted||Gr(this,o);a=this._ease(o/this._dur);if(Wr(this,t,e,n,s,a,o,r)){return this.resetTo(t,e,n,s,1)}Ts(this,0);this.parent||ds(this._dp,this,"_first","_last",this._dp._sort?"_start":0);return this.render(0)};e.kill=t.to=t.from=t.delayedCall=t.fromTo=t.set=t.killTweensOf=return t}(qr);ss(Zr.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Jn("staggerTo,staggerFrom,staggerFromTo",();var $r=io=to=eo=no=so=ro=oo=ao=ho=lo=uo=fo=var co=);Jn(Gn+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(i){return qn[i]=1}));Dn.TweenMax=Dn.TweenLite=Zr;Dn.TimelineLite=Dn.TimelineMax=Mr;Tn=new Mr({sortChildren:false,defaults:We,autoRemoveChildren:true,id:"root",smoothChildTiming:true});Ge.stringFilter=yr;var vo=[],po={},mo=[],go=0,bo=0,yo=wo=function i(){var t=Date.now(),e=[];if(t-go>2){yo("matchMediaInit");vo.forEach(();yo("matchMediaRevert");e.forEach(();go=t;yo("matchMedia")}};var Oo=function(){function i(i,t){this.selector=t&&Xs(t);this.data=[];this._r=[];this.isReverted=false;this.id=bo++;i&&this.add(i)}var t=i.prototype;t.add=function i(t,e,n){if(on(t)){n=e;e=t;t=on}var s=this,r=s.last=r;return t===on?r(s,(function(i){return s.add(null,i)})):t?s[t]=r:r};t.ignore=t.getTweens=t.clear=t.kill=function i(t,e){var n=this;if(t){(function(){var i=n.getTweens(),e=n.data.length,s;while(e--){s=n.data[e];if(s.data==="isFlip"){s.revert();s.getChildren(true,true,false).forEach(()}}i.map((function(i){return{g:i._dur||i._delay||i._sat&&!i._sat.vars.immediateRender?i.globalTime(0):-Infinity,t:i}})).sort((function(i,t){return t.g-i.g||-Infinity})).forEach(();e=n.data.length;while(e--){s=n.data[e];if(s instanceof Mr){if(s.data!=="nested"){s.scrollTrigger&&s.scrollTrigger.revert();s.kill()}}else{!(s instanceof Zr)&&s.revert&&s.revert(t)}}n._r.forEach(();n.isReverted=true})()}else{this.data.forEach(()}this.clear();if(e){var s=vo.length;while(s--){vo[s].id===this.id&&vo.splice(s,1)}}};t.revert=function i(t){this.kill(t||{})};return i}();var To=function(){ar t=i.prototype;t.add=function i(t,e,n){ln(t)||(t={matches:t});var s=new Oo(0,n||this.scope),r=s.conditions={},o,a,h;Je&&!s.selector&&(s.selector=Je.selector);this.contexts.push(s);e=s.add("onMatch",e);s.queries=t;for(a in t){if(a==="all"){h=1}else{o=In.matchMedia(t[a]);if(o){vo.indexOf(s)<0&&vo.push(s);(r[a]=o.matches)&&(h=1);o.addListener?o.addListener(wo):o.addEventListener("change",wo)}}}h&&e(s,();return this};t.revert=t.kill=return i}();var Io={registerPlugin:timeline:function i(t){return new Mr(t)},getTweensOf:getProperty:quickSetter:quickTo:isTweening:defaults:config:registerEffect:registerEase:parseEase:getById:exportRoot:context:matchMedia:matchMediaRefresh:addEventListener:removeEventListener:utils:{wrap:ir,wrapYoyo:tr,distribute:Ws,random:Js,snap:Ys,normalize:Zs,getUnit:Ms,clamp:Ls,splitColor:vr,toArray:js,selector:Xs,mapRange:nr,pipe:Qs,unitize:Ks,interpolate:sr,shuffle:Gs},install:Cn,effects:Vn,ticker:Or,updateRoot:Mr.updateRoot,plugins:Pn,globalTimeline:Tn,core:{PropTween:co,globals:An,Tween:Zr,Timeline:Mr,Animation:qr,getCache:Hn,_removeLinkedListItem:fs,reverting:context:suppressOverwrites:};Jn("to,from,fromTo,delayedCall,set,killTweensOf",();Or.add(Mr.updateRoot);hr=Io.to({},{duration:0});var So=Eo=Do=var Ro=Io.registerPlugin({name:"attr",init:render:,{name:"endArray",init:,Do("roundProps",Hs),Do("modifiers"),Do("snap",Ys))||Io;Zr.version=Mr.version=Ro.version="3.12.4";_n=1;dn()&&Tr();var _o=Ir.Power1,Co=Ir.Power2,ko=Ir.Back;
/*!
             * CSSPlugin 3.12.4
             * https://gsap.com
             *
             * Copyright 2008-2023, GreenSock. All rights reserved.
             * Subject to the terms at https://gsap.com/standard-license or for
             * Club GSAP members, the agreement issued with that membership.
             * @author: Jack Doyle, jack@greensock.com
            */var No,Ao,Bo,xo,Fo,Uo,qo,Mo=function i(){return typeof window!=="undefined"},Lo={},zo=180/Math.PI,Po=Math.PI/180,Vo=Math.atan2,jo=1e8,Xo=/([A-Z])/g,Go=/(left|right|width|margin|padding|x)/i,Wo=/[\s,\(]\S/,Ho={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Yo=Jo=Qo=Ko=Zo=$o=ia=function i(t,e,n){return t.style[e]=n},ta=ea=na=sa=ra=oa="transform",aa=oa+"Origin",ha=function i(t,e){var n=this;var s=this.target,r=s.style,o=s._gsap;if(t in Lo&&r){this.tfm=this.tfm||{};if(t!=="transform"){t=Ho[t]||t;~t.indexOf(",")?t.split(",").forEach(():this.tfm[t]=o.x?o[t]:Ra(s,t);t===aa&&(this.tfm.zOrigin=o.zOrigin)}else{return Ho.transform.split(",").forEach(()}if(this.props.indexOf(oa)>=0){return}if(o.svg){this.svgo=s.getAttribute("data-svg-origin");this.props.push(aa,e,"")}t=oa}(r||e)&&this.props.push(t,e,r[t])},la=ua=function i(){var t=this.props,e=this.target,n=e.style,s=e._gsap,r,o;for(r=0;r<t.length;r+=3){t[r+1]?e[t[r]]=t[r+2]:t[r+2]?n[t[r]]=t[r+2]:n.removeProperty(t[r].substr(0,2)==="--"?t[r]:t[r].replace(Xo,"-$1").toLowerCase())}if(this.tfm){for(o in this.tfm){s[o]=this.tfm[o]}if(s.svg){s.renderTransform();e.setAttribute("data-svg-origin",this.svgo||"")}r=qo();if((!r||!r.isStart)&&!n[oa]){la(n);if(s.zOrigin&&n[aa]){n[aa]+=" "+s.zOrigin+"px";s.zOrigin=0;s.renderTransform()}s.uncache=1}}},da=function i(t,e){var n={target:t,props:[],revert:ua,save:ha};t._gsap||Ro.core.getCache(t);e&&e.split(",").forEach((function(i){return n.save(i)}));return n},fa,ca=function i(t,e){var n=Ao.createElementNS?Ao.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Ao.createElement(t);return n&&n.style?n:Ao.createElement(t)},va=pa="O,Moz,ms,Ms,Webkit".split(","),ma=ga=function i(){if(Mo()&&window.document){No=window;Ao=No.document;Bo=Ao.documentElement;Fo=ca("div")||{style:{}};ca("div");oa=ma(oa);aa=oa+"Origin";Fo.style.cssText="border-width:0;line-height:0;position:absolute;padding:0";fa=!!ma("perspective");qo=Ro.core.reverting;xo=1}},ba=ya=wa=Oa=Ta=function i(t,e){if(e){var n=t.style,s;if(e in Lo&&e!==aa){e=oa}if(n.removeProperty){s=e.substr(0,2);if(s==="ms"||e.substr(0,6)==="webkit"){e="-"+e}n.removeProperty(s==="--"?e:e.replace(Xo,"-$1").toLowerCase())}else{n.removeAttribute(e)}}},Ia=Sa={deg:1,rad:1,turn:1},Ea={grid:1,flex:1},Da=function i(t,e,n,s){var r=parseFloat(n)||0,o=(n+"").trim().substr((r+"").length)||"px",a=Fo.style,h=Go.test(e),l=t.tagName.toLowerCase()==="svg",u=(l?"client":"offset")+(h?"Width":"Height"),d=100,f=s==="px",c=s==="%",v,p,m,g;if(s===o||!r||Sa[s]||Sa[o]){return r}o!=="px"&&!f&&(r=i(t,e,n,"px"));g=t.getCTM&&Oa(t);if((c||o==="%")&&(Lo[e]||~e.indexOf("adius"))){v=g?t.getBBox()[h?"width":"height"]:t[u];return Qn(c?r/v*d:r/100*v)}a[h?"width":"height"]=d+(f?o:s);p=~e.indexOf("adius")||s==="em"&&t.appendChild&&!l?t:t.parentNode;if(g){p=(t.ownerSVGElement||{}).parentNode}if(!p||p===Ao||!p.appendChild){p=Ao.body}m=p._gsap;if(m&&c&&m.width&&h&&m.time===Or.time&&!m.uncache){return Qn(r/m.width*d)}else{if(c&&(e==="height"||e==="width")){var b=t.style[e];t.style[e]=d+s;v=t[u];b?t.style[e]=b:Ta(t,e)}else{(c||o==="%")&&!Ea[va(p,"display")]&&(a.position=va(t,"position"));p===t&&(a.position="static");p.appendChild(Fo);v=Fo[u];p.removeChild(Fo);a.position="absolute"}if(h&&c){m=Hn(p);m.time=Or.time;m.width=p[u]}}return Qn(f?v*r/d:v&&r?d/v*r:0)},Ra=_a=function i(t,e,n,s){if(!n||n==="none"){var r=ma(e,t,1),o=r&&va(t,r,1);if(o&&o!==n){e=r;n=o}else if(e==="borderColor"){n=va(t,"borderTopColor")}}var a=new co(this._pt,t.style,e,0,1,oo),h=0,l=0,u,d,f,c,v,p,m,g,b,y,w,O;a.b=n;a.e=s;n+="";s+="";if(s==="auto"){p=t.style[e];t.style[e]=s;s=va(t,e)||s;p?t.style[e]=p:Ta(t,e)}u=[n,s];yr(u);n=u[0];s=u[1];f=n.match(gn)||[];O=s.match(gn)||[];if(O.length){while(d=gn.exec(s)){m=d[0];b=s.substring(h,d.index);if(v){v=(v+1)%5}else if(b.substr(-5)==="rgba("||b.substr(-5)==="hsla("){v=1}if(m!==(p=f[l++]||"")){c=parseFloat(p)||0;w=p.substr((c+"").length);m.charAt(1)==="="&&(m=Zn(c,m)+w);g=parseFloat(m);y=m.substr((g+"").length);h=gn.lastIndex-y.length;if(!y){y=y||Ge.units[e]||w;if(h===s.length){s+=y;a.e+=y}}if(w!==y){c=Da(t,e,p,y)||0}a._pt={_next:a._pt,p:b||l===1?b:",",s:c,c:g-c,m:v&&v<4||e==="zIndex"?Math.round:0}}}a.c=h<s.length?s.substring(h,s.length):""}else{a.r=e==="display"&&s==="none"?$o:Zo}yn.test(s)&&(a.e=0);this._pt=a;return a},Ca={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},ka=Na=Aa={clearProps:,Ba=[1,0,0,1,0,0],xa={},Fa=Ua=qa=Ma=La=function i(t,e){var n=t._gsap||new Ur(t);if("x"in n&&!e&&!n.uncache){return n}var s=t.style,r=n.scaleX<0,o="px",a="deg",h=getComputedStyle(t),l=va(t,aa)||"0",u,d,f,c,v,p,m,g,b,y,w,O,T,I,S,E,D,R,_,C,k,N,A,B,x,F,U,q,M,L,z,P;u=d=f=p=m=g=b=y=w=0;c=v=1;n.svg=!!(t.getCTM&&Oa(t));if(h.translate){if(h.translate!=="none"||h.scale!=="none"||h.rotate!=="none"){s[oa]=(h.translate!=="none"?"translate3d("+(h.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(h.rotate!=="none"?"rotate("+h.rotate+") ":"")+(h.scale!=="none"?"scale("+h.scale.split(" ").join(",")+") ":"")+(h[oa]!=="none"?h[oa]:"")}s.scale=s.rotate=s.translate="none"}I=qa(t,n.svg);if(n.svg){if(n.uncache){x=t.getBBox();l=n.xOrigin-x.x+"px "+(n.yOrigin-x.y)+"px";B=""}else{B=!e&&t.getAttribute("data-svg-origin")}Ma(t,B||l,!!B||n.originIsAbsolute,n.smooth!==false,I)}O=n.xOrigin||0;T=n.yOrigin||0;if(I!==Ba){R=I[0];_=I[1];C=I[2];k=I[3];u=N=I[4];d=A=I[5];if(I.length===6){c=Math.sqrt(R*R+_*_);v=Math.sqrt(k*k+C*C);p=R||_?Vo(_,R)*zo:0;b=C||k?Vo(C,k)*zo+p:0;b&&(v*=Math.abs(Math.cos(b*Po)));if(n.svg){u-=O-(O*R+T*C);d-=T-(O*_+T*k)}}else{P=I[6];L=I[7];U=I[8];q=I[9];M=I[10];z=I[11];u=I[12];d=I[13];f=I[14];S=Vo(P,M);m=S*zo;if(S){E=Math.cos(-S);D=Math.sin(-S);B=N*E+U*D;x=A*E+q*D;F=P*E+M*D;U=N*-D+U*E;q=A*-D+q*E;M=P*-D+M*E;z=L*-D+z*E;N=B;A=x;P=F}S=Vo(-C,M);g=S*zo;if(S){E=Math.cos(-S);D=Math.sin(-S);B=R*E-U*D;x=_*E-q*D;F=C*E-M*D;z=k*D+z*E;R=B;_=x;C=F}S=Vo(_,R);p=S*zo;if(S){E=Math.cos(S);D=Math.sin(S);B=R*E+_*D;x=N*E+A*D;_=_*E-R*D;A=A*E-N*D;R=B;N=x}if(m&&Math.abs(m)+Math.abs(p)>359.9){m=p=0;g=180-g}c=Qn(Math.sqrt(R*R+_*_+C*C));v=Qn(Math.sqrt(A*A+P*P));S=Vo(N,A);b=Math.abs(S)>2e-4?S*zo:0;w=z?1/(z<0?-z:z):0}if(n.svg){B=t.getAttribute("transform");n.forceCSS=t.setAttribute("transform","")||!Fa(va(t,oa));B&&t.setAttribute("transform",B)}}if(Math.abs(b)>90&&Math.abs(b)<270){if(r){c*=-1;b+=p<=0?180:-180;p+=p<=0?180:-180}else{v*=-1;b+=b<=0?180:-180}}e=e||n.uncache;n.x=u-((n.xPercent=u&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-u)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+o;n.y=d-((n.yPercent=d&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-d)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+o;n.z=f+o;n.scaleX=Qn(c);n.scaleY=Qn(v);n.rotation=Qn(p)+a;n.rotationX=Qn(m)+a;n.rotationY=Qn(g)+a;n.skewX=b+a;n.skewY=y+a;n.transformPerspective=w+o;if(n.zOrigin=parseFloat(l.split(" ")[2])||!e&&n.zOrigin||0){s[aa]=za(l)}n.xOffset=n.yOffset=0;n.force3D=Ge.force3D;n.renderTransform=n.svg?Ha:fa?Wa:Va;n.uncache=0;return n},za=Pa=Va=ja="0deg",Xa="0px",Ga=") ",Wa=Ha=Ya=Ja=Qa=Jn("padding,margin,Width,Radius",();var Ka={name:"css",register:ga,targetTest:init:function i(t,e,n,s,r){var o=this._props,a=t.style,h=n.vars.startAt,l,u,d,f,c,v,p,m,g,b,y,w,O,T,I,S;xo||ga();this.styles=this.styles||da(t);S=this.styles.props;this.tween=n;for(p in e){if(p==="autoRound"){continue}u=e[p];if(Pn[p]&&Vr(p,e,n,s,t,r)){continue}c=typeof u;v=Aa[p];if(c==="function"){u=u.call(n,s,t,r);c=typeof u}if(c==="string"&&~u.indexOf("random(")){u=er(u)}if(v){v(this,t,p,u,n)&&(I=1)}else if(p.substr(0,2)==="--"){l=(getComputedStyle(t).getPropertyValue(p)+"").trim();u+="";gr.lastIndex=0;if(!gr.test(l)){m=Ms(l);g=Ms(u)}g?m!==g&&(l=Da(t,p,l,g)+g):m&&(u+=m);this.add(a,"setProperty",l,u,s,r,0,0,p);o.push(p);S.push(p,0,a[p])}else if(c!=="undefined"){if(h&&p in h){l=typeof h[p]==="function"?h[p].call(n,s,t,r):h[p];rn(l)&&~l.indexOf("random(")&&(l=er(l));Ms(l+"")||l==="auto"||(l+=Ge.units[p]||Ms(Ra(t,p))||"");(l+"").charAt(1)==="="&&(l=Ra(t,p))}else{l=Ra(t,p)}f=parseFloat(l);b=c==="string"&&u.charAt(1)==="="&&u.substr(0,2);b&&(u=u.substr(2));d=parseFloat(u);if(p in Ho){if(p==="autoAlpha"){if(f===1&&Ra(t,"visibility")==="hidden"&&d){f=0}S.push("visibility",0,a.visibility);Ia(this,a,"visibility",f?"inherit":"hidden",d?"inherit":"hidden",!d)}if(p!=="scale"&&p!=="transform"){p=Ho[p];~p.indexOf(",")&&(p=p.split(",")[0])}}y=p in Lo;if(y){this.styles.save(p);if(!w){O=t._gsap;O.renderTransform&&!e.parseTransform||La(t,e.parseTransform);T=e.smoothOrigin!==false&&O.smooth;w=this._pt=new co(this._pt,a,oa,0,1,O.renderTransform,O,0,-1);w.dep=1}if(p==="scale"){this._pt=new co(this._pt,O,"scaleY",O.scaleY,(b?Zn(O.scaleY,b+d):d)-O.scaleY||0,Yo);this._pt.u=0;o.push("scaleY",p);p+="X"}else if(p==="transformOrigin"){S.push(aa,0,a[aa]);u=ka(u);if(O.svg){Ma(t,u,0,T,0,this)}else{g=parseFloat(u.split(" ")[2])||0;g!==O.zOrigin&&Ia(this,O,"zOrigin",O.zOrigin,g);Ia(this,a,p,za(l),za(u))}continue}else if(p==="svgOrigin"){Ma(t,u,1,T,0,this);continue}else if(p in xa){Ya(this,O,p,f,b?Zn(f,b+u):u);continue}else if(p==="smoothOrigin"){Ia(this,O,"smooth",O.smooth,u);continue}else if(p==="force3D"){O[p]=u;continue}else if(p==="transform"){Qa(this,u,t);continue}}else if(!(p in a)){p=ma(p)||p}if(y||(d||d===0)&&(f||f===0)&&!Wo.test(u)&&p in a){m=(l+"").substr((f+"").length);d||(d=0);g=Ms(u)||(p in Ge.units?Ge.units[p]:m);m!==g&&(f=Da(t,p,l,g));this._pt=new co(this._pt,y?O:a,p,f,(b?Zn(f,b+d):d)-f,!y&&(g==="px"||p==="zIndex")&&e.autoRound!==false?Ko:Yo);this._pt.u=g||0;if(m!==g&&g!=="%"){this._pt.b=l;this._pt.r=Qo}}else if(!(p in a)){if(p in t){this.add(t,p,l||t[p],b?b+u:u,s,r)}else if(p!=="parseTransform"){kn(p,u);continue}}else{_a.call(this,t,p,l,b?b+u:u)}y||(p in a?S.push(p,0,a[p]):S.push(p,1,l||t[p]));o.push(p)}}I&&fo(this)},render:get:Ra,aliases:Ho,getSetter:core:{_removeProperty:Ta,_getMatrix:qa}};Ro.utils.checkPrefix=ma;Ro.core.getStyleSaver=da;(("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Jn("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",();Ro.registerPlugin(Ka);var Za=Ro.registerPlugin(Ka)||Ro;var $a=function(i){var t;{this.canvas=document.createElement("canvas"),this.canvas.style.setProperty("opacity",0),document.body.appendChild(this.canvas);t=i}this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=t.width,this.height=this.canvas.height=t.height,this.context.drawImage(t,0,0,this.width,this.height)};$a.prototype.clear=$a.prototype.update=$a.prototype.getPixelCount=$a.prototype.getImageData=$a.prototype.removeCanvas=var ih=function(){};if(ih.prototype.getColor=function(i,t,e,n){return!0!==t&&!1!==t||(e=t,t=void 0),this.getPalette(i,5,t,e,n)[0]},ih.prototype.getPalette=function(i,t,e,n,s){void 0===t&&(t=10),void 0===e&&(e=10),void 0===s&&(s=!0);var r,o=new $a(i);try{var a=o.getImageData().data,h=o.getPixelCount();r=this.getPaletteFromPixels(a,h,t,e,n,s)}catch(i){}return o.removeCanvas(),r},ih.prototype.getPaletteFromPixels=function(i,t,e,n,s,r){for(var o,a,h,l,u=[],d=0;d<t;d+=n)a=i[(o=4*d)+0],h=i[o+1],l=i[o+2],i[o+3]>=125&&((a>235&&h>235&&l>235||!0===s)&&(a>255&&h>255&&l>255||!0!==s)||(a<20&&h<20&&l<20||!0===r)&&(a<0&&h<0&&l<0||!0!==r)||u.push([a,h,l]));return eh.quantize(u,e).palette()},!th)var th={map:naturalOrder:sum:max:;var eh=function(){var i=5,t=8-i,e=1e3,n=.75;n o.prototype={volume:count:function(i){var t=this.histo;if(!this._count_set||i){var e,n,r,o=0;for(e=this.r1;e<=this.r2;e++)for(n=this.g1;n<=this.g2;n++)for(r=this.b1;r<=this.b2;r++){o+=t[s(e,n,r)]||0}this._count=o,this._count_set=!0}return this._count},copy:avg:function(t){var e=this.histo;if(!this._avg||t){var n,r,o,a,h=0,l=1<<8-i,u=0,d=0,f=0;for(r=this.r1;r<=this.r2;r++)for(o=this.g1;o<=this.g2;o++)for(a=this.b1;a<=this.b2;a++)h+=n=e[s(r,o,a)]||0,u+=n*(r+.5)*l,d+=n*(o+.5)*l,f+=n*(a+.5)*l;this._avg=h?[~~(u/h),~~(d/h),~~(f/h)]:[~~(l*(this.r1+this.r2+1)/2),~~(l*(this.g1+this.g2+1)/2),~~(l*(this.b1+this.b2+1)/2)]}return this._avg},contains:,a.prototype={push:palette:size:map:nearest:forcebw:,{quantize:function(l,u){if(!l.length||u<2||u>256)return new a;var d=function(e){var n,r,o,a,h=new Array(1<<3*i);return e.forEach((),h}(l);d.forEach((function(){}));var f=function(i,e){var n,s,r,a=1e6,h=0,l=1e6,u=0,d=1e6,f=0;return i.forEach((),new o(a,h,l,u,d,f,e)}(l,d),c=new r(();function v(i,t){for(var n,s=1,r=0;r<e;)if((n=i.pop()).count()){var o=h(d,n),a=o[0],l=o[1];if(!a)return;if(i.push(a),l&&(i.push(l),s++),s>=t)return;if(r++>e)return}else i.push(n),r++}c.push(f),v(c,n*u);for(var p=new r(();c.size();)p.push(c.pop());v(p,u-p.size());for(var m=new a;p.size();)m.push(p.pop());return m}}}();"undefined"!=typeof module&&module.exports&&(module.exports=ih);String.prototype.toCamelCase=function(){return String(this).trim().split(" ").map((function(i){return i.length>0?i[0].toUpperCase()+i.substr(1,i.length).trim():""})).join(" ")};var nh=function(){function i(i){this.root="https://tags.qortex.ai";this.fontCount=0;this.fontsLoaded=0;this.assetCatapultXBug=this.root+"/assets/inserts/shared/common_images/CatapultX-Bug.png";this.assetCatapultXBugFlip=this.root+"/assets/inserts/shared/common_images/CatapultX-BugFlip.png";this.assetCatapultXBugFlipWing=this.root+"/assets/inserts/shared/common_images/CatapultX-BugFlip-Wing.png";this.assetGenericBug=this.root+"/assets/inserts/shared/common_images/Generic-Bug.png";this.assetGenericBugFlip=this.root+"/assets/inserts/shared/common_images/Generic-BugFlip.png";this.assetGenericBugFlipWing=this.root+"/assets/inserts/shared/common_images/Generic-BugFlip-Wing.png";this.assetOutbrainBug=this.root+"/assets/inserts/shared/common_images/Outbrain-Bug.png";this.assetOutbrainBugFlip=this.root+"/assets/inserts/shared/common_images/Outbrain-BugFlip.png";this.assetOutbrainBugFlipWing=this.root+"/assets/inserts/shared/common_images/Outbrain-BugFlip-Wing.png";this.assetAdChoicesBug=this.root+"/assets/inserts/shared/common_images/AdChoices-Bug.png";this.assetAdChoicesBugFlip=this.root+"/assets/inserts/shared/common_images/AdChoices-BugFlip.png";this.assetAdChoicesBugFlipWing=this.root+"/assets/inserts/shared/common_images/AdChoices-BugFlip-Wing.png";this.assetBrainlyBug=this.root+"/assets/inserts/shared/common_images/Brainly-Bug.png";this.assetBrainlyBugFlip=this.root+"/assets/inserts/shared/common_images/Brainly-BugFlip.png";this.assetBrainlyBugFlipWing=this.root+"/assets/inserts/shared/common_images/Brainly-BugFlip-Wing.png";this.firstAnimationTimeDelay=1;this.insertsPaused=false;this.logoWidth=80;this.isMobile=false;this.currentBidIDs=[];this.isLocal=false;this.currentInserts={};this.preventRightClickMenu=true;this.overlayCollapseTimeDelay=15;this.destroyTimeDelay=30;this.usedTrackersList=[];this.allowCloseDelaySeconds=4;this.colorThief=new ih;this.boundButtonClick=this.buttonClick.bind(this);this.boundButtonOver=this.buttonOver.bind(this);this.boundButtonOut=this.buttonOut.bind(this);this.boundButtonDown=this.buttonDown.bind(this);this.boundButtonUp=this.buttonUp.bind(this);this.boundPreventMenu=this.preventMenu.bind(this);this.boundEndInsert=this.endInsert.bind(this);this.boundOverlayCommunication=this.overlayCommunicationEvent.bind(this);this.colorStepDown=function(i,t){return __spreadArray([],i,true).map((function(i){return i>t?i-t:0}))};this.colorStepUp=function(i,t){return __spreadArray([],i,true).map((function(i){return i<255-t?i+t:255}))};this.colorStepDownProportional=function(i,t){return __spreadArray([],i,true).map((function(i){return i-i*t/100>0?Math.floor(i-i*t/100):0}))};this.colorStepUpProportional=function(i,t){return __spreadArray([],i,true).map((function(i){return i+i*t/100<255?Math.ceil(i+i*t/100):255}))};this.rgbToHex=function(i,t,e){return"#"+[i,t,e].map((function(i){var t=i.toString(16);return t.length===1?"0"+t:t})).join("")};if(!Ae(i)){this.lm=i}else{i=new Ce}this.subloadInsertTimer=new Ne((function(){}),0,"Show Subloaded Insert Timer",this.lm,d.INSERT);this.currentDisplayCompleteTimer=new Ne((function(){}),0,"Current Display Completed Timer",this.lm,d.INSERT);this.resumeInsertsTimeout=new Ne((function(){}),0,"Resume Inserts Timeout Timer",this.lm,d.INSERT);this.debugLog("InsertSharedLogic initialized",[d.QA,d.INSERT]);this.isLocal=window.location.href.indexOf("localhost")>=0||window.location.href.indexOf("file:///")>=0||window.location.href.indexOf("127.0.0.1")>=0?true:false}Object.defineProperty(i.prototype,"currentIDs",{get:enumerable:false,configurable:true});i.prototype.getDocument=function(i){return!Ae(this.currentInserts[i])?this.currentInserts[i].insertDocument:null};i.prototype.addInsert=function(i){var t=this;this.currentInserts[i.uniqueid]={insert:i,insertDocument:i.el.shadowRoot,initializedTime:(new Date).getTime(),displayedTime:-1,minVisibilityTime:0,boundDestroy:this.insertDestroyFunction.bind(this,i.uniqueid),timeoutDestroy:this.insertDestroyFunction.bind(this,i.uniqueid,true),isReady:false,impressionTrackers:[],viewabilityTrackers:[],clickthroughTrackers:[],jsTrackers:[],eventTrackers:{},winTracker:null,firstLoad:true,firstCreation:true,fontCount:0,fontsLoaded:0,closeTriggered:false,collapsedByTimer:false,viewabilityValue:0,viewabilityArray:[],viewed:false,isPaused:false,isDestroying:false,resizeTimer:new Ne((function(){t.resizeInsert(i.uniqueid)}),0,"Insert Resize Timer")};var e=i.el.tagName.toLowerCase();this.debugLog(["Initialized & added new insert:\n  Bid id: ".concat(i.acceptedbidid,"\n  Type: ").concat(e,"\n  Unique ID: ").concat(i.uniqueid,"\n  Active ID List: ").concat(this.currentIDs),"Document element: ",i.el],[d.QA,d.INSERT]);this.debugLog("Insert initializing: "+e,d.SELENIUM);if(i.overrides!==undefined&&typeof i.overrides==="string"&&i.overrideParams!=null){var n=JSON.parse(i.overrides);for(var s in n){i.overrideParams[n[s]["key"]]=n[s]["value"]}}if(!Ae(i.overrideParams[D.YOFFSET])&&typeof i.yOffset!=="undefined"){i.yOffset=parseInt(i.overrideParams[D.YOFFSET])}if(this.lm.paramString.indexOf(O.INSERT_ADJUST_POSITION+"=")>=0){i.position=this.lm.paramArray.find(().split("=")[1].toLowerCase()}else if(!Ae(i.overrideParams[D.POSITION])&&typeof i.position!=="undefined"&&typeof i.insertposition!=="undefined"){i.position=i.overrideParams[D.POSITION].toLowerCase()}else if(i.insertposition!=null&&i.insertposition.toLowerCase()!=="def"){i.position=i.insertposition.toLowerCase()}this.debugLog("selected insert position: "+i.position);i.insertOnBottom=i.position.indexOf("b")>=0?true:false;i.insertOnLeft=i.position.indexOf("l")>=0?true:false;if(i.data!==undefined&&typeof i.data==="string"){i.state=JSON.parse(i.data)}else{i.state=i.data}};i.prototype.insertIsReady=function(i){if(!Ae(this.currentInserts[i])){this.currentInserts[i].isReady=true;if(this.currentIDs.length>0&&this.currentInserts[i].insert.isSubloaded){this.showSubloadedInsert(i)}this.attachJSTracker(this.currentInserts[i])}};i.prototype.showSubloadedInsert=function(i,t){var e=this;if(t===void 0){t=false}var n,s;if(!Ae(this.currentInserts[i])){var r=this.currentIDs.find((function(i){return e.currentInserts[i].insert.isSubloaded===false}));var o=this.currentInserts[i];this.debugLog("showSubloadedInsert: ".concat(i," - ACTIVE: ").concat(r," - SUBLOADED: ").concat(i),d.INSERT);if(o!=null&&r!==i){var a=r!=null?this.currentInserts[r].closeTriggered:false;if((!a&&this.currentDisplayCompleteTimer.timeRemainingInSeconds<=0||o.insert.insertConfigs.forceLoad||typeof r==="undefined")&&!this.insertsPaused){if(r!=null){this.debugLog(["Active insert ".concat(r," minimum viewable time requirement met. Show subloaded insert ").concat(i,"."),(s=(n=this.currentInserts)===null||n===void 0?void 0:n[r])===null||s===void 0?void 0:s.insert,o===null||o===void 0?void 0:o.insert],[d.QA,d.INSERT]);var h=this.currentInserts[r].insertDocument.querySelectorAll(".hotspot");h.forEach((function(i){e.debugLog("Disallowing click: "+i.id,d.INSERT);Za.set(i,{display:"none"})}));var l=this.currentInserts[r].boundDestroy;Za.to(this.currentInserts[r].insert.host,{duration:.9,opacity:0,onComplete:l,ease:_o.easeIn})}else{this.debugLog(["Active insert not found. Show subloaded insert ".concat(o,"."),o.insert],[d.QA,d.INSERT])}Za.to(o.insert.host,{duration:.9,opacity:1,ease:Co.easeOut});o.insert.shouldStart=true;o.insert.beginInsert(t);o.insert.isSubloaded=false;this.subloadInsertTimer.cancel();return true}else{var u=this.insertsPaused||a?1e3:this.currentDisplayCompleteTimer.timeRemainingInSeconds*1e3;var f=this.insertsPaused?"Insert display has been suspended.":a?"Active insert has been user closed.":"Active insert has not met visible time requirements";this.debugLog("Show subload insert attempted. ".concat(f," Will try again in ").concat(u/1e3," second(s)."),[d.QA]);this.subloadInsertTimer.reset(u,(function(){e.showSubloadedInsert(i)}))}}else{var c=o===null?" Subloaded insert no longer exists.":" Subloaded insert is already active insert.";this.debugLog("Attempted to show subloaded insert."+c,[d.INSERT,d.QA])}}else{this.debugLog("Subloaded insert "+i+" no longer exists. Will not show subload.",[d.INSERT])}return false};i.prototype.initializeIntersectionObserver=function(i){var t=[];for(var e=0;e<=100;e++){t.push(e/100)}var n=false;var s=new IntersectionObserver((function(t){t.forEach((function(t){i.viewabilityValue=t.intersectionRatio;if(!i.isPaused){if(t.intersectionRatio>=.5&&!n){i.viewabilityTimer.resume();n=true}if(t.intersectionRatio<.5&&n){i.viewabilityTimer.pause();n=false}}else{i.viewabilityTimer.pause()}}))}),{threshold:t});s.observe(i.insertDocument.querySelector("#insertHolder"))};i.prototype.setInsertDisplay=function(i){if(!Ae(this.currentInserts[i])){var t=this.currentInserts[i].insert;this.currentInserts[i].minVisibilityTime=t.insertConfigs.carouselSpeed*1e3;Za.set(t.host,{display:"block"});if(t.isSubloaded){Za.set(t.host,{opacity:0});this.debugLog("Subloaded insert ".concat(t.el.tagName.toLowerCase()," - visibility hidden until ready to show."),d.INSERT);t.shouldStart=false}}};Object.defineProperty(i.prototype,"elementHost",{set:function(i){if(i===null){this._elementHost.removeEventListener(_.EVENT_FROM_OVERLAY,this.boundOverlayCommunication)}else{this._elementHost=i;this._elementHost.addEventListener(_.EVENT_FROM_OVERLAY,this.boundOverlayCommunication,true)}},enumerable:false,configurable:true});i.prototype.removeCurrentInsert=function(i){this.debugLog(["removeCurrentInsert: ".concat(i)],d.INSERT);if(!Ae(this.currentInserts[i])){this.currentInserts[i]=null;delete this.currentInserts[i]}};i.prototype.debugLog=function(i,t){if(t===void 0){t=d.INSERT}this.lm.evaluateDebugLog(i,t)};i.prototype.getStyle=function(i,t,e){if(!Ae(this.currentInserts[i])){var n=this.currentInserts[i].insertDocument;var s=typeof t==="string"?n.getElementById(t):t;if(!Ae(s)){var r=window.getComputedStyle(s);var o=Math.round(parseFloat(r.getPropertyValue(e)));if(isNaN(o)){this.debugLog("getStyle: Not a number: "+(s===null||s===void 0?void 0:s.id)+" - "+e,[d.CXO,d.ERROR])}return isNaN(o)?0:o}else{return null}}};i.prototype.getStyleString=function(i,t,e){if(!Ae(this.currentInserts[i])){var n=this.currentInserts[i].insertDocument;var s=typeof t==="string"?n.getElementById(t):t;if(!Ae(s)){var r=window.getComputedStyle(s);return r.getPropertyValue(e)||""}else{return null}}};i.prototype.loadFont=function(i){var t=this;this.fontCount++;var e=new(FontFace.bind.apply(FontFace,__spreadArray([void 0],i,false)));e.display="swap";e.style="normal";e.weight="normal";e.load().then((function(i){document["fonts"].add(i);t.fontsLoaded++})).catch((function(i){t.debugLog(["Error on font load: ",i],d.ERROR);++t.fontsLoaded}))};i.prototype.loadDefaultFont=function(i){this.loadFont([i,"url('"+this.root+"/assets/inserts/shared/fonts/"+i+".woff2') format('woff2'), url('"+this.root+"/assets/inserts/shared/fonts/"+i+".woff') format('woff')"])};Object.defineProperty(i.prototype,"fontsComplete",{get:function(){var i=this.fontsLoaded>=this.fontCount?true:false;if(i)this.debugLog("All fonts have completed loading.");return i},enumerable:false,configurable:true});i.prototype.insertContainerReady=function(i){var t=false;if(!Ae(this.currentInserts[i])){if(this.getStyle(i,"container","width")>50){t=true}}return t};i.prototype.imagesComplete=function(i){if(!Ae(this.currentInserts[i])){var t=this.currentInserts[i].insertDocument;var e=true;var n=t.querySelectorAll("img");for(var s=0;s<n.length;s++){if(!n[s].classList.contains("impression")&&!n[s].classList.contains("viewability")){if(!n[s].complete){this.debugLog(n[s].src+" not loaded.");e=false;break}else{this.debugLog("".concat(n[s].id,": ").concat(n[s].src," loaded with size ").concat(n[s].naturalWidth,"x").concat(n[s].naturalHeight,"."))}}}if(e)this.debugLog("All images have completed loading.");return e}else{return false}};i.prototype.setFullsizeImagerySizes=function(i){var t=this;if(!Ae(this.currentInserts[i])){var e=this.currentInserts[i].insertDocument;var n=e.querySelector("#fullsizeImageryContainer");var s=!Ae(n)?n.querySelectorAll("img"):[];s.forEach((function(i){t.debugLog("Setting ".concat(i.id,": ").concat(i.src," to size ").concat(i.naturalWidth,"x").concat(i.naturalHeight,"."));Za.set(i,{width:i.naturalWidth+"px",height:i.naturalHeight+"px"})}))}};i.prototype.isFirstLoad=function(i){if(!Ae(this.currentInserts[i])){return this.currentInserts[i].firstLoad}else{return false}};i.prototype.setInsertInitialized=function(i){if(!Ae(this.currentInserts[i])){this.currentInserts[i].insert.insertInitialized=true;var t=this.currentInserts[i].insert.loadContainer;var e=this.currentInserts[i].insert.acceptedbidid;this.dispatchInsertEvent({type:R.INSERT_INITIALIZED,uid:i,div:t,acceptedbidid:e})}};i.prototype.handleLoadComplete=function(i,t){if(!Ae(this.currentInserts[i])){if(t){this.debugLog("AdLightning accepted ad. Banner load successful.",[d.QA,d.CXO])}else{this.debugLog("Prebid renderAd function triggered from overlay. Banner load successful.",[d.QA,d.CXO])}this.currentInserts[i].insert.bannerLoaded=true}};i.prototype.insertAssignData=function(i){var t=this;var e,n,s;if(!Ae(this.currentInserts[i])){this.debugLog("BEGIN PARSE INSERT DATA: "+i);var r=this.currentInserts[i].insert;if(this.currentBidIDs.indexOf(r.acceptedbidid)===-1){this.currentBidIDs.push(r.acceptedbidid);this.dispatchInsertEvent({type:R.INSERT_RENDERED,uid:i});if(r.state.isPrebid){this.debugLog("IS PREBID. CREATED DIV "+r.state.divId,d.IMPORTANT)}}else{this.currentInserts[i].firstCreation=false;this.dispatchInsertEvent({type:R.INSERT_RERENDERED,uid:i});this.debugLog(["NOT the first appearance of insert (bid id = ".concat(r.acceptedbidid,"). Do not attach impression trackers and send re-initialization analytics."),this.currentBidIDs],d.QA)}var o={};try{this.assetTitle=null;this.assetDesc=null;this.assetCta=null;this.assetIcon=null;this.assetMainImg=[];this.ctaLink="";if(!Ae(r.state.assets)){r.state.assets.forEach((function(i){switch(i.id){case 1:t.assetTitle=i;break;case 2:t.assetDesc=i;break;case 3:t.assetCta=i;break;case 4:t.assetIcon=i;break;default:t.assetMainImg.push(i);break}}))}var a=!Ae(this.assetTitle)?this.assetTitle.title:null;var h=!Ae(this.assetDesc)?this.assetDesc.data:null;var l=!Ae(this.assetCta)?this.assetCta.data:null;var u=!Ae(this.assetMainImg)&&this.assetMainImg.length>0?this.assetMainImg[0].img:null;var f=!Ae(this.assetIcon)?this.assetIcon.img:null;if(r.el.tagName.toLowerCase()===S.SQUEEZE_BACK_CUSTOM_FULL_BACKGROUND||r.el.tagName.toLowerCase()===S.CTV_SQUEEZE_BACK_CUSTOM){this.debugLog(["Current image: ",u]);this.debugLog("Finding Custom Squeezeback Image");var c=this.assetMainImg.find((function(i){return i.img.isSqueezeback}));u=!Ae(c)?c.img:u;this.debugLog(["Found image: ",u])}else if(!Ae(u)&&u.isSqueezeback===true&&(r.el.tagName.toLowerCase()!==S.SQUEEZE_BACK_CUSTOM_FULL_BACKGROUND&&r.el.tagName.toLowerCase()!==S.CTV_SQUEEZE_BACK_CUSTOM&&r.el.tagName.toLowerCase()!==S.CTV_SQUEEZE_BACK_CUSTOM_QR)){if(!Ae(f)){u.w=f.w;u.h=f.h;u.url=f.url;this.debugLog("Removing 'custom squeezeback' main image during Non-Custom Squeezeback insert. Replacing with icon.",[d.INSERT,d.QA])}}if(!Ae(r.state.link)){if(!Ae(r.state.link.url)&&r.state.link.url!==""){this.ctaLink=r.state.link.url}else if(!Ae(r.state.link.fallback)&&r.state.link.fallback!==""){this.ctaLink=r.state.link.fallback}}var v="https://www.outbrain.com/what-is/".concat(typeof((e=r.state)===null||e===void 0?void 0:e.akuid)!=="undefined"&&r.state.akuid!==null&&r.state.akuid!=="NOT_FOUND"?"?uid="+r.state.akuid:"");o.clickTag1="javascript:window.open('"+this.ctaLink+"');void 0;";o.clickTag2=r.insertConfigs.isBranded?"javascript:window.open('https://www.qortex.ai/');void 0;":r.insertConfigs.isOutbrain?"javascript:window.open('".concat(v,"');void 0;"):"javascript:void 0;";o.clickTag3="javascript:window.open('".concat(v,"');void 0;");o.clickTag4="javascript:window.open('".concat((n=r.state)===null||n===void 0?void 0:n.privacy,"');void 0;");o.cta_value=l&&l.value?l.value:"LEARN MORE";o.desc_value=h&&h.value?h.value:"";o.title_value=a&&a.text?a.text:"";if(r.insertConfigs.isOutbrain&&o.desc_value!==""){o.title_value+=" - "+o.desc_value;o.desc_value=""}if(!Ae(r.state.video)&&!Ae(r.state.video.companionAd)){o.imageURL=this.root+r.state.video.companionAd;this.currentInserts[i].eventTrackers=r.state.video.trackers}else{o.imageURL=u&&u.url?u.url:this.root+"/assets/inserts/shared/common_images/Default_Icon.png"}o.iconURL=f&&f.url?f.url:this.root+"/assets/inserts/shared/common_images/Default_Icon.png";if(!r.el.tagName.toLowerCase().includes("display")){this.debugLog("CTA: "+o.cta_value,d.QA);this.debugLog("Headline: "+o.title_value,d.QA);this.debugLog("Subheadline: "+o.desc_value,d.QA);this.debugLog(["Primary Image URL: ",o.imageURL],d.QA);this.debugLog(["Icon Image URL: ",o.iconURL],d.QA);this.debugLog(["Clickthrough URL: ",this.ctaLink],d.QA);this.debugLog(["Clickthrough URL: ",this.ctaLink],d.SELENIUM)}else{this.debugLog("Banner data (adm): "+((s=r===null||r===void 0?void 0:r.state)===null||s===void 0?void 0:s.banner),d.QA)}if(r.insertConfigs.isOutbrain){o.logoImageURL=r.insertConfigs.isBranded?this.assetOutbrainBug:this.assetAdChoicesBug}else if(r.insertConfigs.isBrainly){o.logoImageURL=this.assetBrainlyBug}else{o.logoImageURL=r.insertConfigs.isBranded?this.assetCatapultXBug:this.assetGenericBug}o.closeImageURL=this.root+"/assets/inserts/shared/common_images/PNG_CloseButton.png";this.currentInserts[i].clickthroughTrackers=!Ae(r.state.link)&&!Ae(r.state.link.clicktrackers)?r.state.link.clicktrackers:[];this.currentInserts[i].jsTrackers=!Ae(r.state.link)&&!Ae(r.state.link.jstrackers)?r.state.link.jstrackers:[];if(this.currentInserts[i].jsTrackers.length===0){this.currentInserts[i].jsTrackers=!Ae(r.state.jstracker)?[r.state.jstracker]:[]}this.currentInserts[i].impressionTrackers=!Ae(r.state.link)&&!Ae(r.state.link.imptrackers)?r.state.link.imptrackers:[];this.currentInserts[i].viewabilityTrackers=!Ae(r.state.viewabilityTrackers)?r.state.viewabilityTrackers:[];this.currentInserts[i].winTracker=!Ae(r.state.link)&&!Ae(r.state.link.wintracker)?r.state.link.wintracker:null;this.attachWinTracker(this.currentInserts[i])}catch(t){this.debugLog("Error at insertAssignData: "+t,[d.ERROR]);this.sendAnalytics(z.ERROR_ASSIGNDATA,i)}return o}return null};i.prototype.secondsSinceInitialized=function(i){if(!Ae(this.currentInserts[i])){var t=this.currentInserts[i].initializedTime;var e=(new Date).getTime();return(e-t)/1e3}};i.prototype.resetInitializedTime=function(i){if(!Ae(this.currentInserts[i])){this.currentInserts[i].initializedTime=(new Date).getTime()}};i.prototype.insertDisplayStarted=function(i){if(!Ae(this.currentInserts[i])){this.currentVisibleStart=(new Date).getTime();this.currentInserts[i].displayedTime=this.currentVisibleStart;this.currentInserts[i].closeTriggered=false;if(this.currentInserts[i].firstLoad){if(this.usedTrackersList.indexOf(i)===-1){this.dispatchInsertEvent({type:R.INSERT_IMPRESSION,uid:i,insertViewability:this.currentInserts[i].viewabilityValue});this.usedTrackersList.push(i)}else{this.debugLog("Impression event already triggered for insert ".concat(i,". Will not fire a new impression event."),d.QA)}this.attachImpressionTrackers(this.currentInserts[i]);this.attachViewabilityTrackers(this.currentInserts[i]);this.dispatchInsertEvent({type:R.INSERT_DISPLAY_STARTED,uid:i,insertViewability:this.currentInserts[i].viewabilityValue});this.setInsertViewabilityTimer(i);this.setInsertLifetimeTimer(i);this.setInsertCollapseTimer(i);this.initializeIntersectionObserver(this.currentInserts[i]);this.currentInserts[i].firstLoad=false;this.currentDisplayCompleteTimer.reset(this.currentInserts[i].minVisibilityTime)}else{this.debugLog("Insert has been re-opened. Cancel delayed destroy.",[d.QA,d.INSERT])}if(this.currentInserts[i].firstCreation){this.currentInserts[i].insert.allowCloseDelay=this.allowCloseDelaySeconds;if(!Ae(this.currentInserts[i].insert.isADX)&&this.currentInserts[i].insert.isADX){this.sendAnalytics(z.ADX_DISPLAYED,i)}else{this.sendAnalytics(z.DISPLAYED,i)}this.currentInserts[i].firstCreation=false}else{this.sendAnalytics(z.REDISPLAYED,i)}var t=this.currentInserts[i].timeoutDestroy;Za.killTweensOf(t)}};i.prototype.insertCollapsedByTimer=function(i){this.endInsert(i);this.currentInserts[i].collapsedByTimer=true;this.debugLog("Insert ".concat(i," has been closed by its collapseTimer and will not re-initialize unless manually opened."),[d.QA,d.INSERT])};i.prototype.requestOSDRefresh=function(i,t){if(!Ae(this.currentInserts[i])){this.dispatchInsertEvent({type:R.INSERT_REQUEST_OSD_REFRESH,uid:i,div:t})}};i.prototype.setInsertCollapseTimer=function(i){var t=this;if(!Ae(this.currentInserts[i])){var e=this.secondsSinceInitialized(i);this.debugLog(e+" seconds elapsed between insert attached to page and insert animation start.");var n=this.currentInserts[i].insert;var s=n.insertConfigs.duration-e;var r=s>5?s:this.overlayCollapseTimeDelay;this.debugLog("Setting collapse insert timer for insert ".concat(i," to close in ").concat(r," seconds."));this.currentInserts[i].collapseTimer=this.createTimeout((function(){t.insertCollapsedByTimer(i)}),r,"CollapseTimeout_"+i)}};i.prototype.setInsertViewabilityTimer=function(i){var t=this;if(!Ae(this.currentInserts[i])){this.currentInserts[i].viewabilityTimer=new Ne((function(){}),0,"Insert Viewability Timer");this.currentInserts[i].viewabilityTimer.resetInterval(500,1e4,(function(){var e;if(!Ae((e=t.currentInserts[i])===null||e===void 0?void 0:e.viewabilityTimer)){if(t.currentInserts[i].viewabilityTimer.getTotalElapsedTime()>=2e3&&t.currentInserts[i].viewed===false){t.dispatchInsertEvent({type:R.INSERT_VIEWED_EVENT,uid:i,insertViewability:t.currentInserts[i].viewabilityValue});t.currentInserts[i].viewed=true}t.currentInserts[i].viewabilityArray.push(t.currentInserts[i].viewabilityValue)}}));this.currentInserts[i].viewabilityTimer.pause()}};i.prototype.setInsertLifetimeTimer=function(i){if(!Ae(this.currentInserts[i])){this.currentInserts[i].insertTimer=new Ne((function(){}),1e6,"Insert Lifetime Timer")}};i.prototype.clearInsertCollapseTimer=function(i){var t;if(!Ae(this.currentInserts[i])){(t=this.currentInserts[i].collapseTimer)===null||t===void 0?void 0:t.cancel();this.currentInserts[i].collapsedByTimer=false;this.debugLog("Cancelling collapse timer for insert ".concat(i))}};i.prototype.createTimeout=function(i,t,e){if(e===void 0){e="CustomInsertLogicTimeout"}return new Ne(i,t*1e3,e,this.lm,d.QA)};i.prototype.attachVideoEventListeners=function(i,t){var e=this;if(!Ae(this.currentInserts[i])){var n=this.currentInserts[i];var s=n.eventTrackers;this.debugLog(["Video event trackers: ",n.eventTrackers],d.INSERT);t.trackerValues={};var r=t.trackerValues;r.firstQuartile=false;r.midpoint=false;r.thirdQuartile=false;r.completed=false;t.addEventListener("timeupdate",(function(){var i=t.currentTime/t.duration;e.debugLog("Video completion percent: "+i,[d.INSERT]);if(i>.75&&!r.thirdQuartile){r.thirdQuartile=true;e.debugLog("Video completes third quartile: "+i,[d.IMPORTANT,d.QA,d.INSERT]);e.attachEventTracker(n.insertDocument,s,"thirdQuartile")}else if(i>.5&&!r.midpoint){r.midpoint=true;e.debugLog("Video completes midpoint: "+i,[d.IMPORTANT,d.QA,d.INSERT]);e.attachEventTracker(n.insertDocument,s,"midpoint")}else if(i>.25&&!r.firstQuartile){r.firstQuartile=true;e.debugLog("Video completes first quartile: "+i,[d.IMPORTANT,d.QA,d.INSERT]);e.attachEventTracker(n.insertDocument,s,"firstQuartile")}}));t.addEventListener("ended",(function(){if(!r.completed){r.complete=true;e.debugLog("Video complete: "+t.currentTime+" = "+t.duration,[d.IMPORTANT,d.QA,d.INSERT]);e.attachEventTracker(n.insertDocument,s,"complete")}}));t.addEventListener("volumechange",(function(){e.debugLog("Video audio toggle: is muted? "+t.muted,[d.IMPORTANT,d.QA,d.INSERT]);if(t.muted){e.attachEventTracker(n.insertDocument,s,"mute")}else{e.attachEventTracker(n.insertDocument,s,"unmute")}}));t.addEventListener("pause",(function(){if(t.currentTime<t.duration){e.debugLog("Video paused.",[d.IMPORTANT,d.QA,d.INSERT]);e.attachEventTracker(n.insertDocument,s,"pause")}}));t.addEventListener("play",(function(){if(t.currentTime>.1){e.debugLog("Video resume.",[d.IMPORTANT,d.QA,d.INSERT]);e.attachEventTracker(n.insertDocument,s,"resume")}else{e.debugLog("Video play.",[d.IMPORTANT,d.QA,d.INSERT])}}))}};i.prototype.attachEventTracker=function(i,t,e){var n=this;var s=[];if(Object.keys(t).indexOf(e)!==-1){s=t[e]}if(s.length>0){var r=["Event trackers added. "];var o=(new Date).getTime();var a=function(){var t=new Image;t.width=1;t.height=1;t.className="impression imageData";t.src=s[h];i.appendChild(t);t.addEventListener("load",(function(){n.debugLog(["Event tracker (".concat(e,") response 'load' in ").concat((new Date).getTime()-o,"ms: "),t.src],[d.INSERT,d.QA])}));t.addEventListener("error",(function(i){n.debugLog(["Event tracker (".concat(e,") response 'error' in  ").concat((new Date).getTime()-o,"ms: : "),t.src,i],[d.INSERT,d.QA])}));r.push("Attached: "+t.src)};for(var h=0;h<s.length;h++){a()}this.debugLog(r,[d.INSERT,d.QA]);this.debugLog("Event trackers added. ",d.SELENIUM)}else{this.debugLog(["Insert displayed, but no impression trackers available to load."],[d.INSERT,d.QA]);this.debugLog(["Insert displayed, but no impression trackers available to load."],[d.SELENIUM])}};i.prototype.attachViewabilityTrackers=function(i){var t=this;var e=i.viewabilityTrackers;if(e.length>0){var n=["Insert displayed. viewability trackers - "];var s=function(){if(r.usedTrackersList.indexOf(e[o])===-1){try{var s;if(e[o].indexOf("http")===0){s=document.createElement("img");s.width=1;s.height=1;s.className="impression imageData";s.src=e[o]}else{var a=(new DOMParser).parseFromString(e[o],"text/html");var h=a.head.firstElementChild;s=document.createElement(h.tagName);var l=h.getAttributeNames();l.forEach((function(i){if(!i.includes("&")){s.setAttribute(i,h.getAttribute(i))}else{t.debugLog("Viewability tracker attribute is invalid: "+i,[d.INSERT,d.QA,d.IMPORTANT])}}))}i.insertDocument.appendChild(s);n.push("Attached: "+e[o]);r.usedTrackersList.push(e[o])}catch(i){r.debugLog(["Exception Caught trying to load Viewability tracker - "+e[o],i],[d.INSERT,d.QA])}}else{n.push("Viewability tracker not attached (already used): "+e[o])}};var r=this;for(var o=0;o<e.length;o++){s()}this.debugLog(n,[d.INSERT,d.QA]);this.debugLog("Insert displayed. viewability trackers loaded ",d.SELENIUM)}else{this.debugLog(["Insert displayed, but no viewability trackers available to load."],[d.INSERT,d.QA]);this.debugLog(["Insert displayed, but no viewability trackers available to load."],[d.SELENIUM])}};i.prototype.attachImpressionTrackers=function(i){var t=this;var e=i.impressionTrackers;if(e.length>0){var n=["Insert displayed. Impression trackers - "];var s=(new Date).getTime();var r=function(){if(o.usedTrackersList.indexOf(e[a])===-1){var r=new Image;r.width=1;r.height=1;r.className="impression imageData";r.src=e[a];i.insertDocument.appendChild(r);r.addEventListener("load",(function(){t.debugLog(["Impression tracker response 'load' in ".concat((new Date).getTime()-s,"ms: "),r.src],[d.INSERT,d.QA])}));r.addEventListener("error",(function(i){t.debugLog(["Impression tracker response 'error' in  ".concat((new Date).getTime()-s,"ms: : "),r.src,i],[d.INSERT,d.QA])}));n.push("Attached: "+r.src);o.usedTrackersList.push(e[a])}else{n.push("Impression tracker not attached (already used): "+e[a])}};var o=this;for(var a=0;a<e.length;a++){r()}this.debugLog(n,[d.INSERT,d.QA]);this.debugLog("Insert displayed. Impression trackers loaded",d.SELENIUM)}else{this.debugLog(["Insert displayed, but no impression trackers available to load."],[d.INSERT,d.QA]);this.debugLog(["Insert displayed, but no impression trackers available to load."],[d.SELENIUM])}};i.prototype.attachJSTracker=function(i){var t=i.jsTrackers;if(t.length>0){var e=["Insert displayed. JS trackers - "];for(var n=0;n<t.length;n++){if(this.usedTrackersList.indexOf(t[n])===-1){var s=document.createElement("script");s.setAttribute("async","");s.type="text/javascript";var r=t[n].split("src=");var o=[];if(r.length>1){o=r[1].split("'").length>1?r[1].split("'"):r[1].split('"')}if(o.length>1){s.src=o[1].replace(/\\|"/g,"")}else{s.src=t[n]}i.insertDocument.appendChild(s);e.push("Attached: "+s.src);this.usedTrackersList.push(t[n])}else{e.push("JS tracker not attached (already used): "+t[n])}}this.debugLog(e,[d.INSERT,d.QA]);this.debugLog("Insert displayed. JS trackers loaded",d.SELENIUM)}else{this.debugLog(["Insert displayed, but no JS trackers available to load."],[d.INSERT,d.QA]);this.debugLog(["Insert displayed, but no JS trackers available to load."],[d.SELENIUM])}};i.prototype.attachWinTracker=function(i){var t=this;var e=i.winTracker;if(e!==null&&e!==""){var n=["Insert loaded. Win tracker - "];var s=(new Date).getTime();if(this.usedTrackersList.indexOf(e)===-1){var r=new Image;r.width=1;r.height=1;r.className="impression imageData";r.src=e;i.insertDocument.appendChild(r);r.addEventListener("load",(function(){t.debugLog(["Win tracker response 'load' in ".concat((new Date).getTime()-s,"ms: "),r.src],[d.CXO,d.QA])}));r.addEventListener("error",(function(i){t.debugLog(["Win tracker response 'error' in ".concat((new Date).getTime()-s,"ms: : "),r.src,i],[d.CXO,d.QA])}));n.push("Attached: "+r.src);this.usedTrackersList.push(e)}else{n.push("Win tracker not attached (already used): "+e)}this.debugLog(n,[d.INSERT,d.QA]);this.debugLog("Insert loaded. Win tracker loaded",d.SELENIUM)}else{this.debugLog(["Insert rendered, but no win tracker available to load."],[d.INSERT,d.QA]);this.debugLog(["Insert rendered, but no win tracker available to load."],[d.SELENIUM])}};i.prototype.attachClickthroughTrackers=function(i){var t=this;if(i.clickthroughTrackers.length>0){var e=["Clickthrough trackers attached:"];var n=(new Date).getTime();var s=function(){var s=new Image;s.width=1;s.height=1;s.className="impression imageData";s.src=i.clickthroughTrackers[r];i.insertDocument.appendChild(s);s.addEventListener("load",(function(){t.debugLog(["Clickthrough tracker response 'load' in ".concat((new Date).getTime()-n,"ms: "),s.src],[d.INSERT,d.QA])}));s.addEventListener("error",(function(i){t.debugLog(["Clickthrough tracker response 'error' in ".concat((new Date).getTime()-n,"ms: "),s.src,i],[d.INSERT,d.QA])}));e.push(s.src)};for(var r=0;r<i.clickthroughTrackers.length;r++){s()}this.debugLog(e,[d.INSERT,d.QA]);this.debugLog("Insert clickthrough triggered. Clickthrough trackers attached",d.SELENIUM)}else{this.debugLog(["No clickthrough trackers available to load."],[d.INSERT,d.QA]);this.debugLog(["Insert clickthrough triggered, but no clickthrough trackers available to load."],[d.SELENIUM])}};i.prototype.insertClosed=function(i){if(!Ae(this.currentInserts[i])&&!this.insertsPaused){var t=!this.currentInserts[i].insert.state.destroyInsertOnClose?this.destroyTimeDelay:0;this.debugLog(["Insert minimized. Insert will be destroyed in "+t+" seconds."],[d.QA,d.INSERT]);this.debugLog(["Insert minimized"],[d.SELENIUM]);this.dispatchInsertEvent({type:R.INSERT_CLOSED,uid:i,insertViewability:this.currentInserts[i].viewabilityValue});var e=this.currentInserts[i].timeoutDestroy;Za.delayedCall(t,e)}};i.prototype.getVideoBounds=function(i){if(!Ae(this.currentInserts[i])){var t=this.currentInserts[i].insertDocument;var e=t.getElementById("container");var n=!Ae(e)?e.getBoundingClientRect():null;return n}};i.prototype.createScaledImage=function(i,t,e,n,s,r){if(r===void 0){r=false}if(!Ae(this.currentInserts[i])){var o=this.currentInserts[i].insertDocument;var a=o.getElementById(n);var h=typeof t==="string"?o.getElementById(t):t;var l=typeof e==="string"?o.getElementById(e):e;var u=h.naturalHeight/h.naturalWidth;var d=s*u;if(Ae(a)){a=document.createElement("canvas");a.width=Math.floor(s*2);a.height=Math.floor(d*2);a.id=n;l.appendChild(a)}var f=a.getContext("2d");f.clearRect(0,0,a.width,a.height);f.globalCompositeOperation="source-out";f.drawImage(h,this.getStyle(i,h,"left"),this.getStyle(i,h,"top"),a.width,a.height);var c=r?2:1;var v=r?0:1;Za.set(a,{width:s*c+"px",height:d*c+"px",opacity:v});return a}};i.prototype.createLogoCanvas=function(i){if(!Ae(this.currentInserts[i])){var t=this.currentInserts[i].insertDocument;var e=t.getElementById("cxLogoImage");var n=t.getElementById("insertLogoClickthroughHolder");var s=this.logoWidth;var r=this.createScaledImage(i,e,n,"cxLogo",s);this.debugLog(["Created logo: ",r],d.INSERT);return r}return null};i.prototype.createPrivacyLinkout=function(i,t){if(!Ae(this.currentInserts[i])){if(!Ae(t)){var e=document.createElement("div");e.id="privacyPolicy";e.innerHTML="PRIVACY";e.setAttribute("style",'position:absolute; top:0px; left:0px; margin:0px; padding:5px 10px; font-size:12px; font-family: Frutiger, "Frutiger Linotype", Univers, Calibri, "Gill Sans", "Gill Sans MT", "Myriad Pro", Myriad, "DejaVu Sans Condensed", "Liberation Sans", "Nimbus Sans L", Tahoma, Geneva, "Helvetica Neue", Helvetica, Arial, sans-serif; background:rgba(0,0,0,.6); opacity:1; z-index:10100; color:rgb(255,255,255)');t.appendChild(e);this.debugLog(["createPrivacyLinkout - Adding privacy policy button to container ",t]);return e}}return null};i.prototype.createLoader=function(i,t){var e=this;if(!Ae(this.currentInserts[i])){if(!Ae(t)){var n=this.currentInserts[i].insertDocument;var s=300;var r=50;var o=14;var a=(s-r)*.5;var h=.1;var l=o*h;var u=360/o;var d={r:251,g:180,b:49};var f={r:90,g:80,b:250};var c=document.createElement("div");c.id="loader";var v=this.getStyle(i,t,"height");var p=v>90?90:v;var m=Math.floor((v-s)*.5);var g=Math.floor((this.getStyle(i,t,"width")-s)*.5);var b=v<=60?1.2:1.75;var y=p/(s*b);c.setAttribute("style","position:absolute; margin:auto; left:".concat(g,"px; top:").concat(m,"px; scale:").concat(y,"; opacity:1; z-index:10; width:").concat(s,"px; height:").concat(s,"px"));for(var w=0;w<o;w++){var O=(u*w-90)*(Math.PI/180);var T=a*Math.cos(O)+a;var I=a*Math.sin(O)+a;var S=document.createElement("div");S.id="circ"+w;var E=(w+1)/o;var D=this.isMobile?E:1;S.setAttribute("style","position:absolute; display:block; opacity:".concat(D,"; background:rgb(").concat(d.r,", ").concat(d.g,", ").concat(d.b,"); width:").concat(r,"px; height:").concat(r,"px; border-radius:").concat(r,"px"));Za.set(S,{x:T,y:I});c.appendChild(S)}var R=true;var _=function(i){if(i===o){i=0}var t=n.getElementById("circ"+i);R=Ae(t)?false:true;if(R&&!e.isMobile){Za.fromTo(t,{background:"rgb(".concat(d.r,",").concat(d.g,",").concat(d.b,")"),scale:0,opacity:1},{scale:1,ease:ko.easeOut.config(1),duration:l*.1});Za.to(t,{background:"rgb(".concat(f.r,",").concat(f.g,",").concat(f.b,")"),ease:_o.easeInOut,delay:l*.25,duration:l*.35});Za.to(t,{opacity:0,scale:.25,ease:_o.easeIn,delay:l*.6,duration:l*.4});Za.delayedCall(h,_,[++i])}};var C=0;var k=function(){C=C>=345?0:C+15;if(R&&e.isMobile){Za.set(c,{rotation:C});Za.delayedCall(.1,k)}};t.appendChild(c);this.debugLog(["createLoader - Adding loader animation to container ",t]);if(!this.isMobile){Za.delayedCall(.1,_,[0])}else{k()}}}};i.prototype.idCheck=function(i){return this.currentIDs.indexOf(i)>=0?true:false};i.prototype.insertIsDestroying=function(i){var t=false;if(this.idCheck(i)){t=this.currentInserts[i].isDestroying}return t};i.prototype.changeImageColor=function(i,t,e,n,s){if(!Ae(this.currentInserts[i])){var r=this.currentInserts[i].insertDocument;var o=r.getElementById(s);var a=r.getElementById(t);var h=this.getStyle(i,a,"width");var l=this.getStyle(i,a,"height");try{if(o==null){o=document.createElement("canvas");o.width=h;o.height=l;o.id=s;r.getElementById(n).appendChild(o)}var u=o.getContext("2d");u.save();u.fillStyle=e;u.fillRect(0,0,o.width,o.height);u.globalCompositeOperation="destination-in";u.drawImage(a,this.getStyle(i,a,"left"),this.getStyle(i,a,"top"));u.restore();Za.set(o,{position:"absolute"})}catch(i){this.debugLog("Error occured on changing element color: "+t.id,[d.INSERT]);return t}return o}};i.prototype.luminance=function(i,t,e){var n=[i,t,e].map(();return n[0]*.2126+n[1]*.7152+n[2]*.0722};i.prototype.contrast=function(i,t){var e=this.luminance(i[0],i[1],i[2]);var n=this.luminance(t[0],t[1],t[2]);var s=Math.max(e,n);var r=Math.min(e,n);return(s+.05)/(r+.05)};i.prototype.getColorPalette=function(i){var t;try{t=this.colorThief.getPalette(i,8,2,false,false)}catch(t){this.debugLog(["Error pulling color data from image",i,t],[d.ERROR,d.INSERT])}t=Ae(t)||t.length===0?[[0,0,0],[255,255,255]]:t;return t};i.prototype.overlayCommunicationEvent=function(i){var t=this;var e,n,s,r,o,a,h,l,u;i.stopPropagation();if(i.detail.type!==_.OVERLAY_RESIZE){this.debugLog("communication from overlay: ".concat(i.detail.type," for insert ").concat(i.detail.uid," on insert list ").concat(this.currentIDs))}switch(i.detail.type){case _.OVERLAY_REQUEST_DESTROY:{if(!Ae(i.detail.uid)){if(this.currentIDs.length===0){this.insertDestroyFunction("empty")}else{this.insertDestroyFunction(i.detail.uid)}}break}case _.OVERLAY_DESTROY_REMAINING_INSERTS:{this.currentIDs.forEach((function(i){t.debugLog("Removing insert ".concat(i," in DESTROY REMAINING INSERTS"),[d.INSERT,d.QA]);t.insertDestroyFunction(i)}));break}case _.OVERLAY_RESIZE:{var f=this.currentIDs;f.forEach((function(i){var e;(e=t.currentInserts[i])===null||e===void 0?void 0:e.resizeTimer.execute()}));break}case _.OVERLAY_PAUSE_INSERTS:{(e=this.resumeInsertsTimeout)===null||e===void 0?void 0:e.cancel();this.currentIDs.forEach((function(i){var e,n,s,r;if(((n=(e=t.currentInserts[i])===null||e===void 0?void 0:e.insert)===null||n===void 0?void 0:n.isSubloaded)===false){var o=t.currentInserts[i];if(typeof(o===null||o===void 0?void 0:o.collapseTimer)!=="undefined"&&o.collapseTimer!==null){t.debugLog("Pausing insert ".concat(i,"."));o.collapseTimer.pause();if(o.insert.el.tagName.toLowerCase().indexOf("squeeze")!==-1){o.insert.endInsert()}t.pauseInsertTimers(i)}}if(typeof((r=(s=t.currentInserts[i])===null||s===void 0?void 0:s.insert)===null||r===void 0?void 0:r.fontComplete)!=="undefined"&&t.currentInserts[i].insert.fontComplete!==null){t.debugLog("Unsetting fontComplete on insert ".concat(i,"."));t.currentInserts[i].insert.fontComplete=false}}));this.currentDisplayCompleteTimer.pause();this.insertsPaused=true;break}case _.OVERLAY_RESUME_INSERTS:{this.resumeInsertsTimeout.reset(250,(function(){t.currentDisplayCompleteTimer.resume();t.insertsPaused=false;var e=t.currentIDs.filter((function(i){return t.currentInserts[i].insert.isSubloaded===false}));var n=t.currentIDs.filter((function(i){return t.currentInserts[i].insert.isSubloaded===true}));var s=false;if(n.length>0){t.debugLog("CX-Wait ended - Trying SUBLOAD on insert: "+n[0],d.INSERT);s=t.showSubloadedInsert(n[0],true)}t.debugLog("CX-Wait ended - Was subload insert triggered on midroll end? (".concat(s,")  - should active insert continue? (").concat(i.detail.continue,")"),d.INSERT);if(!s){e.forEach((function(e){if(e!=null&&i.detail.continue&&typeof t.currentInserts[e].collapseTimer!=="undefined"&&t.currentInserts[e].collapseTimer!==null){t.debugLog("Resuming insert ".concat(e,"."));t.currentInserts[e].collapseTimer.addToRemainingTime(1);t.currentInserts[e].collapseTimer.resume();if(t.currentInserts[e].insert.el.tagName.toLowerCase().indexOf("squeeze")!==-1&&!t.currentInserts[e].closeTriggered&&!t.currentInserts[e].collapsedByTimer){t.currentInserts[e].insert.initializeInsertContent()}t.resumeInsertTimers(e)}}))}}));break}case _.OVERLAY_REFRESH_ACTIVE_OSD:{var c=this.currentIDs.filter((function(i){return t.currentInserts[i].insert.isSubloaded===false}));c.forEach((function(e){var n,s,r,o,a,h,l,u;if(e!=null&&((s=(n=t.currentInserts[e].insert)===null||n===void 0?void 0:n.state)===null||s===void 0?void 0:s.isPrebid)){if(!((r=t.currentInserts[e].insert)===null||r===void 0?void 0:r.insertClosed)){t.debugLog("OVERLAY_REFRESH_ACTIVE_OSD - Refreshing Prebid Carousel - ".concat(e,"."),d.INSERT);t.currentInserts[e].insert.insertReloading=true;(a=(o=t.currentInserts[e].insert).refreshPrebidContainer)===null||a===void 0?void 0:a.call(o)}else if((h=i.detail)===null||h===void 0?void 0:h.forceRefresh){t.debugLog("OVERLAY_REFRESH_ACTIVE_OSD - Prebid carousel refresh requested but insert is closed. ForceRefresh is true. Will re-open insert. - ".concat(e,"."),d.INSERT);t.resetInitializedTime(e);t.currentInserts[e].insert.initializeInsertContent();t.debugLog("OVERLAY_REFRESH_ACTIVE_OSD - Refreshing Prebid Carousel - ".concat(e,"."),d.INSERT);t.currentInserts[e].insert.insertReloading=true;(u=(l=t.currentInserts[e].insert).refreshPrebidContainer)===null||u===void 0?void 0:u.call(l)}else{t.debugLog("OVERLAY_REFRESH_ACTIVE_OSD - Prebid carousel refresh requested but insert is closed. Will not refresh. - ".concat(e,"."),d.INSERT)}}}));break}case _.OVERLAY_RESET_ACTIVE_OSD:{if(!Ae(i.detail.uid)){var v=this.currentInserts[i.detail.uid];if(!Ae(v)){var p=((n=v.insertTimer)===null||n===void 0?void 0:n.getTotalElapsedTime())/1e3||0;var m=((s=v.viewabilityTimer)===null||s===void 0?void 0:s.getTotalElapsedTime())/1e3||0;var g=v.viewabilityArray.length>0?v.viewabilityArray.reduce((function(i,t){return i+t}))/v.viewabilityArray.length:0;(o=(r=v===null||v===void 0?void 0:v.viewabilityTimer)===null||r===void 0?void 0:r.cancel)===null||o===void 0?void 0:o.call(r);(h=(a=v===null||v===void 0?void 0:v.insertTimer)===null||a===void 0?void 0:a.cancel)===null||h===void 0?void 0:h.call(a);(u=(l=v===null||v===void 0?void 0:v.collapseTimer)===null||l===void 0?void 0:l.cancel)===null||u===void 0?void 0:u.call(l);this.dispatchInsertEvent({type:R.INSERT_GPT_RESET,uid:i.detail.uid,insertLifetime:p,insertViewabilityTime:m,insertAverageViewabilityValue:g})}}break}default:{var f=this.currentIDs;for(var b=0;b<f.length;b++){this.currentInserts[f[b]].insert.incomingEvent(i.detail)}break}}};i.prototype.addListeners=function(i){Za.set(i,{cursor:"pointer"});var t=this.boundButtonClick;var e=this.boundButtonOver;var n=this.boundButtonOut;var s=this.boundButtonDown;var r=this.boundButtonUp;var o=this.boundPreventMenu;i.addEventListener("click",t);i.addEventListener("mouseover",e);i.addEventListener("mouseout",n);i.addEventListener("mousedown",s);i.addEventListener("mouseup",r);i.addEventListener("contextmenu",o)};i.prototype.removeListeners=function(i){Za.set(i,{cursor:"default"});i.removeEventListener("click",this.boundButtonClick);i.removeEventListener("mouseover",this.boundButtonOver);i.removeEventListener("mouseout",this.boundButtonOut);i.removeEventListener("mousedown",this.boundButtonDown);i.removeEventListener("mouseup",this.boundButtonUp);i.removeEventListener("contextmenu",this.boundPreventMenu)};i.prototype.buttonDown=function(i){if(i){i.stopPropagation()}};i.prototype.buttonUp=i.prototype.buttonClick=function(i){if(i){i.stopPropagation()}var t=this.currentIDs;var e=i.target||i.srcElement;for(var n=0;n<t.length;n++){var s=this.currentInserts[t[n]].insertDocument;if(this.currentInserts[t[n]].insertDocument.contains(i.target)){var r=this.currentInserts[t[n]].insert;this.debugLog(["Button click event triggered on insert:",this.currentInserts[t[n]].insert],[d.INSERT]);if(typeof r.buttonClick!=="undefined"){this.debugLog("Overriding button click function");r.buttonClick(i)}else{this.debugLog("No overriding button click function: "+t[n]);if(e==s.getElementById("clickthroughHotspot")||e==s.getElementById("clickthroughHotspotHorizontal")||e==s.getElementById("clickthroughHotspotVertical")||e==s.getElementById("clickthroughHotspotRail1")||e==s.getElementById("clickthroughHotspotRail2")){this.nativeClickthrough(t[n])}else if(e==s.getElementById("clickthroughHotspot2")){this.cxLogoClick(t[n])}else if(e==s.getElementById("clickthroughHotspot3")){this.cxOutbrainClick(t[n])}else if(e==s.getElementById("clickthroughHotspot4")){this.privacyClickthrough(t[n])}else if(e==s.getElementById("closeHotspot")){this.closeButtonClick(t[n])}}}}};i.prototype.nativeClickthrough=function(i){if(this.idCheck(i)){var t=this.currentInserts[i].insertDocument;this.debugLog("Insert clickthrough triggered.",[d.QA,d.INSERT]);this.debugLog("Insert clickthrough triggered.",[d.SELENIUM]);this.attachClickthroughTrackers(this.currentInserts[i]);this.endInsert(i);this.sendAnalytics(z.CLICKTHROUGH,i,this.currentInserts[i].viewabilityValue);t.getElementById("container_clickthrough").click()}};i.prototype.bannerClickthrough=function(i){if(this.idCheck(i)){this.debugLog("Banner insert clickthrough detected.",[d.QA,d.INSERT]);this.debugLog("Banner iFrame clickthrough event triggered!",[d.SELENIUM]);this.attachClickthroughTrackers(this.currentInserts[i]);this.endInsert(i);this.sendAnalytics(z.CLICKTHROUGH,i,this.currentInserts[i].viewabilityValue)}};i.prototype.privacyClickthrough=function(i){if(this.idCheck(i)){var t=this.currentInserts[i].insertDocument;this.debugLog("Insert privacy clickthrough triggered.",[d.QA,d.INSERT]);this.debugLog("Insert privacy clickthrough triggered.",[d.SELENIUM]);this.sendAnalytics(z.PRIVACY_CLICKTHROUGH,i,this.currentInserts[i].viewabilityValue);t.getElementById("container_clickthrough4").click()}};i.prototype.cxLogoClick=function(i){if(this.idCheck(i)){var t=this.currentInserts[i].insertDocument;var e=this.currentInserts[i].insert;if(e.insertDisplayed){if(e.insertConfigs.isBrainly){this.debugLog("Brainly X clicked. Closing insert.",[d.QA,d.INSERT]);this.debugLog("Brainly X triggered.",[d.SELENIUM]);this.closeButtonClick(i)}else if(e.insertConfigs.isOutbrain){this.debugLog("Adsense logo clicked. Clickthrough triggered to Outbrain.",[d.QA,d.INSERT]);this.debugLog("Adsense logo clickthrough triggered.",[d.SELENIUM]);this.endInsert(i);this.sendAnalytics(z.OUTBRAIN_CLICKTHROUGH,i,this.currentInserts[i].viewabilityValue);t.getElementById("container_clickthrough2").click()}else{if(e.insertConfigs.isBranded){this.debugLog("CatapultX logo clicked. Clickthrough triggered to CX site.",[d.QA,d.INSERT]);this.debugLog("CatapultX logo clickthrough triggered.",[d.SELENIUM]);this.endInsert(i);this.sendAnalytics(z.LOGO_CLICKTHROUGH,i,this.currentInserts[i].viewabilityValue);t.getElementById("container_clickthrough2").click()}else{this.debugLog("Unbranded logo clicked. No clickthrough will be initiated.",[d.QA,d.INSERT])}}}else{this.debugLog("CatapultX logo clicked. Closed insert will re-open.",[d.QA,d.INSERT]);this.debugLog("Minimized CatapultX logo re-expand triggered.",[d.SELENIUM]);this.sendAnalytics(z.USER_EXPANDED,i,this.currentInserts[i].viewabilityValue);this.dispatchInsertEvent({type:R.INSERT_OPENED,uid:i,insertViewability:this.currentInserts[i].viewabilityValue});this.clearInsertCollapseTimer(i);e.initializeInsertContent();if(!Ae(e.insertReopenClicked)){e.insertReopenClicked()}this.resumeInsertTimers(i)}}};i.prototype.cxOutbrainClick=function(i){if(this.idCheck(i)){var t=this.currentInserts[i].insertDocument;var e=this.currentInserts[i].insert;if(!e.insertClosed){this.debugLog("Adsense logo clicked. Clickthrough triggered to Outbrain.",[d.QA,d.INSERT]);this.debugLog("Adsense logo clickthrough triggered.",[d.SELENIUM]);this.endInsert(i);this.sendAnalytics(z.OUTBRAIN_CLICKTHROUGH,i,this.currentInserts[i].viewabilityValue);t.getElementById("container_clickthrough3").click()}}};i.prototype.closeButtonClick=function(i){if(this.idCheck(i)){this.debugLog("User close button triggered. "+i,[d.QA,d.INSERT]);this.currentInserts[i].closeTriggered=true;this.dispatchInsertEvent({type:R.INSERT_USER_CLOSED,uid:i,insertViewability:this.currentInserts[i].viewabilityValue});this.endInsert(i)}};i.prototype.buttonOver=function(i){if(i){i.stopPropagation()}var t=this.currentIDs;var e=i.target||i.srcElement;for(var n=0;n<t.length;n++){var s=this.currentInserts[t[n]].insertDocument;if(this.currentInserts[t[n]].insertDocument.contains(i.target)){var r=this.currentInserts[t[n]].insert;this.debugLog(["Button over event triggered on insert:",this.currentInserts[t[n]].insert],[d.INSERT]);if(typeof r.buttonOver!=="undefined"){this.debugLog("Overriding button over function");r.buttonOver(i)}else{if(e==s.getElementById("clickthroughHotspot")||e==s.getElementById("clickthroughHotspotHorizontal")||e==s.getElementById("clickthroughHotspotVertical")){if(r.animationComplete){r.highlightCTA()}}else if(e==s.getElementById("closeHotspot")){Za.to(s.getElementById("insertCloseImg"),{duration:.4,rotation:90,ease:ko.easeOut})}}}}};i.prototype.buttonOut=function(i){if(i){i.stopPropagation()}var t=this.currentIDs;var e=i.target||i.srcElement;for(var n=0;n<t.length;n++){var s=this.currentInserts[t[n]].insertDocument;if(this.currentInserts[t[n]].insertDocument.contains(i.target)){var r=this.currentInserts[t[n]].insert;this.debugLog(["Button out event triggered on insert:",this.currentInserts[t[n]].insert],[d.INSERT]);if(typeof r.buttonOut!=="undefined"){this.debugLog("Overriding button over function");r.buttonOut(i)}else{if(e==s.getElementById("clickthroughHotspot")||e==s.getElementById("clickthroughHotspotHorizontal")||e==s.getElementById("clickthroughHotspotVertical")){if(r.animationComplete){r.removeHighlightCTA()}}else if(e==s.getElementById("closeHotspot")){Za.to(s.getElementById("insertCloseImg"),{duration:.4,rotation:0,ease:ko.easeOut})}}}}};i.prototype.removeHotspots=function(i){if(!Ae(this.currentInserts[i])){var t=this.currentInserts[i].insertDocument;var e=t.querySelectorAll(".hotspot");for(var n=0;n<e.length;n++){this.removeListeners(e[n]);Za.set(e[n],{visibility:"hidden"})}}};i.prototype.initializeHotspots=function(i){if(!Ae(this.currentInserts[i])){var t=this.currentInserts[i].insertDocument;var e=t.querySelectorAll(".hotspot");for(var n=0;n<e.length;n++){this.initializeHotspot(e[n])}}};i.prototype.initializeHotspot=function(i){this.addListeners(i);Za.set(i,{visibility:"visible"})};i.prototype.pauseInsertTimers=function(i){if(!Ae(this.currentInserts[i])){this.currentInserts[i].isPaused=true;if(this.currentInserts[i].viewabilityTimer){this.currentInserts[i].viewabilityTimer.pause()}if(this.currentInserts[i].insertTimer){this.currentInserts[i].insertTimer.pause()}}};i.prototype.resumeInsertTimers=function(i){if(!Ae(this.currentInserts[i])){this.currentInserts[i].isPaused=false;if(this.currentInserts[i].insertTimer){this.currentInserts[i].insertTimer.resume()}if(this.currentInserts[i].viewabilityTimer&&this.currentInserts[i].viewabilityValue>.5){this.currentInserts[i].viewabilityTimer.resume()}}};i.prototype.preventMenu=function(i){if(this.preventRightClickMenu&&!this.isLocal){i.preventDefault();this.buttonClick(i)}};i.prototype.insertDestroyFunction=function(i,t){if(t===void 0){t=false}var e,n;this.debugLog("Destroy insert requested: "+i,[d.INSERT]);if(!Ae(this.currentInserts[i])){var s=this.currentInserts[i].closeTriggered;var r=this.currentInserts[i].insert;var o=((e=this.currentInserts[i].insertTimer)===null||e===void 0?void 0:e.getTotalElapsedTime())/1e3||0;var a=((n=this.currentInserts[i].viewabilityTimer)===null||n===void 0?void 0:n.getTotalElapsedTime())/1e3||0;var h=this.currentInserts[i].viewabilityArray.length>0?this.currentInserts[i].viewabilityArray.reduce((function(i,t){return i+t}))/this.currentInserts[i].viewabilityArray.length:0;Za.killTweensOf(this.currentInserts[i].timeoutDestroy);this.endInsert(i);this.currentInserts[i].insert.insertClosed=true;this.currentInserts[i].isDestroying=true;this.removeCurrentInsert(i);var l=!Ae(r)&&!Ae(r.isADX)?r.isADX:false;this.dispatchInsertEvent({type:R.INSERT_DESTROYED,uid:i,destroyAll:s&&t?true:false,isADX:l,insertLifetime:o,insertViewabilityTime:a,insertAverageViewabilityValue:h});var u=t?"Destroying insert element due to timeout: "+i:"Destroying insert element:"+i;this.debugLog([u,i],d.QA)}else if(i==="empty"){this.debugLog(["Destroying insert element: EMPTY ID"],[d.QA,d.INSERT]);this.dispatchInsertEvent({type:R.INSERT_DESTROYED,uid:i})}else{this.debugLog(["Destroying insert is not part of the active insert list: "+i],[d.QA,d.INSERT])}};i.prototype.endInsert=function(i){if(!Ae(this.currentInserts[i])){this.clearInsertCollapseTimer(i);this.pauseInsertTimers(i);this.debugLog("End insert: "+i);var t=this.currentInserts[i].insert;t.endInsert()}};i.prototype.scheduleResizeInsert=function(i,t){if(t===void 0){t=100}var e;if(!Ae(this.currentInserts[i])){(e=this.currentInserts[i])===null||e===void 0?void 0:e.resizeTimer.reset(t)}};i.prototype.resizeInsert=function(i){var t;if(!Ae(this.currentInserts[i])){var e=(t=this.currentInserts[i])===null||t===void 0?void 0:t.insertDocument;if(!Ae(e)&&!Ae(e.getElementById("insertHolder"))&&!Ae(this.currentInserts[i].insert.insertResizeFunction)){this.currentInserts[i].insert.insertResizeFunction()}}};i.prototype.sendAnalytics=function(i,t,e){this.dispatchInsertEvent({type:R.INSERT_TRACKING_EVENT,action:i,uid:t,insertViewability:e})};i.prototype.bannerBlockedNotify=function(i){if(!Ae(this.currentInserts[i])){this.dispatchInsertEvent({type:R.INSERT_BANNER_BLOCKED,uid:i})}};i.prototype.bannerLoadFailedNotify=function(i){if(!Ae(this.currentInserts[i])){if(this.currentInserts[i].insert.state.isADX||this.currentInserts[i].insert.state.isPrebid){this.dispatchInsertEvent({type:R.INSERT_GPT_FAILED,uid:i})}else{this.dispatchInsertEvent({type:R.INSERT_BANNER_FAILED,uid:i})}}};i.prototype.bannerRenderFailedNotify=function(i){if(!Ae(this.currentInserts[i])){if(this.currentInserts[i].insert.state.isADX||this.currentInserts[i].insert.state.isPrebid){this.dispatchInsertEvent({type:R.INSERT_GPT_RENDER_FAILED,uid:i})}}};i.prototype.bannerResponseReceived=function(i,t){if(!Ae(this.currentInserts[i])){if(this.currentInserts[i].insert.state.isADX||this.currentInserts[i].insert.state.isPrebid){t!==null&&t!==void 0?t:t=false;this.dispatchInsertEvent({type:R.INSERT_GPT_RESPONSE,uid:i,safeframe:t})}}};i.prototype.prebidRefreshResponseReceived=function(i){var t,e;if(!Ae(this.currentInserts[i])){var n=((t=this.currentInserts[i].insertTimer)===null||t===void 0?void 0:t.getTotalElapsedTime())/1e3||0;var s=((e=this.currentInserts[i].viewabilityTimer)===null||e===void 0?void 0:e.getTotalElapsedTime())/1e3||0;var r=this.currentInserts[i].viewabilityArray.length>0?this.currentInserts[i].viewabilityArray.reduce(()/this.currentInserts[i].viewabilityArray.length:0;this.dispatchInsertEvent({type:R.INSERT_GPT_REFRESH,uid:i,insertLifetime:n,insertViewabilityTime:s,insertAverageViewabilityValue:r})}else{this.debugLog("--prebidRefreshResponseReceived uniqueid ".concat(i," does not exist in current inserts."),[d.QA,d.INSERT])}};i.prototype.updateInsertId=function(i,t){if(!Ae(this.currentInserts[i])){this.currentInserts[t]=this.currentInserts[i];this.currentInserts[i]=null;delete this.currentInserts[i];this.setInsertViewabilityTimer(t);this.setInsertLifetimeTimer(t);this.setInsertCollapseTimer(t);this.initializeIntersectionObserver(this.currentInserts[t]);this.currentInserts[t].viewed=false;this.currentInserts[t].viewabilityArray=[this.currentInserts[t].viewabilityValue];this.currentInserts[t].boundDestroy=this.insertDestroyFunction.bind(this,t);this.currentInserts[t].timeoutDestroy=this.insertDestroyFunction.bind(this,t,true)}};i.prototype.dispatchInsertEvent=function(i){var t=new CustomEvent(R.EVENT_FROM_INSERT,{bubbles:false,detail:i});this._elementHost.dispatchEvent(t)};return i}();ar rh=":host{-ms-user-select:none;user-select:none;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none;display:inline;height:100%;width:auto;overflow:hidden;visibility:hidden}#overlaySizer{width:0px;height:0px;overflow:visible;display:none;visibility:hidden}#timer{position:absolute;width:100%;height:100%;z-index:9000}";var oh;((oh||(oh={}));var ah;((ah||(ah={}));var hh="https://demand.qortex.ai";var lh=i("cx_overlay",function(){function i(i){var e,n;var s=this;t(this,i);this.cxoActive=true;this.currentInserts={nativeOverlayCorner:S.OVERLAY_HORIZONTAL_SLIDE_COLOR_DETECT,nativeOverlayIcon:S.OVERLAY_SLIDE_ICON_COLOR_DETECT,nativeOverlayFullwidth:S.OVERLAY_FULLWIDTH_ICON_COLOR_DETECT,nativeFlap:S.BLEEDOVER_FLAP_REVOLVING_HEADLINE,nativeWing:S.BLEEDOVER_WING_PRECISION_SIZE,nativeSqueeze:S.SQUEEZE_BACK_DYNAMIC_FULLWIDTH,nativeCustomSqueeze:S.SQUEEZE_BACK_CUSTOM_FULL_BACKGROUND,nativeVideoSqueeze:S.SQUEEZE_BACK_CUSTOM_VIDEO_BACKGROUND,displayOverlayCorner:S.DISPLAY_OVERLAY_CORNER_SLIDE,displayOverlayFullwidth:S.DISPLAY_FULLWIDTH_HORIZONTAL_OVERLAY,displayFlap:S.DISPLAY_BLEEDOVER_FLAP_FLOATING,displayWing:S.DISPLAY_BLEEDOVER_WING_MINI,displaySqueeze:S.DISPLAY_SQUEEZE_BACK_BANNER,ctvOverlayCorner:S.CTV_OVERLAY_CORNER_CLEAN_QR,ctvSqueeze:S.CTV_SQUEEZE_BACK_CUSTOM_QR};this.shouldRequestMoments=true;this.initialMomentsRequested=false;this.showLoggingOverlay=false;this.carouselResourceData=null;this.activeResourceData=null;this.previousADXId="UNDEFINED";this.outbrainBidCount=0;this.outbrainToken=null;this.airTVEventsEstablished=false;this.airTVisAdvertisement=false;this.anchorTarget="";this.playerType=T.UNKNOWN;this.playerMode=I.DESKTOP_ONSTREAM;this.isInsertReinitializing=false;this.optimalInsertType=this.currentInserts.nativeOverlayFullwidth;this.optimalInsertPosition=k.DEFAULT;this.lockCXO=false;this.floatingPosition=N.BOTTOM_RIGHT;this.floatingJumpCount=0;this.floatingModeLockedCount=0;this.floatingModeConfirmed=false;this.closestFloatingPosition={};this.floatingCardinalDirections={top:"auto",right:"auto",bottom:"auto",left:"auto"};this.cardinalDirectionsMode=Be.ZERO_INSET;this.currentAnchorPosition="default";this.insertCount=0;this.consecutiveVideosLoaded=1;this.watchedVideoSize={width:0,height:0,top:0,left:0};this.isMobile=false;this.isCTV=false;this.isOnStream=true;this.insertBeingCleared=false;this.isIframePlayer=false;this.videoPlayerLost=false;this.videoAdvertVariables=[];this.cxWaitInitiateBid=false;this.playerModeExclusionList=[];this.forceNextInsert=false;this.forceNextBid=false;this.forceNextRebid=false;this.rebidBannerSizeAllowedDeviation=2;this.bidderOrder=[M.ADK,M.ADK,M.ADK,M.ADX,M.ADK,M.ADK,M.ADK,M.ADK,M.ADK,M.ADK,M.OUTBRAIN,M.REV_CONTENT];this._videoUrl=null;this._videoUrlId=null;this.requestedBannerSizes=[];this.forceBannerCustomSqueeze=false;this.activeCarouselData={active:false,bidCount:0,isClosed:false,isCompleted:false};this.defaultInsertTypeMapping=[{defaultType:S.DEFAULT_FLAP,mappedTypes:[this.currentInserts.nativeFlap]},{defaultType:S.DEFAULT_WING,mappedTypes:[this.currentInserts.nativeWing]},{defaultType:S.DEFAULT_SQUEEZEBACK,mappedTypes:[this.currentInserts.nativeSqueeze,this.currentInserts.nativeCustomSqueeze,this.currentInserts.displaySqueeze,this.currentInserts.ctvSqueeze]},{defaultType:S.DEFAULT_SQUEEZEBACK_CUSTOM,mappedTypes:[this.currentInserts.nativeCustomSqueeze,this.currentInserts.ctvSqueeze]},{defaultType:S.DEFAULT_OVERLAY_FULLWIDTH,mappedTypes:[this.currentInserts.nativeOverlayFullwidth]},{defaultType:S.DEFAULT_OVERLAY_CORNER_ICON,mappedTypes:[this.currentInserts.nativeOverlayIcon]},{defaultType:S.DEFAULT_OVERLAY_CORNER_NO_ICON,mappedTypes:[this.currentInserts.nativeOverlayCorner]},{defaultType:S.DEFAULT_OVERLAY_CORNER,mappedTypes:[this.currentInserts.nativeOverlayCorner,this.currentInserts.nativeOverlayIcon,this.currentInserts.ctvOverlayCorner]}];this.currentVideoStatus={videoStarted:false,videoEnded:true,videoDuration:0,durationChangeCount:0,analyticsTriggeredVideoStarted:false,analyticsTriggeredPassed15Seconds:false,isStreaming:false,isFloatingExclusive:false,lastBidTime:0,isShadowPlayer:false,timerBasedBidding:false,videoRecentlyEmptied:false,videoAnalyticsParameters:{started:false,restarted:true,fiveSecondsReached:false,tenSecondsReached:false,fifteenSecondsReached:false,thirtySecondsReached:false,fortyFiveSecondsReached:false,sixtySecondsReached:false,minutesReachedLog:[]}};this.registeredCXExternalEvent=this.cxExternalEvent.bind(this);this.registeredVideoEvents=(e={},e[oh.VIDEO_LOADED_DATA]=this.videoLoadedData.bind(this),e[oh.VIDEO_LOADED_METADATA]=this.videoLoadedMetadata.bind(this),e[oh.VIDEO_PLAY]=this.videoPlay.bind(this),e[oh.VIDEO_PAUSE]=this.videoPause.bind(this),e[oh.VIDEO_ENDED]=this.videoEnd.bind(this),e[oh.VIDEO_EMPTIED]=this.videoEmptied.bind(this),e[oh.VIDEO_TIMEUPDATE]=this.videoTimeUpdate.bind(this),e[oh.VIDEO_EVENT_FROM_INSERT]=this.videoInsertEvent.bind(this),e);this.registeredAirTVVideoEvents=(n={},n[ah.AD_BREAK_END]=this.airTvAdBreakEnd.bind(this),n[ah.IMPRESSION]=this.airTvAdImpression.bind(this),n[ah.PLAYER_READY]=this.airTvPlayerReady.bind(this),n[ah.VIDEO_INIT]=this.airTvVideoInit.bind(this),n[ah.PLAY]=this.airTvPlay.bind(this),n[ah.PAUSE]=this.airTvPause.bind(this),n);this.registeredWindowEvents={resize:this.windowResize.bind(this),scroll:this.windowScroll.bind(this),message:this.messageReceived.bind(this),visibilitychange:this.visibilityChange.bind(this)};this.onTrackLoad=this.onCueChange=function(){s.debugLog("onCueChange");var i=s.trackElement.track.activeCues||[];s.debugLog("onCueChange"+"\n --foundNumberActiveCues = ".concat(i.length));for(var t=0,e=i;t<e.length;t++){var n=e[t];s.debugLog("onCueChange"+"\n --cueText = ".concat(n.text));if(!s.currentVideoStatus.timerBasedBidding){s.forceNextBid=true;s.forceNextInsert=true;s.overlayUtilities.rebidCount=0;s.resetCarouselData();s.timers.initiateBidRequestTimer.execute();s.trackElement.track.removeCue(n)}else{s.debugLog("Timer based bidding - ignoring monetize moments from video track.",[d.CXO,d.QA])}}s.debugLog("onCueChange --cueChangeEnd")};this.groupId=undefined;this.qElementId=undefined;this.nobid=false;this.cxWait=false;this.isesm=false;this.marketplaceId=null;this.storeId=null;this.bundleId=null;this.inserts=undefined;this.trackData=undefined;this.label="catapult-x";this.type="video/mp4";this.kind="metadata/cxinsert";this.cues=undefined;this.videoClass="video-x"}i.prototype.onNobidToggle=function(i){if(i){this.debugLog(["nobid attribute turned on for cx-overlay. Should remove track, video events, and active inserts."],[d.QA,d.CXO]);this.clearRemainingInserts();if(!sh(this.trackElement)&&this.videoElement.contains(this.trackElement)){this.videoElement.removeChild(this.trackElement)}if(!sh(this.videoElement)){this.removeVideoEvents()}}};i.prototype.onCXWaitToggle=function(i){var t=this.cxoverlay.getAttribute("cx-wait")==null?"variable set AUTOMATICALLY (cx-overlay initiated)":"attribute set MANUALLY (player initiated)";if(i){this.debugLog(["cx-wait=true ".concat(t,".")],[d.QA,d.CXO]);if(!sh(this.activeResource)){this.activeResource.style.setProperty("display","none");if(!sh(this.carouselResource)){this.carouselResource.style.setProperty("display","none")}this.debugLog(["Hiding active insert: "+this.activeResource.tagName],[d.QA,d.CXO]);this.timers.carouselBidTimer.pause()}this.overlayUtilities.dispatchOverlayEvent({type:_.OVERLAY_PAUSE_INSERTS})}else{this.debugLog(["cx-wait=false ".concat(t,".")],[d.QA,d.CXO]);if(!sh(this.activeResource)){this.activeResource.style.setProperty("display","block");if(!sh(this.carouselResource)){this.carouselResource.style.setProperty("display","block")}this.debugLog(["Continue active insert: "+this.activeResource.tagName],[d.QA,d.CXO]);this.timers.dispatchResizeEventTimer.reset(1);this.timers.updateCXOTimer.execute();this.timers.carouselBidTimer.resume()}this.resumeActiveInsertAfterCXWait(1);if(typeof this.stowedBidResponse!=="undefined"&&this.stowedBidResponse!==null){this.debugLog(["Bid response received while cx-wait=true. Will now process bid response."],[d.QA,d.CXO]);this.processBidResponse(this.stowedBidResponse);this.stowedBidResponse=null}else if(this.cxWaitInitiateBid){this.debugLog(["Bid request attempted while cx-wait=true. Will now attempt new bid request."],[d.QA,d.CXO]);this.cxWaitInitiateBid=false;this.timers.initiateBidRequestTimer.execute()}this.timers.checkMomentsNeededTimer.reset(100)}};i.prototype.resumeActiveInsertAfterCXWait=function(i){var t=this;if(!this.detectCXWaitChanges()){if(!sh(this.activeResource)&&i<=5){if(this.overlayUtilities.currentDimensions.width>10&&this.overlayUtilities.currentDimensions.height>10){this.overlayUtilities.dispatchOverlayEvent({type:_.OVERLAY_RESUME_INSERTS,continue:true})}else{setTimeout((,100)}}else{this.overlayUtilities.dispatchOverlayEvent({type:_.OVERLAY_RESUME_INSERTS,continue:false})}}};i.prototype.componentWillLoad=function(){var i=this;this.groupId=this.groupId==="null"?null:this.groupId;this.overlayUtilities=new Fe(this.groupId,C.OVERLAY);this.analyticsEventDispatcher=this.overlayUtilities.analyticsEventDispatcher;this.debugLog=this.overlayUtilities.debugLog;this.logManager=this.overlayUtilities.logManager;this.insertLogicManager=new nh(this.overlayUtilities.logManager);this.insertLogicManager.isMobile=this.overlayUtilities.isMobileDevice;this.timers={updateCXOTimer:new Ne((function(){i.updateCXO()}),0,"UpdateCXO Timer",this.logManager,d.CXO),cxoTimeElapsedEventTimeout:new Ne((function(){i.logCXOTimeElapsedEvent(0)}),0,"Log CXO Time Elapsed Event Timer",this.logManager,d.CXO),windowScrollTimer:new Ne((function(){i.windowScrollStopped()}),0,"Window Scroll Watch Timer"),delayFetchMomentsTimer:new Ne((function(){i.fetchMoments()}),0,"Delay Fetch Moments Timer",this.logManager,d.CXO),checkLostVideoPlayerTimer:new Ne((function(){i.videoPlayerRemainsLostCheck()}),0,"Check Lost Video Timer",this.logManager,d.CXO),createNewInsertTimer:new Ne((function(){}),0,"Create New Insert Timer",this.logManager,d.CXO),carouselBidTimer:new Ne((function(){i.initiateCarouselBid()}),0,"Carousel Bid Timer",this.logManager,d.CXO),automaticBidTimer:new Ne((function(){i.forceNextInsert=true;i.forceNextBid=true;i.overlayUtilities.rebidCount=0;i.resetCarouselData();i.timers.initiateBidRequestTimer.execute()}),0,"Automatic Bid Timer",this.logManager,d.QA),checkTrackIntegrityTimer:new Ne((function(){i.checkTrackIntegrity()}),0,"Check Track Integrity Timer"),initiateBidRequestTimer:new Ne((function(){i.initiateBidRequest()}),0,"Initiate Bid Request Timer",this.logManager,d.CXO),reinitializeVideoElementTimer:new Ne((function(){i.reinitializeVideoElement(i.videoElementContainer)}),0,"Reinitialize Video Element Timer",this.logManager,d.CXO),dispatchResizeEventTimer:new Ne((,0,"Dispatch Resize Event Timer"),checkMomentsNeededTimer:new Ne((function(){i.checkIfMomentsNeeded()}),0,"Check Moments Needed Timer"),updateCXOFrameDelayTimer:new Ne((function(){i.updateCXOFrameDelay()}),0,"Update CXO Frame Delay Timer",this.logManager,d.CXO),checkForVideoChangeTimer:new Ne((function(){i.checkForVideoChange()}),0,"Check Video Change Timer"),remakeInsertTimer:new Ne((,0,"Remake Insert Check Delay Timer",this.logManager,d.CXO),remakeADXInsertTimer:new Ne((function(){i.remakeADXInsert()}),0,"Remake ADX Insert Timer",this.logManager,d.QA),detectCXWaitChangesTimer:new Ne((function(){i.detectCXWaitChanges()}),0,"Detect CX-Wait Changes Timer",this.logManager,d.CXO),setVideoDimensionsAsStableTimer:new Ne((,0,"Set Video Dimensions As Stable Timer"),containerElementOpacityResetTimer:new Ne((function(){var t;(t=i.containerElement)===null||t===void 0?void 0:t.style.removeProperty("opacity")}),0,"Container Element Reset Opacity Timer",this.logManager,d.QA),confirmCardinalDirectionsModeTimer:new Ne((function(){i.confirmCardinalDirectionsMode()}),0,"Confirm Cardinal Directions Mode Timer",this.logManager,d.CXO)};this.debugLog("CX overlay initializing.",[d.INFO]);this.isCTV=Boolean(navigator.userAgent.includes("SMART-TV")||navigator.userAgent.includes("AmazonWebAppPlatform"));this.analyticsEventDispatcher.assignEventsComponentSource(C.OVERLAY)};i.prototype.componentDidLoad=function(){var i=this;var t,e;this.isMobile=this.overlayUtilities.isMobileDevice;this.overlayUtilities.initializeRequiredData({componentElement:this.cxoverlay,activeResourceData:function(){return i.activeResourceData},activeElement:function(){return i.videoElement},playerMode:function(){return i.playerMode},cxoActive:containerElement:this.containerElement,destroyFunction:this.destroyCXO.bind(this),removeProhibitedInsertTypes:this.removeProhibitedInsertTypes.bind(this),currentInserts:this.currentInserts});if(this.marketplaceId!==null||this.storeId!==null||this.bundleId!==null){this.debugLog(["Marketplace ID: ".concat(this.marketplaceId),"Store ID: ".concat(this.storeId),"Bundle ID: ".concat(this.bundleId)],[d.QA,d.IMPORTANT])}var n=this.logManager.getDebugParamValue(O.SHOW_CONSOLE_OVERLAY);if(n!==null&&n==="true"){this.showLoggingOverlay=true;this.createLoggingOverlay();window.addEventListener(B.DISPATCH_LOG,()}var s=this.logManager.getDebugParamValue(O.FORCE_BANNER_CUSTOM_SQUEEZE);if(s!==null&&s==="true"){this.forceBannerCustomSqueeze=true;this.debugLog("Force custom banner squeeze? "+this.forceBannerCustomSqueeze,[d.QA,d.IMPORTANT])}var r=this.logManager.getDebugParamValue(O.REBID_ALLOWED_SIZE_DEVIATION);if(r!==null){this.rebidBannerSizeAllowedDeviation=parseInt(r);this.debugLog("Rebid Banner Size Allowed Deviation Override: "+r,[d.QA,d.IMPORTANT])}this.addKeypressEvents();this.addWindowEvents();this.cxoverlay.addEventListener("cx-external-event",this.registeredCXExternalEvent);this.timers.cxoTimeElapsedEventTimeout.reset(5e3,();this.debugLog(["componentDidLoad",this.cxoverlay]);this.debugLog("UserAgent - ".concat(navigator.userAgent),[d.QA,d.CXO,d.OVERLAYLOGS]);this.debugLog(["CX-Overlay loaded. HTML Element: ",this.cxoverlay],[d.QA,d.TAM]);this.debugLog(["CX-Overlay loaded."],d.SELENIUM);this.overlayElement.style.setProperty("z-index","10000000");this.containerElement.style.setProperty("z-index","10000000");this.containerElement.style.setProperty("pointer-events","none");this.containerElement.style.setProperty("-webkit-tap-highlight-color","transparent");this.analyticsEventDispatcher.assignEventsGroupId(this.groupId);if(this.logManager.getDebugParamValue(O.ANALYTICS_TIER)!==null){this.analyticsEventDispatcher.assignPlayerEventFrequency((e=(t=this.logManager.getDebugParamValue(O.ANALYTICS_TIER))===null||t===void 0?void 0:t.toUpperCase)===null||e===void 0?void 0:e.call(t))}else if(this.groupId==="9qI3hQnDUEyvHOhqq4LRXw"){this.analyticsEventDispatcher.assignPlayerEventFrequency(U.LOW)}this.analyticsEventDispatcher.sendOverlayEvent(F.OVERLAY_INIT,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue);this.inserts=[];if(typeof this.cxoverlay["identifyAdvertVars"]!=="undefined"&&this.cxoverlay["identifyAdvertVars"]!==null){this.videoAdvertVariables=this.cxoverlay["identifyAdvertVars"]}if(typeof this.cxoverlay["osdConfig"]!=="undefined"&&this.cxoverlay["osdConfig"]!==null){this.debugLog(["On-Stream Direct configuration found in bootstrapper advanced configuration: ",this.cxoverlay["osdConfig"]],[d.CXO,d.QA]);this.overlayUtilities.osdConfig=this.overlayUtilities.normalizeOSDConfig(this.cxoverlay["osdConfig"])}var o=(new Date).getTime();var a=this.groupId;var h=this.logManager.getDebugParamValue(O.OVERRIDE_CONFIGS_GROUP_ID);if(h!==null){a=h==null||h===""||h==="true"?"internal":h;this.debugLog("Using group-id '".concat(a,"' for zone configs request."),[d.QA,d.CXO])}this.debugLog("Retrieving zone configuration for group '".concat(a,"'"),[d.QA,d.CXO,d.TAM]);_e(a).then((function(t){var e,n,s,r,l,u,f,c,v,p,m,g,b,y,T,I,S,E,R,_,C,k,N,A,B,x,L,z,P,V,j,X,G,W,H,Y,J,Q,K,Z,$,ii,ti,ei,ni,si,ri,oi,ai,hi,li,ui,di;var fi,ci,vi,pi,mi,gi;var bi=JSON.stringify(t);i.debugLog(["Group configs for group '".concat(a,"' retrieved (in ").concat((new Date).getTime()-o,"ms): "),JSON.parse(bi)],[d.QA,d.CXO]);i.overlayUtilities.groupConfig=t;if(sh((e=i.overlayUtilities.groupConfig)===null||e===void 0?void 0:e.insertConfig)){i.debugLog(["Group configs for '".concat(a,"' unable to be retrieved from environment ").concat(hh)],[d.CXO,d.QA,d.IMPORTANT,d.TAM]);i.destroyCXO();i.shouldRequestMoments=false;return}else if(i.overlayUtilities.isBlockedRegion(a)){i.debugLog(["Region is blocked due to geo blocking policy for group ".concat(a,":"),JSON.parse(bi)],[d.CXO,d.QA]);i.destroyCXO();i.analyticsEventDispatcher.sendOverlayEvent(F.OVERLAY_GEO_BLOCKED_REGION,M.PLATFORM,i.overlayUtilities.currentWindowLocation.href,Boolean(i.overlayUtilities.foundUID!=="NOT_FOUND"),i.playerMode,i.overlayUtilities.elapsedOverlayTime,i.overlayUtilities.activeOverlayTime,i.overlayUtilities.containerViewabilityValue);return}else{(n=(fi=i.overlayUtilities.groupConfig).zoneModifications)!==null&&n!==void 0?n:fi.zoneModifications=[];if((((s=i.overlayUtilities.groupConfig)===null||s===void 0?void 0:s.publisherId)==="158887"||((r=i.overlayUtilities.groupConfig)===null||r===void 0?void 0:r.publisherId)==="162582"||((l=i.overlayUtilities.groupConfig)===null||l===void 0?void 0:l.publisherId)==="162435"||((u=i.logManager.getDebugParamValue(O.FORCE_BRAINLY))===null||u===void 0?void 0:u.includes("t")))&&!i.overlayUtilities.groupConfig.zoneModifications.includes(q.BRAINLY)){i.overlayUtilities.groupConfig.zoneModifications.push(q.BRAINLY)}if((i.groupId==="xzIP3OHJOU2sxKkO1bLUXw"||i.groupId==="PqlsW4QabjJ7J5GPsfwB"||i.groupId==="9qI3hQnDUEyvHOhqq4LRXw")&&!i.overlayUtilities.groupConfig.zoneModifications.includes(q.HIDE_UI)){i.overlayUtilities.groupConfig.zoneModifications.push(q.HIDE_UI)}if(i.overlayUtilities.groupConfig.zoneModifications.includes(q.ALWAYS_ON)){i.overlayUtilities.groupConfig.insertFrequency=0;i.overlayUtilities.groupConfig.carouselEnabled=false;i.overlayUtilities.groupConfig.persistentInserts=true}if(((f=i.logManager.getDebugParamValue(O.PREVENT_BANNER_ENLARGE))===null||f===void 0?void 0:f.includes("t"))&&!i.overlayUtilities.groupConfig.zoneModifications.includes(q.PREVENT_BANNER_UPSCALE)){i.overlayUtilities.groupConfig.zoneModifications.push(q.PREVENT_BANNER_UPSCALE)}if(((c=i.logManager.getDebugParamValue(O.REMOVE_LOGO))===null||c===void 0?void 0:c.includes("t"))&&!i.overlayUtilities.groupConfig.zoneModifications.includes(q.REMOVE_LOGO)){i.overlayUtilities.groupConfig.zoneModifications.push(q.REMOVE_LOGO)}if(((v=i.logManager.getDebugParamValue(O.DISABLE_INSERT_OPEN_ANIMATION))===null||v===void 0?void 0:v.includes("t"))&&!i.overlayUtilities.groupConfig.zoneModifications.includes(q.DISABLE_OPEN_ANIMATION)){i.overlayUtilities.groupConfig.zoneModifications.push(q.DISABLE_OPEN_ANIMATION)}if(((p=i.logManager.getDebugParamValue(O.DISABLE_TAM))===null||p===void 0?void 0:p.includes("t"))&&!i.overlayUtilities.groupConfig.zoneModifications.includes(q.DISABLE_TAM)){i.overlayUtilities.groupConfig.zoneModifications.push(q.DISABLE_TAM)}if(i.overlayUtilities.groupConfig.zoneModifications.some(()&&!i.overlayUtilities.groupConfig.zoneModifications.includes(q.REMOVE_INSERT_CLOSE_BUTTON)){i.overlayUtilities.groupConfig.zoneModifications.push(q.REMOVE_INSERT_CLOSE_BUTTON)}if(i.overlayUtilities.groupConfig.zoneModifications.length>0){var yi=["Zone Modifications set for zone '".concat(a,"':")];i.overlayUtilities.groupConfig.zoneModifications.forEach((function(i){return yi.push(i)}));i.debugLog(yi,[d.CXO,d.QA])}var wi=(b=(g=(m=i.overlayUtilities.groupConfig)===null||m===void 0?void 0:m.analyticsTier)===null||g===void 0?void 0:g.toUpperCase)===null||b===void 0?void 0:b.call(g);if(Object.values(U).includes(wi)){i.analyticsEventDispatcher.assignPlayerEventFrequency(wi)}i.isCTV=((y=i.overlayUtilities.groupConfig)===null||y===void 0?void 0:y.zoneType)===w.CTV?true:false;i.debugLog("Is CTV zone from group config? "+i.isCTV,[d.QA,d.CXO]);var Oi=i.logManager.getDebugParamValue(O.FORCE_CTV_MODE);if(Oi!==null&&Oi==="true"){i.isCTV=true;i.debugLog("CTV zone forced from URL parameters",[d.QA,d.CXO])}if(!i.isCTV){i.debugLog(["registering identity hub"],d.QA);i.overlayUtilities.registerIdentityHub();i.debugLog("Collecting GPP Data",[d.QA]);i.overlayUtilities.getGPPData();i.debugLog("Collecting TC string",[d.QA]);i.overlayUtilities.getTCData();i.debugLog("Collecting US Privacy string",[d.QA]);i.overlayUtilities.getUSPData();i.overlayUtilities.initializeIntersectionObserver()}else{i.overlayUtilities.containerViewabilityValue=1;i.overlayUtilities.groupConfig.destroyInsertOnClose=true}var Ti=t===null||t===void 0?void 0:t.osdConfig;if(!sh(Ti)){var Ii=i.qElementId.charAt(0)==="#"||i.qElementId.charAt(0)==="."?i.qElementId.substring(1):i.qElementId;var Si=(T=Ti.adUnits.find((function(i){return i.adUnitPath!==null&&i.adUnitPath!==""&&i.videoId===Ii?true:false})))!==null&&T!==void 0?T:Ti.adUnits.find((function(i){return i.adUnitPath!==null&&i.adUnitPath!==""&&i.videoId===null?true:false}));if(!!Si){i.debugLog(["Ad Unit found for OSD configuration: ".concat(JSON.stringify(Si,null,2))],[d.CXO,d.QA]);i.debugLog(["bidderArray = ",Ti.bidders],[d.CXO,d.QA]);i.debugLog("Initialize OSD setup from zone configuation",[d.CXO,d.QA]);i.overlayUtilities.osdConfig=i.overlayUtilities.normalizeOSDConfig({slotRefreshParams:{gptAdUnitId:Ti.adUnits[0].adUnitPath,bidderArray:(I=Ti.bidders)!==null&&I!==void 0?I:null}});if(i.logManager.getDebugParamValue(O.FORCE_PREBID)!==null){i.overlayUtilities.osdConfig.slotRefreshParams.allowGAMRefresh=false}}else{i.debugLog(["Ad Unit not found within OSD configuration that matches video container ".concat(i.qElementId)],[d.CXO,d.QA])}}var Ei=(_=(E=(S=i.overlayUtilities.groupConfig)===null||S===void 0?void 0:S.mobileAdSizes)!==null&&E!==void 0?E:(R=i.overlayUtilities.groupConfig)===null||R===void 0?void 0:R.desktopAdSizes)!==null&&_!==void 0?_:(C=i.overlayUtilities.groupConfig)===null||C===void 0?void 0:C.adSizes;var Di=(B=(N=(k=i.overlayUtilities.groupConfig)===null||k===void 0?void 0:k.desktopAdSizes)!==null&&N!==void 0?N:(A=i.overlayUtilities.groupConfig)===null||A===void 0?void 0:A.mobileAdSizes)!==null&&B!==void 0?B:(x=i.overlayUtilities.groupConfig)===null||x===void 0?void 0:x.adSizes;if((Di===null||Di===void 0?void 0:Di.length)>0||(Ei===null||Ei===void 0?void 0:Ei.length)>0){var Ri="";Di.forEach((function(i){if(Ri.length>0){Ri+=", "}Ri+="".concat(i[0],"x").concat(i[1])}));var _i="";Ei.forEach((function(i){if(_i.length>0){_i+=", "}_i+="".concat(i[0],"x").concat(i[1])}));i.debugLog("Will modify allowed OSD ad sizes for group ".concat(i.groupId," using sizes from zone configuration: DESKTOP - ").concat(Ri," | MOBILE - ").concat(_i),[d.CXO,d.QA]);for(var Ci in i.overlayUtilities.allowedOnstreamDirectDesktopSizes){i.overlayUtilities.allowedOnstreamDirectDesktopSizes[Ci]=i.overlayUtilities.allowedOnstreamDirectDesktopSizes[Ci].filter((function(i){return Di.find((function(t){return String(t)===String(i)}))}))}for(var Ci in i.overlayUtilities.allowedOnstreamDirectMobileSizes){i.overlayUtilities.allowedOnstreamDirectMobileSizes[Ci]=i.overlayUtilities.allowedOnstreamDirectMobileSizes[Ci].filter((function(i){return Ei.find((function(t){return String(t)===String(i)}))}))}i.debugLog(["Updated allowed OSD sizes:","Desktop",i.overlayUtilities.allowedOnstreamDirectDesktopSizes,"Mobile:",i.overlayUtilities.allowedOnstreamDirectMobileSizes],[d.CXO,d.QA])}else if(i.overlayUtilities.groupConfig.zoneModifications.includes(q.BRAINLY)){i.debugLog("Will modify allowed OSD ad sizes for group ".concat(i.groupId,"."),[d.CXO,d.QA]);var ki=[[728,90],[300,250]];var Ni=[[320,50],[300,250]];for(var Ci in i.overlayUtilities.allowedOnstreamDirectDesktopSizes){i.overlayUtilities.allowedOnstreamDirectDesktopSizes[Ci]=i.overlayUtilities.allowedOnstreamDirectDesktopSizes[Ci].filter((function(i){return ki.find((function(t){return String(t)===String(i)}))}))}for(var Ci in i.overlayUtilities.allowedOnstreamDirectMobileSizes){i.overlayUtilities.allowedOnstreamDirectMobileSizes[Ci]=i.overlayUtilities.allowedOnstreamDirectMobileSizes[Ci].filter((function(i){return Ni.find(()}))}i.debugLog(["New osd sizes:",i.overlayUtilities.allowedOnstreamDirectDesktopSizes,i.overlayUtilities.allowedOnstreamDirectMobileSizes],[d.CXO,d.QA])}else if(((L=i.overlayUtilities.groupConfig)===null||L===void 0?void 0:L.publisherId)==="130450"||((z=i.overlayUtilities.groupConfig)===null||z===void 0?void 0:z.publisherId)==="143528"||((P=i.overlayUtilities.groupConfig)===null||P===void 0?void 0:P.publisherId)==="143489"){i.debugLog("Will modify allowed OSD ad sizes for group ".concat(i.groupId,"."),[d.CXO,d.QA]);var Ai=[[234,60],[320,50],[468,60]];i.overlayUtilities.allowedOnstreamDirectDesktopSizes.squeezeback=__spreadArray([],Ai,true);i.overlayUtilities.allowedOnstreamDirectDesktopSizes.overlayCorner=__spreadArray([],Ai,true);i.overlayUtilities.allowedOnstreamDirectDesktopSizes.flap=__spreadArray([],Ai,true);i.overlayUtilities.allowedOnstreamDirectDesktopSizes.overlayFullwidth=__spreadArray([],Ai,true);i.overlayUtilities.allowedOnstreamDirectMobileSizes.squeezeback=__spreadArray([],Ai,true);i.overlayUtilities.allowedOnstreamDirectMobileSizes.overlayCorner=__spreadArray([],Ai,true);i.overlayUtilities.allowedOnstreamDirectMobileSizes.flap=__spreadArray([],Ai,true);i.overlayUtilities.allowedOnstreamDirectMobileSizes.overlayFullwidth=__spreadArray([],Ai,true);i.debugLog(["New osd sizes:",i.overlayUtilities.allowedOnstreamDirectDesktopSizes,i.overlayUtilities.allowedOnstreamDirectMobileSizes],[d.CXO,d.QA])}if(!sh(t===null||t===void 0?void 0:t.groupId)){if(sh(i.groupId)){i.groupId=t.groupId;i.analyticsEventDispatcher.assignEventsGroupId(i.groupId);i.debugLog("No group id defined at cx-overlay start. Group id '".concat(i.groupId,"' found in group configs lookup."),[d.CXO,d.QA])}else if(i.groupId!==t.groupId){i.debugLog("Group id defined at cx-overlay = ".concat(i.groupId," and group id found in zone configs = ").concat(t.groupId,". GroupId mismatch debug event will be sent."),[d.CXO,d.QA]);var Bi={definedGroupId:i.groupId,domainGroupId:t.groupId};i.analyticsEventDispatcher.sendOverlayEvent(F.OVERLAY_GROUPID_ZONE_MISMATCH,M.PLATFORM,i.overlayUtilities.currentWindowLocation.href,Boolean(i.overlayUtilities.foundUID!=="NOT_FOUND"),i.playerMode,i.overlayUtilities.elapsedOverlayTime,i.overlayUtilities.activeOverlayTime,i.overlayUtilities.containerViewabilityValue,Bi)}}else if(sh(i.groupId)){i.debugLog("No group id defined at cx-overlay start and no groupid defined in cx configuration. Shutting down CX-Overlay.",[d.CXO,d.QA]);i.destroyCXO();i.shouldRequestMoments=false;var Bi={definedGroupId:null,domainGroupId:null};i.analyticsEventDispatcher.sendOverlayEvent(F.OVERLAY_GROUPID_NOT_FOUND,M.PLATFORM,i.overlayUtilities.currentWindowLocation.href,Boolean(i.overlayUtilities.foundUID!=="NOT_FOUND"),i.playerMode,i.overlayUtilities.elapsedOverlayTime,i.overlayUtilities.activeOverlayTime,i.overlayUtilities.containerViewabilityValue,Bi)}else{i.debugLog("Group id defined at cx-overlay ".concat(i.groupId," and no group id found in zone configs. GroupId mismatch debug event will be sent."),[d.CXO,d.QA,d.IMPORTANT]);var Bi={definedGroupId:i.groupId,domainGroupId:null};i.analyticsEventDispatcher.sendOverlayEvent(F.OVERLAY_GROUPID_ZONE_MISMATCH,M.PLATFORM,i.overlayUtilities.currentWindowLocation.href,Boolean(i.overlayUtilities.foundUID!=="NOT_FOUND"),i.playerMode,i.overlayUtilities.elapsedOverlayTime,i.overlayUtilities.activeOverlayTime,i.overlayUtilities.containerViewabilityValue,Bi)}if(h!==null&&a!==i.groupId){i.debugLog("Set group-id of '".concat(i.groupId,"' is not the same as override group-id '").concat(a,"'. Removing all ADX settings."),[d.QA,d.CXO]);i.overlayUtilities.groupConfig.gptAdUnitPageUrl=null;i.overlayUtilities.groupConfig.gptAdUnitPath=null}var xi=i.logManager.getDebugParamValue(O.ONBOARDING);if(xi!==null){var Fi=xi.indexOf("f")>=0?false:true;i.overlayUtilities.groupConfig.onboarding=Fi;i.debugLog('Forcing zone property "onboarding" to '.concat(Fi),[d.QA,d.CXO])}var Ui=i.logManager.getDebugParamValue(O.PERSISTENT_INSERTS);if(Ui!==null){var qi=Ui.indexOf("t")>=0?true:false;i.overlayUtilities.groupConfig.persistentInserts=qi;i.debugLog('Forcing zone property "persistentInserts" to '.concat(qi),[d.QA,d.CXO])}var Mi=i.logManager.getDebugParamValue(O.ALLOW_ADX);if(Mi!==null){var Li=Mi.indexOf("t")>=0?true:false;if(!Li){i.debugLog("DEBUGallowADX=FALSE. Disallowing ADX to run for zone.",[d.QA,d.CXO]);i.overlayUtilities.groupConfig.gptAdUnitPageUrl=null;i.overlayUtilities.groupConfig.gptAdUnitPath=null}}var zi=i.logManager.getDebugParamValue(O.CAROUSEL_MODE);if(zi!==null){var Pi=zi.indexOf("t")>=0?true:false;i.overlayUtilities.groupConfig.carouselEnabled=Pi;i.overlayUtilities.groupConfig.carouselSpeed=7;i.debugLog('Forcing zone property "carouselMode" to '+Pi,[d.QA,d.CXO])}var Vi=i.logManager.getDebugParamValue(O.DESTROY_INSERT_ON_CLOSE);if(Vi!==null){var ji=Vi.indexOf("t")>=0?true:false;i.overlayUtilities.groupConfig.destroyInsertOnClose=ji;i.debugLog('Forcing zone property "destroyInsertOnClose" to '+ji,[d.QA,d.CXO])}var Xi=i.logManager.getDebugParamValue(O.CAROUSEL_SPEED);if(Xi!==null){var Gi=parseInt(Xi);i.overlayUtilities.groupConfig.carouselSpeed=Number.isInteger(Gi)?Gi:7;i.debugLog('Forcing zone property "carouselSpeed" to '+i.overlayUtilities.groupConfig.carouselSpeed,[d.QA,d.CXO])}var Wi=i.logManager.getDebugParamValue(O.INSERT_FREQUENCY);if(Wi!==null){var Gi=parseInt(Wi);i.overlayUtilities.groupConfig.insertFrequency=Number.isInteger(Gi)?Gi:150;i.debugLog('Forcing zone property "insertFrequency" to '+i.overlayUtilities.groupConfig.insertFrequency,[d.QA,d.CXO])}var Hi=i.logManager.getDebugParamValue(O.INSERT_DURATION);if(Hi!==null){var Gi=parseInt(Hi);i.overlayUtilities.groupConfig.insertDuration=Number.isInteger(Gi)?Gi:150;i.debugLog('Forcing zone property "insertDuration" to '+i.overlayUtilities.groupConfig.insertDuration,[d.QA,d.CXO])}var Yi=i.logManager.getDebugParamValue(O.BRAND_BUG);if(Yi!==null){var Ji=Yi==="false"?false:true;i.overlayUtilities.groupConfig.brandBug=Ji;i.debugLog('Forcing zone property "brandBug" to '+Ji,[d.QA,d.CXO])}var Qi=i.logManager.getDebugParamValue(O.Z_INDEX_OVERRIDE);if(Qi!==null){var Gi=parseInt(Qi);i.overlayUtilities.groupConfig.zIndexOverride=Number.isInteger(Gi)?Gi:1e7;i.debugLog('Forcing zone property "zIndexOverride" to '+i.overlayUtilities.groupConfig.zIndexOverride,[d.QA,d.CXO])}var Ki=i.logManager.getDebugParamValue(O.ZONE_ACTIVE);if(Ki!==null){var Zi=Ki==="false"?false:true;i.overlayUtilities.groupConfig.active=Zi;i.debugLog('Forcing zone property "active" to '+Zi,[d.QA,d.CXO])}(V=(ci=i.overlayUtilities.groupConfig).active)!==null&&V!==void 0?V:ci.active=true;(j=(vi=i.overlayUtilities.groupConfig).persistentInserts)!==null&&j!==void 0?j:vi.persistentInserts=false;if(i.overlayUtilities.groupConfig.persistentInserts){i.debugLog("persistentInserts turned ON for zone '".concat(i.overlayUtilities.groupConfig.zoneId,"' ."),[d.QA,d.CXO])}(X=(pi=i.overlayUtilities.groupConfig).onboarding)!==null&&X!==void 0?X:pi.onboarding=false;if(i.overlayUtilities.groupConfig.onboarding){i.debugLog(["Zone 'onboading' = '".concat(i.overlayUtilities.groupConfig.onboarding,"'. Will shutdown overlay.")],[d.CXO,d.QA]);i.destroyCXO()}i.currentVideoStatus.timerBasedBidding=i.overlayUtilities.groupConfig.persistentInserts||i.groupId==="9qI3hQnDUEyvHOhqq4LRXw"?true:false;var $i=i.logManager.getDebugParamValue(O.TIMER_BASED_BIDDING);if($i!==null){var it=$i.includes("t")?true:false;i.currentVideoStatus.timerBasedBidding=it;i.debugLog("Forcing timer based bidding to be '".concat(it,"'"),[d.QA,d.CXO])}if(((G=t.bidOrder)===null||G===void 0?void 0:G.length)>0){var tt=t.bidOrder.filter(();i.bidderOrder=tt;i.debugLog("Assigning bidderOrder from Group Configs: ".concat(tt),[d.QA,d.CXO])}if(!i.overlayUtilities.groupConfig.revContentWidgetId){i.bidderOrder=i.bidderOrder.filter((function(i){return i!==M.REV_CONTENT}))}(W=(mi=i.overlayUtilities.groupConfig).outbrain)!==null&&W!==void 0?W:mi.outbrain=false;if(!i.overlayUtilities.groupConfig.outbrain){i.bidderOrder=i.bidderOrder.filter((function(i){return i!==M.OUTBRAIN}))}if(!i.isADXAvailable){i.bidderOrder=i.bidderOrder.filter(()}(H=(gi=i.overlayUtilities.groupConfig).destroyInsertOnClose)!==null&&H!==void 0?H:gi.destroyInsertOnClose=false;if(!i.overlayUtilities.groupConfig.destroyInsertOnClose){i.debugLog("destroyInsertOnClose turned OFF for zone ".concat(i.overlayUtilities.groupConfig.zoneId,"' ."),[d.QA,d.CXO])}if(!sh(i.overlayUtilities.groupConfig.zIndexOverride)){i.overlayElement.style.setProperty("z-index",String(i.overlayUtilities.groupConfig.zIndexOverride));i.containerElement.style.setProperty("z-index",String(i.overlayUtilities.groupConfig.zIndexOverride))}if(!sh(i.overlayUtilities.groupConfig.regionInfo)){var et={country:(Y=i.overlayUtilities.groupConfig.regionInfo.country)!==null&&Y!==void 0?Y:null,region:(J=i.overlayUtilities.groupConfig.regionInfo.region)!==null&&J!==void 0?J:null,regionCode:(Q=i.overlayUtilities.groupConfig.regionInfo.regionCode)!==null&&Q!==void 0?Q:null,city:(K=i.overlayUtilities.groupConfig.regionInfo.city)!==null&&K!==void 0?K:null,zip:(Z=i.overlayUtilities.groupConfig.regionInfo.zip)!==null&&Z!==void 0?Z:null,latitude:($=i.overlayUtilities.groupConfig.regionInfo.latitude)!==null&&$!==void 0?$:null,longitude:(ii=i.overlayUtilities.groupConfig.regionInfo.longitude)!==null&&ii!==void 0?ii:null};i.analyticsEventDispatcher.assignEventsLocationData(et)}if(!sh(i.overlayUtilities.groupConfig.deviceInfo)){var nt={make:(ti=i.overlayUtilities.groupConfig.deviceInfo.make)!==null&&ti!==void 0?ti:null,model:(ei=i.overlayUtilities.groupConfig.deviceInfo.model)!==null&&ei!==void 0?ei:null,os:(ni=i.overlayUtilities.groupConfig.deviceInfo.os)!==null&&ni!==void 0?ni:null,osVersion:(si=i.overlayUtilities.groupConfig.deviceInfo.osVersion)!==null&&si!==void 0?si:null,browser:(ri=i.overlayUtilities.groupConfig.deviceInfo.browser)!==null&&ri!==void 0?ri:null,browserVersion:(oi=i.overlayUtilities.groupConfig.deviceInfo.browserVersion)!==null&&oi!==void 0?oi:null};i.analyticsEventDispatcher.assignEventsDeviceData(nt)}if(i.isBlockedURL){i.debugLog("Current URL is part of blocked URLs for requested zone.",[d.QA,d.CXO])}i.debugLog(["Player configurations: ",i.overlayUtilities.groupConfig.globalPlayerConfigs],[d.QA,d.CXO]);var st=JSON.stringify(t===null||t===void 0?void 0:t.insertConfig);i.debugLog(["Allowed insert configurations from server: ",JSON.parse(st)],[d.QA,d.CXO]);i.debugLog(["Allowed insert configurations from server: ",st],[d.SELENIUM]);if(!sh((ai=i.overlayUtilities.groupConfig)===null||ai===void 0?void 0:ai.insertConfig)){Object.keys((hi=i.overlayUtilities.groupConfig)===null||hi===void 0?void 0:hi.insertConfig).forEach((function(t){var e,n,s;var r;(e=(r=i.overlayUtilities.groupConfig.insertConfig)[t])!==null&&e!==void 0?e:r[t]=[];if(i.isCTV){i.overlayUtilities.groupConfig.insertConfig[t]=i.overlayUtilities.groupConfig.insertConfig[t].length===0&&((s=(n=i.overlayUtilities.groupConfig.insertConfig)===null||n===void 0?void 0:n.allowedInsertsCtvOnStream)===null||s===void 0?void 0:s.length)>0?i.overlayUtilities.groupConfig.insertConfig.allowedInsertsCtvOnStream:[]}var o=i.logManager.getDebugParamValue(O.ALLOWED_INSERT_TYPES_ADD);if(o!==null){var a=o.split("_");i.debugLog("URL Params insert types to add to allowed inserts: "+a,[d.QA,d.CXO]);for(var h=0;h<a.length;h++){i.overlayUtilities.groupConfig.insertConfig[t].push({insertType:a[h],overrides:null})}}var l=i.logManager.getDebugParamValue(O.ALLOWED_INSERT_TYPES_FORCE);if(l!==null){var u=l.split("_");i.debugLog(["Debug params forced allowed insert types for ".concat(t,": ").concat(String(u))],[d.QA,d.CXO]);var f=[];u.forEach((function(e){var n;var s=(n=i.overlayUtilities.groupConfig.insertConfig[t].find((function(i){return i.insertType===e})))!==null&&n!==void 0?n:{insertType:e,overrides:null};f.push(s)}));i.overlayUtilities.groupConfig.insertConfig[t]=[];f.forEach((function(e){return i.overlayUtilities.groupConfig.insertConfig[t].push(e)}))}if(t.includes("InArticle")||t.includes("OnStream")){var c=i.logManager.getDebugParamValue(O.ALLOWED_INSERT_TYPES_ONSTREAM_FORCE);if(c!==null){var u=c.split("_");i.debugLog(["Debug params forced allowed insert types for ".concat(t,": ").concat(String(u))],[d.QA,d.TAM,d.CXO]);var v=[];u.forEach((function(e){var n;var s=(n=i.overlayUtilities.groupConfig.insertConfig[t].find((function(i){return i.insertType===e})))!==null&&n!==void 0?n:{insertType:e,overrides:null};v.push(s)}));i.overlayUtilities.groupConfig.insertConfig[t]=[];v.forEach((function(e){return i.overlayUtilities.groupConfig.insertConfig[t].push(e)}))}}if(t.includes("Floating")){var p=i.logManager.getDebugParamValue(O.ALLOWED_INSERT_TYPES_FLOATING_FORCE);if(p!==null){var u=p.split("_");i.debugLog(["Debug params forced allowed insert types for ".concat(t,": ").concat(String(u))],[d.QA,d.TAM,d.CXO]);var m=[];u.forEach((function(e){var n;var s=(n=i.overlayUtilities.groupConfig.insertConfig[t].find((function(i){return i.insertType===e})))!==null&&n!==void 0?n:{insertType:e,overrides:null};m.push(s)}));i.overlayUtilities.groupConfig.insertConfig[t]=[];m.forEach(()}}i.overlayUtilities.groupConfig.insertConfig[t].forEach((function(e){i.defaultInsertTypeMapping.forEach((function(n){if(n.defaultType===e.insertType){e.insertType=n.mappedTypes[0];for(var s=1;s<n.mappedTypes.length;s++){i.overlayUtilities.groupConfig.insertConfig[t].push({insertType:n.mappedTypes[s],overrides:e.overrides})}}}));if(i.isCTV&&i.overlayUtilities.groupConfig.insertConfig.allowedInsertsCtvOnStream!==null&&i.overlayUtilities.groupConfig.insertConfig.allowedInsertsCtvOnStream.length>0){i.debugLog(["Setting insert configuration for CTV ".concat(t," equal to CTVOnStream insert configuration."),i.overlayUtilities.groupConfig.insertConfig.allowedInsertsCtvOnStream],[d.CXO,d.QA]);i.overlayUtilities.groupConfig.insertConfig[t]=__spreadArray([],i.overlayUtilities.groupConfig.insertConfig.allowedInsertsCtvOnStream,true)}var n=i.logManager.getDebugParamValue(O.INSERT_OVERRIDE_POSITION);if(n!==null){var s=n;if(sh(e.overrides)){e.overrides=[]}var r=e.overrides.find((function(i){return i.key.toLowerCase()===D.POSITION.toLowerCase()}));if(!sh(r)){i.debugLog("override position object: "+r,[d.CXO,d.QA]);r.value=s}else{e.overrides.push({key:D.POSITION,value:s})}}var o=i.logManager.getDebugParamValue(O.INSERT_OVERRIDE_Y_OFFSET);if(o!==null){var a=o;if(sh(e.overrides)){e.overrides=[]}var h=e.overrides.find(();if(!sh(h)){i.debugLog("override position object: "+h,[d.CXO,d.QA]);h.value=a}else{e.overrides.push({key:D.YOFFSET,value:a})}}}));var g=i.logManager.getDebugParamValue(O.ALLOWED_INSERT_TYPES_REMOVE);if(g!==null){var b=g.split("_");i.debugLog("URL Params remove allowed insert types: "+b,[d.QA,d.CXO]);i.overlayUtilities.groupConfig.insertConfig[t]=i.overlayUtilities.groupConfig.insertConfig[t].filter(()}if(!i.isCTV){i.overlayUtilities.groupConfig.insertConfig[t]=i.overlayUtilities.groupConfig.insertConfig[t].filter((function(e){var n=!(e.insertType===i.currentInserts.ctvOverlayCorner||e.insertType===i.currentInserts.ctvSqueeze);if(!n){i.debugLog("Filter out CTV insert ".concat(e.insertType," from available inserts for ").concat(t),d.CXO)}return n}))}else{i.overlayUtilities.groupConfig.insertConfig[t]=i.overlayUtilities.groupConfig.insertConfig[t].filter((function(e){var n=!(e.insertType!==i.currentInserts.ctvOverlayCorner&&e.insertType!==i.currentInserts.ctvSqueeze);if(!n){i.debugLog("Filter out NON-CTV insert ".concat(e.insertType," from available inserts for ").concat(t),d.CXO)}return n}))}}))}i.debugLog(["Allowed insert configurations after overrides and filters: ",i.overlayUtilities.groupConfig.insertConfig],[d.QA,d.CXO]);try{var rt=i.cxoverlay.foundVideoNode;i.videoElementContainer=(li=i.videoContainer)!==null&&li!==void 0?li:rt;i.debugLog(["videoElementContainer: ",i.videoElementContainer]);if(sh(rt)){i.debugLog(["Video not identified from bootstrapper. Will perform video search in container ".concat(i.qElementId,".")],d.QA);rt=i.videoElementContainer.tagName.toUpperCase()==="VIDEO"?i.videoElementContainer:i.findVideoElement(i.videoElementContainer)}else{i.currentVideoStatus.isShadowPlayer=i.testForShadowDOM(rt);i.debugLog(["Video handoff from bootstrapper in container ".concat(i.qElementId,": "),i.cxoverlay.foundVideoNode,(di=(ui=i.cxoverlay.foundVideoNode)===null||ui===void 0?void 0:ui.parentElement)===null||di===void 0?void 0:di.className],d.QA)}if(i.videoElementContainer.tagName.toUpperCase()==="VIDEO"){i.videoElementContainer=i.getParent(i.videoElementContainer)}if(rt!==null){i.debugLog("componentDidLoad --foundVideoElement");i.videoUrl=i.getVideoSource(rt);if(i.videoUrl!==null){i.debugLog("componentDidLoad --foundVideoSourceElement")}else{i.debugLog("componentDidLoad --no video source found.")}}else{i.debugLog("componentDidLoad --noVideoElementFound")}if(!sh(i.videoUrl)&&i.videoUrl!==""){rt["cxInitialized"]=true;i.videoElement=rt;i.insertLogicManager.elementHost=rt;i.determinePlayerType();i.debugLog(["CX attached to player: ",i.videoElement,"CX video url found: "+i.videoUrl],[d.QA,d.TAM,d.CXO]);i.determinePlayerMode();i.addEvents();i.checkCurrentVideoStatus();i.timers.updateCXOTimer.execute();i.setNextAutomaticBidTime();i.checkIfMomentsNeeded()}else{i.debugLog("componentDidLoad --noSourceFound");if(!sh(rt)){rt["cxInitialized"]=false}i.timers.reinitializeVideoElementTimer.reset(1e3)}}catch(t){i.debugLog(["failed to load data",t],[d.CXO,d.QA,d.ERROR])}if(!sh(i.overlayUtilities.groupConfig.zoneId)){i.overlayUtilities.addSync(i.overlayUtilities.groupConfig.zoneId)}i.overlaySizerElement.style.setProperty("display","block")}var ot={};var at=["countryCode","regionInfo","globalPlayerConfigs","deviceInfo"];for(var ht in i.overlayUtilities.groupConfig){if(!at.includes(ht)){ot[ht]=i.overlayUtilities.groupConfig[ht]}}ot.videoPlayer=i.playerType;ot.videoPlayerConfigs=i.playerConfig;i.analyticsEventDispatcher.sendOverlayEvent(F.OVERLAY_GROUP_CONFIGS,M.PLATFORM,i.overlayUtilities.currentWindowLocation.href,Boolean(i.overlayUtilities.foundUID!=="NOT_FOUND"),i.playerMode,i.overlayUtilities.elapsedOverlayTime,i.overlayUtilities.activeOverlayTime,i.overlayUtilities.containerViewabilityValue,ot);i.debugLog("Bidding mode: ".concat(i.isOSDAvailable?i.overlayUtilities.osdConfig.slotRefreshParams.pbjsObject!=null?"On-Stream Direct Prebid":"On-Stream Direct GAM Only (No Prebid)":"On-Stream Original"),[d.QA,d.CXO,d.TAM]);if(i.isOSDAvailable){i.bidderOrder=[M.ADK,M.ADK];i.debugLog("OSD bidding enabled - setting maximum rebid count to ".concat(i.bidderOrder.length,"."),[d.QA,d.CXO,d.TAM])}}))};i.prototype.createPrebidIframe=function(){var i=this;if(document.querySelector("#cx_prebid_iframe")===null){var t=document.createElement("iframe");t.id="cx_prebid_iframe";t.width="0";t.height="0";t.setAttribute("style","background:transparent; opacity:0; padding:0; position:absolute; display:block; top:0px; left:0px; width:".concat(t.width,"px; height:").concat(t.height,"px; overflow:hidden;"));t.setAttribute("frameborder","0");var e='\n      <html>\n      <head>\n      <script src="https://inserts.catapultx.com/scripts/prebid7.31.0.js" type="text/javascript"><\/script>\n      </body>\n      </html>';var n=false;var s=setInterval((function(){var r;if(t.contentWindow!==null&&t.contentWindow.document!==null&&!n){n=true;t.contentWindow.document.open();t.contentWindow.document.write(e);t.contentWindow.document.close()}if(typeof((r=t===null||t===void 0?void 0:t.contentWindow)===null||r===void 0?void 0:r["pbjs"])!=="undefined"){i.overlayUtilities.osdConfig.slotRefreshParams.pbjsObject=t.contentWindow["pbjs"];window["pbjs"]=t.contentWindow["pbjs"];t.contentWindow["googletag"]=i.overlayUtilities.osdConfig.slotRefreshParams.gtagObject;clearInterval(s)}}),10);document.body.appendChild(t)}else{this.debugLog(["PBJS object iframe already loaded."],[d.CXO,d.QA])}};i.prototype.cxExternalEvent=function(i){var t;i.stopPropagation();this.debugLog(["cx-external-event received: ",i],d.QA);if(((t=i.detail)===null||t===void 0?void 0:t.type)==="update-prebid-params"){this.overlayUtilities.osdConfig=this.overlayUtilities.normalizeOSDConfig(i.detail.osdConfig);this.debugLog(["OSD configuration received after initialization of cx-overlay: ",this.overlayUtilities.osdConfig],[d.QA,d.TAM,d.CXO]);this.debugLog("Bidding mode: ".concat(this.isOSDAvailable?this.overlayUtilities.osdConfig.slotRefreshParams.pbjsObject!=null?"On-Stream Direct Prebid":"On-Stream Direct GAM Only (No Prebid)":"On-Stream Original"),[d.QA,d.CXO,d.TAM])}};i.prototype.testForShadowDOM=function(i){if(i.getRootNode().host!=null){this.debugLog("Player is contained within a Shadow DOM component.",[d.QA,d.CXO]);return true}else{return false}};i.prototype.createLoggingOverlay=function(){if(document.getElementsByClassName("cxLoggingParent").length===0){this.loggingOverlay=document.createElement("div");this.loggingOverlay.setAttribute("style","position:fixed; display:block; width:100%; height:100%; opacity:1; z-index:100;");this.loggingOverlay.className="cxLoggingParent";var i=document.createElement("div");i.setAttribute("style","position:fixed; width:100%; height:100%; overflow-y:scroll; opacity:.8; top:0px; left:0px; z-index:100; background:rgba(0,0,0,.25); user-select:text;");i.className="loggingContainer";var t=document.createElement("div");t.setAttribute("style","background:black; color:rgb(255,255,255); padding:15px; position:fixed; top:0px; bottom:auto; left:auto; right:20px; opacity:1; pointer-events:auto; z-index:250; user-select:none; cursor:pointer;");t.innerHTML="x";t.id="loggingContainerClose";t.addEventListener("click",(function(){if(i.style.getPropertyValue("display")==="none"){i.style.setProperty("display","block");t.innerHTML="x";i.scrollTo(0,i.scrollHeight)}else{i.style.setProperty("display","none");t.innerHTML=""}}));this.loggingOverlay.appendChild(i);this.loggingOverlay.appendChild(t);document.querySelector("body").insertBefore(this.loggingOverlay,document.querySelector("body").firstChild)}};i.prototype.addConsoleLog=function(i){if(sh(this.loggingOverlay)){this.createLoggingOverlay()}if(this.loggingOverlay.parentElement!==this.cxoverlay.parentElement){this.cxoverlay.parentElement.insertBefore(this.loggingOverlay,this.cxoverlay)}var t=this.loggingOverlay.querySelector(".loggingContainer");var e=document.createElement("p");e.innerText=i.log[4];e.setAttribute("style",i.log[2]);e.style.setProperty("margin","0px");e.style.setProperty("display","block");e.className="logEvent "+i.type;var n=t.scrollTop>t.scrollHeight-t.getBoundingClientRect().height-30||t.scrollTop===0?true:false;t.appendChild(e);if(n){t.scrollTo(0,t.scrollHeight)}};i.prototype.addKeypressEvents=function(){var i=this;var t={};var e=window.self;try{if(window.self!==window.top){this.debugLog("Attempting to attach event listeners to top window: ".concat(window.top.location.href),[d.CXO,d.QA]);e=window.top}}catch(i){this.debugLog("Unable to attach event listeners to top window.",[d.CXO,d.QA])}e.addEventListener("keydown",(function(e){t[e.code.toLowerCase()]=true;i.debugLog("key down: ".concat(e.code," = ").concat(t[e.code.toLowerCase()]),[d.CXO]);if(t["keyl"]&&t["semicolon"]&&(t["shiftleft"]||t["shiftRight"])){if(t["keya"]){i.logManager.logMode=d.ALL;i.debugLog("Shift + : + l + a => Show all console logs.",[d.CXO,d.IMPORTANT,d.QA]);i.logManager.showStoredLogs()}else if(t["keym"]){i.logManager.logMode="".concat(d.INFO,"-").concat(d.QA,"-").concat(d.ERROR,"-").concat(d.INSERT,"-").concat(d.IMPORTANT);i.debugLog("Shift + : + l + m => Show most console logs.",[d.CXO,d.IMPORTANT,d.QA]);i.logManager.showStoredLogs()}else if(t["keyq"]){i.logManager.logMode="".concat(d.INFO,"-").concat(d.QA,"-").concat(d.ERROR);i.debugLog("Shift + : + l + q => Show QA console logs.",[d.CXO,d.IMPORTANT,d.QA]);i.logManager.showStoredLogs()}else if(t["keyh"]){i.logManager.logMode+="-".concat(d.HIGHLIGHT);i.debugLog("Shift + : + l + h => Show HIGHLIGHT console logs.",[d.HIGHLIGHT]);i.logManager.showStoredLogs()}else if(t["keys"]){i.logManager.logMode+="-".concat(d.SELENIUM);i.debugLog("Shift + : + l + s => Show SELENIUM console logs.",[d.SELENIUM]);i.logManager.showStoredLogs()}}else if(t["keyc"]&&t["keyx"]&&t["keyo"]&&(t["shiftleft"]||t["shiftRight"])){if(t["keyk"]){i.debugLog("Shift + c + x + o + k => Removing CX-Overlay and all video events");i.destroyCXO()}else if(t["keyb"]){i.debugLog("Shift + c + x + o + b => Forcing CX-Overlay bid request");i.forceNextBid=true;i.forceNextInsert=true;i.overlayUtilities.rebidCount=0;i.resetCarouselData();i.timers.initiateBidRequestTimer.execute()}else if(t["keyu"]&&t["keys"]){i.debugLog("Shift + c + x + o + u + s => Forcing CX-Overlay user sync");i.overlayUtilities.addSync(i.overlayUtilities.groupConfig.zoneId)}else if(t["keym"]&&t["keyl"]){i.logManager.logMode="".concat(d.INFO,"-").concat(d.QA,"-").concat(d.ERROR,"-").concat(d.INSERT,"-").concat(d.IMPORTANT);i.debugLog("Shift + c + x + o + l + m => Forcing CX-Overlay QA console logs",[d.CXO,d.IMPORTANT,d.QA]);i.logManager.showStoredLogs()}}}));e.addEventListener("keyup",(function(e){t[e.code.toLowerCase()]=false;i.debugLog("key up: ".concat(e.code," = ").concat(t[e.code.toLowerCase()]),[d.CXO])}))};i.prototype.destroyCXO=function(){var i=this;this.clearRemainingInserts();this.cancelAllTimers();this.removeVideoEvents();this.removeWindowEvents();this.cxoverlay.removeEventListener("cx-external-event",this.registeredCXExternalEvent);var t=0;var e=setInterval((function(){if(!sh(i.cxoverlay.parentElement)){clearInterval(e);i.debugLog("cx-overlay removed from page",[d.CXO,d.QA,d.IMPORTANT]);i.cxoverlay.parentElement.removeChild(i.cxoverlay)}else{i.debugLog("attempted to remove cxoverlay - cxoverlay has no parent element.",[d.CXO,d.QA,d.IMPORTANT]);if(t++>20){clearInterval(e)}}}),500);this.debugLog("Releasing <".concat(this.cxoverlay.tagName,'> from video player "').concat(this.qElementId,'" and stopping all running code.'),[d.CXO,d.QA]);this.qElementId=null;this.videoElement=null;this.cxoActive=false;this.shouldRequestMoments=false};i.prototype.cancelAllTimers=function(){for(var i in this.timers){this.debugLog("Canceling timer '".concat(this.timers[i].name,"'"),[d.QA]);this.timers[i].cancel()}this.overlayUtilities.cancelAllTimers()};i.prototype.findVideoElement=function(i){this.debugLog("findVideoElement");var t=null;var e=i.getElementsByTagName("video");if(e.length>1){for(var n=0;n<e.length;n++){if(!this.isAdNode(i,e[n])){t=e[n];break}else{this.debugLog(["Video node is a suspected advertisement: ",e[n]],[d.CXO,d.QA]);this.debugLog("Video node is a suspected advertisement: ",d.SELENIUM)}}if(t===null){this.debugLog(["All videos within advert container. Defaulting to first video node.",e[0]],[d.CXO,d.QA]);t=e[0]}}else if(e.length===1){t=e[0]}return t};i.prototype.isAdNode=function(i,t){var e;var n=false;if(t!==null&&i!==t){if(!!(t===null||t===void 0?void 0:t.title.toLowerCase().includes("advertisement"))||!sh(t.id)&&(t.id.toLowerCase().includes("_ad")||t.id.toLowerCase().includes("-ad"))||!sh(t.className)&&(t.className.toLowerCase().includes("-ad")||t.className.toLowerCase().includes("_ad"))){n=!this.playerType.includes(T.VIDAZOO)?true:false}else{this.debugLog("Current Node: "+!sh(t.id)+"|"+!sh(t.id)+" - "+(t===null||t===void 0?void 0:t.id)+" - "+(t===null||t===void 0?void 0:t.className)+" - "+((e=t.parentElement)===null||e===void 0?void 0:e.outerHTML.substring(0,50)),d.IMPORTANT);n=this.isAdNode(i,t.parentElement)}}this.debugLog("Current Node isAd: "+(t===null||t===void 0?void 0:t.outerHTML.substring(0,50))+": "+n,d.IMPORTANT);return n};i.prototype.determinePlayerType=function(){var i,t,e,n,s,r,o,a;var h;var l=-1;var u=function(i){var t=f.overlayUtilities.groupConfig.globalPlayerConfigs.findIndex((function(t){return t.player===i}));if(t!==-1){f.overlayUtilities.groupConfig.globalPlayerConfigs.push(f.overlayUtilities.groupConfig.globalPlayerConfigs.splice(t,1)[0])}};var f=this;for(var c in T){u(c)}var v="";this.overlayUtilities.groupConfig.globalPlayerConfigs.forEach((function(i){v+=v==""?i.player:", "+i.player}));this.debugLog(["Player detection order: "+v],[d.CXO,d.QA]);for(var p=0;p<this.overlayUtilities.groupConfig.globalPlayerConfigs.length&&l===-1;p++){if(!sh(this.overlayUtilities.groupConfig.globalPlayerConfigs[p].searchTerm)&&this.overlayUtilities.groupConfig.globalPlayerConfigs[p].searchTerm!=""){var m=this.findElementFromNode(this.overlayUtilities.groupConfig.globalPlayerConfigs[p].searchTerm,this.videoElementContainer);if(!sh(m)){this.videoContainerSearchNode=(i=this.getParent(m))!==null&&i!==void 0?i:m;l=p;break}}}(t=this.videoContainerSearchNode)!==null&&t!==void 0?t:this.videoContainerSearchNode=this.videoElementContainer;if(l===-1){l=this.overlayUtilities.groupConfig.globalPlayerConfigs.findIndex}));this.debugLog(["Player type not found in player configs. Defaulting to UNKNOWN player."],[d.QA,d.CXO]);this.analyticsEventDispatcher.sendOverlayEvent(F.OVERLAY_PLAYER_UNKNOWN,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue)}this.playerConfig=this.overlayUtilities.groupConfig.globalPlayerConfigs[l];this.playerType=this.playerConfig.player;if(!sh(this.playerConfig.excludedPlayerModes)&&this.playerConfig.excludedPlayerModes.length>0){this.playerModeExclusionList=this.playerConfig.excludedPlayerModes}if(!sh((e=this.playerConfig)===null||e===void 0?void 0:e.playerRoot)){this.videoContainerSearchNode=(n=this.findElementFromNode(this.playerConfig.playerRoot,this.videoContainerSearchNode))!==null&&n!==void 0?n:this.videoContainerSearchNode;this.debugLog("Player root node found: ".concat((r=(s=this.videoContainerSearchNode)===null||s===void 0?void 0:s.outerHTML)===null||r===void 0?void 0:r.substring(0,50),"."),[d.CXO,d.IMPORTANT])}if(!sh(this.playerConfig.domainOverrides)){var g=this.overlayUtilities.currentWindowLocation.hostname;var b=this.playerConfig.domainOverrides.filter((function(i){return!!i.domains.find((function(i){return g.includes(i)}))}));if(!sh(b)){var y=JSON.stringify(this.playerConfig);for(var w in b[0]){if(w!=="domains"){this.playerConfig[w]=b[0][w]}}this.debugLog(["Domain overrides player config: ",y,JSON.stringify(this.playerConfig)],[d.CXO,d.QA])}}this.debugLog(["Player modes not allowed: ".concat(this.playerModeExclusionList.length>0?this.playerModeExclusionList:"none")],[d.CXO,d.QA]);var O=this.qElementId;var I=document.querySelector(this.qElementId);if(sh(this.playerConfig.anchorTarget)){if(I===this.videoElement){I=this.getParent(I);I.classList.add("cx-default-anchor");O=".cx-default-anchor"}}(h=this.playerConfig).anchorTarget||(h.anchorTarget=O);(o=this.videoContainerSearchNode)!==null&&o!==void 0?o:this.videoContainerSearchNode=(a=this.getParent(document.querySelector(this.qElementId)))!==null&&a!==void 0?a:I;this.debugLog(["PLAYER DETECTED: ".concat(this.playerType,"\n  Configuration loaded:"),this.playerConfig],[d.QA,d.CXO,d.TAM]);this.debugLog("PLAYER DETECTED: "+this.playerType,[d.SELENIUM]);if(this.playerType===T.ANIPLAYER){this.cxoverlay.style.setProperty("display","block");this.cxoverlay.style.setProperty("position","absolute");this.cxoverlay.style.setProperty("overflow","visible")}this.moveCxo()};i.prototype.findElementFromNode=function(i,t){var e;var n=t;var s=false;try{if(n.querySelector(i)!==null){s=true;n=n.querySelector(i)}var r=10;while(!s&&r-- >0){if(typeof n.tagName!=="undefined"&&(n.tagName.toLowerCase()===i.toLowerCase()||n.matches(i))){s=true;this.debugLog("findElementFromNode search ".concat(i," found ").concat(9-r," nodes above node ").concat((e=t===null||t===void 0?void 0:t.outerHTML)===null||e===void 0?void 0:e.substring(0,50)," container."),[d.CXO])}else{var o=this.getParent(n);if(!sh(o)){n=o}else{break}}}}catch(t){this.debugLog("findElementFromNode - Fail on querySelector for ".concat(i),d.ERROR)}var a=null;if(s){a=n}return a};i.prototype.findShadowNode=function(i,t){if(t===void 0){t=false}var e=this.videoElementContainer;var n;var s=10;while(sh(n)&&s-- >0){if(typeof(e===null||e===void 0?void 0:e.tagName)!=="undefined"&&(e.tagName.toLowerCase()===i.toLowerCase()||e.matches(i))){n=e}else if((e===null||e===void 0?void 0:e.querySelector(i))!=null){n=e.querySelector(i)}else{var r=this.getParent(e);if(!sh(r)){e=r}else{break}}}if(sh(n)&&!sh(this.videoElement)&&s===0){s=10;e=this.videoElement;while((typeof n==="undefined"||n===null)&&s-- >0){if(typeof(e===null||e===void 0?void 0:e.tagName)!=="undefined"&&(e.tagName.toLowerCase()===i.toLowerCase()||e.matches(i))){n=e}else if((e===null||e===void 0?void 0:e.querySelector(i))!=null){n=e.querySelector(i)}else{var r=this.getParent(e);if(!sh(r)){e=r}else{break}}}}if(!t){this.debugLog("Node found in shadow DOM: ".concat(n===null||n===void 0?void 0:n.outerHTML.substring(0,50)," at a distance of ").concat(9-s," node(s)."),[d.CXO,d.QA])}return n};i.prototype.getParent=function(i,t){if(t===void 0){t=false}var e;var n=i;if(!sh(n)){n=i.parentElement||((i===null||i===void 0?void 0:i.getRootNode())===i||t?(e=i===null||i===void 0?void 0:i.getRootNode())===null||e===void 0?void 0:e.host:i===null||i===void 0?void 0:i.getRootNode())||null;if((n===null||n===void 0?void 0:n.nodeName)==="#document"){n=null}}return n};i.prototype.reinitializeVideoElement=function(i){var t=this;this.debugLog("reinitializeVideoElement");this.checkParentElementAvailability();var e=null;var n=!this.isVideoAdvertisement?i.getElementsByTagName("video"):[];var s=false;if(n.length>1){n.forEach((function(n){var r=n;if(!s&&(document.contains(n)||t.currentVideoStatus.isShadowPlayer)){if(e===null&&!t.isAdNode(i,r)){if(sh(n["cxInitialized"])||n["cxInitialized"]==false){e=n}else{s=true;t.debugLog(["Video node already initialized: ",n],[d.CXO,d.QA]);t.destroyCXO()}e=r}else{t.debugLog(["Video node is a suspected advertisement: ",n],[d.CXO,d.QA])}}}))}if(e===null){n.forEach((function(i){var n=i;if(!s&&(document.contains(i)||t.currentVideoStatus.isShadowPlayer)){if(e===null&&!t.isAdNode(n.parentElement,n)){if(sh(i["cxInitialized"])||i["cxInitialized"]==false){e=i}else{s=true;t.debugLog(["Video node already initialized: ",i],[d.CXO,d.QA]);t.destroyCXO()}e=n}else{t.debugLog(["Video node is a suspected advertisement: ",i],[d.CXO,d.QA])}}}))}if(e==null){if(!s){this.timers.reinitializeVideoElementTimer.reset(1e3)}}else{var r=e;this.videoUrl=this.getVideoSource(r);if(!sh(this.videoUrl)&&this.videoUrl!==""){this.debugLog("reinitializeVideoElement --foundVideoSource");r["cxInitialized"]=true;this.videoElement=r;this.insertLogicManager.elementHost=r;this.determinePlayerType();this.debugLog(["CX attached to player: ",this.videoElement],[d.QA,d.CXO]);this.shouldRequestMoments=!sh(this.overlayUtilities.groupConfig)&&this.overlayUtilities.groupConfig.persistentInserts?false:true;this.resetVideoStatus();if(this.cxWait&&this.cxoverlay.getAttribute("cx-wait")==null){this.cxWait=false}this.debugLog("CX video url found (reinitialized): "+this.videoUrl,[d.QA,d.CXO]);this.determinePlayerMode();this.addEvents();this.checkCurrentVideoStatus();this.checkIfMomentsNeeded();this.currentAnchorPosition="none";this.moveCxo();if(this.overlayUtilities.groupConfig.persistentInserts&&!sh(this.activeResource)&&this.activeResource.tagName.toLowerCase().includes("squeeze")){this.dispatchVideoSqueezeLayers()}}else{this.debugLog("reinitializeVideoElement --no video source found.");this.checkParentElementAvailability();this.timers.reinitializeVideoElementTimer.reset(1e3)}}return e};i.prototype.checkParentElementAvailability=function(){var i;if(!this.currentVideoStatus.isShadowPlayer){if(!document.contains(this.videoElementContainer)){var t=this.videoContainer;if(t!==null){this.videoElementContainer=(i=t.parentElement)!==null&&i!==void 0?i:t}}}};i.prototype.validateInsertTypeAllowedList=function(i,t){var e=this;var n;var s;this.debugLog(["validateInsertTypeAllowedList BEFORE FILTERS: ",__spreadArray([],t,true)]);var o=this.logManager.getDebugParamValue(O.REMOVE_ASSET_DATA_OBJECT);if(o!==null){var a=o;if(!sh(i.data.assets)&&!sh(a)){if(a.indexOf("headline")>=0||a.indexOf("title")>=0){i.data.assets=i.data.assets.filter((function(i){return i.id!==1}))}if(a.indexOf("subhead")>=0||a.indexOf("description")>=0){i.data.assets=i.data.assets.filter((function(i){return i.id!==2}))}if(a.indexOf("cta")>=0){i.data.assets=i.data.assets.filter((function(i){return i.id!==3}))}if(a.indexOf("icon")>=0){i.data.assets=i.data.assets.filter}))}if(a.indexOf("image")>=0){i.data.assets=i.data.assets.filter}))}}}for(var h=0;h<t.length;h++){var l=t[h].replace(/-/g,"_").toUpperCase();if(!Object.values(S).includes(S[l])){this.debugLog("validateInsertTypeAllowedList"+"\n --removeItem = ".concat(t[h]));t.splice(h,1);h--}}var u=__spreadArray([],t,true);var f=this.isOverflowHidden;if(this.isIframePlayer){u=u.filter((function(i){return i.toLowerCase().indexOf("bleedover")===-1}));this.debugLog("Content will be inside of an iframe container. Bleedover types have been removed.",[d.QA,d.CXO])}else if(f.hiddenX||f.hiddenY){if(f.hiddenX){u=u.filter((function(i){return i.toLowerCase().indexOf("bleedover-wing")===-1}));this.debugLog("Content overflow hidden along the x-axis. Bleedover wing types have been removed.",[d.QA,d.CXO])}if(f.hiddenY){u=u.filter((function(i){return i.toLowerCase().indexOf("bleedover-flap")===-1}));this.debugLog("Content overflow hidden along the y-axis. Bleedover flap types have been removed.",[d.QA,d.CXO])}}else{this.debugLog("Content not within an iframe or overflow:hidden container. Will not filter any insert types.",[d.CXO])}if(u.length>0){t=__spreadArray([],u,true)}else{if(!this.isMobile){if(this.overlayUtilities.currentDimensions.isFloating){t=[this.currentInserts.nativeOverlayFullwidth]}else{t=[this.currentInserts.nativeOverlayFullwidth,this.currentInserts.nativeOverlayCorner,this.currentInserts.nativeOverlayIcon]}}else{t=[this.currentInserts.nativeOverlayFullwidth]}}if(!this.isWideScreenVideoPlayer&&!this.isVideoFileWidescreen){this.debugLog("Removing squeezeback insert types due to video not being in 16:9 format",[d.CXO,d.QA]);t=t.filter((function(i){return i.toLowerCase().indexOf("squeeze")===-1}));if(this.isVerticalVideo&&t.findIndex((function(i){return i===e.currentInserts.nativeOverlayFullwidth}))!==-1){this.debugLog("Video type detected as vertical video, and fullwidth overlay is available. Will remove all other insert types.",[d.CXO,d.QA]);t=t.filter((function(i){return i===e.currentInserts.nativeOverlayFullwidth}))}}else{var c=!sh(this.videoElement)?this.videoElement.videoWidth/this.videoElement.videoHeight:16/9;this.debugLog("Will not remove squezeback types: "+this.overlayUtilities.percentageDifference(16/9,c),d.CXO)}if(i.impressionType===r.NATIVE){t=t.filter}));if(t.findIndex}))!==-1&&(!this.isWideScreenVideoPlayer&&!this.isVideoFileWidescreen)){this.debugLog("Is Insert Native Custom Squeeze? : "+(t.findIndex((function(i){return i===e.currentInserts.nativeCustomSqueeze}))==-1));this.debugLog("Is Insert CTV Squeeze? : "+(t.findIndex((function(i){return i===e.currentInserts.ctvSqueeze}))==-1));t=t.filter((function(i){return i!==e.currentInserts.nativeCustomSqueeze&&i!==e.currentInserts.ctvSqueeze}))}var v=i.data.assets.find((function(i){return i.id>=5&&(i.img.w===1200&&i.img.h===627||i.img.isSqueezeback===true)}));if(!sh(v)){var p=!sh(v.img)&&!sh(v.img.url)?v.img.url:"";var m=p.length>0?"pre"+p.replace(/[!^\W]/g,""):"notfound";(n=(s=v.img).isSqueezeback)!==null&&n!==void 0?n:s.isSqueezeback=this.isCustomSqueezebackImage(m);this.debugLog("Is valid custom squeezeback image? "+v.img.isSqueezeback,[d.CXO,d.QA]);if(!v.img.isSqueezeback){t=t.filter}))}else{if(this.isCTV){if(t.findIndex((function(i){return i===e.currentInserts.ctvSqueeze}))!==-1){t=t.filter((function(i){return i===e.currentInserts.ctvSqueeze}));this.debugLog("Squeezeback imagery detected and player mode allows CTV custom squeezeback. Remove all other insert types.",[d.CXO,d.QA])}else{this.debugLog("Squeezeback imagery detected, but custom squeezeback is not an allowed insert type.",[d.CXO,d.QA])}}else{if(t.findIndex((function(i){return i===e.currentInserts.nativeCustomSqueeze}))!==-1){t=t.filter((function(i){return i===e.currentInserts.nativeCustomSqueeze}));this.debugLog("Squeezeback imagery detected and player mode allows custom squeezeback. Remove all other insert types.",[d.CXO,d.QA])}else{this.debugLog("Squeezeback imagery detected, but custom squeezeback is not an allowed insert type.",[d.CXO,d.QA])}}}}else{this.debugLog("No squeezeback images available. Removing custom squeezeback inserts from options.",[d.CXO,d.QA]);t=t.filter((function(i){return i!==e.currentInserts.nativeCustomSqueeze&&i!==e.currentInserts.ctvSqueeze}))}u=__spreadArray([],t,true);var g=!sh(i.data.assets.find})))?true:false;var b=!sh(i.data.assets.find})))?true:false;if(b&&!g){this.debugLog("No logo available. Filtering out insert types that include logos.",[d.QA,d.CXO]);var y=[this.currentInserts.nativeOverlayIcon,this.currentInserts.nativeOverlayFullwidth,this.currentInserts.nativeSqueeze];u=u.filter}));this.debugLog("Remaining 'no logo' insert count: ".concat(u.length),[d.QA,d.CXO])}if(u.length>0){t=__spreadArray([],u,true)}}else if(i.impressionType===r.DISPLAY){if(t.findIndex((function(i){return i===e.currentInserts.nativeCustomSqueeze}))!==-1){t=t.filter((function(i){return i!==e.currentInserts.nativeCustomSqueeze&&i!==e.currentInserts.ctvSqueeze}));this.debugLog("Banner bid received. Will remove Custom Squeezeback as an available insert option.",[d.CXO])}}if(!sh(this.activeResource)){u=__spreadArray([],t,true);var w=this.activeResource.tagName.toLowerCase();switch(w){case this.currentInserts.displayOverlayFullwidth:w=this.currentInserts.nativeOverlayFullwidth;break;case this.currentInserts.displayFlap:w=this.currentInserts.nativeFlap;break;case this.currentInserts.displayWing:w=this.currentInserts.nativeWing;break;case this.currentInserts.displayOverlayCorner:w=this.currentInserts.nativeOverlayCorner;break;case this.currentInserts.displaySqueeze:w=this.currentInserts.nativeSqueeze;break}u=u.filter((function(i){return i===w}));if(u.length>0){t=__spreadArray([],u,true);this.debugLog("".concat(w," still available in allowed inserts list. Will be preferred insert at insert creation"),[d.CXO])}}if(i.impressionType===r.NATIVE){var T=i.data.assets.find}));if(!sh(T)){u=__spreadArray([],t,true);this.debugLog(["validateInsertTypeAllowedList BEFORE FLOATING FILTERS: ",__spreadArray([],u,true)]);if(T.img.w/T.img.h>.6){u=u.filter((function(i){return i.toLowerCase().indexOf("wing")===-1}))}else{u=u.filter((function(i){return i.toLowerCase().indexOf("flap")===-1}))}if(u.length>0){t=__spreadArray([],u,true)}}}this.debugLog(["validateInsertTypeAllowedList AFTER FILTERS: ",__spreadArray([],t,true)]);return t};i.prototype.isCustomSqueezebackImage=function(i){var t=true;var e=this.overlayElement.querySelector("#"+i);this.debugLog(["Testing image for squeezeback qualities:",e],[d.CXO,d.QA]);var n=1200/627;if(!sh(e)&&e.complete&&e.naturalWidth/e.naturalHeight===n){var s=document.createElement("canvas");s.width=e.naturalWidth;s.height=e.naturalHeight;var r=s.getContext("2d");r.globalCompositeOperation="source-over";r.drawImage(e,0,0);var o=r.getImageData(0,0,s.width,s.height).data;var a=this.getPixelValue(o,Math.floor(s.width*.5),Math.floor(s.height*.5),s.width);for(var h=0;h<=100;h++){var l=Math.floor(s.width*.25)+Math.floor(Math.random()*s.width*.5);var u=Math.floor(s.height*.25)+Math.floor(Math.random()*s.height*.5);var f=this.getPixelValue(o,l,u,s.width);if(!(a[0]===f[0]&&a[1]===f[1]&&a[2]===f[2]&&a[3]===f[3])){t=false;this.debugLog(["Squeezeback image not detected. Mismatched pixels:",a,f],[d.QA,d.CXO]);break}}}else{t=false}return t};i.prototype.getPixelValue=function(i,t,e,n){var s=(e*n+t)*4;return[i[s],i[s+1],i[s+2],i[s+3]]};i.prototype.removeProhibitedInsertTypes=function(i){if(i===void 0){i=[]}this.debugLog(["removeProhibitedInsertTypes BEFORE FILTERS: ",__spreadArray([],i,true)]);var t=this.isOverflowHidden;if(this.overlayUtilities.currentDimensions.isFullscreen||this.isIframePlayer){var e=__spreadArray([],i,true);i=i.filter((function(i){return i.toLowerCase().indexOf("bleedover")===-1}));if(e.length!=i.length){this.debugLog(["Bleedover types will not render in fullscreen/iframe/overflow=hidden mode. Allowed inserts after filtered:",i],[d.QA,d.CXO])}}else{if(t.hiddenY){var e=__spreadArray([],i,true);i=i.filter((function(i){return i.toLowerCase().indexOf("bleedover-flap")===-1}));if(e.length!=i.length){this.debugLog(["Overflow hidden on the y-axis. Flap inserts will not be visible. Removing from available options. Allowed inserts after page width wings filter:",i],[d.QA,d.CXO])}}if(t.hiddenX||!this.doesWingInsertFit){var e=__spreadArray([],i,true);i=i.filter((function(i){return i.toLowerCase().indexOf("bleedover-wing")===-1}));if(e.length!==i.length){var n=t.hiddenX?"Overflow hidden on the x-axis. Wing inserts will not be visible. Removing from available options. Allowed inserts after page width wings filter:":"Window width is not large enough to support wing insert. Removing from available options. Allowed inserts after page width wings filter:";this.debugLog([n,i],[d.QA,d.CXO])}}}return i};i.prototype.determineFloatingPosition=function(i){if(i===void 0){i=null}i!==null&&i!==void 0?i:i=this.overlayUtilities.currentDimensions;var t=N.BOTTOM_RIGHT;var e=i.top+i.height/i.scale*.5;var n=i.left+i.width/i.scale*.5;var s=i.elementScale;var r=e<i.winHeight*.5?true:false;var o=n<i.winWidth*.5?true:false;this.floatingCardinalDirections={top:"auto",bottom:"auto",left:"auto",right:"auto"};if(r){t=o?N.TOP_LEFT:N.TOP_RIGHT;this.floatingCardinalDirections.top=i.top+"px"}else{t=o?N.BOTTOM_LEFT:N.BOTTOM_RIGHT;this.floatingCardinalDirections.bottom=i.bottom+"px"}if(o){this.floatingCardinalDirections.left=i.left+"px"}else{this.floatingCardinalDirections.right=i.right+"px"}if(Math.abs(n/i.winWidth-.5)<.1){if(Math.abs(e/i.winHeight-.5)<.1){t=N.CENTER}else if(i.top<50){t=N.TOP_CENTER}}this.debugLog("determineFloatingPosition"+"\n --position = top - ".concat(i.top," : bottom - ").concat(i.bottom," : left - ").concat(i.left," : right - ").concat(i.right," : width - ").concat(i.width," : height - ").concat(i.height," : scale - ").concat(i.scale,"}")+"\n --position = ".concat(t)+"\n --top = ".concat(this.floatingCardinalDirections.top)+"\n --bottom = ".concat(this.floatingCardinalDirections.bottom)+"\n --left = ".concat(this.floatingCardinalDirections.left)+"\n --right = ".concat(this.floatingCardinalDirections.right)+"\n --scale = ".concat(s)+"\n --clientWidth = ".concat(i.winWidth)+"\n --clientHeight = ".concat(i.winHeight));return t};i.prototype.moveCxo=function(){var i;var t=this.anchorTarget;if(this.overlayUtilities.currentDimensions.isFullscreen&&!sh(this.playerConfig.fullscreenAnchorTarget)){t=this.playerConfig.fullscreenAnchorTarget}else if(!sh(this.playerConfig.bleedoverAnchorTarget)&&this.optimalInsertType.includes("bleedover")){t=this.playerConfig.bleedoverAnchorTarget}else{t=this.playerConfig.anchorTarget}var e=this.currentAnchorPosition;if(!sh(this.optimalInsertType)&&this.optimalInsertType!==S.NONE){if(this.overlayUtilities.currentDimensions.isFullscreen&&!this.overlayUtilities.currentDimensions.isFloating){e=this.playerConfig.moveCxoFullscreen}else if(this.optimalInsertType.includes("bleedover")){e=this.playerConfig.moveCxoBleedover}else{e=this.playerConfig.moveCxoStandard;if(e==="none"){e="parent"}}}if(this.anchorTarget!==t||this.currentAnchorPosition!==e){this.debugLog("CXO move required - from location [".concat(this.anchorTarget,":").concat(this.currentAnchorPosition,"] to location [").concat(t,":").concat(e,"]"),[d.CXO,d.QA]);this.debugLog("CXO move is required, player mode changed",d.SELENIUM);this.debugLog(["moveCxo --anchorTarget = ".concat(this.anchorTarget,"  --anchorPosition = ").concat(this.currentAnchorPosition," "),this.videoContainerSearchNode]);var n=true;if(!sh(this.activeResource)&&this.activeResourceData.impressionType===r.DISPLAY){if(this.overlayUtilities.groupConfig.persistentInserts===true){n=false;this.debugLog(["Banner insert is active and group uses persistentInserts. Will not move CX-O layer.",this.activeResource],[d.QA])}else if(this.currentVideoElementScale!==1){this.debugLog(["Banner insert is active and video has been scaled. Will remove insert and move CX-O layer.",this.activeResource],[d.QA]);this.clearRemainingInserts()}else{n=false;this.debugLog(["Banner insert is active. Will not move CX-O layer.",this.activeResource],[d.QA])}}if(n){this.anchorTarget=t;this.currentAnchorPosition=e;if(!this.currentVideoStatus.isShadowPlayer){var s=(i=this.videoContainerSearchNode.querySelector(this.anchorTarget))!==null&&i!==void 0?i:this.videoElementContainer;switch(this.currentAnchorPosition){case"video":case"after-video":this.videoElement.after(this.cxoverlay);break;case"into":s.appendChild(this.cxoverlay);break;case"after":s.after(this.cxoverlay);break;case"before":s.parentElement.insertBefore(this.cxoverlay,this.videoContainerSearchNode.querySelector(this.anchorTarget));break;case"default":this.videoElementContainer.appendChild(this.cxoverlay);break}}else{var o=this.findShadowNode(this.anchorTarget);var a=this.getParent(o);switch(this.currentAnchorPosition){case"video":case"after-video":this.videoElement.after(this.cxoverlay);break;case"into":o.appendChild(this.cxoverlay);break;case"after":a.appendChild(this.cxoverlay);break;case"before":a.insertBefore(this.cxoverlay,o);break;case"default":this.videoElementContainer.appendChild(this.cxoverlay);break}}}}};i.prototype.selectInsertTypeFromOptions=function(i){var t=this;var e,n,s,o,a,h,l,u,f,c,v,p,m;var g=(e=this.validateInsertTypeAllowedList(i,this.overlayUtilities.determineInsertTypeOptions()))!==null&&e!==void 0?e:[];if(this.isCTV){this.debugLog(["CTV OPTIONS LIST",g],[d.CXO,d.QA,d.IMPORTANT]);if(g.length>0){var b=g[Math.floor(Math.random()*g.length)].replace(/-/g,"_").toUpperCase();this.optimalInsertType=S[b];this.optimalInsertPosition=this.determineOptimalInsertPosition();var y=(l=(h=(a=(o=(s=(n=i.data)===null||n===void 0?void 0:n.assets)===null||s===void 0?void 0:s.find((function(i){return parseInt(i===null||i===void 0?void 0:i.id)===1})))===null||o===void 0?void 0:o.title)===null||a===void 0?void 0:a.text)===null||h===void 0?void 0:h.trim)===null||l===void 0?void 0:l.call(h);this.debugLog("CTV headline: ".concat(y),d.IMPORTANT);if(this.optimalInsertType===this.currentInserts.ctvOverlayCorner&&((y===null||y===void 0?void 0:y.length)===0||y.toLowerCase()==="main-image-only")){this.debugLog("Set CTV insert to ".concat(S.CTV_OVERLAY_MAIN_IMAGE_ONLY),d.IMPORTANT);this.optimalInsertType=S.CTV_OVERLAY_MAIN_IMAGE_ONLY;var w=(m=(p=(v=(c=(f=(u=i.data)===null||u===void 0?void 0:u.assets)===null||f===void 0?void 0:f.find((function(i){return parseInt(i===null||i===void 0?void 0:i.id)===2})))===null||c===void 0?void 0:c.data)===null||v===void 0?void 0:v.value)===null||p===void 0?void 0:p.trim)===null||m===void 0?void 0:m.call(p);if((w===null||w===void 0?void 0:w.length)===2){var O=w.toLowerCase();if(O.includes("t")&&O.includes("l")){this.optimalInsertPosition=k.TOP_LEFT}else if(O.includes("t")&&O.includes("r")){this.optimalInsertPosition=k.TOP_RIGHT}else if(O.includes("b")&&O.includes("l")){this.optimalInsertPosition=k.BOTTOM_LEFT}else if(O.includes("b")&&O.includes("r")){this.optimalInsertPosition=k.BOTTOM_RIGHT}else{this.optimalInsertPosition=k.DEFAULT}this.debugLog("Set CTV insert position to ".concat(this.optimalInsertPosition),d.IMPORTANT)}}this.determineIfDebugOverrideInsertType()}}else if(i.impressionType===r.DISPLAY){if(this.forceBannerCustomSqueeze){this.optimalInsertType=S.DISPLAY_CUSTOM_SQUEEZE_BACK;this.optimalInsertPosition=k.DEFAULT}else{var T=[i.data.w,i.data.h];if(g.find((function(i){return i===t.currentInserts.nativeSqueeze}))&&this.overlayUtilities.allowedBannerSizes.squeezeback.find((function(i){return i[0]===T[0]&&i[1]===T[1]}))){this.optimalInsertType=this.currentInserts.displaySqueeze}else if(g.find((function(i){return!!(i===null||i===void 0?void 0:i.includes("wing"))}))&&(this.overlayUtilities.allowedBannerSizes.wing.find((function(i){return i[0]===T[0]&&i[1]===T[1]}))||this.overlayUtilities.allowedBannerSizes.wingTall.find((function(i){return i[0]===T[0]&&i[1]===T[1]})))){this.optimalInsertType=this.currentInserts.displayWing}else if(g.find((function(i){return!!(i===null||i===void 0?void 0:i.includes("flap"))}))&&this.overlayUtilities.allowedBannerSizes.flap.find((function(i){return i[0]===T[0]&&i[1]===T[1]}))){this.optimalInsertType=this.currentInserts.displayFlap}else if(g.find((function(i){return i===t.currentInserts.nativeOverlayFullwidth}))&&this.overlayUtilities.allowedBannerSizes.overlayFullwidth.find((function(i){return i[0]===T[0]&&i[1]===T[1]}))){this.optimalInsertType=this.currentInserts.displayOverlayFullwidth}else if(g.find((function(i){return!!(i===null||i===void 0?void 0:i.includes("overlay"))}))&&this.overlayUtilities.allowedBannerSizes.overlayCorner.find((function(i){return i[0]===T[0]&&i[1]===T[1]}))){this.optimalInsertType=this.currentInserts.displayOverlayCorner}else{this.optimalInsertType=S.NONE}this.optimalInsertPosition=this.determineOptimalInsertPosition()}this.debugLog("selectInsertTypeFromOptions (display)"+"\n --optionsList = ".concat(g)+"\n --optimalInsertType = ".concat(this.optimalInsertType)+"\n --optimalInsertPosition = ".concat(this.optimalInsertPosition))}else{if(g.length>0){var b=g[Math.floor(Math.random()*g.length)].replace(/-/g,"_").toUpperCase();this.optimalInsertType=S[b];this.optimalInsertPosition=this.determineOptimalInsertPosition();this.determineIfDebugOverrideInsertType()}else{this.optimalInsertType=S.NONE}this.debugLog("selectInsertTypeFromOptions (native)"+"\n --optionsList = ".concat(g)+"\n --numberAllowedInsertTypes = ".concat(g.length)+"\n --optimalInsertType = ".concat(this.optimalInsertType)+"\n --optimalInsertPosition = ".concat(this.optimalInsertPosition))}};i.prototype.determineOptimalInsertPosition=function(){var i=k.DEFAULT;if(this.optimalInsertType.toLowerCase().indexOf("wing")!==-1){i=this.overlayUtilities.currentDimensions.left>this.overlayUtilities.currentDimensions.right?k.BOTTOM_LEFT:k.BOTTOM_RIGHT}else if(this.optimalInsertType.toLowerCase().indexOf("flap")!==-1){i=this.overlayUtilities.currentDimensions.top>this.overlayUtilities.currentDimensions.bottom?k.TOP_LEFT:k.BOTTOM_LEFT}else if(this.optimalInsertType.toLowerCase().indexOf("squeeze")!==-1){i=k.TOP_LEFT}return i};i.prototype.determineIfDebugOverrideInsertType=function(){var i=this.logManager.getDebugParamValue(O.INSERT_TYPE_OVERRIDE);if(i!==null){var t=this.logManager.getDebugParamValue(O.INSERT_OVERRIDE_LOCATION);if(t==null||parseInt(t)===++this.insertCount){var e=i;switch(e){case"squeeze-back-custom-full-background":this.optimalInsertType=S.SQUEEZE_BACK_CUSTOM_FULL_BACKGROUND;this.optimalInsertPosition=k.DEFAULT;break;case"squeeze-back-dynamic-fullwidth":this.optimalInsertType=S.SQUEEZE_BACK_DYNAMIC_FULLWIDTH;this.optimalInsertPosition=k.DEFAULT;break;case"squeeze-back-banner":this.optimalInsertType=S.DISPLAY_SQUEEZE_BACK_BANNER;this.optimalInsertPosition=k.DEFAULT;break;case"overlayhorizontalslidecolordetect":this.optimalInsertType=S.OVERLAY_HORIZONTAL_SLIDE_COLOR_DETECT;this.optimalInsertPosition=k.DEFAULT;break;case"overlayslideiconcolordetect":this.optimalInsertType=S.OVERLAY_SLIDE_ICON_COLOR_DETECT;this.optimalInsertPosition=k.DEFAULT;break;case"overlayfullwidthiconcolordetect":this.optimalInsertType=S.OVERLAY_FULLWIDTH_ICON_COLOR_DETECT;this.optimalInsertPosition=k.DEFAULT;break;case"bleedoverflaprevolvingheadline":this.optimalInsertType=S.BLEEDOVER_FLAP_REVOLVING_HEADLINE;this.optimalInsertPosition=this.optimalInsertPosition.indexOf("t")>-1?k.TOP_LEFT:k.DEFAULT;break;case"bleedoverwingprecisionsize":this.optimalInsertType=S.BLEEDOVER_WING_PRECISION_SIZE;this.optimalInsertPosition=this.optimalInsertPosition.indexOf("r")>-1?k.BOTTOM_RIGHT:k.DEFAULT;break;case"ctv-squeeze-back-custom-qr":this.optimalInsertType=S.CTV_SQUEEZE_BACK_CUSTOM_QR;this.optimalInsertPosition=k.DEFAULT;break;case"ctv-squeeze-back-custom":this.optimalInsertType=S.CTV_SQUEEZE_BACK_CUSTOM;this.optimalInsertPosition=k.DEFAULT;break;case S.CTV_OVERLAY_CORNER_CLEAN_QR:this.optimalInsertType=S.CTV_OVERLAY_CORNER_CLEAN_QR;this.optimalInsertPosition=k.DEFAULT;break;case S.CTV_OVERLAY_MAIN_IMAGE_ONLY:this.optimalInsertType=S.CTV_OVERLAY_MAIN_IMAGE_ONLY;this.optimalInsertPosition=k.DEFAULT;break}}}};i.prototype.determinePlayerMode=function(i){if(i===void 0){i=null}var t=!sh(this.videoElement)?this.videoElement.getBoundingClientRect():null;var e=false;var n=false;this.isOnStream=!this.isInArticlePlayer;var s;if(!this.isMobile){s=this.playerModeExclusionList.indexOf(I.DESKTOP_ONSTREAM)===-1?I.DESKTOP_ONSTREAM:this.playerModeExclusionList.indexOf(I.DESKTOP_INARTICLE)===-1?I.DESKTOP_INARTICLE:I.DESKTOP_FLOATING}else{s=this.playerModeExclusionList.indexOf(I.MOBILE_ONSTREAM)===-1?I.MOBILE_ONSTREAM:this.playerModeExclusionList.indexOf(I.MOBILE_INARTICLE)===-1?I.MOBILE_INARTICLE:I.MOBILE_FLOATING}var r=this.currentVideoElementScale;if(document.fullscreenElement||this.isCTV||typeof document.webkitCurrentFullScreenElement!=="undefined"&&document.webkitCurrentFullScreenElement!==null||!this.isIframePlayer&&t!==null&&Math.abs(t.width/r/window.innerWidth-1)<.15&&(Math.abs(t.height/r/window.innerHeight-1)<.15||t.height/r>window.innerHeight)){e=true;if(this.playerMode!==I.DESKTOP_ONSTREAM&&this.playerMode!==I.MOBILE_ONSTREAM){this.debugLog("determinePlayerMode"+"\n --playerMode = full screen")}this.playerMode=this.isMobile&&this.playerModeExclusionList.indexOf(I.MOBILE_ONSTREAM)===-1?I.MOBILE_ONSTREAM:this.playerModeExclusionList.indexOf(I.DESKTOP_ONSTREAM)===-1?I.DESKTOP_ONSTREAM:s}else{n=this.isPlayerFloating;if(n){this.floatingPosition=this.determineFloatingPosition(i);if(this.floatingPosition===N.CENTER){e=true;if(this.playerMode!==I.DESKTOP_ONSTREAM&&this.playerMode!==I.MOBILE_ONSTREAM){this.debugLog("determinePlayerMode"+"\n --playerMode = floating full screen",[d.QA,d.CXO])}this.playerMode=this.isMobile&&this.playerModeExclusionList.indexOf(I.MOBILE_ONSTREAM)===-1?I.MOBILE_ONSTREAM:this.playerModeExclusionList.indexOf(I.DESKTOP_ONSTREAM)===-1?I.DESKTOP_ONSTREAM:s}else if(this.floatingPosition===N.TOP_CENTER){if(this.playerMode!==I.DESKTOP_ONSTREAM&&this.playerMode!==I.MOBILE_ONSTREAM){this.debugLog("determinePlayerMode"+"\n --playerMode = floating top On-Stream",[d.QA,d.CXO])}this.playerMode=this.isMobile&&this.playerModeExclusionList.indexOf(I.MOBILE_ONSTREAM)===-1?I.MOBILE_ONSTREAM:this.playerModeExclusionList.indexOf(I.DESKTOP_ONSTREAM)===-1?I.DESKTOP_ONSTREAM:s}else{this.playerMode=this.isMobile&&this.playerModeExclusionList.indexOf(I.MOBILE_FLOATING)===-1?I.MOBILE_FLOATING:this.playerModeExclusionList.indexOf(I.DESKTOP_FLOATING)===-1?I.DESKTOP_FLOATING:s}}else if(this.isOnStream){this.playerMode=this.isMobile&&this.playerModeExclusionList.indexOf(I.MOBILE_ONSTREAM)===-1?I.MOBILE_ONSTREAM:this.playerModeExclusionList.indexOf(I.DESKTOP_ONSTREAM)===-1?I.DESKTOP_ONSTREAM:s}else{this.playerMode=this.isMobile&&this.playerModeExclusionList.indexOf(I.MOBILE_INARTICLE)===-1?I.MOBILE_INARTICLE:this.playerModeExclusionList.indexOf(I.DESKTOP_INARTICLE)===-1?I.DESKTOP_INARTICLE:s}}this.debugLog("determinePlayerMode"+"\n --playerMode = ".concat(this.playerMode));if(this.overlayUtilities.currentDimensions.isFullscreen!==e){this.debugLog("determinePlayerMode change in fullscreen player:"+"\n --is Player Fullscreen = ".concat(e)+"\n --was Player Fullscreen = ".concat(this.overlayUtilities.currentDimensions.isFullscreen),[d.CXO,d.QA]);this.overlayUtilities.currentDimensions.isFullscreen=e;this.moveCxo()}if(this.overlayUtilities.currentDimensions.isFloating!==n){this.debugLog("determinePlayerMode change in floating player:"+"\n --is Player Floating = ".concat(n)+"\n --was Player Floating = ".concat(this.overlayUtilities.currentDimensions.isFloating),[d.CXO,d.QA]);this.overlayUtilities.currentDimensions.isFloating=n;if(!n&&!this.videoPlayerLost){if(this.overlayElement.style.getPropertyValue("opacity")=="0"){this.overlayElement.style.setProperty("opacity","1")}}this.moveCxo()}};i.prototype.handleVideoSourceChange=function(){if(!this.didVideoSourceChange){this.debugLog("handleVideoSourceChange --video source not changed",[d.CXO])}else{this.currentVideoStatus.videoAnalyticsParameters.started=false;this.currentVideoStatus.videoAnalyticsParameters.restarted=true;this.consecutiveVideosLoaded++;this.debugLog("handleVideoSourceChange"+"\n --old video source = ".concat(this.videoUrl)+"\n --new video source = ".concat(this.getVideoSource(this.videoElement))+"\n --videos loaded count = ".concat(this.consecutiveVideosLoaded),[d.QA,d.CXO]);this.videoUrl=this.getVideoSource(this.videoElement);this.moveCxo();if(sh(this.overlayUtilities.groupConfig)||!this.overlayUtilities.groupConfig.persistentInserts){this.clearRemainingInserts();this.resetCarouselData()}this.analyticsEventDispatcher.sendVideoEvent(F.VIDEO_SRC_CHANGED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.videoElement.currentTime,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height});if(!sh(this.trackElement)&&this.videoElement.contains(this.trackElement)){this.videoElement.removeChild(this.trackElement)}URL.revokeObjectURL(this.trackUrl);this.shouldRequestMoments=true;this.activeLogicalVideoId=null;this.activeMediaId=null;this.resetVideoStatus();this.checkIfMomentsNeeded()}};i.prototype.checkTrackIntegrity=function(){if(!sh(this.trackElement)&&!sh(this.trackElement.track)){if(this.trackElement.track.mode==="disabled"){this.trackElement.track.mode="hidden";this.debugLog("checkTrackIntegrity --Track mode set from disabled -> hidden",d.CXO)}}};i.prototype.checkIfMomentsNeeded=function(){var i;if(!this.initialMomentsRequested){this.determineDimensions();if(this.overlayUtilities.isAndroidWebView){this.debugLog("Device has been detected as an unsupported Android Web View player. Will send out event log and shutdown CX-Overlay.",[d.QA,d.CXO]);this.analyticsEventDispatcher.sendOverlayEvent(F.OVERLAY_ANDROID_WEB_VIEW,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue);this.shouldRequestMoments=false;this.currentVideoStatus.timerBasedBidding=true;this.initialMomentsRequested=true;this.destroyCXO()}else if(this.overlayUtilities.isDomainBlockedForInApp&&this.overlayUtilities.isInAppBrowser){var t=this.logManager.getDebugParamValue(O.ALLOW_BLOCKED_DOMAINS);var e=Boolean(t!==null&&t==="true");if(!e){this.debugLog("In-App browser detected on Factinate.com domain. Will send out event log and shutdown CX-Overlay.",[d.QA,d.CXO,d.OVERLAYLOGS]);this.analyticsEventDispatcher.sendOverlayEvent(F.OVERLAY_IN_APP_BROWSER_SHUTDOWN,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue);this.shouldRequestMoments=false;this.currentVideoStatus.timerBasedBidding=true;this.initialMomentsRequested=true;this.destroyCXO()}else{this.debugLog("DEBUGallowBlockedDomains is set to 'true'. Will continue to allow cx-overlay to run on this domain.",[d.OVERLAYLOGS,d.QA,d.CXO])}}else if(this.playerMode===I.DESKTOP_FLOATING||this.playerMode===I.MOBILE_FLOATING){this.debugLog('Video has initialized in "floating" mode. Will use set video status to "streaming", isFloatingExclusive = true, and use automatic bidding for video.',[d.QA,d.CXO]);this.currentVideoStatus.isFloatingExclusive=true;this.currentVideoStatus.timerBasedBidding=true;this.initialMomentsRequested=true}}if(!this.currentVideoStatus.timerBasedBidding&&this.videoElement.duration===Infinity){this.debugLog('Video duration is equal to "infinity". Will use set video status to "streaming" and use automatic bidding for video.',[d.QA,d.CXO]);this.currentVideoStatus.isStreaming=true;this.currentVideoStatus.timerBasedBidding=true;this.initialMomentsRequested=true}if(this.shouldRequestMoments&&!this.currentVideoStatus.timerBasedBidding){if(this.playerType==="AIRTV"){if(this.videoElement.readyState>=2&&this.videoElement.currentTime>1){if(this.videoElement.currentTime<this.videoElement.duration-10){if(this.airTVEventsEstablished){if(!this.airTVisAdvertisement){this.debugLog("AirTV Video is actively playing, not an advertisement, and bid needed. --initializing moments request",[d.CXO,d.QA]);this.debugLog("Video is playing, initializing bid request",[d.SELENIUM]);this.timers.updateCXOTimer.execute();this.requestMomentsTrack()}else{this.debugLog("AirTV Video is currently in advertisement break. --delaying moments request",[d.CXO,d.QA]);this.debugLog("Video identified as advertisement",[d.SELENIUM])}}else{var n=window.location.hostname;if(window.self!==window.top){try{var s=document.referrer||window.top.location.href;n=new URL(s).hostname}catch(i){this.debugLog(["unable to determine top AirTV domain:",i],[d.CXO,d.QA])}}var r=n.split(".");n=r.length>=2?r[r.length-2]+"."+r[r.length-1]:r[0];this.debugLog("AirTV determined domain: "+n,[d.CXO,d.QA]);if((i=this.getVideoSource(this.videoElement))===null||i===void 0?void 0:i.toLowerCase().includes(n.toLowerCase())){this.debugLog("Video is actively playing and moments needed. --initializing moments request",[d.CXO,d.QA]);this.debugLog("Video is playing, initializing bid request",[d.SELENIUM]);this.timers.updateCXOTimer.execute();this.requestMomentsTrack()}else{this.debugLog("Video source is not from parent domain ( ".concat(n," ). --delaying moments request"),[d.CXO,d.QA])}}}else{this.debugLog("Video current time is too close to video end. At ".concat(this.videoElement.currentTime," current time with ").concat(this.videoElement.duration," total duration on video. --delaying moments request"),[d.CXO,d.QA])}}else{this.debugLog("AirTV Video not ready for bid - readyState=".concat(this.videoElement.readyState," at time ").concat(this.videoElement.currentTime,". --delaying moments request"),[d.CXO,d.QA]);if(!this.videoElement.paused){this.timers.checkMomentsNeededTimer.reset(1e3)}}}else{if(this.videoElement.readyState>=2&&(!this.videoElement.paused||this.videoElement.currentTime>.1)){if(this.videoElement.currentTime<this.videoElement.duration-10){this.debugLog("Video is actively playing and bid needed. --initializing moments request",[d.CXO,d.QA]);this.debugLog("Video is playing, initializing bid request",[d.SELENIUM]);this.timers.updateCXOTimer.execute();this.requestMomentsTrack()}else{this.debugLog("Video current time is too close to video end. At ".concat(this.videoElement.currentTime," current time with ").concat(this.videoElement.duration," total duration on video. --delaying moments request"),[d.CXO,d.QA])}}else{this.debugLog("Video has not begun playback. --delaying moments request",[d.CXO,d.QA]);this.debugLog("Video has not started, delaying bid request",[d.SELENIUM]);if(!this.videoElement.paused){this.timers.checkMomentsNeededTimer.reset(1e3)}else{this.timers.updateCXOTimer.reset(1e3)}}}}else{if(this.shouldRequestMoments&&this.currentVideoStatus.timerBasedBidding){if(this.currentVideoStatus.isFloatingExclusive){this.debugLog("Floating player detected as primary player mode.",[d.CXO,d.QA])}else if(this.overlayUtilities.groupConfig.persistentInserts){this.debugLog("Zone configurations has 'persistentInserts' set to 'true'",[d.CXO,d.QA])}this.debugLog("Timer based bidding has been toggled on. Will not analyze video for moments.",[d.CXO,d.QA]);this.setNextAutomaticBidTime();this.shouldRequestMoments=false}else if(!this.shouldRequestMoments){this.debugLog("Video shouldRequestMoments=".concat(this.shouldRequestMoments,". --will not initiate new moments request"),[d.CXO,d.QA])}}};i.prototype.requestMomentsTrac};i.prototype.fetchMoments=function(){var i=this;var t,e,n,s;if(((e=(t=this.videoUrlSourceMapping)===null||t===void 0?void 0:t.toLowerCase)===null||e===void 0?void 0:e.call(t).indexOf("blob"))===0){this.debugLog("fetchMoments - Video source is of type 'blob'. Switching to timer based bidding. Will not fetch moments.",[d.QA,d.CXO]);this.currentVideoStatus.timerBasedBidding=true;this.setNextAutomaticBidTime()}try{if(!this.isVideoAdvertisement&&!this.nobid&&!((n=this.overlayUtilities.groupConfig)===null||n===void 0?void 0:n.persistentInserts)&&!((s=this.currentVideoStatus)===null||s===void 0?void 0:s.timerBasedBidding)){this.debugLog("CX Fetching Moments",[d.CXO,d.QA]);this.debugLog("CX Fetching Moments",[d.SELENIUM]);var r=this.groupId;var o=this.logManager.getDebugParamValue(O.OVERRIDE_CONFIGS_GROUP_ID);if(o!==null){r=o==null||o===""||o==="true"?"internal":o;this.debugLog("Using group-id '".concat(r,"' for fetch moments request."),[d.QA,d.CXO])}var a={groupId:r,videoUrl:this.videoUrlSourceMapping,duration:this.videoElement.duration};this.analyticsEventDispatcher.sendFetchMomentsEvent(F.OVERLAY_FETCH_MOMENTS,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,a);Se(r,this.videoUrlSourceMapping,this.videoElement.duration).then((function(t){var e,n;if(!sh(t)){if(!i.isVideoAdvertisement&&!i.nobid){i.initialMomentsRequested=true;i.debugLog(["Moments Data for group '".concat(r,"': "),t],[d.QA,d.CXO]);i.activeMediaId=(e=t.mediaId)!==null&&e!==void 0?e:null;i.activeLogicalVideoId=(n=t.logicalVideoId)!==null&&n!==void 0?n:null;i.trackData=sh(t===null||t===void 0?void 0:t.cues)?null:new Blob([t.cues],{type:"text/vtt"});i.timers.updateCXOTimer.execute();i.addCues();i.timers.checkTrackIntegrityTimer.reset(1e3)}else{if(i.nobid){i.debugLog("nobid attribute found on cx-overlay. Will not attach moments cue track.",[d.QA,d.CXO])}else{i.debugLog("Video identified as advertisement. Will not attach moments cue track.",[d.QA,d.CXO]);i.debugLog("Video identified as advertisement. Will not attach moments cue track.",[d.SELENIUM])}i.shouldRequestMoments=true}}else{i.debugLog("getTrackCues response is 'null'. Is current URL part of blockedURLs for zone? ".concat(i.isBlockedURL),[d.QA,d.CXO])}}))}else{if(this.nobid){this.debugLog("nobid attribute found on cx-overlay. Will not request moments cue track.",[d.QA,d.CXO])}else{this.debugLog("Video identified as advertisement. Will not request moments cue track.",[d.QA,d.CXO]);this.debugLog("Video identified as advertisement. Will not request moments cue track.",[d.SELENIUM])}this.shouldRequestMoments=true}}catch(i){this.debugLog(["Failed to load video moments:",i],d.ERROR)}};i.prototype.addCues=function(){var i=this;var t,e;if(!sh(this.trackData)){if(this.videoElement.contains(this.trackElement)){this.debugLog("addCues --removingTrackEvent");try{URL.revokeObjectURL(this.trackUrl);this.videoElement.removeChild(this.trackElement)}catch(i){this.debugLog(["addCues --removingTrackEvent | Error on remove track element.",i],[d.QA,d.CXO])}}this.debugLog("addCues --addingNewTrack");try{this.debugLog("addCues --trackUrl");this.trackUrl=URL.createObjectURL(this.trackData);this.debugLog("addCues --createElement");this.trackElement=document.createElement("track");this.debugLog("addCues --src=trackUrl");this.trackElement.src=this.trackUrl;this.debugLog("addCues --label=label");this.trackElement.label=this.label;this.debugLog("addCues --kind=kind");this.trackElement.kind=this.kind;this.debugLog("addCues --id=cx-track-data");this.trackElement.id="cx-track-data";this.debugLog("addCues --setAttribute");this.trackElement.setAttribute("default","");this.debugLog("addCues --onCueChange");this.trackElement.oncuechange=this.onCueChange;this.debugLog(["addCues --insertBefore - ",this.videoElement,(t=this.videoElement)===null||t===void 0?void 0:t.firstChild]);if(typeof((e=this.videoElement)===null||e===void 0?void 0:e.firstChild)!=="undefined"){this.videoElement.insertBefore(this.trackElement,this.videoElement.firstChild)}else{this.videoElement.appendChild(this.trackElement)}}catch(i){this.debugLog(["addCues --addingNewTrack | Error on add new track element.",i],[d.QA,d.CXO])}this.debugLog(["addCues --trackDataAdded --trackUrl = ".concat(this.trackUrl)],[d.CXO,d.QA]);var n=function(){if(i.trackElement.track.cues==null){setTimeout}),100)}else{var t=i.groupId;var e=i.logManager.getDebugParamValue(O.OVERRIDE_CONFIGS_GROUP_ID);if(e!==null){t=e==null||e===""||e==="true"?"internal":e;i.debugLog("Using group-id '".concat(t,"' for watch track cues."),[d.QA,d.CXO])}var s="Expected bid times for group '".concat(t,"': ");for(var r in i.trackElement.track.cues){if(i.trackElement.track.cues[r]["startTime"]!=null){s+="\n  Bid ".concat(parseInt(r)+1," starting at ").concat(i.trackElement.track.cues[r]["startTime"]," seconds.")}}i.debugLog([s],[d.CXO,d.QA])}};n()}};i.prototype.determineDimensions=function(){var i=this;var t=false;var e=this.videoElement.getBoundingClientRect();if(this.watchedVideoSize.width!==Math.round(e.width)||this.watchedVideoSize.height!==Math.round(e.height)||this.watchedVideoSize.left!==Math.round(e.left)||this.watchedVideoSize.top!==Math.round(e.top)){this.videoDimensionsStable=false;this.watchedVideoSize.width=Math.round(e.width);this.watchedVideoSize.height=Math.round(e.height);this.watchedVideoSize.left=Math.round(e.left);this.watchedVideoSize.top=Math.round(e.top)}this.overlayUtilities.currentDimensions.transform=!sh(this.videoElement.getAttribute("style"))&&this.videoElement.getAttribute("style").includes("transform-origin")&&this.videoElement.style.getPropertyValue("transform-origin").split(" ").length>=2?this.videoElement.style.getPropertyValue("transform-origin").replace(/%/g,"").split(" "):["100","100"];this.overlayUtilities.currentDimensions.elementScale=this.currentVideoElementScale;var n=this.containerElement.getBoundingClientRect();var s=this.overlayElement.getBoundingClientRect();if(n.height>0&&s.height>0){var r=this.overlayUtilities.percentageDifference(n.height,s.height);if(r>5&&this.overlayElement.style.getPropertyValue("position")!=="relative"){this.overlayElement.style.setProperty("position","relative");this.debugLog(["determineDimensions: Container/Overlay height difference of ".concat(this.overlayUtilities.percentageDifference(n.height,s.height),"% > 5%. Changing #timer position to relative.")],d.CXO)}}var o={height:Math.round(e.height),width:Math.round(e.width),previousElementWidth:this.overlayUtilities.currentDimensions.previousElementWidth,previousHeight:this.overlayUtilities.currentDimensions.previousHeight,previousWidth:this.overlayUtilities.currentDimensions.previousWidth,x:e.x,y:e.y,top:e.top,right:e.right,bottom:e.bottom,left:e.left,transform:this.overlayUtilities.currentDimensions.transform,winHeight:document.documentElement.clientHeight<window.innerHeight&&document.documentElement.clientHeight+30>window.innerHeight?document.documentElement.clientHeight:window.innerHeight,winWidth:document.documentElement.clientWidth,scale:this.overlayUtilities.currentDimensions.scale,elementScale:this.overlayUtilities.currentDimensions.elementScale,isFloating:this.overlayUtilities.currentDimensions.isFloating,isFullscreen:this.overlayUtilities.currentDimensions.isFullscreen,insertPosition:this.overlayUtilities.currentDimensions.insertPosition,elementDimensionsStable:this.overlayUtilities.currentDimensions.elementDimensionsStable};if(!sh(this.videoElement)&&this.videoElement.hasAttribute("insertvideoscale")&&Number.isNaN(parseFloat(this.videoElement.getAttribute("insertvideoscale")))){this.videoElement.removeAttribute("insertvideoscale")}var a=o.elementScale;if(e.width>0&&e.width===o.previousElementWidth){var h=this.overlayUtilities.percentageDifference(e.width/a,n.width);if(h>.25){o.scale=o.scale!==1?1:e.width/a/n.width;if(o.scale===0||o.scale===Infinity){o.scale=1}}}else{this.timers.updateCXOTimer.reset(50)}o.previousElementWidth=e.width;o.height=Math.round(e.height/a*o.scale);o.width=Math.round(e.width/a*o.scale);o.left=parseFloat((e.left+parseFloat(o.transform[0])*.01*(e.width-e.width/a)).toFixed(3));o.top=parseFloat((e.top+parseFloat(o.transform[1])*.01*(e.height-e.height/a)).toFixed(3));o.right=parseFloat((o.winWidth-e.right+(100-parseFloat(o.transform[0]))*.01*(e.width-e.width/a)).toFixed(3));o.bottom=parseFloat((o.winHeight-e.bottom+(100-parseFloat(o.transform[1]))*.01*(e.height-e.height/a)).toFixed(3));var l=this.playerMode;var u=this.overlayUtilities.currentDimensions.isFullscreen;var f=this.floatingPosition;this.determinePlayerMode(o);o.isFloating=this.overlayUtilities.currentDimensions.isFloating;o.isFullscreen=this.overlayUtilities.currentDimensions.isFullscreen;var c=f!==this.floatingPosition?true:false;var v=u!==o.isFullscreen?true:false;var p=l!==this.playerMode?true:false;if(v||c||p||this.overlayUtilities.currentDimensions.height!==o.height||this.overlayUtilities.currentDimensions.width!==o.width||this.overlayUtilities.currentDimensions.x!==o.x||this.overlayUtilities.currentDimensions.y!==o.y||this.overlayUtilities.currentDimensions.bottom!==o.bottom||this.overlayUtilities.currentDimensions.top!==o.top||this.overlayUtilities.currentDimensions.right!==o.right||this.overlayUtilities.currentDimensions.left!==o.left){this.debugLog("Video player (".concat(o.width,"x").concat(o.height,") position in frame - left: ").concat(o.left,"px  right: ").concat(o.right,"px  top: ").concat(o.top,"px  bottom: ").concat(o.bottom,"px"),[d.CXO]);if(!this.videoPlayerLost&&!sh(this.activeResource)){this.timers.remakeInsertTimer.resetIfInactl,u,f)}))}if(this.overlayUtilities.currentDimensions.isFloating){this.floatingJumpCount=0}t=true}else if(this.overlayUtilities.currentDimensions.winHeight!==o.winHeight||this.overlayUtilities.currentDimensions.winWidth!=o.winWidth){t=true}if(p){if(this.videoPlayerLost||this.videoElement===null){if(this.videoPlayerLost){this.timers.checkLostVideoPlayerTimer.execute()}else{this.timers.reinitializeVideoElementTimer.execute()}}else{this.timers.updateCXOTimer.resetInterval(100,5)}}this.overlayUtilities.currentDimensions=o;return t};i.prototype.remakeInsertIfNeeded=function(i,t,e,n){var s=this;if(n===void 0){n=false}var o=e!==this.floatingPosition?true:false;var a=t!==this.overlayUtilities.currentDimensions.isFullscreen?true:false;var h=i!==this.playerMode?true:false;this.debugLog("remakeInsertIfNeeded -\n    oldPlayerMode = ".concat(i," vs currentPlayerMode = ").concat(this.playerMode,"\n    playerModeChange = ").concat(h,"\n    wasFullscreen = ").concat(t," vs isFullscreen = ").concat(this.overlayUtilities.currentDimensions.isFullscreen,"\n    fullscreenChange = ").concat(a,"\n    oldFloadingPosition = ").concat(e," vs floatingPosition = ").concat(this.floatingPosition,"\n    floatingPositionChange = ").concat(o,"\n    currentWidth = ").concat(this.overlayUtilities.currentDimensions.width,"\n    recheck = ").concat(n),[d.CXO]);if(!sh(this.activeResourceData)&&!sh(this.activeResource)){var l=this.translateDisplayToNative(this.activeResource.tagName.toLowerCase());if(this.overlayUtilities.currentDimensions.width<10||this.overlayUtilities.currentDimensions.height<10){this.debugLog("remakeInsertIfNeeded -- Video element transitioning ( < 10px width/height ). Delaying type change.",[d.CXO,d.QA]);if(this.cxWait){this.debugLog("remakeInsertIfNeeded -- cx-wait turned on. Will not continue trying to remake Insert.",[d.CXO,d.QA])}else{this.timers.remakeInsertTimer.resetIfInactit,e,n)}))}}else{var u=this.logManager.getDebugParamValue(O.INSERT_TYPE_OVERRIDE);if(this.activeResourceData.impressionType!==r.DISPLAY){this.detectCXWaitChanges();if(!this.cxWait){this.debugLog("remakeInsertIfNeeded -- optimalInsertPosition: ".concat(this.determineOptimalInsertPosition()," - currentInsertPosition: ").concat(this.activeResource.getAttribute("insertposition")),[d.CXO]);var f=parseInt(this.activeResource.getAttribute("creationwidth"))||0;var c=this.overlayUtilities.percentageDifference(f,this.overlayUtilities.currentDimensions.width);if(h||a||this.overlayUtilities.currentDimensions.isFloating&&o||this.determineOptimalInsertPosition()!==this.activeResource.getAttribute("insertposition")||(l.includes("wing")&&parseInt(this.activeResource.getAttribute("allowedwidth"))>(this.activeResource.getAttribute("insertposition").includes("r")?this.overlayUtilities.currentDimensions.right:this.overlayUtilities.currentDimensions.left)||parseInt(this.activeResource.getAttribute("creationheight"))*1.5<this.overlayUtilities.currentDimensions.height)||c>80){var v=u!==null?[l]:this.validateInsertTypeAllowedList(this.activeResourceData,this.overlayUtilities.determineInsertTypeOptions());var p=v.filter((function(i){return i===l}));var m=false;if(this.isFullscreenVideoNode){this.debugLog("remakeInsertIfNeeded - Insert should NOT be re-created because a mobile video node is currently fullscreen.",[d.QA,d.CXO])}else if(p.length===0){m=true;this.debugLog("remakeInsertIfNeeded - Insert should be re-created because current insert type is no longer available.",[d.QA,d.CXO])}else if(c>80){m=true;this.debugLog("remakeInsertIfNeeded - Insert should be re-created because video size at insert creation has changed significantly (".concat(this.activeResource.getAttribute("creationwidth"),"px width at creation vs. ").concat(this.overlayUtilities.currentDimensions.width,"px width currently)."),[d.QA,d.CXO])}else if(l.includes("bleedover")&&this.overlayUtilities.currentDimensions.isFullscreen){m=true;this.debugLog("remakeInsertIfNeeded - Insert should be re-created because insert is a bleedover type and player is now fullscreen.",[d.QA,d.CXO])}else if(l.includes("bleedover")&&this.determineOptimalInsertPosition()!==this.activeResource.getAttribute("insertposition")){m=true;this.debugLog("remakeInsertIfNeeded - Insert should be re-created because insert is a bleedover type and insert position needs changing.",[d.QA,d.CXO])}else if((l.includes("flap")||l.includes("wing"))&&c>25){m=true;this.debugLog("remakeInsertIfNeeded - Insert should be re-created because insert is a bleedover type and player width has changed significantly.",[d.QA,d.CXO])}else if(l.includes("wing")&&(parseInt(this.activeResource.getAttribute("allowedwidth"))>(this.activeResource.getAttribute("insertposition").includes("r")?this.overlayUtilities.currentDimensions.right:this.overlayUtilities.currentDimensions.left)||parseInt(this.activeResource.getAttribute("creationheight"))*1.5<this.overlayUtilities.currentDimensions.height)){m=true;this.debugLog("remakeInsertIfNeeded - Insert should be re-created because wing insert no longer fits in the allowed space. ".concat(this.activeResource.getAttribute("insertposition").includes("r")?this.overlayUtilities.currentDimensions.right:this.overlayUtilities.currentDimensions.left," vs ").concat(parseInt(this.activeResource.getAttribute("allowedwidth"))),[d.QA,d.CXO])}if(m){if(!n){this.timers.remakeInsertTimer.resetIfInactive(500,(function(){s.remakeInsertIfNeeded(i,t,e,true)}));this.activeResource.style.setProperty("opacity","0")}else{this.debugLog("remakeInsertIfNeeded --recheck "+this.activeResource.style.getPropertyValue("opacity"),[d.CXO]);if(this.activeResource.style.getPropertyValue("opacity")==="0"){this.debugLog("remakeInsertIfNeeded --Insert re-create required.",[d.CXO,d.QA]);this.isInsertReinitializing=true;this.clearCarouselInsert();this.resetCarouselData();this.clearActiveInsert();this.timers.createNewInsertTimer.reset(0,(function(){s.createNewInsert(s.activeResourceData)}))}}}else{this.debugLog("remakeInsertIfNeeded - Insert does not need to be recreated.",[d.CXO]);if(n){this.activeResource.style.setProperty("opacity","1")}}}else if(this.activeResource.style.getPropertyValue("opacity")==="0"){this.activeResource.style.setProperty("opacity","1")}}}else{var v=u!==null?[l]:this.validateInsertTypeAllowedList(this.activeResourceData,this.overlayUtilities.determineInsertTypeOptions());if([I.DESKTOP_FLOATING,I.MOBILE_FLOATING].includes(this.playerMode)){v.push(this.currentInserts.nativeOverlayFullwidth,this.currentInserts.nativeOverlayCorner,this.currentInserts.nativeOverlayIcon)}var p=v. i===l}));if(p.length===0){this.debugLog(["mode: ".concat(this.playerMode,", availableTypes = ").concat(JSON.stringify(v),", currentType=").concat(l),"No insert types still available. Clear carousel inserts."],[d.CXO]);this.clearCarouselInsert();this.resetCarouselData()}if(this.overlayUtilities.currentDimensions.isFullscreen&&l.includes("bleedover")||!this.doesWingInsertFit&&l.includes("wing")){this.debugLog(["Bleedover insert type no longer fits. Removing active insert."],[d.CXO,d.QA]);this.clearRemainingInserts()}else if(!n){this.timers.remakeInsertTimer.resetIfInacti,true)}))}}}}else{this.debugLog(["remakeInsertIfNeeded - activeResource not available - NOT changing insert type"],[d.CXO,d.HIGHLIGHT])}};i.prototype.translateDisplayToNative=function(i){var t=i;switch(i){case this.currentInserts.displayOverlayFullwidth:t=this.currentInserts.nativeOverlayFullwidth;break;case this.currentInserts.displayFlap:t=this.currentInserts.nativeFlap;break;case this.currentInserts.displayWing:t=this.currentInserts.nativeWing;break;case this.currentInserts.displayOverlayCorner:t=this.currentInserts.nativeOverlayCorner;break;case this.currentInserts.displaySqueeze:t=this.currentInserts.nativeSqueeze;break}return t};i.prototype.adjustMargin=function(){var i=this.containerElement.getBoundingClientRect();var t=window.getComputedStyle(this.containerElement);var e=this.overlayUtilities.currentDimensions.transform;var n=this.overlayUtilities.currentDimensions.elementScale;var s=parseInt(t.getPropertyValue("margin-left"));var r=parseInt(t.getPropertyValue("margin-top"));var o=this.overlayUtilities.currentDimensions.top;var a=this.overlayUtilities.currentDimensions.left;this.debugLog("Adjust margin: ".concat(s,"px ").concat(r,"px - ").concat(e," - ").concat(n),[d.CXO]);if(Math.abs(o-i.top)>1||Math.abs(a-i.left)>1){if(!this.overlayUtilities.currentDimensions.isFloating&&!this.isIframePlayer&&!(this.overlayUtilities.currentDimensions.isFullscreen&&Math.abs(1-i.height/this.overlayUtilities.currentDimensions.winHeight)<.02)){r=Math.round(o-i.top+r);s=Math.round(a-i.left+s)}else{r=0;s=0}this.containerElement.style.setProperty("margin-top",r+"px");this.containerElement.style.setProperty("margin-left",s+"px");this.timers.updateCXOTimer.reset(100)}};i.prototype.compareFloatingPlayerPosition=function(){var i=!sh(this.activeResource)?this.activeResource.getBoundingClientRect():this.overlayElement.getBoundingClientRect();var t=Math.abs(this.overlayUtilities.currentDimensions.left-i.left)+Math.abs(this.overlayUtilities.currentDimensions.top-i.top);var e=this.cxoverlay.getAttribute("debug-cardinal-mode");if(!e){if(t>=2){if(this.floatingModeLockedCount>0||this.floatingJumpCount++<9){this.overlayElement.style.setProperty("opacity","0");this.closestFloatingPosition[this.cardinalDirectionsMode]=t;var n=this.cardinalDirectionsMode===Be.ZERO_INSET?Be.ADJUSTED_INSET:this.cardinalDirectionsMode===Be.ADJUSTED_INSET?Be.AUTO:Be.ZERO_INSET;this.debugLog("compareFloatingPlayerPosition - Floating player mode off by ".concat(t," on cardinalDirectionsMode=").concat(this.cardinalDirectionsMode,".\nChange to floating player mode: shouldUseCardinalDirections=").concat(n),[d.CXO]);if(!this.floatingModeConfirmed){this.floatingModeLockedCount=0;this.timers.confirmCardinalDirectionsModeTimer.cancel()}if(--this.floatingModeLockedCount<=0){this.floatingModeConfirmed=false;this.cardinalDirectionsMode=n}this.timers.updateCXOTimer.reset(100)}else{var s=null;for(var r in this.closestFloatingPosition){if(s===null){s=r}else if(this.closestFloatingPosition[r]<this.closestFloatingPosition[s]){s=r}}this.debugLog(["compareFloatingPlayerPosition - Cannot find matching position (CURRENT: ".concat(this.cardinalDirectionsMode,"). jumpCount=").concat(this.floatingJumpCount," - lockedCount=").concat(this.floatingModeLockedCount,". Closest position with ").concat(s," at a distance of ").concat(this.closestFloatingPosition[s])],[d.CXO]);this.cardinalDirectionsMode=s;if(this.overlayElement.style.getPropertyValue("opacity")=="0"){this.overlayElement.style.setProperty("opacity","1")}}}else if(i.width>0&&i.height>0){this.closestFloatingPosition[this.cardinalDirectionsMode]=t;if(this.floatingModeLockedCount<20){this.timers.confirmCardinalDirectionsModeTimer.reset(500)}if(this.overlayElement.style.getPropertyValue("opacity")=="0"&&this.floatingModeConfirmed){this.overlayElement.style.setProperty("opacity","1")}this.floatingModeLockedCount=20;this.debugLog(["compareFloatingPlayerPosition - Matching position found using cardinal directions (".concat(this.cardinalDirectionsMode,") at a distance of ").concat(this.closestFloatingPosition[this.cardinalDirectionsMode],". jumpCount=").concat(this.floatingJumpCount," - lockedCount=").concat(this.floatingModeLockedCount,".")],[d.CXO])}}else{this.debugLog(["compareFloatingPlayerPosition - debug override - setting with param ".concat(e)],[d.CXO,d.QA]);if(e==="zero"){this.cardinalDirectionsMode=Be.ZERO_INSET}else if(e==="adjusted"){this.cardinalDirectionsMode=Be.ADJUSTED_INSET}else{this.cardinalDirectionsMode=Be.AUTO}}};i.prototype.confirmCardinalDirectionsMode=function(){if(this.overlayUtilities.currentDimensions.isFloating){var i=!sh(this.activeResource)?this.activeResource.getBoundingClientRect():this.overlayElement.getBoundingClientRect();var t=Math.abs(this.overlayUtilities.currentDimensions.left-i.left)+Math.abs(this.overlayUtilities.currentDimensions.top-i.top);if(t<2){this.floatingModeConfirmed=true;if(this.overlayElement.style.getPropertyValue("opacity")=="0"){this.overlayElement.style.setProperty("opacity","1")}this.debugLog("cardinalDirectionsMode confirmed: ".concat(this.cardinalDirectionsMode),[d.QA,d.CXO])}}};i.prototype.checkForVideoChange=function(){if(!sh(this.videoElement)&&!sh(this.overlayUtilities.currentDimensions)){var i=this.videoElement.getBoundingClientRect();if(Math.round(i.width)!==this.watchedVideoSize.width||Math.round(i.height)!==this.watchedVideoSize.height||Math.round(i.left)!==this.watchedVideoSize.left||Math.round(i.top)!==this.watchedVideoSize.top){this.debugLog("checkForVideoChange - Video size change. ".concat(Math.round(i.width)," !== ").concat(this.watchedVideoSize.width," || ").concat(Math.round(i.height)," !== ").concat(this.watchedVideoSize.height," || ").concat(Math.round(i.left)," !== ").concat(this.watchedVideoSize.left," || ").concat(Math.round(i.top)," !== ").concat(this.watchedVideoSize.top," -> updateCXO()."));this.timers.updateCXOTimer.execute()}}};i.prototype.checkCurrentVideoStatus=function(){var i,t,e;if(!sh(this.videoElement)&&this.videoElement.readyState>=2){if(!this.isVideoAdvertisement){if(!this.videoElement.paused&&!this.currentVideoStatus.videoEnded){if(!this.currentVideoStatus.videoAnalyticsParameters.started){this.currentVideoStatus.videoAnalyticsParameters.started=true;this.analyticsEventDispatcher.sendVideoEvent(F.VIDEO_STARTED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.videoElement.currentTime,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height})}var n=this.videoElement.currentTime;var s=Math.floor(n/60);if(s>=2&&this.currentVideoStatus.videoAnalyticsParameters.minutesReachedLog.indexOf(s)==-1){this.currentVideoStatus.videoAnalyticsParameters.minutesReachedLog.push(s);this.analyticsEventDispatcher.sendVideoEvent(F.VIDEO_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.videoElement.currentTime,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},s+"_MINUTES")}if(n>60&&!this.currentVideoStatus.videoAnalyticsParameters.sixtySecondsReached){this.analyticsEventDispatcher.sendVideoEvent(F.VIDEO_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.videoElement.currentTime,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},"60_SECONDS");this.currentVideoStatus.videoAnalyticsParameters.sixtySecondsReached=true}if(n>45&&!this.currentVideoStatus.videoAnalyticsParameters.fortyFiveSecondsReached){this.analyticsEventDispatcher.sendVideoEvent(F.VIDEO_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.videoElement.currentTime,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},"45_SECONDS");this.currentVideoStatus.videoAnalyticsParameters.fortyFiveSecondsReached=true}if(n>30&&!this.currentVideoStatus.videoAnalyticsParameters.thirtySecondsReached){this.analyticsEventDispatcher.sendVideoEvent(F.VIDEO_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.videoElement.currentTime,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},"30_SECONDS");this.currentVideoStatus.videoAnalyticsParameters.thirtySecondsReached=true}if(n>15&&!this.currentVideoStatus.videoAnalyticsParameters.fifteenSecondsReached){this.analyticsEventDispatcher.sendVideoEvent(F.VIDEO_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.videoElement.currentTime,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},"15_SECONDS");this.currentVideoStatus.videoAnalyticsParameters.fifteenSecondsReached=true}if(n>10&&!this.currentVideoStatus.videoAnalyticsParameters.tenSecondsReached){this.analyticsEventDispatcher.sendVideoEvent(F.VIDEO_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.videoElement.currentTime,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},"10_SECONDS");this.currentVideoStatus.videoAnalyticsParameters.tenSecondsReached=true}if(n>=5&&!this.currentVideoStatus.videoAnalyticsParameters.fiveSecondsReached){this.analyticsEventDispatcher.sendVideoEvent(F.VIDEO_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.videoElement.currentTime,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},"5_SECONDS");this.currentVideoStatus.videoAnalyticsParameters.fiveSecondsReached=true}}}else{this.currentVideoStatus.analyticsTriggeredVideoStarted=true}if(this.currentVideoStatus.videoDuration===0&&((i=this.videoElement)===null||i===void 0?void 0:i.duration)>0){this.currentVideoStatus.videoDuration=this.videoElement.duration}else if(!this.currentVideoStatus.isStreaming&&this.currentVideoStatus.videoDuration!==((t=this.videoElement)===null||t===void 0?void 0:t.duration)){var r=Math.abs(this.currentVideoStatus.videoDuration-((e=this.videoElement)===null||e===void 0?void 0:e.duration));if(r>1){this.currentVideoStatus.durationChangeCount++;var o=0;if(this.currentVideoStatus.durationChangeCount>o){this.debugLog("Video's original duration of ".concat(this.currentVideoStatus.videoDuration," does not match current video duration of ").concat(this.videoElement.duration,". Video duration has changed ").concat(this.currentVideoStatus.durationChangeCount," time(s). Video has been identified as STREAMING."),[d.CXO,d.QA]);this.currentVideoStatus.isStreaming=true;this.currentVideoStatus.timerBasedBidding=true;this.setNextAutomaticBidTime()}else{this.debugLog("Video's original duration of ".concat(this.currentVideoStatus.videoDuration," does not match current video duration of ").concat(this.videoElement.duration,". Video duration has changed ").concat(this.currentVideoStatus.durationChangeCount," time(s), but video is not yet identified as STREAMING because ").concat(o," duration changes are allowed."),[d.CXO,d.QA])}}else{this.debugLog("Video's original duration of ".concat(this.currentVideoStatus.videoDuration," does not match current video duration of ").concat(this.videoElement.duration,". Video duration difference of ").concat(r,"s is less than the threshold of >1s. No changes made to video STREAMING status."),[d.CXO,d.QA])}this.currentVideoStatus.videoDuration=this.videoElement.duration}else if(!this.nobid&&this.currentVideoStatus.timerBasedBidding&&this.videoElement.currentTime>this.currentVideoStatus.nextBidTime&&this.cxoActive){this.debugLog("Initiating timed bid request for ".concat(this.currentVideoStatus.nextBidTime," seconds at video time ").concat(this.videoElement.currentTime,"."),[d.CXO,d.QA]);this.timers.automaticBidTimer.execute()}}};i.prototype.setNextAutomaticBidTime=function(){var i,t;if(!this.nobid){if(this.currentVideoStatus.timerBasedBidding){if(!sh(this.overlayUtilities.groupConfig)&&this.overlayUtilities.groupConfig.persistentInserts){if(this.timers.automaticBidTimer.timeRemainingInSeconds<=0){var e=this.overlayUtilities.bidCount===0?1:this.overlayUtilities.groupConfig.insertFrequency+this.overlayUtilities.groupConfig.insertDuration;this.debugLog("Next automatic timed bid request to happen in ".concat(e," seconds."),[d.CXO,d.QA]);this.timers.automaticBidTimer.reset(e*1e3)}else{this.debugLog("Automatic bid timer already initialized. Next automatic timed bid request to happen in ".concat(this.timers.automaticBidTimer.timeRemainingInSeconds," seconds."),[d.CXO,d.QA])}}else{if(this.currentVideoStatus.lastBidTime!==0&&((i=this.currentVideoStatus)===null||i===void 0?void 0:i.nextBidTime)>((t=this.videoElement)===null||t===void 0?void 0:t.currentTime)){this.debugLog("Next automatic timed bid request to remain at: ".concat(this.currentVideoStatus.nextBidTime,"."),[d.CXO,d.QA])}else{if(this.currentVideoStatus.lastBidTime!==0&&!sh(this.overlayUtilities.groupConfig)){this.currentVideoStatus.nextBidTime=this.currentVideoStatus.lastBidTime+(this.overlayUtilities.groupConfig.insertFrequency+this.overlayUtilities.groupConfig.insertDuration)}else{this.currentVideoStatus.nextBidTime=this.videoElement.currentTime+.5;if(this.currentVideoStatus.nextBidTime<2.1)this.currentVideoStatus.nextBidTime=2.1}this.debugLog("Next automatic timed bid request to start at video time ".concat(this.currentVideoStatus.nextBidTime,"."),[d.CXO,d.QA])}}}}else{this.debugLog("'nobid' attribute ".concat(this.nobid," - there will be no automatic bidding."),[d.CXO,d.QA])}};i.prototype.resetVideoStatus=function(){this.debugLog("resetVideoStatus");this.currentVideoStatus.videoStarted=false;this.currentVideoStatus.videoEnded=true;this.currentVideoStatus.analyticsTriggeredPassed15Seconds=false;this.currentVideoStatus.analyticsTriggeredVideoStarted=false;if(!this.overlayUtilities.groupConfig.persistentInserts&&!this.currentVideoStatus.isFloatingExclusive){this.currentVideoStatus.timerBasedBidding=false}this.currentVideoStatus.isStreaming=false;this.currentVideoStatus.videoDuration=0;this.currentVideoStatus.durationChangeCount=0;this.currentVideoStatus.lastBidTime=0;this.currentVideoStatus.videoAnalyticsParameters.started=false;this.currentVideoStatus.videoAnalyticsParameters.restarted=true;this.currentVideoStatus.videoAnalyticsParameters.fiveSecondsReached=false;this.currentVideoStatus.videoAnalyticsParameters.tenSecondsReached=false;this.currentVideoStatus.videoAnalyticsParameters.fifteenSecondsReached=false;this.currentVideoStatus.videoAnalyticsParameters.thirtySecondsReached=false;this.currentVideoStatus.videoAnalyticsParameters.fortyFiveSecondsReached=false;this.currentVideoStatus.videoAnalyticsParameters.sixtySecondsReached=false;this.currentVideoStatus.videoAnalyticsParameters.minutesReachedLog=[]};i.prototype.logCXOTimeElapsedEvent=function(i){var t=this;if(this.overlayUtilities.elapsedOverlayTime-this.overlayUtilities.activeOverlayTime>10800*1e3){this.destroyCXO()}if(this.cxoActive){switch(i){case 60:this.analyticsEventDispatcher.sendOverlayTimeEvent(F.OVERLAY_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,"60_SECONDS");this.timers.cxoTimeElapsedEventTimeout.reset(6e4,(function(){t.logCXOTimeElapsedEvent(120)}));break;case 45:this.analyticsEventDispatcher.sendOverlayTimeEvent(F.OVERLAY_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,"45_SECONDS");this.timers.cxoTimeElapsedEventTimeout.reset(15e3,(function(){t.logCXOTimeElapsedEvent(60)}));break;case 30:this.analyticsEventDispatcher.sendOverlayTimeEvent(F.OVERLAY_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,"30_SECONDS");this.timers.cxoTimeElapsedEventTimeout.reset(15e3,(function(){t.logCXOTimeElapsedEvent(45)}));break;case 15:this.analyticsEventDispatcher.sendOverlayTimeEvent(F.OVERLAY_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,"15_SECONDS");this.timers.cxoTimeElapsedEventTimeout.reset(15e3,(function(){t.logCXOTimeElapsedEvent(30)}));break;case 10:this.analyticsEventDispatcher.sendOverlayTimeEvent(F.OVERLAY_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,"10_SECONDS");this.timers.cxoTimeElapsedEventTimeout.reset(5e3,(function(){t.logCXOTimeElapsedEvent(15)}));break;case 5:this.analyticsEventDispatcher.sendOverlayTimeEvent(F.OVERLAY_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,"5_SECONDS");this.timers.cxoTimeElapsedEventTimeout.reset(5e3,(function(){t.logCXOTimeElapsedEvent(10)}));break;default:if(i>60){this.analyticsEventDispatcher.sendOverlayTimeEvent(F.OVERLAY_TIME_REACHED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,i/60+"_MINUTES");this.timers.cxoTimeElapsedEventTimeout.res(i+60)}))}break}}};i.prototype.updateCXO=function(){var i,t,e;this.detectCXWaitChanges();if(this.showLoggingOverlay&&((i=this.loggingOverlay)===null||i===void 0?void 0:i.parentElement)!==((t=this.cxoverlay)===null||t===void 0?void 0:t.parentElement)){this.cxoverlay.parentElement.insertBefore(this.loggingOverlay,this.cxoverlay)}if(this.lockCXO){this.debugLog("updateCXO will not run. lockCXO = ".concat(this.lockCXO))}else if(this.cxWait){if(!sh(this.videoElement)&&!this.isVideoOnPage&&!this.videoPlayerLost){this.setVideoPlayerAsLost()}else{this.timers.updateCXOTimer.reset(5e3)}this.debugLog("updateCXO will not run. cxWait = ".concat(this.cxWait))}else if(!sh(this.videoElement)){if(!sh(this.activeResource)||!sh(this.carouselResource)){this.timers.updateCXOTimer.reset(1e3)}else{this.timers.updateCXOTimer.reset(5e3)}if(this.isVideoOnPage){this.debugLog("updateCXO --videoElementId = ".concat(this.qElementId," --optimalInsertType = ").concat(this.optimalInsertType));if(this.videoPlayerLost&&this.overlayElement.style.getPropertyValue("opacity")==="0"){this.overlayElement.style.setProperty("opacity","1");this.videoPlayerLost=false;this.timers.checkLostVideoPlayerTimer.cancel()}this.timers.checkTrackIntegrityTimer.execute();if(!(this.isCTV&&this.overlayUtilities.currentDimensions.width!==0)){this.determineDimensions()}else{this.debugLog("Not re-calculating dimensions for CTV: ".concat(this.overlayUtilities.currentDimensions.width,"x").concat(this.overlayUtilities.currentDimensions.height),d.CXO)}var n="hidden";if(!sh(this.optimalInsertType)&&this.optimalInsertType!==S.NONE){if(this.optimalInsertType.includes("bleedover")){n="visible"}}var s=this.overlayUtilities.currentDimensions.isFullscreen?"absolute":"unset";var r={top:"auto",right:"auto",bottom:"auto",left:"auto"};if(this.overlayUtilities.currentDimensions.isFloating&&!this.overlayUtilities.currentDimensions.isFullscreen){s="fixed"}else if(!sh(this.optimalInsertType)&&this.optimalInsertType!==S.NONE){var o=this.optimalInsertType.includes("bleedover")?this.bleedoverParentElement:this.overlayUtilities.currentDimensions.isFullscreen?this.fullscreenParentElement:this.overlayParentElement;if(!sh(o)){var a=window.getComputedStyle(o).getPropertyValue("position").toLowerCase();if(a==="relative"||a==="static"){this.debugLog("CXOverlay parent position = '".concat(a,"' - setting overlay position = 'absolute'."),d.CXO);s="absolute"}}}if(this.playerType===T.RUMBLE){s="unset"}if(this.overlayUtilities.currentDimensions.isFloating){switch(this.cardinalDirectionsMode){case Be.ADJUSTED_INSET:r={top:this.floatingCardinalDirections.top,right:this.floatingCardinalDirections.right,bottom:this.floatingCardinalDirections.bottom,left:this.floatingCardinalDirections.left};break;case Be.ZERO_INSET:r={top:"0px",right:"auto",bottom:"auto",left:"0px"};break;case Be.AUTO:r={top:"auto",right:"auto",bottom:"auto",left:"auto"};break}}else if(s==="absolute"){r={top:"0px",right:"auto",bottom:"auto",left:"0px"}}this.timers.updateCXOFrameDelayTimer.reset(10);this.remakeADXonSizeChange();var h=this.containerElement.style;var l=Boolean(this.overlayUtilities.currentDimensions.previousHeight!==this.overlayUtilities.currentDimensions.height);var u=Boolean(this.overlayUtilities.currentDimensions.previousWidth!==this.overlayUtilities.currentDimensions.width);var f=Boolean(h.getPropertyValue("position")!==s);var c="updateCXO";c+="\n --style.height = ".concat(h.getPropertyValue("height"));if(l){h.setProperty("height",this.overlayUtilities.currentDimensions.height+"px");this.overlayUtilities.currentDimensions.previousHeight=this.overlayUtilities.currentDimensions.height;c+="  --changed to ".concat(h.getPropertyValue("height"))}c+="\n --style.width = ".concat(h.getPropertyValue("width"));if(u){this.overlayUtilities.currentDimensions.previousWidth=this.overlayUtilities.currentDimensions.width;h.setProperty("width",this.overlayUtilities.currentDimensions.width+"px");c+="  --changed to ".concat(h.getPropertyValue("width"))}c+="\n --style.top = ".concat(h.getPropertyValue("top"));if(h.getPropertyValue("top")!==r.top){h.setProperty("top",r.top);c+="  --changed to ".concat(h.getPropertyValue("top"))}c+="\n --style.bottom = ".concat(h.getPropertyValue("bottom"));if(h.getPropertyValue("bottom")!==r.bottom){h.setProperty("bottom",r.bottom);c+="  --changed to ".concat(h.getPropertyValue("bottom"))}c+="\n --style.left = ".concat(h.getPropertyValue("left"));if(h.getPropertyValue("left")!==r.left){h.setProperty("left",r.left);c+="  --changed to ".concat(h.getPropertyValue("left"))}c+="\n --style.right = ".concat(h.getPropertyValue("right"));if(h.getPropertyValue("right")!==r.right){h.setProperty("right",r.right);c+="  --changed to ".concat(h.getPropertyValue("right"))}c+="\n --style.overflow = ".concat(h.getPropertyValue("overflow"));if(h.getPropertyValue("overflow")!==n){h.setProperty("overflow",n);this.overlayElement.style.setProperty("overflow",n);c+="  --changed to ".concat(h.getPropertyValue("overflow"))}c+="\n --style.position = ".concat(h.getPropertyValue("position"));if(f){h.setProperty("position",s);c+="  --changed to ".concat(h.getPropertyValue("position"));(e=this.containerElement)===null||e===void 0?void 0:e.style.setProperty("opacity","0");this.timers.containerElementOpacityResetTimer.reset(150)}this.debugLog(c);if(l||u){this.timers.dispatchResizeEventTimer.execute();this.timers.dispatchResizeEventTimer.reset(1);this.timers.updateCXOTimer.reset(50)}}else if(!this.videoPlayerLost){this.setVideoPlayerAsLost();this.debugLog("updateCXO - video player is not on page and videoPlayerLost = false");if(this.overlayUtilities.groupConfig.persistentInserts&&!sh(this.activeResource)){this.determineDimensions()}}else{this.debugLog("updateCXO - video player is not on page and videoPlayerLost = true");if(this.overlayUtilities.groupConfig.persistentInserts&&!sh(this.activeResource)){this.determineDimensions()}}}};i.prototype.setVideoPlayerAsLost=function(){this.debugLog("Attached video element has been detected as removed from page",[d.QA,d.CXO]);this.watchedVideoSize={left:0,top:0,width:0,height:0};if(!this.overlayUtilities.groupConfig.persistentInserts){this.overlayElement.style.setProperty("opacity","0");this.debugLog("Group configuration 'persistentInserts'=".concat(this.overlayUtilities.groupConfig.persistentInserts," - Hiding overlay on video player lost."),[d.CXO])}this.videoPlayerLost=true;this.timers.checkLostVideoPlayerTimer.reset(1e3)};i.prototype.remakeADXonSizeChange=function(){var i=this;if(!sh(this.activeResource)&&this.activeResourceData.data.isADX){var t=this.overlayUtilities.percentageDifference(parseInt(this.activeResource.getAttribute("creationwidth")),this.overlayUtilities.currentDimensions.width);if(t>1){var e=true;if(!sh(this.carouselResource)){var n=this.insertidid")}));if(!sh(n)&&n.data.isADX){this.clearRemainingInserts()}else{this.clearActiveInsert();e=false}}else{this.clearActiveInsert()}if(e){this.previousADXId=this.activeResourceData.uniqueId;this.timers.remakeADXInsertTimer.reset(1e3)}this.debugLog("Video size has changed by ".concat(t.toFixed(3),"% since ADX insert creation.\n  ADX insert to be removed.\n  Will be recreated: ").concat(e),[d.QA,d.CXO])}}};i.prototype.remakeADXInsert=function(){if(sh(this.videoElement)||!this.isVideoOnPage){this.debugLog("Video is no longer on the page. Will not remake ADX insert.",[d.CXO,d.QA])}else if(this.isVideoAdvertisement){this.debugLog("Video advertisement is active. Will not remake ADX insert.",[d.CXO,d.QA])}else if(!sh(this.activeResource)){this.debugLog("Another insert is currently active. Will not remake ADX insert.",[d.CXO,d.QA])}else{var i=this.preferredBannerSize;this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_REBUILD,M.ADX,"ADX","ADX","ADX",this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.previousADXId,i.insertType.toUpperCase(),"".concat(i.adxSize[0],"x").concat(i.adxSize[1]),this.overlayUtilities.adOpportunityId,this.overlayUtilities.bidRequestId,this.overlayUtilities.containerViewabilityValue);this.generateADXInsert()}};i.prototype.updateCXOFrameDelay=function(){if(this.overlayUtilities.currentDimensions.isFloating){this.compareFloatingPlayerPosition()}else{if(this.cxoverlay.style.getPropertyValue("opacity")=="0"){this.cxoverlay.style.setProperty("opacity","1")}}this.adjustMargin()};i.prototype.videoPlayerRemainsLostCheck=function(){if(!this.isVideoOnPage){this.debugLog("videoPlayerRemainsLostCheck - Player has not been re-added. Reset video status.",[d.CXO,d.QA]);if(!this.overlayUtilities.groupConfig.persistentInserts){this.debugLog("Group configuration 'persistentInserts'=".concat(this.overlayUtilities.groupConfig.persistentInserts," - Not removing inserts after video is no longer available."),[d.QA,d.CXO]);this.clearRemainingInserts();this.resetCarouselData()}this.shouldRequestMoments=false;this.resetVideoStatus();this.videoElement["cxInitialized"]=false;delete this.videoElement["cxInitialized"];this.removeVideoEvents();this.videoUrl=null;if(this.videoElement.hasAttribute("insertvideoscale")){this.debugLog("Removing scaling of lost video player: "+this.videoElement.getAttribute("insertvideoscale"),d.CXO);this.videoElement.removeAttribute("insertvideoscale");this.videoElement.style.removeProperty("transform");this.overlayUtilities.currentDimensions.elementScale=1}this.videoElement=null;this.insertLogicManager.elementHost=null;this.lockCXO=false;this.timers.reinitializeVideoElementTimer.reset(50)}else{this.debugLog("Player has been re-added page. Take no action.",[d.CXO,d.QA]);this.timers.updateCXOTimer.execute()}this.videoPlayerLost=false};i.prototype.addEvents=function(){var i=this;if(!sh(this.videoElement)){this.addVideoEvents();if(!sh(this.playerConfig.floatingCloseBtn)){var t=this.videoContainerSearchNode.querySelector(this.playerConfig.floatingCloseBtn);if(!sh(t)){this.videoContainerSearchNode.querySelector(this.playerConfig.floatingCloseBtn).addEventListener("Data()}))}}}};i.prototype.addVideoEvents=function(){this.debugLog("Adding Video Event Listeners for video: ".concat(this.videoElement.outerHTML.slice(0,this.videoElement.outerHTML.indexOf(this.videoElement.innerHTML))),[d.QA,d.CXO]);for(var i in this.registeredVideoEvents){this.debugLog("Adding event '".concat(i,"' to video"),[d.CXO,d.QA]);if(i===oh.VIDEO_EVENT_FROM_INSERT){this.debugLog("Removing bubble ability on event ".concat(R.EVENT_FROM_INSERT," from insert"),d.CXO);this.videoElement.addEventListener(R.EVENT_FROM_INSERT,this.registeredVideoEvents[i],false)}else{this.videoElement.addEventListener(i,this.registeredVideoEvents[i])}}if(this.playerType===T.AIRTV){this.debugLog("Adding AIRTV Video Event Listeners",[d.QA,d.CXO]);for(var i in this.registeredAirTVVideoEvents){this.debugLog("Adding event '".concat(i,"' to video"),[d.CXO,d.QA]);this.videoElement.addEventListener(i,this.registeredAirTVVideoEvents[i])}}};i.prototype.removeVideoEvents=function(){if(!sh(this.videoElement)){this.debugLog("Removing Video Event Listeners for video: ".concat(this.qElementId),[d.QA,d.CXO]);for(var i in this.registeredVideoEvents){this.debugLog("Removing event '".concat(i,"' from video"),[d.CXO,d.QA]);if(i===oh.VIDEO_EVENT_FROM_INSERT){this.videoElement.removeEventListener(R.EVENT_FROM_INSERT,this.registeredVideoEvents[i],false)}else{this.videoElement.removeEventListener(i,this.registeredVideoEvents[i])}}if(this.playerType===T.AIRTV){this.debugLog("Removing AIRTV Video Event Listeners",[d.QA,d.CXO]);for(var i in this.registeredAirTVVideoEvents){this.debugLog("Removing event '".concat(i,"' from video"),[d.CXO,d.QA]);this.videoElement.removeEventListener(i,this.registeredAirTVVideoEvents[i])}}}};i.prototype.addWindowEvents=function(){for(var i in this.registeredWindowEvents){this.debugLog("Adding event ".concat(i," to window"),[d.CXO,d.QA]);self.addEventListener(i,this.registeredWindowEvents[i])}};i.prototype.removeWindowEvents=function(){for(var i in this.registeredWindowEvents){this.debugLog("Removing event '".concat(i,"' from window"),[d.CXO,d.QA]);self.removeEventListener(i,this.registeredWindowEvents[i])}};i.prototype.videoLoaData")};i.prototype.videoLoadedMange()};i.prototype.videoEnd=function(){this.debugLog("videoEnd");this.currentVideoStatus.videoAnalyticsParameters.restarted=false;this.analyticsEventDispatcher.sendVideoEvent(F.VIDEO_ENDED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.videoElement.currentTime,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height});this.videoEndedReset()};i.prototype.videoEndedReset=function(){if(!this.currentVideoStatus.videoEnded){if(sh(this.overlayUtilities.groupConfig)||!this.overlayUtilities.groupConfig.persistentInserts){this.clearRemainingInserts();this.resetCarouselData();this.shouldRequestMoments=true}this.resetVideoStatus()}};i.prototype.videoPlay=function(){this.debugLog("videoPlay");this.analyticsEventDispatcher.sendVideoEvent(F.VIDEO_PLAY,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.videoElement.currentTime,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height});this.checkIfMomentsNeeded();this.timers.checkTrackIntegrityTimer.reset(500);this.timers.detectCXWaitChangesTimer.resetInterval(500,6)};i.prototype.videoPause=function(){this.debugLog("videoPause");this.checkIfMomentsNeeded();this.analyticsEventDispatcher.sendVideoEvent(F.VIDEO_PAUSE,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.videoElement.currentTime,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height});this.timers.detectCXWaitChangesTimer.resetInterval(500,6);if(this.videoElement.currentTime>=this.videoElement.duration&&!this.currentVideoStatus.isStreaming){this.debugLog("Video pause triggered video end reset.",[d.QA,d.CXO]);this.videoEndedReset()}};i.prototype.videoEmptied=function(){if(!this.overlayUtilities.groupConfig.persistentInserts){if(this.didVideoSourceChange){this.debugLog(["videoEmptied event triggered. Removing any active inserts.","Current video source: ".concat(this.getVideoSource(this.videoElement))],[d.QA,d.CXO]);this.handleVideoSourceChange()}else{this.debugLog(["videoEmptied event triggered, but video source did not change. No change required for inserts."],[d.QA,d.CXO]);this.currentVideoStatus.videoRecentlyEmptied=true;this.resetVideoStatus()}}else{this.debugLog(["videoEmptied event triggered. persistentInserts=true - Will not remove active inserts.","Current video source: ".concat(this.getVideoSource(this.videoElement))],[d.QA,d.CXO]);this.resetVideoStatus()}};i.prototype.videoTimeUpdate=function(){if(!sh(this.videoElement)){if(this.cxWait){if(this.cxoverlay.getAttribute("cx-wait")===null){this.debugLog('Video time change during "automatic" cx-wait. Testing for video advertisement.',[d.CXO]);this.detectCXWaitChanges()}}if(this.currentVideoStatus.videoRecentlyEmptied){this.debugLog('The video has recently had a "videoEmptied" event. Will check video source.',d.CXO);this.handleVideoSourceChange();this.currentVideoStatus.videoRecentlyEmptied=false}if(!this.currentVideoStatus.videoStarted&&(this.videoElement.currentTime>=.5&&this.videoElement.currentTime<this.videoElement.duration-.5)){this.currentVideoStatus.videoStarted=true;if(this.currentVideoStatus.videoEnded){this.currentVideoStatus.videoEnded=false;this.debugLog("addEvents --timeupdate --videoRestarted");this.checkIfMomentsNeeded();if(!this.currentVideoStatus.videoAnalyticsParameters.restarted){this.analyticsEventDispatcher.sendVideoEvent(F.VIDEO_RESTARTED,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,this.videoElement.currentTime,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,this.overlayUtilities.containerViewabilityValue,{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height});this.currentVideoStatus.videoAnalyticsParameters.restarted=true}}}else if(!this.currentVideoStatus.videoEnded&&this.videoElement.readyState>=2&&this.videoElement.currentTime>=this.videoElement.duration-.5){if(this.videoElement.getAttribute("loop")!=null&&this.videoElement.getAttribute("loop")!=="false"){this.videoEnd()}}if(this.videoElement.paused){this.debugLog("Video time update while paused",d.CXO);this.timers.detectCXWaitChangesTimer.resetInterval(500,6)}if(!sh(this.activeResource)&&this.isInsertTimeBlocked){this.debugLog("Insert time is blocked. Should not be displaying insert. Will destroy active insert.",[d.QA,d.CXO]);this.clearRemainingInserts()}this.checkCurrentVideoStatus()}};i.prototype.videoInsertEvent=function(i){var t=this;var e,n,s,o,a,h,l,u,f,c,v,p,m,g,b,y,w,O,T,I,S,E,D,_,C,k,N,B,x,U,q,L,P,V,j,X,G,W,H,Y,J,Q,K,Z,$,ii,ti,ei,ni,si,ri,oi,ai,hi,li,ui,di,fi,ci,vi,pi,mi,gi,bi,yi,wi,Oi,Ti,Ii,Si,Ei,Di,Ri,_i,Ci,ki,Ni,Ai,Bi,xi,Fi,Ui,qi,Mi,Li,zi,Pi,Vi,ji,Xi,Gi,Wi,Hi,Yi,Ji,Qi,Ki;var Zi;var $i=i.detail;var it=(e=i.detail.uid)!==null&&e!==void 0?e:"UNDEFINED";var tt=(n=i.detail.insertViewability)!==null&&n!==void 0?n:null;var et=(s=i.detail.insertLifetime)!==null&&s!==void 0?s:null;var nt=(o=i.detail.insertViewabilityTime)!==null&&o!==void 0?o:null;var st=Math.round(i.detail.insertAverageViewabilityValue*1e4)/100;var rt=it==="UNDEFINED"?d.IMPORTANT:d.CXO;this.debugLog("videoInsertEvent - communication from inserts: ".concat(i.detail.type," from insert ").concat(it),rt);var ot=(a=this.inserts.find((function(i){return i.uniqueId===it})))!==null&&a!==void 0?a:this.activeResourceData;switch($i.type){case R.INSERT_INITIALIZED:{this.debugLog("addEvents --insertInitializedSuccessfully");if(!!((h=this.overlayUtilities.osdConfig)===null||h===void 0?void 0:h.renderPrebidWin)){var at=(l=i.detail)===null||l===void 0?void 0:l.div;var ht=(u=i.detail)===null||u===void 0?void 0:u.acceptedbidid;this.overlayUtilities.osdConfig.renderPrebidWin(at,ht)}this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_INITIALIZED,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((f=ot===null||ot===void 0?void 0:ot.data)===null||f===void 0?void 0:f.w)?"".concat((c=ot===null||ot===void 0?void 0:ot.data)===null||c===void 0?void 0:c.w,"x").concat((v=ot===null||ot===void 0?void 0:ot.data)===null||v===void 0?void 0:v.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);break}case R.INSERT_RENDERED:{this.debugLog("addEvents --insertDataAssignedSuccessfully");this.floatingJumpCount=0;this.timers.updateCXOTimer.reset(1);this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_RENDERED,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((p=ot===null||ot===void 0?void 0:ot.data)===null||p===void 0?void 0:p.w)?"".concat((m=ot===null||ot===void 0?void 0:ot.data)===null||m===void 0?void 0:m.w,"x").concat((g=ot===null||ot===void 0?void 0:ot.data)===null||g===void 0?void 0:g.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);break}case R.INSERT_RERENDERED:{this.debugLog("addEvents --insertDataReassignedSuccessfully");this.floatingJumpCount=0;this.timers.updateCXOTimer.reset(1);this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_RERENDERED,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((b=ot===null||ot===void 0?void 0:ot.data)===null||b===void 0?void 0:b.w)?"".concat((y=ot===null||ot===void 0?void 0:ot.data)===null||y===void 0?void 0:y.w,"x").concat((w=ot===null||ot===void 0?void 0:ot.data)===null||w===void 0?void 0:w.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);break}case R.INSERT_USER_CLOSED:{this.debugLog("addEvents --insertUserClosed");this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_USER_CLOSED,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((O=ot===null||ot===void 0?void 0:ot.data)===null||O===void 0?void 0:O.w)?"".concat((T=ot===null||ot===void 0?void 0:ot.data)===null||T===void 0?void 0:T.w,"x").concat((I=ot===null||ot===void 0?void 0:ot.data)===null||I===void 0?void 0:I.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);break}case R.INSERT_CLOSED:{this.debugLog("addEvents --insertClosed");if(this.isCarouselStarted){this.activeCarouselData.isClosed=true}this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_CLOSED,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((S=ot===null||ot===void 0?void 0:ot.data)===null||S===void 0?void 0:S.w)?"".concat((E=ot===null||ot===void 0?void 0:ot.data)===null||E===void 0?void 0:E.w,"x").concat((D=ot===null||ot===void 0?void 0:ot.data)===null||D===void 0?void 0:D.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);break}case R.INSERT_OPENED:{this.debugLog("addEvents --insertOpened");if(this.isCarouselStarted){this.activeCarouselData.isClosed=false}this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_REOPENED,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((_=ot===null||ot===void 0?void 0:ot.data)===null||_===void 0?void 0:_.w)?"".concat((C=ot===null||ot===void 0?void 0:ot.data)===null||C===void 0?void 0:C.w,"x").concat((k=ot===null||ot===void 0?void 0:ot.data)===null||k===void 0?void 0:k.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);break}case R.INSERT_DESTROYED:{var lt=!sh(this.activeResource)?this.activeResource.tagName:"undefined";this.dispatchExternalOverlayEvent(A.INSERT_MOMENT_END);if(!sh(this.activeResource)&&this.activeResource.getAttribute("uniqueid")===$i.uid){if(i.detail.destroyAll===true&&!sh(this.carouselResource)){this.clearRemainingInserts();this.debugLog("Removing subloaded carousel insert from available insert options.",[d.CXO])}this.insertToClear()}else if(!sh(this.carouselResource)&&this.carouselResource.getAttribute("uniqueid")===$i.uid){this.clearCarouselInsert();this.debugLog("Removing subloaded carousel insert from available insert options.",[d.CXO])}else if($i.uid==="empty"){this.insertBeingCleared=false}if(($i===null||$i===void 0?void 0:$i.uid)!=="empty"){this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_DESTROYED,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,lt,!sh((N=ot===null||ot===void 0?void 0:ot.data)===null||N===void 0?void 0:N.w)?"".concat((B=ot===null||ot===void 0?void 0:ot.data)===null||B===void 0?void 0:B.w,"x").concat((x=ot===null||ot===void 0?void 0:ot.data)===null||x===void 0?void 0:x.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt,et,nt,st);this.debugLog("addEvents --insertDestroyedSuccessfully "+($i===null||$i===void 0?void 0:$i.uid),d.QA)}break}case R.INSERT_IMPRESSION:{ot.impressionFired=true;this.overlayUtilities.impressionCount++;var ut=(U=ot.bid)!==null&&U!==void 0?U:null;var dt=this.getOriginSourceFromData(ot);this.analyticsEventDispatcher.sendInsertImpressionEvent(F.INSERT_IMPRESSION,dt,ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((q=ot===null||ot===void 0?void 0:ot.data)===null||q===void 0?void 0:q.w)?"".concat((L=ot===null||ot===void 0?void 0:ot.data)===null||L===void 0?void 0:L.w,"x").concat((P=ot===null||ot===void 0?void 0:ot.data)===null||P===void 0?void 0:P.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,tt,ut);if(ut!==null){this.dispatchExternalOverlayEvent(A.IMPRESSION,{type:A.IMPRESSION,bid:ut});if(this.isIframePlayer){this.dispatchExternalOverlayEvent(A.IMPRESSION,{type:A.IMPRESSION,bid:ut},true)}}break}case R.INSERT_DISPLAY_STARTED:{this.debugLog("addEvents --insertDisplayStarted");this.debugLog(["Is carousel? "+this.overlayUtilities.groupConfig.carouselEnabled],[d.CXO]);if(!this.isCarouselStarted&&this.overlayUtilities.groupConfig.carouselEnabled&&!this.activeCarouselData.isCompleted){var ft=this.isOSDAvailable?this.overlayUtilities.groupConfig.carouselSpeed:this.overlayUtilities.groupConfig.carouselSpeed-3;this.timers.carouselBidTimer.reset(ft*1e3);this.debugLog(["Attempting new carousel bid in ".concat(ft," seconds.")],[d.CXO,d.QA])}else if(this.isCarouselStarted){this.activeCarouselData.isClosed=false}this.dispatchExternalOverlayEvent(A.INSERT_MOMENT_BEGIN);var dt=this.getOriginSourceFromData(ot);this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_DISPLAYED,dt,ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((V=ot===null||ot===void 0?void 0:ot.data)===null||V===void 0?void 0:V.w)?"".concat((j=ot===null||ot===void 0?void 0:ot.data)===null||j===void 0?void 0:j.w,"x").concat((X=ot===null||ot===void 0?void 0:ot.data)===null||X===void 0?void 0:X.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);this.forceNextRebid=false;this.overlayUtilities.rebidCount=0;break}case R.INSERT_GPT_RESPONSE:{var dt=this.getOriginSourceFromData(ot);if(dt===M.ADX||dt===M.OSD){var ct={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,bidCpm:0,cid:"ADX",crid:null,seatId:null,adId:null,bidId:null,impressionType:r.DISPLAY,componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0};if(!sh((G=ot===null||ot===void 0?void 0:ot.data)===null||G===void 0?void 0:G.w)){ct.bannerSize="".concat((W=ot===null||ot===void 0?void 0:ot.data)===null||W===void 0?void 0:W.w,"x").concat((H=ot===null||ot===void 0?void 0:ot.data)===null||H===void 0?void 0:H.h)}if(dt===M.OSD){this.overlayUtilities.osdConfig.eventData["isSafeframe"]=$i.safeframe;var vt=this.overlayUtilities.cleanOSDResponseData((Y=this.overlayUtilities.osdConfig)===null||Y===void 0?void 0:Y.eventData);ct.debug=vt;if(!!((J=vt===null||vt===void 0?void 0:vt.osdData)===null||J===void 0?void 0:J.pbjs_won)){this.debugLog(["BID_RESPONSE - Prebid winner (pbjs_won) from bidder ".concat(vt.osdData.pbjs_won.bidder," at cpm ").concat(vt.osdData.pbjs_won.cpm),vt.osdData.pbjs_won],[d.CXO,d.QA])}}this.analyticsEventDispatcher.sendBidResponseEvent(F.BID_RESPONSE,dt,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,ct)}break}case R.INSERT_GPT_RESET:{var dt=this.getOriginSourceFromData(ot);if(dt===M.ADX||dt===M.OSD){var lt=!sh(this.activeResource)?this.activeResource.tagName:"undefined";this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_DESTROYED,dt,ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,lt,!sh((Q=ot===null||ot===void 0?void 0:ot.data)===null||Q===void 0?void 0:Q.w)?"".concat((K=ot===null||ot===void 0?void 0:ot.data)===null||K===void 0?void 0:K.w,"x").concat((Z=ot===null||ot===void 0?void 0:ot.data)===null||Z===void 0?void 0:Z.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt,et,nt,st);ot.uniqueId=this.overlayUtilities.generateUniqueId;ot.bidRequestId=this.overlayUtilities.bidRequestId;ot.adOpportunityId=this.overlayUtilities.adOpportunityId;this.activeResource.setAttribute("uniqueid",ot.uniqueId);this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_CREATED,dt,ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,ot.uniqueId,lt,!sh(($=ot===null||ot===void 0?void 0:ot.data)===null||$===void 0?void 0:$.w)?"".concat(ot===null||ot===void 0?void 0:ot.data.w,"x").concat(ot===null||ot===void 0?void 0:ot.data.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue);this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_RENDERED,dt,ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,ot.uniqueId,lt,!sh((ii=ot===null||ot===void 0?void 0:ot.data)===null||ii===void 0?void 0:ii.w)?"".concat((ti=ot===null||ot===void 0?void 0:ot.data)===null||ti===void 0?void 0:ti.w,"x").concat((ei=ot===null||ot===void 0?void 0:ot.data)===null||ei===void 0?void 0:ei.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt)}break}case R.INSERT_GPT_REFRESH:{var dt=this.getOriginSourceFromData(ot);if(dt===M.ADX||dt===M.OSD){this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_DISPLAYED,dt,ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,ot.uniqueId,this.activeResource.tagName,!sh((ni=ot===null||ot===void 0?void 0:ot.data)===null||ni===void 0?void 0:ni.w)?"".concat((si=ot===null||ot===void 0?void 0:ot.data)===null||si===void 0?void 0:si.w,"x").concat((ri=ot===null||ot===void 0?void 0:ot.data)===null||ri===void 0?void 0:ri.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);this.forceNextRebid=false;this.overlayUtilities.rebidCount=0;var ut=(oi=ot.bid)!==null&&oi!==void 0?oi:null;this.analyticsEventDispatcher.sendInsertImpressionEvent(F.INSERT_IMPRESSION,dt,ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,ot.uniqueId,this.activeResource.tagName,!sh((ai=ot===null||ot===void 0?void 0:ot.data)===null||ai===void 0?void 0:ai.w)?"".concat((hi=ot===null||ot===void 0?void 0:ot.data)===null||hi===void 0?void 0:hi.w,"x").concat((li=ot===null||ot===void 0?void 0:ot.data)===null||li===void 0?void 0:li.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,tt,ut);this.overlayUtilities.impressionCount++}break}case R.INSERT_REQUEST_VIDEO:{this.debugLog("addEvents --insertRequestingVideo");this.dispatchVideoSqueezeLayers();break}case R.INSERT_SQUEEZE_START:{this.debugLog("addEvents --insertSqueezeStart");this.lockCXO=true;break}case R.INSERT_SQUEEZE_FINISH:{this.debugLog("addEvents --insertSqueezeFinish");cute()}),20,"Unlock CXO Timer",this.logManager,d.CXO);break}case R.INSERT_TRACKING_EVENT:{var pt=i.detail.action;switch(pt){case z.CLICKTHROUGH:this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_CLICKTHROUGH,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((ui=ot===null||ot===void 0?void 0:ot.data)===null||ui===void 0?void 0:ui.w)?"".concat((di=ot===null||ot===void 0?void 0:ot.data)===null||di===void 0?void 0:di.w,"x").concat((fi=ot===null||ot===void 0?void 0:ot.data)===null||fi===void 0?void 0:fi.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);break;case z.PRIVACY_CLICKTHROUGH:this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_PRIVACY_CLICKTHROUGH,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((ci=ot===null||ot===void 0?void 0:ot.data)===null||ci===void 0?void 0:ci.w)?"".concat((vi=ot===null||ot===void 0?void 0:ot.data)===null||vi===void 0?void 0:vi.w,"x").concat((pi=ot===null||ot===void 0?void 0:ot.data)===null||pi===void 0?void 0:pi.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);break;case z.LOGO_CLICKTHROUGH:this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_LOGO_CLICKTHROUGH,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((mi=ot===null||ot===void 0?void 0:ot.data)===null||mi===void 0?void 0:mi.w)?"".concat((gi=ot===null||ot===void 0?void 0:ot.data)===null||gi===void 0?void 0:gi.w,"x").concat((bi=ot===null||ot===void 0?void 0:ot.data)===null||bi===void 0?void 0:bi.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);break;case z.OUTBRAIN_CLICKTHROUGH:this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_OUTBRAIN_CLICKTHROUGH,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((yi=ot===null||ot===void 0?void 0:ot.data)===null||yi===void 0?void 0:yi.w)?"".concat((wi=ot===null||ot===void 0?void 0:ot.data)===null||wi===void 0?void 0:wi.w,"x").concat((Oi=ot===null||ot===void 0?void 0:ot.data)===null||Oi===void 0?void 0:Oi.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);break}break}case R.INSERT_BANNER_BLOCKED:{this.debugLog("Banner blocked notification received from insert.",[d.CXO,d.QA]);this.attemptRebid(2e3);this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_BANNER_BLOCKED,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((Ti=ot===null||ot===void 0?void 0:ot.data)===null||Ti===void 0?void 0:Ti.w)?"".concat((Ii=ot===null||ot===void 0?void 0:ot.data)===null||Ii===void 0?void 0:Ii.w,"x").concat((Si=ot===null||ot===void 0?void 0:ot.data)===null||Si===void 0?void 0:Si.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);break}case R.INSERT_BANNER_FAILED:{this.debugLog("Banner load failed notification received from insert.",[d.CXO,d.QA]);this.attemptRebid(2e3);this.analyticsEventDispatcher.sendInsertFailedEvent(F.INSERT_BANNER_LOAD_FAILED,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((Ei=ot===null||ot===void 0?void 0:ot.data)===null||Ei===void 0?void 0:Ei.w)?"".concat((Di=ot===null||ot===void 0?void 0:ot.data)===null||Di===void 0?void 0:Di.w,"x").concat((Ri=ot===null||ot===void 0?void 0:ot.data)===null||Ri===void 0?void 0:Ri.h):null,ot.adOpportunityId,ot.bidRequestId,(_i=ot.data)===null||_i===void 0?void 0:_i.banner,this.overlayUtilities.containerViewabilityValue,null,tt);break}case R.INSERT_GPT_FAILED:{this.debugLog("ADX load failed notification received from insert.",[d.CXO,d.QA]);var mt=this.getOriginSourceFromData(ot);var ct={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,bidCpm:0,cid:"ADX",crid:null,seatId:null,adId:null,bidId:null,impressionType:r.DISPLAY,componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0};if(!sh((Ci=ot===null||ot===void 0?void 0:ot.data)===null||Ci===void 0?void 0:Ci.w)){ct.bannerSize="".concat((ki=ot===null||ot===void 0?void 0:ot.data)===null||ki===void 0?void 0:ki.w,"x").concat((Ni=ot===null||ot===void 0?void 0:ot.data)===null||Ni===void 0?void 0:Ni.h)}if(mt===M.OSD){this.overlayUtilities.osdConfig.eventData["isSafeframe"]=$i.safeframe;var vt=this.overlayUtilities.cleanOSDResponseData((Ai=this.overlayUtilities.osdConfig)===null||Ai===void 0?void 0:Ai.eventData);ct.debug=vt;ct.bidCpm=((xi=(Bi=vt===null||vt===void 0?void 0:vt.osdData)===null||Bi===void 0?void 0:Bi.pbjs_won)===null||xi===void 0?void 0:xi.cpm)||0}this.analyticsEventDispatcher.sendBidResponseEvent(F.BID_RESPONSE_EMPTY,mt,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,ct);this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_LOAD_FAILED,mt,ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,"".concat((Fi=ot===null||ot===void 0?void 0:ot.data)===null||Fi===void 0?void 0:Fi.w,"x").concat((Ui=ot===null||ot===void 0?void 0:ot.data)===null||Ui===void 0?void 0:Ui.h),ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);this.attemptRebid(2e3);break}case R.INSERT_GPT_RENDER_FAILED:{this.debugLog("OSD render failed notification received from insert.",[d.CXO,d.QA]);var mt=this.getOriginSourceFromData(ot);var ct={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,bidCpm:0,cid:"ADX",crid:null,seatId:null,adId:null,bidId:null,impressionType:r.DISPLAY,componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0};if(!sh((qi=ot===null||ot===void 0?void 0:ot.data)===null||qi===void 0?void 0:qi.w)){ct.bannerSize="".concat((Mi=ot===null||ot===void 0?void 0:ot.data)===null||Mi===void 0?void 0:Mi.w,"x").concat((Li=ot===null||ot===void 0?void 0:ot.data)===null||Li===void 0?void 0:Li.h)}if(mt===M.OSD){var vt=this.overlayUtilities.cleanOSDResponseData((zi=this.overlayUtilities.osdConfig)===null||zi===void 0?void 0:zi.eventData);ct.debug=vt;ct.debug.reason="GPT_RENDER_FAILED";ct.bidCpm=((Vi=(Pi=vt===null||vt===void 0?void 0:vt.osdData)===null||Pi===void 0?void 0:Pi.pbjs_won)===null||Vi===void 0?void 0:Vi.cpm)||0}this.analyticsEventDispatcher.sendBidResponseEvent(F.BID_RESPONSE_EMPTY,mt,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,ct);this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_LOAD_FAILED,mt,ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,"".concat((ji=ot===null||ot===void 0?void 0:ot.data)===null||ji===void 0?void 0:ji.w,"x").concat((Xi=ot===null||ot===void 0?void 0:ot.data)===null||Xi===void 0?void 0:Xi.h),ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);this.attemptRebid(2e3);break}case R.INSERT_VIEWED_EVENT:{this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_VIEWED,this.getOriginSourceFromData(ot),ot.seat,ot.campaignId,ot.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,it,this.activeResource.tagName,!sh((Gi=ot===null||ot===void 0?void 0:ot.data)===null||Gi===void 0?void 0:Gi.w)?"".concat((Wi=ot===null||ot===void 0?void 0:ot.data)===null||Wi===void 0?void 0:Wi.w,"x").concat((Hi=ot===null||ot===void 0?void 0:ot.data)===null||Hi===void 0?void 0:Hi.h):null,ot.adOpportunityId,ot.bidRequestId,this.overlayUtilities.containerViewabilityValue,null,tt);break}case R.INSERT_REQUEST_OSD_REFRESH:{if(ot.data.isPrebid){this.overlayUtilities.osdConfig.eventData={};var gt=this.overlayUtilities.osdConfig.slotRefreshParams;if(typeof gt.gptAdUnitId!=="undefined"&&gt.gptAdUnitId!==null&&typeof gt.gtagObject!=="undefined"&&gt.gtagObject!==null){var bt=(Yi=this.overlayUtilities.osdConfig.availableAdSizes)!==null&&Yi!==void 0?Yi:[[300,250],[336,280],[300,600],[300,1080],[234,60],[320,50],[468,60],[728,90],[970,90]];if(this.overlayUtilities.osdConfig.osdRefresh==null){this.debugLog("OSD refresh function is undefined. Will create new OSD refresh function.",[d.CXO,d.QA]);(Ji=(Zi=this.overlayUtilities.osdConfig).osdRefresh)!==null&&Ji!==void 0?Ji:Zi.osdRefresh=this.overlayUtilities.initializeOSDRefresh(gt.gptAdUnitId,gt.bidderArray,gt.gtagObject,gt.pbjsObject,bt);this.debugLog(["Created OSD refresh function:",this.overlayUtilities.osdConfig.osdRefresh],[d.CXO,d.QA])}this.overlayUtilities.osdConfig.osdRefresh(i.detail.div,[[(Qi=ot===null||ot===void 0?void 0:ot.data)===null||Qi===void 0?void 0:Qi.w,(Ki=ot===null||ot===void 0?void 0:ot.data)===null||Ki===void 0?void 0:Ki.h]],this.overlayUtilities.osdConfig.eventData)}}break}}};i.prototype.airTvAdImpression=function(i){this.airTVisAdvertisement=true;this.airTVEventsEstablished=true;this.debugLog(["AirTV Ad Impression: ",i],[d.QA,d.CXO])};i.prototype.airTvAdBreakEnd=function(i){this.airTVisAdvertisement=false;this.airTVEventsEstablished=true;this.debugLog(["AirTV Ad Break End: ",i],[d.QA,d.CXO])};i.prototype.airTvPlayerReady=function(i){this.airTVEventsEstablished=true;this.debugLog(["The ATV Player is ready: ",i],d.CXO)};i.prototype.airTvVideoInit=function(i){this.airTVEventsEstablished=true;this.debugLog(["The ATV Player engaged: ",i],d.CXO)};i.prototype.airTvPlay=function(i){this.airTVEventsEstablished=true;this.debugLog(["The ATV Player play: ",i],d.CXO)};i.prototype.airTvPause=function(i){this.airTVEventsEstablished=true;this.debugLog(["The ATV Player pause: ",i],d.CXO)};i.prototype.windowResize=function(){this.debugLog("windowResize");if(this.timers.remakeADXInsertTimer.timeRemainingInSeconds>0){this.timers.remakeADXInsertTimer.reset(1e3)}this.timers.updateCXOTimer.execute();this.timers.updateCXOTimer.reset(100)};i.prototype.windowScroll=function(){this.debugLog("windowScroll");this.timers.updateCXOTimer.execute();this.timers.updateCXOTimer.reset(100)};i.prototype.messageReceived=function(i){var t,e,n,s,r,o,a,h,l,u,f,c,v,p,m,g,b,y;try{var w=i.data;if(typeof w.target!=="undefined"&&w.target==="CXOVERLAY"){this.debugLog(["CXO 'message' received:",i],[d.IMPORTANT]);if((w===null||w===void 0?void 0:w.message)==="CREATE_INSERT"||(w===null||w===void 0?void 0:w.message)==="CREATE_NATIVE_INSERT"){var O=(e=(t=w.params)===null||t===void 0?void 0:t.headline)!==null&&e!==void 0?e:null;var T=(s=(n=w.params)===null||n===void 0?void 0:n.subheadline)!==null&&s!==void 0?s:null;var I=(o=(r=w.params)===null||r===void 0?void 0:r.cta)!==null&&o!==void 0?o:null;var S=(h=(a=w.params)===null||a===void 0?void 0:a.image)!==null&&h!==void 0?h:null;var E=(u=(l=w.params)===null||l===void 0?void 0:l.icon)!==null&&u!==void 0?u:null;this.debugLog(["Create native insert request received through postMessage.\n\n            headline = ".concat(O,"\n\n            subheadline = ").concat(T,"\n\n            cta = ").concat(I,"\n\n            image = ").concat(S,"\n\n            icon = ").concat(E)],[d.IMPORTANT]);this.generateNativeInsert(O,T,I,S,E)}else if((w===null||w===void 0?void 0:w.message)==="CREATE_BANNER_INSERT"){var D=(c=(f=w.params)===null||f===void 0?void 0:f.w)!==null&&c!==void 0?c:null;var R=(p=(v=w.params)===null||v===void 0?void 0:v.h)!==null&&p!==void 0?p:null;var _=(g=(m=w.params)===null||m===void 0?void 0:m.adm)!==null&&g!==void 0?g:null;var C=(y=(b=w.params)===null||b===void 0?void 0:b.frameSafe)!==null&&y!==void 0?y:true;this.debugLog(["Create banner insert request received through postMessage.\n\n            width = ".concat(D,"\n\n            height = ").concat(R,"\n\n            adm = ").concat(_,"\n\n            frameSafe = ").concat(C)],[d.IMPORTANT]);this.generateBannerInsert(_,D,R,C)}}}catch(i){}};i.prototype.visibilityChange=function(i){if(document.visibilityState=="visible"){this.debugLog(["visibilityChange: Tab is active - total activeOverlayTime=".concat(this.overlayUtilities.activeOverlayTime),i],[d.CXO,d.QA]);this.overlayUtilities.activeOverlayDate=(new Date).getTime()}else{this.debugLog(["visibilityChange: Tab is inactive - total activeOverlayTime=".concat(this.overlayUtilities.activeOverlayTime),i],[d.CXO,d.QA]);this.overlayUtilities.activeOverlayDate=0}};i.prototype.windowScrollStopped=function(){this.debugLog("addEvents-scroll - User stopped scrolling. Trigger CXO reset.",[d.CXO]);if(this.overlayUtilities.currentDimensions.isFloating){this.floatingJumpCount=0;this.compareFloatingPlayerPosition()}this.timers.updateCXOTimer.execute()};i.prototype.dispatchVideoSqueezeLayers=function(){var i,t,e;if(this.videoPlayerLost){this.timers.checkLostVideoPlayerTimer.execute()}var n={mainElement:(i=this.videoElement)!==null&&i!==void 0?i:null,interfaceElements:(t=this.squeezebackResizeLayers)!==null&&t!==void 0?t:[],hideElements:(e=this.squeezebackHideLayers)!==null&&e!==void 0?e:[]};this.overlayUtilities.dispatchOverlayEvent({type:_.OVERLAY_HANDOFF_VIDEO,videoElements:n})};i.prototype.dispatchExternalOverlayEvent=function(i,t,e){if(t===void 0){t={}}if(e===void 0){e=false}var n=new CustomEvent(i,{bubbles:true,detail:t});if(!e){this.debugLog(["Dispatching event to window:".concat(i," - ").concat(JSON.stringify(t))],[d.QA,d.CXO]);this.videoElement.dispatchEvent(n)}else{try{this.debugLog(["Dispatching event to TOP (above iframe) window:".concat(i," - ").concat(JSON.stringify(t))],[d.QA,d.CXO]);window.top.dispatchEvent(n)}catch(t){this.debugLog("Unable to dispatch event ".concat(i," to window.top."),[d.QA,d.CXO])}}};i.prototype.initiateCarouselBid=function(){var i=this.timers.carouselBidTimer.getTotalElapsedTime()/1e3;var t=this.overlayUtilities.groupConfig.insertDuration+3-this.overlayUtilities.groupConfig.carouselSpeed;if(i<t){if(sh(this.carouselResource)&&!this.activeCarouselData.isClosed){this.debugLog("Initiating carousel bid #".concat(++this.activeCarouselData.bidCount," at ").concat(i," seconds after carousel start."),[d.CXO,d.QA]);if(!sh(this.videoElement)&&!this.videoElement.paused||this.overlayUtilities.groupConfig.persistentInserts===true){this.timers.initiateBidRequestTimer.execute()}else{this.debugLog(["Video paused during carousel bid request attempt (likely mid-roll). Will not make bid request."],[d.CXO,d.QA])}this.debugLog(["Attempting new carousel bid in ".concat(this.overlayUtilities.groupConfig.carouselSpeed," seconds.")],[d.CXO,d.QA]);this.timers.carouselBidTimer.reset(this.overlayUtilities.groupConfig.carouselSpeed*1e3)}else{if(this.activeCarouselData.isClosed){if(this.overlayUtilities.groupConfig.insertDuration>0){this.debugLog(["Carousel has been closed. Will not initiate a new bid request. Attempting new carousel bid in 1 second."],[d.CXO,d.QA]);this.timers.carouselBidTimer.reset(1e3)}}else{this.debugLog(["Carousel insert is already loaded and awaiting display.",this.carouselResource,"Will not initiate a new bid request. Attempting new carousel bid in 1 second."],[d.CXO,d.QA]);this.timers.carouselBidTimer.reset(1e3)}}}else{if(this.overlayUtilities.groupConfig.insertDuration>0){this.debugLog("".concat(i," seconds elapsed since carousel start. Last chance for carousel bid ended at ").concat(t," seconds. Will not make further bid requests."),[d.CXO,d.QA])}this.resetCarouselData()}};i.prototype.resetCarouselData=function(){var i=this;this.activeCarouselData.bidCount=0;this.activeCarouselData.isClosed=false;this.activeCarouselData.isCompleted=true;this.activeCarouselData.active=false;this.timers.carouselBidTimer.cancel();this.timers.carouselBidTimer=lBid()}),0,"Carousel Bid Timer",this.logManager,d.CXO)};i.prototype.initiateBidRequest=function(){var i=this;var t,e,n,s,r,o,a,h,l,u,f,c;var v=this.isBidTimeAllowed;var p=this.isBlockedURL;var m=this.isVideoOnPage;var g=this.isFullscreenIOS;var b=this.isFullscreenVideoNode;this.timers.updateCXOTimer.execute();var y=document.hidden;y=false;if((this.forceNextBid||this.overlayUtilities.groupConfig.persistentInserts||!sh(this.videoElement)&&m&&v&&this.overlayUtilities.currentDimensions.width>10&&this.overlayUtilities.currentDimensions.height>10)&&(((t=this.overlayUtilities.groupConfig)===null||t===void 0?void 0:t.active)===true&&!b&&!g&&this.cxoActive&&!y&&!this.cxWait&&!this.nobid&&!p&&sh(this.stowedBidResponse)&&(this.forceNextBid||(sh(this.activeResourceData)||sh(this.carouselResourceData))))){this.debugLog("Force next bid? ".concat(this.forceNextBid),d.CXO);this.forceNextRebid=this.forceNextBid;this.forceNextBid=false;var w=true;if(this.overlayUtilities.foundUID==="NOT_FOUND"){var T=this.logManager.getDebugParamValue(O.ALLOW_REBIDS);if(T!==null&&T==="true"){this.debugLog("UID NOT FOUND, but DEBUGallowRebids=true. Will continue to allow rebidding.",[d.QA,d.CXO])}else{this.debugLog("UID NOT FOUND. Will continue to allow rebidding without UID.",[d.QA,d.CXO])}}this.overlayUtilities.bidCount++;if(this.overlayUtilities.rebidCount===0){this.requestedBannerSizes=[];this.overlayUtilities.updateAdOpportunityId()}this.timers.remakeADXInsertTimer.cancel();var I=this.isOnStream?1:this.overlayUtilities.currentDimensions.isFloating?3:2;var S=I===1?"OnStream":I===2?"InArticle":"Floating";var E=this.groupId;var D=this.logManager.getDebugParamValue(O.OVERRIDE_GROUP_ID);if(D!==null){E=D==null||D===""||D==="true"?"internal":D;this.debugLog("Using group-id '".concat(E,"' for bid requests."),[d.QA,d.CXO])}if(typeof this.overlayUtilities.gppString==="undefined"||this.overlayUtilities.gppString===null){this.overlayUtilities.getGPPData(true)}if(typeof this.overlayUtilities.tcString==="undefined"||this.overlayUtilities.tcString===null){this.overlayUtilities.getTCData(true)}if(typeof this.overlayUtilities.uspString==="undefined"||this.overlayUtilities.uspString===null){this.overlayUtilities.getUSPData(true)}var R=this.overlayUtilities.rebidCount>0?" (rebid ".concat(this.overlayUtilities.rebidCount,")"):"";this.debugLog("Attempting bid request ".concat(this.overlayUtilities.bidCount).concat(R," for group-id '").concat(E,"'.\n  Bid source: ").concat(this.bidderOrder[this.overlayUtilities.rebidCount],"\n  Placement type '").concat(S,"'."),[d.QA,d.CXO]);this.debugLog("Bid request initiated",[d.SELENIUM]);if(this.logManager.getDebugParamValue(O.FORCE_ADX)!==null){this.debugLog("DEBUGforceADX detected. Skipping bid request and forcing ADX banner creation.",[d.CXO,d.QA]);this.generateADXInsert()}else if(this.logManager.getDebugParamValue(O.FAKE_NATIVE_BID)!==null){this.debugLog("DEBUGfakeNativeBid detected. Skipping bid request and forcing native bid response.",[d.CXO,d.QA]);this.generateNativeInsert()}else if(this.isOSDAvailable){if(this.overlayUtilities.impressionCount<0&&this.overlayUtilities.bidCount>this.overlayUtilities.allowedUnsuccessfulBids){this.debugLog("Will not attempt bid ".concat(this.overlayUtilities.bidCount,". Too many unsuccessful bid attempts (").concat(this.overlayUtilities.allowedUnsuccessfulBids," allowed). Shutting down overlay."),[d.QA,d.CXO]);this.overlayUtilities.shutdownComponent("No successful OSD bid responses after ".concat(this.overlayUtilities.allowedUnsuccessfulBids," bid attempts."))}else{this.generateOSDInsert()}}else if(this.bidderOrder[this.overlayUtilities.rebidCount]===M.ADX){this.debugLog("Attempting ADX ad for bid ".concat(this.overlayUtilities.bidCount,"."),[d.CXO,d.QA]);this.generateADXInsert()}else{if(this.overlayUtilities.rebidCount>0&&!w){this.debugLog("UID NOT FOUND. Will not allow rebid attempts.",[d.QA,d.CXO]);this.attemptRebid(1e3)}else{var _=this.preferredBannerSize;this.debugLog("Banner requested: '".concat(_.insertType,"' - ").concat(_.bannerSize[0],"x").concat(_.bannerSize[1],".[LogType.QA, LogType.CXO]"));var C={isOutbrainBid:false,isRevContentBid:false,groupId:E,videoId:this.activeMediaId,placementTypeId:I,bannerSize:"".concat(_.bannerSize[0],"x").concat(_.bannerSize[1]),nativeSize:null,uid:this.overlayUtilities.foundUID,eidsIdentityHub:(e=this.overlayUtilities.eidsIdentityHub)!==null&&e!==void 0?e:null,eidsIntentIQ:(n=this.overlayUtilities.eidsintentIQ)!==null&&n!==void 0?n:null,gppString:(s=this.overlayUtilities.gppString)!==null&&s!==void 0?s:null,gppSids:(r=this.overlayUtilities.gppSids)!==null&&r!==void 0?r:null,tcString:(o=this.overlayUtilities.tcString)!==null&&o!==void 0?o:null,gdprApplies:this.overlayUtilities.gdprApplies,uspString:(a=this.overlayUtilities.uspString)!==null&&a!==void 0?a:null,sessionId:this.overlayUtilities.analyticsSessionId,bidId:this.overlayUtilities.bidRequestId,mediaId:(h=this.activeMediaId)!==null&&h!==void 0?h:null,logicalVideoId:(l=this.activeLogicalVideoId)!==null&&l!==void 0?l:null,startMilliseconds:Math.round(1e3*((((u=this.videoElement)===null||u===void 0?void 0:u.currentTime)||0)+5)),endMilliseconds:Math.round(1e3*((((f=this.videoElement)===null||f===void 0?void 0:f.currentTime)||0)+20)),marketplaceId:this.marketplaceId,storeId:this.storeId,bundleId:this.bundleId};this.requestedBannerSizes.push(_.bannerSize);var k=(new Date).getTime();C.isOutbrainBid=this.bidderOrder[this.overlayUtilities.rebidCount]===M.OUTBRAIN&&this.overlayUtilities.groupConfig.outbrain?true:false;C.isRevContentBid=!C.isOutbrainBid&&this.bidderOrder[this.overlayUtilities.rebidCount]===M.REV_CONTENT&&this.overlayUtilities.groupConfig.revContentWidgetId!=null?true:false;var N=this.logManager.getDebugParamValue(O.FORCE_REV_CONTENT);if(N!==null&&N==="true"){this.debugLog("DEBUGforceRevContent detected. Forcing Rev Content bid.",[d.CXO,d.QA]);C.isRevContentBid=true}var A=this.logManager.getDebugParamValue(O.FORCE_OUTBRAIN);if(A!==null&&A==="true"){this.debugLog("DEBUGforceOutbrain detected. Forcing Outbrain bid.",[d.CXO,d.QA]);C.isOutbrainBid=true}this.overlayUtilities.updateBidRequestId();var B=C.isRevContentBid?M.REV_CONTENT:C.isOutbrainBid?M.OUTBRAIN:M.ADK;var x={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0};if(!C.isRevContentBid&&!C.isOutbrainBid){x.bannerSizeRequested="".concat(_===null||_===void 0?void 0:_.bannerSize[0],"x").concat(_===null||_===void 0?void 0:_.bannerSize[1])}this.analyticsEventDispatcher.sendBidEvent(F.BID_REQUEST,B,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,x);if(C.isOutbrainBid){C.idx=this.outbrainBidCount;this.outbrainBidCount++;C.outbrainToken=this.outbrainToken}Re(C).then((function(t){i.debugLog(["Full bid response (in ".concat((new Date).getTime()-k,"ms):"),JSON.stringify(t)],[d.CXO]);t.isRevContentBid=C.isRevContentBid;t.isOutbrainBid=C.isOutbrainBid;i.handleResourceResponse(t)}))}}}else if(this.cxWait){this.debugLog("Bid request not initiated because cx-wait attribute has been detected.",[d.QA,d.CXO]);this.cxWaitInitiateBid=true;var U={message:"CXWAIT_TRUE"};var x={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0,debug:U};this.analyticsEventDispatcher.sendBidEvent(F.BID_NO_REQUEST,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,x)}else if(((c=this.overlayUtilities.groupConfig)===null||c===void 0?void 0:c.active)!==true){this.debugLog("Bid request not initiated because zone is not active.",[d.QA,d.CXO]);var U={message:"ZONE_INACTIVE"};var x={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0,debug:U};this.analyticsEventDispatcher.sendBidEvent(F.BID_NO_REQUEST,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,x)}else if(y){this.debugLog("Bid request not initiated because tab is inactive.",[d.QA,d.CXO]);var U={message:"TAB_INACTIVE"};var x={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0,debug:U};this.analyticsEventDispatcher.sendBidEvent(F.BID_NO_REQUEST,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,x)}else if(sh(this.videoElement)||!m){this.debugLog("Bid request not initiated because no existing video player or video player is not on the page.",[d.CXO,d.QA]);var U={message:"NO_VIDEO_PLAYER"};var x={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0,debug:U};this.analyticsEventDispatcher.sendBidEvent(F.BID_NO_REQUEST,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,x)}else if(!v){this.debugLog("Bid request not initiated because video's current time is within a blocked time range or too close to end of video.",[d.CXO,d.QA]);var U={message:"BLOCKED_TIME"};var x={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0,debug:U};this.analyticsEventDispatcher.sendBidEvent(F.BID_NO_REQUEST,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,x)}else if(p){this.debugLog("Bid request not initiated because current URL is defined in the group configuration's blocked URL list.",[d.CXO,d.QA]);var U={message:"BLOCKED_URL"};var x={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0,debug:U};this.analyticsEventDispatcher.sendBidEvent(F.BID_NO_REQUEST,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,x)}else if(g){this.debugLog("iOS detected and video is in native fullscreen - Will not initiate a bid request because no inserts can be displayed.",[d.CXO,d.QA]);var U={message:"IOS_FULLSCREEN"};var x={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0,debug:U};this.analyticsEventDispatcher.sendBidEvent(F.BID_NO_REQUEST,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,x)}else if(b){this.debugLog("mobile fullscreen detected using only video node - Will not initiate a bid request because no inserts can be displayed.",[d.CXO,d.QA]);var U={message:"VIDEO_NODE_FULLSCREEN"};var x={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0,debug:U};this.analyticsEventDispatcher.sendBidEvent(F.BID_NO_REQUEST,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,x)}else if(!sh(this.stowedBidResponse)){this.debugLog("Previously stored bid response is still available to be processed - Will not initiate a new bid request.",[d.CXO,d.QA]);var U={message:"UNPROCESSED_RESOURCE_AVABILE"};var x={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0,debug:U};this.analyticsEventDispatcher.sendBidEvent(F.BID_NO_REQUEST,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,x)}else if(this.overlayUtilities.currentDimensions.width<=10||this.overlayUtilities.currentDimensions.height<=10){this.debugLog("Bid request not initiated because current overlay dimensions are too small to support an insert.",[d.CXO,d.QA]);var U={message:"INVALID_OVERLAY_SIZE"};var x={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0,debug:U};this.analyticsEventDispatcher.sendBidEvent(F.BID_NO_REQUEST,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,x)}else if(!this.forceNextBid&&!(sh(this.activeResourceData)||sh(this.carouselResourceData))){this.debugLog("Bid request not initiated because no insert slots are available for a new resource.",[d.CXO,d.QA]);var U={message:"NO_INSERT_SLOTS_AVAILABLE"};var x={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0,debug:U};this.analyticsEventDispatcher.sendBidEvent(F.BID_NO_REQUEST,M.PLATFORM,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,x)}this.currentVideoStatus.lastBidTime=!sh(this.videoElement)?this.videoElement.currentTime:0;if(this.currentVideoStatus.timerBasedBidding&&!sh(this.overlayUtilities.groupConfig)&&this.cxoActive){this.setNextAutomaticBidTime()}};i.prototype.handleResourceResponse=function(i){var t,e,n,s,o,a,h,l,u,f,c,v,p,m,g;if(!sh(i===null||i===void 0?void 0:i.resources)&&i.resources.length>0){if(!this.cxWait){this.processBidResponse(i)}else{this.stowedBidResponse=i;this.debugLog("cx-wait attribute added during bid request. Will not show response insert.",[d.ERROR,d.CXO,d.QA]);var b=i.resources;var y=i.isRevContentBid?M.REV_CONTENT:i.isOutbrainBid?M.OUTBRAIN:M.ADK;var w={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,bidCpm:(t=b[0])===null||t===void 0?void 0:t.bid,cid:(e=b[0])===null||e===void 0?void 0:e.campaignId,crid:(n=b[0])===null||n===void 0?void 0:n.creativeId,seatId:(s=b[0])===null||s===void 0?void 0:s.seat,adId:(o=b[0])===null||o===void 0?void 0:o.adId,bidId:(a=b[0])===null||a===void 0?void 0:a.bidId,impressionType:(h=b[0])===null||h===void 0?void 0:h.impressionType,componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0};if(!sh((u=(l=b[0])===null||l===void 0?void 0:l.data)===null||u===void 0?void 0:u.w)){w.bannerSize="".concat((c=(f=b[0])===null||f===void 0?void 0:f.data)===null||c===void 0?void 0:c.w,"x").concat((p=(v=b[0])===null||v===void 0?void 0:v.data)===null||p===void 0?void 0:p.h)}this.analyticsEventDispatcher.sendBidResponseEvent(F.BID_RESPONSE,y,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,w);var O={message:"CXWAIT_TRUE"};this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_CREATION_DELAYED,i.isRevContentBid?M.REV_CONTENT:i.isOutbrainBid?M.OUTBRAIN:M.ADK,i.seat,i.campaignId,i.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,null,S.NONE,!sh((g=(m=b===null||b===void 0?void 0:b[0])===null||m===void 0?void 0:m.data)===null||g===void 0?void 0:g.w)?"".concat(b[0].data.w,"x").concat(b[0].data.h):null,this.overlayUtilities.adOpportunityId,this.overlayUtilities.bidRequestId,this.overlayUtilities.containerViewabilityValue,O)}}else{this.debugLog("No results returned in bid request ".concat(this.overlayUtilities.bidCount,"."),[d.CXO,d.QA]);var w={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,bidCpm:0,cid:null,crid:null,seatId:null,adId:null,bidId:null,impressionType:i.isRevContentBid||i.isOutbrainBid?r.NATIVE:r.ANY,componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0};this.analyticsEventDispatcher.sendBidResponseEvent(F.BID_RESPONSE_EMPTY,i.isRevContentBid?M.REV_CONTENT:i.isOutbrainBid?M.OUTBRAIN:M.ADK,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,w);this.attemptRebid(1e3)}};i.prototype.attemptRebid=function(i){this.overlayUtilities.rebidCount++;if(this.requestedBannerSizes.length>this.rebidBannerSizeAllowedDeviation){this.requestedBannerSizes=[]}if(this.overlayUtilities.rebidCount<=this.bidderOrder.length-1){this.debugLog("Attempting rebid ".concat(this.overlayUtilities.rebidCount," of ").concat(this.bidderOrder.length-1,". Making new bid request."),[d.CXO,d.QA]);this.forceNextBid=this.forceNextRebid;this.timers.initiateBidRequestTimer.reset(i)}else{this.overlayUtilities.rebidCount=0}};i.prototype.processBidResponse=function(i){var t=this;var e,n,s,o,a,h,l,u,f,c,v,p,m,g;var b=(e=i===null||i===void 0?void 0:i.resources)!==null&&e!==void 0?e:[];this.inserts=this.inserts.concat(b);var y=this.inserts.length>2?[d.IMPORTANT,d.QA,d.CXO]:[d.CXO];this.debugLog(["Insert array (length = ".concat(this.inserts.length,"):"),this.inserts],y);this.identifyImageryToPreload();var w=b.length>0?" from seatid":"";b.forEach((function(i){return w+=" "+i.seat}));var T=b.length>0?" cid":"";b.forEach((function(i){return T+=" "+i.campaignId}));var I=b.length>0?" crid":"";b.forEach((function(i){return I+=" "+i.creativeId}));this.debugLog("CX bid ".concat(this.overlayUtilities.bidCount," returned ").concat(b.length," resource(s). ").concat(w," ").concat(T," ").concat(I),[d.CXO,d.QA]);this.debugLog("CX bid returned "+b.length,[d.SELENIUM]);if(b.length>0){var S=i.isRevContentBid?M.REV_CONTENT:i.isOutbrainBid?M.OUTBRAIN:M.ADK;var E={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,bidCpm:(n=b[0])===null||n===void 0?void 0:n.bid,cid:(s=b[0])===null||s===void 0?void 0:s.campaignId,crid:(o=b[0])===null||o===void 0?void 0:o.creativeId,seatId:(a=b[0])===null||a===void 0?void 0:a.seat,adId:(h=b[0])===null||h===void 0?void 0:h.adId,bidId:(l=b[0])===null||l===void 0?void 0:l.bidId,impressionType:(u=b[0])===null||u===void 0?void 0:u.impressionType,componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0};if(!sh((c=(f=b[0])===null||f===void 0?void 0:f.data)===null||c===void 0?void 0:c.w)){E.bannerSize="".concat((p=(v=b[0])===null||v===void 0?void 0:v.data)===null||p===void 0?void 0:p.w,"x").concat((g=(m=b[0])===null||m===void 0?void 0:m.data)===null||g===void 0?void 0:g.h)}this.analyticsEventDispatcher.sendBidResponseEvent(F.BID_RESPONSE,S,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,E);if(this.forceNextInsert&&!sh(this.carouselResource)){this.clearCarouselInsert()}b.forEach((function(e){var n;e.uniqueId=t.overlayUtilities.generateUniqueId;e.bidRequestId=t.overlayUtilities.bidRequestId;e.adOpportunityId=t.overlayUtilities.adOpportunityId;e.impressionFired=false;if(i.isRevContentBid){e.data.isRevContentBid=true}if(i.isOutbrainBid){e.data.isOutbrainBid=true;(n=t.outbrainToken)!==null&&n!==void 0?n:t.outbrainToken=e.outbrainToken;e.creativeId="OUTBRAIN";e.campaignId="OUTBRAIN"}t.debugLog(["Full resource at bid response: ",e],[d.CXO,d.QA]);t.debugLog("Insert type:  ".concat(e.impressionType),[d.CXO,d.QA]);var s=t.logManager.getDebugParamValue(O.BANNER_ALLOW_IFRAME_LOAD);if(s!==null){var r=s.indexOf("t")>=0?true:false;e.frameSafe=r;t.debugLog("Forcing frameSafe toggle to "+r,[d.QA,d.CXO])}}));if(sh(this.activeResource)||sh(this.carouselResource)){var D=this.nextAvailableResource;if((D===null||D===void 0?void 0:D.impressionType)===r.VIDEO){this.processVideoResource(D)}else if((D===null||D===void 0?void 0:D.impressionType)===r.NATIVE||(D===null||D===void 0?void 0:D.impressionType)===r.DISPLAY){this.processStandardResource(D)}}}else{this.debugLog("No results returned in bid request ".concat(this.overlayUtilities.bidCount,"."),[d.CXO,d.QA]);var S=i.isADX?M.ADX:i.isRevContentBid?M.REV_CONTENT:i.isOutbrainBid?M.OUTBRAIN:M.ADK;var E={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,bidCpm:0,cid:null,crid:null,seatId:null,adId:null,bidId:null,impressionType:i.isRevContentBid||i.isOutbrainBid?r.NATIVE:r.ANY,componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0};this.analyticsEventDispatcher.sendBidResponseEvent(F.BID_RESPONSE_EMPTY,S,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,E);this.attemptRebid(1e3)}};i.prototype.processVideoResource=function(i){var t=this;Ee(i.data.video.url).then((function(e){var n=(new DOMParser).parseFromString(e,"application/xml");var s=n.querySelector("VASTAdTagURI").innerHTML.replace(/<!\[CDATA\[|]]>/g,"");t.debugLog(["requesting VAST video from URL: ",s],[d.CXO,d.QA]);De(s).then((function(e){var n=(new DOMParser).parseFromString(e,"application/xml");var s=n.querySelector("MediaFile").innerHTML.replace(/<!\[CDATA\[|]]>/g,"");t.debugLog(["Vast video source url:",s],[d.CXO,d.QA]);i.data.video.url=s;i.data.video.trackers={};var r=i.data.video.trackers;var o=n.querySelectorAll('Tracking[event="firstQuartile"]');if(o.length>0){r.firstQuartile=[];o.forEach((function(i){return r.firstQuartile.push(i.innerHTML.replace(/<!\[CDATA\[|]]>/g,""))}))}o=n.querySelectorAll('Tracking[event="midpoint"]');if(o.length>0){r.midpoint=[];o.forEach((function(i){return r.midpoint.push(i.innerHTML.replace(/<!\[CDATA\[|]]>/g,""))}))}o=n.querySelectorAll('Tracking[event="thirdQuartile"]');if(o.length>0){r.thirdQuartile=[];o.forEach((function(i){return r.thirdQuartile.push(i.innerHTML.replace(/<!\[CDATA\[|]]>/g,""))}))}o=n.querySelectorAll('Tracking[event="complete"]');if(o.length>0){r.complete=[];o.forEach((function(i){return r.complete.push(i.innerHTML.replace(/<!\[CDATA\[|]]>/g,""))}))}o=n.querySelectorAll('Tracking[event="mute"]');if(o.length>0){r.mute=[];o.forEach((function(i){return r.mute.push(i.innerHTML.replace(/<!\[CDATA\[|]]>/g,""))}))}o=n.querySelectorAll('Tracking[event="unmute"]');if(o.length>0){r.unmute=[];o.forEach((function(i){return r.unmute.push(i.innerHTML.replace(/<!\[CDATA\[|]]>/g,""))}))}o=n.querySelectorAll('Tracking[event="pause"]');if(o.length>0){r.pause=[];o.forEach((function(i){return r.pause.push(i.innerHTML.replace(/<!\[CDATA\[|]]>/g,""))}))}o=n.querySelectorAll('Tracking[event="resume"]');if(o.length>0){r.resume=[];o.forEach((function(i){return r.resume.push(i.innerHTML.replace(/<!\[CDATA\[|]]>/g,""))}))}o=n.querySelectorAll('Tracking[event="fullscreen"]');if(o.length>0){r.fullscreen=[];o.forEach((function(i){return r.fullscreen.push(i.innerHTML.replace(/<!\[CDATA\[|]]>/g,""))}))}o=n.querySelectorAll('Tracking[event="close"]');if(o.length>0){r.close=[];o.fg,""))}))}t.timers.updateCXOTimer.execute();t.timers.createNewInsertTimer.reset(0,(function(){t.createNewInsert(i)}));t.timers.checkTrackIntegrityTimer.reset(1e3);if(!t.isCarouselStarted){t.activeCarouselData.isCompleted=false}ze(t.inserts,t.isesm)}))}))};i.prototype.processStandardResource=function(i){var t=this;this.timers.updateCXOTimer.execute();this.timers.createNewInsertTimer.reset(0,(function(){t.createNewInsert(i)}));this.timers.checkTrackIntegrityTimer.reset(1e3);if(!this.isCarouselStarted){this.activeCarouselData.isCompleted=false}ze(this.inserts,this.isesm)};i.prototype.createNewInsert=function(i){var t;if(this.insertBeingCleared){this.debugLog("createNewInsert\nWaiting for current active insert to be cleared.",[d.CXO,d.QA]);this.timers.createNewInsertTimer.reset(100)}else if(this.detectCXWaitChanges()){this.debugLog("createNewInsert\ncxWait has been activated. Delaying insert creation.",[d.CXO,d.QA]);this.timers.createNewInsertTimer.reset(100)}else if(sh(this.activeResource)||sh(this.carouselResource)){if(!this.isPreloadImageryComplete){this.debugLog("createNewInsert\nWaiting for image preload to finish before creating insert.",[d.CXO,d.QA]);this.timers.createNewInsertTimer.reset(100)}else if(this.overlayUtilities.currentDimensions.width<=10||this.overlayUtilities.currentDimensions.height<=10){this.debugLog("createNewInsert\nCurrent overlay height OR width is less then 10px. Waiting for size to be available for insert creation.",[d.CXO,d.QA]);this.timers.createNewInsertTimer.reset(50)}else if(!this.overlayUtilities.currentDimensions.elementDimensionsStable){this.debugLog("createNewInsert\nCurrent video size is not stable or is in transition. Waiting for video size to normalize before insert creation.",[d.CXO,d.QA]);this.timers.createNewInsertTimer.reset(100)}else if(this.inserts.indexOf(i)===-1){this.debugLog("createNewInsert\nProvided resource is no longer available in the inserts array. Will not continue insert creation.",[d.CXO,d.QA])}else{this.debugLog("createNewInsert - ".concat(this.overlayUtilities.currentDimensions.width,"x").concat(this.overlayUtilities.currentDimensions.height," --insert = ")+JSON.stringify(i),d.CXO);var e=Boolean(!sh(this.activeResource));var n=this.createInsert(i,e);if(!sh(n)){this.debugLog("createNextInsert:\n --addedResource = ".concat(n.tagName),d.CXO);var s=this.getAvailableInserts(this.overlayUtilities.groupConfig.insertConfirtType}));this.debugLog(["Player mode at insert creation: \n    "+this.playerMode],[d.CXO,d.QA]);this.debugLog(["Expected insert types: ("+this.playerMode+")\n"+s.toString()],[d.CXO,d.QA]);this.debugLog(["Insert created: \n    "+n.tagName.toLowerCase()],[d.CXO,d.QA]);this.overlayElement.appendChild(n);if(this.overlayElement.style.getPropertyValue("opacity")=="0"){this.overlayElement.style.setProperty("opacity","1")}this.debugLog(["Insert created"],d.SELENIUM);this.debugLog(n.tagName.toLowerCase(),[d.SELENIUM]);if(!e){this.activeResourceData=i;this.activeResource=n}else{this.carouselResourceData=i;this.carouselResource=n}this.timers.updateCXOTimer.execute();this.timers.checkForVideoChangeTimer.resetInterval(50,6e3)}}}else{var r={message:"INSERT_NOT_CREATED",reason:"NO_INSERT_SLOTS_AVAILABLE"};var o=this.getOriginSourceFromData(i);this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_NO_IMPRESSION,o,i.seat,i.campaignId,i.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,null,S.NONE,!sh((t=i===null||i===void 0?void 0:i.data)===null||t===void 0?void 0:t.w)?"".concat(i.data.w,"x").concat(i.data.h):null,this.overlayUtilities.adOpportunityId,this.overlayUtilities.bidRequestId,this.overlayUtilities.containerViewabilityValue,r)}};i.prototype.identifyImageryToPreload=function(){var i=this;this.debugLog(["Looking for preload imagery: ",this.inserts],[d.CXO]);if(!sh(this.inserts)){this.inserts.forEach((function(t){var e;var n=!sh((e=t===null||t===void 0?void 0:t.data)===null||e===void 0?void 0:e.assets)&&t.data.assets.length>0?t.data.assets:[];n.forEach((function(t){var e,n,s;if(!sh((e=t===null||t===void 0?void 0:t.img)===null||e===void 0?void 0:e.url)){var r=((n=t===null||t===void 0?void 0:t.img)===null||n===void 0?void 0:n.w)===1200&&((s=t===null||t===void 0?void 0:t.img)===null||s===void 0?void 0:s.h)===627?true:false;i.preloadImage(t.img.url,r)}}))}))}};i.prototype.preloadImage=function(i,t){if(t===void 0){t=false}var e="pre"+i.replace(/[!^\W]/g,"");var n;if(this.overlayElement.getElementsByClassName("preloadHolder").length===0){n=document.createElement("div");n.setAttribute("style","position:absolute; width:1px; height:1px; overflow:hidden; opacity:0; top:0px; left:0px; z-index:-100; pointer-events:none;");n.className="preloadHolder";this.overlayElement.appendChild(n)}else{n=this.overlayElement.getElementsByClassName("preloadHolder")[0]}if(sh(n.querySelector("#"+e))){var s=document.createElement("img");s.src=i;s.id=e;s.className="preloadImage";s.setAttribute("style","position:absolute; display:block; opacity:0; top:0px; left:0px; z-index:-100; pointer-events:none;");if(t){s.setAttribute("crossorigin","anonymous")}n.appendChild(s);this.debugLog(["Preloading image: ",e,i,s],[d.QA,d.CXO])}};i.prototype.generateADXInsert=function(){var i=this;if(this.isADXAvailable){this.debugLog("Creating ADX with parameters pageURL=".concat(this.overlayUtilities.groupConfig.gptAdUnitPageUrl,", unitPath=").concat(this.overlayUtilities.groupConfig.gptAdUnitPath),[d.CXO,d.QA]);this.overlayUtilities.updateBidRequestId();var t={id:this.overlayUtilities.generateUniqueId,uniqueId:this.overlayUtilities.generateUniqueId,demand:null,bid:null,seat:"ADX",bidId:null,campaignId:"ADX",creativeId:"ADX",adId:null,viewabilityTrackers:null,tracker:null,created:null,ref:null,data:null,impressionType:null,win:null,frameSafe:null,bidRequestId:this.overlayUtilities.bidRequestId,adOpportunityId:this.overlayUtilities.adOpportunityId,impressionFired:false};var e=this.preferredBannerSize;this.debugLog("Selected banner at generate ADX  ".concat(e.insertType," with size ").concat(e.adxSize[0],"x").concat(e.adxSize[1]),[d.QA,d.CXO]);var n={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,bannerSizeRequested:"".concat(e.adxSize[0],"x").concat(e.adxSize[1]),nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0};this.analyticsEventDispatcher.sendBidEvent(F.BID_REQUEST,M.ADX,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,n);if(e.adxSize[0]!==0&&e.adxSize[1]!==0){t.data={w:e.adxSize[0],h:e.adxSize[1],isADX:true,adxInsertType:e.insertType,banner:'\n          <script async src="https://securepubads.g.doubleclick.net/tag/js/gpt.js"><\/script>\n          <script>\n            window.googletag = window.googletag || {cmd: []};\n            googletag.cmd.push(function() {\n              googletag.defineSlot("'.concat(this.overlayUtilities.groupConfig.gptAdUnitPath,'", [').concat(e.adxSize[0],", ").concat(e.adxSize[1],'], "div-gpt-ad-1634255699423-0").\n              setForceSafeFrame(true).\n              addService(googletag.pubads());\n              googletag.pubads().enableSingleRequest();\n              googletag.pubads().set("page_url", "').concat(this.overlayUtilities.groupConfig.gptAdUnitPageUrl,"\")\n              googletag.enableServices();\n              googletag.pubads().addEventListener('slotOnload', function(event) {\n                var slotId = event.slot.getSlotElementId();\n                window.parent.postMessage({\n                  target: '").concat(t.id,"',\n                  message: '").concat(P.GPT_LOAD_SUCCESSFUL,"'\n                },'").concat(window.location.protocol+"//"+window.location.host,"');\n              });\n              googletag.pubads().addEventListener('slotResponseReceived', function(event) {\n                var responseInformation = event.slot.getResponseInformation();\n                if(responseInformation == null){\n                  window.parent.postMessage({\n                    target: '").concat(t.id,"',\n                    message: '").concat(P.GPT_LOAD_FAILED,"'\n                  },'").concat(window.location.protocol+"//"+window.location.host,"');\n                }else{\n                  window.parent.postMessage({\n                    target: '").concat(t.id,"',\n                    message: '").concat(P.GPT_RESPONSE_RECEIVED,"'\n                  },'").concat(window.location.protocol+"//"+window.location.host,"');\n                }\n              });\n              googletag.pubads().addEventListener('slotRenderEnded', function(event) {\n                var slotId = event.slot.getSlotElementId();\n                // Record details of the rendered ad.\n                var details = {\n                  'Advertiser ID': event.advertiserId,\n                  'Campaign ID': event.campaignId,\n                  'Creative ID': event.creativeId,\n                  'Is empty?': event.isEmpty,\n                  'Line Item ID': event.lineItemId,\n                  'Size': event.size.join('x'),\n                  'Source Agnostic Creative ID': event.sourceAgnosticCreativeId,\n                  'Source Agnostic Line Item ID': event.sourceAgnosticLineItemId\n                }\n                //console.log('Slot has finished rendering.', slotId, details);\n              });\n            });\n          <\/script>\n          \x3c!-- ").concat(this.overlayUtilities.groupConfig.gptAdUnitPath,"/").concat(e[1],' --\x3e\n          <div id="div-gpt-ad-1634255699423-0" style="min-width: ').concat(e.adxSize[0],"px; min-height: ").concat(e.adxSize[1],'px;">\n              <script>\n              googletag.cmd.push(function() { googletag.display("div-gpt-ad-1634255699423-0"); });\n              <\/script>\n          </div>')};t.impressionType=r.DISPLAY;this.timers.updateCXOTimer.execute();this.timers.checkTrackIntegrityTimer.reset(1e3);this.inserts.push(t);var s=this.nextAvailableResource;if(!sh(s)){this.timers.createNewInsertTimer.reset(0,(function(){i.createNewInsert(i.nextAvailableResource)}))}if(!this.isCarouselStarted){this.activeCarouselData.isCompleted=false}ze(this.inserts,this.isesm)}}};i.prototype.generateOSDInsert=function(){var i=this;var t;if(this.isOSDAvailable){this.overlayUtilities.allowedBannerSizes=this.isMobile?this.overlayUtilities.allowedOnstreamDirectMobileSizes:this.overlayUtilities.allowedOnstreamDirectDesktopSizes;this.rebidBannerSizeAllowedDeviation=1;this.debugLog("Creating OSD supplied insert.",[d.CXO,d.QA]);this.overlayUtilities.updateBidRequestId();var e=!sh(this.activeResource)&&!sh(this.activeResourceData)&&this.activeResourceData.data.isPrebid?this.activeResourceData:null;var n=this.preferredBannerSize;var s=!sh(e)?[e.data.w,e.data.h]:n.bannerSize;if(s[0]!==0&&s[1]!==0&&this.overlayUtilities.osdConfig.availableAdSizes!==null&&this.overlayUtilities.osdConfig.availableAdSizes.fin==s[1]}))===-1){this.debugLog(["generatePrebidInsert - Banner size ".concat(s[0],"x").concat(s[1]," is not a banner size available in prebidConfig.availableAdSizes. Will not create prebid banner slot."),this.overlayUtilities.osdConfig.availableAdSizes],[d.QA,d.IMPORTANT,d.CXO])}else{var o={id:this.overlayUtilities.generateUniqueId,uniqueId:this.overlayUtilities.generateUniqueId,demand:null,bid:null,seat:"OSD",bidId:null,campaignId:"OSD",creativeId:"OSD",adId:null,viewabilityTrackers:null,tracker:null,created:null,ref:null,data:null,impressionType:null,win:null,frameSafe:!!!((t=this.overlayUtilities.osdConfig.slotRefreshParams)===null||t===void 0?void 0:t.allowGAMRefresh),bidRequestId:this.overlayUtilities.bidRequestId,adOpportunityId:this.overlayUtilities.adOpportunityId,impressionFired:false};this.requestedBannerSizes.push(n.bannerSize);this.debugLog("Selected banner at generate prebid  ".concat(n.insertType," with size ").concat(s[0],"x").concat(s[1],". \nAdded size array to requested sizes: ").concat(this.requestedBannerSizes),[d.QA,d.CXO]);var a={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:this.overlayUtilities.adOpportunityId,bidRequestId:this.overlayUtilities.bidRequestId,bannerSizeRequested:"".concat(s[0],"x").concat(s[1]),nativeImageSizeRequested:"DEFAULT",componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0};this.analyticsEventDispatcher.sendBidEvent(F.BID_REQUEST,M.OSD,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,a);if(!this.overlayUtilities.osdConfig.slotRefreshParams.allowGAMRefresh||sh(e)&&s[0]!==0&&s[1]!==0){var h=n.insertType+"-"+o.uniqueId;if(this.forceBannerCustomSqueeze){n.bannerSize[0]=1200;n.bannerSize[1]=627}o.data={w:n.bannerSize[0],h:n.bannerSize[1],isPrebid:true,divId:h,banner:'<div id="'.concat(h,'" style="width: ').concat(n.bannerSize[0],"px; height: ").concat(n.bannerSize[1],'px;"></div>')};o.impressionType=r.DISPLAY;if(this.overlayUtilities.osdConfig.slotRefreshParams.allowGAMRefresh){this.timers.updateCXOTimer.execute();this.timers.checkTrackIntegrityTimer.reset(1e3);this.inserts.push(o);var l=this.nextAvailableResource;if(!sh(l)){this.timers.createNewInsertTimer.reset(0,(function(){i.createNewInsert(i.nextAvailableResource)}))}if(!this.isCarouselStarted){this.activeCarouselData.isCompleted=false}ze(this.inserts,this.isesm)}else{o.requestedInsertType=n.insertType;this.overlayUtilities.osdConfig.eventData={};this.overlayUtilities.initiateNoGAMPrebidAuction(this.overlayUtilities.osdConfig,[s],this.overlayUtilities.osdConfig.eventData,this.generateNoGAMPrebidInsert.bind(this),o)}}else{this.debugLog(["Active resource is an on-stream direct GAM insert - will refresh googletag instead of make new bid request."],[d.CXO,d.QA]);if(this.forceNextRebid){this.resetCarouselData();this.debugLog(["Is carousel? "+this.overlayUtilities.groupConfig.carouselEnabled],[d.CXO]);if(!this.isCarouselStarted&&this.overlayUtilities.groupConfig.carouselEnabled&&!this.activeCarouselData.isCompleted){var u=this.isOSDAvailable?this.overlayUtilities.groupConfig.carouselSpeed:this.overlayUtilities.groupConfig.carouselSpeed-3;this.timers.carouselBidTimer.reset(u*1e3);this.debugLog(["Attempting new carousel bid in ".concat(u," seconds.")],[d.CXO,d.QA])}else if(this.isCarouselStarted){this.activeCarouselData.isClosed=false}}this.overlayUtilities.dispatchOverlayEvent({type:_.OVERLAY_REFRESH_ACTIVE_OSD,forceRefresh:this.forceNextRebid})}}}};i.prototype.generateNoGAMPrebidInsert=function(i,t){var e=this;var n,s,o,a,h,l,u,f;if(!!(i===null||i===void 0?void 0:i.adId)){this.debugLog(["Creating insert from prebid auction without GAM.",i],[d.CXO,d.QA]);t.creativeId=i===null||i===void 0?void 0:i.creativeId;t.adId=i===null||i===void 0?void 0:i.adId;t.data.w=(n=i===null||i===void 0?void 0:i.width)!==null&&n!==void 0?n:t.data.w;t.data.h=(s=i===null||i===void 0?void 0:i.height)!==null&&s!==void 0?s:t.data.h;this.debugLog("Winning banner at generate prebid with size ".concat(t.data.w,"x").concat(t.data.h),[d.QA,d.CXO]);t.impressionType=r.DISPLAY;this.timers.updateCXOTimer.execute();this.timers.checkTrackIntegrityTimer.reset(1e3);this.inserts.push(t);var c=this.nextAvailableResource;if(!sh(c)){this.timers.createNewInsertTimer.reset(0,(function(){e.createNewInsert(e.nextAvailableResource)}))}if(!this.isCarouselStarted){this.activeCarouselData.isCompleted=false}this.debugLog(["Prebid only insert loading."],[d.CXO,d.QA]);ze(this.inserts,this.isesm);this.debugLog(["Prebid only insert loaded. Awaiting render ad."],[d.CXO,d.QA]);this.overlayUtilities.osdConfig.renderPrebidWin=function(t,n){var s=e.overlayUtilities.osdConfig.slotRefreshParams.pbjsObject;s.onEvent("adRenderSucceeded",(function(e){if(e.adId===i.adId){e.doc.body.setAttribute("style","z-index:100; margin:0px; padding:0px; position:absolute; display:block; top:0px; left:0px; width:".concat(t.width,"px; height:").concat(t.height,"px; overflow:hidden;"));window.postMessage({target:n,message:P.LOAD_COMPLETE},window.location.protocol+"//"+window.location.host)}}));s.renderAd(t.contentWindow.document,i.adId)};var v=this.getOriginSourceFromData(t);var p={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:t.adOpportunityId,bidRequestId:t.bidRequestId,bidCpm:0,cid:t.campaignId,crid:t.creativeId,seatId:t.seat,adId:t.adId,bidId:t.bidId,impressionType:r.DISPLAY,componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0,bannerSize:"".concat((o=t===null||t===void 0?void 0:t.data)===null||o===void 0?void 0:o.w,"x").concat((a=t===null||t===void 0?void 0:t.data)===null||a===void 0?void 0:a.h)};if(v===M.OSD){this.overlayUtilities.osdConfig.eventData["isSafeframe"]=false;var m=this.overlayUtilities.cleanOSDResponseData((h=this.overlayUtilities.osdConfig)===null||h===void 0?void 0:h.eventData);p.debug=m}this.analyticsEventDispatcher.sendBidResponseEvent(F.BID_RESPONSE,v,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,p)}else{var g=this.getOriginSourceFromData(t);var p={overlayTime:this.overlayUtilities.elapsedOverlayTime/1e3,activeOverlayTime:this.overlayUtilities.activeOverlayTime/1e3,totalBidsCount:this.overlayUtilities.bidCount,adOpportunityBidCount:this.overlayUtilities.rebidCount+1,adOpportunityId:t.adOpportunityId,bidRequestId:t.bidRequestId,bidCpm:0,cid:t.campaignId,crid:t.creativeId,seatId:t.seat,adId:t.adId,bidId:t.bidId,impressionType:r.DISPLAY,componentDimensions:{width:this.overlayUtilities.currentDimensions.width,height:this.overlayUtilities.currentDimensions.height},containerViewability:this.overlayUtilities.containerViewabilityValue,videoTime:!sh(this.videoElement)?this.videoElement.currentTime:0,bannerSize:"".concat((l=t===null||t===void 0?void 0:t.data)===null||l===void 0?void 0:l.w,"x").concat((u=t===null||t===void 0?void 0:t.data)===null||u===void 0?void 0:u.h)};if(g===M.OSD){this.overlayUtilities.osdConfig.eventData["isSafeframe"]=false;var m=this.overlayUtilities.cleanOSDResponseData((f=this.overlayUtilities.osdConfig)===null||f===void 0?void 0:f.eventData);p.debug=m}this.analyticsEventDispatcher.sendBidResponseEvent(F.BID_RESPONSE_EMPTY,g,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,p)}};i.prototype.generateNativeInsert=function(i,t,e,n,s){var o=this;if(i===void 0){i="Unmatched Power and Design."}if(t===void 0){t="Your Dream Setup Starts Here."}if(e===void 0){e="Learn More"}if(n===void 0){n="https://static-rtb2.catapultx.com/storage/Bu/Mi/Eu/PyZ2dWyAnCxiH8cT3NLh.png"}if(s===void 0){s="https://static-rtb2.catapultx.com/storage/XI/x6/Ei/7o20O4UaPF8HntC7wbI8.jpg"}var a={id:this.overlayUtilities.generateUniqueId,uniqueId:this.overlayUtilities.generateUniqueId,bid:.1,seat:"custom",campaignId:"custom",creativeId:"custom",adId:"custom",bidId:this.overlayUtilities.generateUniqueId,tracker:[],viewabilityTrackers:[],win:"",ref:{groupId:"custom",videoId:"undefined",scheduleId:null,momentId:null},demand:null,created:null,data:{ver:"1.1",assets:[{id:1,title:{text:i!==null&&i!==void 0?i:"Headline Goes Here."}},{id:2,data:{type:0,value:t}},{id:3,data:{type:0,value:e}},{id:4,img:{type:0,url:n,w:328,h:328}},{id:5,img:{type:0,url:s,w:328,h:328}}],link:{url:"https://www.google.com/search?q=catapultx",clicktrackers:null,fallback:null,imptrackers:[],wintracker:""},imptrackers:[],viewabilityTrackers:[]},impressionType:r.NATIVE,frameSafe:true,bidRequestId:"NONE",adOpportunityId:"NONE",impressionFired:false};this.timers.updateCXOTimer.execute();this.timers.checkTrackIntegrityTimer.reset(1e3);if(!sh(this.activeResource)||!sh(this.carouselResource)){this.clearRemainingInserts()}this.inserts.push(a);var h=this.nextAvailableResource;if(!sh(h)){this.timers.createNewInsertTimer.reset(0,(function(){o.createNewInsert(o.nextAvailableResource)}))}if(!this.isCarouselStarted){this.activeCarouselData.isCompleted=false}ze(this.inserts,this.isesm)};i.prototype.generateBannerInsert=function(i,t,e,n){var s=this;if(n===void 0){n=true}var o={id:this.overlayUtilities.generateUniqueId,uniqueId:this.overlayUtilities.generateUniqueId,bid:.1,seat:"custom",campaignId:"custom",creativeId:"custom",adId:"custom",bidId:this.overlayUtilities.generateUniqueId,tracker:[],viewabilityTrackers:[],win:"",ref:{groupId:"custom",videoId:"undefined",scheduleId:null,momentId:null},demand:null,created:null,data:{banner:i,w:t,h:e,link:{url:"https://www.google.com/search?q=catapultx",clicktrackers:null,fallback:null,imptrackers:[],wintracker:""},imptrackers:[],viewabilityTrackers:[]},impressionType:r.DISPLAY,frameSafe:n,impressionFired:false};this.timers.updateCXOTimer.execute();this.timers.checkTrackIntegrityTimer.reset(1e3);if(!sh(this.activeResource)||!sh(this.carouselResource)){this.clearRemainingInserts()}this.inserts.push(o);var a=this.nextAvailableResource;if(!sh(a)){this.timers.createNewInsertTimer.reset(0,(function(){s.createNewInsert(s.nextAvailableResource)}))}if(!this.isCarouselStarted){this.activeCarouselData.isCompleted=false}ze(this.inserts,this.isesm)};i.prototype.clearActiveInsert=function(){var i=this;this.debugLog("clearActiveInsert");if(!sh(this.activeResource)){this.insertBeingCleared=true;var t=this.activeResource;var e=t.getAttribute("uniqueid");this.debugLog("Dispatch event to insert "+e+" notifying activeResource destroy.",[d.QA,d.CXO]);this.overlayUtilities.dispatchOverlayEvent({type:_.OVERLAY_REQUEST_DESTROY,uid:e});ert(t)}),2e3,"Force Remove Insert Timer",this.logManager,d.CXO)}};i.prototype.forceRemoveInsert=function(i){if(i!=null&&i.parentNode){this.debugLog("Force removal of insert: "+i.tagName,[d.QA,d.CXO]);i.parentNode.removeChild(i)}};i.prototype.clearCarouselInsert=function(){var i=this;var t,e,n,s;if(!sh(this.carouselResource)){var r=this.carouselResource.getAttribute("uniqueid");this.inserts=this.inserts.filter((function(t){return t.id!==i.carouselResource.getAttribute("acceptedbidid")}));if((t=this.carouselResource)===null||t===void 0?void 0:t.parentNode){this.carouselResource.parentNode.removeChild(this.carouselResource)}else{this.debugLog(["Carousel resource has no parent node: ",this.carouselResource],d.IMPORTANT)}var o=this.carouselResourceData;var a={message:"DESTROYED_BEFORE_DISPLAY",insertLocation:"CAROUSEL"};this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_NO_IMPRESSION,this.getOriginSourceFromData(o),o.seat,o.campaignId,o.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,r,S.NONE,!sh((e=o===null||o===void 0?void 0:o.data)===null||e===void 0?void 0:e.w)?"".concat((n=o===null||o===void 0?void 0:o.data)===null||n===void 0?void 0:n.w,"x").concat((s=o===null||o===void 0?void 0:o.data)===null||s===void 0?void 0:s.h):null,o.adOpportunityId,o.bidRequestId,this.overlayUtilities.containerViewabilityValue,a);this.carouselResourceData=null;this.carouselResource=null;this.overlayUtilities.dispatchOverlayEvent({type:_.OVERLAY_REQUEST_DESTROY,uid:r})}};i.prototype.clearRemainingInserts=function(){this.debugLog("Clearing remaining inserts",d.QA);this.clearCarouselInsert();this.clearActiveInsert();this.resetCarouselData();this.overlayUtilities.dispatchOverlayEvent({type:_.OVERLAY_DESTROY_REMAINING_INSERTS});this.inserts=[]};i.prototype.insertToClear=function(){var i=this;var t,e,n;var s=this.activeResource;if(!sh(s)){this.debugLog("insertToClear --removingResource = ".concat(s.tagName));this.debugLog(["Insert removed: ",s.tagName],[d.CXO,d.QA]);if(s.parentNode){s.parentNode.removeChild(s)}}if(!this.isInsertReinitializing){this.inserts=this.inserts.filter((function(t){return t.id!==i.activeResource.getAttribute("acceptedbidid")}));if(!this.activeResourceData.impressionFired){var r=this.activeResourceData;var o={message:"DESTROYED_BEFORE_DISPLAY",insertLocation:"ACTIVE"};this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_NO_IMPRESSION,this.getOriginSourceFromData(r),r.seat,r.campaignId,r.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,r.uniqueId,S.NONE,!sh((t=r===null||r===void 0?void 0:r.data)===null||t===void 0?void 0:t.w)?"".concat((e=r===null||r===void 0?void 0:r.data)===null||e===void 0?void 0:e.w,"x").concat((n=r===null||r===void 0?void 0:r.data)===null||n===void 0?void 0:n.h):null,r.adOpportunityId,r.bidRequestId,this.overlayUtilities.containerViewabilityValue,o)}if(!sh(this.carouselResource)){this.activeResourceData=this.carouselResourceData;this.activeResource=this.carouselResource;this.carouselResourceData=null;this.carouselResource=null;this.debugLog(["Carousel turned into active resource: ",this.activeResource],[d.QA,d.CXO])}else{this.activeResource=null;this.timers.checkForVideoChangeTimer.cancel()}this.debugLog(["remaining inserts: ",this.inserts],d.CXO);var a=this.nextAvailableResource;if(!sh(a)){this.timers.createNewInsertTimer.rource)}))}}else{this.activeResource=null;this.isInsertReinitializing=false}this.timers.updateCXOTimer.execute();this.insertBeingCleared=false};i.prototype.getAvailableInserts=function(i){var t=i.allowedInsertsDesktopOnStream;switch(this.playerMode){case I.DESKTOP_FLOATING:t=__spreadArray([],i.allowedInsertsDesktopFloating,true);break;case I.DESKTOP_ONSTREAM:t=__spreadArray([],i.allowedInsertsDesktopOnStream,true);break;case I.DESKTOP_INARTICLE:t=__spreadArray([],i.allowedInsertsDesktopInArticle,true);break;case I.MOBILE_FLOATING:t=__spreadArray([],i.allowedInsertsMobileFloating,true);break;case I.MOBILE_ONSTREAM:t=__spreadArray([],i.allowedInsertsMobileOnStream,true);break;case I.MOBILE_INARTICLE:t=__spreadArray([],i.allowedInsertsMobileInArticle,true);break;default:t=__spreadArray([],i.allowedInsertsDesktopOnStream,true);break}return t};i.prototype.createInsert=function(i,t){if(t===void 0){t=false}var e,n,s,o,a,h,l,u,f,c,v,p,m,g,b,y;var w=(e=this.optimalInsertType)!==null&&e!==void 0?e:this.currentInserts.nativeOverlayFullwidth;var T=this.overlayUtilities.groupConfig.insertConfig;if(!sh(T.allowedInsertsDesktopOnStream)&&T.allowedInsertsDesktopOnStream.length>0){w=T.allowedInsertsDesktopOnStream[0].insertType}(n=i.uniqueId)!==null&&n!==void 0?n:i.uniqueId=this.overlayUtilities.generateUniqueId;this.debugLog(["createInsert --determineOptimalInsertType = ",w]);this.optimalInsertType=w;if(i.impressionType===r.DISPLAY&&i.data.isADX){this.optimalInsertType=i.data.adxInsertType}else{this.selectInsertTypeFromOptions(i)}this.moveCxo();if(this.logManager.getDebugParamValue(O.FORCE_VERTICAL_BANNER_SQUEEZEBACK)!==null){i.data.banner='<img src="https://static-rtb2.catapultx.com/storage/aR/Ab/0n/vhsUmcDnNQsW8Yb495F8.jpg" />';i.data.w=300;i.data.h=600;i.impressionType=r.DISPLAY;this.optimalInsertType=this.currentInserts.displaySqueeze;this.optimalInsertPosition=k.DEFAULT}else if(this.logManager.getDebugParamValue(O.FORCE_HORIZONTAL_BANNER_SQUEEZEBACK)!==null){i.data.banner='<img src="https://static.shareasale.com/image/45519/20FW_Black-Friday_FD_OLA-Banners_728x90.jpg" />';i.data.w=728;i.data.h=90;i.impressionType=r.DISPLAY;this.optimalInsertType=this.currentInserts.displaySqueeze;this.optimalInsertPosition=k.DEFAULT}if(i.impressionType===r.VIDEO){this.optimalInsertType=this.currentInserts.nativeVideoSqueeze}var I=null;var E=this.getAvailableInserts(T);if(!sh(E)){var D;switch(this.optimalInsertType){case this.currentInserts.displayOverlayFullwidth:D=this.currentInserts.nativeOverlayFullwidth;break;case this.currentInserts.displayOverlayCorner:D=this.currentInserts.nativeOverlayCorner;break;case this.currentInserts.displayFlap:D=this.currentInserts.nativeFlap;break;case this.currentInserts.displayWing:D=this.currentInserts.nativeWing;break;case this.currentInserts.displaySqueeze:D=this.currentInserts.nativeSqueeze;break;default:D=this.optimalInsertType;break}this.debugLog("Searching for override configs for "+D,[d.QA,d.CXO]);var R=pe===D}));if(!sh(R)){I=R.overrides}}if(!sh(this.optimalInsertType)&&this.optimalInsertType!==S.NONE){if(I!==null){I.forEach((function(i){i.key=i.key.replace(/[^\w\d-_]/g,"");i.value=i.value.replace(/[^\w\d-_]/g,"")}))}this.debugLog(["Found ".concat(this.optimalInsertType," insert override configs: "),I],[d.QA,d.CXO]);var _=document.createElement(this.optimalInsertType);this.debugLog("createInsert --optimalInsertType = ".concat(this.optimalInsertType));var C=i.data;C.link=sh(C.link)?{}:C.link;C.link.imptrackers=!sh(i.tracker)?i.tracker:!sh(i.data.imptrackers)?i.data.imptrackers:[];C.link.wintracker=!sh(i.win)?i.win:"";C.viewabilityTrackers=!sh(i.viewabilityTrackers)?i.viewabilityTrackers:[];(s=C.eventtrackers)===null||s===void 0?void 0:s.forEach((function(i){if((i.url||null)!==null&&!C.link.imptrackers.includes(i.url))C.link.imptrackers.push(i.url)}));if((o=this.logManager.getDebugParamValue(O.PRIVACY_URL))===null||o===void 0?void 0:o.includes("t")){C.privacy="https://iabtechlab.com/privacy-policy/"}C.destroyInsertOnClose=this.groupId==="xzIP3OHJOU2sxKkO1bLUXw"||this.groupId==="PqlsW4QabjJ7J5GPsfwB"||this.groupId==="9qI3hQnDUEyvHOhqq4LRXw"||this.overlayUtilities.groupConfig.zoneModifications.includes(q.BRAINLY)||this.overlayUtilities.groupConfig.zoneModifications.includes(q.HIDE_UI)||this.overlayUtilities.groupConfig.zoneModifications.includes(q.REMOVE_LOGO)?true:this.overlayUtilities.groupConfig.destroyInsertOnClose;if(this.overlayUtilities.groupConfig.zoneModifications.includes(q.PREVENT_BANNER_UPSCALE)){C.preventBannerEnlarge=true}if(this.overlayUtilities.groupConfig.zoneModifications.includes(q.REMOVE_LOGO)){C.removeLogo=true}if(this.overlayUtilities.groupConfig.zoneModifications.includes(q.HIDE_UI)){C.transparentMode=true}if(this.overlayUtilities.groupConfig.zoneModifications.includes(q.DISABLE_OPEN_ANIMATION)){C.disableOpenAnimation=true}C.akuid=this.overlayUtilities.foundUID;var N=this.isCarouselStarted&&!this.forceNextInsert?this.overlayUtilities.groupConfig.insertDuration-this.timers.carouselBidTimer.getTotalElapsedTime()/1e3:this.overlayUtilities.groupConfig.insertDuration;if(N<this.overlayUtilities.groupConfig.carouselSpeed+2){N=this.overlayUtilities.groupConfig.carouselSpeed+2}if(this.overlayUtilities.groupConfig.zoneModifications.includes(q.ALWAYS_ON)){N*=3}var A={isBranded:(a=this.overlayUtilities.groupConfig.brandBug)!==null&&a!==void 0?a:true,forceLoad:this.forceNextInsert,isSubloaded:t,duration:N,carouselSpeed:((h=this.overlayUtilities.groupConfig)===null||h===void 0?void 0:h.carouselSpeed)||15,isOutbrain:(l=C.isOutbrainBid)!==null&&l!==void 0?l:false,isRevContent:(u=C.isRevContentBid)!==null&&u!==void 0?u:false,isBrainly:this.overlayUtilities.groupConfig.zoneModifications.includes(q.BRAINLY)?true:false,removeCloseButton:this.overlayUtilities.groupConfig.zoneModifications.includes(q.REMOVE_INSERT_CLOSE_BUTTON)?true:false,playerType:this.playerType};C.insertConfigs=A;_.setAttribute("data",JSON.stringify(C));_.setAttribute("overrides",JSON.stringify(I));var B=((f=this.logManager.getDebugParamValue(O.INSERT_OVERRIDE_POSITION))===null||f===void 0?void 0:f.length)===2?this.logManager.getDebugParamValue(O.INSERT_OVERRIDE_POSITION):this.optimalInsertPosition;_.setAttribute("insertposition",B);if(this.optimalInsertType===this.currentInserts.nativeWing){_.setAttribute("allowedheight",String(Math.round(this.overlayUtilities.currentDimensions.height)));var x=A.isOutbrain?21:0;var U=this.optimalInsertPosition.indexOf("l")>=0?Math.floor(this.overlayUtilities.currentDimensions.left)-x:Math.floor(this.overlayUtilities.currentDimensions.right)-x;if(U>this.overlayUtilities.currentDimensions.width*1.5){U=this.overlayUtilities.currentDimensions.width*1.5-x}else if(U<this.overlayUtilities.currentDimensions.width*.25){U=this.overlayUtilities.currentDimensions.width*.25-x}_.setAttribute("allowedwidth",String(U))}_.setAttribute("creationwidth",String(this.overlayUtilities.currentDimensions.width));_.setAttribute("creationheight",String(this.overlayUtilities.currentDimensions.height));_.setAttribute("uniqueid",i.uniqueId);_.setAttribute("acceptedbidid",i.id);if(i.impressionType===r.DISPLAY){_.setAttribute("iframeload",String(typeof i.frameSafe!=="undefined"&&i.frameSafe!=null?i.frameSafe:true));_.setAttribute("adid",String(typeof i.adId!=="undefined"&&i.adId!=null?i.adId:0));_.setAttribute("campaignid",String(typeof i.campaignId!=="undefined"&&i.campaignId!=null?((v=(c=i.campaignId)===null||c===void 0?void 0:c.split)===null||v===void 0?void 0:v.call(c,"|").length)>1?i.campaignId.split("|")[1]:i.campaignId:0));_.setAttribute("creativeid",String(typeof i.creativeId!=="undefined"&&i.creativeId!=null?((m=(p=i.creativeId)===null||p===void 0?void 0:p.split)===null||m===void 0?void 0:m.call(p,"|").length)>1?i.creativeId.split("|")[1]:i.creativeId:0));_.setAttribute("advertiserid",String(typeof i.seat!=="undefined"&&i.seat!=null?i.seat:0))}this.forceNextInsert=false;_["stowedInsertSharedLogic"]=this.insertLogicManager;this.overlayUtilities.currentDimensions.insertPosition=this.optimalInsertPosition;this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_CREATED,this.getOriginSourceFromData(i),i.seat,i.campaignId,i.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,i.uniqueId,_.tagName,!sh(C===null||C===void 0?void 0:C.w)?"".concat(C.w,"x").concat(C.h):null,i.adOpportunityId,i.bidRequestId,this.overlayUtilities.containerViewabilityValue);return _}else{this.debugLog(["No available insert types to display. Will not display resource.",i],[d.QA,d.CXO]);var M={message:"INSERT_NOT_CREATED",reason:"NO_INSERT_TYPES_AVAILABLE"};if(i.impressionType===r.DISPLAY){M.seatid=i===null||i===void 0?void 0:i.seat;M.requestedSize=this.requestedBannerSizes[this.requestedBannerSizes.length-1][0]+"x"+this.requestedBannerSizes[this.requestedBannerSizes.length-1][1]}this.analyticsEventDispatcher.sendInsertEvent(F.INSERT_NO_IMPRESSION,this.getOriginSourceFromData(i),i.seat,i.campaignId,i.creativeId,this.overlayUtilities.currentWindowLocation.href,Boolean(this.overlayUtilities.foundUID!=="NOT_FOUND"),this.playerMode,!sh(this.videoElement)?this.videoElement.currentTime:0,this.overlayUtilities.elapsedOverlayTime,this.overlayUtilities.activeOverlayTime,i.uniqueId,S.NONE,!sh((g=i===null||i===void 0?void 0:i.data)===null||g===void 0?void 0:g.w)?"".concat((b=i===null||i===void 0?void 0:i.data)===null||b===void 0?void 0:b.w,"x").concat((y=i===null||i===void 0?void 0:i.data)===null||y===void 0?void 0:y.h):null,i.adOpportunityId,i.bidRequestId,this.overlayUtilities.containerViewabilityValue,M);var L=this.inserts.indexOf(i);if(L>-1){this.inserts.splice(L,1)}return null}};Object.defineProperty(i.prototype,"currentVideoElementScale",{get:function(){var i=!sh(this.videoElement)&&this.videoElement.hasAttribute("insertvideoscale")&&!Number.isNaN(parseFloat(this.videoElement.getAttribute("insertvideoscale")))?parseFloat(this.videoElement.getAttribute("insertvideoscale")):1;return i},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"preferredBannerSize",{get:function(){var i=this;var t,e,n,s,r,o,a,h;var l={insertType:S.NONE,bannerSize:null,adxSize:null};var u;var f;var c=this.overlayUtilities.determineInsertTypeOptions();if(!sh(this.activeResource)){var v=__spreadArray([],c,true);var p=this.activeResource.tagName.toLowerCase();if(p.indexOf("squeeze")>=0){v=v.filter((function(i){return i.indexOf("squeeze")>=0}))}else if(p.indexOf("wing")>=0){v=v.filter((function(i){return i.indexOf("wing")>=0}))}else if(p.indexOf("flap")>=0){v=v.filter((function(i){return i.indexOf("flap")>=0}))}else if(p.indexOf("overlay")>=0){if(p.indexOf("fullwidth")>=0){v=v.h")>=0}))}else{v=v.filter((function(i){return i.indexOf("overlay")>=0&&i.indexOf("fullwidth")===-1}))}}if(v.length>0){this.debugLog("Finding banner size to request - Active insert is of type ".concat(this.activeResource.tagName.toLowerCase(),". Requesting banner size for ").concat(String(v),"."),[d.QA,d.CXO]);c=v}}this.debugLog("Finding banner size for overlay dimensions ".concat(this.overlayUtilities.currentDimensions.width,"x").concat(this.overlayUtilities.currentDimensions.height,"."),[d.CXO]);if(c.find((function(t){return t===i.currentInserts.nativeSqueeze}))){l.insertType=this.currentInserts.displaySqueeze;u=this.filterBannerSizeList(this.overlayUtilities.allowedBannerSizes.squeezeback);l.bannerSize=(t=u.find((function(t){return t[0]>=i.overlayUtilities.currentDimensions.width})))!==null&&t!==void 0?t:u[u.length-1];f=this.filterBannerSizeList(this.overlayUtilities.allowedADXBannerSizes.squeezeback);var m=f.findIndex((function(t){return t[0]>=i.overlayUtilities.currentDimensions.width}));l.adxSize=m===-1?f[f.length-1]:m>0?f[m-1]:f[0]}else if(c.find((function(i){return i.indexOf("wing")!==-1}))){l.insertType=this.currentInserts.displayWing;var g=0;var b=this.overlayUtilities.currentDimensions.left>this.overlayUtilities.currentDimensions.right?this.overlayUtilities.currentDimensions.left-g:this.overlayUtilities.currentDimensions.right-g;if(b<this.overlayUtilities.currentDimensions.width*2){var y=b/this.overlayUtilities.currentDimensions.height;u=this.filterBannerSizeList(this.overlayUtilities.allowedBannerSizes.wingTall);l.bannerSize=(e=u.find((function(i){return y>i[0]/i[1]})))!==null&&e!==void 0?e:u[u.length-1];f=this.filterBannerSizeList(this.overlayUtilities.allowedADXBannerSizes.wingTall);var m=f.findIndex((function(t){return y>t[0]/t[1]&&i.overlayUtilities.currentDimensions.height>=t[1]}));l.adxSize=m===-1?f[0]:m>0?f[m]:f[0]}else{u=this.filterBannerSizeList(this.overlayUtilities.allowedBannerSizes.wing);l.bannerSize=(n=u.find((function(t){return t[1]>=i.overlayUtilities.currentDimensions.height})))!==null&&n!==void 0?n:u[u.length-1];f=this.filterBannerSizeList(this.overlayUtilities.allowedADXBannerSizes.wing);var m=f.findIndex((function(t){return t[1]>=i.overlayUtilities.currentDimensions.height}));l.adxSize=m===-1?f[f.length-1]:m>0?f[m-1]:f[0]}}else if()!==-1}))){l.insertType=this.currentInserts.displayFlap;u=this.filterBannerSizeList(this.overlayUtilities.allowedBannerSizes.flap);l.bannerSize=(s=u.find((function(t){return t[0]>=i.overlayUtilities.currentDimensions.width})))!==null&&s!==void 0?s:u[u.length-1];f=this.filterBannerSizeList(this.overlayUtilities.allowedADXBannerSizes.flap);var m=f.findIndex((function(t){return t[0]>=i.overlayUtilities.currentDimensions.width}));l.adxSize=m===-1?f[f.length-1]:m>0?f[m-1]:f[0]}else if(lwidth}))){l.insertType=this.currentInserts.displayOverlayFullwidth;u=this.filterBannerSizeList(this.overlayUtilities.allowedBannerSizes.overlayFullwidth);l.bannerSize=(r=u.find((function(t){return t[0]>=i.overlayUtilities.currentDimensions.width})))!==null&&r!==void 0?r:u[u.length-1];f=this.filterBannerSizeList(this.overlayUtilities.allowedADXBannerSizes.overlayFullwidth);var m=f.findIndex((function(t){return t[0]>=i.overlayUtilities.currentDimensions.width}));l.adxSize=m===-1?f[f.length-1]:m>0?f[m-1]:f[0]}else{l.insertType=this.currentInserts.displayOverlayCorner;u=this.filterBannerSizeList(this.overlayUtilities.allowedBannerSizes.overlayCorner);l.bannerSize=(o=u.find((function(t){return t[0]>=i.overlayUtilities.currentDimensions.width*.5})))!==null&&o!==void 0?o:u[0];f=this.filterBannerSizeList(this.overlayUtilities.allowedADXBannerSizes.overlayCorner);var m=f.findIndex((function(t){return t[0]>=i.overlayUtilities.currentDimensions.width*.65}));l.adxSize=m===-1?f[f.length-1]:m>0?f[m-1]:f[0]}(a=l.bannerSize)!==null&&a!==void 0?a:l.bannerSize=[0,0];(h=l.adxSize)!==null&&h!==void 0?h:l.adxSize=[0,0];return l},enumerable:false,configurable:true});i.prototype.filterBannerSizeList=function(i){this.requestedBannerSizes.f==t}))}));return i};i.prototype.getOriginSourceFromData=function(i){var t=M.PLATFORM;if(i!==null&&i.data!==null){if(i.data.isADX){t=M.ADX}else if(i.data.isPrebid){t=M.OSD}else if(i.data.isRevContentBid){t=M.REV_CONTENT}else if(i.data.isOutbrainBid){t=M.OUTBRAIN}else{t=M.ADK}}return t};Object.defineProperty(i.prototype,"videoDimensionsStable",{set:function(i){if(i){if(!this.overlayUtilities.currentDimensions.elementDimensionsStable){this.overlayUtilities.currentDimensions.elementDimensionsStable=true;this.debugLog("Video size has not been recently changed. Video dimensions have become stable.",d.CXO)}}else{if(this.overlayUtilities.currentDimensions.elementDimensionsStable){this.overlayUtilities.currentDimensions.elementDimensionsStable=false;this.debugLog("Video size is currently in change. Video dimensions have become unstable.",d.CXO)}this.timers.setVideoDimensionsAsStableTimer.reset(1e3)}},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"squeezebackResizeLayers",{get:function(){var i=this;var t=[];var e=false;if(!sh(this.playerConfig.squeezebackResizeLayers)){this.playerConfig.squeezebackResizeLayers.forEach((function(n){if(n==="automatic"){i.debugLog("determineSqueezebackResizeLayers --layerToResize = ".concat(n,". Will add in automatically detected resize layers"));e=true}else{i.debugLog("determineSqueezebackResizeLayers --layerToResize = ".concat(n));var s=i.currentVideoStatus.isShadowPlayer?i.findShadowNode(n):i.videoContainerSearchNode.querySelector(n);if(s!=null)t.push(s)}}))}if(e){t.concat(this.autodetectSqueezebackResizeLayers(t))}this.debugLog(["Squeezeback layers detected: ",t],[d.CXO,d.QA]);return t.length>0?t:null},enumerable:false,configurable:true});i.prototype.autodetectSqueezebackResizeLayers=function(i){var t=this;var e,n,s;var r;var o;var a=(e=this.playerConfig.squeezebackExcludeLayers)!==null&&e!==void 0?e:[];var h=function(e){var n;if(!sh(e)){var s=false;var r=false;var o=false;var l=false;i.forEach((function(i){if(!o&&!l){if(i===e){o=true}else if(e.contains(i)){l=true}}}));if(a.length>0&&e.nodeType===1){a.forEach((function(i){if(e.matches(i)){r=true}else if(e.querySelector(i)!==null){s=true}}))}if(o){t.debugLog("Node already included in squeezebackResizeLayers (".concat(t.getElementName(e),"). Will not add to squeezeback resize layers."),[d.CXO,d.QA])}else if(r){t.debugLog("Layer is included in squeezebackExcludeLayers (".concat(a[a.finhes(i)}))],"). Will not include it in squeezeback resize layers."),[d.CXO,d.QA])}else{if(!s&&!l&&e.nodeType===1&&e!==t.videoElement&&e!==t.cxoverlay&&(!t.currentVideoStatus.isShadowPlayer||e!==((n=t.videoElement.getRootNode())===null||n===void 0?void 0:n.host))&&!e.contains(t.videoElement)&&!e.contains(t.cxoverlay)&&t.squeezebackNodeIsVisible(e)){i.push(e)}else if(e.hasChildNodes){e.childNodes.f){h(i)}))}}}};var l=function(i,e){i=String(i);h(e);if(e){if(e.getRootNode()===e){if(e.host.tagName.toLowerCase()!==i.toLowerCase()){return l(i,t.getParent(e))}}else{if(e.tagName.toLowerCase()!==i.toLowerCase()&&!e.matches(i)){return l(i,t.getParent(e))}}}return};r=(n=this.playerConfig.squeezebackRoot)!==null&&n!==void 0?n:this.playerConfig.searchTerm;if(this.currentVideoStatus.isShadowPlayer){l(r,this.videoElement)}else{o=this.findElementFromNode(r,this.videoContainerSearchNode);o=(s=this.getParent(o))!==null&&s!==void 0?s:o;if(sh(o)){this.debugLog(["autodetectSqueezebackResizeLayers -- searchNodeName'".concat(r,"' not found within player. Using videoContainerSearchNode instead.")],[d.CXO]);o=this.videoContainerSearchNode}if(o.contains(this.videoElement)){h(o)}else{this.debugLog("Video is not contained in the squeezeback search node. Will not add additional resize layers.",d.CXO)}}this.debugLog(["Attempted to automatically discover squeezeback resize layers from node ".concat(r,"."),"Start search node: ",o,"Layers detected: ",i],[d.CXO]);return i};i.prototype.squeezebackNodeIsVisible=function(i){if(this.currentVideoStatus.isShadowPlayer&&!i.matches("link, style, track")){return true}var t=false;var e=i.getBoundingClientRect();if(e.width>5&&e.height>5){var n=this.videoElement.getBoundingClientRect();if(e.left>=n.left&&e.left<n.left+n.width){if(e.top>n.top&&e.top<n.top+n.height){t=true}else if(e.top+e.height>n.top&&e.top+e.height<=n.top+n.height){t=true}}else if(e.left+e.width>n.left&&e.left+e.width<=n.left+n.width){if(e.top>n.top&&e.top<n.top+n.height){t=true}else if(e.top+e.height>n.top&&e.top+e.height<=n.top+n.height){t=true}}else if(n.left>e.left&&n.left<e.left+e.width){if(n.top>e.top&&n.top<e.top+e.height){t=true}else if(n.top+n.height>e.top&&n.top+n.height<e.top+e.height){t=true}}else if(n.left+n.width>e.left&&n.left+n.width<e.left+e.width){if(n.top>e.top&&n.top<e.top+e.height){t=true}else if(n.top+n.height>e.top&&n.top+n.height<e.top+e.height){t=true}}}if(!t){this.debugLog("NOT over video element: "+this.getElementName(i)+"...",[d.CXO])}return t};i.prototype.getElementName=function(i){var t=typeof i.id!=="undefined"&&i.id!==null&&i.id.length>0?'id="'.concat(i.id,'"'):typeof i.className!=="undefined"&&i.className!==null&&i.className.length>0?'class="'.concat(i.className,'"'):typeof i.outerHTML!=="undefined"&&i.outerHTML!==null&&i.outerHTML.length>0?i.outerHTML.substring(0,75)+"...":"undefined";return t};Object.defineProperty(i.prototype,"squeezebackHideLayers",{get:function(){var i=this;var t,e;var n=[];if(!sh(this.playerConfig.squeezebackHideLayers)){var s=(t=this.playerConfig.squeezebackRoot)!==null&&t!==void 0?t:this.playerConfig.searchTerm;var r=this.findElementFromNode(s,this.videoContainerSearchNode);r=(e=this.getParent(r))!==null&&e!==void 0?e:r;if(sh(r)){this.debugLog(["squeezebackHideLayers -- searchNodeName'".concat(s,"' not found within player. Using videoContainerSearchNode instead.")],[d.QA,d.CXO]);r=this.videoContainerSearchNode}this.playerConfig.squeezebackHideLayers.forEach((function(t){i.debugLog("squeezebackHideLayers -- layer to hide ".concat(t," found."));var e=i.currentVideoStatus.isShadowPlayer?i.findShadowNode(t):r.querySelector(t);if(e!=null)n.push(e)}));this.debugLog(["squeezebackHideLayers -- layers found: ",n],[d.QA,d.CXO])}return n.length>0?n:null},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"activeInsertIndex",{get:function(){var i=this.inserts.indexOf(this.activeResourceData);this.debugLog(["CURRENT INSERT FOUND AT INSERT INDEX: "+i,this.inserts,this.activeResourceData],[d.CXO]);return i},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"nextAvailableResource",{get:function(){var i=this;var t=this.insertceData}));this.debugLog(["Next resource available in the inserts arary: ",t],[d.CXO]);return t},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"videoContainer",{get:function(){this.debugLog("get videoContainer: ".concat(this.qElementId));var i=document.querySelector(this.qElementId);return i},enumerable:false,configurable:true});i.prototype.getVideoSource=function(i){var t,e;var n=null;if(!sh(i)){n=(t=i.src)!==null&&t!==void 0?t:null;if(n===null||n===""){var s=i.getElementsByTagName("source");for(var r=0;r<s.length;r++){n=(e=s[r].src)!==null&&e!==void 0?e:null;if(n!==null&&n!==""){break}}}}return n};Object.defineProperty(i.prototype,"isVideoAdvertisement",{get:function(){var i=this;var t,e,n;var s=function(t,e,n){if(!!t){i.debugLog(["Current video identified as advertisement on player ".concat(i.playerType," through ").concat(e,": ").concat(n)],i.cxWait?[d.CXO]:[d.QA,d.CXO]);i.debugLog("Video identified as advertisement",[d.SELENIUM])}return!!t};if(this.playerType===T.STN_SHADOW&&this.isVideoOnPage){var r=this.findShadowNode("stn-ima",true);return s(r&&!r.matches("[class*=hide]")&&window.getComputedStyle(r).getPropertyValue("display").toLowerCase()!=="none","node","stn-ima")}if(this.videoAdvertVariables.length>0&&(typeof this.videoElement!=="undefined"&&this.videoElement!==null)){var o=this.videoAdvertVariableent[t]}));if(o)return s(o,"video-variable",o)}var a=!sh((t=this.playerConfig)===null||t===void 0?void 0:t.advertisingRoot)?this.findElementFromNode(this.playerConfig.advertisingRoot,this.videoContainerSearchNode):this.videoContainerSearchNode;var h=(n=(e=this.playerConfig)===null||e===void 0?void 0:e.advertisingIdentifiers)!==null&&n!==void 0?n:[];if(h.length>0){var l=h.find((function(i){var t=a.querySelector(i.nodeSelector);if(!!t){if(sh(i.selectorState)){return true}else{switch(i.selectorState){case"display":return window.getComputedStyle(t).getPropertyValue("display").toLowerCase()!=="none";case"paused":return!t.paused;case"zIndex":return parseFloat(window.getComputedStyle(t).getPropertyValue("z-index"))>0;case"opacity":return parseFloat(window.getComputedStyle(t).getPropertyValue("opacity"))>0;default:return false}}}else{return false}}));if(l)return s(l,"node-list",l.nodeSelector)}return s(false)},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isInsertTimeBlocked",{get:function(){var i=this;var t=false;if(!sh(this.overlayUtilities.groupConfig.neverInsert)&&!sh(this.videoElement)){this.overlayUtilities.groupConfig.neverInsert.forEach((function(e){if(!t&&i.videoElement.currentTime>e.start&&i.videoElement.currentTime<e.end){t=true}}))}return t},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isBidTimeAllowed",{get:function(){var i=this;var t=true;if(!sh(this.videoElement)){if(this.videoElement.currentTime>this.videoElement.duration-15){t=false}if(!sh(this.overlayUtilities.groupConfig.neverInsert)){this.overlayUtilities.groupConfig.neverInsert.forEach((function(e){if(t&&i.videoElement.currentTime<e.end&&i.videoElement.currentTime+i.overlayUtilities.groupConfig.insertDuration>e.start){t=false}}))}}return t},enumerable:false,configurable:true});i.prototype.detectCXWaitChanges=function(){if(this.cxoverlay.getAttribute("cx-wait")===null){if(this.isVideoAdvertisement){if(!this.cxWait){this.cxWait=true;this.timers.detectCXWaitChangesTimer.cancel()}}else{if(this.cxWait&&!sh(this.videoElement)){if(this.overlayUtilities.currentDimensions.width>10&&this.overlayUtilities.currentDimensions.height>10){this.debugLog("setting cxwait = false ".concat(this.overlayUtilities.currentDimensions.width," ").concat(this.overlayUtilities.currentDimensions.height),d.CXO);this.timers.detectCXWaitChangesTimer.cancel();this.cxWait=false}else{this.determineDimensions();this.timers.detectCXWaitChangesTimer.resetInterval(500,6)}}}}return this.cxWait};Object.defineProperty(i.prototype,"isOverflowHidden",{get:function(){var i;var t={hiddenX:false,hiddenY:false};var e=this.bleedoverParentElement;var n=!sh(this.videoElement)?this.videoElement.getBoundingClientRect():null;if(n!==null){var s=20;while(s-- >0&&e!==null){var r=e.getBoundingClientRect();var o=window.getComputedStyle(e).getPropertyValue("overflow").toLowerCase();if(o==="hidden"){if(r.width/n.width<1.25){t.hiddenX=true}if(r.height/n.height<1.2){t.hiddenY=true}break}else if(r.width/n.width>1.1&&r.height/n.height>1.1){break}else if(window.getComputedStyle(e).getPropertyValue("position").toLowerCase()==="fixed"){break}e=(i=this.getParent(e,true))!==null&&i!==void 0?i:null}}if(t.hiddenX||t.hiddenY){this.debugLog(["Overflow hidden detected on parent element. X-Axis hidden: ".concat(t.hiddenX,". Y-Axis hidden: ").concat(t.hiddenY)],[d.QA,d.CXO])}else{this.debugLog(["Overflow hidden NOT detected on parent element.",e],[d.CXO])}return t},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"bleedoverParentElement",{get:function(){var i,t;var e=this.playerConfig.moveCxoBleedover;var n=(i=this.playerConfig.bleedoverAnchorTarget)!==null&&i!==void 0?i:this.anchorTarget;this.debugLog("getBleedoverTarget --targetType = ".concat(e," --anchorTarget = ").concat(n));var s=(t=this.videoContainerSearchNode.querySelector(n))!==null&&t!==void 0?t:this.videoElementContainer;switch(e){case"into":return s;case"after":case"before":return this.getParent(s);case"video":case"after-video":return this.videoElement;default:return this.videoElementContainer}},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"overlayParentElement",{get:function(){var i,t;var e=this.playerConfig.moveCxoStandard;var n=(i=this.playerConfig.anchorTarget)!==null&&i!==void 0?i:this.anchorTarget;this.debugLog("getOverlayTarget --targetType = ".concat(e," --anchorTarget = ").concat(n));var s=(t=this.videoContainerSearchNode.querySelector(n))!==null&&t!==void 0?t:this.videoElementContainer;switch(e){case"into":return s;case"after":case"before":return this.getParent(s);case"video":case"after-video":return this.videoElement;default:return this.videoElementContainer}},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"fullscreenParentElement",{get:function(){var i,t;var e=this.playerConfig.moveCxoFullscreen;var n=(i=this.playerConfig.fullscreenAnchorTarget)!==null&&i!==void 0?i:this.anchorTarget;this.debugLog("getFullscreenTarget --targetType = ".concat(e," --anchorTarget = ").concat(n));var s=n!=="top"?(t=this.videoContainerSearchNode.querySelector(n))!==null&&t!==void 0?t:this.videoElementContainer:this.topAnchorTarget;switch(e){case"into":return s;case"after":case"before":return this.getParent(s);case"video":case"after-video":return this.videoElement;default:return this.videoElementContainer}},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"topAnchorTarget",{get:function(){var i;var t=document.querySelector(this.qElementId);var e=20;while(((i=this.getParent(t))===null||i===void 0?void 0:i.tagName.toLowerCase())!=="body"&&e-- >0){t=this.getParent(t)}return t},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isWideScreenVideoPlayer",{get:function(){if(!sh(this.videoElement)){var i=this.videoElement.getBoundingClientRect();var t=this.overlayUtilities.percentageDifference(16/9,i.width/i.height);return t<14}return false},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isVideoFileWidescreen",{get:function(){var i=true;if(!sh(this.videoElement)){var t=this.overlayUtilities.percentageDifference(16/9,this.videoElement.videoWidth/this.videoElement.videoHeight);this.debugLog("Percent difference from 16/9 ratio: "+t);i=t>14?false:true}return i},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isPortraitVideoPlayer",{get:function(){if(!sh(this.videoElement)){var i=this.videoElement.getBoundingClientRect();var t=this.overlayUtilities.percentageDifference(9/16,i.width/i.height);return t<14}return false},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isVerticalVideo",{get:function(){if(!sh(this.videoElement)){var i=this.videoElement.getBoundingClientRect();if(i.height/i.width>1.2){return true}}return false},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isInArticlePlayer",{get:function(){var i=window.innerHeight;var t=false;if(!sh(this.videoElement)){var e=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop;var n=this.currentVideoElementScale*(parseFloat(this.overlayUtilities.currentDimensions.transform[1])/100);var s=this.videoElement.getBoundingClientRect().bottom-this.videoElement.getBoundingClientRect().height/n*.1;if(window.self!==window.top){this.isIframePlayer=true;try{e=window.top.scrollY;i=window.top.innerHeight;if(!sh(window.frameElement)){s=window.frameElement.getBoundingClientRect().bottom}}catch(i){this.debugLog(["Unable to calculate player distance from top due to iframe.",i],d.CXO)}}var r=s+e;t=r<i?false:true}return t},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isPlayerFloating",{get:function(){var i=false;var t=this.videoElement;var e=15;while(!sh(t)&&e-- >0){if(window.getComputedStyle(t).getPropertyValue("position")==="fixed"){i=true;break}t=this.getParent(t,true)}return i},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isPreloadImageryComplete",{get:function(){var i=true;var t=this.overlayElement.getElementsByClassName("preloadImage");for(var e=0;e<t.length;e++){if(!t[e].complete){i=false;break}}return i},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isFullscreenIOS",{get:function(){return Boolean(this.isMobile&&Boolean(navigator.platform.match(/iPhone|iPod|iPad/))&&Boolean(document.fullscreenElement||document["webkitIsFullScreen"]||document["mozFullScreen"]||document["msFullscreenElement"]||document["webkitCurrentFullScreenElement"]||this.videoElement["webkitDisplayingFullscreen"]))},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isFullscreenVideoNode",{get:function(){var i,t,e;var n=Boolean(this.isMobile&&((e=((t=(i=this.videoContainerSearchNode)===null||i===void 0?void 0:i.getRootNode)===null||t===void 0?void 0:t.call(i)).fullscreenElement)===null||e===void 0?void 0:e.tagName.toLowerCase())==="video");if(n){this.debugLog("FULLSCREEN VIDEO NODE ONLY",[d.CXO,d.QA])}return n},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isBlockedURL",{get:function(){var i=this;var t=false;if(!sh(this.overlayUtilities.groupConfig.blockedUrls)){var e=this.overlayUtilities.currentWindowLocation;this.overlayUtilities.groupConfig.blockedUrls.forEach((function(n){var s=n.endsWith("?");i.debugLog(["Comparing blocked URL: '".concat(n,"' against current page url: '").concat(e.href,"'. ").concat(!s?"URL must be exact match.":"URL does not require exact match.")],[d.CXO,d.QA]);if(s){n=n.substring(0,n.length-1)}var r=n.includes("http")?new URL(n):new URL("https://"+n);if(e.hostname===r.hostname&&(e.pathname===r.pathname||e.pathname===r.pathname+"/"||e.pathname+"/"===r.pathname||s&&e.pathname.includes(r.pathname))){i.debugLog(["Current page (".concat(e.href,") is a blocked url (").concat(r.hostname+r.pathname,") for this group.")],[d.QA,d.CXO]);t=true}}));if(!t){this.debugLog(["Current page (".concat(e.href,") is NOT in the blocked url list for this group.")],[d.QA,d.CXO])}}return t},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"doesWingInsertFit",{get:function(){if(this.overlayUtilities.currentDimensions.left>this.overlayUtilities.currentDimensions.width*.25||this.overlayUtilities.currentDimensions.right>this.overlayUtilities.currentDimensions.width*.25){return true}return false},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"didVideoSourceChange",{get:function(){if(this.videoUrl===this.getVideoSource(this.videoElement)){return false}this.debugLog("Old video source: ".concat(this.videoUrl,". Current video source: ").concat(this.getVideoSource(this.videoElement)));return true},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isADXAvailable",{get:function(){if(!sh(this.overlayUtilities.groupConfig.gptAdUnitPageUrl)&&this.overlayUtilities.groupConfig.gptAdUnitPageUrl.length>0&&!sh(this.overlayUtilities.groupConfig.gptAdUnitPath)&&this.overlayUtilities.groupConfig.gptAdUnitPath.length>0&&!this.isCTV){return true}return false},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isCarouselStarted",{get:function(){return this.activeCarouselData.active=this.activeCarouselData.active||this.timers.carouselBidTimer.getTotalElapsedTime()>0},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isOSDAvailable",{get:function(){var i,t,e,n;if((t=(i=this.overlayUtilities.osdConfig)===null||i===void 0?void 0:i.slotRefreshParams)===null||t===void 0?void 0:t.allowGAMRefresh){return!sh(this.overlayUtilities.osdConfig)}return(n=(e=this.overlayUtilities.osdConfig)===null||e===void 0?void 0:e.isPrebidAvailable)!==null&&n!==void 0?n:false},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"isVideoOnPage",{get:function(){if(sh(this.videoElement)){return false}else if(this.currentVideoStatus.isShadowPlayer){var i=this.videoElement.getRootNode();while(!sh(i)&&!sh(i===null||i===void 0?void 0:i.host)){i=i.host.getRootNode()}if((i===null||i===void 0?void 0:i.nodeName)!=="#document"){return false}}else if(!document.contains(this.videoElement)){return false}return true},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"activeMediaId",{get:function(){return this._activeMediaId},set:function(i){this._activeMediaId=i;this.analyticsEventDispatcher.assignMediaId(i)},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"activeLogicalVideoId",{get:function(){return this._activeLogicalVideooId(i)},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"videoUrdeoUrl},set:function(i){if(i!==this._videoUrl){this._videoUrl=i;this._videoUrlId=this.overlayUtilities.generateUniqueId;var t=this.videoUrlSourceMapping;this.analyticsEventDispatcher.assignVideoUrl(t,this._videoUrlId)}},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"videoUrlSourceMapping",{get:function(){var i=this._videoUrl;if(this.playerType===T.DAILYMOTION){var t=window.self;var e=t.document.querySelectorAll("link[rel=canonical]");var n=e.item(e.length-1);i=!sh(n)&&!!n.getAttribute("href")?n.getAttribute("href"):i}return i},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"availableTopWindow",{get:function(){var i=window;if(window.self!==window.top){try{if(window.top.location.href!==null){i=window.top}}catch(i){this.debugLog(["Unable to access window.top. Serving from inside an unsafe iframe.",i],[d.QA,d.IMPORTANT])}}return i},enumerable:false,configurable:true});Object.defineProperty(i.prototype,"cxInjectorWindowDebug",{get:function(){var i;return(i=window["cxInjectorWindowDebug"])!==null&&i!==void 0?i:null},enumerable:false,configurable:true});i.prototype.render=function(){var i=this;return e("div",{id:"overlaySizer",ref:function(t){return i.overlaySizerElement=t}},e("div",{ref:function(t){return i.containerElement=t}},e("div",{id:"timment=t}})))};Object.defineProperty(i.prototype,"cxoverla(this)},enumerable:false,configurable:true});Object.defineProperty(i,"watchergle"]}},enumerable:false,configurable:true});return i}());lh.style=rh}}}));
//# sourceMappingURL=p-1743c5f1.system.entry.js.map