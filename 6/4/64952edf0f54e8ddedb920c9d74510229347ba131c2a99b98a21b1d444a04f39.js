"object"!=typeof JSON&&(JSON={}),function(){"use strict";var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;unction"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;unction str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];switch(value&&"object"==typeof value&&"function"==typeof value.toJSON&&(value=value.toJSON(key)),"function"==typeof rep&&(value=rep.call(holder,key,value)),typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value)return"null";if(gap+=indent,partial=[],"[object Array]"===Object.prototype.toString.apply(value)){for(length=value.length,i=0;i<length;i+=1)partial[i]=str(i,value)||"null";return v=0===partial.length?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]",gap=mind,v}if(rep&&"object"==typeof rep)for(length=rep.length,i=0;i<length;i+=1)"string"==typeof rep[i]&&(k=rep[i],(v=str(k,value))&&partial.push(quote(k)+(gap?": ":":")+v));else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value))&&partial.push(quote(k)+(gap?": ":":")+v);return v=0===partial.length?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}",gap=mind,v}}"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=,"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;f(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(global){var Settings,error;Settings={flavor:"Skroutz",redirectTo:iframe_message:"get_analytics_session",single_beacon:!1,xdomain_session_timeout:5e3,auto_pageview_timeout:1e3,send_auto_pageview:!0,params:{analytics_session:"analytics_session",signature:"sig",url:"url",referrer:"referer",shop_code:"shop_code",metadata:"metadata",actions:"actions",cookie_policy:"cp",cookie_type:"ct"},cookies:{version:1,basic:{analytics:{name:"__b_sa_session",duration:1800},session:{name:"__b_skr_nltcs_ss",duration:1296e3},meta:{name:"__b_skr_nltcs_mt"}},full:{analytics:{name:"__sa_session",duration:1800},session:{name:"__skr_nltcs_ss",duration:1296e3},meta:{name:"__skr_nltcs_mt"}}},url:{base:"https://skroutza.skroutz.gr",application_base:"https://www.skroutz.gr",analytics_session:{create:function(shop_code,flavor,session,cookie_policy,metadata){return"https://skroutza.skroutz.gr/track/create?shop_code="+shop_code+"&flavor="+flavor+"&session="+session+"&cp="+cookie_policy+"&metadata="+metadata},connect:function(shop_code){return"https://skroutza.skroutz.gr/track/connect?shop_code="+shop_code}},beacon:,api:{settings:{key:"settings",set_account:"setAccount",set_callback:"setCallback",redirect_to:"redirectTo"},yogurt:{key:"yogurt",product_click:"productClick"},site:{key:"site",send_pageview:"sendPageView"},ecommerce:{key:"ecommerce",add_item:"addItem",add_transaction:"addTransaction"}}};try{Settings.window=global}catch(error){Settings.window=this}Settings.command_queue_name=Settings.window.SkroutzAnalyticsObject||"sa",Settings.window[Settings.command_queue_name]=Settings.window[Settings.command_queue_name]||function(){(Settings.window[Settings.command_queue_name].q=Settings.window[Settings.command_queue_name].q||[]).push(arguments)},Settings.window[Settings.command_queue_name].q=Settings.window[Settings.command_queue_name].q||[],Settings.commands_queue=Settings.window[Settings.command_queue_name].q,Settings.url.current=Settings.window.location.href,Settings.url.referrer=Settings.window.document.referrer,Settings.url.hostname=Settings.window.location.hostname,Settings.custom_tlds=["skroutzstore.gr"];var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},slice=[].slice,Promise,UID;UID=1,Promise=function(){Promise._all=function(promises,fail_fast){var bound_fail,bound_success,done_count,fail,fail_count,i,index,len,promise,promise_all,reject_results,rejected,results,success;if(promise_all=new Promise,rejected=!1,results=[],reject_results=[],done_count=promises.length,fail_count=0,0===done_count)return promise_all.resolve(!0),promise_all;for(success=function(index,result){if(results[index]=result,0==--done_count)return promise_all.resolve(results)},fail=function(index,result){if(!rejected)return reject_results[index]=result,fail_fast?(promise_all.reject(result),void(rejected=!0)):++fail_count===promises.length?promise_all.reject(reject_results):success(index,void 0)},index=i=0,len=promises.length;i<len;index=++i)promise=promises[index],bound_success=function(index){return function(){var args;return args=1<=arguments.length?slice.call(arguments,0):[],args.unshift(index),success.apply(null,args)}}(index),bound_fail=function(index){return function(){var args;return args=1<=arguments.length?slice.call(arguments,0):[],args.unshift(index),fail.apply(null,args)}}(index),promise.then(bound_success,bound_fail);return promise_all},Promise.all=function(promises){return Promise._all(promises,!0)},Promise.any=function Promise(){this.reject=bind(this.reject,this),this.resolve=bind(this.resolve,this),this._id=UID++,this.state="pending",this._thens=[]}return Promise.prototype.then=Promise.prototype.resolve=function(val){return this._complete("resolve",val),this},Promise.prototype.reject=Promise.prototype._already=Promise.prototype._complete=function(which,arg){var fulfilment,i,len,ref,rejecter,resolver;for(resolver=function(_this){return function(res,rej){return res&&res(arg),_this}}(this),rejecter=function(_this){return function(res,rej){return rej&&rej(arg),_this}}(this),"resolve"===which?(this.state="fulfilled",this.then=resolver):(this.state="rejected",this.then=rejecter),this.resolve=this.reject=this._already,ref=this._thens,i=0,len=ref.length;i<len;i++)fulfilment=ref[i],"function"==typeof fulfilment[which]&&fulfilment[which](arg);return delete this._thens},Promise}();var slice=[].slice,Runnable;Runnable=function(){function Runnable(){}return Runnable.run=function(){var _,args,category,cmd,queue,ref,ref1,type;if(!(queue=Settings.window[Settings.command_queue_name].q))return this;ref=queue.slice();for(_ in ref)cmd=ref[_],category=cmd[0],type=cmd[1],args=3<=cmd.length?slice.call(cmd,2):[],null!=(null!=(ref1=this._commands[category])?ref1[type]:void 0)&&(this._commands[category][type].apply(this,args),queue.splice(queue.indexOf(cmd),1));return this},Runnable}();var Biskoto;Biskoto=function(){var decode,encode;function Biskoto(){}return encode=encodeURIComponent,decode=decodeURIComponent,Biskoto.get=function(name){var cookie,cookies,err,error,i,len,value;if(document.cookie)for(cookies=document.cookie.split(/;\s/g),i=0,len=cookies.length;i<len;i++)if(cookie=cookies[i],0===cookie.indexOf(name)){value=decode(cookie.split("=")[1]);try{return JSON.parse(value)}catch(error){return err=error,value}}return null},Biskoto.set=function(name,value,options){return null==options&&(options={}),document.cookie=name+"="+encode(JSON.stringify(value))+this._cookieOptions(options)},Biskoto.expire=function(name,options){return null==options&&(options={}),options.expires=-1,this.set(name,"",options)},Biskoto._cookieOptions=function(options){var cookie_str,key,value;null==options&&(options={}),cookie_str="";for(key in options)value=options[key],"expires"===key?cookie_str+="; expires="+this._createExpireDate(options.expires):"domain"===key&&(cookie_str+="; domain="+value);return cookie_str+="; path="+(options.path?options.path:"/")},Biskoto._createExpireDate=function(seconds){return new Date(+new Date+1e3*seconds).toUTCString()},Biskoto}();var easyXDM;!function(window,document,location,setTimeout,decodeURIComponent,encodeURIComponent){var global=this,channelId=Math.floor(1e4*Math.random()),emptyFn=Function.prototype,reURI=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,reParent=/[\-\w]+\/\.\.\//,reDoubleSlash=/([^:])\/\//g,namespace="",easyXDM={},_easyXDM=window.easyXDM,IFRAME_PREFIX="easyXDM_",HAS_NAME_PROPERTY_BUG,useHash=!1,flashVersion,HAS_FLASH_THROTTLED_BUG;ction hasFlash(){var name="Shockwave Flash",mimeType="application/x-shockwave-flash";if(!undef(navigator.plugins)&&"object"==typeof navigator.plugins[name]){var description=navigator.plugins[name].description;description&&!undef(navigator.mimeTypes)&&navigator.mimeTypes[mimeType]&&navigator.mimeTypes[mimeType].enabledPlugin&&(flashVersion=description.match(/\d+/g))}if(!flashVersion){var flash;try{flash=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),flashVersion=Array.prototype.slice.call(flash.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),flash=null}catch(notSupportedException){}}if(!flashVersion)return!1;var major=parseInt(flashVersion[0],10),minor=parseInt(flashVersion[1],10);return HAS_FLASH_THROTTLED_BUG=major>9&&minor>0,!0}var on,un;if(isHostMethod(window,"addEventListener"))on=function(target,type,listener){target.addEventListener(type,listener,!1)},un=else{if(!isHostMethod(window,"attachEvent"))throw new Error("Browser not supported");on=function(object,sEvent,fpNotify){object.attachEvent("on"+sEvent,fpNotify)},un=var domIsReady=!1,domReadyQueue=[],readyState;"readyState"in document?(readyState=document.readyState,domIsReady="complete"==readyState||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==readyState||"interactive"==readyState)):domIsReady=!!document.body;f(!domIsReady){if(isHostMethod(window,"addEventListener"))on(document,"DOMContentLoaded",dom_onReady);else if(on(document,"readystatechange",,document.documentElement.doScroll&&window===top){var doScrollCheck=doScrollCheck()}on(window,"load",dom_onReady)}on resolveUrl(url){if(url=url.replace(reDoubleSlash,"$1/"),!url.match(/^(http||https):\/\//)){var path="/"===url.substring(0,1)?"":location.pathname;"/"!==path.substring(path.length-1)&&(path=path.substring(0,path.lastIndexOf("/")+1)),url=location.protocol+"//"+location.host+path+url}while(reParent.test(url))url=url.replace(reParent,"");return url}ar query=/xdm_e=/.test(location.search)?location.search:location.hash);ar getJSON=function apply(destination,source,noOverwrite){var member;for(var prop in source)source.hasOwnProperty(prop)&&(prop in destination?(member=source[prop],"object"==typeof member?apply(destination[prop],member,noOverwrite):noOverwrite||(destination[prop]=source[prop])):destination[prop]=source[prop]);return destination}unction createFrame(config){undef(HAS_NAME_PROPERTY_BUG)&&testForNamePropertyBug();var frame;HAS_NAME_PROPERTY_BUG?frame=document.createElement('<iframe name="'+config.props.name+'"/>'):(frame=document.createElement("IFRAME"),frame.name=config.props.name),frame.id=frame.name=config.props.name,delete config.props.name,"string"==typeof config.container&&(config.container=document.getElementById(config.container)),config.container||(apply(frame.style,{position:"absolute",top:"-2000px",left:"0px"}),config.container=document.body);var src=config.props.src;if(config.props.src="javascript:false",apply(frame,config.props),frame.border=frame.frameBorder=0,frame.allowTransparency=!0,config.container.appendChild(frame),config.onLoad&&on(frame,"load",config.onLoad),config.usePost){var form=config.container.appendChild(document.createElement("form")),input;if(form.target=frame.name,form.action=src,form.method="POST","object"==typeof config.usePost)for(var i in config.usePost)config.usePost.hasOwnProperty(i)&&(HAS_NAME_PROPERTY_BUG?input=document.createElement('<input name="'+i+'"/>'):(input=document.createElement("INPUT"),input.name=i),input.value=config.usePost[i],form.appendChild(input));form.submit(),form.parentNode.removeChild(form)}else frame.src=src;return config.props.src=src,frame}function checkAcl(acl,domain){"string"==typeof acl&&(acl=[acl]);var re,i=acl.length;while(i--)if(re=acl[i],re=new RegExp("^"==re.substr(0,1)?re:"^"+re.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),re.test(domain))return!0;return!1}function prepareTransportStack(config){var protocol=config.protocol,stackEls;if(config.isHost=config.isHost||undef(query.xdm_p),useHash=config.hash||!1,config.props||(config.props={}),config.isHost)config.remote=resolveUrl(config.remote),config.channel=config.channel||"default"+channelId++,config.secret=Math.random().toString(16).substring(2),undef(protocol)&&(protocol=getLocation(location.href)==getLocation(config.remote)?"4":isHostMethod(window,"postMessage")||isHostMethod(document,"postMessage")?"1":config.swf&&isHostMethod(window,"ActiveXObject")&&hasFlash()?"6":"Gecko"===navigator.product&&"frameElement"in window&&-1==navigator.userAgent.indexOf("WebKit")?"5":config.remoteHelper?"2":"0");else if(config.channel=query.xdm_c.replace(/["'<>\\]/g,""),config.secret=query.xdm_s,config.remote=query.xdm_e.replace(/["'<>\\]/g,""),protocol=query.xdm_p,config.acl&&!checkAcl(config.acl,config.remote))throw new Error("Access denied for "+config.remote);switch(config.protocol=protocol,protocol){case"0":if(apply(config,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),config.isHost){if(!config.local){var domain=location.protocol+"//"+location.host,images=document.body.getElementsByTagName("img"),image,i=images.length;while(i--)if(image=images[i],image.src.substring(0,domain.length)===domain){config.local=image.src;break}config.local||(config.local=window)}var parameters={xdm_c:config.channel,xdm_p:0};config.local===window?(config.usePolling=!0,config.useParent=!0,config.local=location.protocol+"//"+location.host+location.pathname+location.search,parameters.xdm_e=config.local,parameters.xdm_pa=1):parameters.xdm_e=resolveUrl(config.local),config.container&&(config.useResize=!1,parameters.xdm_po=1),config.remote=appendQueryParameters(config.remote,parameters)}else apply(config,{channel:query.xdm_c,remote:query.xdm_e,useParent:!undef(query.xdm_pa),usePolling:!undef(query.xdm_po),useResize:!config.useParent&&config.useResize});stackEls=[new easyXDM.stack.HashTransport(config),new easyXDM.stack.ReliableBehavior({}),new easyXDM.stack.QueueBehavior({encode:!0,maxLength:4e3-config.remote.length}),new easyXDM.stack.VerifyBehavior({initiate:config.isHost})];break;case"1":stackEls=[new easyXDM.stack.PostMessageTransport(config)];break;case"2":config.isHost&&(config.remoteHelper=resolveUrl(config.remoteHelper)),stackEls=[new easyXDM.stack.NameTransport(config),new easyXDM.stack.QueueBehavior,new easyXDM.stack.VerifyBehavior({initiate:config.isHost})];break;case"3":stackEls=[new easyXDM.stack.NixTransport(config)];break;case"4":stackEls=[new easyXDM.stack.SameOriginTransport(config)];break;case"5":stackEls=[new easyXDM.stack.FrameElementTransport(config)];break;case"6":flashVersion||hasFlash(),stackEls=[new easyXDM.stack.FlashTransport(config)]}return stackEls.push(new easyXDM.stack.QueueBehavior({lazy:config.lazy,remove:!0})),stackEls}ply(easyXDM,{version:"2.4.19.0",query:query,stack:{},apply:apply,getJSONObject:getJSON,whenReady:whenReady,noConflict:noConflict}),easyXDM.DomHelper={on:on,un:un,requiresJSON:,),easyXDM.Socket=easyXDM.Rpc=easyXDM.stack.SameOriginTransport=easyXDM.stack.FlashTransport=function(config){var pub,frame,send,targetOrigin,swf,swfContainer;turn pub={outgoing:destroy:onDOMReady:init:function(){whenReady(pub.onDOMReady,pub)}}},easyXDM.stack.PostMessageTransport=function(config){var pub,frame,callerWindow,targetOrigin;unction _window_onMessage(event){var origin=_getOrigin(event);origin==targetOrigin&&event.data.substring(0,config.channel.length+1)==config.channel+" "&&pub.up.incoming(event.data.substring(config.channel.length+1),origin)}return pub={outgoing:destroy:onDOMReady:function(){if(targetOrigin=getLocation(config.remote),config.isHost){var waitForReady=on(window,"message",waitForReady),apply(config.props,{src:appendQueryParameters(config.remote,{xdm_e:getLocation(location.href),xdm_c:config.channel,xdm_p:1}),name:IFRAME_PREFIX+config.channel+"_provider"}),frame=createFrame(config)}else on(window,"message",_window_onMessage),callerWindow="postMessage"in window.parent?window.parent:window.parent.document,callerWindow.postMessage(config.channel+"-ready",targetOrigin),setTimeout(function(){pub.up.callback(!0)},0)},init:function(){whenReady(pub.onDOMReady,pub)}}},easyXDM.stack.FrameElementTransport=easyXDM.stack.NameTransport=easyXDM.stack.HashTransport=function(config){var pub,me=this,isHost,_timer,pollInterval,_lastMsg,_msgNr,_listenerWindow,_callerWindow,useParent,_remoteOrigin;rn pub={outgoing:destroy:onDOMReady:init:},easyXDM.stack.ReliableBehavior=easyXDM.stack.QueueBehavior=function(config){var pub,queue=[],waiting=!0,incoming="",destroying,maxLength=0,lazy=!1,doFragment=!1;eturn pub={init:callback:incoming:outgoing:function(message,origin,fn){config.encode&&(message=encodeURIComponent(message));var fragments=[],fragment;if(doFragment){while(0!==message.length)fragment=message.substring(0,maxLength),message=message.substring(fragment.length),fragments.push(fragment);while(fragment=fragments.shift())queue.push({data:fragments.length+"_"+fragment,origin:origin,callback:0===fragments.length?fn:null})}else queue.push({data:message,origin:origin,callback:fn});lazy?pub.down.init():dispatch()},destroy:},easyXDM.stack.VerifyBehavior=function(config){var pub,mySecret,theirSecret,verified=!1;eturn pub={incoming:outgoing:callback:},easyXDM.stack.RpcBehavior=function(proxy,config){var pub,serializer=config.serializer||getJSON(),_callbackCounter=0,_callbacks={};unction _createMethod(definition,method){var slice=Array.prototype.slice;return function(){var l=arguments.length,callback,message={method:method};l>0&&"function"==typeof arguments[l-1]?(l>1&&"function"==typeof arguments[l-2]?(callback={success:arguments[l-2],error:arguments[l-1]},message.params=slice.call(arguments,0,l-2)):(callback={success:arguments[l-1]},message.params=slice.call(arguments,0,l-1)),_callbacks[""+ ++_callbackCounter]=callback,message.id=_callbackCounter):message.params=slice.call(arguments,0),definition.namedParams&&1===message.params.length&&(message.params=message.params[0]),_send(message)}}function _executeMethod(method,id,fn,params){if(!fn)return void(id&&_send({id:id,error:{code:-32601,message:"Procedure not found."}}));var success,error;id?(success=error=:success=error=emptyFn,isArray(params)||(params=[params]);try{var result=fn.method.apply(fn.scope,params.concat([success,error]));undef(result)||success(result)}catch(ex1){error(ex1.message)}}return pub={incoming:init:destroy:},global.easyXDM=easyXDM}(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent),easyXDM=window.easyXDM.noConflict();var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},XDomainEngine;XDomainEngine=function(){function XDomainEngine(type,shop_code,flavor,session,cookie_policy,metadata){null==shop_code&&(shop_code=""),null==flavor&&(flavor=""),null==session&&(session=""),null==cookie_policy&&(cookie_policy=""),null==metadata&&(metadata=""),this._onSocketMessage=bind(this._onSocketMessage,this),this._onSocketReady=bind(this._onSocketReady,this),this.promise=new Promise,this.url=Settings.url.analytics_session[type](shop_code,flavor,session,cookie_policy,metadata),this.socket=this._createSocket(this.url),this.timeout=this._checkForSocketTimeout()}return XDomainEngine.prototype.then=function(success,fail){return this.promise.then(success,fail)},XDomainEngine.prototype._timeout_message="XDomain retrieval of analytics_session timed out",XDomainEngine.prototype._nonexistant_message="Analytics_session does not exist",XDomainEngine.prototype._checkForSocketTimeout=function(){return setTimeout(this),Settings.xdomain_session_timeout)},XDomainEngine.prototype._onSocketReady=XDomainEngine.prototype._onSocketMessage=function(analytics_session,origin){if(origin===Settings.url.base&&"pending"===this.promise.state)return this.timeout&&clearTimeout(this.timeout),""===analytics_session?this.promise.reject(this._nonexistant_message):this.promise.resolve(analytics_session)},XDomainEngine.prototype._createSocket=function(url){return new easyXDM.Socket({remote:url,onMessage:this._onSocketMessage,onReady:this._onSocketReady})},XDomainEngine}();var URLHelper;URLHelper={appendData:function(url,payload){var hash,hash_index,main_url,ref,sign;return hash_index=url.indexOf("#"),ref=-1!==hash_index?[url.substring(0,hash_index),url.substring(hash_index)]:[url,""],main_url=ref[0],hash=ref[1],sign=-1!==main_url.indexOf("?")?"&":"?",""+main_url+sign+payload+hash},replaceParam:function(url,name,new_value){var regex;return regex=new RegExp("(.*[?&;]("+encodeURIComponent(name)+"|"+name+")=)([^&;]+)(.*)"),url.replace(regex,"$1"+encodeURIComponent(new_value)+"$4")},serialize:function(object){var key,query_string,value;if(!object||"object"!=typeof object)return!1;query_string="";for(key in object)value=object[key],"string"!=typeof value&&(value=JSON.stringify(value)),query_string+=encodeURIComponent(key)+"="+encodeURIComponent(value)+"&";return query_string.slice(0,-1)},extractGetParam:function(name,url){var extracted;return extracted=URLHelper.getParamsFromUrl(url),extracted[name]||null},getParamsFromUrl:function(url){var match,params,regex;null==url&&(url=Settings.url.current),url=url.split("#")[0],regex=/[?&;](.*?)=([^&;]*)/g,params={};while(match=regex.exec(url))params[decodeURIComponent(match[1])]=decodeURIComponent(match[2]);return params}};var b64chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64tab=b64chars),fromCharCode=String.fromCharCode,cb_utob=re_utob=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,utob=function(u){return u.replace(re_utob,cb_utob)},cb_encode=btoa=function(b){return b.replace(/[\s\S]{1,3}/g,cb_encode)},_encode=function(u){return btoa(utob(u))},encode=encodeURI=re_btou=new RegExp(["[\xc0-\xdf][\x80-\xbf]","[\xe0-\xef][\x80-\xbf]{2}","[\xf0-\xf7][\x80-\xbf]{3}"].join("|"),"g"),cb_btou=btou=cb_decode=_atob=_decode=decode=Base64={encode:encode,encodeURI:encodeURI,decode:decode},AnalyticsUrl;AnalyticsUrl=function(){var TTL,URL_PARAM_NAME;URL_PARAM_NAME="skr_prm",TTL=6e4;eturn AnalyticsUrl.prototype.format_params=function(mode,session,metadata){var link,new_link,param_hash,params;switch(null==metadata&&(metadata={}),params=[session,this._expiration(),metadata],param_hash=Base64.encodeURI(JSON.stringify(params)),mode.type){case"no_append":return this.url;case"append_to_param_link_url":return link=URLHelper.extractGetParam(mode.param,this.url),new_link=URLHelper.appendData(link,URL_PARAM_NAME+"="+param_hash),URLHelper.replaceParam(this.url,mode.param,new_link);default:return URLHelper.appendData(this.url,URL_PARAM_NAME+"="+param_hash)}},AnalyticsUrl.prototype.read_params=function(){var err,error,expiration,metadata,params,session,url_param;url_param=Base64.decode(URLHelper.extractGetParam(URL_PARAM_NAME,this.url));try{params=JSON.parse(url_param)}catch(error){return err=error,null}return session=params[0],expiration=params[1],metadata=params[2],expiration<(new Date).getTime()?null:{session:session,metadata:metadata}},AnalyticsUrl.prototype._expiration=function(){return(new Date).getTime()+TTL},AnalyticsUrl}();var DomainExtractor;DomainExtractor=function(){var NUMBER_DOT_ONLY_PATTERN;NUMBER_DOT_ONLY_PATTERN=/^[\d.]+$/;eturn DomainExtractor.prototype.get=function(wildcard){var domain,domain_parts,matched_tld;return null==wildcard&&(wildcard=!0),this.hostname.match(NUMBER_DOT_ONLY_PATTERN)?null:(domain_parts=this.hostname.split("."),1===domain_parts.length?null:("www"===domain_parts[0]&&domain_parts.length>2&&domain_parts.shift(),matched_tld=this._matchedCustomTld(),domain=matched_tld?this._constructMatchedDomain(domain_parts,matched_tld):this._constructDomain(domain_parts),wildcard&&(domain="."+domain),domain))},DomainExtractor.prototype._constructDomain=function(domain_parts){var domain;domain=[domain_parts.pop()];while(domain_parts.length)if(domain.unshift(domain_parts.pop()),domain[0].length>3)break;return domain.join(".")},DomainExtractor.prototype._constructMatchedDomain=function(domain_parts,matched_tld){var matched_tld_length,next_subdomain;return matched_tld===domain_parts.join(".")?matched_tld:(matched_tld_length=matched_tld.split(".").length,(next_subdomain=domain_parts[domain_parts.length-matched_tld_length-1])+"."+matched_tld)},DomainExtractor.prototype._matchedCustomTld=function(){var dotted_tld,i,len,ref,tld;for(ref=this._customTlds(),i=0,len=ref.length;i<len;i++)if(tld=ref[i],dotted_tld="."+tld,-1!==this.hostname.indexOf(dotted_tld,this.hostname.length-dotted_tld.length))return tld;return null},DomainExtractor.prototype._customTlds=function(){return Settings.custom_tlds.sort(},DomainExtractor}();var bind=indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1},Session;Session=function(){var SHOP_COOKIE_OPTIONS,key,method;for(key in Runnable)method=Runnable[key],Session.prototype[key]=method;SHOP_COOKIE_OPTIONS=["full","basic"];function Session(plugins_manager){var ref;this.plugins_manager=plugins_manager,this._onConnectSessionSuccess=bind(this._onConnectSessionSuccess,this),this._onCreateSessionSuccess=bind(this._onCreateSessionSuccess,this),this._onSessionError=bind(this._onSessionError,this),this.promise=new Promise,this.domain=new DomainExtractor(Settings.url.hostname).get(),this._cleanUpCookies(),ref=this._getSessionFromCookie(),this.analytics_session=ref[0],this.cookie_policy=ref[1]}return Session.prototype.then=function(success,fail){return this.promise.then(success,fail)},Session.prototype._commands={session:{create:function(shop_code,flavor,metadata){return this.cookie_policy="b"===metadata.cp?"basic":"full",this.shop_code=shop_code,this.flavor=flavor,this.metadata=metadata,this.shop_cookie_policy="full",this._extractAnalyticsSessionOnCreate()},connect:function(shop_code,shop_cookie_policy){var ref,skr_prm;return null==shop_cookie_policy&&(shop_cookie_policy="full"),shop_code?this.shop_code?"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn?console.warn("Connect called multiple times"):void 0:(this.shop_code=shop_code,this.shop_cookie_policy=indexOf.call(SHOP_COOKIE_OPTIONS,shop_cookie_policy)>=0?shop_cookie_policy:"full",this.cookie_policy&&(this.metadata=this._getMetadataFromCookie()),"basic"===this.shop_cookie_policy&&this._unsetFullCookies(),this.plugins_manager.session=this,this.plugins_manager.notify("connect",{}),skr_prm=new AnalyticsUrl(Settings.url.current).read_params(),this._setAnalyticsSession(skr_prm),this._setAnalyticsMetadata(skr_prm),this.analytics_session||(ref=this._getSessionFromCacheCookie(),this.analytics_session=ref[0],this.cookie_policy=ref[1]),this.analytics_session?this.promise.resolve(this):this._extractAnalyticsSessionOnConnect("connect",shop_code)):"undefined"!=typeof console&&null!==console&&"function"==typeof console.warn?console.warn("Connect called without a shop code"):void 0}}},Session.prototype._cleanUpCookies=function(){var cookie_data,cookie_name,cookie_settings,cookies,i,len,options,results;for(cookie_settings=Settings.cookies,this.domain&&(options={domain:this.domain}),cookies=[cookie_settings.basic.analytics.name,cookie_settings.basic.session.name,cookie_settings.full.analytics.name,cookie_settings.full.session.name],results=[],i=0,len=cookies.length;i<len;i++)cookie_name=cookies[i],(cookie_data=Biskoto.get(cookie_name))&&(cookie_data.version!==cookie_settings.version?results.push(Biskoto.expire(cookie_name,options)):results.push(void 0));return results},Session.prototype._getSessionFromCacheCookie=function(){var data;return(data=Biskoto.get(Settings.cookies.full.analytics.name))?[data.analytics_session,"full"]:(data=Biskoto.get(Settings.cookies.basic.analytics.name))?[data.analytics_session,"basic"]:[null,null]},Session.prototype._getSessionFromCookie=function(){var data;return(data=Biskoto.get(Settings.cookies.full.session.name))?[data.session,"full"]:(data=Biskoto.get(Settings.cookies.basic.session.name))?[data.session,"basic"]:[null,null]},Session.prototype._getMetadataFromCookie=function(){var data;return(data=Biskoto.get(Settings.cookies.full.meta.name))?data:Biskoto.get(Settings.cookies.basic.meta.name)},Session.prototype._extractAnalyticsSessionOnCreate=function(){return new XDomainEngine("create",this.shop_code,this.flavor,this.analytics_session,this.cookie_policy,encodeURIComponent(JSON.stringify(this.metadata))).then(this._onCreateSessionSuccess,this._onSessionError)},Session.prototype._extractAnalyticsSessionOnConnect=function(){return new XDomainEngine("connect",this.shop_code).then(this._onConnectSessionSuccess,this._onSessionError)},Session.prototype._onSessionError=Session.prototype._onCreateSessionSuccess=function(session){return session?(this.analytics_session=session,this._createSessionCookie(),this.promise.resolve(this)):this.promise.reject()},Session.prototype._onConnectSessionSuccess=function(session){return session?(session=JSON.parse(session),this.analytics_session=session.session,this.cookie_policy=session.cookie_policy,this._createSessionCacheCookie(this.analytics_session),this.promise.resolve(this)):this.promise.reject()},Session.prototype._setAnalyticsSession=function(skr_prm){if(null!=skr_prm?skr_prm.session:void 0)return this.analytics_session=skr_prm.session,this.cookie_policy="b"===skr_prm.metadata.cp?"basic":"full",this._createSessionCookie()},Session.prototype._setAnalyticsMetadata=function(skr_prm){if(null!=skr_prm?skr_prm.metadata:void 0)return this.metadata=skr_prm.metadata,this._createMetadataCookie()},Session.prototype._createSessionCacheCookie=function(analytics_session){var basic_options,cookie_data,full_options;if(cookie_data={version:Settings.cookies.version,analytics_session:analytics_session},basic_options={expires:Settings.cookies.basic.analytics.duration},this.domain&&(basic_options.domain=this.domain),Biskoto.set(Settings.cookies.basic.analytics.name,cookie_data,basic_options),"full"===this.cookie_policy&&"full"===this.shop_cookie_policy)return full_options={expires:Settings.cookies.full.analytics.duration},this.domain&&(full_options.domain=this.domain),Biskoto.set(Settings.cookies.full.analytics.name,cookie_data,full_options)},Session.prototype._createSessionCookie=function(){var basic_options,full_cookie,full_options,session_data;if(session_data={version:Settings.cookies.version,session:this.analytics_session},basic_options={expires:Settings.cookies.basic.session.duration},this.domain&&(basic_options.domain=this.domain),Biskoto.set(Settings.cookies.basic.session.name,session_data,basic_options),full_options={expires:Settings.cookies.full.session.duration},this.domain&&(full_options.domain=this.domain),"full"===this.cookie_policy&&"full"===this.shop_cookie_policy&&Biskoto.set(Settings.cookies.full.session.name,session_data,full_options),(full_cookie=Biskoto.get(Settings.cookies.full.session.name))&&("basic"===this.cookie_policy||"basic"===this.shop_cookie_policy))return Biskoto.expire(Settings.cookies.full.session.name,full_options)},Session.prototype._createMetadataCookie=function(){var full_cookie,options;if(this.domain&&(options={domain:this.domain}),Biskoto.set(Settings.cookies.basic.meta.name,this.metadata,options),"full"===this.cookie_policy&&"full"===this.shop_cookie_policy&&Biskoto.set(Settings.cookies.full.meta.name,this.metadata,options),(full_cookie=Biskoto.get(Settings.cookies.full.meta.name))&&("basic"===this.cookie_policy||"basic"===this.shop_cookie_policy))return Biskoto.expire(Settings.cookies.full.meta.name,options)},Session.prototype._unsetFullCookies=function(){var cache_cookie,metadata_cookie,options,session_cookie;if(this.analytics_session&&(options={expires:Settings.cookies.full.session.duration},this.domain&&(options.domain=this.domain),(session_cookie=Biskoto.get(Settings.cookies.full.session.name))&&Biskoto.expire(Settings.cookies.full.session.name,options)),this.metadata&&(this.domain&&(options={domain:this.domain}),(metadata_cookie=Biskoto.get(Settings.cookies.full.meta.name))&&Biskoto.expire(Settings.cookies.full.meta.name,options)),options={expires:Settings.cookies.full.analytics.duration},this.domain&&(options.domain=this.domain),cache_cookie=Biskoto.get(Settings.cookies.full.analytics.name))return Biskoto.expire(Settings.cookies.full.analytics.name,options)},Session}();var PluginsSettings;PluginsSettings={general:{fetch_plugins_url:"https://skroutza.skroutz.gr/plugins"},plugins:{order_stash:{url:"https://skroutza.skroutz.gr/js/plugins/order_stash.cb5fbb30.min.js",elements_to_hide:["#sa-badge-floating-plugin"]},badge:{url:"https://skroutza.skroutz.gr/js/plugins/badge.d35279ba.min.js"},partner_sku_reviews:{url:"https://skroutza.skroutz.gr/js/plugins/partner_sku_reviews.6ef6564d.min.js"}},triggers:{order:"order_stash",connect:["badge","partner_sku_reviews"]}};var JSONP,uid;uid=0,JSONP=function(){var CALLBACK_PARAM;function JSONP(){}return CALLBACK_PARAM="callback",JSONP.fetch=function(url,data){var callback_name,promise;return null==data&&(data={}),promise=new Promise,callback_name=JSONP._callbackName(),window[callback_name]=data[CALLBACK_PARAM]=callback_name,JSONP.load(url,data),promise},JSONP.load=function(url,data){var done,script;return done=!1,script=document.createElement("script"),script.type="text/javascript",script.src=data?JSONP._query(url,data):url,script.charset="utf-8",script.async=!0,script.onload=script.onreadystatechange=function(){var ref;if(!(done||this.readyState&&"loaded"!==(ref=this.readyState)&&"complete"!==ref)&&(done=!0,script.onload=script.onreadystatechange=null,script&&script.parentNode))return script.parentNode.removeChild(script)},document.getElementsByTagName("head")[0].appendChild(script)},JSONP._callbackName=JSONP._query=JSONP}();var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;i<l;i++)if(i in this&&this[i]===item)return i;return-1},PluginsManager;PluginsManager=function(){eturn PluginsManager.prototype.notify=PluginsManager.prototype._publishPluginData=function(name,data){var base,base1,error;if("object"!=typeof data)try{data=JSON.parse(data)}catch(error){return!1}else data=JSON.parse(JSON.stringify(data));return window.sa_plugins||(window.sa_plugins={}),(base=window.sa_plugins)[name]||(base[name]={}),(base1=window.sa_plugins).settings||(base1.settings=this._settings()),data.shop_code=this.session.shop_code,data.analytics_session=this.session.analytics_session,data.configuration=this._plugin(name).configuration,data.data=this._plugin(name).data,window.sa_plugins[name]=data,!0},PluginsManager.prototype._settings=function(){return{url:{base:Settings.url.base,application_base:Settings.url.application_base},plugins:PluginsSettings.plugins}},PluginsManager.prototype._load=function(name){return this.loaded_plugins.push(name),JSONP.load(this._pluginSettings(name).url)},PluginsManager.prototype._fetchEnabledPlugins=function(){var data;return data={shop_code:this.session.shop_code},this.fetched||(this.fetched=JSONP.fetch(PluginsSettings.general.fetch_plugins_url,data).then(function(_this){return (this)))},PluginsManager.prototype._pluginIsLoaded=PluginsManager.prototype._pluginIsEnabled=function(name){var plugin;return indexOf.call(function(){var i,len,ref,results;for(ref=this.enabled_plugins,results=[],i=0,len=ref.length;i<len;i++)plugin=ref[i],results.push(plugin.name);return results}.call(this),name)>=0},PluginsManager.prototype._pluginSettings=PluginsManager.prototype._plugin=function(name){var plugin;return call(this)[0]},PluginsManager}();var BrowserHelper;BrowserHelper=function(){eturn BrowserHelper.checkImages=function(){var img,img_enabled,parent,promise,src;return promise=new Promise,img_enabled=!1,parent=document.getElementsByTagName("head")[0],src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",img=document.createElement("img"),img.onload=img.onerror=img.src=src,parent.appendChild(img),setTimeout(function(){return promise.resolve(img.complete||img_enabled),parent.removeChild(img)},0),promise},BrowserHelper}();var Reporter,unique_id;unique_id=0,Reporter=function(){function Reporter(){this.transport="img",this.transport_ready=this._determineTransport()}return Reporter.prototype.then=Reporter.prototype.sendBeacon=function(url,data){var promise;return promise=new Promise,this.transport_ready.then(this)),promise},Reporter.prototype._determineTransport=function(){return BrowserHelper.checkImages().then(function(_this){return function(images_enabled){if(!images_enabled)return _this.transport="script"}}(this))},Reporter.prototype._handleJob=function(url,payload,promise){var data;return data=URLHelper.serialize(payload),url=URLHelper.appendData(url,data),this._createTransport(url,promise)},Reporter.prototype._createTransport=function(url,promise){var element,sibling,transport_options;return transport_options={buster:+new Date+"_"+unique_id++},"script"===this.transport&&(transport_options.no_images=""),element=document.createElement(this.transport),element.onload=function(_this){return function(){return _this._removeElement(element),promise.resolve()}}(this),element.onerror=function(_this){return (this),element.src=URLHelper.appendData(url,URLHelper.serialize(transport_options)),sibling=document.getElementsByTagName("script")[0],sibling.parentNode.insertBefore(element,sibling),promise},Reporter.prototype._removeElement=Reporter}();var ValidationError,extend=hasProp={}.hasOwnProperty,slice=[].slice;ValidationError=function(superClass){extend(ValidationError,superClass);function ValidationError(message,reason){this.message=message,this.reason=reason,this.name="ValidationError",Error.captureStackTrace?Error.captureStackTrace(this,ValidationError):this.stack=(new Error).stack}return ValidationError}(Error);var Validator;Validator=function(){function Validator(data,action){if(this.data=data,this.action=null!=action?action:"","string"==typeof this.data)try{this.data=JSON.parse(this.data)}catch(undefined){}if("object"!=typeof this.data)throw new ValidationError("Invalid JSON object"+(this.action?" in '"+this.action+"' action":"")+":\n"+this.data,{error:"invalid_object",action:this.action})}return Validator.prototype.present=function(){var base,i,key,keys,len;for(keys=1<=arguments.length?slice.call(arguments,0):[],i=0,len=keys.length;i<len;i++)if(key=keys[i],void 0===this.data[key]||null===this.data[key]||""===("function"==typeof(base=this.data[key]).trim?base.trim():void 0))throw new ValidationError("Missing or empty '"+key+"'"+(this.action?" in '"+this.action+"' action":""),{error:"not_present",key:key,action:this.action});return this},Validator}();var indexOf=[].indexOf||ActionsManager;ActionsManager=function(){var key,method;for(key in Runnable)method=Runnable[key],ActionsManager.prototype[key]=method;function ActionsManager(session,plugins_manager){this.session=session,this.plugins_manager=plugins_manager,this.reporter=new Reporter,this.pageview_timeout=null,this.reported_line_items=0,Settings.send_auto_pageview&&this._setPageViewTimeout()}return ActionsManager.prototype._setPageViewTimeout=function(){return this.pageview_timeout=setTimeout(function(_this){return (this),Settings.auto_pageview_timeout)},ActionsManager.prototype._commands={yogurt:{productClick:function(data,redirect_callback,redirect_url,url_mode){return null==url_mode&&(url_mode={type:"default"}),clearTimeout(this.pageview_timeout),this._reportAction("yogurt","productClick",data,function(_this){return function(){var error;if(redirect_callback&&redirect_url){redirect_url=new AnalyticsUrl(redirect_url).format_params(url_mode,_this.session.analytics_session,_this.session.metadata);try{return redirect_callback(redirect_url)}catch(error){return Settings.redirectTo(redirect_url)}}}}(this))}},ecommerce:{addOrder:function(data,callback){var e,error;clearTimeout(this.pageview_timeout);try{new Validator(data,"addOrder").present("order_id")}catch(error){if(e=error,"ValidationError"===e.name)return"undefined"!=typeof console&&null!==console&&"function"==typeof console.error?console.error(Settings.flavor+"Analytics | "+e.message):void 0;throw e}if(this._reportAction("ecommerce","addOrder",data,function(){if(callback)return callback()}),"full"===this.session.cookie_policy)return this.plugins_manager.notify("order",data)},addItem:function(data,callback){var e,error;clearTimeout(this.pageview_timeout);try{data=new Validator(data,"addItem").present("order_id","product_id").data}catch(error){if(e=error,"ValidationError"===e.name)return"undefined"!=typeof console&&null!==console&&"function"==typeof console.error?console.error(Settings.flavor+"Analytics | "+e.message):void 0;throw e}return data.rpos=this.reported_line_items++,this._reportAction("ecommerce","addItem",data,}},site:{sendPageView:},ActionsManager.prototype._reportAction=function(category,type,data,cb){var payload,url;return url=Settings.url.beacon(this.session.analytics_session),payload=this._buildBeaconPayload(category,type,data),this.reporter.sendBeacon(url,payload).then(function(_this){return (this))},ActionsManager.prototype._buildBeaconPayload=function(category,type,data){var params,payload;return null==data&&(data="{}"),
"string"!=typeof data&&(data=JSON.stringify(data)),payload={},params=Settings.params,payload[params.url]=Settings.url.current,payload[params.referrer]=Settings.url.referrer,payload[params.shop_code]=this.session.shop_code,payload[params.metadata]=this._buildMetadata(JSON.parse(data)),payload[params.cookie_policy]=this.session.cookie_policy,payload[params.cookie_type]=this._determineCookieType(),payload[params.actions]=[{category:category,type:type,data:data}],payload},ActionsManager.prototype._buildMetadata=function(data){var meta,sbm,sbm_tag,tags;return this.session.metadata?(sbm=data.sbm,sbm_tag=data.sbm_tag,sbm||sbm_tag?(meta=JSON.parse(JSON.stringify(this.session.metadata)),tags=meta.tags?meta.tags.split(","):[],(sbm||sbm_tag)&&(!sbm||indexOf.call(tags,"sbm")>=0||tags.push("sbm"),!sbm_tag||indexOf.call(tags,sbm_tag)>=0||tags.push(sbm_tag)),tags&&(meta.tags=tags.join()),meta):this.session.metadata):""},ActionsManager.prototype._determineCookieType=function(){return Biskoto.get(Settings.cookies.basic.session.name)?"1":"3"},ActionsManager}();var Analytics;Analytics=function(){function Analytics(){var ref;this.plugins_manager=new PluginsManager,this.session=new Session(this.plugins_manager),this.actions=null,(null!=(ref=Settings.window[Settings.command_queue_name].q)?ref.length:void 0)>0?this._handle_session():Settings.window[Settings.command_queue_name]=function(_this){return function(){var base;return((base=Settings.window[Settings.command_queue_name]).q||(base.q=[])).push(arguments),_this._handle_session()}}(this)}return Analytics.prototype._handle_session=function(){return this.session.run().then(function(_this){return function(session){if(session)return _this.actions=new ActionsManager(session,_this.plugins_manager),_this._live()}}(this))},Analytics.prototype._live=function(){return this.actions.run(),Settings.window[Settings.command_queue_name]=function(_this){return function(){var base;return((base=Settings.window[Settings.command_queue_name]).q||(base.q=[])).push(arguments),_this.actions.run()}}(this)},Analytics}(),(global[Settings.command_queue_name]=global[Settings.command_queue_name]||{}).analytics=new Analytics}(this);