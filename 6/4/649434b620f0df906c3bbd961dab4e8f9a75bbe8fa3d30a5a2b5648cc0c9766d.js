!this,(function(e){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var t=var n,r= s=new Uint8Array(16);ar u=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;or(var l=[],p=0;p<256;++p)l.push((p+256).toString(16).substr(1));ar v={view:"101",click:"102",input:"103",success:"104",loading:"105",heartbeat:"106",check:"107",view_success:"108",hover:"109",exit:"999"},h={event_name:{view:"101",additem:"102",updateitem:"103",removeitem:"104",checkout:"105",recommenditem:"106",proceed_to_checkout:"107",place_order:"108",click_component:"109",product_view:"110",product_share:"111",buy_now:"112",select_product:"113",deselect_product:"114",menu_view:"115",menu_click:"116",catalog_view:"117",catalog_click:"118",sku_click:"119",component_view:"120",display_click:"121",sort_click:"122",select_bundling:"123",add_wishlist:"124",cancel_wishlist:"125",proceed_to_delivery_payment:"126",proceed_to_pay:"127",proceed_to_delivery:"128",quick_payment:"129",click_product:"130",search_suggest:"131",paypal:"132",input:"133",modify:"134",select_shipping:"135",select_payment:"136",inventory_shortage:"137",login_success:"138",view_cart:"139",leave:"999"},event_category:{order:"101",cart:"102",email:"103",expresscheckoutpage:"104"},product_type:{product:"101",addon:"102",subscription:"103"},status:{soldout:"101",selling:"102"},purchase_source:{common_store:"101",one_page_store:"102"},page:{homepage:"101",pdp:"102",cart:"103",order_check_out:"104",transaction:"105",product_search:"106",product_list:"107",user_page:"108",email:"109",expresscheckout:"110","404page":"111",call_to_action:"112",consumer_home:"113",onepage_checkout:"114",address_confirm:"115",delivery_payment_confirm:"116",delivery_confirm:"117",payment_confirm:"118",addon:"119",other:"120",landing_page:"121"},general_component:{catalog:"101",logo:"102",search:"103",sign_in_bottom:"104",message:"105",cart:"106",store_language:"107",currency:"108",search_product:"109",H1:"110",paragraph:"111",single_image:"112",slider:"113",poster:"114",gallery:"115",media_lr:"116",media_ud:"117",end_payment:"118",end_email:"119",end_fb:"120",end_ins:"121",end_twitter:"122",end_snapchat:"123",end_pinterest:"124",end_line:"125",theme:"126",free_layout:"127",search_pop:"128",search_bar:"129"},custom_component:{sign_up_tab:"101",sign_in_tab:"102",line_signin:"103",fb_signin:"104",sign_in_105:"105",sign_up:"106",title_component:"107",content_component:"108",productmoduel_component:"109",productlist_component:"110",QRcode_component:"111",ins_component:"112",googlemap_component:"113",facebook_component:"114",video_component:"115",pic_component:"116",product_menu:"117",pre_order:"118",gotoamazon:"119",wishlist:"120",product_descri:"121",deliver_payment:"122",score:"123",reviews:"123",share:"124",recommendation:"125",checkout:"126",removement:"127",sign_in_128:"128",proceed_to_checkout:"129",select_all:"130",deselect_all:"131",select:"132",deselect:"133",product_edit:"134",subscribe_line:"135",back_to_cart:"136",place_order:"137",buy_now:"138",view_more:"139",play_video:"140",more_bundling:"141",rec_turn_page:"142",arrival_notice:"143",more_reviews:"144",consumer_info:"145",message:"146",order:"147",return_order:"148",wishlist_149:"149",wishlist_turn_page:"150",use_coupon:"151",sign_in:"152",subscription:"153",back:"154",continue:"155"},display_iterm:{24:"101",48:"102",72:"103"},sort_by:{newestToOldest:"101",oldestToNewest:"102",priceHighToLow:"103",priceLowToHigh:"104",default:"999"},pro_list_type:{category:"101",all_product:"102",chosen_product:"103"},share_dest:{line:"101",fb:"102",message:"103",link:"104",whatsapp:"105",twitter:"106"},signin_source:{sign_in_bottom:"101",order_edit:"102"},search_type:{user_search:"101",suggest_ai:"102",suggest_search:"103"},input_box:{email:"101",first_name:"102",last_name:"103",country:"104",province:"105",city:"106",district:"107",address1:"108",address2:"108",postcode:"109",phone:"110",same_address:"111",another_address:"112",remark:"113"},object:{info:"101",address:"102",shipping:"103"},isFirst:{yes:"1",no:"0"},loginResult:{success:"1",fail:"0"},action_type:v},m=["general_component","custom_component","status","product_type"],g=["PageView","PageLeave","PageDuration","HeartBeat","View","ViewSuccess","ViewContent","AddToCart","InitiateCheckout","AddCustomerInfo","AddShippingInfo","AddPaymentInfo","Purchase","SearchResults","CompleteRegistration","Search","Lead","Login","SelectContent","RemoveFromCart","ViewItemList"],y=["View","ViewSuccess"];ed"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};ar D=j(();unction V(e){if("object"!==T(e))return e;return function e(t,n){var r=[];if("object"===T(t))return Object.keys(t).forEach((function(o){var i=t[o];"object"===T(i)?r=""!=n?r.concat(e(i,n+"["+o+"]")):r.concat(e(i,o)):void 0!==i&&(""!=n?r.push(n,"[",o,"]","=",encodeURIComponent(i),"&"):r.push(o,"=",encodeURIComponent(i),"&"))})),r}(e,"").slice(0,-1).join("")}var U="application/x-www-form-urlencoded",N=49152,H="The query length cannot exceed ".concat(48,"K"),q={useHttps:!0,useRetry:!0,retryTimes:1,maxRequest:5},B=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_(this,e),this.configure(t),this.override(n)}return b(e,[{key:"configure",value:function(e){var t,n,r=Object.assign({},this.options,M(e));0<r.retryTimes&&r.retryTimes<4||(r.retryTimes=1),-1!==(null===(t=window.location)||void 0===t||null===(n=t.protocol)||void 0===n?void 0:n.indexOf("https"))&&(r.useHttps=!0),this.options=r}},{key:"merge",value:,{key:"override",value:,{key:"use",value:function(e,t){if("function"==typeof t)switch(e){case"url":this.urlInterceptor=t;break;case"request":this.requestInterceptor=t}}},{key:"processTrackingData",value:function(e){var t=Object.assign({},this.data,e),n=this.completeTrackingData(t);return this.pretreateTrackingData(n)}},{key:"encodeTrackingData",value:,{key:"completeTrackingData",value:function(e){var t,n,r,o,i,a,s,c={act:"websdkentmaster",time:Math.floor((new Date).getTime()/1e3),domain:null===(t=window)||void 0===t||null===(n=t.location)||void 0===n?void 0:n.hostname,url:null===(r=window)||void 0===r||null===(o=r.location)||void 0===o?void 0:o.href,ua:null===(i=window)||void 0===i||null===(a=i.navigator)||void 0===a?void 0:a.userAgent,ref:null===(s=document)||void 0===s?void 0:s.referrer,data_id:f(),request_time:Date.now()};return Object.assign({},c,e)}},{key:"formatMoreInfoData",value:function(e){var t,n={language:null===(t=window)||void 0===t?void 0:t.navigator.language,is_mobile:this.getIsMobile()};return Object.assign({},n,e)}},{key:"getMobile",value:function(){var e,t=null===(e=window)||void 0===e?void 0:e.navigator.userAgent,n=!t.match(/(iPad).*OS\s([\d_]+)/)&&t.match(/(iPhone\sOS)\s([\d_]+)/),r=t.match(/(Android)\s+([\d.]+)/);return n||r}},{key:"getIsMobile",value:function(){return this.getMobile()?"101":"102"}},{key:"pretreateTrackingData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options,n=this.requestInterceptor;return"function"==typeof n?n(e,t):e}},{key:"formatTrackingData",value:function(e){var t=M(e);return t.moreinfo||(t.moreinfo={}),"object"===T(t.moreinfo)&&(t.moreinfo=this.formatMoreInfoData(t.moreinfo),t.moreinfo=JSON.stringify(t.moreinfo)),"localhost"===t.domain&&(t.domain=""),t}},{key:"destory",value:]),e}(),F=new Array(15);ction G(e,t,n,r,o){return n<=60?(r[o]=n-1<<2,o+=1):n<256?(r[o]=240,r[o+1]=n-1,o+=2):(r[o]=244,r[o+1]=n-1&255,r[o+2]=n-1>>>8,o+=3),e,t,r,o,n),o+n}nction $(e,t,n,r,o){for(var i=1;1<<i<=n&&i<=14;)i+=1;var a=32-(i-=1);void 0===F[i]&&(F[i]=new Uint16Array(1<<i));for(var s=F[i],c=0;c<s.length;c++)s[c]=0;var u,d,l,p,f,v,h,m,g,y,_=t+n,w=t,b=t,S=!0;if(n>=15)for(u=_-15,l=z(J(e,t+=1),a);S;){v=32,p=t;do{if(d=l,h=v>>>5,v+=1,p=(t=p)+h,t>u){S=!1;break}l=z(J(e,p),a),f=w+s[d],s[d]=t-w}while(!K(e,t,f));if(!S)break;o=G(e,b,t-b,r,o);do{for(m=t,g=4;t+g<_&&e[t+g]===e[f+g];)g+=1;if(t+=g,o=Y(r,o,m-f,g),b=t,t>=u){S=!1;break}s[z(J(e,t-1),a)]=t-1-w,f=w+s[y=z(J(e,t),a)],s[y]=t-w}while(K(e,t,f));if(!S)break;l=z(J(e,t+=1),a)}return b<_&&(o=G(e,b,_-b,r,o)),o}var X=function(){eturn b(e,[{key:"maxCompressedLength",value:,{key:"compressToBuffer",value:]),e}();function Q(e){return e instanceof Uint8Array}unction ee(e){if(!Q(e)&&!Z(e)&&(t=e,!Buffer.isBuffer(t)))throw new TypeError("Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array");var t,n,r=!1,o=!1;Q(e)?(r=!0,n=e):Z(e)&&(o=!0,n=new Uint8Array(e));var i,a,s,c=new X(n),u=c.maxCompressedLength();return r?(i=new Uint8Array(u),s=c.compressToBuffer(i)):o?(i=new ArrayBuffer(u),a=new Uint8Array(i),s=c.compressToBuffer(a)):(i=Buffer.alloc(u),s=c.compressToBuffer(i)),i.slice(0,s)}function te(e){return ee(function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(e))}var ne=Math.pow(2,31)-1;function re(e){return new Promise((function(t){var n=Number.isSafeInteger(e)&&e>0?e:0;setTimeout(t,n>ne?ne:n)}))}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}var ie=Object.assign({},q,{wait:"immediately"}),ae=function(e){k(a,e);var t,n,r,o,i=oe(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _(this,a),(e=i.call(this,t,n)).trackingTasks=[],e.trackingReportors=[],e}return b(a,[{key:"report",value:(o=P(D.mark((function e(t){var n,r,o=arguments;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]&&o[1],Array.isArray(t)){e.next=3;break}return e.abrupt("return",this.report([t],n));case 3:if(this.addTask.apply(this,R(t)),!n){e.next=7;break}return r=this.trackingTasks.pop(),e.abrupt("return",this.tryReport([r]));case 7:return e.abrupt("return",this.runReport());case 8:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"post",value:(r=P(D.mark((function e(){var t;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.freeTrackingTask()).length>0)){e.next=5;break}return this.tryReport(t),e.abrupt("continue",0);case 5:return e.abrupt("break",8);case 8:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"use",value:,{key:"addTask",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){var n=e.processTrackingData(t),r=e.encodeTrackingData(n);if(e.validTrackingData(r)){var o={encoded:r,source:n};e.trackingTasks.push(o)}}))}},{key:"runReport",value:(n=P(D.mark((function e(){var t,n,r,o,i;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.options,n=t.maxRequest,r=t.wait,!(this.trackingReportors.length>=n)){e.next=4;break}return e.next=4,Promise.all(this.trackingReportors);case 4:if(!a.supported){e.next=13;break}if("nextTick"!==r){e.next=10;break}return e.next=8,Promise.resolve();case 8:e.next=13;break;case 10:if("number"!=typeof r){e.next=13;break}return e.next=13,re(r);case 13:if(!((o=this.freeTrackingTask()).length>0)){e.next=18;break}return i=this.tryReport(o),e.next=18,this.pushReport(i);case 18:case"end":return e.stop()}}),e,this)}))),},{key:"freeTrackingTask",value:function(){for(var e=1,t=0;t<this.trackingTasks.length;t++){if((e+=this.trackingTasks[t].encoded.length+3)>N)return this.trackingTasks.splice(0,t)}return this.trackingTasks.splice(0)}},{key:"tryReport",value:(t=P(D.mark((function e(t){var n,r,o,i,a,s,c,u,d=arguments;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d.length>1&&void 0!==d[1]?d[1]:0,e.prev=1,r=this.options,o=r.useHttps,i=r.domain,a="http".concat(!1!==o?"s":"","://").concat(i),e.next=6,this.delegateRequest(a,t);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(1),s=this.options,c=s.useRetry,u=s.retryTimes,!(!0===c&&u>n)){e.next=15;break}return e.next=14,this.tryReport(t,n+1);case 14:return e.abrupt("return",e.sent);case 15:return e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}}),e,this,[[1,8]])}))),},{key:"pushReport",value:function(e){var t=this,n=r=e.then(n).catch(();return this.trackingReportors.push(r),r}},{key:"delegateRequest",value:function(e,t){if(!Array.isArray(t)){var n=this.interceptUrl("".concat(e,"/").concat("n.gif"),t);return this.options.skipReport?Promise.resolve():this.send(n,t.encoded)}return 1===t.length?this.delegateRequest(e,t[0]):this.mergeRequest(e,t)}},{key:"mergeRequest",value:function(e,t){var n=t.map((),r=this.compressTrackingDatas(n),o=this.interceptUrl("".concat(e,"/").concat("o.gif","?cmp=1&enc=b64"),t);return this.options.skipReport?Promise.resolve():this.send(o,r)}},{key:"interceptUrl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.options;return"function"==typeof this.urlInterceptor?this.urlInterceptor(e,t,n):e}},{key:"compressTrackingDatas",value:function(e){var t=te(JSON.stringify(e)),n=String.fromCharCode.apply(null,new Uint8Array(t));return btoa(n)}},{key:"validTrackingData",value:function(e){return!(e.length>N)||(t=H,"function"==typeof(null===(n=console)||void 0===n?void 0:n.error)?console.error(t):"function"==typeof(null===(r=console)||void 0===r?void 0:r.log)&&console.log(t),!1);var t,n,r}},{key:"destory",value:function(){A(O(a.prototype),"destory",this).call(this),this.trackingTasks.splice(0),this.trackingReportors.splice(0),this.trackingTasks=void 0,this.trackingReportors=void 0}}]),a}(B);L(ae,"supported","function"==typeof btoa&&"undefined"!=typeof Uint16Array);var se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http request fail.",n=new Error(t),r=e.xhr,o={type:"ajax",response:null,event:e.event,data:e.data,xhr:r,status:r.status,responseText:r.responseText};try{o.response=JSON.parse(r.responseText)}catch(e){}return Object.assign(n,{detail:o})};function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}var ue=function(e){k(n,e);var t=ce(n);function n(){return _(this,n),t.apply(this,arguments)}return b(n,[{key:"send",value:function(e,t){return function(e,t){return new Promise((function(n,r){var o=new XMLHttpRequest;o.open("POST",e),o.onerror=function(e){var n=se({xhr:o,event:e,data:t});r(n)},o.onreadystatechange=function(e){if(o.readyState===XMLHttpRequest.DONE&&200===o.status)n();else{var i=se({xhr:o,event:e,data:t});(o.status>=500||o.status>=402&&o.status<=420||400==o.status||401==o.status)&&r(i)}},o.setRequestHeader("Content-Type",U),o.withCredentials=!1,o.send(t)}))}(e,t)}}]),n}(ae);L(ue,"supported","undefined"!=typeof XMLHttpRequest);var de,le=function(){var e=P(D.mark((function e(t,n){var r;return D.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new Blob([n],{type:U}),navigator.sendBeacon(t,r)){e.next=4;break}throw new Error("Send beacon fail.");case 4:case"end":return e.stop()}}),e)})));return ();ar fe=function(e){k(n,e);var t=pe(n);eturn b(n,[{key:"send",value:]),n}(ae);L(fe,"supported","function"==typeof(null===(de=navigator)||void 0===de?void 0:de.sendBeacon));var ve,he,me,ge,ye,_e=Object.freeze({__proto__:null,default:function(e,t){var n=new fe(e,t),r=new ue(e,t),o={httpInstance:r,beaconInstance:n};return fe.supported?Object.assign(n,o):ue.supported?Object.assign(r,o):void 0}})),we="tracker_cid",be="tracker_sid",Se="osudb_uid",ke="merchant_id",Te="store_id",xe="tracker_n_sid",Oe="n_sess",Le={wait:20},Ee="admintoC",Re="webslcodetrack",Ie="websdkprotocol",Pe="-999",Ae=["preview","product"],Ce="tracker_landing",je=["session_id","session_create_time","session_rn","last_session_id","session_create_type"],De=["merchant_id","user_id","version","store_timezone","user_timezone","store_region"],Me=Object.freeze({__proto__:null,PROD_ID:"shopline",HTTP_COOKIE_KEY:we,SESSION_ID_KEY:be,UID_KEY:Se,MERCHANT_ID_KEY:ke,STORE_ID_KEY:Te,SERVER_SESSION_ID_KEY:xe,COOKIE_SESSION_KEY:Oe,TRACKER_OPTIONS:Le,APP_ID:"101",PROJECT_ID:Ee,ACT:Re,LEGACY_ACT:Ie,DEFAULT_CODE:Pe,REPORT_ENV:Ae,LANDING_SIGN:Ce,SESSION_KEYS:je,OUTSIDE_PROPERTIES:De}),Ve=j((),Ue=-1,Ne=He=qe=Be=Fe=ze=Je=Ke=Ge=We=-1,Ye=$e=Xe=function(){addEventListener("visibilitychange",$e,!0),addEventListener("prerenderingchange",$e,!0)},Qe=Ze=et=tt=nt={passive:!0,capture:!0},rt=new Date,ot=it=at=st=ct=ut=0,dt=1/0,lt=0,pt=ft=vt=ht=0,mt=gt=[],yt={},_t=wt=bt={},St=kt=Tt=xt=new(function(){eturn e.prototype.get=function(e){var t;try{var n=JSON.parse(localStorage.getItem(e)||"");n&&n.value&&(n.maxAge?n.maxAge>Date.now()-(n.timeOffset||0)?t=n.value:this.remove(e):t=n.value)}catch(e){}return t},e.prototype.set=function(e,t,n,r){void 0===r&&(r=0);try{var o={value:t,maxAge:n?Date.now()-r+60*n*1e3:null,timeOffset:r};localStorage.setItem(e,JSON.stringify(o))}catch(e){}},e.prototype.remove=e.prototype.getRaw=function(e){var t={value:null,maxAge:null,timeOffset:0};try{var n=JSON.parse(localStorage.getItem(e)||"");n&&n.value&&(t=n)}catch(e){}return t},e.prototype.isExpired=function(e){try{var t=JSON.parse(localStorage.getItem(e)||"");return!t||!t.value||!(!t.maxAge||t.maxAge&&t.maxAge>(Date.now()-t.timeOffset||0))}catch(e){}return!0},e.prototype.append=function(e,t){try{var n=JSON.parse(localStorage.getItem(e)||"");if(n&&n.value)return Object.assign(n.value,t),localStorage.setItem(e,JSON.stringify(n)),n.value}catch(e){}},e}()),Ot=new(function(){function e(){this.webVitals={CLS:"",FCP:"",FID:"",INP:"",LCP:"",TTFB:""},this.getWebVitals()}return e.prototype.getHttpCookie=function(e){void 0===e&&(e=0);var t=xt.get(we);return t||(t=f(),xt.set(we,t,e)),t},e.prototype.getSessionId=function(e,t,n){void 0===e&&(e=30),void 0===t&&(t=0);var r=xt.getRaw(be),o=+new Date;n&&(o-=n);var i=r.value;i||(i={});var a=i.sid||"",s=r.maxAge&&r.maxAge<o,c=+i.ite;if(!i.sid||s){i={sid:f(),createAt:o,rn:1,last_session_id:a,session_create_type:101};var u=document.referrer;if(u){var d=window.location.host;new URL(u).host!==d&&(i.ref=u)}s&&(i.session_create_type=c?103:102)}var l=new Date(o).setUTCHours(0,0,0,0);l<o&&(l+=864e5);var p=(l-o)/1e3/60,v=o+6e4*new Date(o).getTimezoneOffset()+1e3*t,h=(new Date(v+864e5).setHours(0,0,0,0)-v)/1e3/60,m=Math.min(e,p,h);return i.ite=p<e||h<e?1:0,o+60*e*1e3<i.createAt&&(i.createAt=o),xt.set(be,i,m,n),i},e.prototype.getSession=function(){return xt.getRaw(be)},e.prototype.getRawSessionId=e.prototype.upsetSessionRn=function(e){var t=e.rn||1;return xt.append(be,{rn:t+1}),t},e.prototype.getHttpSearch=function(){return window.location.search},e.prototype.getUrlPath=function(){return window.location.pathname},e.prototype.getMobile=function(){var e=navigator.userAgent,t=!e.match(/(iPad).*OS\s([\d_]+)/)&&e.match(/(iPhone\sOS)\s([\d_]+)/),n=e.match(/(Android)\s+([\d.]+)/);return t||n},e.prototype.getIsMobile=function(){return this.getMobile()?"101":"102"},e.prototype.getWebsite=e.prototype.getLanguage=e.prototype.getUserId=function(){return Ve.get(Se)},e.prototype.getMerchantId=function(){return Ve.get(ke)},e.prototype.getTitle=e.prototype.getStoreId=e.prototype.getScreenWidth=function(){return window.screen.width},e.prototype.getScreenHeight=e.prototype.getWebVitals=function(){var e=this;[St,ct,tt,wt,et,Tt].forEach((function(t){return t(()}))},e.prototype.getPerformance=function(){var e=window.performance||window.webkitPerformance,t={},n=e&&e.timing;if(e&&n){var r=0;window.chrome&&window.chrome.loadTimes&&(r=1e3*window.chrome.loadTimes().firstPaintTime,r-=n.navigationStart),t.dns=Math.ceil(n.domainLookupEnd-n.domainLookupStart),t.tcp=Math.ceil(n.connectEnd-n.connectStart),t.request=Math.ceil(n.responseEnd-n.requestStart),t.connect=Math.ceil(n.responseStart-n.domainLookupStart),t.processing=Math.ceil((n.domComplete||n.domLoading)-n.domLoading),t.ready=Math.ceil(n.domContentLoadedEventEnd-n.navigationStart),t.load=Math.ceil(n.loadEventEnd-n.navigationStart),t.white=Math.ceil(n.responseStart-n.navigationStart),t.first_paint=r,t.first_paint||(t.first_paint=n.domLoading>=n.navigationStart?n.domLoading-n.navigationStart:0),t.first_paint=Math.ceil(t.first_paint),t.active=Math.ceil(n.domInteractive-n.navigationStart)}return t},e}());function Lt(e,t){for(var n={},r=0,o=t.length;r<o;r++){var i=t[r];i&&Object.prototype.hasOwnProperty.call(e,i)&&(n["".concat(i)]=e[i],delete e[i])}return n}unction Rt(){try{var e=Ve.get(Oe);return e?JSON.parse(e):null}catch(e){console.error(e)}return null}function It(e){var t=0;return(e=[].concat(e))&&e.length&&(t=e.some((function(e){var t,n,r,o;return"101"===String(null===(n=null===(t=e.source)||void 0===t?void 0:t.moreinfo)||void 0===n?void 0:n.event_name)&&"60006253"===String(null===(r=e.source)||void 0===r?void 0:r.eventid)||"PageView"===(null===(o=e.source)||void 0===o?void 0:o.event_name)}))),Number(t)}function Pt(e){var t;if(!(null===(t=null==e?void 0:e.trim)||void 0===t?void 0:t.call(e)))return e;var n="string"==typeof e?e:"".concat(e);return n.charAt(0).toLowerCase()+n.slice(1)}var At=function(){function e(){this.debugMode=!0,this.options=r(r({},Le),{timezoneOffset:0,env:"",disableIframeId:!1}),this.interceptor={},this.setServerRn()}return e.prototype.setOptions=function(e){this.options=r(r({},this.options),e),-1!==Ae.indexOf(this.options.env)&&this.setDebugMode(!1)},e.prototype.getOptions=e.prototype.setDebugMode=e.prototype.initInstance=function(e){void 0===e&&(e={});var t=_e;return t&&t.default&&(t=t.default),t(r(r(r({},this.options),e),{domain:"".concat(window.location.host,"/eclytics")}))},e.prototype.use=function(e,t){switch(e){case"url":case"request":this.interceptor[e]=t;break;default:this.instance?this._instanceUse(e,t):this.interceptor[e]=t}},e.prototype._instanceUse=function(e,t,n){void 0===n&&(n=this.instance),n&&(n.use(e,t),["httpInstance","beaconInstance"].forEach(())},e.prototype._interceptorUse=function(e){var t=this;void 0===e&&(e=this.instance),Object.keys(this.interceptor).filter(().forEach((function(n){"function"==typeof t.interceptor[n]&&t._instanceUse(n,t.interceptor[n],e)}))},e.prototype._useRequestCallback=function(e){var t,n=this.options.timeOffset;if(n){var o=e.event_created_at_ms,i=e.request_time,a=null===(t=e.moreinfo)||void 0===t?void 0:t.event_created_at_ms;a&&(e.moreinfo.event_created_at_ms=String(a-n)),e.event_created_at_ms=o?o-n:void 0,e.request_time=i-n,e.time=Math.ceil(e.request_time/1e3)}if(e.act===Ie)return e;var s=r(r({},e),{event_sent_at_ms:e.request_time});return delete s.request_time,s.$data_id&&(s.data_id=s.$data_id,delete s.$data_id),s},e.prototype.getInstance=function(){var e=this;if(!this.instance){this.instance=this.initInstance();var t=Et();this._instanceUse("url",(function(n,r,o){"function"==typeof e.interceptor.url&&(n=e.interceptor.url(n,r,o));var i=Ot.getSession().value;if(i&&i.sid){var a=i.sid,s=i.createAt,c=[].concat(r),u=It(c);return"".concat(n).concat(-1===n.indexOf("?")?"?":"&","_sid=").concat(a,"&_sct=").concat(s,"&_tid=").concat(t,"&_pdppv=").concat(u,"&_bcount=").concat(c.length)}return n})),this._instanceUse("request",this._useRequestCallback.bind(this)),this._interceptorUse()}return this.instance},e.prototype.getServerInstance=function(){var e=this;if(!this.serverInstance){this.serverInstance=this.initInstance({skipReport:!0});var t=Et(),n=this.serverInstance;this._instanceUse("url",(function(n,r,o){"function"==typeof e.interceptor.url&&(n=e.interceptor.url(n,r,o));var i=Rt(),a=n.substring(n.indexOf("?")+1))._pid,s=void 0===a?"":a;if(i){var c=[].concat(r),u=i.session_id,d=i.created_at,l=(xt.get(xe)||{}).rn,p=c.map((function(e){var n=e.source,r=It(e),o={_pid:s,_act:"".concat(n.act,"_").concat(n.event_id||-999),_sid:u,_sct:d,_tid:t,_pdppv:r,_bcount:1},i=Object.keys(o).reduce((,"");return n.session_rn=l||void 0,l&&(l+=1),delete n.$data_id,{query:i.replace("&",""),data:n}}));xt.set(xe,{sid:u,rn:l});var f=V({timezoneOffset:e.options.timezoneOffset||0,payload:p});e.serverInstance.send("/capture/bp",f)}}),n),this._instanceUse("request",(function(t){return e._useRequestCallback(t)}),n),this._interceptorUse(n)}return this.serverInstance},e.prototype.reportV2=function(t,n){return o(this,void 0,void 0,(function(){function o(e,t){var n=c?null==e?void 0:e.httpInstance.report(t,u):null==e?void 0:e.report(t,u);return s&&e.post(),n}var a,s,c,u,d,l,p,f,v,h,m,g,y,_,w,b,S,k,T,x,O,L,E,R,I,P,A,C,j,D,M,V,U,N,H,q,B,F,z,J,K,G,W,Y;return i(this,(function(i){return s=(a=n||{}).immediately,c=a.isHttpReport,u=a.reportNow,d=a.ignoreLanding,l=void 0!==d&&d,p=a.actFields,f=t.app_id,v=t.http_cookie,h=t.session_id,m=t.session_create_time,g=t.session_rn,y=t.last_session_id,_=t.session_create_type,w=t.store_id,b=t.action_type,S=void 0===b?Pe:b,k=t.module,T=void 0===k?Pe:k,x=t.page,O=void 0===x?Pe:x,L=t.component,E=void 0===L?Pe:L,R=t.store_timezone,I=t.user_timezone,P=t.store_region,A=t.event_created_at_ms,C=t.device_token,j=t.ua_info,D=t.event_id,M=t.event_name,V=t.data_id,U=t.moreinfo,N=void 0===U?{}:U,H=t,["app_id","http_cookie","session_id","session_create_time","session_rn","last_session_id","session_create_type","store_id","action_type","module","page","component","store_timezone","user_timezone","store_region","event_created_at_ms","device_token","ua_info","event_id","event_name","data_id","moreinfo"]),q=Lt(H,De),B=Lt(N,De),F=l?0:this._getSessionCreateDataId({sid:h,isCollect:!0}),z=r(r(r(r({project_id:Ee,app_id:f,act:Re,http_cookie:v,session_id:h,session_create_time:m,session_rn:g,last_session_id:y,session_create_type:_,store_id:w,action_type:S,module:T,page:O,component:E,store_timezone:R,user_timezone:I,store_region:P,event_created_at_ms:A,event_id:D,event_name:M,device_token:C,ua_info:j,env:this.options.env},B),q),p),{moreinfo:r(r(r({},N),H),{session_create_data_id:F})}),J=e.encodeParams(z),K=z.moreinfo,J.moreinfo=JSON.stringify(K),this.debugMode&&(console.groupCollapsed("Tracker Debug(reportV2):Wait Mode:".concat(this.options.wait,".event_id:").concat(D," immediately:").concat(!!s," isHttpReport:").concat(!!c," reportNow:").concat(!!u)),console.table(t),console.groupEnd()),-1===Ae.indexOf(this.options.env)?[2,Promise.resolve()]:(G=[],V&&(J.$data_id=V),W=this.getInstance(),J.is_server=0,G.push(o(W,J)),V&&(Y=this.getServerInstance(),je.forEach((function(e){K["web_".concat(e)]=J[e],delete J[e]})),J.moreinfo=JSON.stringify(K),J.is_server=1,G.push(o(Y,J))),[2,Promise.all(G)])}))}))},e.prototype.reportJudge=function(){return Promise.resolve()},e.prototype.getDataId=e.prototype.setServerRn=function(){try{var e=Rt(),t=(xt.get(xe)||{}).sid,n=(e||{}).session_id;n&&n!==t&&xt.set(xe,{sid:n,rn:1})}catch(e){console.error(e)}},e.prototype._getSessionCreateDataId=function(e){var t,n,r=e.sid,o=e.isCollect,i=void 0!==o&&o,a=xt.get(Ce),s=(null==a?void 0:a[r])||[];if(!s||!Array.isArray(s))return 0;var c=s[0],u=s[1];return i&&!u?(xt.set(Ce,((t={})[r]=[c,1],t)),1):i||c?0:(xt.set(Ce,((n={})[r]=[1,u],n)),1)},e.encodeParams=function(e){return Object.keys(e).reduce((function(t,n){try{t[n]=encodeURIComponent(e[n]||"")}catch(r){console.error("[tracker] encodeURIComponent params error:",r),t[n]=e[n]}return t}),{})},e}(),Ct="1.6.34";ar Dt=function(){function e(e){this.exposedElements=new Set,this.collect=null,(null===window||void 0===window?void 0:window.SL_Report)||(window.SL_Report={}),window.SL_Report.exposeMap||(window.SL_Report.exposeMap=new Map),this.collect=e}return e.prototype.init=function(){var e=this;if(!window.SL_Report.exposeObserver){var t={threshold:Array.from(Array(11).keys()).map((),root:null,rootMargin:"0px"};window.SL_Report.exposeObserver=new IntersectionObserver((function(t){t.forEach((function(t){var n,r,o=t.isIntersecting,i=t.intersectionRatio,a=t.boundingClientRect,s=t.time,c=t.target,u=c.dataset.__trackerSelector||"",d=(null===(n=window.SL_Report.exposeMap)||void 0===n?void 0:n.get(u))||{},l=d.view,p=d.viewSuccess,f=(p||{}).threshold,v=void 0===f?.5:f,h=a.height>window.innerHeight;h&&(c.dataset.__trackerSuperLong="1"),o&&p&&(i>=v||h)?c.dataset.__trackerViewSucceed||c.dataset.__trackerViewSuccessOnce||(c.dataset.__trackerLastViewStarted=String(s),c.dataset.__trackerViewSucceed="1",e.exposedElements.add(c),(null===(r=window.SL_Report)||void 0===r?void 0:r.exposeTimer)||e.checkTimer({element:c})):(e.resetTime(c),delete c.dataset.__trackerViewSucceed,e.exposedElements.delete(c)),o&&l&&i>=0?c.dataset.__trackerViewed||c.dataset.__trackerViewOnce||(e.reportView(c,l),c.dataset.__trackerViewed="1",l.reportOnce&&(c.dataset.__trackerViewOnce="1")):delete c.dataset.__trackerViewed}))}),t)}},e.prototype.reportView=function(e,t){var n,o=(t||{}).params,i=void 0===o?{}:o;"function"==typeof i&&(i=i(e)),null===(n=this.collect)||void 0===n||n.call(this,r({event_name:"View",action_type:101},i))},e.prototype.reportViewSuccess=function(e,t){var n,o=(t||{}).params,i=void 0===o?{}:o;"function"==typeof i&&(i=i(e)),null===(n=this.collect)||void 0===n||n.call(this,r({event_name:"ViewSuccess",action_type:108},i))},e.prototype.track=function(e){var t=this,n=e.selector,r=e.targetList;if(n||(null==r?void 0:r.length)){var o=Math.random().toString(32).slice(2),i=r?'[data-__tracker-id="'.concat(o,'"]'):n;window.SL_Report.exposeObserver||this.init();var a=window.SL_Report,s=a.exposeObserver,c=a.exposeMap;this.checkTimer({options:e}),(r||document.querySelectorAll(n)).forEach((function(e){t.resetTime(e),e.dataset.__trackerSelector=i||n,(null==r?void 0:r.length)&&(e.dataset.__trackerId=o),s.observe(e)})),c.set(i,e)}},e.prototype.checkTimer=function(e){var t,n=this,r=e.element,o=e.options;if(window.SL_Report.exposeMap){var i=o;if(!i){var a=(null==r?void 0:r.dataset.__trackerSelector)||"";i=window.SL_Report.exposeMap.get(a)}var s=this.getTimeout(i);clearTimeout(null===(t=window.SL_Report)||void 0===t?void 0:t.exposeTimer);var c=function(){window.SL_Report.exposeTimer=window.setTimeout((function(){!n.handleRefreshTimeout()&&c()}),s)};c()}},e.prototype.handleRefreshTimeout=function(){var e=this;if(!this.exposedElements.size)return clearTimeout(window.SL_Report.exposeTimer),delete window.SL_Report.exposeTimer,!0;var t=window.SL_Report,n=t.exposeMap,r=t.exposeObserver;n&&this.exposedElements.forEach((function(t){var o=t.dataset,i=o.__trackerTotalViewTime,a=void 0===i?0:i,s=o.__trackerSelector,c=void 0===s?"":s,u=o.__trackerSuperLong,d=document.querySelectorAll(c);if(!Array.from(d).some(())return e.exposedElements.delete(t),void r.unobserve(t);var l=(n.get(c)||{}).viewSuccess,p=void 0===l?{}:l,f=p.threshold,v=void 0===f?.5:f;if(u){var h=t.getBoundingClientRect(),m=h.top,g=h.height;if(m+g<0)return e.resetTime(t);if((window.innerHeight-m)/g<v)return e.resetTime(t)}e.updateExposeTimer(t),a>=(p.duration||300)&&(e.reportViewSuccess(t,p),e.resetTime(t),e.exposedElements.delete(t),p.reportOnce&&(t.dataset.__trackerViewSuccessOnce="1"))}))},e.prototype.updateExposeTimer=function(e){var t=+(e.dataset.__trackerLastViewStarted||0),n=performance.now();if(t){var r=n-t;e.dataset.__trackerTotalViewTime=String(parseFloat(e.dataset.__trackerTotalViewTime)+r)}e.dataset.__trackerLastViewStarted=String(n)},e.prototype.getTimeout=function(e){var t,n=window.SL_Report.exposeMap;if(!n)return 1e3;var r=Array.from(n.values()).map((function(e){var t;return((null===(t=e.viewSuccess)||void 0===t?void 0:t.duration)||300)/2})),o=Math.min.apply(Math,a(a([],r,!1),[1e3,((null===(t=null==e?void 0:e.viewSuccess)||void 0===t?void 0:t.duration)||300)/2],!1));return o>100?o:100},e.prototype.resetTime=e}();var Mt=Vt="object"==typeof C&&C&&C.Object===Object&&C,Ut="object"==typeof self&&self&&self.Object===Object&&self,Nt=Vt||Ut||Function("return this")(),Ht=qt=/\s/;var Bt=Ft=/^\s+/;var zt=Jt=Nt.Symbol,Kt=Object.prototype,Gt=Kt.hasOwnProperty,Wt=Kt.toString,Yt=Jt?Jt.toStringTag:void 0;var $t=Xt=Object.prototype.toString;var Qt=Zt=Jt?Jt.toStringTag:void 0;var en=var tn=var nn=rn=/^[-+]0x[0-9a-f]+$/i,on=/^0b[01]+$/i,an=/^0o[0-7]+$/i,sn=parseInt;var cn=un=Math.max,dn=Math.min;var ln=var pn=var fn=new(function(e){function n(){var t,n=this;return(n=e.call(this)||this).pageViewTime=Date.now(),n.maxScrollTop=0,n.skipOnSessionUpdate=!1,n.beginSessionId="",n.heartbeatIds=[],n.exposeInstance=null,n.destUrlLock=!1,n.pageLeaveLock=!1,(null===(t=window.SL_Report)||void 0===t?void 0:t.skipSelfInit)||n.init(),n}return n,e),n.prototype.setMode=function(e){"debug"===e?this.setDebugMode(!0):this.setDebugMode(!1)},n.prototype.getBaseParams=function(e){return o(this,void 0,void 0,(function(){var t,n,r,o,a,s,c,u,d,l,p,f,v,h,m,g;return i(this,(function(i){switch(i.label){case 0:return 1,t=this.getOptions(),n=t.timezoneOffset,r=void 0===n?0:n,o=t.handleBaseParams,a=t.disableIframeId,s=t.timeOffset,c=void 0===s?0:s,d=(u=e||{}).ignoreSession,l=void 0!==d&&d,p=u.ignoreSessionRn,f=void 0!==p&&p,v=u.session,h={version:Ct,iframe_id:1,http_cookie:Ot.getHttpCookie(),url_path:Ot.getUrlPath(),language:Ot.getLanguage(),is_mobile:Ot.getIsMobile(),merchant_id:Ot.getMerchantId(),user_id:Ot.getUserId(),http_search:Ot.getHttpSearch(),title:Ot.getTitle(),store_id:Ot.getStoreId(),website:Ot.getWebsite(),loading_time:Ot.getPerformance().load,event_created_at_ms:+new Date,screen_width:Ot.getScreenWidth(),screen_height:Ot.getScreenHeight()},l||(m=(null==v?void 0:v.sid)?v:Ot.getSessionId(30,r,c),g=f?void 0:Ot.upsetSessionRn(m),h.session_id=m.sid,h.session_create_time=m.createAt,h.session_rn=g,h.last_session_id=m.last_session_id,h.session_create_type=m.session_create_type),a&&delete h.iframe_id,o&&"function"==typeof o?[4,o(h)]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2,h]}}))}))},n.prototype.formatParams=function(e){var t=r({},e);if(t.products&&Array.isArray(t.products)){var n=["product_type","product_id","variantion_id","product_name","product_price","position","status","quantity","update_quantity","price"];t.products.forEach((function(e){n.forEach(()})),delete t.products}return Object.entries(t).forEach((function(e){var n=e[0],r=e[1],o=r;n in h&&(Array.isArray(r)?m.indexOf(n)>-1&&(o=(r||[]).map(().join(",")):o=h[n][r]||r),Array.isArray(o)&&(o=o.join(",")),t[n]=o})),t},n.prototype.setDefaultEventId=function(e){var t=e.event_name,n=void 0===t?"":t,o=e.event_id,i=e.action_type;if(g.includes(n)){var a=Pe,s=o?Pt(o):"".concat(Pt(n)).concat(Date.now(),"_").concat(f().replace(/-/g,""));return y.includes(n)&&(a=i||a),r(r({},e),{action_type:a,event_id:s})}return e},n.prototype.collect=function(e,t){var n;return void 0===t&&(t={}),o(this,void 0,void 0,(function(){var o,a,s,c,u,d,l,p,f,h,m,g;return i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,6,,7]),navigator.userAgent.indexOf("SL2ShopperApp")>-1?[2,Promise.resolve()]:(o=this.getOptions(),a=o.beforeSend,s=o.onSessionUpdate,c=o.timezoneOffset,u=o.timeOffset,d=(null===(n=xt.getRaw(be))||void 0===n?void 0:n.value)||null,l=xt.isExpired(be),p=String(e.action_type||"")===v.heartbeat,[4,this.getBaseParams({ignoreSession:t.ignoreSession,ignoreSessionRn:p})]);case 1:return f=i.sent(),h=r(r({},f),this.setDefaultEventId(e)),a&&"function"==typeof a?[4,a(h)]:[3,3];case 2:h=i.sent(),i.label=3;case 3:return!this.skipOnSessionUpdate&&l&&d&&"function"==typeof s?(m=Ot.getSessionId(30,c,u),this.skipOnSessionUpdate=!0,[4,s(d,m)]):[3,5];case 4:i.sent(),this.skipOnSessionUpdate=!1,i.label=5;case 5:return t.ignoreLanding=p,[2,this.reportV2(h,t)];case 6:throw g=i.sent(),this.skipOnSessionUpdate=!1,console.error("collect tracker error:",g),g;case 7:return[2]}}))}))},n.prototype.report=n.prototype.setPageViewTime=function(e){void 0===e&&(e=+new Date),this.pageViewTime=e},n.prototype.init=function(){var e,t,n=this;if("undefined"!=typeof window&&(window.SL_Report=window.SL_Report||{},!(null===(e=window.SL_Report)||void 0===e?void 0:e.init))){window.SL_Report.init=!0;var r,a,s,c,u=function(e){var t=Array.from(e),r=t[0],o=t.slice(1),i=n[r];"function"==typeof i&&i.apply(n,o)},d="setOptions";try{(r=window.SL_Report.queue||[],a=d,null==r?void 0:r.filter(()).forEach(u),null===(t=window.SL_Report.queue)||void 0===t||t.forEach((function(e){return e[0]!==d&&u(e)})),window.SL_Report.queue=[]}catch(e){console.error(e)}s=function(){return n.pageView()},document.removeEventListener("DOMContentLoaded",s),"loading"!==document.readyState?setTimeout(s,1):document.addEventListener("DOMContentLoaded",(),!function(e){window.removeEventListener("scroll",e),window.addEventListener("scroll",e,!1)}(pn((function(){return n.recordScrollTop()}),100)),(function(e){var t,r;return"A"!==(null===(r=null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.activeElement)||void 0===r?void 0:r.tagName)&&n.pageLeave()})),{visibleHandler:jt((c={visible:function(){return n.setPageViewTime()},hidden:).visible)?c.visible:function(){},hiddenHandler:jt(c.hidden)?c.hidden:visibilityChange:"",hidden:"",isSupport:init:listen:function(){if(this.isSupport()){var e=this;document.addEventListener(this.visibilityChange,(,!0)}else window.addEventListener("focus",this.visibleHandler),window.addEventListener("blur",this.hiddenHandler)}}.init();document.addEventListener("click",(function(e){if(!n.destUrlLock)for(var t=function(e){if(e.path)return e.path;if("function"==typeof e.composedPath)return e.composedPath();for(var t=[],n=e.target;n&&null!==n.parentNode;)t.push(n),n=n.parentNode;return t.push(document,window),t}(e),r=t.length-1;r>=0;r--){var o=t[r];if(o&&1===o.nodeType&&"a"===o.nodeName.toLowerCase()&&/^https?:\/\//.test(o.href)){n.pageLeave({params:{page_dest_url:o.href}}),n.pageLeaveLock=!0,setTimeout((function(){n.pageLeaveLock=!1}),100);break}}})),this.setOptions({onSessionUpdate:function(e){return o(n,void 0,void 0,(function(){return i(this,(function(t){return[2,this.pageDuration({session:e})]}))}))}})}},n.prototype.pageView=function(e){var t=void 0===e?{}:e,n=t.params,a=t.session;return o(this,void 0,void 0,(function(){return i(this,(function(e){return this.setPageViewTime(),Ot.getWebVitals(),this.beginSessionId=(null==a?void 0:a.sid)||Ot.getRawSessionId(),[2,this.collect(r({event_name:"PageView"},n),{session:a})]}))}))},n.prototype.pageLeave=function(e){var t=void 0===e?{}:e,n=t.params,a=t.session;return o(this,void 0,void 0,(function(){var e,t,o;return i(this,(function(i){return this.pageLeaveLock?[2,Promise.resolve()]:(e=this.getMaxHeightParams(),t=this.collect(r(r(r({event_name:"PageLeave"},e),n),Ot.webVitals),{session:a}),o=this.pageDuration({isPageLeave:!0,params:n}),this.destroy(),[2,Promise.all([t,o])])}))}))},n.prototype.pageDuration=function(e){var t=void 0===e?{}:e,n=t.params,a=t.session,s=t.isPageLeave,c=void 0!==s&&s;return o(this,void 0,void 0,(function(){var e,t,o,s;return i(this,(function(i){return this.pageLeaveLock?[2,Promise.resolve()]:(e="",t=(+new Date-this.pageViewTime)/1e3,(isNaN(t)||t<0)&&(t=0),t=Number(t.toFixed(3)),t=Math.min(t,1800),o=this.getMaxHeightParams(),c&&(e=Ot.getRawSessionId()),s=this.collect(r(r({event_name:"PageDuration",event_duration:t,begin_session:this.beginSessionId||Ot.getRawSessionId(),end_session:e},o),n),{session:a}),this.setPageViewTime(),[2,s])}))}))},n.prototype.heartbeat=function(e,t){return void 0===t&&(t=2e3),o(this,void 0,void 0,(function(){var n,o=this;return i(this,(function(i){return n=window.setInterval((function(){o.collect(r({event_name:"HeartBeat"},e)),o.heartbeatIds.push(n)}),t),[2]}))}))},n.prototype.expose=function(e){return o(this,void 0,void 0,(function(){return i(this,(function(t){return this.exposeInstance||(this.exposeInstance=new Dt(this.collect.bind(this))),this.exposeInstance.track(e),[2]}))}))},n.prototype.onPageChange=function(e,t){return o(this,void 0,void 0,(function(){var n=this;return i(this,(function(r){return this.destUrlLock=!0,setTimeout((,100),[2,Promise.all([this.pageLeave({params:e}),this.pageView({params:t})])]}))}))},n.prototype.recordScrollTop=function(){var e=document.documentElement.scrollTop;e>this.maxScrollTop&&(this.maxScrollTop=e)},n.prototype.getMaxHeightParams=function(){var e=document.documentElement||document.body,t=e?((this.maxScrollTop+e.clientHeight)/(null==e?void 0:e.scrollHeight)*100).toFixed(2):0;return{max_height:this.maxScrollTop,max_height_pc:t}},n.prototype.destroy=function(){var e;this.pageViewTime=Date.now(),this.maxScrollTop=0,this.skipOnSessionUpdate=!1,this.beginSessionId="",this.heartbeatIds.forEach((),this.heartbeatIds=[],(null===(e=window.SL_Report)||void 0===e?void 0:e.exposeObserver)&&(window.SL_Report.exposeObserver.disconnect(),window.SL_Report.exposeObserver=void 0)},n}(At));e.SDK_VERSION=Ct,e.baseParams=Ot,e.constants=Me,e.shopTracker=fn,e.storage=xt,e.tracker=At,Object.defineProperty(e,"__esModule",{value:!0})}));
