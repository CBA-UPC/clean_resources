/**
 * @copyright (c) 2011, Yahoo! Inc.  All rights reserved.
 * @copyright (c) 2012, Log-Normal, Inc.  All rights reserved.
 * @copyright (c) 2012-2017, SOASTA, Inc. All rights reserved.
 * @copyright (c) 2017-2019, Akamai Technologies, Inc. All rights reserved.
 * Copyrights licensed under the BSD License. See the accompanying LICENSE.txt file for terms.
 */
function QTABMR_check_doc_domain(e){var t;if(window){if(!e){if(window.parent===window||!document.getElementById("boomr-if-as"))return;if(window.QTABMR&&QTABMR.boomerang_frame&&QTABMR.window)try{QTABMR.boomerang_frame.document.domain!==QTABMR.window.document.domain&&(QTABMR.boomerang_frame.document.domain=QTABMR.window.document.domain)}catch(n){QTABMR.isCrossOriginError(n)||QTABMR.addError(n,"QTABMR_check_doc_domain.domainFix")}e=document.domain}if(e&&-1!==e.indexOf(".")&&window.parent){try{return t=window.parent.document,void 0}catch(n){try{document.domain=e}catch(r){return}}try{return t=window.parent.document,void 0}catch(n){e=e.replace(/^[\w\-]+\./,"")}QTABMR_check_doc_domain(e)}}}QTABMR_start=(new Date).getTime(),QTABMR_check_doc_domain(),function(e){var t,n,r,i,o,a,s,u=e;if(e.parent!==e&&document.getElementById("boomr-if-as")&&"script"===document.getElementById("boomr-if-as").nodeName.toLowerCase()&&(e=e.parent),r=e.document,e.QTABMR||(e.QTABMR={}),QTABMR=e.QTABMR,!QTABMR.version){if(QTABMR.version="1.0.0",QTABMR.window=e,QTABMR.boomerang_frame=u,QTABMR.plugins||(QTABMR.plugins={}),function(){try{void 0!==new e.CustomEvent("CustomEvent")&&(i=}catch(t){}try{!i&&r.createEvent&&r.createEvent("CustomEvent")&&(i=}catch(t){}!i&&r.createEventObject&&(i=,i||(i=}(),o="undefined"!=typeof r.hidden?(a="visibilityState",s="visibilitychange"):"undefined"!=typeof r.mozHidden?(a="mozVisibilityState",s="mozvisibilitychange"):"undefined"!=typeof r.msHidden?(a="msVisibilityState",s="msvisibilitychange"):"undefined"!=typeof r.webkitHidden&&(a="webkitVisibilityState",s="webkitvisibilitychange"),t={beacon_url:"",beacon_url_force_https:!0,beacon_urls_allowed:[],beacon_type:"AUTO",beacon_auth_key:"Authorization",beacon_auth_token:void 0,beacon_with_credentials:!1,beacon_disable_sendbeacon:!1,site_domain:e.location.hostname.replace(/.*?([^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),user_ip:"",autorun:!0,hasSentPageLoadBeacon:!1,r:void 0,same_site_cookie:"Lax",secure_cookie:!1,forced_same_site_cookie_none:!1,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],visibility_changed:[],prerender_to_visible:[],before_beacon:[],beacon:[],page_load_beacon:[],xhr_load:[],click:[],form_submit:[],config:[],xhr_init:[],spa_init:[],spa_navigation:[],spa_cancel:[],xhr_send:[],xhr_error:[],error:[],netinfo:[],rage_click:[],before_early_beacon:[]},public_events:{before_beacon:"onBeforeQtaBoomerangBeacon",beacon:"onQtaBoomerangBeacon",onboomerangloaded:"onQtaBoomerangLoaded"},translate_events:{onbeacon:"beacon",onconfig:"config",onerror:"error",onxhrerror:"xhr_error"},unloadEventsCount:0,unloadEventCalled:0,listenerCallbacks:{},vars:{},singleBeaconVars:{},varPriority:{"-1":{},1:{}},errors:{},disabled_plugins:{},localStorageSupported:!1,LOCAL_STORAGE_PREFIX:"_boomr_",nativeOverwrites:[],xb_handler:function(n){return function(r){var i;r||(r=e.event),r.target?i=r.target:r.srcElement&&(i=r.srcElement),3===i.nodeType&&(i=i.parentNode),i&&i.nodeName&&"OBJECT"===i.nodeName.toUpperCase()&&"application/x-shockwave-flash"===i.type||t.fireEvent(n,i)}},clearEvents:clearListeners:fireEvent:function(e,t){var n,r,i,a;if(e=e.toLowerCase(),this.translate_events[e]&&(e=this.translate_events[e]),this.events.hasOwnProperty(e)){for(this.public_events.hasOwnProperty(e)&&o(this.public_events[e],t),i=this.events[e],"before_beacon"!==e&&"beacon"!==e&&"before_early_beacon"!==e&&QTABMR.real_sendBeacon(),a=i.length,n=0;a>n;n++)try{r=i[n],r.fn.call(r.scope,t,r.cb_data)}catch(s){QTABMR.addError(s,"fireEvent."+e+"<"+n+">")}for(n=0;a>n;n++)i[n].once&&(i.splice(n,1),a--,n--)}},spaNavigation:function(){t.onloadfired=!0},beaconUrlAllowed:function(e){if(!t.beacon_urls_allowed||0===t.beacon_urls_allowed.length)return!0;for(var n=0;n<t.beacon_urls_allowed.length;n++){var r=new RegExp(t.beacon_urls_allowed[n]);if(r.exec(e))return!0}return!1},checkLocalStorageSupport:function(){var n=t.LOCAL_STORAGE_PREFIX+"clss";t.localStorageSupported=!1;try{if(!e.JSON||!e.localStorage)return;e.localStorage.setItem(n,n),t.localStorageSupported=e.localStorage.getItem(n)===n,e.localStorage.removeItem(n)}catch(r){t.localStorageSupported=!1}},onFrameUnloaded:function(){var e,n;for(QTABMR.isUnloaded=!0,e=0;e<t.nativeOverwrites.length;e++)n=t.nativeOverwrites[e],n.obj[n.functionName]=n.origFn;t.nativeOverwrites=[]}},n={t_start:QTABMR_start,t_end:void 0,url:"",config_url:null,loadedLate:!1,beaconsSent:0,isUnloaded:!1,beaconInQueue:!1,cookies:{},testedCookies:!1,constants:{BEACON_TYPE_SPAS:["spa","spa_hard"],MAX_GET_LENGTH:2e3},session:{domain:t.site_domain,ID:void 0,start:void 0,length:0,enabled:!0},utils:{hasPostMessageSupport:objectToString:function(e,t,n){var r,i=[];if(!e||"object"!=typeof e)return e;if(void 0===t&&(t="\n	"),n||(n=0),QTABMR.utils.isArray(e)){for(r=0;r<e.length;r++)n>0&&null!==e[r]&&"object"==typeof e[r]?i.push(this.objectToString(e[r],t+("\n	"===t?"	":""),n-1)):"&"===t?i.push(encodeURIComponent(e[r])):i.push(e[r]);t=","}else for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n>0&&null!==e[r]&&"object"==typeof e[r]?i.push(encodeURIComponent(r)+"="+this.objectToString(e[r],t+("\n	"===t?"	":""),n-1)):"&"===t?i.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r])):i.push(r+"="+e[r]));return i.join(t)},getCookie:function(e){var t;return e?"undefined"!=typeof QTABMR.cookies[e]?QTABMR.cookies[e]===!1?void 0:QTABMR.cookies[e]:(t=this.getRawCookie(e),"undefined"==typeof t?(QTABMR.cookies[e]=!1,void 0):(QTABMR.cookies[e]=t,QTABMR.cookies[e])):null},getRawCookie:function(e){if(!e)return null;e=" "+e+"=";var t,n;return n=" "+r.cookie+";",(t=n.indexOf(e))>=0?(t+=e.length,n.substring(t,n.indexOf(";",t)).replace(/^"/,"").replace(/"$/,"")):void 0},setCookie:function(e,n,i){var o,a,s,u,c;if(!e||!QTABMR.session.domain||"undefined"==typeof n)return QTABMR.debug("Invalid parameters or site domain: "+e+"/"+n+"/"+QTABMR.session.domain),QTABMR.addVar("nocookie",1),!1;if(o=this.objectToString(n,"&"),o===QTABMR.cookies[e])return!0;if(a=e+'="'+o+'"',a.length<500){u=[a,"path=/","domain="+QTABMR.session.domain],"number"==typeof i&&(c=new Date,c.setTime(c.getTime()+1e3*i),c=c.toGMTString(),u.push("expires="+c));var d=this.getSameSiteAttributeParts();if("https:"===location.protocol&&t.secure_cookie===!0&&-1===d.indexOf("Secure")&&d.push("Secure"),u=u.concat(d),r.cookie=u.join("; "),QTABMR.testedCookies)return QTABMR.cookies[e]="number"!=typeof i||i>0?o:void 0,!0;if(QTABMR.cookies[e]=void 0,s=this.getRawCookie(e),o===s||"undefined"==typeof s&&"number"==typeof i&&0>=i)return QTABMR.cookies[e]=o,QTABMR.testedCookies=!0,QTABMR.removeVar("nocookie"),!0;QTABMR.warn("Saved cookie value doesn't match what we tried to set:\n"+o+"\n"+s)}else QTABMR.warn("Cookie too long: "+a.length+" "+a);return QTABMR.addVar("nocookie",1),!1},getSubCookies:function(e){var t,n,r,i,o=!1,a={};if(!e)return null;if("string"!=typeof e)return QTABMR.debug("TypeError: cookie is not a string: "+typeof e),null;for(t=e.split("&"),n=0,r=t.length;r>n;n++)i=t[n].split("="),i[0]&&(i.push(""),a[decodeURIComponent(i[0])]=decodeURIComponent(i[1]),o=!0);return o?a:null},removeCookie:getSameSiteAttributeParts:function(){var e=t.same_site_cookie.toUpperCase();return t.forced_same_site_cookie_none&&(e="NONE"),"LAX"===e?["SameSite=Lax"]:"NONE"===e?"https:"===location.protocol&&this.isCurrentUASameSiteNoneCompatible()?["SameSite=None","Secure"]:[]:"STRICT"===e?["SameSite=Strict"]:["SameSite=Lax"]},getLocalStorage:function(n){var r,i;if(!n||!t.localStorageSupported)return null;try{if(r=e.localStorage.getItem(t.LOCAL_STORAGE_PREFIX+n),null===r)return void 0;i=e.JSON.parse(r)}catch(o){return QTABMR.warn(o),null}return i&&"object"==typeof i.items?"number"==typeof i.expires&&QTABMR.now()>=i.expires?(this.removeLocalStorage(n),void 0):i.items:(this.removeLocalStorage(n),null)},setLocalStorage:function(n,r,i){var o,a,s;if(!n||!t.localStorageSupported||"object"!=typeof r)return!1;if(o={items:r},"number"==typeof i&&(o.expires=QTABMR.now()+1e3*i),a=e.JSON.stringify(o),a.length<5e4){try{if(e.localStorage.setItem(t.LOCAL_STORAGE_PREFIX+n,a),s=e.localStorage.getItem(t.LOCAL_STORAGE_PREFIX+n),a===s)return!0}catch(u){}QTABMR.warn("Saved storage value doesn't match what we tried to set:\n"+a+"\n"+s)}else QTABMR.warn("Storage items too large: "+a.length+" "+a);return!1},removeLocalStorage:function(n){if(!n||!t.localStorageSupported)return!1;try{return e.localStorage.removeItem(t.LOCAL_STORAGE_PREFIX+n),!0}catch(r){}return!1},cleanupURL:function(e,n){if(!e||QTABMR.utils.isArray(e))return"";if(t.strip_query_string&&(e=e.replace(/\?.*/,"?qs-redacted")),"undefined"!=typeof n&&e&&e.length>n){var r=e.indexOf("?");e=-1!==r&&n>r?e.substr(0,r)+"?...":e.substr(0,n-3)+"..."}return e},hashQueryString:function(e,t){return e?e.match?(e.match(/^\/\//)&&(e=location.protocol+e),e.match(/^(https?|file):/)?(t&&(e=e.replace(/#.*/,"")),e.replace(/\?([^#]*)/,):(QTABMR.error("Passed in URL is invalid: "+e),"")):(QTABMR.addError("TypeError: Not a string","hashQueryString",typeof e),""):e},pluginConfig:function(e,t,n,r){var i,o=0;if(!t||!t[n])return!1;for(i=0;i<r.length;i++)void 0!==t[n][r[i]]&&(e[r[i]]=t[n][r[i]],o++);return o>0},arrayFilter:function(e,t){var n=[];if(!(this.isArray(e)||e&&"number"==typeof e.length)||"function"!=typeof t)return n;if("function"==typeof e.filter)n=e.filter(t);else for(var r,i=-1,o=e.length;++i<o;)r=e[i],t(r,i,e)&&(n[n.length]=r);return n},arrayFind:function(e,t){if(!(this.isArray(e)||e&&"number"==typeof e.length)||"function"!=typeof t)return void 0;if("function"==typeof e.find)return e.find(t);for(var n,r=-1,i=e.length;++r<i;)if(n=e[r],t(n,r,e))return n;return void 0},isMutationObserverSupported:function(){var t=e&&e.navigator&&e.navigator.userAgent&&e.navigator.userAgent.match(/Trident.*rv[ :]*11\./);return!t&&e&&e.MutationObserver&&"function"==typeof e.MutationObserver},addObserver:function(t,n,r,i,o,a){function s(e){var t=!1;d.timer&&(clearTimeout(d.timer),d.timer=null),i&&(t=i.call(a,e,o),t||(i=null)),!t&&d.observer&&(d.observer.disconnect(),d.observer=null),"number"==typeof t&&t>0&&(d.timer=setTimeout(s,t))}var u,c,d={observer:null,timer:null};return this.isMutationObserverSupported()&&i&&t?(u=e.MutationObserver,e.Zone&&"function"==typeof e.Zone.__symbol__&&(c=e.Zone.__symbol__("MutationObserver"),c&&"string"==typeof c&&e.hasOwnProperty(c)&&"function"==typeof e[c]&&(QTABMR.debug("Detected Zone.js, using native MutationObserver"),u=e[c])),d.observer=new u(s),r&&(d.timer=setTimeout(s,d.timeout)),d.observer.observe(t,n),d):null},addListener:function(e,n,r,i){var o=!1;e.addEventListener?("object"==typeof i?o=i:"boolean"==typeof i&&i&&QTABMR.browser.supportsPassive()&&(o={capture:!1,passive:!0}),e.addEventListener(n,r,o)):e.attachEvent&&e.attachEvent("on"+n,r),t.listenerCallbacks[n]=t.listenerCallbacks[n]||[],t.listenerCallbacks[n].push({el:e,fn:r})},removeListener:function(e,n,r){var i;if(e.removeEventListener?e.removeEventListener(n,r,!1):e.detachEvent&&e.detachEvent("on"+n,r),t.listenerCallbacks.hasOwnProperty(n))for(var i=0;i<t.listenerCallbacks[n].length;i++)if(r===t.listenerCallbacks[n][i].fn&&e===t.listenerCallbacks[n][i].el)return t.listenerCallbacks[n].splice(i,1),void 0},isArray:inArray:getQueryParamValue:function(e,t){var n,r,i,o;if(!e)return null;for("string"==typeof t?(n=QTABMR.window.document.createElement("a"),n.href=t):n="object"==typeof t&&"string"==typeof t.search?t:QTABMR.window.location,r=n.search.slice(1).split(/&/),i=0;i<r.length;i++)if(r[i]&&(o=r[i].split("="),o.length&&o[0]===e))try{return o.length>1?decodeURIComponent(o.splice(1).join("=").replace(/\+/g," ")):""}catch(a){if(!a||"string"!=typeof a.name||-1===a.name.indexOf("URIError"))throw a}return null},generateUUID:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=0|16*Math.random(),n="x"===e?t:8|3&t;return n.toString(16)})},generateId:serializeForUrl:getMyURL:function(){var e,t=document.currentScript||document.getElementById("boomr-if-as")||document.getElementById("boomr-scr-as");if(t)return t.src;var n,r=document.getElementsByTagName("script");for(n=r.length;n--;)if("interactive"===r[n].readyState)return r[n].src;try{throw new Error}catch(i){if("stack"in i&&(e=this.arrayFilter(i.stack.split(/\n/),,e&&e.length))return e[0].replace(/.*(https?:\/\/.+?)(:\d+)+\D*$/m,"$1")}return""},scroll:function(){var t=void 0!==e.pageXOffset,n="CSS1Compat"===(e.document.compatMode||""),r={x:0,y:0};return t?"function"==typeof e.pageXOffset?(r.x=e.pageXOffset(),r.y=e.pageYOffset()):(r.x=e.pageXOffset,r.y=e.pageYOffset):n?(r.x=e.document.documentElement.scrollLeft,r.y=e.document.documentElement.scrollTop):(r.x=e.document.body.scrollLeft,r.y=e.document.body.scrollTop),"number"==typeof r.sx&&(r.sx=Math.round(r.sx)),"number"==typeof r.sy&&(r.sy=Math.round(r.sy)),r},windowHeight:function(){return e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight},windowWidth:isNative:overwriteNative:isInteger:function(e){var t=Number.isInteger||return t(e)},isObjectEmpty:hashString:function(e){e=encodeURIComponent(e);for(var t=2166136261,n=0;n<e.length;n++)t^=e.charCodeAt(n),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);var r=(t>>>0).toString()+e.length;return parseInt(r).toString(36)},isCurrentUASameSiteNoneCompatible:function(){return e&&e.navigator&&e.navigator.userAgent&&"string"==typeof e.navigator.userAgent?this.isUASameSiteNoneCompatible(e.navigator.userAgent):!0},isUASameSiteNoneCompatible:function(e){var t=e.match(/(UCBrowser)\/(\d+\.\d+)\.(\d+)/);if(t){var n=parseFloat(t[2]),r=t[3];return 12.13===n?2>=r?!1:!0:12.13>n?!1:!0}if(t=e.match(/(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)/)){var i=t[2];return i>=51&&66>=i?!1:!0}return(t=e.match(/(Macintosh;.*Mac OS X 10_14[_\d]*.*) AppleWebKit\//))?(t=e.match(/Version\/.* Safari\//),t&&(t=e.match(/Chrom(?:e|ium)/),null===t)?!1:(t=e.match(/^Mozilla\/\d+(?:\.\d+)* \(Macintosh;.*Mac OS X \d+(?:_\d+)*\) AppleWebKit\/\d+(?:\.\d+)* \(KHTML, like Gecko\)$/),t?!1:!0)):(t=e.match(/(iP.+; CPU .*OS 12(?:_\d+)*.*)/),t?!1:!0)}},browser:{results:{},supportsPassive:function(){if("undefined"==typeof QTABMR.browser.results.supportsPassive){if(QTABMR.browser.results.supportsPassive=!1,!Object.defineProperty)return!1;try{var e=Object.defineProperty({},"passive",{get:);window.addEventListener("test",null,e)}catch(t){}}return QTABMR.browser.results.supportsPassive}},init:function(n){var i,o,a=["autorun","beacon_auth_key","beacon_auth_token","beacon_with_credentials","beacon_disable_sendbeacon","beacon_url","beacon_url_force_https","beacon_type","site_domain","strip_query_string","user_ip","same_site_cookie","secure_cookie"];if(QTABMR_check_doc_domain(),n||(n={}),void 0!==n.log&&(this.log=n.log),this.log||(this.log=function(){}),this.pageId||(this.pageId=QTABMR.utils.generateId(8),QTABMR.debug("Generated PageID: "+this.pageId)),n.primary&&t.handlers_attached)return this;"undefined"!=typeof n.site_domain&&(/:/.test(n.site_domain)&&(n.site_domain=e.location.hostname.toLowerCase()),this.session.domain=n.site_domain),QTABMR.session.enabled&&"undefined"==typeof QTABMR.session.ID&&(QTABMR.session.ID=QTABMR.utils.generateUUID()),"undefined"!=typeof n.autorun&&(t.autorun=n.autorun);for(o in this.plugins)if(this.plugins.hasOwnProperty(o)){if(n[o]&&n[o].hasOwnProperty("enabled")&&n[o].enabled===!1){t.disabled_plugins[o]=1,"function"==typeof this.plugins[o].disable&&this.plugins[o].disable();continue}if(t.disabled_plugins[o]){if(!n[o]||!n[o].hasOwnProperty("enabled")||n[o].enabled!==!0)continue;"function"==typeof this.plugins[o].enable&&this.plugins[o].enable(),delete t.disabled_plugins[o]}if("function"==typeof this.plugins[o].init)try{this.plugins[o].init(n)}catch(u){QTABMR.addError(u,o+".init")}}for(i=0;i<a.length;i++)void 0!==n[a[i]]&&(t[a[i]]=n[a[i]]);return(!t.handlers_attached&&!n.wait||t.handlers_attached&&t.waiting_for_config)&&(t.onloadfired||void 0!==t.autorun&&t.autorun===!1||(QTABMR.hasBrowserOnloadFired()&&(QTABMR.loadedLate=!0),QTABMR.attach_page_ready(QTABMR.page_ready_autorun)),t.waiting_for_config=!1),t.handlers_attached?this:(n.wait&&(t.waiting_for_config=!0),QTABMR.attach_page_ready(,QTABMR.utils.addListener(e,"DOMContentLoaded",function(){t.fireEvent("dom_loaded")}),QTABMR.fireEvent("config",n),QTABMR.subscribe("config",,QTABMR.subscribe("spa_navigation",t.spaNavigation,null,t),function(){var n,i;for(void 0!==s&&(QTABMR.utils.addListener(r,s,function(){t.fireEvent("visibility_changed")}),t.lastVisibilityState=QTABMR.visibilityState(),QTABMR.subscribe("visibility_changed",),QTABMR.utils.addListener(r,"mouseup",t.xb_handler("click")),n=r.getElementsByTagName("form"),i=0;i<n.length;i++)QTABMR.utils.addListener(n[i],"submit",t.xb_handler("form_submit"));e.onpagehide||null===e.onpagehide||QTABMR.utils.addListener(e,"unload",,QTABMR.boomerang_frame!==QTABMR.window&&QTABMR.utils.addListener(QTABMR.boomerang_frame,"unload",t.onFrameUnloaded)}(),t.handlers_attached=!0,this)},attach_page_ready:page_ready_autorun:page_ready:function(n,r){var i;return r||"number"!=typeof n||(i=n,n=null),n||(n=e.event),n||(n={name:"load"}),r?"number"==typeof e.QTABMR_page_ready&&(n.timing=n.timing||{},n.timing.loadEventEnd=e.QTABMR_page_ready,QTABMR.addVar("pr",1,!0)):(n.timing=n.timing||{},n.timing.loadEventEnd=i?i:"number"==typeof e.QTABMR_page_ready?e.QTABMR_page_ready:QTABMR.now(),QTABMR.addVar("pr",1,!0)),t.onloadfired?this:(t.fireEvent("page_ready",n),t.onloadfired=!0,this)},hasBrowserOnloadFired:onloadFired:function(){return t.onloadfired},setImmediate:function(t,n,r,i){var o,a;o=e.requestIdleCallback?e.requestIdleCallback(o,{timeout:1e3}):e.setImmediate?e.setImmediate(o):setTimeout(o,10)},now:),getPerformance:forceSameSiteCookieNone:function(){t.forced_same_site_cookie_none=!0},hrNow:function(){var e,t,n=QTABMR.getPerformance();return n&&n.now?e=n.now():(t=QTABMR.plugins.RT&&QTABMR.plugins.RT.navigationStart&&QTABMR.plugins.RT.navigationStart()||QTABMR.t_lstart||QTABMR.t_start,e=QTABMR.now()-t),e},visibilityState:void 0===a?function(){return r[a]},lastVisibilityEvent:{},registerEvent:function(e){return t.events.hasOwnProperty(e)?this:(t.events[e]=[],this)},disable:fireEvent:subscribe:function(n,r,i,o,a){var s,u,c;for(n=n.toLowerCase(),t.translate_events[n]&&(n=t.translate_events[n]),t.events.hasOwnProperty(n)||(t.events[n]=[]),c=t.events[n],s=0;s<c.length;s++)if(u=c[s],u&&u.fn===r&&u.cb_data===i&&u.scope===o)return this;return c.push({fn:r,cb_data:i||{},scope:o||null,once:a||!1}),"page_ready"===n&&t.onloadfired&&t.autorun&&this.setImmediate(r,null,i,o),("page_unload"===n||"before_unload"===n)&&(t.unloadEventsCount++,function(){var a;c.length,a=function(n){r&&r.call(o,n||e.event,i),++t.unloadEventCalled===t.unloadEventsCount&&QTABMR.real_sendBeacon()},"page_unload"===n&&(e.onpagehide||null===e.onpagehide?QTABMR.utils.addListener(e,"pagehide",a):QTABMR.utils.addListener(e,"unload",a)),QTABMR.utils.addListener(e,"beforeunload",a)}()),this},addError:function(e,n,r){var i,o=QTABMR.plugins.Errors;return QTABMR.error("QtaBoomerang caught error: "+e+", src: "+n+", extra: "+r),o&&o.is_supported()?("string"==typeof e?o.send({message:e,extra:r,functionName:n,noStack:!0},o.VIA_APP,o.SOURCE_BOOMERANG):("string"==typeof n&&(e.functionName=n),"undefined"!=typeof r&&(e.extra=r),o.send(e,o.VIA_APP,o.SOURCE_BOOMERANG)),void 0):("string"!=typeof e&&(i=String(e),i.match(/^\[object/)&&(i=e.name+": "+(e.description||e.message).replace(/\r\n$/,"")),e=i),void 0!==n&&(e="["+n+":"+QTABMR.now()+"] "+e),r&&(e+=":: "+r),t.errors[e]?t.errors[e]++:t.errors[e]=1,void 0)},isCrossOriginError:addVar:function(e,n,r){if("string"==typeof e)t.vars[e]=n,r&&(t.singleBeaconVars[e]=1);else if("object"==typeof e){var i,o=e;for(i in o)o.hasOwnProperty(i)&&(t.vars[i]=o[i],r&&(t.singleBeaconVars[i]=1))}return this},appendVar:function(e,t){var n=QTABMR.getVar(e)||"";return n&&(n+=","),QTABMR.addVar(e,n+t),this},removeVar:function(e){var n,r;if(!arguments.length)return this;for(r=1===arguments.length&&QTABMR.utils.isArray(e)?e:arguments,n=0;n<r.length;n++)t.vars.hasOwnProperty(r[n])&&delete t.vars[r[n]];return this},hasVar:getVar:setVarPriority:function(e,n){return"number"!=typeof n||1!==Math.abs(n)?this:(t.varPriority[n][e]=1,this)},setReferrer:function(e){t.r=e},requestStart:readyToSend:function(){var e;for(e in this.plugins)if(this.plugins.hasOwnProperty(e)){if(t.disabled_plugins[e])continue;if("function"==typeof this.plugins[e].readyToSend&&this.plugins[e].readyToSend()===!1)return QTABMR.debug("Plugin "+e+" is not ready to send"),!1}return!0},responseEnd:function(e,n,r,i){if(n="number"==typeof n?n:QTABMR.now(),i="number"==typeof i?i:QTABMR.now(),!QTABMR.readyToSend())return QTABMR.debug("Attempted to call responseEnd before all plugins were Ready to Send, trying again..."),setTimeout(function(){QTABMR.responseEnd(e,n,r,i)},1e3),void 0;if(!QTABMR.hasSentPageLoadBeacon()&&!QTABMR.utils.inArray(e.initiator,QTABMR.constants.BEACON_TYPE_SPAS))return QTABMR.subscribe("page_load_beacon",function(){QTABMR.responseEnd(e,n,r,i)},null,QTABMR,!0),void 0;if(t.beaconInQueue)return QTABMR.subscribe("beacon",null,QTABMR,!0),void 0;if(t.beaconInQueue=!0,"object"==typeof e){if(!e.url)return QTABMR.debug("QTABMR.responseEnd: First argument must have a url property if it's an object"),void 0;t.fireEvent("xhr_load",e)}else QTABMR.real_sendBeacon(),QTABMR.addVar("xhr.pg",e,!0),QTABMR.plugins.RT.startTimer("xhr_"+e,n),t.fireEvent("xhr_load",{name:"xhr_"+e,data:r,timing:{loadEventEnd:i}})},uninstrumentXHR:function(){},instrumentXHR:function(){},uninstrumentFetch:function(){},instrumentFetch:function(){},sendBeacon:sendBeaconWhenReady:function(e,n,r){if(t.beaconInQueue)return QTABMR.subscribe("beacon",null,QTABMR,!0),void 0;t.beaconInQueue=!0;for(var i in e)e.hasOwnProperty(i)&&QTABMR.addVar(i,e[i],!0);"function"==typeof n&&"undefined"!=typeof r&&n.apply(r),QTABMR.sendBeacon()},real_sendBeacon:function(){var n,i=[],o={};if(!t.beaconQueued)return!1;t.beaconQueued=!1,QTABMR.debug("Checking if we can send beacon");for(n in this.plugins)if(this.plugins.hasOwnProperty(n)){if(t.disabled_plugins[n])continue;if(!this.plugins[n].is_complete(t.vars))return QTABMR.debug("Plugin "+n+" is not complete, deferring beacon send"),delete t.vars.early,!1}if(!(window&&window.Image&&window.navigator&&QTABMR.window))return QTABMR.debug("DOM not fully available, not sending a beacon"),!1;var a=QTABMR.utils.inArray(t.vars["http.initiator"],QTABMR.constants.BEACON_TYPE_SPAS),s="undefined"==typeof t.vars["http.initiator"]||a;t.vars.pgu||(t.vars.pgu=a?r.URL:r.URL.replace(/#.*/,"")),t.vars.pgu=QTABMR.utils.cleanupURL(t.vars.pgu),(!t.vars.u||a)&&(t.vars.u=t.vars.pgu),t.vars.pgu===t.vars.u&&delete t.vars.pgu,t.r?t.vars.r=QTABMR.utils.cleanupURL(t.r):delete t.vars.r,t.vars.v=QTABMR.version,QTABMR.snippetVersion&&(t.vars.sv=QTABMR.snippetVersion),t.vars.sm=QTABMR.snippetMethod||"i",QTABMR.session.enabled?(t.vars["rt.si"]=QTABMR.session.ID+"-"+Math.round(QTABMR.session.start/1e3).toString(36),t.vars["rt.ss"]=QTABMR.session.start,t.vars["rt.sl"]="undefined"==typeof t.vars.early?QTABMR.session.length>=1?QTABMR.session.length:1:QTABMR.session.length):QTABMR.removeVar("rt.si","rt.ss","rt.sl"),QTABMR.visibilityState()&&(t.vars["vis.st"]=QTABMR.visibilityState(),QTABMR.lastVisibilityEvent.visible&&(t.vars["vis.lv"]=QTABMR.now()-QTABMR.lastVisibilityEvent.visible),QTABMR.lastVisibilityEvent.hidden&&(t.vars["vis.lh"]=QTABMR.now()-QTABMR.lastVisibilityEvent.hidden)),t.vars["ua.plt"]=navigator.platform,t.vars["ua.vnd"]=navigator.vendor,this.pageId&&(t.vars.pid=this.pageId),t.vars.n=++this.beaconsSent,e!==window&&(t.vars["if"]="");for(n in t.errors)t.errors.hasOwnProperty(n)&&i.push(n+(t.errors[n]>1?" (*"+t.errors[n]+")":""));i.length>0&&(t.vars.errors=i.join("\n")),t.errors={},t.fireEvent("before_beacon",t.vars);for(n in t.vars)t.vars.hasOwnProperty(n)&&(o[n]=t.vars[n]);if(QTABMR.removeVar(["qt","pgu"]),"undefined"==typeof t.vars.early){for(var u in t.singleBeaconVars)t.singleBeaconVars.hasOwnProperty(u)&&QTABMR.removeVar(u);t.singleBeaconVars={},!t.hasSentPageLoadBeacon&&s&&(t.hasSentPageLoadBeacon=!0,QTABMR.setImmediate()}return QTABMR.session.rate_limited?(QTABMR.debug("Skipping because we're rate limited"),!1):(t.beaconInQueue=!1,QTABMR.sendBeaconData(o),!0)},sendBeaconData:function(n){var r,i,o,a,s,u=[],c=[],d=!0;QTABMR.debug("Ready to send beacon: "+QTABMR.utils.objectToString(n));var l=n["http.initiator"];if(l&&""!==l&&!QTABMR.utils.inArray(l,["interaction","spa","spa_hard"]))return QTABMR.info("Beacon type '"+l+"' isnt allowed, skipping beacon send"),!0;if(t.beacon_url=t.beacon_url_override||t.beacon_url,!t.beacon_url)return QTABMR.debug("No beacon URL, so skipping."),!1;if(!t.beaconUrlAllowed(t.beacon_url))return QTABMR.debug("Beacon URL not allowed: "+t.beacon_url),!1;if(QTABMR.utils.isObjectEmpty(n))return!1;if(t.fireEvent("beacon",n),u=this.getVarsOfPriority(n,-1),c=this.getVarsOfPriority(n,1),r=u.concat(this.getVarsOfPriority(n,0),c),i=r.join("&"),t.beacon_url_force_https&&t.beacon_url.match(/^\/\//)&&(t.beacon_url="https:"+t.beacon_url),o=t.beacon_url+(t.beacon_url.indexOf("?")>-1?"&":"?")+i,"GET"===t.beacon_type?(d=!0,o.length>QTABMR.constants.MAX_GET_LENGTH&&(window.console&&(console.warn||console.log)||function(){})("QtaBoomerang: Warning: Beacon may not be sent via GET due to payload size > 2000 bytes")):("POST"===t.beacon_type||o.length>QTABMR.constants.MAX_GET_LENGTH)&&(d=!1),e&&e.navigator&&"function"==typeof e.navigator.sendBeacon&&QTABMR.utils.isNative(e.navigator.sendBeacon)&&"function"==typeof e.Blob&&"GET"!==t.beacon_type&&"undefined"==typeof t.beacon_auth_token&&!t.beacon_disable_sendbeacon){var f=new e.Blob([i+"&sb=1"],{type:"application/x-www-form-urlencoded"});if(e.navigator.sendBeacon(t.beacon_url,f))return!0}if(QTABMR.orig_XMLHttpRequest||e&&e.XMLHttpRequest||(d=!0),d){try{a=new Image}catch(p){return QTABMR.debug("Image is not a constructor, not sending a beacon"),!1}a.src=o}else{s=new(QTABMR.window.orig_XMLHttpRequest||QTABMR.orig_XMLHttpRequest||QTABMR.window.XMLHttpRequest);try{this.sendXhrPostBeacon(s,i)}catch(p){s=new QTABMR.boomerang_frame.XMLHttpRequest,this.sendXhrPostBeacon(s,i)}}return!0},hasSentPageLoadBeacon:function(){return t.hasSentPageLoadBeacon},sendXhrPostBeacon:function(e,n){e.open("POST",t.beacon_url),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),"undefined"!=typeof t.beacon_auth_token&&("undefined"==typeof t.beacon_auth_key&&(t.beacon_auth_key="Authorization"),e.setRequestHeader(t.beacon_auth_key,t.beacon_auth_token)),t.beacon_with_credentials&&(e.withCredentials=!0),e.send(n)},getVarsOfPriority:function(e,n){var r,i=[],o=0!==n?t.varPriority[n]:e;for(r in o)o.hasOwnProperty(r)&&e.hasOwnProperty(r)&&(i.push(this.getUriEncodedVar(r,"undefined"==typeof e[r]?"":e[r])),0!==n&&delete e[r]);return i},getUriEncodedVar:function(e,t){(void 0===t||null===t)&&(t=""),"object"==typeof t&&(t=QTABMR.utils.serializeForUrl(t));var n=encodeURIComponent(e)+"="+encodeURIComponent(t);return n},getResourceTiming:function(e,t,n){var r,i=QTABMR.getPerformance();try{if(i&&"function"==typeof i.getEntriesByName){if(r=i.getEntriesByName(e),!r||!r.length)return;if("function"==typeof n&&(r=QTABMR.utils.arrayFilter(r,n),!r||!r.length))return;return r.length>1&&"function"==typeof t&&r.sort(t),r[r.length-1]}}catch(o){QTABMR.warn("getResourceTiming:"+o)}}},QTABMR.url){var c=QTABMR.window.document.createElement("a");c.href=QTABMR.url,n.url=c.href}else n.url=n.utils.getMyURL();delete QTABMR_start,"number"==typeof QTABMR_lstart?(n.t_lstart=QTABMR_lstart,delete QTABMR_lstart):"number"==typeof QTABMR.window.QTABMR_lstart&&(n.t_lstart=QTABMR.window.QTABMR_lstart),"number"==typeof QTABMR.window.QTABMR_onload&&(n.t_onload=QTABMR.window.QTABMR_onload),function(){var e;n.log="object"==typeof console&&void 0!==console.log?function(e,t,n){console.log("("+QTABMR.now()+") "+"{"+QTABMR.pageId+"}"+": "+n+": ["+t+"] "+e)}:function(){},e=n.debug=e("debug"),n.info=e("info"),n.warn=e("warn"),n.error=e("error")}();try{var d=n.getPerformance();d&&"function"==typeof d.now&&/\[native code\]/.test(String(d.now))&&d.timing&&d.timing.navigationStart&&(n.now=}catch(l){}t.checkLocalStorageSupport(),),o("onQtaBoomerangLoaded",{QTABMR:QTABMR},!0)}}(window),function(){function e(e){if(!e)return null;e.href=e.href;var t=e.pathname;return"/"!==t.charAt(0)&&(t="/"+t),t}function t(t){var n;if(t.href){if(t.href.match(/^(about:|javascript:|data:)/i))return!0;
if("function"==typeof QTABMR.getBeaconURL&&QTABMR.getBeaconURL()&&(n=t.href.indexOf(QTABMR.getBeaconURL()),0===n||5===n||6===n))return!0}return QTABMR.xhr_excludes.hasOwnProperty(t.href)||QTABMR.xhr_excludes.hasOwnProperty(t.hostname)||QTABMR.xhr_excludes.hasOwnProperty(e(t))}function n(){this.watch=0,this.timer=null,this.timerEarlyBeacon=null,this.pending_events=[],this.lastSpaLocation=null}function r(){QTABMR.subscribe("click",function(){if(!m.singlePageApp||m.spaStartFromClick){var e={timing:{},initiator:"click"};QTABMR.orig_XMLHttpRequest&&QTABMR.orig_XMLHttpRequest!==d.XMLHttpRequest&&(e.timing.requestStart=QTABMR.now(),f.addEvent(e))}})}function i(e,t){var n,r;if(!t||!e)return!1;if("boolean"==typeof t)return t===!0;if("function"==typeof t)try{return t(e)===!0}catch(i){return!1}if(QTABMR.utils.isArray(t))for(n=0;n<t.length;n++){if(r=t[n],"string"==typeof r&&r===e)return!0;if(r instanceof RegExp&&r.test(e))return!0}return!1}function o(){if(m.monitorFetch&&"function"==typeof d.fetch&&"function"==typeof d.Request&&"function"==typeof d.Response&&"function"==typeof d.Promise&&"function"==typeof window.fetch&&!d.fetch.polyfill&&(!QTABMR.proxy_fetch||QTABMR.proxy_fetch!==d.fetch)){if(QTABMR.proxy_fetch&&QTABMR.orig_fetch&&QTABMR.orig_fetch===d.fetch)return d.fetch=QTABMR.proxy_fetch,void 0;QTABMR.orig_fetch=d.orig_fetch||d.fetch,QTABMR.proxy_fetch=function(e,t){function n(e,t,n){function i(){var e;n.fetchResponse&&!n.fetchResponse.bodyUsed&&m.fetchBodyUsedWait?(e=QTABMR.now(),n.responseBodyNotUsed=!0,setTimeout(m.fetchBodyUsedWait)):m.loadFinished(n)}return function(){var o,a=e._bmrNextP;try{for(o=t.apply(this===window?d:this,arguments);a&&!a._bmrHasOnFulfilled;)a=a._bmrNextP;return a||(o instanceof d.Promise?o.then=r(o,o.then,n):i()),o}catch(s){for(;a&&!a._bmrHasOnRejected;)a=a._bmrNextP;throw a||i(),s}}}function r(e,t,i){return e._bmrNextP?t:function(){var o=Array.prototype.slice.call(arguments);o.length>0&&("function"==typeof o[0]&&(o[0]=n(e,o[0],i),e._bmrHasOnFulfilled=!0),o.length>1&&"function"==typeof o[1]&&(o[1]=n(e,o[1],i),e._bmrHasOnRejected=!0));var a=t.apply(e,o);return e._bmrNextP=a,a.then=r(a,a.then,i),a}}var i,o,a,s={timing:{},initiator:"xhr"};if("object"==typeof e&&e instanceof d.Request?(i=e.url,o=t&&t.method||e.method||"GET",m.captureXhrRequestResponse&&(a=t&&t.body||e.body||void 0)):(i=e,o=t&&t.method||"GET",m.captureXhrRequestResponse&&(a=t&&t.body||void 0)),p.href=i,m.xhrExcludeFilter(p))return QTABMR.debug("Exclude found for resource: "+p.href+" Skipping Fetch instrumentation!","AutoXHR"),QTABMR.orig_fetch.apply(d,arguments);QTABMR.fireEvent("xhr_init","fetch"),s.url=p.href,s.method=o,s.type="fetch",a&&(s.requestPayload=a),QTABMR.fireEvent("xhr_send",{resource:s}),f.addEvent(s);try{s.timing.requestStart||(s.timing.requestStart=QTABMR.now());var u=QTABMR.orig_fetch.apply(this,arguments);return u.then=r(u,u.then,s),u.then(function(e){var t,n,r=!1,i=!1;if(e.redirected&&(s.responseUrl=e.url),(e.status<200||e.status>=400)&&(s.status=e.status),s.fetchResponse=e,s.index>=0&&f.monitorMO(s.index),m.captureXhrRequestResponse&&"function"==typeof e.clone){n=e.headers.get("content-type"),n&&(r=-1!==n.indexOf("json"),i=-1!==n.indexOf("xml")),s.response={};try{t=e.clone(),t.text().then(function(e){s.response.text=e,s.response.raw=e,i&&"function"==typeof d.DOMParser&&(s.response.xml=(new d.DOMParser).parseFromString(e,"text/xml"))}).then(null,function(){})}catch(o){}if(r)try{t=e.clone(),t.json().then(.then(null,}catch(o){}}return e},function(e){throw s.status=!e||"AbortError"!==e.name&&20!==e.code?_:y,e})}catch(c){throw s.status=Q,m.loadFinished(s),c}},QTABMR.utils.overwriteNative(d,"fetch",QTABMR.proxy_fetch)}}unction s(){if(!QTABMR.proxy_XMLHttpRequest||QTABMR.proxy_XMLHttpRequest!==d.XMLHttpRequest){if(QTABMR.proxy_XMLHttpRequest&&QTABMR.orig_XMLHttpRequest&&QTABMR.orig_XMLHttpRequest===d.XMLHttpRequest)return d.XMLHttpRequest=QTABMR.proxy_XMLHttpRequest,n.start(),void 0;QTABMR.orig_XMLHttpRequest=d.orig_XMLHttpRequest||d.XMLHttpRequest,n.start(),r(),QTABMR.proxy_XMLHttpRequest=function(){var e,t,n,r={timing:{},initiator:"xhr"},i=!1,o=!1;return e=new QTABMR.orig_XMLHttpRequest,t=e.open,n=e.send,e.open=function(n,a,s){function u(t,n){e.addEventListener(t,function(){if("readystatechange"===t)if(r.timing[g[e.readyState]]=QTABMR.now(),4===e.readyState&&0!==e.status){if(e.responseURL!==r.url&&(r.responseUrl=e.responseURL),(e.status<200||e.status>=400)&&(r.status=e.status),m.captureXhrRequestResponse&&(r.response={text:""===e.responseType||"text"===e.responseType?e.responseText:null,xml:""===e.responseType||"document"===e.responseType?e.responseXML:null,raw:e.response,json:e.responseJSON},e.response&&e.response.constructor&&e.response.constructor===QTABMR.boomerang_frame.Object&&QTABMR.boomerang_frame.Object!==d.Object))try{e.response.constructor=d.Object}catch(i){}m.loadFinished(r)}else 0===e.readyState&&"number"==typeof r.timing.open&&(e.responseURL!==r.url&&(r.responseUrl=e.responseURL),r.status=y,m.loadFinished(r));else e.responseURL!==r.url&&(r.responseUrl=e.responseURL),"load"===t?0!==e.status&&(e.status<200||e.status>=400)&&(r.status=e.status):r.status="undefined"==typeof n?e.status:n,m.loadFinished(r)},!1)}if(p.href=a,m.xhrExcludeFilter(p))return o=!0,t.apply(e,arguments);o=!1,"undefined"==typeof s&&(s=!0),QTABMR.fireEvent("xhr_init","xhr"),i||(s&&u("readystatechange"),u("load"),u("timeout",v),u("error",_),u("abort",y)),r.url=p.href,r.method=n,r.type="xhr",delete r.status,s||(r.synchronous=!0),i=!0;try{return t.apply(e,arguments)}catch(c){throw r.status=Q,m.loadFinished(r),c}},e.send=function(t){return o?n.apply(e,arguments):(m.captureXhrRequestResponse&&(e.resource.requestPayload=t),QTABMR.fireEvent("xhr_send",e),f.addEvent(r),r.timing.requestStart||(r.timing.requestStart=QTABMR.now()),"undefined"==typeof r.status||r.status!==Q?n.apply(e,arguments):void 0)},e.resource=r,e},QTABMR.proxy_XMLHttpRequest.UNSENT=0,QTABMR.proxy_XMLHttpRequest.OPENED=1,QTABMR.proxy_XMLHttpRequest.HEADERS_RECEIVED=2,QTABMR.proxy_XMLHttpRequest.LOADING=3,QTABMR.proxy_XMLHttpRequest.DONE=4,QTABMR.proxy_XMLHttpRequest.prototype=QTABMR.orig_XMLHttpRequest.prototype,QTABMR.utils.overwriteNative(d,"XMLHttpRequest",QTABMR.proxy_XMLHttpRequest)}}unction c(e){e.initiator="xhr",QTABMR.responseEnd(e)}var d,l,f,p,m,g=["uninitialized","open","responseStart","domInteractive","responseEnd"],h=1e3,T=100,R=50,M=200,B=1e3,A=500,v=-1001,y=-999,_=-998,Q=-997,b=["xmlhttprequest","script","fetch"];QTABMR.plugins.AutoXHR||(d=QTABMR.window,d&&d.XMLHttpRequest&&(new d.XMLHttpRequest).addEventListener&&(n.stop=n.pause=function(){n.observer&&n.observer.observer&&!n.isPaused&&(n.isPaused=!0,n.observer.observer.disconnect())},n.resume=function(){n.observer&&n.observer.observer&&n.isPaused&&(n.isPaused=!1,n.observer.observer.observe(l,n.observer.config))},n.start=function(){if(!n.observer){var e={childList:!0,attributes:!0,subtree:!0,attributeFilter:["src","href"]};n.observer=QTABMR.utils.addObserver(l,e,null,f.mutation_cb,null,f),n.observer&&(n.observer.config=e,QTABMR.subscribe("page_unload",n.stop,null,n))}},n.prototype.addEvent=function(e){var t,r,i,o={type:e.initiator,resource:e,nodes_to_wait:0,total_nodes:0,resources:[],xhr_resources:[],complete:!1,aborted:!1,firedEarlyBeacon:!1},a=this.pending_events.length,s=this;for(t=a-1;t>=0;t--)if(this.pending_events[t]&&!this.pending_events[t].complete){r=this.pending_events[t],i=t;break}if(r)if("click"===r.type&&m.singlePageApp&&m.spaStartFromClick&&"xhr"===o.type)o.resource.fromClick=!0,o.resource.timing.click=r.resource.timing.requestStart,o.resource.timing.requestStart=r.resource.timing.requestStart,o.interesting=r.interesting||0,o.total_nodes+=r.total_nodes,o.resources=r.resources.concat(o.resources),o.xhr_resources=r.xhr_resources.concat(o.xhr_resources),this.pending_events[i]=void 0,this.watch--;else if(("click"===r.type||r.resource.fromClick)&&m.singlePageApp&&m.spaStartFromClick&&"spa"===o.type)o.resource.timing=r.resource.timing,o.interesting=r.interesting||0,o.total_nodes+=r.total_nodes,o.resources=r.resources.concat(o.resources),r.resource.url&&o.xhr_resources.push(r.resource.url),o.xhr_resources=o.xhr_resources.concat(r.xhr_resources),this.pending_events[i]=void 0,this.watch--;else if("click"===r.type)0!==r.nodes_to_wait&&r.resource.url||(this.pending_events[i]=void 0,this.watch--);else if("xhr"===r.type){if("click"===o.type)return null;if("xhr"===o.type)return f.add_event_resource(e),null}else if(QTABMR.utils.inArray(r.type,QTABMR.constants.BEACON_TYPE_SPAS)){if("xhr"===o.type)return f.add_event_resource(e),null;QTABMR.utils.inArray(o.type,QTABMR.constants.BEACON_TYPE_SPAS)&&(r.resource.timing.loadEventEnd=QTABMR.now(),r.aborted=!0,this.sendEvent(i))}if("click"===o.type){if(!n.observer)return null;this.setTimeout(m.xhrIdleTimeout,a)}else"xhr"===o.type?(o.nodes_to_wait++,o.total_nodes++,o.ignoreMO=!0):QTABMR.utils.inArray(o.type,QTABMR.constants.BEACON_TYPE_SPAS)&&(n.start(),e.wait?(o.nodes_to_wait++,o.total_nodes++,e.waitComplete=:this.setTimeout(m.spaIdleTimeout,a));return this.watch++,this.pending_events.push(o),e.index=a,a},n.prototype.sendEvent=function(e){var t=this.pending_events[e],n=this;if(QTABMR.now(),t&&!t.complete)if(this.clearTimeout(e),QTABMR.readyToSend()){if(t.complete=!0,this.watch--,QTABMR.utils.inArray(t.type,QTABMR.constants.BEACON_TYPE_SPAS)&&(t.resource.url=l.URL),"spa"===t.type&&0===t.total_nodes&&t.resource.url===n.lastSpaLocation)return QTABMR.fireEvent("spa_cancel"),this.pending_events[e]=void 0,void 0;if("click"===t.type&&(0===t.total_nodes||!t.resource.url))return this.pending_events[e]=void 0,void 0;if("click"===t.type&&m.singlePageApp&&m.spaStartFromClick&&(t.type=t.resource.initiator="xhr"),m.xhrRequireChanges&&"xhr"===t.type&&1===t.total_nodes&&("undefined"==typeof t.interesting||0===t.interesting)&&!i(t.resource.url,m.alwaysSendXhr))return this.pending_events[e]=void 0,void 0;if(QTABMR.utils.inArray(t.type,QTABMR.constants.BEACON_TYPE_SPAS)&&(n.lastSpaLocation=t.resource.url,!t.forced&&("spa"===t.type&&0===t.total_nodes&&(t.resource.timing.loadEventEnd=t.resource.timing.requestStart+1),"spa_hard"===t.type))){var r=QTABMR.getPerformance();r&&r.timing&&r.timing.loadEventEnd&&t.resource.timing.loadEventEnd&&t.resource.timing.loadEventEnd<r.timing.loadEventEnd&&(t.resource.timing.loadEventEnd=r.timing.loadEventEnd)}this.sendResource(t.resource,e)}else setTimeout(function(){n.sendEvent(e)},A)},n.prototype.sendResource=function(e,t){var n=this,r=n.pending_events[t],i=e.timing?e.timing.requestStart:void 0,o=function(r,o){r&&(e.timing.loadEventEnd=o||QTABMR.now()),e.onComplete&&e.onComplete(e),QTABMR.plugins.ResourceTiming&&QTABMR.plugins.ResourceTiming.is_enabled()&&e.timing&&e.timing.requestStart&&(e.restiming=QTABMR.plugins.ResourceTiming.getCompressedResourceTiming(e.timing.requestStart,e.timing.loadEventEnd)),QTABMR.utils.inArray(e.initiator,QTABMR.constants.BEACON_TYPE_SPAS)&&(n.calculateSpaTimings(e),"number"==typeof t&&n.pending_events[t].aborted&&(QTABMR.addVar("pgu",l.URL,!0),QTABMR.addVar("rt.quit","",!0),QTABMR.addVar("rt.abld","",!0))),QTABMR.responseEnd(e,i,e),"number"==typeof t&&(n.pending_events[t]=void 0)};return"spa_hard"!==e.initiator||r&&r.aborted||QTABMR.hasBrowserOnloadFired()?(o(!1),void 0):(QTABMR.utils.addListener(d,"load",,void 0)},n.prototype.calculateSpaTimings=function(e){var t=QTABMR.getPerformance();if(t&&t.timing)if("spa_hard"===e.initiator)e.timing.responseEnd=t.timing.responseStart,e.timing.fetchStart=t.timing.navigationStart;else{if(!QTABMR.plugins.ResourceTiming||!QTABMR.plugins.ResourceTiming.is_supported())return;var n=QTABMR.plugins.ResourceTiming.getFilteredResourceTiming(e.timing.requestStart,e.timing.loadEventEnd,m.spaBackEndResources).entries,r=Math.round(e.timing.loadEventEnd-e.timing.requestStart);if(!n||!n.length)return e.timers={t_resp:0,t_page:r,t_done:r},void 0;for(var i=e.timing.loadEventEnd-t.timing.navigationStart,o=0;o<n.length;o++)n[o].responseStart>i?(n[o].responseStart=i,n[o].responseEnd=i):n[o].responseEnd>i&&(n[o].responseEnd=i);var a=Math.round(QTABMR.plugins.ResourceTiming.calculateResourceTimingUnion(n)),s=r-a;if(0>a||0>r||0>s)return QTABMR.addError("Incorrect SPA time calculation"),void 0;e.timers={t_resp:a,t_page:s,t_done:r}}},n.prototype.setTimeout=function(e,t){var n=this;e&&(this.clearTimeout(t),this.timer=setTimeout(e))},n.prototype.timedout=function(e){var t;if(this.clearTimeout(e),t=this.pending_events[e]){if(QTABMR.utils.inArray(t.type,QTABMR.constants.BEACON_TYPE_SPAS)&&!QTABMR.hasBrowserOnloadFired())return this.setTimeout(m.spaIdleTimeout,e),void 0;0===t.nodes_to_wait&&this.sendEvent(e)}},n.prototype.clearTimeout=function(e){this.timer&&e===this.pending_events.length-1&&(clearTimeout(this.timer),this.timer=null)},n.prototype.load_cb=function(e,t){var n,r,i=QTABMR.now();n=e.target||e.srcElement,n&&n._bmr&&(r=n._bmr.idx,t="undefined"!=typeof t?t:n._bmr.res||0,n._bmr.end[t]||(n._bmr.end[t]=i,this.load_finished(r,i)))},n.prototype.monitorMO=n.prototype.load_finished=function(e,t){var n=this.pending_events[e];n&&(n.nodes_to_wait--,0===n.nodes_to_wait&&(n.resource.timing.loadEventEnd=t||QTABMR.now(),e===this.pending_events.length-1?QTABMR.utils.inArray(n.type,QTABMR.constants.BEACON_TYPE_SPAS)?(!n.firedEarlyBeacon&&QTABMR.plugins.Early&&QTABMR.plugins.Early.is_supported()&&(this.timerEarlyBeacon&&(clearTimeout(this.timerEarlyBeacon),this.timerEarlyBeacon=null),this.timerEarlyBeacon=setTimeout(function(){f.timerEarlyBeacon=null,n.firedEarlyBeacon||0!==n.nodes_to_wait||(n.firedEarlyBeacon=!0,QTABMR.plugins.Early.sendEarlyBeacon(n.resource,n.type))},T)),this.setTimeout(m.spaIdleTimeout,e)):this.setTimeout(m.xhrIdleTimeout,e):this.sendEvent(e)))},n.prototype.wait_for_node=function(e,t){var n,r,i,o,a,s,u,c,d,l=this,f=!1,g=!1;if(e&&e.nodeName&&(e.nodeName.toUpperCase().match(/^(IMG|IFRAME|IMAGE)$/)||"LINK"===e.nodeName.toUpperCase()&&e.rel&&e.rel.match(/\bstylesheet\b/i))){if(e._bmr&&"number"==typeof e._bmr.res&&e._bmr.end[e._bmr.res]&&(g=!0),a=e.src||"function"==typeof e.getAttribute&&e.getAttribute("xlink:href")||e.href,e._bmr&&e._bmr.url!==a&&(g=!0),g&&"function"==typeof e._bmr.listener&&(l.load_cb({target:e,type:"changed"}),e.removeEventListener("load",e._bmr.listener),e.removeEventListener("error",e._bmr.listener),delete e._bmr.listener),!a||a.match(/^(about:|javascript:|data:)/i))return!1;if("IMG"===e.nodeName){if(e.naturalWidth&&!g)return!1;if("function"==typeof e.getAttribute&&""===e.getAttribute("src"))return!1;if("lazy"===e.loading)return!1}if("IFRAME"===e.nodeName&&g)return!1;if("function"==typeof e.getAttribute&&(u=parseInt(e.getAttribute("height"),10),c=parseInt(e.getAttribute("width"),10)),isNaN(u)&&(u=!e.style||"0"!==e.style.height&&"0px"!==e.style.height&&"1px"!==e.style.height?void 0:0),isNaN(c)&&(c=!e.style||"0"!==e.style.width&&"0px"!==e.style.width&&"1px"!==e.style.width?void 0:0),!isNaN(u)&&1>=u&&!isNaN(c)&&1>=c)return!1;if(0===u||0===c)return!1;if(e.style&&("none"===e.style.display||"hidden"===e.style.visibility||"0"===e.style.opacity))return!1;if(m.domExcludeFilter(e))return!1;if(n=this.pending_events[t],!n)return!1;if(s=n.resources.length,n.urls||(n.urls={}),n.urls[a])return!1;if(!n.resource.url){if(p.href=a,m.xhrExcludeFilter(p))return!1;n.resource.url=p.href}e._bmr||(e._bmr={end:{}}),e._bmr.res=s,e._bmr.idx=t,delete e._bmr.end[s],e._bmr.url=a,d=function(t){l.load_cb(t,s),e.removeEventListener("load",d),e.removeEventListener("error",d),delete e._bmr.listener},e._bmr.listener=d,e.addEventListener("load",d),e.addEventListener("error",d),n.nodes_to_wait++,this.clearTimeout(t),n.total_nodes++,n.resources.push(e),n.urls[a]=1,f=!0}else e.nodeType===Node.ELEMENT_NODE&&["IMAGE","IMG"].forEach(function(n){if(r=e.getElementsByTagName(n),r&&r.length)for(i=0,o=r.length;o>i;i++)f|=this.wait_for_node(r[i],t)},this);return f},n.prototype.add_event_resource=function(e){var t,n=this.pending_events.length-1;return 0>n?-1:(t=this.pending_events[n])?e?(t.xhr_resources.push(e.url),t.nodes_to_wait++,t.total_nodes++,e.index=n,e.node=!0,n):-1:-1},n.prototype.mutation_cb=function(e){var t,n,r;return this.watch?(t=this,n=this.pending_events.length-1,0>n||!this.pending_events[n]?!0:(r=this.pending_events[n],r.ignoreMO?!0:("undefined"==typeof r.interesting&&(r.interesting=!1),e&&e.length&&(r.resource.timing.domComplete=QTABMR.now(),e.forEach(function(e){var i,o,a;if("attributes"===e.type)r.interesting|=t.wait_for_node(e.target,n);else if("childList"===e.type){for(o=e.addedNodes.length,i=0;o>i;i++)r.interesting|=t.wait_for_node(e.addedNodes[i],n);for(o=e.removedNodes.length,i=0;o>i;i++)a=e.removedNodes[i],"IFRAME"===a.nodeName&&a._bmr&&t.load_cb({target:a,type:"removed"})}})),r.interesting||r.timeoutExtended||(this.setTimeout(B,n),r.timeoutExtended=!0),!0))):!0},n.prototype.queue_is_empty=n.prototype.nodesWaitingFor=function(e){var t;return 0===this.pending_events.length?0:("undefined"==typeof e&&(e=this.pending_events.length-1),t=this.pending_events[e],t?t.nodes_to_wait:0)},n.prototype.completeEvent=function(e){var t,n=QTABMR.now();0!==this.pending_events.length&&("undefined"==typeof e&&(e=this.pending_events.length-1),t=this.pending_events[e],t&&(t.resource.timing.loadEventEnd=n,t.forced=!0,this.sendEvent(e)))},f=new n,m={spaBackEndResources:b,alwaysSendXhr:!1,xhrExcludeFilters:[],domExcludeFilters:[],initialized:!1,captureXhrRequestResponse:!1,singlePageApp:!1,spaStartFromClick:!1,autoXhrEnabled:!1,monitorFetch:!1,fetchBodyUsedWait:M,spaIdleTimeout:h,xhrIdleTimeout:R,xhrRequireChanges:!0,xhrExcludeFilter:function(e){var t,n,r;if(!e||!e.href)return!1;for(t=0;t<m.xhrExcludeFilters.length;t++)if("function"==typeof m.xhrExcludeFilters[t].cb){r=m.xhrExcludeFilters[t].ctx;try{if(n=m.xhrExcludeFilters[t].cb.call(r,e))return!0}catch(i){QTABMR.addError(i,"QTABMR.plugins.AutoXHR.impl.xhrExcludeFilter()")}}return!1},domExcludeFilter:function(e){var t,n,r;for(t=0;t<m.domExcludeFilters.length;t++)if("function"==typeof m.domExcludeFilters[t].cb){r=m.domExcludeFilters[t].ctx,m.domExcludeFilters[t].name;try{if(n=m.domExcludeFilters[t].cb.call(r,e))return!0}catch(i){QTABMR.addError(i,"QTABMR.plugins.AutoXHR.impl.domExcludeFilter()")}}return!1},loadFinished:function(e,t){var n,r,o,a,s;t=t||QTABMR.now(),e.timing.loadEventEnd||(e.status&&QTABMR.fireEvent("xhr_error",e),e.timing.loadEventEnd=t,s=QTABMR.getPerformance(),s&&s.timing&&(r=s.timing.navigationStart,n=QTABMR.getResourceTiming(e.url,,n&&(o=Math.floor(r+n.startTime),a=Math.floor(r+n.responseEnd),a<=QTABMR.now()&&(e.timing.responseEnd=a,e.timing.loadEventEnd<a&&(e.timing.loadEventEnd=a),e.fromClick&&e.timing.requestStart||(e.timing.requestStart=o),e.timing.fetchStart=o,0!==n.responseStart&&(e.timing.responseStart=Math.floor(r+n.responseStart)),e.restiming=n))),e.node&&i(e.url,m.alwaysSendXhr)&&f.sendResource(e),e.index>=0&&(f.monitorMO(e.index),f.load_finished(e.index,e.timing.responseEnd)))}},QTABMR.plugins.AutoXHR={is_complete:function(){return!0},init:function(e){ar r,i;if(l=d.document,d&&l){if(p=l.createElement("A"),QTABMR.utils.pluginConfig(m,e,"AutoXHR",["spaBackEndResources","alwaysSendXhr","monitorFetch","fetchBodyUsedWait","spaIdleTimeout","xhrIdleTimeout","xhrRequireChanges","spaStartFromClick"]),QTABMR.instrumentXHR=s,QTABMR.uninstrumentXHR=u,QTABMR.instrumentFetch=o,QTABMR.uninstrumentFetch=a,m.initialized||(this.addExcludeFilter(t,null,"shouldExcludeXhr"),m.initialized=!0),e&&e.AutoXHR&&e.AutoXHR.excludeFilters&&e.AutoXHR.excludeFilters.length>0)for(i=0;i<e.AutoXHR.excludeFilters.length;i++)"function"==typeof e.AutoXHR.excludeFilters[i]?m.xhrExcludeFilters.push({cb:e.AutoXHR.excludeFilters[i],ctx:this,name:"unknown XHR filter"}):m.xhrExcludeFilters.push(e.AutoXHR.excludeFilters[i]);if(e&&e.AutoXHR&&e.AutoXHR.domExcludeFilters&&e.AutoXHR.domExcludeFilters.length>0)for(i=0;i<e.AutoXHR.domExcludeFilters.length;i++)"function"==typeof e.AutoXHR.domExcludeFilters[i]?m.domExcludeFilters.push({cb:e.AutoXHR.domExcludeFilters[i],ctx:this,name:"unknown DOM filter"}):m.domExcludeFilters.push(e.AutoXHR.domExcludeFilters[i]);if(m.autoXhrEnabled=e.instrument_xhr,m.singlePageApp=QTABMR.plugins.SPA&&QTABMR.plugins.SPA.isSinglePageApp(e),m.alwaysSendXhr&&m.autoXhrEnabled&&QTABMR.xhr&&"function"==typeof QTABMR.xhr.stop){var f=QTABMR.xhr.stop(n);f&&f.length&&QTABMR.setImmediate(n,f)}m.singlePageApp?(m.alwaysSendXhr||(m.autoXhrEnabled=!1),m.autoXhrEnabled&&(QTABMR.instrumentXHR(),QTABMR.instrumentFetch())):m.autoXhrEnabled?(QTABMR.instrumentXHR(),QTABMR.instrumentFetch()):m.autoXhrEnabled===!1&&(QTABMR.uninstrumentXHR(),QTABMR.uninstrumentFetch()),QTABMR.registerEvent("xhr_error")}},getMutationHandler:function(){return f},getPathname:e,enableAutoXhr:addExcludeFilter:function(e,t,n){m.xhrExcludeFilters.push({cb:e,ctx:t,name:n})},addDomExcludeFilter:setXhrRequestResponseCapturing:))}(),function(){var e,t=!1,n=!1,r=!1,o=!1,a=!1,s=!0,u=!1,c=!1,d=!1,l=!1,f=[],p=!1;if(!QTABMR.plugins.SPA&&QTABMR.plugins.AutoXHR){var m={spaHardMissedOnComplete:function(e){var t,n,r=QTABMR.plugins.RT&&QTABMR.plugins.RT.navigationStart(),i=QTABMR.plugins.AutoXHR.getMutationHandler();p=!1,QTABMR.addVar("spa.missed","1",!0),QTABMR.plugins.RT&&QTABMR.plugins.RT.clearTimer("t_done"),e.timing.requestStart=r,n=i.pending_events[e.index],n&&0!==n.total_nodes||(t=QTABMR.getPerformance(),t&&t.timing&&t.timing.navigationStart&&t.timing.loadEventEnd&&"undefined"==typeof e.timing.loadEventEnd&&(e.timing.loadEventEnd=t.timing.loadEventEnd))},pageReady:;QTABMR.plugins.SPA={is_complete:init:function(e){e&&e.instrument_xhr&&(a=e.instrument_xhr,r&&a&&QTABMR.plugins.AutoXHR.enableAutoXhr()),n||(n=!0,QTABMR.subscribe("page_ready",m.pageReady,null,m))},register:supported_frameworks:function(){return f},onLoadSpaHardMissed:function(){r||(o=!0,a&&QTABMR.plugins.AutoXHR.enableAutoXhr(),p=!0,l?p=!1:QTABMR.plugins.SPA.route_change(m.spaHardMissedOnComplete))},hook:function(e,n){return n=n||{},"function"==typeof n.routeFilter&&(u=n.routeFilter),"function"==typeof n.routeChangeWaitFilter&&(c=n.routeChangeWaitFilter),"boolean"==typeof n.routeChangeWaitFilterHardNavs&&(d=n.routeChangeWaitFilterHardNavs),n.disableHardNav&&(l=n.disableHardNav),t?this:(e&&QTABMR.attach_page_ready(this.onLoadSpaHardMissed),t=!0,this)},route_change:function(t,n){var i=!1,f=s&&!l?"spa_hard":"spa";if(!e||!e.wait){if("spa"===f&&u)try{if(!u.apply(null,n))return}catch(p){QTABMR.addError(p,"SPA.route_change.routeFilter")}r=!0;var m=QTABMR.plugins.RT&&QTABMR.plugins.RT.navigationStart(),g=o?QTABMR.now():m,h=QTABMR.window.document.URL;QTABMR.fireEvent("spa_init",[QTABMR.plugins.SPA.current_spa_nav(),h]);var T={timing:{requestStart:g},initiator:f,url:h};if(s=!1,o&&"function"!=typeof t||(o=!0,T.onComplete=function(e){i||(i=!0,QTABMR.fireEvent("spa_navigation")),"function"==typeof t&&t(e)}),("spa"===f||d)&&c)try{c.apply(null,arguments)&&(T.wait=!0,e=T)}catch(p){QTABMR.addError(p,"SPA.route_change.routeChangeWaitFilter")}T.index=QTABMR.plugins.AutoXHR.getMutationHandler().addEvent(T),a&&QTABMR.plugins.AutoXHR.enableAutoXhr()}},last_location:current_spa_nav:wait_complete:function(){e&&(e.wait=!1,e.waitComplete&&e.waitComplete(),e=null)},markNavigationComplete:function(){var t,n,r,i=QTABMR.plugins.AutoXHR.getMutationHandler();if(e&&e.wait&&QTABMR.plugins.SPA.wait_complete(),i&&i.pending_events.length>0)for(t=i.pending_events.length-1;t>=0;t--)if(n=i.pending_events[t],n&&QTABMR.utils.inArray(n.type,QTABMR.constants.BEACON_TYPE_SPAS)){if(n.complete)break;return r=i.nodesWaitingFor(t),QTABMR.addVar("spa.forced","1",!0),QTABMR.addVar("spa.waiting",i.nodesWaitingFor(),!0),i.completeEvent(t),void 0}},isSpaNavInProgress:function(){var e,t,n=QTABMR.plugins.AutoXHR.getMutationHandler();if(n&&n.pending_events.length>0)for(e=n.pending_events.length-1;e>=0;e--)if(t=n.pending_events[e],t&&QTABMR.utils.inArray(t.type,QTABMR.constants.BEACON_TYPE_SPAS))return!t.complete;return!1},isSinglePageApp:,QTABMR.plugins.SPA.waitComplete=QTABMR.plugins.SPA.wait_complete}}(),function(){function e(){function e(){QTABMR.window.addEventListener("popstate",function(){t.routeChange({type:"popstate",toUrl:QTABMR.window.document.URL})})}var n=QTABMR.window.history;return"function"==typeof n.pushState&&(n.pushState=function(e){return function(n,r,i){return t.routeChange({type:"pushState",fromUrl:QTABMR.window.document.URL,toUrl:i}),e.apply(this,arguments)}}(n.pushState)),t.monitorReplaceState&&"function"==typeof n.replaceState&&(n.replaceState=function(e){return function(n,r,i){var o=QTABMR.window.document.URL,a=o;return arguments.length>=3&&"undefined"!=typeof i&&null!==i&&(t.a.href=i,a=t.a.href),QTABMR.plugins.SPA.isSpaNavInProgress()&&a===o||t.routeChange({type:"pushState",fromUrl:QTABMR.window.document.URL,toUrl:i}),e.apply(this,arguments)}}(n.replaceState)),"function"==typeof n.go&&(n.go=function(e){return function(){return t.routeChange({type:"go",fromUrl:QTABMR.window.document.URL}),e.apply(this,arguments)}}(n.go)),"function"==typeof n.back&&(n.back=function(e){return function(){return t.routeChange({type:"back",fromUrl:QTABMR.window.document.URL}),e.apply(this,arguments)}}(n.back)),"function"==typeof n.forward&&(n.forward=function(e){return function(){return t.routeChange({type:"forward",fromUrl:QTABMR.window.document.URL}),e.apply(this,arguments)}}(n.forward)),QTABMR.window.addEventListener("hashchange",,QTABMR.hasBrowserOnloadFired()?e():QTABMR.window.addEventListener("load",,QTABMR.subscribe("beacon",t.resetRouteChangeInProgress),QTABMR.subscribe("spa_cancel",t.resetRouteChangeInProgress),QTABMR.subscribe("spa_init",t.setRouteChangeInProgress),t.browserOnloadBeforeSetup=QTABMR.hasBrowserOnloadFired(),!0}var t={monitorHistory:!0,enabled:!0,hooked:!1,routeChangeInProgress:!1,disableHardNav:!1,routeFilter:void 0,routeChangeWaitFilter:void 0,routeChangeWaitFilterHardNavs:!1,monitorReplaceState:!0,a:void 0,browserOnloadBeforeSetup:!1,DEPRECATED_PLUGINS:["Angular","Backbone","Ember"],resetRouteChangeInProgress:function(e){e&&("undefined"!=typeof e.early||e["http.initiator"]&&0===e["http.initiator"].indexOf("api_custom_"))||(t.routeChangeInProgress&&clearTimeout(t.routeChangeInProgress),t.routeChangeInProgress=!1)},setRouteChangeInProgress:routeChange:function(e){if(t.enabled){if(t.disableHardNav&&!QTABMR.onloadFired())return;t.routeChangeInProgress||(e.toUrl&&(t.a.href=e.toUrl,e.toUrl=t.a.href),QTABMR.plugins.SPA.route_change(null,[e.type,e.fromUrl,e.toUrl]))}else t.resetRouteChangeInProgress()}};if(!QTABMR.plugins.History&&"undefined"!=typeof QTABMR.plugins.SPA&&"undefined"!=typeof QTABMR.plugins.AutoXHR&&QTABMR.window&&QTABMR.window.document){QTABMR.plugins.SPA.register("History"),t.a=QTABMR.window.document.createElement("A"),QTABMR.plugins.History={is_complete:hook:function(n,r,i){try{}catch(o){}return i=i||{},i.disableHardNav=t.disableHardNav,t.routeFilter&&(i.routeFilter=t.routeFilter),t.routeChangeWaitFilter&&(i.routeChangeWaitFilter=t.routeChangeWaitFilter),t.routeChangeWaitFilterHardNavs&&(i.routeChangeWaitFilterHardNavs=t.routeChangeWaitFilterHardNavs),!t.hooked&&t.monitorHistory&&e(),r=t.browserOnloadBeforeSetup,QTABMR.plugins.SPA.hook(r,i),t.hooked||t.browserOnloadBeforeSetup||t.disableHardNav&&!QTABMR.onloadFired()||(QTABMR.plugins.SPA.route_change(),t.setRouteChangeInProgress()),t.hooked=!0,this},init:function(e){return QTABMR.utils.pluginConfig(t,e,"History",["enabled","monitorHistory","disableHardNav","routeFilter","routeChangeWaitFilter","routeChangeWaitFilterHardNavs","monitorReplaceState"]),t.enabled&&this.hook(),this},disable:function(){return t.enabled=!1,this},enable:;for(var n=0;n<t.DEPRECATED_PLUGINS.length;n++){var r=t.DEPRECATED_PLUGINS[n];QTABMR.plugins[r]=QTABMR.plugins.History,QTABMR.plugins[r]={init:function(e){return function(n){return QTABMR.utils.pluginConfig(t,n,e,["enabled"]),t.enabled&&QTABMR.plugins.History.hook(void 0,void 0,{}),QTABMR.plugins[e]}}(r),enable:QTABMR.plugins.History.enable,hook:QTABMR.plugins.History.hook,is_complete:QTABMR.plugins.History.is_complete},QTABMR.plugins.SPA.register(r)}}}(),function(e){var t,n,r=604800,i=1800,o=1;QTABMR.plugins.RT||(n={onloadfired:!1,unloadfired:!1,visiblefired:!1,initialized:!1,complete:!1,autorun:!0,timers:{},cookie:"RT",cookie_exp:r,session_exp:i,strict_referrer:!0,navigationType:0,navigationStart:void 0,responseStart:void 0,loadTime:0,oboError:0,t_start:void 0,cached_t_start:void 0,cached_xhr_start:void 0,t_fb_approx:void 0,r:void 0,beacon_url:void 0,next_beacon_url:void 0,basic_timers:{t_done:1,t_resp:1,t_page:1},crossdomain_sending:!1,navigationStartSource:"",updateCookie:function(e,t){var r,a,s,u;if(!this.cookie)return!1;s=QTABMR.utils.getSubCookies(QTABMR.utils.getCookie(this.cookie))||{};for(u in s)s.hasOwnProperty(u)&&(isNaN(parseInt(u,10))||delete s[u]);if("object"==typeof e)for(u in e)e.hasOwnProperty(u)&&(void 0===e[u]?s.hasOwnProperty(u)&&delete s[u]:s[u]=e[u]);return s.z=o,s.dm=QTABMR.session.domain,s.si=QTABMR.session.ID,s.ss=QTABMR.session.start.toString(36),s.sl=QTABMR.session.length.toString(36),n.session_exp!==i&&(s.se=n.session_exp.toString(36)),QTABMR.session.rate_limited&&(s.rl=1),s.tt=this.loadTime.toString(36),this.oboError>0?s.obo=this.oboError.toString(36):delete s.obo,a=QTABMR.now(),t&&(s[t]=(a-QTABMR.session.start).toString(36),n.lastActionTime=a),this.beacon_url&&(s.bcn=this.beacon_url),QTABMR.debug("Setting cookie (timer="+t+")\n"+QTABMR.utils.objectToString(s),"rt"),QTABMR.utils.setCookie(this.cookie,s,this.cookie_exp)?(r=QTABMR.now(),r-a>50&&(QTABMR.utils.removeCookie(this.cookie),QTABMR.error("took more than 50ms to set cookie... aborting: "+a+" -> "+r,"rt")),!0):(QTABMR.error("cannot set start cookie","rt"),!1)},refreshSession:function(e){e||(e=QTABMR.plugins.RT.getCookie()),e&&(QTABMR.session.start=e.ss?e.ss:QTABMR.plugins.RT.navigationStart()||QTABMR.t_lstart||QTABMR.t_start,e.si&&e.si.match(/-/)&&(QTABMR.session.ID=e.si),e.sl&&(QTABMR.session.length=e.sl),e.tt&&(this.loadTime=e.tt),e.obo&&(this.oboError=e.obo),e.dm&&!QTABMR.session.domain&&(QTABMR.session.domain=e.dm),e.se&&(n.session_exp=e.se),e.bcn&&(this.beacon_url=e.bcn),e.rl&&"1"===e.rl&&(QTABMR.session.rate_limited=!0))},maybeResetSession:function(e,t){QTABMR.debug("Current session meta:\n"+QTABMR.utils.objectToString(QTABMR.session),"rt"),QTABMR.debug("Timers: t_start="+t+", sessionLoad="+n.loadTime+", sessionError="+n.oboError+", lastAction="+n.lastActionTime,"rt"),QTABMR.cr=1,QTABMR.addVar("md_cr",QTABMR.cr);var r=0;QTABMR.session.start&&QTABMR.session.length&&(r=(QTABMR.now()-QTABMR.session.start)/QTABMR.session.length);var i=1e3*n.session_exp;if(!QTABMR.session.start||t&&QTABMR.session.start>t||e-(n.lastActionTime||QTABMR.t_start)>i||r>i){if(!isNaN(QTABMR.cr)&&Math.random()>QTABMR.cr)return QTABMR.session.rate_limited=!0,void 0;QTABMR.session.start=t||QTABMR.plugins.RT.navigationStart()||QTABMR.t_lstart||QTABMR.t_start,QTABMR.session.length=0,QTABMR.session.rate_limited=!1,n.loadTime=0,n.oboError=0,n.beacon_url=n.next_beacon_url,n.lastActionTime=e,n.updateCookie({rl:void 0,sl:QTABMR.session.length,ss:QTABMR.session.start,tt:n.loadTime,obo:void 0,bcn:n.beacon_url})}QTABMR.debug("New session meta:\n"+QTABMR.utils.objectToString(QTABMR.session),"rt"),QTABMR.debug("Timers: t_start="+t+", sessionLoad="+n.loadTime+", sessionError="+n.oboError,"rt")
},initFromCookie:function(){var e,n,r;r=QTABMR.plugins.RT.getCookie(),this.cookie||(QTABMR.session.enabled=!1),r&&(r.s=Math.max(+r.ld||0,Math.max(+r.ul||0,+r.cl||0)),QTABMR.debug("Read from cookie "+QTABMR.utils.objectToString(r),"rt"),r.s&&(r.r||r.nu)&&(this.r=r.r,e=QTABMR.utils.hashString(t.URL),n=QTABMR.utils.hashString(t&&t.referrer||""),QTABMR.debug("referrer check: "+this.r+" =?= "+n,"rt"),r.cl&&QTABMR.debug(r.s+" <? "+(+r.cl+15),"rt"),r.nu&&QTABMR.debug(r.nu+" =?= "+e,"rt"),!this.strict_referrer||r.cl&&r.nu&&r.nu===e&&r.s<+r.cl+15||r.s===+r.ul&&this.r===n?(this.t_start=r.s,+r.hd>r.s&&(this.t_fb_approx=r.hd)):this.t_start=this.t_fb_approx=void 0),r.s&&(this.lastActionTime=r.s),this.refreshSession(r),this.updateCookie({s:void 0,ul:void 0,cl:void 0,hd:void 0,ld:void 0,rl:void 0,r:void 0,nu:void 0,sh:void 0}),this.maybeResetSession(QTABMR.now()))},incrementSessionDetails:function(){QTABMR.debug("Incrementing Session Details... ","RT"),QTABMR.session.length++,!n.timers.t_done||isNaN(n.timers.t_done.delta)?n.oboError++:n.loadTime+=n.timers.t_done.delta},getQtaBoomerangTimings:function(){function e(e,t){var n=Math.round(e?e:0),r=Math.round(t?t:0);return n=0===n?0:n-r,n?n:""}var t,n,r,i,o;QTABMR.t_start&&(QTABMR.plugins.RT.startTimer("boomerang",QTABMR.t_start),QTABMR.plugins.RT.endTimer("boomerang",QTABMR.t_end),QTABMR.plugins.RT.endTimer("boomr_fb",QTABMR.t_start),QTABMR.t_lstart&&(QTABMR.plugins.RT.endTimer("boomr_ld",QTABMR.t_lstart),QTABMR.plugins.RT.setTimer("boomr_lat",QTABMR.t_start-QTABMR.t_lstart)));try{if(window&&"performance"in window&&window.performance&&"function"==typeof window.performance.getEntriesByName){n={"rt.bmr":QTABMR.url},QTABMR.config_url&&(n["rt.cnf"]=QTABMR.config_url);for(r in n)if(n.hasOwnProperty(r)&&n[r]){if(t=window.performance.getEntriesByName(n[r]),!t||0===t.length||!t[0])continue;t=t[0],i=e(t.startTime,0),o=[i,e(t.responseEnd,i),e(t.responseStart,i),e(t.requestStart,i),e(t.connectEnd,i),e(t.secureConnectionStart,i),e(t.connectStart,i),e(t.domainLookupEnd,i),e(t.domainLookupStart,i),e(t.redirectEnd,i),e(t.redirectStart,i)].join(",").replace(/,+$/,""),QTABMR.addVar(r,o,!0)}}}catch(a){a&&a.name&&a.name.hasOwnProperty("length")&&-1===a.name.indexOf("NS_ERROR_FAILURE")&&QTABMR.addError(a,"rt.getQtaBoomerangTimings")}},checkPreRender:function(){return"prerender"!==QTABMR.visibilityState()?!1:(QTABMR.plugins.RT.startTimer("t_load",this.navigationStart),QTABMR.plugins.RT.endTimer("t_load"),QTABMR.plugins.RT.startTimer("t_prerender",this.navigationStart),QTABMR.plugins.RT.startTimer("t_postrender"),!0)},initFromNavTiming:function(){var t,n;this.navigationStart||(n=QTABMR.getPerformance(),n&&n.navigation&&(this.navigationType=n.navigation.type),n&&n.timing?(t=n.timing,this.navigationStartSource="navigation"):e.chrome&&e.chrome.csi&&e.chrome.csi().startE?(t={navigationStart:e.chrome.csi().startE},this.navigationStartSource="csi"):e.gtbExternal&&e.gtbExternal.startE()&&(t={navigationStart:e.gtbExternal.startE()},this.navigationStartSource="gtb"),t?(this.navigationStart=t.navigationStart||t.fetchStart||void 0,this.fetchStart=t.fetchStart||void 0,this.responseStart=t.responseStart||void 0,navigator.userAgent.match(/Firefox\/[78]\./)&&(this.navigationStart=t.unloadEventStart||t.fetchStart||void 0)):QTABMR.warn("This browser doesn't support the WebTiming API","rt"))},validateLoadTimestamp:function(e,t,n){var r;return t&&t.timing&&t.timing.loadEventEnd?t.timing.loadEventEnd:"xhr"!==n||t&&QTABMR.utils.inArray(t.initiator,QTABMR.constants.BEACON_TYPE_SPAS)?(r=QTABMR.getPerformance(),r&&r.timing?r.timing.loadEventEnd?r.timing.loadEventEnd:e:QTABMR.t_onload||QTABMR.t_lstart||QTABMR.t_start||e):e},setPageLoadTimers:function(e,t,r){var i,o;if(!("xhr"===e||"early"===e&&r&&QTABMR.utils.inArray(r.initiator,QTABMR.constants.BEACON_TYPE_SPAS))&&(n.initFromCookie(),n.initFromNavTiming(),QTABMR.addVar("rt.start",this.navigationStartSource),n.checkPreRender()))return!1;if("xhr"===e)if(r.timers)for(var a in r.timers)r.timers.hasOwnProperty(a)&&QTABMR.plugins.RT.setTimer(a,r.timers[a]);else r&&r.timing&&(o=r.timing.fetchStart,("undefined"==typeof o||r.timing.responseEnd>=o)&&(i=r.timing.responseEnd));else n.responseStart?n.responseStart>=n.navigationStart&&n.responseStart>=n.fetchStart&&(i=n.responseStart):n.timers.hasOwnProperty("t_page")?QTABMR.plugins.RT.endTimer("t_page"):n.t_fb_approx&&(i=n.t_fb_approx);return i&&"early"!==e&&(o?QTABMR.plugins.RT.setTimer("t_resp",o,i):QTABMR.plugins.RT.endTimer("t_resp",i),"load"===e&&n.timers.t_load?QTABMR.plugins.RT.setTimer("t_page",n.timers.t_load.end-i):i>t?QTABMR.addVar("t_page.inv",1,!0):0===t-i&&r&&r.timing&&r.timing.requestStart&&n.timers.t_resp&&n.timers.t_resp.delta?QTABMR.plugins.RT.setTimer("t_page",t-r.timing.requestStart-n.timers.t_resp.delta):QTABMR.plugins.RT.setTimer("t_page",t-i)),"load"===e&&n.timers.hasOwnProperty("t_postrender")&&(QTABMR.plugins.RT.endTimer("t_postrender"),QTABMR.plugins.RT.endTimer("t_prerender")),!0},setSupportingTimestamps:function(e,t){e&&QTABMR.addVar("rt.tstart",e,!0),"number"==typeof n.navigationStart&&n.navigationStart!==e&&QTABMR.addVar("rt.nstart",n.navigationStart,!0),"number"==typeof n.t_start&&n.t_start!==e&&QTABMR.addVar("rt.cstart",n.t_start,!0),QTABMR.addVar("rt.bstart",QTABMR.t_start,!0),QTABMR.t_lstart&&QTABMR.addVar("rt.blstart",QTABMR.t_lstart,!0),"early"===t?QTABMR.addVar("rt.end",e?e:QTABMR.now(),!0):n.timers.t_done&&QTABMR.addVar("rt.end",n.timers.t_done.end,!0)},determineTStart:function(e,t){var r;return"xhr"===e||"early"===e&&t&&"spa"===t.initiator?(t&&t.name&&n.timers[t.name]?r=n.timers[t.name].start:t&&t.timing&&t.timing.requestStart&&(r=t.timing.requestStart),"undefined"==typeof r&&t&&QTABMR.utils.inArray(t.initiator,QTABMR.constants.BEACON_TYPE_SPAS)?QTABMR.addVar("rt.start","none"):QTABMR.addVar("rt.start","manual"),n.cached_xhr_start=r):(n.navigationStart?r=n.navigationStart:n.t_start&&2!==n.navigationType?(r=n.t_start,QTABMR.addVar("rt.start","cookie")):n.cached_t_start?r=n.cached_t_start:(QTABMR.addVar("rt.start","none"),r=void 0),n.cached_t_start=r),QTABMR.debug("Got start time: "+r,"rt"),r},page_ready:check_visibility:prerenderToVisible:function(){n.onloadfired&&n.autorun&&(QTABMR.debug("Transitioned from prerender to "+QTABMR.visibilityState(),"rt"),QTABMR.addVar("vis.pre","1",!0),QTABMR.plugins.RT.done(null,"visible"))},page_unload:function(e){QTABMR.debug("Unload called when unloadfired = "+this.unloadfired,"rt"),this.unloadfired||QTABMR.plugins.RT.done(e,"unload"),this.updateCookie(!n.navigationStart&&n.strict_referrer?{r:QTABMR.utils.hashString(t.URL)}:null,"beforeunload"===e.type?"ul":"hd"),this.unloadfired=!0},_iterable_click:function(e,t,n,r){var i;if(n){for(QTABMR.debug(e+" called with "+n.nodeName,"rt");n&&n.nodeName&&n.nodeName.toUpperCase()!==t;)n=n.parentNode;n&&n.nodeName&&n.nodeName.toUpperCase()===t&&(QTABMR.debug("passing through","rt"),this.refreshSession(),this.maybeResetSession(QTABMR.now()),i=r(n),this.updateCookie({nu:QTABMR.utils.hashString(i)},"cl"),QTABMR.addVar("nu",QTABMR.utils.cleanupURL(i),!0))}},onclick:markComplete:onsubmit:onconfig:function(e){e.beacon_url&&(n.beacon_url=e.beacon_url),e.RT&&(e.RT.oboError&&!isNaN(e.RT.oboError)&&e.RT.oboError>n.oboError&&(n.oboError=e.RT.oboError),e.RT.loadTime&&!isNaN(e.RT.loadTime)&&e.RT.loadTime>n.loadTime&&(n.loadTime=e.RT.loadTime,n.timers.t_done&&!isNaN(n.timers.t_done.delta)&&(n.loadTime+=n.timers.t_done.delta)))},domloaded:clear:spaNavigation:function(){n.onloadfired=!0}},QTABMR.plugins.RT={init:function(r){return QTABMR.debug("init RT","rt"),e!==QTABMR.window&&(e=QTABMR.window),r&&r.CrossDomain&&r.CrossDomain.sending&&(n.crossdomain_sending=!0),e&&e.document?(t=e.document,QTABMR.utils.pluginConfig(n,r,"RT",["cookie","cookie_exp","session_exp","strict_referrer"]),r&&"undefined"!=typeof r.autorun&&(n.autorun=r.autorun),r&&r.beacon_url&&((!n.beacon_url||r.force_beacon_url)&&(n.beacon_url=r.beacon_url),n.next_beacon_url=r.beacon_url),"undefined"!=typeof t&&(n.r=QTABMR.utils.hashQueryString(t.referrer,!0)),n.initFromCookie(),n.initialized?this:(n.complete=!1,n.timers={},n.check_visibility(),QTABMR.subscribe("page_ready",n.page_ready,null,n),QTABMR.subscribe("visibility_changed",n.check_visibility,null,n),QTABMR.subscribe("prerender_to_visible",n.prerenderToVisible,null,n),QTABMR.subscribe("page_ready",this.done,"load",this),QTABMR.subscribe("xhr_load",this.done,"xhr",this),QTABMR.subscribe("before_early_beacon",this.done,"early",this),QTABMR.subscribe("dom_loaded",n.domloaded,null,n),QTABMR.subscribe("page_unload",n.page_unload,null,n),QTABMR.subscribe("click",n.onclick,null,n),QTABMR.subscribe("form_submit",n.onsubmit,null,n),QTABMR.subscribe("before_beacon",this.addTimersToBeacon,"beacon",this),QTABMR.subscribe("beacon",n.clear,null,n),QTABMR.subscribe("error",n.markComplete,null,n),QTABMR.subscribe("config",n.onconfig,null,n),QTABMR.subscribe("spa_navigation",n.spaNavigation,null,n),QTABMR.subscribe("interaction",n.markComplete,null,n),QTABMR.getBeaconURL=function(){return n.beacon_url},n.initialized=!0,this)):void 0},startTimer:function(e,t){return e&&("t_page"===e&&this.endTimer("t_resp",t),n.timers[e]={start:"number"==typeof t?t:QTABMR.now()}),this},endTimer:function(e,t){return e&&(n.timers[e]=n.timers[e]||{},void 0===n.timers[e].end&&(n.timers[e].end="number"==typeof t?t:QTABMR.now())),this},clearTimer:function(e){return e&&delete n.timers[e],this},setTimer:function(e,t,r){return e&&(n.timers[e]="undefined"!=typeof r?{start:t,end:r,delta:r-t}:{delta:t}),this},addTimersToBeacon:function(e,t){var r,i,o=[];for(r in n.timers)if(n.timers.hasOwnProperty(r)){if(i=n.timers[r],"number"!=typeof i.delta&&("number"!=typeof i.start&&(i.start="xhr"===t?n.cached_xhr_start:n.cached_t_start),i.delta=i.end-i.start),isNaN(i.delta))continue;n.basic_timers.hasOwnProperty(r)?QTABMR.addVar(r,i.delta,!0):o.push(r+"|"+i.delta)}o.length&&QTABMR.addVar("t_other",o.join(","),!0),"beacon"!==t||e&&"undefined"!=typeof e.early||(n.timers={},n.complete=!1)},done:function(e,t){if(QTABMR.debug("Called done: "+t,"rt"),QTABMR.plugins.RT){var r,i,o=QTABMR.now(),a=!1;return n.complete=!1,i=n.validateLoadTimestamp(o,e,t),"load"!==t&&"visible"!==t&&"xhr"!==t&&"early"!==t||n.setPageLoadTimers(t,i,e)?(("load"===t||"visible"===t||"early"===t&&(!e||"undefined"==typeof e.initiator||"spa_hard"===e.initiator)||"xhr"===t&&e&&"spa_hard"===e.initiator)&&n.getQtaBoomerangTimings(),r=n.determineTStart(t,e),n.refreshSession(),n.maybeResetSession(i,r),"early"!==t&&this.endTimer("t_done",i),e&&"xhr"===e.initiator&&this.setTimer("t_done",e.timing.requestStart,e.timing.loadEventEnd),n.setSupportingTimestamps(r,t),this.addTimersToBeacon(null,t),QTABMR.setReferrer(n.r),"xhr"===t&&e&&e&&e.data&&(e=e.data),"xhr"===t&&e&&(a=e.subresource,e.url&&QTABMR.addVar("u",QTABMR.utils.cleanupURL(e.url.replace(/#.*/,"")),!0),e.status&&(e.status<-1||e.status>=400)&&QTABMR.addVar("http.errno",e.status,!0),e.method&&"GET"!==e.method&&QTABMR.addVar("http.method",e.method,!0),e.type&&"xhr"!==e.type&&QTABMR.addVar("http.type",e.type[0],!0),e.headers&&QTABMR.addVar("http.hdr",e.headers,!0),e.synchronous&&QTABMR.addVar("xhr.sync",1,!0),e.initiator&&QTABMR.addVar("http.initiator",e.initiator,!0),e.responseBodyNotUsed&&QTABMR.addVar("fetch.bnu",1,!0),e.responseUrl&&QTABMR.addVar("xhr.ru",QTABMR.utils.cleanupURL(e.responseUrl),!0)),a&&"passive"!==a&&QTABMR.addVar("rt.subres",1,!0),("load"===t||"visible"===t||"xhr"===t&&!a&&"xhr"!=e.initiator||"unload"===t&&!n.onloadfired&&n.autorun&&!n.crossdomain_sending)&&(n.incrementSessionDetails(),n.updateCookie(null,"ld")),QTABMR.addVar({"rt.tt":n.loadTime,"rt.obo":n.oboError},void 0,!0),n.updateCookie(),"unload"===t&&(QTABMR.addVar("rt.quit","",!0),n.onloadfired||QTABMR.addVar("rt.abld","",!0),n.visiblefired||QTABMR.addVar("rt.ntvu","",!0)),"early"!==t&&(n.complete=!0),QTABMR.sendBeacon(n.beacon_url),this):this}},is_complete:updateCookie:function(){n.updateCookie()},getCookie:function(){var e,t,r;return n.cookie?(e=QTABMR.utils.getSubCookies(QTABMR.utils.getCookie(n.cookie))||{},e&&(e.z&o?(t=36,r=parseInt(e.ss||0,36)):(t=10,r=0),e.ss=parseInt(e.ss||0,t),e.tt=parseInt(e.tt||0,t),e.obo=parseInt(e.obo||0,t),e.sl=parseInt(e.sl||0,t),e.se&&(e.se=parseInt(e.se,t)||i),e.ld&&(e.ld=r+parseInt(e.ld,t)),e.ul&&(e.ul=r+parseInt(e.ul,t)),e.cl&&(e.cl=r+parseInt(e.cl,t)),e.hd&&(e.hd=r+parseInt(e.hd,t))),e):!1},incrementSessionDetails:function(){n.incrementSessionDetails()},navigationStart:)}(window),function(){var e={done:function(){var e=QTABMR.plugins.PaintTiming.getTimingFor("first-paint")||QTABMR.plugins.PaintTiming.getTimingFor("first-contentful-paint");if(e){var t,n=QTABMR.window,r=n.document,i=function(e){var t=!1;if(e.getBoundingClientRect){var i=e.getBoundingClientRect();t={top:Math.max(i.top,0),left:Math.max(i.left,0),bottom:Math.min(i.bottom,n.innerHeight||r.documentElement.clientHeight),right:Math.min(i.right,n.innerWidth||r.documentElement.clientWidth)},t.bottom<=t.top||t.right<=t.left?t=!1:t.area=(t.bottom-t.top)*(t.right-t.left)}return t},o=a=function(){for(var e=r.getElementsByTagName("*"),t=/url\(.*(http.*)\)/gi,a=0;a<e.length;a++){var s=e[a],u=n.getComputedStyle(s);if("IMG"==s.tagName&&o(s,s.src),u["background-image"]){t.lastIndex=0;var c=t.exec(u["background-image"]);c&&c.length>1&&o(s,c[1].replace('"',""))}if("IFRAME"==s.tagName)try{var l=i(s);if(l){var f=done(s.contentWindow);f&&d.push({tm:f,area:l.area,rect:l})}}catch(p){}}},s=u=c=function(){if(l.length){t=0;for(var n=0,r=0,i=0;i<l.length;i++){var o=l[i].tm-n;o>0&&1>r&&(t+=(1-r)*o),n=l[i].tm,r=l[i].progress}}else t=e},d=[],l=[],f=.1;try{a(),s(),u(),c()}catch(p){}QTABMR.addVar("nm_si",t)}},clear:;QTABMR.plugins.SpeedIndex={init:function(){return e.initialized||(QTABMR.subscribe("before_beacon",e.done,null,e),QTABMR.subscribe("beacon",e.clear,null,e),e.initialized=!0),this},is_complete:function(){return!0}}}(),function(){if(!QTABMR.plugins.PaintTiming){var e={"first-paint":"fp","first-contentful-paint":"fcp","largest-contentful-paint":"lcp"},t={initialized:!1,complete:!1,supported:null,timingCache:{},observer:null,externalMetrics:{},done:function(n,r){var i,o,a;if(this.complete)return this;if("load"!==r&&(!n||"spa_hard"!==n.initiator))return this.complete=!0,this;if(i=QTABMR.getPerformance(),!i||"function"!=typeof i.getEntriesByType)return this.complete=!0,void 0;if(o=i.getEntriesByType("paint"),o&&o.length){for(QTABMR.info("This user agent supports PaintTiming","pt"),a=0;a<o.length;a++)t.timingCache[o[a].name]=o[a].startTime,e[o[a].name]&&QTABMR.addVar("pt."+e[o[a].name],Math.floor(o[a].startTime),!0);this.complete=!0,QTABMR.sendBeacon()}},onObserver:function(e){var n=e.getEntries();if(0!==n.length){var r=n[n.length-1],i=r.renderTime||r.loadTime;t.timingCache[r.entryType]=i,QTABMR.addVar("pt.lcp",Math.floor(i),!0),t.externalMetrics.lcp=function(){return Math.floor(i)}}}};QTABMR.plugins.PaintTiming={init:function(){return this.is_supported()||(t.complete=!0,t.initialized=!0),t.complete||"hidden"!==QTABMR.visibilityState()||(QTABMR.addVar("pt.hid",1,!0),t.complete=!0),t.initialized||(QTABMR.subscribe("page_ready",t.done,"load",t),QTABMR.subscribe("xhr_load",t.done,"xhr",t),QTABMR.subscribe("before_unload",t.done,null,t),"function"==typeof QTABMR.window.PerformanceObserver&&"function"==typeof window.LargestContentfulPaint&&(t.observer=new QTABMR.window.PerformanceObserver(t.onObserver),t.observer.observe({type:"largest-contentful-paint",buffered:!0})),t.initialized=!0),this},is_complete:function(){return!0},is_enabled:function(){return t.initialized&&this.is_supported()},is_supported:function(){var e;if(null!==t.supported)return t.supported;var e=QTABMR.getPerformance();return t.supported=e&&"undefined"!=typeof window.PerformancePaintTiming&&"function"==typeof e.getEntriesByType,t.supported},getTimingFor:function(e){var n,r,i;if(t.timingCache[e])return t.timingCache[e];if(this.is_supported()){var n=QTABMR.getPerformance();if(n&&"function"==typeof n.getEntriesByType&&(r=n.getEntriesByType("paint"),r&&r.length))for(i=0;i<r.length;i++)if(r[i].name===e)return t.timingCache[e]=r[i].startTime,t.timingCache[e]}},metrics:t.externalMetrics}}}(),/*
 * Copyright (c), Buddy Brewer.
 */
function(){function e(e,t){return"number"!=typeof t||0===t?void 0:Math.floor((e||0)+t)}if(!QTABMR.plugins.NavigationTiming){var t={complete:!1,fullySent:!1,sendBeacon:xhr_done:function(e){var n;if(e&&"spa_hard"===e.initiator)return t.done(e),void 0;if(e&&"spa"===e.initiator)return t.sendBeacon(),void 0;var r,i,o=(QTABMR.window,{});if(e){if(e.data&&(e=e.data),n=QTABMR.getPerformance(),n&&e.restiming){o={nt_red_st:e.restiming.redirectStart,nt_red_end:e.restiming.redirectEnd,nt_fet_st:e.restiming.fetchStart,nt_dns_st:e.restiming.domainLookupStart,nt_dns_end:e.restiming.domainLookupEnd,nt_con_st:e.restiming.connectStart,nt_con_end:e.restiming.connectEnd,nt_req_st:e.restiming.requestStart,nt_res_st:e.restiming.responseStart,nt_res_end:e.restiming.responseEnd},e.restiming.secureConnectionStart&&(o.nt_ssl_st=e.restiming.secureConnectionStart);for(i in o)o.hasOwnProperty(i)&&o[i]&&(o[i]+=n.timing.navigationStart,o[i]=Math.floor(o[i]))}e.timing&&(r=e.timing,o.nt_req_st||(o.nt_req_st=r.requestStart),o.nt_res_st||(o.nt_res_st=r.responseStart),o.nt_res_end||(o.nt_res_end=r.responseEnd),o.nt_domint=r.domInteractive,o.nt_domcomp=r.domComplete,o.nt_load_st=r.loadEventEnd,o.nt_load_end=r.loadEventEnd);for(i in o)o.hasOwnProperty(i)&&!o[i]&&delete o[i];QTABMR.addVar(o,void 0,!0),t.sendBeacon()}},done:function(){var n,r,i,o,a,s,u=QTABMR.window,c={},d=0,l=!1;if(this.complete)return this;if(n=QTABMR.getPerformance()){"function"==typeof n.getEntriesByType&&(o=n.getEntriesByType("navigation"),o&&o.length?(QTABMR.info("This user agent supports NavigationTiming2","nt"),o=o[0],d=n.timing?n.timing.navigationStart:0):o=void 0),!o&&n.timing&&(QTABMR.info("This user agent supports NavigationTiming","nt"),o=n.timing),o&&(c={nt_nav_st:n.timing?n.timing.navigationStart:0,nt_red_st:e(d,o.redirectStart),nt_red_end:e(d,o.redirectEnd),nt_fet_st:e(d,o.fetchStart),nt_dns_st:e(d,o.domainLookupStart),nt_dns_end:e(d,o.domainLookupEnd),nt_con_st:e(d,o.connectStart),nt_con_end:e(d,o.connectEnd),nt_req_st:e(d,o.requestStart),nt_res_st:e(d,o.responseStart),nt_res_end:e(d,o.responseEnd),nt_domloading:e(d,o.domLoading),nt_domint:e(d,o.domInteractive),nt_domcontloaded_st:e(d,o.domContentLoadedEventStart),nt_domcontloaded_end:e(d,o.domContentLoadedEventEnd),nt_domcomp:e(d,o.domComplete),nt_load_st:e(d,o.loadEventStart),nt_load_end:e(d,o.loadEventEnd),nt_unload_st:e(d,o.unloadEventStart),nt_unload_end:e(d,o.unloadEventEnd)},!c.nt_domloading&&n&&n.timing&&n.timing.domLoading&&(c.nt_domloading=n.timing.domLoading),o.secureConnectionStart&&(c.nt_ssl_st=e(d,o.secureConnectionStart)),n.timing&&n.timing.msFirstPaint&&(c.nt_first_paint=n.timing.msFirstPaint),o.workerStart&&(c.nt_worker_start=e(d,o.workerStart)),(o.decodedBodySize||o.transferSize)&&(c.nt_enc_size=o.encodedBodySize,c.nt_dec_size=o.decodedBodySize,c.nt_trn_size=o.transferSize),o.nextHopProtocol&&(c.nt_protocol=o.nextHopProtocol)),!c.nt_first_paint&&QTABMR.plugins.PaintTiming&&(l=QTABMR.plugins.PaintTiming.is_supported(),a=QTABMR.plugins.PaintTiming.getTimingFor("first-paint"),a&&(c.nt_first_paint=e(d,a))),c.nt_protocol&&c.nt_first_paint||o&&""===o.nextHopProtocol||l||!u.chrome||"function"!=typeof u.chrome.loadTimes||(i=u.chrome.loadTimes(),i&&(c.nt_spdy=i.wasFetchedViaSpdy?1:0,c.nt_cinf=i.connectionInfo,"number"==typeof i.firstPaintTime&&0!==i.firstPaintTime&&(c.nt_first_paint=Math.round(1e3*i.firstPaintTime)))),n.navigation&&(r=n.navigation,c.nt_red_cnt=r.redirectCount,c.nt_nav_type=r.type);for(s in c)c.hasOwnProperty(s)&&void 0===c[s]&&delete c[s];QTABMR.addVar(c,void 0,!0),o&&(o.requestStart&&o.navigationStart&&o.requestStart<o.navigationStart||o.responseStart&&o.navigationStart&&o.responseStart<o.navigationStart||o.responseStart&&o.fetchStart&&o.responseStart<o.fetchStart||o.navigationStart&&o.fetchStart<o.navigationStart||o.responseEnd&&o.responseEnd>QTABMR.now()+864e5)&&QTABMR.addVar("nt_bad",1,!0),c.nt_load_end>0&&(this.fullySent=!0)}t.sendBeacon()},clear:prerenderToVisible:function(){this.complete=!1,this.done()},onBeforeEarlyBeacon:;QTABMR.plugins.NavigationTiming={init:function(){return t.initialized||(QTABMR.subscribe("page_ready",t.done,null,t),QTABMR.subscribe("prerender_to_visible",t.prerenderToVisible,null,t),QTABMR.subscribe("before_early_beacon",t.onBeforeEarlyBeacon,null,t),QTABMR.subscribe("xhr_load",t.xhr_done,null,t),QTABMR.subscribe("before_unload",t.done,null,t),QTABMR.subscribe("beacon",t.clear,null,t),t.initialized=!0),this},is_complete:function(){return!0}}}}(),function(){function e(e,t){function n(e){return function(t,n,r){var i,o;if(-1!==n.indexOf(S)){for(i=n.split(S),o=0;o<i.length-1;o++)t.push(i[o]),t.push(S);n=i.slice(-1)}return"number"==typeof e&&e>r&&(n+="/"),t.concat(n)}}var r,i,o,a,s,u,c,d,l={};for(r in e){for(i=r,o=0;o<y.xssBreakWords.length;o++)i=i.replace(y.xssBreakWords[o],"$1"+S+"$2");if(e.hasOwnProperty(r))for(a=e[r],t?(s=i.split("/"),s=[s[0]+"//",s[2]+(s.length>3?"/":"")].concat(s.slice(3).reduce(n(s.length-4),[]))):s=i.split(""),c=l,o=0;o<s.length;o++)u=s[o],d=c[u],"undefined"==typeof d?c=c[u]=o===s.length-1?a:{}:"string"==typeof d?c=c[u]={"|":d}:o===s.length-1?c[u]["|"]=a:c=c[u]}return l}function t(e,n){var r,i,o,a=0,s=[];for(r in e)e.hasOwnProperty(r)&&s.push(r);for(var u=0;u<s.length;u++)r=s[u],"object"==typeof e[r]&&(i=t(e[r],!1),i&&(delete e[r],r===S?(r=i.name,a++):r+=i.name,e[r]=i.value)),a++;return 1===a?n?(o={},o[r]=e[r],o):{name:r,value:e[r]}:n?e:!1}function n(e){return"number"!=typeof e&&(e=0),Math.ceil(e?e:0)}function r(e,t){"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0);var n=Math.round(e?e:0),r=Math.round(t?t:0);return 0===n?0:n-r}function i(e){var t;try{if(t=e.location&&e.location.href,t=e.document,"performance"in e&&e.performance)return!0}catch(n){}return!1}function o(e){var t=0;return i(e)&&e.performance.timing&&e.performance.timing.navigationStart&&(t=e.performance.timing.navigationStart),t}function a(e,t,n,r,u){ar l,f,m,g,h,T,R,M,B,A,v,_=[],w={},S={};if("undefined"==typeof t&&(t=!0),"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=0),r>10)return _;try{if(!i(e))return _;if(m=o(e),A=c(e,u),v=e.document.createElement("a"),s(v,w,"script"),s(v,S,"link"),T=e.document.getElementsByTagName("iframe"),T&&T.length)for(l=0;l<T.length;l++)g=o(T[l].contentWindow),h=0,g>m&&(h=n+(g-m)),v.href=T[l].src,_=_.concat(a(T[l].contentWindow,!1,h,r+1,A[v.href]));if("function"!=typeof e.performance.getEntriesByType)return _;t&&(f=e.performance.getEntriesByType("navigation"),f&&1===f.length?(R=f[0],_.push({name:e.location.href,startTime:0,initiatorType:"html",redirectStart:R.redirectStart,redirectEnd:R.redirectEnd,fetchStart:R.fetchStart,domainLookupStart:R.domainLookupStart,domainLookupEnd:R.domainLookupEnd,connectStart:R.connectStart,secureConnectionStart:R.secureConnectionStart,connectEnd:R.connectEnd,requestStart:R.requestStart,responseStart:R.responseStart,responseEnd:R.responseEnd,workerStart:R.workerStart,encodedBodySize:R.encodedBodySize,decodedBodySize:R.decodedBodySize,transferSize:R.transferSize,serverTiming:d(R)})):e.performance.timing&&(M=e.performance.timing,0!==M.navigationStart&&M.responseEnd<=M.navigationStart+36e5&&_.push({name:e.location.href,startTime:0,initiatorType:"html",redirectStart:M.redirectStart?M.redirectStart-M.navigationStart:0,redirectEnd:M.redirectEnd?M.redirectEnd-M.navigationStart:0,fetchStart:M.fetchStart?M.fetchStart-M.navigationStart:0,domainLookupStart:M.domainLookupStart?M.domainLookupStart-M.navigationStart:0,domainLookupEnd:M.domainLookupEnd?M.domainLookupEnd-M.navigationStart:0,connectStart:M.connectStart?M.connectStart-M.navigationStart:0,secureConnectionStart:M.secureConnectionStart?M.secureConnectionStart-M.navigationStart:0,connectEnd:M.connectEnd?M.connectEnd-M.navigationStart:0,requestStart:M.requestStart?M.requestStart-M.navigationStart:0,responseStart:M.responseStart?M.responseStart-M.navigationStart:0,responseEnd:M.responseEnd?M.responseEnd-M.navigationStart:0})));var E=e.performance.getEntriesByType("resource"),x=[];for(e===QTABMR.window&&y.collectedEntries&&(Array.prototype.push.apply(E,y.collectedEntries),y.collectedEntries=[]),l=0;E&&l<E.length;l++){M=E[l],B={name:M.name,initiatorType:M.initiatorType,encodedBodySize:M.encodedBodySize,decodedBodySize:M.decodedBodySize,transferSize:M.transferSize,serverTiming:d(M),visibleDimensions:A[M.name],latestTime:p(M)};for(var k=0;k<b.length;k++){var P=b[k];B[P]="startTime"===P||M[P]?M[P]+n:0}if(M.hasOwnProperty("_data")&&(B._data=M._data),("script"===M.initiatorType||"link"===M.initiatorType)&&w[M.name]){var C=w[M.name];for(B.scriptAttrs=(C.async?L:0)|(C.defer?O:0);1===C.nodeType&&"BODY"!==C.nodeName;)C=C.parentNode;B.scriptAttrs|="BODY"===C.nodeName?N:0}"link"===M.initiatorType&&S[M.name]&&QTABMR.utils.arrayFind(S[M.name].rel.split(/[\u0009\u000A\u000C\u000D\u0020]+/),function(e){return e=e.toLowerCase(),Q[e]?(B.linkAttrs=Q[e],!0):void 0}),x.push(B)}_=_.concat(x)}catch(F){return _}return _}function s(e,t,n){Array.prototype.forEach.call(e.ownerDocument.getElementsByTagName(n),function(n){e.href=n.currentSrc||n.src||"function"==typeof n.getAttribute&&n.getAttribute("xlink:href")||n.href,e.href.match(/^https?:\/\//)&&(t[e.href]=n)})}unction c(e,t){var n,r,i=["img","iframe","image"],o={},a=e.document,s=a.createElement("A");return t=t||[0,0,0,0],n=t[3]+(void 0!==e.pageXOffset)?e.pageXOffset:(a.documentElement||a.body.parentNode||a.body).scrollLeft,r=t[2]+(void 0!==e.pageYOffset)?e.pageYOffset:(a.documentElement||a.body.parentNode||a.body).scrollTop,i.forEach(function(e){var t,i,u,c,d,l,f,p=a.getElementsByTagName(e);for(i=0;i<p.length;i++)if(t=p[i],t&&(c=t.currentSrc||t.src||"function"==typeof t.getAttribute&&t.getAttribute("src")||t.getAttribute("xlink:href"),s.href=c,c=s.href,c&&!o[c]&&(u=t.getBoundingClientRect(),(u.height||t.offsetHeight)&&(u.width||t.offsetWidth)))){if(o[c]=[u.height||t.offsetHeight,u.width||t.offsetWidth,Math.round(u.top+r),Math.round(u.left+n)],!t.naturalHeight&&!t.naturalWidth)continue;y.getSrcsetDimensions&&t.currentSrc&&(t.srcset||t.parentNode&&t.parentNode.nodeName&&"PICTURE"===t.parentNode.nodeName.toUpperCase())?(d=t.isConnected?t.ownerDocument.createElement("IMG"):new QTABMR.window.Image,d.src=c):d=t,l=d.naturalHeight||t.naturalHeight,f=d.naturalWidth||t.naturalWidth,!l&&!f||o[c][0]===l&&o[c][1]===f||o[c].push(l,f)}}),o}function d(e,t,n){var r,i,s=a(QTABMR.window,!0,0,0),u=o(QTABMR.window),c={};if(!s||!s.length)return{entries:[]};s.sort(function(e,t){return e.startTime-t.startTime});var d=[];for(r=0;r<s.length;r++)if(i=s[r],"string"==typeof i.name&&!(0!==i.name.indexOf("http:")&&0!==i.name.indexOf("https:")||"function"==typeof QTABMR.getBeaconURL&&QTABMR.getBeaconURL()&&i.name.indexOf(QTABMR.getBeaconURL())>-1||e&&u+i.startTime<e)){if(t&&u+i.startTime>t)break;("undefined"==typeof n||"*"===n||!n.length||i.initiatorType&&QTABMR.utils.inArray(i.initiatorType,n))&&(R(c,i.serverTiming),d.push(i))}var l=M(c);return{entries:d,serverTiming:{lookup:l,indexed:B(l)}}}function l(e){var t,n,r,i;return e.encodedBodySize||e.decodedBodySize||e.transferSize?(t=e.transferSize,n=e.encodedBodySize,r=e.decodedBodySize,i=[n,t?t-n:"_",r?r-n:0],i.map(u).join(",").replace(/,+$/,"")):""}function f(e,t){var n,r,i;if(e&&t)for(n=0;n<t.length;n++)if(i=t[n],"string"==typeof i){if(r=e.indexOf(i),-1!==r){e=e.substr(0,r+i.length)+"...";break}}else i instanceof RegExp&&i.test(e)&&(e=e.replace(i,"$1")+"...");return QTABMR.utils.cleanupURL(e,y.urlLimit)}unction m(i,o){var a,s,c,p,m,g={},h={},T=d(i,o,y.trackedResourceTypes),R=T.entries,M=T.serverTiming;if(!R||!R.length)return{restiming:{},servertiming:[]};for(a=0;a<R.length;a++){s=R[a],c=_[s.initiatorType],"undefined"==typeof c&&(c=0),m=c+[r(s.startTime,0),r(s.responseEnd,s.startTime),r(s.responseStart,s.startTime),r(s.requestStart,s.startTime),r(s.connectEnd,s.startTime),r(s.secureConnectionStart,s.startTime),r(s.connectStart,s.startTime),r(s.domainLookupEnd,s.startTime),r(s.domainLookupStart,s.startTime),r(s.redirectEnd,s.startTime),r(s.redirectStart,s.startTime)].map(u).join(",").replace(/,+$/,"");var B=l(s);if(""!==B&&(m+=x+P+B),s.hasOwnProperty("scriptAttrs")&&(m+=x+C+s.scriptAttrs),s.serverTiming&&s.serverTiming.length&&(m+=x+F+s.serverTiming.reduce(function(e,t,n){var r=String("undefined"!=typeof t.duration?t.duration:t.value);"0."===r.substring(0,2)&&(r=r.substring(1));var i=t.name||t.metric,o=A(M.indexed[i].index,M.indexed[i].descriptions[t.description]);return e+=(n>0?",":"")+r+o},"")),s.hasOwnProperty("linkAttrs")&&(m+=x+I+s.linkAttrs),s.workerStart&&"number"==typeof s.workerStart&&0!==s.workerStart){var v=n(s.workerStart),Q=r(v,s.startTime);m+=x+U+u(Q)}if(p=f(s.name,y.trimUrls),s.hasOwnProperty("_data")){var b="";for(var w in s._data)s._data.hasOwnProperty(w)&&(b+=x+H+w+":"+s._data[w]);"undefined"==typeof g[p]?g[p]=m+b:g[p]+=b}else void 0!==g[p]?g[p]+="|"+m:g[p]=s.visibleDimensions?x+k+s.visibleDimensions.map(Math.round).map(u).join(",").replace(/,+$/,"")+"|"+m:m;s.visibleDimensions&&(h[s.latestTime]||(h[s.latestTime]=[]),h[s.latestTime].push(s.visibleDimensions))}return{restiming:t(e(g,y.splitAtPath),!0),servertiming:M.lookup}}unction h(e){var t;if(!e||!e.length)return 0;e.sort(;var n=g(e),r=[],i=0;for(t=0;t<n.length;t++){var o=n[t];o.fetchStart<i&&(o.fetchStart=i),o.fetchStart<o.responseEnd&&(r.push(o),i=o.responseEnd)}var a=g(r),s=0;for(t=0;t<a.length;t++)s+=a[t].responseEnd-a[t].fetchStart;return s}function T(e,t){var n;"undefined"!=typeof JSON&&(n=m(e,t),n&&(QTABMR.info("Client supports Resource Timing API","restiming"),v(n)))}function R(e,t){(t||[]).forEach(function(t){var n=t.name||t.metric;"undefined"==typeof e[n]&&(e[n]={count:0,counts:{}});var r=e[n];r.counts[t.description]=r.counts[t.description]||0,r.counts[t.description]++,r.count++})}function M(e){return Object.keys(e).sort(.reduce(function(t,n){var r=Object.keys(e[n].counts).sort(;return t.push(1===r.length&&""===r[0]?n:[n].concat(r)),t},[])}function B(e){return e.reduce(function(e,t,n){var r,i;return Array.isArray(t)?(r=t[0],i=t.slice(1).reduce({})):(r=t,i={"":0}),e[r]={index:n,descriptions:i},e},{})}function A(e,t){var n="";return e&&(n+=e),t&&(n+="."+t),n.length&&(n=":"+n),n}ar y;if(!QTABMR.plugins.ResourceTiming){var _={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5,html:6,image:7,beacon:8,fetch:9,iframe:"a",subdocument:"a",body:"b",input:"c",frame:"a",object:"d",video:"e",audio:"f",source:"g",track:"h",embed:"i",eventsource:"j",navigation:6},Q={prefetch:1,preload:2,prerender:3,stylesheet:4},b=["startTime","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","responseEnd","workerStart"],w=[/(h)(ref)/gi,/(s)(rc)/gi,/(a)(ction)/gi],S="\n",E=500,x="*",k="0",P="1",C="2",L=1,O=2,N=4,F="3",I="4",H="5",U="6";y={complete:!1,sentNavBeacon:!1,initialized:!1,supported:null,xhr_load:function(e){e&&e.restiming&&v(e.restiming),this.complete||(this.complete=!0,QTABMR.sendBeacon())},xssBreakWords:w,urlLimit:E,clearOnBeacon:!1,trimUrls:[],serverTiming:!0,monitorClearResourceTimings:!1,splitAtPath:!1,getSrcsetDimensions:!1,trackedResourceTypes:"*",done:function(){this.sentNavBeacon||(T(),this.complete=!0,this.sentNavBeacon=!0,QTABMR.sendBeacon())},onBeacon:function(){var e=QTABMR.getPerformance();if(y.clearOnBeacon&&e){var t=e.clearResourceTimings||e.webkitClearResourceTimings;t&&"function"==typeof t&&t.call(e)}},prerenderToVisible:,QTABMR.plugins.ResourceTiming={init:function(e){if(QTABMR.utils.pluginConfig(y,e,"ResourceTiming",["xssBreakWords","clearOnBeacon","urlLimit","trimUrls","trackedResourceTypes","serverTiming","monitorClearResourceTimings","splitAtPath","getSrcsetDimensions"]),y.initialized)return this;if(this.is_supported()){if(QTABMR.subscribe("page_ready",y.done,null,y),QTABMR.subscribe("prerender_to_visible",y.prerenderToVisible,null,y),QTABMR.subscribe("xhr_load",y.xhr_load,null,y),QTABMR.subscribe("beacon",y.onBeacon,null,y),QTABMR.subscribe("before_unload",y.done,null,y),y.monitorClearResourceTimings){var t=this;QTABMR.window.performance.clearResourceTimings=function(e){return function(){t.addResources(QTABMR.window.performance.getEntriesByType("resource")),e.apply(QTABMR.window.performance,arguments)}}(QTABMR.window.performance.clearResourceTimings)}}else y.complete=!0;return y.initialized=!0,this},is_complete:function(){return!0},is_enabled:is_supported:function(){var e;if(null!==y.supported)return y.supported;var e=QTABMR.getPerformance();return y.supported=e&&"function"==typeof e.getEntriesByType&&"undefined"!=typeof window.PerformanceResourceTiming,y.supported},addResources:function(e,t){if(this.is_supported()&&QTABMR.utils.isArray(e)){if(y.collectedEntries=y.collectedEntries||[],"number"==typeof t){var n=QTABMR.window.performance.timeOrigin||QTABMR.window.performance.timing.navigationStart,r=t-n;e=QTABMR.utils.arrayFilter(e,}Array.prototype.push.apply(y.collectedEntries,e)}},getCompressedResourceTiming:m,getFilteredResourceTiming:d,calculateResourceTimingUnion:h,addResourceTimingToBeacon:T,addToBeacon:v}}}(),function(){if(QTABMR.utils=QTABMR.utils||{},!QTABMR.utils||!QTABMR.utils.Compression){var e=QTABMR.utils.Compression={};e.jsUrl=function(t){function n(e){return/[^\w-.]/.test(e)?e=e.replace(/[^\w-.]/g,function(e){return"$"===e?"!":(e=e.charCodeAt(0),256>e?"*"+("00"+e.toString(16)).slice(-2):"**"+("0000"+e.toString(16)).slice(-4))}):e}var r=[];switch(typeof t){case"number":return isFinite(t)?"~"+t:"~null";case"string":return"~'"+n(t);case"boolean":return"~"+t;case"object":if(!t)return"~null";if(QTABMR.utils.isArray(t)){for(var i=0;i<t.length;i++)i in t&&(r[i]=e.jsUrl(t[i])||"~null");return"~("+(r.join("")||"~")+")"}for(var o in t)if(t.hasOwnProperty(o)){var a=e.jsUrl(t[o]);a&&r.push(n(o)+a)}return"~("+r.sort().join("~")+")";default:return void 0}}}}(),function(){var e={beforeBeacon:onBeacon:;QTABMR.plugins.JsErrorsCount={init:function(){return e.initialized||(QTABMR.subscribe("before_beacon",e.beforeBeacon,null,e),QTABMR.subscribe("beacon",e.onBeacon,null,e),e.initialized=!0),this},is_complete:function(){return!0}}}(),function(){var e={init:function(){this.initialized=!0,this.records=[],this.lastDomCount=0,this.observer=new PerformanceObserver(this.performanceObserverCallback.bind(this)),this.observer.observe({type:"resource",buffered:!0})},done:function(){if("interaction"!=QTABMR.getVar("http.initiator")){for(var e=0,t=0,n=0,r=0;r<this.records.length;r++){var i=this.records[r];(!i.transferSize||i.transferSize<=0)&&(n+=1),t+=1,e+=i.transferSize}QTABMR.addVar("qps.fcnt",n),QTABMR.addVar("qps.cnt",t),QTABMR.addVar("qps.sz",e);var o=this.lastDomCount||0;this.lastDomCount=document.getElementsByTagName("*").length,"spa"==QTABMR.getVar("http.initiator")?QTABMR.addVar("qps.domcnt",Math.max(this.lastDomCount-o,0)):QTABMR.addVar("qps.domcnt",this.lastDomCount),this.records=[]}},performanceObserverCallback:function(e){for(var t=e.getEntries(),n=0;n<t.length;n++)this.records.push(t[n])},onBeacon:;QTABMR.plugins.QtaPagesize={init:function(){return e.initialized?void 0:(e.init(),QTABMR.subscribe("before_beacon",e.done,null,e),QTABMR.subscribe("beacon",e.onBeacon,null,e),this)},is_complete:function(){return!0}}}(),function(){unction t(e){var t=QTABMR.utils.Compression&&QTABMR.utils.Compression.jsUrl||window.UserTimingCompression&&window.UserTimingCompression.jsUrl||QTABMR.window.UserTimingCompression&&QTABMR.window.UserTimingCompression.jsUrl;return t?t(e):window.JSON?JSON.stringify(e):""}function n(e,t,n,r,i){var o,a,d,l,f,p="",m=0;if(!n)return"";if(0===n.length)return"";if(t)for("undefined"==typeof n[r]&&(n[r]=0),o=r+1;i>=o;o++)"undefined"==typeof n[o]&&(n[o]=n[o-1]);for(o=r;i>=o;o++){if(m="number"!=typeof n[o]||isNaN(n[o])?0:n[o],e===s?d=63>=m?h.charAt(m):T+m.toString(36)+T:e===u?d=m.toString(36):e===c&&(d=99>m?9>=m?"0"+Math.max(m,0):m:"__"),i>=o+3&&(n[o+1]===m||0===m&&void 0===n[o+1])&&(n[o+2]===m||0===m&&void 0===n[o+2])&&(n[o+3]===m||0===m&&void 0===n[o+3])){for(a=1;i>o&&(n[o+1]===m||0===m&&void 0===n[o+1]);)a++,o++;l="*"+a.toString(36)+"*"+d}else l=d;(0!==m||o!==i)&&(e===u&&f&&(p+=","),f=!0,p+=l)}return f?e.toString()+p:""}var r;if(!QTABMR.plugins.Continuity){var i=100,o=6e4,a=500,s=0,u=1,c=2,d=0,l=1,f=2,p=3,m=4,g=5,h="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-_",T=".",R={passive:!0,capture:!0},M=QTABMR.getPerformance(),B={},A=M&&M.timing&&M.timing.navigationStart?M.timing.navigationStart:QTABMR.now(),v=function(e){function t(e,t,n){b[e]||(b[e]=[]),w[e]={compressMode:t?t:s,backfillLast:n}}unction a(e,t,n){"undefined"==typeof n&&(n=o()),b[e]&&(b[e][n]=t)}function u(e,t,n){"undefined"==typeof n&&(n=o()),"undefined"==typeof t&&(t=1),b[e]&&(b[e][n]||(b[e][n]=0),b[e][n]+=t)}function c(e,t,n){"undefined"==typeof t&&(t=o()),S.push({type:e,time:t,val:n}),S.length>r.logMaxEntries&&Array.prototype.splice.call(S,0,S.length-r.logMaxEntries)}function d(t,n){var r,o=0,a=0,s=1/0,u=0,c=Math.floor((n-e)/i);if(!b[t])return 0;for(var d in b[t])d=parseInt(d,10),d>=c&&b[t].hasOwnProperty(d)&&(r=b[t][d],o++,a+=r,s=Math.min(s,r),u=Math.max(u,r));return{total:a,count:o,min:s,max:u}}function l(e){var t,n,r,i,o,a,s=0;if(!QTABMR.window||!QTABMR.window.document||"function"!=typeof QTABMR.window.document.querySelectorAll)return 0;if(!M||"function"!=typeof M.getEntriesByType)return 0;if(t=e+", "+e+" * img, "+e+" * image",n=QTABMR.window.document.querySelectorAll(t),n&&n.length)for(r=0;r<n.length;r++){if(o=n[r].currentSrc||n[r].src||"function"==typeof n[r].getAttribute&&n[r].getAttribute("xlink:href"),!o&&"function"==typeof QTABMR.window.getComputedStyle){var u=QTABMR.window.getComputedStyle(n[r])&&QTABMR.window.getComputedStyle(n[r]).getPropertyValue("background");if(u){var c=u.match(/url\(["']?([^"']*)["']?\)/);c&&c.length>0&&(o=c[1])}}if(o&&(a=M.getEntriesByName(o),a&&a.length))for(i=0;i<a.length;i++)s=Math.max(s,a[i].responseEnd)}return s?Math.floor(s+A):0}function f(){var e=0;if(r.ttiWaitForFrameworkReady){if(!r.frameworkReady)return;e=r.frameworkReady}if(QTABMR.plugins.PaintTiming&&QTABMR.plugins.PaintTiming.is_supported()&&M&&M.timeOrigin){var t=QTABMR.plugins.PaintTiming.getTimingFor("largest-contentful-paint");t||(t=QTABMR.plugins.PaintTiming.getTimingFor("first-contentful-paint")),t||(t=QTABMR.plugins.PaintTiming.getTimingFor("first-paint")),t&&(e=Math.max(e,Math.round(t+M.timeOrigin)))}else if(M&&M.timing&&M.timing.msFirstPaint)e=Math.max(e,M.timing.msFirstPaint);else if(QTABMR.window&&QTABMR.window.chrome&&"function"==typeof QTABMR.window.chrome.loadTimes){var n=QTABMR.window.chrome.loadTimes();n&&n.firstPaintTime&&(e=Math.max(e,1e3*n.firstPaintTime))}return M&&M.timing&&M.timing.domContentLoadedEventEnd&&(e=Math.max(e,M.timing.domContentLoadedEventEnd)),r.ttiWaitForHeroImages&&(k=l(r.ttiWaitForHeroImages),k&&(e=Math.max(e,k))),e}function p(){for(var e="",t=0;t<S.length;t++){var n=S[t];0!==t&&(e+="|"),e+=n.type,e+=Math.round(n.time-A).toString(36);for(var i in n.val)n.val.hasOwnProperty(i)&&(e+=","+i,e+="number"==typeof n.val[i]?n.val[i].toString(36):n.val[i])}""!==e&&r.addToBeacon("c.l",e)}unction g(e){var t,n;for(t in b)b.hasOwnProperty(t)&&(n=m(t,e),""!==n&&r.addToBeacon("c.t."+t,n))}function h(t){var n=o(),a=0,s=0;if(r.sendLog&&"undefined"!=typeof t&&p(),r.sendTimeline&&"undefined"!=typeof t&&g(t),!E&&(x||(x=f()))&&(P&&(r.addToBeacon("c.tti.vr",B.timeToVisuallyReady()),r.addToBeacon("c.tti.fr",B.timeToFrameworkReady()),r.addToBeacon("c.tti.hi",B.timeToHeroImagesReady()),P=!1),b.longtask||b.fps||b.busy)){var u=Math.floor((x-e)/i);for(a=u;n>=a;a++)if(b.longtask&&b.longtask[a])s=0;else if(b.fps&&(!b.fps[a]||b.fps[a]<_))s=0;else if(b.busy&&b.busy[a]>Q)s=0;else if(b.interdly&&b.interdly[a])s=0;else if(s++,s>=v){E=e+(a-v)*i,E=Math.max(E,x);break}E>0&&r.addToBeacon("c.tti",B.timeToInteractive())}}unction R(){for(var e in b)b.hasOwnProperty(e)&&(b[e]=[]);S=[],P=!1}var v=5,y=20,_=y/(1e3/i),Q=50,b={},w={},S=[],E=0,x=0,k=0,P=!0;return QTABMR.fpsLog&&QTABMR.fpsLog.length&&(e=QTABMR.fpsLog[0]+A),B.timeToInteractive=function(){return E?E-A:void 0},B.timeToVisuallyReady=function(){return x?x-A:void 0},B.timeToHeroImagesReady=function(){return r.ttiWaitForHeroImages&&k?k-A:void 0},B.timeToFrameworkReady=function(){return r.ttiWaitForFrameworkReady&&r.frameworkReady?r.frameworkReady-A:void 0},B.log=function(){return S},{register:t,set:a,log:c,increment:u,getTimeBucket:o,getStats:d,analyze:h,stop:T,onBeacon:R}},y=function(e){function t(e){var t,n;if(s)for(t=e.getEntries(),n=0;n<t.length;n++)t[n].hadRecentInput||(u+=t[n].value)}function n(){r.addToBeacon("c.cls",B.clsScore())}unction o(){s=!1,c.disconnect(),i()}function a(){i()}if(e.PerformanceObserver&&e.LayoutShift){var s=!0,u=0,c=new e.PerformanceObserver(t);try{c.observe({type:"layout-shift",buffered:!0})}catch(d){return}return B.clsScore=function(){return u},{clearClsScore:i,analyze:n,stop:o,onBeacon:a}}},_=function(e,n){function i(e){var t,r;if(T){for(t=e.getEntries(),Array.prototype.push.apply(h,t),r=0;r<t.length;r++)R+=t[r].duration;n.increment("longtask",t.length)}}nction u(){var e,n,i,o,a,s=[],u=[];if(0!==h.length){for(e=0;e<h.length;e++){for(i=h[e],o={s:Math.round(i.startTime).toString(36),d:Math.ceil(i.duration).toString(36),n:l[i.name]?l[i.name]:0},u=[],n=0;n<i.attribution.length;n++)if(a=i.attribution[n],"script"!==a.name||"iframe"!==a.containerType||a.containerName||a.containerId||a.containerSrc){var c=a.containerName?a.containerName:void 0,d=a.containerId?a.containerId:void 0;c===d&&(c=void 0);var m=void 0===d?a.containerSrc:void 0;u.push({a:f[a.name]?f[a.name]:0,t:p[a.containerType]?p[a.containerType]:0,n:c,i:d,s:m})}u.length>0&&(o.a=u),s.push(o)}r.addToBeacon("c.lt.n",B.longTasksCount(),!0),r.addToBeacon("c.lt.tt",B.longTasksTime()),r.addToBeacon("c.lt",t(s))}}function c(){T=!1,m.disconnect(),a()}f(e.PerformanceObserver&&e.PerformanceLongTaskTiming){var l={unknown:0,self:1,"same-origin-ancestor":2,"same-origin-descendant":3,"same-origin":4,"cross-origin-ancestor":5,"cross-origin-descendant":6,"cross-origin-unreachable":7,"multiple-contexts":8},f={unknown:0,script:1,layout:2},p={unknown:0,iframe:1,embed:2,object:3},m=new e.PerformanceObserver(i);try{m.observe({entryTypes:["longtask"]})}catch(g){return}n.register("longtask",s);var h=[],T=!0,R=0;return B.longTasksTime=function(){return R},B.longTasksCount={getTasks:o,clearTasks:a,analyze:u,stop:c,onBeacon:d}}},Q=function(e,t){function n(){var e=QTABMR.now(),t=e-m;if(m=e,t>2*u+d){var n=Math.floor((t-u)/u);g+=n,h+=n,t-=n*u}g++,t>u+d&&h++}function i(){var e=t.getTimeBucket(),n=e,r=0;if(0!==g){for(;g>f+1&&p>=r;)t.set("busy",100,--n),g-=f,h=Math.max(h-f,0),T+=f,R+=f,r++;T+=g,R+=h,t.set("busy",Math.ceil(100*(h/g)),e),g=0,h=0}}unction a(){M=!1,A&&(clearInterval(A),A=!1),v&&(clearInterval(v),v=!1)}function s(){T=0,R=0}t.register("busy",c);var u=32,d=4,l=100,f=Math.floor(l/u),p=100,m=QTABMR.now(),g=0,h=0,T=0,R=0,M=!0,A=!1,v=!1;return B.pageBusy=function(){return 0===T?0:Math.ceil(100*(R/T))},A=setInterval(n,u),v=setInterval(i,l),{analyze:o,stop:a,onBeacon:s}},b=function(e,t){function n(r){m&&(r-d>=l&&p++,d=r,f++,t.increment("fps"),e.requestAnimationFrame(n))}function o(){r.addToBeacon("c.f",B.fps()),r.addToBeacon("c.f.d",B.fpsDuration()),r.addToBeacon("c.f.m",B.fpsMinimum()),r.addToBeacon("c.f.l",B.fpsLongFrames()),r.addToBeacon("c.f.s",B.fpsStart())}unction u(){m&&(c=QTABMR.now()),f=0,p=0}t.register("fps",s);var c,d,l=50,f=0,p=0,m=!0;if(QTABMR.fpsLog&&QTABMR.fpsLog.length){d=c=QTABMR.fpsLog[0]+A;for(var g=0;g<QTABMR.fpsLog.length;g++){var h=A+QTABMR.fpsLog[g];t.increment("fps",1,Math.floor((h-c)/i)),h-d>=l&&p++,d=h}f=QTABMR.fpsLog.length,delete QTABMR.fpsLog}else c=QTABMR.now();return e.requestAnimationFrame(n),B.fps=function(){var e=B.fpsDuration();return e?Math.floor(f/(e/1e3)):void 0},B.fpsDuration=function(){return c?QTABMR.now()-c:void 0},B.fpsMinimum=function(){var e=B.fpsDuration();if(e){var n=t.getStats("fps",c).min;return 1/0!==n?n:void 0}},B.fpsLongFrames=function(){return p},B.fpsStart={analyze:o,stop:a,onBeacon:u}},w=function(e,t){function n(){var e=QTABMR.now();M++,e-y>f&&v++,y=e;var n=Math.ceil(QTABMR.utils.scroll().y),r=Math.abs(m-n);A+=r,t.increment("scroll",r),(0===g||Math.abs(g-n)>p)&&(t.log(d,e,{y:n}),g=n),h+=Math.round(100*(r/w)),T+=Math.round(100*(r/w)),m=n}function o(){var e=Math.min(h,100);0!==e&&t.set("scrollpct",e),h=0}function a(){r.addToBeacon("c.s",B.scrollCount()),r.addToBeacon("c.s.p",B.scrollPct()),r.addToBeacon("c.s.y",B.scrollPixels()),r.addToBeacon("c.s.d",B.scrollDistinct())}function u(){_&&(clearInterval(_),_=!1),QTABMR.utils.removeListener(e,"scroll",n)}f(e&&e.document&&e.document.body&&e.document.documentElement){var f=2e3,p=20,m=0,g=0,h=0,T=0,M=0,A=0,v=0,y=0,_=!1,Q=e.document.body,b=e.document.documentElement;t.register("scroll",s),t.register("scrollpct",c);var w=Math.max(Q.scrollHeight,Q.offsetHeight,b.clientHeight,b.scrollHeight,b.offsetHeight)-QTABMR.utils.windowHeight();return B.scrollPct=function(){return T},B.scrollCount=function(){return M},B.scrollDistinct=function(){return v},B.scrollPixels=function(){return A},QTABMR.utils.addListener(e,"scroll",n,R),_=setInterval(o,i),{analyze:a,stop:u,onBeacon:l}}},S=function(e,t,n){function i(e){var r=QTABMR.now(),i=e.clientX,o=e.clientY;f++;var a=Math.round(Math.sqrt(Math.pow(h-o,2)+Math.pow(g-i,2)));T===e.target||c>=a?(p++,p+1>=d&&(m++,QTABMR.fireEvent("rage_click",e))):p=0,g=i,h=o,T=e.target,t.increment("click"),t.log(l,r,{x:i,y:o}),e.cancelable&&n.interact("click",r,e)}function o(){r.addToBeacon("c.c",B.clicksCount()),r.addToBeacon("c.c.r",B.clicksRage())}function a(){QTABMR.utils.removeListener(e.document,"click",i)}.register("click",s);var c=10,d=3,f=0,p=0,m=0,g=0,h=0,T=null;return B.clicksCount=function(){return f},B.clicksRage=function(){return m},QTABMR.utils.addListener(e.document,"click",i,R),{analyze:o,stop:a,onBeacon:u}},E=function(e,t,n){function i(e){var r=QTABMR.now();c++,27===e.keyCode&&d++,t.increment("key"),t.log(p,r),e.cancelable&&n.interact("key",r,e)}function o(){r.addToBeacon("c.k",B.keyCount()),r.addToBeacon("c.k.e",B.keyEscapes())}unction u(){c=0,d=0}t.register("key",s);var c=0,d=0;return B.keyCount=function(){return c},B.keyEscapes=function(){return d},QTABMR.utils.addListener(e.document,"keydown",i,R),{analyze:o,stop:a,onBeacon:u}},x=function(e,t){function n(e){var n=e.clientX,r=e.clientY,i=Math.round(Math.sqrt(Math.pow(h-r,2)+Math.pow(g-n,2))),o=Math.round(100*(i/b));A+=o,v+=o,y+=i,g=n,h=r,t.increment("mouse",i)}function o(){var e=Math.min(A,100);0!==e&&t.set("mousepct",e),A=0}function a(){if(T!==g||M!==h){var e=Math.round(Math.sqrt(Math.pow(M-h,2)+Math.pow(T-g,2)));e>=p&&(t.log(f,QTABMR.now(),{x:g,y:h}),T=g,M=h)}}function u(){r.addToBeacon("c.m.p",B.mousePct()),r.addToBeacon("c.m.n",B.mousePixels())}function d(){_&&(clearInterval(_),_=!1),Q&&(clearInterval(Q),Q=!1),QTABMR.utils.removeListener(e.document,"mousemove",n)
}.register("mouse",s),t.register("mousepct",c);var p=10,m=250,g=0,h=0,T=0,M=0,A=0,v=0,y=0,_=!1,Q=!1,b=Math.round(Math.sqrt(Math.pow(QTABMR.utils.windowHeight(),2)+Math.pow(QTABMR.utils.windowWidth(),2)));return B.mousePct=function(){return v},B.mousePixels=function(){return y},_=setInterval(o,i),Q=setInterval(a,m),QTABMR.utils.addListener(e.document,"mousemove",n,R),{analyze:u,stop:d,onBeacon:l}},k=function(t,n,i){function o(i,o,a){var s=0;QTABMR.hrNow(),o=o||QTABMR.now(),_&&(R++,h||(h=a&&a.timeStamp?a.timeStamp+A:o),!a||!a.timeStamp||r.isSafari&&t!==window||(s=a.timeStamp>14e11?o-a.timeStamp:QTABMR.hrNow()-a.timeStamp,M+=s,null===T&&(T=Math.ceil(s)),s>p&&(n.increment("interdly"),v++,y+=s)),n.increment("inter"),!E&&r.afterOnloadMonitoring&&(b=QTABMR.now(),Q||(e("Interaction detected, sending a beacon after "+m+" ms"),Q=b,S=setTimeout(c,g)),w&&(e("Clearing previous interaction timeout"),clearTimeout(w),w=!1),w=setTimeout(c,m)))}unction u(){w&&(clearTimeout(w),w=!1),S&&(clearTimeout(S),S=!1)}function c(){e("Sending interaction beacon"),QTABMR.sendBeaconWhenReady({"rt.start":"manual","http.initiator":"interaction","rt.tstart":Q,"rt.end":b},r)}function d(){var e;r.addToBeacon("c.i.dc",B.interactionDelayed()),r.addToBeacon("c.i.dt",B.interactionDelayedTime()),r.addToBeacon("c.i.a",B.interactionAvgDelay()),x||(QTABMR.plugins.EventTiming&&QTABMR.plugins.EventTiming.is_enabled()&&(e=QTABMR.plugins.EventTiming.metrics.firstInputDelay()),e||null===T||(e=B.firstInputDelay()),e&&(r.addToBeacon("c.fid",Math.ceil(e),!0),r.addToBeacon("c.ttfi",QTABMR.plugins.EventTiming.metrics.timeToFirstInteraction()||B.timeToFirstInteraction()),x=!0))}function l(){_=!1}function f(){y=0,v=0,R=0,M=0,Q=0,b=0,E=!1,u()}n.register("inter",s),n.register("interdly",s);var p=50,m=i,g=3e4,h=0,T=null,R=0,M=0,v=0,y=0,_=!0,Q=0,b=0,w=!1,S=!1,E=!1,x=!1;return B.interactionDelayed=B.interactionDelayedTime=B.interactionAvgDelay=function(){return R>0?Math.ceil(M/R):void 0},B.timeToFirstInteraction=function(){return h?h-A:void 0},B.firstInputDelay=function(){return null!==T?T:void 0},QTABMR.subscribe("spa_init",a,null,r),{interact:o,analyze:d,stop:l,onBeacon:f}},P=function(e,t,n){function r(){u&&(n.interact("pd",a,s),a=null,s=null,QTABMR.utils.removeListener(window,"pointerup",r))}function i(e){u&&e.cancelable&&(a=QTABMR.now(),s=e,QTABMR.utils.addListener(window,"pointerup",r,R))}function o(){u=!1,QTABMR.utils.removeListener(window,"pointerdown",i),QTABMR.utils.removeListener(window,"pointerup",r),QTABMR.utils.removeListener(window,"pointercancel",o)}var a,s,u=!0;return QTABMR.utils.addListener(window,"pointerdown",i,R),QTABMR.utils.addListener(window,"pointercancel",o,R),{stop:o}},C=function(e,t,n){function r(e){if(o&&e.cancelable){var t=QTABMR.now();n.interact("md",t,e)}}function i(){o=!1,QTABMR.utils.removeListener(window,"mousedown",r)}var o=!0;return QTABMR.utils.addListener(window,"mousedown",r,R),{stop:i}},L=function(e,t,n){unction i(){o=!1,QTABMR.utils.removeListener(window,"touchstart",r)}var o=!0;return QTABMR.utils.addListener(window,"touchstart",r,R),{stop:i}},O=function(e,t){.register("vis",s);var r={visible:0,hidden:1,prerender:2,unloaded:3},i=!0;return QTABMR.subscribe("visibility_changed",function(){var e=QTABMR.now();i&&(t.increment("vis"),t.log(m,e,{s:r[QTABMR.visibilityState()]}))}),{stop:n}},N=function(e,t){function n(){var e=QTABMR.now(),n=window.orientation;if(i){t.increment("orn");var r=window.screen&&(screen.orientation||screen.msOrientation||screen.mozOrientation||{});r&&"number"==typeof r.angle&&(n=screen.orientation.angle),"number"==typeof n&&t.log(g,e,{a:n})}}function r(){i=!1,QTABMR.utils.removeListener(e,"orientationchange",n)}t.register("orn",s);var i=!0;return QTABMR.utils.addListener(e,"orientationchange",n,R),{stop:r}},F=function(e,t){function n(){var e=M&&M.memory&&M.memory.usedJSHeapSize;if(e&&t.set("mem",e),h=T.length,t.set("domsz",l.documentElement.innerHTML.length),t.set("domln",h),g>0){var n=Math.min(Math.round(100*(g/h)),100);t.set("mut",n),g=0}}unction i(e){return e.forEach(function(e){if("childList"!==e.type)return!0;for(var t=0;t<e.addedNodes.length;t++){var n=e.addedNodes[t];g++,g+=n.getElementsByTagName?n.getElementsByTagName("*").length:0}}),!0}function o(){f=!1,p&&(clearInterval(p),p=!1),a&&a.observer&&(a.observer.disconnect(),a=null),m&&m.onlevelchange&&(m.onlevelchange=null),T=null}t.register("mem",u,!0),t.register("bat",c,!0),t.register("domsz",u,!0),t.register("domln",u,!0),t.register("mut",s);var a,d=1e3,l=e.document,f=!0,p=!1,m=null,g=0,h=0,T=l.getElementsByTagName("*");return p=setInterval(n,d),e.navigator&&"function"==typeof e.navigator.getBattery&&e.navigator.getBattery().then(function(e){m=e,m.onlevelchange&&(m.onlevelchange=r)}),QTABMR.utils.isMutationObserverSupported()&&(a=QTABMR.utils.addObserver(l,{childList:!0,subtree:!0},null,i,null,this)),{stop:o}};r={monitorLongTasks:!0,monitorPageBusy:!0,monitorFrameRate:!0,monitorInteractions:!0,monitorStats:!1,monitorLayoutShifts:!0,afterOnload:!1,afterOnloadMaxLength:o,afterOnloadMinWait:5e3,waitAfterOnload:!1,ttiWaitForFrameworkReady:!1,ttiWaitForHeroImages:!1,sendLog:!0,sendTimeline:!0,logMaxEntries:100,initialized:!1,complete:!1,isSpa:!1,firedPageReady:!1,afterOnloadMonitoring:!1,frameworkReady:null,timeline:null,ttiMethod:null,longTaskMonitor:null,pageBusyMonitor:null,frameRateMonitor:null,interactionMonitor:null,scrollMonitor:null,clickMonitor:null,keyMonitor:null,mouseMonitor:null,visibilityMonitor:null,orientationMonitor:null,touchStartMonitor:null,mouseDownMonitor:null,pointerDownMonitor:null,statsMonitor:null,layoutShiftMonitor:null,monitors:["timeline","longTaskMonitor","pageBusyMonitor","frameRateMonitor","scrollMonitor","keyMonitor","clickMonitor","mouseMonitor","interactionMonitor","visibilityMonitor","orientationMonitor","statsMonitor","layoutShiftMonitor","touchStartMonitor","mouseDownMonitor","pointerDownMonitor"],timeOfLastBeacon:0,hasAddedDataToBeacon:!1,isSafari:window&&window.navigator&&window.navigator.vendor&&-1!==window.navigator.vendor.indexOf("Apple"),onBeforeBeacon:runAllAnalyzers:function(){var e,t;if(!r.hasAddedDataToBeacon){for(e=0;e<r.monitors.length;e++)t=r[r.monitors[e]],t&&"function"==typeof t.analyze&&t.analyze(r.timeOfLastBeacon);r.addToBeacon("c.lb",r.timeOfLastBeacon?r.timeOfLastBeacon.toString(36):0),r.timeOfLastBeacon=QTABMR.now(),r.hasAddedDataToBeacon=!0}},onBeacon:function(e){var t;if(!e||!("undefined"!=typeof e.early||e["http.initiator"]&&0===e["http.initiator"].indexOf("api_custom_"))){for(t=0;t<r.monitors.length;t++){var n=r[r.monitors[t]];n&&(r.afterOnload||"function"==typeof n.stop&&n.stop(),"function"==typeof n.onBeacon&&n.onBeacon())}r.hasAddedDataToBeacon=!1}},onXhrLoad:function(e){e&&QTABMR.utils.inArray(e.initiator,QTABMR.constants.BEACON_TYPE_SPAS)&&(r.isSpa=!0),e&&"spa_hard"===e.initiator&&r.onPageReady()},onPageReady:function(){if(r.firedPageReady=!0,r.afterOnload&&r.monitorInteractions&&(r.afterOnloadMonitoring=!0,r.isSpa||"number"!=typeof r.afterOnloadMaxLength||setTimeout(r.afterOnloadMaxLength)),r.waitAfterOnload){var e=QTABMR.now();setTimeout(function t(){QTABMR.now()-e>r.waitAfterOnload?(r.complete=!0,QTABMR.sendBeacon()):(r.timeline.analyze(),B.timeToInteractive()?(r.complete=!0,QTABMR.sendBeacon()):setTimeout(t,a))},a)}else r.complete=!0},addToBeacon:function(e,t,n){return 0!==t&&"undefined"!=typeof t||n?(QTABMR.addVar(e,t,!0),void 0):(QTABMR.removeVar(e),void 0)}},QTABMR.plugins.Continuity={init:function(e){return QTABMR.utils.pluginConfig(r,e,"Continuity",["monitorLongTasks","monitorPageBusy","monitorFrameRate","monitorInteractions","monitorStats","afterOnload","afterOnloadMaxLength","afterOnloadMinWait","waitAfterOnload","ttiWaitForFrameworkReady","ttiWaitForHeroImages","sendLog","logMaxEntries","sendTimeline","monitorLayoutShifts"]),r.initialized?this:(r.initialized=!0,r.timeline=new v(QTABMR.now()),QTABMR.window&&(r.monitorLongTasks&&QTABMR.window.PerformanceObserver&&QTABMR.window.PerformanceLongTaskTiming&&(r.longTaskMonitor=new _(QTABMR.window,r.timeline),r.ttiMethod="lt"),r.monitorFrameRate&&"function"==typeof QTABMR.window.requestAnimationFrame&&(r.frameRateMonitor=new b(QTABMR.window,r.timeline),r.ttiMethod||(r.ttiMethod="raf")),!r.monitorPageBusy||QTABMR.window.PerformanceObserver&&QTABMR.window.PerformanceLongTaskTiming&&r.monitorLongTasks||(r.pageBusyMonitor=new Q(QTABMR.window,r.timeline),r.ttiMethod||(r.ttiMethod="b")),r.monitorInteractions&&(r.interactionMonitor=new k(QTABMR.window,r.timeline,r.afterOnloadMinWait),r.scrollMonitor=new w(QTABMR.window,r.timeline,r.interactionMonitor),r.keyMonitor=new E(QTABMR.window,r.timeline,r.interactionMonitor),r.clickMonitor=new S(QTABMR.window,r.timeline,r.interactionMonitor),r.mouseMonitor=new x(QTABMR.window,r.timeline,r.interactionMonitor),r.visibilityMonitor=new O(QTABMR.window,r.timeline,r.interactionMonitor),r.orientationMonitor=new N(QTABMR.window,r.timeline,r.interactionMonitor),r.touchStartMonitor=new L(QTABMR.window,r.timeline,r.interactionMonitor),r.mouseDownMonitor=new C(QTABMR.window,r.timeline,r.interactionMonitor),r.pointerDownMonitor=new P(QTABMR.window,r.timeline,r.interactionMonitor)),r.monitorStats&&(r.statsMonitor=new F(QTABMR.window,r.timeline,r.interactionMonitor)),r.monitorLayoutShifts&&QTABMR.window.PerformanceObserver&&(r.layoutShiftMonitor=new y(QTABMR.window))),QTABMR.addVar("c.e",A.toString(36)),QTABMR.addVar("c.tti.m",r.ttiMethod),QTABMR.subscribe("before_beacon",r.onBeforeBeacon,null,r),QTABMR.subscribe("beacon",r.onBeacon,null,r),QTABMR.subscribe("page_ready",r.onPageReady,null,r),QTABMR.subscribe("xhr_load",r.onXhrLoad,null,r),this)},is_complete:frameworkReady:metrics:B}}}(),QTABMR.init({beacon_url:window.QTABMR_BEACON_URL,beacon_type:"GET",beacon_disable_sendbeacon:!0,instrument_xhr:!0,autorun:!1,log:null,AutoXHR:{monitorFetch:!0},History:{auto:!0},RT:{cookie:"_qta_rum",cookie_exp:1800},Continuity:{monitorLongTasks:!0,monitorPageBusy:!0,monitorFrameRate:!1,monitorInteractions:!0,monitorStats:!1,monitorLayoutShifts:!0,afterOnload:!0,afterOnloadMaxLength:6e4,waitAfterOnload:1e4,ttiWaitForFrameworkReady:!1,ttiWaitForHeroImages:!1,sendLog:!1,sendTimeline:!1}}),QTABMR.t_end=(new Date).getTime();