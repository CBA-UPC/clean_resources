try{!{0:function(e,t,i){"use strict";var r=function(e){return!(!(n=e)||"object"!=typeof n||(t=e,"[object RegExp]"===(i=Object.prototype.toString.call(t))||"[object Date]"===i||t)));var t,i,n};var s="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;tion u(n,r,s){var o={};return s.isMergeableObject(n)&&l(n).forEach(,l(r).forEach(,o}.all=var n=f;e.exports=n},1:2:function(e,t,i){"use strict";i.d(t,"a",;var n,s=i(1),r={SETTINGS:'\n{\n    "psthdrs": "text/plain",\n    "dnapmxvl": 0,\n    "player_version": {{PLAYER_VERSION}},\n    "wfv": 1,\n    "isAmp": {{IS_AMP}},\n    "encwfrs": false,\n    "wf_base_path": "//wf.taboola.com",\n    "wf_path": "VideoBidRequestHandlerServlet",\n    "updtcmpbfrwf": true,\n    "ab_test": "{{AB_TEST}}",\n    "auc_dast": "{{AUC_DAST}}",\n    "queue_size": 6,\n    "isPrivateBrowsing": "no",\n    "firstWaterfallNoaop": 0,\n    "max_ready_vpaid": 3,\n    "vpaidReadyCount": 0,\n    "fmpw": "",\n    "wfgenv": "1.0.5",\n    "preset.level": {{PRESET_LEVEL}}\n}',TAG_DEFAULT:'\n{\n    "pubid": "",\n    "tagid": "",\n    "cirf": "{{CIRF}}",\n    "muted": {{MUTED}},\n    "oid": {{ORIGIN_ID}},\n    "noaop": "10",\n    "sortOrderType": 0,\n    "isvideo": 0,\n    "mindur": 1,\n    "maxdur": {{DEFAULT_AD_TIMEOUT}},\n    "minbr": 1,\n    "maxbr": 10000,\n    "plmd": 0,\n    "use_as_is": false\n}\n',DEFAULT_VPAID_PARAMETERS:'\n{\n    "PUBID": 0,\n    "TAGID": 0,\n    "SERVICE": "WhiteLabelBidRequestHandlerServlet",\n    "CIRF": "",\n    "ISVIDEO": 1,\n    "PLMD": 2,\n    "MINDUR": 1,\n    "MAXDUR": 60,\n    "MINBR": 1,\n    "MAXBR": 512,\n    "SORTORDERTYPE": 0,\n    "OID": "",\n    "NOAOP": "",\n    "CM_DOMAIN": "http://exchange.basebanner.com",\n    "MUTED": false,\n    "PLAYER_WIDTH": 0,\n    "PLAYER_HEIGHT": 0\n}\n'},p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";ar a={FEED:0,SLIDER_TO_FEED:1,FEED_TO_SLIDER:2,SLIDER_TO_FEED_TO_SLIDER:3,INLINE_SINGLE_SELECTOR:4,INLINE_MULTI_SELECTOR:5,FEED_STICKY_BELOW:6,FEED_STICKY_ABOVE:7,FEED_STICKY_BELOW_ABOVE:8,WIDGET:9},l={SUB_UNIT_TYPE:a,UFM_AB_TEST_GROUPS:(o(n={},a.FEED,"_vA"),o(n,a.SLIDER_TO_FEED,"_vB"),o(n,a.FEED_TO_SLIDER,"_vC"),o(n,a.SLIDER_TO_FEED_TO_SLIDER,"_vD"),o(n,a.FEED_STICKY_BELOW,"_vE"),o(n,a.FEED_STICKY_ABOVE,"_vF"),o(n,a.FEED_STICKY_BELOW_ABOVE,"_vG"),n),FRAME_TYPES:{PLAIN_PAGE:0,FRIENDLY_IFRAME:1,NON_FRIENDLY_IFRAME:2,AMP:3,IN_APP:4},INVALID_SELECTOR_TAG_NAMES:["IMG","UL","BUTTON","INPUT","LABEL"],NODE_TYPES:{NODE_ELEMENT:1},AGG_LEVELS:{LEVELS:{STANDARD:"1",LIGHT_WATERFALL:"2",VERY_LIGHT_WATERFALL:"3",DIRECT_AND_TREMOR_RTB:"4",DIRECT_ONLY:"5",PASSBACK:"PASSBACK"}},ADV_TYPES:{TAGS:7}},c={FEED_MANAGER:"FEED_MANAGER",INLINE_FEED:"INLINE_FEED",MSN_WIDGET:"MSN_WIDGET",WIDGET_ITEM:"WIDGET_ITEM",EXPANDABLE:"EXPANDABLE","300X600":"300X600",INLINE_INSTREAM:"INLINE_INSTREAM"};ar f=i(0),d=void 0;function h(e){if(void 0!==d)return d;var t=e.get("unitType");return t===c.INLINE_INSTREAM?function(e){var t=e.get("parentSelector");if(t){var i=t);1<i?d=l.SUB_UNIT_TYPE.INLINE_MULTI_SELECTOR:1!==i&&!v(e)||(d=l.SUB_UNIT_TYPE.INLINE_SINGLE_SELECTOR)}else v(e)&&(d=l.SUB_UNIT_TYPE.INLINE_SINGLE_SELECTOR)}(e):t!==c.FEED_MANAGER&&t!==c.WIDGET_ITEM||function(e){!function(e){var t=e.get("unitType");t===c.FEED_MANAGER&&(function(e){window.TRC&&window.TRC.isAmp&&(y(e,"detachToSlider.isDetachToSlider",!1),y(e,"detachToSlider.isStartFromSlider",!1))}(e),function(e){(e.get("detachToSlider.isStartFromSlider")||e.get("detachToSlider.isDetachToSlider"))&&y(e,"stickyCard.isActive",!1)}(e),function(e){e.get("stickyCard.isActive")&&(y(e,"detachToSlider.isDetachAbove",!1),y(e,"detachToSlider.isDetachBelow",!0),y(e,"detachToSlider.isDetachToSlider",!0),y(e,"detachToSlider.isStartFromSlider",!1))}(e));if(t===c.WIDGET_ITEM){var i=e.get("frameType")===l.FRAME_TYPES.PLAIN_PAGE;i||function(e){y(e,"detachToSlider.isDetachToSlider",!1)}(e),(e.get("stickyCard.isActive")&&i?function(e){y(e,"detachToSlider.isDetachAbove",!1),y(e,"detachToSlider.isDetachBelow",!0),y(e,"detachToSlider.isDetachToSlider",!0),y(e,"detachToSlider.isStartFromSlider",!1)}:(e),function(e){var t=e.get("width");t&&0!==t||!e.get("isOverrideWidthOnZero")||y(e,"width",300)}(e)}}(e);var t=e.get("stickyCard.isActive"),i=e.get("detachToSlider.isDetachBelow"),n=e.get("detachToSlider.isDetachAbove"),r=e.get("detachToSlider.isStartFromSlider"),s=e.get("detachToSlider.isDetachToSlider");t||r||s?t||!r||s?t||r||!s?!t&&r&&s?d=l.SUB_UNIT_TYPE.SLIDER_TO_FEED_TO_SLIDER:t&&i&&!n?d=l.SUB_UNIT_TYPE.FEED_STICKY_BELOW:t&&!i&&n?d=l.SUB_UNIT_TYPE.FEED_STICKY_ABOVE:t&&i&&n&&(d=l.SUB_UNIT_TYPE.FEED_STICKY_BELOW_ABOVE):d=l.SUB_UNIT_TYPE.FEED_TO_SLIDER:d=l.SUB_UNIT_TYPE.SLIDER_TO_FEED:d=l.SUB_UNIT_TYPE.FEED}(e),d}function v(e){if(e.get("isUsePlacementElement")){var t=e.get("placementElement");if(t&&t instanceof HTMLElement)return 1;if((t=document.getElementById("_cm_videoUnit_placeHolder".concat(e.get("redId"))))&&!t))return 1}}function g(e){if(void 0!==e){if("object"!==u(e)&&"function"!=typeof e)try{e=decodeURIComponent(e)}catch(e){}if(e&&"["===e[0]&&"]"===e[e.length-1])try{e=JSON.parse(e)}catch(e){}if("string"==typeof e&&0===e.indexOf("function")){var t=new Function("try { return ".concat(e,"; } catch(ex) {}"))();if(t)return t}return Array.isArray(e)?e.map(:"true"===e||!0===e||"false"!==e&&!1!==e&&(""===e||isNaN(e)?e:Number(e))}}function y(e,t,i){if(-1!==t.indexOf(".")){var n,r=t.split("."),s=r.shift();e[s]=e[s]||{},"object"!==u(e[s])&&(e[s]={}),y(e[s],r.join("."),i)}else if(!i||"object"!==u(i)||Array.isArray(i)||(n=i).nodeType&&n.nodeType===l.NODE_TYPES.NODE_ELEMENT)e[t]=g(i);else for(var o in e[t]=e[t]||{},i)y(e[t],o,i[o])}unction m(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var b=i(0),E=function(){ar e,i,n;return e=t,(i=[{key:"_buildSettings",value:function(){this.settings=this._setSettings(),this._setSubUnitType();var t,i,e=b(this.config.get("player.settings"),this._getPlayerSettings()),n=b((t=this.config,i={},["frameType","dtagid","dpubid","creativeId"].forEach(,i),e);this.settings=b(this.settings,n)}},{key:"_setSettings",value:function(){return JSON.parse(r.SETTINGS.replace("{{PLAYER_VERSION}}",(e=this.config,t=e.get("player.versions.vplayer"),i=parseInt(t.replace(/^v|\./g,"")),isNaN(i)?1101:i)).replace("{{IS_AMP}}",window.TRC&&window.TRC.isAMP||!1).replace("{{AB_TEST}}",this.config.get("_abTest")).replace("{{AUC_DAST}}",this._getAucDast()).replace("{{PRESET_LEVEL}}",this._getPresetLevel()));var e,t,i}},{key:"_setSubUnitType",value:function(){var e=h(this.config);void 0!==e&&(this.settings.subUnitType=e)}},{key:"_getAucDast",value:function(){return this.config.get("cmDast")||""}},{key:"_getPresetLevel",value:,{key:"_getPlayerSettings",value:function(){var e={};for(var t in this.config)0===t.indexOf("player.settings.")&&(e[t.split(".")[2]]=this.config[t]);return e}},{key:"_setDroppableTypes",value:,{key:"_setFeedManagerDroppableTypes",value:function(){var e=this.config.get("startCard"),t=this.config.get("permanentCard"),i=!(1!==e&&e||1!==t&&t);this.config.get("detachToSlider.isStartFromSlider")&&this.config.get("detachToSlider.isDetachToSlider")||i&&function(){var e=TRCImpl.boxes||{};for(var t in e){var i=e[t]||{},n=i.isFeedCard,r=!1;if(i.itemsTypes&&i.itemsTypes["is-organic"]&&(r=i.itemsTypes["is-organic"]),r&&n&&i.boxes.length)return i.mode}}()||this._dropAdjacency()}},{key:"_dropAdjacency",value:,{key:"_setNonFeedManagerDroppableTypes",value:,{key:"get",value:,{key:"getWfData",value:,{key:"set",value:function(e,t){this.settings[e]=t}},{key:"increaseFails",value:])&&m(e.prototype,i),n&&m(e,n),t}();function T(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var D=i(0),A=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this._setCreatives()}var e,i,n;return e=t,(i=[{key:"_setCreatives",value:function(){this.prerollCreative=this.getPrerollCreatives(),this.tagDefault=this._getTagDefault(),this.creatives=D(this.tagDefault,this.prerollCreative),this._normalizeCreative(),this.capitalizeCreatives=this.creatives),this.creatives=D(JSON.parse(r.DEFAULT_VPAID_PARAMETERS),this.capitalizeCreatives)}},{key:"getPrerollCreatives",value:,{key:"_getTagDefault",value:,{key:"_getCirf",value:,{key:"_getMuted",value:,{key:"_getOriginId",value:function(){return this.config.get("originId")}},{key:"_getDefaultAdTimeout",value:function(){return this.config.get("adMaxPlaySeconds")}},{key:"_normalizeCreative",value:function(){var e;this.creatives["player-width"]=this.config.get("width"),this.creatives["player-height"]=this.config.get("height")||(e=this.creatives["player-width"],Math.floor(9*e/16)),this.creatives.plmd=this._getPlmd()}},{key:"_getPlmd",value:,{key:"get",value:function(){return this.creatives}}])&&T(e.prototype,i),n&&T(e,n),t}();function w(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var C=function(){ar e,i,n;return e=t,(i=[{key:"get",value:function(e,t,i){e&&t&&(this._loadFromTRC(e,t,i)||this._loadFromExternalUrl(e,t,i))}},{key:"_loadFromTRC",value:function(e,t,i){if(this._isServiceLoadedOnTRC(e,t))return this._fireCallback(e,t,i),!0}},{key:"_isServiceLoadedOnTRC",value:,{key:"_fireCallback",value:,{key:"_loadFromExternalUrl",value:function(e,t,i){var n=document.createElement("script");n.src="".concat(this.config.get("microServices.base_url")).concat(e,"/").concat(t,"/").concat(e,".js"),n.async=this.config.get("microServices.async")||!0,n.onerror=function(){},n.onload=this._loadFromTRC.bind(this,e,t,i),document.getElementsByTagName("head")[0].appendChild(n)}}])&&w(e.prototype,i),n&&w(e,n),t}();function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(s){return function(){var e,t,i,n=F(s);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return;if(Reflect.construct.sham)return;if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}()){var r=F(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return t=this,!(i=e)||"object"!==I(i)&&"function"!=typeof i?t):i}}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}i(3);var B=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(r,s["EventEmitter"]);var e,t,i,n=P(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this)).config=e,t.store=new E(e),t.creatives=new A(e),t._init(),t}return e=r,(t=[{key:"_init",value:function(){this.waterfallInProgress=!1,this.isFirstRun=!0,this.maxAllowedEmptyWaterfalls=this.store.get("mxemptwf"),this.emptyWaterfallsInARow=0,this.waterfallFailsInARow=0,this.onSuccess=this._onSuccess.bind(this),this.onFail=this._onFail.bind(this),this._initDroppableAdTypes()}},{key:"_onSuccess",value:function(e){if(this.wfGenerator.increaseWfCounter(),e){var t=this._parseWfResponse(e);this.store.set("sessionData",t.sd),this._didReceivedDemand(t)?this._onDemandReceived(e):this._isStandardWaterfall()&&!this._isEmptyWf(t)?this._onDemandReceived(e,!0):(this._setFailedItemStats(t.tags),this._increaseFailsWaterfallsInARow(),this._emitFailedWaterfall()),this.waterfallInProgress=!1}}},{key:"_parseWfResponse",value:function(e){try{return this.store.get("encwfrs")&&(e=function(e){for(var t,i="",n=0;n<e.length;n++){t=n%"PlAyER".length;var r=e[n].charCodeAt(0).toString(10),s="PlAyER"[t].charCodeAt(0).toString(10);i+=String.fromCharCode(r^s)}return i}(function(e){try{for(var t=e.length,i=[],n=0;n<p.length;n++)i[p.charCodeAt(n)]=n;var r=p.charAt(64);if(r){var s=e.indexOf(r);-1!==s&&(t=s)}for(var o=[],a=0,l=0;l<t;l++)if(l%4){var c=i[e.charCodeAt(l-1)]<<l%4*2,u=i[e.charCodeAt(l)]>>>6-l%4*2;o[a>>>2]|=(c|u)<<24-a%4*8,a++}var f=[];for(l=0;l<a;l++){var d=o[l>>>2]>>>24-l%4*8&255;f.push(String.fromCharCode(d))}return decodeURIComponent(escape(f.join("")))}catch(e){return""}}(e))),JSON.parse(e.replace(/^\(|\)$/g,""))}catch(e){return""}}},{key:"_didReceivedDemand",value:function(e){if(this._isEmptyWf(e))return!1;if(this.config.get("demo"))return!0;for(var t=0;t<e.tags.length;t++){var i=e.tags[t];if(this._doesItemContainVAST(i)||this._isItemAdvIsNotTagsType(i))return!0}return!1}},{key:"_isEmptyWf",value:,{key:"_isStandardWaterfall",value:function(){return this.config.get("preset.level")==l.AGG_LEVELS.LEVELS.STANDARD}},{key:"_doesItemContainVAST",value:function(e){return e.vast}},{key:"_isItemAdvIsNotTagsType",value:,{key:"_setFailedItemStats",value:function(e){var t=this;(e||[]).forEach(}},{key:"_setItemStats",value:,{key:"_increaseItemFails",value:,{key:"_setNewItemStats",value:,{key:"_increaseEmptyWaterfalls",value:function(){this.emptyWaterfallsInARow++}},{key:"_increaseFailsWaterfallsInARow",value:,{key:"_emitFailedWaterfall",value:,{key:"_onDemandReceived",value:function(e,t){this.stop(),this._setFirstWaterfallResponse(e),this._emitDemandReceived(!t)}},{key:"stop",value:function(){this.stopped=!0,this.waterfallsInterval=clearInterval(this.waterfallsInterval)}},{key:"_setFirstWaterfallResponse",value:,{key:"_emitDemandReceived",value:,{key:"_onFail",value:function(){this.wfGenerator.increaseWfCounter(),this._increaseEmptyWaterfalls(),this.waterfallInProgress=!1,this._emitFailedWaterfall()}},{key:"_initDroppableAdTypes",value:,{key:"run",value:function(){this._hasStaticWaterfall()||this._hasFirstWaterfallResponse()?this._emitDemandReceived(!0):this._loadWfGenerator()}},{key:"_hasStaticWaterfall",value:function(){return this.config.get("demandConfig")}},{key:"_hasFirstWaterfallResponse",value:function(){return this.config.get("player.settings.firstWfRes")}},{key:"_loadWfGenerator",value:function(){new C(this.config).get("wf-generator",this._getWfGeneratorVersion(),this._initWfGenerator.bind(this))}},{key:"_getWfGeneratorVersion",value:function(){return this.store.get("wfgenv")}},{key:"_initWfGenerator",value:function(e){this.wfGenerator=new e(this.store,this.creatives.get()),this._canRunWaterfall()?this._runWaterfalls():this._waitForFirstScroll()}},{key:"_canRunWaterfall",value:,{key:"_didPassedMaxEmptyWaterfalls",value:function(){return!!this.maxAllowedEmptyWaterfalls&&this.emptyWaterfallsInARow>this.maxAllowedEmptyWaterfalls}},{key:"_shouldDelayWaterfall",value:function(){return this.store.get("dlywf")}},{key:"_isInIdleMode",value:function(){return document.hidden}},{key:"_runWaterfalls",value:function(){this._startWaterfallsTimer(),this._callWaterfall()}},{key:"_startWaterfallsTimer",value:function(){var e,t;this.timeBetweenWfs=(e=this.config,(t=e.get("player.settings.mintimwf"))<1e3?t:t/1e3),this.waterfallsInterval=setInterval(this._callWaterfall.bind(this),1e3*this.timeBetweenWfs)}},{key:"_callWaterfall",value:function(){if(this._canRunWaterfall()){var e=this._getWaterfallUrl(),t=this._getWaterfallPOSTData();this.isFirstRun=!1,this.waterfallInProgress=!0,this.wfGenerator.send({wfUrl:e,postData:t,onSuccess:this.onSuccess,onFail:this.onFail})}}},{key:"_getWaterfallUrl",value:,{key:"_getWaterfallPOSTData",value:,{key:"_waitForFirstScroll",value:function(){this.config.get("predictors.firstScroll.isActive")&&this._isUserAtTopOfThePage()?(this.checkScroll=this._checkScroll.bind(this),window.addEventListener("scroll",this.checkScroll)):this._onFirstScroll()}},{key:"_isUserAtTopOfThePage",value:function(){return 0===document.getElementsByTagName("body")[0].scrollTop&&0===document.documentElement.scrollTop}},{key:"_checkScroll",value:,{key:"_onFirstScroll",value:function(){window.removeEventListener("scroll",this.checkScroll),this.store.set("dlywf",!1),y(this.config,"player.settings.dlywf",!1),this._runWaterfalls()}},{key:"getFromStore",value:function(e){return this.store.get(e)}},{key:"isWaterfallInProgress",value:function(){return this.waterfallInProgress}}])&&S(e.prototype,t),i&&S(e,i),r}();function L(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var R=null,O=function(){ar e,i,n;return e=t,(i=[{key:"_createBasePixelUrl",value:function(){this.pixelUrl="".concat(this._getPixelUrl(this.config.get("pixels.url")),"?cijs=convusmp&ttype={{TTYPE}}&cisd=convusmp&cipid=").concat(this.config.get("cipid"),"&crid=").concat(this.config.get("creativeId"),"&dast=").concat(this.config.get("dast"),"&cmcv=&pix={{PIXEL_ID}}&cb={{TIMESTAMP}}&uv=").concat(this.config.get("version").replace(/_/g,""),"&tms={{TIMESTAMP}}"),this._addAbTestToPixelUrl(),this._addReferrerUrlToPixelUrl(),this._addFrameTypeToPixelUrl(),this._addOmniTagParams()}},{key:"_getPixelUrl",value:function(e){return e.replace("{{dataCenter}}",this.config.get("dataCenter")).replace("{{baseReportD}}",this.config.get("baseReportD"))}},{key:"_addAbTestToPixelUrl",value:function(){var e=this.config.get("_abTest");e&&this._addToUrl("abt",e)}},{key:"_addToUrl",value:function(e,t){this.pixelUrl+="&".concat(e,"=").concat(t)}},{key:"_addReferrerUrlToPixelUrl",value:function(){var e=this.config.get("referrerUrl");e&&this._addToUrl("ru",e)}},{key:"_addFrameTypeToPixelUrl",value:,{key:"_addOmniTagParams",value:,{key:"_addIfExist",value:,{key:"firePixel",value:function(e,t){var i=this._getPixel(e);if(i&&i.isFire){var n="".concat(this._generatePixelUrl(i),"&").concat(this._normalizeAdditionalData(t));document.createElement("img").src=n}}},{key:"_getPixel",value:,{key:"_generatePixelUrl",value:function(e){return this.pixelUrl.replace("{{TTYPE}}",e.type||"").replace("{{PIXEL_ID}}",e.id).replace(/{{TIMESTAMP}}/g,Date.now())}},{key:"_normalizeAdditionalData",value:function(e){var t=[];for(var i in e){var n=e[i];_(n)&&""!==n&&t.push("".concat(i,"=").concat(n))}return t.join("&")}},{key:"PIXEL_TYPES",get:])&&L(e.prototype,i),n&&L(e,n),t}();function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function M(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(s){return function(){var e,t,i,n=V(s);if()){var r=V(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return t=this,!(i=e)||"object"!==U(i)&&"function"!=typeof i?W(t):i}} G=function(){!r,s["EventEmitter"]);var e,t,i,n=N(r);function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),(t=n.call(this)).config=e,t._bindedEmitLoadUnit=t._emitLoadUnit.bind(W(t)),t._initActions(),t.pixels=new O(t.config),t}return e=r,(t=[{key:"_emitLoadUnit",value:,{key:"_onLoadUnit",value:function(e){this._clearWfHandlerListeners(),this._clearNoDemandTimer(),e||this._setEmptyWaterfallsInARow()}},{key:"_clearWfHandlerListeners",value:,{key:"_setWfsData",value:function(){this._setSessionData(),this._setLineItems()}},{key:"_setSessionData",value:,{key:"_setLineItems",value:,{key:"_setEmptyWaterfallsInARow",value:,{key:"_clearNoDemandTimer",value:,{key:"_initActions",value:function(){var e,t=this._handleVeryLightWaterfall.bind(this);this.actions=(x(e={},l.AGG_LEVELS.LEVELS.STANDARD,this._handleStandardWaterfall.bind(this)),x(e,l.AGG_LEVELS.LEVELS.LIGHT_WATERFALL,this._handleLightWaterfall.bind(this)),x(e,l.AGG_LEVELS.LEVELS.VERY_LIGHT_WATERFALL,t),x(e,l.AGG_LEVELS.LEVELS.DIRECT_AND_TREMOR_RTB,t),x(e,l.AGG_LEVELS.LEVELS.DIRECT_ONLY,t),x(e,l.AGG_LEVELS.LEVELS.PASSBACK,this._handlePassback.bind(this)),e)}},{key:"_handleStandardWaterfall",value:function(){window.taboolaBridge?this._emitLoadUnit():(this._initWfHandler(),this.wfHandler.once("failedWaterfall",this._bindedEmitLoadUnit))}},{key:"_handleLightWaterfall",value:,{key:"_initWfHandler",value:function(){this.wfHandler=new B(this.config),this.wfHandler.once("demandReceived",this._bindedEmitLoadUnit),this.wfHandler.run()}},{key:"_startNoDemandTimer",value:,{key:"_onTimerEnds",value:,{key:"_handleVeryLightWaterfall",value:,{key:"_handlePassback",value:,{key:"_invokePassback",value:,{key:"load",value:function(){var e=this._hasPassback()?l.AGG_LEVELS.LEVELS.PASSBACK:this.config.get("preset.level");this.actions[e]()}},{key:"_hasPassback",value:,{key:"_getPassbackHandlerFromTRC",value:])&&M(e.prototype,t),i&&M(e,i),r}(),H={atr:{},platform:{Desktop:{atr:{}},Mobile:{atr:{secondsBW:20,player:{settings:{queue_size:3,max_ready_vpaid:2}}}}}},Y={demo:{strength:101,atr:{},1:{atr:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause",isPWOV:!1}},2:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":779408,"midroll.pubId":133128,"midroll.pubTagId":779408,"postroll.pubId":133128,"postroll.pubTagId":779408,pubId:133128,pubTagId:779408,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause"}},3:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1184655,"midroll.pubId":133128,"midroll.pubTagId":1184655,"postroll.pubId":133128,"postroll.pubTagId":1184655,pubId:133128,pubTagId:1184655,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},isPWOV:!1}},4:{atr:{isDebug:!0,originId:15,"preroll.pubId":133128,"preroll.pubTagId":1046821,"midroll.pubId":133128,"midroll.pubTagId":1046821,"postroll.pubId":133128,"postroll.pubTagId":1046821,pubId:133128,pubTagId:1046821,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause"}},5:{atr:{originId:15,"preroll.pubId":133128,"preroll.pubTagId":1633025,"midroll.pubId":133128,"midroll.pubTagId":1633025,"postroll.pubId":133128,"postroll.pubTagId":1633025,pubId:133128,pubTagId:1633025,player:{settings:{mprdct:0,cmbopps:!1,encwfrs:!1}},onOutOfView:"pause",isPWOV:!1}}},level:{strength:1,atr:{},2:{atr:{secondsToClose:120,noaop:1,secondsBW:20,pubId:165757,pubTagId:946347,preroll:{pubId:165757,pubTagId:946347},midroll:{pubId:165757,pubTagId:946347},postroll:{pubId:165757,pubTagId:946347},player:{settings:{mintimwf:5e3,max_ready_vpaid:2,queue_size:3}}}},3:{atr:{secondsToClose:120,pubId:208401,pubTagId:1047981,preroll:{pubId:208401,pubTagId:1047981},midroll:{pubId:208401,pubTagId:1047981},postroll:{pubId:208401,pubTagId:1047981}},units:{FEED_MANAGER:H,INLINE_INSTREAM_OLD:H,INLINE_INSTREAM_VFORCE:H,SLIDER_INSTREAM:H,SLIDER_OUTSTREAM:H,WIDGET_ITEM:H}},4:{atr:{pubId:383725,pubTagId:2077655,preroll:{pubId:383725,pubTagId:2077655},midroll:{pubId:383725,pubTagId:2077655},postroll:{pubId:383725,pubTagId:2077655}}}},isFireAllPixels:{strength:101,atr:{},1:{atr:{pixels:{startWithABT:{isFire:!0},getAdAny:{isFire:!0},getAdNoRV:{isFire:!0},getAd:{isFire:!0},secondsToCloseTimer:{isFire:!0},secondsToCloseGlobalTimer:{isFire:!0},midrollCollapseTimer:{isFire:!0}}}},2:{atr:{pixels:{getAdAny:{isFire:!0},getAdNoRV:{isFire:!0},getAd:{isFire:!0}}}}},predictorsPresets:{strength:101,1:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q1"}}},playerReady:{isActive:!0,predictPoint:0},distancePixels:{isActive:!0,predictPoints:{1:{pixelsFromSelectors:10}}}}}},2:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q0"}}},playerReady:{isActive:!1},distancePixels:{isActive:!0,predictPoints:{1:{pixelsFromSelectors:10}}},firstScroll:{isActive:!0,predictPoints:[0,0]}}}},3:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q0"}}},playerReady:{isActive:!0,predictPoint:"any"},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},4:{atr:{predictors:{multiAd:{isActive:!0,predictPoints:{any:{qState:"q1"}}},playerReady:{isActive:!0,predictPoint:"any"},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},5:{atr:{predictors:{multiAd:{isActive:!1},playerReady:{isActive:!0,predictPoint:"any"},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}},99:{atr:{predictors:{autoKill:{isActive:!1},getAdFail:{isActive:!1},multiAd:{isActive:!1},loading:{isActive:!1},repeat:{isActive:!1},playerReady:{isActive:!1},distancePercent:{isActive:!1},distancePixels:{isActive:!1},firstScroll:{isActive:!1}}}}},isDebug:{strength:102,1:{atr:{player:{settings:{encwfrs:!1}}}}}},q=i(0),K=i.n(q);function X(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var z=function(){ar t,i,n;return t=e,(i=[{key:"getPreset",value:function(e){var t=e.key,i=e.value,n=e.unitType,r=e.platform;if(Y[t]&&Y[t][i]){var s=Y[t],o=Y[t].strength||1,a=Y[t].atr||{};return a=K()(a,s[i].atr),s[i]&&s[i].units&&(a=this._getFromUnits(a,s[i].units,n,r)||a),{presetData:a,strength:o}}}},{key:"_getFromUnits",value:function(e,t,i,n){if(t[i]){var r=t[i].atr||{};return K()(e,r),t[i].platform&&(e=this._getByPlatform(e,t[i].platform,n)||e),e}}},{key:"_getByPlatform",value:function(e,t,i){if(t[i]){var n=t[i].atr||{};return e=K()(e,n)}}}])&&X(t.prototype,i),n&&X(t,n),e}();function J(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Q=function(){function i(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.presets=[],this.config=e,this.fullfilledSetByCondition=t,this._setPresetLevels()}var e,t,n;return e=i,(t=[{key:"_setPresetLevels",value:function(){this._setDemoPreset(),this._setAggLevelPreset(),this._setIsFileAllPixelsPreset(),this._setPredictorsPresetsPreset(),this._setIsDebugPreset()}},{key:"_setDemoPreset",value:function(){var e=this.config.get("demo");e&&this._pushPreset("demo",e)}},{key:"_pushPreset",value:,{key:"_setAggLevelPreset",value:function(){var e=this.config.get("preset.level");e&&this._pushPreset("level",e)}},{key:"_setIsFileAllPixelsPreset",value:function(){var e=this.config.get("isFireAllPixels");e&&this._pushPreset("isFireAllPixels",e)}},{key:"_setPredictorsPresetsPreset",value:,{key:"_setIsDebugPreset",value:,{key:"getPresets",value:function(){var e=this._getPresetsDataByStrength();this._applyArrayOfPresets(e.weaker),this._applySettings(this.fullfilledSetByCondition),this._applyArrayOfPresets(e.stronger)}},{key:"_getPresetsDataByStrength",value:function(){var i=new z,n={weaker:[],stronger:[]};return this.presets.forEach(function(e){var t=i.getPreset(e);t&&(100<t.strength?n.stronger.push(t.presetData):n.weaker.push(t.presetData))}),n}},{key:"_applyArrayOfPresets",value:,{key:"_applySettings",value:])&&J(e.prototype,t),n&&J(e,n),i}();function $(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Z=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this._init()}var e,i,n;return e=t,(i=[{key:"_init",value:,{key:"sync",value:,{key:"_setSyncTimeout",value:,{key:"_canStartTimer",value:,{key:"_sync",value:function(){var e=this;if(!this.stopped){this.cookieSyncParams.repeat--;var t=document.createElement("iframe");t.style.display="none",t.src=this.syncUrl,t.onerror=document.body.appendChild(t)}}},{key:"stop",value:,{key:"getCookieSyncParams",value:function(){return this.cookieSyncParams}}])&&$(e.prototype,i),n&&$(e,n),t}();function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ie=i(0),ne=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=e,this.id=this.config.redId,this.cmTagMainUrl="infra/cmTag{{MAIN_FILE}}.js",this.cmTagCssUrl="assets/css/cmOsUnit.css",this._events=[],this._settings={},this._init()}var e,i,n;return e=t,(i=[{key:"_init",value:,{key:"_getWindow",value:,{key:"_getTopWindow",value:,{key:"_setConfig",value:,{key:"_appendCMTagConfig",value:,{key:"_appendObject",value:function(e){"object"===ee(e)&&(this.config=ie(this.config,e))}},{key:"_getCMParamsFromUrl",value:function(){var i={},e=this.win.location.href;e.slice(e.indexOf("?")+1).split("&").filter(.forEach(function(e){var t=e.slice(3).split("=");i[t[0]]=t[1]}),this.urlCMParams=i}},{key:"_appendReferrer",value:,{key:"_appendPlacementElement",value:,{key:"_appendGA",value:,{key:"_setCMTag",value:,{key:"_setIframeData",value:function(){var e={inIframe:this._inIframe(),iframe:this._getIframe()};e.inIframe&&(e.isFriendlyIframe=this._isFriendlyIframe()),e.isFriendlyIframe&&(e.inDFP=this._inDFP(e.iframe)),e.inDFP&&(e.dfpData=this._getDFPData(e.iframe)),cmTag.set("iframeData",e)}},{key:"_inIframe",value:,{key:"_getIframe",value:,{key:"_isFriendlyIframe",value:,{key:"_inDFP",value:function(t){if(t){return[/^google/].some(}}},{key:"_getDFPData",value:function(e){if(e){var t={id:e.getAttribute("id"),width:+e.getAttribute("width"),height:+e.getAttribute("height")};return t["1x1"]=1==t.width&&1==t.height,t}}},{key:"_load",value:,{key:"_stopSync",value:function(){this.cookieMatch.stop();var e=this.cookieMatch.getCookieSyncParams();y(this.config,"predictors.time.cookieSync",e)}},{key:"_setUnitPixels",value:,{key:"_setUnitLoadedPixel",value:function(){var e="".concat(this.pixels.PIXEL_TYPES.UNIT_LOADED,".isFire");!1!==this.config.get(e)&&y(this._config,e,!0)}},{key:"_setUnitLoadedWithFillPixel",value:,{key:"_loadUnit",value:,{key:"_setUnitUrl",value:,{key:"_setUnitMainFile",value:,{key:"_isLaterVersionThan",value:,{key:"_stripVersionToSegments",value:,{key:"_getUrlPrefixVersion",value:,{key:"_loadUnitJSFile",value:function(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.onload=this._onLoad.bind(this)||function(){},e.setAttribute("src","".concat(this.unitUrl).concat(this.cmTagMainUrl)),this.win.document.getElementsByTagName("head")[0].appendChild(e)}},{key:"_onLoad",value:function(){this._config.player&&this.config.player&&(this._config.player=ie(this._config.player,this.config.player)),this.win.startCMTagMain(this._config,this)}},{key:"_loadUnitCSSFile",value:function(){var e=document.createElement("link");e.setAttribute("type","text/css"),e.setAttribute("rel","stylesheet"),e.setAttribute("href","".concat(this.unitUrl).concat(this.cmTagCssUrl)),this.win.document.getElementsByTagName("head")[0].appendChild(e)}},{key:"on",value:,{key:"set",value:,{key:"start",value:,{key:"_startOnDomComplete",value:,{key:"_start",value:function(){this._initUnit(),g(this.config.isWaitForStartEvent)?this._handleWaitForStartEvent():this._startUnit()}},{key:"_initUnit",value:function(){this._setConfigObj(),this._appendCMUrlParams();var e=this._handleSettingsByCondition();this._setPresets(e),this._appendCMUrlParams(),this._createModelForUnit(),this._setAbTest(),this._initPixels()}},{key:"_startUnit",value:,{key:"_setConfigObj",value:function(){var e={};for(var t in this.config)y(e,t,this.config[t]);this.config=e,this._appendFPPSettings(),this.config.get=function(e,t){for(var i=t.split("."),n=e,r=0;r<i.length&&n;r++)n=i[r]in n?n[i[r]]:void 0;return n}.bind(this,this.config)}},{key:"_appendFPPSettings",value:function(){for(var e in this._settings)y(this.config,e,this._settings[e])}},{key:"_appendCMUrlParams",value:,{key:"_initPixels",value:function(){this.pixels=new O(this.config),this._fireStartWithABTPixel()}},{key:"_fireStartWithABTPixel",value:function(){if(window.cmTag.customDataForTest=window.cmTag.customDataForTest||{},window.cmTag.customDataForTest.startWithABT=!1,this.config.get("_abTest")){window.cmTag.customDataForTest.startWithABT=!0;var e=window.performance.timeOrigin?window.performance.timeOrigin:"",t={debug:"pn:!sqg:!torgn:".concat(e,"!ts:").concat(Date.now()),mntl:this.config.get("preset.level")};this.pixels.firePixel(this.pixels.PIXEL_TYPES.START_WITH_ABT,t),y(this._config,"".concat(this.pixels.PIXEL_TYPES.START_WITH_ABT,".isFire"),!1)}}},{key:"_handleSettingsByCondition",value:function(){var i=this,n={};return(this.config.get("settingsByConditions")||[]).forEach(function(e){if(e.conditions&&e.settings&&0<e.conditions.length&&function(e,t){for(var i=0;i<e.length;i++){var n=e[i];if(n.key&&n.val){var r=n.val;if("function"==typeof n.val&&(r=n.val(t)),r!=t.get(n.key))return}}return 1}(e.conditions,i.config))for(var t in e.settings)-1<t.indexOf("preset")?y(i.config,t,e.settings[t]):n[t]=e.settings[t]}),n}},{key:"_createModelForUnit",value:function(){this._config=function(t){try{return f({},t)}catch(e){var i=t.feedContainer;t.feedContainer=void 0;var n=f({},t);return t.feedContainer=i,n}}(this.config),this._config.get=void 0}},{key:"_setAbTest",value:function(){var e,t;!function(e){var t=e.get("unitType");if(-1<[c.FEED_MANAGER,c.INLINE_FEED,t===c.MSN_WIDGET,c.WIDGET_ITEM].indexOf(t)){var i=h(e);e._appendedAbTests=[{abTest:"ufm".concat(_(i)?l.UFM_AB_TEST_GROUPS[i]:"")}]}}(this.config),y(this.config,"_abTest",(e=this.config.get("pushedArr")||[],t=this.config.get("_appendedAbTests")||[],e.concat(t).map(function(e){if(e.hasOwnProperty("abTest"))return e.abTest}).filter(.sort(function(e,t){var i=e.toUpperCase(),n=t.toUpperCase();return n<i?1:i<n?-1:0}).join("!")))}},{key:"_setPresets",value:function(e){new Q(this.config,e).getPresets()}},{key:"_setCookieSync",value:,{key:"_canDoCookieMatch",value:,{key:"_initUnitLoader",value:function(){this.unitLoader=new G(this.config),this.unitLoader.once("loadUnit",this._load.bind(this)),this.unitLoader.load()}},{key:"_handleWaitForStartEvent",value:,{key:"_createStartEventCallback",value:,{key:"_startEventCallback",value:function(){window.TRC.videoFunctions.startEvent=this.pixels.firePixel(this.pixels.PIXEL_TYPES.UNIT_LOADED_AFTER_DELAY),this._config.isWaitForStartEvent=!1,this._startUnit()}}])&&te(e.prototype,i),n&&te(e,n),t}();function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var oe=i(0),ae=function(){ar e,i,n;return e=t,(i=[{key:"_initCMTag",value:,{key:"_set",value:function(e,t,i){if(arguments){var n=e,r=t;i?this._setUnit(n,r,i):"string"==typeof n&&void 0!==r?this._setKeyVal(n,r):this._appendObject(n)}}},{key:"_appendObject",value:function(e){"object"===re(e)&&(this.config=oe(this.config,e))}},{key:"_setUnit",value:,{key:"_setKeyVal",value:,{key:"_push",value:function(e,t){var i,n,r;e&&t&&(this.config.pushedArr=this.config.pushedArr||[],this.config.pushedArr.push((r=t,(n=e)in(i={})?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,i)))}},{key:"_setMacros",value:function(e){this._appendObject(e);var t=this._createUnit();return t.start(),t}},{key:"_createUnit",value:,{key:"_setByCondition",value:])&&se(e.prototype,i),n&&se(e,n),t}()},3:function(e,t){ar i,n;n={},r.m=i=[function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}i.r(t);var r=(n(o.prototype,[{key:"send",value:,{key:"_onFail",value:,{key:"_onReadyStateChanged",value:function(e){if(4==this.readyState){if(this.gotResponse)return;this.gotResponse=!0,e.onSuccess&&e.onSuccess(this.responseText,void 0,e.wfUrl)}}}]),o),s=[{id:5,mime:"application/javascript",video:!1},{id:8,mime:"video/x-ms-wmv",video:!0},{id:10,mime:"video/mp4",video:!0},{id:11,mime:"video/ogg",video:!0},{id:12,mime:"video/webm",video:!0}];function o(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0,i=2<arguments.length&&void 0!==arguments[2]&&arguments[2],n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;!function(e){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.async=null==t||t,this.withCredentials=null==i||i,this.timeout=n||5e3,this.contentType=e||"application/x-www-form-urlencoded"}unction l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}window._cm_wfCounter=window._cm_wfCounter||1;var c=(l(u.prototype,[{key:"_init",value:function(){this.dynamicNoaopMaxValue=this.store.get("dnapmxvl"),this.playerVersion=this.store.get("player_version"),this.timezoneOffset=-1*(new Date).getTimezoneOffset(),this.waterfallVersion=this.store.get("wfv"),this.isAmp=this.store.get("isAmp")?"1":"0",this.encodeWaterfallResponse=this.store.get("encwfrs")?1:void 0}},{key:"_setBaseUrl",value:function(){var e,t=this.store.get("wf_base_path")||this.creatives.CM_DOMAIN,i=this.store.get("wf_path")||this.creatives.SERVICE;this.baseUrl="".concat(("string"!=typeof(e=t)||0!==(e=e.replace(/^(http[s]?:|ftp:)/g,"")).indexOf("//")&&(e="//"+e),e)).concat(/.*\/$/g.test(t)?"":"/").concat(i)}},{key:"_getConsentData",value:,{key:"_initConsentData",value:,{key:"_checkMimeTypes",value:,{key:"generateUrl",value:function(e){var t="".concat(this.baseUrl,"?").concat(this._setWfUrlQuerystring(e));return window.lastWfUrl=t}},{key:"_setServiceName",value:,{key:"_setWfUrlQuerystring",value:function(e){if(!e.roll)return"";this._updateConsentData();var t=a(this._buildParamsForQuerystring(e),this._buildOptionalParamsForQuerystring(),this._buildGDPRParamsForQuerystring(e));t=this._appendUnitParams(t,e);var i,n=(i=t,Object.keys(i).map();return(n=this._appendWfExtraParams(n)).join("&")}},{key:"_updateConsentData",value:,{key:"_buildParamsForQuerystring",value:function(e){return{oid:this.creatives.OID,width:this.creatives.PLAYER_WIDTH||this.creatives["PLAYER-WIDTH"],height:this.creatives.PLAYER_HEIGHT||this.creatives["PLAYER-HEIGHT"],pubid:e.pubid||this.creatives.PUBID,tagid:e.tagid||this.creatives.TAGID,crid:this.store.get("creativeId")||"",noaop:this._decideNoaop(e.isFirstRun,this.creatives.NOAOP),sortOrderType:this.creatives.SORTORDERTYPE,cb:(new Date).getTime(),mimes:this.supportedMimeTypes,isvideo:this.creatives.ISVIDEO,plmd:this.creatives.PLMD,mindur:this.creatives.MINDUR,maxdur:this.creatives.MAXDUR,minbr:this.creatives.MINBR,maxbr:this.creatives.MAXBR,st:(t=e.roll.roll_type,(n={"pre-roll":i=0,preroll:0,"mid-roll":-1,midroll:-1,"post-roll":-2,postroll:-2}).hasOwnProperty(t)&&(i=n[t]),i),seq:window._cm_wfCounter,pv:this.playerVersion||999,pt:function(e){if(!e||"string"!=typeof e)return 0;var t;void 0===t&&(t=0);var i=0;t^=-1;for(var n=0,r=(e=e)).length;n<r;n++)i=255&(t^e.charCodeAt(n)),t=t>>>8^"0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*i,8);return-1^t}(this.store.get("ab_test")||999),tz:this.timezoneOffset,viewable:!document.hidden,ddast:this.store.get("auc_dast"),proto:"2,3,5,6",encoded:1,pstn:this.store.get("pstn")||1,callback:"",wfv:this.waterfallVersion,amp:this.isAmp,qsz:this.store.get("queue_size")||10,ft:this.store.get("frameType"),pb:"yes"===this.store.get("isPrivateBrowsing")?"1":"0",pagg:this.store.get("preset.level")||1};var t,i,n}},{key:"_decideNoaop",value:function(e,t){var i;if(e)i=this.store.get("firstWaterfallNoaop");else if(0<this.dynamicNoaopMaxValue){var n=this.store.get("max_ready_vpaid")||0,r=this.store.get("vpaidReadyCount")||0;i=Math.min(this.dynamicNoaopMaxValue,n-r)}else i=t;return i||t}},{key:"_buildOptionalParamsForQuerystring",value:function(){var e=this.store.get("mprdct"),t=this.store.get("subUnitType"),i={dtagid:this.store.get("dtagid")||void 0,dpubid:this.store.get("dpubid")||void 0,abtst:this.store.get("ab_test")||void 0,mPre:void 0!==e?e:void 0,fmli:this.store.get("fmli")||void 0,fmpw:this.store.get("fmpw")||void 0,cirf:this.creatives.CIRF?encodeURIComponent(decodeURIComponent(this.creatives.CIRF)):void 0,en:this.encodeWaterfallResponse,subu:"undefiend"!=typeof t?t:void 0};return JSON.parse(JSON.stringify(i))}},{key:"_buildGDPRParamsForQuerystring",value:function(){return{cdb:(this.updateCMPData?this.consentData.cdb:this.store.get("cdb"))||"",gdprApplies:(this.updateCMPData?this.consentData.gdprApplies:this.store.get("gdprApplies"))||!1}}},{key:"_appendUnitParams",value:,{key:"_appendWfExtraParams",value:function(e){var t=this.store.get("wf_xrta");return t&&e.push(t),e}},{key:"generatePOSTParams",value:,{key:"_buildParamsForPOSTData",value:function(e){var t=this.store.get("navigatorConnection")||{};return{fv:this._buildLineItemsDataForPOSTData(),wfv:this.waterfallVersion,adv:this.store.getWfData(),cdl:t.downlink||0,cet:t.effectiveTypeId||0,ct:t.typeId||0,crt:t.rtt||0,csd:!0===t.saveData?1:0,q:e.queueStatus?e.queueStatus.items:[],qs:e.queueStatus?e.queueStatus.size:0,pq:e.queueStatus?e.queueStatus.prevItems:[],drp:btoa(JSON.stringify(e.droppedAdTypes))}}},{key:"_buildLineItemsDataForPOSTData",value:,{key:"_buildOptionalParamsForPOSTData",value:function(){var e=this.store.get("subUnitType"),t=this.store.get("EP_PLAYER"),i=this.store.get("sessionData"),n={sd:i&&"undefined"!==i?i:void 0,en:this.encodeWaterfallResponse,subu:void 0!==e?e:void 0,ls:!this.sentCookiesData&&t?t:void 0};return this.sentCookiesData||(this.sentCookiesData=!0),JSON.parse(JSON.stringify(n))}},{key:"send",value:,{key:"getWfCounter",value:function(){return window._cm_wfCounter}},{key:"increaseWfCounter",value:,{key:"getConsentData",value:function(){return this.consentData}},{key:"getRboxConsentData",value:]),u);function u(e,t){!this),this.store=e,this.creatives=t,this.XHR=new r(this.store.get("psthdrs")||"application/json",!0,!0,5e3),this._init(),this._setBaseUrl(),this._getConsentData(),this._checkMimeTypes()}try{if(window.cmTag){var f=window.cmTag.config.ms||{};f["wf-generator"]=f["wf-generator"]||{},f["wf-generator"]["1.0.5"]=c,window.cmTag.set("ms",f)}window.TRC=window.TRC||{},window.TRC["wf-generator"]=window.TRC["wf-generator"]||{},window.TRC["wf-generator"]["1.0.5"]=c}catch(e){}}],r.c=n,r.d=r.r=r.t=r.n=r.o=r.p="",r(r.s=0)},30:6:);}catch(ex){}