//# sourceMappingURL=https://ton.local.twitter.com/responsive-web-internal/sourcemaps/client-web-legacy/bundle.SafetyModeModal.ab21208a.js.mapth:s.getWindowWidth(),height:s.getWindowHeight()}}),e),a(s.wrapEvent({type:s.EventType.FullSnapshot,data:{node:{type:"Document"},initialOffset:{left:document.documentElement.scrollLeft,top:document.documentElement.scrollTop}}})),a(s.wrapEvent({type:s.EventType.Global,data:{globalValues:s.convertObjectChildrenToString(window)}}))}try{var c=[];c.push(s.on("DOMContentLoaded",(function(){a(s.wrapEvent({type:s.EventType.DomContentLoaded,data:{}}))})));var l=function(){u(),c.push(s.initObservers({mousemoveCb:function(e,t){return a(s.wrapEvent({type:s.EventType.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return a(s.wrapEvent({type:s.EventType.IncrementalSnapshot,data:s._assign({source:s.IncrementalSource.MouseInteraction},e)}))},scrollCb:function(e){return a(s.wrapEvent({type:s.EventType.IncrementalSnapshot,data:s._assign({source:s.IncrementalSource.Scroll},e)}))},viewportResizeCb:function(e){return a(s.wrapEvent({type:s.EventType.IncrementalSnapshot,data:s._assign({source:s.IncrementalSource.ViewportResize},e)}))},keyboardCb:function(e){return a(s.wrapEvent({type:s.EventType.IncrementalSnapshot,data:s._assign({source:s.IncrementalSource.Input},e)}))},mousemoveWait:r},o))};return"interactive"===document.readyState||"complete"===document.readyState?l():c.push(s.on("load",(function(){a(s.wrapEvent({type:s.EventType.Load,data:{}})),l()}),window)),function(){c.forEach((function(e){return e()}))}}catch(e){console.log(e)}}}]),e}(),s=function(){function e(){o(this,e),this.f=String.fromCharCode,this.n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",this.e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",this.t={}}return r(e,[{key:"getBaseValue",value:function(e,t){if(!this.t[e]){this.t[e]={};for(var n=0;n<e.length;n++)this.t[e][e.charAt(n)]=n}return this.t[e][t]}},{key:"compressToBase64",value:function(e){if(null===e)return"";var t=this,n=this._compress(e,6,(function(e){return t.n.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}}},{key:"decompressFromBase64",value:function(e){if(null===e)return"";if(""===e)return null;var t=this;return this._decompress(e.length,32,(function(n){return t.getBaseValue(t.n,e.charAt(n))}))}},{key:"compress",value:function(e){var t=this;return this._compress(e,16,(function(e){return t.f(e)}))}},{key:"_compress",value:function(e,t,n){if(null===e)return"";var o,r,i,s={},a={},u="",c="",l="",h=2,p=3,f=2,v=[],d=0,y=0;for(i=0;i<e.length;i+=1)if(u=e.charAt(i),Object.prototype.hasOwnProperty.call(s,u)||(s[u]=p++,a[u]=!0),c=l+u,Object.prototype.hasOwnProperty.call(s,c))l=c;else{if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(o=0;o<f;o++)d<<=1,y===t-1?(y=0,v.push(n(d)),d=0):y++;for(r=l.charCodeAt(0),o=0;o<8;o++)d=d<<1|1&r,y===t-1?(y=0,v.push(n(d)),d=0):y++,r>>=1}else{for(r=1,o=0;o<f;o++)d=d<<1|r,y===t-1?(y=0,v.push(n(d)),d=0):y++,r=0;for(r=l.charCodeAt(0),o=0;o<16;o++)d=d<<1|1&r,y===t-1?(y=0,v.push(n(d)),d=0):y++,r>>=1}0===--h&&(h=Math.pow(2,f),f++),delete a[l]}else for(r=s[l],o=0;o<f;o++)d=d<<1|1&r,y===t-1?(y=0,v.push(n(d)),d=0):y++,r>>=1;0===--h&&(h=Math.pow(2,f),f++),s[c]=p++,l=String(u)}if(""!==l){if(Object.prototype.hasOwnProperty.call(a,l)){if(l.charCodeAt(0)<256){for(o=0;o<f;o++)d<<=1,y===t-1?(y=0,v.push(n(d)),d=0):y++;for(r=l.charCodeAt(0),o=0;o<8;o++)d=d<<1|1&r,y===t-1?(y=0,v.push(n(d)),d=0):y++,r>>=1}else{for(r=1,o=0;o<f;o++)d=d<<1|r,y===t-1?(y=0,v.push(n(d)),d=0):y++,r=0;for(r=l.charCodeAt(0),o=0;o<16;o++)d=d<<1|1&r,y===t-1?(y=0,v.push(n(d)),d=0):y++,r>>=1}0===--h&&(h=Math.pow(2,f),f++),delete a[l]}else for(r=s[l],o=0;o<f;o++)d=d<<1|1&r,y===t-1?(y=0,v.push(n(d)),d=0):y++,r>>=1;0===--h&&(h=Math.pow(2,f),f++)}for(r=2,o=0;o<f;o++)d=d<<1|1&r,y===t-1?(y=0,v.push(n(d)),d=0):y++,r>>=1;for(;;){if(d<<=1,y===t-1){v.push(n(d));break}y++}return v.join("")}},{key:"decompress",value:function(e){return null===e?"":""===e?null:this._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))}},{key:"_decompress",value:function(e,t,n){var o=[],r=4,i=4,s=3,a="",u=[],c=void 0,l=void 0,h=void 0,p=void 0,f=void 0,v=void 0,d=void 0,y={val:n(0),position:t,index:1};for(c=0;c<3;c+=1)o[c]=c;for(h=0,f=Math.pow(2,2),v=1;v!==f;)p=y.val&y.position,y.position>>=1,0===y.position&&(y.position=t,y.val=n(y.index++)),h|=(p>0?1:0)*v,v<<=1;switch(h){case 0:for(h=0,f=Math.pow(2,8),v=1;v!==f;)p=y.val&y.position,y.position>>=1,0===y.position&&(y.position=t,y.val=n(y.index++)),h|=(p>0?1:0)*v,v<<=1;d=this.f(h);break;case 1:for(h=0,f=Math.pow(2,16),v=1;v!==f;)p=y.val&y.position,y.position>>=1,0===y.position&&(y.position=t,y.val=n(y.index++)),h|=(p>0?1:0)*v,v<<=1;d=this.f(h);break;case 2:return""}for(o[3]=d,l=d,u.push(d);;){if(y.index>e)return"";for(h=0,f=Math.pow(2,s),v=1;v!==f;)p=y.val&y.position,y.position>>=1,0===y.position&&(y.position=t,y.val=n(y.index++)),h|=(p>0?1:0)*v,v<<=1;switch(d=h){case 0:for(h=0,f=Math.pow(2,8),v=1;v!==f;)p=y.val&y.position,y.position>>=1,0===y.position&&(y.position=t,y.val=n(y.index++)),h|=(p>0?1:0)*v,v<<=1;o[i++]=this.f(h),d=i-1,r--;break;case 1:for(h=0,f=Math.pow(2,16),v=1;v!==f;)p=y.val&y.position,y.position>>=1,0===y.position&&(y.position=t,y.val=n(y.index++)),h|=(p>0?1:0)*v,v<<=1;o[i++]=this.f(h),d=i-1,r--;break;case 2:return u.join("")}if(0===r&&(r=Math.pow(2,s),s++),o[d])a=o[d];else{if(d!==i)return null;a=l+l.charAt(0)}u.push(a),o[i++]=l+a.charAt(0),l=a,0===--r&&(r=Math.pow(2,s),s++)}}}]),e}(),a=function(){function e(){o(this,e),this.PREFIX="dcts-",this.CPR=new s}return r(e,[{key:"compressAndSplitEvent",value:function(e){if(null==e)return[];var t=this.CPR.compressToBase64(JSON.stringify(e)),n=Math.floor(t.length/3)+1;return t.match(new RegExp(".{1,"+n+"}","g"))}},{key:"processTelemetry",value:function(e,t,n){var o=this.compressAndSplitEvent(e);if(null!=o){for(var r={},i=0;i<o.length;i++)r[this.PREFIX+i]=o[i];return r["x-f-uc"]=t,r.csrf_token=n,JSON.stringify(r)}return null}},{key:"getParamPrefix",value:function(){return this.PREFIX}}]),e}(),u=function(){function e(){o(this,e),this.processor=new a,this.DEFAULT_URL="/platform-telemetry/li/gather",this.timestone=new i,this.workerThread=null,this.events=[]}return r(e,[{key:"init",value:function(e,t,n,o,r,i){var s=this;if(this.isExist(i)&&""!==i&&window.Worker){var a=this.convertWorkerUrl(i);null!==a&&(this.workerThread=new Worker(a),this.workerThread.onmessage=function(t){s.sendTelemetry(t.data,e)})}this.isExist(e)||(e=this.DEFAULT_URL);var u=0,c=6;null===o||isNaN(o)||(c=o);var l=this.timestone.record({emit:function(n,o){o&&s.events.length>0&&u<c?(s.collect(e,t,s.events,r),u+=1,s.events.splice(0,s.events.length)):u>=c&&(l(),s.isExist(s.workerThread)&&s.workerThread.terminate()),s.events.push(n)},checkoutEveryNms:n})}},{key:"collect",value:function(e,t,n,o){if(this.isExist(o)||(o=""),this.isExist(t)||(t="undefined-uc"),this.isExist(this.workerThread))this.workerThread.postMessage({events:n,useCase:t,csrfToken:o});else{var r=this.processor.processTelemetry(n,t,o);null!==r&&this.sendTelemetry(r,e)}}},{key:"collectFinalTelemetry",value:function(e,t,n){if(this.isExist(e)||(e=this.DEFAULT_URL),this.isExist(n)||(n=""),this.isExist(t)||(t="undefined-uc"),this.events.length>0)if(navigator.sendBeacon&&this.isExist(FormData)){var o=new FormData;o.append("x-f-uc",t),o.append("csrf_token",n);for(var r=this.processor.compressAndSplitEvent(this.events),i=0;i<r.length;i++)o.append(this.processor.getParamPrefix()+i,r[i]);navigator.sendBeacon(e,o)}else this.collect(e,t,this.events,"")}},{key:"sendTelemetry",value:function(e,t){var n=new XMLHttpRequest;n.open("POST",t),n.setRequestHeader("Content-Type","application/json"),n.send(e)}},{key:"isExist",value:function(e){return null!=e}},{key:"convertWorkerUrl",value:function(e){var t="https://"+window.location.host;if(0===e.indexOf(t)||0===e.indexOf("/"))return e;if(-1===e.indexOf(t)){var n=e.split(".com/");if(2===n.length)return"/"+n[1]}return null}}]),e}();(function(){const e=function(){let e="";const t=document.cookie.split("; ");for(let n=0;n<t.length;++n)0===t[n].indexOf("JSESSIONID=")&&t[n].length>6&&(e=t[n].substring("JSESSIONID=".length));return e}(),t=new u,n=document.querySelector('meta[name="platform-worker"]'),o=n&&n.content||"";t.init("/platform-telemetry/li/gather","rgn",5e3,20,e,o),window.addEventListener("beforeunload",()=>{t.collectFinalTelemetry("/platform-telemetry/li/gather","rgn",e)})})()}]);