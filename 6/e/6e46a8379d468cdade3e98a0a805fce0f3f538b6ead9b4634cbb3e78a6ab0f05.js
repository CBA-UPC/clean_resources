/* jssdk-hls.js 2023-07-28 07:25 778be511b03116ed5016c297ef854693a54d1a1a */
!function t(e){var r,i;r=this,i=function(){"use strict";s:{}};!g);var m=g.exports,p=Number.isFinite||y=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t}({}),E={}),T={}),S=function(){},L={trace:S,debug:S,log:S,warn:S,info:S,error:S},R=L;unction A(t,e){if(self.console&&!0===t||"object"==typeof t){b(t,"debug","log","info","warn","error");try{R.log('Debug logs enabled for "'+e+'" in hls.js version '+void 0)}catch(t){R=L}}else R=L}var k=R,D=/^(\d+)x(\d+)$/,_=/(.+?)=(".*?"|.*?)(?:,|$)/g,x=);ar C=),I=P="audio",F="video",O="audiovideo",M=),N=M),B=M),U=),G=v(void 0);ar K,V=function(t,e){return e+10<=t.length&&73===t[e]&&68===t[e+1]&&51===t[e+2]&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128},W=Y=j=q=z=X=Q=$=Z=J=tt=et=rt=ar at=nt=Math.pow(2,32)-1,st=[].push,ot={video:1,audio:2,id3:3,text:4};n gt(t){for(var e=[],r=ct(t,["moov","trak"]),a=0;a<r.length;a++){var n=r[a],s=ct(n,["tkhd"])[0];if(s){var o=s[0],l=dt(s,0===o?12:20),u=ct(n,["mdia","mdhd"])[0];if(u){var d=dt(u,0===(o=u[0])?12:20),h=ct(n,["mdia","hdlr"])[0];if(h){var f=lt(h.subarray(8,12)),c={soun:P,vide:F}[f];if(c){var v=mt(ct(n,["mdia","minf","stbl","stsd"])[0]);e[l]={timescale:d,type:c},e[c]=i({timescale:d,id:l},v)}}}}}return ct(t,["moov","mvex","trex"]).forEach((),e}function mt(t){var e=t.subarray(8),r=e.subarray(86),i=lt(e.subarray(4,8)),a=i,n="enca"===i||"encv"===i;if(n){var s=ct(e,[i])[0];ct(s.subarray("enca"===i?28:78),["sinf"]).forEach(()}switch(a){case"avc1":case"avc2":case"avc3":case"avc4":a+="."+pt(t[111])+pt(t[112])+pt(t[113]);break;case"mp4a":var o=ct(e,[i])[0],l=ct(o.subarray(28),["esds"])[0];l&&l.length>12&&0!==l[11]&&(a+="."+pt(l[11]),a+="."+(l[12]>>>2&63).toString(16).toUpperCase());break;case"hvc1":case"hev1":var u=ct(r,["hvcC"])[0],d=u[1],h=["","A","B","C"][d>>6],f=31&d,c=dt(u,2),v=(32&d)>>5?"H":"L",g=u[12],m=u.subarray(6,12);a+="."+h+f,a+="."+c.toString(16).toUpperCase(),a+="."+v+g;for(var p="",y=m.length;y--;){var E=m[y];(E||p)&&(p="."+E.toString(16).toUpperCase()+p)}a+=p;break;case"dvh1":case"dvhe":var T=ct(r,["dvcC"])[0],S=T[2]>>1&127,L=T[2]<<5&32|T[3]>>3&31;a+="."+yt(S)+"."+yt(L);break;case"vp09":var R=ct(r,["vpcC"])[0],b=R[4],A=R[5],k=R[6]>>4&15;a+="."+yt(b)+"."+yt(A)+"."+yt(k);break;case"av01":var D=ct(r,["av1C"])[0],_=D[1]>>>3,x=31&D[1],w=D[2]>>>7?"H":"M",C=(64&D[2])>>6,I=(32&D[2])>>5,P=2===_&&C?I?12:10:C?10:8,F=(16&D[2])>>4,O=(8&D[2])>>3,M=(4&D[2])>>2,N=3&D[2];a+="."+_+"."+yt(x)+w+"."+yt(P)+"."+F+"."+O+M+N}return{codec:a,encrypted:n}}ar _t={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,fLaC:!0,flac:!0,FLAC:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,av01:!0,drac:!0,dva1:!0,dvav:!0,dvh1:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0},text:{stpp:!0,wvtt:!0}},xt=Dt();function wt(t,e){return!t.split(",").some(()}ar It={},Pt=/flac|opus/i;function Ft(t){return t.replace(Pt,(function(t){return function(t){if(It[t])return It[t];for(var e={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[t],r=0;r<e.length;r++)if(Ct(e[r],"audio"))return It[t]=e[r],e[r];return t}(t.toLowerCase())}))}var Ot=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,Mt=/#EXT-X-MEDIA:(.*)/g,Nt=/^#EXT(?:INF|-X-TARGETDURATION):/m,Bt=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[\S ]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Ut=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|")),Gt=);nction Vt(t,e){["video","audio","text"].forEach((function(r){var i=t.filter(();i.length&&(e[r+"Codec"]=i.join(","),t=t.filter(())})),e.unknownCodecs=t}zt="manifest",Xt="level",Qt="audioTrack",$t="subtitleTrack",Zt="main",Jt="audio",te="subtitle";r ie=);r se="org.id3",oe="com.apple.quicktime.HLS",le="https://aomedia.org/emsg/ID3";ar de=);ar fe=),ce=),ve=["NONE","TYPE-0","TYPE-1",null],ge="",me="YES",pe="v2",ye=),Ee=);rch:;function Ie(t,e,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var a=null;if(t?a=e[t.sn-e[0].sn+1]||null:0===r&&0===e[0].start&&(a=e[0]),a&&0===Pe(r,i,a))return a;var n=Ce.search(e,Pe.bind(null,r,i));return!n||n===t&&a?a:n}r Oe,Me=3e5,Ne=0,Be=2,Ue=3,Ge=5,He=0,Ke=1,Ve=2,We=function(){ar e=t.prototype;return e.registerListeners=function(){var t=this.hls;t.on(y.ERROR,this.onError,this),t.on(y.MANIFEST_LOADING,this.onManifestLoading,this),t.on(y.LEVEL_UPDATED,this.onLevelUpdated,this)},e.unregisterListeners=e.destroy=e.startLoad=function(t){},e.stopLoad=function(){this.playlistError=0},e.getVariantLevelIndex=e.onManifestLoading=e.onLevelUpdated=function(){this.playlistError=0},e.onError=function(t,e){var r;if(!e.fatal){var i=this.hls,a=e.context;switch(e.details){case T.FRAG_LOAD_ERROR:case T.FRAG_LOAD_TIMEOUT:case T.KEY_LOAD_ERROR:case T.KEY_LOAD_TIMEOUT:return void(e.errorAction=this.getFragRetryOrSwitchAction(e));case T.FRAG_GAP:case T.FRAG_PARSING_ERROR:case T.FRAG_DECRYPT_ERROR:return e.errorAction=this.getFragRetryOrSwitchAction(e),void(e.errorAction.action=Be);case T.LEVEL_EMPTY_ERROR:case T.LEVEL_PARSING_ERROR:var n,s,o=e.parent===Zt?e.level:i.loadLevel;return void(e.details===T.LEVEL_EMPTY_ERROR&&null!=(n=e.context)&&null!=(s=n.levelDetails)&&s.live?e.errorAction=this.getPlaylistRetryOrSwitchAction(e,o):(e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,o)));case T.LEVEL_LOAD_ERROR:case T.LEVEL_LOAD_TIMEOUT:return void("number"==typeof(null==a?void 0:a.level)&&(e.errorAction=this.getPlaylistRetryOrSwitchAction(e,a.level)));case T.AUDIO_TRACK_LOAD_ERROR:case T.AUDIO_TRACK_LOAD_TIMEOUT:case T.SUBTITLE_LOAD_ERROR:case T.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){var l=i.levels[i.loadLevel];if(l&&(a.type===Qt&&a.groupId===l.audioGroupId||a.type===$t&&a.groupId===l.textGroupId))return e.errorAction=this.getPlaylistRetryOrSwitchAction(e,i.loadLevel),e.errorAction.action=Be,void(e.errorAction.flags=Ke)}return;case T.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:var u=i.levels[i.loadLevel],d=null==u?void 0:u.attrs["HDCP-LEVEL"];return void(d&&(e.errorAction={action:Be,flags:Ve,hdcpLevel:d}));case T.BUFFER_ADD_CODEC_ERROR:case T.REMUX_ALLOC_ERROR:case T.BUFFER_APPEND_ERROR:return void(e.errorAction=this.getLevelSwitchAction(e,null!=(r=e.level)?r:i.loadLevel));case T.INTERNAL_EXCEPTION:case T.BUFFER_APPENDING_ERROR:case T.BUFFER_FULL_ERROR:case T.LEVEL_SWITCH_ERROR:case T.BUFFER_STALLED_ERROR:case T.BUFFER_SEEK_OVER_HOLE:case T.BUFFER_NUDGE_ON_STALL:return void(e.errorAction={action:Ne,flags:He})}if(e.type===E.KEY_SYSTEM_ERROR){var h=this.getVariantLevelIndex(e.frag);return e.levelRetry=!1,void(e.errorAction=this.getLevelSwitchAction(e,h))}}},e.getPlaylistRetryOrSwitchAction=e.getFragRetryOrSwitchAction=e.getLevelSwitchAction=e.onErrorOut=e.sendAlternateToPenaltyBox=e.switchLevel=e.redundantFailover=function(t){var e=this,r=this.hls,i=this.penalizedRenditions,a=t.parent===Zt?t.level||0:r.loadLevel,n=r.levels[a],s=n.url.length,o=t.frag?t.frag.urlId:n.urlId;n.urlId!==o||t.frag&&!n.details||this.penalizeRendition(n,t);for(var l=u=1;u<s;u++){var d=l();if("object"==typeof d)return d.v}return!1},e.penalizeRendition=t}(),Ye=function(){ar e=t.prototype;return e.destroy=e.clearTimer=e.startLoad=e.stopLoad=e.switchParams=e.loadPlaylist=e.shouldLoadPlaylist=e.shouldReloadPlaylist=e.playlistLoaded=e.getDeliveryDirectives=e.checkRetry=t}(),je=function(t){(e,t);var r=e.prototype;return r._registerListeners=function(){var t=this.hls;t.on(y.MANIFEST_LOADING,this.onManifestLoading,this),t.on(y.MANIFEST_LOADED,this.onManifestLoaded,this),t.on(y.LEVEL_LOADED,this.onLevelLoaded,this),t.on(y.LEVELS_UPDATED,this.onLevelsUpdated,this),t.on(y.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),t.on(y.FRAG_LOADED,this.onFragLoaded,this),t.on(y.ERROR,this.onError,this)},r._unregisterListeners=r.destroy=r.stopLoad=r.resetLevels=r.onManifestLoading=function(t,e){this.resetLevels()},r.onManifestLoaded=function(t,e){var r,i=[],a={};e.levels.forEach((function(t){var e,n=t.attrs;-1!==(null==(e=t.audioCodec)?void 0:e.indexOf("mp4a.40.34"))&&(Oe||(Oe=/chrome|firefox/i.test(navigator.userAgent)),Oe&&(t.audioCodec=void 0)),t.audioCodec&&(t.audioCodec=Ft(t.audioCodec));var s=n.AUDIO,o=n.CODECS,l=n["FRAME-RATE"];n["PATHWAY-ID"];var u=n.RESOLUTION,d=n.SUBTITLES,h=t.bitrate+"-"+u+"-"+l+"-"+o;(r=a[h])?r.addFallback(t):(r=new Ee(t),a[h]=r,i.push(r)),qe(r,"audio",s),qe(r,"text",d)})),this.filterAndSortMediaOptions(i,e)},r.filterAndSortMediaOptions=function(t,e){var r=this,i=[],a=[],n=!1,s=!1,o=!1,l=t.filter(();if((n||s)&&o&&(l=l.filter(()),0!==l.length){e.audioTracks&&ze(i=e.audioTracks.filter(()),e.subtitles&&ze(a=e.subtitles);var u=l.slice(0);l.sort(();var d=u[0];if(this.steering&&(l=this.steering.filterParsedLevels(l)).length!==u.length)for(var h=0;h<u.length;h++)if(u[h].pathwayId===l[0].pathwayId){d=u[h];break}this._levels=l;for(var f=0;f<l.length;f++)if(l[f]===d){this._firstLevel=f,this.log("manifest loaded, "+l.length+" level(s) found, first bitrate: "+d.bitrate);break}var c=o&&!s,v={levels:l,audioTracks:i,subtitleTracks:a,sessionData:e.sessionData,sessionKeys:e.sessionKeys,firstLevel:this._firstLevel,stats:e.stats,audio:o,video:s,altAudio:!c&&i.some(()};this.hls.trigger(y.MANIFEST_PARSED,v),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}else Promise.resolve().then((function(){if(r.hls){t.length&&r.warn('One or more CODECS in variant not supported: "'+t[0].attrs.CODECS+'"');var i=new Error("no level with compatible codecs found in manifest");r.hls.trigger(y.ERROR,{type:E.MEDIA_ERROR,details:T.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:e.url,error:i,reason:i.message})}}))},r.onError=r.onFragLoaded=r.onLevelLoaded=r.onAudioTrackSwitched=r.loadPlaylist=r.removeLevel=r.onLevelsUpdated=n(e,[{key:"levels",get:,{key:"level",get:function(){return this.currentLevelIndex},set:,{key:"manualLevel",get:function(){return this.manualLevelIndex},set:,{key:"firstLevel",get:function(){return this._firstLevel},set:function(t){this._firstLevel=t}},{key:"startLevel",get:set:function(t){this._startLevel=t}},{key:"nextLoadLevel",get:set:]),e}(Ye);r Xe="NOT_LOADED",Qe="APPENDING",$e="PARTIAL",Ze="OK",Je=function(){ar e=t.prototype;return e._registerListeners=function(){var t=this.hls;t.on(y.BUFFER_APPENDED,this.onBufferAppended,this),t.on(y.FRAG_BUFFERED,this.onFragBuffered,this),t.on(y.FRAG_LOADED,this.onFragLoaded,this)},e._unregisterListeners=e.destroy=e.getAppendedFrag=e.getBufferedFrag=e.detectEvictedFragments=e.detectPartialFragments=function(t){var e=this,r=this.timeRanges,i=t.frag,a=t.part;if(r&&"initSegment"!==i.sn){var n=er(i),s=this.fragments[n];if(s){var o=!i.relurl;Object.keys(r).forEach((),s.loaded=null,Object.keys(s.range).length?(s.buffered=!0,s.body.endList&&(this.endListFragments[s.body.type]=s),tr(s)||this.removeParts(i.sn-1,i.type)):this.removeFragment(s.body)}}},e.removeParts=e.fragBuffered=e.getBufferedTimes=e.getPartialFragment=e.isEndListAppended=e.getState=e.isTimeBuffered=e.onFragLoaded=e.onBufferAppended=e.onFragBuffered=e.hasFragment=e.hasParts=e.removeFragmentsInRange=e.removeFragment=e.removeAllFragments=t}();r rr=Math.pow(2,17),ir=function(){ar e=t.prototype;return e.destroy=e.abort=e.load=function(t,e){var r=this,a=t.url;if(!a)return Promise.reject(new sr({type:E.NETWORK_ERROR,details:T.FRAG_LOAD_ERROR,fatal:!1,frag:t,error:new Error("Fragment does not have a "+(a?"part list":"url")),networkDetails:null}));this.abort();var n=this.config,s=n.fLoader,o=n.loader;return new Promise((function(l,u){if(r.loader&&r.loader.destroy(),t.gap)u(nr(t));else{var d=r.loader=t.loader=s?new s(n):new o(n),h=ar(t),f=xe(n.fragLoadPolicy.default),c={loadPolicy:f,timeout:f.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:"initSegment"===t.sn?1/0:rr};t.stats=d.stats,d.load(h,c,{onSuccess:onError:onAbort:onTimeout:onProgress:)}}))},e.loadPart=e.updateStatsFromPart=e.resetLoader=t}();r sr=f(Error)),or=),lr=),ur={length:0,start:function(){return 0},end:,dr=),hr=nction vr(t,e,r){e&&(function(t,e,r){if(t,r,e)){var i=function(t,e,r){var i=t.fragments,a=e.fragments;if(a.length&&i.length){var n=i,a[0].cc);if(n&&(!n||n.startPTS))return n;k.log("No frag in previous level to align on")}else k.log("No fragments to align")}(r.details,e);i&&p(i.start)&&(k.log("Adjusting PTS using last level due to CC increase within current level "+e.url),cr(i.start,e))}}(t,r,e),!r.alignedSliding&&e.details&&r,e.details),r.alignedSliding||!e.details||r.skippedSegments||Re(e.details,r))}var gr=),mr=),pr=),yr=),Er=Tr="STOPPED",Sr="IDLE",Lr="KEY_LOADING",Rr="FRAG_LOADING",br="FRAG_LOADING_WAITING_RETRY",Ar="PARSING",kr="PARSED",Dr="ENDED",_r="ERROR",xr="WAITING_LEVEL",wr=function(t){(e,t);var r=e.prototype;return r.doTick=function(){this.onTickEnd()},r.onTickEnd=function(){},r.startLoad=function(t){},r.stopLoad=r._streamEnded=r.getLevelDetails=r.onMediaAttached=r.onMediaDetaching=r.onMediaSeeking=r.onMediaEnded=r.onManifestLoaded=r.onHandlerDestroying=r.onHandlerDestroyed=r.loadFragment=r._loadFragForPlayback=r.clearTrackerIfNeeded=r.flushMainBuffer=r._loadInitSegment=function(t,e){var r=this;this._doFragLoad(t,e).then(().then(().then((function(i){if(!r.levels)throw new Error("init load aborted, missing levels");var a=t.stats;r.state=Sr,e.fragmentError=0,t.data=new Uint8Array(i.payload),a.parsing.start=a.buffering.start=self.performance.now(),a.parsing.end=a.buffering.end=self.performance.now(),r.tick()})).catch(()},r.fragContextChanged=r.fragBufferedComplete=r.seekToStartPos=function(){},r._handleFragmentLoadComplete=r._handleFragmentLoadProgress=r._doFragLoad=r.doFragPartsLoad=r.handleFragLoadError=r._handleTransmuxerFlush=r.getCurrentContext=r.bufferFragmentData=function(t,e,r,i){var a;if(t&&this.state===Ar){var n=t.data1,s=t.data2,o=n;if(n&&s&&(o=St(n,s)),null!=(a=o)&&a.length){var l={type:t.type,frag:e,part:r,chunkMeta:i,parent:e.type,data:o};this.hls.trigger(y.BUFFER_APPENDING,l),t.dropped&&t.independent&&!r&&this.flushBufferGap(e)}}},r.flushBufferGap=r.getFwdBufferInfo=r.getFwdBufferInfoAtPos=r.getMaxBufferLength=r.reduceMaxBufferLength=r.getAppendedFrag=r.getNextFragment=r.isLoopLoading=r.getNextFragmentLoopLoading=r.mapToInitFragWhenRequired=r.getNextPart=r.loadedEndOfParts=r.getInitialLiveFragment=function(t,e){var r=this.fragPrevious,i=null;if(r){if(t.hasProgramDateTime&&(this.log("Live playlist, switching playlist, load frag with same PDT: "+r.programDateTime),i=e,r.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){var a=r.sn+1;if(a>=t.startSN&&a<=t.endSN){var n=e[a-t.startSN];r.cc===n.cc&&(i=n,this.log("Live playlist, switching playlist, load frag with next SN: "+i.sn))}i||(i=e,r.cc),i&&this.log("Live playlist, switching playlist, load frag with same CC: "+i.sn))}}else{var s=this.hls.liveSyncPosition;null!==s&&(i=this.getFragmentAtPosition(s,this.bitrateTest?t.fragmentEnd:t.edge,t))}return i},r.getFragmentAtPosition=r.synchronizeToLiveEdge=r.alignPlaylists=r.waitForCdnTuneIn=r.setStartPosition=r.getLoadPosition=r.handleFragLoadAborted=r.resetFragmentLoading=r.onFragmentOrKeyLoadError=function(t,e){if(e.chunkMeta&&!e.frag){var r=this.getCurrentContext(e.chunkMeta);r&&(e.frag=r.frag)}var i=e.frag;if(i&&i.type===t&&this.levels)if(this.fragContextChanged(i)){var a;this.warn("Frag load error must match current frag to retry "+i.url+" > "+(null==(a=this.fragCurrent)?void 0:a.url))}else{var n=e.details===T.FRAG_GAP;n&&this.fragmentTracker.fragBuffered(i,!0);var s=e.errorAction,o=s||{},l=o.action,u=o.retryCount,d=void 0===u?0:u,h=o.retryConfig;if(s&&l===Ge&&h){this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition);var f=_e(h,d);this.warn("Fragment "+i.sn+" of "+t+" "+i.level+" errored with "+e.details+", retrying loading "+(d+1)+"/"+h.maxNumRetry+" in "+f+"ms"),s.resolved=!0,this.retryDate=self.performance.now()+f,this.state=br}else if(h&&s){if(this.resetFragmentErrors(t),!(d<h.maxNumRetry))return void k.warn(e.details+" reached or exceeded max retry ("+d+")");n||l===Ue||(s.resolved=!0)}else this.state=_r;this.tickImmediate()}},r.reduceLengthAndFlushBuffer=r.resetFragmentErrors=r.afterBufferFlushed=r.resetLoadingState=r.resetStartWhenNotLoaded=r.resetWhenMissingContext=function(t){this.warn("The loading context changed while buffering fragment "+t.sn+" of level "+t.level+". This chunk will not be buffered."),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(t.level),this.resetLoadingState()},r.removeUnbufferedFrags=r.updateLevelTiming=function(t,e,r,i){var a,n=this,s=r.details;if(s){if(Object.keys(t.elementaryStreams).reduce((,!1))r.fragmentError=0;else if(null===(null==(a=this.transmuxer)?void 0:a.error)){var o=new Error("Found no media in fragment "+t.sn+" of level "+r.id+" resetting transmuxer to fallback to playlist timing");if(this.warn(o.message),this.hls.trigger(y.ERROR,{type:E.MEDIA_ERROR,details:T.FRAG_PARSING_ERROR,fatal:!1,error:o,frag:t,reason:"Found no media in msn "+t.sn+' of level "'+r.url+'"'}),!this.hls)return;this.resetTransmuxer()}this.state=kr,this.hls.trigger(y.FRAG_PARSED,{frag:t,part:e})}else this.warn("level.details undefined")},r.resetTransmuxer=function(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)},r.recoverWorkerError=n(e,[{key:"state",get:function(){return this._state},set:]),e}(lr);r Pr=),Fr=ction Br(t,e){return e+1<t.length&&Or(t,e)}Vr=Pr),Wr=/\/emsg[-/]ID3/i,Yr=),jr=null,qr=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],zr=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Xr=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Qr=[0,1,1,4];i=),ii=),ai=188,ni=function(){.probe=t.syncOffset=t.createTrack=var e=t.prototype;return e.resetInitSegment=e.resetTimeStamp=function(){},e.resetContiguity=e.demux=function(e,r,i,a){var n;void 0===i&&(i=!1),void 0===a&&(a=!1),i||(this.sampleAes=null);var s=this._avcTrack,o=this._audioTrack,l=this._id3Track,u=this._txtTrack,d=s.pid,h=s.pesData,f=o.pid,c=l.pid,v=o.pesData,g=l.pesData,m=null,p=this.pmtParsed,S=this._pmtId,L=e.length;if(this.remainderData&&(L=(e=St(this.remainderData,e)).length,this.remainderData=null),L<ai&&!a)return this.remainderData=e,{audioTrack:o,videoTrack:s,id3Track:l,textTrack:u};var R=Math.max(0,t.syncOffset(e));(L-=(L-R)%ai)<e.byteLength&&!a&&(this.remainderData=new Uint8Array(e.buffer,L,e.buffer.byteLength-L));for(var b=0,A=R;A<L;A+=ai)if(71===e[A]){var D=!!(64&e[A+1]),_=oi(e,A),x=void 0;if((48&e[A+3])>>4>1){if((x=A+5+e[A+4])===A+ai)continue}else x=A+4;switch(_){case d:D&&(h&&(n=di(h))&&this.parseAVCPES(s,u,n,!1),h={data:[],size:0}),h&&(h.data.push(e.subarray(x,A+ai)),h.size+=A+ai-x);break;case f:if(D){if(v&&(n=di(v)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,n);break;case"mp3":this.parseMPEGPES(o,n);break;case"ac3":this.parseAC3PES(n)}v={data:[],size:0}}v&&(v.data.push(e.subarray(x,A+ai)),v.size+=A+ai-x);break;case c:D&&(g&&(n=di(g))&&this.parseID3PES(l,n),g={data:[],size:0}),g&&(g.data.push(e.subarray(x,A+ai)),g.size+=A+ai-x);break;case 0:D&&(x+=e[x]+1),S=this._pmtId=li(e,x);break;case S:D&&(x+=e[x]+1);var w=ui(e,x,this.typeSupported,i);(d=w.avc)>0&&(s.pid=d),(f=w.audio)>0&&(o.pid=f,o.segmentCodec=w.segmentCodec),(c=w.id3)>0&&(l.pid=c),null===m||p||(k.warn("MPEG-TS PMT found at "+A+" after unknown PID '"+m+"'. Backtracking to sync byte @"+R+" to parse all TS packets."),m=null,A=R-188),p=this.pmtParsed=!0;break;case 17:case 8191:break;default:m=_}}else b++;if(b>0){var C=new Error("Found "+b+" TS packet/s that do not start with 0x47");this.observer.emit(y.ERROR,y.ERROR,{type:E.MEDIA_ERROR,details:T.FRAG_PARSING_ERROR,fatal:!1,error:C,reason:C.message})}s.pesData=h,o.pesData=v,l.pesData=g;var I={audioTrack:o,videoTrack:s,id3Track:l,textTrack:u};return a&&this.extractRemainingSamples(I),I},e.flush=e.extractRemainingSamples=function(t){var e,r=t.audioTrack,i=t.videoTrack,a=t.id3Track,n=t.textTrack,s=i.pesData,o=r.pesData,l=a.pesData;if(s&&(e=di(s))?(this.parseAVCPES(i,n,e,!0),i.pesData=null):i.pesData=s,o&&(e=di(o))){switch(r.segmentCodec){case"aac":this.parseAACPES(r,e);break;case"mp3":this.parseMPEGPES(r,e);break;case"ac3":this.parseAC3PES(e)}r.pesData=null}else null!=o&&o.size&&k.log("last AAC PES packet truncated,might overlap between fragments"),r.pesData=o;l&&(e=di(l))?(this.parseID3PES(a,e),a.pesData=null):a.pesData=l},e.demuxSampleAes=e.decrypt=e.destroy=function(){this._duration=0},e.parseAVCPES=function(t,e,r,i){var a,n=this,s=this.parseAVCNALu(t,r.data),o=this.avcSample,l=!1;r.data=null,o&&s.length&&!t.audFound&&(hi(o,t),o=this.avcSample=si(!1,r.pts,r.dts,"")),s.forEach((function(i){switch(i.type){case 1:a=!0,o||(o=n.avcSample=si(!0,r.pts,r.dts,"")),o.frame=!0;var s=i.data;if(l&&s.length>4){var u=new ri(s).readSliceType();2!==u&&4!==u&&7!==u&&9!==u||(o.key=!0)}break;case 5:a=!0,o||(o=n.avcSample=si(!0,r.pts,r.dts,"")),o.key=!0,o.frame=!0;break;case 6:a=!0,bt(i.data,1,r.pts,e.samples);break;case 7:if(a=!0,l=!0,!t.sps){var d=i.data,h=new ri(d).readSPS();t.width=h.width,t.height=h.height,t.pixelRatio=h.pixelRatio,t.sps=[d],t.duration=n._duration;for(var f=d.subarray(1,4),c="avc1.",v=0;v<3;v++){var g=f[v].toString(16);g.length<2&&(g="0"+g),c+=g}t.codec=c}break;case 8:a=!0,t.pps||(t.pps=[i.data]);break;case 9:a=!1,t.audFound=!0,o&&hi(o,t),o=n.avcSample=si(!1,r.pts,r.dts,"");break;case 12:a=!0;break;default:a=!1,o&&(o.debug+="unknown NAL "+i.type+" ")}o&&a&&o.units.push(i)})),i&&o&&(hi(o,t),this.avcSample=null)},e.getLastNalUnit=e.parseAVCNALu=e.parseAACPES=e.parseMPEGPES=e.parseAC3PES=e.onAC3Frame=function(t,e,r,i,a,n){var s=n+a*(1536/e*1e3),o=this._audioTrack;o.config=i,o.channelCount=r,o.samplerate=e,o.duration=this._duration,o.samples.push({unit:t,pts:s})},e.parseAC3=function(t,e,r,i,a){if(e+8>r)return-1;if(11!==t[e]||119!==t[e+1])return-1;var n=t[e+4]>>6;if(n>=3)return-1;var s=[48e3,44100,32e3][n],o=63&t[e+4],l=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*o+n];if(e+l>r)return-1;var u=t[e+6]>>5,d=0;2===u?d+=2:(1&u&&1!==u&&(d+=2),4&u&&(d+=2));var h=(t[e+6]<<8|t[e+7])>>12-d&1,f=[2,1,2,3,3,4,4,5][u]+h,c=t[e+5]>>3,v=7&t[e+5],g=new Uint8Array([n<<6|c<<1|v>>2,(3&v)<<6|u<<3|h<<2|o>>4,o<<4&224]);return this.onAC3Frame(t.subarray(e,e+l),s,f,g,i,a),l},e.parseID3PES=t}();ction ui(t,e,r,i){var a={audio:-1,avc:-1,id3:-1,segmentCodec:"aac"},n=e+3+((15&t[e+1])<<8|t[e+2])-4;for(e+=12+((15&t[e+10])<<8|t[e+11]);e<n;){var s=oi(t,e);switch(t[e]){case 207:if(!i){k.log("ADTS AAC with AES-128-CBC frame encryption found in unencrypted stream");break}case 15:-1===a.audio&&(a.audio=s);break;case 21:-1===a.id3&&(a.id3=s);break;case 219:if(!i){k.log("H.264 with AES-128-CBC slice encryption found in unencrypted stream");break}case 27:-1===a.avc&&(a.avc=s);break;case 3:case 4:!0!==r.mpeg&&!0!==r.mp3?k.log("MPEG audio found, not supported in this browser"):-1===a.audio&&(a.audio=s,a.segmentCodec="mp3");break;case 129:!0!==r.ac3?k.log("AC-3 audio found, not supported in this browser for now"):-1===a.audio&&(a.audio=s,a.segmentCodec="ac3");break;case 36:k.warn("Unsupported HEVC stream type found")}e+=5+((15&t[e+3])<<8|t[e+4])}return a}r fi=Pr),ci=),vi=Math.pow(2,32)-1,gi=function(){function t(){}return t.init=t.box=t.hdlr=t.mdat=t.mdhd=t.mdia=t.mfhd=t.minf=t.moof=t.moov=t.mvex=t.mvhd=t.sdtp=t.stbl=t.avc1=t.esds=t.audioStsd=t.mp4a=t.mp3=t.ac3=t.stsd=t.tkhd=t.traf=t.trak=t.trex=t.trun=t.initSegment=t}();i.types=void 0,gi.HDLR_TYPES=void 0,gi.STTS=void 0,gi.STSC=void 0,gi.STCO=void 0,gi.STSZ=void 0,gi.VMHD=void 0,gi.SMHD=void 0,gi.STSD=void 0,gi.FTYP=void 0,gi.DINF=void 0;var pi=null,yi=null,Ei=function(){ar e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=e.resetNextTimestamp=e.resetInitSegment=e.getVideoStartPts=e.remux=e.generateIS=function(t,e,r,i){var a,n,s,o=t.samples,l=e.samples,u=this.typeSupported,d={},h=this._initPTS,f=!h||i,c="audio/mp4";if(f&&(a=n=1/0),t.config&&o.length){switch(t.timescale=t.samplerate,t.segmentCodec){case"mp3":u.mpeg?(c="audio/mpeg",t.codec=""):u.mp3&&(t.codec="mp3");break;case"ac3":t.codec="ac-3"}d.audio={id:"audio",container:c,codec:t.codec,initSegment:"mp3"===t.segmentCodec&&u.mpeg?new Uint8Array(0):gi.initSegment([t]),metadata:{channelCount:t.channelCount}},f&&(s=t.inputTimeScale,h&&s===h.timescale?f=!1:a=n=o[0].pts-Math.round(s*r))}if(e.sps&&e.pps&&l.length&&(e.timescale=e.inputTimeScale,d.video={id:"main",container:"video/mp4",codec:e.codec,initSegment:gi.initSegment([e]),metadata:{width:e.width,height:e.height}},f))if(s=e.inputTimeScale,h&&s===h.timescale)f=!1;else{var v=this.getVideoStartPts(l),g=Math.round(s*r);n=Math.min(n,Ti(l[0].dts,v)-g),a=Math.min(a,v-g)}if(Object.keys(d).length)return this.ISGenerated=!0,f?(this._initPTS={baseTime:a,timescale:s},this._initDTS={baseTime:n,timescale:s}):a=s=void 0,{tracks:d,initPTS:a,timescale:s}},e.remuxVideo=e.getSamplesPerFrame=e.remuxAudio=function(t,e,r,i,a){var n=t.inputTimeScale,s=n/(t.samplerate?t.samplerate:n),l=this.getSamplesPerFrame(t),u=l*s,d=this._initPTS,h="mp3"===t.segmentCodec&&this.typeSupported.mpeg,f=[],c=void 0!==a,v=t.samples,g=h?0:8,m=this.nextAudioPts||-1,p=e*n,S=d.baseTime*n/d.timescale;if(this.isAudioContiguous=r=r||v.length&&m>0&&(i&&Math.abs(p-m)<9e3||Math.abs(Ti(v[0].pts-S,p)-m)<20*u),v.forEach((),!r||m<0){if(v=v.filter((),!v.length)return;m=0===a?0:i&&!c?Math.max(0,p):v[0].pts}if("aac"===t.segmentCodec)for(var L=this.config.maxAudioFramesDrift,R=0,b=m;R<v.length;R++){var A=v[R],D=A.pts,_=D-b,x=Math.abs(1e3*_/n);if(_<=-L*u&&c)0===R&&(k.warn("Audio frame @ "+(D/n).toFixed(3)+"s overlaps nextAudioPts by "+Math.round(1e3*_/n)+" ms."),this.nextAudioPts=m=b=D);else if(_>=L*u&&x<1e4&&c){var w=Math.round(_/u);(b=D-w*u)<0&&(w--,b+=u),0===R&&(this.nextAudioPts=m=b),k.warn("[mp4-remuxer]: Injecting "+w+" audio frame @ "+(b/n).toFixed(3)+"s due to "+Math.round(1e3*_/n)+" ms gap.");for(var C=0;C<w;C++){var I=Math.max(b,0),P=ci.getSilentFrame(t.manifestCodec||t.codec,t.channelCount);P||(k.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),P=A.unit.subarray()),v.splice(R,0,{unit:P,pts:I}),b+=u,R++}}A.pts=b,b+=u}for(var F,O=null,M=null,N=0,B=v.length;B--;)N+=v[B].unit.byteLength;for(var U=0,G=v.length;U<G;U++){var H=v[U],K=H.unit,V=H.pts;if(null!==M)f[U-1].duration=Math.round((V-M)/s);else{if(r&&"aac"===t.segmentCodec&&(V=m),O=V,!(N>0))return;N+=g;try{F=new Uint8Array(N)}catch(t){return void this.observer.emit(y.ERROR,y.ERROR,{type:E.MUX_ERROR,details:T.REMUX_ALLOC_ERROR,fatal:!1,error:t,bytes:N,reason:"fail allocating audio mdat "+N})}h||(new DataView(F.buffer).setUint32(0,N),F.set(gi.types.mdat,4))}F.set(K,g);var W=K.byteLength;g+=W,f.push(new bi(!0,l,W,0)),M=V}var Y=f.length;if(Y){var j=f[f.length-1];this.nextAudioPts=m=M+s*j.duration;var q=h?new Uint8Array(0):gi.moof(t.sequenceNumber++,O/s,o({},t,{samples:f}));t.samples=[];var z=O/n,X=m/n,Q={data1:q,data2:F,startPTS:z,endPTS:X,startDTS:z,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:Y};return this.isAudioContiguous=!0,Q}},e.remuxEmptyAudio=t}();nction Li(t,e,r){var i=t.samples.length;if(i){for(var a=t.inputTimeScale,n=0;n<i;n++){var s=t.samples[n];s.pts=Ti(s.pts-9e4*r.baseTime/r.timescale,e*a)/a}t.samples.sort(();var o=t.samples;return t.samples=[],{samples:o}}}var Ri,bi=Ai=ki=function(){ar e=t.prototype;return e.destroy=function(){},e.resetTimeStamp=e.resetNextTimestamp=e.resetInitSegment=e.generateInitSegment=function(t){var e=this.audioCodec,r=this.videoCodec;if(null==t||!t.byteLength)return this.initTracks=void 0,void(this.initData=void 0);var i=this.initData=gt(t);i.audio&&(e=Di(i.audio,P)),i.video&&(r=Di(i.video,F));var a={};i.audio&&i.video?a.audiovideo={container:"video/mp4",codec:e+","+r,initSegment:t,id:"main"}:i.audio?a.audio={container:"audio/mp4",codec:e,initSegment:t,id:"audio"}:i.video?a.video={container:"video/mp4",codec:r,initSegment:t,id:"main"}:k.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=a},e.remux=t}();function Di(t,e){var r=null==t?void 0:t.codec;return r&&r.length>4?r:e===P?"ec-3"===r||"ac-3"===r||"alac"===r?r:"fLaC"===r||"Opus"===r?Ft(r):(k.warn('Unhandled audio codec "'+r+'" or audio object type'),"mp4a.40.5"):(k.warn('Unhandled video codec "'+r+'"'),"hvc1"===r||"hev1"===r?"hvc1.1.6.L120.90":"av01"===r?"av01.0.04M.08":"avc1.42e01e")}try{Ri=self.performance.now.bind(self.performance)}catch(t){k.debug("Unable to use Performance API on this environment"),Ri="undefined"!=typeof self&&self.Date.now}var _i=[{demux:Yr,remux:ki},{demux:ni,remux:Ei},{demux:Vr,remux:Ei},{demux:fi,remux:Ei}],xi=),wi=ar Ii=Pi=Fi={exports:{}};!Fi);var Oi=v(Fi.exports);d 0!==e&&e&&self);var Ui=Dt()||{isTypeSupported:,Gi=function(){function e(e,r,i,a){var n=this;this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;var s=e.config;this.hls=e,this.id=r,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=i,this.onFlush=a;var o=this.observer=new Oi,this.observer.on(y.FRAG_DECRYPTED,o),this.observer.on(y.ERROR,o);var l,u,d,h,f={mp4:Ui.isTypeSupported("video/mp4"),mpeg:Ui.isTypeSupported("audio/mpeg"),mp3:Ui.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:Ui.isTypeSupported('audio/mp4; codecs="ac-3"')},c=navigator.vendor;if(!this.useWorker||"undefined"==typeof Worker||(s.workerPath,0))this.transmuxer=new xi(this.observer,f,s,c,r);else try{s.workerPath?(k.log("loading Web Worker "+s.workerPath+' for "'+r+'"'),this.workerContext=(d=s.workerPath,h=new self.URL(d,self.location.href).href,{worker:new self.Worker(h),scriptURL:h})):(k.log('injecting Web Worker for "'+r+'"'),this.workerContext=(l=new self.Blob(["var exports={};var module={exports:exports};function define(f){f()};define.amd=true;("+t.toString()+")(true);"],{type:"text/javascript"}),u=self.URL.createObjectURL(l),{worker:new self.Worker(u),objectURL:u})),this.onwmsg=var v=this.workerContext.worker;v.addEventListener("message",this.onwmsg),v.onerror=v.postMessage({cmd:"init",typeSupported:f,vendor:c,id:r,config:JSON.stringify(s)})}catch(t){k.warn('Error setting up "'+r+'" Web Worker, fallback to inline',t),this.resetWorker(),this.error=null,this.transmuxer=new xi(this.observer,f,s,c,r)}}var r=e.prototype;return r.resetWorker=r.destroy=r.push=r.flush=r.transmuxerError=r.handleFlushResult=r.onWorkerMessage=r.configureTransmuxer=r.handleTransmuxComplete=e}(),Hi=function(){ar e=t.prototype;return e.destroy=e.poll=function(t,e){var r=this.config,i=this.media,a=this.stalled;if(null!==i){var n=i.currentTime,s=i.seeking,o=this.seeking&&!s,l=!this.seeking&&s;if(this.seeking=s,n===t){if(l||o)this.stalled=null;else if(!(i.paused&&!s||i.ended||0===i.playbackRate)&&dr.getBuffered(i).length){var u=dr.bufferInfo(i,n,0),d=u.len>0,h=u.nextStart||0;if(d||h){if(s){var f=u.len>2,c=!h||e&&e.start<=n||h-n>2&&!this.fragmentTracker.getPartialFragment(n);if(f||c)return;this.moved=!1}if(!this.moved&&null!==this.stalled){var v,g=Math.max(h,u.start||0)-n,m=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,p=(null==m||null==(v=m.details)?void 0:v.live)?2*m.details.targetduration:2,y=this.fragmentTracker.getPartialFragment(n);if(g>0&&(g<=p||y))return void(i.paused||this._trySkipBufferHole(y))}var E=self.performance.now();if(null!==a){var T=E-a;if(s||!(T>=250)||(this._reportStall(u),this.media)){var S=dr.bufferInfo(i,n,r.maxBufferHole);this._tryFixBufferStall(S,T)}}else this.stalled=E}}}else if(this.moved=!0,null!==a){if(this.stallReported){var L=self.performance.now()-a;k.warn("playback not stuck anymore @"+n+", after "+Math.round(L)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}}},e._tryFixBufferStall=e._reportStall=e._trySkipBufferHole=e._tryNudgeBuffer=t}(),Ki=function(t){(e,t);var r=e.prototype;return r._registerListeners=r._unregisterListeners=r.onHandlerDestroying=r.startLoad=r.stopLoad=r.doTick=r.onTickEnd=r.doTickIdle=r.loadFragment=r.getBufferedFrag=r.followingBufferedFrag=r.immediateLevelSwitch=r.nextLevelSwitch=r.abortCurrentFrag=r.flushMainBuffer=r.onMediaAttached=r.onMediaDetaching=r.onMediaPlaying=r.onMediaSeeked=r.onManifestLoading=r.onManifestParsed=r.onLevelLoading=r.onLevelLoaded=r._handleFragmentLoadProgress=r.onAudioTrackSwitching=r.onAudioTrackSwitched=r.onBufferCreated=r.onFragBuffered=r.onError=r.checkBuffer=r.onFragLoadEmergencyAborted=r.onBufferFlushed=function(t,e){var r=e.type;if(r!==P||this.audioOnly&&!this.altAudio){var i=(r===F?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(i,r,Zt),this.tick()}},r.onLevelsUpdated=r.swapAudioCodec=r.seekToStartPos=r._getAudioCodec=r._loadBitrateTestFrag=r._handleTransmuxComplete=function(t){var e,r="main",i=this.hls,a=t.remuxResult,n=t.chunkMeta,s=this.getCurrentContext(n);if(s){var o=s.frag,l=s.part,u=s.level,d=a.video,h=a.text,f=a.id3,c=a.initSegment,v=u.details,g=this.altAudio?void 0:a.audio;if(this.fragContextChanged(o))this.fragmentTracker.removeFragment(o);else{if(this.state=Ar,c){if(null!=c&&c.tracks){var m=o.initSegment||o;this._bufferInitSegment(u,c.tracks,m,n),i.trigger(y.FRAG_PARSING_INIT_SEGMENT,{frag:m,id:r,tracks:c.tracks})}var E=c.initPTS,T=c.timescale;p(E)&&(this.initPTS[o.cc]={baseTime:E,timescale:T},i.trigger(y.INIT_PTS_FOUND,{frag:o,id:r,initPTS:E,timescale:T}))}if(d&&!1!==a.independent){if(v){var S=d.startPTS,L=d.endPTS,R=d.startDTS,b=d.endDTS;if(l)l.elementaryStreams[d.type]={startPTS:S,endPTS:L,startDTS:R,endDTS:b};else if(d.firstKeyFrame&&d.independent&&1===n.id&&(this.couldBacktrack=!0),d.dropped&&d.independent){var A=this.getMainFwdBufferInfo();if((A?A.end:this.getLoadPosition())+this.config.maxBufferHole<(d.firstKeyFramePTS?d.firstKeyFramePTS:S)-this.config.maxBufferHole)return void this.backtrack(o);o.setElementaryStreamInfo(d.type,o.start,L,o.start,b,!0)}o.setElementaryStreamInfo(d.type,S,L,R,b),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(d,o,l,n)}}else if(!1===a.independent)return void this.backtrack(o);if(g){var k=g.startPTS,D=g.endPTS,_=g.startDTS,x=g.endDTS;l&&(l.elementaryStreams[P]={startPTS:k,endPTS:D,startDTS:_,endDTS:x}),o.setElementaryStreamInfo(P,k,D,_,x),this.bufferFragmentData(g,o,l,n)}if(v&&null!=f&&null!=(e=f.samples)&&e.length){var w={id:r,frag:o,details:v,samples:f.samples};i.trigger(y.FRAG_PARSING_METADATA,w)}if(v&&h){var C={id:r,frag:o,details:v,samples:h.samples};i.trigger(y.FRAG_PARSING_USERDATA,C)}}}else this.resetWhenMissingContext(n)},r._bufferInitSegment=function(t,e,r,i){var a=this;if(this.state===Ar){this.audioOnly=!!e.audio&&!e.video,this.altAudio&&!this.audioOnly&&delete e.audio;var n=e.audio,s=e.video,o=e.audiovideo;if(n){var l=t.audioCodec,u=navigator.userAgent.toLowerCase();this.audioCodecSwitch&&(l&&(l=-1!==l.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),1!==n.metadata.channelCount&&-1===u.indexOf("firefox")&&(l="mp4a.40.5")),l&&-1!==l.indexOf("mp4a.40.5")&&-1!==u.indexOf("android")&&"audio/mpeg"!==n.container&&(l="mp4a.40.2",this.log("Android: force audio codec to "+l)),t.audioCodec&&t.audioCodec!==l&&this.log('Swapping manifest audio codec "'+t.audioCodec+'" for "'+l+'"'),n.levelCodec=l,n.id="main",this.log("Init audio buffer, container:"+n.container+", codecs[selected/level/parsed]=["+(l||"")+"/"+(t.audioCodec||"")+"/"+n.codec+"]")}s&&(s.levelCodec=t.videoCodec,s.id="main",this.log("Init video buffer, container:"+s.container+", codecs[level/parsed]=["+(t.videoCodec||"")+"/"+s.codec+"]")),o&&this.log("Init audiovideo buffer, container:"+o.container+", codecs[level/parsed]=["+(t.attrs.CODECS||"")+"/"+o.codec+"]"),this.hls.trigger(y.BUFFER_CODECS,e),Object.keys(e).forEach((),this.tickImmediate()}},r.getMainFwdBufferInfo=r.backtrack=r.checkFragmentChanged=n(e,[{key:"nextLevel",get:function(){var t=this.nextBufferedFrag;return t?t.level:-1}},{key:"currentFrag",get:,{key:"currentProgramDateTime",get:,{key:"currentLevel",get:,{key:"nextBufferedFrag",get:,{key:"forceStartLoad",get:function(){return this._forceStartLoad}}]),e}(wr),Vi=),Wi=),Yi=),ji=function(){ar e=t.prototype;return e.append=e.insertAbort=e.appendBlocker=e.executeNext=function(t){var e=this.queues[t];if(e.length){var r=e[0];try{r.execute()}catch(e){k.warn('[buffer-operation-queue]: Exception executing "'+t+'" SourceBuffer operation: '+e),r.onError(e);var i=this.buffers[t];null!=i&&i.updating||this.shiftAndExecuteNext(t)}}},e.shiftAndExecuteNext=e.current=t}(),qi=Dt(),zi=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,Xi=function(){function t(t){var e=this;this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendError=0,this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onMediaSourceOpen=this._onMediaSourceClose=function(){e.log("Media source closed")},this._onMediaSourceEnded=this._onMediaEmptied=this.hls=t;var r="[buffer-controller]";this.log=k.log.bind(k,r),this.warn=k.warn.bind(k,r),this.error=k.error.bind(k,r),this._initSourceBuffer(),this.registerListeners()}var e=t.prototype;return e.hasSourceTypes=e.destroy=e.registerListeners=function(){var t=this.hls;t.on(y.MEDIA_ATTACHING,this.onMediaAttaching,this),t.on(y.MEDIA_DETACHING,this.onMediaDetaching,this),t.on(y.MANIFEST_LOADING,this.onManifestLoading,this),t.on(y.MANIFEST_PARSED,this.onManifestParsed,this),t.on(y.BUFFER_RESET,this.onBufferReset,this),t.on(y.BUFFER_APPENDING,this.onBufferAppending,this),t.on(y.BUFFER_CODECS,this.onBufferCodecs,this),t.on(y.BUFFER_EOS,this.onBufferEos,this),t.on(y.BUFFER_FLUSHING,this.onBufferFlushing,this),t.on(y.LEVEL_UPDATED,this.onLevelUpdated,this),t.on(y.FRAG_PARSED,this.onFragParsed,this),t.on(y.FRAG_CHANGED,this.onFragChanged,this)},e.unregisterListeners=e._initSourceBuffer=e.onManifestLoading=e.onManifestParsed=function(t,e){var r=2;e.audio&&!e.video||e.altAudio,r=1,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=r,this.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},e.onMediaAttaching=e.onMediaDetaching=function(){var t=this.media,e=this.mediaSource,r=this._objectUrl;if(e){if(this.log("media source detaching"),"open"===e.readyState)try{e.endOfStream()}catch(t){this.warn("onMediaDetaching: "+t.message+" while calling endOfStream")}this.onBufferReset(),e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),t&&(t.removeEventListener("emptied",this._onMediaEmptied),r&&self.URL.revokeObjectURL(r),t.src===r?(t.removeAttribute("src"),t.load()):this.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(y.MEDIA_DETACHED,void 0)},e.onBufferReset=e.onBufferCodecs=function(t,e){var r=this,i=this.getSourceBufferTypes().length;Object.keys(e).forEach((function(t){if(i){var a=r.tracks[t];if(a&&"function"==typeof a.buffer.changeType){var n=e[t],s=n.id,o=n.codec,l=n.levelCodec,u=n.container,d=n.metadata,h=(a.levelCodec||a.codec).replace(zi,"$1"),f=(l||o).replace(zi,"$1");if(h!==f){var c=l||o;"audio"===t.slice(0,5)&&(c=Ft(c));var v=u+";codecs="+c;r.appendChangeType(t,v),r.log("switching codec "+h+" to "+f),r.tracks[t]={buffer:a.buffer,codec:o,container:u,levelCodec:l,metadata:d,id:s}}}}else r.pendingTracks[t]=e[t]})),i||(this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},e.appendChangeType=e.onBufferAppending=function(t,e){var r=this,i=this.hls,a=this.operationQueue,n=this.tracks,s=e.data,o=e.type,l=e.frag,u=e.part,d=e.chunkMeta,h=d.buffering[o],f=self.performance.now();h.start=f;var c=l.stats.buffering,v=u?u.stats.buffering:null;0===c.start&&(c.start=f),v&&0===v.start&&(v.start=f);var g=n.audio,m=!1;"audio"===o&&"audio/mpeg"===(null==g?void 0:g.container)&&(m=!this.lastMpegAudioChunk||1===d.id||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);var p=l.start,S={execute:onStart:function(){},onComplete:onError:function(t){var e={type:E.MEDIA_ERROR,parent:l.type,details:T.BUFFER_APPEND_ERROR,frag:l,part:u,chunkMeta:d,error:t,err:t,fatal:!1};t.code===DOMException.QUOTA_EXCEEDED_ERR?e.details=T.BUFFER_FULL_ERROR:(r.appendError++,e.details=T.BUFFER_APPEND_ERROR,r.appendError>i.config.appendErrorMaxRetry&&(r.error("Failed "+i.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),e.fatal=!0)),i.trigger(y.ERROR,e)}};a.append(S,o,!!this.pendingTracks[o])},e.onBufferFlushing=e.onFragParsed=function(t,e){var r=this,i=e.frag,a=e.part,n=[],s=a?a.elementaryStreams:i.elementaryStreams;s[O]?n.push("audiovideo"):(s[P]&&n.push("audio"),s[F]&&n.push("video")),0===n.length&&this.warn("Fragments must have at least one ElementaryStreamType set. type: "+i.type+" level: "+i.level+" sn: "+i.sn),this.blockBuffers((,n)},e.onFragChanged=function(t,e){this.flushBackBuffer()},e.onBufferEos=function(t,e){var r=this;this.getSourceBufferTypes().reduce((function(t,i){var a=r.sourceBuffer[i];return!a||e.type&&e.type!==i||(a.ending=!0,a.ended||(a.ended=!0,r.log(i+" sourceBuffer now EOS"))),t&&!(a&&!a.ended)}),!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(())},e.onLevelUpdated=e.flushBackBuffer=function(){var t=this,e=this.hls,r=this.details,i=this.media,a=this.sourceBuffer;if(i&&null!==r){var n=this.getSourceBufferTypes();if(n.length){var s=r.live&&null!==e.config.liveBackBufferLength?e.config.liveBackBufferLength:e.config.backBufferLength;if(p(s)&&!(s<0)){var o=i.currentTime,l=r.levelTargetDuration,u=Math.max(s,l),d=Math.floor(o/l)*l-u;n.forEach(()}}}},e.updateMediaElementDuration=function(){if(this.details&&this.media&&this.mediaSource&&"open"===this.mediaSource.readyState){var t=this.details,e=this.hls,r=this.media,i=this.mediaSource,a=t.fragments[0].start+t.totalduration,n=r.duration,s=p(i.duration)?i.duration:0;t.live&&e.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(t)):(a>s&&a>n||!p(n))&&(this.log("Updating Media Source duration to "+a.toFixed(3)),i.duration=a)}},e.updateSeekableRange=function(t){var e=this.mediaSource,r=t.fragments;if(r.length&&t.live&&null!=e&&e.setLiveSeekableRange){var i=Math.max(0,r[0].start),a=Math.max(i,i+t.totalduration);this.log("Media Source duration is set to "+e.duration+". Setting seekable range to "+i+"-"+a+"."),e.setLiveSeekableRange(i,a)}},e.checkPendingTracks=e.createSourceBuffers=function(t){var e=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var i in t)if(!e[i]){var a=t[i];if(!a)throw Error("source buffer exists for track "+i+", however track does not");var n=a.levelCodec||a.codec;n&&"audio"===i.slice(0,5)&&(n=Ft(n));var s=a.container+";codecs="+n;this.log("creating sourceBuffer("+s+")");try{var o=e[i]=r.addSourceBuffer(s),l=i;this.addBufferListener(l,"updatestart",this._onSBUpdateStart),this.addBufferListener(l,"updateend",this._onSBUpdateEnd),this.addBufferListener(l,"error",this._onSBUpdateError),this.tracks[i]={buffer:o,codec:n,container:a.container,levelCodec:a.levelCodec,metadata:a.metadata,id:a.id}}catch(t){this.error("error while trying to add sourceBuffer: "+t.message),this.hls.trigger(y.ERROR,{type:E.MEDIA_ERROR,details:T.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:t,mimeType:s})}}},e._onSBUpdateStart=e._onSBUpdateEnd=e._onSBUpdateError=function(t,e){var r=new Error(t+" SourceBuffer error");this.error(""+r,e),this.hls.trigger(y.ERROR,{type:E.MEDIA_ERROR,details:T.BUFFER_APPENDING_ERROR,error:r,fatal:!1});var i=this.operationQueue.current(t);i&&i.onError(e)},e.removeExecutor=function(t,e,r){var i=this.media,a=this.mediaSource,n=this.operationQueue,s=this.sourceBuffer[t];if(!i||!a||!s)return this.warn("Attempting to remove from the "+t+" SourceBuffer, but it does not exist"),void n.shiftAndExecuteNext(t);var o=p(i.duration)?i.duration:1/0,l=p(a.duration)?a.duration:1/0,u=Math.max(0,e),d=Math.min(r,o,l);d>u&&!s.ending?(s.ended=!1,this.log("Removing ["+u+","+d+"] from the "+t+" SourceBuffer"),s.remove(u,d)):n.shiftAndExecuteNext(t)},e.appendExecutor=function(t,e){var r=this.sourceBuffer[e];if(r)r.ended=!1,r.appendBuffer(t);else if(!this.pendingTracks[e])throw new Error("Attempting to append to the "+e+" SourceBuffer, but it does not exist")},e.blockBuffers=function(t,e){var r=this;if(void 0===e&&(e=this.getSourceBufferTypes()),!e.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),void Promise.resolve().then(t);var i=this.operationQueue,a=e.map((function(t){return i.appendBlocker(t)}));Promise.all(a).then(()},e.getSourceBufferTypes=e.addBufferListener=e.removeBufferListeners=t}(),Qi=),$i=),Zi=/^age:\s*[\d.]+\s*$/im,Ji=function(){ar e=t.prototype;return e.destroy=e.abortInternal=e.abort=function(){var t;this.abortInternal(),null!=(t=this.callbacks)&&t.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)},e.load=e.loadInternal=function(){var t=this,e=this.config,r=this.context;if(e){var i=this.loader=new self.XMLHttpRequest,a=this.stats;a.loading.first=0,a.loaded=0;var n=this.xhrSetup;n?Promise.resolve().then(().catch(().then(().catch(():this.openAndSendXhr(i,r,e)}},e.openAndSendXhr=e.readystatechange=e.loadtimeout=e.retry=e.loadprogress=e.getCacheAge=e.getResponseHeader=t}(),ta=),ea=/(\d+)-(\d+)\/(\d+)/,ra=);ar aa=f(Error)),na={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},sa=i(i({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,maxBufferSize:6e7,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:Ji,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Yi,bufferController:Xi,capLevelController:Qi,errorController:We,fpsController:$i,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:null,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,certLoadPolicy:{default:na},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:na},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},{cueHandler:G,enableWebVTT:!1,enableIMSC1:!1,enableCEA708Captions:!1,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}),{},{subtitleStreamController:void 0,subtitleTrackController:void 0,timelineController:void 0,audioStreamController:void 0,audioTrackController:void 0,emeController:void 0,cmcdController:void 0,contentSteeringController:void 0});r ua=function(){function t(e){void 0===e&&(e={}),this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Oi,this._autoLevelCapping=void 0,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,A(e.debug||!1,"Hls instance");var r=this.config=t.DefaultConfig,e);this.userConfig=e,this._autoLevelCapping=-1,r.progressive&&la(r);var a=r.abrController,n=r.bufferController,s=r.capLevelController,o=r.errorController,l=r.fpsController,u=new o(this),d=this.abrController=new a(this),h=this.bufferController=new n(this),f=this.capLevelController=new s(this),c=new l(this),v=new ie(this),g=new fe(this),m=r.contentSteeringController,p=m?new m(this):null,E=this.levelController=new je(this,p),T=new Je(this),S=new or(this.config),L=this.streamController=new Ki(this,T,S);f.setStreamController(L),c.setStreamController(L);var R=[v,E,L];p&&R.splice(1,0,p),this.networkControllers=R;var b=[d,h,f,c,g,T];this.audioTrackController=this.createController(r.audioTrackController,R);var D=r.audioStreamController;D&&R.push(new D(this,T,S)),this.subtitleTrackController=this.createController(r.subtitleTrackController,R);var _=r.subtitleStreamController;_&&R.push(new _(this,T,S)),this.createController(r.timelineController,b),S.emeController=this.emeController=this.createController(r.emeController,b),this.cmcdController=this.createController(r.cmcdController,b),this.latencyController=this.createController(ce,b),this.coreComponents=b,R.push(u);var x=u.onErrorOut;"function"==typeof x&&this.on(y.ERROR,x,u)}t.isSupported=var e=t.prototype;return e.createController=e.on=function(t,e,r){void 0===r&&(r=this),this._emitter.on(t,e,r)},e.once=e.removeAllListeners=e.off=e.listeners=function(t){return this._emitter.listeners(t)},e.emit=e.trigger=e.listenerCount=e.destroy=e.attachMedia=e.detachMedia=e.loadSource=e.startLoad=e.stopLoad=e.swapAudioCodec=e.recoverMediaError=e.removeLevel=n(t,[{key:"levels",get:,{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:,{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:,{key:"loadLevel",get:function(){return this.levelController.level},set:function(t){k.log("set loadLevel:"+t),this.levelController.manualLevel=t}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(t){this.levelController.nextLoadLevel=t}},{key:"firstLevel",get:set:,{key:"startLevel",get:function(){return this.levelController.startLevel},set:,{key:"capLevelToPlayerSize",get:function(){return this.config.capLevelToPlayerSize},set:,{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:,{key:"bandwidthEstimate",get:function(){var t=this.abrController.bwEstimator;return t?t.getEstimate():NaN}},{key:"ttfbEstimate",get:,{key:"maxHdcpLevel",get:function(){return this._maxHdcpLevel},set:,{key:"autoLevelEnabled",get:,{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:,{key:"maxAutoLevel",get:,{key:"nextAutoLevel",get:set:,{key:"playingDate",get:function(){return this.streamController.currentProgramDateTime}},{key:"mainForwardBufferInfo",get:,{key:"audioTracks",get:function(){var t=this.audioTrackController;return t?t.audioTracks:[]}},{key:"audioTrack",get:function(){var t=this.audioTrackController;return t?t.audioTrack:-1},set:function(t){var e=this.audioTrackController;e&&(e.audioTrack=t)}},{key:"subtitleTracks",get:,{key:"subtitleTrack",get:function(){var t=this.subtitleTrackController;return t?t.subtitleTrack:-1},set:function(t){var e=this.subtitleTrackController;e&&(e.subtitleTrack=t)}},{key:"media",get:function(){return this._media}},{key:"subtitleDisplay",get:set:,{key:"lowLatencyMode",get:function(){return this.config.lowLatencyMode},set:,{key:"liveSyncPosition",get:function(){return this.latencyController.liveSyncPosition}},{key:"latency",get:function(){return this.latencyController.latency}},{key:"maxLatency",get:function(){return this.latencyController.maxLatency}},{key:"targetLatency",get:function(){return this.latencyController.targetLatency}},{key:"drift",get:function(){return this.latencyController.drift}},{key:"forceStartLoad",get:],[{key:"version",get:function(){}},{key:"Events",get:function(){return y}},{key:"ErrorTypes",get:function(){return E}},{key:"ErrorDetails",get:,{key:"DefaultConfig",get:set:function(e){t.defaultConfig=e}}]),t}();return ua.defaultConfig=void 0,ua},"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(r="undefined"!=typeof globalThis?globalThis:r||self).TS_HLS=i()}(!1);
