//v - "0.0.156" Dockerfile README.md build node_modules package-lock.json package.json scripts test.js Build time: 01-22-2024 16:16:53n Dockerfile README.md build node_modules package-lock.json package.json scripts test.js 
 window._event_collector=window._event_collector||[],_event_collector.apiPost="https://pdp-service.retargetly.com/event_collector";const UACH_FIELDS=["architecture","bitness","uafullversion","model","platform","platformVersion","fullVersionList"];let _ec_byteToHex=[];for(let e=0;e<256;++e)_ec_byteToHex[e]=(e+256).toString(16).substr(1);_event_collector.sha256=function(e){function h(e,t){return e>>>t|e<<32-t}var m=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998];function w(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}for(var t,o=function(e){for(var t="",o=0;o<32*e.length;o+=8)t+=String.fromCharCode(e[o>>5]>>>24-o%32&255);return t}(function(e,t){var o,r,n,c,l,_,a,i,u,v,s,d,g,f=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],p=new Array(64);for(e[t>>5]|=128<<24-t%32,e[15+(64+t>>9<<4)]=t,u=0;u<e.length;u+=16){for(o=f[0],r=f[1],n=f[2],c=f[3],l=f[4],_=f[5],a=f[6],i=f[7],v=0;v<64;v++)p[v]=v<16?e[v+u]:w(w(w(h(g=p[v-2],17)^h(g,19)^g>>>10,p[v-7]),h(g=p[v-15],7)^h(g,18)^g>>>3),p[v-16]),s=w(w(w(w(i,h(g=l,6)^h(g,11)^h(g,25)),l&_^~l&a),m[v]),p[v]),d=w(h(d=o,2)^h(d,13)^h(d,22),o&r^o&n^r&n),i=a,a=_,_=l,l=w(c,s),c=n,n=r,r=o,o=w(s,d);f[0]=w(o,f[0]),f[1]=w(r,f[1]),f[2]=w(n,f[2]),f[3]=w(c,f[3]),f[4]=w(l,f[4]),f[5]=w(_,f[5]),f[6]=w(a,f[6]),f[7]=w(i,f[7])}return f}(function(e){for(var t=Array(e.length>>2),o=0;o<t.length;o++)t[o]=0;for(o=0;o<8*e.length;o+=8)t[o>>5]|=(255&e.charCodeAt(o/8))<<24-o%32;return t}(e=function(e){for(var t,o,r="",n=-1;++n<e.length;)t=e.charCodeAt(n),o=n+1<e.length?e.charCodeAt(n+1):0,55296<=t&&t<=56319&&56320<=o&&o<=57343&&(t=65536+((1023&t)<<10)+(1023&o),n++),t<=127?r+=String.fromCharCode(t):t<=2047?r+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r}(e)),8*e.length)),r="0123456789abcdef",n="",c=0;c<o.length;c++)t=o.charCodeAt(c),n+=r.charAt(t>>>4&15)+r.charAt(15&t);return n},_event_collector.options=_event_collector.options||{},_event_collector.range=function(o,e=o){return Array(e-o+1).fill().map((e,t)=>o+t)},_event_collector.extract=function(e,t,o){t=e.match(t);return t?t[o]:e};var _ec_window=window,_ec_document=document;_event_collector.getUrl=function(e){if(void 0!==_event_collector.options&&void 0!==_event_collector.options.url&&""!==_event_collector.options.url)if(/^(((H|h)(T|t)(T|t)(P|p)(S|s)?):\/\/)?[-a-zA-Z0-9@:%._\+~#=]{2,100}\.[a-zA-Z]{2,10}(\/([-a-zA-Z0-9@:%_\+.~#?&//=]*))?/.test(_event_collector.options.url))return _event_collector.browserUrl=_d.location.href,_event_collector.options.url;return e},_event_collector.getDataFromArray=function(e){var t,o={};for(t of e)for(var r in t)if(t.hasOwnProperty(r)){if(void 0===o[r]&&(o[r]=[]),Array.isArray(t[r]))for(var n of t[r])o[r].includes(n)||o[r].push(n);"string"!=typeof t[r]||o[r].includes(t[r])||o[r].push(t[r])}return o},_event_collector.getTimeDiffHours=function(e,t){e=Math.abs(e-t);return Math.ceil(e/144e4)},_event_collector.isEmptyData=function(e){for(var t in e.data)if(e.data.hasOwnProperty(t)&&Array.isArray(e.data[t])&&0<e.data[t].length)return!1;return!e.env},_event_collector.getPlainEnv=function(){try{var t=document.querySelector("ins.adsbygoogle"),o=t&&0===t.innerHTML.replace(/\s/g,"").length;let e;var r,n=document.createElement("canvas").getContext("webgl"),c=(n&&(r=n.getExtension("WEBGL_ec_documentebug_renderer_info"))&&(e={vendor:n.getParameter(r.UNMASKED_VENDOR_ec_windowEBGL),renderer:n.getParameter(r.UNMASKED_RENDERER_ec_windowEBGL)}),parseInt(navigator.hardwareConcurrency));return{tz:(new Date).getTimezoneOffset(),h:window.screen.height,w:window.screen.width,cd:window.screen.colorDepth,ua:navigator.userAgent,lse:_event_collector.isStorageAvailable("localStorage"),cke:_event_collector.isCookieAvailable(),adb:o,glv:e?e.vendor:null,glr:e?e.renderer:null,cpu:isNaN(c)?1:c}}catch(e){return{}}},_event_collector.getFlocId=async function(){try{var e=(await document.interestCohort())["id"];return e}catch(e){return""}},_event_collector.getTimeoutController=function(){try{const e=new AbortController;return e?(setTimeout(()=>e.abort(),12e3),e):!1}catch(e){return!1}},_event_collector.setDataToSend=function(e){let t={};try{t={...e.pv,...e.env.uach,...e.env.plain,pid:_event_collector.pid,fp_id:e.fp_id,pubcid:e.pubcid,tp_id:e.tp_id,dt:"web"}}catch(e){return!1}return t},_event_collector.send=async function(){var e=_event_collector.apiPost,t=_event_collector.getSavedEventCollector();_event_collector.tp_id=await _event_collector.getRlId();let o=t.fp_id,r=t.pubcid;o||r?!o&&r?o=r:o&&!r&&(r=o):(r=_event_collector.uuid4(),o=r),_event_collector.saveFirstPartyCookie(_event_collector.COOKIE,r);t={data:{},pv:{},fp_id:o,pubcid:r,tp_id:_event_collector.tp_id};if(0<_event_collector.length&&(t.data=_event_collector.getDataFromArray(_event_collector)),t.env={},_event_collector.page_view=_event_collector.pageViewObject(),t.env.uach=await _event_collector.getUACH(),t.env.plain=_event_collector.getPlainEnv(),_event_collector.page_view&&(t.pv={..._event_collector.page_view}),!_event_collector.isEmptyData(t)){var t=_event_collector.setDataToSend(t),n=_event_collector.getTimeoutController(),t={method:"POST",cache:"no-cache",browsingTopics:"https:"===location.protocol,headers:{"Content-Type":"application/json"},referrerPolicy:"no-referrer-when-downgrade",body:JSON.stringify(t)};n&&(t.signal=n.signal);try{var c=await fetch(e,t),l=(_event_collector.sending=!1,_event_collector.length=0,await c.json());if(200!=c.status)return;_event_collector.storageAudiences(l),_event_collector.__rely_cookieless_campaign_join(l.device.audiences),r&&o!==r&&_event_collector.saveFirstPartyCookie(_event_collector.LEGACY_COOKIE,"")}catch(e){}n&&clearTimeout(n)}},_event_collector.storageAudiences=function(e){e.dtk&&e.device.audiences&&(e=e.device.audiences.join(","),_event_collector.saveFirstPartyCookie("_rl_aud",e))},_event_collector.getUACH=async function(){var e,t={};return t=navigator.userAgentData&&navigator.userAgentData.brands?{arch:(e=await navigator.userAgentData.getHighEntropyValues(UACH_FIELDS)).architecture||"",btns:e.bitness||"",mdl:e.model||"",plat:e.platform||"",pvs:e.platformVersion||"",ufv:_event_collector.convertUACHFulLVersionListToString(e.fullVersionList||[])}:t},_event_collector.getRlId=async function(){nocookied="false";try{nocookied=await _event_collector._tpc_check()}catch{}return"true"!=nocookied&&("undefined"!=typeof Storage?window.localStorage.getItem("_rlid"):document.cookie._rlid)||""},_event_collector.convertUACHFulLVersionListToString=function(e){if(!e||0===e.length)return"";let t="";for(var o of e){""!==t&&(t+=", ");o=o.brand+";v="+o.version;t+=o}return t},_event_collector.pageViewObject=function(){let e={};var t=_ec_window.parent!==_ec_window.self?_ec_window.parent===_ec_window.top?1:2:0,o={ilvl:t,url:0==t?_ec_document.location.href:1==t?_ec_document.referrer:"",rf:0==t?_ec_document.referrer:"",tl:0==t?_ec_document.title:"",desc:"",kw:"",ogt:"",ogs:""};o.url=_event_collector.getUrl(o.url),o.browserUrl=_event_collector.browserUrl;try{e=_ec_window.top.document,o.url=_ec_document.top.location.href,o.referrer=e.referrer,o.title=e.title||""}catch(e){}this.referer&&(o.referrer=this.referer);let r;var n=e.getElementsByTagName?e.getElementsByTagName("meta"):[];for(let e=0;e<n.length;e++)n[e].name&&"keywords"===n[e].name.toLowerCase()&&n[e].content?o.kw=n[e].content.replace(/^\s+|\s+$/g,"").substr(0,100):n[e].name&&"description"===n[e].name.toLowerCase()&&n[e].content?o.desc=n[e].content.replace(/^\s+|\s+$/g,"").substr(0,300):n[e].getAttribute("property")&&"og:title"===n[e].getAttribute("property").toLowerCase()&&n[e].content?o.ogt=n[e].content.replace(/^\s+|\s+$/g,"").substr(0,300):n[e].getAttribute("property")&&"og:subject"===n[e].getAttribute("property").toLowerCase()&&n[e].content&&(o.ogs=n[e].content.replace(/^\s+|\s+$/g,"").substr(0,300));return _ec_document.cookie&&(r=_ec_document.cookie.match(/.*__utmz=([^;]*)/))?o.utmz=r[1]:o.utmz="",o},_event_collector.uuid4=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^_event_collector.genRandomValue()>>e/4).toString(16))},_event_collector.genRandomValue=function(e=16){var t=window.crypto||window.msCrypto;return t&&t.getRandomValues?t.getRandomValues(new Uint8Array(1))[0]%e:Math.random()*e},_event_collector.bytesToUuid=function(e,t){var t=t||0,o=_ec_byteToHex;return[o[e[t++]],o[e[t++]],o[e[t++]],o[e[t++]],"-",o[e[t++]],o[e[t++]],"-",o[e[t++]],o[e[t++]],"-",o[e[t++]],o[e[t++]],"-",o[e[t++]],o[e[t++]],o[e[t++]],o[e[t++]],o[e[t++]],o[e[+t]]].join("")},_event_collector._rl_gen_aud=function(){let e="_rl_aud",t=[];try{var o=localStorage.getItem(e);"string"==typeof o&&(t=o.split(","))}catch(e){}return t=0===t.length&&(o=_event_collector.get1P(e))?o.split(","):t},_event_collector.populategamaudience=function(){if(!_event_collector.stopRetryPopulation){if("undefined"==typeof googletag)throw new Error("Google tag doesn't exist");var e=_event_collector.get1P(_event_collector.COOKIE)||_event_collector.get1P(_event_collector.LEGACY_COOKIE);googletag.pubads().setPublisherProvidedId(e),googletag.pubads().setTargeting("_aud",_event_collector._rl_gen_aud()),googletag.enableServices(),_event_collector.stopRetryPopulation=!0}},_event_collector.sendAfterLoad=function(){_event_collector.sending||(_event_collector.sending=!0,_event_collector.send())},_event_collector.timeToDetectChangeUrl=200,_event_collector.urlChangeHook=function(){_event_collector.udact=!0;var e=_event_collector.getUrl(_ec_document.location.href);_event_collector.oldURL!=e&&(_event_collector.referer=_event_collector.oldURL,_event_collector.oldURL=e,_event_collector.sendAfterLoad()),setTimeout(_event_collector.urlChangeHook,_event_collector.timeToDetectChangeUrl)},_event_collector.stopRetryPopulation=!1,_event_collector.maxRetries=10,_event_collector.retries=1,_event_collector.retryPopulation=()=>{try{_event_collector.populategamaudience()}catch{_event_collector.retries>=_event_collector.maxRetries||_event_collector.stopRetryPopulation?_event_collector.stopRetryPopulation=!0:(_event_collector.retries+=1,setTimeout(_event_collector.retryPopulation,_event_collector.timeToDetectChangeUrl))}},_event_collector.retryPopulation(),_event_collector.urlChangeHook();
