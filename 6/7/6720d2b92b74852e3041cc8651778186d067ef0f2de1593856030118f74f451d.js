.notf-bell{line-height:45px}.topnavigation ul li.notf-bell{float:right}.topnavigation ul li.notf-bell a{margin:5px;color:#333;padding:0}.nav-notification{float:left}.manage-notf-arrow{border-left:5px solid transparent;border-right:5px solid transparent;border-bottom:5px solid #fff;width:0;height:0;position:absolute;top:-5px;right:118px}.manage-notification,.manage-notification-block{padding:20px;background:#fff;font-size:15px;text-align:center;color:#000;border-radius:5px;position:absolute;top:40px;margin:auto;display:none;width:400px;height:55px;box-shadow:0 2px 1px 2px #ccc;right:0}.manage-notification-close,.manage-notification-close-block{position:absolute;top:-5px;right:5px;font-size:20px}.giz-leftpanel{width:660px;float:left}.giz-rightpanel{width:300px;float:right}.notification-arrow{border-left:10px solid transparent;border-right:10px solid transparent;border-bottom:10px solid #1980cb;width:0;height:0;position:absolute;top:-10px;right:10px}.notification-wrapper{border:1px solid #ccc;position:absolute;top:50px;right:0;background:#fff;z-index:10000;width:450px;display:none}.popup-notification-header{background:#1980cb;padding:0 10px;height:55px}.popup-notification-text{font-size:20px;color:#fff;float:left;padding:12px 10px;cursor:pointer}.popup-notification-text i{margin-right:10px}.popup-notification-on-off{float:right;margin:20px 10px;width:40px;height:14px;background:#fff;border-radius:10px;position:relative}.popup-notification-on-off span.on-off-link{width:20px;height:20px;cursor:pointer;border-radius:50%;position:absolute;top:-3px;transition:all .8s ease 0s}.popup-notification-on-off.onstate span.on-off-link{background:#8aceff;transform:translateX(25px)}.popup-notification-on-off.offstate span.on-off-link{transform:translateX(-5px);background:#999}.popup-bs-notlinks ul{height:90%;overflow:auto;width:100%;padding-bottom:55px}.notification-text{font-size:22px;color:#2874f0;height:30px;display:none;padding:10px}.notification-clear{font-size:13px;text-align:right;padding:5px 10px;color:#333}.notification-clear a{color:#333;text-decoration:none;line-height:inherit!important;margin:0!important}.notification-clear a:hover{text-decoration:underline!important}#notf-cont{display:none}#not-content li{list-style-type:none;padding:8px 5px;border:1px solid #e4e4e4;position:relative;margin:5px;border-radius:5px}span.notification-num{background:red;border-radius:50%;width:18px;height:18px;position:absolute;font-size:12px;top:10px;right:7px;line-height:20px;font-weight:700;color:#fff;text-align:center}#not-content li a{display:block;margin:0}.popup-notf-artimg img{display:block}.popup-notf-artimg{float:left;width:110px}.popup-notf-title{margin-left:120px;font-size:16px;color:#000;margin-right:20px}.popup-notf-notclose{position:absolute;top:0;right:0;color:#666;font-size:18px;font-weight:400;padding:2px 5px}.popup-notf-notclose a{color:#666}.notf-overlay{top:0;left:0;right:0;bottom:0;width:100%;height:0;opacity:.4;z-index:10000000;position:fixed;background:#000;display:none}.oi-notify{font-family:open sans,sans-serif;background-color:#fff;text-align:center;z-index:100000001;position:fixed;right:0;left:0;top:0;margin-right:auto;margin-left:auto;width:380px}#oiNotification{visibility:hidden;transform:translate3d(0,105px,-1000px);transition:all linear .3s;transition-delay:1s}#oiNotification.shownotf{transform:translate3d(0,0,0)!important;visibility:visible!important}#oi-instant{position:relative;z-index:100000001;background:#fff;border-radius:0 0 5px 5px}.oi-instant-updates-block{width:320px;margin:0 auto}.oi-instant-updates-block-head{padding:15px 0 5px 45px;font-size:14px;font-weight:700}.oi-instant-logo{width:60px;height:60px;background:url(/images/boldsky-App-icon.svg) no-repeat 0 0;position:absolute;left:5px;top:10px}.oi-instant-updates-block-bottom{padding:5px 0 0}.oi-instant-updates-btn{padding:5px 0;text-align:left}.oi-instant-updates-btn button{border:none;width:110px;height:30px;text-align:center;line-height:30px;display:inline-block;margin:0 10px 0 0;font-size:14px;border-radius:2px;cursor:pointer}.oi-instant-updates-btn button.oi-not-now{border:solid thin #b3b3b3;background:#fff;color:#666;z-index:100000!important}.oi-instant-updates-btn button.oi-enable{font-weight:600;color:#fff;background:#06c;border:solid thin #06c;text-transform:uppercase;z-index:100000!important}.notification-bell.ismovement{-webkit-animation-name:bellmovement;animation-delay:.5s;-webkit-animation-duration:.5s;-webkit-animation-iteration-count:5;-webkit-animation-direction:linear;-webkit-transform-origin:50% 0%;-webkit-animation-timing-function:ease-in-out}@keyframes bellmovement{0%{-webkit-transform:rotate(0deg)}10%{-webkit-transform:rotate(10deg)}20%{-webkit-transform:rotate(20deg)}30%{-webkit-transform:rotate(10deg)}40%{-webkit-transform:rotate(5deg)}50%{-webkit-transform:rotate(0deg)}60%{-webkit-transform:rotate(-5deg)}70%{-webkit-transform:rotate(-10deg)}80%{-webkit-transform:rotate(-20deg)}90%{-webkit-transform:rotate(-10deg)}100%{-webkit-transform:rotate(0deg)}}#not-content{max-height:280px;overflow:auto}.one-wrapper-bg img{width:100%;height:100%}.article-overlay{background:rgba(0,0,0,.8);position:fixed;top:0;right:0;left:0;bottom:0;width:100%;height:100%;z-index:10000000;display:none}.article-slider-wrapper{position:fixed;text-align:left;width:1000px;height:525px;margin:auto;z-index:100000001;top:70px;left:0;right:0;bottom:0;display:none;padding:10px;background:#dedede}.article-overlay.show-popup,.article-slider-wrapper.show-popup{display:block}.article-slider{height:525px;display:block;width:100%}.article-slider ul{height:525px;padding:0 5px}.article-slider .bx-wrapper{max-width:100%!important;max-height:525px!important;background:0 0!important}.article-slider .bx-wrapper .bx-viewport{height:525px!important}.article-slider ul li{display:inline-block;width:320px!important;margin:0;vertical-align:top;background:#fff;height:100%;position:relative;border-radius:5px;padding:10px;box-sizing:border-box;overflow:hidden}.article-slider ul li.citylist{box-shadow:0 1px 7px 0 #6a6f6d}.article-slider ul li a{display:block;white-space:normal;text-decoration:none}.article-slider-thumb{text-align:center}.article-slider-thumb img{display:block;width:100%!important}.article-slider-details{padding:0}.article-slider-title{font-size:16px;color:#000;padding:8px 0}.article-slider-datetime{font-size:11px;color:#666;padding:0 0 8px}.article-slider-desc{font-size:13px;color:#000}.article-slider-num{font-size:16px;color:#333;padding:3px 0;text-align:center}.article-popup-close{position:absolute;top:-40px;right:0;font-size:20px;color:#fff!important;text-decoration:none;z-index:1000000000;border-radius:50%;border:1px solid #fff!important;width:30px;height:30px;line-height:32px;text-align:center;font-family:Arial,Helvetica,sans-serif}.article-popup-settings{position:absolute;top:-40px;left:0;font-size:20px;color:#fff!important;text-decoration:none;z-index:1000000000;width:30px;height:30px;line-height:30px;text-align:center;background:url(https://images.oneindia.com/notification/images/settings-icon.svg) no-repeat 0 0;text-indent:-99999px}.other-article-title{font-size:16px;color:#fff;position:fixed;top:20px;font-weight:700;left:15px;z-index:1000000}#loader-wrapper{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1000;background:rgba(255,255,255,.8)}#loader{display:block;position:relative;left:50%;top:50%;width:100px;height:100px;margin:-50px 0 0 -50px;border-radius:50%;border:3px solid transparent;border-top-color:#354395;-webkit-animation:spin 2s linear infinite;animation:spin 2s linear infinite}#loader:before{content:"";position:absolute;top:5px;left:5px;right:5px;bottom:5px;border-radius:50%;border:3px solid transparent;border-top-color:#f37321;-webkit-animation:spin 3s linear infinite;animation:spin 3s linear infinite}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg)}}@media screen and (min-device-width:768px) and (max-device-width:1824px) and (orientation:landscape){.article-slider-thumb img{display:inline-block;width:auto}}.article-slider-sharelinks{padding:5px 10px;text-align:center;border-top:1px solid #ccc;position:absolute;bottom:0;background:#fff;left:0;right:0;z-index:100000}.article-slider-footer{position:absolute;left:-300px;bottom:6px;background:#fff;-webkit-transition:left .5s ease;-moz-transition:left .5s ease;-ms-transition:left .5s ease;transition:left .5s ease}.article-slider-footer.active{left:0;right:0}.article-share{font-size:18px;color:#999;text-align:left;float:left}.article-slider-footer a{margin:0 4px;font-size:16px;color:#fff;border-radius:5px;width:50px;height:30px;display:inline-block!important;text-align:center;line-height:30px}.article-slider-facebook{background:#3d5a9a}.article-slider-twitter{background:#39a9e0}.article-slider-whatsapp{background:#94dc89}.article-slider-gplus{background:#dd4b39}.article-slider-container{overflow-y:scroll;padding:10px 0 50px;position:relative;height:450px}.article-slider .bx-wrapper{position:relative}.article-slider .bx-wrapper .bx-controls a{position:absolute;top:50%;width:20px;height:20px;text-indent:-9999px}.article-slider .bx-wrapper .bx-controls a.bx-prev{left:-30px;background:url(https://images.oneindia.com/notification/images/arrow-left.png) no-repeat center center}.article-slider .bx-wrapper .bx-controls a.bx-next{right:-30px;background:url(https://images.oneindia.com/notification/images/arrow-right.png) no-repeat center center}.city-popup-list{position:fixed;width:900px;height:520px;margin:auto;z-index:1000002;top:0;left:0;right:0;bottom:0;display:none;background:#fff;border-radius:10px}.notification-settings-popup{position:fixed;width:900px;height:520px;margin:auto;z-index:100000002;top:70px;left:0;right:0;bottom:0;display:none;background:#fff;border-radius:10px}.notification-settings-clearbox{position:fixed;width:900px;height:520px;margin:auto;z-index:100000002;top:0;left:0;right:0;bottom:0;display:none;background:#fff;border-radius:10px}.notification-overflow-clearbox{width:300px;margin:220px auto;text-align:center}.notification-settings-btn{background:#e2e2e2;padding:10px;text-align:center;font-size:18px;position:absolute;bottom:0;left:0;right:0;font-weight:700;cursor:pointer}.notification-settings-btn a{padding:5px 10px;font-size:16px;color:#000;display:inline-block;border-radius:5px;border:1px solid #ccc;width:50px}.notification-settings-btn a.yes{background:#1fa3e1}.notification-settings-btn a.no{background:#d7d2d2}.notification-settings-content{padding:20px}.notification-settings-bottomcontent{padding:20px}.notification-settings-heading{font-size:18px;color:#000;font-weight:700;padding:0 0 10px}.notification-settings-heading span{color:#666;font-size:14px;cursor:pointer}.notification-settings-details ul li{float:left;width:45%;list-style-type:none;padding:5px 0 10px;font-size:14px;color:#000;box-sizing:border-box}.alerts-time-selbox{padding:5px 10px;background:#e2e2e2;border:0}.notification-settings-desc{font-size:16px;color:#000;padding:0 0 5px}.notification-settings-qwert{padding-bottom:20px;position:relative}.notification-on-off{float:right;margin:20px 10px;width:35px;height:14px;background:#999;border-radius:10px;position:absolute;right:10px;top:20px}.notification-on-off span.on-off-link{width:20px;height:20px;cursor:pointer;border-radius:50%;position:absolute;top:-4px;transition:all .8s ease 0s;box-shadow:0 2px 3px #666}.notification-on-off.onstate{background:#b3cefb}.notification-on-off.onstate span.on-off-link{background:#4285f4;transform:translateX(25px)}.notification-on-off.offstate span.on-off-link{transform:translateX(-5px);background:#fafafa}.notification-settings{position:absolute;top:-40px;left:0;font-size:20px;color:#fff!important;text-decoration:none;z-index:1000000000;line-height:30px;text-align:center}.notification-overflow{height:520px;overflow:hidden}.city-list-content{padding:20px 10px;height:440px;overflow:auto}.city-list-content ul li{list-style-type:none;padding:8px 0;width:33.3%;float:left;font-size:16px;color:#000}.city-popup-list.close-popup{display:none}.notification-settings-popup.show-popup{display:block}.article-slider-wrapper.hide-popup{opacity:0}.squaredradio{float:left;margin:2px 10px 0 0;position:relative;width:20px}.squaredradio input[type=checkbox]{visibility:hidden}.squaredradio i,.squaredradio i:hover{border:thin solid #cdcdcd;cursor:pointer;height:16px;left:0;padding:0;top:0;width:16px;border-radius:50%;background:#fff}.squaredradio i{position:absolute}.squaredradio i::after{content:"";height:10px;left:3px;opacity:0;position:absolute;top:3px;transform:rotate(-45deg);width:10px;background:#000;border-radius:50%}.squaredradio input[type=radio]:checked+i::after{opacity:1}.squaredradio input[type=radio]:checked+i{background:#fff;border:thin solid #cdcdcd}.compare-radio .squaredradio i{width:20px;height:20px}.compare-radio label{color:#333;cursor:pointer;display:block;font-size:14px;font-weight:400;margin-bottom:0;min-height:20px;padding:0;line-height:30px}.compare-radio .squaredradio i::after{top:5px;left:5px}.squaredcheck{float:left;margin:2px 10px 0 0;position:relative;width:20px}.squaredcheck input[type=checkbox]{visibility:hidden}.squaredcheck i,.squaredcheck i:hover{border:thin solid #cdcdcd;cursor:pointer;height:16px;left:0;padding:0;top:0;width:16px;border-radius:3px;background:#fff}.squaredcheck i{position:absolute}.squaredcheck i::after{-moz-border-bottom-colors:none;-moz-border-left-colors:none;-moz-border-right-colors:none;-moz-border-top-colors:none;background:transparent none repeat scroll 0 0;border-color:-moz-use-text-color -moz-use-text-color #cdcdcd #cdcdcd;border-image:none;border-style:none none solid solid;border-width:medium medium 2px 2px;content:"";height:4px;left:3px;opacity:0;position:absolute;top:3px;transform:rotate(-45deg);width:8px}.squaredcheck input[type=checkbox]:checked+i::after{opacity:1}.squaredcheck input[type=checkbox]:checked+i{background:#fff;border:thin solid #cdcdcd}.filter_by{margin-left:2px}.compare-checkbox .squaredcheck i{width:20px;height:20px}.compare-checkbox label{color:#333;cursor:pointer;display:inline-block;font-size:14px;font-weight:400;margin-bottom:0;min-height:20px;padding:0}.compare-checkbox .squaredcheck i::after{top:5px;left:5px}.article-slider-delete{background:url(https://images.oneindia.com/notification/images/delete-icon.svg) no-repeat 0 0;width:25px;height:25px;position:absolute;right:10px;top:5px;text-indent:-99999px}.notification-settings-clear{border-top:1px solid #ccc;padding:10px 0}.notification-settings-clearbox{display:none}.no-notification-wrapper{margin:120px auto;text-align:center}.no-notif-content{width:100px;height:100px;background:url(https://images.oneindia.com/notification/images/bell-icon1.svg) no-repeat 0 0;position:relative;margin:0 auto}.no-notif-text{font-size:16px;color:#000;padding:10px;font-weight:700}.no-notif-content span{width:30px;height:30px;background:#dedede;border-radius:50%;position:absolute;right:20px;top:5px;font-size:20px;color:#000;font-weight:700}.compare-radio{text-align:left}.clear{clear:both;display:block;overflow:hidden;visibility:hidden;width:0;height:0}.clearfix:after{clear:both;content:' ';display:block;font-size:0;line-height:0;visibility:hidden;width:0;height:0}.clearfix{display:inline-block}* html .clearfix{height:1%}.clearfix{display:block}.article-slider ul li.oneslide{width:320px;margin:0 auto;display:block}.article-slider-footer a.article-social-close{margin:0 4px;font-size:16px;color:#fff;border-radius:50%;width:25px;height:25px;display:inline-block!important;text-align:center;line-height:25px;background:#000;border:1px solid #000;font-weight:700}.article-slider ul li.slide23{margin-right:10px}.article-slider ul li.slide23:last-child{margin-right:0}.instant-updates-bottom{padding:0;background:#e6e6e6;position:fixed;left:0;right:0;bottom:0;box-shadow:3px 3px 5px 3px #333;z-index:999999}.instant-updates-mid{width:450px;margin:0 auto;background:#f2f2f2;position:relative}.instant-updates-bellicon{width:40px;height:40px;float:left;border-radius:50%;background:#e6e6e6}.updates-bellicon{background:url(https://images.oneindia.com/notification/images/bell-icon-black.svg) no-repeat left center;width:25px;height:25px;margin:7px;display:block}.instant-updates-content{font-size:15px;color:#403e40;font-weight:600;margin:0 75px 0 0}.instant-updates-content span{display:block;padding-top:12px;margin-left:50px;text-align:center}.instant-updates-close{position:absolute;right:-40px;font-size:20px;color:#000;font-weight:600;cursor:pointer;line-height:50px;width:40px;text-align:center;bottom:0;font-family:Arial}.instant-updates-left{margin:0 40px;padding:5px;cursor:pointer;position:relative}.instant-updates-left:after{display:table;content:'';clear:both}.instant-updates-arrow{position:absolute;top:10px;right:10px;color:#fff;background:#403e40;text-transform:uppercase;font-size:12px;padding:10px;font-weight:700;font-family:Arial}d;height:5px;border-radius:5px}@keyframes svelte-1x06u35-progressLine{0%{width:0%}100%{width:100%}}@keyframes svelte-1x06u35-imageScale{0%{transform:scale(1.2)}100%{transform:scale(1)}}@keyframes svelte-1x06u35-textAppear{25%{opacity:1;background:rgb(221, 221, 221);border-left:4px solid #facc2b}50%{opacity:1;background:rgb(221, 221, 221);border-left:4px solid #facc2b}90%{opacity:1;background:rgb(221, 221, 221);border-left:4px solid #facc2b}100%{opacity:0;background:transparent;border-left:4px solid transparent}}.stop-animation.svelte-1x06u35.svelte-1x06u35.svelte-1x06u35.svelte-1x06u35{animation-play-state:paused}");}
function get_each_context(ctx,list,i){const child_ctx=ctx.slice();child_ctx[24]=list[i];child_ctx[26]=i;return child_ctx;}
function get_each_context_1(ctx,list,i){const child_ctx=ctx.slice();child_ctx[27]=list[i];child_ctx[26]=i;return child_ctx;}
function get_each_context_2(ctx,list,i){const child_ctx=ctx.slice();child_ctx[27]=list[i];child_ctx[26]=i;return child_ctx;}
function create_if_block_4(ctx){let svg;let path;return{c(){svg=svg_element("svg");path=svg_element("path");attr(path,"d","M5 4v16l16-8z");attr(path,"fill-rule","evenodd");attr(svg,"class","cnx-color-icon svelte-1x06u35");attr(svg,"xmlns","http://www.w3.org/2000/svg");attr(svg,"viewBox","0 0 24 24");},m(target,anchor){insert(target,svg,anchor);append(svg,path);},d(detaching){if(detaching)detach(svg);}};}
function create_if_block_3(ctx){let svg;let path;return{c(){svg=svg_element("svg");path=svg_element("path");attr(path,"d","M9 21H3V3h6v18zm12 0h-6V3h6v18z");attr(path,"fill-rule","evenodd");attr(svg,"xmlns","http://www.w3.org/2000/svg");attr(svg,"viewBox","0 0 24 24");attr(svg,"class","svelte-1x06u35");},m(target,anchor){insert(target,svg,anchor);append(svg,path);},d(detaching){if(detaching)detach(svg);}};}
function create_if_block_2(ctx){let path0;let path1;return{c(){path0=svg_element("path");path1=svg_element("path");attr(path0,"d","M7.33331 3.33337L3.99998 6.00004H1.33331V10H3.99998L7.33331 12.6667V3.33337Z");attr(path0,"stroke-width","1.33333");attr(path0,"stroke-linecap","round");attr(path0,"stroke-linejoin","round");attr(path1,"d","M12.7133 3.28674C13.9631 4.53693 14.6652 6.23232 14.6652 8.00008C14.6652 9.76784 13.9631 11.4632 12.7133 12.7134M10.36 5.64008C10.9849 6.26517 11.3359 7.11286 11.3359 7.99674C11.3359 8.88062 10.9849 9.72832 10.36 10.3534");attr(path1,"stroke-width","1.33333");attr(path1,"stroke-linecap","round");attr(path1,"stroke-linejoin","round");},m(target,anchor){insert(target,path0,anchor);insert(target,path1,anchor);},d(detaching){if(detaching)detach(path0);if(detaching)detach(path1);}};}
function create_if_block_1(ctx){let path0;let path1;let path2;return{c(){path0=svg_element("path");path1=svg_element("path");path2=svg_element("path");attr(path0,"d","M7.33331 3.33337L3.99998 6.00004H1.33331V10H3.99998L7.33331 12.6667V3.33337Z");attr(path0,"stroke-width","1.33333");attr(path0,"stroke-linecap","round");attr(path0,"stroke-linejoin","round");attr(path1,"d","M12 4L4 12");attr(path1,"stroke-width","1.33333");attr(path1,"stroke-linecap","round");attr(path1,"stroke-linejoin","round");attr(path2,"d","M4 4L12 12");attr(path2,"stroke-width","1.33333");attr(path2,"stroke-linecap","round");attr(path2,"stroke-linejoin","round");},m(target,anchor){insert(target,path0,anchor);insert(target,path1,anchor);insert(target,path2,anchor);},d(detaching){if(detaching)detach(path0);if(detaching)detach(path1);if(detaching)detach(path2);}};}
function create_if_block(ctx){var _ctx$3$ctx$,_ctx$3$ctx$2,_ctx$3$ctx$3;let span;let t_value=(((_ctx$3$ctx$=ctx[3][ctx[4]])===null||_ctx$3$ctx$===void 0?void 0:_ctx$3$ctx$.title.length)>50?((_ctx$3$ctx$2=ctx[3][ctx[4]])===null||_ctx$3$ctx$2===void 0?void 0:_ctx$3$ctx$2.title.substr(0,50))+"...":(_ctx$3$ctx$3=ctx[3][ctx[4]])===null||_ctx$3$ctx$3===void 0?void 0:_ctx$3$ctx$3.title)+"";let t;let span_class_value;return{c(){span=element("span");t=text(t_value);attr(span,"class",span_class_value=""+(null_to_empty(`carousel-title ${
ctx[2]?"stop-animation":""}`)+" svelte-1x06u35"));},m(target,anchor){insert(target,span,anchor);append(span,t);},p(ctx,dirty){var _ctx$3$ctx$4,_ctx$3$ctx$5,_ctx$3$ctx$6;if(dirty&24&&t_value!==(t_value=(((_ctx$3$ctx$4=ctx[3][ctx[4]])===null||_ctx$3$ctx$4===void 0?void 0:_ctx$3$ctx$4.title.length)>50?((_ctx$3$ctx$5=ctx[3][ctx[4]])===null||_ctx$3$ctx$5===void 0?void 0:_ctx$3$ctx$5.title.substr(0,50))+"...":(_ctx$3$ctx$6=ctx[3][ctx[4]])===null||_ctx$3$ctx$6===void 0?void 0:_ctx$3$ctx$6.title)+""))set_data(t,t_value);if(dirty&4&&span_class_value!==(span_class_value=""+(null_to_empty(`carousel-title ${
ctx[2]?"stop-animation":""}`)+" svelte-1x06u35"))){attr(span,"class",span_class_value);}},d(detaching){if(detaching)detach(span);}};}
function create_each_block_2(ctx){let if_block_anchor;let if_block=ctx[26]===ctx[4]&&create_if_block(ctx);return{c(){if(if_block)if_block.c();if_block_anchor=empty();},m(target,anchor){if(if_block)if_block.m(target,anchor);insert(target,if_block_anchor,anchor);},p(ctx,dirty){if(ctx[26]===ctx[4]){if(if_block){if_block.p(ctx,dirty);}else{if_block=create_if_block(ctx);if_block.c();if_block.m(if_block_anchor.parentNode,if_block_anchor);}}else if(if_block){if_block.d(1);if_block=null;}},d(detaching){if(if_block)if_block.d(detaching);if(detaching)detach(if_block_anchor);}};}
function create_each_block_1(ctx){let div1;let div0;let div0_class_value;let t;let mounted;let dispose;function click_handler_5(){return(ctx[18](ctx[26]));}
return{c(){div1=element("div");div0=element("div");t=space();attr(div0,"class",div0_class_value=""+(null_to_empty(ctx[26]<ctx[4]?"progress-container_status-full":ctx[26]>ctx[4]?"progress-container_status-empty":`progress-container_status ${
ctx[2]?"stop-animation":""}`)+" svelte-1x06u35"));attr(div1,"class","progress-container_line svelte-1x06u35");},m(target,anchor){insert(target,div1,anchor);append(div1,div0);append(div1,t);if(!mounted){dispose=listen(div1,"click",click_handler_5);mounted=true;}},p(new_ctx,dirty){ctx=new_ctx;if(dirty&20&&div0_class_value!==(div0_class_value=""+(null_to_empty(ctx[26]<ctx[4]?"progress-container_status-full":ctx[26]>ctx[4]?"progress-container_status-empty":`progress-container_status ${
ctx[2]?"stop-animation":""}`)+" svelte-1x06u35"))){attr(div0,"class",div0_class_value);}},d(detaching){if(detaching)detach(div1);mounted=false;dispose();}};}
function create_each_block(ctx){let div;let img;let img_class_value;let img_src_value;let img_alt_value;let t;let mounted;let dispose;return{c(){div=element("div");img=element("img");t=space();attr(img,"class",img_class_value=""+(null_to_empty(`main-image ${
ctx[2]?"stop-animation":""}`)+" svelte-1x06u35"));if(!src_url_equal(img.src,img_src_value=ctx[24].articleAvatar))attr(img,"src",img_src_value);attr(img,"alt",img_alt_value=ctx[24].tag);attr(div,"class","page svelte-1x06u35");toggle_class(div,"hide",ctx[26]!=ctx[4]);},m(target,anchor){insert(target,div,anchor);append(div,img);append(div,t);if(!mounted){dispose=listen(div,"click",ctx[19]);mounted=true;}},p(ctx,dirty){if(dirty&4&&img_class_value!==(img_class_value=""+(null_to_empty(`main-image ${
ctx[2]?"stop-animation":""}`)+" svelte-1x06u35"))){attr(img,"class",img_class_value);}
if(dirty&8&&!src_url_equal(img.src,img_src_value=ctx[24].articleAvatar)){attr(img,"src",img_src_value);}
if(dirty&8&&img_alt_value!==(img_alt_value=ctx[24].tag)){attr(img,"alt",img_alt_value);}
if(dirty&16){toggle_class(div,"hide",ctx[26]!=ctx[4]);}},d(detaching){if(detaching)detach(div);mounted=false;dispose();}};}
function create_fragment$1(ctx){let div5;let div2;let div1;let div0;let button0;let t0;let button1;let t1;let t2;let button2;let t3;let button3;let svg2;let if_block2_anchor;let t4;let span;let t6;let div3;let t7;let div4;let t8;let mounted;let dispose;let if_block0=ctx[2]===true&&create_if_block_4();let if_block1=ctx[2]===false&&create_if_block_3();let if_block2=ctx[1]==false&&create_if_block_2();let if_block3=ctx[1]==true&&create_if_block_1();let each_value_2=ctx[3];let each_blocks_2=[];for(let i=0;i<each_value_2.length;i+=1){each_blocks_2[i]=create_each_block_2(get_each_context_2(ctx,each_value_2,i));}
let each_value_1=ctx[3];let each_blocks_1=[];for(let i=0;i<each_value_1.length;i+=1){each_blocks_1[i]=create_each_block_1(get_each_context_1(ctx,each_value_1,i));}
let each_value=ctx[3];let each_blocks=[];for(let i=0;i<each_value.length;i+=1){each_blocks[i]=create_each_block(get_each_context(ctx,each_value,i));}
return{c(){div5=element("div");div2=element("div");div1=element("div");div0=element("div");button0=element("button");button0.innerHTML=`<svg style="transform: scale(-1, -1);" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2B2D38" class="svelte-1x06u35"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z"></path></svg>`;t0=space();button1=element("button");if(if_block0)if_block0.c();t1=space();if(if_block1)if_block1.c();t2=space();button2=element("button");button2.innerHTML=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#2B2D38" class="svelte-1x06u35"><path d="M18 21h3V3h-3v18zM3 21l14-9L3 3v18z"></path></svg>`;t3=space();button3=element("button");svg2=svg_element("svg");if(if_block2)if_block2.c();if_block2_anchor=empty();if(if_block3)if_block3.c();t4=space();span=element("span");span.textContent="Read More";t6=space();div3=element("div");for(let i=0;i<each_blocks_2.length;i+=1){each_blocks_2[i].c();}
t7=space();div4=element("div");for(let i=0;i<each_blocks_1.length;i+=1){each_blocks_1[i].c();}
t8=space();for(let i=0;i<each_blocks.length;i+=1){each_blocks[i].c();}
attr(button0,"class","svelte-1x06u35");attr(button1,"class","carousel-controls_pause-play svelte-1x06u35");attr(button2,"class","svelte-1x06u35");attr(svg2,"width","16");attr(svg2,"height","16");attr(svg2,"viewBox","0 0 16 16");attr(svg2,"fill","#2B2D38");attr(svg2,"xmlns","http://www.w3.org/2000/svg");attr(svg2,"class","svelte-1x06u35");set_style(button3,"margin-right","auto");attr(button3,"class","svelte-1x06u35");attr(div0,"class","carousel-controls-main svelte-1x06u35");attr(span,"class","read-more-button svelte-1x06u35");attr(div1,"class","carousel-controls svelte-1x06u35");attr(div2,"class","carousel-info svelte-1x06u35");attr(div3,"class","carousel-title-wrapper svelte-1x06u35");attr(div4,"class","progress-container svelte-1x06u35");attr(div5,"class","carousel svelte-1x06u35");toggle_class(div5,"mobile",ctx[0]);},m(target,anchor){insert(target,div5,anchor);append(div5,div2);append(div2,div1);append(div1,div0);append(div0,button0);append(div0,t0);append(div0,button1);if(if_block0)if_block0.m(button1,null);append(button1,t1);if(if_block1)if_block1.m(button1,null);append(div0,t2);append(div0,button2);append(div0,t3);append(div0,button3);append(button3,svg2);if(if_block2)if_block2.m(svg2,null);append(svg2,if_block2_anchor);if(if_block3)if_block3.m(svg2,null);append(div1,t4);append(div1,span);append(div5,t6);append(div5,div3);for(let i=0;i<each_blocks_2.length;i+=1){each_blocks_2[i].m(div3,null);}
append(div5,t7);append(div5,div4);for(let i=0;i<each_blocks_1.length;i+=1){each_blocks_1[i].m(div4,null);}
append(div5,t8);for(let i=0;i<each_blocks.length;i+=1){each_blocks[i].m(div5,null);}
if(!mounted){dispose=[listen(button0,"click",ctx[13]),listen(button1,"click",ctx[14]),listen(button2,"click",ctx[15]),listen(button3,"click",ctx[16]),listen(span,"click",ctx[17])];mounted=true;}},p(ctx,_ref){let[dirty]=_ref;if(ctx[2]===true){if(if_block0);else{if_block0=create_if_block_4();if_block0.c();if_block0.m(button1,t1);}}else if(if_block0){if_block0.d(1);if_block0=null;}
if(ctx[2]===false){if(if_block1);else{if_block1=create_if_block_3();if_block1.c();if_block1.m(button1,null);}}else if(if_block1){if_block1.d(1);if_block1=null;}
if(ctx[1]==false){if(if_block2);else{if_block2=create_if_block_2();if_block2.c();if_block2.m(svg2,if_block2_anchor);}}else if(if_block2){if_block2.d(1);if_block2=null;}
if(ctx[1]==true){if(if_block3);else{if_block3=create_if_block_1();if_block3.c();if_block3.m(svg2,null);}}else if(if_block3){if_block3.d(1);if_block3=null;}
if(dirty&28){each_value_2=ctx[3];let i;for(i=0;i<each_value_2.length;i+=1){const child_ctx=get_each_context_2(ctx,each_value_2,i);if(each_blocks_2[i]){each_blocks_2[i].p(child_ctx,dirty);}else{each_blocks_2[i]=create_each_block_2(child_ctx);each_blocks_2[i].c();each_blocks_2[i].m(div3,null);}}
for(;i<each_blocks_2.length;i+=1){each_blocks_2[i].d(1);}
each_blocks_2.length=each_value_2.length;}
if(dirty&540){each_value_1=ctx[3];let i;for(i=0;i<each_value_1.length;i+=1){const child_ctx=get_each_context_1(ctx,each_value_1,i);if(each_blocks_1[i]){each_blocks_1[i].p(child_ctx,dirty);}else{each_blocks_1[i]=create_each_block_1(child_ctx);each_blocks_1[i].c();each_blocks_1[i].m(div4,null);}}
for(;i<each_blocks_1.length;i+=1){each_blocks_1[i].d(1);}
each_blocks_1.length=each_value_1.length;}
if(dirty&92){each_value=ctx[3];let i;for(i=0;i<each_value.length;i+=1){const child_ctx=get_each_context(ctx,each_value,i);if(each_blocks[i]){each_blocks[i].p(child_ctx,dirty);}else{each_blocks[i]=create_each_block(child_ctx);each_blocks[i].c();each_blocks[i].m(div5,null);}}
for(;i<each_blocks.length;i+=1){each_blocks[i].d(1);}
each_blocks.length=each_value.length;}
if(dirty&1){toggle_class(div5,"mobile",ctx[0]);}},i:noop,o:noop,d(detaching){if(detaching)detach(div5);if(if_block0)if_block0.d();if(if_block1)if_block1.d();if(if_block2)if_block2.d();if(if_block3)if_block3.d();destroy_each(each_blocks_2,detaching);destroy_each(each_blocks_1,detaching);destroy_each(each_blocks,detaching);mounted=false;run_all(dispose);}};}
function fixImage(path){return path.replace(/image.vuukle.com(?!\/highres)/,"image.vuukle.com/highres");}
function instance$1($$self,$$props,$$invalidate){let{jsonUrl}=$$props;let{pageTimeout=10000}=$$props;let{mobile=false}=$$props;const dispatch=createEventDispatcher();class Timer{constructor(callback,delay){this.callback=callback;this.remainingTime=delay;this.startTime=new Date();this.timerId;this.start();}
pause(){clearTimeout(this.timerId);this.remainingTime-=new Date()-this.startTime;}
resume(){this.startTime=new Date();clearTimeout(this.timerId);this.timerId=setTimeout(this.callback,this.remainingTime);}
start(){this.timerId=setTimeout(this.callback,this.remainingTime);}
clear(){clearTimeout(this.timerId);}}
let muted=true;let stop=false;var timeout;let realData=[];fetch(jsonUrl).then(function(data){const res=data.json();return res;}).then(function(data){timeout=new Timer(()=>incrementor(true),pageTimeout);const allArticles=data.items.map(x=>{x.articleAvatar=fixImage(x.articleAvatar);if(!/\/$/.test(x.host)&&!/^\//.test(x.uri)){x.uri="/"+x.uri;}
return x;});$$invalidate(3,realData=allArticles.slice(0,allArticles.length>10?10:allArticles.length));dlog("carousel data loaded",realData,allArticles,data);}).catch(function(error){console.error(error);});let currentPage=0;function changeMuteState(){let newValue=!muted;$$invalidate(1,muted=newValue);dispatch("changeMuteState",muted);}
function imageClick(){let link="";if(realData[currentPage].host.includes("vuukle")){link=`news.vuukle.com/${realData[currentPage].uri}`;}else{link=realData[currentPage].host+realData[currentPage].uri;}
dlog("click open",link);const win=window.open("//"+link,"_blank");win.focus();}
function nextSlide(click){if(timeout){timeout.clear();}
$$invalidate(4,currentPage++,currentPage);if(currentPage>=realData.length){$$invalidate(4,currentPage=0);}
if(click){incrementor(false);}}
function prevSlide(click){if(timeout){timeout.clear();}
$$invalidate(4,currentPage--,currentPage);if(currentPage<0){$$invalidate(4,currentPage=realData.length-1);}
if(click){incrementor(false);}}
function incrementor(skip){if(skip){nextSlide(false);}
timeout=new Timer(()=>incrementor(true),pageTimeout);}
function progressLineClick(index){$$invalidate(4,currentPage=index);if(timeout){timeout.clear();}
incrementor(false);}
function pauseOrPlaySlide(){$$invalidate(2,stop=!stop);if(stop){timeout.pause();}else{timeout.resume();}}
const click_handler=function(){prevSlide(true);};const click_handler_1=function(){pauseOrPlaySlide();};const click_handler_2=function(){nextSlide(true);};const click_handler_3=function(){changeMuteState();};const click_handler_4=function(){imageClick();};const click_handler_5=function(i){progressLineClick(i);};const click_handler_6=function(){imageClick();};$$self.$$set=$$props=>{if('jsonUrl'in $$props)$$invalidate(11,jsonUrl=$$props.jsonUrl);if('pageTimeout'in $$props)$$invalidate(12,pageTimeout=$$props.pageTimeout);if('mobile'in $$props)$$invalidate(0,mobile=$$props.mobile);};return[mobile,muted,stop,realData,currentPage,changeMuteState,imageClick,nextSlide,prevSlide,progressLineClick,pauseOrPlaySlide,jsonUrl,pageTimeout,click_handler,click_handler_1,click_handler_2,click_handler_3,click_handler_4,click_handler_5,click_handler_6];}
class Carousel extends SvelteComponent{constructor(options){super();init(this,options,instance$1,create_fragment$1,safe_not_equal,{jsonUrl:11,pageTimeout:12,mobile:0},add_css$1);}}
function add_css(target){append_styles(target,"svelte-14bfdyt",".video-header-wrapper.svelte-14bfdyt.svelte-14bfdyt{width:100%;display:flex;align-items:center;justify-content:space-between;position:absolute;z-index:1;transform:translate(0px, -105%)}.close-block.svelte-14bfdyt.svelte-14bfdyt{background:#e3eeff;border-radius:4px;display:flex;flex-direction:row;align-items:center;padding:5px 7px;cursor:pointer}.close-block.svelte-14bfdyt>span.svelte-14bfdyt{font-weight:500;font-size:12px;line-height:14px;color:#2b2d38;padding:2px 0px 2px 5px;margin-left:5px;border-left:1px solid white}");}
function create_fragment(ctx){let div2;let div0;let t0;let div1;let mounted;let dispose;return{c(){div2=element("div");div0=element("div");t0=space();div1=element("div");div1.innerHTML=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 4L4 12" stroke="#2B2D38" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round"></path><path d="M4 4L12 12" stroke="#2B2D38" stroke-width="1.33333" stroke-linecap="round" stroke-linejoin="round"></path></svg> 
        <span class="svelte-14bfdyt">Ad</span>`;attr(div1,"class","close-block svelte-14bfdyt");attr(div2,"class","video-header-wrapper svelte-14bfdyt");},m(target,anchor){insert(target,div2,anchor);append(div2,div0);append(div2,t0);append(div2,div1);if(!mounted){dispose=listen(div1,"click",ctx[1]);mounted=true;}},p:noop,i:noop,o:noop,d(detaching){if(detaching)detach(div2);mounted=false;dispose();}};}
function instance($$self){const dispatch=createEventDispatcher();const click_handler=()=>dispatch('close');return[dispatch,click_handler];}
class Header extends SvelteComponent{constructor(options){super();init(this,options,instance,create_fragment,safe_not_equal,{},add_css);}}
const carouselSrc='https://api.vuukle.com/api/v1/Articles/getStories?host=';class VuukleVideoPlayer{constructor(config,main){this.config=config;this.main=main;this._video={};}
async _initPlayer(){if(!this.config||!this.config.player||!this.config.player.component){return;}
dlog('start player init');const id=this.config.player.component;let container=document.getElementById(id);if(this.config.player.carousel){this.config.player.videos=[{src:emptyVideo,type:'video/mp4'}];this.config.player.clickToPlay=false;}
if(!container){this.config.player.onlyFloater=this.config.player.onlyFloater||this.config.player.noDivShowFloater;if(!this.config.player.onlyFloater){derr('player element not found',id);return;}else if(this.config.player.onlyFloater){container=document.createElement('div');container.id=id;container.style.display='none';container.style.top='-999px';document.body.appendChild(container);}}
container.style.marginBottom=container.style.marginBottom||this.config.player.marginBottom||'5px';container.style.marginTop=container.style.marginTop||this.config.player.marginTop||'';this._video.muted=false;this._video.started=this.config.player.startTopPage!==false||this.config.player.onlyFloater;this._video.container=container;await insertScriptLoadPromise('//imasdk.googleapis.com/js/sdkloader/ima3.js');const maxWidth='400px';const maxHeight='225px';const video=document.createElement('video');this._video.player=video;video.id=id+'-elem';if(!this.config.player.clickToPlay){this._video.muted=true;video.muted=true;video.setAttribute('muted','');}
video.setAttribute('loop','');video.setAttribute('playsinline','');video.setAttribute('controls','');if(this.config.player.poster){video.setAttribute('poster',this.config.player.poster);}
video.style.width='100%';video.style.height='100%';video.style.maxWidth=maxWidth;video.style.maxHeight=maxHeight;for(const s of this.config.player.videos){const source=document.createElement('source');source.src=s.src;source.type=s.type;video.appendChild(source);}
const adsContainer=document.createElement('div');this._video.adsContainer=adsContainer;adsContainer.id=id+'-ads';adsContainer.style.position='absolute';adsContainer.style.top='0';adsContainer.style.left='0';adsContainer.style.width='100%';adsContainer.style.zIndex=1;adsContainer.style.display='none';const wrapper=document.createElement('div');this._video.wrapper=wrapper;wrapper.id=id+'-wrapper';wrapper.style.position='relative';wrapper.style.willChange='transform';wrapper.style.zIndex=this.config.player.zIndex||10000001;const vHeader=document.createElement('div');this._video.vHeader=vHeader;vHeader.style.display='none';const vHeaderComponent=new Header({target:vHeader,props:{}});vHeaderComponent.$on('close',()=>{this._video.closed=true;this._setPlayerFloat(false);});const vWrap=document.createElement('div');vWrap.id=id+'-wrap';vWrap.style.position='relative';vWrap.style.width='100%';vWrap.style.height='100%';vWrap.style.maxWidth=maxWidth;vWrap.style.maxHeight=maxHeight;vWrap.style.margin='auto';this._setPlayerFloat(false);container.appendChild(wrapper);wrapper.appendChild(vHeader);vWrap.appendChild(video);if(this.config.player.carousel){this._initCarousel(vWrap,id);}
vWrap.appendChild(adsContainer);wrapper.appendChild(vWrap);adsContainer.addEventListener('click',()=>{if(video.paused){video.play();}else{video.pause();}});if(this._video.started){await this._initAdPlayer();}
this._observePlayer();}
_setPlayerFloat(float){if(!this._video.wrapper){derr('set float but wrapper doesn\'t exist');return;}
if(this.config.player.onlyFloater){float=true;}
if(this._video.closed){float=false;}
if(!float&&this.config.player.onlyFloater){this._video.container.style.display='none';return;}
let w,h,rm,bm;this._video.float=float;if(float){if(!this._video.container.style.width){this._video.container.style.width=this._video.container.clientWidth+'px';this._video.customWidth=true;}
if(!this._video.container.style.height){this._video.container.style.height=this._video.container.clientHeight+'px';this._video.customHeight=true;}
this._video.container.style.display='';this._video.container.style.top='';w=this.config.player.floatWidth||400;h=this.config.player.floatHeight||225;rm=this.config.player.rightMargin||20;bm=this.config.player.bottomMargin||20;if(isMobile()){w=this.config.player.mobileFloatWidth||280;h=this.config.player.mobileFloatHeight||160;rm=this.config.player.mobileRightMargin||rm;bm=this.config.player.mobileBottomMargin||bm;}
this._video.vHeader.style.display='block';this._video.wrapper.style.position='fixed';this._video.wrapper.style.right=`${rm}px`;this._video.wrapper.style.bottom=`${bm}px`;this._video.wrapper.style.width=`${w}px`;this._video.wrapper.style.height=`${h}px`;this._video.wrapper.style.zIndex=this.config.player.zIndex||10000001;let scale=(window.innerWidth-rm)/w;if(scale<1){this._video.wrapper.style.transformOrigin='right bottom';this._video.wrapper.style.transform=`scale(${scale})`;}else{this._video.wrapper.style.transformOrigin=null;this._video.wrapper.style.transform=null;}}else{this._video.vHeader.style.display='none';this._video.wrapper.style.position='relative';this._video.wrapper.style.right=null;this._video.wrapper.style.bottom=null;this._video.wrapper.style.width='100%';this._video.wrapper.style.height='100%';this._video.wrapper.style.transformOrigin=null;this._video.wrapper.style.transform=null;this._video.wrapper.style.zIndex=null;if(this._video.customWidth){this._video.container.style.width='';}
if(this._video.customHeight){this._video.container.style.height='';}}
setTimeout(this._playerResize.bind(this),1);}
_observePlayer(){if(!window.IntersectionObserver){dwarn('player observing not supported');this._video.adxView=true;if(!this._video.started){this._video.started=true;this._initAdPlayer();}
return;}
const adxMinViewability=this.config.player.adxMinViewability;let threshold=[0.1,0.3];if(adxMinViewability){threshold.push(adxMinViewability);threshold.sort();}
const options={threshold};const intersectionObserver=new IntersectionObserver(entries=>{if(!this._video.started&&entries[0].isIntersecting){dlog('player observed init');this._video.started=true;this._initAdPlayer();}else if(this._video.started&&this.config.player.docking){this._setPlayerFloat(!entries[0].isIntersecting);}
if(adxMinViewability){const adxView=entries[0].intersectionRatio>adxMinViewability;const adxref=adxView&&!this._video.adxView;this._video.adxView=adxView;if(adxref){this._videoWaterfall();}}},options);intersectionObserver.observe(this._video.container);this._observePlayerResize();}
_observePlayerResize(){this._playerResize();setTimeout(this._playerResize.bind(this),10);}
_initCarousel(adContainer,element){if(element.container){return;}
const id=adContainer.id;const carContainer=document.createElement('div');carContainer.id=id+'-carousel';carContainer.style.position='absolute';carContainer.style.top='0';carContainer.style.left='0';carContainer.style.width='100%';carContainer.style.height='100%';carContainer.style.backgroundColor='whitesmoke';this._video.carousel=new Carousel({target:carContainer,props:{pageTimeout:this.config.player.carouselTimeout||10000,jsonUrl:this.config.player.carouselUrl||carouselSrc+this.main._site,mobile:isMobile()}});this._video.carousel.$on('changeMuteState',event=>{this._video.muted=event.detail;});this._video.carContainer=carContainer;adContainer.appendChild(carContainer);}
async _initAdPlayer(){if(!this.config.player.clickToPlay){this._video.player.setAttribute('autoplay','');}
google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);this._video._adDisplayContainer=new google.ima.AdDisplayContainer(this._video.adsContainer,this._video.player);this._video._adsLoader=new google.ima.AdsLoader(this._video._adDisplayContainer);this._video._adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,evt=>{dlog('player ADS_MANAGER_LOADED');try{this._video._adsManager=evt.getAdsManager(this._video.player);}catch(error){derr('player getAdsManager',error);this._reloadVideoAds();return;}
for(const type of[google.ima.AdErrorEvent.Type.AD_ERROR,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.SKIPPED]){this._video._adsManager.addEventListener(type,this._adEventHandler.bind(this));}
this._loadVideoAds();},false);this._video._adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,evt=>{const err=evt.getError();if(err.getErrorCode()==google.ima.AdError.ErrorCode.VAST_EMPTY_RESPONSE){dwarn('player get empty vast, reload');}else if(err.getErrorCode()==google.ima.AdError.ErrorCode.VAST_LOAD_TIMEOUT){derr('player vast load timeout');}else if(err.getErrorCode()==503){dwarn('player invalid non linear ad response',err.getMessage(),err.getInnerError());}else{derr('player ima ads loader error',err.getErrorCode(),err.getVastErrorCode(),err.getType(),err.getMessage(),err.getInnerError());}
this._reloadVideoAds();},false);this._video.player.addEventListener('play',()=>{const started=this._video.startedPlay;this._video.startedPlay=true;this._loadVideoAds();if(!started){this._videoWaterfall();}});if(this.config.player.clickUrl){this._video.player.addEventListener('click',()=>{window.open(this.config.player.clickUrl);});}
window.addEventListener('resize',()=>{this._setPlayerFloat(this._video.float);});this._video.player.addEventListener('ended',()=>{dlog('player ended');this._reloadVideoAds();});if(this._video.started&&!this.config.player.clickToPlay){this._video.player.play().then(()=>{dlog('player autoplay started');}).catch(e=>{dlog('player autoplay faied',e);});}
if(this.config.player.a9){this._refreshA9Video();}
this._loadVideoAds();this._playerIntervalRefresh();}
_playerIntervalRefresh(){this._videoWaterfall();const refTime=this.config.player.adxRefresh||this.config.player.refresh||this.config.pbcfg.refresh||30000;setTimeout(this._playerIntervalRefresh.bind(this),refTime);}
_adEventHandler(adEvent){const ad=adEvent.getAd?adEvent.getAd():undefined;switch(adEvent.type){case google.ima.AdErrorEvent.Type.AD_ERROR:derr('player ima ads manager AD_ERROR',adEvent.getError());this._reloadVideoAds();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:dlog('player CONTENT_PAUSE_REQUESTED');this._video.adsContainer.style.display='block';this._video.player.pause();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:dlog('player CONTENT_RESUME_REQUESTED');this._video.player.play();this._reloadVideoAds();break;case google.ima.AdEvent.Type.LOADED:dlog('player LOADED','\nLinear:',ad.isLinear(),'\nDuration:',ad.getDuration(),'\nMinDuration:',ad.getMinSuggestedDuration(),'\nSkipTimeOffset:',ad.getSkipTimeOffset(),'\nContentType:',ad.getContentType(),'\nAdSystem:',ad.getAdSystem(),'\nWrapperAdSystems:',ad.getWrapperAdSystems(),'\nAdvertiserName:',ad.getAdvertiserName(),'\nApiFramework:',ad.getApiFramework(),'\nCreativeId:',ad.getCreativeId(),'\nTitle:',ad.getTitle(),'\nDescription:',ad.getDescription(),'\nMedia:',ad.getMediaUrl());if(!ad.isLinear()){this._video.player.play();}
break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:dlog('player ALL_ADS_COMPLETED');this._reloadVideoAds();break;case google.ima.AdEvent.Type.STARTED:{let timeout=(ad.getDuration()||60)+10;dlog('player STARTED timeout=',timeout);this._video.adTimer=setTimeout(()=>{dwarn('video ad reloaded by timeout');if(!this._video.adTimer){return;}
this._reloadVideoAds();},timeout*1000);break;}
case google.ima.AdEvent.Type.COMPLETE:dlog('player COMPLETE');break;case google.ima.AdEvent.Type.SKIPPED:dlog('player SKIPPED');break;}}
_playerResize(){if(!this._video._adsManager){return;}
const width=this._video.player.clientWidth;const height=this._video.player.clientHeight;if(this._video.adH==height&&this._video.adW==width||width==0||height==0){return;}
dlog('player resize',width,height);this._video.adH=height;this._video.adW=width;this._video._adsManager.resize(width,height,google.ima.ViewMode.NORMAL);}
_loadVideoAds(e){if(this._video.adsLoaded||!this._video._adsManager){return;}
if(e&&e.preventDefault){e.preventDefault();}
dlog('player started');if(!this._video._isAdDispContInit){this._video._adDisplayContainer.initialize();this._video._isAdDispContInit=true;}
const width=this._video.player.clientWidth;const height=this._video.player.clientHeight;try{this._video._adsManager.init(width,height,google.ima.ViewMode.NORMAL);this._video._adsManager.start();dlog('player AdsManager started');this._video.adsLoaded=true;}catch(adError){dlog('player AdsManager could not be started now, revert to playing',adError);this._video.player.play().then(()=>{dlog('player autoplay started');}).catch(e=>{dwarn('player autoplay faied',e);});}
if(!this._video.adsLoaded){setTimeout(this._loadVideoAds.bind(this),1000);}}
_videoWaterfall(){if(!this._video._adsLoader){return;}
if(!this._video.startedPlay){dlog('player not played, ignore waterfall');return;}
dlog('player waterfall start request',this._video.inWaterfall);if(this._video.inWaterfall){return;}
let url=this._video.urls?this._video.urls.shift():undefined;if(!url&&(!this.config.player.adxMinViewability||this._video.adxView||this._video.float)){url=this._getNextAdxUrl();}
if(!url){dlog('player no new video urls, waiting for next auction');this._video.inWaterfall=false;return;}
this._video.inWaterfall=true;if(!this._video.player){derr('player: video element not found');return;}
this._loadVideoAds();const adsRequest=new google.ima.AdsRequest();adsRequest.adTagUrl=this._videoMacros(url);adsRequest.setAdWillPlayMuted(this._video.muted);adsRequest.linearAdSlotWidth=this._video.player.clientWidth;adsRequest.linearAdSlotHeight=this._video.player.clientHeight;adsRequest.nonLinearAdSlotWidth=this._video.player.clientWidth;adsRequest.nonLinearAdSlotHeight=this._video.player.clientHeight;adsRequest.vastLoadTimeout=this.config.player.vastLoadTimeout||adsRequest.vastLoadTimeout;dlog('make player dfp request',url,adsRequest.adTagUrl,clone(adsRequest));this._video._adsLoader.requestAds(adsRequest);}
_videoMacros(u){var _this$config$pbcfg,_this$config$pbcfg$co,_this$config$pbcfg$co2,_this$main$_CCPAData,_this$main$_CMPData,_this$main$_CMPData2;let url=location.href;try{url=window.top.location.href;}catch(error){}
let schain='';if((_this$config$pbcfg=this.config.pbcfg)!==null&&_this$config$pbcfg!==void 0&&(_this$config$pbcfg$co=_this$config$pbcfg.config)!==null&&_this$config$pbcfg$co!==void 0&&(_this$config$pbcfg$co2=_this$config$pbcfg$co.schain)!==null&&_this$config$pbcfg$co2!==void 0&&_this$config$pbcfg$co2.config){const s=this.config.pbcfg.config.schain.config;schain=`${s.ver},${s.complete}!`+s.nodes.map(n=>{return `${n.asi},${n.sid},${n.hp},${n.rid||''},${n.name||''},${n.domain||''},${n.ext||''}`.replace(/[,]*$/,'');}).join('!');}
return u.replace(/\[WIDTH_MACRO\]/g,this._video.player.clientWidth).replace(/\[HEIGHT_MACRO\]/g,this._video.player.clientHeight).replace(/\[TIMESTAMP_MACRO\]/g,Date.now()).replace(/\[URL_MACRO\]/g,encodeURIComponent(url)).replace(/\[SCHAIN_MACRO\]/g,encodeURIComponent(schain)).replace(/\[CCPA_MACRO\]/g,((_this$main$_CCPAData=this.main._CCPAData)===null||_this$main$_CCPAData===void 0?void 0:_this$main$_CCPAData.usPrivacy)||'').replace(/\[GDPR_MACRO\]/g,(_this$main$_CMPData=this.main._CMPData)!==null&&_this$main$_CMPData!==void 0&&_this$main$_CMPData.gdprApplies?1:0).replace(/\[CONSENT_MACRO\]/g,((_this$main$_CMPData2=this.main._CMPData)===null||_this$main$_CMPData2===void 0?void 0:_this$main$_CMPData2.consentString)||'');}
_getNextAdxUrl(){const urls=[this.config.player.url];if(this.config.player.urls){urls.push(...this.config.player.urls);}
this._video.adxLastInfo=this._video.adxLastInfo||[];const refTime=this.config.player.adxRefresh||this.config.player.refresh||this.config.pbcfg.refresh||30000;let refUrl;const now=Date.now();let firstRef=now;let refInd=-1;let refInfo;urls.forEach((v,k)=>{let info=this._video.adxLastInfo[k]||{};info.lastRef=info.lastRef||0;if(info.lastRef+refTime<now&&info.lastRef<firstRef){firstRef=info.lastRef;refInd=k;refUrl=v;refInfo=info;}});if(refInd>=0){refInfo.lastRef=now;this._video.adxLastInfo[refInd]=refInfo;}
dlog('player select adx url',refInd,urls,clone(this._video.adxLastInfo));return refUrl;}
_setUrlSearchParams(cpar,t){for(const key in t){if(!Object.prototype.hasOwnProperty.call(t,key)){continue;}
cpar.set(key,t[key]);}
return cpar;}
_handleVideoBids(pbBids){var _this$_video,_this$_video$urls;dlog('_handleVideoBids',pbBids);if(!this.config.player){return;}
let urls=[];if(((_this$_video=this._video)===null||_this$_video===void 0?void 0:(_this$_video$urls=_this$_video.urls)===null||_this$_video$urls===void 0?void 0:_this$_video$urls.length)>0){urls=clone(this._video.urls);}
const videoBids={};for(const id in pbBids){if(!Object.prototype.hasOwnProperty.call(pbBids,id)){continue;}
for(const bid of pbBids[id].bids){if(bid.mediaType=='video'){videoBids[id]=videoBids[id]||[];videoBids[id].push(bid);}}}
this._video.lastRef=this._video.lastRef||1;const ref=this.config.player.refresh||this.config.pbcfg.refresh||30000;const mustRef=ref<Date.now()-this._video.lastRef;if(mustRef){this._video.lastRef=Date.now();}
this.config.pbcfg.adUnits.forEach(unit=>{if(!this.main._isInstream(unit)){return;}
let params=clone(this.config.player.url);const purl=new URL(params);let cpar=new URLSearchParams(purl.searchParams.get('cust_params')||'');let t=this.config.dfp&&this.config.dfp.targetings?this.config.dfp.targetings:{};this._setUrlSearchParams(cpar,t);t=unit.dfp&&unit.dfp.targetings?unit.dfp.targetings:{};this._setUrlSearchParams(cpar,t);purl.searchParams.set('cust_params',cpar.toString());params=purl.toString();if(!(unit.code in videoBids)){return;}
videoBids[unit.code].forEach(bid=>{const url=vuuklehb.adServers.dfp.buildVideoUrl({adUnit:unit,url:params,bid});urls.push(url);});});const newUrls=clone(urls);urls=urls.filter((v,k,a)=>a.indexOf(v)===k);dlog('player _handleVideoBids',mustRef,this._video.requested,clone(videoBids),newUrls,clone(urls));this._video.urls=urls;this._videoWaterfall();}
_refreshA9Video(){var _this$main$apsIframe,_this$main$apsIframe$,_this$main$apsIframe$2;if((_this$main$apsIframe=this.main.apsIframe)!==null&&_this$main$apsIframe!==void 0&&(_this$main$apsIframe$=_this$main$apsIframe.contentWindow)!==null&&_this$main$apsIframe$!==void 0&&(_this$main$apsIframe$2=_this$main$apsIframe$.apstag)!==null&&_this$main$apsIframe$2!==void 0&&_this$main$apsIframe$2.fetchBids){dlog('refresh aps video');const apsSlots=this.config.player.a9.slots.map(x=>({slotID:x,mediaType:'video'}));this.main.apsIframe.contentWindow.apstag.fetchBids({timeout:this.main._getTimeout(),slots:apsSlots},bids=>{dlog('player get aps video bids',bids);if(bids.length==0){return;}
bids.forEach(bid=>{const purl=new URL(this.config.player.a9.url);let cpar=new URLSearchParams(purl.searchParams.get('cust_params')||'');const bpar=new URLSearchParams(bid.qsParams);bpar.forEach((v,k)=>{cpar.set(k,v);});let t=this.config.dfp&&this.config.dfp.targetings?this.config.dfp.targetings:{};this._setUrlSearchParams(cpar,t);purl.searchParams.set('cust_params',cpar.toString());this._video.urls.push(purl.toString());});this._videoWaterfall();});}else{derr('no aps handler (video)');}
const refTime=this.config.player.a9.refresh||this.config.player.refresh||this.config.pbcfg.refresh||30000;setTimeout(this._refreshA9Video.bind(this),refTime);}
_reloadVideoAds(){dlog('player reload ads');if(this._video._adsManager){this._video._adsManager.destroy();this._video._adsManager=null;this._video.adsContainer.style.display='none';}
if(this._video.adTimer){clearTimeout(this._video.adTimer);this._video.adTimer=null;}
this._video._adsLoader.contentComplete();this._video.inWaterfall=false;this._video.adsLoaded=false;this._video.player.play();this._videoWaterfall();}}
return VuukleVideoPlayer;})();