<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Embed</title>
    <base href="/" />
    <style>
      body,
      html {
        margin: 0;
        padding: 0;
      }

      body {
        display: flex;
        flex-direction: column;
        height: 100vh;
        width: 100vw;
        justify-content: flex-end;
        font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto,
          Helvetica Neue, Arial, Noto Sans, sans-serif;
        overflow: hidden;
      }

      #bugherd_toggle {
        font-feature-settings: "tnum";
        font-family: inherit;
        overflow: visible;
        text-transform: none;
        display: inline-block;
        font-weight: 400;
        cursor: pointer;
        touch-action: manipulation;
        font-size: 14px;
        color: rgb(255, 255, 255);
        text-shadow: rgba(0, 0, 0, 0.12) 0px -1px 0px;
        outline: 0px;
        box-shadow: none;
        width: fit-content;
        min-width: 70px;
        position: absolute;
        height: 70px;
        margin: 0px;
        padding: 0px;
        right: 0px;
        border: none;
        background-color: rgb(10, 45, 80);
        border-top-left-radius: 12px;
        border-top-right-radius: 0px;
        border-bottom-right-radius: 0px;
        border-bottom-left-radius: 12px;
        max-width: 180px;
        z-index: 0;
        transition: right 0.4s ease;
      }

      #logo {
        -webkit-text-size-adjust: 100%;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        --antd-wave-shadow-color: #20c0e7;
        --scroll-bar: 0;
        font-feature-settings: "tnum";
        --panel-width: calc(100vw - 70px);
        font-family: inherit;
        text-transform: none;
        line-height: 1.5715;
        font-weight: 400;
        text-align: center;
        cursor: pointer;
        user-select: none;
        font-size: 14px;
        color: #fff;
        text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);
        box-sizing: border-box;
        max-height: 30px;
        min-height: 20px;
        max-width: 100px;
        height: auto;
        vertical-align: middle;
        border: 0;
        margin-right: 14px;
      }

      #loader {
        display: none;
      }

      .toggleIcon {
        width: 18px;
        height: 18px;
        margin: 0 8px;
      }

      #warning {
        display: none;
      }

      #bugherd_toggle.error #warning,
      #bugherd_toggle.unauthenticated #warning,
      #bugherd_toggle.noAccess #warning,
      #bugherd_toggle.loading #loader {
        display: block;
      }

      #bugherd_toggle.error #icon,
      #bugherd_toggle.loading #icon,
      #bugherd_toggle.noAccess #icon,
      #bugherd_toggle.unauthenticated #icon {
        display: none;
      }

      .tooltip {
        width: 210px;
        background: #333333;
        color: #ffffff;
        text-align: center;
        padding: 10px 20px 10px 20px;
        border-radius: 10px;
        bottom: calc(100%);
        right: -40px;
        position: absolute;
        display: none;
      }

      .tooltip a {
        color: #fff;
      }

      .triangle {
        line-height: 1.5;
        font-family: Montserrat, sans-serif;
        --bg-opacity: 1;
        text-align: center;
        box-sizing: border-box;
        border-style: solid;
        border-width: 0px 6px 6px;
        border-color: transparent transparent #333333;
        position: absolute;
        transform: rotate(180deg);
        bottom: -6px;
        right: 52px;
      }

      .iconContainer {
        position: relative;
        display: flex;
        padding: 10px 0;
      }

      #bugherd_toggle.error .iconContainer:hover .tooltip.cookies {
        display: block;
      }

      #bugherd_toggle.unauthenticated .iconContainer:hover .tooltip.auth {
        display: block;
      }

      #bugherd_toggle.noAccess .iconContainer:hover .tooltip.access {
        display: block;
      }

      #loader path {
        -webkit-animation-name: fade;
        animation-name: fade;
        -webkit-animation-duration: 1s;
        animation-duration: 1s;
        -webkit-animation-iteration-count: infinite;
        animation-iteration-count: infinite;
      }

      #loader path:nth-child(1) {
        -webkit-animation-delay: 0;
        animation-delay: 0;
      }

      #loader path:nth-child(2) {
        -webkit-animation-delay: 0.125s;
        animation-delay: 0.125s;
      }

      #loader path:nth-child(3) {
        -webkit-animation-delay: 0.25s;
        animation-delay: 0.25s;
      }

      #loader path:nth-child(4) {
        -webkit-animation-delay: 0.375s;
        animation-delay: 0.375s;
      }

      #loader path:nth-child(5) {
        -webkit-animation-delay: 0.5s;
        animation-delay: 0.5s;
      }

      #loader path:nth-child(6) {
        -webkit-animation-delay: 0.625s;
        animation-delay: 0.625s;
      }

      #loader path:nth-child(7) {
        -webkit-animation-delay: 0.75s;
        animation-delay: 0.75s;
      }

      #loader path:nth-child(8) {
        -webkit-animation-delay: 0.875s;
        animation-delay: 0.875s;
      }

      @-webkit-keyframes fade {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fade {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <button id="bugherd_toggle">
      <div
        style="
          -webkit-text-size-adjust: 100%;
          -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
          --antd-wave-shadow-color: #20c0e7;
          --scroll-bar: 0;
          font-feature-settings: 'tnum';
          --panel-width: calc(100vw - 70px);
          font-family: inherit;
          text-transform: none;
          line-height: 1.5715;
          font-weight: 400;
          text-align: center;
          cursor: pointer;
          user-select: none;
          font-size: 14px;
          color: #fff;
          text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.12);
          box-sizing: border-box;
          background: #0a2d50;
          display: flex;
          justify-content: space-evenly;
          align-items: center;
        "
      >
        <span class="iconContainer"
          ><svg
            class="toggleIcon"
            width="16"
            height="16"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g
              id="loader"
              fill-rule="nonzero"
              stroke="#FFF"
              stroke-linecap="round"
              stroke-width="1.6"
              transform="translate(1 1)"
            >
              <path
                d="M8 0v3.2"
                id="Path"
                stroke="#FFFFFF"
                stroke-width="1.6"
                stroke-linecap="round"
                fill-rule="nonzero"
              ></path>
              <path
                d="M11.392 4.608l2.264-2.264"
                id="Path"
                stroke="#FFFFFF"
                stroke-width="1.6"
                stroke-linecap="round"
                fill-rule="nonzero"
              ></path>
              <path
                d="M12.8 8H16"
                id="Path"
                stroke="#FFFFFF"
                stroke-width="1.6"
                stroke-linecap="round"
                fill-rule="nonzero"
              ></path>
              <path
                d="M11.392 11.392l2.264 2.264"
                id="Path"
                stroke="#FFFFFF"
                stroke-width="1.6"
                stroke-linecap="round"
                fill-rule="nonzero"
              ></path>
              <path
                d="M8 12.8V16"
                id="Path"
                stroke="#FFFFFF"
                stroke-width="1.6"
                stroke-linecap="round"
                fill-rule="nonzero"
              ></path>
              <path
                d="M2.344 13.656l2.264-2.264"
                id="Path"
                stroke="#FFFFFF"
                stroke-width="1.6"
                stroke-linecap="round"
                fill-rule="nonzero"
              ></path>
              <path
                d="M0 8h3.2"
                id="Path"
                stroke="#FFFFFF"
                stroke-width="1.6"
                stroke-linecap="round"
                fill-rule="nonzero"
              ></path>
              <path
                d="M2.344 2.344l2.264 2.264"
                id="Path"
                stroke="#FFFFFF"
                stroke-width="1.6"
                stroke-linecap="round"
                fill-rule="nonzero"
              ></path>
            </g>
            <g
              id="Page-1"
              stroke="none"
              stroke-width="1"
              fill="none"
              fill-rule="evenodd"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <g transform="translate(1 1)">
                <path
                  id="icon"
                  stroke="#FFF"
                  stroke-width="2"
                  d="M10 13 4 7l6-6"
                ></path>
                <g id="warning" stroke="#F7BF00" stroke-width="1.4">
                  <circle id="Oval" cx="7" cy="7" r="7" fill="#F7BF00"></circle>
                  <path
                    id="Path"
                    d="M7 4.2V7"
                    fill="#0C2E4F"
                    stroke="#0C2E4F"
                  ></path>
                  <path
                    id="Path"
                    d="M7 9.8h.007"
                    fill="#0C2E4F"
                    stroke="#0C2E4F"
                  ></path>
                </g>
              </g>
            </g>
          </svg>
          <div class="tooltip cookies">
            <span class="triangle"></span>
            We couldn't access your cookies, please click the tab again to approve access.
            (<a
              href="https://support.bugherd.com/hc/en-us/articles/4410370902927"
              target="_blank"
              onclick="event.stopPropagation();"
              >why?</a
            >)
          </div>

          <div class="tooltip auth">
            <span class="triangle"></span>
            Click here to login
          </div>

          <div class="tooltip access">
            <span class="triangle"></span>
            You don't have access to this project. (<a
              href="https://support.bugherd.com/hc/en-us/articles/4467525836815"
              target="_blank"
              onclick="event.stopPropagation();"
              >why?</a
            >)
          </div>
        </span>

        <img
          src="/assets/bh_logo_short-1d6af89eca7e694074a6e0bd9201111a89f1683346b813c99cd5b395cf7d7e23.png"
          id="logo"
        />
      </div>
    </button>
    <script src="/embed.js?apikey=eflcre7dc7a6ny015hd1nw"></script>
  </body>
</html>
is.buffer.length>=this.maxQueueSize&&this.flush()},p.prototype.flush=function(){this.sink(this.buffer),this.buffer=[],this.timer.stop()},p}();u.DefaultEventQueue=v},22708:(k,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.areEventContextsEqual=void 0;function i(o,c){var l=o.context,a=c.context;return l.accountId===a.accountId&&l.projectId===a.projectId&&l.clientName===a.clientName&&l.clientVersion===a.clientVersion&&l.revision===a.revision&&l.anonymizeIP===a.anonymizeIP&&l.botFiltering===a.botFiltering}u.areEventContextsEqual=i},41312:function(k,u,i){var o=this&&this.__createBinding||(Object.create?function(l,a,v,p){p===void 0&&(p=v),Object.defineProperty(l,p,{enumerable:!0,get:function(){return a[v]}})}:function(l,a,v,p){p===void 0&&(p=v),l[p]=a[v]}),c=this&&this.__exportStar||function(l,a){for(var v in l)v!=="default"&&!Object.prototype.hasOwnProperty.call(a,v)&&o(a,l,v)};Object.defineProperty(u,"__esModule",{value:!0}),c(i(22708),u),c(i(20914),u),c(i(54820),u),c(i(94978),u),c(i(16913),u),c(i(8988),u),c(i(36828),u)},94978:(k,u)=>{Object.defineProperty(u,"__esModule",{value:!0})},16913:function(k,u,i){var o=this&&this.__extends||function(){var f=function(_,R){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,I){h.__proto__=I}||function(h,I){for(var P in I)Object.prototype.hasOwnProperty.call(I,P)&&(h[P]=I[P])},f(_,R)};return function(_,R){f(_,R);function h(){this.constructor=_}_.prototype=R===null?Object.create(R):(h.prototype=R.prototype,new h)}}();Object.defineProperty(u,"__esModule",{value:!0}),u.LocalStoragePendingEventsDispatcher=u.PendingEventsDispatcher=void 0;var c=i(37234),l=i(19996),a=i(61055),v=c.getLogger("EventProcessor"),p=function(){function f(_){var R=_.eventDispatcher,h=_.store;this.dispatcher=R,this.store=h}return f.prototype.dispatchEvent=function(_,R){this.send({uuid:a.generateUUID(),timestamp:a.getTimestamp(),request:_},R)},f.prototype.sendPendingEvents=function(){var _=this,R=this.store.values();v.debug("Sending %s pending events from previous page",R.length),R.forEach(function(h){try{_.send(h,function(){})}catch(I){}})},f.prototype.send=function(_,R){var h=this;this.store.set(_.uuid,_),this.dispatcher.dispatchEvent(_.request,function(I){h.store.remove(_.uuid),R(I)})},f}();u.PendingEventsDispatcher=p;var m=function(f){o(_,f);function _(R){var h=R.eventDispatcher;return f.call(this,{eventDispatcher:h,store:new l.LocalStorageStore({maxValues:100,key:"fs_optly_pending_events"})})||this}return _}(p);u.LocalStoragePendingEventsDispatcher=m},19996:(k,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.LocalStorageStore=void 0;var o=i(61055),c=i(37234),l=c.getLogger("EventProcessor"),a=function(){function v(p){var m=p.key,f=p.maxValues,_=f===void 0?1e3:f;this.LS_KEY=m,this.maxValues=_}return v.prototype.get=function(p){return this.getMap()[p]||null},v.prototype.set=function(p,m){var f=this.getMap();f[p]=m,this.replace(f)},v.prototype.remove=function(p){var m=this.getMap();delete m[p],this.replace(m)},v.prototype.values=function(){return o.objectValues(this.getMap())},v.prototype.clear=function(){this.replace({})},v.prototype.replace=function(p){try{window.localStorage&&localStorage.setItem(this.LS_KEY,JSON.stringify(p)),this.clean()}catch(m){l.error(m)}},v.prototype.clean=function(){var p=this.getMap(),m=Object.keys(p),f=m.length-this.maxValues;if(!(f<1)){var _=m.map(function(h){return{key:h,value:p[h]}});_.sort(function(h,I){return h.value.timestamp-I.value.timestamp});for(var R=0;R<f;R++)delete p[_[R].key];this.replace(p)}},v.prototype.getMap=function(){try{var p=window.localStorage&&localStorage.getItem(this.LS_KEY);if(p)return JSON.parse(p)||{}}catch(m){l.error(m)}return{}},v}();u.LocalStorageStore=a},47070:(k,u)=>{Object.defineProperty(u,"__esModule",{value:!0});var i=function(){function o(){this.reqsInFlightCount=0,this.reqsCompleteResolvers=[]}return o.prototype.trackRequest=function(c){var l=this;this.reqsInFlightCount++;var a=function(){l.reqsInFlightCount--,l.reqsInFlightCount===0&&(l.reqsCompleteResolvers.forEach(function(v){return v()}),l.reqsCompleteResolvers=[])};c.then(a,a)},o.prototype.onRequestsComplete=function(){var c=this;return new Promise(function(l){c.reqsInFlightCount===0?l():c.reqsCompleteResolvers.push(l)})},o}();u.default=i},8988:function(k,u){var i=this&&this.__assign||function(){return i=Object.assign||function(h){for(var I,P=1,O=arguments.length;P<O;P++){I=arguments[P];for(var g in I)Object.prototype.hasOwnProperty.call(I,g)&&(h[g]=I[g])}return h},i.apply(this,arguments)};Object.defineProperty(u,"__esModule",{value:!0}),u.formatEvents=u.buildConversionEventV1=u.buildImpressionEventV1=u.makeBatchedEventV1=void 0;var o="campaign_activated",c="custom",l="$opt_bot_filtering";function a(h){var I=[],P=h[0];return h.forEach(function(O){if(O.type==="conversion"||O.type==="impression"){var g=m(O);O.type==="impression"?g.snapshots.push(p(O)):O.type==="conversion"&&g.snapshots.push(v(O)),I.push(g)}}),{client_name:P.context.clientName,client_version:P.context.clientVersion,account_id:P.context.accountId,project_id:P.context.projectId,revision:P.context.revision,anonymize_ip:P.context.anonymizeIP,enrich_decisions:!0,visitors:I}}u.makeBatchedEventV1=a;function v(h){var I=i({},h.tags);delete I.revenue,delete I.value;var P={entity_id:h.event.id,key:h.event.key,timestamp:h.timestamp,uuid:h.uuid};return h.tags&&(P.tags=h.tags),h.value!=null&&(P.value=h.value),h.revenue!=null&&(P.revenue=h.revenue),{events:[P]}}function p(h){var I,P,O=h.layer,g=h.experiment,w=h.variation,J=h.ruleKey,G=h.flagKey,N=h.ruleType,Y=h.enabled,A=O?O.id:null,C=(I=g==null?void 0:g.id)!==null&&I!==void 0?I:"",q=(P=w==null?void 0:w.id)!==null&&P!==void 0?P:"",oe=w?w.key:"";return{decisions:[{campaign_id:A,experiment_id:C,variation_id:q,metadata:{flag_key:G,rule_key:J,rule_type:N,variation_key:oe,enabled:Y}}],events:[{entity_id:A,timestamp:h.timestamp,key:o,uuid:h.uuid}]}}function m(h){var I={snapshots:[],visitor_id:h.user.id,attributes:[]};return h.user.attributes.forEach(function(P){I.attributes.push({entity_id:P.entityId,key:P.key,type:"custom",value:P.value})}),typeof h.context.botFiltering=="boolean"&&I.attributes.push({entity_id:l,key:l,type:c,value:h.context.botFiltering}),I}function f(h){var I=m(h);return I.snapshots.push(p(h)),{client_name:h.context.clientName,client_version:h.context.clientVersion,account_id:h.context.accountId,project_id:h.context.projectId,revision:h.context.revision,anonymize_ip:h.context.anonymizeIP,enrich_decisions:!0,visitors:[I]}}u.buildImpressionEventV1=f;function _(h){var I=m(h);return I.snapshots.push(v(h)),{client_name:h.context.clientName,client_version:h.context.clientVersion,account_id:h.context.accountId,project_id:h.context.projectId,revision:h.context.revision,anonymize_ip:h.context.anonymizeIP,enrich_decisions:!0,visitors:[I]}}u.buildConversionEventV1=_;function R(h){return{url:"https://logx.optimizely.com/v1/events",httpVerb:"POST",params:a(h)}}u.formatEvents=R},36828:function(k,u,i){var o=this&&this.__awaiter||function(h,I,P,O){function g(w){return w instanceof P?w:new P(function(J){J(w)})}return new(P||(P=Promise))(function(w,J){function G(A){try{Y(O.next(A))}catch(C){J(C)}}function N(A){try{Y(O.throw(A))}catch(C){J(C)}}function Y(A){A.done?w(A.value):g(A.value).then(G,N)}Y((O=O.apply(h,I||[])).next())})},c=this&&this.__generator||function(h,I){var P={label:0,sent:function(){if(w[0]&1)throw w[1];return w[1]},trys:[],ops:[]},O,g,w,J;return J={next:G(0),throw:G(1),return:G(2)},typeof Symbol=="function"&&(J[Symbol.iterator]=function(){return this}),J;function G(Y){return function(A){return N([Y,A])}}function N(Y){if(O)throw new TypeError("Generator is already executing.");for(;P;)try{if(O=1,g&&(w=Y[0]&2?g.return:Y[0]?g.throw||((w=g.return)&&w.call(g),0):g.next)&&!(w=w.call(g,Y[1])).done)return w;switch(g=0,w&&(Y=[Y[0]&2,w.value]),Y[0]){case 0:case 1:w=Y;break;case 4:return P.label++,{value:Y[1],done:!1};case 5:P.label++,g=Y[1],Y=[0];continue;case 7:Y=P.ops.pop(),P.trys.pop();continue;default:if(w=P.trys,!(w=w.length>0&&w[w.length-1])&&(Y[0]===6||Y[0]===2)){P=0;continue}if(Y[0]===3&&(!w||Y[1]>w[0]&&Y[1]<w[3])){P.label=Y[1];break}if(Y[0]===6&&P.label<w[1]){P.label=w[1],w=Y;break}if(w&&P.label<w[2]){P.label=w[2],P.ops.push(Y);break}w[2]&&P.ops.pop(),P.trys.pop();continue}Y=I.call(h,P)}catch(A){Y=[6,A],g=0}finally{O=w=0}if(Y[0]&5)throw Y[1];return{value:Y[0]?Y[1]:void 0,done:!0}}},l=this&&this.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(u,"__esModule",{value:!0}),u.LogTierV1EventProcessor=void 0;var a=i(37234),v=i(20914),p=l(i(47070)),m=i(22708),f=i(8988),_=a.getLogger("LogTierV1EventProcessor"),R=function(){function h(I){var P=I.dispatcher,O=I.flushInterval,g=O===void 0?v.DEFAULT_FLUSH_INTERVAL:O,w=I.batchSize,J=w===void 0?v.DEFAULT_BATCH_SIZE:w,G=I.notificationCenter;this.dispatcher=P,this.notificationCenter=G,this.requestTracker=new p.default,g=v.validateAndGetFlushInterval(g),J=v.validateAndGetBatchSize(J),this.queue=v.getQueue(J,g,this.drainQueue.bind(this),m.areEventContextsEqual)}return h.prototype.drainQueue=function(I){var P=this,O=new Promise(function(g){if(_.debug("draining queue with %s events",I.length),I.length===0){g();return}var w=f.formatEvents(I);P.dispatcher.dispatchEvent(w,function(){g()}),v.sendEventNotification(P.notificationCenter,w)});return this.requestTracker.trackRequest(O),O},h.prototype.process=function(I){this.queue.enqueue(I)},h.prototype.stop=function(){try{return this.queue.stop(),this.requestTracker.onRequestsComplete()}catch(I){_.error('Error stopping EventProcessor: "%s"',I.message,I)}return Promise.resolve()},h.prototype.start=function(){return o(this,void 0,void 0,function(){return c(this,function(I){return this.queue.start(),[2]})})},h}();u.LogTierV1EventProcessor=R},70885:(k,u)=>{Object.defineProperty(u,"__esModule",{value:!0});var i=function(){function v(){}return v.prototype.handleError=function(p){},v}();u.NoopErrorHandler=i;var o=new i;function c(v){o=v}u.setErrorHandler=c;function l(){return o}u.getErrorHandler=l;function a(){o=new i}u.resetErrorHandler=a},37234:(k,u,i)=>{function o(c){for(var l in c)u.hasOwnProperty(l)||(u[l]=c[l])}Object.defineProperty(u,"__esModule",{value:!0}),o(i(70885)),o(i(30503)),o(i(47955))},47955:function(k,u,i){var o=this&&this.__spreadArrays||function(){for(var G=0,N=0,Y=arguments.length;N<Y;N++)G+=arguments[N].length;for(var A=Array(G),C=0,N=0;N<Y;N++)for(var q=arguments[N],oe=0,ye=q.length;oe<ye;oe++,C++)A[C]=q[oe];return A};Object.defineProperty(u,"__esModule",{value:!0});var c=i(70885),l=i(61055),a=i(30503),v={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4};function p(G){return typeof G!="string"||(G=G.toUpperCase(),G==="WARN"&&(G="WARNING"),!v[G])?G:v[G]}var m=function(){function G(){this.defaultLoggerFacade=new h,this.loggers={}}return G.prototype.getLogger=function(N){return N?(this.loggers[N]||(this.loggers[N]=new h({messagePrefix:N})),this.loggers[N]):this.defaultLoggerFacade},G}(),f=function(){function G(N){N===void 0&&(N={}),this.logLevel=a.LogLevel.NOTSET,N.logLevel!==void 0&&l.isValidEnum(a.LogLevel,N.logLevel)&&this.setLogLevel(N.logLevel),this.logToConsole=N.logToConsole!==void 0?!!N.logToConsole:!0,this.prefix=N.prefix!==void 0?N.prefix:"[OPTIMIZELY]"}return G.prototype.log=function(N,Y){if(!(!this.shouldLog(N)||!this.logToConsole)){var A=this.prefix+" - "+this.getLogLevelName(N)+" "+this.getTime()+" "+Y;this.consoleLog(N,[A])}},G.prototype.setLogLevel=function(N){N=p(N),!l.isValidEnum(a.LogLevel,N)||N===void 0?this.logLevel=a.LogLevel.ERROR:this.logLevel=N},G.prototype.getTime=function(){return new Date().toISOString()},G.prototype.shouldLog=function(N){return N>=this.logLevel},G.prototype.getLogLevelName=function(N){switch(N){case a.LogLevel.DEBUG:return"DEBUG";case a.LogLevel.INFO:return"INFO ";case a.LogLevel.WARNING:return"WARN ";case a.LogLevel.ERROR:return"ERROR";default:return"NOTSET"}},G.prototype.consoleLog=function(N,Y){switch(N){case a.LogLevel.DEBUG:console.log.apply(console,Y);break;case a.LogLevel.INFO:console.info.apply(console,Y);break;case a.LogLevel.WARNING:console.warn.apply(console,Y);break;case a.LogLevel.ERROR:console.error.apply(console,Y);break;default:console.log.apply(console,Y)}},G}();u.ConsoleLogHandler=f;var _=a.LogLevel.NOTSET,R=null,h=function(){function G(N){N===void 0&&(N={}),this.messagePrefix="",N.messagePrefix&&(this.messagePrefix=N.messagePrefix)}return G.prototype.log=function(N,Y){for(var A=[],C=2;C<arguments.length;C++)A[C-2]=arguments[C];this.internalLog(p(N),{message:Y,splat:A})},G.prototype.info=function(N){for(var Y=[],A=1;A<arguments.length;A++)Y[A-1]=arguments[A];this.namedLog(a.LogLevel.INFO,N,Y)},G.prototype.debug=function(N){for(var Y=[],A=1;A<arguments.length;A++)Y[A-1]=arguments[A];this.namedLog(a.LogLevel.DEBUG,N,Y)},G.prototype.warn=function(N){for(var Y=[],A=1;A<arguments.length;A++)Y[A-1]=arguments[A];this.namedLog(a.LogLevel.WARNING,N,Y)},G.prototype.error=function(N){for(var Y=[],A=1;A<arguments.length;A++)Y[A-1]=arguments[A];this.namedLog(a.LogLevel.ERROR,N,Y)},G.prototype.format=function(N){return(this.messagePrefix?this.messagePrefix+": ":"")+l.sprintf.apply(void 0,o([N.message],N.splat))},G.prototype.internalLog=function(N,Y){R&&(N<_||(R.log(N,this.format(Y)),Y.error&&Y.error instanceof Error&&c.getErrorHandler().handleError(Y.error)))},G.prototype.namedLog=function(N,Y,A){var C;if(Y instanceof Error){C=Y,Y=C.message,this.internalLog(N,{error:C,message:Y,splat:A});return}if(A.length===0){this.internalLog(N,{message:Y,splat:A});return}var q=A[A.length-1];q instanceof Error&&(C=q,A.splice(-1)),this.internalLog(N,{message:Y,error:C,splat:A})},G}(),I=new m;function P(G){return I.getLogger(G)}u.getLogger=P;function O(G){R=G}u.setLogHandler=O;function g(G){G=p(G),!l.isValidEnum(a.LogLevel,G)||G===void 0?_=a.LogLevel.ERROR:_=G}u.setLogLevel=g;function w(){return _}u.getLogLevel=w;function J(){I=new m,_=a.LogLevel.NOTSET}u.resetLogger=J},30503:(k,u)=>{Object.defineProperty(u,"__esModule",{value:!0});var i;(function(o){o[o.NOTSET=0]="NOTSET",o[o.DEBUG=1]="DEBUG",o[o.INFO=2]="INFO",o[o.WARNING=3]="WARNING",o[o.ERROR=4]="ERROR"})(i=u.LogLevel||(u.LogLevel={}))},61055:(k,u,i)=>{Object.defineProperty(u,"__esModule",{value:!0});var o=i(95876);function c(){return o.v4()}u.generateUUID=c;function l(){return new Date().getTime()}u.getTimestamp=l;function a(I,P){for(var O=!1,g=Object.keys(I),w=0;w<g.length;w++)if(P===I[g[w]]){O=!0;break}return O}u.isValidEnum=a;function v(I,P){var O={};return I.forEach(function(g){var w=P(g);O[w]=O[w]||[],O[w].push(g)}),p(O)}u.groupBy=v;function p(I){return Object.keys(I).map(function(P){return I[P]})}u.objectValues=p;function m(I){return Object.keys(I).map(function(P){return[P,I[P]]})}u.objectEntries=m;function f(I,P){for(var O,g=0,w=I;g<w.length;g++){var J=w[g];if(P(J)){O=J;break}}return O}u.find=f;function _(I,P){var O={};return I.forEach(function(g){var w=P(g);O[w]=g}),O}u.keyBy=_;function R(I){for(var P=[],O=1;O<arguments.length;O++)P[O-1]=arguments[O];var g=0;return I.replace(/%s/g,function(){var w=P[g++],J=typeof w;return J==="function"?w():J==="string"?w:String(w)})}u.sprintf=R;var h;(function(I){I.ACTIVATE="ACTIVATE:experiment, user_id,attributes, variation, event",I.DECISION="DECISION:type, userId, attributes, decisionInfo",I.LOG_EVENT="LOG_EVENT:logEvent",I.OPTIMIZELY_CONFIG_UPDATE="OPTIMIZELY_CONFIG_UPDATE",I.TRACK="TRACK:event_key, user_id, attributes, event_tags, event"})(h=u.NOTIFICATION_TYPES||(u.NOTIFICATION_TYPES={}))},95876:(k,u,i)=>{var o=i(88735),c=i(3480),l=c;l.v1=o,l.v4=c,k.exports=l},40876:k=>{for(var u=[],i=0;i<256;++i)u[i]=(i+256).toString(16).substr(1);function o(c,l){var a=l||0,v=u;return[v[c[a++]],v[c[a++]],v[c[a++]],v[c[a++]],"-",v[c[a++]],v[c[a++]],"-",v[c[a++]],v[c[a++]],"-",v[c[a++]],v[c[a++]],"-",v[c[a++]],v[c[a++]],v[c[a++]],v[c[a++]],v[c[a++]],v[c[a++]]].join("")}k.exports=o},28778:k=>{var u=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(u){var i=new Uint8Array(16);k.exports=function(){return u(i),i}}else{var o=new Array(16);k.exports=function(){for(var l=0,a;l<16;l++)l&3||(a=Math.random()*4294967296),o[l]=a>>>((l&3)<<3)&255;return o}}},88735:(k,u,i)=>{var o=i(28778),c=i(40876),l,a,v=0,p=0;function m(f,_,R){var h=_&&R||0,I=_||[];f=f||{};var P=f.node||l,O=f.clockseq!==void 0?f.clockseq:a;if(P==null||O==null){var g=o();P==null&&(P=l=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),O==null&&(O=a=(g[6]<<8|g[7])&16383)}var w=f.msecs!==void 0?f.msecs:new Date().getTime(),J=f.nsecs!==void 0?f.nsecs:p+1,G=w-v+(J-p)/1e4;if(G<0&&f.clockseq===void 0&&(O=O+1&16383),(G<0||w>v)&&f.nsecs===void 0&&(J=0),J>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=w,p=J,a=O,w+=122192928e5;var N=((w&268435455)*1e4+J)%4294967296;I[h++]=N>>>24&255,I[h++]=N>>>16&255,I[h++]=N>>>8&255,I[h++]=N&255;var Y=w/4294967296*1e4&268435455;I[h++]=Y>>>8&255,I[h++]=Y&255,I[h++]=Y>>>24&15|16,I[h++]=Y>>>16&255,I[h++]=O>>>8|128,I[h++]=O&255;for(var A=0;A<6;++A)I[h+A]=P[A];return _||c(I)}k.exports=m},3480:(k,u,i)=>{var o=i(28778),c=i(40876);function l(a,v,p){var m=v&&p||0;typeof a=="string"&&(v=a==="binary"?new Array(16):null,a=null),a=a||{};var f=a.random||(a.rng||o)();if(f[6]=f[6]&15|64,f[8]=f[8]&63|128,v)for(var _=0;_<16;++_)v[m+_]=f[_];return v||c(f)}k.exports=l},92577:(k,u,i)=>{i.r(u),i.d(u,{OptimizelyDecideOption:()=>Ce,__internalResetRetryState:()=>Mr,createInstance:()=>Ur,default:()=>bn,enums:()=>et,errorHandler:()=>Z,eventDispatcher:()=>D,logging:()=>Ne,setLogLevel:()=>o.setLogLevel,setLogger:()=>o.setLogHandler});var o=i(37234),c=i.n(o),l=i(41312),a=i.n(l),v=i(4336),p=i.n(v),m=i(30860),f=i.n(m),_=i(55856);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var R=function(){return R=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var d in t)Object.prototype.hasOwnProperty.call(t,d)&&(e[d]=t[d])}return e},R.apply(this,arguments)};function h(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),s=0,e=0;e<t;e++)for(var d=arguments[e],L=0,W=d.length;L<W;L++,s++)n[s]=d[L];return n}var I=Math.pow(2,53);function P(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];if(!r)return{};if(typeof Object.assign=="function")return Object.assign.apply(Object,h([r],e));for(var n=Object(r),s=0;s<e.length;s++){var d=e[s];if(d!=null)for(var L in d)Object.prototype.hasOwnProperty.call(d,L)&&(n[L]=d[L])}return n}function O(){return Math.round(new Date().getTime())}function g(r){return typeof r=="number"&&Math.abs(r)<=I}function w(r,e){return r?ye(r,function(t){return t[e]}):{}}function J(r){return typeof r=="number"}function G(){return p()()}function N(){return new Date().getTime()}function Y(r,e){for(var t=!1,n=Object.keys(r),s=0;s<n.length;s++)if(e===r[n[s]]){t=!0;break}return t}function A(r,e){var t={};return r.forEach(function(n){var s=e(n);t[s]=t[s]||[],t[s].push(n)}),C(t)}function C(r){return Object.keys(r).map(function(e){return r[e]})}function q(r){return Object.keys(r).map(function(e){return[e,r[e]]})}function oe(r,e){for(var t,n=0,s=r;n<s.length;n++){var d=s[n];if(e(d)){t=d;break}}return t}function ye(r,e){var t={};return r.forEach(function(n){var s=e(n);t[s]=n}),t}function ee(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];var n=0;return r.replace(/%s/g,function(){var s=e[n++],d=typeof s;return d==="function"?s():d==="string"?s:String(s)})}var ve={assign:P,currentTimestamp:O,isSafeInteger:g,keyBy:w,uuid:G,isNumber:J,getTimestamp:N,isValidEnum:Y,groupBy:A,objectValues:C,objectEntries:q,find:oe,keyByUtil:ye,sprintf:ee},E={NOTSET:0,DEBUG:1,INFO:2,WARNING:3,ERROR:4},H={CONDITION_EVALUATOR_ERROR:"%s: Error evaluating audience condition of type %s: %s",DATAFILE_AND_SDK_KEY_MISSING:"%s: You must provide at least one of sdkKey or datafile. Cannot start Optimizely",EXPERIMENT_KEY_NOT_IN_DATAFILE:"%s: Experiment key %s is not in datafile.",FEATURE_NOT_IN_DATAFILE:"%s: Feature key %s is not in datafile.",IMPROPERLY_FORMATTED_EXPERIMENT:"%s: Experiment key %s is improperly formatted.",INVALID_ATTRIBUTES:"%s: Provided attributes are in an invalid format.",INVALID_BUCKETING_ID:"%s: Unable to generate hash for bucketing ID %s: %s",INVALID_DATAFILE:"%s: Datafile is invalid - property %s: %s",INVALID_DATAFILE_MALFORMED:"%s: Datafile is invalid because it is malformed.",INVALID_CONFIG:"%s: Provided Optimizely config is in an invalid format.",INVALID_JSON:"%s: JSON object is not valid.",INVALID_ERROR_HANDLER:'%s: Provided "errorHandler" is in an invalid format.',INVALID_EVENT_DISPATCHER:'%s: Provided "eventDispatcher" is in an invalid format.',INVALID_EVENT_TAGS:"%s: Provided event tags are in an invalid format.",INVALID_EXPERIMENT_KEY:"%s: Experiment key %s is not in datafile. It is either invalid, paused, or archived.",INVALID_EXPERIMENT_ID:"%s: Experiment ID %s is not in datafile.",INVALID_GROUP_ID:"%s: Group ID %s is not in datafile.",INVALID_LOGGER:'%s: Provided "logger" is in an invalid format.',INVALID_ROLLOUT_ID:"%s: Invalid rollout ID %s attached to feature %s",INVALID_USER_ID:"%s: Provided user ID is in an invalid format.",INVALID_USER_PROFILE_SERVICE:"%s: Provided user profile service instance is in an invalid format: %s.",NO_DATAFILE_SPECIFIED:"%s: No datafile specified. Cannot start optimizely.",NO_JSON_PROVIDED:"%s: No JSON object to validate against schema.",NO_VARIATION_FOR_EXPERIMENT_KEY:"%s: No variation key %s defined in datafile for experiment %s.",UNDEFINED_ATTRIBUTE:"%s: Provided attribute: %s has an undefined value.",UNRECOGNIZED_ATTRIBUTE:"%s: Unrecognized attribute %s provided. Pruning before sending event to Optimizely.",UNABLE_TO_CAST_VALUE:"%s: Unable to cast value %s to type %s, returning null.",USER_NOT_IN_FORCED_VARIATION:"%s: User %s is not in the forced variation map. Cannot remove their forced variation.",USER_PROFILE_LOOKUP_ERROR:'%s: Error while looking up user profile for user ID "%s": %s.',USER_PROFILE_SAVE_ERROR:'%s: Error while saving user profile for user ID "%s": %s.',VARIABLE_KEY_NOT_IN_DATAFILE:'%s: Variable with key "%s" associated with feature with key "%s" is not in datafile.',VARIATION_ID_NOT_IN_DATAFILE:"%s: No variation ID %s defined in datafile for experiment %s.",VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT:"%s: Variation ID %s is not in the datafile.",INVALID_INPUT_FORMAT:"%s: Provided %s is in an invalid format.",INVALID_DATAFILE_VERSION:"%s: This version of the JavaScript SDK does not support the given datafile version: %s",INVALID_VARIATION_KEY:"%s: Provided variation key is in an invalid format."},S={ACTIVATE_USER:"%s: Activating user %s in experiment %s.",DISPATCH_CONVERSION_EVENT:"%s: Dispatching conversion event to URL %s with params %s.",DISPATCH_IMPRESSION_EVENT:"%s: Dispatching impression event to URL %s with params %s.",DEPRECATED_EVENT_VALUE:"%s: Event value is deprecated in %s call.",EVENT_KEY_NOT_FOUND:"%s: Event key %s is not in datafile.",EXPERIMENT_NOT_RUNNING:"%s: Experiment %s is not running.",FEATURE_ENABLED_FOR_USER:"%s: Feature %s is enabled for user %s.",FEATURE_NOT_ENABLED_FOR_USER:"%s: Feature %s is not enabled for user %s.",FEATURE_HAS_NO_EXPERIMENTS:"%s: Feature %s is not attached to any experiments.",FAILED_TO_PARSE_VALUE:'%s: Failed to parse event value "%s" from event tags.',FAILED_TO_PARSE_REVENUE:'%s: Failed to parse revenue value "%s" from event tags.',FORCED_BUCKETING_FAILED:"%s: Variation key %s is not in datafile. Not activating user %s.",INVALID_OBJECT:"%s: Optimizely object is not valid. Failing %s.",INVALID_CLIENT_ENGINE:"%s: Invalid client engine passed: %s. Defaulting to node-sdk.",INVALID_DEFAULT_DECIDE_OPTIONS:"%s: Provided default decide options is not an array.",INVALID_DECIDE_OPTIONS:"%s: Provided decide options is not an array. Using default decide options.",INVALID_VARIATION_ID:"%s: Bucketed into an invalid variation ID. Returning null.",NOTIFICATION_LISTENER_EXCEPTION:"%s: Notification listener for (%s) threw exception: %s",NO_ROLLOUT_EXISTS:"%s: There is no rollout of feature %s.",NOT_ACTIVATING_USER:"%s: Not activating user %s for experiment %s.",NOT_TRACKING_USER:"%s: Not tracking user %s.",PARSED_REVENUE_VALUE:'%s: Parsed revenue value "%s" from event tags.',PARSED_NUMERIC_VALUE:'%s: Parsed event value "%s" from event tags.',RETURNING_STORED_VARIATION:'%s: Returning previously activated variation "%s" of experiment "%s" for user "%s" from user profile.',ROLLOUT_HAS_NO_EXPERIMENTS:"%s: Rollout of feature %s has no experiments",SAVED_VARIATION:'%s: Saved variation "%s" of experiment "%s" for user "%s".',SAVED_VARIATION_NOT_FOUND:"%s: User %s was previously bucketed into variation with ID %s for experiment %s, but no matching variation was found.",SHOULD_NOT_DISPATCH_ACTIVATE:'%s: Experiment %s is not in "Running" state. Not activating user.',SKIPPING_JSON_VALIDATION:"%s: Skipping JSON schema validation.",TRACK_EVENT:"%s: Tracking event %s for user %s.",UNRECOGNIZED_DECIDE_OPTION:"%s: Unrecognized decide option %s provided.",USER_ASSIGNED_TO_EXPERIMENT_BUCKET:"%s: Assigned bucket %s to user with bucketing ID %s.",USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is in experiment %s of group %s.",USER_BUCKETED_INTO_TARGETING_RULE:"%s: User %s bucketed into targeting rule %s.",USER_IN_FEATURE_EXPERIMENT:"%s: User %s is in variation %s of experiment %s on the feature %s.",USER_IN_ROLLOUT:"%s: User %s is in rollout of feature %s.",USER_NOT_BUCKETED_INTO_EVERYONE_TARGETING_RULE:"%s: User %s not bucketed into everyone targeting rule due to traffic allocation.",USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP:"%s: User %s is not in experiment %s of group %s.",USER_NOT_BUCKETED_INTO_ANY_EXPERIMENT_IN_GROUP:"%s: User %s is not in any experiment of group %s.",USER_NOT_BUCKETED_INTO_TARGETING_RULE:"%s User %s not bucketed into targeting rule %s due to traffic allocation. Trying everyone rule.",USER_NOT_IN_FEATURE_EXPERIMENT:"%s: User %s is not in any experiment on the feature %s.",USER_NOT_IN_ROLLOUT:"%s: User %s is not in rollout of feature %s.",USER_FORCED_IN_VARIATION:"%s: User %s is forced in variation %s.",USER_MAPPED_TO_FORCED_VARIATION:"%s: Set variation %s for experiment %s and user %s in the forced variation map.",USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s does not meet conditions for targeting rule %s.",USER_MEETS_CONDITIONS_FOR_TARGETING_RULE:"%s: User %s meets conditions for targeting rule %s.",USER_HAS_VARIATION:"%s: User %s is in variation %s of experiment %s.",USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED:"Variation (%s) is mapped to flag (%s), rule (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED:"Variation (%s) is mapped to flag (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID:"Invalid variation is mapped to flag (%s), rule (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID:"Invalid variation is mapped to flag (%s) and user (%s) in the forced decision map.",USER_HAS_FORCED_VARIATION:"%s: Variation %s is mapped to experiment %s and user %s in the forced variation map.",USER_HAS_NO_VARIATION:"%s: User %s is in no variation of experiment %s.",USER_HAS_NO_FORCED_VARIATION:"%s: User %s is not in the forced variation map.",USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT:"%s: No experiment %s mapped to user %s in the forced variation map.",USER_NOT_IN_ANY_EXPERIMENT:"%s: User %s is not in any experiment of group %s.",USER_NOT_IN_EXPERIMENT:"%s: User %s does not meet conditions to be in experiment %s.",USER_RECEIVED_DEFAULT_VARIABLE_VALUE:'%s: User "%s" is not in any variation or rollout rule. Returning default value for variable "%s" of feature flag "%s".',FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Feature "%s" is not enabled for user %s. Returning the default variable value "%s".',VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE:'%s: Variable "%s" is not used in variation "%s". Returning default value.',USER_RECEIVED_VARIABLE_VALUE:'%s: Got variable value "%s" for variable "%s" of feature flag "%s"',VALID_DATAFILE:"%s: Datafile is valid.",VALID_USER_PROFILE_SERVICE:"%s: Valid user profile service provided.",VARIATION_REMOVED_FOR_USER:"%s: Variation mapped to experiment %s has been removed for user %s.",VARIABLE_REQUESTED_WITH_WRONG_TYPE:'%s: Requested variable type "%s", but variable is of type "%s". Use correct API to retrieve value. Returning None.',VALID_BUCKETING_ID:'%s: BucketingId is valid: "%s"',BUCKETING_ID_NOT_STRING:"%s: BucketingID attribute is not a string. Defaulted to userId",EVALUATING_AUDIENCE:'%s: Starting to evaluate audience "%s" with conditions: %s.',EVALUATING_AUDIENCES_COMBINED:'%s: Evaluating audiences for %s "%s": %s.',AUDIENCE_EVALUATION_RESULT:'%s: Audience "%s" evaluated to %s.',AUDIENCE_EVALUATION_RESULT_COMBINED:"%s: Audiences for %s %s collectively evaluated to %s.",MISSING_ATTRIBUTE_VALUE:'%s: Audience condition %s evaluated to UNKNOWN because no value was passed for user attribute "%s".',UNEXPECTED_CONDITION_VALUE:"%s: Audience condition %s evaluated to UNKNOWN because the condition value is not supported.",UNEXPECTED_TYPE:'%s: Audience condition %s evaluated to UNKNOWN because a value of type "%s" was passed for user attribute "%s".',UNEXPECTED_TYPE_NULL:'%s: Audience condition %s evaluated to UNKNOWN because a null value was passed for user attribute "%s".',UNKNOWN_CONDITION_TYPE:"%s: Audience condition %s has an unknown condition type. You may need to upgrade to a newer release of the Optimizely SDK.",UNKNOWN_MATCH_TYPE:"%s: Audience condition %s uses an unknown match type. You may need to upgrade to a newer release of the Optimizely SDK.",UPDATED_OPTIMIZELY_CONFIG:"%s: Updated Optimizely config to revision %s (project id %s)",OUT_OF_BOUNDS:'%s: Audience condition %s evaluated to UNKNOWN because the number value for user attribute "%s" is not in the range [-2^53, +2^53].',UNABLE_TO_ATTACH_UNLOAD:'%s: unable to bind optimizely.close() to page unload event: "%s"'},B={BOT_FILTERING:"$opt_bot_filtering",BUCKETING_ID:"$opt_bucketing_id",STICKY_BUCKETING_KEY:"$opt_experiment_bucket_map",USER_AGENT:"$opt_user_agent",FORCED_DECISION_NULL_RULE_KEY:"$opt_null_rule_key"},z="javascript-sdk",$="node-sdk",ae="react-sdk",Ee="react-native-sdk",fe="react-native-js-sdk",Pe="4.9.4",Ue="4.9.4",me={AB_TEST:"ab-test",FEATURE:"feature",FEATURE_TEST:"feature-test",FEATURE_VARIABLE:"feature-variable",ALL_FEATURE_VARIABLES:"all-feature-variables",FLAG:"flag"},he={FEATURE_TEST:"feature-test",ROLLOUT:"rollout",EXPERIMENT:"experiment"},He={RULE:"rule",EXPERIMENT:"experiment"},we={BOOLEAN:"boolean",DOUBLE:"double",INTEGER:"integer",STRING:"string",JSON:"json"},$e={V2:"2",V3:"3",V4:"4"},_e={SDK_NOT_READY:"Optimizely SDK not configured properly yet.",FLAG_KEY_INVALID:'No flag was found for key "%s".',VARIABLE_VALUE_INVALID:'Variable value for key "%s" is invalid or wrong type.'},Ge;(function(r){r.ACTIVATE="ACTIVATE:experiment, user_id,attributes, variation, event",r.DECISION="DECISION:type, userId, attributes, decisionInfo",r.LOG_EVENT="LOG_EVENT:logEvent",r.OPTIMIZELY_CONFIG_UPDATE="OPTIMIZELY_CONFIG_UPDATE",r.TRACK="TRACK:event_key, user_id, attributes, event_tags, event"})(Ge||(Ge={}));var et=Object.freeze({__proto__:null,LOG_LEVEL:E,ERROR_MESSAGES:H,LOG_MESSAGES:S,CONTROL_ATTRIBUTES:B,JAVASCRIPT_CLIENT_ENGINE:z,NODE_CLIENT_ENGINE:$,REACT_CLIENT_ENGINE:ae,REACT_NATIVE_CLIENT_ENGINE:Ee,REACT_NATIVE_JS_CLIENT_ENGINE:fe,BROWSER_CLIENT_VERSION:Pe,NODE_CLIENT_VERSION:Ue,DECISION_NOTIFICATION_TYPES:me,DECISION_SOURCES:he,AUDIENCE_EVALUATION_TYPES:He,FEATURE_VARIABLE_TYPES:we,DATAFILE_VERSIONS:$e,DECISION_MESSAGES:_e,get NOTIFICATION_TYPES(){return Ge}}),qe="CONFIG_VALIDATOR",vt=[$e.V2,$e.V3,$e.V4],U=function(r){if(typeof r=="object"&&r!==null){var e=r,t=e.errorHandler,n=e.eventDispatcher,s=e.logger;if(t&&typeof t.handleError!="function")throw new Error(ee(H.INVALID_ERROR_HANDLER,qe));if(n&&typeof n.dispatchEvent!="function")throw new Error(ee(H.INVALID_EVENT_DISPATCHER,qe));if(s&&typeof s.log!="function")throw new Error(ee(H.INVALID_LOGGER,qe));return!0}throw new Error(ee(H.INVALID_CONFIG,qe))},le=function(r){if(!r)throw new Error(ee(H.NO_DATAFILE_SPECIFIED,qe));if(typeof r=="string")try{r=JSON.parse(r)}catch(e){throw new Error(ee(H.INVALID_DATAFILE_MALFORMED,qe))}if(typeof r=="object"&&!Array.isArray(r)&&r!==null&&vt.indexOf(r.version)===-1)throw new Error(ee(H.INVALID_DATAFILE_VERSION,qe,r.version));return r},M={validate:U,validateDatafile:le};function K(){}var Z={handleError:K},te="POST",ce="GET",We=4,ke=function(r,e){var t=r.params,n=r.url,s;r.httpVerb===te?(s=new XMLHttpRequest,s.open(te,n,!0),s.setRequestHeader("Content-Type","application/json"),s.onreadystatechange=function(){if(s.readyState===We&&e&&typeof e=="function")try{e({statusCode:s.status})}catch(d){}},s.send(JSON.stringify(t))):(n+="?wxhr=true",t&&(n+="&"+Je(t)),s=new XMLHttpRequest,s.open(ce,n,!0),s.onreadystatechange=function(){if(s.readyState===We&&e&&typeof e=="function")try{e({statusCode:s.status})}catch(d){}},s.send())},Je=function(r){return Object.keys(r).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])}).join("&")},D={dispatchEvent:ke},F=function(){function r(){}return r.prototype.log=function(){},r}();function Q(r){return new o.ConsoleLogHandler(r)}function ue(){return new F}var Ne=Object.freeze({__proto__:null,NoOpLogger:F,createLogger:Q,createNoOpLogger:ue}),Me;(function(r){r.BOOLEAN="boolean",r.DOUBLE="double",r.INTEGER="integer",r.STRING="string",r.JSON="json"})(Me||(Me={}));var Ce;(function(r){r.DISABLE_DECISION_EVENT="DISABLE_DECISION_EVENT",r.ENABLED_FLAGS_ONLY="ENABLED_FLAGS_ONLY",r.IGNORE_USER_PROFILE_SERVICE="IGNORE_USER_PROFILE_SERVICE",r.INCLUDE_REASONS="INCLUDE_REASONS",r.EXCLUDE_VARIABLES="EXCLUDE_VARIABLES"})(Ce||(Ce={}));function ze(r,e,t){return{variationKey:null,enabled:!1,variables:{},ruleKey:null,flagKey:r,userContext:e,reasons:t}}var nt=function(){function r(e){var t=e.optimizely,n=e.userId,s=e.attributes,d;this.optimizely=t,this.userId=n,this.attributes=(d=R({},s))!==null&&d!==void 0?d:{},this.forcedDecisionsMap={}}return r.prototype.setAttribute=function(e,t){this.attributes[e]=t},r.prototype.getUserId=function(){return this.userId},r.prototype.getAttributes=function(){return R({},this.attributes)},r.prototype.getOptimizely=function(){return this.optimizely},r.prototype.decide=function(e,t){return t===void 0&&(t=[]),this.optimizely.decide(this.cloneUserContext(),e,t)},r.prototype.decideForKeys=function(e,t){return t===void 0&&(t=[]),this.optimizely.decideForKeys(this.cloneUserContext(),e,t)},r.prototype.decideAll=function(e){return e===void 0&&(e=[]),this.optimizely.decideAll(this.cloneUserContext(),e)},r.prototype.trackEvent=function(e,t){this.optimizely.track(e,this.userId,this.attributes,t)},r.prototype.setForcedDecision=function(e,t){var n,s=e.flagKey,d=(n=e.ruleKey)!==null&&n!==void 0?n:B.FORCED_DECISION_NULL_RULE_KEY,L=t.variationKey,W={variationKey:L};return this.forcedDecisionsMap[s]||(this.forcedDecisionsMap[s]={}),this.forcedDecisionsMap[s][d]=W,!0},r.prototype.getForcedDecision=function(e){return this.findForcedDecision(e)},r.prototype.removeForcedDecision=function(e){var t,n=(t=e.ruleKey)!==null&&t!==void 0?t:B.FORCED_DECISION_NULL_RULE_KEY,s=e.flagKey,d=!1;if(this.forcedDecisionsMap.hasOwnProperty(s)){var L=this.forcedDecisionsMap[s];L.hasOwnProperty(n)&&(delete this.forcedDecisionsMap[s][n],d=!0),Object.keys(this.forcedDecisionsMap[s]).length===0&&delete this.forcedDecisionsMap[s]}return d},r.prototype.removeAllForcedDecisions=function(){return this.forcedDecisionsMap={},!0},r.prototype.findForcedDecision=function(e){var t,n,s=(t=e.ruleKey)!==null&&t!==void 0?t:B.FORCED_DECISION_NULL_RULE_KEY,d=e.flagKey;if(this.forcedDecisionsMap.hasOwnProperty(e.flagKey)){var L=this.forcedDecisionsMap[d];if(L.hasOwnProperty(s))return n=L[s].variationKey,{variationKey:n}}return null},r.prototype.cloneUserContext=function(){var e=new r({optimizely:this.getOptimizely(),userId:this.getUserId(),attributes:this.getAttributes()});return Object.keys(this.forcedDecisionsMap).length>0&&(e.forcedDecisionsMap=R({},this.forcedDecisionsMap)),e},r}(),at="and",ot="or",tt="not",st=[at,ot,tt];function rt(r,e){if(Array.isArray(r)){var t=r[0],n=r.slice(1);switch(typeof t=="string"&&st.indexOf(t)===-1&&(t=ot,n=r),t){case at:return pt(n,e);case tt:return mt(n,e);default:return gt(n,e)}}var s=r;return e(s)}function pt(r,e){var t=!1;if(Array.isArray(r)){for(var n=0;n<r.length;n++){var s=rt(r[n],e);if(s===!1)return!1;s===null&&(t=!0)}return t?null:!0}return null}function mt(r,e){if(Array.isArray(r)&&r.length>0){var t=rt(r[0],e);return t===null?null:!t}return null}function gt(r,e){var t=!1;if(Array.isArray(r)){for(var n=0;n<r.length;n++){var s=rt(r[n],e);if(s===!0)return!0;s===null&&(t=!0)}return t?null:!1}return null}var ut=function(){function r(e,t){var n,s;this.sdkKey=(n=e.sdkKey)!==null&&n!==void 0?n:"",this.environmentKey=(s=e.environmentKey)!==null&&s!==void 0?s:"",this.attributes=e.attributes,this.audiences=r.getAudiences(e),this.events=e.events,this.revision=e.revision;var d=(e.featureFlags||[]).reduce(function(x,de){return x[de.id]=de.variables,x},{}),L=r.getVariableIdMap(e),W=r.getExperimentsMapById(e,d,L);this.experimentsMap=r.getExperimentsKeyMap(W),this.featuresMap=r.getFeaturesMap(e,d,W,L),this.datafile=t}return r.prototype.getDatafile=function(){return this.datafile},r.getAudiences=function(e){var t=[],n=[];return(e.typedAudiences||[]).forEach(function(s){t.push({id:s.id,conditions:JSON.stringify(s.conditions),name:s.name}),n.push(s.id)}),(e.audiences||[]).forEach(function(s){n.indexOf(s.id)===-1&&s.id!="$opt_dummy_audience"&&t.push({id:s.id,conditions:JSON.stringify(s.conditions),name:s.name})}),t},r.getSerializedAudiences=function(e,t){var n="";if(e){var s="";e.forEach(function(d){var L="";if(d instanceof Array)L=r.getSerializedAudiences(d,t),L="("+L+")";else if(st.indexOf(d)>-1)s=d.toUpperCase();else{var W=t[d]?t[d].name:d;n||s==="NOT"?(s=s===""?"OR":s,n===""?n=s+' "'+t[d].name+'"':n=n.concat(" "+s+' "'+W+'"')):n='"'+W+'"'}L!==""&&(n!==""||s==="NOT"?(s=s===""?"OR":s,n===""?n=s+" "+L:n=n.concat(" "+s+" "+L)):n=n.concat(L))})}return n},r.getExperimentAudiences=function(e,t){return e.audienceConditions?r.getSerializedAudiences(e.audienceConditions,t.audiencesById):""},r.mergeFeatureVariables=function(e,t,n,s,d){var L=(e[n]||[]).reduce(function(W,x){return W[x.key]={id:x.id,key:x.key,type:x.type,value:x.defaultValue},W},{});return(s||[]).forEach(function(W){var x=t[W.id],de={id:W.id,key:x.key,type:x.type,value:d?W.value:x.defaultValue};L[x.key]=de}),L},r.getVariationsMap=function(e,t,n,s){var d={};return d=e.reduce(function(L,W){var x=r.mergeFeatureVariables(t,n,s,W.variables,W.featureEnabled);return L[W.key]={id:W.id,key:W.key,featureEnabled:W.featureEnabled,variablesMap:x},L},{}),d},r.getVariableIdMap=function(e){var t={};return t=(e.featureFlags||[]).reduce(function(n,s){return s.variables.forEach(function(d){n[d.id]=d}),n},{}),t},r.getDeliveryRules=function(e,t,n,s,d){return s.map(function(L){return{id:L.id,key:L.key,audiences:r.getExperimentAudiences(L,e),variationsMap:r.getVariationsMap(L.variations,t,d,n)}})},r.getRolloutExperimentIds=function(e){var t=[];return(e||[]).forEach(function(n){n.experiments.forEach(function(s){t.push(s.id)})}),t},r.getExperimentsMapById=function(e,t,n){var s=this.getRolloutExperimentIds(e.rollouts),d=e.experiments;return(d||[]).reduce(function(L,W){if(s.indexOf(W.id)===-1){var x=e.experimentFeatureMap[W.id],de="";x&&x.length>0&&(de=x[0]);var pe=r.getVariationsMap(W.variations,t,n,de.toString());L[W.id]={id:W.id,key:W.key,audiences:r.getExperimentAudiences(W,e),variationsMap:pe}}return L},{})},r.getExperimentsKeyMap=function(e){var t={};for(var n in e){var s=e[n];t[s.key]=s}return t},r.getFeaturesMap=function(e,t,n,s){var d={};return e.featureFlags.forEach(function(L){var W={},x=[];L.experimentIds.forEach(function(be){var Ve=n[be];Ve&&(W[Ve.key]=Ve),x.push(n[be])});var de=(L.variables||[]).reduce(function(be,Ve){return be[Ve.key]={id:Ve.id,key:Ve.key,type:Ve.type,value:Ve.defaultValue},be},{}),pe=[],De=e.rolloutIdMap[L.rolloutId];De&&(pe=r.getDeliveryRules(e,t,L.id,De.experiments,s)),d[L.key]={id:L.id,key:L.key,experimentRules:x,deliveryRules:pe,experimentsMap:W,variablesMap:de}}),d},r}();function yt(r,e){return new ut(r,e)}var _t="Running",X="$opt_",j="PROJECT_CONFIG";function re(r){var e,t,n=P({},r);return n.audiences=(r.audiences||[]).map(function(s){return P({},s)}),n.experiments=(r.experiments||[]).map(function(s){return P({},s)}),n.featureFlags=(r.featureFlags||[]).map(function(s){return P({},s)}),n.groups=(r.groups||[]).map(function(s){var d=P({},s);return d.experiments=(s.experiments||[]).map(function(L){return P({},L)}),d}),n.rollouts=(r.rollouts||[]).map(function(s){var d=P({},s);return d.experiments=(s.experiments||[]).map(function(L){return P({},L)}),d}),n.environmentKey=(e=r.environmentKey)!==null&&e!==void 0?e:"",n.sdkKey=(t=r.sdkKey)!==null&&t!==void 0?t:"",n}var ge=function(r,e){e===void 0&&(e=null);var t=re(r);t.__datafileStr=e===null?JSON.stringify(r):e,(t.audiences||[]).forEach(function(s){s.conditions=JSON.parse(s.conditions)}),t.audiencesById=w(t.audiences,"id"),P(t.audiencesById,w(t.typedAudiences,"id")),t.attributeKeyMap=w(t.attributes,"key"),t.eventKeyMap=w(t.events,"key"),t.groupIdMap=w(t.groups,"id");var n;return Object.keys(t.groupIdMap||{}).forEach(function(s){n=t.groupIdMap[s].experiments,(n||[]).forEach(function(d){t.experiments.push(P(d,{groupId:s}))})}),t.rolloutIdMap=w(t.rollouts||[],"id"),C(t.rolloutIdMap||{}).forEach(function(s){(s.experiments||[]).forEach(function(d){t.experiments.push(d),d.variationKeyMap=w(d.variations,"key")})}),t.experimentKeyMap=w(t.experiments,"key"),t.experimentIdMap=w(t.experiments,"id"),t.variationIdMap={},t.variationVariableUsageMap={},(t.experiments||[]).forEach(function(s){s.variationKeyMap=w(s.variations,"key"),P(t.variationIdMap,w(s.variations,"id")),C(s.variationKeyMap||{}).forEach(function(d){d.variables&&(t.variationVariableUsageMap[d.id]=w(d.variables,"id"))})}),t.experimentFeatureMap={},t.featureKeyMap=w(t.featureFlags||[],"key"),C(t.featureKeyMap||{}).forEach(function(s){s.variables.forEach(function(d){d.type===we.STRING&&d.subType===we.JSON&&(d.type=we.JSON,delete d.subType)}),s.variableKeyMap=w(s.variables,"key"),(s.experimentIds||[]).forEach(function(d){t.experimentFeatureMap[d]?t.experimentFeatureMap[d].push(s.id):t.experimentFeatureMap[d]=[s.id]})}),t.flagRulesMap={},(t.featureFlags||[]).forEach(function(s){var d=[];s.experimentIds.forEach(function(W){var x=t.experimentIdMap[W];x&&d.push(x)});var L=t.rolloutIdMap[s.rolloutId];L&&d.push.apply(d,L.experiments),t.flagRulesMap[s.key]=d}),t.flagVariationsMap={},q(t.flagRulesMap||{}).forEach(function(s){var d=s[0],L=s[1],W=[];L.forEach(function(x){x.variations.forEach(function(de){oe(W,function(pe){return pe.id===de.id})||W.push(de)})}),t.flagVariationsMap[d]=W}),t},Oe=function(r,e){var t=r.experimentIdMap[e];if(!t)throw new Error(ee(H.INVALID_EXPERIMENT_ID,j,e));return t.layerId},Ae=function(r,e,t){var n=r.attributeKeyMap[e],s=e.indexOf(X)===0;return n?(s&&t.log(E.WARNING,"Attribute %s unexpectedly has reserved prefix %s; using attribute ID instead of reserved attribute name.",e,X),n.id):s?e:(t.log(E.DEBUG,H.UNRECOGNIZED_ATTRIBUTE,j,e),null)},Te=function(r,e){var t=r.eventKeyMap[e];return t?t.id:null},Ie=function(r,e){var t=r.experimentKeyMap[e];if(!t)throw new Error(ee(H.INVALID_EXPERIMENT_KEY,j,e));return t.status},ne=function(r,e){return Ie(r,e)===_t},Re=function(r,e){return Ie(r,e)===_t},Le=function(r,e){var t=r.experimentIdMap[e];if(!t)throw new Error(ee(H.INVALID_EXPERIMENT_ID,j,e));return t.audienceConditions||t.audienceIds},je=function(r,e){return r.variationIdMap.hasOwnProperty(e)?r.variationIdMap[e].key:null},Xe=function(r,e){return r.variationIdMap.hasOwnProperty(e)?r.variationIdMap[e]:null},Ke=function(r,e,t){var n=r.experimentKeyMap[e];return n.variationKeyMap.hasOwnProperty(t)?n.variationKeyMap[t].id:null},Qe=function(r,e){if(r.experimentKeyMap.hasOwnProperty(e)){var t=r.experimentKeyMap[e];if(t)return t}throw new Error(ee(H.EXPERIMENT_KEY_NOT_IN_DATAFILE,j,e))},Ze=function(r,e){var t=r.experimentIdMap[e];if(!t)throw new Error(ee(H.INVALID_EXPERIMENT_ID,j,e));return t.trafficAllocation},y=function(r,e,t){if(r.experimentIdMap.hasOwnProperty(e)){var n=r.experimentIdMap[e];if(n)return n}return t.log(E.ERROR,H.INVALID_EXPERIMENT_ID,j,e),null},b=function(r,e,t){if(!r)return null;var n=r.flagVariationsMap[e],s=oe(n,function(d){return d.key===t});return s||null},T=function(r,e,t){if(r.featureKeyMap.hasOwnProperty(e)){var n=r.featureKeyMap[e];if(n)return n}return t.log(E.ERROR,H.FEATURE_NOT_IN_DATAFILE,j,e),null},V=function(r,e,t,n){var s=r.featureKeyMap[e];if(!s)return n.log(E.ERROR,H.FEATURE_NOT_IN_DATAFILE,j,e),null;var d=s.variableKeyMap[t];return d||(n.log(E.ERROR,H.VARIABLE_KEY_NOT_IN_DATAFILE,j,t,e),null)},ie=function(r,e,t,n){if(!e||!t)return null;if(!r.variationVariableUsageMap.hasOwnProperty(t.id))return n.log(E.ERROR,H.VARIATION_ID_NOT_IN_DATAFILE_NO_EXPERIMENT,j,t.id),null;var s=r.variationVariableUsageMap[t.id],d=s[e.id];return d?d.value:null},se=function(r,e,t){var n;switch(e){case we.BOOLEAN:r!=="true"&&r!=="false"?(t.log(E.ERROR,H.UNABLE_TO_CAST_VALUE,j,r,e),n=null):n=r==="true";break;case we.INTEGER:n=parseInt(r,10),isNaN(n)&&(t.log(E.ERROR,H.UNABLE_TO_CAST_VALUE,j,r,e),n=null);break;case we.DOUBLE:n=parseFloat(r),isNaN(n)&&(t.log(E.ERROR,H.UNABLE_TO_CAST_VALUE,j,r,e),n=null);break;case we.JSON:try{n=JSON.parse(r)}catch(s){t.log(E.ERROR,H.UNABLE_TO_CAST_VALUE,j,r,e),n=null}break;default:n=r;break}return n},Fe=function(r){return r.audiencesById},Be=function(r,e){return r.eventKeyMap.hasOwnProperty(e)},Ye=function(r,e){return r.experimentFeatureMap.hasOwnProperty(e)},lt=function(r){return r.__datafileStr},St=function(r){var e;try{e=M.validateDatafile(r.datafile)}catch(s){return{configObj:null,error:s}}if(r.jsonSchemaValidator)try{r.jsonSchemaValidator.validate(e),r.logger.log(E.INFO,S.VALID_DATAFILE,j)}catch(s){return{configObj:null,error:s}}else r.logger.log(E.INFO,S.SKIPPING_JSON_VALIDATION,j);var t=[e];typeof r.datafile=="string"&&t.push(r.datafile);var n=ge.apply(void 0,t);return{configObj:n,error:null}},Dt=function(r){return!!r.sendFlagDecisions},Ct=(0,o.getLogger)(),Vr="PROJECT_CONFIG_MANAGER";function Lt(r,e){return r instanceof Error?r.message:e||"Unknown error"}var Fr=function(){function r(e){this.updateListeners=[],this.configObj=null,this.optimizelyConfigObj=null,this.datafileManager=null;try{if(this.jsonSchemaValidator=e.jsonSchemaValidator,!e.datafile&&!e.sdkKey){var t=new Error(ee(H.DATAFILE_AND_SDK_KEY_MISSING,Vr));this.readyPromise=Promise.resolve({success:!1,reason:Lt(t)}),Ct.error(t);return}var n=null;e.datafile&&(n=this.handleNewDatafile(e.datafile)),e.sdkKey&&e.datafileManager?(this.datafileManager=e.datafileManager,this.datafileManager.start(),this.readyPromise=this.datafileManager.onReady().then(this.onDatafileManagerReadyFulfill.bind(this),this.onDatafileManagerReadyReject.bind(this)),this.datafileManager.on("update",this.onDatafileManagerUpdate.bind(this))):this.configObj?this.readyPromise=Promise.resolve({success:!0}):this.readyPromise=Promise.resolve({success:!1,reason:Lt(n,"Invalid datafile")})}catch(s){Ct.error(s),this.readyPromise=Promise.resolve({success:!1,reason:Lt(s,"Error in initialize")})}}return r.prototype.onDatafileManagerReadyFulfill=function(){if(this.datafileManager){var e=this.handleNewDatafile(this.datafileManager.get());return e?{success:!1,reason:Lt(e)}:{success:!0}}return{success:!1,reason:Lt(null,"Datafile manager is not provided")}},r.prototype.onDatafileManagerReadyReject=function(e){return{success:!1,reason:Lt(e,"Failed to become ready")}},r.prototype.onDatafileManagerUpdate=function(){this.datafileManager&&this.handleNewDatafile(this.datafileManager.get())},r.prototype.handleNewDatafile=function(e){var t=St({datafile:e,jsonSchemaValidator:this.jsonSchemaValidator,logger:Ct}),n=t.configObj,s=t.error;if(s)Ct.error(s);else{var d=this.configObj?this.configObj.revision:"null";n&&d!==n.revision&&(this.configObj=n,this.optimizelyConfigObj=null,this.updateListeners.forEach(function(L){return L(n)}))}return s},r.prototype.getConfig=function(){return this.configObj},r.prototype.getOptimizelyConfig=function(){return!this.optimizelyConfigObj&&this.configObj&&(this.optimizelyConfigObj=yt(this.configObj,lt(this.configObj))),this.optimizelyConfigObj},r.prototype.onReady=function(){return this.readyPromise},r.prototype.onUpdate=function(e){var t=this;return this.updateListeners.push(e),function(){var n=t.updateListeners.indexOf(e);n>-1&&t.updateListeners.splice(n,1)}},r.prototype.stop=function(){this.datafileManager&&this.datafileManager.stop(),this.updateListeners=[]},r}();function kr(r){return new Fr(r)}var jr=1,Br=Math.pow(2,32),xr=1e4,Et="BUCKETER",Gr="random",Qt=function(r){var e=[],t=r.experimentIdMap[r.experimentId],n=t.groupId;if(n){var s=r.groupIdMap[n];if(!s)throw new Error(ee(H.INVALID_GROUP_ID,Et,n));if(s.policy===Gr){var d=Hr(s,r.bucketingId,r.userId,r.logger);if(d===null)return r.logger.log(E.INFO,S.USER_NOT_IN_ANY_EXPERIMENT,Et,r.userId,n),e.push([S.USER_NOT_IN_ANY_EXPERIMENT,Et,r.userId,n]),{result:null,reasons:e};if(d!==r.experimentId)return r.logger.log(E.INFO,S.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,Et,r.userId,r.experimentKey,n),e.push([S.USER_NOT_BUCKETED_INTO_EXPERIMENT_IN_GROUP,Et,r.userId,r.experimentKey,n]),{result:null,reasons:e};r.logger.log(E.INFO,S.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,Et,r.userId,r.experimentKey,n),e.push([S.USER_BUCKETED_INTO_EXPERIMENT_IN_GROUP,Et,r.userId,r.experimentKey,n])}}var L=""+r.bucketingId+r.experimentId,W=qt(L);r.logger.log(E.DEBUG,S.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,Et,W,r.userId),e.push([S.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,Et,W,r.userId]);var x=Jt(W,r.trafficAllocationConfig);return x!==null&&!r.variationIdMap[x]?(x&&(r.logger.log(E.WARNING,S.INVALID_VARIATION_ID,Et),e.push([S.INVALID_VARIATION_ID,Et])),{result:null,reasons:e}):{result:x,reasons:e}},Hr=function(r,e,t,n){var s=""+e+r.id,d=qt(s);n.log(E.DEBUG,S.USER_ASSIGNED_TO_EXPERIMENT_BUCKET,Et,d,t);var L=r.trafficAllocation,W=Jt(d,L);return W},Jt=function(r,e){for(var t=0;t<e.length;t++)if(r<e[t].endOfRange)return e[t].entityId;return null},qt=function(r){try{var e=f().v3(r,jr),t=e/Br;return Math.floor(t*xr)}catch(n){throw new Error(ee(H.INVALID_BUCKETING_ID,Et,r,n.message))}},Vt="SEMANTIC VERSION",Ft=(0,o.getLogger)();function er(r){return/^\d+$/.test(r)}function Tt(r){var e=r.indexOf("-"),t=r.indexOf("+");return e<0?!1:t<0?!0:e<t}function tr(r){var e=r.indexOf("-"),t=r.indexOf("+");return t<0?!1:e<0?!0:t<e}function Kr(r){return/\s/.test(r)}function rr(r){var e=r,t="";if(Kr(r))return Ft.warn(S.UNKNOWN_MATCH_TYPE,Vt,r),null;if(Tt(r)?(e=r.substring(0,r.indexOf("-")),t=r.substring(r.indexOf("-")+1)):tr(r)&&(e=r.substring(0,r.indexOf("+")),t=r.substring(r.indexOf("+")+1)),typeof e!="string"||typeof t!="string")return null;var n=e.split(".").length-1;if(n>2)return Ft.warn(S.UNKNOWN_MATCH_TYPE,Vt,r),null;var s=e.split(".");if(s.length!=n+1)return Ft.warn(S.UNKNOWN_MATCH_TYPE,Vt,r),null;for(var d=0,L=s;d<L.length;d++){var W=L[d];if(!er(W))return Ft.warn(S.UNKNOWN_MATCH_TYPE,Vt,r),null}return t&&s.push(t),s}function Wr(r,e){var t=rr(e),n=rr(r);if(!t||!n)return null;for(var s=t.length,d=0;d<n.length;d++){if(s<=d)return Tt(r)||tr(r)?1:-1;if(er(t[d])){var L=parseInt(t[d]),W=parseInt(n[d]);if(L>W)return 1;if(L<W)return-1}else{if(t[d]<n[d])return Tt(r)&&!Tt(e)?1:-1;if(t[d]>n[d])return!Tt(r)&&Tt(e)?-1:1}}return Tt(e)&&!Tt(r)?-1:0}var ct="CUSTOM_ATTRIBUTE_CONDITION_EVALUATOR",dt=(0,o.getLogger)(),nr="exact",Gt="exists",ir="ge",ar="gt",or="le",sr="lt",ur="semver_eq",lr="semver_ge",cr="semver_gt",dr="semver_le",fr="semver_lt",vr="substring",zr=[nr,Gt,ar,ir,sr,or,vr,ur,fr,dr,cr,lr],ht={};ht[nr]=Ht,ht[Gt]=Zr,ht[ar]=Xr,ht[ir]=$r,ht[sr]=Qr,ht[or]=Jr,ht[vr]=qr,ht[ur]=en,ht[cr]=tn,ht[lr]=nn,ht[fr]=rn,ht[dr]=an;function Yr(r,e){var t=r.match;if(typeof t!="undefined"&&zr.indexOf(t)===-1)return dt.warn(S.UNKNOWN_MATCH_TYPE,ct,JSON.stringify(r)),null;var n=r.name;if(!e.hasOwnProperty(n)&&t!=Gt)return dt.debug(S.MISSING_ATTRIBUTE_VALUE,ct,JSON.stringify(r),n),null;var s;return t?s=ht[t]||Ht:s=Ht,s(r,e)}function gr(r){return typeof r=="string"||typeof r=="boolean"||ve.isNumber(r)}function Ht(r,e){var t=r.value,n=typeof t,s=r.name,d=e[s],L=typeof d;return!gr(t)||ve.isNumber(t)&&!ve.isSafeInteger(t)?(dt.warn(S.UNEXPECTED_CONDITION_VALUE,ct,JSON.stringify(r)),null):d===null?(dt.debug(S.UNEXPECTED_TYPE_NULL,ct,JSON.stringify(r),s),null):!gr(d)||n!==L?(dt.warn(S.UNEXPECTED_TYPE,ct,JSON.stringify(r),L,s),null):ve.isNumber(d)&&!ve.isSafeInteger(d)?(dt.warn(S.OUT_OF_BOUNDS,ct,JSON.stringify(r),s),null):t===d}function Zr(r,e){var t=e[r.name];return typeof t!="undefined"&&t!==null}function kt(r,e){var t=r.name,n=e[t],s=typeof n,d=r.value;return d===null||!ve.isSafeInteger(d)?(dt.warn(S.UNEXPECTED_CONDITION_VALUE,ct,JSON.stringify(r)),!1):n===null?(dt.debug(S.UNEXPECTED_TYPE_NULL,ct,JSON.stringify(r),t),!1):ve.isNumber(n)?ve.isSafeInteger(n)?!0:(dt.warn(S.OUT_OF_BOUNDS,ct,JSON.stringify(r),t),!1):(dt.warn(S.UNEXPECTED_TYPE,ct,JSON.stringify(r),s,t),!1)}function Xr(r,e){var t=e[r.name],n=r.value;return!kt(r,e)||n===null?null:t>n}function $r(r,e){var t=e[r.name],n=r.value;return!kt(r,e)||n===null?null:t>=n}function Qr(r,e){var t=e[r.name],n=r.value;return!kt(r,e)||n===null?null:t<n}function Jr(r,e){var t=e[r.name],n=r.value;return!kt(r,e)||n===null?null:t<=n}function qr(r,e){var t=r.name,n=e[r.name],s=typeof n,d=r.value;return typeof d!="string"?(dt.warn(S.UNEXPECTED_CONDITION_VALUE,ct,JSON.stringify(r)),null):n===null?(dt.debug(S.UNEXPECTED_TYPE_NULL,ct,JSON.stringify(r),t),null):typeof n!="string"?(dt.warn(S.UNEXPECTED_TYPE,ct,JSON.stringify(r),s,t),null):n.indexOf(d)!==-1}function Ut(r,e){var t=r.name,n=e[t],s=typeof n,d=r.value;return typeof d!="string"?(dt.warn(S.UNEXPECTED_CONDITION_VALUE,ct,JSON.stringify(r)),null):n===null?(dt.debug(S.UNEXPECTED_TYPE_NULL,ct,JSON.stringify(r),t),null):typeof n!="string"?(dt.warn(S.UNEXPECTED_TYPE,ct,JSON.stringify(r),s,t),null):Wr(d,n)}function en(r,e){var t=Ut(r,e);return t===null?null:t===0}function tn(r,e){var t=Ut(r,e);return t===null?null:t>0}function rn(r,e){var t=Ut(r,e);return t===null?null:t<0}function nn(r,e){var t=Ut(r,e);return t===null?null:t>=0}function an(r,e){var t=Ut(r,e);return t===null?null:t<=0}var on=Object.freeze({__proto__:null,evaluate:Yr}),jt=(0,o.getLogger)(),Bt="AUDIENCE_EVALUATOR",sn=function(){function r(e){this.typeToEvaluatorMap=ve.assign({},e,{custom_attribute:on})}return r.prototype.evaluate=function(e,t,n){var s=this;if(n===void 0&&(n={}),!e||e.length===0)return!0;var d=function(L){var W=t[L];if(W){jt.log(E.DEBUG,S.EVALUATING_AUDIENCE,Bt,L,JSON.stringify(W.conditions));var x=rt(W.conditions,s.evaluateConditionWithUserAttributes.bind(s,n)),de=x===null?"UNKNOWN":x.toString().toUpperCase();return jt.log(E.DEBUG,S.AUDIENCE_EVALUATION_RESULT,Bt,L,de),x}return null};return!!rt(e,d)},r.prototype.evaluateConditionWithUserAttributes=function(e,t){var n=this.typeToEvaluatorMap[t.type];if(!n)return jt.log(E.WARNING,S.UNKNOWN_CONDITION_TYPE,Bt,JSON.stringify(t)),null;try{return n.evaluate(t,e)}catch(s){jt.log(E.ERROR,H.CONDITION_EVALUATOR_ERROR,Bt,t.type,s.message)}return null},r}(),un=function(r){return new sn(r)};function Er(r){return typeof r=="string"&&r!==""}var Se="DECISION_SERVICE",ln=function(){function r(e){this.audienceEvaluator=un(e.UNSTABLE_conditionEvaluators),this.forcedVariationMap={},this.logger=e.logger,this.userProfileService=e.userProfileService||null}return r.prototype.getVariation=function(e,t,n,s){s===void 0&&(s={});var d=n.getUserId(),L=n.getAttributes(),W=this.getBucketingId(d,L),x=[],de=t.key;if(!this.checkIfExperimentIsActive(e,de))return this.logger.log(E.INFO,S.EXPERIMENT_NOT_RUNNING,Se,de),x.push([S.EXPERIMENT_NOT_RUNNING,Se,de]),{result:null,reasons:x};var pe=this.getForcedVariation(e,de,d);x.push.apply(x,pe.reasons);var De=pe.result;if(De)return{result:De,reasons:x};var be=this.getWhitelistedVariation(t,d);x.push.apply(x,be.reasons);var Ve=be.result;if(Ve)return{result:Ve.key,reasons:x};var ft=s[Ce.IGNORE_USER_PROFILE_SERVICE],it=this.resolveExperimentBucketMap(d,L);if(!ft&&(Ve=this.getStoredVariation(e,t,d,it),Ve))return this.logger.log(E.INFO,S.RETURNING_STORED_VARIATION,Se,Ve.key,de,d),x.push([S.RETURNING_STORED_VARIATION,Se,Ve.key,de,d]),{result:Ve.key,reasons:x};var It=this.checkIfUserIsInAudience(e,t,He.EXPERIMENT,L,"");if(x.push.apply(x,It.reasons),!It.result)return this.logger.log(E.INFO,S.USER_NOT_IN_EXPERIMENT,Se,d,de),x.push([S.USER_NOT_IN_EXPERIMENT,Se,d,de]),{result:null,reasons:x};var At=this.buildBucketerParams(e,t,W,d),Nt=Qt(At);x.push.apply(x,Nt.reasons);var Ot=Nt.result;return Ot&&(Ve=e.variationIdMap[Ot]),Ve?(this.logger.log(E.INFO,S.USER_HAS_VARIATION,Se,d,Ve.key,de),x.push([S.USER_HAS_VARIATION,Se,d,Ve.key,de]),ft||this.saveUserProfile(t,Ve,d,it),{result:Ve.key,reasons:x}):(this.logger.log(E.DEBUG,S.USER_HAS_NO_VARIATION,Se,d,de),x.push([S.USER_HAS_NO_VARIATION,Se,d,de]),{result:null,reasons:x})},r.prototype.resolveExperimentBucketMap=function(e,t){t=t||{};var n=this.getUserProfile(e)||{},s=t[B.STICKY_BUCKETING_KEY];return ve.assign({},n.experiment_bucket_map,s)},r.prototype.checkIfExperimentIsActive=function(e,t){return ne(e,t)},r.prototype.getWhitelistedVariation=function(e,t){var n=[];if(e.forcedVariations&&e.forcedVariations.hasOwnProperty(t)){var s=e.forcedVariations[t];return e.variationKeyMap.hasOwnProperty(s)?(this.logger.log(E.INFO,S.USER_FORCED_IN_VARIATION,Se,t,s),n.push([S.USER_FORCED_IN_VARIATION,Se,t,s]),{result:e.variationKeyMap[s],reasons:n}):(this.logger.log(E.ERROR,S.FORCED_BUCKETING_FAILED,Se,s,t),n.push([S.FORCED_BUCKETING_FAILED,Se,s,t]),{result:null,reasons:n})}return{result:null,reasons:n}},r.prototype.checkIfUserIsInAudience=function(e,t,n,s,d){var L=[],W=Le(e,t.id),x=Fe(e);this.logger.log(E.DEBUG,S.EVALUATING_AUDIENCES_COMBINED,Se,n,d||t.key,JSON.stringify(W)),L.push([S.EVALUATING_AUDIENCES_COMBINED,Se,n,d||t.key,JSON.stringify(W)]);var de=this.audienceEvaluator.evaluate(W,x,s);return this.logger.log(E.INFO,S.AUDIENCE_EVALUATION_RESULT_COMBINED,Se,n,d||t.key,de.toString().toUpperCase()),L.push([S.AUDIENCE_EVALUATION_RESULT_COMBINED,Se,n,d||t.key,de.toString().toUpperCase()]),{result:de,reasons:L}},r.prototype.buildBucketerParams=function(e,t,n,s){return{bucketingId:n,experimentId:t.id,experimentKey:t.key,experimentIdMap:e.experimentIdMap,experimentKeyMap:e.experimentKeyMap,groupIdMap:e.groupIdMap,logger:this.logger,trafficAllocationConfig:Ze(e,t.id),userId:s,variationIdMap:e.variationIdMap}},r.prototype.getStoredVariation=function(e,t,n,s){if(s.hasOwnProperty(t.id)){var d=s[t.id],L=d.variation_id;if(e.variationIdMap.hasOwnProperty(L))return e.variationIdMap[d.variation_id];this.logger.log(E.INFO,S.SAVED_VARIATION_NOT_FOUND,Se,n,L,t.key)}return null},r.prototype.getUserProfile=function(e){var t={user_id:e,experiment_bucket_map:{}};if(!this.userProfileService)return t;try{return this.userProfileService.lookup(e)}catch(n){this.logger.log(E.ERROR,H.USER_PROFILE_LOOKUP_ERROR,Se,e,n.message)}return null},r.prototype.saveUserProfile=function(e,t,n,s){if(this.userProfileService)try{s[e.id]={variation_id:t.id},this.userProfileService.save({user_id:n,experiment_bucket_map:s}),this.logger.log(E.INFO,S.SAVED_VARIATION,Se,t.key,e.key,n)}catch(d){this.logger.log(E.ERROR,H.USER_PROFILE_SAVE_ERROR,Se,n,d.message)}},r.prototype.getVariationForFeature=function(e,t,n,s){s===void 0&&(s={});var d=[],L=this.getVariationForFeatureExperiment(e,t,n,s);d.push.apply(d,L.reasons);var W=L.result;if(W.variation!==null)return{result:W,reasons:d};var x=this.getVariationForRollout(e,t,n);d.push.apply(d,x.reasons);var de=x.result,pe=n.getUserId();return de.variation?(this.logger.log(E.DEBUG,S.USER_IN_ROLLOUT,Se,pe,t.key),d.push([S.USER_IN_ROLLOUT,Se,pe,t.key]),{result:de,reasons:d}):(this.logger.log(E.DEBUG,S.USER_NOT_IN_ROLLOUT,Se,pe,t.key),d.push([S.USER_NOT_IN_ROLLOUT,Se,pe,t.key]),{result:de,reasons:d})},r.prototype.getVariationForFeatureExperiment=function(e,t,n,s){s===void 0&&(s={});var d=[],L=null,W,x,de;if(t.experimentIds.length>0)for(x=0;x<t.experimentIds.length;x++){var pe=y(e,t.experimentIds[x],this.logger);if(pe&&(W=this.getVariationFromExperimentRule(e,t.key,pe,n,s),d.push.apply(d,W.reasons),L=W.result,L)){var De=null;return De=pe.variationKeyMap[L],De||(De=b(e,t.key,L)),de={experiment:pe,variation:De,decisionSource:he.FEATURE_TEST},{result:de,reasons:d}}}else this.logger.log(E.DEBUG,S.FEATURE_HAS_NO_EXPERIMENTS,Se,t.key),d.push([S.FEATURE_HAS_NO_EXPERIMENTS,Se,t.key]);return de={experiment:null,variation:null,decisionSource:he.FEATURE_TEST},{result:de,reasons:d}},r.prototype.getVariationForRollout=function(e,t,n){var s=[],d;if(!t.rolloutId)return this.logger.log(E.DEBUG,S.NO_ROLLOUT_EXISTS,Se,t.key),s.push([S.NO_ROLLOUT_EXISTS,Se,t.key]),d={experiment:null,variation:null,decisionSource:he.ROLLOUT},{result:d,reasons:s};var L=e.rolloutIdMap[t.rolloutId];if(!L)return this.logger.log(E.ERROR,H.INVALID_ROLLOUT_ID,Se,t.rolloutId,t.key),s.push([H.INVALID_ROLLOUT_ID,Se,t.rolloutId,t.key]),d={experiment:null,variation:null,decisionSource:he.ROLLOUT},{result:d,reasons:s};var W=L.experiments;if(W.length===0)return this.logger.log(E.ERROR,S.ROLLOUT_HAS_NO_EXPERIMENTS,Se,t.rolloutId),s.push([S.ROLLOUT_HAS_NO_EXPERIMENTS,Se,t.rolloutId]),d={experiment:null,variation:null,decisionSource:he.ROLLOUT},{result:d,reasons:s};for(var x,de,pe,De,be=0;be<W.length;){if(x=this.getVariationFromDeliveryRule(e,t.key,W,be,n),s.push.apply(s,x.reasons),pe=x.result,de=x.skipToEveryoneElse,pe)return De=e.experimentIdMap[W[be].id],d={experiment:De,variation:pe,decisionSource:he.ROLLOUT},{result:d,reasons:s};be=de?W.length-1:be+1}return d={experiment:null,variation:null,decisionSource:he.ROLLOUT},{result:d,reasons:s}},r.prototype.getBucketingId=function(e,t){var n=e;return t!=null&&typeof t=="object"&&t.hasOwnProperty(B.BUCKETING_ID)&&(typeof t[B.BUCKETING_ID]=="string"?(n=t[B.BUCKETING_ID],this.logger.log(E.DEBUG,S.VALID_BUCKETING_ID,Se,n)):this.logger.log(E.WARNING,S.BUCKETING_ID_NOT_STRING,Se)),n},r.prototype.findValidatedForcedDecision=function(e,t,n,s){var d=[],L=t.getForcedDecision({flagKey:n,ruleKey:s}),W=null,x,de=t.getUserId();return e&&L&&(x=L.variationKey,W=b(e,n,x),W?s?(this.logger.log(E.INFO,S.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED,x,n,s,de),d.push([S.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED,x,n,s,de])):(this.logger.log(E.INFO,S.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED,x,n,de),d.push([S.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED,x,n,de])):s?(this.logger.log(E.INFO,S.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID,n,s,de),d.push([S.USER_HAS_FORCED_DECISION_WITH_RULE_SPECIFIED_BUT_INVALID,n,s,de])):(this.logger.log(E.INFO,S.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID,n,de),d.push([S.USER_HAS_FORCED_DECISION_WITH_NO_RULE_SPECIFIED_BUT_INVALID,n,de]))),{result:W,reasons:d}},r.prototype.removeForcedVariation=function(e,t,n){if(!e)throw new Error(ee(H.INVALID_USER_ID,Se));if(this.forcedVariationMap.hasOwnProperty(e))delete this.forcedVariationMap[e][t],this.logger.log(E.DEBUG,S.VARIATION_REMOVED_FOR_USER,Se,n,e);else throw new Error(ee(H.USER_NOT_IN_FORCED_VARIATION,Se,e))},r.prototype.setInForcedVariationMap=function(e,t,n){this.forcedVariationMap.hasOwnProperty(e)?this.forcedVariationMap[e][t]=n:(this.forcedVariationMap[e]={},this.forcedVariationMap[e][t]=n),this.logger.log(E.DEBUG,S.USER_MAPPED_TO_FORCED_VARIATION,Se,n,t,e)},r.prototype.getForcedVariation=function(e,t,n){var s=[],d=this.forcedVariationMap[n];if(!d)return this.logger.log(E.DEBUG,S.USER_HAS_NO_FORCED_VARIATION,Se,n),{result:null,reasons:s};var L;try{var W=Qe(e,t);if(W.hasOwnProperty("id"))L=W.id;else return this.logger.log(E.ERROR,H.IMPROPERLY_FORMATTED_EXPERIMENT,Se,t),s.push([H.IMPROPERLY_FORMATTED_EXPERIMENT,Se,t]),{result:null,reasons:s}}catch(pe){return this.logger.log(E.ERROR,pe.message),s.push(pe.message),{result:null,reasons:s}}var x=d[L];if(!x)return this.logger.log(E.DEBUG,S.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,Se,t,n),{result:null,reasons:s};var de=je(e,x);return de?(this.logger.log(E.DEBUG,S.USER_HAS_FORCED_VARIATION,Se,de,t,n),s.push([S.USER_HAS_FORCED_VARIATION,Se,de,t,n])):this.logger.log(E.DEBUG,S.USER_HAS_NO_FORCED_VARIATION_FOR_EXPERIMENT,Se,t,n),{result:de,reasons:s}},r.prototype.setForcedVariation=function(e,t,n,s){if(s!=null&&!Er(s))return this.logger.log(E.ERROR,H.INVALID_VARIATION_KEY,Se),!1;var d;try{var L=Qe(e,t);if(L.hasOwnProperty("id"))d=L.id;else return this.logger.log(E.ERROR,H.IMPROPERLY_FORMATTED_EXPERIMENT,Se,t),!1}catch(x){return this.logger.log(E.ERROR,x.message),!1}if(s==null)try{return this.removeForcedVariation(n,d,t),!0}catch(x){return this.logger.log(E.ERROR,x.message),!1}var W=Ke(e,t,s);if(!W)return this.logger.log(E.ERROR,H.NO_VARIATION_FOR_EXPERIMENT_KEY,Se,s,t),!1;try{return this.setInForcedVariationMap(n,d,W),!0}catch(x){return this.logger.log(E.ERROR,x.message),!1}},r.prototype.getVariationFromExperimentRule=function(e,t,n,s,d){d===void 0&&(d={});var L=[],W=this.findValidatedForcedDecision(e,s,t,n.key);L.push.apply(L,W.reasons);var x=W.result;if(x)return{result:x.key,reasons:L};var de=this.getVariation(e,n,s,d);L.push.apply(L,de.reasons);var pe=de.result;return{result:pe,reasons:L}},r.prototype.getVariationFromDeliveryRule=function(e,t,n,s,d){var L=[],W=!1,x=n[s],de=this.findValidatedForcedDecision(e,d,t,x.key);L.push.apply(L,de.reasons);var pe=de.result;if(pe)return{result:pe,reasons:L,skipToEveryoneElse:W};var De=d.getUserId(),be=d.getAttributes(),Ve=this.getBucketingId(De,be),ft=s===n.length-1,it=ft?"Everyone Else":s+1,It=null,At,Nt,Ot,Mt=this.checkIfUserIsInAudience(e,x,He.RULE,be,it);return L.push.apply(L,Mt.reasons),Mt.result?(this.logger.log(E.DEBUG,S.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,Se,De,it),L.push([S.USER_MEETS_CONDITIONS_FOR_TARGETING_RULE,Se,De,it]),Nt=this.buildBucketerParams(e,x,Ve,De),Ot=Qt(Nt),L.push.apply(L,Ot.reasons),At=Ot.result,At&&(It=Xe(e,At)),It?(this.logger.log(E.DEBUG,S.USER_BUCKETED_INTO_TARGETING_RULE,Se,De,it),L.push([S.USER_BUCKETED_INTO_TARGETING_RULE,Se,De,it])):ft||(this.logger.log(E.DEBUG,S.USER_NOT_BUCKETED_INTO_TARGETING_RULE,Se,De,it),L.push([S.USER_NOT_BUCKETED_INTO_TARGETING_RULE,Se,De,it]),W=!0)):(this.logger.log(E.DEBUG,S.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,Se,De,it),L.push([S.USER_DOESNT_MEET_CONDITIONS_FOR_TARGETING_RULE,Se,De,it])),{result:It,reasons:L,skipToEveryoneElse:W}},r}();function cn(r){return new ln(r)}var Pt="EVENT_TAG_UTILS",hr="revenue",pr="value";function _r(r,e){if(r.hasOwnProperty(hr)){var t=r[hr],n=void 0;return typeof t=="string"?(n=parseInt(t),isNaN(n)?(e.log(E.INFO,S.FAILED_TO_PARSE_REVENUE,Pt,t),null):(e.log(E.INFO,S.PARSED_REVENUE_VALUE,Pt,n),n)):typeof t=="number"?(n=t,e.log(E.INFO,S.PARSED_REVENUE_VALUE,Pt,n),n):null}return null}function yr(r,e){if(r.hasOwnProperty(pr)){var t=r[pr],n=void 0;return typeof t=="string"?(n=parseFloat(t),isNaN(n)?(e.log(E.INFO,S.FAILED_TO_PARSE_VALUE,Pt,t),null):(e.log(E.INFO,S.PARSED_NUMERIC_VALUE,Pt,n),n)):typeof t=="number"?(n=t,e.log(E.INFO,S.PARSED_NUMERIC_VALUE,Pt,n),n):null}return null}var mr="ATTRIBUTES_VALIDATOR";function dn(r){if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return Object.keys(r).forEach(function(e){if(typeof r[e]=="undefined")throw new Error(ee(H.UNDEFINED_ATTRIBUTE,mr,e))}),!0;throw new Error(ee(H.INVALID_ATTRIBUTES,mr))}function Ir(r,e){return typeof r=="string"&&(typeof e=="string"||typeof e=="boolean"||ve.isNumber(e)&&ve.isSafeInteger(e))}var fn="campaign_activated",Or="custom",Tr="https://logx.optimizely.com/v1/events",Rr="POST";function Ar(r){var e=r.attributes,t=r.userId,n=r.clientEngine,s=r.clientVersion,d=r.configObj,L=r.logger,W=d.anonymizeIP?d.anonymizeIP:!1,x=d.botFiltering,de={snapshots:[],visitor_id:t,attributes:[]},pe={account_id:d.accountId,project_id:d.projectId,visitors:[de],revision:d.revision,client_name:n,client_version:s,anonymize_ip:W,enrich_decisions:!0};return e&&Object.keys(e||{}).forEach(function(De){var be=e[De];if(Ir(De,be)){var Ve=Ae(d,De,L);Ve&&pe.visitors[0].attributes.push({entity_id:Ve,key:De,type:Or,value:e[De]})}}),typeof x=="boolean"&&pe.visitors[0].attributes.push({entity_id:B.BOT_FILTERING,key:B.BOT_FILTERING,type:Or,value:x}),pe}function vn(r,e,t,n,s,d,L){var W=e?Oe(r,e):null,x=t?je(r,t):null;x=x||"";var de={decisions:[{campaign_id:W,experiment_id:e,variation_id:t,metadata:{flag_key:d,rule_key:n,rule_type:s,variation_key:x,enabled:L}}],events:[{entity_id:W,timestamp:ve.currentTimestamp(),key:fn,uuid:ve.uuid()}]};return de}function gn(r,e,t,n){var s={events:[]},d={entity_id:Te(r,e),timestamp:ve.currentTimestamp(),uuid:ve.uuid(),key:e};if(n){var L=_r(n,t);L!==null&&(d.revenue=L);var W=yr(n,t);W!==null&&(d.value=W),d.tags=n}return s.events.push(d),s}function En(r){var e=Ar(r),t=vn(r.configObj,r.experimentId,r.variationId,r.ruleKey,r.ruleType,r.flagKey,r.enabled);e.visitors[0].snapshots.push(t);var n={httpVerb:Rr,url:Tr,params:e};return n}function hn(r){var e=Ar(r),t=gn(r.configObj,r.eventKey,r.logger,r.eventTags);e.visitors[0].snapshots=[t];var n={httpVerb:Rr,url:Tr,params:e};return n}function Kt(r){var e,t;return(t=(e=r.experiment)===null||e===void 0?void 0:e.key)!==null&&t!==void 0?t:""}function Wt(r){var e,t;return(t=(e=r.variation)===null||e===void 0?void 0:e.key)!==null&&t!==void 0?t:""}function xt(r){var e,t;return(t=(e=r.variation)===null||e===void 0?void 0:e.featureEnabled)!==null&&t!==void 0?t:!1}function Nr(r){var e,t;return(t=(e=r.experiment)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:null}function Sr(r){var e,t;return(t=(e=r.variation)===null||e===void 0?void 0:e.id)!==null&&t!==void 0?t:null}var zt=(0,o.getLogger)("EVENT_BUILDER"),pn=function(r){var e=r.configObj,t=r.decisionObj,n=r.userId,s=r.flagKey,d=r.enabled,L=r.userAttributes,W=r.clientEngine,x=r.clientVersion,de=t.decisionSource,pe=Kt(t),De=Nr(t),be=Wt(t),Ve=Sr(t),ft=De!==null?Oe(e,De):null;return{type:"impression",timestamp:ve.currentTimestamp(),uuid:ve.uuid(),user:{id:n,attributes:Dr(e,L)},context:{accountId:e.accountId,projectId:e.projectId,revision:e.revision,clientName:W,clientVersion:x,anonymizeIP:e.anonymizeIP||!1,botFiltering:e.botFiltering},layer:{id:ft},experiment:{id:De,key:pe},variation:{id:Ve,key:be},ruleKey:pe,flagKey:s,ruleType:de,enabled:d}},_n=function(r){var e=r.configObj,t=r.userId,n=r.userAttributes,s=r.clientEngine,d=r.clientVersion,L=r.eventKey,W=r.eventTags,x=Te(e,L),de=W?_r(W,zt):null,pe=W?yr(W,zt):null;return{type:"conversion",timestamp:ve.currentTimestamp(),uuid:ve.uuid(),user:{id:t,attributes:Dr(e,n)},context:{accountId:e.accountId,projectId:e.projectId,revision:e.revision,clientName:s,clientVersion:d,anonymizeIP:e.anonymizeIP||!1,botFiltering:e.botFiltering},event:{id:x,key:L},revenue:de,value:pe,tags:W}};function Dr(r,e){var t=[];return e&&Object.keys(e||{}).forEach(function(n){var s=e[n];if(Ir(n,s)){var d=Ae(r,n,zt);d&&t.push({entityId:d,key:n,value:e[n]})}}),t}var yn="EVENT_TAGS_VALIDATOR";function mn(r){if(typeof r=="object"&&!Array.isArray(r)&&r!==null)return!0;throw new Error(ee(H.INVALID_EVENT_TAGS,yn))}var Yt="USER_PROFILE_SERVICE_VALIDATOR";function In(r){if(typeof r=="object"&&r!==null){if(typeof r.lookup!="function")throw new Error(ee(H.INVALID_USER_PROFILE_SERVICE,Yt,"Missing function 'lookup'"));if(typeof r.save!="function")throw new Error(ee(H.INVALID_USER_PROFILE_SERVICE,Yt,"Missing function 'save'"));return!0}throw new Error(ee(H.INVALID_USER_PROFILE_SERVICE,Yt))}var xe="OPTIMIZELY",On=3e4,Tn=function(){function r(e){var t=this,n,s=e.clientEngine;s||(e.logger.log(E.INFO,S.INVALID_CLIENT_ENGINE,xe,s),s=$),this.clientEngine=s,this.clientVersion=e.clientVersion||Ue,this.errorHandler=e.errorHandler,this.isOptimizelyConfigValid=e.isValidInstance,this.logger=e.logger;var d=(n=e.defaultDecideOptions)!==null&&n!==void 0?n:[];Array.isArray(d)||(this.logger.log(E.DEBUG,S.INVALID_DEFAULT_DECIDE_OPTIONS,xe),d=[]);var L={};d.forEach(function(pe){Ce[pe]?L[pe]=!0:t.logger.log(E.WARNING,S.UNRECOGNIZED_DECIDE_OPTION,xe,pe)}),this.defaultDecideOptions=L,this.projectConfigManager=kr({datafile:e.datafile,jsonSchemaValidator:e.jsonSchemaValidator,sdkKey:e.sdkKey,datafileManager:e.datafileManager}),this.disposeOnUpdate=this.projectConfigManager.onUpdate(function(pe){t.logger.log(E.INFO,S.UPDATED_OPTIMIZELY_CONFIG,xe,pe.revision,pe.projectId),t.notificationCenter.sendNotifications(Ge.OPTIMIZELY_CONFIG_UPDATE)});var W=this.projectConfigManager.onReady(),x=null;if(e.userProfileService)try{In(e.userProfileService)&&(x=e.userProfileService,this.logger.log(E.INFO,S.VALID_USER_PROFILE_SERVICE,xe))}catch(pe){this.logger.log(E.WARNING,pe.message)}this.decisionService=cn({userProfileService:x,logger:this.logger,UNSTABLE_conditionEvaluators:e.UNSTABLE_conditionEvaluators}),this.notificationCenter=e.notificationCenter,this.eventProcessor=e.eventProcessor;var de=this.eventProcessor.start();this.readyPromise=Promise.all([W,de]).then(function(pe){return pe[0]}),this.readyTimeouts={},this.nextReadyTimeoutId=0}return r.prototype.isValidInstance=function(){return this.isOptimizelyConfigValid&&!!this.projectConfigManager.getConfig()},r.prototype.activate=function(e,t,n){try{if(!this.isValidInstance())return this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"activate"),null;if(!this.validateInputs({experiment_key:e,user_id:t},n))return this.notActivatingExperiment(e,t);var s=this.projectConfigManager.getConfig();if(!s)return null;try{var d=this.getVariation(e,t,n);if(d===null)return this.notActivatingExperiment(e,t);if(!Re(s,e))return this.logger.log(E.DEBUG,S.SHOULD_NOT_DISPATCH_ACTIVATE,xe,e),d;var L=Qe(s,e),W=L.variationKeyMap[d],x={experiment:L,variation:W,decisionSource:he.EXPERIMENT};return this.sendImpressionEvent(x,"",t,!0,n),d}catch(de){return this.logger.log(E.ERROR,de.message),this.logger.log(E.INFO,S.NOT_ACTIVATING_USER,xe,t,e),this.errorHandler.handleError(de),null}}catch(de){return this.logger.log(E.ERROR,de.message),this.errorHandler.handleError(de),null}},r.prototype.sendImpressionEvent=function(e,t,n,s,d){var L=this.projectConfigManager.getConfig();if(L){var W=pn({decisionObj:e,flagKey:t,enabled:s,userId:n,userAttributes:d,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:L});this.eventProcessor.process(W),this.emitNotificationCenterActivate(e,t,n,s,d)}},r.prototype.emitNotificationCenterActivate=function(e,t,n,s,d){var L=this.projectConfigManager.getConfig();if(L){var W=e.decisionSource,x=Kt(e),de=Nr(e),pe=Wt(e),De=Sr(e),be;de!==null&&pe!==""&&(be=L.experimentIdMap[de]);var Ve={attributes:d,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:L,experimentId:de,ruleKey:x,flagKey:t,ruleType:W,userId:n,enabled:s,variationId:De,logger:this.logger},ft=En(Ve),it;be&&be.variationKeyMap&&pe!==""&&(it=be.variationKeyMap[pe]),this.notificationCenter.sendNotifications(Ge.ACTIVATE,{experiment:be,userId:n,attributes:d,variation:it,logEvent:ft})}},r.prototype.track=function(e,t,n,s){try{if(!this.isValidInstance()){this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"track");return}if(!this.validateInputs({user_id:t,event_key:e},n,s))return;var d=this.projectConfigManager.getConfig();if(!d)return;if(!Be(d,e)){this.logger.log(E.WARNING,S.EVENT_KEY_NOT_FOUND,xe,e),this.logger.log(E.WARNING,S.NOT_TRACKING_USER,xe,t);return}s=this.filterEmptyValues(s);var L=_n({eventKey:e,eventTags:s,userId:t,userAttributes:n,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:d});this.logger.log(E.INFO,S.TRACK_EVENT,xe,e,t),this.eventProcessor.process(L),this.emitNotificationCenterTrack(e,t,n,s)}catch(W){this.logger.log(E.ERROR,W.message),this.errorHandler.handleError(W),this.logger.log(E.ERROR,S.NOT_TRACKING_USER,xe,t)}},r.prototype.emitNotificationCenterTrack=function(e,t,n,s){try{var d=this.projectConfigManager.getConfig();if(!d)return;var L={attributes:n,clientEngine:this.clientEngine,clientVersion:this.clientVersion,configObj:d,eventKey:e,eventTags:s,logger:this.logger,userId:t},W=hn(L);this.notificationCenter.sendNotifications(Ge.TRACK,{eventKey:e,userId:t,attributes:n,eventTags:s,logEvent:W})}catch(x){this.logger.log(E.ERROR,x.message),this.errorHandler.handleError(x)}},r.prototype.getVariation=function(e,t,n){try{if(!this.isValidInstance())return this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"getVariation"),null;try{if(!this.validateInputs({experiment_key:e,user_id:t},n))return null;var s=this.projectConfigManager.getConfig();if(!s)return null;var d=s.experimentKeyMap[e];if(!d)return this.logger.log(E.DEBUG,H.INVALID_EXPERIMENT_KEY,xe,e),null;var L=this.decisionService.getVariation(s,d,this.createUserContext(t,n)).result,W=Ye(s,d.id)?me.FEATURE_TEST:me.AB_TEST;return this.notificationCenter.sendNotifications(Ge.DECISION,{type:W,userId:t,attributes:n||{},decisionInfo:{experimentKey:e,variationKey:L}}),L}catch(x){return this.logger.log(E.ERROR,x.message),this.errorHandler.handleError(x),null}}catch(x){return this.logger.log(E.ERROR,x.message),this.errorHandler.handleError(x),null}},r.prototype.setForcedVariation=function(e,t,n){if(!this.validateInputs({experiment_key:e,user_id:t}))return!1;var s=this.projectConfigManager.getConfig();if(!s)return!1;try{return this.decisionService.setForcedVariation(s,e,t,n)}catch(d){return this.logger.log(E.ERROR,d.message),this.errorHandler.handleError(d),!1}},r.prototype.getForcedVariation=function(e,t){if(!this.validateInputs({experiment_key:e,user_id:t}))return null;var n=this.projectConfigManager.getConfig();if(!n)return null;try{return this.decisionService.getForcedVariation(n,e,t).result}catch(s){return this.logger.log(E.ERROR,s.message),this.errorHandler.handleError(s),null}},r.prototype.validateInputs=function(e,t,n){try{if(e.hasOwnProperty("user_id")){var s=e.user_id;if(typeof s!="string"||s===null||s==="undefined")throw new Error(ee(H.INVALID_INPUT_FORMAT,xe,"user_id"));delete e.user_id}return Object.keys(e).forEach(function(d){if(!Er(e[d]))throw new Error(ee(H.INVALID_INPUT_FORMAT,xe,d))}),t&&dn(t),n&&mn(n),!0}catch(d){return this.logger.log(E.ERROR,d.message),this.errorHandler.handleError(d),!1}},r.prototype.notActivatingExperiment=function(e,t){return this.logger.log(E.INFO,S.NOT_ACTIVATING_USER,xe,t,e),null},r.prototype.filterEmptyValues=function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]===null||e[t]===void 0)&&delete e[t];return e},r.prototype.isFeatureEnabled=function(e,t,n){try{if(!this.isValidInstance())return this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"isFeatureEnabled"),!1;if(!this.validateInputs({feature_key:e,user_id:t},n))return!1;var s=this.projectConfigManager.getConfig();if(!s)return!1;var d=T(s,e,this.logger);if(!d)return!1;var L={},W=this.createUserContext(t,n),x=this.decisionService.getVariationForFeature(s,d,W).result,de=x.decisionSource,pe=Kt(x),De=Wt(x),be=xt(x);de===he.FEATURE_TEST&&(L={experimentKey:pe,variationKey:De}),(de===he.FEATURE_TEST||de===he.ROLLOUT&&Dt(s))&&this.sendImpressionEvent(x,d.key,t,be,n),be===!0?this.logger.log(E.INFO,S.FEATURE_ENABLED_FOR_USER,xe,e,t):(this.logger.log(E.INFO,S.FEATURE_NOT_ENABLED_FOR_USER,xe,e,t),be=!1);var Ve={featureKey:e,featureEnabled:be,source:x.decisionSource,sourceInfo:L};return this.notificationCenter.sendNotifications(Ge.DECISION,{type:me.FEATURE,userId:t,attributes:n||{},decisionInfo:Ve}),be}catch(ft){return this.logger.log(E.ERROR,ft.message),this.errorHandler.handleError(ft),!1}},r.prototype.getEnabledFeatures=function(e,t){var n=this;try{var s=[];if(!this.isValidInstance())return this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"getEnabledFeatures"),s;if(!this.validateInputs({user_id:e}))return s;var d=this.projectConfigManager.getConfig();return d&&C(d.featureKeyMap).forEach(function(L){n.isFeatureEnabled(L.key,e,t)&&s.push(L.key)}),s}catch(L){return this.logger.log(E.ERROR,L.message),this.errorHandler.handleError(L),[]}},r.prototype.getFeatureVariable=function(e,t,n,s){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,null,n,s):(this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"getFeatureVariable"),null)}catch(d){return this.logger.log(E.ERROR,d.message),this.errorHandler.handleError(d),null}},r.prototype.getFeatureVariableForType=function(e,t,n,s,d){if(!this.validateInputs({feature_key:e,variable_key:t,user_id:s},d))return null;var L=this.projectConfigManager.getConfig();if(!L)return null;var W=T(L,e,this.logger);if(!W)return null;var x=V(L,e,t,this.logger);if(!x)return null;if(n&&x.type!==n)return this.logger.log(E.WARNING,S.VARIABLE_REQUESTED_WITH_WRONG_TYPE,xe,n,x.type),null;var de=this.createUserContext(s,d),pe=this.decisionService.getVariationForFeature(L,W,de).result,De=xt(pe),be=this.getFeatureVariableValueFromVariation(e,De,pe.variation,x,s),Ve={};return pe.decisionSource===he.FEATURE_TEST&&pe.experiment!==null&&pe.variation!==null&&(Ve={experimentKey:pe.experiment.key,variationKey:pe.variation.key}),this.notificationCenter.sendNotifications(Ge.DECISION,{type:me.FEATURE_VARIABLE,userId:s,attributes:d||{},decisionInfo:{featureKey:e,featureEnabled:De,source:pe.decisionSource,variableKey:t,variableValue:be,variableType:x.type,sourceInfo:Ve}}),be},r.prototype.getFeatureVariableValueFromVariation=function(e,t,n,s,d){var L=this.projectConfigManager.getConfig();if(!L)return null;var W=s.defaultValue;if(n!==null){var x=ie(L,s,n,this.logger);x!==null?t?(W=x,this.logger.log(E.INFO,S.USER_RECEIVED_VARIABLE_VALUE,xe,W,s.key,e)):this.logger.log(E.INFO,S.FEATURE_NOT_ENABLED_RETURN_DEFAULT_VARIABLE_VALUE,xe,e,d,W):this.logger.log(E.INFO,S.VARIABLE_NOT_USED_RETURN_DEFAULT_VARIABLE_VALUE,xe,s.key,n.key)}else this.logger.log(E.INFO,S.USER_RECEIVED_DEFAULT_VARIABLE_VALUE,xe,d,s.key,e);return se(W,s.type,this.logger)},r.prototype.getFeatureVariableBoolean=function(e,t,n,s){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,we.BOOLEAN,n,s):(this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"getFeatureVariableBoolean"),null)}catch(d){return this.logger.log(E.ERROR,d.message),this.errorHandler.handleError(d),null}},r.prototype.getFeatureVariableDouble=function(e,t,n,s){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,we.DOUBLE,n,s):(this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"getFeatureVariableDouble"),null)}catch(d){return this.logger.log(E.ERROR,d.message),this.errorHandler.handleError(d),null}},r.prototype.getFeatureVariableInteger=function(e,t,n,s){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,we.INTEGER,n,s):(this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"getFeatureVariableInteger"),null)}catch(d){return this.logger.log(E.ERROR,d.message),this.errorHandler.handleError(d),null}},r.prototype.getFeatureVariableString=function(e,t,n,s){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,we.STRING,n,s):(this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"getFeatureVariableString"),null)}catch(d){return this.logger.log(E.ERROR,d.message),this.errorHandler.handleError(d),null}},r.prototype.getFeatureVariableJSON=function(e,t,n,s){try{return this.isValidInstance()?this.getFeatureVariableForType(e,t,we.JSON,n,s):(this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"getFeatureVariableJSON"),null)}catch(d){return this.logger.log(E.ERROR,d.message),this.errorHandler.handleError(d),null}},r.prototype.getAllFeatureVariables=function(e,t,n){var s=this;try{if(!this.isValidInstance())return this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"getAllFeatureVariables"),null;if(!this.validateInputs({feature_key:e,user_id:t},n))return null;var d=this.projectConfigManager.getConfig();if(!d)return null;var L=T(d,e,this.logger);if(!L)return null;var W=this.createUserContext(t,n),x=this.decisionService.getVariationForFeature(d,L,W).result,de=xt(x),pe={};L.variables.forEach(function(be){pe[be.key]=s.getFeatureVariableValueFromVariation(e,de,x.variation,be,t)});var De={};return x.decisionSource===he.FEATURE_TEST&&x.experiment!==null&&x.variation!==null&&(De={experimentKey:x.experiment.key,variationKey:x.variation.key}),this.notificationCenter.sendNotifications(Ge.DECISION,{type:me.ALL_FEATURE_VARIABLES,userId:t,attributes:n||{},decisionInfo:{featureKey:e,featureEnabled:de,source:x.decisionSource,variableValues:pe,sourceInfo:De}}),pe}catch(be){return this.logger.log(E.ERROR,be.message),this.errorHandler.handleError(be),null}},r.prototype.getOptimizelyConfig=function(){try{var e=this.projectConfigManager.getConfig();return e?this.projectConfigManager.getOptimizelyConfig():null}catch(t){return this.logger.log(E.ERROR,t.message),this.errorHandler.handleError(t),null}},r.prototype.close=function(){var e=this;try{var t=this.eventProcessor.stop();return this.disposeOnUpdate&&(this.disposeOnUpdate(),this.disposeOnUpdate=null),this.projectConfigManager&&this.projectConfigManager.stop(),Object.keys(this.readyTimeouts).forEach(function(n){var s=e.readyTimeouts[n];clearTimeout(s.readyTimeout),s.onClose()}),this.readyTimeouts={},t.then(function(){return{success:!0}},function(n){return{success:!1,reason:String(n)}})}catch(n){return this.logger.log(E.ERROR,n.message),this.errorHandler.handleError(n),Promise.resolve({success:!1,reason:String(n)})}},r.prototype.onReady=function(e){var t=this,n;typeof e=="object"&&e!==null&&e.timeout!==void 0&&(n=e.timeout),ve.isSafeInteger(n)||(n=On);var s,d=new Promise(function(pe){s=pe}),L=this.nextReadyTimeoutId;this.nextReadyTimeoutId++;var W=function(){delete t.readyTimeouts[L],s({success:!1,reason:ee("onReady timeout expired after %s ms",n)})},x=setTimeout(W,n),de=function(){s({success:!1,reason:"Instance closed"})};return this.readyTimeouts[L]={readyTimeout:x,onClose:de},this.readyPromise.then(function(){clearTimeout(x),delete t.readyTimeouts[L],s({success:!0})}),Promise.race([this.readyPromise,d])},r.prototype.createUserContext=function(e,t){return this.validateInputs({user_id:e},t)?new nt({optimizely:this,userId:e,attributes:t}):null},r.prototype.decide=function(e,t,n){var s=this,d,L,W,x;n===void 0&&(n=[]);var de=e.getUserId(),pe=e.getAttributes(),De=this.projectConfigManager.getConfig(),be=[],Ve;if(!this.isValidInstance()||!De)return this.logger.log(E.INFO,S.INVALID_OBJECT,xe,"decide"),ze(t,e,[_e.SDK_NOT_READY]);var ft=De.featureKeyMap[t];if(!ft)return this.logger.log(E.ERROR,H.FEATURE_NOT_IN_DATAFILE,xe,t),ze(t,e,[ee(_e.FLAG_KEY_INVALID,t)]);var it=this.getAllDecideOptions(n),It=this.decisionService.findValidatedForcedDecision(De,e,t);be.push.apply(be,It.reasons);var At=It.result;if(At)Ve={experiment:null,variation:At,decisionSource:he.FEATURE_TEST};else{var Nt=this.decisionService.getVariationForFeature(De,ft,e,it);be.push.apply(be,Nt.reasons),Ve=Nt.result}var Ot=Ve.decisionSource,Mt=(L=(d=Ve.experiment)===null||d===void 0?void 0:d.key)!==null&&L!==void 0?L:null,wr=(x=(W=Ve.variation)===null||W===void 0?void 0:W.key)!==null&&x!==void 0?x:null,wt=xt(Ve);wt===!0?this.logger.log(E.INFO,S.FEATURE_ENABLED_FOR_USER,xe,t,de):this.logger.log(E.INFO,S.FEATURE_NOT_ENABLED_FOR_USER,xe,t,de);var Xt={},br=!1;it[Ce.EXCLUDE_VARIABLES]||ft.variables.forEach(function(bt){Xt[bt.key]=s.getFeatureVariableValueFromVariation(t,wt,Ve.variation,bt,de)}),!it[Ce.DISABLE_DECISION_EVENT]&&(Ot===he.FEATURE_TEST||Ot===he.ROLLOUT&&Dt(De))&&(this.sendImpressionEvent(Ve,t,de,wt,pe),br=!0);var Vn=it[Ce.INCLUDE_REASONS],$t=[];Vn&&($t=be.map(function(bt){return ee.apply(void 0,h([bt[0]],bt.slice(1)))}));var Fn={flagKey:t,enabled:wt,variationKey:wr,ruleKey:Mt,variables:Xt,reasons:$t,decisionEventDispatched:br};return this.notificationCenter.sendNotifications(Ge.DECISION,{type:me.FLAG,userId:de,attributes:pe,decisionInfo:Fn}),{variationKey:wr,enabled:wt,variables:Xt,ruleKey:Mt,flagKey:t,userContext:e,reasons:$t}},r.prototype.getAllDecideOptions=function(e){var t=this,n=R({},this.defaultDecideOptions);return Array.isArray(e)?e.forEach(function(s){Ce[s]?n[s]=!0:t.logger.log(E.WARNING,S.UNRECOGNIZED_DECIDE_OPTION,xe,s)}):this.logger.log(E.DEBUG,S.INVALID_DECIDE_OPTIONS,xe),n},r.prototype.decideForKeys=function(e,t,n){var s=this;n===void 0&&(n=[]);var d={};if(!this.isValidInstance())return this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"decideForKeys"),d;if(t.length===0)return d;var L=this.getAllDecideOptions(n);return t.forEach(function(W){var x=s.decide(e,W,n);(!L[Ce.ENABLED_FLAGS_ONLY]||x.enabled)&&(d[W]=x)}),d},r.prototype.decideAll=function(e,t){t===void 0&&(t=[]);var n=this.projectConfigManager.getConfig(),s={};if(!this.isValidInstance()||!n)return this.logger.log(E.ERROR,S.INVALID_OBJECT,xe,"decideAll"),s;var d=Object.keys(n.featureKeyMap);return this.decideForKeys(e,d,t)},r}(),Rn=function(r){return typeof r=="number"&&ve.isSafeInteger(r)?r>=1:!1},An=function(r){return typeof r=="number"&&ve.isSafeInteger(r)?r>0:!1},Cr={validateEventBatchSize:Rn,validateEventFlushInterval:An},Nn="NOTIFICATION_CENTER",Sn=function(){function r(e){var t=this;this.logger=e.logger,this.errorHandler=e.errorHandler,this.notificationListeners={},C(Ge).forEach(function(n){t.notificationListeners[n]=[]}),this.listenerId=1}return r.prototype.addNotificationListener=function(e,t){try{var n=C(Ge),s=n.indexOf(e)>-1;if(!s)return-1;this.notificationListeners[e]||(this.notificationListeners[e]=[]);var d=!1;if((this.notificationListeners[e]||[]).forEach(function(W){if(W.callback===t){d=!0;return}}),d)return-1;this.notificationListeners[e].push({id:this.listenerId,callback:t});var L=this.listenerId;return this.listenerId+=1,L}catch(W){return this.logger.log(E.ERROR,W.message),this.errorHandler.handleError(W),-1}},r.prototype.removeNotificationListener=function(e){var t=this;try{var n,s;if(Object.keys(this.notificationListeners).some(function(d){var L=t.notificationListeners[d];return(L||[]).every(function(W,x){return W.id===e?(n=x,s=d,!1):!0}),n!==void 0&&s!==void 0}),n!==void 0&&s!==void 0)return this.notificationListeners[s].splice(n,1),!0}catch(d){this.logger.log(E.ERROR,d.message),this.errorHandler.handleError(d)}return!1},r.prototype.clearAllNotificationListeners=function(){var e=this;try{C(Ge).forEach(function(t){e.notificationListeners[t]=[]})}catch(t){this.logger.log(E.ERROR,t.message),this.errorHandler.handleError(t)}},r.prototype.clearNotificationListeners=function(e){try{this.notificationListeners[e]=[]}catch(t){this.logger.log(E.ERROR,t.message),this.errorHandler.handleError(t)}},r.prototype.sendNotifications=function(e,t){var n=this;try{(this.notificationListeners[e]||[]).forEach(function(s){var d=s.callback;try{d(t)}catch(L){n.logger.log(E.ERROR,S.NOTIFICATION_LISTENER_EXCEPTION,Nn,e,L.message)}})}catch(s){this.logger.log(E.ERROR,s.message),this.errorHandler.handleError(s)}},r}();function Dn(r){return new Sn(r)}function Cn(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return new(l.LogTierV1EventProcessor.bind.apply(l.LogTierV1EventProcessor,h([void 0],r)))}var Ln={createEventProcessor:Cn,LocalStoragePendingEventsDispatcher:l.LocalStoragePendingEventsDispatcher};function Pn(r,e,t,n){var s={sdkKey:r};if((n===void 0||typeof n=="object"&&n!==null)&&ve.assign(s,n),t){var d=St({datafile:t,jsonSchemaValidator:void 0,logger:e}),L=d.configObj,W=d.error;W&&e.error(W),L&&(s.datafile=lt(L))}return new _.z(s)}var Rt=(0,o.getLogger)();(0,o.setLogHandler)(Q()),(0,o.setLogLevel)(o.LogLevel.INFO);var Un="INDEX_BROWSER",Lr=10,Pr=1e3,Mn=1e4,Zt=!1,Ur=function(r){try{var e=!1;r.errorHandler&&(0,o.setErrorHandler)(r.errorHandler),r.logger&&((0,o.setLogHandler)(r.logger),(0,o.setLogLevel)(o.LogLevel.NOTSET)),r.logLevel!==void 0&&(0,o.setLogLevel)(r.logLevel);try{M.validate(r),e=!0}catch(De){Rt.error(De)}var t=void 0;r.eventDispatcher==null?(t=new l.LocalStoragePendingEventsDispatcher({eventDispatcher:D}),Zt||(t.sendPendingEvents(),Zt=!0)):t=r.eventDispatcher;var n=r.eventBatchSize,s=r.eventFlushInterval;Cr.validateEventBatchSize(r.eventBatchSize)||(Rt.warn("Invalid eventBatchSize %s, defaulting to %s",r.eventBatchSize,Lr),n=Lr),Cr.validateEventFlushInterval(r.eventFlushInterval)||(Rt.warn("Invalid eventFlushInterval %s, defaulting to %s",r.eventFlushInterval,Pr),s=Pr);var d=(0,o.getErrorHandler)(),L=Dn({logger:Rt,errorHandler:d}),W={dispatcher:t,flushInterval:s,batchSize:n,maxQueueSize:r.eventMaxQueueSize||Mn,notificationCenter:L},x=R(R({clientEngine:z},r),{eventProcessor:Ln.createEventProcessor(W),logger:Rt,errorHandler:d,datafileManager:r.sdkKey?Pn(r.sdkKey,Rt,r.datafile,r.datafileOptions):void 0,notificationCenter:L,isValidInstance:e}),de=new Tn(x);try{if(typeof window.addEventListener=="function"){var pe="onpagehide"in window?"pagehide":"unload";window.addEventListener(pe,function(){de.close()},!1)}}catch(De){Rt.error(S.UNABLE_TO_ATTACH_UNLOAD,Un,De.message)}return de}catch(De){return Rt.error(De),null}},Mr=function(){Zt=!1},wn={logging:Ne,errorHandler:Z,eventDispatcher:D,enums:et,setLogger:o.setLogHandler,setLogLevel:o.setLogLevel,createInstance:Ur,__internalResetRetryState:Mr,OptimizelyDecideOption:Ce};const bn=wn},4336:(k,u,i)=>{var o=i(7653),c=i(39123),l=c;l.v1=o,l.v4=c,k.exports=l},4564:k=>{for(var u=[],i=0;i<256;++i)u[i]=(i+256).toString(16).substr(1);function o(c,l){var a=l||0,v=u;return[v[c[a++]],v[c[a++]],v[c[a++]],v[c[a++]],"-",v[c[a++]],v[c[a++]],"-",v[c[a++]],v[c[a++]],"-",v[c[a++]],v[c[a++]],"-",v[c[a++]],v[c[a++]],v[c[a++]],v[c[a++]],v[c[a++]],v[c[a++]]].join("")}k.exports=o},54994:k=>{var u=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(u){var i=new Uint8Array(16);k.exports=function(){return u(i),i}}else{var o=new Array(16);k.exports=function(){for(var l=0,a;l<16;l++)l&3||(a=Math.random()*4294967296),o[l]=a>>>((l&3)<<3)&255;return o}}},7653:(k,u,i)=>{var o=i(54994),c=i(4564),l,a,v=0,p=0;function m(f,_,R){var h=_&&R||0,I=_||[];f=f||{};var P=f.node||l,O=f.clockseq!==void 0?f.clockseq:a;if(P==null||O==null){var g=o();P==null&&(P=l=[g[0]|1,g[1],g[2],g[3],g[4],g[5]]),O==null&&(O=a=(g[6]<<8|g[7])&16383)}var w=f.msecs!==void 0?f.msecs:new Date().getTime(),J=f.nsecs!==void 0?f.nsecs:p+1,G=w-v+(J-p)/1e4;if(G<0&&f.clockseq===void 0&&(O=O+1&16383),(G<0||w>v)&&f.nsecs===void 0&&(J=0),J>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");v=w,p=J,a=O,w+=122192928e5;var N=((w&268435455)*1e4+J)%4294967296;I[h++]=N>>>24&255,I[h++]=N>>>16&255,I[h++]=N>>>8&255,I[h++]=N&255;var Y=w/4294967296*1e4&268435455;I[h++]=Y>>>8&255,I[h++]=Y&255,I[h++]=Y>>>24&15|16,I[h++]=Y>>>16&255,I[h++]=O>>>8|128,I[h++]=O&255;for(var A=0;A<6;++A)I[h+A]=P[A];return _||c(I)}k.exports=m},39123:(k,u,i)=>{var o=i(54994),c=i(4564);function l(a,v,p){var m=v&&p||0;typeof a=="string"&&(v=a==="binary"?new Array(16):null,a=null),a=a||{};var f=a.random||(a.rng||o)();if(f[6]=f[6]&15|64,f[8]=f[8]&63|128,v)for(var _=0;_<16;++_)v[m+_]=f[_];return v||c(f)}k.exports=l},4237:(k,u,i)=>{var o,c=i(25216);o={value:!0},u.Z=void 0;var l=c(i(58167)),a=i(65866),v=i(44682),p=i(92837),m=i(99),f=c(i(5326));function _(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.TYPEFORM_DOMAIN,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(0,a.v4)();return(0,v.hasPerformanceConsent)()&&(l.default.set(p.ATTRIBUTION_COOKIE_NAME,O,{expires:365,domain:P,sameSite:"None",secure:!0}),f.default.createOrUpdate(P)),O}function R(){var P=l.default.get(p.ATTRIBUTION_COOKIE_NAME);return P||h.generateUser()}var h={generateUser:_,getUser:R},I=h;u.Z=I},21448:(k,u,i)=>{var o=i(25216);Object.defineProperty(u,"__esModule",{value:!0}),u.getMandatoryProperties=C,u.setCollectUntrackedEvents=oe,u.updateMandatoryProperties=Ee,u.isInitialized=fe,u.isLoading=Pe,u.identify=Ue,u.group=me,u.reset=he,u.collectEvent=$e,u.sendEvent=_e,u.sendPage=Ge,u.setUserProperties=et,u.incrementUserProperty=qe,u.updateWidget=vt,u.sendOrder=U,u.trackPresentConversation=le,u.trackStartConversation=M,u.trackAbTest=K,u.trackCreateTypeform=Z,u.trackTypeformDeleted=te,u.trackPublishTypeform=ce,u.trackChangeDesign=We,u.trackUseFeature=ke,u.trackIntegrationSetup=Je,u.trackIntegrationUsed=D,u.trackItemClicked=F,u.trackVaXsellingClicked=Q,u.trackVaXsellingViewed=ue,u.trackSaveFailed=Ne,u.trackViewPageSection=Me,u.trackPopupOpened=Ce,u.trackPopupClosed=ze,u.trackMenuOpened=nt,u.trackAccountSwitched=at,u.trackBlockDefined=ot,u.trackBlockDeleted=tt,u.trackWorkspaceCreated=st,u.trackPanelOpened=rt,u.trackProTrialStarted=pt,u.trackAnswerChanged=mt,u.sendEventWithCache=gt,u.trackSurfaceOpened=ut,u.trackSearchQueryEntered=yt,u.trackSearchQueryRemoved=_t,u.trackTmpUseFeature=X,u.trackTmpPopupOpened=j,u.trackTmpItemClicked=re,u.trackTmpViewPageSection=ge,u.trackTmpMessageShown=Oe,u.onTrackingDataReady=Ae,u.trackMessageShown=Ie,u.trackTmpPageNavigated=ne,u.trackPageNavigated=Re,u.trackPageClosed=Le,u.trackBrowserZoomed=je,u.trackPublishTypeformFailed=Xe,u.trackModalOpened=Ke,u.default=u.SUPPORTED_PROVIDERS=void 0;var c=o(i(19390)),l=o(i(48418)),a=o(i(6742)),v=o(i(48066)),p=o(i(81013)),m=o(i(30728)),f=o(i(58167)),_=i(92837),R=o(i(3202)),h=i(44682),I=i(3373),P;function O(y,b){var T=Object.keys(y);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(y);b&&(V=V.filter(function(ie){return Object.getOwnPropertyDescriptor(y,ie).enumerable})),T.push.apply(T,V)}return T}function g(y){for(var b=1;b<arguments.length;b++){var T=arguments[b]!=null?arguments[b]:{};b%2?O(Object(T),!0).forEach(function(V){(0,m.default)(y,V,T[V])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(T)):O(Object(T)).forEach(function(V){Object.defineProperty(y,V,Object.getOwnPropertyDescriptor(T,V))})}return y}var w={RUDDERSTACK:_.RUDDERSTACK,SEGMENT:_.SEGMENT};u.SUPPORTED_PROVIDERS=w,typeof window!="undefined"&&(window.dataLayer=window.dataLayer||[]);var J={dataLayerPush:!1,optimizelyIntegration:!1,providers:(P={},(0,m.default)(P,_.SEGMENT,{isLoading:function(){return!!window.analytics&&!fe(_.SEGMENT)},initialized:function(){var b,T,V;return((b=window)===null||b===void 0||(T=b.analytics)===null||T===void 0?void 0:T.invoked)||((V=window.analytics)===null||V===void 0?void 0:V.initialized)}}),(0,m.default)(P,_.RUDDERSTACK,{isLoading:function(){return!!window.rudderanalytics&&!fe(_.RUDDERSTACK)},initialized:function(){var b,T;return(b=window)===null||b===void 0||(T=b.rudderanalytics)===null||T===void 0?void 0:T.initialized}}),P),collectUntrackedEvents:!0},G={email:null},N={},Y=[],A="segment_loaded";function C(){return N}function q(){var y=(0,p.default)(Y);Y=[],y.forEach(function(b){b()})}function oe(y){J.collectUntrackedEvents=y}function ye(){var y=window.analytics.user;if(typeof y!="undefined"){var b=y().traits();return b.email||null}}function ee(y){if(y&&!y.email){var b=G.email===null;b&&(G.email=ye()||null),G.email!==null&&(y.email=G.email)}}function ve(y){var b=f.default.get(_.OPTIMIZELY_USER_COOKIE_ID),T=typeof y!="function"&&y||{};if(b){var V={Optimizely:g({userId:b},T.Optimizely)};T=g(g({},T),V)}return T}function E(y,b){var T="init was not called with mandatoryProperties. Cannot call ".concat(y,". Please call init with the mandatoryProperties.");R.default.warn(T),b&&b({error:T})}function H(y){if(!y.dataPlaneUrl){R.default.warn("Rudderstack tracking could not be initialised because 'config.dataPlaneUrl' is not valid.");return}if(!fe(w.RUDDERSTACK)){i(98708),i(50748);var b=y.dataPlaneUrl,T=y.key,V=y.options;window.rudderanalytics.load(T,b,V),J.collectUntrackedEvents&&window.rudderanalytics.ready(q)}}function S(y){var b=y.key,T=y.options;fe(w.SEGMENT)||(i(86292),window.analytics.load(b,T),window.dataLayer.push({event:A}),J.collectUntrackedEvents&&window.analytics.ready(q))}function B(y){var b=y.name,T=y.config;if(!fe(b)){if(!T){R.default.warn("".concat(b," tracking cannot be initialised because no config was provided"));return}if(!T.key){R.default.warn("".concat(b," tracking cannot be initialised because 'config.key' is not valid"));return}try{switch(b){case _.RUDDERSTACK:H(T);break;case _.SEGMENT:default:S(T);break}}catch(V){R.default.error("There was an error when initialising ".concat(b," tracking. Please report this error to the library maintainers: "),V);return}}}function z(y,b){if(!y||Array.isArray(y)&&!y.length){R.default.error("There was an error when initialising tracking. No tracking providers were provided");return}if(b&&Ee(b),Array.isArray(y)){y.forEach(function(T){T&&B(T)});return}B(y)}var $;function ae(y,b,T){var V=arguments.length>3&&arguments[3]!==void 0?arguments[3]:_.GTM_ID,ie=arguments.length>4?arguments[4]:void 0;(0,I.hasLoaded)(V)||(0,I.load)(V),J.dataLayerPush=!0,b&&Ee(b);var se=(0,h.hasConsentCookie)(),Fe=(0,h.hasFunctionalConsent)(),Be=se&&Fe;if(Be){if(ie&&(ie.sdkKey||ie.datafile)){var Ye=i(92577);$=Ye.createInstance(g({eventBatchSize:10,eventFlushInterval:1e3},ie)),window.optimizelyClientInstance=$,J.optimizelyIntegration=!0}var lt=g({},T||{});(0,h.hasConsentCookie)()&&(lt.integrations=g(g({},lt==null?void 0:lt.integrations),{},{"Actions Amplitude":!0,FullStory:(0,h.hasTargetingConsent)()})),S({key:y,options:lt})}}function Ee(y){y&&(N=g(g({},N),y))}function fe(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_.SEGMENT;return J.providers[y].initialized()}function Pe(){var y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_.SEGMENT;return J.providers[y].isLoading()}function Ue(y,b,T,V){if(!fe(_.SEGMENT)){V&&V();return}b&&b.email&&(G.email=b.email),window.analytics.identify(y,b,T,V)}function me(y,b,T,V){fe(_.SEGMENT)?window.analytics.group(y,b,T,V):V&&V()}function he(){fe(_.SEGMENT)&&window.analytics.reset(),fe(_.RUDDERSTACK)&&window.rudderanalytics.reset()}function He(y,b,T,V){window.rudderanalytics.track(y,b,T,V)}function we(y,b,T,V){ee(b);var ie=T;J.optimizelyIntegration&&!_.EVENTS_BLOCKED_FROM_OPTIMIZELY.includes(y)&&(ie=ve(T),typeof T=="function"&&(V=T)),window.analytics.track(y,b,ie,V)}function $e(y,b,T,V){Y.push(function(){_e(y,b,T,V)})}function _e(y,b,T,V){var ie=Object.values(w).filter(fe),se=ie.length>0,Fe=Object.values(w).some(Pe);if(!se){var Be;Fe||R.default.warn("sendEvent was called when trackingService has not been initialized",{eventName:y,properties:b,options:T}),typeof b=="function"&&(V=b),typeof T=="function"&&(V=T),(Be=V)===null||Be===void 0||Be(),J.collectUntrackedEvents&&$e(y,b,T,V);return}return(0,v.default)(b)!=="object"&&R.default.warn("sendEvent called without properties"),J.dataLayerPush&&window.dataLayer.push(g({event:y},b)),Promise.all(ie.map(function(Ye){return new Promise(function(lt,St){try{switch(Ye){case _.RUDDERSTACK:He(y,b,T,lt);break;case _.SEGMENT:default:we(y,b,T,lt)}}catch(Dt){R.default.warn("An error occurred while tracking on ".concat(Ye,": ").concat(Dt)),St(Dt)}})})).finally(function(){V&&V()})}function Ge(y,b){fe(_.SEGMENT)&&window.analytics.page(y,b)}function et(y,b,T){fe(_.SEGMENT)?(b&&b.email&&(G.email=b.email),window.analytics.identify(y,b,{},T)):T&&T()}function qe(y,b){fe(_.SEGMENT)&&window.analytics.identify(y,{},{integrations:{Intercom:{increments:b}}})}function vt(){fe(_.SEGMENT)&&typeof window.Intercom!="undefined"&&window.Intercom("update")}function U(y){fe(_.SEGMENT)&&(window.analytics.track("Added Product",y.product),window.analytics.track("Completed Order",{orderId:y.transactionId,total:y.total,revenue:y.total,currency:y.currency,label:y.sku,products:[y.product]}))}function le(y,b,T){var V=y.attribution_uid,ie=y.distribution_channel,se=ie===void 0?"standard":ie,Fe=(0,a.default)(y,["attribution_uid","distribution_channel"]);if(!V){var Be="The attribution_uid property is mandatory. Cannot call trackPresentConversation. Please send with the attribution_uid property";R.default.warn(Be),T&&T({error:Be});return}_e("present_conversation",g({attribution_uid:V,distribution_channel:se},Fe),b,T)}function M(y,b,T){var V=y.attribution_uid,ie=y.distribution_channel,se=ie===void 0?"standard":ie,Fe=(0,a.default)(y,["attribution_uid","distribution_channel"]);if(!V){var Be="The attribution_uid property is mandatory. Cannot call trackStartConversation. Please send with the attribution_uid property";R.default.warn(Be),T&&T({error:Be});return}_e("start_conversation",g({attribution_uid:V,distribution_channel:se},Fe),b,T)}function K(y,b,T){var V=y.test_id,ie=y.variant_id,se=y.variant_label,Fe=(0,a.default)(y,["test_id","variant_id","variant_label"]);if(!se)if(ie){var Be="trackAbTest was called with variant_id instead of variant_label. Please call with a variant_label.";R.default.warn(Be),se=ie.toString()}else{var Ye="trackAbTest was called without a variant_label. Cannot call trackAbTest. Please call with a variant_label.";R.default.warn(Ye),T&&T({error:Ye});return}if(se===_.OUT_OF_EXPERIMENT){T&&T();return}_e("ab_test",g(g({test_id:V,variant_label:se},N),Fe),b,T)}function Z(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackCreateTypeform",T);_e("create_typeform",g(g({category:ie},N),se),b,T)}function te(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackTypeformDeleted",T);_e("typeform_deleted",g(g({category:ie},N),se),b,T)}function ce(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackPublishTypeform",T);_e("publish_typeform",g(g({category:ie},N),se),b,T)}function We(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackChangeDesign",T);_e("change_design",g(g({category:ie},N),se),b,T)}function ke(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackUseFeature",T);_e("use_feature",g(g({category:ie},N),se),b,T)}function Je(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackIntegrationSetup",T);_e("integration_setup",g(g({category:ie},N),se),b,T)}function D(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackIntegrationUsed",T);_e("integration_used",g(g({category:ie},N),se),b,T)}function F(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackItemClicked",T);_e("item_clicked",g(g({category:ie},N),se),b,T)}function Q(y,b,T){if(!Object.keys(N).length)return E("trackVaXSellingClicked",T);_e("va_xselling_clicked",g(g({},N),y),b,T)}function ue(y,b,T){if(!Object.keys(N).length)return E("trackVaXsellingViewed",T);_e("va_xselling_viewed",g(g({},N),y),b,T)}function Ne(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackSaveFailed",T);_e("form_save_failed",g(g({category:ie},N),se),b,T)}function Me(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackViewPageSection",T);_e("view_page_section",g(g({category:ie},N),se),b,T)}function Ce(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackPopupOpened",T);_e("popup_opened",g(g({category:ie},N),se),b,T)}function ze(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackPopupClosed",T);_e("popup_closed",g(g({category:ie},N),se),b,T)}function nt(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackMenuOpened",T);_e("menu_opened",g(g({category:ie},N),se),b,T)}function at(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackAccountSwitched",T);_e("account_switched",g(g({category:ie},N),se),b,T)}function ot(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackBlockDefined",T);_e("block_defined",g(g({category:ie},N),se),b,T)}function tt(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackBlockDeleted",T);_e("block_deleted",g(g({category:ie},N),se),b,T)}function st(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackWorkspaceCreated",T);_e("workspace_created",g(g({category:ie},N),se),b,T)}function rt(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackPanelOpened",T);_e("panel_opened",g(g({category:ie},N),se),b,T)}function pt(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackProTrialStarted",T);_e("pro_trial_started",g(g({category:ie},N),se),b,T)}function mt(y,b,T){if(!Object.keys(N).length)return E("trackAnswerChanged",T);_e("answer_changed",g(g({},N),y),b,T)}function gt(y,b,T,V){if(!Object.keys(N).length)return E("sendEventWithCache",V);var ie=b.category||"admin";_e(y,g(g({category:ie},N),b),T,V)}function ut(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackSurfaceOpened",T);_e("surface_opened",g(g({category:ie},N),se),b,T)}function yt(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackSearchQueryEntered",T);_e("search_query_entered",g(g({category:ie},N),se),b,T)}function _t(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackSearchQueryRemoved",T);_e("search_query_removed",g(g({category:ie},N),se),b,T)}function X(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=y.test_id,Fe=y.feature,Be=(0,a.default)(y,["category","test_id","feature"]);if(!Object.keys(N).length)return E("trackTmpUseFeature",T);if(!se||!Fe){var Ye='"test_id" and "feature" properties are mandatory. Cannot call trackTmpUseFeature.';R.default.warn(Ye),T&&T({error:Ye});return}_e("tmp_use_feature",g(g({category:ie,test_id:se,feature:Fe},N),Be),b,T)}function j(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=y.test_id,Fe=y.popup,Be=(0,a.default)(y,["category","test_id","popup"]);if(!Object.keys(N).length)return E("trackTmpPopupOpened",T);if(!se||!Fe){var Ye='"test_id" and "popup" properties are mandatory. Cannot call trackTmpPopupOpened.';R.default.warn(Ye),T&&T({error:Ye});return}_e("tmp_popup_opened",g(g({category:ie,test_id:se,popup:Fe},N),Be),b,T)}function re(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=y.test_id,Fe=y.item,Be=(0,a.default)(y,["category","test_id","item"]);if(!Object.keys(N).length)return E("trackTmpItemClicked",T);if(!se||!Fe){var Ye='"test_id" and "item" properties are mandatory. Cannot call trackTmpItemClicked.';R.default.warn(Ye),T&&T({error:Ye});return}_e("tmp_item_clicked",g(g({category:ie,test_id:se,item:Fe},N),Be),b,T)}function ge(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=y.test_id,Fe=y.page,Be=y.section,Ye=(0,a.default)(y,["category","test_id","page","section"]);if(!Object.keys(N).length)return E("trackTmpViewPageSection",T);if(!se||!Fe||!Be){var lt='"test_id", "page" and "section" properties are mandatory. Cannot call trackTmpViewPageSection.';R.default.warn(lt),T&&T({error:lt});return}_e("tmp_view_page_section",g(g({category:ie,test_id:se,page:Fe,section:Be},N),Ye),b,T)}function Oe(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=y.test_id,Fe=y.message,Be=(0,a.default)(y,["category","test_id","message"]);if(!Object.keys(N).length)return E("trackTmpMessageShown",T);if(!se||!Fe){var Ye='"test_id" and "message" properties are mandatory. Cannot call trackTmpMessageShown.';R.default.warn(Ye),T&&T({error:Ye});return}_e("tmp_message_shown",g(g({category:ie,test_id:se,message:Fe},N),Be),b,T)}function Ae(y){return Te.apply(this,arguments)}function Te(){return Te=(0,l.default)(c.default.mark(function y(b){var T,V;return c.default.wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,(T=$)===null||T===void 0||(V=T.onReady)===null||V===void 0?void 0:V.call(T);case 2:b==null||b();case 3:case"end":return se.stop()}},y)})),Te.apply(this,arguments)}function Ie(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackMessageShown",T);_e("message_shown",g(g({category:ie},N),se),b,T)}function ne(y,b,T){var V=y.test_id,ie=y.item,se=y.value,Fe=y.location,Be=(0,a.default)(y,["test_id","item","value","location"]);if(!Object.keys(N).length)return E("trackTmpPageNavigated",T);if(!V||!ie||!se||!Fe){var Ye='"test_id", "item", "value" and "location" properties are mandatory. Cannot call trackTmpPageNavigated.';R.default.warn(Ye),T&&T({error:Ye});return}_e("tmp_page_navigated",g(g(g({},N),Be),{},{item:ie,location:Fe,test_id:V,value:se}),b,T)}function Re(y,b,T){var V=y.item,ie=y.location,se=y.page,Fe=y.section,Be=(0,a.default)(y,["item","location","page","section"]);if(!Object.keys(N).length)return E("trackPageNavigated",T);if(!V||!ie||!se||!Fe){var Ye='"item", "location", "page" and "section" properties are mandatory. Cannot call trackPageNavigated.';R.default.warn(Ye),T&&T({error:Ye});return}_e("page_navigated",g(g(g({},N),Be),{},{item:V,location:ie,page:se,section:Fe}),b,T)}function Le(y,b,T){var V=y.page,ie=y.section,se=y.category,Fe=se===void 0?"admin":se,Be=(0,a.default)(y,["page","section","category"]);if(!Object.keys(N).length)return E("trackPageClosed",T);_e("page_closed",g(g({page:V,section:ie,category:Fe},N),Be),b,T)}function je(y,b,T){var V=y.zoom_type,ie=y.zoom_percentage,se=y.category,Fe=se===void 0?"admin":se,Be=(0,a.default)(y,["zoom_type","zoom_percentage","category"]);if(!Object.keys(N).length)return E("trackBrowserZoomed",T);if(!V||!ie||!Fe){var Ye='"zoom_type", "zoom_percentage", "category" properties are mandatory. Cannot call trackBrowserZoomed.';R.default.warn(Ye),T&&T({error:Ye});return}_e("browser_zoomed",g(g({zoom_type:V,zoom_percentage:ie,category:Fe},N),Be),b,T)}function Xe(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackPublishTypeformFailed",T);_e("publish_typeform_failed",g(g({category:ie},N),se),b,T)}function Ke(y,b,T){var V=y.category,ie=V===void 0?"admin":V,se=(0,a.default)(y,["category"]);if(!Object.keys(N).length)return E("trackModalOpened",T);_e("modal_opened",g(g({category:ie},N),se),b,T)}var Qe={init:ae,initRenderer:z,onTrackingDataReady:Ae,identify:Ue,group:me,reset:he,isInitialized:fe,sendEvent:_e,getMandatoryProperties:C,sendPage:Ge,setUserProperties:et,incrementUserProperty:qe,updateWidget:vt,sendOrder:U,trackPresentConversation:le,trackStartConversation:M,trackAbTest:K,trackCreateTypeform:Z,trackTypeformDeleted:te,trackPublishTypeform:ce,trackChangeDesign:We,trackUseFeature:ke,trackIntegrationSetup:Je,trackIntegrationUsed:D,trackItemClicked:F,trackSaveFailed:Ne,trackViewPageSection:Me,trackPopupOpened:Ce,trackPopupClosed:ze,trackBlockDefined:ot,trackBlockDeleted:tt,trackWorkspaceCreated:st,trackPanelOpened:rt,trackProTrialStarted:pt,trackAnswerChanged:mt,sendEventWithCache:gt,trackSurfaceOpened:ut,trackMenuOpened:nt,trackAccountSwitched:at,trackSearchQueryEntered:yt,trackSearchQueryRemoved:_t,trackTmpItemClicked:re,trackTmpPopupOpened:j,trackTmpUseFeature:X,trackTmpViewPageSection:ge,trackTmpMessageShown:Oe,trackMessageShown:Ie,trackTmpPageNavigated:ne,trackPageNavigated:Re,updateMandatoryProperties:Ee,trackPageClosed:Le,trackPublishTypeformFailed:Xe,trackVaXsellingClicked:Q,trackVaXsellingViewed:ue,trackBrowserZoomed:je,trackModalOpened:Ke},Ze=Qe;u.default=Ze},44682:(k,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.hasConsentCookie=g,u.hasPerformanceConsent=G,u.hasFunctionalConsent=A,u.hasTargetingConsent=C,u.gtag=q,u.TARGETING_CATEGORY=u.FUNCTIONAL_CATEGORY=u.PERFORMANCE_CATEGORY=u.REQUIRED_CATEGORY=u.CONSENT=u.AD_STORAGE=u.ANALYTICS_STORAGE=u.ONETRUST_EVENT=u.defaultDataDomainScript=u.scriptSrc=void 0;var i="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js";u.scriptSrc=i;var o="dc37179a-4de5-4648-bd8f-2f087ec53cbd";u.defaultDataDomainScript=o;var c="OneTrustGroupsUpdated";u.ONETRUST_EVENT=c;var l="analytics_storage";u.ANALYTICS_STORAGE=l;var a="ad_storage";u.AD_STORAGE=a;var v="consent";u.CONSENT=v;var p="OptanonConsent",m="OptanonAlertBoxClosed",f="tf_respondent_cc",_="2";function R(oe){var ye=new RegExp("(?:^|;\\s*)".concat("".concat(oe).replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"=([^;]*)")).exec(document.cookie);return ye&&ye[1]}var h="1:1";u.REQUIRED_CATEGORY=h;var I="2:1";u.PERFORMANCE_CATEGORY=I;var P="3:1";u.FUNCTIONAL_CATEGORY=P;var O="4:1";u.TARGETING_CATEGORY=O;function g(){var oe=R(p),ye=R(m);return!!oe&&!!ye}function w(){if(typeof window=="undefined")return[];var oe=R(f);if(oe){var ye=decodeURIComponent(oe);return JSON.parse(ye).groups}return[]}function J(){if(typeof window=="undefined")return[];var oe=R(p);if(oe){var ye=decodeURIComponent(oe),ee=new URLSearchParams(ye).get("groups")||"";return ee.split(",")}return[]}function G(){var oe=J();return oe.includes(I)||Y()}function N(){var oe=J();return oe.includes(P)}function Y(){var oe=w();return oe.includes(_)}function A(){return N()||Y()}function C(){var oe=J();return oe.includes(O)}function q(){return`window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('`.concat(v,"', 'default', { '").concat(l,`': 'denied'});
  gtag('`).concat(v,"', 'default', { '").concat(a,"': 'denied', 'wait_for_update': 500 });")}},68291:(k,u,i)=>{var o=i(25216);Object.defineProperty(u,"__esModule",{value:!0}),u.getExperimentVariant=void 0;var c=o(i(30728)),l=o(i(24623)),a=i(92837);function v(R,h){var I=Object.keys(R);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(R);h&&(P=P.filter(function(O){return Object.getOwnPropertyDescriptor(R,O).enumerable})),I.push.apply(I,P)}return I}function p(R){for(var h=1;h<arguments.length;h++){var I=arguments[h]!=null?arguments[h]:{};h%2?v(Object(I),!0).forEach(function(P){(0,c.default)(R,P,I[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(I)):v(Object(I)).forEach(function(P){Object.defineProperty(R,P,Object.getOwnPropertyDescriptor(I,P))})}return R}var m=Object.entries(a.VARIANT_SELECTOR_BY_KEY).reduce(function(R,h){var I=(0,l.default)(h,2),P=I[0],O=I[1];return p(p({},R),{},(0,c.default)({},O,P))},{}),f=Object.keys(m).reduce(function(R,h){return p(p({},R),{},(0,c.default)({},h,!1))},{}),_=function(h){var I=p({},f);return h in a.VARIANT_SELECTOR_BY_KEY&&(I[a.VARIANT_SELECTOR_BY_KEY[h]]=!0),I};u.getExperimentVariant=_},61543:(k,u,i)=>{var o=i(725);Object.defineProperty(u,"__esModule",{value:!0});var c={};u.default=void 0;var l=o(i(21448));Object.keys(l).forEach(function(f){f==="default"||f==="__esModule"||Object.prototype.hasOwnProperty.call(c,f)||f in u&&u[f]===l[f]||Object.defineProperty(u,f,{enumerable:!0,get:function(){return l[f]}})});var a=i(86580);Object.keys(a).forEach(function(f){f==="default"||f==="__esModule"||Object.prototype.hasOwnProperty.call(c,f)||f in u&&u[f]===a[f]||Object.defineProperty(u,f,{enumerable:!0,get:function(){return a[f]}})});var v=i(56964);Object.keys(v).forEach(function(f){f==="default"||f==="__esModule"||Object.prototype.hasOwnProperty.call(c,f)||f in u&&u[f]===v[f]||Object.defineProperty(u,f,{enumerable:!0,get:function(){return v[f]}})});var p=i(68291);Object.keys(p).forEach(function(f){f==="default"||f==="__esModule"||Object.prototype.hasOwnProperty.call(c,f)||f in u&&u[f]===p[f]||Object.defineProperty(u,f,{enumerable:!0,get:function(){return p[f]}})});var m=l.default;u.default=m},3202:(k,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;function i(){var a;(a=console).warn.apply(a,arguments)}function o(){var a;(a=console).error.apply(a,arguments)}var c={warn:i,error:o},l=c;u.default=l},98708:()=>{(function(){var k=document.createElement("script");k.type="text/javascript",k.async=!0,k.src="https://cdn.rudderlabs.com/v1/rudder-analytics.min.js";var u=document.getElementsByTagName("script")[0];u.parentNode.insertBefore(k,u)})()},50748:()=>{(function(){for(var k=window.rudderanalytics=window.rudderanalytics||[],u=["load","page","track","identify","alias","group","ready","reset","getAnonymousId","setAnonymousId"],i=0;i<u.length;i++){var o=u[i];k[o]=function(c){return function(){k.push([c].concat(Array.prototype.slice.call(arguments)))}}(o)}})()},5326:(k,u,i)=>{var o=i(25216);Object.defineProperty(u,"__esModule",{value:!0}),u.default=void 0;var c=o(i(58167)),l=i(65866),a=i(99),v="tracking_session_id";function p(){return c.default.get(v)}function m(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:a.TYPEFORM_DOMAIN,I=c.default.get(v)||(0,l.v4)(),P=new Date(new Date().getTime()+30*60*1e3);return c.default.set(v,I,{expires:P,domain:h}),I}function f(){c.default.remove(v)}var _={read:p,createOrUpdate:m,remove:f},R=_;u.default=R},3373:(k,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.load=o,u.hasLoaded=c;function i(l){return"gtm-no-script-".concat(l)}function o(l){var a,v=document.createElement("iframe");v.src="https://www.googletagmanager.com/ns.html?id=".concat(l),v.setAttribute("style","display:none;visibility:hidden"),v.setAttribute("height","0"),v.setAttribute("width","0");var p=document.createElement("noscript");p.id=i(l),p.appendChild(v);var m=document.getElementsByTagName("script")[0];(a=m.parentNode)===null||a===void 0||a.insertBefore(p,m)}function c(l){var a=i(l),v=document.getElementById(a);return v!==null}},86292:()=>{(function(){var k=window.analytics=window.analytics||[];if(!k.initialize){if(k.invoked){window.console&&console.error&&console.error("Segment snippet included twice.");return}k.invoked=!0,k.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],k.factory=function(o){return function(){var c=Array.prototype.slice.call(arguments);return c.unshift(o),k.push(c),k}};for(var u=0;u<k.methods.length;u++){var i=k.methods[u];k[i]=k.factory(i)}k.load=function(o,c){var l=document.createElement("script");l.type="text/javascript",l.async=!0,l.src="https://cdn.segment.com/analytics.js/v1/"+o+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(l,a),k._loadOptions=c},k._writeKey="YOUR_API_KEY",k.SNIPPET_VERSION="4.15.3"}})()},86580:()=>{},56964:(k,u,i)=>{var o=i(92837),c=Object.values(o.TEAMS)},5953:(k,u,i)=>{/**
 * An even better animation frame.
 *
 * @copyright Oleg Slobodskoi 2016
 * @website https://github.com/kof/animationFrame
 * @license MIT
 */k.exports=i(57205)},57205:(k,u,i)=>{var o=i(26058),c=i(34025),l=i(28958),a=i(91179),v=o.request,p=o.cancel;function m(f){if(!(this instanceof m))return new m(f);f||(f={}),typeof f=="number"&&(f={frameRate:f}),f.useNative!=null||(f.useNative=!0),this.options=f,this.frameRate=f.frameRate||m.FRAME_RATE,this._frameLength=1e3/this.frameRate,this._isCustomFrameRate=this.frameRate!==m.FRAME_RATE,this._timeoutId=null,this._callbacks={},this._lastTickTime=0,this._tickCounter=0}k.exports=m,m.FRAME_RATE=60,m.shim=function(f){var _=new m(f);return a.requestAnimationFrame=function(R){return _.request(R)},a.cancelAnimationFrame=function(R){return _.cancel(R)},_},m.prototype.request=function(f){var _=this;if(++this._tickCounter,o.supported&&this.options.useNative&&!this._isCustomFrameRate)return v(f);if(!f)throw new TypeError("Not enough arguments");if(this._timeoutId==null){var R=this._frameLength+this._lastTickTime-c();R<0&&(R=0),this._timeoutId=setTimeout(function(){_._lastTickTime=c(),_._timeoutId=null,++_._tickCounter;var h=_._callbacks;_._callbacks={};for(var I in h)h[I]&&(o.supported&&_.options.useNative?v(h[I]):h[I](l.now()))},R)}return this._callbacks[this._tickCounter]=f,this._tickCounter},m.prototype.cancel=function(f){o.supported&&this.options.useNative&&p(f),delete this._callbacks[f]}},26058:(k,u,i)=>{var o=i(91179);try{o.top.name,o=o.top}catch(a){}u.request=o.requestAnimationFrame,u.cancel=o.cancelAnimationFrame||o.cancelRequestAnimationFrame,u.supported=!1;for(var c=["Webkit","Moz","ms","O"],l=0;l<c.length&&!u.request;l++)u.request=o[c[l]+"RequestAnimationFrame"],u.cancel=o[c[l]+"CancelAnimationFrame"]||o[c[l]+"CancelRequestAnimationFrame"];u.request&&u.request.call(null,function(){u.supported=!0})},34025:k=>{k.exports=Date.now||function(){return new Date().getTime()}},69630:(k,u,i)=>{var o=i(34025);u.navigationStart=o()},28958:(k,u,i)=>{var o=i(34025),c=i(69630),l=i(91179);u.now=function(){return l.performance&&l.performance.now?l.performance.now():o()-c.navigationStart}},91179:function(k){var u;typeof window!="undefined"?u=window:typeof self!="undefined"?u=self:u=this,k.exports=u},56618:(k,u,i)=>{i.d(u,{k:()=>Y});var o=(A,C)=>C.filter(c).map(q=>{var oe=A.properties.choices.find(ye=>ye.ref===q);return oe?{id:oe.id,label:oe.label}:{id:"other",label:q}}),c=A=>A.trim().length>0,l=(A,C,q)=>A>=C&&A<=q,a=A=>{var C,q,oe,ye,ee,ve;switch(A.type){case"choices":return A.choices.length>0;case"url":return((q=(C=A.url)===null||C===void 0?void 0:C.trim())===null||q===void 0?void 0:q.length)>0;case"email":return((ye=(oe=A.email)===null||oe===void 0?void 0:oe.trim())===null||ye===void 0?void 0:ye.length)>0;case"text":return((ve=(ee=A.text)===null||ee===void 0?void 0:ee.trim())===null||ve===void 0?void 0:ve.length)>0;default:return}},v=(A,C)=>C.filter(c).map(q=>({field:{id:A.id,type:A.type},type:"url",url:q})),p=(A,C)=>{var q=[{field:{id:A.id,type:A.type},type:"email",email:C[0]}];return q.filter(a)},m=i(87786),f=(A,C)=>C.reduce((q,oe)=>(oe.number&&oe.number!==""&&q.push({field:{id:A.id,type:A.type},type:"phone_number",phone_number:(0,m.h)(oe.number,oe.countryCode).format("E.164")}),q),[]),_=(A,C)=>{var q=C.map(()=>({field:{id:A.id,type:A.type},type:"text",text:C[0]}));return q.filter(a)},R=(A,C)=>{var[q={}]=C;return Object.keys(q).reduce((oe,ye)=>{var ee,ve=A.properties.fields.find(E=>E.ref===ye);return ve?oe.concat((ee=h(ve,q[ye]))!==null&&ee!==void 0?ee:[]):oe},[])};function h(A,C){switch(A.type){case"phone_number":return f(A,C);case"email":return p(A,C);case"short_text":return _(A,C)}}var I=(A,C)=>C.filter(c).map(q=>({field:{id:A.id,type:A.type},type:"url",url:q})),P=(A,C)=>{var[q={}]=C;return Object.keys(q).reduce((oe,ye)=>{var ee,ve=A.properties.fields.find(E=>E.ref===ye);return ve?oe.concat((ee=_(ve,q[ye]))!==null&&ee!==void 0?ee:[]):oe},[])},O=(A,C)=>{var q=[{field:{id:A.id,type:A.type},type:"choices",choices:o(A,C)}];return q.filter(a)},g=(A,C)=>{var q=[{field:{id:A.id,type:A.type},type:"choices",choices:o(A,C)}];return q.filter(a)},w=(A,C)=>{var[q={}]=C;return Object.keys(q).reduce((oe,ye)=>{var ee=A.properties.fields.find(ve=>ve.ref===ye);return ee?oe.concat(O(ee,q[ye])):oe},[])},J=(A,C)=>{var q=[{field:{id:A.id,type:A.type},type:"choices",choices:o(A,C)}];return q.filter(a)},G=i(4738),N=(A,C)=>C.filter(q=>l(q,G.Rh,G.ar)).map(q=>({field:{id:A.id,type:A.type},type:"number",number:q}));function Y(A,C,q){switch(A.type){case"multiple_choice":return O(A,C);case"matrix":return w(A,C);case"picture_choice":return g(A,C);case"ranking":return J(A,C);case"calendly":return v(A,C);case"nps":return N(A,C);case"docusign":return I(A,C);case"contact_info":return R(A,C);case"address":return P(A,C);case"short_text":return _(A,C);case"email":return p(A,C);case"phone_number":return f(A,C);default:return null}}},67026:(k,u,i)=>{i.d(u,{TS:()=>E,cI:()=>ye});var o=i(71383),c=i(88245),l=H=>class extends o.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromError(B){return{error:B}}componentDidCatch(B,z){(0,c.H)(B,Object.assign({},z))}render(){return this.state.error?o.createElement(o.Fragment,null):o.createElement(H,Object.assign({},this.props))}};const a=l;var v=()=>i.e(7232).then(i.bind(i,19408)),p=()=>i.e(7400).then(i.bind(i,64080)),m=()=>Promise.all([i.e(7456),i.e(7962)]).then(i.bind(i,35520)),f=()=>Promise.all([i.e(2774),i.e(9453)]).then(i.bind(i,10064)),_=()=>Promise.all([i.e(7456),i.e(8297)]).then(i.bind(i,41728)),R=()=>Promise.all([i.e(4867),i.e(7845),i.e(8041)]).then(i.bind(i,30902)),h=()=>i.e(3344).then(i.bind(i,15464)),I=()=>i.e(4022).then(i.bind(i,47183)),P=()=>Promise.all([i.e(4867),i.e(7845)]).then(i.bind(i,45402)),O=()=>i.e(6243).then(i.bind(i,58411)),g=o.lazy(v),w=o.lazy(p),J=o.lazy(m),G=o.lazy(f),N=o.lazy(_),Y=o.lazy(R),A=o.lazy(h),C=o.lazy(I),q=o.lazy(P),oe=o.lazy(O);function ye(H,S){return Boolean(ve(H,S))}var ee=H=>{var S,B=ve((S=H.field)===null||S===void 0?void 0:S.type,H.featureFlags||{});return B?o.createElement(o.Suspense,{fallback:o.createElement("div",null)},o.createElement(B,Object.assign({},H))):null},ve=(H,S)=>{switch(H){case"ranking":return g;case"matrix":return w;case"calendly":return J;case"nps":return G;case"docusign":return N;case"contact_info":return Y;case"address":return A;case"short_text":return oe;case"email":return C;case"phone_number":return q}return null},E=a(ee)},70373:(k,u,i)=>{i.d(u,{_6:()=>Y});var o=i(33878),c=i(78364),l={variable:{isOpenEnded:!0,reportDefinition:null,style:{defaultColumnSize:c.$.M}},score:{isOpenEnded:!0,reportDefinition:null,style:{defaultColumnSize:c.$.S}},price:{isOpenEnded:!0,reportDefinition:null,style:{defaultColumnSize:c.$.S}},quiz_outcome:{isOpenEnded:!1,reportDefinition:{isPrintable:!0},style:{defaultColumnSize:c.$.S}},quiz_winner:{isOpenEnded:!1,reportDefinition:null,style:{defaultColumnSize:c.$.M}},tags:{isOpenEnded:!0,reportDefinition:null,style:{defaultColumnSize:c.$.XL}}};const a=null;var v=i(64923),p=Object.assign(Object.assign({},o.Dq),l),m=A=>p[A].reportDefinition,f=A=>{var C;return!!(!((C=m(A))===null||C===void 0)&&C.isPrintable)},_=A=>p[A].isOpenEnded,R=A=>!p[A].isOpenEnded,h=A=>P(A)?p[A].properties.includes("allow_other_choice"):!1,I=A=>P(A)?p[A].properties.includes("fields"):!1;function P(A){return v.Fu.includes(A)}function O(A){return RESULTS.includes(A)}function g(A){var C;return((C=getDefinition(A).logicDefinition)===null||C===void 0?void 0:C.value)!==null}function w(A){var C,q,oe;return(oe=(q=(C=getDefinition(A))===null||C===void 0?void 0:C.logicDefinition)===null||q===void 0?void 0:q.value)!==null&&oe!==void 0?oe:null}function J(A){var C,q;return(q=(C=getDefinition(A).logicDefinition)===null||C===void 0?void 0:C.origin.includes("branching"))!==null&&q!==void 0?q:!1}function G(A){var C,q;return(q=(C=getDefinition(A).logicDefinition)===null||C===void 0?void 0:C.origin.includes("advanced"))!==null&&q!==void 0?q:!1}function N(A){if(P(A))return getDefinition(A).resultStyle;if(O(A))return RESULT_DEFINITIONS[A].style}function Y(A){var C;return P(A)&&(C=(0,o.OT)(A).supportsAnswerFromEmail)!==null&&C!==void 0?C:!1}},84092:(k,u,i)=>{i.d(u,{I:()=>l});var o=i(33878);function c(a,v){var p,m,f,_=v.match("answers-".concat(a.ref,"=([^&]+)"));if(_!=null){var R=_[1],h=(f=(m=(p=(0,o.OT)(a.type).answerDefinition)===null||p===void 0?void 0:p.value)===null||m===void 0?void 0:m.type)!==null&&f!==void 0?f:null;switch(h){case"boolean":return[R==="true"];case"choices":return R.split(",");case"number":return[Number(R)];default:return[decodeURIComponent(R)]}}return null}var l=(a,v)=>a&&"properties"in a&&a.properties&&"fields"in a.properties&&Array.isArray(a.properties.fields)?[a.properties.fields.reduce((p,m)=>(Object.assign(p,m.ref?{[m.ref]:c(m,v)}:{}),p),{})]:c(a,v)},48532:(k,u,i)=>{i.d(u,{f:()=>Je});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function o(D,F){var Q=typeof Symbol=="function"&&D[Symbol.iterator];if(!Q)return D;var ue,Ne,Me=Q.call(D),Ce=[];try{for(;(F===void 0||F-- >0)&&!(ue=Me.next()).done;)Ce.push(ue.value)}catch(ze){Ne={error:ze}}finally{try{ue&&!ue.done&&(Q=Me.return)&&Q.call(Me)}finally{if(Ne)throw Ne.error}}return Ce}var c;(function(D){D[D.NotStarted=0]="NotStarted",D[D.Running=1]="Running",D[D.Stopped=2]="Stopped"})(c||(c={}));var l={type:"xstate.init"};function a(D){return D===void 0?[]:[].concat(D)}function v(D){return{type:"xstate.assign",assignment:D}}function p(D,F){return typeof(D=typeof D=="string"&&F&&F[D]?F[D]:D)=="string"?{type:D}:typeof D=="function"?{type:D.name,exec:D}:D}function m(D){return function(F){return D===F}}function f(D){return typeof D=="string"?{type:D}:D}function _(D,F){return{value:D,context:F,actions:[],changed:!1,matches:m(D)}}function R(D,F,Q){var ue=F,Ne=!1;return[D.filter(function(Me){if(Me.type==="xstate.assign"){Ne=!0;var Ce=Object.assign({},ue);return typeof Me.assignment=="function"?Ce=Me.assignment(ue,Q):Object.keys(Me.assignment).forEach(function(ze){Ce[ze]=typeof Me.assignment[ze]=="function"?Me.assignment[ze](ue,Q):Me.assignment[ze]}),ue=Ce,!1}return!0}),ue,Ne]}function h(D,F){F===void 0&&(F={});var Q=o(R(a(D.states[D.initial].entry).map(function(Ce){return p(Ce,F.actions)}),D.context,l),2),ue=Q[0],Ne=Q[1],Me={config:D,_options:F,initialState:{value:D.initial,actions:ue,context:Ne,matches:m(D.initial)},transition:function(Ce,ze){var nt,at,ot=typeof Ce=="string"?{value:Ce,context:D.context}:Ce,tt=ot.value,st=ot.context,rt=f(ze),pt=D.states[tt];if(pt.on){var mt=a(pt.on[rt.type]);try{for(var gt=function(Ke){var Qe=typeof Symbol=="function"&&Symbol.iterator,Ze=Qe&&Ke[Qe],y=0;if(Ze)return Ze.call(Ke);if(Ke&&typeof Ke.length=="number")return{next:function(){return Ke&&y>=Ke.length&&(Ke=void 0),{value:Ke&&Ke[y++],done:!Ke}}};throw new TypeError(Qe?"Object is not iterable.":"Symbol.iterator is not defined.")}(mt),ut=gt.next();!ut.done;ut=gt.next()){var yt=ut.value;if(yt===void 0)return _(tt,st);var _t=typeof yt=="string"?{target:yt}:yt,X=_t.target,j=_t.actions,re=j===void 0?[]:j,ge=_t.cond,Oe=ge===void 0?function(){return!0}:ge,Ae=X===void 0,Te=X!=null?X:tt,Ie=D.states[Te];if(Oe(st,rt)){var ne=o(R((Ae?a(re):[].concat(pt.exit,re,Ie.entry).filter(function(Ke){return Ke})).map(function(Ke){return p(Ke,Me._options.actions)}),st,rt),3),Re=ne[0],Le=ne[1],je=ne[2],Xe=X!=null?X:tt;return{value:Xe,context:Le,actions:Re,changed:X!==tt||Re.length>0||je,matches:m(Xe)}}}}catch(Ke){nt={error:Ke}}finally{try{ut&&!ut.done&&(at=gt.return)&&at.call(gt)}finally{if(nt)throw nt.error}}}return _(tt,st)}};return Me}var I=function(D,F){return D.actions.forEach(function(Q){var ue=Q.exec;return ue&&ue(D.context,F)})};function P(D){var F=D.initialState,Q=c.NotStarted,ue=new Set,Ne={_machine:D,send:function(Me){Q===c.Running&&(F=D.transition(F,Me),I(F,f(Me)),ue.forEach(function(Ce){return Ce(F)}))},subscribe:function(Me){return ue.add(Me),Me(F),{unsubscribe:function(){return ue.delete(Me)}}},start:function(Me){if(Me){var Ce=typeof Me=="object"?Me:{context:D.config.context,value:Me};F={value:Ce.value,actions:[],context:Ce.context,matches:m(Ce.value)}}return Q=c.Running,I(F,l),Ne},stop:function(){return Q=c.Stopped,ue.clear(),Ne},get state(){return F},get status(){return Q}};return Ne}var O;(function(D){D.ACTIVATE_BLOCK="ACTIVATE_BLOCK",D.CLOSE="CLOSE",D.SUBMIT="SUBMIT",D.FINAL="final"})(O||(O={}));var g="EndingID",w=1;function J(D,F){var Q=Object.keys(D);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(D);F&&(ue=ue.filter(function(Ne){return Object.getOwnPropertyDescriptor(D,Ne).enumerable})),Q.push.apply(Q,ue)}return Q}function G(D){for(var F=1;F<arguments.length;F++){var Q=arguments[F]!=null?arguments[F]:{};F%2?J(Object(Q),!0).forEach(function(ue){N(D,ue,Q[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(Q)):J(Object(Q)).forEach(function(ue){Object.defineProperty(D,ue,Object.getOwnPropertyDescriptor(Q,ue))})}return D}function N(D,F,Q){return F=Y(F),F in D?Object.defineProperty(D,F,{value:Q,enumerable:!0,configurable:!0,writable:!0}):D[F]=Q,D}function Y(D){var F=A(D,"string");return typeof F=="symbol"?F:String(F)}function A(D,F){if(typeof D!="object"||D===null)return D;var Q=D[Symbol.toPrimitive];if(Q!==void 0){var ue=Q.call(D,F||"default");if(typeof ue!="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(D)}function C(D,F){oe(D,F),F.add(D)}function q(D,F,Q){oe(D,F),F.set(D,Q)}function oe(D,F){if(F.has(D))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ye(D,F){var Q=E(D,F,"get");return ee(D,Q)}function ee(D,F){return F.get?F.get.call(D):F.value}function ve(D,F,Q){var ue=E(D,F,"set");return H(D,ue,Q),Q}function E(D,F,Q){if(!F.has(D))throw new TypeError("attempted to "+Q+" private field on non-instance");return F.get(D)}function H(D,F,Q){if(F.set)F.set.call(D,Q);else{if(!F.writable)throw new TypeError("attempted to set read only private field");F.value=Q}}function S(D,F,Q){if(!F.has(D))throw new TypeError("attempted to get private field on non-instance");return Q}var B=new WeakMap,z=new WeakSet,$=new WeakSet,ae=new WeakSet;class Ee{constructor(F){var Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{debug:!1};if(C(this,ae),C(this,$),C(this,z),q(this,B,{writable:!0,value:void 0}),this.endpoint=F,this.formId=S(this,z,fe).call(this,F),Q.debug){ve(this,B,console.log);return}ve(this,B,S(this,ae,Ue)),"fetch"in window&&ve(this,B,S(this,$,Pe))}send(F,Q){if(!(!Q||!Q.form_id)&&this.formId===Q.form_id){var ue="".concat(this.endpoint).concat(F),Ne=G(G({},Q),{},{version:w}),Me=Object.keys(Ne).map(Ce=>"".concat(encodeURIComponent(Ce),"=").concat(encodeURIComponent(Ne[Ce]))).join("&");ye(this,B).call(this,ue,Me)}}}function fe(D){try{var F=D.split("/"),Q=F.indexOf("forms"),ue=F[Q+1];return ue}catch(Ne){console.error(Ne);return}}function Pe(D,F){var Q=new window.Blob([F],{type:"application/x-www-form-urlencoded"});fetch(D,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Q,keepalive:!0}).catch(ue=>{console.error(ue)})}function Ue(D,F){try{var Q=new window.Blob([F],{type:"application/x-www-form-urlencoded"}),ue=new XMLHttpRequest;ue.open("POST",D,!0),ue.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),ue.send(Q)}catch(Ne){console.error(Ne)}}var me;(function(D){D.DONE="done",D.IDLE="idle",D.FILLING="filling",D.SUBMITTED="submitted"})(me||(me={}));var he;(function(D){D.ENTER_BLOCK="ENTER_BLOCK",D.ENTER_ENDING="ENTER_ENDING",D.TRACK_BLOCK_SEEN="TRACK_BLOCK_SEEN",D.TRACK_FORM_VIEW_OPEN="TRACK_FORM_VIEW_OPEN"})(he||(he={}));var He=D=>({initial:me.IDLE,context:{formId:D.formId,blockId:null,previousBlockId:null,responseId:D.responseId,visited:{},userAgent:D.userAgent,runningExperiments:D.runningExperiments,utm:D.utm,options:{}},states:{[me.IDLE]:{on:{[O.ACTIVATE_BLOCK]:{target:me.FILLING,actions:[he.ENTER_BLOCK,he.TRACK_FORM_VIEW_OPEN]}}},[me.FILLING]:{on:{[O.ACTIVATE_BLOCK]:{actions:[he.ENTER_BLOCK,he.TRACK_BLOCK_SEEN],cond:(F,Q)=>{var ue;return!F.visited||!(Q!=null&&(ue=Q.block)!==null&&ue!==void 0&&ue.id)?!1:!F.visited[Q.block.id]}},[O.SUBMIT]:{actions:[he.ENTER_ENDING,he.TRACK_BLOCK_SEEN],target:me.SUBMITTED},[O.CLOSE]:{target:me.DONE}}},[me.SUBMITTED]:{on:{[O.CLOSE]:{target:me.DONE}}},[me.DONE]:{on:{[O.FINAL]:{}}}}}),we;(function(D){D.SEE="see",D.VIEW_FORM_OPEN="view-form-open"})(we||(we={}));function $e(D,F){var Q=Object.keys(D);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(D);F&&(ue=ue.filter(function(Ne){return Object.getOwnPropertyDescriptor(D,Ne).enumerable})),Q.push.apply(Q,ue)}return Q}function _e(D){for(var F=1;F<arguments.length;F++){var Q=arguments[F]!=null?arguments[F]:{};F%2?$e(Object(Q),!0).forEach(function(ue){Ge(D,ue,Q[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(Q)):$e(Object(Q)).forEach(function(ue){Object.defineProperty(D,ue,Object.getOwnPropertyDescriptor(Q,ue))})}return D}function Ge(D,F,Q){return F=et(F),F in D?Object.defineProperty(D,F,{value:Q,enumerable:!0,configurable:!0,writable:!0}):D[F]=Q,D}function et(D){var F=qe(D,"string");return typeof F=="symbol"?F:String(F)}function qe(D,F){if(typeof D!="object"||D===null)return D;var Q=D[Symbol.toPrimitive];if(Q!==void 0){var ue=Q.call(D,F||"default");if(typeof ue!="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(D)}var vt=D=>{var F=(Q,ue)=>{var Ne,{blockId:Me,visited:Ce}=Q,ze=(ue==null||(Ne=ue.block)===null||Ne===void 0?void 0:Ne.id)||"";return _e(_e({},Q),{},{blockId:ze,previousBlockId:Me,visited:_e(_e({},Ce),{},{[ze]:!0})})};return{actions:{[he.ENTER_BLOCK]:v(F),[he.TRACK_BLOCK_SEEN]:Q=>{var{blockId:ue,formId:Ne,previousBlockId:Me,responseId:Ce,userAgent:ze}=Q;ue&&D.send(we.SEE,{form_id:Ne,field_id:ue,previous_seen_field_id:Me,response_id:Ce,user_agent:ze})},[he.TRACK_FORM_VIEW_OPEN]:Q=>{var{blockId:ue,formId:Ne,responseId:Me,userAgent:Ce,runningExperiments:ze,utm:nt}=Q;ue&&D.send(we.VIEW_FORM_OPEN,{form_id:Ne,field_id:ue,response_id:Me,user_agent:Ce,running_experiments:ze,utm:nt})},[he.ENTER_ENDING]:v((Q,ue)=>F(Q,_e(_e({},ue),{},{block:{id:g}})))}}},U=(D,F)=>h(He(D),vt(F));function le(D,F){if(!D.startsWith("utm_")||F.trim().length===0)return null;var Q=D.replace("utm_","");return{name:Q,value:F.trim()}}function M(D){try{var F=new URL(D).searchParams,Q=[];for(var[ue,Ne]of F){var Me=le(ue,Ne);Me&&Q.push(Me)}return Q}catch(Ce){console.error(Ce)}return[]}function K(D,F){var Q=Object.keys(D);if(Object.getOwnPropertySymbols){var ue=Object.getOwnPropertySymbols(D);F&&(ue=ue.filter(function(Ne){return Object.getOwnPropertyDescriptor(D,Ne).enumerable})),Q.push.apply(Q,ue)}return Q}function Z(D){for(var F=1;F<arguments.length;F++){var Q=arguments[F]!=null?arguments[F]:{};F%2?K(Object(Q),!0).forEach(function(ue){te(D,ue,Q[ue])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(Q)):K(Object(Q)).forEach(function(ue){Object.defineProperty(D,ue,Object.getOwnPropertyDescriptor(Q,ue))})}return D}function te(D,F,Q){return F=ce(F),F in D?Object.defineProperty(D,F,{value:Q,enumerable:!0,configurable:!0,writable:!0}):D[F]=Q,D}function ce(D){var F=We(D,"string");return typeof F=="symbol"?F:String(F)}function We(D,F){if(typeof D!="object"||D===null)return D;var Q=D[Symbol.toPrimitive];if(Q!==void 0){var ue=Q.call(D,F||"default");if(typeof ue!="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(F==="string"?String:Number)(D)}function ke(D,F){if(!F)throw new Error("AssertionError: ".concat(D," evaluated to a falsy value"))}class Je{constructor(F,Q){ke("formId",F.formId),ke("responseId",F.responseId),ke("userAgent",F.userAgent),ke("runningExperiments",F.runningExperiments),ke("endpoint",Q.endpoint);var ue=new Ee(Q.endpoint,{debug:Boolean(Q.debug)}),Ne=Z(Z({},F),{},{utm:JSON.stringify(M(window.location.href)),blockId:null,previousBlockId:null,visited:void 0});this.interpreter=P(U(Ne,ue)).start()}onActivateBlock(F){this.interpreter.send({type:O.ACTIVATE_BLOCK,block:F})}onFormView(F){O[F]&&this.interpreter.send({type:F})}onSubmit(){this.interpreter.send({type:O.SUBMIT})}onClose(){this.interpreter.send({type:O.CLOSE})}}},67846:(k,u,i)=>{i.d(u,{Z:()=>ye});var o=i(71383),c=i(97489),l=i(68656),a=i(44487),v=i(2380),p=i(80550),m=i(9513),f=i(44955),_=i(72814),R=i(58561),h=i(62776),I=i(12413),P=ee=>{var{breakpoint:ve,withNavigationArrows:E}=ee;return ve==="sm"&&E?"space-between":"flex-end"},O=i(67287),g=c.ZP.div.withConfig({displayName:"Root",componentId:"sc-__sc-1ckh2u2-0"})(["background-color:",";transition:background-color 500ms cubic-bezier(0.23,1,0.32,1);width:100%;display:flex;flex-direction:column;"],ee=>(0,l.Zn)(ee.backgroundColor)),w=c.ZP.div.withConfig({displayName:"FooterWrapper",componentId:"sc-__sc-1ckh2u2-1"})(["width:100%;display:flex;justify-content:flex-start;flex-direction:row-reverse;font-family:",";padding:","px;pointer-events:none;",";"],v.Le,ee=>ee.isVisible?v.bf*ee.paddingSize:0,ee=>ee.isVisible?"":h.w),J=c.ZP.div.withConfig({displayName:"ButtonsWrapper",componentId:"sc-__sc-1ckh2u2-2"})(["display:flex;flex-direction:row;justify-content:",";width:",";box-shadow:none;border-radius:4px;user-select:none;line-height:0;background-color:transparent;pointer-events:auto;white-space:nowrap;"],ee=>P(ee),ee=>ee.breakpoint==="sm"?"100%":"auto"),G=c.ZP.div.withConfig({displayName:"ButtonDivider",componentId:"sc-__sc-1ckh2u2-3"})(["background-color:",";",";width:1px;"],ee=>ee.transparentButtons?(0,l.Yv)((0,l.PF)(ee.contextBackgroundColor)):(0,l.Yv)((0,l.PF)(ee.buttonsColor)),ee=>ee.transparentButtons&&"margin-inline-start: -1px;"),N=c.ZP.nav.withConfig({displayName:"Navigation",componentId:"sc-__sc-1ckh2u2-4"})(["display:flex;flex-direction:row-reverse;border-radius:var(--sampler-comp-radius-footer);",";",";background-color:",";",""],ee=>ee.isVisible?"":h.w,ee=>ee.isVisible?"":"inset-block-start: -40px",ee=>ee.transparentButtons?"transparent":ee.buttonsColor,ee=>ee.withMargin&&"margin-inline-end: 8px;"),Y=c.ZP.div.withConfig({displayName:"LeftButtonsWrapper",componentId:"sc-__sc-1ckh2u2-5"})(["display:flex;",""],ee=>{var{isFloating:ve}=ee;return ve&&(0,c.iv)(["flex-direction:row-reverse;"])}),A=(0,c.ZP)(a.ZP).withConfig({displayName:"BrandButton",componentId:"sc-__sc-1ckh2u2-6"})(["display:flex;border-radius:var(--sampler-comp-radius-footer);text-decoration:none;padding-block-start:0;padding-block-end:0;padding-inline-start:var(--sampler-comp-padding-footer);padding-inline-end:var(--sampler-comp-padding-footer);"," "," ",""],ee=>ee.reducePadding&&`
    padding-inline-start: `.concat(v.bf,`px;
    padding-inline-end: `).concat(v.bf,`px;
  `),ee=>ee.multiline&&`
    strong {
      display: block;
    }
  `,ee=>ee.textSize&&v.iH[ee.textSize]),C=ee=>{var{dataQa:ve,size:E,children:H}=ee;return(0,O.jsx)("span",{"data-qa":"".concat(ve,"-brand-button"),children:(0,O.jsx)(f.ZP,{fontWeight:"regular",htmlTag:"span",responsive:!1,size:E,children:H})})},q=ee=>{var{brandButtonHref:ve="",brandButtonText:E=(0,O.jsxs)("span",{children:["Powered by ",(0,O.jsx)("strong",{children:"Typeform"})]}),buttonsColor:H,buttonsContentColor:S,contextBackgroundColor:B="white",dataQa:z="footer",nextButtonDisabled:$,nextButtonOnClick:ae=l.ZT,onClickBrandButton:Ee=l.ZT,previousButtonDisabled:fe,previousButtonOnClick:Pe=l.ZT,progressBackgroundColor:Ue,transparentButtons:me,visible:he,withBranding:He,withNavigationArrows:we=!0}=ee,{t:$e}=(0,R.Dy)(),_e=(0,_.Gc)(),Ge=(0,_.z8)(),et=_e!=="sm"&&!(0,l.T)(),qe=et?"sizeN1":"sizeN2",vt=Ge<=v.fl.xs,U=()=>_e==="sm"?1:_e==="xl"?3:2,le=he&&(we||He),M=p.Z,K="footer_arrow_down",Z=m.Z,te="footer_arrow_up";return(0,O.jsxs)(g,{backgroundColor:et?void 0:Ue,children:[(0,O.jsx)(w,{"data-qa":z,isVisible:le,paddingSize:U(),children:(0,O.jsxs)(J,{breakpoint:_e,buttonsColor:H,transparentButtons:me,withNavigationArrows:we,children:[(0,O.jsx)(Y,{isFloating:et,children:(0,O.jsxs)(N,{isVisible:we,buttonsColor:H,transparentButtons:me,withMargin:_e!=="sm"&&He,children:[(0,O.jsx)(a.ZP,{"aria-label":$e("a11y.navigation.down"),color:H,contentColor:S,contextBackgroundColor:B,"data-qa":"".concat(z,"-navigation-next"),"data-tracking":K,disabled:$,iconButton:!0,iconSvg:M,noShadow:!0,onClick:ae,openBorder:"left",size:_e==="sm"?"footerSmall":"small",transparent:me}),(0,O.jsx)(G,{buttonsColor:H,contextBackgroundColor:B,transparentButtons:me}),(0,O.jsx)(a.ZP,{"aria-label":$e("a11y.navigation.up"),color:H,contentColor:S,contextBackgroundColor:B,"data-qa":"".concat(z,"-navigation-previous"),"data-tracking":te,disabled:fe,iconButton:!0,iconSvg:Z,noShadow:!0,onClick:Pe,openBorder:"right",size:_e==="sm"?"footerSmall":"small",transparent:me})]})}),He&&(0,O.jsx)(O.Fragment,{children:(0,O.jsx)(A,{color:H,contentColor:S,contextBackgroundColor:B,forwardedAs:"a",href:(0,l.Up)(ve),onClick:Ee,noShadow:!0,openBorder:we?"right":void 0,reducePadding:vt,rel:"noopener noreferrer",size:_e==="sm"?"footerSmall":"small",target:"_blank",transparent:me,textSize:qe,children:(0,O.jsx)(C,