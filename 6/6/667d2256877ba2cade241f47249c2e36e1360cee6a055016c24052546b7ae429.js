"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4107],{21219:function(e,t,a){a.d(t,{T:function(){return n},s:function(){return i}});let i=/^(?!\.)(?!.*\.\.)(?!.*[\.\+]@)([a-zA-Z0-9_\-\.\+]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/i,n=/^[0-9]*$/},29426:function(e,t,a){a.r(t);var i=a(85893),n=a(67294),r=a(87536),s=a(21219),o=a(9354),d=a(2599),l=a(72023),p=a(27361),c=a.n(p),m=a(64929),u=a(61853),x=a(77695),f=a(6850),y=a(8979),h=a(55221),g=a(51912),M=a(3256),Z=a(35385),v=a(24921),j=a(61130),b=a(37082),S=a(86896),A=a(79272),w=a(45710),C=a(38203),q=a(87538),P=a(64824),T=a(87320);let N=e=>{let t=(0,w.Z)("NotifyMePopUpTheme"),{register:a,formState:p,handleSubmit:C,setValue:N}=(0,r.cI)(),_=(0,v.Z)(),k=(0,m.Z)(),{space:z}=_,{isOpen:E,onClose:U,modalContent:B,productId:L}=e,{modalHeader:H,modalMessage:I,csrfToken:$}=B,[O,W]=(0,n.useState)(!1),[F,D]=(0,n.useState)(),[J,R]=(0,n.useState)(!1),{isDesktop:Y}=(0,b.Z)(),{formatMessage:G}=(0,S.Z)(),K=(0,P.Dv)(T.h4),Q={error:"Something went wrong with the Notify Me API for the given product",context:{detail:{productId:L}}},V={pattern:G({id:"footer.newsletter.emailPatternErr",defaultMessage:"Invalid email address format"}),required:G({id:"footer.newsletter.emailRequiredErr",defaultMessage:"This field is required"})},X=(0,n.useCallback)(()=>{U?.(),R(!1),W(!1)},[U]),ee=(0,n.useCallback)(()=>{X(),W(!1),k.send("productInteraction",{eventLocation:"product",eventAction:"continue shopping",eventLabel:L})},[X,L]),et=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.Z,{sx:t.pdpTxtNotifymeModalHeader,size:"xl",variant:"primary","data-qa":c()(u.A,"pdp.notifyMe.heading1.d"),children:H}),(0,i.jsx)(x.Z,{variant:"body-text-secondary",sx:t.pdpTxtNotifymeModalHdng2,"data-qa":c()(u.A,"pdp.notifyMe.heading2.d"),children:I}),(0,i.jsxs)("form",{onSubmit:C(en),children:[(0,i.jsx)(x.Z,{variant:"cta-primary",sx:t.pdpTxtNotifymeModalEmailLabel,"data-qa":c()(u.A,"pdp.notifyMe.emailLabelText.d"),children:G({id:"pdp.product.notifyPopUpEmail",defaultMessage:"Email Address*"})}),(0,i.jsx)(f.Z,{name:"email",type:"text",onChange:er,variant:"email-input",...es,"data-qa":c()(u.A,"pdp.notifyMe.emailTextBox.d")}),(0,i.jsx)(x.Z,{size:"xs",variant:"body-text-secondary",sx:t.emailErrorMessageStyle,children:c()(V,eo,"")}),(0,i.jsx)(y.Z,{type:"submit",variant:"primary",size:"lg",w:"100%",sx:t.pdpBtnNotifymeModalSubmit,"data-qa":c()(u.A,"pdp.notifyMe.submitButton.d"),children:G({id:"pdp.product.notifyPopUpSubmit"})}),J?(0,i.jsx)(x.Z,{variant:"body-primary",size:"md",sx:t.somethingWentWrongMsg,children:G({id:"pdp.product.notifyPopUpTryAgainText",defaultMessage:"Something went wrong. Please try again later"})}):null]})]}),ea=()=>(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(x.Z,{sx:t.successModalPopUpHeading1(Y),variant:"primary",children:F?.modalHeader||""}),(0,i.jsx)(x.Z,{variant:"body-text-secondary",sx:t.successModalPopUpHeading2(Y),children:F?.modalMessage||""}),(0,i.jsx)(y.Z,{variant:"plain",size:"lg",sx:t.continueShoppingButton,onClick:ee,children:G({id:"pdp.product.notifyPopUpContinueShopping"})})]});async function ei(e){try{let t=await (0,d.Z)(`${o.Yz}?locale=${K}`,{method:"POST",headers:(0,q.Z)(),body:e});return t.json()}catch(a){return console.error(a),""}}let en=async e=>{k.send("emailSubscribe",{eventAction:"notifyme email opt-in",eventLocation:"modal",eventLabel:(0,l.sha256)(e.email),emailShort:(0,A.B0)(e.email)});let t=JSON.stringify({dwfrm_notifyMe_email:e.email,dwfrm_notifyMe_pid:L,csrf_token:$}),a=await ei(t);if(!a.successMessage)return R(!0),console.error(Q),null;let i=(0,j.Z)(a.successMessage);D(i),R(!1),W(!0),N("email","")},{onChange:er,...es}=a("email",{required:!0,pattern:s.s}),eo=c()(p.errors.email,"type");return L&&B?(0,i.jsxs)(h.Z,{isOpen:E,onClose:X,isCentered:!0,children:[(0,i.jsx)(g.Z,{}),(0,i.jsxs)(M.Z,{sx:t.pdpModalNotifymeSection(Y),h:!Y&&"100%",maxWidth:"600px","data-qa":c()(u.A,"pdp.notifyMe.modal.d"),position:"relative",children:[O?(0,i.jsx)(ea,{}):(0,i.jsx)(et,{}),(0,i.jsx)(Z.Z,{name:"radhikaistestinghere",sx:t.modalCloseButtonStyles,top:z.xxl,right:z.xl,"data-qa":c()(u.A,"pdp.modalCloseIcon.d")})]})]}):null};t.default=(0,C.Z)(N)}}]);