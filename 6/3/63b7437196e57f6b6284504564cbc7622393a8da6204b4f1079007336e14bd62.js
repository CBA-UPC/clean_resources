define([],function(){"use strict";return["$compile","$log","selfcareModel","$timeout",function(t,e,r,a){return{restrict:"AE",scope:{data:"=ngModel"},templateUrl:"app/modules/selfcare/common/directives/moleculeDirective/molecule.html",link:function(t,e,r){var n=[8,8,8,8],l=150-n[1]-n[3],s=50-n[0]-n[2],o=t.data;t.moleculeId=r.id;var i=d3.max(o,function(t){return t.value}),c=d3.scale.linear().domain([0,o.length-1]).range([0,l]),d=d3.scale.linear().domain([0,i]).range([s,0]),u="."+r.id;a(function(){var t=d3.select(u).append("svg").attr("viewBox","0 0 150 50"),e=t.append("svg:g").attr("transform","translate("+n[3]+","+n[0]+")"),r=(e.append("line").attr("x1",-12).attr("y1",0).attr("x2",-5).attr("y2",0).style("stroke-width","0.2").style("stroke","black"),e.append("line").attr("x1",-12).attr("y1",17).attr("x2",-5).attr("y2",17).style("stroke-width","0.2").style("stroke","black"),e.append("line").attr("x1",-12).attr("y1",34).attr("x2",-5).attr("y2",34).style("stroke-width","0.2").style("stroke","black"),d3.svg.line().x(function(t,e){return c(e)}).y(function(t){return d(t.value)}));e.append("path").attr("d",r(o)).style("stroke","red").style("stroke-width",1).style("fill","none");var a=t.append("g").attr("class","uib-tooltip");a.append("rect").attr("height",20).attr("fill","#F6F6F6");var l=a.append("text").attr("dy","1.2em").style("text-anchor","middle").attr("class","fs-12");e.selectAll("circle.line").data(o).enter().append("svg:circle").attr("class","line").style("fill","#fff").style("stroke","red").attr("cx",r.x()).attr("cy",r.y()).attr("r",2).on("mouseover",function(){a.style("display",null)}).on("mouseout",function(){a.style("display","none")}).on("mousemove",function(t){var e=d3.mouse(this)[0],r=d3.mouse(this)[1]-25;a.attr("transform","translate("+e+","+r+")"),a.select("text").text(" "+t.value+" "),a.select("rect").attr("width",function(t){return l.node().getBBox().width+8}),a.select("rect").attr("x",function(t,e){return 35*e-l.node().getBBox().width/2}),a.select("text").attr("x",function(t,e){return 35*e+5})})})}}}]});