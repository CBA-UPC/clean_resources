'use strict';var gsid;var BROWSER_SUPPORTS=0;var dbname='mykhel-store';var dbversion='5';var ARTICLE_STORE='notification-article-db';var service_worker;var db,idb_server_id,idb_subscription_id,last_sub_id,idb,db1,db2,redirectUrl,furl={};var notificationApi={};var licount;var notnow_clicked=0;var notnowclicked_config=5;var utmval='utm_source=pn-desktop&utm_medium=pn-article&utm_campaign=pn-cms&ref=pn-cms';Object.defineProperties(window,{indexedDB:{value:window.indexedDB,writable:true}});if((/(chrome\/)(\d+\.\d+)/i.test(navigator.userAgent)&&navigator.userAgent.search("UCBrowser")<0)&&(/(chrome\/)(\d+\.\d+)/i.test(navigator.userAgent)&&navigator.userAgent.search("Edge")<0)&&(/(chrome\/)(\d+\.\d+)/i.test(navigator.userAgent)&&navigator.userAgent.search("UBrowser")<0)){var bversion=new Number(RegExp.$2);if(parseInt(bversion)>=42){BROWSER_SUPPORTS=1;}}
if(BROWSER_SUPPORTS==1){if('serviceWorker'in navigator){navigator.serviceWorker.register('/oiframework-sw-web.js?v=1.0.10').then(;}else{console.warn('Service workers aren\'t supported in this browser.');}}
notificationApi={html_entity_decode:function(str){var ta=document.createElement("textarea");ta.innerHTML=str.replace(/</g,"&lt;").replace(/>/g,"&gt;");var toReturn=ta.value;ta=null;return toReturn;},getAllData:function(){var DBOpenRequest=window.indexedDB.open(dbname,dbversion);DBOpenRequest.onsuccess=function(event){db1=DBOpenRequest.result;if(db1.objectStoreNames.contains(ARTICLE_STORE)){var transaction=db1.transaction([ARTICLE_STORE],"readwrite");transaction.oncomplete=function(event){console.log("Complete");};transaction.onerror=function(event){console.log("Error");};var objectStore=transaction.objectStore(ARTICLE_STORE);var objectStoreRequest=objectStore.getAll();objectStoreRequest.onsuccess=function(event){var myRecord=objectStoreRequest.result;var ulcontent=document.getElementById('not-content');console.log(myRecord.length);licount=myRecord.length;if(licount==0){$(".notification-num").hide();}else{$(".notification-num").text(licount).show();}
if(myRecord.length<=10){var totalrecords=parseInt(myRecord.length)-1;}else{var totalrecords=9;}
myRecord=myRecord.reverse();var loopval='';for(var i=0;i<=totalrecords;i++){if(myRecord[i]["url"]!=''){var dataURL=myRecord[i]["id"]+'?'+myRecord[i]["url"];myRecord[i]["url"]=myRecord[i]["url"]+'?'+utmval;var licontent="<li class='clearfix articlelist' id='licontent"+i+"' ><div class='popup-notf-notclose'><a href='javascript:void(0);' id='closebtn' data-url='"+dataURL+"' data-index='"+i+"'><i class='fa fa-close'></i></a></div><a href='"+myRecord[i]["url"]+"' id='notanchor' data-url='"+dataURL+"' data-index='"+i+"'><div class='popup-notf-artimg'><img src='"+myRecord[i]["image"]+"' alt='' width='100' height='75'/></div><div class='popup-notf-title'>"+myRecord[i]["title"]+"</div></a></li>";loopval=loopval+licontent;}}
var finalcontent=notificationApi.html_entity_decode(loopval);ulcontent.innerHTML=finalcontent;document.getElementById('notf-cont').style.display='block';};}};DBOpenRequest.onupgradeneeded=function(event){var db1=event.target.result;console.log(db1);db1.createObjectStore(ARTICLE_STORE);};},deleteData:function(link){var request=db1.transaction([ARTICLE_STORE],"readwrite").objectStore(ARTICLE_STORE).delete(link);request.onsuccess=},clearData:function(){var DBOpenRequest=window.indexedDB.open(dbname,dbversion);DBOpenRequest.onsuccess=function(event){db2=DBOpenRequest.result;var request=db2.transaction([ARTICLE_STORE],"readwrite").objectStore(ARTICLE_STORE).clear();request.onsuccess=function(event){console.log("Object Store has been cleared.");};};},manageNotificationListView:function(link,idx,btntype){if(btntype==='close'){$('#licontent'+idx).fadeOut(300,function(){$(this).remove();});}else{$('#licontent'+idx).fadeOut(300,;}},trackAppClicked:function(hrefLink){if(hrefLink!=''){fetch("/scripts/cms/controller.php?module=subscription&type=notificationAppClicked&url="+hrefLink+"&last_sub_id="+last_sub_id,{method:"post"}).catch(function(err){console.error('Inside 1st error:',err);});}},displayNumberNotification:function(){licount--;$(".notification-num").text(licount);if(licount==0){document.getElementById('notf-cont').style.display='none';$(".notification-num").hide();$(".notification-text").show();setTimeout(function(){$(".notification-wrapper").hide();},1000);}},openManageScreen:function(flg){if(flg==0){setTimeout(function(){$(".notification-wrapper").hide();},1000);}else{$(".notification-wrapper").show();if(licount==0){$(".notification-text").show();document.getElementById('notf-cont').style.display='none';}else{$(".notification-text").hide();document.getElementById('notf-cont').style.display='block';}}},manageOnOff:function(manageFlg,ele){if(manageFlg==0){$('.'+ele).removeClass('onstate');$('.'+ele).addClass('offstate');notificationApi.manageEnableDisable(0);notificationApi.clearData();$('.notification-bell').hide();$('.notification-bell-inactive').show();$(".notification-num").hide();$(".articlelist").remove();}else{$('.'+ele).addClass('onstate');$('.'+ele).removeClass('offstate');$('.notification-bell').show();$('.notification-bell-inactive').hide();notificationApi.manageEnableDisable(1);}},manageEnableDisable:function(activestatus){var webId=localStorage.getItem("web_id");var last_sub_id=localStorage.getItem("enmykhel_subscription_id");if(last_sub_id!=""&&last_sub_id!=undefined){fetch("/scripts/cms/controller.php?module=subscription&type=manageEnableDisable&last_sub_id="+last_sub_id+"&active_status="+activestatus,{method:"post"}).then(function(e){e.text().then(function(data){console.log(data);localStorage.setItem("enmykhel_enabled",activestatus);notificationApi.openManageScreen(0);});})["catch"](function(e){console.log("Fetch Error :-S",e)});}},manageNotifyScore:function(activestatus){var webId=localStorage.getItem("web_id");var last_sub_id=localStorage.getItem("enmykhel_subscription_id");if(last_sub_id!=""&&last_sub_id!=undefined){fetch("/scripts/cms/controller.php?module=subscription&type=manageNotifyScore&last_sub_id="+last_sub_id+"&active_status="+activestatus,{method:"post"}).then(function(e){e.text().then(function(data){console.log(data);localStorage.setItem("enmykhel_livescore",activestatus);});})["catch"](function(e){console.log("Fetch Error :-S",e)});}},manageParentOnNotifyClick:function(activestatus){$('.notification-bell').show();$('.notification-bell-inactive').hide();$('.popup-notification-on-off').addClass('onstate');$('.popup-notification-on-off').removeClass('offstate');var webId=localStorage.getItem("web_id");var last_sub_id=localStorage.getItem("enmykhel_subscription_id");if(last_sub_id!=""&&last_sub_id!=undefined){fetch("/scripts/cms/controller.php?module=subscription&type=manageEnableDisable&last_sub_id="+last_sub_id+"&active_status="+activestatus,{method:"post"}).then(function(e){e.text().then(;})["catch"](function(e){console.log("Fetch Error :-S",e)});}},detectPrivateWindow:function(){var fs=window.RequestFileSystem||window.webkitRequestFileSystem;if(!fs){console.log("No such Functions....");}else{fs(window.TEMPORARY,100,function(fs){console.log("Normal Mode");},function(err){console.log("incognito Mode");alert('You are in incognito mode.\nSome of the functionalities may not work.');});};},adgebraAdBetweenList:manageFooterEnableClick:function(activestatus){$('.notification-bell').show();$('.notification-bell-inactive').hide();var webId=localStorage.getItem("web_id");var last_sub_id=localStorage.getItem("enmykhel_subscription_id");$('.manage-notification').show();setTimeout(function(){$('.manage-notification').hide();},5000);$('.manage-notification-close').on('touchstart click',function(e){$('.manage-notification').hide('slow');});if(last_sub_id!=""&&last_sub_id!=undefined){fetch("/scripts/cms/controller.php?module=subscription&type=manageEnableDisable&last_sub_id="+last_sub_id+"&active_status="+activestatus,{method:"post"}).then(function(e){e.text().then(function(data){console.log(data);localStorage.setItem("enmykhel_enabled",activestatus);$("#notification-link").hide();});})["catch"](function(e){console.log("Fetch Error :-S",e)});}},};if(BROWSER_SUPPORTS==0){if(document.getElementById("notification-link")){document.getElementById("notification-link").style.display='none';}}
if(BROWSER_SUPPORTS==1){try{head.ready(function(){requirejs(["jquery"],function($){console.log(Notification.permission);var last_sub_id=localStorage.getItem("enmykhel_subscription_id");if(last_sub_id==""||last_sub_id=="undefined"||last_sub_id==null){last_sub_id="";}
if(Notification.permission=='granted'&&last_sub_id!=''){var idbdata=notificationApi.getAllData();}
var is_shown=getUserCookie('isShown');if(typeof(is_shown)=="undefined"||is_shown==null){notificationApi.detectPrivateWindow();setUserCookie('isShown',1,24,'/','','');}
var last_sub_id=localStorage.getItem("enmykhel_subscription_id");var enablestatus=localStorage.getItem("enmykhel_enabled");if(enablestatus==""||enablestatus=="undefined"||enablestatus==null){enablestatus="";}
var livescroreenabled=localStorage.getItem("enmykhel_livescore");if(livescroreenabled==""||livescroreenabled=="undefined"||livescroreenabled==null){livescroreenabled="";}
$(window).load(function(){licount=$('ul#not-content li').length;console.log("No Of Notification : "+licount);if(licount==0){$(".notification-num").hide();}else{$(".notification-num").text(licount).show();}});var notification_app_layer_display=getUserCookie('ds_notnow_clicked');if(notification_app_layer_display==""||notification_app_layer_display=="undefined"||notification_app_layer_display==null){notification_app_layer_display="";}
if(Notification.permission=='default'){var notification_display=getUserCookie('desktop_bsnotification_seen');if(typeof(notification_display)=="undefined"||notification_display==null){if(notification_app_layer_display<notnowclicked_config){setTimeout(function(){$("div#oiNotification").addClass('shownotf');$(".notf-overlay").show();},30000);}
document.getElementById("notification_bell").style.display="none";setUserCookie('desktop_bsnotification_seen',1,24,'/','','');}else{document.getElementById("notification_bell").style.display="block";$('.notification-bell').addClass('ismovement');}
$("#cri-subscribe").show();$("#cri-unsubscribe").hide();if(document.getElementById('notification-link')){$("#notification-link").show();}}else if(Notification.permission=='denied'){var notification_display=getUserCookie('desktop_bsnotification_seen');if(typeof(notification_display)=="undefined"||notification_display==null){if(notification_app_layer_display<notnowclicked_config){setTimeout(30000);}
document.getElementById("notification_bell").style.display="none";setUserCookie('desktop_bsnotification_seen',1,24,'/','','');}else{$('.notification-bell').hide();$('.notification-bell-inactive').show();}
if(document.getElementById('notification-link')){$("#notification-link").show();}}else{if(last_sub_id==""||last_sub_id=="undefined"||last_sub_id==null){$('.notification-bell').hide();}else{if(enablestatus==1){$('.popup-notification-on-off').addClass('onstate');$('.popup-notification-on-off').removeClass('offstate');$('.notification-bell').show();if(document.getElementById('notification-link')){$("#notification-link").hide();}}else{$('.popup-notification-on-off').removeClass('onstate');$('.popup-notification-on-off').addClass('offstate');$('.notification-bell-inactive').show();if(document.getElementById('notification-link')){$("#notification-link").show();}}
if(livescroreenabled==1){$("#cri-subscribe").hide();$("#cri-unsubscribe").show();}else{$("#cri-subscribe").show();$("#cri-unsubscribe").hide();}}
$('.notification-bell').removeClass('ismovement');}
$('.oi-not-now').on("click",function(e){e.preventDefault();if(Notification.permission=='denied'){$('.notification-bell').hide();$('.notification-bell-inactive').show();$("div#oiNotification").removeClass('shownotf');$(".notf-overlay").delay('1000').hide();var managenotificationblock=getUserCookie('manage_enmykhel_notification_block');if(typeof(managenotificationblock)=="undefined"||managenotificationblock==null){$('.manage-notification-block').show();setUserCookie('manage_enmykhel_notification_block',1,1440,'/','','');setTimeout(function(){$('.manage-notification-block').hide();},5000);$('.manage-notification-close-block').on('click',function(e){$('.manage-notification-block').hide('slow');});}}else{document.getElementById("notification_bell").style.display="block";$('.notification-bell').addClass('ismovement');$("div#oiNotification").removeClass('shownotf');setTimeout(function(){$(".notf-overlay").hide();},1000);}
var notnowcnt=getUserCookie('ds_notnow_clicked');if(notnowcnt==""||notnowcnt=="undefined"||notnowcnt==null){notnowcnt=parseInt(notnow_clicked)+1;}else{notnowcnt=parseInt(notnowcnt)+1;}
setUserCookie('ds_notnow_clicked',notnowcnt,144000,'/','','');});$('.oi-enable').on("click",function(e){e.preventDefault();if(Notification.permission=='denied'){$('.notification-bell').hide();$('.notification-bell-inactive').show();$("div#oiNotification").removeClass('shownotf');$(".notf-overlay").delay('1000').hide();var managenotificationblock=getUserCookie('manage_enmykhel_notification_block');if(typeof(managenotificationblock)=="undefined"||managenotificationblock==null){$('.manage-notification-block').show();setUserCookie('manage_enmykhel_notification_block',1,1440,'/','','');setTimeout(function(){$('.manage-notification-block').hide();},5000);$('.manage-notification-close-block').on('click',function(e){$('.manage-notification-block').hide('slow');});}}else{$("div#oiNotification").removeClass('shownotf');$(".notf-overlay").delay('1000').hide();if(BROWSER_SUPPORTS==1){subscribeDevice();$('.notification-bell').removeClass('ismovement');$(".notf-overlay").show();}}});$('.notification-bell').on('click',function(){if(Notification.permission=='denied'){$('.notification-bell').hide();$('.notification-bell-inactive').show();$('.manage-notification-block').show();setTimeout(function(){$('.manage-notification-block').hide();},5000);$('.manage-notification-close-block').on('click',function(e){$('.manage-notification-block').hide('slow');});}else if(Notification.permission=='default'){if(BROWSER_SUPPORTS==1){subscribeDevice();$(".notf-overlay").show();}
$('.notification-bell').removeClass('ismovement');}else{notificationApi.openManageScreen(1);}});$('.notification-bell-inactive').on('click',function(){if(Notification.permission=='denied'){$('.manage-notification-block').show();setTimeout(function(){$('.manage-notification-block').hide();},5000);$('.manage-notification-close-block').on('click',function(e){$('.manage-notification-block').hide('slow');});}else{notificationApi.openManageScreen(1);}});$('.os-notf-score a').on('click',function(){if(Notification.permission=='denied'){$('.manage-notification-block').show();setTimeout(function(){$('.manage-notification-block').hide();},5000);$('.manage-notification-close-block').on('click',function(e){$('.manage-notification-block').hide('slow');});}else if(Notification.permission=='default'){if(BROWSER_SUPPORTS==1){subscribeDevice('notify-cricket');}
$('.notification-bell').removeClass('ismovement');}else{var enablestatus=localStorage.getItem("enmykhel_enabled");if(enablestatus==""||enablestatus=="undefined"||enablestatus==null){enablestatus="";}
var datanotify=$(this).attr('data-notify');if(datanotify==0){notificationApi.manageNotifyScore(0);$("#cri-subscribe").show();$("#cri-unsubscribe").hide();}else{notificationApi.manageNotifyScore(1);$("#cri-subscribe").hide();$("#cri-unsubscribe").show();if(enablestatus==0){notificationApi.manageParentOnNotifyClick(1);}}}});if(document.getElementById('notify-subscribe')){$('#notify-subscribe').on('click touchstart',function(){ga('mykhelen.send','event','Notification_Article','Notification_Desktop','Mykhel');if(Notification.permission=='denied'){window.open('/common/notification-instruction-web.html','_blank');}else if(Notification.permission=='default'){if(BROWSER_SUPPORTS==1){subscribeDevice();$(".notf-overlay").show();}}else{var bsenabled=localStorage.getItem("enmykhel_enabled");if(bsenabled==0){$("#notification-link").show();$('.popup-notification-on-off').addClass('onstate');$('.popup-notification-on-off').removeClass('offstate');notificationApi.manageFooterEnableClick(1);}}});}
$(document).on('click','#closebtn',function(e){e.preventDefault();notificationApi.displayNumberNotification();var link=$(this).attr('data-url');var index=$(this).attr('data-index');notificationApi.manageNotificationListView(link,index,'close');notificationApi.deleteData(link);});$(document).on('click','#notanchor',function(e){var hrefval=$(this).attr('href');var index=$(this).attr('data-index');var link=$(this).attr('data-url');var redirecturl=hrefval+'?utm_source=pn-&utm_medium=pn-article&utm_campaign=pn-cms';window.location.href=redirecturl;hrefval=hrefval.split('?')[0];notificationApi.trackAppClicked(hrefval);notificationApi.deleteData(link);});$(document).on('click','.popup-notification-on-off',function(e){if($(this).hasClass('onstate')){if(document.getElementById('notification-link')){$("#notification-link").show();}
notificationApi.manageOnOff(0,'popup-notification-on-off');notificationApi.manageNotifyScore(0);$("#cri-subscribe").show();$("#cri-unsubscribe").hide();}else{if(document.getElementById('notification-link')){$("#notification-link").hide();}
notificationApi.manageOnOff(1,'popup-notification-on-off');notificationApi.manageNotifyScore(0);$("#cri-subscribe").show();$("#cri-unsubscribe").hide();}});$(document).on('click','.notification-clear',function(e){notificationApi.clearData();$(".notification-text").show();$(".notification-num").hide();$(".articlelist").remove();document.getElementById('notf-cont').style.display='none';licount=0;});$(".popup-notification-text").on('click',;});});}catch(err){console.log('Notification Block: '+err);}}
function promisifyRequest(e){return new Promise(function(s,t){function i(){s(e.result),a()}
e.addEventListener("complete",i),e.addEventListener("success",i),e.addEventListener("error",n),e.addEventListener("abort",n)})}
function IndexDBWrapper(e,s,t){var i=indexedDB.open(e,s);this.ready=promisifyRequest(i),i.onupgradeneeded=
function onPushSubscription(e,notifycricket){$(".notf-overlay").hide();var managenotification=getUserCookie('manage_enmykhel_notification');console.log("pushSubscription = ");var last_sub_id=localStorage.getItem("enmykhel_subscription_id");var bsenabled=localStorage.getItem("enmykhel_enabled");if(last_sub_id==""||last_sub_id=="undefined"||last_sub_id==null){last_sub_id="";}
if(bsenabled==""||bsenabled=="undefined"||bsenabled==null){bsenabled="";}
var web_id=localStorage.getItem("web_id");if(web_id==""||web_id=="undefined"||web_id==null){web_id="";}
if('subscriptionId'in e){gsid=e.subscriptionId;}else{gsid=e.endpoint.replace("https://android.googleapis.com/gcm/send/","");}
if(gsid!=""){}
console.log(gsid);fetch("/scripts/cms/controller.php?module=subscription&regId="+gsid+"&sys_gen_id="+last_sub_id,{method:"post"}).then(function(e){e.text().then(function(data){console.log(data);var jdata=JSON.parse(data);if(last_sub_id==""){localStorage.setItem("enmykhel_subscription_id",jdata.id);localStorage.setItem("enmykhel_enabled",1);}
if(web_id==""){localStorage.setItem("web_id",jdata.wi);}
if(notifycricket!=0){notificationApi.manageNotifyScore(1);$("#cri-subscribe").hide();$("#cri-unsubscribe").show();}
if(jdata.msg=='updated'){$('.notification-bell').show();$('.notification-bell-inactive').hide();localStorage.setItem("enmykhel_enabled",1);localStorage.setItem("enmykhel_livescore",0);if(document.getElementById('notification-link')){$("#notification-link").hide();}}else if(jdata.msg=='success'){$('.notification-bell').show();if(typeof(managenotification)=="undefined"||managenotification==null){$('.manage-notification').show();setUserCookie('manage_enmykhel_notification',1,1440,'/','','');setTimeout(5000);$('.manage-notification-close').on('click',;}
onRegisterNotify(service_worker);localStorage.setItem("enmykhel_enabled",1);localStorage.setItem("enmykhel_livescore",0);if(document.getElementById('notification-link')){$("#notification-link").hide();}}
window.indexedDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction;window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;if(!window.indexedDB){window.alert("Your browser doesn't support a stable version of IndexedDB.")}
var db;var request=window.indexedDB.open(dbname,dbversion);var createObjectStore=function(dataBase){if(!dataBase.objectStoreNames.contains(dbname)){dataBase.createObjectStore(dbname);}
if(!dataBase.objectStoreNames.contains(ARTICLE_STORE)){dataBase.createObjectStore(ARTICLE_STORE);}};console.log(request);request.onerror=request.onsuccess=function(event){db=request.result;console.log("success: "+db);if(db.setVersion){if(db.version!=dbversion){var setVersion=db.setVersion(dbversion);setVersion.onsuccess=}}
var transaction=db.transaction([dbname],"readwrite");transaction.objectStore(dbname).put(gsid,"subscriptionid");transaction.objectStore(dbname).put(jdata.id,"server_id");};request.onupgradeneeded=function(event){var db=event.target.result;console.log(db);createObjectStore(event.target.result);}});})["catch"](function(e){console.log("Fetch Error :-S",e)})}
function subscribeDevice(notifycricket=0){navigator.serviceWorker.ready.then(function(serviceWorkerRegistration){service_worker=serviceWorkerRegistration;serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly:true}).then(.catch(function(e){if(Notification.permission=="granted"){$(".notf-overlay").hide();}else if(Notification.permission=="default"){$(".notf-overlay").hide();}else if(Notification.permission=="denied"){$(".notf-overlay").hide();}
if(Notification.permission==='denied'){console.log('Permission for Notifications was denied');fetch("/scripts/cms/controller.php?module=subscription&type=notificationBlocked&device_type=computer",{method:"post"}).then(;}else{console.log('Unable to subscribe to push.',e);}});});}
function unsubscribeDevice(){navigator.serviceWorker.ready.then(function(serviceWorkerRegistration){serviceWorkerRegistration.pushManager.getSubscription().then(function(pushSubscription){if(!pushSubscription){return;}
pushSubscription.unsubscribe().then(function(successful){var last_sub_id=localStorage.getItem("enmykhel_subscription_id");if(last_sub_id==""||last_sub_id=="undefined"||last_sub_id==null){last_sub_id="";}
if(last_sub_id!=""){var website_id=113;fetch("/scripts/cms/controller.php?module=subscription&type=unsubscribe&sys_gen_id="+last_sub_id+"&website_id="+website_id,{method:"post"}).then(function(e){e.text().then(function(data){console.log(data);var jdata=JSON.parse(data);if(last_sub_id==""){localStorage.setItem("enmykhel_subscription_id",jdata.id);}
console.log("Unsubscribed from push: ",e);});});}}).catch(function(e){console.log('Unsubscription error: ',e);});}).catch(function(e){console.error('Error thrown while unsubscribing from push messaging.',e);});});}
function onRegisterNotify(reg){try{var domain='www.mykhel.com';var refer_url="https://"+domain;var notification=reg.showNotification(domain,{body:'Thank you for subscribing to Mykhel News alerts.',icon:'/images/mykhel-144.png',vibrate:[300,100,400],tag:'enmykhel-welcome',data:{url:refer_url}});}catch(err){}}
function permissionStatusChange(e){switch(console.log("permissionStatusChange = ",e),e.status){case "denied":console.log("denied");break;case "granted":console.log("granted");break;case "prompt":console.log("prompt");}}
function setUpPushPermission(){navigator.permissions.query({name:"push",userVisibleOnly:!0}).then(function(e){permissionStatusChange(e),e.onchange=navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(function(e){return e;})["catch"](})})["catch"](}
function setUpNotificationPermission(){return "denied"===Notification.permission?console.log("Ooops Notifications are Blocked","Unfortunately notifications are permanently blocked. Please unblock / allow them to switch on push notifications."):"default"===Notification.permission?1:void navigator.serviceWorker.ready.then(function(e){e.pushManager.getSubscription().then(;})}
function initialiseState(){return "PushManager"in window?("permissions"in navigator?void setUpPushPermission():void setUpNotificationPermission()):1;}
window.addEventListener('load',function(){if(BROWSER_SUPPORTS==1){if(Notification.permission=="granted"){console.log("Granted Mode");if(BROWSER_SUPPORTS==1){subscribeDevice();}}else if(Notification.permission=="default"){console.log("Default Mode");if(BROWSER_SUPPORTS==1){}}else if(Notification.permission=="denied"){console.log("Denied Mode");}}});