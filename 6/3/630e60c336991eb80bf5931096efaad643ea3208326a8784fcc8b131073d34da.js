(self.webpackChunk=self.webpackChunk||[]).push([[7200],{"8keW":function(e,t,n){var r=n("eH3v");
/*! For license information please see index.js.LICENSE.txt */(()=>{var e={69:e=>{"use strict";e.exports=function(){return{marketplace:"milanuncios",locale:"es-ES",debug:!0,features:{displayNumericScore:!1,displayStarScore:!0,isRoundedStarScore:!0,disableReviewLink:!0,scalePointsIndependent:!1,shouldAutoAdvance:!1,feedbackNavigation:!1,backButton:!0,exitButtons:!0,dateCustomizer:hintType:"SUBTITLE"},numberOfScalePoints:5,texts:{"es-ES":{avatarText:"Foto de perfil de ",avatarTextWithName:"Foto de perfil de {name}",avatarMissingText:" no dispone de imagen de perfil. Se muestra con avatar blanco sobre fondo azul.",avatarMissingTextWithName:"{name} no dispone de imagen de perfil. Se muestra con avatar blanco sobre fondo azul.",verifiedIconTitle:"Usuario verificado",feedbackCategoryCommunication:"Comunicación",feedbackCategoryProduct:"Producto",feedbackCategoryTransaction:"Pago",feedbackCategoryAliasCommunication:"comunicación",feedbackCategoryAliasTransaction:"envío",feedbackCategoryAliasPayment:"pago",feedbackCategoryAliasAs_advertised:"descripción",feedbackCategoryAdjectiveCommunication:"Muy bueno",feedbackCategoryAdjectiveTransaction:"Todo bien",feedbackCategoryAdjectivePayment:"Todo bien",feedbackCategoryAdjectiveAs_advertised:"Preciso",wordedScoreLevel1:"Excelente",wordedScoreLevel2:"Muy bueno",wordedScoreLevel3:"Bueno",wordedScoreLevel4:"Bien",wordedScoreLevel5:"av 10",scoreHeading:"Puntuación general",ratingScoreDescription:"Puntuación basada en {number, plural, [review,reviews]}",scoreExpandButtonLabel:"Puntuación categorizada",itemReputationNotFoundText:"Sin reseñas",memberSince:"Miembro desde {year}",verifiedInfoLink:"https://www.milanuncios.com/cuenta-verificada",profileLinkTemplate:"https://www.milanuncios.com/anuncios-usuario/{userId}.htm",screenReaderProfileHeading:"Información del perfil del vendedor",screenReaderScoreLabel:"Puntuación: {score} de 10",toggleDisplayModeGiven:"Valoración enviada",toggleDisplayModeReceived:"Valoración recibida",toggleDisplayModeGroupLabel:"Selecciona modo de visialización",reviewRoleSeller:"Vendedor",reviewRoleBuyer:"Comprador",soldLabel:"Vendido",boughtLabel:"Comprado",soldToPreposition:"a",boughtFromPreposition:"por",reviewYou:"Tu",reportFeedbackIntro:"Dinos qué problema has tenido y contactaremos contigo lo antes posible.",reviewReportButton:"Revisar valoración",reportSendButtonButtonLabel:"Enviar",replyCancelButton:"Cancelar",reportFeedbackPending:"Valoración enviada",reportFeedbackRejected:"Valoración descartada",replyError:"Oops! Algo ha salido mal. Vuelve a intentarlo más tarde.",reportFeedbackNotYouButtonLabel:"¿No eres tú?",reportFeedbackNotYouDialogHeader:"¿Compraste esto?",reportFeedbackNotYouDialogContent:"El vendedor será notificado y las valoraciones serán eliminadas.",reportFeedbackNotYouDialogConfirmButton:"No he comprado esto",reportFeedbackNotYouDialogCancelButton:"Cancelar",reportFeedbackNotYouDisputePending:"Se eliminará en unos minutos",replyInputTitle:"Tu respuesta",replySendButton:"Enviar respuesta",reviewReplyButton:"Responder",replyToFeedbackConfirmation:"Respuesta enviada",replyToFeedbackError:"Oops! Algo ha salido mal. Vuelve a intentarlo más tarde.",reviewRepliedLabel:"respuesta:",reviewReadMore:"Leer más",anonymizedUser:"Usuario anónimo",identityUsernameDefault:"Usuario no encontrado",reviewShowMore:"Mostrar más valoraciones",showLessReviewsText:"Mostrar menos valoraciones",reviewTextEmpty:"el usuario no ha dejado ninguna valoración",missingReviewText:"no ha dejado valoración",noResultsText:"El usuario no todavía no ha recibido ninguna valoración",privateListingEmptyText:"Todavía no has añadido ni recibido ninguna valoración.",daysLeft:"Te quedan {days, plural, [day,days]} para añadir tu valoración",leaveReviewButtonLabel:"Deja tu valoración",pendingReviewSuffixText:"valoración pendiente",unpublishedSuffixText:"ha añadido una valoración.",unpublishedCallToActionText:"Valora la venta",feedbackInputLandingPageUrl:"https://www.milanuncios.com/mis-valoraciones?token={token}",ratingTitle:"Valora la venta",ratingHintTitle:"Consejos",textReviewHeadingOptional:"Por favor, añade tu valoración",textReviewSubtitle:"",textReviewHeading:"Por favor, añade tu valoración",textReviewPlaceholderOptional:"Buen comunicador, llegó a tiempo, etc...",textReviewPlaceholder:"Por favor, añade tus comentarios",textReviewSubText:"Tus comentarios serán visibles en el perfil del usuario y le ayudarán a mejorar.",textReviewNoThanksButton:"No gracias",textReviewSaveButton:"Guardar",confirmSubmitTitle:"Envia tu valoración",confirmSubmitButton:"Enviar",ratingSubmittedTitle:"¡Tenemos ya tu valoración!",confirmationErrorTitle:"Algo ha salido mal. Vuelve a intentarlo más tarde.",confirmationMessage:"Muchas gracias. Con tu opinión nos hacemos mejores y más seguros.",ratingSubmittedURL:"http://www.milanuncios.com/mis-anuncios/",ratingSubmittedCloseButton:"Hecho",ratingError:"Oops! Algo ha salido mal. Vuelve a intentarlo más tarde.",ratingRetryButton:"Reintentar",ratingAlreadySubmitted:"La valoración ya ha sido completada",ratingExpired:"La valoración ha expirado",ratingUnknownError:"Oops! Algo ha salido mal. Vuelve a intentarlo más tarde.",backButtonLabel:"Atrás",nextButtonLabel:"Siguiente",scalePointLabel1:"Sad emoji",scalePointLabel2:"Neutral emoji",scalePointLabel3:"Happy emoji",scalePointLabel4:"Excited emoji",progressStepLabel:"Pregunta {current} de {total}",charCounterFormat:"{counter}/{max} caracteres",ratingNextButton:"Siguiente",ratingLastNextButton:"Siguiente",ratingBackButton:"Atrás",skipLabel:"Saltar",pickABuyerSubmitButton:"Siguiente",pickABuyerErrorPrimary:"Ha habido un error.",pickABuyerErrorSecondary:"Vuelve a intentarlo más tarde.",pickABuyerErrorCloseButton:"Cerrar",pickABuyerListEmpty:"No se han encontrado compradores",pickABuyerTitle:"¿Quién lo ha comprado?",pickABuyerNotListedButton:"No está en la lista",pickABuyerDescription:"Estas son las personas que te contactaron. ¿A quién se lo vendiste?",pickABuyerTradeFailMessage:"No se ha podido valorar a este comprador",pickABuyerLastMessageText:"",pickABuyerLastMessageEmpty:""}}}}},1158:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(782),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.Answer=void 0,n(2616),n(3601);var i=function(){function e(t){var n=t.questionId,r=t.skipped,i=t.key,o=t.questionText,a=t.category;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._question=n,this._skipped=r||!1,this._key=i,this._question:function(){return{question:this._question,skipped:this._skipped}}},{key:"questionUri",get:function(){return this._question}},{key:"skipped",get:function(){return this._skipped}},{key:"key",get:function(){return this._key}},{key:"questionText",get:function(){return this._questionText}},{key:"category",get:function(){return this._category}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.Answer=i},3097:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}n(6163),n(782),n(3601),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(6231),n(7025),n(2616),n(1827),n(373),n(3130),n(4415),n(9832),n(5010),n(369),n(5471);var a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(s,e);var t,n,a,c=(n=s,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=o(n);if(a){var i=o(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(r=c.call(this,"".concat(e," | traceId: ").concat(t))).name="ApiError",r.traceId=t,r.httpStatusCode=n,,Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));t.default=a},6097:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}n(2616),n(3601),n(782),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.id,r=t.amount,i=t.text,o=t.tip;n&&(this.id=n),r&&(this.amount=r),i&&(this.text=i),o&&(this.tip=o)}));t.default=o},291:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(782),n(373),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(3130),n(8811),n(6231),n(2616),n(3601);var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"_findRequiredChildPromise",value:function(e,t){var n=e.querySelector(t);return n?Promise.resolve(n):Promise.reject(new Error("Coun",value:function(e,t){return this._findRequiredChildPromise(e,t)}},{key:"_findChildOptional",value:function(e,t){var n=e.querySelector(t);return n?Promise.resolve(n):Promise.reject({optional:"Element selected by ".concat(t," is not present")})}},{key:"_findButtonOptional",value:function(e,t){var n=e.querySelector(t);return n?Promise.resolve(n):Promise.reject({optional:"Button selected by ".concat(t," is not present")})}},{key:"_assertPresent",value:function(e){if(null==e)throw new Error("assertPresent failed at ".concat(this.constructor.name));return e}},{key:"_findRequiredChildElement",value:function(e,t){var n=e.querySelector(t);if(!n)throw new Error("Could not find element with: ".concat(t));return n}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=i},5426:(e,t,n)=>{"use strict";n(782),n(2008),n(8935),n(4506),n(4168),n(4059),n(2180),n(373),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(3130),n(8811),n(6283),n(2616),n(3601);var r,i=(r=n(3620))&&r.__esModule?r:{default:r},o=n(9470);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=f(t))in e?Object.defineProperty"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function f(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}var d={stepper:!0,animationOnScalePointClick:!0,feedbackNavigation:!0,userReputationCategories:!0,reputationBarScores:!0,reputationCollapse:!0,disableReviewLink:!1,displayreviewTextEmpty:!0,didNotBuy:!0,scalePointsIndependent:!0,displayNumericScore:!0,displayStarScore:!1,isRoundedStarScore:!1,displayWordedScore:!1,feedbackInputHeader:!0,shouldAutoAdvance:!0,backButton:!1,displayReputationInfoButton:!1,exitButtons:!0,roleLabel:!0,dateCustomizer:null,buyerLastMessageDate:!1,hintType:"DRAWER",dotType:o.DOT_TYPES.DOT_OVER,retryIfTradeExists:!1},p=function(){function e(t){var n=t.apiUrl,r=t.token,i=t.features,o=t.profileId,a=t.maxReviewsToDisplay,c=t.maxCharactersFeedbackInput,l=t.maxCharactersFeedbackReply,u=t.maxCharactersFeedbackClaim,f=t.language,p=t.absoluteUrl,h=t.fallbackAvatarUrl,b=t.debug,v=t.onReadyToRender,m=t.onError,y=t.getUserToken,g=t.onReputationInfoAction,k=t.sdkVersion,w=t.sdkName,_=t.numberOfScalePoints,C=t.environmentId,x=t.isItemDeliverable,E=t.marketplace;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._apiUrl=n,this._language=f,null!=r&&(this._token=r),this._features=null!=i?s(s({},d),i):d,null!=o&&(this._profileId=o),null!=a&&(this._maxReviewsToDisplay=a),this._maxCharactersFeedbackInput=null!=c?c:200,this._maxCharactersFeedbackReply=null!=l?l:200,this._maxCharactersFeedbackClaim=null!=u?u:200,null!=p&&(this._absoluteUrl=p),null!=h&&(this._fallbackAvatarUrl=h),null!=b&&(this._debug=b),null!=v&&(this._onReadyToRender=v),null!=m&&(this._onError=m),null!=y&&(this._getUserToken=y),this._numberOfScalePoints=null!=_?_:4,null!=k&&(this._sdkVersion=k),null!=w&&(this._sdkName=w),null!=C&&(this._environmentId=C),null!=x&&(this._isItemDeliverable=x),null!=E&&(this._marketplace=E),this._onReadyToRender=v,this._onError=m,this._onReputationInfoAction=g}var t,n,r;return t=e,n=[{key:"apiUrl",get:function(){return this._apiUrl}},{key:"token",get:function(){return this._token}},{key:"features",get:function(){var e=this._features.autoSave||!1;return s(s({},this._features),{},{autoSave:e})},set:function(e){this._features=e}},{key:"language",get:function(){return this._language}},{key:"texts",get:function(){returfunction(){return null!=this._language?this._language.locale:null}},{key:"profileId",get:function(){return this._profileId}},{key:"maxReviewsToDisplay",get:function(){return null==this._maxReviewsToDisplay?-1:this._maxReviewsToDisplay}},{key:"maxCharactersFeedbackInput",get:function(){return this._maxCharactersFeedbackInput}},{key:"maxCharactersFeedbackReply",get:function(){return this._maxCharactersFeedbackReply}},{key:"maxCharactersFeedbackClaim",get:function(){return this._maxCharactersFeedbackClaim}},{key:"absoluteUrl",get:function(){return this._absoluteUrl}},{key:"fallbackAvatarUrl",get:function(){return this._fallbackAvatarUrl}},{key:"debug",get:function(){return this._debug}},{key:"textReviewConfis._textReviewConfiguration=e||o.TEXT_REVIEW_CONF.ENABLED_OPTIONAL}},{key:"marketplace",get:function(){return this._marketplace}},{key:"textReviewSettings",get:function(){var e=this._textReviewConfiguration===o.TEXT_REVIEW_CONF.ENABLED_MIN_SCORE?1:0;return this._textReviewSettings||{title:"",subtitle:"",threshold:e,placeholder:"",helper:"",characterLimits:{min:0,max:0}}},set:function(e){var t=this._textReviewConfiguration===o.TEXT_REVIEW_CONF.ENABLED_MIN_SCORE?1:0;this._textReviewSettings=s({threshold:t,title:"",subtitle:""},e)}},{key:"onReadyToRender",get:function(){return this._onReadyToRender}},{key:"onError",get:function(){return this._onError}},{key:"getUserToken",get:fu((function(e,t){t(new Error("getUserToken needs to be provided"))}))}}},{key:"onReputationInfoAction",get:function(){return this._onReputationInfoAction}},{key:"scalePoints",get:function(){for(var e=[],t=1;t<=this._numberOfScalePoints;t++)e[t]={number:t,text:this._language.texts["scalePointLabel".concat(t)]};return e}},{key:"numberOfScalePoints",get:function(){return this._numberOfScalePoints}},{key:"sdkVersion",get:function(){return this._sdkVersion}},{key:"environmentId",get:function(){return this._environmentId}},{key:"isItemDeliverable",get:function(){return this._isItemDeliverable}},{key:"sdkName",",get:function(){return this._authenticatedUser||{id:"",token:""}},set:function(e){this._authenticatedUser=e}},{key:"isFeatureEnabled",value:function(e){return null!=this._features&&null!=this._features[e]&&!0===this._features[e]}}],r=[{key:"initialize",value:function(t,n){if(null==t)throw new Error("Settings object is required. See documentation.");if(!t.onError)throw new Error("Required settings.onError callback function is not defined");if(t.onError&&"function"!=typeof t.onError)throw new Error("settings.onError is not a function!");var r=function(){return null!=t.debug?t.debug:!0===n.debug},o={apiUrl:t.apiUrl,token:t.userToken,features:Object.assign({},n.features,t.features),profileId:null!=t.userId?t.userId:t.itemSDRN,language:new i.default(n.texts,t.texts,function(){if(null!=t.locale)return t.locale;if(null!=n.locale)return n.locale;throw new Error("Required setting 'locale' is missing")}(),r()),absoluteUrl:t.absoluteUrl,fallbackAvatarUrl:t.fallbackAvatarUrl,maxReviewsToDisplay:t.maxReviewsToDisplay,maxCharactersFeedbackInput:n.maxCharactersFeedbackInput,maxCharactersFeedbackReply:n.maxCharactersFeedbackReply,maxCharactersFeedbackClaim:n.maxCharactersFeedbackClaim,onReadyToRender:t.onReadyToRender,onError:t.onError,getUserToken:t.getUserToken,onReputationInfoAction:t.onReputationInfoAction,debug:r(),numberOfScalePoints:n.numberOfScalePoints,environmentId:t.environmentId,isItemDeliverable:t.isItemDeliverable,sdkVersion:t.SDK_VERSION,sdkName:t.SDK_NAME,marketplace:n.marketplace};return t.getUserToken||delete o.getUserToken,new e(o)}}],n&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=p},9470:(e,t,n)=>{"use strict";n(782),Object.defineProperty(t,"__esModule",{value:!0}),t.TEXT_REVIEW_CONF=t.QUESTION_TYPE=t.DOT_TYPES=t.CURRENT_USER_REPORT_STATUS=t.ALLOW_FEEDBACK_REPLY=void 0,n(9093);var r=Object.freeze({DOT_OVER:"DOT_OVER",DOT_BESIDE:"DOT_BESIDE",DOT_ONLY:"DOT_ONLY"});t.DOT_TYPES=r;var i=Object.freeze({ENABLED_MIN_SCORE:"ENABLED_MIN_SCORE",ENABLED_MANDATORY_THRESHOLD:"ENABLED_MANDATORY_THRESHOLD",ENABLED_MANDATORY:"ENABLED_MANDATORY",ENABLED_OPTIONAL:"ENABLED_OPTIONAL",DISABLED:"DISABLED"});t.TEXT_REVIEW_CONF=i;var o=Object.freeze({ENABLED:"ENABLED",DISABLED:"DISABLED"});t.ALLOW_FEEDBACK_REPLY=o;var a=Object.freeze({ENABLED:"ENABLED",REPORTED:"REPORTED",DISABLED:"DISABLED"});t.CURRENT_USER_REPORT_STATUS=a;var c=Object.freeze({SCALE:"SCALE",MULTISELECT:"MULTISELECT"});t.QUESTION_TYPE=c},21:(e,t,n)=>{"use strict";n(782),n(373),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(3130),n(568),n(4833),n(2616),n(3601);var r=n(9470);function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}i(n(6097)),i(n(6957));var a=function(){function e(t,n,i,o,a,c,s,l,u,f,d,p,h){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null!=t&&(this.textReview=t),null!=n&&(this.score=n),null!=i&&(this.scoreAsNumber=i),null!=o&&(this.scorePercentage=o),null!=a&&(this.givenAt=a),null!=c&&(this.reply=c),null!=s&&(this.tradeId=s),null!=l&&(this.feedbackId=l),null!=u&&(this.ownerId=u),null!=p&&(this.badges=p),null!=h&&(this.options=h),this.currentUserReportStatus=f||r.CURRENT_USER_REPORT_STATUS.DISABLED,this.allowFeedbackReply=d||r.ALLOW_FEEDBACK_REPLY.DISABLED}var t,n;return t=e,(n=[{key:"ratingDecimal",get:function(){return Math.round(ltEmpty",get:function(){retu null===(e=this.textReview)||void 0===e?void 0:e.substring(0,500)}},{key:"replyShort",get:function(){var e;return null===(e=this.reply)||voieturn(null===(e=this.textReview)||void 0===e?void 0:e.length)>500}},{key:"longReply",get:function(){var e;return(null===(e=this.reply)||void 0===e?void 0:e.text.length)>300}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=a},7502:(e,t,n)=>{"use strict";n(782),n(373),n(4415),n(9832),n(469),n(5471),n(369),n(4168),n(6231),n(5010),n(6109),n(1286),n(1827),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(2900),n(3130),n(8811),n(6699),n(5647),n(2616),n(3601),o(n(5426));var r=o(n(3097)),i=o(n(9223));function o(e){return e&&e.__esModule?e:{default:e}}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(){s=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function f(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),c=new A(i||[]);return r(a,"_invoke",{value:C(e,n,c)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=f;var p={};function h(){}function b(){}function v(){}var m={};u(m,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(D([])));g&&g!==t&&n.call(g,o)&&(m=g);var k=v.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(r,o,c,s){var l=d(e[r],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==a(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,c,s)}),(function(e){i("throw",e,c,s)})):t.resolve(f).then((function(e){u.value=e,c(u)}),(function(e){return i("throw",e,c,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function C(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var c=x(a,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=d(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=d(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function D(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return b.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:b,configurable:!0}),b.displayName=u(v,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(_.prototype),u(_.prototype,c,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new _(f(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(k),u(k,l,"Generator"),u(k,o,(function(){return this})),u(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=D,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:D(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function l(e,t,n,r,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===a(i)?i:String(i)),r)}var i}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t}var t,n,o,a;return t=e,n=[{key:"findLinkFromRoot",value:function(e){return this.getRequestWithAbsolutePath("".concat(thnction(e){return e.json()})).then((function(",value:function(e){return this._fetch(e,(function(e){return e}))}},{key:"authenticatedGetRequestWithAbsolutePath",value:(o=s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this._config.authenticatedUser.id,e.abrupt("return",this._fetch(t,(function(e){return n&&(e.headers["X-Connected-User"]=n),e})));case 2:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=o.apply(e,t);function a(e){l(i,n,hrow",e)}a(void 0)}))},function(e){return a.apply(this,arguments)})},{key:"patch",value:function(e,t){return this._fetch(e,(function(e){return e.method="PATCH",e.body=JSON.stringify(t),e.headers["Content-Type"]="application/hal+json",e}))}},{key:"post",value:function(e,t,n){return this._fetch(e,(function(e){return e.method="POST",e.body=JSON.stringify(t),e.headers.Authorization="Bearer ".concat(n),e.headers["Content-Type"]="application/hal+json",e}))}},{key:"_fetch",value:function(e,t){var n=this,r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,c=[],s=!0,l=!1;try{for(o=(n=n.call(e)).next,0;!(s=(r=o.call(n)).done)&&(c.push(r.value),2!==c.length);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,2);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,2):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,i.default)().split(" ")),o=r[0],a=r[1],s={method:"GET",headers:{Accept:"application/hal+json","Accept-Language":this._config.locale,Authorization:null!=this._config.token?"Bearer ".concat(this._config.token):"","X-Trust-SDK":JSON.stringify({appName:"".concat(window.location.hostname),sdkName:"".concat(this._config.sdkName),sdkVersion:"".concat(this._config.sdkVersion),sdkPlatform:"WEB",platformName:o,platformVersion:a})}};return this._config.environmentId&&(s.headers["X-Environment-Id"]=this._config.environmentId),this._config.isItemDeliverable&&(s.headers["X-Is-Itemhen((function(e){return e.ok?Promise.resolve(e):n._handleError(e)}))}},{key:"_handleError",value:function(e){var t=this,n=e.clone(),r=e.headers.get("Content-Type");return null!=r&&r.includes("json")?e.json().then((function(e){return e.message?t._createApiErrorFromJson(e,e.message,n):e.detail?t._createApiErrorFromJson(e,e.detail,n):t._createErrorFromTextBody(n)})):this._createErrorFromTextBody(n)}},{key:"_createApiErrorFromJson",value:function(e,t,n){var i=n.status;throw e.httpStatusCode&&(i=e.httpStatusCode),new r.default(t,e.traceId,i)}},{key:"_createErrorFromTextBody",value:function(e){return e.text().then((function(t){throw new Error("Unexpected API error. Response status: ".concat(e.status,". Body: ").concat(t))}))}}],n&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=f},6005:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(782),Object.defineProperty(t,"__esModule",{value:!0}),t.calculateAndFormatScore=function(e,t,n){if(null==e)return n||"";var i;"object"===("undefined"==typeof window?"undefined":r(window))&&(i=window.Intl);var o=10*e;return i&&"object"===r(i)&&i.NumberFormat&&"function"==typeof i.NumberFormat&&null!=t?new i.NumberFormat(t,{minimumSignificantDigits:2,maximumSignificantDigits:2}).format(o):o.toPrecision(2)},n(2616),n(373),n(3130),n(4415),n(9832)},3620:(e,t,n)=>{"use strict";n(782),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(2008),n(6283),n(2616),n(3601);var r,i=(r=n(5668))&&r.__esModule?r:{default:r};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a=function(){function e(t,n,r,o){var a=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null==r)throw new Error("Required setting 'locale' is missing");if(!(null!=t&&0!==Object.keys(t).length||null!=n&&0!==Object.keys(n).length))throw new Error("Texts are not defined for this site. Add texts.json to the 'sites' folder.");this._debug=o,this._locale=r,this._textRegistry=new i.default(this._debug),this._mergeTexts(t,n,(function(e){if(a._texts=e,null==a._texts)throw new Error("Text translations are not defined for locale: ".unction(e){return this._textRegistry.validateTexts(e,this._texts)}},{key:"_mergeTexts",value:function(e,t,n){var r=e[this._locale],i={};if(null!=t){if(!Object.prototype.hasOwnProperty.call(t,this._locale))throw new Error("Custom texts specified by settings.texts does not contain the locale property ".concat(this._locale));i=t[this._locale],this._debug&&(console.info("The following texts are overridden from your site: ".concat(Object.keys(i).join(", "))),this._textRegistry.reportUnsupported(i))}n(Object.assign({},r,i))}},{key:"texts",get:function(){return this._texts}},{key:"locale",get:function(){return this._locale}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=a},7929:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.e, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(782),n(1286),n(373),n(3130),n(4415),n(9832),n(6231),n(1827),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(6699),n(5647),n(3162),n(8935),n(2008),n(4168),n(9975),n(6109),n(9271),n(6510),n(2900),n(2616),n(3601);var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.texts=t,this.debug=n}var t,n;return t=e,(n=[{key:"formatMessage",value:function(e,t){var n=this.texts[e];return null==n?(this.debug&&console.warn("Translation for text key: '".concat(e,"' is missing")),e):this._atLeastOneValueIsNull(t)?(this.debug&&console.warn("At least one template variable value is missing for text key: '".concat(e,"'")),e):n.includes("plural")?this._formatPlural(t,n):this._hasArgs(t)?this._format(t,n):n}},{key:"_atLeastOneValueIsNull",value:function(e){return null!=e&&Object.valus(e).length!==Object.values(e).filter((function(e){return null!=e})).length}},{key:"_hasArgs",value:function(e){return null!=e&&Object.keys(e).length>0}},{key:"_format",value:function(e,t){var n=this,r=t;return Object.keys(e).forEach((function(t){n.debug&&!r.includes(t)&&console.warn("Invalid context parameter (".concat(t,") passed to message template: ").conclace",value:function(e,t,n){return e.replace("{".concat(t,"}"),n)}},{key:"_formatPlural",value:function(e,t){var n,r=e[Object.keys(e)[0]],o=t.slice(t.indexOf("{"),t.lastIndexOf("}")+1),a=o.substring(o.indexOf("[")+1,o.indexOf("]")).split(",");return n=1===r?i(a,1)[0]:i(a,2)[1],t.replace(o,"".concat(r," ").concat(n))}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=a},6587:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}n(7025),n(5471),n(782),n(2616),n(3601),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.MultiSelectAnswer=void 0,n(5010),n(6163),n(369);var a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(l,e);var t,n,a,c,s=(a=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=o(a);if(c){var n=o(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(e){var t,n=e.questionId,r=e.skipped,i=e.key,o=e.questionText,a=e.category,c=e.options;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,{questionId:n,skipped:r,key:i,questionText:ostion:this._question,options:this._options,skipped:this._skipped}}},{key:"options",get:function(){return this._options},set:function(e){this._options=e}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(n(1158).Answer);t.MultiSelectAnswer=a},6957:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}n(2616),n(3601),n(782),n(373),n(3130),n(4415),n(9832),Object),n&&i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}((function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.id,r=t.title,i=t.selected;n&&(this.id=n),r&&(this.title=r),i&&(this.selected=i)}));t.default=o},7625:(e,t,n)=>{"use strict";function r(e){return new Promise((function(t){return e.text().then((function(n){try{var r=JSON.parse(n);t({status:e.status,ok:e.ok,body:r})}catch(r){t({status:e.status,ok:e.ok,body:n})}}))}))}n(782),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return new Promise((function(n,i){fetch(e,t).then(r).then.meta.error)})).catch((function(e){return i(new Error(e.message))}))}))},n(3130),n(8811)},1236:(e,t,n)=>{"use strict";var r;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n(782),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(6231),n(2616),n(3601),(r=n(21))&&r.__esModule;var o=function(){function e(t){var n=t.name,r=t.localProfileId,i=t.verified,o=t.overallScore,a=t.numberOfReceivedFeedbacks,c=t.isSeller,s=t.feedback,l=t.isCurrentUser,u=t.dispute,f=t.isGiven,d=t.avatarUrl;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null!=n&&(this.name=n),null!=d&&(this.avatarUrl=d),null!=r&&(this.localProfileId=r),null!=i&&(this.verified=!0===i),null!=o&&(this.overallScore=o),null!=a&&(this.numberOfReceivedFeedbacks=a),null!=c&&(this.isSeller=c),null!=s&&(this.feedback=s),this.isCurrentUser=!(null==l||!l)&&l,null!=u&&(this.dispute=u),null!=f&&(this.isGiven=f)}var t,n;return t=e,(n=[{key:"isDisputePending",get:function(){return null!=this.dispute&&!0===this.dispute.pending}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=o},6454:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},i(e,t)}function o(e){return o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},o(e)}n(7025),n(5471),n(782),n(2616),n(3601),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.ScaleAnswer=void 0,n(5010),n(6163),n(369);var a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(l,e);var t,n,a,c,s=(a=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=o(a);if(c){var n=o(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(e){var t,n=e.questionId,r=e.skipped,i=e.key,o=e.questionText,a=e.category,c=e.rating,u=e.scalePoints;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=s.call(this,{questionId:n,skipped:r,key:i,questionText:o,category:a}this._rating,scalePoints:this._scalePoints,skipped:this._skipped}}},{key:"rating",get:function(){return this._rating},set:function(e){this._rating=e}},{key:"scalePoints",get:function(){return this._scalePoints}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(n(1158).Answer);t.ScaleAnswer=a},3518:(e,t,n)=>{"use strict";function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n(2616),n(3601),n(782),n(1286),n(373),n(3130),n(4415),n(9832),n(6109),n(1827),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(6231),n(2900),s(n(3097));var o=s(n(9223)),a=s(n(7625)),c=s(n(7607));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=c.default.name,f=c.default.version,d={pre:{url:"https://tnt-soft-logger.trust-pre.schip.io/tnt/soft-logger/logs",token:"a4b85276-3bd6-4553-8a21-1bc5f07a1bae"},pro:{url:"https://tnt-soft-logger.trust-pro.schip.io/tnt/soft-logger/logs",token:"ef1b898c-75f6-45dc-8998-86a4c2ed3ac7"}},p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._api=void 0!==r&&"production"===String(r.env)?d.pro:de, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.default)().split(" ")),i=r[0],c=r[1],s={appName:null===(t=window)||void 0===t||null===(n=t.location)||void 0===n?void 0:n.hostname,sdkName:void 0===u?"NA":u,sdkVersion:void 0===f?"NA":f,sdkPlatform:"WEB",platformName:i,platformVersion:c},d={level:"ERROR",message:e.message,error:e.name,metadata:{}},p={method:"POST",headers:{Accept:"application/hal+json","content-type":"application/json","X-ADV-SDK-INFO":JSON.stringify(s),"X-API-KEY":this._api.token},body:JSON.stringify(d)};(0,a.default)(this._api.url,ess",e)})).catch((function(e){console.log("softlogger:failure",e)}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=p},5495:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(782),n(373),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.defathrow new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"append",value:function(e,t){if(e){var n="scc-tr-styling";if(t&&(n=t),null!=document.getElementById(n))return;var r=document.createElement("style");if(!r)throw new Error("Failed to create <style> element");if(r.id=n,r.textContent=e.toString(),!document.head)throw new Error("Failed to locate document.head");document.head.prepend(r)}}}],n&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=i},5668:(e,t,n)=>{"use strict";n(782),n(373),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(8935),n(6900),n(3130),n(568),n(4833),n(2008),n(9271),n(4168),n(4733),n(2616),n(3601);var r,i=(r=n(2620))&&r.__esModule?r:{default:r};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a="identity-widget",c="identity-widget-extended",s="reputation-widget",l="feedback-public-listing-widget",u="feedback-private-listing-widget",f="feedback-input-widget",d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.debug=t,this.texts=[new i.default({key:"reportReasonOffensive",widgets:[l],description:"Report reason in the report modal. Example: 'It’s offensive or sexually explicit'"}),new i.default({key:"reportReasonPersonalInfo",widgets:[l],description:"Report reason in the report modal. Example: 'It’s exposing personal information'"}),new i.default({key:"reportReasonMisleading",widgets:[l],description:"Report reason in the report modal. Example: 'It’s misleading or not true'"}),new i.default({key:"reportReasonOther",widgets:[l],description:"Report reason in the report modal. Example: 'Other'"}),new i.default({key:"avatarText",widgets:[a,c,u,l],description:"Text explaining the avatar picture uploaded by the user. Example: 'Profile picture for {name}'"}),new i.default({key:"avatarMissingText",widgets:[a,c,u,l],description:"Text explaining the the default avatar picture. Example: 'Profile picture is missing for {name}. Displaying a default avatar.'"}),new i.default({key:"verifiedIconTitle",widgets:[a,c,u,l],description:"The verified icon SVG title element"}),new i.default({key:"scoreHeading",widgets:[a,c],description:"Fallback heading if worded score is not enabled'"}),new i.default({key:"ratingScoreDescription",widgets:[a,c],description:"Can be pluralized. Example: 'Score based on {number, plural, [review,reviews]}'"}),new i.default({key:"memberSince",widgets:[a,c],description:"Example: 'Member since {year}'"}),new i.default({key:"screenReaderProfileHeading",widgets:[a,c],description:"Screen reader accessibility - Additional heading before the identity block"}),new i.default({key:"identityUsernameDefault",widgets:[a,c],description:"Text displayed instead of user name when user is not found"}),new i.default({key:"profileLinkTemplate",widgets:[a,l],description:"URL template (may be relative). Example: '/profile-page?id={userId}'"}),new i.default({key:"avatarTextWithName",widgets:[a,c],description:"Image alt text for profile avatar. I.e: 'Profile picture for {name}'"}),new i.default({key:"avatarMissingTextWithName",widgets:[a,c],description:"Image alt text for fallback profile avatar. I.e: 'Profile picture missing for {name}'"}),new i.default({key:"verifiedInfoLink",widgets:[c],description:"Static URL (may be relative)"}),new i.default({key:"scoreExpandButtonLabel",widgets:[s],description:"Aria label for expand/collapse button showing categorized scores"}),new i.default({key:"feedbackCategoryCommunication",widgets:[s],description:"Category heading in feedback bar score"}),new i.default({key:"feedbackCategoryProduct",widgets:[s],description:"Category heading in feedback bar score"}),new i.default({key:"feedbackCategoryTransaction",widgets:[s],description:"Category heading in feedback bar score"}),new i.default({key:"itemReputationNotFoundText",widgets:[s],description:"Text displayed instead of item-reputation widget when no feedback exists"}),new i.default({key:"feedbackCategoryPayment",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryCleanliness",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryAccuracy",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryConditions",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryLocation",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryRecommendation",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryAs_advertised",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryAliasCommunication",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryAliasTransaction",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryAliasPayment",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryAliasAs_advertised",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryAliasFallback",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryAdjectiveCommunication",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryAdjectiveTransaction",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryAdjectivePayment",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryAdjectiveAs_advertised",widgets:[s],description:"",optional:!0}),new i.default({key:"feedbackCategoryAdjectiveFallback",widgets:[s],description:"",optional:!0}),new i.default({key:"wordedScoreLevel1",widgets:[s],description:"",optional:!0}),new i.default({key:"wordedScoreLevel2",widgets:[s],description:"",optional:!0}),new i.default({key:"wordedScoreLevel3",widgets:[s],description:"",optional:!0}),new i.default({key:"wordedScoreLevel4",widgets:[s],description:"",optional:!0}),new i.default({key:"wordedScoreLevel5",widgets:[s],description:"",optional:!0}),new i.default({key:"screenReaderScoreLabel",widgets:[u,l],description:"Screen reader accessibility - Label to explain score"}),new i.default({key:"anonymizedUser",widgets:[u,l],description:"Used when the real name is not present, i.e. 'Anonymized user'"}),new i.default({key:"reviewTextEmpty",widgets:[u,l],description:"Text displayed when the user has not left any written feedback"}),new i.default({key:"noResultsText",widgets:[u,l],description:"Text displayed when the user has no reviews",optional:!0}),new i.default({key:"reviewRepliedLabel",widgets:[u,l],description:"Label feedback reply, i.e. '{name} replied with:'"}),new i.default({key:"reviewReadMore",widgets:[u,l],description:"Fallback text when there are no received or given feedback"}),new i.default({key:"toggleDisplayModeGiven",widgets:[u],description:"Label for toggle button"}),new i.default({key:"toggleDisplayModeReceived",widgets:[u],description:"Label for toggle button"}),new i.default({key:"toggleDisplayModeGroupLabel",widgets:[u],description:"ARIA label for toggle buttons"}),new i.default({key:"daysLeft",widgets:[u],description:"Dynamic text explaining how many days there are left for leaving a review"}),new i.default({key:"leaveReviewButtonLabel",widgets:[u],description:"Label for leaving a review button"}),new i.default({key:"unpublishedSuffixText",widgets:[u],description:"Text following the user name explaining that a review from this user is pending"}),new i.default({key:"unpublishedCallToActionText",widgets:[u],description:"Displayed when the counterpart has left a review, encouraging the current user to leave a review"}),new i.default({key:"pendingReviewSuffixText",widgets:[u],description:"Text following the user name explaining that the trade counterpart might still leave a review"}),new i.default({key:"feedbackInputLandingPageUrl",widgets:[u],description:"URL template (may be relative). Example: '/feedback-input?token={token}'"}),new i.default({key:"missingReviewText",widgets:[u],description:"Text displayed when the user has not left any review"}),new i.default({key:"reviewRoleSeller",widgets:[u],description:"Label used to described the role of the user in a trade (seller or buyer)"}),new i.default({key:"reviewRoleBuyer",widgets:[u],description:"Label used to described the role of the user in a trade (seller or buyer)"}),new i.default({key:"soldLabel",widgets:[u],description:"Sold label, i.e. 'Sold'\""}),new i.default({key:"boughtLabel",widgets:[u],description:"Bought label, i.e. 'Bought'"}),new i.default({key:"soldToPreposition",widgets:[u],description:"Label used after soldLabel, i.e. 'to'"}),new i.default({key:"boughtFromPreposition",widgets:[u],description:"Label used after soldLabel, i.e. 'to'"}),new i.default({key:"reviewYou",widgets:[u],description:"Used instead of real name of the logged in user in private feedback listing, i.e. 'You'"}),new i.default({key:"reportFeedbackIntro",widgets:[u],description:"Help text for users wanting to report a feedback"}),new i.default({key:"reportFeedbackHint",widgets:[u],description:"Report feedback textarea hint/placeholder"}),new i.default({key:"reviewReportButton",widgets:[u],description:"Report feedback open form button label"}),new i.default({key:"reportSendButtonButtonLabel",widgets:[u],description:"Report feedback send button label"}),new i.default({key:"replyCancelButton",widgets:[u],description:"Report feedback cancel button label"}),new i.default({key:"reportFeedbackPending",widgets:[u],description:"Status label for pending feedback report"}),new i.default({key:"reportFeedbackRejected",widgets:[u],description:"Status label for rejected feedback report"}),new i.default({key:"replyError",widgets:[u],description:"Error message presented to user when unexpected error occurred when attempting to report a feedback"}),new i.default({key:"reportFeedbackNotYouButtonLabel",widgets:[u],description:'Report "not you" button label'}),new i.default({key:"reportFeedbackNotYouDialogHeader",widgets:[u],description:'Report "not you" confirmation dialog header'}),new i.default({key:"reportFeedbackNotYouDialogContent",widgets:[u],description:'Report "not you" confirmation dialog content'}),new i.default({key:"reportFeedbackNotYouDialogConfirmButton",widgets:[u],description:'Report "not you" confirmation dialog confirm button label'}),new i.default({key:"reportFeedbackNotYouDialogCancelButton",widgets:[u],description:'Report "not you" confirmation dialog cancel button label'}),new i.default({key:"reportFeedbackNotYouDisputePending",widgets:[u],description:'Temporary text displayed when a "not you" dispute is being processed'}),new i.default({key:"replyInputTitle",widgets:[u],description:"Reply to feedback text area label"}),new i.default({key:"replySendButton",widgets:[u],description:"Reply to feedback send button label"}),new i.default({key:"reviewReplyButton",widgets:[u],description:"Reply to feedback open form button label"}),new i.default({key:"replyToFeedbackConfirmation",widgets:[u],description:"Reply to feedback confirmation message"}),new i.default({key:"replyToFeedbackError",widgets:[u],description:"Error message presented to user when unexpected error occurred when attempting to reply to a feedback"}),new i.default({key:"reviewShowMore",widgets:[l],description:"Text on the button that expands the review list to see all the reviews. The button is displayed when the number of review exceeds 'settings.maxReviewsToDisplay' (if set)",optional:!0}),new i.default({key:"showLessReviewsText",widgets:[l],description:"Text on the button that collapses the review list to see less reviews. The button is displayed when the number of review exceeds 'settings.maxReviewsToDisplay' (if set)",optional:!0}),new i.default({key:"privateListingEmptyText",widgets:[u],description:"Fallback text when there are no received or given feedback"}),new i.default({key:"ratingTitle",widgets:[f],description:"Main heading used throughout the input wizard"}),new i.default({key:"textReviewHeadingOptional",widgets:[f],description:"Label for text review input (if enabled)"}),new i.default({key:"textReviewHeading",widgets:[f],description:"Label for text review input (if enabled) when a bad rating is given"}),new i.default({key:"textReviewSubtitle",widgets:[f],description:"Subtitle text review input (if enabled)",optional:!0}),new i.default({key:"textReviewPlaceholderOptional",widgets:[f],description:"Text area placeholder text (if text review is enabled)"}),new i.default({key:"textReviewPlaceholder",widgets:[f],description:"Text area placeholder text (if text review is enabled) when a bad rating is given"}),new i.default({key:"textReviewSubText",widgets:[f],description:"Text to explain why the user should leave a review"}),new i.default({key:"textReviewSaveButton",widgets:[f],description:"Text review submit button text (if text review is enabled)"}),new i.default({key:"confirmSubmitTitle",widgets:[f],description:"End of wizard screen heading"}),new i.default({key:"confirmSubmitButton",widgets:[f],description:"End of wizard submit button text"}),new i.default({key:"ratingSubmittedTitle",widgets:[f],description:"Confirmation screen heading"}),new i.default({key:"confirmationErrorTitle",widgets:[f],description:"Confirmation error screen heading"}),new i.default({key:"confirmationMessage",widgets:[f],description:"Confirmation screen text"}),new i.default({key:"ratingSubmittedURL",widgets:[f],description:"Marketplace redirect URL"}),new i.default({key:"ratingSubmittedCloseButton",widgets:[f],description:"Confirmation screen exit button"}),new i.default({key:"secondaryRedirectURL",widgets:[f],description:"Confirmation screen secondary exit button URL and expired/closed screen button URL",optional:!0}),new i.default({key:"secondaryRedirectButton",widgets:[f],description:"Confirmation screen secondary exit button text and expired/closed screen button text",optional:!0}),new i.default({key:"ratingError",widgets:[f],description:"Error screen heading"}),new i.default({key:"ratingRetryButton",widgets:[f],description:"Error screen retry button"}),new i.default({key:"ratingAlreadySubmitted",widgets:[f],description:"No available feedback error screen heading"}),new i.default({key:"ratingExpired",widgets:[f],description:"Expired feedback error screen heading"}),new i.default({key:"ratingUnknownError",widgets:[f],description:"Error screen message when retry is not an option"}),new i.default({key:"backButtonLabel",widgets:[f],description:"Back button label"}),new i.default({key:"nextButtonLabel",widgets:[f],description:"Next button label"}),new i.default({key:"scalePointLabel1",widgets:[f],description:"Sad emoji Aria label"}),new i.default({key:"scalePointLabel2",widgets:[f],description:"Neutral emoji Aria label"}),new i.default({key:"scalePointLabel3",widgets:[f],description:"Happy emoji Aria label"}),new i.default({key:"scalePointLabel4",widgets:[f],description:"Excited emoji Aria label"}),new i.default({key:"progressStepLabel",widgets:[f],description:"Dynamic Aria label stating the current progress"})]}var t,n;return t=e,(n=[{key:"validateTexts",value:function(e,t){var n=this._textsForWidget(e).filter((function(e){return!Object.prototype.hasOwnProperty.call(t,e.key)}));if(n.length>0){if(this.debug&&n.length>0){var r=n.map((function(e){return"* ".concat(e.key," (optional: ").concat(e.isOptional.toString(),"). Help text: ").concat(e.description)})).join("\n");console.warn("".concat(e," is missing text translation for:\n").concat(r,". \n=> Inspect the DOM to see where it's being used."))}return!1}return!0}},{key:"reportUnsupported",value:function(e){if(this.debug){vaurn e.key})),n=Object.keys(e).filter((function(e){return t.indexOf(e)<0})).join(", ");n.length>0&&this.debug&&console.warn("You are providing text translations that are not supported by trust-web-sdk: ".concat(n))}}},{key:"_textsForWidget",value:funhis.texts.forEach((function(n){n.widgets.some((function(t){return t===e}))&&t.push(n)})),t}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=d},2620:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(782),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"_)}(this,e),this.key=n,this.widgets=r,this.de=[{key:"isOptional",get:function(){return!!this.optional&&this.optional}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=i},9223:(e,t,n)=>{"use strict";n(4791),n(9975),n(6109),e.exports=function(){if(window.navigator){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?"IE "+((e=/\brv[ :]+(\d+)/g.exec(t)||[])[1]||""):"Chrome"===n[1]&&null!=(e=t.match(/\b(OPR|Edge)\/(\d+)/))?e.slice(1).join(" ").replace("OPR","Opera"):(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),n.join(" "))}return"NoBrowser NoVersion"}},4211:(e,t,n)=>{"use strict";n(782),n(2008),n(8935),n(4506),n(4168),n(4059),n(2180),n(373),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(3130),n(8811),n(6900),n(2500),n(6231),n(2616),n(3601);var r=n(8963),i=(f(n(5426)),f(n(7502))),o=f(n(3097)),a=n(6005),c=(n(6454),f(n(1236)),f(n(21))),s=f(n(6097)),l=f(n(3518)),u=f(n(6957));function f(e){return e&&e.__esModule?e:{default:e}}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e,t,n){return(t=b(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===d(t)?t:String(t)}var v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._config=t,this._fetcher=new i.default(this._config),this._softlogger=new l.default}var t,n;return t=e,n=[{key:"getOpenFeedback",value:function(){var e=tem").then((function(t){return e._parseUri(t,{projection:"inlineState"})})).then((function(t){return e._fetcher.getRequestWithAbsolutePath(t)})).then((function(e){return e.text()})).then((function(e){var t,n})).catch((function(t){return e._softlogger.log(t),Promise.reject(t)}))}},{key:"answer",value:function(e){var t=e.answers,n=e.feedbackUri,r=e.textReview,i=e.isComplete,o=this._config.token||"",a={answers:t.map((function(e){return e.asJson()})),isComplete:Boolean(i)};return r&&(a.textReview=r),this._fetcher.post(n,a,o)}},{key:"dispute",value:function(e,t){var n=this;return this._fetcher.findLinkFromRoot("claims").then((function(e){return n._parseUri(e,{})})).then((function(r){return n._fetcher.post(r,{claim:"RULE_VIOLATION",comment:e},t)}))}},{key:"reportFeedback",value:function(e,t){var n=this;return this._fetcher.findLinkFromRoot("report-feedback").then((function(e){return n._parseUri(e,{})})).then((function(r){return n._fetcher.post(r,e,t)}))}},{key:"reportFeedbackReply",value:function(e,t){var n=this;return this._fetcher.findLinkFromRoot("report-feedback-reply").then((function(e){return n._parseUri(e,{})})).then((function(r){return n._fetcher.post(r,e,t)}))}},{key:"didNotBuy",value:function(e){var t=this;return this._fetcher.findLi{})})).then((function(n){return t._fetcher.post(n,{claim:"NO_TRADE"},e)}))}},{key:"reply",value:function(e,t){var n=this;return this._fetcher.findLinrn n._parseUri(e,{})})).then((function(r){return n._fetcher.post(r,e,t)}))}},{key:"getPublicFeedbackListing",value:function(e){if(null==e)throw new Error("userId is missing. Must be specified as settings.userId");return this._fetchPublicListing(e,"public-received-feedback")}},{key:"getItemFeedbackListing",value:function(e){if(null==e)throw new Error("itemId is missing. Must be specified as settings.itemId");return this._fetchPublicListing(e,"public-item-feedback")}},{key:"createTrade",value:function(e,dLinkFromRoot("trades-user").then((function(ect.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),t)}))}},{key:"getLeads",value:function(e,t,n){var r=this;return this._fetcher.findLinkFromRoot("leads").then((function(n){return r._parseUri(n,{sellerExternalId:e,itemExternalId:t})})).then((function(e){return r._fetcher._fetch(e,(function(e){return e.headers.Authorization="Bearer ".concat(n),e}))})).then((function(e){return e.json()})).catch((function(e){return e instanceof o.default&&404===e.httpStatusCode?Promise.resolve([]):(r._softlogger.log(e),Promise.reject(e))}))}},{key:"getTradeExists",value:function(e,t,n)function(n){return r._parseUri(n,{sellerExternalId:e,itemExternalId:t})})).then((function(e){return r._fetcher._fetch(e,(function(e){return e.headers.Authorization="Bearer ".concat(n),e}))})).then((function(e){return e.json()})).catch((function(e){return e instanceof o.default&&404===e.httpStatusCode?Promise.resolve([]):(r._softlogger.log(e),Promise.reject(e))}))}},{key:"_fetchPublicListing",valueer.findLunction(catedGeten((function(e){return e.map((function(e){return n._mapReviewItem(e)}))})).then((function(e){return e.sort((function(e,t){return null!=e.feedback&&null!=t.feedback?e.feedback.givenAtDefaultEmpty<t.feedback.givenAtDefaultEmpty?1:-1:0}))})).catch((function(e){return e instanceof o.default&&404===e.httpStatusCode?Promise.resolve([]):(n._softlogger.log(e),Promise.reject(e))}))}},{key:"_mapReviewItem",value:function(e){var t,n,r,i,o;return null!=e.feedback&&(null!==(n=e.feedback.badges)&&void 0!==n&&n.length&&(i=e.feedback.badges.map((function(e){return new s.default(e)}))),null!==.length&&(o=e.feedback.options.map((function(e){return new u.default(e)}))),t=new c.default(e.feedback.textReview||"",(0,a.calculateAndFormatScore)(e.feedback.score,this._config.locale),e.feedback.score,100*e.feedback.score,e.feedback.givenAt||"",e.feedback.reply||null,e.feedback.tradeId||null,e.feedback.feedbackId||null,e.feedback.ownerId||null,e.feedback.currentUserReportStatus||null,e.feedback.allowFeedbackReply||null,i||null,o||null)),{name:e.name,localProfileId:e.localProfileId,verified:e.verified,overallScore:(0,a.calculateAndFormatScore)(e.overallScore,this._config.locale,""),numberOfReceivedFeedbacks:e.numberOfReceivedFeedbacks,isSeller:"SELLER"===e.role,feedback:t,isCurrentUser:e.isCurrentUser||null,dispute:e.dispute,isGiven:e.hasGivenFeedback||null,avatarUrl:e.avatarUrl||null}}},{key:"_parseUri",value:function(e,t){return(0,r.parseTemplate)(e.href).expand(t||{})}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=v},2256:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(7025),n(5471),n(782),n(2616),n(3601),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(9975),n(9558),n(5010),n(6163),n(369),l(n(5426));var i=l(n(5755)),o=l(n(4292)),a=(n(6454),l(n(5338))),c=n(4367),s=n(1170);function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(p,e);var t,n,o,l,d=(o=p,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(o);if(l){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(t=d.call(this,e,"feedback-comment__submit")).config=s.state.config,t.rootElement=document.createElement("div"),t.rootElement.setAttribute("data-feedback-step","".concat(s.state.questions.length)),t.rootElement.setAttribute("data-feedback-step-comment",""),t.rootElement.setAttribute("aria-hidden","true"),t.rootElement.classList.add("feedback-step","feedback-step_text","feedback-comment","hidden"),t.render(),t.afterRender(),t}return t=p,(n=[{key:"element",get:function(){return this.rootElement}},{key:"render",value:function(){var e=this.config.textReviewSettings,t=document.createElement("div"),n=e.title||"",r=e.subtitle||"",i="";e&&e.helper&&(i=e.helper.replace("{{ character count }}","")),t.classList.add("feedback-comment__text","scc_tr-input-text"),t.innerHTML='            \n            <label class="feedback-comment__title" \n                    for="feedback-comment" \n                    aria-role="heading" \n                    aria-level="2">'.concat(n,'</label>\n            <div data-feedback-step-comment-subtitle\n                class="feedback-comment__subtitle">\n                ').concat(r,'\n            </div>\n            <textarea   id="feedback-comment" \n                        tabindex="-1" \n                        data-feedback-comment data-feedback-comment-hint="').concat(e.placeholder||"",'" \n                        data-feedback-comment-hint-mandatory="').concat(e.placeholder||"",'" \n                        placeholder="').concat(e.placeholder||"",'"></textarea>\n            \n            <div class="scc_tr-input-text__subtext-container">\n              <div data-element="text-input-counter" aria-live="polite" role="status" class="scc_tr-input-text__subtext"></div>\n              <div class="scc_tr-input-text__subtext" id="min-chars"></div>\n              <div class="scc_tr-input-text__subtext">').concat(i,"</div>\n            </div>\n        "),this.rootElement.appendChild(t),this.rootElement.appendChild(this.submitButtonElement)}},{key:"afterRender",value:function(){var e,t=this;this.disableSubmitButton();var n=this.config.textReviewSettings,r=this.rootElement.querySelector("[data-feedback-comment]");new i.default(r,this.config,null==n||null===(e=n.characterLimits)||void 0===e?void 0:e.max).enable(),this.rootElement.addEventListener("screen:active",(function(){t.checkForBadRating(r),t.rootElement.setAttribute("aria-hidden","false"),r.focus()}))}},{key:"checkForBadRating",value:function(e){var t=this,n=this.config.textReviewSettings;(0,c.isTextReviewMandatory)()?(e.setAttribute("placeholder",e.getAttribute("data-feedback-comment-hint-mandatory")||""),null!=e.value&&0!==e.value.trim().length||this.disableSubmitButton(),e.addEventListener("keyup",(function(){e.value.length>=n.characterLimits.min?t.enableSubmitButton():t.disableSubmitButton()}))):(e.setAttribute("placeholder",e.getAttribute("data-feedback-comment-hint")||""),this.enableSubmitButton())}},{key:"displayError",value:function(){a.default.isPresent()||this.rootElement.appendChild(new a.default(this.config).element)}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),p}(o.default);t.default=d},4181:(e,t,n)=>{"use strict";var r;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(782),n(1286),n(373),n(3130),n(4415),n(9832),n(1827),n(6109),n(6231),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(4168),n(2616),n(3601),(r=n(5426))&&r.__esModule;var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=t,this.rootElement=document.createElement("div"),this.rootElement.setAttribute("data-feedback-confirmation--animation",""),this.rootElement.classList.add("feedback-confirmation"),this.rootElement.classList.add("feedback-confirmation_visible"),this.render(),this.afterRender()}var t,n;return t=e,(n=[{key:"element",get:function(){return this.rootElement}},{key:"render",value:function(){this.rootElement.innerHTML='\n            <div class="feedback-confirmation__illustration"></div>\n            <header>\n                <h1 class="feedback-confirmation__title">'.concat(this.config.texts.ratingSubmittedTitle,'</h1>\n            </header>\n            <p class="feedback-confirmation__message">\n                ').concat(this.config.texts.confirmationMessage,"                \n            </p>\n            ").concat(this.config.isFeatureEnabled("exitButtons")?'            \n                <a data-tracking="primary-redirect-button" \n                    class="scc_tr-button--cta" \n                    href="'.concat(this.config.texts.ratingSubmittedURL,'">\n                        ').concat(this.config.texts.ratingSubmittedCloseButton,"                    \n                </a>           \n                ").concat(this.config.texts.secondaryRedirectURL&&!this.config.texts.ratingSubmittedCloseButton?'\n                    <a data-tracking="secondary-redirect-button" \n                        class="scc_tr-button--flat" \n                        href="'.concat(this.config.texts.secondaryRedirectURL,'">\n                            ').concat(this.config.texts.secondaryRedirectButton,"                        \n                    </a>\n                "):"","            \n            "):"","    \n        ")}},{key:"afterRender",value:function(){this._trackOnExit()}},{key:"_trackOnExit",value:function(){var e;[].concat((e=this.rootElement.querySelectorAll("[data-tracking]"),function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).forEach((function(e){e.addEventListener("click",(function(){var t=e.getAttribute("data-tracking");window.emitTrustEvent(e,"navigation:exit",{element:t})}))}))}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=a},7073:(e,t,n)=>{"use strict";n(782),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(2616),n(3601);var r,i=(r=n(3097))&&r.__esModule?r:{default:r};function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructorcall a class as a function")}(this,e),this.rootElement=t,this.options=n}var t,n;return t=e,(n=[{key:"render",value:function(e){this.rootElement.innerHTML='\n            <div data-feedback-container class="feedback">\n                <div class="feedback-error">\n                    <div class="'.concat(this.options.imageClass,'"></div>\n                    <div class="feedback-error__text">').concat(this.options.errorText,'</div>\n                    <div class="feedback-error__message">').concat(this.options.errorMessage||"","</div>\n                    ").concat(e instanceof i.default?this.traceIdTemplate(e):"","\n                    ").concat(this.options.buttonText?'\n                        <button type="submit" data-feedback-retry class="scc_tr-button--cta">'.concat(this.options.buttonText,"</button>\n                    "):"","\n                    ").concat(this.options.buttonLinkText&&this.options.buttonLinkUrl?'   \n                        <a class="scc_tr-button--cta" \n                           href="'.concat(this.options.buttonLinkUrl,'">\n                                ').concat(this.options.buttonLinkText,"                        \n                        </a>\n                    "):"","                                                                                    \n                    </div>\n                </div>\n"),this.afterRender()}},{key:"traceIdTemplate",value:function(e){return"".concat(e&&e.traceId?'\n                <div class="feedback-error__trace-id">\n                    <div>Reference number</div>\n                    <div>'.concat(e.traceId,"</div>\n                </div>\n            "):"")}},{key:"afterRender",value:function(){var e=this;if(this.options.buttonCallback){var t=this.rootElement.querySelector("[data-feedback-retry]");null!=t&&t.addEventListener("click",(function(){e.options.buttonCallback()}))}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=a},6248:(e,t,n)=>{"use strict";var r;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}n(782),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(2616),n(3601),(r=n(5426))&&r.__esModule;var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.features.feedbackInputHeader&&(this.config=t,this._rootElement=document.createElement("header"),this._rootElement.setAttribute("data-feedback-header",""),this._rootElement.classList.add("feedback-header"),this.render())}var t,n;return t=e,(n=[{key:"element",get:function(){return this._rootElement}},{key:"render",value:function(){this._rootElement.innerHTML='<h1 class="feedback-header__title">'.concat(this.config.texts.ratingTitle,"</h1>")}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=o},6376:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(5010),n(369),n(7025),n(5471),n(782),n(2616),n(3601),n(2008),n(8935),n(4506),n(4059),n(2180),n(373),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(6231),n(6163),n(4168),n(4128),n(3130),n(8811);var i=S(n(7024)),o=n(6454),a=n(6587),c=S(n(3097)),s=S(n(5426)),l=n(9470),u=S(n(4211)),f=S(n(7073)),d=S(n(874)),p=S(n(291)),h=S(n(3518)),b=S(n(5495)),v=S(n(6248)),m=S(n(1414)),y=S(n(8630)),g=S(n(4181)),k=S(n(2256)),w=S(n(6127)),_=n(1170),C=n(6467),x=n(4367),E=S(n(1623));function S(e){return e&&e.__esModule?e:{default:e}}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===r(t)?t:String(t)}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var j=E.default.name,P=E.default.version,R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(A,e);var t,n,p,E,S=(p=A,E=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(p);if(E){var n=T(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function A(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,A),(n=S.call(this))._style=e,n._defaultSettings=t,n._softlogger=new h.default,n}return t=A,(n=[{key:"run",value:function(e,t){var n=this;if(!e||null==t){var r=new Error("The widget did not get all the required input parameters. Check if all parameters are defined.");throw this._softlogger.log(r),r}t=D(D({},t),{},{SDK_NAME:j,SDK_VERSION:P});var o=s.default.initialize(t,this._defaultSettings);o.language.validate("feedback-input-widget"),this._repository=new u.default(o),this.trackingFacade=new w.default(o,e,new i.default(t.tracking)),this._detectFlexboxSupport(e),b.default.append(this._style,"scc-tr-feedback-input-style"),window.emitTrustEvent=this._dispatchEvent,this._repository.getOpenFeedback().then((function(r){if(n.initState({apiData:r,config:o,widgetElement:e,settings:t}),r.isReviewAlreadyAnswered)n.handleReviewAlreadyAnswered(e);else{if(n.commentSubmitScreen=n.createCommentSubmitScreen(),n.feedbackInputForm=n.createFeedbackInputForm(),n.feedbackNavigation=n.createFeedbackNavigation(),n.stepper=n.createStepper(),n.trackingFacade.applyApiData(r),"CLOSED"===r.trade.status){var i=new Error("Rating has expired");return n._softlogger.log(i),n.trackingFacade.tradeExpired(),void new f.default(e,{imageClass:"feedback-expired__illustration",errorText:o.texts.ratingExpired,buttonLinkText:o.texts.secondaryRedirectButton,buttonLinkUrl:o.texts.secondaryRedirectURL}).render()}try{n.buildDom()}catch(e){n._softlogger.log(e)}n.trackingFacade.listen(),n.trackingFacade.widgetLoaded()}})).catch((function(r){r instanceof c.default?new f.default(e,{imageClass:"feedback-error__illustration",errorText:o.texts.ratingUnknownError,errorMessage:o.texts.ratingErrorMessage}).render(r):new f.default(e,{imageClass:"feedback-error__illustration",errorText:o.texts.ratingError,buttonText:o.texts.:o.texts.ratingErrorMessage,buttonCallback:function(){return n.run(e,t)}}).render(r),n.trackingFacade.widgetShowError(r),t.onError(r),n._softlogger.log(r)}))}},{key:"createCommentSubmitScreen",value:function(){return new k.default(this._submitFeedbackForm.bind(this))}},{key:"createFeedbackInputForm",value:function(){return new y.default(this._submitFeedbackForm.bind(this))}},{key:"createFeedbackNaviga d.default}},{key:"createStepper",value:function(){return new m.default}},{key:"initState",value:function(e){var t,n=e.apiData,r=e.config,i=e.widgetElement,o=e.settings,a=n.answers||[],c=n.questions||[],s=o.answers||[];r.textReviewConfiguration=n.textReviewConfiguration,r.textReviewSettings=n.textReviewSettings,r.features=D(D({},r.features),{},{autoSave:null==n||null===(t=n.featureToggles)||void 0===t?void 0:t.autoSaverEnabled}),_.state.config=r,_.state.apiData=n,_.state.questions=(0,x.getValidQuestions)(c),_.state.answers=(0,x.syncAnswers)(a,s),_.state.element=i,console.log("state",_.state),console.log("state.answers",_.state.answersFromAPI),console.log("state.answers",_.state.answersFromSettings)}},{key:"handleReviewAlreadyAnswered",value:function(e){var t=_.state.config,n=new Error("Feedback already answered");this._softlogger.log(n),this.trackingFacade.feedbackAlreadyAnswered(),new f.default(e,{imageClass:"feedback-closed__illustration",errorText:t.texts.ratingAlreadySubmitted,errorMessage:t.texts.ratingAlreadySubmittedMessage,buttonLinkText:t.texts.secondaryRedirectButton,buttonLinkUrl:t.texts.secondaryRedirectURL}).render()}},{key:"buildDom",value:function(){var e=_.state.element,t=_.state.config,n=document.createElement("div");n.setAttribute("data-feedback-container",""),n.classList.add("feedback"),e.innerHTML="",e.appendChild(n),this.feedbackNavigation.element&&n.appendChild(this.feedbackNavigation.element);var r=new v.default(t);r.element&&n.appendChild(r.element),this.stepper.element&&n.appendChild(this.stepper.element),n.appendChild(this.feedbackInputForm.element),this.feedbackInputForm.applySubmitStep(this.commentSubmitScreen),this.applyAlreadyAnsweredQuestions(this.feedbackInputForm),this.addEventListeners(e,n)}},{key:"applyAlreadyAnsweredQuestions",value:function(e){var t=_.state.answers,n=_.state.questions;t.length>0&&(t.forEach((function(t){var r=n.findIndex((function(e){return e.key===t._key}));t instanceof o.ScaleAnswer&&r>=0&&e.updateSelectedScalePoint(r,t.rating),t instanceof a.MultiSelectAnswions)})),(0,C.deferredCallback)((function(){return e.goToStep(t.length)})))}},{key:"addEventListeners",value:function(e,t){var n=this,r=[],i=_.state.config;e.addEventListener("step:changed",(function(){var t=_.state.currentQuestionIndex;_.state.questions.length===t&&(0,x.shouldHideCommentStep)()&&(n.feedbackInputForm.hideStep(n.commentSubmitScreen.element),n.feedbackInputForm.submit(e)),r.push(t),n.feedbackNavigation.update(t,r),n.stepper.update(t)})),e.addEventListener("stepper:changed",(function(e){var t=e.detail;i.textReviewConfiguration===l.TEXT_REVIEW_CONF.ENABLED_MIN_SCORE&&t.completed||n.feedbackInputForm.update(t.step)})),e.addEventListener("navigation:changed",(function(e){var t=e.detail;i.textReviewConfiguration===l.TEXT_REVIEW_CONF.ENABLED_MIN_SCORE&&t.previous||n.feedbackInputForm.update(t.step)})),e.addEventListener("server:response:success",(function(){t.innerHTML="",t.appendChild(("server:response:error",(function(){n.feedbackInputForm.displayError()}))}},{key:"_submitFeedbackForm",value:function(e){var t=e.answers,n=e.comment,r=e.submitUrl,i=e.isComplete;return this._repository.answer({answers:t,feedbackUri:r,textReviewr t=e.json();return e.ok?t:t.then((function(e){return Promise.reject(e)}))}))}},{key:"_detectFlexboxSupport",value:function(e){var t=e.style;("flexWrap"in t||"WebkitFlexWrap"in t||"msFlexWrap"in t)&&e.classList.add("has_flex")}},{key:"_dispatchEvent",value:function(e,t,n){var r;"function"==typeof CustomEvent?r=new CustomEvent(t,{bubbles:!0,detail:n}):(r=document.createEvent("customevent")).initCustomEvent(t,!0,!1,n),e.dispatchEvent(r)}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),A}(p.default);t.default=R},8630:(e,t,n)=>{"use strict";n(782),n(3130),n(8811),n(373),n(4415),n(9832),n(469),n(5471),n(369),n(6231),n(5010),n(6109),n(1286),n(1827),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(6900),n(4168),n(4128),n(8935),n(4733),n(9271),n(2616),n(3601),l(n(5426));var r=n(9470),i=n(6454),o=n(6587),a=l(n(5338)),c=n(1170),s=n(4367);function l(e){return e&&e.__esModule?e:{default:e}}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(){p=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function l(e,t,n,i){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),c=new A(i||[]);return r(a,"_invoke",{value:C(e,n,c)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d={};function h(){}function b(){}function v(){}var m={};s(m,o,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(D([])));g&&g!==t&&n.call(g,o)&&(m=g);var k=v.prototype=h.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(r,o,a,c){var s=f(e[r],e,o);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==u(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,a,c)}),(function(e){i("throw",e,a,c)})):t.resolve(d).then((function(e){l.value=e,a(l)}),(function(e){return i("throw",e,a,c)}))}c(s.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function C(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var c=x(a,n);if(c){if(c===d)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=f(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=f(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function D(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return b.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:b,configurable:!0}),b.displayName=s(v,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,c,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},w(_.prototype),s(_.prototype,a,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new _(l(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(k),s(k,c,"Generator"),s(k,o,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=D,A.prototype={constructor:A,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:D(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function h(e,t,n,r,i,o,a){try{var c=e[o](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===u(i)?i:String(i)),r)}var i}var v=function(){function e(t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=c.state.config,this.questions=c.state.questions,this.data=c.state.apiData,this.feedbackUrl=null===(n=c.state.apiData._links)||void 0===n?void 0:n.self.href,this.submitCallback=t,this.rootElement=document.createElement("form"),this.rootElement.classList.add("feedback-form"),this.rootElement.setAttribute("data-feedback-url",this.feedbackUrl),this.stepsContainerElement=document.createElement("div"),this.stepsContainerElement.setAttribute("data-feedback-steps-container",""),this.stepsContainerElement.classList.add("feedback-steps"),this.rootElement.appendChild(this.stepsContainerElement),this.isInTransition=!1,this.render(),this.afterRender(),this(e){this.submitStep=e,this.stepsContainerElement.appendChild(e.element)}},{key:"displayError",value:function(){null!=this.submitStep?this.submitStep.displayError():a.default.isPresent()||this.rootElement.appendChild(new a.default(this.config).element)}},{key:"element",get:function(){return this.rootElement}},{key:"update",value:function(e){(this.isInTransition=!0,this.progress(e,(function(){t.isInTransition=!1})))}},{key:"progress",value:function(e,t){var n=this;this.selectedLabel=null;var r=this.getActiveStepElement(),i=this.getNextStepElement(e);if(null==r||null==i)throw new Error("Invalid state! No steps available.");c.state.currentQuestionIndex=e,r.addEventListener("transitionend",(function e(o){o.target===r&&(r.removeEventListener("transitionend",e),r.classList.add("hidden"),r.classList.remove("fade-in"),r.classList.remove("fade-out"),r.setAttribute("aria-hidden","true"),i&&(i.classList.remove("hidden"),i.classList.add("fade-in"),i.setAttribute("aria-hidden","false")),window.emitTrustEvent(i,"screen:active"),window.emitTrustEvent(n.rootElement,"step:changed",{step:c.state.currentQuestionIndex,completed:!0}),t&&t())})),r.classList.add("fade-out")}},{key:"submit",value:function(e){var t=this,n=c.state.answers,r=this.rootElement.closest("form"),i=n.length>=this.questions.length;if(null!=r){var o=r.getAttribute("data-feedback-url");if(null==o)throw new Error("form attribute 'data-feedback-url' is missing or null");this.submitCallback({answers:n,comment:"",submitUrl:o,isComplete:i}).then((function(){window.emitTrustEvent(e,"server:response:success",{answers:n,textReview:""})})).catch((function(n){window.emitTrustEvent(e,"server:response:error",{error:n}),t.config.onError(n)}))}}},{key:"getActiveStepElement",value:function(){var e=c.state.currentQuestionIndex;return this.rootElement.querySelector(' this.rootElement.quethis.renderBackButton(),this.renderNextButton(),this.renderSkipButton()}},{key:"createAnswerInput",value:function(e){var t=r.QUESTION_TYPE.SCALE,n=r.QUESTION_TYPE.MULTISELECT;switch(e.type){case t:return this.createScaleInput(e);case n:return this.createMultiSelectInput(e);default:return""}}},{key:"createScaleInput",value:function(e){var t=c.state.config.scalePoints;return'\n      <div class="feedback-step__scale-points-container">\n          <fieldset class="feedback-step__scale-points">\n              '.concat(t.map((function(t){return'<label data-feedback-step-scale-point="'.concat(t.number,'" class="feedback-step__scale-point">\n                      <div class="feedback-emoji feedback-step__scale-point--').concat(t.number,'">\n                      </div>\n                      <div data-feedback-scale-point__circle class="feedback-svg__circle"></div>\n                      <input type="radio" class="feedback-step__input" \n                          name="').concat(e._links.self.href,'" \n                          id="').concat(e._links.self.href,"-negative-").concat(t.number,'" \n                          data-question-id="').concat(e._links.self.href,'" \n                          value="').concat(t.number,'" \n                          aria-label="').concat(t.text,'">\n                  </label>\n              ')})).join(""),"\n          </fieldset>\n      </div>\n    ")}},{key:"createMultiSelectInput",value:function(e){var t=e.options,n=e.key;return'\n      <div class="feedback-step__multi-select-container">\n        <fieldset class="feedback-step__multi-select">\n          '.concat(t.map((function(t){return'\n                <label class="feedback-step__multi-select-option option-category-'.concat(t.category," option-id-").concat(t.id,'">\n                  <input type="checkbox" class="feedback-step__input" \n                      name="').concat(e._links.self.href,'" \n                      id="option-').concat(n,"-").concat(t.id,'"\n                      data-question-id="').concat(e._links.self.href,'"\n                      value="').concat(t.id,'" \n                      aria-label="').concat(t.title,'">\n                  <div\n                    id="option-title-').concat(n,"-").concat(t.id,'"\n                    class="feedback-step__multi-select-option-text">').concat(t.title,"</div>\n                </label>\n              ")})).join(""),"\n      </div>\n    ")}},{key:"renderSteps",value:function(){var e=this;this.stepsContainerElement.innerHTML="\n            ".concat(this.questions.map((function(t,n){return'\n                <div data-feedback-step="'.concat(n,'"\n                     data-feedback-step-question data-feedback-tracking-question-key="').concat(t.key,'"\n                     data-feedback-tracking-question-category="').concat(t.category,'"                     \n                     data-feedback-step-completed="false" class="feedback-step ').concat(0!==n?"hidden":"",'"\n                     aria-hidden="').concat(0!==n?"true":"false",'">                    \n                    \n                    <h2 data-feedback-step-question-title class="feedback-step__title">\n                        ').concat(t.question,"\n                    </h2>\n                    \n                    ").concat("SUBTITLE"===e.config.features.hintType&&t.questionHelpText?'<div class="feedback-step__embedded-tooltip">'.concat(t.questionHelpText,"</div>"):"","\n                    \n                    ").concat(e.createAnswerInput(t),"\n                    \x3c!-- single page submit --\x3e\n                </div>\n            ")})).join(""),"                                                                                          \n        ")}},{key:"renderNextButton",value:function(){var e=this,t=c.state.questions,n=c.state.config.features;t.forEach((function(t,i){var o=t.type===r.QUESTION_TYPE.MULTISELECT;if(!n.shouldAutoAdvance||o){var a=e.rootElement.querySelector(".fdbck-btn-cntnr-".concat(i));a||((a=document.createElement("div")).classList.add("feedback-button-container"),a.classList.add("fdbck-btn-cntnr-".concat(i)));var c=document.createElement("button");c.classList.add("scc_tr-button--cta"),c.setAttribute("data-feedback-next-button","".concat(i)),c.innerText=i+1===e.questions.length&&e.config.texts.ratingLastNextButton?e.config.texts.ratingLastNextButton:e.config.texts.ratingNextButton,c.addEventListener("click",(function(t){e.isInTransition=!0,t.preventDefault(),e.goToNextQuestion(),e.isInTransition=!1}),!1),a.appendChild(c),e.rootElement.querySelector('[data-feedback-step="'.concat(i,'"] > .fdbck-btn-cntnr-').concat(i))||e.rootElement.querySelector('[data-feedback-step="'.concat(i,'"]')).appendChild(a)}e.disableNextButton(i)}))}},{key:"renderBackButton",value:function(){var e=this,t=c.state.questions;c.state.config.features.backButton&&t.forEach((function(t,n){if(0!==n){var r=e.rootElement.querySelector(".fdbck-btn-cntnr-".concat(n));r||((r=document.createElement("div")).classList.add("feedback-button-container"),r.classList.add("fdbck-btn-cntnr-".concat(n)));var i=document.createElement("button");i.classList.add("scc_tr-button--cta"),i.classList.add("scc_tr-back-button"),i.setAttribute("data-feedback-back-button","".concat(n)),i.innerText=e.config.texts.ratingBackButton,i.addEventListener("click",(function(t){t.preventDefault(),window.emitTrustEvent(e.rootElement,"navigation:changed",{step:c.state.currentQuestionIndex-1,previous:!0})}),!1),r.appendChild(i),e.rootElement.querySelector('[data-feedback-step="'.concat(n,'"] > .fdbck-btn-cntnr-').concat(n))||e.rootElement.querySelector('[data-feedback-step="'.concat(n,'"]')).appendChild(r)}}))}},{key:"renderSkipButton",value:function(){var e=this;this.questions.forEach((function(t,n){if(t.skippable){var r=document.createElement("label");r.classList.add("scc_tr-button--flat--disabled"),r.setAttribute("data-feedback-skip-label","".concat(n)),r.innerText=e.config.texts.skipLabel,e.rootElement.querySelector(".fdbck-btn-cntnr-".concat(n)).appendChild(r)}}))}},{key:"setRatingForCurrentQuestion",value:function(e){var t=c.state.config,n=c.state.answers,r=(0,s.getCurrentQuestion)(),o=r.key,a=r.question,l=r.category,u=r._links;console.log("--------KEY----------".concat(o));var f=0===e,d=n.findIndex((function(e){return e._key===o}));if(d<0){var p,h=new i.ScaleAnswer({questionId:null==u||null===(p=u.self)||void 0===p?void 0:p.href,rating:e,scalePoints:t.numberOfScalePoints,skipped:f,key:o,questionText:a,category:l});n.push(h)}else n[d].rating=e}},{key:"setOptionsForCurrentQuestion",value:function(e){var t=c.state.config,n=c.state.answers,r=c.state.currentQuestionIndex,i=c.state.questions[r],a=i.key,s=i.question,l=i.category,u=i._links,f=0===e.length,d=n.findIndex((function(e){return e._key===a}));if(d<0){var p,h=new o.MultiSelectAnswer({questionId:null==u||null===(p=u.self)||void 0===p?void 0:p.href,options:e,scalePoints:t.numberOfScalePoints,skipped:f,key:a,questionText:s,category:l});n.push(h)}else n[d].options=e}},{key:"handleAutoSave",value:(l=p().mark((function e(){var t,n,r,i,o,a,l,u;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.state.answers,n=c.state.config,r=c.state.currentQuestionIndex,i=c.state.questions,o=this.feedbackUrl,a=i.length===r,l=!(0,s.shouldHideCommentStep)()&&a,u=t.length>0,!n.features.autoSave||!u||a&&!l){e.next=17;break}return e.prev=8,e.next=11,this.submitCallback({answers:t,comment:"",submitUrl:o,isComplete:!1});case 11:console.log("Feedback Input answers auto saved"),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(8),new Error("Error with Feedback Input auto save");case 17:case"end":return e.stop()}}),e,this,[[8,14]])})),u=function(){var e=this,t=arguments;return new Promise((function(n,r){var i=l.apply(e,t);function o(e){h(i,n,r,o,a,"next",e)}function a(e){h(i,n,r,o,a,"throw",e)}o(void 0)})ners(),this.addSkipEventListeners(),this.addMultiSelectEventListeners()}},{key:"addMultiSelectEventListeners",value:function(){var e=this;[].concat(f(this.stepsContainerElement.querySelectorAll(".feedback-step__multi-select"))).forEach((function(t){t.addEventListener("change",(function(n){var r=c.state.currentQuestionIndex;n.preventDefault();var i=e.getMultiSelectOptions(t);e.setOptionsForCurrentQuestion(i),i.length>0?e.enableNextButton(r):e.disableNextButton(r)}))}))}},{key:"getMult(e){reter((function(e){return e.checked})).map((function(e){return{id:e.value}}))}},{key:"addScalePointsEventListeners",value:function(){var e=this;[].concat(f(this.stepsContainerElement.querySelectorAll("[data-feedback-step-scale-point]"))).forEach((function(t,n){var r=t.querySelector("input");if(null==r)throw new Error("Internal error: \"label.querySelector('input')\" is null");var i=e.c()}:function(){var t=c.state.currentQuestionIndex;e.enableNextButton(t)},o=function(o){o.preventDefault();var a=c.state.config,s=n%a.numberOfScalePoints+1;e.selectedLabel=t,13!==o.keyCode&&o.keyCode||e.isInTransition||(e.setRatingForCurrentQuestion(s),e.animation(r,t,i))};r.addEventListener("mouseup",o),t.addEventListener("mouseup",o),t.addEventListener("keydown",o)}))}},{key:"addSkipEventListeners",value:function(){var e=this;[].concat(f(this.stepsContainerElement.querySelectorAll("[data-feedback-step]"))).forEach((function(t,n){var r=t.queryEventListener("mouseup",(function(){e.isInTransition||e.skipQuestion(n)})),r.addEventListener("keydown",(function(t){13===t.keyCode&&(e.isInTransition||e.skipQuestion(n),t.preventDefault())})))}))}},{key:"updateSelectedScalePoint",value:function(e,t){var n=this.stepsContainerElement.querySelector('[data-feedback-step="'.concat(e,'"]')),r=null==n?void 0:n.querySelector('[data-feedback-step-scale-point="'.concat(t,'"]'));r&&(this.selectedLabel=r,this.updateEmojiState(r)),t>0&&this.enableNextButton(e)}},{key:"updateSelectedOption",value:function(e,t){var n=this.stepsContainerElement.querySelector('[data-feedback-step="'.concat(e,'"] .feedback-step__ements)).forEach((function(e){t.some((function(t){return t.id===e.value}))&&(e.checkede){this.isInTransition=!0,this.resetQuestion(e),this.goToNextQuestion()}},{key:"resetQuestion",value:function(e){var t=c.state.questions[e];switch(this.disableNextButton(e),this.selectedLabel=null,t.type){case r.QUESTION_TYPE.SCALE:this.resetScaleQuestion(e);break;case r.QUESTION_TYPE.MULTISELECT:this.resetMultiSelectQuestion(e)}}},{key:"resetMultiSelectQuestion",value:function(e){this.setOptionsForCurrentQuestion([]),this.clearMultiSelectUI(e)}},{key:"clearMultiSelectUI",value:function(e){var t=this.stepsContainerElement.querySelector('[data-feedback-step="'.concat(e,select'));t&&[].concat(f(t.elements)ue:function(e){this.setRatingForCurrentQuestion(0),this.clearScaleUI(e)}},{key:"clearScaleUI",value:function(e){var t=this.stepsContainerElement.querySelector('[data-feedback-step="'.concat(e,'"] .feedback-step__scale-points'));t&&[].concat(f(t.querySelectorAll("[data-feedback-step-scale-point]"))).forEach((function(e){var t=e.querySelector(".feedback-emoji");if(t){t.classList.remove("feedback-emoji_active");var n=e.querySelector("input");null!=n&&null!=n.checked&&(n.checked=!1)}}))}},{key:"animation",value:function(e,t,n){this.config.features.shouldAutoAdvance&&(this.isInTransition=!0),this.updateEmojiState(e),this.animateAndApply(t,n)}},{key:"disableNextButton",value:function(e){var t=this.stepsContainerElement.querySelector('[data-feedback-next-button="'.concat(e,'"]'));t&&(t.setAttribute("disabled","disabled"),t.classList.add("scc_tr-button--disabled"))}},{key:"enableNextButton",value:function(e){var t=this.stepsContainerElement.querySelector('[data-feedback-next-button="'.concat(e,'"]'));t&&(t.removeAttribute("disabled"),t.classList.remove("scc_tr-button--disabled"))}},{key:"animateAndApply",value:function(e,t){var n=this.config.isFeatureEnabled("animationOnScalePointClick")?"feedback-svg__circle_animation":"feedback-svg__circle_no-animation",r=e.querySelector("[data-feedback-scale-point__circle]");if(r){var i=function(e){var t=e;"transform"!==t.propertyName&&"-webkit-transform"!==t.propertyName||(r.removeEventListener("transitionend",i),r.classList.remove(n))};r.addEventListener("transitionend",i),r.classList.add(n),t()}else t()}},{key:"goToNextQuestion",value:function(){var e=this,t=c.state.currentQuestionIndex,n="skipped",r=this.selectedLabel,i=this.stepsContainerElement;if(r){var o=i.querySelector('[data-feedback-step="'.concat(t,'"]')),a=r.querySelector("input");o&&(o.setAttribute("data-feedback-step-completed","true"),n=a.value)}var s=t+1;this.progress(s,(function(){window.emitTrustEvent(e.rootElement,"step:answered",{step:s,completed:!0,answer:{value:n,step:t}}),e.isInTransition=!1})),this.handleAutoSave()}},{key:"showStep",value:function(e){e.classList.removection(e){e.classList.add("hidden"),e.setAttribute("aria-hidden","true")}},{key:"goToStep",value:function(e){this.selectedLabel=null;var t=this.getActiveStepElement(),n=this.getNextStepElement(e);if(c.state.currentQuestionIndex=e,!t||!n)throw new Error("Invalid state! No steps available.");this.hideStep(t),this.showStep(n),window.emitTrustEvent(n,"screen:active"),window.emitTrustEvent(this.rootElement,"step:changed",{step:c.state.currentQuestionIndex,completed:!0})}},{key:"updateEmojiState",value:function(e){var t=this,n=e.closest("[data-feedback-step-scale-point]");if(n){var r=n.closest(".feedback-step__scale-points");if(r){var i=[].concat(f(r.querySelectorAll("[data-feedback-step-scale-point]"))),o=i.indexOf(n);i.forEach((function(e,n){var r=e.querySelector(".feedback-emoji");r&&(!t.config.isFeatureEnabled("scalePointsIndependent")&&n<=o||t.config.isFeatureEnabled("scalePointsIndependent")&&n===o?r.classList.add("feedback-emoji_active"):r.classList.remove("feedback-emoji_active"))}))}}}}],n&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=v},874:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(7025),n(5471),n(782),n(2616),n(3601),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(6699),n(5647),n(5010),n(6163),n(369),c(n(5426));var i=n(9470),o=c(n(291)),a=n(1170);function c(e){return e&&e.__esModule?e:{default:e}}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(f,e);var t,n,o,c,u=(o=f,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(o);if(c){var n=l(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(e=u.call(this)).config=a.state.config,e.numberOfSteps=a.state.questions.length,e.currentStepIndex=0,e.config.features.feedbackNavigation&&e.config.textReviewConfiguration!==i.TEXT_REVIEW_CONF.ENABLED_MIN_SCORE&&(e.rootElement=document.createElement("div"),e.rootElement.classList.add("feedback-navigation"),e.rootElement.setAttribute("data-element","feedback-navigation"),e.render(),e.afterRender()),e}return t=f,(n=[{key:"element",get:function(){return this.rootElement}},{key:"render",value:function(){this.previousButton=this.createButton("data-feedback-previous-step",this.config.texts.backButtonLabel,"feedback-header__control_back"),this.nextButton=this.createButton("data-feedback-next-step",this.config.texts.nextButtonLabel,"feedback-header__control_next"),this.rootElement.appendChild(this.previousButton),this.rootElement.appendChild(this.nextButton)}},{key:"createButton",value:function(e,t,n){var r=document.createElement("button");return r.setAttribute(e,""),r.setAttribute("disabled","disabled"),r.setAttribute("aria-label",t),r.classList.add("feedback-header__control"),r.classList.add(n),r.classList.add("feedback-svg"),r.classList.add("disabled"),r}},{key:"afterRender",value:function(){var e=this;this.previousButton.addEventListener("click",(function(){a.state.currentQuestionIndex-=1,window.emitTrustEvent(e.rootElement,"navigation:changed",{step:e.currentStepIndex-1,previous:!0})})),this.nextButton.addEventListener("click",(function(){a.state.currentQuestionIndex+=1,window.emitTrustEvent(e.rootElement,"navigation:changed",{step:e.currentStepIndex+1})}))}},{key:"update",value:function(e,t){null!=this.rootElement&&(this._hideOrShowPreviousStepButton(e),this._hideOrShowNextStepButton(e,t),this.currentStepIndex=e)}},{key:"_hideOrShowPreviousStepButton",value:function(e){0===e?(this.previousButton.style.opacity="0",this.previousButton.setAttribute("disabled","disabled")):(this.previousButton.style.opacity="1",this.previousButton.removeAttribute("disabled"))}},{key:"_hideOrShowNextStepButton",value:function(e,t){t.includes(e+1)?(this.nextButton.classList.remove("disabled"),this.nextButton.removeAttribute("disabled")):(this.nextButton.classList.add("disabled"),this.nextButton.setAttribute("disabled","disabled")),e===this.numberOfSteps?this.nextButton.style.opacity="0":this.nextButton.style.opacity="1"}}])&&function(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,(o=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!==r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(o.default);t.default=u},4292:(e,t,n)=>{"use strict";n(782),n(3130),n(8811),n(373),n(4415),n(9832),n(469),n(5471),n(369),n(4168),n(6231),n(5010),n(6109),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(2616),n(3601),(r=n(5426))&&r.__esModule,n(6454);var r,i=n(1170);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symblue}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,i)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}var l=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=i.state.config,this.questions=i.state.questions,this.submitCallback=t,this.submitButtonElement=document.createElement("input"),this.submitButtonElement.setAttribute("type","submit"),this.submitButtonElement.setAttribute("formmethod","post"),this.submitButtonElement.setAttribute("value","".concat(this.config.texts.confirmSubmitButton)),this.submitButtonElement.setAttribute("data-feedback-submit",""),this.submitButtonElement.classList.add("scc_tr-button--cta"),n&&this.submitButtonEleent.addEventListener("click",(function(e){e.preventDefault(),r.submit()}),!1)}var t,n,r,o;return t=e,n=[{key:"submitButton",get:function(){return this.submitButtonElement}},{key:"submit",value:(r=a().mark((function e(){var t,n,r,o,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.state.answers,this.disableSubmitButton(),n=this.submitButtonElement.closest("form"),r=t.length>=this.questions.length,null!=n){e.next=6;break}return e.abrupt("return");case 6:if(o=this.parseComment(n),null!=(c=n.getAttribute("data-feedback-url"))){e.next=10;break}throw new Error("form attribute 'data-feedback-url' is missing or null");case 10:return window.emitTrustEvent(this.submitButton,"form:submitted",{textReview:o}),e.prev=11,e.next=14,this.submitCallback({answers:t,comment:o,submitUrl:c,isComplete:r});case 14:window.emitTrustEvent(this.submitButton,"server:response:success",{answers:t,textReview:o}),e.next=22;break;case 17:e.prev=17,e.t0=e.catch(11),window.emitTrustEvent(this.submitButton,"server:response:error",{error:e.t0}),this.enableSubmitButton(),this.config.o,a,s,"throw",e)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"parseComment",value:function(e){var t=e.querySelector("textarea[data-feedback-comment]");return null!=t&&t instanceof HTMLTextAreaElement&&null!=t.value&&t.value.length>0?t.value:""}},{key:"enableSubmitButton",value:function(){this.submitButton.disabled=!1,this.submitButton.classL.disabled=!0,this.submitButton.classList.add("scc_tr-button--disabled")}}],n&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=l},4367:(e,t,n)=>{"use strict";n(782),Object.defineProperty(t,"__esModule",{value:!0}),t.syncAnswers=t.shouldHideCommentStep=t.isTextReviewMandatory=t.isEveryQuestionAboveThreshold=t.getValidQuestions=t.getCurrentQuestion=t.createScaleAnswer=t.createMultiSelectAnswer=t.containsBadRating=void 0,n(9078),n(8935),n(2008),n(9271),n(4733),n(4168);var r=n(1170),i=n(6454),o=n(6587),a=(n(1158),n(9470)),c=function(){var e=r.state.config,t=e.textReviewSs;return r.state.answers.filter((function(e){return e instanceof Object})).every((function(e){return e.rating/n>=t}))};t.isEveryQuestionAboveThreshold=c,t.getValidQQUESTION_TYPE);return e.filter((function(e){return t.indexOf(e.type)>-1}))},t.shouldHideCommentStep=function(){var e=!1;switch(r.state.config.textReviewConfiguration){case a.TEXT_REVIEW_CONF.ENABLED_MIN_SCORE:c()||(e=!0);break;case a.TEXT_REVIEW_CONF.DISABLED:e=!0}return e};var s=function(){var e=r.state.config,t=e.textReviewSn r.state.answers.filter((function(e){return e instanceof i.ScaleAnswer})).some((function(e){return e.rating/n<=t}))};t.containsBadRating=s,t.isTextReviewMandatory=function(){var e=r.state.config.textReviewConfiguration,t=e===a.TEXT_REVIEW_CONF.ENABLED_MANDATORY_THRESHOLD&&s();return e===a.TEXT_REVIEW_CONF.ENABLED_MANDATORY||t};var l=function(e){var t,n=e.questionData,o=e.answerData,a=r.state.config.numberOfScalePoints,c=o.scaleRating,s=o.skipped,l=n.key,u=n.question,f=n.category,d=n._links,p=Math.round(c*a);return new i.ScaleAnswer({questionId:null==d||null===(t=d.self)||void 0===t?void 0:t.href,rating:p,scalePoints:a,skipped:s,key:l,questionText:u,category:f})};t.createScaleAnswer=l;var u=function(e){var t,n=e.questionData,r=e.answerData,i=r.options,a=r.skipped,c=n.key,s=n.question,l=n.category,u=n._links;return new o.MultiSelectAnswer({questionId:null==u||null===(t=u.self)||void 0===t?void 0:t.href,options:i,skippenction(e,t){return e.filter((function(e){return e.questionKey===t}))[0]};t.syncAnswers=function(e,t){var n=r.state.questions,i=[];return n.forEach((function(n){var r=f(t,n.key)||f(e,n.key);if(r){var o=function(e){var t=e.questionData,n=e.answerData;switch(t.type){case a.QUESTION_TYPE.SCALE:return l({questionData:t,answerData:n});case a.QUESTION_TYPE.MULTISELECT:return u({questionData:t,answerData:n});default:return null}}({questionData:n,answerData:r});o&&i.push(o)}})),i},t.getCurrentQuestion=function(){var e=r.state.currentQuestionIndex;return r.state.questions[e]}},1170:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Objperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(782),n(8935),n(4506),n(4059),n(2180),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.state=void 0,n(4168),n(2008),n(2616),n(3601);var c={currentQuestionIndex:0,answers:[],questions:[],apiData:{},config:{},c),{},{reset:function(){Object.keys(c).forEach((function(e){s[e]=c[e]}))}});t.state=s},1414:(e,t,n)=>{"use strict";n(782),n(1286),n(373),n(3130),n(4415),n(9832),n(1827),n(6109),n(6231),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(6900),n(4168),n(8935),n(9271),n(7307),n(2500),n(2244),n(2616),n(3601),a(n(5426));var r=n(9470),i=a(n(7929)),o=n(1170);function a(e){return e&&e.__esModule?e:{default:e}}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbth)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.config=o.state.config,this.isTextReviewEnabled=o.state.config.textReviewConfiguration!==r.TEXT_REVIEW_CONF.DISABLED||this.config.isFeatureEnabled("submitScreeen"),this.stepsQty=this.isTextReviewEnabled?o.state.questions.length+1:o.state.questions.length,this.config.features.stepper&&(this.messageFormatter=new i.default(o.state.config.texts,o.state.config.debug),this.questions=o.state.questions,this.stepperState={0:!1},this.rootElement=document.createElement("div"),this.rootElement.classList.add("feedback-stepper"),this.rootElement.classList.add("feedback-stepper_bubbles"),this.render(0,this.isTextRevt,n;return t=e,n=[{key:"element",get:function(){return this.rootElement}},{key:"render",value:function(e,t){var n=this,i=this.config.textReviewConfiguration!==r.TEXT_REVIEW_CONF.ENABLED_MIN_SCORE;this.rootElement.innerHTML='                                       \n                <ul data-feedback-stepper role="img" tabindex="-1" aria-label="'.concat(this.stepperProgressLabel(e),'">\n                    ').concat(this.questions.map((function(t,r){var o=!0===n.stepperState[r]&&i;return'<li data-feedback-stepper-step="'.concat(r+1,'"\n                             data-feedback-stepper-step-index="').concat(r,'" \n                             class="feedback-stepper__step ').concat(r===e?"feedback-stepper__step_active":""," ").concat(o?"feedback-stepper__step_complete":"",'"\n                             style="width: ').concat(n.calculateStepWidth(),'%"\n                         ></li>')})).join("\n"),"\n                    \x3c!-- One step for feedback comment with submit / or only submit --\x3e\n                    ").concat(t?'<li data-feedback-stepper-step="'.concat(this.questions.length+1,'"\n                        data-feedback-stepper-step-index="').concat(this.questions.length,'" \n                        class="feedback-stepper__step ').concat(e===this.questions.length?"feedback-stepper__step_active":"",'"\n                        style="width: ').concat(this.calculateStepWidth(),'%"\n                    ></li>'):"","\n           )}},{key:"calculateStepWidth",value:function(){return 100/this.stepsQty}},{key:"update",value:function(e){if(null!=this.rootElement){for(var t=0;t<e;t++)this.stepperState[t]=!0;this.render(e,this.isTextReviewEnabled),this.afterRender()}}},{key:"afterRender",value:function(){var e,t,n=this;if(null!=this.rootElement){null===(e=this.rootElement.querySel||e.focus();var r=[].concat(function(e){if(Array.isArray(e))return s(el&&n===ne iterable, non-array objects must have a [Symbol.iterator]() method.")}());r.filter((function(e){return!0===n.isClickable(e.getAttribute("data-feedback-stepper-step-index"))})).forEach((function(e){e.addEventListener("click",(function(){var t=r.indexOf(e);window.emitTrustEvent(n.rootElement,"stepper:changed",{step:t,completed:!0})}))}))}}},{key:"isClickable",==Object.entries(this.stepperState).filter((function(e){return!0===e[1]})).length)return!1;var n=Object.getOwnPropertyNames(this.stepperState).sort(),r=parseInt(n[n.length-1]);if(null!=r){var i=r+1;t=parseInt(e)<=i}else t=!1;return t}},{key:"stepperProgressLabel",value:function(e){return this.messageFormatter.formatMessage("progressStepLabel",{current:e+1,total:this.stepsQty})}}],n&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===c(i)?i:String(i)),r)}var i}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=l},5338:(e,t,n)=>{"use strict";var r;function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbvalue.")}return String(e)}(r.key),"symbol"===i(o)?o:String(o)),r)}var o}n(782),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.dw TypeError("Cannot call a class as a functionction(){return null!=document.querySelector("[data-toast-placeholder]")}}],(n=[{key:"element",get:function(){var e=document.createElement("div");return e.setAttribute("data-toast-placeholder",""),e.classList.add("feedback-toast"),e.style.display="block",e.innerHTML='                            \n            <div data-toast-error class="feedback-toast__text">\n                '.concat(this.config.texts.confirmationErrorTitle,"\n            </div>            \n        "),e}}])&&o(t.prototype,n),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=a},5755:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n(7025),n(5471),n(782),n(2616),n(3601),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(5010),n(6163),n.bind():function(e){return eable:!0}}),Object.definePralt been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=s.call(this)).textAreaElement=e,r.config=t,r.maxCharacters=n,r.parentElement=r._assertPresent(r.textAreaElement.parentElement),r.counterElement=r.parentElement.querySelector('[data-element="text-input-counter"]'),r}return t=l,(n=[{key:"enable",value:function(e,t){var n=this;this.textAreaElement.setAttribute("maxlength","".cotextAreaElement.addEventListener("keyup",(function(){return n._update()})),this.aboveMaxCharsCallback=e,this.belowMaxCharsCallback=t,this._update()}},{key:"_update",value:function(){this.updateCounter()>=this.maxCharacters?this._highlightError():this._downplayError()}},{key:"updateCounter",value:function(){var e=this.textAreaElement.value.length;return this.counterElement.innerHTML="".concat(e),e}},{key:"_highlightError",value:function(){null==this.aboveMaxCharsCallback?this.parentElement.classList.add("scc_tr-input-error"):this.aboveMaxCharsCallback(),this.counterElement.setAttribute("aria-live","assertive"),this.counterElement.setAttribute("role","alert")}},{key:"_downplayError",value:function(){null==this.belowMaxCharsCallback?this.parentElement.classList.remove("scc_tr-input-error"):this.belowMaxCharsCallback(),this.counterElement.removvalue.")}return String(e)}(i.key),"symbol"===r(o)?o:String(o)),i)}var o}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),l}(i.default);t.default=s},7024:(e,t,n)=>{"use strict";n(782),n(2008),n(8935),n(4506),n(4168),n(4059),n(2180),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(6699),n(5647),n(2616),n(3601);var r=n(4367),i=n(1170),o=n(9470);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}var f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.var t,n;return t=e,(n=[{key:"metaData",set:function(e){this._metaData=e}},{key:"meta",get:function(){return s(s({},this._metaData),{},{totalNumberOfQuestions:this.getTotalNumberOfQuestions()})}},{key:"getTotalNumberOfQuestions",value:function(){var e=i.state.config.textReviewConfiguration,t=i.state.questions,n=i.state.currentQuestionIndex,a=[o.TEXT_REVIEW_CONF.ENABLED_MANDATORY,o.TEXT_REVIEW_CONF.ENABLED_MANDATORY_THRESHOLD,o.TEXT_REVIEW_CONF.ENABLED_OPTIONAL],c=t.length===n&&!(0,r.shouldHideCommentStep)();return a.includes(e)||c?t.length+1:t.length}},{key:"widgetShow",value:function(){this._track.widgetShow&&this._track.widgetShow(this.meta)}},{key:"widgetShowError",value:function(e){this._track.widgetShowError&&this._ts._track.feedbackAlreadyAnswered&&this._track.feedbackAlreadyAnswered()}},{key:"previousStepClick",value:function(e){this._track.previousStepClick&&this._track.previousStepClick(this.meta,e)}},{key:"nextStepClick",value:function(e){this._track.nextStepClick&&this._track.nextStepClick(this.meta,e)}},{key:"stepperClick",value:function(e,t){this._track.stepperClick&&this._track.stepperClick(this.meta,e,t)}},{key:"scalePointClick",value:function(e,t,n,r){this._track.scalePointClick&&this._track.scalePointClick(this.meta,e,t,n,r)}},{key:"showStep",value:function(e,t,n){this._track.showStep&&this._track.showStep(this.meta,e,t,n)}},{key:"hasTypedTextReview",value:function(e){this._track.hasTypedTextReview&&this._track.hasTypedTextReview(this.meta,e)}},{key:"confirmSubmitClick",value:function(){this._track.confirmSubmitClick&&this._trackmSubmitSuccesReceipt&&this._track.confirmSubmitSuccesReceipt(this.meta)}},{key:"confirmSubmitErrorReceipt",value:function(e){this._track.confirmSubmitErrorReceipt&&this._track.confirmSubmitErrorReceipt(this.meta,e)}},{key:"exit",value:function(e){this._traon(ele=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=f},5101:(e,t,n)=>{"use strict";n(782),n(2008),n(8935),n(4506),n(4168),n(4059),n(2180),n(373),n(3130),n(4415),n(9832),Object.defineProperty(t,"__esModulve value.")}return String(e)}(e);return"symbol"===o(t)?t:String(t)}i(n(7024)),n(6454);var u=function(){function e(t){var n=t.pulse,r=t.providerId,i=t.feedbackId,o=t.item instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._pulse=n,this._schemaTrackerEvent="http://schema.schibsted.com/events/tracker-event.json/126.json#",this._schemaEngagementEvent="http://schema.schibsted.com/events/engagement-event.json/148.json#",this._processId=null!=r?"sdrn:".concat(r,":feedback:").concat(i):null,this._itemId=o,this._providerId=r||"",this._tradeRole=c,this._scalePoints=s,this._feedbackId=i,this._externalUserId=a,this._trackingForSite=l}var t,n;return t=e,(n=[{key:"_track",value:function(e){if(null!=this._pulse&&""!==this._providerId)try{this._pulse("track","trackerEvent",c(c({},e),{},{provider:{component:"trust",productType:"ResponsiveWeb"}}))}catch(e){this._trackingForSite.pulseTrackingError(e)}}},{key:"viewQuestionStep",value:function(e,t){this._track({schema:this._schemaTrackerEvent,object:{type:"Form",name:"Trust Form ".concat(e),processId:this._processId,stepNumber:t,id:"sdrn:".concat(this._providerId,":form:trust_form_view_").concat(e)},target:{id:this._externalUserId,type:"Account"},intent:"Rate",type:"View"})}},{key:"viewCommentStep",value:function(){this._track({schema:this._schemaTrackerEvent,object:{type:"Form",name:"Trust Form ".concat(this._feedbackId),processId:this._processId,id:"sdrn:".concat(this._providerId,":form:trust_form_view_").concat(this._feedbackId)},target:{id:this._externalUserId,type:"Account"},intent:"Rate",type:"View"})}},{key:"answerQuestion",value:function(e,t,n,r,i){this._track({schema:this._schemaEngagementEvent,object:{type:"UIElement",name:"Trust Form ".concat(e),processId:this._processId,id:"sdrn:".concat(this._providerId,":content:trust_form_rate:element:").concat(e)},target:{type:"Rating",relatedTo:{id:"sdrn:".concat(this._providerId,":classified:").concat(this._itemId),type:"ClassifiedAd"},ratingResult:[{result:t,aspect:r,id:"sdrn:".concat(this._providerId,":rating:").concat(e),stepNumber:n,question:i,scalePoints:this._scalePoints,type:"RatingResult"}],ratingType:"SellerToBuyer",id:"sdrn:".concat(this._providerId,":rating:").concat(this._feedbackId)},intent:"Rate",type:"Engagement"})}},{key:"answerTextReview",value:function(e,t){this._track({schema:this._schemaEngagementEvent,action:"Click",object:{type:"UIElement",name:"Trust Form ".concat(this._feedbackId),processId:this._processId,id:"sdrn:".concat(this._providerId,":content:trust_form_rate:element:").concat(this._feedbackId)},target:{type:"Rating",relatedTo:{id:"sdrn:".concat(this._providerId,":classified:").concat(this._itemId),type:"ClassifiedAd"},ratingResult:[{aspect:"TEXT",stepNumber:e,question:t,type:"RatingResult",id:"sdrn:".concat(this._providerId,":rating:").concat(this._feedbackId)}],ratingType:"SellerToBuyer",id:"sdrn:".concat(this._providerId,":rating:").concat(this._feedbackId)},intent:"Rate",type:"Engagement"})}},{key:"clickSubmit",value:function(){this._track({schema:this._schemaTrackerEvent,object:{type:"Form",name:"Trust Form Send Form",processId:this._processId,id:"sdrn:".concat(this._providerId,":form:trust_form_send_form")},target:{id:this._externalUserId,type:"Account"},intent:"Rate",type:"View"})}},{key:"submittedSuccessfully",value:function(e,t){var n=this,r=e.map((function(e,t){return{result:e.rating,aspect:e.category,id:"sdrn:".concat(n._providerId,":rating:").concat(e.key),stepNumber:t+1,question:e.questionText,scalePoints:n._scalePoints,type:"RatingResult"}}));if(t){var i={result:t,aspect:"TEXT",id:"sdrn:".concat(this._providerId,":rating:").concat(this._feedbackId),stepNumber:e.length+1,question:"N/A",type:"RatingResult"};r.push(i)}this._track({schema:this._schemaTrackerEvent,object:{ratingResult:r,relatedTo:{id:"sdrn:".concat(this._providerId,":classified:").concat(this._itemId),type:"ClassifiedAd"},processId:this._processId,ratingType:"SellerToBuyer",type:"Rating",id:"sdrn:".concat(this._providerId,":rating:").concat(this._feedbackId)},target:{id:this._externalUserId,type:"Account"},type:"Rate"})}},{key:"validStepperClick",value:function(e){this._track({schema:this._schemaEngagementEvent,object:{type:"UIElement",validStep:!0,stepNumber:e,name:"Trust Form Click Breadcrumbs",processId:this._processId,id:"sdrn:".concat(this._providerId,":content:trust_form_click:element:breadcrumbs")},type:"Engagement"})}},{key:"invalidStepperClick",value:function(e){this._track({schema:this._schemaEngagementEvent,object:{type:"UIElement",validStep:!1,stepNumber:e,name:"Trust Form Click Breadcrumbs",processId:this._processId,id:"sdrn:".concat(this._providerId,":content:trust_form_click:element:breadcrumbs")},type:"Engagement"})}},{key:"backButtonClick",value:function(){this._track({schema:this._schemaEngagementEvent,object:{type:"UIElement",name:"Trust Form Click Back",processId:"sdrn:".concat(this._providerId,":feedback:").concat(this._feedbackId),id:"sdrn:".concat(this._providerId,":content:trust_form_click:element:back")},type:"Engagement"})}},{key:"nextButtonClick",value:function(){this._track({schema:this._schemaEngagementEvent,object:{type:"UIElement",name:"Trust Form Click Next",processId:"sdrn:".concat(this._providerId,":feedback:").concat(this._feedbackId),id:"sdrn:".concat(this._providerId,":content:trust_form_click:element:next")},type:"Engagement"})}},{key:"feedbackExpired",value:function(){var e="EXPIRED",t={description:"The feedback has expired",code:e},n=this._createErrorEventWith(t,e);this._track(n)}},{key:"error",value:function(e){e instanceof r.default?400===e.httpStatusCode?this._error400():500===e.httpStatusCode?this._error500():this._errorUnknown():"undefined"!=typeof navigator&&void 0!==navigator.onLine&&"offline"===navigator.onLine?this._errorNoInternet():this._errorUnknown()}},{key:"_errorNoInternet",value:function(){var e="NO_INTERNET",t={description:"Missing internet connection",code:e},n=this._createErrorEventWith(t,e);this._track(n)}},{key:"_error500",value:function(){var e=this._createErrorEventWith({description:"HTTP Internal Server Error",code:"500"},"500");this._track(e)}},{key:"_error400",value:function(){var e=this._createErrorEventWith({description:"HTTP Bad Request",code:"400"},"400");this._track(e)}},{key:"_errorUnknown",value:function(){var e="UNKNOWN",t={description:"Something wrong has happened",code:e},n=this._createErrorEventWith(t,e);this._track(n)}},{key:"_createErrorEventWith",value:function(e,t){var n="";return"seller"===this._tradeRole?n="Rate Buyer":"buyer"===this._tradeRole&&(n="Rate Seller"),{schema:this._schemaTrackerEvent,object:{processId:this._processId,action:n,cause:e,type:"Error",id:"sdrn:".concat(this._providerId,":error:trust_form_error_").concat(t)},target:{id:this._externalUserId,type:"Account"},intent:"Rate",type:"View"}}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=u},6127:(e,t,n)=>{"use strict";n(782),n(1286),n(373),n(3130),n(4415),n(9832),n(6109),n(6231),n(1827),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n(9558),n(2616),n(3601),i(n(7024));var r=i(n(5101));function i(e){return e&&e.__esModule?e:{default:e}}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var nnction")}(this,e),this.config=t,this.widgetElement=n,this.siteTracker=r}var t,n;return t=e,(n=[{key:"listen",value:function(){this._addEventListeners()}},{key:"widgetLoaded",value:function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,c=[],s=!0,l=!1;try{for(o=(n=n.call(e)).next,0;!(s=(r=o.call(n)).done)&&(c.push(r.value),1!==c.length);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,1);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,1):void 0}}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.apiData.questions)[0];this.siteTracker.widgetShow(),this.siteTracker.showStep(0,e.question,e.category),th"widgetShowError",value:function(e){this.siteTracker.widgetShowError(e)}},{key:"feedbackAlreadyAnswered",value:function(key:"tradeExpired",value:function(){this.pulseTracker.feedbackExpired()}},{key:"applyApiData",value:function(e){this.apiData=e,this.siteTracker.metaData={tradeRole:this.apiData.tradeRole,segmentExternalId:this.apiData.segmentExternalId},this.pulseTracker=this._setupPulseTracking()}},{key:"_addEventListeners",value:function(){var e=this;this.widgetElement.addEventListener("step:answered",(function(t){if(t.detail.answer){var n=t.detail.answer,r=e.apiData.questions[n.step];e.pulseTracker.answerQuestion(r.key,n.value,n.step,r.category,r.question),e.siteTracker.scalePointClick(t.detail.step,n.value,r.quesentListener("step:changed",(function(t){e._trackShowStep(t.detail.step)})),this.widgetElement.addEventListener("navigation:changed",(function(t){var n=t.detail.step;t.detail.previous?(e.siteTracker.previousStepClick(n),e.pulseTracker.backButtonClick()):(e.siteTracker.nextStepClick(n),e.pulseTracker.nextButtonClick()),e._trackShowStep(n)})),this.widgetElement.addEventListener("stepper:changed",(function(t){var n=t.detail.step;e.siteTracker.stepperClick(n,!0),e.pulseTracker.validStepperClick(n),e._trackShowStep(n)})),this.widgetElement.addEventListener("form:submitted",(function(t){var n=t.detail.textReview;if(null!=n&&n.trim().length>0&&e.siteTracker.hasTypedTextReview(n),e.apiData.textReviewEnabled){var r=e.apiData.questions.length;e.pulseTracker.answerTextReview(r,"N/A")}e.siteTracker.confirmSubmitClick(),e.pulseTracker.clickSubmit()})),this.widgetElement.addEventListener("server:response:success",(function(t){e.siteTracker.confirmSubmitSuccesReceipt(),e.pulseTracker.submittedSuccessfully(t.detail.answers,t.detail.texSubmitErrorReceipt(t.detail.error),e.pulseTracker.error(tner("navigation:exit",(function(t){e.siteTracker.exit(t.detail.element)}))}},{key:"_trackShowStep",value:function(e){var t=this.apiData.questions[e];this._isCommentStep(e)?(this.siteTracker.showStep(e,"N/A","N/A"),this.pulseTracker.viewCommentStep()):null!=t?(this.siteTracker.showStep(e,t.question,t.category),this.pulseTracker.viewQuestionStep(t.key,e)):this.siteTracker.showStep(e,"Summary page","N/A")}},{key:"_isCommentStep",value:function(e){return e===this.apiData.questions.length&&!0===this.apiData.textReviewEnabled}},{key:"_setupPulseTracking",value:function(){return new r.default({pulse:void 0===window.pulse?null:window.pulse,providerId:void 0!==window.pulse2opt&&void 0!==window.pulse2opt.clientId?window.pulse2opt.clientId:null,feedbackId:this.apiData.key,itemId:this.apiData.item.id,externalUserId:null!=this.apiData.author?this.apiData.author.externalUserId:null,tradeRole:this.apiData.tradeRole,scalePoints:this.config.numberOfScalePoints,trackingForSite:this.siteTracker})}}])&&function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(i=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===o(i)?i:String(i)),r)}var i}(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.default=c},6467:(e,t,n)=>{"use strict";n(782),Object.defineProperty(t,"__esModule",{value:!0}),t.deferredCallback=void 0,n(3130),n(8811),t.defe){"funct"funcprotoid 0!=funclse e 6:rype)|94:(elengtn:o?r>{var562:e482),retuion(eretur(i.crtypeO a,c=core./"[e!0}},ion(et+="idone;Math=e=>{vuncti}},91ject."funct[0],rablotypevar rrts=f=fun],n[1orts},g)f){ret{}ret.exporetur e[r]n fun.res)):r(ull!=eErr(e);f,s)tr(e)?f"protnctionceof.pushr r=ns||fu||Objth,l=a.own.expoconst{retu(1910e,c,(n(ee];o&on(e,6901)220)?t){vaeturn||a>5row T=Striexpor))[y]}},83(e+t,retur r(i({retuon"==ar t=oid 0portsymboymbolr"),o=n(3396);e.exports=n(3562).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},9078:(e,t,n)=>{"use strict";var r=n(1866),i=n(327)(4);r(r.P+r.F*!n(4358)([].every,!0),"Array",{every:function(e){return i(this,e,arguments[1])}})},8935:(e,t,n)=>{"use strict";var r=n(1866)(r.P+i=n(3se for.F*(a||!n(4358)(o)),"Array",{indexOf:function(e){return a?o.apply(t):i(0nts.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in t&&t[r]===e)return r||0;return-1}})},6900:(e,t,n)=>{"use strict";var r=nr i=ar=n(1sort=r[o],c=r.getTime;new Date(NaN)+""!=i&&n(1910)(r,o,(function(){var ee";a splith.proar r="Obj{defi{var  r=n(unction(e,t){return i(r(e),t)}}))},2244:(e,t,n)=>{n(9231)("getOwnPropertyNames",(function(){return n(7610).f}))},369:(e))}})eturng")]=rejecew(l.}})},se st){"us[funcflags97)(t=thi:e,do[1]=t.P,"Array",{includes:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n(3078)(nctio,t,nn(186,y=p[n  d;c++){var s=[].concat(e[c]);r&&i[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s2})/g).map(||"#"===e?r(t):i(t),n?i(n)+"="+t:t}function a(e){return null!=e}function c(e){return";"===e||"&"===e||"?"===e}function s(e){var t=["+","#",".","/",";","?","&"];return{expand:function(n){return e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,(function(e,s,l){if(s){var u=null,f=[];if(-1!==t.indexOf(s.charAt(0))&&(u=s.charAt(0),s=s.substr(1)),s.split(/,/g).forEach((function(e){var t=/([^:\*]*)(?::(\d+)|(\*))?/.exec(e);f.push.apply(f,function(e,t,n,r){var s=e[n],l=[];if(a(s)&&""!==s)if("string"==typeof s||"number"==typeof s||"boolean"==typeof s)s=s.toString(),r&&"*"!==r&&(o(t,s,c(t)?n:null));else iEach((function(e){l.push(o(t,e,c(t)?n:null))})):Object){a(s[e])&&l.push(o(t,s[e]on(e){u.push(o(t,e))})):Object.keys(s).forEach((function(e){a(s[e])&&(u.push(i(e)),u.push(o(t,s[e].toString())))})),c(t)?l.push(i(n)+"="+u.join(",")):0!==u.length&&l.push(u.join(","))}else";"===t?a(s)&&l.push(i(n)):""!==s||"&"!==t&&"?"!==t?""===s&&l.push(""):l.push(i(n)+"=");return l}(n,u,t[1],t[2]||t[3]))})),u&&"+"!==u){var d=",";return"?"===u?d="&":"#"!==u&&(d=u),(0!==f.length?u:"")+f.join(d)}return f.join(",")}return r(l)}))}}}n.r(t),n.d(t,{parseTemplate:()=>s})},7607:e=>{"use strict";e.exports=JSON.parse('{"name":"@trust/web-core","version":"1.6.1","license":"UNLICENSED","scripts":{"test":"jest --passWithNoTests","build":"webpack --mode production --config ./webpack.-core"i(t{}};(t,{o(e,g&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};(()=>{"use strict";var e=o;i(782),Object.defineProperty(e,"__esModule",{value:!0}),e.feedbackInput=void 0,i(3130),i(568),i(4833);var t=r(i(69)),n=r(i(3429));function r(e){return e&&e.__esModule?e:{default:e}}var a=new(r(i(6376)).default)(n.default.toString(),(0,t.default)());e.feedbackInput=a})();var a=t;for(var c in o)a[c]=o[c];o.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})()}}]);