"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[989],{37196:function(e,t,o){o.d(t,{q:function(){return sendEvent}});var n=o(5495);let getAnalyticsEventUrl=()=>"analytics/event",sendEventsBatch=(e,t)=>n.Mb.post(getAnalyticsEventUrl(),{json:e,headers:{...t?{"x-device-id":t}:{}}}),r={"/":"browse","/auth":"auth","/auth/sign-in":"auth","/auth/sign-in/success":"auth","/auth/sign-up":"auth","/auth/forgot-password":"auth","/404":"not_found","/browse":"browse","/about":"about","/anonymous/:audioid":"audio","/search":"search","/search/category/:categoryName":"search","/audacity/link":"link_to_audacity","/embed/audio/:audioid":"embed_audio","/embed/collection/:collectionId":"embed_collection","/profile":"profile","/:username":"user_audio","/:username/audio/:audioname":"audio","/:username/audio/:audioname/edit":"audio_edit","/:username/collections":"user_collections","/:username/collections/:collectionname":"collection","/:username/collections/:collectionname/edit":"collection_edit"},i="device-id",u=[],a=!1,l=!1,sendEvents=()=>{if(l)return;if(0===u.length){a=!1,l=!1;return}let e=u.splice(0,u.length);l=!0;let t=function(){let e;try{"undefined"!=typeof localStorage&&(e=localStorage.getItem(i))}catch(e){console.error("Failed to access localStorage:",e)}if(e)return JSON.parse(e);let t=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER);try{"undefined"!=typeof localStorage&&localStorage.setItem(i,JSON.stringify(t))}catch(e){console.error("Failed to set item in localStorage:",e)}return t}();sendEventsBatch(e,t).then(.catch(()=>{a=!1}).finally(};async function sendEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];{let t=window.location.pathname,o=function(e){let t=Object.keys(r);for(let o of t){let t=new RegExp("^".concat(o.replace(/:\w+/g,"([^/]+)"),"$")),n=e.match(t);if(n)return r[o]}return"not_supported_screen"}(t),n=);e.payload.screen=o,e.payload.url=t,e.payload.referrer=n}if(u.push(e),t){sendEvents();return}a||(a=!0,setTimeout(sendEvents,1e3))}},25702:function(e,t,o){o.d(t,{H:function(){return u}});var n=o(94660),r=o(74810);let i={activeAudioIndex:0,isPlaying:!1,playlist:{id:"",items:[],total:0,pages:0,page:0,url:""}},audioPlayerStoreSlice=e=>({...i,playAudio:(t,o)=>{e(()=>({activeAudioIndex:o||0,isPlaying:!0}))},setPlaylist:t=>e({playlist:t}),setIsPlaying:t=>e({isPlaying:t}),setActiveAudioIndex:),u=(0,n.Ue)()((0,r.mW)(function(){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return audioPlayerStoreSlice(...t)}))},79585:function(e,t,o){o.d(t,{QN:function(){return getCollectionAudios},VA:function(){return useAudioPeaks},UR:function(){return useAudios},Fl:function(){return usePullAudioByIds}});var n=o(20955),r=o(48395),i=o(42313),u=o(51525),a=o(5495),l=o(61076);let getUserAudios=e=>a.Mb.get(l.oL(),{signal:e,searchParams:{simple:"simple"}}).json(),getAuthorAudios=(e,t)=>a.Mb.get(l.p6(e),{signal:t,searchParams:{simple:"simple"}}).json();function useAudios(e){let{isEditor:t,username:o}=e,a=(0,i.aM)({queryKey:i.S8.authorAllAudios(o),queryFn:async e=>{let{signal:n}=e,r=t?await getUserAudios(n):await getAuthorAudios(o,n);return r.map(u.h)},staleTime:i.R.Long});return(0,n.useEffect)(()=>{a.error&&r.Y.error("GET author audio list error:",{error:a.error,username:o,isEditor:t})},[t,a.error,o]),a}var s=o(29858),c=o(19422),d=o(68463);let getAudioByIds=(e,t)=>a.Mb.get(l.LG(),{signal:t,searchParams:{id:e.join(",")}}).json();function usePullAudioByIds(e){let{toast:t}=(0,c.p)(),o=(0,i.aM)({queryKey:i.S8.audiosByIds(e),queryFn:async t=>{let{signal:o}=t,n=await getAudioByIds(e,o);return n.map(u.h)},enabled:e.length>0,refetchInterval:e=>{if(!e)return!1;let t=(0,d.T)(e).length>0;return!!t&&i.qs.Default}});return(0,n.useEffect)([o.data]),(0,n.useEffect)(()=>{o.error&&(r.Y.error("Pull audio by ids error ",{error:o.error,audioIds:e}),t({itemID:"pull-audio-by-ids-error",description:"Failed to update audio data",variant:"error"}))},[o.error]),o}let getAudioPeaks=(e,t)=>a.V6.get(e,{signal:t}).json();function useAudioPeaks(e){let{audioId:t,sourceId:o,peaksUrl:n,enabled:r}=e;return(0,i.aM)({queryKey:i.S8.audioPeaks(t,o),queryFn:staleTime:i.R.Long,enabled:r})}var f=o(26994);function getCollectionAudios(e){let{username:t,slug:o,page:n}=e;try{return a.Mb.get(f._j(t,o),{searchParams:{page:n}}).json()}catch(e){throw r.Y.error("Failed to get collection audios",{error:e}),e}}},68463:function(e,t,o){o.d(t,{T:function(){return getTranscodingAudioIds}});function getTranscodingAudioIds(e){return e.filter(e=>!!e.source.url&&(!e.peaksUrl||!e.transcodingUrl)).map(e=>e.id)}},61076:function(e,t,o){o.d(t,{Eg:function(){return assignAudioToUserUrl},LG:function(){return getAudiosByIdsUrl},h:function(){return deleteAudioUrl},oL:function(){return getMyAudiosUrl},p6:function(){return getAuthorAudiosUrl},ss:function(){return createAudioUrl}});let getMyAudiosUrl=()=>"my/audio",getAuthorAudiosUrl=e=>"author/".concat(e,"/audio"),getAudiosByIdsUrl=()=>"audio",createAudioUrl=()=>"audio",deleteAudioUrl=e=>"audio/".concat(e),assignAudioToUserUrl=e=>"audio/".concat(e,"/assign")},26994:function(e,t,o){o.d(t,{IA:function(){return addAudioToCollectionUrl},IR:function(){return deleteAudioFromCollectionUrl},Tu:function(){return getDownloadUrlForCollectionUrl},Vi:function(){return getAuthorCollectionsUrl},Ww:function(){return deleteCollectionUrl},_j:function(){return getCollectionAudiosUrl},oo:function(){return createCollectionUrl},yS:function(){return getAuthorCollectionUrl}});let getAuthorCollectionsUrl=e=>"author/".concat(e,"/collections"),getAuthorCollectionUrl=getCollectionAudiosUrl=getDownloadUrlForCollectionUrl=e=>"collection/".concat(e,"/download"),deleteCollectionUrl=addAudioToCollectionUrl=e=>"collection/".concat(e,"/item"),deleteAudioFromCollectionUrl=createCollectionUrl=,33121:function(e,t,o){function imageLoader(e){let{src:t,width:o,quality:n}=e;return"".concat(t).concat(o?"@".concat(o):"","?qlt=").concat(n||75)}o.r(t),o.d(t,{imageLoader:function(){return imageLoader}})},29858:function(e,t,o){o.d(t,{U4:function(){return resetAllAuthorAudios},Ul:function(){return removeAudioFromAudios},_8:function(){return updateAudios},hQ:function(){return getStoredAudios},mG:function(){return updateAudioInAudios}});var n=o(28860),r=o(86050);function getStoredAudios(e){return r.E.getQueryData(n.S.authorAllAudios(e))}function updateAudios(e,t){r.E.setQueryData(n.S.authorAllAudios(e),t)}function removeAudioFromAudios(e){let{username:t,audioSlug:o}=e,n=getStoredAudios(t);if(!n)return;let r=n.filter(;return updateAudios(t,r),r}function resetAllAuthorAudios(e){let{username:t}=e;return r.E.invalidateQueries({queryKey:["audios"]}),r.E.invalidateQueries({queryKey:n.S.authorAllAudios(t)})}function updateAudioInAudios(e){0!==e.length&&r.E.setQueryData(n.S.authorAllAudios(e[0].authorUsername),t=>{if(t)return t.map(t=>{let o=e.find(;return o?{...t,...o}:t})})}},42313:function(e,t,o){o.d(t,{qs:function(){return r},S8:function(){return l.S},R:function(){return s.R},Eh:function(){return a.E},Db:function(){return i.D},aM:function(){return u.a}});var n,r,i=o(23588),u=o(67663),a=o(86050),l=o(28860),s=o(4094);(n=r||(r={}))[n.Default=3e3]="Default"},73819:function(e,t,o){o.d(t,{k:function(){return IconPause}});var n=o(26705),r=o(50485);let IconPause=e=>(0,n.jsx)(r.Z,{...e,children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 5C9 3.89543 8.10457 3 7 3C5.89543 3 5 3.89543 5 5V19C5 20.1046 5.89543 21 7 21C8.10457 21 9 20.1046 9 19V5ZM19 5C19 3.89543 18.1046 3 17 3C15.8954 3 15 3.89543 15 5V19C15 20.1046 15.8954 21 17 21C18.1046 21 19 20.1046 19 19V5Z",fill:"currentcolor"})})},45500:function(e,t,o){o.d(t,{n:function(){return IconPlayback}});var n=o(26705),r=o(50485);let IconPlayback=e=>(0,n.jsx)(r.Z,{...e,children:(0,n.jsx)("path",{d:"M21 12L6 4V20L21 12Z",fill:"currentcolor",stroke:"currentcolor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})},50485:function(e,t,o){var n=o(26705);t.Z=e=>(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e})},77491:function(e,t,o){o.d(t,{s:function(){return d}});var n=o(26705),r=o(20955);let i={play:"Play",pause:"Pause"};var u=o(86890),a=o(73819),l=o(45500);let s=(0,u.o)("inline-flex items-center justify-center rounded-full transition-colors duration-200 disabled:pointer-events-none outline-offset-4 outline-2 outline-stroke-focus aspect-square",{variants:{variant:{default:"bg-overlay-light50 hover:bg-overlay-light30 text-icon-inverse disabled:text-icon-grey",colorful:"bg-fill-invisible hover:bg-fill-light text-icon-primary disabled:text-icon-grey"},size:{small:"w-10 h-10",medium:"w-12 h-12",large:"w-[4.25rem] h-[4.25rem]"}},defaultVariants:{variant:"default",size:"medium"}}),c=(0,u.o)("",{variants:{size:{small:"w-4 h-4",medium:"w-5 h-5",large:"w-7 h-7"}}}),d=(0,r.forwardRef)((e,t)=>{let{className:o,variant:r="default",size:d="medium",playing:f=!1,...h}=e;return(0,n.jsxs)("button",{ref:t,className:(0,u.cn)(s({variant:r,size:d,className:o})),...h,children:[f?(0,n.jsx)(a.k,{className:c({size:d})}):(0,n.jsx)(l.n,{className:c({size:d})}),(0,n.jsx)("span",{className:"sr-only",children:f?i.pause:i.play})]})});d.displayName="PlaybackButton"},19422:function(e,t,o){o.d(t,{p:x:function(){return u}});var n=o(28811),r=o.n(n),i=o(62437);let u=r()({loadableGenerated:{webpack:})},62437:function(e,t,o){o.d(t,{pm:function(){return useToast}});var n=o(20955);let r=0,i=new Map,addToRemoveQueue=reducer=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(};case"DISMISS_TOAST":{let{toastId:o}=t;return o?addToRemoveQueue(o):e.toasts.forEach(,{...e,toasts:e.toasts.map(}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(}}},u=[],a={toasts:[]};function dispatch(e){a=reducer(a,e),u.forEach(}function toast(e){let{...t}=e,o=(r=(r+1)%Number.MAX_VALUE).toString(),dismiss=return dispatch({type:"ADD_TOAST",toast:{...t,id:o,open:!0,onOpenChange:}),{id:o,dismiss,update:e=>dispatch({type:"UPDATE_TOAST",toast:{...e,id:o}})}}function useToast(){let[e,t]=(0,n.useState)(a);return(0,n.useEffect)([e]),{...e,toast,dismiss:}},51525:function(e,t,o){o.d(t,{h:function(){return convertAudioSimple}});var n=o(94390);function convertAudioSimple(e){let{author:t,category:o,description:r,downloadable:i,browsable:u,id:a,image:l,listed:s,play:c,slug:d,title:f,username:h,avatar:A,source:m,stats:g,tags:p,transcribed:y,created:v}=e;return{id:a,authorDisplayName:t,authorUsername:h,avatarUrl:A,categoryId:o,description:r,imageUrl:l,isDownloadable:i,isPublic:s,isBrowsable:u,slug:d,title:f,duration:c.duration,peaksUrl:c.waveform,transcodingUrl:c.url,source:(0,n.v)(m),transcodingProgress:c.processing,playsCount:g.plays_count,downloadsCount:g.downloads_count,sharesCount:g.shares_count,commentsCount:g.comments_count,tags:p,transcribed:y,dateCreated:v}}},64213:function(e,t,o){o.d(t,{Y:function(){return convertAudioSimpleToPlayerAudio}});function convertAudioSimpleToPlayerAudio(e){let{authorDisplayName:t,authorUsername:o,id:n,imageUrl:r,slug:i,title:u,transcodingUrl:a,duration:l,playsCount:s}=e;return{authorDisplayName:t,authorUsername:o,id:n,imageUrl:r,slug:i,title:u,transcodingUrl:a,duration:l,playsCount:s}}},94390:function(e,t,o){o.d(t,{v:);function convertAudioSourceFile(e){let{id:t,url:o,name:n,date_created:r,date_uploaded:i,duration:u,type:a,download:l,size:s}=e;return{id:t,name:n,url:o,dateCreated:r,dateUploaded:i,duration:u,type:a,downloadUrl:l,size:s}}}}]);