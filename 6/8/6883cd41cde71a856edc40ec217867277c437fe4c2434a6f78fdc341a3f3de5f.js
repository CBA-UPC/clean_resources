(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],[]]);in-bottom:8px}.multi-params .sizes-list{margin:0}@media (max-width:1023.98px){.multi-params .sizes-list{scrollbar-width:none;overflow-x:auto;scroll-snap-type:x mandatory;flex-wrap:nowrap;margin:0 -16px;padding:0 16px}.multi-params .sizes-list::-webkit-scrollbar{display:none}.multi-params .sizes-list>*{scroll-snap-align:start}}.multi-params .sizes-list.visible{max-height:none}.multi-params .sizes-list .sizes-list__item{max-width:100%}.multi-params .sizes-list .sizes-list__item:last-of-type{margin-right:0}.multi-params .sizes-list .sizes-list__item:first-of-type{scroll-snap-align:end}@media (max-width:1023.98px){.multi-params .sizes-list .sizes-list__item{margin-bottom:0}}defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"==typeof t?t:String(t)}function _toPrimitive(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}!function(){let e=function(){function e(e,t,i){var r,o;this.parentId=e,this.nmId=t.nmId,this.allSizesSoldOut=t.allSizesSoldOut,this.sizeSoldOut=null!==(r=null===(o=t.selectedSize)||void 0===o?void 0:o.isSoldOut)&&void 0!==r&&r,this.selectedPrice=t.selectedPrice,this.isDigital=t.isDigital,this.isPopup=i.isPopup,this.statsModel=i,this._currentNomeclature=t,this.priceSummary.depends=["nmId","selectedPrice"],this.onSizeUpdated=this.onSizeUpdated.bind(this),this.onColorChaged=this.onColorChaged.bind(this),this.onProductChaged=this.onProductChaged.bind(this)}var t=e.prototype;return t.priceSummary=function(){var e;const t=this.selectedPrice;if(!t)return{};const i=t.price-t.salePrice,r=!(this._currentNomeclature.isDigital||this._currentNomeclature.isVideo||this._currentNomeclature.isActivationKey)&&"RUB"===WbSpaModel.prototype.$user.getCurrency()&&wb.global.settings.variables.minCreditSum>=0&&wb.global.settings.variables.minCreditSum<t.salePrice?Math.floor(t.salePrice/10):0;return{wbaStatHandlers:{cardCommonShowEventsWba:this.statsModel.cardCommonShowEventsWba,cardCommonActionEventsWba:this.statsModel.cardCommonActionEventsWba},paymentInUsd:!(null===(e=wb.global.settings)||void 0===e||null===(e=e.variables)||void 0===e||!e.toUsdExchangeRate),finalSaving:i,creditPayment:r,...t}},t.init=function(){return this._bindEvents(),this},t.destroy=function(){return this._unbindEvents(),this},t.onSizeUpdated=function(e){var t,i,r;const{nmId:o,selectedSize:n}=e.detail;if(this.nmId!=o)return;if(n==(null===(t=this.selectedSize)||void 0===t?void 0:t.characteristicId))return;const s=this._currentNomeclature.sizes.find(e=>e.characteristicId===n);null!=s&&s.isSoldOut?$.observable(this).setProperty({selectedPrice:null}):null!=s&&s.price?$.observable(this).setProperty({selectedPrice:s.price}):$.observable(this).setProperty({selectedPrice:this._currentNomeclature.price}),$.observable(this).setProperty({sizeSoldOut:null!==(i=null==s?void 0:s.isSoldOut)&&void 0!==i?i:null===(r=this._currentNomeclature.price)||void 0===r?void 0:r.soldOut})},t.onColorChaged=function(e){var t,i;const{sourceId:r,sourceNmId:o,selectedNomenclature:n}=e.detail;r==this.parentId&&o==this.nmId&&($.observable(this).setProperty({nmId:n.nmId,allSizesSoldOut:n.allSizesSoldOut,sizeSoldOut:null!==(t=null===(i=n.selectedSize)||void 0===i?void 0:i.isSoldOut)&&void 0!==t&&t,selectedPrice:n.selectedPrice}),this._currentNomeclature=n)},t.onProductChaged=function(e){var t,i;const{sourceId:r,sourceNmId:o,selectedNomenclature:n,product:s}=e.detail;r==this.parentId&&o==this.nmId&&($.observable(this).setProperty({nmId:n.nmId,isDigital:n.isDigital,allSizesSoldOut:n.allSizesSoldOut,sizeSoldOut:null!==(t=null===(i=n.selectedSize)||void 0===i?void 0:i.isSoldOut)&&void 0!==t&&t,selectedPrice:n.selectedPrice}),this._currentNomeclature=n)},t._bindEvents=function(){this.$eventBus.addEventListener("ProductSizeUpdated",this.onSizeUpdated),this.$eventBus.addEventListener("ProductColorChanged",this.onColorChaged),this.$eventBus.addEventListener("ProductChanged",this.onProductChaged)},t._unbindEvents=function(){this.$eventBus.removeEventListener("ProductSizeUpdated",this.onSizeUpdated),this.$eventBus.removeEventListener("ProductColorChanged",this.onColorChaged),this.$eventBus.removeEventListener("ProductChanged",this.onProductChaged)},_createClass(e,[{key:"template",get:function(){return e.template}}]),e}();window.__spaModuleManager__.register("productCardPrice",e)}();

},{}]},{},[1]);
