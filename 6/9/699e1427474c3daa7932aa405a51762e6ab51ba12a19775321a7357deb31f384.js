!{1:[function(t,e,n){"use strict";n.__esModule=!0,n.environment={env:"production",postUrl:"https://heatmaps.monsido.com",getUrl:"https://heatmaps.monsido.com/v1/settings/{token}.json",maxDataLength:500,compression:16,log:!1,apiData:{}}},{}],2:[function(t,e,n){"use strict";__esModule=!0;var i=t("./environments/environment"),s=t("./utilities"),a=(c.prototype.trackHeatmap=c.prototype.reset=function(){this.startTime=Date.now(),this.sessionId=this.getSessionId(),this.startTimeISO=(new Date).toISOString(),this.shouldRun=!1,this.record()},c.prototype.getSessionId=c.prototype.record=function(){var n=this;if("development"===i.environment.env||null===i.environment.getUrl)this.init(i.environment.apiData),this.startRecording(i.environment.apiData);else{var o=new XMLHttpRequest;o.open("GET",i.environment.getUrl.replace("{token}",this.token),!0),o.withCredentials=!1,o.onload=function(t){if(4!==o.readyState||200!==o.status)throw Error("Heatmap Settings not available");var e=JSON.parse(o.responseText);n.init(e),n.startRecording(e)},o.send(null)}},c.prototype.startRecording=function(t){var e=this;if(this.shouldRun){var n=this.getPageRule(t);n&&0<n.map_type.length&&(this.getScrollTop()&&this.frames.push(this.getScrollFrame()),-1<n.map_type.indexOf("movement")&&(window.onmousemove=this.moveListener(function(t){e.setFrame(t)})),-1<n.map_type.indexOf("click")&&(window.onmousedown=this.clickListener(function(t){e.setFrame(t)})),-1<n.map_type.indexOf("scroll")&&window.addEventListener("scroll",)}},c.prototype.init=function(t){0<t.rules.length&&(this.shouldRun=1===s.Utilities.getRandomFromNumberFromPercentage(t.traffic_percentage,1))},c.prototype.exit=c.prototype.setFrame=c.prototype.getTime=c.prototype.saveData=function(t){var e=this.generateDataObject();(e.data.length>=this.maxDataLength||!0===t&&1<=e.data.length)&&(this.log&&console.log(e),this.isSendBeaconSupported()?navigator.sendBeacon(this.postUrl,JSON.stringify(e)):this.sendBeacon(this.postUrl,JSON.stringify(e)),this.frames=[])},c.prototype.moveListener=function(e){var n=this;return function(t){e&&e(["m",Math.round(t.clientX),Math.round(Math.floor(n.getScrollTop())+t.clientY),window.innerWidth,window.innerHeight,n.getTime()])}},c.prototype.clickListener=function(o){var i=this;return function(t){if(o){var e=void 0,n=t.target||t.srcElement;n?e=i.getCssSelector(n):console.warn("no click target can be registered"),o(["c",Math.round(t.clientX),Math.round(Math.floor(i.getScrollTop())+t.clientY),window.innerWidth,window.innerHeight,i.getTime(),e])}}},c.prototype.scrollListener=function(t){"function"==typeof t&&s.Utilities.isNumber(this.getScrollLeft())&&s.Utilities.isNumber(this.getScrollTop())&&window.innerWidth&&window.innerHeight&&t(this.getScrollFrame())},c.prototype.compressDataSet=function(t){for(var e=[],n=0;n<t.length;n++)if(0===e.length||"c"===t[n][0]||"s"===t[n][0])e.push(t[n]);else if("m"===t[n][0]){var o=e.filter(;0===o.length?e.push(t[n]):this.distanceBetween(t[n],o[o.length-1])>this.compression&&e.push(t[n])}return e},c.prototype.getScrollTop=function(){return window.scrollY||document.documentElement.scrollTop},c.prototype.getScrollLeft=c.prototype.distanceBetween=c.prototype.generateDataObject=function(){var t=(new Date).toISOString(),e=this.compressDataSet(this.frames);return{token:this.token,data:e,session_ts:this.startTimeISO,session_id:this.sessionId,timestamp:t,url:s.Utilities.getPageUrl()}},c.prototype.sendBeacon=function(t,e){var n=window.event&&window.event.type,o="unload"===n||"beforeunload"===n,i=new XMLHttpRequest;i.open("POST",t,!o),i.withCredentials=!1,i.setRequestHeader("Accept","*/*"),i.setRequestHeader("Content-Type","application/json");try{i.send(e)}catch(t){return!1}return!0},c.prototype.isSendBeaconSupported=c.prototype.getPageRule=function(t){for(var e=s.Utilities.getPageUrl(),n=0;n<t.rules.length;n++)if(t.rules[n].url.replace(/\/$/,"")===e.replace(/\/$/,""))return t.rules[n]},c.prototype.getCssSelector=function(t){if(r(t,Element)){for(var e=[];t&&t.nodeType===Node.ELEMENT_NODE;){var n=t.nodeName.toLowerCase();if(t.id){n+="#"+t.id,e.unshift(n);break}for(var o=t,i=1;o=o.previousElementSibling;)o.nodeName.toLowerCase()==n&&i++;1!=i&&(n+=":nth-of-type("+i+")"),e.unshift(n),t=t.parentElement}return e.join(" > ")}},c.prototype.getScrollFrame=function(){return["s",this.getScrollLeft(),this.getScrollTop(),window.innerWidth,window.innerHeight,this.getTime()]},c);function c(t){var e=this;if(this.shouldRun=!1,this.startTimeISO=(new Date).toISOString(),this.startTime=Date.now(),this.sessionId=this.getSessionId(),this.maxDataLength=i.environment.maxDataLength,this.postUrl=i.environment.postUrl,this.compression=i.environment.compression,this.log=i.environment.log,this.isString=function(t){return"string"==typeof t},this.isBlob=this.frames=[],Array.isArray(t)&&0<t.length&&t[0][1])this.token=t[0][1];else{if(!t||"object"!==o(t)||!t.token)throw Error("Domain token is not defined");this.token=t.token}window.onbeforeunload=function(){e.exit()},window.onunload=function(){e.exit()}}n.MonMouse=a},{"./environments/environment":1,"./utilities":5}],3:[{}],4:[function(t,e,n){"use strict";n.__esModule=!0;var o=t("./mouse");window._monsido=window._monsido||{};var i=new o.MonMouse(window._monsido);i.record(),window.monsido_functions=window.monsido_functions||{},window.monsido_functions.sendHeatmapData=function(){i.trackHeatmap()},window.monsido_functions.resetHeatmap=,{"./mouse":2}],5:[function(t,e,n){"use strict";n.__esModule=!0;var o=(i.getRandomFromNumberFromPercentage=function(t,e){void 0===t&&(t=10),void 0===e&&(e=10);for(var n=t,o=[],i=0;i<100;i++)0<n&&(99-i<=n||1===Math.round(Math.random()))?(n--,o.push(e)):(i===e&&n--,o.push(i));return o[Math.floor(100*Math.random())]},i.getPageUrl=function(){var t="";return"string"!=typeof location.origin&&(location.origin=location.protocol+"//"+location.host),location.hash&&this.isOldSPAUrl(location.hash)&&(t=location.hash),location.href.includes("?")||location.href.includes("=")?location.href.includes("#")?location.href.substring(0,location.href.indexOf("#")):location.href:location.origin+location.pathname+t},i.log=function(t,e){var n=window.console;switch(n=n||{log:function(t){},warn:function(t){},error:,e){case"info":n.log(t);break;case"warning":n.warn(t);break;case"error":n.error(t)}},i.isOldSPAUrl=i.isNumber=i);.Utilities=o},{}]},{},[3,4]);