const C=/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;function _(i){return C.test(i)}function v(){var i=URL.createObjectURL(new Blob),s=i.toString();return URL.revokeObjectURL(i),s.split(/[:\/]/g).pop().toLowerCase()}v.valid=_;const N=({window:i,document:s})=>{function A(t){let l,o,c,m,n;const p={};let u=[],g,h;if(!t.tagName||!(t.tagName.toUpperCase()=="SCRIPT"||t.tagName.toUpperCase()=="BLOCKQUOTE"&&t.classList.contains("telegram-post")))return null;if(t._iframe)return t._iframe;if(l=t.getAttribute("data-telegram-post"))c="https://t.me",o=`telegram-post-${l.replace(/[^a-z0-9_]/ig,"-")}`,n=`${c}/${l}?embed=1`,u=["userpic","color","mode","single?","dark","dark_color"],g=t.getAttribute("data-width")||"100%",h="",p.minWidth="300px";else return null;m=s.getElementById(o),m&&(o=o.concat(v()));for(let a=0;a<u.length;a++){let r=u[a];const d=r.substr(-1)=="?";d&&(r=r.slice(0,-1));const b=`data-${r.replace(/_/g,"-")}`;if(t.hasAttribute(b)){const y=d?"1":encodeURIComponent(t.getAttribute(b));n+=`&${r}=${y}`}}function U(a){if(!(a.source!==e.contentWindow||a.origin!=c)){try{var r=JSON.parse(a.data)}catch{var r={}}r.event=="resize"&&(r.height&&(e.style.height=`${r.height}px`),r.width&&(e.style.width=`${r.width}px`))}}var e=s.createElement("iframe");e.id=o,e.width=g,e.height=h,e.setAttribute("frameborder","0"),e.setAttribute("scrolling","no"),e.src="about:blank",e.setAttribute("data-cmp-vendor","c42775"),e.setAttribute("data-cmp-preview","100%x300"),e.setAttribute("data-cmp-src",n),e.classList.add("cmplazyload"),new URLSearchParams(i.location.search).get("mobileApp")==="true"&&e.setAttribute("src",n),e.style.overflow="hidden",e.style.border="none";for(const a in p)e.style[a]=p[a];return t.parentNode&&(t.parentNode.insertBefore(e,t),t.tagName.toUpperCase()=="BLOCKQUOTE"&&t.parentNode.removeChild(t)),t._iframe=e,i.addEventListener("message",U),e}function L(){const t="script[data-telegram-post],blockquote.telegram-post";return s.querySelectorAll(t)}const f=L();for(let t=0;t<f.length;t++)A(f[t])};export{N as initTelegramWidgets};
//# sourceMappingURL=telegram-widget.cmpLive-2ac27c94.js.map
