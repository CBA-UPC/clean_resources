/*! For license information please see client-bundle-v0.75.0.js.LICENSE.txt */
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("@feature-hub/react"),require("react"));else if("function"==typeof define&&define.amd)define(["@feature-hub/react","react"],t);else{var r="object"==typeof exports?t(require("@feature-hub/react"),require("react")):t(e["@feature-hub/react"],e.react);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(self,((e,t)=>(()=>{var r,n,i={5865:(e,t)=>{e.exports=t=fetch.bind(window),t.fetch=fetch.bind(window),t.Headers=fetch.Headers,t.Request=fetch.Request,t.Response=fetch.Response,t.default=fetch.bind(window)},2598:9127:9048:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.faInLayerDefinition=void 0;const o=r(4303),s=r(5810);t.faInLayerDefinition={id:"fa-in-layer",dependencies:{featureServices:{"featureapp-service":"^1.0.0","layer-manager":"^2.0.0","user-interaction-service":"^1.0.0"}},optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},create:({featureServices:e})=>((0,o.registerOpenFaInLayer)(e,"cms--fa-in-layer"),{"1.0.0":)},i(r(7038),t)},7738:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openLayer=void 0,t.openLayer=(e,t,r,n,i)=>{const o={};let s;switch(e.layer){case"content":s=n.openContentLayerV2(i(t,r,o),{},{closeButtonLabel:"Close",contentHeadline:"",userCloseable:e.userClosable,shimBackgroundType:e.shimBackgroundType,disableReturnFocus:e.disableReturnFocus});break;case"focus":s=n.openFocusLayer(i(t,r,o),{},{size:e.size,userCloseable:e.userClosable,shimBackgroundType:e.shimBackgroundType,disableReturnFocus:e.disableReturnFocus});break;case"interaction":s=n.openInteractionLayer(i(t,r,o),{},{size:e.size,disableReturnFocus:e.disableReturnFocus,userCloseable:e.userClosable,shimBackgroundType:e.shimBackgroundType})}o.closeLayer=},4303:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerOpenFaInLayer=void 0;const n=r(2315),i=r(7738),o=r(9882),s=r(3952);t.registerOpenFaInLayer=(e,t)=>{const r=e["user-interaction-service"],a=e["s2:logger"],c=e["layer-manager"];r.register(t,{action:(r,u)=>{const l=(0,o.createLogger)(a,t),f=(0,s.validateAndConvert)(r,u,l);if(!f)return;const{options:d,extraParams:h}=f,v=e["featureapp-service"].featureAppConfigurations[d.fa];v?(0,i.openLayer)(d,h,v,c,n.render):l.fail(`fa ${r.fa} could not be found`)}})}},2315:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.render=void 0;const i=n(r(8156)),o=r(4760);t.render=(e,t,r)=>()=>i.default.createElement(o.FeatureAppLoader,Object.assign({featureAppId:t.name+"_in_layer",featureAppName:t.name},t,{beforeCreate:t=>{const n=t.featureServices["fa-in-layer"];n&&(n.closeLayer=n.params=e)}}))},5810:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FaInLayerServiceV1Impl=void 0,t.FaInLayerServiceV1Impl=,7038:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3398:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayerTypes=void 0,t.LayerTypes=["content","focus","interaction"]},4078:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertBoolean=void 0,t.convertBoolean=function(e,t){return e?"true"===e||"yes"===e:t}},7162:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertEnum=void 0,t.convertEnum=function(e,t,r,n){return e?t.includes(e)?e:(n(`background type ${e} is invalid`),r):r}},9882:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createLogger=void 0,t.createLogger=(e,t)=>({fail(r){e.warn(`A feature app cannot be opened in a layer by user interaction ${t} because ${r}`)},warn)},3952:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAndConvert=void 0;const n=r(9127),i=r(3398),o=r(9244);t.validateAndConvert=function(e,t,r){if(!e.fa)return void r.fail("no fa was specified");if(!e.layer)return void r.fail("no layer type was defined");if(s=e.layer,!i.LayerTypes.includes(s))return void r.fail(`layer type ${e.layer} is invalid. Valid layer types are ${i.LayerTypes.join(", ")}`);var s;const a=(0,o.validateAndConvertParams)(e,e.layer,r);if(a){const e=new URLSearchParams;return t&&t.forEach(((t,r)=>{n.STANDARD_PROPS.includes(r)||e.append(r,t)})),{options:a,extraParams:e}}}},9244:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAndConvertParams=void 0;const n=r(7162),i=r(4078);t.validateAndConvertParams=function(e,t,r){const o=(0,n.convertEnum)(e.shimBackgroundType,["OPAQUE","TRANSPARENT"],"OPAQUE",r.warn),s=(0,i.convertBoolean)(e.disableReturnFocus,!1),a=(0,i.convertBoolean)(e.userClosable,!0);switch(t){case"content":return{fa:e.fa,layer:t,size:void 0,shimBackgroundType:o,disableReturnFocus:s,userClosable:a};case"interaction":{const n=e.size||"A";if(n))return{fa:e.fa,layer:t,size:n,shimBackgroundType:o,disableReturnFocus:s,userClosable:a};r.warn(`focus interaction layer size ${e.size} is invalid`);break}case"focus":{const n=e.size||"A";if(["A","B","C","NONE"].includes(n))return{fa:e.fa,layer:t,size:n,shimBackgroundType:o,disableReturnFocus:s,userClosable:a};r.warn(`focus layer size ${e.size} is invalid`);break}}}},7842:6852:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.compareFeatureServiceDefinition=void 0;const o=r(926),s=r(6012);i(r(1521),t),i(r(8843),t),t.compareFeatureServiceDefinition={id:"compare",dependencies:{featureServices:{"navigation-service":"^1.1.0"}},optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},create:({featureServices:e})=>{const{"s2:logger":t=console,"navigation-service":r}=e,n=new s.CompareFeatureServiceV2Impl(r,t),i=new o.CompareFeatureServiceV1Impl(n);return{"1.0.0":()=>({featureService:i}),"2.0.0":()=>({featureService:n})}}}},926:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompareFeatureServiceV1Impl=void 0,t.CompareFeatureServiceV1Impl=class{constructor(e){this.delegate=e}get(){return this.delegate.getConfigurations()}add(e){this.delegate.addConfiguration(e)}set(e){this.delegate.setConfigurations(e)}remove(e){this.delegate.removeConfiguration(e)}listen(e){return this.delegate.listen((t=>{switch(t.type){case"addConfiguration":e({type:"add",configuration:t.configuration});break;case"removeConfiguration":e({type:"remove",configuration:t.configuration});break;case"setConfigurations":e({type:"set",configurations:t.configurations})}}))}},1521:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6012:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompareFeatureServiceV2Impl=void 0;const r="compare-configurations";t.CompareFeatureServiceV2Impl=class{constructor(e,t){this.navigationService=e,this.logger=t,this.listeners=new Set,this.configurations=this.readConfigurationsFromSessionStorage(),this.idCount=this.configurations.reduce(((e,{id:t})=>Math.max(e,parseInt(t,10)+1)),0)}getConfigurations(){return this.configurations}addConfiguration(e){const t=this.createIdentifiableConfiguration(e);this.configurations=[...this.configurations,t],this.notifyListeners({type:"addConfiguration",configuration:t}),this.writeConfigurationsToSessionStorage(this.configurations)}setConfigurations(e){this.configurations=e.map((),this.notifyListeners({type:"setConfigurations",configurations:this.configurations}),this.writeConfigurationsToSessionStorage(this.configurations)}removeConfiguration(e){const t=this.configurations.find((t=>t.id===e));t&&(this.configurations=this.configurations.filter((e=>e!==t)),this.notifyListeners({type:"removeConfiguration",configuration:t}),this.writeConfigurationsToSessionStorage(this.configurations))}setSelectedEngine(e,t){const r=this.configurations.find(();if(!r||r.engineKey&&(i=t,(n=r.engineKey).modelId===i.modelId&&n.modelVersion===i.modelVersion&&n.modelYear===i.modelYear))return;var n,i;const o=Object.assign(Object.assign({},r),{engineKey:t});this.configurations=this.configurations.map((),this.notifyListeners({type:"setSelectedEngine",configuration:o}),this.writeConfigurationsToSessionStorage(this.configurations)}reateCompareNavigation(e,t){const r=new URLSearchParams;e.length>0&&r.set("configurations",JSON.stringify(e));const{pageId:n,featureAppName:i}=t,o=this.navigationService.navigateTo(n,{[i]:{pathname:"/",search:r.toString()}});if(o)return{href:o.createHref(),onClick:()=>o.push()}}riteConfigurationsToSessionStorage(e){if("undefined"!=typeof window)try{window.sessionStorage.setItem(r,JSON.stringify(e))}catch(e){this.logger.error(e)}}readConfigurationsFromSessionStorage(){if("undefined"==typeof window)return[];try{const e=window.sessionStorage.getItem(r);return e?JSON.parse(e):[]}catch(e){return this.logger.error(e),[]}}createIdentifiableConfiguration(e){return Object.assign(Object.assign({},e),{id:""+this.idCount++})}}},8843:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8238:(e,t,r)=>{"use strict";t.d=void 0;const n=r(6882);t.d={id:"ctd-user-interaction",dependencies:{featureServices:{"featureapp-service":"^1.0.0","layer-manager":"^2.0.0","user-interaction-service":"^1.0.0"}},optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},create:({featureServices:e})=>{const t=(0,n.openableCtd)(e,"car-technical-details","ctd--open-feature-app");return{"1.0.0":()=>({featureService:t,unbind:()=>t.unbind()})}}}},6882:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.openableCtd=void 0;const i=n(r(8156)),o=r(4760);t.openableCtd=(e,t,r)=>{const n=e["user-interaction-service"],s=e["s2:logger"],a=e["layer-manager"];let c;const u=n.register(r,{action:r=>{const n=e["featureapp-service"].featureAppConfigurations[t];n?c=((e,t)=>a.openContentLayerV2(((e,t)=>()=>i.default.createElement(o.FeatureAppLoader,Object.assign({featureAppId:t.name+"_in_content_layer",featureAppName:t.name},t,{beforeCreate:t=>{if(e){const r=t.featureServices["fa-content-service"];if(r){const t=(Array.isArray(e.model)?e.model:[e.model]).map((e=>(null==e?void 0:e.split("/"))||[])).filter((e=>3===e.length)).map((),n=e.tenant,i=e.showroomNodeId;r.content={models:t,viewMode:"layer",tenant:n,showroomNodeId:i}}}else s.warn("no content provided")}})))(e,t),{},{closeButtonLabel:"Close",contentHeadline:""}))(r,n):s.warn(`no feature app with name ${t} found. Cannot open car technical details layer`)}});return{unbind:()=>{n.unregister(r),u.unsubscribe(),null==c||c.close()}}}},6009:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.defineDealerSearchService=void 0;const o=r(8896),s=r(3896),a=r(4365);i(r(7281),t),i(r(5733),t),i(r(9599),t),i(r(9359),t),t.defineDealerSearchService=function(){return{id:"dealer-search-service",optionalDependencies:{featureServices:{"s2:logger":"^1.0.0","gfa:dealer-context-service":"^1.0.0"}},create:({featureServices:e})=>{const{"s2:logger":t=console,"gfa:dealer-context-service":r}=e,n=new a.DealerSearchServiceV3Impl(r),i=new s.DealerSearchServiceV2Proxy(t,n);return{"1.1.0":e=>({featureService:new o.DealerSearchServiceV1Proxy(e,i)}),"2.0.1":()=>({featureService:i}),"3.0.0":()=>({featureService:n})}}}}},7281:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8896:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DealerSearchServiceV1Proxy=void 0,t.DealerSearchServiceV1Proxy=class{constructor(e,t){this.consumerID=e,this.delegate=t}getSelectedDealer5733:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},3896:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DealerSearchServiceV2Proxy=void 0,t.DealerSearchServiceV2Proxy=class{arseConsumerId(e){return null==e?void 0:e.split("@")[0]}getFilter(e){return this.logger.warn("Dealer Search Service V2 is deprecated, use V3 instead."),e=this.parseConsumerId(e),this.delegate.getFilter(e)}getSelectedDealer(e){var t;return this.logger.warn("Dealer Search Service V2 is deprecated, use V3 instead."),e=this.parseConsumerId(e),null!==(t=this.transformDealerFromV3(this.delegate.getSelectedDealer(e)))&&void 0!==t?t:this.sharedDealerData}getListeners(e){var t;return this.logger.warn("Dealer Search Service V2 is deprecated, use V3 instead."),e=this.parseConsumerId(e),null!==(t=this.listeners.get(e))&&void 0!==t?t:new Set}registerOnSelectedDealerChange(e,t){this.logger.warn("Dealer Search Service V2 is deprecated, use V3 instead."),e=this.parseConsumerId(e),this.listeners.set(e,this.getListeners(e).add(t));const r=this.delegate.registerOnSelectedDealerChange(e,();return()=>{r(),this.getListeners(e).delete(t)}}setFilter(e,t){this.logger.warn("Dealer Search Service V2 is deprecated, use V3 instead."),e=this.parseConsumerId(e),this.delegate.setFilter(e,t)}setSelectedDealer(e,t){this.logger.warn("Dealer Search Service V2 is deprecated, use V3 instead."),e=this.parseConsumerId(e),this.getSelectedDealer(e)!==t&&this.delegate.setSelectedDealer(e,this.transformDealerToV3(t))}transformDealerToV3(e){var t;if(e){const r={id:e.id,brand:"V",market:null!==(t=e.address.countryCode)&&void 0!==t?t:""};return Object.assign(Object.assign({},e),{id:r})}return null}transformDealerFromV3(e){return e?Object.assign(Object.assign({},e),{id:e.id.id}):null}}},9599:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4365:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DealerSearchServiceV3Impl=void 0,t.DealerSearchServiceV3Impl=class{arseConsumerIdetFilteretSelectedDealer(e){var t;e=this.parseConsumerId(e);const r=this.selectedDealerData.get(e),n=null===(t=this.dealerContextService)||void 0===t?void 0:t.getSelectedDealer();return r||(n?{id:n,name:"",address:{},contact:{}}:void 0)}getListeners(e){var t;return e=this.parseConsumerId(e),null!==(t=this.listeners.get(e))&&void 0!==t?t:new Set}registerOnSelectedDealerChange(e,t){return e=this.parseConsumerId(e),this.listeners.set(e,this.getListeners(e).add(t)),setFilteretSelectedDealer(e,t){e=this.parseConsumerId(e),this.getSelectedDealer(e)!==t&&(this.selectedDealerData.set(e,t),this.getListeners(e).forEach((e=>e(t))))}}},9359:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2915:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.favoriteDealerFeatureServiceDefinition=void 0;const o=r(6896);i(r(156),t),t.favoriteDealerFeatureServiceDefinition={id:"favorite-dealer-service",optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},create:e=>{var t,r;const n=null!==(r=null===(t=null==e?void 0:e.featureServices)||void 0===t?void 0:t["s2:logger"])&&void 0!==r?r:console,i=new o.FavoriteDealerServiceV1Impl(n);return{"1.0.0":()=>({featureService:i})}}}},156:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6896:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FavoriteDealerServiceV1Impl=void 0,t.FavoriteDealerServiceV1Impl=class{tLastDealerNotification(){return this.currentDealer}notifyChangeOfFavoriteDealer(e){var t;if((null==e?void 0:e.id)===(null===(t=this.currentDealer)||void 0===t?void 0:t.id))return;const r={currentDealer:this.currentDealer,newDealer:e};this.currentDealer=e,this.subscriptions.forEach((e=>{try{e(r)}catch(e){this.logger.error("Can not update subscriber with change",r,e)}}))}}},1192:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.featureAppMemoryStoreDefinition=void 0,i(r(387),t),t.featureAppMemoryStoreDefinition={id:"feature-app-memory-store",create:()=>{const e=new Map;return{"1.0.0":t=>({featureService:{setState:getState:()=>e.get(t)}})}}}},387:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5219:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.featureFlagServiceDefinition=void 0;const o=r(9250);i(r(9250),t),t.featureFlagServiceDefinition={id:"feature-flag-service",create:()=>{const e=new o.FeatureFlagServiceV1Impl;return{"1.0.0":()=>({featureService:e})}}}},9250:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureFlagServiceV1Impl=void 0;const r="vwa_d6_feature_flags_";t.FeatureFlagServiceV1Impl=class{constructor(){this.listenerMap=new Map}get(e){var t;const n=null===(t=null===window||void 0===window?void 0:window.sessionStorage)||void 0===t?void 0:t.getItem(`${r}${e}`);try{return n?JSON.parse(n):null}catch(e){return null}}set(e,t,n=!1){var i,o,s;if(t){const a=`${r}${e}`,c=null!==(i=this.get(a))&&void 0!==i?i:{},u=n?Object.assign(Object.assign({},c),t):Object.assign(Object.assign({},t),c);null===(o=null===window||void 0===window?void 0:window.sessionStorage)||void 0===o||o.setItem(a,JSON.stringify(u)),null===(s=this.listenerMap.get(e))||void 0===s||s.forEach((e=>e(u)))}}subscribe(e,t){this.listenerMap.has(e)||this.listenerMap.set(e,[]);const r=this.listenerMap.get(e);return null==r||r.push(t),{unsubscribe:()=>{var e;const n=null!==(e=null==r?void 0:r.indexOf(t))&&void 0!==e?e:-1;n>=0&&(null==r||r.splice(n,1))}}}}},4316:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFetchJson=void 0;const n=r(6215);t.createFetchJson=function(e={}){const{logger:t=console}=e,r=(0,n.createFetchResponse)(e);async function i(e,n,i={}){const o=await r(e,n,i);if(o)try{return o.ok?await o.json():(t.error("Error while fetching data:",o.url,o.status,o.statusText),void t.error(await async function(e){const t=await e.text();try{return JSON.stringify(JSON.parse(t),null,2)}catch(e){return t}}(o)))}catch(e){return void t.error("Error while parsing fetched data:",o.url,o.status,o.statusText,e)}}return i.injectMockConfig=r.injectMockConfig,i}},6215:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.createFetchResponse=void 0;const i=n(r(5865)),o=n(r(1935));function s(e){if(((e))return e;if(!(null==e?void 0:e.username)||!e.password)return;const{username:t,password:r}=e;return{Authorization:`Basic ${(0,o.default)(`${t}:${r}`)}`}}t.createFetchResponse=function(e={}){const{logger:t=console,applicationName:r,agent:n}=e;let o;async function a(e,a,c={}){const u=new URL(e.origin),{auth:l}=e,{searchParams:f,headers:d}=c;e.path&&(u.pathname=e.path),f&&(u.search=f.toString());const h=Object.assign(Object.assign({},s(l)),d);if(o&&o.mockIds.length>0&&o.mocksServerConfig){const{mockIds:e,mocksServerConfig:c}=o,l={originalRequest:{href:u.href,headers:h},serviceName:a,mockIds:e,applicationName:r},f=new URL(c.baseUrl);f.searchParams.set("mockRequest",JSON.stringify(l));const d={headers:Object.assign({},s(c.auth)),agent:n},v=Date.now();try{return await(0,i.default)(f.href,d)}catch(e){return void t.error("Error while fetching data:",u.href,e)}finally{t.debug(`Fetched ${a} mock data from ${f.href} via ${l.originalRequest.href}: ${Date.now()-v}ms`)}}else{const e=Date.now(),r={headers:h,agent:n};try{return await(0,i.default)(u.href,r)}catch(e){return void t.error("Error while fetching data:",u.href,e)}finally{t.debug(`Fetched ${a} data from ${u.href}: ${Date.now()-e}ms`)}}}return a.injectMockConfig=a}},9439:1825:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStore=void 0;const n=r(7393),i=r(2307),o="filter-service:search-params";t.FilterStore=class{constructor(e,t){if(this.history=e,this.logger=t,this.listeners=new Set,e.location.search)this.filters=(0,n.createFiltersFromSearchParams)(e.location.search),this.writeSearchParamsToStorage(e.location.search);else{const e=this.readSearchParamsFromStorage();this.filters=(0,n.createFiltersFromSearchParams)(e)}}get(){return this.filters}update(e){const t=(0,i.reduceFilters)(this.filters,e);if(t!==this.filters){this.filters=t;for(const t of this.listeners)t(e);const r=(0,n.createSearchParamsForFilters)(this.filters);this.listeners.size>0&&this.history.replace({search:r}),this.writeSearchParamsToStorage(r)}}listen(e){if(0===this.listeners.size&&!this.history.location.search){const e=this.readSearchParamsFromStorage();e&&this.history.replace({search:e})}return this.listeners.add(e),()=>this.listeners.delete(e)}readSearchParamsFromStorage(){if("undefined"==typeof window)return"";try{return window.sessionStorage.getItem(o)||""}catch(e){return this.logger.error(e),""}}writeSearchParamsToStorage(e){if("undefined"!=typeof window)try{window.sessionStorage.setItem(o,e)}catch(e){this.logger.error(e)}}}},7393:(e,t)=>{"use strict";function r(e,t){const r=e.get(t);if(null===r)return;const n=parseInt(r,10);return isNaN(n)?void 0:n}Object.defineProperty(t,"__esModule",{value:!0}),t.createFiltersFromSearchParams=t.createSearchParamsForFilters=void 0,t.createSearchParamsForFilters=function(e){const t=new URLSearchParams;for(const[r,n]of Object.entries(e))if("boolean"==typeof n)n&&t.append(r,"true");else if("number"==typeof n)n!==1/0&&t.append(r,n.toString());else if(n.length>0)for(const e of n)t.append(r,e);return t.toString()},t.createFiltersFromSearchParams=function(e){const t=new URLSearchParams(e);return{bodyType:t.getAll("bodyType"),engineType:t.getAll("engineType"),gearType:t.getAll("gearType"),customerGroup:t.getAll("customerGroup"),numberOfSeats:t.getAll("numberOfSeats"),maxGrossWeight:t.getAll("maxGrossWeight"),loadLength:t.getAll("loadLength"),loadHeight:t.getAll("loadHeight"),loadWidth:t.getAll("loadWidth"),fastLane:"true"===t.get("fastLane"),budget:r(t,"budget")||1/0,monthlyBudget:r(t,"monthlyBudget")||1/0}}},6005:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.filterServiceDefinition=void 0;const o=r(1825),s=r(1597);i(r(6287),t),i(r(5718),t),t.filterServiceDefinition={id:"filter-service",dependencies:{featureServices:{"s2:history":"^2.0.0"}},optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},create:({featureServices:e})=>{const{"s2:logger":t=console,"s2:history":r}=e,n=new o.FilterStore(r.history,t);return{"1.2.0":e=>({featureService:{get filters(){const{bodyType:e,engineType:t,gearType:r}=n.get();return{bodyType:e,engineType:t,gearType:r}},add:(t,r)=>{n.update({type:"add",filterType:t,value:r,consumerId:e})},remove:(t,r)=>{n.update({type:"remove",filterType:t,value:r,consumerId:e})},reset:t=>{n.update({type:"reset",filters:t,consumerId:e})},listen:e=>n.listen((t=>{switch(t.type){case"add":case"remove":(0,s.isV1FilterType)(t.filterType)&&e({...t,filterType:t.filterType});break;case"reset":if(t.filters){const r={};for(const e of s.v1FilterTypes){const n=t.filters[e];n&&(r[e]=n)}Object.keys(r).length>0&&e({...t,filters:r})}else e(t)}}))}}),"2.1.0":e=>({featureService:{get filtersadd:(t,r)=>{n.update({type:"add",filterType:t,value:r,consumerId:e})},remove:(t,r)=>{n.update({type:"remove",filterType:t,value:r,consumerId:e})},toggleOn:t=>{n.update({type:"toggleOn",filterType:t,consumerId:e})},toggleOff:t=>{n.update({type:"toggleOff",filterType:t,consumerId:e})},reset:t=>{n.update({type:"reset",filters:t,consumerId:e})},listen:e=>n.listen(e),set:(t,r)=>{n.update({type:"set",filterType:t,value:r,consumerId:e})}}})}}}},2307:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reduceFilters=void 0,t.reduceFilters=function e(t,r){switch(r.type){case"add":return t[r.filterType].includes(r.value)?t:{...t,[r.filterType]:[...t[r.filterType],r.value]};case"remove":return t[r.filterType].includes(r.value)?{...t,[r.filterType]:t[r.filterType].filter(()}:t;case"toggleOn":return t[r.filterType]?t:{...t,[r.filterType]:!0};case"toggleOff":return t[r.filterType]?{...t,[r.filterType]:!1}:t;case"set":return t[r.filterType]===r.value?t:{...t,[r.filterType]:r.value};case"reset":{if(!r.filters)return{bodyType:[],engineType:[],gearType:[],customerGroup:[],numberOfSeats:[],maxGrossWeight:[],loadLength:[],loadHeight:[],loadWidth:[],fastLane:!1,budget:1/0,monthlyBudget:1/0};let n=t;for(const[i,o]of Object.entries(r.filters))if(i in t)if("boolean"==typeof o)n=e(n,{type:"toggleOff",consumerId:r.consumerId,filterType:i});else if("number"==typeof o)n=e(n,{type:"set",consumerId:r.consumerId,filterType:i,value:1/0});else if(Array.isArray(o))for(const t of o)n=e(n,{type:"remove",consumerId:r.consumerId,filterType:i,value:t});return n}}}},1597:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isV1FilterType=t.v1FilterTypes=void 0,t.v1FilterTypes=["bodyType","engineType","gearType"],t.isV1FilterType=,6287:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},5718:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2615:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAcsServiceConfig=void 0,t.createAcsServiceConfig=function(e){var t;if(!e)return;const r=null===(t=e.customConfig)||void 0===t?void 0:t.financingProviderTenant;return r?{origin:e.urlOrigin,path:e.urlPath,auth:e.credentials,tenant:r}:void 0}},7059:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAcsConfig=void 0;const r=(e,t)=>t?t.endsWith("/")?t+e:t+"/"+e:e;t.fetchAcsConfig=async function(e,t,n){const{path:i,tenant:o}=e,s=`FINANCING_PROVIDER_SERVICE:${o}`,a=Object.assign(Object.assign({},e),{path:r(s,i)}),c=await t(a,"acs",Object.assign({searchParams:new URLSearchParams({inherit:"true"})},n&&{headers:{"x-api-key":n}}));return null==c?void 0:c.items}},870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFinancingProviderConfig=void 0;const n=r(9439),i=r(2615),o=r(7059);async function s(e){return new Promise(((t,r)=>{const n=document.createElement("script");n.src=e,n.onload=()=>t(),n.onerror=r,document.head.appendChild(n)}))}async function a(e){return new Promise(((t,r)=>{const n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=e,n.onload=n.onerror=r,document.head.appendChild(n)}))}t.fetchFinancingProviderConfig=async function(e){var t;const{logger:r,mockIds:c,mocksServerConfig:u,serviceConfigs:l,apiKey:f}=e,d=n.createFetchJson({applicationName:"financing-provider-service",logger:r});d.injectMockConfig({mockIds:c,mocksServerConfig:u});const h=i.createAcsServiceConfig(null!==(t=l["oneapi-acs"])&&void 0!==t?t:l.acs);if(h)try{const e=await o.fetchAcsConfig(h,d,f);if(!e)return void r.info("No ACS found for Financing Provider.");const{scriptUrl:t,stylesUrl:n}=e;return t?(await Promise.all([s(t),n?a(n):void 0]),e):void r.info("No Financing Provider script found in ACS.")}catch(e){return void r.error(e)}else r.info("No Financing Provider Service Config for ACS found.")}},4479:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.defineFinancingProviderService=void 0;const o=r(870);i(r(1918),t),i(r(6617),t),t.defineFinancingProviderService=function(e={}){const{mocksServerConfig:t,mockIds:r=[]}=e;return{id:"financing-provider-service",dependencies:{featureServices:{"service-config-provider":"^1.0.0"}},optionalDependencies:{featureServices:{"s2:logger":"^1.0.0","api-key-provider":"^1.0.0"}},create:({featureServices:e})=>{const{"s2:logger":n=console,"service-config-provider":i,"api-key-provider":s}=e;let a;const c=async()=>(a||(a=o.fetchFinancingProviderConfig({logger:n,mockIds:r,mocksServerConfig:t,serviceConfigs:i.configs,apiKey:null==s?void 0:s.apiKey})),a);return{"1.1.0":"2.0.0":()=>({featureService:{getSettings:async()=>{const e=await c();if(e)return e.settings}}})}}}}},1918:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},458:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},6617:1429:(e,t,r)=>{"use strict";t.L=void 0;const n=r(4018);t.L=function(){return{id:"ipc-service",dependencies:{},create:()=>{const e=new n.IPCServiceV1Impl;return{"1.0.0":()=>({featureService:e})}}}}},4018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPCServiceV1Impl=void 0;const n=r(1417);t.IPCServiceV1Impl=class{ut(e,t,r){let i=this.centralMap.get(e);n.isUndefined(i)&&(i=new Map),i.set(t,r),this.centralMap.set(e,i)}get(e,t){const r=this.centralMap.get(e);return n.isUndefined(r)?void 0:r.get(t)}delete(e,t){let r=this.centralMap.get(e);n.isUndefined(r)||(r.delete(t),this.centralMap.set(e,r))}subscribe(e,t){let r=this.topicMap.get(e);n.isUndefined(r)&&(r=new Map),r.set(t.id,t),this.topicMap.set(e,r)}unsubscribe(e,t){const r=this.topicMap.get(e);n.isUndefined(r)||r.delete(t.id)}publish(e,t){const r=this.topicMap.get(e);n.isUndefined(r)||r.forEach((),this.lastEvent.set(e,t)}fetchLastEvent(e){return this.lastEvent.get(e)}}},7132:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayEquals=void 0,t.arrayEquals=,5502:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.modelSelectionServiceDefinition=void 0;const o=r(7132);i(r(8741),t),t.modelSelectionServiceDefinition={id:"model-selection-service",create:()=>{let e;const t=new Set;return{"1.1.0":()=>({featureService:{getModelSelection:()=>e,setModelSelection:r=>{if(i=r,!(!(n=e)&&!i||n&&i&&n.nodeId===i.nodeId&&(0,o.arrayEquals)(n.preferences.engineTypes,i.preferences.engineTypes)&&(0,o.arrayEquals)(n.preferences.gearTypes,i.preferences.gearTypes))){var n,i;e=r;for(const r of t)r(e)}},listen:e=>(t.add(e),()=>t.delete(e))}})}}}},8741:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},8740:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.pricePreferencesProviderDefinition=void 0;const o=r(9237);i(r(455),t),t.pricePreferencesProviderDefinition={id:"price-preferences-provider",optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},create:({featureServices:e})=>{const{"s2:logger":t=console}=e,r=new Set;let n=o.readFromStorage(t)||"priceType1";return{"1.0.0":()=>({featureService:{getPriceType:()=>n,setPriceType:e=>{e!==n&&(n=e,o.writeToStorage(e,t),r.forEach((e=>e())))},listen:})}}}},9237:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.writeToStorage=t.readFromStorage=void 0;const r="price-preferences-provider:price-type";t.readFromStorage=function(e){if("undefined"!=typeof window)try{const e=window.localStorage.getItem(r);if(!e)return;if(!e))throw new Error(`${e} is not a valid price type.`);return e}catch(t){return void e.error(t)}},t.writeToStorage=function(e,t){if("undefined"!=typeof window)try{window.localStorage.setItem(r,e)}catch(e){t.error(e)}}},455:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4882:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAcsServiceConfig=void 0,t.createAcsServiceConfig=function(e,t){var r;if(!e)return;const n=null===(r=e.customConfig)||void 0===r?void 0:r.ulfTenant;if(!n)return;const i=t?{"x-api-key":t}:void 0;return{origin:e.urlOrigin,path:e.urlPath,auth:e.credentials,tenant:n,headers:i}}},1691:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createConfig=void 0,t.createConfig=function(e,t){var r;if("region"===e.type){const n=null===(r=null==t?void 0:t.region)||void 0===r?void 0:r.regions;if(!n)throw new Error("A region user location is required, but no translated regions are defined.");return Object.assign(Object.assign({},e),{localizedRegions:n})}return Object.assign(Object.assign({},e),{pattern:new RegExp(e.pattern)})}},3551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createI18nServiceConfig=void 0,t.createI18nServiceConfig=function(e,t){var r;if(!e)return new Error("No i18n service config found.");const n=null===(r=e.customConfig)||void 0===r?void 0:r.ulfTenant;if(!n)return new Error('The i18n service config is missing the required custom field "ulfTenant".');const i=t?{"x-api-key":t}:void 0;return{origin:e.urlOrigin,path:e.urlPath,auth:e.credentials,tenant:n,headers:i}}},9414:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUserLocationManager=void 0;const n=r(9439),i=r(4882),o=r(1691),s=r(3551),a=r(3999),c=r(8181),u=r(7876);t.createUserLocationManager=async function(e){if("undefined"==typeof window)return void e.logger.warn("A User Location Manager was requested during server-side rendering.");const{apiKeyProvider:t,featureAppService:r,language:l,layerManager:f,logger:d,mockIds:h,mocksServerConfig:v,serviceConfigs:p}=e,g=(0,n.createFetchJson)({applicationName:"ulf",logger:d});g.injectMockConfig({mockIds:h,mocksServerConfig:v});try{const[e,n]=(null==t?void 0:t.apiKey)&&"oneapi-acs"in p?["oneapi-acs",t.apiKey]:["acs"],h=(0,i.createAcsServiceConfig)(p[e],n);if(!h)return;const v=await(0,a.fetchAcsConfig)(h,g);if("none"===v.requiredUserLocation.type)return;const[y,m]=(null==t?void 0:t.apiKey)&&"oneapi-i18n"in p?["oneapi-i18n",t.apiKey]:["i18n"],b="region"===v.requiredUserLocation.type?await(0,c.fetchTranslations)({legacyI18n:(0,s.createI18nServiceConfig)(p[y],m),i18n:(0,s.createI18nServiceConfig)(p["oneapi-i18n-v2"],null==t?void 0:t.apiKey)},l,g,d):void 0,S=(0,o.createConfig)(v.requiredUserLocation,b),w=r.featureAppConfigurations.ulf;if(!w)throw new Error('A Feature App configuration with the name "ulf" must be provided.');return new u.UserLocationManager(S,w,f,d)}catch(e){throw d.error(e),e}}},3999:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchAcsConfig=void 0,t.fetchAcsConfig=async function(e,t){const{tenant:r}=e,n=new URLSearchParams({tenant:r,application:"ULF",inherit:"true",type:"tenant_technical"}),i=await t(e,"acs",{searchParams:n,headers:e.headers});if(!i)throw new Error(`Unable to fetch acs config for tenant ${JSON.stringify(r)}.`);return i.configurations.tenant_technical.items}},8181:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchTranslations=void 0,t.fetchTranslations=async function(e,t,r,n){if(e.i18n instanceof Error)n.warn(`Unable to fetch i18n: ${e.i18n.message}`);else try{return await async function(e,t,r){const{tenant:n}=e,i=await r(e,"i18n-v2",{headers:e.headers,searchParams:new URLSearchParams({tenant:n,language:t,application:"ULF"})});if(!i)throw new Error(`Unable to fetch translations for tenant ${JSON.stringify(n)}.`);return i.translations}(e.i18n,t,r)}catch(e){n.warn(e)}if(n.warn("Trying to fallback to legacy i18n service."),e.legacyI18n instanceof Error)throw new Error(`Unable to fetch fallback translations. ${e.legacyI18n.message}`);return await async function(e,t,r){const{tenant:n}=e,i=Object.assign(Object.assign({},e),{path:`${e.path}/TranslationBundle:${n}:ULF:${t}`}),o=await r(i,"i18n",{headers:e.headers});if(!o)throw new Error(`Unable to fetch translations for tenant ${JSON.stringify(n)}.`);return o.translation.ulf}(e.legacyI18n,t,r)}},8414:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||Object.defineProperty(t,"__esModule",{value:!0}),t.defineUserLocationManager=void 0;const o=r(9414);i(r(7745),t),t.defineUserLocationManager=function(e={}){const{mocksServerConfig:t,mockIds:r=[]}=e;return{id:"user-location-manager",dependencies:{featureServices:{"featureapp-service":"^1.2.0","layer-manager":"^2.3.0","locale-service":"^1.0.0","service-config-provider":"^1.0.0"}},optionalDependencies:{featureServices:{"s2:logger":"^1.0.0","api-key-provider":"^1.0.0"}},create:({featureServices:e})=>{const{"featureapp-service":n,"layer-manager":i,"locale-service":s,"s2:logger":a=console,"service-config-provider":c,"api-key-provider":u}=e;let l;return{"1.3.0":()=>({featureService:async()=>(l||(l=(0,o.createUserLocationManager)({apiKeyProvider:u,featureAppService:n,language:s.language,layerManager:i,logger:a,mockIds:r,mocksServerConfig:t,serviceConfigs:c.configs})),l)})}}}}},7876:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?,i=this&&this.__setModuleDefault||(Object.create?function(e,t){e.default=t}),o=this&&this.__importStar||s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.UserLocationManager=void 0;const a=r(4760),c=s(r(1150)),u=o(r(8156)),l="ulf-user-location";function f(e,t){return"region"===e.type&&t.includes(e.regionCode)}function d(e,t){return"postalCode"===e.type&&t.test(e.postalCode)}t.UserLocationManager=class{constructor(e,t,r,n){this.config=e,this.featureAppConfig=t,this.layerManager=r,this.logger=n,this.listeners=new Set,this.userLocationIsSelectedByUser=!1,this.isUlfOpen=!1;const i=this.readUserLocationFromLocalStorage();i&&(this.userLocationIsSelectedByUser=!0),this.userLocation=i||this.createDefaultUserLocation()}setUserLocation(e){if("region"===this.config.type&&!f(e,this.config.regionCodes))return void this.logger.error(`An invalid region was attempted to be set in User Location Manager: ${JSON.stringify(e)}.`);if("postalCode"===this.config.type&&!d(e,this.config.pattern))return void this.logger.error(`An invalid postal code was attempted to be set in User Location Manager: ${JSON.stringify(e)}. A postal code must match ${this.config.pattern.toString()}.`);const t=!(0,c.default)(this.userLocation,e);if(!t&&this.userLocationIsSelectedByUser||this.writeUserLocationToLocalStorage(e),this.userLocationIsSelectedByUser=!0,this.userLocation=e,t)for(const t of this.listeners)t(e)}listen(e,t){return this.listeners.add(e),setTimeout((),this.userLocationIsSelectedByUser||(null==t?void 0:t.passive)||this.promptUserForLocation(),promptUserForLocation(){this.isUlfOpen||(this.isUlfOpen=!0,this.layerManager.openFocusLayer(((e,t)=>u.createElement(a.FeatureAppLoader,Object.assign({featureAppId:"ulf",featureAppName:"ulf",done:t,onError:t},this.featureAppConfig))),void 0,{onClose:size:"A"}))}createDefaultUserLocation(){if("region"===this.config.type)return{type:"region",regionCode:this.config.defaultRegionCode}}writeUserLocationToLocalStorage(e){try{window.localStorage.setItem(l,JSON.stringify(e))}catch(e){this.logger.error(e)}}readUserLocationFromLocalStorage(){try{const e=window.localStorage.getItem(l),t=e?JSON.parse(e):void 0;if(!t)return;return"region"!==this.config.type||f(t,this.config.regionCodes)?"postalCode"!==this.config.type||d(t,this.config.pattern)?t:void this.logger.warn(`An invalid postal code was read from local storage in the User Location Manager: ${JSON.stringify(t)}.`):void this.logger.warn(`An invalid region was read from local storage in the User Location Manager: ${JSON.stringify(t)}.`)}catch(e){return void this.logger.error(e)}}}},7745:1150:124:(e,t,r)=>{"use strict";t.Jy=void 0;const n=r(3571);r(3571);t.Jy={id:"emobility-feature-service",dependencies:{featureServices:{"featureapp-service":"^1.0.0","layer-manager":"^2.7.2","user-interaction-service":"^1.0.0"}},optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},create:({featureServices:e})=>{const t=(0,n.emobilityFeatureService)(e,"emobility--open-layer");return{"1.0.0":()=>t}}}},3571:function(e,t,r){"use strict";var n=this&&this.__importDefault||Object.defineProperty(t,"__esModule",{value:!0}),t.emobilityFeatureService=t.EmobilityFeatureAppName=void 0;const i=n(r(8156)),o=r(4760);var s;(s=t.EmobilityFeatureAppName||(t.EmobilityFeatureAppName={})).Range="range",s.Chargetime="chargetime",s.Cost="cost",s.Tariffs="tariffs";const a={range:"RangeFA",chargetime:"Charging Time",cost:"Cost",tariffs:"Charging_Tariff"},c=(e,t)=>e["featureapp-service"].featureAppConfigurations[t];t.emobilityFeatureService=(e,t)=>{const r=e["user-interaction-service"],n=e["s2:logger"],s=e["layer-manager"],u=({defaultModelId:e})=>t=>{const{featureServices:r}=t,{"fa-content-service":n}=null!=r?r:{};n&&(n.content={defaultModelId:e})},l=(e,t)=>{var r,n;return s.openContentLayerV2(((e,t)=>()=>i.default.createElement(o.FeatureAppLoader,Object.assign({featureAppId:`emobility-layer-${e.name.toLowerCase().replace(" ","-")}`,featureAppName:e.name},e,{beforeCreate:u(t)})))(e,t),{},{closeButtonLabel:null!==(r=t.closeButtonLabel)&&void 0!==r?r:"Close",contentHeadline:null!==(n=t.contentHeadline)&&void 0!==n?n:""})},f=t=>{const r={},i=a[t.fa],o=c(e,i);t.customFeatureAppConfigurations&&Object.entries(t.customFeatureAppConfigurations).forEach((([t,i])=>{const o=c(e,i);o?r[t]=o:n.warn(`No feature app configuration with name ${i} found`)})),r&&r[t.fa]?l(r[t.fa],t):o?l(o,t):n.warn(`No feature app with name ${i} found. Cannot open emobility feature app layer`)};return r.register(t,{action:f}),{featureService:{openLayer:e=>f(e)}}}},233:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i}),r(2775);var n=const i=function(){function e(){this.observers=new Map}return e.prototype.subscribe=function(e,t){var r=this.observers.get(e)||[];this.observers.set(e,n(n([],r,!0),[t],!1))},e.prototype.unsubscribe=function(e,t){var r=this.observers.get(e)||[];this.observers.set(e,r.filter(())},e.prototype.hasSubscriptions=function(e){var t;return!!(null===(t=this.observers.get(e))||void 0===t?void 0:t.length)},e.prototype.notify=function(e,t){var r=this.observers.get(e);r&&r.forEach((function(e){return e(t)}))},e}()},4552:(e,t,r)=>{"use strict";var n,i,o;r.d(t,{dR:()=>i}),n||(n={})),i||(i={})),function(e){e.FACETS_STORAGE_KEY="oneshop.products.activeFacets",e.IS_FROM_PLP_STORAGE_KEY="oneshop.product.isFromPlp",e.DEALER_RECOMMENDATION="oneshop.product.recommendedConfiguration",e.CUSTOMER_CONTEXT="oneshop.customerContext",e.FACET_URL_STORAGE_KEY="oneshop.facetUrl"}(o||(o={}))},5783:1935:e=>{e.exports=function(e){return btoa(e)}},7725:6983:3606:2775:(e,t,r)=>{var n;!function(e){!function(t){var n="object"==typeof r.g?r.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=o(e);oid 0===n.Reflect?n.Reflect=e:i=o(n.Reflect,i),function(e){var t=Object.prototype.hasOwnProperty,r="function"==typeof Symbol,n=r&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=r&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,s={__proto__:[]}instanceof Array,a=!o&&!s,c={create:o?s?has:a?get:a?,u=Object.getPrototypeOf(Function),l="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,f=l||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?):Map,d=l||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?):Set,h=new(l||"function"!=typeof WeakMap?):WeakMap);eturn"function"==typeof e}orate",(),e("metadata",(),e("defineMetadata",(),e("hasMetadata",(function(e,t,r){if(!I(t))throw new TypeError;return O(r)||(r=P(r)),p(e,t,r)})),e("hasOwnMetadata",(function(e,t,r){if(!I(t))throw new TypeError;return O(r)||(r=P(r)),g(e,t,r)})),e("getMetadata",(function(e,t,r){if(!I(t))throw new TypeError;return O(r)||(r=P(r)),y(e,t,r)})),e("getOwnMetadata",(),e("getMetadataKeys",(function(e,t){if(!I(e))throw new TypeError;return O(t)||(t=P(t)),S(e,t)})),e("getOwnMetadataKeys",(),e("deleteMetadata",()}(i)}()}(n||(n={}))},1417:e=>{e.exports={isUndefined:},4760:t=>{"use strict";t.exports=e},8156:,o={};.m=i,s.n=s.d=s.f={},s.e=s.u=s.g=),s.o=r={},n="@volkswagen-onehub/feature-services-bundle:",s.l=s.r=s.nmd=((),(();var a={};return(()=>{"use strict";s.r(a),s.d(a,{definitions:);class e{etData(e){const t=e||"default-appointment-store";return this.data.get(t)}setDataubscribe(e,t){const r=this.getConsumerListeners(e);r.add(t),this.listeners.set(e,r)}etConsumerListeners(e){var t;return null!==(t=this.listeners.get(e))&&void 0!==t?t:new Set}fireListeners(e){const t=this.data.get(e);return this.getConsumerListeners(e).forEach(()}}var t=s(6009),r=s(8414);class n{constructor(e){this.observer=e}r i,o=s(7725),c=(i=,u=function(){eturn e.prototype.subscribe=function(e){var t=this;return this.eventEmitter.addListener("update",e),{unsubscribe:},e.prototype.updateInternal=e}();!function(e){(t,e),t.prototype.update=(u);class l extends u{ar f=s(2598);class d{static buildScopeString(e,t,r){let n="";return t.length>0&&(n+=`&scope-${e}=${t}`),r.forEach(((e,t)=>{e.length>0&&(n+=`&scope-${t}=${e}`)})),n}}class h{static buildPromptString(e,t,r){let n="";return t&&(n+=`&prompt-${e}=${t}`),r.forEach((),n}}class v{constructor(e,t){this.authServiceOptions=e,this.authProxyUrl=t.urlOrigin,this.defaultRedirectUrl=t.customConfig.redirectUrl}getLoginUrlForAllLegalEntities(e,t,r,n){const i=this.authServiceOptions.legalEntityMapping[e].fag,o=this.authServiceOptions.legalEntityMapping[e].scopes,s=new Map;for(const e of t){const t=this.authServiceOptions.legalEntityMapping[e];s.set(t.fag,t.scopes)}return this.buildLoginUrl(i,o,s,r,n)}getLoginUrl(e,t,r){const n=this.authServiceOptions.legalEntityMapping[e],i=new Map;return this.buildLoginUrl(n.fag,n.scopes,i,t,r)}buildLoginUrl(e,t,r,n,i){const o=`?fag=${[e,...r.keys()]}`,s=d.buildScopeString(e,t,r),a=h.buildPromptString(e,n,[...r.keys()]),c="&redirectUrl="+(i||this.defaultRedirectUrl),u=this.authServiceOptions.sessionTimeout?"&sessionTimeout="+this.authServiceOptions.sessionTimeout:"";return`${this.authProxyUrl}/login${o}${s}${a}${c}${u}`}}ar g,y={read:write:,{path:"/"});class m{constructor(e,t){this.authProxyUrl=e,this.fag=t}async call(e,t,r,n,i){const o=r?new URL(this.getProxyUrl()+"/"+r):new URL(this.getProxyUrl());return t&&o.searchParams.set("resourceHost",t),fetch(o.toString(),{method:e,headers:Object.assign(Object.assign(Object.assign({},i),this.createCsrfHeader()),this.createContentTypeHeader(e,i)),credentials:"include",body:n})}getProxyUrlreateCsrfHeader(){return{"X-CSRF-TOKEN":y.get("csrf_token")||""}}createContentTypeHeader(e,t){if(!new Headers(t).has("Content-Type"))return{"Content-Type":"PATCH"===e?"application/json-patch+json;charset=UTF-8":"application/json;charset=UTF-8"}}}!g||(g={}));class b{constructor(e,t,r,n,i,o){this.legalEntity=e,this.loginAllCallback=t,this.authServiceOptions=r,this.serviceConfigProvider=n,this.sharedEventEmitter=i,this.logger=o,this.fag=this.authServiceOptions.legalEntityMapping[e].fag,this.resourceCaller=new m(this.serviceConfigProvider.configs["auth-proxy"].urlOrigin,this.fag)}async isAuthenticated(){const e=new URL(`${this.serviceConfigProvider.configs["auth-proxy"].urlOrigin}/${this.fag}/authenticated`),t=this.authServiceOptions.legalEntityMapping[this.legalEntity].scopes;return t&&t.length&&t.forEach((),(await fetch(e.toString(),{credentials:"include"})).ok}async login(e,t){await this.sharedEventEmitter.emit("saveState"),this.loginAllCallback(this.legalEntity,e,t)}async logout(e){await this.sharedEventEmitter.emit("logout");const t=`?_csrf=${y.get("csrf_token")}&redirectUrl=${e||this.serviceConfigProvider.configs["auth-proxy"].customConfig.redirectUrl}`;window.location.assign(`${this.serviceConfigProvider.configs["auth-proxy"].urlOrigin}/logout${t}`)}sync fetch(e,t){switch(null==t?void 0:t.method){case g.GET:return this.get(null==t?void 0:t.resourceHostId,e,null==t?void 0:t.headers);case g.PUT:return this.put(null==t?void 0:t.resourceHostId,e,null==t?void 0:t.body,null==t?void 0:t.headers);case g.POST:return this.post(null==t?void 0:t.resourceHostId,e,null==t?void 0:t.body,null==t?void 0:t.headers);case g.PATCH:return this.patch(null==t?void 0:t.resourceHostId,e,null==t?void 0:t.body,null==t?void 0:t.headers);case g.DELETE:return this.delete(null==t?void 0:t.resourceHostId,e,null==t?void 0:t.body,null==t?void 0:t.headers);default:if(null==t?void 0:t.method){const e=Error(`HTTP method "${t.method}" is unsupported.`);throw this.logger.error(e.message),e}return this.get(null==t?void 0:t.resourceHostId,e,null==t?void 0:t.headers)}}async get(e,t,r){return this.resourceCaller.call(g.GET,e,t,void 0,r)}async put(e,t,r,n){return this.resourceCaller.call(g.PUT,e,t,r,n)}async post(e,t,r,n){return this.resourceCaller.call(g.POST,e,t,r,n)}async patch(e,t,r,n){return this.resourceCaller.call(g.PATCH,e,t,r,n)}async delete(e,t,r,n){return this.resourceCaller.call(g.DELETE,e,t,r,n)}async continueSession(e){var t,r;const n=new URL(`${this.serviceConfigProvider.configs["auth-proxy"].urlOrigin}/${this.fag}/continueSession`),i=null===(t=this.authServiceOptions.sessionTimeout)||void 0===t?void 0:t.toString();if(i&&n.searchParams.set("sessionTimeout",i),e){const e=null===(r=this.authServiceOptions.rememberMeSessionTimeout)||void 0===r?void 0:r.toString();e&&(n.searchParams.set("sessionTimeout",e),n.searchParams.set("rememberMe","true"))}const o=y.get("csrf_token"),s=null!=o?o:"";return(await fetch(n.toString(),{credentials:"include",headers:{"X-CSRF-TOKEN":s}})).ok}}class S{constructor(e,t){this.authServiceOptions=e,this.logger=t}getMainLegalEntity(){let e=Object.keys(this.authServiceOptions.legalEntityMapping)[0];for(let e in this.authServiceOptions.legalEntityMapping)if(this.authServiceOptions.legalEntityMapping[e].mainEntity)return e;return this.logger.error("No main legal entity configured, using first as fallback"),e}}class w{n(e,t){this.listenersByEvent.has(e)||this.listenersByEvent.set(e,[]),this.listenersByEvent.get(e).push((async()=>{const e=new Promise(();return Promise.race([e,t()])}))}async emit(e){const t=this.listenersByEvent.get(e);if(t){const e=t.map(();await Promise.all(e)}}}w.DEFAULT_TIMEOUT=500;const _=w;class O{constructor(e,t,r){this.logger=r,this.instances=new Map,this.loginAll=async(e,t,r)=>{var n;const i=this.legalEntityHelper.getMainLegalEntity();return await(null===(n=this.instances.get(i))||void 0===n?void 0:n.isAuthenticated())?this.loginRequestingLegalEntityIfNotAuthenticated(e,t,r):this.loginAllLegalEntities(i,t,r)},this.authProxyUrlBuilder=new v(e,t.configs["auth-proxy"]),this.legalEntityHelper=new S(e,r);const n=new _;for(let i in e.legalEntityMapping){const o=new b(i,this.loginAll,e,t,n,r);this.instances.set(i,o)}}register(e){const t=this.instances.get(e);if(t)return t;{const t=Error('Legal entity "'+e+'" is unknown.');throw this.logger.error(t.message),t}}async loginRequestingLegalEntityIfNotAuthenticated(e,t,r){var n;const i=!await(null===(n=this.instances.get(e))||void 0===n?void 0:n.isAuthenticated()),o="LOGIN"===(null==t?void 0:t.toUpperCase());if(i||o){const n=this.authProxyUrlBuilder.getLoginUrl(e,t,r);window.location.assign(n)}}loginAllLegalEntities(e,t,r){const n=Array.from(this.instances.keys()).filter((),i=this.authProxyUrlBuilder.getLoginUrlForAllLegalEntities(e,n,t,r);window.location.assign(i)}}class C{sValid(e,t){var r,n;const i=null===(n=null===(r=this.serviceConfigProvider)||void 0===r?void 0:r.configs)||void 0===n?void 0:n[e],o=`Invalid ${e} config: [${JSON.stringify(i)}]`;return(null==i?void 0:i.urlOrigin)&&(!t||!t.some((e=>{var t;return!(null===(t=null==i?void 0:i.customConfig)||void 0===t?void 0:t[e])})))||(this.logger.error(o),!1)}}function I(){return{id:"vw:authService",dependencies:{featureServices:{"service-config-provider":"1.0.0","s2:logger":"^1.0.0"}},optionalDependencies:{featureServices:{"vw:authservice-config":"^1.0.0"}},create:e=>{const t=e.featureServices["vw:authservice-config"];if(!t)return;const r=e.featureServices["service-config-provider"],n=e.featureServices["s2:logger"];if(!new C(r,n).isValid("auth-proxy",["redirectUrl"]))return;const i=new O(t,r,n);return{"2.0.0":()=>({featureService:i})}}}}function E(){return{id:"vw:authServiceCommercial",dependencies:{featureServices:{"service-config-provider":"1.0.0","s2:logger":"^1.0.0"}},optionalDependencies:{featureServices:{"vw:authservice-config":"^2.0.0"}},create:e=>{const t=e.featureServices["vw:authservice-config"];if(!t)return;const r={legalEntityMapping:{}};if(Object.entries(t.legalEntityMapping).forEach((([e,n])=>{const i=n.find(();i&&(r.legalEntityMapping[e]={mainEntity:i.mainEntity,fag:i.fag,scopes:i.scopes},t.sessionTimeout&&(r.sessionTimeout=t.sessionTimeout),t.rememberMeSessionTimeout&&(r.rememberMeSessionTimeout=t.rememberMeSessionTimeout))})),!Object.keys(r.legalEntityMapping).length)return;const n=e.featureServices["service-config-provider"],i=e.featureServices["s2:logger"];if(!new C(n,i).isValid("auth-proxy",["redirectUrl"]))return;const o=new O(r,n,i);return{"2.0.0":()=>({featureService:o})}}}}function P(){return{id:f.id,dependencies:{featureServices:{"service-config-provider":"1.0.0","s2:logger":"^1.0.0"}},optionalDependencies:{featureServices:{"vw:authservice-config":"^1.0.0","vw:authService":"^2.0.0"}},create:e=>{const t=e.featureServices["vw:authService"];if(t)return{"2.0.0":}}}P(),E(),I();class D{constructor(e,t){this._consumerUid="",this._configuratorUid="",this._carConfiguratorConfig={},this._navigation=e,this._configProvider=t}shareItemWithCart({config:e,type:t,tenant:r}){var n,i,o,s;this.setCartItem({config:e,type:t,tenant:r});const a=null===(i=null===(n=this._configProvider)||void 0===n?void 0:n.configs)||void 0===i?void 0:i.osoh,c=null==a?void 0:a.customConfig;let u="os:checkout";if("object"==typeof c){const e=null==c?void 0:c.routes;u=null!==(s=null!==(o=null==e?void 0:e[this._consumerUid])&&void 0!==o?o:null==e?void 0:e.default)&&void 0!==s?s:u}const l=this._navigation.navigateTo(u,{},"");null==l||l.push()}getCartItem(e){var t;const r=e||this._configuratorUid;return null!==(t=this._carConfiguratorConfig[r])&&void 0!==t?t:{}}setCartItem(e){const t=this._consumerUid;e&&t&&(this._configuratorUid=t,this._carConfiguratorConfig[t]=e)}onst A={id:"oneshop:share-cart-item-service",dependencies:{featureServices:{"navigation-service":"^1.0.0","service-config-provider":"^1.0.0"}},create:({featureServices:e})=>{const t=e["navigation-service"],r=e["service-config-provider"],n=new D(t,r);return{"1.0.0":e=>(n.consumerUid=e,{featureService:{shareCartItemService:n}})}}};var j,L=s(6005),T=s(6852),k=function(e){var t,r;return r=null===(t=function(e){var t=e||{},r=t.origin,n=t.path,i=void 0===n?"":n;if(r){var o=r.endsWith("/")?r.substring(0,r.length-1):r,s=!i||(null==i?void 0:i.startsWith("/"))?i:"/".concat(i);return new URL("".concat(o).concat(s||""),window.location.origin)}console.warn("The mandatory parameter origin is not provided in the service config provider configuration with ID=".concat(null==e?void 0:e.id,". Please configure it"))}(e))||void 0===t?void 0:t.toString(),(null==r?void 0:r.endsWith("/"))?r.substring(0,r.length-1):r},M=function(e,t,r){if(!e&&!(null==t?void 0:t.origin)&&!r)throw new Error("Can not continue, due to missing path configuration!");s.p=e||function(e){var t=k(e);return t&&"".concat(t,"/")}(t)||r||"/"},F=s(5783);!j||(j={}));var U=x=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),R=N=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},B=function(e){function t(t,r,n,i,o,s){var a=e.call(this,o,n)||this;return a.cartServiceOptions={financialDataService:r,locale:t,queryConnectionService:i,tenantService:n,configProviderService:s},a.migrateCallback=a.migrateCallback.bind(a),a.userSessionService.subscribe(F.K.CookieExchanged,a.migrateCallback),a}return x(t,e),t.prototype.migrateCallback=function(){return R(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return[4,this.merge()];case 1:return e.sent(),[2,Promise.resolve(void 0)]}}))}))},t.prototype.getInstance=function(){return R(this,void 0,void 0,(function(){return N(this,(function(e){return this.getInstancePromise||(this.getInstancePromise=this.getInternalInstance()),[2,this.getInstancePromise]}))}))},t.prototype.getInternalInstance=function(){return R(this,void 0,void 0,(function(){var e,t,r,n,i,o,a;return N(this,(function(c){switch(c.label){case 0:return e=this.cartServiceOptions,t=e.locale,r=e.financialDataService,n=e.tenantService,i=e.queryConnectionService,o=e.configProviderService,this.instance?[3,2]:[4,Promise.all([s.e(4),s.e(0)]).then(s.bind(s,7340))];case 1:a=c.sent().CartService,this.instance=new a(t,r,n,i,o),c.label=2;case 2:return[2,this.instance]}}))}))},t.prototype.addItem=function(e,t){return R(this,void 0,void 0,(function(){return N(this,(function(r){switch(r.label){case 0:return[4,this.getInstance()];case 1:return[2,r.sent().addItem(e,t)]}}))}))},t.prototype.execute=function(e,t,r){return R(this,void 0,void 0,(function(){return N(this,(function(n){switch(n.label){case 0:return[4,this.getInstance()];case 1:return[2,n.sent().execute(e,t,r)]}}))}))},t.prototype.discard=function(e){return R(this,void 0,void 0,(function(){return N(this,(function(t){switch(t.label){case 0:return[4,this.getInstance()];case 1:return[2,t.sent().discard(e)]}}))}))},t.prototype.get=function(){return R(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return[4,this.getInstance()];case 1:return[2,e.sent().get()]}}))}))},t.prototype.getItem=function(e){return R(this,void 0,void 0,(function(){return N(this,(function(t){switch(t.label){case 0:return[4,this.getInstance()];case 1:return[2,t.sent().getItem(e)]}}))}))},t.prototype.merge=function(){return R(this,void 0,void 0,(function(){return N(this,(function(e){switch(e.label){case 0:return[4,this.getInstance()];case 1:return[2,e.sent().merge()]}}))}))},t.prototype.removeItem=function(e){return R(this,void 0,void 0,(function(){return N(this,(function(t){switch(t.label){case 0:return[4,this.getInstance()];case 1:return[2,t.sent().removeItem(e)]}}))}))},t.prototype.subscribe=function(e,t){this.getInstance().then((function(r){return r.subscribe(e,t)})).catch((function(e){return console.error(e)}))},t.prototype.unsubscribe=function(e,t){this.getInstance().then(().catch(()},t.prototype.updateItem=function(e){return R(this,void 0,void 0,(function(){return N(this,(function(t){switch(t.label){case 0:return[4,this.getInstance()];case 1:return[2,t.sent().updateItem(e)]}}))}))},t.prototype.getItemsCount=function(){return R(this,void 0,void 0,()},t}((function(e,t){var r,n=this;this.accessTokens={},this.refreshTenantContext=this.isV1=this.refreshAccessToken=function(){return e=n,t=void 0,i=function(){var e,t,r,n,i,o,s,a,c;return this,(function(u){switch(u.label){case 0:if(!this.isV1(this.userSessionService))return[3,8];this.accessTokens={},u.label=1;case 1:u.trys.push([1,6,7,8]),e=Object.keys(F.a)),t=e.next(),u.label=2;case 2:return t.done?[3,5]:(r=t.value,n=F.a[r],[4,this.userSessionService.getToken(n)]);case 3:i=u.sent(),this.accessTokens=U(U({},this.accessTokens),((c={})[n]=i,c)),u.label=4;case 4:return t=e.next(),[3,2];case 5:return[3,8];case 6:return o=u.sent(),s={error:o},[3,8];case 7:try{t&&!t.done&&(a=e.return)&&a.call(e)}finally{if(s)throw s.error}return[7];case 8:return[2]}}))},new((r=void 0)||(r=Promise))(();var e,t,r,i},this.discardAnonymousSession=this.userSessionService=e,this.userSessionService.subscribe(F.K.LoggedIn,this.refreshAccessToken),this.tenantService=t,null===(r=this.tenantService)||void 0===r||r.subscribe(j.UPDATE,this.refreshTenantContext)})),$=s(4552),V=s(233),H=),G=function(e){eturn H(t,e),Object.defineProperty(t.prototype,"tenant",{get:set:function(e){this.setTenantInStore(e),this.notify(j.UPDATE,this.tenant)},enumerable:!1,configurable:!0}),t.prototype.discardTenant=t.prototype.getTenantFromStore=t.prototype.setTenantInStore=t}(V.Z),K=s(4760),z=s(8156),q=s.n(z);const W=(e,t)=>{const r=e(t);return null==r?q().createElement(q().Fragment,null):q().createElement(K.FeatureAppLoader,{...r,done:()=>t(),onError:()=>t(!1)})};class J{constructor(e){var t,r,n,i;Object.defineProperty(this,"listeners",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"storage",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"connectorStorage",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"faConfigService",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"layerManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"historyService",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sessionStorage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.layerManager=e["layer-manager"],this.historyService=e["s2:history"],this.faConfigService=e["featureapp-service"],this.sessionStorage="undefined"!=typeof sessionStorage?sessionStorage:void 0;const o=null===(t=this.sessionStorage)||void 0===t?void 0:t.getItem("forms-service-faId"),s=null===(r=this.sessionStorage)||void 0===r?void 0:r.getItem("forms-service-primaryForm"),a=null===(n=this.sessionStorage)||void 0===n?void 0:n.getItem("forms-service-sourceApplication");o&&s&&"#reOpenForms"===(null===(i=this.historyService)||void 0===i?void 0:i.history.location.hash)&&this.openForm({faId:o,primaryForm:s,sourceApplication:a||void 0})}getConnector(e){return this.connectorStorage.get(e)}registerConnector(e,t){this.connectorStorage.set(e,t)}unregisterConnector(e){this.connectorStorage.delete(e)}earFormData(e){this.storage.delete(e)}setStepData(e,t,r){var n;const i=this.getOrCreateEntry(e);if(i.get(t)!==r){i.set(t,r);const o={formId:e,formStepId:t,data:r};null===(n=this.listeners.get(e))||void 0===n||n.forEach((e=>e(o)))}}subscribeForm(e,t){const r=this.listeners.get(e)||new Set;return this.listeners.set(e,r.add(t)),penForm(e){var t,r,n,i,o,s,a;if(e.disableAutoOpen?(null===(t=this.sessionStorage)||void 0===t||t.removeItem("forms-service-faId"),null===(r=this.sessionStorage)||void 0===r||r.removeItem("forms-service-primaryForm"),null===(n=this.sessionStorage)||void 0===n||n.removeItem("forms-service-sourceApplication")):(null===(i=this.historyService)||void 0===i||i.history.push("#reOpenForms"),null===(o=this.sessionStorage)||void 0===o||o.setItem("forms-service-faId",e.faId),null===(s=this.sessionStorage)||void 0===s||s.setItem("forms-service-primaryForm",e.primaryForm),e.sourceApplication&&(null===(a=this.sessionStorage)||void 0===a||a.setItem("forms-service-sourceApplication",e.sourceApplication))),!this.layerManager)return[void 0,new Error("Could not access layer manager")];const c={size:"E",userCloseable:!!e.userCloseable,id:"dcc-forms-interaction-layer",onClose:()=>{var e,t,r,n;null===(e=this.historyService)||void 0===e||e.history.push(""),null===(t=this.sessionStorage)||void 0===t||t.removeItem("forms-service-faId"),null===(r=this.sessionStorage)||void 0===r||r.removeItem("forms-service-primaryForm"),null===(n=this.sessionStorage)||void 0===n||n.removeItem("forms-service-sourceApplication")}};try{const t=this.layerManager.openInteractionLayer(W,(u=e,l=this.faConfigService,e=>{var t;const{faId:r}=u,{baseUrl:n,config:i,name:o,serverSrc:s,src:a}=null!==(t=null==l?void 0:l.featureAppConfigurations[r])&&void 0!==t?t:{};if(a)return{baseUrl:n,config:i,featureAppId:r,featureAppName:o,serverSrc:s,src:a,beforeCreate:t=>{const{featureServices:r}=t,{"fa-content-service":n}=null!=r?r:{};n&&(n.content={modeType:"layer",closeLayer:e,...u})}}}),c);return[t]}catch(e){return e instanceof Error?[void 0,e]:[void 0,new Error(e)]}var u,l}}var Y=s(1429),Z=s(8740),Q=s(4479),X=s(2915);const ee=(e,t,r)=>q().createElement(K.FeatureAppLoader,Object.assign(Object.assign({},e),{featureAppName:e.name,featureAppId:e.name,done:e=>{t(!0===e)},onError:)),te="DEALER_TYPE:FAVORITE",re=e=>e.reduce(((e,t)=>(t.type===te?e.preferred.push(t):e.other.push(t),e)),{other:[],preferred:[]}),ne=({brand:e,id:t})=>({brandCode:`VOLKSWAGEN_BRAND:${e}`,dealerId:t,type:te}),ie="v1/customers/__userId__/dealerRelationData";var oe;!oe||(oe={}));const se=class{constructor(e,t,r=console){this.authService=e,this.favoriteDealerService=t,this.logger=r,this.ifMatchVersion="",this.isAuthenticated=!1,e.subscribe("login",(async()=>{this.isAuthenticated=!0})),e.subscribe("logout",(),e.isAuthenticated().then(().catch(r.error)}async getState(){if(!this.isAuthenticated)return oe.NOT_LOGGED_IN;const e=await this.getDealerRelationData();return(t=null==e?void 0:e.dealerRelations)&&(null===(r=re(t))||void 0===r?void 0:r.preferred.length)>0?oe.LOGGED_IN_WITH_PREFERRED_DEALER:oe.LOGGED_IN_NO_PREFERRED_DEALER;var t,r}async setPreferredDealer(e){var t,r;if(!this.authService)throw new Error("No Authservice provided");const n=await this.getDealerRelationData(),i=(null===(t=null==n?void 0:n.dealerRelations)||void 0===t?void 0:t.length)?n.dealerRelations:[],o=re(i);if(o.preferred.length>0)return!1;const s={dealerRelations:[...o.other,ne(e)]},a={"If-Match":this.ifMatchVersion,"Content-Type":"application/json"},c=await this.authService.put("",ie,JSON.stringify(s),a);if(!c.ok)throw new Error(`PUT request failed with code ${c.status} and etag ${this.ifMatchVersion}`);return null===(r=this.favoriteDealerService)||void 0===r||r.notifyChangeOfFavoriteDealer(e),!0}async getDealerRelationData(){if(!this.authService)throw new Error("No Authservice provided");const e=await this.authService.get("",ie,{"Content-Type":"application/json"});if(!e.ok)throw new Error(`GET request failed with code ${e.status}`);var t,r,n,i;return this.ifMatchVersion=(t=(r=e,null!==(i=null!==(n=r.headers.get("ETag"))&&void 0!==n?n:r.headers.get("etag"))&&void 0!==i?i:"0").toLowerCase().replace(/"/g,"")).startsWith("w/")?t.substring(2):t,e.json()}};class ae{constructor(e){this.delegate=e}bscribe(e){return this.delegate.subscribe(()}const ce="mydealer-dealer-id",ue="myDealerId";class le{constructor(e,t,r,n,i){var o,s;this.logger=e,this.serviceConfigProvider=t,this.myDealerConfigurationService=r,this.historyService=n,this.localeService=i,this.callbacks=[],this.isInitialised=!1,this.isOnDealerPage=!1;const a=this.enrichDealerId(null===(s=null===(o=this.myDealerConfigurationService)||void 0===o?void 0:o.initialPageOwnerConfig)||void 0===s?void 0:s.id);a?(this.isOnDealerPage=!0,this.internalSetSelectedDealer(a)):this.setInitialDealer().catch((t=>e.error("could not determine dealer id",t))),this.unsubscribe=null==r?void 0:r.subscribe((e=>{this.isOnDealerPage=Boolean(e),this.isOnDealerPage&&this.setSelectedDealer(this.enrichDealerId(e))}))}hasDealerState(){if(this.isInitialised)return void 0!==this.currentDealer}enrichDealerId(e){var t,r,n,i,o,s,a;if(!e)return;const{brand:c,market:u}=null===(t=this.serviceConfigProvider.configs["mydealer-headless-cms-live"])||void 0===t?void 0:t.customConfig;return{brand:null!==(i=null!==(n=null===(r=this.localeService)||void 0===r?void 0:r.brand)&&void 0!==n?n:c)&&void 0!==i?i:"V",market:null!==(a=null!==(s=null===(o=this.localeService)||void 0===o?void 0:o.market)&&void 0!==s?s:u)&&void 0!==a?a:"DEU",id:e}}getSelectedDealer(){return this.currentDealer}ubscribe(e){return this.callbacks.push(e),()=>{this.callbacks=this.callbacks.filter((t=>t!==e))}}sEqualId(e,t){if(void 0===e&&void 0===t)return!0;if(void 0===e||void 0===t)return!1;const{brand:r,id:n,market:i}=e,{brand:o,id:s,market:a}=t;return n==s&&r===o&&i===a}internalSetSelectedDealer(e){if(this.isEqualId(this.currentDealer,e))return void(this.isInitialised||(this.isInitialised=!0,this.callbacks.forEach((t=>t(e)))));const t=()=>{var t;this.currentDealer=e,this.logger.debug("set dealer id from",this.currentDealer,"to",e),this.persistDealer(e),(null===(t=this.myDealerConfigurationService)||void 0===t?void 0:t.getFeatureToggles().enablePersistDealerState)&&this.persistDealerWithCookies(e,24),this.isInitialised=!0,this.callbacks.forEach((t=>t(e)))};void 0!==e&&this.myDealerConfigurationService?this.myDealerConfigurationService.getDealer(e.id).then((e=>{e?t():this.isInitialised||(this.isInitialised=!0,this.callbacks.forEach(())})).catch(():t()}persistDealer(e){void 0!==e?window.sessionStorage.setItem(ce,e.id):window.sessionStorage.removeItem(ce)}setCookieExp(e){const t=new Date;return t.setTime(t.getTime()+60*e*60*1e3),`expires=${t.toUTCString()}`}getCookie(e){const t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]+)"));return t?t[2]:void 0}persistDealerWithCookies(e,t){document.cookie=void 0!==e?`${ce}=${e.id}; path=/; ${this.setCookieExp(null!=t?t:1)}`:`${ce}=; path=/; ${this.setCookieExp(0)}`}async getMyDealerIdFromLocation(){var e,t,r,n;if("undefined"==typeof window)return;const i=null!==(t=null!==(e=new URLSearchParams(window.location.search).get(ue))&&void 0!==e?e:new URLSearchParams(window.location.search).get(ue.toLowerCase()))&&void 0!==t?t:void 0;return i?null===(n=await(null===(r=this.myDealerConfigurationService)||void 0===r?void 0:r.getDealer(i)))||void 0===n?void 0:n.id:i}updateLocationWithId(e){if(this.logger.debug("updateLocationWithId",e),"undefined"==typeof window)return;const t=window.location,{origin:r,pathname:n,search:i}=t,o=new URLSearchParams(i);if(o.delete(ue),o.delete(ue.toLowerCase()),void 0===e||this.isOnDealerPage||o.set(ue,e.id),this.historyService)this.historyService.rootHistory.replace({search:o.toString()});else{const e=new URL(`${n}?${o.toString()}`,r).toString();t.replace(e)}}async setInitialDealer(){const e=await this.getMyDealerIdFromLocation();if(e)this.internalSetSelectedDealer(this.enrichDealerId(e));else{const e=await this.getValidSelectedDealer();this.internalSetSelectedDealer(e)}}async getValidSelectedDealer(){var e,t;const r=null!==(e=window.sessionStorage.getItem(ce)||this.getCookie(ce))&&void 0!==e?e:void 0;if(r)return this.myDealerConfigurationService?((null===(t=await this.myDealerConfigurationService.getDealer(r))||void 0===t?void 0:t.id)||this.logger.warn("Invalid dealer id",r,"found in session storage, discarding it"),this.enrichDealerId(r)):this.enrichDealerId(r)}}const fe={id:"mydealer-service",optionalDependencies:{featureServices:{"featureapp-service":"^1.0.0","layer-manager":"^1.0.0","locale-service":"^1.2.0","mydealer-configuration-service":"^2.2.0","s2:history":"^2.0.0","s2:logger":"^1.0.0","service-config-provider":"^1.0.0","vw:authService":"^2.0.0","favorite-dealer-service":"^1.0.0"}},create:({featureServices:e})=>{const{"mydealer-configuration-service":t,"s2:history":r,"s2:logger":n=console,"locale-service":i,"service-config-provider":o}=e;if("undefined"==typeof window||!window.sessionStorage)return void n.error(`Feature service ${fe.id} must not be used in SSR`);const s=new le(n,o,t,r,i),a=s.subscribe((t=>{t&&(((e,t)=>{const{"featureapp-service":r,"layer-manager":n,"mydealer-configuration-service":i,"s2:logger":o=console,"vw:authService":s,"favorite-dealer-service":a}=e,c=null==s?void 0:s.register("market");if(!(n&&c&&i&&r))return o.info("can not register",Boolean(c),Boolean(i),Boolean(r)),!1;const u=r.featureAppConfigurations.mydealer_idk_alert,l=r.featureAppConfigurations.mydealer_Alert;!u&&l&&o.warn('Please change feature app name "mydealer_Alert" to "mydealer_idk_alert". Using "mydealer_Alert" for backward compatibility');const f=null!=u?u:l;f?((e,t,r,n,i,o,s)=>{let a;const c=new se(e,s,i),u=()=>{const e=t.getSelectedDealer();(async(e,t,r,n,i,o)=>{if(!(null==o?void 0:o.id))return void n.info("no dealer selected, aborting");const[s,a]=await Promise.all([null==t?void 0:t.getDealer(o.id),e.getState()]);if(n.info("checking if we need to update",s,a===oe.LOGGED_IN_NO_PREFERRED_DEALER,a),s&&a===oe.LOGGED_IN_NO_PREFERRED_DEALER){const t=(t,r)=>{!0===r&&e.setPreferredDealer(o).catch((e=>n.error(`Could not set dealer ${s.id} "${s.displayName}" as preferred dealer`,e)))};return r.openAlert(ee,i,{onClose:t})}})(c,r,n,i,o,e).then(().catch((e=>i.error(e)))};e.isAuthenticated().then((e=>{i.info("user is already logged in"),e&&u()})).catch((),e.subscribe("login",(),e.subscribe("logout",(async()=>{a&&!a.isClosed()&&(null==a||a.close())}))})(c,t,i,n,o,f,a):o.warn('Missing feature app config "mydealer_idk_alert"')})(e,s),a())})),c=new ae(s);return{"1.1.0":()=>({featureService:c}),"1.2.0":()=>({featureService:c}),"2.0.0":()=>({featureService:s}),"2.1.0":()=>({featureService:s})}}},de=(e,t)=>{var r;const n=null!==(r=e.dealerType)&&void 0!==r?r:"FULLSTACK";if("commercial"!==t){switch(n){case"FULLSTACK":return"HS";case"SERVICE_ONLY":return"WS";case"SALES_ONLY":return"HN"}return"HS"}switch(n){case"FULLSTACK":return"HSB";case"SERVICE_ONLY":return"WS";case"SALES_ONLY":return"HNB";case"TRADEPORT":return"NVB"}return"HSB"};class he{constructor(e,t,r,n){var i;this.featureServices=e,this.featureAppConfiguration=t,this.actionId=r,this.marketType=n,this.renderFeatureApp=this.renderFeatureApp.bind(this),this.userinteractionHandler=null===(i=this.featureServices["user-interaction-service"])||void 0===i?void 0:i.register(r,{action:()=>this.openInteractionLayer()}),e["mydealer-service"].subscribe((()=>this.updateHandler())),e["mydealer-configuration-service"].subscribe((()=>this.updateHandler())),this.updateHandler()}unbind(){var e,t,r;null===(e=this.userinteractionHandler)||void 0===e||e.unsubscribe(),null===(t=this.featureServices["user-interaction-service"])||void 0===t||t.unregister(this.actionId),null===(r=this.interactionLayerHandle)||void 0===r||r.close()}updateHandler(){var e;const t=this.featureServices["mydealer-service"],r=null!==(e=this.featureServices["mydealer-configuration-service"].getDealerPageOwner())&&void 0!==e?e:t.getSelectedDealer();this.userinteractionHandler.enabled=void 0!==r}openInteractionLayer(){this.interactionLayerHandle=this.featureServices["layer-manager"].openInteractionLayer(this.renderFeatureApp,{},{size:"A",userCloseable:!0,onClose:),this.trackEvent("VWBasic_DealerLayer_Load")}trackEvent(e){const{"mydealer-configuration-service":t,"mydealer-service":r,"s2:logger":n=console,tracking:i}=this.featureServices;if(!i)return;const o=r.getSelectedDealer();o?t.getDealer(o).then((t=>{t?this.trackExistingDealer(t,i,e):this.trackOnZeroState(i,e)})).catch(():this.trackOnZeroState(i,e)}trackOnZeroState(e,t){e.track(t,{environment:{featureAppId:this.featureAppConfiguration.name},user:{dealerStatus:!1}})}trackExistingDealer(e,t,r){if(!0!==e.trackingDisabled){const{brand:n,market:i}=this.featureServices["locale-service"];t.track(r,{environment:{featureAppId:this.featureAppConfiguration.name},partner:{informationBnr:e.id,informationName:e.displayName,informationType:de(e,this.marketType),informationCountry:i,informationBrand:n},user:{dealerStatus:!0}})}}renderFeatureApp(e,t){return q().createElement(K.FeatureAppLoader,{featureAppId:this.featureAppConfiguration.name,featureAppName:this.featureAppConfiguration.name,...this.featureAppConfiguration,done:t})}onCloseLayer(){this.interactionLayerHandle=void 0,this.trackEvent("VWBasic_DealerLayerClose_Click")}}const ve=("mydealer::open-dealer-state",{id:`open-${"mydealer_dealer-state"}-feature-service`,dependencies:{featureServices:{"featureapp-service":"^1.0.0","layer-manager":"^1.0.0","locale-service":"^1.0.0","mydealer-service":"^1.0.0","mydealer-configuration-service":"^2.0.0","user-interaction-service":"^1.0.0"}},optionalDependencies:{featureServices:{tracking:"^1.0.0"}},create:({featureServices:e})=>{var t,r,n;const i=null===(r=null===(t=e["featureapp-service"])||void 0===t?void 0:t.featureAppConfigurations)||void 0===r?void 0:r["mydealer_dealer-state"];if(!i)return;const o=new he(e,i,"mydealer::open-dealer-state",null===(n=e["locale-service"])||void 0===n?void 0:n.marketType);return{"1.0.0":()=>({featureService:o,unbind:()=>o.unbind()})}}});var pe,ge=s(3606),ye=s.n(ge);!function(e){e.HORIZONTAL="h",e.VERTICAL="v",e.UNKNOWN=""}(pe||(pe={}));class me{constructor(e,t,r,n,i,o){this.environmentData=e,this.provider=t,this.breakPoints=r,this.window=n,this.navigationData=i,this.myDealerTracking=o,this.breakPoints.sort(()}track(e,t,r){const n=Object.assign({eventAction:e,pageId:this.getPageId()},this.navigationData()),i={environment:this.environmentData,user:this.createUserData(),eventInfo:n},o=function(e){return e&&(null==e?void 0:e.featureAppId)?ye()(e,{event:{environment:{featureAppId:e.featureAppId}}}):e}(r);let s=this.myDealerTracking?ye()(t,i,this.myDealerTracking.getMyDealerTrackingPayloadForUserSection()):ye()(t,i);(null==o?void 0:o.event)&&(s=ye()(s,o.event)),this.provider.push(s)}getPageId(){return`${this.window.location.host}${this.window.location.pathname}`}createUserData(){return{browserResolutionBreakpoint:this.getBreakpoint(),browserResolutionHeight:this.window.screen.height.toString(),browserResolutionOrientation:(e=this.window,e.matchMedia?e.matchMedia("(orientation: portrait)").matches?pe.VERTICAL:pe.HORIZONTAL:pe.UNKNOWN),browserResolutionWidth:this.window.screen.width.toString()};var e}getBreakpoint(){if(this.window.matchMedia){const e=this.breakPoints.filter(((e,t)=>t===this.breakPoints.length-1?this.matchMediaQuery(e):!!this.matchMediaQuery(e,this.breakPoints[t+1])));return e.length<=0?"0":String(e[0])}return""}matchMediaQuery(e,t){return t?this.window.matchMedia(`screen and (max-width: ${t}px) and (min-width: ${e}px)`).matches:this.window.matchMedia(`screen and (min-width: ${e}px)`).matches}}class be{constructor(e,t,r){this.delegate=e,t&&r&&(this.featureApp=t.featureAppConfigurations[r])}track(e,t){var r,n,i,o;if(!(null===(i=null===(n=null===(r=this.contextualEventData)||void 0===r?void 0:r.event)||void 0===n?void 0:n.environment)||void 0===i?void 0:i.featureAppId)&&(null===(o=this.featureApp)||void 0===o?void 0:o.trackingId)){const r=ye()(this.contextualEventData,{event:{environment:{featureAppId:this.featureApp.trackingId}}});this.delegate.track(e,t,r)}else this.delegate.track(e,t,this.contextualEventData)}}const Se=(e,t)=>{var r;const n=null!==(r=e.dealerType)&&void 0!==r?r:"FULLSTACK";if("commercial"!==t){switch(n){case"FULLSTACK":return"HS";case"SERVICE_ONLY":return"WS";case"SALES_ONLY":return"HN"}return"HS"}switch(n){case"FULLSTACK":return"HSB";case"SERVICE_ONLY":return"WS";case"SALES_ONLY":return"HNB";case"TRADEPORT":return"NVB"}return"HSB"};class we{constructor(e,t,r,n=console){var i;if(this.myDealerConfigurationService=e,this.localeService=t,this.mydealerService=r,this.logger=n,this.subscribers=[],this.myDealerConfigurationService.initialPageOwnerConfig)this.currentDealer=this.myDealerConfigurationService.initialPageOwnerConfig,this._isOnDealerHome=!0;else if(this.mydealerService){const e=this.mydealerService.getSelectedDealer();this.updateDealerInfo(e)}null===(i=this.mydealerService)||void 0===i||i.subscribe((),this.myDealerConfigurationService.subscribe(()}etMyDealerTrackingPayloadForUserSection(){var e;if(this.currentDealer){const{bnr:e,name:t,type:r}=this.getDealerBaseData(this.currentDealer);return{user:{dealerInformationBnr:e,dealerInformationName:t,dealerInformationType:r,dealerInformationBrand:this.localeService.brand,dealerInformationCountry:this.localeService.market,dealerStatus:!0}}}return{user:{dealerStatus:Boolean(this._isOnDealerHome)||(null===(e=this.mydealerService)||void 0===e?void 0:e.hasDealerState())}}}getMyDealerTrackingPayloadForPartnerSection(){if(!this.currentDealer||!this._isOnDealerHome)return;const{bnr:e,name:t,type:r}=this.getDealerBaseData(this.currentDealer);return{partner:{informationBnr:e,informationName:t,informationType:r,informationBrand:this.localeService.brand,informationCountry:this.localeService.market}}}getCurrentState(){return this.currentDealer}subscribe(e){return this.subscribers.push(e),()=>{this.subscribers=this.subscribers.filter((t=>t!==e))}}getDealerBaseData(e){const{id:t,displayName:r,legalName:n}=e;return{bnr:t,name:null!=n?n:r,type:Se(e,this.localeService.marketType)}}updateDealerInfo(e){var t;this.logger.debug("updateDealerInfo - dealer",e,"current",this.currentDealer),e?(null===(t=this.currentDealer)||void 0===t?void 0:t.id)!==e&&this.myDealerConfigurationService.getDealer(e).then((e=>{e&&(this.logger.debug("setting new dealer",e),this.currentDealer=e),this.subscribers.forEach((t=>t(e)))})).catch(():(this.currentDealer=void 0,this._isOnDealerHome=!1,this.subscribers.forEach(())}}var _e=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Oe=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},Ce=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ie=function(e){function t(t,r,n,i,o){var s=e.call(this)||this;return s.userSessionServiceOptions={authService:r,authServicesSet:n,bffEndpoint:t,authServiceResourceHostId:i,authServiceBffPath:o},s}return _e(t,e),t.prototype.getInstance=function(){return Oe(this,void 0,void 0,(function(){return Ce(this,(function(e){return this.getInstancePromise||(this.getInstancePromise=this.getInternalInstance()),[2,this.getInstancePromise]}))}))},t.prototype.getInternalInstance=function(){return Oe(this,void 0,void 0,(function(){var e,t,r,n,i,o,a;return Ce(this,(function(c){switch(c.label){case 0:return e=this.userSessionServiceOptions,t=e.bffEndpoint,r=e.authService,n=e.authServicesSet,i=e.authServiceResourceHostId,o=e.authServiceBffPath,this.instance?[3,2]:[4,s.e(3).then(s.bind(s,6937))];case 1:a=c.sent().UserSessionServiceV2,this.instance=new a(t,r,n,i,o),c.label=2;case 2:return[2,this.instance]}}))}))},t.prototype.restoreSessionIfNeeded=function(){return Oe(this,void 0,void 0,(function(){return Ce(this,(function(e){switch(e.label){case 0:return[4,this.getInstance()];case 1:return[2,e.sent().restoreSessionIfNeeded()]}}))}))},t.prototype.isLogged=function(){return Oe(this,void 0,void 0,(function(){return Ce(this,(function(e){switch(e.label){case 0:return[4,this.getInstance()];case 1:return[2,e.sent().isLogged()]}}))}))},t.prototype.checkUserStatus=function(){return Oe(this,void 0,void 0,(function(){return Ce(this,(function(e){switch(e.label){case 0:return[4,this.getInstance()];case 1:return[2,e.sent().checkUserStatus()]}}))}))},t.prototype.logIn=function(){return Oe(this,void 0,void 0,(function(){return Ce(this,(function(e){switch(e.label){case 0:return[4,this.getInstance()];case 1:return[2,e.sent().logIn()]}}))}))},t.prototype.logOut=function(e){return Oe(this,void 0,void 0,(function(){return Ce(this,(function(t){switch(t.label){case 0:return[4,this.getInstance()];case 1:return[2,t.sent().logOut(e)]}}))}))},t.prototype.discardAnonymousSession=function(){return Oe(this,void 0,void 0,(function(){return Ce(this,(function(e){switch(e.label){case 0:return[4,this.getInstance()];case 1:return[2,e.sent().discardAnonymousSession()]}}))}))},t.prototype.restoreIdKitIfNeeded=function(){return Oe(this,void 0,void 0,(function(){return Ce(this,(function(e){switch(e.label){case 0:return[4,this.getInstance()];case 1:return[2,e.sent().restoreIdKitIfNeeded()]}}))}))},t}(V.Z),Ee=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(e){o(e)}}function a(e){try{c(n.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},Pe=function(e,t){var r,n,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,n=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},De=function(){eturn e.prototype.getInstance=function(){return Ee(this,void 0,void 0,(function(){return Pe(this,(function(e){return this.getInstancePromise||(this.getInstancePromise=this.getInternalInstance()),[2,this.getInstancePromise]}))}))},e.prototype.getInternalInstance=function(){return Ee(this,void 0,void 0,(function(){var e;return Pe(this,(function(t){switch(t.label){case 0:return this.instance?[3,2]:[4,Promise.all([s.e(4),s.e(2)]).then(s.bind(s,1682))];case 1:e=t.sent().UrqlConnectionService,this.instance=new e(this.ubffEndpoint,this.userSessionService,this.tenantService),t.label=2;case 2:return[2,this.instance]}}))}))},e.prototype.query=function(e){return Ee(this,void 0,void 0,(function(){return Pe(this,(function(t){switch(t.label){case 0:return[4,this.getInstance()];case 1:return[2,t.sent().query(e)]}}))}))},e.prototype.mutate=function(e){return Ee(this,void 0,void 0,(function(){return Pe(this,(function(t){switch(t.label){case 0:return[4,this.getInstance()];case 1:return[2,t.sent().mutate(e)]}}))}))},e.prototype.discardAnonymousSession=function(){var e;return Ee(this,void 0,void 0,(function(){return Pe(this,(function(t){return[2,null===(e=this.instance)||void 0===e?void 0:e.discardAnonymousSession()]}))}))},e.prototype.subscribe=function(e,t){var r;null===(r=this.instance)||void 0===r||r.subscribe(e,t)},e.prototype.unsubscribe=e}(),Ae=s(1192),je=s(5502),Le=s(5219);const Te="appNavId",ke=e=>{const t=/\{([^}]+)\}/;let r=null;const n=[];let i=0,o=0;do{const s=e.substring(o);r=t.exec(s),null!=r?(n[i++]=e.substring(o,o+r.index),n[i++]=r[1],o=o+r.index+r[0].length):n[i]=e.substring(o,e.length)}while(r);return e=>{const t=Object.keys(e),r=Object.values(n).map(((r,n)=>{if(n%2==0)return r;{const n=t.indexOf(r);t.splice(n,1);const i=e[r];return null==i?"":String(i)}})).join("");if(t.length>0){const n=r.includes("?")?"&":"?",i=function(e,t){return e.map((e=>{const r=t[e];return Array.isArray(r)?r.map(().join("&"):`${e}=${r}`})).join("&")}(t,e);return r+n+i}return r}};class Me{ction(e){var t,r,n,i;const o=e[Te],s=null===(t=this.appConfiguration.featureApps)||void 0===t?void 0:t[o],a=null===(r=this.appConfiguration.externalApps)||void 0===r?void 0:r[o],c=null===(n=this.appConfiguration.forms)||void 0===n?void 0:n[o],u=Ue(e,Te);if(s)return null===(i=this.getNavigationTarget(s,u))||void 0===i?void 0:i.push();if(c&&c.formId){const t=c.featureAppName||"Forms";this.formsService.openForm(Object.assign(Object.assign({faId:t,primaryForm:c.formId,disableAutoOpen:this.getBoolean(e.disableAutoOpen,c.disableAutoOpen),sourceApplication:"CMS"},c),e))}else if(a&&a.url){const e=ke(a.url)(u);window.location.assign(e)}}getBoolean(e,t){return void 0!==e?"true"===e:void 0!==t?t:void 0}getNavigationTarget(e,t){const r=ke(e.pathname||"/")(t),[n,i]=r.split("?");return this.navigationService.navigateTo(e.pageId,{[e.featureAppName]:{pathname:n,search:"?"+(i||"")}})}getHref(e){var t,r,n,i;const o=e[Te],s=null===(t=this.appConfiguration.forms)||void 0===t?void 0:t[o],a=null===(r=this.appConfiguration.featureApps)||void 0===r?void 0:r[o],c=null===(n=this.appConfiguration.externalApps)||void 0===n?void 0:n[o],u=Ue(e,Te);return a?null===(i=this.getNavigationTarget(a,u))||void 0===i?void 0:i.createHref():s?"#":c&&c&&c.url?ke(c.url)(u):"#"}class Fe{constructor(e,t,r,n){var i;const o=(null===(i=e.configs["app-navigation"])||void 0===i?void 0:i.customConfig)||{};r.register("cms--app-navigation",new Me(o,t,n))}}function Ue(e,...t){const r=Object.assign({},e);return t.forEach((),r}const xe="cms--app-navigation";function Re(e){return Boolean(null==e?void 0:e.getSelectedDealer())}function Ne(e,t){return{...t,dealerId:e.getSelectedDealer()}}var Be=s(6983),$e=s.n(Be);var Ve=s(5865),He=s.n(Ve);lass Ke{constructor(e,t,r,n,i,o,s){this.logger=e,this.featureAppService=t,this.serviceConfigProvider=r,this.myDealerConfigurationService=n,this.serverRequest=i,this.localeService=o,this.imageService=s,this.store={}}async fetchDealerIcon(e){if(!e)return;const t=this.getStore(e),r=t.dealerIcon;return""===r||r?r||void 0:(t.dealerIcon=this.executeFetchDealerLogo(e),t.dealerIcon)}async executeFetchDealerLogo(e){var t,r,n,i,o,s,a;if(!e)return;const c=this.getStore(e),u=await this.computeFetchOptions(e);if(c.dealerIcon=void 0,u)try{const e=await async function(e){var t;const{baseUrl:r,preview:n}=e,i=function(e,t,r,n){r.sort();const i=e.startsWith("/")?e.substring(1):e,o=(null==t?void 0:t.endsWith("/"))?i:`/${i}`;return`${t||""}${o}${n?"/preview":"/live"}?${r.toString()}`}("/bff/stage",r,function(e){const{debugI18n:t,env:r,oneapiKey:n,dealerId:i,dealerPath:o,dealerType:s,language:a,serviceConfigsServiceConfig:c,preview:u,mockIds:l,cacheDurationInMinutes:f,mocksServerConfig:d}=e,h=new URLSearchParams({dealerId:i,dealerType:s,dealerPath:o,env:r,language:a});return t&&h.set("debugI18n","true"),n&&h.set("oneapiKey",n),c&&h.set("serviceConfigsServiceConfig",c),u&&h.set("preview","true"),h.set("dataversion",function(e,t){const r=new Date;if(e||void 0===t)return r;const n=Math.floor(r.getMinutes()/t)*t;return r.setMinutes(n),r.setSeconds(0),r.setMilliseconds(0),r}(u,f).toISOString()),e.bulkFetch&&h.set("bulkFetch","true"),l&&h.set("mockIds",l),d&&h.set("mocksServerConfig",JSON.stringify(d)),h}(e),n),o=await He()(i,n?{credentials:"include"}:{}),s=await o.json();if(o.status>=400){const e=`${o.status}: ${null!==(t=null==s?void 0:s.message)&&void 0!==t?t:"Error at fetch-stage!"}`;throw new Ge(e,s.bffLoggerCalls)}return s}(u),l=null===(r=null===(t=null==e?void 0:e.section)||void 0===t?void 0:t.model)||void 0===r?void 0:r.dealerIcon;if(!l)throw new Error("stage model or dealerIcon is undefined for the dealer!");return c.dealerIcon=null!==(a=(null===(n=l.scene7Metadata)||void 0===n?void 0:n.scene7File)?null===(i=this.imageService)||void 0===i?void 0:i.getImageURL({contentFile:l.path,scene7File:l.scene7Metadata.scene7File,metaData:{scene7Domain:l.scene7Metadata.scene7Domain,originalHeight:null!==(o=l.height)&&void 0!==o?o:96,originalWidth:null!==(s=l.width)&&void 0!==s?s:96}},96,{scene7ServerMandatory:!0}):l.path)&&void 0!==a?a:"",c.dealerIcon}catch(e){this.logger.warn("Error while fetching dealer logo ",e)}return c.dealerIcon}getStore(e){var t,r;return this.store=null!==(t=this.store)&&void 0!==t?t:{},this.store[e]=null!==(r=this.store[e])&&void 0!==r?r:{},this.store[e]}async computeFetchOptions(e){var t,r,n,i,o;if(!e)return;const s=this.getStore(e),a=s.fetchOptions;if(a)return a;const{id:c,dealerType:u,headlessPath:l}=await(null===(t=this.myDealerConfigurationService)||void 0===t?void 0:t.getDealer(e))||{},{baseUrl:f,apiKey:d,config:h={}}=(null===(r=this.featureAppService)||void 0===r?void 0:r.featureAppConfigurations.mydealer_stage)||{},{mockIds:v,mocksServerConfig:p}=h,g=null===(n=this.localeService)||void 0===n?void 0:n.language;if(!(this.serviceConfigProvider&&f&&c&&l&&g))return;const y=function(e,t){const r=e.configs["service-config"];if(!r)return;const n=function(e,t){return e.urlOrigin?e.urlOrigin:t?new URL(t.url).origin:window.location.origin}(r,t);return JSON.stringify(Object.assign(Object.assign({},r),{urlOrigin:n}))}(this.serviceConfigProvider,this.serverRequest),{mydealerEnv:m,featureToggles:b}=null===(i=this.serviceConfigProvider.configs["mydealer-headless-cms-live"])||void 0===i?void 0:i.customConfig,S={baseUrl:f,bulkFetch:Boolean(null===(o=null==b?void 0:b.enableBulkFetch)||void 0===o||o),cacheDurationInMinutes:10,dealerId:c,dealerPath:l,dealerType:null!=u?u:"FULLSTACK",debugI18n:!1,env:m,language:g,mockIds:v,mocksServerConfig:p,oneapiKey:d,preview:this.isPreview(),serviceConfigsServiceConfig:y};return s.fetchOptions=S,S}isPreview(){var e;return $e()&&(null===(e=this.myDealerConfigurationService)||void 0===e?void 0:e.preview)||!1}}const ze={id:"mydealer-content-service",optionalDependencies:{featureServices:{"featureapp-service":"^1.0.0","s2:logger":"^1.0.0","mydealer-configuration-service":"^2.0.0","locale-service":"^1.0.0","service-config-provider":"^1.0.0","s2:server-request":"^1.0.0","image-service":"^1.0.0"}},create:({featureServices:e})=>{const{"featureapp-service":t,"service-config-provider":r,"mydealer-configuration-service":n,"s2:server-request":i,"locale-service":o,"s2:logger":s=console,"image-service":a}=e,c=new Ke(s,t,r,n,i,o,a);return{"1.0.0":()=>({featureService:c})}}},qe="cms--app-navigation";function We(e){return!Boolean(null==e?void 0:e.getSelectedDealer())}var Je=s(8238);class Ye{constructor(e,t){if(this.history=e,this.logger=t,this.configurationStepMap={},this.availableStepsMap={},this.additionalElementsMountPoint=void 0,this.listeners=new Set,this.mountPointListeners=new Set,this.listenToTheHistory(),e.location.search){const t=this.getConfigStepFromSearchParams(e.location.search);t&&(this.configurationStepMap[t.context]=t.selectedStep)}}etSelectedStep(e,t,r){const n=new URLSearchParams,i={context:e,selectedStep:t};n.set("configStep",JSON.stringify(i)),this.configurationStepMap[e]&&this.configurationStepMap[e]!==t&&"replace"!==r?this.history.push({search:n.toString()}):this.history.replace({search:n.toString()}),this.configurationStepMap[e]=t,this.callListeners(e)}get(e){return this.configurationStepMap[e]}getSelectedStep(e){return this.configurationStepMap[e]}listen(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}etAvailableSteps(e,t,r){this.availableStepsMap[e]={availableSteps:t,additionalButton:r},this.callListeners(e)}tAdditionalElementsMountPoint(){return this.additionalElementsMountPoint}listenToTheHistory(){return this.history.listen((e=>{if(e.search){const t=this.getConfigStepFromSearchParams(e.search);if(t&&this.configurationStepMap[t.context]!==t.selectedStep){const{selectedStep:e,context:r}=t;this.configurationStepMap[r]=e,this.callListeners(r)}}}))}getConfigStepFromSearchParams(e){var t;const r=new URLSearchParams(e);if(!r.has("configStep"))return;let n;try{n=JSON.parse(null!==(t=r.get("configStep"))&&void 0!==t?t:"")}catch(t){this.logger.error("Invalid configStep in URL: ",e)}return n)?n:void this.logger.error("Invalid configStep in URL: ",e)}callListeners(e){for(const t of this.listeners)t(e,this.getSelectedStep(e),this.getAvailableSteps(e))}callMountPointListeners(){for(const e of this.mountPointListeners)e(this.getAdditionalElementsMountPoint())}}const Ze={id:"configuration-step-navigation-service",dependencies:{featureServices:{"s2:history":"^2.0.0"}},optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},create:({featureServices:e})=>{const{"s2:logger":t=console,"s2:history":r}=e,n=new Ye(r.history,t);return{"1.3.0":()=>({featureService:{set:(e,t)=>n.set(e,t),get:e=>n.get(e),listen:e=>n.listen(e),setSelectedStep:(e,t,r)=>n.setSelectedStep(e,t,r),getSelectedStep:e=>n.getSelectedStep(e),setAvailableSteps:(e,t,r)=>n.setAvailableSteps(e,t,r),getAvailableSteps:e=>n.getAvailableSteps(e)}}),"2.0.0":()=>({featureService:{listen:e=>n.listen(((t,r,n)=>e(t,r,null==n?void 0:n.availableSteps))),setSelectedStep:getSelectedStep:e=>n.getSelectedStep(e),setAvailableSteps:getAvailableSteps:getAdditionalElementsMountPoint:setAdditionalElementsMountPoint:e=>n.setAdditionalElementsMountPoint(e),listenAdditionalElementsMountPoint:})}}};var Qe=s(124),Xe=s(7842);const et=[(tt={bffEndpoint:"/",fallbackBaseUrl:"/",legalEntities:{UserDataAccess:"market-online-sales",Generic:"market"}},{create:function(e){var t,r,n,i,o,s,a=e.featureServices,c=e.baseUrl,u=a["gfa:service-config-provider"],l=a["gfa:auth-service"];try{var f=null==u?void 0:u.gfa.oneshopBff,d=k(f)||(null==tt?void 0:tt.bffEndpoint),h=null===(n=null===(r=null==f?void 0:f.customConfig)||void 0===r?void 0:r.authServiceResourceHostIds)||void 0===n?void 0:n.bff,v=null!==(o=null===(i=null==f?void 0:f.customConfig)||void 0===i?void 0:i.authServiceBffPath)&&void 0!==o?o:"";if(!u||!d)throw new Error("Not all dependencies were provided. User session service v2 will not be initialized\n          userSessionService: ".concat(s?"ok":"missing","\n          serviceConfigurationProviderService: ").concat(u?"ok":"missing","\n          "));M(c,null==u?void 0:u.gfa.oneshopGlobalFSBaseurl,null==tt?void 0:tt.fallbackBaseUrl);var p=tt.legalEntities,g=(null==p?void 0:p.Generic)?null==l?void 0:l.register(null==p?void 0:p.Generic):void 0,y=(null==p?void 0:p.UserDataAccess)?null==l?void 0:l.register(null==p?void 0:p.UserDataAccess):void 0,m=y?void 0:g,b=y?((t={})[F.a.Generic]=g,t[F.a.UserDataAccess]=y,t):void 0;s=new Ie(d,m,b,h,v)}catch(e){var S=e instanceof Error?"\n".concat(e.message):"";console.warn("Failed to instantiate UserSessionService v2. ".concat(S))}return s?{"2.0.0":function(){return{featureService:{userSessionService:s}}}}:void 0},id:"oneshop:user-session-service",optionalDependencies:{featureServices:{"gfa:service-config-provider":"^1.0.0","gfa:auth-service":"^2.0.0"}}}),function(e){return{create:function(t){return function(e,t){var r,n=e.featureServices,i=e.baseUrl,o=n["gfa:service-config-provider"],s=(n["oneshop:tenant-service"]||{}).tenantService,a=(n["oneshop:user-session-service"]||{}).userSessionService;try{var c=null==o?void 0:o.gfa.oneshopUbff,u=k(c);if(!(o&&u&&s&&a))throw new Error("Not all dependencies were provided. Urql service will not be initialised\n      queryConnectionService: ".concat(r?"ok":"missing","\n      tenantService: ").concat(s?"ok":"missing","\n      userSessionService: ").concat(a?"ok":"missing","\n      ubffUrl: ").concat(u?"ok":"missing","\n      "));M(i,null==o?void 0:o.gfa.oneshopGlobalFSBaseurl,null==t?void 0:t.fallbackBaseUrl),r=new De(u,a,s)}catch(e){var l=e instanceof Error?"\n".concat(e.message):"";console.warn("Failed to instantiate UrqlService.".concat(l))}return r?{"1.0.0":function(){return{featureService:{queryConnectionService:r}}}}:void 0}({featureServices:t.featureServices,baseUrl:t.baseUrl},e)},optionalDependencies:(t="^2.0.0",{featureServices:{"oneshop:tenant-service":"^1.0.0","oneshop:user-session-service":t,"gfa:service-config-provider":"^1.0.0"}}),id:"oneshop:apollo-service"};var t}({}),function(e){return{create:function(t){var r,n=t.featureServices,i=t.baseUrl,o=n["gfa:service-config-provider"];try{if(!o)throw new Error("Not all dependencies were provided. Tenant service will not be initialised\n          serviceConfigurationProviderService: ".concat(o?"ok":"missing","\n          "));M(i,null==o?void 0:o.gfa.oneshopGlobalFSBaseurl,null==e?void 0:e.fallbackBaseUrl),r=new G}catch(e){var s=e instanceof Error?"\n".concat(e.message):"";console.warn("Failed to instantiate TenantService.".concat(s))}return r?{"1.0.0":function(){return{featureService:{tenantService:r}}}}:void 0},id:"oneshop:tenant-service",optionalDependencies:{featureServices:{"gfa:service-config-provider":"^1.0.0"}}}}({}),function(e){var t,r;return{create:function(t){return function(e,t){var r,n=e.featureServices,i=e.baseUrl,o=n["gfa:service-config-provider"],s=n["gfa:locale-service"],a=n["gfa:financial-data"],c=(n["oneshop:apollo-service"]||{}).queryConnectionService,u=(n["oneshop:tenant-service"]||{}).tenantService,l=(n["oneshop:user-session-service"]||{}).userSessionService;try{if(!(o&&s&&c&&u&&l))throw new Error("Not all dependencies were provided. Cart service will not be initialized\n      localeService: ".concat(s?"ok":"missing","\n      financialService: ").concat(a?"ok":"missing","\n      tenantService: ").concat(u?"ok":"missing","\n      queryConnectionService: ").concat(c?"ok":"missing","\n      userSessionService: ").concat(l?"ok":"missing","\n      serviceConfigurationProviderService: ").concat(o?"ok":"missing","\n      "));M(i,null==o?void 0:o.gfa.oneshopGlobalFSBaseurl,null==t?void 0:t.fallbackBaseUrl),r=new B(s,a,u,c,l,o)}catch(e){var f=e instanceof Error?"\n".concat(e.message):"";console.warn("Failed to instantiate CartService.".concat(f))}return r?{"1.0.0"::void 0}({featureServices:t.featureServices,baseUrl:t.baseUrl},e)},id:"gfa:cart-service",optionalDependencies:{featureServices:(t={},t[null!==(r=null==e?void 0:e.localeServiceId)&&void 0!==r?r:"gfa:locale-service"]="^1.0.0",t["oneshop:apollo-service"]="^1.0.0",t["oneshop:tenant-service"]="^1.0.0",t["oneshop:user-session-service"]="^2.0.0",t["gfa:service-config-provider"]="^1.0.0",t["gfa:financial-data"]="^1.0.1",t)}}}({}),{id:"appointment-selector-service",create:()=>{const t=new e;return{"1.0.0":()=>({featureService:t})}}},(0,r.defineUserLocationManager)(),{id:"financial-data",dependencies:{featureServices:{}},create(){const e=new l(void 0);return{"1.0.1":}},{id:"forms-service",optionalDependencies:{featureServices:{"layer-manager":"^2.4.0","featureapp-service":"^1.3.0","s2:history":"^2.0.0"}},create:({featureServices:e})=>{const t=new J(e);return{"1.2.0":()=>({featureService:t})}}},(0,t.defineDealerSearchService)(),A,I(),E(),P(),L.filterServiceDefinition,T.compareFeatureServiceDefinition,Z.pricePreferencesProviderDefinition,(0,Q.defineFinancingProviderService)(),(0,Y.L)(),fe,{id:"gfa:dealer-context-service",dependencies:{featureServices:{"mydealer-service":"^2.0.0"}},create:e=>{const t=e.featureServices["mydealer-service"];return{"1.0.0":()=>({featureService:t})}}},ze,ve,{id:"tracking",dependencies:{featureServices:{"tracking-service-config":"^1.0.0"}},optionalDependencies:{featureServices:{"featureapp-service":"^1.0.0","mydealer-configuration-service":"^2.1.0","mydealer-service":"^1.2.0","locale-service":"^1.0.0","s2:logger":"1.0.0"}},create(e){const{"tracking-service-config":t,"featureapp-service":r,"locale-service":n,"mydealer-configuration-service":i,"mydealer-service":o,"s2:logger":s=console}=e.featureServices,a=i&&o&&n?new we(i,n,o,s):void 0,c=new me(t.environmentData,t.provider,t.breakPoints,window,t.navigationDataFn,a);return{"1.0.0":(e,t)=>({featureService:new be(c,r,t)})}}},Ae.featureAppMemoryStoreDefinition,je.modelSelectionServiceDefinition,Le.featureFlagServiceDefinition,{id:"app-navigation-interactions",optionalDependencies:{featureServices:{"s2:logger":"^1.0.0"}},dependencies:{featureServices:{"user-interaction-service":"^2.0.0","service-config-provider":"^1.0.0","navigation-service":"^1.0.0","forms-service":"^1.0.0"}},create:e=>{const{"user-interaction-service":t,"service-config-provider":r,"navigation-service":n,"forms-service":i}=e.featureServices,o=new Fe(r,n,t,i);return{"1.0.0":()=>({featureService:o})}}},{id:"mydealer-app-navigation-interactions",dependencies:{featureServices:{"user-interaction-service":"^2.0.0","mydealer-service":"^1.0.0"}},optionalDependencies:{featureServices:{tracking:"^1.0.0"}},create:({featureServices:e})=>{const t=e["user-interaction-service"],r=e["mydealer-service"],n=t.register("mydealer--app-navigation",function(e,t){return{action(r){e.get(xe).onActivate(Ne(t,r))},getHref:r=>e.get(xe).getHref(Ne(t,r))}}(t,r));return n.enabled=Re(r),r.subscribe((()=>{n.enabled=Re(r)})),{"1.0.0":{featureService:{}}}}},{id:"mydealer-zero-state-app-navigation-interactions",dependencies:{featureServices:{"user-interaction-service":"^2.0.0","mydealer-service":"^1.0.0"}},optionalDependencies:{featureServices:{tracking:"^1.0.0"}},create:({featureServices:e})=>{const t=e["user-interaction-service"],r=e["mydealer-service"],n=t.register("mydealer--zero-state-app-navigation",function(e){return{actiongetHref:}(t));return n.enabled=We(r),r.subscribe((),{"1.0.0":{featureService:{}}}}},Je.d,Ze,Qe.Jy,Xe.faInLayerDefinition,X.favoriteDealerFeatureServiceDefinition];var tt})(),a})()));
//# sourceMappingURL=client-bundle-v0.75.0.js.map