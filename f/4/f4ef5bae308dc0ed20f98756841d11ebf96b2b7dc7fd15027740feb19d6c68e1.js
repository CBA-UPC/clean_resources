"use strict";(self.webpackChunkWPS_Drive=self.webpackChunkWPS_Drive||[]).push([[374],{44142:function(e,t,r){r.r(t),r.d(t,{default:function(){return O}});var n=r(49200),o=r(37311),i=r(2406),c=r.n(i),u=r.p+"s1/static/images/8901bb4d1261f271d333.svg",a=r(47189),p=r(19731),s=r(82041),l=r(73224),d=r(52184);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y="group_position",b={creator:"group_owner",manager:"group_admin",admin:"group_admin",member:"group_member",read_member:"group_member"},g=function(e){return{content:e.policy.position_label,source:e.utmSource,company_id:e.companyId,group_id:e.groupId,role:b[e.teamRole],user_id:e.user.id,position:e.windowKey,policy_id:e.policy.policy_id,task_id:e.policy.task_id}},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.content,n=t.source,o=t.company_id,i=t.role,c=t.user_id,u=t.group_id,a=t.position,p=t.policy_id,l=t.task_id,d={operation:e,content:r,source:n,company_id:o,role:i,user_id:c,group_id:u,position:a,policy_id:p,task_id:l},f={click:m({},d),show:m({},d),close:m({},d),button_click:m(m({},d),{},{button_name:t.button_name}),button_show:m(m({},d),{},{button_name:t.button_name})};f[e]&&(0,s.Vl)(y,f[e])};r w={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"k-operationBannerRight",style:{backgroundImage:"url("+e.policy.group_right_pic+")"},on:{click:e.onShowDialog}},[r("div",{staticClass:"k-operationBannerRight-close",on:{click:},[r("img",{staticClass:"close",attrs:{src:e.circleCloseBgIcon}})])])},staticRenderFns:[],name:"KOperationBannerRight",components:{},props:{windowKey:{type:String,default:"group_right"},companyInfo:{type:Object,require:!0,default:function(){return{}}},userRole:{type:[String,Number],require:!0},user:{type:Object,default:require:!0},groupId:{type:[String,Number],default:""},teamRole:{type:[String,Number],require:!0}},data:computed:{companyId:utmSource:buttonObj:function(){var e=JSON.parse(this.policy.group_right_click||"[]");return e.length&&e[0]}},mounted:methods:{reqPolicy:function(){var e=this;return(0,o.Z)(c().mark((function t(){var r,n,o,i,u,p,s;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,a.SPt)({window_key:e.windowKey,company_id:e.companyId,group_id:e.groupId,utm_medium:e.windowKey,utm_source:e.utmSource});case 2:if(u=t.sent,p=(null==u||null===(r=u.data)||void 0===r?void 0:r.task_id)||""){t.next=6;break}return t.abrupt("return");case 6:if(s=(null==u||null===(n=u.data)||void 0===n?void 0:n.data)||[],e.policy=s.reduce((,{policy_id:null!==(o=null==u||null===(i=u.data)||void 0===i?void 0:i.policy_id)&&void 0!==o?o:"",task_id:p}),(0,d.U)(e.windowKey,e.policy.close_time)){t.next=10;break}return t.abrupt("return");case 10:return t.next=12,e.checkAppExist();case 12:t.sent&&(e.$emit("show",e.policy),_("show",v({},g(e))));case 14:case"end":return t.stop()}}),t)})))()},checkAppExist:function(){var e=this;return(0,o.Z)(c().mark((function t(){var r,n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("openApp"!==(r=e.buttonObj).type||!r.appId){t.next=12;break}return t.prev=2,t.next=5,(0,l.B)(r.appId);case 5:return n=t.sent,t.abrupt("return",!!n);case 9:return t.prev=9,t.t0=t.catch(2),t.abrupt("return",!1);case 12:return t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,null,[[2,9]])})))()},onShowDialog:function(){this.buttonObj&&(this.$emit("showDialog",v(v({},this.buttonObj),{},{policyId:this.policy.policy_id,taskId:this.policy.task_id}),this.policy.position_label),_("click",v({},g(this))))},onClose:function(){this.$emit("close",this.policy.position_label),_("close",v({},g(this))),(0,d.M)(this.windowKey)}},install:,O=w},73224:function(e,t,r){r.d(t,{B:function(){return u}});var n=r(37311),o=r(2406),i=r.n(o),c=r(26786);unction a(){return(a=(0,n.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,c.ZP)({method:"common.plugin.getAppInfo",params:{pluginName:t}});case 3:return r=e.sent,e.abrupt("return",r&&r.pluginName);case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}},52184:function(e,t,r){r.d(t,{M:function(){return o},U:);var n=o=function(e){var t=n(e);localStorage.setItem(t,(new Date).getTime())},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"3",r=n(e),o=Number(localStorage.getItem(r)),i=24*Number(t)*60*60*1e3;return!o||(new Date).getTime()>o+i}}}]);
