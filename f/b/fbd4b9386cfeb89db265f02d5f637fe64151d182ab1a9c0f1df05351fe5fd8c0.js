!function(e){function t(t){for(var n,i,o=t[0],a=t[1],s=0,u=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);for(c&&c(t);u.length;)u.shift()()}var n={},r={11:0};function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,i){n=r[e]=[t,i]}));t.push(n[2]=o);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(e){return i.p+""+({}[e]||e)+".js"}(e);var c=new Error;a=function(t){s.onerror=s.onload=null,clearTimeout(u);var n=r[e];if(0!==n){if(n){var i=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,n[1](c)}r[e]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i.oe=function(e){throw console.error(e),e};var o=window.wpJsonpExCoAdPlayer=window.wpJsonpExCoAdPlayer||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var c=a;i(i.s=117)}({0:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var r=function(){function e(){this._loggers=[]}return e.prototype.addLogger=function(e){var t;Array.isArray(e)?(t=this._loggers).push.apply(t,e):this._loggers.push(e)},e.prototype.removeLogger=function(e){var t=this._loggers.indexOf(e);t>-1&&this._loggers.splice(t,1)},e.prototype.log=function(e,t){this._loggers.forEach((function(n){return n.log(e,t)}))},e.prototype.error=function(e,t){this._loggers.forEach((function(n){return n.error(e,t)}))},e.prototype.info=function(e,t){this._loggers.forEach((function(n){return n.info(e,t)}))},e.prototype.warn=function(e,t){this._loggers.forEach((function(n){return n.warn(e,t)}))},e.prototype.debug=function(e,t){this._loggers.forEach((function(n){return n.debug(e,t)}))},e.prototype.trace=function(e,t){this._loggers.forEach((function(n){return n.trace(e,t)}))},e}(),i=n(2),o=function(){function e(e){var t=(void 0===e?{}:e).level;this.PREFIX="[exco:ap]",this._level=i.a.NONE,this._level=null!=t?t:i.a.NONE}return e.prototype.error=function(e,t){var n;this._level>=i.a.ERROR&&this._print("error",e||(null==t?void 0:t.message)||(null===(n=null==t?void 0:t.error)||void 0===n?void 0:n.message),t)},e.prototype.warn=function(e,t){this._level>=i.a.WARN&&this._print("warn",e,t)},e.prototype.log=function(e,t){this._level>=i.a.LOG&&this._print("log",e,t||{})},e.prototype.info=function(e,t){this._level>=i.a.INFO&&this._print("info",e,t)},e.prototype.debug=function(e,t){this._level>=i.a.DEBUG&&this._print("debug",e,t)},e.prototype.trace=function(e,t){this._level>=i.a.TRACE&&this._print("trace",e,t)},e.prototype._print=function(e,t,n){window.console[e]("".concat(this.PREFIX," ").concat(t),n)},e}(),a=new r;function s(e){window.location.search.includes("expd=1")&&a.addLogger(new o({level:i.a.ALL})),e.logger&&a.addLogger(e.logger)}t.a=a},1:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var r,i=function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},o=i(i({},{AD:{ANY:"ad.*",INIT:"ad.init",STARTED:"ad.started",PLAYING:"ad.playing",TIME_UPDATE:"ad.time-update",IMPRESSION:"ad.impression",PROGRESS:"ad.progress",FIRST_QUARTILE:"ad.first-quartile",MIDPOINT:"ad.midpoint",THIRD_QUARTILE:"ad.third-quartile",COMPLETED:"ad.completed",CLICKED:"ad.clicked",SKIPPED:"ad.skipped",VIDEO_CLICKED:"ad.video-clicked",ERROR:"ad.error",VIEWABILITY:"ad.viewability",XML_PARSED:"ad.xml-parsed"},CONTENT:{ANY:"content.*",START:"content.start",RESUMED:"content.resumed",SKIPPED:"content.skipped",COMPLETED:"content.completed"},PLAYER:{ANY:"player.*",INIT:"player.init",LOAD:"player.load",MUTED:"player.muted",UNMUTED:"player.unmuted",PLAYING:"player.playing",PAUSED:"plauer.paused",CLOSED:"player.closed",SLOT_START:"player.slot-start",SLOT_END:"player.slot-end",IN_VIEW:"player.in-view",OUT_OF_VIEW:"player.out-of-view",FIRST_VIEW:"player.first-view",CTA_CLICKED:"player.cta-clicked",AUTOPLAY_BLOCKED:"player.autoplay-blocked",ACTION:{CLOSE:"player.action.close",PAUSE:"player.action.pause"}},STICKY:{CLOSED:"sticky.closed",OPENED:"sticky.opened",ACTION:{CLOSE:"sticky.action.close",HIDE:"sticky.action.hide"}},PLUGIN:{ANY:"plugin.*",EVENT:"plugin.event",ENABLED:"plugin.enabled",AUCTION:"plugin.auction",ACTION:{AUCTION:"plugin.action.auction"}}}),{INTERNAL:{CONTENT:{START:"internal.content.start",PLAYING:"internal.content.playing"},AD:{FETCHED:"internal.ad.fetched",INIT:"internal.ad.init",SLOT_END:"internal.ad.slot-end",UPCOMING_SLOT:"internal.ad.upcoming-slot",PAUSE_FOR_CONTENT:"internal.ad.pause-for-content"},AUCTION:{END:"internal.auction.end"}},EXTERNAL:{CONTENT:{START:"external.content.start"},AD:{INIT:"external.ad.init"}}}),a=function(e){return r||(r=e),r}},117:function(e,t,n){"use strict";n.r(t);n(17);var r=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function i(e,t,n){return null!=e?e:null!=t?t:n}function o(e,t,n){return void 0!==e?e:void 0!==t?t:n}function a(e,t){return null!=e?t(e):e}function s(e,t){if(Array.isArray(e))return e.length>0;if(e&&"object"==typeof e){var n=!1;return d((function(){return n=!0}),e),n}if("string"==typeof e){if(!isNaN(e))return!!+e;if(t)switch(e.toLowerCase()){case"true":return!0;case"false":return!1;default:return null}}return!!e}var c=function(e){return null!=e},u=function(e){return void 0!==e},l=function(e){return s(e)};function d(e,t){if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function p(e,t,n,r){if(null==n||null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(n),o=0,a=Array.isArray(r)?r:[r];o<a.length;o++){d((function(n,r){(!0===t||t(n,r,i))&&(!0===e||e.indexOf(r)>=0)&&(i[r]=n)}),a[o])}return i}function f(e,t,n){return p(!0,e,t,n)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return p(!0,!0,e,t)}function v(e,t){return null==e||""===e?o(t,u(e)?null:void 0):i(s(e,!0),t,null)}function m(e,t){return null==e||""===e?o(t,u(e)?null:void 0):isNaN(e)?o(t,null):+e}function y(e,t){return null==e?o(t,e):""+e}function g(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];for(var i={},o=0,a=n;o<a.length;o++)for(var s=a[o],c=0,u=s;c<u.length;c++){var l=u[c],d="function"==typeof t?t(l):l[t];null!=d&&(i[d]=f(e,i[d]||{},l))}return Object.keys(i).map((function(e){return i[e]}))}var A=function(){function e(e){void 0===e&&(e=1/0),this.msec=e,this.startedAt=null,this.elapsed=null}return e.delay=function(t,n){void 0===t&&(t=0);var r="function"==typeof t?t:n;return new e("number"==typeof t?t:0).start().then(r).catch((function(){}))},e.Seconds=function(t){return new e(1e3*t)},e.prototype.cancel=function(){this.resolve=null,this.pause(),this.reject&&(this.reject({cancelled:!0}),this.reject=null)},e.prototype.reset=function(e){return this.pause(),this.msec=e,this},e.prototype.Seconds=function(e){return this.reset(1e3*e)},e.prototype.start=function(){this.cancel();var e=this.hold();return this.timerId=setTimeout(this.resolve,this.msec),this.startedAt=Date.now(),this.elapsed=0,e},e.prototype.pause=function(){null!=this.timerId&&(clearTimeout(this.timerId),this.timerId=null,null!=this.startedAt&&(this.elapsed=(this.elapsed||0)+Math.max(0,Date.now()-this.startedAt)),this.startedAt=null)},e.prototype.resume=function(){this.rewind(Math.max(0,this.msec-(this.elapsed||0)))},e.prototype.hold=function(e){var t=this;return new Promise((function(e,n){t.resolve=e,t.reject=n})).then((function(){return t.pause()})).then(e)},e.prototype.rewind=function(e){this.pause(),this.resolve&&(this.timerId=setTimeout(this.resolve,null!=e?e:this.msec),this.startedAt=Date.now())},e.prototype.trigger=function(){this.reject=null,this.resolve&&this.resolve(),this.cancel()},e}(),b=function(){this.demandMaxAdStarts=null,this.initVpaidOnStart=!1,this.expectedSureFastStart=null,this.iframeSlot=!0,this.impressionOnlyWithVideoStart=!1,this.suggestedDuration=10,this.useIMA=null,this.isVidible=!1,this.vastPreferType=null,this.vpaidUseJSV=!0,this.moat=null,this.intent=!1},E=function(e,t,n,r){void 0===r&&(r=c),this.parser=e,this.parName=t,this.prio=n,this.filter=r},_={type:new E(y,"type"),adContent:new E((function(e){return e}),"adContent"),allowLongImpressions:new E(v,"ali",(function(e,t){return e&&t})),clickText:new E(y,"actext"),clickTextEnabled:new E(v,"actcall"),controlBar:new E(v,"co"),initVpaidOnStart:new E(v,"initVpaidOnStart"),demandMaxAdStarts:new E(m,"dmas",Math.min),enableAdUI:new E(v,"adui"),expectedSureFastStart:new E(v,"sff"),iframeSlot:new E(v,"ifsl"),impressionOnlyWithVideoStart:new E(v,"strictImp"),interactive:new E(v,"interactive"),isVidible:new E(v,"vidible"),keepAlive:new E(m,"ka",Math.min),sandbox:new E(v,"sb"),skipOffset:new E(m,"skipOffset",Math.min),suggestedDuration:new E(m,"sdur",Math.min),useIMA:new E(v,"IMA"),vastPreferType:new E(m,"vt"),viewableOnStart:new E(v,"vos"),vpaidUseJSV:new E(v,"vjsv"),moat:new E((function(e){return e}),"moat",(function(e,t){return h({},t,e)})),impDetail:new E(v,"impDetail"),reqLimit:new E(m,"reqLimit"),stopAdsOnImpression:new E(v,"stopAdsOnImpression"),requireViewability:new E(v,"vb")};function w(e){return"[object String]"===Object.prototype.toString.call(e)}function T(e){return"[object Array]"===Object.prototype.toString.call(e)}function I(e){return T(e)?e.slice():e?[e]:[]}function S(e){return"object"==typeof e&&null!==e&&!1===T(e)&&e.constructor&&"Object"===e.constructor.name}function O(e){return e&&(((new Date).getTime()-e)/1e3).toFixed(1)}function C(e,t,n){try{var r=document.createElement("script"),i=document.getElementsByTagName("head")[0]||document.documentElement;r.setAttribute("type","text/javascript"),t&&(r.async=!0),r.src=e,n&&r.addEventListener("load",n),i.appendChild(r)}catch(e){}}function k(e,t){return void 0===e&&(e=null),void 0===t&&(t=1),new Promise((function(n,r){try{var i=document.createElement("iframe");i.style.display="none",e&&(i.src=e),i.onerror=function(e){return r(e)};var o=setTimeout((function(){return n(i)}),1e3*t);i.onload=function(){clearTimeout(o),n(i)},document.body.appendChild(i)}catch(e){r(e)}}))}var P,D={onLoadedFuncs:[]};function R(e,t,n,r){void 0===r&&(r=!1);var i=document.getElementsByTagName("head")[0]||document.documentElement;if(!r||(D.onLoadedFuncs[e]=D.onLoadedFuncs[e]||[],n&&D.onLoadedFuncs[e].push(n),!document.getElementById(e))){var o=document.createElement("script");o.setAttribute("type","text/javascript"),o.id=e,o.onload=function(){if(r)for(;D.onLoadedFuncs[e].length;)D.onLoadedFuncs[e].shift()();else n()},o.src=t(),i.appendChild(o)}}function L(e){if(e.length>1)for(var t=e.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[n];e[n]=e[t],e[t]=r}return e}function x(e,t){if(e.find)return e.find(t);for(var n=0,r=e;n<r.length;n++){var i=r[n];if(t(i))return i}}function N(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function j(e,t,n){try{var r=new URL(e);return null===n?r.searchParams.delete(t):r.searchParams.set(t,n),r.toString()}catch(e){}return e}function U(e,t){return Object.keys(t).forEach((function(n){S(e[n])&&S(t[n])?U(e[n],t[n]):e[n]=t[n]})),e}function V(e){try{if(e&&0===e.protocol.indexOf("file"))return!0;if(document&&document.location&&0===document.location.protocol.indexOf("file"))return!0;if(window.location&&0===window.location.protocol.indexOf("file"))return!0;if(location&&0===location.protocol.indexOf("file"))return!0}catch(e){return!0}return!1}function M(){var e="";try{if(parent!==window){e=document.referrer;var t=window.location.ancestorOrigins;if(t){var n=t[t.length-1];n&&e.substring(0,n.length)!=n&&(e=n)}}else e=top.location.href}catch(e){}return e}function F(e,t){var n=[];for(var r in e)if(e.hasOwnProperty(r)&&void 0!==e[r]&&"function"!=typeof e[r]){var i=String(e[r]);r&&r.length&&i.length?n.push([r,H(i)].join("=")):r&&r.length?n.push(r+"="):i&&i.length&&n.push(i)}return t||n.push("cb="+(new Date).getTime().toFixed(0)),n.join("&")}function B(e,t){var n=F(t),r=-1==e.indexOf("?")&&n.length>0?"?":"";return[e,r,n].join("")}function q(e){try{e=decodeURIComponent(e)}catch(t){try{e=unescape(e)}catch(e){}}return e}function H(e){try{e=encodeURIComponent(e)}catch(t){try{e=escape(e)}catch(e){}}return e}function W(e,t,n){return t&&t.trim&&t.replace?(t=t.trim(),"https:"==e.toLowerCase()&&(t=t.replace(/^http:/i,"https:")),V(n)&&(t=t.replace(/^\/\//,e+"//")),t):t}function G(e,t){if(void 0===t&&(t=window),!e)return e;if(/\w+:\/\//.exec(e))return e;var n=t.location.protocol;try{n=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?n+e:"".concat(n,"//").concat(e)}function J(e,t){var n=void 0===t?{}:t,r=n.noLeadingWww,i=void 0!==r&&r,o=n.noPort,a=void 0!==o&&o;try{e=new URL(G(e))}catch(e){return}return e=a?e.hostname:e.host,i&&e.startsWith("www.")&&(e=e.substring(4)),e}function Y(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}function z(e,t){return e.context&&e.context.sourceUrl&&(t=!0),t}function X(e,t){return e&&(t=e),t}function K(e,t,n,r){return Z(e,t)&&(n=!0,r=function(e,t){return t=X(function(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}(e.document),t)}(e,r)),{reachedTop:n,bestCanonicalUrl:r}}function Q(e,t,n){return e&&!t&&(n=e),n}function Z(e,t){return e===t.top}function $(e,t,n,r,i,o){return!e&&t&&t[n-1]&&(e=t[n-1],r=Z(i,o)),{foundLocation:e,hasTopLocation:r}}function ee(e,t){var n=new URL(e);return Object.entries(t).forEach((function(e){var t=e[0],r=e[1];n.searchParams.append(t,r)})),n.toString()}var te,ne,re=7e3;!function(e){e[e.E_REQUEST=1]="E_REQUEST",e[e.E_LOADED=2]="E_LOADED",e[e.E_MIDS=3]="E_MIDS",e[e.E_END=4]="E_END",e[e.E_ADSTART=5]="E_ADSTART",e[e.E_ADSTART_WO_IMPRESSION=6]="E_ADSTART_WO_IMPRESSION",e[e.E_CLICK=7]="E_CLICK",e[e.E_VAST_ERROR=8]="E_VAST_ERROR",e[e.E_ACTUAL_REQUEST=9]="E_ACTUAL_REQUEST",e[e.E_START=10]="E_START",e[e.E_SERVED_AND_START=11]="E_SERVED_AND_START",e[e.E_CONTENT_CLICK=12]="E_CONTENT_CLICK",e[e.E_ADPLAYED=13]="E_ADPLAYED",e[e.E_SCHEDULED=14]="E_SCHEDULED",e[e.E_DETECTED=15]="E_DETECTED",e[e.E_PLAYER_ERROR=16]="E_PLAYER_ERROR",e[e.E_SUBMIT_DEBUG_LOG=17]="E_SUBMIT_DEBUG_LOG",e[e.E_CLIENT_EVENT=18]="E_CLIENT_EVENT",e[e.E_AD_SKIPPED=19]="E_AD_SKIPPED"}(te||(te={})),function(e){e[e.Video=0]="Video",e[e.FlashVpaid=1]="FlashVpaid",e[e.JsVpaid=3]="JsVpaid",e[e.ImaJs=4]="ImaJs",e[e.FlashJsVpaid=5]="FlashJsVpaid",e[e.Spotx=6]="Spotx"}(ne||(ne={}));var ie=((P={})[te.E_REQUEST]={url:"/vpx/requesti"},P[te.E_LOADED]={url:"/vpx/loadedi"},P[te.E_MIDS]={url:"/vpx/midsi"},P[te.E_END]={url:"/vpx/endi",immediate:!0},P[te.E_ADSTART]={url:"/vpx/starti",immediate:!0},P[te.E_ADSTART_WO_IMPRESSION]={url:null,immediate:!0},P[te.E_CLICK]={url:"/vpx/click",immediate:!0},P[te.E_VAST_ERROR]={url:"/vpx/errori",immediate:!1},P[te.E_START]={url:"/ppx/starti"},P[te.E_SERVED_AND_START]={url:"/ppx/served_and_starti"},P[te.E_ADPLAYED]={url:"/ppx/adplayedi"},P[te.E_SCHEDULED]={url:null},P[te.E_DETECTED]={url:null},P[te.E_PLAYER_ERROR]={url:"/ppx/errori"},P[te.E_CONTENT_CLICK]={url:null},P[te.E_ACTUAL_REQUEST]={exclude:!0,server:"a",url:"/areq"},P[te.E_SUBMIT_DEBUG_LOG]={exclude:!0,url:"sdl"},P[te.E_CLIENT_EVENT]={exclude:!0,url:"/lpx/v1"},P);var oe={subid:"sid",domain:"domain",domainDetected:"dd",widthDetected:"wd",heightDetected:"hd",sessionId:"se",playerVersion:"pv",timeFromStart:"s",flashSupport:"f",detect:"sa",vastId:"v",playerId:"p",demandId:"dmid",memUsed:"m",time:"t",time2:"t2",duration:"d",quartile:"qd",gpvTime:"gt",fpwReadyTime:"ft",domReadyTime:"dt",gpvM:"gm",roundNo:"r",gpvOrdNo:"gpvn",totalMemS:"tm",vastType:"y",actualVastType:"yy",state:"st",gpvAttempt:"ga",errorCode:"en",errorMessage:"em",mediaURL:"mu",logStartRequest:"ls",logLoadRequest:"lr",cedatoxPlayerId:"cxp",cedatoxVastId:"cxv",chosenVastId:"cv",parentPlayerId:"pp",retryTestGroup:"rtg",gpvCookie:"gpvck",cookie:"ck",eventCookie:"evck",pricing:"pricing",currency:"currency",impType:"impType"},ae=["playerId","vastId","demandId"],se=["cedatoxPlayerId","cedatoxVastId","chosenVastId","parentPlayerId"],ce=["eventCookie","subid","domain","sessionId","playerVersion","domainDetected","gpvCookie","detect"],ue=ce.concat(["timeFromStart"]);function le(e,t,n){for(var r=0,i=e.length;r<i;r++)if(void 0!==t[e[r]]&&null!==t[e[r]])switch(e[r]){case"flashSupport":n[e[r]]=t[e[r]]?"1":"0";break;default:n[e[r]]=t[e[r]]}}function de(e,t,n,r){le(e,t,r),le(e,n,r)}function pe(e){var t={};for(var n in e)e.hasOwnProperty(n)&&void 0!==oe[n]&&"function"!=typeof oe[n]&&(t[oe[n]]=e[n]);return t}function fe(e,t){for(var n in t)t.hasOwnProperty(n)&&null!=oe[n]&&"function"!=typeof oe[n]&&e.push([n,String(t[n])].join("="))}function he(e,t,n,r){if(t&&te[t]){var i=ie[t];i&&i.url&&!i.exclude&&function(e,t,n,r,i){var o=n.url,a=n.immediate,s=n.server;try{var c=a,u=e||{};r=r||{},i=i||{};var l=[];fe(l,u),fe(l,r),fe(l,i);var d=O(e.startTime),p={name:o.substring(o.lastIndexOf("/")+1),common:{},extra:{}};switch(de(ue,u,{},p.common),p.common.timeFromStart=d,t){case te.E_REQUEST:de(ae.concat(se),r,i,p.extra);break;case te.E_LOADED:de(["memUsed","time","vastType","actualVastType"].concat(ae,se),r,i,p.extra),c=c||null!=r&&null!=r.chosenVastId;break;case te.E_MIDS:de(["duration","quartile"].concat(ae,se),r,i,p.extra);break;case te.E_END:de(["duration"].concat(ae,se),r,i,p.extra);break;case te.E_CLICK:de(ae.concat(se),r,i,p.extra);break;case te.E_ADSTART:de(["time","roundNo","gpvOrdNo","vastType","actualVastType","retryTestGroup","cookie","widthDetected","heightDetected","pricing","currency","impType"].concat(ae,se),r,i,p.extra);break;case te.E_ADSTART_WO_IMPRESSION:de(ae.concat(se),r,i,p.extra);break;case te.E_VAST_ERROR:de(["errorCode","errorMessage","mediaURL","logStartRequest","logLoadRequest","time"].concat(ae,se),r,i,p.extra);break;case te.E_START:case te.E_SERVED_AND_START:de(["playerId"],u,i,p.extra);break;case te.E_SCHEDULED:de(["playerId","fpwReadyTime","gpvTime","domReadyTime","gpvM","gpvAttempt"],u,i,p.extra),p.extra.time=d;break;case te.E_DETECTED:de(["playerId","widthDetected","heightDetected"],u,i,p.extra);break;case te.E_ADPLAYED:de(["playerId","gpvOrdNo"],u,i,p.extra),p.extra.time=d;break;case te.E_CONTENT_CLICK:de(["playerId"],u,i,p.extra);break;case te.E_PLAYER_ERROR:de(["playerId"],u,i,p.extra),de(["errorCode","errorMessage"],r,i,p.extra)}var f=o.substring(0,o.lastIndexOf("/")),h=e.serverHost(s||e.eventServer)+f;if("/ppx"==f)return void ve(e,h,p);if("/vpx"!=f)return;var v=function(){return function e(t,n){if(n){var r=t.eventsQueue[n].events;if(r.length){r.length;try{t.sendStringParams({url:[n,"/multiple-events"].join(""),params:me(r),usePost:1==t.multipleEventMethod})}catch(e){}}t.eventsQueue[n].events=[]}else for(var i in t.eventsQueue)t.eventsQueue.hasOwnProperty(i)&&e(t,i)}(e,h)};e.eventsQueue[h]?(e.eventsQueue[h].events.length>=7&&(e.eventsQueue[h].timer.cancel(),v()),e.eventsQueue[h].events.push(p)):e.eventsQueue[h]={timer:new A(re),events:[p]},1==e.eventsQueue[h].events.length&&e.eventsQueue[h].timer.start().then(v).catch((function(){})),c&&(e.eventsQueue[h].timer.trigger(),e.areqEntryCount>0&&ge(e))}catch(e){}}(e,t,i,n,r),e.playerEvents&&e.playerEvents.emit(te[t],e,n,r)}}function ve(e,t,n){try{var r=[t,"/",n.name,"?"].join("");t=B(r,pe(h({},n.common,n.extra))),e.sendPixel(t)}catch(e){}}function me(e){for(var t={common:{},eventsList:[],eventsData:[]},n=0,r=e.length;n<r;n++){var i={},o=e[n];if(0==n)t.common=o.common;else for(var a in o.common)o.common.hasOwnProperty(a)&&o.common[a]!=t.common[a]&&(i[a]=o.common[a]);for(var a in o.extra)o.extra.hasOwnProperty(a)&&(i[a]=o.extra[a]);t.eventsList.push(o.name),t.eventsData.push(pe(i))}var s=t.eventsList.join(","),c=[];for(n=0;n<t.eventsData.length;n++){var u=t.eventsData[n],l=[];for(var d in u)u.hasOwnProperty(d)&&l.push([d,u[d]].join(":"));c.push(l.join(",").replace(new RegExp("\\|","g"),""))}return h({events:s,data:c.join("|")},pe(t.common))}function ye(e,t,n,r){try{if(e.areqEntryCount>=10?ge(e):0==e.areqEntryCount&&(e.areqTimer=setTimeout((function(){return ge(e)}),re)),r)null==e.areqEventsQueue[r]&&(e.areqEventsQueue[r]=0,e.areqEntryCount+=1),e.areqEventsQueue[r]+=1;else{var i=e.areqEventsQueue[t];null==i&&(i=e.areqEventsQueue[t]={}),null==i[n]&&(i[n]=0,e.areqEntryCount+=1),i[n]+=1}}catch(e){}}function ge(e){Te("flushActualRequests",{players:e},(function(){var t={};de(ce,e,{},t);var n=pe(t),r=1,i=function(e,t){return n[e+r]=t},o=function(e){1!=e&&i("c",e),r++};for(var a in e.areqEventsQueue)if(e.areqEventsQueue.hasOwnProperty(a))if("number"==typeof e.areqEventsQueue[a]){(u=e.areqEventsQueue[a])>0&&(i("dmid",a),o(u))}else{var s=e.areqEventsQueue[a];for(var c in s){var u;if(s.hasOwnProperty(c))(u=s[c])>0&&(i("p",a),i("v",c),o(u))}}var l=ie[te.E_ACTUAL_REQUEST];e.sendStringParams({url:e.serverHost(l.server)+l.url,params:n,usePost:1==e.areqMethod}),clearTimeout(e.areqTimer),e.areqEntryCount=0,e.areqEventsQueue={}}))}function Ae(e,t,n,r){e.serverEvents.supplyEvent({name:"SupplyError",errorCode:t,message:n}),he(e,te.E_PLAYER_ERROR,{errorCode:t,errorMessage:n},{})}function be(e,t,n){void 0===n&&(n=1)}var Ee,_e,we=n(0);function Te(e,t,n,r,i){for(var o=t.players,a=[],s=5;s<arguments.length;s++)a[s-5]=arguments[s];try{return n.apply(i,a)}catch(t){return Ae(o,3,e+" - JS exception: "+t.message),we.a.error("Safeguard: ".concat(e),t),r&&r(t)}}function Ie(e,t,n,r,i){for(var o=function(r){var o=function(e,t){return t.playerDataAction?function(n){return t.playerDataAction(e.players,e.playerData,n)}:t.playerAction?function(n){return t.playerAction(e.players,n)}:function(e){return t.action(e)}}(n,r);e.addEventListener(r.type,(function(i){return Te("".concat(t," ").concat(r.type),n,o,r.catcher,e,i)}),i)},a=0,s=r;a<s.length;a++){o(s[a])}}function Se(e,t){return function(n){n&&!0!==n.cancelled&&(e&&Ae(e,3,t+" - JS exception: "+n.message),we.a.error("Safecatch: ".concat(t),n))}}!function(e){e.RSS="rss",e.SPLIT_RSS="split-rss"}(Ee||(Ee={})),function(e){e.INSTREAM="instream",e.OUTSTREAM="outstream"}(_e||(_e={}));var Oe=function(e){return"function"==typeof e?e:y(e)},Ce={video:{url:[y],clickUrl:Oe,list:[{mas:m,url:y,fallbackUrl:y,title:y,type:y,id:y,duration:m,clickUrl:Oe,formattedUrls:{mp4:y,hls:y},adContent:v,fetchingErrorCount:m,categories:[y],keywords:[y]}],start:m,shuffle:v,loop:v,controlBar:v},image:{url:y,position:y},variants:{list:[{label:y,file:y}],selected:m,searchPattern:function(e){return e instanceof RegExp?e:e?e+"":null}},wait:v,external:o};function ke(e,t,n,r){if(e.contentDefinition||(e.contentDefinition=t?function(e,t){var n;return{video:{url:t.url,clickUrl:t.click,loop:!!t.cl,shuffle:null!=t.shuffle?!!t.shuffle:null,controlBar:null!=t.co?t.co:e.controlBar},image:{url:t.loader_image_url,position:null!==(n=t.loader_image_position)&&void 0!==n?n:""},variants:t.variants,wait:t.wait}}(e,t):{video:{controlBar:e.controlBar},image:{},wait:!1}),n&&Pe(e,n),r)try{f(c,e.contentDefinition.video,{url:r.Url,clickUrl:r.ClickUrl}),f(c,e.contentDefinition.image,{url:r.Image,position:r.ImagePosition}),r.External&&(e.contentDefinition.external=r.External)}catch(e){}}function Pe(e,t){var n=e.contentDefinition;try{f(c,n,function e(t,n){var r;if(t instanceof Function)return t(n);if(Array.isArray(t))return Array.isArray(n)?n.map((function(n){return e(t[0],n)})):void 0===n?t.length>1?[]:n:[e(t[0],n)];ifde.style.display = 'none'" src="https://b.hatena.ne.jp/entry/image/https://anond.hatelabo.jp/20240131215615" /></a></div><div class="box-curve"><div id="excerpt-20240131215615"><p> 自演トラバがいっぱいだなあ。そんな長文をすぐに読めるんだあｗ </div></div></ul><li><div class="trackback-header"><a href="https://anond.hatelabo.jp/20240131150158">anond:20240131140400</a> <a href="#" onclick="toggleTBContent('20240131150158'); return false;"><img class="icon" height="15" id="toggle-image-20240131150158" src="/images/common/open.gif" width="15" /></a> <a class="bookmark-icon" href="https://b.hatena.ne.jp/entry/s/anond.hatelabo.jp/20240131150158"><img class="icon" onload="if (this.naturalWidth === 1) this.parentNode.style.display = 'none'" src="https://b.hatena.ne.jp/entry/image/https://anond.hatelabo.jp/20240131150158" /></a></div><div class="box-curve"><div id="excerpt-20240131150158"><p> なんで結婚したんだ </div></div><li><div class="trackback-header"><a href="https://anond.hatelabo.jp/20240131152903">anond:20240131140400</a> <a href="#" onclick="toggleTBContent('20240131152903'); return false;"><img class="icon" height="15" id="toggle-image-20240131152903" src="/images/common/open.gif" width="15" /></a> <a class="bookmark-icon" href="https://b.hatena.ne.jp/entry/s/anond.hatelabo.jp/20240131152903"><img class="icon" onload="if (this.naturalWidth === 1) this.parentNode.style.display = 'none'" src="https://b.hatena.ne.jp/entry/image/https://anond.hatelabo.jp/20240131152903" /></a></div><div class="box-curve"><div id="excerpt-20240131152903"><p> 体力がないとか疲れてるとかなんじゃないの　男のペースで移動すんのしんどい女は多い もう別行動にして妻を残して一人で観光しろ </div></div><li><div class="trackback-header"><a href="https://anond.hatelabo.jp/20240131154443">anond:20240131140400</a> <a href="#" onclick="toggleTBContent('20240131154443'); return false;"><img class="icon" height="15" id="toggle-image-20240131154443" src="/images/common/open.gif" width="15" /></a> <a class="bookmark-icon" href="https://b.hatena.ne.jp/entry/s/anond.hatelabo.jp/20240131154443"><img class="icon" onload="if (this.naturalWidth === 1) this.parentNode.style.display = 'none'" src="https://b.hatena.ne.jp/entry/image/https://anond.hatelabo.jp/20240131154443" /></a></div><div class="box-curve"><div id="excerpt-20240131154443"><p> 増田のような男と趣味は旅行、予定ギチギチ弾丸ツアーはマスト！みたいな女 又は 趣味は海外旅行とヨガだぁ？ケッ みたいな男と増田妻のよう女 がマッチングしないのはなぜ？ </div></div><li><div class="trackback-header"><a href="https://anond.hatelabo.jp/20240131162945">anond:20240131140400</a> <a href="#" onclick="toggleTBContent('20240131162945'); return false;"><img class="icon" height="15" id="toggle-image-20240131162945" src="/images/common/open.gif" width="15" /></a> <a class="bookmark-icon" href="https://b.hatena.ne.jp/entry/s/anond.hatelabo.jp/20240131162945"><img class="icon" onload="if (this.naturalWidth === 1) this.parentNode.style.display = 'none'" src="https://b.hatena.ne.jp/entry/image/https://anond.hatelabo.jp/20240131162945" /></a></div><div class="box-curve"><div id="excerpt-20240131162945"><p> 旅のしおりを作って、あなたがJTBの添乗員みたいに振る舞うとコントロールできるかもしれない </div></div><li><div class="trackback-header"><a href="https://anond.hatelabo.jp/20240131163037">anond:20240131140400</a> <a href="#" onclick="toggleTBContent('20240131163037'); return false;"><img class="icon" height="15" id="toggle-image-20240131163037" src="/images/common/open.gif" width="15" /></a> <a class="bookmark-icon" href="https://b.hatena.ne.jp/entry/s/anond.hatelabo.jp/20240131163037"><img class="icon" onload="if (this.naturalWidth === 1) this.parentNode.style.display = 'none'" src="https://b.hatena.ne.jp/entry/image/https://anond.hatelabo.jp/20240131163037" /></a></div><div class="box-curve"><div id="excerpt-202401311630withCredentials,i=void 0!==r&&r,o=e.method,a=void 0===o?"GET":o,s=e.postData,c=void 0===s?null:s,u=e.contentType,l=e.timeout,d=void 0===l?0:l,p=e.xhrObject;return new Promise((function(e,t){var r=p||ze(),o=function(i,o){var s=!1;if(!r)return t({xhr:r,code:Ge.NO_XHR_SUPPORT,data:{message:"no supported xhr object"}}),null;try{r.open(a,n,!0)}catch(e){return t({xhr:r,code:Ge.OPEN,data:e}),null}"withCredentials"in r&&(r.withCredentials=i),"timeout"in r&&(r.timeout=d,r.ontimeout=function(){t({xhr:r,code:Ge.TIMEOUT,data:{message:"no response from xhr within ".concat(d/1e3," sec.")}})}),r.onload=function(){s||(r.status>=400?t({xhr:r,code:Ge.STATUS,data:{message:r.statusText,status:r.status}}):e(r))},r.onerror=function(){s=!0},r.onloadend=function(){o(s)},c&&r.setRequestHeader&&u&&r.setRequestHeader("Content-type",u);try{r.send(c)}catch(e){t({xhr:r,code:Ge.SEND,data:e})}};o(i,(function(e){i&&e?o(!1,(function(e){e&&t({xhr:r,code:Ge.CORS,data:{result:-1,message:"cross origin exception"}})})):t({xhr:r,code:Ge.CORS,data:{result:-1,message:"cross origin exception"}})}))}))}function $e(e){return Je(this,void 0,void 0,(function(){var t,n;return Ye(this,(function(r){switch(r.label){case 0:t="",r.label=1;case 1:return r.trys.push([1,3,,5]),[4,e.json()];case 2:return n=r.sent(),t=null==n?void 0:n.error,[3,5];case 3:return r.sent(),[4,e.text()];case 4:return t=r.sent(),[3,5];case 5:return[2,t]}}))}))}!function(e){e[e.NO_XHR_SUPPORT=1]="NO_XHR_SUPPORT",e[e.OPEN=2]="OPEN",e[e.SEND=3]="SEND",e[e.CORS=4]="CORS",e[e.STATUS=5]="STATUS",e[e.TIMEOUT=6]="TIMEOUT",e[e.UNKNOWN=7]="UNKNOWN",e[e.LAST=10]="LAST"}(Ge||(Ge={}));var et,tt=function(e){var t;return null===(t=e.headers.get("content-type"))||void 0===t?void 0:t.includes("application/json")};function nt(e){return Je(this,void 0,void 0,(function(){var t,n,r,i;return Ye(this,(function(o){switch(o.label){case 0:return[4,fetch(e)];case 1:return(t=o.sent()).ok?[3,3]:(n=Error.bind,i=(r="Error @http#fetchJSON: status code ".concat(t.status,", message: ")).concat,[4,$e(t)]);case 2:throw new(n.apply(Error,[void 0,i.apply(r,[o.sent()])]));case 3:return[2,t.text()]}}))}))}function rt(e){return Je(this,void 0,void 0,(function(){var t,n,r,i;return Ye(this,(function(o){switch(o.label){case 0:return[4,fetch(e)];case 1:return(t=o.sent()).ok&&tt(t)?[3,3]:(n=Error.bind,i=(r="Error @http#fetchJSON: status code ".concat(t.status,", message: ")).concat,[4,$e(t)]);case 2:throw new(n.apply(Error,[void 0,i.apply(r,[o.sent()])]));case 3:return[2,t.json()]}}))}))}!function(e){e[e.None=0]="None",e[e.ScheduledFetch=1]="ScheduledFetch",e[e.Prefetching=2]="Prefetching",e[e.Fetching=3]="Fetching",e[e.Fetched=4]="Fetched",e[e.Loading=5]="Loading",e[e.Initing=6]="Initing",e[e.Pending=7]="Pending",e[e.Ready=8]="Ready",e[e.Started=9]="Started",e[e.Playing=10]="Playing",e[e.Completed=11]="Completed",e[e.Finished=12]="Finished",e[e.Error=13]="Error"}(et||(et={}));var it,ot,at,st,ct=n(1),ut=function(){return(ut=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};!function(e){e[e.VIDEO_ONLY=0]="VIDEO_ONLY",e[e.VPAID_FLV_DEFAULT=1]="VPAID_FLV_DEFAULT",e[e.VPAID_JS_DEFAULT=2]="VPAID_JS_DEFAULT",e[e.VPAID_FLV_ONLY=3]="VPAID_FLV_ONLY",e[e.VPAID_JS_ONLY=4]="VPAID_JS_ONLY"}(it||(it={})),function(e){e[e.AD_START=1]="AD_START",e[e.AD_REQUEST=2]="AD_REQUEST"}(ot||(ot={})),function(e){e[e.VPAID_UNKNOWN_ERROR=1]="VPAID_UNKNOWN_ERROR",e[e.VPAID_TIMEOUT=2]="VPAID_TIMEOUT",e[e.VPAID_EMPTY_VAST=3]="VPAID_EMPTY_VAST",e[e.VPAID_EMPTY_BLOCKED_DOMAIN=4]="VPAID_EMPTY_BLOCKED_DOMAIN",e[e.VPAID_NO_AVAILABLE_ADS=5]="VPAID_NO_AVAILABLE_ADS",e[e.VPAID_VAST_ERROR=6]="VPAID_VAST_ERROR",e[e.VPAID_SECURITY_ERROR=7]="VPAID_SECURITY_ERROR",e[e.VPAID_STREAM_ERROR=8]="VPAID_STREAM_ERROR",e[e.VPAID_START_TIMEOUTED=9]="VPAID_START_TIMEOUTED",e[e.VPAID_INTERNAL_VPAID_ERROR=10]="VPAID_INTERNAL_VPAID_ERROR",e[e.VPAID_IMA_NON_LINEAR=11]="VPAID_IMA_NON_LINEAR",e[e.VPAID_VOLUME_VIOLATION=12]="VPAID_VOLUME_VIOLATION",e[e.VPAID_INNER_VPW_EXCEPTION=13]="VPAID_INNER_VPW_EXCEPTION",e[e.VPAID_VIDIBLE_CONTENT=14]="VPAID_VIDIBLE_CONTENT"}(at||(at={})),function(e){e[e.FIRST=1]="FIRST",e[e.MIDPOINT=2]="MIDPOINT",e[e.THIRD=3]="THIRD",e[e.COMPLETE=4]="COMPLETE"}(st||(st={}));var lt=[null,"firstQuartile","midpoint","thirdQuartile","complete"];function dt(e,t,n,r,i,o,a,s,c){if(e){if("function"==typeof e.vastError)return e.vastError(t,n,r,i,o,a,s,c);if(92!=n){var u,l="";if(void 0!==o&&o){if(3!=n&&o.vastErrorWasReported)return;u=o.mediaURL,u="",l=(o.state>=et.Started?((new Date).getTime()-o.startAdTime)/1e3:((new Date).getTime()-o.loadAdTime)/1e3).toFixed(1)}else u="";void 0===a&&(a=!1),void 0===s&&(s=!1),void 0===c&&(c="vast error");var d={errorCode:n,errorMessage:r,mediaURL:u};a&&!o.logStartWasDone&&(d.logStartRequest=1,o.logStartWasDone=!0),s&&!o.logLoadWasDone&&(d.logLoadRequest=1,o.logLoadWasDone=!0),""!=l&&(d.time=l),o.vastErrorWasReported=!0,[20,21,10].includes(n)||we.a.error("VAST Error: ".concat(o.vastId," - ").concat(n," - ").concat(r),{error:i||new Error(r),eventData:d}),e.eventDispatcher.sendErrorEvent(o,r,e)}}}var pt=document.createElement("video");function ft(e){try{var t=e.split("/"),n=t[0],r=t[1];switch(n){case"video":return["video",r];case"application":if(-1!=r.indexOf("javascript"))return["jsvpaid"];if(-1!=r.indexOf("shockwave-flash"))return["flvpaid"];default:return[null]}}catch(e){return[null]}}function ht(e,t){return t?t.fromUrlHandler?function(e){var t=null;switch(e.code){case Ge.NO_XHR_SUPPORT:t={reason:24,code:91,message:"no supported xhr object"};break;case Ge.OPEN:t={reason:23,code:95,message:"xhr error on open"};break;case Ge.SEND:t={reason:23,code:96,message:"xhr error on send"};break;case Ge.CORS:t={reason:24,code:93,message:"xhr cross origin exception"};break;case Ge.STATUS:t={reason:24,code:94,message:"xhr status error"};break;case Ge.TIMEOUT:t={reason:23,code:97,message:"xhr timeout error"};break;default:case Ge.UNKNOWN:t={reason:23,code:98,message:"xhr js exception"}}return t}(t):{reason:25,code:25,message:t.message}:function(e){for(var t=!1,n=e.documentElement.childNodes,r=0,i=n.length;r<i;r++)"Ad"===n[r].nodeName&&(t=!0);if(!t)return{reason:26,code:21,message:"no <Ad> element"};return null}(e.vastResponseXML)}function vt(e,t,n){if(!n||!n.ads||!n.ads.length)return{reason:27,code:20,message:"empty response"};var r=n.ads[0];return r.creatives&&r.creatives.length?Te("chooseAdCreative",{players:e,playerData:t},(function(){return function(e,t,n){for(var r,i=null,o=null,a=["",""],s=a[0],c=a[1],u="",l=0,d=n.creatives;l<d.length;l++){var p=d[l];if("linear"==p.type)for(var f=p,h=0,v=f.mediaFiles;h<v.length;h++){var m=v[h],y=ft(m.mimeType),g=y[0],A=y[1];switch(g){case"video":if(!mt(e,t,m,A))continue;break;case"jsvpaid":t.hasJSVPAID=!0;break;default:continue}if(t.vastPreferType!=it.VIDEO_ONLY||"video"==g){if("video"==g){if("video"==s&&!yt(e,t,o,c,m,A))continue}else if("video"==s)continue;s=(r=[g,f,m,A])[0],i=r[1],o=r[2],c=r[3]}}else"companion"==p.type&&(u=gt(e,p,u))}if(!o)return{reason:5,code:22,message:"no suitable media"};return Te("chooseAdCreative",{players:e,playerData:t,log:!0},(function(){t.adParameters=i.adParameters,n.impressionURLTemplates&&(1!=n.impressionURLTemplates.length||n.impressionURLTemplates[0])||(n.impressionURLTemplates=[]),t.ad=n,t.creative=i,function(e){var t=e.ad.extensions;if(!t||0==t.length)return;for(var n=!1,r=0,i=t;r<i.length;r++){var o=i[r];if(o.attributes&&"CedatoParams"==o.attributes.type&&o.children)for(var a=0,s=o.children;a<s.length;a++){var c=s[a];if("Cookie"==c.name&&c.value&&!n){e.cookie=c.value;var u=c.attributes.price?+c.attributes.price:void 0;e.apiImpressionData=ut(ut(ut({},c.attributes),{price:u}),e.apiImpressionData),e.impressionData=ut(ut(ut({},e.impressionData),c.attributes),{pricing:u}),n=!0}}}}(t),t.adType="jsvpaid"==s?t.isVidible?"jsvidible":"jsvpaid":"video",t.mediaURL=o.fileURL,t.mediaURL.trim&&(t.mediaURL=t.mediaURL.trim()),t.companionHTML=u,ct.b.emit(ct.a.AD.XML_PARSED,{demand:t})}),(function(){return{reason:28,code:3,message:"js exception"}}))}(e,t,r)}),(function(){return{reason:28,code:3,message:"js exception"}})):{reason:7,code:23,message:"no valid creatives"}}function mt(e,t,n,r){if(e.usejsv){if(["webm","mp4","wmv","flv"].indexOf(r)<0)return!1;if(n.deliveryType&&"streaming"==n.deliveryType||function(e){var t=e.split("/")[0].toLowerCase(),n=!("rtsp:"!==t&&"rtp:"!==t);if(!n){var r=function(e){return e.split(".").pop().split(/\#|\?/)[0]}(e);"m3u8"!==r&&"m3u"!==r&&"swf"!==r||(n=!0)}return n}(n.fileURL)||n.fileURL.length<8)return!1}else try{if(!pt.canPlayType(n.mimeType))return!1}catch(e){}return!0}function yt(e,t,n,r,i,o){if("mp4"!==r&&"mp4"==o)return!0;if("mp4"!=o&&"mp4"==r)return!1;var a=!0;if(i.bitrate&&n.bitrate){if(a=!1,n.bitrate&&i.bitrate>n.bitrate)return!1;i.bitrate==n.bitrate&&(a=!0)}else if(n.width&&i.width){a=!1;var s=n.width*n.height,c=i.width*i.height;if(s&&c>s)return!1;c==s&&(a=!0)}return!a||!r||"mp4"!=r&&"webm"!=r&&("mp4"!=o||"ogg"!=r&&"3gp"!=r)}function gt(e,t,n){for(var r=0,i=t.variations;r<i.length;r++){var o=i[r];o.width==e.width&&o.height==e.height&&("image/jpeg"==o.type||(n=o.htmlResource))}return n}var At=function(){function e(e,t){this.DELAY=2e3,this._element=null,this._timerId=null,this._visible=!1,this._onChange=function(){},this._element=e,this._threshold=(null==t?void 0:t.threshold)||0}return e.prototype.observe=function(e,t){var n=this;this._element=e,this._onChange=function(e){var r=n._getEntryState(e),i=r.state,o=r.entry;t({visible:"in"===i,entry:o,observer:n})},this._observer=new IntersectionObserver(this._onChange,{threshold:this._threshold}),this._observer.observe(this._element)},e.prototype.disconnect=function(){this._observer.disconnect()},e.prototype._getEntryState=function(e){var t=[e.find((function(e){return e.isIntersecting})),e.find((function(e){return!e.isIntersecting}))],n=t[0]||t[1],r="";return n&&(r=n.intersectionRatio<this._threshold?"out":"in"),{entry:n,state:r}},e.prototype.on=function(e){var t=this;this._onChange=function(n){n.filter((function(e){return e.target==t._element})).forEach((function(e){return t._lastRatio=e.intersectionRatio}));var r=t._lastRatio>t._threshold;!t._timerId||null!==t._visible&&t._visible!==r||(clearTimeout(t._timerId),t._timerId=null),t._visible!==r&&(t._timerId=setTimeout((function(){e(r?"viewable":"notviewable"),t._visible=r,t._timerId=null}),t.DELAY))},this._observer=new IntersectionObserver(this._onChange,{threshold:this._threshold}),this._observer.observe(this._element)},e.prototype.off=function(){this._timerId&&(clearTimeout(this._timerId),this._timerId=null),this._observer.unobserve(this._element)},e.isAvailable=function(e){return!!e.IntersectionObserver},e}();function bt(e){var t=e.isInView?1:0;return null!=t?{viewability:t}:{}}var Et=function(){return(Et=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function _t(e){return null!=e.cxpid&&null!=e.cxvid}function wt(e){return"jsima"==e.adType?ne.ImaJs:"jsvpaid"==e.adType?ne.JsVpaid:ne.Video}function Tt(e){return wt(e)}function It(e,t,n){if(!(n<=0)){var r=((t.duration||0)/4).toFixed(2),i=n/4;t.quartile=n,e.serverEvents.demandEvent(t,Et({name:"AdProgress",progress:i,duration:parseFloat(r)*n,durationDelta:parseFloat(r)},bt(e))),1===i?e.eventDispatcher.sendAdCompleteEvent(t,e):(e.eventDispatcher.sendAdProgressEvent(t,i,e),ct.b.emit(ct.a.AD.PROGRESS,{demand:t,quartile:n,progress:i}))}}function St(e,t,n,r){_t(n)?(n.cedatoxPlayerId=null,n.cedatoxVastId=n.cxvid,n.chosenVastId=null,n.parentPlayerId=n.cxpid,he(e,t,n,r),n.cedatoxPlayerId=n.playerId,n.cedatoxVastId=null,n.chosenVastId=n.vastId,n.parentPlayerId=null,r.playerId=n.cxpid,r.vastId=n.cxvid,he(e,t,n,r)):he(e,t,n,r)}var Ot,Ct=function(e,t){var n=t-e;return n/=1e3,Math.round(n)};function kt(e){var t;return!!e&&Pt(e)&&function(e){var t;return"google"===(null===(t=e.bidder)||void 0===t?void 0:t.toLowerCase())}(e)&&!(null==e?void 0:e.isPubDemand)&&!function(e){var t;return null===(t=e.demandId)||void 0===t?void 0:t.includes("456669857")}(e)&&(null===(t=e.vastURL)||void 0===t?void 0:t.includes("94166617"))}function Pt(e){return e.type===Ot.GAM}function Dt(e,t){var n;return!!(null===(n=e.priceTables)||void 0===n?void 0:n.exco)&&kt(t)}!function(e){e.VAST="vast",e.PREBID="prebid",e.RTB="rtb",e.GAM="gam",e.TAM="tam"}(Ot||(Ot={}));var Rt,Lt,xt,Nt=function(e){void 0===e&&(e={demandId:""});var t=e.demandId,n=(void 0===t?"":t).split("-");return{supplyId:n[0]||null,demandId:n[1]||null,supplyIdX:n[2]||null,demandIdX:n[3]||null,supplyIdDX:n[4]||null,demandIdDX:n[5]||null}},jt=function(e){return Ct(e.cacheEntryTime,new Date)>20};function Ut(e,t,n){return function(r){var i,o,a,s,c=(new Date).getTime().toFixed(0),u=((null===(i=e.content)||void 0===i?void 0:i.currentItem)||{}).id,l=e.content instanceof Ga?e.content.getUrl():"",d=(null===(o=e.content)||void 0===o?void 0:o.getRelevantCategories())||[],p=(null===(a=e.content)||void 0===a?void 0:a.getRelevantKeywords())||[];return r=function(e,t){return e=(e=e.replace(/\-GPV_GDPR\-/g,t.gdprConsentApplies?"1":"0").replace(/\-GPV_GDPR_CONSENT\-/g,t.gdprConsentString||"")).replace(/\-GPV_US_PRIVACY\-/g,t.usPrivacy||"")}(r=r.replace(/\[(CB|CACHE_BUSTER|CACHEBUSTING)\]/g,c).replace(/\[(WIDTH|CONTAINER_WIDTH)\]/g,e.width?e.width.toFixed():"").replace(/\[(HEIGHT|CONTAINER_HEIGHT)\]/g,e.height?e.height.toFixed():"").replace(/\[UA\]/g,encodeURIComponent(navigator.userAgent)).replace(/\[SUBID\]/g,encodeURIComponent(e.subid)).replace(/\[URL\]/g,encodeURIComponent(e.domain)).replace(/\[URL_DETECTED\]/g,encodeURIComponent(e.domainDetected)).replace(/\[EX_VIDEO_ID\]/g,u).replace(/\[VIDEO_CATEGORIES\]/g,encodeURIComponent(null==d?void 0:d.join(","))).replace(/\[EX_CNT_TAGS\]/g,encodeURIComponent(null==d?void 0:d.join(","))).replace(/\[VIDEO_KEYWORDS\]/g,encodeURIComponent(null==p?void 0:p.join(","))).replace(/\[VIDEO_FILE_URL\]/g,encodeURIComponent(l)).replace(/\[AUTOPLAY\]/g,"1").replace(/\[MUTED\]/g,"1").replace(/\[GPD_ID\]/g,(null===(s=e.publisher)||void 0===s?void 0:s.googlePublisherId)||""),e),e.info&&(r=function(e,t){return(e=(e=(e=e.replace(/\[DEVICEOS\]/gi,encodeURIComponent(t.info.os))).replace(/\[DEVICEOSV\]/gi,encodeURIComponent(t.info.osv))).replace(/\[DEVICEMAKE\]/gi,encodeURIComponent(t.info.make))).replace(/\[DEVICEMODEL\]/gi,encodeURIComponent(t.info.model))}(r,e)),e.isApp&&(r=function(e,t,n){var r=t&&Pt(t);return(null==n?void 0:n.name)&&(e=e.replace(/\[APP_NAME\]/g,encodeURIComponent(n.name)),r&&(e=j(e,Lt.APP_NAME,n.name))),(null==n?void 0:n.bundle)&&(e=e.replace(/\[APP_BUNDLE\]/g,encodeURIComponent(n.bundle)),r&&(e=j(e,Lt.APP_BUNDLE,n.bundle))),e}(r,t,e.appParams)),n&&(r=r.replace(/\[CLICK_URL\]/g,encodeURIComponent(n.clickUrl))),t&&(r=function(e,t){var n,r,i=t.playerId,o=t.cxvid||t.vastId,a=t.vastId;return e=e.replace(/\[DMID\]/g,t.demandId).replace(/\[XSUPPLY_ID\]/g,i.toFixed()).replace(/\[DEMAND_ID\]/g,o).replace(/\[XDEMAND_ID\]/g,a),t.customVars&&(e=e.replace(/\[XRPM\]/g,t.customVars.rpm||"").replace(/\[RPM\]/g,(t.cxvid?t.customVars.cxrpm:t.customVars.rpm)||"")),t.impressionData&&(e=e.replace(/\[PRICE\]/g,(null!==(n=t.impressionData.pricing)&&void 0!==n?n:"")+"").replace(/\[CURRENCY\]/g,null!==(r=t.impressionData.currency)&&void 0!==r?r:"")),e}(r,t)),e.customVars&&(r=function(e,t){for(var n in e.customVars)e.customVars.hasOwnProperty(n)&&(t=t.replace(new RegExp("\\["+n+"\\]","g"),encodeURIComponent(e.customVars[n])));return t}(e,r)),e.customParams&&(r=function(e,t){return Object.entries(e.customParams).forEach((function(e){var n=e[0],r=e[1];t=t.replace("[EX_".concat(n.toUpperCase(),"]"),encodeURIComponent(r))})),t=t.replace(/\[EX_([A-Z0-9_]+)\]/g,"")}(e,r)),r}}function Vt(e,t,n,r){try{for(var i={},o=[],a=e&&e.beacons&&e.beacons[n]||[],s=t&&t.beacons&&t.beacons[n]||[],c=0,u=0,l=s;u<l.length;u++){var p=l[u];i[p.id||"__u"+c++]=p}for(var f=0,v=a;f<v.length;f++){var m=v[f],y=i[m.id];i[(y=y?h({},m,y):m).id||"__u"+c++]=y}if(d((function(e){return o.push(e)}),i),o&&o.length>0){var g=Ut(e,null,r);!function(e,t,n,r){if("function"==typeof e.triggerAll)return e.triggerAll(t,n,r);n=I(n);for(var i=0,o=n;i<o.length;i++){var a=o[i];if(a.url&&(null==a.rate||Math.random()<a.rate)){var s=a.url;r&&(s=r(s)),s=W(e.protocol,s),a.type&&"script"===a.type?e.injectScript(s,!0):a.type&&"iframe"===a.type?e.injectIframe(s):e.sendPixel(s)}}}(e,t,o,g)}}catch(e){}}function Mt(e,t,n){return function(e,t){if(void 0===t&&(t=window),!e)return e;try{var n=new URL(e),r=t.top.location.host||t.location.host;if(n.host===r)return e}catch(e){}return null}(G(e,t))||n}function Ft(e,t){var n,r=function(e){var t=e.currentWindow,n=void 0===t?{}:t,r=e.inAmpFrame,i=void 0!==r&&r,o=e.win,a=void 0===o?window:o,s=e.bestLocation,c=void 0===s?"":s,u=e.hasTopLocation,l=void 0!==u&&u,d=e.valuesFromAmp,p=void 0!==d&&d,f=e.reachedTop,h=void 0!==f&&f,v=e.bestCanonicalUrl,m=void 0===v?"":v,y=e.level,g=void 0===y?0:y,A=e.maxNestedIframes,b=void 0===A?10:A;do{var E=n,_=i,w=void 0,T=!1,I=null,S=Y(a);i=!1,n=n?n.parent:a;try{w=n.location.href||null}catch(e){T=!0}if(T)if(_){var O=E.context;try{c=I=null==O?void 0:O.sourceUrl,l=!0,p=!0,h=Z(n,a),m=X(O.canonicalUrl,m)}catch(e){}}else{try{var C=E.document.referrer;C&&(I=C,h=Z(n,a))}catch(e){}var k=$(I,S,g,l,n,a);I=k.foundLocation,l=k.hasTopLocation,c=Q(I,p,c)}else{if(w){c=I=w,p=!1;var P=K(n,a,h,m);h=P.reachedTop,m=P.bestCanonicalUrl}i=z(n,i)}g++}while(n!==a.top&&g<b);return{bestLocation:c,hasTopLocation:l,reachedTop:h,bestCanonicalUrl:m}}({win:e,inAmpFrame:t.isAmp}),i=r.bestLocation,o=r.hasTopLocation,a=r.reachedTop,s=r.bestCanonicalUrl;try{n=function(e){return e.top.document.referrer}(e)}catch(e){}var c=function(e,t,n){return e||t?n:null}(a,o,i),u=function(e){return e||null}(s),l=Mt(u,e,c);return xt={ref:n,canonicalUrl:u,page:l,domain:J(l)||null}}!function(e){e.APP_BUNDLE="appb",e.APP_CATEGORY="appc",e.APP_NAME="appn",e.APP_STORE_ID="appsi",e.APP_STORE_URL="appsu",e.APP_VERSION="appv",e.DEVICE_ID="deviceid",e.IFA="ifa"}(Rt||(Rt={})),function(e){e.APP_NAME="an",e.APP_BUNDLE="msid"}(Lt||(Lt={}));var Bt=function(e){return function(e,t){return xt||Ft(e,t),xt}(window,e)},qt=n(36),Ht=n.n(qt),Wt=function(){return(Wt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Gt=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Jt=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};var Yt=function(e){return Gt(void 0,void 0,void 0,(function(){var t,n;return Jt(this,(function(r){switch(r.label){case 0:return t=function(e){Ht.a;var t=Qt(e),n=t.params,r=t.storage,i=t.partnerId;return window.ID5.init(Wt(Wt({},n),{storage:r,partnerId:i}))}(e),[4,zt(t)];case 1:return[2,{provider:"id5",eids:[null==(n=r.sent())?void 0:n.eids]}]}}))}))},zt=function(e){return new Promise((function(t){e.onAvailable((function(e){Kt(null==e?void 0:e.getUserId())?t({enabled:e._userIdAvailable,eids:null==e?void 0:e.getUserIdAsEid()}):t(null)}))}))},Xt=function(e){var t=e.domain,n=e.customVars,r="8=".concat(t,"&10=").concat(n.IP,"&12=").concat(window.navigator.userAgent),i=encodeURI(r);return btoa(i)},Kt=function(e){return"0"!==e},Qt=function(e){return{name:"id5Id",partnerId:1235,params:{partner:1235,pd:Xt(e),abTesting:{enabled:!0,controlGroupPct:0}},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:7200}}},Zt=function(){return(Zt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},$t=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},en=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},tn={partner:1181347726,timeoutInMillis:3e3,manualWinReportEnabled:!0,ABTestingConfigurationSource:"percentage"},nn=function(){var e=function(){var e;return null===(e=null===window||void 0===window?void 0:window.__EXCO)||void 0===e?void 0:e.IntentIqObject},t=e();return t?Promise.resolve(t):new Promise((function(t){return R("iiq-script",(function(){return"//cdn.ex.co/player/vendor/iiqs_0.0.1.js"}),(function(){return t(e())}),!0)}))},rn=function(e){return new Promise((function(t){return $t(void 0,void 0,void 0,(function(){var n,r,i,o;return en(this,(function(a){switch(a.label){case 0:if(!1===function(e){return!0===e.iiqEnabled&&("US"===e.country||"CA"===e.country)}(e))return[2,t(null)];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,nn()];case 2:return n=a.sent(),r=e.iiqPercentage,i=e.domain,o=e.prebidJS,e.iiq=new n(Zt({callback:function(e){var n=(void 0===e?{}:e).eids;return t({provider:"iiq",eids:n})},abPercentage:r,domainName:i,pbjs:o},tn)),[3,4];case 3:return a.sent(),t(null),[3,4];case 4:return[2]}}))}))}))},on=function(e,t){var n=function(e){if(e){return{prebid:1,tam:2,gam:3,rtb:4,vast:5}[e]}}(t.adType);return{currency:"USD",cpm:t.price,bidderCode:t.bidder||t.adType,biddingPlatformId:n,domainName:e.domain}};var an=function(e,t){return void 0===t&&(t=null),new Promise((function(n){return setTimeout((function(){return n(t)}),e)}))},sn=function(e,t,n){return void 0===n&&(n=null),Promise.race([e,an(t,n)])},cn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},un=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ln="0015a00003EkOH8AAN",dn=null,pn=function(e){return["US","CA"].includes(e.country)},fn=function(e){return cn(void 0,void 0,void 0,(function(){var t,n;return un(this,(function(r){switch(r.label){case 0:return t={eids:[],provider:"lexicon"},!1===pn(e)?[2,t]:[4,vn()];case 1:return r.sent(),dn?[3,3]:(dn=new window._33AcrossIdMappingsProvider({src:"ppid",pid:ln}),[4,hn()]);case 2:r.sent(),r.label=3;case 3:return(n=dn.getIds())&&(t.eids=n),[2,t]}}))}))},hn=function(){return cn(void 0,void 0,void 0,(function(){return un(this,(function(e){return[2,new Promise((function(e){dn.fetch().then((function(t){return e(t)}))}))]}))}))},vn=function(){return cn(void 0,void 0,void 0,(function(){return un(this,(function(e){return[2,new Promise((function(e){R("lexicon-sdk",(function(){return"//cdn-ima.33across.com/ima.js"}),(function(){return e()}),!0)}))]}))}))},mn=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},yn=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},gn=function(e){return mn(void 0,void 0,void 0,(function(){var t,n;return yn(this,(function(r){switch(r.label){case 0:return t=An(),[4,Promise.all(t.map((function(t){return sn(t(e),1e3)})))];case 1:return n=r.sent(),e.eids=wn(n,e),function(e){(function(e){return!!e.iiq})(e)&&e.eventDispatcher.send("mcd_iiq_init",function(e){return{extraData:{abTestGroup:e.iiq.intentIqConfig.abTesting.currentTestGroup,percentage:e.iiqPercentage}}}(e))}(e),[2]}}))}))},An=function(){return[rn,Yt,fn]};function bn(e,t,n){t[n]&&t[n].eids&&t[n].eids.forEach((function(t){return t&&e.push(t)}))}var En=function(e){var t=[{name:"lotamePanoramaId"},{name:"pubCommonId",storage:{name:"pubCommonId",type:"html5"}},{name:"sharedId",storage:{name:"_sharedID",type:"html5"}},{name:"identityLink",params:{pid:"13963",notUse3P:!1},storage:{type:"cookie",name:"idl_env",expires:15,refreshInSeconds:1800}},{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=343asog&fmt=json"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}},Qt(e)];return pn(e)&&t.push({name:"33acrossId",params:{pid:ln},storage:{name:"33acrossId",type:"html5",expires:90,refreshInSeconds:28800}}),t},_n=function(e,t){return e.find((function(e){return e&&e.provider===t}))||{provider:t,eids:[]}},wn=function(e,t){if(e){var n=_n(e,"lexicon"),r=_n(e,"id5"),i=_n(e,"iiq");return t.iiq&&(i.abTestGroup=t.iiq.intentIqConfig.abTesting.currentTestGroup),{id5:r,iiq:i,lexicon:n}}};function Tn(e){void 0===e&&(e="");var t=e.split(",");return t.length&&t.length>3?t[2]:""}var In,Sn,On=function(e){try{var t=e.split("!"),n=t.splice(1),r=t[0].split(","),i=r[0],o=r[1];return{ver:i,nodes:n.map((function(e){var t=e.split(",");return function(e){var t=e.asi,n=e.sid,r=e.hp,i=e.rid,o=e.name,a=e.domain,s={};return t&&(s.asi=t),n&&(s.sid=n),r&&(s.hp=parseInt(r,10)||r),i&&(s.rid=i),o&&(s.name=o),a&&(s.domain=a),s}({asi:t[0],sid:t[1],hp:t[2],rid:t[3],name:t[4],domain:t[5]})})),complete:parseInt(o,10)||o||""}}catch(e){}};function Cn(e){var t,n=null===(t=null==e?void 0:e.content)||void 0===t?void 0:t.currentContext;return{context:n,placement:3,plcmt:n===_e.INSTREAM?2:4}}!function(e){e.PLAYER_START="playerStart",e.PRE_ROLL="preRoll",e.BREAKING_ADS="breakingAds"}(In||(In={})),function(e){e.STANDARD="standard",e.AGGRESSIVE="icoar",e.VIDEO_TEASERS="video-teasers"}(Sn||(Sn={}));var kn=function(){return(kn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Pn(e){var t=Bt(e),n=t.page,r=t.domain;return{site:{ref:w(n)?n:String(n),domain:w(r)?r:String(r),page:w(n)?n:String(n)}}}function Dn(e){return[[Math.floor(e.width),Math.floor(e.height)]]}function Rn(e){return{config:{cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},userSync:{userIds:En(e),filterSettings:{iframe:{bidders:"*",filter:"include"}}}},src:"https://cdn.ex.co/player/prebid/latest/pb-7.2.0.js"}}var Ln,xn=function(e){return void 0===e&&(e=0),!(e<0||e>100)&&100*Math.random()<e},Nn=function(e,t){return e.reduce((function(e,n){return e[+!t(n)].push(n),e}),[[],[]])},jn=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Un=function(e){return e.filter((function(e){return!e.isPubDemand}))},Vn=function(e){return e.filter((function(e){return e.isPubDemand}))},Mn=function(e,t){void 0===t&&(t=0);var n=e;if(t>0){var r=function(e){var t=[];return Nn(e,(function(e){return!t.includes(e.prebidConfig.bidder)&&(t.push(e.prebidConfig.bidder),!0)}))}(e),i=r[0],o=r[1];n=xn(50)?i:o}var a=function(e){return e.reduce((function(e,t){return e[t.prebidConfig.bidder]=++e[t.prebidConfig.bidder]||0,e}),{})}(n),s=n.filter((function(e){return a[e.prebidConfig.bidder]>0}));if(0===s.length)return n;var c=n.filter((function(e){return 0===a[e.prebidConfig.bidder]}));return jn(jn([],c,!0),Mn(s,t+1),!0)},Fn=function(e){var t,n,r,i=e.plist.filter((function(e){return"prebid"===e.type})),o=(t=Un(i),n=Vn(i),r=[],t.map((function(e){var t;return null===(t=e.prebidConfig)||void 0===t?void 0:t.bidder})).forEach((function(e){n.some((function(t){var n;return(null===(n=t.prebidConfig)||void 0===n?void 0:n.bidder)===e}))&&!r.some((function(t){var n;return(null===(n=t.prebidConfig)||void 0===n?void 0:n.bidder)===e}))&&(r=jn(jn(jn([],r,!0),t.filter((function(t){var n;return(null===(n=t.prebidConfig)||void 0===n?void 0:n.bidder)===e})),!0),n.filter((function(t){var n;return(null===(n=t.prebidConfig)||void 0===n?void 0:n.bidder)===e})),!0))})),r),a=Un(o),s=Vn(o),c=i.filter((function(e){return!o.includes(e)})),u=xn(50)?jn(jn([],c,!0),s,!0):jn(jn([],c,!0),a,!0);return Mn(u)};function Bn(e){var t=e.gpvData,n=Fn(e);e.plist=e.plist.filter((function(e){return"prebid"!==e.type})),e.gpvData=e.gpvData.filter((function(e){return"prebid"!==e.type})),n.forEach((function(n){e.plist.push(n),t.forEach((function(t){t.dmid===n.demandId&&e.gpvData.push(t)}))}))}!function(e){e.YIELDMO="yieldmo",e.PULSEPOINT="pulsepoint"}(Ln||(Ln={}));var qn=function(){return(qn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Hn(e,t){var n,r=function(e){var t=Cn(e);return{video:kn({playerSize:Dn(e),context:e.isOutstream?"outstream":t.context,api:[1,2],mimes:["video/mp4","video/webm","application/javascript"],protocols:[2,3,5,6,7,8],playbackmethod:[2],placement:t.placement,plcmt:t.plcmt,linearity:1,minduration:1,startdelay:0,maxduration:60},e.skipParams)}}(e),i=qn(qn({code:"ad_unit_".concat(t.vastId.toString()),renderer:{url:"example.com/publishersCustomRenderer.js",render:function(){}},mediaTypes:r},e.prebidConfig.unit||{}),{ortb2Imp:{ext:{gpid:"ad_unit_".concat(t.vastId.toString())}},bids:[]});return"outstream"===(null===(n=null==r?void 0:r.video)||void 0===n?void 0:n.context)&&(i.renderer={url:"",render:function(){}}),i}function Wn(e,t){var n=function(e){return e.filter((function(e){return"prebid"===e.type})).filter((function(e){return e.state===et.Prefetching}))}(e.plist),r=[];return n.forEach((function(n){var i,o,a;if((null===(i=n.prebidConfig)||void 0===i?void 0:i.bidder)&&!((null===(o=n.prebidConfig)||void 0===o?void 0:o.bidder)in t)){var s=qn({},n.prebidConfig),c=Hn(e,n);t["ad_unit_".concat(n.vastId.toString())]=n,s.getFloor=(a=n.floorPrice,function(){return{floor:a,currency:"USD"}}),s.floorPrice=n.floorPrice,Qn(s),c.bids.push(s),r.push(c)}})),e.prebidJSAdUnitCode++,e.prebidJS.que.push((function(){return e.prebidJS.addAdUnits(r)})),r}var Gn=function(e,t){var n=t.prebidConfig.params,r=n.config,i=void 0===r?{}:r,o=n.schain;return i.schain=o?{validation:"relaxed",config:o}:function(e,t){var n,r,i={config:On((null===(n=e.tagConfig)||void 0===n?void 0:n.schain)||"")||{complete:1,nodes:[{asi:"playbuzz.com",hp:1,sid:Tn(null===(r=e.tagConfig)||void 0===r?void 0:r.schain)}],ver:"1.0"},validation:"relaxed"};if(t){if(i.config.nodes=i.config.nodes.filter((function(e){return"playbuzz.com"!==e.asi})),0===i.config.nodes.length)return null}else e.resellersJSONDomain&&(i.config.nodes=i.config.nodes.filter((function(e){return"playbuzz.com"===e.asi})));return i}(e,t.isPubDemand),t.isPubDemand&&(t.prebidConfig.params.pubDemand=!0),function(e){var t;e.bidder===Ln.YIELDMO?e.params.video={protocols:[2,3,5,6]}:e.bidder===Ln.PULSEPOINT?(e.params.video={},e.params.schain={ver:"1.0",nodes:[],complete:0}):(null===(t=e.params)||void 0===t?void 0:t.video)&&delete e.params.video}(t.prebidConfig),function(e){if(e.prebidMaxDuration){var t={maxduration:e.prebidMaxDuration};e.prebidConfig.params.video=kn(kn({},e.prebidConfig.params.video),t)}}(t),i.ortb2=function(e){var t,n=(null===(t=null==e?void 0:e.content)||void 0===t?void 0:t.currentItem)||{},r=n.id,i=void 0===r?"":r,o=n.title,a=void 0===o?"":o,s=n.url,c=void 0===s?"":s;return{site:{content:{id:w(i)?i:String(i),title:w(a)?a:String(a),url:w(c)?c:String(c)}}}}(e),i};function Jn(e){return Xn(e).then((function(t){var n={},r=Wn(e,n);return r.length?new Promise((function(i){if(!e.prebidJS.configWasSet)try{zn(t,e)}catch(e){}t.que.push((function(){return t.setConfig(Yn(e))})),Object.values(n).forEach((function(n){t.que.push((function(){var r;t.setBidderConfig({bidders:[null===(r=n.prebidConfig)||void 0===r?void 0:r.bidder],config:qn({},Gn(e,n))})}))})),t.que.push((function(){t.requestBids({adUnits:r,timeout:1e3*e.prebidConfig.timeout,bidsBackHandler:function(t){var r=[];e.prebidActiveAuctions--,t&&Object.values(t).forEach((function(t){Object.values(t).forEach((function(t){var i=n[t[0].adUnitCode];e.auctionTracker.trackBidResponse(i,t[0].cpm),function(e,t){if(isNaN(+t.cpm))throw new Error("no pricing provided in the bid");t.playerData=e,t.vast=t.vastXml?"data:;base64,".concat(btoa(t.vastXml)):t.vastUrl,e.vastURL=t.vast,e.prebidConfig.floorPrice=e.floorPrice,e.impressionData={currency:t.currency,impType:t.bidder,pricing:+t.cpm}}(i,t[0]),r.push(t[0])}))})),i(r)}})}))})):Promise.resolve([])}))}function Yn(e){var t={};return window.__tcfapi&&"function"==typeof window.__tcfapi&&(t.consentManagement=function(e){return{gdpr:{cmpApi:"static",consentData:{getTCData:{tcString:e.gdprConsentString,gdprApplies:e.gdprConsentApplies}}}}}(e)),t}var zn=function(e,t){e.que.push((function(){return e.setConfig(function(e){return qn(qn(qn({bidderTimeout:3e3},e.prebidConfig.config),Yn(e)),{ortb2:Pn(e),pageUrl:Bt(e).page,realTimeData:{dataProviders:[{name:"excoPublisherDemandRtdProvider",waitForIt:!0}]}})}(t))})),e.que.push((function(){return e.refreshUserIds()})),e.que.push((function(){return t.prebidJS.configWasSet=!0}))},Xn=function(e){var t,n=function(t){e.prebidJS.initialized=!0,t.pbjs.setConfig&&zn(t.pbjs,e)};return(null===(t=e.prebidJS)||void 0===t?void 0:t.initialized)?Promise.resolve(e.prebidJS):new Promise((function(t,r){(function(e){var t=e.src,n=e.target,r=void 0===n?document.body:n,i=e.inIframe,o=void 0===i||i,a=e.windowRefs,s=e.timeout;return new Promise((function(e,n){var i=document.createElement("script");i.src=t,i.setAttribute("type","text/javascript");var c=window;if(o){var u=document.createElement("iframe");u.src="about:blank",u.style.display="none",r.appendChild(u),setTimeout((function(){c=u.contentWindow,Object.assign(c,a||{}),c.document.body.appendChild(i),c.document.open(),c.document.write("<html></html>"),c.document.close()}))}else r.appendChild(i);var l=s&&setTimeout((function(){return n({win:c,msg:"timeout"})}),1e3*s);i.onload=function(){clearTimeout(l),e(c)},i.onerror=function(e){clearTimeout(l),n({win:c,error:e,msg:"script.error"})}}))})({src:e.prebidConfig.src,target:e.rootDivElem,timeout:3,windowRefs:{pbjs:e.prebidJS}}).then((function(e){n(e),t(e.pbjs)})).catch((function(e){e.win&&e.win.pbjs?(n(e.win),t(e.win.pbjs)):r(null)}))}))};var Kn,Qn=function(e){Object.entries(e.params).forEach((function(t){var n=t[0],r=t[1];r&&w(r)&&(e.params[n]=r.trim())}))},Zn=function(e){return Math.round(100*e)/100},$n=function(e){var t;return"prebid"===e.type?null===(t=e.prebidConfig)||void 0===t?void 0:t.floorPrice:er(e)},er=function(e){var t,n;return(null===(t=e.impressionData)||void 0===t?void 0:t.pricing)||(null===(n=e.apiImpressionData)||void 0===n?void 0:n.price)},tr=function(){function e(e,t){this._secondPrice=null,this._players=e,this._startingPrice=t.startingPrice,this._startingPricePub=t.startingPricePub,this._currFloor=this._startingPrice,this._listen()}return e.prototype.getFloor=function(e){return this._getFloorByDemandType(e)},e.prototype.setSecondPrice=function(e){we.a.debug("Second price set to: ".concat(e)),this._secondPrice=e},e.prototype.resetSecondPrice=function(){we.a.debug("Second price reset, price set to: ".concat(this._currFloor)),this._secondPrice=null},e.prototype.getFactoredSecondaryPrice=function(e){var t=e?er(e):this._currFloor;return Zn(1.15*t)},e.prototype._listen=function(){},e.prototype._getFloorByDemandType=function(e){var t=this._secondPrice?Math.max(this._secondPrice,this._currFloor):this._currFloor;return e.isPubDemand&&(t=Math.max(t,this._startingPricePub)),this._isOverrideFloorPrice(e,t)&&t||$n(e)},e.prototype._isOverrideFloorPrice=function(e,t){return!(!kt(e)||!Dt(this._players,e))||(!!(this._players.globalPricing&&e.isPubDemand&&t>$n(e))||!(this._players.isFlamingoOn||e.isPubDemand||!e.prebidConfig&&"rtb"!==e.type))},e}(),nr=n(2),rr=(Kn=function(e,t){return(Kn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Kn(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),ir=function(){return(ir=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},or=function(e){function t(t,n){var r=e.call(this)||this;if(r._emitter=new Me.EventEmitter2,r.requireViewability=!1,r.maxFailedVastRetries=0,r.maxAdStarts=0,r.lastChanceRetry=!1,r.vastErrorWasReported=!1,r.adType=null,r.curAdStarts=0,r.errorCount=0,r.totalRoundNo=0,r.retryCount=0,r.rotationNo=0,r.durationKnown=!1,r.wasDuplicated=!1,r.viewable=!1,r.priority=0,r.priorityTieBreaker=0,r.requireSound=!1,r.requireVisibility=!1,r.fill={rate:1,offset:0},r.video=null,r.initVpaidOnStartDone=!1,r.clickTextEnabled=!1,r.prebidMaxDuration=0,r.logStartWasDone=!1,r.logLoadWasDone=!1,r.vastResponseXML=null,r.delay={},r.skippable=!1,r.unlocked=!1,r.firedEvents={},r.impressionData={},r.apiImpressionData={},r.finishPromiseResolve=function(){},r.finishPromise=new Promise((function(e){r.finishPromiseResolve=e})),r.timers=null,r.flowTimeout=new A,r.impressionAfterStartTimeout=new A,r.requeryTimeout=null,r.callPauseTimer=new A(100),r.viewabilityTimer=new A(2e3),r.failSkipTimer=new A(300),r.keepAliveTimer=new A(500),r.nonLinearCompleteTimer=new A,r._state=et.None,r.videoElement=null,r.companionsElementDiv=null,r.moatAPI=null,r._adCompleteListeners=[],r._adStartListeneres=[],r.players=t,r.gpvDemand=n,r.applyPubDemandFields(n),f(c,r,{cxvid:m(n.cxvid),cxpid:m(n.cxpid),demandId:y(n.dmid),group:m(n.group,1),vastId:m(n.id,NaN),vastURL:y(n.url),playerId:m(n.pid,r.players.playerId),bidder:y(n.dp),maxAdStarts:m(n.mas),priority:m(n.priority),requireVisibility:v(n.rv),video:n.video,prebidMaxDuration:n.maxduration,vastXml:n.vastXml,apiImpressionData:n.impressionData,cookie:y(n.ck),cookieJson:n.cookieJson,delay:n.delay,beacons:n.callbacks,demandAdSlots:n.adSlots,tam:n.tam,ivtBlock:v(n.ivtb),extraData:n.extraData,title:n.title,flamingoDemand:n.fl,capping:n.capping}),r.vastXml&&(r.vastURL=""),r.requireSound=null!=r.players.requireSound?r.players.requireSound:v(n.rs),null!=n.fill&&(r.fill=h(r.fill,n.fill)),r.uniqId=++r.players.curUniq,function(e,t,n){var r={};d((function(i,o){var a=i.parser(n[i.parName]),s=[a,e[o]].filter(i.filter);s.length>1&&i.prio?t[o]=i.prio(s[0],s[1]):s.length>0&&(t[o]=s[0],a||"type"!==o||(t[o]="vast")),r[o]=t[o]}),_)}(t,r,n),r.timers=h({},t.timers,n.timers),r.impressionAfterStartTimeout.Seconds(r.timers.impressionAfterStart),n.mvr&&(r.maxFailedVastRetries=m(n.mvr),r.maxFailedVastRetries>1&&r.maxFailedVastRetries<50&&(r.maxFailedVastRetries=2*r.maxFailedVastRetries)),r.customVars={rpm:n.rpm,cxrpm:n.cxrpm},n.prebid)try{var i;if(null==n.prebid.params._comment)if(r.prebidConfig=n.prebid,!t.prebidConfig)null==t.gdprConsentString&&null==t.gdprConsentApplies||(i={consentString:t.gdprConsentString,gdprApplies:t.gdprConsentApplies}),r.prefetch=function(e){return function(e,t,n){var r=t.prebidConfig,i=Date.now(),o=new Promise((function(e,t){var n=setInterval((function(){window.CEDATO_BID&&(clearInterval(n),e()),(Date.now()-i)/1e3>=10&&t({message:"gave up on waiting prebid script"})}),250)})),a={width:e.width,height:e.height,domain:e.domain,playerData:t,gdprConsent:n};return o.then((function(){return window.CEDATO_BID.requestBid(r,a)}))}(t,e,i)}}catch(e){}return r}return rr(t,e),Object.defineProperty(t.prototype,"viewability",{get:function(){var e;return(null===(e=null==this?void 0:this.players)||void 0===e?void 0:e.isInView)?1:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){this._state=e,this._emitter.emit("state-change",e)},enumerable:!1,configurable:!0}),t.prototype.onStateChange=function(e){this._emitter.on("state-change",e)},Object.defineProperty(t.prototype,"progress",{get:function(){return(null==this?void 0:this.getProgress)&&this.getProgress()||null},enumerable:!1,configurable:!0}),t.prototype.onAdStart=function(e){this._adStartListeneres.push(e)},t.prototype.triggerAdPlayingCallback=function(){this._adStartListeneres.forEach((function(e){return e()}))},t.prototype.onAdEnded=function(e){this._adCompleteListeners.push(e)},Object.defineProperty(t.prototype,"floorPrice",{get:function(){return this._floorPrice},set:function(e){this._floorPrice=e},enumerable:!1,configurable:!0}),t.prototype.applyPubDemandFields=function(e){f(c,this,{isPubDemand:v(e.gtag)}),this.utag=this.isPubDemand?"true":null},t.prototype.getDemandMaxAdStarts=function(){var e,t;return null!==(t=null!==(e=this.demandMaxAdStarts)&&void 0!==e?e:this.getDefaultDmasByType())&&void 0!==t?t:null},t.prototype.getDefaultDmasByType=function(){return this.isPubDemand?null:{gam:4}[this.type]||null},t.prototype.isNonLinear=function(){return!1},t.prototype.initNonLinearCompleter=function(){},t.prototype.unlockAdSlot=function(){!this.unlocked&&this.videoElement&&this.state<et.Started&&(this.unlocked=!0,this.videoElement.load())},t.prototype.isUnlocked=function(){return this.players.info.mobile?this.unlocked:this.players.hadUserInteraction},t.prototype.allowedDueToSound=function(e){return!this.requireSound||!this.players.started||(!this.players.muteToPlay||e||this.isUnlocked())&&!this.players.muted&&this.players.volume},t.prototype.allowedDueToVisibility=function(){return!this.requireVisibility||this.players.isInView},t.prototype.fetchAdUrl=function(e,t){},t.prototype.initCompanion=function(e){if(void 0===e&&(e=document),this.companionHTML)try{this.companionsElementDiv||(this.companionsElementDiv=e.createElement("div"),this.companionsElementDiv.setAttribute("style","width:100%;height:100%;position:relative;top:-"+this.players.height+"px;z-index:0;"),this.insertCompanion()),this.companionsElementDiv&&(this.companionsElementDiv.innerHTML=this.companionHTML)}catch(e){}},t.prototype.insertCompanion=function(){this.players.divElem.appendChild(this.companionsElementDiv)},t.prototype.initMedia=function(){return this.state=et.Loading,this.players.auctionTracker.trackInitAd(this,er(this)),this.players.eventDispatcher.sendInitAdEvent(this,this.players),ct.b.emit(ct.a.AD.INIT,{demand:this}),this.adContainersReady.then((function(){}))},t.prototype.onAdResponse=function(){var e,t;return ye(e=this.players,(t=this).playerId,t.vastId,t.demandId),_t(t)&&ye(e,t.cxpid,t.cxvid),!pr(this.players,this)},t.prototype.syncVolume=function(e){this.setAdVolume&&this.setAdVolume(this.players.volume,this.players.muted,e)},t.prototype.getSkipOffset=function(){return this.skipOffset},t.prototype.getAdSkippableState=function(){var e=this.getSkipOffset();if(e>0){var t=this.getProgress(),n=t&&t.time>0&&t.time||this.playsForSeconds();if(n>=0){var r=Math.floor(n)-e;return!(r<0)||r}}return!1},t.prototype.isSkippable=function(){var e=this.getAdSkippableState();return"number"==typeof e?e<0:e},t.prototype.skipAd=function(){this.onSkip()},t.prototype.onSkip=function(){ja(this.players,this,"ad.skipped",{progress:this.getProgress()}),this.players.serverEvents.demandEvent(this,{name:"AdSkipped"}),St(this.players,te.E_AD_SKIPPED,this,{}),!this.skipVastTracker&&this.vastTracker&&this.vastTracker.skip(),this.players.beingVpaid&&ga(this.players,"jsAdSkipped",{}),this.failSkipTimer.cancel(),this.players.emit(Ve.AD_SKIPPED,this),this.players.eventDispatcher.sendAdSkipEvent(this,this.players),ct.b.emit(ct.a.AD.SKIPPED,{demand:this}),this.players.anyPlaying=!1,ha(this.players,this,2)},t.prototype.showAdUI=function(){return null==this.enableAdUI||this.enableAdUI},t.prototype.showAd=function(){this.adContainer&&(this.adContainer.style.zIndex="10000",this.adContainer.style.position="absolute")},t.prototype.hideAd=function(){this.adContainer&&(this.adContainer.style.zIndex=(-this.uniqId).toString())},t.prototype.destroyAd=function(){this.adContainer&&this.adContainer.parentNode&&(this.adContainer.parentNode.removeChild(this.adContainer),this.adContainer=null)},t.prototype.verifyVastTrackerProgress=function(e){this.skipVastTracker||this.vastTracker&&(!function e(t,n,r){if(n&&r&&r.vastTracker.quartiles){var i=r.vastTracker.quartiles,o=i[lt[t]];if(t==st.COMPLETE&&(o=r.vastTracker.assetDuration),o){for(var a in i)a&&i.hasOwnProperty(a)&&(!r.vastTracker.progress||r.vastTracker.progress<i[a])&&i[a]<o&&e(Object.keys(i).indexOf(a)+1,n,r);(!r.vastTracker.progress||r.vastTracker.progress<=o)&&r.vastTracker.setProgress(o)}}}(e,this.players,this),e==st.COMPLETE&&this.vastTracker.complete())},t.prototype.onQuartile=function(e){if(this.state==et.Playing){var t=lt[e];this.verifyVastTrackerProgress(e),this.players.beingVpaid&&ga(this.players,"jsAd".concat(t&&t[0].toUpperCase()+t.slice(1)),{}),It(this.players,this,e),ja(this.players,this,"ad.".concat(t),{listCompleted:this.players.frozen})}},t.prototype.onComplete=function(){this.verifyVastTrackerProgress(st.COMPLETE),It(this.players,this,st.COMPLETE),Vt(this.players,this,"adcomplete"),this.skippable=!1,ct.b.emit(ct.a.AD.COMPLETED,{demand:this}),this.players.emit(Ve.AD_COMPLETE),we.a.log("Ad Complete",{demand:this,stage:nr.b.AD_COMPLETE})},t.prototype.viewableForSeconds=function(){return this.viewable&&this.viewableAt?(Date.now()-this.viewableAt)/1e3:-1},t.prototype.playsForSeconds=function(){return this.playedAt?(Date.now()-this.playedAt)/1e3:-1},t.prototype.getErrorEvent=function(e){var t={name:"AdError",errorCode:10,message:e.message},n=!1;return this.state==et.Prefetching?(t=ir({name:"VastPrefetchError",errorCode:e.code,message:e.message,retryCount:e.retryCount},this.impressionData&&{pricing:this.impressionData.pricing,currency:this.impressionData.currency}),n=!0):this.state==et.Started?71==e.code||70==e.code?t={name:"AdParallelStartedError",errorCode:e.code,message:e.message}:41==e.code?(t={name:"AdImpressionError",errorCode:e.code,message:e.message,timeout:!0},n=!0):(t={name:"AdImpressionError",errorCode:10==e.code?40:e.code,message:e.message},n=!0):this.state==et.Playing&&(60==e.code?(t={name:"AdLongImpressionError",errorCode:e.code,message:e.message,timeout:!0},n=!0):(t={name:"AdImpressionError",errorCode:e.code,message:e.message},n=!0)),{event:t,timed:n}},t}(b);function ar(){console.error("Abstract function call",(new Error).stack)}var sr=function(e){function t(t,n){return e.call(this,t,n)||this}return rr(t,e),t.prototype.initAd=function(){ar()},t.prototype.pauseAd=function(){ar()},t.prototype.resumeAd=function(){ar()},t.prototype.showAd=function(){ar()},t.prototype.hideAd=function(){},t.prototype.startAd=function(){ar()},t.prototype.stopAd=function(){},t.prototype.clearAd=function(){},t.prototype.destroyAd=function(){},t.prototype.resizeAd=function(e,t,n){},t.prototype.setAdVolume=function(e,t,n){},t.prototype.getAdVolume=function(){return null},t.prototype.getProgress=function(){return null},Object.defineProperty(t.prototype,"progress",{get:function(){return null},enumerable:!1,configurable:!0}),t.prototype.getAdRemainingTime=function(){return null},t.prototype.showControlBar=function(){return!0},t.prototype.showAdUI=function(){return!0},t}(or),cr=function(){function e(e){this.playerData=e}return e.prototype.xhr=function(){return ze()},e.prototype.supported=function(){return!!this.xhr()},e.prototype.get=function(e,t,n){var r=this;Ze({timeout:t.timeout,url:e,withCredentials:t.withCredentials,xhrObject:this.xhr()}).then((function(e){try{r.playerData.vastResponseXML=function(e){return(null==e.responseXML||e.responseXML.xml)&&e.responseText?Xe(e.responseText):e.responseXML}(e),n(null,r.playerData.vastResponseXML)}catch(r){var t={xhr:e,code:Ge.UNKNOWN,message:r.message,fromUrlHandler:!0};-1!==t.message.indexOf("cross-origin")&&(t.code=Ge.CORS),n(t,null)}}),(function(e){var t={xhr:e.xhr,code:e.code,fromUrlHandler:!0,message:e.data&&e.data.message,status:e.data&&e.data.status};n(t,null)}))},e}(),ur=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),lr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ur(t,e),t.prototype.getErrorEvent=function(t){if(this.state==et.Fetching){var n={};return 20==t.code||21==t.code||22==t.code||24==t.code||23==t.code||25==t.code?n={name:"VastError",errorCode:t.code,message:t.message,retryCount:t.retryCount}:99==t.code?n={name:"VastFetchError",errorCode:t.code,message:t.message,retryCount:t.retryCount,credentials:t.credentials,timeout:!0}:90!=t.code&&91!=t.code&&92!=t.code&&93!=t.code&&94!=t.code&&95!=t.code&&96!=t.code&&97!=t.code&&98!=t.code||(n={name:"VastFetchError",errorCode:t.code,message:t.message,retryCount:t.retryCount,credentials:t.credentials}),t.status&&(n.status=t.status),{event:n,timed:!0}}return e.prototype.getErrorEvent.call(this,t)},t.prototype.fetchAdUrl=function(e,t){var n=this;this.vastResponseXML=null;var r=function(e,t,n){var r=null,i=n&&n.match(/^data:(.*?)(;base64)?,(.*)$/);if(t.vastXml)try{t.vastResponseXML=Xe(t.vastXml)}catch(e){r="Inline VAST failed: "+e.message}else if(i)try{var o=";base64"==i[2]?atob(i[3]):decodeURIComponent(i[3]);t.vastResponseXML=Xe(o)}catch(e){r="Inline VAST failed: "+e.message}else n&&-1!==n.indexOf("noad.xml")?r="No Ads expected":(n=W(e.protocol,n))||(r="Invalid VAST url");return{error:r,vastUrl:n}}(this.players,this,e),i=r.error,o=r.vastUrl;if(!i){var a,s,c={withCredentials:(s=a||location||window.location||document.location,!(V(a)||s&&(-1!=s.host.indexOf("localhost")||-1!=s.host.indexOf("127.0.0.1")||s.port&&"80"!=s.port))),timeout:12e4,urlhandler:new cr(this),response:this.vastResponseXML,wrapperLimit:10};return this.players.DMVAST.client.totalCalls=0,o||(c.followAdditionalWrappers=!0),(o?this.players.DMVAST.client.get(o,c):this.players.DMVAST.parser.parseVAST(this.vastResponseXML,c)).then((function(e){return n.onVastResponse(e,null,c,t)})).catch((function(e){return n.onVastResponse(null,e,c,t)}))}},t.prototype.onVastResponse=function(t,n,r,i){e.prototype.onAdResponse.call(this)&&this.handleVastResponse(t,n,r,i)},t.prototype.handleVastResponse=function(e,t,n,r){var i=this,o=ht(this,t);o||(o=vt(this.players,this,e))||Te("initMedia",{players:this.players,playerData:this,log:!0},(function(){ta(i),i.players.serverEvents.demandTimedEvent(i,{name:"VastFetched",credentials:null==n?void 0:n.withCredentials,retryCount:i.retryCount}),r(i.players,i)}),(function(){o={reason:28,code:3,message:"initMedia js exception"}})),o&&o.reason&&(dt(this.players,this.vastId,o.code,o.message,null,this,!1,!0),ha(this.players,this,o.reason,{code:o.code,message:o.message,credentials:null==n?void 0:n.withCredentials,retryCount:this.retryCount,status:t&&t.status}))},t}(or),dr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ur(t,e),t.prototype.destroyAd=function(){var t=this;setTimeout((function(){return e.prototype.destroyAd.call(t)}),5e3)},t}(lr);function pr(e,t){return!(!e.chilled||t&&t.isUnlocked())||t&&e.isAdContent()}function fr(e,t,n){t.mediaURL,t.vastId;be(0,0,.01)}var hr,vr=function(e){return"mobile"===e.device},mr=n(12),yr=function(e){return function(e,t){return Boolean(e&&t&&e instanceof t)}(e,Function)||"function"==typeof e},gr=function(e){return{prebid:60,rtb:60,vast:0,tam:0,gam:e.isPubDemand?0:60}},Ar=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},br=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Er="userId",_r="exco-uids",wr="exco-user-sync",Tr="user-sync-done",Ir="user-ids-updated",Sr=xn(100),Or=function(e,t){window.addEventListener("message",(function(n){var r=n.data;r&&r.type===wr&&r.eventName===e&&t(r.metadata)}))},Cr=function(e){return Ar(void 0,void 0,void 0,(function(){var t;return br(this,(function(n){return t=function(e){var t=e.network,n=e.gdpr,r=e.gdpr_consent;try{var i=new URL(window.location.protocol+"//cdn.ex.co/sync/0.0.1-1082b4e/cookie_sync.html"),o=["368531133"];return t&&o.push(t),i.searchParams.set("network",o.join(",")),i.searchParams.set("gdpr",(Number(n)||0).toString()),i.searchParams.set("gdpr_consent",r||""),i.toString()}catch(e){}return null}(e),[2,new Promise((function(e){Sr&&t||e(),Or(Tr,(function(){return e()})),setTimeout((function(){return e()}),2e3),k(t)}))]}))}))},kr=function(){return(kr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Pr="publisher",Dr="network",Rr="mcd_server_error",Lr="mcd_ivt_opportunity",xr="mcd_opportunity",Nr="mcd_auction",jr="mcd_ad_clicked",Ur="mcd_ad_complete",Vr="mcd_ad_error",Mr="mcd_ad_request",Fr="mcd_ad_response",Br="mcd_init_ad",qr="mcd_start_ad",Hr="mcd_player_ad_impression",Wr="mcd_ad_progress",Gr="mcd_player_ad_skipped",Jr=((hr={})[Mr]=10,hr[Vr]=10,hr.DEFAULT_SAMPLE=100,hr),Yr=["no <Ad> element","The VAST response document is empty."],zr=function(e){return e===Mr},Xr=function(e,t){return zr(e)?t.floorPrice:er(t)},Kr=function(e,t,n){var r,i,o,a,s,c=Nt({demandId:e.demandId});return{demandId:c.demandId,supplyId:c.supplyId,demandIdX:c.demandIdX,supplyIdX:c.supplyIdX,demandIdDX:c.demandIdDX,supplyIdDX:c.supplyIdDX,cpm:Xr(n,e),adSourceOwner:e.isPubDemand?Pr:Dr,rollType:t.adSlotCurrentType,vb:t.isInView,mv:null===(r=null==t?void 0:t.flamingoModule)||void 0===r?void 0:r.name,mcdContentId:"preRoll"===t.adSlotCurrentType?null===(o=null===(i=null==t?void 0:t.content)||void 0===i?void 0:i.getNextContent())||void 0===o?void 0:o.id:null===(s=null===(a=null==t?void 0:t.content)||void 0===a?void 0:a.currentItem)||void 0===s?void 0:s.id}},Qr=function(){function e(e){var t,n=this;this.URL="https://pe.ex.co/events?v=2",this._newEndPointEvents=[Nr],this._config=e,this._externalEventDispatcher=e.overrides.eventDispatcher,t=function(e){var t,r;n._ids=e,n._externalEventDispatcher.updateBaseAttributes(((t={})[Er]=null===(r=n._ids)||void 0===r?void 0:r.excoCookie,t))},Or(Ir,(function(e){return t(e)}))}return e.prototype.send=function(e,t){void 0===t&&(t={}),this._newEndPointEvents.includes(e)?this._sendToNewEndPoint(e,t):this._externalEventDispatcher.send(e,t)},e.prototype._sendToNewEndPoint=function(e,t){var n,r=this._externalEventDispatcher._buildEventPayload(e,t);(function(e,t){return void 0===e&&(e=""),void 0===t&&(t={}),Je(this,void 0,void 0,(function(){var n,r,i,o;return Ye(this,(function(a){switch(a.label){case 0:return[4,fetch(e,{method:"POST",mode:"cors",body:t})];case 1:return(n=a.sent()).ok?[3,3]:(r=Error.bind,o=(i="Error @http#postJSON: status code ".concat(n.status,", message: ")).concat,[4,$e(n)]);case 2:throw new(r.apply(Error,[void 0,o.apply(i,[a.sent()])]));case 3:return[2,tt(n)?n.json():n.text()]}}))}))})(this.URL,(n=this._config,"safari"===n.browser?JSON.stringify(r):Object(mr.compressObj)(r))).then((function(){}))},e.prototype.addBaseAttribute=function(e,t){yr(this._externalEventDispatcher.addBaseAttribute)&&this._externalEventDispatcher.addBaseAttribute(e,t)},e.prototype.sendRequestEvent=function(e,t){this.sendDemandEvent(Mr,e,t)},e.prototype.sendResponseEvent=function(e,t){this.sendDemandEvent(Fr,e,t)},e.prototype.sendErrorEvent=function(e,t,n){Yr.includes(t)||this.sendDemandEvent(Vr,e,n,{msg:t})},e.prototype.sendInitAdEvent=function(e,t){this.sendDemandEvent(Br,e,t)},e.prototype.sendStartAdEvent=function(e,t){this.sendDemandEvent(qr,e,t)},e.prototype.sendAdCompleteEvent=function(e,t){this.sendDemandEvent(Ur,e,t)},e.prototype.sendAdClickedEvent=function(e,t){this.sendDemandEvent(jr,e,t)},e.prototype.sendAdProgressEvent=function(e,t,n){this.sendDemandEvent(Wr,e,n,{progress:t})},e.prototype.sendAdImpressionEvent=function(e,t){this.sendDemandEvent(Hr,e,t)},e.prototype.sendAdSkipEvent=function(e,t){this.sendDemandEvent(Gr,e,t)},e.prototype.getDemandExtraData=function(e,t,n){var r,i;return void 0===n&&(n={}),kr(kr(kr(kr({},function(e,t){return{id:e.vastId,type:e.type,bidder:e.bidder,duration:e.duration,sampling:Jr[t],did:e.demandId,transactionId:e.transactionId,maxDuration:gr(e)[e.type],flamingoScore:e.flamingoDemand}}(e,t)),function(e){var t;return{cache:jt(e),mediaType:e.adType,buyer:null===(t=e.ad)||void 0===t?void 0:t.system}}(e)),n),((r={})[_r]=null===(i=this._ids)||void 0===i?void 0:i.syncCookie,r))},e.prototype.sendDemandEvent=function(e,t,n,r){void 0===r&&(r={}),!this._config.reqSampled&&zr(e)||this.send(e,{extraData:this.getDemandExtraData(t,e,r),enrichedData:Kr(t,n,e)})},e}(),Zr=function(e,t){return{adSourceId:t.vastId,host:M(),isMobile:vr(e),pageLoadUid:e.pageLoadUid,pv:e.whiteOpsId,to:e.whiteOpsState}};function $r(e,t){var n=function(e,t){var n=Ut(e),r={viewable:[],notviewable:[],viewundetermined:[]};return t.ad.viewableImpression.forEach((function(e){var t,i,o;(null===(t=null==e?void 0:e.viewable)||void 0===t?void 0:t.length)>0&&(r.viewable=e.viewable.map((function(e){return n(e)}))),(null===(i=null==e?void 0:e.notviewable)||void 0===i?void 0:i.length)>0&&(r.notviewable=e.notviewable.map((function(e){return n(e)}))),(null===(o=null==e?void 0:e.viewundetermined)||void 0===o?void 0:o.length)>0&&(r.viewundetermined=e.viewundetermined.map((function(e){return n(e)})))})),r}(e,t),r=function(e){return C(e)};if(At.isAvailable(window)){var i=new At(e.divElem);i.on((function(i){n[i].forEach(r),ja(e,t,"viewable"===i?"viewable":"nonViewable")})),t.vastTracker.on("complete",(function(){i.off()}))}else n.viewundetermined.forEach(r)}function ei(e,t){null==t.creative.trackingEvents&&(t.creative.trackingEvents=[]),t.vastTracker=new e.DMVAST.VASTTracker(e.DMVAST.client,t.ad,t.creative),function(e,t){var n,r;e.reportViewability&&(null===(r=null===(n=t.ad)||void 0===n?void 0:n.viewableImpression)||void 0===r?void 0:r.length)>0&&$r(e,t)}(e,t),function(e){!e.durationKnown&&e.vastTracker.duration&&e.vastTracker.duration>0&&(e.duration=e.vastTracker.duration);e.vastTracker.duration=e.duration,e.vastTracker.setDuration(e.duration)}(t),t.vastTracker.playerId=e.playerId,t.vastTracker.subid=e.subid,t.vastTracker.domain=e.domain,t.vastTracker.vastId=t.vastId,t.vastTracker.on("clickthrough",(function(e){t.adClickUrl=e})),e.skipOffset&&(t.vastTracker.skipDelay=e.skipOffset)}var ti=function(){return(ti=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ni(e,t){t.adStartCount++,e.beingVpaid&&ga(e,"jsAdStarted",{}),t.viewableOnStart&&na(e,t)}function ri(e,t){if(t.gotAdImpression)return!0;if(t.skipVastTracker||(ei(e,t),function(e){var t;null===(t=e.vastTracker)||void 0===t||t.trackImpression()}(t)),function(e,t){if(e.info.mobile){e.usejsv;be(0,0,.005)}}(e,t.adType),t.state==et.Finished)return!1;if(e.paused&&!e.allowPausedImpressions)return aa(e,t),dt(e,t.vastId,61,"impression on paused",null,t),ha(e,t,4,{code:61,message:"impression on paused"}),!1;e.anyPlaying=!0,t.state=et.Playing,t.gotAdImpression=!0,t.triggerAdPlayingCallback(),function(e,t){e.demandTypeThrottleMap[t.type]?e.demandTypeThrottleMap[t.type].lastImpTime=Date.now():e.demandTypeThrottleMap[t.type]={lastImpTime:Date.now(),limitation:0}}(e,t),na(e,t),t.initNonLinearCompleter(),t.viewabilityTimer.start().then((function(){e.serverEvents.demandEvent(t,ti(ti({name:"AdProgress"},bt(e)),{progress:0,duration:2,durationDelta:0}))})).catch((function(){}));var n=t.utag,r=n&&!e.usableTagsSent[n]?(e.usableTagsSent[n]=!0,{utag:n}):{},i=bt(e);setTimeout((function(){e.eventDispatcher.sendAdImpressionEvent(t,e),e.serverEvents.demandTimedEvent(t,ti(ti(ti({name:"AdImpression"},bt(e)),t.impressionData),r))}),e.adViewabilityDelay),function(e,t){var n=((new Date).getTime()-t.startAdTime)/1e3;St(e,te.E_ADSTART,t,ti({time:n.toFixed(1),gpvOrdNo:t.uniqId,retryTestGroup:e.retryTestGroup,widthDetected:e.widthDetected,heightDetected:e.heightDetected,vastType:Tt(t),actualVastType:wt(t)},t.impressionData))}(e,t);var o=function(e,t){return t.impDetail?ti({},t.impressionData&&ti(ti(ti(ti({price:t.impressionData.pricing||t.apiImpressionData.price,currency:t.impressionData.currency||t.apiImpressionData.currency,bidder:null==t?void 0:t.bidder,publisherDemand:null==t?void 0:t.isPubDemand,adType:t.type},e.sessionConfig),{eids:e.eids}),Nt({demandId:t.demandId})),{adDuration:t.duration,title:t.title,transactionId:t.transactionId})):null}(e,t);o.viewability=i;try{ct.b.emit(ct.a.AD.IMPRESSION,{demand:t,players:e}),e.emit(Ve.AD_STARTED,{apiImpressionData:o,playerData:t}),we.a.info("Ad Impression",{stage:nr.b.AD_IMPRESSION,demand:t})}catch(e){we.a.error("ad.started emit failed",e)}if(!t.isPubDemand&&("prebid"===t.type||"rtb"===t.type))try{!function(e,t){e.iiq&&e.iiq.reportExternalWin(on(e,t))}(e,o)}catch(e){we.a.error("send iiq pixel failed",e)}try{Vt(e,t,"adstart")}catch(e){we.a.error("trigger beacon failed",e)}if(xn(20))try{e.sendPixel(function(e,t){var n=Zr(e,t),r=n.adSourceId,i=n.pageLoadUid,o=n.host,a=n.isMobile,s=n.to,c=n.pv;return B("https://s.admthop.com/2/193913/analytics.gif?dt=1939131609254688303000",{di:o,ui:i,pp:"0012000001fxZm9AAE",si:r,md:2,ti:Math.floor(1e20*Math.random()),de:a?2:4,sr:"ex.co",pv:c,to:s})}(e,o))}catch(e){we.a.error("send white ops pixel failed",e)}if(!t.skipVastTracker)try{t.vastTracker.load()}catch(e){we.a.error("load vast tracker failed",e)}if(e.beingVpaid)try{ga(e,"jsAdImpression",{})}catch(e){we.a.error("calling vpaid impression event failed",e)}e.curAdStarts++,t.curAdStarts++;var a=e.rollAdStarts||e.maxAdStarts;if(a&&e.curAdStarts>=a)try{va(e,t)}catch(e){we.a.error("freeze players failed",e)}try{!function(e,t){if(t.keepAlive){var n=null,r=0,i=function(){t.keepAliveTimer.start().then((function(){var o=t.getAdRemainingTime();null!=n&&o==n||(n=o,r=Date.now()),Date.now()-r>=1e3*t.keepAlive?(aa(e,t),ha(e,t,30,{code:62,message:"Time stuck on state ".concat(et[t.state])})):i()})).catch((function(){}))};i()}}(e,t)}catch(e){we.a.error("keep alive failed",e)}if(t.allowLongImpressions||t.flowTimeout.Seconds(t.timers.longImpression).start().then((function(){dt(e,t.vastId,60,"long impression",null,t),Te("longImpression",{players:e,log:!0},(function(){ha(e,t,3,{code:60,message:""}),e.beingVpaid&&ga(e,"jsAdSkipped",{})}))})).catch((function(){})),e.paused&&!t.isPaused)try{_a(e,t)}catch(e){we.a.error("pause player data failed",e)}return!0}var ii=function(){return(ii=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},oi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ai=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function si(e){return oi(this,void 0,void 0,(function(){var t,n,r;return ai(this,(function(i){switch(i.label){case 0:return t=e.pubId,(r=function(e){var t=document.getElementById((n=e,"".concat(xe).concat(n)));var n;return t?ci(t.contentWindow):null}(t))?[3,2]:[4,ui(e)];case 1:r=i.sent(),i.label=2;case 2:if(!(n=r))throw new Error("Error loading the TAM API for pubId: ".concat(t));return[2,n]}}))}))}function ci(e){return e.apstag}function ui(e){return oi(this,void 0,void 0,(function(){var t,n,r,i;return ai(this,(function(o){switch(o.label){case 0:return t=e.tamConfig,n=e.players,[4,k()];case 1:return(r=o.sent())?(i=r.contentWindow,je(r,t.pubId),function(e){(function(e){var t=e.document.getElementsByTagName("link");return Array.from(t).some((function(e){return"https://c.amazon-adsystem.com"===e.href}))})(e)||li(e)}(window),li(i),function(e){e.__tcfapi=window.__tcfapi}(i),function(e){Object.defineProperty(e,"innerWidth",{writable:!0,configurable:!0,value:window.innerWidth}),Object.defineProperty(e,"innerHeight",{writable:!0,configurable:!0,value:window.innerHeight})}(i),n.isAmp&&function(e){try{window.name&&(e.context=ii(ii({},JSON.parse(window.name)),{tagName:"AMP-AD"}))}catch(e){}}(i),(a=i).apstag=a.apstag||{_Q:[],init:function(){a.apstag._Q.push(["i",arguments,(new Date).getTime()])},fetchBids:function(){a.apstag._Q.push(["f",arguments,(new Date).getTime()])}},function(e,t){var n;e.__EXCO=e.__EXCO||{tamInitialized:!1},e.__EXCO.tamInitialized||(e.__EXCO.tamInitialized=!0,e.apstag.init({pubID:t.pubId,deals:null===(n=t.deals)||void 0===n||n,videoAdServer:"EX.CO",bidTimeout:8e3}))}(i,t),[4,di(i)]):[3,3];case 2:return o.sent(),[2,ci(i)];case 3:return[2]}var a}))}))}function li(e){var t=e.document,n=t.createElement("link");n.rel="dns-prefetch",n.href="https://c.amazon-adsystem.com",t.head.appendChild(n);var r=document.createElement("link");r.rel="preconnect",r.href="https://c.amazon-adsystem.com",t.head.appendChild(r)}function di(e){return new Promise((function(t,n){try{var r=e.document,i=r.createElement("script");i.src="https://c.amazon-adsystem.com/aax2/apstag.js",i.async=!0,i.onload=function(){return t()},r.head.appendChild(i)}catch(e){n()}}))}var pi=function(){return(pi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},fi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},hi=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function vi(e){return fi(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return hi(this,(function(c){switch(c.label){case 0:return t=e.players,e.state=et.Prefetching,[4,mi(e)];case 1:return n=c.sent(),t.auctionTracker.trackBidRequest(e,e.floorPrice),[4,yi(n,e)];case 2:return(r=c.sent()).length>0?(i=function(e,t){var n=e.slotId;return t.find((function(e){return e.slotID===n}))||null}(e,r),(o=function(e){var t,n,r=e.targeting,i=null;i=r&&!Array.isArray(r)?r.amzniid||r.amzniid_sp?{iid:r.amzniid||r.amzniid_sp,bid:r.amznbid||r.amznbid_sp,pmp:!!r.amznbid_sp}:null:e.amzniid||e.amzniid_sp?{iid:e.amzniid||e.amzniid_sp,bid:e.amznbid||e.amznbid_sp,pmp:!!e.amznbid_sp}:null;i&&(null===(n=null===(t=window.location)||void 0===t?void 0:t.href)||void 0===n?void 0:n.includes("amzn_debug_mode=1"))&&(i.debug=1);return i}(i))?[4,Ai(e,o)]:(we.a.error("TAM bid did not contain targeting",{error:new Error,demand:e,bid:i}),[2,!1])):[3,4];case 3:return a=c.sent(),t.auctionTracker.trackBidResponse(e,+a),s=function(e){return"https://aax.amazon-adsystem.com/e/dtb/vast?b=".concat(e.iid).concat(e.pmp?"":"&pp=".concat(e.bid),"&rnd=").concat(Math.round((new Date).getTime()/1e3))}(o),function(e,t){var n=t.vastURL,r=t.priority,i=void 0===r?0:r;e.vastURL=n,e.impressionData={pricing:+i,currency:"USD",impType:"TAM"}}(e,{vastURL:s,priority:a}),[2,!0];case 4:return e.state=et.Finished,[2,!1]}}))}))}function mi(e){return fi(this,void 0,void 0,(function(){return hi(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,si(e)];case 1:return[2,t.sent()];case 2:throw t.sent();case 3:return[2]}}))}))}function yi(e,t){return fi(this,void 0,void 0,(function(){return hi(this,(function(n){switch(n.label){case 0:return[4,new Promise((function(n,r){try{e.fetchBids(function(e){var t=e.slotId,n=e.floorPrice;return{slots:[pi({slotID:t,mediaType:"video",timeout:"8000"},gi(n))]}}(t),(function(e){return n(e)}))}catch(e){r([])}}))];case 1:return[2,n.sent()]}}))}))}function gi(e){return void 0===e&&(e=null),e&&e>.01?{floor:{value:Math.floor(100*e),currency:"USD"}}:{}}function Ai(e,t){return fi(this,void 0,void 0,(function(){var n;return hi(this,(function(r){return n={amznbid:t.bid,debug:t.debug},[2,bi(ee(e.tamProxy,n),e)]}))}))}function bi(e,t){return fi(this,void 0,void 0,(function(){var n;return hi(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,rt(e)];case 1:return[2,r.sent().cpm];case 2:return n=r.sent(),we.a.error("TAM mapping error: ".concat(n.message),{error:n,vastId:t.vastId}),[2,t.floorPrice];case 3:return[2]}}))}))}function Ei(e){e.plist.filter((function(e){return"rtb"===e.type})).forEach((function(t){t.vastURL=function(e,t){var n=e.gdprConsentString,r=e.gdprConsentApplies,i=t;return"boolean"==typeof r&&(i=j(i,"gdpr",r?"1":"0")),n&&(i=j(i,"gdpr_consent",n)),i}(e,t.vastURL),t.vastURL=function(e,t){var n=Cn(e),r=j(t,"placement",n.placement);return j(r,"plcmt",n.plcmt)}(e,t.vastURL),t.vastURL=function(e,t){var n=t;return Object.entries(e.skipParams).forEach((function(e){var t=e[0],r=e[1];n=j(n,t,r)})),n}(e,t.vastURL)}))}var _i=function(e,t){var n=function(e){var t=Math.max.apply(Math,e.map((function(e){return e.priority||0})));return e.filter((function(e){return(e.priority||0)===t}))}(t);return n=function(e,t){return t.filter((function(t){return!t.requireViewability||e.partiallyInView}))}(e,n)},wi=function(e){var t=e[0];return e.forEach((function(e){er(e)>er(t)&&(t=e)})),t},Ti=function(e,t){var n=t.filter((function(e){return kt(e)})),r=n.length>0?n:t;return wi(_i(e,r))};function Ii(e){return e?(e^16*Math.random()>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,Ii)}var Si=function(){return(Si=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Oi=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ci=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ki=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Pi=function(){function e(e,t){this._ads=[],this._demandList=[],this._isFetching=!1,this._refreshIntervalRef=null,this._auctionId=0,this._players=e,this._priceService=t}return Object.defineProperty(e.prototype,"pending",{get:function(){return this.getAdsByState(this._ads,et.Fetched)},enumerable:!1,configurable:!0}),e.prototype.init=function(){this._refreshIntervalRef=setInterval(this._refresh.bind(this),1e3)},e.prototype.fetchAds=function(e){var t=(void 0===e?{}:e).exclude,n=void 0===t?[]:t;return Oi(this,void 0,void 0,(function(){var e=this;return Ci(this,(function(t){return[2,new Promise((function(t){return Oi(e,void 0,void 0,(function(){var e,r,i,o,a=this;return Ci(this,(function(s){switch(s.label){case 0:return this._shouldDoAuction()?(this._auctionId++,e=this,[4,this._getDemandsToFetch(n)]):(we.a.log("Fetching ads aborted - fetch is already in progress"),[2]);case 1:return e._demandList=s.sent(),this._isFetching=!0,this._players.fetchTime=Date.now(),this._allFetchedPromise(this._demandList).then((function(){a._isFetching=!1,we.a.info("Auction ended",{auctionId:a._auctionId,pending:a.pending}),ct.b.emit(ct.a.INTERNAL.AUCTION.END,{auctionId:a._auctionId,pending:a.pending}),t(a.pending)})),this._players.plist.filter((function(e){return e.state>et.Playing})).forEach((function(e){return e.destroyAd()})),this._players.plist=ki(ki([],this._players.plist,!0),this._demandList,!0),this._players.gpvDataUpdated&&(this._players.gpvDataUpdated=!1,Bn(this._players)),this._startAuctionTracking(this._players),we.a.log("".concat(this._auctionId," Fetching ").concat(this._demandList.length," new demands"),this._demandList.map((function(e){return e.vastId}))),r=this._separateGroups(this._demandList),i=r[0],o=r[1],[4,sn(this._fetchPrimaryDemands(i),3e3,[])];case 2:return s.sent(),o.length>0&&this._fetchSecondaryDemands(o),[2]}}))}))}))]}))}))},e.prototype._allFetchedPromise=function(e){return new Promise((function(t){var n=new Set;e.forEach((function(r){return r.onStateChange((function(i){i>=et.Fetched&&!n.has(r)&&(n.add(r),n.size===e.length&&t(Array.from(n).filter((function(e){return e.state===et.Fetched}))))}))}))}))},e.prototype._startAuctionTracking=function(e){var t=this._players.auctionTracker.endAuction();t&&function(e,t){var n,r;if(e.auctionEventSession&&e.eventDispatcher&&e.eventDispatcher.send){var i={aid:null==(n=t)?void 0:n.index,type:null==n?void 0:n.type,dList:Array.from((null==n?void 0:n.dList.values())||[]),time:null==n?void 0:n.time,mv:null===(r=null==e?void 0:e.flamingoModule)||void 0===r?void 0:r.name,flamingo:e.isFlamingoOn};we.a.log("Auction Report Sent",i),e.eventDispatcher.send(Nr,{extraData:{ar:i}})}}(this._players,t),this._players.auctionTracker.startAuction(e)},e.prototype.clearCache=function(){this._ads=[],we.a.log("Clearing cache")},e.prototype._separateGroups=function(e){return Nn(e,(function(e){return!function(e){return kt(e)}(e)}))},e.prototype._fetchPrimaryDemands=function(e){we.a.log("Primary Fetch",{fetching:e.map((function(e){return{id:e.vastId,bidder:e.bidder,type:e.type,debug:e.gpvDemand}})),cached:this.pending.map((function(e){return{id:e.vastId,type:e.type}})),stage:nr.b.FETCH_PRIMARY}),this._initDemands(e);var t=Nn(e,(function(e){return function(e){return"prebid"===e.type}(e)})),n=t[0],r=t[1];return this._fetchVasts(this._players,r),this._fetchPrebids(this._players,n),this._allFetchedPromise(e)},e.prototype._fetchSecondaryDemands=function(e){var t=this._priceService.getFactoredSecondaryPrice(Ti(this._players,this._ads)),n=this._filterSecondaryDemands(e,t);this._initDemands(n,t),we.a.log("Secondary Fetch: floorPrice ".concat(t),{fetching:n.map((function(e){return{id:e.vastId,type:e.type}})),cached:this.pending.map((function(e){return{id:e.vastId,type:e.type}})),stage:nr.b.FETCH_SECONDAY}),this._fetchVasts(this._players,n)},e.prototype._filterSecondaryDemands=function(e,t){var n=this;return e.filter((function(e){return Dt(n._players,e)||$n(e)>=t}))},e.prototype._initDemands=function(e,t){this._setupDemandObject(this._players,e),this._setFloorPrice(e,t),this._setRtbParams(this._players,e)},e.prototype.getAds=function(e){return Oi(this,void 0,void 0,(function(){var t=this;return Ci(this,(function(n){return[2,new Promise((function(n){if(!t._players.monetize)return n([]);if(t._isDoneFetching())return t._isFetching=!1,n(t.getAdsByState(t._ads,et.Fetched));var r=e.timeout,i=+new Date;we.a.log("Start Retry Fetching",{timeout:r});var o=setInterval((function(){var e=+new Date-i;(t._isDoneFetching()||e>=r)&&(t._isFetching=!1,we.a.log("Done Retry Fetching",{diff:e,stage:nr.b.FETCH_DONE}),n(t.getAdsByState(t._ads,et.Fetched)),clearInterval(o))}),100)}))]}))}))},e.prototype._refresh=function(){this._isFetching&&this._isDoneFetching()&&(this._isFetching=!1,this._refreshIntervalRef&&clearInterval(this._refreshIntervalRef))},e.prototype._isGpvDataEmpty=function(){return 0===this._getGpvDemand().length},e.prototype._getGpvDemand=function(){return this._players.gpvData.filter((function(e){return"c"!==e.id}))},e.prototype._isDoneFetching=function(){return!this._demandList.some((function(e){return function(e){return et.ScheduledFetch<=e.state&&e.state<et.Fetched}(e)}))},e.prototype.getAdsByState=function(e,t){return e.filter((function(e){return e.state===t}))},e.prototype._addAdToStack=function(e){this._ads.push(e),this._stampCashEntry(e)},e.prototype._getDemandsToFetch=function(e){return void 0===e&&(e=[]),Oi(this,void 0,void 0,(function(){var t,n;return Ci(this,(function(r){switch(r.label){case 0:return[4,this._createNewFetchList()];case 1:return t=r.sent(),n=this._filterCappedAds(this._filterNonCachedDemands(this._filterExcludedDemands(t,e))),[2,(i=this._players,o=n,i.isIvt&&(o=o.filter((function(e){return!e.ivtBlock}))),o)]}var i,o}))}))},e.prototype._filterNonCachedDemands=function(e){var t=this.pending.map((function(e){return e.vastId}));return e.filter((function(e){return!t.includes(e.vastId)}))},e.prototype._filterExcludedDemands=function(e,t){void 0===t&&(t=[]);var n=t.map((function(e){return e.vastId}));return e.filter((function(e){return!n.includes(e.vastId)}))},e.prototype._filterCappedAds=function(e){return e.filter((function(e){if(!e.capping)return!0;var t=e.capping,n=t.current,r=t.imp;return(null==n?void 0:n.imp)<r}))},e.prototype._createNewFetchList=function(){return Oi(this,void 0,void 0,(function(){var e,t=this;return Ci(this,(function(n){switch(n.label){case 0:return[4,this.getPluginDemands()];case 1:return e=n.sent(),[2,ki(ki([],e,!0),this._getGpvDemand(),!0).map((function(e){return t._initPlayerData(new sr(t._players,e),t._players)}))]}}))}))},e.prototype.getPluginDemands=function(){return Oi(this,void 0,void 0,(function(){var e,t;return Ci(this,(function(n){switch(n.label){case 0:return[4,ct.b.emitAsync(ct.a.PLUGIN.ACTION.AUCTION,{players:this._players})];case 1:return e=n.sent(),(t=(e||[]).reduce((function(e,t){return e.concat(t)}),[])).length>0&&we.a.debug("New Plugin Fetch List",{pluginDemands:t}),[2,t||[]]}}))}))},e.prototype._setupDemandObject=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i.state==et.None&&this._initPlayerData(i,e)}},e.prototype._shouldDoAuction=function(){return this._players.monetize&&!this._isFetching&&!this._isGpvDataEmpty()},e.prototype._fetchPrebids=function(e,t){var n=this;if(t.length>0)return t.forEach((function(t){ta(t),e.serverEvents.demandEvent(t,{name:"startVastPrefetch"}),e.eventDispatcher.sendRequestEvent(t,e),e.auctionTracker.trackBidRequest(t,t.floorPrice)})),Jn(e).then((function(e){return n.onPrebidAuctionSuccess(e)}),this.onPrebidAuctionError.bind(this))},e.prototype.onPrebidAuctionError=function(){},e.prototype.onPrebidAuctionSuccess=function(e){var t=this;void 0===e&&(e=[]);var n=e.map((function(e){return e.playerData.vastId}));this._demandList.filter((function(e){return t._isPrebid(e)&&!n.includes(e.vastId)})).forEach((function(e){e.state=et.Finished}));for(var r=0,i=e;r<i.length;r++){var o=i[r],a=o.playerData;if(a.flowTimeout.cancel(),!1===o.vast||null===o.vast)return void ha(this._players,a,34,{code:80,message:"prefetch - no vast",retryCount:a.retryCount});this._players.serverEvents.demandTimedEvent(a,Si({name:"VastPrefetched",retryCount:a.retryCount},a.impressionData&&{pricing:a.impressionData.pricing,currency:a.impressionData.currency})),this._fetchVast(this._players,a)}},e.prototype._fetchVasts=function(e,t){var n=this;t.forEach((function(t){return n._resolveVast(e,t)}))},e.prototype._resolveVast=function(e,t){(function(e,t){if(!t.video)return!1;return t.skipVastTracker=!0,t.creative={},t.adType="video",t.mediaURL=t.video.url,t.adClickUrl=t.video.click,ta(t),!0})(0,t)||(e.eventDispatcher.sendRequestEvent(t,e),this._isTAM(t)?(t.prefetch=function(){return e.serverEvents.demandEvent(t,{name:"startVastPrefetch"}),vi(t)},this._prefetchVast(e,t)):this._fetchVast(e,t))},e.prototype._isPrebid=function(e){return!!e.prebidConfig},e.prototype._setRtbParams=function(e,t){Ei(e),function(e,t){var n=e.eids;n&&t.filter((function(e){return"rtb"===e.type})).filter((function(e){return!e.vastURL.includes("&eids")})).forEach((function(e){var t=[];bn(t,n,"id5"),bn(t,n,"iiq"),bn(t,n,"lexicon"),t.length>0&&(e.vastURL+="&eids=".concat(btoa(JSON.stringify(t))))}))}(e,t)},e.prototype._isTAM=function(e){return"tam"===e.type},e.prototype._prefetchVast=function(e,t){var n=this;ta(t);var r=t.prefetch(t),i=r,o=function(r,i){t.state==et.Prefetching&&(t.flowTimeout.cancel(),!1!==r&&null!==r&&("string"==typeof r&&(t.vastURL=r),i&&e.serverEvents.demandTimedEvent(t,Si({name:"VastPrefetched",retryCount:t.retryCount},t.impressionData&&{pricing:t.impressionData.pricing,currency:t.impressionData.currency})),n._fetchVast(e,t)))};(null==i?void 0:i.then)?i.then((function(e){return o(e,!0)})):o(r)},e.prototype._fetchVast=function(e,t){t.state=et.Fetching;var n,r=t.vastXml,i=t.vastURL;if(!r){if(!i||"#"==i[0]||!i.trim())return;!function(e,t){(function(e,t){return null!=e.useIMA?e.useIMA:function(e){return null!=e.match(/\/\/[^/]*g\.doubleclick\.net/)}(t)})(e,t)&&function(e,t){e.vastURL=t,e.mediaURL=t,e.adType="jsima"}(e,t)}(t,n=Ut(e,t)(i))}ta(t),e.auctionTracker.trackRequest(t,t.floorPrice),t.fetchAdUrl(n,this._handleAdFetched.bind(this))},e.prototype._handleAdFetched=function(e,t){oa(e,t),this._addAdToStack(t),t.state=et.Fetched,e.auctionTracker.trackResponse(t,er(t)),e.eventDispatcher.sendResponseEvent(t,e),ct.b.emit(ct.a.INTERNAL.AD.FETCHED,{ad:t}),we.a.log("Ad Fetched",{demand:t,stage:nr.b.AD_FETCH})},e.prototype._stampCashEntry=function(e){e.cacheEntryTime=new Date},e.prototype._isRTB=function(e){return"rtb"===e.type},e.prototype._setFloorPrice=function(e,t){var n=this;e.forEach((function(e){var r,i;e.floorPrice=t||n._priceService.getFloor(e),n._isRTB(e)&&function(e,t){e.vastURL=j(e.vastURL,"nfcpm",t)}(e,e.floorPrice),n._isPrebid(e)&&(r=e,i=e.floorPrice,r.floorPrice=Math.max(i,.3))}))},e.prototype.removeAdFromCache=function(e){e.state=et.Finished;var t=this._ads.indexOf(e);-1!==t&&this._ads.splice(t,1),we.a.log("Removing ".concat(e.vastId," from cache"),{id:e.vastId,type:e.type})},e.prototype._initPlayerData=function(e,t){return e.state=et.Prefetching,e.guid=Ii(!1),e.loadAdTime=Date.now(),e.retryCount++,e.totalRoundNo++,t.totalVastRetries++,e.ad=null,e.creative=null,e.mediaURL="",e.adType=null,e.firedEvents={},e.vastTracker=null,e.skipVastTracker=!1,e.hasJSVPAID=!1,e.initVpaidOnStartDone=!1,e.transactionId=this._auctionId,function(e){return"tam"===e.type}(e)&&function(e){e.adType="tam"}(e),e},e}();var Di,Ri=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Li=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},xi=function(){function e(e,t){this._currentSlotType=In.BREAKING_ADS,this._lastAuctionTime=null,this._playingAd=null,this._currentSlotImpCount=0,this._isActiveSlot=!1,this._emptyAuctionCount=0,this._players=e,this._content=t,this._config=function(e){var t={enabled:!0,maxImpressions:99,interval:5};return{startingPrice:e.sessionTarget,startingPricePub:e.globalPricing&&e.sessionTargetPub?e.sessionTargetPub:e.sessionTarget,auctionInterval:t.interval,timeToFetchBeforeAdEnd:7,breakingAds:t}}(e),this._priceService=new tr(e,{startingPrice:this._config.startingPrice,startingPricePub:this._config.startingPricePub}),this._auctionManager=new Pi(e,this._priceService)}return e.prototype.init=function(){var e=this;if(we.a.info("ICOAR mode initialized",this._config),this._players.monetize&&!this._players.closed){this._isActiveSlot=!1,this._listen();var t=setInterval((function(){return e._reassess()}),1e3);this._players.apiInterface.on("closed",(function(){t&&clearInterval(t)})),this._auctionManager.init(),this._fetchAds(),this._endSlot({playAdContent:!1})}},e.prototype._reassess=function(){this._players.closed||this._shouldStartAuction()&&this._fetchAds()},e.prototype._fetchAds=function(){var e=this;this._lastAuctionTime=null;var t,n,r=kt(this._playingAd)?[this._playingAd]:[];if(this._playingAd){var i=(t=this._auctionManager.pending,n=wi(t),wi(t.filter((function(e){return e!==n})))||n),o=i?.9*er(i):null;o&&this._priceService.setSecondPrice(o)}this._auctionManager.fetchAds({exclude:r}).then((function(){e._factorInterval(),e._lastAuctionTime=new Date,e._isActiveSlot||e._startSlot()}))},e.prototype._factorInterval=function(){0===this._auctionManager.pending.length?this._emptyAuctionCount++:this._emptyAuctionCount=0,this._emptyAuctionCount>4&&this._emptyAuctionCount<10&&(this._config.auctionInterval=1.5*this._config.auctionInterval,we.a.info("Increasing auction interval by a factor of 1.5 - interval set to ".concat(this._config.auctionInterval))),this._emptyAuctionCount>=10&&this._emptyAuctionCount<20&&(this._config.auctionInterval=5*this._config.auctionInterval,we.a.info("Increasing auction interval by a factor of 5 - interval set to ".concat(this._config.auctionInterval))),20===this._emptyAuctionCount&&(this._config.auctionInterval=null,we.a.info("Empty auction limit hit - Stopping auction"))},e.prototype._listen=function(){var e=this;this._players.on(Ve.AD_STARTED,this._onAdStart.bind(this)),this._players.on(Ve.AD_COMPLETE,(function(){return e._onAdComplete({playAdContent:!0})})),this._players.on(Ve.AD_ERROR,this._onAdError.bind(this)),this._players.on(Ve.AD_SKIPPED,this._onAdSkipped.bind(this))},e.prototype._onAdStart=function(e){var t=e.apiImpressionData,n=e.playerData;this._playingAd=n,this._currentSlotImpCount++,ja(this._players,n,"ad.start",this._enrichAPIImpressionData(t,n)),this._players.auctionTracker.trackImpression(n,er(n))},e.prototype._enrichAPIImpressionData=function(e,t){return e.slotType=this._currentSlotType===In.PLAYER_START?In.PRE_ROLL:this._currentSlotType,e.hasUI=Pt(t),e},e.prototype._onAdComplete=function(e){we.a.info("Ad Complete: ".concat(this._playingAd.vastId,"; Impressions left: ").concat(this._getCurrentSlotMaxImps()-this._currentSlotImpCount)),this._playingAd.destroyAd(),this._shouldEndSlot()?this._endSlot(e):this._playNextAd()},e.prototype._shouldEndSlot=function(){return this._currentSlotImpCount===this._getCurrentSlotMaxImps()},e.prototype._onAdError=function(e){var t=e.error,n=e.playerData,r=n.getErrorEvent(t);this._playingAd&&this._playingAd===n&&(we.a.error("Ad Error ".concat(r.event.name,": vastId - ").concat(n.vastId,"; error - ").concat(t.message),{error:t,playerData:n}),this._onAdComplete({playAdContent:!1}))},e.prototype._onAdSkipped=function(e){we.a.log("Ad Skipped: vastId - ".concat(e.vastId)),this._auctionManager.removeAdFromCache(e),this._onAdComplete({playAdContent:!1})},e.prototype._shouldStartAuction=function(){var e=this._config.auctionInterval;return!this._isPlayerPaused()&&null!==this._config.auctionInterval&&(!!this._lastAuctionTime&&e<=Ct(this._lastAuctionTime,new Date))},e.prototype._isPlayerPaused=function(){return this._playingAd?this._playingAd.isPaused:this._content.paused},e.prototype._startSlot=function(){this._isActiveSlot=!0,we.a.log("Starting Slot - ".concat(this._currentSlotType)),!this._players.auctionTracker.activeAuction&&this._players.auctionTracker.startAuction(this._players),this._players.adSlotCurrentType=this._currentSlotType,ja(this._players,null,"ad.slot.start"),this._playNextAd()},e.prototype._playNextAd=function(){return Ri(this,void 0,void 0,(function(){var e,t;return Li(this,(function(n){switch(n.label){case 0:return[4,this._auctionManager.getAds({timeout:0})];case 1:return e=n.sent(),this._logAdsInCache("Play Next Ad"),(t=this._selectAd(e))?(we.a.log("Chosen Ad - ".concat(t.type," - ").concat(t.vastId," - price ").concat(er(t)),t),this._playAd(t)):(we.a.log("No ad cached - ending slot"),this._endSlot({playAdContent:!1})),[2]}}))}))},e.prototype._selectAd=function(e){var t=this._getEligibleAdsForSlot(e);return Ti(this._players,t)},e.prototype._getEligibleAdsForSlot=function(e){return 1===e.length||this._isLastAdInSlot()?e:e.filter((function(e){return!e.adContent}))},e.prototype._isLastAdInSlot=function(){return this._currentSlotImpCount===this._getCurrentSlotMaxImps()-1},e.prototype._getCurrentSlotMaxImps=function(){return this._config.breakingAds.maxImpressions},e.prototype._playAd=function(e){var t=er(e),n=$n(e);t<n&&we.a.log("Playing bid lower than floor price",{vastId:e.vastId,responseCPM:t,floor:n}),this._playingAd=e,this._auctionManager.removeAdFromCache(e),e.initMedia()},e.prototype._endSlot=function(e){var t;this._isActiveSlot=!1,this._currentSlotImpCount=0,this._priceService.resetSecondPrice(),(null===(t=this._playingAd)||void 0===t?void 0:t.adContent)&&e.playAdContent&&this._insertAdContent(),this._playingAd=null,this._players.emit(Ve.SLOT_END,{numOfImps:this._currentSlotImpCount}),ja(this._players,null,"ad.slot.end"),we.a.log("Ending Slot - ".concat(this._currentSlotType))},e.prototype._insertAdContent=function(){var e=L(I(this._playingAd.adContent))[0];this._content.insertAdContent({url:e})},e.prototype._logAdsInCache=function(e){var t=this._auctionManager.pending;we.a.log("".concat(e," - Ads in cache - ").concat(t.length),t.map((function(e){return{id:e.vastId,type:e.type,bidder:e.bidder,price:er(e),state:et[e.state],priority:e.priority}})))},e}();function Ni(e){setTimeout((function(){e.content.pause()}),10)}function ji(e){e.content.hide()}function Ui(e){e.content.show()}function Vi(e){setTimeout((function(){e.content.play()}),10)}function Mi(e){Ni(e)}function Fi(e){Vi(e),e.monetize&&function(e){setTimeout((function(){Sa(e,null),e.anyPlaying&&ji(e)}),10)}(e)}function Bi(e){e.monetize?(Ni(e),e.on(Ve.SLOT_START,(function(t){t.slotType===In.PRE_ROLL&&(Ni(e),ji(e))})),e.on(Ve.AD_STARTED,(function(){Ni(e),ji(e)})),e.on(Ve.SLOT_END,(function(){Vi(e),Ui(e)}))):Vi(e)}function qi(e){e.monetize?(e.content.paused=!0,e.on(Ve.SLOT_END,(function(){Vi(e),Ui(e)}))):Mi(e)}function Hi(e){Mi(e),e.once(Ve.PLAYER_FIRST_VIEW,(function(){Fi(e),e.on(Ve.SLOT_END,(function(){Ui(e)}))}))}function Wi(e){Fi(e);var t=!0;e.on(Ve.PLAYER_OUT_OF_VIEW,(function(){t||Ni(e),t=!1})),e.on(Ve.PLAYER_IN_VIEW,(function(){t||Vi(e),t=!1})),e.on(Ve.SLOT_END,(function(){Ui(e)}))}function Gi(e){Mi(e);var t=!0;e.on(Ve.PLAYER_OUT_OF_VIEW,(function(){t||Mi(e),t=!1})),e.on(Ve.PLAYER_IN_VIEW,(function(){Fi(e),t=!1})),e.on(Ve.SLOT_END,(function(){Ui(e)}))}function Ji(e){var t=Te("PCount",{players:e},(function(){var t,n,r;return null===(r=null===(n=null===(t=e.ioc)||void 0===t?void 0:t.tag)||void 0===n?void 0:n.players)||void 0===r?void 0:r.length}));!function(e){var t=Yi(e);if(!t)return;e.widthDetected=t.width,e.heightDetected=t.height,he(e,te.E_DETECTED,{},{})}(e),e.serverEvents.supplyEvent({name:"SupplyLoaded",instanceCount:t}),function(e){e.serverEvents.serverEventUrl=-1===e.eventServer2.indexOf("//")?e.serverHost(e.eventServer2)+e.serverEvents.serverEventRoute:(t=e.protocol,n=e.eventServer2,n.indexOf("//")>0?W(t,n):t+(0==n.indexOf("//")?"":"//")+n),e.serverEvents.DryRun=!1;var t,n}(e),function(e){if(Re){var t=e.ownerDocument.createElement("style");t.type="text/css",t.innerHTML=Re,function(){var t=e.ownerDocument;try{if(e&&e.getRootNode&&(t=e.getRootNode()),t!==e.ownerDocument)return t}catch(e){}return t.getElementsByTagName("head")[0]}().appendChild(t),Re=null}}(e.rootDivElem),function(e){e.widthOverwrite&&e.heightOverwrite?(e.width=e.widthOverwrite,e.height=e.heightOverwrite,e.rootDivElem.style.width=e.width+"px",e.rootDivElem.style.height=e.height+"px"):e.widthDetected&&e.heightDetected&&0!==e.widthDetected&&0!==e.heightDetected&&(!e.sizeTolerance||Math.abs(e.width-e.widthDetected)>e.sizeTolerance||Math.abs(e.height-e.heightDetected)>e.sizeTolerance)&&(e.width=e.widthDetected,e.height=e.heightDetected)}(e),function(e){e.divElem=document.createElement("div"),e.rootDivElem.appendChild(e.divElem),je(e.divElem,"root_container"),Ue(e.divElem,e.info.mobile?"mobile":"desktop"),e.controlsTouch&&Ue(e.divElem,"new_ui");e.divElem.id="__exco_root_container"}(e);var n=De(e);if(e.playerReadyResolve(),Vt(e,null,"ready"),ja(e,null,"player.ready",{rootDiv:e.rootDivElem}),e.started=!0,e.autoplay=!0,e.paused=!1,e.content.setVolume(e.volume,e.muted,!1),e.serverEvents.supplyEvent({name:"SupplyStarted"}),e.clickToPlay&&(e.chilled=!0),e.closed)return!1;var r=function(e,t){return new xi(e,t)}(e,n);!function(e){var t=new At(e.divElem,{threshold:[.1,.5]}),n=function(e){return e.visible&&e.entry.intersectionRatio>=.5},r=!1;t.observe(e.divElem,(function(t){e.partiallyInView=function(e){return e.visible&&e.entry.intersectionRatio>.1}(t),n(t)&&!r&&(r=!0,e.emit(Ve.PLAYER_FIRST_VIEW),ja(e,null,Ve.PLAYER_FIRST_VIEW)),n(t)?(e.isInView=!0,e.emit(Ve.PLAYER_IN_VIEW),ja(e,null,Ve.PLAYER_IN_VIEW)):(e.isInView=!1,e.emit(Ve.PLAYER_OUT_OF_VIEW),ja(e,null,Ve.PLAYER_OUT_OF_VIEW))}))}(e),function(e){var t,n=e.playbackMode;we.a.info("Starting Playback: ".concat(n));var r=((t={})[Di.AUTO_PLAY]=Bi,t[Di.AD_TO_PLAY]=Bi,t[Di.CLICK_TO_PLAY]=qi,t[Di.AUTO_PLAY_IN_VIEW]=Hi,t[Di.AUTO_PLAY_PAUSE_OUT_OF_VIEW]=Wi,t[Di.PLAY_IN_VIEW_PAUSE_OUT_OF_VIEW]=Gi,t),i=r[n];i?i(e):r[Di.AUTO_PLAY](e),e.once(Ve.CONTENT_START,(function(){e.on(Ve.SLOT_END,(function(){return Vi(e)})),e.on(Ve.AD_ERROR,(function(){return Vi(e)})),e.on(Ve.AD_SKIPPED,(function(){return Vi(e)})),e.on(Ve.AD_STARTED,(function(){return Ni(e)}))})),ct.b.on(ct.a.PLAYER.ACTION.PAUSE,(function(){Mi(e)}))}(e),r.init(),ja(e,null,"player.started")}function Yi(e){if(e.rootDivElem){var t=e.rootDivElem.offsetWidth,n=e.rootDivElem.offsetHeight;if(t&&n&&0!==t&&0!==n||(t=e.rootDivElem.clientWidth,n=e.rootDivElem.clientHeight),!t||!n||0===t||0===n){var r=e.rootDivElem.getBoundingClientRect();t=r.width,n=r.height}return{width:t,height:n}}}!function(e){e.AUTO_PLAY="auto-play",e.AD_TO_PLAY="ad-to-play",e.CLICK_TO_PLAY="click-to-play",e.AUTO_PLAY_IN_VIEW="auto-play-in-view",e.AUTO_PLAY_PAUSE_OUT_OF_VIEW="auto-play-pause-out",e.PLAY_IN_VIEW_PAUSE_OUT_OF_VIEW="play-in-view-pause"}(Di||(Di={}));var zi=function(){return(zi=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Xi(e,t,n,r){return Te("playPlayer",{players:e,playerData:t,log:!0},(function(){if(!t.allowedDueToSound(n))return!1;var i;!function(e,t){if(!t.durationKnown)if("jsvpaid"==t.adType)t.duration=t.suggestedDuration;else if("video"==t.adType){t.durationKnown=!0;try{t.duration=t.videoElement.duration}catch(e){}}}(0,t),t.gotAdImpression=!1,t.adStartCount=0,t.startAdTime=Date.now(),t.state=et.Started;try{e.serverEvents.demandEvent(t,zi({name:"startAd"},r));var o=Yi(e);o&&e.width!==o.width&&e.height!==o.height&&Oa(e,"normal"),e.auctionTracker.trackStartAd(t,er(t)),e.eventDispatcher.sendStartAdEvent(t,e),ct.b.emit(ct.a.AD.STARTED,{demand:t}),we.a.log("Ad Start",{stage:nr.b.AD_START,demand:t}),i=t.startAd(n)}catch(e){i=e.message}return i&&(dt(e,t.vastId,42,i,null,t,!1),ha(e,t,17,{code:42,message:i})),!i}),(function(){return!1}))}function Ki(e,t,n){t.duration=n,t.initNonLinearCompleter(),t.durationKnown=!0,t.vastTracker&&(t.vastTracker.duration=t.duration,t.vastTracker.setDuration(t.duration)),ia(e)==t&&(ja(e,t,"player.durationChange"),e.beingVpaid&&(ga(e,"jsAdDurationChange",{duration:n}),ga(e,"jsAdRemainingTimeChange",{remainingTime:n})))}function Qi(e,t,n){t.nonLinearCompleteTimer.cancel(),t.nonLinearCompleteTimer=A.Seconds(n),t.nonLinearCompleteTimer.start().then((function(){t.state==et.Playing&&Ao(e,t)})).catch((function(){}))}function Zi(e,t){var n;e.serverEvents.demandEvent(t,{name:"initAd"}),t.flowTimeout.Seconds(t.timers.loadAd).start().then((function(){dt(e,t.vastId,31,"",null,t,!1),ha(e,t,31,{code:31,message:""})})).catch((function(){}));try{t.state=et.Initing,n=t.initAd()}catch(e){n=e.message}n&&(dt(e,t.vastId,32,n,null,t,!1,!0),ha(e,t,16,{code:32,message:n}))}function $i(e,t){t.flowTimeout.Seconds(t.timers.startAd).start().then((function(){aa(e,t),dt(e,t.vastId,41,"",null,t,!1),ha(e,t,18,{code:41,message:""})})).catch((function(){}))}function eo(e,t){t.firedEvents.AdLoaded||(t.firedEvents.AdLoaded=!0,null!=t.requeryTimeout&&(clearTimeout(t.requeryTimeout),t.requeryTimeout=null),t.state<et.Loading||t.state==et.Error||t.state>et.Initing&&t.state<et.Error||(t.flowTimeout.cancel(),t.state=e.intent?et.Pending:et.Ready,t.priorityTieBreaker++,e.serverEvents.demandTimedEvent(t,{name:"AdLoaded"}),function(e,t){var n=(((new Date).getTime()-t.loadAdTime)/1e3).toFixed(1);St(e,te.E_LOADED,t,{time:n,memUsed:null,vastType:Tt(t),actualVastType:wt(t)}),_t(t)&&he(e,te.E_SERVED_AND_START,{},{playerId:t.playerId})}(e,t),ja(e,t,"ad.loaded",e.mediaPreview?{mediaUrl:t.vpaidJsIframeVideo&&t.vpaidJsIframeVideo.src||""}:null),e.beingVpaid&&ga(e,"jsAdReadyToStart",{}),Xi(e,t,!1)))}function to(e,t,n){var r=n.errorMsg;if(t.firedEvents.AdError=!0,!(t.state<=et.Loading&&"jsima"!=t.adType||t.state==et.Finished)){var i=function(e){var t=at.VPAID_UNKNOWN_ERROR,n="";try{n=e.toLowerCase()}catch(e){}-1==n.indexOf("timeout")&&-1==n.indexOf("timed out")||(t=at.VPAID_TIMEOUT);-1==n.indexOf("empty")&&-1==n.indexOf("3403")||(t=at.VPAID_EMPTY_VAST);-1!=n.indexOf("domain")&&-1!=n.indexOf("block")&&(t=at.VPAID_EMPTY_BLOCKED_DOMAIN);-1==n.indexOf("no ad")&&-1==n.indexOf("there was an error parsing the ad tag response - null, errno: 0")||(t=at.VPAID_NO_AVAILABLE_ADS);-1==n.indexOf("but the server returned a vast error")&&-1==n.indexOf("failed to parse liverail xml response")&&-1==n.indexOf("unknown liverail xml response type")||(t=at.VPAID_VAST_ERROR);-1==n.indexOf("security error")&&-1==n.indexOf("2048")||(t=at.VPAID_SECURITY_ERROR);-1==n.indexOf("2032")&&-1==n.indexOf("9408")&&-1==n.indexOf("error loading asset : ioerror")||(t=at.VPAID_STREAM_ERROR);-1!=n.indexOf("1903")&&(t=at.VPAID_START_TIMEOUTED);-1!=n.indexOf("1902")&&(t=at.VPAID_INTERNAL_VPAID_ERROR);-1!=n.indexOf("volume violation")&&(t=at.VPAID_VOLUME_VIOLATION);-1!=n.indexOf("non linear ads")&&(t=at.VPAID_IMA_NON_LINEAR);-1!=n.indexOf("adstart exception")&&(t=at.VPAID_INNER_VPW_EXCEPTION);return t}(r);ja(e,t,"aderror"),ja(e,t,"ad.error"),t.state>=et.Started&&t.flowTimeout.cancel();var o=!1;t.state==et.Initing&&(o=!0),dt(e,t.vastId,10,r,null,t,!1,o,null),ha(e,t,t.state>et.Initing?20:t.state>et.Fetched?19:27,{code:10,message:r,vpaidError:i})}}function no(e,t){if(!t.firedEvents.AdImpression&&!t.firedEvents.AdStarted){if(t.firedEvents.AdLoaded||eo(e,t),t.firedEvents.AdStarted=!0,t.state<et.Started||t.state>et.Playing)return dt(e,t.vastId,110,"unrequested start on state ".concat(et[t.state]),null,t,!1,!0),aa(e,t),void ha(e,t,12,{code:110,message:"unrequested start on state ".concat(et[t.state])});ni(e,t),t.firedEvents.AdImpression||t.impressionAfterStartTimeout.start().then((function(){St(e,te.E_ADSTART_WO_IMPRESSION,t,{}),t.viewableOnStart&&ra(e,t)})).catch((function(){}))}}function ro(e,t){t.firedEvents.AdImpression||(t.firedEvents.AdImpression=!0,t.firedEvents.AdStarted||no(e,t),t.state<et.Started||t.state>et.Playing||(t.flowTimeout.cancel(),t.impressionAfterStartTimeout.cancel(),t.errorCount=0,t.impressionOnlyWithVideoStart&&!t.firedEvents.AdVideoStart||ri(e,t)))}function io(e,t){t.firedEvents.AdVideoStart||(t.firedEvents.AdVideoStart=!0,e.beingVpaid&&ga(e,"jsAdVideoStart",{}),t.impressionOnlyWithVideoStart&&t.firedEvents.AdImpression&&ri(e,t))}function oo(e,t){t.firedEvents.AdStarted&&!t.firedEvents.AdImpression||t.onQuartile(st.FIRST)}function ao(e,t){t.firedEvents.AdStarted&&!t.firedEvents.AdImpression||t.onQuartile(st.MIDPOINT)}function so(e,t){t.firedEvents.AdStarted&&!t.firedEvents.AdImpression||t.onQuartile(st.THIRD)}function co(e,t){t.firedEvents.AdImpression&&(t.state!=et.Playing&&t.state!=et.Finished||(t.onComplete(),t.callPauseTimer.cancel(),ha(e,t,1)))}function uo(e,t){t.firedEvents.AdStopped=!0,t.state==et.Playing&&co(e,t)}function lo(e,t,n){ua(e,t,n.url,!1===n.playerHandles)}function po(e,t,n){var r=n.t;null!=r&&Ki(e,t,r)}function fo(e,t,n){var r=n.t;null!=r&&(t.lastRemainingTime&&t.lastRemainingTime<r&&t.nonLinearCompleteTimer.cancel(),t.lastRemainingTime=r,!t.durationKnown||t.state<et.Playing?Ki(e,t,r):(!t.skipVastTracker&&t.vastTracker&&t.vastTracker.setProgress(t.duration-r),e.beingVpaid&&ga(e,"jsAdRemainingTimeChange",{remainingTime:r})))}function ho(e,t){t.interactive&&t.state==et.Playing&&(ba(e,t),e.beingVpaid&&ga(e,"jsAdPaused",{}))}function vo(e,t){t.interactive&&t.state==et.Playing&&(e.paused?Sa(e,t):(Ea(e,t),e.beingVpaid&&ga(e,"jsAdPlaying",{})))}function mo(e,t){var n=t.getAdVolume();if(n){var r=n.volume,i=n.muted;!t.interactive||t.viewableForSeconds()<1||Ca(e,r,i,t)}}function yo(e,t){t.onSkip()}function go(e,t){t.state==et.Playing&&la(e,t)}function Ao(e,t){t.firedEvents.AdStarted&&!t.firedEvents.AdImpression||t.state!=et.Playing&&t.state!=et.Finished||(e.beingVpaid&&ga(e,"jsAdUserClose",{}),t.callPauseTimer.cancel(),ha(e,t,1))}var bo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();var Eo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.forceVolume=!1,t}return bo(t,e),t.prototype.fetchAdUrl=function(e,t){var n=this;this._fetchAdUrlCallback=t,this.state=et.Fetching,this.skipVastTracker=!0,this.vastPreferType==it.VIDEO_ONLY||this.players.observableOnly?(dt(this.players,this.vastId,22,"no suitable media: "+this.adType,null,this,!1,!0),ha(this.players,this,5,{code:22,message:"no suitable media: "+this.adType})):oa(this.players,this).then((function(){return n.loadSDK()})).then((function(){n.init(),n.requestAd()}),Se(this.players,"Init IMA SDK"))},t.prototype.loadSDK=function(){var e=this;if("undefined"==typeof google||void 0===google.ima)return new Promise((function(t){return R("google-ima-script-new",(function(){return function(e,t){t.trim&&(t=t.trim());var n=t.split("//");return n.length>1?(n[0]=e,n.join("//")):null}(e.players.protocol,"http://imasdk.googleapis.com/js/sdkloader/ima3.js")}),(function(){return t()}),!0)}))},t.prototype.emitEvent=function(e,t){switch(e){case this.AdsManagerLoadedEvent:case this.AdErrorLoadedEvent:this.flowTimeout.cancel(),this.onAdsRequested(t),this.isAdsRequested=!0;break;case this.AdErrorEvent:to(this.players,this,{errorMsg:t&&t.msg});break;case this.AdEvent.AD_BREAK_READY:case this.AdEvent.AD_METADATA:case this.AdEvent.ALL_ADS_COMPLETED:break;case this.AdEvent.CLICK:lo(this.players,this,{url:null,id:null,playerHandles:!1});break;case this.AdEvent.DURATION_CHANGE:po(this.players,this,{t:t.ad&&t.ad.getDuration()||null});break;case this.AdEvent.STARTED:no(this.players,this);break;case this.AdEvent.IMPRESSION:ro(this.players,this);break;case this.AdEvent.FIRST_QUARTILE:oo(this.players,this);break;case this.AdEvent.MIDPOINT:ao(this.players,this);break;case this.AdEvent.THIRD_QUARTILE:so(this.players,this);break;case this.AdEvent.COMPLETE:co(this.players,this);break;case this.AdEvent.LOADED:t&&t.ad&&this.initLoadedAd(t.ad),eo(this.players,this);break;case this.AdEvent.LINEAR_CHANGED:t&&t.ad&&this.initLoadedAd(t.ad),this.isNonLinear()||this.nonLinearCompleteTimer.cancel();break;case this.AdEvent.LOG:case this.AdEvent.CONTENT_PAUSE_REQUESTED:break;case this.AdEvent.CONTENT_RESUME_REQUESTED:this.state<=et.Playing&&this.priority>0?to(this.players,this,{errorMsg:t&&t.msg||"IMA Content Resume"}):Ao(this.players,this);break;case this.AdEvent.SKIPPABLE_STATE_CHANGED:go(this.players,this);break;case this.AdEvent.SKIPPED:yo(this.players,this);break;case this.AdEvent.USER_CLOSE:Ao(this.players,this);break;case this.AdEvent.VOLUME_CHANGED:mo(this.players,this);break;case this.AdEvent.VOLUME_MUTED:break;case this.AdEvent.PAUSED:ho(this.players,this);break;case this.AdEvent.RESUMED:vo(this.players,this)}},t.prototype.init=function(){var e,t;this.AdEvent=google.ima.AdEvent.Type,this.AdErrorCode=google.ima.AdError.ErrorCode,this.AdsManagerLoadedEvent=google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.AdErrorLoadedEvent=google.ima.AdError.Type.AD_LOAD,this.AdErrorEvent=google.ima.AdErrorEvent.Type.AD_ERROR,this.players.content instanceof Ga?this.contentVideoElement=this.players.content.getHTMLVideoElement()||this.videoElement:this.contentVideoElement=this.videoElement,qe(this.contentVideoElement)&&(this.contentVideoElement=(e=this.players,(t=document.createElement("video")).muted=!0,t.volume=e.volume,t.playsInline=!0,t)),this.imaAdSlot=document.createElement("div"),this.imaAdSlot.className="__exco_ad_ima_slot",this.adContainer.appendChild(this.imaAdSlot),this.width=this.players.width,this.height=this.players.height,this.isStarted=!1,this.isAdsRequested=!1,this.adDisplayContainer=new google.ima.AdDisplayContainer(this.imaAdSlot),this.adDisplayContainer.initialize(),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setAutoPlayAdBreaks(!1),this.adsLoader.getSettings().setDisableCustomPlaybackForIOS10Plus(!0),this.players.secureIMA||this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE),this.adsLoader.addEventListener(this.AdsManagerLoadedEvent,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(this.AdErrorEvent,this.onAdError.bind(this),!1)},t.prototype.getCustomParams=function(e){return e.map((function(e){return"".concat(e.key,"=").concat(e.value)})).join("&")},t.prototype.getTargetings=function(){var e,t,n,r,i=[],o=this.players.priceTables;if(Dt(this.players,this)){var a=(e=this.floorPrice,t=o.exco,r=t.filter((function(t){return+t.k>=e})),(n=r.length?r[0]:t[t.length-1])||(n=t[0]),n);we.a.log("GAM price targeting: key: ".concat(a.k," value: ").concat(a.v,", floorPrice: ").concat(this.floorPrice)),i.push({key:"pf",value:a.v})}return i},t.prototype.addCustomParam=function(e,t){try{var n="cust_params",r=new URL(e),i=new URLSearchParams(r.search),o=i.get(n);return o?(i.delete(n),i.set(n,"".concat(o,"&").concat(t))):i.set(n,t),r.search="?".concat(i),r.toString()}catch(e){}return e},t.prototype.addTargeting=function(e){var t=this.getTargetings();return t.length?this.addCustomParam(e,this.getCustomParams(t)):e},t.prototype.requestAd=function(){this.players.serverEvents.demandEvent(this,{name:"requestAds"}),this.adsRequest=new google.ima.AdsRequest,this.adsRequest.adTagUrl=this.addTargeting(this.mediaURL),this.adsRequest.linearAdSlotWidth=this.width,this.adsRequest.linearAdSlotHeight=this.height,this.adsRequest.forceNonLinearFullSlot=!0,this.adsLoader.requestAds(this.adsRequest)},t.prototype.getSuggestedDuration=function(){if(this.ad){var e=this.ad.getDuration();return e<=0&&(e=this.ad.getMinSuggestedDuration()),e<=0&&(e=this.suggestedDuration),e}},t.prototype.getSuggestedRemainingTime=function(){var e=this.getAdRemainingTime();return null==e&&(e=this.duration-(Date.now()-this.nonLinearCompleteTimer.startedAt)/1e3),e>=0?e:0},t.prototype.getAdRemainingTime=function(){if(!this.adsManager)return null;var e=this.adsManager.getRemainingTime();return e<0?null:e},t.prototype.initLoadedAd=function(e){this.ad=e,this.duration=this.getSuggestedDuration(),this.durationKnown=!0},t.prototype.initNonLinearCompleter=function(){this.isNonLinear()&&Qi(this.players,this,this.duration)},t.prototype.getSkipOffset=function(){var t=this.ad.getSkipTimeOffset();return e.prototype.getSkipOffset.call(this)>0&&(t=t>0?Math.min(e.prototype.getSkipOffset.call(this),t):e.prototype.getSkipOffset.call(this)),t},t.prototype.getAdSkippableState=function(){return this.adsManager.getAdSkippableState()||e.prototype.getAdSkippableState.call(this)},t.prototype.unlockAdSlot=function(){!this.unlocked&&this.adDisplayContainer&&this.state<et.Started&&(this.adDisplayContainer.initialize(),this.unlocked=!0)},t.prototype.onAdsRequested=function(e){this.onAdResponse()&&(e?(-1==[this.AdErrorCode.VAST_EMPTY_RESPONSE,this.AdErrorCode.VAST_ASSET_NOT_FOUND,this.AdErrorCode.VAST_NO_ADS_AFTER_WRAPPER,this.AdErrorCode.UNKNOWN_AD_RESPONSE].indexOf(e.code)&&(this.state=et.Started),this.emitEvent(this.AdErrorEvent,e)):(this.players.serverEvents.demandTimedEvent(this,{name:"AdsRequested",retryCount:this.retryCount}),this._fetchAdUrlCallback(this.players,this)))},t.prototype.clearAd=function(){this.lastError=null;try{this.clearSDK(),this.adContainer.removeChild(this.imaAdSlot)}catch(e){}},t.prototype.clearSDK=function(){try{this.adDisplayContainer.destroy(),this.adsLoader.destroy(),this.adsManager.destroy()}catch(e){}},t.prototype.initMedia=function(){var t=this;return e.prototype.initMedia.call(this).then((function(){Zi(t.players,t)}))},t.prototype.initAd=function(){var e=this;this.transferError((function(){e.adsManager.init(e.width,e.height,google.ima.ViewMode.NORMAL)}))},t.prototype.startAd=function(e){var t,n=this;this.isStarted||(this.forceVolume=!0,this.syncVolume(e),this.adsManager&&this.adsManager.start&&(this.transferError((function(){n.adsManager.start()})),this.sureFastStart=null===(t=this.expectedSureFastStart)||void 0===t||t,$i(this.players,this),this.isStarted=!0))},t.prototype.stopAd=function(){var e=this;this.adsManager&&this.adsManager.stop&&this.transferError((function(){return e.adsManager.stop()}))},t.prototype.resizeAd=function(e,t){var n=this;this.width===e&&this.height===t||(this.width=e,this.height=t,this.adsManager&&this.adsManager.resize&&this.transferError((function(){return n.adsManager.resize(e,t,google.ima.ViewMode.NORMAL)})))},t.prototype.setAdVolume=function(e,t,n,r){var i=this;this.adsManager&&(this.muted==t&&this.viewable||(this.requireSound||!this.players.muteToPlay||t||n||this.isUnlocked()||(t=!0),this.muted=t,e=t?0:e,(this.forceVolume&&!r||this.adsManager.getVolume()!=e)&&(this.transferError((function(){return i.adsManager.setVolume(e)})),this.forceVolume=!1)))},t.prototype.getAdVolume=function(){return this.adsManager&&{volume:this.adsManager.getVolume()}},t.prototype.isNonLinear=function(){return!!this.ad&&!this.ad.isLinear()},t.prototype.showControlBar=function(){return null!=this.controlBar&&this.controlBar},t.prototype.showAdUI=function(){return null!=this.enableAdUI&&this.enableAdUI},t.prototype.getClickText=function(){return this.players.info.mobile?null:this.clickTextEnabled?this.clickText||"Learn More":null},t.prototype.getProgress=function(){if(this.ad){var e=this.getSuggestedDuration(),t=Math.ceil(e-this.getSuggestedRemainingTime());return{time:t=t>0?t:0,duration:e}}return null},t.prototype.pauseAd=function(){var e=this;this.transferError((function(){e.adsManager.pause()}))},t.prototype.resumeAd=function(){var e=this;this.transferError((function(){e.adsManager.resume()}))},t.prototype.skipAd=function(){var e=this;this.getAdSkippableState()?(this.adsManager.skip(),this.failSkipTimer.start().then((function(){e.onSkip()})).catch((function(){}))):this.onSkip()},t.prototype.transferError=function(e){try{e&&e()}catch(e){throw new Error(e.getMessage&&e.getMessage()||e.message||"Unknown error")}},t.prototype.onAdsManagerLoaded=function(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.adsManager=e.getAdsManager(this.contentVideoElement,t),(this.players.muted||this.players.muteToPlay)&&(this.forceVolume=!0,this.setAdVolume(0,!0));var n=this.onAdEvent.bind(this),r=this.onAdProgressEvent.bind(this),i=this.onAdUserEvent.bind(this);this.adsManager.addEventListener(this.AdErrorEvent,this.onAdError.bind(this)),this.adsManager.addEventListener(this.AdEvent.AD_BREAK_READY,this.adBreakReadyHandler.bind(this)),this.adsManager.addEventListener(this.AdEvent.AD_METADATA,n),this.adsManager.addEventListener(this.AdEvent.ALL_ADS_COMPLETED,n),this.adsManager.addEventListener(this.AdEvent.DURATION_CHANGE,n),this.adsManager.addEventListener(this.AdEvent.IMPRESSION,n),this.adsManager.addEventListener(this.AdEvent.LINEAR_CHANGED,n),this.adsManager.addEventListener(this.AdEvent.LOADED,n),this.adsManager.addEventListener(this.AdEvent.LOG,n),this.adsManager.addEventListener(this.AdEvent.SKIPPABLE_STATE_CHANGED,n),this.adsManager.addEventListener(this.AdEvent.CONTENT_RESUME_REQUESTED,n),this.adsManager.addEventListener(this.AdEvent.CONTENT_PAUSE_REQUESTED,n),this.adsManager.addEventListener(this.AdEvent.STARTED,r),this.adsManager.addEventListener(this.AdEvent.FIRST_QUARTILE,r),this.adsManager.addEventListener(this.AdEvent.MIDPOINT,r),this.adsManager.addEventListener(this.AdEvent.THIRD_QUARTILE,r),this.adsManager.addEventListener(this.AdEvent.COMPLETE,r),this.adsManager.addEventListener(this.AdEvent.CLICK,i),this.adsManager.addEventListener(this.AdEvent.PAUSED,i),this.adsManager.addEventListener(this.AdEvent.RESUMED,i),this.adsManager.addEventListener(this.AdEvent.SKIPPED,i),this.adsManager.addEventListener(this.AdEvent.USER_CLOSE,i),this.adsManager.addEventListener(this.AdEvent.VOLUME_CHANGED,i),this.adsManager.addEventListener(this.AdEvent.VOLUME_MUTED,i),this.emitEvent(this.AdsManagerLoadedEvent)},t.prototype.onAdEvent=function(e){var t=this;this.delayEvent(e,(function(){t.emitEvent(e.type,{ad:e.getAd()})}))},t.prototype.onAdProgressEvent=function(e){var t=this;this.delayEvent(e,(function(){t.emitEvent(e.type,{ad:e.getAd()})}))},t.prototype.delayEvent=function(e,t){var n="Ad"+e.type.charAt(0).toUpperCase()+e.type.slice(1);setTimeout(t,this.delay[n]||0)},t.prototype.onAdUserEvent=function(e){this.emitEvent(e.type)},t.prototype.onAdError=function(e){var t=e.getError();this.lastError={msg:t.getMessage(),code:t.getErrorCode()},t.getType()==this.AdErrorLoadedEvent?this.emitEvent(this.AdErrorLoadedEvent,this.lastError):this.emitEvent(this.AdErrorEvent,this.lastError),this.clearSDK()},t.prototype.getErrorEvent=function(t){var n={event:{},timed:!1};return this.isAdsRequested?this.state==et.Initing?(n.event={name:"AdLoadError",errorCode:10==t.code?30:t.code,message:t.message},31==t.code&&(n.event.timeout=!0),n.timed=!0):n=e.prototype.getErrorEvent.call(this,t):(10==t.code?n.event={name:"AdsRequestError",errorCode:200,message:t.message,retryCount:this.retryCount}:201==t.code&&(n.event={name:"AdsRequestError",errorCode:t.code,message:t.message,retryCount:this.retryCount,timeout:!0}),n.timed=!0),this.lastError&&null!=this.lastError.code&&(n.event.imaError=this.lastError.code),n},t.prototype.adBreakReadyHandler=function(){},t}(or),_o=function(){function e(){}return e.prototype.AdLoaded=function(){},e.prototype.AdError=function(e){},e.prototype.AdStarted=function(){},e.prototype.AdVideoStart=function(){},e.prototype.AdVideoFirstQuartile=function(){},e.prototype.AdVideoMidpoint=function(){},e.prototype.AdVideoThirdQuartile=function(){},e.prototype.AdVideoComplete=function(){},e.prototype.AdImpression=function(e){},e.prototype.AdDurationChange=function(){},e.prototype.AdVolumeChange=function(){},e.prototype.AdClickThru=function(e,t,n){},e.prototype.AdSkipped=function(){},e.prototype.AdSkippableStateChange=function(){},e.prototype.AdUserClose=function(){},e.prototype.AdStopped=function(){},e.prototype.AdPaused=function(){},e.prototype.AdPlaying=function(){},e.prototype.AdSizeChange=function(){},e.prototype.AdExpandedChange=function(){},e.prototype.AdRemainingTimeChange=function(){},e}();function wo(e,t){for(var n in t)t.hasOwnProperty(n)&&null!=t[n]&&!1!==t[n]&&e.setAttribute(n,!0===t[n]?n:t[n]);return e}function To(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var Io="margin:0;padding:0;top:0px;left:0px;position:absolute;width:100%;height:100%;";function So(e,t,n){return new Promise((function(r,i){var o=n.createElement("script");o.setAttribute("type","text/javascript");var a=t.mediaURL;a.match(/^http.*\/player\/(.*_)?vpaid_\d+\.\d+.*\.js/)&&e.playerUrl&&(a=a.replace(/^http.*\.js/,e.playerUrl.replace("player","vpaid"))),o.src=W(e.protocol,a),o.addEventListener("load",(function(){Te("jsVpaidLoaded",{players:e,playerData:t},(function(){!function(e,t){if("function"==typeof e.jsVpaidLoaded)return e.jsVpaidLoaded(t);var n=t.jsVpaidFrame;if(!n||!n.contentWindow||!n.contentWindow.getVPAIDAd)throw new Error("couldn't find js vpaid module");qe(t.videoElement)&&!t.vpaidUseJSV?(t.videoElement.style.display="none",t.vpaidJsIframeVideo=document.createElement("video"),t.adContainer.insertBefore(t.vpaidJsIframeVideo,t.adContainer.firstChild)):t.vpaidJsIframeVideo=t.videoElement;if(t.vpaidJsIframeVideo.setAttribute("style",Io),t.vpaidJsIframeVideo.volume=0,t.vpaidJsIframeVideo.muted=!0,t.vpaidJs=n.contentWindow.getVPAIDAd(),!t.vpaidJs)throw new Error("failed to create js vpaid module");t.vpaidJs.handshakeVersion&&t.vpaidJs.handshakeVersion("2.0")}(e,t),r(o)}),i)})),n.body.appendChild(o)}))}function Oo(e,t){var n=function(e,t){return!!e.htmlOnly||void 0!==t.sandbox&&t.sandbox}(e,t);return function(e,t){return new Promise((function(n,r){var i=document.createElement("iframe");To(i,{onload:function(){return n(i)},onerror:r,id:"vjs"+Math.floor(5e3*Math.random()),src:"about:blank",width:"100%",height:"100%",marginWidth:"0",marginHeight:"0"}),wo(i,{style:Io,frameBorder:"0",scrolling:"no",sandbox:t&&"allow-scripts allow-same-origin allow-popups"}),e.appendChild(i)}))}(t.adContainer,n).then((function(r){t.jsVpaidFrame=r;var i=r.contentWindow&&r.contentWindow.document;if(!i)throw new Error("loadJSVpaid frame document not defined");i.body.setAttribute("style","margin:0;padding:0;"),i.head.appendChild(i.createElement("meta")).setAttribute("charset","UTF-8"),"https:"==e.protocol&&i.head.appendChild(wo(i.createElement("meta"),{"http-equiv":"Content-Security-Policy",content:"upgrade-insecure-requests;"}));var o=To(i.createElement("div"),{id:"vpaid-js-ad-elem",className:"vpaid-ad-slot"});return o.setAttribute("style",Io),t.vpaidJsIframeAdElem=o,(t.iframeSlot||n?i.body:t.adContainer).appendChild(o),t.initCompanion(i),So(e,t,i)}))}var Co=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ko=function(){return(ko=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Po=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Do=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.firstQuartile=!1,t.isPotentiallyNonLinear=!1,t}return Co(t,e),t.prototype.getAdRemainingTime=function(){var e;try{e=(e=this.vpaidJs.getAdRemainingTime())<0?null:e}catch(e){}return e},t.prototype.getAdDuration=function(){var e;try{e=(e=this.vpaidJs.getAdDuration())<0?null:e}catch(e){}return e},t.prototype.verifyDuration=function(){if(!this.durationKnown){var e=this.getAdDuration();e&&(this.duration=e,this.durationKnown=!0)}},t.prototype.isNonLinear=function(){return this.vpaidJs.getAdLinear&&!this.vpaidJs.getAdLinear()},t.prototype.initNonLinearCompleter=function(){this.isNonLinear()&&Qi(this.players,this,this.duration)},t.guessError=function(e){return void 0===e?e="unknown error":"string"!=typeof e&&(e=e.message?e.message:e.data&&e.data.message?e.data.message:"Couldnt extract error message"),{errorMsg:e}},t.clickData=function(e,t,n){return Array.isArray(e)?{url:e[0]||"",id:e[1],playerHandles:e[2]}:{url:e||"",id:t,playerHandles:n}},t.prototype.considerVolumeChange=function(){if(!this.players.dynamicSound){var e,t,n=!1,r=!1;try{if(0==this.vpaidJs.getAdVolume())return;this.viewable?this.viewableForSeconds()<1?"JS VPAID - AdVolume change too soon after adStarted":(n=!0,"JS VPAID - AdVolume change allowed"):"JS VPAID - AdVolume change before viewable",n||(this.vpaidJs.setAdVolume(0),0==this.vpaidJs.getAdVolume()&&(r=!0,"JS VPAID - AdVolume change reverted"))}catch(e){"JS VPAID - AdVolumeChanged exception"+(e&&e.message?e.message:"")}this.players,t=n||r,(e=this).mediaURL,e.vastId,be(0,0,t?.01:.1)}},t.prototype.event=function(e,t){var n=this,r=void 0===t?{}:t,i=r.data,o=r.setVolume,a=void 0!==o&&o,s=this.vpaidEvents.currentEvent;try{A.delay(this.delay[s]||0).then((function(){e(n.players,n,i)})).catch(Se(this.players,"jsvpaid event ".concat(s))),a&&this.syncVolume()}catch(e){Ae(this.players,3,"jsVpaid"+s+" hanlder JS exception: "),e&&e.terminateVpaid&&ha(this.players,this,9,{code:10,message:"volume violation",vpaidError:at.VPAID_VOLUME_VIOLATION})}},t.prototype.AdLoaded=function(){this.initVpaidOnStart?this.startAd(!1):this.event(eo,{setVolume:!0})},t.prototype.AdError=function(e){this.event(to,{data:t.guessError(e)})},t.prototype.AdStarted=function(){this.verifyDuration(),this.event(no,{setVolume:!0})},t.prototype.AdStopped=function(){this.event(uo)},t.prototype.AdPlaying=function(){this.event(vo)},t.prototype.AdPaused=function(){this.event(ho)},t.prototype.AdVideoStart=function(){this.verifyDuration(),this.nonLinearCompleteTimer.cancel(),this.event(io,{setVolume:!0})},t.prototype.AdVideoFirstQuartile=function(){this.firstQuartile=!0,this.event(oo)},t.prototype.AdVideoMidpoint=function(){this.event(ao)},t.prototype.AdVideoThirdQuartile=function(){this.event(so)},t.prototype.AdVideoComplete=function(){this.event(co)},t.prototype.AdImpression=function(){var e=this.vpaidJs.cedatoAdInfo&&this.vpaidJs.cedatoAdInfo();e&&(this.impressionData=ko(ko(ko({},e.pricing&&{pricing:e.pricing}),e.currency&&{currency:e.currency}),e.impType&&{impType:e.impType}),null!=e.adui&&(this.enableAdUI=e.adui),null!=e.controlBar&&(this.controlBar=e.controlBar)),this.event(ro,{setVolume:!0})},t.prototype.AdRemainingTimeChange=function(){var e={t:null};if(this.state==et.Playing){var t=this.getAdRemainingTime();null!=t&&t>0||this.firstQuartile?this.nonLinearCompleteTimer.cancel():null!=this.lastRemainingTime||this.isPotentiallyNonLinear||this.durationKnown?this.lastRemainingTime&&this.lastRemainingTime<1&&(Qi(this.players,this,.5),this.isPotentiallyNonLinear=!0,this.lastRemainingTime=null):(this.isPotentiallyNonLinear=!0,Qi(this.players,this,this.duration)),e={t:t}}this.event(fo,{data:e,log:!1})},t.prototype.AdDurationChange=function(){this.event(po,{data:{t:this.getAdDuration()}})},t.prototype.AdVolumeChange=function(){this.considerVolumeChange(),this.event(mo)},t.prototype.AdClickThru=function(e,n,r){this.event(lo,{data:t.clickData(e,n,r)})},t.prototype.AdSkipped=function(){this.event(yo)},t.prototype.AdSkippableStateChange=function(){this.event(go)},t.prototype.AdUserClose=function(){this.event(Ao)},t.prototype.AdSizeChange=function(){},t.prototype.AdExpandedChange=function(){},t.prototype.insertCompanion=function(){this.vpaidJsIframeAdElem.appendChild(this.companionsElementDiv)},t.prototype.isUnlocked=function(){return!this.players.info.mobile&&this.players.hadUserInteraction},t.prototype.unlockAdSlot=function(){!this.unlocked&&this.videoElement&&this.state<et.Initing&&(this.unlocked=!0,this.videoElement.load())},t.prototype.initMedia=function(){var t=this;return this.vpaidJs=null,e.prototype.initMedia.call(this).then((function(){return Oo(t.players,t).then((function(){t.vpaidEvents=new Ro(t),t.initVpaidOnStart?(t.state=et.Ready,Xi(t.players,t,!1)):Zi(t.players,t)})).catch((function(e){dt(t.players,t.vastId,100,e.message,null,t),ha(t.players,t,15,{code:100,message:e.message})}))}))},t.prototype.initAd=function(){var e={AdParameters:this.adParameters||""},t={slot:this.vpaidJsIframeAdElem,videoSlot:this.vpaidJsIframeVideo,videoSlotCanAutoPlay:!0===this.players.mainAutoplay};if(this.mediaURL.indexOf("moatwrapper.js")>=0){var n=this.vpaidJsIframeVideo.canPlayType.bind(this.vpaidJsIframeVideo);this.vpaidJsIframeVideo.canPlayType=function(e){return"video/3gpp"!=e?n(e):""}}var r=this.vpaidJs.initAd(this.players.widthOverwrite||this.players.width,this.players.heightOverwrite||this.players.height,"normal",400,e,t);if(!r&&void 0!==r)return"jsVpaid error"},t.prototype.startAd=function(e){var t;if(this.players.rootDivElem.style.top="0px",this.syncVolume(e),this.initVpaidOnStart&&!this.initVpaidOnStartDone)return this.initVpaidOnStartDone=!0,void this.initAd();try{this.vpaidJs.startAd(),this.sureFastStart=null!==(t=this.expectedSureFastStart)&&void 0!==t&&t,$i(this.players,this)}catch(e){return"jsVpaid start error"}return null},t.prototype.pauseAd=function(){this.vpaidJs&&this.vpaidJs.pauseAd&&this.vpaidJs.pauseAd()},t.prototype.resumeAd=function(){this.vpaidJs&&this.vpaidJs.resumeAd&&this.vpaidJs.resumeAd()},t.prototype.stopAd=function(){this.vpaidJs&&(this.vpaidJs.stopAd&&this.vpaidJs.stopAd(),this.vpaidJs.pauseAd&&this.vpaidJs.pauseAd())},t.prototype.showAd=function(){e.prototype.showAd.call(this),this.vpaidJsIframeAdElem&&(this.vpaidJsIframeAdElem.style.zIndex="10000"),this.vpaidJsIframeVideo&&(this.vpaidJsIframeVideo.style.margin="0",this.vpaidJsIframeVideo.style.padding="0",this.vpaidJsIframeVideo.style.top="0px",this.vpaidJsIframeVideo.style.left="0px",this.vpaidJsIframeVideo.style.position="absolute")},t.prototype.clearAd=function(){try{this.vpaidJs&&(this.firedEvents.AdError||this.firedEvents.AdStopped||this.vpaidJs.stopAd(),this.vpaidEvents.unsubscribe()),this.jsVpaidFrame.parentNode.removeChild(this.jsVpaidFrame)}catch(e){}this.initialSound=!1,this.jsVpaidFrame=null,this.vpaidJsIframeAdElem=null,this.vpaidJsIframeVideo=null,this.vpaidJsIframeVideoCanvas=null,this.vpaidJs=null},t.prototype.resizeAd=function(e,t,n){this.vpaidJs&&this.vpaidJs.resizeAd&&this.vpaidJs.resizeAd(e,t,n)},t.prototype.setAdVolume=function(e,t,n,r){if(this.vpaidJs&&this.vpaidJs.setAdVolume){if(!this.requireSound&&this.players.muteToPlay&&!t&&!n&&!this.isUnlocked()){if(this.initialSound)return;t=!0}if(this.muted=t,e=t?0:e,!r)try{this.vpaidJsIframeVideo.volume=e,this.vpaidJsIframeVideo.muted=t,this.initialSound&&this.vpaidJs.getAdVolume&&this.vpaidJs.getAdVolume()===e||this.vpaidJs.setAdVolume(e),this.initialSound=!0}catch(e){}}},t.prototype.getAdVolume=function(){return this.vpaidJs&&this.vpaidJs.getAdVolume&&{volume:this.vpaidJs.getAdVolume()}},t.prototype.showAdUI=function(){return null!=this.enableAdUI&&this.enableAdUI},t.prototype.getProgress=function(){this.verifyDuration();var e=this.duration;return{time:e-this.getAdRemainingTime(),duration:e}},t.prototype.getAdSkippableState=function(){return this.vpaidJs.getAdSkippableState&&this.vpaidJs.getAdSkippableState()||e.prototype.getAdSkippableState.call(this)},t.prototype.skipAd=function(){var e=this;this.vpaidJs.getAdSkippableState&&this.vpaidJs.getAdSkippableState()?(this.vpaidJs.skipAd(),this.failSkipTimer.start().then((function(){e.onSkip()})).catch((function(){}))):this.onSkip()},t.prototype.getErrorEvent=function(t){var n={event:{},timed:!0};return this.state==et.Initing?(n.event={name:"AdLoadError",errorCode:10==t.code?30:t.code,message:t.message},31==t.code&&(n.event.timeout=!0)):n=e.prototype.getErrorEvent.call(this,t),t.vpaidError&&(n.event.vpaidError=t.vpaidError),n},t}(lr),Ro=function(e){function t(t){var n=e.call(this)||this;return n.playerData=t,n.subscribe(),n}return Co(t,e),t.prototype.subscribe=function(){var e=this;N(_o.prototype,(function(t){e[t]=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e.currentEvent=t,e.playerData.vpaidJs){var i=e.playerData[t];i&&i.apply(e.playerData,Po([],n,!0))}else fr(e.playerData.players,e.playerData,t)},e.playerData.vpaidJs.subscribe(e[t],t)}))},t.prototype.unsubscribe=function(){var e=this;try{N(_o.prototype,(function(t,n){n&&e.playerData.vpaidJs.unsubscribe(n,t)}))}catch(e){}},t}(_o),Lo=function(){function e(){}return e.HAVE_NOTHING=0,e.HAVE_METADATA=1,e.HAVE_CURRENT_DATA=2,e.HAVE_FUTURE_DATA=3,e.HAVE_ENOUGH_DATA=4,e}();function xo(e){return new Promise((function(t,n){var r=function(){var r=function(){(function(e){return!e.paused})(e)||e.play().then((function(){document.body.removeEventListener("gesturechange",r),document.body.removeEventListener("touchstart",r),document.body.removeEventListener("touchmove",r),document.body.removeEventListener("touchend",r),document.body.removeEventListener("scroll",r),document.body.removeEventListener("click",r),t()}))};e.play().then((function(){return t()})).catch((function(){document.body.addEventListener("gesturechange",r),document.body.addEventListener("touchstart",r),document.body.addEventListener("touchmove",r),document.body.addEventListener("touchend",r),document.body.addEventListener("scroll",r),document.body.addEventListener("click",r),n()}))};!function(e){return e.readyState>=Lo.HAVE_FUTURE_DATA}(e)?e.addEventListener("canplay",(function(){return r()})):r()}))}var No=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.firstPlayEventTriggered=!1,t.completed=!1,t}return No(t,e),t.prototype.initMedia=function(){var t=this;return e.prototype.initMedia.call(this).then((function(){t.initCompanion(),function(e,t){if(t.videoElementPrepared)return;Te("prepareVideoElem",{players:e,playerData:t,log:!0},(function(){je(t.videoElement,"video_element"),t.videoElement.style.zIndex=(9994-t.uniqId).toString(),t.firstPlayEventTriggered=!1,Ie(t.videoElement,"ad video event",{players:e,playerData:t},[{type:"canplay",playerDataAction:Mo},{type:"play",playerDataAction:Vo},{type:"pause",playerDataAction:Uo},{type:"ended",playerDataAction:Fo},{type:"timeupdate",playerDataAction:Ho},{type:"volumechange",playerDataAction:Wo},{type:"error",playerDataAction:Bo},{type:"click",playerDataAction:qo}]),t.videoElementPrepared=!0}))}(t.players,t),He(t.players,t.videoElement,t.mediaURL),qe(t.videoElement)||(t.videoElement.autoplay=!1,t.videoElement.controls=t.players.controlBar&&"native"==t.players.controlBarType,t.videoElement.loop=!1,t.videoElement.load())})).catch(Se(this.players,"initMedia"))},t.prototype.getSkipOffset=function(){var t=this.creative.skipDelay||-1;return e.prototype.getSkipOffset.call(this)>0&&(t=t>0?Math.min(e.prototype.getSkipOffset.call(this),t):e.prototype.getSkipOffset.call(this)),t},t.prototype.initAd=function(){},t.prototype.startAd=function(e){this.showAd(),this.sureFastStart=!0,this.syncVolume(e);var t=xo(this.videoElement);t&&t.then&&t.catch((function(){ct.b.emit(ct.a.PLAYER.AUTOPLAY_BLOCKED)})),function(e,t,n,r){if(!e.usejsv&&e.info.mobile){var i={category:"autoplay",label:r,domain:e.domain,videoSrc:t.currentSrc};n&&n.then?n.then((function(){i.event="OK",be(0,0,.01)}),(function(e){var t=e.name,n=e.message;i.error=t,i.message=n,i.event="AbortError"!==t?"Failed":"Aborted",be(0,0,"AbortError"!==t?.1:.01)})):(i.event="Unknown",be(0,0,.01))}}(this.players,this.videoElement,t,"vast")},t.prototype.pauseAd=function(){this.videoElement.pause()},t.prototype.resumeAd=function(){this.videoElement.play()},t.prototype.stopAd=function(){this.videoElement.pause()},t.prototype.clearAd=function(){this.videoElement&&this.videoElement.pause()},t.prototype.destroyAd=function(){this.clearAd(),e.prototype.destroyAd.call(this)},t.prototype.resizeAd=function(e,t,n){},t.prototype.setAdVolume=function(e,t,n,r){this.requireSound||!this.players.muteToPlay||t||n||this.isUnlocked()?(this.muted=t,r||this.videoElement&&(this.videoElement.muted!==t&&(this.videoElement.muted=t),this.videoElement.volume!==e&&(this.videoElement.volume=e))):!this.muted&&this.state<=et.Started&&this.setAdVolume(e,!0,!1)},t.prototype.getAdVolume=function(){return this.videoElement&&{volume:this.videoElement.volume,muted:this.videoElement.muted}},t.prototype.getProgress=function(){if(!this.videoElement)return{time:0,duration:0};var e=this.videoElement.duration||0;return{time:Math.min(this.videoElement.currentTime,e),duration:e}},t.prototype.getAdRemainingTime=function(){var e=this.getProgress();return e.duration-e.time},t.prototype.getErrorEvent=function(t){var n=e.prototype.getErrorEvent.call(this,t);return t.videoError&&(n.event.videoError=t.videoError),n},t}(lr);function Uo(e,t){t.videoElement.duration>0&&t.videoElement.duration>t.videoElement.currentTime&&Ia(e,t)}function Vo(e,t){Sa(e,t),t.firstPlayEventTriggered||(t.firstPlayEventTriggered=!0,t.state==et.Started&&(ni(e,t),ri(e,t)&&(e.beingVpaid&&(ga(e,"jsAdDurationChange",{duration:t.duration|t.videoElement.duration}),ga(e,"jsAdVideoStart",{})),t.errorCount=0)))}function Mo(e,t){"video"==t.adType&&(t.state>=et.Ready||function(e,t){t.durationKnown=!0;try{t.duration=t.videoElement.duration,t.syncVolume(),t.vastTracker&&(t.vastTracker.duration=t.duration,t.vastTracker.setDuration(t.duration))}catch(e){t.durationKnown=!1}var n=Math.floor(e.height),r=(e.height-n)/2;r=Math.floor(r),t.videoElement.style.cssText="background-color: black; width:100%; height:100%; position: relative; top: "+r+"px",t.state=et.Ready,Xi(e,t,!1)}(e,t))}function Fo(e,t){t.completed||(t.completed=!0,t.onComplete(),ha(e,t,1))}function Bo(e,t,n){if(t.state!=et.Error&&"video"==t.adType){ja(e,t,"aderror"),ja(e,t,"ad.error");var r=n.target.error.code;dt(e,t.vastId,10,"video player error code: "+r,null,t,!1),ha(e,t,21,{code:10,message:We(n.target),videoError:r})}}function qo(e,t){ua(e,t,null)}function Ho(e,t){if(!(t.state<et.Initing||t.state==et.Error||"video"!=t.adType)){var n=t.videoElement;t.vastTracker&&(t.vastTracker.setProgress(n.currentTime),t.vastTracker.skippable!==t.skippable&&la(e,t,t.vastTracker.skippable)),e.beingVpaid&&ga(e,"jsAdRemainingTimeChange",{remainingTime:n.duration-n.currentTime});var r=Math.floor(n.currentTime/n.duration*4);r>0&&r<4&&t.quartile!=r&&t.onQuartile(r)}}function Wo(e,t){t.viewable&&t.videoElement.controls&&Ca(e,t.videoElement.volume,t.videoElement.muted,t)}var Go=function(){return(Go=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Jo=[/^Intent/,/^Custom/],Yo=function(){function e(e,t){var n,r=this;this.players=e,this.postData=t,this.EventDeferTime=((n={}).AdImpression=50,n.SupplyStarted=500,n.VastFetched=500,n.startAd=500,n.default=2500,n),this.EventSendRate={default:1},this.LowPriorityEvents=["VastFetched","VastError","VastFetchError","AdError","AdLoadError","AdImpressionError","startVastPrefetch","VastPrefetchError"],this.DryRun=!1,this.serverEventUrl="https://e.channelexco.com/events",this.serverEventRoute="/events",this.firstEvent=!0,this.supplyEvents=[],this.customSupplyEvents=[],this.demandEvents=[],this.emitter=new Me.EventEmitter2({wildcard:!0,maxListeners:5}),this.scheduledTimer=new A,null!=e.event2RateLow&&this.LowPriorityEvents.forEach((function(t){return r.EventSendRate[t]=e.event2RateLow/100}))}return e.prototype.isDryRun=function(e){var t=i(this.EventSendRate[e],this.EventSendRate.default);return this.DryRun||Math.random()>t},e.prototype.isExternalEvent=function(e){for(var t=0,n=Jo;t<n.length;t++){var r=n[t];if(e.match(r))return!0}},e.prototype.supplyEvent=function(e,t){var n=this.isDryRun(e.name);this.extractSupplyParams();var r=this.stamp(e,t);n||this.supplyEvents.push(r),this.postEvent(e.name,n,r)},e.prototype.demandEvent=function(e,t){try{this._demandEvent(e,t)}catch(e){}},e.prototype.demandTimedEvent=function(e,t){this._demandEvent(e,t,e.flowTimeout)},e.prototype._demandEvent=function(e,t,n){var r=this.isDryRun(t.name);this.extractSupplyParams();var i=x(this.demandEvents,(function(t){return t.playerData==e}));i||(i={playerData:e,demandData:zo(e),events:[]},r||this.demandEvents.push(i));var o=this.stamp(t,n);r||i.events.push(o),this.postEvent(t.name,r,o,i.demandData)},e.prototype.stamp=function(e,t){var n=m(this.EventSendRate[e.name]);return h({},e,{ts:this.fromStartNow()},null!=n&&n<1&&{rate:n},t&&{elapsed:this.toSeconds(t.elapsed)})},e.prototype.toSeconds=function(e){return parseFloat((e/1e3).toFixed(2))},e.prototype.fromStartNow=function(){return parseFloat(((Date.now()-this.players.startTime)/1e3).toFixed(2))},e.prototype.extractSupplyParams=function(){this.supplyData||(this.supplyData=function(e){var t=function(e){return+e.toFixed(1)},n={supplyId:e.playerId,subid:e.subid,domain:e.domain,sessionId:e.sessionId,playerVersion:e.playerVersion,detect:e.detect,cookieJson:e.supplyCookieJson,gpvCookie:e.gpvCookie,detectedDomain:Xo(e.domainDetected),width:e.width,height:e.height,detectedWidth:null!=e.widthDetected?t(e.widthDetected):null,detectedHeight:null!=e.heightDetected?t(e.heightDetected):null,startTime:Math.floor(e.startTime/1e3)};if(e.isApp)return Go(Go({},n),e.appParams);return n}(this.players))},e.prototype.postEvent=function(e,t,n,r){var o=this;try{this.emitter.emit(e,n,t,this.supplyData,r)}catch(e){}if(!t){var a=function(){o.sendStoredEvent()};this.firstEvent&&(this.firstEvent=!1,window.addEventListener("pagehide",a,!1),window.addEventListener("visibilitychange",a,!1));var s=i(this.EventDeferTime[e],this.EventDeferTime.default);null!=this.scheduledTime&&Date.now()+s>this.scheduledTime||(this.scheduledTime=Date.now()+s,this.scheduledTimer.reset(s).start().then((function(){o.scheduledTime=null,o.sendStoredEvent()})).catch((function(){})))}},e.prototype.sendStoredEvent=function(){var e={supply:{},demand:[]};if(![this.supplyEvents,this.customSupplyEvents,this.demandEvents].every((function(e){return 0==e.length}))){if(f(c,e.supply,this.supplyData),this.supplyEvents.length&&(e.supply.e=this.supplyEvents),this.customSupplyEvents.length&&(e.supply.c=this.customSupplyEvents),this.demandEvents.forEach((function(t){var n={e:[]};f(c,n,t.demandData),n.e=t.events,e.demand.push(n)})),e.demand.length||delete e.demand,this.serverEventUrl){var t=JSON.stringify(e,null,2);this.postData(this.serverEventUrl,t)}this.demandEvents=[],this.supplyEvents=[],this.customSupplyEvents=[]}},e}();function zo(e){return{uniqId:e.uniqId,vastId:e.vastId,demandId:e.demandId,adType:e.adType,rotationNo:e.rotationNo,gpvNo:e.uniqId,group:e.group,cookie:e.cookie,cookieJson:e.cookieJson}}function Xo(e){return"string"==typeof e&&(e.match(/^data:/)&&(e=e.split(";")[0]),e.length>256&&(e.match(/^[\/|http:]/)&&(e=e.split("?")[0]),e=e.slice(0,256))),e}var Ko=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Qo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentlyPlaying=1,t}return Ko(t,e),t.prototype.AdLoaded=function(){var t=this,n=this.vpaidJsIframeAdElem.vdb_Player;if(n){var r=this.jsVpaidFrame.contentWindow.vidible;r&&(n.addEventListener(r.AD_START,(function(){t.currentlyPlaying=3})),n.addEventListener(r.VIDEO_START,(function(){3!=t.currentlyPlaying&&(t.currentlyPlaying=2,ha(t.players,t,36,{code:300,message:"vidible content exception",vpaidError:at.VPAID_VIDIBLE_CONTENT}))})))}e.prototype.AdLoaded.call(this)},t.prototype.AdVideoComplete=function(){2!=this.currentlyPlaying&&e.prototype.AdVideoComplete.call(this)},t}(Do),Zo=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),$o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.proxy=null,r.proxy=r.vastURL,r}return Zo(t,e),Object.defineProperty(t.prototype,"tamProxy",{get:function(){return this.proxy||(this.proxy=this.vastURL),this.proxy},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tamConfig",{get:function(){return this.gpvDemand.tam||{}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"slotId",{get:function(){return this.tamConfig.slotId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pubId",{get:function(){return this.tamConfig.pubId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"deals",{get:function(){return this.tamConfig.deals||!1},enumerable:!1,configurable:!0}),t}(jo);var ea={video:jo.prototype,jsvpaid:Do.prototype,jsvidible:Qo.prototype,jsima:Eo.prototype,vast:lr.prototype,prebidAdapter:dr.prototype,tam:$o.prototype};function ta(e){!function(e,t){if(Object.setPrototypeOf)Object.setPrototypeOf(e,t);else if({__proto__:[]}instanceof Array)e.__proto__=t;else for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}(e,ea[e.adType||"vast"])}function na(e,t){var n;if(!t.viewable){t.viewable=!0,t.viewableAt=t.playedAt=Date.now();try{t.showAd()}catch(e){}e.content&&(null===(n=e.getContentElement())||void 0===n||n.hadAd(),e.content.hide())}}function ra(e,t){t.viewable&&(sa(e,t),t.viewable=!1,t.viewableAt=t.playedAt=null)}function ia(e){return e.findPlayerData((function(e){return e.state==et.Playing}))}function oa(e,t){return t.adContainersReady=t.adContainersReady||e.playerReady.then((function(){e.unlockedVideos.length>0?(t.reusableVideoTrace=e.unlockedVideos.pop(),t.videoElement=t.reusableVideoTrace.target,t.unlocked=!0):(t.videoElement=Be(),t.reusableVideoTrace=function(e,t){var n=e.addEventListener,r=e.removeEventListener,i=[],o={},a=e;for(var s in a)"on"==s.substr(0,2)&&a[s]&&(o[s]=a[s]);return a.addEventListener=function(e,t,r){i.push({type:e,listener:t,options:r}),n.call(this,e,t,r)},a.removeEventListener=function(e,n,o){if(t)for(var a=0;a!=i.length;a++){var s=i[a];e==s.type&&n==s.listener&&o==s.options&&i.splice(a,1)}r.call(this,e,n,o)},{target:a,activeListeners:i,storedOns:o,reset:function(){for(var e in a)"on"==e.substr(0,2)&&(a[e]=o[e]||null);for(var t=0;t!=i.length;t++){var n=i[t],s=n.type,c=n.listener,u=n.options;r.call(a,s,c,u)}i.splice(0,i.length)}}}(t.videoElement)),t.adContainer=function(e){var t=document.createElement("div");return t.id="__exco_ad_container_".concat(e.vastId,"_").concat(e.uniqId),t.className="__exco_ad_container",t}(t),t.adContainer.appendChild(t.videoElement),e.divElem.appendChild(t.adContainer)})).catch(Se(e,"prepareAdContainers"))}function aa(e,t){try{t.stopAd&&t.stopAd()}catch(e){}}function sa(e,t){t.viewable=!1;try{t.hideAd&&t.hideAd()}catch(e){}}function ca(e,t){Te("destroyPlayerData",{players:e,playerData:t,log:!0},(function(){if(-1===e.plist.indexOf(t))return!1;if(t.state==et.Finished&&null==t.requeryTimeout)return!1;t.state=et.Finished,null!=t.requeryTimeout&&(clearTimeout(t.requeryTimeout),t.requeryTimeout=null),t.flowTimeout.cancel(),t.viewabilityTimer.cancel(),t.keepAliveTimer.cancel(),sa(0,t),-1!==e.plist.indexOf(t)&&e.plist.splice(e.plist.indexOf(t),1);try{setTimeout((function(){!function(e,t){try{t.clearAd&&t.clearAd(),t.companionsElementDiv&&(t.companionsElementDiv.parentNode.removeChild(t.companionsElementDiv),t.companionsElementDiv.innerHTML="",t.companionsElementDiv=null),t.reusableVideoTrace&&t.videoElement&&(t.reusableVideoTrace.reset(),t.videoElement.pause(),t.videoElement.removeAttribute("src"),t.videoElement.removeAttribute("style"),t.videoElement.removeAttribute("autoplay"))}catch(e){}}(0,t),t.reusableVideoTrace&&t.unlocked&&t.videoElement&&!qe(t.videoElement)&&(e.unlockedVideos.push(t.reusableVideoTrace),t.videoElement.parentNode&&t.videoElement.parentNode.removeChild(t.videoElement),t.videoElement=null),t.destroyAd&&t.destroyAd()}),200)}catch(e){}}))}function ua(e,t,n,r){void 0===r&&(r=!1),!t.skipVastTracker&&t.vastTracker?t.vastTracker.click():t.skipVastTracker||Ae(e,6,"no vastTracker for click"),Vt(e,t,"adclick",{clickUrl:n=n||t.adClickUrl}),e.serverEvents.demandEvent(t,{name:"AdClick",clickUrl:Xo(n)}),e.eventDispatcher.sendAdClickedEvent(t,e),ct.b.emit(ct.a.AD.CLICKED,{demand:t}),e.beingVpaid&&ga(e,"jsAdClickthrough",{url:n}),r||n&&"string"==typeof n&&window.open(n,"_blank")}function la(e,t,n){var r=null!==n?n:t.isSkippable();t.skippable!=r&&(t.skippable=!!r,e.beingVpaid&&ga(e,"jsAdSkippableStateChange",{skippableState:t.skippable}),ja(e,t,"ad.skippableStateChanged",{skippable:t.skippable}))}var da={error:1},pa=[{action:{terminate:!0},reasons:[2,1,5,7,8,3,9,21,20,17,24,30,31,12,22,35]},{action:{error:0},reasons:[10,11,4]},{action:{error:100},reasons:[18]},{action:{error:105,maxRetries:3},reasons:[6]},{action:{error:105},reasons:[19,36]}];function fa(e,t){return null!=e.findPlayerData((function(e){return e!=t&&e.state==et.Playing}))}function ha(e,t,n,r){if(void 0===n&&(n=29),"function"==typeof e.finishPlayerData)return e.finishPlayerData(t,n,r);if(t.state!=et.Error&&t.state!=et.Finished){if(e.anyPlaying=e.anyPlaying&&fa(e,t),ra(e,t),t.flowTimeout.cancel(),r&&(e.emit(Ve.AD_ERROR,{error:r,playerData:t}),ct.b.emit(ct.a.AD.ERROR,{error:r,demand:t}),function(e,t,n){if(3!=n.code){var r=t.getErrorEvent(n);r&&(r.timed?e.serverEvents.demandTimedEvent(t,r.event):e.serverEvents.demandEvent(t,r.event))}}(e,t,r),t.state=et.Error,60===r.code&&(t.skippable=!1,ja(e,t,"ad.complete",{error:r,playerData:t}))),t.state==et.Playing){e.adFinishedAt=e.now();var i={listCompleted:e.frozen,skipped:2==n,error:!!r,tooLong:3==n};t.skippable=!1,ja(e,t,"adcomplete",i),ja(e,t,"ad.complete",i),t.finishPromiseResolve()}return pr(e,t)||function(e,t){for(var n=da,r=0,i=pa;r<i.length;r++){var o=i[r];if(o.reasons.indexOf(t)>=0){n=o.action;break}}if(n.terminate)return!0;n.error&&n.error>=1&&(e.state=et.Error,e.errorCount=e.errorCount+n.error);n.maxRetries&&(e.maxFailedVastRetries=Math.min(n.maxRetries,e.maxFailedVastRetries));return!function(e,t){var n=0;t.maxFailedVastRetries>0&&(n=t.maxFailedVastRetries);e.maxFailedVastRetries>0&&(0==n||e.maxFailedVastRetries<n)&&(n=e.maxFailedVastRetries);if((n>0&&t.retryCount+1>n||e.maxTotalVastRetries>0&&e.totalVastRetries+1>e.maxTotalVastRetries)&&!(t.lastChanceRetry&&t.retryCount<2))return!1;return!0}(e.players,e)}(t,n)?(ca(e,t),void(2==n&&e.paused?Sa(e,"ui"):function(e){if(0==e.plist.length&&!e.waitingForAds)e.beingVpaid&&va(e).then((function(){}))}(e))):void 0}}function va(e,t){e.frozen=!0,e.playNextRepeatTimer.cancel();var n=0==e.plist.length;return function(e,t){if(e.plist.length)for(var n=e.plist.length-1;n>=0;n--)e.plist[n]!==t&&ca(e,e.plist[n])}(e,t),ja(e,null,"player.adspaused"),t||(e.anyPlaying=!1,e.beingVpaid&&!e.vpaidContent&&ga(e,"jsAdError",{error:"no ads"})),t?t.finishPromise:n?Promise.resolve():A.delay(1e3)}var ma="data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE=";function ya(e){if(e.beingVpaid){var t,n,r=new Me.EventEmitter2;r.on("inPlayAd",(function(){e.anvato&&n&&(n.src=ma,n.muted=!0,n.play());var r=e.playerReady;e.trySound&&(r=function(e){var t=void 0===e?{muted:!0}:e,n=t.muted,r=t.slot;try{var i=document.createElement("video");i.src=ma,i.muted=n,i.playsInline=!0,i.style.display="none";var o=null,a=null;i.addEventListener("playing",(function(){o&&o(!0)})),i.addEventListener("error",(function(){a&&a()})),(r||document.body).appendChild(i),i.load();var s=i.play();return s&&s.then?s:new Promise((function(e,t){o=e,a=t,setTimeout(a,100)}))}catch(e){}return Promise.reject(null)}({muted:!1,slot:t}).then((function(){e.muteToPlay=!1,e.hadUserInteraction=!0}),(function(){e.muteToPlay=!0,e.hadUserInteraction=!1})).then((function(){return e.playerReady}))),r.then((function(){return function(e){e.started=!0,e.autoplay=!0,e.paused=!1}(e)}))})),r.on("inStopAd",(function(){return setTimeout((function(){e.autoplay=!1,va(e),ga(e,"jsAdStopped",{})}),0)})),r.on("inPauseAd",(function(){return setTimeout((function(){e.vpaidContent||(e.autoplay=!1),Ia(e,"vpaidplayer")}),0)})),r.on("inResumeAd",(function(){return setTimeout((function(){Sa(e,"vpaidplayer")}),0)})),r.on("inSetAdVolume",(function(t){return setTimeout((function(){Ca(e,t&&t.volume,void 0,null,e.allowSound)}),0)})),r.on("inResizeAd",(function(t){return setTimeout((function(){Oa(e,t.viewMode,t.width,t.height)}),0)})),r.on("inGetProgress",(function(t){var n=Pa(e);n&&t.callback(n)})),r.on("inInitAd",(function(r){t=r.slot;var i=e.beingVpaidUseSlot;if(t&&!1!==i){var o=e.rootDivElem;o.parentNode.removeChild(o),t.parentNode.style.margin=0,t.parentNode.style.padding=0,(Math.abs(t.offsetTop)>50||Math.abs(t.offsetLeft)>50)&&(t.style.position="fixed",t.style.top="0",t.style.left="0"),t.appendChild(o)}n=r.videoSlot,setTimeout((function(){!e.info.mobile&&e.trySound&&(!r.videoSlot||null==r.videoSlot.volume&&null==r.videoSlot.muted?e.allowSound&&(e.hadUserInteraction=!0,Ca(e,1,!1)):(r.videoSlot.volume&&!r.videoSlot.muted&&(e.hadUserInteraction=!0),Ca(e,r.videoSlot.volume,r.videoSlot.muted))),Oa(e,r.viewMode,r.width||e.width,r.height||e.height),ga(e,"jsAdReadyToStart",{})}),0)}));var i=document.createElement("div");i.setAttribute("id",e.divId);var o=e.widthOverwrite||e.width,a=e.heightOverwrite||e.height;if(i.setAttribute("style","width:"+o+"px;height:"+a+"px;position:relative;top:0px;"),e.rootDivElem=i,e.jsCallingVpaid)document.querySelector("body").appendChild(i),e.callingJSVpaid.handshake((function(e,t){return r.emit(e,t)}));if(e.companionsRootDivElem=document.createElement("div"),e.companionsDivElem=document.createElement("div"),e.companionsDivElem.setAttribute("style","width:100%;height:100%;position:relative;top:0px; display: block;"),e.companionsRootDivElem.appendChild(e.companionsDivElem),e.jsCallingVpaid)document.querySelector("body").appendChild(e.companionsRootDivElem);return!0}}function ga(e,t,n){if(e.jsCallingVpaid){Te(t,{players:e,log:-1==["jsAdRemainingTimeChange"].indexOf(t)},(function(){e.callingJSVpaid.pEvent(t,n)}))}}var Aa=function(){return(Aa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ba(e,t){t.isPaused||ja(e,t,"adpause"),t.isPaused=!0,t.playedAt=null,t.viewabilityTimer.pause(),t.flowTimeout.pause(),t.keepAliveTimer.pause()}function Ea(e,t){t.isPaused&&ja(e,t,"adplay"),t.isPaused=!1,t.playedAt=Date.now(),t.viewabilityTimer.resume(),t.allowLongImpressions||t.flowTimeout.resume(),t.keepAliveTimer.rewind()}function _a(e,t){ba(e,t),t.vastTracker&&t.vastTracker.setPaused(!0);try{t.pauseAd()}catch(e){}}function wa(e,t){try{t.resumeAd(),t.vastTracker&&t.vastTracker.setPaused(!1)}catch(e){}}function Ta(e,t,n,r){var i=ia(e);return n||r instanceof or&&r!==i||"content"==r&&i?{allowed:!1,playerData:i}:{allowed:!0,playerData:i}}function Ia(e,t){var n=Ta(e,0,e.paused,t),r=n.playerData;n.allowed&&("content"==t&&!e.interactive||t instanceof or&&!t.interactive||(e.autoplay=!1,e.paused=!0,r?(ba(e,r),t!=r&&_a(e,r)):"content"!==t&&e.content instanceof Ga&&e.content.isVisible()&&e.content.pauseContent(),setTimeout((function(){ja(e,null,"player.paused")}),0),e.beingVpaid&&ga(e,"jsAdPaused",{})))}function Sa(e,t,n,r,i){var o,a=ia(e);if(!1===e.paused&&a&&a.isPaused)return Ea(e,a),void wa(0,a);var s=Ta(e,0,!r&&!0===e.started&&!e.paused&&e.autoplay,t),c=s.playerData;s.allowed&&(e.paused=!1,e.autoplay=!(r||e.playingVastId),c?(Ea(e,c),t!=c&&wa(0,c)):n&&e.content.play(),ja(e,null,"player.resumed"),e.beingVpaid&&ga(e,"jsAdPlaying",{}),e.waitForResumePromise=null,null===(o=e.waitForResumeResolve)||void 0===o||o.call(e))}function Oa(e,t,n,r){if((e.width!=n||e.height!=r)&&e.rootDivElem){var i=!1;if(void 0===n&&void 0===r){var o=Yi(e);if(!o)return;n=o.width,r=o.height}else i=!0,n=Number(n),r=Number(r);if(n>=0&&r>=0){e.width=n,e.height=r,i&&(e.widthOverwrite=n,e.heightOverwrite=r,e.rootDivElem.style.width=n+"px",e.rootDivElem.style.height=r+"px");for(var a=0,s=e.plist;a<s.length;a++){var c=s[a];try{c.resizeAd&&c.resizeAd(n,r,t)}catch(e){}}}}}function Ca(e,t,n,r,i){void 0===t&&(t=e.volume),void 0===i&&(i=!1);var o=null!=n?n:0==t;if(i&&function(e){e.info.mobile||(e.hadUserInteraction=!0),e.content instanceof Ga&&e.content.unlockSlot();for(var t=0,n=e.plist;t<n.length;t++){n[t].unlockAdSlot()}}(e),function(e,t,n,r,i){var o=ia(e);o&&o.setAdVolume(t,n,i,r==o)}(e,t,o,r,i),e.content instanceof Ga&&e.content.setVolume(t,o,i),!(e.volume==t&&e.muted==o||e.muted&&o)){t>0&&(e.dynamicSound=!0),o&&null==n||(e.volume=t),e.muted=o;for(var a=0,s=e.plist;a<s.length;a++){var c=s[a];try{c.syncVolume(i),c.vastTracker&&c.vastTracker.setMuted(o)}catch(e){}}e.beingVpaid&&ga(e,"jsAdVolumeChange",{volume:t,muted:o}),ja(e,null,"player.volumeChanged",{volume:e.volume,muted:e.muted})}}function ka(e){var t=ia(e);t&&t.skipAd()}function Pa(e){var t=ia(e);if(t){(!t.skippableLastCheck||Date.now()-t.skippableLastCheck>=1e3)&&(t.skippableLastCheck=Date.now(),t.skippableChecked=t.getAdSkippableState());var n=t.showAdUI();return Aa(Aa({content:!1,paused:e.paused||t.isPaused},t.getProgress()),{adUI:n,skippable:t.skippableChecked,volume:e.volume,muted:null!=t.muted?t.muted:e.muted})}return e.content instanceof Ga?Aa(Aa({content:!0,paused:e.paused},e.content.getProgress()),{adUI:!1,skippable:!1,volume:e.volume,muted:e.content.video.muted}):null}function Da(e,t){e.content&&function(e,t){e.contentDefinition.external=t,e.content&&De(e)}(e,t)}function Ra(e,t){e.content&&function(e,t){e.content instanceof Ga&&e.content.setCurrentVideo(t)}(e,t)}var La=function(){function e(e){this.players=e}return e.prototype.pause=function(){this.pauseAds(),Ia(this.players,"api")},e.prototype.play=function(e){void 0===e&&(e={userInteraction:!0}),Sa(this.players,"api",e.userInteraction,e.vastId,e.eventParams),this.sound(null,e.userInteraction)},e.prototype.overrideInitParams=function(e){if(!1===this.players.gpvConfLoaded)for(var t in e)e.hasOwnProperty(t)&&this.players.initOverrides.push({name:t,value:e[t]});else void 0!==e.allowSound&&this.players.allowSound!=e.allowSound&&Ca(this.players,e.allowSound?1:0,!e.allowSound)},e.prototype.setContentVariant=function(e){var t,n;!0===this.players.gpvConfLoaded&&(t=this.players,n=e,t.content instanceof Ga&&t.content.setVideoVariant(n))},e.prototype.setVideoFormat=function(e){!function(e,t){e.content instanceof Ga&&e.content.setVideoFormat(t)}(this.players,e)},e.prototype.seekContent=function(e){var t,n;!0===this.players.gpvConfLoaded&&(t=this.players,n=e,t.content instanceof Ga&&t.content.seekContent(n))},e.prototype.setCurrentContent=function(e){Ra(this.players,e)},e.prototype.setContent=function(e){var t;!1===this.players.gpvConfLoaded?this.players.initOverrides.push({name:"content",value:e}):(Pe(t=this.players,e),t.content instanceof Ga&&t.content.setContent(t.contentDefinition))},e.prototype.setExtContent=function(e){!1===this.players.gpvConfLoaded?this.players.initOverrides.push({name:"contentExternal",value:e}):Da(this.players,e)},e.prototype.setPausable=function(e){this.players.initOverrides.push({name:"pausable",value:e})},e.prototype.setConsentData=function(e){void 0===e&&(e={}),this.players.gdprConsentApplies=e.gdprConsentApplies,this.players.gdprConsentString=e.gdprConsentString},e.prototype.sound=function(e,t){if(void 0===t&&(t=!0),!1===this.players.gpvConfLoaded)this.players.initOverrides.push({name:"sound",value:e});else{var n=os(e);null!=n?(void 0===n.volume&&!1===n.muted&&(n.volume=this.players.volume||1),Ca(this.players,n.volume,n.muted,null,t)):Ca(this.players,this.players.volume,this.players.muted,null,t)}},e.prototype.resize=function(e,t){Oa(this.players,"normal",e,t)},e.prototype.skip=function(){ka(this.players)},e.prototype.close=function(e,t){!function(e,t,n){if(!e.closed){e.serverEvents.supplyEvent({name:"SupplyClosed",reason:n}),ja(e,null,"closed",{preserveDiv:t,reason:n}),e.closed=!0,va(e),null!=e.viewStartPlayerInterval&&(clearInterval(e.viewStartPlayerInterval),e.viewStartPlayerInterval=null),null!=e.viewCheckPlayerInterval&&(clearInterval(e.viewCheckPlayerInterval),e.viewCheckPlayerInterval=null);var r=t?e.divElem:e.rootDivElem;r&&r.parentNode&&r.parentNode.removeChild(r)}}(this.players,e,t)},e.prototype.pauseAds=function(){var e,t;e=this.players,t=ia(e),e.autoplay=!1,t&&va(e,t)},e.prototype.show=function(){!function(e,t,n){void 0===n&&(n=xe);var r=Le(Ne(t,n)),i=e.className.replace(r,"");e.className!=i&&(e.className=i)}(this.players.rootDivElem,"hidden")},e.prototype.hide=function(){Ue(this.players.rootDivElem,"hidden")},e.prototype.sendDemandEvent=function(e,t){!function(e,t,n){var r=e.findPlayerData((function(e){return e.vastId==t}));r&&e.serverEvents.isExternalEvent(n.name)&&e.serverEvents.demandEvent(r,n)}(this.players,e,t)},e.prototype.sendSupplyEvent=function(e){this.players.serverEvents.isExternalEvent(e.name)&&this.players.serverEvents.supplyEvent(e)},e.prototype.getPlayerVersion=function(){return this.players.playerVersion},e.prototype.getProgress=function(){return Pa(this.players)},e.prototype.getSessionTargetConfig=function(){var e,t;return this.players.isFlamingoOn?null===(t=null===(e=this.players)||void 0===e?void 0:e.flamingoModule)||void 0===t?void 0:t.name:this.players.sessionConfig},e.prototype.hasPubDemand=function(){return this.players.hasPublisherDemand},e.prototype.isIvtSession=function(){return this.players.isIvt},e}();function xa(e){return e.filter((function(e){return"c"!==e.id})).map((function(e){return{id:e.id,type:e.type}}))}function Na(e,t,n){e.apiInterface=t.registerPlayer(e.rootDivElem.id,[""+e.playerId]);var r=new La(e);for(var i in r){var o=i,a=r;"function"==typeof a[o]&&(e.apiInterface[o]=a[o].bind(r))}if("function"==typeof e.apiInterface.init)try{var s=e.apiInterface.init(e.rootDivElem.id,Aa({playerEvents:e.playerEvents,serverEvents:e.serverEvents.emitter,dlist:xa(n)},n.find((function(e){return"c"===e.id}))));if(s&&"function"==typeof s.then)return s}catch(e){}return Promise.resolve(e.apiInterface)}function ja(e,t,n,r){var i={playerId:e.playerId,subid:e.subid};t&&(i.vastId=t.cxvid||t.vastId,f(c,i,t.customVars)),f(c,i,r),t&&t.moat;try{e.apiInterface.trigger(n,i)}catch(e){}}var Ua=function(){return(Ua=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function Va(e){return/.+\.m3u8$/.test(e)}function Ma(e){return e.canPlayType("application/vnd.apple.mpegurl")}function Fa(){try{if(Hls&&Hls.isSupported())return function(){try{for(var e=Hls.version.split("."),t="1.4.10".split("."),n=!0,r=0;r<e.length;r++)n&&(n=parseInt(e[r],10)>=parseInt(t[r],10));return n}catch(e){}return!1}()}catch(e){}return!1}var Ba,qa=function(){function e(e){var t=this;this.subscriber={},this.started=!1,this.baseUrl="",this.getSubtitleList=function(){return t.hls.subtitleTracks||[]},this.getSubtitle=function(){return t.hls.subtitleTrack},this.setSubtitle=function(e){null!=e&&t.hls.subtitleTrack!==e&&(t.hls.subtitleTrack=e)},this.getLevelList=function(){return t.hls.levels||[]},this.getLevel=function(){return t.hls.currentLevel},this.setLevel=function(e){null!=e&&t.hls.currentLevel!==e&&(t.hls.currentLevel=e)},this.getAudioList=function(){return t.hls.audioTracks||[]},this.getAudio=function(){return t.hls.audioTrack},this.setAudio=function(e){null!=e&&t.hls.audioTrack!==e&&(t.hls.audioTrack=e)},this.config=Ua({},e),e.autoStartLoad=!1,this.hls=new Hls(Ua({enableWorker:!0,startLevel:-1,capLevelToPlayerSize:!1,autoLevelEnabled:!0,maxBufferLength:10,maxMaxBufferLength:20},e)),this.hls.on(Hls.Events.MANIFEST_PARSED,(function(){var e,n,r;(null===(e=t.config)||void 0===e?void 0:e.autoLevelCapping)&&(t.hls.autoLevelCapping=t.config.autoLevelCapping),(null===(n=t.config)||void 0===n?void 0:n.autoStartLoad)&&(t.hls.startLoad(-1),t.started=null===(r=t.config)||void 0===r?void 0:r.autoStartLoad)})),this.hls.on(Hls.Events.ERROR,(function(e,n){var r=t.subscriber[Hls.Events.ERROR];"function"==typeof r&&r("HLS error",n)})),this.hls.on(Hls.Events.LEVEL_LOADED,(function(e,n){t.baseUrl=n.details.url,t.started||(t.started=!0,t.hls.startLoad(-1))}))}return e.prototype.init=function(e,t){var n=this;this.hls.once(Hls.Events.FRAG_LOADING,(function(e,t){try{var r=t.frag.baseUrl;n.baseUrl&&r&&r!==n.baseUrl&&(n.hls.stopLoad(),n.started=!1)}catch(e){}})),this.hls.loadSource(t),this.hls.attachMedia(e)},e.prototype.onError=function(e){this.subscriber[Hls.Events.ERROR]=e},e.prototype.recoverMediaError=function(){this.hls.recoverMediaError()},e.prototype.destroy=function(){this.hls.destroy()},e.prototype.play=function(){this.started||(this.started=!0,this.hls.startLoad(-1))},e.prototype.setEnded=function(){this.started=!1},e}(),Ha=function(){function e(){var e=this;this.subtitleTrack=-1,this.subtitleTracks=[],this.audioTrack=0,this.audioTracks=[],this.subscriber={},this.onErrorEvent=function(t){var n=e.subscriber.error;n&&n(t.message)},this.onLoadedEvent=function(){try{if(e.video.textTracks)for(var t=0;t<e.video.textTracks.length;t++){"captions"!=(n=e.video.textTracks[t]).kind&&"subtitles"!=n.kind||(e.subtitleTracks.push(Ua(Ua({},n),{name:n.label})),n.mode="disabled")}if(e.video.audioTracks)for(t=0;t<e.video.audioTracks.length;t++){var n=e.video.audioTracks[t];e.audioTracks.push(Ua(Ua({},n),{name:n.label}))}}catch(t){e.onErrorEvent(t)}e.video.removeEventListener("loadeddata",e.onLoadedEvent)},this.getSubtitleList=function(){return e.subtitleTracks},this.getSubtitle=function(){return e.subtitleTrack},this.setSubtitle=function(t){if(null!=t&&e.subtitleTrack!==t){for(var n=0;n<e.video.textTracks.length;n++){var r=e.video.textTracks[n];"captions"!=r.kind&&"subtitles"!=r.kind||(r.mode=t>=0&&t==n?"showing":"disabled")}e.subtitleTrack=t}},this.getLevelList=function(){return[]},this.getLevel=function(){return-1},this.setLevel=function(e){},this.getAudioList=function(){return e.audioTracks},this.getAudio=function(){return e.audioTrack},this.setAudio=function(t){e.audioTracks.map((function(e,n){return e.enabled=t==n})),e.audioTrack=t},this.play=function(){},this.setEnded=function(){}}return e.prototype.init=function(e,t){this.video=e,this.video.addEventListener("loadeddata",this.onLoadedEvent),this.video.addEventListener("error",this.onErrorEvent),this.video.src=t},e.prototype.recoverMediaError=function(){},e.prototype.onError=function(e){this.subscriber.error=e},e.prototype.destroy=function(){this.video.removeEventListener("loadeddata",this.onLoadedEvent),this.video.removeEventListener("error",this.onErrorEvent)},e}(),Wa=function(){return(Wa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ga=function(){function e(e,t){var n=this;this.list=[],this.currentVideoIndex=0,this.loop=!1,this.visible=!0,this.started=!1,this.paused=!1,this.unlocked=!1,this.playing=!1,this.playable=!1,this.completed=!1,this.variantsList=[],this.selectedVariant=0,this.variantSearchPattern=/(?=\.mp4$)/,this.waitForSchedule=!1,this.waitForAd=!1,this.hadAd=function(){return n.waitForAd=!1},this.blocked=function(){return n.waitForSchedule||n.waitForAd},this.videoChanged=!1,this.isRetry=!1,this.forcedPlayed=!1,this.hls=null,this.isLoaded=!1,this.playOnHLSScriptLoaded=!1,this.onLoadedMetaData=function(){n.isLoaded=!0,n.savedTime&&(n.video.currentTime=n.savedTime,n.savedTime=null)},this.onCanplay=function(){n.playable=!0,n.blocked()||(n.videoChanged=!1);var e=qe(n.video);return e&&(e.style.width="100%",e.style.height="0",setTimeout((function(){e.style.height="100%"}),0),n.paused&&n.pause()),!0},this.onPlaying=function(){n.resetFetchingErrorCount();var e=n.currentVideoSrc;n.playing?(n.players.emit(Ve.CONTENT_RESUMED,n.currentItem),ja(n.players,null,"content.resumed",{source:e})):(n.players.emit(Ve.CONTENT_START,n.currentItem),ja(n.players,null,"content.started",{source:e})),n.videoChanged=!1,n.playing=!0},this.onPlay=function(){Sa(n.players,"content"),n.players.beingVpaid&&n.players.vpaidContent&&!n.started&&(n.video.duration&&ga(n.players,"jsAdDurationChange",{duration:n.video.duration}),ga(n.players,"jsAdSkippableStateChange",{skippableState:!0}),n.onTimeUpdate()),n.started?n.paused&&(n.paused=!1):(n.started=!0,n.paused=!1)},this.onEnded=function(){var e;null===(e=n.hls)||void 0===e||e.setEnded(),n.playNextVideo(null)},this.onError=function(e){n.currentItem.fetchingErrorCount+=1,n.players.emit(Ve.CONTENT_COMPLETED,n.currentItem);var t=We(e.currentTarget);ja(n.players,null,"content.completed",{src:n.video.src,withErrors:!0,errorMsg:t}),3===n.currentItem.fetchingErrorCount&&(n.removeAt(n.currentVideoIndex),n.currentVideoIndex=0===n.currentVideoIndex?n.list.length:n.currentVideoIndex-1),n.next()},this.onPause=function(){n.video.readyState>0&&!(n.video.duration>0&&n.video.duration>n.video.currentTime)||(n.paused||(ja(n.players,null,"content.paused"),n.paused=!0),n.callPauseTimer=setTimeout((function(){n.nativeContolsVisible()&&Ia(n.players,"content")}),n.players.info.mobile?1e3:0))},this.onVolumeChange=function(){n.nativeContolsVisible()&&Ca(n.players,n.video.volume,n.video.muted)},this.onTimeUpdate=function(){n.players.beingVpaid&&n.players.vpaidContent&&!n.paused&&ga(n.players,"jsAdRemainingTimeChange",{remainingTime:n.video.duration-n.video.currentTime})},this.onDurationChange=function(){n.players.beingVpaid&&n.players.vpaidContent&&!n.paused&&ga(n.players,"jsAdDurationChange",{duration:n.video.duration})},this.onSeeked=function(){0==n.video.currentTime||qe(n.video)||ja(n.players,null,"content.seeked",{time:n.video.currentTime})},this.onClick=function(){var e=n.getClickData(),t=e.targetUrl,r=e.clickUrl;ja(n.players,null,"ui.contentClick",{url:t,clickUrl:r,variant:n.selectedVariant,index:n.currentVideoIndex,time:n.video.currentTime}),r&&(ja(n.players,null,"click",{url:r}),window.open(r,"_blank"))},this.setVideoVariant=function(e){null!=e&&n.selectedVariant!==e&&(n.savedTime=n.video.currentTime,n.selectedVariant=e,n.setVideoSrc(n.currentVideoIndex),n.start())},this.getVideoVariant=function(){return n.selectedVariant},this.getVideoVariantList=function(){return n.variantsList},this.players=e,this.selectedFormat="hls",this.init(t),this.create()}return e.prototype.getRelevantCategories=function(){var e,t;return this._isContentAboutToChange()?null===(e=this.getNextContent())||void 0===e?void 0:e.categories:null===(t=this.getCurrentItem())||void 0===t?void 0:t.categories},e.prototype.getRelevantKeywords=function(){var e,t;return this._isContentAboutToChange()?null===(e=this.getNextContent())||void 0===e?void 0:e.keywords:null===(t=this.getCurrentItem())||void 0===t?void 0:t.keywords},e.prototype.getNextContent=function(){var e=this.list;return e[this.currentVideoIndex+1]||e[0]},e.prototype._isContentAboutToChange=function(){var e=this.getProgress(),t=e.time,n=e.duration;return!(!n||!t)&&n-t<=8},Object.defineProperty(e.prototype,"currentContext",{get:function(){return this.players.isOutstream?_e.OUTSTREAM:_e.INSTREAM},enumerable:!1,configurable:!0}),e.prototype.init=function(e){null!=e.video.shuffle&&(this.shuffle=e.video.shuffle),null!=e.video.loop&&(this.loop=e.video.loop),this.list=this.getList(e.video),this.clickUrl=e.video.clickUrl,e.variants&&!this.players.usejsv&&(this.variantsList=e.variants.list||this.variantsList,this.selectedVariant=e.variants.selected||this.selectedVariant,this.variantSearchPattern=e.variants.searchPattern||this.variantSearchPattern),this.waitForAd=e.wait,this.list.length>0?this.videoChanged=!0:this.completed=!0,this.players.schedule.content.skipContent&&this.setMasPerContent(this.players,this.list)},e.prototype.getList=function(t){var n=[];t.list?n=t.list:t.url&&(n=e.getListFromUrls(t.url)),this.initFetchingErrorCount(n);var r=null!=t.start&&t.start<n.length?t.start:0;if(this.shuffle)if(null!=t.start){var i=n[r];n.splice(r,1),(n=L(n)).splice(r,0,i)}else n=L(n);return this.currentVideoIndex=r,n},e.prototype.initFetchingErrorCount=function(e){e.forEach((function(e){e.fetchingErrorCount=0}))},e.prototype.create=function(){this.container=document.createElement("div"),Ue(this.container,"content_container"),this.players.divElem&&this.players.divElem.appendChild(this.container),Ie(this.container,"contentClick",{players:this.players},[{type:"click",action:this.onClick}]);var e=this.players.contentDefinition.external,t="function"==typeof e?e:void 0,n=this.players.playbackMode===Di.CLICK_TO_PLAY?"none":"metadata";this.video=Be(t,{volume:this.players.volume,preload:n}),this.video.controls=!1,this.video.autoplay=!1,this.video.loop=!1,this.video.muted=this.players.muted,je(this.video,"content_video"),Ie(this.video,"content video event",{players:this.players},[{type:"loadedmetadata",action:this.onLoadedMetaData},{type:"canplay",action:this.onCanplay},{type:"play",action:this.onPlay},{type:"playing",action:this.onPlaying},{type:"pause",action:this.onPause},{type:"ended",action:this.onEnded},{type:"error",action:this.onError},{type:"seeked",action:this.onSeeked},{type:"volumechange",action:this.onVolumeChange},{type:"timeupdate",action:this.onTimeUpdate},{type:"durationchange",action:this.onDurationChange}]),this.container&&this.container.appendChild(this.video),this.setVideoSrc(),this.videoChanged=!1,"none"!==n&&this.load()},e.prototype.setMasPerContent=function(e,t){t.length>0&&(this.setDefaultMas(t),this.setMasForFirstContent(t,e),this.setMasForMidContent(e,t))},e.prototype.setMasForMidContent=function(e,t){for(var n=e.schedule.content.skipContent;n<t.length;)t[n].mas=e.schedule.content.midContentImp,n+=e.schedule.content.skipContent},e.prototype.setMasForFirstContent=function(e,t){e[0].mas=t.schedule.content.firstContentImp},e.prototype.setVideoSrc=function(e){var t=this;void 0===e&&(e=this.currentVideoIndex),this.currentVideoIndex=e;var n=this.getCurrentItem(),r=this.variantsList[this.selectedVariant];if(n){var i=this.getVideoSrc(n);i?(this.currentItem=n,this.currentVariant=r,Va(i)?Ma(this.video)||Fa()?this.setHLSVideoSrc():new Promise((function(e,t){var n=document.getElementsByTagName("head")[0],r=document.createElement("script");r.src="https://cdn.ex.co/player/hls/".concat("1.4.10","/hls.min.js"),r.onload=function(){return e()},r.onerror=function(e){return t(e)},n.appendChild(r)})).then((function(){return t.setHLSVideoSrc()})):this.setMP4VideoSrc()):(this.currentItem=null,this.currentVariant=null)}},e.prototype.getVideoSrc=function(e){return e.url||e.fallbackUrl||this.getHLSVideoSrc()||this.getMP4VideoSrc()},e.prototype.getHLSVideoSrc=function(){var e,t,n=this.currentItem;return[n.url,n.fallbackUrl,null===(e=n.formattedUrls)||void 0===e?void 0:e.hls,null===(t=n.formattedUrls)||void 0===t?void 0:t.mp4].find((function(e){return Va(e)}))||null},e.prototype.getMP4VideoSrc=function(){var e,t,n=this,r=this.currentItem;return[r.url,r.fallbackUrl,null===(e=r.formattedUrls)||void 0===e?void 0:e.mp4,null===(t=r.formattedUrls)||void 0===t?void 0:t.hls].find((function(e){return n.isMp4(e)}))||null},e.prototype.isMp4=function(e){return e&&e.endsWith(".mp4")},e.prototype.setHLSVideoSrc=function(){var e=this.getHLSVideoSrc();this.hls=this.hls||this.createHLSManager(e),this.hls?this.hls.init(this.video,e):(this.setMP4VideoSrc(),ja(this.players,null,"content.error",{src:e,errorMsg:"hls is not supported"})),this.currentVideoSrc=e,ja(this.players,null,"content.changed",{url:e,clickUrl:this.currentItem.clickUrl||this.clickUrl,index:this.currentVideoIndex,variant:this.selectedVariant,time:this.video.currentTime,adContent:this.isAdContent()}),this.videoChanged=!0,this.playOnHLSScriptLoaded&&(this.playOnHLSScriptLoaded=!1,this.play())},e.prototype.createHLSManager=function(e){var t=this,n=null;return Fa()?n=new qa(Wa({autoStartLoad:!0===this.players.started},this.players.hlsConfig)):Ma(this.video)&&(n=new Ha),null==n||n.onError((function(n){return t.onHLSError(n,e)})),n},e.prototype.onHLSError=function(e,t){this.isMp4(this.currentItem.url)||(this.destroyHls(),this.useFallback(t),ja(this.players,null,"content.error",{src:t,errorMsg:e}),this.isRetry?(this.play(),this.isRetry=!1):this.next())},e.prototype.setMP4VideoSrc=function(){var e=this.getMP4VideoSrc();He(this.players,this.video,e),this.currentVideoSrc=e,ja(this.players,null,"content.changed",{url:e,clickUrl:this.currentItem.clickUrl||this.clickUrl,index:this.currentVideoIndex,variant:this.selectedVariant,time:this.video.currentTime,adContent:this.isAdContent()}),this.videoChanged=!0},e.prototype.nativeContolsVisible=function(){return this.visible&&this.video.controls},e.prototype.resetFetchingErrorCount=function(){this.currentItem.fetchingErrorCount=0},e.prototype.playNextVideo=function(e){this.video.pause();var t=this.getCurrentItem(),n=this.isAdContent(),r=this.video,i=r.currentTime,o=r.duration,a=this.getNextIndex(e);n&&(a=this.removeAdContent(t,a));var s=null==a,c=null!=a&&this.list[a];if(this.isRetry=!1,i>0&&(this.players.emit(Ve.CONTENT_SKIPPED,this.currentItem),i===o)){this.players.emit(Ve.CONTENT_COMPLETED,this.currentItem);var u=this.currentVideoIndex==this.list.length-1&&(0==this.currentVideoIndex||s);ja(this.players,null,"content.completed",{src:t.url,withErrors:!1,skippedAt:i,listCompleted:u,loopCompeleted:s})}if(this.nextVideo(a),this.completed=s,this.playing=!1,!(null==c?void 0:c.adContent)&&this.adContentInterrupt){var l=this.adContentInterrupt,d=l.item,p=l.wasPlaying,f=l.timestamp,h=l.done;d!=c||h?this.adContentInterrupt=null:(this.playing=p,this.playing&&this.seekContent(f),this.adContentInterrupt.done=!0)}this.start()},e.prototype.removeAdContent=function(e,t){var n=this.list.indexOf(e);return n>-1&&t!=n&&(this.removeAt(n),n<t&&(t-=1)),t},e.prototype.getCurrentTime=function(){if(this.video)return+(this.video.currentTime||0).toFixed(2)},e.prototype.getCurrentVariantLabel=function(){return(this.variantsList[this.selectedVariant]||{}).label},e.prototype.getDuration=function(){if(this.video)return+this.video.duration.toFixed(2)},e.prototype.getClickData=function(){var e=this.list[this.currentVideoIndex],t=e&&e.clickUrl||this.clickUrl;return"function"==typeof t&&(t=t()),{targetUrl:this.video.src,clickUrl:t}},e.prototype.destroyHls=function(){try{this.hls&&(this.hls.destroy(),this.hls=null)}catch(e){}},e.prototype.nextVideo=function(e){var t=this;this.started=!1;var n=this.getNextIndex(e);null!=n&&(this.currentVideoIndex=n,t.loop&&1==t.list.length?t.video.currentTime=0:this.setVideoSrc(n),this.isRetry=!1)},e.prototype.getNextIndex=function(e){return null!=e?e:this.currentVideoIndex<this.list.length-1?this.currentVideoIndex+1:this.loop?0:null},e.prototype.next=function(){var e=this.currentVideoIndex+1>=this.list.length?0:this.currentVideoIndex+1;this.playNextVideo(e)},e.prototype.prev=function(){var e=this.currentVideoIndex-1<0?this.list.length-1:this.currentVideoIndex-1;this.playNextVideo(e)},e.prototype.load=function(){this.isLoaded||this.video.load()},e.prototype.play=function(){var e;!Va(this.currentVideoSrc)||Fa()||document.createElement("video").canPlayType("application/vnd.apple.mpegURL")?(this.completed=!1,null===(e=this.hls)||void 0===e||e.play(),this.forcedPlayed?this.video.play().catch((function(){})):(this.forcedPlayed=!0,xo(this.video).then((function(){ct.b.emit(ct.a.INTERNAL.CONTENT.PLAYING)})).catch((function(){ct.b.emit(ct.a.PLAYER.AUTOPLAY_BLOCKED)})))):this.playOnHLSScriptLoaded=!0},e.prototype.getCurrentItem=function(){return this.list[this.currentVideoIndex]},e.prototype.isAdContent=function(){return(this.getCurrentItem()||{}).adContent},e.prototype.canPreroll=function(){return!this.adContentInterrupt||this.adContentInterrupt.item!=this.getCurrentItem()},e.prototype.shouldMonetize=function(){return!this.currentItem||!this.currentItem.adContent},e.prototype.insertAdContent=function(e){this.adContentInterrupt={item:this.getCurrentItem(),timestamp:this.getCurrentTime(),adContentItem:Wa(Wa({},e),{adContent:!0}),wasPlaying:this.playing},this.setWait(!1),this.insertAt(this.currentVideoIndex,this.adContentInterrupt.adContentItem),this.currentVideoIndex+=1,this.playNextVideo(this.currentVideoIndex-1)},e.prototype.insertAt=function(e,t){this.list.splice(e,0,Wa(Wa({},t),{adContent:!0})),ja(this.players,null,"content.listUpdated",{list:this.list})},e.prototype.removeAt=function(e){this.list.splice(e,1),ja(this.players,null,"content.listUpdated",{list:this.list})},e.prototype.pause=function(){this.video&&this.video.pause()},e.prototype.showContent=function(){this.container&&!this.visible&&(this.visible=!0,this.container.style.zIndex="10001",this.container.style.display="")},e.prototype.hideContent=function(){var e=this;this.container&&this.visible&&(this.visible=!1,this.container.style.zIndex="1",this.container.style.display="none"),(void 0===document.fullscreenElement&&this.video.webkitDisplayingFullscreen||document.fullscreenElement==this.video)&&(document.exitFullscreen?document.exitFullscreen():this.video.webkitExitFullScreen&&this.video.webkitExitFullScreen(),setTimeout((function(){return Oa(e.players,"normal")}),250))},e.prototype.setContent=function(e){this.init(e),this.video&&this.setVideoSrc(0),this.start()},e.prototype.setVideoFormat=function(e){this.selectedFormat=e,this.savedTime=this.video.currentTime,this.setVideoSrc(),this.start()},e.prototype.seekContent=function(e){this.video&&(this.video.currentTime=e)},e.prototype.setCurrentVideo=function(e){null!=e.index&&(this.playNextVideo(e.index),e.allowAdBreak&&ka(this.players))},e.prototype.isVisible=function(){return this.visible},e.prototype.removeContent=function(){this.container&&this.container.parentNode&&this.container.parentNode.removeChild(this.container)},e.prototype.setVolume=function(e,t,n){this.video&&(this.players.muteToPlay&&!t&&(n||this.isUnlocked()||(t=!0)),void 0!==t&&this.video.muted!==t&&(this.video.muted=t),this.video.volume!==e&&(this.video.volume=e))},e.prototype.shouldPlay=function(){return this.isAdContent()||!0===this.players.started&&!this.blocked()},e.prototype.start=function(){var e=this;this.players.closed||Te("startContent",{players:this.players,log:!0},(function(){e.players.anyPlaying||(e.players.paused||!e.shouldPlay()||e.completed?e.videoChanged?e.load():e.pause():e.play())}))},e.prototype.hide=function(){this.hideContent()},e.prototype.show=function(){this.showContent()},e.prototype.pauseContent=function(){this.pause()},e.prototype.setWait=function(e){this.waitForSchedule=e},e.prototype.isUnlocked=function(){return this.players.info.mobile?this.unlocked:this.players.hadUserInteraction},e.prototype.unlockSlot=function(){!this.unlocked&&this.video&&(this.unlocked=!0,this.started||this.load())},e.prototype.getUrl=function(){return this.list.length>0?this.list[this.currentVideoIndex]&&this.list[this.currentVideoIndex].url:""},e.prototype.getHTMLVideoElement=function(){return this.video&&!qe(this.video)?this.video:null},e.prototype.getProgress=function(){var e=this.video.duration;return{time:Math.min(this.video.currentTime,e),duration:e}},e.prototype.useFallback=function(e){this.isRetry?this.next():(this.isRetry=!0,Va(e)?this.setMP4VideoSrc():this.setHLSVideoSrc())},e.prototype.setDefaultMas=function(e){e.forEach((function(e){e.mas=-1}))},e.getListFromUrls=function(e){return("string"==typeof e?e.split(","):e).map((function(e){return{url:e}}))},e}(),Ja=function(){function e(){this._auctions=[]}return Object.defineProperty(e.prototype,"activeAuction",{get:function(){return this._auctions.filter((function(e){return e.active}))[0]},enumerable:!1,configurable:!0}),e.prototype.startAuction=function(e){var t=this._createAuction(e);t.active=!0,this._auctions.push(t)},e.prototype.endAuction=function(){var e=this.activeAuction||null;return e&&(e.active=!1),e},e.prototype.trackBidRequest=function(e,t){var n,r,i,o=e.vastId,a=null===(r=null===(n=this.activeAuction)||void 0===n?void 0:n.dList)||void 0===r?void 0:r.get(o);null===(i=null==a?void 0:a.runs)||void 0===i||i.push([this.getStep("bidReq",t,e)]),this.activeAuction.dList.set(o,a)},e.prototype.trackBidResponse=function(e,t){var n,r,i,o,a,s=e.vastId,c=null===(r=null===(n=this.activeAuction)||void 0===n?void 0:n.dList)||void 0===r?void 0:r.get(s);null===(i=null==c?void 0:c.runs[(null==c?void 0:c.runs.length)-1])||void 0===i||i.push(this.getStep("bidRes",t,e)),null===(a=null===(o=this.activeAuction)||void 0===o?void 0:o.dList)||void 0===a||a.set(s,c)},e.prototype.trackRequest=function(e,t){var n,r,i,o,a,s,c=e.vastId,u=null===(r=null===(n=null==this?void 0:this.activeAuction)||void 0===n?void 0:n.dList)||void 0===r?void 0:r.get(c);"tam"===u.type||"prebid"===u.type?null===(i=null==u?void 0:u.runs[u.runs.length-1])||void 0===i||i.push(this.getStep("vastReq",t,e)):null===(o=null==u?void 0:u.runs)||void 0===o||o.push([this.getStep("vastReq",t,e)]),null===(s=null===(a=null==this?void 0:this.activeAuction)||void 0===a?void 0:a.dList)||void 0===s||s.set(c,u)},e.prototype.trackResponse=function(e,t){var n,r,i,o=e.vastId,a=this.activeAuction.dList.get(o);null===(n=null==a?void 0:a.runs[(null==a?void 0:a.runs.length)-1])||void 0===n||n.push(this.getStep("vastRes",t,e)),null===(i=null===(r=this.activeAuction)||void 0===r?void 0:r.dList)||void 0===i||i.set(o,a)},e.prototype.trackImpression=function(e,t){var n,r=e.vastId,i=this.activeAuction.dList.get(r);null===(n=null==i?void 0:i.runs[(null==i?void 0:i.runs.length)-1])||void 0===n||n.push(this.getStep("imp",t,e)),this.activeAuction.dList.set(r,i)},e.prototype.trackInitAd=function(e,t){var n,r=e.vastId,i=this.activeAuction.dList.get(r);null===(n=i.runs[i.runs.length-1])||void 0===n||n.push(this.getStep("initAd",t,e)),this.activeAuction.dList.set(r,i)},e.prototype.trackStartAd=function(e,t){var n,r=e.vastId,i=this.activeAuction.dList.get(r);null===(n=null==i?void 0:i.runs[(null==i?void 0:i.runs.length)-1])||void 0===n||n.push(this.getStep("startAd",t,e)),this.activeAuction.dList.set(r,i)},e.prototype._createAuction=function(e){var t=this,n={index:e.roll,type:e.adSlotCurrentType,time:Date.now(),dList:new Map,active:!1};return e.plist.forEach((function(e){return n.dList.set(e.vastId,t._makeDemandEntry(e))})),n},e.prototype._makeDemandEntry=function(e){var t=e.vastId,n=e.type,r=void 0===n?"vast":n,i=e.bidder,o=e.isPubDemand,a=e.demandId,s=Nt({demandId:a});return{id:t,type:r,isPD:o,bidder:i,sId:s.supplyId,sIdX:s.supplyIdX,sIdDx:s.supplyIdDX,dId:s.demandId,dIdX:s.demandIdX,dIdDx:s.demandIdDX,runs:[]}},e.prototype.getStep=function(e,t,n){return{step:e,timeStamp:Date.now(),cpm:t,transactionId:n.transactionId}},e}(),Ya=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){e[e.ACTIVE=1]="ACTIVE",e[e.FROZEN=2]="FROZEN",e[e.DEACTIVATED=3]="DEACTIVATED"}(Ba||(Ba={}));var za=function(e){function t(){var t=e.call(this)||this;return t._internalEventsEmitter=Fe,t.isInView=!1,t.partiallyInView=!1,t.isOutstream=!1,t.globalPricing=!1,t.monetize=!0,t.observableOnly=!1,t.beingVpaid=!1,t.trySound=!1,t.anvato=!1,t.jwplayer=!1,t.checkDomPresence=!0,t.checkDetectedSize=!1,t.vpaidContent=!1,t.curUniq=0,t.freqRetry=!1,t.anyPlaying=!1,t.allowSound=!1,t.allowPausedImpressions=!0,t.usejsv=!1,t.hadUserInteraction=!1,t.areqMethod=0,t.multipleEventMethod=0,t.mediaPreview=!1,t.intent=!1,t.controlsTouch=!1,t.secureIMA=!1,t.videoPreload="metadata",t.clickText=null,t.clickTextEnabled=!1,t.iframe=!1,t.areqEventsQueue={},t.areqEntryCount=0,t.areqTimer=null,t.eventsQueue={},t.gpvExtraParams={},t.gpvMethod=0,t.prebidJS={initialized:!1,que:[]},t.prebidActiveAuctions=0,t.prebidJSAdUnitCode=1,t.requeryPrebidTimer=null,t.requeryPrebidPromise=null,t.gpvAttempt=0,t.waitingForAds=!1,t.debug={},t.conf={},t.initOverrides=[],t.gpvConfLoaded=!1,t.timers=null,t.iiq=null,t.vastWaitFactor=1,t.totalVastRetries=null,t.maxTotalVastRetries=null,t.maxFailedVastRetries=null,t.maxAdStarts=null,t.rollAdStarts=null,t.restTime=null,t.rollDemandMaxAdStarts=null,t.vpaidInitLimit=3,t.autoScheduleReset=!1,t.sizeTolerance=null,t.widthOverwrite=null,t.heightOverwrite=null,t.rawSchedule=null,t.nullSchedule={api:!1,content:{wait:0,mas:0},time:{start:9e9,mas:0},auto:null},t.sessionConfig={tc:null,tcp:null,mv:"default",pt:null,grh:null},t.auctionTracker=new Ja,t.eventDispatcher=null,t.flamingoModule=null,t.postRoll=!1,t.roll=0,t.noAdRounds=0,t.mainAutoplay=!0,t.viewAutoplay=0,t.controlBarType=null,t.clickToPlay=!1,t.vastList={},t.playNextRepeatTimer=new A,t.viewStartPlayerInterval=null,t.viewCheckPlayerInterval=null,t.externalViewabilityFunction=null,t.debugLogReason="gpv",t.debugLog="",t.debugLogBuffer="",t.logToHTML=!1,t.submitDebugLogOnPlayerError=!1,t.submitDebugLogOnVastError=!1,t.submitDebugLogForVastId=null,t.plist=[],t.unlockedVideos=[],t.domIsReady=!1,t.started=!1,t.paused=!1,t.scheduledPixelSent=!1,t.showBrandMenu=!1,t.demandTypeThrottleMap={},t.sendStringParams=Qe,t.anyAdPlayed=!1,t.usableTagsSent={},t.curAdStarts=0,t.reqThrottleMap={},t.hlsConfig={},t.iiqPercentage=0,t.iiqEnabled=!1,t.now=Date.now,t.startTime=(new Date).getTime(),t.playerReady=new Promise((function(e){t.playerReadyResolve=function(){return t.domIsReady=!0,e()}})),t}return Ya(t,e),t.prototype.on=function(e,t){this._internalEventsEmitter.on(e,t)},t.prototype.off=function(e,t){this._internalEventsEmitter.off(e,t)},t.prototype.once=function(e,t){this._internalEventsEmitter.once(e,t)},t.prototype.emit=function(e,t){this._internalEventsEmitter.emit(e,t)},Object.defineProperty(t.prototype,"sessionTarget",{get:function(){return this.sessionConfig.tc},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sessionTargetPub",{get:function(){return this.sessionConfig.tcp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"target",{get:function(){return this.sessionTarget||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"targetPub",{get:function(){return this.sessionTargetPub||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"priceTables",{get:function(){var e;return(null===(e=this.sessionConfig)||void 0===e?void 0:e.pt)||null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"schedule",{get:function(){return this.monetize?this.rawSchedule:this.nullSchedule},set:function(e){e.content&&(e.content.type="preRoll"),e.time&&(e.time.type="midRoll"),this.rawSchedule=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPublisherDemand",{get:function(){return this.gpvData.filter((function(e){return e.gtag})).length>0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isIvt",{get:function(){var e,t;return null===(t=null===(e=this.sessionConfig)||void 0===e?void 0:e.grh)||void 0===t?void 0:t.woiv},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteOpsId",{get:function(){var e,t;return null===(t=null===(e=this.sessionConfig)||void 0===e?void 0:e.grh)||void 0===t?void 0:t.wolud},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isFlamingoOn",{get:function(){var e;return"legacy@0.0.1_"!==(null===(e=this.flamingoModule)||void 0===e?void 0:e.name)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteOpsState",{get:function(){var e,t;return null===(t=null===(e=this.sessionConfig)||void 0===e?void 0:e.grh)||void 0===t?void 0:t.wopt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skipParams",{get:function(){return this.skipOffset?{skip:1,skipafter:this.skipOffset}:{skip:0}},enumerable:!1,configurable:!0}),t.prototype.findPlayerData=function(e){return x(this.plist,e)},t.prototype.reachedDemandMaxAdStarts=function(e){var t,n=e.demandId||e.vastId;return((null===(t=this.vastList[n])||void 0===t?void 0:t.starts)||0)>=(e.getDemandMaxAdStarts()||1/0)},t.prototype.isAdContent=function(){var e=this.getContentElement();return e&&e.isAdContent()},t.prototype.getContentElement=function(){return this.content instanceof Ga&&this.content},t}(b);function Xa(e){var t=m(e.p);if(!t)return null;var n=new za;h(n,{playerId:t,isApp:v(e.app,!1),domain:y(e.d,""),cacheBuster:y(e.cb,""),networkId:m(e.ni),userId:y(e.ui,"")}),h(n,{divId:y(e.did,"video"+t+n.cacheBuster),sessionId:y(e.se,Za()),width:m(e.w),height:m(e.h),subid:y(e.sid,""),htmlOnly:v(e.ho,n.isApp),isDebugVersion:!0,playerVersion:y(e.pv||e.playerVersion,"100.0"),playerUrl:y(e.playerUrl)});var r=v(e.ssl),i=y(e.mid),o=y(e.sd,i.split(".").slice(1).join("."));i=i.split(".")[0],h(n,{machineId:i,serverDomain:o,keepDetailedDebugLog:3==m(e.sl),logDebugToConsole:2==m(e.cnl),eventConsoleLog:m(e.cnl)>0,keepDebugLog:2==m(e.sdl),logVastResponse:v(e.lvr,!1),jsCallingVpaid:y(e.job),beingVpaidUseSlot:v(e.vslot),vpaidContent:v(e.vcontent),pageLoadUid:y(e.puid),country:y(e.geo),os:y(e.os),browser:y(e.browser),isAmp:v(e.isAmp),reportViewability:v(e.rv,!1)}),n.tagConfig=e,Qa(n,e);var a={},s={d:!0,sid:!0,did:!0,p:!0,cb:!0,playerVersion:!0,mid:!0,cnl:!0,sv:!0,ap:!0,sdl:!0,se:!0,w:!0,h:!0,lvr:!0,app:!0,jsv:!0,ob:!0,pv:!0},c={};for(var u in e)isNaN(u)&&!s[u]&&e.hasOwnProperty(u)&&(a[u]||(a[u]=e[u]));n.gpvExtraParams=a,n.customParams=Object.keys(c).length?c:null,n.logDebugToConsole=n.logDebugToConsole||n.keepDetailedDebugLog;var l=M();if(n.domain||(n.domain=l),n.domainDetected=function(e){try{var t=document.createElement("a");return t.href=e,t.host}catch(t){return e}}(l).substr(0,100),n.protocol=function(e,t){if(null!=e)return e?"https:":"http:";try{var n=t||window.location||document.location;if(n&&"http:"==n.protocol)return"http:"}catch(e){}return"https:"}(r),n.serverHost=function(e){return n.protocol+"//"+(e||n.machineId)+"."+n.serverDomain},n.conf.sUrl=n.serverHost("c"),n.conf.pJsvUrl=n.conf.sUrl+"/player/jsv_pure_2.js",n.conf.maxDomLoadTimes=60,n.conf.domLoadRetryTimeout=200,n.conf.domLoadInitTimeout=500,e.is){var d=W(n.protocol,e.is),p=(new Date).getTime().toString();C(d=d.replace(/\[CB\]/g,p))}return n}function Ka(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];if(e===o)return o}return v(e)}function Qa(e,t){f(c,e,{allowLongImpressions:v(t.ali),allowPausedImpressions:v(t.pausedImpressions),allowSound:v(t.as)||a(v(t.muted),(function(e){return!e})),anvato:v(t.anvato),autoScheduleReset:v(t.asr),blackListName:y(t.bl),checkDomPresence:v(t.checkdom),checkDetectedSize:v(t.checkdetected),clickText:y(t.actext),clickTextEnabled:v(t.actcall),closeButton:v(t.scb),controlBar:v(t.co),controlBarMaybe:v(t.com),controlBarType:y(t.cotype),controlsTouch:v(t.cot),enableAdUI:v(t.adui),event2RateLow:m(t.erate_low),eventCookie:y(t.evck),eventServer:y(t.esrv),eventServer2:y(t.esrv2),hadUserInteraction:v(t.husi),iframe:v(t.iframe),interactive:v(t.interactive),jwplayer:v(t.jwplayer),mainAutoplay:Ka(t.ap,"ads"),maxAdStarts:m(t.mas),maxFailedVastRetries:m(t.mvr),maxTotalVastRetries:m(t.tvr),mediaPreview:v(t.mediaPreview),observableOnly:v(t.oo),prerollTimeout:m(t.pretime),restTime:m(t.rest),requireSound:v(t.rs),secureIMA:v(t.secureima),showBrandMenu:v(t.showBrandMenu),showNextNavigation:v(t.showNextNavigation),sizeTolerance:m(t.sizeTol),trySound:v(t.trySound),videoPreload:y(t.vp),viewAutoplay:m(t.apv,0),vpaidInitLimit:m(t.vpl),flamingoModule:t.fl,location:t.loc})}function Za(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var $a=function(e,t){this.duplicate=10,this.requestAds=60,this.prefetchVast=86400,this.fetchVast=86400,this.prebidReauction=3,this.loadAd=60,this.impressionAfterStart=3,this.longImpression=70,this.startMore=3,this.startAdParallel=70,this.startAdNonParallel=20,this.startAd=20,this.auction=9,this.waitHigherGroup=[5,12,12,0],e&&h(this,e),this.startAd=t?this.startAdParallel:this.startAdNonParallel,this.requestAds=this.prefetchVast=this.fetchVast=this.loadAd=this.startAd=this.auction,e&&h(this,e)},es=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};window.CEDATO_API=window.CEDATO_API||{registerPlayer:function(e,t){ns[e]=ns[e]||new ts,ns[e]._ready=!0;var n=function(e){var t=window.CEDATO_INIT;if(t){if("function"==typeof t)return t;if("object"==typeof t)for(var n=0,r=e;n<r.length;n++){var i=r[n];if("function"==typeof t[i])return t[i]}}return null}(es([e],t||[],!0));n&&(ns[e].init=n);return setTimeout((function(){ns[e].trigger("ready")}),0),ns[e]},getPlayer:function(e){void 0===ns[e]&&(ns[e]=new ts);return ns[e]}};var ts=function(){function e(){this._ready=!1,this.eventEmitter=new Me.EventEmitter2({wildcard:!0,maxListeners:20})}return e.prototype.on=function(e,t){var n=this,r=e.toLowerCase();if("ready"!==r||!this._ready)return this.eventEmitter.on(r,t),this;setTimeout((function(){return t({name:"ready",player:n})}),0)},e.prototype.off=function(e,t){var n=e.toLowerCase();return t?this.eventEmitter.off(n,t):this.eventEmitter.removeAllListeners(n),this},e.prototype.trigger=function(e,t){var n=e.toLowerCase();return this.eventEmitter.emit(n,{name:n,player:this,data:null==t?{}:t}),this},e}(),ns={};var rs=function(){return(rs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},is=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function os(e){switch(typeof e){case"boolean":return{muted:!e};case"number":if(e>=0&&e<=1)return{volume:e};break;case"string":if("on"===e||"off"===e)return{muted:"on"===e}}return null}function as(e,t){for(var n=[],r=0,i=e.plist;r<i.length;r++){var o=i[r];o.demandId?o.demandId==t&&n.push(o):(o.vastId==t||o.cxvid&&o.cxvid==t)&&n.push(o)}e.anyPlaying=n.length>0||e.anyPlaying;for(var a=0,s=n;a<s.length;a++){var c=s[a];e.anyPlaying=e.anyPlaying&&fa(e,c),ca(e,c)}return n.length}function ss(e,t){if(Qa(e,t),Qa(e,e.tagConfig),function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r={};d((function(n,i){var o=t.map((function(e){return n.parser(e[n.parName])})).filter(n.filter);o.length?e[i]=r[i]=o[0]:e[i]=void 0}),_)}(e,e.tagConfig,t),f(c,e,{beacons:t.callbacks,moat:t.moat,customVars:t.cvars,gpvCookie:t.gpvck,supplyCookieJson:t.cookieJson,gpvUrl:t.gpvurl,networkId:m(t.ni),retryTestGroup:m(t.rtg),vastWaitFactor:m(t.vwf,1),gpvMethod:m(t.gpvm),areqMethod:m(t.areqm),multipleEventMethod:m(t.multim),reportViewability:v(t.rv,e.reportViewability),ivtBlock:v(t.ivtb),adServerError:v(t.adServerError)}),e.prebidConfig=Rn(e),e.timers=new $a(t.timers,!1),f(l,e,{keepDebugLog:v(t.sdl),debugLogReason:y(t.sdlr),logVastResponse:v(t.lvr),submitDebugLogOnPlayerError:v(t.sdlpe),submitDebugLogOnVastError:v(t.sdlve),submitDebugLogForVastId:m(t.vd)}),t.rvu&&(e.urlReplacer=[],e.urlReplacer.vastId=t.rvu.v,e.urlReplacer.searchFor=t.rvu.s,e.urlReplacer.replaceWith=t.rvu.r),t.ho&&1==t.ho&&(e.htmlOnly=!0),!e.gpvConfLoaded){e.vastWaitFactor=e.vastWaitFactor/2,e.maxFailedVastRetries>1&&e.maxFailedVastRetries<50&&(e.maxFailedVastRetries=2*e.maxFailedVastRetries);for(var n,r,i={},o=function(t){var o=t.name,a=t.value;switch(o){case"monetize":e.monetize=a;break;case"autoplay":e.mainAutoplay=Ka(a,"ads");break;case"interactive":e.interactive=!!a;break;case"content":n=a;break;case"schedule":r=a;break;case"moat":e.moat=a;break;case"contentUrl":case"contentClickUrl":case"contentImage":case"contentImagePosition":case"contentExternal":i[o.substr(7)]=a;break;case"rotate":switch(a){case!0:a=null;break;case!1:a=1;break;default:a*=1}e.maxAdStarts=a;break;case"sound":var s=os(a);null!=s&&(e.volume=null!=s.volume?s.volume:s.muted?0:1,e.muted=null!=s.muted?s.muted:!s.volume);break;case"allowSound":"must"==a?(a=!0,!e.info.mobile&&e.hadUserInteraction||(e.mainAutoplay=!1)):"dynamic"==a&&(e.dynamicSound=!0,a=!1);case"trySound":case"closeButton":null!=a&&(e[o]=a);break;case"injectScript":!function(e,t){t=I(t);for(var n=0,r=t;n<r.length;n++){var i=r[n],o=W(e.protocol,i),a=(new Date).getTime().toString();C(o=o.replace(/\[CB\]/g,a).replace(/\[DIVID\]/g,e.divId))}}(e,a);break;case"prebid":e.prebidConfig="function"==typeof a?a(Rn(e)):a;break;case"viewability":e.externalViewabilityFunction="function"==typeof a?a:function(){return a};break;case"gpvExtraParams":e.gpvExtraParams=h(e.gpvExtraParams,a);break;case"hlsConfig":e.hlsConfig=a;break;case"customParams":e.customParams=h(e.customParams,a);break;case"adViewabilityDelay":e.adViewabilityDelay=a;break;case"iiqPercentage":e.iiqPercentage=a;break;case"eventDispatcher":e.eventDispatcher=new Qr(a)}if(e.isDebugVersion)switch(o){case"timers":e.timers=h(e.timers,a);break;case"callbacks":e.beacons=a;break;case"debug":case"customVars":f(c,e[o],a)}},a=0,s=e.initOverrides;a<s.length;a++){o(s[a])}e.initOverrides=is([],e.initOverrides.filter((function(e){return"demands"===e.name})),!0),e.gpvConfLoaded=!0,e.viewAutoplay&&(e.mainAutoplay=!1),e.beingVpaid?e.mainAutoplay=!1:(e.clickToPlay&&(e.mainAutoplay=!1),e.mainAutoplay||(e.usejsv=!1)),e.volume=null!=e.volume?e.volume:e.allowSound?1:0,e.muted=null!=e.muted?e.muted:!e.allowSound,e.dynamicSound=null!=e.dynamicSound?e.dynamicSound:!e.muted,e.controlBar&&e.usejsv&&"native"==e.controlBarType&&(e.controlBar=!1),e.interactive=null!=e.interactive?e.interactive:e.controlBar,ke(e,t.content,n,i),function(e,t,n,r){!n&&t&&(e.postRoll=!!t.cpf);var i=h({},n,e.prerollTimeout?{content:{wait:e.prerollTimeout}}:{},r);i.api=!!i.api,(i.time||i.content||i.api||i.auto)&&(e.schedule=i)}(e,t.content,t.schedule,r),e.autoplay=!1,e.paused=!0,e.beingVpaid&&(e.contentDefinition.wait=!0)}}function cs(e,t,n){var i,o,a,s,c;if(T(t)){e.waitingForAds=!1,e.gpvTime=O(e.startTime),function(e){var t=[""+e.playerId];e.cacheBuster&&t.push(e.cacheBuster);var n=function(e){var t=window.CEDATO_PARAM,n=null;if(t&&"object"==typeof t)for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o&&null!=t[o]){n=t[o];break}}var a=[];if(n)for(var s in n)n.hasOwnProperty(s)&&a.push({name:s,value:n[s]});return a}(t);e.initOverrides=is(is([],e.initOverrides,!0),n,!0)}(e),(e.initOverrides||n)&&(t=function(e,t,n){var r=e.find((function(e){return"config"==e.name})),i={};r&&r.value&&(i=U(r.value,{id:"c"}));n&&(i=U(i,n));return t.map((function(e){return"c"==e.id?U(e,i):e}))}(e.initOverrides||[],t,n),t=function(e,t){var n,i,o=function(){var e,t,n,r;if(null===(t=null===(e=window.__EXCO)||void 0===e?void 0:e.SIM)||void 0===t?void 0:t.DEMANDS)return{value:null===(r=null===(n=window.__EXCO)||void 0===n?void 0:n.SIM)||void 0===r?void 0:r.DEMANDS};return null}()||e.find((function(e){return"demands"==e.name}));if(!o)return t;if("function"==typeof o.value)return o.value(t);var a=function(e){return I(e).map((function(e,t){if("string"==typeof e&&(e={url:e}),"delete"==e.$op||"reset"==e.$op)return e;var n=e.dmid||""+(10000000001+t),r=e.id||n.split("-").slice(-1)[0];return rs({$op:"upsert",id:r,dmid:n},e)}))}(o.value),s=t.filter((function(e){return"c"==e.id}));if(null===(i=null===(n=window.__EXCO)||void 0===n?void 0:n.SIM)||void 0===i?void 0:i.DEMANDS)return is(is([],a,!0),s,!0);a.find((function(e){return"reset"==e.$op}))&&(t=s);var c=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return g.apply(void 0,r([!0,e],t,!1))}((function(e){return"c"==e.id||"delete"==e.$op||"reset"==e.$op?null:("update"!=e.$op||t.find((function(t){return t.dmid==e.dmid})))&&e.dmid}),t=t.filter((function(e){return!a.find((function(t){return"delete"==t.$op&&t.dmid==e.dmid}))})),a);return is(is([],c,!0),s,!0)}(e.initOverrides||[],t)),e.urlReplacer=null;for(var u=0,l=t;u<l.length;u++){if("c"==(f=l[u]).id&&"d"==f.c)return void va(e);"c"==f.id?ss(e,f):"d"==f.c&&as(e,f.id)}for(var d=0,p=t;d<p.length;d++){var f;if((f=p[d]).id&&"c"!=f.id&&"d"!=f.c){var h=new sr(e,f);e.plist.push(h)}}return(null===(i=window.__EXCO)||void 0===i?void 0:i.SIM)&&(null===(a=null===(o=window.__EXCO)||void 0===o?void 0:o.SIM)||void 0===a?void 0:a.DEMANDS_CB)&&(null===(c=null===(s=window.__EXCO)||void 0===s?void 0:s.SIM)||void 0===c||c.DEMANDS_CB(t)),t}}var us=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},ls=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}};function ds(e){var t=e.get,n=e.data,r=void 0===n?{}:n,i=e.compress,o=e.decompress;return us(this,void 0,void 0,(function(){var e;return ls(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,sn(t("https://gpv.ex.co/player/d?v=2&b=".concat(i(r))),2e3)];case 1:return e=n.sent(),[2,o(e)];case 2:return n.sent(),[2,null];case 3:return[2]}}))}))}var ps={cvars:{IP:"",DNT:"0"},ap:!0,id:"c",vwf:1,as:!1,mvr:1.01,ho:!1,adServerError:!0,esrv2:"https://e.channelexco.com/event",schedule:{initialPreRollTimeout:10,minSecondsBetweenFetch:0,slots:{interval:15},content:{limit:60,mas:2,wait:10},time:{wait:10,limit:60,mas:1,start:15}},co:!1,impDetail:!0,moat:{ids:{level3:"[DMID]",level2:"",level4:"",level1:"",slicer1:""},partnerCode:"cedatojsvideo958042602703",rate:0}},fs=[];var hs=new Set(["20","21","22","23","24","25","26"]),vs=function(){return"s-".concat((e=Array.from(hs))[Math.floor(Math.random()*e.length)]);var e},ms=n(5),ys=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},gs=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},As=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function bs(e,t){return ys(this,void 0,void 0,(function(){return gs(this,(function(n){return[2,new Promise((function(n){var r,i,o=(r=e.adServerURL,(i=new URLSearchParams(r)).get("p")+i.get("cb"));e.isApp&&function(e){var t=new URL(e.adServerURL);t.searchParams.set(Rt.APP_BUNDLE,e.appParams.bundle),t.searchParams.set(Rt.APP_NAME,e.appParams.name),e.appParams.category&&t.searchParams.set(Rt.APP_CATEGORY,e.appParams.category),e.appParams.storeId&&t.searchParams.set(Rt.APP_STORE_ID,e.appParams.storeId),e.appParams.storeUrl&&t.searchParams.set(Rt.APP_STORE_URL,e.appParams.storeUrl),e.appParams.version&&t.searchParams.set(Rt.APP_VERSION,e.appParams.version),e.appParams.deviceId&&t.searchParams.set(Rt.DEVICE_ID,e.appParams.deviceId),e.appParams.ifa&&t.searchParams.set(Rt.IFA,e.appParams.ifa),e.adServerURL=t.toString()}(e),window.__EXCO.CDT_TAG_CB=window.__EXCO.CDT_TAG_CB||{},window.__EXCO.CDT_TAG_CB[o]=window.__EXCO.CDT_TAG_CB[o]||function(e){return n(e)},window.CEDATO_TAG=window.CEDATO_TAG||{players:[],version:"-NA-",init:function(){var t,n,r=window.CEDATO_TAG.players.pop()||{},i=r.gpvData,o=r.params,a=r.id;window.__EXCO.CDT_TAG_CB[a]&&window.__EXCO.CDT_TAG_CB[a]({gpv:i,params:o}),t=e.playerId,n=i,window.__EXCO.AP=window.__EXCO.AP||{},window.__EXCO.AP[t]=window.__EXCO.AP[t]||{},window.__EXCO.AP[t].gpv=n}},e.adServerURL=function(e,t){void 0===t&&(t={});try{return ee(e,t)}catch(n){return we.a.error("Failed to append additional params to url - ".concat(e),{error:n,params:t}),e}}(e.adServerURL,{pub:1}),function(e,t){return void 0===t&&(t={}),new Promise((function(n,r){var i=document,o=i.getElementsByTagName("head")[0],a=i.createElement("script");a.src=e,a.onload=function(){return n()},a.onerror=function(e){return r(e)};var s=t.async,c=t.defer;s&&(a.async=!0),c&&(a.defer=!0),o.appendChild(a)}))}(e.adServerURL).catch((function(){var r,i=(r=e.adServerURL,{gpv:As([ps],fs,!0),params:new URL(r).searchParams.toString()+"&mid=".concat(vs(),"&sd=channelexco.com")});t.send(Rr,{extraData:{defaults:i}}),n(i)}))}))]}))}))}function Es(e){return ys(this,void 0,void 0,(function(){var t,n;return gs(this,(function(r){switch(r.label){case 0:return[4,ds({get:nt,compress:mr.compressObj,decompress:mr.decompressObj,data:_s(e)})];case 1:return t=r.sent(),n=t?function(e){"default"===(null==e?void 0:e.mv)&&(e.tc=null);return e.tc&&(e.tc=Zn(e.tc)),e.tcp&&(e.tcp=Zn(e.tcp)),e}(t):null,we.a.log("GPV service response",n),[2,n]}}))}))}function _s(e){return{pageLoadUid:e.pageLoadUid,country:e.country,browser:e.browser,os:e.os,networkId:e.networkId,hu:!0,p:e.playerId,d:e.domain,userId:e.userId}}var ws=function(){return(ws=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},Ts=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Is=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Ss=n(56),Os=n(57);var Cs=function(e){return Ts(void 0,void 0,void 0,(function(){var t,n,r,i,o,a,s,c,u;return Is(this,(function(l){switch(l.label){case 0:return l.trys.push([0,7,,8]),Object(ct.c)(e.NgEvents),Object(we.b)(e),[4,Cr({network:null==e?void 0:e.networkId,gdpr:null==e?void 0:e.gdprConsentApplies,gdpr_consent:null==e?void 0:e.gdprConsentString})];case 1:return l.sent(),(t=function(e){e.reqSampled=xn(10);var t=new Qr(e);return t.addBaseAttribute("reqSampled",e.reqSampled),t}(e)).send(xr),[4,Promise.all([bs(e,t),Es(e)])];case 2:return n=l.sent(),r=n[0],i=n[1],ms.default.isEnabled(e,ms.PLUGINS.TABOOLA)?[4,ms.default.load(ms.PLUGINS.TABOOLA,{callbacks:e.callbacks})]:[3,5];case 3:return o=l.sent(),a=r,[4,o.apply(r.gpv)];case 4:a.gpv=l.sent(),l.label=5;case 5:return s=function(e,t,n,r){var i,o,a,s=e.adServerURL,c=e.overrides,u=t.gpv,l=Xa(function(e,t){var n;n=t?{}:[];try{for(var r=e.slice(e.indexOf("?")+1).split("&"),i=0,o=r;i<o.length;i++){var a=o[i].split("=");t||n.push(a[0]);var s=a[1];t&&(s=q(s)),n[a[0]]||(n[a[0]]=s)}}catch(e){n={}}return n}(t.params,!0));l.renderingContext=e.renderingContext||document,l.sessionConfig=n||l.sessionConfig,l.publisher=e.publisher,l.networkId=+(null===(i=e.publisher.seat)||void 0===i?void 0:i.id)||+e.networkId,l.userId=e.userId,l.pageLoadUid=e.pageLoadUid,l.country=e.country,l.browser=e.browser,l.os=e.os,l.rootDivElem=function(e){return e.renderingContext.querySelectorAll("[id='"+e.divId+"']:not([data-exco-used])")[0]}(l),l.info=Os.getDeviceInfo(),l.isAmp=e.isAmp,l.src=s,l.autoplay=![Di.CLICK_TO_PLAY].includes(e.playbackMode),l.mainAutoplay="ads",l.hlsConfig=c.hlsConfig,l.allowSound="must"===c.allowSound,l.customParams=c.customParams,l.adViewabilityDelay=c.adViewabilityDelay,l.eventDispatcher=r,l.iiqPercentage=c.iiqPercentage,l.iiqEnabled=e.iiqEnabled,l.externalViewabilityFunction=c.viewability,l.sendRemoteLogs=e.sendRemoteLogs,l.adServerURL=s,!1===c.monetize&&(l.monetize=!1),l.gpvData=cs(l,u,e.supplyExtraParams),l.auctionEventSession=xn(10),l.prebidConfig=function(e,t){var n=Rn(e);return n.src="https://cdn.ex.co/prebid/production/release/1.7.0/latest/expb.js",n}(l),l.playbackMode=e.playbackMode||Di.AUTO_PLAY,l.isOutstream=e.isOutstream,l.plugins=e.plugins,l.callbacks=e.callbacks,(null===(o=e.skipButton)||void 0===o?void 0:o.enabled)&&(l.skipOffset=5);l.globalPricing=e.globalPricing,l.isApp=e.isApp,l.isApp&&(l.appParams=e.appParams,!l.domain&&(null===(a=l.appParams)||void 0===a?void 0:a.name)&&(l.domain="app://".concat(encodeURIComponent(l.appParams.name))));return l.gdprConsentApplies=e.gdprConsentApplies,l.gdprConsentString=e.gdprConsentString,l.resellersJSONDomain=e.publisher.resellersJSONDomain||e.resellersJSONDomain,Bn(l),l}(e,r,i,t),function(e,t,n){var r=this,i=new URL(e).search,o=setInterval((function(){return ys(r,void 0,void 0,(function(){var e;return gs(this,(function(r){switch(r.label){case 0:return t.closed?(clearInterval(o),[2,!1]):[4,rt("".concat(t.serverHost(),"/player/gpv").concat(i))];case 1:return e=r.sent(),ms.default.isEnabled(n,ms.PLUGINS.TABOOLA)?[4,ms.default.get(ms.PLUGINS.TABOOLA)]:[3,4];case 2:return[4,r.sent().apply(e)];case 3:e=r.sent(),r.label=4;case 4:return t.gpvData=e,t.gpvDataUpdated=!0,[2]}}))}))}),3e5)}(e.adServerURL,s,e),function(e,t){var n,r,i,o;e.addBaseAttribute("flamingo",t.isFlamingoOn),t.isFlamingoOn&&e.addBaseAttribute("mv",null===(n=null==t?void 0:t.flamingoModule)||void 0===n?void 0:n.name),e.addBaseAttribute("state",null===(r=t.location)||void 0===r?void 0:r.state),e.addBaseAttribute("dma",null===(i=t.location)||void 0===i?void 0:i.dma),e.addBaseAttribute("city",null===(o=t.location)||void 0===o?void 0:o.city),e.addBaseAttribute("app",t.isApp),t.isApp&&e.addBaseAttribute("appParams",t.appParams)}(t,s),s.isIvt&&function(e){var t;null===(t=e.eventDispatcher)||void 0===t||t.send(Lr,{})}(s),ke(s,null,e.contents),[4,Na(s,window.CEDATO_API,r.gpv)];case 6:return c=l.sent(),Ps(s),[2,ks(c)];case 7:return u=l.sent(),Se(null,"Player init error")(u),[3,8];case 8:return[2]}}))}))},ks=function(e){return new Promise((function(t){e.on("player.ready",(function(){return t(e)}))}))};var Ps=function(e){return Ts(void 0,void 0,void 0,(function(){return Is(this,(function(t){switch(t.label){case 0:return e.DMVAST=ws(ws({},Ss),{client:new Ss.VASTClient,parser:new Ss.VASTParser}),function(e){e.sendPixel=function(e){(new Image).src=e},e.injectScript=function(e){C(e)},e.injectIframe=function(e){k(e)},e.playerEvents=new Me.EventEmitter2({wildcard:!0,maxListeners:20}),e.serverEvents=new Yo(e,(function(e,t){var n;null===(n=navigator.sendBeacon)||void 0===n||n.call(navigator,e,t)}))}(e),e.jsCallingVpaid&&(e.beingVpaid=!0,e.vpaidContent||(e.maxAdStarts=1),function(e){if(e.jsCallingVpaid){var t=window;if(!t[e.jsCallingVpaid]||!t[e.jsCallingVpaid].pEvent)return Ae(e,6,"vpaid parent not found in post calling js obj: "+e.jsCallingVpaid),!1;e.callingJSVpaid=t[e.jsCallingVpaid]}}(e)),e.detect=function(e){var t="h";e.beingVpaid&&(t="j");var n="d";e.info&&e.info.mobile&&(n="m");e.isApp&&(n="a");return"s"+t+n}(e),e.info.mobile&&(e.freqRetry=!0),e.muteToPlay=!0,he(e,te.E_START,{},{}),ya(e),[4,gn(e)];case 1:return t.sent(),Ji(e),[2]}}))}))};var Ds,Rs=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},Ls=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},xs=document.currentScript,Ns=null===(Ds=null==xs?void 0:xs.dataset)||void 0===Ds?void 0:Ds.id;window.__EXCO=window.__EXCO||{},Ns&&(window.__EXCO[Ns]=window.__EXCO[Ns]||{}),(window.__EXCO[Ns]||window.__EXCO).AP_INIT=function(e){return Rs(void 0,void 0,void 0,(function(){return Ls(this,(function(t){switch(t.label){case 0:return[4,Cs(e)];case 1:return[2,t.sent()]}}))}))}},12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.b64Utils=t.decompressStr=t.decompressObj=t.compressStr=t.compressObj=void 0;var r=n(49);Object.defineProperty(t,"compressObj",{enumerable:!0,get:function(){return r.compressObj}}),Object.defineProperty(t,"compressStr",{enumerable:!0,get:function(){return r.compressStr}}),Object.defineProperty(t,"decompressObj",{enumerable:!0,get:function(){return r.decompressObj}}),Object.defineProperty(t,"decompressStr",{enumerable:!0,get:function(){return r.decompressStr}}),t.b64Utils=n(50)},17:function(e,t,n){var r,i=document.currentScript;n.p=(r=(null==i?void 0:i.src)||"/").includes("localhost")?r.replace("https:","http:").replace(/\?exng|player\.js/g,""):r.replace(/http:|https:|player\.js/g,"")},18:function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var c,u=[],l=!1,d=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&f())}function f(){if(!l){var e=s(p);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},2:function(e,t,n){"use strict";var r,i;n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),function(e){e[e.NONE=-1]="NONE",e[e.ERROR=0]="ERROR",e[e.WARN=1]="WARN",e[e.INFO=2]="INFO",e[e.LOG=3]="LOG",e[e.DEBUG=4]="DEBUG",e[e.TRACE=5]="TRACE",e[e.ALL=6]="ALL"}(r||(r={})),function(e){e.FETCH_PRIMARY="fetch.primary",e.FETCH_SECONDAY="fetch.secondary",e.FETCH_DONE="fetch.done",e.AD_FETCH="ad.fetch",e.AD_START="ad.start",e.AD_IMPRESSION="ad.impression",e.AD_COMPLETE="ad.complete",e.AD_ERROR="ad.error",e.PLUGIN_AD_IMPRESSION="plugin.ad.impression"}(i||(i={}))},27:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSONparse=t.JSONstringify=void 0;t.JSONstringify=e=>{try{return JSON.stringify(e,(e,t)=>"object"==typeof t&&null!==t&&(e=>{if(e.constructor&&e.constructor.name){const t=e.constructor.name.toLowerCase();return t&&t.includes("html")&&t.includes("node")}return!1})(t)?"[Circular]":t)}catch(e){}return""};t.JSONparse=e=>{try{return JSON.parse(e)}catch(e){}}},36:function(e,t){
/**
 * @id5io/id5-api.js
 * @version v1.0.36
 * @link https://id5.io/
 * @license Apache-2.0
 */
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=10)}([function(e,t,n){"use strict";t.c=function(e,t){var n=!0;return L(e,(function(e){return n=n&&t(e)})),n},t.v=E,t.w=_,t.u=w,t.z=function(e){b=!!e},t.p=I,t.q=function(){return g},n.d(t,"a",(function(){return S})),t.j=C,t.o=k,t.t=P,t.k=D,t.r=function(e){return C(e,f)},t.s=function(e){return C(e,h)},t.l=function(e){return C(e,v)},t.m=function(e){return void 0!==e},t.n=R,t.i=function(e){return(e=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)"))?decodeURIComponent(e[2]):null},t.y=function(e,t,n){document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(""!==n?"; expires=".concat(n):"","; path=/")},t.b=function(e,t,n){var r,s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:{};try{var c=s.method||(n?"POST":"GET");document.createElement("a").href=e;var u,l="object"===o(t)&&null!==t?t:{success:function(){E("ajax","xhr success")},error:function(e){w("ajax","xhr error",null,e)}};"function"==typeof t&&(l.success=t),(r=new window.XMLHttpRequest).onreadystatechange=function(){var e;r.readyState===x&&(200<=(e=r.status)&&e<300||304===e?l.success(r.responseText,r):l.error(r.statusText,r))},r.ontimeout=function(){w("ajax","xhr timeout after ",r.timeout,"ms")},"GET"===c&&n&&(i((u=function(e,t){var n=document.createElement("a");return t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e),t=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString,{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:t?n.search:function(e){return e?e.replace(/^\?/,"").split("&").reduce((function(e,t){var n=t.split("=");t=(n=(t=2,function(e){if(Array.isArray(e))return e}(n=n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(n,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))[0],n=n[1];return/\[\]$/.test(t)?(e[t=t.replace("[]","")]=e[t]||[],e[t].push(n)):e[t]=n||"",e}),{}):{}}(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}}(e,s)).search,n),e=function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(function(e){return Object.keys(e).map((function(t){return Array.isArray(e[t])?e[t].map((function(e){return"".concat(t,"[]=").concat(e)})).join("&"):"".concat(t,"=").concat(e[t])})).join("&")}(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}(u)),r.open(c,e,!0),s.withCredentials&&(r.withCredentials=!0),L(s.customHeaders,(function(e,t){r.setRequestHeader(t,e)})),s.preflight&&r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("Content-Type",s.contentType||"text/plain"),"POST"===c&&n?r.send(n):r.send()}catch(e){w("ajax","xhr construction",e)}},t.f=function(e,t,n){"loading"!==document.readyState?N(e,t,n):document.addEventListener("DOMContentLoaded",(function(){N(e,t,n)}))},t.d=function(e){for(var t,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=function(e,t){if(k(Math.imul))return Math.imul(e,t);var n=(4194303&e)*(t|=0);return 4290772992&e&&(n+=(4290772992&e)*t|0),0|n},i=3735928559^n,o=1103547991^n,a=0;a<e.length;a++)i=r(i^(t=e.charCodeAt(a)),2654435761),o=r(o^t,1597334677);return i=r(i^i>>>16,2246822507)^r(o^o>>>13,3266489909),(4294967296*(2097151&(o=r(o^o>>>16,2246822507)^r(i^i>>>13,3266489909)))+(i>>>0)).toString()},t.h=function(e){var t=/[()-.:;=?_/]/g;return D(e.brands)&&(e.brands=j(e.brands,(function(e){return P(e.brand)&&e.brand.search(t)<0}))),D(e.fullVersionList)&&(e.fullVersionList=j(e.fullVersionList,(function(e){return P(e.brand)&&e.brand.search(t)<0}))),e},t.g=function(e,t,n,r,i){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:i;return e===i?n:e},t.x=function(e){for(var t=Object.keys(e),n=t.length,r=new Array(n);n--;)r[n]=[t[n],e[t[n]]];return r},t.e=function e(t,n){var r=U(t)&&U(n);if(!r)return t===n;var i=Object.keys(t);if(r=Object.keys(n),i.length!==r.length)return!1;for(var o=0,a=i;o<a.length;o++){var s=a[o];if(!e(t[s],n[s]))return!1}return!0};var r=n(6);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function c(e,t){return(c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}(this,t?(n=d(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){return e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==o(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===o(e)?e:String(e)}var f="Number",h="Object",v="Boolean",m=Object.prototype.toString,y="TRUE"===O("id5_debug").toUpperCase(),g="TRACE"===O("id5_debug").toUpperCase(),A=Boolean(window.console),b=!1;function E(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];T(console.info,e,"INFO",n)}function _(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];T(console.warn,e,"WARNING",n)}function w(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];T(console.error,e,"ERROR",n)}function T(e,t,n,r){I()&&A&&e&&e.apply(console,["%cID5 - #".concat(t),"color: #fff; background: #1c307e; padding: 1px 4px; border-radius: 3px;",n].concat(r))}function I(){return y||g||b}var S=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(i,r.b);var e,t,n=u(i);function i(e){var t,r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=l(t=n.call(this)),a=void 0,(o=p(o="_invocationId"))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,t._invocationId=e,t}return e=i,(t=[{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[this._invocationId].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];E.apply(void 0,[this._invocationId].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];_.apply(void 0,[this._invocationId].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];w.apply(void 0,[this._invocationId].concat(t))}}])&&s(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),i}();function O(e){return null===(e=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(window.location.search))?"":decodeURIComponent(e[1].replace(/\+/g," "))}function C(e,t){return m.call(e)==="[object "+t+"]"}function k(e){return C(e,"Function")}function P(e){return C(e,"String")}function D(e){return C(e,"Array")}function R(e){if(!e)return!0;if(D(e)||P(e))return!(0<e.length);for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}function L(e,t){if(!R(e)){if(k(e.forEach))return e.forEach(t,this);var n=0,r=e.length;if(0<r)for(;n<r;n++)t(e[n],n,e);else for(n in e)hasOwnProperty.call(e,n)&&t.call(this,e[n],n)}}var x=4;function N(e,t,n){var r=new Image;r.src=e,k(t)&&t(),k(n)&&(r.complete?n():r.addEventListener("load",n))}function j(e,t){var n=[];return L(e,(function(e){t(e)&&n.push(e)})),n}var U=function(e){return null!=e&&"object"===o(e)}},function(e,t){e.exports={STORAGE_CONFIG:{ID5:{name:"id5id",expiresDays:90},LAST:{name:"id5id_last",expiresDays:90},CONSENT_DATA:{name:"id5id_cached_consent_data",expiresDays:30},PD:{name:"id5id_cached_pd",expiresDays:30},SEGMENTS:{name:"id5id_cached_segments",expiresDays:30},PRIVACY:{name:"id5id_privacy",expiresDays:30},LIVE_INTENT:{name:"id5li",expiresDays:90}},LEGACY_COOKIE_NAMES:["id5.1st","id5id.1st"],PRIVACY:{JURISDICTIONS:{gdpr:!0,ccpa:!1,lgpd:!0,other:!1}},ID5_EIDS_SOURCE:"id5-sync.com",LIVE_INTENT_POLL_INTERVAL_MS:500}},function(e,t){var n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){return(i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=a(e);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=a(this).constructor,Reflect.construct(i,arguments,n)):i.apply(this,arguments))}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){return e=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==r(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===r(e)?e:String(e)}(i.key),i)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return p}));var l=function(){function e(){s(this,e)}return u(e,[{key:"debug",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}}]),e}(),d=new l,p=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&i(e,t)}(t,l);var e=o(t);function t(n,r){var i;return s(this,t),(i=e.call(this))._prefix=n,i._delegate=r,i}return u(t,[{key:"debug",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._delegate).debug.apply(e,[this._prefix].concat(n))}},{key:"info",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._delegate).info.apply(e,[this._prefix].concat(n))}},{key:"warn",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._delegate).warn.apply(e,[this._prefix].concat(n))}},{key:"error",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=this._delegate).error.apply(e,[this._prefix].concat(n))}}]),t}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return A}));var r=n(0),i=n(18),o=(t=n(1),n.n(t)),a=(n(5),["localStoragePurposeConsent","ccpaString"]);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function d(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return e=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==s(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===s(e)?e:String(e)}var h={tcfv1:{objName:"__cmpCall",objKeys:["command","parameter"],returnObjName:"__cmpReturn"},tcfv2:{objName:"__tcfapiCall",objKeys:["command","version"],returnObjName:"__tcfapiReturn"},uspv1:{objName:"__uspapiCall",objKeys:["command","version"],returnObjName:"__uspapiReturn"}},v=Object.freeze({NONE:"none",TCF_V1:"TCFv1",TCF_V2:"TCFv2",USP_V1:"USPv1",ID5_ALLOWED_VENDORS:"ID5"}),m=Object.freeze({FORCE_ALLOWED_BY_CONFIG:"force_allowed_by_config",ID5_CONSENT:"id5_consent",PROVISIONAL:"provisional",JURISDICTION:"jurisdiction",CONSENT_API:"consent_api"}),y=function(){function e(t,n,r){u(this,e),p(this,"allowed",!1),p(this,"grantType",m.NONE),p(this,"api",v.NONE),this.allowed=t,this.grantType=n,this.api=r}return d(e,[{key:"isDefinitivelyAllowed",value:function(){return this.allowed&&this.grantType!==m.PROVISIONAL}}]),e}(),g=function(){function e(){u(this,e),p(this,"api",v.NONE),p(this,"consentString",void 0),p(this,"gdprApplies",!1),p(this,"localStoragePurposeConsent",void 0),p(this,"allowedVendors",void 0),p(this,"hasCcpaString",!1),p(this,"ccpaString","")}return d(e,[{key:"localStorageGrant",value:function(){return new y(this.isGranted(),m.CONSENT_API,this.api)}},{key:"isGranted",value:function(){switch(this.api){case v.NONE:return!0;case v.TCF_V1:return!this.gdprApplies||!0===this.localStoragePurposeConsent;case v.TCF_V2:return!1===this.gdprApplies||!0===this.localStoragePurposeConsent;case v.ID5_ALLOWED_VENDORS:return this.allowedVendors.includes("131");case v.USP_V1:return!0}}},{key:"hashCode",value:function(){this.localStoragePurposeConsent,this.ccpaString;var e=function(e,t){if(null==e)return{};var n,r=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols)for(var i=Object.getOwnPropertySymbols(e),o=0;o<i.length;o++)n=i[o],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n]);return r}(this,a);return Object(r.d)(JSON.stringify(e))}}]),e}(),A=function(){function e(t,n,r){u(this,e),p(this,"invocationId",void 0),p(this,"consentData",void 0),p(this,"storedPrivacyData",void 0),p(this,"localStorage",void 0),p(this,"_consentRequested",!1),this.invocationId=t,this.localStorage=n,this.storageConfig=r,this.resetConsentData()}return d(e,[{key:"requestConsent",value:function(e,t,n,i){if(e)this.consentData=new g,Object(r.w)(this.invocationId,"cmpApi: ID5 is operating in forced consent mode and will not retrieve any consent signals from the CMP"),i(this.consentData);else if(this._consentRequested)i(this.consentData);else switch(this.consentData=new g,this._consentRequested=!0,t){case"static":this.parseStaticConsentData(n,i);break;case"iab":this.lookupIabConsent(i);break;default:Object(r.u)(this.invocationId,"cmpApi: Unknown consent API: ".concat(t)),this.resetConsentData(),i(this.consentData)}}},{key:"getOrCreateConsentData",value:function(){return this.consentData||(this.consentData=new g),this.consentData}},{key:"parseStaticConsentData",value:function(t,n){t=t||{};var i={};Object(r.s)(t.getConsentData)?i=e.parseTcfData(t,1):Object(r.s)(t.getTCData)?i=e.parseTcfData(t.getTCData,2):Object(r.k)(t.allowedVendors)?i={api:v.ID5_ALLOWED_VENDORS,allowedVendors:t.allowedVendors.map((function(e){return String(e)})),gdprApplies:!0}:Object(r.s)(t.getUSPData)?i=e.parseUspData(t.getUSPData):Object(r.w)(this.invocationId,"cmpApi: No static consent data detected! Using defaults."),c(this.consentData,i),Object(r.v)(this.invocationId,"cmpApi: Detected API '".concat(this.consentData.api,"' from static consent data"),t),n(this.consentData)}},{key:"lookupIabConsent",value:function(e){var t=this,n=[],r=(i=function(r){return n[r]=!1,function(i){n[r]||(n[r]=!0,i&&c(t.consentData,i),n.every((function(e){return e}))&&e(t.consentData))}})(0),i=i(1);this.lookupTcf(r),this.lookupUsp(i)}},{key:"lookupUsp",value:function(t){var n=this,i=(o=e.findUsp()).uspapiFrame,o=o.uspapiFunction;if(!i)return Object(r.w)(this.invocationId,"cmpApi: USP not found! Using defaults for CCPA."),void t();(Object(r.o)(o)?(Object(r.v)(this.invocationId,"cmpApi: Detected USP is directly accessible, calling it now."),o):(Object(r.v)(this.invocationId,"cmpApi: Detected USP is outside the current iframe. Using message passing."),e.buildCmpSurrogate("uspv1",i)))("getUSPData",1,(function(i,o){o?t(e.parseUspData(i)):(Object(r.u)(n.invocationId,"cmpApi: USP callback not succesful. Using defaults for CCPA."),t())}))}},{key:"lookupTcf",value:function(t){var n=(o=e.findTCF()).cmpVersion,i=o.cmpFrame,o=o.cmpFunction;if(!i)return Object(r.w)(this.invocationId,"cmpApi: TCF not found! Using defaults for GDPR."),void t();Object(r.o)(o)?this.lookupDirectTcf(n,o,t):(Object(r.v)(this.invocationId,"cmpApi: Detected TCF is outside the current iframe. Using message passing."),this.lookupMessageTcf(n,i,t))}},{key:"lookupMessageTcf",value:function(t,n,r){n=e.buildCmpSurrogate(1===t?"tcfv1":"tcfv2",n),this.lookupDirectTcf(t,n,r)}},{key:"lookupDirectTcf",value:function(t,n,i){function o(e,t,n){Object(r.v)(c.invocationId,"cmpApi: TCFv".concat(e," - Received a call back: ").concat(t),n)}function a(e,t){Object(r.u)(c.invocationId,"cmpApi: TCFv".concat(e," - Received insuccess: ").concat(t,". Please check your CMP setup. Using defaults for GDPR."))}var s,c=this,u={},l={},d=function(t){return l[t]=!1,function(n,r){l[t]=!0,r?(o(1,t,n),u[t]=n):a(1,t),Object.values(l).every((function(e){return e}))&&i(e.parseTcfData(u,1))}};1===t?(s=d("getConsentData"),d=d("getVendorConsents"),n("getConsentData",null,s),n("getVendorConsents",null,d)):2===t&&n("addEventListener",t,(function(t,n){if(o(2,"event",t),!n)return a(2,"addEventListener"),void i();!t||!1!==t.gdprApplies&&"tcloaded"!==t.eventStatus&&"useractioncomplete"!==t.eventStatus||i(e.parseTcfData(t,2))}))}},{key:"resetConsentData",value:function(){this.consentData=void 0,this.storedPrivacyData=void 0,this._consentRequested=!1}},{key:"localStorageGrant",value:function(e,t){if(!0===e||!0===t)return Object(r.w)(this.invocationId,"cmpApi: Local storage access granted by configuration override, consent will not be checked"),new y(!0,m.FORCE_ALLOWED_BY_CONFIG,v.NONE);if(this.consentData&&this.consentData.api!==v.NONE)return this.consentData.localStorageGrant();if(Object(r.s)(this.storedPrivacyData)||(n=this.localStorage.getItemWithExpiration(this.storageConfig.PRIVACY),this.storedPrivacyData=n&&JSON.parse(n),Object(r.v)(this.invocationId,"cmpApi: Loaded stored privacy data from local storage",this.storedPrivacyData)),this.storedPrivacyData&&!0===this.storedPrivacyData.id5_consent)return new y(!0,m.ID5_CONSENT,v.NONE);if(!this.storedPrivacyData||!Object(r.m)(this.storedPrivacyData.jurisdiction))return new y(!0,m.PROVISIONAL,v.NONE);var n=(n=this.storedPrivacyData.jurisdiction)in o.a.PRIVACY.JURISDICTIONS&&o.a.PRIVACY.JURISDICTIONS[n];return new y(!1===n,m.JURISDICTION,v.NONE)}},{key:"setStoredPrivacy",value:function(e){try{Object(r.s)(e)?(this.storedPrivacyData=e,this.localStorage.setItemWithExpiration(this.storageConfig.PRIVACY,JSON.stringify(e))):Object(r.u)(this.invocationId,"cmpApi: Cannot store privacy data if it is not an object",e)}catch(e){Object(r.u)(this.invocationId,"cmpApi: Error while storing privacy data",e)}}}],[{key:"buildCmpSurrogate",value:function(e,t){return function(n,i,o){var a=Math.random()+"",s=h[e],c={},u={};u[s.objKeys[0]]=n,u[s.objKeys[1]]=i,u.callId=a,c[s.objName]=u,u=function e(t){(t=Object(r.g)(t,"data.".concat(s.returnObjName)))&&t.callId===a&&(window.removeEventListener("message",e),o(t.returnValue,t.success))},window.addEventListener("message",u,!1),t.postMessage(c,"*")}}},{key:"parseUspData",value:function(e){if(Object(r.s)(e)&&Object(r.t)(e.uspString))return{api:v.USP_V1,hasCcpaString:!0,ccpaString:e.uspString};Object(r.u)(this.invocationId,"cmpApi: No or malformed USP data. Using defaults for CCPA.")}},{key:"parseTcfData",value:function(t,n){var i,o;if(1===n)i=e.isValidV1ConsentObject,o=e.normalizeV1Data;else{if(2!==n)return void Object(r.u)(this.invocationId,"cmpApi: No or malformed CMP data. Using defaults for GDPR.");i=e.isValidV2ConsentObject,o=e.normalizeV2Data}if(i(t))return o(t);Object(r.u)(this.invocationId,"cmpApi: Invalid CMP data. Using defaults for GDPR.",t)}},{key:"isValidV1ConsentObject",value:function(e){var t=Object(r.g)(e,"getConsentData.gdprApplies");return!!Object(r.l)(t)&&(!1===t||Object(r.t)(e.getConsentData.consentData)&&Object(r.s)(e.getVendorConsents)&&1<Object.keys(e.getVendorConsents).length)}},{key:"isValidV2ConsentObject",value:function(e){var t=e&&e.gdprApplies;e=e&&e.tcString;return!1===t||Object(r.t)(e)}},{key:"normalizeV1Data",value:function(e){return{consentString:e.getConsentData.consentData,localStoragePurposeConsent:Object(r.g)(e,"getVendorConsents.purposeConsents.1"),gdprApplies:e.getConsentData.gdprApplies,api:v.TCF_V1}}},{key:"normalizeV2Data",value:function(e){var t=Object(r.g)(e,"purpose.consents.1");return Object(r.l)(t)||(t=Object(i.a)(e.tcString,1)),{consentString:e.tcString,localStoragePurposeConsent:t,gdprApplies:e.gdprApplies,api:v.TCF_V2}}},{key:"findTCF",value:function(){for(var e,t,n=0,r=window;!e;){try{if("function"==typeof r.__tcfapi||"function"==typeof r.__cmp){t="function"==typeof r.__tcfapi?(n=2,r.__tcfapi):(n=1,r.__cmp),e=r;break}}catch(e){}try{if(r.frames.__tcfapiLocator){n=2,e=r;break}}catch(e){}try{if(r.frames.__cmpLocator){n=1,e=r;break}}catch(e){}if(r===window.top)break;r=r.parent}return{cmpVersion:n,cmpFrame:e,cmpFunction:t}}},{key:"findUsp",value:function(){for(var e,t,n=window;!e;){try{if("function"==typeof n.__uspapi){t=n.__uspapi,e=n;break}}catch(e){}try{if(n.frames.__uspapiLocator){e=n;break}}catch(e){}if(n===window.top)break;n=n.parent}return{uspapiFrame:e,uspapiFunction:t}}}]),e}()},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function o(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return e=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==r(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===r(e)?e:String(e)}n.d(t,"a",(function(){return c}));var s="_exp",c=function(){function e(t){var n=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"available",!1),o(this,"win",void 0),o(this,"writingEnabled",void 0),this.win=t,this.writingEnabled=n,n="__id5test";try{this.writingEnabled&&this.win.localStorage.setItem(n,n),this.win.localStorage.removeItem(n),this.available=!0}catch(t){}}var t,n;return t=e,(n=[{key:"isAvailable",value:function(){return this.available}},{key:"getItem",value:function(e){if(this.available)return this.win.localStorage.getItem(e)}},{key:"setItem",value:function(e,t){this.available&&this.writingEnabled&&this.win.localStorage.setItem(e,t)}},{key:"removeItem",value:function(e){this.available&&this.win.localStorage.removeItem(e)}},{key:"getItemWithExpiration",value:function(e){var t=e.name;return!(e=this.getItem(t+s))||new Date(e).getTime()-Date.now()<=0?(this.removeItemWithExpiration({name:t}),null):this.getItem(t)}},{key:"setItemWithExpiration",value:function(e,t){var n=e.name;e=e.expiresDays,e=Date.now()+864e5*e,e=new Date(e).toUTCString();this.setItem(n+s,e),this.setItem(n,t)}},{key:"removeItemWithExpiration",value:function(e){e=e.name,this.removeItem(e),this.removeItem(e+s)}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";var r=n(12);n.d(t,"a",(function(){return r}));var i=n(3);n.d(t,"b",(function(){return i.a}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));t=n(1);var r=n.n(t),i=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function s(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==o(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===o(e)?e:String(e)}n(5);var u=function(){function e(t,n,o,a,c){var u=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"isEnabled",void 0),s(this,"invocationId",void 0),s(this,"localStorage",void 0),s(this,"storageConfig",void 0),s(this,"_windowObj",void 0),s(this,"_handler",void 0),s(this,"_hasLiveIntentId",!1),s(this,"_liveIntentId",void 0),s(this,"_liveIntentIdTimestamp",void 0);var l=this;this._windowObj=t,this.isEnabled=n,this.invocationId=o,this.localStorage=a,this.storageConfig=c,n&&(this._checkLocalStorage(),Object(i.v)(this.invocationId,"Starting polling detection of LiveIntent API"),this._handler=setInterval((function(){Object(i.g)(u._windowObj,"liQ.ready")&&(Object(i.v)(u.invocationId,"Stopping polling detection of LiveIntent API: found"),clearInterval(l._handler),l._onDetected())}),r.a.LIVE_INTENT_POLL_INTERVAL_MS))}var t,n;return t=e,(n=[{key:"_checkLocalStorage",value:function(){var e;this.localStorage.isAvailable()&&(e=this.localStorage.getItemWithExpiration(this.storageConfig.LIVE_INTENT),e=Object(i.t)(e)?JSON.parse(e):void 0,Object(i.s)(e)&&(Object(i.v)(this.invocationId,"Retrieved LiveIntent ID from local storage"),this._setLiveIntentId(e)))}},{key:"_onDetected",value:function(){var e=this;Object(i.v)(this.invocationId,"Detected LiveIntent API on the page! Requesting their ID.");var t=Object(i.g)(this._windowObj,"liQ.resolve");if(Object(i.o)(t))try{t((function(t){Object(i.v)(e.invocationId,"Received LiveIntent API `resolve` lookup response",t),t.unifiedId&&e._setLiveIntentIdFromResponse(t.unifiedId,Date.now())}))}catch(t){Object(i.u)("Error caught while calling resolve() on LiveIntent API",t)}}},{key:"_setLiveIntentIdFromResponse",value:function(e,t){t={liveIntentId:e,timestamp:t},this.localStorage.setItemWithExpiration(this.storageConfig.LIVE_INTENT,JSON.stringify(t)),this._setLiveIntentId(t)}},{key:"_setLiveIntentId",value:function(e){Object(i.v)(self.invocationId,"Received LiveIntent ID",e),this._liveIntentId=e.liveIntentId,this._liveIntentIdTimestamp=e.timestamp,this._hasLiveIntentId=!0}},{key:"getLiveIntentId",value:function(){return this.isEnabled?this._liveIntentId:void 0}},{key:"hasLiveIntentId",value:function(){return this.isEnabled&&this._hasLiveIntentId}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";n.d(t,"d",(function(){return v})),n.d(t,"c",(function(){return m})),n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return g}));var r=n(9);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&function(e,t){(Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);return function(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=s(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return e=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==i(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===i(e)?e:String(e)}var f=Object.freeze({TIMER:"TIMER",SUMMARY:"SUMMARY",COUNTER:"COUNTER"}),h=function(){function e(t,n,i){c(this,e),d(this,"name",void 0),d(this,"tags",void 0),d(this,"values",void 0),this.name=t,this.tags=r.a.from(n),this.type=i,this.values=[]}return l(e,[{key:"reset",value:function(){this.values=[]}}]),e}(),v=function(){o(t,h);var e=a(t);function t(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return c(this,t),e.call(this,n,r,f.TIMER)}return l(t,[{key:"startMeasurement",value:function(){try{return new m(this)}catch(e){return}}},{key:"record",value:function(e){try{this.values.push({value:e,timestamp:Date.now()})}catch(e){}}},{key:"recordNow",value:function(){try{var e;this.record(0|(null===(e=performance)||void 0===e?void 0:e.now()))}catch(e){}}}]),t}(),m=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;c(this,e),this.timer=t,this.startTime=performance.now()}return l(e,[{key:"record",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;try{var t=performance.now()-this.startTime|0,n=e||this.timer;return n&&n.record(t),t}catch(e){return}}}]),e}(),y=function(){o(t,h);var e=a(t);function t(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return c(this,t),e.call(this,n,r,f.COUNTER)}return l(t,[{key:"inc",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;try{0===this.values.length?this.values.push({value:e,timestamp:Date.now()}):(this.values[0].value+=e,this.values[0].timestamp=Date.now())}catch(e){}}}]),t}(),g=function(){o(t,h);var e=a(t);function t(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return c(this,t),e.call(this,n,r,f.SUMMARY)}return l(t,[{key:"record",value:function(e){try{this.values.push({value:e,timestamp:Date.now()})}catch(e){}}}]),t}()},function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i=Object.freeze({});t.a={EMPTY:i,from:function(e){return e?e instanceof Map?Object.fromEntries(e):e:i},toString:function(e){return Array.from(Object.entries(e),(function(e){e=(t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2))[0];var t=t[1];return"".concat(e,"=").concat(t)})).sort().toString()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n=n(11),window.ID5||(window.ID5=n.a)},function(e,t,n){"use strict";var r=n(0),i=n(16),o=n(17),a=n(4),s=n(19),c=n(20),u=n(5),l=n(21),d=n(7),p=n(22),f=n(30),h=n(6);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function b(e,t,n){return(t=E(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){return e=function(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==v(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===v(e)?e:String(e)}var _="https://id5-sync.com";n=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"loaded",!1),b(this,"_isUsingCdn",!1),b(this,"_referer",!1),b(this,"_version",c.a),b(this,"versions",{}),b(this,"invocationId",0),this.loaded=!0,this._isUsingCdn=!!(document&&document.currentScript&&document.currentScript.src&&0===document.currentScript.src.indexOf("https://cdn.id5-sync.com")),this._referer=Object(i.a)(),this.versions[c.a]=!0}var t,n;return t=e,(n=[{key:"debug",get:function(){return Object(r.p)()},set:function(e){Object(r.z)(e)}},{key:"init",value:function(e){var t=this.invocationId;this.invocationId+=1;try{Object(r.v)(t,"ID5 API version ".concat(this._version,". Invoking init()"),e);var n=new l.a(t,e),i=n.getOptions(),c=this._configureDiagnostics(i);c&&(c.loadDelayTimer().recordNow(),c.invocationCountSummary().record(this.invocationId));var p=new r.a(this.invocationId),f=this._registerIntegration(n,c,p),h=new u.a(window.top,!i.applyCreativeRestrictions),v=new d.a(window,!i.disableLiveIntentIntegration,t,h,n.storageConfig),m=new a.b(t,h,n.storageConfig),y=new o.a(t,(function(){return m.localStorageGrant(i.allowLocalStorageWithoutConsentApi,i.debugBypassConsent)}),h,n.storageConfig),g=new s.a(t,n,y,m,v,c);return this.getId(g,!1),Object(r.v)(t,"ID5 initialized for partner ".concat(i.partnerId," with referer ").concat(this._referer.referer," and options"),e),g._integrationInstance=f,g}catch(e){Object(r.u)(t,"Exception caught during init()",e)}}},{key:"refreshId",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(!Object(r.l)(t))throw new Error("Invalid signature for refreshId(): second parameter must be a boolean");try{Object(r.v)(e.invocationId,"Invoking refreshId()",arguments),e.startRefresh(t),e.updateOptions(n),e.consentManagement.resetConsentData(),this.getId(e,t)}catch(t){Object(r.u)(e.invocationId,"Exception caught from refreshId()",t)}return e}},{key:"getId",value:function(e){var t=this,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];Object(r.m)(window.navigator.userAgentData)&&!e.getOptions().disableUaHints?this.gatherUaHints().then((function(i){return t.getIdWithUaHints(e,Object(r.h)(i),n)})).catch((function(i){Object(r.u)("Error while calling navigator.userAgentData.getHighEntropyValues()",i),t.getIdWithUaHints(e,void 0,n)})):this.getIdWithUaHints(e,void 0,n)}},{key:"getIdWithUaHints",value:function(e,t,n){var i,o,a,s=this,c=e.getOptions(),u=0,l=!1,d=!1,f=!1,h=!1,v=c.refreshInSeconds,m=e.localStorageGrant();m.isDefinitivelyAllowed()&&(Object(r.v)(e.invocationId,"Using local storage for cached ID",m),i=e.clientStore.getResponse(),o=e.clientStore.getDateTime(),Object(r.r)(null==i||null===(a=i.cache_control)||void 0===a?void 0:a.max_age_sec)&&(v=i.cache_control.max_age_sec),l=o<=0||Date.now()-o>1e3*v,u=e.clientStore.getNb(c.partnerId),d=!e.clientStore.isStoredPdUpToDate(c.partnerId,c.pd),f=!e.clientStore.storedSegmentsMatchesSegments(c.partnerId,c.segments)),i||(Object(r.v)(e.invocationId,"No cached ID found"),i=e.clientStore.getResponseFromLegacyCookie(),l=!0),i&&i.universal_uid&&!d&&!f?(Object(r.v)(e.invocationId,"ID5 User ID available from cache:",{storedResponse:i,storedDateTime:o,refreshNeeded:l}),o<=0||12096e5<Date.now()-o||(e.setUserId(i,!0),u=e.clientStore.incNb(c.partnerId,u),h=!0)):i&&i.universal_uid&&d?Object(r.v)(e.invocationId,"PD value has changed, so ignoring User ID from cache"):i&&i.universal_uid&&f?Object(r.v)(e.invocationId,"Segments have changed, so ignoring User ID from cache"):i&&!i.universal_uid?Object(r.u)(e.invocationId,"Invalid stored response: ",i):Object(r.v)(e.invocationId,"No ID5 User ID available from cache");var y=null===(o=e._metrics)||void 0===o?void 0:o.consentRequestTimer(c.debugBypassConsent?"bypass":c.cmpApi).startMeasurement();e.consentManagement.requestConsent(c.debugBypassConsent,c.cmpApi,c.consentData,(function(o){y&&y.record();var a,m,g,A=e.localStorageGrant();Object(r.v)(e.invocationId,"Local storage grant",A),A.allowed?(i=e.clientStore.getResponse()||e.clientStore.getResponseFromLegacyCookie(),a=!e.clientStore.storedConsentDataMatchesConsentData(o),e.clientStore.putHashedConsentData(o),e.clientStore.isStoredPdUpToDate(c.partnerId,c.pd)||e.clientStore.putHashedPd(c.partnerId,c.pd),e.clientStore.putHashedSegments(c.partnerId,c.segments),((A=!i||!i.universal_uid||!i.signature)||l||a||d||f||n)&&(Object(r.v)(e.invocationId,"Decided to fetch a fresh ID5 ID",{missingStoredData:A,refreshInSecondsHasElapsed:l,consentHasChanged:a,pdHasChanged:d,segmentsHaveChanged:f,forceFetch:n}),m=null===(a=e._metrics)||void 0===a?void 0:a.extensionsCallTimer().startMeasurement(),g=s.gatherData(c,e,u,o,i,t,v,e.getProvidedOptions()),p.a.gather(e.invocationId).then((function(t){m&&m.record(),g.extensions=t,s.fetchFreshID5ID(g,c,o,e,n,h)})))):Object(r.v)(e.invocationId,"No legal basis to use ID5",o)}))}},{key:"gatherData",value:function(e,t,n,i,o,a,s,c){var u={partner:e.partnerId,v:this._version,o:"api",tml:this._referer.topmostLocation,ref:this._referer.ref,cu:this._referer.canonicalUrl,u:this._referer.stack[0]||window.location.href,top:this._referer.reachedTop?1:0,localStorage:t.clientStore.isLocalStorageAvailable()?1:0,nbPage:n,id5cdn:this._isUsingCdn,ua:window.navigator.userAgent,att:e.att};n=i.gdprApplies;return Object(r.m)(n)&&(u.gdpr=n?1:0),n=i.consentString,Object(r.m)(n)&&(u.gdpr_consent=n),Object(r.m)(i.allowedVendors)&&(u.allowed_vendors=i.allowedVendors),o=o&&o.signature?o.signature:void 0,Object(r.m)(o)&&(u.s=o),Object(r.m)(a)&&(u.ua_hints=a),i.hasCcpaString&&(u.us_privacy=i.ccpaString),t.liveIntentApi.hasLiveIntentId()&&(u.li=t.liveIntentApi.getLiveIntentId()),Object(r.x)({pd:"pd",partnerUserId:"puid",provider:"provider",segments:"segments"}).forEach((function(t){t=(n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2))[0];var n=n[1];Object(r.m)(e[t])&&(u[n]=e[t])})),!0===e.abTesting.enabled&&(u.ab_testing={enabled:!0,control_group_pct:t.getOptions().abTesting.controlGroupPct}),0<t.getInvalidSegments()&&(u._invalid_segments=t.getInvalidSegments()),Object(r.q)()&&(u._trace=!0),u.provided_options={refresh_in_seconds:c.refreshInSeconds},u.used_refresh_in_seconds=s,u}},{key:"fetchFreshID5ID",value:function(e,t,n,i,o,a){var s="".concat(_,"/g/v2/").concat(t.partnerId,".json"),c=Object(f.d)();Object(r.v)(i.invocationId,"Fetching ID5 ID (forceFetch:".concat(o,") from:"),s,e),Object(r.b)(s,{success:this.handleSuccessfulFetchResponse(i,t,a,n,c),error:function(e){Object(r.u)(i.invocationId,"Error during AJAX request to ID5 server",e),c&&c.record(null===(e=i._metrics)||void 0===e?void 0:e.fetchFailureCallTimer())}},JSON.stringify(e),{method:"POST",withCredentials:!0})}},{key:"handleSuccessfulFetchResponse",value:function(e,t,n,i,o){var a=this;return function(s){o&&o.record(null===(c=e._metrics)||void 0===c?void 0:c.fetchSuccessfulCallTimer());var c=a.validateResponseIsCorrectJson(s,e,"fetch");if(c)if(Object(r.t)(c.universal_uid)){Object(r.v)(e.invocationId,"Valid json response from ID5 received",c);try{e.setUserId(c,!1),e.consentManagement.setStoredPrivacy(c.privacy);var u,l,d=e.localStorageGrant();d.isDefinitivelyAllowed()?(Object(r.v)(e.invocationId,"Storing ID in cache"),e.clientStore.putResponse(s),e.clientStore.setDateTime((new Date).toUTCString()),e.clientStore.setNb(t.partnerId,n?0:1)):(Object(r.v)(e.invocationId,"Cannot use local storage to cache ID",d),e.clientStore.clearAll(t.partnerId)),e.clientStore.removeLegacyCookies(t.partnerId),!0===c.cascade_needed&&d.isDefinitivelyAllowed()&&0<=t.maxCascades&&!t.applyCreativeRestrictions&&(u=t.partnerUserId&&0<t.partnerUserId.length,l="".concat(_,"/").concat(u?"s":"i","/").concat(t.partnerId,"/").concat(t.maxCascades,".gif?id5id=").concat(e._userId,"&o=api&").concat(u?"puid="+t.partnerUserId+"&":"","gdpr_consent=").concat(i.consentString,"&gdpr=").concat(i.gdprApplies),Object(r.v)(e.invocationId,"Opportunities to cascade available",l),Object(r.f)(l))}catch(s){Object(r.u)(e.invocationId,"Error during processing of valid ID5 server response",c,s)}}else Object(r.u)(e.invocationId,"Server response failed to validate",c)}}},{key:"validateResponseIsCorrectJson",value:function(e,t,n){if(!e||!Object(r.t)(e)||e.length<1)Object(r.u)(t.invocationId,"Empty ".concat(n,' response from ID5 servers: "').concat(e,'"'));else try{return JSON.parse(e)}catch(i){Object(r.u)(t.invocationId,"Cannot parse the JSON server ".concat(n," response"),e)}return null}},{key:"gatherUaHints",value:function(){return window.navigator.userAgentData.getHighEntropyValues(["architecture","fullVersionList","model","platformVersion"])}},{key:"_configureDiagnostics",value:function(e){try{var t,n,i,o,a=new f.a("api",c.a);return a.addCommonTags(y(y({},Object(f.c)(e.partnerId)),{},{tml:this._referer.topmostLocation})),null!==(t=e.diagnostics)&&void 0!==t&&t.publishingDisabled||(o=Object(f.b)(e.diagnostics.publishingSampleRatio),null!==(n=e.diagnostics)&&void 0!==n&&n.publishAfterLoadInMsec&&0<e.diagnostics.publishAfterLoadInMsec&&a.schedulePublishAfterMsec(e.diagnostics.publishAfterLoadInMsec,o),null!==(i=e.diagnostics)&&void 0!==i&&i.publishBeforeWindowUnload&&a.schedulePublishBeforeUnload(o)),a}catch(e){return void Object(r.u)(this.invocationId,"Failed to configure diagnostics",e)}}},{key:"_registerIntegration",value:function(e,t,n){try{var i=new h.a.Instance(window,"api",c.a,e,t,n);return i.register(),i}catch(e){Object(r.u)("Failed to register integration instance",e)}}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}());t.a=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Role",(function(){return f})),n.d(t,"Event",(function(){return h})),n.d(t,"Properties",(function(){return m})),n.d(t,"Instance",(function(){return A})),t.electLeader=b;var r=n(13),i=n(14),o=n(15),a=n(3);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function u(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return e=function(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==s(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===s(e)?e:String(e)}var f=Object.freeze({UNKNOWN:"unknown",LEADER:"leader",FOLLOWER:"follower"}),h=Object.freeze({ID5_MESSAGE_RECEIVED:"message",ID5_INSTANCE_JOINED:"instance-joined",ID5_LEADER_ELECTED:"leader-elected"}),v=Object.freeze(Object.values(h)),m=function e(t,n,r,i,o,a){l(this,e),d(this,"id",void 0),d(this,"version",void 0),d(this,"source",void 0),d(this,"sourceVersion",void 0),d(this,"sourceConfiguration",void 0),d(this,"href",void 0),d(this,"domain",void 0),this.id=t,this.version=n,this.source=r,this.sourceVersion=i,this.sourceConfiguration=o,this.href=null==a?void 0:a.href,this.domain=null==a?void 0:a.hostname},y=function(){function e(t){l(this,e),d(this,"_knownValues",[]),d(this,"_counter",void 0),this._counter=t}return u(e,[{key:"add",value:function(e){e&&-1===this._knownValues.indexOf(e)&&(this._counter.inc(),this._knownValues.push(e))}}]),e}(),g=function(){function e(t,n){l(this,e),d(this,"_instancesCounter",void 0),d(this,"_domainsCounter",void 0),d(this,"_windowsCounter",void 0),d(this,"_partnersCounter",void 0);var r=n.id;this._instancesCounter=t.instanceCounter(n.id),this._windowsCounter=new y(t.instanceUniqWindowsCounter(r)),this._partnersCounter=new y(t.instanceUniqPartnersCounter(r)),this._domainsCounter=new y(t.instanceUniqueDomainsCounter(r)),this.addInstance(n)}return u(e,[{key:"addInstance",value:function(e){var t,n;this._instancesCounter.inc(),this._partnersCounter.add(null==e||null===(t=e.sourceConfiguration)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.partnerId),this._domainsCounter.add(null==e?void 0:e.domain),this._windowsCounter.add(null==e?void 0:e.href)}}]),e}(),A=function(){function e(t,n,r,s,c){var u=5<arguments.length&&void 0!==arguments[5]?arguments[5]:a.c;l(this,e),d(this,"properties",void 0),d(this,"_messenger",void 0),d(this,"_knownInstances",new Map),d(this,"role",void 0),d(this,"_leader",void 0),d(this,"_metrics",void 0),d(this,"_logger",void 0),d(this,"_callbacks",new Map),d(this,"_instanceCounters",void 0);var p=i.a();this.properties=new m(p,o.a,n,r,s,t.location),this.role=f.UNKNOWN,this._metrics=c,this._instanceCounters=new g(c,this.properties),this._loadTime=performance.now(),this._logger=void 0!==u?new a.b("Instance(id=".concat(p,")"),u):a.c,this._logger.debug("Instance created"),this._window=t}return u(e,[{key:"register",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:3e3,t=this,n=t._window;this._messenger=new r.a(t.properties.id,n,t._logger),this._messenger.onMessageReceived((function(e){var n=performance.now()-e.timestamp|0;t._metrics.instanceMsgDeliveryTimer().record(n),t._logger.debug("Message received",e),e.type===E.TYPE&&(n=e.payload,t._addInstance(n.instance),e.dst===r.b&&t._messenger.sendResponseMessage(e,new E(t.properties),E.TYPE)),t._doFireEvent(h.ID5_MESSAGE_RECEIVED,e)})),setTimeout((function(){var e=Array.from(t._knownInstances.values());e.push(t.properties),e=b(e),t._leader=e,t.role=e.id===t.properties.id?f.LEADER:f.FOLLOWER,t._doFireEvent(h.ID5_LEADER_ELECTED,t.role,t._leader),t._logger.debug("Leader elected",e.id,"my role",t.role)}),e),t._messenger.broadcastMessage(new E(t.properties),E.TYPE),void 0===n.__id5_instances&&(n.__id5_instances=[]),n.__id5_instances.push(this)}},{key:"deregister",value:function(){var e=this._window.__id5_instances;void 0!==e&&e.splice(e.indexOf(this),1),this._messenger&&this._messenger.deregister()}},{key:"getRole",value:function(){return this.role}},{key:"on",value:function(e,t){var n;return void 0!==e&&v.includes(e)&&((n=this._callbacks.get(e))?n.push(t):this._callbacks.set(e,[t])),this}},{key:"_addInstance",value:function(e){this._knownInstances.get(e.id)||(this._knownInstances.set(e.id,e),this._instanceCounters.addInstance(e),this._metrics.instanceJoinDelayTimer().record(performance.now()-this._loadTime|0),void 0!==this._leader&&this._metrics.instanceLateJoinCounter(this.properties.id).inc(),this._logger.debug("Instance joined",e.id),this._doFireEvent(h.ID5_INSTANCE_JOINED,e))}},{key:"_doFireEvent",value:function(e){for(var t=this,n=arguments.length,r=new Array(1<n?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=this._callbacks.get(e);o&&o.forEach((function(n){try{n.apply(void 0,r)}catch(n){t._logger.error("Failed to call event listener",e,n)}}))}}]),e}();function b(e){if(e&&0!==e.length)return e.sort((function(e,t){var n=-i.b(e.version,t.version);return 0===n&&0===(n=0===(n=e.source.localeCompare(t.source))?-i.b(e.sourceVersion,t.sourceVersion):n)?e.id.localeCompare(t.id):n}))[0]}var E=function e(t){l(this,e),d(this,"instance",void 0),this.instance=t};d(E,"TYPE","HelloMessage")},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return f}));var r=n(3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return e=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==i(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===i(e)?e:String(e)}function l(e,t,n,r,i,o){var a=6<arguments.length&&void 0!==arguments[6]?arguments[6]:void 0;s(this,l),c(this,"_isId5Message",!0),c(this,"id",void 0),c(this,"timestamp",void 0),c(this,"type",void 0),c(this,"src",void 0),c(this,"dst",void 0),c(this,"request",void 0),c(this,"payload",void 0),this.id=r,this.timestamp=e,this.src=t,this.dst=n,this.type=o,this.request=a,this.payload=i}var d=void 0,p=function(){function e(t){s(this,e),c(this,"_senderId",void 0),c(this,"_messageSeqNb",0),this._senderId=t,this._messageSeqNb=0}return a(e,[{key:"createBroadcastMessage",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:e.constructor.name;return new l(performance.now(),this._senderId,d,++this._messageSeqNb,e,t||e.constructor.name)}},{key:"createResponse",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t.constructor.name;return new l(performance.now(),this._senderId,e.src,++this._messageSeqNb,t,n||t.constructor.name,e)}},{key:"createUnicastMessage",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t.constructor.name;return new l(performance.now(),this._senderId,e,++this._messageSeqNb,t,n||t.constructor.name)}}]),e}(),f=function(){function e(t,n){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:r.c;s(this,e),c(this,"_id",void 0),c(this,"_messageFactory",void 0),c(this,"_log",void 0),c(this,"_onMessageCallBackFunction",void 0),this._id=t,this._messageFactory=new p(this._id),this._log=i,this._window=n,this._register()}return a(e,[{key:"_register",value:function(){var e=this;e._abortController="undefined"!=typeof AbortController?new AbortController:void 0;var t=null===(t=e._abortController)||void 0===t?void 0:t.signal;e._window.addEventListener("message",(function(t){var n=t.data;void 0!==n&&n._isId5Message&&(t.data.src!==e._id?void 0===t.data.dst||t.data.dst===e._id?e._onMessageCallBackFunction&&"function"==typeof e._onMessageCallBackFunction&&e._onMessageCallBackFunction(n):e._log.debug("Ignore msg not to me"):e._log.debug("Ignore loopback msg"))}),{capture:!1,signal:t})}},{key:"deregister",value:function(){this._abortController&&this._abortController.abort()}},{key:"onMessageReceived",value:function(e){this._onMessageCallBackFunction=e}},{key:"broadcastMessage",value:function(e,t){this._log.debug("Broadcasting message",t,e),this._postMessage(this._messageFactory.createBroadcastMessage(e,t))}},{key:"sendResponseMessage",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t.constructor.name;this._log.debug("Sending response message",e,n,t),this._postMessage(this._messageFactory.createResponse(e,t,n))}},{key:"unicastMessage",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:t.constructor.name;this._log.debug("Sending response to",e,n,t),this._postMessage(this._messageFactory.createUnicastMessage(e,t,n))}},{key:"_postMessage",value:function(e){var t=this;!function n(r){try{!function(n){try{n.postMessage(e,"*")}catch(n){t._log.error("Could not post message to window",n)}}(r);var i=r.frames;if(i)for(var o=0;o<i.length;o++)n(i[o])}catch(n){t._log.error("Could not broadcast message",n)}}(t._window.top)}}]),e}()},function(e,t,n){"use strict";(function(e){t.a=function(){return void 0!==e&&void 0!==e.crypto&&void 0!==e.crypto.randomUUID?e.crypto.randomUUID():"".concat(1e6*Math.random()|0)},t.b=function(e,t){var n="^\\d+(\\.\\d+(\\.\\d+){0,1}){0,1}$";if(e.match(n)&&t.match(n)){var r=e.split("."),i=t.split(".");n=function(e){return parseInt(e)||0},e=function(e,t){return 0==(t=e-t)?0:t<0?-1:1};return 0!==(t=e(n(r[0]),n(i[0])))||0!==(t=e(n(r[1]),n(i[1])))?t:e(n(r[2]),n(i[2]))}}}).call(t,n(2))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="1.0.1"},function(e,t,n){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return o}));var i,o=(i=window,function(){try{var e,t,n=a(),r=n.length-1,o=null!==n[r].location||0<r&&null!==n[r-1].referrer,s=function(e){for(var t,n=[],r=null,i=null,o=null,a=null,s=e.length-1;0<=s;s--){try{r=e[s].location}catch(e){}if(r)n.push(r),a=a||r;else if(0!==s){t=e[s-1];try{i=t.referrer,o=t.ancestor}catch(e){}i?(n.push(i),a=a||i):o?(n.push(o),a=a||o):n.push(null)}else n.push(null)}return{stack:n,detectedRefererUrl:a}}(n);n[n.length-1].canonicalUrl&&(e=n[n.length-1].canonicalUrl);try{t=i.top.document.referrer}catch(e){}return{topmostLocation:s.detectedRefererUrl,ref:t||null,reachedTop:o,numIframes:r,stack:s.stack,canonicalUrl:e}}catch(e){}});function a(){var e=function(){var e,t=[];do{try{e=e?e.parent:i;try{var n=e===i.top,o={referrer:e.document.referrer||null,location:e.location.href||null,isTop:n};n&&(o=r(o,{canonicalUrl:function(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}(e.document)})),t.push(o)}catch(n){t.push({referrer:null,location:null,isTop:e===i.top})}}catch(n){return t.push({referrer:null,location:null,isTop:!1}),t}}while(e!==i.top);return t}(),t=function(){try{return i.location.ancestorOrigins?i.location.ancestorOrigins:void 0}catch(e){}}();if(t)for(var n=0,o=t.length;n<o;n++)e[n].ancestor=t[n];return e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(0),i=(t=n(1),n.n(t)),o=n(4);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function c(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return e=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==a(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===a(e)?e:String(e)}var l=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),c(this,"invocationId",void 0),c(this,"localStorageGrantChecker",void 0),c(this,"localStorage",void 0),this.invocationId=t,this.localStorageGrantChecker=n,this.localStorage=r,this.storageConfig=i}var t,n,a;return t=e,a=[{key:"makeStoredHash",value:function(e){return Object(r.d)("string"==typeof e?e:"")}},{key:"storedDataMatchesCurrentData",value:function(e,t){return null==e||e===t}}],(n=[{key:"get",value:function(e){try{var t=this.localStorageGrant();if(t.isDefinitivelyAllowed()){var n=this.localStorage.getItemWithExpiration(e);return Object(r.v)(this.invocationId,"Local storage get key=".concat(e.name," value=").concat(n)),n}Object(r.w)(this.invocationId,"clientStore.get() has been called without definitive grant",t)}catch(e){Object(r.u)(this.invocationId,e)}}},{key:"clear",value:function(e){try{this.localStorage.removeItemWithExpiration(e)}catch(e){Object(r.u)(this.invocationId,e)}}},{key:"put",value:function(e,t){try{var n=this.localStorageGrant();n.isDefinitivelyAllowed()?(Object(r.v)(this.invocationId,"Local storage put key=".concat(e.name," value=").concat(t)),this.localStorage.setItemWithExpiration(e,t)):Object(r.w)(this.invocationId,"clientStore.put() has been called without definitive grant",n)}catch(e){Object(r.u)(this.invocationId,e)}}},{key:"localStorageGrant",value:function(){return this.localStorageGrantChecker()}},{key:"isLocalStorageAvailable",value:function(){return this.localStorage.isAvailable()}},{key:"getResponseFromLegacyCookie",value:function(){var e;return i.a.LEGACY_COOKIE_NAMES.forEach((function(t){Object(r.i)(t)&&(e=Object(r.i)(t))})),e?JSON.parse(e):null}},{key:"getResponse",value:function(){var e=this.get(this.storageConfig.ID5);return e&&JSON.parse(decodeURIComponent(e))}},{key:"clearResponse",value:function(){this.clear(this.storageConfig.ID5)}},{key:"putResponse",value:function(e){this.put(this.storageConfig.ID5,encodeURIComponent(e))}},{key:"getHashedConsentData",value:function(){return this.get(this.storageConfig.CONSENT_DATA)}},{key:"clearHashedConsentData",value:function(){this.clear(this.storageConfig.CONSENT_DATA)}},{key:"putHashedConsentData",value:function(e){e!==new o.a&&this.put(this.storageConfig.CONSENT_DATA,e.hashCode())}},{key:"getHashedPd",value:function(e){return this.get(this.pdCacheConfig(e))}},{key:"isStoredPdUpToDate",value:function(t,n){var i=this.getHashedPd(t),o=Object(r.n)(n)&&!Object(r.n)(i);t=Object(r.n)(i)&&Object(r.n)(n);return o||t||i===e.makeStoredHash(n)}},{key:"clearHashedPd",value:function(e){this.clear(this.pdCacheConfig(e))}},{key:"putHashedPd",value:function(t,n){this.put(this.pdCacheConfig(t),e.makeStoredHash(n))}},{key:"getHashedSegments",value:function(e){return this.get(this.segmentsCacheConfig(e))}},{key:"putHashedSegments",value:function(t,n){this.put(this.segmentsCacheConfig(t),e.makeStoredHash(JSON.stringify(n)))}},{key:"storedSegmentsMatchesSegments",value:function(t,n){return e.storedDataMatchesCurrentData(this.getHashedSegments(t),e.makeStoredHash(JSON.stringify(n)))}},{key:"clearHashedSegments",value:function(e){this.clear(this.segmentsCacheConfig(e))}},{key:"getDateTime",value:function(){return new Date(this.get(this.storageConfig.LAST)).getTime()}},{key:"clearDateTime",value:function(){this.clear(this.storageConfig.LAST)}},{key:"setDateTime",value:function(e){this.put(this.storageConfig.LAST,e)}},{key:"getNb",value:function(e){return(e=this.get(this.nbCacheConfig(e)))?parseInt(e):0}},{key:"clearNb",value:function(e){this.clear(this.nbCacheConfig(e))}},{key:"setNb",value:function(e,t){this.put(this.nbCacheConfig(e),t)}},{key:"incNb",value:function(e,t){return t=Math.round(t+1),this.setNb(e,t),t}},{key:"pdCacheConfig",value:function(e){return this.storageConfig.PD.withNameSuffixed(e)}},{key:"nbCacheConfig",value:function(e){return this.storageConfig.ID5.withNameSuffixed(e,"nb")}},{key:"segmentsCacheConfig",value:function(e){return this.storageConfig.SEGMENTS.withNameSuffixed(e)}},{key:"clearAll",value:function(e){this.clearResponse(),this.clearDateTime(),this.clearNb(e),this.clearHashedPd(e),this.clearHashedSegments(e),this.clearHashedConsentData()}},{key:"removeLegacyCookies",value:function(e){var t=new Date(Date.now()-1e3).toUTCString();i.a.LEGACY_COOKIE_NAMES.forEach((function(n){Object(r.y)("".concat(n),"",t),Object(r.y)("".concat(n,"_nb"),"",t),Object(r.y)("".concat(n,"_").concat(e,"_nb"),"",t),Object(r.y)("".concat(n,"_last"),"",t),Object(r.y)("".concat(n,".cached_pd"),"",t),Object(r.y)("".concat(n,".cached_consent_data"),"",t)}))}},{key:"storedConsentDataMatchesConsentData",value:function(t){return e.storedDataMatchesCurrentData(this.getHashedConsentData(),t.hashCode())}}])&&s(t.prototype,n),a&&s(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";t.a=function(e,t){var n=152+t-1;t=~~(n/i);if(e&&"C"===e.charAt(0)&&!(e.length<=t))return t=e.charAt(t),void 0!==(t=r[t])?0!=(t&1<<i-n%i-1):void 0};var r={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"-":62,_:63,"+":62,"/":63},i=6},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));t=n(1);var r=n.n(t),i=n(0);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n,r=arguments[t];for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function c(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==o(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===o(e)?e:String(e)}n(4),n(7);var l=function(){function e(t,n,r,i,o,a){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),c(this,"_availableCallbackTimerId",void 0),c(this,"_availableCallbackFired",!1),c(this,"_availableCallback",void 0),c(this,"_updateCallback",void 0),c(this,"_refreshCallbackTimerId",void 0),c(this,"_refreshCallbackFired",!1),c(this,"_refreshCallback",void 0),c(this,"_isExposed",void 0),c(this,"_fromCache",void 0),c(this,"_isRefreshing",!1),c(this,"_isRefreshingWithFetch",!1),c(this,"_userId",void 0),c(this,"_ext",void 0),c(this,"_userIdAvailable",!1),c(this,"invocationId",void 0),c(this,"config",void 0),c(this,"clientStore",void 0),c(this,"consentManagement",void 0),c(this,"liveIntentApi",void 0),c(this,"_metrics",void 0),this.invocationId=t,this.config=n,this.clientStore=r,this.consentManagement=i,this.liveIntentApi=o,this._metrics=a}var t,n,o;return t=e,o=[{key:"doFireOnAvailableCallBack",value:function(e){Object(i.v)(e.invocationId,"Id5Status.doFireOnAvailableCallBack"),e._availableCallbackFired=!0,e._availableCallbackTimerId=void 0,e._availableCallback(e)}},{key:"doFireOnUpdateCallBack",value:function(e){Object(i.v)(e.invocationId,"Id5Status.doFireOnUpdateCallBack"),e._updateCallback(e)}},{key:"doFireOnRefreshCallBack",value:function(e){Object(i.v)(e.invocationId,"Id5Status.doFireOnRefreshCallBack"),e._refreshCallbackFired=!0,e._refreshCallbackTimerId=void 0,e._isRefreshing=!1,e._isRefreshingWithFetch=!1,e._refreshCallback(e)}}],(n=[{key:"getOptions",value:function(){return this.config.getOptions()}},{key:"getProvidedOptions",value:function(){return this.config.getProvidedOptions()}},{key:"getInvalidSegments",value:function(){return this.config.getInvalidSegments()}},{key:"updateOptions",value:function(e){return this.config.updOptions(e)}},{key:"startRefresh",value:function(e){this._isRefreshing=!0,this._isRefreshingWithFetch=e}},{key:"setUserId",value:function(t,n){var r=this,o=t.universal_uid;if(this._isExposed=!0,Object(i.s)(t.ab_testing))switch(t.ab_testing.result){case"normal":break;default:case"error":Object(i.u)(this.invocationId,"Id5Status: There was an error with A/B Testing. Make sure controlGroupRatio is a number >= 0 and <= 1");break;case"control":this._isExposed=!1,this.info("User is in control group!")}var a=this._userId!==o||!1===Object(i.e)(this._ext,t.ext);this._userIdAvailable=!0,this._userId=o,this._ext=t.ext,this._fromCache=n,this.info("User id updated, hasChanged: ".concat(a,", fromCache: ").concat(n)),Object(i.o)(this._availableCallback)&&!1===this._availableCallbackFired&&(this._availableCallbackTimerId&&(this.info("Cancelling pending onAvailableCallback watchdog"),clearTimeout(this._availableCallbackTimerId),this._availableCallbackTimerId=void 0),this._availableCallbackTimerId=setTimeout((function(){return e.doFireOnAvailableCallBack(r)}),0)),this._isRefreshing&&Object(i.o)(this._refreshCallback)&&!1===this._refreshCallbackFired&&(!1!==n&&!1!==this._isRefreshingWithFetch||(this._refreshCallbackTimerId&&(this.info("Cancelling pending onRefreshCallback watchdog"),clearTimeout(this._refreshCallbackTimerId),this._refreshCallbackTimerId=void 0),this._refreshCallbackTimerId=setTimeout((function(){return e.doFireOnRefreshCallBack(r)}),0))),a&&Object(i.o)(this._updateCallback)&&setTimeout((function(){return e.doFireOnUpdateCallBack(r)}),0)}},{key:"getUserId",value:function(){return!1===this._isExposed?"0":this._userId}},{key:"getLinkType",value:function(){return!1===this._isExposed?0:this.getExt().linkType}},{key:"getExt",value:function(){var e=!1===this._isExposed?{}:this._ext;return a({abTestingControlGroup:!this.exposeUserId()},e)}},{key:"isFromCache",value:function(){return this._fromCache}},{key:"exposeUserId",value:function(){return this._isExposed}},{key:"getUserIdAsEid",value:function(){return{source:r.a.ID5_EIDS_SOURCE,uids:[{atype:1,id:this.getUserId(),ext:this.getExt()}]}}},{key:"onAvailable",value:function(t,n){if(!Object(i.o)(t))throw new Error("onAvailable expect a function");var r;return Object(i.o)(this._availableCallback)?this.info("onAvailable was already called, ignoring"):(this._availableCallback=t,(r=this)._userIdAvailable?(this.info("User id already available firing callback immediately"),this._availableCallbackTimerId=setTimeout((function(){return e.doFireOnAvailableCallBack(r)}),0)):0<n&&(this._availableCallbackTimerId=setTimeout((function(){return e.doFireOnAvailableCallBack(r)}),n))),this}},{key:"onUpdate",value:function(t){if(!Object(i.o)(t))throw new Error("onUpdate expect a function");this._updateCallback=t;var n=this;return this._userIdAvailable&&setTimeout((function(){return e.doFireOnUpdateCallBack(n)}),0),this}},{key:"onRefresh",value:function(t,n){if(!Object(i.o)(t))throw new Error("onRefresh expect a function");this._refreshCallbackTimerId&&(clearTimeout(this._refreshCallbackTimerId),this._refreshCallbackTimerId=void 0),this._refreshCallback=t;var r=this;return!0===this._isRefreshing&&!1===this._isRefreshingWithFetch&&this._userIdAvailable?this._refreshCallbackTimerId=setTimeout((function(){return e.doFireOnRefreshCallBack(r)}),0):0<n&&(this._refreshCallbackTimerId=setTimeout((function(){return e.doFireOnRefreshCallBack(r)}),n)),this}},{key:"localStorageGrant",value:function(){return this.clientStore.localStorageGrant()}},{key:"info",value:function(e){Object(i.v)(this.invocationId,"Id5Status: "+e)}}])&&s(t.prototype,n),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r="1.0.36"},function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n(0),i=(t=n(1),n.n(t));function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function s(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function l(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){return e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==o(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===o(e)?e:String(e)}var p=function(){function e(t,n){c(this,e),this.name=t,this.expiresDays=n}return l(e,[{key:"withNameSuffixed",value:function(){for(var t=this.name,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];t+="_".concat(s)}return new e(t,this.expiresDays)}}]),e}(),f=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;function n(e){var n=void 0!==t?Math.max(1,t):e.expiresDays;return new p(e.name,n)}c(this,e);var r=i.a.STORAGE_CONFIG;this.ID5=n(r.ID5),this.LAST=n(r.LAST),this.CONSENT_DATA=n(r.CONSENT_DATA),this.PD=n(r.PD),this.PRIVACY=n(r.PRIVACY),this.SEGMENTS=n(r.SEGMENTS),this.LIVE_INTENT=n(r.LIVE_INTENT)},h=function(){function e(t,n){if(c(this,e),s(this,"invocationId",void 0),s(this,"options",void 0),s(this,"providedOptions",void 0),s(this,"invalidSegments",void 0),this.invocationId=t,this.options={debugBypassConsent:!1,allowLocalStorageWithoutConsentApi:!1,cmpApi:"iab",consentData:{getConsentData:{consentData:void 0,gdprApplies:void 0},getVendorConsents:{}},refreshInSeconds:7200,partnerId:void 0,partnerUserId:void 0,callbackOnAvailable:void 0,callbackOnUpdates:void 0,callbackTimeoutInMs:void 0,pd:void 0,abTesting:{enabled:!1,controlGroupPct:0},provider:void 0,maxCascades:8,applyCreativeRestrictions:!1,segments:void 0,disableUaHints:!1,disableLiveIntentIntegration:!1,storageExpirationDays:void 0,att:void 0,diagnostics:{publishingDisabled:!1,publishAfterLoadInMsec:3e4,publishBeforeWindowUnload:!0,publishingSampleRatio:.01}},this.providedOptions={},!Object(r.r)(n.partnerId)&&!Object(r.t)(n.partnerId))throw new Error("partnerId is required and must be a number or a string");this.invalidSegments=0,this.updOptions(n),this.storageConfig=new f(n.storageExpirationDays)}return l(e,[{key:"getOptions",value:function(){return this.options}},{key:"getProvidedOptions",value:function(){return this.providedOptions}},{key:"getInvalidSegments",value:function(){return this.invalidSegments}},{key:"updOptions",value:function(t){var n,i=this,c=this;Object(r.s)(t)?(this.setPartnerId(t.partnerId),n=function(e,t){i.options[e]=t,i.providedOptions[e]=t},Object.keys(t).forEach((function(u){var l,d,p,f,h,m;"segments"===u?(m=t[u],l=[],Object(r.k)(m)?(m.forEach((function(e,t){return t="segments[".concat(t,"]"),Object(r.k)(e.ids)&&Object(r.c)(e.ids,r.t)?e.ids.length<1?(Object(r.u)(c.invocationId,"Config option ".concat(t,".ids should contain at least one segment ID")),void(c.invalidSegments+=1)):Object(r.t)(e.destination)?void l.push(e):(v(c.invocationId,"".concat(t,".destination"),"String",e.destination),void(c.invalidSegments+=1)):(v(c.invocationId,"".concat(t,".ids"),"Array of String",e.ids),void(c.invalidSegments+=1))})),n(u,l)):v(c.invocationId,u,"Array",m)):"diagnostics"===u?(d=i.options.diagnostics,p=t.diagnostics,Object(r.j)(p,e.configTypes.diagnostics)&&(f=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d),Object.keys(p).forEach((function(e){void 0!==d[e]&&o(d[e])===o(p[e])&&(f[e]=p[e])})),i.options[u]=f),i.providedOptions[u]=t[u]):"partnerId"!==u&&(h=e.configTypes[u],m=t[u],Object(r.j)(m,h)?n(u,m):v(c.invocationId,u,h,m))}))):Object(r.u)(this.invocationId,"Config options must be an object")}},{key:"setPartnerId",value:function(e){var t;if(Object(r.t)(e)){if(t=parseInt(e),isNaN(t)||t<0)throw new Error("partnerId is required and must parse to a positive integer")}else Object(r.r)(e)&&(t=e);if(Object(r.r)(t)){if(Object(r.r)(this.options.partnerId)&&t!==this.options.partnerId)throw new Error("Cannot update config with a different partnerId");this.options.partnerId=t,this.providedOptions.partnerId=e}}}]),e}();function v(e,t,n,i){Object(r.u)(e,"Config option ".concat(t," must be of type ").concat(n," but was ").concat(toString.call(i),". Ignoring..."))}s(h,"configTypes",{debugBypassConsent:"Boolean",allowLocalStorageWithoutConsentApi:"Boolean",cmpApi:"String",consentData:"Object",refreshInSeconds:"Number",partnerUserId:"String",callbackOnAvailable:"Function",callbackOnUpdates:"Function",callbackTimeoutInMs:"Number",pd:"String",abTesting:"Object",provider:"String",maxCascades:"Number",applyCreativeRestrictions:"Boolean",disableUaHints:"Boolean",disableLiveIntentIntegration:"Boolean",storageExpirationDays:"Number",att:"Number",diagnostics:"Object"})},function(e,t,n){"use strict";var r=n(0),i=n(23);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){var r,i;r=e,t=n[i=t],(i=u(i))in r?Object.defineProperty(r,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[i]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function u(e){return e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==o(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===o(e)?e:String(e)}n=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,(n=[{key:"gather",value:function(e){var t,n,o={lbCDN:"%%LB_CDN%%"};return i.a.allSettled([(t="https://lb.eu-1-id5-sync.com/lb/v1",n=e,new i.a((function(i){Object(r.b)(t,{success:function(t){t=function(t,n){try{return JSON.parse(n)}catch(t){return Object(r.u)(e,"Cannot parse the JSON  response from: ".concat("https://lb.eu-1-id5-sync.com/lb/v1"),n),o}}(0,t),i(t)},error:function(e){Object(r.w)(n,"Got error from ".concat(t," endpoint"),e),i(o)}},null)})))]).then((function(e){var t=o;return e.forEach((function(e){e.value&&(t=s(s({},t),e.value))})),t})).catch((function(t){return Object(r.u)(e,"Got error ".concat(t," when gathering extensions data")),o}))}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()),t.a=n},function(e,t,n){"use strict";(function(e){var r,i=n(24),o=void 0!==(r=void 0!==e?e:window)&&void 0!==r.Promise?r.Promise:i.a;t.a=o}).call(t,n(2))},function(e,t,n){"use strict";(function(e){var r=n(28),i=n(29),o=setTimeout;function a(e){return Boolean(e&&void 0!==e.length)}function s(){}function c(e){if(!(this instanceof c))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function u(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,c._immediateFn((function(){var n,r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){try{n=r(e._value)}catch(n){return void d(t.promise,n)}l(t.promise,n)}else(1===e._state?l:d)(t.promise,e._value)}))):e._deferreds.push(t)}function l(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof c)return e._state=3,e._value=t,void p(e);if("function"==typeof n)return void h((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,p(e)}catch(t){d(e,t)}var r,i}function d(e,t){e._state=2,e._value=t,p(e)}function p(e){2===e._state&&0===e._deferreds.length&&c._immediateFn((function(){e._handled||c._unhandledRejectionFn(e._value)}));for(var t=0,n=e._deferreds.length;t<n;t++)u(e,e._deferreds[t]);e._deferreds=null}function f(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1;try{e((function(e){n||(n=!0,l(t,e))}),(function(e){n||(n=!0,d(t,e))}))}catch(e){if(n)return;n=!0,d(t,e)}}c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){var n=new this.constructor(s);return u(this,new f(e,t,n)),n},c.prototype.finally=r.a,c.all=function(e){return new c((function(t,n){if(!a(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);for(var i=r.length,o=0;o<r.length;o++)!function e(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,(function(t){e(o,t)}),n)}r[o]=a,0==--i&&t(r)}catch(a){n(a)}}(o,r[o])}))},c.allSettled=i.a,c.resolve=function(e){return e&&"object"==typeof e&&e.constructor===c?e:new c((function(t){t(e)}))},c.reject=function(e){return new c((function(t,n){n(e)}))},c.race=function(e){return new c((function(t,n){if(!a(e))return n(new TypeError("Promise.race accepts an array"));for(var r=0,i=e.length;r<i;r++)c.resolve(e[r]).then(t,n)}))},c._immediateFn="function"==typeof e?function(t){e(t)}:function(e){o(e,0)},c._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.a=c}).call(t,n(25).setImmediate)},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},n(26),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(t,n(2))},function(e,t,n){(function(e,t){!function(e,n){"use strict";var r,i,o,a,s,c,u,l;function d(e){delete i[e]}function p(e){if(o)setTimeout(p,0,e);else{var t=i[e];if(t){o=!0;try{!function(e){var t=e.callback,n=e.args;switch(n.length){case 0:t();break;case 1:t(n[0]);break;case 2:t(n[0],n[1]);break;case 3:t(n[0],n[1],n[2]);break;default:t.apply(void 0,n)}}(t)}finally{d(e),o=!1}}}}e.setImmediate||(r=1,o=!(i={}),a=e.document,l=(l=Object.getPrototypeOf&&Object.getPrototypeOf(e))&&l.setTimeout?l:e,"[object process]"==={}.toString.call(e.process)?s=function(e){t.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){function t(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(n)&&p(+t.data.slice(n.length))}var n="setImmediate$"+Math.random()+"$";e.addEventListener?e.addEventListener("message",t,!1):e.attachEvent("onmessage",t),s=function(t){e.postMessage(n+t,"*")}}():s=e.MessageChannel?((u=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(e){u.port2.postMessage(e)}):a&&"onreadystatechange"in a.createElement("script")?(c=a.documentElement,function(e){var t=a.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,c.removeChild(t),t=null},c.appendChild(t)}):function(e){setTimeout(p,0,e)},l.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];return i[r]={callback:e,args:t},s(r),r++},l.clearImmediate=d)}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(2),n(27))},function(e,t){var n,r;e=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var s,c=[],u=!1,l=-1;function d(){u&&s&&(u=!1,s.length?c=s.concat(c):l=-1,c.length&&p())}function p(){if(!u){var e=a(d);u=!0;for(var t=c.length;t;){for(s=c,c=[];++l<t;)s&&s[l].run();l=-1,t=c.length}s=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function h(){}e.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new f(e,t)),1!==c.length||u||a(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={},e.on=h,e.addListener=h,e.once=h,e.off=h,e.removeListener=h,e.removeAllListeners=h,e.emit=h,e.prependListener=h,e.prependOnceListener=h,e.listeners=function(e){return[]},e.binding=function(e){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(e){throw new Error("process.chdir is not supported")},e.umask=function(){return 0}},function(e,t,n){"use strict";t.a=function(e){var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){return t.reject(n)}))}))}},function(e,t,n){"use strict";t.a=function(e){return new this((function(t,n){if(!e||void 0===e.length)return n(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(e);if(0===r.length)return t([]);for(var i=r.length,o=0;o<r.length;o++)!function e(n,o){if(o&&("object"==typeof o||"function"==typeof o)){var a=o.then;if("function"==typeof a)return void a.call(o,(function(t){e(n,t)}),(function(e){r[n]={status:"rejected",reason:e},0==--i&&t(r)}))}r[n]={status:"fulfilled",value:o},0==--i&&t(r)}(o,r[o])}))}},function(e,t,n){"use strict";t.b=function(e,t){return Math.random()<e&&r.a?function(n,i){return new r.b(t,{sampling:e}).publish(n,i)}:function(e){return e}},t.d=function(){return new o.c},t.c=f,n.d(t,"a",(function(){return h}));var r=n(31),i=n(32),o=n(8);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){var r,i;r=e,t=n[i=t],(i=l(i))in r?Object.defineProperty(r,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[i]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function l(e){return e=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==a(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===a(e)?e:String(e)}function d(e,t){return(d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e){return{partner:e}}var h=function(){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(r,i.a);var e,t,n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0!==e)return e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e)}(this,t?(n=p(this).constructor,Reflect.construct(r,arguments,n)):r.apply(this,arguments))}}(r);function r(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:void 0,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:void 0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),n.call(this,c(c({source:e,version:t},f(i)),o))}return e=r,(t=[{key:"loadDelayTimer",value:function(){return this.timer("id5.api.instance.load.delay",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"fetchCallTimer",value:function(e){return this.timer("id5.api.fetch.call.time",c({status:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"fetchFailureCallTimer",value:function(){return this.fetchCallTimer("fail",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"fetchSuccessfulCallTimer",value:function(){return this.fetchCallTimer("success",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"extensionsCallTimer",value:function(){return this.timer("id5.api.extensions.call.time",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"consentRequestTimer",value:function(e){return this.timer("id5.api.consent.request.time",c({requestType:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"invocationCountSummary",value:function(){return this.summary("id5.api.invocation.count",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"instanceCounter",value:function(e){return this.counter("id5.api.instance.count",c({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"instanceUniqueDomainsCounter",value:function(e){return this.counter("id5.api.instance.domains.count",c({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"instanceUniqWindowsCounter",value:function(e){return this.counter("id5.api.instance.windows.count",c({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"instanceUniqPartnersCounter",value:function(e){return this.counter("id5.api.instance.partners.count",c({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"instanceJoinDelayTimer",value:function(){return this.timer("id5.api.instance.join.delay.time",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}},{key:"instanceLateJoinCounter",value:function(e){return this.counter("id5.api.instance.lateJoin.count",c({instanceId:e},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))}},{key:"instanceMsgDeliveryTimer",value:function(){return this.timer("id5.api.instance.message.delivery.time",0<arguments.length&&void 0!==arguments[0]?arguments[0]:{})}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),r}()},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){var r,i;r=e,t=n[i=t],(i=s(i))in r?Object.defineProperty(r,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[i]=t})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){return e=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==r(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===r(e)?e:String(e)}n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var c="https://diagnostics.id5-sync.com/measurements",u="undefined"!=typeof Promise&&"undefined"!=typeof fetch,l=function(){function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t||c,this._metadata=n}var t,n;return t=e,(n=[{key:"publish",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return e&&0<e.length?(e.forEach((function(e){var t;t=e.tags,Object.keys(t).forEach((function(e){var n=t[e];n&&(t[e]=n instanceof Object?JSON.stringify(n):"".concat(n))}))})),fetch(this.url,{method:"POST",headers:{"Content-Type":"text/plain"},mode:"no-cors",body:JSON.stringify({metadata:o(o({},this._metadata),t),measurements:e})})):Promise.resolve()}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(8),i=n(9);function o(e,t){var n,r=Object.keys(e);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(e),t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)),r}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function p(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e){return e=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);if("object"!==c(t=n.call(e,t||"default")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string"),"symbol"===c(e)?e:String(e)}var h=function(){function e(){l(this,e)}return p(e,[{key:"has",value:function(e){return void 0!==this[e]}},{key:"set",value:function(e,t){return this[e]=t,this}},{key:"get",value:function(e){return this[e]}},{key:"values",value:function(){return Object.entries(this).map((function(e){return(e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],c=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);c=!0);}catch(e){u=!0,i=e}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2))[0],e[1]}))}}]),e}(),v=function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:void 0;l(this,e),s(this,"_registry",void 0),s(this,"commonTags",void 0),s(this,"_scheduled",void 0),this._registry=new h,this.commonTags=i.a.from(t)}return p(e,[{key:"getOrCreate",value:function(e,t,n){var r=a(a({},t),this.commonTags);t="".concat(e,"[").concat(i.a.toString(r),"]");return this._registry.has(t)||this._registry.set(t,n(e,r)),this._registry.get(t)}},{key:"getAllMeasurements",value:function(){return this._registry.values().map((function(e){return{name:e.name,type:e.type,tags:e.tags,values:e.values}})).filter((function(e){return e.values&&0<e.values.length}))}},{key:"reset",value:function(){Array.from(this._registry.values()).forEach((function(e){return e.reset()}))}},{key:"addCommonTags",value:function(e){this.commonTags=a(a({},this.commonTags),i.a.from(e))}},{key:"timer",value:function(e){return this.getOrCreate(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},(function(e,t){return new r.d(e,t)}))}},{key:"counter",value:function(e){return this.getOrCreate(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},(function(e,t){return new r.a(e,t)}))}},{key:"summary",value:function(e){return this.getOrCreate(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},(function(e,t){return new r.b(e,t)}))}},{key:"publish",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:function(e){return e},n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:void 0;return Promise.resolve(this.getAllMeasurements()).then((function(e){return t(e,n)})).then((function(t){return e.reset()}))}},{key:"schedulePublishAfterMsec",value:function(e,t){var n;return this._scheduled||(n=this,setTimeout((function(){return n._scheduled=!1,n.publish(t,{trigger:"fixed-time",fixed_time_msec:e})}),e),this._scheduled=!0),this}},{key:"schedulePublishBeforeUnload",value:function(e){var t=this;return addEventListener("beforeunload",(function(){return t.publish(e,{trigger:"beforeunload"})})),this}}]),e}()}])},4:function(e,t,n){(function(r){var i;
/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */!function(o){var a=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(){this._events={},this._conf&&c.call(this,this._conf)}function c(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=void 0!==e.maxListeners?e.maxListeners:10,e.wildcard&&(this.wildcard=e.wildcard),e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener),e.verboseMemoryLeak&&(this.verboseMemoryLeak=e.verboseMemoryLeak),this.wildcard&&(this.listenerTree={})):this._maxListeners=10}function u(e,t){var n="(node) warning: possible EventEmitter memory leak detected. "+e+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(n+=" Event name: "+t+"."),void 0!==r&&r.emitWarning){var i=new Error(n);i.name="MaxListenersExceededWarning",i.emitter=this,i.count=e,r.emitWarning(i)}else console.error(n),console.trace&&console.trace()}function l(e){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,c.call(this,e)}function d(e,t,n,r){if(!n)return[];var i,o,a,s,c,u,l,p=[],f=t.length,h=t[r],v=t[r+1];if(r===f&&n._listeners){if("function"==typeof n._listeners)return e&&e.push(n._listeners),[n];for(i=0,o=n._listeners.length;i<o;i++)e&&e.push(n._listeners[i]);return[n]}if("*"===h||"**"===h||n[h]){if("*"===h){for(a in n)"_listeners"!==a&&n.hasOwnProperty(a)&&(p=p.concat(d(e,t,n[a],r+1)));return p}if("**"===h){for(a in(l=r+1===f||r+2===f&&"*"===v)&&n._listeners&&(p=p.concat(d(e,t,n,f))),n)"_listeners"!==a&&n.hasOwnProperty(a)&&("*"===a||"**"===a?(n[a]._listeners&&!l&&(p=p.concat(d(e,t,n[a],f))),p=p.concat(d(e,t,n[a],r))):p=a===v?p.concat(d(e,t,n[a],r+2)):p.concat(d(e,t,n[a],r)));return p}p=p.concat(d(e,t,n[h],r+1))}if((s=n["*"])&&d(e,t,s,r+1),c=n["**"])if(r<f)for(a in c._listeners&&d(e,t,c,f),c)"_listeners"!==a&&c.hasOwnProperty(a)&&(a===v?d(e,t,c[a],r+2):a===h?d(e,t,c[a],r+1):((u={})[a]=c[a],d(e,t,{"**":u},r+1)));else c._listeners?d(e,t,c,f):c["*"]&&c["*"]._listeners&&d(e,t,c["*"],f);return p}function p(e,t){for(var n=0,r=(e="string"==typeof e?e.split(this.delimiter):e.slice()).length;n+1<r;n++)if("**"===e[n]&&"**"===e[n+1])return;for(var i=this.listenerTree,o=e.shift();void 0!==o;){if(i[o]||(i[o]={}),i=i[o],0===e.length)return i._listeners?("function"==typeof i._listeners&&(i._listeners=[i._listeners]),i._listeners.push(t),!i._listeners.warned&&this._maxListeners>0&&i._listeners.length>this._maxListeners&&(i._listeners.warned=!0,u.call(this,i._listeners.length,o))):i._listeners=t,!0;o=e.shift()}return!0}l.EventEmitter2=l,l.prototype.delimiter=".",l.prototype.setMaxListeners=function(e){void 0!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},l.prototype.event="",l.prototype.once=function(e,t){return this._once(e,t,!1)},l.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},l.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},l.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},l.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},l.prototype._many=function(e,t,n,r){var i=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function o(){return 0==--t&&i.off(e,o),n.apply(this,arguments)}return o._origin=n,this._on(e,o,r),i},l.prototype.emit=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,n,r,i,o,a=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),a>3)for(t=new Array(a),i=0;i<a;i++)t[i]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this,e);break;case 2:o[r].call(this,e,arguments[1]);break;case 3:o[r].call(this,e,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}}if(this.wildcard){o=[];var c="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,c,this.listenerTree,0)}else{if("function"==typeof(o=this._events[e])){switch(this.event=e,a){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];o.apply(this,t)}return!0}o&&(o=o.slice())}if(o&&o.length){if(a>3)for(t=new Array(a-1),i=1;i<a;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,a){case 1:o[r].call(this);break;case 2:o[r].call(this,arguments[1]);break;case 3:o[r].call(this,arguments[1],arguments[2]);break;default:o[r].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},l.prototype.emitAsync=function(){this._events||s.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,r,i,o,a=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),i=1;i<c;i++)t[i]=arguments[i];for(r=0,n=this._all.length;r<n;r++)switch(this.event=e,c){case 1:a.push(this._all[r].call(this,e));break;case 2:a.push(this._all[r].call(this,e,arguments[1]));break;case 3:a.push(this._all[r].call(this,e,arguments[1],arguments[2]));break;default:a.push(this._all[r].apply(this,t))}}if(this.wildcard){o=[];var u="string"==typeof e?e.split(this.delimiter):e.slice();d.call(this,o,u,this.listenerTree,0)}else o=this._events[e];if("function"==typeof o)switch(this.event=e,c){case 1:a.push(o.call(this));break;case 2:a.push(o.call(this,arguments[1]));break;case 3:a.push(o.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];a.push(o.apply(this,t))}else if(o&&o.length){if(o=o.slice(),c>3)for(t=new Array(c-1),i=1;i<c;i++)t[i-1]=arguments[i];for(r=0,n=o.length;r<n;r++)switch(this.event=e,c){case 1:a.push(o[r].call(this));break;case 2:a.push(o[r].call(this,arguments[1]));break;case 3:a.push(o[r].call(this,arguments[1],arguments[2]));break;default:a.push(o[r].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(a)},l.prototype.on=function(e,t){return this._on(e,t,!1)},l.prototype.prependListener=function(e,t){return this._on(e,t,!0)},l.prototype.onAny=function(e){return this._onAny(e,!1)},l.prototype.prependAny=function(e){return this._onAny(e,!0)},l.prototype.addListener=l.prototype.on,l.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},l.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||s.call(this),this._newListener&&this.emit("newListener",e,t),this.wildcard?(p.call(this,e,t),this):(this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,u.call(this,this._events[e].length,e))):this._events[e]=t,this)},l.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,r=[];if(this.wildcard){var i="string"==typeof e?e.split(this.delimiter):e.slice();r=d.call(this,null,i,this.listenerTree,0)}else{if(!this._events[e])return this;n=this._events[e],r.push({_listeners:n})}for(var o=0;o<r.length;o++){var s=r[o];if(n=s._listeners,a(n)){for(var c=-1,u=0,l=n.length;u<l;u++)if(n[u]===t||n[u].listener&&n[u].listener===t||n[u]._origin&&n[u]._origin===t){c=u;break}if(c<0)continue;return this.wildcard?s._listeners.splice(c,1):this._events[e].splice(c,1),0===n.length&&(this.wildcard?delete s._listeners:delete this._events[e]),this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(this.wildcard?delete s._listeners:delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(void 0!==t){var n=Object.keys(t);for(var r in n){var i=n[r],o=t[i];o instanceof Function||"object"!=typeof o||null===o||(Object.keys(o).length>0&&e(t[i]),0===Object.keys(o).length&&delete t[i])}}}(this.listenerTree),this},l.prototype.offAny=function(e){var t,n=0,r=0;if(e&&this._all&&this._all.length>0){for(n=0,r=(t=this._all).length;n<r;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,r=t.length;n<r;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},l.prototype.removeListener=l.prototype.off,l.prototype.removeAllListeners=function(e){if(void 0===e)return!this._events||s.call(this),this;if(this.wildcard)for(var t="string"==typeof e?e.split(this.delimiter):e.slice(),n=d.call(this,null,t,this.listenerTree,0),r=0;r<n.length;r++){n[r]._listeners=null}else this._events&&(this._events[e]=null);return this},l.prototype.listeners=function(e){if(this.wildcard){var t=[],n="string"==typeof e?e.split(this.delimiter):e.slice();return d.call(this,t,n,this.listenerTree,0),t}return this._events||s.call(this),this._events[e]||(this._events[e]=[]),a(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},l.prototype.eventNames=function(){return Object.keys(this._events)},l.prototype.listenerCount=function(e){return this.listeners(e).length},l.prototype.listenersAny=function(){return this._all?this._all:[]},void 0===(i=function(){return l}.call(t,n,t,e))||(e.exports=i)}()}).call(this,n(18))},46:function(e,t,n){var r=n(47);r&&r.__esModule&&(r=r.default),e.exports="string"==typeof r?r:r.toString()},47:function(e,t,n){(t=n(48)(!1)).push([e.i,'/* TBD - Opacity only? */\n.__exco_flexbox {\n  display: -ms-flexbox;\n  display: -webkit-box;\n  display: flex;\n}\n.__exco_full_size,\n.__exco_ad_container,\n.__exco_ad_ima_slot,\n.__exco_content_poster,\n.__exco_content_container {\n  width: 100%;\n  height: 100% !important;\n  position: absolute;\n  overflow: hidden;\n  top: 0;\n  left: 0;\n  padding: 0;\n  margin: 0;\n}\n.__exco_visible {\n  opacity: 1;\n}\n.__exco_hidden {\n  opacity: 0;\n}\n/* Internal not for user override */\n.__exco_root_container,\n#__exco_root_container {\n  background-color: #000;\n  border: 0 none;\n  display: block;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  position: relative;\n  top: 0;\n  width: 100%;\n}\n.__exco_root_container *,\n#__exco_root_container * {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.__exco_root_container .__exco_hidden,\n#__exco_root_container .__exco_hidden {\n  display: none;\n}\n.__exco_ad_container {\n  background-color: #000;\n  z-index: -1;\n}\n.__exco_content_video,\n.__exco_video_element,\n#__exco_content_video,\n#__exco_video_element {\n  height: 100% !important;\n  width: 100%;\n  position: relative;\n  top: 0;\n  left: 0;\n  display: block;\n}\n.__exco_content_poster {\n  z-index: 1;\n  background: #000 center center no-repeat;\n}\n.__exco_content_container {\n  background: #000;\n  z-index: 10001;\n}\n.__exco_content_container .__exco_content_video {\n  z-index: 0;\n}\n.__exco_video_element {\n  background-color: #000;\n}\n.__exco_jsv_marker::before {\n  content: "JSV";\n  display: block;\n  color: #fff;\n  background: #333;\n  top: 0;\n  left: 0;\n  position: absolute;\n  padding: 10px;\n  -webkit-box-shadow: 0 0 7px #fff;\n  -moz-box-shadow: 0 0 7px #fff;\n  box-shadow: 0 0 7px #fff;\n}\n',""]),e.exports=t},48:function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",r=e[3];if(!r)return n;if(t&&"function"==typeof btoa){var i=(a=r,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),o=r.sources.map((function(e){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(e," */")}));return[n].concat(o).concat([i]).join("\n")}var a,s,c;return[n].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&i[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decompressObj=t.compressObj=t.decompressStr=t.compressStr=void 0;const r=n(27);t.compressStr=e=>{if(!e)return"";const t={},n=e.split(""),r=[];let i=256,o=n.shift()||"";for(;n.length;){const e=n.shift();null!=t[o+e]?o+=e:(r.push(o.length>1?t[o]:o.charCodeAt(0)),t[o+e]=i++,o=e||"")}r.push(o.length>1?t[o]:o.charCodeAt(0));const a=new Uint32Array(r.length).length;for(let e=0;e<a;++e)r[e]=String.fromCharCode(r[e]);return r.join("")};t.decompressStr=e=>{if(!e)return"";const t={},n=e.split(""),r=[n.shift()],i=new Uint32Array(n.length).length;let o=256,a=r[0],s=a||"";for(let e=0;e<i;++e){const i=n[e].charCodeAt(0),c=i<256?n[e]:t[i]?t[i]:s+a;r.push(c),a=c.charAt(0),t[o++]=s+a,s=c}return r.join("")};t.compressObj=e=>(0,t.compressStr)((0,r.JSONstringify)(e));t.decompressObj=e=>(0,r.JSONparse)((0,t.decompressStr)(e))},5:function(e,t,n){"use strict";n.r(t),n.d(t,"PLUGINS",(function(){return a}));var r,i=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},o=function(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},a={TABOOLA:"tbla"},s=Object.values(a).reduce((function(e,t){return e[t]="./".concat(t),e}),{}),c=((r={})[a.TABOOLA]=function(e){return"0010J00001s1b0MQAQ"===(null==e?void 0:e.sellerId)},r),u=function(){function e(){this._loadedPlugins={}}return e.prototype.get=function(e,t){return i(this,void 0,void 0,(function(){return o(this,(function(n){return this._loadedPlugins[e]?[2,this._loadedPlugins[e]]:[2,this.load(e,t)]}))}))},e.prototype.load=function(e,t){return i(this,void 0,void 0,(function(){var r;return o(this,(function(i){switch(i.label){case 0:return!s[e]||this._loadedPlugins[e]?[3,2]:[4,n(55)("".concat(s[e]))];case 1:r=i.sent().default,this._loadedPlugins[e]=new r(t),i.label=2;case 2:return[2,this._loadedPlugins[e]]}}))}))},e.prototype.isEnabled=function(e,t){var n=c[t];return!(!n||!n(e))},e}();t.default=new u},50:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.safeDecodeStr=t.safeEncodeStr=t.safeDecodeJson=t.safeEncodeJson=t.decodeJson=t.encodeJson=t.decodeStr=t.encodeStr=void 0;const r=n(27),i=[["+","-"],["/","_"],["=","~"]];t.encodeStr=t=>e?e.from(t).toString("base64"):btoa(t);t.decodeStr=t=>e?e.from(t,"base64").toString():atob(t);t.encodeJson=e=>(0,t.encodeStr)((0,r.JSONstringify)(e));t.decodeJson=e=>(0,r.JSONparse)((0,t.decodeStr)(e));t.safeEncodeJson=e=>(0,t.safeEncodeStr)((0,r.JSONstringify)(e));t.safeDecodeJson=e=>(0,r.JSONparse)((0,t.safeDecodeStr)(e));t.safeEncodeStr=e=>i.reduce((e,[t,n])=>e.replace(new RegExp("\\"+t,"g"),n),(0,t.encodeStr)(e));t.safeDecodeStr=e=>(0,t.decodeStr)(i.reduce((e,[t,n])=>e.replace(new RegExp("\\"+n,"g"),t),e))}).call(this,n(51).Buffer)},51:function(e,t,n){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(52),i=n(53),o=n(54);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return d(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=p(e,t);return e}(e,t,n,r):"string"==typeof t?function(e,t,n){"string"==typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n),i=(e=s(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|f(t.length);return 0===(e=s(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(r=t.length)!=r?s(e,0):p(e,t);if("Buffer"===t.type&&o(t.data))return p(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function d(e,t){if(l(t),e=s(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function p(e,t){var n=t.length<0?0:0|f(t.length);e=s(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function f(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function h(e,t){if(c.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return F(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return B(e).length;default:if(r)return F(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return k(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return O(this,t,n);case"latin1":case"binary":return C(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function y(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:g(e,t,n,r,i);if("number"==typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):g(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,n,r,i){var o,a=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var d=!0,p=0;p<c;p++)if(u(e,o+p)!==u(t,p)){d=!1;break}if(d)return o}return-1}function A(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[n+a]=s}return a}function b(e,t,n,r){return q(F(t,e.length-n),e,n,r)}function E(e,t,n,r){return q(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function _(e,t,n,r){return E(e,t,n,r)}function w(e,t,n,r){return q(B(t),e,n,r)}function T(e,t,n,r){return q(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)n=e.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function I(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,c,u=e[i],l=null,d=u>239?4:u>223?3:u>191?2:1;if(i+d<=n)switch(d){case 1:u<128&&(l=u);break;case 2:128==(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,d=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=d}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?s(e,t):void 0!==n?"string"==typeof r?s(e,t).fill(n,r):s(e,t).fill(n):s(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return d(null,e)},c.allocUnsafeSlow=function(e){return d(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=h,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):v.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n),d=0;d<s;++d)if(u[d]!==l[d]){o=u[d],a=l[d];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return A(this,e,t,n);case"utf8":case"utf-8":return b(this,e,t,n);case"ascii":return E(this,e,t,n);case"latin1":case"binary":return _(this,e,t,n);case"base64":return w(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function k(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=M(e[o]);return i}function P(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function L(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function x(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function N(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,r,o){return o||N(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,o){return o||N(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||D(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||D(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||D(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||D(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||D(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||D(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||D(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||D(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||R(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):x(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):x(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):x(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=c.isBuffer(e)?e:F(new c(e,r).toString()),s=a.length;for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function M(e){return e<16?"0"+e.toString(16):e.toString(16)}function F(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function B(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(V,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function q(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(8))},52:function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),a=r[0],s=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,a,s)),l=0,d=s>0?a-4:a;for(n=0;n<d;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(e,a,a+16383>s?s:a+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},53:function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,d=n?i-1:0,p=n?-1:1,f=e[t+d];for(d+=p,o=f&(1<<-l)-1,f>>=-l,l+=s;l>0;o=256*o+e[t+d],d+=p,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+e[t+d],d+=p,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,d=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,h=r?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=l):(a=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-a))<1&&(a--,c*=2),(t+=a+d>=1?p/c:p*Math.pow(2,1-d))*c>=2&&(a++,c/=2),a+d>=l?(s=0,a=l):a+d>=1?(s=(t*c-1)*Math.pow(2,i),a+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),a=0));i>=8;e[n+f]=255&s,f+=h,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+f]=255&a,f+=h,a/=256,u-=8);e[n+f-h]|=128*v}},54:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},55:function(e,t,n){var r={".":[5,9],"./":[5,9],"./index":[5,9],"./index.ts":[5,9],"./public-path":[17,7],"./public-path.ts":[17,7],"./tbla":[16,9,0],"./tbla/":[16,9,0],"./tbla/index":[16,9,0],"./tbla/index.ts":[16,9,0],"./tbla/src/api":[44,9,2],"./tbla/src/api.ts":[44,9,2],"./tbla/src/callbacks":[41,9,5],"./tbla/src/callbacks.ts":[41,9,5],"./tbla/src/constants":[15,9,1],"./tbla/src/constants/":[15,9,1],"./tbla/src/constants/api.constants":[39,9,6],"./tbla/src/constants/api.constants.ts":[39,9,6],"./tbla/src/constants/demand.constants":[38,9,7],"./tbla/src/constants/demand.constants.ts":[38,9,7],"./tbla/src/constants/events.constants":[40,9,8],"./tbla/src/constants/events.constants.ts":[40,9,8],"./tbla/src/constants/index":[15,9,1],"./tbla/src/constants/index.ts":[15,9,1],"./tbla/src/events":[42,9,4],"./tbla/src/events.ts":[42,9,4],"./tbla/src/macros":[43,9,9],"./tbla/src/macros.ts":[43,9,9],"./tbla/src/moat":[45,9,3],"./tbla/src/moat.ts":[45,9,3]};function i(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],i=t[0];return Promise.all(t.slice(2).map(n.e)).then((function(){return n.t(i,t[1])}))}i.keys=function(){return Object.keys(r)},i.id=55,e.exports=i},56:function(e,t,n){!function(e){"use strict";function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function n(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function f(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adId:e.adId||null,sequence:e.sequence||null,apiFramework:e.apiFramework||null,universalAdIds:[],creativeExtensions:[]}}var m=["ADCATEGORIES","ADCOUNT","ADPLAYHEAD","ADSERVINGID","ADTYPE","APIFRAMEWORKS","APPBUNDLE","ASSETURI","BLOCKEDADCATEGORIES","BREAKMAXADLENGTH","BREAKMAXADS","BREAKMAXDURATION","BREAKMINADLENGTH","BREAKMINDURATION","BREAKPOSITION","CLICKPOS","CLICKTYPE","CLIENTUA","CONTENTID","CONTENTPLAYHEAD","CONTENTURI","DEVICEIP","DEVICEUA","DOMAIN","EXTENSIONS","GDPRCONSENT","IFA","IFATYPE","INVENTORYSTATE","LATLONG","LIMITADTRACKING","MEDIAMIME","MEDIAPLAYHEAD","OMIDPARTNER","PAGEURL","PLACEMENTTYPE","PLAYERCAPABILITIES","PLAYERSIZE","PLAYERSTATE","PODSEQUENCE","REGULATIONS","SERVERSIDE","SERVERUA","TRANSACTIONID","UNIVERSALADID","VASTVERSIONS","VERIFICATIONVENDORS"];function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=[],i=b(e);for(var o in!t.ERRORCODE||n.isCustomCode||/^[0-9]{3}$/.test(t.ERRORCODE)||(t.ERRORCODE=900),t.CACHEBUSTING=T(Math.round(1e8*Math.random())),t.TIMESTAMP=(new Date).toISOString(),t.RANDOM=t.random=t.CACHEBUSTING,t)t[o]=w(t[o]);for(var a in i){var s=i[a];"string"==typeof s&&r.push(g(s,t))}return r}function g(e,t){var n=(e=A(e,t)).match(/[^[\]]+(?=])/g);if(!n)return e;var r=n.filter((function(e){return m.indexOf(e)>-1}));return 0===r.length?e:A(e,r=r.reduce((function(e,t){return e[t]=-1,e}),{}))}function A(e,t){var n=e;for(var r in t){var i=t[r];n=n.replace(new RegExp("(?:\\[|%%)(".concat(r,")(?:\\]|%%)"),"g"),i)}return n}function b(e){return Array.isArray(e)?e.map((function(e){return e&&e.hasOwnProperty("url")?e.url:e})):e}function E(e,t){for(var n=0;n<t.length;n++)if(_(t[n],e))return!0;return!1}function _(e,t){if(e&&t){var n=Object.getOwnPropertyNames(e),r=Object.getOwnPropertyNames(t);return n.length===r.length&&e.id===t.id&&e.url===t.url}return!1}function w(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16))}))}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return e.toString().padStart(t,"0")}var I={track:function(e,t,n){y(e,t,n).forEach((function(e){"undefined"!=typeof window&&null!==window&&((new Image).src=e)}))},resolveURLTemplates:y,extractURLsFromTemplates:b,containsTemplateObject:E,isTemplateObjectEqual:_,encodeURIComponentRFC3986:w,replaceUrlMacros:g,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce((function(t,n){return t.concat(Array.isArray(n)?e(n):n)}),[])},joinArrayOfUniqueTemplateObjs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(e)?e:[],r=Array.isArray(t)?t:[],i=n.concat(r);return i.reduce((function(e,t){return E(t,e)||e.push(t),e}),[])},isValidTimeValue:function(e){return Number.isFinite(e)&&e>=-2},addLeadingZeros:T};function S(e){return-1!==["true","TRUE","True","1"].indexOf(e)}var O={childByName:function(e,t){var n=e.childNodes;for(var r in n){var i=n[r];if(i.nodeName===t)return i}},childrenByName:function(e,t){var n=[],r=e.childNodes;for(var i in r){var o=r[i];o.nodeName===t&&n.push(o)}return n},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf("//")){var n=location.protocol;return"".concat(n).concat(e)}if(-1===e.indexOf("://")){var r=t.slice(0,t.lastIndexOf("/"));return"".concat(r,"/").concat(e)}return e},parseBoolean:S,parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,n){var r=t.getAttribute(e);r&&n.setAttribute(e,r)},parseAttributes:function(e){for(var t=e.attributes,n={},r=0;r<t.length;r++)n[t[r].nodeName]=t[r].nodeValue;return n},parseDuration:function(e){if(null==e)return-1;if(I.isNumeric(e))return parseInt(e);var t=e.split(":");if(3!==t.length)return-1;var n=t[2].split("."),r=parseInt(n[0]);2===n.length&&(r+=parseFloat("0.".concat(n[1])));var i=parseInt(60*t[1]),o=parseInt(60*t[0]*60);return isNaN(o)||isNaN(i)||isNaN(r)||i>3600||r>60?-1:o+i+r},splitVAST:function(e){var t=[],n=null;return e.forEach((function(r,i){if(r.sequence&&(r.sequence=parseInt(r.sequence,10)),r.sequence>1){var o=e[i-1];if(o&&o.sequence===r.sequence-1)return void(n&&n.push(r));delete r.sequence}n=[r],t.push(n)})),t},assignAttributes:function(e,t){if(e)for(var n in e){var r=e[n];if(r.nodeName&&r.nodeValue&&t.hasOwnProperty(r.nodeName)){var i=r.nodeValue;"boolean"==typeof t[r.nodeName]&&(i=S(i)),t[r.nodeName]=i}}},mergeWrapperAdData:function(e,t){e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),t.viewableImpression.length>0&&(e.viewableImpression=[].concat(f(e.viewableImpression),f(t.viewableImpression))),e.followAdditionalWrappers=t.followAdditionalWrappers,e.allowMultipleAds=t.allowMultipleAds,e.fallbackOnNoAd=t.fallbackOnNoAd;var n=(t.creatives||[]).filter((function(e){return e&&"companion"===e.type})),r=n.reduce((function(e,t){return(t.variations||[]).forEach((function(t){(t.companionClickTrackingURLTemplates||[]).forEach((function(t){I.containsTemplateObject(t,e)||e.push(t)}))})),e}),[]);e.creatives=n.concat(e.creatives);var i=t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length,o=t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length;e.creatives.forEach((function(e){if(t.trackingEvents&&t.trackingEvents[e.type])for(var n in t.trackingEvents[e.type]){var a=t.trackingEvents[e.type][n];Array.isArray(e.trackingEvents[n])||(e.trackingEvents[n]=[]),e.trackingEvents[n]=e.trackingEvents[n].concat(a)}"linear"===e.type&&(i&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates)),o&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates)),!t.videoClickThroughURLTemplate||null!==e.videoClickThroughURLTemplate&&void 0!==e.videoClickThroughURLTemplate||(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)),"companion"===e.type&&r.length&&(e.variations||[]).forEach((function(e){e.companionClickTrackingURLTemplates=I.joinArrayOfUniqueTemplateObjs(e.companionClickTrackingURLTemplates,r)}))})),t.adVerifications&&(e.adVerifications=e.adVerifications.concat(t.adVerifications)),t.blockedAdCategories&&(e.blockedAdCategories=e.blockedAdCategories.concat(t.blockedAdCategories))}};function C(e,t){var n=function(){var e=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,n=e.adId,r=e.sequence,i=e.apiFramework;return{id:t,adId:n,sequence:r,apiFramework:i,type:"companion",required:null,variations:[]}}(t);return n.required=e.getAttribute("required")||null,n.variations=O.childrenByName(e,"Companion").map((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,adType:"companionAd",width:e.width||0,height:e.height||0,assetWidth:e.assetWidth||null,assetHeight:e.assetHeight||null,expandedWidth:e.expandedWidth||null,expandedHeight:e.expandedHeight||null,apiFramework:e.apiFramework||null,adSlotID:e.adSlotID||null,pxratio:e.pxratio||"1",renderingMode:e.renderingMode||"default",staticResources:[],htmlResources:[],iframeResources:[],adParameters:null,xmlEncoded:null,altText:null,companionClickThroughURLTemplate:null,companionClickTrackingURLTemplates:[],trackingEvents:{}}}(O.parseAttributes(e));t.htmlResources=O.childrenByName(e,"HTMLResource").reduce((function(e,t){var n=O.parseNodeText(t);return n?e.concat(n):e}),[]),t.iframeResources=O.childrenByName(e,"IFrameResource").reduce((function(e,t){var n=O.parseNodeText(t);return n?e.concat(n):e}),[]),t.staticResources=O.childrenByName(e,"StaticResource").reduce((function(e,t){var n=O.parseNodeText(t);return n?e.concat({url:n,creativeType:t.getAttribute("creativeType")||null}):e}),[]),t.altText=O.parseNodeText(O.childByName(e,"AltText"))||null;var n=O.childByName(e,"TrackingEvents");n&&O.childrenByName(n,"Tracking").forEach((function(e){var n=e.getAttribute("event"),r=O.parseNodeText(e);n&&r&&(Array.isArray(t.trackingEvents[n])||(t.trackingEvents[n]=[]),t.trackingEvents[n].push(r))})),t.companionClickTrackingURLTemplates=O.childrenByName(e,"CompanionClickTracking").map((function(e){return{id:e.getAttribute("id")||null,url:O.parseNodeText(e)}})),t.companionClickThroughURLTemplate=O.parseNodeText(O.childByName(e,"CompanionClickThrough"))||null;var r=O.childByName(e,"AdParameters");return r&&(t.adParameters=O.parseNodeText(r),t.xmlEncoded=r.getAttribute("xmlEncoded")||null),t})),n}function k(e){return"linear"===e.type}function P(e,t){var n,r=function(){var e=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,n=e.adId,r=e.sequence,i=e.apiFramework;return{id:t,adId:n,sequence:r,apiFramework:i,type:"linear",duration:0,skipDelay:null,mediaFiles:[],mezzanine:null,interactiveCreativeFile:null,closedCaptionFiles:[],videoClickThroughURLTemplate:null,videoClickTrackingURLTemplates:[],videoCustomClickURLTemplates:[],adParameters:null,icons:[],trackingEvents:{}}}(t);r.duration=O.parseDuration(O.parseNodeText(O.childByName(e,"Duration")));var i=e.getAttribute("skipoffset");if(null==i)r.skipDelay=null;else if("%"===i.charAt(i.length-1)&&-1!==r.duration){var o=parseInt(i,10);r.skipDelay=r.duration*(o/100)}else r.skipDelay=O.parseDuration(i);var a=O.childByName(e,"VideoClicks");if(a){var s=O.childByName(a,"ClickThrough");r.videoClickThroughURLTemplate=s?{id:s.getAttribute("id")||null,url:O.parseNodeText(s)}:null,O.childrenByName(a,"ClickTracking").forEach((function(e){r.videoClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:O.parseNodeText(e)})})),O.childrenByName(a,"CustomClick").forEach((function(e){r.videoCustomClickURLTemplates.push({id:e.getAttribute("id")||null,url:O.parseNodeText(e)})}))}var c=O.childByName(e,"AdParameters");c&&(r.adParameters=O.parseNodeText(c)),O.childrenByName(e,"TrackingEvents").forEach((function(e){O.childrenByName(e,"Tracking").forEach((function(e){var t=e.getAttribute("event"),i=O.parseNodeText(e);if(t&&i){if("progress"===t){if(!(n=e.getAttribute("offset")))return;t="%"===n.charAt(n.length-1)?"progress-".concat(n):"progress-".concat(Math.round(O.parseDuration(n)))}Array.isArray(r.trackingEvents[t])||(r.trackingEvents[t]=[]),r.trackingEvents[t].push(i)}}))})),O.childrenByName(e,"MediaFiles").forEach((function(e){O.childrenByName(e,"MediaFile").forEach((function(e){r.mediaFiles.push(function(e){var t={id:null,fileURL:null,fileSize:0,deliveryType:"progressive",mimeType:null,mediaType:null,codec:null,bitrate:0,minBitrate:0,maxBitrate:0,width:0,height:0,apiFramework:null,scalable:null,maintainAspectRatio:null};t.id=e.getAttribute("id"),t.fileURL=O.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.mediaType=e.getAttribute("mediaType")||"2D",t.apiFramework=e.getAttribute("apiFramework"),t.fileSize=parseInt(e.getAttribute("fileSize")||0),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);var n=e.getAttribute("scalable");n&&"string"==typeof n&&(t.scalable=O.parseBoolean(n));var r=e.getAttribute("maintainAspectRatio");return r&&"string"==typeof r&&(t.maintainAspectRatio=O.parseBoolean(r)),t}(e))}));var t=O.childByName(e,"InteractiveCreativeFile");t&&(r.interactiveCreativeFile=function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,apiFramework:e.apiFramework||null,variableDuration:O.parseBoolean(e.variableDuration),fileURL:null}}(O.parseAttributes(e));return t.fileURL=O.parseNodeText(e),t}(t));var n=O.childByName(e,"ClosedCaptionFiles");n&&O.childrenByName(n,"ClosedCaptionFile").forEach((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:e.type||null,language:e.language||null,fileURL:null}}(O.parseAttributes(e));t.fileURL=O.parseNodeText(e),r.closedCaptionFiles.push(t)}));var i,o,a,s=O.childByName(e,"Mezzanine"),c=(i=s,o={},a=!1,["delivery","type","width","height"].forEach((function(e){i&&i.getAttribute(e)?o[e]=i.getAttribute(e):a=!0})),a?null:o);if(c){var u={id:null,fileURL:null,delivery:null,codec:null,type:null,width:0,height:0,fileSize:0,mediaType:"2D"};u.id=s.getAttribute("id"),u.fileURL=O.parseNodeText(s),u.delivery=c.delivery,u.codec=s.getAttribute("codec"),u.type=c.type,u.width=parseInt(c.width,10),u.height=parseInt(c.height,10),u.fileSize=parseInt(s.getAttribute("fileSize"),10),u.mediaType=s.getAttribute("mediaType")||"2D",r.mezzanine=u}}));var u=O.childByName(e,"Icons");return u&&O.childrenByName(u,"Icon").forEach((function(e){r.icons.push(function(e){var t={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,pxratio:"1",iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};t.program=e.getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=function(e){return-1!==["left","right"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("xPosition")),t.yPosition=function(e){return-1!==["top","bottom"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("yPosition")),t.apiFramework=e.getAttribute("apiFramework"),t.pxratio=e.getAttribute("pxratio")||"1",t.offset=O.parseDuration(e.getAttribute("offset")),t.duration=O.parseDuration(e.getAttribute("duration")),O.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=O.parseNodeText(e)})),O.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=O.parseNodeText(e)})),O.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=O.parseNodeText(e)}));var n=O.childByName(e,"IconClicks");return n&&(t.iconClickThroughURLTemplate=O.parseNodeText(O.childByName(n,"IconClickThrough")),O.childrenByName(n,"IconClickTracking").forEach((function(e){t.iconClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:O.parseNodeText(e)})}))),t.iconViewTrackingURLTemplate=O.parseNodeText(O.childByName(e,"IconViewTracking")),t}(e))})),r}function D(e,t){var n=function(){var e=v(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),t=e.id,n=e.adId,r=e.sequence,i=e.apiFramework;return{id:t,adId:n,sequence:r,apiFramework:i,type:"nonlinear",variations:[],trackingEvents:{}}}(t);return O.childrenByName(e,"TrackingEvents").forEach((function(e){var t,r;O.childrenByName(e,"Tracking").forEach((function(e){t=e.getAttribute("event"),r=O.parseNodeText(e),t&&r&&(Array.isArray(n.trackingEvents[t])||(n.trackingEvents[t]=[]),n.trackingEvents[t].push(r))}))})),O.childrenByName(e,"NonLinear").forEach((function(e){var t={id:null,width:0,height:0,expandedWidth:0,expandedHeight:0,scalable:!0,maintainAspectRatio:!0,minSuggestedDuration:0,apiFramework:"static",adType:"nonLinearAd",type:null,staticResource:null,htmlResource:null,iframeResource:null,nonlinearClickThroughURLTemplate:null,nonlinearClickTrackingURLTemplates:[],adParameters:null};t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=O.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=O.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=O.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),O.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=O.parseNodeText(e)})),O.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=O.parseNodeText(e)})),O.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=O.parseNodeText(e)}));var r=O.childByName(e,"AdParameters");r&&(t.adParameters=O.parseNodeText(r)),t.nonlinearClickThroughURLTemplate=O.parseNodeText(O.childByName(e,"NonLinearClickThrough")),O.childrenByName(e,"NonLinearClickTracking").forEach((function(e){t.nonlinearClickTrackingURLTemplates.push({id:e.getAttribute("id")||null,url:O.parseNodeText(e)})})),n.variations.push(t)})),n}function R(e){var t=[];return e.forEach((function(e){var n=function e(t){if("#comment"===t.nodeName)return null;var n,r={name:null,value:null,attributes:{},children:[]},i=t.attributes,o=t.childNodes;if(r.name=t.nodeName,t.attributes)for(var a in i)if(i.hasOwnProperty(a)){var s=i[a];s.nodeName&&s.nodeValue&&(r.attributes[s.nodeName]=s.nodeValue)}for(var c in o)if(o.hasOwnProperty(c)){var u=e(o[c]);u&&r.children.push(u)}if(0===r.children.length||1===r.children.length&&["#cdata-section","#text"].indexOf(r.children[0].name)>=0){var l=O.parseNodeText(t);""!==l&&(r.value=l),r.children=[]}return null===(n=r).value&&0===Object.keys(n.attributes).length&&0===n.children.length?null:r}(e);n&&t.push(n)})),t}function L(e){var t=[];return e.forEach((function(e){var n,r={id:e.getAttribute("id")||null,adId:x(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null},i=[];O.childrenByName(e,"UniversalAdId").forEach((function(e){var t={idRegistry:e.getAttribute("idRegistry")||"unknown",value:O.parseNodeText(e)};i.push(t)}));var o=O.childByName(e,"CreativeExtensions");for(var a in o&&(n=R(O.childrenByName(o,"CreativeExtension"))),e.childNodes){var s=e.childNodes[a],c=void 0;switch(s.nodeName){case"Linear":c=P(s,r);break;case"NonLinearAds":c=D(s,r);break;case"CompanionAds":c=C(s,r)}c&&(i&&(c.universalAdIds=i),n&&(c.creativeExtensions=n),t.push(c))}})),t}function x(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}var N={Wrapper:{subElements:["VASTAdTagURI","Impression"]},BlockedAdCategories:{attributes:["authority"]},InLine:{subElements:["AdSystem","AdTitle","Impression","AdServingId","Creatives"]},Category:{attributes:["authority"]},Pricing:{attributes:["model","currency"]},Verification:{oneOfinLineResources:["JavaScriptResource","ExecutableResource"],attributes:["vendor"]},UniversalAdId:{attributes:["idRegistry"]},JavaScriptResource:{attributes:["apiFramework","browserOptional"]},ExecutableResource:{attributes:["apiFramework","type"]},Tracking:{attributes:["event"]},Creatives:{subElements:["Creative"]},Creative:{subElements:["UniversalAdId"]},Linear:{subElements:["MediaFiles","Duration"]},MediaFiles:{subElements:["MediaFile"]},MediaFile:{attributes:["delivery","type","width","height"]},Mezzanine:{attributes:["delivery","type","width","height"]},NonLinear:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},Companion:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"],attributes:["width","height"]},StaticResource:{attributes:["creativeType"]},Icons:{subElements:["Icon"]},Icon:{oneOfinLineResources:["StaticResource","IFrameResource","HTMLResource"]}};function j(e,t){if(N[e.nodeName]&&N[e.nodeName].attributes){var n=N[e.nodeName].attributes.filter((function(t){return!e.getAttribute(t)}));n.length>0&&M({name:e.nodeName,parentName:e.parentNode.nodeName,attributes:n},t)}}function U(e,t,n){var r=N[e.nodeName],i=!n&&"Wrapper"!==e.nodeName;if(r&&!i){if(r.subElements){var o=r.subElements.filter((function(t){return!O.childByName(e,t)}));o.length>0&&M({name:e.nodeName,parentName:e.parentNode.nodeName,subElements:o},t)}n&&r.oneOfinLineResources&&(r.oneOfinLineResources.some((function(t){return O.childByName(e,t)}))||M({name:e.nodeName,parentName:e.parentNode.nodeName,oneOfResources:r.oneOfinLineResources},t))}}function V(e){return e.children&&0!==e.children.length}function M(e,t){var n=e.name,r=e.parentName,i=e.attributes,o=e.subElements,a=e.oneOfResources,s="Element '".concat(n,"'");t("VAST-warning",{message:s+=i?" missing required attribute(s) '".concat(i.join(", "),"' "):o?" missing required sub element(s) '".concat(o.join(", "),"' "):a?" must provide one of the following '".concat(a.join(", "),"' "):" is empty",parentElement:r,specVersion:4.1})}var F=function e(t,n,r){if(t&&t.nodeName)if("InLine"===t.nodeName&&(r=!0),j(t,n),V(t)){U(t,n,r);for(var i=0;i<t.children.length;i++)e(t.children[i],n,r)}else 0===O.parseNodeText(t).length&&M({name:t.nodeName,parentName:t.parentNode.nodeName},n)};function B(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.allowMultipleAds,i=n.followAdditionalWrappers,o=e.childNodes;for(var a in o){var s=o[a];if(-1!==["Wrapper","InLine"].indexOf(s.nodeName)&&("Wrapper"!==s.nodeName||!1!==i)){if(O.copyNodeAttribute("id",e,s),O.copyNodeAttribute("sequence",e,s),O.copyNodeAttribute("adType",e,s),"Wrapper"===s.nodeName)return{ad:W(s,t),type:"WRAPPER"};if("InLine"===s.nodeName)return{ad:q(s,t,{allowMultipleAds:r}),type:"INLINE"}}}}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.allowMultipleAds;return!1===r&&e.getAttribute("sequence")?null:H(e,t)}function H(e,t){var n=[];t&&F(e,t);var r=e.childNodes,i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id||null,sequence:e.sequence||null,adType:e.adType||null,adServingId:null,categories:[],expires:null,viewableImpression:[],system:null,title:null,description:null,advertiser:null,pricing:null,survey:null,errorURLTemplates:[],impressionURLTemplates:[],creatives:[],extensions:[],adVerifications:[],blockedAdCategories:[],followAdditionalWrappers:!0,allowMultipleAds:!1,fallbackOnNoAd:null}}(O.parseAttributes(e));for(var o in r){var a=r[o];switch(a.nodeName){case"Error":i.errorURLTemplates.push(O.parseNodeText(a));break;case"Impression":i.impressionURLTemplates.push({id:a.getAttribute("id")||null,url:O.parseNodeText(a)});break;case"Creatives":i.creatives=L(O.childrenByName(a,"Creative"));break;case"Extensions":var s=O.childrenByName(a,"Extension");i.extensions=R(s),i.adVerifications.length||(n=J(s));break;case"AdVerifications":i.adVerifications=G(O.childrenByName(a,"Verification"));break;case"AdSystem":i.system={value:O.parseNodeText(a),version:a.getAttribute("version")||null};break;case"AdTitle":i.title=O.parseNodeText(a);break;case"AdServingId":i.adServingId=O.parseNodeText(a);break;case"Category":i.categories.push({authority:a.getAttribute("authority")||null,value:O.parseNodeText(a)});break;case"Expires":i.expires=parseInt(O.parseNodeText(a),10);break;case"ViewableImpression":i.viewableImpression.push(Y(a));break;case"Description":i.description=O.parseNodeText(a);break;case"Advertiser":i.advertiser={id:a.getAttribute("id")||null,value:O.parseNodeText(a)};break;case"Pricing":i.pricing={value:O.parseNodeText(a),model:a.getAttribute("model")||null,currency:a.getAttribute("currency")||null};break;case"Survey":i.survey=O.parseNodeText(a);break;case"BlockedAdCategories":i.blockedAdCategories.push({authority:a.getAttribute("authority")||null,value:O.parseNodeText(a)})}}return n.length&&(i.adVerifications=i.adVerifications.concat(n)),i}function W(e,t){var n=H(e,t),r=e.getAttribute("followAdditionalWrappers"),i=e.getAttribute("allowMultipleAds"),o=e.getAttribute("fallbackOnNoAd");n.followAdditionalWrappers=!r||O.parseBoolean(r),n.allowMultipleAds=!!i&&O.parseBoolean(i),n.fallbackOnNoAd=o?O.parseBoolean(o):null;var a=O.childByName(e,"VASTAdTagURI");if(a?n.nextWrapperURL=O.parseNodeText(a):(a=O.childByName(e,"VASTAdTagURL"))&&(n.nextWrapperURL=O.parseNodeText(O.childByName(a,"URL"))),n.creatives.forEach((function(e){if(-1!==["linear","nonlinear"].indexOf(e.type)){if(e.trackingEvents){n.trackingEvents||(n.trackingEvents={}),n.trackingEvents[e.type]||(n.trackingEvents[e.type]={});var t=function(t){var r=e.trackingEvents[t];Array.isArray(n.trackingEvents[e.type][t])||(n.trackingEvents[e.type][t]=[]),r.forEach((function(r){n.trackingEvents[e.type][t].push(r)}))};for(var r in e.trackingEvents)t(r)}e.videoClickTrackingURLTemplates&&(Array.isArray(n.videoClickTrackingURLTemplates)||(n.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((function(e){n.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(n.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(Array.isArray(n.videoCustomClickURLTemplates)||(n.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((function(e){n.videoCustomClickURLTemplates.push(e)})))}})),n.nextWrapperURL)return n}function G(e){var t=[];return e.forEach((function(e){var n={resource:null,vendor:null,browserOptional:!1,apiFramework:null,type:null,parameters:null,trackingEvents:{}},r=e.childNodes;for(var i in O.assignAttributes(e.attributes,n),r){var o=r[i];switch(o.nodeName){case"JavaScriptResource":case"ExecutableResource":n.resource=O.parseNodeText(o),O.assignAttributes(o.attributes,n);break;case"VerificationParameters":n.parameters=O.parseNodeText(o)}}var a=O.childByName(e,"TrackingEvents");a&&O.childrenByName(a,"Tracking").forEach((function(e){var t=e.getAttribute("event"),r=O.parseNodeText(e);t&&r&&(Array.isArray(n.trackingEvents[t])||(n.trackingEvents[t]=[]),n.trackingEvents[t].push(r))})),t.push(n)})),t}function J(e){var t=null,n=[];return e.some((function(e){return t=O.childByName(e,"AdVerifications")})),t&&(n=G(O.childrenByName(t,"Verification"))),n}function Y(e){var t={};t.id=e.getAttribute("id")||null;var n=e.childNodes;for(var r in n){var i=n[r],o=i.nodeName,a=O.parseNodeText(i);if(("Viewable"===o||"NotViewable"===o||"ViewUndetermined"===o)&&a){var s=o.toLowerCase();Array.isArray(t[s])||(t[s]=[]),t[s].push(a)}}return t}var z=function(){function e(){i(this,e),this._handlers=[]}return a(e,[{key:"on",value:function(e,t){if("function"!=typeof t)throw new TypeError("The handler argument must be of type Function. Received type ".concat(r(t)));if(!e)throw new TypeError("The event argument must be of type String. Received type ".concat(r(e)));return this._handlers.push({event:e,handler:t}),this}},{key:"once",value:function(e,t){return this.on(e,function(e,t,n){var r={fired:!1,wrapFn:void 0};function i(){r.fired||(e.off(t,r.wrapFn),r.fired=!0,n.bind(e).apply(void 0,arguments))}return r.wrapFn=i,i}(this,e,t))}},{key:"off",value:function(e,t){return this._handlers=this._handlers.filter((function(n){return n.event!==e||n.handler!==t})),this}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=!1;return this._handlers.forEach((function(t){"*"===t.event&&(i=!0,t.handler.apply(t,[e].concat(n))),t.event===e&&(i=!0,t.handler.apply(t,n))})),i}},{key:"removeAllListeners",value:function(e){return e?(this._handlers=this._handlers.filter((function(t){return t.event!==e})),this):(this._handlers=[],this)}},{key:"listenerCount",value:function(e){return this._handlers.filter((function(t){return t.event===e})).length}},{key:"listeners",value:function(e){return this._handlers.reduce((function(t,n){return n.event===e&&t.push(n.handler),t}),[])}},{key:"eventNames",value:function(){return this._handlers.map((function(e){return e.event}))}}]),e}(),X=function(e,t,n){n(new Error("Please bundle the library for node to use the node urlHandler"))},K=12e4;function Q(){try{var e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return null}}function Z(e,t,n){var r=n?408:e.status,i=n?"XHRURLHandler: Request timed out after ".concat(e.timeout," ms (").concat(r,")"):"XHRURLHandler: ".concat(e.statusText," (").concat(r,")");t(new Error(i),null,{statusCode:r})}var $=function(e,t,n){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return n(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var r=Q();r.open("GET",e),r.timeout=t.timeout||K,r.withCredentials=t.withCredentials||!1,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.onload=function(){return function(e,t){200===e.status?t(null,e.responseXML,{byteLength:e.response.length,statusCode:e.status}):Z(e,t,!1)}(r,n)},r.onerror=function(){return Z(r,n,!1)},r.onabort=function(){return Z(r,n,!1)},r.ontimeout=function(){return Z(r,n,!0)},r.send()}catch(e){n(new Error("XHRURLHandler: Unexpected error"))}},ee=function(){return!!Q()},te={get:function(e,t,n){return n||("function"==typeof t&&(n=t),t={}),"undefined"==typeof window||null===window?X(e,t,n):ee()?$(e,t,n):n(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}},ne=0,re=0,ie=function(e,t){!e||!t||e<=0||t<=0||(re=(re*ne+8*e/t)/++ne)},oe={ERRORCODE:900,extensions:[]},ae=function(e){c(n,e);var t=p(n);function n(){var e;return i(this,n),(e=t.call(this)).remainingAds=[],e.parentURLs=[],e.errorURLTemplates=[],e.rootErrorURLTemplates=[],e.maxWrapperDepth=null,e.URLTemplateFilters=[],e.fetchingOptions={},e.parsingOptions={},e}return a(n,[{key:"addURLTemplateFilter",value:function(e){"function"==typeof e&&this.URLTemplateFilters.push(e)}},{key:"removeURLTemplateFilter",value:function(){this.URLTemplateFilters.pop()}},{key:"countURLTemplateFilters",value:function(){return this.URLTemplateFilters.length}},{key:"clearURLTemplateFilters",value:function(){this.URLTemplateFilters=[]}},{key:"trackVastError",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];this.emit("VAST-error",Object.assign.apply(Object,[{},oe,t].concat(r))),I.track(e,t)}},{key:"getErrorURLTemplates",value:function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)}},{key:"getEstimatedBitrate",value:function(){return re}},{key:"fetchVAST",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return new Promise((function(o,a){t.URLTemplateFilters.forEach((function(t){e=t(e)})),t.parentURLs.push(e);var s=Date.now();t.emit("VAST-resolving",{url:e,previousUrl:r,wrapperDepth:n,maxWrapperDepth:t.maxWrapperDepth,timeout:t.fetchingOptions.timeout,wrapperAd:i}),t.urlHandler.get(e,t.fetchingOptions,(function(i,c){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=Math.round(Date.now()-s),d=Object.assign({url:e,previousUrl:r,wrapperDepth:n,error:i,duration:l},u);t.emit("VAST-resolved",d),ie(u.byteLength,l),i?a(i):o(c)}))}))}},{key:"initParsingStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.errorURLTemplates=[],this.fetchingOptions={timeout:e.timeout||K,withCredentials:e.withCredentials},this.maxWrapperDepth=e.wrapperLimit||10,this.parentURLs=[],this.parsingOptions={allowMultipleAds:e.allowMultipleAds},this.remainingAds=[],this.rootErrorURLTemplates=[],this.rootURL="",this.urlHandler=e.urlHandler||e.urlhandler||te,this.vastVersion=null,ie(e.byteLength,e.requestDuration)}},{key:"getRemainingAds",value:function(e){var t=this;if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));var n=e?I.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(n,{wrapperDepth:0,url:this.rootURL}).then((function(e){return t.buildVASTResponse(e)}))}},{key:"getAndParseVAST",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(n),this.URLTemplateFilters.forEach((function(t){e=t(e)})),this.rootURL=e,this.fetchVAST(e).then((function(r){return n.previousUrl=e,n.isRootVAST=!0,n.url=e,t.parse(r,n).then((function(e){return t.buildVASTResponse(e)}))}))}},{key:"parseVAST",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.initParsingStatus(n),n.isRootVAST=!0,this.parse(e,n).then((function(e){return t.buildVASTResponse(e)}))}},{key:"buildVASTResponse",value:function(e){var t,n={ads:(t={ads:e,errorURLTemplates:this.getErrorURLTemplates(),version:this.vastVersion}).ads||[],errorURLTemplates:t.errorURLTemplates||[],version:t.version||null};return this.completeWrapperResolving(n),n}},{key:"parseVastXml",value:function(e,t){var n=t.isRootVAST,r=void 0!==n&&n,i=t.url,o=void 0===i?null:i,a=t.wrapperDepth,s=void 0===a?0:a,c=t.allowMultipleAds,u=t.followAdditionalWrappers;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)throw this.emit("VAST-ad-parsed",{type:"ERROR",url:o,wrapperDepth:s}),new Error("Invalid VAST XMLDocument");var l=[],d=e.documentElement.childNodes,p=e.documentElement.getAttribute("version");for(var f in r&&p&&(this.vastVersion=p),d){var h=d[f];if("Error"===h.nodeName){var v=O.parseNodeText(h);r?this.rootErrorURLTemplates.push(v):this.errorURLTemplates.push(v)}else if("Ad"===h.nodeName){if(this.vastVersion&&parseFloat(this.vastVersion)<3)c=!0;else if(!1===c&&l.length>1)break;var m=B(h,this.emit.bind(this),{allowMultipleAds:c,followAdditionalWrappers:u});m.ad?(l.push(m.ad),this.emit("VAST-ad-parsed",{type:m.type,url:o,wrapperDepth:s,adIndex:l.length-1,vastVersion:p})):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}return l}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.url,r=void 0===n?null:n,i=t.resolveAll,o=void 0===i||i,a=t.wrapperSequence,s=void 0===a?null:a,c=t.previousUrl,u=void 0===c?null:c,l=t.wrapperDepth,d=void 0===l?0:l,p=t.isRootVAST,f=void 0!==p&&p,h=t.followAdditionalWrappers,v=t.allowMultipleAds,m=[];this.vastVersion&&parseFloat(this.vastVersion)<3&&f&&(v=!0);try{m=this.parseVastXml(e,{isRootVAST:f,url:r,wrapperDepth:d,allowMultipleAds:v,followAdditionalWrappers:h})}catch(e){return Promise.reject(e)}return 1===m.length&&null!=s&&(m[0].sequence=s),!1===o&&(this.remainingAds=O.splitVAST(m),m=this.remainingAds.shift()),this.resolveAds(m,{wrapperDepth:d,previousUrl:u,url:r})}},{key:"resolveAds",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0,r=n.wrapperDepth,i=n.previousUrl,o=n.url,a=[];return i=o,t.forEach((function(t){var n=e.resolveWrappers(t,r,i);a.push(n)})),Promise.all(a).then((function(t){var n=I.flatten(t);if(!n&&e.remainingAds.length>0){var a=e.remainingAds.shift();return e.resolveAds(a,{wrapperDepth:r,previousUrl:i,url:o})}return n}))}},{key:"resolveWrappers",value:function(e,t,n){var r=this;return new Promise((function(i){var o;if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,i(e);if(t>=r.maxWrapperDepth||-1!==r.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,i(e);e.nextWrapperURL=O.resolveVastAdTagURI(e.nextWrapperURL,n),r.URLTemplateFilters.forEach((function(t){e.nextWrapperURL=t(e.nextWrapperURL)}));var a=null!==(o=r.parsingOptions.allowMultipleAds)&&void 0!==o?o:e.allowMultipleAds,s=e.sequence;r.fetchVAST(e.nextWrapperURL,t,n,e).then((function(o){return r.parse(o,{url:e.nextWrapperURL,previousUrl:n,wrapperSequence:s,wrapperDepth:t,followAdditionalWrappers:e.followAdditionalWrappers,allowMultipleAds:a}).then((function(t){if(delete e.nextWrapperURL,0===t.length)return e.creatives=[],i(e);t.forEach((function(t){t&&O.mergeWrapperAdData(t,e)})),i(t)}))})).catch((function(t){e.errorCode=301,e.errorMessage=t.message,i(e)}))}))}},{key:"completeWrapperResolving",value:function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;t>=0;t--){var n=e.ads[t];(n.errorCode||0===n.creatives.length)&&(this.trackVastError(n.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:n.errorCode||303},{ERRORMESSAGE:n.errorMessage||""},{extensions:n.extensions},{system:n.system}),e.ads.splice(t,1))}}}]),n}(z),se=null,ce={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete this.data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},ue=function(){function e(){i(this,e),this.storage=this.initStorage()}return a(e,[{key:"initStorage",value:function(){if(se)return se;try{se="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){se=null}return se&&!this.isStorageDisabled(se)||(se=ce).clear(),se}},{key:"isStorageDisabled",value:function(e){var t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1}},{key:"getItem",value:function(e){return this.storage.getItem(e)}},{key:"setItem",value:function(e,t){return this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){return this.storage.removeItem(e)}},{key:"clear",value:function(){return this.storage.clear()}}]),e}(),le=function(){function e(t,n,r){i(this,e),this.cappingFreeLunch=t||0,this.cappingMinimumTimeInterval=n||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new ae,this.storage=r||new ue,void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return a(e,[{key:"getParser",value:function(){return this.vastParser}},{key:"lastSuccessfulAd",get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)}},{key:"totalCalls",get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)}},{key:"totalCallsTimeout",get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)}},{key:"hasRemainingAds",value:function(){return this.vastParser.remainingAds.length>0}},{key:"getNextAds",value:function(e){return this.vastParser.getRemainingAds(e)}},{key:"get",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Date.now();return(n=Object.assign({},this.defaultOptions,n)).hasOwnProperty("resolveAll")||(n.resolveAll=!1),this.totalCallsTimeout<r?(this.totalCalls=1,this.totalCallsTimeout=r+36e5):this.totalCalls++,new Promise((function(i,o){if(t.cappingFreeLunch>=t.totalCalls)return o(new Error("VAST call canceled – FreeLunch capping not reached yet ".concat(t.totalCalls,"/").concat(t.cappingFreeLunch)));var a=r-t.lastSuccessfulAd;if(a<0)t.lastSuccessfulAd=0;else if(a<t.cappingMinimumTimeInterval)return o(new Error("VAST call canceled – (".concat(t.cappingMinimumTimeInterval,")ms minimum interval reached")));t.vastParser.getAndParseVAST(e,n).then((function(e){return i(e)})).catch((function(e){return o(e)}))}))}}]),e}(),de=function(e){c(o,e);var t=p(o);function o(e,n,r){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(var c in i(this,o),(a=t.call(this)).ad=n,a.creative=r,a.variation=s,a.muted=!1,a.impressed=!1,a.skippable=!1,a.trackingEvents={},a.lastPercentage=0,a._alreadyTriggeredQuartiles={},a.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],a.creative.trackingEvents){var u=a.creative.trackingEvents[c];a.trackingEvents[c]=u.slice(0)}return k(a.creative)?a._initLinearTracking():a._initVariationTracking(),e&&a.on("start",(function(){e.lastSuccessfulAd=Date.now()})),a}return a(o,[{key:"_initLinearTracking",value:function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates}},{key:"_initVariationTracking",value:function(){if(this.linear=!1,this.skipDelay=-1,this.variation){for(var e in this.variation.trackingEvents){var t=this.variation.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(t.slice(0)):this.trackingEvents[e]=t.slice(0)}"nonLinearAd"===this.variation.adType?(this.clickThroughURLTemplate=this.variation.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.nonlinearClickTrackingURLTemplates,this.setDuration(this.variation.minSuggestedDuration)):function(e){return"companionAd"===e.adType}(this.variation)&&(this.clickThroughURLTemplate=this.variation.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=this.variation.companionClickTrackingURLTemplates)}}},{key:"setDuration",value:function(e){I.isValidTimeValue(e)&&(this.assetDuration=e,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100})}},{key:"setProgress",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(I.isValidTimeValue(e)&&"object"===r(n)){var i=this.skipDelay||-1;if(-1===i||this.skippable||(i>e?this.emit("skip-countdown",i-e):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var o=Math.round(e/this.assetDuration*100),a=[];if(e>0){a.push("start");for(var s=this.lastPercentage;s<o;s++)a.push("progress-".concat(s+1,"%"));for(var c in a.push("progress-".concat(Math.round(e))),this.quartiles)this.isQuartileReached(c,this.quartiles[c],e)&&(a.push(c),this._alreadyTriggeredQuartiles[c]=!0);this.lastPercentage=o}a.forEach((function(e){t.track(e,{macros:n,once:!0})})),e<this.progress&&this.track("rewind",{macros:n})}this.progress=e}}},{key:"isQuartileReached",value:function(e,t,n){var r=!1;return t<=n&&!this._alreadyTriggeredQuartiles[e]&&(r=!0),r}},{key:"setMuted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===r(t)&&(this.muted!==e&&this.track(e?"mute":"unmute",{macros:t}),this.muted=e)}},{key:"setPaused",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===r(t)&&(this.paused!==e&&this.track(e?"pause":"resume",{macros:t}),this.paused=e)}},{key:"setFullscreen",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===r(t)&&(this.fullscreen!==e&&this.track(e?"fullscreen":"exitFullscreen",{macros:t}),this.fullscreen=e)}},{key:"setExpand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"boolean"==typeof e&&"object"===r(t)&&(this.expanded!==e&&(this.track(e?"expand":"collapse",{macros:t}),this.track(e?"playerExpand":"playerCollapse",{macros:t})),this.expanded=e)}},{key:"setSkipDelay",value:function(e){I.isValidTimeValue(e)&&(this.skipDelay=e)}},{key:"trackImpression",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&(this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates,e),this.track("creativeView",{macros:e})))}},{key:"error",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"object"===r(e)&&"boolean"==typeof t&&this.trackURLs(this.ad.errorURLTemplates,e,{isCustomCode:t})}},{key:"errorWithCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];"string"==typeof e&&"boolean"==typeof t&&(this.error({ERRORCODE:e},t),console.log("The method errorWithCode is deprecated, please use vast tracker error method instead"))}},{key:"complete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("complete",{macros:e})}},{key:"notUsed",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&(this.track("notUsed",{macros:e}),this.trackingEvents=[])}},{key:"otherAdInteraction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("otherAdInteraction",{macros:e})}},{key:"acceptInvitation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("acceptInvitation",{macros:e})}},{key:"adExpand",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("adExpand",{macros:e})}},{key:"adCollapse",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("adCollapse",{macros:e})}},{key:"minimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("minimize",{macros:e})}},{key:"verificationNotExecuted",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("string"==typeof e&&"object"===r(t)){if(!this.ad||!this.ad.adVerifications||!this.ad.adVerifications.length)throw new Error("No adVerifications provided");if(!e)throw new Error("No vendor provided, unable to find associated verificationNotExecuted");var n=this.ad.adVerifications.find((function(t){return t.vendor===e}));if(!n)throw new Error("No associated verification element found for vendor: ".concat(e));var i=n.trackingEvents;if(i&&i.verificationNotExecuted){var o=i.verificationNotExecuted;this.trackURLs(o,t),this.emit("verificationNotExecuted",{trackingURLTemplates:o})}}}},{key:"overlayViewDuration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof e&&"object"===r(t)&&(t.ADPLAYHEAD=e,this.track("overlayViewDuration",{macros:t}))}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track(this.linear?"closeLinear":"close",{macros:e})}},{key:"skip",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("skip",{macros:e})}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"===r(e)&&this.track("loaded",{macros:e})}},{key:"click",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((null===e||"string"==typeof e)&&"object"===r(t)){this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates,t);var i=this.clickThroughURLTemplate||e,o=n({},t);if(i){this.progress&&(o.ADPLAYHEAD=this.progressFormatted());var a=I.resolveURLTemplates([i],o)[0];this.emit("clickthrough",a)}}}},{key:"track",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.macros,i=void 0===n?{}:n,o=t.once,a=void 0!==o&&o;if("object"===r(i)){"closeLinear"===e&&!this.trackingEvents[e]&&this.trackingEvents.close&&(e="close");var s=this.trackingEvents[e],c=this.emitAlwaysEvents.indexOf(e)>-1;s?(this.emit(e,{trackingURLTemplates:s}),this.trackURLs(s,i)):c&&this.emit(e,null),a&&(delete this.trackingEvents[e],c&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(e),1))}}},{key:"trackURLs",value:function(e){var t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n({},i);this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(a.ASSETURI=this.creative.mediaFiles[0].fileURL),this.progress&&(a.ADPLAYHEAD=this.progressFormatted())),null!==(t=this.creative)&&void 0!==t&&null!==(r=t.universalAdIds)&&void 0!==r&&r.length&&(a.UNIVERSALADID=this.creative.universalAdIds.map((function(e){return e.idRegistry.concat(" ",e.value)})).join(",")),this.ad&&(this.ad.sequence&&(a.PODSEQUENCE=this.ad.sequence),this.ad.adType&&(a.ADTYPE=this.ad.adType),this.ad.adServingId&&(a.ADSERVINGID=this.ad.adServingId),this.ad.categories&&this.ad.categories.length&&(a.ADCATEGORIES=this.ad.categories.map((function(e){return e.value})).join(",")),this.ad.blockedAdCategories&&this.ad.blockedAdCategories.length&&(a.BLOCKEDADCATEGORIES=this.ad.blockedAdCategories)),I.track(e,a,o)}},{key:"convertToTimecode",value:function(e){if(!I.isValidTimeValue(e))return"";var t=1e3*e,n=Math.floor(t/36e5),r=Math.floor(t/6e4%60),i=Math.floor(t/1e3%60),o=Math.floor(t%1e3);return"".concat(I.addLeadingZeros(n,2),":").concat(I.addLeadingZeros(r,2),":").concat(I.addLeadingZeros(i,2),".").concat(I.addLeadingZeros(o,3))}},{key:"progressFormatted",value:function(){return this.convertToTimecode(this.progress)}}]),o}(z);e.VASTClient=le,e.VASTParser=ae,e.VASTTracker=de,Object.defineProperty(e,"__esModule",{value:!0})}(t)},57:function(e,t){t.getDeviceInfo=function(){var e,t,n={os:"",osv:"0",make:"",model:"",mobile:!1};try{(e=navigator.userAgent)||(e=window.navigator.userAgent)}catch(t){e=window.navigator.userAgent}if(/iPod/i.test(e))n.os="iOS",n.osv=(e.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,"."),n.make="Apple",n.model="iPod",n.mobile=!0;else if(/iPhone/i.test(e))n.os="iOS",n.osv=(e.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,"."),n.make="Apple",n.model="iPhone",n.mobile=!0;else if(/iPad/i.test(e))n.os="iOS",n.osv=(e.match(/\b[0-9]+_[0-9]+(?:_[0-9]+)?\b/)||[""])[0].replace(/_/g,"."),n.make="Apple",n.model="iPad",n.mobile=!0;else if(/Android/i.test(e)){if(n.os="Android",n.mobile=!0,t=/\Android.([\d\.]+).*;\s(\w*;\s)?(.*)\sBuild.*\)/i.exec(e)){n.osv=t[1]||"0";var r=t[3]||"";/HTC/i.test(r)?(n.make="HTC",t=/HTC\s(.*)/i.exec(r),n.model=t?t[1]:""):/ASUS/i.test(r)?(n.make="ASUS",t=/ASUS\s(.*)/i.exec(r),n.model=t?t[1]:""):/ALCATEL/i.test(r)?(n.make="ALCATEL",t=/ALCATEL\s(.*)/i.exec(r),n.model=t?t[1]:""):/BLU/i.test(r)?(n.make="BLU",t=/BLU\s(.*)/i.exec(r),n.model=t?t[1]:""):/ME17\d/i.test(r)?(n.make="ASUS",n.model=r):/Nexus/i.test(r)?(n.make="Google",n.model=r):/Lenovo/i.test(r)?(n.make="Lenovo",/Lenovo\s(.*)/i):/IdeaTab/i.test(r)?(n.make="Lenovo",n.model=r):/Huawei/i.test(e)?(n.make="Huawei",n.model=r):/SGP\d/i.test(r)||/LT[1-9]\d/i.test(r)?(n.make="Sony",n.model=r):/HP/i.test(r)?(n.make="HP",t=/HP\s(.*)/i.exec(r),n.model=t?t[1]:""):/A1-/i.test(r)||/B11-/i.test(r)?(n.make="Acer",n.model=r):/GT-/i.test(r)?(n.make="Samsung",t=/(GT-.*)/i.exec(r),n.model=t?t[1]:""):/SM-/i.test(r)?(n.make="Samsung",t=/(SM-.*)/i.exec(r),n.model=t?t[1]:""):/SPH-/i.test(r)?(n.make="Samsung",t=/(SPH-.*)/i.exec(r),n.model=t?t[1]:""):/SCH-/i.test(r)?(n.make="Samsung",t=/(SCH-.*)/i.exec(r),n.model=t?t[1]:""):/SGH-/i.test(r)?(n.make="Samsung",t=/(SGH-.*)/i.exec(r),n.model=t?t[1]:""):/DROID/i.test(r)?(n.make="Motorola",t=/(DROID.*)/i.exec(r),n.model=t?t[1]:""):/XT/i.test(r)?(n.make="Motorola",t=/(XT.*)/i.exec(r),n.model=t?t[1]:""):/LG-/i.test(r)?(n.make="LG",t=/(LG-.*)/i.exec(r),n.model=t?t[1]:""):/VS/i.test(r)?(n.make="LG",t=/(VS.*)/i.exec(r),n.model=t?t[1]:""):/Z[1-9]/i.test(r)?(n.make="ZTE",t=/(Z[1-9].*)/i.exec(r),n.model=t?t[1]:""):/NX[1-9]/i.test(r)?(n.make="NEXTBOOK",t=/(NX[1-9].*)/i.exec(r),n.model=t?t[1]:""):/C5[1-9]/i.test(r)?(n.make="Kyocera",t=/(C5[1-9].*)/i.exec(r),n.model=t?t[1]:""):n.model=r}}else/Windows.Phone/i.test(e)||/WPDesktop/i.test(e)?(n.os="WindowsPhone",n.osv=(e.match(/Windows.Phone\s([0-9]+\.[0-9])/)||[""])[1]||8,n.mobile=!0,/NOKIA/i.test(e)&&(n.make="Nokia",t=/NOKIA;\s(.*?)(;|\))/i.exec(e),n.model=t?t[1]:"")):/BlackBerry/i.test(e)||navigator.userAgent.match(/BB10/i)?(n.os="BlackBerry",e.indexOf("Version/")>=0?(t=/Version\/(.*?)\s/i.exec(e),n.osv=t?t[1]:""):(t=/BlackBerry.*\/(.*?)\s/i.exec(e),n.osv=t?t[1]:""),n.mobile=!0):/Windows/i.test(e)?(n.os="Windows",t=/Windows\sNT\s(.*?)(;|\)|\s)/i.exec(e),n.osv=t?t[1]:""):/Mac\sOS/i.test(e)&&(n.os="MacOS",t=/Mac\sOS\sX\s(.*?)(;|\)|\s)/i.exec(e),n.osv=t?t[1]:"");return n}},8:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n}});