(self.webpackChunktama_web=self.webpackChunktama_web||[]).push([[272],{28554:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:);var r,o,a=n(3e4),i=n(15329),c=n(41185),m=n(66062),s=n(76955),l=n(9580),u=n.n(l),f=n(55752),d=n.n(f),g=n(66948),p=n(97175),h=n(45525),b=n(51650),_=n(78168),y=n(19008),v=n(37111),x=n(36616),T=n(44909),C=n(70317),k=n(73614),E=n(9263),w=n(67492),O=n(90926),N=(n(91938),n(17828)),S=n(59226),M=n.n(S),P=n(85819),I=n(5563),L=n(48516),j=n(7216),A=n(64177),Z=n(73052),F=n(32019),B=n(20777),R=n(76030),D=n(79917),H=n.n(D),U=function(e){var{amebloOneTimeToken:t,canCommentMemberOnly:n,commentErrorMessage:i,commentNameErrorMessage:c,commentNameFilterError:m,commentNameKey:l,commentNameLength:u,commentNameMaxLength:f,commentTextErrorMessage:d,commentTextFilterError:g,commentTextKey:p,commentTextLength:h,commentTextMaxLength:b,defaultCommentName:_,defaultCommentText:y,isAmemberEntry:v,isLoggedIn:x,isPostedComment:T,profileImageUrl:C,profileNickname:k}=e,E=(0,P.I)(),[w,O]=(0,s.useState)(y),[S,D]=(0,s.useState)(_),[U,z]=(0,s.useState)(!1),[Y,K]=(0,s.useState)(!1),[G,q]=(0,s.useState)(!1),[J,X]=(0,s.useState)(!1),[Q,V]=(0,s.useState)(!1),[$,W]=(0,s.useState)(!1),[ee,te]=(0,s.useState)(!1);(0,s.useEffect)((()=>{Q&&(m||g)&&te(!0)}),[m,g,Q]);var ne,re=(0,s.useCallback)((()=>{z(""!==w),q(!1)}),[w,z,q]),oe=(0,s.useCallback)((()=>{K(""!==S),X(!1)}),[S,K,X]),ae=(0,s.useCallback)((t=>{O(t.target.value),e.onChangeText(t)}),[e.onChangeText,O]),ie=(0,s.useCallback)((t=>{D(t.target.value),e.onChangeName(t)}),[e.onChangeName,D]),ce=(0,s.useCallback)((()=>{q(!0)}),[q]),me=(0,s.useCallback)((,[X]),se=(0,s.useCallback)((e=>{e&&e.style.setProperty("--max-height","".concat(e.clientHeight,"px"))})),le=(0,s.useCallback)((e=>{e&&e.style.setProperty("--max-height","".concat(e.scrollHeight,"px"))})),ue=m||g,fe=ue?"comment_violation_dialog":"comment_first_dialog",de=(0,s.useCallback)((()=>{W(!0),E((0,I.iG)({sectionId:fe}))}),[W]),ge=(0,s.useCallback)((()=>{W(!1),V(!0),e.onClickSend(),E((0,I.XI)({sectionId:fe}))}),[e.onClickSend,V,W]),pe=(0,s.useCallback)((,[te,W]),he=(0,s.useCallback)((,[e.onClickSend,V]),be=(0,s.useCallback)((()=>{te(!1),E((0,I.XI)({sectionId:fe}))}),[te]);ne=x?""!==d||h<=0:""!==c||u<=0||""!==d||h<=0;var _e=U||Y||G||J,ye={enter:H().TransitionEnter,enterActive:H().TransitionEnterActive,enterDone:H().TransitionEnterDone,exit:H().TransitionExit,exitActive:H().TransitionExitActive,exitDone:H().TransitionExitDone},ve="comment";return v?null:(0,a.Z)("section",{className:H().SpEntryPostCommentBlock},void 0,n&&!x?(0,a.Z)(F.x,{amebloOneTimeToken:t,pageType:"Comment"}):(0,a.Z)(s.Fragment,{},void 0,(0,a.Z)("div",{className:H().ProfileBlock},void 0,(0,a.Z)("label",{className:H().LabelBlock,htmlFor:ve},void 0,(0,a.Z)(B.v,{imageUrl:C,nickname:k}),(0,a.Z)("span",{className:H().Comment},void 0,"\u30b3\u30e1\u30f3\u30c8",!x&&(0,a.Z)("span",{className:H().Required},void 0,r||(r=(0,a.Z)("span",{"aria-hidden":"true"},void 0,"*")),"\u5fc5\u9808"))),!x&&(0,a.Z)(L.Z,{className:H().LoginLink,targetUrl:"".concat(window.process.env.HTTP_PATH_BLOG_AMEBA,"/ucs/logininput.do")},void 0,"\u30ed\u30b0\u30a4\u30f3",(0,a.Z)(M(),{"aria-hidden":!0,className:H().LoginIcon}))),(0,a.Z)(R.F,{className:H().SpEntryCommentTextArea,currentLength:h,defaultValue:y,errorMessage:d,filterError:g,maxLength:b,placeholder:"\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u304f",textareaId:ve,onBlur:re,onChange:ae,onFocus:ce},p),(0,a.Z)("noscript",{},void 0,(0,a.Z)("p",{className:H().NoScriptNotice},void 0,"\u30b3\u30e1\u30f3\u30c8\u3092\u66f8\u304f\u306b\u306f\u7aef\u672b\u306eJavaScript\u3092\u30aa\u30f3\u306b\u8a2d\u5b9a\u3057\u3066\u304f\u3060\u3055\u3044")),(0,a.Z)(N.Z,{classNames:ye,in:_e,timeout:400,onEnter:se,onEntering:le},void 0,(0,a.Z)("div",{className:H().TransitionBlock},void 0,!x&&(0,a.Z)(Z.X,{className:H().SpEntryCommentInput,currentLength:u,defaultValue:_,errorMessage:c,filterError:m,maxLength:f,placeholder:"\u304a\u540d\u524d\u3092\u5165\u529b",visibleRequired:_e,onBlur:oe,onChange:ie,onFocus:me},l),""!==i&&!ue&&(0,a.Z)("p",{"aria-live":"polite",className:H().CommentErrorMessage,role:"alert"},void 0,o||(o=(0,a.Z)("span",{"aria-hidden":"true"},void 0,"*")),i),!x&&(0,a.Z)("div",{className:H().TermsBlock},void 0,(0,a.Z)("a",{className:H().TermsLink,href:"https://helps.ameba.jp/rules/post_104.html"},void 0,"\u5229\u7528\u898f\u7d04"),"\u306b\u540c\u610f\u3057\u3066\u9001\u4fe1\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044"),(0,a.Z)("div",{className:H().SendButtonBlock},void 0,(0,a.Z)("button",{className:H().SendButton,disabled:ne,type:"button",onClick:T?he:de},void 0,"\u9001\u4fe1")))),(0,a.Z)(j.Z,{contentLabel:"\u30b3\u30e1\u30f3\u30c8\u6295\u7a3f\u306b\u95a2\u3059\u308b\u30c0\u30a4\u30a2\u30ed\u30b0",formContent:(0,a.Z)(s.Fragment,{},void 0,(0,a.Z)("div",{className:H().Button},void 0,(0,a.Z)(A.ZP,{appearance:A.OR.PRIMARY,label:ue?"\u30b3\u30e1\u30f3\u30c8\u753b\u9762\u306b\u623b\u308b":"\u3053\u306e\u307e\u307e\u9001\u4fe1\u3059\u308b",roundness:A.a6.MAX,onClick:ue?be:ge})),!ue&&(0,a.Z)("div",{className:H().Button},void 0,(0,a.Z)(A.ZP,{appearance:A.OR.SECONDARY,label:"\u30ad\u30e3\u30f3\u30bb\u30eb",roundness:A.a6.MAX,onClick:pe}))),heading:"\u76f8\u624b\u306e\u6c17\u6301\u3061\u306b\u5bc4\u308a\u6dfb\u3063\u305f\u30b3\u30e1\u30f3\u30c8\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304b\uff1f",isOpen:$||ee,mainContent:"\u30b3\u30e1\u30f3\u30c8\u3092\u898b\u8fd4\u3059\u3088\u3046\u3054\u5354\u529b\u304a\u9858\u3044\u3057\u307e\u3059",onRequestClose:pe})))};U.defaultProps={amebloOneTimeToken:"",canCommentMemberOnly:!1,commentErrorMessage:"",commentNameErrorMessage:"",commentNameFilterError:!1,commentNameLength:0,commentTextErrorMessage:"",commentTextFilterError:!1,commentTextLength:0,defaultCommentName:"",defaultCommentText:"",profileImageUrl:"",isPostedComment:!1};var z=s.memo(U);nction G(){return(G=(0,m.Z)((function*(e){var{dispatch:t,getState:n}=e;yield t((0,O.h$)());var r=d()(n(),["userState","sessionUser","amebaId"],"");(0,x.t)(r)&&(yield t((0,k.Rs)(r)))}))).apply(this,arguments)}var q=s.memo((function(e){var{amebloOneTimeToken:t,canCommentMemberOnly:n,commentErrorMessage:r,commentNameErrorMessage:o,commentNameFilterError:i,commentNameKey:c,commentNameLength:m,commentTextErrorMessage:l,commentTextFilterError:u,commentTextKey:f,commentTextLength:d,isAmemberEntry:g,isLoggedIn:p,isPostedComment:h,profileImageUrl:b,profileNickname:_,onChangeName:v,onChangeText:x,onClickSend:C}=e;return(0,s.useEffect)((()=>{"undefined"==typeof grecaptcha&&(0,y.v)("https://www.google.com/recaptcha/enterprise.js?render=".concat(window.process.env.RECAPTCHA_V3_SITE_KEY))})),(0,a.Z)(z,{amebloOneTimeToken:t,canCommentMemberOnly:n,commentErrorMessage:r,commentNameErrorMessage:o,commentNameFilterError:i,commentNameKey:c,commentNameLength:m,commentNameMaxLength:T.xq,commentTextErrorMessage:l,commentTextFilterError:u,commentTextKey:f,commentTextLength:d,commentTextMaxLength:T.lL,isAmemberEntry:g,isLoggedIn:p,isPostedComment:h,profileImageUrl:b,profileNickname:_,onChangeName:v,onChangeText:x,onClickSend:C})})),J=(0,_.ee)((0,h.w1)(H()),(0,p.provideHooks)({done:function(e){return G.apply(this,arguments)}}),(0,g.$j)((function(e,t){var{match:n}=t,{amebaId:r,entryId:o}=n.params||{},a=d()(e,["bloggerState","bloggerMap",r,"blog"],""),i="ameba_only"===d()(e,["bloggerState","blogMap",a,"deny_comment"],""),{commentName:c,commentNameErrorMessage:m,commentNameFilterError:s,commentNameKey:l,commentNameLength:u,commentText:f,commentTextErrorMessage:g,commentTextFilterError:p,commentTextKey:h,commentTextLength:b,commentErrorMessage:_}=d()(e,["commentState","componentState"],{}),y=(0,C.jl)(e),v=y?d()(e,["amebloTokenState","amebloToken"],""):"",x=d()(e,["amebloTokenState","amebloOneTimeToken"],""),T=d()(e,["userState","sessionUser","amebaId"],""),k=d()(e,["bloggerState","bloggerMap",T],{}),E=d()(k,["profile","image_filepath"],""),w=d()(k,["profile","nickname"],""),O=d()(e,["bloggerState","bloggerMap",r,"image_auth","comment_image_auth"],!0),N="amember"===d()(e,["entryState","entryMap",o,"publish_flg"],""),S=null;try{S="undefined"!=typeof window&&JSON.parse(window.localStorage.getItem("posted_comment"))}catch(M){console.error(M),S=!1}return K(K({},{amebaId:r,amebloToken:v,commentName:c,commentText:f,entryId:o,isRequiredImageAuth:O,sessionUserAmebaId:T,sessionUserNickname:w}),{},{amebloOneTimeToken:x,canCommentMemberOnly:i,commentErrorMessage:_,commentName:c,commentNameErrorMessage:m,commentNameFilterError:s,commentNameKey:l,commentNameLength:u,commentText:f,commentTextErrorMessage:g,commentTextFilterError:p,commentTextKey:h,commentTextLength:b,isAmemberEntry:N,isLoggedIn:y,isPostedComment:S,profileImageUrl:E,profileNickname:w})}),(function(e,t){var{match:n}=t;return{baseOnChangeName(t){e((0,E.M8)(t))},baseOnChangeTextbaseOnClickSend:function(){var t=(0,m.Z)((function*(t){if(t.clearComment&&(yield e((0,E.dY)())),!(yield e((0,E.CF)(t))).error){var{amebaId:r,entryId:o}=n.params;yield e((0,w.B)("\u30b3\u30e1\u30f3\u30c8\u3092\u9001\u4fe1\u3057\u307e\u3057\u305f")),yield new Promise((),yield e((0,w.i)()),window.location.pathname="/".concat(r,"/comment-").concat(o,"/")}}));return ()}}),(function(e,t,n){var{amebaId:r,amebloToken:o,entryId:a,isLoggedIn:c,isPostedComment:s,isRequiredImageAuth:l,sessionUserAmebaId:f,sessionUserNickname:d,commentTextFilterError:g,commentNameFilterError:p}=e,{baseOnChangeName:h,baseOnChangeText:b,baseOnClickSend:_}=t,y=(0,i.Z)(t,["baseOnChangeName","baseOnChangeText","baseOnClickSend"]);return K(K(K(K({},n),e),y),{},{commentName:c?d:e.commentName,onChangeName(t){var n=t.target.value;h({commentName:n,commentText:e.commentText})},onChangeText(t){var n=t.target.value;b({commentName:e.commentName,commentText:n})},onClickSend:u()((0,m.Z)((function*(){var e={amebaId:r,amebloToken:o,entryId:a,sessionUserNickname:d,enableFiltering:!0};if(!s)try{window.localStorage.setItem("posted_comment",!0)}catch(n){console.error(n)}if(c&&f&&(e.sessionUserAmebaId=f),(g||p)&&(e.clearComment=g||p),l){if("undefined"==typeof grecaptcha)return;yield new Promise(();var t=yield window.grecaptcha.enterprise.execute(window.process.env.RECAPTCHA_V3_SITE_KEY,{action:"homepage"});e.recaptchaToken=t}_(e)})),500)})})),(0,b.lB)(["match","location"]))(q)},59226:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,o)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&o(t,e,n);return a(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(76955));t.default=function(e){return c.createElement("svg",r({xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"currentColor",role:"img"},e),c.createElement("path",{d:"M9.41 21c-.26 0-.51-.1-.71-.29a.996.996 0 0 1 0-1.41L16 12 8.71 4.71a.996.996 0 1 1 1.41-1.41l7.29 7.29c.78.78.78 2.05 0 2.83l-7.29 7.29c-.19.19-.45.29-.71.29Z"}))}},1558:function(e,t,n){"use strict";var r=this&&this.__assign||o=this&&this.__createBinding||(Object.create?,a=this&&this.__setModuleDefault||(Object.create?,i=this&&this.__importStar||Object.defineProperty(t,"__esModule",{value:!0});var c=i(n(76955));t.default=,4705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((0,a.isAsync)(e))return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n.pop(),a=e.apply(this,n);return c(a,o)};return(0,r.default)(()};var r=i(n(30060)),o=i(n(54942)),a=n(77190);xports=t.default},30060:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=n.pop();return e.call(this,n,o)}},e.exports=t.default},55380:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Symbol("promiseCallback");t.promiseCallback=function(){var e,t;function r(n){if(n)return t(n);for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];e(o.length>1?o:o[0])}return r[n]=new Promise((),r},t.PROMISE_SYMBOL=n},54942:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fallback=a,t.wrap=i;var n,r=t.hasSetImmediate="function"==typeof setImmediate&&setImmediate,o=t.hasNextTick="object"==typeof process&&"function"==typeof process.nextTick;unction i(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return e(()}}n=r?setImmediate:o?process.nextTick:a,t.default=i(n)},77190:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncIterable=t.isAsyncGenerator=t.isAsync=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(4705));.default=t.isAsync=o,t.isAsyncGenerator=t.isAsyncIterable=,92189:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var c={times:5,intervalFunc:a(0)};arguments.length<3&&"function"==typeof e?(n=t||(0,o.promiseCallback)(),t=e):(i(c,e),n=n||(0,o.promiseCallback)());if("function"!=typeof t)throw new Error("Invalid arguments for async.retry");var m=(0,r.default)(t),s=1;function l(){m((function(e){if(!1!==e)if(e&&s++<c.times&&("function"!=typeof c.errorFilter||c.errorFilter(e)))setTimeout(l,c.intervalFunc(s-1));else{for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];n(e,...r)}}))}return l(),n[o.PROMISE_SYMBOL]};var r=n(77190)),o=n(55380);unction i(e,t){if("object"==typeof t)e.times=+t.times||5,e.intervalFunc="function"==typeof t.interval?t.interval:a(+t.interval||0),e.errorFilter=t.errorFilter;else{if("number"!=typeof t&&"string"!=typeof t)throw new Error("Invalid arguments for async.retry");e.times=+t||5}}e.exports=t.default},9580:71715:(e,t,n)=>{var r=n(18300),o=n(2966),a=r(();a.i(o,"",!0),a.push([e.id,"._2c9xCLzN{background-color:#fff;padding:8px 16px 24px}._2LJ51Hv4{flex-direction:row;justify-content:space-between}._2kyHz2xn,._2LJ51Hv4{align-items:center;display:flex}._2kyHz2xn{color:#333;flex-grow:1;font-size:16px}._ngUgPY3e,._2lCUwmg_{margin-left:8px}._2lCUwmg_{color:#757575;font-size:12px}._2l5HPOct:link,._2l5HPOct:visited{align-items:center;color:#2d8c3c;display:flex;font-size:12px;font-weight:700}._2ErQ5i7s{margin-left:4px}._2I_oCl1v{align-items:center;color:#333;display:flex;font-size:16px;margin-bottom:16px;margin-top:24px}._Enp_X6PR{font-size:20px;margin-right:8px}._Y0zfhE2G{margin-top:8px}._3g6b-1G-{line-height:1.4}._3wHNe8kL,._3g6b-1G-{color:#f24c3b;font-size:12px;font-weight:700}._3wHNe8kL{margin-top:8px;text-align:left}._1w-AOGca{--max-height:none;max-height:0;overflow:hidden;transition:max-height .2s ease 0s}@media (prefers-reduced-motion:reduce){._1w-AOGca{transition-duration:0s}}._2VAcTL3j{max-height:0}._1RDCqY_T{max-height:var(--max-height)}._1X4Sg4a5{max-height:none;overflow:scroll}._2mInAzyI{max-height:var(--max-height)}._1QrCendp,._38iY2omF{max-height:0}._3LiKFRjJ,._SRQfZ9lo{margin-top:24px}._SRQfZ9lo{color:#757575;font-size:12px;text-align:center}._1oFfHmMu{color:#757575;text-decoration:underline}._2-6xJOmP{margin-top:16px;padding:0 64px}._-_7jMj8_{background-color:#2d8c3c;border-radius:40px;box-sizing:border-box;color:#fff;display:block;font-weight:700;margin:0 auto;padding:16px 0;transition:background-color .2s ease 0s;width:100%}@media (prefers-reduced-motion:reduce){._-_7jMj8_{transition-duration:0s}}._-_7jMj8_[disabled]{background-color:#aaa}._3nx5Dnr4{}._3nx5Dnr4+._3nx5Dnr4{margin-top:-8px}._3nx5Dnr4:last-child{margin-bottom:0}",""]),a.locals={SpEntryPostCommentBlock:"_2c9xCLzN",ProfileBlock:"_2LJ51Hv4",LabelBlock:"_2kyHz2xn",Comment:"_ngUgPY3e",Required:"_2lCUwmg_",LoginLink:"_2l5HPOct",LoginIcon:"_2ErQ5i7s",ReplyBlock:"_2I_oCl1v",ReplyIcon:"_Enp_X6PR",SpEntryCommentTextArea:"_Y0zfhE2G",NoScriptNotice:"_3g6b-1G-",CommentErrorMessage:"_3wHNe8kL",TransitionBlock:"_1w-AOGca",TransitionEnter:"_2VAcTL3j",TransitionEnterActive:"_1RDCqY_T",TransitionEnterDone:"_1X4Sg4a5",TransitionExit:"_2mInAzyI",TransitionExitActive:"_1QrCendp",TransitionExitDone:"_38iY2omF",SpEntryCommentInput:"_3LiKFRjJ",TermsBlock:"_SRQfZ9lo",TermsLink:"_1oFfHmMu",SendButtonBlock:"_2-6xJOmP",SendButton:"_-_7jMj8_",Button:"_3nx5Dnr4 "+o.locals.FormContent},e.exports=a},79917:(e,t,n)=>{var r=n(71715),o=Object.assign||a=Object.defineProperty||"string"==typeof r&&(r=[[e.id,r,""]]),e.exports=function(e){var t=o({},e.locals||{});return a(t,"_",{value:),a(t,"toString",{value:function(){return"function"==typeof e.toString?e.toString():""}}),t}(r)}}]);