(self.webpackChunktama_web=self.webpackChunktama_web||[]).push([[8627],{21662:(e,t,r)=>{"use strict";r.d(t,{sU:()=>c});var n=r(66062),a=r(55752),o=r.n(a),i=r(18274);var l=r(61850),c=(0,i.H)({ttl:3e5},((e,t)=>function(){var r=(0,n.Z)((function*(r,n){if(o()(n(),["cheerEntryState","cheerEntryMap",t],null))return null;try{var a=yield function(e,t){var r="".concat(window.process.env.API_CHEER,"/api/blogs/").concat(e,"/entries/").concat(t,"/bottom-module");return fetch(r,{mode:"cors"})}(e,t);if(!a.ok)throw new Error(yield a.text());return r(((e,t)=>({type:l.g,payload:{entryId:t,data:e}}))((yield a.json())||{},t))}catch(i){return r((e=>({type:l.v,payload:{error:e},error:!0}))(i))}}));return function(e,t){return r.apply(this,arguments)}}()))},8627:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_});var n=r(66062),a=r(66948),o=r(97175),i=r(45525),l=r(55752),c=r.n(l),p=r(78168),u=r(76955),d=r(81271),y=r.n(d),s=r(75457),f=function(e){var{amebaId:t,entryId:r,pageType:n,entryLimit:a,isAllowed:o}=e;return!r||n===s.Z.BlogTop&&a>1||!o?null:u.createElement("div",{className:y().Block},u.createElement("iframe",{className:y().Frame,frameBorder:0,height:438,src:"".concat(window.process.env.API_CHEER,"/embed/").concat(t,"/").concat(r),title:"\u3053\u306e\u8a18\u4e8b\u3092\u5fdc\u63f4\u3057\u3066\u307f\u307e\u305b\u3093\u304b\uff1f"}))};const g=u.memo(f);var b=r(21662),v=r(73614),m=r(33811),h=r(23347);function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1",t=parseInt(e,10);return!t||t<1?1:t}var O=function(){var e=(0,n.Z)((function*(e){var{dispatch:t,getState:r,match:n,location:a}=e,{params:o,route:i}=n,l=o.amebaId,p=i.pageType,u=yield t((0,v.Rs)(l));if(!u||!u.error){var d=r().bloggerState,y=d.bloggerMap[l]||{},f=y.attribute||{},{isOfficial:g,isTopBlogger:O}=f;if(g||O){var _,w=d.blogMap[y.blog],S=r().entryState;if(p===s.Z.BlogTop){var Z=w.entry_limit||"";if(Z>1)return;var E=I(o.page),M=yield t((0,h.sl)(w.blog_id,E,Z,!0));if(M&&M.error)return;_=c()(S,["pcBlogTopPageMap","".concat(w.blog_id,"/").concat(E),"data",0],"")}else _=o.entryId;var{frm:j}=a.query,x=yield t((0,m.x0)(w.blog_id,_,[],j));if(!x||!x.error){var P=c()(S,["entryMap",_,"publish_flg"],"");_&&"amember"!==P&&(yield t((0,b.sU)(l,_)))}}}}));return (),_=(0,p.ee)((0,i.w1)(y()),(0,o.provideHooks)({done:O}),(0,a.$j)(((e,t)=>{var r,{match:n}=t,{params:a,route:o}=n,i=a.amebaId,l=o.pageType,p=e.bloggerState,u=p.bloggerMap[i]||{},d=p.blogMap[u.blog];if(l===s.Z.BlogTop){var y=I(a.page),f=e.entryState;r=c()(f,["pcBlogTopPageMap","".concat(d.blog_id,"/").concat(y),"data",0],"")}else r=a.entryId;var g=c()(e,["cheerEntryState","cheerEntryMap",r,"isAllowed"],!1);return{amebaId:i,entryId:r,pageType:l,entryLimit:d.entry_limit,isAllowed:g}})))(g)},33811:(e,t,r)=>{"use strict";r.d(t,{uw:()=>w,x0:);var n=r(41185),a=r(66062),o=r(18274),i=r(55752),l=r.n(i),c=r(5663),p=r.n(c),u=r(74890),d=r.n(u),y=r(62720),s=r(64123),f=r(11622),g=r(18966),b=r(41779);r h=[y.Z.REBLOG,y.Z.HASH_TAG,y.Z.IMAGE,y.Z.VIDEO,y.Z.CLIPBLOG,y.Z.VOICE_BLOG,y.Z.PR,y.Z.AUTO_AD],I=O=(e,t,r)=>({type:g.V7,payload:{blogId:e,entryId:t,error:r},error:!0}),_=(0,o.H)((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0;return function(){var o=(0,a.Z)((function*(a,o,i){var{fetchr:c}=i,u=d()(h.concat(r)),y=l()(o(),["bloggerState","blogMap",e,"blog_name"],"");if(!y||!t)return null;var b=l()(o(),["entryState","entryMetaMap",t],null),v=l()(b,"pagingType",void 0),_=n===v,w=l()(o(),["entryState","entryMap",t],null);if(b&&_&&w&&(!p()(w.entry_text)||404===w.status_code))return null;try{a({type:g.Gh,payload:{blogId:e,entryId:t,fieldFilter:u,frm:n}});var S={amebaId:y,blogId:e,entryId:t,fieldFilter:u,frm:n},Z=yield c.read(s.Z.BlogEntry).params(S).end(),E=Z.data;if(!(!1!==o().deviceState.isEmojiSupported)&&E.entities&&E.entities.entryMap)try{E=m(m({},E),{},{entities:m(m({},E.entities),{},{entryMap:yield(0,f.R9)(E.entities.entryMap)})})}catch(M){console.warn(M),E=Z.data}return a(I(e,t,E,n))}catch(j){return a(O(e,t,j))}}));return ()})),w=(0,o.H)(((e,t)=>function(){var r=(0,a.Z)((function*(r,n){var a=l()(n(),["bloggerState","blogMap",e,"blog_name"],"");if(!a||!t)return null;var o=l()(n(),["entryState","entryMap",t],null);if("amember"!==o.publish_flg||o&&(o.entry_text||404===o.statusCode))return null;try{r({type:g.tB,payload:{entryId:t}});var i={token:l()(n(),["amebloTokenState","amebloToken"],null),amebaId:a,entryId:parseInt(t,10)},c=yield(0,b.s)(i);return r(((t,c))}catch(p){return r(((e,t)=>({type:g.Ny,payload:{entryId:e,error:t},error:!0}))(t,p))}}));return ()))},74890:90367:(e,t,r)=>{var n=r(18300)(();n.push([e.id,"._e7ZHDohl{margin-bottom:32px}#no-js ._e7ZHDohl{display:none}._1brXd9ax{background:#fff;border-radius:24px;box-shadow:0 4px 14px rgba(8,18,26,.12);display:block;margin:0 auto;max-width:440px;width:100%}",""]),n.locals={Block:"_e7ZHDohl",Frame:"_1brXd9ax"},e.exports=n},81271:(e,t,r)=>{var n=r(90367),a=Object.assign||o=Object.defineProperty||"string"==typeof n&&(n=[[e.id,n,""]]),e.exports=function(e){var t=a({},e.locals||{});return o(t,"_",{value:),o(t,"toString",{value:function(){return"function"==typeof e.toString?e.toString():""}}),t}(n)}}]);