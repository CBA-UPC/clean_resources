"beec35c5e0e599af3ca293b6e4c76c72019806f2";
(function(){var ha="frosmo",ia="_frosmo",ja="";try{if(ja=window.document.currentScript.getAttribute("data-namespace")||"")ha+=ja,ia+=ja}catch(f){}var w=window[ha]=window[ha]||{},V=window[ia]=window[ia]||{},a=w.easy=w.easy||{};a.config=a.config||{};a.scriptNamespace=ja;if(!0===a.namespaceLoaded)a.console&&a.console.error("frosmo.easy.js is already loaded. Initialization could be corrupted");else{var ga=window.Array,E=window.Boolean,sa=window.clearInterval,X=window.clearTimeout,R=window.console,D=window.Date,
ca=window.decodeURIComponent,x=window.document,N=window.encodeURIComponent,y=window.Error,ka=window.escape,ta=window.Event,la=window.Function,ua=window.getComputedStyle,S=window.history,va=window.Image,wa=window.isFinite,xa=window.isNaN,pa=window.JSON,T=window.location,I=window.Math,qa=window.MutationObserver,O=window.navigator,U=window.Node,G=window.Number,J=window.Object,L=window.parseFloat,Q=window.parseInt,P=window.RegExp,ya=window.setInterval,za=window.setTimeout,B=window.String,da=window.TypeError,
Y=window.unescape,Aa=window.WebKitMutationObserver,Ba=window.XMLHttpRequest,ma;try{ma=window.localStorage}catch(f){}w.MutationObserver=qa;w.WebKitMutationObserver=Aa;a.overrideBrowser=function(f,g){if(void 0===g){var c=a.domElements.selector("#frosmo-internal-frame")[0];c||(c=x.createElement("iframe"),c.width=0,c.height=0,c.tabIndex=-1,c.id="frosmo-internal-frame",c.style.display="none",(x.body?x.body:x.head).appendChild(c));g=c.contentWindow[f];if(!g)return}switch(f){case "Array":ga=g;break;case "Boolean":E=
g;break;case "clearInterval":sa=g;break;case "clearTimeout":X=g;break;case "console":R=g;break;case "Date":D=g;break;case "decodeURIComponent":ca=g;break;case "document":x=g;break;case "encodeURIComponent":N=g;break;case "Error":y=g;break;case "escape":ka=g;break;case "Event":ta=g;break;case "Function":la=g;break;case "getComputedStyle":ua=g;break;case "history":S=g;break;case "Image":va=g;break;case "isFinite":wa=g;break;case "isNaN":xa=g;break;case "JSON":pa=g;break;case "localStorage":ma=g;break;
case "location":T=g;break;case "Math":I=g;break;case "MutationObserver":qa=g;w.MutationObserver=g;break;case "navigator":O=g;break;case "Node":U=g;break;case "Number":G=g;break;case "Object":J=g;break;case "parseFloat":L=g;break;case "parseInt":Q=g;break;case "RegExp":P=g;break;case "setInterval":ya=g;break;case "setTimeout":za=g;break;case "String":B=g;break;case "TypeError":da=g;break;case "unescape":Y=g;break;case "WebKitMutationObserver":Aa=g;w.WebKitMutationObserver=g;break;case "XMLHttpRequest":Ba=
g}};a.deprecate=function(f,g,c,d,b){return function(){var e='"'+f+'" deprecated, use "'+g+'" instead';b?a.log.error(e,a.ERROR_TYPE_DEPRECATED+".removed"):a.console.error(e);return c.apply(d,arguments)}};(function(){a.VERSION="24.6.0";a.MINIMUM_RULES_VERSION="3.6";a.getVersion=function(){return a.VERSION+"-"+(a.VERSION_RULES?a.VERSION_RULES:"1.0")};a.versionAtLeast=function(f,g){if(!f||!g)return!1;for(var c=a.utils.map(B(f).split("."),G),d=a.utils.map(B(g).split("."),G);3>c.length;)c.push(0);for(;3>
d.length;)d.push(0);for(var b=!0,e=0;3>e&&!(d[e]>c[e]);e++)if(d[e]<c[e]){b=!1;break}b||a.console.error("[version]","Minimum version mismatch, for "+g+", expected "+f);return b}})();a.ERROR_SITE_JQUERY_MISSING=20017;a.ERROR_SITE_LOCALE=20008;a.ERROR_SITE_UNKNOWN=20009;a.ERROR_SITE_USER=20010;a.ERROR_SITE_CONVERSION=20021;a.ERROR_SITE_CONVERSION_TRANS_ID_MISSING=20013;a.ERROR_SITE_CONVERSION_ID=20014;a.ERROR_SITE_CONVERSION_VALUE=20015;a.ERROR_SITE_CONVERSION_QUANTITY=20025;a.ERROR_SITE_CUSTOMACTION=
20024;a.ERROR_SITE_CUSTOMACTION_VALUE=20018;a.ERROR_SITE_INIT=20019;a.ERROR_SITE_CUSTOM_API=20020;a.ERROR_SITE_PRODUCT_ID=20026;a.ERROR_SITE_PRODUCT_ATTRIBUTE=20027;a.ERROR_SITE_TRANSACTION=20029;a.EVENT_SEGMENT_ENTER="segment.enter";a.EVENT_SEGMENT_LEAVE="segment.leave";a.EVENT_SEGMENTS_READY="segments.ready";a.EVENT_CUSTOMACTION="customAction";a.EVENT_INIT_START="init.start";a.EVENT_INIT_SUCCESS="init.success";a.EVENT_INIT_FAILURE="init.failure";a.EVENT_INIT_UID="init.uid";a.EVENT_UID_CREATED="uid.created";
a.EVENT_INIT_CONTEXT="init.context";a.EVENT_INIT_QUICK_CONTEXT="init.quick_context";a.EVENT_LOGIN="login";a.EVENT_LOGOUT="logout";a.EVENT_EASY_CONFIG="easy.config";a.EVENT_SCRIPT_LOAD="scriptLoad";a.EVENT_VISIT="visit";a.EVENT_LOCATION="location";a.EVENT_LOCATION_FAILURE="location.failure";a.EVENT_XDM_REQUEST="xdm.request";a.EVENT_XDM_READY="xdm.ready";a.EVENT_XDM_FAILURE="xdm.failure";a.EVENT_CONVERSION="conversion";a.EVENT_PRODUCT_DATA="product";a.EVENT_PRODUCT_PURCHASE="product.purchase";a.EVENT_DATALAYER=
"dataLayer";a.EVENT_MESSAGE_INIT="message.initSuccess";a.EVENT_MESSAGE_REQUEST="message.request";a.EVENT_MESSAGE_RECEIVE="message.receive";a.EVENT_MESSAGE_SUCCESS="message.success";a.EVENT_MESSAGE_FAILURE="message.failure";a.EVENT_MESSAGESHOW_COMPLETE="messageshow.complete";a.EVENT_MESSAGESHOW_FAILED="messageshow.failed";a.EVENT_MESSAGE_SHOW="message.showMessage";a.EVENT_MESSAGE_CLICK="message.clickMessage";a.EVENT_MESSAGE_TRUE_DISPLAY="message.trueDisplay";a.EVENT_URL_CHANGED="pageload.urlChanged";
a.EVENT_PAGE_CHANGED="pagechange.urlChanged";a.EVENT_DOM_EVENT="domEvent";a.EVENT_DOM_WAIT="domWait";a.EVENT_EASY_EVENT="easyEvent";a.EVENT_JSVAR_WAIT="jsvarWait";a.EVENT_TRIGGER_EVENT="trigger.event";a.EVENT_TRIGGER_FIRE="trigger.fire";a.EVENT_PREVIEW_TOOL_ENABLE="previewTool.enable";a.EVENT_PREVIEW_TOOL_DISABLE="previewTool.disable";a.EVENT_ERROR_SENT="error.sent";a.EVENT_EASY_READY="easy.ready";a.EVENT_DOM_READY="domReady";a.EVENT_JQUERY_READY="jquery.ready";a.EVENT_STATE_REMOVE="state.remove";
a.EVENT_STATE_SET="state.set";a.EVENT_PROMISE_REJECTION_HANDLED="promise.rejectionHandled";a.EVENT_PROMISE_UNHANDLED_REJECTION="promise.unhandledRejection";a.XDM_INIT_TIMEOUT=5E3;a.ENV="prod";a.CUSTOM_SCRIPT_UPDATED_AT=void 0;a.COOKIE_QUICK_CONTEXT="frosmo_quickContext";a.COOKIE_MAX_SIZE=3E3;a.MESSAGE_TRUE_DISPLAY_TIME=3E3;a.JQUERY_INIT_TIMEOUT=1E4;a.CONTEXT_TYPE_SERVER="context.api";a.CONTEXT_TYPE_STORAGE="local.storage";a.CONTEXT_TYPE_XDM="shared.context";a.MESSAGE_TYPE_BASIC="basic";a.MESSAGE_TYPE_CACHED=
"cached";a.STATE_DEVICE="_device";a.STATE_MODE="_mode";a.STATE_MODE_TEST="test";a.STATE_TYPE_PAGE=3;a.STATE_TYPE_SESSION=2;a.DEVICE_REGEXP_IOS=/(iPhone|iPod)/i;a.DEVICE_REGEXP_IPAD=/iPad/i;a.DEVICE_REGEXP_ANDROIDMOBILE=/Android.+(mobile|Opera (mini|mobi))/i;a.DEVICE_REGEXP_ANDROIDTABLET=/Android(?!.+(mobile|Opera (mini|mobi)))/i;a.DEVICE_REGEXP_WINDOWSPHONE=/Windows Phone|Windows CE|Windows Mobile|IEMobile/i;a.DEVICE_REGEXP_WINDOWSTABLET=/Windows.*ARM/i;a.DEVICE_REGEXP_OTHERMOBILE=/(\sPPC|Blackberry|Cricket|iPAQ|HTC_Touch|HTC_HD2|HTC-ST7377|Kindle|LG\d|LG-G|LG-L|LGE|Teleca|POLARIS|MOT-|MOT\d|Nintendo|Nokia|Symbian|SymbOS|SPV\s|PalmSource|PalmOS|SAMSUNG|sam-r\d|samr\d|SCH-A950|SEC-SGH|SHARP|SIE-|UP\.BROWSER|sonyericsson|UC(\s?)Browser|WebOS|Pantech|MobileExplorer|ZuneWP7|Opera Mini|Opera Mobi)/i;
a.DEVICE_REGEXP_OTHERTABLET=/Playbook|hp-tablet|Opera Tab/i;a.MESSAGE_PRE_RENDERER_SCRIPT_ID="frosmo_message_pre_renderer_script_id_";a.MESSAGE_SCRIPT_ID="frosmo_message_script_id_";a.SHARED_CODE_ID="frosmo_shared_code_id_";a.MESSAGE_STYLE_ID="frosmo_message_style_id_";a.DOM_EVENT_NAMESPACE="easy_core";a.LOG_LEVEL_DEBUG="debug";a.LOG_LEVEL_INFO="info";a.LOG_LEVEL_WARN="warn";a.LOG_LEVEL_WARNING="warning";a.LOG_LEVEL_LOG="log";a.LOG_LEVEL_ERROR="error";a.LOG_LEVEL_CRITICAL="critical";a.MAXIMUM_URL_LENGTH=
4100;a.MAXIMUM_TRACE_LENGTH=2E3;a.GA_INIT_TIMEOUT=5E3;a.sharedContextRpc=null;a.ERROR_TYPE_AJAX_EXCEPTION="ajax.exception";a.ERROR_TYPE_AJAX_CANCELLED="ajax.cancelled";a.ERROR_TYPE_AJAX_TIMEOUT="ajax.timeout";a.ERROR_TYPE_ARG_INVALID="arg.invalid";a.ERROR_TYPE_CONTEXT_EXCEPTION="context.exception";a.ERROR_TYPE_CONTEXT_INVALID="context.invalid";a.ERROR_TYPE_CONTEXT_INIT="context.init";a.ERROR_TYPE_CONTEXT_INIT_LONG="context.init_long";a.ERROR_TYPE_CONTEXT_INIT_READY="context.init_ready";a.ERROR_TYPE_CONTEXT_INIT_REQUIREMENTS=
"context.init_requirements";a.ERROR_TYPE_CONTEXT_INIT_SELECTOR="context.init_selector";a.ERROR_TYPE_CONTEXT_INIT_STORAGE="context.init_storage";a.ERROR_TYPE_CONTEXT_INIT_TIMEOUT="context.init_timeout";a.ERROR_TYPE_CONTEXT_READY="context.ready";a.ERROR_TYPE_COOKIE_LONG="cookie.long";a.ERROR_TYPE_CORE_INIT="core.init";a.ERROR_TYPE_CUSTOM_ACTION_INVALID="customaction.invalid";a.ERROR_TYPE_DEPRECATED="deprecated";a.ERROR_TYPE_ELEMENTS_LONG="elements.long";a.ERROR_TYPE_EXCEPTION="exception";a.ERROR_TYPE_GA_EXCEPTION=
"ga.exception";a.ERROR_TYPE_GA_MISSING="ga.missing";a.ERROR_TYPE_INIT="init";a.ERROR_TYPE_JQUERY_MISSING="jquery.missing";a.ERROR_TYPE_SHARED_CODE_EXCEPTION="sharedCode.exception";a.ERROR_TYPE_MESSAGE_EXCEPTION="message.exception";a.ERROR_TYPE_MESSAGE_INIT="message.init";a.ERROR_TYPE_MESSAGE_INVALID="message.invalid";a.ERROR_TYPE_MODULE_MISSING="module.missing";a.ERROR_TYPE_ORIGIN_MISMATCH="origin.mismatch";a.ERROR_TYPE_POSITION_EXCEPTION="position.exception";a.ERROR_TYPE_QUEUE_LONG="queue.long";
a.ERROR_TYPE_RENDERER_INVALID="renderer.invalid";a.ERROR_TYPE_SEGMENT_EXCEPTION="segment.exception";a.ERROR_TYPE_SELECTOR_INVALID="selector.invalid";a.ERROR_TYPE_SITE_EXCEPTION="site.exception";a.ERROR_TYPE_SITE_INIT="site.init";a.ERROR_TYPE_STORAGE_EXCEPTION="storage.exception";a.ERROR_TYPE_STORAGE_MISSING="storage.missing";a.ERROR_TYPE_TEMPLATE_EXCEPTION="template.exception";a.ERROR_TYPE_TEMPLATE_MISSING="template.missing";a.ERROR_TYPE_TIMEOUT="timeout";a.ERROR_TYPE_TRIGGER_EXCEPTION="trigger.exception";
a.ERROR_TYPE_URL_LONG="url.long";a.ERROR_TYPE_VERSION_INVALID="version.invalid";a.MODULE_CORE="[core]";a.MODULE_SITE="[site]";a.MODULE_SHARED_CODE="[sharedCode]";a.MODULE_MESSAGE="[message]";a.MODULE_POSITION="[position]";a.MODULE_SEGMENT="[segment]";a.MODULE_TRIGGER="[trigger]";(function(){a.xdmLocal=function(f){if(!f.remote)throw new y('Invalid "remote" property for '+f.remote);this.timeout=f.timeout;this.timerId=0;f=a.utils.parseUri(f.remote);this.domain=f.protocol+"://"+f.authority;this.path=
f.path;this.callbacks=[];this.allowedOrigin=this.domain;this.remoteOrigin=this.remoteIframe=null;this.debugging=a.store.get("frosmo_xdm_debug");this.index=this.totalCount;this.selector=a.config.xdmIframeInHead?"head":"body";f="Selector: "+this.selector+", Domain: "+this.domain+", Path: "+this.path;this.errOpts={level:a.LOG_LEVEL_ERROR,debug:f};this.warnOpts={level:a.LOG_LEVEL_WARNING,debug:f};this.infoOpts={level:a.LOG_LEVEL_INFO,debug:f};return this};a.xdmLocal.prototype={totalCount:0,domains:{},
init:function(){if(!this.domain||!this.path)throw new y("Invalid domain/path for "+this.domain+","+this.path);if(a.xdmLocal.prototype.domains[this.domain])throw new y("Already connected to "+this.domain);a.xdmLocal.prototype.domains[this.domain]=!0;a.xdmLocal.prototype.totalCount+=1;this.log("Initialize "+this.domain);var f=this,g=new a.Promise(function(a,d){f.onReady=function(){a(f)};f.onError=d});return a.domElements.waitFor({selector:f.selector,timeout:1E4}).then(function(c){a.domEvents.on(window,
"message."+a.DOM_EVENT_NAMESPACE,f.receiveMessage,f);var d=x.createElement("iframe");d.src=f.domain+f.path+"?"+a.VERSION;d.width=0;d.height=0;d.tabIndex=-1;d.id="frosmo-xdm";d.style.display="none";c[0].appendChild(d);f.timeout&&(f.timerId=a.utils.setTimeout(function(){var b=new y('xdmRemote "ready" method timed out after '+f.timeout+" millisecond(s)");f.onError(a.internal.createLogError(b,a.ERROR_TYPE_CONTEXT_INIT_TIMEOUT,f.warnOpts))},f.timeout));return g}).catch(function(c){f.onError(a.internal.createLogError(c,
a.ERROR_TYPE_CONTEXT_INIT_SELECTOR,f.warnOpts));return g})},get:function(f){var g=this;return new a.Promise(function(a){g.callbacks.push(a);g.sendMessage({method:"get",name:f})})},set:function(f,g){var c=this;return new a.Promise(function(a){c.callbacks.push(a);c.sendMessage({method:"set",name:f,value:g})})},reset:function(){a.xdmLocal.prototype.domains={};a.xdmLocal.prototype.totalCount=0},receiveMessage:function(f){if(f.origin)if(f.origin.toLowerCase()!==this.allowedOrigin.toLowerCase())this.log("Invalid domain for "+
f.origin+", it was not "+this.allowedOrigin,void 0,!0);else{var g;try{g=w.JSON.parse(f.data),g.method=g.method}catch(c){this.log('Invalid message "data" property',f,!0);return}this.log("Recieved (local) "+g.method+", origin: "+f.origin,f.data);switch(g.method){case "ready":X(this.timerId);if(this.remoteIframe){a.log.warn('xdmRemote "ready" method already received',a.ERROR_TYPE_CONTEXT_READY,this.warnOpts);break}this.remoteIframe=f.source;this.remoteOrigin=f.origin;this.onReady();break;case "error":X(this.timerId);
f=new y(g.value);switch(g.type){case a.ERROR_TYPE_CONTEXT_INIT_REQUIREMENTS:this.onError(a.internal.createLogError(f,a.ERROR_TYPE_CONTEXT_INIT_REQUIREMENTS,this.infoOpts));break;case a.ERROR_TYPE_CONTEXT_INIT_LONG:this.onError(a.internal.createLogError(f,a.ERROR_TYPE_CONTEXT_INIT_LONG,this.warnOpts));break;default:this.onError(a.internal.createLogError(f,a.ERROR_TYPE_CONTEXT_EXCEPTION,this.errOpts))}break;case "get":case "set":f=this.callbacks.shift(),a.utils.isFunction(f)&&f(g.value),g.error&&a.log.warn(g.error,
a.ERROR_TYPE_CONTEXT_EXCEPTION,this.warnOpts)}}else this.log('Invalid "message" argument, does not contain an origin property',void 0,!0)},sendMessage:function(f){if(!this.remoteIframe||!this.remoteOrigin){f=new y('xdmRemote "ready" method not received');var g=a.utils.clone(this.errOpts);g.module=a.internal.getCurrentModule();throw a.internal.createLogError(f,a.ERROR_TYPE_CONTEXT_INIT_READY,g);}try{this.remoteIframe.postMessage(w.JSON.stringify(f),this.remoteOrigin)}catch(c){throw a.internal.createLogError(c,
"context_"+a.ERROR_TYPE_ARG_INVALID,this.warnOpts);}},log:function(f,g,c){this.debugging&&(c?a.console.error:a.console.log)("[xdmLocal]","Index:"+this.index+","+f,g)}}})();a.fetch=function(){function f(b){function e(b,c){b=b||k.status?b.slice(0,255):"Unexpected error with the ajax request (default)";var e={text:b,type:c,status:k.status,url:t,method:m},d;try{d=w.JSON.stringify(e)}catch(h){d='{"text":"Unexpected error with the ajax request (default)","type":"'+c+'","status":-1,"url":"'+t+'","method":"'+
m+'"}'}l?l(k,k.statusText,e,d):a.internal.hasRejectionHandler(u.promise)||a.log.error(b,c,{debug:d});u.reject({xhr:k,textStatus:k.statusText,errorThrown:e})}if(!a.utils.isObject(b)||a.utils.isEmpty(b))throw new y('Invalid type for ajax "options" argument, for "'+b+'"');if(!b.url)throw new y('Invalid type for ajax "url" property, got "'+a.utils.getType(b.url)+'"');var f=b.dataType||"JSON";g(f,c,"options.dataType");g(b.method,d,"options.method");var m=b.method.toUpperCase(),u=a.Promise.withResolvers(),
r=a.utils.isFunction(b.success)?a.guard(b.success):function(){},l=a.utils.isFunction(b.error)?a.guard(b.error):void 0,k=new Ba;u.onCancel(function(){k.abort()});var t=b.url,v=b.data,h=b.headers;if("GET"===m)t=a.utils.addQueryString(t,b.params),v=void 0;else if("POST"===m||"PUT"===m||"PATCH"===m)"formdata"!==a.utils.getType(v)&&a.utils.isObject(v)&&(v=a.utils.addQueryString("",v).slice(1)),b.skipDefaultHeaders||(h=a.utils.extend({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},h));
k.onload=k.onerror=a.guard(function(){if(u.promise.isCancelled())e("Request was cancelled",a.ERROR_TYPE_AJAX_CANCELLED);else if(200<=k.status&&299>=k.status)a:{var b=k.responseText,c=b;if("JSON"===f)try{c=w.JSON.parse(b)}catch(d){if("GET"===m){e('Invalid JSON ajax response, for "'+b+'"',a.ERROR_TYPE_AJAX_EXCEPTION);break a}}r(c,k.statusText,k);u.resolve(c)}else e(k.responseText,a.ERROR_TYPE_AJAX_EXCEPTION)});k.ontimeout=a.guard(;
a.utils.setTimeout(function(){a.debug.addEntry("fetch",b);k.open(m,t,!0);k.withCredentials=E(b.withCredentials);a.utils.each(h,function(a,b){k.setRequestHeader(b,a)});0<b.timeout&&(k.timeout=b.timeout);k.send(void 0===v?null:v)});return u.promise}function g(b,c,d){if(!a.utils.inArray(c,B(b).toUpperCase()))throw new y('Invalid ajax "'+d+'" argument, got "'+w.JSON.stringify(b)+'"');}var c=["JSON","TEXT"],d=["GET","POST","PUT","DELETE","PATCH"];return{ajax:f,get:function(b,c){return f(a.utils.extend({},
c,{url:b,method:"GET"}))},post:function(b,c){return f(a.utils.extend({},c,{url:b,method:"POST"}))}}}();a._jsonp=function(){function f(a,b,c){return function(f){a(f);g[b]=function(){};c.removeAttribute("src");c.parentNode&&c.parentNode.removeChild(c)}}var g={},c=0;return{request:function(d,b){if(a.utils.isString(d)&&a.utils.isFunction(b)){var e="req"+c++;d=a.utils.addQueryString(d,{callback:"frosmo.easy._jsonp._callbacks."+e});var n=a.domElements.addScriptTag(d,!1);g[e]=f(a.guard(b),e,n)}},_callbacks:g}}();
w.JSON=function(){eturn{parse:f,safeParse:function(g,c,d){try{return f(g,d)}catch(b){a.console.warn("[JSON]",'Invalid type for "str" argument, got',g,b,d)}return c},stringify:function(){var a=[0,0],c=[ga,J],d;for(d=0;2>d;d++)a[d]=c[d].prototype.toJSON,delete c[d].prototype.toJSON;var b=pa.stringify.apply(this,arguments);for(d=0;2>d;d++)a[d]&&(c[d].prototype.toJSON=a[d]);return b}}}();a.spa=function(){function f(b,c){if(c.hashchange)a.domEvents.on(window,
"hashchange."+a.DOM_EVENT_NAMESPACE,a.spa.onHashChangeEvent);if(c.popstate)a.domEvents.on(window,"popstate."+a.DOM_EVENT_NAMESPACE,a.spa.onPopStateEvent);c.pushstate&&S&&S.pushState&&(d=S.pushState,g(c.checkInterval))}function g(e){S.pushState!==c&&(void 0!==c&&e.updateRef&&(d=S.pushState),S.pushState=c=a.guard(a.spa.onPushState));0<e.delay&&(b=a.utils.setTimeout(function(){g(e)},e.delay))}var c,d,b=0,e;return{init:function(b){a.spa.isEnabled()&&(e=b,f(b,a.spa.getConfig()),a.ready()},clear:function(){a.domEvents.off(window,"hashchange."+a.DOM_EVENT_NAMESPACE,a.spa.onHashChangeEvent);a.domEvents.off(window,"popstate."+a.DOM_EVENT_NAMESPACE,a.spa.onPopStateEvent);X(b);void 0!==d&&S.pushState!==d&&(S.pushState=d);a.events.off(a.EVENT_PAGE_CHANGED,a.spa.onPageChangeEvent);d=c=void 0;b=0;e=void 0},getConfig:function(){if(!a.config.singlePageSupport)return{hashchange:!1,popstate:!1,pushstate:!1,cancelPendingRequests:!1,clearEvents:[],checkInterval:{delay:1E3,
updateRef:!1}};var b={hashchange:!0,popstate:!0,pushstate:!0,cancelPendingRequests:!1,clearEvents:[],checkInterval:{delay:1E3,updateRef:!1}};if(a.utils.isObject(a.config.singlePageSupport))return a.utils.extend(b,a.config.singlePageSupport);a.deprecate('Data type of boolean for "easy.config.singlePageSupport"',"SinglePageConfig",function(){})();return b},isEnabled:onPageChangeEvent:function(b,c){a.console.log("[spa]","URL changed, re-initializing",
b);a.debug.clear();var e=a.spa.getConfig();a.events.clearEvent(a.EVENT_UID_CREATED);a.events.clearEvent(a.EVENT_VISIT);a.events.clearEvent(a.EVENT_URL_CHANGED);a.utils.each(e.clearEvents,;a.message.clear();a.triggers.clear();a.segments.clear();a.smartDiscovery&&a.smartDiscovery.clear();a.strategies&&a.strategies.clear();var d=a.main.getCurrentBrowserData(),f=a.utils.extend({},T,{href:b});a.handleCurrentPage(f,d.href);a.events.clearEvent(a.EVENT_SCRIPT_LOAD);a.events.clearEvent(a.EVENT_DOM_READY);
a.events.trigger(a.EVENT_SCRIPT_LOAD);a.events.trigger(a.EVENT_DOM_READY);a.strategies&&a.strategies.init(a.config.strategies);a.triggers.init(a.config.triggers);a.states.init();a.internal.states(f.href);a.segments.init();a.quickMessage.requestMessages();a.config.requestMessages&&a.message.requestMessages({cancelPending:e.cancelPendingRequests});a.events.trigger(a.EVENT_URL_CHANGED,b,c)},onHashChangeEvent:function(){var b=T.href;a.utils.getAbsoluteUrl(b)!==e&&a.spa.trigger(b)},onPopStateEvent:function(){a.spa.trigger(T.href)},
onPushState:function(b,c,e){a.spa.trigger(e);return d.apply(S,arguments)},trigger:function(b){b=a.utils.getAbsoluteUrl(b);a.events.trigger(a.EVENT_PAGE_CHANGED,b,e);e=b}}}();a.config={};a.init=function(f){a.main.setCurrentBrowserData(T.href,x.referrer);a.main.initStart();if(a.isDisabled())return a.console.warn("[init]","Frosmo Core is disabled"),!1;a.internal.debug(T.href);f=a.utils.extend({},a.config,f);a.config=f;a.api.init(f.api.domain,f.api.origin,f.api.fcp);if(!a.checkRequirements(O.userAgent))return a.main.initFailure(void 0),
!1;if(!a.versionAtLeast(a.MINIMUM_RULES_VERSION,a.VERSION_RULES))return a.main.initFailure('Invalid minimum "rules" version, expected '+a.MINIMUM_RULES_VERSION,a.ERROR_TYPE_VERSION_INVALID,{level:a.LOG_LEVEL_WARNING}),!1;a.events.trigger(a.EVENT_SCRIPT_LOAD);a.internal.dispatchEvent("frosmo.load");f.cookieDomain&&a.cookies.setCookieDomain(f.cookieDomain);a.events.trigger(a.EVENT_EASY_CONFIG);a.sharedCode.init(f.sharedCode);a.domEvents.init();a.spa.init(T.href);a.smartDiscovery&&a.smartDiscovery.init();
a.strategies&&a.strategies.init(f.strategies);a.triggers.init(f.triggers);a.domElements.init(a.scriptNamespace);a.domElements.addStyles(a.styles);a.states.init();a.internal.states(T.href);a.message.init({positions:f.positions});if(f.requestMessages){var g=a.spa.getConfig();a.message.requestMessages({cancelPending:g.cancelPendingRequests})}f.dataLayer&&a.ready(a.dataLayer.init);a.contextLoader.init(f,O.userAgent);a.events.once(a.EVENT_INIT_CONTEXT,function(c){if(c.origin!==f.api.origin)a.main.initFailure('Origin mismatch for local context, got "'+
c.origin+'"',a.ERROR_TYPE_ORIGIN_MISMATCH,{level:a.LOG_LEVEL_ERROR,module:a.internal.getCurrentModule()});else a.events.once(a.EVENT_INIT_UID,});a.quickMessage.init(f.quickMessages,O.userAgent);a.events.once(a.EVENT_INIT_QUICK_CONTEXT,function(c){a.quickMessage.requestMessages();c.origin&&c.origin!==f.api.origin&&a.log.info('Origin mismatch for quick context, got "'+c.origin+'"',a.ERROR_TYPE_ORIGIN_MISMATCH,{module:a.internal.getCurrentModule()})});return!0};a.getSite=
a.handleCurrentPage=function(f,g){a.main.updateBrowserData(window,f,g)};a.isDev=a.isDisabled=function(){var f=a.utils.parseUri(T.href).queryKey.frosmo;"on"===f?a.cookies.remove("frosmo-off"):"off"===f&&a.cookies.set("frosmo-off",1);return E(a.cookies.get("frosmo-off"))};a.isReady=a.ready=function(f,g){if(a.utils.isFunction(f))a.events.once(a.EVENT_EASY_READY,
f,g);return new a.Promise(function(c){a.events.once(a.EVENT_EASY_READY,c,g)})};(function(){function f(a){m(H.bind(e,a));if("pending"!==a._state&&a._chains.length!==a._index)for(;a._index<a._chains.length;){var b=a._chains[a._index++];b.promise._suppressRejections=a._suppressRejections;var c="resolved"===a._state?b.onResolved:b.onRejected;if(c)m(H.bind(g,b,a,c));else if("resolved"===a._state)b.resolve(a.value);else if("rejected"===a._state){var c=a,d=b.promise;d._isCancelled=c._isCancelled;d._suppressRejections=
c._suppressRejections;b.reject(a.value)}}}function g(a,b){try{c.call(this,b(a.value))}catch(e){this.reject(e)}}function c(b){function e(a,b){if(!f)return f=!0,a?c.call(this,b):this.reject(b)}if(this.promise===b)this.reject(new da("A Promise's callback cannot return the same Promise instance"));else if(b instanceof a.Promise)b.then(H.bind(c,this),this.reject);else if(a.utils.isFunction(b)||a.utils.isObject(b)){var d;try{d=b.then}catch(h){this.reject(h);return}if(a.utils.isFunction(d)){var f=!1;try{d.call(b,
H.bind(e,this,!0),H.bind(e,this,!1))}catch(h){e.call(this,!1,h)}}else this.resolve(b)}else this.resolve(b)}function d(a,b){var c=2===arguments.length;this._onCancel=function(e){this._isCancelled=!0;void 0===e&&(e=new y("Promise was cancelled"));m(function(){try{c&&b(),a(e)}catch(d){a(d)}})}}function b(a,b){"pending"===this._state&&(this._state=a,this.value=b,f(this))}function e(){if("rejected"===this._state&&!this._rejectionChecked){var b=n(this);a.isDev()&&(v[this._id]=[b?a.EVENT_PROMISE_REJECTION_HANDLED:
a.EVENT_PROMISE_UNHANDLED_REJECTION,this.value,this]);this._suppressRejections||(b?a.events.trigger(a.EVENT_PROMISE_REJECTION_HANDLED,this):(a.events.trigger(a.EVENT_PROMISE_UNHANDLED_REJECTION,this.value,this),a.console.warn("[easy.Promise]","Uncaught (in Promise)",this.value,this)))}}function n(b){if(b._hasRejectionHandler||b._rejectionChecked)return!0;b._rejectionChecked=!0;return a.utils.some(b._chains,}function m(b){1===l.push(a.guard(b,t))&&k()}function u(){for(var a=
0;a<l.length;a++)(0,l[a])();l.length=0}var r=0,l=[],k=function(){var b=w.MutationObserver||w.WebKitMutationObserver||b;if(b){var c=0,e=x.createTextNode("");(new b().observe(e,{characterData:!0});return function(){c=0===c?1:0;e.data=c}}return function(){a.utils.setTimeout(u)}}(),t={onError:function(b){a.log.send(b,"promise."+a.ERROR_TYPE_EXCEPTION,{level:a.LOG_LEVEL_CRITICAL})}},v={},h=!0;a.Promise=function(e,h){var f=this instanceof a.Promise;if(!f)throw new da('"easy.Promise" cannot be called as a function. Use the "new" keyword to construct a new "Promise" object');
if(!a.utils.isFunction(e))throw new da('Invalid type for "executor" argument, got "'+a.utils.getType(e)+'"');if(f&&("pending"===this._state||"resolved"===this._state))throw new da('Invalid "this", cannot be a pending or resolved "Promise" object');this._id=++r;this._state="pending";this._index=0;this._chains=[];this._parent=void 0;this._suppressRejections=void 0!==h?E(h):a.Promise.suppressRejections;this._rejectionChecked=this._hasRejectionHandler=!1;a.isDev()&&(this._executor=e,this._stackTrace=
(new y).stack);this.value=void 0;var g=H.bind(b,this,"resolved"),f=H.bind(b,this,"rejected"),p=H.bind(d,this,f);this._isCancelled=!1;d.call(this,f);g={promise:this,resolve:g,reject:f,onCancel:p};try{e(H.bind(c,g),f,p)}catch(t){f(t)}};J.defineProperty(a.Promise,"suppressRejections",{get:function(){return h},set:function(b){if(!a.utils.isBoolean(b))throw new y('Invalid type for "suppressRejections" argument, got "'+a.utils.getType(b)+'"');h=b}});a.Promise.prototype.then=function(b,c){var e={};e.promise=
new this.constructor(function(a,b,c){e.resolve=a;e.reject=b;e.onCancel=c});e.onResolved=a.utils.isFunction(b)?b:void 0;e.onRejected=a.utils.isFunction(c)?c:void 0;e.promise._parent=this;e.promise._hasRejectionHandler=E(e.onRejected);this._chains.push(e);f(this);return e.promise};a.Promise.prototype.catch=a.Promise.prototype.finally=function(b){this._hasRejectionHandler=!0;b=a.utils.isFunction(b)?b:function(){};var c=this;return c.then(.catch(function(a){return c.constructor.try(b).then(})};a.Promise.all=function(b){var c=this;return new c(function(e,d){if(a.utils.isArray(b)){var h=[],f=b.length;0===f?e(h):a.utils.each(b,function(a,b){c.resolve(a).then(function(a){h[b]=a;0===--f&&e(h)},d)})}else d(new da('Invalid type for "iterable" argument, got "'+a.utils.getType(b)+'"'))})};a.Promise.resolve=function(b){return a.utils.isObject(b)&&b.constructor===this?b:new this(};a.Promise.reject=a.Promise.race=function(b){var c=
this;return new c(function(e,d){a.utils.isArray(b)?a.utils.each(b,:d(new da('Invalid type for "iterable" argument, got "'+a.utils.getType(b)+'"'))})};a.Promise.withResolvers=function(){var a={};a.promise=new this(;return a};a.Promise.prototype.cancel=function(a){"pending"!==this._state||this.isCancelled()||this._onCancel(a)};a.Promise.prototype.isCancelled=function(){return this._isCancelled};a.Promise.prototype.timeout=
function(b,c){1===arguments.length&&(c=new y("Promise timed out after "+b+" millisecond(s)"));var e=this,d=new e.constructor(function(d,h){a.utils.setTimeout(b)});return e.constructor.race([e,d])};a.Promise.errors=function(){return v};a.Promise.try=function(a){return new this(}})();var H=function(){var f=function(){};return{bind:function(g,c){if(!a.utils.isFunction(g))throw new y('Invalid type for bind "fn" argument, got "'+a.utils.getType(g)+'"');
var d=a.utils.arrayFrom(arguments).slice(2);return function(){var b=a.utils.arrayFrom(arguments);return g.apply(g instanceof f?g:c,d.concat(b))}}}}();a.console=function(){function f(b){var c=a.store.get("frosmo_debug_level")||a.LOG_LEVEL_WARN;return e[b]>=e[c]}function g(){if(void 0!==b)return b;b=E(a.store.get("frosmo_debug"));return R&&b}function c(c,e,r){if(!1!==b&&g()&&f(c)){var l=D.now();n=n||l;l-=n;e=a.utils.arrayFrom(e);var k=e[0];if(a.utils.isString(k)&&0===k.search(/^\[.*\]$/)){k=k.substring(1,
k.length-1);if(0<d.length&&!a.utils.inArray(d,k))return;e.shift();l=l+": EASY ["+k+"] "+c+"::"}else l=l+": EASY "+c+"::";c=r||c;R[c]?(e.unshift(l),R[c].apply(R,e)):R.log(l,1===e.length?e[0]:e)}}var d=[],b,e={critical:4,error:4,log:3,warn:2,warning:2,info:1,debug:0},n;return{debug:error:function(){c(a.LOG_LEVEL_ERROR,arguments)},groupCollapsed:function(a){g()&&R.groupCollapsed&&R.groupCollapsed(a)},groupEnd:
info:function(){c(a.LOG_LEVEL_INFO,arguments)},log:function(){c(a.LOG_LEVEL_LOG,arguments)},warn:isActiveLevel:f,isEnabled:g,setEnabled:function(c){b=E(c);a.store.set("frosmo_debug",b)},setEnabledModules:setLevel:function(b){if(!a.utils.isNumber(e[b]))throw new y('Invalid console "level" argument, got  "'+b+'"');a.store.set("frosmo_debug_level",b)}}}();a.domEvents=function(){function f(c){if(a.utils.isString(c))c=[c];else if(!a.utils.isArray(c))throw new y('Invalid type for DOM "eventNamespace" argument, got "'+
a.utils.getType(c)+'" for "'+c+'"');c=b(c);a.utils.each(c,function(b,c){a.utils.each(b,;m[c]=[]})}unction c(b,c,e,f,g,n,h){var C=B(c).split(".")[0];if(!a.utils.isString(C)||0===C.length)throw new y('Invalid type for DOM "eventNamespace" argument, got "'+a.utils.getType(c)+'" for "'+c+'"');a.utils.isFunction(e)&&(n=g,g=f,f=e,e=void 0);g=g||this;a.utils.isBoolean(n)||a.utils.isObject(n)||(n=!1);a.utils.each(d(b),function(b){var d=
{el:b,domEvent:C,selector:e,fn:f,context:g,options:n,type:h,delegate:a.guard(function(b){a:{var c=d;if(!c.handled||"once"!==c.type)if(c.selector)for(var e=a.domElements.selector(c.selector,c.el),h=b.target;h&&c.el!==h&&h.nodeType!==U.DOCUMENT_NODE;){if(a.utils.inArray(e,h)){c.handled=!0;c.fn.call(c.context,b,h);break a}h=h.parentNode}else c.handled=!0,c.fn.call(c.context,b,c.el)}}),handled:!1};m[c]=m[c]||[];m[c].push(d);b.addEventListener(C,d.delegate,n)})}function d(b){if(a.utils.isString(b))return a.domElements.selector(b);
b=a.utils.isArray(b)?b:[b];return a.utils.filter(b,}function b(b){var c=/^\*\./;return a.utils.reduce(m,function(e,d,f){a.utils.some(b,function(b){b=c.test(b)?".*\\."+a.utils.escapeRegExp(b.replace(c,"")):a.utils.escapeRegExp(b);return(new P("^"+b+"(\\.|$)")).test(f)})&&(e[f]=a.utils.arrayFrom(d));return e},{})}function e(){a.events.isTriggered(a.EVENT_DOM_READY)||a.events.trigger(a.EVENT_DOM_READY)}function n(a,b,c,e){return!b.removeEventListener||
b!==a.el||e&&e!==a.fn||c&&c!==a.selector?!1:(b.removeEventListener(a.domEvent,a.delegate,a.options),!0)}var m={};return{init:function(){"complete"===x.readyState||"loading"!==x.readyState&&!x.documentElement.doScroll?e():(g(x,"DOMContentLoaded."+a.DOM_EVENT_NAMESPACE,e),g(window,"load."+a.DOM_EVENT_NAMESPACE,e));a.utils.waitFor(10,a.JQUERY_INIT_TIMEOUT,.then(.catch(function(){a.events.trigger(a.ERROR_SITE_JQUERY_MISSING)})},
clear:f,fire:function(a,b){var c=x.createEvent("HTMLEvents");c.initEvent(b,!0,!0);return!a.dispatchEvent(c)},off:function(c,e,f,g){var t=d(c);a.utils.isFunction(f)&&(g=f,f=void 0);c=b([e]);a.utils.each(c,function(b,c){a.utils.each(t,function(e){m[c]=a.utils.filter(b,})})},on:function(a,b,e,d,f,g){c(a,b,e,d,f,g,"on")},once:g,ready:function(b,c){if(a.utils.isFunction(b))a.events.once(a.EVENT_DOM_READY,b,c);return new a.Promise(},_testClear:function(){var b=a.utils.keys(m);f(b)}}}();a.domElements=function(){function f(a,b,c,e){var d=x.createElement("script");b?d.text=a:d.src=a;d.async=!0;return t(d,c,!1,e)}function g(b,c){a.utils.isString(c)&&c.length&&(b="/**"+c+"**/\n"+b+"\n/**"+c+"**/\n");n(a.utils.trim(A+" "+b))}function c(a){return a&&C(a)?a.getBoundingClientRect():{}}function d(a){var b=c(a);a=m(a);return 300<b.width||300<b.height?.75<=a.visible||.75<=a.possible:1===a.visible}function b(a){var b=c(a);return"none"!==
a.style.display&&"hidden"!==a.style.visibility&&(0<b.width||0<b.height)}function e(b,c,e){c=c||x;e=!1!==e;var d=a.events.isTriggered(a.EVENT_JQUERY_READY)&&window.jQuery;try{return e&&d?a.utils.arrayFrom(window.jQuery(b,c)):a.sizzle?a.sizzle(b,c):a.utils.arrayFrom(c.querySelectorAll(b))}catch(f){a.log.error(f,a.ERROR_TYPE_SELECTOR_INVALID,{debug:e&&!d?'jQuery not found for selector of "'+b+'"':"Invalid "+(e?"jQuery":"CSS")+' selector of "'+b+'"'})}return[]}function n(a){K||(K=x.createElement("style"),
K.id=p);A=K.innerHTML=a;e("#"+p)[0]||x.head.appendChild(K)}function m(b){var e={possible:1,visible:1},d=x.documentElement.clientHeight,f=x.documentElement.clientWidth,g=c(b);if(0<=g.top&&0<=g.left&&g.bottom<=d&&g.right<=f)return e;if(!x.body)throw a.internal.createLogError("Body not found",a.ERROR_TYPE_SELECTOR_INVALID,{module:a.internal.getCurrentModule()});var p=x.body.scrollLeft,t=x.body.scrollTop;b=h(g.left+p,g.top+t,b.offsetWidth,b.offsetHeight);d=h(p,t,f,d);f=I.max(b.left,d.left);p=I.min(b.right,
d.right);t=I.max(b.top,d.top);t=I.min(b.bottom,d.bottom)-t;f=p-f;f=0<=f&&0<=t?f*t:0;d=f/(I.min(b.width,d.width)*I.min(b.height,d.height));b=f/(b.width*b.height);e.possible=d||0;e.visible=b||0;return e}function u(b,c,e,d){function f(){h&&(h.disconnect(),h=void 0);g&&(X(g),g=void 0)}var h,g;d(f);d=a.guard(function(){l(b,c,f)});h=new qa(d);h.observe(x.documentElement,{attributes:!1,characterData:!1,childList:!0,subtree:!0});0!==b.timeout&&(g=a.utils.setTimeout(b.timeout));d()}function r(b,
c,e,d){var f=a.utils.waitFor(b.interval,b.timeout,;d(}function l(a,b,c){var d=e(a.selector,a.context);if(0===d.length)return!1;c&&c();b(d);a.success(d);return!0}function k(a,b,c){c&&c();c=new y("Timed out after "+a.timeout+' millisecond(s), for the selector "'+a.selector+'"');b(c);a.failure(c)}function t(b,c,e,d){c=a.utils.isFunction(c)?c:if(e)c(b);else a.domEvents.once(b,"load."+a.DOM_EVENT_NAMESPACE,function(){c(b)});
(d||x.head).appendChild(b);return b}function v(b){b=a.utils.isArray(b)?b:[b];return a.utils.filter(b,}function h(a,b,c,e){a=I.round(a)||0;b=I.round(b)||0;c=I.round(c)||0;e=I.round(e)||0;return{left:a,top:b,width:c,height:e,right:a+c,bottom:b+e}}function C(a){for(var b=0;a;)b=a.nodeType,a=a.parentNode;return b===U.DOCUMENT_NODE}function z(a,b){var c=b.join("|"),e=new P("<\\s*("+c+")\\b[^>]*>([\\s\\S]*?)<\\/(?:"+c+")>","gim"),d=new P("^<\\s*(?:"+c+
")[^>]+src=([\\'\"])(.*?)\\1"),f=[];a=a.replace(e,function(a,b,c){a=a.match(d);f.push({name:b,srcAttr:a?a[2]:"",content:c});return""});return[a,f]}function F(b,c){var e=0;a.utils.each(b,function(b){switch(b.name){case "script":b.srcAttr&&b.content&&a.console.warn('Invalid "script" tag, both "src" and "content" have been defined. Info:',c.guardOptions);b.srcAttr?(b=f(b.srcAttr),c.scriptNamespace&&a.utils.addClassName(b,c.scriptNamespace)):b.content&&(a.internal.safeEval(b.content,c,e),e+=1);break;
case "style":g(b.content,c.styleNamespace)}})}function ea(b){return b.getClientRects?a.utils.every(b.getClientRects(),function(a){for(a=x.elementFromPoint((a.left+a.right)/2,(a.top+a.bottom)/2);a&&a.parentNode&&a.nodeType===U.ELEMENT_NODE;){if(a===b)return!0;a=a.parentNode}return!1}):!1}var p="f3-style",K=null,A="";return{init:addScriptTag:f,addStyleTag:function(a,b,c,e){var d=x.createElement(b?"style":"link");b?d.innerHTML=a:(d.href=a,d.rel="stylesheet",d.type="text/css");
return t(d,c,b,e)},addStyles:g,getBoundingClientRect:c,getCssStyles:function(){return A},getStylesElement:html:function(b,c,e){b=v(b);if(void 0===c)return b.length?b[0].innerHTML:void 0;if(!a.utils.isString(c))throw new y('Invalid type for "htmlString" argument, got "'+a.utils.getType(c)+'"');c=z(c,["script","style"]);var d=c[0];a.utils.each(b,;e=a.utils.extend({args:{},guardOptions:{},scriptNamespace:void 0,styleNamespace:void 0},e);F(c[1],e)},isInViewPort:d,
isSelector:isStyleVisible:b,isVisible:function(c){if(!c)return a.console.warn("[domElements]",'Invalid argument, "el" was not an element node for checking visibility'),!1;var e=d(c),f=b(c);c=ea(c);return e&&f&&c},loadPiwik:function(a){if(!a)return!1;var b=window._paq||[];b.push(["trackPageView"]);b.push(["enableLinkTracking"]);b.push(["setTrackerUrl","//piwik.inpref.com/piwik.php"]);b.push(["setSiteId",a]);f("//piwik.inpref.com/piwik.js");
return!0},matches:function(b,c,e){e=e||b.ownerDocument||x;c=a.domElements.selector(c,e);return a.utils.inArray(c,b)},removeStyles:function(b,c){if(K){b=a.utils.isString(b)?b:"";c=a.utils.isString(c)?c:"";var e=(c=a.utils.escapeRegExp(c))?"\\s*\\/\\*\\*"+c+"\\*\\*\\/\\s*":"\\s*";b=a.utils.escapeRegExp(b).replace(/"|'/g,"(\"|')");e=new P(e+(b?b+"(\\s*)\\{[^\\{\\}]*\\}":"[\\s\\S]*")+e,"gi");e=A.replace(e,"\n").replace(/\n+/g,"\n");n(a.utils.trim(e))}},removeStylesElement:function(){K&&(K.parentNode.removeChild(K),
K=null,A="")},selector:e,updateStylesElement:n,visible:m,visibility:function(a){var b;if(!(b=!C(a))){a:{for(b=a;b&&b.nodeType!==U.DOCUMENT_NODE;){var e=ua(b);if("0"===e.opacity||"none"===e.display||"hidden"===e.visibility){b=!1;break a}b=b.parentNode}b=!0}b=!b}if(b)return 0;b=x.documentElement.clientHeight;var e=x.documentElement.clientWidth,d=c(a);return 0>d.bottom||0>d.right||d.top>b||d.left>e||0===d.height||0===d.width?0:m(a).visible},waitFor:function(b){b={selector:b.selector,context:b.context,
success:a.utils.isFunction(b.success)?b.success:function(){},failure:a.utils.isFunction(b.failure)?b.failure:function(){},interval:L(b.interval)||100,timeout:a.utils.isNumeric(b.timeout)?L(b.timeout):5E3};b=w.MutationObserver||w.WebKitMutationObserver?H.bind(u,null,b):H.bind(r,null,b);return new a.Promise(b)}}}();(function(){a.storage=function(f){if(!(this instanceof a.storage))throw new y('"easy.storage" cannot be called as a function. Use the "new" keyword to construct a new "Storage" object');
this._storage=f&&f.clear&&f.getItem&&f.removeItem&&f.setItem?f:null};a.storage.prototype={get length(){return this.exists()?G(this._storage.length):0},set length;a.storage.prototype.clear=function(){if(this.exists())try{this._storage.clear()}catch(a){}};a.storage.prototype.exists=function(){return E(this._storage)};a.storage.prototype.get=function(f,g){if(!this.exists())return null;var c="__frosmoeasy__"+f,d;try{d=this._storage.getItem(c)}catch(b){throw a.internal.createLogError(b,a.ERROR_TYPE_STORAGE_EXCEPTION,
{level:a.LOG_LEVEL_WARNING,module:a.internal.getCurrentModule()});}if(d=d?w.JSON.safeParse(d):void 0)return d.data;this.remove(c);return g};a.storage.prototype.remove=function(a){this.exists()&&this._storage.removeItem("__frosmoeasy__"+a)};a.storage.prototype.set=function(f,g){if(this.exists())try{this._storage.setItem("__frosmoeasy__"+f,w.JSON.stringify({data:g}))}catch(c){throw a.internal.createLogError(c,a.ERROR_TYPE_STORAGE_EXCEPTION,{level:a.LOG_LEVEL_WARNING,module:a.internal.getCurrentModule()});
}}})();a.store=new a.storage(ma);a.store.check=function(){if(this.exists())try{return this.set("_(test_key)",1),this.remove("_(test_key)"),!0}catch(a){}return!1};a.utils=function(){function f(a,b,c){var e=!0;M(a,function(a,d,f){return b.call(c,a,d,f)?!0:e=!1},c,0,!0);return e}function g(a,b,c){var e=[];M(a,;return e}function c(a){return d(a,}unction b(a,
b,c,e){var d=3<=arguments.length;M(a,function(a,f,h){d?c=b.call(e,c,a,f,h):(d=!0,c=a)});return c}ction u(a){return l(a)?!0:na(a)||h(a)?0===a.length:0===c(a).length}function r(a){return"function"===typeof a||"function"===K(a)}unction k(a){return"number"===typeof a||"number"===K(a)}function t(a){return(k(a)||h(a))&&!xa(a-L(a))}nction C(a,c){if(!v(a))return a;c=z({complex:!0,function:!1,node:!1,regexp:!1},c);var e=K(a);switch(e){case "array":return d(a,function(a){return C(a,c)});case "date":return new D(a.getTime());case "function":if(c.function)return break;case "regexp":if(c.regexp)return e=a.toString().match(/[gimuy]*$/)[0],new P(a.source,e);break;default:if(oa(a))return c.node&&a.cloneNode?a.cloneNode(!0):a}return"object"===
e||c.complex?b(a,function(a,b,e){a[e]=C(b,c);return a},{}):a}function z(a){M(arguments,void 0,1);return a}function F(a){var b={anchor:"",host:"",params:{},path:"",queryVariables:{}};if(l(a)||0===B(a).length)return b;a=ea(a);if(a.anchor)try{b.anchor=ca(a.anchor)}catch(c){b.anchor=a.anchor}b.host=a.host;M(a.queryKey,function(a,c){try{c=ca(c),a=ca(a),b.params[c]=a}catch(e){b.params[c]=a}});try{b.path=ca(a.path)}catch(c){b.path=a.path}b.queryVariables=a.queryKey;
return b}function ea(a){a=Ea(a);var b=14,c={};for(a=fa.parser[fa.strictMode?"strict":"loose"].exec(a);0<b-1;)--b,c[fa.key[b]]=a[b]||"";c[fa.queryKey.name]={};c[fa.key[12]].replace(fa.queryKey.parser,;return c}function p(a){return oa(a)&&(a=a.getAttribute("class"))?a.match(/[^\x20\t\r\n\f]+/g)||[]:[]}unction A(b){var c=a.context?a.context.userAgent:O.userAgent;
switch(b){case "android":return a.DEVICE_REGEXP_ANDROIDMOBILE.test(c)&&!A("windowsphone");case "ios":return a.DEVICE_REGEXP_IOS.test(c)&&!A("windowsphone");case "othermobile":return a.DEVICE_REGEXP_OTHERMOBILE.test(c)&&!A("android")&&!A("ios")&&!A("windowsphone");case "androidtablet":return a.DEVICE_REGEXP_ANDROIDTABLET.test(c);case "ipad":return a.DEVICE_REGEXP_IPAD.test(c);case "othertablet":return a.DEVICE_REGEXP_OTHERTABLET.test(c)&&!A("androidtablet")&&!A("windowstablet");case "windowsphone":return a.DEVICE_REGEXP_WINDOWSPHONE.test(c);
case "windowstablet":return a.DEVICE_REGEXP_WINDOWSTABLET.test(c)&&!A("windowsphone");case "desktop":return!A("android")&&!A("ios")&&!A("windowsphone")&&!A("othermobile")&&!A("androidtablet")&&!A("ipad")&&!A("windowstablet")&&!A("othertablet");default:throw new y('Invalid "deviceType" argument, got "'+b+'"');}}nction w(a,b,c){if(na(a))for(c=Q(c,10)||0,c=I.max(0<=c?c:a.length-I.abs(c),0);c<a.length;c++)if(b===a[c])return c;
return-1}function E(){return b(arguments,function(a,b){M(b,;return a},[])}function Ca(a){var b=/([\].|*?+(){}^$\\:=[])/g;return h(a)?a.replace(b,"\\$&"):a}function aa(a,b,c){var e=0<=c;c=I.abs(c);a=B(a);if(0===a.length||a.length>=c)return a;b=B(b);if(0===b.length)return a;c-=a.length;var d=I.ceil(c/b.length)+1;b=ga(d).join(b).slice(0,c);return e?b+a:a+b}function ba(a,b){if(!h(a))return a;b=h(b)?Ca(b):"\\s\\uFEFF\\xA0";return a.replace(new P("^["+b+"]+|["+b+"]+$","g"),
"")}function M(a,b,c,e,d){if(na(a))for(e=e||0;e<a.length&&(!1!==b.call(c,a[e],e,a)||!d);e++);else if(a)for(var f in a)if(J.prototype.hasOwnProperty.call(a,f)&&!1===b.call(c,a[f],f,a)&&d)break}function ra(a){h(a)?a=ba(a).split(" "):n(a)||(a=void 0);return a}function Da(a){return a=oa(a)?[a]:g(a,oa)}function na(a){return a&&k(a.length)&&0<=a.length&&9007199254740991>=a.length}unction Ea(a){if(!a)return a;var c=[[/\?&/g,"?"],[/@/,N("@")]];return b(c,
a)}var fa={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),queryKey:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@/]*@)([^:/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#/]*\.[^?#/.]+(?:[?#]|$)))*\/?)?([^?#/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
return{each:entries:function(a){return d(a,},every:f,filter:g,find:function(a,b,c){var e;M(a,function(a,d,f){return b.call(c,a,d,f)?(e=a,!1):!0},c,0,!0);return e},findIndex:function(a,b,c){var e=-1;M(a,function(a,d,f){return b.call(c,a,d,f)?(e=d,!1):!0},c,0,!0);return e},keys:c,map:d,reduce:b,some:function(a,b,c){var e=!1;M(a,function(a,d,f){return b.call(c,a,d,f)?(e=!0,!1):!0},c,0,!0);return e},values:e,isArray:n,isBoolean:isDate:m,isEmpty:u,isFunction:r,isInteger:isNil:l,isNumber:k,isNumeric:t,isObject:v,isPlainObject:function(a){if(!v(a))return!1;a=J.getPrototypeOf(J(a));if(null===a)return!0;a=J.prototype.hasOwnProperty.call(a,"constructor")&&a.constructor;return r(a)&&a instanceof a&&la.prototype.toString.call(a)===la.prototype.toString.call(J)},isPositiveInteger:function(a){var b=~~G(a);return B(b)===a&&0<b},isString:h,arrayFrom:function(a,
b,c){return na(a)?r(b)?d(a,b,c):e(a):[]},clone:C,extend:z,addQueryString:function(b,c){c=d(c,function(e,d){v(e)&&a.console.error("[utils]",'Invalid type for "params" value. Arrays/Objects should be serialized.',e,d,b,c);return N(d)+"="+N(e)});if(0===c.length)return b;var e=/\?/.test(b)?"&":"?";return b+e+c.join("&")},getAbsoluteUrl:getLocationFromUrl:F,matchStringUrls:function(c,e,d){if(/^\//.test(e)){var f=a.main.getCurrentBrowserData().href;
e=(f?F(f).host:"")+e}e=F(e);var f=b(e.queryVariables,function(a,b,c){a[c]=["matchExact",b];return a},{}),h={anchor:e.anchor,matcher:"matchExact"},g=/^www\./;d=F(d);return e.host.toLowerCase().replace(g,"")===d.host.toLowerCase().replace(g,"")&&a.evaluator.matchUrl(c,e.path,f,h,d)},parseUri:ea,getDateFromContextFormat:function(a){if(!h(a)||8!==a.length)throw new y('Invalid length for "str" argument, got "'+a+'"');var b=Q(a.substring(0,4),10),c=Q(a.substring(4,6),10)-1;a=Q(a.substring(6,8),10);return new D(b,
c,a,0,0,0,0)},getDateInContextFormat:function(b){if(!m(b))throw a.internal.createLogError('Invalid type for "date" argument, got "'+a.utils.getType(b)+'" for "'+b+'"',a.ERROR_TYPE_ARG_INVALID,{level:a.LOG_LEVEL_WARNING});var c=b.getFullYear(),e=aa(b.getMonth()+1,"0",2);b=aa(b.getDate(),"0",2);return B(c)+B(e)+B(b)},addClassName:function(a,b){M(Da(a),function(a){var c=E(p(a),ra(b));a.setAttribute("class",c.join(" "))})},getClassNames:p,hasClassName:function(a,b){var c=p(a);return f(ra(b),function(a){return Z(c,
a)})},removeClassName:function(a,b){b=ra(b);M(Da(a),function(a){var c=g(p(a),;a.setAttribute("class",c.join(" "))})},getIEVersion:function(a,b){var c=new P(b?"(?:MSIE|Trident.*rv|Edge)[ :/]([0-9]+)":"(?:MSIE|Trident.*rv)[ :]([0-9]+)","i");return(c=a.match(c))?Q(c[1],10):-1},getByDotString:function(a,c,e){c=c||window;e=z({empty:!0,nonObjects:!0,self:!0},e);"window"===a?a=window:(a=a.replace(/^\bwindow\b\.?/,""),a=b(a.split("."),function(a,b){return a&&J.prototype.hasOwnProperty.call(a,
b)?a[b]:void 0},c));return e.empty&&u(a)||e.self&&a===c||e.nonObjects&&!v(a)?void 0:a},getTimestamp:function(a){a=m(a)?a:new D;return I.round(a.getTime()/1E3)},getType:K,isDesktop:isDevice:A,isMobile:function(){return A("android")||A("ios")||A("othermobile")||A("windowsphone")},isTablet:function(){return A("androidtablet")||A("ipad")||A("othertablet")||A("windowstablet")},setInterval:function(b,c){(!t(c)||0>=c)&&a.log.error("Invalid interval delay argument, got "+c,
a.ERROR_TYPE_ARG_INVALID);return ya(a.guard(b),c)},setTimeout:q,waitFor:function(b,c,e,d){function f(){C=!0;F&&(X(F),F=void 0)}function h(a,b){try{return a(b)}catch(c){throw t(c),z.reject(c),c;}}function g(b){f();var c=a.utils.arrayFrom(arguments).slice(1);b.apply(null,c)}unction p(){if(!C)if(h(e,z))z.resolve();else if(0===v||D.now()<v)F=q(p,b);else{var a=new y("Timed out after "+c+" millisecond(s)");h(t,a);z.reject(a)}}var C=!1,n=r(d),F,z=a.Promise.withResolvers();z.promise=
new a.Promise(function(a,b,c){z.resolve=H.bind(g,null,a);z.reject=H.bind(g,null,b);c(f)});c=L(c);var v=0!==c?D.now()+c:c;a.runGuarded(p,void 0,{type:a.ERROR_TYPE_TIMEOUT});return z.promise},inArray:Z,indexOf:w,uniq:E,escapeRegExp:Ca,pad:aa,subs:function(a,c,e){if(c.length!==e.length)throw new y('Invalid lengths for "set1" and "set2" arguments, got '+c.length+" and "+e.length);return b(c,function(a,b,c){return a.replace(new P(b,"g"),e[c])},a)},trim:ba,trimInside:function(a){var b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
c=/\s+/g;return h(a)?a.replace(b,"").replace(c," "):a}}}();a.states=function(){function f(c){delete b[c];a.ready(function(){void 0!==a.context.states.session[c]&&(delete b[c],delete a.context.states.session[c],a.context.save())});a.events.trigger(a.EVENT_STATE_REMOVE,c)}function g(c,d,f){b[c]=d;f===a.STATE_TYPE_SESSION&&a.ready(function(){b[c]=d;a.context.states.session[c]=d;a.context.save()});a.events.trigger(a.EVENT_STATE_SET,c,d,f)}function c(){a.utils.each(a.context.states.session,function(a,
b){f(b)})}function d(b){a.utils.each(b.states.session,}var b={};return{init:function(){b={};a.events.once(a.EVENT_INIT_CONTEXT,d);a.events.once(a.EVENT_INIT_QUICK_CONTEXT,d);a.events.on(a.EVENT_VISIT,c)},get:function(a){return b[a]},getAll:function(){return a.utils.reduce(b,function(a,b,c){a[c]=B(b);return a},{})},remove:f,set:g}}();a.cookies=function(){function f(a){try{a+="=";for(var b=x.cookie.split(";"),c=0;c<b.length;c++){var d=b[c].replace(/^\s*/,"");if(0===d.indexOf(a))return Y(d.substring(a.length,
d.length))}}catch(f){}return null}function g(e,f,g){if(b){var u="";g&&(u=new D,g*=864E5,u.setTime(u.getTime()+g),u="; expires="+u.toGMTString());try{x.cookie=ka(e)+"="+ka(f)+u+c+"; path="+d,x.cookie.length>a.COOKIE_MAX_SIZE&&a.log.warn("Cookie size of "+x.cookie.length+", limit is "+a.COOKIE_MAX_SIZE,a.ERROR_TYPE_COOKIE_LONG,{module:a.internal.getCurrentModule()})}catch(r){throw a.internal.createLogError(r,a.ERROR_TYPE_STORAGE_EXCEPTION,{level:a.LOG_LEVEL_ERROR,module:a.internal.getCurrentModule()});
}}}var c="",d="/",b=!0;return{check:function(){try{return 0<=x.cookie.split(";").length}catch(a){}return!1},exists:get:f,isEnabled:function(){return b},remove:set:g,setCookieDomain:function(a){c=/\.[a-z]+$/.test(a)?";domain="+ka(a):""},setCookiePath:function(b){if(0<arguments.length&&!a.utils.isString(b))throw new y('Invalid type for cookie "path" argument, got "'+a.utils.getType(b)+'" for "'+b+'"');d=b||"/"},setEnabled:function(a){b=E(a)}}}();
a.debug=function(){var f,g=[],c;return{addEntry:function(a,b){var e=D.now();c=c||e;e=[a,e-c,b];g.push(e);f&&f(e)},clear:getAll:function(){return a.utils.arrayFrom(g)},setCallback:function(a){f=a}}}();a.log=function(){function f(d,b,e){var f=a.api.getApiUrl("error"),m=a.api.getOrigin();if(f&&m){var u=d instanceof y;if(!a.utils.isString(d)&&!u)throw new y('Invalid type for logging "data" argument, got "'+a.utils.getType(d)+'" for "'+d+'"');if(!a.utils.isNumber(b)&&!a.utils.isString(b))throw new y('Invalid type for logging "type" argument, got "'+
a.utils.getType(b)+'" for "'+b+'"');if(!e||!e.level||!a.utils.isString(e.level))throw new y('Invalid type for logging "options" argument or "level" property, got "'+a.utils.getType(e)+'" for "'+e+'"');var r=c(e);if(u||void 0===e.trace)u=void 0!==d.stack?d.stack:(new y).stack,r.trace=a.internal.truncate(B(u),a.MAXIMUM_TRACE_LENGTH);e=g(m,d,b,e.level,r);u=a.utils.addQueryString(f,e);u.length>a.MAXIMUM_URL_LENGTH&&(d="URL limit of "+a.MAXIMUM_URL_LENGTH+' exceeded. URL: "'+N(a.internal.truncate(u,1E3))+
'"',b=a.ERROR_TYPE_URL_LONG,e=g(m,d,b,a.LOG_LEVEL_ERROR,r),u=a.utils.addQueryString(f,e));a.internal.send(u);f=a.console[e.level]||a.console.log;switch(e.level){case a.LOG_LEVEL_CRITICAL:f=a.console.error;break;case a.LOG_LEVEL_WARNING:f=a.console.warn}f("[log]","Data:",d,",","Type:",b,",","Info:",e)}else a.console.warn("[log]","easy.api has not been initialized")}function g(c,b,e,f,g){c=a.utils.extend({},g,{message:B(b),errorType:e,level:f,url:a.main.getCurrentBrowserData().href||T.href,userAgent:O.userAgent,
origin:c,cookieId:a.uid.get(),ver:a.getVersion(),customScriptUpdatedAt:a.CUSTOM_SCRIPT_UPDATED_AT});b.name&&(c.name=b.name);b=a.internal.getWorkspaceId();0<b&&(c.workspaceId=b);return c}function c(c){var b={html:[a.utils.isString,B],trace:[a.utils.isString,B],module:[a.utils.isString,B],modules:[a.utils.isString,B],sharedCodeId:[a.utils.isNumeric,G],messageId:[a.utils.isNumeric,G],revisionId:[a.utils.isNumeric,G],positionId:[a.utils.isNumeric,G],rendererName:[a.utils.isString,B],segmentId:[a.utils.isString,
B],templateId:[a.utils.isString,B],triggerId:[a.utils.isNumeric,G],scriptId:[a.utils.isNumeric,G],debug:[a.utils.isString,B]},e=a.guard.current(),f={};a.utils.each(b,function(b,g){var r=void 0!==c[g]?c[g]:e[g];if(void 0!==r){if(!(0,b[0])(r))throw new y('Invalid type for logging "'+g+'" property, got "'+a.utils.getType(r)+'" for "'+r+'"');f[g]=(0,b[1])(r)}});return f}return{error:function(c,b,e){return f(c,b,a.utils.extend({},e,{level:a.LOG_LEVEL_ERROR}))},info:function(c,b,e){return f(c,b,a.utils.extend({},
e,{level:a.LOG_LEVEL_INFO}))},warn:function(c,b,e){return f(c,b,a.utils.extend({},e,{level:a.LOG_LEVEL_WARNING}))},send:f}}();a.evaluator=function(){function f(a){return null===a?null:""===a?"/":"/"!==a?a.replace(/\/$/,""):a}function g(a,b,c){c&&(a=a.toLowerCase(),b=b.toLowerCase());return b&&0<=b.toLowerCase().indexOf(a.toLowerCase())}function c(a,b,c){var e="";c&&(e+="i");return(new P(a,e)).test(b)}function d(a){return(a=aa[a])?a:!1}function b(a){for(var b in aa)if(aa.hasOwnProperty(b)&&a===aa[b])return b;
return!1}function e(b){for(var c,e=0,d=0;d<b.length;d+=1)c=a.utils.getDateFromContextFormat(b[d]),c>=A&&(e+=1);return e}function n(b,c){function e(b){var d=[],g,h;g=c[b.keyType];if(g.hasOwnProperty(b.keyValue))for(f=a.evaluator.getMatcherFunction(b.match),h=g[b.keyValue],g=0;g<h.length;g+=1)d.push(f(b.content,h[g]));else d.push(!1);return ba.or.apply(this,d)}var d=!1,f,d=[],g=[];switch(b[0]){case "and":g=ba.and;break;default:return!1}for(var h=1;h<b.length;h+=1)d.push(e(b[h]));return d=g.apply(this,
d)}function m(b){if(!a.utils.isArray(b)||0===b.length)throw y("ruleEvaluator expects an array, given:"+b);var c=b[0];b=b.slice(1,b.length);var e=[];if(!ba.hasOwnProperty(c)||!a.utils.isFunction(ba[c]))throw y("Not a valid evaluate function: "+c);M=c;G=b;for(var d=0;d<b.length;d++)a.utils.isArray(b[d])?e[d]=m(b[d]):e[d]=b[d];return ba[c].apply(window,e)}var u={},r,l,k,t,v,h,C,z,F,ea,p,K,A,q,Z,x,B={},E,aa={matchExact:function(a,b,c){c&&(a=a.toLowerCase(),b=b.toLowerCase());return a.toLowerCase()===
b.toLowerCase()},matchPartial:g,matchBegins:function(a,b,c){c&&(a=a.toLowerCase(),b=b.toLowerCase());return b&&0===b.toLowerCase().indexOf(a.toLowerCase())},matchRegex:c,matchContains:function(a,b,c){c&&(a=a.toLowerCase(),b=b.toLowerCase());return b&&0<=b.indexOf(a)}},ba={and:function(){for(var a=0;a<arguments.length;a+=1)if(!arguments[a])return!1;return!0},or:function(){for(var a=0;a<arguments.length;a+=1)if(arguments[a])return!0;return!1},sum:function(){for(var a=0,b=0;b<arguments.length;b+=1)a+=
Q(arguments[b],10);B={};return a},gte:lte:gt:ly:eq:not:function(a){return!a},matchReferer:function(b){var c=a.utils.parseUri(b),e=v.host===c.host;e||/^www\./.test(c.host)?e||!/^www\./.test(c.host)||/^www\./.test(v.host)||(e="www."+v.host===c.host):e=v.host==="www."+c.host;e&&(q.referer=q.referer||{},q.referer[b]=x);return!e&&q.referer&&q.referer[b]?a.utils.getDateFromContextFormat(q.referer[b])>=
A:e},matchLandingpage:function(b){b=h[b];return"undefined"!==typeof b?(b=a.utils.getDateFromContextFormat(b),b>=A):!1},pathVisits:function(b){var c;a.config&&a.config.sharedPages&&(c=a.config.sharedPages[b]);if(c){if(B[c])return 0;B[c]=1;c=u[c]}else c=r[b];return"undefined"===typeof c||a.utils.isArray(c)?"undefined"===typeof c?0:e(c):(a.log.error("pathVisits not an array for id:"+b+", typeof:"+typeof c+", stringified:"+w.JSON.stringify(c),a.ERROR_TYPE_ARG_INVALID),0)},inSegment:enterSegment:function(b){var c=E&&E.enterSegment&&a.utils.inArray(E.enterSegment,b)?!0:!1;b=p&&p.enter?p.enter[b]:null;return c?!0:b?(b=a.utils.getDateFromContextFormat(b),b>=A):!1},leaveSegment:function(b){var c=E&&E.leaveSegment&&a.utils.inArray(E.leaveSegment,b)?!0:!1;b=p&&p.leave?p.leave[b]:null;return c?!0:b?(b=a.utils.getDateFromContextFormat(b),b>=A):!1},customAction:function(a,b){var c=F[a],d=0;if(!c)return!1;d=e(c);return d>=b},newUser:function(){return 1===l.length||k>=A},matchRefererUrl:function(c,
e){var g=a.utils.parseUri(e),h=b(c)+"|"+e;a.utils.isFunction(c)||(c=d(c));g.path=f(g.path);v.path=f(v.path);if(g=c(g.host+"/"+g.path,v.host+"/"+v.path))q.refererUrl=q.refererUrl||{},q.refererUrl[h]=x;else if(q.refererUrl&&q.refererUrl[h])return a.utils.getDateFromContextFormat(q.refererUrl[h])>=A;return g},matchForm:function(b,c){a.utils.isFunction(b)||(b=d(b));return a.evaluateEvents.matchEvent("forms",E,b,c,q,x,A)},matchLink:function(b,c){a.utils.isFunction(b)||(b=d(b));return a.evaluateEvents.matchEvent("links",
E,b,c,q,x,A)},matchSearchengine:function(b,c){var e=!1,d=!1,f=[],h,t=b+"|"+c;if(v.queryVariables){switch(b){case "bing":e="bing.com";h="q";break;case "yahoo":e="yahoo.com";h="p";break;case "askcom":e="ask.com";h="q";break;case "google":e="google.";h="q";break;default:return!1}v.queryVariables[h]&&(f=ca(v.queryVariables[h]).split(/\+| |%20/));e=e&&g(e,v.host);if(""!==c)for(c=c.split(","),h=0;h<f.length;h+=1)for(var p=0;p<c.length;p+=1){if(f[h]===c[p]){d=!0;break}}else d=!0;d=e&&d}else d=!1;d?(q.searchEngine=
q.searchEngine||{},q.searchEngine[t]=x):q.searchEngine&&q.searchEngine[t]&&(d=a.utils.getDateFromContextFormat(q.searchEngine[t])>=A);return d},matchMetaRules:n,matchMetaTag:function(b,c){function e(a){a===c[d]&&(h=!0)}var d,f=b+"|"+c,h=!1,g=!1;if(!c)return!1;c=c.split(",");if("keyword"===b&&C.keywords&&0<C.keywords.length){"object"!==typeof c&&(c=[c]);for(d=0;d<c.length;d+=1)a.utils.each(C.keywords,e);g=h}else if("description"===b&&C.description)for(g=!0,d=0;d<c.length;d+=1){if(-1===C.description.indexOf(c[d])){g=
!1;break}}else if("ogtitle"===b&&C.ogtitle)for(g=!0,d=0;d<c.length;d+=1){if(-1===C.ogtitle.indexOf(c[d])){g=!1;break}}else if("ogdescription"===b&&C.ogdescription)for(g=!0,d=0;d<c.length;d+=1)if(-1===C.ogdescription.indexOf(c[d])){g=!1;break}g?(q.metaData=q.metaData||{},q.metaData[f]=x):q.metaData&&q.metaData[f]&&(g=a.utils.getDateFromContextFormat(q.metaData[f])>=A);return g},matchCountry:function(b){var c=""!==b&&b===z.country;c?(q.country=q.country||{},q.country[b]=x):q.country&&q.country[b]&&
(c=a.utils.getDateFromContextFormat(q.country[b])>=A);return c},matchDevice:function(b){var c=a.utils.isDevice(b);c?(q.device=q.device||{},q.device[b]=x):q.device&&q.device[b]&&(c=a.utils.getDateFromContextFormat(q.device[b])>=A);return c},parse:function(b){switch(b.method){case "conversion":var c=b.conversionType;(b=b.conversionId)&&(c=a.visitsHistory.getConversionIdKey(c,b));return 1<=e(ea[c]||[])?!0:!1;default:return!1}},siteVisitCount:metaCount:function(a){return K.hasOwnProperty(a)?
e(K[a]):0}},M=null,G=null;return{evaluate:function(b,c,e){"undefined"===typeof e&&(e=0);A=new D(Z.toString());A.setDate(A.getDate()-e);A.setHours(0);A.setMinutes(0);A.setSeconds(0);x=a.utils.getDateInContextFormat(Z);B={};try{return E=c,m(b)}catch(d){if(a.isDev())throw d;a.log.error(d,a.ERROR_TYPE_EXCEPTION,{debug:"Last fn: "+M+", last part: "+w.JSON.stringify(G)+", rule: "+w.JSON.stringify(b)});return null}},setContext:function(a){r=a.pageVisits;l=a.siteVisits;t=a.segments;v=a.referer;h=a.landingPages;
K=a.metaCount;C=a.metaData;z=a.country;k=new D(a.firstVisit);F=a.customActions;ea=a.conversions;p=a.segmentEvents;Z=a.evaluationTime;q=a.evaluatedEvents||{}},setSharedContext:getContext:matchUrl:function(b,e,g,h,t){var p=null,C;a.utils.isFunction(b)||(b=d(b));if(b===c){if(!b(e,t.path))return!1}else if(e=a.utils.parseUri(e),e.path=f(e.path),t.path=f(t.path),!b(e.path,t.path))return!1;for(p in g)if(g.hasOwnProperty(p)&&(b=d(g[p][0]),
e=g[p][1].toString(),C=t.params[p],"undefined"===typeof C||!b(e,C,!0)))return!1;return h.anchor&&(g=d(h.matcher),!g(h.anchor,t.anchor))?!1:!0},matchMetaRules:n,getMatcherFunction:d,getMatcherName:b,canonizePathSlashes:f}}();a.evaluateEvents=function(){return{matchEvent:function(f,g,c,d,b,e,n){var m=a.evaluator.getMatcherName(c)+"|"+d;g[f]&&g[f][0]&&a.utils.matchStringUrls(c,d,g[f][0])&&(b[f]=b[f]||{},b[f][m]=e);return b[f]&&b[f][m]?a.utils.getDateFromContextFormat(b[f][m])>=n:!1}}}();(function(){function f(c,
d,b){return a.runGuarded(c,[d],a.utils.extend({},b._logOptions,{context:b,errorReturn:null}))}.baseEvaluator=function(){this._isTraceEnabled=a.console.isEnabled();this._logOptions=void 0;this._clearTrace();this.values={document:function(){return x},location:function(){return a.main.getCurrentBrowserData().href},referrer:segments:function(){return a.context.segments}}};a.baseEvaluator.prototype.evaluatorFunctions=
{and:function(){return a.utils.every(arguments,function(a){return a})},or:function(){return a.utils.some(arguments,function(a){return a})},"+":function(){return a.utils.reduce(arguments,0)},">=":"<=":">":"<":"eq?":function(a,d){return!0===a&&"true"===d||!1===a&&"false"===d||"true"===a&&!0===d||"false"===a&&!1===d?!0:a==d},"eq??":not:begins:function(c,d){return a.utils.isString(c)&&0===c.indexOf(d)},contains:function(c,d){return a.utils.isString(c)&&-1<c.indexOf(d)},ends:function(c,d){return a.utils.isString(c)&&a.utils.isString(d)&&-1!==c.indexOf(d,c.length-d.length)},exists:function(c){return a.utils.isNil(c)?!1:a.utils.isBoolean(c)||a.utils.isNumber(c)||!a.utils.isEmpty(c)},in:"regex?":function(c,d,b){a.utils.isNil(c)&&(c="");return(new P(d,
b)).test(c)},array:function(){return a.utils.arrayFrom(arguments)},location:function(a,d){return this._url(this.getEvaluatorValue("location"),a,d)},referrer:function(a,d){return this._url(this.getEvaluatorValue("referrer"),a,d)},url:domelem:function(c,d){var b=this.getEvaluatorValue("document"),b=a.domElements.selector(c,b)[0];if(!b)return null;if(!d)return b;var e=/^attr:/,f=/^prop:/;return"html"===d?b.innerHTML:"text"===d?b.textContent||b.innerText||
null:f.test(d)?(e=d.replace(f,""),e in b?b[e]:null):e.test(d)?b.getAttribute(d.replace(e,"")):b.getAttribute(d)||b[d]},cookie:function(c){return a.cookies.get(c)},localstorage:function(a){return ma.getItem(a)},js_var:function(c){return a.utils.getByDotString(c,window,{empty:!1,nonObjects:!1,self:!1})},pluck:function(c,d){return a.utils.reduce(d,function(b,c){return a.utils.isNil(b)?void 0:b[c]},c)},js:var:
inSegment:function(a){return void 0!==this.getEvaluatorValue("segments")[a]}};a.baseEvaluator.prototype.evaluate=function(c){this._clearTrace();if(!a.utils.isArray(c))throw new y('Invalid type for evaluator "rules" argument, got "'+a.utils.getType(c)+'"');return 0===c.length?!0:f(c,this)};a.baseEvaluator.prototype.addEvaluatorFunction=function(c,d){a.utils.isFunction(d)?this.evaluatorFunctions[c]=d:a.log.error('Invalid type for evaluator "fn" argument, got "'+
a.utils.getType(d)+'" for "'+c+'"',a.ERROR_TYPE_ARG_INVALID)};a.baseEvaluator.prototype.getEvaluatorValue=function(c){if(!this.values.hasOwnProperty(c))return null;c=this.values[c];return a.utils.isFunction(c)?c.call(this):c};a.baseEvaluator.prototype.removeEvaluatorValue=a.baseEvaluator.prototype.setEvaluatorValue=function(c,d){this.values[c]=a.utils.isFunction(d)?d:function(){return d}};a.baseEvaluator.prototype._ruleEvaluator=function(c){if(!a.utils.isArray(c)||
0===c.length)throw new y('Invalid type for evaluator "rules" argument, got "'+a.utils.getType(c)+'"');this._isTraceEnabled&&this._addRulesTrace(c);var d=c[0];if(!this.evaluatorFunctions.hasOwnProperty(d)||!a.utils.isFunction(this.evaluatorFunctions[d]))throw new y('Invalid evaluator function type, got "'+a.utils.getType(d)+'" for "'+d+'"');var b=c.slice(1),e=a.utils.reduce(b,function(b,c,e){a.utils.isArray(c)?b[e]=this._ruleEvaluator(c):b[e]=c;return b},[],this);return f(function(){var a=this.evaluatorFunctions[d].apply(this,
e);this._isTraceEnabled&&this._addResultTrace(d,e,a);return a},c,this)};a.baseEvaluator.prototype._url=function(c,d,b){if(!a.utils.inArray("anchor host href path protocol query".split(" "),d))return"";var e=a.utils.parseUri(c);switch(d){case "href":return c;case "query":return b?e.queryKey[b]:e.query;default:return e[d]}};a.baseEvaluator.prototype.setErrorOptions=a.baseEvaluator.prototype.getTrace=function(){return a.utils.clone(this._trace)};a.baseEvaluator.prototype.printTrace=
function(c){if(this._isTraceEnabled&&a.console.isActiveLevel(a.LOG_LEVEL_DEBUG)){a.console.groupCollapsed('Start [baseEvaluator]: "'+c+'"');a.console.debug("[baseEvaluator]",'Start [baseEvaluator]: "'+c+'" trace ----------------');var d=this.getTrace();a.utils.each(d,function(b){a.console.debug("[baseEvaluator]",c,"Trace: "+b.text,"Count: "+b.count,"Depth: "+b.depth)});a.console.debug("[baseEvaluator]",'---------------- End [baseEvaluator]: "'+c+'" trace');a.console.groupEnd()}};a.baseEvaluator.prototype._addTrace=
function(a){this._trace.push({count:this._count,depth:this._depth,text:a})};a.baseEvaluator.prototype._addRulesTrace=function(a){this._count+=1;this._depth+=1;this._addTrace(g(a))};a.baseEvaluator.prototype._addResultTrace=function(a,d,b){d=g(d).replace(/(^\[|\]$)/g,"");this._addTrace('["'+a+'",'+d+"] = "+g(b));--this._depth};a.baseEvaluator.prototype._clearTrace=function(){this._depth=this._count=0;this._trace=[]}})();a.triggers=function(){function f(b){return a.utils.extend({eventName:b.type},b)}
function g(c){switch(c.type){case a.EVENT_DOM_EVENT:return c.type+", "+c.eventName+", "+c.selector;case a.EVENT_DOM_WAIT:return c.type+", "+c.selector+", "+B(b(c.timeout));case a.EVENT_EASY_EVENT:return c.type+", "+c.eventName;case a.EVENT_JSVAR_WAIT:return c.type+", "+c.js_var+", "+B(b(c.timeout));default:return c.type}}function c(b,c){return a.utils.filter(v,function(e){return g(e.on_event)===g(b)&&a.triggers.evaluateTrigger(e,c)})}function d(b){switch(b.eventName){case a.EVENT_MESSAGE_SHOW:case a.EVENT_MESSAGE_CLICK:case a.EVENT_MESSAGE_TRUE_DISPLAY:return h.message;
case a.EVENT_CUSTOMACTION:return h.customAction;case a.EVENT_PRODUCT_PURCHASE:return h.productPurchase;case a.EVENT_CONVERSION:return h.conversion;case a.EVENT_LOCATION:return h.location;case a.EVENT_VISIT:break;default:return h.firstArg}}function b(a){a=1E3*G(a);return 0<=a?a:0}function e(b,c,e){return a.guard(function(){var c=e?e.apply(null,arguments):void 0;a.triggers.fireEvent(b,c)},{html:"Trigger event: "+c})}function n(c){var z=c.on_event,F=g(z);if(!t[F])switch(z.type){case a.EVENT_DOM_EVENT:if(!a.utils.inArray(["click",
"keypress","keydown","keyup","submit"],z.eventName))throw new y("Invalid trigger DOM event for "+c.id+', got "'+z.eventName+'"');c=e(z,F,h.eventElement);a.domEvents.on(x,z.eventName,z.selector,c);r(z,F,c);break;case a.EVENT_DOM_WAIT:c=e(z,F,h.firstElement);var n=a.domElements.waitFor({selector:z.selector,timeout:b(z.timeout),success:c});n.catch(H.bind(l,null,z,F,n));r(z,F,c,n);break;case a.EVENT_EASY_EVENT:m(z,F,d(z));break;case a.EVENT_JSVAR_WAIT:u(z,F);break;case a.EVENT_SCRIPT_LOAD:case a.EVENT_EASY_READY:case a.EVENT_DOM_READY:m(f(z),
F,h.empty);break;case a.EVENT_DATALAYER:m(f(z),F,h.firstArg);break;case a.EVENT_URL_CHANGED:m(f(z),F,h.urlChanged);break;default:throw new y("Invalid trigger event for "+c.id+', got "'+z.type+'"');}}function m(b,c,d){d=e(b,c,d);a.events.on(b.eventName,d);r(b,c,d)}function u(c,d){var f=e(c,d),g=a.utils.waitFor(100,b(c.timeout),function(){return void 0!==a.utils.getByDotString(c.js_var,window,{empty:!1,nonObjects:!1,self:!1})});g.then(f).catch(H.bind(l,null,c,d,g));r(c,d,f,g)}function r(b,c,e,d){b=
a.utils.clone(b);b.fn=e;b.options=d;t[c]=b}function l(b,c,e,d){var f=a.utils.filter(v,,f=a.utils.map(f,function(a){return a.id}),h=", trigger ids: "+f.join(",");e.isCancelled()?a.console.info(a.MODULE_TRIGGER,'Trigger event "'+c+'" was cancelled'+h,b,d):a.console.warn(a.MODULE_TRIGGER,'An error occurred with the trigger event "'+c+'"'+h,b,d);a.debug.addEntry("errors_trigger_events",{error:d,triggerIds:f})}var k,t={},v,h={empty:conversion:function(b){return a.utils.clone(b)},
eventElement:firstArg:firstElement:urlChanged:function(a,b){return{url:a,previousUrl:b}},message:function(b){return a.utils.clone(b)},customAction:productPurchase:function(b){return a.utils.clone(b)},location:function(b){return a.utils.clone(b)}};return{init:function(b){b&&0!==b.length&&(k=new a.baseEvaluator,v=a.utils.clone(b),a.utils.each(v,a.guard(n,{module:a.MODULE_TRIGGER})))},
clear:function(){a.utils.each(t,function(b){switch(b.type){case a.EVENT_DOM_EVENT:a.domEvents.off(x,b.eventName,b.selector,b.fn);break;case a.EVENT_DOM_WAIT:case a.EVENT_JSVAR_WAIT:b.options.cancel();break;default:a.events.off(b.eventName,b.fn)}});t={};a.events.clearEvent(a.EVENT_TRIGGER_EVENT);a.events.clearEvent(a.EVENT_TRIGGER_FIRE)},evaluateTrigger:function(b,c){if(!k)return a.log.error("Evaluator not initialized",a.ERROR_TYPE_INIT,{tiggerId:b.id}),!1;a.utils.each(c,function(a,b){k.setEvaluatorValue(b,
a)});k.setErrorOptions({type:a.ERROR_TYPE_TRIGGER_EXCEPTION,level:a.LOG_LEVEL_ERROR,module:a.MODULE_TRIGGER,triggerId:b.id});var e=k.evaluate(b.rules);a.utils.each(c,function(a,b){k.removeEvaluatorValue(b,a)});!e&&a.console.isEnabled()&&k.printTrace("easy.triggers - "+b.id);e&&(a.events.trigger(a.EVENT_TRIGGER_FIRE,b,c),b.alias&&a.events.trigger(b.alias,b,c));return e},fireEvent:function(b,e){k&&v?a.events.trigger(a.EVENT_TRIGGER_EVENT,{data:e,event:b,triggers:c(b,e)}):a.log.error("Evaluator or triggers not initialized",
a.ERROR_TYPE_INIT)},getEvaluator:function(){return k}}}();a.events=function(){function f(b,e,f,m,u){f=a.guard(e,{context:f});var r={origFn:e,fn:f,invoked:!1,type:u};c[b]=c[b]||[];c[b].push(r);m=a.utils.extend({ignoreTriggered:!1},m);m.ignoreTriggered||a.utils.each(d[b],function(a){g(r,a)})}function g(a,c){a.handled&&"once"===a.type||(a.handled=!0,a.fn.apply(null,c))}var c={},d={};return{clear:clearEvent:getEventDataObject:function(b,c){switch(b){case a.EVENT_CUSTOMACTION:return{name:c[0],
value:c[1]};case a.EVENT_STATE_REMOVE:return{name:c[0]};case a.EVENT_STATE_SET:return{name:c[0],value:c[1],type:c[2]};case a.EVENT_ERROR_SENT:return{error:c[0],code:c[1]};default:return c[0]}},isTriggered:function(a){return E(d[a])},off:function(b,e){var d=a.utils.isFunction(e);c[b]=a.utils.filter(c[b],},on:function(a,c,d,g){f(a,c,d,g,"on")},once:trigger:function(b){var e=a.utils.arrayFrom(arguments).slice(1);a.console.info("[events]",
b,e);a.debug.addEntry("event",{name:b,args:e});d[b]=d[b]||[];d[b].push(e);a.utils.each(c[b],function(a){g(a,e)})}}}();var W={previous:void 0,zone:{type:a.ERROR_TYPE_EXCEPTION,module:a.MODULE_SITE,modules:a.MODULE_SITE}};a.guard=function(f,g){function c(){W={previous:W,zone:d};try{return f.apply(g.context||this,arguments)}catch(c){c instanceof y||(c=B(c));if(g.onError)return g.onError(c,d.type,d),g.errorReturn;var b=c.type||d.type,e=a.internal.createLogOptions(c.options,g.level);try{a.log.send(c,B(b),
a.utils.extend({level:a.LOG_LEVEL_ERROR},d,e))}catch(u){W.zone={};var n=B(a.MODULE_SITE);a.log.send(u,"guard_"+a.ERROR_TYPE_ARG_INVALID,{level:B(a.LOG_LEVEL_ERROR),module:n,modules:n,debug:c+", Type: "+b})}}finally{W=W.previous}return g.errorReturn}if(f.hasExceptionHandling)return f;var d=a.utils.extend({},W.zone);a.utils.isObject(g)?a.utils.each(g,:g={};W.zone.module!==d.module&&(d.modules=W.zone.modules+" "+d.module);a.utils.isNumber(d.type)||a.utils.isString(d.type)||
(d.type=a.ERROR_TYPE_EXCEPTION);delete d.level;delete d.context;delete d.errorReturn;delete d.onError;c.origFn=f;c.hasExceptionHandling=!0;return c};a.guard.current=a.runGuarded=function(f,g,c){return a.guard(f,c).apply(null,a.utils.isArray(g)?g:[])};a.uid=function(){unction g(a){d(a,"uid");b=a}function c(b){var c,d=a.utils.find({"bingbot|adidxbot|BingPreview":function(){return"bingbot.00000000"},"Google Web Preview|Googlebot|Mediapartners-Google|AdsBot-Google":function(){return"webpreview.00000000"},
HeadlessChrome:"AdobeAIR/(\\d+(\\.\\d+)*)":function(a){return"adobeair_"+a[1].replace(/\./g,"")+".00000000"}},function(a,d){return c=b.match(new P(d))});return d&&c?d(c):void 0}function d(b,c){if(!a.utils.isString(b)||0===b.length)throw new y('Invalid type for "'+c+'" argument, got "'+a.utils.getType(b)+'" for "'+w.JSON.stringify(b)+'"');}var b=null;return{get:function(){return b},getDecilForUid:function(b){d(b,"uid");b=Q(a.md5(b+"randomized decil").substr(0,
8),16)/I.pow(2,32);return Q(10*b,10)+1},isDefined:f,isInComparisonGroup:function(b){d(b,"uid");return Q(a.md5(b).substr(0,8),16)/I.pow(2,32)<a.config.comparisonGroupRatio},newUid:function(a){d(a,"userAgent");if(!f()){var n;if(!(n=c(a))){n=2166136261;for(var m=0;m<a.length;m++)n+=(n<<1)+(n<<4)+(n<<7)+(n<<8)+(n<<24),n^=a.charCodeAt(m);n=(n&2147483647).toString(36)+"."+D.now().toString(36)}g(n)}return b},set:g,_testResetUID:}();a.segmentchange=function(){function g(b,c){var e=D.now(),d=a.utils.getDateInContextFormat(C);"enter"===c?(a.context.segmentEvents.enter[b]=d,delete a.context.segmentEvents.leave[b]):"leave"===c&&(a.context.segmentEvents.leave[b]=d,delete a.context.segmentEvents.enter[b]);a.context.segmentChanged=e;a.context.save()}function c(b,c){l=l||{};k=k||{};l[b]=l[b]||[];k[b]=k[b]||[];a.utils.inArray(k[b],c)||k[b].push(c);a.utils.inArray(l[b],c)||l[b].push(c)}function d(a,b){var c=[],e=l[a];if(e){for(var d=0;d<e.length;d+=1)e[d]!==b&&
c.push(e[d]);l[a]=c}}function b(a,b){var e=t[a];t[a]=b;e!==b&&(0===b?(c("leaveSegment",a),d("enterSegment",a)):1===b&&(c("enterSegment",a),d("leaveSegment",a)),t[a]=b)}function e(b,c){if(f(b))return!1;if(c)a.context.segments[b]=1,a.context.save(),a.api.setUserSegment(null,b,"value1"),g(b,"enter"),a.events.trigger(a.EVENT_SEGMENT_ENTER,b);else{var e=a.utils.clone(a.context.segments);e[b]=1;u({enterSegment:[b]},new D,e)}return!0}function n(b,c){if(!f(b))return!1;if(c)delete a.context.segments[b],a.context.save(),
a.api.setUserSegment(null,b,"value0"),g(b,"leave"),a.events.trigger(a.EVENT_SEGMENT_LEAVE,b);else{var e=a.utils.clone(a.context.segments);e[b]=0;u({leaveSegment:[b]},new D,e)}return!0}function m(b,c,e){return""===b||null===b||"undefined"===typeof b?!1:a.evaluator.evaluate(b,c,e)}function u(b,c,e){var d={};t=e||a.utils.clone(a.context.segments);k=b;for(e=0;10>e;e+=1){l={};a.segmentchange.evaluateSegments(b,c);a.segmentchange.evaluateSegmentGroups(b);var f=[];a.utils.each(l.enterSegment,function(a){f.push(a)});
a.utils.each(l.leaveSegment,function(a){f.push(a)});if(0===f.length)break;a.utils.each(f,}10===e&&(b="segmentchange.evaluate(): max evaluation rounds:10 reached\n"+w.JSON.stringify(d),a.log.error(b,a.ERROR_TYPE_ARG_INVALID,{module:a.MODULE_SEGMENT}),a.console.log("[segmentchange]",b));r(t);t={};return{evaluationRounds:e,changesBySegment:d}}function r(b){var c=0;a.utils.each(b,function(b,d){var f=a.context.segments.hasOwnProperty(d);0===b&&f?(n(d,!0),c+=1):1!==b||f||
(e(d,!0),c+=1)});return c}var l={},k={},t={},v=[],h,C;return{init:function(a,b){k={};v=a.segments;h=a.segmentGroups||{};C=b},evaluate:u,evaluateSegments:function(c,e){a.context.evaluationTime=e;a.evaluator.setContext(a.context);a.sharedContext&&a.evaluator.setSharedContext(a.sharedContext);for(var d=0;d<v.length;d+=1){var f=v[d],g="sggp_"+f.group;h.hasOwnProperty(g)&&(h[g].rules||(h[g].rules={}),h[g].rules[f.name]=f);c.rule=f;var g=m(f.leave,c,f.timelimit),n=m(f.enter,c,f.timelimit);null!==n&&null!==
g&&(n&&g&&(n=!1),t.hasOwnProperty(f.name)?(g||!n&&f.autoexit)&&b(f.name,0):n&&b(f.name,1))}a.context.evaluatedEvents=a.evaluator.getContext().evaluatedEvents},evaluateSegmentGroups:function(c){function e(c,d,f){function g(a){a=w.JSON.stringify(a);return a=a.replace(/conversionType":"([^"]+)","conversionId":"([^"]+)"/g,}function h(b,c){var e=!1,d=g(b.enter),f;for(f in c)if(c.hasOwnProperty(f)){var t=c[f];if(e)break;if(a.utils.isArray(t))for(var p=
0;p<t.length;p+=1)if(-1<d.indexOf('"'+t[p]+'"')){e=!0;break}}return e}var v=[],n=[],C=[],F=[],m;for(m=0;m<c.length;m+=1){var z=c[m];1===t[z]&&h(d[z],f)&&C.push(z);a.context.segments.hasOwnProperty(z)&&1===t[z]?v.push(z):1===t[z]&&n.push(z)}(d=C.pop())||(d=0<v.length?v.pop():n.pop());for(m=0;m<c.length;m+=1)c[m]===d?b(c[m],1):1===t[c[m]]&&(b(c[m],0),F.push(c[m]))}a.utils.each(h,function(a){if("funnel"===a.mode){a=a.segments;var d=-1,f;for(f=0;f<a.length;f+=1)1===t[a[f]]&&(d=f);for(f=0;f<d;f+=1)1===
t[a[f]]&&b(a[f],0)}else"radio"===a.mode&&e(a.segments,a.rules,c)})},expireSegments:function(){var b=!1,c=new D(C);c.setHours(0);c.setMinutes(0);c.setSeconds(0);c.setMilliseconds(0);for(var e=0;e<v.length;e+=1)if(a.context.lastVisit.time&&v[e].timelimit&&v[e].autoexit&&a.context.segmentEvents.enter[v[e].name]){var d=new D(a.context.lastVisit.time);d.setDate(d.getDate()+v[e].timelimit);d.setHours(0);d.setMinutes(0);d.setSeconds(0);d.setMilliseconds(0);d<c&&(delete a.context.segments[v[e].name],b=!0)}b&&
a.context.save()},segmentChanged:g,setSegment:e,removeSegment:n,inSegment:f}}();a.uihooks=function(){function f(b,c){return function(d,f){var g={};g[b]=[f[c]];a.segmentchange.evaluate(g,new D)}}function g(b,c,d){for(var f=0;f<c.length;f++)if(a.utils.matchStringUrls(c[f][0],c[f][1],b)){d();break}}var c=[],d=[];return{initForms:function(b){a.utils.each(a.domElements.selector("form"),function(e){a.utils.isString(e.action)&&g(e.action,b,function(){a.utils.inArray(c,e)||(a.domEvents.on(e,"submit."+a.DOM_EVENT_NAMESPACE,
f("forms","action")),c.push(e))})})},initLinks:function(b){a.utils.each(a.domElements.selector("a"),function(c){g(c.getAttribute("href"),b,function(){a.utils.inArray(d,c)||(a.domEvents.on(c,"mousedown."+a.DOM_EVENT_NAMESPACE,f("links","href")),d.push(c))})})},forms:c,links:d}}();a.main=function(){function f(b,c,e){"success"===k?a.log.warn('initFailure function called, when the state was "success"',a.ERROR_TYPE_CORE_INIT):(a.events.trigger(a.EVENT_INIT_FAILURE),k="failure",void 0!==b&&a.log.send(b instanceof
y?b:B(b),B(c),a.internal.createLogOptions(e)))}function g(b,c){a.utils.isString(b)&&(l.href=b);a.utils.isString(c)&&(l.referer=c)}function c(b,c,d){a.utils.isString(c)||(a.log.error('Invalid "referer" argument, got "'+c+'"',a.ERROR_TYPE_CORE_INIT),c="");a.utils.isString(b.href)||a.log.error('Invalid type for "href" property, got "'+a.utils.getType(b.href)+'"',a.ERROR_TYPE_CORE_INIT);a.utils.isString(b.search)||a.log.warn('Invalid type for "search" property, got "'+a.utils.getType(b.search)+'"',a.ERROR_TYPE_CORE_INIT);
g(b.href,c);u(b,c);e(b,c,r.landingPages);a.visitsHistory.addPageVisit(b,r.pages,t,a.guard(function(b){a.segmentchange.evaluate({forms:[],links:[],pageVisits:b||[]},t);a.context.save();a.utils.isFunction(d)&&a.runGuarded(d)}))}function d(){"failure"===k?a.log.warn('_initEnd function called, when the state was "failure"',a.ERROR_TYPE_CORE_INIT):b()}function b(){a.handleCurrentPage();a.segments.init(r.segmentsV2,r.segmentGroupsV2,r.segmentCountersV2);a.events.trigger(a.EVENT_EASY_READY);a.internal.dispatchEvent("frosmo.ready");
a.events.trigger(a.EVENT_INIT_SUCCESS);k="success";a.contextLoader.useServerApi(a.context.userAgent)&&a.utils.setInterval(1E3)}function e(b,c,e){var d=a.context.referer,f=a.utils.getLocationFromUrl(b.href);c=a.utils.getLocationFromUrl(c);if(c.host===f.host)a.context.referer=c;else if(c.host!==d.host||c.path!==d.path||c.queryVariables!==d.queryVariables)a.context.referer=c,b.href&&a.utils.each(e,function(b,c){var e=a.evaluator.getMatcherFunction(b[0]);a.evaluator.matchUrl(e,
b[1],b[2],{},f)&&(a.context.landingPages[c]=a.utils.getDateInContextFormat(t))}),a.context.landingpage=a.utils.getLocationFromUrl(b.href),a.context.save()}function n(b){var c={name:{},property:{}};a.utils.each(a.domElements.selector("meta",b),function(a){var b=a.getAttribute("name"),e=c.name;b||(b=a.getAttribute("property"),e=c.property);b&&(e[b]=e[b]||[],e[b].push(a.getAttribute("content")))});var e=[];a.utils.each(r.meta,function(b,d){a.evaluator.matchMetaRules(b,c)&&(a.visitsHistory.addMetaCount(d,
t),e.push(d))});0<e.length&&a.segmentchange.evaluate({events:e},t)}function m(){a.location.isSupported()&&a.location.get(function(b){b.country2&&a.context.country.country!==b.country2&&a.segmentchange.evaluate({forms:[],links:[]},t);a.context.country.country=b.country2;a.context.country.latitude=b.latitude;a.context.country.longitude=b.longitude;a.context.country.city=b.city;a.context.country.time=t.getTime();a.context.save()})}function u(b,c){var e=t.getTime();if(18E5<=e-a.context.lastPageView.time){var d=
t,f;f=a.utils.getLocationFromUrl(b.href);var g=a.utils.getLocationFromUrl(c);f=""===c||g.host===f.host?"direct":g.host;a.api.setSessionStartTime(d.getTime());a.segmentchange.expireSegments();a.context.lastVisit.time=d.getTime();a.context.lastVisit.source=f;a.context.referer=a.utils.clone(a.defaultContext.referer);a.context.landingpage=a.utils.clone(a.defaultContext.landingpage);m();0!==a.context.siteVisits.length||a.context.firstVisit||(a.context.firstVisit=d.toString());a.visitsHistory.addSiteVisit(d);
a.context.sessionPathVisits={};a.context.save();a.api.visit(null,f,a.states.get(a.STATE_DEVICE));a.events.trigger(a.EVENT_VISIT)}a.context.lastPageView.time=e;a.context.save()}var r=null,l={href:null,referer:null},k,t;return{init:function(b,c,e){a.events.clearEvent(a.EVENT_EASY_READY);a.events.clearEvent(a.EVENT_INIT_SUCCESS);r=c||{};t=e||new D;a.context=b;a.api.setRequestEnabled(!0);a.sharedContext={};if(void 0===r.segments||null===r.segments)return f("Segments were not found",a.ERROR_TYPE_CORE_INIT,
{level:a.LOG_LEVEL_ERROR}),!1;a.api.setSessionStartTime(a.context.lastVisit.time);a.segmentchange.init(r,t);r.customActions&&a.customAction.init(r.customActions);r.conversions&&a.conversion.init(r.conversions);r.googleAnalytics&&a.googleAnalytics.init(r.googleAnalytics);a.user.init();a.domEvents.ready(;a.preview.init();if(!r.sharedPages)return d(),!0;a.sharedPagesRpc=new a.xdmLocal({remote:"https://otavamedia.inpref.com/frosmo.xdm.html"});
a.sharedPagesRpc.init().then(.then(function(b){a.sharedContext.pageVisits=a.utils.clone(b);d()}).catch(function(b){a.log.send(b,"shared_pages_"+(b.type||a.ERROR_TYPE_CONTEXT_INIT),a.internal.createLogOptions(b&&b.options))});return!0},VISIT_TIMEOUT:18E5,getCurrentBrowserData:function(){return a.utils.clone(l)},getState:function(){return k},initFailure:f,initStart:function(){a.events.trigger(a.EVENT_INIT_START);k="initializing"},setCurrentBrowserData:g,
updateBrowserData:function(b,e,d,f){d=d||b.location;f=f||b.document.referrer;a.context.userAgent=b.navigator.userAgent||a.context.userAgent;n(b.document.head);c(d,f,e);a.events.isTriggered(a.EVENT_EASY_READY)&&a.messageTrueDisplay.clear();a.context.save()},updateLocation:c}}();a.internal=function(){function f(c){if(!(c instanceof a.Promise))throw new y('Invalid type for "promise" argument, got "'+a.utils.getType(c)+'"');return c._hasRejectionHandler||a.utils.some(c._chains,function(a){return f(a.promise)})}
var g=0;return{createLogError:function(a,d,b){var e=a instanceof y?a:new y(a);e.type=a.type?a.type:d;e.options=a.options?a.options:b;return e},createLogOptions:function(c,d){c&&c.level&&a.utils.isString(c.level)||(c=c||{},c.level=d&&a.utils.isString(d)?d:a.LOG_LEVEL_ERROR);return c},debug:function(c){c=a.utils.parseUri(c).queryKey;"on"===c.frosmodebug?a.console.setEnabled(!0):"off"===c.frosmodebug&&a.console.setEnabled(!1);c.frosmodebuglevel&&a.console.setLevel(c.frosmodebuglevel)},dispatchEvent:function(a){try{var d=
new ta(a);window.dispatchEvent(d)}catch(b){}},eval:function(c,d){var b=a.utils.map(d,.join(",");return function(){return eval((b?"var "+b+";\n":"")+c)}.call(d)},getCurrentModule:function(c){var d=a.guard.current().module;return!0!==c&&d===a.MODULE_CORE?a.MODULE_SITE:d},getProfile:function(){return a.profile?a.profile.get():void 0},getSegmentIds:function(c){var d=[];a.utils.each(c,;return d.join(".").replace(/sgmt_/g,"")},getWorkspaceId:function(){if(!a.workspaces)return 0;
var c=a.workspaces.getId();return 0<c?c:0},hasRejectionHandler:f,isMessage:function(c){return E(c)&&a.utils.every(["id","revision","revisionType"],},safeEval:function(c,d,b){b=0<=b?b:0;a.isDev()&&(c='\n"use strict";\n'+c);d.scriptNamespace&&(c+="\n//# sourceURL="+d.scriptNamespace+"_"+b);var e=a.utils.extend({},d.guardOptions,{level:a.LOG_LEVEL_CRITICAL,scriptId:b});return a.runGuarded(function(){var e=a.utils.keys(d.args);e.push(c);var e=la.apply(null,e),f=a.utils.values(d.args),
g=a.utils.extend({},d.guardOptions,{scriptId:b});return a.runGuarded(e,f,g)},void 0,e)},send:function(c,d){var b=a.utils.parseUri(c),b=b.protocol+"://"+b.host+b.path+"?transportMethod=image"+(b.query?"&":"")+b.query;a.debug.addEntry("send_api",{url:b,method:"IMAGE"});var e=new va;e.src=d?b:b+"&"+g++;return e},sendBeacon:function(c,d){c.length>a.MAXIMUM_URL_LENGTH&&a.log.warn("URL limit of "+a.MAXIMUM_URL_LENGTH+' exceeded. URL: "'+N(a.internal.truncate(c,300))+'"',a.ERROR_TYPE_URL_LONG,{module:"[internal]"});
a.utils.isFunction(O.sendBeacon)?(a.debug.addEntry("send_api",{url:c,method:"BEACON"}),O.sendBeacon(d?c:c+"&"+g++)?a.console.info("[internal]",'Queued Beacon API call "'+c+'"'):a.log.error("Skipped Beacon API call",a.ERROR_TYPE_QUEUE_LONG,{module:"[internal]",debug:N(a.internal.truncate(c,300))})):a.internal.send(c,d)},states:function(c){var d;a.utils.isMobile()?d="mobile":a.utils.isTablet()?d="tablet":a.utils.isDesktop()&&(d="desktop");a.states.set(a.STATE_DEVICE,d);c=a.utils.parseUri(c).queryKey.frosmotest;
"on"===c?a.states.set(a.STATE_MODE,a.STATE_MODE_TEST,a.STATE_TYPE_SESSION):"off"===c&&a.states.remove(a.STATE_MODE)},truncate:function(a,d){a=B(a);return a.length>d?a.substr(0,d)+"...{"+(a.length-d)+"}":a}}}();a.api=function(){function f(b){b=b||new D;var c=u?b.getTime()-u.getTime():0;return a.utils.pad(b.getUTCDate(),0,2)+a.utils.pad(b.getUTCHours(),0,2)+a.utils.pad(b.getUTCMinutes(),0,2)+c}function g(){return u?u.getUTCFullYear()+a.utils.pad(u.getUTCMonth()+1,0,2)+a.utils.pad(u.getUTCDate(),0,2)+
a.utils.pad(u.getUTCHours(),0,2)+a.utils.pad(u.getUTCMinutes(),0,2)+a.utils.pad(u.getUTCSeconds(),0,2):""}function c(a){return b&&r[a]?"preview"===a?n+"/"+r[a]:"https:"+b.replace(/^https?:?/,"")+r[a]:null}function d(b){var c={cookieId:a.uid.get(),origin:e,ver:a.getVersion()};if("optimizer"===b||"tracking"===b)c.segments=a.context?a.internal.getSegmentIds(a.context.segments):"";return c}var b,e,n,m=!1,u=null,r={contextApi:"contextApi",error:"errorApi",event:"eventsApi",location:"location",message:"messageApi",
optimizer:"optimizerApi",pageload:"pageloadApi",preview:"previewDataApi",product:"productApi",reco:"recoApi",search:"search",smartDiscovery:"smartDiscoveryApi",tracking:"trackingApi",visitor:"visitorApi"},l=function(b,e){var f=a.utils.reduce(e,function(b,c,e){a.utils.isObject(c)?b=a.utils.extend(b,c):b[e]=c;return b},{});a.utils.each(f,function(a,b){!1===a||null===a||void 0===a?f[b]="":!0===a&&(f[b]="1")});a.utils.extend(f,d(b));return a.utils.addQueryString(c(b),f)},k=function(b){if(b){if(!m)throw new y('API called before context initialized for "'+
b+'"');a.internal.sendBeacon(b+"&"+f(),!0)}};return{init:getOrigin:function(){return e},isInitialized:setRequestEnabled:setSessionStartTime:function(a){u=a?new D(a):null},addToCart:function(a){a=l("optimizer",{event:"addToCart",items:w.JSON.stringify(a),sessionStart:g()});k(a)},buyProduct:function(a,b,c,e,d,f,n,p,m,A){a=l("optimizer",{event:"buyProduct",productType:b,productId:c,netValue:e,fee:d,tax:f,paymentChannel:n,
customId:p,quantity:A,sessionStart:g()});k(a)},transaction:function(a,b,c,e,d){a=l("optimizer",{event:"transaction",conversionType:b,transactionId:c,value:e,products:w.JSON.stringify(d),sessionStart:g()});k(a)},showMessage:function(a,b,c){a=l("optimizer",{event:"showMessage",messageId:b,revision:c,sessionStart:g()});k(a)},clickMessage:function(a,b,c){a=l("optimizer",{event:"clickMessage",messageId:b,revision:c,sessionStart:g()});k(a)},trueDisplay:function(a,b,c){a=l("optimizer",{event:"trueDisplay",
messageId:b,revision:c,sessionStart:g()});k(a)},login:function(a,b){var c=l("optimizer",{event:"login",userId:a,source:b,sessionStart:g()});k(c)},visit:function(a,b,c){a=l("optimizer",{event:"visit",source:b,device:c,sessionStart:g()});k(a)},setProductData:function(a,b,c){a=l("optimizer",{event:"setProductData",productId:a,productAttributes:b,sessionStart:g()});k(a)},setProductDataPayload:function(b,c){var e={event:"setProductData",payload:w.JSON.stringify(b),sessionStart:g()};a.utils.isNil(c)||(e.mode=
c);e=l("optimizer",e);k(e)},setConversionData:function(a,b,c){a=l("optimizer",{event:"setProductData",productId:a,productAttributes:b,mode:"set",sessionStart:g()});k(a)},setUserSegment:function(a,b,c){a=l("optimizer",{event:"setUserSegment",segmentName:b,segmentValue:c,sessionStart:g()});k(a)},viewItemList:function(a){a=l("optimizer",{event:"viewItemList",filters:w.JSON.stringify(a),sessionStart:g()});k(a)},custom:function(b){a.utils.extend(b,d("optimizer"),{event:"custom",sessionStart:g()});b=l("optimizer",
b);k(b)},sendCustomAction:function(b,c,e){b=l("event",{method:"customAction",name:b,value:c,title:e});a.internal.sendBeacon(b,!1)},getCallUrl:l,getApiUrl:c,getSessionStart:g,getCallId:f,_testSetGetUrl:function(a){var b=l;l=a;return b},_testSetCallUrl:}();a.contextLoader=function(){function f(b,c){var e=a.defaultContext.clone();if(!b)return a.utils.extend(e,{origin:c.api.origin});b=a.utils.extend(e,b);b=a.convert.convert(b);b.origin||(b.origin=c.api.origin);return b}
function g(b,c,d){function g(){b.getContext(function(b){a.events.trigger(a.EVENT_INIT_CONTEXT,f(b,c))},e)}b.getUid(function(c){c?(a.uid.set(c),g()):(c=a.uid.newUid(d),b.setUid(c,g,e),a.events.trigger(a.EVENT_UID_CREATED,c));a.events.trigger(a.EVENT_INIT_UID,c)},e)}function c(c){a.events.trigger(a.EVENT_XDM_REQUEST);var f=c.api.origin.replace(/_/g,""),f=c.api.domain.replace("//","https://"+f+"."),g=c.xdmUrl||f+"frosmo.xdm.html";return d(g).then(function(a){return c.xdmPreviousUrl&&c.xdmPreviousUrl!==
g?b(a,c.xdmPreviousUrl,g):a}).then(.catch(e)}function d(b){return(new a.xdmLocal({remote:b,timeout:a.XDM_INIT_TIMEOUT})).init()}function b(b,c,e){var f;return b.get("UID").then(function(g){if(g)return b;a.console.info("[contextLoader]",'Started migrating the UID and context from "'+c+'" to "'+e+'"');return d(c).then(function(a){f=a}).then(function(){return f.get("UID")}).then(function(a){if(!a)throw new y("Previous UID not set");
return b.set("UID",a)}).then(.then(function(a){if(!a)throw new y("Previous context not set");return b.set("context",a)}).then(function(){a.console.info("[contextLoader]",'Successfully migrated the UID and context from "'+c+'" to "'+e+'"');return b}).catch(})}function e(b){b||(b="Unexpected error with initializing context (default)");switch(b.type){case "context_"+a.ERROR_TYPE_ARG_INVALID:b.type="context_init_"+
a.ERROR_TYPE_ARG_INVALID;break;case "context_"+a.ERROR_TYPE_AJAX_TIMEOUT:b.type=a.ERROR_TYPE_CONTEXT_INIT_TIMEOUT;break;case "context_"+a.ERROR_TYPE_STORAGE_EXCEPTION:b.type=a.ERROR_TYPE_CONTEXT_INIT_STORAGE,b.options=b.options||{},b.options.level=a.LOG_LEVEL_WARNING,b.options.module=a.MODULE_CORE}a.main.initFailure(b,b.type||a.ERROR_TYPE_CONTEXT_INIT,b.options)}function n(b){var c=O.vendor&&-1<O.vendor.indexOf("Apple");b=/(ipad|iphone|ipod)/i.test(b||l);return(c||b)&&a.config.contextApi}function m(b,
c){b=a.internal.createLogError(b,"context_"+b.type);a.utils.isFunction(c)&&c(b);throw b;}function u(b){return function(c,e,d,f){c=a.internal.createLogError(d.text,"context_"+d.type,{level:d.type===a.ERROR_TYPE_AJAX_TIMEOUT?a.LOG_LEVEL_WARNING:a.LOG_LEVEL_ERROR,debug:f});a.utils.isFunction(b)&&b(c)}}var r,l="",k={getUid:function(b){b(a.store.get("UID"))},setUid:function(b,c,e){try{a.store.set("UID",b),a.utils.isFunction(c)&&c()}catch(d){m(d,e)}},getContext:function(b){b(a.store.get("context"))},setContext:function(b,
c,e){try{a.store.set("context",b),a.utils.isFunction(c)&&c()}catch(d){m(d,e)}}},t={getUid:setUid:function(b,c){a.cookies.set("frosmo_uid",b,365);a.utils.isFunction(c)&&c()},getContext:function(b,c){if(!a.uid.get())throw new y("UID not set");a.contextApi.get("context",b,u(c))},setContext:function(b,c,e){if(!a.uid.get())throw new y("UID not set");a.contextApi.set("context",b,c,u(e))}},v={getUid:function(b,c){a.sharedContextRpc.get("UID").then(b).catch(c)},
setUid:function(b,c,e){a.sharedContextRpc.set("UID",b).then(c).catch(e)},getContext:function(b,c){a.sharedContextRpc.get("context").then(b).catch(c)},setContext:function(b,c,e){a.sharedContextRpc.set("context",b).then(c).catch(e)}};return{init:function(b,e){l=e;a.events.isTriggered(a.EVENT_INIT_CONTEXT)?a.main.initFailure("Context has already initialized",a.ERROR_TYPE_CONTEXT_INIT,{level:a.LOG_LEVEL_ERROR}):b.sharedContext&&n(e)?(r=a.CONTEXT_TYPE_SERVER,a.convert.toSharedContext(t,function(){g(t,
b,e)}),a.events.once(a.EVENT_VISIT,):b.sharedContext?(r=a.CONTEXT_TYPE_XDM,c(b).then(function(){a.convert.toSharedContext(v,function(){g(v,b,e)})})):(r=a.CONTEXT_TYPE_STORAGE,g(k,b,e))},getContextAccessor:function(){return a.config.sharedContext?n()?t:v:k},getType:function(){return r},getValidContext:f,initUidAndContext:g,useServerApi:n,_testSetUserAgent:function(a){l=a}}}();a.checkRequirements=function(f){return a.utils.isString(f)&&0!==f.length?-1!==
a.utils.getIEVersion(f)?(a.console.error("[checkRequirements]","Unsupported browser"),!1):a.store.check()?a.cookies.isEnabled()&&!a.cookies.check()?(a.log.info("cookies not accessible",a.ERROR_TYPE_STORAGE_MISSING),!1):!0:(a.log.info("localStorage not found",a.ERROR_TYPE_STORAGE_MISSING),!1):(a.log.info('Invalid "userAgent" argument, got "'+f+'"',a.ERROR_TYPE_ARG_INVALID),!1)};a.preview=function(){function f(){if(a.domElements.selector("#frosmo-debug")[0])a.console.warn("[preview]",'Frosmo Preview iFrame "#frosmo-debug" already exists in the DOM');
else{var b=x.createElement("iframe");b.id="frosmo-debug";b.src="about:blank";b.style.display="none";b.onload=function(){d=!0;var c;(c=a.store.get("frosmo_preview_base_url"))?(c=a.utils.parseUri(c),c=c.host?"//"+c.host+c.path:a.config.baseUrl):c=a.config.baseUrl;var f=x.createElement("script");f.src=c+"preview/PreviewApp.js?ts="+(new D).toISOString().slice(0,13).replace(/[T-]+/g,"");b.contentDocument.head.appendChild(f);b.contentWindow.baseURL=c;b.contentWindow.frosmo=w;a.cookies.set("frosmo_preview_tool",
1);a.events.trigger(a.EVENT_PREVIEW_TOOL_ENABLE)};a.domElements.waitFor({selector:"body",timeout:2E4}).then(.catch(function(b){a.console.warn("[preview]",b)})}}function g(b){var c=b.split(":");if(3===c.length&&a.utils.every(c,a.utils.isPositiveInteger))return{positionId:G(c[0]),messageId:G(c[1]),revisionId:G(c[2])};a.console.error("[preview]",'Invalid preview params string, for "'+b+'"')}function c(b,c){return new a.Promise(function(d,f){var g=a.utils.addQueryString(a.api.getApiUrl(b),
a.utils.extend({origin:a.config.api.origin,ws:a.internal.getWorkspaceId(),ts:D.now()},c));a._jsonp.request(g,function(b){if(b.error){switch(b.error){case "Not logged in":case "Invalid site":b=a.internal.createLogError('Select the site origin "'+a.config.api.origin+'" in the Frosmo Platform, to allow previewing',a.ERROR_TYPE_INIT,b);break;case "Revision not found":var c=a.utils.parseUri(g);b=a.internal.createLogError('Invalid previewing "revision id" of "'+c.queryKey.revisionId+'"',a.ERROR_TYPE_ARG_INVALID,
b);break;default:b=a.internal.createLogError(b.error,a.ERROR_TYPE_EXCEPTION,b)}f(b)}else d(b)})})}var d=!1;return{init:function(){var b=a.utils.parseUri(a.main.getCurrentBrowserData().href);("on"===b.queryKey.frosmo_preview_tool||b.anchor.match("frosmo_preview_tool=on")||a.cookies.get("frosmo_preview_tool"))&&f()},enable:f,disable:function(){c("preview",{method:"disable"}).finally(function(){d=!1;a.events.trigger(a.EVENT_PREVIEW_TOOL_DISABLE);a.cookies.remove("frosmo_preview_tool");var b=a.domElements.selector("#frosmo-debug")[0];
b&&b.parentElement&&b.parentElement.removeChild(b)})},isEnabled:function(){return d},createParams:g,getParams:function(){var b=a.main.getCurrentBrowserData().href,b=a.utils.parseUri(b);return b.queryKey.frosmo_preview&&a.utils.isString(b.queryKey.frosmo_preview)?g(ca(b.queryKey.frosmo_preview)):void 0},requestMessage:function(b){return c("message",a.utils.extend({method:"preview"},b))},requestPreviewData:}();a.convert=function(){return{convert:function(f){return!a.versionAtLeast("1.0",
f.VERSION)||f.lastVisit&&f.lastVisit.time&&31536E6<D.now()-f.lastVisit.time?a.defaultContext.clone():f},toSharedContext:function(f,g){function c(){a.store.remove("UID");a.store.remove("context");g()}var d=a.store.get("context"),b=a.store.get("UID");d&&b?d.origin!==a.config.api.origin?g():(a.uid.set(b),f.setUid(b,function(){f.setContext(d,c);a.log.info("Migrated local context to shared context","context.migration")})):c()}}}();(function(){var f=0;a.defaultContext={VERSION:"1.0",UID:null,loginId:null,
lastLoginId:void 0,profile:void 0,origin:null,firstVisit:null,lastPageView:{time:0},lastVisit:{source:"",time:0},pageVisits:{},siteVisits:[],segments:{},states:{session:{}},referer:{host:null,path:null},landingpage:{host:null,path:null},landingPages:{},linkClicks:{},metaCount:{},metaData:{keywords:null,description:null,ogtitle:null,ogdescription:null},country:{country:"",country2:"",latitude:0,longitude:0,city:"",time:0},userAgent:"",segmentChanged:0,lastRuleActions:{},site:{},counts:{},removeFunctions:addFunctions:save:function(g,c,d){c=a.utils.isFunction(c)?c:function(){};if(a.contextLoader.useServerApi()){if(g&&0===f){c();return}if(!g){f++;return}f=0}g=a.utils.clone(this);this.removeFunctions(g);a.contextLoader.getContextAccessor().setContext(g,c,d)},clone:function(){var f=a.utils.clone(this);this.addFunctions(f);
return f},customActions:{},segmentEvents:{enter:{},leave:{}},conversions:{},sessionPathVisits:{},messageDisplayIntervalTimestamps:{},messageDisplayTimes:{}}})();a.conversion=function(){function f(b,c,e){e=0<=e?e:0;c||a.log.warn("easy.conversion.evaluateDefinitions",a.ERROR_TYPE_DEPRECATED+".conversion_module",{module:a.internal.getCurrentModule(),debug:w.JSON.stringify({conversionsCount:a.conversions.length,productsCount:a.products.length,expectedCount:e,callerModuleName:"direct",triggerId:a.utils.isObject(b)?
b.id:0})});a.utils.each(v,function(c){if(a.conversionEvaluator.evaluateDefinition(c)||a.conversionEvaluator.evaluateTrigger(c,b))e+=1,a.conversions.push({conversion_id:c.conversionId,conversion_type:c.conversionType,conversion_value:c.conversionValue,conversion_name:c.conversionId})});a.conversion.handleConversionArray(c,e)}function g(c,e){var d=[];e=0<=e?e:0;a.conversions.length>e&&a.log.warn("easy.conversion.handleConversionArray (global array contains conversions)",a.ERROR_TYPE_DEPRECATED+".conversion_module",
{module:a.internal.getCurrentModule(),debug:w.JSON.stringify({conversionsCount:a.conversions.length,productsCount:a.products.length,expectedCount:e,callerModuleName:c||"direct"})});var f=m(a.conversions,h.conversion);a.conversions=[];c||a.log.warn("easy.conversion.handleConversionArray (external call)",a.ERROR_TYPE_DEPRECATED+".conversion_module",{module:a.internal.getCurrentModule(),debug:w.JSON.stringify({conversionsCount:a.conversions.length,productsCount:a.products.length,expectedCount:e,callerModuleName:"direct"})});
a.utils.each(f,function(c){c.conversion_id!==c.conversion_name&&a.api.setConversionData(c.conversion_id,{productType:c.conversion_type,productName:c.conversion_name});a.api.buyProduct(null,c.conversion_type,c.conversion_id,c.conversion_value,null,null,c.payment_channel,c.custom_id,null,c.conversion_quantity);a.console.log("[conversion]",'Conversion sent with the product type "'+c.conversion_type+'" and product name "'+c.conversion_name+'"');var e=c.conversion_type||"undefined";a.visitsHistory.addConversion(e,
c.conversion_id,new D);d.push(e);d.push(e+" "+c.conversion_id);a.events.trigger(a.EVENT_CONVERSION,b(c))});0<f.length&&(a.context.save(),a.segmentchange.evaluate({conversion:d},new D))}function c(b,c){c=0<=c?c:0;a.products.length>c&&a.log.warn("easy.conversion.handleProductArray (global array contains products)",a.ERROR_TYPE_DEPRECATED+".conversion_module",{module:a.internal.getCurrentModule(),debug:w.JSON.stringify({conversionsCount:a.conversions.length,productsCount:a.products.length,expectedCount:c,
callerModuleName:b||"direct"})});var d=m(a.products,h.product);a.products=[];b||a.log.warn("easy.conversion.handleProductArray (external call)",a.ERROR_TYPE_DEPRECATED+".conversion_module",{module:a.internal.getCurrentModule(),debug:w.JSON.stringify({conversionsCount:a.conversions.length,productsCount:a.products.length,expectedCount:c,callerModuleName:"direct"})});a.utils.each(d,function(b){var c=e(b);a.api.setProductData(b.product_id,c);a.console.log("[conversion]",'Product sent with the product type "'+
c.productType+'" and product name "'+c.productName+'"');a.events.trigger(a.EVENT_PRODUCT_DATA,n(b))})}function d(b){var c=a.domElements.selector("div.frosmo-conversion",b),e;e=a.utils.map(c,r);e=m(e,h.conversion);a.utils.isEmpty(c)||a.log.warn("easy.conversion.parseHtml -> _parseConversions",a.ERROR_TYPE_DEPRECATED+".conversion_module",{module:a.internal.getCurrentModule(),count:e.length,elements:c.length});ga.prototype.push.apply(a.conversions,e);b=a.domElements.selector("div.frosmo-product",b);
c=a.utils.map(b,l);c=m(c,h.product);a.utils.isEmpty(b)||a.log.warn("easy.conversion.parseHtml -> _parseProducts",a.ERROR_TYPE_DEPRECATED+".conversion_module",{module:a.internal.getCurrentModule(),count:c.length,elements:b.length});ga.prototype.push.apply(a.products,c)}function b(b){var c={};a.utils.each(b,function(a,b){c[b.replace(/^conversion_/,"")]=a});c.products=[{id:c.id,value:c.value,quantity:c.quantity}];return c}function e(b){var c="product_categories product_colors product_custom_images product_data product_ids product_multi_prices".split(" ");
return a.utils.reduce({productName:"product_name",productImage:"product_image",productPrice:"product_price",productType:"product_type",productUrl:"product_url",productArea:"product_area",productCampaign:"product_campaign",productCategories:"product_categories",productCategory:"product_category",productCity:"product_city",productColors:"product_colors",productCompany:"product_company",productConversion:"product_conversion",productCountry:"product_country",productCustomImages:"product_custom_images",
productData:"product_data",productDescription:"product_description",productDiscountPrice:"product_discount_price",productIds:"product_ids",productManufacturer:"product_manufacturer",productModel:"product_model",productMultiPrices:"product_multi_prices",productPromotionLabel:"product_promotion_label",productRating:"product_rating",productStock:"product_stock",productSubCategory:"product_sub_category",productUrn:"product_urn",productVenue:"product_venue"},function(e,d,f){void 0!==b[d]&&(e[f]=!a.utils.isString(b[d])&&
a.utils.inArray(c,d)?w.JSON.stringify(b[d]):b[d]);return e},{})}function n(b){var c=/^product_/,e={};a.utils.each(b,function(a,b){e[b.replace(c,"")]=e[b]=a});return e}function m(b,c){return a.utils.filter(b,}function u(b,c){return a.utils.every(c,}function r(a){return k(a,h.conversion)}unction k(b,c){var e={};a.utils.each(a.domElements.selector("span",b),function(b){var d=b.getAttribute("class");
(a.utils.inArray(c.required,d)||a.utils.inArray(c.optional,d))&&(b=a.utils.trim(b.innerHTML))&&(e[d]=b)});return u(e,c.required)?e:null}function t(b,c){if(!b||!u(b,c.required))return null;a.utils.each(b,function(e,d){a.utils.inArray(c.optional,d)||a.utils.inArray(c.required,d)||delete b[d]});return b}a.conversions=a.conversions||[];a.products=a.products||[];var v=[],h={product:{required:"product_id product_name product_image product_price product_type product_url".split(" "),optional:"product_area product_campaign product_categories product_category product_city product_colors product_company product_conversion product_country product_custom_images product_data product_description product_discount_price product_ids product_manufacturer product_model product_multi_prices product_part_payment product_promotion_label product_rating product_stock product_sub_category product_urn product_venue".split(" ")},
conversion:{required:["conversion_id","conversion_name","conversion_type","conversion_value"],optional:["payment_channel","custom_id","conversion_quantity"]}};return{init:function(b){if(!a.utils.isArray(b)||0===b.length)return!1;v=b;a.events.on(a.EVENT_TRIGGER_FIRE,;return!0},evaluateDefinitions:f,handle:function(b,e,h){h=0<=h?h:0;e||a.log.warn("easy.conversion.handle",a.ERROR_TYPE_DEPRECATED+".conversion_module",{module:a.internal.getCurrentModule(),debug:w.JSON.stringify({conversionsCount:a.conversions.length,
productsCount:a.products.length,expectedCount:h,callerModuleName:"direct"})});a.domEvents.ready(function(){f(void 0,e,h);d(b);c(e,h);g(e,h)})},handleConversionArray:g,handleProductArray:c,parseHtml:d}}();a.conversionEvaluator=function(){function f(c){var d=a.visitsHistory.getConversionLastTime(c.conversionType,c.conversionId);return d?d+c.interval<=a.utils.getTimestamp():!0}var g={matchUrl:function(c,d,b,e){var f=a.main.getCurrentBrowserData().href,f=a.utils.getLocationFromUrl(f);return a.evaluator.matchUrl(c,
d,b,e,f)},matchRefererUrl:function(c,d,b){var e=a.main.getCurrentBrowserData().referer,e=a.utils.getLocationFromUrl(e);return a.evaluator.matchUrl(c,d,b,{},e)},matchHtmlElement:function(c,d){d=d||x;return E(a.domElements.selector(c,d)[0])}};return{evaluateDefinition:function(c){if(c.rules&&f(c)){var d=new a.baseEvaluator;a.utils.each(g,function(a,c){d.addEvaluatorFunction(c,a)});return d.evaluate(c.rules)}return!1},evaluateTrigger:function(a,d){return a&&d&&a.triggerId===d.id&&f(a)}}}();a.sharedCode=
function(){function f(c,b){a.utils.each(c,function(c){var d={args:a.utils.extend({easy:w.easy,site:w.site,sharedCode:{id:c.id},triggerEventData:void 0},b),guardOptions:{type:a.ERROR_TYPE_SHARED_CODE_EXCEPTION,level:a.LOG_LEVEL_ERROR,module:a.MODULE_SHARED_CODE,sharedCodeId:c.id},scriptNamespace:a.SHARED_CODE_ID+c.id};a.internal.safeEval(c.content,d)})}function g(d){a.utils.each(d.triggers,function(a){(a=c[a.id])&&f(a,{triggerEventData:d.data})})}var c={};return{init:function(d){a.utils.each(d,function(a){var e=
a.triggerId||0;c[e]=c[e]||[];c[e].push(a)});(d=c[0])&&f(d);a.events.on(a.EVENT_TRIGGER_EVENT,g)},clear:function(){c={};a.events.off(a.EVENT_TRIGGER_EVENT,g)}}}();a.message=function(){nction c(b,c){c=a.utils.extend({},c);c.restoreMessage=a.utils.isBoolean(c.restoreMessage)?c.restoreMessage:a.spa.isEnabled();c.trackMessage=a.utils.isBoolean(c.trackMessage)?c.trackMessage:!0;c.onRender=b.isPopup()?
a.popup.render(b,c):b.render(c)}unction b(){a.utils.each(C,}function e(b,c){var e={};return[a.utils.map(b,function(b){e[b.position]=new a.positionData(a.utils.clone(b),c);return b.position}),e]}function n(b){var c,e=G.MAX_VALUE;a.utils.each(b,function(a){a.isPopup()&&a.priorityLevel<e&&(c=a,e=a.priorityLevel)});return a.utils.filter(b,function(a){var b=a.isPopup();return!b||b&&c===a})}
function m(b){b={method:"multifetch",origin:a.config.api.origin,cookieId:a.uid.get(),loginId:a.utils.isNil(a.context.lastLoginId)?"":a.context.lastLoginId,positions:b.join("."),states:w.JSON.stringify(a.states.getAll()),ver:a.getVersion(),ts:D.now()};a.context.segments&&(b.segments=a.internal.getSegmentIds(a.context.segments));var c=a.context.lastVisit.source;c&&(b.source=c);if(c=a.api.getSessionStart())b.sessionStart=c;if(c=a.internal.getProfile())b.profile=c;c=a.internal.getWorkspaceId();0<c&&(b.ws=
c);b.debug=a.isDev();return b}function u(b){if(a.isReady())if(a.events.isTriggered(a.EVENT_SEGMENTS_READY)){b=b||{};a.events.trigger(a.EVENT_MESSAGE_REQUEST);var c=a.main.getCurrentBrowserData().href,f=v,g=h;if(b.positions)var n=e(b.positions,c),f=n[0],g=n[1];n=a.utils.filter(f,function(b){var e=h[b];return(e=e?e.getMessageInstance():void 0)&&e.getType()===a.MESSAGE_TYPE_CACHED?!1:c&&g[b].isMatchingUrl(c)});0===n.length?a.console.warn("[message]","Requesting of messages was skipped, due to no active positions"):
(f=a.utils.map(n,function(a){return g[a]}),b.cancelPending&&d(),n=m(n),f=a.fetch.get(a.api.getApiUrl("message"),{params:n,timeout:b.timeout||5E3,success:r(f,k,n),error:function(b,c,e,d){a.events.trigger(a.EVENT_MESSAGE_FAILURE);a.log.warn("Unexpected error occurred with requesting messages","message_"+e.type,{module:a.internal.getCurrentModule(),debug:d})}}),b.cancelPending&&t.push(f))}else a.events.once(a.EVENT_SEGMENTS_READY,function(){u(b)});else a.ready(function(){u(b)})}function r(b,c,e){return function(d){if(c&&
c!==k)a.log.warn("Initialization of messages is already in progress",a.ERROR_TYPE_MESSAGE_INIT);else if(a.utils.isArray(d.messages)){a.events.trigger(a.EVENT_MESSAGE_RECEIVE,b);b=a.utils.filter(b,function(b,c){var e=d.messages[c];if(a.internal.isMessage(e))return b.setMessage(e),!0;b.show();return!1});a.events.trigger(a.EVENT_MESSAGE_SUCCESS,b);b=n(b);var f=b.reverse(),g=a.guard(a.message.show,{module:a.MODULE_MESSAGE});a.utils.each(f,g)}else a.log.error("Invalid response for Message API. Debugging for Product Team",
a.ERROR_TYPE_MESSAGE_INIT,{debug:w.JSON.stringify({params:e,response:d,gotInitId:k,wantInitId:c})})}}function l(){a.utils.each(v,}var k=0,t=[],v=[],h={},C=[],z={};return{init:function(b){k+=1;b=b&&b.positions?b.positions:a.config.positions;var c=a.main.getCurrentBrowserData().href;b=e(b,c);v=b[0];h=b[1];a.events.trigger(a.EVENT_MESSAGE_INIT);a.events.once(a.EVENT_INIT_FAILURE,l);a.events.on(a.EVENT_MESSAGE_FAILURE,l)},addCustomRenderer:function(b,c){if(z[b])return a.log.error('Renderer name "'+
b+'" is already defined',a.ERROR_TYPE_RENDERER_INVALID),!1;if(!a.utils.isString(b))return a.log.error('Invalid type for renderer "name" argument, got "'+a.utils.getType(b)+'" for "'+b+'". Expected string type',a.ERROR_TYPE_RENDERER_INVALID),!1;if(!a.utils.isFunction(c))return a.log.error('Invalid type for renderer "fn" argument, got "'+a.utils.getType(c)+'" for "'+c+'". Expected function type',a.ERROR_TYPE_RENDERER_INVALID),!1;z[b]=c;return!0},getCustomRenderer:clear:function(){d();
a.utils.each(C.reverse(),;C=[];a.utils.each([a.EVENT_MESSAGE_CLICK,a.EVENT_MESSAGE_SHOW,a.EVENT_MESSAGE_TRUE_DISPLAY,a.EVENT_MESSAGESHOW_COMPLETE,a.EVENT_MESSAGESHOW_FAILED],a.events.clearEvent);a.events.off(a.EVENT_INIT_FAILURE,l)},getActivePositions:function(b){var c=a.main.getCurrentBrowserData().href;b=a.utils.filter(b||f(),;return a.utils.map(b,},getPositions:f,getPosition:g,requestMessages:function(c){b();
var e=a.preview.getParams();e?a.message.requestPreview(e):u(c)},requestPreview:function(b){b&&a.preview.requestMessage(b).then(function(e){var d=h[b.positionId];d?(d.setMessage(e.content),c(d,{excludeTrigger:!0,trackMessage:!1})):a.console.error("[message]",'Invalid previewing "position id" of '+b.positionId)}).catch(},show:c,updatePositions:function(b){a.utils.each(b,function(b){b instanceof a.positionData&&h[b.position]&&(h[b.position]=b)})}}}();(function(){unction g(b,c){b.removeAttribute("class");c.cssClasses.length&&a.utils.addClassName(b,c.cssClasses);b.removeAttribute("style");c.cssText&&(b.style.cssText=c.cssText);b.id=c.id;b.removeAttribute("data-frosmo-message-id");b.removeAttribute("data-frosmo-position-id")}var c=0,d={value:!0};a.messageInstance=function(b){if(!(this instanceof a.messageInstance))throw new y('"easy.messageInstance" cannot be called as a function. Use the "new" keyword to construct a new "Message" instance');
if(!a.internal.isMessage(b.message))throw new y('Invalid type for "message" property, got "'+a.utils.getType(b.message)+'" for '+this.id);a.utils.extend(this,b.message);J.defineProperty(this,"positionData",{configurable:!0,writable:!0,value:b});this._displayDelayIds=[];this._elementCount=a.utils.isNumber(a.config.messageMaxElements)&&0<a.config.messageMaxElements?a.config.messageMaxElements:50;this._origClickOrSubmitEvents=[];this._origElementsData=[];this._elements=[];this._trackableElements=[];
this._middleButton=void 0;this._type=a.utils.some(a.config.quickMessages,this)?a.MESSAGE_TYPE_CACHED:a.MESSAGE_TYPE_BASIC;this._uniqueId=++c;this._showRevision=H.bind(this._showRevision,this);this._onClickEvent=H.bind(this._onClickEvent,this);this._onTrueDisplayEvent=H.bind(this._onTrueDisplayEvent,this);this._onClick=H.bind(this._onClick,this);this._onClickOrSubmit=H.bind(this._onClickOrSubmit,this);this._onMiddleClick=H.bind(this._onMiddleClick,this);this.startTracking=
H.bind(this.startTracking,this);this.setRestorable(!1);this._clearFns=[];this.setTrackable(!0)};a.messageInstance.prototype.isShowable=function(){return this._hasMaxDisplays()||!this._hasElapsedDisplayInterval()?!1:this._createElements()};a.messageInstance.prototype.insertHtml=function(b,c){void 0===b&&(b=this.content);a.utils.each(this._elements,function(d,f){var g=this._createParams(a.utils.extend({messageWrapperIndex:f},c));a.domElements.html(d,b,g)},this)};a.messageInstance.prototype.isRendered=
function(){return E(this._isRendered)};a.messageInstance.prototype.show=function(){if(this.isRendered()||!this.isShowable())return!1;var b=1E3*this.options.displayDelay||0;if(0<b){var c=a.guard(this._showRevision,this._createGuardOptions());this._displayDelayIds.push(a.utils.setTimeout(c,b))}else this._showRevision();J.defineProperty(this,"_isRendered",d);return!0};a.messageInstance.prototype.trackingEvent=function(b){a.tracking?a.tracking.event(b,{modificationId:this.id,variationId:this.revision}):
a.console.warn(a.MODULE_MESSAGE,"Enable the tracking module, so message_id."+this.id+' will be tracked as "'+b+'"')};a.messageInstance.prototype._showRevision=function(){this.isHidden()?this._showHiddenRevision():this._useTemplatePreRenderer()?this._preRenderTemplate():(this._showNormalRevision(),a.uihooks.initLinks(a.config.links),a.uihooks.initForms(a.config.forms))};a.messageInstance.prototype._showHiddenRevision=function(){var b=this.positionData.getHiddenRenderer();b?this._callRenderer(b,this._elements[0]):
this.startTracking();a.console.info("[messageRendered]","position_id."+this.positionData.position+", message_id."+this.id+", revision_id."+this.revision,this.positionData)};a.messageInstance.prototype._showNormalRevision=function(b){this.content=this.positionData.message.content=this.getContent(b);var c=this.positionData.getRenderer();if(!a.utils.isEmpty(this.content)||c)this.isRestorable()&&(this._origElementsData=a.utils.map(this._origElementsData,this._backupElements,this)),a.utils.each(this._elements,
function(b,d){this.positionData.method===this.positionData.METHOD_RENEW&&f(b.nextSibling);if(c)this._callRenderer(c,b);else{var g=this._createParams({messageWrapperIndex:d});a.domElements.html(b,this.content,g);this.positionData.show();this.startTracking()}},this),a.console.info("[messageRendered]","position_id."+this.positionData.position+", message_id."+this.id+", revision_id."+this.revision,this.positionData)};a.messageInstance.prototype._preRenderTemplate=function(){var b=a.utils.isObject(this.template.defaults)?
this.template.defaults:w.JSON.safeParse(this.template.defaults,null),c={name:this.template.variable,options:b,render:a.guard(this._showNormalRevision,this._createGuardOptions(!1,!0))},b=this._getTemplatePreRenderer(),c=this._createParams({templateInstance:c},a.MESSAGE_PRE_RENDERER_SCRIPT_ID);a.internal.safeEval(b,c)};a.messageInstance.prototype.clear=function(){if(!this.isRestorable())return!1;a.utils.each(this._clearFns,;this._clearFns=[];this.clearTimers();var b=this._getTrackableElements();
a.domEvents.off(b,"click."+a.DOM_EVENT_NAMESPACE,'a, area, button, input[type="button"], input[type="image"], input[type="submit"], .frosmo-click',this._onClick);a.domEvents.off(b,"click."+a.DOM_EVENT_NAMESPACE,this._onClick);a.domEvents.off(b,"mousedown."+a.DOM_EVENT_NAMESPACE,"a, area",this._onMiddleClick);a.domEvents.off(b,"mouseup."+a.DOM_EVENT_NAMESPACE,"a, area",this._onMiddleClick);a.utils.each(this._origClickOrSubmitEvents,function(a){a[0][a[1]]=a[2]});a.events.off(a.EVENT_MESSAGE_CLICK,this._onClickEvent);
a.events.off(a.EVENT_MESSAGE_TRUE_DISPLAY,this._onTrueDisplayEvent);a.messageTrueDisplay.clearId(this.positionData.message,this.positionData);a.utils.each(b,this._restoreElements,this);a.utils.each(a.domElements.selector("."+a.MESSAGE_SCRIPT_ID+this.id),f);a.domElements.removeStyles(void 0,a.MESSAGE_STYLE_ID+this.id);this._origClickOrSubmitEvents=[];this._origElementsData=[];this._elements=[];this._trackableElements=[];return!0};a.messageInstance.prototype.onClear=function(b){if(a.utils.isFunction(b)){var c=
this._createGuardOptions(!0,!0);this._clearFns.push(a.guard(b,c))}else this._logSend('Invalid type for "fn" argument, got "'+a.utils.getType(b)+'" for "'+b+'". Expected function type',a.ERROR_TYPE_ARG_INVALID,a.LOG_LEVEL_ERROR)};a.messageInstance.prototype.clearTimers=function(){a.utils.each(this._displayDelayIds,X);this._displayDelayIds=[]};a.messageInstance.prototype._backupElements=function(a){switch(this.positionData.method){case this.positionData.METHOD_HIDE:case this.positionData.METHOD_REPLACE:for(var c=
this._createElement();a.el.hasChildNodes();)c.appendChild(a.el.firstChild);a.el=c}return a};a.messageInstance.prototype._restoreElements=function(a,c){if(a){var d=this._origElementsData[c];switch(this.positionData.method){case this.positionData.METHOD_RENEW:if(!d)break;if(this.isHidden()){g(a,d);break}a.parentNode&&a.parentNode.insertBefore(d.el,a);f(a);break;case this.positionData.METHOD_HIDE:case this.positionData.METHOD_REPLACE:if(!d)break;g(a,d);if(this.isHidden())break;for(;a.hasChildNodes();)a.removeChild(a.lastChild);
for(;d.el.hasChildNodes();)a.appendChild(d.el.firstChild);break;default:f(a)}}};a.messageInstance.prototype._applyContainerStyles=function(b){var c=/;\s*$/;return a.utils.map(b,function(b){this.positionData.cssClasses&&a.utils.addClassName(b,this.positionData.cssClasses);if(this.positionData.cssText){var d=b.style.cssText||"",f=d&&!c.test(d)?";":"";b.style.cssText=d+f+this.positionData.cssText}b.id=b.id||"frosmo_message_id_"+this._uniqueId;a.utils.addClassName(b,["frosmo_inline","frosmo_message_"+
this.id,"frosmo_position_"+this.positionData.position]);b.setAttribute("data-frosmo-message-id",this.id);b.setAttribute("data-frosmo-position-id",this.positionData.position);return b},this)};a.messageInstance.prototype._createElements=function(){if(this._elements.length)return!0;var b=this.positionData.getElements();if(0===b.length)return this._elements=[],!1;var c=this.isHidden(),d=this.positionData.method===this.positionData.METHOD_RENEW;this.positionData.method===this.positionData.METHOD_REPLACE||
this.positionData.method===this.positionData.METHOD_HIDE?(c=b,this._origElementsData=this._getElementsData(b)):d?(c=c?b:this._createContainers(b),this._origElementsData=this._getElementsData(b)):c=c?[this._createElement()]:this._createContainers(b);this._elements=this._applyContainerStyles(c);this._elements.length>this._elementCount&&(this._origElementsData=this._origElementsData.slice(0,this._elementCount),this._elements=this._elements.slice(0,this._elementCount),this._logSend("Selector matched "+
this._elements.length+" elements",a.ERROR_TYPE_ELEMENTS_LONG,a.LOG_LEVEL_INFO));return 0<this._elements.length};a.messageInstance.prototype._createElement=function(b){var c="DIV LI P SPAN TD TH TR".split(" "),c=b&&b.tagName&&a.utils.inArray(c,b.tagName);return x.createElement(c?b.tagName:"DIV")};a.messageInstance.prototype._createContainers=function(b){return a.utils.map(b,function(b){var c=this._getRelatedContainer(b,this.positionData),d="frosmo_position_"+this.positionData.position;return a.utils.inArray(a.utils.getClassNames(c),
d)?c:this._createContainer(b,this.positionData)},this)};a.messageInstance.prototype._createContainer=function(a,c){var d;switch(c.method){case c.METHOD_RENEW:return d=this._createElement(a),a.parentNode.insertBefore(d,a),d;case c.METHOD_BEFORE:return d=this._createElement(a),a.parentNode.insertBefore(d,a),d;case c.METHOD_AFTER:for(d=a.nextSibling;d&&d.nodeType!==U.ELEMENT_NODE;)d=d.nextSibling;d=this._createElement(d);a.parentNode.insertBefore(d,a.nextSibling);return d;case c.METHOD_PREPEND:for(d=
a.firstChild;d&&d.nodeType!==U.ELEMENT_NODE;)d=d.nextSibling;d=this._createElement(d);a.insertBefore(d,a.firstChild);return d;case c.METHOD_APPEND:for(d=a.lastChild;d&&d.nodeType!==U.ELEMENT_NODE;)d=d.previousSibling;d=this._createElement(d);a.appendChild(d);return d;default:return d}};a.messageInstance.prototype._getRelatedContainer=function(a,c){switch(c.method){case c.METHOD_BEFORE:return a.previousSibling;case c.METHOD_AFTER:return a.nextSibling;case c.METHOD_PREPEND:if(a.childNodes.length)return a.childNodes[0];
break;case c.METHOD_APPEND:if(a.childNodes.length)return a.childNodes[a.childNodes.length-1]}};a.messageInstance.prototype._getElementsData=function(b){return a.utils.map(b,function(b){return{cssClasses:a.utils.getClassNames(b),cssText:b.style.cssText,el:b,id:b.id}})};a.messageInstance.prototype.isClicked=function(){return E(this._isClicked)};a.messageInstance.prototype.startClickTracking=function(){if(this._hasClickTracking||!this.isTrackable()||this.isHidden()&&!this._isHiddenTrackable("click"))return!1;
J.defineProperty(this,"_hasClickTracking",d);var b=this._getTrackableElements();a.utils.each(b,this._clickEventHandlers,this);a.events.on(a.EVENT_MESSAGE_CLICK,this._onClickEvent,this);return!0};a.messageInstance.prototype.setClicked=function(){if(this.isClicked()||!this.isTrackable())return!1;J.defineProperty(this,"_isClicked",d);a.ready(function(){a.api.clickMessage(null,this.id,this.revision);a.events.trigger(a.EVENT_MESSAGE_CLICK,this.positionData.message);a.console.info("[messageClick]","position_id."+
this.positionData.position+", message_id."+this.id+", revision_id."+this.revision,this.positionData)},this);this.setTrueDisplayed();return!0};a.messageInstance.prototype._isTrackingDisabled=a.messageInstance.prototype._clickEventHandlers=function(b){this._middleButton=void 0;a.domEvents.on(b,"click."+a.DOM_EVENT_NAMESPACE,'a, area, button, input[type="button"], input[type="image"], input[type="submit"], .frosmo-click',this._onClick);
if(a.domElements.matches(b,'a, area, button, input[type="button"], input[type="image"], input[type="submit"], .frosmo-click'))a.domEvents.on(b,"click."+a.DOM_EVENT_NAMESPACE,this._onClick);a.domEvents.on(b,"mousedown."+a.DOM_EVENT_NAMESPACE,"a, area",this._onMiddleClick);a.domEvents.on(b,"mouseup."+a.DOM_EVENT_NAMESPACE,"a, area",this._onMiddleClick);a.utils.each(a.domElements.selector("a, area, form",b),this._onClickOrSubmit)};a.messageInstance.prototype._onClick=function(a,c){this._isTrackingDisabled(c)||
this.setClicked()};a.messageInstance.prototype._onClickEvent=function(a){this.id!==a.id||this.revision!==a.revision||this.isClicked()||J.defineProperty(this,"_isClicked",d)};a.messageInstance.prototype._onClickOrSubmit=function(b){if(!this._isTrackingDisabled(b)){var c="FORM"===b.tagName?"onsubmit":"onclick",d=b[c];this.isRestorable()&&this._origClickOrSubmitEvents.push([b,c,d]);var f=this._createGuardOptions(!1,!0);b[c]=a.guard(function(f){this.setClicked();b[c]=d;return a.utils.isFunction(d)?d.call(this,
f):void 0},f)}};a.messageInstance.prototype._onMiddleClick=function(a,c){this._isTrackingDisabled(c)||1!==a.button||("mousedown"===a.type?this._middleButton=c:"mouseup"===a.type&&this._middleButton===c&&(this._middleButton=void 0,this.setClicked()))};a.messageInstance.prototype.isDisplayed=function(){return E(this._isDisplayed)};a.messageInstance.prototype.setDisplayed=function(){if(this.isDisplayed()||!this.isTrackable())return!1;J.defineProperty(this,"_isDisplayed",d);a.ready(function(){a.api.showMessage(null,
this.id,this.revision);a.events.trigger(a.EVENT_MESSAGE_SHOW,this.positionData.message);a.console.info("[messageDisplay]","position_id."+this.positionData.position+", message_id."+this.id+", revision_id."+this.revision,this.positionData)},this);this._setDisplayIntervalTimestamp();this._incrMaxDisplays();return!0};a.messageInstance.prototype.isTrueDisplayed=a.messageInstance.prototype.startTrueDisplayTracking=function(){if(this._hasTrueDisplayTracking||!this.isTrackable()||
this.isHidden()&&!this._isHiddenTrackable("true display"))return!1;J.defineProperty(this,"_hasTrueDisplayTracking",d);var b=this._getTrackableElements();a.messageTrueDisplay.start(this.positionData.message,this.positionData,b);a.events.on(a.EVENT_MESSAGE_TRUE_DISPLAY,this._onTrueDisplayEvent,this);return!0};a.messageInstance.prototype.setTrueDisplayed=function(){if(this.isTrueDisplayed()||!this.isTrackable())return!1;J.defineProperty(this,"_isTrueDisplayed",d);a.ready(this);return!0};a.messageInstance.prototype._onTrueDisplayEvent=function(a){this.id!==a.id||this.revision!==a.revision||this.isTrueDisplayed()||J.defineProperty(this,"_isTrueDisplayed",d)};a.messageInstance.prototype.startTracking=function(){a.ready(this)};a.messageInstance.prototype.setTrackableElements=function(b){this._trackableElements=a.utils.isArray(b)?b:[b]};a.messageInstance.prototype._getTrackableElements=
a.messageInstance.prototype.getTemplateDefaults=a.messageInstance.prototype.insertTemplate=a.messageInstance.prototype.renderTemplate=function(b,c){if(!this._hasTemplate())return this.content;if(!a.template)return this._logSend("Template module not found",a.ERROR_TYPE_MODULE_MISSING,a.LOG_LEVEL_CRITICAL),this.content;
if(!this.template.variable)return this._logSend("Template variable is missing",a.ERROR_TYPE_TEMPLATE_MISSING,a.LOG_LEVEL_ERROR),null;this._setTemplateDefaults();var d=this._getTemplateContent()||this.content;if(!d)return this._logSend("Template content is missing",a.ERROR_TYPE_TEMPLATE_MISSING,a.LOG_LEVEL_ERROR),null;var f=b||this.getTemplateDefaults();return f?a.template.render(d,f,c,this._createGuardOptions()):(this._logSend("Template defaults is missing",a.ERROR_TYPE_TEMPLATE_MISSING,a.LOG_LEVEL_ERROR),
null)};a.messageInstance.prototype._hasTemplate=a.messageInstance.prototype._getTemplateDefaults=function(){return a.utils.isObject(this.template.defaults)?this.template.defaults:w.JSON.safeParse(this.template.defaults,null)};a.messageInstance.prototype._setTemplateDefaults=function(){var b=this._getTemplateDefaults();this._useTemplateContent()||this._useTemplateExport()||(b=a.utils.getByDotString(this.template.variable)||b,a.utils.isEmpty(b)&&
(b=null));this.template.defaults=b;this.positionData.message.template=this.template};a.messageInstance.prototype._getTemplateContent=function(){if(this._useTemplateContent())return this.template.content;if(this._useTemplateExport())return a.config.templates[this.template.variable]};a.messageInstance.prototype._useTemplateContent=a.messageInstance.prototype._getTemplatePreRenderer=function(){if(this.template.preRenderer)return this.template.preRenderer;if(a.config.templatePreRenderers&&
a.config.templatePreRenderers[this.template.variable])return a.config.templatePreRenderers[this.template.variable]};a.messageInstance.prototype._useTemplatePreRenderer=a.messageInstance.prototype._useTemplateExport=function(){return E(a.config.templates&&a.config.templates[this.template.variable])};a.messageInstance.prototype._callRenderer=function(b,c){a.messageTrueDisplay.setData(this.positionData.message,this.positionData,
c);var d=this._createGuardOptions(!0,!0);return a.runGuarded(b,[this.positionData,this.positionData.message,c,this.startTracking],d)};a.messageInstance.prototype.getContent=a.messageInstance.prototype.renderTemplate;a.messageInstance.prototype.getElements=a.messageInstance.prototype.getType=function(){return this._type};a.messageInstance.prototype.isComparisonGroup=function(){return 999===this.revision};a.messageInstance.prototype.isHidden=a.messageInstance.prototype.isRestorable=function(){return this._isRestorable};a.messageInstance.prototype.setRestorable=function(a){this._isRestorable=E(a)};a.messageInstance.prototype.isTrackable=a.messageInstance.prototype.setTrackable=a.messageInstance.prototype._createGuardOptions=function(b,c){return{type:a.ERROR_TYPE_MESSAGE_EXCEPTION,level:a.LOG_LEVEL_ERROR,module:a.MODULE_MESSAGE,messageId:this.id,
revisionId:this.revision,positionId:this.positionData.position,rendererName:b&&this.positionData.hasRenderer()?this.positionData.renderer:void 0,templateId:this.template&&this.template.variable?B(this.template.variable):void 0,context:c?this:void 0}};a.messageInstance.prototype._createParams=function(b,c){c||(c=a.MESSAGE_SCRIPT_ID);return{args:a.utils.extend({message:this.positionData.message,positionData:this.positionData,easy:w.easy,site:w.site},b),guardOptions:this._createGuardOptions(),scriptNamespace:c+
this.id,styleNamespace:a.MESSAGE_STYLE_ID+this.id}};a.messageInstance.prototype._hasElapsedDisplayInterval=function(){if(0<this.options.displayInterval&&0<=a.context.messageDisplayIntervalTimestamps[this.id]){var b=D.now()-a.context.messageDisplayIntervalTimestamps[this.id];return I.floor(b/1E3)>=this.options.displayInterval}return!0};a.messageInstance.prototype._setDisplayIntervalTimestamp=function(){0<this.options.displayInterval&&(a.context.messageDisplayIntervalTimestamps=a.context.messageDisplayIntervalTimestamps||
{},a.context.messageDisplayIntervalTimestamps[this.id]=D.now(),a.context.save())};a.messageInstance.prototype._hasMaxDisplays=function(){return 0<this.options.maxDisplayTimes&&a.context.messageDisplayTimes[this.id]>=this.options.maxDisplayTimes};a.messageInstance.prototype._incrMaxDisplays=function(){0<this.options.maxDisplayTimes&&(a.context.messageDisplayTimes=a.context.messageDisplayTimes||{},a.context.messageDisplayTimes[this.id]=(a.context.messageDisplayTimes[this.id]||0)+1,a.context.save())};
a.messageInstance.prototype._isHiddenTrackable=function(b){var c=a.utils.inArray([this.positionData.METHOD_HIDE,this.positionData.METHOD_RENEW,this.positionData.METHOD_REPLACE],this.positionData.method);c&&!a.config.hiddenMessageClickTracking&&a.console.warn(a.MODULE_MESSAGE,'Set "easy.config.hiddenMessageClickTracking" to true, so message_id.'+this.id+' will be tracked as "'+b+'"',this.positionData);return c&&a.config.hiddenMessageClickTracking};a.messageInstance.prototype._logSend=function(b,c,
d){var f=this._createGuardOptions();delete f.type;f.level=d;a.log.send(b,c,f)}})();a.messageTrueDisplay=function(){unction g(b,c,d,e){r[c.position]={message:b,positionData:c,elements:a.utils.isArray(d)?d:[d],timerId:void 0,trackAutomatically:e,onScroll:void 0}}function c(c){if(c.trackAutomatically){var d=a.utils.some(c.elements,a.domElements.isVisible);d&&!c.timerId?c.timerId=a.utils.setTimeout(a.MESSAGE_TRUE_DISPLAY_TIME):d||b(c)}}function d(){a.utils.isEmpty(r)&&
(sa(l),l=void 0)}unction e(b){b.onScroll||(b.onScroll=a.domEvents.on(window,"scroll."+a.DOM_EVENT_NAMESPACE,b.onScroll))}function n(b){b.onScroll&&a.domEvents.off(window,"scroll."+a.DOM_EVENT_NAMESPACE,b.onScroll)}function m(c){var e=c.message,f=c.positionData,g=e.id+"-"+e.revision;u[g]||(u[g]=!0,a.ready(function(){a.api.trueDisplay(null,e.id,e.revision);a.events.trigger(a.EVENT_MESSAGE_TRUE_DISPLAY,e);a.console.info("[messageTrueDisplay]",
"position_id."+f.position+", message_id."+e.id+", revision_id."+e.revision,f)}));b(c);delete r[f.position];d()}var u={},r={},l;return{checkAll:f,clear:function(){a.utils.each(r,n);a.utils.each(r,b);a.events.clearEvent(a.EVENT_MESSAGE_TRUE_DISPLAY);u={};r={};d()},clearId:function(a,c){var e=r[c.position];e&&(n(e),b(e));delete u[a.id+"-"+a.revision];delete r[c.position];d()},logInstantly:function(b,c){if(!u[b+"-"+c]){var d=a.utils.find(r,;d?(d.message.revision=c,
m(d)):a.log.warn("True display not initialized for message",a.ERROR_TYPE_MESSAGE_INIT,{module:a.internal.getCurrentModule(),messageId:b,revisionId:c})}},setData:g,start:function(b,c,d){d&&0!==d.length&&b&&c&&(g(b,c,d,!0),e(r[c.position]),f(),l||(l=a.utils.setInterval(f,1E3)))}}}();a.positionData=function(f,g){if(!(this instanceof a.positionData))throw new y('"easy.positionData" cannot be called as a function. Use the "new" keyword to construct a new "Position" instance');f instanceof a.positionData&&
a.console.error(a.MODULE_POSITION,'Invalid type for "position" argument, must not be an instance of easy.positionData');if(!f)throw new y('Invalid type for "position" argument, got "'+a.utils.getType(f)+'"');if(!f.elementId)throw new y('Invalid position "elementId" property for '+f);a.utils.extend(this,f);this._messageInstance=void 0;this._showInstance=H.bind(this._showInstance,this);J.defineProperty(this,"_waitForElement",{configurable:!0,writable:!0});this.triggerId=G(this.triggerId)||void 0;this._isTriggered=
this._hasTriggerEvent=!1;this._onTriggerEvent=H.bind(this._onTriggerEvent,this);this.cssClasses=this.cssClasses||null;this.cssText=this.cssText||null;this.renderer=this.renderer||null;this.message=void 0;this.hidden=!1;this._setPriorityLevel();this.method===this.METHOD_HIDE&&this.isMatchingUrl(g)&&this.hide()};a.positionData.prototype.getElements=function(){return a.domElements.selector(this.getSelector(),x,this.hasjQuerySelector())};a.positionData.prototype.getSelector=function(){return this.isPopup()?
a.popup.getId():this.selectorType===this.SELECTOR_TYPE_V1?/^\$/.test(this.elementId)?this.elementId.substring(1):"#"+this.elementId:this.elementId};a.positionData.prototype.hasjQuerySelector=function(){return this.selectorType===this.SELECTOR_TYPE_JQUERY||!a.domElements.isSelector(this.getSelector())};a.positionData.prototype.isPopup=a.positionData.prototype.hide=function(){var f=this.getSelector();if(a.domElements.isSelector(f)){var g=
a.domElements.selector(f);a.utils.some(g,function(c){return 0<a.domElements.visibility(c)})||(a.domElements.addStyles(f+" { visibility: hidden !important; }","hide_and_replace_"+this.position),this.hidden=!0)}else a.log.warn('Invalid position CSS selector of "'+f+'"',a.ERROR_TYPE_SELECTOR_INVALID,{module:a.MODULE_POSITION,positionId:this.position})};a.positionData.prototype.show=function(){if(this.method===this.METHOD_HIDE&&this.hidden){this.hidden=!1;var f=this.getSelector();a.domElements.isSelector(f)&&
a.domElements.removeStyles(f,"hide_and_replace_"+this.position)}};a.positionData.prototype.getRenderer=function(){if(this.hasRenderer()){var f=a.message.getCustomRenderer(this.renderer);void 0===f&&(f=this.message&&0<this.message.id?this.message.id:void 0,a.log.error('Invalid renderer function, for "'+this.renderer+'"',a.ERROR_TYPE_MESSAGE_INVALID,{module:a.MODULE_POSITION,messageId:f,revisionId:f?this.message.revision:void 0,positionId:this.position,rendererName:this.renderer||void 0}),f=function(a){a.clear()});
return f}};a.positionData.prototype.getHiddenRenderer=function(){return this.hasRenderer()?a.message.getCustomRenderer(this.renderer+".hidden"):void 0};a.positionData.prototype.hasRenderer=function(){return a.utils.isString(this.renderer)&&0<this.renderer.length};a.positionData.prototype.render=function(f){a.console.info("[positionActive]","position_id."+this.position+", message_id."+this.message.id+", revision_id."+this.message.revision,this);this._interval=G(f.interval)||100;this._maxcalls=G(f.maxcalls)||
100;this._onRender=a.utils.isFunction(f.onRender)?f.onRender:function(){};this._messageInstance=new a.messageInstance(this);this._messageInstance.setRestorable(f.restoreMessage);this._messageInstance.setTrackable(f.trackMessage);this._startTriggerEvent(!0===f.excludeTrigger);this._onRender()};a.positionData.prototype._completeInstance=function(f){var g=void 0===f;a.events.trigger(g?a.EVENT_MESSAGESHOW_COMPLETE:a.EVENT_MESSAGESHOW_FAILED,this);a.console.info("[positionComplete]",(g?"Success":"Failed")+
": position_id."+this.position+", message_id."+this.message.id+", revision_id."+this.message.revision,this);g||a.debug.addEntry("errors_position",{error:f,positionId:this.position})};a.positionData.prototype._showInstance=function(){this._isCleared=!1;a.events.off(a.EVENT_JQUERY_READY,this._showInstance);a.events.off(a.ERROR_SITE_JQUERY_MISSING,this._showInstance);a.console.info("[positionWait]","position_id."+this.position+", message_id."+this.message.id+", revision_id."+this.message.revision,this);
this._waitForElement=a.domElements.waitFor({selector:this.getSelector(),interval:this._interval,timeout:this._maxcalls*this._interval});var f=this;this._waitForElement.then(function(){a.console.info("[positionFound]","position_id."+f.position+", message_id."+f.message.id+", revision_id."+f.message.revision,this);if(f._isCleared||!f._messageInstance.show())throw new y("Position was cleared or the message was not shown for "+f.position);f._completeInstance(void 0)}).catch(function(a){f._completeInstance(a)})};
a.positionData.prototype.isTriggered=function(){return this._isTriggered};a.positionData.prototype._startTriggerEvent=function(f){f||void 0===this.triggerId?this._onTriggerEvent():this._hasTriggerEvent||(this._hasTriggerEvent=!0,a.events.on(a.EVENT_TRIGGER_FIRE,this._onTriggerEvent))};a.positionData.prototype._onTriggerEvent=function(f){f&&this.triggerId!==f.id||(this._isTriggered=!0,this.hasjQuerySelector()&&!a.sizzle?(a.events.once(a.EVENT_JQUERY_READY,this._showInstance),a.events.once(a.ERROR_SITE_JQUERY_MISSING,
this._showInstance)):this._showInstance(),this.show())};a.positionData.prototype.clear=function(){this._waitForElement&&this._waitForElement.cancel();this._messageInstance&&(this._messageInstance.clear()&&this.isPopup()&&a.popup.hide(),this._messageInstance.clearTimers());this._isCleared=!0;this._waitForElement=this._messageInstance=void 0;this._isTriggered=this._hasTriggerEvent=this.hidden=!1;a.events.off(a.EVENT_TRIGGER_FIRE,this._onTriggerEvent);a.events.off(a.EVENT_JQUERY_READY,this._showInstance);
a.events.off(a.ERROR_SITE_JQUERY_MISSING,this._showInstance)};a.positionData.prototype.getMessageInstance=function(){return this._messageInstance};a.positionData.prototype.setMessage=function(f){if(!a.internal.isMessage(f))throw new y('Invalid type for "message" argument, got "'+a.utils.getType(f)+'" for '+this.position);this.message=f};a.positionData.prototype.isMatchingUrl=function(f){if(a.utils.isArray(this.rules)&&this.rules.length){var g=new a.baseEvaluator;f&&g.setEvaluatorValue("location",
f);g.setErrorOptions({type:a.ERROR_TYPE_POSITION_EXCEPTION,level:a.LOG_LEVEL_ERROR,module:a.MODULE_POSITION,positionId:this.position});f=g.evaluate(this.rules);!f&&a.console.isEnabled()&&g.printTrace("easy.positionData - "+this.position);return f}if(a.utils.isArray(this.urlMatch)&&0<this.urlMatch.length){var c=a.utils.getLocationFromUrl(f);return a.utils.some(this.urlMatch,function(d){var b=a.evaluator.getMatcherFunction(d[0]);return a.evaluator.matchUrl(b,d[1],d[2]||{},d[3]||{},c)})}return!0};a.positionData.prototype._setPriorityLevel=
function(){var f={matchExact:0,matchBegins:1,matchRegex:2},g=9999;a.utils.each(this.urlMatch,function(a){a=a[0];f.hasOwnProperty(a)&&(a=f[a],a<g&&(g=a))});this.priorityLevel=g};J.defineProperties(a.positionData.prototype,{METHOD_HIDE:{value:"hide"},METHOD_REPLACE:{value:"replace"},METHOD_RENEW:{value:"renew"},METHOD_BEFORE:{value:"before"},METHOD_AFTER:{value:"after"},METHOD_PREPEND:{value:"prepend"},METHOD_APPEND:{value:"append"},HIDDEN_CLASS:{value:"frosmo-message-hidden"},SELECTOR_TYPE_CSS:{value:"css"},
SELECTOR_TYPE_JQUERY:{value:"jquery"},SELECTOR_TYPE_POPUP:{value:"popup"},SELECTOR_TYPE_V1:{value:"v1"}});a.popup=function(){function f(){if(!x.body)throw a.internal.createLogError("Body not found",a.ERROR_TYPE_SELECTOR_INVALID,{module:a.internal.getCurrentModule()});var c;(c=a.domElements.selector(g())[0])||(b&&e||(b=x.createElement("div"),e=x.createElement("div"),b.setAttribute("id","frosmoPopupBackground"),e.setAttribute("id","frosmoPopup"),x.body.appendChild(b),x.body.appendChild(e)),c=e);return c}
unction c(){b.style.display="none";e.style.display="none";a.domEvents.off(b,"click."+a.DOM_EVENT_NAMESPACE,c);a.domEvents.off(a.domElements.selector(".frosmoPopupClose",e),"click."+a.DOM_EVENT_NAMESPACE,c)}function d(d,g){g=g||{};f();var u={args:{message:g.message,positionData:g,easy:w.easy,site:w.site}};g.message&&(u.scriptNamespace=a.MESSAGE_SCRIPT_ID+g.message.id,u.styleNamespace=a.MESSAGE_STYLE_ID+g.message.id);a.domElements.html(e,d,u);a.domEvents.on(b,"click."+
a.DOM_EVENT_NAMESPACE,c);a.domEvents.on(a.domElements.selector(".frosmoPopupClose",e),"click."+a.DOM_EVENT_NAMESPACE,c);e.style.display="block";b.style.display="block"}var b,e;return{create:f,getId:g,hide:c,render:function(b,c){b.renderer="easy.popup.renderer."+D.now();a.message.addCustomRenderer(b.renderer,function(a){var b=a.getMessageInstance();d(b.content,a);b.startTracking();b.setTrueDisplayed()});a.domEvents.ready(},show:d}}();a.visitsHistory=function(){function f(a){for(var b in e)if(a===
b)return!0;return!1}function g(b,c,d){if(!b||a.utils.isString(b))return[c];var e=[];e.push(c);for(c=0;c<b.length;c+=1){var f=b[c];8===f.length&&e.push(f);if(e.length>=d)break}return e}function c(b,c,d){var r=[];a.utils.each(c,function(c,m){if(!(null===c||f(c[4])&&e[c[4]](m,a.context.pageVisits,d))){var t=c[2]||{},v=a.evaluator.getMatcherFunction(c[0]);a.evaluator.matchUrl(v,c[1],t,a.config.anchorEnabled&&c[3]?c[3]:{},b)&&(a.context.pageVisits[m]=g(a.context.pageVisits[m],d,20),r.push(m),a.context.sessionPathVisits[m]=
1)}});return r}function d(b,c,d,r){var l=!1,k=[];a.utils.each(c,function(c,v){var h,m;if(null!==c){h=c[2]||{};m=a.evaluator.getMatcherFunction(c[0]);var z=c[1],F=a.config.anchorEnabled&&c[3]?c[3]:{},w=f(c[4])?c[4]:!1;a.evaluator.matchUrl(m,z,h,F,b)&&((m=a.config.sharedPages[v])?(l=!0,h=r):(h=a.context.pageVisits,m=v),w&&e[w](m,h,d)||(h[m]=g(h[m],d,20),k.push(m),a.context.sessionPathVisits[v]=1))}});l&&a.sharedPagesRpc.set("sharedPages",r);a.sharedContext.pageVisits=a.utils.clone(r);return k}ar e={day:function(b,c,d){var e=!1;a.utils.each(c[b],;return e},visit:;return{addPageVisit:function(b,e,f,g){var l,k=a.utils.getDateInContextFormat(f),t=a.utils.getLocationFromUrl(b.href);a.config.sharedPages?a.sharedPagesRpc.get("sharedPages").then(function(a){l=d(t,e,k,a||{});g(l)}):(l=c(t,e,k),g(l))},addSiteVisit:function(b){b=a.utils.getDateInContextFormat(b);a.context.siteVisits=g(a.context.siteVisits,
b,20)},shiftDateArray:g,addCustomAction:function(b,c){var d=a.utils.getDateInContextFormat(c);a.context.customActions[b]=g(a.context.customActions[b],d,20)},addMetaCount:function(b,c){var d=a.utils.getDateInContextFormat(c);a.context.metaCount[b]=g(a.context.metaCount[b],d,20)},addConversion:function(c,d,e){var f=a.utils.getDateInContextFormat(e);a.context.conversions[c]=g(a.context.conversions[c],f,20);if(d){var l=b(c,d);c=b(c,d)+"\nlast";a.context.conversions[l]=g(a.context.conversions[l],f,20);
a.context.conversions[c]=a.utils.getTimestamp(e)}},getConversionIdKey:b,getConversionLastTime:function(c,d){var e=b(c,d)+"\nlast";return a.context.conversions[e]}}}();a.styles="#frosmoPopup{display:none;position:fixed;top:10%;background-color:#fff;-moz-opacity:1;opacity:1;filter:alpha(opacity=100);border:1px solid #000;z-index:1002;-moz-box-shadow:0 0 30px #000;-webkit-box-shadow:0 0 30px #000;border-radius:7px;box-shadow:0 0 30px #000;width:560px;margin-left:-280px;left:50%;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;padding:10px 15px;overflow:auto}.frosmoPopupHeader{background-repeat:no-repeat}.frosmoPopupHeader h1{margin:10px}.frosmoPopupHeader .frosmoPopupClose{display:inline-block;float:right;background:transparent;border:none;font-size:20px;font-weight:bold;line-height:20px;cursor:pointer;margin:0;opacity:.4}.frosmoPopupHeader .frosmoPopupClose:hover{opacity:.8}.frosmoPopupContent{clear:both;position:relative;max-height:400px;overflow:auto;margin-bottom:15px;padding:0 10px 10px}.frosmoPopupFooter{display:block;text-align:right}.frosmoPopupFooter button{background:#ccc;border:none;padding:5px 10px;cursor:pointer;border-radius:4px}.frosmoPopupFooter button:hover{background:#aaa}#frosmoPopupBackground{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;z-index:1001;-moz-opacity:.7;opacity:.7;filter:alpha(opacity=70);margin:0;padding:0}#frosmoPopup.frosmoPopupMaxWidth640{width:auto;left:auto;margin-left:10px;margin-right:10px}@media(max-width:640px){#frosmoPopup{width:auto;left:auto;margin-left:10px;margin-right:10px}}@media(max-height:640px){.frosmoPopupContent{max-height:200px}}@media(max-height:840px){.frosmoPopupContent{max-height:400px}}@media(min-height:841px){.frosmoPopupContent{max-height:600px}}.frosmo-message-hidden{visibility:hidden!important}";
a.customAction=function(){var f;return{init:function(g){f=g;f.rules&&a.customActionRules.init(f.rules)},trigger:function(g,c,d){var b='Name: "'+g+'", Value: "'+c+'", Title: "'+d+'"';if(!f)return a.log.error("Custom actions not initialized, due to initalization failure",a.ERROR_TYPE_CUSTOM_ACTION_INVALID,{module:a.internal.getCurrentModule(),debug:b}),!1;if(!a.utils.isString(g))return a.log.error('Invalid type for custom action "name" argument, got "'+a.utils.getType(g)+'" for "'+g+'"',a.ERROR_TYPE_CUSTOM_ACTION_INVALID,
{module:a.internal.getCurrentModule(),debug:b}),!1;var e=a.utils.getType(c);if(!a.utils.inArray(["string","boolean","number"],e))return a.log.error('Invalid type for custom action "value" argument, got "'+e+'" for "'+c+'"',a.ERROR_TYPE_CUSTOM_ACTION_INVALID,{module:a.internal.getCurrentModule(),debug:b}),!1;if(!g||128<g.length)return a.log.error('Invalid custom action "name" argument length, for "'+g+'"',a.ERROR_TYPE_CUSTOM_ACTION_INVALID,{module:a.internal.getCurrentModule(),debug:b}),!1;c=B(c);
if(!c||128<c.length)return a.log.error('Invalid custom action "value" argument length, for "'+c+'"',a.ERROR_TYPE_CUSTOM_ACTION_INVALID,{module:a.internal.getCurrentModule(),debug:b}),!1;var n=f.date||new D,b=a.utils.reduce(f.segments,function(b,d,e){g===d.name&&a.utils.inArray(d.values,c)&&(a.visitsHistory.addCustomAction(e,n),b.push(e));return b},[]);0<b.length&&(a.segmentchange.evaluate({customActions:b},n),a.context.save());a.utils.inArray(f.states,g)&&a.states.set(g,c);a.events.trigger(a.EVENT_CUSTOMACTION,
g,c);e=a.EVENT_CUSTOMACTION+"."+g;a.events.trigger(e,g,c);a.events.trigger(e+"."+c,g,c);a.api.sendCustomAction(g,c,d);return 0<b.length}}}();a.customActionRules=function(){function f(d){if(w.geo)a.events.on(a.EVENT_LOCATION,;else a.log.send("Geolocation module not found",a.ERROR_TYPE_MODULE_MISSING,{level:a.LOG_LEVEL_CRITICAL})}function g(a){switch(a.type){case "geolocation":f(a)}}function c(c,b){var e={lat:b.latitude,lon:b.longitude};a.utils.each(c.rules,function(b,f){var g=L(b[2]);
w.geo.getCircleDistance(e,{lat:b[0],lon:b[1]})<=g&&a.customAction.trigger(c.name,f)})}return{init:initGeolocation:f,initRule:g}}();a.location=function(){function f(){return n||!a.utils.isMobile()}function g(a,b){var c={text:a,type:b,status:0,url:"",method:"getNative"},d;try{d=w.JSON.stringify(c)}catch(e){d='{"text":"Unexpected error with navigator.geolocation (default)","type":"'+b+'","status":-1,"url":"","method":"getNative"}'}return[c,d]}function c(b,c,d,e){a.utils.isFunction(b)&&
a.runGuarded(b,[d]);c(d);a.log.warn("Unexpected error occurred with requesting the location","location_"+d.type,{debug:e});a.events.trigger(a.EVENT_LOCATION_FAILURE,d)}function d(b,c,d){a.utils.isFunction(b)&&a.runGuarded(b,[d]);c(d);a.events.trigger(a.EVENT_LOCATION,d)}var b={enableHighAccuracy:!1,maximumAge:0,timeout:5E3},e={country2:"",ip:"",isp:"",latitude:0,longitude:0,city:"",regionCode:""},n=!1;return{enableMobile:isSupported:f,get:function(b,g){var n,l,k=new a.Promise(function(a,
b){n=a;l=b});if(!f())return d(b,n,a.utils.clone(e)),k;var t=a.api.getApiUrl("location");if(!t)return d(b,n,a.utils.clone(e)),k;a.fetch.get(t,{dataType:"text",success:function(a,c,e){a={city:e.getResponseHeader("X-City"),country2:e.getResponseHeader("X-Country2"),ip:e.getResponseHeader("X-Real-IP"),isp:e.getResponseHeader("X-ISP"),latitude:L(e.getResponseHeader("X-latitude"))||0,longitude:L(e.getResponseHeader("X-longitude"))||0,regionCode:e.getResponseHeader("X-Region-Code")};d(b,n,a)},error:);return k},getNative:function(f,n,r){var l,k,t=new a.Promise(,v=a.utils.parseUri(a.main.getCurrentBrowserData().href).protocol;if("https"!==v)return r=g('Invalid protocol of "'+v+'", only "https" is supported',a.ERROR_TYPE_ARG_INVALID),c(n,k,r[0],r[1]),t;if(!O||!O.geolocation)return r=g("navigator.geolocation is not available",a.ERROR_TYPE_MODULE_MISSING),c(n,k,r[0],r[1]),t;v=r=a.utils.extend({},b,r);O.geolocation.getCurrentPosition(function(b){var c=a.utils.clone(e);
c.latitude=b.coords.latitude;c.longitude=b.coords.longitude;d(f,l,c)},function(b){b=g(b.message,a.ERROR_TYPE_EXCEPTION);c(n,k,b[0],b[1])},v);return t}}}();a.dataLayer=function(){unction g(a){return{product_id:a.frosmoProductId,product_name:a.frosmoProductName,product_price:a.frosmoProductPrice,product_type:a.frosmoProductCategory,product_image:a.frosmoProductImage,
product_url:a.frosmoProductUrl,product_discount_price:a.frosmoProductDiscountPrice,product_promotion_label:a.frosmoProductPromotionLabel,product_area:a.frosmoProductArea,product_campaign:a.frosmoProductCampaign,product_categories:a.frosmoProductCategories,product_category:a.frosmoProductMainCategory,product_city:a.frosmoProductCity,product_colors:a.frosmoProductColors,product_company:a.frosmoProductCompany,product_conversion:a.frosmoProductConversion,product_country:a.frosmoProductCountry,product_custom_images:a.frosmoProductCustomImages,
product_data:a.frosmoProductData,product_description:a.frosmoProductDescription,product_ids:a.frosmoProductIds,product_manufacturer:a.frosmoProductManufacturer,product_model:a.frosmoProductModel,product_multi_prices:a.frosmoProductMultiPrices,product_rating:a.frosmoProductRating,product_stock:a.frosmoProductStock,product_sub_category:a.frosmoProductSubCategory,product_urn:a.frosmoProductUrn,product_venue:a.frosmoProductVenue}}function c(){C=window.dataLayer.push;window.dataLayer.push=function(){var b=
a.utils.arrayFrom(arguments),c=C.apply(window.dataLayer,b);d(b);return c}}function d(b){a.utils.each(b,function(b){b&&(z(b),a.events.trigger(a.EVENT_DATALAYER,b))})}function b(b){if(!a.utils.isArray(b.transactionProducts))throw new y('Invalid type for "transactionProducts" property, got "'+a.utils.getType(b.transactionProducts)+'"');var c=a.utils.map(b.transactionProducts,function(a){return{id:a.id||a.sku||a.name,value:L(a.price),quantity:Q(a.quantity,10)||1}}),d=a.utils.map(c,function(b){b=a.utils.clone(b);
b.value*=b.quantity;return b}),e=b.transactionTotal||a.utils.reduce(d,0);a.api.transaction(null,"transaction",b.transactionId,e,d);a.events.trigger(a.EVENT_CONVERSION,{id:"transaction",type:"transaction",transactionId:b.transactionId,value:e,products:c});a.utils.each(c,function(b){for(var c={id:b.id,value:b.value},d=0;d<b.quantity;d++)a.events.trigger(a.EVENT_PRODUCT_PURCHASE,c)})}function e(b){return function(c,d){if(!a.utils.isNumeric(d))return'Invalid type for "'+
c+'" product attribute, got "'+a.utils.getType(d)+'", expected "numerical" value';var e=w.JSON.stringify(d).length;if(e>b)return'Invalid length for "'+c+'" product attribute, got '+e+", expected less than or equal to "+b}}unction m(b){return function(c,d){if(!a.utils.isString(d))return'Invalid type for "'+c+'" product attribute, got "'+a.utils.getType(d)+'", expected "string" type';var e=
a.utils.trim(d).length;if(e>b)return'Invalid length for "'+c+'" product attribute, got '+e+", expected less than or equal to "+b}}function u(b){var c={},d={};a.utils.each(b,function(a,b){var e=F[b];e?c[e.evtAlias]=c[b]=a:(c[b]=a,d[b]=a)});void 0===b.data&&(c.product_data=c.data=w.JSON.stringify(d));return c}function r(){h&&window.dataLayer===h||(window.dataLayer=window.dataLayer||[],h=window.dataLayer,d(window.dataLayer),c())}function l(b){b=a.utils.getByDotString("frosmo.addToCart.items",b,{empty:!1,
nonObjects:!1});if(!a.utils.isNil(b))if(a.utils.isArray(b))if(a.utils.isEmpty(b))a.log.error('Invalid length for "frosmo.addToCart.items" array, got 0, expected greater than or equal to 1',a.ERROR_TYPE_ARG_INVALID);else if(20<b.length)a.log.error('Invalid length for "frosmo.addToCart.items" array, got '+b.length+", expected less than or equal to 20",a.ERROR_TYPE_ARG_INVALID);else{var c=[];a.utils.each(b,function(b){b=b.id;var d=F.id.validator("id",b);d?c.push(d):(a.utils.isNil(b)||""===a.utils.trim(b))&&
c.push('Missing "id" product attribute, expected to be defined as a "string" type')});a.utils.isEmpty(c)?(b=a.utils.map(b,function(b){b=a.utils.clone(b);b.id=a.utils.trim(b.id);return b}),a.api.addToCart(b),a.console.log("[dataLayer]","Add to cart items sent")):a.log.error("Invalid add to cart items",a.ERROR_TYPE_ARG_INVALID,{debug:w.JSON.stringify({errors:c,cartItems:b})})}else a.log.error('Invalid type for "frosmo.addToCart.items" array, got "'+a.utils.getType(b)+'", expected "array" type',a.ERROR_TYPE_ARG_INVALID)}
function k(b){var c=a.utils.getByDotString("frosmo.view.products",b,{empty:!1,nonObjects:!1});if(!a.utils.isNil(c))if(a.utils.isArray(c))if(a.utils.isEmpty(c))a.log.error('Invalid length for "frosmo.view.products" array, got 0, expected greater than or equal to 1',a.ERROR_TYPE_ARG_INVALID);else{var d=["set","view","setView"],e=a.utils.getByDotString("frosmo.view.mode",b,{empty:!1,nonObjects:!1});a.utils.isNil(e)||a.utils.inArray(d,e)?a.utils.each(c,function(b){var c=[];a.utils.each(F,function(d,e){if(d.required){var f=
b[e];(a.utils.isNil(f)||""===a.utils.trim(f))&&c.push('Missing "'+e+'" product attribute, expected to be defined as a "string" type')}});a.utils.each(b,function(a,b){var d=F[b];(d=d?d.validator(b,a):x(b,a))&&c.push(d)});if(a.utils.isEmpty(c)){var d={};a.utils.each(b,function(b,c){var e=F[c];e&&e.transformer?d[c]=e.transformer(b):a.utils.isString(b)?d[c]=a.utils.trim(b):d[c]=b});var f=u(d);a.console.log("[dataLayer]",'Product sent with the product type "'+f.type+'" and product name "'+f.name+'"');
a.events.trigger(a.EVENT_PRODUCT_DATA,f);a.api.setProductDataPayload(d,e)}else a.log.error("Invalid product data payload",a.ERROR_TYPE_ARG_INVALID,{debug:w.JSON.stringify({errors:c,product:b,mode:e})})}):a.log.error('Invalid mode for "frosmo.view.mode", got "'+e+'", expected one of: "'+d.join('", "')+'"',a.ERROR_TYPE_ARG_INVALID)}else a.log.error('Invalid type for "frosmo.view.products" array, got "'+a.utils.getType(c)+'", expected "array" type',a.ERROR_TYPE_ARG_INVALID)}function t(b){b=a.utils.getByDotString("frosmo.viewItemList.filters",
b,{empty:!1,nonObjects:!1});if(!a.utils.isNil(b))if(a.utils.isPlainObject(b))if(a.utils.isEmpty(b))a.log.error('Invalid length for "frosmo.viewItemList.filters" object, got 0, expected greater than or equal to 1',a.ERROR_TYPE_ARG_INVALID);else if(20<a.utils.keys(b).length)a.log.error('Invalid length for "frosmo.viewItemList.filters" object, got 0, expected less than or equal to 20',a.ERROR_TYPE_ARG_INVALID);else{var c=[];a.utils.each(b,function(a,b){var d=v(b,a,20,256);d&&c.push(d)});if(a.utils.isEmpty(c)){var d=
{};a.utils.each(b,function(b,c){d[a.utils.trim(c)]=a.utils.map(b,});a.api.viewItemList(d);a.console.log("[dataLayer]","View item list filters sent")}else a.log.error("Invalid view item list filters",a.ERROR_TYPE_ARG_INVALID,{debug:w.JSON.stringify({errors:c,filters:b})})}else a.log.error('Invalid type for "frosmo.viewItemList.filters" object, got "'+a.utils.getType(b)+'", expected "object" type',a.ERROR_TYPE_ARG_INVALID)}function v(b,c,d,e){var f=a.utils.trim(b).length;
if(0===f)return'Missing name, expected to be a non-empty "string" type';if(f>e)return'Invalid length for "'+b+'" filter name, got '+f+", expected less than or equal to "+e;if(!a.utils.isArray(c))return'Invalid type for "'+b+'" filter, got "'+a.utils.getType(c)+'", expected "array" type containing "string" types';if(a.utils.isEmpty(c))return'Invalid length for "'+b+'" filter name, got 0, expected greater than or equal to 1';if(c.length>d)return'Invalid length for "'+b+'" filter name, got '+c.length+
", expected less than or equal to "+d;for(d=0;d<c.length;d++){f=c[d];if(!a.utils.isString(f))return'Invalid type for "'+b+'" filter, got "'+a.utils.getType(f)+'", expected "array" type containing "string" types';f=a.utils.trim(f).length;if(0===f)return'Missing value for "'+b+'" filter, expected to have non-empty "string" types';if(f>e)return'Invalid length for "'+b+'" filter, got '+f+", expected less than or equal to "+e}}var h,C,z=function(c){c.transactionProducts?b(c):c.frosmoProductId?(a.products.push(g(c)),
a.conversion.handleProductArray("dataLayer_module",1)):c.conversionId?(a.conversions.push(f(c)),a.conversion.handleConversionArray("dataLayer_module",1)):c.frosmoEvent?a.customAction.trigger(B(c.frosmoEvent),B(c.frosmoValue)):(l(c),k(c),t(c))},F={id:{evtAlias:"product_id",required:!0,validator:m(256)},availability:{evtAlias:"product_availability",required:!1,validator:function(b){return function(c,d){if(!a.utils.inArray(b,d))return'Invalid value for "'+c+'" product attribute, got "'+d+'", expected one of: "'+
b.join('", "')+'"'}}(["in stock","out of stock","preorder"])},availableOn:{evtAlias:"product_available_on",required:!1,validator:function(b,c){if(!a.utils.isString(c))return'Invalid type for "'+b+'" product attribute, got "'+a.utils.getType(c)+'", expected "datetime string" type';var d=a.utils.trim(c),e=new D(d);if(!(0<e.valueOf()&&e.toISOString()===d))return'Invalid value for "'+b+'" product attribute, got "'+c+'", expected "datetime string"'}},brand:{evtAlias:"product_brand",required:!1,validator:m(2048)},
categories:{evtAlias:"product_categories",required:!1,validator:function(b){return function(c,d){if(!a.utils.isArray(d)||a.utils.some(d,)return'Invalid type for "'+c+'" product attribute, got "'+a.utils.getType(d)+'", expected "array" type containing "string" types';var e=w.JSON.stringify(d).length;if(e>b)return'Invalid length for "'+c+'" product attribute, got '+e+", expected less than or equal to "+b}}(2048)},image:{evtAlias:"product_image",required:!1,validator:m(2048)},
name:{evtAlias:"product_name",required:!1,validator:m(256)},originalPrice:{evtAlias:"product_original_price",required:!1,validator:e(2048),transformer:G},parentId:{evtAlias:"product_parent_id",required:!1,validator:function(b,c){return function(d,e){if(null!==e){if(!a.utils.isString(e))return'Invalid type for "'+d+'" product attribute, got "'+a.utils.getType(e)+'", expected "null" or "string" type';var f=a.utils.trim(e).length;if(f<b)return'Invalid length for "'+d+'" product attribute, got '+f+", expected greater than or equal to "+
b;if(f>c)return'Invalid length for "'+d+'" product attribute, got '+f+", expected less than or equal to "+c}}}(1,256)},price:{evtAlias:"product_price",required:!1,validator:e(2048),transformer:G},type:{evtAlias:"product_type",required:!1,validator:m(256)},url:{evtAlias:"product_url",required:!1,validator:m(2048)},created_at:{validator:n},updated_at:{validator:n},feed_updated_at:{validator:n}},x=function(b,c){return function(d,e){var f=B(d).length;if(f>b)return'Invalid length for "'+d+'" product attribute name, got '+
f+", expected less than or equal to "+b;a.utils.isString(e)&&(e=a.utils.trim(e));f=w.JSON.stringify(e).length;if(f>c)return'Invalid length for "'+d+'" product attribute, got '+f+", expected less than or equal to "+c}}(32,2048);return{init:function(){r();a.utils.setInterval(r,1E3)},convertToConversions:function(b){if(!a.utils.isArray(b.transactionProducts))throw new y('Invalid type for conversion "transactionProducts" property, got "'+a.utils.getType(b.transactionProducts)+'"');return a.utils.map(b.transactionProducts,
function(a){return{conversion_id:a.id||a.sku||a.name,conversion_name:a.name,conversion_value:L(a.price),conversion_quantity:a.quantity,conversion_type:a.category,transaction_id:b.transactionId,payment_channel:b.transactionPaymentType||null}})},convertToConversion:f,convertToProduct:g,handleItem:z,setHandleItem:function(b){z=a.guard(b,{module:a.internal.getCurrentModule()})}}}();a.user=function(){function f(f){var c=B(f);a.context.lastLoginId=c;a.context.save();a.events.once(a.EVENT_INIT_QUICK_CONTEXT,
function(){var d=a.quickContext.get();d.lastLoginId=c;a.quickContext.save(d)})}return{init:function(){a.states.set("loginStatus",a.user.getLoginId()?"authenticated":"unauthenticated")},getLoginId:login:function(g){if(!(a.utils.isNumber(g)||a.utils.isString(g)&&0<g.length))throw new y('Invalid type for "loginId" argument, got "'+a.utils.getType(g)+'" for "'+w.JSON.stringify(g)+'"');f(g);a.context.loginId=g;a.context.save();a.api.login(g,a.context.referer.host);
a.states.set("loginStatus","authenticated");a.events.trigger(a.EVENT_LOGIN);return!0},logout:function(){a.context.loginId=null;a.context.save();a.states.set("loginStatus","unauthenticated");a.events.trigger(a.EVENT_LOGOUT);return!0}}}();a.googleAnalytics=function(){var f;return{init:function(g){f=a.utils.clone(g);if(!f.trackingId)return!1;f.trackDisplays&&a.googleAnalytics.trackEvent(a.EVENT_MESSAGE_SHOW,f.eventActionDisplay,!0);f.trackTrueDisplays&&a.googleAnalytics.trackEvent(a.EVENT_MESSAGE_TRUE_DISPLAY,
f.eventActionTrueDisplay,!0);f.trackClicks&&a.googleAnalytics.trackEvent(a.EVENT_MESSAGE_CLICK,f.eventActionClick,!1);return!0},getEventLabel:function(a){var c="#"+a.id+"."+(999===a.revision?"CG":a.revision);a.title&&(c+=" "+a.title);return c},getClassicTracker:function(){if(window._gat&&a.utils.isFunction(window._gat._getTrackers)){var g=window._gat._getTrackers();return a.utils.find(g,}},getUniversalTracker:function(){if(window.ga&&a.utils.isFunction(window.ga.getAll)){var g=
window.ga.getAll();return a.utils.find(g,}},isEnabled:sendClassicEvent:function(g,c,d){var b=a.googleAnalytics.getClassicTracker();if(b){var e=f.eventCategory;g=a.googleAnalytics.getEventLabel(g);b._trackEvent(e,c,g,0,d)}else a.console.error("[googleAnalytics]",'Unable to find the classic tracker for id "'+f.trackingId+'"')},sendEvent:function(g,c,d){var b={level:a.LOG_LEVEL_WARNING,module:a.MODULE_MESSAGE,
messageId:g.id,revisionId:g.revision,debug:'Action: "'+c+'"'},e=a.utils.extend({type:a.ERROR_TYPE_GA_EXCEPTION},b),e=a.guard(function(){var b=!1;window.ga&&a.googleAnalytics.getUniversalTracker()&&(b=!0,window.ga(function(){a.googleAnalytics.sendUniversalEvent(g,c,d)}));window._gaq&&a.googleAnalytics.getClassicTracker()&&(b=!0,window._gaq.push();b&&a.debug.addEntry("google_analytics",{messageId:g.id,revisionId:g.revision,action:c,category:f.eventCategory,
label:a.googleAnalytics.getEventLabel(g)});return b},e);a.utils.waitFor(100,a.GA_INIT_TIMEOUT,e,},sendUniversalEvent:function(g,c,d){var b=a.googleAnalytics.getUniversalTracker();if(b){var e=f.eventCategory;g=a.googleAnalytics.getEventLabel(g);b.send("event",e,c,g,0,{nonInteraction:d})}else a.console.error("[googleAnalytics]",'Unable to find the universal tracker for id "'+f.trackingId+'"')},trackEvent:function(f,
c,d){a.events.on(f,function(b){a.googleAnalytics.isEnabled(b)&&a.googleAnalytics.sendEvent(b,c,d)})}}}();(function(a){ion n(a,f){a[f>>5]|=128<<f%32;a[(f+64>>>9<<4)+14]=f;var h,m,
n,u,r,p=1732584193,k=-271733879,l=-1732584194,q=271733878;for(h=0;h<a.length;h+=16)m=p,n=k,u=l,r=q,p=d(p,k,l,q,a[h],7,-680876936),q=d(q,p,k,l,a[h+1],12,-389564586),l=d(l,q,p,k,a[h+2],17,606105819),k=d(k,l,q,p,a[h+3],22,-1044525330),p=d(p,k,l,q,a[h+4],7,-176418897),q=d(q,p,k,l,a[h+5],12,1200080426),l=d(l,q,p,k,a[h+6],17,-1473231341),k=d(k,l,q,p,a[h+7],22,-45705983),p=d(p,k,l,q,a[h+8],7,1770035416),q=d(q,p,k,l,a[h+9],12,-1958414417),l=d(l,q,p,k,a[h+10],17,-42063),k=d(k,l,q,p,a[h+11],22,-1990404162),
p=d(p,k,l,q,a[h+12],7,1804603682),q=d(q,p,k,l,a[h+13],12,-40341101),l=d(l,q,p,k,a[h+14],17,-1502002290),k=d(k,l,q,p,a[h+15],22,1236535329),p=b(p,k,l,q,a[h+1],5,-165796510),q=b(q,p,k,l,a[h+6],9,-1069501632),l=b(l,q,p,k,a[h+11],14,643717713),k=b(k,l,q,p,a[h],20,-373897302),p=b(p,k,l,q,a[h+5],5,-701558691),q=b(q,p,k,l,a[h+10],9,38016083),l=b(l,q,p,k,a[h+15],14,-660478335),k=b(k,l,q,p,a[h+4],20,-405537848),p=b(p,k,l,q,a[h+9],5,568446438),q=b(q,p,k,l,a[h+14],9,-1019803690),l=b(l,q,p,k,a[h+3],14,-187363961),
k=b(k,l,q,p,a[h+8],20,1163531501),p=b(p,k,l,q,a[h+13],5,-1444681467),q=b(q,p,k,l,a[h+2],9,-51403784),l=b(l,q,p,k,a[h+7],14,1735328473),k=b(k,l,q,p,a[h+12],20,-1926607734),p=c(k^l^q,p,k,a[h+5],4,-378558),q=c(p^k^l,q,p,a[h+8],11,-2022574463),l=c(q^p^k,l,q,a[h+11],16,1839030562),k=c(l^q^p,k,l,a[h+14],23,-35309556),p=c(k^l^q,p,k,a[h+1],4,-1530992060),q=c(p^k^l,q,p,a[h+4],11,1272893353),l=c(q^p^k,l,q,a[h+7],16,-155497632),k=c(l^q^p,k,l,a[h+10],23,-1094730640),p=c(k^l^q,p,k,a[h+13],4,681279174),q=c(p^k^
l,q,p,a[h],11,-358537222),l=c(q^p^k,l,q,a[h+3],16,-722521979),k=c(l^q^p,k,l,a[h+6],23,76029189),p=c(k^l^q,p,k,a[h+9],4,-640364487),q=c(p^k^l,q,p,a[h+12],11,-421815835),l=c(q^p^k,l,q,a[h+15],16,530742520),k=c(l^q^p,k,l,a[h+2],23,-995338651),p=e(p,k,l,q,a[h],6,-198630844),q=e(q,p,k,l,a[h+7],10,1126891415),l=e(l,q,p,k,a[h+14],15,-1416354905),k=e(k,l,q,p,a[h+5],21,-57434055),p=e(p,k,l,q,a[h+12],6,1700485571),q=e(q,p,k,l,a[h+3],10,-1894986606),l=e(l,q,p,k,a[h+10],15,-1051523),k=e(k,l,q,p,a[h+1],21,-2054922799),
p=e(p,k,l,q,a[h+8],6,1873313359),q=e(q,p,k,l,a[h+15],10,-30611744),l=e(l,q,p,k,a[h+6],15,-1560198380),k=e(k,l,q,p,a[h+13],21,1309151649),p=e(p,k,l,q,a[h+4],6,-145523070),q=e(q,p,k,l,a[h+11],10,-1120210379),l=e(l,q,p,k,a[h+2],15,718787259),k=e(k,l,q,p,a[h+9],21,-343485551),p=g(p,m),k=g(k,n),l=g(l,u),q=g(q,r);return[p,k,l,q]}ction l(a,b){var c,d=u(a),e=[],f=[];e[15]=f[15]=void 0;16<d.length&&(d=n(d,8*a.length));for(c=0;16>c;c+=1)e[c]=d[c]^909522486,f[c]=d[c]^1549556828;c=n(e.concat(u(b)),512+8*b.length);return m(n(f.concat(c),640))}function k(a){var b="",c,d;for(d=0;d<a.length;d+=1)c=a.charCodeAt(d),b+="0123456789abcdef".charAt(c>>>4&15)+"0123456789abcdef".charAt(c&15);return b}a.md5=
)(a);a.quickContext=function(){function f(b){var c={};a.utils.each(b,;return c}function g(b){var c={};a.utils.each(l,function(a,d){b[d]&&(c[d]=1)});return c}function c(b){var d=[];a.utils.each(b,function(b){a.utils.isArray(b)?d=d.concat(c(b)):(b=b.match(/sgmt_\d+/))&&(d=d.concat(b))});return d}function d(c){var d=b();if(d){var e={};a.utils.each(d.segments,;d.segments=e;m.UID=d.UID;m.lastLoginId=d.lastLoginId;m.origin=d.origin;m.lastPageView=d.lastPageView||m.lastPageView;a.utils.each(f(d.lastDisplayTime),function(a,b){n("lastDisplayTime",b,a)});a.utils.each(f(d.lastRevisionId),;m.segments=g(d.segments);d.profile&&(m.profile=d.profile);d.states&&(m.states.session=a.utils.extend({},d.states.session))}var d=D.now(),l=d-m.lastPageView.time>=a.main.VISIT_TIMEOUT;l&&(m.states.session={});k=0===m.lastPageView.time||
l;m.lastPageView.time=d;null===m.UID&&(m.UID=a.uid.newUid(c),m.origin=a.config.api.origin);a.quickContext.save(m)}function b(){var b;if(a.quickContext.getType()===a.CONTEXT_TYPE_STORAGE){if(b=a.store.get(a.COOKIE_QUICK_CONTEXT))return b;b=w.JSON.safeParse(a.cookies.get(a.COOKIE_QUICK_CONTEXT));if(!b)return;a.store.set(a.COOKIE_QUICK_CONTEXT,b);a.cookies.remove(a.COOKIE_QUICK_CONTEXT);a.log.info("Migrated quick context from cookie storage to local storage","context.migration");return b}if(b=w.JSON.safeParse(a.cookies.get(a.COOKIE_QUICK_CONTEXT)))return b;
if(b=a.store.get(a.COOKIE_QUICK_CONTEXT))return a.cookies.set(a.COOKIE_QUICK_CONTEXT,w.JSON.stringify(b),365),a.store.remove(a.COOKIE_QUICK_CONTEXT),a.log.info("Migrated quick context from local storage to cookie storage","context.migration"),b}function e(){a.events.once(a.EVENT_INIT_UID,;a.ready(function(){m.lastPageView.time=a.context.lastPageView.time;m.segments=g(a.context.segments);a.quickContext.save(m)});a.events.on(a.EVENT_SEGMENT_ENTER,function(b){l[b]&&
(m.segments[b]=1,a.quickContext.save(m))});a.events.on(a.EVENT_SEGMENT_LEAVE,function(b){m.segments[b]&&(delete m.segments[b],a.quickContext.save(m))});a.events.on(a.EVENT_STATE_SET,function(b,c,d){d===a.STATE_TYPE_SESSION&&(m.states.session[b]=c,a.quickContext.save(m))});a.events.on(a.EVENT_STATE_REMOVE,function(b){void 0!==m.states.session[b]&&(delete m.states.session[b],a.quickContext.save(m))});a.events.on(a.EVENT_MESSAGE_SHOW,function(b){r[b.id]&&n("lastDisplayTime",b.id,a.utils.getTimestamp())&&
n("lastRevisionId",b.id,b.revision)&&a.quickContext.save(m)})}function n(a,b,c){b=G(b);return 0<b&&0<c?(m[a][b]=c,!0):!1}var m,u={VERSION:"1.1.0",UID:null,origin:null,lastDisplayTime:{},lastRevisionId:{},lastPageView:{time:0},segments:{},states:{session:{}}},r={},l={},k=!1;return{init:function(b,f){m=m||a.utils.clone(u);r={};a.utils.each(b,;a.utils.each(b,function(b){a.utils.each(c(b.segmentRules),});d(f);e();a.events.trigger(a.EVENT_INIT_QUICK_CONTEXT,a.quickContext.get())},
get:function(){return a.utils.clone(m)},getType:hasSessionExpired:function(){return k},remove:function(){m=a.utils.clone(u);r={};l={};a.store.remove(a.COOKIE_QUICK_CONTEXT);a.cookies.exists(a.COOKIE_QUICK_CONTEXT)&&a.cookies.remove(a.COOKIE_QUICK_CONTEXT)},save:function(b){b=a.utils.clone(b);m=a.utils.extend(m,b);b.segments=a.utils.map(b.segments,;0===b.segments.length&&
delete b.segments;a.utils.isEmpty(b.lastDisplayTime)&&delete b.lastDisplayTime;a.utils.isEmpty(b.lastRevisionId)&&delete b.lastRevisionId;a.quickContext.getType()===a.CONTEXT_TYPE_STORAGE?a.store.set(a.COOKIE_QUICK_CONTEXT,b):a.cookies.set(a.COOKIE_QUICK_CONTEXT,w.JSON.stringify(b),365)},_getSegmentsFromRules:c}}();a.quickMessage=function(){function f(b,c,d){var e=D.now(),f=a.states.getAll(),g=new a.baseEvaluator;g.setEvaluatorValue("segments",c.segments);a.utils.each(b,function(h){if(a.utils.inArray(h.decils,
d)){var m=!h.endTime||e<=h.endTime;h.startTime<=e&&m?a.utils.every(h.states,?g.evaluate(h.segmentRules)?void 0!==c.profile&&"all"!==h.profile&&h.profile!==c.profile&&delete b[h.id]:delete b[h.id]:delete b[h.id]:delete b[h.id]}else delete b[h.id]})}function g(b,d,e){a.utils.each(b,}function c(b,c,e){var f=a.utils.find(b.revisions,;if(e&&f)return f;e=a.utils.filter(b.revisions,;f=!a.quickContext.hasSessionExpired();if(b.revisionsLock||f){var g=c.lastRevisionId[b.id];if(b=a.utils.find(e,)return b}if(a.utils.some(e,&&(b=d(e)))return b;b=I.floor(I.random()*e.length);return e[b]}function d(b){var c=0;b=a.utils.filter(b,function(a){return 0<a.balancing?(c+=a.balancing,!0):!1});b.sort(;var d,e=0,f=c*I.random();return a.utils.find(b,
function(a){d=a;e+=a.balancing;return e>=f})||d}function b(b,c){var d={},e=[];a.utils.each(b,function(b){var f={id:b.id,priority:b.priority,selected:0,lastShown:c.lastDisplayTime[b.id]||0};a.utils.each(b.positions,function(a){d[a]||(d[a]=[],e.push(a));d[a].push(f)})});e.sort(;var f=0,g={};a.utils.each(e,function(a){var b=d[a];b.sort(function(a,b){return a.priority!==b.priority?b.priority-a.priority:a.selected!==b.selected?a.selected-b.selected:a.lastShown-b.lastShown});b=
b[0];g[a]=b.id;f+=1;b.selected=f});return g}function e(b,c,d){c=a.utils.map(c,function(c,e){var f=a.message.getPosition(e);f instanceof a.positionData||(f=new a.positionData(f,d),a.console.error("[quickMessage]","Invalid type for "+e+", must be an instance of easy.positionData"));var g=n(b[c]);f.setMessage(g);return f});return a.utils.filter(c,}function n(b){b=a.utils.clone(b);delete b.revisions;b.options=a.utils.extend({displayDelay:0,displayInterval:0,maxDisplayTimes:0},
b.options);var c=b.revision;b.content=c.content||"";b.messageName="";b.revision=c.id;b.revisionType=c.type;b.title=c.title;c.template&&(b.template=c.template);return b}var m;return{init:function(b,c){a.utils.isEmpty(b)?a.quickContext.remove():(m={},a.utils.each(b,function(b){a.utils.isEmpty(b.revisions)||(m[b.id]=b)}),a.quickContext.init(b,c))},requestMessages:function(){if(m&&!a.preview.getParams()){var c=a.quickContext.get();a.profile&&a.profile.validate(c.profile);var d=c.lastLoginId?c.lastLoginId:
c.UID,l=a.uid.getDecilForUid(d),k=a.uid.isInComparisonGroup(d),d=a.utils.clone(m);f(d,c,l);g(d,c,k);c=b(d,c);l=a.main.getCurrentBrowserData().href;d=e(d,c,l);a.message.updatePositions(d);a.utils.each(d,a.guard(a.message.show,{module:a.MODULE_MESSAGE}))}},_testApplyMessageFilters:f,_testGetShowableRevision:c,_testPrioritizeAndSortMessages:b,_testConvertToNormalMessage:n}}();a.contextApi=function(){function f(f,c,d,b,e){d=a.utils.isFunction(d)?a.guard(d):function(){};b=a.utils.isFunction(b)?a.guard(b):
function(){};return a.fetch.ajax({url:c,method:f,data:w.JSON.stringify(e),dataType:"text",success:function(a){try{d(w.JSON.parse(a))}catch(b){d(void 0)}},error:b})}return{get:function(g,c,d){return f("GET",a.api.getCallUrl("contextApi",{method:"get",key:g}),c,d,null)},set:function(g,c,d,b){return f("POST",a.api.getCallUrl("contextApi",{method:"set",key:g}),d,b,c)}}}();a.segmentCounters=function(){function f(b,c){var d=g(new D(a.context.lastPageView.time-864E5*(c-1)));return a.utils.filter(b,}unction c(b){if(b=a.context.counts[b]){var c=[];a.utils.each(b.split(","),function(a){a=a.split(":");for(var b=G(a[1])||1;0<b--;)c.push(a[0])});return c}return[]}function d(b,c){c=c.slice(-20);var d={};a.utils.each(c,function(a){d[a]=++d[a]||1});var f=[];a.utils.each(a.utils.keys(d).sort(),function(a){var b=d[a];f.push(a+(1===b?"":":"+b))});a.context.counts[b]=f.join(",");a.context.save()}return{getTriggerCount:function(a,d){return f(c(a.id),
d).length},incrementCounter:function(b){var e=c(b.id);switch(b.frequency){case "everytime":e.push(g(new D(a.context.lastPageView.time)));break;case "once_a_visit":var f;f=new D(a.context.lastVisit.time);f=g(f)+a.utils.pad(f.getHours(),"0",2)+a.utils.pad(f.getMinutes(),"0",2);a.utils.inArray(e,f)||e.push(f);break;case "once_a_day":f=g(new D(a.context.lastPageView.time));a.utils.inArray(e,f)||e.push(f);break;default:throw new y('Invalid segment "frequency" property of '+b.frequency);}d(b.id,e)},removeExpiredTimes:function(a){d(a.id,
f(c(a.id),a.timelimit))},removeUnusedCounters:function(b){a.utils.each(a.context.counts,function(c,d){b[d]||delete a.context.counts[d]});a.context.save()}}}();a.segmentGroups=function(){function f(c,d){return c?a.utils.map(c.segments,function(b){return a.utils.extend({segment:b},d[b])}):a.utils.map(d,}function g(c){var d=null,b=null,e=null;a.utils.each(c,function(a){a.state&&(d=a.segment,a.inSegment&&(b=a.segment),a.event&&(e=a.segment));d=e||b||
d});a.utils.each(c,function(b){var c=b.segment;d===b.segment?a.segmentchange.setSegment(c):a.segmentchange.removeSegment(c)})}return{changeState:function(c,d){var b=f(c,d);switch(c&&c.mode||"normal"){case "normal":a.utils.each(b,function(b){var c=b.segment;b.state?a.segmentchange.setSegment(c):a.segmentchange.removeSegment(c)});break;case "radio":g(b)}}}}();a.segments=function(){function f(){a.utils.each(l,function(b,c){a.segmentGroups.changeState(r["sggp_"+c],b)});l={}}function g(){a.utils.setTimeout(function(){a.events.isTriggered(a.EVENT_SEGMENTS_READY)||
a.events.trigger(a.EVENT_SEGMENTS_READY)})}function c(b){var c={};a.utils.each(b,function(b){a.utils.each(b.triggers,function(a){var d=a.on_event;(c[d]=c[d]||[]).push({segment:b,trigger:a})})});a.utils.each(c,function(b,c){a.events.on(c,function(){k||(k=!0,a.utils.setTimeout();v=a.events.getEventDataObject(c,arguments);d(b);v={}})})}function d(b){var c={};a.utils.each(b,function(b){var d=b.segment;b=b.trigger;u.setErrorOptions({type:a.ERROR_TYPE_SEGMENT_EXCEPTION,level:a.LOG_LEVEL_ERROR,
module:a.MODULE_SEGMENT,segmentId:d.name});var f=u.evaluate(b.rules);f&&(e(b.counterIds,c),n(d,!0));!f&&a.console.isEnabled()&&u.printTrace("easy.segments - "+d.name)})}function b(b){var c={};a.utils.each((r["sggp_"+b]||{}).segments,function(b){c[b]={event:!1,inSegment:a.segmentchange.inSegment(b),state:!1}});return c}function e(b,c){a.utils.each(b,}function n(c,d){var e=c.segmentGroupId||0,f=l[e]=l[e]||b(e),g=f[c.name]=f[c.name]||
{};g.event=d;g.inSegment=a.segmentchange.inSegment(c.name);g.state=t[c.name]=u.evaluate(c.rules);(e=r["sggp_"+e]||{},"radio"===e.mode)&&a.utils.each(e.segments,;!g.state&&a.console.isEnabled()&&u.printTrace("easy.segments - "+c.name)}var m,u,r,l={},k=!1,t={},v={},h={"get-event-data":function(a){return v[a]},"get-trigger-count":"has-conversion-product-ids":function(b){var c=a.utils.map(v.products,function(a){return a.id});
return a.utils.some(c,function(c){return a.utils.some(b,})}};return{init:function(b,d,e){u||(m=e,r=d,u=new a.baseEvaluator,a.utils.each(h,,a.utils.each(e,,a.segmentCounters.removeUnusedCounters(e),a.utils.each(e,a.segmentCounters.removeExpiredTimes),a.utils.each(b,,f(),c(b));g()},clear:handleQueuedEvents:f,isFinished:
_testClear:}();a.ERROR_SITE_PRODUCT=20012;a.addExceptionHandling=a.deprecate("easy.addExceptionHandling","easy.guard",function(f,g){var c={};a.utils.isObject(g)&&(c.type=void 0!==g.code?g.code:g.type,c.level=a.utils.isString(g.level)?g.level:void 0,c.module=a.utils.isString(g.module)?g.module:void 0,c.html=a.utils.isString(g.html)?g.html:void 0,c.trace=a.utils.isString(g.trace)?g.trace:void 0,c.context=g.context);return a.guard(f,c)});a.api.error=a.deprecate("easy.api.error",
"easy.log.error",function(f){a.log.error('Deprecated "easy.api.error". Check "debug" for the original error',a.ERROR_TYPE_DEPRECATED+".removed",{debug:B(f),module:a.internal.getCurrentModule()})});a.sendError=a.deprecate("easy.sendError","easy.log.error",function(f,g,c){var d={};f instanceof y||a.utils.isString(f)||(f=w.JSON.stringify(f));a.utils.isNumber(g)||(g=B(g||a.ERROR_TYPE_EXCEPTION));a.utils.isObject(c)&&(a.utils.isString(c.html)&&(d.html=c.html),a.utils.isString(c.trace)&&(d.trace=a.internal.truncate(c.trace,
a.MAXIMUM_TRACE_LENGTH)));a.log.error(f,g,d);a.events.trigger(a.EVENT_ERROR_SENT,a.utils.extend({text:B(f)},d),g)});(function(){a.utils.isFunction(V.initFunction)&&!V.initialized&&(a.workspaces=V.workspaces,a.runGuarded(V.initFunction,void 0,{type:a.ERROR_TYPE_SITE_INIT}),V.initialized=!0);if(V.base&&V.origin){var f=a.domElements.addScriptTag("//"+V.base+"sites/"+V.origin+".js");a.ready(function(){f&&(f.removeAttribute("src"),f.parentNode?f.parentNode.removeChild(f):a.console.error("[init]","Customer's script element node does not have a parent node"),
f=null)})}})();a.namespaceLoaded=!0}})();
