![function(e,t,r){"use strict";r.d(t,"c",(function(){return l.c})),r.d(t,"b",(function(){return M})),r.d(t,"a",(function(){return O}));var i=r(3),n=r(0);onst o=a=var d=r(7),u=r(6),c=r(10),l=r(5);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
const h=let p=!0;void 0===window.ShadyCSS?p=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),p=!1);const f=m=["html","svg"],g=new Set,_=window.JSCompiler_renameProperty=const v={toAttributefromAttribute,b=y={attribute:!0,type:String,converter:v,reflect:!1,hasChanged:b};class w extends HTMLElement{let r=!0;if(void 0!==e){const i=this.constructor,n=i.getPropertyOptions(e);i._valueHasChanged(this[e],t,n.hasChanged)?(this._changedProperties.has(e)||this._changedProperties.set(e,t),!0!==n.reflect||16&this._updateState||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(e,n))):r=!1}!this._hasRequestedUpdate&&r&&(this._updatePromise=this._enqueueUpdate())}t _hasRequestedUpdate(){return 4&this._updateState}erformUpdate(){this._instanceProperties&&this._applyInstanceProperties();let e=!1;const t=this._changedProperties;try{e=this.shouldUpdate(t),e?this.update(t):this._markUpdated()}catch(t){throw e=!1,this._markUpdated(),t}e&&(1&this._updateState||(this._updateState=1|this._updateState,this.firstUpdated(t)),this.updated(t))}etUpdateComplete(){return this._updatePromise}dated(e){}w.finalized=!0;
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
const S="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,A=Symbol();onst M=
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
(window.litElementVersions||(window.litElementVersions=[])).push("2.3.1");const P={};.finalized=!0,O.render=,function(e,t,r){"use strict";r.d(t,"b",(function(){return o.a})),r.d(t,"a",(function(){return i.b})),r.d(t,"c",(function(){return a}));var i=r(1);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */const n=new var s=r(9),o=r(8);r(3),r(2),r(7),r(6),r(10),r(0);
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");const a=,function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));const i={SIMPLIFIED_URL_AD_FETCH_ERROR:{message:"SIMPLIFIED_URL_AD_FETCH_ERROR",priority:"P2"},SIMPLIFIED_URL_AD_RENDER_ERROR:{message:"SIMPLIFIED_URL_AD_RENDER_ERROR",priority:"P2"},AD_POST_MESSAGE_ERROR:{message:"AD_POST_MESSAGE_ERROR",priority:"P1"},AD_IMPRESSION_URL_NOT_FOUND:{message:"AD_IMPRESSION_URL_NOT_FOUND",priority:"P3"},UCI_CONFIG_NOT_FOUND:{message:"UCI_CONFIG_NOT_FOUND",priority:"P0"},SLOT_INVALID:{message:"SLOT_INVALID",priority:"P0"},GPT_AD_CREATION_FAILED:{message:"GPT_AD_CREATION_FAILED",priority:"P0"},EXPERIMENTS_ERROR:{message:"EXPERIMENTS_ERROR",priority:"P2"},EXPERIMENTS_NOT_FOUND:{message:"EXPERIMENTS_NOT_FOUND",priority:"P2"},EXPERIMENTS_TIMED_OUT:{message:"EXPERIMENTS_TIMED_OUT",priority:"P2"},EXPERIMENTS_CONFIG_INVALID:{message:"EXPERIMENTS_CONFIG_INVALID",priority:"P2"},EXPERIMENTS_QUEUE_NOT_DEFINED:{message:"EXPERIMENTS_QUEUE_NOT_DEFINED",priority:"P2"},GPT_LAZY_LOAD_ERROR:{message:"GPT_LAZY_LOAD_ERROR",priority:"P0"},GPT_INVALID_ARGS_ERROR:{message:"GPT_INVALID_ARGS_ERROR",priority:"P0"},SLOT_RENDERED_REGISTRATION_FAILED:{message:"SLOT_RENDERED_REGISTRATION_FAILED",priority:"P3"},CAROUSEL_FETCH_ERROR:{message:"CAROUSEL_FETCH_ERROR",priority:"P1"},CAROUSEL_CLICK_ERROR:{message:"CAROUSEL_CLICK_ERROR",priority:"P1"},NATIVE_AD_INVALID_JSON:{message:"NATIVE_AD_INVALID_JSON",priority:"P0"},SCHEMA_VALIDATION_FAILURE:{message:"SCHEMA_VALIDATION_FAILURE",priority:"P0"},NATIVE_TILE_BACKGROUND_POSITION_ERROR:{message:"NATIVE_TILE_BACKGROUND_POSITION_ERROR",priority:"P1"},INVALID_IMPRESSION_LOG:{message:"INVALID_IMPRESSION_LOG",priority:"P2"},IMPRESSION_LOG_SUCCESSFUL:{message:"IMPRESSION_LOG_SUCCESSFUL",priority:"P3"},PRIVACY_SETTINGS_FAILURE:{message:"PRIVACY_SETTINGS_FAILURE",priority:"P2"},PRIVACY_SETTINGS_NOT_FOUND:{message:"PRIVACY_SETTINGS_NOT_FOUND",priority:"P2"},INVALID_ADX_RESPONSE:{message:"INVALID_ADX_RESPONSE",priority:"P2"},MISSING_PARTNER_CODE_FROM_CARS_BRL:{message:"MISSING_PARTNER_CODE_FROM_CARS_BRL",priority:"P3"},UNFILLED_AD:{message:"UNFILLED_AD",priority:"P3"},AD_RESPONSE_SERVED:{message:"AD_RESPONSE_SERVED",priority:"P3"},AD_REQUEST_ERROR:{message:"AD_REQUEST_ERROR",priority:"P2"}}},function(e,t,r){"use strict";var i=r(15),n=r(14);class s{constructor(e){this.moduleName=e,this.isDebugLoggingEnabled=window.location&&window.location.search&&window.location.search.includes("debug=true")}static setSessionConfigendLogPayload(e,t,r){window.meso=window.meso||{},window.meso.logging=window.meso.logging||[],s.setSessionConfig(window.meso.pageInfo);const o=Object.assign({type:e,moduleName:this.moduleName},t&&t.message?t:{message:t},s.config,{details:r},n.e);window.meso.logging.push({logs:o,platform:i.a.logging.platform,timestamp:n.a,epoch:Date.now()})}info(e,t){this.sendLogPayload("info",e,t)}rror(e,t,r){const i=t instanceof Error||"object"==typeof t?{message:t.message}:{message:""+t};this.sendLogPayload("error",e,Object.assign({exception:i},r))}trackEvent(e,t,r){this.sendLogPayload("track-event",{name:e,vars:t,events:r})}ebug(e,t){this.isDebugLoggingEnabled&&console.info(`${performance.now()} ${this.moduleName}:${e}`,t||{})}perf(e,t){if(t&&t.mark&&performance.getEntriesByName(t.mark).length>0){const{mark:e}=t;performance.measure("Performance Measure",e),t.duration=performance.getEntriesByType("measure")[0].toJSON().duration,performance.clearMeasures(),delete t.mark}this.sendLogPayload("perf",e,t)}}const o={};window.addEventListener("mesoRender",,t.a=e=>(o[e]||(o[e]=new s(e)),o[e])},function(e,t,r){"use strict";const i=t.a={promiseFetch:(e,t={})=>{const r=t&&t.timeout||5e3;return Promise.race([fetch(e,t),new Promise(])},sanitizeProtocol:i,fireBeacon:e=>{e=i(e),(new Image).src=encodeURI(e)}}},function(e,t,r){"use strict";r.d(t,"e",(function(){return s})),r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return u})),r.d(t,"d",(function(){return c}));r(20),r(13);r(22);var i=r(18),n=r.n(i);const s=(()=>{if(window&&window.navigator&&window.navigator.userAgent){const e=n.a.getParser(window.navigator.userAgent);return{userAgent:e.getUA(),userAgentName:e.getBrowserName(),userAgentVersion:e.getBrowserVersion(),userAgentDeviceType:e.getPlatformType()}}})(),o=a=(()=>{const e=new Date;return`${e.getUTCFullYear()}-${o(e.getUTCMonth()+1)}-${o(e.getUTCDate())}T${o(e.getUTCHours())}:${o(e.getUTCMinutes())}:${o(e.getUTCSeconds())}`})(),d=function(e,t){return new Promise((r,i)=>{const n=setTimeout(()=>{clearTimeout(n),i(new Error(t))},e)})},u=()=>window&&window.location&&window.location.href||"",c=(e,t,r)=>{const i=new URL(e);return i.searchParams.set(t,r),i.href}},function(e,t,r){"use strict";var i=r(17);let n;n={environmentName:"Production",environmentShort:"PROD",dfp:{network:"23171577"},proxy:"https://www.uciservice.com/ds/api/v1/proxy",deeplink:"https://www.uciservice.com/deeplink"};const s=r.n(i)()({appName:"ads-templates",dfp:{gpt:"https://www.googletagservices.com/tag/js/gpt.js",network:"11850712",surl:"https://pubads.g.doubleclick.net/gampad/adx",gptlight:"https://securepubads.g.doubleclick.net/static/glade.js"},abacus:{endpoint:"/api/bucketing/v1"},proxy:"https://ads-delivery-service.us-west-2.test.meso.expedia.com/api/v1/proxy",deeplink:"https://deep-link-service.us-west-2.test.meso.expedia.com",others:{hotelLinkDirect:{holdoutPercentage:20}},logging:{platform:"Web"}},n);t.a=s},function(e,t,r){"use strict";t.a=(e,t)=>{if("string"!=typeof e)throw new Error("registerComponent requires a name of type string");if(!t)throw new Error("registerComponent requires a valid component");window&&customElements&&void 0===customElements.get(e)&&(customElements.define(e,t),document.dispatchEvent(new CustomEvent("mesoAdTagRegistered",{detail:{name:e}})))}},function(e,t,r){"use strict";r.d(t,"c",(function(){return n})),r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return o}));var i={displayAd:["CM1","CM2","CM3","CM4","CM5","CM6","CT1","CT2","CT3","CT4","CT5","R1","R2"],nativeAd:["NMC1","NMC2","NMC3","NTS1","RL1","RL2"]};const n=(e,t)=>{if(!t||!t.slot)return;const r=t.slot.getAdUnitPath(),i=t.slot.getSizes();if(!r||!i||i.length<1)return;const n="fluid"===i[0]?i[0]:i[0].getWidth(),s="fluid"===i[1]?i[0]:i[0].getHeight();return(n===e.width&&s===e.height||e.isfluid)&&r===e.adpath},s=e=>"string"==typeof e?e.split("/").pop():e,o=e=>-1!==i.displayAd.indexOf(e.toUpperCase())?"displayAd":-1!==i.nativeAd.indexOf(e.toUpperCase())?"nativeAd":e},function(e,t,r){"use strict";const i=e=>{const t=document.cookie.match(`(^|;) ?${e}=([^;]*)(;|$)`);return t?t[2]:null},n=(e,t,r=30)=>{const i=new Date;i.setTime(i.getTime()+864e5*r),document.cookie=`${e}=${t};path=/;expires=${i.toGMTString()};`},s=o=()=>{const e=i("tpid");return null!==e&&e.match(/^.*,[0-9]+$/)?e.split(",")[1]:null},a=()=>{const e=i("iEAPID");return null!==e&&e.match(/^[0-9]+$/)?e:null};t.a={getGuid:s,getCookie:i,setCookie:n,deleteCookie:parseSiteInfo:()=>({user:s(),guid:s(),site:1,tpid:o(),eapid:a(),abov:i("abov")}),parseOverrideExperiments:()=>{try{const e={},t=i("meov");return(null===t?[]:t.split(",")).forEach(,e}catch(e){return{}}}}},function(e,t,r){"use strict";r.d(t,"a",();var i=r(4);class n extends i.a{static get contextChangedAttributes(){return null}equiresAdContextUpdate(e){const t=this.constructor.contextChangedAttributes;return!(Array.isArray(t)&&t.length>0)||t.some(t=>e.includes(t))}registerAdContext(){"function"==typeof this.adContextChanged&&(this.__adContextDestroyer=window.meso.adcontext.observe(this.constructor.name,e=>this.requiresAdContextUpdate(e),)},function(e,t,r){"use strict";t.a={isObject:isTrue:e=>!0===e||"true"===e||"1"===e||1===e||"string"==typeof e&&"true"===e.toLowerCase(),verifyModel:(e,t,r)=>{const i=t.find(t=>void 0===((e,t)=>e.split(".").reduce((e,t)=>{if(e&&e[t]){if(e[t].length&&e[t].length<1)return;return e[t]}},t))(t,e));if(i&&i.length){throw new Error(`missing component properties from GAM - creative id: ${r} - missing: ${i}`)}return!0}}},,,,function(e,t,r){"use strict";var i=()=>{const e={promise:null,resolve:null,reject:null,isResolved:!1};return e.promise=new Promise((t,r)=>{e.resolve=e.reject=r}),e},n=r(12),s=r(11);const o=Object(n.a)("experiments-handler-v2");let a={},d=[];const u=e=>{e&&e.detail&&("initialize"!==e.detail.type&&"update"!==e.detail.type||e.detail.experiments&&(a=Object.assign({},a,e.detail.experiments),d=d.filter(e=>!e.checkExperiments(a))))};window&&"function"==typeof window.addEventListener&&window.addEventListener("mesoExperiments",u),window&&"function"==typeof window.dispatchEvent&&window.dispatchEvent(new CustomEvent("mesoExperiments",{detail:{type:"register"}}));t.a=class{constructor(e=[]){this._requested=Array.isArray(e)?e:[e],this._configured=this._buildExperimentConfig(),this._resolvable=this._resolvableExperiments(),this._TIMEOUT=500,this._completePromise=i()}checkExperiments(e){const t=!(this._resolvable.length>0)||this._resolvable.every(t=>e.hasOwnProperty(t));return t&&this._completePromise.resolve(this.getBuckets()),t}_resolvableExperiments(){const{resolvable:e,missing:t}=this._requested.reduce((e,t)=>(this._configured.includes(t)?e.resolvable.push(t):e.missing.push(t),e),{resolvable:[],missing:[]});return t.length>0&&o.warn(s.a.EXPERIMENTS_NOT_FOUND,{description:"Requested experiments were not found in configuration",configured:this._configured,requested:this._requested,resolvable:e,missing:t,methodName:"_resolvableExperiments"}),e}_buildExperimentConfig(){let e=window&&window.meso&&window.meso.experiments&&window.meso.experiments.configuredExperimentNames||[];Array.isArray(e)||(o.warn(s.a.EXPERIMENTS_CONFIG_INVALID,{description:"Configured experiments was not an array as expected",configuredExperiments:e,methodName:"_buildExperimentConfig"}),e=[]);let t=window&&window.meso&&window.meso.experiments&&window.meso.experiments.configuredOverrideNames||[];return Array.isArray(t)||(o.warn(s.a.EXPERIMENTS_CONFIG_INVALID,{description:"Configured overrides was not an array as expected",configuredOverrides:t,methodName:"_buildExperimentConfig"}),t=[]),[...e,...t]}getBuckets(){return this._requested.reduce((e,t)=>(this._resolvable.includes(t)?e[t]=a.hasOwnProperty(t)?a[t]:null:e[t]=null,e),{})}xposureLog(e){if(Array.isArray(e)||"string"==typeof e){const t={type:"exposure",experiments:e=(e=Array.isArray(e)?e:[e]).map(};window.meso=window.meso||{},window.meso.experiments=window.meso.experiments||[],window.meso.experiments.push(t)}}wait(){if(window&&window.meso&&void 0===window.meso.experiments)return o.warn(s.a.EXPERIMENTS_QUEUE_NOT_DEFINED,{description:"window.meso.experiments is not defined.",requested:this._requested,methodName:"wait"}),Promise.resolve(this.getBuckets());const e=Promise.race([this._completePromise.promise,new Promise(e=>{setTimeout(()=>{const t=this._resolvable.filter(,r=this._resolvable.filter(;r.length>0&&o.warn(s.a.EXPERIMENTS_TIMED_OUT,{description:`Experiments timed out in ${this._TIMEOUT} before evaluating all requested experiments`,requested:this._requsted,resolvable:this._resolvable,configured:this._configured,resolved:t,timedout:r,methodName:"wait"}),e(this.getBuckets())},this._TIMEOUT)})]);var t;return(t=this).checkExperiments(a)||d.push(t),e},,,,,,,function(e,t,r){"use strict";var i=r(26);const n=[1,2],s=[1,3];t.a=e=>new Promise(t=>{new i.a(["MeSo_HSR_Holdout_Feature_Gate","MeSo_HSR_Display_Ad_Hold_Out_AB_Test"]).wait().then(r=>{if(r.MeSo_HSR_Holdout_Feature_Gate){const i=r.MeSo_HSR_Display_Ad_Hold_Out_AB_Test;t(e?n.includes(i):s.includes(i))}t(!1)})})},,,,,,function(e,t,r){"use strict";var i=r(12),n=r(11);const s=Object(i.a)("meso-ads-render-register");window.meso||(window.meso=window.meso||{}),window.meso.onAdsRendered||(window.meso.onAdsRendered=[]);t.a=class{static registerOnAfterRender(e,t){e&&Array.isArray(window.meso.onAdsRendered)?window.meso.onAdsRendered.push({callback:e,comparator:t}):s.error(n.a.SLOT_RENDERED_REGISTRATION_FAILED,new Error("Invalid arguments"))}static getAllRegisteredCallBack(){return window.meso.onAdsRendered?window.meso.onAdsRendered:[]}static deRegisterOnAfterRender(e){if(e)for(let t=0;t<window.meso.onAdsRendered.length;t++)window.meso.onAdsRendered[t].callback===e&&window.meso.onAdsRendered.splice(t,1)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){"use strict";r.r(t);var i=r(4),n=r(16),s=r(15),o=r(12),a=r(33);const d=Object(o.a)("meso-native");if(window){const e=e=>{const t=document.querySelectorAll("meso-native");d.debug("native.bootstrap.mesoRender",e),t.forEach(t=>{e.adUnitPath&&t.setAttribute("adunitpath",e.adUnitPath);const r=t.getAttribute("uci"),i=r&&e[r]&&e[r].attributes?Object.keys(e[r].attributes):{};i.length>0&&i.forEach(})},t=["native-flight-filter","ad-native-flex","native-sponsored-listing","meso-fluid-resize","post-message-debug","post-message-error","meso-perf-mark"],r=function(e){e&&"object"==typeof e.data&&e.data.hasOwnProperty("type")&&t.includes(e.data.type)&&(d.debug("native.bootstrap.handlePostMessage() "+e.data.type,e),document.dispatchEvent(new CustomEvent(e.data.type,{detail:e.data})))};window.addEventListener("message",r),window.addEventListener("mesoRender",t=>{Object(a.a)(!0).then(r=>{if(t&&t.detail&&!r){const r=t.detail.content||t.detail,i=["MESO-NATIVE-MARQUEE-TILE","MESO-NATIVE-TILE-SHOWCASE","MESO-NATIVE-FLUID","MESO-NATIVE-CARD","MESO-BRAND-RESULT-LISTING","MESO-BRAND-RESULT-LISTING-VANILLA"];Object.keys(r).forEach(t=>{i.includes(t)&&e(r[t])})}})})}var u=r(39),c=r(21),l=r(19);const h=Object(o.a)("meso-native");class p extends c.a{static get properties(){return{enabled:{type:Boolean},adunitpath:{type:String},mediaquery:{type:String},height:{type:Number},waitforadinfo:{type:Boolean},width:{type:Number},uci:{type:String},adslot:{type:String},nativetype:{type:String},showskeleton:{type:Boolean},nativecomponent:{type:String},isfluid:{type:Boolean},timeout:{type:Number}}}onstructor(){super(),this._lastAdinfoUpdate=0,this._lastTargetingUpdate=0,this.enabled=!0,this.waitforadinfo=!0,this.targetingEvent=this.targetingEvent.bind(this),this.mediaQueryCallback=this.mediaQueryCallback.bind(this),this.mesoOnNativeActionClicked=this.mesoOnNativeActionClicked.bind(this),this.mesoOnAdsDataFetched=this.mesoOnAdsDataFetched.bind(this),this._handleMesoAdEvents=this._handleMesoAdEvents.bind(this)}get adPath(){return`/${s.a.dfp.network}${this.adunitpath}/${this.adslot}`}isTargetingEmpty(e){return Object.keys(e).length<=1}targetingEvent(e){this.isTargetingEmpty(e&&e.detail&&e.detail.targeting||{})||e&&e.detail&&"update"===e.detail.type&&((this.isfluid&&!this.waitforadinfo||void 0===this.waitforadinfo)&&document.removeEventListener("MesoTargeting",this.targetingEvent),e.detail.targetingLastUpdated>this._lastTargetingUpdate&&(this._lastTargetingUpdate=e.detail.targetingLastUpdated,this.refreshAd()),e.detail.adinfoLastUpdated>this._lastAdinfoUpdate&&this.waitforadinfo&&(this._lastAdinfoUpdate=e.detail.adinfoLastUpdated,this.waitforadinfo=!1))}ttributeChangedCallback(e,t,r){super.attributeChangedCallback(e,t,r),"mediaquery"===e&&t!==r&&(this.mql&&this.mql.removeListener(this.mediaQueryCallback),this.mql=window.matchMedia(this.mediaquery),this.mql.addListener(this.mediaQueryCallback),this.mediaQueryCallback(this.mql))}connectedCallback(){super.connectedCallback(),h.debug(this.adpath+" connectedCallback()"),this.showskeleton&&(this._hideTemplate=this._hideTemplate.bind(this),u.a.registerOnAfterRender(this._hideTemplate,e=>e.slot&&e.slot.getAdUnitPath()===this.adPath&&!e.slot.getHtml())),document.addEventListener("MesoTargeting",this.targetingEvent),document.dispatchEvent(new CustomEvent("MesoTargeting",{detail:{type:"register"}})),this.adpath||window.meso.initialize.push({type:"render"}),window.performance.mark("AdComponentRender:"+this.uci)}refreshAd(){const e=this.renderRoot.querySelector("#"+this._id());e&&e.dispatchEvent(new CustomEvent("DisplayAdRefresh"))}_id(){return"mesogpt-"+(this.uci||this.slot)}disconnectedCallback(){this.showskeleton&&u.a.deRegisterOnAfterRender(this._hideTemplate),this.targetingEvent&&document.removeEventListener("MesoTargeting",this.targetingEvent),this.mql&&this.mql.removeListener(this.mediaQueryCallback),this._gptAd&&this._gptAd.removeEventListener("mesoAd",this._handleMesoAdEvents),this._gptFluidAd&&this._gptFluidAd.removeEventListener("mesoAd",this._handleMesoAdEvents),super.disconnectedCallback()}updatedgptFluidTemplate(){return i.c`
      <meso-gpt-fluid
        ?enabled=${this.active}
        id="${"mesogptfluid-"+(this.uci||"")}"
        uci="${this.uci}"
        adunitpath="${this.adPath}"
        timeout="${this.timeout?this.timeout:0}"
        data-eg-sc="true"
      ></meso-gpt-fluid>
    `}_fixWidthGptTemplate(){return this.nativecomponent=this._getNativeComponent(),i.c`
      ${this.nativecomponent}
          <slot></slot>
          <meso-gpt-ad
            ?enabled=${this.active}
            id="${this._id()}"
            uci="${this.uci}"
            class="native-template"
            adpath="${this.adPath}"
            width=${this.width}
            height=${this.height}
            ?outofpage=${"fsl"===this.nativetype}
            timeout="${this.timeout?this.timeout:0}"
          ></meso-gpt-ad>
          <style type="text/css">
      :host {
        display: block;
        position: relative;
      }
      .hidden{
        display: none;
      }
      .native-template {
        display: block;
        position: absolute;
        top: 0;
        z-index: -1;
      }
      </style>`}render(){return this.enabled?this.isfluid?this._gptFluidTemplate():this._fixWidthGptTemplate():i.c``}_hideTemplate(){this.dispatchEvent(new CustomEvent("mesoOnAdsDataFetched",{detail:null})),this.setAttribute("hidden",!0)}get active(){return h.debug(`${this.uci} active=${this.enabled&&!this.waitforadinfo}`),this.enabled&&!this.waitforadinfo&&this.adunitpath}shouldUpdate(){return Boolean(void 0!==this.adslot&&void 0!==this.adunitpath&&void 0!==this.adPath&&(this.isfluid||void 0!==this.nativetype))}esoOnAdsDataFetched(e){this.removeAttribute("hidden"),this.dispatchEvent(new CustomEvent("mesoOnAdsDataFetched",{detail:e.detail}))}firstUpdated(){this.shadowRoot&&this.shadowRoot.firstElementChild&&(this.shadowRoot.firstElementChild.addEventListener("mesoOnNativeActionClicked",this.mesoOnNativeActionClicked,!1),this.shadowRoot.firstElementChild.addEventListener("mesoOnAdsDataFetched",this.mesoOnAdsDataFetched,!1)),this._gptAd=this.shadowRoot.querySelector("meso-gpt-ad"),this._gptAd&&this._gptAd.addEventListener("mesoAd",this._handleMesoAdEvents),this._gptFluidAd=this.shadowRoot.querySelector("meso-gpt-fluid"),this._gptFluidAd&&this._gptFluidAd.addEventListener("mesoAd",this._handleMesoAdEvents)}dispatchMesoAdEvent(e){if(!this._hasDispatchedMesoAd&&(h.debug(this.uci+" _dispatchMesoAdEvent",e),this.dispatchEvent(new CustomEvent("mesoAd",{detail:e})),h.info('dispatching "mesoAd" event',{detail:e,uci:this.uci}),this._hasDispatchedMesoAd=!0,"AD-LOAD-PASS"===e.code)){const t=Object(l.b)(this.adslot);h.perf("Ad Component Rendered",{mark:"AdComponentRender:"+this.uci,uci:this.uci,creativeid:e.creativeid,adProductType:t})}}update(e){try{super.update(e)}catch(e){this._dispatchMesoAdEvent({code:"AD-LOAD-EMPTY",error:e,uci:this.uci,src:"native/index.update()"})}}}!function(){h.debug((this&&this.uci||"")+" tag has been registered"),Object(n.a)("meso-native",p)}()}]);
//# sourceMappingURL=meso-native.js.map