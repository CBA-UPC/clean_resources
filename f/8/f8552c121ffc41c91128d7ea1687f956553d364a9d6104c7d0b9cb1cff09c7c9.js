(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4174],{75325:38265:function(e,t,r){"use strict";r.d(t,{Z:function(){return ConnectForm}});var n=r(52322),o=r(47330),a=r(73235),i=r(66547),l=r(91210),c=r(26806);et u=(0,i.ZP)(_templateObject(),l.$);var s=r(86414),d=r(53954),f=r(56958);let h=Object.values(o.tw).map(;function ConnectForm(e){let{webhookEvents:t,webhookAuthType:r,webhookAuthValue:o,integrationSettings:a,children:i,url:l}=e,{workspace:m}=(0,d.cF)(),[,b]=c.Db(u),{name:p,Logo:g,webhookFormat:y}=a;return(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f.A.promise(b({workspaceId:m.id,data:{name:p,auth:{type:r,value:o},events:null!=t?t:h,format:y,url:l}}).then(e=>{if(e.error)throw Error(e.error.message);s.Z.track("".concat(p.toLowerCase(),"_integration_connected"))}),{loading:"Connecting to ".concat(p,"..."),success:"Connected to ".concat(p),error:"Error connecting to ".concat(p)})},children:[i,(0,n.jsxs)("button",{className:"btn-white mt-5 w-full justify-center bg-white font-medium shadow",type:"submit",children:[(0,n.jsx)(g,{className:"mr-2 h-4 w-4"}),"Connect to ",p]})]})}},95290:function(e,t,r){"use strict";r.d(t,{U7:function(){return getBearer},_E:function(){return formatBasicCredentials},eS:function(){return getBasicCredentials}});var n=r(47330),o=r(49431);let parseBasicAuth=e=>{let t=o.DS.decode(e),[r,n]=t.split(":");return{username:r,password:n}},stringifyBasicAuth=e=>{let{username:t,password:r}=e;return o.DS.encode("".concat(t,":").concat(r))},getBearer=e=>{var t,r;return(null==e?void 0:null===(t=e.auth)||void 0===t?void 0:t.type)===n.H4.Bearer?null==e?void 0:null===(r=e.auth)||void 0===r?void 0:r.value:void 0},getBasicCredentials=e=>{var t,r;let empty=if((null==e?void 0:null===(t=e.auth)||void 0===t?void 0:t.type)!==n.H4.Basic)return empty();let o=null==e?void 0:null===(r=e.auth)||void 0===r?void 0:r.value;return o?parseBasicAuth(o):empty()},formatBasicCredentials=e=>stringifyBasicAuth(e)},87355:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(52322),o=r(99219),a=r(2784),i=r(38265),l=r(47330),c=r(95290),u=r(77512),s=r(18318);let d={[l.H4.None]:"None",[l.H4.Basic]:"Basic",[l.H4.Bearer]:"Bearer"};var f=r(64766),h=r(97185);let m={name:"Webhook",screenshot:"https://www.navattic.com/img/integrations/zapier.png",enableEventSettings:!0,webhookFormat:l.M8.None,Logo:o.C6x,ConnectComponent:e=>{let{webhook:t,integrationSettings:r}=e,[o,f]=(0,a.useState)(""),[h,m]=(0,a.useState)(""),[b,p]=(0,a.useState)(void 0),[g,y]=(0,a.useState)(""),[v,A]=(0,a.useState)(""),[x,_]=(0,a.useState)(l.H4.None);(0,a.useEffect)(()=>{if(t){var e,r,n,o,a;let{username:i,password:u}=(0,c.eS)(t);f(null!=i?i:""),m(null!=u?u:""),A(null!==(r=(0,c.U7)(t))&&void 0!==r?r:""),_(null!==(n=null==t?void 0:null===(e=t.auth)||void 0===e?void 0:e.type)&&void 0!==n?n:l.H4.None),y(null!==(o=null==t?void 0:t.url)&&void 0!==o?o:""),p(null!==(a=null==t?void 0:t.events)&&void 0!==a?a:void 0)}},[t]),g&&(x!==l.H4.Basic||o&&h)&&l.H4.Bearer;let w=(0,a.useMemo)(()=>{let e;switch(x){case l.H4.Basic:e=(0,c._E)({username:o,password:h});break;case l.H4.Bearer:e=v;case l.H4.None:}return e},[x,o,h,v]);return(0,n.jsxs)(i.Z,{webhookEvents:b,webhookAuthType:x,webhookAuthValue:w,integrationSettings:r,url:g,children:[(0,n.jsx)("h4",{className:"mb-1 text-base font-semibold",children:"Configure your webhook endpoint"}),(0,n.jsxs)("div",{className:"mt-5 max-w-sm",children:[(0,n.jsx)(u.oi,{className:"mb-2 w-full",labelText:"URL endpoint",value:g,required:!0,name:"url",placeholder:"https://hooks.example.com/endpoint",onChange:y}),(0,n.jsx)("label",{className:"label-small",children:"Authentication"}),(0,n.jsx)(s.Z,{items:Object.entries(d).map(e=>{let[t,r]=e;return{id:t,name:r,value:t}}),selected:x,onChange:className:"mb-3"}),x===l.H4.Basic&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.oi,{className:"mb-2 w-full",value:o,labelText:"Username",required:!0,name:"username",placeholder:"Enter username",onChange:e=>f&&f(e)}),(0,n.jsx)(u.oi,{type:"password",className:"mb-2 w-full",labelText:"Password",value:h,required:!0,name:"password",placeholder:"Enter password",onChange:e=>m&&m(e)})]}),x===l.H4.Bearer&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(u.oi,{className:"mb-2 w-full",value:v,labelText:"Token",required:!0,name:"url",placeholder:"Enter token",onChange:)})]})]})}};ebhookIntegrationPage.getLayout=var b=WebhookIntegrationPage},49431:,function(e){e.O(0,[8934,3211,8426,3265,1617,4637,5837,8834,9623,9790,4054,7330,9219,5306,6870,7156,6456,7185,4766,9774,2888,179],,_N_E=e.O()}]);
//# sourceMappingURL=webhook-242a190d86b267db.js.map