(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[7720],{

/***/ 120270:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(319855);__web_req__(170390);self._fe4d99ebe0d2d259646a80d250150d47 = self._fe4d99ebe0d2d259646a80d250150d47 || {};(function(__c) {var Sd=__c.Sd;var dm=__c.dm;var eK;var yJ;var Wd=__c.Wd;var ha=__c.ha;var g=__c.g;var d=__c.d;
var vG=function(a,b,...c){if(!a)throw Error(null==b?"invalid state":__c.fa(b,...c));},wG=function(a){if(null==a||"symbol"===typeof a)return String(a);try{return JSON.stringify(a)}catch(b){return String(a)}},xG=function(a,b){if(a!==b)throw Error(__c.fa("{} != {}",wG(a),wG(b)));},yG=function(a,b){d(Object.getPrototypeOf(a)===Object.prototype);const c={};for(const e in a)c[e]=b(a[e],e);return c},zG=function(a){return a.filter(()=>!0)},AG=function(a){xG(a.normalize(a.defaultValue),a.defaultValue)},BG=
function(a,b){return null!=b?a.decode(b):void 0},CG=DG=function(a){return a.includes("/")?a.split("/")[0]:void 0},EG=function(a,b){if("function"===typeof b)return b;switch(b){case "all":return()=>!0;case "block":return a.ot;case "inline":return a.rt;case "dynamic":return a.An;default:throw new g(b);}},FG=function(a,b,c,e){c=EG(a,c);for(const [f,h]of Object.entries(b))a.qh(f)&&c(f)&&e(h,f)},GG=function(a,b){for(const [c,e]of Object.entries(b))d(a.qh(c)),
null!=e&&a.attributes[c].validate(e)},HG=function(a,b){const c={};for(const [e,f]of Object.entries(b))try{d(a.qh(e)),c[e]=null!=f?a.attributes[e].normalize(f):void 0}catch(h){throw h;}return c},JG=function(a){var b=IG;const c=new Map;for(const [e,f]of Object.entries(a))b.qh(e)&&c.set(e,f);return c},KG=function(a){var b=IG;const c={},e={};for(const [f,h]of a)b.qh(f)&&(e[f]=h,c[f]=BG(b.attributes[f],h));return{Sa:c,kb:e}},MG=function(a,b){var c=LG;const e={},f={};if(a)for(const [h,k]of Object.entries(a))if(null!=
k)if(c.Al.has(h))e[h]=BG(c.attributes[h],a[h]),f[h]=a[h];else if(c.dk.has(h))for(const p of a[h]){const q=`${h}/${p}`;e[q]=BG(c.attributes[q],p);f[q]=p}if(b)for(const [h,k]of Object.entries(b))if(null!=k)if(c.Al.has(h))e[h]=void 0,f[h]=void 0;else if(c.dk.has(h))for(const p of b[h])a=`${h}/${p}`,e[a]=void 0,f[a]=void 0;return{Sa:e,kb:f}},OG=function(a,b){return new NG(a,b)},QG=function(a,b,c){return new PG(a,b,c)},SG=function(a,b){return new RG(a,b)},UG=function(a,b){const c=new Proxy(a,{get:(e,f)=>
{if("string"===typeof f){var h;return e[f]||(h=DG(f))&&b[h]}},has:(e,f)=>{if("string"!==typeof f)return!1;let h;return f in e||!!((h=DG(f))&&h in b)},ownKeys:e=>Object.keys(e)});return new TG(c,new Set(Object.keys(a)),new Set(Object.keys(b)))},VG=function(a){const b={};for(const c in a)b[c]=a[c].domain;return b},WG=function(a,b){d(a.pe(b),"invalid value: {}",b);return b},XG=function(a,b,c){if(!a.zc(b,c))throw Error(`Invalid argument: ${a.stringify(b)} != ${a.stringify(c)}`);},ZG=function(a,b,c){return new YG(a,
b,c)},$G=function(a,b){return ZG(c=>c.every(e=>a.pe(e))&&(!b||b(c)),(c,e)=>c.length===e.length&&c.every((f,h)=>h in e&&a.zc(f,e[h]))&&c.reduce(f=>f+1,0)===e.reduce(0),c=>c.length?"[ "+c.map(e=>a.stringify(e)).join(", ")+" ]":"[]")},bH=function(a,b){const c=([e,f])=>aH.every(&&a.pe(e)&&b.pe(f);return ZG((e,f)=>{if(e.size!==f.size)return!1;for(const [h,k]of e)if(e=f.get(h),null==e||!b.zc(k,e))return!1;return!0},e=>e.size?`{ ${[...e].map(([f,h])=>`${a.stringify(f)} => ${b.stringify(h)}`).join(", ")} }`:
"{}")},cH=function(a,b){const c=Object.keys(a);return ZG(e=>c.every(&&(!b||b(e)),(e,f)=>c.every(,e=>c.length?"{ "+c.map(f=>`${f}: ${a[f].stringify(e[f])}`).join(", ")+" }":"{}")},dH=function(a,b){return ZG(c=>a[b(c)].pe(c),(c,e)=>{const f=b(c),h=b(e);return f===h&&a[f].zc(c,e)},c=>a[b(c)].stringify(c))},Q=function(...a){if(1===arguments.length){const c=a[0];return ZG(}const b=new Set(a);return ZG(c=>b.has(c))},eH=function(a){return ZG(},fH=function(a,b){d(Number.isInteger(a)&&Number.isInteger(b)&&a<=b);return ZG(c=>Number.isInteger(c)&&a<=c&&c<=b)},gH=function(a,b){d(Number.isFinite(a)&&Number.isFinite(b)&&a<=b);return ZG(c=>Number.isFinite(c)&&a<=c&&c<=b)},hH=function(a,b,c){d(a.ba(b,c),"{} != {}",b,c)},iH=function(a,b){vG(null!=a.Oh,"mutable is not connected");try{a.zd(b)}catch(c){throw a.error(c),c;}},jH=kH=function(a,b){iH(a,b);a.domain.isIdentity(b)||a.qc.next(b)},
mH=function(a,b){b=a.Da(b);const c=new lH;a=a.connect(b,c);return{mutable:b,eg:c,qc:a}},nH=function(a,b,c,e,f){a.destroy(f,b);c.unsubscribe();e.complete()},qH=S=function(a){return new rH(a)},tH=function(a){return new sH(a)},T=vH=function(a,b,c){return null==c||a.component.isIdentity(c)?uH:new Map([[b,c]])},wH=function(a,b){return a.size?b.size?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()},yH=function(a,b,
c){const {mutable:e,eg:f,qc:h}=mH(a.type,c);return{Am:{to:f,from:jH(a,h.pipe(xH())},value:e}},AH=function(a){return new zH(a)},BH=DH=function(a){return 1===a?CH:{type:0,length:a}},FH=function(a){return 1===a?EH:{type:1,length:a}},HH=function(a){return 1===a?GH:{type:2,length:a}},IH=function(a,b){return{type:3,state:a,shift:b}},JH=MH=function(a){switch(a.type){case 0:return`R(${a.length})`;case 1:return`X(${a.length})`;
case 2:return`T(${a.length})`;case 3:return`I(${KH(a.state)})${LH(a.shift)}`;case 4:return`U(${KH(a.fa)})${LH(a.shift)}`;default:throw new g(a);}},KH=LH=function(a){return null!=a?`[${a.ua},${a.La}]`:""},OH=function(a,b){return b&&a.vg?new NH(a.F.map(c=>3===c.type&&c.shift?IH(c.state,BH(c.shift.ua+b,c.shift.La+b)):4===c.type&&c.shift?JH(c.fa,BH(c.shift.ua+b,c.shift.La+b)):c),a.D,a.post,a.vg):a},PH=function(a,b,c=1){d(0<=c,"{} < 0",c);c&&(a.Pd(b),a.acc+=c);return a},
QH=function(a,b,c=1){const e=ha(a.pa);if(e.type!==b)throw Error();const f=e.length;d(0<c&&c<=f,"{} \u2209 (0, {}]",c,f);if(c<f)switch(b){case 0:return a.pa=DH(f-c),DH(c);case 1:return a.pa=FH(f-c),FH(c);case 2:return a.pa=HH(f-c),HH(c);default:throw new g(b);}else return a.pa=a.F[a.i++],e},UH=function(a,b){const c=ha(a.pa);if(0===c.type)return QH(a,0,1),RH;if(1===c.type)return QH(a,1,1),SH;if(2===c.type)return QH(a,2,1),TH;if(c.type!==b)throw Error();a.pa=a.F[a.i++];return c},VH=function(a){return a.every(()=>
!1)},WH=function(a,b){d(0<b.length);const c=a.length;b.forEach((e,f)=>a.list[c+f]=e);a.length+=b.length},XH=function(a,b){b=a.Ye+b;d(b<=a.input.length);const c=a.input.slice(a.Ye,b);a.Ye=b;return c},YH=function(a,b){a.th||(a.th=new Set);d(!a.th.has(b),"duplicate modification: {}",b);a.th.add(b)},ZH=function(a,b,c){YH(a,b);(a.ll||(a.ll=new Map)).set(b,c)},$H=function(a,b){let {ua:c,La:e}=b;var f=a.ll;a=a.kl;if(f){const h=f.get(c);null!=h&&(c=h,f.delete(c))}a&&(f=a.get(e),null!=f&&(e=f,a.delete(e)));
return c!==b.ua||e!==b.La?BH(c,e):b},aI=function(a,b,c){(a.qf||(a.qf=new Map)).set(b,c)},bI=function(a,b,c){(a.nf||(a.nf=new Map)).set(c,b)},cI=function({ua:a,La:b}){return BH(b,a)},dI=function(a,b){return ha(a.Ii.get(b),"ref not found")},eI=function(a,b){a=a.Ra;for(let c=0;c<a.length;c++){const e=a[c];if(e&&(!b||b(e.value)))return e.value}},fI=function(a,b){const c=a.Ra;for(a=dI(a,b)-1;0<=a;a--)if(b=c[a])return b.value},hI=function(a){return new gI(a)},iI=function(a,b){return a?b?(...c)=>{a(...c);
b(...c)}:a:b},jI=function(a,b){a=a.length;d(0<=b&&b<a,"{} \u2209 [0, {})",b,a)},kI=function(a,b){a=a.length;d(0<b&&b<a,"{} \u2209 (0, {})",b,a)},lI=function(a){d(!0);for(const b of a.Ya)switch(b.type){case 0:return b.state.startsWith("\n");case 2:break;case 1:return!1;default:throw new g(b);}return!1},mI=function(a,b){return a?b?{O:iI(a.O,b.O),item:iI(a.item,b.item),ca:iI(a.ca,b.ca)}:a:b},nI=function(a,b){a=a.sd;d(0<b&&b<a,"{} \u2209 (0, {})",0,a)},oI=function(a,b,c){switch(b.type){case 0:case 1:switch(c.type){case 0:case 1:return a.change(b.state,
c.state);case 2:return a.Hd(b.state);default:throw new g(c);}case 2:switch(c.type){case 0:case 1:return a.Kg(c.state);case 2:return a.Od(b.state);default:throw new g(c);}default:throw new g(b);}},pI=function(a){const b=ha(a.pa);a.pa=a.F[a.i++];return b},qI=function(a,b){const c=ha(a.pa),e=c.sd;d(0<b&&b<=e);if(b<e){const [f,h]=c.jj(b);a.pa=h;return f}a.pa=a.F[a.i++];return c},tI=function(a,b,c){switch(c.type){case 0:return b;case 1:return d(1===b.type),new rI(a.component.apply(b.state,c.fa));case 3:return sI(a,
b,c.oldState),c.newState;default:throw new g(c);}},sI=function(a,b,c){d(uI(a,b,c),"{} != {}",b,c)},uI=function(a,b,c){switch(b.type){case 0:return 0===c.type&&b.state===c.state;case 1:return 1===c.type&&a.component.ba(b.state,c.state);case 2:return 2===c.type&&b.state===c.state;default:throw new g(b);}},xI=function(a,b){const c=vI.ha(),e=a.cursor(0,Object.assign({},wI,{ca:k=>c.l(k)})),f=Object.assign({},wI,{O:k=>c.l(k.length)}),h=Object.assign({},wI,{O:k=>c.Hd(k)});b.forEach({l:k=>e.qe(k,f),delete:k=>
e.qe(k,h),insert:k=>c.insert(k)});return c.build()},zI=function(a,b){const c=new yI,e=a.cursor();a=p=>{throw Error(String(p));};const f=Object.assign({},wI,{O:p=>c.l(p.length)}),h=Object.assign({},wI,{O:a}),k=Object.assign({},wI,{O:()=>0,ca:a});b.forEach({l:p=>e.Fc(p,f),update:p=>{throw new g(p);},insert:p=>2!==p.type&&c.insert(p.state),change:(p,q)=>{2===p.type?(e.Fc(p.length,h),2!==q.type&&c.insert(q.state)):(e.Fc(p.length,k),2===q.type?c.delete(p.length):(d(p.state===q.state,"non-reflexive change: {} != {}",
p,q),c.l(p.length)))}});return c.build()},AI=function(...a){const b=new Set;for(const c of a)for(const e in c)d(!b.has(e),'duplicate key: "{}"',e),b.add(e)},CI=function(a){return yG(a,},DI=function(a){return yG(a,b=>b.domain)},U=function(...a){return new EI(Object.assign({},...a.map(b=>b.values)),Object.assign({},...a.map(b=>b.K)),Object.assign({},...a.map(b=>b.attributes)))},FI=function(a,b,c){for(const [e,f]of Object.entries(a))c(e,f,b[e])},GI=function(a,b){return a.length?b.length?
[...(new Set([...a,...b]))]:a:b},HI=function(a,b){const c=Object.keys(a),e=Object.keys(b),f=GI(c,e);return f.length===c.length&&f.length===e.length&&f.every(},JI=LI=MI=function(a,b){return a&&b?a.ed===b.ed&&a.dd===b.dd:!a&&!b},NI=function(a,b){Object.entries(a).forEach(([c,e])=>null!=e&&b(e,c))},OI=function(a,b){const c=Object.keys(a),e=Object.keys(b);if(a===b||!c.length&&!e.length)return!0;if(c.length!==
e.length)return!1;const f=GI(c,e);return c.length===f.length&&e.length===f.length&&f.every(},PI=function(a,b,c,e){const f={},h={};for(const k of GI(Object.keys(c),Object.keys(e))){c=a[k];e=b[k];c&&e?(xG(c.ao,e.ao),xG(c.ed,e.ed),c=[void 0,{ao:e.Bf,ed:e.dd,Bf:c.Bf,dd:c.dd}]):c=[e,c];const [p,q]=c;h[k]={r:p};f[k]={r:q}}return[h,f]},QI=function(a,b={}){return{type:0,length:a,changes:b}},RI=function(a,b,c,e,f){const h={};if(a.Rh.size){for(const k of a.Rh)h[k]={r:void 0},delete a.Mg[k],
delete a.Ng[k];a.Rh.clear()}Object.keys(a.Sh).length&&(FI(a.Sh,a.rj,(k,p,q)=>{h[k]={r:{ao:e[k],ed:f[k],Bf:p,dd:q}};a.Mg[k]=p;a.Ng[k]=q}),a.Sh={},a.rj={});b&&c&&FI(b,c,(k,p,q)=>{k in a.Mg&&(h[k]={r:{ao:p,ed:q,Bf:a.Mg[k],dd:a.Ng[k]}})});return h},TI=function(a){const b=a.pa;if(!b||b.type===KI)return SI;a.pa=a.input[a.i++];a.apply(b);return b},UI=function(a,b,c){return c&&{ao:c.o,Bf:c.n,ed:null!=c.o?a.Vf.encode(b,c.o):void 0,dd:null!=c.n?a.Vf.encode(b,c.n):void 0}},VI=function(a,b){const c={};for(const [e,
f]of Object.entries(b))f&&(c[e]={r:UI(a,e,f.r)});return c},WI=function(a,b,c){const e=a.qg;if(e){a.qg=void 0;var f=new Set;NI(e,({r:h},k)=>{h?("apply"===a.mode?(xG(c[k],h.ed),a.Kc.Lb(k,h.Bf,h.dd)):(xG(c[k],h.dd),a.Kc.Lb(k,h.ao,h.ed)),a.open.add(k),f.add(k)):(a.Kc.Lb(k,b[k],c[k]),a.open.delete(k))});return f}},XI=function(a,b){return a?!!b&&a.from===b.from&&a.to===b.to:!b},YI=function(a,b){let c=0,e=0;for(const f of a.Yg)switch(a=f.length,f.type){case 0:b.l&&b.l(a,c,e);c+=a;e+=a;break;case 1:b.insert&&
b.insert(a,c,e);e+=a;break;default:throw new g(f.type);}},$I=function(a,b,c){let {from:e,to:f}=a;e+=e>b?c:0;f+=f>b?c:0;return a.from!==e||a.to!==f?new ZI(e,f):a},bJ=function(a,b,c,e){for(const [f,h]of a){const k=h.zh,p=h.wh,q=k&&(null!=b?$I(k,b,e):k),u=p&&(null!=c?$I(p,c,e):p);q===k&&u===p||a.set(f,new aJ(q,u))}},cJ=function(a,b){return a?b?new Set([...a.keys(),...b.keys()]):a.keys():b.keys()},dJ=function(a){return"string"===typeof a?a.length:1},fJ=function(a,b,c){var e;void 0===b&&(b=a.cells.id());
void 0===c&&(c=a.attrs.id());if(void 0===f)var f=null===(e=a.G)||void 0===e?void 0:e.id();d(!a.G===!f);return new eJ(b,c,f)},hJ=function(a,b){const c=a.cells.cursor(a.length),e=new gJ;a=q=>{throw Error(String(q));};const f=Object.assign({},wI,{O:a}),h=Object.assign({},wI,{O:()=>0,ca:a}),k=Object.assign({},wI,{O:q=>e.l(q.length),ca:),p=Object.assign({},wI,{O:q=>e.delete(q.length),ca:a});b.forEach({l:(q,u)=>{e.change(u);c.Fc(q,k)},insert:(q,u)=>{e.change(u);2!==q.type&&e.insert(q.state)},change:(q,
u,x)=>{e.change(x);2===q.type?(c.Fc(q.length,f),2!==u.type&&e.insert(u.state)):2===u.type?c.Fc(q.length,p):(d(q.state===u.state,"non-reflexive change: {} != {}",q,u),c.Fc(q.length,h),e.l(q.length))}});return e.build()},iJ=function(a,b){if(!b)return{index:0,length:a.charLength};const c=b.index,e=b.index+b.length;a=a.charLength;d(c<=e,"invalid range: {}, {}",c,e);d(0<=c&&e<=a,"range out of bounds: [{}, {}) \u2288 [{}, {})",c,e,0,a);return b},jJ=function(a,b){kH(a,fJ(a.domain,void 0,b))},kJ=function(a,
b){d(!a.cells.Xd||a.cells.O().endsWith("\n"),"character stream must be empty or terminated with a \\n");a.forEach(Object.assign({},wI,{O:(c,e)=>GG(b,e),ca:))},lJ=nJ=oJ=function(a,b){return a===b||a.size===b.size&&Array.from(a.keys()).every(},pJ=function(a,b){const c=new Map;for(const [e,f]of a)b(f)&&c.set(e,f);return c},rJ=function(a){var b=qJ.path;a=b(a);return!!a&&!a.s},sJ=function(a){return b=>
{const c=a.exec(b);if(c)return{s:b.substring(c[0].length),value:c[0]}}},tJ=function(a){return b=>{const c=[];for(;;){const e=a(b);if(!e)return{s:b,value:c};c.push(e.value);b=e.s}}},uJ=function(a,...b){return c=>{const e=[];for(const f of b){const h=f(c);if(!h)return;c=h.s;e.push(h.value)}return{s:c,value:a(...e)}}},vJ=function(a){return"A"<=a&&"Z">=a?"absolute":"relative"},wJ=function(a,b,c){if(a.de!==b||a.ee!==c){a.sheet.columns.has(a.de)&&a.sheet.rows.has(a.ee)||(a.de=ha(a.sheet.columns.first()),
a.ee=ha(a.sheet.rows.first()));var e=a.de,f=a.ee;for(var h=a.sheet.columns.next(a.de);null!=h;h=a.sheet.columns.next(h))if(h===b&&a.ee===c){a.de=h;return}for(h=a.sheet.rows.next(a.ee);null!=h;h=a.sheet.rows.next(h))for(var k=a.sheet.columns.first();null!=k;k=a.sheet.columns.next(k))if(k===b&&h===c){a.de=k;a.ee=h;return}for(h=a.sheet.rows.first();null!=h;h=a.sheet.rows.next(h))for(k=a.sheet.columns.first();null!=k;k=a.sheet.columns.next(k)){if(k===b&&h===c){a.de=k;a.ee=h;return}d(k!==e||h!==f)}throw Error();
}},xJ=function(a){const b=new Map;return new __c.cm({O:a.cells.map(a.length,Object.assign({},wI,{O:c=>new __c.Wl({O:c}),ca:c=>new __c.Xl({ca:c})})),attributes:a.attrs.map(a.length,{grad:(c,e)=>new __c.$l({attributes:Wd(JG(e),(f,h)=>{const k=b.get(h);b.set(h,f);return new __c.Zl({Ct:k,r:f})})}),yb:c=>new __c.am({length:c})})})},zJ=function(a){const b=yJ.domain.attrs.Ma();for(const c of a)switch(c.type){case "CHANGE":a=Wd(c.attributes,h=>h.r);const {Sa:e,kb:f}=KG(a);b.attrs(e,f);break;case "RETAIN":b.yb(c.length);
break;default:throw new g(c);}return b.build()},AJ=function(a){var b=yJ.domain,c=b.be;var e=a.O;const f=vI.Ma();for(const h of e)switch(h.type){case "CHARACTERS":f.ea(h.O);break;case "TOMBSTONES":f.Qd(h.ca);break;default:throw new g(h);}e=f.build();return c.call(b,e,zJ(a.attributes))},BJ=function(a){let b=0,c=0;const e=zG(a),f=[];a.forEach((h,k)=>{if(h=k-c)b&&(f.push(b),b=0),f.push(-h);b++;c=k+1});return[e,f]},CJ=function(a,b){const c=[];let e=0;for(const f of b)0>f?e+=-f:0<f&&(a.slice(0,f).forEach(h=>
c[e++]=h),a=a.slice(f));a.length&&a.forEach(f=>c[e++]=f);return c},JJ=function(a,b){const [c,e]=BJ(b.mc),f=b.language,h=b.title,k=b.description,p=b.B,q=b.Of,u=b.fd,x=b.ad,B=b.audio,F=b.Dc,N=b.Gc,[O,X]=BJ(b.Db);return new __c.Uf({doctype:DJ(b.doctype),na:new __c.Kk(b.na),mc:c.map(R=>new __c.Mk(R)),lh:e,language:f,title:h,description:k,B:p,Of:q&&EJ(q),ad:x,fd:FJ(u),audio:GJ(B),Dc:F&&HJ(F),Gc:N&&HJ(N),Db:O.map(R=>IJ(a,R)),Bh:X})},KJ=function(a,b){const c=b.language,e=b.title,f=b.fd,h=b.ad,[k,p]=BJ(b.Wd);
return new __c.Uf({doctype:DJ(b.doctype),na:new __c.Kk(b.na),language:c,title:e,ad:h,fd:FJ(f),Wd:k.map(q=>a.serializeBody(q)),km:p})},DJ=function(a){switch(a.type){case "INLINE":return new __c.Ik(a);case "REFERENCE":return new __c.Gk(a);default:throw new g(a);}},EJ=function(a){return new __c.Qk({ie:Wd(a.ie,b=>{a:switch(b){case "TEXT":b=new __c.Ok;break a;case "IMAGE":b=new __c.Nk;break a;default:throw new g(b);}return b})})},FJ=function(a){return Wd(a,b=>new __c.Rk(b))},GJ=function(a){if(a.Ie.length){var [b,
c]=BJ(a.Ie);return new __c.Yk({Ie:b.map(e=>new __c.Xk(Object.assign({},e,{trim:e.trim&&new __c.Sk(e.trim),jh:e.jh&&new __c.Wk(e.jh),kh:e.kh&&new __c.Wk(e.kh)}))),Vo:c})}},HJ=function(a){switch(a.type){case "CHOP":return new __c.ll(a);case "COLOR_WIPE":return new __c.nl(a);case "CROSS_DISSOLVE":return new __c.$k(a);case "FLOW":return new __c.pl(a);case "MATCH":return new __c.gl(a);case "SLIDE":return new __c.bl(a);case "STACK":return new __c.il(a);case "WIPE_CIRCLE":return new __c.dl(a);case "WIPE_LINE":return new __c.fl(a);
default:throw new g(a);}},IJ=function(a,b){const c=b.type,e=b.title,f=b.ng,h=b.$b,k=b.locked,p=b.xc,q=b.ob,u=b.animation,x=b.rb,B=b.Z,F=b.audio,N=b.P,O=b.anchor,X=b.hc,R=b.na,ba=b.ka,ia=b.transition,la=b.sheet,[oa,na]=BJ(b.Cf),[Ja,Oa]=BJ(b.elements);return new __c.sp({type:c,title:e,ng:f,$b:h,locked:k,xc:p&&new __c.Pn(p),ob:q,animation:u,rb:x&&new __c.Wn(x),Cf:oa.map(xa=>new __c.Zn(xa)),am:na,Z:B,audio:GJ(F),transition:ia&&HJ(ia),P:N,anchor:O,hc:X,Hf:Wd(b.Hf,xa=>new __c.$n(xa)),na:R,ka:ba&&new __c.ao(ba),
background:LJ(b.background),sheet:la&&MJ(a,la),elements:Ja.map(xa=>NJ(a,xa)),Wm:Oa})},QJ=function(a,b){const c=[];b.forEach({O:(e,f,h,k)=>{e=new __c.Cl({state:e});c.push(OJ(e,k))},item:(e,f,h,k)=>{e=new __c.Fp({state:PJ(a,e)});c.push(OJ(e,k))},ca:(e,f,h,k)=>{e=new __c.Gp({state:e});c.push(OJ(e,k))}});b=b.G&&Wd(b.G.wa,e=>{const f=e.from;e=e.to;return new __c.Lp({from:f,to:e===f?void 0:e})});return new __c.fm({Se:c,G:b})},OJ=function(a,b){var c=LG;const e={},f={};var h={};const k={};for(const [u,x]of Object.entries(b))if(c.Al.has(u))null!=
x?e[u]=x:h[u]=!0;else if(c.An(u)){const [B,F]=u.split("/");null!=x?(f[B]||(f[B]=[]),f[B].push(x)):(k[B]||(k[B]=[]),k[B].push(F))}b=0!==Object.keys(e).length||0!==Object.keys(f).length?Object.assign({},e,f):void 0;h=0!==Object.keys(h).length||0!==Object.keys(k).length?Object.assign({},h,k):void 0;const {set:p,Dv:q}={set:b,Dv:h};return new __c.Kp({Rb:a,ij:p&&new __c.Ip(p),Xo:q&&new __c.Jp(q)})},PJ=function(a,b){switch(b.type){case "rect":return new __c.Vl({display:b.display,width:b.width,maxWidth:b.maxWidth,
left:b.left,da:b.da,P:b.P,altText:b.altText&&RJ(b.altText),fill:LJ(b.fill),X:b.X,W:b.W,stroke:b.stroke&&SJ(b.stroke),L:b.L});case "table":return new __c.um({display:b.display,width:b.width,maxWidth:b.maxWidth,left:b.left,da:b.da,P:b.P,altText:b.altText&&RJ(b.altText),cells:Wd(b.cells,u=>TJ(a,u)),layout:UJ(a,b.layout),minWidth:b.minWidth});case "sheet":const [c,e]=BJ(b.rows),[f,h]=BJ(b.columns);return new __c.Qm({display:b.display,width:b.width,maxWidth:b.maxWidth,left:b.left,da:b.da,P:b.P,altText:b.altText&&
RJ(b.altText),cells:Wd(b.Sd,u=>{const x=u.content;u=u.format;return new __c.Lm({content:x&&VJ(a,x),format:u&&WJ(u)})}),ka:b.Dd,attributes:Wd(b.Cd,u=>XJ(u)),rows:c.map(a.vl),Zc:e,columns:f.map(a.ul),Mc:h,direction:b.direction,Gb:b.Gb});case "separator":const k=YJ.domain.ba(b.stroke,ZJ.stroke);return new __c.Rm({display:b.display,width:b.width,maxWidth:b.maxWidth,left:b.left,da:b.da,P:b.P,altText:b.altText&&RJ(b.altText),stroke:k?void 0:SJ(b.stroke)});case "embed":return new __c.Sm({display:b.display,
width:b.width,maxWidth:b.maxWidth,left:b.left,da:b.da,P:b.P,altText:b.altText&&RJ(b.altText),url:b.url,X:b.X,W:b.W});case "pill":return new __c.Zm({display:b.display,width:b.width,left:b.left,P:b.P,Dh:$J(b.Dh)});case "chart":return aK(b);case "design":const [p,q]=BJ(b.Db);return new __c.tp({display:b.display,width:b.width,maxWidth:b.maxWidth,left:b.left,da:b.da,P:b.P,altText:b.altText&&RJ(b.altText),doctype:b.doctype,na:b.na,Db:p.map(u=>IJ(a,u)),Bh:q});case "layout":return bK(a,b);default:throw new g(b);
}},RJ=function(a){return new __c.El(a)},LJ=function(a){var b=a.image,c=a.video;const e=a.dg;var f=a.Sf,h=a.ma,k=a.locked,p=a.ob,q=a.ic,u=a.la,x=a.flipX,B=a.flipY;a=a.color;var F;if(F=b){F=b.Sb;const N=b.Ub,O=b.filter,X=b.altText;F=new __c.Ll({media:b.media,kg:b.kg,Qf:b.Qf,ma:b.ma,Sb:F&&new __c.Il(F),filter:O&&cK(O),Ub:N,altText:X&&RJ(X)})}b=F;if(F=c)F=new __c.Nl({video:c.video,Lg:c.Lg,Sb:new __c.Il(c.Sb),ma:c.ma,Ub:c.Ub,filter:c.filter&&cK(c.filter),trim:c.trim&&new __c.Ml(c.trim),tg:c.tg,autoplay:c.autoplay,
playbackRate:c.playbackRate,volume:c.volume,altText:c.altText&&RJ(c.altText)});c=F;if(F=e)a:switch(e.type){case "LINEAR":F=new __c.Pl(e);break a;case "RADIAL":F=new __c.Rl(e);break a;default:throw new g(e);}return new __c.Tl({Sf:f,ma:h,locked:k,ob:p,ic:q,la:u,flipX:x,flipY:B,color:a,image:b,video:c,dg:F})},SJ=function(a){const b=a.weight,c=a.color,e=a.zb,f=a.kc;a=a.fill;const h=dK.domain.ba(a,eK);return new __c.Ul({weight:b,color:c,fill:h?void 0:LJ(a),zb:e,kc:f})},TJ=function(a,b){var c=b.hb,e=b.borderColor,
f=b.Ne;const h=b.Ac;var k=b.fill;a:switch(b=b.content,b.type){case "text2":a=new __c.em({text:xJ(b.text),ia:new dm(b.ia),la:b.la});break a;case "text3":a=new __c.gm({text:QJ(a,b.text)});break a;default:throw new g(b);}c=new __c.im(c);e=new __c.km({fb:e.fb&&new __c.jm(e.fb),xb:e.xb&&new __c.jm(e.xb),mb:e.mb&&new __c.jm(e.mb),Bb:e.Bb&&new __c.jm(e.Bb)});f=f.fb||f.xb||f.mb||f.Bb?new __c.mm({fb:f.fb&&new __c.lm(f.fb),xb:f.xb&&new __c.lm(f.xb),mb:f.mb&&new __c.lm(f.mb),Bb:f.Bb&&new __c.lm(f.Bb)}):void 0;
return new __c.om({fill:k,content:a,hb:c,borderColor:e,Ne:f,Ac:h})},UJ=function(a,b){const c=b.direction,e=b.Ff,f=b.cellPadding,h=b.borderStyle,[k,p]=BJ(b.rows),[q,u]=BJ(b.columns);return new __c.tm({direction:c,rows:k.map(a.Xu),Zc:p,columns:q.map(a.Wu),Mc:u,Ff:e,cellPadding:f,borderStyle:new __c.sm(h)})},XJ=function(a){return new __c.Mm({backgroundColor:a.backgroundColor,padding:a.padding,hb:a.hb,borderColor:a.borderColor})},$J=function(a){switch(a.type){case "EMBED":return new __c.Tm(a);case "DATE":return new __c.Wm(a);
case "MENTION":return new __c.Xm(a);default:throw new g(a);}},aK=function(a){const b=a.display,c=a.width,e=a.maxWidth,f=a.left,h=a.da,k=a.P,p=a.altText,q=a.config,u=a.Zb,x=a.Sc,B=a.Tc,F=a.cd,N=a.bd,O=a.gd,X=a.vc,[R,ba]=BJ(a.data);return new __c.On({display:b,width:c,maxWidth:e,left:f,da:h,P:k,altText:p&&RJ(p),config:fK(q),Zb:u&&gK(u),data:R.map(ia=>hK(ia)),eh:ba,Sc:x,Tc:B,cd:F,bd:N,gd:O,vc:iK(X)})},bK=function(a,b){return new __c.Dp({display:b.display,width:b.width,maxWidth:b.maxWidth,left:b.left,
da:b.da,P:b.P,altText:b.altText,layout:jK(a,b.layout),paddingTop:b.paddingTop,paddingBottom:b.paddingBottom,jg:b.jg,fill:LJ(b.fill),border:kK(b.border)})},fK=function(a){switch(a.type){case "GROUPED_COLUMN":return new __c.$m(a);case "STACKED_COLUMN":return new __c.an(a);case "GROUPED_ROW":return new __c.bn(a);case "STACKED_ROW":return new __c.cn(a);case "PIE":return new __c.dn(a);case "DONUT":return new __c.en(a);case "LINE":return new __c.gn(a);case "STACKED_AREA":return new __c.hn(a);case "SCATTERPLOT":return new __c.jn(a);
case "BUBBLEPLOT":return new __c.zn(a);case "PACKED_CIRCLES":return new __c.kn(a);case "TREEMAP":return new __c.ln(a);case "BAR_RACE":return new __c.mn(a);case "HISTOGRAM":return new __c.nn(a);case "RADAR":return new __c.on(a);case "POPULATION_PYRAMID":return new __c.pn(a);case "FUNNEL":return new __c.qn(a);case "DUMBBELL":return new __c.rn(a);case "LOLLIPOP":return new __c.sn(a);case "SUNBURST":return new __c.tn(a);case "TIME_SERIES":return new __c.un(a);case "PROGRESS":return new __c.xn(a);case "PICTOGRAM":return new __c.yn(a);
default:throw new g(a);}},gK=function(a){const b=a.type;switch(b){case "GOOGLE_SHEETS":return new __c.Fn(a);case "SHEETS":throw new lK;default:throw new g(b);}},hK=function(a){const [b,c]=BJ(a.values);var e=a.id;a:{var f=a.Lf;switch(f.type){case "PALETTE":var h=new __c.Hn(f);break a;case "INTERPOLATE":h=f.from;var k=f.to;b:switch(f=f.colorSpace,f){case 1:f=1;break b;case 2:f=2;break b;default:throw new g(f);}h=new __c.Jn({from:h,to:k,colorSpace:f});break a;default:throw new g(f);}}return new __c.Mn({id:e,
values:b,cp:c,Lf:h,label:a.label,je:a.je&&new __c.Ln(a.je)})},iK=function(a){if(!Object.values(a).every()return new __c.Nn({fontFamily:CG(mK.fontFamily,a.fontFamily),fontSize:CG(mK.fontSize,a.fontSize),fontWeight:CG(mK.fontWeight,a.fontWeight),fontStyle:CG(mK.fontStyle,a.fontStyle),color:CG(mK.color,a.color),Oc:CG(mK.Oc,a.Oc)})},jK=function(a,b){return new __c.Cp({cells:Wd(b.cells,c=>{a:{const e=c.type;switch(e){case "TEXT":c=new __c.wp({fill:LJ(c.fill),border:kK(c.border),text:QJ(a,c.text)});
break a;default:throw new g(e);}}return c}),config:nK(b.config),direction:b.direction})},kK=function(a){return new __c.up({hb:a.hb,borderColor:a.borderColor})},nK=function(a){const [b,c]=BJ(a.Vg);return new __c.Ap({Vg:b.map(e=>oK(e)),om:c})},oK=function(a){return new __c.zp({gridTemplateColumns:a.gridTemplateColumns,gridTemplateRows:a.gridTemplateRows,Zg:Wd(a.Zg,b=>new __c.yp({gridColumnStart:b.gridColumnStart,gridColumnEnd:b.gridColumnEnd,gridRowStart:b.gridRowStart,gridRowEnd:b.gridRowEnd,alignSelf:b.alignSelf,
padding:b.padding})),columnGap:a.columnGap,rowGap:a.rowGap,maxWidth:a.maxWidth})},MJ=function(a,b){const c=b.Sd,e=b.Dd,f=b.Cd,h=b.direction,k=b.Gb,[p,q]=BJ(b.rows),[u,x]=BJ(b.columns);return new __c.jo({cells:Wd(c,B=>{const F=B.content;B=B.format;return new __c.io({content:F&&pK(F),format:B&&WJ(B)})}),ka:e,attributes:Wd(f,B=>XJ(B)),rows:p.map(a.vl),Zc:q,columns:u.map(a.ul),Mc:x,direction:h,Gb:k})},NJ=function(a,b){switch(b.type){case "group":return qK(a,b);case "switch":throw new rK;case "chart":return sK(a,
b);case "grid":return tK(b);case "table":return uK(a,b);case "sheet":return vK(a,b);case "line":return wK(b);case "rect":return xK(b);case "shape":return yK(b);case "text":return zK(b);case "embed":return AK(b);case "layout":throw new BK;default:throw new g(b);}},cK=function(a){return new __c.Kl(Object.assign({},a,{we:a.we&&new __c.Jl(a.we)}))},qK=function(a,b){a=b.X;const c=b.W,e=b.Ud,[f,h]=BJ(b.Rb);return new __c.yo(Object.assign({},CK(b),{X:a,W:c,Ud:e&&new __c.wo(e),Rb:f.map(k=>DK(k)),bh:h}))},
sK=function(a,b){a=b.vc;const c=b.X,e=b.W,f=b.rg,h=b.Sc,k=b.Tc,p=b.cd,q=b.bd,u=b.gd,[x,B]=BJ(b.Rb),[F,N]=BJ(b.data),[O,X]=BJ(b.labels);return new __c.Ao(Object.assign({},CK(b),{labels:O,Hn:X,vc:a,X:c,W:e,rg:new __c.zo(f),Sc:h,Tc:k,cd:p,bd:q,gd:u,data:F.map(R=>hK(R)),eh:N,config:fK(b.config),Zb:b.Zb&&gK(b.Zb),Rb:x.map(R=>DK(R)),bh:B}))},tK=function(a){const b=a.cells,c=a.layout;return new __c.Eo(Object.assign({},CK(a),{cells:Wd(b,e=>{const f=e.stroke,h=e.L;return new __c.Bo({fill:LJ(e.fill),stroke:f&&
SJ(f),L:h})}),layout:EK(c)}))},uK=function(a,b){const c=b.cells,e=b.layout,f=b.W,h=b.X;return new __c.Fo(Object.assign({},CK(b),{W:f,X:h,cells:Wd(c,k=>TJ(a,k)),layout:UJ(a,e)}))},vK=function(a,b){const c=b.Sd,e=b.Dd,f=b.Cd,h=b.direction,k=b.Gb,[p,q]=BJ(b.rows),[u,x]=BJ(b.columns);return new __c.No(Object.assign({},CK(b),{cells:Wd(c,B=>{const F=B.content;B=B.format;return new __c.Mo({content:F&&FK(F),format:B&&WJ(B)})}),ka:e,attributes:Wd(f,B=>XJ(B)),rows:p.map(a.vl),Zc:q,columns:u.map(a.ul),Mc:x,
direction:h,Gb:k}))},wK=function(a){const b=a.weight,c=a.start,e=a.end,f=a.ag,h=a.color,k=a.fill,p=a.zb,q=a.kc,[u,x]=BJ(a.wc),B=dK.domain.ba(k,eK);return new __c.$o(Object.assign({},CK(a),{weight:b,start:GK(c),end:GK(e),ag:f&&HK(f),color:h,fill:B?void 0:LJ(k),zb:p,kc:q,wc:u.map(F=>{const N=F.la,O=F.width,X=F.height,R=F.position,ba=F.orientation,ia=F.Pb;return new __c.Zo({text:xJ(F.text),la:N,width:O,height:X,position:R,orientation:ba,Pb:ia})}),Ph:x}))},xK=function(a){const b=a.fill,c=a.stroke,e=a.L;
return new __c.ap(Object.assign({},CK(a),{fill:LJ(b),stroke:c&&SJ(c),L:e}))},yK=function(a){const b=a.viewBox,c=a.slice,e=a.Uf,f=a.resizeMode,[h,k]=BJ(a.Ch),[p,q]=BJ(a.wc);return new __c.jp(Object.assign({},CK(a),{viewBox:new __c.bp(b),slice:c&&new __c.ep(c),Ch:h.map(u=>{const x=u.L;return new __c.cp({d:u.d,fill:LJ(u.fill),stroke:u.stroke&&SJ(u.stroke),L:x})}),ho:k,Uf:e&&new __c.fp(e),wc:p.map(u=>{const x=u.ia,B=u.la;return new __c.gp({Ac:u.Ac,box:u.box,Tg:u.Tg,text:xJ(u.text),ia:new dm(x),la:B})}),
Ph:q,Qo:f}))},zK=function(a){const b=a.text,c=a.ia,e=a.la,f=a.Bc,h=a.placeholder,k=a.Pb,p=a.writingMode,q=a.X,u=a.W,x=a.Gf,B=a.ug;return new __c.qp(Object.assign({},CK(a),{Pb:k,writingMode:p,X:q,W:u,Gf:x,ug:B,placeholder:h&&new __c.mp(h),text:xJ(b),ia:new dm(c),Bc:f&&IK(f),la:e}))},AK=function(a){const b=a.url,c=a.X,e=a.W;return new __c.rp(Object.assign({},CK(a),{url:b,X:c,W:e}))},DK=function(a){switch(a.type){case "line":return wK(a);case "rect":return xK(a);case "shape":return yK(a);case "text":return zK(a);
case "embed":return AK(a);default:throw new g(a);}},CK=function(a){var b=a.xc,c=a.altText;const e=a.Af,f=a.P,h=a.Cg,k=a.animation,p=a.wg;var q=a.anchor,u=a.hc,x=a.top,B=a.left,F=a.width,N=a.height,O=a.rotation,X=a.ma,R=a.Wb,ba=a.Z,ia=a.link,la=a.locked,oa=a.ob;a=a.ic;c=c&&RJ(c);b=b&&new __c.Pn(b);var na;if(na=k)a:switch(k.type){case "NONE":na=new __c.ko;break a;case "SEQUENCED":na=k.rb;na=new __c.lo({animation:k.animation,rb:na&&new __c.Wn(na)});break a;case "INDEPENDENT":na=k.rb;na=new __c.mo({animation:k.animation,
rb:na&&new __c.Wn(na)});break a;default:throw new g(k);}return{anchor:q,hc:u,top:x,left:B,width:F,height:N,rotation:O,ma:X,Wb:R,Z:ba,link:ia,locked:la,ob:oa,ic:a,altText:c,Af:e,P:f,Cg:h,xc:b,animation:na,wg:p&&new __c.uo(p)}},EK=function(a){const b=a.ka,c=a.Ag;return new __c.Do({If:a.If,Bg:a.Bg,Jf:a.Jf.map(e=>e||""),Ag:c.map(,ka:b.map(})},pK=function(a){switch(a.type){case "PLAINTEXT":return new __c.bo({value:a.value});case "FORMULA":return new __c.eo({value:a.value&&
new __c.xm(a.value)});case "BOOLEAN":return new __c.fo({value:a.value});case "NUMBER":return new __c.go({value:a.value});case "TEXT2":return new __c.co({value:xJ(a.value),ia:new dm(a.ia)});default:throw new g(a);}},WJ=function(a){switch(a.type){case "NUMBER_PILL":return new __c.Cm(a);case "NUMBER_TEXT":return new __c.Dm(a);case "NUMBER_RANGE":return new __c.Em(a);case "BOOLEAN_CHECKBOX":return new __c.Fm;case "PLAINTEXT_SELECT":const [b,c]=BJ(a.options);return new __c.Hm({options:b,bu:c});case "PLAINTEXT_COLOR":return new __c.Im;
case "PLAINTEXT_MENTION":return new __c.Jm(a);default:throw new g(a);}},FK=function(a){switch(a.type){case "PLAINTEXT":return new __c.Go({value:a.value});case "FORMULA":return new __c.eo({value:a.value&&new __c.xm(a.value)});case "BOOLEAN":return new __c.fo({value:a.value});case "NUMBER":return new __c.go({value:a.value});case "TEXT2":return new __c.Ho({value:xJ(a.value),ia:new dm(a.ia)});default:throw new g(a);}},VJ=function(a,b){switch(b.type){case "PLAINTEXT":return new __c.vm({value:b.value});
case "FORMULA":return new __c.eo({value:b.value&&new __c.xm(b.value)});case "BOOLEAN":return new __c.fo({value:b.value});case "NUMBER":return new __c.go({value:b.value});case "TEXT3":return new __c.wm({value:QJ(a,b.value)});default:throw new g(b);}},GK=function(a){const b=a.marker;return new __c.Ro({anchor:a.anchor&&new __c.Qo(a.anchor),marker:b,position:a.position&&new __c.Ql(a.position)})},HK=function(a){switch(a.type){case "ELBOWED":const [b,c]=BJ(a.mc);return new __c.Uo({mc:b.map(,
lh:c,L:a.L});case "CURVED":return new __c.Vo({depth:a.depth,Nh:a.Nh});default:throw new g(a);}},IK=function(a){const [b,c]=BJ(a.Bc);return new __c.lp({Bc:b.map(e=>new __c.kp({type:e.type,parameters:e.parameters})),Vm:c})},OK=function(a,b){const c=b.language,e=b.title,f=b.description,h=b.B,k=b.Of,p=b.fd,q=b.ad,u=b.audio,x=b.Dc,B=b.Gc,F=b.Db,N=b.Bh;return{ve:"fixed",doctype:b.doctype,na:b.na,mc:CJ(b.mc,b.lh).map(O=>O),language:c,title:e,description:f,B:h,Of:k&&JK(k),ad:q,fd:KK(p),audio:LK(u),Dc:x&&
MK(x),Gc:B&&MK(B),Db:CJ(F,N).map(O=>NK(a,O))}},QK=function(a,b){const c=b.Wd,e=b.km;return{ve:"responsive",doctype:b.doctype,na:b.na,language:b.language,title:b.title,ad:b.ad,fd:KK(b.fd),Wd:CJ(c,e).map(f=>{const h=f.ka;return{text:PK(a,f.text),ka:h&&h}})}},JK=function(a){return{ie:Wd(a.ie,b=>{a:switch(b.type){case "IMAGE":b="IMAGE";break a;case "TEXT":b="TEXT";break a;default:throw new g(b);}return b})}},KK=function(a){return Wd(a,b=>b)},LK=function(a){return a?{Ie:CJ(a.Ie,a.Vo).map(b=>b)}:RK},MK=
function(a){const b=a.Z;if(!a.type)return{type:"WIPE_LINE",direction:2,Z:b};switch(a.type){case "CHOP":return{type:"CHOP",Z:b,origin:a.origin,direction:a.direction};case "COLOR_WIPE":return{type:"COLOR_WIPE",Z:b,ld:a.ld,direction:a.direction};case "CROSS_DISSOLVE":return{type:"CROSS_DISSOLVE",Z:b};case "FLOW":return{type:"FLOW",Z:b,direction:a.direction};case "MATCH":return{type:"MATCH",Z:b};case "SLIDE":return{type:"SLIDE",Z:b,direction:a.direction};case "STACK":return{type:"STACK",Z:b,direction:a.direction};
case "WIPE_LINE":return{type:"WIPE_LINE",Z:b,direction:a.direction};case "WIPE_CIRCLE":return{type:"WIPE_CIRCLE",Z:b,direction:a.direction};case "RESERVED_36":case "RESERVED_37":case "RESERVED_38":case "RESERVED_39":case "RESERVED_40":case "RESERVED_41":case "RESERVED_42":case "RESERVED_43":case "RESERVED_44":case "RESERVED_45":case "RESERVED_46":throw Error(`unsupported transition type: ${a.type}`);default:throw new g(a);}},NK=function(a,b){const c=b.xc,e=b.rb,f=b.Z,h=b.audio,k=b.P,p=b.anchor,q=
b.hc,u=b.na,x=b.ka,B=b.transition,F=b.sheet;return{type:b.type,title:b.title,ng:b.ng,$b:b.$b,locked:b.locked,xc:c&&c,ob:b.ob,animation:b.animation,rb:e&&SK(e),Z:f,audio:LK(h),transition:B&&MK(B),P:k,anchor:p,hc:q,Hf:Wd(b.Hf,N=>N),na:u,ka:x&&x,background:TK(b.background),Cf:CJ(b.Cf,b.am).map(N=>N),sheet:F&&UK(a,F),elements:CJ(b.elements,b.Wm).map(N=>VK(a,N))}},PK=function(a,b){const c=WK.domain.Ma();for(const e of b.Se){const {Sa:f,kb:h}=MG(e.ij,e.Xo);c.attrs(f,h);const k=e.Rb;switch(k.type){case "CHARACTER":c.ea(k.state);
break;case "ITEM":c.item(XK(a,k.state));break;case "TOMBSTONE":c.Qd(k.state);break;default:throw new g(k);}}c.hj(Wd(b.G,e=>{const f=e.from;e=e.to;return{from:f,to:null!==e&&void 0!==e?e:f}}));return c.build()},XK=function(a,b){switch(b.type){case "RECT":return{type:"rect",display:b.display,width:b.width,maxWidth:b.maxWidth,left:b.left,da:b.da,P:b.P,altText:b.altText&&b.altText,fill:TK(b.fill),X:b.X,W:b.W,stroke:b.stroke&&YK(b.stroke),L:b.L};case "TABLE":return{type:"table",display:b.display,width:b.width,
maxWidth:b.maxWidth,left:b.left,da:b.da,P:b.P,altText:b.altText&&b.altText,cells:Wd(b.cells,c=>ZK(a,c)),layout:$K(a,b.layout),minWidth:b.minWidth};case "SHEET":return{type:"sheet",display:b.display,width:b.width,maxWidth:b.maxWidth,left:b.left,da:b.da,P:b.P,altText:b.altText&&b.altText,Sd:Wd(b.cells,c=>{const e=c.content;c=c.format;return{content:e&&aL(a,e),format:c&&bL(c)}}),Dd:b.ka,Cd:Wd(b.attributes,c=>cL(c)),rows:CJ(b.rows,b.Zc).map(a.Xj),columns:CJ(b.columns,b.Mc).map(a.Wj),direction:b.direction,
Gb:b.Gb,title:b.title};case "SEPARATOR":return{type:"separator",display:b.display,width:b.width,maxWidth:b.maxWidth,left:b.left,da:b.da,P:b.P,altText:b.altText&&b.altText,stroke:null!=b.stroke?YK(b.stroke):Object.assign({},ZJ.stroke)};case "EMBED":return{type:"embed",display:b.display,width:b.width,maxWidth:b.maxWidth,left:b.left,da:b.da,P:b.P,altText:b.altText&&b.altText,W:b.W,X:b.X,url:b.url};case "PILL":return{type:"pill",display:b.display,width:b.width,maxWidth:b.maxWidth,left:b.left,da:b.da,
P:b.P,altText:b.altText&&b.altText,Dh:b.Dh};case "CHART":return dL(b);case "DESIGN":return{type:"design",display:b.display,width:b.width,maxWidth:b.maxWidth,left:b.left,da:b.da,P:b.P,altText:b.altText&&b.altText,doctype:b.doctype,na:b.na,Db:CJ(b.Db,b.Bh).map(c=>NK(a,c))};case "LAYOUT":return{type:"layout",display:b.display,width:b.width,maxWidth:b.maxWidth,left:b.left,da:b.da,P:b.P,altText:b.altText&&b.altText,layout:eL(a,b.layout),paddingTop:b.paddingTop,paddingBottom:b.paddingBottom,fill:TK(b.fill),
border:fL(b.border),jg:b.jg};default:throw new g(b);}},TK=function(a){var b=a.dg,c=a.image;const e=a.video;var f=a.Sf,h=a.ma,k=a.locked,p=a.ob,q=a.ic,u=a.la,x=a.flipX,B=a.flipY;a=a.color;b=b&&b;var F;if(F=c)F=c.Ub,F={media:c.media,kg:c.kg,Qf:c.Qf,ma:c.ma,Sb:c.Sb&&c.Sb,filter:c.filter&&gL(c.filter),Ub:F,altText:c.altText&&c.altText};c=F;if(F=e)F={video:e.video,Lg:e.Lg,Sb:e.Sb,ma:e.ma,Ub:e.Ub,filter:e.filter&&gL(e.filter),trim:e.trim&&e.trim,tg:e.tg,autoplay:e.autoplay,playbackRate:e.playbackRate,volume:e.volume,
altText:e.altText&&e.altText};return{Sf:f,ma:h,locked:k,ob:p,ic:q,la:u,flipX:x,flipY:B,color:a,dg:b,image:c,video:F}},YK=function(a){const b=a.zb,c=a.kc;return{weight:a.weight,color:a.color,fill:a.fill?TK(a.fill):eK,zb:b,kc:c}},ZK=function(a,b){const c=b.content,e=b.hb,f=b.borderColor,h=b.Ne,k=b.Ac;b=TK(b.fill);a:switch(c.type){case "TEXT":a={type:"text2",text:AJ(c.text),ia:c.ia,la:c.la};break a;case "TEXT3":a={type:"text3",text:PK(a,c.text)};break a;default:throw new g(c);}return{fill:b,content:a,
hb:e,borderColor:{fb:f.fb&&f.fb,xb:f.xb&&f.xb,mb:f.mb&&f.mb,Bb:f.Bb&&f.Bb},Ne:h?h:Object.assign({},hL.Ne),Ac:k}},$K=function(a,b){const c=b.columns,e=b.Mc,f=b.Ff,h=b.cellPadding,k=b.borderStyle;return{direction:b.direction,rows:CJ(b.rows,b.Zc).map(a.$q),columns:CJ(c,e).map(a.Zq),Ff:f,cellPadding:h,borderStyle:k}},cL=dL=function(a){const b=a.altText,c=a.Sc,e=a.Tc,f=a.cd,h=a.bd,k=a.gd,p=a.vc;return{type:"chart",
display:a.display,width:a.width,maxWidth:a.maxWidth,left:a.left,da:a.da,P:a.P,altText:b&&b,config:iL(a.config),Zb:a.Zb&&jL(a.Zb),data:CJ(a.data,a.eh).map(q=>kL(q)),Sc:c,Tc:e,cd:f,bd:h,gd:k,vc:lL(p)}},eL=function(a,b){return{cells:Wd(b.cells,c=>{a:{const e=c.type;switch(e){case "TEXT":c={type:"TEXT",fill:TK(c.fill),border:fL(c.border),text:PK(a,c.text)};break a;default:throw new g(e);}}return c}),config:mL(b.config),direction:b.direction}},fL=
iL=function(a){switch(a.type){case "RESERVED_24":case "RESERVED_25":case "RESERVED_26":throw Error(`unsupported chart type: ${a.type}`);default:return a}},jL=function(a){const b=a.type;switch(b){case "GOOGLE_SHEETS":return a;default:throw new g(b);}},kL=function(a){var b=a.id,c=CJ(a.values,a.cp);a:{var e=a.Lf;switch(e.type){case "PALETTE":var f={type:"PALETTE",ld:e.ld};break a;case "INTERPOLATE":f=e.from;var h=e.to;b:switch(e=e.colorSpace,e){case 1:e=1;break b;case 2:e=2;break b;default:throw new g(e);
}f={type:"INTERPOLATE",from:f,to:h,colorSpace:e};break a;default:throw new g(e);}}return{id:b,values:c,Lf:f,label:a.label,je:a.je&&a.je}},lL=function(a){return a?{fontFamily:BG(mK.fontFamily,a.fontFamily),fontSize:BG(mK.fontSize,a.fontSize),fontWeight:BG(mK.fontWeight,a.fontWeight),fontStyle:BG(mK.fontStyle,a.fontStyle),color:BG(mK.color,a.color),Oc:BG(mK.Oc,a.Oc)}:yG(nL,},mL=function(a){return{Vg:CJ(a.Vg,a.om).map(b=>oL(b))}},oL=function(a){return{gridTemplateColumns:a.gridTemplateColumns,
gridTemplateRows:a.gridTemplateRows,Zg:Wd(a.Zg,,columnGap:a.columnGap,rowGap:a.rowGap,maxWidth:a.maxWidth}},SK=function(a){return Object.assign({},a,{Dc:a.Dc&&Object.assign({},a.Dc,{mask:void 0}),Gc:a.Gc&&Object.assign({},a.Gc,{mask:void 0})})},UK=function(a,b){const c=b.ka,e=b.attributes,f=b.rows,h=b.Zc,k=b.columns,p=b.Mc,q=b.direction,
u=b.Gb;return{Sd:Wd(b.cells,x=>{const B=x.content;x=x.format;return{content:B&&pL(B),format:x&&bL(x)}}),Dd:c,Cd:Wd(e,x=>cL(x)),rows:CJ(f,h).map(a.Xj),columns:CJ(k,p).map(a.Wj),direction:q,Gb:u}},VK=function(a,b){switch(b.type){case "GROUP":return qL(a,b);case "CHART":return rL(a,b);case "GRID":return sL(b);case "TABLE":return tL(a,b);case "SHEET":return uL(a,b);case "LINE":return vL(b);case "RECT":return wL(b);case "SHAPE":return xL(b);case "TEXT":return yL(b);case "EMBED":return zL(b);default:throw new g(b);
}},gL=function(a){return Object.assign({},a,{we:a.we&&a.we})},qL=function(a,b){a=b.X;const c=b.W,e=b.Ud,f=b.Rb,h=b.bh;return Object.assign({},{type:"group"},AL(b),{X:a,W:c,Ud:e&&e,Rb:CJ(f,h).map(k=>BL(k))})},rL=function(a,b){a=b.vc;const c=b.X,e=b.W,f=b.rg,h=b.Sc,k=b.Tc,p=b.cd,q=b.bd,u=b.gd;return Object.assign({},{type:"chart"},AL(b),{labels:CJ(b.labels,b.Hn),vc:a,X:c,W:e,rg:f,Sc:h,Tc:k,cd:p,bd:q,gd:u,Zb:b.Zb&&jL(b.Zb),data:CJ(b.data,b.eh).map(x=>kL(x)),config:iL(b.config),Rb:CJ(b.Rb,b.bh).map(x=>
BL(x))})},sL=function(a){const b=a.cells,c=a.layout;return Object.assign({},{type:"grid"},AL(a),{cells:Wd(b,e=>{const f=e.stroke,h=e.L;return{fill:TK(e.fill),stroke:f&&YK(f),L:h}}),layout:CL(c)})},tL=function(a,b){const c=b.cells,e=b.layout,f=b.W,h=b.X;return Object.assign({},{type:"table"},AL(b),{cells:Wd(c,,layout:$K(a,e),W:f,X:h})},uL=function(a,b){const c=b.cells,e=b.ka,f=b.attributes,h=b.rows,k=b.Zc,p=b.columns,q=b.Mc,u=b.direction,x=b.Gb,B=b.title;return Object.assign({},{type:"sheet"},
AL(b),{Sd:Wd(c,F=>{const N=F.content;F=F.format;return{content:N&&DL(N),format:F&&bL(F)}}),Dd:e,Cd:Wd(f,F=>cL(F)),rows:CJ(h,k).map(a.Xj),columns:CJ(p,q).map(a.Wj),direction:u,Gb:x,title:B})},vL=function(a){const b=a.weight,c=a.start,e=a.end,f=a.ag,h=a.color,k=a.fill,p=a.zb,q=a.kc,u=a.wc,x=a.Ph;return Object.assign({},{type:"line"},AL(a),{weight:b,start:EL(c),end:EL(e),ag:f&&FL(f),color:h,fill:k?TK(k):eK,zb:p,kc:q,wc:CJ(u,x).map(B=>{const F=B.la,N=B.width,O=B.height,X=B.position,R=B.orientation,ba=
B.Pb;return{text:AJ(B.text),width:N,height:O,position:X,orientation:R,Pb:ba,la:F}})})},wL=function(a){return Object.assign({},{type:"rect"},AL(a),{fill:TK(a.fill),stroke:a.stroke&&YK(a.stroke),L:a.L})},xL=function(a){const b=a.viewBox,c=a.Ch,e=a.ho,f=a.slice,h=a.Uf,k=a.wc,p=a.Ph,q=a.Qo;return Object.assign({},{type:"shape"},AL(a),{viewBox:b,slice:f&&f,Uf:h&&h,Ch:CJ(c,e).map(u=>{const x=u.L;return{d:u.d,fill:TK(u.fill),stroke:u.stroke&&YK(u.stroke),L:x}}),wc:CJ(k,p).map(u=>{const x=u.Ac,B=u.box,F=
u.Tg,N=u.ia,O=u.la;return{text:AJ(u.text),box:B,ia:N,Ac:x,Tg:F,la:O}}),resizeMode:q})},yL=function(a){const b=a.text,c=a.ia,e=a.la,f=a.Bc,h=a.placeholder,k=a.Pb,p=a.writingMode,q=a.X,u=a.W,x=a.Gf,B=a.ug;return Object.assign({},{type:"text"},AL(a),{placeholder:h&&h,Pb:k,writingMode:p,X:q,W:u,Gf:x,ug:B,text:AJ(b),ia:c,Bc:f&&GL(f),la:e})},zL=function(a){const b=a.url,c=a.X,e=a.W;return Object.assign({},{type:"embed"},AL(a),{url:b,X:c,W:e})},BL=function(a){switch(a.type){case "LINE":return vL(a);case "RECT":return wL(a);
case "SHAPE":return xL(a);case "TEXT":return yL(a);case "EMBED":return zL(a);case "GROUP":case "CHART":case "GRID":case "TABLE":throw Error(`invalid simple element type: ${a.type}`);case "SHEET":throw new lK;default:throw new g(a);}},AL=function(a){var b=a.xc,c=a.altText;const e=a.animation,f=a.wg;var h=a.anchor,k=a.hc,p=a.top,q=a.left,u=a.width,x=a.height,B=a.rotation,F=a.ma,N=a.Wb,O=a.Z,X=a.link,R=a.locked,ba=a.ob,ia=a.ic;c=c&&c;var la=a.Af,oa=a.P;a=a.Cg;b=b&&b;var na;if(na=e)a:switch(e.type){case "NONE":na=
{type:"NONE"};break a;case "SEQUENCED":na=e.rb;na={type:"SEQUENCED",animation:e.animation,rb:na&&SK(na)};break a;case "INDEPENDENT":na=e.rb;na={type:"INDEPENDENT",animation:e.animation,rb:na&&SK(na)};break a;default:throw new g(e);}return{anchor:h,hc:k,top:p,left:q,width:u,height:x,rotation:B,ma:F,Wb:N,Z:O,link:X,locked:R,ob:ba,ic:ia,altText:c,Af:la,P:oa,Cg:a,xc:b,animation:na,wg:f&&f}},CL=function(a){const b=a.ka,c=a.Ag;return{If:a.If,Bg:a.Bg,Jf:a.Jf.map(e=>e||void 0),Ag:c.map(,ka:b.map(e=>
e.li)}},pL=function(a){switch(a.type){case "PLAINTEXT":return{type:"PLAINTEXT",value:a.value};case "FORMULA":return{type:"FORMULA",value:a.value&&a.value};case "BOOLEAN":return{type:"BOOLEAN",value:a.value};case "NUMBER":return{type:"NUMBER",value:a.value};case "TEXT2":return{type:"TEXT2",value:AJ(a.value),ia:a.ia};default:throw new g(a);}},bL=function(a){switch(a.type){case "NUMBER_PILL":return{type:"NUMBER_PILL",format:a.format,ke:a.ke,fe:a.fe};case "NUMBER_TEXT":return{type:"NUMBER_TEXT",format:a.format,
ke:a.ke,fe:a.fe};case "NUMBER_RANGE":return{type:"NUMBER_RANGE",min:a.min,max:a.max,step:a.step};case "BOOLEAN_CHECKBOX":return{type:"BOOLEAN_CHECKBOX"};case "PLAINTEXT_SELECT":return{type:"PLAINTEXT_SELECT",options:a.options};case "PLAINTEXT_COLOR":return{type:"PLAINTEXT_COLOR"};case "PLAINTEXT_MENTION":return{type:"PLAINTEXT_MENTION",user:a.user,brand:a.brand};default:throw new g(a);}},DL=function(a){switch(a.type){case "PLAINTEXT":return{type:"PLAINTEXT",value:a.value};case "FORMULA":return{type:"FORMULA",
value:a.value&&a.value};case "BOOLEAN":return{type:"BOOLEAN",value:a.value};case "NUMBER":return{type:"NUMBER",value:a.value};case "TEXT2":return{type:"TEXT2",value:AJ(a.value),ia:a.ia};default:throw new g(a);}},aL=function(a,b){switch(b.type){case "PLAINTEXT":return{type:"PLAINTEXT",value:b.value};case "FORMULA":return{type:"FORMULA",value:b.value&&b.value};case "BOOLEAN":return{type:"BOOLEAN",value:b.value};case "NUMBER":return{type:"NUMBER",value:b.value};case "TEXT3":return{type:"TEXT3",value:PK(a,
b.value)};default:throw new g(b);}},EL=function(a){return{anchor:a.anchor&&a.anchor,marker:a.marker,position:a.position&&a.position}},FL=function(a){switch(a.type){case "ELBOWED":const b=a.L;return{type:"ELBOWED",mc:CJ(a.mc,a.lh).map(c=>c),L:b};case "CURVED":return{type:"CURVED",depth:a.depth,Nh:a.Nh};default:throw new g(a);}},GL=function(a){return{Bc:CJ(a.Bc,a.Vm).map(}},HL=__webpack_require__(383720).C;var xH=__webpack_require__(555709).U;var lH=__webpack_require__(70211).xQ;var IL=__webpack_require__(61244).y;var JL=__webpack_require__(298760).w;var KL=__webpack_require__(166008).h;var LL=__webpack_require__(513068).b;var ML=__webpack_require__(168949),NL=ML.LO,OL=ML.Fl,PL=ML.p6,QL=ML.vP;var RL=__webpack_require__(127661),SL=RL.kq,TL=RL.Om;var UL=class{constructor(a,b){this.scope=a;this.defaultValue=b}ecode(a){switch(typeof this.defaultValue){case "string":return a;case "number":return Number(a);case "boolean":return"false"!==a;default:throw Error();}}validate(a){d(this.Ki(a),"invalid value: {}",a)}normalizem(a){return a}},TG=class{constructor(a,b,c){this.attributes=a;this.Al=b;this.dk=c;this.ri=yG(this.attributes,e=>e.defaultValue);yG(this.ri,(e,f)=>null!=e?this.encode(f,
e):void 0);this.qh=this.ot=e=>"block"===this.getScope(e);this.rt=this.An=e=>{e=DG(e);return!(!e||!this.dk.has(e))}}opy(a,b,c){FG(this,b,a,}validate(a,b){a=ha(this.attributes[a]);null!=b&&a.validate(b)}normalize(a,b){a=ha(this.attributes[a]);return null!=b?a.normalize(b):void 0}encode(a,b){return CG(this.attributes[a],b)}decode(a,b){return BG(this.attributes[a],b)}},VL=class extends UL{constructor({min:a=
-2147483648,max:b=2147483647,defaultValue:c=0,units:e=""}={}){super("block",c);d(Number.isInteger(a)&&-2147483648<=a);d(Number.isInteger(b)&&2147483647>=b);d(Number.isInteger(c));d(a<=c&&c<=b);this.min=a;this.max=b;this.units=e;AG(this)}Ki(a){return Number.isInteger(a)&&this.min<=a&&a<=this.max}encode(a){return`${a.toFixed(1)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;a=a.substring(0,a.length-this.units.length);return super.decode(a)}},NG=class extends UL{constructor(a,{min:b=
-Number.MAX_VALUE,max:c=Number.MAX_VALUE,Go:e=6,ne:f="integer",defaultValue:h=0,units:k=""}={}){super(a,h);d(Number.isFinite(b)&&b>=-Number.MAX_VALUE);d(Number.isFinite(c)&&c<=Number.MAX_VALUE);d(Number.isInteger(e)&&1<=e&&15>=e);this.min=b;this.max=c;this.units=k;this.Go=e;this.ne=f;AG(this)}Ki(a){return Number.isFinite(a)&&this.min<=a&&a<=this.max}Qm(a){return 0===a?a:Number(a.toPrecision(this.Go))}encode(a){return`${"fixed"===this.ne&&Number.isInteger(a)?a.toFixed(1):String(a)}${this.units}`}decode(a){if(!a.endsWith(this.units))return NaN;
a=a.substring(0,a.length-this.units.length);return super.decode(a)}},PG=class extends UL{constructor(a,b,c){super(a,c);this.Au=b;AG(this)}Ki(a){return this.Au.test(a)}},RG=class extends UL{constructor(a,b){super(a,b[0]);this.Iv=new Set(b);AG(this)}Ki(a){return this.Iv.has(a)}};var WL=var YL=class extends WL{constructor(){super(...arguments)}create(a,b=HL,c){a=this.Da(a);this.connect(a,b).subscribe(c);return a}map,XL=class extends YL{constructor(a,b,c,e,f,h,k){super();this.component=a;this.ig=b;this.wf=c;this.Qi=e;this.Je=f;this.Kt=h;this.Ll=k;this.domain=this.component.domain.map(this.ig,this.wf,this.Qi,this.Je)}Da(a){return this.Kt(this.component.Da(this.Je(a)))}connect(a,b){return this.component.connect(this.Ll(a),b.pipe(xH(this.wf))).pipe(xH(this.ig))}V(a){return this.Qi(this.component.V(this.Ll(a)))}destroy(a,
b){return this.component.destroy(this.Ll(a),this.Je(b))}};var ZL=$L=a=>JSON.stringify(a),aH=["$",".","\x00"],YG=class{constructor(a,b=ZL,c=$L){this.pe=a;this.zc=b;this.stringify=c}},oH=class extends YG{constructor(a){super(b=>null==b||a.pe(b),(b,c)=>null!=b?null!=c&&a.zc(b,c):null==c,b=>null!=b?a.stringify(b):"undefined")}},aM=ZG(a=>"string"===typeof a),bM=ZG(,cM=ZG(,dM=fH(-2147483648,2147483647),eM=fH(-Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER),fM=gH(-Number.MAX_VALUE,Number.MAX_VALUE),gM=fH(0,
2147483647),hM=fH(1,2147483647),iM=fH(0,Number.MAX_SAFE_INTEGER),jM=gH(0,Number.MAX_VALUE),kM=$G(jM),lM=$G(aM);var nM=class{static equals(a,b){return a?!!b&&a.equals(b):!b},mM=class extends nM{ansform(a,b){const [c,e]=this.component.transform(this.wf(a),this.wf(b));return[this.ig(c),this.ig(e)]}identity(a){return this.ig(this.component.identity(this.Je(a)))}apply(a,b){const c=this.Je(a);b=this.component.apply(c,this.wf(b));
return c===b?a:this.Qi(b)}ba(a,b){return a===b||this.component.ba(this.Je(a),this.Je(b))}equals(a){return this===a}};var BI=class extends nM{constructor(a){super();this.zc=a}ransform(){return[void 0,void 0]}identity(){}apply(a){return a}var oM=class{constructor(a){this.fa=a;this.type=0},pM=class{oString(){return`R(${this.oldState}, ${this.newState})`}},qM=class extends nM{pdate(a){return this.component.isIdentity(a)?void 0:new oM(a)}sIdentity(a){return null==a||0===a.type&&this.component.isIdentity(a.fa)}transform(a,b){if(null==a||null==b)return[b,a];switch(a.type){case 0:switch(b.type){case 0:const [c,
e]=this.component.transform(a.fa,b.fa);return[this.update(c),this.update(e)];case 1:return[this.replace(this.component.apply(b.oldState,a.fa),b.newState),void 0];default:throw new g(b);}case 1:switch(b.type){case 0:return[void 0,this.replace(this.component.apply(a.oldState,b.fa),a.newState)];case 1:return hH(this.component,a.oldState,b.oldState),[void 0,this.replace(b.newState,a.newState)];default:throw new g(b);}default:throw new g(a);}}pply(a,b){if(null==b)return a;switch(b.type){case 0:return this.component.apply(a,
b.fa);case 1:return hH(this.component,a,b.oldState),b.newState;default:throw new g(b);}}quals(a){return this===a||a instanceof qM&&this.component.equals(a.component)}};var rM=class{constructor(){this.qc=new lH}connect(a){return new IL(b=>{vG(null==this.Oh);const c=new JL;c.add(this.qc.subscribe(b));c.add(a.subscribe({next:error:()=>this.complete(),complete:));c.add(;return this.Oh=c})}var sM=class extends nM{constructor(a){super();this.component=a;d(!(a instanceof sM))}isIdentity(a){return null==a||this.component.isIdentity(a)}transform(a,b){d(null==a===(null==b));return null!=a&&null!=b?this.component.transform(a,b):[void 0,void 0]}identity(a){return null!=a?this.component.identity(a):void 0}apply(a,b){d(null==a===(null==b));return null!=a&&null!=b?this.component.apply(a,b):void 0}ba(a,b){return null!=a&&null!=b&&this.component.ba(a,b)||null==a&&null==b}equals(a){return this===
a||a instanceof sM&&this.component.equals(a.component)}};var pH=class extends YL{constructor(a){super();this.type=a;this.domain=new sM(this.type.domain)}Da(a){return null!=a?this.type.Da(a):void 0}connect(a,b){return null==a?b.pipe(LL(c=>d(null==c)),KL():this.type.connect(a,b.pipe(xH())}V(a){return null!=a?this.type.V(a):void 0}destroy(a,b){if(null!=a&&null!=b)this.type.destroy(a,b);else if(null!=a||null!=b)throw Error(`${this.V(a)} != ${b}`);}},tM=qH(aM),uM=qH(cM);qH(dM);qH(eM);var vM=qH(fM),wM=qH(gM),xM=qH(iM),yM=qH(jM);var zM=class extends rM{static ya(a){Sd(a,{_value:NL.ref})}constructor(a,b,c){super();zM.ya(this);this.$o=a;this.domain=b;this._value=c}zd(a){if(null!=a)switch(a.type){case 1:d(this._value===a.oldState);this._value=a.newState;break;case 0:d(null==a.fa);break;default:throw new g(a);}}get value(){return this._value}set value(a){WG(this.$o,a);const b=this._value;this.$o.zc(b,a)||kH(this,this.domain.replace(b,a))}},rH=class extends YL{constructor(a){super();this.type=a;this.domain=new qM(new BI(this.type.zc))}Da(a){a=
WG(this.type,a);return new zM(this.type,this.domain,a)}connect(a,b){return a.connect(b)}V(a){return a.value}destroy(a,b){XG(this.type,a.value,b)}},AM=class extends rM{static ya(a){Sd(a,{Pg:NL.ref})}constructor(a,b,c){super();AM.ya(this);this.type=a;this.domain=b;const {mutable:e,eg:f,qc:h}=mH(this.type,c);this.Pg=e;this.Hl=f;this.tn=jH(this,h.pipe(xH(k=>new oM(k))))}instantiate(a){const {mutable:b,eg:c,qc:e}=mH(this.type,a);this.Pg=b;this.Hl=c;this.tn=jH(this,e.pipe(xH())}destroy(a){nH(this.type,
a,this.tn,this.Hl,this.Pg)}zd(a){if(null!=a)switch(a.type){case 0:this.Hl.next(a.fa);break;case 1:this.destroy(a.oldState);this.instantiate(a.newState);break;default:throw Error();}}get ref(){return this.Pg}set(a){kH(this,new pM(this.type.V(this.Pg),a))}},sH=class extends YL{constructor(a){super();this.type=a;this.domain=new qM(this.type.domain)}Da(a){return new AM(this.type,this.domain,a)}connect(a,b){return a.connect(b)}BM=
S(aM),CM=S(cM),DM=S(fM);S(dM);var EM=S(gM),FM=S(iM),GM=S(jM),HM=S(kM),IM=S(lM),JM=T(aM),KM=T(cM),LM=T(fM),MM=T(gM),NM=T(jM);var OM=class extends nM{class extends OM{equals(a){return this===a||a instanceof PM}},QM=class extends OM{transform(a,b){d(0<=a);d(0<=b);return super.transform(a,b)}apply(a,b){d(0<=b);return super.apply(a,b)}equals(a){return this===a||a instanceof QM}},RM=new PM,SM=new QM;var TM=class extends rM{static ya(a){Sd(a,{_value:NL.ref})}constructor(a,b){super();TM.ya(this);this.domain=a;this._value=b}et value(){return this._value}},UM=class extends YL{nnect(a,b){return a.connect(b)}estroy(a,b){hH(this.domain,a.value,b)}},VM=class extends UM{constructor(){super(...arguments);this.domain=RM}},WM=class extends UM{constructor(){super(...arguments);
this.domain=SM}};new VM;new WM;var uH=new Map,XM=class extends nM{constructor(a){super();this.component=new qM(new sM(a))}create(a,b){return vH(this,a,this.component.replace(void 0,b))}update(a,b){return vH(this,a,this.component.update(b))}replace(a,b,c){return vH(this,a,this.component.replace(b,c))}delete(a,b){return vH(this,a,this.component.replace(b,void 0))}identity(){return uH}isIdentity(a){return!a.size||Array.from(a.values()).every(b=>this.component.isIdentity(b))}transform(a,b){if(!a.size||!b.size)return[b,a];const c=new Map,
e=new Map;for(const f of wH(a,b)){const [h,k]=this.component.transform(a.get(f),b.get(f));null!=k&&c.set(f,k);null!=h&&e.set(f,h)}return[e,c]}apply(a,b){if(!b.size)return a;const c=new Map(a);b.forEach((e,f)=>{e=this.component.apply(a.get(f),e);null!=e?c.set(f,e):c.delete(f)});return c}ba(a,b){return a===b||a.size===b.size&&Array.from(wH(a,b)).every(c=>{const e=a.get(c);c=b.get(c);return null!=e&&null!=c&&this.component.ba(e,c)})}equals(a){return this===a||a instanceof XM&&this.component.equals(a)}};var YM=class extends rM{static yaonstructor(a,b,c){super();YM.ya(this);this.type=a;this.domain=b;this.pb=new Map;this.Te=new Map;c.forEach((e,f)=>{const {Am:h,value:k}=yH(this,f,e);this.pb.set(f,k);this.Te.set(f,h)})}get size(){return this.pb.size}set(a,b){var c=this.pb.get(a);c=null!=c?this.domain.replace(a,this.type.V(c),b):this.domain.create(a,b);kH(this,c);c=this.get(a);if(null==c)throw Error(`Unable to set key "${a}" to value "${b}"`);return c}get(a){return this.pb.get(a)}has(a){return this.pb.has(a)}delete(a){const b=
this.pb.get(a);null!=b&&(a=this.domain.delete(a,this.type.V(b)),kH(this,a))}forEach(a){this.pb.forEach(a)}map(a){return[...this.pb].map(([b,c])=>a(c,b))}every(a){return[...this.pb.entries()].every(}entries(){return this.pb.entries()}keys(){return this.pb.keys()}values(){return this.pb.values()}(){return Wd(this.pb,}destroy(a){d(this.pb.size===a.size);this.forEach((b,c)=>{d(a.has(c));const e=a.get(c);d(this.type.domain.ba(e,
this.type.V(b)));c=ha(this.Te.get(c));nH(this.type,this.type.V(b),c.from,c.to,b)})}zd(a){a.forEach((b,c)=>{if(null!=b)switch(b.type){case 0:null!=b.fa&&ha(this.Te.get(c)).to.next(b.fa);break;case 1:if(null!=b.oldState){var e=b.oldState;const f=ha(this.pb.get(c)),h=ha(this.Te.get(c));nH(this.type,e,h.from,h.to,f);this.pb.delete(c);this.Te.delete(c)}else d(!this.pb.has(c)),d(!this.Te.has(c));if(null!=b.newState){const {Am:f,value:h}=yH(this,c,b.newState);this.pb.set(c,h);this.Te.set(c,f)}break;default:throw new g(b);
}})}},zH=class extends YL{constructor(a){super();this.type=a;this.domain=new XM(this.type.domain)}Da(a){return new YM(this.type,this.domain,a)}Vd(a){return a}connect(a,b){return this.Vd(a).connect(b)}var ZM=class extends YL{constructor(a){super();this.type=a;this.domain=new BI(this.type.zc)}onnect(){return HL}var CH={type:0,length:1},EH={type:1,length:1},GH={type:2,length:1},SH=IH(),RH=JH(),TH=JH(new pM),NH=class{$M=new NH([],0,0,0),aN=class{constructor(a){this.component=a;this.F=[];this.acc=this.post=this.D=0;this.xe=this.Nd=this.mode=void 0}Pd(a){if(this.mode!==a){switch(this.mode){case void 0:break;case 0:this.F.push(DH(this.acc));this.D+=this.acc;this.post+=this.acc;this.acc=0;break;case 1:this.F.push(FH(this.acc));
this.post+=this.acc;this.acc=0;break;case 2:this.F.push(HH(this.acc));this.D+=this.acc;this.post+=this.acc;this.acc=0;break;case 3:case 4:break;default:throw new g(this.mode);}this.mode=a}}cj({ua:a,La:b}){const c=this.F.length,e=this.Nd||(this.Nd=new Map),f=this.xe||(this.xe=new Map);d(!e.has(a),"duplicate record: {}",a);d(!f.has(b),"duplicate recall: {}",b);e.set(a,c);f.set(b,c)}append(a,b){switch(a.type){case 0:return this.l(a.length);case 1:return this.expand(a.length);case 2:return this.Od(a.length);
case 3:var c=a.shift;if(!b&&(b=a.state,c&&c.ua===c.La&&(c=void 0,a=IH(b)),null==b&&null==c))return this.expand();this.Pd(a.type);c&&this.cj(c);this.F.push(a);this.post++;return this;case 4:c=a.shift;if(!b)if(b=a.fa,c&&c.ua===c.La&&(c=void 0,a=JH(b)),null==b){if(null==c)return this.l()}else if(1===b.type&&null==b.oldState&&null==b.newState&&null==c)return this.Od();this.Pd(a.type);c&&this.cj(c);this.F.push(a);this.D++;this.post++;return this;default:throw new g(a);}}l(a){return null==a||"number"===
typeof a?PH(this,0,a):this.append(JH(void 0,a))}expand(a){return null==a||"number"===typeof a?PH(this,1,a):this.append(IH(void 0,a))}Od(a){return null==a||"number"===typeof a?PH(this,2,a):this.append(JH(this.component.replace(void 0,void 0),a))}pdate(a,b){return this.append(JH(null!=a?this.component.update(a):void 0,b))}Kg(a){return this.append(JH(this.component.replace(void 0,a)))}Hd(a){return this.append(JH(this.component.replace(a,void 0)))}change(a,b,c){return this.append(JH(this.component.replace(a,
b),c))}build(a){0!==this.mode&&this.Pd();if(a&&a.Sl())return a.jk(this.F);if(!this.Nd&&!this.xe)return new NH(this.F,this.D,this.post,0);a=this.F;const b=ha(this.Nd);var c=[...b.keys()];if(c.some(){const k=new Map;c.forEach(;for(const p of b.values())switch(c=a[p],c.type){case 3:var e=c.shift,f=k.get(e.ua),h=k.get(e.La);if(f!==e.ua||h!==e.La)a[p]=IH(c.state,BH(f,h));break;case 4:e=c.shift;f=k.get(e.ua);h=k.get(e.La);if(f!==e.ua||h!==e.La)a[p]=JH(c.fa,BH(f,h));break;
case 0:case 1:case 2:throw Error(`INSERT | UPDATE expected: ${MH(c)}`);default:throw new g(c);}}return new NH(a,this.D,this.post,b.size)}},bN=class{constructor(a){this.F=a;this.i=0;this.pa=a[this.i++]}static create(a,b,c){d(0<=b,"{} < 0",b);d(0<=c,"{} < 0",c);a=(b=Math.max(0,b-a.D,c-a.post))?[...a.F,DH(b)]:a.F;return new bN(a)}get head(){return this.pa}},cN=class{constructor(a){this.fn=a;this.list=[];this.length=0;this.xe=this.Nd=void 0}cj(a,{ua:b,La:c}){const e=this.Nd||(this.Nd=new Map),f=this.xe||
(this.xe=new Map);vG(!e.has(b),"already recorded: {}",b);vG(!f.has(c),"already recalled: {}",c);e.set(b,a);f.set(c,this.length)}append(a,b){b?this.cj(a,b):null!=a&&(this.list[this.length]=a);this.length++;return this}expand(a=1){d(0<=a,"{} < 0",a);this.length+=a;return this}build(){const a=this.list;if(this.Nd||this.xe){const c=ha(this.Nd);var b=ha(this.xe);xG(c.size,b.size);for(const [e,f]of b)vG(c.has(e),"recall has no record: {}",e),b=c.get(e),null!=b&&(a[f]=b)}null!=this.fn&&xG(this.length,this.fn);
return a}},dN=class{tatic create(a,b){a.length<b&&(a=a.slice(),a.length=b);return new dN(a)},eN=class{constructor(a){this.component=a;this.kl=this.ll=this.th=void 0}k(a){const b=new aN(this.component);for(const p of a)switch(p.type){case 3:a=b;var c=a.append;if(p.shift){var e=p.shift;var f=$H(this,e);if(f!==e)throw Error(`${JSON.stringify(f)} != ${JSON.stringify(e)}`);e=p}else e=p;c.call(a,e);break;
case 4:a=b;c=a.append;e=p.fa;f=p.shift;a:{var h=this.nf;if(!h){var k=p.fa;break a}k=h.get(p);if(null==k){k=p.fa;break a}h.delete(p);h=ha(this.qf);const q=h.get(k);h.delete(k);k=q}h=f&&$H(this,f);c.call(a,k!==e||h!==f?JH(k,h):p);break;case 0:case 1:case 2:b.append(p);break;default:throw new g(p);}return b.build()}},fN=class extends eN{constructor(){super(...arguments);this.qf=this.nf=void 0}Sl(){return super.Sl()||!!this.nf||!!this.qf}jk(a){a=super.jk(a);if(this.nf&&this.nf.size)throw Error(`unconsumed setSurrogates: ${[...this.nf.values()]}`);
if(this.qf&&this.qf.size)throw Error(`unconsumed subSurrogates: ${[...this.qf.keys()]}`);return a}},gN=class extends nM{constructor(a){super();this.component=new qM(new sM(a))}sIdentity(a){return!a.F.length||a.F.every(b=>{switch(b.type){case 0:return!0;case 4:return!b.shift&&this.component.isIdentity(b.fa);case 2:case 1:case 3:return!1}throw new g(b);})}transform(a,b){if(!a.F.length||!b.F.length)return[b,a];const c=this.component,e=bN.create(a,b.D,0),f=bN.create(OH(b,
a.vg),a.D,0),h=this.ha(),k=this.ha(),p=new fN(c),q=new fN(c);for(var u=e.head,x=f.head;u||x;){if(u&&3===u.type)if(x=UH(e,u.type),x.shift){var B=x.shift;u=JH();k.append(u,"nocollapse");h.append(x);bI(p,B.La,u);aI(p,B.ua)}else k.append(CH),h.append(x);else if(u&&1===u.type)x=QH(e,u.type,u.length),k.append(DH(x.length)),h.append(x);else if(x&&3===x.type)if(x=UH(f,x.type),x.shift){u=x.shift;B=u.ua;u=u.La;var F=-B-1,N=JH(void 0,BH(-u-1,u));k.append(x);h.append(N);bI(q,u,N);aI(q,B);ZH(q,F,B)}else k.append(x),
h.append(CH);else if(x&&1===x.type)B=QH(f,x.type,x.length),k.append(B),h.append(DH(x.length));else if(u&&x)if(4===u.type||4===x.type){B=UH(e,u.type);u=UH(f,x.type);const [O,X]=c.transform(B.fa,u.fa);x=B.shift;u=u.shift;if(x)if(u){B=u.ua;u=u.La;F=x.ua;x=x.La;N=-B-1;const R=JH(void 0,BH(-u-1,u)),ba=JH(void 0,BH(B,u));k.append(ba);h.append(R);bI(p,x,ba);bI(q,u,R);aI(p,F,O);aI(q,B,X);ZH(q,N,F);YH(q,B);(q.kl||(q.kl=new Map)).set(B,x)}else B=x.ua,u=x.La,F=JH(),k.append(F,"nocollapse"),h.append(JH(X,x)),
bI(p,u,F),aI(p,B,O);else u?(x=u.ua,B=u.La,F=-x-1,N=JH(void 0,BH(-B-1,B)),k.append(JH(O,u)),h.append(N),bI(q,B,N),aI(q,x,X),ZH(q,F,x)):(k.append(JH(O)),h.append(JH(X)))}else B=Math.min(u.length,x.length),u=QH(e,u.type,B),x=QH(f,x.type,B),2===u.type&&2===x.type?k.append(DH(x.length)):k.append(x),h.append(u);else throw Error(`length mismatch (${a} x ${b})`);u=e.head;x=f.head}return[k.build(p),h.build(q)]}ply(a,b){if(!b.F.length)return a;const c=dN.create(a,
b.D),e=new cN(Math.max(a.length,b.D)+(b.post-b.D));a=b.D<a.length?[...b.F,DH(a.length-b.D)]:b.F;for(const p of a)switch(p.type){case 0:WH(e,XH(c,p.length));break;case 1:e.expand(p.length);break;case 2:vG(VH(XH(c,p.length)));e.expand(p.length);break;case 3:e.append(p.state,p.shift);break;case 4:a=e;b=a.append;var f=this.component,h=f.apply;d(c.Ye<c.input.length,"{} >= {}",c.Ye,c.input.length);var k=c.input[c.Ye++];b.call(a,h.call(f,k,p.fa),p.shift);break;default:throw new g(p);}c.finish();return e.build()}unshift(a){const b=
this.ha(),c=this.ha();for(const e of a.F)switch(e.type){case 0:b.append(e);c.append(e);break;case 1:case 2:b.append(DH(e.length));c.append(e);break;case 4:e.shift?(b.l(cI(e.shift)),c.append(JH(e.fa))):(b.l(),c.append(e));break;case 3:e.shift?(b.l(cI(e.shift)),c.append(IH(e.state))):(b.l(),c.append(e));break;default:throw new g(e);}return{unshift:b.build(),joa:c.build()}}ba(a,b){if(a===b)return!0;if(a.length!==b.length)return!1;const c=Object.keys(a),e=Object.keys(b);if(c.length!==e.length)return!1;
for(let f=0;f<c.length;f++)if(c[f]!==e[f]||!this.component.ba(a[c[f]],b[e[f]]))return!1;return!0}equals;var hN=class extends rM{static yaonstructor(a,b,c){super();hN.ya(this);this.type=a;this.domain=b;this.Mk=0;d(!c.length||null!=c[c.length-1]);this.Ra=NL.array([...c.map(],{deep:!1})}bf(a){const {mutable:b,eg:c,qc:e}=mH(this.type,a);return{id:String(this.Mk++),value:b,to:c,from:jH(this,e.pipe(xH(f=>this.domain.ha().l(dI(this,b)).update(f).build()))),toString:}Yj(a,b){nH(this.type,a,b.from,b.to,b.value)}get Ii(){const a=new Map;this.Ra.forEach((b,c)=>
b&&a.set(b.value,c));return a}zd(a){const b=this.Ra,c=new Map,e=new Map;var f=0;b.length<a.D&&(b.length=a.D);for(var h of a.F)switch(h.type){case 0:case 2:f+=h.length;break;case 1:b.spliceWithArray(f,0,Array(h.length));f+=h.length;break;case 3:var k=h.state,p=h.shift;b.splice(f,0,null!=k?this.bf(k):void 0);p&&(e.set(p.ua,b[f]),c.set(p.La,f));f++;break;case 4:var q=h.fa;k=h.shift;if(q)switch(q.type){case 0:p=q.fa;null!=p&&ha(b[f]).to.next(p);break;case 1:p=q.oldState;q=q.newState;null==p?vG(null==
b[f]):this.Yj(p,ha(b[f]));b[f]=null!=q?this.bf(q):void 0;break;default:throw new g(q);}k&&(e.set(k.ua,b[f]),c.set(k.La,f));f++;break;default:throw new g(h);}vG(e.size===a.vg);vG(c.size===a.vg);for(f=0;f<a.vg;f++)vG(e.has(f)),h=ha(c.get(f)),b[h]=e.get(f);for(;b.length&&null==b[b.length-1];)b.length--}V(){const a=[];this.Ra.forEach((b,c)=>{null!=b&&(a[c]=this.type.V(b.value))});return a}oArray(){return this.Ra.filter(__c.Wb).map(a=>a.value)}[Symbol.iterator]rst(a){return a?
eI(this,a):this.qn}last(a){const b=this.Ra;for(let c=b.length-1;0<=c;c--){const e=b[c];if(e&&(!a||a(e.value)))return e.value}}next(a,b){const c=this.Ra;for(a=dI(this,a)+1;a<c.length;a++){const e=c[a];if(e&&(!b||b(e.value)))return e.value}}k(a,b){kH(this,this.domain.ha().l(a).insert(b).build());return this.Ra[a].value}set(a,b){var c;d(0<=a);a>=this.Ra.length&&(this.Ra.length=a+1);const e=null===(c=this.Ra[a])||void 0===c?void 0:c.value;c=null!=e?this.type.V(e):void 0;
kH(this,this.domain.ha().l(a).change(c,b).build());return this.Ra[a].value}replace(a,b){a=dI(this,a);return this.set(a,b)}sertBefore(a,b){return this.vk(a?dI(this,a):this.Ra.length,b)}delete(a){a=this.domain.ha().l(dI(this,a)).Hd(this.type.V(a)).build();kH(this,a)}moveTo(a,b){const c=dI(this,b);if(c===a)return b;kH(this,c<a?this.domain.ha().l(c).l(BH(0,1)).l(a-c-1).expand(BH(1,0)).build():this.domain.ha().l(a).expand(BH(0,
1)).l(c-a).l(BH(1,0)).build());return b}map(a){return this.Ra.filter(__c.Wb).map(({value:b,id:c})=>a(b,c))}flatMap(a){return this.Ra.filter(__c.Wb).flatMap(}filter(a){return this.Ra.filter(b=>null!=b&&a(b.value,b.id)).map(}forEach(a){this.Ra.forEach((b,c)=>null!=b&&a(b.value,b.id,c))}reduce(a,b){return this.Ra.reduce((c,e)=>null!=e?a(c,e.value,e.id):c,b)}some(a){return this.Ra.some(}every(a){return this.Ra.every(b=>null==b||a(b.value,
b.id))}},gI=class extends YL{constructor(a){super();this.type=a;this.domain=new gN(this.type.domain)}roy(a,b){let c=0;a.forEach((e,f,h)=>{d(h in b);this.type.destroy(e,b[h]);c++});a=b.reduce(e=>e+1,0);d(c===a)}};var iN=class extends nM{isIdentity(a){throw new g(a);}transform(a){throw new g(a);}identity(a){throw new g(a);}apply(a){throw new g(a);}quals(a){return this===a||a instanceof iN}},jN=new iN;var kN=class{},lN=class extends kN{constructor(a){super();this.state=a;this.type=0;d(!!a)}get length(){return this.state.length}uj(a){jI(this,a);return this.state.charAt(a)}uc(a){kI(this,a);return[new lN(this.state.substring(0,a)),new lN(this.state.substring(a))]}Ib(){return this}toString(){return this.state}},rI=class extends kN{constructor(a){super();this.state=a;this.type=1}get length(){return 1}uj(a){jI(this,a);return this.state}uc(a){kI(this,a);throw Error();}Ib(a){return new rI(a(this.state))}toString(){return`[${this.state}]`}},
mN=class extends kN{constructor(a){super();this.state=a;this.type=2;d(!!a)}get length(){return this.state}c(a){kI(this,a);return[new mN(a),new mN(this.state-a)]}Ib(){return this}toString(){return 7>=this.state?"\u00b7".repeat(this.state):`\u00b7\u00b7(${this.state})\u00b7\u00b7`}},pN=class{constructor(a,b,c,e){this.Ya=a;this.Xd=b;this.Ak=c;this.Uo=e;a=a.length?a[a.length-1]:void 0;d(!a||2!==a.type)}get length(){return this.Xd+this.Ak+this.Uo}T(a){return new nN(this,a)}cursor(a,b){return new oN(this,
a,b)}zk(a){for(const b of this.Ya){const c=b.length;if(a<c)return b.uj(a);a-=c}}Ib(a){const b=this.Ya.map(c=>c.Ib(a));return new pN(b,this.Xd,this.Ak,this.Uo)}O(){return this.Ya.map(.join("")}forEach(a,b){for(const c of this.Ya)switch(c.type){case 0:b.O&&b.O(c.state);break;case 1:b.item(c.state);break;case 2:b.ca&&b.ca(c.state);break;default:throw new g(c);}(a=Math.max(0,a-this.length))&&b.ca&&b.ca(a)}map(a,b){const c=this.Ya.map(e=>{switch(e.type){case 0:return b.O(e.state);
case 1:return b.item(e.state);case 2:return b.ca(e.state);default:throw new g(e);}});(a=Math.max(0,a-this.length))&&c.push(b.ca(a));return c}reduce(a,b){return this.Ya.reduce((c,e)=>{switch(e.type){case 0:return a.O(c,e.state);case 1:return a.item(c,e.state);case 2:return a.ca?a.ca(c,e.state):c;default:throw new g(e);}},b)}slice(a,b){d(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return qN;const e=new rN;c=this.cursor(b);c.Fc(a);c.Fc(b-a,{item:f=>
e.item(f),O:f=>e.ea(f),ca:f=>e.Qd(f)});return e.build()},qN=new pN([],0,0,0),rN=class{constructor(){this.Ya=[];this.mode=void 0;this.Ih="";this.sj=this.yk=this.mi=this.Jh=0}ydlush(){if(null!=this.mode){switch(this.mode){case 0:this.Ya.push(new lN(this.Ih));this.mi+=this.Ih.length;this.Ih="";break;case 2:this.Ya.push(new mN(this.Jh));this.sj+=this.Jh;this.Jh=0;break;default:throw new g(this.mode);}this.mode=void 0}}region(a){switch(a.type){case 0:return this.ea(a.state);
case 1:return this.item(a.state);case 2:return this.Qd(a.state);default:throw new g(a);}}ea(a){a&&(this.yd(0),this.Ih+=a);return this}item(a){this.flush();this.Ya.push(new rI(a));this.yk++;return this}Qd(a){0<a&&(this.yd(2),this.Jh+=a);return this}append(a,b=0){a.forEach(b,{O:c=>this.ea(c),item:c=>this.item(c),ca:c=>this.Qd(c)});return this}uild(){2!==this.mode&&this.flush();return this.length?new pN(this.Ya,this.mi,this.yk,this.sj):qN}},nN=class{constructor(a,
b=0){this.i=0;this.Fh=void 0;this.Ya=(b=Math.max(0,b-a.length))?[...a.Ya,new mN(b)]:a.Ya;this.pa=this.Ya.length?this.Ya[this.i++]:void 0}get head(){return this.pa}get prevValue(){return this.Fh&&this.Fh.uj(this.Fh.length-1)}md(a){const b=ha(this.pa),c=b.length;d(0<a&&a<=c,"{} \u2209 (0, {}]",a,c);if(a<c)return a=b.uc(a),this.pa=a[1],this.Fh=a[0];this.pa=this.Ya[this.i++];return this.Fh=b}finish(){vG(null==this.pa,"unconsumed reader head: {}",this.pa)}},oN=class{constructor(a,b,c){this.Ri=c;this.T=
a.T(b)}get prevValue(){return this.T.prevValue}move(a,b,c){for(c=mI(this.Ri,c);a;){var e=this.T.head;if(e)switch(e=this.T.md(b||2!==e.type?Math.min(e.length,a):e.length),e.type){case 0:c&&c.O&&c.O(e.state);a-=e.length;break;case 1:c&&c.item&&c.item(e.state);a-=e.length;break;case 2:c&&c.ca&&c.ca(e.state);b&&(a-=e.length);break;default:throw new g(e);}else d(b,"not enough characters or items: {}",a),c&&c.ca&&c.ca(a),a-=a}}Fc(a,b){this.move(a,!0,b)}i(){const a=mI(this.Ri),
b=this.T.head;b&&2===b.type&&(this.T.md(b.length),a&&a.ca&&a.ca(b.length))},sN=class{},tN=class extends sN{constructor(a){super();this.length=a;this.type=0}get sd(){return this.length}get re(){return this.length}jj(a){nI(this,a);return this.uc(a)}uc(a){return[new tN(a),new tN(this.length-a)]}oString(){return`R${this.length}`}},uN=class extends sN{constructor(a){super();this.fa=a;this.type=1}get sd(){return 1}get re(){return 1}jj(a){nI(this,a);throw Error();
}oString(){return`U[${this.fa}]`}},vN=class extends sN{et sd(){return 0}get re(){return this.state.length}jj(a){nI(this,a);throw Error();}mapoString(){switch(this.state.type){case 0:case 1:return`I${this.state}`;case 2:return`X${this.state.length}`;default:throw new g(this.state);}}},wN=class extends sN{constructor(a,b){super();this.oldState=a;this.newState=b;this.type=3;xG(a.length,
b.length)}get sd(){return this.oldState.length}get re(){return this.newState.length}jj(a){nI(this,a);return this.uc(a)}uc(a){const [b,c]=this.oldState.uc(a),[e,f]=this.newState.uc(a);return[new wN(b,e),new wN(c,f)]}map(a,b){return new wN(this.oldState.Ib(b),this.newState.Ib(b))}toString(){return 2===this.oldState.type?2===this.newState.type?`\u25e0${this.oldState.state}`:`\u2191${this.newState}`:2===this.newState.type?`\u2193${this.oldState}`:`\u25e1[${this.oldState}|${this.newState}]`}},yN=class{constructor(a,
b,c){this.F=a;this.D=b;this.post=c}T(a,b){return new xN(this,a,b)}forEach(a,b=this.D,c=this.post){for(const e of this.F)switch(e.type){case 0:a.l&&a.l(e.length);break;case 1:a.update&&a.update(e.fa);break;case 2:a.insert&&a.insert(e.state);break;case 3:a.change&&a.change(e.oldState,e.newState);break;default:throw new g(e);}(b=Math.max(0,b-this.D,c-this.post))&&a.l&&a.l(b)}map(a){return this.F.map(b=>{switch(b.type){case 0:return a.l(b.length);case 1:return a.update(b.fa);case 2:return a.insert(b.state);
case 3:return a.change(b.oldState,b.newState);default:throw new g(b);}})}Ib(a,b){const c=this.F.map(;return new yN(c,this.D,this.post)},zN=new yN([],0,0),AN=class{constructor(a){this.isIdentity=a;this.F=[];this.post=this.D=0;this.Lk=this.Rk=this.oc=void 0;this.acc=0;this.bc=this.se=void 0}yd(a,b,c){if(this.oc!==a||this.Rk!==b||this.Lk!==c)switch(this.flush(),this.oc=a,this.Rk=b,this.Lk=c,a){case 0:break;case 2:0===c&&(this.bc="");break;case 3:0===
b&&(this.se="");0===c&&(this.bc="");break;default:throw new g(a);}}flush(){if(null!=this.oc){switch(this.oc){case 0:this.push(new tN(this.acc));this.acc=0;break;case 2:var a=null!=this.bc?new lN(this.bc):new mN(this.acc);this.push(new vN(a));this.bc=void 0;this.acc=0;break;case 3:a=null!=this.se?new lN(this.se):new mN(this.acc);const b=null!=this.bc?new lN(this.bc):new mN(this.acc);this.push(new wN(a,b));this.bc=this.se=void 0;this.acc=0;break;default:throw new g(this.oc);}this.Lk=this.Rk=this.oc=
void 0}}push(a){this.F.push(a);this.D+=a.sd;this.post+=a.re}op(a){switch(a.type){case 0:return this.l(a.length);case 1:return this.update(a.fa);case 2:return this.fg(a.state);case 3:return oI(this,a.oldState,a.newState);default:throw new g(a);}}fg(a){switch(a.type){case 0:return this.insert(a.state);case 1:return this.insert(a.state);case 2:return this.expand(a.state);default:throw new g(a);}}l(a){d(0<=a);a&&(this.yd(0),this.acc+=a);return this}update(a){if(this.isIdentity(a))return this.l(1);this.flush();
this.F.push(new uN(a));this.D++;this.post++;return this}expand(a){d(0<=a);a&&(this.yd(2,void 0,2),this.acc+=a);return this}insert(a){"string"===typeof a?a&&(this.yd(2,void 0,0),this.bc+=a):(this.flush(),this.push(new vN(new rI(a))));return this}Od(a){d(0<=a);a&&(this.yd(3,2,2),this.acc+=a);return this}Kg(a){"string"===typeof a?a&&(this.yd(3,2,0),this.acc+=a.length,this.bc+=a):(this.flush(),this.push(new wN(new mN(1),new rI(a))));return this}Hd(a){"string"===typeof a?a&&(this.yd(3,0,2),this.acc+=a.length,
this.se+=a):(this.flush(),this.push(new wN(new rI(a),new mN(1))));return this}change(a,b){"string"===typeof a?"string"===typeof b?(xG(a.length,b.length),a&&(this.yd(3,0,0),this.se+=a,this.bc+=b)):(xG(a.length,1),this.flush(),this.push(new wN(new lN(a),new rI(b)))):"string"===typeof b?(xG(1,b.length),this.flush(),this.push(new wN(new rI(a),new lN(b)))):(this.flush(),this.push(new wN(new rI(a),new rI(b))));return this}build(){0!==this.oc&&this.flush();return new yN(this.F,this.D,this.post)}},xN=class{constructor(a,
b=0,c=0){this.F=(b=Math.max(0,b-a.D,c-a.post))?[...a.F,new tN(b)]:a.F;this.i=0;this.pa=this.F[this.i++]}get head(){return this.pa}finish(){vG(null==this.pa)}},BN=class extends nM{constructor(a){super();this.component=a}a(){return new rN}id(){return zN}hh(){return qN}be(a){return"string"===typeof a?a?new pN([new lN(a)],a.length,0,0):qN:new pN([new rI(a)],0,1,0)}isIdentity(a){return!a.F.length||a.F.every(b=>0===b.type)}transform(a,b){if(!a.F.length||
!b.F.length)return[b,a];const c=this.ha(),e=this.ha(),f=a.T(b.D,0),h=b.T(a.D,0);for(;;){let p=f.head;var k=h.head;if(!p&&!k)break;p&&2===p.type?(p=pI(f),k=void 0):k&&2===k.type?(p=void 0,k=pI(h)):p&&k&&(k=Math.min(p.sd,k.sd),p=qI(f,k),k=qI(h,k));if(p&&2===p.type)e.l(p.re),c.op(p);else if(k&&2===k.type)e.op(k),c.l(k.re);else if(p&&k)if(0===p.type||0===k.type)e.op(k),c.op(p);else if(3===p.type)e.l(p.re),oI(c,tI(this,p.oldState,k),p.newState);else if(3===k.type)oI(e,tI(this,k.oldState,p),k.newState),
c.l(k.re);else{const [q,u]=this.component.transform(p.fa,k.fa);e.update(q);c.update(u)}else throw Error(`length mismatch (${a} x ${b})`);}f.finish();h.finish();return[e.build(),c.build()]}identity(){return zN}apply(a,b){const c=this.Ma(),e=a.T(b.D);for(a=b.T(a.length,0);;){b=e.head;var f=a.head;if(!f)break;2===f.type?(b=void 0,f=pI(a)):b&&(f=Math.min(b.length,f.sd),b=e.md(f),f=qI(a,f));if(2===f.type)c.region(f.state);else if(b)c.region(tI(this,b,f));else break}e.finish();a.finish();return c.build()}ba(a,
b){if(a===b)return!0;if(a.length!==b.length)return!1;a=a.T();b=b.T();let c=a.head,e=b.head;for(;c||e;){if(!c||!e||!uI(this,c,e))return!1;a.md(c.length);b.md(e.length);c=a.head;e=b.head}return!0}equals(a){return this===a||a instanceof BN&&this.component.equals(a.component)}},vI=new BN(jN),wI={item:;var CN=class{constructor(a,b,c){this.D=a;this.post=b;this.F=c}forEach(a,b=this.D,c=this.post){this.F.forEach(e=>{switch(e.type){case 0:a.l&&a.l(e.O);break;case 2:a.insert&&a.insert(e.O);break;case 1:a.delete&&a.delete(e.O);break;default:throw new g(e);}});(b=Math.max(0,b-this.D,c-this.post))&&a.l&&a.l(b)}static Qa(){return new yI}},yI=class{constructor(){this.F=[];this.post=this.D=0;this.mode=void 0;this.zg=0;this.oh="";this.Pf=0}static insert(a,b){return(new yI).l(a).insert(b).build()}static delete(a,
b){return(new yI).l(a).delete(b).build()}l(a){d(0<=a);0<a&&(this.Pd(0),this.zg+=a);return this}insert(a){0<a.length&&(this.Pd(2),this.oh+=a);return this}delete(a){0<a&&(this.Pd(1),this.Pf+=a);return this}Pd(a){if(this.mode!==a){switch(this.mode){case 0:var b=this.F,c=b.push,e=this.zg;d(0<e);c.call(b,{type:0,O:e});this.D+=this.zg;this.post+=this.zg;this.zg=0;break;case 2:b=this.F;c=b.push;e=this.oh;d(0<e.length);c.call(b,{type:2,O:e});this.post+=this.oh.length;this.oh="";break;case 1:b=this.F;c=b.push;
e=this.Pf;d(0<e);c.call(b,{type:1,O:e});this.D+=this.Pf;this.post+=this.Pf;this.Pf=0;break;case void 0:break;default:throw new g(this.mode);}this.mode=a}}build(){0!==this.mode&&this.Pd();return new CN(this.D,this.post,this.F)}};var DN=class extends rM{static yaonstructor(a,b){super();DN.ya(this);this.domain=a;this.subject=new lH;this.state=b}get O(){return this.state.O()}insert(a,b){kH(this,xI(this.state,yI.insert(a,b)))}delete(a,b){kH(this,xI(this.state,yI.delete(a,b)))}zd(a){const b=zI(this.state,a);this.state=vI.apply(this.state,a);this.subject.next(b)}V(){return this.state}destroy(a){d(vI.ba(this.state,a))}},EN=class extends YL{constructor(){super();this.domain=vI}Da(a){return new DN(this.domain,
a)}connect(a,b){return a.connect(b)}V(a){return a.V()};new EN;var FN=class extends nM{constructor(){super();this.zj=void 0}ec(a){vG(!this.zj);this.zj=a}get target(){return ha(this.zj)}isIdentity(a){return this.target.isIdentity(a)}transform(a,b){return this.target.transform(a,b)}identity(a){return this.target.identity(a)}apply(a,b){return this.target.apply(a,b)}ba(a,b){return this.target.ba(a,b)}equals(a){return this===a||a instanceof FN&&this.target.equals(a.target)}};var GN=class extends YL{constructor(){super();this.Aj=void 0;this.domain=new FN}ec(a){vG(!this.Aj);this.Aj=a;this.domain.ec(a.domain)}a(a){return this.type.Da(a)}connect(a,b){return this.type.connect(a,b)}V(a){return this.type.V(a)};var HN=class extends nM{constructor(a){super();this.Ja=a;this.id={}}static of(a){return new HN(a)}update(a,b){const c={};ha(this.Ja[a]).isIdentity(b)||(c[a]=b);return c}identity(){return this.id}isIdentity(a){return a===this.id||Object.entries(a).every(([b,c])=>null==c||this.Ja[b].isIdentity(c))}transform(a,b){const c={},e={};var f=Object.keys(a),h=Object.keys(b);if(!f.length||!h.length)return[b,a];for(const k of new Set([...f,...h]))if(f=a[k],h=b[k],null!=f&&null!=h){const p=this.Ja[k],[q,u]=p.transform(f,
h);p.isIdentity(u)||(c[k]=u);p.isIdentity(q)||(e[k]=q)}else null!=f?c[k]=f:null!=h&&(e[k]=h);return[e,c]}apply(a,b){var c=Object.keys(b);if(!c.length)return a;const e=Object.assign({},a);for(const f of c)c=b[f],null!=c&&(e[f]=this.Ja[f].apply(a[f],c));return e}ba(a,b){return a===b||Object.keys(this.Ja).every(c=>this.Ja[c].ba(a[c],b[c]))}equals(a){return this===a?!0:a instanceof HN?Object.keys(this.Ja).length===Object.keys(a.Ja).length&&Object.keys(this.Ja).every(b=>b in a.Ja&&this.Ja[b].equals(a.Ja[b])):
!1}};var IN=class extends rM{constructor(a,b,c,e,f){super();this.domain=a;this.ap=b;this.dj=c;this.ji=e;a={};const h={},k={},p={},q={};for(const u in b)k[u]=WG(b[u],f[u]);for(const u in c){const {eg:x,qc:B,mutable:F}=mH(c[u],f[u]);p[u]=F;a[u]=x;h[u]=B.pipe(xH().subscribe(this.qc)}for(const u in e)q[u]=NL.box(WG(e[u].type,f[u]),{deep:!1});this.values=k;this.K=p;this.attributes=q;this.ro=a;this.zu=h}V(){const a={};for(const b in this.ap)a[b]=this.values[b];for(const b in this.dj)a[b]=this.dj[b].V(this.K[b]);
for(const b in this.ji)a[b]=this.getAttribute(b);return a}destroy(a){const b=this.ap,c=this.dj,e=this.ji;for(const f in b)XG(b[f],this.values[f],a[f]);for(const f in c)nH(c[f],a[f],this.zu[f],this.ro[f],this.K[f]);for(const f in e)XG(e[f].type,this.getAttribute(f),a[f])}zd(a){for(const c in a)if(null!=a[c])if(c in this.dj)this.ro[c].next(a[c]);else if(c in this.ji){const e=a[c],f=this.getAttribute(c);a:{var b=this.ji[c].type;if(null==e)b=f;else switch(e.type){case 0:b=f;break a;case 1:XG(b,f,e.oldState);
WG(b,e.newState);b=e.newState;break a;default:throw new g(e);}}this.attributes[c].set(b)}}etAttribute(a,b){b=new pM(this.getAttribute(a),b);kH(this,{[a]:b});return!0}},JN=Symbol("$impl"),EI=class extends YL{constructor(a,b,c){super();this.values=a;this.K=b;this.attributes=c;this.domain=HN.of(Object.assign({},CI(this.values),VG(this.K),DI(this.attributes)));AI(a,b,c);a={};for(const e in c){const f=c[e];a[e]={enumerable:!0,get
set(h){WG(f.type,h);this[JN].setAttribute(e,h)}}}this.eq=a}Da(a){a=new IN(this.domain,this.values,this.K,this.attributes,a);const b=Object.assign({},a.values,a.K);Object.defineProperty(b,JN,{enumerable:!1,writable:!1,value:a});Object.defineProperties(b,this.eq);return b}ar UN=class extends nM{a(a){const b=new KN;return a?new LN(b,a):b}od(a,b,c){a=new MN(a,b);return c?new NN(a,c):a}Ma(a){const b=new ON;return a?new PN(b,a):b}hh(){return QN}id(){return RN}isIdentity(a){return a===RN||!a.F.length}transform(a,b){if(!a.F.length||!b.F.length)return[b,a];var c=a.T(b.D,0);const e=b.T(a.D,0);var f=this.ha();const h=this.ha();for(var k=c.next,p=e.next;k||p;){if(k&&k.type===SN){k=k.length;p=c.Mf(k);p=PI(c.Ic,e.Ic,p,{});const [q,u]=p;h.l(k,q);f.insert(k,
u)}else if(p&&p.type===SN){k=p.length;p=e.Mf(k);p=PI(c.Ic,e.Ic,{},p);const [q,u]=p;h.insert(k,q);f.l(k,u)}else if(k&&p){k=Math.min(k.length,p.length);p=c.$d(k);const q=e.$d(k);p=PI(c.Ic,e.Ic,p,q);const [u,x]=p;h.l(k,u);f.l(k,x)}else throw Error(`unreachable case: ${k} x ${p}`);k=c.next;p=e.next}c.finish();e.finish();c=h.build();f=f.build();xG(c.post-c.D,b.post-b.D);xG(f.post-f.D,a.post-a.D);return[c,f]}identity(){return RN}apply(a,b){if(!b.F.length)return a;a=new TN(a,b.D);b.forEach(a);return a.result()}ba(a,
b){if(a===b)return!0;if(a.length!==b.length)return!1;a=a.T();b=b.T();let c=a.head,e=b.head;for(;c||e;){if(!c||!e)return!1;switch(c.type){case KI:if(e.type!==KI||c.length!==e.length)return!1;a.md(c.length);b.md(e.length);break;case II:if(e.type!==II||!HI(c.kb,e.kb))return!1;TI(a);TI(b);break;default:throw new g(c);}c=a.head;e=b.head}return!0}equals(a){return this===a||a instanceof UN}},II=0,KI=1,SI=JI({},{}),XN=class{constructor(a,b){this.items=a;this.length=b;a=a.length?a[a.length-1]:void 0;d(!a||
a.type!==KI)}ursor(a,b){return new WN(this,a,b)}forEach(a,{grad:b,yb:c}){for(const e of this.items)switch(e.type){case II:b&&b(e.Sa,e.kb);break;case KI:c&&c(e.length);break;default:throw new g(e);}(a=Math.max(0,a-this.length))&&c&&c(a)}map(a,{grad:b,yb:c}){const e=this.items.map(f=>{switch(f.type){case II:return b(f.Sa,f.kb);case KI:return c(f.length);default:throw new g(f);}});(a=Math.max(0,a-this.length))&&e.push(c(a));return e}reduce({grad:a,yb:b},c){return this.items.reduce((e,
f)=>{switch(f.type){case II:return a?a(e,f.Sa,f.kb):e;case KI:return b?b(e,f.length):e;default:throw new g(f);}},c)}slice(a,b){d(0<=a&&a<=b,"invalid range: [{}, {})",a,b);var c=this.length;if(0===a&&b>=c)return this;if(a===b||a>=c)return QN;const e=new ON;c=this.cursor(b);c.move(a);e.attrs(c.Ld,c.Md);c.move(b-a,{cells:(f,h,k,p)=>e.attrs(h,p).yb(f)});return e.build()}toString(){return`${this.items.map(a=>{switch(a.type){case II:const b=[];for(const [c,e]of Object.entries(a.kb))b.push(`${c}:${null!=
e?`<${e}|`:""}`);return`G{${b.join(",")}}`;case KI:return`R${a.length}`;default:throw new g(a);}}).join("")}`}},QN=new XN([],0),SN=1,ZN=class{constructor(a,b,c){this.F=a;this.D=b;this.post=c}T(a,b){return new YN(this,a,b)}forEach(a){for(const b of this.F)switch(b.type){case 0:a.l(b.length,b.changes);break;case SN:a.insert(b.length,b.changes);break;default:throw new g(b);}}map(a){return this.F.map(b=>{switch(b.type){case 0:return a.l(b.length,b.changes);case SN:return a.insert(b.length,b.changes);
default:throw new g(b);}})}equals(a){if(this===a)return!0;if(this.D!==a.D||this.post!==a.post||this.F.length!==a.F.length)return!1;for(let b=0;b<this.F.length;b++){const c=this.F[b],e=a.F[b];if(c!==e)switch(c.type){case 0:case SN:if(c.type!==e.type||c.length!==e.length||!OI(c.changes,e.changes))return!1;break;default:throw new g(c);}}return!0}toString(){return`[${this.F.map(a=>{let b;switch(a.type){case 0:b="R";break;case SN:b="I";break;default:throw new g(a);}const c=[];NI(a.changes,({r:f},h)=>{f?
c.push(`+"${h.toString()}":${null!=f.ed?`"${f.ed}"`:"null"}=>${null!=f.dd?`"${f.dd}"`:"null"}`):c.push(`-"${h.toString()}"`)});const e=c.length?`{${c.join(",")}}`:"";return`${b}${a.length}${e}`}).toString()}]`}},RN=new ZN([],0,0),KN=class{constructor(){this.F=[];this.open={};this.qj={};this.post=this.D=0}append(a,b){d(0<=b,"{} < 0",b);if(!b)return this;var c=this.qj;this.op&&this.op.type===a&&!Object.keys(c).length?this.op=Object.assign({},this.op,{length:this.op.length+b}):(null!=this.op&&this.F.push(this.op),
this.op={type:a,length:b,changes:c},this.qj={});for(const [e,f]of Object.entries(c))(c=f&&f.r)?this.open[e]=c:delete this.open[e];switch(a){case 0:this.D+=b;this.post+=b;break;case SN:this.post+=b;break;default:throw new g(a);}return this}change(a,b){if(null==a)return this;if("object"===typeof a)for(const [c,e]of Object.entries(a))this.change(c,e&&e.r);else MI(this.open[a],b)?delete this.qj[a]:this.qj[a]={r:b};return this}l(a,b,c){this.change(b,c);return this.append(0,a)}insert(a,b,c){this.change(b,
c);return this.append(SN,a)}build(){const a=this.op;null!=a&&(!Object.keys(this.open).length&&0===a.type&&[...Object.values(a.changes)].every(?(this.D-=a.length,this.post-=a.length):this.F.push(a),this.op=void 0);return new ZN(this.F,this.D,this.post)}},YN=class{constructor(a,b=0,c=0){this.i=0;this.bi={};this.input=a.F;this._next=this.i<this.input.length?this.input[this.i++]:void 0;this.Gg=Math.max(0,b-a.D,c-a.post);!this._next&&this.Gg&&(this._next=QI(this.Gg),this.Gg=0)}get Ic(){return this.bi}get next(){return this._next}ah(a,
b){const c=ha(this._next);vG(c.type===a,"{} != {}",c.type,a);d(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);for(const [e,f]of Object.entries(c.changes)){const h=f&&f.r;h?this.bi[e]=h:delete this.bi[e]}b<c.length?this._next={type:a,length:c.length-b,changes:{}}:(this._next=this.i<this.input.length?this.input[this.i++]:void 0,!this._next&&this.Gg&&(this._next=QI(this.Gg,yG(this.bi,),this.Gg=0));return c.changes}$d(a){return this.ah(0,a)}inish(){vG(!this._next)}},
MN=class{constructor(a,b){this.Kc=new KN;this.Mg={};this.Ng={};this.Rh=new Set;this.Sh={};this.rj={};this.right=a.cursor(b,{cells:(c,e,f,h,k)=>this.Kc.l(c,RI(this,e,h,f,k))})}l(a){this.right.move(a);return this}insert(a){const b=RI(this,{},{},this.right.Ld,this.right.Md);this.Kc.insert(a,b);return this}open(a,b,c){this.Rh.delete(a);a in this.Ng&&this.Ng[a]===c||(this.Sh[a]=b,this.rj[a]=c);return this}close(a){delete this.Sh[a];delete this.rj[a];a in this.Mg&&this.Rh.add(a);return this}ue(a,b){FI(a,
b,(c,e,f)=>this.open(c,e,f))}Yd(a){for(const b of Object.keys(a))this.close(b)}build(){return this.Kc.build()}},VN=class{constructor(a,b=0){this.i=0;this.xj={};this.yj={};b=Math.max(0,b-a.length);this.length=a.length+b;this.input=b?[...a.items,LI(b)]:a.items;this.pa=this.input.length?this.input[this.i++]:void 0}get head(){return this.pa}get Ld(){return this.xj}get Md(){return this.yj}md(a){var b=this.pa;if(!b||b.type!==KI)throw Error(`expected cell, found: ${b&&b.type}`);b=b.length;a=Math.min(a,b);
this.pa=a<b?LI(b-a):this.input[this.i++];return a}apply(a){FI(a.Sa,a.kb,(b,c,e)=>{null!=c&&null!=e?(this.xj[b]=c,this.yj[b]=e):(delete this.xj[b],delete this.yj[b])})}finish(){vG(!this.pa)}},WN=class{constructor(a,b,c){this.Ri=c;this.yf=0;this.T=new VN(a,b)}et Ld(){return this.T.Ld}get Md(){return this.T.Md}move(a,b){var c=this.Ri;b=c?b?{cells:iI(c.cells,b.cells)}:c:b;d(0<=a,"{} < 0",a);a=this.yf+a;for(d(a<=this.T.length,"{} > {}",a,this.T.length);this.yf<a;){c=
TI(this.T);const e=this.T.md(a-this.yf);this.yf+=e;b&&b.cells&&b.cells(e,c.Sa,this.Ld,c.kb,this.Md)}}finish,ON=class{constructor(){this.items=[];this.as={};this.wl={};this.length=this.Th=0;this.Sa={};this.kb={}}Lb(a,b,c){this.wl[a]!==c?(this.Sa[a]=b,this.kb[a]=c):(delete this.Sa[a],delete this.kb[a]);return this}attrs(a,b){FI(a,b,;return this}yb(a){0<a&&(Object.keys(this.Sa).length&&(this.length&&(this.items.push(LI(this.length)),this.length=
0),this.items.push(JI(this.Sa,this.kb)),FI(this.Sa,this.kb,(b,c,e)=>{null!=c?(this.as[b]=c,this.wl[b]=e):(delete this.as[b],delete this.wl[b])}),this.Sa={},this.kb={}),this.length+=a,this.Th+=a);return this}append(a,b=0){a.forEach(b,{grad:(c,e)=>this.attrs(c,e),yb:c=>this.yb(c)});return this}build(){for(const a of Object.keys(this.as))this.Lb(a);for(const a of Object.keys(this.Sa))this.Lb(a);Object.keys(this.Sa).length?(vG(!!this.length,"attributes still open: {}",this.Sa),this.items.push(LI(this.length)),
this.items.push(JI(this.Sa,this.kb)),this.length=0,this.Sa={},this.kb={}):this.Th-=this.length;return new XN(this.items,this.Th)}},LN=class{constructor(a,b){this.Qa=a;this.Vf=b}l(a,b,c){if(null==b)return this.Qa.l(a),this;"object"===typeof b?this.Qa.l(a,VI(this,b)):this.Qa.l(a,b,UI(this,b,c));return this}insert(a,b,c){if(null==b)return this.Qa.insert(a),this;"object"===typeof b?this.Qa.insert(a,VI(this,b)):this.Qa.insert(a,b,UI(this,b,c));return this}change(a,b){if(null==a)return this;"object"===
typeof a?this.Qa.change(VI(this,a)):this.Qa.change(a,UI(this,a,b));return this}build(){return this.Qa.build()}},PN=class{constructor(a,b){this.Qa=a;this.Vf=b}encode(a,b){return null!=b?this.Vf.encode(a,b):void 0}Lb(a,b){this.Qa.Lb(a,b,this.encode(a,b));return this}attrs(a){this.Qa.attrs(a,yG(a,(b,c)=>this.encode(c,b)));return this}yb(a){this.Qa.yb(a);return this}append(a,b){this.Qa.append(a,b);return this}build(){return this.Qa.build()}},NN=class{constructor(a,b){this.Ve=a;this.Vf=b}encode(a,b){return null!=
b?this.Vf.encode(a,b):void 0}l(a){this.Ve.l(a);return this}insert(a){this.Ve.insert(a);return this}open(a,b,c){this.Ve.open(a,b,null!=c?c:this.encode(a,b));return this}close(a){this.Ve.close(a);return this}ue(a){this.Ve.ue(a,yG(a,)}Yd(a){this.Ve.Yd(a)}build(){return this.Ve.build()}},TN=class{constructor(a,b){this.mode="apply";this.Kc=new ON;this.open=new Set;this.qg=void 0;this.Kl=!1;this.T=a.cursor(b,{cells:(c,e,f,h,k)=>{const p=WI(this,f,k);FI(e,h,(q,u,x)=>{this.open.has(q)?
d(!(null===p||void 0===p||!p.has(q)),"unexpected gradient: {}: {}",q,x):this.Kc.Lb(q,u,x)});this.Kl||this.Kc.yb(c)}})}l(a,b){d(0<a);this.qg=b;this.T.move(a);if(this.qg)throw Error("ddas not consumed");return this}insert(a,b){d(0<a);this.qg=b;"apply"===this.mode?(WI(this,this.T.Ld,this.T.Md),this.Kc.yb(a)):(this.Kl=!0,this.T.move(a),this.Kl=!1);if(this.qg)throw Error("ddas not consumed");return this}result(){for(const a of this.open)this.Kc.Lb(a,this.T.Ld[a],this.T.Md[a]);this.open.clear();this.T.move(this.T.Du);
this.T.finish();return this.Kc.build()}};var ZI=class{constructor(a,b){this.from=a;this.to=b}static from(a){if(a instanceof ZI)return a;if(Array.isArray(a)){const [b,c]=a;return new ZI(b,c)}return new ZI(a.from,a.to)},$N=class{constructor(a=new Map){this.wa=a}lice(a,b){d(0<=a&&a<=b,"invalid range: [{}, {})",a,b);const c=new Map;for(const [f,h]of this.wa){var e=b<h.from||h.to<a?void 0:new ZI(Math.max(h.from,a)-a,Math.min(h.to,b)-a);e&&c.set(f,e)}return new $N(c)}toString(){return[...this.wa].map(([a,
b])=>`"${a}":${b}`).join(",")}},aO=new $N,bO=class{ange(a,b){b?this.Og.set(a,ZI.from(b)):this.Og.delete(a);return this}wa(a){a.forEach((b,c)=>this.Og.set(c,ZI.from(b)));return this}build(){return this.Og.size?new $N(this.Og):aO}},aJ=class{constructor(a,b){this.zh=a;this.wh=b}toString(){return`${this.zh||"_"}->${this.wh||"_"}`}},dO=class{oString(){return`${cO[this.type]}${this.length}`}},cO={[0]:"R",[1]:"I"},fO=class{constructor(a,
b,c,e){this.Yg=a;this.wa=b;this.D=c;this.post=e}T(a,b){return new eO(this,a,b)}toString(){const a=this.Yg.join(""),b=[...this.wa].map(.join(",");return`{${a}|${b}}`}},gO=new fO([],new Map,0,0),hO=class{constructor(){this.F=[];this.oc=void 0;this.post=this.D=this.length=0;this.wa=new Map}append(a,b){d(0<=b,"{} < 0",b);if(!b)return this;this.oc===a?this.length+=b:(null!=this.oc&&this.F.push(new dO(this.oc,this.length)),this.oc=a,this.length=b);switch(a){case 0:this.D+=b;this.post+=
b;break;case 1:this.post+=b;break;default:throw new g(a);}return this}l(a){return this.append(0,a)}insert(a){return this.append(1,a)}createRange(a,b){b=new aJ(void 0,b&&ZI.from(b));this.wa.set(a,b);return this}ej(a){a.forEach(;return this}build(){const a=this.oc,b=this.length;0===a?(this.D-=b,this.post-=b):null!=a&&this.F.push(new dO(a,b));return this.F.length||this.wa.size?new fO(this.F,this.wa,this.D,this.post):gO}},eO=class{constructor(a,b=0,c=0){this.zf=this.ai=this.i=
0;this.input=(b=Math.max(0,b-a.D,c-a.post))?[...a.Yg,new dO(0,b)]:a.Yg;this._next=this.i<this.input.length?this.input[this.i++]:void 0}get next(){return this._next}get lo(){return this.ai}get al(){return this.zf}h(a,b){const c=ha(this._next);vG(c.type===a,"{} != {}",c.type,a);d(0<b&&b<=c.length,"{} \u2209 ({}, {}]",b,0,c.length);this._next=b<c.length?new dO(a,c.length-b):this.i<this.input.length?this.input[this.i++]:void 0}$d(a){this.ah(0,a);this.ai+=a;this.zf+=a}Mf(a){this.ah(1,
a);this.zf+=a},iO=class extends nM{constructor(){super(...arguments);this.hh=aO}Ma(){return new bO}esIdentityransform(a,b){if(this.isIdentity(a)||this.isIdentity(b))return[b,a];var c=new Map,e=new Map;const f=new Map;for(var h of cJ(a.wa,b.wa)){var k=a.wa.get(h),p=b.wa.get(h);k&&p?(d(XI(k.zh,p.zh)),f.set(h,new aJ(p.wh,k.wh))):k?c.set(h,k):p&&e.set(h,p)}k=a.T(b.D,0);p=b.T(a.D,
0);h=this.ha();const q=this.ha();var u=k.next;let x=p.next;for(;u||x;){if(u&&1===u.type)u=u.length,bJ(e,p.lo+k.ph,p.al+k.ph,u),k.Mf(u),q.l(u),h.insert(u);else if(x&&1===x.type)u=x.length,bJ(c,k.lo+p.ph,k.al+p.ph,u),bJ(f,void 0,k.al+p.ph,u),p.Mf(u),q.insert(u),h.l(u);else if(u&&x)u=Math.min(u.length,x.length),k.$d(u),p.$d(u),q.l(u),h.l(u);else throw Error(`unreachable case: ${u} x ${x}`);u=k.next;x=p.next}k.finish();p.finish();e=q.ej(e).build();c=h.ej(c).ej(f).build();xG(e.post-e.D,b.post-b.D);xG(c.post-
c.D,a.post-a.D);return[e,c]}id(){return gO}identity(){return gO}apply(a,b){if(this.isIdentity(b)||!a.wa.size&&!b.wa.size)return a;const c=this.Ma(),e=new Map(a.wa);for(const [f,h]of b.wa)d(XI(a.wa.get(f),h.zh)),e.delete(f),c.range(f,h.wh);YI(b,{insert:(f,h,k)=>{for(const [p,q]of e)h=$I(q,k,f),h!==q&&e.set(p,h)}});return c.wa(e).build()}ba(a,b){const c=a.wa,e=b.wa;return a===b||c===e?!0:c.size===e.size&&[...c.keys()].every(f=>XI(c.get(f),e.get(f)))}equals,jO=new iO;var lO=class{constructor(a,b,c){this.cells=a;this.attrs=b;this.G=c;this.length=Math.max(a.length,b.length)}zk(a){return this.cells.zk(a)}orEach(a){this.cursor(0,a).Fc(this.length)}Iblice(a,b){var c;d(0<=a&&a<=b,"invalid range: [{}, {})",a,b);if(0===a&&b>=this.length)return this;const e=this.cells.slice(a,b),f=this.attrs.slice(a,b),h=null===(c=this.G)||void 0===c?void 0:c.slice(a,b);return new lO(e,f,h)},
mO=class{constructor(a,b,c){this.Lc=a;this.Qb=b;this.Lh=c}items(a){return this.ea(a)}ea(a){this.Lc.ea(a);this.Qb.yb(a.length);return this}item(a){this.Lc.item(a);this.Qb.yb(1);return this}Qd(a){this.Lc.Qd(a);this.Qb.yb(a);return this}Lb(a,b,c){this.Qb.Lb(a,b,c);return this}attrs(a,b){this.Qb.attrs(a,b);return this}append(a,b=0){this.Lc.append(a.cells,b);this.Qb.append(a.attrs,b);return this}hj(a){var b;null===(b=this.Lh)||void 0===b?void 0:b.wa(a);return this}build(){var a;return new lO(this.Lc.build(),
this.Qb.build(),null===(a=this.Lh)||void 0===a?void 0:a.build())}},kO=class{constructor(a,b=0,c){b=Math.max(a.length,b);let e,f;this.a=a.attrs.cursor(b,{cells:(k,p,q,u,x)=>{var B=ha(e);const F=B.length;d(0<k&&k<=F);k<F?(B=B.uc(k),k=B[0],e=B[1]):(k=B,e=void 0);if(f)switch(k.type){case 0:f.O&&f.O(k.state,p,q,u,x);break;case 1:f.item&&f.item(k.state,p,q,u,x);break;case 2:f.ca&&f.ca(k.state,p,q,u,x);break;default:throw new g(k);}}});const h=k=>{e=k;var p=this.mg;f=p?c?{O:iI(p.O,c.O),item:iI(p.item,c.item),
ca:iI(p.ca,c.ca)}:p:c;this.a.move(k.length);vG(null==e);f=void 0};this.c=a.cells.cursor(b,{O:k=>h(new lN(k)),item:k=>h(new rI(k)),ca:)}get prevValue(){return this.c.prevValue}get Ld(){return this.a.Ld}get Md(){return this.a.Md}Fc(a,b){this.mg=b;this.c.Fc(a);this.mg=void 0}qe(a,b){this.mg=b;this.c.qe(a);this.mg=void 0}Ui(){this.mg=void 0;this.c.Ui();this.mg=void 0},eJ=class{constructor(a,b,c){this.jd=a;this.hd=b;this.$c=c;this.D=Math.max(this.jd.D,
this.hd.D);this.post=Math.max(this.jd.post,this.hd.post)}forEach(a){const b=this.hd.T(this.D,this.post);this.jd.forEach({l:c=>{for(;0<c;){var e=ha(b.next);switch(e.type){case SN:throw Error("op mismatch: retain|insert");case 0:e=Math.min(e.length,c);const f=b.$d(e);a.l&&a.l(e,f,b.Ic);c-=e;break;default:throw new g(e);}}},update:c=>{var e=ha(b.next);switch(e.type){case SN:throw Error("op mismatch: retain|insert");case 0:e=b.$d(1);a.update&&a.update(c,e,b.Ic);break;default:throw new g(e);}},insert:c=>
{for(;;){var e=ha(b.next);switch(e.type){case SN:e=Math.min(e.length,c.length);const f=b.Mf(e);if(e===c.length){a.insert&&a.insert(c,f,b.Ic);return}const [h,k]=c.uc(e);a.insert&&a.insert(h,f,b.Ic);c=k;break;case 0:throw Error("op mismatch: insert|retain");default:throw new g(e);}}},change:(c,e)=>{for(;;){var f=ha(b.next);switch(f.type){case SN:throw Error("op mismatch: change|insert");case 0:f=Math.min(f.length,c.length);const h=b.$d(f);if(f===c.length){a.change&&a.change(c,e,h,b.Ic);return}const [k,
p]=c.uc(f),[q,u]=e.uc(f);a.change&&a.change(k,q,h,b.Ic);c=p;e=u;break;default:throw new g(f);}}}},this.D,this.post);b.finish()}Ib(a,b){return new eJ(this.jd.Ib(a,b),this.hd,this.$c)}toString(){var a;return`${this.jd.toString()}|${this.hd.toString()}|${null===(a=this.$c)||void 0===a?void 0:a.toString()}}`}},nO=class{constructor(a,b,c){this.cells=a;this.attrs=b;this.G=c}fg(a){var b;this.cells.fg(a);this.attrs.insert(a.length,void 0);null===(b=this.G)||void 0===b?void 0:b.insert(a.length);return this}l(a,
b){var c;this.cells.l(a);this.attrs.l(a,b);null===(c=this.G)||void 0===c?void 0:c.l(a);return this}update(a){var b;this.cells.update(a);this.attrs.l(1);null===(b=this.G)||void 0===b?void 0:b.l(1);return this}expand(a){var b;this.cells.expand(a);this.attrs.insert(a);null===(b=this.G)||void 0===b?void 0:b.insert(a);return this}insert(a,b){var c;const e=dJ(a);this.cells.insert(a);this.attrs.insert(e,b);null===(c=this.G)||void 0===c?void 0:c.insert(e);return this}Od(a){var b;this.cells.Od(a);this.attrs.l(a);
null===(b=this.G)||void 0===b?void 0:b.l(a);return this}Kg(a){var b;const c=dJ(a);this.cells.Kg(a);this.attrs.l(c);null===(b=this.G)||void 0===b?void 0:b.l(c);return this}Hd(a){var b;const c=dJ(a);this.cells.Hd(a);this.attrs.l(c);null===(b=this.G)||void 0===b?void 0:b.l(c);return this}replace(a,b){var c;const e=dJ(a);this.cells.change(a,b);this.attrs.l(e);null===(c=this.G)||void 0===c?void 0:c.l(e);return this}build(){var a;return new eJ(this.cells.build(),this.attrs.build(),null===(a=this.G)||void 0===
a?void 0:a.build())}},oO=class{constructor(a,b,c){this.ea=a;this.attrs=b;this.G=c}l(a){var b;this.ea.l(a);this.attrs.l(a);null===(b=this.G)||void 0===b?void 0:b.l(a);return this}insert(a){var b;const c="string"===typeof a?a.length:1;this.ea.insert(a);this.attrs.insert(c);null===(b=this.G)||void 0===b?void 0:b.insert(c);return this}delete(a){var b;const c="string"===typeof a?a.length:1;this.ea.Hd(a);this.attrs.l(c);null===(b=this.G)||void 0===b?void 0:b.l(c);return this}opene(a){this.attrs.ue(a)}close(a){this.attrs.close(a);return this}uild(){var a;return new eJ(this.ea.build(),this.attrs.build(),null===(a=this.G)||void 0===a?void 0:a.build())}},pO=class{constructor(a,b,c){this.cells=a;this.attrs=b;this.G=c}fg(a){var b;const c=a.length;this.cells.fg(a);this.attrs.insert(c,void 0);null===(b=this.G)||void 0===b?void 0:b.insert(c);return this}l(a,b){var c;this.cells.l(a);this.attrs.l(a,b);null===(c=this.G)||void 0===c?void 0:c.l(a);
return this}update(a){var b;this.cells.update(a);this.attrs.l(1);null===(b=this.G)||void 0===b?void 0:b.l(1);return this}expand(a){var b;this.cells.expand(a);this.attrs.insert(a);null===(b=this.G)||void 0===b?void 0:b.insert(a);return this}insert(a,b){var c;const e=dJ(a);this.cells.insert(a);this.attrs.insert(e,b);null===(c=this.G)||void 0===c?void 0:c.insert(e);return this}Od(a){var b;this.cells.Od(a);this.attrs.l(a);null===(b=this.G)||void 0===b?void 0:b.l(a);return this}Kg(a){var b;const c=dJ(a);
this.cells.Kg(a);this.attrs.l(c);null===(b=this.G)||void 0===b?void 0:b.l(c);return this}Hd(a){var b;const c=dJ(a);this.cells.Hd(a);this.attrs.l(c);null===(b=this.G)||void 0===b?void 0:b.l(c);return this}replace(a,b){var c;const e=dJ(a);this.cells.change(a,b);this.attrs.l(e);null===(c=this.G)||void 0===c?void 0:c.l(e);return this}build(){var a;return new eJ(this.cells.build(),this.attrs.build(),null===(a=this.G)||void 0===a?void 0:a.build())}},qO=class{(a){this.Lc.ea(a);this.Qb.yb(a.length);return this}item(a){this.Lc.item(a);this.Qb.yb(1);return this}Qd(a){this.Lc.Qd(a);this.Qb.yb(a);return this}ttrs(a){this.Qb.attrs(a);return this}append(a,b=0){this.Lc.append(a.cells,b);this.Qb.append(a.attrs,b);return this}hj(a){var b;null===(b=this.Lh)||void 0===b?void 0:b.wa(a);return this}build(){var a;return new lO(this.Lc.build(),this.Qb.build(),null===(a=this.Lh)||void 0===a?void 0:a.build())}},
rO=class extends nM{constructor(a,b){super();this.G=b;this.cells=new BN(a);this.attrs=new UN;this.id=fJ(this)}ha(a){var b;const c=this.cells.ha(),e=null===(b=this.G)||void 0===b?void 0:b.ha();return a?new pO(c,this.attrs.ha(a),e):new nO(c,this.attrs.ha(),e)}od(a,b){var c;return new oO(this.cells.ha(),this.attrs.od(a.attrs,a.length,b),null===(c=this.G)||void 0===c?void 0:c.ha())}Ma(a){var b;const c=this.cells.Ma(),e=null===(b=this.G)||void 0===b?void 0:b.Ma();return a?new qO(c,this.attrs.Ma(a),e):
new mO(c,this.attrs.Ma(),e)}be(a,b){var c;void 0===a&&(a=this.cells.hh());void 0===b&&(b=this.attrs.hh());if(void 0===e)var e=null===(c=this.G)||void 0===c?void 0:c.hh;d(!this.G===!e);"string"===typeof a&&(a=this.cells.be(a));return new lO(a,b,e)}EjsIdentity(a){d(!this.G===!a.$c);return this.cells.isIdentity(a.jd)&&this.attrs.isIdentity(a.hd)&&(!this.G||this.G.isIdentity(a.$c))}transform(a,b){var c;d(!this.G===!a.$c);d(!this.G===!a.$c);const e=this.cells.transform(a.jd,
b.jd),f=this.attrs.transform(a.hd,b.hd),h=(null===(c=this.G)||void 0===c?void 0:c.transform(a.$c,b.$c))||[void 0,void 0];return[new eJ(e[0],f[0],h[0]),new eJ(e[1],f[1],h[1])]}identity(){return this.id}apply(a,b){var c;d(!this.G===!a.G);d(!this.G===!b.$c);return new lO(this.cells.apply(a.cells,b.jd),this.attrs.apply(a.attrs,b.hd),null===(c=this.G)||void 0===c?void 0:c.apply(a.G,b.$c))}ba(a,b){d(!this.G===!a.G);d(!this.G===!b.G);return this.cells.ba(a.cells,b.cells)&&this.attrs.ba(a.attrs,b.attrs)&&
(!this.G||this.G.ba(a.G,b.G))}equals(a){return this===a?!0:a instanceof rO?this.cells.equals(a.cells)&&this.attrs.equals(a.attrs)&&nM.equals(this.G,a.G):!1}};var sO=class{constructor(a,b){this.ea=a;this.attrs=b;this.D=Math.max(this.ea.D,this.attrs.D);this.post=Math.max(this.ea.post,this.attrs.post)}forEach(a){const b=vI.ha();this.ea.forEach({l:c=>b.l(c),insert:c=>b.insert(c),delete:c=>b.Od(c)},this.D,this.post);(new eJ(b.build(),this.attrs)).forEach({l:insert:(c,e)=>2!==c.type&&a.insert&&a.insert(c.state,e),change:(c,e,f)=>a.delete&&a.delete(c.length,f)})}};var tO=class extends rM{static ya(a){Sd(a,{_state:NL.ref,charLength:OL,O:OL,isEmpty:OL,fq:OL})}constructor(a,b,c,e){super();tO.ya(this);this.domain=b;this.Ia=c;this.No=e;this.subject=new lH;this._state=a}t isEmpty(){const a=this.charLength;return 0===a||1===a&&lI(this._state.cells)}get fq(){const a=[];this._state.forEach(Object.assign({},wI,{O:(b,c,e)=>a.push({O:b,attributes:Object.assign({},e)})}));return a}Ej(){const a=
this._state;return this.domain.attrs.od(a.attrs,a.length,this.Ia)}setAttributej(a,b){b=iJ(this,b);if(0!==b.length&&0!==Object.keys(a).length){a=HG(this.Ia,a);var c=this._state,e=this.Ej();c=c.cells.cursor(c.length,Object.assign({},wI,{O:f=>e.l(f.length),ca:f=>e.l(f)}));c.qe(b.index);c.Ui();e.ue(a);c.qe(b.length);c.Ui();e.Yd(a);jJ(this,e.build())}}d(a){const b=hJ(this._state,a);this._state=this.domain.apply(this._state,
a);this.subject.next(b)}ej(a){if(a.length){d(a.every((f,h)=>{h=a[h+1];return 0<f.length&&(null==h||f.index+f.length<=h.index)}));var b=this.od(),c=0,e=this._state.cursor();for(const {index:f,length:h}of a){const k=f+h;e.qe(f-c,Object.assign({},wI,{O:ca:q=>b.l(q)}));let p=!1;e.qe(h,Object.assign({},wI,{O:(q,u,x)=>{p||(b.ue(x),b.insert(void 0),b.Yd(x),p=!0);b.delete(q)},ca:));c=k}kH(this,b.build())}}rror(a){super.error(a);
this.subject.error(a)}estroy(a){d(this.domain.ba(this._state,a))}},uO=class{constructora(a){0<a.length&&(this.dn=a.endsWith("\n"),this.Qa.ea(a));return this}Lb(a,b){this.Qa.Lb(a,this.Ia.normalize(a,b));return this}attrs(a){this.Qa.attrs(HG(this.Ia,a));return this}build(){const a=this.Qa.build();vG(0===a.length||this.dn);return a}},gJ=class{a,
b){this.ea.l(a);this.attrs.l(a,b);return this}insert(a,b){this.ea.insert(a);this.attrs.insert(a.length,b);return this}delete(a,b){this.ea.delete(a);this.attrs.l(a,b);return this}build,vO=class{(a){this.ea.l(a);this.attrs.l(a);return this}insert(a){this.ea.insert(a);this.attrs.insert(a.length);return this}pen(a,b){this.attrs.open(a,this.Ia.normalize(a,
b));return this}uelose(a){this.attrs.close(a);return this}Yd(a){this.attrs.Yd(a)}build(){return new sO(this.ea.build(),this.attrs.build())}},wO=class extends YL{constructor(){var a=IG;super();this.Ia=a;this.No="style";this.domain=new rO(jN)}be(a){return this.domain.be(a)}Ma(){return new uO(this.domain.Ma(this.Ia),this.Ia)}od(a){a=this.domain.Ej(a,this.Ia);return new vO(this.Ia,a)}Da(a){kJ(a,this.Ia);return new tO(a,this.domain,this.Ia,this.No)}connect(a,b){return a.connect(b)}V(a){return a.state}destroy(a,
b){return a.destroy(b)}};var xO=class extends rM{static ya(a){Sd(a,{cells:NL.ref,attrs:NL.ref,G:NL.ref,hj:OL.struct,isEmpty:OL,items:OL({equals:PL.shallow}),Yp:OL})}constructor(a,b,c,e){super();xO.ya(this);this.Ia=a;this.type=b;this.domain=c;this.Sk=new lH;ha(c.G);this.cells=e.cells.Ib(f=>this.bf(f));this.attrs=e.attrs;this.G=ha(e.G);e.attrs.forEach(0,{grad:f=>GG(a,f)})}get hj(){return this.G.wa}get isEmpty(){const a=this.cells.Xd;return 0===this.cells.Ak&&(0===a||1===a&&lI(this.cells))}get items(){const a=new Set;this.cells.forEach(0,
{item:b=>a.add(b.mutable)});return a}get Yp(){return 4E3>this.cells.Xd?Math.pow(2,Math.ceil(Math.log(this.cells.Xd)/Math.log(2))):1E3*Math.round(this.cells.Xd/1E3)}d(){var a;return new oO(new AN(()=>!0),this.domain.attrs.od(this.attrs,this.cells.length,this.Ia),null===(a=this.domain.G)||void 0===a?void 0:a.ha())}bf(a){const {mutable:b,eg:c,qc:e}=mH(this.type,a),f={mutable:b,to:c,from:jH(this,e.pipe(xH(h=>{a:{var k=0;for(const p of this.cells.Ya){if(1===
p.type&&p.state===f)break a;k+=p.length}k=-1}vG(0<=k,"cell not found");return this.domain.ha().l(k).update(h).build()}))),toString:()=>`${b}`};return f}Yj(a,b){nH(this.type,b,a.from,a.to,a.mutable)}vk(a,b){a=a.resolve(this.cells);d(0<=a&&a<=Math.max(0,this.cells.length-1),"Position {} is not in range [0, {}]",a,Math.max(0,this.cells.length-1));a===this.cells.length&&d("string"===typeof b&&b.endsWith("\n"));kH(this,this.domain.ha().l(a).insert(b).build());if("string"!==typeof b){b=this.cells.zk(a);
if(null==b||"string"===typeof b)throw Error(`item expected at ${a}, found: ${b}`);return b.mutable}}cursor(a,b){return(new lO(this.cells,this.attrs,this.G)).Ib(c=>c.mutable).cursor(a,b)}forEach(a){(new lO(this.cells,this.attrs,this.G)).forEach(Object.assign({},a,{item:(b,c,e,f,h)=>a.item(b.mutable,c,e,f,h)}))}zd(a){var b=a.jd,c=a.hd;a=a.$c;const e=new rN,f=new AN(q=>q),h=this.cells.T(b.D);for(b=b.T(this.cells.length,0);;){let q=h.head;var k=b.head;if(!k)break;if(2===k.type)q=void 0,k=pI(b);else if(q){var p=
Math.min(q.length,k.sd);q=h.md(p);k=qI(b,p)}if(2===k.type)q=k.state.Ib(u=>this.bf(u)),e.region(q),f.fg(q);else if(q)switch(k.type){case 0:e.region(q);f.l(k.length);break;case 1:d(1===q.type);q.state.to.next(k.fa);e.region(q);f.l(1);break;case 3:p=k.oldState;k=k.newState;1===q.type?(d(q.type===p.type,"{} != {}",q.type,p.type),this.Yj(q.state,p.state)):sI(this.domain.cells,q,p);p=q;q=k.Ib(u=>this.bf(u));e.region(q);oI(f,p,q);break;default:throw new g(k);}else throw Error("reader exhausted prematurely");
}h.finish();b.finish();this.cells=e.build();this.attrs=this.domain.attrs.apply(this.attrs,c);this.G=this.domain.G.apply(this.G,ha(a));c=new eJ(f.build(),c,a);this.Sk.next(c)}complete(){super.complete();this.Sk.complete()}error(a){super.error(a);this.Sk.error(a)}destroy(a){d(this.domain.ba(this.V(),a))}V(){return(new lO(this.cells,this.attrs,this.G)).Ib(}},zO=class extends YL{constructor(){var a=LG,b=yO;super();this.Ia=a;this.type=b;this.domain=new rO(this.type.domain,jO)}be(a){return this.domain.be(a)}ha(){return this.domain.ha(this.Ia)}d(a){return a}Daonnect(a,b){return this.Vd(a).connect(b)}create(a){return this.Vd(super.create(a))}destroy(a,b){return this.Vd(a).destroy(b)}V(a){return this.Vd(a).V()}};var AO=class extends nM{constructor(a){super();this.Ja=a}isIdentity(a){return this.Ja[a.key].isIdentity(a.value)}transform(a,b){var c=a.key;xG(c,b.key);const [e,f]=this.Ja[c].transform(a.value,b.value);return[{key:c,value:e},{key:c,value:f}]}identity(a){return{key:a.key,value:this.Ja[a.key].identity(a.value)}}apply(a,b){var c=a.key;xG(c,b.key);return{key:c,value:this.Ja[c].apply(a.value,b.value)}}ba(a,b){return a.key===b.key&&this.Ja[a.key].ba(a.value,b.value)}equals(a){if(this===a)return!0;const b=
this.Ja,c=a.Ja;a=Object.keys(b);const e=Object.keys(c);return a.length===e.length&&a.every(f=>f in c&&b[f].equals(c[f]))}};var BO=class extends nM{constructor(a,b){super();this.Ja=a;this.Rf=b;this.rf=new AO(this.Ja)}isIdentity(a){return this.rf.isIdentity(a)}transform(a,b){return this.rf.transform(a,b)}identitypply(a,b){return this.rf.apply(lJ(this,a),b).value}ba(a,b){return this.rf.ba(lJ(this,a),lJ(this,b))}equals(a){return this===a||a instanceof BO&&this.rf.equals(a.rf)}};var mJ=class extends YL{constructor(a,b,c){super();this.Re=a;this.Rf=b;this.bk=c;this.domain=new BO(VG(this.Re),this.Rf)}create(a,b,c){const e=this.Rf(a);return this.Re[e].create(a,b,c)}Da(a){const b=this.Rf(a);return this.Re[b].Da(a)}connect(a,b){const c=this.bk(a);return this.Re[c].connect(a,b.pipe(xH(e=>{d(e.key===c);return e.value}))).pipe(xH()}V(a){const b=this.bk(a);return this.Re[b].V(a)}destroy(a,b){const c=this.bk(a),e=this.Rf(b);d(c===e);this.Re[c].destroy(a,b)}};var CO=class extends nM{sIdentity(){return!0}dentity(){return 1}apply(){return 1}ba(){return!0}equals(a){return this===a||a instanceof CO}},DO=new CO;var EO=class extends YL{constructor(){super(...arguments);this.domain=DO}Da(a){return a}connect(a,b){return b.pipe(KL(()=>!1))}V(a){return a}destroy(){}};new EO;var FO=new Map,GO=class extends nM{constructor(){super()}isIdentity(a){return!a.size||Array.from(a.values()).every(}transform(a,b){return[b,a]}identity(){return FO}apply(a,b){if(a.size){if(b.size){var c=new Map;for(const [f,h]of a){var e=b.get(f)||0;(e=h+e)&&c.set(f,e)}for(const [f,h]of b)a.has(f)||c.set(f,h);a=c}}else a=b;return a}quals(a){return this===a||a instanceof GO}};var HO=class extends rM{static ya(a){Sd(a,{values:OL.struct})}constructor(a,b){super();HO.ya(this);this.domain=a;this.map=new QL(b)}zd(a){for(const [b,c]of a)(a=(this.map.get(b)||0)+c)?this.map.set(b,a):this.map.delete(b)}V(){return new Map(this.map)}add(a){const b=this.map.get(a)||0;0<b||kH(this,new Map([[a,-b+1]]))}delete(a){const b=this.map.get(a)||0;b&&kH(this,new Map([[a,-b]]))}has(a){return 0<(this.map.get(a)||0)}get values(){return[...pJ(this.map,.keys()]}[Symbol.iterator](){return this.values[Symbol.iterator]()}},
IO=class extends YL{a(a){return new HO(this.domain,a)}connect(a,b){return a.connect(b)}V(a){return a.V()}destroy(a,b){d(this.domain.ba(a.V(),b))}},JO=new IO;var KO=new GN,LO=new GN,MO=new GN,NO=new GN,OO=new GN,PO=new GN,QO=new GN,RO=new GN,SO=new GN,TO=new GN,UO=new GN,VO=new GN;var WO={switch:RO,layout:SO,rect:TO,shape:UO,text:VO};U({values:{type:Q("text")},K:{text:VO}});var XO=nJ(WO,a=>a.type,a=>a.type),YO=AH(XO),ZO=U({K:{config:PO,cells:YO},attributes:{direction:T(Q(1,2))}}),$O=U({K:{layout:ZO,fill:NO,border:OO,Ud:qH(MO)},attributes:{padding:HM}}),BK=class extends Error{constructor(){super("Layout Elements are currently not supported.")}};var aP=uJ(parseFloat,sJ(/^(?:\.\d+|\d+(?:\.\d*)?)(?:[eE][-+]?\d+)?/)),bP=uJ((a,b)=>("-"===a?-1:1)*b,sJ(/^[-+]?/),aP),cP=uJ(sJ(/^[01]/)),dP=sJ(/^(?:\s+,?\s*|,\s*)/),eP=sJ(/^\s*,?\s*/),fP=sJ(/^\s*/),gP=uJ((a,b)=>b,eP,bP),hP=()=>!0,qJ=function(a){const b=a.pp,c=a.sp,e=a.Jp,f=a.Gp,h=a.Lp,k=a.lp,p=a.Cp,q=a.zp,u=a.xp,x=a.Mp,B=a.qp,F=a.Ip,N=a.Fp,O=a.Kp,X=a.kp,R=a.mp,ba=a.Ep;var ia=uJ((Y,ra,Ga)=>b(Y,Ga),bP,eP,bP),la=uJ((Y,ra)=>ra,eP,ia);a=uJ((Y,ra,Ga,cb)=>p(vJ(Y),Ga,...cb),sJ(/^[Mm]/),
fP,ia,tJ(la));const oa=uJ((Y,ra,Ga,cb)=>q(vJ(Y),Ga,...cb),sJ(/^[Ll]/),fP,ia,tJ(la)),na=uJ((Y,ra,Ga,cb)=>u(vJ(Y),Ga,...cb),sJ(/^[Hh]/),fP,bP,tJ(gP)),Ja=uJ((Y,ra,Ga,cb)=>x(vJ(Y),Ga,...cb),sJ(/^[Vv]/),fP,bP,tJ(gP));la=uJ((Y,ra,Ga,cb,sj)=>c(Y,Ga,sj),ia,eP,ia,eP,ia);const Oa=uJ((Y,ra,Ga,cb)=>B(vJ(Y),Ga,...cb),sJ(/^[Cc]/),fP,la,tJ(uJ((Y,ra)=>ra,eP,la)));la=uJ((Y,ra,Ga)=>e(Y,Ga),ia,eP,ia);const xa=uJ((Y,ra,Ga,cb)=>F(vJ(Y),Ga,...cb),sJ(/^[Ss]/),fP,la,tJ(uJ((Y,ra)=>ra,eP,la)));la=uJ(ia,
eP,ia);const La=uJ((Y,ra,Ga,cb)=>N(vJ(Y),Ga,...cb),sJ(/^[Qq]/),fP,la,tJ(uJ((Y,ra)=>ra,eP,la)));la=uJ(Y=>h(Y),ia);const ub=uJ((Y,ra,Ga,cb)=>O(vJ(Y),Ga,...cb),sJ(/^[Tt]/),fP,la,tJ(uJ((Y,ra)=>ra,eP,la)));ia=uJ((Y,ra,Ga,cb,sj,S4,ZT,T4,$T,U4,aU)=>k(Y,Ga,sj,ZT,$T,aU),aP,eP,aP,eP,bP,dP,cP,eP,cP,eP,ia);const Fc=uJ((Y,ra,Ga,cb)=>X(vJ(Y),Ga,...cb),sJ(/^[Aa]/),fP,ia,tJ(uJ((Y,ra)=>ra,eP,ia))),fe=uJ(sJ(/[Zz]/));return{moveTo:a,lineTo:oa,u9:na,mpa:Ja,yB:Oa,zla:xa,Kga:La,Ala:ub,arcTo:Fc,closePath:fe,
path:uJ(Y=>ba([].concat(...Y)),tJ(uJ((Y,ra)=>ra,fP,uJ((Y,ra)=>[Y,...ra],a,tJ(uJ(fP,Y=>{if(Y)switch(Y[0].toUpperCase()){case "L":return oa(Y);case "H":return na(Y);case "V":return Ja(Y);case "C":return Oa(Y);case "S":return xa(Y);case "Q":return La(Y);case "T":return ub(Y);case "A":return Fc(Y);case "Z":return fe(Y)}}))))))}}({pp:hP,sp:hP,Jp:hP,Gp:hP,Lp:hP,lp:hP,Cp:hP,zp:hP,xp:hP,Mp:hP,qp:hP,Ip:hP,Fp:hP,Kp:hP,kp:hP,mp:hP,Ep:hP});var lK=class extends Error{constructor(){super("SheetPages, SheetElements and SheetItems are currently not supported.")}},iP=AH(new ZM(aM)),jP=eH(/^#[0-9a-f]{6}$/),kP=cH({af:$G(gM)}),lP=U({attributes:{format:BM,ke:T(bM),fe:T(bM)}}),mP=U(lP,{values:{type:Q("NUMBER_PILL")}}),nP=U(lP,{values:{type:Q("NUMBER_TEXT")}}),oP=U({values:{type:Q("NUMBER_RANGE")},attributes:{min:DM,max:DM,step:DM}}),pP=U({values:{type:Q("BOOLEAN_CHECKBOX")}}),qP=U({attributes:{value:BM,color:S(jP)}}),rP=U({values:{type:Q("PLAINTEXT_SELECT")},
K:{options:hI(qP)}}),sP=U({values:{type:Q("PLAINTEXT_COLOR")}}),tP=U({values:{type:Q("PLAINTEXT_MENTION")},attributes:{user:BM,brand:BM}}),uP=nJ({NUMBER_PILL:mP,NUMBER_TEXT:nP,NUMBER_RANGE:oP,BOOLEAN_CHECKBOX:pP,PLAINTEXT_SELECT:rP,PLAINTEXT_COLOR:sP,PLAINTEXT_MENTION:tP},a=>a.type,a=>a.type),vP=cH({Os:aM,K:bH(aM,aM)}),wP=U({values:{type:Q("FORMULA")},attributes:{value:S(vP)}}),xP=U({values:{type:Q("BOOLEAN")},attributes:{value:CM}}),yP=U({values:{type:Q("NUMBER")},attributes:{value:DM}}),zP=U({values:{type:Q("PLAINTEXT")},
attributes:{value:BM}}),AP=U({values:{type:Q("TEXT2")},attributes:{ia:S(kP)},K:{value:KO}}),BP=U({values:{type:Q("TEXT3")},K:{value:LO}}),CP={FORMULA:wP,BOOLEAN:xP,NUMBER:yP,PLAINTEXT:zP};nJ(CP,a=>a.type,a=>a.type);
var DP=nJ(Object.assign({},CP,{TEXT2:AP}),a=>a.type,a=>a.type),EP=nJ(Object.assign({},CP,{TEXT3:BP}),a=>a.type,a=>a.type),FP=nJ(Object.assign({},CP,{TEXT2:AP}),a=>a.type,a=>a.type),GP=a=>U({K:{content:tH(qH(a)),format:tH(qH(uP))}}),HP=$G(jM,a=>0<a.length&&4>=a.length),IP=$G(jM,a=>0<a.length&&4>=a.length),JP=$G(jP,a=>0<a.length&&4>=a.length),KP=U({attributes:{backgroundColor:S(jP),padding:S(HP),hb:S(IP),borderColor:S(JP)}}),LP=AH(KP),MP=U({values:{id:aM},attributes:{height:GM,minHeight:GM}}),NP=U({values:{id:aM},
attributes:{width:GM}}),OP=hI(MP),PP=hI(NP),QP=a=>U({values:{Gb:aM},K:{Sd:AH(a),Dd:iP,Cd:LP,rows:OP,columns:PP},attributes:{direction:S(Q(1,2))}}),RP=QP(GP(DP)),SP=QP(GP(EP)),UP=QP(GP(FP)).map(a=>a,a=>a,a=>a,a=>a,a=>TP(a),a=>a.base),VP=Object.freeze({backgroundColor:"#ffffff",padding:[4],hb:[0,0,1,1],borderColor:["#d9d9d9"]}),TP=a=>new Proxy(new WP(a),{get:(b,c)=>c in b?b[c]:a[c],set:(b,c,e)=>{c in b?b[c]=e:a[c]=e;return!0}}),YP=a=>new Proxy(new XP(a),{get:(b,c)=>c in b?b[c]:a[c],set:(b,c,e)=>{c in
b?b[c]=e:a[c]=e;return!0}}),ZP=class{static ya(a){Sd(a,{span:OL({equals:PL.shallow}),content:OL,format:OL})}constructoret span(){var a=this.ze(this.kd,this.Jc),b=a?this.Bq(a):void 0;const c=b&&this.ze(b.kd,b.Jc);if(null==b||null==c||a!==c)return{Io:this.kd,ss:this.kd,columns:new Set([this.kd]),Jo:this.Jc,us:this.Jc,rows:new Set([this.Jc])};var e=b.kd;b=b.Jc;for(a=[];null!=e&&c===this.ze(e,b);e=this.sheet.cols.next(e))a.push(e);
e=[b];for(let f=this.sheet.rows.next(b);null!=f&&a.every(;f=this.sheet.rows.next(f))e.push(f);return{Io:a[0],ss:a[a.length-1],columns:new Set(a),Jo:e[0],us:e[e.length-1],rows:new Set(e)}}get content(){const a=this.ze(this.kd,this.Jc);return a?a.content.ref:void 0}get format(){const a=this.ze(this.kd,this.Jc);return a?a.format.ref:void 0}},$P=class{static ya(a){Sd(a,{wm:OL,Bo:OL})}constructor(a){$P.ya(this);this.base=a;this.cells=new aQ(this);this.attrs=new bQ(this);this.Ru=SL(b=>
{if(0===b)return this.rows.first();if(!(b>=this.rows.count()))return(b=this.Ru(b-1))&&this.rows.next(b)});this.Fq=SL(b=>{if(0===b)return this.cols.first();if(!(b>=this.cols.count()))return(b=this.Fq(b-1))&&this.cols.next(b)});this.mb=SL(b=>(b=fI(this.cols,b))?this.mb(b)+b.width:0);this.fb=SL(b=>(b=fI(this.rows,b))?this.fb(b)+b.height:0)}get Gb(){return this.base.Gb}get cols(){return this.base.columns}get wm(){const a=new Map;for(const b of this.cols)a.set(b.id,b);return a}get rows(){return this.base.rows}get Bo(){const a=
new Map;for(const b of this.rows)a.set(b.id,b);return a}get direction(){return this.base.direction},WP=class extends $P{static ya(a){Sd(a,{width:OL,height:OL})}constructor(...a){super(...a);WP.ya(this)}get width(){return this.cols.reduce((a,b)=>a+b.width,0)}set width(a){vG(0<a);a/=this.width;for(const b of this.cols)b.width*=a}get height(){return this.rows.reduce((a,b)=>a+b.height,0)}set height(a){vG(0<a);a/=this.height;for(const b of this.rows)b.height*=a}},
XP=class extends $P{static ya(a){Sd(a,{minWidth:OL})}constructor(...a){super(...a);XP.ya(this)}get minWidth(){return this.cols.reduce((a,b)=>a+b.width,0)}set minWidth(a){vG(0<a);a/=this.minWidth;for(const b of this.cols)b.width*=a}et minHeight(a){vG(0<a);a/=this.minHeight;for(const b of this.rows)b.height*=a}},aQ=class{static yaonstructor(a){aQ.ya(this);this.sheet=a;this.tm=TL((b,c)=>new ZP(this.ze,this.Ku,this.sheet,
b,c));SL(b=>new cQ(this,this.sheet.cols,b));this.ze=(b,c)=>(b=this.sheet.base.Dd.get(`${b.id}:${c.id}`))?this.sheet.base.Sd.get(b):void 0;this.Ku=SL(b=>{if(b=this.Po.get(b)){const [c,e]=b.split(":");b=this.sheet.wm.get(c);const f=this.sheet.Bo.get(e);return b&&f&&{kd:b,Jc:f}}})}lk(a,b){const c=this.tm(a,b);if(c.span.Io===a&&c.span.Jo===b)return c}map(a){const b=[];for(const c of this)b.push(a(c));return b}flatMap(a){return this.map(a).flat(1)}forEach(a){for(const b of this)a(b)}*[Symbol.iterator](){const a=
new Set;for(const b of this.sheet.rows)for(const c of this.sheet.cols){const e=this.sheet.base.Dd.get(`${c.id}:${b.id}`);null==e||a.has(e)||(a.add(e),yield this.tm(c,b))}}get Po(){const a=new Map;for(const c of this.sheet.rows)for(const e of this.sheet.cols){const f=`${e.id}:${c.id}`;var b=this.sheet.base.Dd.get(f);b=b?this.sheet.base.Sd.get(b):void 0;null!=b&&(a.has(b)||a.set(b,f))}return a}},cQ=class{constructor(a,b,c){this.cells=a;this.cols=b;this.Jc=c}ap(a){const b=
[];for(const c of this)b.push(a(c));return b}orEach(a){for(const b of this)a(b)}*[Symbol.iterator](){for(const a of this.cols){const b=this.lk(a);b&&(yield b)}}},bQ=class{constructor(a){this.sheet=a;this.get=TL((b,c)=>this.T.get(b,c),{equals:PL.shallow})}get T(){if(this.ci)return this.ci;const a=new dQ(this.sheet.base);this.ci=a;setTimeout(()=>{this.ci===a&&(this.ci=void 0)});return a}set(a){return this.T.set(a)}},dQ=class{constructor(a){this.sheet=a;this.de=
ha(a.columns.first());this.ee=ha(a.rows.first())}get(a,b){wJ(this,a,b);return(a=this.sheet.Cd.get(`${a.id}:${b.id}`))?KP.V(a):Object.assign({},VP)}set(a){for(const {kd:b,Jc:c,attrs:e}of a){wJ(this,b,c);a=`${b.id}:${c.id}`;const f=this.sheet.Cd.get(a);if(f)for(const [h,k]of Object.entries(e))f[h]=k;else this.sheet.Cd.set(a,Object.assign({},VP,e))}}};var eQ=nJ({group:QO,layout:SO,rect:TO,shape:UO,text:VO},a=>a.type,a=>a.type),fQ=U({values:{id:aM},K:{element:eQ}}),gQ=hI(fQ),hQ=U({K:{Re:gQ},attributes:{BB:BM}}),rK=var iQ=/^#[0-9a-f]{6}$/,jQ=/^$|^(https?|ftp|tel|mailto):(\/\/|[^/])[^ ]+(\/|$)|^[^: ]+(\/|$)|^[\w.]+:\d+(\/|$)/,kQ={"font-weight":SG("inline","normal thin extralight light medium semibold bold ultrabold heavy".split(" ")),"font-style":SG("inline",["normal","italic"]),color:QG("inline",iQ,"#000000"),decoration:SG("inline",["none","underline"]),strikethrough:SG("inline",["none","strikethrough"]),kerning:OG("inline",{min:-1E3,max:1E3,ne:"fixed"}),link:QG("inline",jQ,""),"font-family":QG("block",/^Y[A-Za-z0-9_-]{10},\d+$/,
"YACgEZ1cb1Q,0"),"font-size":OG("block",{min:0,defaultValue:16,ne:"fixed"}),leading:OG("block",{min:500,max:2500,defaultValue:1400,ne:"fixed"}),spacing:OG("block",{min:0,max:5E3,ne:"fixed"}),direction:SG("block",["ltr","rtl"]),tracking:OG("block",{min:-200,max:800,ne:"fixed"}),"text-transform":SG("block",["none","uppercase"]),"text-align":SG("block",["start","center","end","justify"]),"head-indent":OG("block",{min:0,ne:"fixed"}),"list-marker":SG("block","none disc circle square decimal lower-alpha lower-roman".split(" ")),
"list-level":new VL({min:0}),style:SG("block","body pretitle title subtitle heading1 heading2 heading3 details caption header footer".split(" "))},IG=UG(kQ,{}),lQ="normal thin extralight light medium semibold bold ultrabold heavy".split(" "),mQ=/^Y[A-Za-z0-9_-]{10},\d+$/,nQ=["normal","italic"],oQ=["none","underline"],mK={fontFamily:QG("inline",mQ,"YACgEZ1cb1Q,0"),fontSize:OG("inline",{min:0,defaultValue:16,units:"px"}),fontWeight:SG("inline",lQ),fontStyle:SG("inline",nQ),color:QG("inline",iQ,"#000000"),
Oc:SG("inline",oQ),Mo:SG("inline",["none","strikethrough"]),link:QG("inline",jQ,""),letterSpacing:OG("inline",{min:-.2,max:.8,units:"em"}),lineHeight:OG("block",{min:.5,max:2.5,defaultValue:1.4}),direction:SG("block",["ltr","rtl"]),textAlign:SG("block",["start","center","end","justify"]),Kn:SG("block","none disc circle square decimal lower-alpha lower-roman checked unchecked".split(" ")),Jn:new VL({min:0}),marginInlineStart:new VL({min:0,max:200,units:"px"}),textIndent:new VL({min:0,max:32,units:"px"}),
Ml:QG("inline",/^$/,""),Nl:QG("inline",/^$/,""),Ol:QG("inline",/^$/,"")},LG=UG(mK,{Pj:QG("inline",/^(K[a-zA-Z0-9_-]{10}|)$/,"")});Object.keys({Pj:0});var pQ=Q(1,3,2,4),qQ=cH({id:aM,version:gM}),rQ=ZG(a=>Number.isFinite(a)&&0<=a&&1>=a),sQ=ZG(a=>-1<=a&&1>=a),tQ=ZG(a=>Number.isFinite(a)&&-180<=a&&180>=a),uQ=ZG(a=>Number.isFinite(a)&&0<=a&&100>=a),vQ=ZG(a=>Number.isFinite(a)&&-100<=a&&100>=a),wQ=S(rQ);S(sQ);
var xQ=S(tQ),yQ=S(uQ),zQ=S(vQ),AQ=AH(new ZM(aM)),BQ=S(Q(1,2,3)),CQ=cH({Lv:aM}),DQ=cH({Z:yM,mask:qH(CQ)}),EQ=cH({Z:yM,mask:qH(CQ),reverse:uM}),FQ=cH({Tm:$G(dM),Um:$G(dM),Rm:$G(gM),easing:Q(1,2,3,4,5),Z:xM,Zn:cM}),GQ=cH({Cb:vM,scale:vM,direction:qH(Q(1,2,3,4,5)),Ro:qH(Q(1,2,3,4,5)),color:tM,Dc:qH(DQ),Gc:qH(EQ),$l:qH(FQ)}),HQ=U({values:{type:Q("NONE")},attributes:{}}),IQ=U({values:{type:Q("SEQUENCED")},attributes:{animation:EM,rb:T(GQ)}}),JQ=U({values:{type:Q("INDEPENDENT")},attributes:{animation:EM,
rb:T(GQ)}}),KQ=nJ({NONE:HQ,SEQUENCED:IQ,INDEPENDENT:JQ},a=>a.type,a=>a.type),LQ=cH({Cb:sQ,direction:Q(1,2)}),MQ=cH({Cb:sQ,vu:cM}),NQ=cH({Cb:sQ,direction:Q(1,2)}),OQ=cH({Cb:sQ}),PQ=U({attributes:{rotate:T(LQ),rn:T(MQ),po:T(NQ),jp:T(OQ)}}),QQ=cH({zm:cM}),RQ=cH({text:aM,Gm:cM}),SQ=U({attributes:{top:DM,left:DM,width:GM,height:GM,rotation:xQ,ma:wQ,Wb:NM,Z:NM,link:T(eH(jQ)),locked:CM,xc:T(QQ),ob:CM,ic:JM,altText:T(RQ),Af:JM,P:IM,anchor:JM},K:{Cg:JO,hc:AQ,animation:tH(qH(KQ)),wg:tH(qH(PQ))}}),TQ=cH({top:fM,
left:fM,width:jM,height:jM,rotation:tQ}),UQ=cH({id:aM,Cb:fM}),VQ=U({attributes:{we:T(UQ),brightness:zQ,contrast:zQ,saturation:zQ,Qh:zQ,Gl:yQ,blur:zQ,Ul:zQ,Ql:zQ,$g:yQ,Wh:yQ,mh:zQ,Mh:zQ,vj:yQ,ik:yQ}}),WQ=eH(iQ),XQ=qH(WQ),YQ=S(XQ),ZQ=tH(qH(VQ)),$Q=Q(1,2,3),aR=U({values:{direction:Q(1,2)},attributes:{position:DM,locked:CM}}),bR=hI(aR),cR=U({values:{media:qQ},K:{filter:ZQ},attributes:{kg:T($Q),Qf:T(qQ),Sb:T(TQ),ma:wQ,Ub:S(bH(WQ,WQ)),altText:T(RQ)}}),dR=tH(qH(cR)),eR=cH({Wb:jM,fk:jM}),fR=U({values:{video:aM,
Lg:qH($Q)},K:{filter:ZQ},attributes:{Sb:S(TQ),ma:wQ,Ub:S(bH(WQ,WQ)),altText:T(RQ),trim:T(eR),tg:S(Q(1,2)),autoplay:CM,playbackRate:T(gH(.25,4)),volume:S(gH(0,1))}}),gR=tH(qH(fR)),hR=cH({top:fM,left:fM}),iR=cH({color:WQ,ma:rQ,position:fM},a=>-1<=a.position&&2>=a.position),jR=S($G(iR,a=>2<=a.length&&a.every((b,c,e)=>0===c||e[c-1].position<=b.position))),kR=U({values:{type:Q("LINEAR")},attributes:{Bl:jR,rotation:xQ}}),lR=U({values:{type:Q("RADIAL")},attributes:{Bl:jR,center:S(hR)}}),mR=nJ({LINEAR:kR,
RADIAL:lR},a=>a.type,a=>a.type),nR=tH(qH(mR)),dK=U({K:{image:dR,video:gR,dg:nR},attributes:{Sf:KM,color:YQ,ma:wQ,locked:CM,ob:CM,ic:JM,la:JM,flipX:CM,flipY:CM}});NO.ec(dK);var oR=$G(ZG(a=>Number.isInteger(a)&&0<a&&10>=a),a=>10>=a.length),pR=S(oR),YJ=U({K:{fill:dK},attributes:{weight:GM,color:YQ,zb:pR,kc:CM}}),qR=U(SQ,{values:{type:Q("rect")},K:{fill:dK,stroke:tH(qH(YJ))},attributes:{L:HM}});TO.ec(qR);yJ=__c.yJ=new wO;KO.ec(yJ);
var rR=cH({af:$G(gM)}),sR=S(rR),tR=S(ZG(a=>/^\$\d:[a-zA-Z0-9_-]+$/.test(a)||rJ(a))),uR=U({K:{fill:dK,stroke:tH(qH(YJ))},attributes:{d:tR,L:GM}}),vR=hI(uR),wR=cH({top:fM,left:fM,height:jM,width:jM}),xR=S(wR),yR=qH(Q(1,2)),zR=U({values:{horizontal:yR,vertical:yR},attributes:{source:xR,sv:NM,rv:NM}}),AR=U({K:{text:yJ},attributes:{box:xR,ia:sR,Ac:BQ,Tg:HM,la:JM}}),BR=hI(AR),CR=U({values:{type:Q("BLOCK")},attributes:{minBlockSize:GM}}),DR=nJ({BLOCK:CR},a=>a.type,a=>a.type),ER=cH({jr:cM,dr:cM}),FR=U(SQ,
{values:{type:Q("shape")},K:{Ch:vR,slice:qH(zR),wc:BR,resizeMode:qH(DR)},attributes:{viewBox:xR,Uf:T(ER)}});UO.ec(FR);var GR=cH({text:aM,style:tM}),HR=U({values:{type:aM},K:{parameters:AH(new ZM(aM))}}),IR=hI(HR),JR=U({K:{Bc:IR}}),KR=U(SQ,{values:{type:Q("text")},K:{text:yJ,Bc:tH(qH(JR))},attributes:{ia:sR,X:NM,W:NM,placeholder:T(GR),Gf:KM,Pb:S(Q(1,2,3)),writingMode:T(Q(1,2,3)),ug:T(Q(1,2)),la:JM}});VO.ec(KR);
var LR=U(SQ,{values:{type:Q("embed"),url:aM},attributes:{X:GM,W:GM}}),MR=cH({hi:aM,top:rQ,left:rQ,jo:qH(Q(1,2))}),NR=U({attributes:{marker:T(Q(1,2,3,4,5,6,7,8,9)),anchor:T(MR),position:T(hR)}}),OR=U({values:{direction:Q(1,2)},attributes:{position:DM}}),PR=hI(OR),QR=U({values:{type:Q("ELBOWED")},K:{mc:PR},attributes:{L:GM}}),RR=U({values:{type:Q("CURVED")},attributes:{depth:DM,Nh:DM}}),SR=nJ({ELBOWED:QR,CURVED:RR},a=>a.type,a=>a.type),VR=class extends YL{constructor(){var a=TR;super();this.type=a;
this.domain=a.domain}get(a,b,c){return b===UR?a:this.handler&&this.handler.get?this.handler.get(a,b,c):Reflect.get(a,b,c)}Da(a){return new Proxy(this.type.Da(a),this)}connect(a,b){return this.type.connect(a,b)}destroy(a,b){this.type.destroy(a[UR],b)}V(a){return this.type.V(a[UR])}},UR=Symbol("target"),WR=U({K:{text:yJ},attributes:{width:GM,height:GM,position:wQ,orientation:S(Q(1,2)),Pb:S(Q(1,2,3)),la:JM}}),YR=hI(WR),TR=U(SQ,{values:{type:Q("line")},K:{start:NR,end:NR,fill:dK,ag:tH(qH(SR)),wc:YR},
attributes:{weight:EM,color:YQ,zb:pR,kc:CM}}),ZR=new VR,$R=nJ({line:ZR,rect:qR,shape:FR,text:KR,embed:LR},a=>a.type,a=>a.type),aS=hI($R),bS=$G($G(eH(/^[a-zA-Z][a-zA-Z0-9_-]*$/)),a=>{if(0===a.length||0===a[0].length||!a.every()return!1;const b=new Map;for(let c=0;c<a.length;c++)for(let e=0;e<a[c].length;e++){const f=a[c][e],h=b.get(f);h?b.set(f,{count:h.count+1,xf:Math.min(h.xf,e),Tl:Math.max(h.Tl,e+1),oa:Math.min(h.oa,c),xa:Math.max(h.xa,c+1)}):b.set(f,{count:1,xf:e,Tl:e+
1,oa:c,xa:c+1})}return Array.from(b.values()).every(({count:c,xf:e,Tl:f,oa:h,xa:k})=>c===(f-e)*(k-h))}),cS=$G(qH(eH(/^[0-9]+(\.[0-9]+)?fr$/))),dS=cH({ka:bS,Jf:cS,Ag:cS,If:jM,Bg:jM},a=>a.Ag.length===a.ka.length&&a.Jf.length===a.ka[0].length),eS=U({K:{fill:dK,stroke:tH(qH(YJ))},attributes:{L:HM}}),fS=AH(eS),gS=U(SQ,{values:{type:Q("grid")},K:{cells:fS},attributes:{layout:S(dS)}}),hS=U({K:{li:AQ},attributes:{height:GM,minHeight:GM}}),iS=U({values:{id:aM},attributes:{width:GM}}),jS=hI(hS),kS=hI(iS),lS=
U({attributes:{fb:NM,xb:NM,mb:NM,Bb:NM}}),mS=cH({color:XQ}),nS=T(mS),oS=U({attributes:{fb:nS,xb:nS,mb:nS,Bb:nS}}),pS=cH({zb:oR}),qS=T(pS),rS=U({attributes:{fb:qS,xb:qS,mb:qS,Bb:qS}}),sS=U({values:{type:Q("text2")},attributes:{ia:sR,la:JM},K:{text:yJ}}),tS=U({values:{type:Q("text3")},K:{text:LO}}),uS=nJ({text2:sS,text3:tS},a=>a.type,a=>a.type),vS=U({K:{content:uS,fill:dK,hb:lS,borderColor:oS,Ne:rS},attributes:{Ac:BQ}}),wS=U({attributes:{weight:GM,color:YQ,zb:pR}}),xS=U({K:{rows:jS,columns:kS,borderStyle:wS},
attributes:{direction:T(Q(1,2)),Ff:GM,cellPadding:GM}}),yS=AH(vS),zS=U({K:{cells:yS,layout:xS}}),AS=U(SQ,zS,{values:{type:Q("table")},attributes:{W:GM,X:GM}}),BS=U(SQ,RP,{values:{type:Q("sheet")},attributes:{title:JM}}).map(a=>a,a=>a,a=>a,a=>a,a=>TP(a),a=>a.base),CS=U(SQ,$O,{values:{type:Q("layout")}});SO.ec(CS);
var DS=Q(1,2),ES=cH({type:Q("PALETTE"),ld:$G(WQ)}),FS=cH({type:Q("INTERPOLATE"),colorSpace:DS,from:WQ,to:WQ}),GS=dH({PALETTE:ES,INTERPOLATE:FS},a=>a.type),HS=Q(1,2,3,4,5),IS=S(HS),JS=S(qH(HS)),KS=hI(BM),LS=cH({format:aM,ke:qH(bM),fe:qH(bM)}),MS=U({K:{values:KS},attributes:{id:JM,Lf:S(GS),label:JM,je:T(LS)}}),NS=U({values:{type:Q("GROUPED_COLUMN")},attributes:{spacing:DM,ta:CM,ra:NM,L:NM}}),OS=U({values:{type:Q("STACKED_COLUMN")},attributes:{spacing:DM,ta:CM,ra:NM,L:NM}}),PS=U({values:{type:Q("GROUPED_ROW")},
attributes:{spacing:DM,ta:CM,ra:NM,L:NM}}),QS=U({values:{type:Q("STACKED_ROW")},attributes:{spacing:DM,ta:CM,ra:NM,L:NM}}),RS=U({values:{type:Q("PIE")},attributes:{spacing:NM,ra:NM,L:NM}}),SS=U({values:{type:Q("DONUT")},attributes:{spacing:NM,ra:NM,L:NM}}),TS=U({values:{type:Q("LINE")},attributes:{ta:CM,Nb:NM,Kb:NM,Jb:JS,Vc:CM}}),US=U({values:{type:Q("STACKED_AREA")},attributes:{ta:CM,Nb:NM,Kb:NM,Jb:JS,Vc:CM}}),VS=U({values:{type:Q("SCATTERPLOT")},attributes:{ta:CM,Kb:NM,Jb:JS,sh:GM,Uc:JM,Zh:JM,$h:IM,
Zd:JM}}),WS=U({values:{type:Q("BUBBLEPLOT")},attributes:{Kb:GM,Jb:IS,sh:GM,Uc:JM,Zh:JM,$h:IM,De:JM,Zd:JM}}),XS=U({values:{type:Q("PACKED_CIRCLES")},attributes:{De:IM,groupBy:IM,Xh:EM}}),YS=U({values:{type:Q("TREEMAP")},attributes:{De:IM,groupBy:IM,Xh:EM}}),ZS=U({values:{type:Q("BAR_RACE")},attributes:{Uc:JM,Zd:IM,Zo:IM,Ot:EM,spacing:GM,L:GM,autoplay:CM,playbackRate:GM,loop:S(Q(1,2))}}),$S=U({values:{type:Q("HISTOGRAM")},attributes:{spacing:NM,ra:NM,L:NM,pm:NM}}),aT=U({values:{type:Q("RADAR")},attributes:{Nb:GM,
Js:GM,Uc:JM}}),bT=U({values:{type:Q("POPULATION_PYRAMID")},attributes:{ta:CM,spacing:NM,ra:NM,L:NM}}),cT=U({values:{type:Q("FUNNEL")},attributes:{spacing:NM,ra:NM,L:NM,Vc:CM}}),dT=U({values:{type:Q("DUMBBELL")},attributes:{ta:CM,Nb:NM,Kb:NM,Jb:JS}}),eT=U({values:{type:Q("LOLLIPOP")},attributes:{ta:CM,Nb:NM,Kb:NM,Jb:JS}}),fT=U({values:{type:Q("SUNBURST")},attributes:{spacing:NM,ra:NM}}),gT=U({values:{type:Q("TIME_SERIES")},attributes:{Nb:NM,Vc:CM}}),hT=U({values:{type:Q("PROGRESS")},attributes:{oo:S(Q(1,
2,3,4)),endpoint:S(Q(1,2)),So:DM}}),iT=U({values:{type:Q("PICTOGRAM")},attributes:{wn:IM,spacing:DM}}),jT=nJ({GROUPED_COLUMN:NS,STACKED_COLUMN:OS,GROUPED_ROW:PS,STACKED_ROW:QS,PIE:RS,DONUT:SS,LINE:TS,STACKED_AREA:US,SCATTERPLOT:VS,BUBBLEPLOT:WS,PACKED_CIRCLES:XS,TREEMAP:YS,BAR_RACE:ZS,HISTOGRAM:$S,RADAR:aT,POPULATION_PYRAMID:bT,FUNNEL:cT,DUMBBELL:dT,LOLLIPOP:eT,SUNBURST:fT,TIME_SERIES:gT,PROGRESS:hT,PICTOGRAM:iT},a=>a.type,a=>a.type),kT=cH({type:Q("GOOGLE_SHEETS"),url:aM,vo:qH(iM),Bt:aM,range:tM}),
lT=cH({type:Q("SHEETS"),vo:qH(iM),qr:aM,Pka:aM,range:tM}),mT=dH({GOOGLE_SHEETS:kT,SHEETS:lT},a=>a.type),nT=hI(MS),oT=U({K:{config:tH(jT),data:nT},attributes:{Zb:T(mT),Tc:CM,Sc:CM,cd:CM,bd:CM,gd:CM}}),pT=U(SQ,oT,{values:{type:Q("chart")},K:{Rb:aS,labels:KS},attributes:{rg:xR,W:GM,X:GM,vc:S(bH(aM,aM))}}),qT=U({values:{app:qQ},K:{vm:AQ},attributes:{hm:S(bH(aM,aM))}});MO.ec(qT);var rT=U(SQ,{values:{type:Q("group")},K:{Ud:qH(qT),Rb:aS},attributes:{W:GM,X:GM}});QO.ec(rT);var sT=U(SQ,hQ,{values:{type:Q("switch")}});
RO.ec(sT);
var tT=nJ({group:rT,switch:sT,chart:pT,grid:gS,layout:CS,table:AS,sheet:BS,line:ZR,rect:qR,shape:FR,text:KR,embed:LR},a=>a.type,a=>a.type),uT=hI(tT),vT=ZG(a=>-1===a||jM.pe(a)),wT=cH({width:vT,height:vT,units:pQ},a=>-1===a.width===(-1===a.height)),xT=S(wT),yT=U({attributes:{rotation:T(tQ)}}),zT=AH(yT),AT=U({attributes:{Z:GM}}),BT=U(AT,{values:{type:Q("CHOP")},attributes:{direction:S(Q(1,2)),origin:S(Q(1,2,3,4))}}),CT=U(AT,{values:{type:Q("COLOR_WIPE")},attributes:{ld:S($G(WQ,a=>6>=a.length)),direction:S(Q(1,
2,3,4,5,6,7,8))}}),DT=U(AT,{values:{type:Q("CROSS_DISSOLVE")}}),ET=U(AT,{values:{type:Q("MATCH")}}),FT=U(AT,{values:{type:Q("FLOW")},attributes:{direction:S(Q(1,2,3,4))}}),GT=U(AT,{values:{type:Q("SLIDE")},attributes:{direction:S(Q(1,2,3,4))}}),HT=U(AT,{values:{type:Q("STACK")},attributes:{direction:S(Q(1,2,3,4))}}),IT=U(AT,{values:{type:Q("WIPE_CIRCLE")},attributes:{direction:S(Q(1,2))}}),JT=U(AT,{values:{type:Q("WIPE_LINE")},attributes:{direction:S(Q(1,2,3,4))}}),KT=nJ({CHOP:BT,COLOR_WIPE:CT,CROSS_DISSOLVE:DT,
FLOW:FT,MATCH:ET,SLIDE:GT,STACK:HT,WIPE_CIRCLE:IT,WIPE_LINE:JT},a=>a.type,a=>a.type),LT=tH(qH(KT)),MT=cH({Wb:jM,fk:jM}),NT=cH({type:Q("LOGISTIC_SIGMOID")}),OT=cH({Z:jM,easing:dH({LOGISTIC_SIGMOID:NT},a=>a.type)}),PT=U({values:{audio:aM},attributes:{trim:T(MT),loop:S(Q(1,2)),volume:S(gH(0,4)),Wb:NM,Z:NM,jh:T(OT),kh:T(OT)}}),QT=hI(PT),RT=U({K:{Ie:QT}}),ST=U({values:{hi:aM},attributes:{Av:S(Q(1)),Mq:S(Q(1))}}),TT=hI(ST),UT=cH({ie:bH(aM,Q("TEXT","IMAGE"))}),VT=cH({id:aM,version:gM,hf:wM}),WT=U({values:{type:tM},
K:{audio:RT,background:dK,Cf:TT,elements:uT,transition:LT,Hf:zT,hc:AQ,sheet:qH(UP)},attributes:{title:JM,ng:JM,$b:CM,locked:CM,xc:T(QQ),ob:CM,animation:MM,rb:T(GQ),Z:NM,P:IM,anchor:JM,na:T(wT),ka:T(VT)}}),XT=cH({type:Q("REFERENCE"),id:aM,version:gM}),YT=cH({type:Q("INLINE"),width:vT,height:vT,units:pQ,Jk:wM,Gk:wM,Ti:wM,Si:wM},a=>{var b,c;if(-1===a.width!==(-1===a.height))return!1;const e=null!=a.Ti||null!=a.Si;return null==a.Jk&&null==a.Gk||!e?(null!==(b=a.Ti)&&void 0!==b?b:0)<=(null!==(c=a.Si)&&
void 0!==c?c:Infinity):!1}),bU=S(dH({INLINE:YT,REFERENCE:XT},a=>a.type)),cU=new ZM(ZG(),dU=AH(cU),eU=U({K:{attributes:AQ}}),fU=AH(eU);cH({ld:$G(WQ,a=>6>=a.length)});
var gU=hI(WT),hU=eH(/^[0-9]+(\.[0-9]+)?(%|px|cqw)$/),iU=eH(/^[0-9]+(\.[0-9]+)?%$/),jU=eH(/^[0-9]+(\.[0-9]+)?px/),kU=U({attributes:{display:T(Q(1,2)),width:S(hU),maxWidth:T(hU),left:T(iU),da:T(iU),P:IM,altText:T(RQ)}}),lU=U(kU,{values:{type:Q("rect")},K:{fill:dK,stroke:tH(qH(YJ))},attributes:{X:NM,W:NM,L:HM}}),mU=U(kU,zS,{values:{type:Q("table")},attributes:{minWidth:T(jU)}}),nU=U(kU,SP,{values:{type:Q("sheet")},attributes:{title:JM}}).map(a=>a,a=>a,a=>a,a=>YP(a),a=>a.base),oU=U(kU,{values:{type:Q("separator")},
K:{stroke:YJ}}),pU=U(kU,{values:{type:Q("embed"),url:aM},attributes:{X:GM,W:GM}}),qU=U({attributes:{text:BM}}),rU=U(qU,{values:{type:Q("EMBED")},attributes:{url:BM}}),sU=cH({day:gM,month:gM,year:gM}),tU=U(qU,{values:{type:Q("DATE")},attributes:{language:BM,style:S(Q(1,2,3,4,5)),date:S(sU)}}),uU=U(qU,{values:{type:Q("MENTION")},attributes:{user:BM,brand:BM}}),vU=nJ({EMBED:rU,DATE:tU,MENTION:uU},a=>a.type,a=>a.type),wU=U(kU,{values:{type:Q("pill")},K:{Dh:vU}}),xU=U({attributes:{fontFamily:T(eH(mQ)),
fontSize:T(fM),fontWeight:T(Q(...lQ)),fontStyle:T(Q(...nQ)),color:T(WQ),Oc:T(Q(...oQ))}}),yU=U(kU,oT,{values:{type:Q("chart")},K:{vc:xU}}),zU=U(kU,{values:{type:Q("design")},K:{Db:gU},attributes:{doctype:bU,na:xT}}),AU=U({attributes:{hb:HM,borderColor:S($G(WQ))}});OO.ec(AU);
var BU=S(qH(eH(/^[1-9]\d*$/))),CU=S(qH(eH(/^(start|center|end)$/))),DU=U({attributes:{gridColumnStart:BU,gridColumnEnd:BU,gridRowStart:BU,gridRowEnd:BU,alignSelf:CU,padding:HM}}),EU=AH(DU),FU=S($G(eH(/^auto$|^[0-9]+(\.[0-9]+)?(fr|px)$/))),GU=U({K:{Zg:EU},attributes:{gridTemplateColumns:FU,gridTemplateRows:FU,columnGap:LM,rowGap:LM,maxWidth:NM}}),HU=hI(GU),IU=U({K:{Vg:HU}});PO.ec(IU);
var JU=U({values:{type:Q("TEXT")},K:{fill:dK,border:AU,text:LO}}),KU=nJ({TEXT:JU},a=>a.type,a=>a.type),LU=AH(KU),MU=U({K:{config:IU,cells:LU},attributes:{direction:T(Q(1,2))}}),NU=U(kU,{values:{type:Q("layout")},K:{layout:MU,fill:dK,border:AU},attributes:{paddingTop:DM,paddingBottom:DM,jg:T(eH(/^(100%|[0-9]+(\.[0-9]+)?px)$/))}}),WK,yO=nJ({rect:lU,separator:oU,embed:pU,pill:wU,chart:yU,design:zU,table:mU,sheet:nU,layout:NU},a=>a.type,a=>a.type);WK=new zO;LO.ec(WK);
var OU=cH({id:aM,version:gM,nq:hM}),PU=U({K:{text:WK},attributes:{ka:T(OU)}}),QU=hI(PU),RU=U({attributes:{doctype:bU,na:xT,language:JM,title:JM},K:{ad:dU,fd:fU}}),SU=U(RU,{values:{ve:Q("fixed")},attributes:{description:JM,B:IM,Of:T(UT)},K:{mc:bR,audio:RT,Dc:LT,Gc:LT,Db:gU}}),TU=U(RU,{values:{ve:Q("responsive")},K:{Wd:QU}}),UU=nJ({fixed:SU,responsive:TU},a=>a.ve,a=>a.ve),VU=cH({brand:aM,user:aM}),WU=U({values:{id:aM,Hc:VU,Qg:Q(1,2,3,4,5,6),jc:iM,Gq:aM},attributes:{Et:FM}}),XU=AH(WU);
U({K:{content:UU,clients:XU}});var dV,iV,kV,oV;eK=__c.eK=Object.freeze({Sf:void 0,color:void 0,image:void 0,video:void 0,dg:void 0,ma:0,locked:!1,ob:!1,ic:void 0,la:void 0,flipX:!1,flipY:!1});Object.freeze({rotation:0});Object.freeze({Cb:50});__c.YU=Object.freeze({we:void 0,brightness:0,contrast:0,saturation:0,Qh:0,Gl:50,blur:0,Ul:0,Ql:0,$g:0,Wh:0,mh:0,Mh:0,vj:0,ik:0});__c.ZU=Object.freeze({kg:void 0,Qf:void 0,Ub:new Map,filter:void 0,ma:0,altText:void 0});
Object.freeze({Lg:void 0,Ub:new Map,filter:void 0,ma:0,trim:void 0,tg:1,autoplay:!0,playbackRate:void 0,volume:1,altText:void 0});Object.freeze({type:"LINEAR",rotation:0});Object.freeze({type:"RADIAL",center:{top:.5,left:.5}});var $U=Object.freeze({rotation:0,ma:0,Wb:void 0,Z:void 0,animation:void 0,wg:void 0,link:void 0,locked:!1,xc:void 0,ob:!1,ic:void 0,altText:void 0,Af:void 0,P:[],Cg:new Map,anchor:void 0,hc:new Map});Object.freeze({type:"SEQUENCED",animation:1,rb:void 0});
Object.freeze({Dc:void 0,Gc:void 0,Cb:void 0,scale:void 0,Ro:void 0,direction:void 0,color:void 0,$l:void 0});Object.freeze({Tm:[],Um:[],Rm:[],easing:1,Z:void 0,Zn:!1});Object.freeze({Z:void 0,mask:void 0});Object.freeze({Z:void 0,mask:void 0,reverse:void 0});Object.freeze({rotate:void 0,rn:void 0,po:void 0,jp:void 0});Object.freeze({zm:!1});Object.freeze({text:"",Gm:!1});Object.freeze(Object.assign({},$U,{type:"group",Ud:void 0}));Object.freeze(Object.assign({},$U,{type:"switch"}));
Object.freeze({If:0,Bg:0});Object.freeze(Object.assign({},$U,{type:"grid"}));var aV=Object.freeze({hb:[],borderColor:[]});Object.freeze({alignSelf:void 0,padding:[]});Object.freeze(Object.assign({},$U,{type:"layout",padding:[],border:aV,fill:eK,Ud:void 0}));Object.freeze(Object.assign({},$U,{type:"table"}));Object.freeze({direction:void 0,Ff:0,cellPadding:0,borderStyle:{weight:1,color:"#ffffff",zb:[]}});__c.bV=Object.freeze({af:[]});Object.freeze({type:"text2",ia:__c.bV,la:void 0});Object.freeze({type:"text3"});
var hL=Object.freeze({fill:Object.assign({},eK),hb:{fb:void 0,xb:void 0,mb:void 0,Bb:void 0},borderColor:{fb:void 0,xb:void 0,mb:void 0,Bb:void 0},Ne:{fb:void 0,xb:void 0,mb:void 0,Bb:void 0},Ac:2});Object.freeze({type:"NUMBER"});Object.freeze({type:"BOOLEAN"});Object.freeze({type:"FORMULA"});Object.freeze({type:"PLAINTEXT"});Object.freeze({type:"TEXT2",ia:__c.bV});Object.freeze({type:"TEXT3"});Object.freeze({format:void 0});Object.freeze(Object.assign({},$U,{type:"sheet"}));
__c.cV=Object.freeze({id:void 0,label:"",je:void 0});dV=Object.freeze({Zb:void 0,Tc:!1,Sc:!1,cd:!1,bd:!1,gd:!1});__c.eV=Object.freeze(Object.assign({},$U,dV,{type:"chart"}));Object.freeze({type:"GROUPED_COLUMN",spacing:.075,ta:!1,ra:void 0,L:void 0});Object.freeze({type:"STACKED_COLUMN",spacing:.075,ta:!1,ra:void 0,L:void 0});Object.freeze({type:"GROUPED_ROW",spacing:.075,ta:!1,ra:void 0,L:void 0});Object.freeze({type:"STACKED_ROW",spacing:.075,ta:!1,ra:void 0,L:void 0});
__c.fV=Object.freeze({type:"PIE",spacing:.075,ra:void 0,L:void 0});Object.freeze({type:"DONUT",spacing:.075,ra:void 0,L:void 0});Object.freeze({type:"LINE",ta:!1,Nb:void 0,Kb:void 0,Jb:void 0,Vc:!1});Object.freeze({type:"STACKED_AREA",ta:!1,Nb:void 0,Kb:void 0,Jb:void 0,Vc:!1});Object.freeze({type:"SCATTERPLOT",ta:!1,Kb:void 0,Jb:void 0,sh:0,Uc:void 0,Zh:void 0,$h:[],Zd:void 0});Object.freeze({type:"BUBBLEPLOT",Kb:12,Jb:1,sh:0,Uc:void 0,Zh:void 0,$h:[],De:void 0,Zd:void 0});
Object.freeze({type:"PACKED_CIRCLES",groupBy:[],De:[],Xh:2});Object.freeze({type:"TREEMAP",groupBy:[],De:[],Xh:2});Object.freeze({type:"BAR_RACE",Uc:void 0,Zd:[],Zo:[],spacing:0,L:0,autoplay:!1,playbackRate:1,loop:1});Object.freeze({type:"HISTOGRAM",spacing:.075,ra:void 0,L:void 0,pm:void 0});Object.freeze({type:"RADAR",Uc:void 0});Object.freeze({type:"POPULATION_PYRAMID",ta:!1,spacing:.075,ra:void 0,L:void 0});Object.freeze({type:"FUNNEL",spacing:.075,ra:void 0,L:void 0,Vc:!1});
Object.freeze({type:"DUMBBELL",ta:!1,Nb:void 0,Kb:void 0,Jb:void 0});Object.freeze({type:"LOLLIPOP",ta:!1,Nb:void 0,Kb:void 0,Jb:void 0});Object.freeze({type:"SUNBURST",spacing:.075,ra:void 0});Object.freeze({type:"TIME_SERIES",Nb:void 0,Vc:!1});Object.freeze({type:"PROGRESS",oo:1,endpoint:1,So:.1});Object.freeze({type:"PICTOGRAM",wn:[],spacing:.05});var gV=Object.freeze({marker:void 0,anchor:void 0,position:void 0});Object.freeze({hi:"ref",top:.5,left:.5,jo:2});Object.freeze({hm:new Map,vm:new Map});
Object.freeze(Object.assign({},$U,{type:"line",start:gV,end:gV,color:void 0,fill:eK,ag:void 0,zb:[],kc:!1,wc:[]}));Object.freeze({type:"ELBOWED",mc:[],L:24});Object.freeze({type:"CURVED"});__c.hV=Object.freeze(Object.assign({},$U,{type:"rect",stroke:void 0,L:[]}));Object.freeze(Object.assign({},$U,{type:"shape",slice:void 0,wc:[],resizeMode:void 0,Uf:void 0}));Object.freeze({stroke:void 0,L:0});iV=Object.freeze({weight:0,color:"#000000",fill:eK,zb:[],kc:!1});
__c.jV=Object.freeze(Object.assign({},$U,{type:"text",ia:__c.bV,Bc:void 0,placeholder:void 0,writingMode:void 0,X:void 0,W:void 0,Gf:void 0,ug:void 0,la:void 0}));Object.freeze(Object.assign({},$U,{type:"embed"}));kV=Object.freeze({Ie:[]});
__c.lV=Object.freeze({type:void 0,title:void 0,ng:void 0,$b:!1,locked:!1,xc:void 0,ob:!1,animation:void 0,rb:void 0,Cf:[],Z:void 0,audio:kV,transition:void 0,P:[],anchor:void 0,hc:new Map,Hf:new Map,na:void 0,ka:void 0,background:Object.freeze(Object.assign({},eK,{color:"#ffffff"})),elements:[],sheet:void 0});Object.freeze({locked:!1});Object.freeze({trim:void 0,loop:2,volume:1,Wb:void 0,Z:void 0,jh:void 0,kh:void 0});
var mV=Object.freeze({display:void 0,width:"100%",maxWidth:void 0,left:void 0,da:void 0,P:[],altText:void 0});Object.freeze(Object.assign({},mV,{type:"rect",stroke:void 0,L:[]}));Object.freeze(Object.assign({},mV,{type:"table",minWidth:void 0}));Object.freeze(Object.assign({},mV,{type:"sheet",minWidth:void 0}));var ZJ=Object.freeze(Object.assign({},mV,{type:"separator",stroke:Object.freeze(Object.assign({},iV,{color:"#bfc3c8",weight:1}))}));Object.freeze(Object.assign({},mV,{type:"embed"}));
Object.freeze(Object.assign({},mV,{type:"pill",display:2}));var nL=Object.freeze({fontFamily:void 0,fontSize:void 0,fontWeight:void 0,fontStyle:void 0,color:void 0,Oc:void 0});Object.freeze(Object.assign({},mV,dV,{type:"chart",vc:Object.assign({},nL)}));Object.freeze(Object.assign({},mV,{type:"design"}));Object.freeze(Object.assign({},mV,{type:"layout",paddingTop:0,paddingBottom:0,border:aV,fill:eK,jg:"100%"}));Object.freeze({direction:1});Object.freeze({ka:void 0});
__c.nV=Object.freeze({type:"INLINE",Jk:void 0,Gk:void 0,Ti:void 0,Si:void 0});oV=Object.freeze({language:void 0,title:void 0,fd:new Map,ad:new Map});__c.pV=Object.freeze(Object.assign({},oV,{ve:"fixed",description:void 0,B:[],mc:[],audio:kV,Dc:void 0,Gc:void 0,Of:void 0,Db:[]}));Object.freeze(Object.assign({},oV,{ve:"responsive",Wd:[]}));Object.freeze({clients:new Map});var qV,RK;
qV=class{M(a){switch(a.ve){case "fixed":return JJ(this,a);case "responsive":return KJ(this,a);default:throw new g(a);}}serializeBody(a){const b=a.ka;return new __c.Np({text:QJ(this,a.text),ka:b&&new __c.Mp(b)})}Xu(a){return new __c.qm(a)}Wu(a){return new __c.rm(a)}vl(a){return new __c.Nm(a)}(a){var b=a.Wd.length?"responsive":"fixed";switch(b){case "fixed":return OK(this,a);case "responsive":return b=a.na,d(-1===b.width&&-1===b.height&&4===b.units),QK(this,a);default:throw new g(b);
}}$q(a){return a}Zq(a){return a}Xj(a){return a}Wj(a){return a}};RK={Ie:[]};__c.rV=new qV;
}).call(self, self._fe4d99ebe0d2d259646a80d250150d47);}

}])
//# sourceMappingURL=sourcemaps/0acfc69ea1933e20.js.map