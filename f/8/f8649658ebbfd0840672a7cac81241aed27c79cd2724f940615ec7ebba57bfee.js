var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:
$jscomp.getGlobal=$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=
$jscomp.polyfill("Array.prototype.find","es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=$jscomp.Symbol=);
$jscomp.initSymbolIterator=$jscomp.arrayIterator=
$jscomp.iteratorPrototype=$jscomp.makeIterator=$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise","es6","es3");
$jscomp.checkStringArgs=
$jscomp.polyfill("String.prototype.repeat","es6","es3");
var gsid,BROWSER_SUPPORTS=0,dbname="bsenglish-store",dbversion="2",ARTICLE_STORE="notification-article-db",UIDSTORE="unique-id-store",service_worker,db,idb_server_id,idb_subscription_id,last_sub_id,idb,db1,db2,redirectUrl,furl={},notificationApi={},licount,notnow_clicked=0,notnowclicked_config=5,openNotify,utmval="utm_source=pn-desktop&utm_medium=pn-article&utm_campaign=pn-cms&ref=pn-cms",version="1.0.37",notfslider,k,l,myRecord,adgebraResponse,notification_source=1,socialreferrer=document.referrer;
if(""==socialreferrer||void 0==socialreferrer||null==socialreferrer)socialreferrer=window.location.href;var socialdomain=socialreferrer.replace("http://","").replace("https://","").split(/[/?#]/)[0];console.log(socialdomain);Object.defineProperties(window,{indexedDB:{value:window.indexedDB,writable:!0}});
if(/(chrome\/)(\d+\.\d+)/i.test(navigator.userAgent)&&0>navigator.userAgent.search("UCBrowser")&&/(chrome\/)(\d+\.\d+)/i.test(navigator.userAgent)&&0>navigator.userAgent.search("Edge")&&/(chrome\/)(\d+\.\d+)/i.test(navigator.userAgent)&&0>navigator.userAgent.search("UBrowser")){var bversion=new Number(RegExp.$2);42<=parseInt(bversion)&&(BROWSER_SUPPORTS=1)}var noti_page_type="home",noti_module_name="home";
document.querySelector("head")&&document.querySelector("head").hasAttribute("data-content_type")&&(noti_page_type=document.querySelector("head").getAttribute("data-content_type"),void 0!=noti_page_type||""!=noti_page_type||null!=noti_page_type)&&(noti_page_type=noti_page_type.toLowerCase());
if(document.querySelector("head")&&document.querySelector("head").hasAttribute("data-module_name")){if(noti_module_name=document.querySelector("head").getAttribute("data-module_name"),void 0!=noti_module_name||""!=noti_module_name||null!=noti_module_name)noti_module_name=noti_module_name.toLowerCase()}else document.querySelector("head")&&document.querySelector("head").hasAttribute("data-category_name")&&(noti_module_name=document.querySelector("head").getAttribute("data-category_name"),void 0!=noti_module_name||
""!=noti_module_name||null!=noti_module_name)&&(noti_module_name=noti_module_name.toLowerCase());console.log("Page : "+noti_page_type+" & Category : "+noti_module_name);var chkcookiepolicy=getUserCookie("cookiePolicy");0==chkcookiepolicy&&clearTimeout(openNotify);var browserName;
function browserDetection(){var a=navigator.userAgent;browserName=navigator.appName;var b=""+parseFloat(navigator.appVersion);parseInt(navigator.appVersion,10);var c,e;var d=navigator.userAgent;d.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i);var g="desktop";/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(d)&&(g="mobile");-1!=(c=a.indexOf("OPR/"))?(browserName="Opera",b=a.substring(c+4)):-1!=(c=a.indexOf("Opera"))?(browserName="Opera",b=a.substring(c+6),
-1!=(c=a.indexOf("Version"))&&(b=a.substring(c+8))):-1!=(c=a.indexOf("MSIE"))?(browserName="Microsoft Internet Explorer",b=a.substring(c+5)):-1!=(c=a.indexOf("Chrome"))?(browserName="Chrome",b=a.substring(c+7)):-1!=(c=a.indexOf("Safari"))?(browserName="Safari",b=a.substring(c+7),-1!=(c=a.indexOf("Version"))&&(b=a.substring(c+8))):-1!=(c=a.indexOf("Firefox"))?(browserName="Firefox",b=a.substring(c+8)):(d=a.lastIndexOf(" ")+1)<(c=a.lastIndexOf("/"))&&(browserName=a.substring(d,c),b=a.substring(c+1),
browserName.toLowerCase()==browserName.toUpperCase()&&(browserName=navigator.appName));-1!=(e=b.indexOf(";"))&&(b=b.substring(0,e));-1!=(e=b.indexOf(" "))&&(b=b.substring(0,e));a=parseInt(""+b,10);isNaN(a)&&(b=""+parseFloat(navigator.appVersion),parseInt(navigator.appVersion,10));console.log("Browser name  = <em>"+browserName+"</em><br>Full version  = <em>"+b+"</em><br>Device = <em>"+g);"Chrome"==browserName&&42<=b?BROWSER_SUPPORTS=1:"Firefox"==browserName&&44<=b&&"desktop"==g&&(BROWSER_SUPPORTS=
1)}browserDetection();1==BROWSER_SUPPORTS&&0!=chkcookiepolicy&&("serviceWorker"in navigator?navigator.serviceWorker.register("/oiframework-sw-web.js?v="+version).then(:console.warn("Service workers aren't supported in this browser."));
notificationApi={html_entity_decode:function(a){var b=document.createElement("textarea");b.innerHTML=a.replace(/</g,"&lt;").replace(/>/g,"&gt;");return b.value},shareContent:function(a,b,c,e){return"<div class='article-slider-sharelinks'><a href='javascript:void(0);' class='article-share'><i class='fa fa-share-alt'></i></a><div class='article-slider-num'><span>"+a+"/"+b+"</span></div><div class='article-slider-footer'><a href='#' class='article-slider-facebook' data-url='"+c+"' data-title='"+e+"'><i class='fa fa-facebook'></i></a><a href='#' class='article-slider-twitter' data-url='"+
c+"' data-title='"+e+"'><i class='fa fa-twitter'></i></a><a href='javascript:void(0);' class='article-social-close'>X</a></div></div>"},removeDuplicatesFromObjArray:function(a,b){var c=[];a.reduce(function(a,d){a[b]!==d[b]&&c.push(d);return d},[]);return c},getAllData:function(){var a=window.indexedDB.open(dbname,dbversion);a.onsuccess=function(b){db1=a.result;if(db1.objectStoreNames.contains(ARTICLE_STORE)){b=db1.transaction([ARTICLE_STORE],"readwrite");b.oncomplete=function(a){console.log("Complete")};
b.onerror=function(a){console.log("Error")};var c=b.objectStore(ARTICLE_STORE).getAll();c.onsuccess=function(a){var b=c.result;a=document.getElementById("notification-content");b=notificationApi.removeDuplicatesFromObjArray(b,"url");console.log(b);console.log(b.length);licount=b.length;0==licount?($(".notification-num").hide(),document.getElementById("clear-inbox")&&(document.getElementById("clear-inbox").style.display="none")):(10<licount&&(licount=10),$(".notification-num").text(licount).show(),
document.getElementById("clear-inbox")&&(document.getElementById("clear-inbox").style.display="block"));var e=10>=b.length?parseInt(b.length)-1:9;b=b.reverse();for(var p="",f=0;f<=e;f++)if(""!=b[f].url){var n=b[f].id+"?"+b[f].url;b[f].url=b[f].url+"?"+utmval;var h=parseInt(f)+1,m=parseInt(licount);h=notificationApi.shareContent(h,m,b[f].url,b[f].title);m=b[f].pdate;m=""==m||"undefined"==m||null==m?"":notificationApi.getDateFormat(m);var q=b[f].fdesc;if(""==q||"undefined"==q||null==q)q="";"-1"<b[f].image.indexOf("/100x90x100")?
b[f].image=b[f].image.replace("/100x90x100",""):"-1"<b[f].image.indexOf("/100x90x75")?b[f].image=b[f].image.replace("/100x90x75",""):b[f].image=b[f].image;p+="<li><div class='article-slider-container'><a href='"+b[f].url+"' id='notanchor' data-url='"+n+"' data-index='"+f+"' data-type='article'><div class='article-slider-thumb'><img src='"+b[f].image+"' alt='' /></div><div class='article-slider-details'><h2 class='article-slider-title'>"+b[f].title+"</h2><div class='article-slider-datetime'>"+m+"</div><div class='article-slider-desc'>"+
q+"</div></div></a></div>"+h+"</li>"}b=notificationApi.html_entity_decode(p);a.innerHTML=b;a=$(".article-slider ul li").length;0<a&&(1>=a?$(".article-slider ul li").addClass("oneslide"):3>=a?$(".article-slider ul li").addClass("slide23"):setTimeout(function(){notfslider=$(".article-slider ul").bxSlider({pager:!1,slideMargin:25,slideWidth:320,moveSlides:1,minSlides:3,hideControlOnEnd:!0,infiniteLoop:!1})},3E3),document.getElementById("notf-cont").style.display="block")}}};a.onupgradeneeded=function(a){a=
a.target.result;console.log(a);a.objectStoreNames.contains(ARTICLE_STORE)||a.createObjectStore(ARTICLE_STORE);a.objectStoreNames.contains(UIDSTORE)||a.createObjectStore(UIDSTORE)}},deleteData:function(a){db1.transaction([ARTICLE_STORE],"readwrite").objectStore(ARTICLE_STORE).delete(a).onsuccess=,clearData:function(){var a=window.indexedDB.open(dbname,dbversion);a.onsuccess=function(b){db2=a.result;db2.transaction([ARTICLE_STORE],
"readwrite").objectStore(ARTICLE_STORE).clear().onsuccess=function(a){console.log("Object Store has been cleared.")}}},manageNotificationListView:function(a,b,c){$("#licontent"+b).fadeOut(300,},trackAppClicked:function(a){""!=a&&fetch("/scripts/cms/controller.php?module=subscription&type=notificationAppClicked&url="+a+"&last_sub_id="+last_sub_id,{method:"post"}).catch(function(a){console.error("Inside 1st error:",a)})},displayNumberNotification:function(){licount--;$(".notification-num").text(licount);
0==licount&&(document.getElementById("notf-cont").style.display="none",$(".notification-num").hide(),$(".notification-text").show(),setTimeout(function(){$(".notification-wrapper").hide()},1E3))},getDateFormat:function(a){var b=new Date(a);a=b.getFullYear();var c=b.getMonth(),e=b.getDate(),d=b.getHours();b=b.getMinutes();10>b&&(b="0"+b);c="January February March April May June July August September October November December".split(" ")[c];return c+" "+e+", "+a+", "+d+":"+b+"[IST]"},truncateWords:openManageScreen:function(a){var b=$(".article-slider ul li").length;0==a?setTimeout(function(){$(".notification-wrapper").hide()},1E3):(0==b?($(".article-slider-wrapper,.article-overlay").addClass("show-popup"),$(".article-slider-container").show(),$(".article-slider-container").css("overflow-y","hidden"),$(".article-slider").hide()):($(".article-slider").find("li").css("width","320px"),$(".article-slider-wrapper,.article-overlay").addClass("show-popup")),
$(".notification-settings-clearbox").hide())},manageOnOff:function(a,b){0==a?($("."+b).removeClass("onstate"),$("."+b).addClass("offstate"),notificationApi.manageEnableDisable(0),notificationApi.clearData(),$(".notification-bell").hide(),$(".notification-bell-inactive").show(),$(".notification-num").hide(),$(".articlelist").remove()):($("."+b).addClass("onstate"),$("."+b).removeClass("offstate"),$(".notification-bell").show(),$(".notification-bell-inactive").hide(),notificationApi.manageEnableDisable(1))},
manageEnableDisable:function(a){localStorage.getItem("web_id");var b=localStorage.getItem("bsenglish_subscription_id");if(""!=b&&void 0!=b)fetch("/scripts/cms/controller.php?module=subscription&type=manageEnableDisable&last_sub_id="+b+"&active_status="+a,{method:"post"}).then(function(b){b.text().then(function(b){console.log(b);localStorage.setItem("bsenglish_enabled",a);notificationApi.openManageScreen(0)})})["catch"](function(a){console.log("Fetch Error :-S",a)})},detectPrivateWindow:function(){var a=
window.RequestFileSystem||window.webkitRequestFileSystem;a?a(window.TEMPORARY,100,function(a){console.log("Normal Mode")},function(a){console.log("incognito Mode");alert("You are in incognito mode.\nSome of the functionalities may not work.")}):console.log("No such Functions....")},adgebraAdBetweenList:function(a){localStorage.getItem("web_id");var b=localStorage.getItem("bsenglish_subscription_id"),c=parseInt(a)+1;console.log(a);if(""!=b&&void 0!=b&&3<=a)fetch("/scripts/cms/controller.php?module=subscription&type=getAdgebraAd&last_sub_id="+
b+"&device_type=2&noAds="+Math.floor(c/3),{method:"post"}).then(function(b){b.text().then(function(b){adgebraResponse=b;if(""!=adgebraResponse&&void 0!=adgebraResponse&&null!=adgebraResponse&&(b=JSON.parse(adgebraResponse),3<=a)){if(""!=b[0]&&void 0!=b[0]&&null!=b[0]&&"Campaign Not Found"!=b[0].msgCode){var c=decodeURIComponent(b[0].trackerUrl).replace(/\+/g," "),e=b[0].notificationImage,d=decodeURIComponent(b[0].notificationMessage).replace(/\+/g," ");c="<li id='licontent1'><a href='"+c+"' target='_blank'><div class='article-slider-container' style='height:380px;'><div class='article-slider-thumb' style='text-align:center;'><img src='"+
e+"' style='height: 200px;' alt='' /></div><div class='article-slider-details'><h2 class='article-slider-title'>"+d+"</h2></div></div></a></li>";$("#notification-content > li:nth-child(3)").after(c)}""!=b[1]&&void 0!=b[1]&&null!=b[1]&&"Campaign Not Found"!=b[1].msgCode&&(c=decodeURIComponent(b[1].trackerUrl).replace(/\+/g," "),e=b[1].notificationImage,d=decodeURIComponent(b[1].notificationMessage).replace(/\+/g," "),c="<li id='licontent2'><a href='"+c+"' target='_blank'><div class='article-slider-container' style='height:380px;'><div class='article-slider-thumb' style='text-align:center;'><img src='"+
e+"' style='height: 200px;' alt='' /></div><div class='article-slider-details'><h2 class='article-slider-title'>"+d+"</h2></div></div></a></li>",$("#notification-content > li:nth-child(7)").after(c));""!=b[2]&&void 0!=b[2]&&null!=b[2]&&"Campaign Not Found"!=b[2].msgCode&&(c=decodeURIComponent(b[2].trackerUrl).replace(/\+/g," "),e=b[2].notificationImage,b=decodeURIComponent(b[2].notificationMessage).replace(/\+/g," "),b="<li id='licontent3'><a href='"+c+"' target='_blank'><div class='article-slider-container' style='height:380px;'><div class='article-slider-thumb' style='text-align:center;'><img src='"+
e+"' style='height: 200px;' alt='' /></div><div class='article-slider-details'><h2 class='article-slider-title'>"+b+"</h2></div></div></a></li>",$("#notification-content > li:nth-child(11)").after(b))}})})["catch"](function(a){console.log("Fetch Error :-S",a)})},manageFooterEnableClick:function(a){$(".notification-bell").show();$(".notification-bell-inactive").hide();localStorage.getItem("web_id");var b=localStorage.getItem("bsenglish_subscription_id");$(".manage-notification").show();setTimeout(function(){$(".manage-notification").hide()},
5E3);$(".manage-notification-close").on("touchstart click",function(a){$(".manage-notification").hide("slow")});if(""!=b&&void 0!=b)fetch("/scripts/cms/controller.php?module=subscription&type=manageEnableDisable&last_sub_id="+b+"&active_status="+a,{method:"post"}).then(function(b){b.text().then(function(b){console.log(b);localStorage.setItem("bsenglish_enabled",a);$("#notification-link").hide()})})["catch"](function(a){console.log("Fetch Error :-S",a)})},manageNotificationBlock:function(){console.log(browserName);
if("Firefox"==browserName){$(".manage-notification-block-top-firefox").show();$("html,body").css("overflow","hidden");setUserCookie("manage_bsenglish_notification_block",1,1440,"/","","");var a=setTimeout(function(){$(".manage-notification-block-top-firefox").hide();$("html,body").css("overflow","auto")},2E4);$(".click-close").on("click",function(b){$(".manage-notification-close-block-firefox").hide("slow");$("html,body").css("overflow","auto");clearTimeout(a)})}else $(".manage-notification-block-top").show(),
$("html,body").css("overflow","hidden"),setUserCookie("manage_bsenglish_notification_block",1,1440,"/","",""),a=setTimeout(1E4),$(".click-close-firefox").on("click",function(b){$(".manage-notification-block-top").hide("slow");$("html,body").css("overflow","auto");clearTimeout(a)});$(document).on("click",".click-close",function(b){$(".manage-notification-block-top").hide();$("html,body").css("overflow","auto");
clearTimeout(a)});$(document).on("click",".click-close-firefox",function(b){$(".manage-notification-block-top-firefox").hide();$("html,body").css("overflow","auto");clearTimeout(a)})},manageArticleBottom:function(a){0==a?("default"==Notification.permission&&document.getElementById("notification-articleblock")&&(document.getElementById("notification-articleblock").style.display="block",document.getElementById("already-subscribed").style.display="none",document.getElementById("allow-notifications").style.display=
"block"),document.querySelector(".oi-dailyalerts")&&(document.querySelector(".oi-dailyalerts").style.display="block"),document.getElementById("giz-emailsubscribe")&&(document.getElementById("giz-emailsubscribe").style.display="none"),"default"==Notification.permission?(document.getElementById("giz-unsubscribe")&&(document.getElementById("giz-unsubscribe").style.display="none"),document.getElementById("giz-subscribe")&&(document.getElementById("giz-subscribe").style.display="block")):(document.getElementById("giz-unsubscribe")&&
(document.getElementById("giz-unsubscribe").style.display="block"),document.getElementById("giz-subscribe")&&(document.getElementById("giz-subscribe").style.display="none"))):(document.getElementById("notification-articleblock")&&(document.getElementById("notification-articleblock").style.display="none",document.getElementById("already-subscribed").style.display="none",document.getElementById("allow-notifications").style.display="none"),document.querySelector(".oi-dailyalerts")&&(document.querySelector(".oi-dailyalerts").style.display=
"none"),document.getElementById("giz-unsubscribe")&&(document.getElementById("giz-unsubscribe").style.display="none"),document.getElementById("giz-emailsubscribe")&&(document.getElementById("giz-emailsubscribe").style.display="block"),document.getElementById("giz-subscribe")&&(document.getElementById("giz-subscribe").style.display="none"))},updateIndexDb:function(a){var b=window.indexedDB.open(dbname,dbversion);b.onsuccess=function(c){db1=b.result;var e=db1.transaction([dbname],"readwrite");e.objectStore(dbname).get("subscriptionid").onsuccess=
function(b){e.objectStore(dbname).put(a,"subscriptionid")}}},createFcmToken:function(a,b){navigator.serviceWorker.ready.then(function(a){service_worker=a;a.pushManager.subscribe({userVisibleOnly:!0}).then(function(a){a="subscriptionId"in a?a.subscriptionId:a.endpoint.replace("https://fcm.googleapis.com/fcm/send/","");console.log(a+" : New Token Generated");notificationApi.sendTokenToServer(a,b)}).catch(function(a){console.log("An error occurred while retrieving token. ",a)})})},sendTokenToServer:function(a,
b){if(""!=b&&void 0!=b)fetch("/scripts/cms/controller.php?module=subscription&type=sendTokenToServer&last_sub_id="+b+"&currentToken="+a,{method:"post"}).then(function(c){c.text().then(function(c){console.log(c);localStorage.setItem("bsenglish_enabled",1);localStorage.setItem("bsenglish_subscription_id",b);notificationApi.updateIndexDb(a)})})["catch"](function(a){console.log("Fetch Error :-S",a)})},getUserStatus:function(a){if(""!=a&&void 0!=a)fetch("/scripts/cms/controller.php?module=subscription&type=getNotificationStatus&last_sub_id="+
a,{method:"post"}).then(function(b){b.text().then(function(b){console.log(b);3==b&&navigator.serviceWorker.getRegistration().then(function(c){c.unregister().then(function(){localStorage.removeItem("bsenglish_subscription_id");return navigator.serviceWorker.register("/oiframework-sw-web.js?v="+version).then(}).then(function(a){c!==a})})})})["catch"](function(a){console.log("Fetch Error :-S",a)})},manageSettingsStorage:function(a,
b){localStorage.getItem("web_id");var c=localStorage.getItem("bsenglish_subscription_id");if(""!=c&&void 0!=c)fetch("/scripts/cms/controller.php?module=subscription&type=manageEnableDisable&last_sub_id="+c+"&active_status="+a,{method:"post"}).then(function(c){c.text().then(function(c){localStorage.setItem("bsenglish_enabled",a);0==a?setUserCookie("bsenglish_disabled_val",b,b,"/","",""):(deleteUserCookie("bsenglish_disabled_val","/",""),console.log("cookie Deleted......"))})})["catch"](function(a){console.log("Fetch Error :-S",
a)})},manageLocalDbInfo:function(a){var b=window.indexedDB.open(dbname,dbversion);b.onsuccess=function(c){db1=b.result;db1.objectStoreNames.contains(dbname)&&db1.transaction([dbname],"readwrite").objectStore(dbname).put(a,"block_time")}}};0==BROWSER_SUPPORTS&&(document.getElementById("notification-link")&&(document.getElementById("notification-link").style.display="none"),document.getElementById("giz-emailsubscribe")&&$("#giz-emailsubscribe").show());
if(1==BROWSER_SUPPORTS&&0!=chkcookiepolicy){window.addEventListener("load",function(){console.log("Window Loaded...");var a=localStorage.getItem("bsenglish_subscription_id");if(""==a||"undefined"==a||null==a)a="";"granted"==Notification.permission&&""!=a&&notificationApi.getUserStatus(a)});try{require(["jquery","bxslider"],function(a){console.log(Notification.permission);var b=localStorage.getItem("bsenglish_subscription_id");if(""==b||"undefined"==b||null==b)b="";"granted"==Notification.permission&&
""!=b&&notificationApi.getAllData();var c=getUserCookie("isShown");if("undefined"==typeof c||null==c)notificationApi.detectPrivateWindow(),setUserCookie("isShown",1,24,"/","","");b=localStorage.getItem("bsenglish_subscription_id");c=localStorage.getItem("bsenglish_enabled");if(""==c||"undefined"==c||null==c)c="";var e=getUserCookie("ds_notnow_clicked");if(""==e||"undefined"==e||null==e)e="";if("default"==Notification.permission)if(document.getElementById("social-notification-promo"))document.getElementById("notification_bell").style.display=
"block",a(".notification-bell").addClass("ismovement"),document.getElementById("allow-notifications").style.display="block";else{var d=getUserCookie("desktop_bsnotification_seen");"undefined"==typeof d||null==d?(e<notnowclicked_config&&(openNotify=setTimeout(function(){a("div#oiNotification").addClass("shownotf")},8E3)),document.getElementById("notification_bell").style.display="none",setUserCookie("desktop_bsnotification_seen",1,48,"/","","")):(document.getElementById("notification_bell").style.display=
"block",a(".notification-bell").addClass("ismovement"));document.getElementById("notification-link")&&a("#notification-link").show();notificationApi.manageArticleBottom(0)}else if("denied"==Notification.permission)document.getElementById("social-notification-promo")?(document.getElementById("already-subscribed").style.display="none",document.getElementById("allow-notifications").style.display="block",a(".notification-bell").hide(),a(".notification-bell-inactive").show()):(d=getUserCookie("desktop_bsnotification_seen"),
"undefined"==typeof d||null==d?(e<notnowclicked_config&&(openNotify=setTimeout(8E3)),document.getElementById("notification_bell").style.display="none",setUserCookie("desktop_bsnotification_seen",1,48,"/","","")):(a(".notification-bell").hide(),a(".notification-bell-inactive").show()),document.getElementById("notification-link")&&a("#notification-link").show(),notificationApi.manageArticleBottom(0));else{""==b||"undefined"==b||null==b?document.getElementById("social-notification-promo")?
(document.getElementById("notification_bell").style.display="block",a(".notification-bell").addClass("ismovement"),document.getElementById("allow-notifications").style.display="block"):(a(".notification-bell").hide(),notificationApi.manageArticleBottom(0)):1==c?(a(".popup-notification-on-off").addClass("onstate"),a(".popup-notification-on-off").removeClass("offstate"),a(".notification-bell").show(),document.getElementById("notification-link")&&a("#notification-link").hide(),notificationApi.manageArticleBottom(1),
document.getElementById("social-notification-promo")&&(document.getElementById("already-subscribed").style.display="block",document.getElementById("allow-notifications").style.display="none")):(a(".popup-notification-on-off").removeClass("onstate"),a(".popup-notification-on-off").addClass("offstate"),a(".notification-bell-inactive").show(),document.getElementById("notification-link")&&a("#notification-link").show(),notificationApi.manageArticleBottom(0),document.getElementById("social-notification-promo")&&
(document.getElementById("already-subscribed").style.display="none",document.getElementById("allow-notifications").style.display="block"));a(".notification-bell").removeClass("ismovement");b=getUserCookie("bsenglish_disabled_val");e=localStorage.getItem("bsenglish_enabled_time");if(""==e||"undefined"==e||null==e)e="";console.log(b+" : Cookie Value For Radio Button");if("undefined"==typeof b||null==b){b=e.split("_")[0];var g=e.split("_")[1],p=(new Date).getHours();""!=g&&void 0!=g&&(d=p>=b&&p<g?1:
0);0==e||""==e?a("input[name=block-radio][value=0]").attr("checked","checked"):(b=e.split("_"),e=b[0],b=b[1],0==d?a("input[name=block-radio][value=0]").attr("checked","checked"):(a("input[name=block-radio][value=1]").attr("checked","checked"),a("#block-from").removeAttr("disabled"),a("#block-to").removeAttr("disabled")),a("#block-from option[value="+e+"]").attr("selected","selected"),a("#block-to option[value="+b+"]").attr("selected","selected"));1==c?(a(".notification-bell").show(),a(".notification-bell-inactive").hide(),
document.getElementById("social-notification-promo")&&(document.getElementById("already-subscribed").style.display="block",document.getElementById("allow-notifications").style.display="none")):(a(".notification-bell").hide(),a(".notification-bell-inactive").show(),document.getElementById("social-notification-promo")&&(document.getElementById("already-subscribed").style.display="none",document.getElementById("allow-notifications").style.display="block"))}else a("input[name=block-radio][value="+b+"]").attr("checked",
"checked"),a(".notification-bell").hide(),a(".notification-bell-inactive").show(),document.getElementById("social-notification-promo")&&(document.getElementById("already-subscribed").style.display="none",document.getElementById("allow-notifications").style.display="block")}a(".instant-updates-close").on("click",function(b){b.preventDefault();"denied"==Notification.permission?(a(".notification-bell").hide(),a(".notification-bell-inactive").show()):(document.getElementById("notification_bell").style.display=
"block",a(".notification-bell").addClass("ismovement"));a("div#oiNotification").removeClass("shownotf");b=getUserCookie("ds_notnow_clicked");b=""==b||"undefined"==b||null==b?parseInt(notnow_clicked)+1:parseInt(b)+1;setUserCookie("ds_notnow_clicked",b,144E3,"/","","")});a("#enable-btn").on("click",function(b){b.preventDefault();"denied"==Notification.permission?(a(".notification-bell").hide(),a(".notification-bell-inactive").show(),a("div#oiNotification").removeClass("shownotf"),b=getUserCookie("manage_bsenglish_notification_block"),
"undefined"!=typeof b&&null!=b||notificationApi.manageNotificationBlock()):(a("div#oiNotification").removeClass("shownotf"),1==BROWSER_SUPPORTS&&(notification_source=4,subscribeDevice(),a(".notification-bell").removeClass("ismovement"),a(".notf-overlay").show()))});a(".notification-bell").on("click",function(){"denied"==Notification.permission?(a(".notification-bell").hide(),a(".notification-bell-inactive").show(),notificationApi.manageNotificationBlock()):"default"==Notification.permission?(1==BROWSER_SUPPORTS&&
(subscribeDevice(),a(".notf-overlay").show()),a(".notification-bell").removeClass("ismovement")):(a("body,html").css("overflow","hidden"),notificationApi.openManageScreen(1))});if(document.getElementById("social-notification-promo"))a(".allow-notifications").on("click",function(){"denied"==Notification.permission?(a(".notification-bell").hide(),a(".notification-bell-inactive").show(),notificationApi.manageNotificationBlock()):"default"==Notification.permission?(ga("boldskyen.send","event","nf-social-promo",
"desktop-social",socialdomain),1==BROWSER_SUPPORTS&&(subscribeDevice(),a(".notf-overlay").show()),a(".notification-bell").removeClass("ismovement")):notificationApi.openManageScreen(1)});a("#notification_bell_left").on("click",function(){"denied"==Notification.permission?(a(".notification-bell").hide(),a(".notification-bell-inactive").show(),notificationApi.manageNotificationBlock()):"default"==Notification.permission?(ga("boldskyen.send","event","pn-cms","desktop-article","article-left"),1==BROWSER_SUPPORTS&&
(notification_source=2,subscribeDevice(),a(".notf-overlay").show()),a(".notification-bell").removeClass("ismovement")):notificationApi.openManageScreen(1)});a(".notification_bell_unsub").on("click",function(){"denied"==Notification.permission?notificationApi.manageNotificationBlock():notificationApi.openManageScreen(1)});a(".notification-bell-inactive").on("click",function(){"denied"==Notification.permission?notificationApi.manageNotificationBlock():notificationApi.openManageScreen(1)});if(document.getElementById("notify-subscribe"))a("#notify-subscribe").on("click touchstart",
function(){ga("boldskyen.send","event","Notification_Article","Notification_Desktop","Boldsky");"denied"==Notification.permission?notificationApi.manageNotificationBlock():"default"==Notification.permission?1==BROWSER_SUPPORTS&&(subscribeDevice(),a(".notf-overlay").show()):0==localStorage.getItem("bsenglish_enabled")&&(a("#notification-link").show(),a(".popup-notification-on-off").addClass("onstate"),a(".popup-notification-on-off").removeClass("offstate"),notificationApi.manageFooterEnableClick(1))});
if(document.getElementById("notification-articleblock"))a(".allow-notifications").on("click",function(){"denied"==Notification.permission?(a(".notification-bell").hide(),a(".notification-bell-inactive").show(),notificationApi.manageNotificationBlock()):"default"==Notification.permission?1==BROWSER_SUPPORTS&&(notification_source=3,subscribeDevice(),a(".notf-overlay").show()):(notificationApi.manageOnOff(1,"popup-notification-on-off"),notificationApi.manageArticleBottom(1))});a(document).on("click",
"#closebtn",function(b){b.preventDefault();notificationApi.displayNumberNotification();b=a(this).attr("data-url");var c=a(this).attr("data-index");notificationApi.manageNotificationListView(b,c,"close");notificationApi.deleteData(b)});a(document).on("click","#notanchor",function(b){b=a(this).attr("href");a(this).attr("data-index");var c=a(this).attr("data-url");window.location.href=b+"?utm_source=pn-&utm_medium=pn-article&utm_campaign=pn-cms";b=b.split("?")[0];notificationApi.trackAppClicked(b);notificationApi.deleteData(c)});
a(document).on("click",".popup-notification-on-off",function(b){a(this).hasClass("onstate")?(document.getElementById("notification-link")&&a("#notification-link").show(),notificationApi.manageOnOff(0,"popup-notification-on-off"),document.getElementById("giz-unsubscribe")&&a("#giz-unsubscribe").show(),document.getElementById("giz-emailsubscribe")&&a("#giz-emailsubscribe").hide(),notificationApi.manageArticleBottom(0),document.getElementById("social-notification-promo")&&(document.getElementById("already-subscribed").style.display=
"none",document.getElementById("allow-notifications").style.display="block")):(document.getElementById("notification-link")&&a("#notification-link").hide(),notificationApi.manageOnOff(1,"popup-notification-on-off"),document.getElementById("giz-emailsubscribe")&&a("#giz-emailsubscribe").show(),document.getElementById("giz-unsubscribe")&&a("#giz-unsubscribe").hide(),notificationApi.manageArticleBottom(1),document.getElementById("social-notification-promo")&&(document.getElementById("already-subscribed").style.display=
"block",document.getElementById("allow-notifications").style.display="none"))});a(document).on("click",".notification-clear",function(b){notificationApi.clearData();a(".notification-text").show();a(".notification-num").hide();a(".articlelist").remove();document.getElementById("notf-cont").style.display="none";licount=0});a(".popup-notification-text").on("click",;a(document).on("click",".article-share",;
a(document).on("click",".article-social-close",function(b){a(".article-slider-footer").removeClass("active")});a(".notification-on-off .on-off-link").click(function(){a(this).parent(".notification-on-off").hasClass("onstate")?(a(this).parent(".notification-on-off").removeClass("onstate"),a(this).parent(".notification-on-off").addClass("offstate"),a(".notification-settings-popup").show()):(a(this).parent(".notification-on-off").addClass("onstate"),a(this).parent(".notification-on-off").removeClass("offstate"),
a(".notification-settings-popup").hide())});a(".notification-settings-heading span").click(function(){a(".notification-settings-popup").hide()});a(".article-popup-close").click(function(){a(".article-slider-wrapper,.article-overlay").removeClass("show-popup");a(".notification-settings-popup").hide();a(".article-slider-wrapper").removeClass("hide-popup");a(".notification-settings-clearbox").hide();a("body,html").css("overflow","")});a(".article-popup-settings").click(function(){a(this).parent().addClass("hide-popup");
a(".notification-settings-popup").addClass("show-popup");a(".notification-settings-popup").show()});a(".notification-settings.notfset").click(;a(".no").click(function(){a(".notification-settings-clearbox").hide();a(".notification-settings-popup").show()});a(".yes").click(function(){notificationApi.clearData();a(".notification-settings-popup").removeClass("show-popup");
a(".article-slider-wrapper").removeClass("hide-popup");a(".notification-settings-popup").hide();a(".notification-settings-clearbox").hide();a(".article-slider-wrapper,.article-overlay").addClass("show-popup");a(".article-slider-container").show();a(".article-slider").hide();a(".notification-num").hide()});a(".notification-settings-heading a").click(function(){a(".notification-settings-clearbox").show();a(".notification-settings-popup").hide()});a(".notification-settings.clearnotf").click(;a(".notification-settings-btn").on("click",function(){if(1==a("input[name='block-radio']:checked").val()){var b=document.getElementById("block-from").value;var c=document.getElementById("block-to").value;var d=b+"_"+c;b==c?(a("#error_msg").html('<p style="color:red;font-size:15px;">Start Time and End Time should not be same.</p>').show(),setTimeout(function(){a("#error_msg").hide()},3E3)):(localStorage.setItem("bsenglish_enabled_time",d),notificationApi.manageSettingsStorage(1,
d),notificationApi.manageLocalDbInfo(d),a("#error_msg").html('<p style="color:green;font-size:15px;">Settings data stored successfully.</p>').show(),setTimeout(function(){a("#error_msg").hide()},3E3),a(".notification-bell").show(),a(".notification-bell-inactive").hide())}else 0==a("input[name='block-radio']:checked").val()?(d=a("input[name='block-radio']:checked").val(),localStorage.setItem("bsenglish_enabled_time",0),notificationApi.manageSettingsStorage(1,d),notificationApi.manageLocalDbInfo(0),
a(".notification-bell").show(),a(".notification-bell-inactive").hide(),document.getElementById("social-notification-promo")&&(document.getElementById("already-subscribed").style.display="block",document.getElementById("allow-notifications").style.display="none")):(a("input[name='block-radio']:checked").val(),d=a("input[name='block-radio']:checked").val(),localStorage.setItem("bsenglish_enabled_time",0),notificationApi.manageSettingsStorage(0,d),notificationApi.manageLocalDbInfo(0),a(".notification-bell").hide(),
a(".notification-bell-inactive").show(),document.getElementById("social-notification-promo")&&(document.getElementById("already-subscribed").style.display="none",document.getElementById("allow-notifications").style.display="block")),a("#error_msg").html('<p style="color:green;font-size:15px;">Settings data stored successfully.</p>').show(),setTimeout(function(){a("#error_msg").hide()},3E3)});a(".squaredradio input[name='block-radio']").on("click",function(){1==a(this).val()&&a(this).is(":checked")?
(a("#block-from").removeAttr("disabled"),a("#block-to").removeAttr("disabled")):(a("#block-from").attr("disabled",!0),a("#block-to").attr("disabled",!0))});a(document).on("click",".article-slider-footer a",function(b){var c=a(this).attr("class");console.log(c);var d=a(this).attr("data-url"),e=a(this).attr("data-title");switch(c){case "article-slider-whatsapp":whatsapp_social_url=encodeURIComponent(d);window.location.href="whatsapp://send?text="+encodeURIComponent(e)+" "+whatsapp_social_url;break;
case "article-slider-twitter":c=encodeURIComponent(d);e=encodeURIComponent(e);window.open("https://twitter.com/share?url="+c+"&via=Boldsky&text="+e,"Share on Twitter","menubar=no,toolbar=no,resizable=no,scrollbars=no,height=400,width=600");break;case "article-slider-facebook":e="https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(d),window.open(e,"Share on Facebook","menubar=no,toolbar=no,resizable=no,scrollbars=no,height=400,width=600")}b.preventDefault()})})}catch(a){console.log("Notification Block: "+
a)}try{require(["jquery","bxslider"],function(a){a(".article-slider-web ul")&&a(".article-slider-web ul").bxSlider({pager:!1,slideWidth:320,slideMargin:25,moveSlides:1})})}catch(a){console.log("Notification Bxslider Block: "+a)}}
function promisifyRequest(a){return new Promise(function(b,c){function e(){b(a.result);g()}addEventListener("complete",e);a.addEventListener("success",e);a.addEventListener("error",d);a.addEventListener("abort",d)})}
function IndexDBWrapper(a,b,c){var e=indexedDB.open(a,b);this.ready=promisifyRequest(e);e.onupgradeneeded=
function onPushSubscription(a){$(".notf-overlay").hide();var b=getUserCookie("manage_bsenglish_notification");console.log("pushSubscription = ");var c=localStorage.getItem("bsenglish_subscription_id"),e=localStorage.getItem("bsenglish_enabled");if(""==c||"undefined"==c||null==c)c="";if(""==e||"undefined"==e||null==e)e="";var d=localStorage.getItem("web_id");if(""==d||"undefined"==d||null==d)d="";gsid="subscriptionId"in a?a.subscriptionId:a.endpoint.replace("https://fcm.googleapis.com/fcm/send/","");
""!=gsid&&(a=gsid.replace("https://android.googleapis.com/gcm/send/",""),localStorage.setItem("oi_gcm_id",a));console.log(gsid);fetch("/scripts/cms/controller.php?module=subscription&regId="+gsid+"&sys_gen_id="+c+"&notification_source="+notification_source+"&pagetype="+noti_page_type+"&category_name="+noti_module_name,{method:"post"}).then(function(a){a.text().then(function(a){console.log(a);var e=JSON.parse(a);""==c&&(localStorage.setItem("bsenglish_subscription_id",e.id),localStorage.setItem("bsenglish_enabled",
1));""==d&&localStorage.setItem("web_id",e.wi);if("updated"==e.msg)$(".notification-bell").show(),$(".notification-bell-inactive").hide(),localStorage.setItem("bsenglish_enabled",1),document.getElementById("notification-link")&&$("#notification-link").hide(),document.getElementById("giz-subscribe")&&$("#giz-subscribe").hide(),document.getElementById("giz-emailsubscribe")&&$("#giz-emailsubscribe").show(),document.getElementById("social-notification-promo")&&(document.getElementById("already-subscribed").style.display=
"block",document.getElementById("allow-notifications").style.display="none"),notificationApi.manageArticleBottom(1);else if("success"==e.msg){$(".notification-bell").show();if("undefined"==typeof b||null==b)$(".manage-notification").show(),setUserCookie("manage_bsenglish_notification",1,1440,"/","",""),setTimeout(5E3),$(".manage-notification-close").on("click",;onRegisterNotify(service_worker);localStorage.setItem("bsenglish_enabled",
1);document.getElementById("notification-link")&&$("#notification-link").hide();document.getElementById("giz-subscribe")&&$("#giz-subscribe").hide();document.getElementById("giz-emailsubscribe")&&$("#giz-emailsubscribe").show();document.getElementById("social-notification-promo")&&(document.getElementById("already-subscribed").style.display="block",document.getElementById("allow-notifications").style.display="none");notificationApi.manageArticleBottom(1)}window.indexedDB=window.indexedDB||window.mozIndexedDB||
window.webkitIndexedDB||window.msIndexedDB;window.IDBTransaction=window.IDBTransaction||window.webkitIDBTransaction||window.msIDBTransaction;window.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange||window.msIDBKeyRange;window.indexedDB||window.alert("Your browser doesn't support a stable version of IndexedDB.");var g,h=window.indexedDB.open(dbname,dbversion),m=function(a){a.objectStoreNames.contains(dbname)||a.createObjectStore(dbname);a.objectStoreNames.contains(ARTICLE_STORE)||a.createObjectStore(ARTICLE_STORE);
a.objectStoreNames.contains(UIDSTORE)||a.createObjectStore(UIDSTORE)};console.log(h);h.onerror=h.onsuccess=function(a){g=h.result;console.log("success: "+g);g.setVersion&&g.version!=dbversion&&(g.setVersion(dbversion).onsuccess=;a=g.transaction([dbname],"readwrite");a.objectStore(dbname).put(gsid,"subscriptionid");a.objectStore(dbname).put(e.id,"server_id")};h.onupgradeneeded=function(a){console.log(a.target.result);m(a.target.result)}})})["catch"](function(a){console.log("Fetch Error :-S",
a)})}function subscribeDevice(){navigator.serviceWorker.ready.then(function(a){service_worker=a;a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:urlBase64ToUint8Array("BLxHAymMcEyD7XlxsWcw1iIcook4nwqrDXygugkCG8ckzZCqGEhJrwvKVu1U0__NaBEhEFsh8KewQdpNqZqc8Us")}).then(.catch(function(a){"granted"==Notification.permission?$(".notf-overlay").hide():"default"==Notification.permission?$(".notf-overlay").hide():"denied"==Notification.permission&&$(".notf-overlay").hide();
"denied"===Notification.permission?(console.log("Permission for Notifications was denied"),fetch("/scripts/cms/controller.php?module=subscription&type=notificationBlocked&device_type=computer",{method:"post"}).then():console.log("Unable to subscribe to push.",a)})})}
function unsubscribeDevice(){navigator.serviceWorker.ready.then(function(a){a.pushManager.getSubscription().then(function(a){a&&a.unsubscribe().then(function(a){var b=localStorage.getItem("bsenglish_subscription_id");if(""==b||"undefined"==b||null==b)b="";""!=b&&fetch("/scripts/cms/controller.php?module=subscription&type=unsubscribe&sys_gen_id="+b+"&website_id=113",{method:"post"}).then(function(a){a.text().then(function(c){console.log(c);c=JSON.parse(c);""==b&&localStorage.setItem("bsenglish_subscription_id",
c.id);console.log("Unsubscribed from push: ",a)})})}).catch(function(a){console.log("Unsubscription error: ",a)})}).catch(function(a){console.error("Error thrown while unsubscribing from push messaging.",a)})})}function onRegisterNotify(a){try{a.showNotification("www.boldsky.com",{body:"Thank you for subscribing to Boldsky News alerts.",icon:"/images/boldsky144.png",vibrate:[300,100,400],tag:"bsenglish-welcome",data:{url:"https://www.boldsky.com"}})}catch(b){}}
function permissionStatusChange(a){switch(console.log("permissionStatusChange = ",a),a.status){case "denied":console.log("denied");break;case "granted":console.log("granted");break;case "prompt":console.log("prompt")}}
function setUpPushPermission(){navigator.permissions.query({name:"push",userVisibleOnly:!0}).then(function(a){permissionStatusChange(a);a.onchange=navigator.serviceWorker.ready.then(function(a){a.pushManager.getSubscription().then(function(a){return a})["catch"](})})["catch"](}
function setUpNotificationPermission(){return"denied"===Notification.permission?console.log("Ooops Notifications are Blocked","Unfortunately notifications are permanently blocked. Please unblock / allow them to switch on push notifications."):"default"===Notification.permission?1:void navigator.serviceWorker.ready.then(function(a){a.pushManager.getSubscription().then(})}
function initialiseState(){return"PushManager"in window?"permissions"in navigator?void setUpPushPermission():void setUpNotificationPermission():1}window.addEventListener("load",function(){1==BROWSER_SUPPORTS&&("granted"==Notification.permission?(console.log("Granted Mode"),1==BROWSER_SUPPORTS&&subscribeDevice()):"default"==Notification.permission?console.log("Default Mode"):"denied"==Notification.permission&&console.log("Denied Mode"))});
