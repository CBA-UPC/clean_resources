"use strict";(self.webpackChunkshop_promise_pdp=self.webpackChunkshop_promise_pdp||[]).push([[432],{5432:(t,e,n)=>{n.r(e),n.d(e,{BaseOtelService:()=>vr,DefaultOtelService:()=>li,DiagConsoleLogger:()=>Tt,DiagLogLevel:()=>ut,EventType:()=>D,INVALID_SPANID:()=>Kt,INVALID_SPAN_CONTEXT:()=>$t,INVALID_TRACEID:()=>Yt,InstantaneousMetricReader:()=>tr,MetricInstrumentType:()=>pr,Navigation:()=>H,NavigationResult:()=>B,NoopOtelService:()=>pi,Performance:()=>Z,ProxyTracer:()=>ve,ProxyTracerProvider:()=>me,ROOT_CONTEXT:()=>gt,SamplingDecision:()=>le,SpanKind:()=>fe,SpanStatusCode:()=>pe,TraceFlags:()=>Ft,ValueType:()=>mt,baggageEntryMetadataFromString:()=>yt,context:()=>Se,createContextKey:()=>vt,createNoopMeter:()=>Vt,createTraceState:()=>Oe,defaultTextMapGetter:()=>jt,defaultTextMapSetter:()=>Gt,diag:()=>Re,isClientMetricsBody:()=>dr,isSpanContextValid:()=>se,isValidMetricName:()=>yr,isValidSpanId:()=>ue,isValidTraceId:()=>ae,metrics:()=>Ae,now:()=>V,propagation:()=>Be,serializableClone:()=>hi,throttle:()=>Qn,trace:);var r,o,i,a,u=-1,s=c=l=f=p=h=d=y=v=_=-1,m=g=E=function(){addEventListener("visibilitychange",g,!0),addEventListener("prerenderingchange",g,!0)},T=b=w=O=[1800,3e3],S={passive:!0,capture:!0},R=new Date,P=L=A=M=C=[100,300],x=[2500,4e3],N={},I=[800,1800],U=k=let D,B;unction F(t,e){try{if(performance.getEntries().filter(().forEach((t=>e(t))),!G("PerformanceObserver"))return;new PerformanceObserver((n=>{n.getEntriesByType(t).forEach(()})).observe({type:t,buffered:!0})}catch(t){}}!D||(D={})),function(t){t[t.Finished=0]="Finished",t[t.TimedOut=1]="TimedOut",t[t.Cancelled=2]="Cancelled"}(B||(B={}));const j="undefined"!=typeof PerformanceObserver;onst X=[D.TimeToFirstByte,D.TimeToFirstPaint,D.TimeToFirstContentfulPaint,D.DomContentLoaded,D.FirstInputDelay,D.Load];class H{onstructor({start:t,duration:e,target:n,events:r,result:o},i){this.metadata=i,this.start=t,this.duration=e,this.target=n,this.events=r,this.result=o}otalDurationByEventType(t,{countOverlaps:e=!1}={}){const n=this.eventsByType(t),{start:r}=this;return 0===n.length?0:(e?n:function(t){const e=new Set;return t.forEach((t=>{const n=[...e].filter((e=>function(t,e){const n=t.start+t.duration,r=e.start+e.duration;return t.start>=e.start&&t.start<=r||n>=e.start&&n<=r||e.start>=t.start&&e.start<=n}(t,e)));for(const t of n)e.delete(t);e.add(function(t){const[e,...n]=t;return n.reduce(((t,e)=>{const n=Math.min(e.start,t.start);return{start:n,duration:Math.max(e.start+e.duration,t.start+t.duration)-n}}),e)}([t,...n]))})),[...e]}(n)).reduce(((t,{start:e,duration:n})=>t+n-Math.max(0,r-e)),0)}et timeToUsable(){const t=this.eventsByType(D.Usable)[0];return t?t.start-this.start:this.timeToComplete}get resourceEvents(){return[...this.eventsByType(D.ScriptDownload),...this.eventsByType(D.StyleDownload)]}get totalDownloadSize(){const t=this.resourceEvents;if(0!==t.length)return t.reduce(((t,{metadata:{size:e}})=>null==e||"number"!=typeof t?void 0:t+e),0)}get cacheEffectiveness(){const t=this.resourceEvents;if(0!==t.length&&!t.some((({metadata:{size:t}})=>null==t)))return t.filter(().length/t.length}toJSON({removeEventMetadata:t=!0,removeLifecycleEvents:e=!0}={}){const n=e?this.events.filter(():this.events,r=t?n.map(():n;return{start:this.start,duration:this.duration,target:this.target,events:r,result:this.result}}}function z(t,e){return!(t.type!==D.ScriptDownload&&t.type!==D.StyleDownload||e.type!==D.ScriptDownload&&e.type!==D.StyleDownload)&&t.type===e.type&&t.metadata.name===e.metadata.name}const W=new Map([[D.ScriptDownload,z],[D.StyleDownload,z]]);function K({type:t},{type:e}){return t===e}class Y{constructor({timeOrigin:t,start:e=V(),target:n=window.location.pathname},r){this.events=[],this.metadata=r,this.timeOrigin=t,this.start=this.normalize(e),this.target=n}event(t,e=!1){const n={...t,start:this.normalize(t.start)};if(e){const r="function"==typeof e?e:W.get(t.type)||K,o=this.events.findIndex(();o>=0?this.events.splice(o,1,n):this.events.push(n)}else this.events.push(n)}cancel(t=V()){return this.end(t,B.Cancelled)}timeout(t=V()){return this.end(t,B.TimedOut)}finish(t=V()){return this.end(t,B.Finished)}end(t,e){return new H({target:this.target,start:this.start,duration:this.normalize(t)-this.start,events:this.events.sort((),result:e},this.metadata)}const $=["script","css","link"];class Z{constructor(){var t;this.supportsObserver=G("PerformanceObserver"),this.supportsMarks=G("PerformanceMark"),this.supportsNavigationEntries=G("PerformanceNavigationTiming"),this.supportsTimingEntries=G("PerformanceTiming"),this.supportsLongtaskEntries=G("PerformanceLongTaskTiming"),this.supportsResourceEntries=G("PerformanceResourceTiming"),this.supportsPaintEntries=G("PerformancePaintTiming"),this.timeOrigin="undefined"==typeof performance?0:performance.timeOrigin||Date.now()-performance.now(),this.supportsDetailedTime=j,this.supportsDetailedEvents=this.supportsNavigationEntries&&this.supportsLongtaskEntries&&this.supportsResourceEntries&&this.supportsPaintEntries,this.lifecycleEvents=[],this.navigationCount=0,this.eventHandlers={navigation:new Set,inflightNavigation:new Set,lifecycleEvent:new Set},this.start({timeStamp:0}),function(t){const{pushState:e,replaceState:n}=window.history;let r=window.location.pathname;const o=e=>{const n=e?new URL(e,window.location.href).pathname:void 0;n!==window.location.pathname&&(r=n,t({target:n}))};window.addEventListener("popstate",(()=>{r!==window.location.pathname&&(r=window.location.pathname,t())})),history.replaceState=(...t)=>{var e,r;null==(null===(e=history.state)||void 0===e?void 0:e.idx)&&0===(null===(r=t[0])||void 0===r?void 0:r.idx)||o(t[2]),n.call(history,...t)},history.pushState=(...t)=>{o(t[2]),e.call(history,...t)}}(this.start.bind(this)),!this.supportsTimingEntries||this.supportsDetailedTime&&this.supportsNavigationEntries?F("navigation",(t=>{t.domContentLoadedEventStart>0&&this.lifecycleEvent({type:D.DomContentLoaded,start:t.domContentLoadedEventStart,duration:0}),t.loadEventStart>0&&this.lifecycleEvent({type:D.Load,start:t.loadEventStart,duration:0})})):(t=({domContentLoadedEventStart:t,loadEventStart:e})=>{this.lifecycleEvent({type:D.DomContentLoaded,start:t-this.timeOrigin,duration:0}),this.lifecycleEvent({type:D.Load,start:e-this.timeOrigin,duration:0})},"undefined"!=typeof document&&"undefined"!=typeof performance&&("complete"===document.readyState?t(performance.timing):window.addEventListener("load",(,{once:!0}))),this.supportsResourceEntries&&F("resource",(t=>{if(!$.includes(t.initiatorType))return;const e=function({initiatorType:t,name:e}){return"link"===t?function(t){return t.endsWith(".css")?D.StyleDownload:t.endsWith(".js")?D.ScriptDownload:"unsupported"}(e):t)}(t);"unsupported"!==e&&this.event({type:e,start:t.startTime,duration:t.duration,metadata:{name:t.name,size:t.encodedBodySize,cached:0===t.transferSize&&t.decodedBodySize>0}},{replace:!0})})),this.supportsLongtaskEntries&&F("longtask",(t=>{this.event({type:D.LongTask,start:t.startTime,duration:t.duration})})),this.supportsPaintEntries&&F("paint",(t=>{"first-paint"===t.name&&this.lifecycleEvent({type:D.TimeToFirstPaint,start:t.startTime,duration:0})})),k((t=>{this.lifecycleEvent({type:D.TimeToFirstByte,start:t.value,duration:0})})),(t=>{this.lifecycleEvent({type:D.TimeToFirstContentfulPaint,start:t.value,duration:0})})),(t=>{this.lifecycleEvent({type:D.FirstInputDelay,start:V()-t.value,duration:t.value})})),(t=>{this.lifecycleEvent({type:D.TimeToLargestContentfulPaint,start:t.value,duration:0})}))}mark(t,e){this.supportsMarks&&window.performance.mark(`${e}::${t}`)}on(t,e){const n=this.eventHandlers[t];if(n.add(e),"navigation"===t&&null!=this.firstNavigation&&1===this.navigationCount&&e(this.firstNavigation),"inflightNavigation"===t&&null!=this.inflightNavigation&&e(),"lifecycleEvent"===t)for(const t of this.lifecycleEvents)e(t);returnevent(t,{replace:e=!1}={}){null!=this.inflightNavigation&&this.inflightNavigation.event(t,e)}start({timeStamp:t=V(),target:e=window.location.pathname,timeout:n=6e4}={}){this.clearTimeout(),this.inflightNavigation&&this.record(this.inflightNavigation.cancel(t)),this.inflightNavigation=new Y({timeOrigin:this.timeOrigin,start:t,target:e},{index:this.navigationCount,supportsDetailedTime:this.supportsDetailedTime,supportsDetailedEvents:this.supportsDetailedEvents}),this.navigationTimeout=setTimeout((,n);for(const t of this.eventHandlers.inflightNavigation)t()}usable(t=V()){this.event({type:D.Usable,start:t,duration:0},{replace:!0})}finish(t=V()){if(this.clearTimeout(),null==this.inflightNavigation)return;const e=this.inflightNavigation.finish(t);this.firstNavigation=this.firstNavigation||e,this.record(e),this.inflightNavigation=void 0}lifecycleEvent(t){if(null==this.lifecycleEvents.find(()&&!(t.start<0)){this.event(t),this.lifecycleEvents.push(t);for(const e of this.eventHandlers.lifecycleEvent)e(t)}}timeoutcord(t){this.navigationCount+=1;for(const e of this.eventHandlers.navigation)e(t)}}var q="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{},J="1.4.1",Q=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,tt=J),et=J.split(".")[0],nt=Symbol.for("opentelemetry.js.api."+et),rt=q;function ot(t,e,n,r){var o;void 0===r&&(r=!1);var i=rt[nt]=null!==(o=rt[nt])&&void 0!==o?o:{version:J};if(!r&&i[t]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+t);return n.error(a.stack||a.message),!1}return i.version!==J?(a=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+t+" does not match previously registered API v"+J),n.error(a.stack||a.message),!1):(i[t]=e,n.debug("@opentelemetry/api: Registered a global for "+t+" v"+J+"."),!0)}r ut,st=);ut||(ut={}));var lt=function(){function t(){function t(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=it("diag");if(r)return r[t].apply(r,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(e),!1))}}var e=this;e.setLogger=e.disable=e.createComponentLogger=function(t){return new st(t)},e.verbose=t("verbose"),e.debug=t("debug"),e.info=t("info"),e.warn=t("warn"),e.error=t("error")}return t.instance=function(){return this._instance||(this._instance=new t),this._instance},t}(),ft=function(){eturn t.prototype.getEntry=t.prototype.getAllEntries=t.prototype.setEntry=t.prototype.removeEntry=t.prototype.removeEntries=function(){for(var e,n,r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=new t(this._entries);try{for(var a=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(r),u=a.next();!u.done;u=a.next()){var s=u.value;i._entries.delete(s)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i},t.prototype.clear=t}(),pt=Symbol("BaggageEntryMetadata"),ht=lt.instance();nction vt(t){return Symbol.for(t)}var _t,mt,gt=new Et=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Tt=bt=(_t=function(t,e){return _t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},_t(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}_t(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),wt=),Ot=function(){},St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bt(e,t),e.prototype.add=function(t,e){},e}(Ot),Rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bt(e,t),e.prototype.add=function(t,e){},e}(Ot),Pt=Ot),Lt=),At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bt(e,t),e}(Lt),Mt=Lt),Ct=function(t){eturn bt(e,t),e}(Lt),xt=new wt,Nt=new St,It=new Pt,Ut=new Rt,kt=new At,Dt=new Mt,Bt=new Ct;function(t){t[t.INT=0]="INT",t[t.DOUBLE=1]="DOUBLE"}(mt||(mt={}));var Ft,jt={get:keys:,Gt={set:,Xt=function(){function t(){}return t.prototype.active=t.prototype.with=function(t,e,n){for(var r=[],o=3;o<arguments.length;o++)r[o-3]=arguments[o];return e.call.apply(e,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([n],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(r),!1))},t.prototype.bind=function(t,e){return e},t.prototype.enable=function(){return this},t.prototype.disable=function(){return this},t}(),Ht="context",zt=new Xt,Wt=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.setGlobalContextManager=function(t){return ot(Ht,t,lt.instance())},t.prototype.active=function(){return this._getContextManager().active()},t.prototype.with=function(t,e,n){for(var r,o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return(r=this._getContextManager()).with.apply(r,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([t,e,n],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(o),!1))},t.prototype.bind=function(t,e){return this._getContextManager().bind(t,e)},t.prototype._getContextManager=function(){return it(Ht)||zt},t.prototype.disable=t}();!Ft||(Ft={}));var Kt="0000000000000000",Yt="00000000000000000000000000000000",$t={traceId:Yt,spanId:Kt,traceFlags:Ft.NONE},Zt=),qt=vt("OpenTelemetry Context Key SPAN");function Jt(t){return t.getValue(qt)||void 0}function Qt(){return Jt(Wt.getInstance().active())}function te(t,e){return t.setValue(qt,e)}function ee(t){return t.deleteValue(qt)}r oe=/^([0-9a-f]{32})$/i,ie=/^[0-9a-f]{16}$/i;function ae(t){return oe.test(t)&&t!==Yt}nction ce(t){return new Zt(t)}var le,fe,pe,he=Wt.getInstance(),de=function(){function t(){}return t.prototype.startSpan=function(t,e,n){if(void 0===n&&(n=he.active()),Boolean(null==e?void 0:e.root))return new Zt;var r,o=n&&re(n);return"object"==typeof(r=o)&&"string"==typeof r.spanId&&"string"==typeof r.traceId&&"number"==typeof r.traceFlags&&se(o)?new Zt(o):new Zt},t.prototype.startActiveSpan=t}(),ye=new de,ve=),_e=new()),me=);!function(t){t[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"}(le||(le={})),function(t){t[t.INTERNAL=0]="INTERNAL",t[t.SERVER=1]="SERVER",t[t.CLIENT=2]="CLIENT",t[t.PRODUCER=3]="PRODUCER",t[t.CONSUMER=4]="CONSUMER"}(fe||(fe={})),pe||(pe={}));var ge="[_0-9a-z-*/]",Ee=new RegExp("^(?:[a-z]"+ge+"{0,255}|[a-z0-9]"+ge+"{0,240}@[a-z]"+ge+"{0,13})$"),Te=/^[ -~]{0,255}[!-~]$/,be=/,|=/,we=);ar Se=Wt.getInstance(),Re=lt.instance(),Pe=new()),Le="metrics",Ae=).getInstance(),Me=),Ce=vt("OpenTelemetry Baggage Key");ke="propagation",De=new Me,Be=).getInstance(),Ve="trace",Fe=).getInstance(),je=),Ge=Xe=r We,Ke=Error);ction qe(t,e){var n=[];return t.forEach((function(t){n.push.apply(n,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(e(t)),!1))})),n}!We||(We={}));var Je,Qe=);!Je||(Je={}));var tn=),en=function(){eturn t.prototype.createAccumulation=t.prototype.merge=t.prototype.diff=t.prototype.toMetricData=function(t,e,n,r){return{descriptor:t,aggregationTemporality:e,dataPointType:Je.SUM,dataPoints:n.map((function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2),n=e[0],o=e[1];return{attributes:n,startTime:o.startTime,endTime:r,value:o.toPointValue()}})),isMonotonic:this.monotonic}},t}(),nn=Math.pow(10,6),rn=Math.pow(10,9); sn,cn=function(){eturn t.prototype.record=function(t){this._current=t,this.sampleTime=on(Date.now())},t.prototype.setStartTime=function(t){this.startTime=t},t.prototype.toPointValue=function(){return this._current},t}(),ln=function(){eturn t.prototype.createAccumulation=t.prototype.merge=function(t,e){var n=un(e.sampleTime)>=un(t.sampleTime)?e:t;return new cn(t.startTime,n.toPointValue(),n.sampleTime)},t.prototype.diff=function(t,e){var n=un(e.sampleTime)>=un(t.sampleTime)?e:t;return new cn(e.startTime,n.toPointValue(),n.sampleTime)},t.prototype.toMetricData=function(t,e,n,r){return{descriptor:t,aggregationTemporality:e,dataPointType:Je.GAUGE,dataPoints:n.map((function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2),n=e[0],o=e[1];return{attributes:n,startTime:o.startTime,endTime:r,value:o.toPointValue()}}))}},t}();function fn(t,e,n){var r,o,i;return{name:t,type:e,description:null!==(r=null==n?void 0:n.description)&&void 0!==r?r:"",unit:null!==(o=null==n?void 0:n.unit)&&void 0!==o?o:"",valueType:null!==(i=null==n?void 0:n.valueType)&&void 0!==i?i:mt.DOUBLE}}!sn||(sn={}));var pn=function(){eturn t.prototype.record=function(t){this._current.count+=1,this._current.sum+=t,this._recordMinMax&&(this._current.min=Math.min(t,this._current.min),this._current.max=Math.max(t,this._current.max),this._current.hasMinMax=!0);var e=function(t,e){for(var n=0,r=t.length-1;r-n>1;){var o=Math.trunc((r+n)/2);t[o]<=e?n=o:r=o-1}return t[r]<=e?r:t[n]<=e?n:-1}(this._boundaries,t);this._current.buckets.counts[e+1]+=1},t.prototype.setStartTime=t.prototype.toPointValue=function(){return this._current},t}(),hn=function(){eturn t.prototype.createAccumulation=t.prototype.merge=t.prototype.diff=t.prototype.toMetricData=function(t,e,n,r){return{descriptor:t,aggregationTemporality:e,dataPointType:Je.HISTOGRAM,dataPoints:n.map((function(e){var n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(e,2),o=n[0],i=n[1],a=i.toPointValue(),u=t.type===sn.UP_DOWN_COUNTER||t.type===sn.OBSERVABLE_GAUGE||t.type===sn.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:o,startTime:i.startTime,endTime:r,value:{min:a.hasMinMax?a.min:void 0,max:a.hasMinMax?a.max:void 0,sum:u?void 0:a.sum,buckets:a.buckets,count:a.count}}}))}},t}(),dn=yn=vn=function(){eturn Object.defineProperty(t.prototype,"offset",{get:enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return 0===this.backing.length||this.indexEnd===this.indexStart&&0===this.at(0)?0:this.indexEnd-this.indexStart+1},enumerable:!1,configurable:!0}),t.prototype.counts=t.prototype.at=t.prototype.incrementBucket=function(t,e){this.backing.increment(t,e)},t.prototype.decrementBucket=t.prototype.trim=t.prototype.downscale=t.prototype.clone=t.prototype._rotate=t.prototype._relocateBucket=t}(),_n=),mn=Math.pow(2,-1022);function gn(t){var e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,t),((2146435072&e.getUint32(0))>>20)-1023}function En(t){var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,t);var n=e.getUint32(0),r=e.getUint32(4);return(1048575&n)*Math.pow(2,32)+r}ar bn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bn(e,t),e}(Error),On=function(){eturn t.prototype.mapToIndex=function(t){return t<mn?this._minNormalLowerBoundaryIndex():gn(t)+this._rightShift(En(t)-1,52)>>this._shift},t.prototype.lowerBoundary=function(t){var e=this._minNormalLowerBoundaryIndex();if(t<e)throw new wn("underflow: "+t+" is < minimum lower boundary: "+e);var n=this._maxNormalLowerBoundaryIndex();if(t>n)throw new wn("overflow: "+t+" is > maximum lower boundary: "+n);return Tn(1,t<<this._shift)},Object.defineProperty(t.prototype,"scale",{get:enumerable:!1,configurable:!0}),t.prototype._minNormalLowerBoundaryIndex=function(){var t=-1022>>this._shift;return this._shift<2&&t--,t},t.prototype._maxNormalLowerBoundaryIndex=function(){return 1023>>this._shift},t.prototype._rightShift=t}(),Sn=function(){function t(t){this._scale=t,this._scaleFactor=Tn(Math.LOG2E,t),this._inverseFactor=Tn(Math.LN2,-t)}return t.prototype.mapToIndex=function(t){if(t<=mn)return this._minNormalLowerBoundaryIndex()-1;if(0===En(t))return(gn(t)<<this._scale)-1;var e=Math.floor(Math.log(t)*this._scaleFactor),n=this._maxNormalLowerBoundaryIndex();return e>=n?n:e},t.prototype.lowerBoundary=function(t){var e=this._maxNormalLowerBoundaryIndex();if(t>=e){if(t===e)return 2*Math.exp((t-(1<<this._scale))/this._scaleFactor);throw new wn("overflow: "+t+" is > maximum lower boundary: "+e)}var n=this._minNormalLowerBoundaryIndex();if(t<=n){if(t===n)return mn;if(t===n-1)return Math.exp((t+(1<<this._scale))/this._scaleFactor)/2;throw new wn("overflow: "+t+" is < minimum lower boundary: "+n)}return Math.exp(t*this._inverseFactor)},Object.defineProperty(t.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),t.prototype._minNormalLowerBoundaryIndex=function(){return-1022<<this._scale},t.prototype._maxNormalLowerBoundaryIndex=function(){return(1024<<this._scale)-1},t}(),Rn=Array.from({length:31},(function(t,e){return e>10?new Sn(e-10):new On(e-10)}));function Pn(t){if(t>20||t<-10)throw new wn("expected scale >= -10 && <= 20, got: "+t);return Rn[t+10]}var Ln,An=),Mn=function(){function t(t,e,n,r,o,i,a,u,s,c,l){void 0===e&&(e=160),void 0===n&&(n=!0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===i&&(i=0),void 0===a&&(a=Number.POSITIVE_INFINITY),void 0===u&&(u=Number.NEGATIVE_INFINITY),void 0===s&&(s=new vn),void 0===c&&(c=new vn),void 0===l&&(l=Pn(20)),this.startTime=t,this._maxSize=e,this._recordMinMax=n,this._sum=r,this._count=o,this._zeroCount=i,this._min=a,this._max=u,this._positive=s,this._negative=c,this._mapping=l,this._maxSize<2&&(Re.warn("Exponential Histogram Max Size set to "+this._maxSize+",                 changing to the minimum size of: 2"),this._maxSize=2)}return t.prototype.record=t.prototype.setStartTime=function(t){this.startTime=t},t.prototype.toPointValue=Object.defineProperty(t.prototype,"sum",{get:function(){return this._sum},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"zeroCount",{get:function(){return this._zeroCount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"positive",{get:function(){return this._positive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"negative",{get:function(){return this._negative},enumerable:!1,configurable:!0}),t.prototype.updateByIncrement=t.prototype.merge=t.prototype.diff=t.prototype.clone=t.prototype._updateBuckets=t.prototype._incrementIndexBy=t.prototype._grow=function(t,e){var n=t.backing.length,r=t.indexBase-t.indexStart,o=n-r,i=e);i>this._maxSize&&(i=this._maxSize);var a=i-r;t.backing.growTo(i,o,a)},t.prototype._changeScale=t.prototype._downscale=function(t){if(0!==t){if(t<0)throw new Error("impossible change of scale: "+this.scale);var e=this._mapping.scale-t;this._positive.downscale(t),this._negative.downscale(t),this._mapping=Pn(e)}},t.prototype._minScale=t.prototype._highLowAtScale=t.prototype._mergeBuckets=t.prototype._diffBuckets=t}(),Cn=function(){function t(t,e){this._maxSize=t,this._recordMinMax=e,this.kind=We.EXPONENTIAL_HISTOGRAM}return t.prototype.createAccumulation=function(t){return new Mn(t,this._maxSize,this._recordMinMax)},t.prototype.merge=function(t,e){var n=e.clone();return n.merge(t),n},t.prototype.diff=t.prototype.toMetricData=function(t,e,n,r){return{descriptor:t,aggregationTemporality:e,dataPointType:Je.EXPONENTIAL_HISTOGRAM,dataPoints:n.map((function(e){var n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(e,2),o=n[0],i=n[1],a=i.toPointValue(),u=t.type===sn.UP_DOWN_COUNTER||t.type===sn.OBSERVABLE_GAUGE||t.type===sn.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:o,startTime:i.startTime,endTime:r,value:{min:a.hasMinMax?a.min:void 0,max:a.hasMinMax?a.max:void 0,sum:u?void 0:a.sum,positive:{offset:a.positive.offset,bucketCounts:a.positive.bucketCounts},negative:{offset:a.negative.offset,bucketCounts:a.negative.bucketCounts},count:a.count,scale:a.scale,zeroCount:a.zeroCount}}}))}},t}(),xn=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nn=),In=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xn(e,t),e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new Qe,e}(Nn),Un=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xn(e,t),e.prototype.createAggregator=function(t){switch(t.type){case sn.COUNTER:case sn.OBSERVABLE_COUNTER:case sn.HISTOGRAM:return e.MONOTONIC_INSTANCE;default:return e.NON_MONOTONIC_INSTANCE}},e.MONOTONIC_INSTANCE=new en(!0),e.NON_MONOTONIC_INSTANCE=new en(!1),e}(Nn),kn=Nn),Dn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xn(e,t),e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new hn([0,5,10,25,50,75,100,250,500,1e3],!0),e}(Nn),Bn=function(t){function e(e,n){void 0===n&&(n=!0);var r=t.call(this)||this;if(r._recordMinMax=n,void 0===e||0===e.length)throw new Error("HistogramAggregator should be created with boundaries.");e=(e=e.concat()).sort(();var o=e.lastIndexOf(-1/0),i=e.indexOf(1/0);return-1===i&&(i=void 0),r._boundaries=e.slice(o+1,i),r}return xn(e,t),e.prototype.createAggregator=function(t){return new hn(this._boundaries,this._recordMinMax)},e}(Nn),Vn=function(t){eturn xn(e,t),e.prototype.createAggregator=e}(Nn),Fn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xn(e,t),e.prototype._resolve=function(t){switch(t.type){case sn.COUNTER:case sn.UP_DOWN_COUNTER:case sn.OBSERVABLE_COUNTER:case sn.OBSERVABLE_UP_DOWN_COUNTER:return Gn;case sn.OBSERVABLE_GAUGE:return Xn;case sn.HISTOGRAM:return Hn}return Re.warn("Unable to recognize instrument type: "+t.type),jn},e.prototype.createAggregator=e}(Nn),jn=new In,Gn=new Un,Xn=new kn,Hn=new Dn,zn=new Vn,Wn=new Fn;!function(t){t[t.DELTA=0]="DELTA",t[t.CUMULATIVE=1]="CUMULATIVE"}(Ln||(Ln={}));var Kn,Yn=function(t){return Nn.Default()},$n=function(t){return Ln.CUMULATIVE},Zn=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},qn=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Jn=function(){function t(t){var e,n;this._shutdown=!1,this._aggregationSelector=null!==(e=null==t?void 0:t.aggregationSelector)&&void 0!==e?e:Yn,this._aggregationTemporalitySelector=null!==(n=null==t?void 0:t.aggregationTemporalitySelector)&&void 0!==n?n:$n}return t.prototype.setMetricProducer=t.prototype.selectAggregation=function(t){return this._aggregationSelector(t)},t.prototype.selectAggregationTemporality=function(t){return this._aggregationTemporalitySelector(t)},t.prototype.onInitialized=function(){},t.prototype.collect=function(t){return Zn(this,void 0,void 0,(function(){return qn(this,(function(e){if(void 0===this._metricProducer)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");return[2,this._metricProducer.collect({timeoutMillis:null==t?void 0:t.timeoutMillis})]}))}))},t.prototype.shutdown=function(t){return Zn(this,void 0,void 0,(function(){return qn(this,(function(e){switch(e.label){case 0:return this._shutdown?(Re.error("Cannot call shutdown twice."),[2]):null!=(null==t?void 0:t.timeoutMillis)?[3,2]:[4,this.onShutdown()];case 1:return e.sent(),[3,4];case 2:return[4,Ye(this.onShutdown(),t.timeoutMillis)];case 3:e.sent(),e.label=4;case 4:return this._shutdown=!0,[2]}}))}))},t.prototype.forceFlush=function(t){return Zn(this,void 0,void 0,(function(){return qn(this,(function(e){switch(e.label){case 0:return this._shutdown?(Re.warn("Cannot forceFlush on already shutdown MetricReader."),[2]):null!=(null==t?void 0:t.timeoutMillis)?[3,2]:[4,this.onForceFlush()];case 1:case 3:return e.sent(),[2];case 2:return[4,Ye(this.onForceFlush(),t.timeoutMillis)]}}))}))},t}();function Qn(t,e,{leading:n=!0,trailing:r=!0}={}){let o,i,a,u=null,s=0;function c(){s=!1===n?0:Date.now(),u=null,o&&(i=t.apply(a,o)),a=null,o=null}return function(...l){const f=Date.now();s||!1!==n||(s=f);const p=e-(f-s);return a=this,o=l,p<=0||p>e?(u&&(clearTimeout(u),u=null),s=f,o&&(i=t.apply(a,o)),a=null,o=null):u||!1===r||(u=setTimeout(c,p)),i}}!function(t){t[t.SUCCESS=0]="SUCCESS",t[t.FAILED=1]="FAILED"}(Kn||(Kn={}));class tr extends Jn{constructor({exporter:t,throttleLimit:e}){var n,r;super({aggregationSelector:null===(n=t.selectAggregation)||void 0===n?void 0:n.bind(t),aggregationTemporalitySelector:null===(r=t.selectAggregationTemporality)||void 0===r?void 0:r.bind(t)}),this._exporter=void 0,this._exporter=t,this.onForceFlush=Qn(this.onForceFlush,e)}async onForceFlush(){const{resourceMetrics:t,errors:e}=await this.collect({});return e.length>0&&Re.error("PeriodicExportingMetricReader: metrics collection errors",...e),new Promise(((e,n)=>{this._exporter.export(t,(t=>{var r;t.code===Kn.SUCCESS?e():n(null!==(r=t.error)&&void 0!==r?r:new Error(`InstantaneousMetricReader: metrics export failed (error ${t.error})`))}))}))}var er=/[\^$\\.+?()[\]{}|]/g,nr=function(){function t(e){"*"===e?(this._matchAll=!0,this._regexp=/.*/):(this._matchAll=!1,this._regexp=new RegExp(t.escapePattern(e)))}return t.prototype.match=function(t){return!!this._matchAll||this._regexp.test(t)},t.escapePattern=function(t){return"^"+t.replace(er,"\\$&").replace("*",".*")+"$"},t.hasWildcard=t}(),rr=function(){function t(t){this._matchAll=void 0===t,this._pattern=t}return t.prototype.match=function(t){return!!this._matchAll||t===this._pattern},t}(),or=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ir=),ar=ir),ur=function(t){eturn or(e,t),e.prototype.process=e}(ir),sr=new ar,cr=function(){function t(t){var e;this._nameFilter=new nr(null!==(e=null==t?void 0:t.name)&&void 0!==e?e:"*"),this._type=null==t?void 0:t.type,this._unitFilter=new rr(null==t?void 0:t.unit)}return t.prototype.getType=function(){return this._type},t.prototype.getNameFilter=function(){return this._nameFilter},t.prototype.getUnitFilter=function(){return this._unitFilter},t}(),lr=function(){function t(t){this._nameFilter=new rr(null==t?void 0:t.name),this._versionFilter=new rr(null==t?void 0:t.version),this._schemaUrlFilter=new rr(null==t?void 0:t.schemaUrl)}return t.prototype.getNameFilter=function(){return this._nameFilter},t.prototype.getVersionFilter=function(){return this._versionFilter},t.prototype.getSchemaUrlFilter=function(){return this._schemaUrlFilter},t}(),fr=function(t){var e,n;if(null==(n=t).instrumentName&&null==n.instrumentType&&null==n.instrumentUnit&&null==n.meterName&&null==n.meterVersion&&null==n.meterSchemaUrl)throw new Error("Cannot create view with no selector arguments supplied");if(null!=t.name&&(null==(null==t?void 0:t.instrumentName)||nr.hasWildcard(t.instrumentName)))throw new Error("Views with a specified name must be declared with an instrument selector that selects at most one instrument per meter.");null!=t.attributeKeys?this.attributesProcessor=new ur(t.attributeKeys):this.attributesProcessor=ir.Noop(),this.name=t.name,this.description=t.description,this.aggregation=null!==(e=t.aggregation)&&void 0!==e?e:Nn.Default(),this.instrumentSelector=new cr({name:t.instrumentName,type:t.instrumentType,unit:t.instrumentUnit}),this.meterSelector=new lr({name:t.meterName,version:t.meterVersion,schemaUrl:t.meterSchemaUrl})};let pr;!pr||(pr={}));const hr=new RegExp("[^a-zA-Z_][^a-zA-Z0-9_]*");function dr(t){return"object"==typeof t&&null!=t&&null!=t.connection&&"object"==typeof t.connection&&Array.isArray(t.events)&&Array.isArray(t.navigations)&&"string"==typeof t.pathname}function yr(t){return!hr.test(t)||(Re.warn(`Metric name ${t} contains invalid characters and will be dropped.\n    Service Names and metric names must conform to the following regex %c[a-zA-Z_][a-zA-Z0-9_]*`,"color:red"),!1)}class vr{constructor({serviceName:t,prefixMetric:e=!1,metrics:n={},onRecord:r,meterProvider:o}){if(this.serviceName=void 0,this.prefixMetric=void 0,this.meterProvider=void 0,this.metrics=new Map,this.recordListeners=new Set,!t)throw new Error("Service name is required.");if(this.serviceName=t,this.prefixMetric=e,r&&this.addOnRecord(r),!o)throw new Error("MeterProvider is required.");this.meterProvider=o,this.register(n)}getMeterProvider(){return this.meterProvider}addView(t){var e,n,r;null===(e=this.meterProvider._sharedState)||void 0===e||null===(n=e.viewRegistry)||void 0===n||null===(r=n.addView)||void 0===r||r.call(n,new fr(t))}record(t,e,n){const r=this.metrics.get(t);if(!r)throw new Error(`Service ${this.serviceName} has no metrics registered for name: ${t}. Can't record value for unknown metric.`);r(e,n)}registerMetric(t,{type:e,...n}){if(this.metrics.has(t))return;const r=this.meterProvider.getMeter("opentelemetry-js-shopify-web"),o=this.prefixMetric?`${this.serviceName}_${t}`:t;if(!yr(o))return;const i=()=>{switch(e){case pr.Counter:return r.createCounter(o,n);case pr.UpDownCounter:return r.createUpDownCounter(o,n);case pr.Histogram:return"boundaries"in n&&this.addView({instrumentName:o,aggregation:new Bn(n.boundaries,!0)}),r.createHistogram(o,n)}};this.metrics.set(t,((e,n)=>{const r=i(),o=(e,n)=>{const[o,i]=this.notifyRecordListeners(t,e,{...n});"record"in r?r.record(o,i):r.add(o,i),this.meterProvider.forceFlush({})};o(e,n),this.metrics.set(t,o)}))}register(t){Object.entries(t).forEach(()}ifyRecordListeners(t,e,n){return Array.from(this.recordListeners).reduce(((e,n)=>n(t,...e)||e),[e,n])}}var _r;function mr(t){return"string"!=typeof t||0===t.length?{}:t.split(",").map((function(t){return function(t){var e=t.split(";");if(!(e.length<=0)){var n=e.shift();if(n){var r=n.split("=");if(2===r.length){var o,i=decodeURIComponent(r[0].trim()),a=decodeURIComponent(r[1].trim());return e.length>0&&(o=yt(e.join(";"))),{key:i,value:a,metadata:o}}}}}(t)})).filter(().reduce((,{})}!function(t){t.AlwaysOff="always_off",t.AlwaysOn="always_on",t.ParentBasedAlwaysOff="parentbased_always_off",t.ParentBasedAlwaysOn="parentbased_always_on",t.ParentBasedTraceIdRatio="parentbased_traceidratio",t.TraceIdRatio="traceidratio"}(_r||(_r={}));var gr=",",Er=["OTEL_SDK_DISABLED"];function Tr(t){return Er.indexOf(t)>-1}var br=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function wr(t){return br.indexOf(t)>-1}var Or=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];ar Rr=1/0,Pr={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:ut.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Rr,OTEL_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Rr,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Rr,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:_r.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"}; Cr={ALL:ut.ALL,VERBOSE:ut.VERBOSE,DEBUG:ut.DEBUG,INFO:ut.INFO,WARN:ut.WARN,ERROR:ut.ERROR,NONE:ut.NONE};ar Nr="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof n.g?n.g:{};function Ir(){var t=function(t){var e={};for(var n in Pr){var r=n;if("OTEL_LOG_LEVEL"===r)xr(r,e,t);else if(Tr(r))Lr(r,e,t);else if(wr(r))Ar(r,e,t);else if(Sr(r))Mr(r,e,t);else{var o=t[r];null!=o&&(e[r]=String(o))}}return e}(Nr);return Object.assign({},Pr,t)}var Ur=function(){return Ln.CUMULATIVE},kr=var Dr=function(){function t(t,e){var n,r,o;this._otlpExporter=t,this._aggregationTemporalitySelector=null!=(n=null==e?void 0:e.temporalityPreference)?n===Ln.DELTA?kr:Ur:"cumulative"===(o=(r=Ir()).OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE.trim().toLowerCase())?Ur:"delta"===o?kr:(Re.warn("OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE is set to '"+r.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE+"', but only 'cumulative' and 'delta' are allowed. Using default ('cumulative') instead."),Ur)}return t.prototype.export=t.prototype.shutdown=function(){return function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,()}))},t.prototype.forceFlush=function(){return Promise.resolve()},t.prototype.selectAggregationTemporality=function(t){return this._aggregationTemporalitySelector(t)},t}();ar Vr=),Fr=function(){eturn Object.defineProperty(t.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),t.prototype.call=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}([this._that],function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(n),!1))).then((function(t){return e._deferred.resolve(t)}),(function(t){return e._deferred.reject(t)}))}catch(t){this._deferred.reject(t)}}return this._deferred.promise},t}(),jr=),Gr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Xr=Error),Hr=function(){return Hr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Hr.apply(this,arguments)};function zr(t,e,n,r,o,i){var a,u,s=!1,c=setTimeout((,r),l=function(r,f){void 0===r&&(r=5),void 0===f&&(f=1e3),(u=new XMLHttpRequest).open("POST",e),Object.entries(Hr(Hr({},{Accept:"application/json","Content-Type":"application/json"}),n)).forEach((),u.send(t),u.onreadystatechange=function(){if(u.readyState===XMLHttpRequest.DONE&&!1===s)if(u.status>=200&&u.status<=299)Re.debug("xhr success",t),o(),clearTimeout(c),clearTimeout(a);else if(u.status&&(p=u.status,[429,502,503,504].includes(p))&&r>0){var e;f*=1.5,e=u.getResponseHeader("Retry-After")?u.getResponseHeader("Retry-After")):Math.round(Math.random()*(5e3-f)+f),a=setTimeout((,e)}else{var n=new Xr("Failed to export with XHR (status: "+u.status+")",u.status);i(n),clearTimeout(c),clearTimeout(a)}var p},u.onabort=function(){if(s){var t=new Xr("Request Timeout");i(t)}clearTimeout(c),clearTimeout(a)},u.onerror=;l()}var Wr=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Kr=function(t){eturn Wr(e,t),e.prototype.onInit=function(){window.addEventListener("unload",this.shutdown)},e.prototype.onShutdown=e.prototype.send=function(t,e,n){var r=this;if(this._shutdownOnce.isCalled)Re.debug("Shutdown already started. Cannot send objects");else{var o=this.convert(t),i=JSON.stringify(o),a=new Promise((function(t,e){r._useXHR?zr(i,r.url,r._headers,r.timeoutMillis,t,e):i,r.url,0,t,e)})).then(e,n);this._sendingPromises.push(a);var u=a.then(u,u)}},e}(jr),Yr=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a};ction Jr(t){return t.dataPoints.map((function(e){return function(t,e){var n={attributes:$r(t.attributes),startTimeUnixNano:an(t.startTime),timeUnixNano:an(t.endTime)};switch(e){case mt.INT:n.asInt=t.value;break;case mt.DOUBLE:n.asDouble=t.value}return n}(e,t.descriptor.valueType)}))}function Qr(t){return t.dataPoints.map((function(t){var e=t.value;return{attributes:$r(t.attributes),bucketCounts:e.buckets.counts,explicitBounds:e.buckets.boundaries,count:e.count,sum:e.sum,min:e.min,max:e.max,startTimeUnixNano:an(t.startTime),timeUnixNano:an(t.endTime)}}))}function to(t){return t.dataPoints.map((function(t){var e=t.value;return{attributes:$r(t.attributes),count:e.count,min:e.min,max:e.max,sum:e.sum,positive:{offset:e.positive.offset,bucketCounts:e.positive.bucketCounts},negative:{offset:e.negative.offset,bucketCounts:e.negative.bucketCounts},scale:e.scale,zeroCount:e.zeroCount,startTimeUnixNano:an(t.startTime),timeUnixNano:an(t.endTime)}}))}var eo,no=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ro="v1/metrics",oo="http://localhost:4318/"+ro,io=function(t){function e(e){var n=t.call(this,e)||this;return n._headers=Object.assign(n._headers,mr(Ir().OTEL_EXPORTER_OTLP_METRICS_HEADERS)),n}return no(e,t),e.prototype.getDefaultUrl=e.prototype.convert=function(t){return{resourceMetrics:t.map((function(t){return{resource:{attributes:$r((e=t).resource.attributes),droppedAttributesCount:0},schemaUrl:void 0,scopeMetrics:(n=e.scopeMetrics,Array.from(n.map((function(t){return{scope:{name:t.scope.name,version:t.scope.version},metrics:t.metrics.map((function(t){return function(t){var e={name:t.descriptor.name,description:t.descriptor.description,unit:t.descriptor.unit},n=t.aggregationTemporality);switch(t.dataPointType){case Je.SUM:e.sum={aggregationTemporality:n,isMonotonic:t.isMonotonic,dataPoints:Jr(t)};break;case Je.GAUGE:e.gauge={dataPoints:Jr(t)};break;case Je.HISTOGRAM:e.histogram={aggregationTemporality:n,dataPoints:Qr(t)};break;case Je.EXPONENTIAL_HISTOGRAM:e.exponentialHistogram={aggregationTemporality:n,dataPoints:to(t)}}return e}(t)})),schemaUrl:t.scope.schemaUrl}}))))};var e,n}))}},e}(Kr),ao=function(t){function e(e){return t.call(this,new io(e),e)||this}return no(e,t),e}(Dr),uo="service.name",so="telemetry.sdk.name",co="telemetry.sdk.language",lo="telemetry.sdk.version",fo=((eo={})[so]="opentelemetry",eo["process.runtime.name"]="browser",eo[co]="webjs",eo[lo]="1.13.0",eo),po=ho=function(){eturn t.empty=t.default=Object.defineProperty(t.prototype,"attributes",{get:enumerable:!1,configurable:!0}),t.prototype.waitForAsyncAttributes=function(){return function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,()}))},t.prototype.merge=function(e){var n,r=this;if(!e)return this;var o=po(po({},this._syncAttributes),null!==(n=e._syncAttributes)&&void 0!==n?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new t(o);var i=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then((function(t){var n,o=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2),i=o[0],a=o[1];return po(po(po(po({},r._syncAttributes),i),null!==(n=e._syncAttributes)&&void 0!==n?n:e.attributes),a)}));return new t(o,i)},t.EMPTY=new t({}),t}(),yo=),vo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_o=function(){function t(t,e){this._writableMetricStorage=t,this._descriptor=e}return t.prototype._record=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n=Se.active()),this._descriptor.valueType!==mt.INT||Number.isInteger(t)||(Re.warn("INT value type cannot accept a floating-point value for "+this._descriptor.name+", ignoring the fractional digits."),t=Math.trunc(t)),this._writableMetricStorage.record(t,e,n,on(Date.now()))},t}(),mo=_o),go=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vo(e,t),e.prototype.add=function(t,e,n){t<0?Re.warn("negative value provided to counter "+this._descriptor.name+": "+t):this._record(t,e,n)},e}(_o),Eo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vo(e,t),e.prototype.record=function(t,e,n){t<0?Re.warn("negative value provided to histogram "+this._descriptor.name+": "+t):this._record(t,e,n)},e}(_o),To=),bo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vo(e,t),e}(To),wo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vo(e,t),e}(To),Oo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vo(e,t),e}(To);ar Ro=function(){function t(t){this._meterSharedState=t}return t.prototype.createHistogram=function(t,e){var n=fn(t,sn.HISTOGRAM,e),r=this._meterSharedState.registerMetricStorage(n);return new Eo(r,n)},t.prototype.createCounter=function(t,e){var n=fn(t,sn.COUNTER,e),r=this._meterSharedState.registerMetricStorage(n);return new go(r,n)},t.prototype.createUpDownCounter=function(t,e){var n=fn(t,sn.UP_DOWN_COUNTER,e),r=this._meterSharedState.registerMetricStorage(n);return new mo(r,n)},t.prototype.createObservableGauge=function(t,e){var n=fn(t,sn.OBSERVABLE_GAUGE,e),r=this._meterSharedState.registerAsyncMetricStorage(n);return new wo(n,r,this._meterSharedState.observableRegistry)},t.prototype.createObservableCounter=function(t,e){var n=fn(t,sn.OBSERVABLE_COUNTER,e),r=this._meterSharedState.registerAsyncMetricStorage(n);return new bo(n,r,this._meterSharedState.observableRegistry)},t.prototype.createObservableUpDownCounter=function(t,e){var n=fn(t,sn.OBSERVABLE_UP_DOWN_COUNTER,e),r=this._meterSharedState.registerAsyncMetricStorage(n);return new Oo(n,r,this._meterSharedState.observableRegistry)},t.prototype.addBatchObservableCallback=function(t,e){this._meterSharedState.observableRegistry.addBatchCallback(t,e)},t.prototype.removeBatchObservableCallback=t}(),Po=function(){function t(t){this._instrumentDescriptor=t}return t.prototype.getInstrumentDescriptor=function(){return this._instrumentDescriptor},t.prototype.updateDescription=function(t){this._instrumentDescriptor=fn(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:t,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit})},t}(),Lo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ao=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Mo=function(){function t(t){this._hash=t,this._valueMap=new Map,this._keyMap=new Map}return t.prototype.get=function(t,e){return null!=e||(e=this._hash(t)),this._valueMap.get(e)},t.prototype.getOrDefault=t.prototype.set=function(t,e,n){null!=n||(n=this._hash(t)),this._keyMap.has(n)||this._keyMap.set(n,t),this._valueMap.set(n,e)},t.prototype.has=function(t,e){return null!=e||(e=this._hash(t)),this._valueMap.has(e)},t.prototype.keys=t.prototype.entries=Object.defineProperty(t.prototype,"size",{get:enumerable:!1,configurable:!0}),t}(),Co=Mo),xo=function(){function t(t){this._aggregator=t,this._activeCollectionStorage=new Co,this._cumulativeMemoStorage=new Co}return t.prototype.record=function(t,e,n,r){var o=this,i=this._activeCollectionStorage.getOrDefault(e,();null==i||i.record(t)},t.prototype.batchCumulate=function(t,e){var n=this;Array.from(t.entries()).forEach((function(t){var r=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,3),o=r[0],i=r[1],a=r[2],u=n._aggregator.createAccumulation(e);null==u||u.record(i);var s=u;if(n._cumulativeMemoStorage.has(o,a)){var c=n._cumulativeMemoStorage.get(o,a);s=n._aggregator.diff(c,u)}if(n._activeCollectionStorage.has(o,a)){var l=n._activeCollectionStorage.get(o,a);s=n._aggregator.merge(l,s)}n._cumulativeMemoStorage.set(o,u,a),n._activeCollectionStorage.set(o,s,a)}))},t.prototype.collect=t}(),No=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Io=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Uo=function(){eturn t.prototype.buildMetrics=function(e,n,r,o,i){this._stashAccumulations(n,o);var a,u,s=this._getMergedUnreportedAccumulations(e),c=s;if(this._reportHistory.has(e)){var l=this._reportHistory.get(e),f=l.collectionTime;c=(a=l.aggregationTemporality)===Ln.CUMULATIVE?t.merge(l.accumulations,s,this._aggregator):t.calibrateStartTime(l.accumulations,s,f)}else a=e.selectAggregationTemporality(r.type);return this._reportHistory.set(e,{accumulations:c,collectionTime:i,aggregationTemporality:a}),this._aggregator.toMetricData(r,a,(u=c,Array.from(u.entries())),i)},t.prototype._stashAccumulations=t.prototype._getMergedUnreportedAccumulations=t.merge=t.calibrateStartTime=function(t,e,n){var r,o;try{for(var i=No(t.keys()),a=i.next();!a.done;a=i.next()){var u=Io(a.value,2),s=u[0],c=u[1],l=e.get(s,c);null==l||l.setStartTime(n)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(r)throw r.error}}return e},t}(),ko=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Do=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o._attributesProcessor=r,o._deltaMetricStorage=new xo(n),o._temporalMetricStorage=new Uo(n),o}return ko(e,t),e.prototype.record=function(t,e){var n=this,r=new Co;Array.from(t.entries()).forEach((function(t){var e=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(t,2),o=e[0],i=e[1];r.set(n._attributesProcessor.process(o),i)})),this._deltaMetricStorage.batchCumulate(r,e)},e.prototype.collect=function(t,e,n){var r=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,e,this._instrumentDescriptor,r,n)},e}(Po);unction Vo(t,e){return t.valueType!==e.valueType?function(t,e){return"\t- use valueType '"+t.valueType+"' on instrument creation or use an instrument name other than '"+e.name+"'"}(t,e):t.unit!==e.unit?t,e):t.type!==e.type?function(t,e){var n={name:e.name,type:e.type,unit:e.unit},r=JSON.stringify(n);return"\t- create a new view with a name other than '"+t.name+"' and InstrumentSelector '"+r+"'"}(t,e):t.description!==e.description?function(t,e){var n={name:e.name,type:e.type,unit:e.unit},r=JSON.stringify(n);return"\t- create a new view with a name other than '"+t.name+"' and InstrumentSelector '"+r+"'\n    \t- OR - create a new view with the name "+t.name+" and description '"+t.description+"' and InstrumentSelector "+r+"\n    \t- OR - create a new view with the name "+e.name+" and description '"+t.description+"' and InstrumentSelector "+r}(t,e):""}var Fo=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jo=function(){eturn t.create=function(){return new t},t.prototype.getStorages=function(t){var e,n,r,o,i=[];try{for(var a=Fo(this._sharedRegistry.values()),u=a.next();!u.done;u=a.next()){var s=u.value;i=i.concat(s)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}var c=this._perCollectorRegistry.get(t);if(null!=c)try{for(var l=Fo(c.values()),f=l.next();!f.done;f=l.next())s=f.value,i=i.concat(s)}catch(t){r={error:t}}finally{try{f&&!f.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}return i},t.prototype.register=t.prototype.registerForCollector=t.prototype.findOrUpdateCompatibleStorage=t.prototype.findOrUpdateCompatibleCollectorStorage=t.prototype._registerStorage=t.prototype._findOrUpdateCompatibleStorage=function(t,e){var n,r,o,i,a=null;try{for(var u=Fo(e),s=u.next();!s.done;s=u.next()){var c=s.value,l=c.getInstrumentDescriptor();i=t,(o=l).name===i.name&&o.unit===i.unit&&o.type===i.type&&o.valueType===i.valueType?(l.description!==t.description&&(t.description.length>l.description.length&&c.updateDescription(t.description),Re.warn("A view or instrument with the name ",t.name," has already been registered, but has a different description and is incompatible with another registered view.\n","Details:\n",Bo(l,t),"The longer description will be used.\nTo resolve the conflict:",Vo(l,t))),a=c):Re.warn("A view or instrument with the name ",t.name," has already been registered and is incompatible with another registered view.\n","Details:\n",Bo(l,t),"To resolve the conflict:\n",Vo(l,t))}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return a},t}(),Go=),Xo=function(){eturn t.prototype.observe=function(t,e){void 0===e&&(e={}),this._descriptor.valueType!==mt.INT||Number.isInteger(t)||(Re.warn("INT value type cannot accept a floating-point value for "+this._descriptor.name+", ignoring the fractional digits."),t=Math.trunc(t)),this._buffer.set(e,t)},t}(),Ho=function(){eturn t.prototype.observe=function(t,e,n){if(void 0===n&&(n={}),So(t)){var r=this._buffer.get(t);null==r&&(r=new Co,this._buffer.set(t,r)),t._descriptor.valueType!==mt.INT||Number.isInteger(e)||(Re.warn("INT value type cannot accept a floating-point value for "+t._descriptor.name+", ignoring the fractional digits."),e=Math.trunc(e)),r.set(n,e)}},t}(),zo=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},Wo=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},Ko=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a},Yo=function(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))},$o=function(){eturn t.prototype.addCallback=t.prototype.removeCallback=t.prototype.addBatchCallback=function(t,e){var n=new Set(e.filter(So));0!==n.size?this._findBatchCallback(t,n)>=0||this._batchCallbacks.push({callback:t,instruments:n}):Re.error("BatchObservableCallback is not associated with valid instruments",e)},t.prototype.removeBatchCallback=t.prototype.observe=function(t,e){return zo(this,void 0,void 0,(function(){var n,r;return Wo(this,(function(o){switch(o.label){case 0:return n=this._observeCallbacks(t,e),r=this._observeBatchCallbacks(t,e),[4,$e(Yo(Yo([],Ko(n),!1),Ko(r),!1))];case 1:return[2,o.sent().filter(Ze).map((function(t){return t.reason}))]}}))}))},t.prototype._observeCallbacks=function(t,e){var n=this;return this._callbacks.map((function(r){var o=r.callback,i=r.instrument;return zo(n,void 0,void 0,(function(){var n,r;return Wo(this,(function(a){switch(a.label){case 0:return n=new Xo(i._descriptor),r=Promise.resolve(o(n)),null!=e&&(r=Ye(r,e)),[4,r];case 1:return a.sent(),i._metricStorages.forEach((),[2]}}))}))}))},t.prototype._observeBatchCallbacks=function(t,e){var n=this;return this._batchCallbacks.map((function(r){var o=r.callback,i=r.instruments;return zo(n,void 0,void 0,(function(){var n,r;return Wo(this,(function(a){switch(a.label){case 0:return n=new Ho,r=Promise.resolve(o(n)),null!=e&&(r=Ye(r,e)),[4,r];case 1:return a.sent(),i.forEach((),[2]}}))}))}))},t.prototype._findCallback=t.prototype._findBatchCallback=function(t,e){return this._batchCallbacks.findIndex((function(n){return n.callback===t&&function(t,e){var n,r;if(t.size!==e.size)return!1;try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),i=o.next();!i.done;i=o.next()){var a=i.value;if(!e.has(a))return!1}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return!0}(n.instruments,e)}))},t}(),Zo=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),qo=function(t){function e(e,n,r){var o=t.call(this,e)||this;return o._attributesProcessor=r,o._deltaMetricStorage=new xo(n),o._temporalMetricStorage=new Uo(n),o}return Zo(e,t),e.prototype.record=e.prototype.collect=e}(Po),Jo=function(){eturn t.prototype.registerMetricStorage=function(t){var e=this._registerMetricStorage(t,qo);return 1===e.length?e[0]:new Go(e)},t.prototype.registerAsyncMetricStorage=t.prototype.collect=function(t,e,n){return function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){var r,o,i=this;return function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(a){switch(a.label){case 0:return[4,this.observableRegistry.observe(e,null==n?void 0:n.timeoutMillis)];case 1:return r=a.sent(),o=Array.from(this.metricStorageRegistry.getStorages(t)).map(().filter(He),[2,{scopeMetrics:{scope:this._instrumentationScope,metrics:o.filter(He)},errors:r}]}}))}))},t.prototype._registerMetricStorage=function(t,e){var n=this,r=this._meterProviderSharedState.viewRegistry.findViews(t,this._instrumentationScope).map((function(r){var o=function(t,e){var n,r;return{name:null!==(n=t.name)&&void 0!==n?n:e.name,description:null!==(r=t.description)&&void 0!==r?r:e.description,type:e.type,unit:e.unit,valueType:e.valueType}}(r,t),i=n.metricStorageRegistry.findOrUpdateCompatibleStorage(o);if(null!=i)return i;var a=r.aggregation.createAggregator(o),u=new e(o,a,r.attributesProcessor);return n.metricStorageRegistry.register(u),u}));if(0===r.length){var o=this._meterProviderSharedState.selectAggregations(t.type).map((function(r){var o=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}(r,2),i=o[0],a=o[1],u=n.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(i,t);if(null!=u)return u;var s=a.createAggregator(t),c=new e(t,s,ir.Noop());return n.metricStorageRegistry.registerForCollector(i,c),c}));r=r.concat(o)}return r},t}(),Qo=function(){eturn t.prototype.getMeterSharedState=function(t){var e=function(t){var e,n;return t.name+":"+(null!==(e=t.version)&&void 0!==e?e:"")+":"+(null!==(n=t.schemaUrl)&&void 0!==n?n:"")}(t),n=this.meterSharedStates.get(e);return null==n&&(n=new Jo(this,t),this.meterSharedStates.set(e,n)),n},t.prototype.selectAggregations=function(t){var e,n,r=[];try{for(var o=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(this.metricCollectors),i=o.next();!i.done;i=o.next()){var a=i.value;r.push([a,a.selectAggregation(t)])}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t}(),ti=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},ei=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},ni=function(){eturn t.prototype.collect=function(t){return ti(this,void 0,void 0,(function(){var e,n,r,o=this;return ei(this,(function(i){switch(i.label){case 0:return e=on(Date.now()),n=Array.from(this._sharedState.meterSharedStates.values()).map((),[4,Promise.all(n)];case 1:return r=i.sent(),[2,{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:r.map((function(t){return t.scopeMetrics}))},errors:qe(r,()}]}}))}))},t.prototype.forceFlush=function(t){return ti(this,void 0,void 0,(function(){return ei(this,(function(e){switch(e.label){case 0:return[4,this._metricReader.forceFlush(t)];case 1:return e.sent(),[2]}}))}))},t.prototype.shutdown=t.prototype.selectAggregationTemporality=function(t){return this._metricReader.selectAggregationTemporality(t)},t.prototype.selectAggregation=function(t){return this._metricReader.selectAggregation(t)},t}(),ri=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function u(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},oi=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}},ii=function(){function t(t){var e,n,r;this._shutdown=!1;var o=ho.default().merge(null!==(r=null==t?void 0:t.resource)&&void 0!==r?r:ho.empty());if(this._sharedState=new Qo(o),null!=(null==t?void 0:t.views)&&t.views.length>0)try{for(var i=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t.views),a=i.next();!a.done;a=i.next()){var u=a.value;this._sharedState.viewRegistry.addView(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}return t.prototype.getMeter=function(t,e,n){return void 0===e&&(e=""),void 0===n&&(n={}),this._shutdown?(Re.warn("A shutdown MeterProvider cannot provide a Meter"),Vt()):this._sharedState.getMeterSharedState({name:t,version:e,schemaUrl:n.schemaUrl}).meter},t.prototype.addMetricReader=t.prototype.shutdown=function(t){return ri(this,void 0,void 0,(function(){return oi(this,(function(e){switch(e.label){case 0:return this._shutdown?(Re.warn("shutdown may only be called once per MeterProvider"),[2]):(this._shutdown=!0,[4,Promise.all(this._sharedState.metricCollectors.map((function(e){return e.shutdown(t)})))]);case 1:return e.sent(),[2]}}))}))},t.prototype.forceFlush=function(t){return ri(this,void 0,void 0,(function(){return oi(this,(function(e){switch(e.label){case 0:return this._shutdown?(Re.warn("invalid attempt to force flush after MeterProvider shutdown"),[2]):[4,Promise.all(this._sharedState.metricCollectors.map((function(e){return e.forceFlush(t)})))];case 1:return e.sent(),[2]}}))}))},t}(),ai=ui=function(){function t(t){var e;this._shutdown=!1,this._temporalitySelector=null!==(e=null==t?void 0:t.temporalitySelector)&&void 0!==e?e:$n}return t.prototype.export=function(e,n){if(!this._shutdown)return t._sendMetrics(e,n);setImmediate(n,{code:Kn.FAILED})},t.prototype.forceFlush=t.prototype.selectAggregationTemporality=t.prototype.shutdown=t._sendMetrics=function(t,e){var n,r,o,i;try{for(var a=ai(t.scopeMetrics),u=a.next();!u.done;u=a.next()){var s=u.value;try{for(var c=(o=void 0,ai(s.metrics)),l=c.next();!l.done;l=c.next()){var f=l.value;console.dir({descriptor:f.descriptor,dataPointType:f.dataPointType,dataPoints:f.dataPoints})}}catch(t){o={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(o)throw o.error}}}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}e({code:Kn.SUCCESS})},t}();const si={production:"https://otlp-http-production.shopifysvc.com/v1/metrics",staging:"https://otlp-http-staging.shopifysvc.com/v1/metrics",local:"http://localhost:4318/v1/metrics"};class ci extends ii{constructor({serviceName:t,env:e,throttleLimit:n,useXhr:r}){super({resource:new ho({[uo]:t})});const o={url:si[e]||si.local,temporalityPreference:Ln.DELTA};r&&(o.headers={});const i=new ao(o);this.addMetricReader(new tr({exporter:i,throttleLimit:n})),"dev"===e&&this.addMetricReader(new tr({exporter:new ui,throttleLimit:n}))}}class li extends vr{constructor({throttleLimit:t=5e3,env:e="local",serviceName:n,prefixMetric:r=!1,metrics:o={},onRecord:i,meterProvider:a,useXhr:u=!1}){Re.setLogger(new Tt,["production","staging"].includes(e)?ut.ERROR:ut.INFO),super({serviceName:n,meterProvider:null!=a?a:new ci({serviceName:n,env:e,throttleLimit:t,useXhr:u}),prefixMetric:r,metrics:o,onRecord:i})}shutdown(){return Re.disable(),super.shutdown()}}class fi extends ii{constructor(t={}){var e;super(t),this.internalGetMeter=void 0,this.internalGetMeter=null!==(e=t.getMeter)&&void 0!==e?e:Vt}utdown(t){return Promise.resolve()}class pi extends vr{constructor({serviceName:t="noop",...e}){super({serviceName:t,meterProvider:new fi,...e})}}}]);