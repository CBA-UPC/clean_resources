!(function(n){var t={};function e(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}e.m=n,e.c=t,e.d=function(n,t,r){e.o(n,t)||Object.defineProperty(n,t,{enumerable:!0,get:r})},e.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},e.t=function(n,t){if(1&t&&(n=e(n)),8&t)return n;if(4&t&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(e.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&t&&"string"!=typeof n)for(var o in n)e.d(r,o,(function(t){return n[t]}).bind(null,o));return r},e.n=function(n){var t=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(t,"a",t),t},e.o=function(n,t){return Object.prototype.hasOwnProperty.call(n,t)},e.p="",e(e.s=1)})([,function(n,t,e){"use strict";e.r(t);var r="object";function o(n,t,e){if((e=typeof t)!==r)throw new Error("expected ".concat(r," got ").concat(e));for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}function i(n){for(var t=1;t<arguments.length&&arguments[t];t++)n=o(n,arguments[t]);return n}var u={u:"admiral",v:"A-5DD4897EFB1A3B5A54F95E8B-2",h:"cp",k:"4dm1r11545242527",$:30,g:['webcache'],_:['googlebot','mediapartners-google','adsbot-google','facebookexternalhit','bingbot','bingpreview','googleweblight','yandex','cxensebot','duckduckbot','archive.org_bot','baiduspider','slurp'],P:['googleweblight'],C:"",S:"",N:"_awl",O:"_admrla",D:"admbenefits",A:"_alvd",j:34128000,M:0},c=i({},u,{Y:1,B:true,L:false,I:''});function a(n,t,e){return new Promise((function(r){t.addEventListener(n,(function o(i){if(t.removeEventListener(n,o,!1),r(i),e)return e(i)}),!1)}))}var f=null;function s(n){return Math.max(0,Math.round(1e3*(n||0))/1e3)}var l=window;function v(n,t){var e=[];try{var r=new URL(n,window.location).href;e=(function(n){return n&&"getEntriesByName"in n?n:l.performance})(t).getEntriesByName(r||n,"resource")||[]}catch(n){}if(!e||e.length<1)return null;var o=e[e.length-1],i=o.connectStart,u=o.requestStart,c=o.connectEnd,a=o.responseStart;return{dns:s(o.domainLookupEnd-o.domainLookupStart),transferSize:s(o.transferSize),encodedSize:s(o.encodedBodySize),duration:s(o.duration),connect:s(c-i>0&&u-i),request:s(a-u),response:s(o.responseEnd-a),ssl:s(o.secureConnectionStart&&c-o.secureConnectionStart),number:e.length,protocol:o.nextHopProtocol||"",startTime:s(o.startTime)}}try{l.performance.addEventListener("resourcetimingbufferfull",(function(){"setResourceTimingBufferSize"in l.performance&&l.performance.setResourceTimingBufferSize(l.performance.getEntries().length+100)}))}catch(n){}function d(n,t){return typeof n===t}function w(n){return d(n,"function")}var m=window,h=u.k;function p(n,t){var e=t[0];function r(){return n.a[e].apply(n.a,t.slice(1))}try{return"triggerEvent"===e?Promise.resolve().then(r):r()}catch(n){}}function k(){try{return m.admiral||m[h]}catch(n){}return m[h]}var y=function(n,t){var e=Array.prototype.slice.call(t);n&&e.unshift(n);var r=k();if(r&&r.loaded)return p(r,e);r=w(r)&&r||function(){(m.admiral.q=m.admiral.q||[]).push(arguments)};try{m[h]=m.admiral=r}catch(n){m[h]=r}r("ready",(function(){return p(k(),e)}))};function $(){return y("after",arguments)}function g(){return y("triggerEvent",arguments)}var b=function(){return y("",arguments)};var _=window.unescape||window.decodeURIComponent,P=window.escape||window.encodeURIComponent,C="cookieStore"in window&&window.cookieStore;function S(n,t,e){var r=e||{};if(void 0===t)return C&&!r.sync?n?C.getAll(n):C.getAll():new Promise((function(t){var e,r,o,i=[],u=document.cookie.split(";");for(o=0;o<u.length;o++)if(e=u[o].substring(0,u[o].indexOf("=")).trim(),r=u[o].substring(u[o].indexOf("=")+1),!n||e===n)try{i.push({name:e,value:_(r)})}catch(n){}t(i)}));if(C&&!r.sync){if(!r.domain&&null!==r.domain){var o=window.location.hostname;o&&(r.domain=o)}return r.domain&&"."===r.domain[0]&&(r.domain=r.domain.substring(1)),!t||r.maxAge<0?r.hasOwnProperty("domain")?C.delete({name:n,domain:r.domain}):C.delete(n):(r.maxAge&&(r.expires||(r.expires=Date.now()+1e3*r.maxAge),delete r.maxAge),r.sameSite||(r.sameSite="none"),C.set(i({name:n,value:t},r)))}return new Promise((function(e){var o=t?P(t):"";if(t||(r.maxAge=-1),r.maxAge&&(o+="; max-age="+r.maxAge),!r.domain&&null!==r.domain){var i=window.location.hostname;i&&(r.domain="."+i)}r.domain&&(o+="; domain="+r.domain),null==r.path&&(r.path="/"),r.path&&(o+="; path="+r.path),"https:"===window.location.protocol&&"PublicKeyCredential"in window&&(o+="; SameSite=None; Secure"),document.cookie=n+"="+o,e()})).then((function(){if(t&&r.domain)return S(n).then((function(t){if(!t||!t.length)throw new Error("failed to set cookie "+n+" on "+r.domain)}))}))}function N(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function O(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function D(n,t,e){return t&&O(n.prototype,t),e&&O(n,e),Object.defineProperty(n,"prototype",{writable:!1}),n}function A(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}var j,M=(j=document,j.currentScript||{}).src,Y="__uspapi",E=window.__uspapi&&window.__uspapi.v||0,B=/^[1][nNyY-][nNyY-][nNyY-]$/,L=c.Y,x="usprivacy",I=!!c.L,T=[],R=c.I||window&&window.location&&window.location.hostname.replace(/^(www|m)\./,"")||"",W=c.M||c.j;function q(n,t){"console"in window&&w(console.error)}var z=(function(){function n(t){A(this,n),this.version=L,this.baseString=t||null}var t=n.prototype;return t.ensureUSPrivacyString=function(){var n=this.getUSPrivacyStringWithoutVersion();return!n||"---"===n&&I?this.setUSPrivacyString(I?[L,"Y","N",c.B?"Y":"N"].join(""):L+"---"):Promise.resolve()},t.getUSPrivacyString=function(){return this.baseString},t.getUSPrivacyStringWithoutVersion=function(){return this.baseString?this.baseString.substr(1):""},t.setUSPrivacyString=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return B.test(n)?(this.baseString=n,S(x,n,{maxAge:W,domain:R})):Promise.reject("invalid new string: ".concat(n))},t.getOptOutStatus=function(){return this.baseString?this.baseString[2]:"N"},t.hasSeenNotice=function(){return this.baseString&&"Y"===this.baseString[1]},t.getVersion=function(){return this.version},D(n)})(),U=(function(){function n(){A(this,n),this.recorder=null,this.api=null,this.bootstrapVersion=0}var t=n.prototype;return t.listenForEvent=function(){var n,t=this;return(n="_recorder",new Promise((function(t){$(n,(function e(r){t(r),b("removeEventListener",n,e)}))}))).then((function(n){var e=n.recorder;return t.recorder=e})).then((function(){M&&t.recorder.addLoadPerfData(c.h,1,v(M),M)}))},t.loadClient=function(){var n=this;return S(x).then((function(t){var e=null;return t&&t[0]&&t[0].value&&(e=t[0].value),n.uspString=new z(e),n.uspString.ensureUSPrivacyString().catch((function(n){}))})).then((function(){var t=window,e=t.__uspapi&&t.__uspapi.q||[];t.__uspapi=n.api=(function(n){var t;try{var e=window.__uspapi;if(e(Y))return e}catch(n){}var r=(N(t={getUSPData:function(t,e){if(w(e))if(t===L){var r=n.getUSPrivacyString();r?e({version:n.getVersion(),uspString:r},!0):e({version:null,uspString:null},!1)}else e(null,!1)}},Y,(function(){return!0})),N(t,"registerDeletion",(function(n,t){if(!w(t))throw new Error("'registerDeletion' method expects a valid callback");n!==L&&t(null,!1),T.push(t)})),N(t,"performDeletion",(function(n,t,e){n===L&&T.forEach((function(n){try{n(e)}catch(n){q()}}))})),t);return function(){return r[arguments[0]].apply(r,Array.prototype.slice.call(arguments,1))}})(n.uspString),e.forEach((function(t){try{n.api.apply(n,t||[])}catch(n){q()}})),$("ccpa.update",(function(t){n.uspString.setUSPrivacyString([L,"Y",t?"Y":"N",c.B?"Y":"N"].join("")).then((function(){return n.triggerUpdated()}))})),n.triggerLoaded()}))},t.getQueueState=function(){if(!this.uspString)return{optedOut:!1,state:"",applies:I,_private:function(){return{reportingData:{verc:E}}}};var n={optedOut:"Y"===this.uspString.getOptOutStatus(),state:this.uspString.getUSPrivacyStringWithoutVersion(),applies:I||this.uspString.hasSeenNotice()};return i({_private:function(){return{reportingData:(t=n,e={verc:E},r=t&&t.state,r&&d(r,"string")&&("---"===r&&(r=""),r&&(e.cpas=r)),e)};var t,e,r}},n)},t.triggerLoaded=function(){g("ccpa.loaded",this.getQueueState())},t.triggerUpdated=function(){g("ccpa.updated",this.getQueueState())},n.start=function(){var t,e=new n,r=!1;if(b("get","ccpa.state",(function(n,t){return r=!!t})),!r)return(t=document,(function(n){var t=n.readyState;return("complete"===t||"interactive"===t)&&n.body})(t)?Promise.resolve():(f||(f=Promise.race([a("DOMContentLoaded",t),a("readystatechange",t)]).then((function(){if(!t.body)return new Promise((function(n,e){var r,o=0;r=setInterval((function(){return t.body?(clearInterval(r),void n()):o++>50?(clearInterval(r),void e(new Error("body falsy: "+t.readyState))):void 0}),100)}))}))),f)).then((function(){return e.loadClient()})).then((function(){return e.listenForEvent()})).catch((function(n){e.recorder.setError(n,"ccpaInit"),e.recorder.record()})).catch((function(){})).then((function(){}))},D(n)})();"undefined"!=typeof document&&U.start(),t.default=U}]);ileShoppingCard4]:he,[i.PL.VideoShoppingCard]:ma,[i.PL.VideoShoppingCarouselCard]:va,[i.PL.SuperListCard]:na,[i.PL.RealEstateCard]:Me,[i.PL.PrismCarouselCard]:xe,[i.PL.PrayerTimesCard]:we,[i.PL.TrendingSearchCard]:ga,[i.PL.CommuteCard]:R,[i.PL.DigestCard]:L,[i.PL.Article]:w,[i.PL.Slideshow]:w,[i.PL.Video]:w,[i.PL.Infopane]:ie,[i.PL.PartnerUpsell]:be,[i.PL.GroupedContent]:U,[i.PL.UserInterestTopic]:U,[i.PL.UserInterestNTPProvider]:U,[i.PL.UserInterestTopicAndProvider]:B,[i.PL.ColdStartArticleFreCard]:o,[i.PL.HalfPane]:null,[i.PL.HeadToHead]:null,[i.PL.Mosaic]:null,[i.PL.Triptych]:null,[i.PL.DenseList]:null,[i.PL.WebContent]:Sa,[i.PL.ExternalLink]:null,[i.PL.TabbedInfopane]:null,[i.PL.TabbedInfopaneTab]:null,[i.PL.PlaceholderCard]:Re,[i.PL.BingHealthCovid19StatsCard]:Z,[i.PL.BingHealthFitnessCard]:Y,[i.PL.HealthTipCard]:ae,[i.PL.HealthRiverCard]:ee,[i.PL.AutosCarousel]:d,[i.PL.AutosEntityList]:c,[i.PL.BingVideoCarousel]:C,[i.PL.CashbackAds]:g,[i.PL.CasualGamesCarousel]:m,[i.PL.CasualGamesStripeCarousel]:v,[i.PL.ChannelCarousel]:y,[i.PL.ChannelFilterCard]:S,[i.PL.TabbedFeedCard]:sa,[i.PL.EsportsMatch]:A,[i.PL.EsportsCasualGames]:f,[i.PL.EsportsLiveStream]:W,[i.PL.GamingClip]:K,[i.PL.GamingClipsCarousel]:G,[i.PL.GamingHighlightClipsCarousel]:G,[i.PL.GamingCompete]:O,[i.PL.GamingHighlight]:K,[i.PL.GamingHighlightsCarousel]:G,[i.PL.GamingInterestGroup]:N,[i.PL.GamingLiveStream]:K,[i.PL.GamingLiveStreamCarousel]:G,[i.PL.GamingMatch]:H,[i.PL.GamingPersonalize]:$,[i.PL.GamingRecentlyPlayed]:V,[i.PL.GamingRecommendedGames]:_,[i.PL.GamingReddit]:q,[i.PL.GamingRewards]:j,[i.PL.GamingTournament]:Q,[i.PL.GamingUpcomingGames]:J,[i.PL.GamingVideoCarousel]:G,[i.PL.GamingVod]:K,[i.PL.GroceryCouponSdCard]:X,[i.PL.StockQuote]:Ce,[i.PL.MoneyInfo]:ue,[i.PL.MoneyTopicStripe]:ge,[i.PL.WeatherHero]:fe,[i.PL.SportsTopicStripe]:ta,[i.PL.MoneyPreWL]:ue,[i.PL.MoneyCrypto]:ue,[i.PL.MoneyMarketBrief]:ue,[i.PL.MoneyMoreForYouCard]:ue,[i.PL.SportsMatch]:ea,[i.PL.SportsOlympics]:aa,[i.PL.EventSDCardSportsMIT1]:ea,[i.PL.EventSDCardSportsMIT2]:ea,[i.PL.EventSDCardSportsMIT3]:ea,[i.PL.EventSDCardWorldCup]:ra,[i.PL.EventSDCardWorldCup2]:ra,[i.PL.MyBriefRiverCard]:da,[i.PL.TrafficDelays]:ca,[i.PL.TrafficInfo]:ca,[i.PL.Transit]:ca,[i.PL.WeatherSummary]:ya,[i.PL.ShoppingCard]:Ze,[i.PL.EdgeShoppingCard]:je,[i.PL.ShoppingCarousel]:je,[i.PL.ShoppingVideoCarousel]:Ye,[i.PL.ShoppingRiver]:je,[i.PL.EventSDCardShopping]:Qe,[i.PL.ComicsCarousel]:k,[i.PL.SelectCarousel]:$e,[i.PL.EditorsPickCarousel]:I,[i.PL.DailyFixGamesCarousel]:x,[i.PL.SageGroupedFeed]:L,[i.PL.TopicFeed]:s,[i.PL.NewsSegmentCarousel]:Se,[i.PL.ShoppingProng2c]:_e,[i.PL.ShoppingMerchantCategoryDeals]:qe,[i.PL.ShoppingProngCardResponse]:Ke,[i.PL.ShoppingProngCarousel]:Je,[i.PL.ShoppingProngTracking]:Xe,[i.PL.SectionHeader]:Ge,[i.PL.TrendingInTenMinutes]:ua,[i.PL.TopicFeedTrendingNow]:ua,[i.PL.TopicFeedTopStories]:ua,[i.PL.TrendingTopics]:fa,[i.PL.TopStories]:la,[i.PL.WorkHeadlines]:la,[i.PL.Trending]:Ve,[i.PL.Horoscope]:te,[i.PL.Elections]:M,[i.PL.RecommendedInterests]:Ae,[i.PL.RecommendedSearchCarousel]:We,[i.PL.RecommendedSearchesCard]:Be,[i.PL.OnThisDay]:ke,[i.PL.Lottery]:oe,[i.PL.Dense]:T,[i.PL.Qna]:Ie,[i.PL.quizcard]:Ee,[i.PL.Recipes]:De,[i.PL.Inspiration]:Ue,[i.PL.InterestManagementCard]:ne,[i.PL.Rewards]:Oe,[i.PL.SubscriptionCarousel]:Le,[i.PL.TravelArticleCard]:pa,[i.PL.TravelDestinationCard]:ha,[i.PL.TravelDestinationCarouselCard]:Ca,[i.PL.LocalNews]:na,[i.PL.LocalNewsFeed]:se,[i.PL.BeaconProviderUpsell]:Te,[i.PL.Marketplace]:le,[i.PL.MarketplaceEvent]:le,[i.PL.PollsCard]:Pe,[i.PL.NewsGroups]:ye,[i.PL.NewsAnswerModule]:ye,[i.PL.TopicFeedLearnSomethingNew]:L,[i.PL.TopicFeedWeekends]:L,[i.PL.TopicFeedMomentInTime1]:ia,[i.PL.TopicFeedShopping]:ia,[i.PL.TopicFeedWeather]:ia,[i.PL.WinAppAds]:Ra,[i.PL.NativeAd]:me,[i.PL.CmsAd]:me,[i.PL.AmplifyAd]:me,[i.PL.EventSDCardAmplifyAds]:me,[i.PL.NativeTopAd]:ve,[i.PL.BoostAd]:u,[i.PL.Promotion]:g,[i.PL.IndustryNewsCard]:re,[i.PL.MicrosoftFeedCard]:ce,[i.PL.CompanyNewsCard]:P,[i.PL.Calendar]:ka,[i.PL.Entertainment]:ka,[i.PL.Family]:ka,[i.PL.M365]:ka,[i.PL.Photos]:ka,[i.PL.ThirdPartyWidget]:ka,[i.PL.Tips]:ka,[i.PL.ToDo]:ka,[i.PL.XboxGamePass]:ka,[i.PL.Tombstone]:ka,[i.PL.RewardsDailySet]:Ne,[i.PL.UserInterestProvider]:Fe},wa=(0,n.p)((()=>{const e=new Ua;for(const[a,t]of Object.entries(Pa))e.set(a,t);return e}));class Ua extends Map{set(e,a){return super.set(e.toLowerCase(),a)}get(e){return super.get(e.toLowerCase())}}},68689:function(e,a,t){t.d(a,{W:function(){return h},l:function(){return p}});var r=t(33779),i=t(5302),n=t(9172),s=t(39079),o=t(24640),d=t(59644),l=t(8037),c=t(58572);function p(e){var a;const{cardMetadata:t,parentTelemetryObject:o,configOptions:p,layoutTemplateName:h,getReplacementCardsCallback:C,refreshFeedCallback:u,goToPersonalizeCallback:g,visualReadinessCallback:f,isArticleFreInInfoPane:m,cardActionClickHandler:v}=e,y=p&&p.childExperienceReferencesWC?p.childExperienceReferencesWC.articleFreCard:p;let S=[];S=t.subItems&&t.subItems.length?t.subItems:t.subCards,t.subCards=S,t.subItems=void 0;const k=(0,l.PZ)(t,(n.O7.dismiss<<1)-1),b=0!=(k&n.O7.dismiss)?(0,c.to)(e,k,t.id,o):{id:t.id,childTemplateType:"article-fre-card",articleFreConfigInfo:y,parentTelemetryObject:o,subCards:S,getReplacementCardsCallback:C,refreshFeedCallback:u,goToPersonalizeCallback:g,cardActionClickHandler:v,visualReadinessCallback:f,isArticleFreInInfoPane:m};return(0,d.Cu)({id:t.id,experienceType:null==y||null===(a=y.configRef)||void 0===a?void 0:a.experienceType,mapperArgs:e},b,((e,a)=>{const t=a.cardSize;return t!==s.Nv._1x_2y&&t!==s.Nv._2x_2y&&(0,r.H)(i.qI3,`Article Fre Card mapped as ${t} on ${e} in ${h}`),{}}),!0)}function h(e,a){if(a===o.U.articleFreCard)return!0;if(a===o.U.recommendedInterestsCard)return!0;if(a===o.U.infopaneCard){let a=[];a=e.subItems&&e.subItems.length?e.subItems:e.subCards;for(const e of a)if("ArticleFre"===e.type&&"FreFeed"===e.id)return!0}return!1}},54791:function(e,a,t){function r(e){return!(e&&e.length)}t.d(a,{x:function(){return r}})},98604:function(e,a,t){t.d(a,{FY:function(){return o},b_:function(){return d},h_:function(){return l}});var r=t(42833),i=t(52185);const n=()=>i.Gq.get("__global-element-map_elementMap__",(()=>new Map)),s=()=>i.Gq.get("__global-element-map_waitForElementMap__",(()=>new Map));function o(e,a){if(!a)return;n().set(e,a);const t=s().get(e);t&&t.set(a)}function d(e){return e?n().get(e):null}function l(e){if(!e)return Promise.reject(null);const a=d(e);if(d(e))return Promise.resolve(a);const t=s();if(t.has(e))return t.get(e).getResultAsync();const i=new r.o;return t.set(e,i),i.getResultAsync()}},57433:function(e,a,t){var r;t.d(a,{y:function(){return r}}),function(e){e[e.MuidChange=1]="MuidChange",e[e.MarketChange=2]="MarketChange",e[e.InterestsChange=3]="InterestsChange",e[e.PivotSwitch=4]="PivotSwitch",e[e.WeatherChange=5]="WeatherChange",e[e.MoneyChange=6]="MoneyChange",e[e.FeedLayoutSwitch=7]="FeedLayoutSwitch",e[e.FetchRiverDataFailure=8]="FetchRiverDataFailure",e[e.BackgroundImageChange=9]="BackgroundImageChange",e[e.PublisherMuted=10]="PublisherMuted",e[e.StalePrerenderPage=11]="StalePrerenderPage",e[e.AdminSettingsChange=12]="AdminSettingsChange"}(r||(r={}))},49494:function(e,a,t){t.d(a,{ih:function(){return n},yV:function(){return s}});var r=t(68640),i=t(15598);new Set;function n(e){const a=(0,i.$o)().getObject(r.v3)||{},t=a[e];isNaN(t)&&(a[e]=o(),(0,i.$o)().setObject(r.v3,a))}function s(e){const a={time:o(),data:e};(0,i.$o)().setObject(r.Z6,a)}function o(){return Math.round(performance.timeOrigin+performance.now())}},8426:function(e,a,t){t.d(a,{FeedManagerForViews:function(){return ei}});var r=t(97463),i=t(10098),n=t(74489),s=t(14588),o=t(79201),d=t(75701),l=t(37162),c=t(46556),p=t(19173),h=t(15481);const C={"article-card":i.v,"content-card":n.O,"hide-story-card":l.Lz,"native-ad-card":c.ac,"partner-upsell":p.M,"video-card":h.P,"health-river-card":s.B,"travel-article-card":o.g,"content-group-card":d.n};var u,g=t(29218),f=t(24640),m=t(81181),v=t(35114),y=t(39320),S=t(5302);!function(e){e.OnStartFeedRequest="onStartFeedRequest",e.OnParametersReset="onParamatersReset",e.OnStartFeedRefresh="onStartFeedRefresh",e.OnFeedRefreshed="onFeedRefreshed",e.OnFeedResponseRetrieved="onFeedResponseRetrieved",e.OnFeedDisconneted="onFeedDisconneted",e.OnFeedRendered="onFeedRendered",e.OnStartCardArgsCreate="onStartCardArgsCreate",e.OnCardArgsCreated="onCardArgsCreated",e.OnStartCardActionUpdate="onStartCardActionUpdate",e.OnRefreshButtonClicked="OnRefreshButtonClicked",e.BeforeUpdateLayout="beforeUpdateLayout",e.OnFirstSectionFeed="onFirstSectionFeed"}(u||(u={}));const k="work";var b;!function(e){e[e.Sam=0]="Sam",e[e.Cms=1]="Cms"}(b||(b={}));var R=t(33940),P=t(60105),w=t(9172),U=t(48096),x=t(70041),T=t(5813),L=t(22471);var F=t(49494),I=t(57433),E=t(34800),M=t(24709);class D{}D.updateLocationDisplayName=new M.C("UpdateLocationDisplayName"),D.fetchWeatherSummarySuccess=new M.C("FetchWeatherSummarySuccess"),D.fetchWeatherSummaryFailure=new M.C("FetchWeatherSummaryFailure"),D.updateLocationDetectionState=new M.C("UpdateLocationDetectionState"),D.updateWeatherUserProfile=new M.C("UpdateWeatherUserProfile"),D.updateCurrentLocation=new M.C("UpdateCurrentLocation"),D.updateWeatherSettings=new M.C("UpdateWeatherSettings"),D.updateWeatherDataRefreshing=new M.C("UpdateWeatherDataRefreshing"),D.updateWeatherData=new M.C("UpdateWeatherData"),D.updateOperationFailure=new M.C("updateOperationFailure"),D.updateFallbackStatus=new M.C("updateFallbackStatus"),D.updateHyperlocal=new M.C("updateHyperlocal"),D.openEditLocation=new M.C("editLocationName"),D.updateLocationWeatherMap=new M.C("updateLocationWeatherMap"),D.updateCalendarData=new M.C("UpdateCalendarData"),D.updateHistoricalTrendsData=new M.C("UpdateHistoricalTrendsData"),D.UpdateHeaderHighlight=new M.C("UpdateHeaderHighlight"),D.updateLocationPanelPresentation=new M.C("UpdateLocationPanelPresentation"),D.updatePollenSelectedDateIndex=new M.C("UpdatePollenSelectedDateIndex"),D.updatePollenCity=new M.C("UpdatePollenCity"),D.updateEplantOptoutPopup=new M.C("UpdateEplantOptoutPopup"),D.updateLayoutInfo=new M.C("UpdateLayoutInfo"),D.updateDateInfo=new M.C("UpdateDateInfo"),D.updateLifeCurrentState=new M.C("UpdateLifeCurrentState"),D.updateActivityIndexDetailData=new M.C("UpdateActivityIndexDetailData"),D.updateActivityIndexDetailModalState=new M.C("UpdateActivityIndexDetailModalState"),D.updateWeatherCurrentCardSize=new M.C("UpdateWeatherCurrentCardSize"),D.updateWeatherCarouselBg=new M.C("UpdateWeatherCarouselBg"),D.updateErrorBoundaryKey=new M.C("UpdateErrorBoundaryKey"),D.updateWeatherInsightSection=new M.C("UpdateWeatherInsightSection"),D.toggleImmersivePlayer=new M.C("ToggleImmersivePlayer"),D.loadConditionalExperience=new M.C("LoadConditionalExperience"),D.updateHourlySelectedDateIndex=new M.C("UpdateHourlySelectedDateIndex"),D.updateMiniMapV2State=new M.C("UpdateMiniMapV2State"),D.hideWeatherCard=new M.C("HideWeatherCard"),D.updateShowFreDialog=new M.C("UpdateShowFreDialog");var A=t(22680);class W{constructor(){this.isObserverRegistered=!1}register(){this.isObserverRegistered||(this.isObserverRegistered=!0,D.updateWeatherSettings.registerObserver((async()=>{(0,F.yV)(I.y.WeatherChange)})))}hasWeatherCard(e){const a=(0,A.zp)(),t=!!a&&a.includes("ocid=widgetonlockscreen")&&a.includes("segment=Weather");return-1!==e.findIndex((e=>!t&&(null==e?void 0:e.type)===E.PL.WeatherSummary||t&&(null==e?void 0:e.type)===E.PL.WeatherHero))}}var B=t(78709),O=t(93441),z=t(25513),N=t(86117),H=t(17814),G=t(39079),$=t(11258);const V=e=>"WeatherHero"==e.type?x.x.weatherHeroExperience:e.type+(e.id??""),_=`TTVR.${L.p.viewCards}`,q=`TTVR.${L.p.sdCards}`,j=new Map([[f.U.infopaneCard,()=>!0],[f.U.sectionHeaderCard,()=>!0],[f.U.topStoriesCard,()=>!0],[f.U.contentCard,e=>{const a=(0,$.Ae)(e)||(0,$.UN)(e);return a&&a.height>=H.B._300x225.height&&a.width>=H.B._300x225.width}],[f.U.weatherHeroExperienceCarouselCard,()=>!0]]),K=[f.U.contentCard,f.U.infopaneCard,f.U.sectionHeaderCard,f.U.topStoriesCard,f.U.weatherHeroExperienceCarouselCard];function Q(e){const a=g.J[e.type];if(a&&K.includes(a)){const t=j.get(a);return!!t&&t(e)}return!1}const J=e=>{switch(e){case G.Nv._1x_1y:return 1;case G.Nv._1x_2y:case G.Nv._2x_1y:return 2;case G.Nv._3x_1y:return 3;case G.Nv._2x_2y:case G.Nv._4x_1y:return 4;default:return 2}},X={contentGroup:x.x.contentGroup,"content-card":x.x.articlePage,horoscopeCard:x.x.horoscopeAnswerCardWC,linkedInCard:x.x.linkedInCard,moneyInfoCard:x.x.moneyInfoCardWC,onThisDayCard:x.x.onThisDayCardWC,qnaCard:x.x.qna,"shopping-carousel":x.x.shoppingCardWC,sportsCard:x.x.sportsCardWC,trafficCard:x.x.trafficCardWC,travelDestination:x.x.travelDestination,trendingNowCard:x.x.trendingNowWC,weather:x.x.weatherCardWC,autosCarousel:x.x.autosCarousel,autosMarketplaceCard:x.x.autosMarketplaceCard,boostAdCard:x.x.boostAdCard,electionsCard:x.x.generalElections,rewardsCard:x.x.rewardsCardWC,gamingCompeteCard:x.x.gamingCompeteCard,gamingInterestGroupCard:x.x.gamingInterestGroupCard,gamingMatchCard:x.x.gamingMatchCard,gamingMediaCarousel:x.x.gamingMediaCarousel,gamingPersonalizationCard:x.x.gamingPersonalizationCard,gamingRedditCard:x.x.gamingRedditCard,gamingRecentlyPlayedCard:x.x.gamingRecentlyPlayedCard,gamingRecommendedCard:x.x.gamingRecommendedCard,gamingRewardsCard:x.x.gamingRewardsCard,gamingStreamCard:x.x.gamingStreamCard,GamingClip:x.x.gamingStreamCard,GamingHighlight:x.x.gamingStreamCard,GamingLiveStream:x.x.gamingStreamCard,GamingVod:x.x.gamingStreamCard,gamingTournamentCard:x.x.gamingTournamentCard,gamingUpcomingCard:x.x.gamingUpcomingCard,gamingVideoCard:x.x.gamingVideoCard,"trending-in-ten-minutes-id":x.x.selectCarousel,"infopane-id":x.x.selectCarousel,"war-in-ukraine-carousel-id":x.x.selectCarousel,"local-news-carousel-id":x.x.selectCarousel,casualGamesCarouselCard:x.x.casualGamesCarouselCard,trendingSearchCard:x.x.trendingSearchCard,mangaCard:x.x.mangaCard,"shopping-prong-card-response":x.x.selectCarousel,winAppCard:x.x.winAppWC,publisherList:x.x.publisherList};var Z=t(42833),Y=t(44132),ee=t(13218),ae=t(35651),te=t(74744),re=t(72160),ie=t(80323),ne=t(65239),se=t(71159),oe=t(59472),de=Math.max;var le=function(e){if(!e||!e.length)return[];var a=0;return e=(0,ie.Z)(e,(function(e){if((0,oe.Z)(e))return a=de(e.length,a),!0})),(0,se.Z)(a,(function(a){return(0,re.Z)(e,(0,ne.Z)(a))}))};var ce=function(e,a){if(!e||!e.length)return[];var t=le(e);return null==a?t:(0,re.Z)(t,(function(e){return(0,te.Z)(a,void 0,e)}))},pe=(0,ae.Z)((function(e){var a=e.length,t=a>1?e[a-1]:void 0;return t="function"==typeof t?(e.pop(),t):void 0,ce(e,t)}));const he=e=>{const a=`TTVR.${e}`;return(0,N.OB)().some((e=>{let[t,r]=e;return t===a}))};class Ce{constructor(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.contentCardMarkers=new Set,this.contentCardMarkersBeforeTracking=new Set,this.visualReadinessCallbackSetTimes=0,this.maxVisualReadinessCallbackSetTimes=1,this.uiDependenciesReleased=!1,this.feedType=e,this.feedSetPromise=new Z.o,this.subMilestoneMarkers=[this.feedSetPromise.getResultAsync()],this.milestoneMarkerPromises=new Map,this.maxVisualReadinessCallbackSetTimes=a,O.g.updateAboveTheFoldVisuallyReady.registerObserver((()=>{this.uiDependenciesReleased=!0}))}releaseUIDependencies(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.uiDependenciesReleased||((0,N.o_)(this.feedType),this.callMilestoneData(),this.uiDependenciesReleased=!0,e&&Y.M0.sendAppErrorEvent({...S.WNm,pb:{...S.WNm.pb,customMessage:`FeedType: ${this.feedType}, core feed items are missing, forcing markers to unblock`,isPrerender:null===ee.Al||void 0===ee.Al?void 0:ee.Al.IsPrerender}}))}callMilestoneData(){var e,a;const t=(0,z.S0)();t&&(null===O.g||void 0===O.g||null===(e=O.g.updateVisuallyReadyTiming)||void 0===e||null===(a=e.getActionSender(t))||void 0===a||a.send((0,z.v)(this.feedType,void 0,void 0,void 0,window.performance.now())))}genTtvrCb(e){return()=>{const a=V(e);this.visualReadinessCallbackSetTimes<this.maxVisualReadinessCallbackSetTimes?this.contentCardMarkersBeforeTracking.add(a):a&&this.contentCardMarkers.has(a)&&(0,N.l6)(a)}}track(e,a,t){if(this.visualReadinessCallbackSetTimes===this.maxVisualReadinessCallbackSetTimes)return;if(e.length!==a.length){const t=a.filter((e=>e.type!==E.PL.ChannelFilterCard));if(e.length===t.length)return;Y.M0.sendAppErrorEvent({...S.Ipv,pb:{...S.Ipv.pb,customMessage:`FeedType: ${this.feedType}, length of layoutFeedElements and length cardMetadataList mismatch for TTVR tracker`,layoutFeedElements:JSON.stringify(e.map((e=>e&&(0,B.G)(e)?e.id:"unmapped lazy element"))),cardMetadataList:JSON.stringify(a.map((e=>e&&e.type)))}})}const r=e=>{var a;this.milestoneMarkerPromises.has(e)&&(null===(a=this.milestoneMarkerPromises.get(e))||void 0===a||a.set())},i=pe(a,e,((e,a)=>({metadata:e,element:a??{childDOMOrder:1/0}}))),n=(null==i?void 0:i.sort(((e,a)=>e.element.childDOMOrder-a.element.childDOMOrder)))||[];let s=0;for(let e=0;e<n.length&&s<t;e++){const a=n[e].element,t=n[e].metadata,i=a.id;s+=J(a.cardSize);const o=X[i];let d="",l=!1;if(o){if(he(o))continue;d=`TTVR.${o}`,(0,N.aR)(o,q,!0,r),l=!0}else if(t&&Q(t)){const e=V(t);if(this.contentCardMarkersBeforeTracking.has(e))continue;(0,N.aR)(e,_,!1,r),this.contentCardMarkers.add(e),d=`TTVR.${e}`,l=!0}!this.milestoneMarkerPromises.has(d)&&l&&this.milestoneMarkerPromises.set(d,new Z.o)}this.visualReadinessCallbackSetTimes++,this.feedSetPromise.set(),this.subMilestoneMarkers=this.subMilestoneMarkers.concat(this.getPromises()),this.visualReadinessCallbackSetTimes<this.maxVisualReadinessCallbackSetTimes||Promise.allSettled(this.subMilestoneMarkers).then((()=>{this.subMilestoneMarkers=[],this.callMilestoneData(),(0,N.o_)(this.feedType);const e=this.pageRevealRevalidatePromise;this.pageRevealRevalidatePromise=void 0,e&&e.set()}))}getPromises(){return[...this.milestoneMarkerPromises.values()].map((e=>e.getResultAsync()))}getPageRevalidateResultAsync(){return this.pageRevealRevalidatePromise=new Z.o,this.visualReadinessCallbackSetTimes=0,this.milestoneMarkerPromises.clear(),this.feedSetPromise=new Z.o,this.subMilestoneMarkers=[this.feedSetPromise.getResultAsync()],this.pageRevealRevalidatePromise.getResultAsync()}}var ue=t(33779),ge=t(7733),fe=t(22944),me=t(63228),ve=t(7766),ye=t(88048),Se=t(32308),ke=t(62907),be=t(77062),Re=t(95438),Pe=t(17395),we=t(95378);class Ue{constructor(e){this.config=e}async fetch(e){let a=this.config.initialRequest;if(e&&(a={...a,...e}),!a)return Y.M0.sendAppErrorEvent({...S.ItM,message:"default SDService fetch configuration was invalid"}),this.responseStatus=Re.F.InvalidRequest,{status:this.responseStatus,cards:void 0};return await this.fetchSDCards(a)}async fetchSDCards(e){const a={credentials:"include",headers:await ve.$D.getOneServiceFeedCallHeaders(),method:"GET"},t=new URL(T.Mt,(0,ye.qQ)()),r=(0,be.Ee)();this.requestQueryParams=new ge.h,(0,T._O)(e,this.requestQueryParams);const i=await(0,Pe.XJ)()===ke.Hy.SignedIn?ve.$D.getOneServiceParamsWithAuth(fe.jG.UserId,e.ocid,!1):ve.$D.getOneServiceParamsWithoutAuth(fe.jG.UserId,e.ocid,!1);for(let e=0;e<i.length;e++)this.requestQueryParams.set(i[e].key,i[e].value);let n;fe.jG.SendFeedCallActivityIdInHeader&&this.requestQueryParams.delete(T.hE.activityId),this.requestQueryParams.set(fe.jG.OneServiceContentMarketQspKey,fe.jG.CurrentMarket),r>0&&this.requestQueryParams.set(be.i$,r.toString()),this.requestQueryParams.get("$top")||this.requestQueryParams.set("$top","1"),this.requestQueryParams.get("User")||(this.requestQueryParams.set("User",fe.jG.UserId),this.requestQueryParams.delete(T.hE.user)),t.search=this.requestQueryParams.toString();try{const e=1e4,r=await(0,Se.w)((async()=>await(0,me.Sm)(decodeURIComponent(t.href),e,a)),"SDCardProvider.fetch");if(!r||!r.ok){const e=r?`SDService returned error response. status: ${r.status} - ${r.statusText}`:"SDService response was null",i=(0,we.Z)(a,"headers.Authorization");return Y.M0.sendAppErrorEvent({...S._I9,message:e,pb:{...S._I9.pb,customMessage:`ServiceUrl: [${t.href}], requestHeaders: [${JSON.stringify(i&&i.headers)}]`}}),void(this.responseStatus=Re.F.Failed)}n=await r.json()}catch(e){const r=(0,we.Z)(a,"headers.Authorization");return Y.M0.sendAppErrorEvent({...S.ViL,message:"Error while fetching SDService response",pb:{...S.ViL.pb,customMessage:`Error: ${e} serviceUrl: ${t.href} headers: ${JSON.stringify(r.headers)} activityId: ${fe.jG.ActivityId}`}}),void(this.responseStatus=Re.F.Failed)}return n&&n.cards&&n.cards.length>0?this.responseStatus=Re.F.Success:this.responseStatus=Re.F.NoContent,n}}const xe={[E.PL.EventSDCardSportsMIT1]:"sports",[E.PL.EventSDCardSportsMIT2]:"sports",[E.PL.EventSDCardSportsMIT3]:"sports",[E.PL.EventSDCardWorldCup]:"sports",[E.PL.EventSDCardWorldCup2]:"sports",[E.PL.StockQuote]:"finance",[E.PL.MoneyInfo]:"finance",[E.PL.MoneyCrypto]:"finance",[E.PL.MoneyPreWL]:"finance",[E.PL.MoneyMarketBrief]:"finance",[E.PL.SportsMatch]:"sports",[E.PL.SportsOlympics]:"sports",[E.PL.TravelDestinationCard]:"travel",[E.PL.WeatherSummary]:"weather"};function Te(e,a,t){var r;const{response:i}=this,n=e.type,s=null===(r=i[xe[n]])||void 0===r?void 0:r.find((e=>e.type===n));s&&(t[a]=s)}class Le{constructor(e){this.sdCardList=[],this.sdCardProvider=new Ue(e)}async fetchUpdatedSDCard(){let e;try{e=await this.sdCardProvider.fetch({contentType:this.sdCardList.join(",")})}catch(e){(0,ue.OO)(e,S.kyM,"SD Card Update Fail for new feed.",`Failed with exception : ${e}`)}return e}clearSDCardList(){this.sdCardList.length=0}addSDCard(e){e.map((e=>{var a;null===(a=e.cards)||void 0===a||a.map((e=>{let{type:a}=e;const t=a;xe[t]&&this.sdCardList.push(xe[t])}))}))}}var Fe=t(9279);class Ie{constructor(e,a){const t={...e,initialRequest:{...e.initialRequest}};a&&(t.initialRequest.feedId=a),e.initialRequest.infopaneCount&&(t.initialRequest.infopaneItemCount=e.initialRequest.infopaneCount),t.initialRequest.disableFlatViewResponse=!0,this.oneServiceCardProvider=new Fe.d(t),this.reachedEnd=!1}clearCache(){this.reachedEnd=!1,this.oneServiceCardProvider&&this.oneServiceCardProvider.clearCache()}async fetch(e,a,t,r,i,n,s,o){var d;if(this.reachedEnd)return;let l=null===(d=this.previousFeedAPIResponse)||void 0===d?void 0:d.nextPageRequest;i&&(l={});const c={...l,count:e,start:a};let p;c.userFreCandidatesSetId=n,c.feedId=s,void 0!==o&&(c.query="contentconsumption",c.contentId=o,c.flightData="prg-1sw-ccntxt-ann"),t&&(c.query=r?"frefeedback":"frefeedbackneg"),i&&(c.start=void 0,c.query="UserFre"),(t||i||s||o)&&(c.infopaneItemCount=void 0,c.timeoutMs=1500);try{p=await this.oneServiceCardProvider.fetch(c);const e=p&&p.cardMetadata&&p.cardMetadata.length;this.reachedEnd=t||i?this.reachedEnd:e&&!p.nextPageRequest||!e,e&&!i&&(t?p.cardMetadata=p.cardMetadata.map((e=>(e&&e.cardContent&&e.cardContent.badges?e.cardContent.badges.unshift({type:"explicitLike"}):e={...e,cardContent:{...e.cardContent,badges:[{type:"explicitLike"}]}},e))):this.previousFeedAPIResponse=p)}catch(e){(0,ue.OO)(e,S.uW3,"Content fetch failed for SuperFeed card replacements.",`Failed with exception : ${e}`)}return p}}class Ee{constructor(e){this.regionKeys=e,this.initialRowCount={C1:0,C2:0,C3:0,C4:0,C5:0},this.reset()}setInitialRowCount(e){this.initialRowCount=e,this.reset()}updateRowCount(e,a){const t=this.rowCounts[a],{rowHeightPx:r}=e,i={};try{for(const e of Object.keys(this.initialRowCount)){const a=t[e],n=r&&r[e]&&r[e].length||0;i[e]=a+n/2}}catch(e){}this.rowCounts[a]=i}addExtPropertiesToCards(e,a,t,r,i){if(!e||!a)return;const n=this.rowCounts[t];for(const a of e)if(a.rowCount=n,a.debugId=i,a.traceIdIndex=r,a.subItems||a.subCards){const e=a.subItems||a.subCards;for(const a of e)a.rowCount=n}this.updateRowCount(a,t)}reset(){this.rowCounts=this.regionKeys.reduce(((e,a)=>({...e,[a]:this.initialRowCount})),{})}}const Me=new(t(80293).v)("LocationState");var De,Ae;!function(e){e[e.LocationEditor=1]="LocationEditor",e[e.WelcomeGreeting=2]="WelcomeGreeting",e[e.Feed=3]="Feed"}(De||(De={})),function(e){e[e.Location=1]="Location"}(Ae||(Ae={}));class We{constructor(e){this.handleLocationDataChange=e=>{e&&e.source!==De.Feed&&this.callback()},this.callback=e}register(){Me.subscribe(Ae.Location,this.handleLocationDataChange,{fireImmediately:!1})}unregister(){Me.unsubscribe(Ae.Location,this.handleLocationDataChange)}}var Be=t(8037),Oe=t(7671),ze=t(68689),Ne=t(83107),He=t(9438),Ge=t(72297),$e=t(32132),Ve=t(24032),_e=t(73677);const qe={[f.U.autosGarageCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.autosGarageCard)},[f.U.widgetsNotificationsCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.widgetsNotificationsCard)},[f.U.donationNpoCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.donationNpoCard)},[f.U.entertainmentPremierCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.entertainmentPremierCard)},[f.U.bingThisOrThatCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.bingThisOrThatCard)},[f.U.bingDailyQuizCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.bingDailyQuizCard)},[f.U.gamingGamerModeUpsellCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingGamerModeUpsellCard)},[f.U.rewardsDailyCheckinCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.rewardsDailyCheckinCard)},[f.U.richCalendarCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.richCalendarCard)},[f.U.electionCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.ElectionCard)},[f.U.communityCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.communityCard)},[f.U.hotListCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.hotListCard)},[f.U.mobileRewardsCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.mobileRewardsCard)},[f.U.tabbedInfopaneCard]:(e,a,t)=>{e.configOptions={...e.configOptions}},[f.U.mangaCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.mangaCard)},[f.U.mobileShoppingCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.mobileShoppingCard)},[f.U.shoppingSdCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.shoppingCard)},[f.U.videoShoppingCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.videoShoppingCard)},[f.U.videoShoppingCarouselCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.videoShoppingCarouselCard)},[f.U.superListCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.superListCard),e.configOptions={...t,...e.configOptions}},[f.U.realEstateCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.realEstateCard)},[f.U.prismCarouselCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.prismCarouselCard)},[f.U.shoppingEventsDealCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.eventSDCardShopping)},[f.U.trendingSearchCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.trendingSearchCard),e.configOptions={...t,...e.configOptions}},[f.U.prayerTimesCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.prayerTimesCard)},[f.U.commuteCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.commuteCard)},[f.U.digestCard]:(e,a,t)=>{var r,i;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.digestCard),e.configOptions={digestCard:null===(i=t.childExperienceReferencesWC)||void 0===i?void 0:i.digestCard}},[f.U.contentCard]:(e,a,t)=>{e.isProviderInFooter=t.isProviderInFooter},[f.U.webContentCard]:(e,a,t)=>{e.isProviderInFooter=t.isProviderInFooter},[f.U.responsiveAdCard]:(e,a,t)=>{e.isProviderInFooter=t.isProviderInFooter},[f.U.responsiveCard]:(e,a,t)=>{e.isProviderInFooter=t.isProviderInFooter},[f.U.infopaneCard]:(e,a,t)=>{var r,i,n;if(!t.enableUmf)if(t.isMsnMobile)(0,_e.Fg)(null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.selectCarousel),e.configOptions.configRef=null===(i=t.childExperienceReferencesWC)||void 0===i?void 0:i.selectCarousel.configRef,e.configOptions.instanceId=null===(n=t.childExperienceReferencesWC)||void 0===n?void 0:n.selectCarousel.instanceId;else if(t.useMobile){var s,o,d;(0,_e.Fg)(null===(s=t.childExperienceReferencesWC)||void 0===s?void 0:s.contentGroup),e.configOptions.configRef=null===(o=t.childExperienceReferencesWC)||void 0===o?void 0:o.contentGroup.configRef,e.configOptions.instanceId=null===(d=t.childExperienceReferencesWC)||void 0===d?void 0:d.contentGroup.instanceId}else{e.activeIndicator=!1;const r=null==a?void 0:a.wpoMetadata,i=r&&(r.infopaneFirstSlideTransitionSpeedInDecimalSeconds||r.infopaneFirstSlideTransitionSpeedInSeconds),n=r&&(r.infopaneRemainingSlidesTransitionSpeedInDecimalSeconds||r.infopaneRemainingSlidesTransitionSpeedInSeconds);e.autoRotateIntervalMs=1e3*n||t.autoRotateIntervalMs||5e3,e.firstAutoRotateIntervalMs=1e3*i||t.firstAutoRotateIntervalMs,e.disableAutoRotate=t.disableAutoRotate,(0,Ve.L)().get("vpFreeze")&&(e.disableAutoRotate=!0),t.useColorfulInfopane||(e.configOptions={...e.configOptions},delete e.configOptions.useArticleCardTemplate),e.enableRotateAfterClick=t.enableRotateAfterClick,e.rotateAfterClickIntervalMs=t.rotateAfterClickIntervalMs,e.rotateBackAfterClickPrevButton=t.rotateBackAfterClickPrevButton,e.rotateStopAfterClickPrevButton=t.rotateStopAfterClickPrevButton,e.enableInfopaneRefactoring=t.enableInfopaneRefactoring,e.infoPaneProminentFlipper=t.infoPaneProminentFlipper,e.infopaneThresholdSecondForNewFlag=t.infopaneThresholdSecondForNew,e.infopaneThresholdForCommentFlag=t.infopaneThresholdForComment,e.enableTabbedInfopane=t.enableTabbedInfopane}},[f.U.companyNewsCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.companyNewsCard)},[f.U.comicsCarouselCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.selectCarousel)},[f.U.selectCarouselCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.selectCarousel)},[f.U.editorsPickCarouselCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.selectCarousel)},[f.U.dailyFixGamesCarouselCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.selectCarousel)},[f.U.localNewsCarCard]:(e,a,t)=>{var r,i;if(null!==(r=t.childExperienceReferencesWC)&&void 0!==r&&r.tabbedFeedWC&&t.useTabbedFeed4LocalNews&&e&&e.cardMetadata&&e.cardMetadata&&e.cardMetadata.feed&&"localnews"==e.cardMetadata.feed.sourceFeedType)je(e,null===(i=t.childExperienceReferencesWC)||void 0===i?void 0:i.tabbedFeedWC);else if(t.useMobile||t.isMsnMobile){var n,s,o;(0,_e.Fg)(null===(n=t.childExperienceReferencesWC)||void 0===n?void 0:n.trendingNowWC),e.configOptions.configRef=null===(s=t.childExperienceReferencesWC)||void 0===s?void 0:s.trendingNowWC.configRef,e.configOptions.instanceId=null===(o=t.childExperienceReferencesWC)||void 0===o?void 0:o.trendingNowWC.instanceId}else{var d;je(e,null===(d=t.childExperienceReferencesWC)||void 0===d?void 0:d.selectCarousel)}},[f.U.moneyTopicStripeCarouselCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.selectCarousel)},[f.U.weatherHeroExperienceCarouselCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.selectCarousel)},[f.U.spotlightCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.spotlightCardWC)},[f.U.TopicFeedCard]:(e,a,t)=>{var r,i,n,s,o,d,l,c,p,h,C;t.useMobile&&!t.isMsnMobile?e.configOptions={selectCarousel:null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.selectCarousel,publisherCarousel:null===(i=t.childExperienceReferencesWC)||void 0===i?void 0:i.publisherCarousel,linkedInCard:null===(n=t.childExperienceReferencesWC)||void 0===n?void 0:n.linkedInCard,shouldOpenArticlesInOverlay:t.shouldOpenArticlesInOverlay,spotlightCard:null===(s=t.childExperienceReferencesWC)||void 0===s?void 0:s.spotlightCardWC,digestCard:null===(o=t.childExperienceReferencesWC)||void 0===o?void 0:o.digestCard,useLightShadow:t.useLightShadow,lightShadowVal:t.lightShadowVal,...e.configOptions}:e.configOptions={selectCarousel:null===(d=t.childExperienceReferencesWC)||void 0===d?void 0:d.selectCarousel,publisherCarousel:null===(l=t.childExperienceReferencesWC)||void 0===l?void 0:l.publisherCarousel,linkedInCard:null===(c=t.childExperienceReferencesWC)||void 0===c?void 0:c.linkedInCard,shouldOpenArticlesInOverlay:t.shouldOpenArticlesInOverlay,spotlightCard:null===(p=t.childExperienceReferencesWC)||void 0===p?void 0:p.spotlightCardWC,digestCard:null===(h=t.childExperienceReferencesWC)||void 0===h?void 0:h.digestCard,hotListCard:null===(C=t.childExperienceReferencesWC)||void 0===C?void 0:C.hotListCard,useLightShadow:t.useLightShadow,lightShadowVal:t.lightShadowVal}},[f.U.shoppingCarouselCard]:(e,a,t)=>{var r,i,n;a.type===E.PL.EdgeShoppingCard&&(e.configOptions=null===(n=t.childExperienceReferencesWC)||void 0===n?void 0:n.edgeShoppingCard);a.type===E.PL.ShoppingCarousel&&null!==(r=t.childExperienceReferencesWC)&&void 0!==r&&r.shoppingCarousel&&(e.configOptions=t.childExperienceReferencesWC.shoppingCarousel),a.type===E.PL.ShoppingRiver&&null!==(i=t.childExperienceReferencesWC)&&void 0!==i&&i.shoppingRiver&&(e.configOptions=t.childExperienceReferencesWC.shoppingRiver)},[f.U.shoppingBuyingGuidePremiumCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.shoppingBGPremiumCard)},[f.U.shoppingVideoCarouselCard]:(e,a,t)=>{var r;null!==(r=t.childExperienceReferencesWC)&&void 0!==r&&r.selectCarousel&&((0,_e.Fg)(t.childExperienceReferencesWC.selectCarousel),e.configOptions.configRef=t.childExperienceReferencesWC.selectCarousel.configRef,e.configOptions.instanceId=t.childExperienceReferencesWC.selectCarousel.instanceId)},[f.U.groceryCouponSdCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.groceryCouponSdCard)},[f.U.weatherCard]:(e,a,t)=>{var r;null!==(r=t.childExperienceReferencesWC)&&void 0!==r&&r.weatherCard&&((0,_e.Fg)(t.childExperienceReferencesWC.weatherCard),e.configOptions=t.childExperienceReferencesWC.weatherCard)},[f.U.moneyCard]:(e,a,t)=>{},[f.U.contentGroupCard]:(e,a,t)=>{const r=(0,Ne.mt)(a.id)===Ne.HF.nextDoor;var i,n,s,o,d;!t.useMobile||t.isMsnMobile||r?je(e,r?null===(i=t.childExperienceReferencesWC)||void 0===i?void 0:i.nextdoorCard:null===(n=t.childExperienceReferencesWC)||void 0===n?void 0:n.contentGroupCard):((0,_e.Fg)(null===(s=t.childExperienceReferencesWC)||void 0===s?void 0:s.contentGroupCard),e.configOptions.configRef=null===(o=t.childExperienceReferencesWC)||void 0===o?void 0:o.contentGroupCard.configRef,e.configOptions.instanceId=null===(d=t.childExperienceReferencesWC)||void 0===d?void 0:d.contentGroupCard.instanceId)},[f.U.newsSegmentCarousel]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.newsSegmentCarousel)},[f.U.horoscopeAnswerCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.horoscopeCard)},[f.U.electionsCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.electionsCard)},[f.U.denseCard]:(e,a,t)=>{var r;e.enableArticleTimestamps=t.enableArticleTimestamps,e.localizedStrings=t.localizedStrings,e.enableNewTimestampFormatForJAJP=t.enableNewTimestampFormatForJAJP,je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.denseCard)},[f.U.recommendedSearchCarousel]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.recommendedSearchCarousel)},[f.U.recommendedSearchesCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.recommendedSearchesCard)},[f.U.trendingNowCard]:function(e,a,t){var r,i,n,s;t.useMobile||t.isMsnMobile?((0,_e.Fg)(null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.trendingNowWC),e.configOptions.configRef=null===(i=t.childExperienceReferencesWC)||void 0===i?void 0:i.trendingNowWC.configRef,e.configOptions.instanceId=null===(n=t.childExperienceReferencesWC)||void 0===n?void 0:n.trendingNowWC.instanceId):je(e,null===(s=t.childExperienceReferencesWC)||void 0===s?void 0:s.trendingNowWC)},[f.U.trendingTopicsCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.trendingTopics)},[f.U.moneyInfoCardWC]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.moneyInfoCardWC)},[f.U.healthCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.bingHealthCard)},[f.U.healthFitnessCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.bingHealthFitnessCard)},[f.U.healthTipCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.healthTipWC)},[f.U.healthRiverCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.healthRiverWC)},[f.U.onThisDayCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.onThisDayCard)},[f.U.lotteryCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.lotteryCard)},[f.U.qnaCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.qnaCard)},[f.U.quizCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.quizCard)},[f.U.prismCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.prismCard)},[f.U.rewardsCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.rewardsCard)},[f.U.rewardsDailySetCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.rewardsDailySetCard)},[f.U.recipesCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.recipesCard)},[f.U.esportsCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.esportsCard)},[f.U.esportsStreamsCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.esportsStreamsCard)},[f.U.gamingCompeteCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingCompeteCard)},[f.U.gamingInterestGroupCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingInterestGroupCard)},[f.U.gamingMatchCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingMatchCard)},[f.U.gamingMediaCarouselCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingMediaCarousel)},[f.U.gamingPersonalizationCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingPersonalizationCard)},[f.U.gamingRecentlyPlayedCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingRecentlyPlayedCard)},[f.U.gamingRecommendedCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingRecommendedCard)},[f.U.gamingRedditCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingRedditCard)},[f.U.gamingRewardsCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingRewardsCard)},[f.U.gamingStreamCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingStreamCard)},[f.U.gamingTournamentCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingTournamentCard)},[f.U.gamingUpcomingCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingUpcomingCard)},[f.U.gamingVideoCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.gamingVideoCard)},[f.U.trafficCard]:(e,a,t)=>{var r,i;t.useMobile&&!t.isMsnMobile?je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.commuteCard):je(e,null===(i=t.childExperienceReferencesWC)||void 0===i?void 0:i.trafficCard)},[f.U.travelArticleCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.travelArticleCard)},[f.U.travelDestinationCard]:(e,a,t)=>{var r,i,n,s;const o=a.dataType;var d;if(null!=t&&null!==(r=t.childExperienceReferencesWC)&&void 0!==r&&r.travelSdHotelsCard&&a&&["HotelList","HotelListingResult"].includes(o))je(e,null===(d=t.childExperienceReferencesWC)||void 0===d?void 0:d.travelSdHotelsCard);else if(null!=t&&null!==(i=t.childExperienceReferencesWC)&&void 0!==i&&i.travelSdFlightsCard&&a&&["FlightPriceTrends","FlightPriceTrendsList"].includes(o)){var l;je(e,null===(l=t.childExperienceReferencesWC)||void 0===l?void 0:l.travelSdFlightsCard)}else if(null!=t&&null!==(n=t.childExperienceReferencesWC)&&void 0!==n&&n.travelSdThemesCard&&a&&["ThemeCardList","ThemeInspiration"].includes(o)){var c;je(e,null===(c=t.childExperienceReferencesWC)||void 0===c?void 0:c.travelSdThemesCard)}else if(null!=t&&null!==(s=t.childExperienceReferencesWC)&&void 0!==s&&s.travelSdDestinationsCard&&a&&["DestinationList","Destination"].includes(o)){var p;je(e,null===(p=t.childExperienceReferencesWC)||void 0===p?void 0:p.travelSdDestinationsCard)}else{var h;je(e,null===(h=t.childExperienceReferencesWC)||void 0===h?void 0:h.travelDestination)}},[f.U.travelDestinationCarouselCard]:(e,a,t)=>{var r,i;(0,_e.Fg)(null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.travelCarousel),e.configOptions=null===(i=t.childExperienceReferencesWC)||void 0===i?void 0:i.travelCarousel},[f.U.sportsCard]:(e,a,t)=>{var r;null!==(r=t.childExperienceReferencesWC)&&void 0!==r&&r.sportsCard&&((0,_e.Fg)(t.childExperienceReferencesWC.sportsCard),e.configOptions=t)},[f.U.sportsOlympicCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.sportsOlympicCard)},[f.U.sportsWorldCupCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.sportsWorldCupCard)},[f.U.autosCarouselCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.autosCarousel)},[f.U.autosMarketplaceCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.autosMarketplaceCard)},[f.U.industryNewsCard]:(e,a,t)=>{var r;null!==(r=t.childExperienceReferencesWC)&&void 0!==r&&r.industryNewsCard&&((0,_e.Fg)(t.childExperienceReferencesWC.industryNewsCard),e.configOptions=t.childExperienceReferencesWC.industryNewsCard)},[f.U.microsoftFeedCard]:(e,a,t)=>{var r;null!==(r=t.childExperienceReferencesWC)&&void 0!==r&&r.microsoftFeedCard&&((0,_e.Fg)(t.childExperienceReferencesWC.microsoftFeedCard),e.configOptions=t.childExperienceReferencesWC.microsoftFeedCard)},[f.U.publisherCarouselCard]:(e,a,t)=>{var r;null!==(r=t.childExperienceReferencesWC)&&void 0!==r&&r.publisherCarousel&&(e.configOptions={publisherCarousel:t.childExperienceReferencesWC.publisherCarousel})},[f.U.publisherListCard]:(e,a,t)=>{var r;null!==(r=t.childExperienceReferencesWC)&&void 0!==r&&r.publisherList&&(e.configOptions={publisherList:t.childExperienceReferencesWC.publisherList})},[f.U.marketplaceCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.marketplaceCardWC)},[f.U.partnerUpsellCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.partnerUpsellCard)},[f.U.recommendedInterestsCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.recommendedInterestsCard),e.configOptions={...e.configOptions,enableHideStoryFeedback:!0,enableInstantHide:!0,enableDismissCallback:!0}},[f.U.pollsCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.pollsCardWC)},[f.U.nativeAdCard]:function(e,a,t){if(!t.skipNativeAdCardMetadataProcess&&t&&e&&e.cardMetadata&&e.cardMetadata.data){const a=JSON.parse(e.cardMetadata.data);if(a&&a.items&&a.items[0]&&(He.c.updateAssetDataFields(a.items[0],a.items[0].assets),e.cardMetadata.placement&&(e.cardMetadata.placement=(0,Ge.Bi)(a,t.adBeaconServiceConfig))),t.enableNativeAdWC){(new $e.E).updateTemplate(a,t.adTemplateConfig)}e.cardMetadata.data=JSON.stringify(a),e.cardMetadata.template=a.template}},[f.U.sectionHeaderCard]:(e,a,t,r)=>{const{index:i,cardMetadataList:n}=r,s=n[i+1];let o=s&&s.type;g.J[o]===f.U.TopicFeedCard&&s&&s.feed&&s.feed.canonicalName&&(o=s.feed.canonicalName),e.configOptions={...e.configOptions,RiverSectionHeaderCardType:o}},[f.U.topStoriesCard]:(e,a,t,r)=>{const{index:i,cardMetadataList:n}=r,s=i-1>=0?n[i-1]:null;if(s){const a=s.type;a&&g.J[a]===f.U.sectionHeaderCard&&(e.configOptions={...e.configOptions,disableTopStoriesCardHeading:!0,useSectionHeaderTopStories:!0,useTopStoriesRibbonCarousel:!0,useTopStoriesRibbon4Carousel:!0})}null!=t&&t.useRightRailLayout&&(e.configOptions={...t,useRightRailTopStories:!0,useGradientTopStories:!1})},[f.U.casualGamesCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.casualGamesCard)},[f.U.casualGamesCarouselCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.casualGamesCarouselCard)},[f.U.channelCarouselCard]:(e,a,t)=>{e.showNTPBackgroudImg=t.showNTPChannelCarouselBackgroudImg},[f.U.channelFilterCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.channelFilterCard)},[f.U.articleFreCard]:(e,a,t)=>{je(e,t.childExperienceReferencesWC&&t.childExperienceReferencesWC.articleFreCard),e.configOptions={...e.configOptions,enableHideStoryFeedback:!0,enableInstantHide:!0,enableDismissCallback:!0,useHideConfirmationNewStoryText:!0}},[f.U.tabbedFeedCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.tabbedFeedWC)},[f.U.newsGroupsCard]:(e,a,t)=>{var r,i;"CanonicalName-top stories"==a.id?je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.selectCarousel):je(e,null===(i=t.childExperienceReferencesWC)||void 0===i?void 0:i.newsGroupsCard)},[f.U.shoppingCarouselProngWC]:(e,a,t)=>{var r,i,n,s;t.useMobile&&!t.isMsnMobile?((0,_e.Fg)(null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.selectCarousel),e.configOptions.configRef=null===(i=t.childExperienceReferencesWC)||void 0===i?void 0:i.selectCarousel.configRef,e.configOptions.instanceId=null===(n=t.childExperienceReferencesWC)||void 0===n?void 0:n.selectCarousel.instanceId):je(e,null===(s=t.childExperienceReferencesWC)||void 0===s?void 0:s.shoppingCarouselProngWC)},[f.U.ShoppingProngTracking]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.shoppingProngTrackingWC)},[f.U.shoppingFashionCarouselWC]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.shoppingFashionCarouselWC)},[f.U.cashbackCarouselCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.cashbackCarouselCard)},[f.U.contentGroup]:(e,a,t)=>{var r,i,n,s;t.useMobile||t.isMsnMobile?((0,_e.Fg)(null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.contentGroup),e.configOptions.configRef=null===(i=t.childExperienceReferencesWC)||void 0===i?void 0:i.contentGroup.configRef,e.configOptions.instanceId=null===(n=t.childExperienceReferencesWC)||void 0===n?void 0:n.contentGroup.instanceId):je(e,null===(s=t.childExperienceReferencesWC)||void 0===s?void 0:s.contentGroup)},[f.U.winAppCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.winAppCard)},[f.U.boostAdCard]:(e,a,t)=>{var r;je(e,null===(r=t.childExperienceReferencesWC)||void 0===r?void 0:r.boostAdCard)}},je=(e,a)=>{var t,r,i;a?((0,_e.Fg)(a),e.configOptions=a):(e.configOptions=null,Y.M0.sendAppErrorEvent({...S.ws9,message:"Can not load SD card WCE",pb:{...S.ws9.pb,cardMetadata:null===(t=e.cardMetadata)||void 0===t?void 0:t.type,layoutTemplateName:e.layoutTemplateName,customMessage:`Error: empty config options for feed card type ${null===(r=e.cardMetadata)||void 0===r?void 0:r.type}`,debugId:null===(i=e.cardMetadata)||void 0===i?void 0:i.debugId}}))};var Ke=t(59644),Qe=t(49218),Je=t(49903);const Xe={[f.U.autosGarageCard]:"autosGarageCard",[f.U.bingDailyQuizCard]:"bingDailyQuizCard",[f.U.bingThisOrThatCard]:"bingThisOrThatCard",[f.U.casualGamesCard]:"casualGamesCard",[f.U.casualGamesCarouselCard]:"casualGamesCarouselCard",[f.U.casualGamesStripeCarouselCard]:"casualGamesStripeCarouselCard",[f.U.communityCard]:"communityCard",[f.U.donationNpoCard]:"donationNpoCard",[f.U.electionCard]:"electionCard",[f.U.entertainmentPremierCard]:"entertainmentPremierCard",[f.U.gamingGamerModeUpsellCard]:"gamingGamerModeUpsellCard",[f.U.healthCard]:"bingHealthCard",[f.U.horoscopeAnswerCard]:"horoscopeCard",[f.U.hotListCard]:"hotListCard",[f.U.mangaCard]:"mangaCard",[f.U.mobileRewardsCard]:"mobileRewardsCard",[f.U.mobileShoppingCard]:"mobileShoppingCard",[f.U.onThisDayCard]:"onThisDayCard",[f.U.prayerTimesCard]:"prayerTimesCard",[f.U.prismCarouselCard]:"prismCarouselCard",[f.U.qnaCard]:"qnaCard",[f.U.realEstateCard]:"realEstateCard",[f.U.recommendedSearchesCard]:"recommendedSearchesCard",[f.U.rewardsDailyCheckinCard]:"rewardsDailyCheckinCard",[f.U.richCalendarCard]:"richCalendarCard",[f.U.shoppingBuyingGuidePremiumCard]:"shoppingBuyingGuidePremiumCard",[f.U.shoppingCarouselCard]:"shoppingCarousel",[f.U.shoppingEventsDealCard]:"shoppingEventsDealCard",[f.U.shoppingSdCard]:"shoppingSdCard",[f.U.superListCard]:"superListCard",[f.U.trendingNowCard]:"trendingNowWC",[f.U.trendingSearchCard]:"trendingSearchCard",[f.U.trendingTopicsCard]:"trendingTopicsCard",[f.U.videoShoppingCard]:"videoShoppingCard",[f.U.videoShoppingCarouselCard]:"videoShoppingCarouselCard",[f.U.weatherCard]:"weatherCard",[f.U.widgetsNotificationsCard]:"widgetsNotificationsCard",[f.U.winAppCard]:"winAppCard"},Ze={[f.U.autosGarageCard]:"autosGarageCard",[f.U.autosMarketplaceCard]:"autosMarketplaceCard",[f.U.bingDailyQuizCard]:"bingDailyQuizCard",[f.U.bingThisOrThatCard]:"bingThisOrThatCard",[f.U.boostAdCard]:"boostAdCard",[f.U.casualGamesCard]:"casualGamesCard",[f.U.casualGamesCarouselCard]:"casualGamesCarouselCard",[f.U.casualGamesStripeCarouselCard]:"casualGamesStripeCarouselCard",[f.U.communityCard]:"communityCard",[f.U.contentGroupCard]:"contentGroupCard",[f.U.donationNpoCard]:"donationNpoCard",[f.U.electionCard]:"electionCard",[f.U.entertainmentPremierCard]:"entertainmentPremierCard",[f.U.gamingGamerModeUpsellCard]:"gamingGamerModeUpsellCard",[f.U.healthCard]:"bingHealthCard",[f.U.healthRiverCard]:"healthRiverCard",[f.U.healthTipCard]:"healthTipCard",[f.U.horoscopeAnswerCard]:"horoscopeCard",[f.U.hotListCard]:"hotListCard",[f.U.mangaCard]:"mangaCard",[f.U.mobileRewardsCard]:"mobileRewardsCard",[f.U.mobileShoppingCard]:"mobileShoppingCard",[f.U.onThisDayCard]:"onThisDayCard",[f.U.prayerTimesCard]:"prayerTimesCard",[f.U.prismCarouselCard]:"prismCarouselCard",[f.U.qnaCard]:"qnaCard",[f.U.quizCard]:"quizCard",[f.U.realEstateCard]:"realEstateCard",[f.U.recommendedSearchesCard]:"recommendedSearchesCard",[f.U.rewardsDailyCheckinCard]:"rewardsDailyCheckinCard",[f.U.richCalendarCard]:"richCalendarCard",[f.U.shoppingBuyingGuidePremiumCard]:"shoppingBuyingGuidePremiumCard",[f.U.shoppingCarouselCard]:"shopping-carousel",[f.U.shoppingEventsDealCard]:"shoppingEventsDealCard",[f.U.shoppingSdCard]:"shoppingSdCard",[f.U.superListCard]:"superListCard",[f.U.travelArticleCard]:"travelArticleCard",[f.U.trendingNowCard]:"trendingNowCard",[f.U.trendingSearchCard]:"trendingSearchCard",[f.U.trendingTopicsCard]:"trendingTopicsCard",[f.U.videoShoppingCard]:"videoShoppingCard",[f.U.videoShoppingCarouselCard]:"videoShoppingCarouselCard",[f.U.weatherCard]:"weather",[f.U.widgetsNotificationsCard]:"widgetsNotificationsCard",[f.U.winAppCard]:"winAppCard"},Ye=(e,a)=>{let t="";if("ext"in a.contract){const e=a.contract.ext;t=`${e.row}_${e.col}`}return`${e}_${t}`},ea=(Qe.dy`
    ${e=>{var a,t;return e.configInfo&&(0,Je.Ot)({...e.configInfo,instanceId:`${Ye(e.configInfo.instanceId,e.telemetryObject)}`},{properties:{wpoMetadata:e.wpoMetadata,mapperArgs:e.mapperArgs,parentTelemetry:e.telemetryObject,feedLayoutCardSize:e.cardSize},attributes:{style:`grid-area:${e.gridArea};width:${null===(a=e.mapperArgs)||void 0===a||null===(t=a.displaySettings)||void 0===t?void 0:t.cardWidth}px;contain:unset;content-visibility:visible;`,class:`${e.cardSize}`},telemetryObject:e.telemetryObject})}}
`,Qe.dy`
     ${e=>e.configInfo&&(0,Je.Ot)({...e.configInfo,instanceId:`${Ye(e.configInfo.instanceId,e.telemetryObject)}`},{properties:{mapperArgs:e.mapperArgs,feedLayoutCardSize:e.cardSize},attributes:{style:`grid-area:${e.gridArea};`,class:`${e.cardSize}`},telemetryObject:e.telemetryObject})}
`,Qe.dy`
    ${e=>e.configInfo&&(0,Je.Ot)({...e.configInfo,instanceId:`${Ye(e.configInfo.instanceId,e.telemetryObject)}`},{attributes:{style:`grid-area:${e.gridArea}`,class:`${e.cardSize}`},properties:{mapperArgs:e.mapperArgs,feedLayoutCardSize:e.cardSize},telemetryObject:e.telemetryObject})}
`,Qe.dy`
    ${e=>e.configInfo&&(0,Je.Ot)({...e.configInfo,instanceId:`${Ye(e.configInfo.instanceId,e.telemetryObject)}`},{properties:{mapperArgs:e.mapperArgs,feedLayoutCardSize:e.cardSize},attributes:{style:`grid-area:${e.gridArea};contain:unset;content-visibility:visible;`,class:`${e.cardSize}`},telemetryObject:e.telemetryObject,memoize:"edgeChromium"===fe.jG.AppType})}
`,Qe.dy`
    ${e=>e.configInfo&&(0,Je.Ot)({...e.configInfo,instanceId:`${Ye(e.configInfo.instanceId,e.telemetryObject)}`},{properties:{mapperArgs:e.mapperArgs,cardMetadata:e.mapperArgs?e.mapperArgs.cardMetadata.data:null,feedLayoutCardSize:e.cardSize},attributes:{style:`grid-area:${e.gridArea};contain:unset;content-visibility:visible;`},telemetryObject:e.telemetryObject,memoize:"edgeChromium"===fe.jG.AppType})}
`,Qe.dy`
    ${e=>e.configInfo&&(0,Je.Ot)({...e.configInfo,instanceId:`${Ye(e.configInfo.instanceId,e.telemetryObject)}`},{properties:{mapperArgs:e.mapperArgs,feedLayoutCardSize:e.cardSize},attributes:{style:`grid-area:${e.gridArea};contain:unset;content-visibility:visible;`,class:`${e.cardSize}`},telemetryObject:e.telemetryObject,memoize:!1})}
`,(e,a)=>{var t,r;const{cardSlot:{grid_area:i},configOptions:n,cardMetadata:s}=e;a||(a=g.J[s.type]),a||Y.M0.sendAppErrorEvent({...S.erD,message:"No card template type found",pb:{...S.erD.pb,cardType:s.type}});const o=Ze[a],d={id:o,childTemplateType:a,mapperArgs:e,configInfo:n};return(0,Ke.Cu)({id:o,experienceType:null===(t=n&&n)||void 0===t||null===(r=t.configRef)||void 0===r?void 0:r.experienceType,mapperArgs:e},d,null,!0)});var aa=t(72263);class ta extends Z.o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;super(),this.counter=e,this.counter<=0&&super.set()}decrease(){this.counter>0&&this.counter--,this.counter<=0&&super.set()}reset(e){if(this.wasSet())throw new Error("Cannot reset a fulfilled promise.");this.counter=e,this.counter<=0&&super.set()}getCount(){return this.counter}}var ra=t(90061),ia=t(12031),na=t(4183),sa=t(54085),oa=t(21215),da=t(52185),la=t(61780),ca=t(28951);var pa,ha=t(54791),Ca=t(5884);function ua(){return ga}!function(e){e.Unknown="unknown",e.Connected="connected",e.Disconnected="disconnected",e.Aborted="aborted"}(pa||(pa={}));let ga=pa.Unknown;var fa=t(79678),ma=t(59942),va=t(31371),ya=t(45970),Sa=t(242),ka=t(76424),ba=t(43225),Ra=t(81586),Pa=t(89658),wa=t(17813),Ua=t(22691),xa=t(5232);const Ta=(e,a)=>{const t=e&&e.cardContent&&e.cardContent.topics;return!(0,ha.x)(t)&&t.some((e=>e.feedId===a))},La=(e,a)=>{const t=e.cardContent||e;return Boolean(t&&t.provider&&t.provider.id===a)},Fa=e=>Boolean(e.metadata?e.metadata.reactionSummary:e.reactionSummary),Ia=e=>{var a;null!==(a=e.metadata)&&void 0!==a&&a.reactionSummary&&(e.metadata.reactionSummary=void 0)},Ea=e=>Boolean(e.metadata?e.metadata.commentSummary:e.commentSummary),Ma=e=>{var a;null!==(a=e.metadata)&&void 0!==a&&a.commentSummary&&(e.metadata.commentSummary=void 0)},Da=e=>{var a,t;return!!e&&-1!==(null===(a=e.metadata)||void 0===a||null===(t=a.actions)||void 0===t?void 0:t.indexOf("hidden"))},Aa=(e,a)=>e.map(((e,t)=>e.type===E.PL.Infopane&&e.subItems?{...e,subItems:e.subItems.map(((e,r)=>a(e,t,r)))}:a(e,t)));var Wa=t(98604);const Ba=e=>{const{clientHeight:a,clientWidth:t}=document.documentElement,r=(0,Wa.b_)(e);if(!r)throw new Error("River element is not defined");const i=r.getBoundingClientRect();return{contentInViewport:{height:a-i.y,width:t},river:i}},Oa=(e,a,t)=>Na(e,a).reduce(((e,a,r)=>e+a+(0===r?0:t)),0),za=function(e,a,t,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:12,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;const{contentInViewport:s}=Ba(e),o=function(e,a,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12;return t?t.map((t=>{if(void 0!==t.templateId){const i=e[t.templateId];return Oa(i,a,r)}return 0})):[]}(a,t,r,i);let d=0,l=0,c=0;for(let e=0;e<o.length;e++){if(d+=o[e]+i,d>=s.height-n){var p;const l=null===(p=r[e])||void 0===p?void 0:p.templateId;if(void 0===l)break;const h=a[l],C=Na(h,t);d=d-o[e]-i;for(let e=0;e<C.length&&(d+=C[e]+(0==e?0:i),!(d>=s.height-n));e++)c++;break}l++}return{lastSectionIndex:l,lastRowIndex:c}},Na=(e,a)=>{if(!e||!e.rowHeightPx)throw new Error("Invalid layout template");const{rowHeightPx:t}=e;return t[a]??[]};var Ha,Ga;!function(e){e[e.Ttvr=0]="Ttvr",e[e.BlankDetect=1]="BlankDetect"}(Ha||(Ha={})),function(e){e[e.FeedTtvr=0]="FeedTtvr",e[e.FeedSDCardsTtvr=1]="FeedSDCardsTtvr",e[e.FeedViewCardsTtvr=2]="FeedViewCardsTtvr",e[e.FeedSectionTtvr=3]="FeedSectionTtvr",e[e.BlankAdCards=4]="BlankAdCards",e[e.BlankViewCards=5]="BlankViewCards",e[e.BlankSDCards=6]="BlankSDCards",e[e.BlankUncategorizedCard=7]="BlankUncategorizedCard"}(Ga||(Ga={}));class $a{constructor(){this.count=0,this.failedKeyList=[],this.rebase()}resolve(){var e;this.resolver(),this.finished=!0,null===(e=this.resolvers)||void 0===e||e.map((e=>$a.callWithSandbox(e)))}forceResolve(){this.resolve(),this.count=0,this.failedKeyList=[]}reject(){var e;this.rejecter(this.failedKeyList),this.finished=!0,null===(e=this.rejecters)||void 0===e||e.map((e=>$a.callWithSandbox((()=>e(this.failedKeyList)))))}async rebase(){try{this.asyncStatus=new Promise(((e,a)=>{this.resolver=e,this.rejecter=a})),this.finished=!1,this.failedKeyList=[],await this.asyncStatus}catch{}}get transientState(){return this.asyncStatus}decrease(e){this.count<1||this.finished||(void 0!==e&&this.failedKeyList.push(e),this.count--,this.count<1&&(this.failedKeyList.length>0?this.reject():this.resolve()))}increase(){return this.finished&&this.rebase(),this.count++,this}setCallback(e,a){this.resolvers=this.resolvers||[],this.rejecters=this.rejecters||[],e&&this.resolvers.push(e),a&&this.rejecters.push(a)}}$a.callWithSandbox=e=>{try{e&&e()}catch(e){console.error(e)}};class Va extends Map{constructor(){super(),this.spaces=new Map,this.ignoreSet=new Set}getSpace(e){return this.spaces.get(e)||this.spaces.set(e,new $a).get(e)}track(e,a){let{spaceNames:t,metadataType:r,timestamp:i}=a;if(super.get(e)||this.ignoreSet.has(e))return;const n=t.map((e=>this.getSpace(e).increase()));super.set(e,{spaces:n,timestamp:i,metadataType:r})}mark(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const t=super.get(e);t&&(a&&this.ignoreSet.add(e),super.delete(e),t.spaces.map((e=>e.decrease())))}markFail(e){const a=super.get(e);if(a){super.delete(e);const t=a.metadataType,r=t?`${e}(${t})`:e;a.spaces.map((e=>e.decrease(r)))}}setCallback(e,a,t){return this.getSpace(e).setCallback(a,t)}forceResolveSpace(e){return this.getSpace(e).forceResolve()}clearSpace(e){const a=this.spaces.get(e);a&&super.forEach(((e,t)=>{const r=e.spaces.indexOf(a);-1!==r&&e.spaces.splice(r,1),0===e.spaces.length&&super.delete(t)})),this.spaces.delete(e)}state(e){return this.getSpace(e).transientState}isKeyInNamespace(e,a){var t;const r=super.get(e),i=this.spaces.get(a);return!(null==r||null===(t=r.spaces)||void 0===t||!t.includes(i))}}const _a=e=>{const a=da.Gq.get("__globalRegistery__",(()=>new Map));if(a.has(e))return a.get(e);const t=new Va;return a.set(e,t),t};var qa=t(23946),ja=t(27940);const Ka=()=>{const e=ja._.getInstance().rootReducer.connectors().find((e=>e.namespace.indexOf("ExperienceTracker")>=0));if(!e)return null;const a=e.getCurrentState().visuallyReadyDependencies;return a&&0!==a.size?[...a.keys()]:null};let Qa,Ja=[];const Xa=e=>{if(e){const a=_a(Ha.Ttvr);a.isKeyInNamespace(e,Ga.FeedSDCardsTtvr)&&Ja.push(N.a8+e),a.mark(e)}},Za=()=>{Qa=!0;[Ga.FeedTtvr,Ga.FeedSDCardsTtvr,Ga.FeedViewCardsTtvr].forEach((e=>_a(Ha.Ttvr).forceResolveSpace(e)))},Ya=e=>{const a=g.J[e.type];if(a)return rt[a]},et=e=>{var a,t;const r=(0,z.S0)();r&&(null===O.g||void 0===O.g||null===(a=O.g.updateVisuallyReadyTiming)||void 0===a||null===(t=a.getActionSender(r))||void 0===t||t.send((0,z.v)(e,void 0,void 0,void 0,window.performance.now())))},at=e=>{const a=Ka(),t=null==a?void 0:a.find((e=>e.endsWith("ViewFeed")));return t&&t!==e&&Y.M0.sendAppErrorEvent({...S.hw1,message:"Current feed doesn't match feed in visualDependencies",pb:{...S.hw1.pb,customMessage:`current feed: ${e}, feed in visualDependencies: ${t}`}}),t??e},tt=e=>{Qa=!1,Ja=[];const a=_a(Ha.Ttvr);(0,N.cd)(Xa),a.clearSpace(Ga.FeedTtvr),a.clearSpace(Ga.FeedSDCardsTtvr),a.clearSpace(Ga.FeedViewCardsTtvr),a.clearSpace(Ga.FeedSectionTtvr),(0,N.mb)(Xa),a.setCallback(Ga.FeedTtvr,(()=>{const a=(0,Sa.Ou)(),t=at(e);a[L.p.isSSRCompleted]?(0,ba.c)((()=>{const e=(0,N.OB)(),a=[N.a8+"SDCards",N.a8+"ViewCards"],r=e.filter((e=>{let[t,r]=e;return a.includes(t)})).map((e=>{let[a,t]=e;return t})),i=Math.max(...r);(0,N.o_)(t,!1,i,!1)})):(0,N.o_)(t,!1,void 0,!0),et(t)}),(()=>{const a=at(e);et(a)})),a.setCallback(Ga.FeedSDCardsTtvr,(()=>{(0,Sa.Ou)()[L.p.isSSRCompleted]?(0,ba.c)((()=>{const e=(0,N.OB)().filter((e=>{let[a,t]=e;return Ja.includes(a)})).map((e=>{let[a,t]=e;return t})),a=Math.max(...e);(0,N.o_)("SDCards",!1,a,!1)})):(0,N.o_)("SDCards",!1,void 0,!0)})),a.setCallback(Ga.FeedViewCardsTtvr,(()=>{const e=(0,Sa.Ou)();e[L.p.isSSRCompleted]?(0,ba.c)((()=>{const a=e[N.nz+L.p.complete];(0,N.o_)("ViewCards",!1,a,!1)})):(0,N.o_)("ViewCards",!1,void 0,!0)}))},rt={[f.U.horoscopeAnswerCard]:{key:()=>x.x.horoscopeAnswerCardWC,space:Ga.FeedSDCardsTtvr},[f.U.linkedInCard]:{key:()=>x.x.linkedInCard,space:Ga.FeedSDCardsTtvr},[f.U.moneyInfoCardWC]:{key:()=>x.x.moneyInfoCardWC,space:Ga.FeedSDCardsTtvr},[f.U.esportsCard]:{key:()=>x.x.esportsCard,space:Ga.FeedSDCardsTtvr},[f.U.onThisDayCard]:{key:()=>x.x.onThisDayCardWC,space:Ga.FeedSDCardsTtvr},[f.U.qnaCard]:{key:()=>x.x.qna,space:Ga.FeedSDCardsTtvr},[f.U.shoppingCarouselCard]:{key:()=>x.x.shoppingCardWC,space:Ga.FeedSDCardsTtvr},[f.U.sportsCard]:{key:()=>x.x.sportsCardWC,space:Ga.FeedSDCardsTtvr},[f.U.trafficCard]:{key:()=>x.x.trafficCardWC,space:Ga.FeedSDCardsTtvr},[f.U.travelDestinationCard]:{key:()=>x.x.travelDestination,space:Ga.FeedSDCardsTtvr},[f.U.trendingNowCard]:{key:()=>x.x.trendingNowWC,space:Ga.FeedSDCardsTtvr},[f.U.weatherCard]:{key:()=>x.x.weatherCardWC,space:Ga.FeedSDCardsTtvr},[f.U.autosCarouselCard]:{key:()=>x.x.autosCarousel,space:Ga.FeedSDCardsTtvr},[f.U.realEstateCard]:{key:()=>x.x.realEstateCard,space:Ga.FeedSDCardsTtvr},[f.U.electionsCard]:{key:()=>x.x.generalElections,space:Ga.FeedSDCardsTtvr},[f.U.rewardsCard]:{key:()=>x.x.rewardsCardWC,space:Ga.FeedSDCardsTtvr},[f.U.gamingCompeteCard]:{key:()=>x.x.gamingCompeteCard,space:Ga.FeedSDCardsTtvr},[f.U.gamingMatchCard]:{key:()=>x.x.gamingMatchCard,space:Ga.FeedSDCardsTtvr},[f.U.gamingPersonalizationCard]:{key:()=>x.x.gamingPersonalizationCard,space:Ga.FeedSDCardsTtvr},[f.U.gamingRedditCard]:{key:()=>x.x.gamingRedditCard,space:Ga.FeedSDCardsTtvr},[f.U.gamingRecentlyPlayedCard]:{key:()=>x.x.gamingRecentlyPlayedCard,space:Ga.FeedSDCardsTtvr},[f.U.gamingRecommendedCard]:{key:()=>x.x.gamingRecommendedCard,space:Ga.FeedSDCardsTtvr},[f.U.gamingRewardsCard]:{key:()=>x.x.gamingRewardsCard,space:Ga.FeedSDCardsTtvr},[f.U.gamingStreamCard]:{key:()=>x.x.gamingStreamCard,space:Ga.FeedSDCardsTtvr},[f.U.gamingTournamentCard]:{key:()=>x.x.gamingTournamentCard,space:Ga.FeedSDCardsTtvr},[f.U.gamingUpcomingCard]:{key:()=>x.x.gamingUpcomingCard,space:Ga.FeedSDCardsTtvr},[f.U.gamingVideoCard]:{key:()=>x.x.gamingVideoCard,space:Ga.FeedSDCardsTtvr},[f.U.infopaneCard]:{key:()=>x.x.infopane,space:Ga.FeedViewCardsTtvr},[f.U.tabbedInfopaneCard]:{key:()=>x.x.tabbedInfopane,space:Ga.FeedViewCardsTtvr},[f.U.trendingSearchCard]:{key:()=>x.x.trendingSearchCard,space:Ga.FeedSDCardsTtvr},[f.U.mangaCard]:{key:()=>x.x.mangaCard,space:Ga.FeedSDCardsTtvr},[f.U.sectionHeaderCard]:{key:()=>f.U.sectionHeaderCard,space:Ga.FeedViewCardsTtvr},[f.U.channelCarouselCard]:{key:()=>x.x.storyCarousel,space:Ga.FeedSDCardsTtvr},[f.U.channelFilterCard]:{key:()=>x.x.channelFilterCard,space:Ga.FeedSDCardsTtvr},[f.U.topStoriesCard]:{key:()=>x.x.digestCard,space:Ga.FeedViewCardsTtvr},[f.U.contentCard]:{key:e=>e.id??"",shouldTrack:e=>{const a=(0,$.Ae)(e)||(0,$.UN)(e);return!!(a&&a.height>=H.B._300x225.height&&a.width>=H.B._300x225.width)},space:Ga.FeedViewCardsTtvr}},it={width:268,height:140},nt={[f.U.horoscopeAnswerCard]:{key:()=>x.x.horoscopeAnswerCardWC,space:Ga.BlankSDCards},[f.U.linkedInCard]:{key:()=>x.x.linkedInCard,space:Ga.BlankSDCards},[f.U.moneyInfoCardWC]:{key:()=>x.x.moneyInfoCardWC,space:Ga.BlankSDCards},[f.U.onThisDayCard]:{key:()=>x.x.onThisDayCardWC,space:Ga.BlankSDCards},[f.U.qnaCard]:{key:()=>x.x.qna,space:Ga.BlankSDCards},[f.U.shoppingCarouselCard]:{key:()=>x.x.shoppingCardWC,space:Ga.BlankSDCards},[f.U.sportsCard]:{key:()=>x.x.sportsCardWC,space:Ga.BlankSDCards},[f.U.trafficCard]:{key:()=>x.x.trafficCardWC,space:Ga.BlankSDCards},[f.U.travelDestinationCard]:{key:()=>x.x.travelDestination,space:Ga.BlankSDCards},[f.U.trendingNowCard]:{key:()=>x.x.trendingNowWC,space:Ga.BlankSDCards},[f.U.weatherCard]:{key:()=>x.x.weatherCardWC,space:Ga.BlankSDCards},[f.U.autosCarouselCard]:{key:()=>x.x.autosCarousel,space:Ga.BlankSDCards},[f.U.realEstateCard]:{key:()=>x.x.realEstateCard,space:Ga.BlankSDCards},[f.U.electionsCard]:{key:()=>x.x.generalElections,space:Ga.BlankSDCards},[f.U.rewardsCard]:{key:()=>x.x.rewardsCardWC,space:Ga.BlankSDCards},[f.U.gamingCompeteCard]:{key:()=>x.x.gamingCompeteCard,space:Ga.BlankSDCards},[f.U.gamingMatchCard]:{key:()=>x.x.gamingMatchCard,space:Ga.BlankSDCards},[f.U.gamingPersonalizationCard]:{key:()=>x.x.gamingPersonalizationCard,space:Ga.BlankSDCards},[f.U.gamingRedditCard]:{key:()=>x.x.gamingRedditCard,space:Ga.BlankSDCards},[f.U.gamingRecentlyPlayedCard]:{key:()=>x.x.gamingRecentlyPlayedCard,space:Ga.BlankSDCards},[f.U.gamingRecommendedCard]:{key:()=>x.x.gamingRecommendedCard,space:Ga.BlankSDCards},[f.U.gamingRewardsCard]:{key:()=>x.x.gamingRewardsCard,space:Ga.BlankSDCards},[f.U.gamingStreamCard]:{key:()=>x.x.gamingStreamCard,space:Ga.BlankSDCards},[f.U.gamingTournamentCard]:{key:()=>x.x.gamingTournamentCard,space:Ga.BlankSDCards},[f.U.gamingUpcomingCard]:{key:()=>x.x.gamingUpcomingCard,space:Ga.BlankSDCards},[f.U.gamingVideoCard]:{key:()=>x.x.gamingVideoCard,space:Ga.BlankSDCards},[f.U.trendingSearchCard]:{key:()=>x.x.trendingSearchCard,space:Ga.BlankSDCards},[f.U.mangaCard]:{key:()=>x.x.mangaCard,space:Ga.BlankSDCards},[f.U.sectionHeaderCard]:{key:()=>f.U.sectionHeaderCard,space:Ga.BlankViewCards},[f.U.channelCarouselCard]:{key:()=>x.x.storyCarousel,space:Ga.BlankSDCards},[f.U.topStoriesCard]:{key:()=>x.x.digestCard,space:Ga.BlankViewCards},[f.U.infopaneCard]:{key:()=>x.x.infopane,space:Ga.BlankViewCards},[f.U.contentCard]:{key:(e,a)=>e.id?`${a}-${e.id}`:"",shouldTrack:e=>{const a=(0,$.Ae)(e)||(0,$.UN)(e);return!!(a&&a.height>=H.B._300x225.height&&a.width>=H.B._300x225.width)},space:Ga.BlankViewCards},[f.U.responsiveCard]:{key:(e,a)=>e.id?`${a}-${e.id}`:"",shouldTrack:e=>{const a=(0,$.Ae)(e)||(0,$.UN)(e);return!!(a&&a.height>=it.height&&a.width>=it.width)},space:Ga.BlankViewCards},[f.U.nativeAdCard]:{key:(e,a)=>`${a}-${e.type}-${e.regionIndex}`,space:Ga.BlankAdCards},[f.U.autosGarageCard]:{key:()=>x.x.autosGarageCard,space:Ga.BlankSDCards}};const st={[f.U.TopicFeedCard]:{key:e=>x.x.digestCard,shouldTrack:()=>!1,space:Ga.BlankUncategorizedCard},[f.U.articleFreCard]:{key:()=>x.x.articleFre,space:Ga.BlankUncategorizedCard},[f.U.autosGarageCard]:{key:()=>x.x.autosGarageCard,space:Ga.BlankUncategorizedCard},[f.U.autosCarouselCard]:{key:()=>x.x.autosCarousel,space:Ga.BlankUncategorizedCard},[f.U.autosMarketplaceCard]:{key:()=>x.x.autosMarketplaceCard,space:Ga.BlankUncategorizedCard},[f.U.bingDailyQuizCard]:{key:()=>x.x.bingDailyQuizCard,space:Ga.BlankUncategorizedCard},[f.U.bingThisOrThatCard]:{key:()=>x.x.bingThisOrThatCard,space:Ga.BlankUncategorizedCard},[f.U.bingVideoCarousel]:{key:()=>x.x.selectCarousel,space:Ga.BlankUncategorizedCard},[f.U.boostAdCard]:{key:()=>x.x.boostAdCard,space:Ga.BlankUncategorizedCard},[f.U.cashbackCarouselCard]:{key:()=>x.x.cashbackCarouselCard,space:Ga.BlankUncategorizedCard},[f.U.casualGamesCard]:{key:()=>x.x.casualGamesCard,space:Ga.BlankUncategorizedCard},[f.U.casualGamesCarouselCard]:{key:()=>x.x.casualGamesCarouselCard,space:Ga.BlankUncategorizedCard},[f.U.casualGamesStripeCarouselCard]:{key:()=>x.x.casualGamesStripeCarouselCard,space:Ga.BlankUncategorizedCard},[f.U.channelCarouselCard]:{key:()=>x.x.storyCarousel,space:Ga.BlankUncategorizedCard},[f.U.channelFilterCard]:{key:()=>x.x.channelFilterCard,space:Ga.BlankUncategorizedCard},[f.U.coldStartCard]:{key:()=>x.x.coldStartWC,space:Ga.BlankUncategorizedCard},[f.U.comicsCarouselCard]:{key:()=>x.x.selectCarousel,space:Ga.BlankUncategorizedCard},[f.U.communityCard]:{key:()=>x.x.communityCard,space:Ga.BlankUncategorizedCard},[f.U.commuteCard]:{key:()=>x.x.commuteCard,space:Ga.BlankUncategorizedCard},[f.U.companyNewsCard]:{key:()=>x.x.companyNewsCard,space:Ga.BlankUncategorizedCard},[f.U.contentCard]:{key:(e,a)=>e.id?`${a}-${e.id}`:"",shouldTrack:e=>{const a=(0,$.Ae)(e)||(0,$.UN)(e);return!!(a&&a.height>=H.B._300x225.height&&a.width>=H.B._300x225.width)},space:Ga.BlankUncategorizedCard},[f.U.contentCardPreview1x]:{key:(e,a)=>e.id?`${a}-${e.id}`:"",shouldTrack:e=>{const a=(0,$.Ae)(e)||(0,$.UN)(e);return!!(a&&a.height>=H.B._300x225.height&&a.width>=H.B._300x225.width)},space:Ga.BlankUncategorizedCard},[f.U.contentGroup]:{key:()=>x.x.contentGroup,space:Ga.BlankUncategorizedCard},[f.U.contentGroupCard]:{key:()=>x.x.contentGroupCard,space:Ga.BlankUncategorizedCard},[f.U.dailyFixGamesCarouselCard]:{key:()=>x.x.selectCarousel,space:Ga.BlankUncategorizedCard},[f.U.denseCard]:{key:()=>x.x.denseCard,space:Ga.BlankUncategorizedCard},[f.U.digestCard]:{key:()=>x.x.digestCard,space:Ga.BlankUncategorizedCard},[f.U.displayAdCard]:{key:()=>x.x.displayAdsWC,space:Ga.BlankUncategorizedCard},[f.U.donationNpoCard]:{key:()=>x.x.donationNpoCard,space:Ga.BlankUncategorizedCard},[f.U.edgeShoppingCard]:{key:()=>x.x.edgeShopping,space:Ga.BlankUncategorizedCard},[f.U.editorsPickCarouselCard]:{key:()=>x.x.selectCarousel,space:Ga.BlankUncategorizedCard},[f.U.electionCard]:{key:()=>x.x.electionCard,space:Ga.BlankUncategorizedCard},[f.U.electionsCard]:{key:()=>x.x.elections,space:Ga.BlankUncategorizedCard},[f.U.entertainmentPremierCard]:{key:()=>x.x.entertainmentPremierCard,space:Ga.BlankUncategorizedCard},[f.U.esportsCard]:{key:()=>x.x.esportsCard,space:Ga.BlankUncategorizedCard},[f.U.esportsStreamsCard]:{key:()=>x.x.esportsStreamsCard,space:Ga.BlankUncategorizedCard},[f.U.flexArticleCard]:{key:()=>f.U.flexArticleCard,space:Ga.BlankUncategorizedCard},[f.U.followingFREInlineCard]:{key:()=>x.x.followingFreFullWidth,space:Ga.BlankUncategorizedCard},[f.U.gamingCompeteCard]:{key:()=>x.x.gamingCompeteCard,space:Ga.BlankUncategorizedCard},[f.U.gamingGamerModeUpsellCard]:{key:()=>x.x.gamingGamerModeUpsellCard,space:Ga.BlankUncategorizedCard},[f.U.gamingInterestGroupCard]:{key:()=>x.x.gamingInterestGroupCard,space:Ga.BlankUncategorizedCard},[f.U.gamingMatchCard]:{key:()=>x.x.gamingMatchCard,space:Ga.BlankUncategorizedCard},[f.U.gamingMediaCarouselCard]:{key:()=>x.x.gamingMediaCarousel,space:Ga.BlankUncategorizedCard},[f.U.gamingPersonalizationCard]:{key:()=>x.x.gamingPersonalizationCard,space:Ga.BlankUncategorizedCard},[f.U.gamingRecentlyPlayedCard]:{key:()=>x.x.gamingRecentlyPlayedCard,space:Ga.BlankUncategorizedCard},[f.U.gamingRecommendedCard]:{key:()=>x.x.gamingRecommendedCard,space:Ga.BlankUncategorizedCard},[f.U.gamingRedditCard]:{key:()=>x.x.gamingRedditCard,space:Ga.BlankUncategorizedCard},[f.U.gamingRewardsCard]:{key:()=>x.x.gamingRewardsCard,space:Ga.BlankUncategorizedCard},[f.U.gamingStreamCard]:{key:()=>x.x.gamingStreamCard,space:Ga.BlankUncategorizedCard},[f.U.gamingTournamentCard]:{key:()=>x.x.gamingTournamentCard,space:Ga.BlankUncategorizedCard},[f.U.gamingUpcomingCard]:{key:()=>x.x.gamingUpcomingCard,space:Ga.BlankUncategorizedCard},[f.U.gamingVideoCard]:{key:()=>x.x.gamingVideoCard,space:Ga.BlankUncategorizedCard},[f.U.groceryCouponSdCard]:{key:()=>x.x.groceryCouponSdCard,space:Ga.BlankUncategorizedCard},[f.U.healthArticlesCard]:{key:()=>x.x.healthArticlesCardWC,space:Ga.BlankUncategorizedCard},[f.U.healthCard]:{key:()=>x.x.bingHealthCard,space:Ga.BlankUncategorizedCard},[f.U.healthFitnessCard]:{key:()=>x.x.bingHealthFitnessCard,space:Ga.BlankUncategorizedCard},[f.U.healthRiverCard]:{key:()=>x.x.healthRiverWC,space:Ga.BlankUncategorizedCard},[f.U.healthTipCard]:{key:()=>x.x.healthTipWC,space:Ga.BlankUncategorizedCard},[f.U.hideStoryCard]:{key:()=>f.U.hideStoryCard,shouldTrack:()=>!1,space:Ga.BlankUncategorizedCard},[f.U.horoscopeAnswerCard]:{key:()=>x.x.horoscopeAnswerCardWC,space:Ga.BlankUncategorizedCard},[f.U.hotListCard]:{key:()=>x.x.hotListCard,space:Ga.BlankUncategorizedCard},[f.U.industryNewsCard]:{key:()=>x.x.industryNewsCard,space:Ga.BlankUncategorizedCard},[f.U.infopaneCard]:{key:()=>x.x.infopane,space:Ga.BlankUncategorizedCard},[f.U.infopaneSlideCard]:{key:()=>f.U.infopaneSlideCard,shouldTrack:()=>!1,space:Ga.BlankUncategorizedCard},[f.U.interestManagementCard]:{key:()=>x.x.interestManagementCard,space:Ga.BlankUncategorizedCard},[f.U.linkedInCard]:{key:()=>x.x.linkedInCard,space:Ga.BlankUncategorizedCard},[f.U.localNewsCarCard]:{key:e=>{return(a=e).type===E.PL.LocalNewsFeed&&a.feed&&"nextdoor"===a.feed.sourceFeedType?x.x.nextdoorCard:x.x.selectCarousel;var a},space:Ga.BlankUncategorizedCard},[f.U.lotteryCard]:{key:()=>x.x.lottery,space:Ga.BlankUncategorizedCard},[f.U.mangaCard]:{key:()=>x.x.mangaCard,space:Ga.BlankUncategorizedCard},[f.U.marketplaceCard]:{key:()=>x.x.marketplaceCardWC,space:Ga.BlankUncategorizedCard},[f.U.microsoftFeedCard]:{key:()=>x.x.microsoftFeedCard,space:Ga.BlankUncategorizedCard},[f.U.mobileRewardsCard]:{key:()=>x.x.mobileRewardsCard,space:Ga.BlankUncategorizedCard},[f.U.mobileShoppingCard]:{key:()=>x.x.mobileShoppingCard,space:Ga.BlankUncategorizedCard},[f.U.moneyAddWatchlistCard]:{key:()=>f.U.moneyAddWatchlistCard,shouldTrack:()=>!1,space:Ga.BlankUncategorizedCard},[f.U.moneyCard]:{key:()=>x.x.moneyInfoCard,space:Ga.BlankUncategorizedCard},[f.U.moneyEdgeCard]:{key:()=>f.U.moneyEdgeCard,space:Ga.BlankUncategorizedCard},[f.U.moneyInfoCardWC]:{key:()=>x.x.moneyInfoCardWC,space:Ga.BlankUncategorizedCard},[f.U.moneyTopicStripeCarouselCard]:{key:()=>x.x.selectCarousel,space:Ga.BlankUncategorizedCard},[f.U.weatherHeroExperienceCarouselCard]:{key:()=>x.x.selectCarousel,space:Ga.BlankUncategorizedCard},[f.U.nativeAdCard]:{key:(e,a)=>`${a}-${e.type}-${e.regionIndex}`,space:Ga.BlankUncategorizedCard},[f.U.nativeTopAdCard]:{key:()=>x.x.nativeTopAd,space:Ga.BlankUncategorizedCard},[f.U.newsGroupsCard]:{key:e=>"CanonicalName-top stories"===e.id?x.x.selectCarousel:x.x.newsGroupsCard,space:Ga.BlankUncategorizedCard},[f.U.newsSegmentCarousel]:{key:()=>x.x.newsSegmentCarousel,space:Ga.BlankUncategorizedCard},[f.U.onThisDayCard]:{key:()=>x.x.onThisDayCardWC,space:Ga.BlankUncategorizedCard},[f.U.panoCard]:{key:()=>f.U.panoCard,space:Ga.BlankUncategorizedCard},[f.U.partnerUpsellCard]:{key:()=>x.x.partnerUpsellCard,space:Ga.BlankUncategorizedCard},[f.U.perspectiveCard]:{key:()=>f.U.perspectiveCard,space:Ga.BlankUncategorizedCard},[f.U.placeholderCard]:{key:()=>f.U.placeholderCard,shouldTrack:()=>!1,space:Ga.BlankUncategorizedCard},[f.U.pollsCard]:{key:()=>x.x.pollsCardWC,space:Ga.BlankUncategorizedCard},[f.U.prayerTimesCard]:{key:()=>x.x.prayerTimesCard,space:Ga.BlankUncategorizedCard},[f.U.prismCard]:{key:()=>x.x.prismSdCard,space:Ga.BlankUncategorizedCard},[f.U.prismCarouselCard]:{key:()=>x.x.prismCarouselCard,space:Ga.BlankUncategorizedCard},[f.U.profileCarouselCard]:{key:()=>x.x.profilePromoCard,space:Ga.BlankUncategorizedCard},[f.U.publisherCarouselCard]:{key:()=>x.x.publisherCarousel,space:Ga.BlankUncategorizedCard},[f.U.publisherListCard]:{key:()=>x.x.publisherList,space:Ga.BlankUncategorizedCard},[f.U.qnaCard]:{key:()=>x.x.qna,space:Ga.BlankUncategorizedCard},[f.U.quizCard]:{key:()=>x.x.quizCard,space:Ga.BlankUncategorizedCard},[f.U.realEstateCard]:{key:()=>x.x.realEstateCard,space:Ga.BlankUncategorizedCard},[f.U.recipesCard]:{key:()=>x.x.recipesSdCard,space:Ga.BlankUncategorizedCard},[f.U.recommendedInterestsCard]:{key:()=>x.x.recommendedInterests,space:Ga.BlankUncategorizedCard},[f.U.recommendedSearchCarousel]:{key:()=>x.x.recommendedSearchCarouselWC,space:Ga.BlankUncategorizedCard},[f.U.recommendedSearchesCard]:{key:()=>x.x.recommendedSearchesCard,space:Ga.BlankUncategorizedCard},[f.U.responsiveAdCard]:{key:(e,a)=>`${a}-${e.type}-${e.regionIndex}`,space:Ga.BlankUncategorizedCard},[f.U.responsiveCard]:{key:(e,a)=>e.id?`${a}-${e.id}`:"",shouldTrack:e=>{const a=(0,$.Ae)(e)||(0,$.UN)(e);return!!(a&&a.height>=it.height&&a.width>=it.width)},space:Ga.BlankUncategorizedCard},[f.U.rewardsCard]:{key:()=>x.x.rewardsCardWC,space:Ga.BlankUncategorizedCard},[f.U.rewardsDailyCheckinCard]:{key:()=>x.x.rewardsDailyCheckinCard,space:Ga.BlankUncategorizedCard},[f.U.rewardsDailySetCard]:{key:()=>x.x.rewardsDailySetCard,space:Ga.BlankUncategorizedCard},[f.U.richCalendarCard]:{key:()=>x.x.richCalendarCard,space:Ga.BlankUncategorizedCard},[f.U.sectionHeaderCard]:{key:()=>f.U.sectionHeaderCard,space:Ga.BlankUncategorizedCard},[f.U.selectCarouselCard]:{key:()=>x.x.selectCarousel,space:Ga.BlankUncategorizedCard},[f.U.serendipityCard]:{key:()=>x.x.trendingNowWC,space:Ga.BlankUncategorizedCard},[f.U.shoppingBuyingGuidePremiumCard]:{key:()=>x.x.shoppingBuyingGuidePremiumCard,space:Ga.BlankUncategorizedCard},[f.U.shoppingCard]:{key:()=>x.x.shoppingCardWC,space:Ga.BlankUncategorizedCard},[f.U.shoppingCarouselCard]:{key:()=>x.x.shoppingCardWC,space:Ga.BlankUncategorizedCard},[f.U.shoppingCarouselProngWC]:{key:()=>x.x.shoppingCarouselProngWC,space:Ga.BlankUncategorizedCard},[f.U.ShoppingProngTracking]:{key:()=>x.x.shoppingCarouselProngWC,space:Ga.BlankUncategorizedCard},[f.U.shoppingEventsDealCard]:{key:()=>x.x.shoppingEventsDealCard,space:Ga.BlankUncategorizedCard},[f.U.shoppingFashionCarouselWC]:{key:()=>x.x.shoppingFashionCarouselWC,space:Ga.BlankUncategorizedCard},[f.U.shoppingSdCard]:{key:()=>x.x.shoppingCardWC,space:Ga.BlankUncategorizedCard},[f.U.shoppingVideoCarouselCard]:{key:()=>x.x.selectCarousel,space:Ga.BlankUncategorizedCard},[f.U.sportsCard]:{key:()=>x.x.sportsMatchupCard,space:Ga.BlankUncategorizedCard},[f.U.sportsOlympicCard]:{key:()=>x.x.sportsOlympicCardWC,space:Ga.BlankUncategorizedCard},[f.U.sportsTopicStripeCarouselCard]:{key:()=>x.x.selectCarousel,space:Ga.BlankUncategorizedCard},[f.U.sportsWorldCupCard]:{key:()=>x.x.sportsWorldCupCardWC,space:Ga.BlankUncategorizedCard},[f.U.spotlightCard]:{key:()=>x.x.spotlightCardWC,space:Ga.BlankUncategorizedCard},[f.U.superListCard]:{key:()=>x.x.superListCard,space:Ga.BlankUncategorizedCard},[f.U.superappUpsellCard]:{key:()=>x.x.superappUpsellCardWC,space:Ga.BlankUncategorizedCard},[f.U.tabbedFeedCard]:{key:()=>x.x.tabbedFeedWC,space:Ga.BlankUncategorizedCard},[f.U.tabbedInfopaneCard]:{key:()=>x.x.tabbedInfopane,space:Ga.BlankUncategorizedCard},[f.U.topPicksCard]:{key:()=>f.U.topPicksCard,shouldTrack:()=>!1,space:Ga.BlankUncategorizedCard},[f.U.topSitesCard]:{key:()=>x.x.topSitesNewsbar,space:Ga.BlankUncategorizedCard},[f.U.topStoriesCard]:{key:()=>x.x.digestCard,space:Ga.BlankUncategorizedCard},[f.U.trafficCard]:{key:()=>x.x.trafficCardWC,space:Ga.BlankUncategorizedCard},[f.U.travelArticleCard]:{key:()=>x.x.travelArticleCard,space:Ga.BlankUncategorizedCard},[f.U.travelDestinationCard]:{key:()=>x.x.travelDestination,space:Ga.BlankUncategorizedCard},[f.U.travelDestinationCarouselCard]:{key:()=>x.x.travelCarousel,space:Ga.BlankUncategorizedCard},[f.U.trendingNowCard]:{key:()=>x.x.trendingNowWC,space:Ga.BlankUncategorizedCard},[f.U.trendingSearchCard]:{key:()=>x.x.trendingSearchCard,space:Ga.BlankUncategorizedCard},[f.U.trendingTopicsCard]:{key:()=>x.x.trendingTopics,space:Ga.BlankUncategorizedCard},[f.U.videoCard]:{key:()=>x.x.videoCardWC,space:Ga.BlankUncategorizedCard},[f.U.videoShoppingCard]:{key:()=>x.x.videoShoppingCard,space:Ga.BlankUncategorizedCard},[f.U.videoShoppingCarouselCard]:{key:()=>x.x.videoShoppingCarouselCard,space:Ga.BlankUncategorizedCard},[f.U.weatherCard]:{key:()=>x.x.weatherCardWC,space:Ga.BlankUncategorizedCard},[f.U.webContentCard]:{key:(e,a)=>e.id?`${a}-${e.id}`:"",shouldTrack:e=>{const a=(0,$.Ae)(e)||(0,$.UN)(e);return!!(a&&a.height>=H.B._300x225.height&&a.width>=H.B._300x225.width)},space:Ga.BlankUncategorizedCard},[f.U.widgetPlaceholderCard]:{key:()=>f.U.widgetPlaceholderCard,shouldTrack:()=>!1,space:Ga.BlankUncategorizedCard},[f.U.widgetsNotificationsCard]:{key:()=>x.x.widgetsNotificationsCard,space:Ga.BlankUncategorizedCard},[f.U.winAppCard]:{key:()=>x.x.winAppWC,space:Ga.BlankUncategorizedCard}},{aiCharacterCard:ot,boostAd:dt,comboCard:lt,communityInfoCard:ct,complexContentPreview:pt,contentGroupCard:ht,contentPreview:Ct,displayAdsWithContentFallback:ut,donationNpoCard:gt,esportsCasualGamesCard:ft,esportsLiveStreamCard:mt,externalContentPreview:vt,fitnessCard:yt,followingFreFullWidth:St,healthTipReact:kt,healthRiverWC:bt,infopane:Rt,linkedInNewsCard:Pt,localGuideCard:wt,moneyInfoCard:Ut,myBriefRiverCard:xt,nativeAd:Tt,newsFlipperCard:Lt,portugueseElectionExperience:Ft,prayerTimesCard:It,publisherList:Et,recommendedSearchesCard:Mt,rewardsDailySetCard:Dt,shoppingCarousel:At,shoppingFeedCard:Wt,sportsMatchupCard:Bt,sportsOlympicCard:Ot,sportsWorldCupCard:zt,spotlightCard:Nt,tabbedInfopane:Ht,tabbedInfopaneTabPreview:Gt,trafficCard:$t,travelArticleCard:Vt,travelInspirationCard:_t,weatherInfoCard:qt,windowsShellColdStartCard:jt,windowsShellHotList:Kt,windowsShellMorningDigest:Qt,windowsShellNewsPromoCard:Jt,windowsShellRecommendedInterests:Xt,windowsShellTrendingTopics:Zt}=x.x,Yt={[E.PL.Article]:Ct,[E.PL.Slideshow]:Ct,[E.PL.Video]:Ct,[E.PL.Infopane]:Rt,[E.PL.HalfPane]:pt,[E.PL.HeadToHead]:pt,[E.PL.Mosaic]:pt,[E.PL.Triptych]:pt,[E.PL.DenseList]:pt,[E.PL.WebContent]:vt,[E.PL.ExternalLink]:vt,[E.PL.TabbedInfopane]:Ht,[E.PL.TabbedInfopaneTab]:Gt,[E.PL.BackFillContent]:ut,[E.PL.StockQuote]:Ut,[E.PL.StockQuote_spotlight]:Ut,[E.PL.MyBriefRiverCard]:xt,[E.PL.TopStories]:xt,[E.PL.NewsGroups]:xt,[E.PL.WorkHeadlines]:xt,[E.PL.LocalNews]:xt,[E.PL.LocalNewsFeed]:xt,[E.PL.SageGroupedFeed]:xt,[E.PL.NewsAnswerModule]:xt,[E.PL.LinkedInCard]:Pt,[E.PL.WeatherSummary]:qt,[E.PL.AiCharacterCard]:ot,[E.PL.WeatherSummary_spotlight]:qt,[E.PL.GroupedContent]:ht,[E.PL.UserInterestNTPProvider]:ht,[E.PL.UserInterestTopic]:ht,[E.PL.TopicSuggestionforConsumptionPage]:ht,[E.PL.ProviderSuggestionForConsumptionPage]:ht,[E.PL.UserInterestTopicAndProvider]:St,[E.PL.RecommendedSearchesCard]:Mt,[E.PL.ShoppingMerchantCategoryDeals]:At,[E.PL.ShoppingProngCardResponse]:At,[E.PL.ShoppingProngTracking]:At,[E.PL.EventSDCardShopping]:At,[E.PL.CashbackAds]:At,[E.PL.Promotion]:At,[E.PL.VideoShoppingCard]:At,[E.PL.ShoppingFeedCard]:Wt,[E.PL.TravelDestinationCard]:_t,[E.PL.TravelArticleCard]:Vt,[E.PL.SportsMatch]:Bt,[E.PL.SportsOlympics]:Ot,[E.PL.EventSDCardSportsMIT1]:Bt,[E.PL.EventSDCardSportsMIT2]:Bt,[E.PL.EventSDCardSportsMIT3]:Bt,[E.PL.EventSDCardWorldCup]:zt,[E.PL.EventSDCardWorldCup2]:zt,[E.PL.TrafficDelays]:$t,[E.PL.TrafficInfo]:$t,[E.PL.Transit]:$t,[E.PL.EsportsCasualGames]:ft,[E.PL.EsportsLiveStream]:mt,[E.PL.EsportsHighlight]:mt,[E.PL.ComboCard]:lt,[E.PL.Elections]:Ft,[E.PL.LocalGuide]:wt,[E.PL.RecommendedInterests]:Xt,[E.PL.BingHealthFitnessCard]:yt,[E.PL.HealthTipCard]:kt,[E.PL.HealthRiverCard]:bt,[E.PL.NewsFlipper]:Lt,[E.PL.ColdStartArticleFreCard]:jt,[E.PL.NewsPromotionCard]:Jt,[E.PL.TopicFeedWeekends]:Nt,[E.PL.TopicFeedMomentInTime1]:Nt,[E.PL.TopicFeedShopping]:Nt,[E.PL.TopicFeedWeather]:Nt,[E.PL.RewardsDailySet]:Dt,[E.PL.EventSDCardAmplifyAds]:dt,[E.PL.BoostAd]:dt,[E.PL.WindowsShellTrendingTopics]:Zt,[E.PL.PrayerTimesCard]:It,[E.PL.TopicFeed]:Kt,[E.PL.UserInterestProvider]:Et,[E.PL.WindowsShellMorningDigest]:Qt,[E.PL.DonationNpoCard]:gt,[E.PL.CommunityCard]:ct};const er={[E.PL.WeatherSummary]:{key:()=>x.x.weatherInfoCard,space:Ga.BlankSDCards},[E.PL.StockQuote]:{key:()=>x.x.moneyInfoCard,space:Ga.BlankSDCards},[E.PL.SportsMatch]:{key:()=>x.x.sportsMatchupCard,space:Ga.BlankSDCards},[E.PL.TrafficDelays]:{key:()=>x.x.trafficCard,space:Ga.BlankSDCards},[E.PL.TrafficInfo]:{key:()=>x.x.trafficCard,space:Ga.BlankSDCards},[E.PL.Transit]:{key:()=>x.x.trafficCard,space:Ga.BlankSDCards},[E.PL.TravelDestinationCard]:{key:()=>x.x.travelInspirationCard,space:Ga.BlankSDCards},[E.PL.EsportsCasualGames]:{key:()=>x.x.esportsCasualGamesCard,space:Ga.BlankSDCards},[E.PL.Promotion]:{key:()=>x.x.shoppingCarousel,space:Ga.BlankSDCards},[E.PL.BoostAd]:{key:()=>x.x.boostAd,space:Ga.BlankSDCards},[E.PL.CommunityCard]:{key:()=>x.x.communityInfoCard,space:Ga.BlankSDCards},[E.PL.Infopane]:{key:()=>x.x.windowsShellInfopane,space:Ga.BlankViewCards},[E.PL.HealthTipCard]:{key:()=>x.x.healthTipReact,space:Ga.BlankSDCards},[E.PL.Article]:{key:(e,a)=>e.id?`cp_${e.id}`:"",shouldTrack:e=>{const a=(0,$.Ae)(e)||(0,$.UN)(e);return!!(a&&a.height>=H.B._300x225.height&&a.width>=H.B._300x225.width)},space:Ga.BlankViewCards},[E.PL.Slideshow]:{key:(e,a)=>e.id?`cp_${e.id}`:"",shouldTrack:e=>{const a=(0,$.Ae)(e)||(0,$.UN)(e);return!!(a&&a.height>=H.B._300x225.height&&a.width>=H.B._300x225.width)},space:Ga.BlankViewCards},[E.PL.Video]:{key:(e,a)=>e.id?`cp_${e.id}`:"",shouldTrack:e=>{const a=(0,$.Ae)(e)||(0,$.UN)(e);return!!(a&&a.height>=H.B._300x225.height&&a.width>=H.B._300x225.width)},space:Ga.BlankViewCards},[E.PL.NewsGroups]:{key:()=>x.x.myBriefRiverCard,space:Ga.BlankViewCards},[E.PL.TopStories]:{key:()=>x.x.myBriefRiverCard,space:Ga.BlankViewCards},[E.PL.SageGroupedFeed]:{key:()=>x.x.myBriefRiverCard,space:Ga.BlankViewCards}},ar=Object.keys(Yt).map((e=>({metadataType:e,key:(a,t)=>Yt[e],space:Ga.BlankUncategorizedCard}))).reduce(((e,a)=>{let{metadataType:t,key:r,space:i}=a;return e[t]={key:r,space:i},e}),{}),tr=Object.assign({},ar,er);let rr=0,ir=performance.now(),nr=!1;const sr=e=>e&&_a(Ha.BlankDetect).mark(e,!0),or=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;const a=_a(Ha.BlankDetect);if((0,N.cd)(sr),a.clearSpace(Ga.BlankAdCards),a.clearSpace(Ga.BlankViewCards),a.clearSpace(Ga.BlankSDCards),a.clearSpace(Ga.BlankUncategorizedCard),(0,N.mb)(sr),a.setCallback(Ga.BlankAdCards,void 0,(e=>{const a=e.toString();Y.M0.addOrUpdateTmplProperty("BlankAdCards",a),Y.M0.sendAppErrorEvent({...S.AWv,message:"Ads cards are not correctly rendered.",pb:{...S.AWv.pb,customMessage:`Ads card with key: ${a} are not correctly rendered`}})})),a.setCallback(Ga.BlankViewCards,void 0,(e=>{const a=e.toString();Y.M0.addOrUpdateTmplProperty("BlankViewCards",a),Y.M0.sendAppErrorEvent({...S.XbP,message:"View cards are not correctly rendered.",pb:{...S.XbP.pb,customMessage:`View card with key: ${a} are not correctly rendered.`}})})),a.setCallback(Ga.BlankSDCards,void 0,(e=>{const a=e.toString();Y.M0.addOrUpdateTmplProperty("BlankSDCards",a),Y.M0.sendAppErrorEvent({...S.A4x,message:"SD cards are not correctly rendered.",pb:{...S.A4x.pb,customMessage:`SD card with key: ${a} are not correctly rendered.`}})})),a.setCallback(Ga.BlankUncategorizedCard,void 0,(e=>{const a=e.toString();Y.M0.addOrUpdateTmplProperty("BlankUncategorizedCards",a),Y.M0.sendAppErrorEvent({...S.ddY,message:"Uncategorized cards are not correctly rendered.",pb:{...S.ddY.pb,customMessage:`Uncategorized cards with key: ${a} are not correctly rendered.`}})})),nr)return;nr=!0;const t=()=>{"visible"===document.visibilityState?rr+=Math.round(performance.now()-ir):ir=performance.now()},r=()=>{if(document.removeEventListener("visibilitychange",t),window.removeEventListener("beforeunload",r),"hidden"===document.visibilityState)return;const a=_a(Ha.BlankDetect),i=performance.now();for(const[t,r]of a.entries()){const n=r.timestamp;!n||n+e+rr>i?a.mark(t):a.markFail(t)}};document.addEventListener("visibilitychange",t),window.addEventListener("beforeunload",r)},dr=function(e,a){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((e=>{const r=lr(e,t);if(!r)return;(!r.shouldTrack||r.shouldTrack(e))&&_a(Ha.BlankDetect).track(r.key(e,a),{spaceNames:[r.space],metadataType:e.type,timestamp:performance.now()-rr})}))},lr=function(e){let a,t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(r)a=tr[e.type];else{if(t=g.J[e.type],!t)return void Y.M0.sendAppErrorEvent({...S.M2l,message:"Feed layout card type not found",pb:{...S.M2l.pb,customMessage:`Metadata type ${e.type} is not found in OneServiceMetadataTypeToCardTypeMap keys`}});a=nt[t]??st[t]}if(a)return a;Y.M0.sendAppErrorEvent({...S.L_o,message:"Blank card dependency not found",pb:{...S.L_o.pb,customMessage:`Blank card dependency is not found for card type: ${r?e.type:t}`}})};var cr=t(48),pr=t(79403);const hr=()=>{const e=(0,Sa.Ou)()[N.nz+L.p.complete];(0,pr.hf)(cr.qG.RenderReady,e),(0,pr.hf)(cr.qG.AdRendered,1),(0,pr.hf)(cr.qG.TimeToRenderAd,e)};function Cr(){(0,wa.lr)().then((()=>{const e=(0,Sa.Ou)();(0,N.O_)(cr.qG.TimeToRenderAd,0,e.TTPR),(0,N.O_)(cr.qG.TimeToRequestAd,0,1)}))}const ur=e=>e.type===E.PL.Infopane,gr=e=>e.type===E.PL.TabbedInfopaneCard,fr=e=>e.type===E.PL.ChannelCarousel||e.type===E.PL.ChannelFilterCard;function mr(e,a){const t={c1:{offset:0},c2:{offset:0},c3:{offset:0},c4:{offset:0},c5:{offset:0}},r={0:aa.K$.c1,1:aa.K$.c2,2:aa.K$.c3,3:aa.K$.c4,4:aa.K$.c5},i=e[0];for(let s=1;s<e.length;s++){var n;const o=r[s],d=(null==a||null===(n=a[o])||void 0===n?void 0:n.offset)??0;t[o].offset=e[s]-i+d}return t}var vr=t(9791),yr=t(24077),Sr=t(23197),kr=Object.prototype.hasOwnProperty,br=(0,Sr.Z)((function(e,a,t){kr.call(e,t)?++e[t]:(0,yr.Z)(e,t,1)})),Rr=t(37802),Pr=t(26197),wr=t(27906),Ur=t(96596),xr=t(78058),Tr=t(73344),Lr=t(66857);const Fr="LoadingPlaceholder";const Ir="visibilitychange";function Er(e){const a=window&&window.chrome&&window.chrome.ntpSettingsPrivate;a&&a.logLoadingError&&("visible"===document.visibilityState?Promise.resolve():new Promise((e=>{document.addEventListener(Ir,(()=>{"visible"===document.visibilityState&&e()}))}))).then((()=>{a.logLoadingError(e)}))}var Mr=t(99452),Dr=t(82223),Ar=t(523);let Wr=!1;var Br,Or,zr=t(65518),Nr=t(79973),Hr=t(43194);function Gr(e,a,t){if(e&&a)(0,Nr.lY)().pushHistory(Hr.n8.Personalize,"",{isRequestFromSdCardAddRemoveClick:!0});else if(e){const a=(0,Ca.Eo)(t);(0,Ua.l)().switchPivot({pivotId:e.pivotId,configIndexHref:e.configIndexHref,configIndexRef:a??e.configIndexRef,context:{...e.context,isRequestFromSdCardAddRemoveClick:!0},telemetryPageName:Ur.q.Interests,display:e.displayName})}}!function(e){e.SwitchToPageSettings="SwitchToPageSettings",e.SwitchToNewsSettingsInPersonalizePivot="SwitchToNewsSettingsInPersonalizePivot"}(Br||(Br={})),function(e){e.edgePageSettings="EdgePageSettings",e.chromiumPageSettings="ChromiumPageSettings",e.proActiveCanvasSettingHandler="ProActiveCanvasHandler",e.localStorageSettings="LocalStorageSettings"}(Or||(Or={}));const $r=e=>Object.entries(e),Vr={river:"riverTelemetry",rightrail:"rightrailTelemetry",Rail:"RailTelemetry",overlay:"overlayTelemetry",banner:"bannerTelemetry",backup:"backupTelemetry",coachmark:"coachmarkTelemetry",header:"headerTelemetry",notification:"notificationTelemetry"},_r={[v.Kx.C1]:2,[v.Kx.C2]:3,[v.Kx.C3]:5,[v.Kx.C4]:6,[v.Kx.C5]:8,[v.Kx.C6]:0},qr={[v.Kx.C1]:1,[v.Kx.C2]:2,[v.Kx.C3]:3,[v.Kx.C4]:4,[v.Kx.C5]:5,[v.Kx.C6]:6},jr=304,Kr={river:{name:"River",headline:"RiverSection"},rightrail:{name:"RightRailCards",headline:"RightRailSection"},Rail:{name:"RailCards",headline:"RailSection"},overlay:{name:"Overlay",headline:"OverlaySection"},banner:{name:"Banner",headline:"BannerSection"},backup:{name:"BackupCards",headline:"BackupSection"},coachmark:{name:"Coachmark",headline:"CoachmarkSection"},header:{name:"Header",headline:"HeaderSection"},notification:{name:"Notification",headline:"NotificationSection"}};let Qr;const Jr=e=>new Promise((a=>setTimeout(a,e))),Xr=e=>(0,oa.N)()?(Qr||(Qr=Promise.all([(0,N.b1)(),(0,wa.lr)().then((()=>Promise.race([(0,N.e3)(),Jr(1e4)])))]),e&&(Qr=Qr.then((()=>Jr(e))))),Qr):new Promise((()=>{}));var Zr;!function(e){e.Edit="edit",e.Hide="hide",e.More="more",e.DataProvider="dataProvider",e.PinCard="pinCard",e.UnpinCard="unpinCard",e.RemoveWidget="removeWidget",e.Medium="medium",e.Small="small",e.Large="large",e.AdChoice="adChoice"}(Zr||(Zr={}));class Yr{constructor(e){var a=this;this.options=e,this.showFREConfirmation=!1,this.hasCardsInLastResponse=!1,this.isStopUpdateFeedData=!1,this.requestType=U.V.init,this.hasPaginationTimingUnloadEvent=!1,this.menuItemHandlerMap={[Zr.More]:()=>this.navigateToPersonalizeSetting(),[Zr.AdChoice]:function(e){let{menuItem:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.clickAction(),a.dismissSDCardMenu()},[Zr.Hide]:function(e){let{feedLayoutCardType:t,menuItem:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t===f.U.boostAdCard&&(r.clickAction(),a.dismissSDCardMenu())}},this.emptyFeedCallbackList=new Array,this.adsServingDeferredMetadata={},this.renderedWaterfallElements=[],this.pendingFeedLayoutRenderHandlers={},this.pendingWaterfallRenderHandlers={},this.disConnected=!1,this.infopaneInSecondSection=!1,this.hasFullWidthFreFirstSection=!1,this.ttvrRows=2,this.ttvrHeight=608,this.sectionIdx=1,this.riverSectionIndex=1,this.disableActionMenuOnAds=!1,this.feedElementKeyMap=new Map([[x.x.gridViewFeed,Pr._.gridViewFeed],[x.x.waterfallViewFeed,Pr._.waterfallViewFeed]]),this.riverCardCount=0,this.enableRotateOnlyOnce=!1,this.channelFilterFlightMismatch=!1,this.paginationFeedResponseQueue=new Array,this.paginationTimings=[],this.isWaterfallFeedResizing=!1,this.cardsToRenderFromSection=3,this.adsMinIndex=[],this.sectionTrackerEnabled=!1,this.renderNextFeedLayout=e=>{this.consumeUnrenderedFeedLayout(),this.feedEventAggregator.publish(u.OnFeedRendered,{isFirstRender:e??this.isFirstRender})},this.handleFeedResponse=async e=>{var a;this.isStatic=null==e?void 0:e.isStatic,this.requestType=U.V.subsequent,this.config.auctionBeforeDataProcess&&this.feedEventAggregator.publish(u.OnFeedResponseRetrieved,{response:e}),this.config.enableGreyBlock&&(this.hasCardsInLastResponse=this.responseContainsCardsData(e)),this.config.isWaterfallFeed&&this.isStatic&&Y.M0.sendAppErrorEvent({...S.p0I,message:"Obtain a static fallback from WPO on waterfall feed",pb:{...S.p0I.pb,customMessage:`layout: ${this.layout}`}});const{enableFilterResponse:t,riverSectionCardProviderConfig:r}=this.config;if((0,oa.N)()&&e&&"following"===(null==r||null===(a=r.initialRequest)||void 0===a?void 0:a.feedName)){var i;const a=null===(i=this.followingExperienceManager)||void 0===i?void 0:i.transformResponse(e,t);if(!t&&a){this.channelFilterFlightMismatch=!0;const{traceIdIndex:a,debugId:t}=e;Y.M0.sendAppErrorEvent({...S.M6G,pb:{...S.M6G.pb,customMessage:"Removed channel carousel due to flight mismatch between service and client",isPrerender:null===ee.Al||void 0===ee.Al?void 0:ee.Al.IsPrerender,debugId:t,traceIdIndex:a}})}}if(e){var n;const{traceIdIndex:a,debugId:t}=e,r=(e,r)=>{var i,n;this.infopaneInSecondSection&&"river"===e&&r&&r.length&&r[0]&&(this.hasFullWidthFreFirstSection=(null===(n=r[0].cards)||void 0===n?void 0:n.findIndex((e=>e.type===E.PL.UserInterestTopicAndProvider)))>-1);for(const i of r){const n=this.getLayoutTemplate(i.layoutTemplate)??null;if(n&&this.cardExtTelemetryHelper.addExtPropertiesToCards(i.cards,n,e,a,t),!i.layoutTemplate){const e=Object.getOwnPropertyNames(i),a=r.indexOf(i);let t=0,n="";if(i.cards&&i.cards.length>0){t=i.cards.length;for(const e of i.cards)e.type&&(""!=n&&(n+=","),n+=e.type)}Y.M0.sendAppErrorEvent({...S.Uq0,message:"layoutTemplate Undefined.",pb:{...S.Uq0.pb,sectionProperties:e,sectionIndex:a,cardCount:t,cardTypes:n}})}}const s=null===(i=this.unrenderedRegionsData.find((a=>a.region===e)))||void 0===i?void 0:i.sections;s?s.push(...r):this.unrenderedRegionsData.push({region:e,sections:r}),this.sdCardHelper.addSDCard(r),this.config.proactiveRenderingWhenIdle&&Xr(this.config.proactiveRenderDelay).then(this.proactivelyRenderRiverWhenIdle)};var s;if(e.sections)null===(s=e.sections)||void 0===s||s.forEach((e=>{if("river"===e.region&&this.config.isWaterfallFeed){let a=e.subSections;e.requestedColumnCount!==qr[this.layout]&&(a=this.convertWaterfallFallback(a,qr[this.layout],null==e?void 0:e.requestedColumnCount)),this.ingestUnrenderedWaterfallSection(e.region,[a])}else r(e.region,e.subSections)}));else if(e.regions){var o;null===(o=e.regions)||void 0===o||o.forEach((e=>{if("river"===e.region&&this.config.isWaterfallFeed){let a=e.waterfallSections;const t=e.sections;(null==e?void 0:e.requestedColumnCount)!==qr[this.layout]&&(a=[this.convertWaterfallFallback(t,qr[this.layout],null==e?void 0:e.requestedColumnCount)]),this.ingestUnrenderedWaterfallSection(e.region,a)}else r(e.region,e.sections)}))}this.userContext=(null===(n=e.metadata)||void 0===n?void 0:n.userContext)||{}}return this.config.auctionBeforeDataProcess||this.feedEventAggregator.publish(u.OnFeedResponseRetrieved,{response:e}),!!e},this.updateFeedData=async e=>{if(this.isFetching||this.isStopUpdateFeedData)return!1;if(this.config.disableInfiniteScroll&&this.requestType===U.V.subsequent)return!1;const a=Math.round(performance.now());if(e&&this.requestType===U.V.subsequent){const t=await this.getPrecachedPaginationResponse(e);if(t)return this.trackPaginationTimings(a,!0),this.handleFeedResponse(t)}const t=await this.fetchFeed();if(this.config.isWaterfallFeed){var r,i;if(null==t||null===(r=t.regions)||void 0===r?void 0:r.some((e=>!(!this.isWaterfallFeedResizing||"river"!==e.region||e.requestedColumnCount===qr[this.layout]))))return this.waterfallFeedResizeTimer&&(window.clearTimeout(this.waterfallFeedResizeTimer),this.waterfallFeedResizeTimer=void 0),this.waterfallFeedResizeTimer=window.setTimeout((()=>this.refreshWaterfallFeedCallback()),10),this.isWaterfallFeedResizing=!1,!1;const e=null==t||null===(i=t.regions)||void 0===i?void 0:i.find((e=>"river"===e.region));e&&(e.waterfallSections=this.divideWaterfallResponse(e.sections,qr[this.layout]))}return this.trackPaginationTimings(a),this.handleFeedResponse(t)},this.callRefreshRegionsData=async function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(a.isStopUpdateFeedData=!1),a.feedEventAggregator.publish(u.OnStartFeedRefresh,e??{}),P.DD.clearPublisherFollowStatus(),a.resetParameters(e),await a.renderRegionsData(),a.feedEventAggregator.publish(u.OnFeedRefreshed,e??{}),window.dispatchEvent(new CustomEvent("refreshChannelFilter")),a.config.isWaterfallFeed&&a.isWaterfallFeedResizing&&(a.isWaterfallFeedResizing=a.isFetching)},this.updateCacheAndRefreshRegionsData=async()=>{await(0,be.T1)(),await this.callRefreshRegionsData()},this.isSkypeInChannelMode=()=>"true"===ca.c.getQueryParameterByName("channels_available",window.location.href),this.loadLazyDataMappings=e=>{this.river&&this.river[0]&&this.river[0].feedData&&!this.config.isWaterfallFeed&&this.loadLazyDataMappingsImpl(e,this.river)},this.loadLazyDataMappingsImpl=function(e){const a=new Map;return function(){let t=a.get(arguments.length);t||(t=arguments.length?new Map:e(...arguments),a.set(arguments.length,t));for(let a=0;a<arguments.length;a++){const r=a<0||arguments.length<=a?void 0:arguments[a];if(t.has(r))t=t.get(r);else{const i=a===arguments.length-1?e(...arguments):new Map;t.set(r,i),t=i}}return t}}(((e,a)=>{a.forEach((a=>{const t=a.feedData;this.loadLazyDataMappingForSection(t[e])}))})),this.loadLazyDataMappingForSection=(0,vr.Z)((e=>{e.forEach(((a,t)=>{(0,B.G)(a)||(e[t]=a.mapRawData())}))})),this.shouldServeAdsWhenSectionInView=e=>this.config.onlyServeAdsWhenSectionInView&&!e&&(0,oa.N)(),this.updateCardAction=(e,a,t,r,i)=>{const n={succeed:!1};if(this.feedEventAggregator.publish(u.OnStartCardActionUpdate,{cardId:e,nextCardStatus:a,postCardActionPromise:t,targetId:r,resFromFeedEvent:n}),n.succeed)return;["river","rightrail"].forEach((n=>this.updateCardActionInRegion(n,e,a,t,r,i)))},this.updateCardActionInRegion=(e,a,t,r,i,n)=>{var s,o,d;let l=0;const c=(null===(s=this.config)||void 0===s?void 0:s.enableInstantHide)&&!n&&t&w.O7.hidden&&!(t&w.O7.mute)&&!(t&w.O7.hideTopic),p=(null===(o=this.config)||void 0===o?void 0:o.enableInstantHide)&&t&w.O7.mute&&i,h=(null===(d=this.config)||void 0===d?void 0:d.enableInstantHide)&&t&w.O7.hideTopic&&i,C=p||h,u=h?Ta:La,g=e=>{C&&u(e,i)&&l++},f=(0,Be.so)(t),m=this[e].map(((t,i)=>{if(!t.cardMetadataList)return t;let n=!1;const s=Aa(t.cardMetadataList,((t,s,o)=>{if(t.type===E.PL.TopStories&&t.subCards)return t.subCards.forEach((e=>{e.id===a&&(e.actions=f,n=!0),g(e)})),t;c&&t.id===a&&this.updateCardWithCardId(e,i,a,r,(()=>{if(void 0!==o){var a,t,r;const n=null===(a=this[e][i])||void 0===a||null===(t=a.cardMetadataList)||void 0===t?void 0:t[s];return Da(null==n||null===(r=n.subItems)||void 0===r?void 0:r[o])}{var n,d;const a=null===(n=this[e][i])||void 0===n||null===(d=n.cardMetadataList)||void 0===d?void 0:d[s];return Da(a)}})),g(t);const d=(p=a,h=f,(l=t).id===p&&(l.metadata=l.metadata||(l.subItems?{}:{...l}),l.metadata.actions=h,!0));var l,p,h;return n=n||d,t}));if(n){if(this.config.isWaterfallFeed){const r=this.mapWaterfallFeedData(s,{region:e,parentTelemetryObject:this[Vr[e]]}),i=r.defaultLayout.find((e=>"infopane-card"===e.childTemplateType));return this.replaceCardInWaterfallFeed(((e,t)=>{if(e&&e.id===a){const e=(t?i.slideContentData:r.defaultLayout.slice(1)).find((e=>e.id===a));return e}return e})),{...t,updatedFeedData:r,cardMetadataList:s}}return{...t,feedData:this.mapFeedData(s,{layoutTemplateName:t.templateId,region:e,parentTelemetryObject:this[Vr[e]]}),cardMetadataList:s}}return t}));if(C){const{sections:t}=this.unrenderedRegionsData.find((a=>{let{region:t}=a;return t===e}))||{};t&&t.forEach((e=>{let{cards:a}=e;a.forEach((e=>g(e)))})),l&&this.updateReplacedCards(e,l,a,i,r,u)}this[e]=m},this.updateCardWithCardId=(e,a,t,r,i)=>{r.then((async()=>{const[r]=await Promise.all([this.getContentForCardReplacements(1),new Promise((e=>{this.instantReplaceIdMap[t]=setTimeout(e,4e3)}))]);if(this.config.isWaterfallFeed)return void this.removeCardInWaterfallFeed((e=>e&&e.id!==t));if((0,ha.x)(r)||!i())return;const n=this[e][a].cardMetadataList||[],s=Aa(n,(e=>{if(e.id===t){const a=r[0];return"nativead"===e.type&&"article"===a.type||(Fa(e)||Ia(a),Ea(e)||Ma(a)),a}return e}));this.updateFeedSectionBySectionIndex(e,s,a)}))},this.updateReplacedCards=(e,a,t,r,i,n)=>{i.then((async()=>{const[i]=await Promise.all([this.getContentForCardReplacements(a),new Promise((e=>{this.instantReplaceIdMap[t]=setTimeout(e,4e3)}))]);if(this.config.isWaterfallFeed)return void this.removeCardInWaterfallFeed((e=>e&&e.id!==t&&(!e.providerData||e.providerData.id!==r)));if((0,ha.x)(i))return;let s=!0,o=0;const d=this[e].map((e=>{if(!e.cardMetadataList)return null;let a=!1;const d=Aa(e.cardMetadataList,(e=>{if(e.type===E.PL.TopStories){var d;return{...e,subCards:null===(d=e.subCards)||void 0===d?void 0:d.map((e=>{if(n(e,r)&&i.length>o){a=!0;const t=i[o++];return Fa(e)||Ia(t),Ea(e)||Ma(t),{...t.cardContent,...t.metadata,type:t.type}}return e}))}}if(e.id!==t||Da(e)||(s=!1),s&&n(e,r)&&i.length>o){a=!0;const t=i[o++];return Fa(e)||Ia(t),Ea(e)||Ma(t),t}return e}));return a?d:null}));if(s){d.forEach(((a,t)=>{a&&a.every((e=>e))&&this.updateFeedSectionBySectionIndex(e,a,t)}));const{sections:a}=this.unrenderedRegionsData.find((a=>{let{region:t}=a;return t===e}))||{};a&&a.forEach((e=>{e.cards=Aa(e.cards,(e=>{if(n(e,r)&&i.length>o){const a=i[o++];return Fa(e)||Ia(a),Ea(e)||Ma(a),a}return e}))}))}}))},this.updateFeedSectionBySectionIndex=(e,a,t)=>{const r=br(a,"id"),i=a.some((e=>e.id&&r[e.id]>1));this[e]=this[e].map(((r,n)=>t!==n||i?r:{...r,feedData:this.mapFeedData(a,{layoutTemplateName:r.templateId,region:e,parentTelemetryObject:this[Vr[e]],prevCardCount:r.prevCardCount}),cardMetadataList:a}))},this.replaceCardInWaterfallFeed=e=>{this.updateCardInWaterfall(((a,t)=>a.map((a=>e(a,t)))))},this.removeCardInWaterfallFeed=e=>{var a;const t=this.waterfall.columns.map((e=>e.length));let r;this.updateCardInWaterfall(((a,t)=>a.filter((a=>(r=a,e(a)))))),this.adsMinIndex=[];const i={0:aa.K$.c1,1:aa.K$.c2,2:aa.K$.c3,3:aa.K$.c4,4:aa.K$.c5},n=r.height||this.config.baseCardSize||jr,s=null===(a=this.river[this.riverSectionIndex-1])||void 0===a?void 0:a.waterfallFeedColumnsOffset;this.waterfall.columns.forEach(((e,a)=>{e.length<t[a]&&s&&(0===a?this.waterfall.columns.slice(1).forEach(((e,a)=>{s&&(s[i[a+1]].offset+=n)})):s[i[a]].offset-=n)})),this.river[this.riverSectionIndex-1].waterfallFeedColumnsOffset=s,this.river=[...this.river]},this.updateCardInWaterfall=e=>{var a;let t;if(null!==(a=this.waterfall.wideColumn)&&void 0!==a&&a.mainCard){t={...this.waterfall.wideColumn.mainCard};const a=e(t.slideContentData,!0);t.slideContentData=a}const r=[];this.waterfall.columns.forEach((a=>{const t=a.findIndex((e=>e.slideContentData&&e.slideContentData.length>0));if(t>=0){const r={...a[t]},i=e(r.slideContentData,!0);r.slideContentData=i,a[t]=r}const i=e(a,!1);r.push(i)})),this.waterfall={...this.waterfall,columns:r,wideColumn:this.waterfall.wideColumn?{mainCard:t,size:"C1"===this.layout?1:2}:void 0}},this.reactionCallback=async()=>{this.config.invalidatePrerenderRiverOnActions&&(0,F.ih)(x.x.gridViewFeed)},this.getReplacementCardsCallback=async function(e,t,r){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:15,d=await a.getContentForCardReplacements(o,!n&&!s,r,void 0,void 0,n,s);if(a.retryTimer&&(window.clearTimeout(a.retryTimer),a.retryTimer=void 0),(0,ha.x)(d)||a.lastFreTimestamp&&a.currentFreTimestamp&&a.currentFreTimestamp<=a.lastFreTimestamp){if(i)return void(a.retryTimer=window.setTimeout((()=>a.getReplacementCardsCallback(e,t,r,!1,n,s,o)),2e3));a.lastFreTimestamp=Date.now(),d=[]}if(a.lastFreTimestamp=a.currentFreTimestamp,d=d.filter((e=>!(t&&t.some((a=>a===e.id))))),r&&e&&e.cardContent&&e.metadata&&((0,ha.x)(e.cardContent.badges)?e.cardContent.badges=[{type:"explicitLike"}]:e.cardContent.badges.unshift({type:"explicitLike"}),d.unshift(e)),(0,ha.x)(d))return;d=d.filter(((e,a,t)=>a===t.findIndex((a=>e.id===a.id))));const l=Array.prototype.concat(...a.river.map((e=>e.cardMetadataList)));d=d.filter((e=>!l.find((a=>{var t;return"infopane"===a.type?null===(t=a.subItems)||void 0===t?void 0:t.find((a=>a.id===e.id)):a.id===e.id}))));let c=0,p=0,h=0;if(void 0!==n||void 0!==s){const e=a.feedElementKeyMap.get(a.experienceId),t=a.getLayoutTemplateMap();if(void 0!==t){const{lastSectionIndex:r,lastRowIndex:i}=za(e,t,a.layout,a.river,12,0);p=r,h=i+1}}if(a.river.forEach(((e,t)=>{if(!e.cardMetadataList||t<p)return null;const r=void 0!==e.templateId?a.getLayoutTemplate(e.templateId)??null:null,{cardSlots:i}=t===p&&h>0&&r?r:{cardSlots:[]};let n=!1;const s=Aa(e.cardMetadataList,((e,r,s)=>{if(t===p&&h>0){const t=i[r],n=t.telemetryRowCol&&t.telemetryRowCol[a.layout];if((n&&n.length?n[0]-1:0)<h)return e}if(void 0===s&&e.cardContent&&e.cardContent.provider&&d&&d.length>c){n=!0;const a=d[c++];return Fa(e)||Ia(a),Ea(e)||Ma(a),a}return e}));n&&a.updateFeedSectionBySectionIndex("river",s,t)})),(void 0!==n||void 0!==s)&&d&&d.length>c){const e=d.slice(c);for(let t=0;t+5<=e.length;t+=5){const r=e.slice(t,t+5),i={feedData:a.mapFeedData(r,{layoutTemplateName:"msft-five-card-five-col",region:"river",parentTelemetryObject:a[Vr.river],prevCardCount:a.riverCardCount}),templateId:"msft-five-card-five-col",cardMetadataList:r,hasPlaceHolderAds:!1,prevCardCount:a.riverCardCount};a.riverCardCount+=r.length,a.river=[...a.river,i]}}},this.toggleSDCardMenu=e=>{this.sdCardMenuProps=e,this.sdCardMenuOpen=!this.sdCardMenuOpen,"function"==typeof(null==e?void 0:e.onSdCardMenuOpenChanged)&&(null==e||e.onSdCardMenuOpenChanged(this.sdCardMenuOpen))},this.dismissSDCardMenu=()=>{this.sdCardMenuOpen=!1},this.navigateToPersonalizeSetting=()=>{var e;if(!this.config.openPersonalizeWithoutRouter)return zr.Nd.navigate("experience-settings");if(this.config.openPersonalizeDirectly){const e=new URL(wr.OZ.replace(wr.ej,fe.jG.CurrentMarket),wr.VK),a=(0,xa.ku)();return a&&e.searchParams.set("ocid",a),void window.open(e.href,"_blank")}const a=this.config.oneRiverInterestsPivotInfo,t=this.config.pivotsNavInstanceId;if(a)if(null!==(e=a.context)&&void 0!==e&&e.navigateToPersonalize){var r;const e="myInterests_experienceSettings",t=null===(r=a.children)||void 0===r?void 0:r.find((a=>a.pivotId===e));t&&Gr(t,!1,this.config.interestsWCConfigRefType)}else if(t){const e=(0,Ua.l)(t),r=(0,Ca.Eo)(this.config.interestsWCConfigRefType),i=r&&"oneriver.editinterests"==a.pivotId?r:a.configIndexRef;e.switchPivot({pivotId:a.pivotId,configIndexHref:a.configIndexHref,configIndexRef:i,context:{isRequestFromSdCardAddRemoveClick:!0},telemetryPageName:"Xfeed",display:a.displayName})}else Gr(a,!1,this.config.interestsWCConfigRefType)},this.navigateToPersonalizeCallback=e=>{var a;const{interestsWCConfigRefType:t,openPersonalizeWithoutRouter:r,oneRiverInterestsPivotInfo:i,openPersonalizeDirectly:n,useChannelStore:s}=this.config;if(s)return void window.dispatchEvent(new CustomEvent("launchChannelStore"));if(n){const a=new URL(wr.OZ.replace(wr.ej,fe.jG.CurrentMarket)+(e?`#${e}`:""),wr.VK),t=(0,xa.ku)();return t&&a.searchParams.set("ocid",t),void window.open(a.href,"_blank")}if(!r&&zr.Nd.getRouteById("personalize"))return void zr.Nd.navigate("personalize",{scrollToSection:e});if("windows"===fe.jG.AppType){return void(0,Ua.l)().switchPivot({pivotId:"myInterests",context:{hash:e}})}if(!i)return;const o=(0,Ua.l)(this.config.pivotsNavInstanceId);let d={};"muted-publishers"===e?d={isRequestFromMutePublisherToast:!0,noScroll:!0}:"followed-interests"===e?d={scrollToFollowedInterests:!0,noScroll:!0}:null!==(a=i.context)&&void 0!==a&&a.navigateToPersonalize&&(d=i.context);const l=(0,Ca.Eo)(t);o.switchPivot({pivotId:i.pivotId,configIndexHref:i.configIndexHref,configIndexRef:l??i.configIndexRef,context:{...d,isRequestFromSdCardAddRemoveClick:!1},telemetryPageName:Ur.q.Interests,display:i.displayName})},this.mapFeedData=(e,a)=>{const{region:t,layoutTemplateName:r,parentTelemetryObject:i,colOverride:n,visualReadinessCallback:s,refreshFeedCallback:o,isPinnedRegion:d,isInitiatedByPinAction:l,isRefresh:c,isSpotlightZone:p,prevCardCount:h,isCalledForSpotlightAction:C,hasRRFeedCard:m,overrideColumnLayout:v}=a,y={defaultLayout:[],C6:[],C5:[],C4:[],C3:[],C2:[],C1:[]},b=void 0!==r?this.getLayoutTemplate(r):null;if(!b)return"overlay"===t||this.config.isWaterfallFeed||Y.M0.sendAppErrorEvent({...S.Fid,message:"Invalid layout template used.",pb:{...S.Fid.pb,customMessage:`layoutTemplateName: ${r}`}}),y;var R;b.cardCount&&e&&b.cardCount!==e.length&&Y.M0.sendAppErrorEvent({...S.sJW,message:"1s and layout template card count mismatch",pb:{...S.sJW.pb,cardCount1S:e.length,cardCountLayoutTemplate:b.cardCount,debugId:null===(R=e[0])||void 0===R?void 0:R.debugId,layoutTemplate:r}});if(!this.config.enableFeed3Cards&&void 0!==r&&Oe.re.includes(r)&&Y.M0.sendAppErrorEvent({...S.My6,message:"Waterfall flights mismatch between WPO and client",pb:{...S.My6.pb,customMessage:`layoutTemplateName: ${r}`}}),e.forEach(((R,w)=>{var U,x,T,L;let F=this.config.useCaseInsensCardTypeMap?(0,g.Q)().get(R.type):g.J[R.type];if(!F)return void Y.M0.sendAppErrorEvent({...S.Dt$,message:"Card type not found",pb:{...S.Dt$.pb,cardMetadataType:R.type,feedLayoutCardType:F,experience:this.experienceId,debugId:R.debugId,region:t}});const I=Object.assign({},this.config,null===(U=this.config)||void 0===U?void 0:U[t]),{rowHeightPx:M,colWidthPx:D,gutterPx:A,cardSlots:W}=b,O=W[w],z=F===f.U.contentCard&&R.type===E.PL.Video||F===f.U.videoCard;R.isFirstSectionCard&&z&&Y.M0.addOrUpdateTmplProperty("wtchVideoRendered","1"),F===f.U.serendipityCard&&(F=f.U.trendingNowCard),"super-app-list"!==r&&"msn-mobile-list"!==r||(F=f.U.superListCard),F===f.U.localNewsCarCard&&null!==(x=this.config.childExperienceReferencesWC)&&void 0!==x&&x.tabbedFeedWC&&this.config.useTabbedFeed4LocalNews&&R.feed&&"localnews"==R.feed.sourceFeedType&&(F=f.U.tabbedFeedCard),"content-group-map"!==r&&"content-dense-group-map"!==r||(F=f.U.contentGroup),("super-app-three-cards"===r||"super-app-full-wide-carousel"===r&&this.config.isMsnMobile&&this.config.enableSuperInfopane)&&F===f.U.infopaneCard&&(F=f.U.contentGroup),F===f.U.topStoriesCard&&"winWidgets"===fe.jG.AppType&&(F=f.U.digestCard,R.feed=R.feed||{canonicalName:"topstories"}),void 0===r||!I.enableFeed3Cards&&!Oe.re.includes(r)||"default"!==this.feedName||z||(F=(0,Oe.GO)(r,F,I.enableResponsiveFeed)),I.enableFeed3Cards&&!z&&(F=(0,Oe.uP)(F)),this.feedEventAggregator.publish(u.OnStartCardArgsCreate,{feedLayoutCardType:F,cardMetadata:R,cardSlot:O,config:I});const N=a.rowCount??e[0].rowCount;let H;this.config.enableLazyDataMapping&&(H=v?v(R):this.layout);const G={feedName:this.feedName,cardMetadata:R,cardSlot:O,layoutTemplateName:r,parentTelemetryObject:i,disableActionMenuOnAds:this.disableActionMenuOnAds,enableRotateOnlyOnce:this.enableRotateOnlyOnce,openLinksInNewTab:I.openLinksInNewTab??!0,cardActionBitMask:I.cardActionBitMask??7,isAnaheimDesign:I.isAnaheimDesign??!0,goToPersonalizeCallback:this.navigateToPersonalizeCallback,goToPersonalizeSettingsCallback:this.navigateToPersonalizeSetting,initCardAction:this.initCardAction,cardActionDismissCallback:(0,ze.W)(R,F)?this.cardActionDismissCallback:void 0,cardActionClickHandler:this.cardActionClickHandler,shareActionHandler:this.shareActionHandler,getReplacementCardsCallback:this.getReplacementCardsCallback,reactionCallback:this.reactionCallback,visualReadinessCallback:s??this.getVisualReadinessCallback(F,R,t),localizedStrings:I.localizedStrings,configOptions:I,stockImageData:I.stockImageData,enableRichSocialReaction:this.feedSource!==k&&I.enableRichSocialReactions,isAdFeedbackV1Enabled:Boolean(I.adFeedbackV1Enabled),enableNativeAdHoverContrast:Boolean(I.enableNativeAdHoverContrast),enableHotListInDigestCard:Boolean(I.enableHotListInDigestCard),enableTopStoriesInHotListCard:Boolean(I.enableTopStoriesInHotListCard),handleAdFeedbackSubmit:I.useMobile?void 0:(0,P.I3)().ReportAd,useInlineSvgIcons:!0,refreshFeedCallback:o??this.callRefreshRegionsData,refreshSDCardSection:this.updateCacheAndRefreshRegionsData,sdCardActionClickHandler:this.sdCardActionClickHandler,hideCardCallback:this.updateCacheAndRefreshRegionsData,dismissSDCardMenuCallback:this.dismissSDCardMenu,addManageFunctionCallbackForStoryCarousel:this.options&&this.options.addManageFunctionCallbackForStoryCarousel,isClarityEnabled:I.isClarityEnabled,isIASEnabled:I.isIASEnabled,hideStoryEntryPointMap:this.hideStoryEntryPointMap,isBlurred:I.isBlurred,rowCount:N,prevCardCount:h,flattenedRightRail:"rightrail"===t&&(null===(T=I.rightrail)||void 0===T?void 0:T.renderFlattenedDesign),rowHeightPx:M,colWidthPx:D,gutterPx:A,colOverride:n,adTimerInMS:I.adTimerInMS,notificationMetadata:C?R.notificationMetadata:void 0,columnLayout:H,...this.appendixFeedStyleArgs};null===(L=qe[F])||void 0===L||L.call(qe,G,R,I,{cardMetadataList:e,index:w}),this.feedEventAggregator.publish(u.OnCardArgsCreated,{feedLayoutCardType:F,cardMetadata:R,args:G,isPinnedRegion:d,isInitiatedByPinAction:l,isRefresh:c,isSpotlightZone:p,hasRRFeedCard:m});try{let e;var $,V;if(I.useSharedTelemetry&&F in Xe)e=ea(G,F);else e=null===($=this.cardDataMapperMap)||void 0===$||null===(V=$[F])||void 0===V?void 0:V.getFeedDataForCard(G);if(R.type!==E.PL.LocalNewsFeed&&R.type!==E.PL.ChannelFilterCard)if(e){var _,q;const a=null===(_=e.defaultLayout)||void 0===_?void 0:_[0];!(0,B.G)(a)||null!=a&&a.childTemplateType&&null!==(q=this.cardTemplateMap)&&void 0!==q&&q[a.childTemplateType]||Y.M0.sendAppErrorEvent({...S.NXh,message:"Not support card template type",pb:{...S.NXh.pb,cardMetadata:R.type,layoutTemplateName:r,experience:this.experienceId,customMessage:`Error: feed card type ${F} with card type ${null==a?void 0:a.childTemplateType} can not be found in card template map`,debugId:R.debugId}})}else Y.M0.sendAppErrorEvent({...S.NXh,message:"Mapped Feed Data is empty",pb:{...S.NXh.pb,cardMetadata:R.type,layoutTemplateName:r,experience:this.experienceId,customMessage:`Error: feed card type ${F} mapped result is empty`,debugId:R.debugId}});if(e){const a=$r(e);a&&a.forEach((e=>{var a;let[t,r]=e;null===(a=y[t])||void 0===a||a.push(...r??[])}))}}catch(e){Y.M0.sendAppErrorEvent({...S.O6X,message:"Mapped Feed Data not Generated",pb:{...S.O6X.pb,slotIndex:w,cardSlots:W,cardMetadataType:R.type,layoutTemplateName:r,experience:this.experienceId,stack:`${e&&e.stack}`,customMessage:`Error: ${e&&e.message}`,debugId:R.debugId}})}})),this.config.enableLazyDataMapping){const e=this.getSSRColumnLayout(this.config.enableOneColumn);e&&this.layout!==e&&this.loadLazyDataMappingForSection(y[e])}return y},this.sdCardActionClickHandler=(e,a)=>{e.menuItems.forEach((t=>{const r=t.id,i=this.menuItemHandlerMap[r];i&&(t.onClick=r=>i(r,{actionsMenuProps:e,feedLayoutCardType:a,menuItem:t}))})),e.onDismiss=this.dismissSDCardMenu,this.toggleSDCardMenu(e)},this.cardActionClickHandler=(e,a,t,r,i,n,s,o,d,l)=>{((e,a)=>!(e===w.Us.ShowFewer&&a&w.O7.showFewer||e===w.Us.ShowMore&&a&w.O7.showMore||e===w.Us.Hide&&a&w.O7.hide||e===w.Us.HideTopic&&a&w.O7.hideTopic||e===w.Us.Mute&&a&w.O7.mute||e===w.Us.Save&&a&w.O7.saved||e===w.Us.FollowPublisher&&a&w.O7.followedPublisher))(t,a)&&this.instantReplaceIdMap[e]&&(clearTimeout(this.instantReplaceIdMap[e]),delete this.instantReplaceIdMap[e]),this.hideStoryEntryPointMap&&(this.hideStoryEntryPointMap[e]=l),a&w.O7.dismiss&&(this.cardActionDismissCallback=()=>{d&&d(),this.cardActionDismissCallback=void 0});const c=l?{Reason:l}:void 0;let p;p=t!=w.Us.Hide||"like-button"!=l&&"dislike-button"!=l?(0,P.I3)().PostCardActionEvent(a,t,e,void 0,r&&i?i:void 0,n,s,o&&o.target||void 0,void 0,void 0,void 0,c,(()=>{const t=P.DD.getUndoCallbackParams(a,l||"hide-button");this.cardActionClickHandler(e,t.status,t.action,t.sendRequest,void 0,n)})):Promise.resolve(),this.updateCardAction(e,a,p,n,"like-button"===l),t==w.Us.Mute&&(this.config.invalidatePrerenderOnActions?(0,F.yV)(I.y.InterestsChange):this.config.invalidatePrerenderRiverOnActions&&(0,F.ih)(this.experienceId))},this.shareActionHandler=(e,a,t)=>{this.options&&this.options.shareActionHandler&&this.options.shareActionHandler(e,a,t)},this.initCardAction=e=>{const a=(0,Wa.b_)(this.elementKey).cardActionRef;a&&a.updateCardActionProps({...e,context:{pivotId:this.config.pivotsNavInstanceId}})},this.getVisualReadinessCallback=(e,a,t)=>{const r=this.config.enableGlobalMonitor?null:this.ttvrHelper.genTtvrCb(a),i=this.vpReadyHelper&&this.vpReadyHelper.genCheck(e,a);let n="",s=!1,o="";var d,l;this.config.enableGlobalMonitor&&(n=(null===(d=Ya(a))||void 0===d?void 0:d.key(a))||"",s=!(!this.config.enableAdsNewTtvr||a.type!==E.PL.NativeAd&&a.type!==E.PL.CmsAd),o=(null===(l=lr(a))||void 0===l?void 0:l.key(a,t))||"");if(r||i||n||o||s)return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sa.u.ALL,a=arguments.length>1?arguments[1]:void 0;e&sa.u.TTVR&&r&&r(),e&sa.u.VP&&i&&i(a),n&&Xa(n),o&&sr(o),s&&(()=>{var e;if((0,Sa.Ou)()[L.p.isSSRCompleted]&&(null===(e=window.ssrAdData)||void 0===e?void 0:e.length))hr();else if((0,wa.TR)())Cr();else{const e=(0,pr.v0)(ee.Al.IsPrerender);(0,N.O_)(cr.qG.TimeToRenderAd,0,e)}})()}},this.setFallbackFeed=function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!a.isFirstRender)return;if(a.emptyFeedCallbackList.forEach((e=>e())),a.disableDefaultFallback)return;const i=a.config,n={title:i.localizedStrings.emptyFeedMessage,subTitle:void 0,isEmptyRiverError:!0,isEnhancedVerticalsFallbackFeed:i.enableFallbackVerticalsFeed,emptyFallbackFeedCardsMetadata:a.buildFallbackVerticalCardsMetadata(),refreshButton:{title:i.localizedStrings.emptyRiverRefreshButtonText,onClick:()=>a.callRefreshRegionsData(),telemetryObject:new xr.D({name:"RefreshButton",type:Ra.c9.ActionButton,behavior:Ra.wu.Rearrange})}};navigator.onLine||(n.title=i.localizedStrings.offlineFeedMessageHeader,n.subTitle=i.localizedStrings.offlineFeedMessageSubheader);ua()===pa.Disconnected&&a.logAppErrorToEdgeAndCsTelemetry(S.Mcu,"Superfeed fallback rendered with no internet connectivity.",{feedType:a.experienceId,isPrerender:null===ee.Al||void 0===ee.Al?void 0:ee.Al.IsPrerender}),a.fallbackFeed=Object.assign({},n,r),Y.M0.addOrUpdateTmplProperty("feedFallbackEncountered","1"),a.logAppErrorToEdgeAndCsTelemetry(S.CH5,"Superfeed fallback rendered",{customMessage:"Superfeed fallback has been rendered",feedType:a.experienceId,isOnline:navigator.onLine,isPrerender:null===ee.Al||void 0===ee.Al?void 0:ee.Al.IsPrerender});const{enableFilterResponse:s,riverSectionCardProviderConfig:o}=a.config;var d;(0,oa.N)()&&s&&"following"===(null==o||null===(t=o.initialRequest)||void 0===t?void 0:t.feedName)&&(null===(d=a.followingExperienceManager)||void 0===d||d.showFallbackFeed())},this.preloadLikelyExperienceBundles=()=>{var e,a;e=this.config&&this.config.preloadLikelyExperiences,a=()=>!!this.lastResponse,Wr||(Wr=!0,(0,ha.x)(e)||a&&a()||requestAnimationFrame((()=>{a&&a()||e.forEach((e=>{let{experienceType:a,instanceSrc:t}=e;if(a in Ar.z)Dr.n.loadExperience(a);else{const e=function(e){return{instanceId:e,configRef:{experienceType:arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,instanceSrc:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default")||"default"}}}(a,t);(0,_e.Fg)(e)}}))})))},this.handleOnlineTransition=()=>{this.isFirstRender&&this.callRefreshRegionsData()},this.proactivelyRenderRiverByTimeToEndOfFeed=()=>{if(!(0,oa.N)())return;let e,a,t;this.renderAsNeededOnScroll=(0,Rr.Z)((r=>{if(!e){const i=document.body.scrollHeight-window.innerHeight-window.scrollY,n=t&&r.timeStamp-t,s=a&&n&&n<5e3?(window.scrollY-a)/n:void 0;a=window.scrollY,t=r.timeStamp;(null==s||s<0?Number.MAX_VALUE:i/s)<(this.config.proactiveRiverRenderingTTEOFThreshold||200)&&(e=requestAnimationFrame((()=>{this.hasRemainingRiverSection()&&this.renderNextFeedLayout(),e=void 0})))}}),100),window.addEventListener("scroll",this.renderAsNeededOnScroll)},this.proactivelyRenderRiverWhenIdle=()=>{if(!(0,oa.N)())return;const e=()=>{this.hasRemainingRiverSection()&&(this.renderNextFeedLayout(),this.proactivelyRenderRiverWhenIdle())};this.config.disableProactiveRenderBattery?navigator.getBattery().then((a=>{a.charging&&(0,fa.C)(e)})):(0,fa.C)(e)},this.onFeedLayoutElementsChanged=e=>{this.renderedFeedLayoutElements=e,Object.keys(this.pendingFeedLayoutRenderHandlers).forEach((a=>{const t=Number(a),r=e[t];r&&(this.pendingFeedLayoutRenderHandlers[t](r),delete this.pendingFeedLayoutRenderHandlers[t])}))},this.onWaterfallElementsChanged=e=>{for(let a=e.length-1;a>=0;a--){const t=e[a],r=Number(t.getAttribute("section-index"));if(this.renderedWaterfallElements[r]){if(this.renderedWaterfallElements[r].length===qr[this.layout])continue;this.renderedWaterfallElements[r].push(t)}else this.renderedWaterfallElements[r]=[t]}Object.keys(this.pendingWaterfallRenderHandlers).forEach((e=>{const a=Number(e),t=(this.renderedWaterfallElements||[])[a];t&&(this.pendingWaterfallRenderHandlers[a](t,a),delete this.pendingWaterfallRenderHandlers[a])}))},this.buildFallbackVerticalCardsMetadata=()=>{if(!this.config.fallbackVerticalCardData)return[];const e=[];return this.config.fallbackVerticalCardData.forEach((a=>{if(!(a&&a.localizedStringKey&&a.documentId&&a.redirectUrl))return;const t=this.config.localizedStrings.fallbackVerticalTitles[a.localizedStringKey],r=(0,ma.h_)(a.redirectUrl),i=(0,xa.ku)(),n=i?r+`?ocid=${i}`:r,s={title:t,pageUrl:n,imageUrl:(0,Tr.zz)(a.documentId,{width:84,height:84,enableDpiScaling:!0,devicePixelRatio:2}),telemetryObject:new xr.D({name:"FallbackVertical_"+t,type:Ra.c9.ActionButton,behavior:Ra.wu.Navigate,content:{headline:n}})};e.push(s)})),e},this.getRiverPlaceholderData=(0,vr.Z)((e=>(0,va.z)(`superfeed-placeholder-data-${e}`,1,(()=>{const a=_r[e],t=`msft-placeholder-${e.toLowerCase()}`,r=new Array(a).fill({type:E.PL.PlaceholderCard});return{feedData:this.mapFeedData(r,{layoutTemplateName:t,region:"river",parentTelemetryObject:this[Vr.river]}),templateId:t,cardMetadataList:r,isPlaceholder:!0}}))())),this.isFeedFetching=()=>this.isFetching,this.mapWaterfallFeedData=(e,a)=>{const{region:t,parentTelemetryObject:r,visualReadinessCallback:i,refreshFeedCallback:n,isRefresh:s,prevCardCount:o}=a,d={defaultLayout:[],C6:[],C5:[],C4:[],C3:[],C2:[],C1:[]};return e.forEach(((a,l)=>{var c,p,h;let C=this.config.useCaseInsensCardTypeMap?(0,g.Q)().get(a.type):g.J[a.type];if(!C)return void Y.M0.sendAppErrorEvent({...S.Dt$,message:"Card type not found",pb:{...S.Dt$.pb,cardMetadataType:a.type,feedLayoutCardType:C,experience:this.experienceId,debugId:a.debugId,region:t}});const m=Object.assign({},this.config,null===(c=this.config)||void 0===c?void 0:c[t]);C===f.U.serendipityCard&&(C=f.U.trendingNowCard),C===f.U.localNewsCarCard&&null!==(p=this.config.childExperienceReferencesWC)&&void 0!==p&&p.tabbedFeedWC&&this.config.useTabbedFeed4LocalNews&&a.feed&&"localnews"==a.feed.sourceFeedType&&(C=f.U.tabbedFeedCard),m.enableFeed3Cards&&(C=(0,Oe.uP)(C)),this.feedEventAggregator.publish(u.OnStartCardArgsCreate,{feedLayoutCardType:C,cardMetadata:a,config:m});const v=this.simulateCardSlot(l,a.height,C===f.U.infopaneCard),y={feedName:this.feedName,cardMetadata:a,cardSlot:v,cardHeightPx:a.height,parentTelemetryObject:r,disableActionMenuOnAds:this.disableActionMenuOnAds,enableRotateOnlyOnce:this.enableRotateOnlyOnce,openLinksInNewTab:m.openLinksInNewTab??!0,cardActionBitMask:m.cardActionBitMask??7,isAnaheimDesign:m.isAnaheimDesign??!0,goToPersonalizeCallback:this.navigateToPersonalizeCallback,goToPersonalizeSettingsCallback:this.navigateToPersonalizeSetting,initCardAction:this.initCardAction,cardActionDismissCallback:(0,ze.W)(a,C)?this.cardActionDismissCallback:void 0,cardActionClickHandler:this.cardActionClickHandler,shareActionHandler:this.shareActionHandler,getReplacementCardsCallback:this.getReplacementCardsCallback,reactionCallback:this.reactionCallback,visualReadinessCallback:i??this.getVisualReadinessCallback(C,a,t),localizedStrings:m.localizedStrings,configOptions:m,stockImageData:m.stockImageData,enableRichSocialReaction:this.feedSource!==k&&m.enableRichSocialReactions,isAdFeedbackV1Enabled:Boolean(m.adFeedbackV1Enabled),enableNativeAdHoverContrast:Boolean(m.enableNativeAdHoverContrast),enableHotListInDigestCard:Boolean(m.enableHotListInDigestCard),enableTopStoriesInHotListCard:Boolean(m.enableTopStoriesInHotListCard),handleAdFeedbackSubmit:(0,P.I3)().ReportAd,useInlineSvgIcons:!0,refreshFeedCallback:n??this.callRefreshRegionsData,refreshSDCardSection:this.updateCacheAndRefreshRegionsData,sdCardActionClickHandler:this.sdCardActionClickHandler,hideCardCallback:this.updateCacheAndRefreshRegionsData,dismissSDCardMenuCallback:this.dismissSDCardMenu,addManageFunctionCallbackForStoryCarousel:this.options&&this.options.addManageFunctionCallbackForStoryCarousel,isClarityEnabled:m.isClarityEnabled,isIASEnabled:m.isIASEnabled,hideStoryEntryPointMap:this.hideStoryEntryPointMap,isBlurred:m.isBlurred,prevCardCount:o,adTimerInMS:m.adTimerInMS,region:t};null===(h=qe[C])||void 0===h||h.call(qe,y,a,m,{cardMetadataList:e,index:l}),this.feedEventAggregator.publish(u.OnCardArgsCreated,{feedLayoutCardType:C,cardMetadata:a,args:y,isRefresh:s});try{let e;var b,R;if(m.useSharedTelemetry&&C in Xe)e=ea(y,C);else e=null===(b=this.cardDataMapperMap)||void 0===b||null===(R=b[C])||void 0===R?void 0:R.getFeedDataForCard(y);if(a.type!==E.PL.LocalNewsFeed&&a.type!==E.PL.ChannelFilterCard)if(e){var w,U;const t=null===(w=e.defaultLayout)||void 0===w?void 0:w[0];!(0,B.G)(t)||null!=t&&t.childTemplateType&&null!==(U=this.cardTemplateMap)&&void 0!==U&&U[t.childTemplateType]||Y.M0.sendAppErrorEvent({...S.NXh,message:"Not support card template type",pb:{...S.NXh.pb,cardMetadata:a.type,layoutTemplateName:"WaterfallFeed",experience:this.experienceId,customMessage:`Error: feed card type ${C} with card type ${null==t?void 0:t.childTemplateType} can not be found in card template map`,debugId:a.debugId}})}else Y.M0.sendAppErrorEvent({...S.NXh,message:"Mapped Feed Data is empty",pb:{...S.NXh.pb,cardMetadata:a.type,layoutTemplateName:"WaterfallFeed",experience:this.experienceId,customMessage:`Error: feed card type ${C} mapped result is empty`,debugId:a.debugId}});if(e){var x,T;const t={...null===(x=e.defaultLayout)||void 0===x?void 0:x[0],...null===(T=e.C1)||void 0===T?void 0:T[0],height:a.height};e.defaultLayout[0]=t;const r=$r(e);null==r||r.forEach((e=>{let[a,t]=e;var r;"defaultLayout"===a&&(null===(r=d.defaultLayout)||void 0===r||r.push(...t??[]))}))}}catch(e){Y.M0.sendAppErrorEvent({...S.O6X,message:"Mapped Feed Data not Generated",pb:{...S.O6X.pb,slotIndex:l,cardMetadataType:a.type,layoutTemplateName:"WaterfallFeed",experience:this.experienceId,stack:`${e&&e.stack}`,customMessage:`Error: ${e&&e.message}`,debugId:a.debugId}})}})),d},this.isColumnBasedResponse=e=>{var a;const t=null==e||null===(a=e.sections)||void 0===a?void 0:a.find((e=>"river"===e.region));return void 0!==(null==t?void 0:t.requestedColumnCount)??!1},this.getSSRColumnLayout=function(){var e,a;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const r=null===(e=window.ssrSizes)||void 0===e||null===(a=e.ssrCol)||void 0===a?void 0:a.toUpperCase();return r!==v.Kx.C1||t?r:v.Kx.C2}}async init(e){var a,r,i;this.river=[],this.waterfall={childTemplateMap:this.cardTemplateMap,columns:[]},this.rightrail=[],this.Rail=[],this.sdCardMenuOpen=!1,this.unrenderedRegionsData=[],this.isFirstRender=!0,this.lastResponse=void 0,this.isFetching=!1,this.isStopUpdateFeedData=!1,this.riverChangedCallbackList=[],this.emptyFeedCallbackList=[],this.ttvrSpaceTotal=1,this.appendixFeedStyleArgs={},this.instantReplaceIdMap={},this.hideStoryEntryPointMap={},this.readyForPrefetch=!1;const{config:n,experienceId:s,feedId:o,feedName:d,feedSource:l,regionKeys:c,layoutTemplateMap:p,elementKey:h,useProviderKey:C,emptyFeedCallback:u,riverChangedCallback:g}=e;this.config=n,this.experienceId=s,this.regionKeys=c,this.feedId=o,this.useProviderKey=C,this.feedName=d,this.feedSource=l,this.isSuperDataProviderEnabled=this.config.enableSuperDataProvider??!1,this.infopaneInSecondSection=this.config.infopaneInSecondSection??!1,this.hasFullWidthFreFirstSection=!1,this.cardsToRenderFromSection=this.config.cardsToRenderFromSection||3,this.isXFeed=(null===(a=this.config.riverSectionCardProviderConfig)||void 0===a||null===(r=a.initialRequest)||void 0===r?void 0:r.feedId)!==this.feedId,this.adRenderPipedPromise=new Z.o;const f=!(0,oa.N)()&&this.config.sectionsToRenderOnServerSide||1;var m;if((this.sectionsRenderComplete=new ta(f),this.layoutTemplateMap=p,this.needsHydration=e.needsHydration,this.elementKey=h,this.lastFreTimestamp=Date.now(),this.disConnected=!1,this.isStatic=!1,this.riverCardCount=0,this.initProvider(),(0,oa.N)())&&(ia.k.setCacheSize((null===(m=this.config)||void 0===m?void 0:m.samPageDedupeCacheSize)||0),this.config.enableSingleRotationOnBattery)){(window&&window.navigator).getBattery().then((e=>{e.charging||(this.enableRotateOnlyOnce=!0)}))}if(await this.initCommonHelpers(),await this.initCommonFeedBehavior(),this.feedEventAggregator=new ya.X(((e,a,t,r)=>{const i=r.feedLayoutCardType;return Y.M0.sendAppErrorEvent({...S.vpZ,message:"Failed to execute subscription callback",pb:{...S.vpZ.pb,customMessage:`Failed at ${a}, index ${t}`,failedCardType:i,feedType:this.experienceId,errorMessage:e&&"[object Error]"===toString.call(e)&&e.message}})})),this.subscribeFeedEvent(),this.config.enableGlobalMonitor){var v;const e=null!==(v=this.options)&&void 0!==v&&v.isWidget?x.x.desktopFeedWC:this.experienceId;tt(e),or(this.config.blankDetectTimeout)}(0,Lr._)(),this.config.proactiveRiverRenderingTTEOFThreshold&&Xr(this.config.proactiveRenderDelay).then(this.proactivelyRenderRiverByTimeToEndOfFeed),this.config.enableGreyBlock&&Xr().then((()=>(0,fa.C)((()=>this.riverPlaceholderData=this.getRiverPlaceholderData(this.layout))))),u&&this.emptyFeedCallbackList.push(u),g&&this.riverChangedCallbackList.push(g);const{enableFilterResponse:y,riverSectionCardProviderConfig:k}=this.config;if((0,oa.N)()&&y&&"following"===(null==k||null===(i=k.initialRequest)||void 0===i?void 0:i.feedName)){const{followingExperienceManager:e}=await Promise.all([t.e("libs_wpo-card-provider_dist_WpoCardProvider_js"),t.e("libs_following-experience-manager_dist_index_js")]).then(t.bind(t,78316));this.followingExperienceManager=e}}setTtvrRows(e){this.ttvrRows=e}getLayoutTemplateMap(){return this.layoutTemplateMap}getLayoutTemplate(e){var a;return null===(a=this.layoutTemplateMap)||void 0===a?void 0:a[e]}setTtvrHeight(e){this.ttvrHeight=e}async initCommonHelpers(){var e;const{feedId:a}=this;(0,Ve.L)().get("vptest")&&(this.vpReadyHelper=new(await t.e("VpReadyHelper").then(t.bind(t,27737)).then((e=>{let{VpReadyHelper:a}=e;return a})))),this.weatherHelper=new W;const r=null!==(e=this.options)&&void 0!==e&&e.isWidget?x.x.desktopFeedWC:this.experienceId;this.ttvrHelper=new Ce(r,this.config.maxVisualReadinessCallbackSetTimes),this.sdCardHelper=new Le(this.config.riverSectionCardProviderConfig),this.cardReplacementHelper=new Ie(this.config.cardUpdateProviderConfig??this.config.riverSectionCardProviderConfig,a),this.cardExtTelemetryHelper=new Ee(this.regionKeys),this.locationDataHelper=new We(this.updateCacheAndRefreshRegionsData),this.locationDataHelper.register(),this.initHelpers()}async initCommonFeedBehavior(){var e,a,t,r;const{feedId:i,feedName:n}=this;this.regionKeys.forEach((e=>{var a,t;this[Vr[e]]=new xr.D({name:Kr[e].name,content:{headline:i||n||Kr[e].headline},...null===(a=this.options)||void 0===a||null===(t=a.extendRegionTelemetryTagMap)||void 0===t?void 0:t[e]})})),null!==(e=this.config)&&void 0!==e&&e.showLoadingPlaceholder&&(this.loadingPlaceholderTelemetry=function(e){if(e)return e.addOrUpdateChild({name:Fr,action:Ra.Aw.View,behavior:Ra.wu.Show})}(this.riverTelemetry)),(0,oa.N)()||"1"!==ca.c.getQueryParameterByName("logconfig",null===(a=window.location)||void 0===a?void 0:a.href)||Y.M0.sendAppErrorEvent({...S.MWw,message:"No alert - log SSR CRS config",pb:{...S.MWw.pb,config:JSON.stringify(this.config)}}),(0,oa.N)()&&this.config&&this.config.adCookieSyncConfig&&this.config.adCookieSyncConfig.isCookieSyncEnabled&&(this.cookieSyncService=new na.q(this.config.adCookieSyncConfig||{}),this.cookieSyncService.processCookieSync()),null!==(t=this.config)&&void 0!==t&&null!==(r=t.childExperienceReferencesWC)&&void 0!==r&&r.socialBarWC&&(this.config.skipWaitAdToLoadSbInPrd&&(0,wa.TR)()?(0,_e.Fg)(this.config.childExperienceReferencesWC.socialBarWC):this.adRenderPipedPromise.getResultAsync().then((()=>{var e;null!==(e=this.config.childExperienceReferencesWC)&&void 0!==e&&e.socialBarWC&&(0,_e.Fg)(this.config.childExperienceReferencesWC.socialBarWC)}))),this.config&&this.config.enableSuperVideoCard&&this.config.childExperienceReferencesWC&&this.config.childExperienceReferencesWC.videoCardWC&&this.adRenderPipedPromise.getResultAsync().then((()=>{var e;null!==(e=this.config.childExperienceReferencesWC)&&void 0!==e&&e.videoCardWC&&(0,_e.Fg)(this.config.childExperienceReferencesWC.videoCardWC)}));const s=[(0,wa.lr)(),(0,z.F_)()];this.config.prefetchAfterAds&&s.push(this.adRenderPipedPromise.getResultAsync()),Promise.all(s).then((()=>{this.readyForPrefetch=!0})),await this.initFeedBehavior()}waitForSectionsRenderComplete(){return this.sectionsRenderComplete.getResultAsync()}disConnect(){this.resetParameters(),this.disConnected=!0,this.locationDataHelper.unregister(),this.feedEventAggregator.publish(u.OnFeedDisconneted,{}),this.renderAsNeededOnScroll&&window.removeEventListener("scroll",this.renderAsNeededOnScroll)}async updateRegionsData(e){this.lastResponse&&(this.isUpdateRegionsDataLoading=!0,(!this.config.useMobile||this.config.useMobile&&this.river.length>=this.ttvrHelper.maxVisualReadinessCallbackSetTimes)&&await(0,z.F_)(),await this.renderRegionsData(e),this.isUpdateRegionsDataLoading=!1)}async renderRegionsData(e){const a=this.isFirstRender;if(this.feedEventAggregator.publish(u.OnStartFeedRequest,{}),!this.hasRemainingRiverSection()){let a;if(a=this.prefetchHandler?await this.prefetchHandler:await this.updateFeedData(e),!a)return}this.renderNextFeedLayout(a),this.prefetchFeed()}addRiverChangedCallback(e){this.riverChangedCallbackList.push(e)}shouldPrefetch(){var e,a;const t=this.config.numOfSectionsToPrefetch||2;let r;var i,n,s,o;this.config.isWaterfallFeed?r=null===(i=this.unrenderedRegionsData.find((e=>{let{region:a}=e;return"river"===a})))||void 0===i||null===(n=i.waterfallSections)||void 0===n?void 0:n.length:r=null===(s=this.unrenderedRegionsData.find((e=>{let{region:a}=e;return"river"===a})))||void 0===s||null===(o=s.sections)||void 0===o?void 0:o.length;return void 0!==r&&r<=t&&!this.prefetchHandler&&this.readyForPrefetch&&!(null!==(e=this.options)&&void 0!==e&&null!==(a=e.prefetchFeedDisabled)&&void 0!==a&&a.call(e))}prefetchFeed(){this.shouldPrefetch()&&(this.prefetchHandler=this.updateFeedData().catch((()=>!1)).finally((()=>{delete this.prefetchHandler})))}removePrefetchHandler(){delete this.prefetchHandler}prefetchPaginationResponse(){if(this.requestType===U.V.subsequent){const e=this.fetchFeed(!0);e&&this.paginationFeedResponseQueue.push(e)}}getPrecachedPaginationResponse(e){var a;if(e&&null!==(a=this.paginationFeedResponseQueue)&&void 0!==a&&a.length){const e=this.paginationFeedResponseQueue.shift();if(e)return e}}refreshWaterfallFeedCallback(){this.callRefreshRegionsData({invalidateCache:!0,scrollToTop:!0})}trackPaginationTimings(e,a){if(this.config.trackPaginationTimings&&this.paginationTimings){var t;const r={t:Math.round(performance.now())-e};a&&(r.c=1),null!==(t=this.paginationFeedResponseQueue)&&void 0!==t&&t.length&&(r.l=this.paginationFeedResponseQueue.length),this.paginationTimings.push(r),!this.hasPaginationTimingUnloadEvent&&(0,oa.N)()&&(this.addPaginationTimingUnloadEvent(),this.hasPaginationTimingUnloadEvent=!0)}}addPaginationTimingUnloadEvent(){window.addEventListener("beforeunload",(()=>{var e;(null===(e=this.paginationTimings)||void 0===e?void 0:e.length)&&Y.M0.sendLoadTimeEvent({markers:this.paginationTimings})}),{once:!0})}async refreshSDCard(){const e=await this.sdCardHelper.fetchUpdatedSDCard();e&&(this.updateRenderedSDCard(e),this.updateUnRenderedSDCard(e))}updateRenderedSDCard(e){this.regionKeys.forEach((a=>{const t=[];this[a].forEach((r=>{const{cardMetadataList:i,templateId:n,prevCardCount:s}=r;if(!i)return void t.push(r);e&&i.forEach(Te,{response:e});const o={...r,feedData:this.mapFeedData(i,{layoutTemplateName:n,region:a,parentTelemetryObject:this[Vr[a]],prevCardCount:s}),cardMetadataList:i};t.push(o)})),this[a]=t}))}updateUnRenderedSDCard(e){this.config.isWaterfallFeed?(this.unrenderedRegionsData.forEach((a=>{let{sections:t}=a;null==t||t.forEach((a=>{let{cards:t}=a;t.forEach(Te,{response:e})}))})),this.unrenderedRegionsData.forEach((a=>{let{waterfallSections:t}=a;null==t||t.forEach((a=>{a.columns.flatMap((e=>e.cards)).forEach(Te,{response:e})}))}))):this.unrenderedRegionsData.forEach((a=>{let{sections:t}=a;null==t||t.forEach((a=>{let{cards:t}=a;t.forEach(Te,{response:e})}))}))}getPageRevalidateResultAsync(){return this.config.enableGlobalMonitor?new Promise((e=>_a(Ha.Ttvr).state(Ga.FeedTtvr).finally((()=>e(void 0))))):this.ttvrHelper.getPageRevalidateResultAsync()}updateLayout(e){const a={oldLayout:e,layout:null};this.feedEventAggregator.publish(u.BeforeUpdateLayout,{layoutResFromFeedEvent:a});const t=this.layout;this.layout=a.layout??e;const r=this.config.isWaterfallFeed&&t&&t!==this.layout;t&&this.layout!==t&&Y.M0.sendAppErrorEvent({...S.kfD,message:"Feed window resizing",pb:{...S.kfD.pb,customMessage:`Feed: ${this.experienceId}, New layout: ${this.layout}, Old layout: ${t}`}}),this.config.enableLazyDataMapping&&this.loadLazyDataMappings(this.layout),this.config.enableGreyBlock&&(0,oa.N)()&&(this.riverPlaceholderData=this.getRiverPlaceholderData(e)),r&&(this.isWaterfallFeedResizing=!0,this.callRefreshRegionsData({invalidateCache:!0,scrollToTop:!0}))}updateTtvrSpaceTotal(e){this.ttvrSpaceTotal=e}appendFeedStyleArgs(e){this.appendixFeedStyleArgs=e}riverChanged(e,a){void 0!==e&&void 0!==a&&this.riverChangedCallbackList.forEach((t=>t(e,a)))}async getContentForCardReplacements(e,a,t,r,i,n,s){var o;if(this.isFetching||this.cardReplacementHelper.reachedEnd)return;this.isFetching=!0;const d=this.lastResponse,l=d&&((null===(o=d.nextPageRequest)||void 0===o?void 0:o.nextPageUrl)??d.nextPageUrl);let c=0;if(l){const e=new URLSearchParams(l);c=parseInt(e.get(T.hE.newsSkip)||"0")}const p=await this.cardReplacementHelper.fetch(e,a||n||s?void 0:c,a,t,r,i,n||this.feedId,s);if(p&&!(0,ha.x)(p.cardMetadata)){if(l&&!a){const a=new URL(l);a.searchParams.set(T.hE.newsSkip,""+(c+(e||0))),d.nextPageRequest?d.nextPageRequest.nextPageUrl=a.href:d.nextPageUrl=a.href}a&&(this.currentFreTimestamp=p.feedContext&&p.feedContext.lastFreActionTimestamp)}else Y.M0.sendAppErrorEvent({...S.sDN,pb:{...S.sDN.pb,customMessage:"Card replacement fetch failure due to invalid feed response. User sees hide confirmation card instead of replacement article"}});return this.isFetching=!1,null==p?void 0:p.cardMetadata}hasRemainingRiverSection(){return this.config.isWaterfallFeed?!!this.unrenderedRegionsData.find((e=>{let{region:a,waterfallSections:t}=e;return"river"===a&&(null==t?void 0:t.length)})):!!this.unrenderedRegionsData.find((e=>{let{region:a,sections:t}=e;return"river"===a&&(null==t?void 0:t.length)}))}consumeUnrenderedFeedLayout(){if(this.disConnected&&this.config.enableGlobalMonitor)return;const e="InfopaneFullyRendered",a=this.isFirstRender,t=(0,Sa.Ou)();a?t[L.p.firstSectionRenderStart]=Math.round((0,Sa.UE)()):t[L.p.secondSectionRenderStart]=Math.round((0,Sa.UE)());(0,Sa.Y9)()[L.p.sectionRenderStart]=Math.round((0,Sa.UE)()),this.isFirstRender=!1,this.regionKeys.forEach((async r=>{const{sections:i,waterfallSections:n}=this.unrenderedRegionsData.find((e=>{let{region:a}=e;return a===r}))||{};if(i||n){if("river"===r&&this.config.isWaterfallFeed)this.consumeUnrenderedWaterfallFeedLayout(a,r,n);else if("river"===r){const n=null==i?void 0:i.shift();if(!n)return;const{cards:C,layoutTemplate:g}=n;if(this.config.enableGlobalMonitor){if(a){const e=this.getLayoutTemplate(g)??null;e&&function(e,a,t,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Qa)return;let n=!1;const s=_a(Ha.Ttvr);e.forEach(((e,i)=>{const o=function(e){var a,t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,i=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;if(!i||!n)return!1;const s=null===(a=i.cardSlots[e])||void 0===a||null===(t=a.telemetryRowCol)||void 0===t?void 0:t[n];return!(!s||s[0]>2*r)}(i,r,a,t);if(!o)return;const d=Ya(e);if(!d)return;if(d.shouldTrack&&!d.shouldTrack(e))return;const l=[d.space,Ga.FeedTtvr];s.track(d.key(e),{spaceNames:l,metadataType:e.type}),n=!0})),n?(i?qa.c:setTimeout)((()=>{for(const[e]of s.entries())s.markFail(e)}),1e4):Za()}(C,e,this.layout,this.ttvrRows,(0,N.wS)())}if(this.shouldServeAdsWhenSectionInView(a)){const[e,a]=this.separateAdCardsMetadata(C),t=this.river.length;this.adsServingDeferredMetadata[t]=e,dr(a,r)}else dr(C,r)}const f=C.findIndex(ur)>-1||C.findIndex(gr)>-1;if(a||this.hasFullWidthFreFirstSection&&f){var s,o;a&&(this.river=[],this.riverCardCount=0);const t=!this.isFirstRender&&this.hasFullWidthFreFirstSection,n=e=>e.type===E.PL.TopicFeed,u=C.findIndex(n)>-1,{delayLoadSuInfConCards:m,enableSuperInfopane:v,useMobile:y}=this.config,k=this.config.enableFilterResponse||C.findIndex(fr)>-1||this.channelFilterFlightMismatch;if(f||u&&m){const a=C.map((e=>{if((ur(e)||n(e))&&y&&m&&v){var a;const t=e.subCards;return{...e,subCards:null==e||null===(a=e.subCards)||void 0===a?void 0:a.slice(0,1),fullSubItems:t}}if(ur(e)){var t;const a=null===(t=e.subItems??e.subCards)||void 0===t?void 0:t.map((e=>({...e,subItems:e.subItems??e.subCards})));return{...e,subItems:[a[0]],fullSubItems:a}}return{...e,isFirstSectionCard:!0}})),i={feedData:this.mapFeedData(a,{layoutTemplateName:g,region:r,parentTelemetryObject:this[Vr[r]]}),templateId:g,cardMetadataList:a,hasPlaceHolderAds:!0,isResponsiveFeed:this.config.enableResponsiveFeed,baseCardSize:this.config.baseCardSize};if(this.config.enableGlobalMonitor||this.ttvrHelper.track(i.feedData[this.layout],a,this.ttvrSpaceTotal),this.river=t?[this.river[0],i]:[i],!(0,oa.N)())return;var d;if(this.vpReadyHelper&&this.vpReadyHelper.trackVpMarker(e),this.vpReadyHelper&&this.vpReadyHelper.track(i),window.isSSRCompleted)await(null===(d=ra._U.get("cs-info-pane"))||void 0===d?void 0:d.topDownHydrateComplete.getResultAsync());else await(0,z.F_)();this.config.renderAdsBefore2ndInfopane&&!(0,wa.TR)()&&await this.adRenderPipedPromise.getResultAsync();const s=t?this.river[1]:this.river[0],{cardMetadataList:o=[],hasPlaceHolderAds:l=!0}=s??{},c=o.map((e=>(ur(e)&&e.fullSubItems&&(e.subItems=e.fullSubItems,y&&(e.subCards=e.fullSubItems),delete e.fullSubItems),n(e)&&e.fullSubItems&&(e.subCards=e.fullSubItems,delete e.fullSubItems),e))),p={feedData:this.mapFeedData(c,{layoutTemplateName:g,region:r,parentTelemetryObject:this[Vr[r]]}),templateId:g,cardMetadataList:c,hasPlaceHolderAds:l,isResponsiveFeed:this.config.enableResponsiveFeed,baseCardSize:this.config.baseCardSize};this.river=t?[this.river[0],p,...this.river.slice(2)]:[p,...this.river.slice(1)],(0,N.su)("InfopaneDataReady",performance.now()),this.weatherHelper.hasWeatherCard(c)&&this.weatherHelper.register(),requestAnimationFrame((()=>{(0,ka.OY)(e),(0,N.su)(e,performance.now())}))}else{const e={feedData:this.mapFeedData(C,{layoutTemplateName:g,region:r,parentTelemetryObject:this[Vr[r]]}),templateId:g,cardMetadataList:C,hasPlaceHolderAds:!0,isResponsiveFeed:this.config.enableResponsiveFeed,baseCardSize:this.config.baseCardSize};this.config.enableGlobalMonitor||this.ttvrHelper.track(e.feedData[this.layout],C,this.ttvrSpaceTotal),this.vpReadyHelper&&this.vpReadyHelper.track(e),this.river=[e]}if(!f&&this.config.enableInfopaneDialtone){var l,c,p,h;this.infopaneInSecondSection&&(null==i?void 0:i.length)&&((null===(l=i[0])||void 0===l||null===(c=l.cards)||void 0===c?void 0:c.findIndex(ur))>-1||(null===(p=i[0])||void 0===p||null===(h=p.cards)||void 0===h?void 0:h.findIndex(gr))>-1)||Y.M0.sendAppErrorEvent({...S.AP6,pb:{...S.WNm.pb,customMessage:`FeedType: ${this.experienceId} has missing or invalid infopane.`,isPrerender:null===ee.Al||void 0===ee.Al?void 0:ee.Al.IsPrerender}})}if(!k&&!this.isSkypeInChannelMode()&&"following"===(null===(s=this.config.riverSectionCardProviderConfig)||void 0===s||null===(o=s.initialRequest)||void 0===o?void 0:o.feedName)){const e=da.Gq.get("OneServiceResponseDebugId");Y.M0.sendAppErrorEvent({...S.gu7,pb:{...S.WNm.pb,customMessage:`FeedType: ${this.experienceId} has missing or invalid channel carousel.`,isPrerender:null===ee.Al||void 0===ee.Al?void 0:ee.Al.IsPrerender,debugId:e}})}}else{this.config.enableSectionScrollMonitoring&&(0,oa.N)()&&this.setupSectionScrollMonitoring(C,this.sectionIdx,g),this.config.renderAdsBeforeDeepRiver&&await this.adRenderPipedPromise.getResultAsync();const e={feedData:this.mapFeedData(C,{layoutTemplateName:g,region:r,parentTelemetryObject:this[Vr[r]],prevCardCount:this.riverCardCount}),templateId:g,cardMetadataList:C,hasPlaceHolderAds:!0,isResponsiveFeed:this.config.enableResponsiveFeed,baseCardSize:this.config.baseCardSize,prevCardCount:this.riverCardCount};this.config.enableGlobalMonitor||this.ttvrHelper.track(e.feedData[this.layout],C,this.ttvrSpaceTotal),t[L.p.secondSectionRenderEnd]=Math.round((0,Sa.UE)()),this.river=[...this.river,e],this.config.renderAdsBeforeDeepRiver&&this.feedEventAggregator.publish(u.OnFeedRendered,{isFirstRender:a})}this.riverCardCount+=n.cards.length}else{const e=null==i?void 0:i.splice(0);if((0,ha.x)(e))return;const t=this[r],n=null==e?void 0:e.map((e=>{const{layoutTemplate:a,cards:t}=e;this.config.enableGlobalMonitor&&dr(t,r);return{feedData:this.mapFeedData(t,{layoutTemplateName:a,region:r,parentTelemetryObject:this[Vr[r]]}),templateId:a,cardMetadataList:t,hasPlaceHolderAds:!0,isResponsiveFeed:!1,baseCardSize:this.config.baseCardSize}}));this[r]=a?n:[...t,...n]}this.sectionIdx++}}))}separateAdCardsMetadata(e){const a=[],t=[];return e.forEach((e=>("nativead"===e.type||"cmsad"===e.type?a:t).push(e))),[a,t]}async shuffleFeed(e){const a=this.river.reduce(((e,a)=>e+(a.cardMetadataList&&a.cardMetadataList.length||0)),0),t=await this.getContentForCardReplacements(a,void 0,void 0,!0,e)||[];let r=0;const i=[E.PL.Article,E.PL.EventSDCardSportsMIT1,E.PL.EventSDCardSportsMIT2,E.PL.EventSDCardSportsMIT3,E.PL.EventSDCardWorldCup,E.PL.EventSDCardWorldCup2,E.PL.GroupedContent,E.PL.HealthRiverCard,E.PL.HealthTipCard,E.PL.Infopane,E.PL.Marketplace,E.PL.MoneyInfo,E.PL.Qna,E.PL.Slideshow,E.PL.SportsMatch,E.PL.TopicFeed,E.PL.TravelArticleCard,E.PL.UserInterestNTPProvider,E.PL.UserInterestTopic,E.PL.Video,E.PL.WeatherSummary];for(let e=this.river.length-1;e>=0;e--){const a=this.river[e];if(!a.cardMetadataList||1===a.cardMetadataList.length)continue;const n=a.cardMetadataList.map((e=>{const a=i.includes(e.type);if(r<t.length&&a){const a=t[r++];return Fa(e)||Ia(a),Ea(e)||Ma(a),a}return e}));this.updateFeedSectionBySectionIndex("river",n,e)}Y.M0.scheduleContentViewEvent(Pa.NS.Partial,0)}setInitialRowCount(e){this.cardExtTelemetryHelper.setInitialRowCount(e)}resetParameters(e,a){var t;const{cleanRiver:r,isXFeed:i,feedId:n,useProviderKey:s}=e||{};if(a||(a=this),r&&(a.river=[],a.waterfall={childTemplateMap:a.cardTemplateMap,columns:[]}),a.requestType=U.V.refresh,a.isStatic=!1,a.fallbackFeed=void 0,a.unrenderedRegionsData=[],a.lastResponse=void 0,a.isFirstRender=!0,a.hideStoryEntryPointMap={},a.sdCardHelper.clearSDCardList(),a.cardReplacementHelper.clearCache(),a.cardExtTelemetryHelper.reset(),a.riverSectionIndex=1,a.hasFullWidthFreFirstSection=!1,a.renderedWaterfallElements=[],a.pendingWaterfallRenderHandlers=[],a.adsMinIndex=[],void 0!==i&&(a.isXFeed=i),void 0!==n&&(a.feedId=n),void 0!==s&&(a.useProviderKey=s),a.config.enableGlobalMonitor){var o;const e=null!==(o=a.options)&&void 0!==o&&o.isWidget?x.x.desktopFeedWC:a.experienceId;tt(e),or()}(0,Lr._)(),a.feedEventAggregator.publish(u.OnParametersReset,e??{});const{enableFilterResponse:d,riverSectionCardProviderConfig:l}=a.config;var c;(0,oa.N)()&&d&&"following"===(null==l||null===(t=l.initialRequest)||void 0===t?void 0:t.feedName)&&(null===(c=a.followingExperienceManager)||void 0===c||c.hideFallbackFeed())}logAppErrorToEdgeAndCsTelemetry(e,a,t){Er(e.id),Y.M0.sendAppErrorEvent({...e,message:a,pb:{...e.pb,propertyBag:t}})}responseContainsCardsData(e){return!(!e||(0,ha.x)(e.sections)&&(0,ha.x)(e.regions))}getNurturingDataFromResponse(e){var a;if(!this.responseContainsCardsData(e))return[];let t;if(this.isSuperDataProviderEnabled){var r;t=null===(r=e.sections)||void 0===r?void 0:r.filter((e=>"banner"==e.region||"coachmark"==e.region)).flatMap((e=>e.subSections)).flatMap((e=>e.cards)).map((e=>e.data))}else{var i;t=null===(i=e.regions)||void 0===i?void 0:i.filter((e=>"banner"==e.region||"coachmark"==e.region)).flatMap((e=>e.sections)).flatMap((e=>e.cards)).filter((e=>e.type===E.PL.BoostAdsBanner||e.type===E.PL.BoostAdsCoachmark)).map((e=>e.data))}return(null===(a=t)||void 0===a?void 0:a.map((e=>{try{return e&&JSON.parse(e)}catch{return void Y.M0.sendAppErrorEvent((0,ue.Tr)(S.JtN,`Fail to parse Amplify Nurturing Data: ${e}`))}})).filter((e=>null!==e)))||[]}extractFollowingFREData(e){var a;let t;const r=Array.isArray(e)&&(null===(a=e[0])||void 0===a?void 0:a.cardMetadataList);return Array.isArray(r)&&(t=r.find((e=>"UserInterestTopicAndProvider"===e.type))),t}handleFeedLayoutElementRendered(e,a){this.renderedFeedLayoutElements&&e<this.renderedFeedLayoutElements.length?a(this.renderedFeedLayoutElements[e]):this.pendingFeedLayoutRenderHandlers[e]=a}handleWaterfallElementRendered(e,a){this.renderedWaterfallElements&&e<this.renderedWaterfallElements.length?a(this.renderedWaterfallElements[e],e):this.pendingWaterfallRenderHandlers[e]=a}isLastResponsePresent(){return!!this.lastResponse}setupSectionScrollMonitoring(e,a,t){const r=(0,Sa.Y9)();document.dispatchEvent(new CustomEvent("feedsectionrenderstart",{detail:{sectionId:a,template:t}}));let i=!1;const n=r[L.p.sectionRenderStart];((e,a)=>{if(!e||!e.length)return;const t=_a(Ha.Ttvr),r=e[e.length-1],i=Ya(r);if(!i)return;if(i.shouldTrack&&!i.shouldTrack(r))return;const n=[i.space,Ga.FeedSectionTtvr];t.track(i.key(r),{spaceNames:n,metadataType:r.type}),t.setCallback(Ga.FeedSectionTtvr,a),setTimeout((()=>{for(const[e]of t.entries())t.markFail(e)}),1e4)})(e,(()=>{if(!i){const e=Math.round(performance.now()-n);document.dispatchEvent(new CustomEvent("feedsectionrenderend",{detail:{sectionId:a,template:t,ttvr:e}})),i=!0}}))}async consumeUnrenderedWaterfallFeedLayout(e,a,t){const r=null==t?void 0:t.shift(),i=null==r?void 0:r.columns;if(!i)return null;const n=(0,Sa.Ou)(),s={c5:[],c4:[],c3:[],c2:[],c1:[]},o=(e,a)=>e.map((e=>e.cards.reduce(((e,t)=>e+(t.height?t.height:a)),0))),d=(e,a)=>{let t={childTemplateMap:this.cardTemplateMap,columns:[],sectionTrackerTag:this.sectionTrackerEnabled?"cs-section-tracker":void 0};const r=[];return["c1","c2","c3","c4","c5"].forEach((t=>{const i=e[t];(null==i?void 0:i.length)>0&&(this.sectionTrackerEnabled&&i.push({childTemplateType:"cs-section-tracker",id:(a+1).toString()}),r.push(i))})),r.length&&(t="infopane-card"===r[0][0].childTemplateType&&r[0][0].cardSize===G.Nv._2x_2y?{childTemplateMap:this.cardTemplateMap,wideColumn:{mainCard:r[0].shift(),size:2},columns:r,sectionTrackerTag:this.sectionTrackerEnabled?"cs-section-tracker":void 0}:{childTemplateMap:this.cardTemplateMap,columns:r,sectionTrackerTag:this.sectionTrackerEnabled?"cs-section-tracker":void 0}),t},l=i.flatMap((e=>e.cards));if(this.config.enableGlobalMonitor)if(e&&function(e,a,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:G.Nv._1x_2y;if(Qa)return;let i=!1,n=0;const s=_a(Ha.Ttvr),o=e.columns;null==o||o.forEach((e=>{let o=0;for(const d of e.cards){const e=d.height?d.height:t;if(n>0&&(o+=n,n=0),d.type===E.PL.Infopane&&r===G.Nv._2x_2y&&(n+=e),!(o<a))break;{o+=e;const a=Ya(d);if(!a)continue;if(a.shouldTrack&&!a.shouldTrack(d))continue;const t=[a.space,Ga.FeedTtvr];s.track(a.key(d),{spaceNames:t,metadataType:d.type}),i=!0,d.isTtvrTracking=!0}}})),i?setTimeout((()=>{for(const[e]of s.entries())s.markFail(e)}),1e4):Za()}(r,this.ttvrHeight,this.config.baseCardSize||jr,this.getInfopaneSize()),this.shouldServeAdsWhenSectionInView(e)){const[e,t]=this.separateAdCardsMetadata(l),r=this.river.length;this.adsServingDeferredMetadata[r]=e,dr(t,a)}else dr(l,a);if(e){this.river=[],this.riverCardCount=0,this.riverSectionIndex=1;const e=e=>e.type===E.PL.TopicFeed,{delayLoadSuInfConCards:t,enableSuperInfopane:r}=this.config,l=[];let u=!1,g=this.config.baseCardSize??jr;i.forEach((i=>{const n=i.cards,o=n.findIndex(ur)>-1||n.findIndex(gr)>-1,d=n.findIndex(e)>-1;if(o||d&&t){u=!0;const o=n.map((a=>{if(ur(a)){var i;const e=null===(i=a.subItems??a.subCards)||void 0===i?void 0:i.map((e=>({...e,subItems:e.subItems??e.subCards})));return g=a.height||g,{...a,subItems:[e[0]],fullSubItems:e}}if(e(a)&&t&&r){var n;const e=a.subCards;return{...a,subCards:null==a||null===(n=a.subCards)||void 0===n?void 0:n.slice(0,1),fullSubItems:e}}return{...a,isFirstSectionCard:!0}})),d=this.mapWaterfallFeedData(o,{region:a,parentTelemetryObject:this[Vr[a]]}),c=this.convertColumnToColumnString(i.column);void 0!==c&&(s[c]=d.defaultLayout),l.push(o)}else{const e=this.mapWaterfallFeedData(n,{region:a,parentTelemetryObject:this[Vr[a]]}),t=this.convertColumnToColumnString(i.column);void 0!==t&&(s[t]=e.defaultLayout),l.push(n)}}));const f=o(i,this.config.baseCardSize||jr);!u||this.getInfopaneSize()!==G.Nv._2x_2y&&this.getInfopaneSize()!==G.Nv._2c||(f[1]+=g);const m=mr(f),v={feedData:s,templateId:"",cardMetadataList:l.flat(),hasPlaceHolderAds:!0,isResponsiveFeed:this.config.enableResponsiveFeed,baseCardSize:this.config.baseCardSize,waterfall:d(s,this.river.length),waterfallFeedColumnsOffset:m};if(this.river=[v],this.waterfall=v.waterfall,u){var c,p,h,C;if(!(0,oa.N)())return;if(window.isSSRCompleted)await(null===(C=ra._U.get("cs-info-pane"))||void 0===C?void 0:C.topDownHydrateComplete.getResultAsync()),n[L.p.isSSRCompleted]&&(0,ba.c)((()=>{const e=n[N.nz+L.p.complete];(0,N.o_)("ViewCards",!1,e,!1),(0,N.o_)("SDCards",!1,e,!1),(0,N.o_)(this.experienceId,!1,e,!1)}));else await(0,z.F_)();this.config.renderAdsBefore2ndInfopane&&!(0,wa.TR)()&&await this.adRenderPipedPromise.getResultAsync();const{cardMetadataList:t=[],hasPlaceHolderAds:r=!0}=this.river[0]??{},i=t.map((a=>(ur(a)&&a.fullSubItems&&(a.subItems=a.fullSubItems,delete a.fullSubItems),e(a)&&a.fullSubItems&&(a.subCards=a.fullSubItems,delete a.fullSubItems),a))),o=this.mapWaterfallFeedData(i,{region:a,parentTelemetryObject:this[Vr[a]]}),l={feedData:o,cardMetadataList:i,hasPlaceHolderAds:r,isResponsiveFeed:this.config.enableResponsiveFeed,baseCardSize:this.config.baseCardSize,waterfall:d(s,this.river.length),waterfallFeedColumnsOffset:m};if(this.vpReadyHelper&&this.vpReadyHelper.track(l),this.river=[l,...this.river.slice(1)],(null===(c=this.waterfall.wideColumn)||void 0===c||null===(p=c.mainCard)||void 0===p?void 0:p.childTemplateType)===(null===(h=o.defaultLayout[0])||void 0===h?void 0:h.childTemplateType))this.waterfall={...this.waterfall,wideColumn:{mainCard:o.defaultLayout.shift(),size:"C1"===this.layout?1:2}};else{const e=o.defaultLayout.find((e=>"infopane-card"===(null==e?void 0:e.childTemplateType)));e&&(this.waterfall.columns.forEach((a=>{a.forEach(((t,r)=>{t.childTemplateType===e.childTemplateType&&(a[r]=e)}))})),this.waterfall={...this.waterfall})}(0,N.su)("InfopaneDataReady",performance.now()),this.weatherHelper.hasWeatherCard(i)&&this.weatherHelper.register(),requestAnimationFrame((()=>(0,N.su)("InfopaneFullyRendered",performance.now())))}}else{this.config.enableSectionScrollMonitoring&&(0,oa.N)()&&this.setupSectionScrollMonitoring(l,this.sectionIdx,"waterfallFeed"),this.config.renderAdsBeforeDeepRiver&&await this.adRenderPipedPromise.getResultAsync(),i.forEach((e=>{const t=this.mapWaterfallFeedData(e.cards,{region:a,parentTelemetryObject:this[Vr[a]],prevCardCount:this.riverCardCount}),r=this.convertColumnToColumnString(e.column);void 0!==r&&(s[r]=t.defaultLayout),this.riverCardCount+=e.cards.length}));const t=mr(o(i,this.config.baseCardSize||jr),this.river[this.riverSectionIndex-1].waterfallFeedColumnsOffset),r={feedData:s,templateId:"",cardMetadataList:l,hasPlaceHolderAds:!0,isResponsiveFeed:this.config.enableResponsiveFeed,baseCardSize:this.config.baseCardSize,waterfall:d(s,this.river.length),waterfallFeedColumnsOffset:t};this.vpReadyHelper&&this.vpReadyHelper.track(r),n[L.p.secondSectionRenderEnd]=Math.round((0,Sa.UE)());const c=this.waterfall.columns;r.waterfall.columns.forEach(((e,a)=>{c[a]=c[a].concat(e)})),this.river=[...this.river,r],this.waterfall={...this.waterfall,columns:c},this.riverSectionIndex++,this.config.renderAdsBeforeDeepRiver&&this.feedEventAggregator.publish(u.OnFeedRendered,{isFirstRender:e})}}convertColumnToColumnString(e){const a={1:aa.K$.c1,2:aa.K$.c2,3:aa.K$.c3,4:aa.K$.c4,5:aa.K$.c5};if(void 0!==e)return a[e]??void 0}getInfopaneSize(){return"C1"===this.layout?G.Nv._1x_2y:G.Nv._2x_2y}simulateCardSlot(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:304,t=arguments.length>2?arguments[2]:void 0;const r="slot"+e.toString();let i=la.no[a]||la.no[304];return t&&(i=this.getInfopaneSize()),{grid_area:r,layouts:{C1:i}}}ingestUnrenderedWaterfallSection(e,a){const t=this.unrenderedRegionsData.find((a=>a.region===e));if(null!=t&&t.waterfallSections){const e=a.map((e=>({columns:e})));t.waterfallSections=t.waterfallSections.concat(e)}else{const t=a.map((e=>({columns:e})));this.unrenderedRegionsData.push({region:e,waterfallSections:t})}const r=[];a.forEach((e=>{r.concat(e.flat())})),this.sdCardHelper.addSDCard(r),this.config.proactiveRenderingWhenIdle&&Xr(this.config.proactiveRenderDelay).then(this.proactivelyRenderRiverWhenIdle)}convertWaterfallFallback(e,a,t){const r=Array.from({length:a},((e,a)=>({column:a+1,cards:[]})));let i=["ColumnBasedLayout"];null==t&&(i=null==e?void 0:e.map((e=>null==e?void 0:e.layoutTemplate))),Y.M0.sendAppErrorEvent({...S.lxm,message:"Received column count doesn't match feed columns",pb:{...S.lxm.pb,customMessage:`feed: ${this.layout}, WPO: ${t}, ViewFeed: ${this.experienceId}, Templates: ${i}, Statics: ${this.isStatic}`}});let n=0;return e.forEach((e=>{e.cards.forEach((e=>{r[n].cards.push(e),e.type===E.PL.Infopane&&(e.id||"").indexOf("topstories")<0&&++n,++n,n>=a&&(n=0)}))})),r}divideWaterfallResponse(e,a){if(e.some((e=>e.dataTemplate||e.layoutTemplate||0===e.cards.length))||this.cardsToRenderFromSection<=0)return[];const t=e.flatMap((e=>e.cards)).filter((e=>e.type===E.PL.NativeAd)),r=e.flatMap((e=>e.cards.length)),i=Math.max(...r),n=Math.ceil(i/this.cardsToRenderFromSection),s=Array.from({length:n},(e=>Array.from({length:a},((e,a)=>({column:a+1,cards:[]})))));let o=!1;e.forEach(((e,a)=>{const t=e.cards;let r=0,i=0;for(;t.length;){const e=t.shift();s[r][a].cards.push(e),++i,e.type===E.PL.Infopane&&(o=!0),o&&"C1"!==this.layout&&1===a&&(++i,o=!1),i===this.cardsToRenderFromSection&&(r++,i=0)}})),s.forEach((e=>{e.forEach((e=>{for(let a=0;a<e.cards.length;a++)e.cards[a].type===E.PL.NativeAd&&(e.cards[a]=t.shift())}))}));const d=s[n-1].flatMap((e=>e.cards.length));if(Math.min(...d)<=0&&s.length>=2){const e=s.pop();s[s.length-1].forEach(((a,t)=>{a.cards=a.cards.concat((e||[])[t].cards||[])}))}return s}}(0,R.gn)([Mr.LO],Yr.prototype,"riverTelemetry",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"RailTelemetry",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"overlayTelemetry",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"rightrailTelemetry",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"bannerTelemetry",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"backupTelemetry",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"coachmarkTelemetry",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"headerTelemetry",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"notificationTelemetry",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"loadingPlaceholderTelemetry",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"river",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"waterfall",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"riverPlaceholderData",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"overlay",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"rightrail",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"Rail",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"banner",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"backup",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"coachmark",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"header",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"notification",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"layout",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"sdCardMenuProps",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"sdCardMenuOpen",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"userContext",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"fallbackFeed",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"isUpdateRegionsDataLoading",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"showFREConfirmation",void 0),(0,R.gn)([Mr.LO],Yr.prototype,"hasCardsInLastResponse",void 0);class ei extends Yr{constructor(){super(...arguments),this.taboolaSessionId="init",this.cardDataMapperMap=r.E,this.cardTemplateMap=C,this.riverContentExhausted=!1}subscribeFeedEvent(){this.feedEventAggregator.subscribe(u.OnFeedResponseRetrieved,(e=>{let{response:a}=e;if(a){const{adsMetadata:e}=a;e&&e.taboola&&e.taboola.sessionId&&(this.taboolaSessionId=e.taboola.sessionId),this.config.sendAdServedBeaconWhenConsumeSection||this.processNativeAdPlacement(a),this.layout===v.Kx.C5&&this.isStatic&&this.updateLayout(v.Kx.C4)}this.responseContainsCardsData(a)||this.setFallbackFeed(a)})),this.feedEventAggregator.subscribe(u.BeforeUpdateLayout,(e=>{let{layoutResFromFeedEvent:a}=e;a.oldLayout===v.Kx.C5&&this.isStatic&&(a.layout=v.Kx.C4)})),this.feedEventAggregator.subscribe(u.OnParametersReset,(()=>{this.riverContentExhausted=!1}))}initHelpers(){}initProvider(){this.dataProvider=new y.U(!0)}async initFeedBehavior(){this.adRenderPipedPromise.set()}processNativeAdPlacement(e){var a;const t=e=>{g.J[null==e?void 0:e.type]===f.U.nativeAdCard&&(0,m.gs)(e,this.config&&this.config.adBeaconServiceConfig)};null===(a=e.sections)||void 0===a||a.forEach((e=>{var a;null==e||null===(a=e.subSections)||void 0===a||a.forEach((e=>{var a;null==e||null===(a=e.cards)||void 0===a||a.forEach(t)}))}))}async fetchFeed(){var e;if(this.riverContentExhausted)return;const a=null===(e=this.lastResponse)||void 0===e?void 0:e.nextPageUrl;if(this.isLastResponsePresent()&&!a)return;this.isFetching=!0;const{enableWpoAdPlacements:t,riverSectionCardProviderConfig:r}=this.config,i={...r&&r.initialRequest,nextPageUrl:a,useNextPageUrl:!!a,enableWpoAdPlacements:t,taboolaSessionId:t?this.taboolaSessionId:void 0,enableRightRailColumnLayout:this.config.enableRightRailColumnLayout,useSuperFeed:!0,isXFeed:this.isXFeed,feedId:this.feedId};try{const e=await this.dataProvider.fetch(i,this.preloadLikelyExperienceBundles);return this.responseContainsCardsData(e)?(this.lastResponse=e,e):(this.riverContentExhausted=!0,this.isLastResponsePresent()||(null!=e&&e.userEndError?Y.M0.sendAppErrorEvent({...S.Fpd,message:"Showing blank page for issue on user's end",pb:S.Fpd.pb}):Y.M0.sendAppErrorEvent({...S.z7w,message:"Feed rendered blank",pb:{...S.z7w.pb,userImpact:!0,associatedAppError:e&&e.appError}})),void this.ttvrHelper.releaseUIDependencies(!0))}catch(e){}finally{this.isFetching=!1}}}},96596:function(e,a,t){var r,i,n,s,o,d,l;t.d(a,{q:function(){return s}}),function(e){e.Article="article",e.Gallery="gallery",e.Video="video",e.Win32="win32",e.UWP="uwp",e[e.Module=8]="Module",e[e.ActionButton=11]="ActionButton",e[e.Navigation=14]="Navigation",e[e.WebView=31]="WebView",e[e.SmartList=35]="SmartList"}(r||(r={})),function(e){e[e.Taboola=0]="Taboola",e[e.Outbrain=1]="Outbrain",e[e.MediaNet=2]="MediaNet",e[e.Editor=3]="Editor",e[e.Personalization=4]="Personalization",e[e.Autocuration=5]="Autocuration"}(i||(i={})),function(e){e[e.MUID=0]="MUID",e[e.ANID=1]="ANID",e[e.AAD=2]="AAD"}(n||(n={})),function(e){e.StartPage="startpage",e.SpartanDhp="default",e.SpartanNtp="default",e.ArticleVnext="article_vnext",e.GalleryVnext="gallery_vnext",e.GalleryClassic="gallery_classic",e.GalleryFlex="gallery_flex",e.ArticleFlex="article_flex",e.StockDetailsPage="stockdetails",e.TeamStatsPage="teamstats",e.Xfeed="xfeed",e.Interests="cinterests"}(s||(s={})),function(e){e.DHP="dhp",e.NTP="ntp",e.Article="article",e.Gallery="gallery",e.Video="video"}(o||(o={})),function(e){e.Emmx="emmx",e.Prime="prime",e.Spartan="spartan",e.ChromeExt="chromeext",e.IEExt="ieext"}(d||(d={})),function(e){e[e.Empty=0]="Empty",e[e.SearchBox=1]="SearchBox",e[e.TopSites=2]="TopSites",e[e.Suggested=4]="Suggested",e[e.ContentFeed=8]="ContentFeed",e[e.WinFRE=16]="WinFRE"}(l||(l={}))},27545:function(e,a,t){t.d(a,{H:function(){return s},a:function(){return r}});var r,i=t(80293);!function(e){e[e.IsSignedIn=1]="IsSignedIn",e[e.CookieConsentStatus=2]="CookieConsentStatus",e[e.OnetrustActiveCookieGroups=3]="OnetrustActiveCookieGroups",e[e.IsDarkMode=4]="IsDarkMode",e[e.ColumnArrangement=5]="ColumnArrangement",e[e.CurrentRoute=6]="CurrentRoute",e[e.TopicData=7]="TopicData",e[e.IsDocumentVisible=8]="IsDocumentVisible",e[e.IsSingleColumn=9]="IsSingleColumn"}(r||(r={}));class n extends i.v{subscribe(e,a){this.has(e)||(e===r.IsDarkMode&&this.initBrowserThemeListener(),e===r.IsDocumentVisible&&this.initBrowserVisibilityListener()),super.subscribe(e,a)}initBrowserThemeListener(){const e=matchMedia("(prefers-color-scheme:dark)");this.set(r.IsDarkMode,e.matches),e.onchange=e=>{this.set(r.IsDarkMode,e.matches)}}initBrowserVisibilityListener(){this.set(r.IsDocumentVisible,"visible"===document.visibilityState),document.addEventListener("visibilitychange",(()=>{this.set(r.IsDocumentVisible,"visible"===document.visibilityState)}))}}const s=new n("AppState")},22914:function(e,a,t){t.d(a,{T:function(){return r}});const r=Object.freeze(function(){var e,a;const t=JSON.parse((null===(a=null===(e=document.head)||void 0===e?void 0:e.dataset)||void 0===a?void 0:a.clientSettings)||"{}"),r={activityId:t.aid||"",appType:t.apptype,categoryKey:t.categoryKey,pageType:t.pagetype,verticalKey:t.verticalKey||t.vk,ocid:t.ocid};try{if(t.locale)r.market=`${t.locale.language}-${t.locale.market}`;else{const e=location.pathname.split("/");e&&e[1]&&(r.market=e[1].toLowerCase())}}catch(e){}return r}())},95438:function(e,a,t){var r,i;t.d(a,{F:function(){return r}}),function(e){e[e.InvalidRequest=0]="InvalidRequest",e[e.Success=1]="Success",e[e.NoContent=2]="NoContent",e[e.Failed=3]="Failed"}(r||(r={})),function(e){e.river="river",e.rightRail="rightrail",e.Rail="Rail"}(i||(i={}))},28052:function(e,a,t){var r;t.d(a,{y:function(){return r}}),function(e){e[e.Router=0]="Router",e[e.ExternalLink=2]="ExternalLink",e[e.PrimeExternalLink=3]="PrimeExternalLink"}(r||(r={}))},65518:function(e,a,t){t.d(a,{Nd:function(){return g}});var r=t(22914),i=t(27545),n=t(28052),s=t(33779),o=t(5302),d=t(81586),l=t(5884),c=t(22944),p=t(78058),h=t(24589);const C=["ocid","item","pcsonly","fdhead","pc"],u=["personalize","my-saves","experience-settings","history","notification"];const g=new class{constructor(){this.contextualNavMap=new Map,this.hamburgerMenuMap=new Map,this.market=r.T.market,this.refIds=[],this.currentUrl=new URL(window.location.href.toLowerCase()),this.currentSearchParams=new URLSearchParams(window.location.search.toLowerCase())}init(e){!this.options&&e&&(this.options=e,this.config=e.config,this.options.localizedStrings=this.options.localizedStrings||{},"/"===window.location.pathname&&(window.location.pathname=`/${this.market}${e.basePath||""}`),this.currentUrl.searchParams.delete("spapage"),this.currentSearchParams.forEach(((e,a)=>{-1===C.indexOf(a)&&this.currentUrl.searchParams.delete(a)})),this.setRoutes(this.config),this.currentRoute&&(i.H.set(i.a.CurrentRoute,this.currentRoute),this.currentRoute.renderInfo.renderType===n.y.Router&&window.history.replaceState(this.currentRoute,"",this.currentRoute.destinationUrl)))}subscribe(e){(e||"function"==typeof e)&&i.H.subscribe(i.a.CurrentRoute,e)}getCurrentRoute(){return i.H.get(i.a.CurrentRoute)}navigate(e,a){const t=i.H.get(i.a.CurrentRoute);if(t&&t.id===e)return;const r=this.getRouteById(e);if(!r)return;const n=new URL(r.destinationUrl);n.hash&&(n.hash="",r.destinationUrl=decodeURIComponent(n.toString()));const s=Object.assign(Object.assign({},r),{dynamicContext:a});history.pushState(s,r.display,r.destinationUrl),i.H.set(i.a.CurrentRoute,s)}getRouteById(e){return this.contextualNavMap.get(e)||this.hamburgerMenuMap.get(e)}addRouteToContextualNavMap(e,a){this.contextualNavMap.set(e,a)}preserveQueryParams(e){const a=e.searchParams;this.currentUrl.search&&this.currentUrl.searchParams.forEach(((t,r)=>{r=r.toLowerCase(),-1===a.getAll(r).indexOf(t)&&e.searchParams.append(r,t)})),!e.searchParams.get("ocid")&&this.options.ocid&&e.searchParams.set("ocid",this.options.ocid),!e.searchParams.get("pc")&&this.options.pc&&e.searchParams.set("pc",this.options.pc)}getQueryParamValue(e){return this.currentSearchParams.get(e)}getUrlInfo(e){const{renderType:a,path:t,externalUrl:r}=e.renderInfo;if(a===n.y.Router){if(e.id===this.config.homeNavigationItem.id)return this.getHomePageUrl();const a=`${0===t.indexOf("personalize")?"":"/interest"}/${t}`;return{url:`${window.location.origin}/${this.market}/feed${a}${this.currentUrl.search}${window.location.hash}`,path:`/${this.market}/feed${a}`}}let i;try{i=new URL(r)}catch(e){(0,s.OO)(e,o.Yg3,"Invalid URL being used",r)}return-1===i.hostname.indexOf(".msn.com")&&-1===i.hostname.indexOf(".msn.cn")||(i.hostname!==window.location.hostname&&(i=new URL(`${i.pathname}${i.search}`,window.location.origin)),this.preserveQueryParams(i)),{url:decodeURIComponent(i.toString()),path:i.pathname,searchParams:i.searchParams}}setRoutes(e){if(!e)return;const{contextualNavItems:a=[],hamburgerMenuItems:t=[],homeNavigationItem:r,interestsNavigationItem:i,followingNavigationItem:n}=e;r&&t.length&&a.length&&(this.buildNavMap(this.contextualNavMap,r),n&&this.buildNavMap(this.contextualNavMap,n),this.mapChildItems(this.hamburgerMenuMap,t),this.mapChildItems(this.contextualNavMap,a),this.buildNavMap(this.contextualNavMap,i),this.refIds.length&&this.refIds.forEach((e=>{const a=`${e}-ref`;this.contextualNavMap.set(a,Object.assign(Object.assign({},this.getRouteById(e)),{id:a}))})))}processRoute(e,a){const{id:t,display:r,displayKey:i,telemetryInfo:n,interestsWCConfigRefType:s}=e,o=i?this.options.localizedStrings[i]:r,c=this.getUrlInfo(e),h=decodeURIComponent(c.url),C=(null==n?void 0:n.navItemName)?n.navItemName:o,g=s&&u.includes(t)?(0,l.Eo)(s):void 0;g&&e.renderInfo&&(e.renderInfo.experienceConfigRef=g);const f=Object.assign(Object.assign({},e),{display:o,destinationUrl:h,parentId:a,telemetryMetadata:new p.D({name:C,action:d.Aw.Click,behavior:d.wu.Navigate,content:{headline:o},destinationUrl:h,overrideDestinationUrl:h,feed:{id:t,name:o,type:"category filter"}}).getMetadata()});return this.currentRoute&&this.currentRoute.id!==t||this.detectCurrentRoute(f,c.path,c.searchParams),f}detectCurrentRoute(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0;a=a.toLowerCase();const r=this.currentUrl.pathname;if(e.selectForSubPaths&&r.startsWith(a))this.currentRoute=e;else if(r===a||r===`${a}/`){let a=!1;if(t&&t.toString()&&t.forEach(((e,t)=>{t=t.toLowerCase(),-1===this.currentSearchParams.getAll(t).indexOf(e.toLowerCase())&&(a=!0)})),a)return;this.currentRoute=e}}buildNavMap(e,a){if(!a)return;const{id:t,children:r=[],navRefId:i}=a;i?this.refIds.push(i):(e.set(t,this.processRoute(a)),this.mapChildItems(e,r,a.id))}mapChildItems(e){let a=arguments.length>2?arguments[2]:void 0;(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).forEach((t=>{if(t.navRefId)return void this.refIds.push(t.navRefId);e.set(t.id,this.processRoute(t,a));const{children:r}=t;r&&r.length&&this.mapChildItems(e,r,t.id)}))}getHomePageUrl(){return(0,h.Jn)(this.currentSearchParams)||c.jG.isMobile?{url:`https://www.msn.${window.location.hostname.endsWith(".cn")?"cn":"com"}/${this.market}${this.currentUrl.search}`,path:this.market}:{url:`${window.location.origin}/${this.market}/feed${this.currentUrl.search}`,path:`/${this.market}/feed`}}}}}]);