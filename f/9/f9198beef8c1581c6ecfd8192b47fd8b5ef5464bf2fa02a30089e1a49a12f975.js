(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{182:function(t,n,e){"use strict";e.d(n,"c",function(){return p}),e.d(n,"e",function(){return d}),e.d(n,"b",function(){return b}),e.d(n,"d",function(){return v}),e.d(n,"a",function(){return O});var r=e(2),c=e.n(r),a=e(3),u=e(23),o=e(6),i=e(7),s=e(28),f=e(25),p=function(t){var n=Object(i.a)();return fetch("".concat(o.a.tourAPI,"/accounts/").concat(encodeURIComponent(t)),{headers:n,credentials:"include"}).then(.then(function(t){return t})},d=function(t){var n=t.accountId,e=t.userId,r=t.packageQuantity,c=t.newTier,a=t.accountName,s=Object(i.a)();return fetch("".concat(o.a.accountsAPI,"/api/admin/accounts/tour/upgrade/").concat(encodeURIComponent(e)),{method:"POST",headers:s,body:JSON.stringify(t),credentials:"include"}).then(function(t){return t.json()}).then(function(t){if("string"===typeof t)return t;var e=t.stripeResponse,o=t.newPermissions,i=e;return u.a.push("/home/settings/subscription"),Object.assign({},{name:a,aid:n,stripeId:i.id,tier:c,packageQuantity:r,tierPermissions:o,customer:i})})},b=function(t,n){var e=new Headers,r=s.a.token;e.append("Authorization","Bearer ".concat(r));var c=[];if(n){var a=encodeURIComponent(n);c.push("search=".concat(a))}t&&c.push("start=".concat(t));var u=c.length?"".concat(o.a.tourAPI,"/admin/v2/accounts?sort=name asc, tier asc&").concat(c.join("&")):"".concat(o.a.tourAPI,"/admin/v2/accounts?sort=name asc, tier asc");return fetch(encodeURI(u),{headers:e,credentials:"include"}).then(function(t){return t.json()}).then(function(t){return t}).catch(},v=function(){var t=Object(a.a)(c.a.mark(function t(n){var e,r,a,u=arguments;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=u.length>1&&void 0!==u[1]&&u[1],r=Object(i.a)(),t.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/accounts/").concat(encodeURIComponent(n)),{headers:r,credentials:"include"});case 4:return a=t.sent,t.next=7,Object(f.a)(a,e);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return function(n){return t.apply(this,arguments)}}(),O=function(t,n){var e=Object(i.a)();return fetch("".concat(o.a.accountsAPI,"/api/v2/").concat(encodeURIComponent(t),"/settings/ga"),{headers:e,method:"PUT",body:JSON.stringify(n),credentials:"include"}).then(function(t){return t.json()}).then(function(t){return t}).catch(}},195:function(t,n,e){"use strict";var r=e(2),c=e.n(r),a=e(3),u=e(6),o=e(7),i=function(){var t=Object(a.a)(c.a.mark(function t(n){var e,r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(o.a)(),t.prev=1,t.next=4,fetch("".concat(u.a.accountsAPI,"/api/admin/accounts/tour/").concat(encodeURIComponent(n.userId),"/source/update"),{method:"POST",headers:e,body:JSON.stringify(n),credentials:"include"});case 4:return r=t.sent,t.next=7,r.json();case 7:if(!(a=t.sent).errorMessage){t.next=10;break}return t.abrupt("return",a.errorMessage);case 10:return t.abrupt("return",a);case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt("return",t.t0);case 16:case"end":return t.stop()}},t,null,[[1,13]])}));return function(n){return t.apply(this,arguments)}}(),s=function(){var t=Object(a.a)(c.a.mark(function t(n){var e,r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(o.a)(),t.prev=1,t.next=4,fetch("".concat(u.a.accountsAPI,"/api/admin/accounts/tour/").concat(encodeURIComponent(n.userId),"/source/new"),{method:"POST",headers:e,body:JSON.stringify(n),credentials:"include"});case 4:return r=t.sent,t.next=7,r.json();case 7:if(!(a=t.sent).errorMessage){t.next=10;break}return t.abrupt("return",a.errorMessage);case 10:return t.abrupt("return",a);case 13:return t.prev=13,t.t0=t.catch(1),t.abrupt("return",t.t0);case 16:case"end":return t.stop()}},t,null,[[1,13]])}));return function(n){return t.apply(this,arguments)}}(),f=function(){var t=Object(a.a)(c.a.mark(function t(n){var e,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=Object(o.a)(),t.prev=1,t.next=4,fetch("".concat(u.a.accountsAPI,"/api/admin/accounts/tour/payments/").concat(encodeURIComponent(n)),{headers:e,credentials:"include"});case 4:return r=t.sent,t.next=7,r.json();case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}},t,null,[[1,10]])}));return function(n){return t.apply(this,arguments)}}(),p=e(182),d=e(197),b=e(36);e.d(n,"f",function(){return O}),e.d(n,"e",function(){return h}),e.d(n,"c",function(){return l}),e.d(n,"h",function(){return y}),e.d(n,"g",function(){return m}),e.d(n,"b",function(){return j}),e.d(n,"d",function(){return I}),e.d(n,"a",function(){return S});var v=function(t){return{type:"SAVE_PAYMENT_INFO",data:t}},O=function(t){return{type:"SET_STRIPE_ERROR",error:t}},h=function(t){return{type:"SAVE_ACCOUNT_INFO",stripeId:t.stripeId,status:t.status,tier:t.tier,packageQuantity:t.packageQuantity,permissions:t.tierPermissions||{},payment:t.customer,aid:t.aid,name:t.name,gaId:t.gaId,mapboxToken:t.mapboxToken}},l=function(t,n){return function(e){Object(p.b)(t,n).then(function(t){e({type:"SAVE_ALL_ACCESSIBLE_ACCOUNTS",accounts:t})})}},y=function(t){return function(n){n({type:"ACCOUNT_UPDATING"}),Object(p.e)(t).then(function(e){n(Object(d.c)(t.newTier)),"string"===typeof e?Object(b.b)(function(){n(O(e)),n({type:"ACCOUNT_UPDATING"})}):Object(b.b)(function(){n(h(e)),n({type:"ACCOUNT_UPDATING"})})})}},m=function(t){return function(n){n({type:"ACCOUNT_UPDATING"}),i(t).then(function(e){"string"===typeof e?Object(b.b)(function(){n(O(e)),n({type:"ACCOUNT_UPDATING"})}):(Object(b.b)(function(){n(v(e)),n({type:"ACCOUNT_UPDATING"})}),"function"===typeof t.callback&&t.callback())})}},j=function(t){return function(n){n({type:"ACCOUNT_UPDATING"}),s(t).then(function(e){"string"===typeof e?(Object(b.b)(,n(O(e)),n({type:"ACCOUNT_UPDATING"})):(Object(b.b)(function(){n(v(e)),n({type:"ACCOUNT_UPDATING"})}),"function"===typeof t.callback&&t.callback())})}},I=function(t){return function(n){f(t).then(}},S=function(t,n){return function(e){e({type:"ACCOUNT_UPDATING"}),Object(p.a)(t,n).then(function(t){Object(b.b)(function(){e({type:"UPDATE_GAID",gaId:t.gaId}),e({type:"ACCOUNT_UPDATING"})})})}}},197:function(t,n,e){"use strict";e.d(n,"b",function(){return f}),e.d(n,"a",function(){return p}),e.d(n,"c",function(){return d});var r=e(2),c=e.n(r),a=e(3),u=e(36),o=e(170),i=e(162),s=e(158),f=function(t,n){return function(e){Object(o.c)(t).then(function(t){var r=t.tour;Object(u.b)(function(){e(Object(s.h)(r)),e(Object(i.b)(!0))}),"function"===typeof n&&n()})}},p=function(t){return function(){var n=Object(a.a)(c.a.mark(function n(e){var r;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(o.b)(t);case 2:r=n.sent,e(b(r));case 4:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()},d=function(t){return function(n,e){var r=Object.values(e().tourData.tours).filter(function(t){return t.published}).map(;Promise.all(r.map(function(){var n=Object(a.a)(c.a.mark(function n(e){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(o.f)(e,t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()))}},b=function(t){return{type:"SAVE_PUBLIC_TOUR",aid:t.aid,id:t.id,panos:t.panos,images:t.images,videos:t.videos,audio:t.audio,stops:t.stops,tours:t.tourData,tier:t.tier,active:t.active,gaId:t.gaId,mapboxToken:t.mapboxToken}}},206:function(t,n,e){"use strict";e.d(n,"a",function(){return i});var r,c=e(2),a=e.n(c),u=e(3),o=e(38),i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:120;return function(){var n=Object(u.a)(a.a.mark(function n(e){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r&&clearInterval(r),e(s()),r=setInterval(1e3*t);case 3:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()},s=function(){return function(){var t=Object(u.a)(a.a.mark(function t(n){var e;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.a();case 2:e=t.sent,n(f(e));case 4:case"end":return t.stop()}},t)}));return function(n){return t.apply(this,arguments)}}()},f=function(t){return{type:"SAVE_ACTIVE_SESSIONS",data:t}}},218:function(t,n,e){"use strict";var r=e(2),c=e.n(r),a=e(3),u=e(36),o=e(170),i=e(6),s=e(7),f=e(162),p=e(195),d=e(182),b=e(158),v=e(220),O=e(206),h=e(263);e.d(n,"a",function(){return l}),e.d(n,"d",function(){return y}),e.d(n,"b",function(){return m}),e.d(n,"e",function(){return j}),e.d(n,"g",function(){return S}),e.d(n,"f",function(){return A}),e.d(n,"h",function(){return T}),e.d(n,"c",function(){return g});var l=function(t){return function(){var n=Object(a.a)(c.a.mark(function n(e,r){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(d.c)(t).then(function(t){var n=r().media.mediaFetched;t.aid&&Object(u.b)(function(){e(j(t)),!n&&e(Object(f.d)(t))})});case 2:case"end":return n.stop()}},n)}));return function(t,e){return n.apply(this,arguments)}}()},y=m=function(t,n){return function(){var e=Object(a.a)(c.a.mark(function e(r){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.d)(t);case 3:(a=e.sent)?a.aid&&(localStorage.setItem("aid",a.aid),Object(u.b)(function(){r(Object(p.e)(a)),r(Object(v.a)()),r(Object(b.e)(a.aid,!0)),r(Object(f.b)(!0)),r(Object(O.a)()),r(Object(h.e)())}),localStorage.setItem("accountSwapped","true"),"function"===typeof n&&n()):r({type:"TOUR_ACCOUNT_SWAP_ERROR",value:!0}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r({type:"TOUR_ACCOUNT_SWAP_ERROR",value:!0});case 10:case"end":return e.stop()}},e,null,[[0,7]])}));return function(t){return e.apply(this,arguments)}}()},j=I=function(t){var n=t.tourId;return{type:"SAVE_ACCOUNT_TOUR",tour:t.tour,tourId:n}},S=function(t){return function(){var n=Object(a.a)(c.a.mark(function n(e){return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(o.e)(t).then(function(t){var n=t.tourId,r=t.updatedTour;e(I({tourId:n,tour:r}))});case 2:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()},A=function(t){return function(n){(function(t){var n=t,e=Object(s.a)();return fetch("".concat(i.a.tourAPI,"/allstops"),{method:"POST",headers:e,body:JSON.stringify(n),credentials:"include"}).then(.then(})(t).then(function(t){var e;n({type:"SAVE_NEW_STOP_ORDER",tour:(e=t).tour,tourId:e.tourId})})}},T=function(){return{type:"SHOW_STOP_DESCRIPTION"}},g=function(){return{type:"HIDE_STOP_DESCRIPTION"}}},220:function(t,n,e){"use strict";e.d(n,"d",function(){return v}),e.d(n,"c",function(){return h}),e.d(n,"e",function(){return l}),e.d(n,"b",function(){return m}),e.d(n,"a",function(){return j});var r=e(2),c=e.n(r),a=e(3),u=e(36),o=e(22),i=e(182),s=(e(218),e(195)),f=e(158),p=e(162),d=e(206),b=function(t){return{type:"SAVE_POLICY_STATUS",privacyPolicy:t}},v=function(t){return{type:"SAVE_USER_CREDS",data:t}},O=function(t){var n=t.permissions;return{type:"SET_USER_PERMISSIONS",permissions:void 0===n?{}:n}},h=function(t,n){return function(){var e=Object(a.a)(c.a.mark(function e(r){var a,i,s,O,h,l;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.b)(t);case 2:(i=e.sent).privacyPolicy||"function"===typeof n&&n(),s=Boolean(null===i||void 0===i?void 0:null===(a=i.roles)||void 0===a?void 0:a.find(),O=i.accounts[0],localStorage.setItem("default-aid",O),localStorage.setItem("uid",t),(!(h=localStorage.getItem("aid"))||h&&!s)&&localStorage.setItem("aid",O),l=localStorage.getItem("aid"),Object(u.b)(function(){s&&r({type:"SET_ROOT_ADMIN"}),r(v(i)),r(y()),r(b(i.privacyPolicy)),r(Object(f.e)(l)),r(Object(p.b)(!0)),r(j()),r(Object(d.a)())});case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},l=function(t){return function(){var n=Object(a.a)(c.a.mark(function n(e){var r;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(o.l)(t);case 2:(r=n.sent)&&Object(u.b)(;case 4:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()},y=function(){return function(){var t=Object(a.a)(c.a.mark(function t(n){var e,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=localStorage.getItem("aid"),t.next=3,Object(i.d)(e);case 3:return r=t.sent,t.next=6,n(Object(s.e)(r));case 6:case"end":return t.stop()}},t)}));return function(n){return t.apply(this,arguments)}}()},m=function(t){return function(){var n=Object(a.a)(c.a.mark(function n(e){var r;return c.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(o.b)(t);case 2:r=n.sent,e(v(r));case 4:case"end":return n.stop()}},n)}));return function(t){return n.apply(this,arguments)}}()},j=function(t){return function(){var t=Object(a.a)(c.a.mark(function t(n){var e,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(o.e)();case 2:e=t.sent,(r=e[localStorage.getItem("aid")])&&n(O(r));case 5:case"end":return t.stop()}},t)}));return function(n){return t.apply(this,arguments)}}()}},263:function(t,n,e){"use strict";var r=e(2),c=e.n(r),a=e(3),u=e(22),o=e(6),i=e(7),s=e(25),f=function(){var t=Object(a.a)(c.a.mark(function t(n){var e,r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=n||localStorage.getItem("aid"),r=Object(i.a)(),t.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/accounts/").concat(e,"/users"),{method:"GET",headers:r});case 4:return a=t.sent,t.next=7,Object(s.a)(a);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return function(n){return t.apply(this,arguments)}}(),p=function(){var t=Object(a.a)(c.a.mark(function t(n,e){var r,a,u;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e||localStorage.getItem("aid"),a=Object(i.a)(),t.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/accounts/").concat(r,"/users"),{method:"POST",headers:a,body:JSON.stringify(n)});case 4:return u=t.sent,t.next=7,Object(s.a)(u);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return function(n,e){return t.apply(this,arguments)}}(),d=function(){var t=Object(a.a)(c.a.mark(function t(n,e,r){var a,u,f;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r||localStorage.getItem("aid"),u=Object(i.a)(),t.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/accounts/").concat(a,"/users/").concat(n),{method:"PUT",headers:u,body:JSON.stringify(e)});case 4:return f=t.sent,t.next=7,Object(s.a)(f);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return (),b=function(){var t=Object(a.a)(c.a.mark(function t(n,e){var r,a,u;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e||localStorage.getItem("aid"),a=Object(i.a)(),t.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/accounts/").concat(r,"/users/").concat(n),{method:"DELETE",headers:a});case 4:return u=t.sent,t.next=7,Object(s.a)(u);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return function(n,e){return t.apply(this,arguments)}}(),v=function(){var t=Object(a.a)(c.a.mark(function t(n){var e,r,a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=n||localStorage.getItem("aid"),r=Object(i.a)(),t.next=4,fetch("".concat(o.a.accountsAPI,"/api/admin/v2/accounts/").concat(e,"/roles"),{method:"GET",headers:r});case 4:return a=t.sent,t.next=7,Object(s.a)(a);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},t)}));return function(n){return t.apply(this,arguments)}}();e.d(n,"d",function(){return h}),e.d(n,"c",function(){return l}),e.d(n,"a",function(){return y}),e.d(n,"h",function(){return m}),e.d(n,"b",function(){return j}),e.d(n,"f",function(){return I}),e.d(n,"e",function(){return x}),e.d(n,"g",;var O="Something went wrong! Please try again",h=function(){return function(){var t=Object(a.a)(c.a.mark(function t(n,e){return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(_()),t.prev=1,t.next=4,f();case 4:t.sent.forEach(function(t){n(S(t))}),n(C()),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),n(w(t.t0.errorMessage||O));case 12:case"end":return t.stop()}},t,null,[[1,9]])}));return function(n,e){return t.apply(this,arguments)}}()},l=function(){return function(){var t=Object(a.a)(c.a.mark(function t(n,e){var r,a,u,o,i;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n(_()),t.prev=1,t.next=4,v();case 4:r=t.sent,a=r.roles,u=void 0===a?[]:a,o=r.assignments,i=void 0===o?[]:o,u.forEach(function(t){n(A(t))}),i.forEach(,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n(w(t.t0.errorMessage||O));case 16:case"end":return t.stop()}},t,null,[[1,13]])}));return function(n,e){return t.apply(this,arguments)}}()},y=function(t,n){return function(){var e=Object(a.a)(c.a.mark(function e(r,a){var u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(_()),e.next=4,p(t);case 4:r(C()),"function"===typeof n&&n(),r(h()),r(l()),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),u=e.t0.errorMessage||O,r(w(u,e.t0.status));case 14:case"end":return e.stop()}},e,null,[[0,10]])}));return function(t,n){return e.apply(this,arguments)}}()},m=function(t,n,e){return function(){var r=Object(a.a)(c.a.mark(function r(a,u){var o;return c.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a(_()),r.next=4,d(t,n);case 4:a(C()),"function"===typeof e&&e(),a(h()),a(l()),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),o=r.t0.errorMessage||O,a(w(o,r.t0.status));case 14:case"end":return r.stop()}},r,null,[[0,10]])}));return function(t,n){return r.apply(this,arguments)}}()},j=function(t,n){return function(){var e=Object(a.a)(c.a.mark(function e(r,a){var u;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(_()),e.next=4,b(t);case 4:r(g(t)),r(C()),"function"===typeof n&&n(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),u=e.t0.errorMessage||O,r(w(u,e.t0.status));case 13:case"end":return e.stop()}},e,null,[[0,9]])}));return ()},I=function(t,n){return function(){var e=Object(a.a)(c.a.mark(function e(r){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(_()),e.next=4,Object(u.j)(t);case 4:r(C()),"function"===typeof n&&n(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),a=e.t0.errorMessage||O,r(w(a,e.t0.status));case 12:case"end":return e.stop()}},e,null,[[0,8]])}));return ()},S=function(t){return{type:"SAVE_ACCOUNT_USER",user:t}},A=function(t){return{type:"SAVE_ACCOUNT_ROLE",role:t}},T=function(t){return{type:"SAVE_ACCOUNT_ASSIGNMENT",assignment:t}},g=x=_=function(){return{type:"ACCOUNT_USERS_STATUS",status:"saving",errorMessage:"",errorCode:""}},C=w=}]);