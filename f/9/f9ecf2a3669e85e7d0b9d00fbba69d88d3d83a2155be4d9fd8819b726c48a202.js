/*! ! built on Wednesday, July 19th 2023, 17:58:35 UTC */
![function(t,e,n){(function(t,i){var r;!function(o){e&&e.nodeType,t&&t.nodeType;var a="object"==typeof i&&i;a.global!==a&&a.window!==a&&a.self;var s,u=2147483647,c=36,l=/^xn--/,d=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,m=String.fromCharCode;:"1.4.1",ucs2:{decode:y,encode:b},decode:L,encode:F,toASCII:toUnicode:,void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()}).call(this,n(8)(t),n(2))},function(t,e,n){var i,r;this||window,void 0===(r="function"==typeof(i=function(){var t=/^(interactive|loaded|complete)$/,e=window.location?window.location.href:null,n=e&&e.replace(/#.*$/,"").replace(/\?.*$/,"")||null,i=document.getElementsByTagName("script"),r="readyState"in(i[0]||document.createElement("script")),o=!window.opera||"[object Opera]"!==window.opera.toString(),a="currentScript"in document;"stackTraceLimit"in Error&&Error.stackTraceLimit!==1/0&&(Error.stackTraceLimit,Error.stackTraceLimit=1/0);var s=!1,u=!1;function c(){if(0===i.length)return null;var e,l,d,f,h,p=[],m=c.skipStackDepth||1;for(e=0;e<i.length;e++)o&&r?t.test(i[e].readyState)&&p.push(i[e]):p.push(i[e]);if(l=new Error,s&&(d=l.stack),!d&&u)try{throw l}catch(t){d=t.stack}if(d&&(!(h=f=function t(e,n){var i,r=null,o="number"==typeof n;return n=o?Math.round(n):0,"string"==typeof e&&e&&(o?i=e.match(/(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/):(i=e.match(/^(?:|[^:@]*@|.+\)@(?=data:text\/javascript|blob|http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/))&&i[1]||(i=e.match(/\)@(data:text\/javascript(?:;[^,]+)?,.+?|(?:|blob:)(?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/)),i&&i[1]&&(n>0?r=t(e.slice(e.indexOf(i[0])+i[0].length),n-1):r=i[1])),r}(d,m),p))&&n&&f===n&&(h=p))),h||1===p.length&&(h=p[0]),h||a&&(h=document.currentScript),!h&&o&&r)for(e=p.length;e--;)if("interactive"===p[e].readyState){h=p[e];break}return h||(h=p[p.length-1]||null),h}((),c.skipStackDepth=1;var l=c;return l.near=c,l.far=function(){return null},l.origin=function(){return null},l})?i.apply(e,[]):i)||(t.exports=r)},function(t,e,n){"use strict";var i=n(0),r=n(1),o=setTimeout;unction s(){}otype.catch=u.prototype.then=u.prototype.finally=i.a,u.all=u.allSettled=r.a,u.resolve=u.reject=u.race=u._immediateFn="function"==typeof setImmediate&&|u._unhandledRejectionFn=e.a=u},function(t,e,n){(function(t){!function(t){"function"!=typeof t.matches&&(t.matches=t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||,"function"!=typeof t.closest&&(t.closest=}(window.Element.prototype),"function"!=typeof Object.assign&&(Object.assign=function(t){"use strict";if(null===t)throw new TypeError("Cannot convert undefined or null to object");t=Object(t);for(var e=1;e<arguments.length;e++){var n=arguments[e];if(null!==n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}),window),function(){if(0=="performance"in window&&(window.performance={}),0=="now"in window.performance){var t=Date.getTime();performance.timing&&performance.timing.navigationStart&&(t=performance.timing.navigationStart),window.performance.now=}()}).call(this,n(10))},function(t,e,n){var i={},r=(),o=),a=null,s=0,u=[],c=n(14);ts=var w=);,function(t,e){"object"==typeof Reflect&&"function"==typeof Reflect.ownKeys?t.exports=Reflect.ownKeys:"function"==typeof Object.getOwnPropertySymbols?t.exports=t.exports=Object.getOwnPropertyNames},function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return vn}));var i={};n.r(i),n.d(i,"GLOBAL_TP",(function(){return s})),n.d(i,"AFFILIATE_URL",(function(){return u})),n.d(i,"ALLOWED_HOSTS",(function(){return c})),n.d(i,"OM_API_DOMAIN",(function(){return l})),n.d(i,"API_DOMAIN",(function(){return d})),n.d(i,"API_URLS",(function(){return f})),n.d(i,"SCRIPT_URLS",(function(){return h})),n.d(i,"WEBFONT_URL",(function(){return p}));var r={};n.r(r),n.d(r,"_func",(function(){return y})),n.d(r,"each",(function(){return b})),n.d(r,"script",(function(){return A})),n.d(r,"randomKey",(function(){return N})),n.d(r,"groupBy",(function(){return S})),n.d(r,"shuffleArray",(function(){return L})),n.d(r,"getSiblingLabel",(function(){return F})),n.d(r,"ruleMatchesCurrentWindow",(function(){return x})),n.d(r,"userAgent",(function(){return T})),n.d(r,"domain",(function(){return _})),n.d(r,"hrefMatchesDomain",(function(){return O})),n.d(r,"urlPathFull",(function(){return k})),n.d(r,"parseUrlPath",(function(){return C})),n.d(r,"urlPath",(function(){return E})),n.d(r,"rawUrlPath",(function(){return P})),n.d(r,"generateLocation",(function(){return j})),n.d(r,"urlHash",(function(){return I})),n.d(r,"getUrlPath",(function(){return D})),n.d(r,"recursiveReplace",(function(){return M})),n.d(r,"cleanPathWithTrailing",(function(){return B})),n.d(r,"cleanPathWithPreceding",(function(){return R})),n.d(r,"cleanPath",(function(){return q})),n.d(r,"normalizeUrl",(function(){return W})),n.d(r,"sleep",(function(){return V})),n.d(r,"referrer",(function(){return U})),n.d(r,"hash",(function(){return G})),n.d(r,"param",(function(){return z})),n.d(r,"isIe11",(function(){return H})),n.d(r,"isIe",(function(){return $})),n.d(r,"isMobile",(function(){return J})),n.d(r,"device",(function(){return K})),n.d(r,"createVisitorId",(function(){return X})),n.d(r,"queryArgs",(function(){return Y})),n.d(r,"addQueryArg",(function(){return Q})),n.d(r,"keys",(function(){return Z})),n.d(r,"values",(function(){return tt})),n.d(r,"globalHideArgs",(function(){return et})),n.d(r,"debugEnabled",(function(){return nt})),n.d(r,"valueExistsInObject",(function(){return it})),n.d(r,"matchingKeys",(function(){return rt})),n.d(r,"toUpperCaseFirst",(function(){return ot})),n.d(r,"convertClassName",(function(){return at})),n.d(r,"convertOperatorType",(function(){return st})),n.d(r,"inArray",(function(){return ut})),n.d(r,"flattenObjectArray",(function(){return ct})),n.d(r,"uniqueArray",(function(){return lt})),n.d(r,"hasClass",(function(){return dt})),n.d(r,"hasClassInList",(function(){return ft})),n.d(r,"hasNameInList",(function(){return ht})),n.d(r,"hasAriaLabelInList",(function(){return pt})),n.d(r,"hasPartialNameInList",(function(){return mt})),n.d(r,"hasPartialClassInList",(function(){return gt})),n.d(r,"hasPartialNameInLabel",(function(){return wt})),n.d(r,"addClass",(function(){return vt})),n.d(r,"removeClass",(function(){return yt})),n.d(r,"time",(function(){return bt})),n.d(r,"on",(function(){return At})),n.d(r,"off",(function(){return Nt})),n.d(r,"windowScrollTop",(function(){return St})),n.d(r,"scrollPercent",(function(){return Lt})),n.d(r,"append",(function(){return Ft})),n.d(r,"prepend",(function(){return xt})),n.d(r,"after",(function(){return Tt})),n.d(r,"before",(function(){return _t})),n.d(r,"next",(function(){return Ot})),n.d(r,"nextAll",(function(){return kt})),n.d(r,"prev",(function(){return Ct})),n.d(r,"extractFirstName",(function(){return Et})),n.d(r,"prevAll",(function(){return Pt})),n.d(r,"css",(function(){return jt})),n.d(r,"empty",(function(){return It})),n.d(r,"replace",(function(){return Dt})),n.d(r,"fromNow",(function(){return Mt})),n.d(r,"fadeIn",(function(){return Bt})),n.d(r,"fadeOut",(function(){return Rt})),n.d(r,"visible",(function(){return qt})),n.d(r,"scroll",(function(){return Wt})),n.d(r,"validEmail",(function(){return Vt})),n.d(r,"remove",(function(){return Ut})),n.d(r,"_el",(function(){return Gt})),n.d(r,"querySelectorAll",(function(){return zt})),n.d(r,"findInputLabel",(function(){return Ht})),n.d(r,"findNameFieldByInputLabel",(function(){return $t})),n.d(r,"normalizeInputField",(function(){return Jt})),n.d(r,"inputLooksValid",(function(){return Kt})),n.d(r,"inputFieldHasUserData",(function(){return Xt})),n.d(r,"isValidURL",(function(){return Yt})),n.d(r,"findElementByTagAndString",(function(){return Qt})),n.d(r,"generateRandomId",(function(){return Zt})),n.d(r,"storageAvailable",(function(){return te})),n.d(r,"getPageTitle",(function(){return ee})),n.d(r,"hasProp",(function(){return ne})),n.d(r,"getDOMElement",(function(){return ie}));var o={};n.r(o),n.d(o,"exactMatch",(function(){return oe})),n.d(o,"notExactMatch",(function(){return ae})),n.d(o,"entityOn",(function(){return se})),n.d(o,"entityNotOn",(function(){return ue})),n.d(o,"contains",(function(){return ce})),n.d(o,"notContains",(function(){return le})),n.d(o,"startsWith",(function(){return de})),n.d(o,"notStartsWith",(function(){return fe})),n.d(o,"endsWith",(function(){return he})),n.d(o,"notEndsWith",(function(){return pe})),n.d(o,"wildcard",(function(){return me})),n.d(o,"empty",(function(){return ge})),n.d(o,"notEmpty",(function(){return we})),n.d(o,"regex",(function(){return ve})),n.d(o,"equals",(function(){return ye})),n.d(o,"notEquals",(function(){return be})),n.d(o,"moreThan",(function(){return Ae})),n.d(o,"lessThan",(function(){return Ne})),n.d(o,"moreThanEqualTo",(function(){return Se})),n.d(o,"lessThanEqualTo",(function(){return Le})),n.d(o,"urlAny",(function(){return Fe})),n.d(o,"urlOnHomepage",(function(){return xe})),n.d(o,"urlNotOnHomepage",(function(){return Te})),n.d(o,"visitorNew",(function(){return _e})),n.d(o,"visitorReturning",(function(){return Oe})),n.d(o,"deviceOn",(function(){return ke})),n.d(o,"deviceNotOn",(function(){return Ce})),n.d(o,"adblockIsEnabled",(function(){return Ee})),n.d(o,"adblockIsDisabled",(function(){return Pe})),n.d(o,"on",(function(){return je})),n.d(o,"before",(function(){return Ie})),n.d(o,"after",(function(){return De})),n.d(o,"onBefore",(function(){return Me})),n.d(o,"onAfter",(function(){return Be})),n.d(o,"geolocationIn",(function(){return Re})),n.d(o,"geolocationNotIn",(function(){return qe})),n.d(o,"geolocationInList",(function(){return We})),n.d(o,"geolocationNotInList",(function(){return Ve})),n.d(o,"locationIn",(function(){return Ue})),n.d(o,"locationMatches",(function(){return Ge})),n.d(o,"notificationClosed",(function(){return ze})),n.d(o,"notificationNotClosed",();var a=function(){};a.trigger=function(t,e,n){void 0===n&&(n={});var i=null;e[0]!==e[0].toLowerCase()?r.isIe()||r.isIe11()?(i=document.createEvent("CustomEvent")).initCustomEvent("tp."+e,!0,!0,n):i=new CustomEvent("tp."+e,{bubbles:!0,cancelable:!0,detail:n}):r.isIe()||r.isIe11()?(i=document.createEvent("HTMLEvents")).initEvent(e,!0,!0):i=new Event(e,{bubbles:!0,cancelable:!0}),t.dispatchEvent(i)};var s="_tpapp",u="https://optinmonster.com/?utm_source=plugin&utm_medium=link&utm_campaign=powered-by-link",c=[".dev",".test",".local","local.","staging.","localhost","127.0.0.1","bigcommerce.com","blogspot.com","jimdo.com","joomla.com","pswebstore.com","myshopify.com","squarespace.com","tumblr.com","volusion.com","weebly.com","rmkr.net"],l="omappapi.com",d="trstplse.com",f={dev:{api:"app.trustpulse.test/wp-content/trustpulse-api-js/dist/Api.js",notifications:"app.trustpulse.test/v1/account/{route}/notifications",session:"app.trustpulse.test/v1/account/{route}/session",demoNotification:"app.trustpulse.test/v1/account/{route}/widget/{widget}/demo",analytics:"app.trustpulse.test/v1/widget/{route}/analytics",formSubmissions:"app.trustpulse.test/v1/webhook/{route}",debug:"app.trustpulse.test/wp-content/trustpulse-api-js/dist/ApiDebug.js",locate:"app."+l+"/v3/geolocate/json/"},others:{notifications:"{env-api}."+d+"/v1/account/{route}/notifications",session:"{env-api}."+d+"/v1/account/{route}/session",demoNotification:"{env-api}."+d+"/v1/account/{route}/widget/{widget}/demo",analytics:"{env-api}."+d+"/v1/widget/{route}/analytics",formSubmissions:"{env-api}."+d+"/v1/webhook/{route}",locate:"app."+l+"/v3/geolocate/json"}},h={device:"//cdnjs.cloudflare.com/ajax/libs/mobile-detect/1.4.1/mobile-detect.min.js",moment:"//cdnjs.cloudflare.com/ajax/libs/moment.js/2.25.0/moment.min.js",momentTz:"//cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.23/moment-timezone-with-data-2012-2022.min.js",momentLocale:,p="//ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js",m=n(3),g=["firstName","firstname","first_name","fname","edd-first","wpforms-field-name-first","tp-firstname","billing_first_name","shipping_first_name","billing-first-name","shipping-first-name","firstNameInput","First name","First Name","first name","_prénom","name_f","wpforms-field-name-first"],w=["name","NAME","author","fullname","full-name","full_name","tp-fullname","tp-first-name","form_submission[name]"],v=["email","tp-email","stripeEmail","edd-email","billing_email","billing-email","shipping-email","shipping_email"]function b(t,e){if("object"!=typeof t)throw new Error("First parameter must be an object");for(var n in t)ne(t,n)&&e(n,t[n])}function A(t,e,n,r,o,a){if(void 0===e&&(e=!0),y(window.requirejs)&&o){var s={paths:{}};return s.paths[o]=t.replace(/\.js$/,""),-1!==o.indexOf("moment.locale")&&(s.map={"*":{"../moment":"moment"},moment:{moment:i.SCRIPT_URLS.moment.replace(/\.js$/,"")}}),window.requirejs.config(s),new Promise((function(t){window.requirejs([o],(function(e){y(n)&&n(e,!0),t(e)}))}))}var u=document.createElement("script");return u.src=t,u.async=e,y(a)&&(u=a(u)),u.onload=function(){y(n)&&n(u)},u.onerror,(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(u),Promise.resolve(u)function S(t,e){return t.reduce(),{})function F(t){t=t.parentNode.firstChild;do{if("LABEL"===t.tagName)return t;t=t.nextSibling}while(t);return null}function x(t){var e=t.match_type;if("any"===e)return!0;var n=t.text||"";if("regex"===e){try{return o.regex(P(),n)}catch(t){}return!1}var i=-1!==n.indexOf("?"),r=W(E(i),i),a=W(C(j(n),i),i),s=!(""!==n&&"/"!==n||""!==r&&"/"!==r);switch(e){case"exact":return s||o.exactMatch(r,a);case"contains":return s||o.contains(r,a);case"notexact":return!s&&!o.exactMatch(r,a);case"notcontains":return!s&&!o.contains(r,a);default:return!1}}function T(){return navigator.userAgent||""}function _(){return Object(m.toASCII)(window.location.hostname.replace("www.",""))}function O(t){var e=_(),n=W(t,!1);return o.contains(n,e)}function k(){return"/"+window.location.pathname.substr(1)}function C(t,e){void 0===e&&(e=!1);var n=t.pathname.substr(1).replace(/\/$/,"");return e&&(n+=t.search),t.hash&&(n+=t.hash),n}function E(t){return void 0===t&&(t=!1),C(window.location,t)}function P(t){void 0===t&&(t=window.location);var e=t.href.split(t.host);return e[1]?e[1].substr(1):""}function j(t){var e={};try{e=new URL(t)}catch(a){var n="/"+t.replace(/^\//,"");try{e=new URL(n,"http://z")}catch(t){var i=n.split("?"),r={hostname:"",pathname:i[0],hash:"",search:"",href:n};i[1]&&(r.search="?"+i[1].split("#")[0]);var o=n.split("#");o[1]&&(r.hash="#"+o[1]),r.pathname=r.pathname.split("#")[0]}}return efunction D(t){return void 0===t&&(t=!1),q(k())}function M(t,e){for(M.count=0,t=t||0===t?String(t).trim().toLowerCase():"";t.length&&t.match(e);)M.count++,t=t.replace(e,"");return t}function B(t){return M(t,/^\//g)unction W(t,e){return void 0===e&&(e=!1),t=t.replace(/(^\w+:|^)\/\//,""),e?t.replace("/?","?").replace(/\/$/,""):t.split("?")[0].replace(/\/$/,"")unction G(t){if(!t)throw new Error("No value has been set to hash.")function n(t){var e,n="";for(e=7;0<=e;e--)n+=(t>>>4*e&15).toString(16);return n}var i,r,o,a,s,u,c,l,d,f=new Array(80),h=1732584193,p=4023233417,m=2562383102,g=271733878,w=3285377520,v=(t(t)).length,y=new Array;for(r=0;r<v-3;r+=4)o=t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|t.charCodeAt(r+3),y.push(o);switch(v%4){case 0:r=2147483648;break;case 1:r=t.charCodeAt(v-1)<<24|8388608;break;case 2:r=t.charCodeAt(v-2)<<24|t.charCodeAt(v-1)<<16|32768;break;case 3:r=t.charCodeAt(v-3)<<24|t.charCodeAt(v-2)<<16|t.charCodeAt(v-1)<<8|128}for(y.push(r);14!=y.length%16;)y.push(0);for(y.push(v>>>29),y.push(v<<3&4294967295),i=0;i<y.length;i+=16){for(r=0;16>r;r++)f[r]=y[i+r];for(r=16;79>=r;r++)f[r]=e(f[r-3]^f[r-8]^f[r-14]^f[r-16],1);for(a=h,s=p,u=m,c=g,l=w,r=0;19>=r;r++)d=e(a,5)+(s&u|~s&c)+l+f[r]+1518500249&4294967295,l=c,c=u,u=e(s,30),s=a,a=d;for(r=20;39>=r;r++)d=e(a,5)+(s^u^c)+l+f[r]+1859775393&4294967295,l=c,c=u,u=e(s,30),s=a,a=d;for(r=40;59>=r;r++)d=e(a,5)+(s&u|s&c|u&c)+l+f[r]+2400959708&4294967295,l=c,c=u,u=e(s,30),s=a,a=d;for(r=60;79>=r;r++)d=e(a,5)+(s^u^c)+l+f[r]+3395469782&4294967295,l=c,c=u,u=e(s,30),s=a,a=d;h=h+a&4294967295,p=p+s&4294967295,m=m+u&4294967295,g=g+c&4294967295,w=w+l&4294967295}return(d=n(h)+n(p)+n(m)+n(g)+n(w)).toLowerCase()}function z(t){return Z(t).map((function(e){var n=t[e];return"object"==typeof n&&null!==n&&(n=z(n)),encodeURIComponent(e)+"="+encodeURIComponent(n)})).join("&")unction J(){var t=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))||/Android.+Chrome.+[.0-9].+Mobile/i.test(t)function X(){for(var t="",e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=96;0<n;--n)t+=e[Math.floor(Math.random()*e.length)];return t}function Y(t){return(t||document.location.search||document.location.hash).replace(/(^\?)|(^\#)/,"").split("&").map(function(t){if(void 0!==t)return this[(t=t.split("="))[0]]=t[1],this}.bind({}))[0]}function Q(t,e,n){if(!t||!e)throw new Error("A required parameter is missing.");var i=new RegExp("([?|&])"+e+"=.*?(&|#|$)","i");if(t.match(i))return t.replace(i,"$1"+e+"="+n+"$2");var r="",o=-1!==t.indexOf("?")?"&":"?";return-1!==t.indexOf("#")&&(r=t.replace(/.*#/,"#"),t=t.replace(/#.*/,"")),t+o+e+"="+n+r}function Z(t){return Object.keys(t)function et(){return void 0!==Y()&&void 0!==Y().tphide&&"false"!==Y().tphide&&"0"!==Y().tphide}function nt(){return void 0===Y()||void 0===Y().tpdebug?ne(window,"_tpdev")&&window._tpdev.data&&window._tpdev.data.tpdebug:"false"!==Y().tpdebug&&"0"!==Y().tpdebugfunction rt(t,e){return Z(t).filter())function at(t){var e=t.split("-");return b(e,)),e.join("")}function st(t){if(!t)return null;var e=t.split("-"),n=!0;return b(e,(function(t,i){n?n=!1:e[t]=ot(i)})),e.join("")}function ut(t,e){return-1<e.indexOf(t)||!1}function ct(t){var e={};return Object.values(t).forEach()),efunction dt(t,e){return Gt(t).classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function ft(t,e){return 0<e.filter()).length}function ht(t,e){return 0<e.filter()).length}function pt(t,e){return 0<e.filter()).length}function mt(t,e){return 0<e.filter()).length}function gt(t,e){var n=Gt(t).classList?t.classList.value:"";return 0<e.filter()).length}function wt(t){var e=Ht(t);return e&&-1<e.toLowerCase().indexOf("name")&&-1===e.toLowerCase().indexOf("last")}function vt(t,e){void 0===e&&(e=""),b(e=e.split(" "),(function(e,n){Gt(t).classList?t.classList.add(n):dt(t,n)||(t.className+=" "+n)}))}function yt(t,e){void 0===e&&(e=""),b(e=e.split(" "),(function(e,n){Gt(t).classList?t.classList.remove(n):t.className=t.className.replace(new RegExp("\\b"+n+"\\b","g"),"")}))function At(t,e,n,i){return void 0===e&&(e=""),Gt(t).ns||(t.ns={}),t.ns[e]=n,t.addEventListener(e.split(".")[0],n,i||!1),t}function Nt(t,e){return Gt(t).ns&&t.ns[e]?(t.removeEventListener(e.split(".")[0],t.ns[e]),delete t.ns[e],t):tfunction Lt(){var t=document.documentElement,e=document.body,n="scrollTop",i="scrollHeight";return Math.round((t[n]||e[n])/((t[i]||e[i])-t.clientHeight)*100)function xt(t,e){return Gt(t).insertBefore(Gt(e),t.firstChild)}function Tt(t,e){return Gt(t).parentNode.insertBefore(Gt(e),t.nextSibling)}function _t(t,e){return Gt(t).parentNode.insertBefore(Gt(e),t)}function Ot(t,e){return kt(Gt(t),e,!0)}function kt(t,e,n){for(var i=[];t=Gt(t).nextElementSibling;)e&&t.nodeName.toLowerCase()!==e||i.push(t);return n?i[0]:i}function Ct(t,e){return Pt(Gt(t),e,!0)}function Et(t){var e=t.split(" ");return 1<e.length&&-1<["Mr","Mr.","Mrs","Mrs.","Ms","Ms.","Dr","Dr."].findIndex((function(e){return t[0===e]}))?e[1]:e[0]}function Pt(t,e,n){for(var i=[];t=Gt(t).previousElementSibling;)e&&t.nodeName.toLowerCase()!==e||i.push(t);return n?i[0]:i}function jt(t,e,n){if(!Gt(t)||!e)throw new Error("Element and style parameters are required.");if("object"!=typeof e){if(!n)return getComputedStyle(t,null).getPropertyValue(e);t.style[e]=n}else for(var i in e)t.style[i]=e[i]}function It(t){var e=t;return Array.isArray(t)||(e=Z(t)),!Array.isArray(e)||!e.length}function Dt(t,e){Gt(t).parentNode&&t.parentNode.replaceChild(Gt(e),t)}function Mt(t){var e=new Date(t+" GMT"),n=new Date,i=Math.floor((n.getTime()-e.getTime())/1e3),r=Math.floor(i/60),o=Math.floor(r/60),a=Math.floor(o/24),s=Math.floor(a/30);return 0<s?1===s?"a month ago":s+" months ago":0<a?1===a?"a day ago":a+" days ago":0<o?1===o?"an hour ago":o+" hours ago":0<r?1===r?"a minute ago":r+" minutes ago":"just now"}function Bt(t,e){Gt(t).style.opacity=0,t.style.display="block",function n(){var i=10*t.style.opacity;10<(i+=1)?y(e)&&e():(t.style.opacity=i/10,requestAnimationFrame(n))}()}function Rt(t,e){Gt(t).style.opacity=1,t.style.display="block",function n(){var i=10*t.style.opacity;0>=(i-=1)?(t.style.opacity=0,t.style.display="none",y(e)&&e()):(t.style.opacity=i/10,requestAnimationFrame(n))}()}function qt(t){return 0<Gt(t).offsetWidth&&0<t.offsetHeight}function Wt(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=1250);var r=(Gt(t).scrollTop-e)/2,o=0,a=window.performance.now();requestAnimationFrame((function s(u){var c=u-a;if(100<c&&(c=30),(o+=Math.PI/(n/c))>=Math.PI)return e!==t.scrollTop&&(t.scrollTop=e),void(y(i)&&i());var l=Math.round(e+r+r*Math.cos(o));t.scrollTop=l,a=u,requestAnimationFrame(s)}))function Ut(t){Gt(t).parentNode.removeChild(t)}function Gt(t){if(!(t instanceof Element||t instanceof HTMLElement||t===window||t===document))throw new Error("You must pass in a valid DOM element.");return t}function zt(t,e){var n=Gt(e||document);return[].slice.call(n.querySelectorAll(t))}function Ht(t){var e=Array.from(document.getElementsByTagName("label")).find());if(e||(e=F(t)),e)return e.innerText}function $t(t){var e=t.map()).filter()).find((function(t){return-1<t.label.toLowerCase().indexOf("name")&&-1===t.label.toLowerCase().indexOf("last")}));if(e)return Et(e.input.value)}function Jt(t){return ft(t,g)||ht(t,g)||pt(t,g)?{key:"firstName",value:t.value}:ft(t,w)||ht(t,w)||pt(t,w)?{key:"firstName",value:Et(t.value)}:ft(t,v)||ht(t,v)||"email"===t.type||pt(t,v)?{key:"email",value:t.value}:mt(t,g)||gt(t,g)?{key:"firstName-partial",value:t.value}:mt(t,w)||gt(t,w)||wt(t)?{key:"firstName-partial",value:Et(t.value)}:gt(t,v)||mt(t,v)?{key:"email-partial",value:t.value}:void 0}function Kt(t){var e=t.trim().toLowerCase(),n=1<e.split("").length,i=isNaN(e);return e&&n&&i&&0===["n/a","empty","none","default","blank"].filter()).length}function Xt(t){var e=g.concat(w);return mt(t,e)||gt(t,e)||mt(t,v)||gt(t,v)||wt(t)function Qt(t,e){void 0===e&&(e="a");var n=Yt(t);return("link"===e||n)&&(e="a"),n?Array.prototype.slice.call(document.getElementsByTagName(e)).filter((function(e){return W(e.href,!0)===W(t,!0)})):Array.prototype.slice.call(document.getElementsByTagName(e)).filter((function(e){return e.textContent.trim().toLowerCase()===t.trim().toLowerCase()}))function te(t){try{var e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&0===window[t].length}r re=function(){};function oe(t,e){return t===e}function ae(t,e){return t!==e}function se(t,e){return ce(t,e)}function ue(t,e){return le(t,e)}function ce(t,e){return-1<t.indexOf(e)&&0<t.length}function le(t,e){return-1===t.indexOf(e)&&0<e.lengthfunction fe(t,e){return 0!==t.lastIndexOf(e,0)function pe(t,e){return-1===t.indexOf(e,t.length-e.length)}function me(){return!0}function ge(t){return null==t||0===t.length}function we(t){return null!=t&&0<t.length Te(t){return null!=t&&0<t.length}function _e(){return null!==Ke.get("_tpappvp")&&null!==Ke.get("_tpappvs")}function Oe(){return null!==Ke.get("_tpappvp")&&null===Ke.get("_tpappvs")ction je(t,e,n){return!!t.isValid()&&("e"===n?t.day()===e.day():t.isSame(e,n))}function Ie(t,e,n){return!!t.isValid()&&("e"===n?t.day()<e.day():t.isBefore(e,n))}function De(t,e,n){return!!t.isValid()&&("e"===n?t.day()>e.day():t.isAfter(e,n))}function Me(t,e,n){return!!t.isValid()&&("e"===n?t.day()<=e.day():t.isSameOrBefore(e,n))}function Be(t,e,n){return!!t.isValid()&&("e"===n?t.day()>=e.day():t.isSameOrAfter(e,n))}function Re(t,e){var n=Ge(t,e);return!!n&&n.every((function(t){return t}))}function qe(t,e){var n=Ge(t,e);return!!n&&n.some())function Ve(t,e){var n=Ue(t,e);return null!==n&&!n}function Ue(t,e){return t&&Array.isArray(t)&&e&&e.country&&e.country.shortName?-1!==t.indexOf(e.country.shortName):null}function Ge(t,e){var n=r.matchingKeys(t,e);return!!n.length&&n.map((function(n){return r.valueExistsInObject(t[n].shortName,e[n])||r.valueExistsInObject(t[n].longName,e[n])}))}function ze(t){return null!==Ke.get("tp-"+t)&&null===Ke.get("tpSuccess-"+t)&&null===Ke.get("tp-success-"+t)&&(!window["tp"+t]||!1===window["tp"+t].settings.shown)}function He(t){return null===Ke.get("tp-"+t)&&null===Ke.get("tpSuccess-"+t)&&null===Ke.get("tp-success-"+t)}re.title="[TrustPulse]",re.log=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];"object"==typeof console&&console.log.apply(null,[re.title].concat(e))},re.debugLog=function(t){0<=window.location.search.indexOf("tpdebug")&&"object"==typeof console&&console.log.apply(null,[re.title,"[DEBUG]"].concat(t))},re.info=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];"object"==typeof console&&console.info.apply(null,[re.title].concat(e))},re.warn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];"object"==typeof console&&console.warn.apply(null,[re.title].concat(e))},re.error=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];"object"==typeof console&&console.error.apply(null,[re.title].concat(e))},re.table=function(t,e){"object"==typeof console&&void 0!==console.table&&(console.groupCollapsed([re.title,t].filter((function(t){return t})).join(" ")),console.table(e),console.groupEnd())};var $e=function(){function t(t){this.N=t,this.animation=this.N.settings.animation,this.position=this.N.settings.position,this.verticalOffset=this.N.settings.verticalOffset?parseInt(this.N.settings.verticalOffset):25,this.horizontalOffset=this.N.settings.horizontalOffset?parseInt(this.N.settings.horizontalOffset):25,this.verticalTransitionHeight=125+this.verticalOffset,this.horizontalTransitionHeight=325+this.horizontalOffset}var e=t.prototype;return e.setPreLoadState=function(t){var e=t.getBoundingClientRect(),n=0===t.scrollHeight?this.verticalTransitionHeight:e.height+this.verticalOffset,i=0===t.scrollWidth?this.horizontalTransitionHeight:e.width+this.horizontalOffset;switch(this.animation){case"slide-in-horizontal":t.style.transition="transform 0.6s ease 0s, opacity .6s",t.style.transform=-1<this.position.indexOf("right")?"translateX("+i+"px)":"translateX(-"+i+"px)",t.style.opacity=0;break;case"slide-in-vertical":t.style.transition="transform 0.6s ease 0s, opacity .6s",t.style.transform=-1<this.position.indexOf("bottom")?"translateY("+n+"px)":"translateY(-"+n+"px)",t.style.opacity=0;break;case"fade-in":t.style.transition="opacity 0.4s ease-in",t.style.opacity=0}},e.setLoadedState=function(t){switch(this.animation){case"slide-in-horizontal":t.style.transition="transform 0.4s ease 0s",t.style.transform="translateX(0px)",t.style.opacity=1;break;case"slide-in-vertical":t.style.transition="transform 0.4s ease 0s",t.style.transform="translateY(0px)",t.style.opacity=1;break;case"fade-in":t.style.transition="opacity 0.4s ease-in",t.style.opacity=1}},e.runLoadAnimation=function(){var t=this,e=this.N.contain.querySelector(".tp-widget-container");return new Promise((function(n){r.sleep(100).then())}))},e.runUnloadAnimation=function(){var t=this.N.contain.querySelector(".tp-widget-container");return this.setPreLoadState(t),new Promise((function(t){r.sleep(1e3).then((function(){t()}))}))},t}(),Je=function(){function t(t){this.D=t,this.demoWidget=t.defaults.demoWidget||!1,this.enabled=!0,this.id=t.id,this.logged={view:!1,click:!1,hover:!1},this.warned=!1,this.ga4=new Ye(t)}var e=t.prototype;return e.logView=function(){return this.logged.view=!0,this.log("view")},e.logClick=function(){return this.logged.click=!0,this.log("click")},e.logHover,e.logClose,e.log=function(t){var e=this;if(!this.demoWidget)return this.ga4.track(t),(new en).post(this.D.defaults.http+this.D.defaults.urls.analytics.replace("{route}",this.D.widget.id).replace("{env}",this.D.defaults.env).replace("{env-api}",this.D.defaults.envApi),{action:t,url:r.getUrlPath()}).send().catch((function(t){return e.errors(t)}))},e.errors=function(){re.log("[Campaign ID:"+this.D.widget.id+"] Analytics could not be processed for this event.")},t}(),Ke=(new function(){var t=this;this.init=function(e){t.N=e,a.trigger(document,"Assassin.init",{PoweredBy:t,Notification:t.N}),t.isVisible()&&(t.aInterval=setInterval((function(){t.isVisible()}),500)),t.assassinate=!0},this.isVisible=function(){return!(t.assassinate&&t.N.poweredByLink&&(!r.visible(t.N.poweredByLink)||!r.visible(t.N.poweredByLink.querySelector(".tp-powered-by-image")))&&(t.warned||(re.error('The "'+t.N.widget.name+'" campaign is unable to show because the Powered By link has been hidden.'),t.warned=!0),t.N.close(!1),1))},this.endAssassin=function(e){t.N=e,t.assassinate=!1,clearInterval(t.aInterval)},this.N=null,this.assassinate=!1,this.aInterval=null,this.warned=!1},function(){});Ke.get,Ke.all=function(){var t={};if(document.cookie&&""!==document.cookie){var e=document.cookie.split(";");e.map((function(n,i){var r=e[i].split("=");try{r[0]=decodeURIComponent(r[0].replace(/^ /,""))}catch(t){}try{r[1]=decodeURIComponent(r[1])}catch(t){}t[r[0]]=r[1]}))}return t},Ke.create=function(t,e,n,i){var r="";if(n||"0"===n)if("-1"===n||"0"===n)r="";else{var o=new Date;o.setTime(o.getTime()+1e3*n),r="; expires="+o.toUTCString()}else r="; expires=Thu, 01 Jan 1970 00:00:01 GMT";var a=t+"="+e+r+"; path=/";i&&(a+=";domain=."+Ke.domain()),document.cookie=a},Ke.delete,Ke.domain=function(){for(var t,e="temporary_get_base_domain=cookie",n=document.location.hostname.split("."),i=n.length-1;0<=i;i--)if(t=n.slice(i).join("."),document.cookie=e+";domain=."+t+";",-1<document.cookie.indexOf(e))return document.cookie=e.split("=")[0]+"=;domain=."+t+";expires=Thu, 01 Jan 1970 00:00:01 GMT;",t},Ke.enabled=function(){var t=!!navigator.cookieEnabled;return void 0!==navigator.cookieEnabled||t||(document.cookie="testcookie",t=-1!==document.cookie.indexOf("testcookie")),t};var Xe=function(){function t(t){var e=this;this.fieldMappings=["tpLocationWrapper","tpVisitorName","tpVisitorLocation","tpOccurredAt","tpImage","tpVisitorNumber","tpVisitorNumberIcon","tpDefaultIconContainer"],this.global,this.fillData=function(t){return t?new Promise((function(n){e.insertNotificationData(t).then())})):Promise.resolve(!1)},this.insertNotificationData=function(t){return new Promise((function(n){var i=(new DOMParser).parseFromString(t,"text/html"),r=[];e.fieldMappings.forEach((function(t){var n=i.getElementById(t);r.push(new Promise((function(i){e.getTagForFieldId(t).then((function(e){if("tpLocationWrapper"!==t){if(n&&e)if("tpImage"===t){var i=n.querySelector("img");if(i)i.src=e,i.alt="Recent Activity";else{var r=n.querySelector("div"),o=document.createElement("img");o.style.cssText=r.style.cssText,o.src=e,o.alt="Recent Activity",r.style.display="none",n.appendChild(o)}}else n.innerHTML=e}else e&&""!==e||!n||(n.style.display="none")})).finally((function(){return i()}))})))})),Promise.all(r).then())}))},this.getTagForFieldId=function(t){return new Promise((function(n){switch(t){case"tpVisitorName":return n(e.N.tags.firstName);case"tpVisitorLocation":case"tpLocationWrapper":return n(e.N.tags.location);case"tpVisitorNumber":return n(e.N.tags.count);case"tpDefaultIconContainer":return n(e.N.tags.defaultIconText);case"tpImage":return n(e.N.tags.image);case"tpOccurredAt":return e.N.Ns.M.Scripts.momentLocale(e.N.settings.language).then((function(){var t=window[i.GLOBAL_TP].scripts.moment.object;if(t)return t.locale(e.N.settings.language),n(t.utc(e.N.created).fromNow());n(r.fromNow(e.N.created))})).catch())}return n()}))},this.replaceCustomVars=function(t){var n=t.match(/\{\{(.*?)\}\}/g);return n?(r.each(n,(function(n,i){return t=e.replace(i,t)})),t):t},this.replace=function(t,n){void 0===n&&(n="");var i=t;if(t.length){if(t=t.replace("{{","").replace("}}","").split("|"),void 0!==r.queryArgs()&&void 0!==r.queryArgs()[t[0]])n=n.replace(i,decodeURIComponent(r.queryArgs()[t[0]]));else if(Ke.get(t[0]))n=n.replace(i,Ke.get(t[0]));else if(e.getCustomVariable(t[0]))n=n.replace(i,e.getCustomVariable(t[0]));else if(e.getNotificationTag(t[0]))n=n.replace(i,e.getNotificationTag(t[0]));else{if(void 0===t[1])return(n=n.replace(i+" ","")).replace(i,"");n=n.replace(i,t[1])}return n}},this.getCustomVariable=function(t){return!!e.hasCustomVariable(t)&&window[i.GLOBAL_TP].custom[t]},this.getNotificationTag=function(t){return void 0!==e.N.tags[t]&&e.N.tags[t]},this.setCustomVariable=function(t,e){window[i.GLOBAL_TP].custom[t]=e},this.getCustomVariables,this.hasCustomVariable=function(t){return r.hasProp(window[i.GLOBAL_TP].custom,t)},this.hasCustomVariables=function(){return!r.empty(e.getCustomVariables())},this.deleteCustomVariable=function(t){return delete window[i.GLOBAL_TP].custom[t]},this.N=t,this.init()}return t.prototype.init=function(){this.global("TPCustomVariables",this.setCustomVariable),this.global("TrustPulseCustomVariables",this),a.trigger(document,"Dtr.init",{Dtr:this,Notification:this.N})},t}(),Ye=function(){function t(t){var e=this;this.track=function(t){if(a.trigger(document,"GoogleAnalytics.track",{action:t,GoogleAnalytics:e,Widget:e.widget,version:4}),e.enabled&&(e.ready||setTimeout(),500),e.object))if(e.tracker=e.object,e.tracker){var n={name:"trustpulse_"+t,params:{tp_campaign_name:e.widget.name,tp_campaign_id:e.widget.id}};a.trigger(document,"GoogleAnalytics.pre"+ot(t)+"Event",{GoogleAnalytics:e,Widget:e.widget,gaEvent:n}),e.tracker("event",n.name,n.params),a.trigger(document,"GoogleAnalytics."+t,{GoogleAnalytics:e,Widget:e.widget,version:4})}else e.warned||(re.log('A Google Analytics tracker could not be created or retrieved for the "'+e.widget.name+'" campaign. Contact support for more details.'),e.warned=!0)},this.D=t,this.enabled=!0,this.object=null,this.tracker=null,this.ga4Id=!!ne(t.widget.settings.capture,"ga4Id")&&t.widget.settings.capture.ga4Id,this.id=t.id,this.logged={view:!1,click:!1,hover:!1},this.warned=!1,this.widget=t.widget,this.settings=t.widget.settings,this.ready=!1,this.tries=0,this.dataLayerProp="dataLayer",void 0===window[i.GLOBAL_TP].scripts.analytics&&(window[i.GLOBAL_TP].scripts.analytics={googleAnalytics4:{data:{},error:"",object:null,status:"ready",url:"https://www.googletagmanager.com/gtag/js?id="+this.ga4Id}}),this.init()}return t.prototype.init=function(){var t=this;a.trigger(document,"GoogleAnalytics.init",{GoogleAnalytics:this,Widget:this.widget,version:4});var e=window[i.GLOBAL_TP].scripts.analytics.googleAnalytics4.status,n=window[i.GLOBAL_TP].scripts.analytics.googleAnalytics4.url;if("failed"!==e)if("loading"!==e)if(8<++this.tries)re.debug("Google Analytics could not be initialized for the "+this.widget.name+" ("+this.widget.id+") campaign because the analytics object is invalid.");else if(this.ga4Id)if(this.object||(void 0!==window.__gtagTracker&&(this.object=window.__gtagTracker),void 0!==window.gtag&&(this.object=window.gtag)),this.object)this.ready=!0;else{var r=Promise.resolve();this.object||ie('script[src^="'+n+'"]')||(r=new Promise((function(r){return"loaded"===e?r():(window[i.GLOBAL_TP].scripts.analytics.googleAnalytics4.status="loading",A(n,!0,(function()window[i.GLOBAL_TP].scripts.analytics.googleAnalytics4.status="loaded",window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",t.settings.capture.ga4Id),t.object=e,r()}),(function(){window[i.GLOBAL_TP].scripts.analytics.googleAnalytics4.status="failed",re.log("Google Analytics could not be initialized for the "+t.widget.name+" ("+t.widget.id+") campaign because the script failed to load.")})))}))),r.then((function(){t.ready=!0,t.object||(void 0!==window[t.dataLayerProp]?t.object=function(){window[this.dataLayerProp].push(arguments)}:(t.object=null,setTimeout((function(){return t.init()}),500)))}))}else this.enabled=!1;else setTimeout((function(){return t.init()}),500)},t}(),Qe=function(){function t(t){var e=this;this.holder=function(){if(!e.N.holder){var t="tp-"+e.N.id+"-holder",n=document.getElementById(t);n||((n=document.createElement("div")).setAttribute("id",t),n.setAttribute("data-campaign",e.N.widget.slug),r.append(document.body,n)),e.N.holder=n}},this.show=function(){return a.trigger(document,"Html.show",{Html:e,Notification:e.N}),new Promise((function(t,n){var i=e.fillData();Promise.all([i]).then((function(){e.append().then((function(){a.trigger(document,"Html.append.after",{Html:e,Notification:e.N}),t()})).catch((function(t){return n(t)}))})).catch())}))},this.fillData=function(){return a.trigger(document,"Html.fillData",{Html:e,Notification:e.N}),e.N.Dtr.fillData(e.html).then())},this.append=function(){return a.trigger(document,"Html.append.before",{Html:e,Notification:e.N}),new Promise((function(t,n){e.html||n("Could not load the "+e.N.name+" ("+e.N.id+") notification because the HTML is missing or corrupted.");var i=document.getElementById("tp-"+e.N.id+"-holder"),o=i.querySelector("style"),a=document.createElement("div");a.innerHTML=e.html,e.N.Animation.setPreLoadState(a.firstChild),i&&(o&&r.remove(o),r.append(i,a)),e.N.contain=document.getElementById("tp-"+e.N.id+"-holder"),e.N.poweredByLink=e.N.contain.querySelector(".tp-widget-powered-by"),e.N.Listeners.load(),t()}))},this.N=t,this.html=this.N.html,this.styles=this.N.styles,this.Scripts=new nn(t.defaults),this.init()}var e=t.prototype;return e.init=function(){a.trigger(document,"Html.init",{Html:this,Notification:this.N}),this.holder()},e.unload,e.cleanupAfterShow=function(){document.getElementById("tp-"+this.N.id+"-holder").innerHTML=null},t}(),Ze=(n(9),function(){function t(t){var e=this;this.load=function(){""!==e.N.getOnClickUrl()&&(e.N.contain.onclick=function(){e.N.Analytics.logClick(),window.open(e.N.getOnClickUrl())}),e.N.contain.onmouseenter=function(){e.addActiveBorder(),e.N.settings.hasAMTeam&&e.N.Analytics.logHover()},e.N.contain.onmouseleave=e.removeActiveBorder,e.N.contain.querySelector(".tp-notification-close").onclick=function(t){t.stopPropagation(),t.preventDefault(),e.N.closeTimeout&&window.clearTimeout(e.N.closeTimeout);var n=Ke.get("tp-widgets-closed"),i=null!==n?n.split(","):[];i.push(e.N.widget.id),Ke.create("tp-widgets-closed",i.join(","),1209600),a.trigger(document,"Notification.clickClose",{Notification:e}),e.N.close(!1)};var t=e.N.contain.querySelector(".tp-widget-powered-by");t&&(t.onclick=function(t){t.preventDefault(),t.stopPropagation();var n=e.N.isDefault?"https://trustpulse.com/?utm_source=widget&utm_medium=link&utm_campaign=verified":"https://trustpulse.com/verified-by-trustpulse/?utm_source=widget&utm_medium=link&utm_campaign=verified";window.open(n,"_blank","noopener")})},this.addActiveBorder=function(){var t=e.N.contain.querySelector(".tp-widget-container");e.borderColor=t.style.borderColor,t.style.transition="border-color 0.2s",t.style.borderColor="#D8DEEC"},this.removeActiveBorder=function(){e.N.contain.querySelector(".tp-widget-container").style.borderColor=e.borderColor},this.off,this.N=t,this.borderColor="",this.init()}var e=t.prototype;return e.init=function(){a.trigger(document,"Listeners.init",{Listeners:this,Notification:this.N})},e.getMonsterLinkSlug=function(t){if(o.contains(t,"monstercampaigns.com"))return new URL(t).pathname.replace("/c/","").replace("/","")},t}()),tn=function()return t.get=function(e,n){var i=t.all();return void 0===i[e]?n:i[e]},t.all,t.set=function(e,n){var i=t.all();i[e]=n,localStorage.setItem("trustPulseData",JSON.stringify(i))},t}(),en=function(){var t=this;this.get=function(e,n){return t.method="GET",t.url=e,n&&(n="string"==typeof n?n:r.param(n),t.url+=(/\?/.test(e)?"&":"?")+n),t.cache||(t.url+=(/\?/.test(e)?"&":"?")+r.time()),t},this.post=function(e,n){return t.method="POST",t.url=e,t.data=n,t},this.setTimeout,this.setCache=function(e){return t.cache=e?1:0,t},this.send=function(){return new Promise((function(e,n){var i="GET"===t.method?null:"string"==typeof t.data?t.data:JSON.stringify(t.data);t.xhr.open(t.method,t.url,!0),t.xhr.timeout=t.timeout,"GET"!==t.method&&(t.xhr.setRequestHeader("Content-Type","application/json"),t.xhr.setRequestHeader("X-Requested-With","TrustPulseApi")),t.xhr.onload=function(){3<t.xhr.readyState&&200<=t.xhr.status&&300>t.xhr.status?e(t.xhr):n(t.xhr)},t.xhr.onerror,t.xhr.send(i)}))},this.response="",this.method="GET",this.url="",this.timeout=3e4,this.cache=1,this.xhr=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP")},nn=function(){function t(t){var e=this;this.geolocation=function(){return(new en).get(e.defaults.http+e.defaults.urls.locate).setCache(!1).send().then((function(t){var e=JSON.parse(t.response);if(!e)throw new Error("Geolocation failed");window[i.GLOBAL_TP].scripts.geolocation.data={country:{shortName:e.country_iso||"",longName:e.country||""},administrative_area_level_1:{shortName:e.region_code||"",longName:e.region_name||""},locality:{shortName:e.city||"",longName:e.city||""},original:e},window[i.GLOBAL_TP].scripts.geolocation.status="loaded"})).catch((function(){window[i.GLOBAL_TP].scripts.geolocation.data={country:{shortName:"",longName:""},administrative_area_level_1:{shortName:"",longName:""},locality:{shortName:"",longName:""},original:{}},window[i.GLOBAL_TP].scripts.geolocation.error="There was an error retrieving the geolocation data.",window[i.GLOBAL_TP].scripts.geolocation.status="failed"}))},this.device=function(){if(void 0===window.MobileDetect)return new Promise((function(t,e){r.script(i.SCRIPT_URLS.device,!0,(function(){window[i.GLOBAL_TP].scripts.device.status="loaded",t()}),(function(){window[i.GLOBAL_TP].scripts.device.status="failed",e()}))}));window[i.GLOBAL_TP].scripts.device.status="loaded"},this.moment=function(t){return new Promise((function(n,o){var a=i.SCRIPT_URLS.moment,s=/\/((\d+\.)?(\d+\.)?(\*|\d+))\//gi.exec(a)[1],u=window[i.GLOBAL_TP].scripts,c=u.moment,l=u.momentTz;if(void 0!==window.moment&&s===window.moment.version)return c.status="loaded",c.object=window.moment,n();r.script(a,!0,(function(a,s){c.status="loaded",c.object=s&&a?a:window.moment,"ready"===l.status&&(l.status="loading",r.script(i.SCRIPT_URLS.momentTz,!0,(function(i,r){l.status="loaded",l.object=window.moment?window.moment.tz:null,r&&i&&(l.object=i,e.momentLocale(t,i)),n()}),(function(){l.status="failed",o()}),"momentTz"))}),),"moment")}))},this.momentLocale=function(t,e){void 0===e&&(e=!1);var n=window[i.GLOBAL_TP].scripts.moment;switch(t){case"nor":t="nb"}return n[t]||(n[t]={status:"ready"}),new Promise((function(o,a){if("en"===t)return n[t].status="loaded",n[t].object=window.moment?window.moment:null,e&&(n[t].object=e),o();var s=function e(){switch(n[t].status){case"loading":return setTimeout((function(){return e()}),100);case"failed":return a();default:return o()}};if("ready"!==n[t].status)return s();n[t].status="loading",r.script(i.SCRIPT_URLS.momentLocale(t),!0,(function(e,i){n[t].status="loaded",n[t].object=window.moment?window.moment:null,i&&e&&(n[t].object=e)}),),"moment.locale."+t).finally())}))},this.defaults=t,void 0===window[i.GLOBAL_TP].scripts&&(window[i.GLOBAL_TP].scripts={device:{status:"ready",object:null},moment:{status:"ready",object:null},momentTz:{status:"ready",object:null},geolocation:{status:"ready",data:{},error:""}}),this.init()}return t.prototype.init=function(){a.trigger(document,"Scripts.init",{Scripts:this})},t}(),rn=function(){function t(t){var e=this;this.cookies=function(){void 0!==r.queryArgs()&&void 0!==r.queryArgs().tpclear&&(Ke.delete("tpSessionStart"),Ke.delete("tpSessionPageviews")),Ke.get("tpSessionStart")||Ke.create("tpSessionStart",e.defaults.pageStart,-1);var t=Ke.get("tpSessionPageviews")||0;Ke.create("tpSessionPageviews",++t,-1)},this.defaults=t,window[i.GLOBAL_TP].sessions||this.init()}return t.prototype.init=function(){a.trigger(document,"Sessions.init",{Sessions:this}),window[i.GLOBAL_TP].sessions=!0;try{if("object"!=typeof sessionStorage)throw!0;void 0!==r.queryArgs()&&void 0!==r.queryArgs().tpclear&&(sessionStorage.removeItem("tpSessionStart"),sessionStorage.removeItem("tpSessionPageviews")),null===sessionStorage.getItem("tpSessionStart")&&sessionStorage.setItem("tpSessionStart",this.defaults.pageStart);var t=sessionStorage.getItem("tpSessionPageviews")||0;sessionStorage.setItem("tpSessionPageviews",++t)}catch(t){re.warn("Sessions are not supported on this browser. Attempting to use cookies instead."),this.cookies()}},t}();rn.get;var on=function(){function t(){this.ie8=document.all&&!document.addEventListener,this.init()}return t.prototype.init=function(){if(a.trigger(document,"Shutdown.init",{Shutdown:this}),this.ie8)throw"An incompatible browser has been detected."},t}(),an=function(){function t(t){var e=this;this.loadFonts=function(t){var n=!1,i=["Arial","Georgia","Helvetica","Helvetica Neue","Lucida Grande","Tahoma","Times New Roman","Verdana"],r=e.fonts.filter((function(t){return"FontAwesome"===t&&(n=!0),"FontAwesome"!==t&&-1===i.indexOf(t)})),o={active:function(){e.done(t)},inactive:function(){e.done(t)}};"default"===e.N.settings.imageType&&r.push("Lato"),r.length&&(o.google={families:r}),n&&(o.custom={families:["Font Awesome:400"],urls:["https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"]}),r.length||n?window.WebFont.load(o):t()},this.done=function(t){a.trigger(document,"WebFonts.loadFonts",{WebFonts:e,Notification:e.N}),t()},this.N=t,this.fonts=t.fonts,this.loaded=!1,this.enabled="undefined"==typeof tp_load_webfont||window.tp_load_webfont,this.stop=!1}return t.prototype.init=function(){var t=this;return a.trigger(document,"WebFonts.init",{WebFonts:this,Notification:this.N}),new Promise((function(e){t.loaded&&e(),t.loaded=!0,t.enabled&&r.keys(t.fonts).length?void 0===window.WebFont?r.script(i.WEBFONT_URL,!0,(function(){t.loadFonts(e)}),)):t.loadFonts(e):e()}))},t}(),sn=function(){function t(){window._tpvisitsadded||this.init()}var e=t.prototype;return e.init=function(){a.trigger(document,"Visits.init",{Visits:this}),this.sessionReset(),window._tpvisitsadded=!0,r.storageAvailable("localStorage")?t.add():re.debug("Local Storage not available in this browser.")},e.minutesSinceLastVisit=function(){if(!r.storageAvailable("localStorage"))return 0;var e=window.localStorage,n=JSON.parse(e.getItem(t.visitsKey));if(n){var i=n.slice(-1),o=Math.floor(r.time()/1e3);return Math.floor((o-i[0].timestamp)/60)}return 0},e.sessionReset=function(){29<this.minutesSinceLastVisit()&&t.deleteAll()},t}()sn.firstVisitKey="tpVisitsFirst",sn.visitsKey="tpVisits",sn.add=function(){if(r.storageAvailable("localStorage")){var t=window.localStorage,e=JSON.parse(t.getItem(sn.firstVisitKey)||"{}"),n=JSON.parse(t.getItem(sn.visitsKey)||"[]"),i={path:r.urlPath(),title:r.getPageTitle(),queryArgs:r.queryArgs(),timestamp:Math.floor(r.time()/1e3),referrer:r.referrer()};void 0===e.path&&void 0===e.timestamp?t.setItem(sn.firstVisitKey,JSON.stringify(i)):(n.push(i),t.setItem(sn.visitsKey,JSON.stringify(n)))}},sn.get=function(t){try{var e=window.localStorage,n=t===sn.firstVisitKey?"{}":"[]";return JSON.parse(e.getItem(t)||n)}catch(t){return null}},sn.getAll=function(){try{var t=sn.get(sn.firstVisitKey),e=sn.get(sn.visitsKey);return e.unshift(t),e}catch(t){return[]}},sn.deleteAll=function(){try{var t=window.localStorage;t.removeItem(sn.firstVisitKey),t.removeItem(sn.visitsKey)}catch(t){}},sn.getTimestamp=function(t){return isNaN(parseInt(t.timestamp))?0:parseInt(t.timestamp)},sn.hasVisited=function(t,e,n){for(var i=sn.getAll().reverse(),r=0;r<i.length;r++){var o=i[r],a=sn.getTimestamp(o),s=!1;if(n){var u=new Date(new Date(1e3*a).setHours(0,0,0,0)).toDateString();s=new Date((new Date).setHours(0,0,0,0)).toDateString()===u}else s=a>=e;if(!s)return!1;if(t((o.path||"").toLowerCase()))return!0}return!1};var cn=function(){function t(t,e,n,i,o){this.Ns=i,this.data=Object.freeze(t),this.isDefault=o,this.id=t.id||e.id,this.defaults=Object.freeze(Object.assign({},n)),this.html=this.isDefault?e.default_html:e.html,this.styles=e.styles,this.type=e.type,this.created=t.created_at,this.widget=e,this.settings=r.flattenObjectArray(e.settings),this.tags=this.extractTags(),this.fonts=this.extractFonts(),this.holder="",this.Animation=new $e(this),this.Html=new Qe(this),this.WebFonts=new an(this),this.Listeners=new Ze(this),this.Dtr=new Xe(this),this.Analytics=new Je(this),this.Assassin=null,this.Scripts=new nn(this.defaults),this.localeLoaded=!1,this.closeTimeout=null,this.poweredByLink=null,this.init()}var e=t.prototype;return e.init=function(){var t=this;a.trigger(document,"Notification.init",{Notification:this}),this.Scripts.moment(this.settings.language).then()).catch())},e.extractTags=function(){if(this.isDefault)return{};var t=this.widget,e=this.data.data,n="analytics"===this.type,i="static"===this.type,r=e.cart,o=this.widget.settings.design.showProductImage,a={first_name:e.firstName?e.firstName:this.settings.visitorName,analytics_count:n?this.getAnalyticsCount(e.count):0,notification_count:e.count?e.count:"0"};if(n)return un({firstName:this.settings.visitorName,location:null,count:this.getAnalyticsCount(e.count),image:t.settings.design.imageUrl,iconColor:t.settings.design.iconColor,defaultIconText:10},a);if(i)return un({firstName:this.settings.visitorName,location:null,count:0,image:t.settings.design.staticNotification.staticImageUrl,iconColor:t.settings.design.iconColor,defaultIconText:this.getIconText()},a);if(r){var s=this.widget.settings.design.cartDisplay||"first",u=this.getSingleProduct(e.cart,s);a=un({cart_count:e.cart.length,product_name:u.name||"a product",product_image_url:u.productImageUrl,product_price:u.price,product_url:u.productUrl},a)}var c=e.imageUrl&&""!==e.imageUrl?e.imageUrl:null;return r&&o&&a.product_image_url&&(c=a.product_image_url),un({firstName:e.firstName?e.firstName:this.settings.visitorName,location:this.parseLocation(e.location),count:e.count?e.count:0,image:c,iconColor:e.iconColor?e.iconColor:"",defaultIconText:this.getIconText()},a)},e.getSingleProduct=function(t,e){void 0===e&&(e="first");var n={};switch(e){case"expensive":n=t.sort())[0];break;case"random":n=t[Math.floor(Math.random()*t.length)];break;default:n=t[0]}return this.singleProduct=n,n},e.getAnalyticsCount=function(t){void 0===t&&(t=0);var e="tp-"+this.id.toString(),n=null!==Ke.get(e)?Ke.get(e):t;return t>n&&(n=t),Ke.create(e,n,600),++n},e.parseLocation=function(t){return t?t.city&&0<t.city.length?t.region&&0<t.region.length?t.city+", "+t.region:t.city:t.region&&0<t.region.length?t.region:t.country&&0<t.country?t.country:null:null},e.getIconText=function(){return"stream"===this.type?void 0!==this.data.data.firstName&&null!==this.data.data.firstName&&""!==this.data.data.firstName?this.data.data.firstName[0]:this.settings.visitorName[0]:"aggregated"===this.type?this.data.data.count:void 0},e.extractFonts=function(){var t=[];return r.each(this.settings,(function(e,n){null!==n&&"object"==typeof n&&void 0!==n.font&&t.push(n.font)})),r.uniqueArray(t)},e.queueNotification=function(){var t=this;a.trigger(document,"Notification.queue",{Notification:this}),this.Ns.isVisible||window.addEventListener("tp.isVisible",(function(){t.queueNotification()}));var e=0===this.Ns.index?this.settings.firstDelay:this.settings.delayBetween;window.setTimeout(),1e3*e)},e.canShowOnDevice=function(){return!!this.settings.showMobile||!r.isMobile()},e.canShowOnPage=function(){return"any"===this.widget.display_rules_type||("notcontains"===this.widget.display_rules_type||"notexact"===this.widget.display_rules_type?this.widget.displayRules.length===this.widget.displayRules.filter((function(t){return r.ruleMatchesCurrentWindow(t)})).length:0<this.widget.displayRules.filter((function(t){return r.ruleMatchesCurrentWindow(t)})).length)},e.hasBeenShown=function(){return-1!==(null!==Ke.get("tp-shown-notifications")?Ke.get("tp-shown-notifications").split(","):[]).indexOf(this.id.toString())},e.hasMinimumAmount=function(){if("aggregated"!==this.widget.type&&"analytics"!==this.widget.type)return!0;var t=this.Ns.getNotificationsForWidget(this.widget.id),e=parseInt(this.settings.minNotifications);return this.tags.count?parseInt(this.tags.count)>=e:t.length>=e},e.hasBeenPermanentlyClosed=function(){var t=Ke.get("tp-widgets-closed"),e=null!==t?t.split(","):[];return!!this.widget.settings.display.permanentlyClose&&-1!==e.indexOf(this.widget.id)},e.shouldLoop,e.belongsToCurrentUser=function(){return-1!==(null!==Ke.get("tp-submitted-notifications")?Ke.get("tp-submitted-notifications").split(","):[]).indexOf(this.id.toString())},e.hasName=function(){return"stream"!==this.widget.type||this.data.data.firstName&&0<this.data.data.firstName.length},e.show=function(){var t=this;return a.trigger(document,"Notification.show",{Notification:this}),this.Ns.shownNotifications.push(this),this.WebFonts.init().then((function(){t.Html.show().then((function(){t.Animation.runLoadAnimation().then())}))}))},e.logAsViewed=function(){if("analytics"!==this.type){this.hasLoggedWidget()||this.logWidgetView();var t=Ke.get("tp-shown-notifications"),e=null!==t?t.split(","):[];e.push(this.id),Ke.create("tp-shown-notifications",e.join(","),1209600)}},e.logWidgetView=function(){this.Analytics.logView();var t=Ke.get("tp-shown-widgets"),e=null!==t?t.split(","):[];e.push(this.widget.id.toString()),Ke.create("tp-shown-widgets",e.join(","),1209600)},e.hasLoggedWidget=function(){var t=Ke.get("tp-shown-widgets");return-1!==(null!==t?t.split(","):[]).indexOf(this.widget.id.toString())},e.queueClose=function(){var t=this,e=1e3*this.settings.displayDuration,n=!1===this.defaults.demoWidget;0<e&&!this.isDefault&&(this.closeTimeout=window.setTimeout((function(){t.close(n)}),e))},e.close=function(t){var e=this;void 0===t&&(t=!0),a.trigger(document,"Notification.close",{Notification:this}),t?this.Animation.runUnloadAnimation().then()):(this.Analytics.logClose(),this.Animation.runUnloadAnimation(),this.Html.cleanupAfterShow())},e.getOnClickUrl=function(){var t=this.settings.link;return this.isDefault&&(t=this.settings.defaultNotification.defaultLink),"static"===this.type&&(t=this.widget.settings.design.staticNotification.staticLink),this.tags.product_url&&(!r.hasProp(this.settings,"useProductLink")||Boolean(this.settings.useProductLink))&&(t=this.tags.product_url),t},t}(),ln=function(){function t(t,e){var n=this;this.storeSubmittedInputs=function(t){var e=t.filter()).map()).filter());e.push({key:"page",value:window.location.href});var i=r.generateRandomId();e.push({key:"conversionId",value:i});var o=sn.getAll();e.push({key:"pageVisits",value:o});var s=sn.get("tpVisitsFirst");e.push({key:"firstVisit",value:s});var u=0<t.filter((function(t){return"search"===t.type})).length;if(!e.find((function(t){return"firstName"===t.key}))){var c=r.findNameFieldByInputLabel(t);c&&e.push({key:"firstName",value:c})}u||(a.trigger(document,"FormCaptureRule.FieldsCaptured",{fields:e}),re.debugLog("Fields Submitted:"),re.debugLog(e),n.storeSubmission(e))},this.storeSubmittedForm=function(t){var e=Array.from(t.getElementsByTagName("input"));n.storeSubmittedInputs(e)},this.id=e.id,this.successPage=e.successPage,this.match_type=e.match_type,this.text=e.text,this.widgetId=e.widget_id,this.Scripts=new nn(t),this.defaults=this.Scripts.defaults,this.shopify=t.shopify,this.omSet=!1,this.globalSet=!1,this.ruleData=e,this.widget=e.widget,this.widgetType=e.widget.type,this.Analytics=new Je(this),this.init()}var e=t.prototype;return e.init=function(){a.trigger(document,"FormCaptureRule.init",{FormCaptureRule:this})},e.matchesCurrentWindow,e.initWatcher=function(){var t=this;switch(a.trigger(document,"FormCaptureRule.initWatcher",{FormCaptureRule:this}),this.widget.settings.capture.activityType){case"analytics":this.hasLoggedAnalyticsView()||this.logAnalyticsView();break;case"none":break;case"click":this.findAndWatchElementClicks();break;default:this.findAndWatchForms(),this.initOMWatcher(),this.initGlobalWatcher()}window.setTimeout(),5e3)},e.logAnalyticsView=function(){this.Analytics.logView();var t=this.id||this.widgetId,e=Ke.get("tp-analytics-captured"),n=null!==e?e.split(","):[];n.push(t.toString()),Ke.create("tp-analytics-captured",n.join(","),86400)},e.hasLoggedAnalyticsView=function(){var t=Ke.get("tp-analytics-captured"),e=this.id||this.widgetId;return-1!==(null!==t?t.split(","):[]).indexOf(e.toString())},e.findAndWatchForms=function(){var t=this,e=this;Array.from(document.forms).forEach((function(n){n.getAttribute("tp-watched-"+t.id)||(n.addEventListener("submit",(function(e){t.storeSubmittedForm(e.currentTarget)})),t.addButtonClickEvents(n),n.submit=function(t){e.storeSubmittedForm(this),HTMLFormElement.prototype.submit.call(this,t)},n.setAttribute("tp-watched-"+t.id,!0))}))},e.findAndWatchElementClicks=function(){var t=this,e=this.ruleData.widget.settings.capture.click.text,n=this.ruleData.widget.settings.capture.click.selector,i=r.findElementByTagAndString(e,n);Array.from(i).forEach((function(e){e.getAttribute("tp-watched-"+t.widgetId)||(e.addEventListener("click",)),e.setAttribute("tp-watched-"+t.widgetId,!0))}))},e.addButtonClickEvents=function(t){var e=this,n=!1;if(!(n=t.querySelector('input[type="submit"]')||t.querySelector('button[type="submit"]')||t.querySelector('input[type="button"]'))){var i=Array.from(t.querySelectorAll("a, button, input")).filter((function(t){var e=t.id.toLowerCase(),n=t.className.toLowerCase();return-1<e.indexOf("submit")||-1<n.indexOf("submit")}));n=0<i.length&&i[i.length-1]}n&&n.addEventListener("click",(function(){e.storeSubmittedForm(t)}))},e.initOMWatcher=function(){var t=this;this.omSet||(document.addEventListener("om.Optin.success",(function(e){var n=e.detail.Optin.data.fields,i=[{key:"firstName",value:void 0!==n.name?r.extractFirstName(n.name):""},{key:"email",value:n.email},{key:"page",value:window.location.href}];t.storeSubmission(i)})),this.omSet=!0)},e.initGlobalWatcher=function(){var t=this;if(!this.globalSet){document.addEventListener("click",(function(e){var n=e.target;"INPUT"===n.tagName&&("button"!==n.type&&"submit"!==n.type||!n.form||t.storeSubmittedForm(n.form))}));var e=Array.from(document.getElementsByTagName("input"));e.filter()).forEach()),this.globalSet=!0}},e.storeSubmission=function(t){var e=this,n=tn.get("pendingSubmissions",[]),i=n.findIndex()),o={fields:t,widgetId:this.widgetId,widgetType:this.widget.type,successPage:this.successPage,submittedAt:r.time()};-1<i?n[i]=o:n.push(o),tn.set("pendingSubmissions",n)},t}(),dn=function()var e=t.prototype;return e.process=function(){var t=this,e=r.uniqueArray(tn.get("pendingSubmissions",[])).filter((function(t){return!!window.Shopify||r.time()-t.submittedAt<72e5}));0!==e.length&&this.M.fetchLocationData().then((function(){var n=e.map((function(n,i){if(r.ruleMatchesCurrentWindow(n.successPage)||void 0!==window.Shopify&&void 0!==window.Shopify.checkout){var o=t.M.defaults.http+t.M.defaults.urls.formSubmissions;o=o.replace("{route}",n.widgetId).replace("{env}",t.M.defaults.env).replace("{env-api}",t.M.defaults.envApi);var a=t.mergeFields(n.fields);return"any"!==n.successPage.match_type&&a.push({key:"successPage",value:{path:r.urlPath(),title:r.getPageTitle(),queryArgs:r.queryArgs(),timestamp:Math.floor(r.time()/1e3),referrer:r.referrer()}}),a={fields:[{key:"location",value:t.M.location}].concat(a)},(new en).post(o,a).send().then((function(n){e.splice(i,1);var r=JSON.parse(n.responseText);t.logNotificationSubmitted(r.data.notification)})).catch())}re.info("Couldn't Submit the Submission for Widget: "+n.widgetId+". Not currently on the Success Page")})).filter((function(t){return null!==t}));Promise.all(n).then((function(){tn.set("pendingSubmissions",e)})).catch((function(e){return t.errors(e)}))}))},e.processOnExit=function(){var t=this,e=r.uniqueArray(tn.get("pendingSubmissions",[])).filter());if(0!==e.length){var n=e.map((function(e){if(r.ruleMatchesCurrentWindow(e.successPage)||void 0!==window.Shopify&&void 0!==window.Shopify.checkout){var n=t.M.defaults.http+t.M.defaults.urls.formSubmissions;n=n.replace("{route}",e.widgetId).replace("{env}",t.M.defaults.env).replace("{env-api}",t.M.defaults.envApi);var i=t.mergeFields(e.fields);return(new en).post(n,{fields:[{key:"location",value:t.M.location}].concat(i)}).send()}re.info("Couldn't Submit the Submission for Widget: "+e.widgetId+". Not currently on the Success Page")})).filter());Promise.all(n).then()).catch((function(e){return t.errors(e)}))}},e.mergeFields=function(t){var e=t.find()),n=t.find((function(t){return"email"===t.key})),i=t.find((function(t){return"location"===t.key}));this.M.defaults.shopify&&void 0!==window.Shopify.checkout&&(n||(n={key:"email",value:window.Shopify.checkout.email},t.push(n)),e||(e={key:"firstName",value:window.Shopify.checkout.billing_address.first_name},t.push(e)),i&&""===i.value.city&&(i={key:"location",value:{city:window.Shopify.checkout.billing_address.city,region:window.Shopify.checkout.billing_address.province_code,country:window.Shopify.checkout.billing_address.country}}));var r=tn.get("userData",{});return!e&&r.firstName&&t.push({key:"firstName",value:r.firstName}),!n&&r.email&&t.push({key:"email",value:r.email}),t.filter())},e.logNotificationSubmitted=function(t){var e=Ke.get("tp-submitted-notifications"),n=null!==e?e.split(","):[];n.push(t.id),re.info("Submitted a notification with the ID of "+t.id),Ke.create("tp-submitted-notifications",n.join(","),1209600)},e.errors=function(t){t.response?re.error(JSON.parse(t.response).error):re.error(t)},t}(),fn=function(){function t(){var t=this;this.storeSubmittedFields=function(t){var e=t.find((function(t){return"firstName"===t.key})),n=t.find((function(t){return"email"===t.key})),i=t.find((function(t){return"firstName-partial"===t.key})),o=tn.get("userData",{});e&&r.inputLooksValid(e.value)&&(o.firstName=e.value),n&&r.inputLooksValid(n.value)&&(o.email=n.value),e||o.firstName||!i||r.inputLooksValid(i.value)&&(o.firstName=i.value),!e&&i&&r.inputLooksValid(i.value)&&(o.firstNamePartial=i.value),re.debugLog("Storing Global Form Watcher Fields"),re.debugLog(o),tn.set("userData",o)},this.storeSubmittedFormData=function(e){var n=Array.from(e.getElementsByTagName("input")).filter((function(t){return"text"===t.type||"email"===t.type})).map((function(t){return r.normalizeInputField(t)})).filter((function(t){return t}));t.storeSubmittedFields(n)},this.init()}var e=t.prototype;return e.init=function(){var t=this;a.trigger(document,"GlobalFormWatcher.init",{GlobalFormWatcher:this}),this.initWatcher(),document.addEventListener("tp.FormCaptureRule.FieldsCaptured",))},e.initWatcher=function(){var t=this;Array.from(document.forms).forEach((function(e){e.getAttribute("tp-global-watched")||(e.addEventListener("submit",(function(e){t.storeSubmittedFormData(e.currentTarget)})),t.addButtonClickEvents(e),e.setAttribute("tp-global-watched",!0))})),this.addInputWatcher(),window.setTimeout((function(){return t.initWatcher()}),5e3)},e.addButtonClickEvents=function(t){var e=this,n=!1;if(!(n=t.querySelector('input[type="submit"]')||t.querySelector('button[type="submit"]')||t.querySelector('input[type="button"]'))){var i=Array.from(t.querySelectorAll("a, button, input")).filter());n=0<i.length&&i[i.length-1]}n&&n.addEventListener("click",(function(){e.storeSubmittedFormData(t)})),document.addEventListener("click",(function(t){var n=t.target,i="BUTTON"===n.tagName&&n.form;if(("INPUT"===n.tagName||i)&&("button"===n.type||"submit"===n.type)){var o=Array.from(document.getElementsByTagName("input")).filter((function(t){return"password"!==t.type||"submit"===t.type||"button"===t.type})).map((function(t){return r.normalizeInputField(t)})).filter((function(t){return t}));e.storeSubmittedFields(o)}}))},e.addInputWatcher=function(){var t=this;Array.from(document.getElementsByTagName("input")).filter()).forEach((function(e){e.getAttribute("tp-global-watched")||(e.addEventListener("blur",(function(e){var n=e.target,i=r.normalizeInputField(n);n.value&&r.inputLooksValid(n.value)&&i&&t.storeSubmittedFields([i])})),e.setAttribute("tp-global-watched",!0))}))},t}(),hn=function(){function t(t,e,n,i,r){this.xhr=t,this.notifications=e,this.widgets=n,this.defaults=i,this.M=r,this.index=0,this.page=1,this.Sessions=new rn(this.defaults),this.isVisible=!0,this.shownNotifications=[],this.init()}var e=t.prototype;return e.init=function(){var t=this;if("complete"!==document.readyState&&"interactive"!==document.readyState)return setTimeout((function(){return t.init()}),50);a.trigger(document,"Notifications.init",{Notifications:this}),this.setVisibiltyListeners(),this.notifications=this.notifications.map((function(e){var n=t.widgets.find((function(t){return t.id===e.widget_id}));t.defaults.demoWidget&&(e.data.location=t.M.location);var r=new cn(e,n,t.defaults,t);return window[i.GLOBAL_TP].notifications[e.id]=window["tp"+e.id]=r,r})),this.addStaticNotifications(),this.addAnalyticsNotifications(),this.startShowing()},e.addAnalyticsNotifications=function(){var t=this,e=this.widgets.filter((function(t){return"analytics"===t.type})).map((function(e){var n=t.M.analyticsData.filter((function(t){return t.id===e.id}))[0].count||1,r=new cn({data:{id:e.id,count:n}},e,t.defaults,t);return window[i.GLOBAL_TP].notifications[e.id]=window["tp"+e.id]=r,r}));0<e.length&&(this.notifications=[].concat(e,this.notifications))},e.addStaticNotifications=function(){var t=this,e=this.widgets.filter((function(t){return"static"===t.type})).map((function(e){var n=new cn({data:{id:e.id}},e,t.defaults,t);return window[i.GLOBAL_TP].notifications[e.id]=window["tp"+e.id]=n,n}));0<e.length&&(this.notifications=[].concat(e,this.notifications))},e.setVisibiltyListeners=function(){var t=this;this.isVisible=document.hasFocus(),window.onblur=function(){t.isVisible=!1,a.trigger(document,"isHidden")},window.onfocus=function(){t.isVisible=!0,a.trigger(document,"isVisible")}},e.showableNotifications=function(t){return void 0===t&&(t=!1),this.defaults.demoWidget?this.notifications:t||void 0===this.showable?(this.showable=this.notifications.filter((function(t){var e=t.canShowOnDevice(),n=t.hasMinimumAmount(),i=t.canShowOnPage(),r=t.hasBeenShown(),o=!!t.settings.showOwn||!t.belongsToCurrentUser(),a=!t.settings.hideAnonymous||t.hasName(),s=!t.hasBeenPermanentlyClosed();return re.debugLog("Notification Display Settings for: "+t.id),re.debugLog({device:e,minimum:n,canShowOnPage:i,hasBeenShown:r,canShowForUser:o,canShowForName:a,isNotPermanentlyClosed:s}),e&&n&&i&&o&&a&&s&&(!r||"stream"!==t.widget.type)})),this.showable.sort()),this.showable):this.showable},e.getNotificationsForWidget,e.shouldLoop=function(){return 0<(0<this.shownNotifications.length?this.shownNotifications:this.notifications).filter((function(t){return t.shouldLoop()})).length},e.startShowing=function(){void 0!==this.showableNotifications()[0]?this.showableNotifications()[0].queueNotification():0<this.notifications.length&&this.shouldLoop()?this.loopNotifications():this.hasDefaultNotification()&&this.showDefaultNotification()},e.hasDefaultNotification=function(){return 0<this.widgets.filter()).length},e.showDefaultNotification=function(){var t=this;this.widgets.filter((function(t){return t.settings.design&&t.settings.design.displayDefaultNotification&&"active"===t.status})).map((function(e){return new cn({},e,t.defaults,t,!0)})).some((function(t){if(t.canShowOnPage()&&t.canShowOnDevice())return t.queueNotification(),!0}))},e.next=function(){var t=this.showableNotifications();this.index++,void 0!==t[this.index]?t[this.index].queueNotification():this.shouldLoop()&&this.loopNotifications()},e.loopNotifications=function(){Ke.delete("tp-shown-notifications"),this.page=0,this.index=0,this.shownNotifications=[],this.showableNotifications()[0]&&this.showableNotifications()[0].queueNotification()},t}(),pn=(n(11),function(){function t(){this.embed=null,this.defaults={},this.location={},this.notifications=null,this.formCaptureRules=null,this.Scripts=null,this.analyticsData=null,this.crossDomainCookies=!1,this.FormSubmittor=new dn(this),this.GlobalFormWatcher=new fn,window[i.GLOBAL_TP]=window[i.GLOBAL_TP]||{sessions:!1,notifications:{},custom:{},reset:this.reset}}var e=t.prototype;return e.init=function(t){var e=this;a.trigger(document,"Main.init",{Main:this}),this.reset=t.reset,this.setDefaults(t),this.Scripts=new nn(this.defaults),this.cookies().then((function(){e.defaults.demoWidget?e.fetchLocationData().then((function(){(new en).get(e.defaults.http+e.defaults.urls.demoNotification.replace("{route}",e.defaults.account).replace("{env}",e.defaults.env).replace("{env-api}",e.defaults.envApi).replace("{widget}",e.defaults.demoWidget)).send().then((function(t){return e.parse(t)})).catch((function(t){return e.errors(t)}))})):(new en).get(e.defaults.http+e.defaults.urls.notifications.replace("{route}",e.defaults.account).replace("{env}",e.defaults.env).replace("{env-api}",e.defaults.envApi)).send().then((function(t){return e.parse(t)})).catch((function(t){return e.errors(t)})),e.initEventListener(),e.FormSubmittor.process(),e.outboundClickWatcher(),e.runAutoFormSubmittor(),e.pendingWatcher()})),new sn},e.outboundClickWatcher=function(){for(var t=document.getElementsByTagName("a"),e=0,n=t.length;e<n;e++){var i=t[e],o=i.getAttribute("href");if(o){r.normalizeUrl(o);var a="#"===o.slice(0,1),s="?"===o.slice(0,1),u=r.hrefMatchesDomain(o);a||u||s||i.addEventListener("click",),!0)}}},e.runAutoFormSubmittor=function(){var t=this;window.addEventListener("beforeunload",))},e.fetchLocationData=function(){var t=this;return new Promise((function(e){if("loaded"===window[i.GLOBAL_TP].scripts.geolocation.status)return e();t.Scripts.geolocation().then((function(){var n=window[i.GLOBAL_TP].scripts.geolocation.data;return t.location={city:n.locality?n.locality.longName:"",region:n.administrative_area_level_1?n.administrative_area_level_1.shortName:"",country:n.country?n.country.longName:""},e()}))}))},e.initEventListener=function(){var t=this;return new Promise((function(e){document.addEventListener("tp.Custom.Submit",(function(e){var n=Ke.get("tp-submitted-widgets"),i=null!==n?n.split(","):[];if(void 0===e.detail.fields&&re.info('The Custom Submission was missing the "fields" object. We recommend passing a fields object with firstName and email key/value pairs.'),void 0===e.detail.widgetId&&re.error("Your event must include a widgetId."),!o.contains(i,e.detail.widgetId)){var a=tn.get("pendingSubmissions",[]).concat({fields:e.detail.fields,widgetId:e.detail.widgetId,successPage:{match_type:"any"},submittedAt:r.time()});i.push(e.detail.widgetId),Ke.create("tp-submitted-widgets",i.join(","),1209600),tn.set("pendingSubmissions",a),t.FormSubmittor.process()}})),a.trigger(document,"Main.EventListener.Ready",{Main:t}),e()}))},e.process,e.pendingWatcher=function(){var t=this,e=location.href;document.body.addEventListener("click",(function(){requestAnimationFrame((function(){e!==location.href&&t.process(),e=location.href}))}),!0)},e.cookies=function(){var t=this;return new Promise((function(e){var n="_tpapp";void 0!==r.queryArgs()&&void 0!==r.queryArgs().tpclear&&(Ke.delete(n),r.each(Ke.all(),))),Ke.get(n)?e():(Ke.create(n,r.createVisitorId(),2592e3,!!t.crossDomainCookies),t.logNewSession().then((function(){e()})))}))},e.setDefaults=function(t){t.envApi="production"===t.env?"api":"beta"===t.env?"beta":"staging"===t.env?"staging":"",t.envMin="production"===t.env?".min":"",t.http="https://",t.demoWidget=!!r.queryArgs()["tp-preview-widget"]&&r.queryArgs()["tp-preview-widget"],t.urls="dev"===t.env?i.API_URLS.dev:i.API_URLS.others,this.defaults=t},e.parse=function(t){a.trigger(document,"Main.parseWidgets",{xhr:t});var e=JSON.parse(t.response);this.analyticsData=e.data.analytics,this.notifications=new hn(t,e.data.notifications,e.data.widgets,this.defaults,this),this.formCaptureRules=this.getValidCaptureRules(e.data.formCaptureRules),this.formCaptureRules.forEach((function(t){var e=t.ruleData.widget.settings.capture.activityType||"Form";re.info("Watcher For Widget ID: "+t.widgetId+" initialized ("+e+")."),t.initWatcher()}))},e.getValidCaptureRules=function(t){var e=this,n=t.map()),i=n.filter()).filter((function(t){return t.matchesCurrentWindow()})),o=r.groupBy(n.filter((function(t){return"notcontains"===t.match_type||"notexact"===t.match_type})),"widgetId"),a=[];return r.each(o,(function(t,e){var n=e.filter((function(t){return t.matchesCurrentWindow()}));e.length===n.length&&a.push(e[0])})),i.concat(a)},e.logNewSession=function(){return this.defaults.demoWidget?Promise.resolve():(new en).post(this.defaults.http+this.defaults.urls.session.replace("{route}",this.defaults.account).replace("{env}",this.defaults.env).replace("{env-api}",this.defaults.envApi)).send()},e.errors=function(t){if(t.response){var e=JSON.parse(t.response);re.error(e&&e.error?e.message||e.error:t)}else re.error(t)},t}()),mn=n(5),gn=n.n(mn);function wn(){return(wn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}n(15),n(17),Array.from||(Array.from=function(){var t=Object.prototype.toString,e,n=Math.pow(2,53)-1,i=function(t){var e=function(t){var e=Number(t);return isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e}(t);return Math.min(Math.max(e,0),n)};return function(t){var n=Object(t);if(null===t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,o=1<arguments.length?arguments[1]:void 0;if(void 0!==o){if(!e(o))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(r=arguments[2])}for(var a,s=i(n.length),u=e(this)?Object(new this(s)):new Array(s),c=0;c<s;)a=n[c],u[c]=o?void 0===r?o(a,c):o.call(r,a,c):a,c+=1;return u.length=s,u}}()),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value,configurable:!0,writable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null===this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var i=arguments[1],r=0;r<n;){var o=e[r];if(t.call(i,o,r,e))return r;r++}return-1},configurable:!0,writable:!0});var vn=function(){function t(){var t=this;this.parseAttributes=function(){if(!t.data.account)throw"An account attribute is required in the embed code.";t.data.embed="tp"+t.data.account},this.reset=function(){Array.from(document.querySelectorAll("[id^='tp-']")).filter()).forEach()),t.init(!0)},new on,this.script=(r.hasProp(window,"_tpdev")?window._tpdev.script:null)||document.currentScript||gn.a.near(),this.data={account:null,env:this.script.getAttribute("data-env")||"production",shopify:void 0!==window.Shopify,script:this.script,pageStart:r.time(),debug:r.debugEnabled(),reset:this.reset},r.hasProp(window,"_tpdev")&&(this.data=wn({},this.data,window._tpdev.data));var e=function(e,n){if(e&&(t.data.account=e),n&&(t.data.env=n),t.data.debug){var o="a."+i.API_DOMAIN+"/debug/js/ApiDebug.js?"+(new Date).getTime();"production"!==t.data.env&&(o=i.API_URLS.dev.debug),r.script("https://"+o),window._tpdebug=!0}if(void 0!==r.queryArgs().tpdev&&!r.hasProp(window,"_tpdev"))return r.script("https://"+i.API_URLS.dev.api+"?tpdev=true"),void(window._tpdev={script:t.data.script,data:t.data});t.init()},n=function(n){return function(n){for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];switch(n){case"account":case"env":case"shopify":case"debug":t.data[n]=r[0];break;case"init":default:e.apply(void 0,r)}}.apply(void 0,n)};window._tpq&&Array.isArray(window._tpq)&&window._tpq.forEach(n),window._tpq=[],window._tpq.push=n,this.script&&this.script.getAttribute("data-account")&&e(this.script.getAttribute("data-account"),this.script.getAttribute("data-env")||"production")}return t.prototype.init=function(t){void 0===t&&(t=!1),a.trigger(document,"Api.init"),window.tp_loaded=!0,this.parseAttributes(),window[this.data.embed]&&!t||(window[this.data.embed]=new pn,window[this.data.embed].init(this.data))},t}();try{window._tpq=window._tpq||[],new vn}catch(t){re.error(t)}}]);