"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9702],{49702:(e,t,l)=>{l.r(t),l.d(t,{default:);var a=l(49458),i={class:"a-playlist-btn"},n=(0,a.createElementVNode)("span",{class:"a-svg a-svg--picto-playlist-show"},null,-1),o={class:"a-playlist-btn__label"},s=(0,a.createElementVNode)("div",{class:"o-playlist__close-picto"},[(0,a.createElementVNode)("span",{class:"a-svg a-svg--picto-chevron-bottom-small"})],-1),r={key:0,"data-playlist-elements-wrapper":"",class:"o-playlist__wrapper"},d={key:0,class:"o-playlist__itemlist-wrapper"},c={key:1,class:"a-playlist-title"},m={key:2,class:"o-playlist__itemlist-wrapper"},p={key:1,class:"o-playlist__message"},y=["href","innerHTML"];var u=l(27641),g=l(3658),f=l(20771),v=l(76366),h=l(40395),P=l(19327),k=["data-item-id"],_=(0,a.createElementVNode)("button",{"data-playlist-item-drag":"",type:"button",class:"m-playlist-item__drag-btn","aria-label":"Move item"},null,-1),b={class:"m-playlist-item__play-wrapper"},I={class:"m-playlist-item__duration"},w=["innerHTML"],C=(0,a.createElementVNode)("span",{class:"a-svg a-svg--picto-pause-circle-filled"},null,-1),V=["title"],E={class:"m-playlist-item__infos__pubdate"},B=["title"];var N=l(56585),D=(0,g.Z)();const O={name:"PlayerPlaylist",components:{PlayMedia:N.default},mixins:[(0,h.Z)(D,"",!1)],props:{item:{type:Object,required:!0}},emits:["delete-item-playlist"],data:function(){return{playlist:void 0,isPlaying:!1,isDragged:!1,iconLoader:void 0}},computed:{setClasses:function(){return window.store.player.isPlayerPlaying&&window.store.player.mediaId===this.item.mediaId?"m-playlist-item m-playlist-item--playing":"m-playlist-item"}},created:function(){var e;this.iconLoader=(null===(e=window.contextlayer.player_audio)||void 0===e?void 0:e.play_loader)||""},mounted:function(){this.isPlaying=window.store.player.isPlayerPlaying&&window.store.player.mediaId===this.item.mediaId},methods:{deleteItem:};var S=l(83744);const x=(0,S.Z)(O,[["render",function(e,t,l,i,n,o){var s=(0,a.resolveComponent)("play-media");return(0,a.openBlock)(),(0,a.createElementBlock)("div",{key:l.item.mediaId,"data-item-id":l.item.mediaId,class:(0,a.normalizeClass)(o.setClasses)},[_,(0,a.createElementVNode)("div",b,[(0,a.createVNode)(s,{"media-id":l.item.mediaId,"is-playlist":!0,"has-click-event":!1,classes:"m-playlist-item__play-btn","play-class":"a-picto-play-pause--play","pause-class":"a-picto-play-pause--pause",style:(0,a.normalizeStyle)({backgroundImage:"url(".concat(l.item.mediaImage,")")}),onClick:t[0]||(t[0]=function(t){return e.playOrPause({newMedia:l.item.mediaId})})},{label:(0,a.withCtx)((function(){return[(0,a.createElementVNode)("p",I,(0,a.toDisplayString)(l.item.diffusion.duration),1)]})),play:(0,a.withCtx)((function(){return[(0,a.createElementVNode)("span",{class:"a-svg a-svg--picto-play-circle-filled",innerHTML:n.iconLoader},null,8,w)]})),pause:(0,a.withCtx)((),_:1},8,["media-id","style"]),(0,a.createElementVNode)("div",{class:"m-playlist-item__infos",onClick:t[1]||(t[1]=},[(0,a.createElementVNode)("p",{class:"m-playlist-item__infos__program",title:l.item.emission.title},(0,a.toDisplayString)(l.item.emission.title),9,V),(0,a.createElementVNode)("p",E,(0,a.toDisplayString)(l.item.diffusion.pubdate),1),(0,a.createElementVNode)("p",{class:"m-playlist-item__infos__edition",title:l.item.diffusion.title},(0,a.toDisplayString)(l.item.diffusion.title),9,B)])]),(0,a.createElementVNode)("button",{type:"button",class:"m-playlist-item__remove-btn a-close-button","aria-label":"Remove from playlist",onClick:t[2]||(t[2]=function(){return o.deleteItem&&o.deleteItem.apply(o,arguments)})})],10,k)}]]);r Z=(0,g.Z)();const T={name:"PlayerPlaylist",components:{draggable:(0,a.defineAsyncComponent)((),PlayerPlaylistItem:x},mixins:[(0,h.Z)(Z,"",!1)],props:{enableAutomaticPlaylist:{type:Boolean,default:!1}},isPlayerPlaying:{type:Boolean,required:!0},data:function(){return{draggedId:void 0,relatedId:void 0,currentMediaId:"",podcastsUrl:""}},computed:M(M({},(0,f.Kc)(v.Z)),{},{manualPlaylist:{get:function(){return this.playlistStore.manualPlaylist},set:,automaticPlaylist:{get:set:function(e){this.rewritePlaylist(e,this.draggedId,this.relatedId,!0)}},playlistAutoEmissionTitle:function(){var e,t;return(null===(e=this.automaticPlaylist[0])||void 0===e||null===(t=e.emission)||void 0===t?void 0:t.title)||""},playlistClasses:function(){var e="o-playlist";return this.playlistStore.isOpen&&(e+=" o-playlist--show"),this.playlistStore.playlist.length>0&&(e+=" o-playlist--player-not-empty"),e}}),created:function(){this.podcastsUrl=window.contextlayer.programs_page_url||""},methods:M(M({},(0,f.nv)(v.Z,["togglePlaylist","addToPlaylist","removeFromPlaylist","rewritePlaylist","rewriteAutoPlaylist"])),{},{onMove:function(e){var t=e.relatedContext.index,l=e.draggedContext.index;this.draggedId=this.playlistStore.playlist[l].mediaId,this.relatedId=this.playlistStore.playlist[t].mediaId},updatePlaylist:deleteItem:function(e){P.Z.publish("player.playlist.remove",{mediaId:e}),this.removeFromPlaylist(e,!1)}})},L=(0,S.Z)(T,[["render",function(e,t,l,u,g,f){var v=(0,a.resolveComponent)("player-playlist-item"),h=(0,a.resolveComponent)("draggable");return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:(0,a.normalizeClass)(f.playlistClasses),"data-open-playlist-area":""},[(0,a.createElementVNode)("button",{type:"button",class:"o-playlist__btn-toggle",onClick:t[0]||(t[0]=},[(0,a.createElementVNode)("div",i,[n,(0,a.createElementVNode)("span",o,(0,a.toDisplayString)(e.$translate("playlist.module.label")),1)]),s]),e.playlistStore.playlist&&e.playlistStore.playlist.length>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",r,[f.manualPlaylist&&f.manualPlaylist.length>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",d,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(f.manualPlaylist,(function(e){return(0,a.openBlock)(),(0,a.createBlock)((0,a.resolveDynamicComponent)("script"),{key:"".concat(e.mediaId,"-json"),"data-media-id":e.mediaId,type:"application/json"},{default:(0,a.withCtx)((function(){return[(0,a.createTextVNode)((0,a.toDisplayString)(e),1)]})),_:2},1032,["data-media-id"])})),128)),(0,a.createVNode)(h,{modelValue:f.manualPlaylist,"onUpdate:modelValue":t[1]||(t[1]=function(e){return f.manualPlaylist=e}),"item-key":"playlist-draggable",class:"o-playlist__itemlist",tag:"div",handle:"[data-playlist-item-drag]",move:f.onMove,"force-fallback":"true",group:"playlist",onChange:f.updatePlaylist},{item:(0,a.withCtx)((function(e){var t=e.element;return[((0,a.openBlock)(),(0,a.createBlock)(v,{key:t.mediaId,item:t,onDeleteItemPlaylist:f.deleteItem},null,8,["item","onDeleteItemPlaylist"]))]})),_:1},8,["modelValue","move","onChange"])])):(0,a.createCommentVNode)("",!0),f.automaticPlaylist&&f.automaticPlaylist.length>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",c,[(0,a.createElementVNode)("span",null,[(0,a.createTextVNode)((0,a.toDisplayString)(e.$translate("playlist.auto.show"))+" ",1),(0,a.createElementVNode)("span",null,(0,a.toDisplayString)(f.playlistAutoEmissionTitle),1)])])):(0,a.createCommentVNode)("",!0),l.enableAutomaticPlaylist&&f.automaticPlaylist&&f.automaticPlaylist.length>0?((0,a.openBlock)(),(0,a.createElementBlock)("div",m,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(f.automaticPlaylist,(function(e){return(0,a.openBlock)(),(0,a.createBlock)((0,a.resolveDynamicComponent)("script"),{key:"".concat(e.mediaId,"-json"),"data-media-id":e.mediaId,type:"application/json"},{default:(0,a.withCtx)((function(){return[(0,a.createTextVNode)((0,a.toDisplayString)(e),1)]})),_:2},1032,["data-media-id"])})),128)),(0,a.createVNode)(h,{modelValue:f.automaticPlaylist,"onUpdate:modelValue":t[2]||(t[2]=,"item-key":"playlist-draggable",class:"o-playlist__itemlist",tag:"div",handle:"[data-playlist-item-drag]",move:f.onMove,"force-fallback":"true",group:"playlist",onChange:f.updatePlaylist},{item:(0,a.withCtx)((function(e){var t=e.element;return[((0,a.openBlock)(),(0,a.createBlock)(v,{key:t.mediaId,item:t,onDeleteItemPlaylist:f.deleteItem},null,8,["item","onDeleteItemPlaylist"]))]})),_:1},8,["modelValue","move","onChange"])])):(0,a.createCommentVNode)("",!0)])):((0,a.openBlock)(),(0,a.createElementBlock)("div",p,[(0,a.createElementVNode)("p",null,(0,a.toDisplayString)(e.$translate("playlist.empty.label")),1),g.podcastsUrl?((0,a.openBlock)(),(0,a.createElementBlock)("a",{key:0,class:"o-playlist__message__link",href:g.podcastsUrl,innerHTML:e.$translate("playlist.discover.podcasts.cta")},null,8,y)):(0,a.createCommentVNode)("",!0)]))],2)}]])}}]);