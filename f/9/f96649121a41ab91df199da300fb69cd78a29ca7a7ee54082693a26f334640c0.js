var DeqwasDebug=false;if(typeof window.deqwas_ncst==="undefined"){window.deqwas_ncst=0}if(typeof window.KANADEDuplicateInfos==="undefined"){window.KANADEDuplicateInfos=[]}if(typeof window.KANADEAddEventListener==="undefined"){window.KANADEAddEventListener=false}var KcDeqwasAgent=KcDeqwasAgent.appName="common";KcDeqwasAgent.collectaspx="Collection.aspx";KcDeqwasAgent.choiceaspx="Choice.aspx";KcDeqwasAgent.deqwasName="deqwas-k";KcDeqwasAgent.CollectDivId="deqwas-collection-k";KcDeqwasAgent.ScreenDivId="deqwas-screen-k";KcDeqwasAgent.urlLimitation=2083;KcDeqwasAgent.ScriptType="rec";KcDeqwasAgent.urlmaxlength=1024;KcDeqwasAgent.is_smartPhone=function(){var b=["iPhone","iPad","Android","blackberry","windowsPhone"];var a=new RegExp(b.join("|"),"i");return a.test(navigator.userAgent)};KcDeqwasAgent.GetParamaterList=function(){if(KcDeqwasAgent.URLParamaters){return KcDeqwasAgent.URLParamaters}KcDeqwasAgent.URLParamaters=new Object();var c=location.search.split(/[\?\&]/);for(var b=0;b<c.length;b++){if(!c[b]||!c[b].match(/=+/)){continue}var a=c[b].split("=");KcDeqwasAgent.URLParamaters[a[0]]=a[1]}return KcDeqwasAgent.URLParamaters};KcDeqwasAgent.GetBaseUrl=KcDeqwasAgent.ArrayContains=KcDeqwasAgent.Clone=function(d){var c=new Object();for(var b in d){if(d[b]==null){c[b]=null}else{if(typeof d[b]=="Array"){c[b]=new Array();for(var a=0;a<d[b].length;a++){c[b].push(d[b][a])}}else{if(typeof d[b]=="Object"){c[b]=KcDeqwasAgent.Clone()}else{c[b]=d[b]}}}}if(typeof c.ncst==="undefined"){c.ncst=window.deqwas_ncst}d.addXci=function(f){var j=KcDeqwasAgent.GetCookieValue("kanade_xci");if(!j){return f}var i="knd_xci";var h=f.match(/([^?#]+)(\?[^#]*)?(\#.*)?/);var f=h[1];var e=h[2]||"";var g=h[3]||"";if(!e){return f+"?"+i+"="+encodeURIComponent(j)+g}else{var k=e.split("&");k.push(i+"="+encodeURIComponent(j));return f+k.join("&")+g}};return c};KcDeqwasAgent.Concat=function(c){var a=arguments[0];for(var b=1;b<arguments.length;b++){a+=arguments[b]}return a};KcDeqwasAgent.ConcatSep=function(b,e){var d="";var a=arguments[1];for(var c=2;c<arguments.length;c++){a+=d;a+=arguments[c];d=b}return a};KcDeqwasAgent.CollectorConst={Keywords:1,Description:2,SiteCatalyst:4,Title:8};KcDeqwasAgent.GetCookie=function(c){var f=c+"=";var e=null;var b=document.cookie+";";var a=b.lastIndexOf(f);if(a!=-1){var d=b.indexOf(";",a);e=unescape(b.substring(a+f.length,d))+";"}return e};KcDeqwasAgent.GetCookieValue=function(c){var f=c+"=";var e=null;var b=document.cookie+";";var a=b.lastIndexOf(f);if(a!=-1){var d=b.indexOf(";",a);e=b.substring(a+f.length,d)}return e};KcDeqwasAgent.SetCookie=function(a,b){date=new Date();date.setTime(date.getTime(),(365*24*60*60*1000));myItem=KcDeqwasAgent.Concat(a,"=",escape(b),";");myExpires=KcDeqwasAgent.Concat("expires=",date.toGMTString());document.cookie=KcDeqwasAgent.Concat(myItem,myExpires,"path=/")};KcDeqwasAgent.SetCookieDomain=function(b,e,a){var d=b+"="+e;if(typeof a==="number"){d+="; path=/";d+="; max-age="+(a*60*60*24)}var g=document.domain.split(".");var c=g.length-1;var f="";while(c>=0&&KcDeqwasAgent.GetCookieValue(b)!==encodeURIComponent(e)){f="."+g[c]+f;document.cookie=d+"; domain="+f;c--}};KcDeqwasAgent.DeleteCookie=KcDeqwasAgent.prototype={codeVersion:"xxx",collectionType:{normal:"i",cart:"c",shipping:"s",top:"t",category:"g"},pageType:{top:"t",category:"g",item:"i",cart:"c",shipping:"s"},screenType:{normal:"r",cart:"k",shipping:"h",top:"t2",category:"g2"},screenElementId:KcDeqwasAgent.ScreenDivId,collectionElementId:KcDeqwasAgent.CollectDivId,visibleFunctionIds:{r:true,k:true,h:true,t2:true,g2:true},etccount:0,DEQWAS_MAPPING_CONSTS:{agentPrpertyMapping:{t:["item","minimum","top",true],g:["item","essential","category",true],i:["item","minimum","normal",true],c:["item","nothing","cart",true],s:["item","nothing","shipping",true]},additionalParamsMapping:{t:{},g:{info:"category_name"},i:{iid:"item_id"},c:{clist:"cart_list"},s:{oid:"order_id",orders:"order_items",onum:"order_total",oquan:"order_quantity"}},propertyHigherMapping:{t:["ncst"],g:["info","ncst"],i:["iid","ncst"],c:["clist","ncst"],s:["oid","orders","onum","oquan","ncst"]}},initialize:function(b,e,d){if(d&&d.constant){for(var c in d.constant){if(d.constant[c]){this[c]=d.constant[c]}}}if(d.params!=null&&d.params.hasOwnProperty("page_type")&&d.params.page_type!=null){this.symbol=this.pageType[d.params.page_type]}this.site=b;if(e!=null){this.role=e}else{if(this.DEQWAS_MAPPING_CONSTS.agentPrpertyMapping.hasOwnProperty(this.symbol)){this.role=this.DEQWAS_MAPPING_CONSTS.agentPrpertyMapping[this.symbol][0]}}this.objectId=d.id?d.id:1;if(d.option==undefined){d.option=new Object()}this.silence=d.option.silence;this.parameters={cid:this.site,fc:"",iid:"",role:this.role,iname:d.name,l:d.location,caption:d.caption,expression:"",essential:"",uid:d.viewer_id,image:d.image,price:d.price,category:d.category,place:"",cb:(new Date()).getTime(),knd_xci:"",stampctl:""};this.defCollect();this.parameterPriority={higher:["cid","fc","iid","type","knd_xci"],lower:[]};this.noscreen=d.option.noscreen;if(d.option.noscreen||d.option.solitude){this.parameters.expression=d.option.noscreen?"F":"X";this.parameters.expression+=d.option.solitude?"T":"X"}this.targetUrl=KcDeqwasAgent.GetBaseUrl.apply(this)+"/"+this.collectaspx;this.iframeStyle={width:"0px",height:"0px"};this.iframeOptions={frameborder:"0",scrolling:"no"};var a=KcDeqwasAgent.GetParamaterList()["knd_xci"];if(typeof a!=="undefined"){KcDeqwasAgent.SetCookieDomain("kanade_xci",a,60)}this.parameters.knd_xci=(KcDeqwasAgent.GetCookieValue("kanade_xci"))?KcDeqwasAgent.GetCookieValue("kanade_xci"):"\t"},createAdditionalParameters:function(d){var a={};if(this.DEQWAS_MAPPING_CONSTS.additionalParamsMapping.hasOwnProperty(this.symbol)){var c=this.DEQWAS_MAPPING_CONSTS.additionalParamsMapping[this.symbol];for(var b in c){a[b]=d.params[c[b]]}}return a},setParametersPriority:function(){if(this.DEQWAS_MAPPING_CONSTS.propertyHigherMapping.hasOwnProperty(this.symbol)){var b=this.DEQWAS_MAPPING_CONSTS.propertyHigherMapping[this.symbol];for(var a in b){this.parameterPriority.higher.push(b[a])}}},setEssential:function(a){if(a!=null){this.parameters.essential=a}else{if(this.DEQWAS_MAPPING_CONSTS.agentPrpertyMapping.hasOwnProperty(this.symbol)){this.parameters.essential=this.DEQWAS_MAPPING_CONSTS.agentPrpertyMapping[this.symbol][1]}}},_createIframeSrcWithLimit:function(l,c){var a=[];var h=new Object();var e=this._concatKey(this.parameterPriority,l);var k=""+c;var b=k.length;for(var d=0;d<e.length;d++){var j=e[d];if(l[j]&&typeof l[j]!="function"&&typeof h[j]=="undefined"){var g=(typeof l[j]=="string")?l[j].replace(/[\f\n\r\t\v]/g,""):l[j];g=g.toString().replace(/['"]/g,"").replace(/&quot;/g,"");var f=j+"="+encodeURIComponent(g);b+=1+f.length;if(b>this.urlLimitation){break}a.push(f)}}k+="?"+a.join("&");return k},_concatKey:function(d,f){var g=[].concat(d.higher,d.lower);for(var c in f){if(!KcDeqwasAgent.ArrayContains(g,c)){g.splice(g.length-d.lower.length,0,c)}}var b=0;var a=0;var e=[];while(b<g.length){if(g.indexOf(g[b])===b){e[a]=g[b];a++}b++}return e},_flatten:function(d,e,b){var a="";for(var c in d){a+=c;a+=e;a+=d[c];a+=b}return a},setAdditionalParameters:setScreenElementId:function(a){this.screenElementId=a},setCollectionElementId:setIframeStyle:function(d,a,b){if(!d||!a){return}b=b||{};this.iframeStyle.width=d;this.iframeStyle.height=a;this.parameters.area=d+"x"+a;for(var c in b){this.iframeStyle[c]=b[c]}},setIframeOptions:function(b){if(!b){return}for(var a in b){this.iframeOptions[a]=b[a]}},_createIframe:function(f,g,b,d,a){var e=document.createElement("iframe");e.setAttribute("id",g);e.setAttribute("src",f);e.setAttribute("name",b);e.setAttribute("style",this._flatten(d,":",";"));if(d.width){e.setAttribute("width",d.width)}if(d.height){e.setAttribute("height",d.height)}for(var c in a){e.setAttribute(c,a[c])}if(DeqwasDebug){alert(f)}return e},appendIframeToElement:function(b,d){var e;if(b!=null){e=b}else{if(this.DEQWAS_MAPPING_CONSTS.agentPrpertyMapping.hasOwnProperty(this.symbol)){e=this.DEQWAS_MAPPING_CONSTS.agentPrpertyMapping[this.symbol][2]}}var f;if(d!=null){f=d}else{if(this.DEQWAS_MAPPING_CONSTS.agentPrpertyMapping.hasOwnProperty(this.symbol)){f=this.DEQWAS_MAPPING_CONSTS.agentPrpertyMapping[this.symbol][3]}}var c;var h;if(f){h=this.collectionType[e];c=this.CollectDivId}else{h=this.screenType[e];c=this.ScreenDivId}this.parameters.fc=h;if(!document.getElementById(c)){var g=document.createElement("div");g.setAttribute("id",c);document.body.appendChild(g)}if(this.silence){this.parameters.essential="confirmation"}if(this.noscreen){this.iframeStyle={width:"0px",height:"0px"}}var a=this.deqwasName+"-kc-"+e+"-"+this.site+"-"+this.objectId;if(!document.getElementById(a)){document.getElementById(c).appendChild(this._createIframe(this._createIframeSrcWithLimit(this.parameters,this.targetUrl),a,a,this.iframeStyle,this.iframeOptions))}let tagInfos={version:b==null?"1.0":"0.5",cid:this.site,symbol:this.parameters.fc,matchData:[],dataCount:0,elementId:c,iframeData:""};if(window.KANADEDuplicateInfos.length>=1){window.KANADEDuplicateInfos.forEach(function(i){if(i.cid===tagInfos.cid||(i.cid!==tagInfos.cid&&i.version=="0.5"&&tagInfos.version=="0.5")){tagInfos.matchData.push(i.cid+"-"+i.symbol)}});tagInfos.dataCount=tagInfos.matchData.length;if(tagInfos.dataCount!=0){this.parameters.stampctl=tagInfos.matchData.join(",")}}let iframeIdName=this.deqwasName+"-kc-"+e+"-"+this.site+"-"+this.objectId+Math.floor(Math.pow(2,15)*Math.random());tagInfos.iframeData=this._createIframe(this._createIframeSrcWithLimit(this.parameters,KcDeqwasAgent.GetBaseUrl.apply(this)+"/Validate.aspx"),iframeIdName,iframeIdName,this.iframeStyle,this.iframeOptions);window.KANADEDuplicateInfos.push(tagInfos);window.DeqwasCallBacks.shift();return a},defCollect:function(){var c=window;if(c.document&&c.document.location){var b=c.document.location.href;if(b.length>this.urlmaxlength){b=b.substring(0,this.urlmaxlength);this.parameters.url_flg="1"}else{this.parameters.url_flg="0"}this.parameters.url=b}if(c.document&&c.document.referrer){var d=c.document.referrer;if(d.length>this.refmaxlength){d=d.substring(0,this.refmaxlength);this.parameters.ref_flg="1"}else{this.parameters.ref_flg="0"}this.parameters.ref=d}var a=KcDeqwasAgent.GetParamaterList()["deqwas_inflow"];if(a){this.parameters.inflow=a}this.collect(KcDeqwasAgent.CollectorConst.Keywords,KcDeqwasAgent.CollectorConst.Description,KcDeqwasAgent.CollectorConst.Title)},collect:function(){var b=0;for(var d=0;d<arguments.length;d++){b|=arguments[d]}var h=document.getElementsByTagName("meta");for(var d=0;d<h.length;d++){var m=h[d];var a=m.getAttribute("name");var f=m.getAttribute("http-equiv");var g=m.getAttribute("content");if(!a||!g){continue}if((KcDeqwasAgent.CollectorConst.Keywords&b)==KcDeqwasAgent.CollectorConst.Keywords){if(a.match(/keywords/i)){this.parameters.keywords=g}}if((KcDeqwasAgent.CollectorConst.Description&b)==KcDeqwasAgent.CollectorConst.Description){if(a.match(/description/i)){this.parameters.description=g}}}var e=window;var c=e;if((KcDeqwasAgent.CollectorConst.Title&b)==KcDeqwasAgent.CollectorConst.Title){this.parameters.title=c.document.title}if((KcDeqwasAgent.CollectorConst.SiteCatalyst&b)==KcDeqwasAgent.CollectorConst.SiteCatalyst){var k={};if(typeof window.s==="object"){var l=window.s.vl_g.split(",");for(var d in l){if(typeof l[d]==="string"){var a=l[d];var j=window.s[a]?typeof window.s[a]:typeof window.s[a.toLowerCase()];if(j==="string"||j==="number"||j==="boolean"){k["s_"+a.toLowerCase()]=window.s[a]}}}}this.catalysts=k}},SetActOption:function(){for(var a=0;a<arguments.length;a++){if(a<10){this.paramater["note"+a]=arguments[a]}else{if(this.etccount<10){this.paramater["etc"+this.etccount]=arguments[a];this.etccount++}else{return}}}},SetItemOption:function(){for(var a=0;a<arguments.length;a++){if(a<10){this.paramater["extra"+a]=arguments[a]}else{if(this.etccount<10){this.paramater["etc"+this.etccount]=arguments[a];this.etccount++}else{return}}}}};(function(a){if(!a){return}var g=a.slice(0);var f=new Array();var d,b;for(b in g){d=g[b];if(d&&"function"===typeof d&&"undefined"===typeof f[b]){try{d()}catch(c){}}else{if("[object Object]"===d.toString()){if(d.hasOwnProperty("id")&&"function"===typeof d.callBack){try{d.callBack(d.id,window.deqwas_ncst)}catch(c){}}}}window.deqwas_ncst=1}})(window.DeqwasCallBacks);window.addEventListener("load",function(){if(window.KANADEAddEventListener){return}window.KANADEAddEventListener=true;let getCids=function(e){let cids=[];e.forEach(;return cids};let getParameter=function(e){let parameterStr=e.split("?");let parameters=parameterStr[parameterStr.length-1].split("&");let parameterKeyValue={};parameters.forEach(function(f){let key=f.split("=")[0];let value=f.split("=").length>=2?f.split("=")[1]:"";parameterKeyValue[key]=value});return parameterKeyValue};let setParameter=function(e,f){let paramaters=[];for(key in f){paramaters.push(key+"="+f[key])}return e+"?"+paramaters.join("&")};let putTagInfo=function(e,g,f){let parameters=getParameter(e.iframeData.src);let stampctls=[];g.forEach(function(h){if(f){if(h.cid!=e.cid){stampctls.push(h.cid+"-"+h.symbol)}return}stampctls.push(h.cid+"-"+h.symbol)});parameters.stampctl=(parameters.hasOwnProperty("stampctl"))?parameters.stampctl:"";parameters.stampctl.split("%2C").forEach(function(h){if(h!=""&&stampctls.indexOf(h)==-1){stampctls.push(h)}});parameters.ncst=1;parameters.stampctl=stampctls.join("%2C");e.iframeData.src=setParameter(e.iframeData.src.split("?")[0],parameters);return e};let putUniqueSendInfos=function(g,f,e){f.forEach(function(h){if(h==g.cid){e.push(g)}});f=f.filter(;return f};const a=window.KANADEDuplicateInfos.filter(function(e){return(e.dataCount!=0&&e.version=="1.0")}).sort(function(f,e){return e.dataCount-f.dataCount});const d=window.KANADEDuplicateInfos.filter(.sort(;if(a.length==0&&d.length==0){return}let newVersionCids=getCids(a);let oldVersionCids=getCids(d);let allCids=newVersionCids.concat(oldVersionCids).filter(;let sendInfos=[];a.forEach(;const c=oldVersionCids.length>=2;const b=d.slice();d.forEach(function(e){if(e.dataCount==0&&!c){return}if(c){e=putTagInfo(e,b,true)}oldVersionCids=putUniqueSendInfos(e,oldVersionCids,sendInfos)});if(allCids.length==1&&sendInfos.length==2){if(sendInfos[0].dataCount>sendInfos[1].dataCount){sendInfos.pop()}else{sendInfos.shift()}}sendInfos.forEach(function(e){let parameters=getParameter(e.iframeData.src);if(!parameters.hasOwnProperty("stampctl")){return}document.getElementById(e.elementId).appendChild(e.iframeData)})},false);