(function(){var c=window,t=document;var i="//tracker.bdash-cloud.com/tracking";var x="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ+-";var p=5;var b={};b.toString64=function(z){var y="";while(z>0){y=x.charAt(z%64)+y;z=Math.floor(z/64)}return y};b.encodeURL=function(y){if(typeof(encodeURIComponent)==="function"){return encodeURIComponent(y).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}else{return escape(y)}};b.isObject=function(y){return("[object Object]"===Object.prototype.toString.apply(y))};b.isString=function(y){return("[object String]"===Object.prototype.toString.apply(y))};b.isArray=function(y){return("[object Array]"===Object.prototype.toString.apply(y))};b.isFunction=b.contains=function(z,y){for(var A=0;A<z.length;A++){if(y===z[A]){return true}}return false};b.capitalizeFirstLetter=b.makeRandomNumber=b.addListener=function(y,A,z){if(y.attachEvent){y.attachEvent("on"+A,z)}else{if(y.addEventListener){y.addEventListener(A,z,false)}}};b.removeListner=function(y,A,z){if(y.detachEvent){y.detachEvent("on"+A,z)}else{if(y.removeEventLister){y.removeEventLister(A,z,false)}}};b.getUnixtimeSec=var d=function(){var y=t.location.search.match(/_bdsr_referrer=([^&#]*)([&#].+)?$/);var z=y?y[1]:t.referrer;return z};var j=new function(){var z=var A=function(D,C){if(!c.XMLHttpRequest){return false}var B=new c.XMLHttpRequest();B.open("POST",z("POST"),true);B.setRequestHeader("Content-Type","text/plain");B.withCredentials=true;B.onreadystatechange=function(){4===B.readyState&&(C(B.responseText),B=null)};B.send(D);return true};var y=function(D,C){if(!c.XDomainRequest){return false}var B=new c.XDomainRequest();B.open("POST",z("POST"));B.setRequestHeader("Content-Type","text/plain");B.withCredentials=true;B.onerror=B.onload=B.send(D);return true};this.send=function(C,B){B=B||function(){};if(8192>=C.length&&(0>c.navigator.userAgent.indexOf("Firefox")||[].reduce)){A(C,B)||y(C,B)||B()}}}();var h={};h.getValues=function(D){var B=[],C=t.cookie.split(";");var A=new RegExp("^\\s*"+D+"=\\s*(.*)\\s*$");for(var z=0;z<C.length;z++){var y=C[z].match(A);y&&(B.push(y[1]))}return B};h.set=function(z,G,C,E,y){var B=z+"="+G+";";C&&(B+="expires="+(new Date((new Date()).getTime()+C)).toUTCString()+";");E&&(B+="domain="+E+";");y&&(B+="path="+(y||"/")+";");var D=t.cookie;t.cookie=B;if(t.cookie!==D){return true}var F=h.getValues(z);for(var A=0;A<F.length;A++){if(G===F[A]){return true}}return false};h.filterByDomainLevel=function(z,y){var E=[],C=[],B;for(var A=0;A<z.length;A++){var D=z[A];if(D.domainLevel===y){E.push(D)}else{if(undefined===B||D.domainLevel<B){C=[D];B=D.domainLevel}else{if(D.domainLevel===B){C.push(D)}}}}};var n={};n.linkDomains=function(J,K,B){unction y(L,N){for(var M=0;M<L.length;M++){if(0<=N.indexOf(L[M])){return true}}return false}unction D(M){var L=M.get("visitorId");return L+"."+b.getUnixtimeSec()}function C(L){if(b.isArray(B)){return y(B,L)}return false}function H(W,O,N){var S=O,Q=S.match(/(.*)([?&#])(?:_bdld=[^&#]*)(?:&?)(.*)/);Q&&(3<=Q.length)&&(S=Q[1]+(Q[3]?Q[2]+Q[3]:""));var M=D(W);W.set("linkerParam",M);var T=S.indexOf("/");var U=S.indexOf("?",(0>T?0:T));var P=S.indexOf("#",(0>U?0:U));var L;if(N){var R=((0>P)?"#":"&")+"_bdld="+M;L=S+R}else{var V=((0>U)?"?":"&")+"_bdld="+M;L=((0>P)?S+V:S.substr(0,P)+V+S.substr(P))}return L}function F(N,O,L){if(!O.getAttribute("action")){return false}var R=O.method.toUpperCase();if("GET"===R){var Q=O.childNodes||[];for(var M=0;M<Q.length;M++){if("_bdld"===Q[M].name){Q[M].setAttribute("value",N);return}}var P=t.createElement("input");P.setAttribute("type","hidden");P.setAttribute("name","_bdld");P.setAttribute("value",N);O.appendChild(P)}else{if("POST"===R){O.setAttribute("action",H(N,O.getAttribute("action"),L))}}}var z=(function(){return function(O){try{var N=O.target||O.srcElement;for(var M=0;N&&N.nodeName&&!(N.nodeName.match(/^(a|area)$/i)&&N.href)&&M<100;M++){N=N.parentNode}if(N&&/^https?:$/.test(N.protocol)&&!A(N.hostname)&&y(K,N.hostname)&&!I(N.href)){N.href=H(J,N.href,C(N.hostname))}}catch(L){}}})();var G=(function(){return function(N){var M=N.target||N.srcElement;if(M&&M.getAttribute("action")){var L=M.getAttribute("action").match(/^https?:\/\/([^\/:]+)/);if(L&&!A(L[1])&&y(K,L[1])){F(J,M,C(L[1]))}}}})();b.addListener(t,"mousedown",z);b.addListener(t,"keyup",z);b.addListener(t,"touchstart",z);for(var E=0;E<t.forms.length;E++){b.addListener(t.forms[E],"submit",G)}};n.getIdFromLinker=function(){function A(C){var E=C*1,D=b.getUnixtimeSec();return(E<=D)&&(D<E+p)}var z=t.location.href.match(/[?&#]_bdld=([^&#]*)/),y="";if(z&&z[1]&&-1<z[1].indexOf(".")){var B=z[1].split(".");if((2===B.length&&t.referrer)||(3===B.length&&A(B[2]))){y=B[0]+"."+B[1]}}return y};n.removeIdFromUrl=function(){try{if(!b.isObject(c.bdashFlags)||!c.bdashFlags.removeBdld){return}var A=t.location.href;var y=A.match(/(.*)([?&#])(?:_bdld=[^&#]*)(?:&?)(.*)/);if(y&&3<=y.length){A=y[1]+(y[3]?y[2]+y[3]:"")}if(b.isFunction(history.replaceState)){history.replaceState("","",A);k.tracker.set("location",t.location.href)}}catch(z){}};var w={};w.getTarget=function(D,z){function B(F){if(!F.nodeName){return""}if(F.nodeName.match(/^(a|area|button|img)$/i)){return F.nodeName}else{if(F.nodeName.toUpperCase()==="INPUT"&&(F.type.toUpperCase()==="BUTTON"||F.type.toUpperCase()==="SUBMIT"||F.type.toUpperCase()==="IMAGE")){return"BUTTON"}else{return""}}}var C=D.srcElement||D.target;var A={},E=[];if(z>0){for(var y=0;C&&y<z;y++){A.ndNm=A.ndNm||B(C);A.id=A.id||C.id;A.nm=A.nm||C.name;A.cls=A.cls||C.className;A.href=A.href||C.href;A.src=A.src||C.src;A.rpi=A.rpi||C.getAttribute("_bd_rpi");A.riis=A.riis||C.getAttribute("_bd_riis");if(A.ndNm&&A.id&&A.nm&&A.cls&&A.href&&A.src){break}C=C.parentElement}}else{A=C}if(A&&A.ndNm){E.push("nodeName:"+A.ndNm);A.id&&E.push("id:"+A.id);A.nm&&E.push("name:"+A.nm);A.cls&&E.push("class:"+A.cls);A.href&&E.push("href:"+A.href);A.src&&E.push("src:"+A.src);A.rpi&&E.push("rpi:"+A.rpi);A.riis&&E.push("riis:"+A.riis)}return E.join(";")};var l=var e=e.prototype.newParam=function(C,B,y,A){var z=new l(B,y);!b.contains(this.keys,C)&&this.keys.push(C);A?this.hit[C]=z:this.base[C]=z};e.prototype.set=e.prototype.get=e.prototype.clear=e.prototype.query=function(){var A=[];for(var z=0;z<this.keys.length;z++){var y=this.get(this.keys[z]);y&&y.name&&y.value&&A.push(y.name+"="+b.encodeURL(y.value))}return A.join("&")};unction m(){var y=t.location.protocol;return("http:"!==y&&"https:"!==y)?false:true}function g(y){return/^BD-[A-Z0-9]{6}(-\d+)?$/.test(y.get("accountId"))}var u=u.prototype.add=u.prototype.exec=function(z){for(var y=0;y<this.list.length;y++){if(false===this.list[y](z)){return false}}return true};var q=q.prototype.sendReady=q.prototype.sendEvent=function(D,B){D=D||c.event;var C=w.getTarget(D,10);if(C&&C.match(/[;]?rpi:/)){var A=C.match(/rpi:([^;]*)/)[1];var y=C.match(/riis:([^;]*)/);var z=y&&y[1];B.send({type:"recommend_click",recommendPatternId:A,recommendItemIds:z})}else{if(C){B.send({type:"click",eventTarget:C,eventAction:D.type})}}};var s=function(y){this.prm=new e();this.prm.newParam("hitType","ht",undefined);this.prm.newParam("accountId","ac",y.id);this.prm.newParam("visitorId","vt");this.prm.newParam("referrer","rf",d());this.prm.newParam("location","ln",t.location.href);this.prm.newParam("pageTitle","pt",t.title);this.prm.newParam("linkerParam","lp");this.prm.newParam("linkedDomain","ld",t.domain||"");this.prm.newParam("anchorDomain","ad","");this.prm.newParam("exttblCustomerKey","eck");this.prm.newParam("exttblCustomerValue","ecv");this.prm.newParam("exttblRelationalKey","erk");this.prm.newParam("exttblRelationalValue","erv");this.prm.newParam("exttblProductKey","epk");this.prm.newParam("exttblProductValues","epv");this.prm.newParam("tagVersion","v","0.0.1");var z=new q();this.prm.newParam("sendReady",null,z.sendReady);this.prm.newParam("sendEvent",null,z.sendEvent);this.filter=new u();this.filter.add(o);this.filter.add(m);this.filter.add(g);this.syncVendorQueue=[]};s.prototype.get=function(y){var z=this.prm.get(y);return z&&(z.value||"")};s.prototype.set=function(B,A){var F=this.prm.get(B);if(F){F.value=A;this.prm.set(B,F)}else{var z=["customTrackingProperty:ctp","customTrackingValue:ctv","customSessionProperty:csp","customSessionValue:csv","customVisitorProperty:cvp","customVisitorValue:cvv"];for(var D=0;D<z.length;D++){var C=z[D].split(":");var E=new RegExp(C[0]+"(\\d+)");var y=E.exec(B);y&&this.prm.newParam(y[0],C[1]+y[1],A)}}};s.prototype.send=function(y){var A={pageview:["page:pg"],click:["eventTarget:et","eventAction:ea"],recommend_pageview:["recommendPatternId:rpi","recommendItemIds:riis"],recommend_click:["recommendPatternId:rpi","recommendItemIds:riis"]};if(y.type){this.set("hitType",y.type);var D=A[y.type];for(var C=0;C<D.length;C++){var z=D[C].split(":");y.hasOwnProperty(z[0])&&this.prm.newParam(z[0],z[1],y[z[0]],true)}try{if(this.filter.exec(this)){var E=this;j.send(this.prm.query(),}}catch(B){}finally{this.prm.clear()}}};s.prototype.sendCompleteHandler=function(y){for(var z=0;z<this.syncVendorQueue.length;z++){this.syncVendorQueue[z].performSync(y)}this.syncVendorQueue=[]};s.prototype.getCookieValue=function(){var z=t.domain.split(".").length;var y=this.get("visitorId");return["BD",y,z].join(".")};s.prototype.setSessionCookie=function(){var D=t.domain,E="_bdck",B=63072000000,A="/";var z=D.split(".");for(var y=z.length-1;y>=0;y--){var C=z.slice(y).join(".");this.set("cookieDomain",C);if(h.set(E,this.getCookieValue(),B,C,A)){return true}}this.set("cookieDomain","failed");return false};s.prototype.createVisitorId=function(){var z=b.toString64(b.makeRandomNumber(4294967295)*1),y=b.toString64((new Date()).getTime()*1);return[z,y].join(".")};s.prototype.keepSession=function(){var H,G=h.getValues("_bdck"),y=t.domain;if(G.length>0){var C=[],A=y.split(".");for(var B=0;!H&&B<G.length;B++){var z=G[B].match(/^BD\.(.+)\.(.+)\.(\d+)$/);if(z){C.push({domainLevel:z[3]*1,visitorId:[z[1],z[2]].join(".")})}}if(1===C.length){H=C[0].visitorId}else{var F=A&&A.length,E=F&&h.filterByDomainLevel(C,F);H=E[0]&&(E[0].visitorId)}}var D=n.getIdFromLinker();n.removeIdFromUrl();H=D?D:H;H=H||this.createVisitorId();this.set("visitorId",H);this.setSessionCookie()};s.prototype.addDocumentOnClick=function(){var y=(function(z){return function(B){var A=z.get("sendEvent");A(B,z)}})(this);b.addListener(t,"click",y)};s.prototype.addDocumentOnMouseDown=function(){var y=(function(z){return function(B){var A=z.get("sendEvent");A(B,z)}})(this);b.addListener(t,"mousedown",y)};s.prototype.addOnload=function(){var y=(function(z){return )(this);b.addListener(c,"load",y)};s.prototype.addEvent=function(y){var z=((this);b.addListener(y.target,y.event,z)};s.prototype.syncLater=function(y){switch(y.vendor){case"yahoo":this.syncVendorQueue.push(new v({siteId:y.siteId}));return;case"google":this.syncVendorQueue.push(new r({clientKey:y.clientKey}));return;case"peopledmp":this.syncVendorQueue.push(new f({clientId:y.clientId}));return}};var v=function(y){this.siteId=y.siteId};v.prototype.performSync=function(){if((0==arguments.length)||"string"!==typeof arguments[0]){return}try{var z=JSON.parse(arguments[0]);if(!z.bdid){return}if(z.optout){return}bd_id=z.bdid;var y=t.createElement("script");var A=document.getElementsByTagName("script")[0];y.async=true;y.src="//s.yjtag.jp/tag.js#site="+this.siteId;A.parentNode.insertBefore(y,A)}catch(B){}};var r=function(y){this.clientKey=y.clientKey};r.prototype.performSync=function(){if((0==arguments.length)||"string"!==typeof arguments[0]){return}try{var y=JSON.parse(arguments[0]);if(!y.bdid){return}if(y.optout){return}var B=y.bdid;var z=new Image(1,1);z.src="https://cm.g.doubleclick.net/pixel?google_nid=bdash_dmp&google_cm&bd_id="+B+"&client_key="+this.clientKey;t.body.appendChild(z)}catch(A){}};var f=f.prototype.performSync=function(){if((0==arguments.length)||"string"!==typeof arguments[0]){return}try{var y=JSON.parse(arguments[0]);if(!y.bdid){return}if(y.optout){return}var B=y.bdid;var z=new Image(1,1);z.src="https://pp.d2-apps.net/v1/sync?p_id=bdash&p_uid="+B;t.body.appendChild(z)}catch(A){}};var k=new function(){this.tracker={};this.libraries=new e();this.queue=[]};k.create=function(z){this.tracker=new s(z);this.tracker.keepSession();this.tracker.addOnload();if(z.autoEvent!=="disabled"){this.tracker.addDocumentOnClick()}var y=z.domains;if(y&&b.isArray(y)){this.tracker.set("linkedDomain",y.join("|"));var A=z.anchor_domains;if(A&&b.isArray(A)){this.tracker.set("anchorDomain",A.join("|"))}else{A=[]}n.linkDomains(this.tracker,y,A)}};k.execute=function(z,y){if(b.isString(z)&&b.isObject(y)){switch(z){case"create":y.id&&k.create(y);break;case"set":for(var A in y){y.hasOwnProperty(A)&&k.tracker.set(A,y[A])}break;case"send":k.tracker.send(y);break;case"cookiesync":k.tracker.syncLater(y);break}}else{if(z==="call"&&b.isFunction(a)){a.call(k.tracker)}}return true};(function(){var y=c.bdash2.queue;if(!c.bdashFlags){c.bdashFlags={}}c.bdash2=k.execute;for(var z=0;z<y.length;z++){k.execute(y[z][0],y[z][1])}})()})();