import{k as e,s as a,m as t,r as s,g as n,u as r,n as l,o,d as u,x as i,L as d,v as c,y as m}from"./rsa-plugins-common.min.js";import{R as v}from"./rsa-plugins-RetryQueue.min.js";const p={maxRetryDelay:36e4,minRetryDelay:1e3,backoffFactor:2,maxAttempts:10,maxItems:100},h="v1",y=(e,t,s)=>a({batch:e,sentAt:t},!0,void 0,s),$=(e,a)=>{const t=new URL(e);return new URL(s([t.pathname,"/",h,"/",a].join("")),t).href},f=(a,t,s,l,o,u)=>{if(n(null==a?void 0:a.error)||n(u))return;const i=r(a);let d=((a,t)=>`${a}${e}Failed to deliver event(s) to ${t}.`)("XhrQueuePlugin",t);const c="The event(s) will be dropped.";i?s?(d=`${d} It/they will be retried.`,l>0&&(d=`${d} Retry attempt ${l} of ${o}.`)):d=`${d} Retries exhausted (${o}). ${c}`:d=`${d} ${c}`,null==u||u.error(d)},R=(e,a,t)=>{let s,n,r;const d=l();if(Array.isArray(e)){const l=e.map((e=>o(e.event,d)));s=y(l,d,t),n=e[0]?u(e[0].headers):{},c=a.lifecycle.activeDataplaneUrl.value,r=$(c,"batch")}else{const{url:a,event:l,headers:c}=e,m=o(l,d);s=i(m,t),n=u(c),r=a}var c;return{data:s,headers:n,url:r}},g="XhrQueue",w=()=>({name:g,deps:[],initialize:e=>{e.plugins.loadedPlugins.value=[...e.plugins.loadedPlugins.value,g]},dataplaneEventsQueue:{init(e,a,s,n,o){const u=e.lifecycle.writeKey.value;a.setAuthHeader(u);const i=(c=e.loadOptions.value.queueOptions,t(p,c));var c;return new v(`rudder_${u}`,i,((t,s,n,l,u)=>{const{data:i,url:d,headers:c}=R(t,e,o);a.getAsyncData({url:d,options:{method:"POST",headers:c,data:i,sendRawData:!0},isRawResponse:!0,timeout:3e4,callback:(e,a)=>{const t=r(a)?a:null;f(a,d,u,n,l,o),s(t,e)}})}),s,d,o,(e=>{var a;const t=l(),s=e.map((e=>e.event));return null===(a=y(s,t,o))||void 0===a?void 0:a.length}))},enqueue(e,a,t,s,n){t.sentAt=l(),c(t,n);const r=e.lifecycle.activeDataplaneUrl.value,o=$(r,t.type),u={AnonymousId:m(t.anonymousId)};a.addItem({url:o,headers:u,event:t})}}});export{w as XhrQueue,w as default};
//# sourceMappingURL=rsa-plugins-remote-XhrQueue.min.js.map
rance: none;\n  background-color:#fff;\n  line-height:1.5em;\n  color:#000;\n  border:1px solid #aeb0b6;\n  padding:0.2em 0.3em;\n  box-shadow:inset 1px 1px 4px 1px #ddd;\n  min-height:1.9em;\n}\n.mktoForm input[type=text]:focus,\n.mktoForm input[type=url]:focus,\n.mktoForm input[type=email]:focus,\n.mktoForm input[type=tel]:focus,\n.mktoForm input[type=number]:focus,\n.mktoForm input[type=date]:focus,\n.mktoForm select.mktoField:focus,\n.mktoForm textarea.mktoField:focus{\n  outline:none;\n  border:1px solid #888;\n  color:#000;\n}\n\n.mktoForm select.mktoField::-ms-expand {\n  display: none;\n}\n\n.mktoForm select.mktoField {\n  -moz-appearance: none;\n  text-indent: 0.01px;\n  text-overflow: \"\";\n  -webkit-border-radius:0;\n  -moz-border-radius:0;\n  border-radius:0;\n  padding:0.2em 22px 0.2em 0.3em;\n  background:#fff url(../images/arrow-down-bk.png) center right no-repeat;\n}\n\n.mktoForm.ie9 select.mktoField {\n  background: none;\n  padding:0.2em 2.3px 0.2em 0.3em;\n}\n\n.mktoForm .mktoLogicalField{\n  border:1px solid transparent;\n}\n\n.mktoForm input.mktoField.mktoInvalid,\n.mktoForm textarea.mktoField.mktoInvalid,\n.mktoForm select.mktoField.mktoInvalid,\n.mktoForm .mktoLogicalField.mktoInvalid{\n  border:1px solid #8C0005;\n}\n\n.mktoForm .mktoRadioList > label,\n.mktoForm .mktoCheckboxList > label{\n  margin-bottom:0.6em;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\n.mktoForm input[type=checkbox],\n.mktoForm input[type=radio] {\n  width:1em;\n  height:1em;\n  opacity:0;\n}\n\n.mktoForm input[type=checkbox] + label:before,\n.mktoForm input[type=radio] + label:before\n{\n  content: \"\";  \n  position:absolute;\n  width:1em;\n  height:1em;  \n  margin-left:-1.5em;\n  line-height:1em;\n  font-family:Arial, sans-serif;\n  font-size:13px;\n  border:1px solid #ccced2;\n  box-shadow:inset 1px 1px 4px 1px #ddd;\n  background:#fff;\n}\n\n.mktoForm .mktoLabelToLeft input[type=checkbox] + label:before,\n.mktoForm .mktoLabelToLeft input[type=radio] + label:before{\n  margin-left:0;\n  right:0.3em;\n}\n\n.mktoForm input[type=checkbox]:checked + label:before,\n.mktoForm input[type=radio]:checked + label:before {\n  text-align:center;\n  color:#000;\n}\n\n.mktoForm input[type=checkbox]:focus + label:before,\n.mktoForm input[type=radio]:focus + label:before{\n  border:1px solid #888;\n}\n\n.mktoForm input[type=checkbox] + label:before{\n\n}\n.mktoForm input[type=checkbox]:checked + label:before{\n  content:\"\\2713 \";\n}\n\n.mktoForm input[type=radio] + label:before{\n  border-radius:1em;\n}\n.mktoForm input[type=radio]:checked + label:before{\n  background-image:url(../images/dot-bk.png);\n  background-position:3px 3px;\n  background-repeat:no-repeat;\n}\n\n.mktoForm.mktoNoCheckedSupport input[type=checkbox] + label:before,\n.mktoForm.mktoNoCheckedSupport input[type=radio] + label:before{\n  display:none;\n}\n.mktoForm.mktoNoCheckedSupport select.mktoField,\n.mktoForm.ie7 select.mktoField,\n.mktoForm.ie6 select.mktoField {\n  background-image:none;\n  padding-right:0.3em;\n}\n\n.mktoForm textarea.mktoField{\n  resize: none;\n}\n","LiveStreamSettings":null,"rows":[[{"Id":25105,"Name":"FirstName","IsRequired":true,"Datatype":"string","Maxlength":255,"InputLabel":"<span style=\"font-family: helvetica, arial, sans-serif; font-size: 12px;\">First Name:</span>","InputInitialValue":"","InputSourceChannel":"constant","VisibleRows":4,"MinimumNumber":0,"MaximumNumber":100,"ValidationMessage":"This field is required."}],[{"Id":25106,"Name":"LastName","IsRequired":true,"Datatype":"string","Maxlength":255,"InputLabel":"<span style=\"font-family: helvetica, arial, sans-serif; font-size: 12px;\">Last Name:</span>","InputInitialValue":"","InputSourceChannel":"constant","ValidationMessage":"This field is required."}],[{"Id":25104,"Name":"Email","IsRequired":true,"Datatype":"email","Maxlength":255,"InputLabel":"<span style=\"font-family: helvetica, arial, sans-serif; font-size: 12px;\">Email:</span>","InputInitialValue":"","InputSourceChannel":"constant","ValidationMessage":"Must be valid email. <span class='mktoErrorDetail'>example@yourdomain.com</span>"}],[{"Id":25107,"Name":"Company","IsRequired":true,"Datatype":"string","Maxlength":255,"InputLabel":"<span style=\"font-family: helvetica, arial, sans-serif; font-size: 12px;\">Company Name:</span>","InputInitialValue":"","InputSourceChannel":"constant","ProfilingFieldNumber":0,"ValidationMessage":"This field is required."}],[{"Id":25113,"Name":"Title","IsRequired":true,"Datatype":"string","Maxlength":255,"InputLabel":"Job Title:","InputInitialValue":"","InputSourceChannel":"constant","ProfilingFieldNumber":0,"ValidationMessage":"This field is required."}],[{"Id":25114,"Name":"companyTypeExternal","Description":"Tell us more about your company so we can get you the answers you need","IsRequired":true,"Datatype":"picklist","Maxlength":255,"PicklistValues":[{"label":"Select...","value":"","selected":true,"isDefault":true},{"label":"Agency","value":"Agency"},{"label":"Brand/Direct Advertiser","value":"Brand/Direct Advertiser"},{"label":"Media Owner/Publisher","value":"Media Owner/Publisher"},{"label":"Data Supplier","value":"Data Supplier"},{"label":"Technology Company","value":"Technology Company"},{"label":"Press","value":"Press"},{"label":"Other","value":"Other"}],"DefaultValue":[""],"InputLabel":"Company Type:","InputInitialValue":"","InputSourceChannel":"constant","VisibleRows":4,"ProfilingFieldNumber":0,"ValidationMessage":"This field is required."}],[{"Id":25115,"Name":"HtmlText_2023-03-21T16:10:22.163Z","Datatype":"htmltext","InputInitialValue":"","LabelWidth":551,"ProfilingFieldNumber":0,"Htmltext":"<span style=\"font-size: 16px;\"><span>By submitting this form, you acknowledge our<span> </span></span><a href=\"https://www.innovid.com/privacy-policy/\" target=\"_blank\" rel=\"noopener\">Privacy Policy</a><span><span> </span>and agree to receive marketing communications about our products and services. You may unsubscribe from these communications or opt-out at any time.</span></span><br /><br />","IsLabelToLeft":true}],[{"Id":25108,"Name":"UTM_Campaign__c","Datatype":"hidden","Maxlength":255,"InputLabel":"UTM Campaign:","InputInitialValue":"","InputSourceChannel":"url","InputSourceSelector":"utm_campaign","ProfilingFieldNumber":0,"DisablePrefill":true}],[{"Id":25109,"Name":"UTM_Content__c","Datatype":"hidden","Maxlength":255,"InputLabel":"UTM Content:","InputInitialValue":"","InputSourceChannel":"url","InputSourceSelector":"utm_content","ProfilingFieldNumber":0,"DisablePrefill":true}],[{"Id":25110,"Name":"UTM_Medium__c","Datatype":"hidden","Maxlength":255,"InputLabel":"UTM Medium:","InputInitialValue":"","InputSourceChannel":"url","InputSourceSelector":"utm_medium","ProfilingFieldNumber":0,"DisablePrefill":true}],[{"Id":25111,"Name":"UTM_Source__c","Datatype":"hidden","Maxlength":255,"InputLabel":"UTM Source:","InputInitialValue":"","InputSourceChannel":"url","InputSourceSelector":"utm_source","ProfilingFieldNumber":0,"DisablePrefill":true}],[{"Id":25112,"Name":"UTM_Term__c","Datatype":"hidden","Maxlength":255,"InputLabel":"UTM Term:","InputInitialValue":"","InputSourceChannel":"url","InputSourceSelector":"utm_term","ProfilingFieldNumber":0,"DisablePrefill":true}],[{"Id":25116,"Name":"HoneypotSpamFilter","Datatype":"hidden","Maxlength":255,"InputLabel":"Honeypot_Spam Filter:","InputInitialValue":"Spam Trap","InputSourceChannel":"constant","InputSourceSelector":"Source","ProfilingFieldNumber":0,"DisablePrefill":true}]],"fieldsetRows":[],"action":null,"munchkinId":"597-QOT-387","dcJsUrl":"","invalidInputMsg":"Invalid Input","formSubmitFailedMsg":"Submission failed, please try again later.","Captcha":{"provider":"reCaptcha","sitekey":"6LduLVwmAAAAAD0e0r-3BHjSImKGrJ3SE-aQokQA","invisible":true}});