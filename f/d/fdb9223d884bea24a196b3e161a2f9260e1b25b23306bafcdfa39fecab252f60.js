!this,function(){"use strict"; o="$default_instance",c=2,n=4096,a=1e3,m="$identify",y="$groupidentify",f="amplitude_lastEventId",h="amplitude_lastEventTime",g="amplitude_lastIdentifyId",_="amplitude_lastSequenceNumber",w="amplitude_sessionId",b="amplitude_deviceId",I="amplitude_optOut",S="amplitude_userId",i="amplitude_cookie_test",s="revenue_amount",u="$productId",p="$quantity",d="$price",l="$revenueType",E="amp_device_id",O="referrer",N="utm_source",x="utm_medium",k="utm_campaign",A="utm_term",T="utm_content",P=q=R={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:_encode:decode:_decode:,C=Object.prototype.toString;ar e,D={DISABLE:0,ERROR:1,WARN:2,INFO:3},U=D.WARN,M={error:function(e){U>=D.ERROR&&z(e)},warn:function(e){U>=D.WARN&&z(e)},info:,z=B=G=K=["nan","function","arguments","regexp","element"],V=F=L=W=M,$=J=Q=X=H=Z=G,Y=ee=te={expirationDays:void 0,domain:void 0},ne=ie=re=oe=se=ae={reset:options:function(e){if(0===arguments.length)return te;e=e||{},te.expirationDays=e.expirationDays,te.secure=e.secure,te.sameSite=e.sameSite;var t=$(e.domain)?"."+ne(window.location.href):e.domain,n=Math.random();te.domain=t,oe("amplitude_test",n);var i=re("amplitude_test");return i&&i===n||(t=null),se("amplitude_test"),te.domain=t,te},get:re,set:oe,remove:se};if())e=window.localStorage;else if(window.globalStorage)try{e=window.globalStorage[window.location.hostname]}catch(e){}else if("undefined"!=typeof document){var ue=document.createElement("div"),pe="localStorage";ue.style.display="none",document.getElementsByTagName("head")[0].appendChild(ue),ue.addBehavior&&(ue.addBehavior("#default#userdata"),e={length:0,setItem:getItem:removeItem:clear:key:,ue.load(pe),e.length=ue.XMLDocument.documentElement.attributes.length)}e||(e={length:0,setItem:getItem:function(e){},removeItem:function(e){},clear:function(){},key:);var ce=e,de=de.prototype._cookiesEnabled=de.prototype.getStorage=var le="$clearAll",fe=fe.prototype.add=fe.prototype.append=function(e,t){return this._addOperation("$append",e,t),this},fe.prototype.clearAll=fe.prototype.prepend=function(e,t){return this._addOperation("$prepend",e,t),this},fe.prototype.set=function(e,t){return this._addOperation("$set",e,t),this},fe.prototype.setOnce=fe.prototype.unset=fe.prototype._addOperation=var he="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};ar ve=ge(,me=ye=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable;var be=)?Object.assign:Ie="%[a-f0-9]{2}";new RegExp(Ie,"gi"),new RegExp("("+Ie+")+","gi");ar Ee=Oe=Oe.prototype.send=var Ne=Ne.prototype.setProductId=Ne.prototype.setQuantity=function(e){return"number"!==j(e)?W.error("Unsupported type for quantity: "+j(e)+", expecting number"):this._quantity=parseInt(e),this},Ne.prototype.setPrice=function(e){return"number"!==j(e)?W.error("Unsupported type for price: "+j(e)+", expecting number"):this._price=e,this},Ne.prototype.setRevenueType=Ne.prototype.setEventProperties=Ne.prototype._isValidRevenue=Ne.prototype._toJSONObject=var xe,ke=ge(,Ae=(ke.UAParser,,Te="5.11.0",Pe={apiEndpoint:"api.amplitude.com",batchEvents:!1,cookieExpiration:3650,cookieName:"amplitude_id",sameSiteCookie:"None",deviceIdFromUrlParam:!1,domain:"",eventUploadPeriodMillis:3e4,eventUploadThreshold:30,forceHttps:!0,includeGclid:!1,includeReferrer:!1,includeUtm:!1,language:{language:navigator&&(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage)||void 0}.language,logLevel:"WARN",optOut:!1,onError:function(){},platform:"Web",savedMaxCount:1e3,saveEvents:!0,saveParamsReferrerOncePerSession:!0,secureCookie:!1,sessionTimeout:18e5,trackingOptions:{city:!0,country:!0,carrier:!0,device_manufacturer:!0,device_model:!0,dma:!0,ip_address:!0,language:!0,os_name:!0,os_version:!0,platform:!0,region:!0,version_name:!0},unsetParamsReferrerOnNewSession:!1,unsentKey:"amplitude_unsent",unsentIdentifyKey:"amplitude_unsent_identify",uploadBatchSize:100},qe=qe.prototype.Identify=fe,qe.prototype.Revenue=Ne,qe.prototype.init=function(e,p,c,t){var d=this;if("string"!==j(e)||$(e))W.error("Invalid apiKey. Please re-initialize with a valid apiKey");else try{this.options.apiKey=e,this._storageSuffix="_"+e+this._legacyStorageSuffix;var n=!!this.cookieStorage.get(this.options.cookieName+this._storageSuffix);if(c&&c.deferInitialization&&!n)return void this._deferInitialization(e,p,c,t);Re(this.options,c),"string"===j(this.options.logLevel)&&L(this.options.logLevel);var i=Ge(this);this._apiPropertiesTrackingOptions=0<Object.keys(i).length?{tracking_options:i}:{},this.cookieStorage.options({expirationDays:this.options.cookieExpiration,domain:this.options.domain,secure:this.options.secureCookie,sameSite:this.options.sameSiteCookie}),this.options.domain=this.cookieStorage.options().domain,this._instanceName===o&&Ce(this),je(this),this._pendingReadStorage=!0;var r=function(e){d.options.deviceId="object"===j(c)&&"string"===j(c.deviceId)&&!$(c.deviceId)&&c.deviceId||d.options.deviceIdFromUrlParam&&d._getDeviceIdFromUrlParam(d._getUrlParams())||d.options.deviceId||e||Ae()+"R",d.options.userId="string"===j(p)&&!$(p)&&p||"number"===j(p)&&p.toString()||d.options.userId||null;var t=(new Date).getTime();if((!d._sessionId||!d._lastEventTime||t-d._lastEventTime>d.options.sessionTimeout)&&(d.options.unsetParamsReferrerOnNewSession&&d._unsetUTMParams(),d._newSession=!0,d._sessionId=t,d.options.saveParamsReferrerOncePerSession&&d._trackParamsAndReferrer()),d.options.saveParamsReferrerOncePerSession||d._trackParamsAndReferrer(),d.options.saveEvents){for(var n=0;n<d._unsentEvents.length;n++){var i=d._unsentEvents[n].event_properties,r=d._unsentEvents[n].groups;d._unsentEvents[n].event_properties=Z(i),d._unsentEvents[n].groups=X(r)}for(var o=0;o<d._unsentIdentifys.length;o++){var s=d._unsentIdentifys[o].user_properties,a=d._unsentIdentifys[o].groups;d._unsentIdentifys[o].user_properties=Z(s),d._unsentIdentifys[o].groups=X(a)}}d._lastEventTime=t,Ue(d),d._pendingReadStorage=!1,d._sendEventsIfReady();for(var u=0;u<d._onInit.length;u++)d._onInit[u]();d._onInit=[],d._isInitialized=!0};this.options.saveEvents&&(this._unsentEvents=this._loadSavedUnsentEvents(this.options.unsentKey).concat(this._unsentEvents),this._unsentIdentifys=this._loadSavedUnsentEvents(this.options.unsentIdentifyKey).concat(this._unsentIdentifys)),r(),this.runQueuedFunctions(),"function"===j(t)&&t(this)}catch(e){W.error(e),this.options.onError(e)}},qe.prototype._migrateUnsentEvents=qe.prototype._trackParamsAndReferrer=var Re=qe.prototype.runQueuedFunctions=qe.prototype._apiKeySet=qe.prototype._loadSavedUnsentEvents=qe.prototype._parseSavedUnsentEventsString=qe.prototype.isNewSession=function(){return this._newSession},qe.prototype.onInit=qe.prototype.getSessionId=qe.prototype.nextEventId=function(){return this._eventId++,this._eventId},qe.prototype.nextIdentifyId=function(){return this._identifyId++,this._identifyId},qe.prototype.nextSequenceNumber=qe.prototype._unsentCount=qe.prototype._sendEventsIfReady=qe.prototype._getFromStorage=qe.prototype._setInStorage=var Ce=je=De=Ue=qe.prototype._initUtmData=qe.prototype._unsetUTMParams=var Me=qe.prototype._getReferrer=function(){return document.referrer},qe.prototype._getUrlParams=qe.prototype._saveGclid=qe.prototype._getDeviceIdFromUrlParam=qe.prototype._getReferringDomain=qe.prototype._saveReferrer=qe.prototype.saveEvents=qe.prototype.setDomain=qe.prototype.setUserId=qe.prototype.setGroup=qe.prototype.setOptOut=qe.prototype.setSessionId=qe.prototype.resetSessionId=qe.prototype.regenerateDeviceId=qe.prototype.setDeviceId=qe.prototype.setUserProperties=qe.prototype.clearUserProperties=var ze=qe.prototype.identify=qe.prototype.groupIdentify=qe.prototype.setVersionName=qe.prototype._logEvent=function(e,t,n,i,r,o,s,a){if(je(this),e)if(this.options.optOut)"function"===j(a)&&a(0,"No request sent",{reason:"optOut is set to true"});else try{var u;u=e===m||e===y?this.nextIdentifyId():this.nextEventId();var p=this.nextSequenceNumber(),c="number"===j(s)?s:(new Date).getTime();(!this._sessionId||!this._lastEventTime||c-this._lastEventTime>this.options.sessionTimeout)&&(this._sessionId=c),this._lastEventTime=c,Ue(this);var d=this._ua.browser.name,l=this._ua.browser.major,f=this._ua.device.model,h=this._ua.device.vendor;i=i||{},n=v({},n||{},v({},this._apiPropertiesTrackingOptions)),t=t||{},r=r||{},o=o||{};var g={device_id:this.options.deviceId,user_id:this.options.userId,timestamp:c,event_id:u,session_id:this._sessionId||-1,event_type:e,version_name:Be(this,"version_name")&&this.options.versionName||null,platform:Be(this,"platform")?this.options.platform:null,os_name:Be(this,"os_name")&&d||null,os_version:Be(this,"os_version")&&l||null,device_model:Be(this,"device_model")&&f||null,device_manufacturer:Be(this,"device_manufacturer")&&h||null,language:Be(this,"language")?this.options.language:null,carrier:(Be(this,"carrier"),null),api_properties:n,event_properties:Q(Z(t)),user_properties:Q(Z(i)),uuid:Ae(),library:{name:"amplitude-js",version:Te},sequence_number:p,groups:Q(X(r)),group_properties:Q(Z(o)),user_agent:this._userAgent};return e===m||e===y?(this._unsentIdentifys.push(g),this._limitEventsQueued(this._unsentIdentifys)):(this._unsentEvents.push(g),this._limitEventsQueued(this._unsentEvents)),this.options.saveEvents&&this.saveEvents(),this._sendEventsIfReady(a)||"function"!==j(a)||a(0,"No request sent",{reason:"No events to send or upload queued"}),u}catch(e){W.error(e)}else"function"===j(a)&&a(0,"No request sent",{reason:"Missing eventType"})};var Be=Ge=qe.prototype._limitEventsQueued=qe.prototype.logEvent=qe.prototype.logEventWithTimestamp=qe.prototype.logEventWithGroups=var Ke=qe.prototype.logRevenueV2=qe.prototype.logRevenue=qe.prototype.removeEvents=var Ve=qe.prototype.sendEvents=qe.prototype._mergeEventsAndIdentifys=qe.prototype.setGlobalUserProperties=qe.prototype.__VERSION__=Te,qe.prototype._shouldDeferCall=qe.prototype._deferInitialization=qe.prototype.enableTracking=var Fe=Fe.prototype.Identify=fe,Fe.prototype.Revenue=Ne,Fe.prototype.getInstance=Fe.prototype.runQueuedFunctions=Fe.prototype.init=Fe.prototype.isNewSession=function(){return this.getInstance().isNewSession()},Fe.prototype.getSessionId=function(){return this.getInstance().getSessionId()},Fe.prototype.nextEventId=function(){return this.getInstance().nextEventId()},Fe.prototype.nextIdentifyId=function(){return this.getInstance().nextIdentifyId()},Fe.prototype.nextSequenceNumber=Fe.prototype.saveEvents=function(){this.getInstance().saveEvents()},Fe.prototype.setDomain=function(e){this.getInstance().setDomain(e)},Fe.prototype.setUserId=function(e){this.getInstance().setUserId(e)},Fe.prototype.setGroup=function(e,t){this.getInstance().setGroup(e,t)},Fe.prototype.setOptOut=function(e){this.getInstance().setOptOut(e)},Fe.prototype.regenerateDeviceId=function(){this.getInstance().regenerateDeviceId()},Fe.prototype.setDeviceId=function(e){this.getInstance().setDeviceId(e)},Fe.prototype.setUserProperties=function(e){this.getInstance().setUserProperties(e)},Fe.prototype.clearUserProperties=Fe.prototype.identify=function(e,t){this.getInstance().identify(e,t)},Fe.prototype.setVersionName=function(e){this.getInstance().setVersionName(e)},Fe.prototype.logEvent=function(e,t,n){return this.getInstance().logEvent(e,t,n)},Fe.prototype.logEventWithGroups=Fe.prototype.logRevenueV2=Fe.prototype.logRevenue=Fe.prototype.removeEvents=Fe.prototype.sendEvents=function(e){this.getInstance().sendEvents(e)},Fe.prototype.setGlobalUserProperties=Fe.prototype.__VERSION__=Te;var Le=window.amplitude||{},We=new Fe;for(var $e in We._q=Le._q||[],Le._iq)Le._iq.hasOwnProperty($e)&&(We.getInstance($e)._q=Le._iq[$e]._q||[]);return We.runQueuedFunctions(),We});
