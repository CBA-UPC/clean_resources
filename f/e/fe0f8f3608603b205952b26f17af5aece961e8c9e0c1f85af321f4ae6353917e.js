"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5286],{89291:(t,e,i)=>{i.d(e,{Z:()=>l});var a=i(27641);function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){(0,a.Z)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}const l={getMedia:function(t){var e=this.getMediaNode(t);return e?JSON.parse(e.textContent):{}},getMediaNode:getOtherMediaDataOfSameParentNodes:function(t,e,i){var a=[],n=this.getMediaNode(t);if(n){var s=n.closest("[".concat(e,"]"));if(s){var l=s.querySelectorAll('[data-media-id]:not([data-media-id="'.concat(t,'"])'));i=i>0?i:l.length,l.forEach((function(t,e){e<i&&a.push(JSON.parse(t.textContent))}))}}return a},setMediaAddPreviousMediaToAutomaticPlaylist:function(t){var e={addPreviousMediaToAutomaticPlaylist:arguments.length>1&&void 0!==arguments[1]&&arguments[1]};this.setMediaContent(t,e)},setMediaContent:function(t,e){var i=document.querySelector('[data-media-id="'.concat(t,'"]')),a=s(s({},JSON.parse(i.textContent)),e);i.textContent=JSON.stringify(a)}}},76366:(t,e,i)=>{i.d(e,{Z:()=>p});var a=i(27641),n=i(62559),s=i(20771),l=i(58335),r=i(19565),o=i(75712),c=i(19327);function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,a)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(Object(i),!0).forEach((function(e){(0,a.Z)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var y=const p=(0,s.Q_)("playlist",{state:function(){return{isOpen:!1,manualPlaylist:(0,r._aR)("manualPlaylist",[]),automaticPlaylist:(0,r._aR)("automaticPlaylist",[]),shouldPlayFirstElement:!1}},getters:{playlist:function(t){return[].concat((0,n.Z)(t.manualPlaylist),(0,n.Z)(t.automaticPlaylist))}},actions:d(d({},(0,s.nv)(l.Z,["showNotify"])),{},{togglePlaylist:openPlaylist:function(){this.isOpen=!0,window.addEventListener("click",this.maybeClose),c.Z.publish("player.playlist.show")},closePlaylist:maybeClose:function(t){var e=new Set(document.querySelectorAll("[data-open-playlist-area]"));!t.composedPath().some(()&&this.closePlaylist()},listToUse:addToPlaylist:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.isInPlaylist=!0,this.listToUse(t.isInAutomaticPlaylist).push(t),e&&this.showNotify({text:(0,o.Z)("playlist.added.confirmation").replace("%start_u%",'<span class="t-td-und">').replace("%end_u%","</span>"),onClick:this.openPlaylist,icon:"picto-check"})},removeFromPlaylist:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.getMediaInPlaylist(t),a=this.listToUse(null==i?void 0:i.isInAutomaticPlaylist),n=a.findIndex((function(e){return y(e,t)}));a.splice(n,1),e&&this.showNotify({text:(0,o.Z)("playlist.removed.confirmation").replace("%start_u%",'<span class="t-td-und">').replace("%end_u%","</span>"),onClick:this.openPlaylist,icon:"picto-close-red"})},removeAllAutoFromPlaylist:function(){var t=this;(0,n.Z)(this.automaticPlaylist).forEach(()},rewritePlaylist:function(t,e,i){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this.listToUse(a);n.length=0,t.forEach(()},getMediaInPlaylist:function(t){return(arguments.length>1&&void 0!==arguments[1]&&arguments[1]?this.manualPlaylist:this.playlist).find(()},isMediaInPlaylist:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!this.getMediaInPlaylist(t,e)},shouldPlayFirstElementInPlaylist:)})},85286:(t,e,i)=>{i.r(e),i.d(e,{default:);var a=i(49458),n={key:0,class:"a-playlist-btn__label"},s={key:1,class:"a-playlist-btn__label"};var l=i(62559),r=i(27641),o=i(20771),c=i(76366),u=i(19327),d=i(89291);nst h={name:"AddToPlaylist",props:{mediaId:{type:String,default:""},mediaImage:{type:String,default:""},mediaDuration:{type:String,default:""},mediaPubdate:{type:String,default:""},showLabel:{type:Boolean,default:!0},btnClasses:{type:Array,default:,classAdd:{type:String,default:"a-playlist-btn--add"},classRemove:{type:String,default:"a-playlist-btn--remove"}},data:function(){return{mediaJson:void 0,iconAdd:"picto-playlist-add",iconRemove:"picto-playlist-remove"}},computed:p(p({},(0,o.Kc)(c.Z)),{},{getClasses:function(){var t=(0,l.Z)(this.btnClasses);return t.push(this.isCurrentMediaInPlaylist?this.classRemove:this.classAdd),t.filter(()},icon:dataPlaylist:isCurrentMediaInPlaylist:),methods:p(p({},(0,o.nv)(c.Z,["addToPlaylist","removeFromPlaylist","isMediaInPlaylist","shouldPlayFirstElementInPlaylist"])),{},{pushItemInPlaylist:function(){this.mediaJson=d.Z.getMedia(this.mediaId),this.mediaJson.diffusion.duration=this.mediaDuration,this.mediaJson.diffusion.pubdate=this.mediaPubdate,this.mediaJson.isInAutomaticPlaylist=!1,this.addToPlaylist(this.mediaJson),u.Z.publish("player.playlist.add",{media:this.mediaJson}),u.Z.publish("player.playlist.preloadMedia",{mediaId:this.mediaJson.mediaId})},removeItemFromPlaylist:function(){this.removeFromPlaylist(this.mediaId),u.Z.publish("player.playlist.remove",{mediaId:this.mediaId}),u.Z.publish("player.playlist.update")},click:function(){this.shouldPlayFirstElementInPlaylist(!0),this.isCurrentMediaInPlaylist?this.removeItemFromPlaylist():this.pushItemInPlaylist()}})};const m=(0,i(83744).Z)(h,[["render",function(t,e,i,l,r,o){return(0,a.openBlock)(),(0,a.createElementBlock)("button",{class:(0,a.normalizeClass)(o.getClasses),type:"button","data-open-playlist-area":"",onClick:e[0]||(e[0]=(0,a.withModifiers)((,["stop","prevent"]))},[(0,a.createElementVNode)("span",{class:(0,a.normalizeClass)("a-svg a-svg--".concat(o.icon))},null,2),!o.isCurrentMediaInPlaylist&&i.showLabel?((0,a.openBlock)(),(0,a.createElementBlock)("span",n,(0,a.toDisplayString)(t.$translate("playlist.add.cta")),1)):o.isCurrentMediaInPlaylist&&i.showLabel?((0,a.openBlock)(),(0,a.createElementBlock)("span",s,(0,a.toDisplayString)(t.$translate("playlist.remove.cta")),1)):(0,a.createCommentVNode)("",!0)],2)}]])}}]);