"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[2442],{55127:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(99881),r=n(46417);function l(e){return(0,r.jsx)(i.Z,{"data-test":"alert",elevation:6,variant:"filled",severity:e.severity,sx:{marginBottom:"12px",zIndex:100},children:e.children})}},65079:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(16031),r=n(55127),l=n(46417);function a(e){var t=e.error;if(!t)return null;var n=t.networkError,a=t.graphQLErrors;return(0,i.isEmpty)(a)?n?(0,l.jsx)(r.Z,{severity:"error",children:n.message}):null!==t&&void 0!==t&&t.networkError?(0,l.jsxs)(r.Z,{severity:"error",children:["Network Error: ",t.networkError.message]}):null:(0,l.jsx)(l.Fragment,{children:t.graphQLErrors.map((function(e){return(0,l.jsx)(r.Z,{severity:"error",children:e.message},"".concat(e.name,"-").concat(e.path))}))})}a.defaultProps={error:void 0}},52442:function(e,t,n){n.d(t,{Z:function(){return ge}});var i=n(90297),r=n(17592),l=n(65033),a=n(57829),o=n(57451),s=n(66212),d=n(9289),u=n(20201),c=n(91345),h=n(12164),m=n(61113),v=n(70816),x=n.n(v),f=function(e,t){if(!e.length&&!t.length)return"";var n=x()(e),i=x()(t);if(!n.isValid()&&i.isValid())return i.format("ll");if(!i.isValid()&&n.isValid())return n.format("ll");var r=n.year()===i.year(),l=n.month()===i.month(),a=n.day()===i.day();if(r&&l&&a)return n.format("ll");if(r&&l){var o=n.format("MMM");return"".concat(o," ").concat(n.format("DD")," - ").concat(o," ").concat(i.endOf("week").format("DD"),", ").concat(n.year())}return r?"".concat(n.format("MMM")," ").concat(n.format("D")," - ").concat(i.format("MMM")," ").concat(i.format("D"),", ").concat(n.year()):"".concat(n.format("ll")," - ").concat(i.format("ll"))},p=n(46417);function g(){var e=(0,i.l)(c.eG),t=(0,u.Z)();return e.startDate&&e.endDate?(0,p.jsx)(m.Z,{sx:{opacity:.7,background:t.palette.primary.contrastText,paddingTop:0,paddingBottom:0,paddingLeft:2},children:f(e.startDate,e.endDate)}):null}var Z=n(96672),b=n(11198),y=n(47131),j=n(99881),C=n(16031);function k(){var e=(0,i.l)(c.Xs),t=Object.values(e),n=t.filter((function(e){return 1===e.status})),r=t.filter((),l=n.length===t.length;if((0,C.isEmpty)(e))return null;var a=r.length?"error":"info";return(0,p.jsxs)(j.Z,{severity:l?"success":a,style:{display:"flex"},action:(0,p.jsx)(y.Z,{onClick:function(){(0,c.Xs)({})},children:(0,p.jsx)(b.Z,{fontSize:"small"})}),children:[n.length," Completed and ",r.length," Failed out of ",t.length," Uploads."]})}var w=n(4942),I=n(15861),D=n(1413),A=n(29439),B=n(64687),S=n.n(B),M=n(24193),E=n(66149),P=n(4117),T=n(96467),z=n(16783),H=n(47313),R=n(51748),V=n(34219),W=(0,r.ZP)(m.Z)((function(e){return{"& :hover":{color:e.theme.palette.primary.main,cursor:"pointer"}}}));function F(e){var t=(0,V.Z)().mutation,n=(0,H.useState)({}),i=(0,A.Z)(n,2),r=i[0],l=i[1],a=(0,H.useState)({}),o=(0,A.Z)(a,2),s=o[0],d=o[1],u=e.currentAlbum,c=null===u||void 0===u?void 0:u.title;(0,H.useEffect)((,[c]);var h=function(){var n=(0,I.Z)(S().mark((function n(){var i;return S().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,null!==u&&void 0!==u&&u.id){n.next=3;break}throw new Error("Unable to determine album id");case 3:if(r.title){n.next=5;break}throw new R.Z("Title is required","title");case 5:i={id:u.id,title:r.title},t({variables:i}),e.handleClose(),n.next=18;break;case 10:n.prev=10,n.t0=n.catch(0),n.t1=n.t0.code,n.next="RequiredParameterException"===n.t1?15:17;break;case 15:return d((0,w.Z)({},n.t0.parameterName,n.t0.message)),n.abrupt("break",18);case 17:d({general:n.t0.message});case 18:case"end":return n.stop()}}),n,null,[[0,10]])})));return ();return u?(0,p.jsxs)(E.Z,{open:e.open,onClose:e.handleClose,children:[(0,p.jsx)(T.Z,{children:(0,p.jsx)(z.Z,{autoFocus:!0,"data-test":"title",error:Boolean(s.title),helperText:s.title,label:"Album Title",margin:"normal",name:"title",onChange:function(e){var t=(0,D.Z)({},r),n=e.target.name;t[n]=e.target.value,l(t);var i=(0,D.Z)({},s);delete i[n],delete i.general,d(i)},required:!0,size:"small",value:r.title||""})}),(0,p.jsxs)(P.Z,{children:[(0,p.jsx)(M.Z,{size:"small",onClick:e.handleClose,children:"Cancel"}),(0,p.jsx)(M.Z,{color:"primary",size:"small",onClick:h,"data-test":"save",children:"Save"})]})]}):null}function L(e){var t=e.hidden,n=e.title,i=e.isEditDisabled,r=(0,H.useState)(!1),l=(0,A.Z)(r,2),a=l[0],o=l[1],s=(0,h.Z)().currentAlbum;return t?null:s?(0,p.jsxs)(p.Fragment,{children:[i?(0,p.jsx)(m.Z,{variant:"h6",sx:{lineHeight:"1.2",fontWeight:500},children:(0,p.jsx)("span",{"data-test":"album-main-title",children:n||s.title})}):(0,p.jsx)(W,{variant:"h6",onClick:sx:{lineHeight:"1.2",fontWeight:500},children:(0,p.jsx)("span",{"data-test":"album-main-title",children:n||s.title})}),(0,p.jsx)(F,{open:a,handleClose:currentAlbum:s})]}):null}L.defaultProps={hidden:!1,isEditDisabled:!1,title:void 0};var O=n(28154),q=n(28165),_=n(85582),G=n(51405),N=n(58467),U=n(53104),Y=n(11149),Q=n(25258),X=n(76391),J=n(28422),K=n(44278);function $(e){var t,n=e.isDisabled,i=e.hidden,r=(0,H.useState)(null),l=(0,A.Z)(r,2),a=l[0],s=l[1],d=(0,Y.Z)(),u=d.settings,h=d.saveGallerySettings,v=(0,N.s0)(),x=(0,c.at)(),f=(0,K.Z)().mutation,g=(0,N.bS)("/u/:userId/v/day"),Z=(0,N.bS)("/u/:userId/d/*"),b=(0,N.bS)("/u/:userId/v/month"),j=(0,N.bS)("/u/:userId/v/year"),k=null===x||void 0===x||null===(t=x.profile)||void 0===t?void 0:t.albumsSettings,w=null===k||void 0===k?void 0:k.defaultSortRule.field,I=null===k||void 0===k?void 0:k.defaultSortRule.desc,B=function(e){s(e.currentTarget)},S=function(e){return function(){var t;if(k&&w===J.hqH.Title&&e!==X.yI.All_Photos&&e!==X.yI.Day){var n={settings:{easyLinkingMode:k.easyLinkingMode,linkBackOption:k.linkBackOption,links:{email:k.links.email,direct:k.links.direct,htmlCode:k.links.htmlCode,htmlThumb:k.links.htmlThumb,imgThumb:k.links.imgThumb,img:k.links.img},defaultSortRule:{desc:I,field:J.hqH.Date}}};f({variables:n}),h((0,D.Z)((0,D.Z)({},u),{},{groupedBy:e,sortBy:{desc:I,field:J.hqH.Date}}))}else h((0,D.Z)((0,D.Z)({},u),{},{groupedBy:e}));Q.Z.debug("Routing view to interval",e),v("/u/".concat(null===x||void 0===x||null===(t=x.profile)||void 0===t?void 0:t.id)),s(null)}};return(0,U.Z)((function(){j?h((0,D.Z)((0,D.Z)({},u),{},{groupedBy:X.yI.Year})):b?h((0,D.Z)((0,D.Z)({},u),{},{groupedBy:X.yI.Month})):(Boolean(Z)||Boolean(g))&&h((0,D.Z)((0,D.Z)({},u),{},{groupedBy:X.yI.Day}))})),i?null:(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.Z,{mdDown:!0,children:(0,p.jsxs)(M.Z,{sx:{textTransform:"none",marginLeft:"4px",marginRight:"4px"},color:"secondary",variant:"outlined","data-test":"calendar",onClick:B,disabled:n,id:"gallery-grouped-by",children:[(0,p.jsx)(q.Z,{style:{marginRight:8}}),u.groupedBy?(0,C.replace)(u.groupedBy,"_"," "):(0,C.replace)(X.yI.All_Photos,"_"," ")]})}),(0,p.jsx)(o.Z,{mdUp:!0,children:(0,p.jsx)(y.Z,{color:"primary",onClick:B,"data-test":"calendar",size:"large",disabled:n,id:"layout-grouped-by",children:(0,p.jsx)(q.Z,{})})}),(0,p.jsxs)(_.Z,{anchorEl:a,keepMounted:!0,open:Boolean(a),onClose:"data-test":"calendar-menu",children:[(0,p.jsx)(G.Z,{disabled:!0,children:(0,p.jsx)(m.Z,{variant:"caption",children:"Change View:"})}),(0,p.jsx)(G.Z,{"data-test":"all-photos",selected:u.groupedBy===X.yI.All_Photos,onClick:S(X.yI.All_Photos),children:"All Photos"}),(0,p.jsx)(G.Z,{"data-test":"day",selected:u.groupedBy===X.yI.Day,onClick:S(X.yI.Day),children:"Day"}),(0,p.jsx)(G.Z,{"data-test":"month",selected:u.groupedBy===X.yI.Month,onClick:S(X.yI.Month),children:"Month"}),(0,p.jsx)(G.Z,{"data-test":"year",selected:u.groupedBy===X.yI.Year,onClick:S(X.yI.Year),children:"Year"})]})]})}$.defaultProps={isDisabled:!1,hidden:!1};var ee=n(36951),te=n(72668),ne=n(64516),ie=n(19860),re=n(9019),le=n(33604),ae=n(61689),oe=n(24929),se=n(15186),de=n(64271),ue=n(47053),ce=n(40497);function he(e){var t=e.item,n=e.boundary,i=(0,ue.Z)(t,320);return(0,p.jsx)("img",{src:i,alt:t.originalFilename,style:{width:n,height:n,objectFit:"cover"}},t.id)}function me(e){var t,n,i,r,l=e.username,o=e.album,s=e.subalbumCount,d=e.numberOfItems,u=e.handleClose,c=(0,ie.Z)(),h=(0,N.s0)(),v=(0,se.Z)(),x=(0,A.Z)(v,2),f=x[0],g=x[1].width,Z=(0,Y.Z)().settings,b={field:null===Z||void 0===Z||null===(t=Z.sortBy)||void 0===t?void 0:t.field,desc:null===Z||void 0===Z||null===(n=Z.sortBy)||void 0===n?void 0:n.desc},y={albumId:o.id,sortBy:b,pageSize:4},j=(null===(i=(0,te.a)(J.b6e,{variables:y,onError:).data)||void 0===i?void 0:i.getAlbumImagesV2.items)||[],C=1===o.counters.imageCount?"image":"images",k=1===s?"album":"albums",w=4,I=6;return 1===d&&(w=12,I=12),2===d&&(w=6,I=12),(0,p.jsx)(re.ZP,{item:!0,sm:w,xs:I,children:(0,p.jsxs)(a.Z,{ref:f,sx:{cursor:"pointer",borderWidth:1,borderColor:c.palette.customGrey[400],borderStyle:"solid"},onClick:(r=o.id,function(){u(),h("/u/".concat(l,"/a/").concat(r))}),children:[(0,p.jsxs)(a.Z,{sx:{display:"flex",flexWrap:"wrap",height:g,width:g,marginBottom:1},children:[!j.length&&(0,p.jsx)(a.Z,{sx:{cursor:"pointer",background:oe.Z[200],width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,p.jsx)(de.Z,{})}),j.length>0&&j.length<4&&(0,p.jsx)(he,{item:j[0],boundary:"100%"}),j.length>=4&&j.map(()]}),(0,p.jsxs)(a.Z,{sx:{padding:1},children:[(0,p.jsx)(m.Z,{variant:"subtitle1",style:{fontWeight:500,maxWidth:"200px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:o.title}),(0,p.jsxs)(m.Z,{variant:"caption",sx:{marginRight:1},children:[o.counters.imageCount," ",C]}),(0,p.jsxs)(m.Z,{variant:"caption",children:["\u2022 ",s," ",k]})]})]})})}function ve(e){var t,n,i,r=e.hidden,a=(0,c.at)(),o=(0,H.useState)(!1),d=(0,A.Z)(o,2),u=d[0],v=d[1],x=(0,h.Z)(),f=x.currentAlbum,g=x.groupedAlbums,Z=(0,H.useState)(null),b=(0,A.Z)(Z,2),j=b[0],C=b[1],k=Boolean(j);(0,H.useEffect)((function(){f&&!g[f.id]&&v(!0)}),[g,f]);var w=I=if(!f||r)return null;var D=1===(null===(t=g[f.id])||void 0===t?void 0:t.length)?"Album":"Albums",B=g[f.id]?"".concat(null===(n=g[f.id])||void 0===n?void 0:n.length," ").concat(D):"Create Album";return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(s.Z,{color:"primary",variant:"outlined",label:B,onClick:size:"small"}),(0,p.jsxs)(E.Z,{open:k,onClose:I,children:[(0,p.jsxs)(le.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,p.jsx)(m.Z,{variant:"body1",sx:{flex:1},children:"Albums"}),!u&&(0,p.jsx)(y.Z,{color:"primary",onClick:w,children:(0,p.jsx)(ae.Z,{title:"Add Album",children:(0,p.jsx)(ne.Z,{})})})]}),(0,p.jsxs)(T.Z,{sx:{padding:3,paddingTop:0},children:[(0,p.jsx)(l.Z,{in:u,sx:{paddingBottom:2},children:(0,p.jsx)(ce.Z,{parentAlbumId:f.id,onClose:w})}),(0,p.jsx)(re.ZP,{container:!0,spacing:1,children:null===(i=g[f.id])||void 0===i?void 0:i.map((function(e){var t,n,i;return(0,p.jsx)(me,{album:e,username:null===a||void 0===a||null===(t=a.profile)||void 0===t?void 0:t.id,numberOfItems:(null===(n=g[f.id])||void 0===n?void 0:n.length)||0,subalbumCount:(null===(i=g[e.id])||void 0===i?void 0:i.length)||0,handleClose:I},e.id)}))})]})]})]})}ve.defaultProps={hidden:!1};var xe=n(24198),fe=n(63694),pe=(0,r.ZP)("div")(();function ge(){var e,t=(0,i.l)(c.MD),n=(0,i.l)(c.sE),r=(0,fe.Z)().isFreeUser,m=(0,h.Z)(),v=m.currentAlbum,x=m.currentIsRoot,f=(0,c.at)(),b=(0,u.Z)();if(!v)return null;var y,j=0===(null===n||void 0===n?void 0:n.overridenImageCount)?0:null===n||void 0===n?void 0:n.overridenImageCount;y=0===j?j:(null===n||void 0===n?void 0:n.overridenImageCount)||(x?v.counters.imageCountIncludeSubAlbums:v.counters.imageCount);var C=1===Number(y)?"Image":"Images";return(0,p.jsxs)(pe,{children:[(0,p.jsx)(l.Z,{appear:!1,in:"down"!==t,children:(0,p.jsxs)(d.Z,{disableGutters:!0,sx:{justifyContent:"space-between",padding:{xs:"5px 10px",sm:"0 10px"},backgroundColor:"dark"===b.palette.mode?"#121212":"#fff"},children:[(0,p.jsxs)(a.Z,{sx:{display:"flex",alignItems:{xs:"flex-start",xl:"center"},flexDirection:{xs:"column",xl:"row"},flexWrap:"nowrap",gap:{xs:"4px",xl:"10px"}},children:[(0,p.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",flexWrap:"nowrap",gap:"5px",paddingLeft:null!==n&&void 0!==n&&n.shouldPrivacyMenuHide||x?"6px":0},children:[(0,p.jsx)(Z.ZP,{hidden:(null===n||void 0===n?void 0:n.shouldPrivacyMenuHide)||x,album:v,isPasswordProtectedDisabled:Boolean(r)}),(0,p.jsx)(L,{hidden:null===n||void 0===n?void 0:n.shouldAlbumTitleHide,isEditDisabled:null===n||void 0===n?void 0:n.isTitleMenuEditDisabled,title:null===n||void 0===n?void 0:n.overridenAlbumTitle})]}),(0,p.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",flexDirection:{xs:"row",lg:"row"},flexWrap:"nowrap",gap:"5px"},children:[(0,p.jsx)(o.Z,{mdDown:!0,children:(0,p.jsx)(s.Z,{variant:"outlined",label:"".concat(y," ").concat(C),size:"small"})}),(0,p.jsx)(ve,{hidden:null===n||void 0===n?void 0:n.isSubAlbumChipHidden})]})]}),(0,p.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",flexWrap:"nowrap"},children:[(0,p.jsx)(xe.Z,{isDisabled:null===n||void 0===n?void 0:n.isZoomMenuDisabled}),(0,p.jsx)($,{isDisabled:null===n||void 0===n?void 0:n.isGroupedMenuDisabled,hidden:(null===n||void 0===n?void 0:n.isGroupedMenuHidden)||(null===f||void 0===f||null===(e=f.profile)||void 0===e?void 0:e.defaultAlbum)!==v.id}),(0,p.jsx)(ee.Z,{isDisabled:null===n||void 0===n?void 0:n.isSortMenuDisabled,sortingOptions:null===n||void 0===n?void 0:n.enabledSortingOptions}),(0,p.jsx)(O.Z,{hidden:null===n||void 0===n?void 0:n.isCropModeHidden})]})]})}),(0,p.jsx)(k,{}),(0,p.jsx)(g,{})]})}ge.defaultProps={config:void 0}},40497:function(e,t,n){n.d(t,{Z:);var i=n(4942),r=n(1413),l=n(29439),a=n(24193),o=n(16783),s=n(47313),d=n(65079),u=n(51748),c=n(83798),h=n(46417);function m(e){var t,n={title:(new Date).toLocaleDateString()},m=(0,s.useRef)(n),v=e.parentAlbumId,x=e.onClose,f=(0,c.Z)(),p=f.mutation,g=f.results,Z=(0,s.useState)(m.current),b=(0,l.Z)(Z,2),y=b[0],j=b[1],C=(0,s.useState)({}),k=(0,l.Z)(C,2),w=k[0],I=k[1];(0,s.useEffect)((function(){var e;null!==(e=g.data)&&void 0!==e&&e.albumCreate&&j(m.current)}),[null===(t=g.data)||void 0===t?void 0:t.albumCreate]);return(0,h.jsxs)("form",{children:[(0,h.jsx)(d.Z,{error:g.error}),(0,h.jsx)(o.Z,{autoFocus:!0,"data-test":"create-album-title",error:Boolean(w.title),fullWidth:!0,helperText:w.title,label:"Album Name",margin:"normal",name:"title",onChange:function(e){var t=(0,r.Z)({},y),n=e.target.name;t[n]=e.target.value,j(t);var i=(0,r.Z)({},w);delete i[n],delete i.general,I(i)},value:y.title}),(0,h.jsx)(a.Z,{color:"primary",variant:"contained",onClick:function(){try{if(!y.title)throw new u.Z("Title is required","title");var e={parentAlbumId:v,title:y.title};p({variables:e}),x()}catch(n){var t=n;if("RequiredParameterException"===t.code)I((0,i.Z)({},t.parameterName,t.message));else I({general:t.message})}},type:"submit","data-test":"submit-create-album",children:"Create Album"}),(0,h.jsx)(a.Z,{onClick:x,children:"Cancel"})]})}},64516:function(e,t,n){var i=n(64836);t.Z=void 0;var r=i(n(45045)),l=n(46417),a=(0,r.default)((0,l.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"}),"AddCircle");t.Z=a},28165:function(e,t,n){var i=n(64836);t.Z=void 0;var r=i(n(45045)),l=n(46417),a=(0,r.default)((0,l.jsx)("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),"DateRange");t.Z=a}}]);