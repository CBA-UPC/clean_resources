!function(){let e;function t(e){return e&&e.__esModule?e.default:e}let n="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var i,s,o,r,a,l,c={randomUUID:n};let u=new Uint8Array(16),d=[];for(let e=0;e<256;++e)d.push((e+256).toString(16).slice(1));var h=function(t,n,i){if(c.randomUUID&&!n&&!t)return c.randomUUID();t=t||{};let s=t.random||(t.rng||function(){if(!e&&!(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(u)})();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,n){i=i||0;for(let e=0;e<16;++e)n[i+e]=s[e];return n}return function(e,t=0){return d[e[t+0]]+d[e[t+1]]+d[e[t+2]]+d[e[t+3]]+"-"+d[e[t+4]]+d[e[t+5]]+"-"+d[e[t+6]]+d[e[t+7]]+"-"+d[e[t+8]]+d[e[t+9]]+"-"+d[e[t+10]]+d[e[t+11]]+d[e[t+12]]+d[e[t+13]]+d[e[t+14]]+d[e[t+15]]}(s)};function p(e,t,n){let i=Math.floor(n/4294967296);e.setUint32(t,i),e.setUint32(t+4,n)}(i=o||(o={}))[i.debug=0]="debug",i[i.error=1]="error",i[i.info=2]="info",i[i.warn=3]="warn";var f={},m=f={};function w(){throw Error("setTimeout has not been defined")}function b(){throw Error("clearTimeout has not been defined")}function g(e){if(r===setTimeout)return setTimeout(e,0);if((r===w||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:w}catch(e){r=w}try{a="function"==typeof clearTimeout?clearTimeout:b}catch(e){a=b}}();var v=[],E=!1,_=-1;function y(){E&&l&&(E=!1,l.length?v=l.concat(v):_=-1,v.length&&I())}function I(){if(!E){var e=g(y);E=!0;for(var t=v.length;t;){for(l=v,v=[];++_<t;)l&&l[_].run();_=-1,t=v.length}l=null,E=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===b||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function C(e,t){this.fun=e,this.array=t}function S(){}m.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];v.push(new C(e,t)),1!==v.length||E||g(I)},C.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=S,m.addListener=S,m.once=S,m.off=S,m.removeListener=S,m.removeAllListeners=S,m.emit=S,m.prependListener=S,m.prependOnceListener=S,m.listeners=function(e){return[]},m.binding=function(e){throw Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(e){throw Error("process.chdir is not supported")},m.umask=function(){return 0};let T=(void 0===t(f)||t(f)?.env?.TEXT_ENCODING!=="never")&&"undefined"!=typeof TextEncoder&&"undefined"!=typeof TextDecoder;function D(e){let t=e.length,n=0,i=0;for(;i<t;){let s=e.charCodeAt(i++);if((4294967168&s)==0){n++;continue}if((4294965248&s)==0)n+=2;else{if(s>=55296&&s<=56319&&i<t){let t=e.charCodeAt(i);(64512&t)==56320&&(++i,s=((1023&s)<<10)+(1023&t)+65536)}(4294901760&s)==0?n+=3:n+=4}}return n}let R=T?new TextEncoder:void 0,M=T?void 0!==t(f)&&t(f)?.env?.TEXT_ENCODING!=="force"?200:0:4294967295,B=R?.encodeInto?function(e,t,n){R.encodeInto(e,t.subarray(n))}:function(e,t,n){t.set(R.encode(e),n)};T&&new TextDecoder,T&&void 0!==t(f)&&t(f)?.env?.TEXT_DECODER;class x{constructor(e,t){this.type=e,this.data=t}}class O extends Error{constructor(e){super(e);let t=Object.create(O.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:O.name})}}let U={type:-1,encode:function(e){if(!(e instanceof Date))return null;{let t=function(e){let t=e.getTime(),n=Math.floor(t/1e3),i=(t-1e3*n)*1e6,s=Math.floor(i/1e9);return{sec:n+s,nsec:i-1e9*s}}(e);return function({sec:e,nsec:t}){if(e>=0&&t>=0&&e<=17179869183){if(0===t&&e<=4294967295){let t=new Uint8Array(4),n=new DataView(t.buffer);return n.setUint32(0,e),t}{let n=e/4294967296,i=4294967295&e,s=new Uint8Array(8),o=new DataView(s.buffer);return o.setUint32(0,t<<2|3&n),o.setUint32(4,i),s}}{let n=new Uint8Array(12),i=new DataView(n.buffer);return i.setUint32(0,t),p(i,4,e),n}}(t)}},decode:function(e){let t=function(e){let t=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:{let e=t.getUint32(0);return{sec:e,nsec:0}}case 8:{let e=t.getUint32(0),n=t.getUint32(4);return{sec:(3&e)*4294967296+n,nsec:e>>>2}}case 12:{let e=function(e,t){let n=e.getInt32(t),i=e.getUint32(t+4);return 4294967296*n+i}(t,4),n=t.getUint32(0);return{sec:e,nsec:n}}default:throw new O(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}(e);return new Date(1e3*t.sec+t.nsec/1e6)}};class A{static #e=(()=>{this.defaultCodec=new A})();constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(U)}register({type:e,encode:t,decode:n}){if(e>=0)this.encoders[e]=t,this.decoders[e]=n;else{let i=1+e;this.builtInEncoders[i]=t,this.builtInDecoders[i]=n}}tryToEncode(e,t){for(let n=0;n<this.builtInEncoders.length;n++){let i=this.builtInEncoders[n];if(null!=i){let s=i(e,t);if(null!=s){let e=-1-n;return new x(e,s)}}}for(let n=0;n<this.encoders.length;n++){let i=this.encoders[n];if(null!=i){let s=i(e,t);if(null!=s){let e=n;return new x(e,s)}}}return e instanceof x?e:null}decode(e,t,n){let i=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return i?i(e,t,n):new x(t,e)}}class k{constructor(e=A.defaultCodec,t,n=100,i=!1,s=!1,o=!1,r=!1){this.extensionCodec=e,this.context=t,this.maxDepth=n,this.sortKeys=i,this.forceFloat32=s,this.ignoreUndefined=o,this.forceIntegerToFloat=r,this.pos=0,this.view=new DataView(new ArrayBuffer(2048)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.subarray(0,this.pos)}encode(e){return this.reinitializeState(),this.doEncode(e,1),this.bytes.slice(0,this.pos)}doEncode(e,t){if(t>this.maxDepth)throw Error(`Too deep objects in depth ${t}`);null==e?this.encodeNil():"boolean"==typeof e?this.encodeBoolean(e):"number"==typeof e?this.encodeNumber(e):"string"==typeof e?this.encodeString(e):this.encodeObject(e,t)}ensureBufferSizeToWrite(e){let t=this.pos+e;this.view.byteLength<t&&this.resizeBuffer(2*t)}resizeBuffer(e){let t=new ArrayBuffer(e),n=new Uint8Array(t),i=new DataView(t);n.set(this.bytes),this.view=i,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(e){!1===e?this.writeU8(194):this.writeU8(195)}encodeNumber(e){Number.isSafeInteger(e)&&!this.forceIntegerToFloat?e>=0?e<128?this.writeU8(e):e<256?(this.writeU8(204),this.writeU8(e)):e<65536?(this.writeU8(205),this.writeU16(e)):e<4294967296?(this.writeU8(206),this.writeU32(e)):(this.writeU8(207),this.writeU64(e)):e>=-32?this.writeU8(224|e+32):e>=-128?(this.writeU8(208),this.writeI8(e)):e>=-32768?(this.writeU8(209),this.writeI16(e)):e>=-2147483648?(this.writeU8(210),this.writeI32(e)):(this.writeU8(211),this.writeI64(e)):this.forceFloat32?(this.writeU8(202),this.writeF32(e)):(this.writeU8(203),this.writeF64(e))}writeStringHeader(e){if(e<32)this.writeU8(160+e);else if(e<256)this.writeU8(217),this.writeU8(e);else if(e<65536)this.writeU8(218),this.writeU16(e);else if(e<4294967296)this.writeU8(219),this.writeU32(e);else throw Error(`Too long string: ${e} bytes in UTF-8`)}encodeString(e){let t=e.length;if(t>M){let t=D(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),B(e,this.bytes,this.pos),this.pos+=t}else{let t=D(e);this.ensureBufferSizeToWrite(5+t),this.writeStringHeader(t),function(e,t,n){let i=e.length,s=n,o=0;for(;o<i;){let n=e.charCodeAt(o++);if((4294967168&n)==0){t[s++]=n;continue}if((4294965248&n)==0)t[s++]=n>>6&31|192;else{if(n>=55296&&n<=56319&&o<i){let t=e.charCodeAt(o);(64512&t)==56320&&(++o,n=((1023&n)<<10)+(1023&t)+65536)}(4294901760&n)==0?t[s++]=n>>12&15|224:(t[s++]=n>>18&7|240,t[s++]=n>>12&63|128),t[s++]=n>>6&63|128}t[s++]=63&n|128}}(e,this.bytes,this.pos),this.pos+=t}}encodeObject(e,t){let n=this.extensionCodec.tryToEncode(e,this.context);if(null!=n)this.encodeExtension(n);else if(Array.isArray(e))this.encodeArray(e,t);else if(ArrayBuffer.isView(e))this.encodeBinary(e);else if("object"==typeof e)this.encodeMap(e,t);else throw Error(`Unrecognized object: ${Object.prototype.toString.apply(e)}`)}encodeBinary(e){let t=e.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw Error(`Too large binary: ${t}`);let n=e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e);this.writeU8a(n)}encodeArray(e,t){let n=e.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw Error(`Too large array: ${n}`);for(let n of e)this.doEncode(n,t+1)}countWithoutUndefined(e,t){let n=0;for(let i of t)void 0!==e[i]&&n++;return n}encodeMap(e,t){let n=Object.keys(e);this.sortKeys&&n.sort();let i=this.ignoreUndefined?this.countWithoutUndefined(e,n):n.length;if(i<16)this.writeU8(128+i);else if(i<65536)this.writeU8(222),this.writeU16(i);else if(i<4294967296)this.writeU8(223),this.writeU32(i);else throw Error(`Too large map object: ${i}`);for(let i of n){let n=e[i];this.ignoreUndefined&&void 0===n||(this.encodeString(i),this.doEncode(n,t+1))}}encodeExtension(e){let t=e.data.length;if(1===t)this.writeU8(212);else if(2===t)this.writeU8(213);else if(4===t)this.writeU8(214);else if(8===t)this.writeU8(215);else if(16===t)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw Error(`Too large extension object: ${t}`);this.writeI8(e.type),this.writeU8a(e.data)}writeU8(e){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,e),this.pos++}writeU8a(e){let t=e.length;this.ensureBufferSizeToWrite(t),this.bytes.set(e,this.pos),this.pos+=t}writeI8(e){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,e),this.pos++}writeU16(e){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,e),this.pos+=2}writeI16(e){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,e),this.pos+=2}writeU32(e){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,e),this.pos+=4}writeI32(e){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,e),this.pos+=4}writeF32(e){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,e),this.pos+=4}writeF64(e){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,e),this.pos+=8}writeU64(e){this.ensureBufferSizeToWrite(8),function(e,t,n){let i=n/4294967296;e.setUint32(t,i),e.setUint32(t+4,n)}(this.view,this.pos,e),this.pos+=8}writeI64(e){this.ensureBufferSizeToWrite(8),p(this.view,this.pos,e),this.pos+=8}}let N={};function j(e,t=N){let n=new k(t.extensionCodec,t.context,t.maxDepth,t.sortKeys,t.forceFloat32,t.ignoreUndefined,t.forceIntegerToFloat);return n.encodeSharedRef(e)}let z=e=>{let t=parseInt(e.lastReadSessConfHeaderAsn||"",10),n=[e.lastReadSessConfHeaderContinent||null,e.lastReadSessConfHeaderCountry||null,e.lastReadSessConfHeaderState||null,isNaN(t)?null:t];return n},L=e=>{let t=[e.dopplerPlatformID,e.testObjectSize];return t},V=(e,t)=>new $(e,t);class ${constructor(e,t){this._applicationEventsBase=t.applicationLoggingEndpoint||e.application_events_base,this._dopplerEndpoints={dopplerResourceTimingEndpoint:t.dopplerBeaconEndpoint||e.doppler.resource_timing},this._pulsarEndpointBase=e.pulsar}get applicationEventsBase(){return this._applicationEventsBase}get dopplerEndpoints(){return this._dopplerEndpoints}get pulsarEndpointBase(){return this._pulsarEndpointBase}}let P=(e,t)=>new F(e,t);class F{constructor(e,t){this._applicationEventsBeaconIntervalInMilliseconds=q(e.a,t.applicationEventsBeaconInterval),this._maxInitialTestObjects=e.m,this._measurementStartDelay=e.st,this._sessionRefreshIntervalInMilliseconds=q(e.c,t.sessionRefreshInterval),this._schedulerRunIntervalInMilliseconds=q(e.sc,t.schedulerRunInterval),this._networksDisallowed=e.n}get networksDisallowed(){return this._networksDisallowed}get applicationEventsBeaconIntervalInMilliseconds(){return this._applicationEventsBeaconIntervalInMilliseconds}get maxInitialTestObjects(){return this._maxInitialTestObjects}get measurementStartDelay(){return this._measurementStartDelay}get sessionRefreshIntervalInMilliseconds(){return this._sessionRefreshIntervalInMilliseconds}get schedulerRunIntervalInMilliseconds(){return this._schedulerRunIntervalInMilliseconds}}function q(e,t){return 1e3*("number"==typeof t?t:e)}let H=(e,t)=>new W(e,t);class W{constructor(e,t){let n=e.s;this._siteOwnerSettings=P(n,t),this._clientEndpoints=V({application_events_base:"https://doppler-client-events.cbsivideo.com",doppler:{resource_timing:"https://doppler-beacon.cbsivideo.com/log"},pulsar:"https://b.ns1p.net?v=1583182801"},t)}get siteOwnerSettings(){return this._siteOwnerSettings}get beaconEndpointInfo(){return this._clientEndpoints}}function G(e){return e.map(e=>()=>e.execute()).reduce((e,t)=>e.then(e=>t().then(t=>[...e,t]).catch(()=>Promise.resolve(e))),Promise.resolve([])).then(e=>({testResults:e}))}var X=(e,t)=>{let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=n.length,s=()=>n.charAt(Math.floor(t(19)*i));return Array(e).fill(null).reduce(e=>e+s(),"")};class J extends Error{constructor(e,t){super(`Callback not consumed (being added: ${e}, still registered: ${t})`),Object.setPrototypeOf(this,new.target.prototype)}}class K extends Error{constructor(e,t,n){super(`Failed to find an entry for ${e} after ${t} milliseconds (max wait ${n})`),Object.setPrototypeOf(this,new.target.prototype)}}class Z{constructor(e,t,n,i){this._url=e,this._newDate=t,this._setTimeout=n,i.registerCallback(e,e=>{this._entry=e})}async awaitEntry(){let e;if(this._entry)return this._entry;let t=this._newDate().getTime(),n=2e3;do{let i=await Promise.all([new Promise(e=>{e(this._entry)}),new Promise(e=>{this._setTimeout(e,100)})]);if(i[0]){e=i[0];break}let s=this._newDate();n=s.getTime()-t}while(!e&&n<2e3)if(e)return e;throw new K(this._url,n,2e3)}}async function Y(e,t,n,i,s,o,r,a,l){try{let l=new Z(t,e.newDate,e.setTimeout,e.performanceEntryManager),c=await s(),u=await Q(e,t,n,i,c);if(u){let e=await l.awaitEntry();e&&(c.entry=e,await o(c,u))}await r(c),a(c)}catch(e){l(e)}e.performanceEntryManager.unregisterCallback(t)}async function Q(e,t,n,i,s){let o=e.newAbortController(),r=e.setTimeout(()=>{s.timeout=!0,o.abort()},n),a={method:"GET",keepalive:!1,signal:o.signal};i&&(a.headers={...i});try{let n=await e.fetch(t,a);return s.status=n.status,await n.blob(),e.clearTimeout(r),n}catch(e){s.error=e}}let ee=(e,t,n)=>`onError ${e} (${n.toISOString()}): ${t}`,et=(e,t)=>`Max target frequency changed by beacon response from ${e} to ${t}`;function en(e,t,n){let i;let s=function(e,t){let n=`rnd=${X(20,t)}`;return`${e}?${n}`}(t.testObjectURL,e.newRandomNumber);return{execute:()=>Y({clearTimeout:t=>e.callClearTimeout(12,t),fetch:e.callFetch,newAbortController:e.newAbortController,newDate:()=>e.newDate(12),performanceEntryManager:e.performanceEntryManager,setTimeout:(t,n)=>e.callSetTimeout(12,t,n)},s,t.testObjectTimeout,null,()=>e.runtimeValues.measurementsEnabled?(e.applicationEvents.recordBeforeTestObjectDownloadEvent(e.newEpochTimestamp(15),e.runtimeValues,t),i=e.newMonotonicTimestamp(15),Promise.resolve({testSetupResult:{calledAt:e.newDate(15)},timeout:!1})):Promise.reject(Error("beforeTest: Measurement blocked (measurements disabled)")),(n,s)=>{if(e.applicationEvents.recordAfterTestObjectDownloadEvent(e.newDate(14).getTime(),e.runtimeValues,t,Math.floor(e.newMonotonicTimestamp(14)-i)),t.cdnResponseHeader){let e=s.headers.get(t.cdnResponseHeader);e&&(n.cdnResponseHeaderValue=e)}return Promise.resolve()},async r=>{try{await function(i){let r=e.newMonotonicTimestamp(17);e.applicationEvents.recordBeforeMeasurementBeaconEvent(e.newEpochTimestamp(17),e.runtimeValues);let a=function(e,t,n,i,s){let{lastReadSessConfHeaderContinent:o,lastReadSessConfHeaderCountry:r,lastReadSessConfHeaderAsn:a}=s;if(!o)throw Error("Last read continent header missing");if(!r)throw Error("Last read country header missing");if(!a)throw Error("Last read ASN header missing");if(!n.error&&!n.entry)throw Error("Resource Timing entry missing");let l={c:{v:i.clientVersion.join(".")},s:{s:i.sessionStartTimestamp.getTime(),i:i.sessionUUID,h:{con:o,cou:r,a:a},u:{c:"web",d:{},o:{},b:{}}},met:{},mea:{i:t.dopplerPlatformID,s:n.testSetupResult.calledAt.getTime(),u:e,r:n.error?n.timeout?"timeout-abort":"unknown-error":"success",o:{s:t.testObjectSize,m:t.testObjectTimeout}}};n.cdnResponseHeaderValue&&(l.mea.c=n.cdnResponseHeaderValue),"number"==typeof n.status&&(l.mea.st=n.status);let c=i.browserMeta,u=c.device;u.type&&(l.s.u.d.t=u.type),u.vendor&&(l.s.u.d.v=u.vendor),u.model&&(l.s.u.d.m=u.model);let d=c.os;d.name&&(l.s.u.o.n=d.name),d.version&&(l.s.u.o.v=d.version);let h=c.browser;if(h.name&&(l.s.u.b.n=h.name),h.version&&(l.s.u.b.v=h.version),t.hdxEnabled!==t.hdxEnabledDefault&&(l.met.hdx=t.hdxEnabled),n.entry){let e=n.entry,t=e=>Math.floor(e);l.mea.re={c:{e:t(e.connectEnd),s:t(e.connectStart),se:t(e.secureConnectionStart)},do:{e:t(e.domainLookupEnd),s:t(e.domainLookupStart)},du:t(e.duration),f:t(e.fetchStart),i:e.initiatorType,n:e.nextHopProtocol,red:{e:t(e.redirectEnd),s:t(e.redirectStart)},req:t(e.requestStart),res:{e:t(e.responseEnd),s:t(e.responseStart)},si:{},st:t(e.startTime)},"number"==typeof e.decodedBodySize&&(l.mea.re.si.d=e.decodedBodySize),"number"==typeof e.encodedBodySize&&(l.mea.re.si.e=e.encodedBodySize),"number"==typeof e.transferSize&&(l.mea.re.si.t=e.transferSize)}return l}(s,t,i,n,e.runtimeValues),l={method:"POST",keepalive:!0,headers:new Headers({"doppler-payload-version":"1.0.0","content-type":"application/json"}),body:j(a)};return e.callFetch(t.endpointDoppler,l).then(e=>e.json()).then(t=>{e.applicationEvents.recordAfterMeasurementBeaconEvent(e.newEpochTimestamp(17),e.runtimeValues,Math.floor(e.newMonotonicTimestamp(17)-r));let n=t.g.con,i=t.g.cou,s=t.g.s,a=t.g.a;if(n&&(e.runtimeValues.lastReadBeaconContinent=n),i&&(e.runtimeValues.lastReadBeaconCountry=i),s&&(e.runtimeValues.lastReadBeaconState=s),a&&(e.runtimeValues.lastReadBeaconAsn=a,e.runtimeValues.updateMeasurementsEnabledForNetwork(a)),"number"==typeof t.m&&t.m>0&&e.maxTargetFrequency.value!=t.m){var l,c;e.outputToConsole(o.debug,(l=e.maxTargetFrequency.value,c=t.m,()=>et(l,c))),e.maxTargetFrequency.value=t.m,e.measurementScheduler.reschedule()}else("number"!=typeof t.m||t.m<=0)&&0!=e.maxTargetFrequency.value&&(e.outputToConsole(o.debug,()=>et(e.maxTargetFrequency.value,0)),e.maxTargetFrequency.value=0,e.measurementScheduler.reschedule())}).catch(t=>{t instanceof Error&&e.applicationEvents.recordMeasurementBeaconErrorEvent(e.newEpochTimestamp(17),e.runtimeValues,t.message)})}(r),function(n){if(t.includePulsar){if(n.error||200!==n.status){let t=Math.floor(e.newMonotonicTimestamp(18)-i);e.callSendBeacon(18,s(650,t))}else{let t=n.entry;e.callSendBeacon(18,s(n.status,Math.floor(t.responseEnd-t.requestStart)))}}function s(n,i){let s=Math.floor(4294967296*e.newRandomNumber(18));return`${t.endpointPulsarBase}&a=${t.pulsarAppID}&x=${s}&r=${t.pulsarJobID}:x|${n}|${i}`}}(r)}catch(e){}},n=>(e.measurementScheduler.scheduleNextMeasurement(t),e.measurementScheduler.outputDiagnosticMessage(),Promise.resolve(n)),n=>{e.outputToConsole(o.debug,()=>ee(t.dopplerPlatformID,n,e.newDate(16))),n instanceof J?e.measurementScheduler.scheduleNextMeasurementSoon(t):n instanceof K&&(e.performanceEntryAwaitTimeouts.add(1),e.performanceEntryAwaitTimeouts.countOfEvents>5&&(e.callClearResourceTimings(),e.performanceEntryAwaitTimeouts.reset()),e.measurementScheduler.scheduleNextMeasurementSoon(t))})}}let ei=(e,t,n)=>new es(e,t,n);class es{constructor(e,t,n){let i=e.i,s=e.u,o=e.s,r=e.t,a=e.pa,l=e.pj,c=e.f,u=e.d,d=e.p&&!!a&&!!l,h=e.us;this._cdnResponseHeader="x-cdn",this._dopplerPlatformID=i,a&&(this._pulsarAppID=a),l&&(this._pulsarJobID=l),this._endpointDoppler=t,this._endpointPulsarBase=n,this._hdxEnabled=h,this._hdxEnabledDefault=!0,this._includePulsar=d,this._includeDoppler=u,this._targetFrequency=c,this._testObjectURL=s,this._testObjectSize=o,this._testObjectTimeout=1e3*r}get cdnResponseHeader(){return this._cdnResponseHeader}get dopplerPlatformID(){return this._dopplerPlatformID}get endpointDoppler(){return this._endpointDoppler}get endpointPulsarBase(){return this._endpointPulsarBase}get hdxEnabled(){return this._hdxEnabled}get hdxEnabledDefault(){return this._hdxEnabledDefault}get includePulsar(){return this._includePulsar}get pulsarAppID(){return this._pulsarAppID}get pulsarJobID(){return this._pulsarJobID}get targetFrequency(){return this._targetFrequency}get testObjectSize(){switch(this._testObjectSize){case 1555e3:return 1555;case 43:return 43}return Math.floor(this._testObjectSize/1e3)}get testObjectTimeout(){return this._testObjectTimeout}get testObjectURL(){return this._testObjectURL}}let eo=(e,t,n)=>{let i=e=>ei(e,t,n);return e.map(e=>i(e))},er=(e,t,n,i,s)=>{let o=eo(i,s.beaconEndpointInfo.dopplerEndpoints.dopplerResourceTimingEndpoint,s.beaconEndpointInfo.pulsarEndpointBase),r=function(e,t,n,i,s){let o=e.flatMap(e=>{let t=Math.min(i(e),60);return Array(t).fill(e)}),r=[],a=t;for(;a--&&o.length;){let e=o[Math.floor(n(26)*o.length)];r.push(e),o.reduceRight((t,n,i)=>(n===e&&t.splice(i,1),t),o)}return r}(o,s.siteOwnerSettings.maxInitialTestObjects,e.newRandomNumber,e=>Math.ceil(e.targetFrequency),0);return e.measurementScheduler.initializePopulation(o,t,r),r.map(n=>en({applicationEvents:e.applicationEvents,callClearTimeout:e.callClearTimeout,callSendBeacon:e.callSendBeacon,callSetTimeout:e.callSetTimeout,callClearResourceTimings:e.callClearResourceTimings,callFetch:e.callFetch,maxTargetFrequency:e.maxTargetFrequency,measurementScheduler:e.measurementScheduler,newAbortController:e.newAbortController,newDate:e.newDate,newEpochTimestamp:e.newEpochTimestamp,newMonotonicTimestamp:e.newMonotonicTimestamp,newRandomNumber:e.newRandomNumber,outputToConsole:e.outputToConsole,performanceEntryAwaitTimeouts:e.performanceEntryAwaitTimeouts,performanceEntryManager:e.performanceEntryManager,runtimeValues:e.runtimeValues},n,t))},ea=(e,t,n,i,s)=>e.updatePopulation(eo(n,i,s),t),el=e=>`Application event logging endpoint: ${e}`,ec=(e,t)=>{let n=t.pageSettings;ew(e,t,function(i,s,r,a){let l=H(a,n),c=e.newDate(5);if(e.runtimeValues.sessionConfigLastUpdatedAt=c,e.applicationEvents.applicationEventLoggingEndpointBase=l.beaconEndpointInfo.applicationEventsBase,e.outputToConsole(o.debug,()=>el(e.applicationEvents.applicationEventLoggingEndpointBase)),e.runtimeValues.disallowedNetworks=l.siteOwnerSettings.networksDisallowed,e.runtimeValues.updateMeasurementsEnabledForNetwork(i),e.runtimeValues.measurementsEnabled){let t="number"==typeof n.measurementStartDelay?n.measurementStartDelay:l.siteOwnerSettings.measurementStartDelay;e.callSetTimeout(5,()=>{var t,n,i;(t=e.getDocumentReadyState,n=e.addDocumentReadyStateChangeListener,i=[{fetchSessionConfiguration:()=>Promise.resolve(l),produceExecutables:u}],("complete"===t()?Promise.resolve():new Promise(e=>{n(()=>{"complete"===t()&&e()})})).then(()=>{var e;return Promise.allSettled((e=i).map(e=>e.fetchSessionConfiguration())).then(t=>{let n=[];return t.forEach((t,i)=>{"fulfilled"===t.status&&"value"in t&&n.push(...e[i].produceExecutables(t.value))}),G(n)})})).then(()=>e.callSetTimeout(4,()=>e.applicationEvents.beacon(),1e3))},1e3*t)}else e.outputToConsole(o.info,()=>"Doppler measurements disabled (initial session config)");return l;function u(i){return er({applicationEvents:e.applicationEvents,callClearTimeout:e.callClearTimeout,callSendBeacon:e.callSendBeacon,callSetTimeout:e.callSetTimeout,callClearResourceTimings:e.callClearResourceTimings,callFetch:e.callFetch,maxTargetFrequency:e.maxTargetFrequency,measurementScheduler:e.measurementScheduler,newAbortController:e.newAbortController,newDate:e.newDate,newEpochTimestamp:e.newEpochTimestamp,newMonotonicTimestamp:e.newMonotonicTimestamp,newRandomNumber:e.newRandomNumber,outputToConsole:e.outputToConsole,performanceEntryAwaitTimeouts:e.performanceEntryAwaitTimeouts,performanceEntryManager:e.performanceEntryManager,runtimeValues:e.runtimeValues},t.sessionMetadata,n,a.o,i)}}).then(n=>{if(n){let i=e.runtimeValues;(function e(t,n,i,s){let r=i.siteOwnerSettings.sessionRefreshIntervalInMilliseconds;isNaN(r)||(t.outputToConsole(o.debug,()=>eh(r)),n.sessionRefreshDelayInMilliseconds=r,n.sessionConfigRefreshIntervalID=t.callSetInterval(8,()=>ew(t,s,(e,n,i,r)=>{let a=H(r,s.pageSettings),l=t.newDate(9);t.runtimeValues.sessionConfigLastUpdatedAt=l,t.runtimeValues.disallowedNetworks=a.siteOwnerSettings.networksDisallowed,t.runtimeValues.updateMeasurementsEnabledForNetwork(e),t.runtimeValues.measurementsEnabled||t.outputToConsole(o.info,()=>"Doppler measurements disabled (subsequent session config)");let c={browserMeta:s.sessionMetadata.browserMeta,clientVersion:s.sessionMetadata.clientVersion,sessionStartTimestamp:l,sessionUUID:t.newUUIDv4()};return ea(t.measurementScheduler,c,r.o,a.beaconEndpointInfo.dopplerEndpoints.dopplerResourceTimingEndpoint,a.beaconEndpointInfo.pulsarEndpointBase),a}).then(n=>{if(n){let i=t.runtimeValues;if(n.beaconEndpointInfo.applicationEventsBase!==t.applicationEvents.applicationEventLoggingEndpointBase&&(t.outputToConsole(o.info,()=>eb(t.applicationEvents.applicationEventLoggingEndpointBase,n.beaconEndpointInfo.applicationEventsBase)),t.applicationEvents.applicationEventLoggingEndpointBase=n.beaconEndpointInfo.applicationEventsBase),n.siteOwnerSettings.applicationEventsBeaconIntervalInMilliseconds!==i.applicationEventsBeaconIntervalInMilliseconds){t.outputToConsole(o.debug,()=>eg(i.applicationEventsBeaconIntervalInMilliseconds,n.siteOwnerSettings.applicationEventsBeaconIntervalInMilliseconds));let e=i.applicationEventsBeaconIntervalID;"number"==typeof e&&t.callClearInterval(6,e),ed(t,i,n)}if(n.siteOwnerSettings.sessionRefreshIntervalInMilliseconds!==i.sessionRefreshDelayInMilliseconds){t.outputToConsole(o.debug,()=>ev(i.sessionRefreshDelayInMilliseconds,n.siteOwnerSettings.sessionRefreshIntervalInMilliseconds));let r=i.sessionConfigRefreshIntervalID;"number"==typeof r&&t.callClearInterval(8,r),e(t,i,n,s)}if(n.siteOwnerSettings.schedulerRunIntervalInMilliseconds!==i.schedulerRunIntervalInMilliseconds){t.outputToConsole(o.debug,()=>eE(i.schedulerRunIntervalInMilliseconds,n.siteOwnerSettings.schedulerRunIntervalInMilliseconds));let e=i.schedulerRunIntervalID;"number"==typeof e&&t.callClearInterval(7,e),ef(t,i,n)}}}),r))})(e,i,n,t),ed(e,i,n),ef(e,i,n)}})},eu=e=>`Application events beacon interval ${e} ms`;function ed(e,t,n){let i=n.siteOwnerSettings.applicationEventsBeaconIntervalInMilliseconds;isNaN(i)||(0<i?(e.outputToConsole(o.debug,()=>eu(i)),t.applicationEventsBeaconIntervalInMilliseconds=i,t.applicationEventsBeaconIntervalID=e.callSetInterval(6,()=>e.applicationEvents.beacon(),i)):t.applicationEventsBeaconIntervalInMilliseconds=0)}let eh=e=>`Session refresh interval ${e} ms`,ep=e=>`Scheduler run interval ${e} ms`;function ef(e,t,n){let i=n.siteOwnerSettings.schedulerRunIntervalInMilliseconds;isNaN(i)||(e.outputToConsole(o.debug,()=>ep(i)),t.schedulerRunIntervalInMilliseconds=i,t.schedulerRunIntervalID=e.callSetInterval(7,()=>e.measurementScheduler.run(),i))}let em=e=>`Downloading new session configuration (${e(2)})`;function ew(e,t,n){e.outputToConsole(o.info,()=>em(e.newDate));let i=e.newMonotonicTimestamp(1),s=e.applicationEvents.recordBeforeSessionConfigDownloadEvent(e.newEpochTimestamp(1),e.runtimeValues);return e.callFetch(t.sessionConfigURL).then(e=>e.json()).then(o=>{let r=o.g.a,a=o.g.con,l=o.g.c,c=o.g.s;e.runtimeValues.lastReadSessConfHeaderContinent=a,e.runtimeValues.lastReadSessConfHeaderCountry=l,e.runtimeValues.lastReadSessConfHeaderState=c,e.runtimeValues.lastReadSessConfHeaderAsn=r.toString(10),e.applicationEvents.recordAfterSessionConfigDownloadEvent(e.newEpochTimestamp(1),e.runtimeValues,Math.floor(e.newMonotonicTimestamp(1)-i));let u=z(e.runtimeValues);return s.splice(1,4,...u),t.clientInitializationEvent.splice(1,4,...u),n(r,a,l,o)}).catch(t=>{t instanceof Error&&e.applicationEvents.recordSessionConfigDownloadErrorEvent(e.newEpochTimestamp(1),e.runtimeValues,t.message),e.applicationEvents.beacon()})}let eb=(e,t)=>`Application event logging endpoint changed from ${e} to ${t}`,eg=(e,t)=>`Application events beacon interval changed from ${e} to ${t} milliseconds`,ev=(e,t)=>`Session refresh interval changed from ${e} to ${t} milliseconds`,eE=(e,t)=>`Scheduler run interval changed from ${e} to ${t} milliseconds`,e_=(e,t)=>`Measuring ${e} after ${t}`,ey=(e,t,n)=>{let i=e=>`${e.testObjectConfig.dopplerPlatformID} (${e.testObjectConfig.testObjectSize})`,s=[`Measurements due at ${n}:`];return s.push(...e.map(e=>i(e))),s.push("\nMeasurements to queue:"),s.push(...t.map(e=>i(e))),s.join("\n")},eI=(e,t,n)=>`Difference detected in target frequency for ${e} (from: ${t}; to: ${n})`,eC=(e,t)=>e.reduce((e,t)=>{let n=t.scheduledMeasurementInfo,i=t.testObjectConfig.dopplerPlatformID;return e.push(n?`${i} will be measured after ${n.measureAfter}`:`${i} currently unscheduled`),e},[`Measurement Scheduler Diagnostics as of ${t}`]).join("\n"),eS=e=>`Skipping measurement for ${e} (measurements disabled)`,eT=(e,t)=>`Session configuration staleness check (age: ${e}, max age: ${t})`;function eD(e,t){return e.dopplerPlatformID===t.dopplerPlatformID&&e.testObjectSize===t.testObjectSize}var eR="function",eM="undefined",eB="object",ex="string",eO="major",eU="model",eA="name",ek="type",eN="vendor",ej="version",ez="architecture",eL="console",eV="mobile",e$="tablet",eP="smarttv",eF="wearable",eq="embedded",eH="Amazon",eW="Apple",eG="ASUS",eX="BlackBerry",eJ="Browser",eK="Chrome",eZ="Firefox",eY="Google",eQ="Huawei",e1="Microsoft",e0="Motorola",e2="Opera",e6="Samsung",e3="Sharp",e4="Sony",e8="Xiaomi",e9="Zebra",e5="Facebook",e7="Chromium OS",te="Mac OS",tt=function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2==0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},tn=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},ti=function(e,t){return typeof e===ex&&-1!==ts(t).indexOf(ts(e))},ts=function(e){return e.toLowerCase()},to=function(e,t){if(typeof e===ex)return e=e.replace(/^\s\s*/,""),typeof t===eM?e:e.substring(0,350)},tr=function(e,t){for(var n,i,s,o,r,a,l=0;l<t.length&&!r;){var c=t[l],u=t[l+1];for(n=i=0;n<c.length&&!r&&c[n];)if(r=c[n++].exec(e))for(s=0;s<u.length;s++)a=r[++i],typeof(o=u[s])===eB&&o.length>0?2===o.length?typeof o[1]==eR?this[o[0]]=o[1].call(this,a):this[o[0]]=o[1]:3===o.length?typeof o[1]!==eR||o[1].exec&&o[1].test?this[o[0]]=a?a.replace(o[1],o[2]):void 0:this[o[0]]=a?o[1].call(this,a,o[2]):void 0:4===o.length&&(this[o[0]]=a?o[3].call(this,a.replace(o[1],o[2])):void 0):this[o]=a||void 0;l+=2}},ta=function(e,t){for(var n in t)if(typeof t[n]===eB&&t[n].length>0){for(var i=0;i<t[n].length;i++)if(ti(t[n][i],e))return"?"===n?void 0:n}else if(ti(t[n],e))return"?"===n?void 0:n;return e},tl={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},tc={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[ej,[eA,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[ej,[eA,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[eA,ej],[/opios[\/ ]+([\w\.]+)/i],[ej,[eA,e2+" Mini"]],[/\bopr\/([\w\.]+)/i],[ej,[eA,e2]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[eA,ej],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[ej,[eA,"UC"+eJ]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[ej,[eA,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[ej,[eA,"WeChat"]],[/konqueror\/([\w\.]+)/i],[ej,[eA,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[ej,[eA,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[ej,[eA,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[eA,/(.+)/,"$1 Secure "+eJ],ej],[/\bfocus\/([\w\.]+)/i],[ej,[eA,eZ+" Focus"]],[/\bopt\/([\w\.]+)/i],[ej,[eA,e2+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[ej,[eA,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[ej,[eA,"Dolphin"]],[/coast\/([\w\.]+)/i],[ej,[eA,e2+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[ej,[eA,"MIUI "+eJ]],[/fxios\/([-\w\.]+)/i],[ej,[eA,eZ]],[/\bqihu|(qi?ho?o?|360)browser/i],[[eA,"360 "+eJ]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[eA,/(.+)/,"$1 "+eJ],ej],[/(comodo_dragon)\/([\w\.]+)/i],[[eA,/_/g," "],ej],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[eA,ej],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[eA],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[eA,e5],ej],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[eA,ej],[/\bgsa\/([\w\.]+) .*safari\//i],[ej,[eA,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[ej,[eA,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[ej,[eA,eK+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[eA,eK+" WebView"],ej],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[ej,[eA,"Android "+eJ]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[eA,ej],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[ej,[eA,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[ej,eA],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[eA,[ej,ta,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[eA,ej],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[eA,"Netscape"],ej],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[ej,[eA,eZ+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[eA,ej],[/(cobalt)\/([\w\.]+)/i],[eA,[ej,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[ez,"amd64"]],[/(ia32(?=;))/i],[[ez,ts]],[/((?:i[346]|x)86)[;\)]/i],[[ez,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[ez,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[ez,"armhf"]],[/windows (ce|mobile); ppc;/i],[[ez,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[ez,/ower/,"",ts]],[/(sun4\w)[;\)]/i],[[ez,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[ez,ts]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[eU,[eN,e6],[ek,e$]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[eU,[eN,e6],[ek,eV]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[eU,[eN,eW],[ek,eV]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[eU,[eN,eW],[ek,e$]],[/(macintosh);/i],[eU,[eN,eW]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[eU,[eN,e3],[ek,eV]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[eU,[eN,eQ],[ek,e$]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[eU,[eN,eQ],[ek,eV]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[eU,/_/g," "],[eN,e8],[ek,eV]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[eU,/_/g," "],[eN,e8],[ek,e$]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[eU,[eN,"OPPO"],[ek,eV]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[eU,[eN,"Vivo"],[ek,eV]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[eU,[eN,"Realme"],[ek,eV]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[eU,[eN,e0],[ek,eV]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[eU,[eN,e0],[ek,e$]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[eU,[eN,"LG"],[ek,e$]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[eU,[eN,"LG"],[ek,eV]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[eU,[eN,"Lenovo"],[ek,e$]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[eU,/_/g," "],[eN,"Nokia"],[ek,eV]],[/(pixel c)\b/i],[eU,[eN,eY],[ek,e$]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[eU,[eN,eY],[ek,eV]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[eU,[eN,e4],[ek,eV]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[eU,"Xperia Tablet"],[eN,e4],[ek,e$]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[eU,[eN,"OnePlus"],[ek,eV]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[eU,[eN,eH],[ek,e$]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[eU,/(.+)/g,"Fire Phone $1"],[eN,eH],[ek,eV]],[/(playbook);[-\w\),; ]+(rim)/i],[eU,eN,[ek,e$]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[eU,[eN,eX],[ek,eV]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[eU,[eN,eG],[ek,e$]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[eU,[eN,eG],[ek,eV]],[/(nexus 9)/i],[eU,[eN,"HTC"],[ek,e$]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[eN,[eU,/_/g," "],[ek,eV]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[eU,[eN,"Acer"],[ek,e$]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[eU,[eN,"Meizu"],[ek,eV]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[eN,eU,[ek,eV]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[eN,eU,[ek,e$]],[/(surface duo)/i],[eU,[eN,e1],[ek,e$]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[eU,[eN,"Fairphone"],[ek,eV]],[/(u304aa)/i],[eU,[eN,"AT&T"],[ek,eV]],[/\bsie-(\w*)/i],[eU,[eN,"Siemens"],[ek,eV]],[/\b(rct\w+) b/i],[eU,[eN,"RCA"],[ek,e$]],[/\b(venue[\d ]{2,7}) b/i],[eU,[eN,"Dell"],[ek,e$]],[/\b(q(?:mv|ta)\w+) b/i],[eU,[eN,"Verizon"],[ek,e$]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[eU,[eN,"Barnes & Noble"],[ek,e$]],[/\b(tm\d{3}\w+) b/i],[eU,[eN,"NuVision"],[ek,e$]],[/\b(k88) b/i],[eU,[eN,"ZTE"],[ek,e$]],[/\b(nx\d{3}j) b/i],[eU,[eN,"ZTE"],[ek,eV]],[/\b(gen\d{3}) b.+49h/i],[eU,[eN,"Swiss"],[ek,eV]],[/\b(zur\d{3}) b/i],[eU,[eN,"Swiss"],[ek,e$]],[/\b((zeki)?tb.*\b) b/i],[eU,[eN,"Zeki"],[ek,e$]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[eN,"Dragon Touch"],eU,[ek,e$]],[/\b(ns-?\w{0,9}) b/i],[eU,[eN,"Insignia"],[ek,e$]],[/\b((nxa|next)-?\w{0,9}) b/i],[eU,[eN,"NextBook"],[ek,e$]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[eN,"Voice"],eU,[ek,eV]],[/\b(lvtel\-)?(v1[12]) b/i],[[eN,"LvTel"],eU,[ek,eV]],[/\b(ph-1) /i],[eU,[eN,"Essential"],[ek,eV]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[eU,[eN,"Envizen"],[ek,e$]],[/\b(trio[-\w\. ]+) b/i],[eU,[eN,"MachSpeed"],[ek,e$]],[/\btu_(1491) b/i],[eU,[eN,"Rotor"],[ek,e$]],[/(shield[\w ]+) b/i],[eU,[eN,"Nvidia"],[ek,e$]],[/(sprint) (\w+)/i],[eN,eU,[ek,eV]],[/(kin\.[onetw]{3})/i],[[eU,/\./g," "],[eN,e1],[ek,eV]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[eU,[eN,e9],[ek,e$]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[eU,[eN,e9],[ek,eV]],[/smart-tv.+(samsung)/i],[eN,[ek,eP]],[/hbbtv.+maple;(\d+)/i],[[eU,/^/,"SmartTV"],[eN,e6],[ek,eP]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[eN,"LG"],[ek,eP]],[/(apple) ?tv/i],[eN,[eU,eW+" TV"],[ek,eP]],[/crkey/i],[[eU,eK+"cast"],[eN,eY],[ek,eP]],[/droid.+aft(\w)( bui|\))/i],[eU,[eN,eH],[ek,eP]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[eU,[eN,e3],[ek,eP]],[/(bravia[\w ]+)( bui|\))/i],[eU,[eN,e4],[ek,eP]],[/(mitv-\w{5}) bui/i],[eU,[eN,e8],[ek,eP]],[/Hbbtv.*(technisat) (.*);/i],[eN,eU,[ek,eP]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[eN,to],[eU,to],[ek,eP]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[ek,eP]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[eN,eU,[ek,eL]],[/droid.+; (shield) bui/i],[eU,[eN,"Nvidia"],[ek,eL]],[/(playstation [345portablevi]+)/i],[eU,[eN,e4],[ek,eL]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[eU,[eN,e1],[ek,eL]],[/((pebble))app/i],[eN,eU,[ek,eF]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[eU,[eN,eW],[ek,eF]],[/droid.+; (glass) \d/i],[eU,[eN,eY],[ek,eF]],[/droid.+; (wt63?0{2,3})\)/i],[eU,[eN,e9],[ek,eF]],[/(quest( 2| pro)?)/i],[eU,[eN,e5],[ek,eF]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[eN,[ek,eq]],[/(aeobc)\b/i],[eU,[eN,eH],[ek,eq]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[eU,[ek,eV]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[eU,[ek,e$]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[ek,e$]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[ek,eV]],[/(android[-\w\. ]{0,9});.+buil/i],[eU,[eN,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[ej,[eA,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[ej,[eA,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[eA,ej],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[ej,eA]],os:[[/microsoft (windows) (vista|xp)/i],[eA,ej],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[eA,[ej,ta,tl]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[eA,"Windows"],[ej,ta,tl]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[ej,/_/g,"."],[eA,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[eA,te],[ej,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[ej,eA],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[eA,ej],[/\(bb(10);/i],[ej,[eA,eX]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[ej,[eA,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[ej,[eA,eZ+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[ej,[eA,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[ej,[eA,"watchOS"]],[/crkey\/([\d\.]+)/i],[ej,[eA,eK+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[eA,e7],ej],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[eA,ej],[/(sunos) ?([\w\.\d]*)/i],[[eA,"Solaris"],ej],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[eA,ej]]};function tu(e,t){if(typeof e===eB&&(t=e,e=void 0),!(this instanceof tu))return new tu(e,t).getResult();var n=typeof window!==eM&&window.navigator?window.navigator:void 0,i=e||(n&&n.userAgent?n.userAgent:""),s=n&&n.userAgentData?n.userAgentData:void 0,o=t?tt(tc,t):tc,r=n&&n.userAgent==i;return this.getBrowser=function(){var e,t={};return t[eA]=void 0,t[ej]=void 0,tr.call(t,i,o.browser),t[eO]=typeof(e=t[ej])===ex?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0,r&&n&&n.brave&&typeof n.brave.isBrave==eR&&(t[eA]="Brave"),t},this.getCPU=function(){var e={};return e[ez]=void 0,tr.call(e,i,o.cpu),e},this.getDevice=function(){var e={};return e[eN]=void 0,e[eU]=void 0,e[ek]=void 0,tr.call(e,i,o.device),r&&!e[ek]&&s&&s.mobile&&(e[ek]=eV),r&&"Macintosh"==e[eU]&&n&&typeof n.standalone!==eM&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[eU]="iPad",e[ek]=e$),e},this.getEngine=function(){var e={};return e[eA]=void 0,e[ej]=void 0,tr.call(e,i,o.engine),e},this.getOS=function(){var e={};return e[eA]=void 0,e[ej]=void 0,tr.call(e,i,o.os),r&&!e[eA]&&s&&"Unknown"!=s.platform&&(e[eA]=s.platform.replace(/chrome os/i,e7).replace(/macos/i,te)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=typeof e===ex&&e.length>350?to(e,350):e,this},this.setUA(i),this}tu.VERSION="1.0.35",tu.BROWSER=tn([eA,ej,eO]),tu.CPU=tn([ez]),tu.DEVICE=tn([eU,eN,ek,eL,eV,eP,e$,eF,eq]),tu.ENGINE=tu.OS=tn([eA,ej]);var td="4.0.0";let th=window,tp=(s=th.__DOPPLER_PAGE_SETTINGS__||{},new class{constructor(e){this._applicationEventsBeaconInterval=e.applicationEventsBeaconInterval,this._applicationLoggingEndpoint=e.applicationLoggingEndpoint,this._consoleLogLevel=e.consoleLogLevel,this._dopplerBeaconEndpoint=e.dopplerBeaconEndpoint,this._measurementStartDelay=e.measurementStartDelay,this._rumConfigCountryOverride=e.rumConfigCountryOverride,this._rumConfigStateOverride=e.rumConfigStateOverride,this._rumConfigASNOverride=e.rumConfigASNOverride,this._schedulerRunInterval=e.schedulerRunInterval,this._sessionConfigDelay=e.sessionConfigDelay,this._sessionConfigOrigin=e.sessionConfigOrigin;let t=e.sessionRefreshInterval;this._sessionRefreshInterval="number"==typeof t?Math.max(Math.min(t,60),1):void 0}get consoleLogLevel(){return this._consoleLogLevel}get applicationEventsBeaconInterval(){return this._applicationEventsBeaconInterval}get applicationLoggingEndpoint(){return this._applicationLoggingEndpoint}get sessionConfigDelay(){return this._sessionConfigDelay}get measurementStartDelay(){return this._measurementStartDelay}get sessionRefreshInterval(){return this._sessionRefreshInterval}get dopplerBeaconEndpoint(){return this._dopplerBeaconEndpoint}get schedulerRunInterval(){return this._schedulerRunInterval}get sessionConfigOrigin(){return this._sessionConfigOrigin}get rumConfigCountryOverride(){return this._rumConfigCountryOverride}get rumConfigStateOverride(){return this._rumConfigStateOverride}get rumConfigASNOverride(){return this._rumConfigASNOverride}}(s)),tf=e=>new Date,tm=e=>Date.now(),tw=e=>performance.now(),tb=e=>Math.random(),tg=(e,t)=>fetch(e,t),tv=(e,t)=>"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(t),tE=(e,t,n)=>{if(isNaN(n)||n<4800)throw Error(`setInterval called with invalid interval value ${n}`);return setInterval(t,n)},t_=(e,t,n)=>setTimeout(t,n),ty=(e,t)=>{e===o.error?console.error(t):e===o.warn?console.warn(t):e===o.info?console.info(t):e===o.debug&&console.debug(t)},tI=e=>"string"==typeof tp.consoleLogLevel&&function(e,t){let n=e.toLowerCase();return"error"===n?t===o.error:"warn"===n?t===o.error||t===o.warn:"info"===n?t===o.error||t===o.warn||t===o.info:"debug"===n&&(t===o.error||t===o.warn||t===o.info||t===o.debug)}(tp.consoleLogLevel,e),tC=(e,t)=>{tI(e)&&ty(e,t())},tS=new class{constructor(){this._applicationEventsBeaconIntervalID=void 0,this._applicationEventsBeaconIntervalInMilliseconds=void 0,this._disallowedNetworks=[],this._lastReadBeaconContinent=void 0,this._lastReadBeaconCountry=void 0,this._lastReadBeaconState=void 0,this._lastReadBeaconAsn=void 0,this._lastReadSessConfHeaderContinent=void 0,this._lastReadSessConfHeaderCountry=void 0,this._lastReadSessConfHeaderState=void 0,this._lastReadSessConfHeaderAsn=void 0,this._measurementsEnabled=!1,this._schedulerRunIntervalID=void 0,this._schedulerRunIntervalInMilliseconds=void 0,this._sessionConfigLastUpdatedAt=void 0,this._sessionConfigRefreshIntervalID=void 0,this._sessionRefreshDelayInMilliseconds=void 0}get disallowedNetworks(){return this._disallowedNetworks}set disallowedNetworks(e){this._disallowedNetworks=e}get applicationEventsBeaconIntervalID(){return this._applicationEventsBeaconIntervalID}set applicationEventsBeaconIntervalID(e){this._applicationEventsBeaconIntervalID=e}get applicationEventsBeaconIntervalInMilliseconds(){return this._applicationEventsBeaconIntervalInMilliseconds}set applicationEventsBeaconIntervalInMilliseconds(e){this._applicationEventsBeaconIntervalInMilliseconds=e}get lastReadBeaconContinent(){return this._lastReadBeaconContinent}set lastReadBeaconContinent(e){this._lastReadBeaconContinent=e}get lastReadBeaconCountry(){return this._lastReadBeaconCountry}set lastReadBeaconCountry(e){this._lastReadBeaconCountry=e}get lastReadBeaconState(){return this._lastReadBeaconState}set lastReadBeaconState(e){this._lastReadBeaconState=e}get lastReadBeaconAsn(){return this._lastReadBeaconAsn}set lastReadBeaconAsn(e){this._lastReadBeaconAsn=e}get lastReadSessConfHeaderContinent(){return this._lastReadSessConfHeaderContinent}set lastReadSessConfHeaderContinent(e){this._lastReadSessConfHeaderContinent=e}get lastReadSessConfHeaderCountry(){return this._lastReadSessConfHeaderCountry}set lastReadSessConfHeaderCountry(e){this._lastReadSessConfHeaderCountry=e}get lastReadSessConfHeaderState(){return this._lastReadSessConfHeaderState}set lastReadSessConfHeaderState(e){this._lastReadSessConfHeaderState=e}get lastReadSessConfHeaderAsn(){return this._lastReadSessConfHeaderAsn}set lastReadSessConfHeaderAsn(e){this._lastReadSessConfHeaderAsn=e}get measurementsEnabled(){return this._measurementsEnabled}set measurementsEnabled(e){this._measurementsEnabled=e}get schedulerRunIntervalID(){return this._schedulerRunIntervalID}set schedulerRunIntervalID(e){this._schedulerRunIntervalID=e}get schedulerRunIntervalInMilliseconds(){return this._schedulerRunIntervalInMilliseconds}set schedulerRunIntervalInMilliseconds(e){this._schedulerRunIntervalInMilliseconds=e}get sessionConfigLastUpdatedAt(){return this._sessionConfigLastUpdatedAt}set sessionConfigLastUpdatedAt(e){this._sessionConfigLastUpdatedAt=e}get sessionConfigRefreshIntervalID(){return this._sessionConfigRefreshIntervalID}set sessionConfigRefreshIntervalID(e){this._sessionConfigRefreshIntervalID=e}get sessionRefreshDelayInMilliseconds(){return this._sessionRefreshDelayInMilliseconds}set sessionRefreshDelayInMilliseconds(e){this._sessionRefreshDelayInMilliseconds=e}updateMeasurementsEnabledForNetwork(e){this._measurementsEnabled=!this._disallowedNetworks.includes(e)}},tT={value:0},tD=new class{constructor(e,t){this._dependencies=e,this._clientVersion=t,this._clientInitializationRecorded=!1,this._applicationEventLoggingEndpointBase=null,this._afterMeasurementBeaconEvents=[],this._afterSessionConfigDownloadEvents=[],this._afterTestObjectDownloadEvents=[],this._beforeMeasurementBeaconEvents=[],this._beforeSessionConfigDownloadEvents=[],this._beforeTestObjectDownloadEvents=[],this._clientInitializedEvent=null,this._measurementBeaconErrorEvents=[],this._sessionConfigDownloadErrorEvents=[]}_resetEventState(){this._afterMeasurementBeaconEvents=[],this._afterSessionConfigDownloadEvents=[],this._afterTestObjectDownloadEvents=[],this._beforeMeasurementBeaconEvents=[],this._beforeSessionConfigDownloadEvents=[],this._beforeTestObjectDownloadEvents=[],this._clientInitializedEvent=null,this._measurementBeaconErrorEvents=[],this._sessionConfigDownloadErrorEvents=[]}get applicationEventLoggingEndpointBase(){return this._applicationEventLoggingEndpointBase}set applicationEventLoggingEndpointBase(e){this._applicationEventLoggingEndpointBase=e}beacon(){let e=this._afterMeasurementBeaconEvents.length+this._afterSessionConfigDownloadEvents.length+this._afterTestObjectDownloadEvents.length+this._beforeMeasurementBeaconEvents.length+this._beforeSessionConfigDownloadEvents.length+this._beforeTestObjectDownloadEvents.length+(this._clientInitializedEvent?1:0)+this._measurementBeaconErrorEvents.length+this._sessionConfigDownloadErrorEvents.length;if(e){if(this._applicationEventLoggingEndpointBase&&"number"==typeof this._dependencies.runtimeValues.applicationEventsBeaconIntervalInMilliseconds&&0<this._dependencies.runtimeValues.applicationEventsBeaconIntervalInMilliseconds){let e=[1,1,this._clientVersion,this._beforeTestObjectDownloadEvents,this._afterTestObjectDownloadEvents,this._beforeMeasurementBeaconEvents,this._afterMeasurementBeaconEvents,this._measurementBeaconErrorEvents,this._beforeSessionConfigDownloadEvents,this._afterSessionConfigDownloadEvents,this._sessionConfigDownloadErrorEvents,this._clientInitializedEvent];this._dependencies.outputToConsole(o.debug,()=>`Client event data: ${JSON.stringify(e)}`),this._dependencies.callSendBeaconWithData(0,new URL("/v1",this._applicationEventLoggingEndpointBase).href,j(e))}this._resetEventState()}}recordAfterMeasurementBeaconEvent(e,t,n){this._afterMeasurementBeaconEvents.push([e,...z(t),n])}recordAfterSessionConfigDownloadEvent(e,t,n){this._afterSessionConfigDownloadEvents.push([e,...z(t),n])}recordAfterTestObjectDownloadEvent(e,t,n,i){this._afterTestObjectDownloadEvents.push([e,...z(t),...L(n),i])}recordBeforeMeasurementBeaconEvent(e,t){this._beforeMeasurementBeaconEvents.push([e,...z(t)])}recordBeforeSessionConfigDownloadEvent(e,t){let n=[e,...z(t)];return this._beforeSessionConfigDownloadEvents.push(n),n}recordBeforeTestObjectDownloadEvent(e,t,n){this._beforeTestObjectDownloadEvents.push([e,...z(t),...L(n)])}recordClientInitializedEvent(e){if(!this._clientInitializationRecorded){this._clientInitializationRecorded=!0;let t=[e,"","","",null];return this._clientInitializedEvent=t,t}throw Error("Only one call to recordClientInitializedEvent should be made")}recordMeasurementBeaconErrorEvent(e,t,n){this._measurementBeaconErrorEvents.push([e,...z(t),n])}recordSessionConfigDownloadErrorEvent(e,t,n){this._sessionConfigDownloadErrorEvents.push([e,...z(t),n])}}({callSendBeaconWithData:(e,t,n)=>"function"==typeof navigator.sendBeacon&&navigator.sendBeacon(t,n),outputToConsole:tC,runtimeValues:tS},td);window.addEventListener("beforeunload",()=>{tD.beacon()});let tR=new class{constructor(e){this._dependencies=e,this._observer=this._dependencies.newPerformanceObserver(e=>{if(void 0!=this._callbackBundle){let t=e.getEntriesByName(this._callbackBundle.url,"resource");t.length&&(this._callbackBundle.callback(t[0]),delete this._callbackBundle)}})}registerCallback(e,t){if(this._callbackBundle)throw new J(e,this._callbackBundle.url);this._callbackBundle={url:e,callback:t,registeredAt:this._dependencies.newDate()},this._observer.observe({type:"resource",buffered:!1})}unregisterCallback(e){this._callbackBundle&&this._callbackBundle.url===e&&delete this._callbackBundle,this._observer.disconnect()}}({newDate:()=>tf(13),newPerformanceObserver:e=>new PerformanceObserver(e)}),tM=new class{constructor(){this._countOfEvents=0}add(e){this._countOfEvents+=e}reset(){this._countOfEvents=0}get countOfEvents(){return this._countOfEvents}},tB=new class{constructor(e,t){this._dependencies=e;let n={*[Symbol.iterator](){for(let e=0;e<t.length;e++){let[n,i,s,o]=t[e];for(let e=s;e<o;e++){let t=i/e;for(let e=0;e<n;e++)yield t}}}};this._fuzzinessModifiers=new Float32Array(n)}calculateInterval(e){let t=this._dependencies.maxHourlyRate.value>0?Math.min(e,this._dependencies.maxHourlyRate.value):e;this._dependencies.outputToConsole(o.debug,()=>{let n=e==t?"hourly rate not capped":`hourly rate capped at ${t} from ${e}`;return`Calculating interval (${n})`});let n=0<this._fuzzinessModifiers.length?this._fuzzinessModifiers[Math.floor(this._dependencies.newRandomNumber(10)*this._fuzzinessModifiers.length)]:1;return Math.floor(1/t*36e5*n)}}({maxHourlyRate:tT,newRandomNumber:tb,outputToConsole:tC},[[5,1e3,801,850],[7,1e3,851,900],[9,1e3,901,950],[10,1e3,951,1e3],[10,1e3,1001,1050],[9,1e3,1051,1100],[7,1e3,1101,1150],[5,1e3,1151,1200]]),tx=new class{constructor(e){this._dependencies=e,this._scheduleRecords=[],this._schedulerLocked=!1}_sortScheduleRecords(){this._scheduleRecords.sort((e,t)=>e.scheduledMeasurementInfo||t.scheduledMeasurementInfo?e.scheduledMeasurementInfo?t.scheduledMeasurementInfo?e.scheduledMeasurementInfo.measureAfter<t.scheduledMeasurementInfo.measureAfter?-1:e.scheduledMeasurementInfo.measureAfter>t.scheduledMeasurementInfo.measureAfter?1:0:1:-1:0)}reschedule(){this._dependencies.outputToConsole(o.info,()=>"Rescheduling (max target frequency "+this._dependencies.maxTargetFrequency.value+")");let e=this._dependencies.newDate(22);this._scheduleRecords.forEach(t=>{let n=t.scheduledMeasurementInfo,i=n?n.lastScheduledAt:e;t.scheduledMeasurementInfo={lastScheduledAt:e,measureAfter:new Date(i.getTime()+this._dependencies.intervalCalculator.calculateInterval(t.testObjectConfig.targetFrequency))}}),this._sortScheduleRecords(),this.outputDiagnosticMessage()}run(){if(this._dependencies.outputToConsole(o.debug,()=>`Scheduler run ${this._dependencies.newDate(11)}`),this._schedulerLocked)this._dependencies.outputToConsole(o.debug,()=>"Skipping run because the scheduler is locked");else{this._schedulerLocked=!0;let e=()=>{this._schedulerLocked=!1},t=(e,t)=>({execute:()=>(e._dependencies.outputToConsole(o.debug,()=>eS(t.testObjectConfig.dopplerPlatformID)),e.scheduleNextMeasurement(t.testObjectConfig),e.outputDiagnosticMessage(),Promise.resolve())}),n=this._dependencies.newDate(11),i=this._dependencies.runtimeValues.sessionConfigLastUpdatedAt;if(!i||((e,t,n)=>{let i=e.valueOf()-t.valueOf();return this._dependencies.outputToConsole(o.debug,()=>eT(i,n)),i>n})(n,i,3e6)){this._dependencies.outputToConsole(o.info,()=>"Measurements paused"),e();return}let s=this._scheduleRecords.filter(e=>e.scheduledMeasurementInfo&&n>e.scheduledMeasurementInfo.measureAfter);if(s.length){let i=s.slice(0,3);this._dependencies.outputToConsole(o.debug,()=>ey(s,i,n)),G(i.map(e=>this._dependencies.runtimeValues.measurementsEnabled?en({applicationEvents:this._dependencies.applicationEvents,callClearTimeout:this._dependencies.callClearTimeout,callSendBeacon:this._dependencies.callSendBeacon,callSetTimeout:this._dependencies.callSetTimeout,callClearResourceTimings:this._dependencies.callClearResourceTimings,callFetch:this._dependencies.callFetch,maxTargetFrequency:this._dependencies.maxTargetFrequency,measurementScheduler:this,newAbortController:this._dependencies.newAbortController,newDate:this._dependencies.newDate,newEpochTimestamp:this._dependencies.newEpochTimestamp,newMonotonicTimestamp:this._dependencies.newMonotonicTimestamp,newRandomNumber:this._dependencies.newRandomNumber,outputToConsole:this._dependencies.outputToConsole,performanceEntryAwaitTimeouts:this._dependencies.performanceEntryAwaitTimeouts,performanceEntryManager:this._dependencies.performanceEntryManager,runtimeValues:this._dependencies.runtimeValues},e.testObjectConfig,e.sessionMetadata):t(this,e))).then(e,e)}else e()}}_scheduleMeasurement(e,t,n){let i=this._scheduleRecords.find(t=>eD(t.testObjectConfig,e));if(i){let s=this._dependencies.newDate(n),r=t?s:new Date(s.getTime()+this._dependencies.intervalCalculator.calculateInterval(i.testObjectConfig.targetFrequency));i.scheduledMeasurementInfo={lastScheduledAt:s,measureAfter:r},this._sortScheduleRecords();let a=i.scheduledMeasurementInfo;a&&this._dependencies.outputToConsole(o.debug,()=>e_(e.dopplerPlatformID,a.measureAfter))}}scheduleNextMeasurement(e){this._scheduleMeasurement(e,!1,23)}scheduleNextMeasurementSoon(e){this._scheduleMeasurement(e,!0,24)}initializePopulation(e,t,n){let i=new Set(n);this._scheduleRecords.push(...e.map(e=>({testObjectConfig:e,sessionMetadata:t})));let s=this._dependencies.newDate(20);this._scheduleRecords.forEach(e=>{let t=e.testObjectConfig;if(!i.has(t)){let n=this._dependencies.intervalCalculator.calculateInterval(t.targetFrequency);e.scheduledMeasurementInfo={lastScheduledAt:s,measureAfter:new Date(s.getTime()+n)};let i=e.scheduledMeasurementInfo;i&&this._dependencies.outputToConsole(o.debug,()=>e_(t.dopplerPlatformID,i.measureAfter))}}),this._sortScheduleRecords()}updatePopulation(e,t){let n=e=>this._dependencies.intervalCalculator.calculateInterval(e);this._scheduleRecords=this._scheduleRecords.filter(t=>e.some(e=>eD(e,t.testObjectConfig)));let i=this._dependencies.newDate(25);e.forEach(e=>{let s=this._scheduleRecords.find(t=>eD(t.testObjectConfig,e));if(s){let r=s.testObjectConfig.targetFrequency!==e.targetFrequency;r&&this._dependencies.outputToConsole(o.debug,()=>eI(e.dopplerPlatformID,s.testObjectConfig.targetFrequency,e.targetFrequency)),s.testObjectConfig=e,s.sessionMetadata=t;let a=s.scheduledMeasurementInfo;if(!a||a&&r){let t=a?a.lastScheduledAt:i;s.scheduledMeasurementInfo={lastScheduledAt:i,measureAfter:new Date(t.getTime()+n(e.targetFrequency))}}}else this._scheduleRecords.push({testObjectConfig:e,sessionMetadata:t,scheduledMeasurementInfo:{lastScheduledAt:i,measureAfter:new Date(i.getTime()+n(e.targetFrequency))}})}),this._sortScheduleRecords(),this.outputDiagnosticMessage()}outputDiagnosticMessage(){this._dependencies.outputToConsole(o.debug,()=>eC(this._scheduleRecords,this._dependencies.newDate(21)))}}({applicationEvents:tD,callSetTimeout:t_,callSendBeacon:tv,callClearResourceTimings:()=>performance.clearResourceTimings(),callClearTimeout:e=>clearTimeout(e),callFetch:tg,intervalCalculator:tB,maxTargetFrequency:tT,newAbortController:()=>new AbortController,newDate:tf,newEpochTimestamp:tm,newMonotonicTimestamp:tw,newRandomNumber:tb,outputToConsole:tC,performanceEntryAwaitTimeouts:tM,performanceEntryManager:tR,runtimeValues:tS});"function"==typeof navigator.sendBeacon&&"function"==typeof Promise.allSettled&&"function"==typeof Array.prototype.flatMap&&setTimeout(()=>ec({addDocumentReadyStateChangeListener:e=>document.addEventListener("readystatechange",e),applicationEvents:tD,callClearInterval:(e,t)=>clearInterval(t),callClearTimeout:(e,t)=>clearTimeout(t),callFetch:tg,callClearResourceTimings:()=>performance.clearResourceTimings(),callSendBeacon:tv,callSetInterval:tE,callSetTimeout:t_,getDocumentReadyState:()=>document.readyState,maxTargetFrequency:tT,measurementScheduler:tx,newAbortController:()=>new AbortController,newDate:tf,newEpochTimestamp:tm,newMonotonicTimestamp:tw,newRandomNumber:tb,newUUIDv4:()=>h(),outputToConsole:tC,performanceEntryAwaitTimeouts:tM,performanceEntryManager:tR,runtimeValues:tS},{sessionMetadata:function(){let e=td.split(".");if(3!=e.length||Number.isNaN(parseInt(e[0]))||Number.isNaN(parseInt(e[1])))throw Error(`Invalid client version: ${td}`);let t=new tu,n="function"==typeof t.getResult?t.getResult():{ua:navigator.userAgent,device:{},browser:{},os:{}},i={userAgent:n.ua,deviceCategory:"web",device:n.device,browser:n.browser,os:n.os},[s,o,r]=e,a={browserMeta:i,clientVersion:[s,o,r],sessionStartTimestamp:new Date,sessionUUID:h()};return a}(),sessionConfigURL:function(e){let t=e.sessionConfigOrigin?e.sessionConfigOrigin:"https://doppler-config.cbsivideo.com",n=[];return(e.rumConfigCountryOverride&&n.push(`c=${e.rumConfigCountryOverride}`),e.rumConfigStateOverride&&n.push(`s=${e.rumConfigStateOverride}`),e.rumConfigASNOverride&&n.push(`a=${e.rumConfigASNOverride}`),n.length)?`${t}/v3/config?${n.join("&")}`:`${t}/v3/config`}(tp),pageSettings:tp,clientInitializationEvent:tD.recordClientInitializedEvent(tm(3))}),"number"==typeof tp.sessionConfigDelay?tp.sessionConfigDelay:5e3)}();
//# sourceMappingURL=doppler.3b3dfbeb.min.js.map
