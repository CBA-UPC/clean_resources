import{at as m,ai as d,cM as p,l as x}from"./itinerary-entities.5f897bcd.js";import{r as s}from"./graphql.5cf3693b.js";function h(i){const{extraCondition:r=!0,onTimeout:e}=i||{},a=s(!1),t=s(),n=s(),{day:u}=x(),l=m(),o=d();function c(){t.value=new Date,n.value=window.setInterval(async()=>{if(r&&u.gregory().diff(u.gregory(t.value))>=p&&!a.value){a.value=!0;const{isConfirmed:v}=await l({text:o.t("timeout.notUpdatedInfo"),icon:"warning",showConfirmButton:!0,confirmButtonText:o.t("timeout.update"),showCancelButton:!0,cancelButtonText:o.t("timeout.ok")});t.value=new Date,a.value=!1,v&&(e==null||e())}},1e3)}function f(){window.clearInterval(n.value),n.value=void 0}eturn{start:c,stop:f,forceReset:w}}export{h as u};
