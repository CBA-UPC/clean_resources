(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4928],{34561:49013:function(e,t,n){"use strict";n.d(t,{Z:function(){return AuthForm}});var a=n(52322),i=n(2784),r=n(23848),o=n(5632),s=n(34126),l=n(99219),c=n(86414),u=n(24595),m=n(83122),d=n(12273),_=n(16377),h=n(23375),g=n(77512);function AuthForm(e){let{authType:t,initialEmail:n,callbackUrl:E}=e,R=(0,o.useRouter)(),[p,b]=(0,i.useState)(()=>n||h.t.getLastSignInEmail()||""),[f,T]=(0,i.useState)(""),[U,x]=(0,i.useState)(!1),{error:S,...P}=(0,m.H8)(R.query),L=function(e){let{callbackUrlProp:t,query:n}=e,a=t||n.callbackUrl||"/",i=new URL(a,_.Z.APP_URL);return i.search=(0,s.stringify)(n),i.href}({callbackUrlProp:E,query:P});(0,d.$)({error:S,enabled:!U});let onSignIn=N="login"===t,handleGoogleLogin=async e=>{e.preventDefault(),await (0,r.signIn)("google",{callbackUrl:L,isLogin:N}),onSignIn()},emailLogin=async e=>{e?await (0,r.signIn)("sso",{callbackUrl:L,isLogin:N},{organization:e}):(await (0,r.signIn)("email",{email:p,redirect:!1}),x(!0))},handleOTPSubmit=async e=>{if(e.preventDefault(),U)onSignIn(),window.location.href="/api/auth/callback/email?email=".concat(encodeURIComponent(p),"&token=").concat(f,"&callbackUrl=").concat(encodeURIComponent(L));else{let{accountExists:e,organization:t}=await u.Z.checkSubmittedEmail({email:p});N?e?await emailLogin(t):R.push({pathname:"/auth/sign-up",query:{error:"no-account"}}):await emailLogin(t)}},A=(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(g.oi,{labelText:"Email",className:"mb-2",value:p,name:"email",type:"email",autoComplete:"email",placeholder:"Enter your email",onChange:b})});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("form",{onSubmit:handleOTPSubmit,children:[A,U&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"mb-2 text-center text-sm text-gray-600",children:"We've sent a one time code to your email"}),(0,a.jsx)(g.oi,{className:"mb-4",labelText:"Verification code",value:f,name:"verificationCode",placeholder:"Enter verification code",onChange:T})]}),(0,a.jsx)("button",{className:"btn-blue mt-1 w-full py-2 font-semibold",disabled:""===p||U&&""===f,type:"submit",children:U?"Sign in":"Continue"})]}),(0,a.jsxs)("div",{className:"relative mb-6 mt-6",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,a.jsx)("div",{className:"relative flex justify-center",children:(0,a.jsx)("span",{className:"bg-white px-2 text-sm font-medium uppercase text-gray-500",children:"Or"})})]}),(0,a.jsxs)("button",{className:"flex w-full items-center justify-center rounded border border-gray-200 px-3 py-2 text-sm font-semibold shadow-sm",onClick:handleGoogleLogin,children:[(0,a.jsx)("div",{className:"mr-1 flex items-center justify-center rounded bg-white p-1",children:(0,a.jsx)(l._8Z,{})}),"Sign in with Google"]}),(0,a.jsxs)("p",{className:"mb-4 mt-7 text-center text-sm font-medium leading-6 text-gray-500",children:["By signing in, you agree to our ",(0,a.jsx)("br",{}),(0,a.jsx)("a",{className:"text-blue-primary",href:"https://navattic.com/legal/terms",target:"_blank",rel:"noreferrer",children:"Terms of Service"})," ","and"," ",(0,a.jsx)("a",{className:"text-blue-primary",href:"https://navattic.com/legal/privacy",target:"_blank",rel:"noreferrer",children:"Privacy Policy"}),"."]})]})}},28492:function(e,t,n){"use strict";var a=n(52322);t.Z=,12273:function(e,t,n){"use strict";n.d(t,{$:function(){return useAuthErrorToast}});var a=n(2784),i=n(56958);let r={"internal-server-error":"Server error","use-email-provider":"Must use email login","invite-accept-failed":"Error accepting invite","sso-login-required":"Must use SSO","oauth-not-linked":"OAuth not linked",Verification:"Passcode incorrect",SessionRequired:"Please sign in to access this page"};function useAuthErrorToast(e){let{error:t,enabled:n=!0}=e;(0,a.useEffect)(()=>{if(n&&t){let e;return e=t in r?i.A.error(r[t]):i.A.error("".concat(t.charAt(0).toUpperCase()).concat(t.slice(1).replace(/-+/g," "))),()=>void(e&&i.A.dismiss(e))}},[t,n])}},75529:function(e,t,n){"use strict";var a=n(5632);t.Z=e=>{let{session:t,disable:n=!1}=e,i=(0,a.useRouter)(),r=localStorage.getItem("navattic:debug:auth");n||!t||r||i.push("/")}},16377:function(e,t,n){"use strict";var a=n(89720),i=n(34406);let{JS_DEV:r,CX_DEV:o,CAPTURE_DEV:s}=a.config,l=i.env.NEXT_PUBLIC_NODE_ENV||"production",c={NODE_ENV:l,CAPTURE_EMBED_URL:a._.CAPTURE_EMBED_URL.DEV,CAPTURE_PLAYER_URL:s?a._.CAPTURE_PLAYER_URL.DEV:a._.CAPTURE_PLAYER_URL.PROD,CAPTURE_SCREENSHOT_URL:s?a._.CAPTURE_SCREENSHOT_URL.DEV:a._.CAPTURE_SCREENSHOT_URL.PROD,NAVATTIC_JS_URL:r?a._.JS_URL.DEV:a._.JS_URL.PROD,APP_URL:a._.APP_URL.DEV,EXTENSION:{stagingChromeId:"molbcdegfjffhjgemieeanjgkhcapfmb",publicChromeId:o?"hchehodiojmocahamgljagkgjgfmoiga":"lbecioncobbndebbfdopnpinnibemoon",webStoreLink:"https://chrome.google.com/webstore/detail/navattic/lbecioncobbndebbfdopnpinnibemoon"},FRONT_CLIENT_CHAT_ID:"0a14b9495363a430d50ce7b48bdb17e7",HELP_CALENDLY_URL:"https://calendly.com/randy-navattic/15min",DOCS_URL:"https://docs.navattic.com",POSTHOG_KEY:void 0,VITALLY_KEY:void 0},u={...c,NAVATTIC_JS_URL:a._.JS_URL.PROD,APP_URL:a._.APP_URL.PROD,CAPTURE_EMBED_URL:a._.CAPTURE_EMBED_URL.PROD,CAPTURE_PLAYER_URL:a._.CAPTURE_PLAYER_URL.PROD,CAPTURE_SCREENSHOT_URL:a._.CAPTURE_SCREENSHOT_URL.PROD,VITALLY_KEY:"ZXlKaGJHY2lPaUpJVXpJMU5pSXNJblI1Y0NJNklrcFhWQ0o5LmV5SmhkV1FpT2lKbU9ESm1aRFptWmkwNE1XWXhMVFEyTlRndFltSXhOUzAzT0dNMk9HTTVaR015TlRjaUxDSmhjR2tpT2lKa05ESTFZbUU1TnkweE1qQTJMVFEzTldFdE9XSmhPUzA0WWpWaFpXRTNNV1U0TnpjaUxDSnpaV01pT2lJMk5qVTNOR1ZqWmlKOS5ReTFoQm5pNndWQ1h3SGVyaDF2TmRQZDdGbV9rUTVfZlFGSDcwWlJsbW5rOg==",POSTHOG_KEY:"UyaYJ3LU4pKXtwKuz75ti-q8l0geh9hb5bRyWtKc_0o",EXTENSION:{...c.EXTENSION,publicChromeId:"lbecioncobbndebbfdopnpinnibemoon"}},m={...u,NAVATTIC_JS_URL:a._.JS_URL.STAGING,APP_URL:a._.APP_URL.STAGING,CAPTURE_EMBED_URL:a._.CAPTURE_EMBED_URL.STAGING,CAPTURE_PLAYER_URL:a._.CAPTURE_PLAYER_URL.STAGING,CAPTURE_SCREENSHOT_URL:a._.CAPTURE_SCREENSHOT_URL.STAGING},d="staging"===l?m:"production"!==l||i.env.NEXT_PUBLIC_LOCAL_BUILD?c:u;"production"!==l&&(console.groupCollapsed("Config Keys"),console.log(d),console.groupEnd()),t.Z=d},7351:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:);var a=n(52322),i=n(49013),r=n(28492),o=n(27091),s=n(5841),l=n(83122),c=n(12273),u=n(75529),m=n(23848),d=n(39097),_=n.n(d),h=n(5632),g=n(34126);let SignupForm=e=>{let{found:t,invitationToken:n,expiredToken:o,createWorkspace:s,referredBy:l,initialEmail:c}=e,u=!!s;if(!1===t&&!u)return(0,a.jsxs)("ul",{className:"mb-10 mt-5 text-base text-gray-700",children:[(0,a.jsx)("li",{children:"If your company already has a Navattic account, ask a teammate to invite you to the workspace."}),(0,a.jsxs)("li",{children:["Otherwise,"," ",(0,a.jsx)("a",{href:"https://navattic.com/get-demo",target:"_blank",className:"text-blue-primary font-semibold",rel:"noreferrer",children:"sign up for a demo"})," ","and we'd be happy to help get you started."]})]});if(o)return(0,a.jsx)(r.Z,{});let m={...u&&{createWorkspace:s},...l&&{referredBy:l},...n&&{token:n}},d=g.stringify(m),_="".concat("/auth/onboarding").concat(d?"?".concat(d):"");return(0,a.jsx)(i.Z,{invitationToken:n,authType:"sign-up",callbackUrl:_,initialEmail:c})};function SignupPage(e){let{found:t,expiredToken:n,createWorkspace:i,referredBy:r,email:o,invitationToken:d}=e,{data:g,status:E}=(0,m.useSession)(),R="loading"===E,p=(0,h.useRouter)(),{error:b}=(0,l.H8)(p.query);return(0,c.$)({error:b,enabled:!R&&!g&&(!(i||!1!==t)||!!n)}),(0,u.Z)({session:g,disable:R}),!R&&!g&&(0,a.jsx)("div",{className:"flex flex-1 justify-center",children:(0,a.jsxs)("div",{className:"mx-auto my-14 w-full max-w-md",children:[(0,a.jsxs)(s.Z,{className:"mt-10 border-gray-300 px-6 pb-5 pt-7",children:[(0,a.jsx)("h3",{className:"mb-3 text-2xl font-semibold text-gray-800",children:"Create a new account"}),(0,a.jsx)(SignupForm,{invitationToken:d,found:t,expiredToken:n,createWorkspace:i,referredBy:r,initialEmail:o})]}),(0,a.jsxs)("p",{className:"mt-8 text-center text-sm text-gray-600",children:["Already have an account?"," ",(0,a.jsx)(_(),{href:"/auth/login",className:"text-blue-primary font-semibold",children:"Sign in"})]})]})})||(0,a.jsx)(a.Fragment,{})}SignupPage.getLayout=var E=!0;t.default=SignupPage}},);
//# sourceMappingURL=sign-up-ecb318297c20b6c3.js.map