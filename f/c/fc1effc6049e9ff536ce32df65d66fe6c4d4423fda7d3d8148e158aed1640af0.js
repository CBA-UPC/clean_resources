(()=>{ar t=n=/(\/b|\/s|\/l).*(node=)(\d{1,12})/,a=new Map,i=function(){if(!a.has(window.location.href)){var e=n.exec(window.location.href),t=e&&e[3]?e[3]:null;a.set(window.location.href,t)}return a.get(window.location.href)},o=function(e){var t=i();if(!e||!t)return null;var n=e.split(":");return n.splice(n.length-1,0,t),n.join(":")},s=function(e){var t=i();return t?"".concat(e,":").concat(t):null},r={wb:"ues",bb:"uet",af:"uet",cf:"uet",be:"uet",ld:"uex"},d=function(e){var n,a,i=e.latencyEvent,r=e.scope,d=e.placement,p=e.timestamp;l(i)&&(c(i,m(r),d.id,p),c(i,m(r),t(d.name),p),c(i,m(r),null!==(n=o(d.name))&&void 0!==n?n:void 0,p),c(i,m(r),null!==(a=s(d.id))&&void 0!==a?a:void 0,p))},l=c=function(e,t,n,a){void 0===a&&(a=new Date);var i=r[e];n&&"function"==typeof window[i]&&window[i](e,t+n,{wb:1},a)},m=p=h=function(e,n,a){if(void 0===a&&(a=1),w()){var i=function(e,t,n){t&&f("".concat(g(e),":").concat(t),n)};i(e,n.id,a),i(e,s(n.id),a),i(e,t(n.name),a),i(e,o(t(n.name)),a)}},u=function(e,t){void 0===t&&(t=1),w()&&f(g(e),t)},w=function(){var e;return"function"==typeof(null===(e=null===window||void 0===window?void 0:window.ue)||void 0===e?void 0:e.count)},f=function(e,t){var n;return null===(n=null===window||void 0===window?void 0:window.ue)||void 0===n?void 0:n.count(e,t)},v="adplacements",g=function(e){return e.startsWith(v)?e:"".concat(v,":").concat(e)},y=function(e,t){S("ERROR",e,t)},b=S=function(e,t,n){console.error(t,I(t,n)),u("safeFrameError"),window.ueLogError&&window.ueLogError(I(t,n),{logLevel:e,attribution:"APE-safeframe",message:A(t,n)+" | "})},I=function(e,t){return t instanceof Error?t:t?new Error(t):new Error(e)},A=function(e,t){return t instanceof Error?e+": "+t.message:e},M=function(e,t,n){if(window.csa)try{window.csa("Content",{element:e})("mark",t,null==n?void 0:n.getTime())}catch(a){y("Error with 'mark' CSA",a)}};class E{sendLatencyMetric({latencyMetricType:e,placementId:t,placementName:n,placementDivId:a,timestamp:i}){d({latencyEvent:e.csmKey,scope:e.csmMessage,placement:{id:t,name:n},timestamp:i}),M(document.getElementById(a),e.csaKey,i)}}const D=var k=function(e,t,n){if(""===t)throw new Error("Invalid queryParamKey input to addJSONQueryParamToURL: "+JSON.stringify({queryParamKey:t}));var a=new URL(e),i=a.searchParams.get(t),o=i||"{}",s=JSON.parse(o),r=Object.assign(s,n);return a.searchParams.set(t,JSON.stringify(r)),a.toString()};onst L="com.amazon.ads.cpp.",x=onst N=R=z=/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/,C=e=>z.test(e),F=H=e=>btoa(unescape(encodeURIComponent(e))),O=W=$=B=U=()=>window.innerHeight||document.documentElement.clientHeight,j=q=e=>e.getBoundingClientRect().top-U(),V=(e,t)=>({t:e.top,l:e.left,r:e.right,b:e.bottom,w:e.width,h:e.height,z:t}),J=e=>{const t=e.getBoundingClientRect();return V(t,Number(window.getComputedStyle(e,null).zIndex))},Y=e=>{const t=Z(e);return{t:e.t,l:e.l,r:e.r,b:e.b,w:e.w,h:e.h,z:e.z,xiv:t.xiv,yiv:t.yiv,iv:t.iv}},X=()=>{const e=window.screenY?window.screenY:window.screenTop,t=window.screenX?window.screenX:window.screenLeft,n=j(),a=U();return{t:e,l:t,w:n,h:a,b:e+a,r:t+n}},K=G=e=>{const t=function(e){const t=document.body.getBoundingClientRect();if(Q(t))return null;const n=J(e),a=U(),i=j(),o=Math.max(0,Math.min(t.left+i,n.r)-n.l),s=Math.max(0,Math.min(t.top+a,n.b)-n.t),r=o*s/(n.h*Math.min(n.w,i));return Number(Math.min(1,Math.max(0,r)).toFixed(2))}(e);return null==t?"unknown":t>=.5},Q=const Z=e=>{const t=j(),n=U(),a=Math.max(0,ae(e.t,e.b,n)),i=Math.max(0,ae(e.l,e.r,t)),o=a*i,s=e.h*Math.min(e.w,t);return 0!==s||0!==o?{xiv:Number(Math.min(1,i/e.w).toFixed(2)),yiv:Number(Math.min(1,a/e.h).toFixed(2)),iv:Number(Math.min(1,Math.max(0,o/s)).toFixed(2))}:{xiv:0,yiv:0,iv:0}},ee=e=>{const t=e.getBoundingClientRect();return te(t)},te=e=>({t:e.top,l:e.left,r:j()-e.right,b:U()-e.bottom,xs:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>j()?1:0,yx:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>U()?1:0}),ne=ae=(e,t,n)=>{let a=0;return"visible"!==document.visibilityState?a:(a=e>0?n-e:t>0?Math.min(t,n):0,Math.min(a,t-e))},ie=oe=se=re="localstorage_impression",de=(e,t)=>{const n=document.createElement("img");return n.id=e,n.style.display="none",n.setAttribute("pixel-url",t),n},le="localstorage:impression",ce=var me;me=const pe="sfImpression",he="LightAdImpression",ue="viewablelatency",we=fe=we("bodyBegin","bb",pe),ve=(we("bodyBegin","bb",he),we("bodyEnd","be"),we("clickToATF","af"),we("criticalFeature","cf")),ge=(we("criticalFeature","cf",pe),we("criticalFeature","cf",he),we("loaded","ld"),we("loaded","ld",pe),we("loaded","ld",he),we("viewablelatency:bodyBegin","bb",ue),we("viewablelatency:loaded","ld",ue)),ye=e=>null==e?void 0:e.replace("criticalFeature","").replace("windowOnLoad","").replace("spATFEvent","").replace("r2OnLoad","").replace("aboveTheFold","").replace("af",""),be=Se=Ie=Ae=Me=Ee=var De=function(e){if(window.csa)try{window.csa("Events",{producerId:"adplacements"})("setEntity",{adCreativeMetaData:e})}catch(t){y("Error with 'setEntity' CSA",t)}},ke=function(e,t,n){if(void 0===n&&(n=1),window.csa)try{window.csa("Events",{producerId:"adplacements"})("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e+":"+t.name+":"+t.id,metricValue:n},{ent:"all"})}catch(a){y("Error with 'logCsaEvent' CSA",a)}},Te=function(e,t){if(void 0===t&&(t=1),window.csa)try{window.csa("Events",{producerId:"adplacements"})("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e,metricValue:t},{ent:"all"})}catch(n){y("Error with 'incrementCounter' CSA",n)}};const Le=xe=Pe=_e=Ne=Re=ze=Ce=Fe=He=Oe=We=$e=e=>e.length>1&&"%"===e.charAt(e.length-1),Be=const Ue=(e,t)=>{for(const n of Object.keys(t))e.style[n]=t[n];return e},je=qe=Ve=Je=(e,t)=>document.getElementById(t[e].placementDivId),Ye=Xe=Ke=Ge=Qe="expanded-feedback-label",Ze="expanded-safeframe",et="expandable-ads-styles",tt=nt=at=it=ot=st=rt=dt=lt=lass mt{nstructor(e){this.parentHtmlId=e}}onst ht=ut="adfeedback_request",wt="adfeedback_success",ft="adfeedback_error",vt="adfeedback_sponsoredlabelrendered_creative",gt="adfeedback_sponsoredlabelrendered_host",yt="adfeedback:request",bt="adfeedback:success",St="adfeedback:error",It="adfeedback:sponsoredlabelrendered:creative",At="adfeedback:sponsoredlabelrendered:host",Mt="adfeedback:sponsoredlabelrendered",Et="adfeedback:transparencyinfo:missing";class Dt{request(){h(yt,this.placement),u(yt),ke(ut,this.placement)}success(){h(bt,this.placement),u(bt),ke(wt,this.placement)}error(){h(St,this.placement),ke(ft,this.placement)}labelRenderedCreative(){h(It,this.placement),u(Mt),ke(vt,this.placement)}labelRenderedHost(){h(At,this.placement),u(Mt),ke(gt,this.placement)}transparencyInfoMissing(){h(Et,this.placement),u(Et)}constructor(e){this.placement=e}}class kt{onstructor(e,t,n){this.status=e,this.html=t,this.script=n}}lass Lt{appendChildTo(e,t){var n,a;function i(e){const t=document.createElement("div");return t.setAttribute("id",e.getHtmlId()),n(t,e.feedbackStyle),t.append(function(e){const t=document.createElement("div");return t.innerHTML=e.labelText,n(t,e.labelStyle),t}(e)),t;1===t.position?null===(n=xt(e))||void 0===n||n.prepend(i(t)):0===t.position&&(null===(a=xt(e))||void 0===a||a.append(i(t)))}updateElement(e,t){const n=xt(e);n&&(n.innerHTML=t.html,function(e,t){const n=e);n.innerHTML=t.script}(n,t))}clickChildLink(e){const t=document.getElementById(e.getHtmlId());var n;if(t)for(const a of t.children)if("A"===(n=a).tagName||"DIV"===n.tagName)return void a.click()}const xt=Pt={code:"BE",hostname:"www.amazon.com.be",name:"Belgium"},_t={code:"FR",hostname:"www.amazon.fr",name:"France"},Nt={code:"DE",hostname:"www.amazon.de",name:"Germany"},Rt={code:"IT",hostname:"www.amazon.it",name:"Italy"},zt={code:"NL",hostname:"www.amazon.nl",name:"Netherlands"},Ct={code:"PL",hostname:"www.amazon.pl",name:"Poland"},Ft={code:"ES",hostname:"www.amazon.es",name:"Spain"},Ht={code:"SE",hostname:"www.amazon.se",name:"Sweden"},Ot=Wt=e=>{var t,n,a,i,o;const s=null===(n=null===(t=null==e?void 0:e.url)||void 0===t?void 0:t.parameters)||void 0===n?void 0:n.adCreativeMetaData,r=null==s?void 0:s.adCreativeDetails;return Boolean(!Bt(null===(o=null===(i=null===(a=null==e?void 0:e.url)||void 0===a?void 0:a.parameters)||void 0===i?void 0:i.adPlacementMetaData)||void 0===o?void 0:o.slotName)&&s&&r&&(null==r?void 0:r.length)>0&&r.every((e=>(e=>{var t,n,a,i,o;return e.version&&!Bt(e.advertiserIdNS)&&void 0!==(null===(t=e.selectionSignals)||void 0===t?void 0:t.context)&&null!==(null===(n=e.selectionSignals)||void 0===n?void 0:n.context)&&void 0!==(null===(a=e.selectionSignals)||void 0===a?void 0:a.location)&&null!==(null===(i=e.selectionSignals)||void 0===i?void 0:i.location)&&!Bt(null===(o=e.selectionSignals)||void 0===o?void 0:o.pastActivity)})(e))))},$t=Bt=e=>!e||e.length<=0,Ut=()=>new jt(new pt(new Lt,new Tt({origin:)));onst qt=Vt=Jt=e=>{Ut().openModal(e.options.adPlacementMetaData.adElementId)},Yt=Xt=Kt={};et Qt=null; nn=function(e,n,a){an()&&(on(sn(e,n.id,a)),on(sn(e,t(n.name),a)))},an=on=sn=function(e,t,n){return"".concat(e,":").concat(t).concat(rn(n))},rn=class dn{constructor(t,n){this.hms=t,this.hc=n,this.changeSize=this.sendAdBarTrace=this.startPixelTracking=this.logAPIInvocation=this.resizeSafeFrameAd=this.setResizePlacementStyle=this.logError=this.logCsaEvent=this.addCsaEntity=this.sendLatencyMetric=this.customMessage=this.fireViewableLatencyMetrics=this.countMetric=this.addCsmTag=this.requestVideoAutoplay=this.releaseVideoAutoplay=this.haveVideoAutoplayPermission=async e=>{tn(e)},this.feedbackLabelRendered=e=>{Vt(e)},this.feedbackOpenModal=e=>{Jt(e)},this.handleFallbackExperience=this.expandAdSlot=this.expandAdSlotWithOverlap=this.resetSlotSize=this.triggerEventInIframe=this.registerCODFallback=this.clearCODFallback=this.safeFrameReady=this.saveAdDetailsForAdReporter=}const ln=cn=mn=pn=hn=un=wn=onst vn="adload:start",gn="adload:delayloadcallback",yn="adload_delayload";onst Sn=In="div#ape_Detail_desktop-detail-ilm_desktop_placement",An="nav-ewc-persistent-hover",Mn=En=Dn=kn=onst Ln=xn=class Pn{constructor(e,t,n,a){this.hc=e,this.hms=t,this.hmr=n,this.supportedCommands=a,this.initializeAdIds=this.initAllSafeFrames=this.secondPhaseLoadAd=async(e,t,n)=>{this.initializeAdIds(t),xn(t,this.hc,n);const a=this.hc,i=this.hms,o=this.hc.adMap[e].options;Ln(a,o),Nn(a,i,o);const s=Sn(document.getElementById(this.hc.AD_IDS[e].placementDivId),o);if(o.forcePunt)return nn("forcePunt",s),De({forcePunt:"true"}),void s.collapse();_n(o),Fn(o),h(gn,s),ke(yn,s);try{await Xt(o)?(Rn(s,a,o,this.hmr,this.hms),zn(a,o,i)):s.collapse()}catch(r){throw s.collapse(),r}}}}const _n=Nn=Rn=zn=(e,t,n)=>{"desktop-detail-ilm"===t.slotName&&En()},Cn=Fn=Hn="custommessage:notallowlisted";st Bn=var Un;null===(Un=null===performance||void 0===performance?void 0:performance.mark)||void 0===Un||Un.call(performance,"SafeFrame: SafeFrame: Starting DAsf");const jn=new Wn,qn=new On(null==jn?void 0:jn.adMap),Vn=new jn,qn);R((,y,"Error initializing safeFrame")()})();
//# sourceMappingURL=DAsf-1.50.4600c1d3.js.map
