"use strict";(self.webpackChunkWPS_Drive=self.webpackChunkWPS_Drive||[]).push([[4142],{78448:function(e,t,n){n.r(t);var r=n(30720),i=n(26913),o=n(48057),a=n(9981),c=n(49200),s=n(56451),l=n(37311),u=n(16253),d=n(39859),p=n(25429),f=n(2406),v=n.n(f),h=n(20144),m=n(80589),y=n(62414),b=n(45821),_=n(423),g=n(66761),w=n.n(g),k=n(47189),S=n(26743),x=n(2878);function C(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"k-slide"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"k-slide-mask"},[n("div",{staticClass:"k-slide-mask-container",on:{click:e.close}}),e._v(" "),n("div",{staticClass:"k-slide-helper"},[n("header",{staticClass:"k-helper-header"},[n("div",{staticClass:"k-helper-title"},[e._v(e._s(e.lang_guide))]),e._v(" "),n("div",{staticClass:"k-helper-more k-jump"},[n("span",{on:{click:function(){return e.newWindow("moreUrl")}}},[e._v("\n            "+e._s(e.lang_more)+" >\n          ")])]),e._v(" "),n("KIcon",{staticClass:"k-helper-close",attrs:{type:"close"},nativeOn:{click:function(t){return e.close(t)}}})],1),e._v(" "),n("div",{staticClass:"k-helper-body"},[n("section",{staticClass:"k-helper-content"},[n("div",{staticClass:"content-detail"},[n("div",{staticClass:"content-detail-title"},[e._v(e._s(e.activeSubItem.name))]),e._v(" "),n("div",{staticClass:"content-detail-description"},[e._v(e._s(e.activeSubItem.description))]),e._v(" "),n("div",{staticClass:"content-detail-video"},[n("span",{staticClass:"video-btn",on:{click:function(){return e.changeVideo(-1)}}},[n("KIcon",{staticClass:"video-left",class:{"video-btn-disabled":0===e.activeIndex},attrs:{type:"back"}})],1),e._v(" "),n("vue-plyr",{directives:[{name:"show",rawName:"v-show",value:e.isVideo,expression:"isVideo"}],staticClass:"video",on:{ended:e.videoEnded,enterfullscreen:function(){return e.handleVideoEnterfullscreen()}}},[n("video",{ref:"video",attrs:{src:e.activeSubItem.videoUrl,controls:"",poster:e.activeSubItem.poster},on:{play:function(){return e.handlePlaying()},playing:function(){return e.handlePlaying()},pause:function(){return e.handlePause()}}},[e._v("\n                  your browser does not support the video tag\n                ")])]),e._v(" "),n("img",{directives:[{name:"show",rawName:"v-show",value:!e.isVideo,expression:"!isVideo"}],staticClass:"imge",attrs:{src:e.activeSubItem.poster}}),e._v(" "),n("span",{staticClass:"video-btn",on:{click:function(){return e.changeVideo(1)}}},[n("KIcon",{staticClass:"video-right",class:{"video-btn-disabled":e.activeIndex===e.subList.length-1},attrs:{type:"back"}})],1)],1),e._v(" "),n("div",{staticClass:"content-detail-jump"},[e.activeSubItem.buttonDescription?n("KButton",{staticClass:"content-detail-jump-btn",attrs:{type:"primary"},on:{click:function(){return e.handleButton(e.activeSubItem.buttonType,e.activeSubItem.buttonContent)}}},[e._v("\n                "+e._s(e.activeSubItem.buttonDescription)+"\n              ")]):e._e(),e._v(" "),e.activeSubItem.subButtonDescription?n("a",{staticClass:"content-detail-jump-open",attrs:{href:"javascript:;"},on:{click:function(){return e.handleOpen(e.activeSubItem.subButtionUrl)}}},[e._v("\n                "+e._s(e.activeSubItem.subButtonDescription)+"\n              ")]):e._e()],1)]),e._v(" "),n("div",{staticClass:"content-list-title"},[e._v(e._s(e.lang_txt3))]),e._v(" "),n("div",{staticClass:"content-list"},e._l(e.list,(function(t,r){return n("div",{key:r},[n("div",{staticClass:"list-item",on:{click:function(t){return e.handleCollapse(r)}}},[e._v("\n                "+e._s(t.name)+"\n                "),n("i",{class:["arrow-icon",{"list-item-close":!e.isShowItem(r)}]})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowItem(r),expression:"isShowItem(index)"}]},e._l(t.children,(function(t,r){return n("div",{key:r,staticClass:"k-list-sub-item",class:{"item-active":t===e.activeSubItem},on:{click:function(){return e.subItemClick(t)}}},[n("span",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),t.red_dot?n("svg",[n("circle",{attrs:{cx:"5",cy:"3",r:"2.5",fill:"#E97663"}})]):e._e()])})),0)])})),0)]),e._v(" "),n("footer",{staticClass:"k-helper-footer"},[n("div",{staticClass:"k-jump k-form-write",on:{click:function(){return e.newWindow("formWriteUrl")}}},[e._v(e._s(e.lang_txt0))]),e._v(" "),n("div",{staticClass:"k-jump k-manual",on:{click:function(){return e.newWindow("manualUrl")}}},[e._v(e._s(e.lang_txt1))]),e._v(" "),n("div",{staticClass:"k-jump k-example",on:{click:function(){return e.newWindow("exampleUrl")}}},[e._v(e._s(e.lang_txt2))])])])])])])},staticRenderFns:[],name:"KSlideHelper",components:{KIcon:m.default,KButton:y.Z},data:function(){return{lang_guide:(0,b.t)("logic.SlideHelper.guide"),lang_more:(0,b.t)("logic.SlideHelper.more"),lang_txt0:(0,b.t)("logic.SlideHelper.txt0"),lang_txt1:(0,b.t)("logic.SlideHelper.txt1"),lang_txt2:(0,b.t)("logic.SlideHelper.txt2"),lang_txt3:(0,b.t)("logic.SlideHelper.txt3"),visible:!0,list:[],activeSubItem:{},moreUrl:"".concat(_.UX,"/help"),formWriteUrl:"".concat(_.Yc,"/form-write/gXWMfYCu"),manualUrl:"".concat(_.Kn,"/l/siNtKXcoa"),exampleUrl:"".concat(_.UX,"/case"),cid:"",uid:"",isSetItem:!1,industry:"",storage:{},helperVideo:null,fullscreenVideoId:0,isPC:!1,handleCallback:function(){},activeCloseNames:[]}},computed:{isShowItem:function(){var e=this;return function(t){return!e.activeCloseNames.includes(t)}},isVideo:function(){var e;return"video"===(null==this||null===(e=this.activeSubItem)||void 0===e?void 0:e.coverType)},subList:function(){var e,t=[],n=C(this.list);try{for(n.s();!(e=n.n()).done;){var r,i=C(e.value.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;t.push(o)}}catch(e){i.e(e)}finally{i.f()}}}catch(e){n.e(e)}finally{n.f()}return t},activeIndex:function(){var e=this;return this.subList.findIndex((function(t){return t===e.activeSubItem}))}},created:function(){this.subItemClick(this.list[0].children[0])},mounted:function(){var e=this;this.helperVideo||(this.helperVideo=this.$refs.video),window.onbeforeunload=function(){e.isSetItem&&localStorage.setItem("videoRedDot",JSON.stringify(e.storage))}},beforeDestroy:function(){},methods:{handleCollapse:function(e){var t=this.activeCloseNames.indexOf(e);t>=0?this.activeCloseNames.splice(t,1):this.activeCloseNames.push(e)},subItemClick:function(e){this.activeSubItem=e,this.setRedDot(e)},changeVideo:function(e){var t=this.activeIndex+e;t>=0&&t<=this.subList.length-1&&(this.activeSubItem=this.subList[t],this.setRedDot(this.activeSubItem))},setRedDot:function(e){var t=this;if(e.red_dot){e.red_dot=!1;var n=e.vid,r=e.position;this.storage.find((function(e){return void 0!==e[t.uid]}))[this.uid][r][n]=!1}},newWindow:function(e){window.open(this[e])},close:function(){this.visible=!1},videoEnded:function(){this.helperVideo.load();var e=this.helperVideo.poster;this.helperVideo.poster=e},handleOpen:function(e){if(!e)return!1;window.open((0,_.P0)(e))},handleButton:function(e,t){"jump_func"===e?this.handleCallback(t):/http(s)?:\/\/([\w-]+\.)+[\w-]+(\/[\w- .\/?%&=]*)?/.test(t)&&window.open(t)},handleVideoEnterfullscreen:function(){},handlePause:function(){},handlePlaying:function(){}}};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P="business_helpfeedback",E=function(e){var t,n,r;return{duration:null==e||null===(t=e.$refs)||void 0===t||null===(t=t.video)||void 0===t?void 0:t.currentTime,companyid:e.cid,videocode:null==e||null===(n=e.activeSubItem)||void 0===n?void 0:n.name,role:e.roleid,package:e.packageType,industry:e.industry,source:(r=null==e?void 0:e.isPC,r?"PC":"web")}},Z={KSlideHelper:[{event:P,trigger:"mounted",listener:function(e){var t=this,n=e.close,r=e.handleButton,i=e.handleOpen,o=e.handleVideoEnterfullscreen,a=e.handlePlaying,c=e.handlePause;return e.close=function(){n.apply(e,arguments),t.track(P,D({operation:"close"},E(e)))},e.handleButton=function(){r.apply(e,arguments),t.track(P,D({operation:"click_button1"},E(e)))},e.handleOpen=function(){i.apply(e,arguments),t.track(P,D({operation:"click_button2"},E(e)))},e.$watch("activeSubItem",(function(n,r){n&&t.track(P,D({operation:"video_show"},E(e)))}),{deep:!0,immediate:!0}),e.handlePlaying=function(){a.apply(e,arguments),t.track(P,D({operation:"video_play"},E(e)))},e.handlePause=function(){c.apply(e,arguments),t.track(P,D({operation:"video_stop"},E(e)))},e.handleVideoEnterfullscreen=function(){o.apply(e,arguments),t.track(P,D({operation:"video_play_fullscreen"},E(e)))},D({operation:"show"},E(e))}},{event:P,trigger:"click",el:".k-form-write",listener:function(e){return D({operation:"click_feedback"},E(e))}},{event:P,trigger:"click",el:".k-manual",listener:function(e){return D({operation:"click_skill"},E(e))}},{event:P,trigger:"click",el:".k-example",listener:function(e){return D({operation:"click_case",companyid:e.cid,industry:e.industry,videocode:""},E(e))}},{event:P,trigger:"click",el:".k-helper-more",listener:function(e){return D({operation:"click_helpcenter"},E(e))}}]},A=["containerSelector"];function H(e,t,n){return t=(0,o.Z)(t),(0,i.Z)(e,V()?Reflect.construct(t,n||[],(0,o.Z)(e).constructor):t.apply(e,n))}function V(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(V=function(){return!!e})()}function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw o}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}h.default.use(x.Z,{plyr:{fullscreen:{enabled:!0},invertTime:!1,resetOnEnd:!0,controls:["play-large","play","progress","current-time","fullscreen"]},emit:["ended","enterfullscreen"]});var U="".concat((0,S.getCDN)(),"/web_store/slide_helper"),B=null,N=null,$=!1,W=!1,K=!1,R={list:[{name:"初始化你的企业",children:[{name:(0,b.t)("logic.SlideHelper.name0"),url:"".concat(U,"/video/helper-invite-colleagues.mp4?_t=").concat(Date.now()),description:"",poster:"".concat(U,"/images/helper-invite-colleagues.png?_t=").concat(Date.now()),red_dot:!1,vid:"1"},{name:(0,b.t)("logic.SlideHelper.name1"),url:"".concat(U,"/video/helper-accept-invitation.mp4?_t=").concat(Date.now()),description:"",poster:"".concat(U,"/images/helper-accept-invitation.png?_t=").concat(Date.now()),red_dot:!1,vid:"2"},{name:(0,b.t)("logic.SlideHelper.name2"),url:"".concat(U,"/video/helper-approve-member.mp4?_t=").concat(Date.now()),description:"",poster:"".concat(U,"/images/helper-approve-member.png?_t=").concat(Date.now()),red_dot:!1,vid:"3"},{name:(0,b.t)("logic.SlideHelper.name3"),url:"".concat(U,"/video/helper-build-team.mp4?_t=").concat(Date.now()),description:"",poster:"".concat(U,"/images/helper-build-team.png?_t=").concat(Date.now()),red_dot:!1,vid:"4"},{name:(0,b.t)("logic.SlideHelper.name4"),url:"".concat(U,"/video/helper-add-member.mp4?_t=").concat(Date.now()),description:"",poster:"".concat(U,"/images/helper-add-member.png?_t=").concat(Date.now()),red_dot:!1,vid:"5"}]}],storage:{},isSetItem:!1,uid:""},M=function(){function e(t){(0,d.Z)(this,e),this.el=this.getEl(t)}return(0,p.Z)(e,[{key:"getEl",value:function(e){var t=e;if(!t)throw new Error((0,b.t)("logic.SlideHelper.err0"));if("string"==typeof t&&(t=document.querySelector(t)||document.getElementById(t)),"object"===("undefined"==typeof HTMLElement?"undefined":(0,u.Z)(HTMLElement))&&t instanceof HTMLElement)return t;if("object"===(0,u.Z)(t)&&1===t.nodeType&&"string"==typeof t.nodeName)return t;throw new Error((0,b.t)("logic.SlideHelper.err1"))}},{key:"append",value:function(e){this.el.appendChild(this.getEl(e))}}]),e}(),X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.isArray(e)?"array":(0,u.Z)(e);if(!e)throw new Error("".concat(e).concat((0,b.t)("logic.SlideHelper.err2")));if(!t.includes(n))throw new Error("".concat(e).concat((0,b.t)("logic.SlideHelper.err3")).concat(t.join("、")))},J=function(){var e=(0,l.Z)(v().mark((function e(){var t,n,r,i,o,a,c,l,u,d,p,f;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($){e.next=7;break}return $=!0,t=10,e.next=5,Promise.all([(0,k.XTJ)(),Y({max:t})]).catch((function(e){return console.error(e)}));case 5:(n=e.sent)&&(r=(0,s.Z)(n,2),i=r[0].userid,o=r[1],a=o.data,c=o.subData,R.uid=i,a&&c&&(l=(l=localStorage.getItem("videoRedDot"))?JSON.parse(l):[],Array.isArray(l)||(l=[]),u=q({data:a,subData:c,max:t,userid:i,storage:l}),d=u.videoList,p=u.red_dot,f=u.newStorage,d&&d.length&&(R.list=d,R.storage=f,R.isSetItem=!0,!0===p&&(W=p))));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=(0,l.Z)(v().mark((function e(t){var n,r,i,o,a,c,s,l,u,d;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.max,r=[],i=K?"pc":"web",e.next=5,(0,k.W6Y)({offset:0,limit:n,group:i});case 5:if(o=e.sent,0!==(a=o.data).length){e.next=9;break}return e.abrupt("return",{});case 9:c=T(a);try{for(c.s();!(s=c.n()).done;)l=s.value,r.push(l.id)}catch(e){c.e(e)}finally{c.f()}return e.next=13,(0,k.O2B)({catelogId:r});case 13:return u=e.sent,d=u.data,e.abrupt("return",{subData:d,data:a});case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){var t,n=e.data,r=e.subData,i=e.max,o=e.userid,a=e.storage,s=!1,l=a.findIndex((function(e){return void 0!==e[o]})),u=-1===l?{}:a.splice(l,1)[0][o],d={},p=T(n);try{var f=function(){var e=t.value,n=r.find((function(t){return t.position===e.id})).data,o=u[e.id]?u[e.id]:{},a={},c=[];n.length>i&&(n=n.slice(0,i)),n.forEach((function(t){var n=t.cover_type,r=t.cover,i=t.description,l=t.name,u=t.red_dot,d=t.id,p=t.main_button_content,f=t.main_button_description,v=t.main_button_type,h=t.sub_buttion_url,m=t.sub_button_description,y=t.video_url,b=o[d];void 0===b&&!s&&u&&(s=!0);var _=!1!==b?u:b;c.push({name:l,videoUrl:y,description:i,red_dot:_,poster:r?"".concat(r,"?_t=").concat(Date.now()):"",coverType:n,vid:d,position:e.id,buttonContent:p,buttonDescription:f,buttonType:v,subButtionUrl:h,subButtonDescription:m}),a[d]=_})),d[e.id]=a,Object.assign(e,{children:c})};for(p.s();!(t=p.n()).done;)f()}catch(e){p.e(e)}finally{p.f()}return a.push((0,c.Z)({},o,d)),a.length>3&&a.shift(),{videoList:n,red_dot:s,newStorage:a}},F=function(e){function t(){return(0,d.Z)(this,t),H(this,t)}var n,i;return(0,a.Z)(t,e),(0,p.Z)(t,[{key:"mount",value:(i=(0,l.Z)(v().mark((function e(t){var n,i,o,a,c;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.default.prototype.$isServer){e.next=2;break}return e.abrupt("return");case 2:return n=t.containerSelector,i=void 0===n?"body":n,o=(0,r.Z)(t,A),a=h.default.extend(O),B=new M(i),e.next=7,J();case 7:c=Object.assign(R,o),(N=new a({data:c})).$mount(),B.append(N.$el);case 11:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!h.default.prototype.$isServer){var t=e.containerSelector,n=e.cid,r=e.roleid,i=e.packageType,o=e.handleCallback,a=void 0===o?function(){}:o;if(K=e.fromPC,X(n,["string","number"]),N)N.cid=n,N.visible=!0;else{t&&X(t,["string"]);var c={containerSelector:t,industry:"",cid:n+"",isPC:e.fromPC,roleid:r,packageType:i,handleCallback:a};c=Object.keys(c).reduce((function(e,t){return void 0!==c[t]&&(e[t]=c[t]),e}),{}),this.mount(c),W=!1}}}},{key:"hide",value:function(){!h.default.prototype.$isServer&&N&&(N.visible=!1)}},{key:"isShowPoint",value:(n=(0,l.Z)(v().mark((function e(t){return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h.default.prototype.$isServer){e.next=2;break}return e.abrupt("return");case 2:return t&&X(t,["function"]),e.next=5,J();case 5:t({red_dot:W});case 6:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})}]),t}(w()),z=new F;z.dw=Z,t.default=z},66761:function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var c=new i(r,o||e,a),s=n?n+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],c]:e._events[s].push(c):(e._events[s]=c,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function c(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),c.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},c.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},c.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},c.prototype.emit=function(e,t,r,i,o,a){var c=n?n+e:e;if(!this._events[c])return!1;var s,l,u=this._events[c],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(l=1,s=new Array(d-1);l<d;l++)s[l-1]=arguments[l];u.fn.apply(u.context,s)}else{var p,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),d){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,i);break;default:if(!s)for(p=1,s=new Array(d-1);p<d;p++)s[p-1]=arguments[p];u[l].fn.apply(u[l].context,s)}}return!0},c.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},c.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},c.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var c=this._events[o];if(c.fn)c.fn!==t||i&&!c.once||r&&c.context!==r||a(this,o);else{for(var s=0,l=[],u=c.length;s<u;s++)(c[s].fn!==t||i&&!c[s].once||r&&c[s].context!==r)&&l.push(c[s]);l.length?this._events[o]=1===l.length?l[0]:l:a(this,o)}return this},c.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,e.exports=c}}]);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         ],r,2*t,0,1);(r[t+e.t]+=e.am(t+1,2*e[t],r,2*t+1,n,e.t-t-1))>=e.DV&&(r[t+e.t]-=e.DV,r[t+e.t+1]=1)}r.t>0&&(r[r.t-1]+=e.am(t,e[t],r,2*t,0,1)),r.s=0,r.clamp()}function Mn(r,e,t){var n=r.abs();if(!(n.t<=0)){var i=this.abs();if(i.t<n.t){e!=null&&e.fromInt(0),t!=null&&this.copyTo(t);return}t==null&&(t=J());var o=J(),s=this.s,c=r.s,p=this.DB-st(n[n.t-1]);p>0?(n.lShiftTo(p,o),i.lShiftTo(p,t)):(n.copyTo(o),i.copyTo(t));var a=o.t,h=o[a-1];if(h!=0){var g=h*(1<<this.F1)+(a>1?o[a-2]>>this.F2:0),v=this.FV/g,_=(1<<this.F1)/g,y=1<<this.F2,f=t.t,l=f-a,b=e==null?J():e;for(o.dlShiftTo(l,b),t.compareTo(b)>=0&&(t[t.t++]=1,t.subTo(b,t)),W.ONE.dlShiftTo(a,b),b.subTo(o,o);o.t<a;)o[o.t++]=0;for(;--l>=0;){var d=t[--f]==h?this.DM:Math.floor(t[f]*v+(t[f-1]+y)*_);if((t[f]+=o.am(0,d,t,l,0,a))<d)for(o.dlShiftTo(l,b),t.subTo(b,t);t[f]<--d;)t.subTo(b,t)}e!=null&&(t.drShiftTo(a,e),s!=c&&W.ZERO.subTo(e,e)),t.t=a,t.clamp(),p>0&&t.rShiftTo(p,t),s<0&&W.ZERO.subTo(t,t)}}}function jn(r){var e=J();return this.abs().divRemTo(r,null,e),this.s<0&&e.compareTo(W.ZERO)>0&&r.subTo(e,e),e}function fe(r){this.m=r}function Nn(r){return r.s<0||r.compareTo(this.m)>=0?r.mod(this.m):r}function Ln(r){return r}function Vn(r){r.divRemTo(this.m,null,r)}function Hn(r,e,t){r.multiplyTo(e,t),this.reduce(t)}function $n(r,e){r.squareTo(e),this.reduce(e)}fe.prototype.convert=Nn;fe.prototype.revert=Ln;fe.prototype.reduce=Vn;fe.prototype.mulTo=Hn;fe.prototype.sqrTo=$n;function zn(){if(this.t<1)return 0;var r=this[0];if(!(r&1))return 0;var e=r&3;return e=e*(2-(r&15)*e)&15,e=e*(2-(r&255)*e)&255,e=e*(2-((r&65535)*e&65535))&65535,e=e*(2-r*e%this.DV)%this.DV,e>0?this.DV-e:-e}function le(r){this.m=r,this.mp=r.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<r.DB-15)-1,this.mt2=2*r.t}function Kn(r){var e=J();return r.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),r.s<0&&e.compareTo(W.ZERO)>0&&this.m.subTo(e,e),e}function Un(r){var e=J();return r.copyTo(e),this.reduce(e),e}function qn(r){for(;r.t<=this.mt2;)r[r.t++]=0;for(var e=0;e<this.m.t;++e){var t=r[e]&32767,n=t*this.mpl+((t*this.mph+(r[e]>>15)*this.mpl&this.um)<<15)&r.DM;for(t=e+this.m.t,r[t]+=this.m.am(0,n,r,e,0,this.m.t);r[t]>=r.DV;)r[t]-=r.DV,r[++t]++}r.clamp(),r.drShiftTo(this.m.t,r),r.compareTo(this.m)>=0&&r.subTo(this.m,r)}function Gn(r,e){r.squareTo(e),this.reduce(e)}function Jn(r,e,t){r.multiplyTo(e,t),this.reduce(t)}le.prototype.convert=Kn;le.prototype.revert=Un;le.prototype.reduce=qn;le.prototype.mulTo=Jn;le.prototype.sqrTo=Gn;function Yn(){return(this.t>0?this[0]&1:this.s)==0}function Zn(r,e){if(r>4294967295||r<1)return W.ONE;var t=J(),n=J(),i=e.convert(this),o=st(r)-1;for(i.copyTo(t);--o>=0;)if(e.sqrTo(t,n),(r&1<<o)>0)e.mulTo(n,i,t);else{var s=t;t=n,n=s}return e.revert(t)}function Qn(r,e){var t;return r<256||e.isEven()?t=new fe(e):t=new le(e),this.exp(r,t)}W.prototype.copyTo=bn;W.prototype.fromInt=Dn;W.prototype.fromString=En;W.prototype.clamp=Sn;W.prototype.dlShiftTo=Bn;W.prototype.drShiftTo=On;W.prototype.lShiftTo=Wn;W.prototype.rShiftTo=Rn;W.prototype.subTo=In;W.prototype.multiplyTo=Fn;W.prototype.squareTo=kn;W.prototype.divRemTo=Mn;W.prototype.invDigit=zn;W.prototype.isEven=Yn;W.prototype.exp=Zn;W.prototype.toString=xn;W.prototype.negate=Pn;W.prototype.abs=Cn;W.prototype.compareTo=An;W.prototype.bitLength=Tn;W.prototype.mod=jn;W.prototype.modPowInt=Qn;W.ZERO=It(0);W.ONE=It(1);function ct(){this.i=0,this.j=0,this.S=new Array}function Xn(r){var e,t,n;for(e=0;e<256;++e)this.S[e]=e;for(t=0,e=0;e<256;++e)t=t+this.S[e]+r[e%r.length]&255,n=this.S[e],this.S[e]=this.S[t],this.S[t]=n;this.i=0,this.j=0}function ei(){var r;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,r=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=r,this.S[r+this.S[this.i]&255]}ct.prototype.init=Xn;ct.prototype.next=ei;function ti(){return new ct}var et=256,Ee,z,L;function ri(r){z[L++]^=r&255,z[L++]^=r>>8&255,z[L++]^=r>>16&255,z[L++]^=r>>24&255,L>=et&&(L-=et)}function Ft(){ri(new Date().getTime())}if(z==null){z=new Array,L=0;var G=void 0;if(window.crypto&&window.crypto.getRandomValues){var wt=new Uint8Array(32);for(window.crypto.getRandomValues(wt),G=0;G<32;++G)z[L++]=wt[G]}if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto&&window.crypto.random){var bt=window.crypto.random(32);for(G=0;G<bt.length;++G)z[L++]=bt.charCodeAt(G)&255}for(;L<et;)G=Math.floor(65536*Math.random()),z[L++]=G>>>8,z[L++]=G&255;L=0,Ft()}function ni(){if(Ee==null){for(Ft(),Ee=ti(),Ee.init(z),L=0;L<z.length;++L)z[L]=0;L=0}return Ee.next()}function ii(r){var e;for(e=0;e<r.length;++e)r[e]=ni()}function kt(){}kt.prototype.nextBytes=ii;function oi(r,e){return new W(r,e)}function ai(r,e){if(e<r.length+11)return alert("Message too long for RSA"),null;for(var t=new Array,n=r.length-1;n>=0&&e>0;){var i=r.charCodeAt(n--);i<128?t[--e]=i:i>127&&i<2048?(t[--e]=i&63|128,t[--e]=i>>6|192):(t[--e]=i&63|128,t[--e]=i>>6&63|128,t[--e]=i>>12|224)}t[--e]=0;for(var o=new kt,s=new Array;e>2;){for(s[0]=0;s[0]==0;)o.nextBytes(s);t[--e]=s[0]}return t[--e]=2,t[--e]=0,new W(t)}function $e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function si(r,e){r!=null&&e!=null&&r.length>0&&e.length>0?(this.n=oi(r,16),this.e=parseInt(e,16)):alert("Invalid RSA public key")}function ci(r){return r.modPowInt(this.e,this.n)}function ui(r){var e=ai(r,this.n.bitLength()+7>>3);if(e==null)return null;var t=this.doPublic(e);if(t==null)return null;var n=t.toString(16);return n.length&1?"0"+n:n}$e.prototype.doPublic=ci;$e.prototype.setPublic=si;$e.prototype.encrypt=ui;var ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fi="=";function li(r){var e,t,n="";for(e=0;e+3<=r.length;e+=3)t=parseInt(r.substring(e,e+3),16),n+=ve.charAt(t>>6)+ve.charAt(t&63);for(e+1==r.length?(t=parseInt(r.substring(e,e+1),16),n+=ve.charAt(t<<2)):e+2==r.length&&(t=parseInt(r.substring(e,e+2),16),n+=ve.charAt(t>>2)+ve.charAt((t&3)<<4));(n.length&3)>0;)n+=fi;return n}oe.hex2b64=li;function di(r,e){for(var t="",n=0;n+e<r.length;)t+=r.substring(n,n+e),n+=e;return t+r.substring(n,r.length)}oe.linebrk=di;oe.default=$e;var ze={};Object.defineProperty(ze,"__esModule",{value:!0});ze.generateRandomString=void 0;function hi(r){r===void 0&&(r=32);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t=e.length,n="",i=0;i<r;i++)n+=e.charAt(Math.floor(Math.random()*t));return n}ze.generateRandomString=hi;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.webEncrypt=r.rsaEncrypt=r.aesEncrypt=void 0;var e=Y,t=e.__importStar(ce),n=e.__importStar(oe),i=ze,o=ce;Object.defineProperty(r,"aesEncrypt",{enumerable:!0,get:function(){return o.aesEncrypt}});function s(a,h){if(n.default&&n.linebrk&&n.hex2b64){var g=0,v=function(_,y){var f=new n.default;f.setPublic(_,"10001");var l=f.encrypt(y);return l=n.linebrk(n.hex2b64(l),64),l.length!==344&&g<10&&(g++,l=v(_,y)),g=0,l};return v(a,h)}else return h}r.rsaEncrypt=s;function c(a,h,g){for(var v=Object.assign({},a),_=i.generateRandomString(16),y=0,f=h.length;y<f;y++){var l=h[y],b=v[l];b!=null&&(v[l]=t.aesEncrypt(_,String(b)))}var d=s(g,_);return{encryptedData:v,encryptedKey:d}}r.webEncrypt=c;var p={install:function(a,h){a.appendPreBind({name:"plugin-encrypt-web",event:"event-data-encrypt",callback:function(g){var v,_,y,f=g.dwEvent,l=g.dwProcess;f.validate();var b=l.dwConfig,d=b.getAll();if((d.dbg||d.debugMode)&&d.noEncrypted){f.dataEncrypted=f.data;return}var u,m=(y=(_=(v=l.dynamicData)===null||v===void 0?void 0:v.events)===null||_===void 0?void 0:_.data)!==null&&y!==void 0?y:[];if(f.name==="_page_view")u=["title","url","refer"];else for(var D=0;D<m.length;D++){var T=m[D];if(T.name===f.name){T.encryptAttrs&&(u=T.encryptAttrs);break}}if(u&&f.data){var O=c(f.data,u,h.rsaKey),k=O.encryptedData,F=O.encryptedKey;if(F){var w={_encrypted_key:F,_encrypted_version:"20160113",_encrypted_fields:u.join(",")};Object.assign(k,w)}f.dataEncrypted=k}}}),t.default.install(a,{aesKey:h.aesKey})}};r.default=p})(xt);var ut={};Object.defineProperty(ut,"__esModule",{value:!0});var vi={install:function(r,e){var t=0,n=e.max;r.appendPreBind({name:"send-in-limit-connect-before-event",event:"before-event-send",callback:function(i){var o=i.dwEvent;o.isPostStopped()||(t>=n?o.saveWait().stopPost():t++)}}),r.appendPreBind({name:"send-in-limit-connect-after-event",event:"after-event-send",callback:function(i){i.dwProcess,t>0&&t--}}),r.appendPreBind({name:"send-in-limit-connect-before-dynamic",event:"before-dynamic-send",callback:function(i){var o=i.dwDynamic;o.isPostStopped()||(t>=n?(o.retry(),o.stopPost()):t++)}}),r.appendPreBind({name:"send-in-limit-connect-after-dynamic",event:"after-dynamic-send",callback:function(){t>0&&t--}})}};ut.default=vi;var ft={};Object.defineProperty(ft,"__esModule",{value:!0});var pi={install:function(r,e){var t=e!=null?e:{},n=t.debounce,i=n===void 0?0:n,o=t.throttle,s=o===void 0?0:o,c=t.ignoreEventNames,p=c===void 0?[]:c;r.appendPreBind({name:"plugin-send-in-throttle",event:"before-event-send",callback:function(a){var h=a.dwEvent,g=a.dwProcess;g.cache.others.throttle||(g.cache.others.throttle={first:!1,debounceTimer:null,throttleTimer:null});var v=g.dwService,_=g.cache.others.throttle,y=_;if(!h.isPostStopped()&&h.from!=="wait"&&!p.includes(h.name)){var f=function(){y.first=!1,clearTimeout(y.debounceTimer),clearTimeout(y.throttleTimer),y.debounceTimer=null,y.throttleTimer=null,v.sendWaitEvents(g)};i>0&&(h.saveWait().stopPost(),clearTimeout(y.debounceTimer),y.debounceTimer=setTimeout(f,i)),s>0&&(y.first||(y.first=!0,clearTimeout(y.throttleTimer),y.throttleTimer=setTimeout(f,s)))}}})}};ft.default=pi;Object.defineProperty(xe,"__esModule",{value:!0});xe.WebReporter=void 0;var de=Y,gi=de.__importDefault(Qe.exports),yi=de.__importDefault(Et),ne=Pe,_i=je,mi=Ne,wi=Ve,bi=de.__importDefault(xt),Di=de.__importDefault(ut),Ei=de.__importDefault(ft),Ge=re;ne.Reporter.adapters.http=new _i.HttpAdapterWeb;ne.Reporter.adapters.osInfo=new mi.OSInfoAdapterWeb;ne.Reporter.adapters.storage=new wi.StorageAdapterWeb;ne.Reporter.defaults={dynamicUrl:"https://dw-online.ksosoft.com",sendUrl:"(https://shuc-js.ksord.com/bat/js/cors)",debugUrl:"(https://dw-collect-debug.ksord.com)",handleAppEnd:function(r,e){if(!e.fresh){var t=r.dwStorage,n=function(){if(typeof navigator.sendBeacon=="function"){var i=r.generateAppEndEvent();if(typeof navigator.onLine=="boolean"&&!navigator.onLine){i.saveFail(),t.fail.sync();return}var o=gi.default.encode(yi.default.encode(JSON.stringify(i.eventBody))),s=new Blob([o],{type:"application/x-www-form-urlencoded"}),c=i.urlsParsed[0];r.isDebug()&&(console.log("beacon url",c),console.log("beacon body",JSON.stringify(i.eventBody))),navigator.sendBeacon(typeof c=="string"?c:c[0],s)}else console.log('[dw-js-sdk] "sendBeacon" is not supported, use normal method to send app_end.'),r.sendAppEnd()};"onbeforeunload"in window?window.addEventListener("beforeunload",n,!1):window.addEventListener("pagehide",n,!1)}}};ne.Reporter.use(bi.default,{aesKey:"ZctYg7JjXcPySXxw",rsaKey:"8762DEC337D703A5841A8090180350203AC0C2809A864BF6CA31979FCD7AA3D1BFA38CF8B243878984CBC9B83496CBAC87B448F74EA7550D579BD5820EFD17F5D22D0665AB114FB6EBA74261B4EB040828FBCA7CF95EF0D56BBFD9C67E5941AFFB34DE4C6FA2E737C16D9C703A43D90F65B40E7F3E44C1165C1ED3BD10BC449421863174E8EFA3CA618E0DEE7EDD65F07AAE0586AB1702B1D95F29F3BA447AD744E9B37ACB3F510D068A2D6BDBE4F0689B26A9AFCF66219160E7CF802D2F1A56503F462693B62747AD4163DBC1222687D154C53C03BBB5D2DE9ABC2DE6907E3B26E45C4FCA63F28258C4D07D3E152AE51F80A0DA7B77A3E1D0EFE72A988B57F9"});ne.Reporter.use(Ei.default,{debounce:parseInt("300"),throttle:parseInt("5000"),ignoreEventNames:["_app_end"]});ne.Reporter.use(Di.default,{max:3});var Mt=function(r){de.__extends(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,t)||this;n.options=t;var i=new Date;return n._lastFreshDate=[i.getFullYear(),i.getMonth()+1,i.getDate()],n}return e.prototype.createReporter=function(t,n){if(!t)throw Error("createReporter requires param appKey.");return new e(n).setAppKey(t)},e.prototype.setDailyFresh=function(t){var n=this;t===void 0&&(t="00:15");var i=t.match(/(\d?\d):(\d?\d)/),o="请设置正确的时间格式 hh:mm";if(!i)throw Error(o);var s=parseInt(i[1]),c=parseInt(i[2]);if(s>24||c>60)throw Error(o);var p=this.dwProcess.getRemoteDate();if(Ge.DWProcess.printLog("WebReporter","setDailyFresh",t),p){var a=new Date(p),h=parseInt("21600000 # 6小时");a.setHours(s),a.setMinutes(c),a.setSeconds(0,0),a.setTime(a.getTime()+Math.random()*h);var g=a.getTime()-p.getTime(),v=24*60*60*1e3,_=g>0?g:g+v,y=function(){n.dwProcess.refresh(),n._dailyRefreshTimer=setTimeout(y,v)};clearTimeout(this._dailyRefreshTimer),this._dailyRefreshTimer=setTimeout(y,_)}else setTimeout(function(){return n.setDailyFresh(t)},60*1e3);return this},e.prototype.forceFresh=function(){var t=new Date,n=[t.getFullYear(),t.getMonth()+1,t.getDate()],i=function(s,c,p){var a=c;return p===1&&(a=a*100),s+a},o=n.reduce(i)-this._lastFreshDate.reduce(i);if(o<=0){Ge.DWProcess.printLog("WebReporter","forceFresh","fail: same date",{currentDate:n.join("-"),lastFreshDate:this._lastFreshDate.join("-")});return}Ge.DWProcess.printLog("WebReporter","forceFresh","success",{currentDate:n.join("-"),lastFreshDate:this._lastFreshDate.join("-")},!0),this.dwProcess.refresh(!0),this._lastFreshDate=n},e}(ne.Reporter);xe.WebReporter=Mt;var Pi=xe.default=Mt;export{Si as K,Pi as _,xi as c};
