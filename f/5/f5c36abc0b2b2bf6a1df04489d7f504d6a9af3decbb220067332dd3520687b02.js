ion _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}on _setPrototypeOf2(e,t){return _setPrototypeOf2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_setPrototypeOf2(e,t)}unction _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}nction _classCallCheck2(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}ction(){"use strict";for(var e,t="8.6.1",n={},i=r=a={prefixed:!0},s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"]],o=s[0],l=0;l<s.length;l++)if(s[l][1]in document){e=s[l];break}if(e){for(var u=0;u<e.length;u++)a[o[u]]=e[u];a.prefixed=e[0]!==o[0]}var c=[];var d=function e(t){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a="info",s=return n=function(e,t,n){return function(i,r,a){var s=t.levels[r],o=new RegExp("^(".concat(s,")$")),l=e;if("log"!==i&&a.unshift(i.toUpperCase()+":"),n&&(l="%c".concat(e),a.unshift(n)),a.unshift(l+":"),c){c.push([].concat(a));var u=c.length-1e3;c.splice(0,u>0?u:0)}if(window.console){var d=window.console[i];d||"debug"!==i||(d=window.console.info||window.console.log),d&&s&&o.test(i)&&d[Array.isArray(a)?"apply":"call"](window.console,a)}}}(t,s,r),s.createLogger=function(n,a,s){var o=void 0!==a?a:i,l=void 0!==s?s:r;return e("".concat(t," ").concat(o," ").concat(n),o,l)},s.createNewLogger=function(t,n,i){return e(t,n,i)},s.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:a},s.level=function(e){if("string"==typeof e){if(!s.levels.hasOwnProperty(e))throw new Error('"'.concat(e,'" in not a valid log level'));a=e}return a},(s.history=.filter=function(e){return(c||[]).filter((function(t){return new RegExp(".*".concat(e,".*")).test(t[0])}))},s.history.clear=s.history.disable=s.history.enable=s.error=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("error",a,t)},s.warn=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n("warn",a,t)},s.debug=s}("VIDEOJS"),h=d.createLogger,p=Object.prototype.toString,f=ion b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];t.push(i)}return t}function T(e,t,n){var i=r={configurable:!0,enumerable:!0,get:;return(!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&(r.set=i),Object.defineProperty(e,t,r)}var k,S,w,C,E=Object.freeze({__proto__:null,each:g,reduce:m,isObject:y,isPlain:v,merge:_,values:b,defineLazyProperty:T}),A=!1,P=null,I=!1,x=!1,L=!1,D=!1,O=!1,R=null,M=null,N=null,U=!1,B=!1,j=!1,F=!1,q=Boolean(K()&&("ontouchstart"in window||window.navigator.maxTouchPoints||window.DocumentTouch&&window.document instanceof window.DocumentTouch)),V=window.navigator&&window.navigator.userAgentData;if(V&&(I="Android"===V.platform,L=Boolean(V.brands.find((function(e){return"Microsoft Edge"===e.brand}))),D=Boolean(V.brands.find((function(e){return"Chromium"===e.brand}))),O=!L&&D,R=M=(V.brands.find(()||{}).version||null,B="Windows"===V.platform),!D){var H=window.navigator&&window.navigator.userAgent||"";A=/iPod/i.test(H),C=H.match(/OS (\d+)_/i),P=C&&C[1]?C[1]:null,I=/Android/i.test(H),k=),x=/Firefox/i.test(H),L=/Edg/i.test(H),D=/Chrome/i.test(H)||/CriOS/i.test(H),O=!L&&D,R=M=),S=/MSIE\s(\d+)\.\d/.exec(H),!(w=S&&parseFloat(S[1]))&&/Trident\/7.0/i.test(H)&&/rv:11.0/.test(H)&&(w=11),N=w,U=/Safari/i.test(H)&&!O&&!I&&!L,B=/Windows/i.test(H),j=/iPad/i.test(H)||U&&q&&!/iPhone/i.test(H),F=/iPhone/i.test(H)&&!j}var z=F||j||A,W=(U||z)&&!O,G=Object.freeze({__proto__:null,get IS_IPOD(){return A},get IOS_VERSION(){return P},get IS_ANDROID(){return I},get ANDROID_VERSION(){return k},get IS_FIREFOX(){return x},get IS_EDGE(){return L},get IS_CHROMIUM(){return D},get IS_CHROME(){return O},get CHROMIUM_VERSION(){return R},get CHROME_VERSION(){return M},get IE_VERSION(){return N},get IS_SAFARI(){return U},get IS_WINDOWS(){return B},get IS_IPAD(){return j},get IS_IPHONE(){return F},TOUCH_ENABLED:q,IS_IOS:z,IS_ANY_SAFARI:W});nction Y(e){return y(e)&&1===e.nodeType}nction J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3?arguments[3]:void 0,r=document.createElement(e);return Object.getOwnPropertyNames(t).forEach((),Object.getOwnPropertyNames(n).forEach((),i&&ve(r,i),r}ction ne(e){for(var t,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t=e.classList).add.apply(t,_toConsumableArray(i.reduce((function(e,t){return e.concat(t.split(/\s+/))}),[]))),e}function ie(e){var t;if(!e)return d.warn("removeClass was called with an element that doesn't exist"),null;for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return(t=e.classList).remove.apply(t,_toConsumableArray(i.reduce((,[]))),e}function re(e,t,n){return"function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=void 0),t.split(/\s+/).forEach((),e}unction se(e){var t={},n=["autoplay","controls","playsinline","loop","muted","default","defaultMuted"];if(e&&e.attributes&&e.attributes.length>0)for(var i=e.attributes,r=i.length-1;r>=0;r--){var a=i[r].name,s=i[r].value;n.includes(a)&&(s=null!==s),t[a]=s}return t}ySelector"),ke=$("querySelectorAll");unction we(e){_toConsumableArray(document.styleSheets).forEach((function(t){try{var n=_toConsumableArray(t.cssRules).map((function(e){return e.cssText})).join(""),i=document.createElement("style");i.textContent=n,e.document.head.appendChild(i)}catch(n){var r=document.createElement("link");r.rel="stylesheet",r.type=t.type,r.media=t.media.mediaText,r.href=t.href,e.document.head.appendChild(r)}}))}var Ce,Ee=Object.freeze({__proto__:null,isReal:K,isEl:Y,isInFrame:Q,createEl:J,textContent:Z,prependTo:ee,hasClass:te,addClass:ne,removeClass:ie,toggleClass:re,setAttributes:ae,getAttributes:se,getAttribute:oe,setAttribute:le,removeAttribute:ue,blockTextSelection:ce,unblockTextSelection:de,getBoundingClientRect:he,findPosition:pe,getPointerPosition:fe,isTextNode:ge,emptyEl:me,normalizeContent:ye,appendContent:ve,insertContent:_e,isSingleLeftClick:be,$:Te,$$:ke,computedStyle:Se,copyStyleSheetsToWindow:we}),Ae=!1,Pe=)&&("complete"===document.readyState?xe():window.addEventListener("load",xe));var Le,De=Oe=Re=new WeakMap,Me=3;Fe=qe=["touchstart","touchmove"];e,Ke=Object.freeze({__proto__:null,fixEvent:je,on:Ve,off:He,trigger:ze,one:We,any:Ge}),Ye=30,Qe=$e=Je=function(e,t,n){var i,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:window,a=return a.cancel=a},Ze=Object.freeze({__proto__:null,UPDATE_REFRESH_INTERVAL:Ye,bind_:Qe,throttle:$e,debounce:Je}),et=function(){eturn _createClass(e,[{key:"on",value:function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Ve(this,e,t),this.addEventListener=n}},{key:"off",value:,{key:"one",value:function(e,t){var n=this.addEventListener;this.addEventListener=function(){},We(this,e,t),this.addEventListener=n}},{key:"any",value:,{key:"trigger",value:,{key:"queueTrigger",value:]),e}();et.prototype.allowedEvents_={},et.prototype.addEventListener=et.prototype.on,et.prototype.removeEventListener=et.prototype.off,et.prototype.dispatchEvent=et.prototype.trigger;var tt=nt=it=rt=function(e,t,n){if(!e||!e.nodeName&&!nt(e))throw new Error("Invalid target for ".concat(tt(t),"#").concat(n,"; must be a DOM node or evented object."))},at=function(e,t,n){if(!it(e))throw new Error("Invalid event type for ".concat(tt(t),"#").concat(n,"; must be a non-empty string or array."))},st=function(e,t,n){if("function"!=typeof e)throw new Error("Invalid listener for ".concat(tt(t),"#").concat(n,"; must be a function."))},ot=function(e,t,n){var i,r,a,s=t.length<3||t[0]===e||t[0]===e.eventBusEl_;if(s){i=e.eventBusEl_,t.length>=3&&t.shift();var o=_slicedToArray(t,2);r=o[0],a=o[1]}else{var l=_slicedToArray(t,3);i=l[0],r=l[1],a=l[2]}return rt(i,e,n),at(r,e,n),st(a,e,n),{isTargetingSelf:s,target:i,type:r,listener:a=Qe(e,a)}},lt=ut={on:one:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=ot(this,n,"one"),a=r.isTargetingSelf,s=r.target,o=r.type,l=r.listener;if(a)lt(s,"one",o,l);else{var u=function t(){e.off(s,o,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];l.apply(null,i)};u.guid=l.guid,lt(s,"one",o,u)}},any:off:trigger:function(e,t){rt(this.eventBusEl_,this,"trigger");var n=e&&"string"!=typeof e?e.type:e;if(!it(n))throw new Error("Invalid event type for ".concat(tt(this),"#trigger; ")+"must be a non-empty string or object with a type key that has a non-empty value.");return ze(this.eventBusEl_,e,t)}};function ct(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).eventBusKey;if(t){if(!e[t].nodeName)throw new Error('The eventBusKey "'.concat(t,'" does not refer to an element.'));e.eventBusEl_=e[t]}else e.eventBusEl_=J("span",{className:"vjs-event-bus"});return Object.assign(e,ut),e.eventedCallbacks&&e.eventedCallbacks.forEach((function(e){e()})),e.on("dispose",(),e}var dt={state:{},setState:;ar pt=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))},ft=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},gt=mt=Object.freeze({__proto__:null,toLowerCase:pt,toTitleCase:ft,titleCaseEquals:gt}),yt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};ar _t=vt((]=r[o]}));_t.code,_t.codes,_t.aliases,_t.names,_t.title;var bt=function(){function e(t,n,i){var r=this;if(_classCallCheck2(this,e),!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=_({},this.options_),n=this.options_=_(this.options_,n),this.id_=n.id||n.el&&n.el.id,!this.id_){var a=t&&t.id&&t.id()||"no_player";this.id_="".concat(a,"_component_").concat(Ne())}this.name_=n.name||null,n.el?this.el_=n.el:!1!==n.createEl&&(this.el_=this.createEl()),n.className&&this.el_&&n.className.split(" ").forEach((function(e){return r.addClass(e)})),["on","off","one","any","trigger"].fvoid 0})),!1!==n.evented&&(ct(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),ht(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Set,this.setIntervalIds_=new Set,this.rafIds_=new Set,this.namedRafs_=new Map,this.clearingTimersOnDispose_=!1,!1!==n.initChildren&&this.initChildren(),this.ready(i),!1!==n.reportTouchActivity&&this.enableTouchActivity()}return _createClass(e,[{key:"on",value:function(e,t){}},{key:"off",value:function(e,t){}},{key:"one",value:function(e,t){}},{key:"any",value:function(e,t){}},{key:"trigger(e,t){}},{key:"dispose",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}}},{key:"isDisposedosed_)}},{key:"player",value:function(){return this.player_}},{key:"optionstions_}},{key:"el",value:function(){return this.el_}},{key:"createEle,t,n)}},{key:"localize}))),l}},{key:"handleLanguagechange",value:function(){}},{key:"contentElis.el_}},{key:"id",value:function(){return this.id_}},{key:"name",value:function(){return this.name_}},{key:"children",value:function(){return this.children_}},{key:"getChildByIdex_[e]}},{key:"getChildex_[e]}},{key:"getDescendantturn i}},{key:"setIcon",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(this.player_.options_.experimentalSvgIcons){var n="http://www.w3.org/2000/svg",i=J("span",{className:"vjs-icon-placeholder vjs-svg-icon"},{"aria-hidden":"true"}),r=document.createElementNS(n,"svg");r.setAttributeNS(null,"viewBox","0 0 512 512");var a=document.createElementNS(n,"use");return r.appendChild(a),a.setAttributeNS(null,"href","#vjs-icon-".concat(e)),i.appendChild(r),this.iconIsSet_?t.replaceChild(i,t.querySelector(".vjs-icon-placeholder")):t.appendChild(i),this.iconIsSet_=!0,i}}},{key:"addChild",value:function(t){var n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.children_.length;if("string"==typeof t){i=ft(t);var s=r.componentClass||i;r.name=i;var o=e.getComponent(s);if(!o)throw new Error("Component ".concat(s," does not exist"));if("function"!=typeof o)return null;n=new o(this.player_||this,r)}else n=t;if(n.parentComponent_&&n.parentComponent_.removeChild(n),this.children_.splice(a,0,n),n.parentComponent_=this,"function"==typeof n.id&&(this.childIndex_[n.id()]=n),(i=i||n.name&&ft(n.name()))&&(this.childNameIndex_[i]=n,this.childNameIndex_[pt(i)]=n),"function"==typeof n.el&&n.el()){var l=null;this.children_[a+1]&&(this.children_[a+1].el_?l=this.children_[a+1].el_:Y(this.children_[a+1])&&(l=this.children_[a+1])),this.contentEl().insertBefore(n.el(),l)}return n}},{key:"removeChildl())}}}},{key:"initChildren)}}))}}},{key:"buildCSSClass",value:function(){return""}},{key:"readysh(e))}},{key:"triggerReady)}),1)}},{key:"$",value:function(e,t){return Te(e,t||this.contentEl())}},{key:"$$tEl())}},{key:"hasClass",value:function(e){return te(this.el_,e)}},{key:"addClass",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];ne.apply(void 0,[this.el_].concat(t))}},{key:"removeClassat(t))}},{key:"toggleClass",value:function(e,t){re(this.el_,e,t)}},{key:"show",value:function(){this.removeClass("vjs-hidden")}},{key:"hide",value:function(){this.addClass("vjs-hidden")}},{key:"lockShowing",value:function(){this.addClass("vjs-lock-showing")}},{key:"unlockShowing",value:function(){this.removeClass("vjs-lock-showing")}},{key:"getAttributeel_,e)}},{key:"setAttribute_,e,t)}},{key:"removeAttributeel_,e)}},{key:"width",value:function(e,t){return this.dimension("width",e,t)}},{key:"height",e,t)}},{key:"dimensionsght(t)}},{key:"dimension)],10)}},{key:"currentDimension",value:function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=Se(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="offset".concat(ft(e));t=this.el_[n]}return t}},{key:"currentDimensionsght")}}},{key:"currentWidth",value:function(){return this.currentDimension("width")}},{key:"currentHeight",value:function(){return this.currentDimension("height")}},{key:"focus",value:function(){this.el_.focus()}},{key:"blurblur()}},{key:"handleKeyDownwn(e))}},{key:"handleKeyPressown(e)}},{key:"emitTapEvents)))}))}},{key:"enableTouchActivityl",n)}}},{key:"setTimeoutd(n),n}},{key:"clearTimeout",value:function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),window.clearTimeout(e)),e}},{key:"setIntervald(n),n}},{key:"clearInterval",value:function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),window.clearInterval(e)),e}},{key:"requestAnimationFrame",value:function(e){var t,n=this;return this.clearTimersOnDispose_(),e=Qe(this,e),t=window.requestAnimatiot),e()})),this.rafIds_.add(t),t}},{key:"requestNamedAnimationFrame,i),e}}},{key:"cancelNamedAnimationFramete(e))}},{key:"cancelAnimationFrame(e)),e}},{key:"clearTimersOnDispose_",value:function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){var n=_slicedToArray(t,2),i=n[0],r=n[1];e[i].forEach((function(t,n){return e[r](n)}))})),e.clearingTimersOnDispose_=!1})))}}],[{key:"registerComponent",value:function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'.concat(t,'"; must be a non-empty string.'));var i,r=e.getComponent("Tech"),a=r&&r.isTech(n),s=e===n||e.prototype.isPrototypeOf(n.prototype);if(a||!s)throw i=a?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'.concat(t,'"; ').concat(i,"."));t=ft(t),e.components_||(e.components_={});var o=e.getComponent("Player");if("Player"===t&&o&&o.players){var l=o.players,u=Object.keys(l);if(l&&u.length>0&&u.map((function(e){return l[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[pt(t)]=n,n}},{key:"getComponentts_[t]}}]),e}();function Tt(e,t,n,i){return function(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error("Failed to execute '".concat(e,"' on 'TimeRanges': The index provided (").concat(t,") is non-numeric or out of bounds (0-").concat(n,")."))}(e,i,n.length-1),,t]])}bt.registerComponent("Component",bt)"+n:n)]:e)}var It=Object.freeze({__proto__:null,createTimeRanges:St,createTimeRange:St,setFormatTime:Et,resetFormatTime:At,formatTi||"")}Lt.prototype.code=0,Lt.prototype.message="",Lt.prototype.status=null,Lt.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Lt.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Dt=0;Dt<Lt.errorTypes.length;Dt++)Lt[Lt.errorTypes[Dt]]=Dt,Lt.prototype[Lt.errorTypes[Dt]]=Dt){}))}})p(Nacks()},jt="vjs-modal-dialog",Ft=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).handleKeyDown_=function(e){return i.handleKeyDown(e)},iose(e)},i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=J("div",{className:"".concat(jt,"-content")},{role:"document"}),i.descEl_=J("p",{className:"".concat(jt,"-description vjs-control-text"),id:i.el().getAttribute("aria-describedby")}),Z(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){return _get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":"".concat(this.id(),"_description"),"aria-hidden":"true","aria-label":this.label(),role:"dialog"})}},{key:"dispose",value:function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"buildCSSClass",value:function(){return"".concat(jt," vjs-hidden ").concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"labelndow")}},{key:"description.")),e}},{key:"opend_=!0}}},{key:"openedpened_}},{key:"closeose()}}},{key:"closeableeable_}},{key:"fillent())}},{key:"fillWithr.el_)}},{key:"emptympty")}},{key:"contentntent_}},{key:"conditionalFocus_cus())}},{key:"conditionalBlur_=null)}},{key:"handleKeyDownlt())}}},{key:"focusableEls_e")}))}}]),t}(bt);Ft.prototype.options_={pauseOnOpen:!0,temporary:!0},bt.registerComponent("ModalDialog",Ft);var qt=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck2(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).tracks_=[],Object.defineProperty(_assertThisInitialized(e),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<n.length;i++)e.addTrack(n[i]);return e}return _inherits(t,e),_createClass(t,[{key:"addTrackange_)}},{key:"removeTrackthis})}},{key:"getTrackById",value:function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t}}]),t}(et);for(var Vt in qt.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},qt.prototype.allowedEvents_)qt.prototype["on"+Vt]=null;var Ht,zt=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},Wt=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck2(this,t);for(var i=n.length-1;i>=0;i--)if(n[i].enabled){zt(n,n[i]);break}return(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))).changing_=!1,e}return _inherits(t,e),_createClass(t,[{key:"addTrack",value:function(e){var n=this;e.enabled&&zt(this,e),_get(_getPrototypeOf(t.prototype),"addTrack",this).call(this,e),e.addEventListener&&(e.enabledChange_=function(){n.changing_||(n.changing_=!0,zt(n,e),n.changing_=!1,n.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))}},{key:"removeTrack",value:function(e){_get(_getPrototypeOf(t.prototype),"removeTrack",this).call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)}}]),t}ed=!1)},Xt=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck2(this,t);for(var i=n.length-1;i>=0;i--)if(n[i].selected){Gt(n,n[i]);break}return(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n))).changing_=!1,Object.defineProperty(_assertThisInitialized(e),"selectedIndeturn-1},set:function(){}}),e}return _inherits(t,e),_createClass(t,[{key:"addTrack",value:function(e){var n=this;e.selected&&Gt(this,e),_get(_getPrototypeOf(t.prototype),"addTrack",this).call(this,e),e.addEventListener&&(e.selectednge"))},e.addEventListener("selectedchange",e.selectedChange_))}},{key:"removeTrack",value:function(e){_get(_getPrototypeOf(t.prototype),"removeTrack",this).call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)}}]),t}(qt),Kt=function(e){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"addTrack",value:function(e){var n=this;_get(_getPrototypeOf(t.prototype),"addTrack",this).call(this,e),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)}},{key:"removeTrack",value:function(e){_get(_getPrototypeOf(t.prototype),"removeTrack",this).call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))}}]),t}(qt),Yt=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];_classCallCheck2(this,e),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var n=0,i=t.length;n<i;n++)this.addTrackElement_(t[n])}return _createClass(e,[{key:"addTrackElement_ush(e)}},{key:"getTrackElementByTrack_turn t}},{key:"removeTrackElement_break}}}]),e}(),Qt=funth_}})}return _createClass(e,[{key:"setCues_his,n)}},{key:"getCueByIdturn t}}]),e}(),$t={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Jt={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Zt={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},en={disabled:"disabled",hidden:"hidden",showing:"showing"},tn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck2(this,t),e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this));var i={id:n.id||"vjs_track_"+Ne(),kind:n.kind||"",language:n.language||""},r=n.labe(){}})};for(var s in i)a(s);return Object.defineProperty(_assertThisInitialized(e),"label",{get:function(){returnnge"))}}),e}return _inherits(t,e),t}ostturturn""},sn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location,n=nn(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},on=Object.freeze({__proto__:null,parseUrl:nn,getAbsoluteURL:rn,getFileExtension:an,isCrossOrigin:sn}),ln="undefined"!=typeof window?window:void 0!==yt?yt:"undefined"!=typeof self?self:{}xports})),cn=(Ht=un)&&Ht.__esModule&&Object.prototype.hasOwnProperty.call(Ht,"default")?Ht.defaulrompt)},hn=Object.prototype.toStringll,r)}};vn.httpHandler=pn),t):t},gn=vl),l}vn.XMLHttpRequest=ln.XMLHttpRequest||function(){},vn.XDomainRequest="withCredentials"in new vn.XMLHttpRequest?vn.XMLHttpRequest:ln.XDomain(e[n])}(["get","put","post","patch","head","de_n(n)}})),gn.default=mn;var bn=function(e,t){var n=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(window.console&&window.console.groupCollapsed&&window.console.groupCollapsed("Text Track parsing errors for ".concat(t.src)),i.forEach((function(e){return d.error(e)})),window.console&&window.console.groupEnd&&window.console.groupEnd()),n.flush()},Tn=function(e,t){var n={uri:e},i=sn(e);i&&(n.cors=i);var r="use-credentials"===t.tech_.crossOrigin();r&&(n.withCredentials=r),gn(n,Qe(this,(function(e,n,i){if(e)return d.error(e,n);t.loaded_=!0,"function"!=typeof window.WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(function(e){if("vttjserror"!==e.type)return bn(i,t);d.error("vttjs failed to load, stopping trying to process ".concat(t.src))})):bn(i,t)})))},kn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(_classCallCheck2(this,t),!n.tech)throw new Error("A tech was not provided.");var i=_(n,{kind:Zt[n.kind]||"subtitles",language:n.language||n.srclang||""}),r=en[i.mode]||"disabled",a=i.default;"metadata"!==i.kind&&"chapters"!==i.kind||(r="hidden"),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,i))).tech_=i.tech,e.cues_=[],e.activeCues_=[],e.preload_=!1!==e.tech_.preloadTextTracks;var s=new Qt(e.cues_),o=new Qt(e.activeCues_),l=!1;e.timeupdateHandler=Qe(_assertThisInitialized(e),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,l&&(this.trigger("cuechange"),l=!1),"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))):"timeupdate"!==e.type&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)))}));return e.tech_.one("dispose",(function(){e.stopTracking()})),"disabled"!==r&&e.startTracking(),Object.defineProperties(_assertThisInitialized(e),{default:{get:function(){return a},set:function(){}},mode:{get:function(){returnnge"))}},cus:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return o;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];r.startTime<=e&&r.endTime>=e&&t.push(r)}if(l=!1,t.length!==this.activeCues_.length)l=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(l=!0);return this.activeCues_=t,o.setCues_(this.activeCues_),o},set:function(){}}}),i.src?(e.src=i.src,e.preload_||(e.loaded_=!0),(e.preload_||"subtitles"!==i.kind&&"captions"!==i.kind)&&Tn(e.src,_assertThisInitialized(e))):e.loaded_=!0,e}return _inherits(t,e),_createClass(t,[{key:"startTrackingndler)}},{key:"stopTrackingndler)}},{key:"addCue",value:function(e){var t=e;if(!("getCueAsHTML"in t)){for(var n in t=new window.vttjs.VTTCue(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)}},{key:"removeCuereak}}}}]),t}(tn);kn.prototype.allowedEvents_={cuechange:"cuechange"};var Sn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck2(this,t);var i=_(n,{kind:Jt[n.kind]||""});e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,i));var r=!1;return Object.defineProperty(_assertThisInitialized(e),"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),i.enabled&&(e.enabled=i.enabled),e.loaded_=!0,e}return _inherits(t,e),t}(tn),wn=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck2(this,t);var i=_(n,{kind:$t[n.kind]||""});e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,i));var r=!1;return Object.defineProperty(_assertThisInitialized(e),"selected",{get:function(){returnnge"))}}),i.selected&&(e.selected=i.selected),e}return _inherits(t,e),t}(tn),Cn=function(e){function t(){var e,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck2(this,t),e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this));var r=new kn(i);return e.kind=r.kind,e.src=r.src,e.srclang=r.language,e.label=r.label,e.default=r.default,Object.defineProperties(_assertThisInitialized(e),{readyState:{get:function(){return n}},track:{get:function(){return r}}}),n=t.NONE,r.addEventListener("loadeddata",(function(){n=t.LOADED,e.trigger({type:"load",target:_assertThisInitialized(e)})})),e}return _inherits(t,e),t}(et);Cn.prototype.allowedEvents_={load:"load"},Cn.NONE=0,Cn.LOADING=1,Cn.LOADED=2,Cn.ERROR=3;var En={audio:{ListClass:Wt,TrackClass:Sn,capitalName:"Audio"},video:{ListClass:Xt,TrackClass:wn,capitalName:"Video"},text:{ListClass:Kt,TrackClass:kn,capitalName:"Text"}};Object.keys(En).fcks_")}));var An={remoteText:{ListClass:Kt,TrackClass:kn,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Yt,TrackClass:Cn,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Pn=Object.assign({},En,An);An.names=Object.keys(An),En.names=Object.keys(En),Pn.names=[].concat(An.names).concat(En.names);var In,xn=void 0!==yt?yt:"undefined"!=typeof window?window:{};"undefined"!=typeof document?In=document:(In=xn["__GLOBAL_DOCUMENT_CACHE@4"])||(In=xn["__GLOBAL_DOCUMENT_CACHE@4"]={});var Ln=In,Dn=Object.net)}On.prototype=Dn(Error.prototype),On.prototype.constructor=On,On.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},Mn.prototy[e]=s[e]valubreak}},t,10))},t),!0)}};var Bn=Ln.createElement&&Ln.createElement("textarea"),jn={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Fn={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},qn={v:"title",lang:"lang"},Vn={rt:"ruby"};function Hn(e,t){function n(){if(!t)return null;var e=t.match(/^([^<]*)(<[^>]*>?)?/)gth),e}(e[1]?e[1()),r}for(var a,s,o=e.document.createElement("div"),l=o,u=[];null!==(a=n());)if("<"!==a[0])l.appendChild(e.document.createTextNode((s=a,Bn.innerHTML=s,s=Bn.textContent,Bn.textContent="",s)));else{if("/"===a[1]){u.length&&u[u.length-1]===a.substr(2).replace(">","")&&(u.pop(),l=l.parentNode);continue}var c,d=Rn(a.substr(1,a.length-2));if(d){c=e.document.createProcessingInstruction("timestamp",d),l.appendChild(c);continue}var h=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!h)continue;if(!(c=r(h[1],h[3])))continue;if(!i(l,c))continue;if(h[2]){var p=h[2].split(".");p.f[i]=r}})),c.className=p.join(" ")}u.push(h[1]),l.appendChild(c),l=c}return o}var zn=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,11)}function $n(){}Xn.prototype.appl=e[n])},Xn.prototype.form?0:e+t},Kn.prototype=Dn(Xn.prototype),Kn.prototype.constructor=Kn,Yn.prototyom-=t}},Yn.prototype.o>e.top},Yn.prototype.overturn!1},Yn.prototype.right},Yn.prototype.overlapsOpposottom}},Yn.prototype.intersectPerwidth)},Yn.prototype.toCSSCompawidth}},Yn.getSimpleBoxPth||n}},$n.String(e))}}},$n.convertCueTo):null};$n.procState)},$nist=[]},$n.Parser.prototype={reportOrThrror(e)n this),this}};var Jn=$n,Zn={"":1,lr:1,rl:1},ei={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-rioid 0}ni.prototype.getCu.text)};var ii=ni,ri={"":!0e<=100=t}}})}shim()}));oi.WebVTT,oi.VTTCue,oi.VTTRegion;var li=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return _classCallCheck2(this,t),n.reportTouchActivity=!1,(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,null,n,i))).onDurationChange_=function(t){return e.onDurationChange(t)},e.trackProgress_=function(t){return e.trackProgress(t)},e.trackCurrentTime_=function(t){return e.trackCurrentTime(t)},e.stopTrackingCurrentTime_=function(t){return e.stopTrackingCurrentTime(t)},e.disposeSourceHandler_=function(t){return e.disposeSourceHandler(t)},e.queuedHanders_=new Set,e.hasStarted_=!1,e.on("playing",(function(){this.hasStarted_=!0})),e.on("loadstart",(function(){this.hasStarted_=!1})),Pn.names.fName])})),e.featuresProgressEvents||e.manualProgressOn(),e.featuresTimeupdateEvents||e.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(t){!1===n["native".concat(t,"Tracks")]&&(e["featuresNative".concat(t,"Tracks")]=!1)})),!1===n.nativeCaptions||!1===n.nativeTextTracks?e.featuresNativeTextTracks=!1:!0!==n.nativeCaptions&&!0!==n.nativeTextTracks||(e.featuresNativeTextTracks=!0),e.featuresNativeTextTracks||e.emulateTextTracks(),e.preloadTextTracks=!1!==n.preloadTextTracks,e.autoRemoteTextTracks_=new Pn.text.ListClass,e.initTrackListeners(),n.nativeControlsForTouch||e.emitTapEvents(),e.constructor&&(e.name_=e.constructor.name||"Unknown Tech"),e}return _inherits(t,e),_createClass(t,[{key:"triggerSourcesetset"})}},{key:"manualProgressOnress_)}},{key:"manualProgressOffange_)}},{key:"trackProgress),500)}},{key:"onDurationChangetion()}},{key:"bufferedt(0,0)}},{key:"bufferedPercenttion_)}},{key:"stopTrackingProgress",value:function(){this.clearInterval(this.progressInterval)}},{key:"manualTimeUpdatesOnTime_)}},{key:"manualTimeUpdatesOffTime_)}},{key:"trackCurrentTime),250)}},{key:"stopTrackingCurrentTimed:!0})}},{key:"dispose",value:function(){this.clearTracks(En.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"clearTracks",value:function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var n=t["".concat(e,"Tracks")]()||[],i=n.length;i--;){var r=n[i];"text"===e&&t.removeRemoteTextTrack(r),n.removeTrack(r)}}))}},{key:"cleanupAutoTextTracksck(n)}}},{key:"reset",value:function(){}},{key:"crossOrigin",value:function(){}},{key:"setCrossOrigin",value:function(){}},{key:"errorerror_}},{key:"played):St()}},{key:"play",value:function(){}},{key:"setScrubbing",value:function(e){}},{key:"scrubbing",value:function(){}},{key:"setCurrentTimed:!0})}},{key:"initTrackListeners",value:function(){var e=this;En.names.forEach((function(t){var n=nge"))},r=e[n.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),e.on("dispose",(function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)}))}))}},{key:"addWebVttScript_ript_)}},{key:"emulateTextTracksa)}}))}},{key:"addTextTracke,t,n)}},{key:"createRemoteTextTrackass(t)}},{key:"addRemoteTextTrack",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,i=this.createRemoteTextTrack(t);return"boolean"!=typeof n&&(n=!1),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!1===n&&thistrack)})),i}},{key:"removeRemoteTextTrackack(e)}},{key:"getVideoPlaybackQualityturn{}}},{key:"requestPictureInPicture",value:function(){return Promise.reject()}},{key:"disablePictureInPicture",value:function(){return!0}},{key:"setDisablePictureInPicture",value:function(){}},{key:"requestVideoFrameCallbackn,e),n}},{key:"cancelVideoFrameCallbackame(e)}},{key:"setPoster",value:function(){}},{key:"playsinline",value:function(){}},{key:"setPlaysinline",value:function(){}},{key:"overrideNativeAudioTracks",value:function(e){}},{key:"overrideNativeVideoTracks",value:function(e){}},{key:"canPlayType",value:function(e){return""}}],[{key:"canPlayTypeturn""}},{key:"canPlaySource.type)}},{key:"isTech|e===t}},{key:"registerTech",value:function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech ".concat(e," must be a Tech"));if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=ft(e),t.techs_[e]=n,t.techs_[pt(e)]=n,"Tech"!==e&&t.defaultTechOrder_.push(e),n}},{key:"getTech",value:function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=ft(e),window&&window.videojs&&window.videojs[e]?(d.warn("The ".concat(e," tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)")),window.videojs[e]):void 0)}}]),t}(bt);Pn.names.fName]}})),li.prototype.featuresVolumeControl=!0,li.prototype.featuresMuteControl=!0,li.prototype.featuresFullscreenResize=!1,li.prototype.featuresPlaybackRate=!1,li.prototype.featuresProgressEvents=!1,li.prototype.featuresSourceset=!1,li.prototype.featuresTimeupdateEvents=!1,li.prototype.featuresNativeTextTracks=!1,li.prototype.featuresVideoFrameCallback=!1,li.withSourceHnull)}},bt.registerComponent("Tech",li),li.registerTech("Tech",li),li.defaultTechOrder_=[];var ui={},ci={,s),o}var fi={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},gi={setCurrentTime:1,setMuted:1,setVolume:1},mi={play:1,p(t):t}}function vi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=_toArray(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]),s=a[0],o=a.slice(1);if("string"==typeof s)vi(e,ui[s],t,n,i,r);else if(s){var l=function(e,t){var n=ci[e.id()],i=null;if(null==n)return i=t(e),ci[e.id()]=[[t,i]],i;for(var r=0;r<n.length;r++){var a=_slicedToArray(n[r],2),s=a[0],o=a[1];s===t&&(i=o)}return null===i&&(i=t(e),n.push([t,i])),i}(n,s);if(!l.setSource)return i.push(l),vi(e,o,t,n,i,r);l.setSource(Object.assignn,i,r)}))}else o.length?vi(e,o,t,n,i,r):r?t(e,i):vi(e,ui["*"],t,n,i,!0)}var _i={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},bi=function(){var e=an(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"");return _i[e.toLowerCase()]|turn e}var Si=function(e){function t(e,n,i){var r;_classCallCheck2(this,t);var a=_({createEl:!1},n);if(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,a,i)),n.playerOptions.sources&&0!==n.playerOptions.sources.length)e.src(n.playerOptions.sources);else for(var s=0,o=n.playerOptions.techOrder;s<o.length;s++){var l=ft(o[s]),u=li.getTech(l);if(l||(u=bt.getComponent(l)),u&&u.isSupported()){e.loadTech_(l);break}}return r}return _inherits(t,e),t}(bt);bt.registerComponent("MediaLoader",Si);var wi=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).options_.controlText&&i.controlText(i.options_.controlText),i.handleMouseOver_=function(e){return i.handleMouseOver(e)},i.handleMouseOut_=function(e){return i.handleMouseOut(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.emitTapEvents(),i.enable(),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=Object.assign({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&d.error("Creating a ClickableComponent with an HTML element of ".concat(e," is not supported; use a Button instead.")),n=Object.assign({role:"button"},n),this.tabIndex_=t.tabIndex;var i=J(e,t,n);return this.player_.options_.experimentalSvgIcons||i.appendChild(J("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}},{key:"dispose",value:function(){this.controlTextEl_=null,_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"createControlTextElextEl_}},{key:"controlText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,Z(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)}},{key:"buildCSSClass",value:function(){return"vjs-control vjs-button ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"enableown_))}},{key:"disableDown_)}},{key:"handleLanguagechange",value:function(){this.controlText(this.controlText_)}},{key:"handleClickments)}},{key:"handleKeyDown",value:function(e){_t.isEventKey(e,"Space")||_t.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):_get(_getPrototypeOf(t.prototype),"handleKeyDown",this).call(this,e)}}]),t}(bt);bt.registerComponent("ClickableComponent",wi);var Ci=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).update(),i.update_=function(e){return i.update(e)},e.on("posterchange",i.update_),i}return _inherits(t,e),_createClass(t,[{key:"dispose",value:function(){this.player().off("posterchange",this.update_),_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"createElter"})}},{key:"crossOrigin",value:function(e){if(void 0===e)return this.$("img")?this.$("img").crossOrigin:this.player_.tech_&&this.player_.tech_.isReady_?this.player_.crossOrigin():this.player_.options_.crossOrigin||this.player_.options_.crossorigin||null;null===e||"anonymous"===e||"use-credentials"===e?this.$("img")&&(this.$("img").crossOrigin=e):this.player_.log.warn('crossOrigin must be null,  "anonymous" or "use-credentials", given "'.concat(e,'"'))}},{key:"updatehide()}},{key:"setSrcent=""}},{key:"handleClickuse())}}]),t}(wi);Ci.prototype.crossorigin=Ci.prototype.crossOrigin,bt.registerComponent("PosterImage",Ci);var Ei="#222",Ai="#ccc",Pi={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-):""}var Di=function(e){function t(e,n,i){var r;_classCallCheck2(this,t),r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,i));var a=function(e){r.updateDisplayOverlay(),r.updateDisplay(e)};return e.on("loadstart",(function(e){return r.toggleDisplay(e)})),e.on("texttrackchange",(function(e){return r.updateDisplay(e)})),e.on("loadedmetack(e)})),e.ready(Qe(_assertThisInitialized(r),(function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)this.hide();else{e.on("fullscreenchange",a),e.on("playerresize",a);var t=window.screen.orientation||window,n=window.screen.orientation?"change":"orientationchange";t.addEventListener(n,a),e.on("dir(n,a)}));for(var i=this.options_.playerOptions.tracks||[],r=0;r<i.length;r++)this.player_.addRemoteTextTrack(i[r],!0);this.preselectTrack()}}))),r}return _inherits(t,e),_createClass(t,[{key:"preselectTrackwing")}},{key:"toggleDisplayshow()}},{key:"createEl",value:function(){return _get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})}},{key:"clearDisplays.el_)}},{key:"updateDisplayk(a))}}},{key:"updateDisplayOverlay",value:function(){if(this.player_.videoHeight()&&window.CSS.supports("inset-inline: 10px")){var e=this.player_.currentWidth(),t=this.player_.currentHeight(),n=e/t,i=this.player_.videoWidth()/this.player_.videoHeight(),r=0,a=0;Math.abs(n-i)>.1&&(n>i?r=Math.round((e-t*i)/2):a=Math.round((t-e/i)/2)),xi(this.el_,"insetInline",Li(r)),xi(this.el_,"insetBlock",Li(a))}}},{key:"updateDisplayState",value:function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,i=n.length;i--;){var r=n[i];if(r){var a=r.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&xi(a.firstChild,"color",Ii(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&xi(a.firstChild,"backgroundColor",Ii(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?xi(a,"backgroundColor",Ii(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px ".concat(Ei,", 2px 2px 4px ").concat(Ei,", 2px 2px 5px ").concat(Ei):"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px ".concat(Ei,", 2px 2px ").concat(Ei,", 3px 3px ").concat(Ei):"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px ".concat(Ai,", 0 1px ").concat(Ai,", -1px -1px ").concat(Ei,", 0 -1px ").concat(Ei):"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px ".concat(Ei,", 0 0 4px ").concat(Ei,", 0 0 4px ").concat(Ei,", 0 0 4px ").concat(Ei))),t.fontPercent&&1!==t.fontPercent){var s=window.parseFloat(a.style.fontSize);a.style.fontSize=s*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=Pi[t.fontFamily])}}}},{key:"updateForTrack",value:function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof window.WebVTT&&!eveCues}))){for(var t=[],n=0;n<e.length;++n)for(var i=e[n],r=0;r<i.activeCues.length;++r)t.push(i.activeCues[r]);window.WebVTT.processCues(window,t,this.el_);for(var a=0;a<e.length;++a){for(var s=e[a],o=0;o<s.activeCues.length;++o){var l=s.activeCues[o].displayState;ne(l,"vjs-text-track-cue","vjs-text-track-cue-"+(s.language?s.language:a)),s.language&&le(l,"lang",s.language)}this.player_.textTrackSettings&&this.updateDisplayState(s)}}}}]),t}(bt);bt.registerComponent("TextTrackDisplay",Di);var Oi=function(e){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){var e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),i=J("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),r=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r}},{key:"handleLanguagechangeyer"])}}]),t}(bt);bt.registerComponent("LoadingSpinner",Oi);var Ri=function(e){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=J(e="button",t=Object.assign({className:this.buildCSSClass()},t),n=Object.assign({type:"button"},n));return this.player_.options_.experimentalSvgIcons||i.appendChild(J("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i}},{key:"addChild",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.constructor.name;return d.warn("Adding an actionable (user controllable) child to a Button (".concat(n,") is not supported; use a ClickableComponent instead.")),bt.prototype.addChild.call(this,e,t)}},{key:"enablebled")}},{key:"disable",value:function(){_get(_getPrototypeOf(t.prototype),"disable",this).call(this),this.el_.setAttribute("disabled","disabled")}},{key:"handleKeyDown",value:function(e){_t.isEventKey(e,"Space")||_t.isEventKey(e,"Enter")?e.stopPropagation():_get(_getPrototypeOf(t.prototype),"handleKeyDown",this).call(this,e)}}]),t}(wi);bt.registerComponent("Button",Ri);var Mi=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).mouseused_=!1,i.setIcon("play"),i.on("mousedown",(function(e){return i.handleMouseDown(e)})),i}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-big-play-button"}},{key:"handleClick",value:function(e){var t=this.player_.play();if(this.mouseused_&&"clientX"in e&&"clientY"in e)return Mt(t),void(this.player_.tech(!0)&&this.player_.tech(!0).focus());var n=this.player_.getChild("controlBar"),i=n&&n.getChild("playToggle");if(i){var r=function(){return i.focus()};Rt(t)?t.then(r,(function(){})):this.setTimeout(r,1)}else this.player_.tech(!0).focus()}},{key:"handleKeyDownhis,e)}},{key:"handleMouseDown",value:function(e){this.mouseused_=!0}}]),t}(Ri);Mi.prototype.controlText_="Play Video",bt.registerComponent("BigPlayButton",Mi);var Ni=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).setIcon("cancel"),i.controlText(n&&n.controlText||i.localize("Close")),i}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-close-button ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"handleClicks:!1})}},{key:"handleKeyDown",value:function(e){_t.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):_get(_getPrototypeOf(t.prototype),"handleKeyDown",this).call(this,e)}}]),t}(Ri);bt.registerComponent("CloseButton",Ni);var Ui=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck2(this,t),n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,i)),i.replay=void 0===i.replay||i.replay,n.setIcon("play"),n.on(e,"play",(function(e){return n.handlePlay(e)})),n.on(e,"pause",(function(e){return n.handlePause(e)})),i.replay&&n.on(e,"ended",(function(e){return n.handleEnded(e)})),n}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-play-control ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"handleClickause()}},{key:"handleSeekedlay(e)}},{key:"handlePlayause")}},{key:"handlePausePlay")}},{key:"handleEnded",value:function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.setIcon("replay"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(e){return t.handleSeeked(e)}))}}]),t}(Ri);Ui.prototype.controlText_="Play",bt.registerComponent("PlayToggle",Ui);var Bi=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).on(e,["timeupdate","ended"],(function(e){return i.updateContent(e)})),i.updateTextNode_(),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){var e=this.buildCSSClass(),n=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"".concat(e," vjs-time-control vjs-control")}),i=J("span",{className:"vjs-control-text",textContent:"".concat(this.localize(this.labelText_),"")},{role:"presentation"});return n.appendChild(i),this.contentEl_=J("span",{className:"".concat(e,"-display")},{role:"presentation"}),n.appendChild(this.contentEl_),n}},{key:"dispose",value:function(){this.contentEl_=null,this.textNode_=null,_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"updateTextNode_",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t=Pt(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTexode_))}})))}},{key:"updateContent",value:function(e){}}]),t}(bt);Bi.prototype.labelText_="Time",Bi.prototype.controlText_="Time",bt.registerComponent("TimeDisplay",Bi);var ji=function(e){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-current-time"}},{key:"updateContenode_(t)}}]),t}(Bi);ji.prototype.labelText_="Current Time",ji.prototype.controlText_="Current Time",bt.registerComponent("CurrentTimeDisplay",ji);var Fi=function(e){function t(e,n){var i;_classCallCheck2(this,t);var r=function(e){return i.updateContent(e)};return(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).on(e,"durationchange",r),i.on(e,"loadstart",r),i.on(e,"loadedmetadata",r),i}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-duration"}},{key:"updateContenode_(t)}}]),t}(Bi);Fi.prototype.labelText_="Duration",Fi.prototype.controlText_="Duration",bt.registerComponent("DurationDisplay",Fi);var qi=function(e){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){var e=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div"),i=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"span",{textContent:"/"});return n.appendChild(i),e.appendChild(n),e}}]),t}(bt);bt.registerComponent("TimeDivider",qi);var Vi=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).on(e,"durationchange",(function(e){return i.updateContent(e)})),i}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-remaining-time"}},{key:"createEl",value:function(){var e=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this);return!1!==this.options_.displayNegative&&e.insertBefore(J("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e}},{key:"updateContende_(t))}}]),t}(Bi);Vi.prototype.labelText_="Remaining Time",Vi.prototype.controlText_="Remaining Time",bt.registerComponent("RemainingTimeDisplay",Vi);var Hi=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).updateShowing(),i.on(i.player(),"durationchange",(function(e){return i.updateShowing(e)})),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){var e=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=J("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(J("span",{className:"vjs-control-text",textContent:"".concat(this.localize("Stream Type"),"")})),this.contentEl_.appendChild(document.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e}},{key:"dispose",value:function(){this.contentEl_=null,_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"updateShowis.hide()}}]),t}(bt);bt.registerComponent("LiveDisplay",Hi);var zi=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).updateLiveEdgeStatus(),i.player_.liveTracker&&(i.updateLiveEdgeStatusHandler_=function(e){return i.updateLiveEdgeStatus(e)},i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatusHandler_)),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){var e=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.setIcon("circle",e),this.textEl_=J("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e}},{key:"updateLiveEdgeStat live"))}},{key:"handleCliveEdge()}},{key:"dispose",value:function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}}e)?t:e))}zi.prototype.controlText_="Seek to live, currently playing live",bt.registerComponent("SeekToLive",zi);var Gi=Object.freeze({__proto__:null,clamp:Wi}),Xi=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).handleMouseDown_=function(e){return i.handleMouseDown(e)},i.handleMouseUp_=function(e){return i.handleMouseUp(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleMouseMove_=function(e){return i.handleMouseMove(e)},i.update_=function(e){return i.update(e)},i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}return _inherits(t,e),_createClass(t,[{key:"enabled",value:function(){return this.enabled_}},{key:"enabled_=!0)}},{key:"disabled_=!1}}},{key:"createEl",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.className=n.className+" vjs-slider",n=Object.assign({tabIndex:0},n),i=Object.assign({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100},i),_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,e,n,i)}},{key:"handleMouseDove(e,!0)}},{key:"handleMouseMove",value:function(e){}},{key:"handleMouseupdate()}},{key:"upda"}))),t}}},{key:"getProgreixed(4))}},{key:"calculateDistan?t.y:t.x}},{key:"handleKeyDown",value:function(e){_t.isEventKey(e,"Left")||_t.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):_t.isEventKey(e,"Right")||_t.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):_get(_getPrototypeOf(t.prototype),"handleKeyDown",this).call(this,e)}},{key:"handleClick",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"verticzontal")}}]),t}(bt);bt.registerComponent("Slider",Xd(2)+"%"},Yi=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).partEls_=[],i.on(e,"progress",(function(e){return i.update(e)})),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){var e=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-load-progress"}),n=J("span",{className:"vjs-control-text"}),i=J("span",{textContent:this.localize("Loaded")}),r=document.createTextNode(": ");return this.percentageEl_=J("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(n),n.appendChild(i),n.appendChild(r),n.appendChild(this.percentageEl_),e}},{key:"dispose",value:function(){this.partEls_=null,this.percentageEl_=null,_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"updaength}))}}]),t}(bt);bt.registerComponent("LoadProgressBar",Yi);var Qi=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).update=$e(Qe(_assertThisInitialized(i),i.update),Ye),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){return _get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})}},{key:"update",value:function(e,t,n){var i=pe(this.el_),r=he(this.player_.el()),a=e.width*t;if(r&&i){var s=e.left-r.left+a,o=e.width-a+(r.right-e.right),l=i.width/2;s<l?l+=l-s:o<l&&(l=o),l<0?l=0:l>i.width&&(l=i.width),l=Math.round(l),this.el_.style.right="-".concat(l,"px"),this.write(n)}}},{key:"write",value:function(e){Z(this.el_,e)}},{key:"updateTi&&i()}))}}]),t}(bt);bt.registerComponent("TimeTooltip",Qi);var $i=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).setIcon("circle"),i.update=$e(Qe(_assertThisInitialized(i),i.update),Ye),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){return _get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})}},{key:"upda(e,t,i)}}}]),t}(bt);$i.prototype.options_={children:[]},z||I||$i.prototype.options_.children.push("timeTooltip"),bt.registerComponent("PlayProgressBar",$i);var Ji=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).update=$e(Qe(_assertThisInitialized(i),i.update),Ye),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){return _get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-mouse-display"})}},{key:"update",value:function(e,t){var n=this,i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,(function(){n.el_.style.left="".concat(e.width*t,"px")}))}}]),t}(bt);Ji.prototype.options_={children:["timeTooltip"]},bt.registerComponent("MouseTimeDisplay",Ji);var Zi=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).setEventHandlers_(),i}return _inherits(t,e),_createClass(t,[{key:"setEventHandlerbility_)}},{key:"toggleVisibilitpdate())}},{key:"enableIntervaate,Ye))}},{key:"disableIntervaal=null)}},{key:"createEl",value:function(){return _get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})}},{key:"update",value:function(e){var n=this;if("hidden"!==document.visibilityState){var i=_get(_getPrototypeOf(t.prototype),"update",this).call(this);return this.requestNamedAnimationFrame("SeekBargress())})),i}}},{key:"userSeetTime(e)}},{key:"getCurrentTimntTime()}},{key:"getPercetion(),e}},{key:"handleMouseDown",value:function(e){be(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),_get(_getPrototypeOf(t.prototype),"handleMouseDown",this).call(this,e))}},{key:"handleMouseMove",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(be(e)&&!isNaN(this.player_.duration())){var n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);var i=this.calculateDistance(e),r=this.player_.liveTracker;if(r&&r.isLive()){if(i>=.99)return void r.seekToLiveEdge();var a=r.seekableStart(),s=r.liveCurrentTime();if((n=a+i*r.liveWindow())>=s&&(n=s),n<=a&&(n=a+.1),n===1/0)return}else(n=i*this.player_.duration())===this.player_.duration()&&(n-=.1);this.userSeek_(n)}}},{key:"enable",value:function(){_get(_getPrototypeOf(t.prototype),"enable",this).call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()}},{key:"disable",value:function(){_get(_getPrototypeOf(t.prototype),"disable",this).call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()}},{key:"handleMouseUp",value:function(e){_get(_getPrototypeOf(t.prototype),"handleMouseUp",this).call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Mt(this.player_.play()):this.update_()}},{key:"stepForwaime()+5)}},{key:"stepBaime()-5)}},{key:"handleAction",value:function(e){this.player_.paused()?this.player_.play():this.player_.pause()}},{key:"handleKeyDown",value:function(e){var n=this.player_.liveTracker;if(_t.isEventKey(e,"Space")||_t.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(_t.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(_t.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(_t(e))){e.preventDefault(),e.stopPropagation();var i=10*(_t.codes[_t(e)]-_t.codes[0])/100;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else _t.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):_t.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):_get(_getPrototypeOf(t.prototype),"handleKeyDown",this).call(this,e)}},{key:"dispose",value:function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in document&&"visibilityState"in document&&this.off(document,"visibilitychange",this.toggleVisibility_),_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(Xi);Zi.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},z||I||Zi.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),bt.registerComponent("SeekBar",Zi);var er=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).handleMouseMove=$e(Qe(_assertThisInitialized(i),i.handleMouseMove),Ye),i.throttledHandleMouseSeek=$e(Qe(_assertThisInitialized(i),i.handleMouseSeek),Ye),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.handleMouseDownHandler_=function(e){return i.handleMouseDown(e)},i.enable(),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){return _get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-progress-control vjs-control"})}},{key:"handleMouseMoess())}}}},{key:"handleMouseSeeMove(e)}},{key:"enabled",value:function(){return this.enabled_}},{key:"disabplay())}}},{key:"enabled_=!0)}},{key:"removeListenersAddedOnMousedownAndTouchstaandler_)}},{key:"handleMouseDoandler_)}},{key:"handleMousehstart()}}]),t}(bt);er.prototype.options_={children:["seekBar"]},bt.registerComponent("ProgressControl",er);var tr=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).setIcon("picture-in-picture-enter"),i.on(e,["enterpictureinpicture","leavepictureinpicture"],(function(e){return i.handlePictureInPictureChange(e)})),i.on(e,["disablepictureinpicturechanged","loadedmetadata"],(function(e){return i.handlePictureInPictureEnabledChange(e)})),i.on(e,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(function(){return i.handlePictureInPictureAudioModeChange()})),i.disable(),i}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-picture-in-picture-control vjs-hidden ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"handlePictureInPictureAudioModeChans.show()}},{key:"handlePictureInPictureEnabledChanisable()}},{key:"handlePictureInPictureChanChange()}},{key:"handleClick",value:function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()}},{key:"show",value:function(){"function"==typeof document.exitPictureInPicture&&_get(_getPrototypeOf(t.prototype),"show",this).call(this)}}]),t}(Ri);tr.prototype.controlText_="Picture-in-Picture",bt.registerComponent("PictureInPictureToggle",tr);var nr=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).setIcon("fullscreen-enter"),i.on(e,"fullscreenchange",(function(e){return i.handleFullscreenChange(e)})),!1===document[e.fsApi_.fullscreenEnabled]&&i.disable(),i}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-fullscreen-control ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"handleFullscreenChanenter"))}},{key:"handleCliscreen()}}]),t}(Ri);nr.prototype.controlText_="Fullscreen",bt.registerComponent("FullscreenToggle",nr);var ir=function(e){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){var e=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-volume-level"});return this.setIcon("circle",e),e.appendChild(_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"span",{className:"vjs-control-text"})),e}}]),t}(bt);bt.registerComponent("VolumeLevel",ir);var rr=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).update=$e(Qe(_assertThisInitialized(i),i.update),Ye),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){return _get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})}},{key:"update",value:function(e,t,n,i){if(!n){var r=he(this.el_),a=he(this.player_.el()),s=e.width*t;if(!a||!r)return;var o=e.left-a.left+s,l=e.width-s+(a.right-e.right),u=r.width/2;o<u?u+=u-o:l<u&&(u=l),u<0?u=0:u>r.width&&(u=r.width),this.el_.style.right="-".concat(u,"px")}this.write("".concat(i,"%"))}},{key:"write",value:function(e){Z(this.el_,e)}},{key:"updateVolu&&r()}))}}]),t}(bt);bt.registerComponent("VolumeLevelTooltip",rr);var ar=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).update=$e(Qe(_assertThisInitialized(i),i.update),Ye),i}return _inherits(t,e),_createClass(t,[{key:"createsplay"})}},{key:"update",value:function(e,t,n){var i=this,r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,r,(function(){n?i.el_.style.bottom="".concat(e.height*t,"px"):i.el_.style.left="".concat(e.width*t,"px")}))}}]),t}(bt);ar.prototype.options_={children:["volumeLevelTooltip"]},bt.registerComponent("MouseVolumeLevelDisplay",ar);var sr=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).on("slideractive",(function(e){return i.updateLastVolume_(e)})),i.on(e,"volumechange",(function(e){return i.updateARIAAttributes(e)})),e.ready((function(){return i.updateARIAAttributes()})),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){return _get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})}},{key:"handleMouseDown",value:function(e){be(e)&&_get(_getPrototypeOf(t.prototype),"handleMouseDown",this).call(this,e)}},{key:"handleMouseMonce(e)))}},{key:"checkMututed(!1)}},{key:"getPercevolume()}},{key:"stepForwame()+.1)}},{key:"stepBame()-.1)}},{key:"updateARIAAttribut",t+"%")}},{key:"volumeAsPercentagolume())}},{key:"updateLastVolume_(t)}))}}]),t}(Xi);sr.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},z||I||sr.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),sr.prototype.playerEvent="volumechange",bt.registerComponent("VolumeBar",sr);var or=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck2(this,t),i.vertical=i.vertical||!1,(void 0===i.volumeBar||v(i.volumeBar))&&(i.volumeBar=i.volumeBar||{},i.volumeBar.vertical=i.vertical),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(_assertThisInitialized(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,i))),e),n.throttledHandleMouseMove=$e(Qe(_assertThisInitialized(n),n.handleMouseMove),Ye),n.handleMouseUpHandler_=function(e){return n.handleMouseUp(e)},n.on("mousedown",(function(e){return n.handleMouseDown(e)})),n.on("touchstart",(function(e){return n.handleMouseDown(e)})),n.on("mousemove",(function(e){return n.handleMouseMove(e)})),n.on(n.volumeBar,["focus","slideractive"],(function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")})),n.on(n.volumeBar,["blur","sliderinactive")})),n}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-volume-control vjs-control ".concat(e)})}},{key:"handleMouseDown",value:function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)}},{key:"handleMouseandler_)}},{key:"handleMouseMove",value:function(e){this.volumeBar.handleMouseMove(e)}}]),t}(bt);or.prototype.options_={children:["volumeBar"]},bt.registerComponent("VolumeControl",or);var lr=function(e){function t(e,n){var i;return _classCallCheckden")}))}(_assertThisInitialized(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))),e),i.on(e,["loadstart","volumechange"],(function(e){return i.update(e)})),i}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-mute-control ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"handleClimuted())}},{key:"updalText_()}},{key:"updateIcon_",value:function(){var e=this.player_.volume(),t=3;this.setIcon("volume-high"),z&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?(this.setIcon("volume-mute"),t=0):e<.33?(this.setIcon("volume-low"),t=1):e<.67&&(this.setIcon("volume-medium"),t=2),ie(this.el_,[0,1,2,3].reduce((function(e,t){return e+"".concat(t?" ":"","vjs-vol-").concat(t)}),"")),ne(this.el_,"vjs-vol-".concat(t))}},{key:"updateControlTexlText(e)}}]),t}(Ri);lr.prototype.controlText_="Mute",bt.registerComponent("MuteToggle",lr);var ur=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck2(this,t),void 0!==i.inline?i.inline=i.inline:i.inline=!0,(void 0===i.volumeControl||v(i.volumeControl))&&(i.volumeControl=i.volumeControl||{},i.volumeControl.vertical=!i.inline),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,i))).handleKeyPressHandler_=function(e){return n.handleKeyPress(e)},n.on(e,["loadstart"],(function(e){return n.volumePanelState_(e)})),n.on(n.muteToggle,"keyup",(function(e){return n.handleKeyPress(e)})),n.on(n.volumeControl,"keyup",(function(e){return n.handleVolumeControlKeyUp(e)})),n.on("keydown",(function(e){return n.handleKeyPress(e)})),n.on("mouseover",(function(e){return n.handleMouseOver(e)})),n.on("mouseout",(function(e){return n.handleMouseOut(e)})),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}return _inherits(t,e),_createClass(t,[{key:"sliderActive_",value:function(){this.addClass("vjs-slider-active")}},{key:"sliderInactive_",value:function(){this.removeClass("vjs-slider-active")}},{key:"volumePanelState-only")}},{key:"createEl",value:function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-volume-panel vjs-control ".concat(e)})}},{key:"dispose",value:function(){this.handleMouseOut(),_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"handleVolumeControlKey.focus()}},{key:"handleMouseOver",value:function(e){this.addClass("vjs-hover"),Ve(document,"keyup",this.handleKeyPressHandler_)}},{key:"handleMouseOut",value:function(e){this.removeClass("vjs-hover"),He(document,"keyup",this.handleKeyPressHandler_)}},{key:"handleKeyPreuseOut()}}]),t}(bt);ur.prototype.options_={children:["muteToggle","volumeControl"]},bt.registerComponent("VolumePanel",ur);var cr=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).validOptions=[5,10,30],i.skipTime=i.getSkipForwardTime(),i.skipTime&&i.validOptions.includes(i.skipTime)?(i.setIcon("forward-".concat(i.skipTime)),i.controlText(i.localize("Skip forward {1} seconds",[i.skipTime])),i.show()):i.hide(),i}return _inherits(t,e),_createClass(t,[{key:"getSkipForwardTime",value:function(){var e=this.options_.playerOptions;return e.controlBar&&e.controlBar.skipButtons&&e.controlBar.skipButtons.forward}},{key:"buildCSSClass",value:function(){return"vjs-skip-forward-".concat(this.getSkipForwardTime()," ").concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(e){if(!isNaN(this.player_.duration())){var t,n=this.player_.currentTime(),i=this.player_.liveTracker,r=i&&i.isLive()?i.seekableEnd():this.player_.duration();t=n+this.skipTime<=r?n+this.skipTime:r,this.player_.currentTime(t)}}},{key:"handleLanguagechange",value:function(){this.controlText(this.localize("Skip forward {1} seconds",[this.skipTime]))}}]),t}(Ri);bt.registerComponent("SkipForward",cr);var dr=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).validOptions=[5,10,30],i.skipTime=i.getSkipBackwardTime(),i.skipTime&&i.validOptions.includes(i.skipTime)?(i.setIcon("replay-".concat(i.skipTime)),i.controlText(i.localize("Skip backward {1} seconds",[i.skipTime])),i.show()):i.hide(),i}return _inherits(t,e),_createClass(t,[{key:"getSkipBackwardTibackward}},{key:"buildCSSClass",value:function(){return"vjs-skip-backward-".concat(this.getSkipBackwardTime()," ").concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"handleClick",value:function(e){var t,n=this.player_.currentTime(),i=this.player_.liveTracker,r=i&&i.isLive()&&i.seekableStart();t=r&&n-this.skipTime<=r?r:n>=this.skipTime?n-this.skipTime:0,this.player_.currentTime(t)}},{key:"handleLanguagechanpTime]))}}]),t}(Ri);dr.prototype.controlText_="Skip Backward",bt.registerComponent("SkipBackward",dr);var hr=function(e){function t(e,n){var i;return _classCallCheck2(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n)),n&&(i.menuButton_=n.menuButton),i.focusedChild_=-1,i.on("keydown",(function(e){return i.handleKeyDown(e)})),i.boundHandleBlur_=function(e){return i.handleBlur(e)},i.boundHandleTapClick_=function(e){return i.handleTapClick(e)},i}return _inherits(t,e),_createClass(t,[{key:"addEventListenerForItem",value:function(e){e instanceof bt&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))}},{key:"removeEventListenerForItClick_))}},{key:"removeChild",value:function(e){"string"==typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),_get(_getPrototypeOf(t.prototype),"removeChild",this).call(this,e)}},{key:"addItrItem(t)}},{key:"createEl",value:function(){var e=this.options_.contentElType||"ul";this.contentEl_=J(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),Ve(ngation()})),n}},{key:"dispose",value:function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"handleBlutton()}}},{key:"handleTapClifocus()}}},{key:"handleKeyDopBack())}},{key:"stepForwafocus(e)}},{key:"stepBafocus(e)}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())}}]),t}(bt);bt.registerComponent("Menu",hr);var pr=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck2(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,i))).menuButton_=new Ri(e,i),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var r=Ri.prototype.buildCSSClass();n.menuButton_.el_.className=n.buildCSSClass()+" "+r,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0;var a=function(e){return n.handleClick(e)};return n.handleMenuKeyUp_=function(e){return n.handleMenuKeyUp(e)},n.on(n.menuButton_,"tap",a),n.on(n.menuButton_,"click",a),n.on(n.menuButton_,"keydown",(function(e){return n.handleKeyDown(e)})),n.on(n.menuButton_,"mouuKeyUp_)})),n.on("mouseleave",(function(e){return n.handleMouseLeave(e)})),n.on("keydown",(function(e){return n.handleSubmenuKeyDown(e)})),n}return _inherits(t,e),_createClass(t,[{key:"upda"menu"))}},{key:"createMereturn e}},{key:"createItems",value:function(){}},{key:"createEl",value:function(){return _get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:this.buildWrapperCSSClass()},{})}},{key:"setIcon",value:function(e){_get(_getPrototypeOf(t.prototype),"setIcon",this).call(this,e,this.menuButton_.el_)}},{key:"buildWrapperCSSClass",value:function(){var e="vjs-menu-button";!0===this.options_.inline?e+="-inline":e+="-popup";var n=Ri.prototype.buildCSSClass();return"vjs-menu-button ".concat(e," ").concat(n," ").concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"buildCSSClass",value:function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button ".concat(e," ").concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"controlTeext(e,t)}},{key:"dispoll(this)}},{key:"handleCliButton()}},{key:"handleMouseLeauKeyUp_)}},{key:"focus",value:function(){this.menuButton_.focus()}},{key:"blur",value:function(){this.menuButton_.blur()}},{key:"handleKeyDotton()))}},{key:"handleMenuKey-hover")}},{key:"handleSubmenuKeyPress",value:function(e){this.handleSubmenuKeyDown(e)}},{key:"handleSubmenuKeyDoocus()))}},{key:"pressButtfocus()}}},{key:"unpressButtfalse"))}},{key:"disabisable()}},{key:"enabenable()}}]),t}(bt);bt.registerComponent("MenuButton",pr);var fr=function(e){function t(e,n){var i;_classCallCheck2(this,t);var r=n.tracks;if((i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).items.length<=1&&i.hide(),!r)return _possibleConstructorReturn(i);var a=Qe(_assertThisInitialized(i),i.update);return r.addEventListener("removetrack",a),r.addEventListener("addtrack",a),r.addEventListener("labelchange",a),i.player_.on("ready",a),i.player_.on("ange",a)})),i}return _inherits(t,e),t}(pr);bt.registerComponent("TrackButton",fr);var gr=["Tab","Esc","Up","Down","Right","Left"],mr=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).selectable=n.selectable,i.isSelected_=n.selected||!1,i.multiSelectable=n.multiSelectable,i.selected(i.isSelected_),i.selectable?i.multiSelectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitemradio"):i.el_.setAttribute("role","menuitem"),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(e,n,i){this.nonIconControl=!0;var r=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"li",Object.assign({className:"vjs-menu-item",tabIndex:-1},n),i),a=J("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)});return this.player_.options_.experimentalSvgIcons?r.appendChild(a):r.replaceChild(a,r.querySelector(".vjs-icon-placeholder")),r}},{key:"handleKeyDown",value:function(e)Key(e,t)}))||_get(_getPrototypeOf(t.prototype),"handleKeyDown",this).call(this,e)}},{key:"handleClick",value:function(e){this.selected(!0)}},{key:"selected_=!1))}}]),t}(wi);bt.registerComponent("MenuItem",mr);var yr=function(e){function t(e,n){var i;_classCallCheck2(this,t);var r=n.track,a=e.textTracks();n.label=r.label||r.language||"Unknown",n.selected="showing"===r.mode,(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).track=r,i.kinds=(n.kinds||[n.kind||i.track.kind]).filter(Boolean);var s,o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(_assertThisInitialized(i),t)},l=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleSelectedLanguageChange.apply(_assertThisInitialized(i),t)};(e.on(["loadstart","texttrackchange"],o),a.addEventListener("change",o),a.addEventListener("selectedlanguagechange",l),i.on("ange",l)})),void 0===a.onchange)&&i.on(["tap",Event(s)}));return i.handleTracksChange(),i}return _inherits(t,e),_createClass(t,[{key:"handleClick",value:function(e){var n=this.track,i=this.player_.textTracks();if(_get(_getPrototypeOf(t.prototype),"handleClick",this).call(this,e),i)for(var r=0;r<i.length;r++){var a=i[r];-1!==this.kinds.indexOf(a.kind)&&(a===n?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}}},{key:"handleTracksChanected(t)}},{key:"handleSelectedLanguageChank.kind}}}},{key:"dispose",value:function(){this.track=null,_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(mr);bt.registerComponent("TextTrackMenuItem",yr);var vr=function(e){function t(e,n){return _classCallCheck2(this,t),n.track={player:e,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))}return _inherits(t,e),_createClass(t,[{key:"handleTracksChanected(n)}},{key:"handleSelectedLanguageChanled:!1})}},{key:"handleLanguagechange",value:function(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.label),_get(_getPrototypeOf(t.prototype),"handleLanguagechange",this).call(this)}}]),t}(yr);bt.registerComponent("OffTextTrackMenuItem",vr);var _r=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck2(this,t),n.tracks=e.textTracks(),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))}return _inherits(t,e),_createClass(t,[{key:"createItems",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:yr;this.label_&&(e="".concat(this.label_," off")),t.push(new vr(this.player_,{kinds:this.kinds_,kind:this.kind_,label:e})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var a=i[r];if(this.kinds_.indexOf(a.kind)>-1){var s=new n(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});s.addClass("vjs-".concat(a.kind,"-menu-item")),t.push(s)}}return t}}]),t}(fr);bt.registerComponent("TextTrackButton",_r);var br=function(e){function t(e,n){var i;_classCallCheck2(this,t);var r=n.track,a=n.cue,s=e.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=a.text,n.selected=a.startTime<=s&&s<a.endTime,(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).track=r,i.cue=a,i}return _inherits(t,e),_createClass(t,[{key:"handleClick",value:function(e){_get(_getPrototypeOf(t.prototype),"handleClick",this).call(this),this.player_.currentTime(this.cue.startTime)}}]),t}(mr);bt.registerComponent("ChaptersTrackMenuItem",br);var Tr=function(e){function t(e,n,i){var r;return _classCallCheck2(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,i))).setIcon("chapters"),r.selectCur.cue)}))},r}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-chapters-button ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-chapters-button ".concat(_get(_getPrototypeOf(t.prototype),"buildWrapperCSSClass",this).call(this))}},{key:"update",value:function(e){if(!e||!e.track||"chapters"===e.track.kind){var n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),_get(_getPrototypeOf(t.prototype),"update",this).call(this)):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&_get(_getPrototypeOf(t.prototype),"update",this).call(this)}}},{key:"setTraItem_)}}}},{key:"findChaptersTraeturn n}}},{key:"getMenuCapti.kind_))}},{key:"createMenu",value:function(){return this.options_.title=this.getMenuCaption(),_get(_getPrototypeOf(t.prototype),"createMenu",this).call(this)}},{key:"createItereturn e}}]),t}(_r);Tr.prototype.kind_="chapters",Tr.prototype.controlText_="Chapters",bt.registerComponent("ChaptersButton",Tr);var kr=function(e){function t(e,n,i){var r;_classCallCheck2(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,i))).setIcon("audio-description");var a=e.textTracks(),s=Qe(_assertThisInitialized(r),r.handleTracksChange);return a.addEventListener("change",s),r.on("dispose",(function(){a.removeEventListener("change",s)})),r}return _inherits(t,e),_createClass(t,[{key:"handleTracksChanenable()}},{key:"buildCSSClass",value:function(){return"vjs-descriptions-button ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-descriptions-button ".concat(_get(_getPrototypeOf(t.prototype),"buildWrapperCSSClass",this).call(this))}}]),t}(_r);kr.prototype.kind_="descriptions",kr.prototype.controlText_="Descriptions",bt.registerComponent("DescriptionsButton",kr);var Sr=function(e){function t(e,n,i){var r;return _classCallCheck2(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,i))).setIcon("subtitles"),r}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-subtitles-button ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-subtitles-button ".concat(_get(_getPrototypeOf(t.prototype),"buildWrapperCSSClass",this).call(this))}}]),t}(_r);Sr.prototype.kind_="subtitles",Sr.prototype.controlText_="Subtitles",bt.registerComponent("SubtitlesButton",Sr);var wr=function(e){function t(e,n){var i;return _classCallCheck2(this,t),n.track={player:e,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).addClass("vjs-texttrack-settings"),i.controlText(", opens "+n.kind+" settings dialog"),i}return _inherits(t,e),_createClass(t,[{key:"handleCli).open()}},{key:"handleLanguagechange",value:function(){this.$(".vjs-menu-item-text").textContent=this.player_.localize(this.options_.kind+" settings"),_get(_getPrototypeOf(t.prototype),"handleLanguagechange",this).call(this)}}]),t}(yr);bt.registerComponent("CaptionSettingsMenuItem",wr);var Cr=function(e){function t(e,n,i){var r;return _classCallCheck2(this,t),(r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n,i))).setIcon("captions"),r}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-captions-button ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-captions-button ".concat(_get(_getPrototypeOf(t.prototype),"buildWrapperCSSClass",this).call(this))}},{key:"createItems",value:function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new wr(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),_get(_getPrototypeOf(t.prototype),"createItems",this).call(this,e)}}]),t}(_r);Cr.prototype.kind_="captions",Cr.prototype.controlText_="Captions",bt.registerComponent("CaptionsButton",Cr);var Er=function(e){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(e,n,i){var r=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,e,n,i),a=r.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(this.player_.options_.experimentalSvgIcons?this.setIcon("captions",r):a.appendChild(J("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(J("span",{className:"vjs-control-text",textContent:" ".concat(this.localize("Captions"))}))),r}}]),t}(yr);bt.registerComponent("SubsCapsMenuItem",Er);var Ar=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck2(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,i))).label_="subtitles",n.setIcon("subtitles"),["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions",n.setIcon("captions")),n.menuButton_.controlText(ft(n.label_)),n}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-subs-caps-button ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-subs-caps-button ".concat(_get(_getPrototypeOf(t.prototype),"buildWrapperCSSClass",this).call(this))}},{key:"createItems",value:function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new wr(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=_get(_getPrototypeOf(t.prototype),"createItems",this).call(this,e,Er)}}]),t}(_r);Ar.prototype.kinds_=["captions","subtitles"],Ar.prototype.controlText_="Subtitles",bt.registerComponent("SubsCapsButton",Ar);var Pr=function(e){function t(e,n){var i;_classCallCheck2(this,t);var r=n.track,a=e.audioTracks();n.label=r.label||r.language||"Unknown",n.selected=r.enabled,(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).track=r,i.addClass("vjs-".concat(r.kind,"-menu-itemed(i),t)};return a.addEventListener("change",s),i.on("dispose",(function(){a.removeEventListener("change",s)})),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(e,n,i){var r=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,e,n,i),a=r.querySelector(".vjs-menu-item-text");return["main-desc","description"].indexOf(this.options_.track.kind)>=0&&(a.appendChild(J("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(J("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r}},{key:"handleClick",value:function(e){if(_get(_getPrototypeOf(t.prototype),"handleClick",this).call(this,e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var n=this.player_.audioTracks(),i=0;i<n.length;i++){var r=n[i];r!==this.track&&(r.enabled=r===this.track)}}},{key:"handleTracksChanenabled)}}]),t}(mr);bt.registerComponent("AudioTrackMenuItem",Pr);var Ir=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck2(this,t),i.tracks=e.audioTracks(),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,i))).setIcon("audio"),n}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-audio-button ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-audio-button ".concat(_get(_getPrototypeOf(t.prototype),"buildWrapperCSSClass",this).call(this))}},{key:"createItereturn e}}]),t}(fr);Ir.prototype.controlText_="Audio Track",bt.registerComponent("AudioTrackButton",Ir);var xr=function(e){function t(e,n){var i;_classCallCheck2(this,t);var r=n.rate,a=parseFloat(r,10);return n.label=r,n.selected=a===e.playbackRate(),n.selectable=!0,n.multiSelectable=!1,(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).label=r,i.rate=a,i.on(e,"ratechange",(function(e){return i.update(e)})),i}return _inherits(t,e),_createClass(t,[{key:"handleClick",value:function(e){_get(_getPrototypeOf(t.prototype),"handleClick",this).call(this),this.player().playbackRate(this.rate)}},{key:"updais.rate)}}]),t}(mr);xr.prototype.contentElType="button",bt.registerComponent("PlaybackRateMenuItem",xr);var Lr=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).menuButton_.el_.setAttribute("aria-describedby",i.labelElId_),i.updateVisibility(),i.updateLabel(),i.on(e,"loadstart",(function(e){return i.updateVisibility(e)})),i.on(e,"ratechange",(function(e){return i.updateLabel(e)})),i.on(e,"playbackrateschange",(function(e){return i.handlePlaybackRateschange(e)})),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){var e=_get(_getPrototypeOf(t.prototype),"createEl",this).call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=J("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e}},{key:"dispose",value:function(){this.labelEl_=null,_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"buildCSSClass",value:function(){return"vjs-playback-rate ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"buildWrapperCSSClass",value:function(){return"vjs-playback-rate ".concat(_get(_getPrototypeOf(t.prototype),"buildWrapperCSSClass",this).call(this))}},{key:"createItereturn t}},{key:"handlePlaybackRateschanupdate()}},{key:"playbackRates()||[]}},{key:"playbackRateSupportlength>0}},{key:"updateVisibilihidden")}},{key:"updateLabe()+"x")}}]),t}(pr);Lr.prototype.controlText_="Playback Rate",bt.registerComponent("PlaybackRateMenuButton",Lr);var Dr=function(e){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-spacer ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"createEl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.className||(n.className=this.buildCSSClass()),_get(_getPrototypeOf(t.prototype),"createEl",this).call(this,e,n,i)}}]),t}(bt);bt.registerComponent("Spacer",Dr);var Or=function(e){function t(){return _classCallCheck2(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"buildCSSClass",value:function(){return"vjs-custom-control-spacer ".concat(_get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this))}},{key:"createEl",value:function(){return _get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:this.buildCSSClass(),textContent:""})}}]),t}(Dr);bt.registerComponent("CustomControlSpacer",Or);var Rr=fguments))}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){return _get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"div",{className:"vjs-control-bar",dir:"ltr"})}}]),t}(bt);Rr.prototype.options_={children:["playToggle","skipBackward","skipForward","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","pictureInPictureToggle","fullscreenToggle"]},bt.registerComponent("ControlBar",Rr);var Mr=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).on(e,"error",(function(e){return i.open(e)})),i}return _inherits(t,e),_createClass(t,[{key:"buildCSSClll(this))}},{key:"contssage):""}}]),t}(Ft);Mr.prototype.options_=Object.assign({},Ft.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),bt.registerComponent("ErrorDisplay",Mr);var Nr="vjs-text-track-settings",Ur=["#000","Black"],Br=["#00F","Blue"],jr=["#0FF","Cyan"],Fr=["#0F0","Green"],qr=["#F0F","Magenta"],Vr=["#F00","Red"],Hr=["#FFF","White"],zr=["#FF0","Yellow"],Wr=["1","Opaque"],Gr=["0.5","Semi-Transparent"],Xr=["0","Transparent"],Kr={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Ur,Hr,Vr,Fr,Br,zr,qr,jr]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Opacity",options:[Wr,Gr,Xr]},color:{selector:".vjs-text-color > select",id:"captions-foreground-color-%s",label:"Color",options:[Hr,Ur,Vr,Fr,Br,zr,qr,jr]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Drop shadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],defaulNumber(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Opacity",options:[Wr,Gr]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Opacity",options:[X)return e}Kr.windowColor.options=Kr.backgroundColor.options;var Qr=function(e){function t(e,n){var i;return _classCallCheck2(this,t),n.temporary=!1,(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).updateDisplay=i.updateDisplay.bind(_assertThisInitialized(i)),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=J("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===n.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",(function(){i.saveSettings(),i.close()})),i.on(i.$(".vjs-default-button"Display(eDisplay)})),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}return _inherits(t,e),_createClass(t,[{key:"dispall(this)}},{key:"createElSelect_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",r=Kr[e],a=r.id.replace("%s",this.id_),s=[n,a].join(" ").trim();return["<".concat(i,' id="').concat(a,'" class="').concat("label"===i?"vjs-label":"",'">'),this.localize(r.label),"</".concat(i,">"),'<select aria-labelledby="'.concat(s,'">')].concat(r.options.map((function(e){var n=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'.concat(n,'" value="').concat(e[0],'" '),'aria-labelledby="'.concat(s," ").concat(n,'">'),t.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")}},{key:"createElFgColor_",value:function(){var e="captions-text-legend-".concat(this.id_);return['<fieldset class="vjs-fg vjs-track-setting">','<legend id="'.concat(e,'">'),this.localize("Text"),"</legend>",'<span class="vjs-text-color">',this.createElSelect_("color",e),"</span>",'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")}},{key:"createElBgColor_",value:function(){var e="captions-background-".concat(this.id_);return['<fieldset class="vjs-bg vjs-track-setting">','<legend id="'.concat(e,'">'),this.localize("Text Background"),"</legend>",'<span class="vjs-bg-color">',this.createElSelect_("backgroundColor",e),"</span>",'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")}},{key:"createElWinCol.join("")}},{key:"createElColooin("")})}},{key:"createElFooin("")})}},{key:"createElControoin("")})}},{key:"conttrols_()]}},{key:"label",value:function(){return this.localize("Caption Settings Dialog")}},{key:"description",value:function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")}},{key:"buildCSSClass",value:function(){return _get(_getPrototypeOf(t.prototype),"buildCSSClass",this).call(this)+" vjs-text-track-settings"}},{key:"getValues",value:function(){var e=this;ret[i]=s),t}),{})}},{key:"setValarser)}))}},{key:"setDefaundex=n}))}},{key:"restoreSettiValues(e)}},{key:"saveSettiwarn(e)}}}},{key:"updateDispDisplay()}},{key:"conditionalBln.focus()}},{key:"handleLanguagechange",value:function(){this.fill()}}]),t}(Ft);bt.registerComponent("TextTrackSettings",Qr);var $r=function(e){function t(e,n){var i;_classCallCheck2(this,t);var r=n.ResizeObserver||window.ResizeObserver;null===n.ResizeObserver&&(r=!1);var a=_({createEl:!r,reportTouchActivity:!1},n);return(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,a))).ResizeObserver=n.ResizeObserver||window.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHaHandler()}),100,!1,_assertThisInitialized(i)),r?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(e.el())):(i.loasize",e)}},i.one("load",i.loadListener_)),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){return _get(_getPrototypeOf(t.prototype),"createEl",this).call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})}},{key:"resizeHandrresize")}},{key:"dispose",value:function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(bt);bt.registerComponent("ResizeManager",$r);var Jr={trackingThreshold:20,liveTolerance:15},Zr=function(e){function t(e,n){var i;_classCallCheck2(this,t);var r=_(Jr,n,{createEl:!1});return(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,r))).trackLiveHandler_=function(){return i.trackLive_()},i.handlePlay_=function(e){return i.handlePlay(e)},i.handleFirstTimeupdate_=function(e){return i.handleFirstTimeupdate(e)},i.handleSeeked_=function(e){return i.handleSeeked(e)},i.seekToLiveEdge_=function(e){return i.seekToLiveEdge(e)},i.reset_(),i.on(i.player_,"durationchange",(function(e){return i.handleDurationchange(e)})),i.on(i.player_,racking()})),i}return _inherits(t,e),_createClass(t,[{key:"trackLihange"))}}},{key:"handleDurationcharacking()}},{key:"toggleTrackacking())}},{key:"startTrackpdate_)))}},{key:"handleFirstTimeupdeSeeked_)}},{key:"handleSeeckLive_()}},{key:"handlePiveEdge_)}},{key:"resiveEdge_)}},{key:"nextSeekedFromUser",value:function(){this.nextSeekedFromUser_=!0}},{key:"stopTrackchange"))}},{key:"seekableth-1]:1/0}},{key:"seekableStrt()[0]:0}},{key:"liveWinleStart()}},{key:"isLracking()}},{key:"atLiveEiveEdge()}},{key:"liveCurrentTableEnd()}},{key:"pastSeektSeekEnd_}},{key:"behindLiveEdge",value:function(){return this.behindLiveEdge_}},{key:"isTrackInterval_}},{key:"seekToLiveEtTime()))}},{key:"dispose",value:function(){this.stopTracking(),_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}}]),t}(bt);bt.registerComponent("LiveTracker",Zr);var ea=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n))).on("statechanged",(function(e){return i.updateDom_()})),i.updateDom_(),i}return _inherits(t,e),_createClass(t,[{key:"createEl",value:function(){return this.els={title:J("div",{className:"vjs-title-bar-title",id:"vjs-title-bar-title-".concat(Ne())}),description:J("div",{className:"vjs-title-bar-description",id:"vjs-title-bar-description-".concat(Ne())})},J("div",{className:"vjs-title-bar"},{},b(this.els))}},{key:"updateDom_",value:function(){var e=this,t=this.player_.tech_,n=t&&t.el_,i={title:"aria-labelledby",description:"aria-describedby"};["title","description"].forEach((function(t){var r=e.state[t],a=e.els[t],s=i[t];me(a),r&&Z(a,r),n&&(n.removeAttribute(s),r&&n.setAttribute(s,a.id))})),this.state.title||this.state.description?this.show():this.hide()}},{key:"update",value:function(e){this.setState(e)}},{key:"dispose",value:function(){var e=this.player_.tech_,n=e&&e.el_;n&&(n.removeAttribute("aria-labelledby"),n.removeAttribute("aria-describedby")),_get(_getPrototypeOf(t.prototype),"dispose",this).call(this),this.els=null}}]),t}(bt);bt.registerComponent("TitleBar",et(r),!0)},na=Object.defineProperty({},"innerinneinnerableWatch_)}},aa=Object.defineProperty({},src"src",tch_()}}}},oa=function(e){function t(e,n){var i;_classCallCheck2(this,t),i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,n));var r=e.source,a=!1;if(i.featuresVideoFrameCallback=i.featuresVideoFrameCallback&&"VIDEO"===i.el_.tagName,r&&(i.el_.currentSrc!==r.src||e.tag&&3===e.tag.initNetworkState_)?i.setSource(r):i.handleLateInit_(i.el_),e.enableSourceset&&i.setupSourcesetHandling_(),i.isScrubbing_=!1,i.el_.hasChildNodes()){for(var s=i.el_.childNodes,o=s.length,l=[];o--;){var u=s[o];"track"===u.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(u),i.remoteTextTracks().addTrack(u.track),i.textTracks().addTrack(u.track),a||i.el_.hasAttribute("crossorigin")||!sn(u.src)||(a=!0)):l.push(u))}for(var c=0;c<l.length;c++)i.el_.removeChild(l[c])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&a&&d.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(q||F)&&!0===e.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}return _inherits(t,e),_createClass(t,[{key:"dispose",value:function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,_get(_getPrototypeOf(t.prototype),"dispose",this).call(this)}},{key:"setupSourcesetHandli{sa(this)}},{key:"restoreMetadataTracksInIOSNativePlayge",i)}))}},{key:"overrideNative_",value:function(e,t){var n=this;if(t===this["featuresNative".concat(e,"Tracks")]){var i=e.toLowerCase();this["".concat(i,"TracksListeners_")]&&Object.keys(this["".concat(i,"TracksListeners_")]).forEach((function(e){n.el()["".concat(i,"Tracks")].removeEventListener(e,n["".concat(i,"TracksListeners_")][e])})),this["featuresNative".concat(e,"Tracks")]=!t,this["".concat(i,"TracksListeners_")]=null,this.proxyNativeTracksForType_(i)}}},{key:"overrideNativeAudioTracks",value:function(e){this.overrideNative_("Audio",e)}},{key:"overrideNativeVideoTracks",value:function(e){this.overrideNative_("Video",e)}},{key:"proxyNativeTracksForType_",value:function(e){var t=this,n=En[e],i=this.el()[n.getterName],r=this[n.getterName]();if(this["featuresNative".concat(n.capitalName,"Tracks")]&&i&&i.addEventListener){varrigger(i)},addtrack:function(e){r.addTrack(e.track)},r(e..shift())};this[n.getterName+"Listeners_"]=a,Object.keys(ar(e,n)}))})),this.on("loadstart",s),this.on(start",s)}))}}},{key:"proxyNativeTracpe_(t)}))}},{key:"createEl",value:function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=document.createElement("video");var i=_({},this.options_.tag&&se(this.options_.tag));q&&!0===this.options_.nativeControlsForTouch||delete i.controls,ae(e,Object.assign(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&le(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var r=["loop","muted","playsinline","autoplay"],a=0;a<r.length;a++){var s=r[a],o=this.options_[s];void 0!==o&&(o?le(e,s,s):ue(e,s),e[s]=o)}return e}},{key:"handleLateInthis)}))}}},{key:"setScrubbing",value:function(e){this.isScrubbing_=e}},{key:"scrubbing",value:function(){return this.isScrubbing_}},{key:"setCurrentTeo.js)")}}},{key:"durattion||NaN}},{key:"width",value:function(){return this.el_.offsetWidth}},{key:"height",value:function(){return this.el_.offsetHeight}},{key:"proxyWebkitFullscren",t)}))}}},{key:"supportsFullScrullScreen}},{key:"enterFullScrrror",e)}}},{key:"exitFullScrscreen"))}},{key:"requestPictureInPicture",value:function(){return this.el_.requestPictureInPicture()}},{key:"requestVideoFrameCallback",value:function(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):_get(_getPrototypeOf(t.prototype),"requestVideoFrameCallback",this).call(this,e)}},{key:"cancelVideoFrameCallback",value:function(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):_get(_getPrototypeOf(t.prototype),"cancelVideoFrameCallback",this).call(this,e)}},{key:"setSrc(e)}},{key:"rethis.el_)}},{key:"currenturrentSrc}},{key:"setContrtrols=!!e}},{key:"addTextTrack",value:function(e,n,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,i):_get(_getPrototypeOf(t.prototype),"addTextTrack",this).call(this,e,n,i)}},{key:"createRemoteTextTrack",value:function(e){if(!this.featuresNativeTextTracks)return _get(_getPrototypeOf(t.prototype),"createRemoteTextTrack",this).call(this,e);var n=document.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n}},{key:"addRemoteTextTrack",value:function(e,n){var i=_get(_getPrototypeOf(t.prototype),"addRemoteTextTrack",this).call(this,e,n);return this.featuresNativeTextTracks&&this.el().appendChild(i),i}},{key:"removeRemoteTextTrack",value:function(e){if(_get(_getPrototypeOf(t.prototype),"removeRemoteTextTrack",this).call(this,e),this.featuresNativeTextTracks)for(var n=this.$$("track"),i=n.length;i--;)e!==n[i]&&e!==n[i].track||this.el().removeChild(n[i])}},{key:"getVideoPlaybackQual.now()),e}}]),t}(li);T(oa,"ild(t),e}})),oa.iPlayType)},oa.canPlayType=function(e){return oa.TEST_VID.canPlayType(e)},oa.canPlaySource=function(e,t){return oa.canPlayType(e.type)},oa.canConreturn!1}},oa.canreturn!1}},oa.canControlPlreturn!1}},oa.canOverride}return!0},oa.supportsNativen W||z&&O},oa.supportsNativeVideoTracks=function(){return!(!oa.TEST_VID||!oa.TEST_VID.videoTracks)},oa.supportsNativeAioTracks)},oa.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=_slicedToArray(e,2),n=t[0],i=t[1];T(oa.prototype,n,(function(){return oa[i]()}),!0)})),oa.prototype.featuresVolumeControl=oa.canControlVolume(),oa.prototype.movingMediaElementInDOM=!z,oa.prototype.featuresFullscreenResize=!0,oa.prototype.featuresProgressEvents=!0,oa.prototype.featuresTimeupdateEvents=!0,oa.prototype.featuresVideoFrameCallback=!(!oa.TEST_VID||!oa.TEST_VID.requestVideoFrameCallback),oa.disposeMe(e){}}()}},oa.resetMe(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"ibute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"ibute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"s.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"el_[e]=t}})),["pause","load","play"el_[e]()}})),li.withSourceHandlers(oa),oa.nativeSourceHandler={},oa.nativeSourceHandler.creturn""}},oa.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return oa.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=an(e.src);return oa.nativeSourceHandler.canPlayType("video/".concat(n))}return""},oa.nativeSourceHandler.harc(e.src)},oa.nativeSourceHandler.dispose=function(){},oa.registerSourceHandler(oa.nativeSourceHandler),li.registerTech("Html5",oa);var la=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],ua={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},ca=["tiny","xsmall","small","medium","large","xlarge","huge"],da={};ca.forEach((function(e){var t="x"===e.charAt(0)?"x-".concat(e.substring(1)):e;da[e]="vjs-layout-".concat(t)}));var ha={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},pa=function(e){function n(e,i,r){var s;if(_classCallCheck2(this,n),e.id=e.id||i.id||"vjs_video_".concat(Ne()),(i=Object.assign(n.getTagSettings(e),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language){var o=e.closest("[lang]");o&&(i.language=o.getAttribute("lang"))}if((s=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,null,i,r))).boundDocumentFullscreenChange_=function(e){return s.documentFullscreenChange_(e)},s.boundFullWindowOnEscKey_=function(e){return s.fullWindowOnEscKey(e)},s.boundUpdateStyleEl_=function(e){return s.updateStyleEl_(e)},s.boundApplyInitTime_=function(e){return s.applyInitTime_(e)},s.boundUpdateCurrentBreakpoint_=function(e){return s.updateCurrentBreakpoint_(e)},s.boundHandleTechClick_=function(e){return s.handleTechClick_(e)},s.boundHandleTechDoubleClick_=function(e){return s.handleTechDoubleClick_(e)},s.boundHandleTechTouchStart_=function(e){return s.handleTechTouchStart_(e)},s.boundHandleTechTouchMove_=function(e){return s.handleTechTouchMove_(e)},s.boundHandleTechTouchEnd_=function(e){return s.handleTechTouchEnd_(e)},s.boundHandleTechTap_=function(e){return s.handleTechTap_(e)},s.isFullscreen_=!1,s.log=h(s.id_),s.fsApi_=a,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,s.audioOnlyMode_=!1,s.audioPosterMode_=!1,s.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=e,s.tagAttributes=e&&se(e),s.language(s.options_.language),i.languages){var l={};Object.getOwnPropertyNames(i.languagesguages[e]})),s.languages_=l}else s.languages_=n.prototype.options_.languages;s.resetCache_(),s.poster_=i.poster||"",s.controls_=!!i.controls,e.controls=!1,e.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],e.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach((function(e){if("function"!=typeof s[e])throw new Error('plugin "'.concat(e,'" does not exist'))})),s.scrubbing_=!1,s.el_=s.createEl(),ct(_assertThisInitialized(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(Ve(document,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var u=_(s.options_);if(i.plugins&&Object.keys(i.pluginsugins[e])})),i.debug&&s.debug(!0),s.options_.playerOptions=u,s.middleware_=[],s.playbackRates(i.playbackRates),i.experimentalSvgIcons){var c=(new window.DOMParser).parseFromString('<svg xmlns="http://www.w3.org/2000/svg">\n  <defs>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play">\n      <path d="M16 10v28l22-14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-pause">\n      <path d="M12 38h8V10h-8v28zm16-28v28h8V10h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-audio">\n      <path d="M24 2C14.06 2 6 10.06 6 20v14c0 3.31 2.69 6 6 6h6V24h-8v-4c0-7.73 6.27-14 14-14s14 6.27 14 14v4h-8v16h6c3.31 0 6-2.69 6-6V20c0-9.94-8.06-18-18-18z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-captions">\n      <path d="M38 8H10c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h28c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM22 22h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2zm14 0h-3v-1h-4v6h4v-1h3v2a2 2 0 0 1-2 2h-6a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-subtitles">\n      <path d="M40 8H8c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h32c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zM8 24h8v4H8v-4zm20 12H8v-4h20v4zm12 0h-8v-4h8v4zm0-8H20v-4h20v4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-enter">\n      <path d="M14 28h-4v10h10v-4h-6v-6zm-4-8h4v-6h6v-4H10v10zm24 14h-6v4h10V28h-4v6zm-6-24v4h6v6h4V10H28z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-fullscreen-exit">\n      <path d="M10 32h6v6h4V28H10v4zm6-16h-6v4h10V10h-4v6zm12 22h4v-6h6v-4H28v10zm4-22v-6h-4v10h10v-4h-6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-play-circle">\n      <path d="M20 33l12-9-12-9v18zm4-29C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-mute">\n      <path d="M33 24c0-3.53-2.04-6.58-5-8.05v4.42l4.91 4.91c.06-.42.09-.85.09-1.28zm5 0c0 1.88-.41 3.65-1.08 5.28l3.03 3.03C41.25 29.82 42 27 42 24c0-8.56-5.99-15.72-14-17.54v4.13c5.78 1.72 10 7.07 10 13.41zM8.55 6L6 8.55 15.45 18H6v12h8l10 10V26.55l8.51 8.51c-1.34 1.03-2.85 1.86-4.51 2.36v4.13a17.94 17.94 0 0 0 7.37-3.62L39.45 42 42 39.45l-18-18L8.55 6zM24 8l-4.18 4.18L24 16.36V8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-low">\n      <path d="M14 18v12h8l10 10V8L22 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-medium">\n      <path d="M37 24c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zm-27-6v12h8l10 10V8L18 18h-8z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-volume-high">\n      <path d="M6 18v12h8l10 10V8L14 18H6zm27 6c0-3.53-2.04-6.58-5-8.05v16.11c2.96-1.48 5-4.53 5-8.06zM28 6.46v4.13c5.78 1.72 10 7.07 10 13.41s-4.22 11.69-10 13.41v4.13c8.01-1.82 14-8.97 14-17.54S36.01 8.28 28 6.46z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-spinner">\n      <path d="M18.8 21l9.53-16.51C26.94 4.18 25.49 4 24 4c-4.8 0-9.19 1.69-12.64 4.51l7.33 12.69.11-.2zm24.28-3c-1.84-5.85-6.3-10.52-11.99-12.68L23.77 18h19.31zm.52 2H28.62l.58 1 9.53 16.5C41.99 33.94 44 29.21 44 24c0-1.37-.14-2.71-.4-4zm-26.53 4l-7.8-13.5C6.01 14.06 4 18.79 4 24c0 1.37.14 2.71.4 4h14.98l-2.31-4zM4.92 30c1.84 5.85 6.3 10.52 11.99 12.68L24.23 30H4.92zm22.54 0l-7.8 13.51c1.4.31 2.85.49 4.34.49 4.8 0 9.19-1.69 12.64-4.51L29.31 26.8 27.46 30z"></path>\n    </symbol>\n    <symbol viewBox="0 0 24 24" id="vjs-icon-hd">\n      <path d="M19 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-8 12H9.5v-2h-2v2H6V9h1.5v2.5h2V9H11v6zm2-6h4c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1h-4V9zm1.5 4.5h2v-3h-2v3z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-chapters">\n      <path d="M6 26h4v-4H6v4zm0 8h4v-4H6v4zm0-16h4v-4H6v4zm8 8h28v-4H14v4zm0 8h28v-4H14v4zm0-20v4h28v-4H14z"></path>\n    </symbol>\n    <symbol viewBox="0 0 40 40" id="vjs-icon-downloading">\n      <path d="M18.208 36.875q-3.208-.292-5.979-1.729-2.771-1.438-4.812-3.729-2.042-2.292-3.188-5.229-1.146-2.938-1.146-6.23 0-6.583 4.334-11.416 4.333-4.834 10.833-5.5v3.166q-5.167.75-8.583 4.646Q6.25 14.75 6.25 19.958q0 5.209 3.396 9.104 3.396 3.896 8.562 4.646zM20 28.417L11.542 20l2.083-2.083 4.917 4.916v-11.25h2.916v11.25l4.875-4.916L28.417 20zm1.792 8.458v-3.167q1.833-.25 3.541-.958 1.709-.708 3.167-1.875l2.333 2.292q-1.958 1.583-4.25 2.541-2.291.959-4.791 1.167zm6.791-27.792q-1.541-1.125-3.25-1.854-1.708-.729-3.541-1.021V3.042q2.5.25 4.77 1.208 2.271.958 4.271 2.5zm4.584 21.584l-2.25-2.25q1.166-1.5 1.854-3.209.687-1.708.937-3.541h3.209q-.292 2.5-1.229 4.791-.938 2.292-2.521 4.209zm.541-12.417q-.291-1.833-.958-3.562-.667-1.73-1.833-3.188l2.375-2.208q1.541 1.916 2.458 4.208.917 2.292 1.167 4.75z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download">\n      <path d="M10.8 40.55q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h26.35v-7.7h3.4v7.7q0 1.4-1 2.4t-2.4 1zM24 32.1L13.9 22.05l2.45-2.45 5.95 5.95V7.15h3.4v18.4l5.95-5.95 2.45 2.45z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-done">\n      <path d="M9.8 40.5v-3.45h28.4v3.45zm9.2-9.05L7.4 19.85l2.45-2.35L19 26.65l19.2-19.2 2.4 2.4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-file-download-off">\n      <path d="M4.9 4.75L43.25 43.1 41 45.3l-4.75-4.75q-.05.05-.075.025-.025-.025-.075-.025H10.8q-1.35 0-2.375-1T7.4 37.15v-7.7h3.4v7.7h22.05l-7-7-1.85 1.8L13.9 21.9l1.85-1.85L2.7 7zm26.75 14.7l2.45 2.45-3.75 3.8-2.45-2.5zM25.7 7.15V21.1l-3.4-3.45V7.15z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-share">\n      <path d="M36 32.17c-1.52 0-2.89.59-3.93 1.54L17.82 25.4c.11-.45.18-.92.18-1.4s-.07-.95-.18-1.4l14.1-8.23c1.07 1 2.5 1.62 4.08 1.62 3.31 0 6-2.69 6-6s-2.69-6-6-6-6 2.69-6 6c0 .48.07.95.18 1.4l-14.1 8.23c-1.07-1-2.5-1.62-4.08-1.62-3.31 0-6 2.69-6 6s2.69 6 6 6c1.58 0 3.01-.62 4.08-1.62l14.25 8.31c-.1.42-.16.86-.16 1.31A5.83 5.83 0 1 0 36 32.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cog">\n      <path d="M38.86 25.95c.08-.64.14-1.29.14-1.95s-.06-1.31-.14-1.95l4.23-3.31c.38-.3.49-.84.24-1.28l-4-6.93c-.25-.43-.77-.61-1.22-.43l-4.98 2.01c-1.03-.79-2.16-1.46-3.38-1.97L29 4.84c-.09-.47-.5-.84-1-.84h-8c-.5 0-.91.37-.99.84l-.75 5.3a14.8 14.8 0 0 0-3.38 1.97L9.9 10.1a1 1 0 0 0-1.22.43l-4 6.93c-.25.43-.14.97.24 1.28l4.22 3.31C9.06 22.69 9 23.34 9 24s.06 1.31.14 1.95l-4.22 3.31c-.38.3-.49.84-.24 1.28l4 6.93c.25.43.77.61 1.22.43l4.98-2.01c1.03.79 2.16 1.46 3.38 1.97l.75 5.3c.08.47.49.84.99.84h8c.5 0 .91-.37.99-.84l.75-5.3a14.8 14.8 0 0 0 3.38-1.97l4.98 2.01a1 1 0 0 0 1.22-.43l4-6.93c.25-.43.14-.97-.24-1.28l-4.22-3.31zM24 31c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-square">\n      <path d="M36 8H12c-2.21 0-4 1.79-4 4v24c0 2.21 1.79 4 4 4h24c2.21 0 4-1.79 4-4V12c0-2.21-1.79-4-4-4zm0 28H12V12h24v24z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle">\n      <circle cx="24" cy="24" r="20"></circle>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-outline">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-circle-inner-circle">\n      <path d="M24 4C12.97 4 4 12.97 4 24s8.97 20 20 20 20-8.97 20-20S35.03 4 24 4zm0 36c-8.82 0-16-7.18-16-16S15.18 8 24 8s16 7.18 16 16-7.18 16-16 16zm6-16c0 3.31-2.69 6-6 6s-6-2.69-6-6 2.69-6 6-6 6 2.69 6 6z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cancel">\n      <path d="M24 4C12.95 4 4 12.95 4 24s8.95 20 20 20 20-8.95 20-20S35.05 4 24 4zm10 27.17L31.17 34 24 26.83 16.83 34 14 31.17 21.17 24 14 16.83 16.83 14 24 21.17 31.17 14 34 16.83 26.83 24 34 31.17z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-replay">\n      <path d="M24 10V2L14 12l10 10v-8c6.63 0 12 5.37 12 12s-5.37 12-12 12-12-5.37-12-12H8c0 8.84 7.16 16 16 16s16-7.16 16-16-7.16-16-16-16z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-repeat">\n      <path d="M14 14h20v6l8-8-8-8v6H10v12h4v-8zm20 20H14v-6l-8 8 8 8v-6h24V26h-4v8z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-5">\n      <path d="M17.689 98l-8.697 8.696 8.697 8.697 2.486-2.485-4.32-4.319h1.302c4.93 0 9.071 1.722 12.424 5.165 3.352 3.443 5.029 7.638 5.029 12.584h3.55c0-2.958-.553-5.73-1.658-8.313-1.104-2.583-2.622-4.841-4.555-6.774-1.932-1.932-4.19-3.45-6.773-4.555-2.584-1.104-5.355-1.657-8.313-1.657H15.5l4.615-4.615zm-8.08 21.659v13.861h11.357v5.008H9.609V143h12.7c.834 0 1.55-.298 2.146-.894.596-.597.895-1.31.895-2.145v-7.781c0-.835-.299-1.55-.895-2.147a2.929 2.929 0 0 0-2.147-.894h-8.227v-5.096H25.35v-4.384z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-10">\n      <path d="M42.315 125.63c0-4.997-1.694-9.235-5.08-12.713-3.388-3.479-7.571-5.218-12.552-5.218h-1.315l4.363 4.363-2.51 2.51-8.787-8.786L25.221 97l2.45 2.45-4.662 4.663h1.375c2.988 0 5.788.557 8.397 1.673 2.61 1.116 4.892 2.65 6.844 4.602 1.953 1.953 3.487 4.234 4.602 6.844 1.116 2.61 1.674 5.41 1.674 8.398zM8.183 142v-19.657H3.176V117.8h9.643V142zm13.63 0c-1.156 0-2.127-.393-2.912-1.178-.778-.778-1.168-1.746-1.168-2.902v-16.04c0-1.156.393-2.127 1.178-2.912.779-.779 1.746-1.168 2.902-1.168h7.696c1.156 0 2.126.392 2.911 1.177.779.78 1.168 1.747 1.168 2.903v16.04c0 1.156-.392 2.127-1.177 2.912-.779.779-1.746 1.168-2.902 1.168zm.556-4.636h6.583v-15.02H22.37z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-replay-30">\n      <path d="M26.047 97l-8.733 8.732 8.733 8.733 2.496-2.494-4.336-4.338h1.307c4.95 0 9.108 1.73 12.474 5.187 3.367 3.458 5.051 7.668 5.051 12.635h3.565c0-2.97-.556-5.751-1.665-8.346-1.109-2.594-2.633-4.862-4.574-6.802-1.94-1.941-4.208-3.466-6.803-4.575-2.594-1.109-5.375-1.664-8.345-1.664H23.85l4.634-4.634zM2.555 117.531v4.688h10.297v5.25H5.873v4.687h6.979v5.156H2.555V142H13.36c1.061 0 1.95-.395 2.668-1.186.718-.79 1.076-1.772 1.076-2.94v-16.218c0-1.168-.358-2.149-1.076-2.94-.717-.79-1.607-1.185-2.668-1.185zm22.482.14c-1.149 0-2.11.39-2.885 1.165-.78.78-1.172 1.744-1.172 2.893v15.943c0 1.149.388 2.11 1.163 2.885.78.78 1.745 1.172 2.894 1.172h7.649c1.148 0 2.11-.388 2.884-1.163.78-.78 1.17-1.745 1.17-2.894v-15.943c0-1.15-.386-2.111-1.16-2.885-.78-.78-1.746-1.172-2.894-1.172zm.553 4.518h6.545v14.93H25.59z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-5">\n      <path d="M29.508 97l-2.431 2.43 4.625 4.625h-1.364c-2.965 0-5.742.554-8.332 1.66-2.589 1.107-4.851 2.629-6.788 4.566-1.937 1.937-3.458 4.2-4.565 6.788-1.107 2.59-1.66 5.367-1.66 8.331h3.557c0-4.957 1.68-9.16 5.04-12.611 3.36-3.45 7.51-5.177 12.451-5.177h1.304l-4.326 4.33 2.49 2.49 8.715-8.716zm-9.783 21.61v13.89h11.382v5.018H19.725V142h12.727a2.93 2.93 0 0 0 2.15-.896 2.93 2.93 0 0 0 .896-2.15v-7.798c0-.837-.299-1.554-.896-2.152a2.93 2.93 0 0 0-2.15-.896h-8.245V123h11.29v-4.392z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-10">\n      <path d="M23.119 97l-2.386 2.383 4.538 4.538h-1.339c-2.908 0-5.633.543-8.173 1.63-2.54 1.085-4.76 2.577-6.66 4.478-1.9 1.9-3.392 4.12-4.478 6.66-1.085 2.54-1.629 5.264-1.629 8.172h3.49c0-4.863 1.648-8.986 4.944-12.372 3.297-3.385 7.368-5.078 12.216-5.078h1.279l-4.245 4.247 2.443 2.442 8.55-8.55zm-9.52 21.45v4.42h4.871V142h4.513v-23.55zm18.136 0c-1.125 0-2.066.377-2.824 1.135-.764.764-1.148 1.709-1.148 2.834v15.612c0 1.124.38 2.066 1.139 2.824.764.764 1.708 1.145 2.833 1.145h7.489c1.125 0 2.066-.378 2.824-1.136.764-.764 1.145-1.709 1.145-2.833v-15.612c0-1.125-.378-2.067-1.136-2.825-.764-.764-1.708-1.145-2.833-1.145zm.54 4.42h6.408v14.617h-6.407z"></path>\n    </symbol>\n    <symbol viewBox="0 96 48 48" id="vjs-icon-forward-30">\n      <path d="M25.549 97l-2.437 2.434 4.634 4.635H26.38c-2.97 0-5.753.555-8.347 1.664-2.594 1.109-4.861 2.633-6.802 4.574-1.94 1.94-3.465 4.207-4.574 6.802-1.109 2.594-1.664 5.377-1.664 8.347h3.565c0-4.967 1.683-9.178 5.05-12.636 3.366-3.458 7.525-5.187 12.475-5.187h1.307l-4.335 4.338 2.495 2.494 8.732-8.732zm-11.553 20.53v4.689h10.297v5.249h-6.978v4.688h6.978v5.156H13.996V142h10.808c1.06 0 1.948-.395 2.666-1.186.718-.79 1.077-1.771 1.077-2.94v-16.217c0-1.169-.36-2.15-1.077-2.94-.718-.79-1.605-1.186-2.666-1.186zm21.174.168c-1.149 0-2.11.389-2.884 1.163-.78.78-1.172 1.745-1.172 2.894v15.942c0 1.15.388 2.11 1.162 2.885.78.78 1.745 1.17 2.894 1.17h7.649c1.149 0 2.11-.386 2.885-1.16.78-.78 1.17-1.746 1.17-2.895v-15.942c0-1.15-.387-2.11-1.161-2.885-.78-.78-1.745-1.172-2.894-1.172zm.552 4.516h6.542v14.931h-6.542z"></path>\n    </symbol>\n    <symbol viewBox="0 0 512 512" id="vjs-icon-audio-description">\n      <g fill-rule="evenodd"><path d="M227.29 381.351V162.993c50.38-1.017 89.108-3.028 117.631 17.126 27.374 19.342 48.734 56.965 44.89 105.325-4.067 51.155-41.335 94.139-89.776 98.475-24.085 2.155-71.972 0-71.972 0s-.84-1.352-.773-2.568m48.755-54.804c31.43 1.26 53.208-16.633 56.495-45.386 4.403-38.51-21.188-63.552-58.041-60.796v103.612c-.036 1.466.575 2.22 1.546 2.57"></path><path d="M383.78 381.328c13.336 3.71 17.387-11.06 23.215-21.408 12.722-22.571 22.294-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.226 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M425.154 381.328c13.336 3.71 17.384-11.061 23.215-21.408 12.721-22.571 22.291-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.511c-.586 3.874 2.226 7.315 3.866 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894"></path><path d="M466.26 381.328c13.337 3.71 17.385-11.061 23.216-21.408 12.722-22.571 22.292-51.594 22.445-84.774.221-47.594-18.343-82.517-35.6-106.182h-8.51c-.587 3.874 2.225 7.315 3.865 10.276 13.166 23.762 25.367 56.553 25.54 94.194.2 43.176-14.162 79.278-30.955 107.894M4.477 383.005H72.58l18.573-28.484 64.169-.135s.065 19.413.065 28.62h48.756V160.307h-58.816c-5.653 9.537-140.85 222.697-140.85 222.697zm152.667-145.282v71.158l-40.453-.27 40.453-70.888z"></path></g>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-next-item">\n      <path d="M12 36l17-12-17-12v24zm20-24v24h4V12h-4z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-previous-item">\n      <path d="M12 12h4v24h-4zm7 12l17 12V12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-shuffle">\n      <path d="M21.17 18.34L10.83 8 8 10.83l10.34 10.34 2.83-2.83zM29 8l4.09 4.09L8 37.17 10.83 40l25.09-25.09L40 19V8H29zm.66 18.83l-2.83 2.83 6.26 6.26L29 40h11V29l-4.09 4.09-6.25-6.26z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-cast">\n      <path d="M42 6H6c-2.21 0-4 1.79-4 4v6h4v-6h36v28H28v4h14c2.21 0 4-1.79 4-4V10c0-2.21-1.79-4-4-4zM2 36v6h6c0-3.31-2.69-6-6-6zm0-8v4c5.52 0 10 4.48 10 10h4c0-7.73-6.27-14-14-14zm0-8v4c9.94 0 18 8.06 18 18h4c0-12.15-9.85-22-22-22z"></path>\n    </symbol>\n    <symbol viewBox="0 0 48 48" id="vjs-icon-picture-in-picture-enter">\n      <path d="M38 22H22v11.99h16V22zm8 16V9.96C46 7.76 44.2 6 42 6H6C3.8 6 2 7.76 2 9.96V38c0 2.2 1.8 4 4 4h36c2.2 0 4-1.8 4-4zm-4 .04H6V9.94h36v28.1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 22 18" id="vjs-icon-picture-in-picture-exit">\n      <path d="M18 4H4v10h14V4zm4 12V1.98C22 .88 21.1 0 20 0H2C.9 0 0 .88 0 1.98V16c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2zm-2 .02H2V1.97h18v14.05z"></path>\n      <path fill="none" d="M-1-3h24v24H-1z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-facebook">\n      <path d="M1343 12v264h-157q-86 0-116 36t-30 108v189h293l-39 296h-254v759H734V905H479V609h255V391q0-186 104-288.5T1115 0q147 0 228 12z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-linkedin">\n      <path d="M477 625v991H147V625h330zm21-306q1 73-50.5 122T312 490h-2q-82 0-132-49t-50-122q0-74 51.5-122.5T314 148t133 48.5T498 319zm1166 729v568h-329v-530q0-105-40.5-164.5T1168 862q-63 0-105.5 34.5T999 982q-11 30-11 81v553H659q2-399 2-647t-1-296l-1-48h329v144h-2q20-32 41-56t56.5-52 87-43.5T1285 602q171 0 275 113.5t104 332.5z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-twitter">\n      <path d="M1684 408q-67 98-162 167 1 14 1 42 0 130-38 259.5T1369.5 1125 1185 1335.5t-258 146-323 54.5q-271 0-496-145 35 4 78 4 225 0 401-138-105-2-188-64.5T285 1033q33 5 61 5 43 0 85-11-112-23-185.5-111.5T172 710v-4q68 38 146 41-66-44-105-115t-39-154q0-88 44-163 121 149 294.5 238.5T884 653q-8-38-8-74 0-134 94.5-228.5T1199 256q140 0 236 102 109-21 205-78-37 115-142 178 93-10 186-50z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-tumblr">\n      <path d="M1328 1329l80 237q-23 35-111 66t-177 32q-104 2-190.5-26T787 1564t-95-106-55.5-120-16.5-118V676H452V461q72-26 129-69.5t91-90 58-102 34-99T779 12q1-5 4.5-8.5T791 0h244v424h333v252h-334v518q0 30 6.5 56t22.5 52.5 49.5 41.5 81.5 14q78-2 134-29z"></path>\n    </symbol>\n    <symbol viewBox="0 0 1792 1792" id="vjs-icon-pinterest">\n      <path d="M1664 896q0 209-103 385.5T1281.5 1561 896 1664q-111 0-218-32 59-93 78-164 9-34 54-211 20 39 73 67.5t114 28.5q121 0 216-68.5t147-188.5 52-270q0-114-59.5-214T1180 449t-255-63q-105 0-196 29t-154.5 77-109 110.5-67 129.5T377 866q0 104 40 183t117 111q30 12 38-20 2-7 8-31t8-30q6-23-11-43-51-61-51-151 0-151 104.5-259.5T904 517q151 0 235.5 82t84.5 213q0 170-68.5 289T980 1220q-61 0-98-43.5T859 1072q8-35 26.5-93.5t30-103T927 800q0-50-27-83t-77-33q-62 0-105 57t-43 142q0 73 25 122l-99 418q-17 70-13 177-206-91-333-281T128 896q0-209 103-385.5T510.5 231 896 128t385.5 103T1561 510.5 1664 896z"></path>\n    </symbol>\n  </defs>\n</svg>',"image/svg+xml");if(c.querySelector("parsererror"))d.warn("Failed to load SVG Icons. Falling back to Font Icons."),s.options_.experimentalSvgIcons=null;else{var p=c.documentElement;p.style.display="none",s.el_.appendChild(p),s.addClass("vjs-svg-icons-enabled")}}s.initChildren(),s.isAudio("audio"===e.nodeName.toLowerCase()),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),q&&s.addClass("vjs-touch-enabled"),z||s.addClass("vjs-workinghover"),n.players[s.id_]=_assertThisInitialized(s);var f=t.split(".")[0];return s.addClass("vjs-v".concat(f)),s.userActive(!0),s.reportUserActivity(),s.one("play",(function(e){return s.listenForUserActivity_(e)})),s.on("keydown",(function(e){return s.handleKeyDown(e)})),s.on("languagechange",(function(e){return s.handleLanguagechange(e)})),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.oOnlyMode)})),s}return _inherits(n,e),_createClass(n,[{key:"dispose",value:function(){var e=this;this.trigger("dispose"),this.off("dispose"),He(document,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),He(document,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),n.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),ci[this.id()]=null,Pn.name&&i.off()})),_get(_getPrototypeOf(n.prototype),"dispose",this).call(this,{restoreEl:this.options_.restoreEl})}},{key:"createEl",value:function(){var e,t=this.tag,i=this.playerElIngest_=t.parentNode&&t.parentNode.hasAttribute&&t.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();i?e=this.el_=t.parentNode:r||(e=this.el_=_get(_getPrototypeOf(n.prototype),"createEl",this).call(this,"div"));var a=se(t);if(r){for(e=this.el_=t,t=this.tag=document.createElement("video");e.children.length;)t.appendChild(e.firstChild);te(e,"video-js")||ne(e,"video-js"),e.appendChild(t),i=this.playerElIngest_=e,Object.keys(eatch(e){}}))}if(t.setAttribute("tabindex","-1"),a.tabindex="-1",O&&B&&(t.setAttribute("role","application"),a.role="application"),t.removeAttribute("width"),t.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(ae(n,a[n])})),t.playerId=t.id,t.id+="_html5_api",t.className="vjs-tech",t.player=e.player=this,this.addClass("vjs-paused"),!0!==window.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=De("vjs-styles-dimensions");var s=Te(".vjs-styles-defaults"),o=Te("head");o.insertBefore(this.styleEl_,s?s.nextSibling:o.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var l=t.getElementsByTagName("a"),u=0;u<l.length;u++){var c=l.item(u);ne(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return t.initNetworkState_=t.networkState,t.parentNode&&!i&&t.parentNode.insertBefore(e,t),ee(t,e),this.children_.unshift(t),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=e,e}},{key:"crossOrigin",value:function(e){if(void 0===e)return this.techGet_("crossOrigin");null===e||"anonymous"===e||"use-credentials"===e?(this.techCall_("setCrossOrigin",e),this.posterImage&&this.posterImage.crossOrigin(e)):d.warn('crossOrigin must be null,  "anonymous" or "use-credentials", given "'.concat(e,'"'))}},{key:"width",value:function(e){return this.dimension("width",e)}},{key:"heieight",e)}},{key:"dimension",value:function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(t);isNaN(i)?d.error('Improper value "'.concat(t,'" supplied for for ').concat(e)):(this[n]=i,this.updateStyleEl_())}},{key:"fltyleEl_()}},{key:"fjs-fill")}},{key:"aspectRatyleEl_()}},{key:"updateStyleEl_",value:function(){if(!0!==window.VIDEOJS_NO_DYNAMIC_STYLE){var e,t,n,i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=i[1]/i[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),Oe(this.styleEl_,"\n      .".concat(n," {\n        width: ").concat(e,"px;\n        height: ").concat(t,"px;\n      }\n\n      .").concat(n,".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: ").concat(100*r,"%;\n      }\n    "))}else{var a="number"==typeof this.width_?this.width_:this.options_.width,s="number"==typeof this.height_?this.height_:this.options_.height,o=this.tech_&&this.tech_.el();o&&(a>=0&&(o.width=a),s>=0&&(o.height=s))}}},{key:"loadTech_",value:function(e,t){var n=this;this.tech_&&this.unloadTech_();var i=ft(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==i&&this.tag&&(li.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(a=!1);var s={source:t,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:"".concat(this.id(),"_").concat(r,"_api"),playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Pn.namevateName]})),Object.assign(s,this.options_[i]),Object.assign(s,this.options_[r]),Object.assign(s,this.options_[e.toLowerCase()]),this.tag&&(s.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(s.startTime=this.cache_.currentTime);var o=li.getTech(e);if(!o)throw new Error("No Tech named '".concat(i,"' exists! '").concat(i,"' should be registered using videojs.registerTech()'"));this.tech_=new o(s),this.tech_.ready(Qe(this,this.handleTechReady_),!0),Bt(this.textTracksJson_||[],this.tech_),la.forEach((function(e){n.on(n.tech_,e,(function(t){return n["handleTech".concat(ft(e),"_")](t)}))})),Object.keys(ua).forEach((function(e){n.on(n.tech_,e,(function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech".concat(ua[e],"_")].bind(n),event:t}):n["handleTech".concat(ua[e],"_")](t)}))})),this.on(this.tech_,"loadstart",(function(e){return n.handleTechLoadStart_(e)})),this.on(this.tech_,"sourceset",(function(e){return n.handleTechSourceset_(e)})),this.on(this.tech_,"waiting",(function(e){return n.handleTechWaiting_(e)})),this.on(this.tech_,"ended",(function(e){return n.handleTechEnded_(e)})),this.on(this.tech_,"seeking",(function(e){return n.handleTechSeeking_(e)})),this.on(this.tech_,"play",(function(e){return n.handleTechPlay_(e)})),this.on(this.tech_,"pause",(function(e){return n.handleTechPause_(e)})),this.on(this.tech_,"durationchange",(function(e){return n.handleTechDurationChange_(e)})),this.on(this.tech_,"fullscreenchange",(function(e,t){return n.handleTechFullscreenChange_(e,t)})),this.on(this.tech_,"fullscrror_(e,t)})),this.on(this.tech_,"enterpictureinpicture",(function(e){return n.handleTechEnterPictureInPicture_(e)})),this.on(this.tech_,"leavepictureinpicture",(function(e){return n.handleTechLeavePictureInPicture_(e)})),this.on(this.tech_,"error",(function(e){return n.handleTechError_(e)})),this.on(this.tech_,"posterchange",(function(e){return n.handleTechPosterChange_(e)})),this.on(this.tech_,"textdata",(function(e){return n.handleTechTextData_(e)})),this.on(this.tech_,"ratechange",(function(e){return n.handleTechRateChange_(e)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||ee(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)}},{key:"unloadTemTech_=!1}},{key:"this.tech_}},{key:"addTechControlsListeneTechTap_)}},{key:"removeTechControlsListeneleClick_)}},{key:"handleTechReaChange_()}},{key:"handleTechLoadStatoplay())}},{key:"manualAutoplay_",value:function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,i=function(){var e=t.muted();t.muted.muted(e)};t.playTerminatedQueue_.push(n);var i=t.play();if(Rt(i))return i.catch((function(e){throw n(),new Error("Rejection at manualAutoplay. Restoring muted value. ".concat(e||""))}))};if("any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():i():Rt(n=this.play())&&(n=n.catch(i)),Rt(n))return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})oplay:e})}))}}},{key:"updateSourceCaches_",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[]urn bi(t)}(this,t)),this.cache_.source=_({},e,{src:t,type:n});for(var i=this.cache_.source.src===t})),r=[],a=this.$$("source"),s=[],o=0;o<a.length;o++){var l=se(a[o]);r.push(l),l.src&&l.src===t&&s.push(l.src)}s.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t}},{key:"handleTechSourcesrceset"})}},{key:"hasStartarted"))}},{key:"handleTechPlr("play")}},{key:"handleTechRateChanechange")}},{key:"handleTechWaitie",n))}))}},{key:"handleTechCanPlay_",value:function(){this.removeClass("vjs-waiting"),this.trigger("canplay")}},{key:"handleTechCanPlayThrough_",value:function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")}},{key:"handleTechPlaying_",value:function(){this.removeClass("vjs-waiting"),this.trigger("playing")}},{key:"handleTechSeekiseeking")}},{key:"handleTechSeek"seeked")}},{key:"handleTechPau("pause")}},{key:"handleTechEnd("ended")}},{key:"handleTechDurationChanration"))}},{key:"handleTechClipause()))}},{key:"handleTechDoubleClicreen()))}},{key:"handleTechTActive())}},{key:"handleTechTouchStarActive()}},{key:"handleTechTouchMoctivity()}},{key:"handleTechTouchEDefault()}},{key:"toggleFullscreenClass_",value:function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")}},{key:"documentFullscreenChange_",value:function(e){var t=e.target.player;if(!t||t===this){var n=this.el(),i=document[this.fsApi_.fullscreenElement]===n;!i&&n.matches&&(i=n.matches(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}}},{key:"handleTechFullscreenChanlscreen))}},{key:"handleTechFullscreenErrerror",t)}},{key:"togglePictureInPictureClapicture")}},{key:"handleTechEnterPictureInPicture_",value:function(e){this.isInPictureInPicture(!0)}},{key:"handleTechLeavePictureInPictucture(!1)}},{key:"handleTechErr.error(e)}},{key:"handleTechTextDatdata",e)}},{key:"getCache",value:function(){return this.cache_}},{key:"resetCacvolume:1}}},{key:"techCa,e}}),!0)}},{key:"techGet_",value:function(e){if(this.tech_&&this.tech_.isReady_){if(e in),t[n]())}(this.middleware_,this.tech_,e);if(e in mi)return pi(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw d("Video.js: ".concat(e," method not defined for ").concat(this.techName_," playback technology."),t),t;if("TypeError"===t.name)throw d("Video.js: ".concat(e," unavailable on ").concat(this.techName_," playback technology element."),t),this.tech_.isReady_=!1,t;throw d(t),t}}}},{key:"pay_(t)}))}},{key:"play_",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt;this.playCallbacks_.push(t);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc())),i=Boolean(W||z);if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(t){e.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(!n&&i&&this.load());var r=this.techGet_("play");i&&this.hasClass("vjs-ended")&&this.resetProgressBar_(),null===r?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(r)}},{key:"runPlayTerminatedQuee){e()}))}},{key:"runPlayCallbac){t(e)}))}},{key:"pa("pause")}},{key:"pau"paused")}},{key:"pla||St(0,0)}},{key:"scrubbrubbing")}},{key:"currentTtTime_)))}},{key:"applyInitTiinitTime)}},{key:"duratchange"))}},{key:"remainingTentTime()}},{key:"remainingTimeDispntTime())}},{key:"buffet(0,0)),e}},{key:"bufferedPercration())}},{key:"buffered&&(n=t),n}},{key:"volN(t)?1:t)}},{key:"muMuted",e)}},{key:"defaultMuted")||!1}},{key:"lastVolutVolume=e}},{key:"supportsFullScreen")||!1}},{key:"isFullscrllscreen_}},{key:"requestFullscreen",value:function(e){this.isInPictureInPicture()&&this.exitPictureInPicture();var t=this;return nehen(n,i))}))}},{key:"requestFullscreenHelplWindow()}},{key:"exitFullscreen",value:function(){var e=this;return nehen(t,n))}))}},{key:"exitFullscreenHelplWindow()}},{key:"enterFullWinlWindow")}},{key:"fullWindowOnEscscreen())}},{key:"exitFullWinlWindow")}},{key:"disablePictureInPictchanged")}},{key:"isInPictureInPictnPicture_}},{key:"requestPictureInPicture",value:function(){var e=this;if(this.options_.enableDocumentPictureInPicture&&window.documentPictureInPicture){var t=document.createElement(this.el().tagName);return t.classList=this.el().classList,t.classList.add("vjs-pip-container"),this.posterImage&&t.appendChild(this.posterImage.el().cloneNode(!0)),this.titleBar&&t.appendChild(this.titleBar.el().cloneNode(!0)),t.appendChild(J("p",{className:"vjs-pip-text"},{},this.localize("Playing in picture-in-picture"))),window.documentPictureInPicture.requestWindow({width:this.videoWidth(),height:this.videoHeight()}).then((function(n){return we(n),e.el_.parentNode.insertBefore(t,e.el_),n.document.body.appendChild(e.el_),n.document.body.classList.add("vjs-pip-window"),e.player_.isInPictureInPicture(!0),e.player_.trigger("enterpictureinpicture"),n.addEventListener("pagehide",(function(n){var i=n.target.querySelector(".video-js");t.parentNode.replaceChild(i,t),e.player_.isInPictureInPicture(!1),e.player_.trigger("leavepictureinpicture")})),n}))}return"pictureInPictureEnabled"in document&&!1===this.disablePictureInPicture()?this.techGet_("requestPictureInPicture"):Promise.reject("No PiP mode is available")}},{key:"exitPictureInPict():void 0}},{key:"handleKeyDkeys(e))}}},{key:"handleHotk(this,e)}}},{key:"canPlayType",value:function(e){for(var t,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],a=li.getTech(r);if(a||(a=bt.getComponent(r)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else d.error('The "'.concat(r,'" tech is undefined. Skipped browser support check for that tech.'))}return""}},{key:"selectSource",value:function(e){var t,n=this,i=this.options_.techtTech(e)]})).filter((function(e){var t=_slicedToArray(e,2),n=t[0],i=t[1];return i?i.isSupported():(d.error('The "'.concat(n,'" tech is undefined. Skipped browser support check for that tech.')0}))})),i},a=function(e,t){var i=_slicedToArray(e,2),r=i[0];if(i[1].canPlaySource(t,n.options_[r.toLowerCase()]))return{source:t,tech:r}};return(this.options_.sourceOrder?rn t(n,e)})):r(i,e,a))||!1}},{key:"handleSrc_",value:function(e,t){var n=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var i=Ti(e);if(i.length){if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),hi(ech(s)}))})),i.lengtceerror",r)};this.one("error",r),this.one("playing",a),this.resetRetaying",a)}}}else this.sMessage})}),0)}},{key:"rc_(e,!1)}},{key:"s1})),!1))}},{key:"l_("load")}},{key:"reset",value:function(){var e=this;this.paused()?this.doReset_():Mt(this.play().then((function(){return e.doReset_()})))}},{key:"doReserreset")}},{key:"resetControlBarumeBar_()}},{key:"resetProgressBar_",value:function(){this.currentTime(0);var e=this.controlBar||{},t=e.currentTimeDisplay,n=e.durationDisplay,i=e.progressControl,r=e.remainingTimeDisplay,a=(i||{}).seekBar;t&&t.updateContent(),n&&n.updateContent(),r&&r.updateContent(),a&&(a.update(),a.loadProgressBar&&a.loadProgressBar.update())}},{key:"resetPlaybackRaChange_()}},{key:"resetVolumeBar_",value:function(){this.volume(1),this.trigger("volumechange")}},{key:"currentSourources||t}},{key:"currentSouource||{}}},{key:"currentSrc",value:function(){return this.currentSource()&&this.currentSource().src||""}},{key:"currentT.type||""}},{key:"preload",value:function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")}},{key:"autopoplay",t)}},{key:"playsinlsinline")}},{key:"l_("loop")}},{key:"poschange"))}},{key:"handleTechPosterChanhange"))}}},{key:"contrners_()))}},{key:"usingNativeContrtrols")))}},{key:"error",value:function(e){var t=this;if(void 0===e)return this.error_||null;if(i("beforeerror"r hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.c.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("ltart"],n)}))}if(null===e)return this.error_=null,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Lt(e),this.addClass("vjs-error"),d.error("(CODE:".concat(this.error_.code," ").concat(Lt.errorTypes[this.error_.code],")"),this.error_.message,this.error_),this.trigger("error"),i("error").forEach((function(e){return e(t,t.error_)}))}},{key:"reportUserActivivity_=!0}},{key:"userActactive")}}},{key:"listenForUserActivity_",value:function(){var e,t,n,i=Qe(this,this.reportUserActivity),r=function(t){i(),this.clearInterval(e)};this.on("mousedown",(function(){i(),this.clearInterval(e),e=this.setInterval(i,250)})),this.on("meenY,i())})),this.on("mouseup",r),this.on("mouseleave",r);var a,s=this.getChild("controlBar");!s||z||I||(s.on("moTimeout=0})),s.on("motyTimeout}))),this.on("keydown",i),this.on("keyup",i);this.se1)}),e))}}),250)}},{key:"playbackRkRate",e)}},{key:"defaultPlaybackRkRate"):1}},{key:"isAuudio_=!!e}},{key:"enableAudioOnlyechange")}},{key:"disableAudioOnlyechange")}},{key:"audioOnlyMode",value:function(e){var t=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;if(this.audioOnlyMode_=e,e){var n=[];return this.isInPictureInPicture()&&n.push(this.exitPictureInPicture()),this.isFullscreen()&&n.push(this.exitFullscreen()),this.audioPosterMode()&&n.push(this.audioPosterMode(!1)),Promise.all(n).then((function(){return t.enableAudioOnlyUI_()}))}return Promise.resolve().then((function(){return t.disableAudioOnlyUI_()}))}},{key:"enablePosterModeUI_",value:function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")}},{key:"disablePosterModeechange")}},{key:"audioPosterMode",value:function(e){var t=this;return"boolean"!=typeof e||e===this.audioPosterMode_?this.audioPosterMode_:(this.audioPosterMode_=e,e?this.audioOnlyMode()?this.audioOnlyMode(!1).then((function(){t.enablePosterModeUI_()})):Promise.resolve().then((function(){t.enablePosterModeUI_()})):Promise.resolve().then((function(){t.disablePosterModeUI_()})))}},{key:"addTextTrck(e,t,n)}},{key:"addRemoteTextTrrack(e,t)}},{key:"removeRemoteTextTrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)}},{key:"getVideoPlaybackQuality",value:function(){return this.techGet_("getVideoPlaybackQuality")}},{key:"videoWidth",value:function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0}},{key:"videoHeiight()||0}},{key:"languchange"))}},{key:"languanguages_)}},{key:"toJ}return e}},{key:"createMo.open(),i}},{key:"updateCurrentBreakpoii;break}}}},{key:"removeCurrentBreakpoieClass(e)}},{key:"breakpoikpoints_)}},{key:"response):void 0}},{key:"currentBreakpoint",value:function(){return this.breakpoint_}},{key:"currentBreakpointClint_]||""}},{key:"loadMedia",value:function(e,t){var n=this;if(e&&"object"==typeof e){var i=this.crossOrigin();this.reset(),this.cache_.media=_(e);var r=this.cache_.media,a=r.artist,s=r.artwork,o=r.description,l=r.poster,u=r.src,c=r.textTracks,d=r.title;!s&&l&&(this.cache_.media.artwork=[{src:l,type:bi(l)}]),i&&this.crossOrigin(i),u&&this.src(u),l&&this.poster(l),Array.isArray(c)&&ack(e,!1)})),this.titleBar&&this.titleBar.update({title:d,description:o||a||""}),this.ready(t)}}},{key:"getMee_.media)}},{key:"debled_=!1)}},{key:"playbackRachange"))}}],[{key:"getTagSettings",value:function(e){var t={sources:[],tracks:[]},n=se(e),i=n["data-setup"];if(te(e,"vjs-fill")&&(n.fill=!0),te(e,"vjs-fluid")&&(n.fluid=!0),null!==i){var r=_slicedToArray(Ot(i||"{}"),2),a=r[0],s=r[1];a&&d.error(a),Object.assign(n,s)}if(Object.assign(t,n),e.hasChildNodes())for(var o=e.childNodes,l=0,u=o.length;l<u;l++){var c=o[l],h=c.nodeName.toLowerCase();"source"===h?t.sources.push(se(c)):"track"===h&&t.tracks.push(se(c))}return t}}]),n}(bt);Pn.nameteName])}})),pa.prototype.crossorigin=pa.prototype.crossOrigin,pa.players={};var fa=window.navigator;pa.prototype.options_={techOrder:li.defaultTechOrder_,html5:{},enableSourceset:!0,inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","titleBar","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:fa&&(fa.languages&&fa.languages[0]||fa.userLanguage||fa.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"hGet_(e)}})),ligger(e)}})),bt.registerComponent("Player",pa);var ga="plugin",ma="activePlugins_",ya={},va=function(e){return ya.hasOwnPropee]:ma]t.nash()),a}},Sa=function(){function e(t){if(_classCallCheck2(this,e),this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),ct(this),delete this.trigger,ht(this,this.constructor.defaultState),ba(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}return _createClass(e,[{key:"version",value:function(){return this.constructor.VERSION}},{key:"getEventHce=this,e}},{key:"trigtHash(t))}},{key:"handleStateChanged",value:function(e){}},{key:"disp(e,ya[e])}}],[{key:"isBarototype)}},{key:"registerPlugin",value:function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'.concat(t,'", must be a string, was ').concat(typeof t,"."));if(va(t))d.warn('A plugin named "'.concat(t,'" already exists. You may want to avoid re-registering plugins!'));else if(pa.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'.concat(t,'", cannot share a name with an existing player method!'));if("function"!=typeof n)throw new Error('Illegal plugin for "'.concat(t,'", must be a function, was ').concat(typeof n,"."));return ya[t]=n,t!==ga&&(e.isBasic(n)?pa.prt[e]})),n}(t,n):pa.prototype[t]=ka(t,n)),n}},{key:"deregisterPluotype[e])}},{key:"getPlugins",value:function(){var e;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(ya){})[t]=n)})),e}},{key:"getPluginVersRSION||""}}]),e}();function wa(e,t,n,i){return function(e,t){var n=!1;return function(){n||d.warn(e),n=!0;for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t.apply(this,r)}}("".concat(t," is deprecated and will be removed in ").concat(e,".0; please use ").concat(n," instead."),i)}Sa.getPlugin=_a,Sa.BASE_PLUGIN_NAME=ga,Sa.registerPlugin(ga,Sa),pa.prototype.uis[ma][e]},pa.prototypern!!va(lice(1):e};function Ea(e,t,n){var r=Ea.getPlayer(e);if(r)return t&&d.warn('Player "'.concat(e,'" is already initialised. Options will not be applied.')),n&&r.ready(n),r;var a="string"==typeof e?Te("#"+Ca(e)):e;if(!Y(a))throw new TypeError("The element or ID supplied is not valid. (videojs)");var s="getRootNode"in a&&a.getRootNode()instanceof window.ShadowRoot?a.getRootNode():a.ownerDocument.body;a.ownerDocument.defaultView&&s.contains(a)||d.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(a.parentNode&&a.parentNode.hasAttribute("data-vjs-player")?a.parentNode:a).cloneNode(!0)),i("beforesetup"p hooks")}));var o=bt.getComponent("Player");return r=new o(a,t,n),i("setup").forEach((function(e){return e(r)})),r}if(Ea.hooks_=n,Ea.hookst){i(e,t)},Ents)}})))},Ea.removeHook=r,!0!==window.VIDEOJS_NO_DYNAMIC_STYLE&&K()){var Aa=Te(".vjs-styles-defaults");if(!Aa){Aa=De("vjs-styles-defaults");var Pa=Te("head");Pa&&Pa.insertBefore(Aa,Pa.firstChild),Oe(Aa,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}Ie(1,Ea),Ea.VERSION=t,Ea.options=pa.prototype.options_,Ea.getPlayers=function(){return pa.players},Ea s||n[o]}},Ea.get(Boolean)},Ea.players=pa.players,Ea.getComponent=bt.getComponent,Ea.registerComponent=function(e,t){return li.isTech(t)&&d.warn("The ".concat(e," tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)")),bt.registerComponent.call(bt,e,t)},Ea.getTech=li.getTech,Ea.registerTech=li.registerT].push(t)},Object.defineProperty(Ea,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Ea.middleware,"TERMINATOR",{value:di,writeable:!1,enumerable:!0}),Ea.browser=G,Ea.obj=E,Ea.mergeOptions=wa(9,"videojs.mergeOptions","videojs.obj.merge",_),Ea.defineLazyProperty=wa(9,"videojs.defineLazyProperty","videojs.obj.defineLazyProperty",T),Ea.bind=wa(9,"videojs.bind","native Function.prototype.bind",Qe),Ea.registerPlugin=Sa.registerPlugin,Ea.deregisterPlugin=Sa.deregisterPluginugin(e,t)},Ea.getPlugins=Sa.getPlugins,Ea.getPlugin=Sa.getPlugin,Ea.getPluginVersion=Sa.getPluginVersion,Ea.addLanguage=function(e,t){return e=(""+e).toLowerCase(),Ea.options.languages=_(Ea.options.languages,_defineProperty({},e,t)),Ea.options.languages[e]},Ea.log=d,Ea.createLogger=h,Ea.time=It,Ea.createTimeRange=wa(9,"videojs.createTimeRange","videojs.time.createTimeRanges",St),Ea.createTimeRanges=wa(9,"videojs.createTimeRanges","videojs.time.createTimeRanges",St),Ea.formatTime=wa(9,"videojs.formatTime","videojs.time.formatTime",Pt),Ea.setFormatTime=wa(9,"videojs.setFormatTime","videojs.time.setFormatTime",Et),Ea.resetFormatTime=wa(9,"videojs.resetFormatTime","videojs.time.resetFormatTime",At),Ea.parseUrl=wa(9,"videojs.parseUrl","videojs.url.parseUrl",nn),Ea.isCrossOrigin=wa(9,"videojs.isCrossOrigin","videojs.url.isCrossOrigin",sn),Ea.EventTarget=et,Ea.any=Ge,Ea.on=Ve,Ea.one=We,Ea.off=He,Ea.trigger=ze,Ea.xhr=gn,Ea.TextTrack=kn,Ea.AudioTrack=Sn,Ea.VideoTrack=wn,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((functiorguments)}})),Ea.computedStyle=wa(9,"videojs.computedStyle","videojs.dom.computedStyle",Se),Ea.dom=Ee,Ea.fn=Ze,Ea.num=Gi,Ea.str=mt,Ea.url=on,vt((function(e,t){e.exports=fefault:e}}var n=t(e),i=function e(t){_classCallCheck2(this,e);var n=this;return n.id=t.id,n.label=n.id,n.width=t.width,n.height=t.height,n.bitrate=t.bandwidth,n.frameRate=t.frameRate,n.enabled_=t.enabled,Object.defineProperty(n,"enabled",{get:function(){return n.enabled_()},set:function(e){n.enabled_(e)}}),n},r=function(e){function t(){var e;_classCallCheck2(this,t);var n=_assertThisInitialized(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this)));return n.levels_=[],n.selectedIndex_=-1,Object.defineProperty(n,"selectedItedIndex_}}),Object.defineProperty(n,"les_.length}}),n[Symbol.values()},_possibleConstructorReturn(e,n)}return _inherits(t,e),_createClass(t,[{key:"addQualityLeevel"}),t}},{key:"removeQualityLeevel"}),t}},{key:"getQualityLevelBturn null}},{key:"disp.length=0}}]),t}(n.default.EventTarget);for(var a in r.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"},r.prototype.allowedEvents_)r.prototype["on"+a]=null;var s="4.0.0",o=function(e,t){var n=e.qualityLevelsspose",t)};return e.on("dispose",a),e.qua{return i},e.qualityLevels.VERSION=s,i},l=function(e){return o(this,n.default.obj.merge({},e))};return n.default.registerPlugin("qualityLevels",l),l.VERSION=s,l}(Ea)}));exports=s})),xa="http://examp(t;return i}var Oa,Ra,Ma=function(e){function t(){var e;return _classCallCheck2(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).buffer="",e}return _inherits(t,e),_createClass(t,[{key:"pring(t+1)}}]),t}(La),Na=String.fromChar2],10)),n},Ba=function(e){var t={};if(!e)return t;for(var n,i=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),r=i.length;r--;)""!==i[r]&&((n=/([^=]*)=(.*)/.exec(i[r]).slice(1))[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),t[n[0]]=n[1]);return t},ja=function(e){function t(){var e;return _classCallCheck2(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).customParsers=[],e.tagMappers=[],e}return _inherits(t,e),_createClass(t,[{key:"push",value:function(e){var t,n,i=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappencat([i])}),[e]).forEach((function(e){for(var r=0;r<i.customParsers.length;r++)if(i.customParsers[r].call(i,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))i.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void i.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-VERSION:([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void i.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:(.*)?$/.exec(e))return n=cn(Ua(t[1]),{type:"tag",tagType:"byterange"}),void i.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-MAP:(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var a=Ba(t[1]);a.URI&&(n.uri=a.URI),a.BYTERANGE&&(n.byterange=Ua(a.BYTERANGE))}i.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=Ba(t[1]),n.attributes.RESOLUTION){var s=n.attributes.RESOLUTION.split("x"),o={};s[0]&&(o.width=parseInt(s[0],10)),s[1]&&(o.height=parseInt(s[1],10)),n.attributes.RESOLUTION=o}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["FRAME-RATE"]&&(n.attributes["FRAME-RATE"]=parseFloat(n.attributes["FRAME-RATE"])),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}i.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=Ba(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))i.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))i.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-KEY:(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=Ba(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void i.trigger("data",n);if(t=/^#EXT-X-START:(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=Ba(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if(t=/^#EXT-X-CUE-IN:(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if((t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"skip"}).attributes=Ba(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(Na)),void i.trigger("data",n);if((t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part"}).attributes=Ba(t[1]),["DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=Ua(n.attributes.BYTERANGE)),void i.trigger("data",n);if((t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"server-control"}).attributes=Ba(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),void i.trigger("data",n);if((t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part-inf"}).attributes=Ba(t[1]),["PART-TARGET"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),void i.trigger("data",n);if((t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"preload-hint"}).attributes=Ba(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"butes[e]}})),void i.trigger("data",n);if((t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"rendition-report"}).attributes=Ba(t[1]),["LAST-MSN","LAST-PART"s[e],10))})),void i.trigger("data",n);if((t=/^#EXT-X-DATERANGE:(.*)$/.exec(e))&&t[1]){(n={type:"tag",tagType:"daterange"}).attributes=Ba(t[1]),["ID","CLASS"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=String(n.attributes[e]))})),["START-DATE","END-DATE"utes[e]))})),["DURATION","PLANNED-DURATION"utes[e]))})),["END-ON-NEXT"utes[e]))})),["SCTE35-CMD"," SCTE35-OUT","SCTE35-IN"ring(16))}));var l=/^X-([A-Z]+-)+[A-Z]+$/;for(var u in n.attributes)if(l.test(u)){var c=/[0-9A-Fa-f]{6}/g.test(n.attributes[u]),d=/^\d+(\.\d+)?$/.test(n.attributes[u]);n.attributes[u]=c?n.attributes[u].toString(16):d?parseFloat(n.attributes[u]):String(n.attributes[u])}i.trigger("data",n)}else if(t=/^#EXT-X-INDEPENDENT-SEGMENTS/.exec(e))i.trigger("data",{type:"tag",tagType:"independent-segments"});else{if(t=/^#EXT-X-CONTENT-STEERING:(.*)$/.exec(e))return(n={type:"tag",tagType:"content-steering"}).attributes=Ba(t[1]),void i.trigger("data",n);i.trigger("data",{type:"tag",data:e.slice(4)})}}}}else i.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))}},{key:"addPara}),!0}))}},{key:"addTagMapn(e):e}))}}])e[n]})),t},qa=function(e){var t=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(t){var r="#EXT-X-SERVER-CONTROL",a="holdBack",s="partHoldBack",o=n&&3*n,l=i&&2*i;n&&!t.hasOwnProperty(a)&&(t[a]=o,this.trigger("info",{message:"".concat(r," defaulting HOLD-BACK to targetDuration * 3 (").concat(o,").")})),o&&t[a]<o&&(this.trigger("warn",{message:"".concat(r," clamping HOLD-BACK (").concat(t[a],") to targetDuration * 3 (").concat(o,")")}),t[a]=o),i&&!t.hasOwnProperty(s)&&(t[s]=3*i,this.trigger("info",{message:"".concat(r," defaulting PART-HOLD-BACK to partTargetDuration * 3 (").concat(t[s],").")})),i&&t[s]<l&&(this.trigger("warn",{message:"".concat(r," clamping PART-HOLD-BACK (").concat(t[s],") to partTargetDuration * 2 (").concat(l,").")}),t[s]=l)}},Va=function(e){function t(){var e;_classCallCheck2(this,t),(e=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).lineStream=new Ma,e.parseStream=new ja,e.lineStream.pipe(e.parseStream),e.lastProgramDateTime=null;var n,i,r=_assertThisInitialized(e),a=[],s={},o=!1,l=function(){},u={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;e.manifest={allowCache:!0,discontinuityStarts:[],dateRanges:[],segments:[]};var d=0,h=0,p={};return eegment=s)})),e.parseStream.on("data",(function(e){var t,f;({tag:function().version)},"alCache=!0)}+t.lengtndLiegmee list"})},"media.number})},"discontinuity.number})},"playlayl(n.key=i)},"sibutes group"})},disa.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),s.dateTimeString=e.dateTimeString,s.dateTimeObject=e.dateTimeObject;var t=this.lastProgramDateTime;this.lastProgramDateTime=new Date(e.dateTimeString).getTime(),null===t&&this.manifest.segments.reduceRight((function(e,t){return t.programDateTime=e-1e3*t.duration,t.programDateTime}),this.lastProgramDateTime)},targanifese list"})},"cue-out":function(){s.cueOut=e.data},"cue-out-cont":function(){s.cueOutCont=e.dataIn=e.data},skip:function(){this.manifest.skip=Fa(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;o=!0;var n=this.manifest.segments.length,i=Fa(e.attributes);s.parts=s.parts||[],s.parts.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=h),h=i.byterange.offset+i.byterange.length);var r=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #".concat(r," for segment #").concat(n),e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(e,n){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #".concat(n," lacks required attribute(s): LAST-PART")})}))},"serveis set"})},"preload-hint":function(){var t=this.manifest.segments.length,n=Fa(e.attributes),i=n.type&&"PART"===n.type;s.preloadHints=s.preloadHints||[],s.preloadHints.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=i?h:0,i&&(h=n.byterange.offset+n.byterange.length)));var r=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #".concat(r," for segment #").concat(t),e.attributes,["TYPE","URI"]),n.type)for(var a=0;a<s.preloadHints.length-1;a++){var o=s.preloadHints[a];o.type&&(o.type===n.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #".concat(r," for segment #").concat(t," has the same TYPE ").concat(n.type," as preload hint #").concat(a)}))}},"rendition-report":function(){var t=Fa(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var n=this.manifest.renditionReports.length-1,i=["LAST-MSN","URI"];o&&i.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #".concat(n),e.attributes,i)},manifest)},daterange:function(){this.manifest.dateRanges.push(Fa(e.attributes));var t=this.manifest.dateRanges.length-1;this.warnOnMissingAttributes_("#EXT-X-DATERANGE #".concat(t),e.attributes,["ID","START-DATE"]);var n=this.manifest.dateRanges[t];n.endDate&&n.startDate&&new Date(n.endDate)<new Date(n.startDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE END-DATE must be equal to or later than the value of the START-DATE"}),n.duration&&n.duration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE DURATION must not be negative"}),n.plannedDuration&&n.plannedDuration<0&&this.trigger("warn",{message:"EXT-X-DATERANGE PLANNED-DURATION must not be negative"});var i=!!n.endOnNext;if(i&&!n.class&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must have a CLASS attribute"}),i&&(n.duration||n.endDate)&&this.trigger("warn",{message:"EXT-X-DATERANGE with an END-ON-NEXT=YES attribute must not contain DURATION or END-DATE attributes"}),n.duration&&n.endDate){var r=n.startDate.getTime()+1e3*n.duration;this.manifest.dateRanges[t].endDate=new Date(r)}if(p[n.id]){for(var a in p[n.id])if(n[a]&&JSON.stringify(p[n.id][a])!==JSON.stringify(n[a])){this.trigger("warn",{message:"EXT-X-DATERANGE tags with the same ID in a playlist must have the same attributes values"});break}var s=this.manifest.dateRanges.findIndex((function(e){return e.id===n.id}));this.manifest.dateRanges[s]=cn(this.manifest.dateRanges[s],n),p[n.id]=cn(p[n.id],n),this.manifest.dateRanges.pop()}else p[n.id]=n},"independent-segments":function(){this.manifest.independentSegments=!0},"contentER-URI"])}}[e.tagType]||l).caion),s={}},comment:function(]=e.data)}})[e.type].call(r)})),e}return _inherits(t,e),_createClass(t,[{key:"warnOnMissingAttribut(", "))})}},{key:"push",value:function(e){this.lineStream.push(e)}},{key:"er("end")}},{key:"addParser",value:function(e){this.parseStream.addParser(e)}},{key:"addTagMapper",value:function(e){this.parseStream.addTagMapper(e)}}]),t}(La),Ha={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},za=["video","audio","text"],Wa=["Video","Audio",(-2n"}erC"'+a(eturn!1}))},Ja="mp4a.40.2",Za=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,es=/^application\/dashsonrayngth||0))},rs=window.BigInt||Number,as=[rs("0x1"),rs("0x100"),rs("0x10000"),rs("0x1000000"),rs("0x100000000"),rs("0x10000000000"),rs("0x1000000000000"),rs("0x100000000000000"),rs("0x10000000000000000")];Oa=new Uint16Array([65484]),255===(Ra=new Uint8Array(Oa.buffer,Oa.byteOffset,Oa.byteLength))[0]||RaNum}re;re[a+n])}))},cs="http://example.com",ds=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=window.location&&window.location.href||"");var n="function"==typeof window.URL,i=/^\/\//.test(e),r=!window.location&&!/\/\//i.test(e);if(n?e=new window.URL(e,window.location||cs):/\/\//i.test(e)||(e=Ia.buildAbsoluteURL(window.location&&window.location.href||"",e)),n){var a=new URL(t,e);return r?a.href.slice(18):i?a.href.slice(a.protocol.length):a.href}return Ia.buildAbsoluteURL(e,t)};function hs(e){for(var t,n=(t=e,window.atob?window.atob(t):Buffer.from(t,"base64").toString("binary")),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(reeze(e):e}var fs=ps({HTML:"text/html",isHTML:function(e){return e===fs.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),gs=ps({HTML:"http://www.w3.org/1999/xht==gs.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmreturn r}},;return e},find:ms,freeze:ps,MIME_TYPE:fs,NAMESPACE:gs},vs=ys.find,_s=ysTs,{}))}function Ss(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(ructor=e)}var Cs={},Es=Cs.ELEMENT_NODE=1,As=Cs.ATTRIBUTE_NODE=2,Ps=Cs.TEXT_NODE=3,Is=Cs.CDATA_SECTION_NODE=4,xs=Cs.ENTITY_REFERENCE_NODE=5,Ls=Cs.ENTITY_NODE=6,Ds=Cs.PROCESSING_INSTRUCTION_NODE=7,Os=Cs.COMMENT_NODE=8,Rs=Cs.DOCUMENT_NODE=9,Ms=Cs.DOCUMENT_TYPE_NODE=10,Ns=Cs.DOCUMENT_FRAGMENT_NODE=11,Us=Cs.NOTATION_NODE=12,Bs={},js={};Bs.INDEX_SIZE_ERR=(js[1]="Index size error",1),Bs.DOMSTRING_SIZE_ERR=(js[2]="DOMString size error",2);var Fs=Bs.HIERARCHY_REQUEST_ERR=(js[3]="Hierarchy request error",3);Bs.WRONG_DOCUMENT_ERR=(js[4]="Wrong document",4),Bs.INVALID_CHARACTER_ERR=(js[5]="Invalid character",5),Bs.NO_DATA_ALLOWED_ERR=(js[6]="No data allowed",6),Bs.NO_MODIFICATION_ALLOWED_ERR=(js[7]="No modification allowed",7);var qs=Bs.NOT_FOUND_ERR=(js[8]="Not found",8);Bs.NOT_SUPPORTED_ERR=(js[9]="Not supported",9);var Vs=Bs.INUSE_ATTRIBUTE_ERR=(js[10]="Attribute i": "+t),n}func._inc=t}}func=null)}}function $s(){}funce),t}function ao(e){return e&&e.nodeType===Js.DOCUMENT_TYPE_NODE}function so(e){return e&&e.nodeType===Js.EL),t}function go(){this._nsMap={}}function mo(){}function yo(){}function vo(){}function _o(){}function bo(){}function To(){}function ko(){}function So(){}function wo(){}function Co(){}function Eo(){}func]=n}Bs.INVALID_STATE_ERR=(js[11]="Invalid state",11),Bs.SYNTAX_ERR=(js[12]="Syntax error",12),Bs.INVALID_MODIFICATION_ERR=(js[13]="Invalid modification",13),Bs.NAMESPACE_ERR=(js[14]="Invalid namespace",14),Bs.INVALID_ACCESS_ERR=(js[15]="Invalid access",15),Hs.prototype=Error.prototype,Ss(Bs,Hs),zs.prototype={lens[e]:null.join("")},filter:function(e){return Array.prototype.filter.call(this,el(this,e)}},Ws.prot[e]||null},ws(Ws,zs),Xs.prototype={length:0,item:zs.prototype.item,gereturn n}},seis,e,n),n},setNis,e,t),t},removthis,t),t},removeNthis,n),n},getNturn null}},$s.prototype={hasFeature:function(e,t){return!0},crea}return i},createDod=n||"",i}},Js.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return fo(this,e,t)},reeChild(t)},ro(this,e)},ae(e,null)},hasirstChild}s,this,e)}e(),e=t)}},iture(e,t)},has.length>0},loturn null},lookupNaturn null},isDefaulPrefix(e)}},Ss(Cs,Js),Ss(Cs,Js.prototype),to.prototype={nodeName:"#document",nodeType:Rs,doctype:null,documentElement:null,_inc:1,inment=e),e},ro(this,e)},relement=e)},this,e,t)},getEn,!0})),t},getElementsBl})),i}))},creement=t,t},createDocume=new zs,e},createTextNode:function(e){var t=new vo;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new _o;return t.ownerDocument=this,t.appendData(e),t},createCDData(e),t},createProcessingI.data=t,n},creatfied=!0,t},createEntiteName=e,t},createment=n,n},createAlName=t,n}},ws(to,Js),go.prototype={nodeType:Es,hateNode(e)},gevalue||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},seteNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},a}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttriItemNS(e)},removeAttnodeName)},removeAteNode(n)},hasAdeNS(e,t)},getAvalue||""},setAteNode(i)},getAttriemNS(e,t)},getElement)})),n}))},getElementsB)})),i}))}},to.prototype.getElementsByTagName=go.prototype.getElementsByTagName,to.prototype.getElementsByTagNameNS=go.prototype.getElementsByTagNameNS,ws(go,Js),mo.prototype.nodeType=As,ws(mo,Js),yo.prototype={data:"",subng(e,e+t)},=e.length},ta(e,0,t)},ar(js[Fs])},a(e,t,"")},r=n.length}},ws(yo,Js),vo.prototype={nodeName:"#text",nodeType:Psibling),i}},ws(vo,yo),_o.prototype={nodeName:"#comment",nodeType:Os},ws(_o,yo),bo.prototype={nodeName:"#cdata-section",nodeType:Is},ws(bo,yo),To.prototype.nodeType=Ms,ws(To,Js),ko.prototype.nodeType=Us,ws(ko,Js),So.prototype.nodeType=Ls,ws(So,Js),wo.prototype.nodeType=xs,ws(wo,Js),Co.prototype.nodeName="#document-fragment",Co.prototype.nodeType=Ns,ws(Co,Js),Eo.prototype.nodeType=Ds,ws(Eo,Js),Ao.prototype.serialill(e,t,n)},Js.prototype.toString=Po;try{if(Object.defineProperodeValue}};Object.defineProperty(Ws.prototype,"le.$$length}}),Object.defineProperty(Js.prototype,"textCon Mo(eValu"$$"+t]=n}}}catch(e){}var No={DocumentType:To,DOMException:Hs,DOMImplementation:$s,Element:go,Node:Js,NodeList:zs,XMLSerializer:,target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFtop:"",topb,TRADE:"",trade:""nus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",eplace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,r),i)}for(var o,l=++t,u=Vo;;){var c=e.charAt(l);switch(c)uri=Bo.XMLNS,t.startPrefix),"xmlns".startElement(p,c,i,e),!e.closed)return e.currentNSMap=n,e.localNSMap=r,!0;if(t.endElement(p,c,i),r)for(u in r)Object.prototype.hasOwnProperty.call(r,u)&&t.endPrefixMapping(u)}function tl(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var a=e.indexOf("</"+n+">",t),s=e.substring(t+1,a);if(/[&<]/.test(s))return/^script$/i.test(n)?(r.characteTA(),n.characters(e,t+.prototype={parse:function(e65536)>>10),n&&l(g),i.chngth,h.lineNumber++;h.columnNumber=t-u+1}var u=0,c=0,d=/.*(?:\r\n?|\n)|.*$/g,h=i.locatorar y=i.doc,v=y.creat(g));y.appe,_=m+1+b.length):b.match(/\s</)&&(b=b.replace(/[\s<].*/,""),r.error("end tag name: "+b+" maySMap,S=Tin k)Object.prototype.hasOwnProperty.call(k,w)&&i.endPrefixMapping(w);S||r.fatalEdefault:h&&l(m);var C=new sl,E=p[p.length-1].currentNSMap,A=(_=Zo(e,m,C,E,s,r),C.warning("un(h,{}),I=0;I<A;I++){var x=C[I];l(x.offset),x.locator=Jo(h,{})}i.locator=P,el(C,i,E)&&p.push(C),i.locator=h}else el(C,i,E)&&p.push(C);Bo.isHTML(C.uri)&&!C.closed?_=tl(e,_,C.tagNrror("element parse error: "+e),_=-1}_>g?g=_:o(Math.max(m,g)+1)}}(e,t,n,i,thiypes[ee:fi},Implementation,ul=ys.NAMESPACE,cl=ol.ParseError,dl=ol.XMLReader;function hl(e){return e.replace(/\r[\n\u0085]/g,"\n").replace(/[\r\u0085\u2028]/g,"\n")}function pocu t;e=t}var i}(a,r,stNS(hisfunction(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=yl.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&gl(this.locator,i),data=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(e,t,n);this.locator&&gl(this.locator,r),vl(this,r),this.doc.doctype=r}},warning:function(e){console.warn("[xmldom warning]\t"+e,ml(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,ml(this.locator))},fatalError:function(e){throw new cl(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){fl.pnew=e(uce((function(e,t){return e.concat(t)}),[])},wl=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},Cl="INVALID_NUMBER_OF_PERIOD",El="DASH_EMPTY_MANIFEST",Al="DASH_INVALID_XML",Pl="NO_BASE_URL",Il="SEGMENT_TIME_UNSPECIFIED",xl="UNSUPPORTED_UTC_TIMING_SCHEME",Ll=function(e){var t=e.baseUrl,n=void 0===t?"":t,i=e.sousolvedUri:ds(n||"",r)};if(s||l){var c,d=(s||l).split("-"),h=window.BigInt?windowNumber.MAX_SAFE_INTEGER&&"bigint"==typeof h&&(h=Number(h)),p<Number.MAX_SAFE_INTEGER&&"bigint"==typeof p&&(p=Number(p)),"bigint"==typeof(c="bigint"==typeof p||"bigint"==typeof h?window.BigInt(p)-window.BigInt(h)+window.BigInt(1):p-h+1)&&c<Number.MAX_SAFE_INTEGER&&(c=Number(c)),u.byterange={length:c,offset:h}}return u},Dl=function(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e},Ol={static:function(e){var t=e.duration,n=e.timescale,i=void 0===n?1:n,r=e.sourceDuration,a=e.periodDuration,s=Dl(e.endNumber),o=t/i;return"number"==typeof s?{start:0,end:s}:"number"==typeof a?{start:0,end:a/o}:{start:0,end:r/o}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,s=e.duration,o=e.periodStart,l=void 0===o?0:o,u=e.minimumUpdatePeriod,c=void m*a/s),v=Math.floor((f-g-h)*a/s),_=Math.floor((f-g)*a/s);return{start:Math.max(0,v),end:"number"==typeof p?p:Math.min(y,_)}}},Rl=function(e){var t=e.type,n=e.duration,i=e.timescale,r=void 0===i?1:i,a=e.periodDuration,s=e.sourceDuration,o=Ol[t](e),l=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}(o.start,o.end).map(function(e){return function(t){var n=e.duration,i=e.timescale,r=void 0===i?1:i,a=e.periodStart,s=e.startNumber;return{number:(void 0===s?1:s)+t,duration:n/r,timeline:a,time:t*n}}}(e));if("static"===t){var u=l.length-1,c="number"==typeofd 0===hrow new Error(Pl);var h=Ll({baseUrl:t,source:i.sourceURL,range:i.range}),p=Ll({baseUrl:t,source:t,indexRange:s});if(p.map=h,d){var f=Rl(e);f.length&&(p.duration=f[0].duration,p.timeline=f[0].timeline)}else r&&(p.duration=r,p.timeline=o);return p.presentationTime=l||o,p.number=c,[p]},Nl=function(e,t,n){var i,r=e.sidx.map?e.sidx.map:null,a=e.sidx.duration,s=e.timeline||0,o=e.sidx.byterange,l=o.offset+o.length,u=t.timescale,c=t.references.filter((function(e){return 1!==e.referenceType})),d=[],h=e.endList?"static":"dynamic",p=e.sidx.timeline,f=p,g=e.mediaSequence||0;i="bigint"==typeof t.firstOffset?window.BigInt(l)+t.firstOffset:l+t.firstOffset;for(var m=0;m<c.length;m++){var y=t.references[m],v=y.referencedSize,_=y.subsegmentDuration,b=void 0;b="bigint"==typeof i?i+window.BigInt(v)-window.BigInt(1):i+v-1;var T="".concat(i,"-").concat(b),k=Ml({baseUrl:n,timescale:u,timeline:s,periodStart:p,presentationTime:f,number:g,duration:_,sourceDuration:a,indexRange:T,type:h})[0];r&&(k.map=r),d.push(k),i+="bigint"==typeof i?window.BigInt(v):v,f+=_/u,g++}return e.segments=d,e},Ul=["AUDIO","SUBTITLES"],Bl=function(e){return(t=e,n=function(e){return e.timeline},kl(t.reduce((function(e,t){return t.forEach((function(t){e[n(t)]=t})),e}),{}))).sort((function(e,t){return e.timeline>t.timeline?1:-1}));var t,n},jl=function(e){var t,n,i=[];return t=e,n=function(e,t,n,r){i=i.concat(e.playlists||[])},Ul.forEach((function(e){for(var i in t.mediaGroups[e])for(var r in t.mediaGroups[e][i]){var a=t.mediaGroups[e][i][r];n(a,e,i,r)}})),i},Fl=function(e){var t=e.playlist,n=e.mediaSequence;t.mediaSequence=n,t.segments.forEach((function(e,n){e.number=t.mediaSequence+n}))},ql=function(e){var t=e.oldManifest,n=e.newManifest,i=t.playlists.concat(jl(t)),r=n.playlists.concat(jl(n));return n.timelineStarts=Bl([t.timelineStarts,n.timelineStarts]),function(e){var t=e.oldPlaylists,n=e.newPlaylists,i=e.timelineStarts;n.forEach((function(e){e.discontinuitySequence=i.findIndex((function(t){return t.timeline===e.timeline}));var n=function(e,t){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null}(t,e.attributes.NAME);if(n&&!e.sidx){var r=e.segments[0],a=n.segments.findIndex((function(e){return Math.abs(e.presentationTime-r.presentationTime)<.016666666666666666}));if(-1===a)return Fl({playlist:e,mediaSequence:n.mediaSequence+n.segments.length}),e.segments[0].discontinuity=!0,e.discontinuityStarts.unshift(0),void((!n.segments.length&&e.timeline>n.timeline||n.segments.length&&e.timeline>n.segments[n.segments.length-1].timeline)&&e.discontinuitySequence--);n.segments[a].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,e.discontinuityStarts.unshift(0),e.discontinuitySequence--),Fl({playlist:e,mediaSequence:n.segments[a].number})}}))}({oldPlaylists:i,newPlaylists:r,timelineStarts:n.timelineStarts}),n},Vl=function(e){return e&&e.uri+"-"+(t=e.byterange,n="bigint"==typeof t.offset||"bigint"==typeof t.length?window.BigInt(t.offset)+window.BigInt(t.length)-window.BigInt(1):t.offset+t.length-1,"".concat(t.offset,"-").concat(n));var t,n},Hl=function(e){var t=e.reduce((function(en Oes.[n].tivar t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.reduce((function(e,r){var a=r.attributes.role&&r.attributes.role.value||"",s=r.attributes.lang||"",o=r.attributes.label||"main";if(s&&!r.attributes.label){var l=a?" (".concat(a,"tio=e.equoca},Kl=function(e){var t=e.attributes,n=e.segments,i=e.sidx,r=e.discontinuityStarts,a={attributes:_defineProperty({NAME:t.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:t.width,height:t.height},CODECS:t.codecs,BANDWIDTH:t.bandwidth},"PROGRAM-ID",1),uri:"",endList:"static"===t.type,timeline:t.periodStart,resolvedUri:t.baseUrl||"",targetDuration:t.duration,discontinuityStarts:r,timelineStarts:t.timelineStarts,segntProtection=t.contentProtection),t.serviceLocation&&(a.attributes.serviceLocation=t.serviceLocation),i&&(a.sidx=i),a},Yl=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},Ql=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.cfunction(e){return e?Object.keys(e).reduce((function(t,n){var i=e[n];return t.concat(i.playlists)}),[]):[]},Zl=function(e,t,n){var i=e.NOW,r=e.clientOffset,a=eperiodStart,u=void 0===l?0:l,c=e.minimumUpdatePeriod,d=(i+r)/1e3+(void 0===c?0:c)-(a+u);return Math.ceil((d*o-t)/n)},eu=functionpdatePeriod,r=void 0===i?0:i,a=e.mgth;g++){var m=t[g],y=m.d,v=m.r||0,_=m.t||0;f<0&&(f=_),_&&_>f&&(f=_);var b=void 0;if(v<0){var T=g+1;b=T===t.length?"dynamic"===n&&r>0&&s.indexOf("$Number$")>0?Zl(e,f,y):(o*u-f)/y:(t[T].t-f)/y}else b=v+1;for(var k=d+p.length+b,S=d+p.length;S<k;)p.push({number:S,duration:y/u,time:f,timeline:h}),f+=y,S++}return p},tu=/\$([A-z]*):(r=i?parimeline:t.timeline,duration:t.duration,resolvedUri:ds(e:t.media,range:t.mediaRange});return s.map=a,s}(e,t)}));return n&&(s=Rl(e)),t&&(s=eu(e,t)),s.map((function(t,n){if(o[n]){var i=o[n],r=e.timescale||1,s=e.presentationTimeOffset||0;return i.timeline=t.timeline,i.duration=t.duration,i.number=t.number,i.presentationTime=a+(t.time-s)/r,i}})).filter((function(e){return e}))},au=function(e){var t,n,i=e.attributes,r=e.segmentInfo;r.template?(n=iu,t=Tl(i,r.template)):r.base?(n=Ml,t=Tl(i,r.base)):r.list&&(n=ru,t=Tl(i,r.list));var a={attributes:i};if(!n)return a;var s=n(t,r.segmentTimeline);if(t.duration){var o=t,l=o.duration,u=o.timescale,c=void 0===u?1:u;t.duration=l/c}else s.length?t.duration=s.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return a.attributes=t,a.segments=s,r.base&&t.indexRange&&(a.sidx=s[0],a.segments=[]),a},su=function(e,t){return wl(e.childNodes).filter((function(e){return e.tagName===t}))},ou=function(e){return e.textContent.trim()},lu=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=_slicedToArray(t.slice(1),6),i=n[0],r=n[1],a=n[2],s=n[3],o=n[4],l=n[5];return 31536e3*parseFloat(i||0)+2592e3*pa+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return lu(e)},suggestedPresentationDelay:function(e){return lu(e)},type:function(e){return e},timeShiftBufferDepth:function(e){re){return parseInt(unction(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?lu(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){ret1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},hu=function(e,t){return t.length?Sl(e.map((function(e){return t.map((function(t){var n=ou(t),i=ds(e.baseUrl,n),r=Tl(cu(t),{baseUrl:i});return i!==n&&!r.serviceLocation&&e.serviceLocation&&(r.serviceLocation=e.serviceLocation),r}))}))):e},pu=function(e){var t=su(e,"SegmentTemplate")[0],n=su(e,"SegmentList")[0],i=n&&su(n,"SegmentURL").t:n&&Tl(cu(n),{segmentUrls:i,initialization:cu(l)}),base:r&&Tl(cu(r),{initialization:cu(l)})};return Object.keys(c).forEach((function(e){c[e]||delete c[e]})),c},fu=function(e){return Sl(su(e.node,"EventStream").map((function(t){var n=cu(t),i=n.schemeIdUri;return su(t,"Event").map((function(t){var r=cu(t),a=r.presentationTime||0,s=n.timescale||1,o=r.duration||0,l=a/s+e.attributes.start;return{schemeIdUri:i,value:n.value,id:r.id,start:l,end:l+o/s,messageData:ou(t)||r.messageData,contentEncoding:n.contentEncoding,presentationTimeOffset:n.presentationTimeOffset||0}}))})))},gu=function(e,t,n){return function(i){var r,a=cu(i),s=hu(t,su(i,"BaseURL")),o=su(i,"Role")[0],l={role:cu(o)},u=Tl(e,a,l),c=su(i,"Accessibility")[0],d="urn:scte:dash:cc:cea-608:2015"===(r=cu(c)).schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map((function(e){var t,n;if(n=e,/^CC\d=/.test(e)){var i=_slicedToArray(e.split("="),2);t=i[0],n=i[1]}else/^CC\d$/.test(e)&&(t=e);return{channel:t,language:n}})):"urn:scte:dash:cc:cea-708:2015"===r.schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map((function(e){var t={channel:void 0,language(function(e){var n=_slicedToArray(e.split(":"),2),i=n[0],r=n[1];"lang"===i?t.language=r:"er"===i?t.easyReader=Number(r):"war"===ce((function(e,t){var n=cu(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());var i=du[n.schemeIdUri];if(i){e[i]={attributes:n};var r=su(t,"cenc:pssh")[0];if(r){var a=ou(r);e[i].pssh=a&&hs(a)}}return e}),{});Object.keys(f).length&&(f(e.length>1&&t({type:"warn",message:"The MPD manifest should contain no more than one ContentSteering tag"}),!e.length)return null;var n=Tl({serverURL:ou(e[0])},cu(e[0]));return n.queryBeforeStart="true"===Location"),h=cu(e),p=(e,r tn function(e){var t,n=e.dashPlaylists,i=e.locations,r=e.contentSteering,a=e.sidxMapping,s=void 0===a?{}:a,o=e.previousManifest,l=e.eventStream;if(!n.length)return{};var u=n[0].attributes,c=u.sourceDuration,d=u.type,h=u.suggestedPresentationDelay,p=u.minimumUpdatePeriod,f=Hl(n.filter(Yl)).map(Kl),g=Hl(n.filter(Ql)),m=Hl(n.filter($l)),y=n.map((function(e){return e.attributes.captionServices})).filter(Boolean),v={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},_defineProperty(t,"CLOSED-CAPTIONS",{}),_h,k));.tisOwnProperty("3D")&&(e[i]["3D"]=t["3D"])})),e):e})Strh:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error(xl)}return n}(vu(e))},Tu=Math.pow(2,32),ku=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*Tu+n.getUint32(4)},Su=function(e){var t=new DataView(e.buffer,e.byte,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},i=12;0=Uintefer83647&+4),startsWithSap:!!(128&e[i+8]),sapType:(112&e[i+8])>>>4,sapDeet:n}+5],|e[t+9];return(16&n)>>4?i+20:i+10}(t,n),e(t,n))},Eu=function(e){ret==i&&)})):=(t[a]<<24|t[a+1]<<16|t[a+2];var l=a+s;if(l>t.length){if(i)break;l=t.leh(u):r.push.apply(r,e(u,n.s83,128,103]),SegmentInfo:is([21,73,169,102]),Tracks:is([22,84,174,107]),Track:is([174]),TrackNumber:is([215]),DefaultDuration:is([35,227,131]),TrackEntry:is([174]),TrackType:is([131]),FlagDefault:is([136]),CodecID:is([134]),CodecPrivate:is([99,162]),VideoTrack:is([224]),AudioTrack:is([225]),Cluster:is([31,67,182,117]),Timestamp:is([231]),TimestampScale:is([42,215,177]),BlockGroup:is([160]),BlockDuration:is([155]),Block:is([161]),SimpleBlock:is([163])},Iu=[128,64,32,16,8,4,2,1],xu=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var r=function(e){for(var t=1,n=0;n<Iu.length&&!(e&Iu[n]);n++)t++;return t}(e[t]),a=e.subarray(t,t+r);return n&&((a=Array.prototype.slice.call(e,t,t+r))[0]^=Iu[r-1]),{length:r,value:ss(a,{signed:i}),bytes:a}},Lu=function e(t){return"string"==typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"==typeof t?os(t):t},Du=function e(t,n,i){if(i>=n.length)return n.length;var r=xu(n,i,!1);if(us(t.bytes,r.bytes))return i;var a=xu(n,i+r.length);return e(t,n,i+a.length+a.value+r.length)},Ou=function e(t,n){n=function(e){return Array.isArray(e)?e.map((function(e){return Lu(e)})):[Lu(e)]}(n),t=is(t);var i=[];if(!n.length)return i;for(var r=0;r<t.length;){var a=xu(t,r,!1)a,tngt+u.1;n;ifnct);v3:i,10=Cufmplen{reetuwinloc.loew pro".cforar ction(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},lc=function(e){if(e&&e.length&&e.end)return e.end(e.lengetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targeegments.length),t<e.mediaSequence)return 0;return{result:r.end-r.duration,precise:!0}}for(;i--;){if(void 0!==(r=e.segments[i]).end)return{result:rt)se)n{rn){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return window.Infinity}return gc(e,t,n)},yc=function(e){var t=e.defaultDuration,n=e.durationList,i=e.startIndilrn!(!e&&!t||!e&&t||e&t.uri||e.uri!==t.uri))))},Cc=function(e,t){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},i=!1;for(var r in n){for(var a in n[r])if(i=t(n[r][a]))break;if(i)break}return!!i},Ec=function(e){if(!e||!e.playlists||!e.playlists.length)return Cc(e,(function(e){return e.playlists&&e.playlists.length||e.uri}));for(var t=function(t){var n=e.playlists[t],i=n.attributes&&n.attributes.CODECS;return i&&i.split(",").every((function(e){return Ka(e)}))||Cc(e,(function(e){return wc(n,e)}))?"continue":var i=t(n);if("continue"!==i&&"object"==typ i=t||0,r=vc(e,t,!0,n);return null===r?ec():(r<i&&(r=i),ec(i,r))},getMediaInfoForTime:function(e){for(var t=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,r=e.startingPartIndex,a=e.startTime,s=e.exactManifestTimings,o=n-a,l=dc(t),u=0,c=0;c<l.length;cumber"!=typeof r||"number"!=typeof d.partIndex||r===d.partIndex)){u=c;break}}if(o<0){if(u>0)for(var h=u-1;h>=0;h--){var p=l[h];if(o+=p.duration,s){if(o<0)continue}else if(o+tc<=0)continue;return{partIndex:p.partIndex,segmentIndex:p.segmentIndex,startTime:a-yc({defaultDuration:t.targetDuration,durationList:l,startIndex:u,endIndex:h})}}return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:n}}if(u<0){for(var f=u;f<0;f++)if((o-=t.targetDuration)<0)return{partIndex:l[0]&&l[0].partIndex||null,segmentIndex:l[0]&&l[0].segmentIndex||0,startTime:n};u=0}for(var g=u;g<l.length;g++){var m=l[g];if(o-=m.duration,s){if(o>0)contin_c,-ur},Dments[2]:xc;e.uri=t;for(var i=0;i<e.playlists.length;i++)if(!e.playlists[i].uri){var r="placeholder-uri-".concat(i);e.playlists[i].uri=r}var a=Ec(e);Lc(e,(function(t,i,r,s){if(!t.playlists||!t.playlists.length){if(a&&"AUDIO"===i&&!t.uri)for(var o=0;o<e.playlists.length;o++){var l=e.playlists[o];if(l.attributes&&l.attributes.AUDIO&&l.attributes.AUDIO===r)return}t.playlists=[cn({}s=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];Dc({playlist:n,id:Ic(t,n.uri)}),n.resolvedUri=Qu(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attribufunctionurn _createClass(e,[{key:"setOffset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(null===this.offset_&&e.length){var t=_slicedToArray(e,1)[0];void 0!==t.programDateTime&&(this.offset_=t.programDateTime/1e3)}}},{key:"setPendingDateRanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var t=_slicedToArray(e,1)[0].startDate.getTime();this.trimProcessedDateRanges_(t),this.pendingDateRanges_=e.reduce((function(e,t){return e.set(t.id,t),e}),new Map)}}},{key:"processDateRange",value:function(e){this.pendingDateRanges_.delete(e.id),this.processedDateRanges_.set(e.id,e)}},{key:"getDateRangesToProcess",value:function(){var e=this;if(null===this.offset_)return[];var t={},n=[];this.pendingDateRanges_.forEach((function(i,r){if(!e.processedDateRanges_.has(r)&&(i.startTime=i.startDate.getTime()/1e3-e.offset_,i.processDateRange=function(){return e.processDateRange(i)},n.push(i),i.class))if(t[i.class]){var a=t[i.class].push(i);i.classListIndex=a-1}else t[i.class]=[i],i.classListIndex=0}));for(var i=0,r=n;i<r.length;i++){var a=r[i],s=t[a.class]||[];a.endDate?a.endTime=a.endDate.getTime()/1e3-this.offset_:a.endOnNext&&s[a.classList.resolvedUri=Qu(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((function(e){e.resolvedUri||(e.resolvedUri=Qu(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((function(e){e.resolvedUri||(e.resolvedUri=Qu(t,e.uri))}))},Bc=function(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var i=0;i<n.preloadHints.length;i++)if("MAP"===n.preloadHints[i].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},jc=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},Fc=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:jc,i=Zu(e,{}),r=i.playlists[t.id];if(!r)return null;if(n(r,t))return null;t.segments=Bc(t);var a=Zu(r,t);if(a.segments||[];for(var s=0;s<t.skip.skippedSegments;s++)t.segments.unshift({skipped:!0})}a.segments=function(e,t,n){var i=e.slice(),r=t.slice();n=n||0;for(var a,s=[],o=0;o<r.length;o++){var l=i[o+n],u=r[o];l?(a=l.map||a,s.push(Nc(l,u))):(a&&!u.map&&(u.map=a),s.push(u))}return s}(r.quence)}a.segments.forEach((function(e){Uc(e,a.resolvedUri)}));for(var o=0;o<i.playlists.length;o++)i.playlists[o].id===t.id&&(i.playlists[o]=a);return i.playlists[t.id]=a,i.playlists[t.uri]=a,Lc(e,(function(e,n,i,r){if(e.playlists)for(var s=0;s<e.playlists.length;s++)t.id===e.playlists[s].id&&(e.playlists[s]=a)})),i},qc=function(e,t){var n=e.segments||[],i=n[n.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],a=r&&r.duratio(e){function t(e,n){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(_classCallCheck2(this,t),i=_possibleConstructorReturn(this,_getProtod(_assertThisInitializdleLoadedPlaylist_",value:function(){var e=this.media();if(e){this.dateRangesStorage_.setOffset(e.segments),this.dateRangesStorage_.setPendingDateRanges(e.dateRanges);var t=this.dateRangesStorage_.getDateRangesToProcess();t.length&&this.addDateRangesToTextTrack_&&this.addDateRangesToTextTrack_(t)}}},{key:"handleMediaupdatetimeout_",value:function(){var e=this;if("HAVE_METADATA"===this.state){var t=this.media(),n=Qu(this.main.uri,t.uri);this.llhls&&(n=function(e,t){if(t.endList||!t.serverControl)return e;var n={};if(t.serverControl.canBlockReload){var i=t.preloadSegment,r=t.mediaSequence+t.segments.length;if(i){var a=i.parts||[],s=pc(t)-1;s>-1&&s!==a.length-1&&(n._HLS_part=s),(s>-1||a.length)&&r--}n._HLS_msn=r}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var o=new window.URL(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){n.hasOwnProperty(e)&&o.searchParams.set(e,n[e])})),e=o.toString()}return e}(n,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials},(function(t,n){if(e.request)return t?e.playlistRequestError(e.request,e.media(),"HAVE_METADATA"):void e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}))}}},{key:"playlistRequestError",value:function(e,t,n){var i=t.uri,r=t.id;this.request=null,n&&(this.state=n),this.error={playlist:this.main.playlists[r],status:e.status,message:"HLS playlist request error at URL: ".concat(i,"."),responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")}},{key:"parseManifest_",value:function(e){var t=th(["preloadSegment",targetDuration defaulting to ".concat(d)cker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),c.partTargetDuration=p}return c}({onwarn:function(e){var i=e.message;return t.logger_("m3u8-p},oninfo:function(e){var i=e.message;return t.logger_("m3u8-parser info for ".concat(n,": ").concat(i))},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,llhls:this.llhls})}},{key:"haveMetadata",value:function(e){var t=e.playlistString,n=e.playlistObject,i=e.url,r=e.id;this.request=null,this.state="HAVE_METADATA";var a=n||this.parseManifest_({url:i,manifestString:t});a.lastRequest=Date.now(),Dc({a.partTargetDuration||a.targetDurat.playlists[e])throw newedia_=e,void(a&&(this.trigger("mediachanging"),"HAVE_MAIN_MANIFEST"===r?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(qc(e,!0)),a){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xh,withCredentials:this.withCredentials},(function(t,i){if(n.request){if(e.lastRequest=Date.now(),e.resolvedUri=$u(e.resolvedUri,i),t)return n.playlistRequestError(n.request,l:e.uri,id:e.id}),"HAVE_MAIN_MANIFEST"===r?n.trigger("loadedmetadat),".stte&){vn||ull,t.load()}),i)}else this.started?n&&!&(window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&ut((functioediaU.href,resolvedUri:window.location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.main.playlists[0].id}),this.trigger("loadedmetadata")}}]),t}(Mc),Hc=Ea.xhr,zc=function(e,t,n,i){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-eponseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),i(t,e)},Wc=function(){var e=function e(t,n){t=Zu({timeout:45e3},t);var i=e.beforeRequest||Ea.Vhs.xhr.beforeRequest,r=e._requestCallbackSet||Ea.Vhs.xhr._requestCallbackSet||new Set,a=e._responseCallbackSet||Ea.Vhs.xhr._responseCallbackSet;i&&"function"==typeof i&&(Ea.log.warn("beforeRequest is deprecated, use onRequest instead."),r.add(i));var s=!0===Ea.Vhs.xhr.original?Hc:Ea.Vhs.xhr,o=function(e,t){if(e&&e.size){var n=t;return e.forEach((function(e){n=e(n)})),n}}(r,t);r.delete(i);var l=s(o||t,(function(e,t){return function(e,t,n,i){e&&e.size&&e.forEach((function(e){e(t,n,i)}))}(a,l,e,t),zc(l,e,t,n)})),u=l.abort;return l.abort=function(){return l.aborted=!0,u.apply(l,arguments)},l.uri=t.uri,l.requestTime=Date.now(),l};ret-"+("bigint"==typeof t.offset||"bigint"==typeof t.length?window.BigInt(t.offset)+window.BigInt(t.length)-window.BigInt(1):t.offset+t.length-1)),n},Xc=function(eength)+n+(t%2?" ":"")},Yc=function(e):"."},Qc=function(e){vn(n){var i=e[n];ns(i)?t[n]={bytes:i.bh}ck must be provided"n,i=0,r=t.segments[r]).videoTimingInfo?n.t be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var s={mediaSeconds:i},o=funcg"}){vmeObject))return null;for(var r=0;r<t.segments.length-1&&(i=t.segments[r],!(n<new Date(t.segments[r+1].dateTimeObject)));r++);var a,s=t.segments[t.segments.length-1],o=s.dateTimeObject,l=s.videoTimingInfo?(a=s.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:s.duration+.25*s.duration;return n>new Date(o.getTime()+1e3*l)?null:(n>new Date(o)&&(i=s),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Ac.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})}(t,n);if(!c)return u({message:"".concat(t," was not found in the stream")});var d=c.segment,h=function(e,t){var n,i;try{n=new Date(e),i=new Date(t)}catch(e){}var r=n.getTime();return(i.getTime()-r)/1e3}(d.dateTimeObject,t);if("estimate"===c.type)return 0===r?u({message:"".concat(t," is not buffered yet. Try again")}):ion(e,t){if(4===e.readyState)return t()},rd=function(e,t,n){var i,r=[],a=!1,s=function(e,t,i,r){return t.abort(),a=!0,n(e,t,i,r)},o=function(e,t){if(!a){if(e)return s(!=typeof e})),t.length<=1)return is(t[0]);var i=t.reduce((function(e,t,n){return e+(t.byteLength||t.length)}),0),r=new Uint8Array(i),a=0;return t.forEach((function(e){e=is(e),r.set(e,a),a+=e.byteLength})),r}(r,ls(n,!0)),i=i||Cu(r),r.length<10||i&&r.length<i+2)return id(t,(function(){return s(e,t,"",r)}));var o=Xu(r);return"ts"===o&&r.length<188||!o&&r.length<376?id(t,(function(){return s(e,t,"",r)})):s(null,t,o,r)}},l={uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){t.total,t.statusCode:e.status},o)}))}range,s=r.byterange;if(a&&!s||!a&&s)return!1;if(a.offset!==s.offset||a.length!==s.length)return!1}}return!0},ocat(r)},ld=function(null:r},ud=function(e,t){rege.length},cd=functi==s&&s;if(i.vhs_=n,i.childPlaylist_=e,iode:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)}},{key:"addSidxSegments_",value:function(e,t,n){var i=this,r=e.sidx&&Vl(e.sidx);if(e.sidx&&r&&!this.mainPlaylistLoader_.sidxMapping_[r]){var a=$u(e.sidx.resolvedUri),s=function(a,s){if(!i.requestErrored_(a,s,t)){var o,l=i.mainPlaylistLoader_.sidxMapping_;try{o=Su(is(s.response).subarray(8))}catch(e){return void i.requestErrored_(e,s,t)}return l[r]={sidxInfo:e.sidx,sidx:o},Nl(e,o,e.sidx.resolvedUri),n(!0)}};this.request=rd(a,this.vhs_.xhr,(function(t,n,r,o){if(t)return s(t,n);if(!r||"mp4"!==r)return s({status:n.status,message:"Unsupported ".concat(r||"unknown"," container type for sil,this.mediaRequest_=nulr_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.off()}},{key:"hasPendingRequest",value:function(){return this.request||this.mediaRequest_}},{key:"stopRequest",value:function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}}},{key:"media",value:function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.mainPlaylistLoader_.main.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.mainPlaylistLoader_.main.playlists[e]}var i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),this.trigger("mediachange")));i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,(function(i){t.haveMetadata({startingState:n,playlist:e})})))}},{key:"haveMetadata",value:function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),"HAVE_MAIN_MANIFEST"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")}},{key:"pause",value:function(){this.mainPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.mainPlaylistLoader_.createMupOnMedia_),this.mainPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),window.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaialue:function(e){var t=thi}},{key:"start",value:functiPlaylistLoader_.mainXml_;return t.mainPlaylistLoader_.mainXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?t.mainLoaded_=Date.parse(i.responseHeadt.mainPlaylistLoader_.srcUrl,i),r?(t.handleMain_(),void t.syncClientServerClock_((function(){return e(i,r)}))):e(i,r)}"HAVE_NOTHING"===t.state&&(t.started=!1)}))}},{key:"syncClientServerClock_",value:function(e){var t=this,n=bu(this.mainPlaylistLoader_.mainXml_);return null===n?(this.mainPlaylistLoader_.clientOffset_=this.mainLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.mainPlaylistLoader_.cli(th()}})))}},{key:"haveMain_",value:function(){this.state="HAVE_MAIN_MANIFEST",this.isMain_?this.trigger("loadedplaylist")function(){this.mediaRequest_=null;var e,t,n,i,r,a,s,o=this.mainPlaylistLoader_.main,l=(e={mainXml:this.mainPlaylistLoader_.mainXml_,srcUrl:this.mainPlaylistLoader_.srcUrl,stLoader_.srcUrl&aylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(window.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.main&&e.main.minimumUpdatePer.targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_)))nction(e){var t=this.mainPlaylStret}UFOWR_}(e;,ioSondoct=[{rt)onvmCo,0en.dnd250,rafunction(e){var t,i,r=e.sps||[]ngth;h)>>>8),s.push(255&r[t].by.pus0,0,0,0,0,0,0,0,0,0,0,0,e){var t=new Uint8Ari=n(S.tfdt,new Uint8},h=function(e){retu>16,(65280&e.id)>>8,n|i|r|a,1,(4278190080&e.len5&e.length,(4278190080&t)>>=(4278190080&o.duration)>>>24,r[i++]=(16711680&o.duration)>>>16,r[i++]=(65427819008o.>>.isLeading<<2|o.flags.dependsOn,r[i++]=o.flags.asRedundancy<<4|o.fgs.isNonSyncSample,adationPriority,r[iPriority,r[i++]=(4278190080&o.compositionTimeOffset)>>>24,r[i++]{var n={size:0,flags:{isLead]).nalUnitType?(i.length&&(iioning_rbsp_idr"===n&(!i.duration||i.duranalCount=0,i.duration=0,i.pts=e[0].pts,i.=e[t]).keyFrame?(i.length&&(r.pushon,i.nalCount+=NalData:functi),i},concatenareturn s}},ie=[33,16t){return K(Y(e),t)},Z=function(deoTs:$,videoTsToAudioTs:J,metadataTsToSeconds:Zect.keys(t).reduce((functio.floor(ue.videoTsToAudioTs(dntDts=1/0,e.filter((functth;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r}},de=oe.ONE_SECOND_IN_TS,he={ce e.maxSegmentDts,deStartInfo.baseMediaDecodeTime,n+=egmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timeli.dts),void 0===e.minSegmentDts?e.ts?e.maxSegmentDts=t.dts:e.maxSegm(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=i,n.payloadSize=r,n.paylo=0,urn 181!==e.payloadardEmulationPreventioength,r=[],a=1;a<i-2;)0+2),a+=2):a++;if(0===an"!=typeof t.parse70),new Ee(0,1),new Ee(_&&(this.cc708Stream_=nis.trig_&&(this.cc708Stre.on("done",this.trigger.bind(ton(e){var t,n,i;if("sei_rbsp"==seCaptiforEach((function(e,t){e.presortIndex=t})),thiis.captionPackets_.forEacStreams(e)},me.prototype.flmSameDts_=0,this.activeCea608C2,4129:160,4133:8230,4138:352,9:376,4214:8539,4215222:9126,4223:9121,4256:1is.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},_e.prototyptotype.clearText=function(){this.rows=[""],this.rowIdx=0},_e.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),s.rows.length||1===this.rows.l},_e.prototype.backspace=f=function(e){this.currentWindow=tkeys(r).forEach((function(e)):(null===i.current708Pacrent708Packet={data:[],ptsVals:[]}},Te.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,i=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.pu31&(a=t[r++]),7===(n=a>>5)&vices[e];for(s||(s=this.initService(e,r));r<t+n&&r<a.length;r++)i=a[r],ve(i)?r=this.handleText(r,s):24===i?r=this.multiByteCharacter(r,s):16===i?r=this.extendedCommands(r,s):128<=i&&i<=135?r=this.setCurrentWind===i?r=this.hideWindows(r,s):1i?s.currentWindow.clearTee.prototype.initService=funct),(function(t){r.f,s,o=n&&n.isExtended,l=n&&n.isMultiByte,u=this.current708Packet.data,c=o?4096:0,d=u[e],h=u[e+1],p=t.currentWindow;if(l?(r=[d,h],e++):r=[d],t.textDecoder_&&!o)i=t.textDecoder_.decode(new Uint8Array(r));else if(l){var f=r.map((function(e){return("0"+(255&e).toString(16)).slice(-2)})).join("");i=String.fromCharCode(parseInt(f,16))}else s=ye[a=c|d]||a,i=4096&a&&a===s?"":String.fromCharCode(s);return p.pendingNewLine&&!p.isEmpty()&&p.newLine(this.getPts(e)),p.pendingNewLine=!1,p.addText(i),e},Te.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,i=n[e+1],r=n[e+2];return ve(i)&&ve(r)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},Te.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.dataon(e,t){var n=this.current708Packet.data,i=n[e],r=7&i;t.setCurrentWindow(r);var a=tock=(8&i)>>3,a.priority=7&i,i=n[++e],a.relativePositioning=(128&i)>>7,a.anchorVertical=127&i,i=n[++e],a.anchorHorizontal=i,i=n[++e],a.anchorPoint=(240&i)>>4,a.rowCount=15&i,i=n[++e],a.cion=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,i=n[++e],r.row=15&i,i=n[++e],r.column=63&i,e},Te.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var ke={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,54571:217,572:249,573:219,57_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastCont&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mod_="popOn",this.cleas.displayed_=this.nonDiss;else if(t===this.ROLL_UPetRollUp(e.pts);else if_[this.row_].text.slice(0,-yed(e.pts),this.displayed_=Ce),this.displayed_=Ce()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=Se((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_].text=t&&this.addFormatting(){var s=3&r;this.nonDisplayed_[this.row_].offset=s,this.column_+=s}else if(this.isPAC(i,r)){var o=we.indexOf(7968&t);if("rollUp"===this.mode_&thinction(e){var t=this,n=function(e){t.trig];this.displaye.text.length&&i.push({text:e.text,line:t+1,position:10+Mathl==this.starants===thiEND_Othis.is.COisSpecialCharacter=fsNormalChar=function(e){return e>=32&&e<=127},Ee.prototype.sepe!==this.type_||(void 0===i&&(i=e.dts),e.dts=xe(e.dts,i),e.pts=xe(e.pts,,t,n))},Fe=function(e t,n={descriptor:e&&e.descriptor},i=0,r=[],a=0;if(De.protngth&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){t===tt&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new $e,Ke=function(){var e,t,n,i;Ke.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.,r;if(1&e[itingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?tPes_(t,i,n)},this.processPes_=functiounction(){},pes:function(){if(!n&&e){var i={type:"metadata",tracks:[]};null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return thil(t(var a=t.byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<a;)switch(rray(n+3,e-2));do{e++}while(1!==tthis.triggon(){t&&t.byteLe(),this.trigger("eer_set_rbsp+,r.shift()),n[a]=e[s];return n},a=function(e){var t,n,i,r,a,o,l,u,c,d,h,p,f=0,g=0,m=0,y=0,v=[1,1];if(n=(t=new gt(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),pt[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.0;pe ixpGBit(t,n+=_t(t,n))},Tt=functeLength),n++,c.set(l),this)),"pic_parameter_set_rbsp"!==t.nalvoid 0,r=void 0},this.getGopForFusion_=function(t){var n,rseStream=new Ot.TransportParseStream,r.elementaryStream=new Ot.ElementaryStream,r.timestampRolloverStream=new Ot.TimestampRolloverStream,r.adtsStream=new Mt,r.h264Stream=new.Caream).pipe(r.tita"===a.type){for(s=a.trseMr.vStrr)},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStaiscimi+=4(t);return n},un=f(4)gs[2],o=16&i.flag=r.size}re","traf"])ion(e,t){var i=n[t];a.push({mdat:e,traf:i})})),a.forEach((function(e){var n,i,a=ee.csete.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0})),e.on("log",(function(e){r.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length)&&(n!==e[0]||i!==t[n])},this.parse=function(e,a,s){var o;if(!this.isInitialized())return null;if(!a||!s)return null;if(this.isNewInit(a,s))n=a[0],i=s[n];elsengse(r iull},this.push;t.forEac)return n(){this.clearParsedCaptions(),this.resetCaptionar t=0,n=Strin(e.subarray(l))).length,i=(+e.toString(16)).slice(-2)},An=nn,Pn=Zt,In=wn,xn=un,Ln=ln,Dn=sn,On=z.getUint64,Rnew {va10]2,i+=3;break;dartitioning_rbsp_idr"===Hn(31&n[r+3])&&(nction(e,t){for(var n,i=0,r=Ynitch(t.table[i]){case Wn.H264_STREAM_TYPE:n.video=[],Jn(e,t,n),0===n.video.length&&delete n.video;break;case Wn.ADTS_STREAM_TYPE:n.audio=[],$n(e,t,n),0===n.audio.length&&delete n.audio}}return n=0;e.length-o>=3;){switch(Xnull===a&&(t=e.subarray(o,o+s),a=Xn.aac.parseAacTimestamp(t)),o+=s;break;case"audio":if(e.length-o<7){n=!0;break}if((s=Xn.aac.parseAdtsSize(e,o))>e.length){n=!0;break}null===r&&(t=e.subarray(o,o+s),r=Xn.aac.parseSampleRate(t)),i++,o+=s;break;default:o++}if(n)return null}if(null===r||null===a)return null;var l=Kn/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*l,pts:a+1024*i*l}]}}(e):Zn(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;(void 0===n||isNaN(n))&&(n=e.audio[0].dts),e.audis/Kn,e.ptsTime=e.ptvideo.forEach((function(e){e.dts=Gn(e.dts,i),e.pts=Gn(e.pts,i),e.dtsTime=e.dts/Kn,e.ptsTiime=r.pts/Kn}}}(n,t),n):null},ti=fturn _createClass(e,[{ks.transmuxer.dispose{var n=t.initSegment;t.ini.postMessage({action:"data",),t.on("done",(functiont.end.dts),presen:fuart.ON||!eTsr])sh"f.postMessage({action:"due:dataptions,f=e.onDone,g=e.onEndedTimeline,m=e.onTransmuxerLog,y=e.isEndOfTimeline,v={buffer:[]},_=y;if(t.onmessage=function(n){t.currentTransmux===e&&("data"===n.data.action&&function(e,t,n){var i=e.data.segment,r=i.type,a=i.initSegment,s=i.captions,o=i.captionStreams,l=i.metadata,u=i.videoFrameDtsTime,c=i.videoFraata.action&&p(n.data.caption),"endedtimeline"===n.data.action&&(_=!1,g()),"log"===n.data.action&&m(n.data.log),"transmuxed"===n.data.type&&(_||(t.onmessage=null,function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)}({transmuxedData:v,callback:f}),bd(t))))},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==a&&t.postMessage({action:"setRemux",remux:a}),n.byteLength){var b=n instanceof ArrayBuffer?n:n.buffer,T=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:b,byteOffset:T,byteLength:n.byteLength},[b])}y&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},bd=function(e){e.currentTransmux=e.shift(),"ftTransmux():_d(e.currentTransmux))},Td=function(e,t){e.postMessage({action:t}),bd(e)},kd=function(e,t){if(!t.currentTr,e))},Sd=function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,transmuxQuen(e){kd("reset",e)},Cd=function(e)currentTransmux=null,t.trcurrentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t},Ed=function(e){var t=e.transmuxer,n=e.endAction||e.action,i=e.callback,r=cn({},e,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",(functstener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,e.byteOffset||0,e.byteLength||a.data.data.byteLength),e.data&&(e.data=a.data.data)),i(a.data))})),e.data){var a=e.data instanceof ArrayBuffer;r.byteOffset=a?0:e.data.byteOffset,r.byteLength=e.data.byteLength;var s=[a?e.data:e.data.buffer];t.postMessage(r,s)}else t.postMessage(r)},Ad=2,Pd=-101,Id=-102,xd=function(e){e.forEach((function(e){e.abort()}))},Ld=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Pd,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:Id,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:Ad,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:Ad,xhr:t}:null},Dd=function(e,t,n){return function(i,r){var a=r.response,s=Ld(i,r);if(s)return n(s,e);if(16!==a.byteLength)return n({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:Ad,xhr:r},eetUint32(0),o.getUint32(4),o.getUint32(8),o.getUint32(12)]),u=0;u<t.length;u++)t[u].bytes=l;return n(null,e)}},Od=function(e,t){var n=Xu(e.map.bytes);if("mp4"!==n){var i=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported ".concat(n||"unknown"," container for initialization segment at URL: ").concat(i),code:Ad})}Ed({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:functier"Timeline:u,onEndedTimeline:function(){c()},onTransmuxerLog:p,onDone:function(e){h&&(e.type="combined"===e.type?"video":e.type,h(null,t,e))}})}})},Nd=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmp4=!0;var g=t.map.tracks,m={isFmp4:!0,hasVideo:!!g.video,hasAudio:!!g.audio};g.audio&&g.audio.codec&&"enca"!==g.audio.codec&&(m.audioCodec=g.audio.codec),g.video&&g.video.codec&&"encv"!==g.video.codec&&(m.videoCodec=g.video.codec),g.video&&g.audio&&(m.isMuxed=!0),i(t,m);var y=function(e,n){d(t,{data:f,type:m.hasAudio&&!m.isMuxed?"audio":"video"}),n&&n.length&&o(t,n),e&&e.length&&l(t,e),h(null,t,{})};Ed({action:"probeMp4StartTime",timescales:t.map.timescales,data:f,transmuxer:t.transmuxer,callback:function(e){var i=e.data,a=e.startTime;n=i.buffer,t.bytes=f=i,m.hasAudio&&!m.isMuxed&&r(t,"audio","start",a),m.hasVideo&&r(t,"video","start",a),Ed({action:"probeEmsgID3",data:f,transmuxer:t.transmuxer,offset:a,callback:function(e){var i=e.emsgData,r=e.id3Frames;n=i.buffer,t.bytes=f=i,g.video&&i.byteLength&&t.transmuxer?Ed({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:f,timescales:t.map.timescales,trackIds:[g.video.id],callback:function(e){n=e.data.buffer,t.bytes=f=e.data,e.logs.forEach((function(e){p(Zu(e,{stream:"mp4CaptionParser"}))})),y(e.captions,r)}}):y(void 0,r)}})}})}elsel,isEndOfTimeline:u,endedTimelineFn:c,dataFn:d,doneFn:h,onTransmuxerLog:p})}else h(null,t,{})},Ud=function(e,t){var n,i=e.id,r=e.key,a=e.encryptedBytes,s=e.decryptionWorker;s.addEventListener("message",(function e(n){if(n.data.source===i){s.removeEventListener("message",e);var r=n.data.decrypted;t(new Uint8Array(r.bytes,r.byteOffset,r.byteLength))}})),n=r.bytes.slice?r.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.bytes)),s.postMessage(Qc({source:i,encryp=emeline,c=e.endedTimeline==t.length){var y=function(){if(m.encryptedBytes)return function(e){var t=e.decryptionWorker,n=e.segment,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,s=e.audioSegmentTimingInfoFn,o=e.id3Fn,l=e.captionsFn,u=e.isEndOfTimeline,c=e.endedTimelineFn,d=e.dataFn,h=e.doneFn,p=e.onTransmuxerLog;Ud({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:t},(function(e){n.bytes=e,Nd({segment:n,bytesInf.now(),m.map&&m.map.encryptedn xacklin|0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.noeFn,g=e.dataFn,m=e.doneFn,y=e.onTransmuxerLog,v=[],_=Bd({activeXhrs:v,decryptionWorker:i,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimelinsmuxerLog:y});if(r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&b.push(r.map.key);var T=t(Zu(n,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),Dd(r,b,_));v.push(T)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){var k=t(Zu(n,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),Dd(r,[r.map.key],_));v.push(k)}var S=Zu(n,{uri:r.map.resolved:Gc(r.map)}),w=function(e){var t=e.segment,n=e.finishProcessingFrn n(r,t);var a=new Uint8Array(i.response);if(t.map.key)return t.map.encryptedBytes=a,n(null,t);t.map.bytes=a,Od(t,i.status,n(push(C)}var E=Zu(n,{uri:r.partpe:"arraybuffer",headers:Gc(r)}),A=t(E,Rd({sener("progress",jd({segment:r,progressFn:s,trackInfoFn:o,timingInfoFn:l,videoSegmentTimingInfoFn:u,audioSegmentTimingInfoFn:c,id3Fn:d,captionsFn:h,isEndOfTimeline:p,endedTimelineFn:f,dataFn:g})),v.push(A);var P={};return v.forEach((function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,n=e.abortFn;return function(e){e.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}}({loadendState:P,abortFn:a}))})),function(){return xd(v)}},qd=Ju("Coat(r)))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return qd("multiple ".concat(e," codecs found as attributes: ").concat(t[e].join(", "),". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs.")),void(t[e]=null);t[e]=t[e][0]})),t},zd=function(e){var t=0ists)return Xa(r.playlists[0].attributes.CODECS)}return null}(e,n.AUDIO)||[]);r.audio&&(i.audio=r.audio)}.playlist;return JSON.string.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},Kd=function(e,t){if(!e)return"";var n=window.getComputedStyle(e);return n?n[t]:""},Yd=function(e,t){var n=e.slice();e.sort((function(e,i){var r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r}))},Qd=function(e,t){var n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||window.Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),n-(i=i||window.Number.MAX_VALUE)},$d=function(e,t,n,i,r,a){if(e){var s={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:r},o=e.playlists;Ac.isAudioOnly(e)&&(o=a.getAudioTrackPlaylists_(),s.auibuON.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||window.Number.MAX_VALUE,width:t,height:n,playlist:e}}));Yd(l,(function(e,t){return e.bandwidth-t.bandwidth}));var u=(l=l.filter((function(e){return!Ac.isIncompatible(e.playlist)}))).filter((function(e){return Ac.isEnabled(e.playlist)}));u.length||(u=l.filter((function(e){return!Ac.isDisabled(e.playlist)})));var c=u.filter((function(e){return e.bandwidth*hd.BANDWIDTH_VARIANCE<t})),d=c[c.length-1],h=c.filter((function(e){return e.bandwidth===d.bandwidth}))[0];if(!1===r){var p=h||u[0]||l[0];if(p&&p.playlist){var f="sortedPlaylistReps";return h&&(f="bandwidthBestRep"),u[0]&&(f="enabledPlaylistReps"),Gd("choosing ".concat(Xd(p)," using ").concat(f," with options"),s),p.playlist}return Gd("could not choose a playlist with options",s),null}var g=c.filter((function(e){return e.width&&e.height}));Yd(g,(function(e,t){return e.width-t.width}));var m=g.filter((fund=m[m.length-1];var y,v,_,b,T=m.filter((function(e){retur{rereturn e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff})),b=k[0]}var S=b||_||T||h||u[0]||l[0];if(S&&S.playlist){var w="sortedPlaylistReps";return b?w="leastPixelDiffRep":_?w="resolutionPlusOneRep":T?w="resolutionBestRep":h?w="bandwidthBestRep":u[0]&&(w="enabledPlaylistReps"),Gd("choosing ".concat(Xd(S)," using ").concat(w," with options"),s),S.playlist}return Gd("could not choose a playlist with options",s),null}},Jd=function(){var e=this.useDevicePixelRatio&&window.devicePixelRatio||1;return $d(this.playlists.main,this.systemBandwidth,parseInt(Kd(this.tech_.el(),"width"),10)*e,parseInt(Kd(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.playlistController_)},Zd=function(e){var t=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,r=e.videoDuration;if(n){var a=window.WebKitDataCue||window.VTTCue,s=t.metadataTrack_;if(s&&(n.forEach((function(e){var t=e.cueTime+i;!("number"!=typeof t||window.isNaN(t)||t<0)&&t<1/0&&e.frames&&e.frames.length&&e.frames.forEach((function(e){var n=new a(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return Ea.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return Ea.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return Ea.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(n),s.addCue(n)}))})),s.cues&&s.cues.length)){for(var o=s.cues,l=[],u=0;u<o.length;u++)o[u]&&l.push(o[u]);var c=l.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),d=Object.keys(c).sort((function(e,t){return Number(e)-Number(t)}));d.forEach((function(e,t){var n=c[e],i=isFinite(r)?r:0,a=Number(d[t+1])||i;n.forEach((function(e){e.endTime=a}))}))}}},eh={id:"ID",class:"CLASS",startDate:"START-DATE",duration:"DURATION",endDate:"END-DATE",endOnNext:"END-ON-NEXT",plannedDuration:"PLANNED-DURATION",scte35Out:"SCTE35-OUT",scte35In:"SCTE35-IN"},th=new Set(["id","class","startDate","duration","endDate","endOnNext","startTime","endTime","processDateRange"]),nh=function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,Ea.browser.IS_ANY_SAFARI||(e.metadataTrack_.inBandMetadataTrackDispatchType=t))},ih=function(e,t,n){var i,r;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime>=e&&r.endTime<=t&&n.removeCue(r)},rh=function(e){return"number"==typeof e&&isFinite(e)},ah=1/60,sh=function(e){var t=e.startOfSegment,n=e.duration,i=e.segment,r=e.part,a=e.playlist,s=a.mediaSequence,o=a.id,l=a.segments,u=void 0===l?[]:l,c=e.mediaIndex,d=e.partIndex,h=e.timeline,p=u.length-1,f="mediaIndex/partIndex increment";e.getMediaInfoForTime?f="getMediaInfoForTime (".concat(e.getMediaInfoForTime,")"):e.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(f+=" with independent ".concat(e.independent));var g="number"==typeof d,m=e.segment.uri?"segment":"pre-segment",y=g?pc({preloadSegment:i})-1:0;return"".concat(m," ["concat(d,"/").concat(y,"]"):"")+" segment start/end [".concat(i.start," => ").concat(i.end,"]")+(g?" part star]"):"")+" startOfSegment [".concat(t,"]")+" duration [".concat(n,"]")+" timeline [".concat(h,"]")+" selected by [".concat(f,"]")+" playlist [".concat(o,"]")},oh=function(e){return"".concat(e,"TimingInfoe.segmentTimeline,r=e.loaderType,a=e.audioDisabled;if(n===i)return!1;if("audio"===r){var s=t.lastTimelineChange({type:"main"});return!s||s.to!==i}if("main"===r&&a){var o=t.pen},ch=function(e){var t=e.segmentDuration,n=e.maxDuration;return!!t&&Math.rouingInfo:e.videoTimingInfo},i=0,["video","audio"].forEach((function(e){vareof s&&(r=s-a),void 0!==r& with index ".concat(edetails: https://tools.h=function(e){functie required");if("funchs_=e.vhs,n.loaderType_=e.loa,n.sourceType_=e.souer_=e.timelineChangeControOffset,n.calculateTimestampOffsetForEachSegment_=e.calculateTimestampOffsetForEachSegment,n.captionServices_=e.captionServices,n.exactManifestTimings=e.exactManifestTimings,n.addMetadataToTextTrack=e.addMetadataToTextTrack,n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.xhrOptions_=null,n.pendingSegments_=[],n.audioDisabled_=!rRetryTimeout_=null,n.actte")},n.syncController_.on("synci_.addEventListener(tate",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_("".concat(this.state_," -> ").concat(e)),this.state_=e,this.trigger("statechange"))}}),n.sourceUpdater_.on("ready",(function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),"main"===n.loaderType_&&n.timelineChangeController_.on("pendingtimelinechange",(function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),"audio"===n.loaderType_&&n.timelineChangeController_.on("timelinechange",(function(){n.hasEnoughInfoToLoad_()&&n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&&n.processCallQueue_()})),n}return _inherits(t,e),_createClass(t,[{key:"createTransmuxer_",value:function(){return Cd({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})}},{key:"resetStats_",value:function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0}},{key:"dispose",value:function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()}},{key:"setAudio",value:function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())}},{key_()):this.pendingSegmalue:function(){this.pendingSegment_his.callQueue_=[],this.loadQueetryTimeout_),this.quotaExceededErrorRetryTimeout_=null}},{key:"checkForAbort_",value:function(e){return"APP(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")}},{key:"buffered_",value:function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return ec();if("main"===this.loaderType_){var t=e.hasAudio,n=e.hasVideo,i=e.isMuxed;if(n&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return Buffered()}return this.sourceUpdater_.audioBuffered()}},{key:"initSegmentForMap",value:function(e){var t=arguments.length>1&&void 0escales:e.timescales}),i||e}},{key:"segmentKey",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return null;var n=Jc(e),i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resction(){if(this.monitorBuffer_(),(){return this.state="READtime:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_("playlist update [".concat(r," => ").concat(e.id||e.uri,"]")),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri){if(null!==this.mediaIndex)!e.endList&&"number"==typeof e.partTargetDuration?this.resetLoader():this.resyncLoader();return this.currentMediaInfo_=void 0,void this.trigger("playlistupdate")}var a=e.mediaSequence-n.mediaSequence;if(this.logger_("live window shift [".concat(a,"]")),null!==this.mediaIndex)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var s=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!s.parts||!s.parts.length||!s.parts[this.partIndex])){var o=this.mediaIndex;this.logger_("currently processing part (index ".concat(this.partIndex,") no longer exists.")),this.resetLoader(),this.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"resetLoaderProperties",value:function(){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0}}},{key:"resetEverything",value:function(e){this.resetLoaderProperties(),this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=!1,this.resyncLoader()}},{key:"resyncLoader",value:function(){this.transmuxer_&&wd(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},{key:"remove",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t===1/0&&(t=this.duration_()),t<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var r=1,a=function(){0===--r&&n()};for(var s in!i&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(e,t,a)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,n,i){for(var r=Math.ceil((t-i)*Yu),a=Math.ceil((n-i)*Yu),s=e.slice(),o=e.length;o--&&!(e[o].pts<=a););if(-1===o)return s;for(var l=o+1;l--&&!(e[l].pts<=r););return l=Math.max(l,0),s.splice(l,o-l+1),s}(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,a)),this.inbandTextTracks_)ih(e,t,this.inbandTextTracks_[s]);ih(e,t,this.segmentMetadataTrack_),a()}else this.logger_("skipping remove because no source updater or starting media info")}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&window.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=window.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"==typeof e.timesrrentTimeline_,to:e.timeline})),this.loadSegment_(e))}}},{key:"isEndOfStream_",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.mediaIndex,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.playlist_,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.partIndex;if(!t||!this.mediaSource_)return!1;var i="number"==typeof e&&t.segments[e],r=e+1===t.segments.length,a=!i||!i.parts||n+1===i.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&r&&a}},{key:"chooseNextRequest_",value:function(){var e=this.buffered_(),t=lc(e)||0,n=uc(e,this.currentTime_()),i=!this.hasPlayed_()&&n>=1,r=n>=this.goalBufferLength_(),a=this.playlisst_,this.duration_(),this.currentTimeline_,this.currentTime_());var s={tchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),c=u.segmentIndex,d=u.startTime,h=u.partIndex;s.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd ".concat(t):"currentTime ".concat(this.currentTime_()),s.mediaIndex=c,s.startOfSegment=d,s.partIndex=h}var p=a[s.mediaIndex],f=p&&"number"==typeof s.partIndex&&p.parts&&p.partf s.partIndex&&p.parts&&(s.parntSegments||this.playlist_.indents[i],c="number"==typeof s&&u.parts[s],d={requestId:"segment-loader-"+Math.random(),uri:c&&c.resolvedUri||u.resolvedUri,mediaIndex:i,partIndex:c?s:null,isSyncRequest:a,startOfSegment:r,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:u.timeline,duration:c&&c.duration||u.duration,segment:u,part:c,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:l,independent:t},h=void 0!==o?o:this.isPendingTimestampOffset_;d.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:u.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),calculateTimestampOffsetForEachSegment:this.calculatter_.videoBuffered().length&&(d.gopsToAlignWith=function(e,t,n){if(null==t||!e.length)return[];var i,r=Math.ceil((t-n+3)*Yu);for(i=0;i<e.length&&!(e[i].pts>r);i++);return e.slice(i)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),d}},{key:"timestampOffsetForSegment_",value:function(e){return n=(t=e).segmentTimeline,i=t.currentTimeline,r=t.startOfSegment,a=t.buffered,s=t.calculateTimestampOffsetForEachSegment,o=t.overrideCheck,s?lh(a,r):o||n!==i?n<i?r:lh(a,r):null;var t,n,i,r,a,s,o}},{key:"earlyAbortWhenNeeded_",value:function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=Ac.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(r<=a)){var s=function(e){var t=e.main,n=e.currentTime,i=e.bandwidth,r=e.duration,a=e.segmentDuration,s=e.timeUntilRebuffer,o=e.currentTimeline,l=e.syncController,u=t.playlists.filter((function(e){return!Ac.isIncompatible(e)})),c=u.filter(Ac.isEnabled);c.length||(c=u.filter((function(e){return!Ac.isDisabled(e)})));var d=c.filter(Ac.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var t=l.getSyncPoint(e,r,o,n)?1:2;return{playlist:e,rebufferingImpact:Ac.estimateSegmentRequestTime(a,i,e)*t-s}})),h=d.filter((function(e){return e.rebuffe_.playlists.main,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncContrlist||s.playlist.uri===this.playlischeckForAbort_(t.requestId)||this.trigger("progress")}},{key:"handleTrackInfo_",value:function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++){var a=iaInfo_,t)||(this.appendInitSegment_=hasEnoughInfoToAppend_()&&artTime+i,e.endTime+i,e.text))}))}}({captionntLoader received no captions from a captiontaQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]}},{key:"processCallQueue_",value:function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))}},{key:"processLoadQueue_",value:function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))}},{key:"hasEnoughInfoToLoad_",value:function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!!e&&(!this.getCurrentMediaInfo_()||!uh({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}},{key:"getCurrentMediaInfo_",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pendingSegment_;return e&&e.trackInfo||this.currentMediaInfo_}},{key:"getMediaInfo_",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pendingSegment_;return this.getCurrentMediaInfo_(e)||this.startingMediaInfo_}},{key:"getPendingSegmentPlaylist",value:function(){return this.pendingSegment_?this.pendingSegment_.playlist:null}},{key:"hasEnoughInfoToAppend_",value:function(){if(!this.sourceUpdrrentMediaInfo_();if(!e||!t)return!1;var n=t.hasAudio,i=t.hasVideo,r=t.isMuxed;return!(i&&!e.videoTimingInfo)&&(!(n&&!this.audioDisabled_&&!r&&!e.audioTimingInfo)&&!uh({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))}},{key:"handleData_",value:function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForp4"),n.timingInfo.start=n[oh(t.type)].start;else{var i,r=this.getCurrentMediaInfo_(),a="main"===this.loaderType_&&r&&r.hasVideo;a&&(i=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:i,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type)rn void this.logger_("sync laylist&&(this.appendInitSegment_[t]=!0)}},{key:"getInitSegmentAndUpdateState_",value:function(e){var t=e.type,n=e.initSegment,i=e.map,r=e.playlist;if(i){var a=$c(i);if(this.activeInitSegmentId_===a)return null;n=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=a}return n&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,n):null}},{key:"handleQuotaExceededError_",value:function(e,t){var n=this,i=e.segmentInfo,r=e.type,a=e.bytes,s=this.sourceUpdater_.audioBuffered(),o=this.sourceUpdater_.videoBuffered();s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+oc(s).join(", ")),o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+oc(o).join(", "));var l=s.length?s.start(0):0,u=s.length?s.end(s.length-1):0,c=o.length?o.start(0):0,d=o.length?o.end(o.length-1):0;if(u-l<=1&&d-c<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+"Appended byte length: ".concat(a.byteLength,", ")+"audio buffer: ".concat(oc(s).join(", "),", ")+"video buffer: ".concat(oc(o).join(", "),", ")),this.error({message:"Quota excxcludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:i,type:r,bytes:a}));var h=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to ".concat(h)),this.remove(0,h,(function(){n.logger_("On QUOTA_EX=null,n.processCallQueue_()}),1e3)}),!0)}},t.segments.forEach((function(e){this,{segmentInfo:r,type:a,bytes:l}))}},{key:"handleSegmentTimingInfo_",value:function(e,t,n){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var i=this.pendingSegment_.segment,r="".concat(e,"TimingInfo");i[r]||(i[r]={}),i[r].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[r].transmuxedPresentationSecodeEnd=n.end.decode,i[r].baseMediaDey:"updateTransmuxerAndRequestSffset)&&(this.gopBuffer_.length=0,e.gopst",timestampOffset:e.timestampOffset}));var n=this.cris.logger_("Requesting ".concat(),trackInfoFn:this.handleTrackInfo_.bindntTime_(),this.playlist_.targetDsolvedUri:n?n.resolvedUri:t.resolvedUri,be.roundTripTime)}},{key:"saveBandwidthRelatedStathis.pendingSegment_.requestId){if(e){if(this.pendingSegment_=nulquests=t.endOfAllRequests,n.gopInfotrigger("appending"),this.waitForAppendsToComplete_(i)}}},{key:"setTimeMapping_",value:function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)}},{key:"updateMediaSecondsLoaded_",value:function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration}},{key:"shouldUpdateTransmuxerTimestampOffset_",value:function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())}},{key:"trueSegmentStart_",value:function(e){var t=e.currentStart,n=e.playlist,i=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,s=e.useVideoTimingInfo,o=e.videoTimingInfo,l=e.audioTimingInfo;if(void 0!==t)return t;if(!s)return l.start;var u=n.segments[i-1];return 0!==i&&u&&void 0!==u.start&&u.end===r+a?o.start:r}},{key:"waitForAppendsToComplete_",value:function(e){var t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",playlistExclusionDuration:1/0}),void this.trigger("error");var n=t.hasAudio,i=t.hasVideo,r=t.isMuxed,a="main"===this.loaderType_&&i,s=!this.audioDisabled_&&n&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);a&&e.waitingOnAppends++,s&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),s&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))}},{key:"checkAppendsDone_",value:function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())}},{key:"checkForIllegalMediaSwitch",value:function(e){var t=function(e,t,n){return"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,playlistExclusionDuration:1/0}),this.trigger("error"),!0)}},{key:"updateSourceBufferTimestampOffset_",value:function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimlculation_({videoTimingInfo:e.segment.videoTimiOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffs=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"==typeof n.end?n.end:n.start+e.duration)}},{key:"handleAppendsDone_",value:function(){ithis.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=dh(e,this.sourceType_);if(t&&("warn"===t.severity?Ea.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended ".concat(sh(e))),this.addSegmentMetadataCue_(e),this.currentTime_()>=this.replaceSegmentsUntil_&&(this.replaceSegmentsUntil_=-1,this.fetchAtBuffer_=!0),this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.tange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var n=e.segment,i=e.part,r=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,a=i&&i.end&&this.currentTime_()-i.end>3*e.playlist.partTargetDuration;if(r||a)return this.logger_("bad ".concat(r?"segment":"part"," ").concat(sh(e))),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request ".concat(sh(e)))}},{key:"recordThroughput_",value:function(e){if(e.duration<ah)this.logger_("Ignoring segment's throughput because its duration of ".concat(e.duration)+" is less than the min to record ".concat(ah));else{var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}}},{key:"addSegmentMetadataCue_",value:function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,i=t.end;if(rh(n)&&rh(i)){ih(n,i,this.segmentMetadataTrack_);var r=window.WebKitDataCue||window.VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,programDateTime:t.programDateTime,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attri(a));s.value=a,this.segmentMetadataTrack_.addCue(s)}}}},{key:"replaceSegmentsUntil",set:function(e){this.logger_("Replacing currently buffered segments until ".concat(e)),this.replaceSegmentsUntil_=e}}]),t}(Ea.EventTarget);function ph(){}var fh,gh=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},mh=["video","audio"],yh=function(e,t){var n=t["".concat(e,"Buffer")];return n&&n.updating||t.queuePending[e]},vh=function e(t,n){if(0!==n.queue.length){var i=0,r=n.queue[i];if("mediaSource"!==r.type){if("mediaSource"!==t&&n.ready()&&"closed"!==n.mediaSourcer n=0;n<t.length;n++){var i=t[n];if("mediaSource"===i.type)return null;if(i.type===e)return n}return null}(t,n.queue),null===i)return;r=n.queue[i]}return n.queue.splice(i,1),n.queuePending[t]=r,r.action(t,n),r.doneFn?void 0:(n.queuePending[t]=null,void e(t,n))}}else n.updating()||"closed"===n.mediaSource.readyState||(n.queue.shift(),r.action(n),r.doneFn&&r.doneFn(),e("audio",n),e("video",n))}},_h=function(e,t){var n=t["".concat(e,"Buffer"istener("updateend",t["on".concat(i,"UpdateEnd_")]),n.removeEventListener("error",t["on".concat(i,"Error_")]),t.codecs[e]=null,t["".conca=Array.prototype.indexOf.call(e.sourceBuffers,t)},Th=function(e,t,n){return function(i,r){var a=r["".concat(i,"Buffer")ending segment ".con.appendBuffer(e)}catch(e){r.loggerng[i]=null,n(e)}}}},kh=funcRemoving ".concat(e," to ").co ").concat(t," from ar i=n["".concat(t,"Buffer")];bh((t){if("open"===t.mediaSource.readyStream",e)}}}},Eh=function(e)uration to ".concat(e));tdiaSource.readyState){var n=t["".concataSource"));var a=n.mediaSource.addSourceBuffer(r);a.addEventListener("updateend",n["on".concat(i,"UpdateEnd_")]),a.addEventListener("error",n["on".concat(i,"Error_")]),n.codecs[e]=t,n["".concat(e,"Buffer")]=a}},Ih=function(e){return function(t){var n=t["".concat(e,"Buffer")];if(_h(e,t),bh(t.mediaSource,n)){t.logger_("Removing ".concat(e,"Buffer with codec ").concat(t.codecs[e]," from mediaSource"));try{t.mediaSource.removeSourceBuffer(n)}catch(t){Ea.log.warn("Failed to removeSourceBuffer ".concat(e,"Buffer"),t)}}}},xh=function(e){return function(t,n){var i=n["".concat(t,"Buffer")],r=Ya(e);bh(n.mediaSource,i)&&n.codecs[t]!==e&&(n.logger_("changing ".ccodecs[t]," to ").concat(e)),i.changeType(r),n.codecs[t]=e)}},Lh=function(e){var t=e.type,n=e.sourceUpdater,i=e.action,r=e.doneFn,a=e.name;n.queue.push({type:t,action:i,doneFn.start(n),r=e.end(n),a=r-i;t.length&&(t+="\n"),t+="[".concat(a,"](").concat(i," -> ").concat(r,")")}return t||"empty"}(t["".concat(e,"Buffered")]());if(t.logger_("".concat(e," source buffer update end. Buffered: \n"),i),t.queuePending[e]){var r=t.queuePending[e].doneFn;t.queuePending[e]=null,r&&r(t["".concat(e,"Error_")])}vh(e,t)}},Oh=function(e){function t(e){var n;return _classCallCheck2(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).mediaSource=e,n.sourceopenListener_=function(){ritialized(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=Ju("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=Dh("video",_assertThisInitialized(n)),n.onAudioUpdateEnd_=Dh("audio",_assertThisInitialized(n)),n.onVideoError_=function(e){n.videoError_=e},n.onAudioError_=function(e){n.audioError_=e},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}return _inherits(t,e),_createClass(t,[{key:"initializedEme",value:function(){this.initializedEme_=!0,this.triggerReady()}},{key:"hasCreatedSourceBuffers",value:function(){return this.createdSourceBuffers_}},{key:"hasInitializedAnyEme",value:function(){return this.initializedEme_}},{key:"ready",value:function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()}},{key:"createSourceBuffers",value:function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())}},{key:"triggerReady",value:function(){this.ready()&&!t("ready"))}},{key:"addSourceBuffer",value:function(e,t){Lh({type:"mediaSource",sourceUpdater:this,action:Ph(e,t),name:"addSourceBuffer"})}},{key:"abort",value:function(e){Lh({type:e,sourceUpdater:this,action:Ah(e),name:"abort"})}},{key:"removeSourceBuffer",value:function(e){this.canR.browser.IS_FIREFOX&&window.MediaSource&&window.MediaSource.prototype&&"function"==typeof window.MediaSource.prototype.removeSourceBuffer}},{key:"canChangeType",val.canChangeType()?Lh({type:e,sourceUpdater:this,action:xh(t),name:"changeType"}):Ea.log.error("changeType is not supported!")}},{key:"addOrChangeSourceBuffers",value:function(e){var t=thi||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(n){var i=e[n];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(n,i);t.canChocessedAppend_=!0,"audio"ue_.push([e,t]),void this.logger_("delay," until video append"));if(Lh({type:r,sourceUpdater:this,action:Th(a,i||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var s=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio ".concat(s.length," appendBuffers")),this.delayedAudioAppendQueue_.length=0,s.forEach((function(e){n.appendBuffer.apply(n,e)}))}}},{key:"audioBuffered",value:function(){return bh(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:ec()}},{key:"videoBuffered",value:function(){return bh(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:ec()}},{key:"buffered",value:function(){var e=bh(this.mediaull,r=0,a=[],s=[];if(!(e&&e.lengtype&&1==--r&&(i=a[o].time),null!fered(),this.videoBu=arguments[1]?argumeuments.length>0&&voidnts.length>1&&void 0!==argend(0)?Lh({type:"audio",sourceUpdater:thin,name:"remove"}):n()}},{key:"removeVideo",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ph;this.videoBuffered().length&&0!==this.videoBuffered().eudioTimestampOffset_!==e&&(dioTimestampOffset_=e),this.audioTimestampOffset_}},{key:"videoTimestampOffset",value:function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Lh({type:"video",sourceUpdater:this,action:Sh(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_}},{key:"audioQueueCallback",value:function(e){this.audioBuffer&&Lh({type:"audio",sourceUpdater:this,action:wh(e),name:"callback"})}},{key:"videoQueueCallback",value:function(e){this.videoBuffer&&Lh({type:"video",sourceUpdater:this,action:wh(e),name:"callback"})}},{key:"dispose",value:function(){var e=this;this.trigger("dispose"),mh.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e["".concat(t,"QueueCallback")]((function(){return _h(length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()}}],[{key:"canChangeType",value:function(){return window.SourceBuffer&&window.SourceBuffer.prototype&&"function"==typeof window.SourceBuffer.prototype.changeType}}]),t}(Ea.EventTarget),Rh=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},Mh=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),Nh=function(e){function t(){return _classCallCheck2(this,t),_possibleCore vtt.js is loaded."))}return _inherits(t,_wrapNativeSuper(Error)),t}(),Uh=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _classCallCheck2(this,t),(n=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e,i))).mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTrack&!i&&e.bytes){var r=Mh.byteLengthetEverything(&this.couldBeginLoad.subtitlesTrack_)}},{key:"fil}},{key:"skipEmptySeghis.pause(),this.trigger("ependingSegment_;this.ssegment;if(a.map&&(a.map.bytes=t.map.bytes),r.bytes=t.bytes,"function"!=typeof window.WebVTT&&"function"==typeof this.loadVttJs)return this.state="WAITING_ON_VTTJS",void this.loadVttJs().then((function(){return i.segmentRequestFinished_(e,t,n)}),(function(){return i.stopForError({message:"Error lof(this.updateTimeMapping_(r,ts.byteLength,this.mediaSecondnction(e){var t=e.cues;if(t)for(var n={},i=t.length-1;i>=0;i--){var r=t[i],a="".concat(r.startTime,"-").concat(r.endTime,"-").concat(r.text);n[a]?e.removeCue(r):n[a]=r}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"}},{key:"handleData_",value:function(){}},{key:"updateTimingInfoEnd_",value:function(){}},{key:"parseVTTCues_",value:function(e){var t,n=!1;if("function"!=typeof window.WebVTT)throw new Nh;"function"==typeof window.TextDecoder?t=new window.TextDecoder("utf8"):(t=window.WebVTT.StringDecoder(),n=!0);var i=new window.WebVTT.Parser(window,window.vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=function(t){e.timestampmap=t},i.onparsingerror=function(e){Ea.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var r=e.segment.map.bytes;n&&(r=Rh(r)),i.parse(r)}var a=e.bytes;n&&(a=Rh(a)),i.parse(a),i.flush()}},{key:"updateTimeMapping_",value:function(e,t,n){var i=e.segment;if(t)if(e.cues.length){var r=e.timestampmae.mediaIndex,time:Math.min(s,o-i.dur=null,s=null,o=dc(t);r=r||0;for(var l=0;l<o.length;l++){var u=o[t.endList||0===r?l:o.length-(l+1)],c=u.segment,d=e.timelineToDatetimeMappings[c.timel&&"number"==typeof u.partIndex)for(var p=0;p<u.partIndex;p++)h+=c.parts[p].duration;var f=Math.abs(r-h);if(null!==s&&(0===f||s<f))break;s=f,a={time:h,segmentIndex:u.segmentIndex,partIndex:u.partIndex}}}return a}},{name:"Segment",run:function(e,t,n,i,r){var a=null,s=null;r=r||0;for(var o=dc(t),l=0;l<o.length;l++){var u=o[t.endList||0===r?l:o.length-(l+1)],c=u.segment,d=u.part&&u.part.start||c&&c.start;if(c.timeline===i&&void 0!==d){var h=Math.abs(r-d);if(null!==s&&s<h)break;(!a||null===s||s>=h)&&(s=h,a={time:d,segmentIndex:u.segmentIndex,partIndex:u.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,n,i,discontinuities=[],e.timelineToDatetimeMappings={},e.logger_=Ju("SyncController"),e}return _inherits(t,e),_createClass(t,[{key:"getSyncPoint",value:function(e,t,n,i){var r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null}},{key:"getExpiredTime",value:function(e,t){if(!e||!e.segments)return null;var n=this.runcPoint_(n,{key:"segmentIndex",value:r r=[],a=0;a<jh.length;a++){var sgth;a++){var s=Math.abfor [".concat(t.key,": ").concat(t.value,"] chosen with strategy")+" [".concat(r,"]: [time:").concat(n.time,",")+" segmentIndex:".concat(n.segmentIndex)+("number"==typeof n.partIndex?",partIndex:".concat(n.partIndex):"")+"]"),n}},{key:"saveExpiredSegmentInfo",value:function(e,t){var n=t.mediaSequence-e.mediaSequence;if(n>86400)Ea.log.warn("Not saving expired segment info. Media sequence gap ".concat(n," is too large."));else for(var i=n-1;i>=0;i--){var r=e.segments[i];if(r&&void 0!==r.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:r.start},this.logger_("playlist refresh sync: [time:".concat(t.syncInfo.time,",")+" mediaSequence: ".concat(t.syncInfo.mediaSequence,"]")),this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMappingForStart",value:function(e){if(this.timelineToDa:t.playlist.mediaSequence+t.mediaIndex,time:r.start}));var a=r.dateTimeObject;r.discontinuity&&n&&a&&(this.timelineToDatetimeMappings[r.timeline]=-a.getTime()/1e3)}},{key:"timestampOffsetForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].time}},{key:"mappingForTimeline",value:function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping}},{key:"calculateSegmentTimeMapping_",value:function(e,t,n){var i,r,a=e.segment,s=e.part,o=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)o={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=o,this.trigger("timestampoffset"),this.logth)for(var i=0;i<t.discontinuityStarts.length;i++){var r=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,s=r-e.mediaIndex,o=Math.abs(s);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>o){var l=void 0;l=s<0?n.start-yc({den,durationList:t.see:function(=function(e){.pendingTimelineChanges_[t]={type:t,from:n,to:i},EventTarget),Vh=gd(md((function(){var e=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=th,s=0;s[],[],[]],[[],[;e++)u[e]=u[e].sle()l&& c=t.slice(0),d=[];for(this._key=[c,d],i=l;i<4*l+28;i++)a=c[i-1],(i%l==0||8===l&&i%l==4)&&(a=s[a>>>24]<<24^s[a>>16&255]<<16^s[a>>8&255]<<8^s[255&a],i%l==0&&(a=a<<8^a>>>24^u<<24,u=u<<1^283*(u>>7))),c[i]=c[i-l]^a;for(r=0;i;r++,i--)a=c[3&r?i:i-4],d[r]=i<=4||r<4?a:o[0][s[a>>>24]]^o[1][s[a>>16&255]]^o[2][s[a>>8&255]]^o[3][s[255&a]]}return _createClass(e,[{key:"decrypt",value:function(e,t,n,i,r,a){var s,o,l,u,c=this._key[1],d=e^c[0],h=i^c[1],p=n^c[2],f=t^c[3],g=c.length/4-2,m=4,y=this._tables[1],v=y[0],_=y[1],b=y[2],T=y[3],k=y[4];for(u=0;u<g;u++)s=v[d>>>24]^_[h>>16&255]^b[p>>8&255]^T[255&f]^c[m],o=v[h>>>24]^_[p>>16&255]^b[f>>8&255]^T[255&d]^c[m+1],l=v[p>>>24]^_[f>>16&255]^b[d>>8&255]^ototypeOf(ocessJob_.bind(this),this.delay))}}]),n}(e),a=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},s=function(){function e(t,n,i,s){_classCallCheck2(this,e);var o=e.STEP,l=new Int32Array(t.buffer),u=new Uint8Array(t.byteLength),c=0;for(this.asyncStream_=new r,this.asyncStream_.push(this.decryptChunk_(l.subarray(c,c+o),n,i,u)),c=o;c<l.length;c+=o)i=new Uint32Array([a(l[c-4]),a(l[c-3]),a(l[c-2]),a(l[c-1])]),this.asyncStream_.push(this.decryptChunk_(l.subarray(c,c+o),n,i,u));this.asyncStream_.push((function(){var e;s(null,(e=u).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return _createClass(e,[{key:"decryptChunk_",value:function(e,t,n,r){return function(){var s=function(e,t,n){var r,s,o,l,u,c,d,h,p,f=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),g=new i(Array.prototype.slice.call(t)),m=new Uint8Array(e.byteLength),y=new Int32Array(m.buffer);for(r=n[0],s=n[1],o=n[2],l=n[3],p=0;p<f.length;p+=4)u=a(f[p]),c=a(f[p+1]),d=a(f[p+2]),h=a(f[p+3]),g.decrypt(u,c,d,h,y,p),y[p]=a(y[p]^r),y[p+1]=a(y[p+1]^s),y[p+2]=a(y[p+2]^o),y[p+3]=a(y[p+3]^l),r=u,s=c,o=d,l=h;return m}(e,t,n);r.set(s,e.byteOffset)}}}],[{key:"STEP",get:function(){return 32e3}}]),e}(),o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=twindow?window:void 0!==o?o:"undefined"!=typeof self?self:{};var l=t.BigInt||Number;l("0x1"),l("0x100"),l("0x10000"),l("0x1000000"),l("0x100000000"),l("0x10000000000"),l("0x1000000000000"),l("0x100000000000000"),l("0x10000000000000000"),function(){var e=new Uint16Array([65484]),t=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);255===t[0]||t[0]}();var u=function(e){var t={};return Object.keys(e).forEach((function(n){var i,r=e[n];i=r,("function"===ArrayBuffer.isView?ArrayBuffer.isView(i):i&&i.buffer instanceof ArrayBuffer)?t[n]={bytes:r.buffer,byteOffset:r.byteOffset,byteLength:r.byteLength}:t[n]=r})),t};self.onmessage=function(e){var t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),i=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),r=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new s(n,i,r,(function(e,n){self.postMessage(u({source:t.source,decrypted:n}),[n.buffer])}))}}))),Hh=fd(Vh),zh=function(e){var t=e.(t="main-distLoader=tiveTrack(),a=n.activeGroup(),s=(a.filter((function(e){return e.d=n.tracks[s];if(r!==o){for(var l in Ea.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),n.tracks)n.tracks[l].enableoadedmetadata",(function(){var e=t.media();a.playlist,r),a.track(s.activeTrack(dia(),r),i.paused()||a.load()})),t.on("error",Xh[e](e,n))}},Yh={AUDIO:function(e,t){var n=t.vhs,i=t.sourceType,r=t.segmentLoaders[e],a=t.requestOptions,s=t.main.mediaGroups,o=t.mediaTypes[e],l=o.groups,u=o.tracks,c=o.logger_,d=t.mainPlaylistLoader,h=Ec(d.main);for(var p in s[e]&&0!==Object.keys(s[e]).length||(s[e]={main:{default:{default:!0}}},h&&(s[e].main.default.playlists=d.main.playlists)),s[e])for(var f in l[p]||(l[p]=[]),s[e][p]){var g=s[e][p][f],m=void 0;if(h?(c("AUDIO group '".concat(p,"' label '").concat(f,"' is a main playlist")),g.isMainPlaylist=!0,m=null):m="vhs-json"===i&&g.playlists?new Vc(g.playlists[0],n,a):g.resolvedUri?new Vc(g.resolvedUri,n,a):g.playlists&&"dash"===i?new dd(g.playlists[0],n,a,d):null,g=Zu({id:f,playlistLoader:m},g),Kh[e](e,g.playlistLoader,t),l[p].push(g),void 0===u[f]){("error",Xh[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,i=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],s=t.requestOptions,o=t.main.mediaGroups,l=t.mediaTypes[e],u=l.groups,c=l.tracks,d=t.mainPlaylistLoader;for(var h in o[e])for(var p in u[h]||(u[h]=[]),o[e][h])if(i.options_.useForcedSubtitles||!o[e][h][p].forced){var f=o[e][h][p],g=void 0;if("hls"===r)g=new Vc(f.resolvedUri,i,s);else if("dash"===r dd(f.pli,i,s));if(f=Zu({id:p,playlistLoader:g},f),Kh[e](e,f.playlistLoader,t),u[h].push(f),void 0===c[p]){var m=n.addRemoteTextTrack({id:p,kind:"subtitles",ar n=t.tech,i=t.main.mediaGroups,r=t.mediaTypes[e],a=r.groups,s=r.tracks;for(var o in i[e])for(var |SERVICE)/.test(u.instreamId)){var c=n.opices||{},d={label:l,language:u.language,instreamId:u.u.autoselect};if(c[d.instreamId]&&(d=Zu(d,c[d.instreamIid:l},u)),void 0===s[l]){var h=n.addRemoteTextTrack({id:d.innguage:d.language,label:d.label},!1).track;s[l]=h}}}}},Qh=function e(t,n){for(var i=0;i<t.length;i++){if(wc(n,t[i]))return!0;if(t[i].playlists&&e(t[i].playlists,n))return!0}return!1},$h={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if("showing"===n[i].mode||"hidden"===n[i].mode)return n[i];return null}}},Jh=function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){Yh[t](t,e)}));var t=e.mediaTypes,n=e.mainPlaylistLoader,i=e.tech,r=e.vhs,a=e.segmentLoaders,s=a.AUDIO,o=a.main;["AUDIO","SUBTITLES"].forEach((function(n){t[n].activeGroup=function(e,t){return function(n){var i=t.mainPlaylistLoader,r=t.mediaTypes[e].groups,a=i.media();if(!a)return null;var s=null;a.attributes[e]&&(s=r[a.attributes[e]]);var o=Object.keys(r);if(!s)if("AUDIO"===e&&o.length>1&&Ec(t.main))for(var l=0;l<o.length;l++){var u=r[o[l]];if(Qh(u,a)){s=u;break}}else r.main?s=r.main:1===o.length&&(s=r[o[0]]);return void 0===n?s:null!==n&&s&&s.filter((function(e){return e.id===n.id}))[0]||null}}(n,e),t[n].activeTrack=$h[n](n,e),t[n].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,i=n[e],r=n.main,a=t.mediaTypes[e],s=a.activeTrack(),o=a.getActiveGroup(),l=a.activePlaylistLoader,u=a.lastGroup_;o&&u&&o.id===u.id||(a.lastGroup_=o,a.lastTrack_=s,Wh(i,a),o&&!o.isMainPlaylist&&(o.playlistLoader?(i.resyncLoader(),Gh(o.playlistLoader,a)):l&&r.resetEverything()))}}(n,e),t[n].onGroupChanging=function(e,t){return function(){var n=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=null,n.abort(),n.pause()}}(n,e),t[n].onTrackChanged=function(e,t){return function(){var n=t.mainPlaylistLoader,i=t.segmentLoaders,r=i[e],a=i.main,s=t.mediaTypes[e],o=s.activeTrack(),l=s.getActiveGroup(),u=s.activePlaylistLoader,c=s.lastTrack_;if((!c||!o||c.id!==o.id)&&(s.lastGroup_=l,s.lastTrack_=o,Wh(r,s),l)){if(l.isMainPlaylist){if(!o||!c||o.id===c.id)return;var d=t.vhs.playlistController_,h=d.selectPlaylist();if(d.media()===h)return;return s.logger_("track change. Switching main audio from ".concat(c.id," to ").concat(o.id)),n.pause(),a.resetEverything(),void d.fastQualityChtEverything(),Gh(l.playlistLoader,s))ypes;return function(){var t=n[e].activeTrack();return t?n[e].activeGroup(t):null}}(n,e)}));var l=t.AUDIO.activeGroup();if(l){var u=(l.filter((function(e){return e.default}))[0]||l[0]).id;t.AUDIO.tracks[u].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(o.setAudio(!1),s.setAudio(!0)):o.setAudio(!0)}n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),n.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanging()}))}));var c=function(){t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"})};for(var d in i.audioTracks().addEventListener("change",c),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",(function(){i.audioTracks().removeEventListener("change",c),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),i.clearTracks("audio"),t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[d])},Zh=function(){function e(){_classCallCheck2(this,e),this.priority_=[]}return _createClass(e,[{key:"version",set:function(e){1===e&&(this.version_=e)},get:function(){return this.version_}},{key:"ttl",set:function(e){this.ttl_=e||300},get:function(){return this.ttl_}},{key:"reloadUri",set:function(e){e&&(this.reloadUri_=Qu(this.reloadUri_,e))},get:function(){return this.reloadUri_}},{key:"priority",set:fureturn this.priority_}}]),e}(),ep=function(e){function t(e,n){var i;return _classCallCheck2(this,t),(i=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this))).currentPathway=null,i.defaultPathway=null,i.queryBeforeStart=null,i.availablePathways_=new Set,i.excludedPathways_=new Set,i.steeringManifest=new Zh,i.proxyServerUrl_=null,i.manifestType_=null,i.ttlTimeout_=null,i.re Steering"),i.xhr_=eignTagProperties",valu||t.defaultServiceLocation,this.quyServerUrl_=t.proxyServerURL||null,this.defaultPathway&&!this.queryBeforeStart&&this.trigger("content-steering"),this.queryBeforeStart&&this.requestSteeringManifest(this.steeringManifest.reloadUri))}},{key:"requestSteeringManifest",value:function(e){var t=this,n=this.steeringManifest.reloadUri;if(e||n){var i=e||this.getRequestURI(n);if(!i)ret steering."),this.trigger("error"),void this.dispose();this.request_=this.xhr_({uri:i},(function(e,n){if(e){if(410===n.status)return t.logger_("manifest request 410 ".concat(e,".")),t.logger_("There will be no more content steering requests to ".concat(i," this session.")),void t.excludedSteeringManifestURLs.add(i);if(429===n.status){var r=n.responseHeaders["retry-after"];return t.logger_("manifest request 429 ".concat(e,".")),t.logger_("content steering will retry in ".concat(r," seconds.")),void t.startTTLTimeout_(parseInt(r,10))}return t.logger_("manifest failed to load ".concat(e,".")),void t.startTTLTimeout_()}var a=JSON.parse(t.request_.responseText);t.startTTLTimeout_(),t.assignSteeringProperties_(a)}))}}},{key:"setProxyServerUrl_",value:function(e){var t=new window.URL(e),n=new window.URL(this.proxyServerUrl_);return n.searchParams.set("url",encodeURI(t.toString())),this.setSteeringParams_(n.toString())}},{key:"decodeDataUriManifest_",value:function(e){var t=JSON.parse(window.atob(e));this.assignSteeringProperties_(t)}},{key:"setSteeringParams_",value:function(e){var t=new window.URL(e),n=this.getPathway(),i=this.getBandwidth_();if(n){var r="_".concat(this.manifestType_,"_pathway");t.searchParams.set(r,n)}if(i){var a="_".concat(this.manifestType_,"_throughput");t.searchParams.set(a,i)}return t.toString()}},{key:"assignSteeringProperties_",value:function(e){var t=this;if(this.steeringManifest.version=e.VERSION,!this.steeringManifest.version)return this.logger_("manifest version is ".concat(e.VERSION,", which is not supported.")),void this.trigger("error");this.steeringManifest.ttl=e.TTL,this.steeringManifest.reloadUri=e["RELOAD-URI"],this.steeringManifest.priority=e["PATHWAY-PRIORITY"]||e["SERVICE-LOCATION-PRIORITY"],this.availablePathways_.size||(this.logger_("There are no available pathways for content steering. Ending content steering."),this.trigger("error"),this.dispose());var n=function(e){var n=!0,i=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;if(t.availablePathways_.has(o))return o}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}return _toConsumableArray(t.availablePathways_)[0]}(this.steeringManifest.priority);this.currentPathway!==n&&(this.currentPathway=n,this.trigger("content-steering"))}},{key:"getPathway",value:function(){return this.currentPathway||this.defaultPathway}},{key:"getRequestURI",value:function(e){var t=this;if(!e)return null;var n=function(e){return t.excludedSteeringManifestURLs.has(e)};if(this.proxyServerUrl_){var i=this.setProxyServerUrl_(e);if(!n(i))return i}var r=this.setSteeringParams_(e);return n(r)?null:r}},{key:"startTTLTimeout_",value:function(){var e=this,t=1e3*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.steeringManifest.ttl);this.ttlTimeout_=window.setTimeout((function(){e.requestSteeringManifest()}),t)}},{key:"clearTTLTimeout_",value:function(){window.clearTimeout(this.ttlTimeout_),this.ttlTimeout_=null}},{key:"abort",value:function(){this.request_&&this.request_.abort(),this.request_=null}},{key:"dispose",value:function(){this.off("content-steering"),this.off("error"),this.abort(),this.clearTTLTimeout_(),this.currentPathway=null,this.defaultPathway=null,this.queryBeforeStart=null,this.proxyServerUrl_=null,this.manifestType_=null,this.ttlTimeout_=null,this.request_=null,this.excludedSteeringManifestURLs=new Set,this.availablePathways_=new Set,this.excludedPathways_=new Set,key:"excludePathway",value:function(e){return this.availablePathways_.delete(e)}}]),t}(Ea.EventTarget),tp=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],np=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},ip=function(e){function t(e){var n;_cetPrototypeOf(t).call(this));var i=e.src,r=e.withCredentials,a=e.tech,s=e.bandwidth,o=eenableLowInitialPlaylist,d=e.sourceType,h=e.cacheEncryptionKeys,p=e.bufferBasedABR,f=e.leastPixelDiffSelector,g=e.captionServices;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");var m=e.m=m,n.enableLowInitialPlaylist=c,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:r,maxPlaylistRetries:m,timeout:null},n.on("error",n.pauseLoadioups:{},tracks:{},activePlaylistLoader:null,activeGroup:ph,activeTrack:ph,getActiveGroup:ph,onGroupChanged:ph,onTrackChanged:ph,lastTrack_:null,logger_:Ju("MediaGroups[".concat(t,"]"))}})),e}(),n.mediaSource=new window.MediaSource,n.handleDurationChange_=n.handleDurationChange_.bind(_Listener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=ec(),n.hasPlayed_=!1,n.syncController_=new Fh(e),n.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=newxtTracks_={},n.timelineChangeController_=new qh;var y={vhs:n.vhs_,parse708captions:e.parse708capffsetForEachSegment,captionSle()},seeking:function(){return n.techized(n))})):new Vc(i,n.vhs_,Zu(n.requestOptions_,{addDateRangesToTextTrack:n.addDateRangesToTextTrack_.bind(_assertT){n[e+"_"]=np.bind(_assertThisInitialized(n),e)})),n.logger_=Ju("pc"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.mainPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.mainPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1;var v="none"===n.tech_.preload()?"play":"loadstart";return n.tech_.one(v,(function(){var e=Date.now();n.tech_.one("loadeddata",(function(){n.timeToLoadedData__=Date.now()-e,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends}))})),n}return _inherits(t,e),_createClass(t,[{key:"mainAppendsToLoade"audioAppendsToLoadedData_",value:function(){uments[0]:"abr",t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,e)}},{key:"switchMedia_",value:function(e,t,n){var i=this.media(),r=i&&(i.id||i.uri),a=e.id||e.uri;r&&r!==a&&(this.logger_("switch media ".concat(r," -> ").concat(a," from ").concat(t)),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-".concat(t)})),this.mainPlaylistLoader_.media(e,n)}},{key:"switchMediaForDASHContentSteering_",value:function(){var e=this;["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){var n=e.mediaTypes_[t],i=n?n.activeGroup():null,r=e.contentSteeringContris.stopABRTimer_(),this.abrTimer_=window.setInterval((function(){return e.checkABR_()}),250)}},{key:"stopABRTimer_",value:function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(window.clearInterval(this.abrTimer_),this.abrTimer_=null)}},{key:"getAudioTrackPlaylists_",value:function(){var e=this.main(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var n,i=e.mediaGroups.AUDIO,r=Object.keys(i);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)n=this.mediaTypes_.AUDIO.activeTrack();else{var a=i.main||r.length&&i[r[0]];for(var s in a)if(a[s].default){n={label:s};break}}if(!n)return t;var o=[];for(var l in i)if(i[l][n.label]){var u=i[l][n.label];if(u.playlists&&u.playlists.length)o.push.apply(o,u.playlists);else if(u.uri)o.push(u);else if(e.playlists.length)for(var c=0;c<e.playlists.length;c++){var d=e.playlists[c];d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===l&&o.push(d)}}return o.length?o:t}},{key:"setupMainPlaylistLoaderListeners_",value:function(){var e=this;this.mainPlaylistLoader_.on("loadedmetadata",(function(){var t=e.mainPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Sc(e.mainPlaylistLoader_.main,e.mainPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),Jh({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,mainPlaylistLoader:e.mainPlaylistLoader_,vhs:e.vhs_,main:e.main(),mediaTypes:e.mediaTypes_,excludePlaylist:e.excludePlaylist.bind(e)}),e.triggerPresenceUsage_(e.main(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.mainPlaylistLoader_.on("loadedplaylist",(function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t=e.mainPlaylistLoader_.media();if(!t){var n;if(e.initContentSteeringController_(),e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n||(n=e.selectPlaylist()),!n||!e.shouldSwitchToMedia_(n))return;if(e.initialMedia_=n,e.switchMedia_(e.initialMedia_,"initial"),!("vhs-json"===e.sourceType_&&e.initialMedia_.segments))return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(er_.error;e.excludePlaylist({playlistToE("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.mainPlaylistLoader_.on("mediachange",(function(){var t=e.mainPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Sc(e.mainPlaylistLoader_.main,e.mainPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainPlaylistLoader_.load(),e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0}.mainPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&(e.stuckAtPlaylistEnd_(t)&&(e.excludePlaylist({error:}),e.tech_.trigger("playliststuck")))})),this.mainPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"})})),this.mainPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"})}))}},{key:"handleUpdatedMediaPlaylist",value:function(e){this.useCueTags_&&this.updateAdCues_(e),this.maientLoader_.load())}},{key:"triggerPresenceUsage_",value:function(e,t){var n=e.mediaGroups||{},i=!0,r=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var s in n.AUDIO[a]){n.AUDIO[a][s].uri||(i=!1)}i&&this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),Object.keys(n.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),fh.Playlist.isAes(t)&&this.tech_.trigger({type:"usage",name:"vhs-aes"}),r.le"usage",name:"vhs-alternate-audio"}),e:function(e){var t.buffered,i=e.currentTime,r=e.nextPlaylist,a=e.bufferLowWaterLine,s=e.bufferHighWaterLine,o=e.duration,l=e.bufferBasedABR,u=e.log;if(!r)return Ea.log.warn("We received no playlist to switch to. Please check your stream."),!1;var c="allowing switch ".concat(t&&t.id||"null"," -> ").concat(r.id);if(!t)return u("".concat(c," as current playlist is not set")),!0;ifrent playlist is li,g=t.attributes.BANDWIDTH;if(width (".concat(f," > ").concat(aterLine:r,duration:this.duration.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("timeout",(function(){e.bufferBasedABR&&e.mainSegderror",(function(){e.error=e.mainnction(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(t){e.bufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.excludePlaylist({error:{message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},playlistExclusionDuration:10}))}));var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(fame:"vhs-fmp4"}),e.triggder ended"),e.onEndOfStream()}))}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"fastQualityChange_",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectPlaylist();e!==this.mainPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.resetMainLoaderReplaceSegments()):this.logger_("skipping fastQualityChange because new media is same as old")}},{key:"resetMainLoaderReplaceSegments",value:function(){var e=this.tech_.buffered(),t=e.end(e.length-1);this.mainSegmentLoader_.replaceSegmentsUntil=t,this.mainSegmentLoader_.resetLoaderProperties(),this.mainSegmentLoader_.resetLoader()}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.{key:"setupFirstPlay",value:function(){var e=this.mainPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList||e.start){var t=this.seekable();if(!t.length)return!1;var n=t.end(0),i=n;if(e.start){var r=e.start.tih_.setCurrentTime(i)}return this.hasPlayed_=!0,this.load(),!0}},{key:"handleSourceOpen_",value:function(){if(this.tryToCreateSourceBuffeypeof e.then&&e.then(null,(functis.mainSegmentLoader_.er_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())}},{key:"stuckAtPlaylistEnd_",value:function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var n=fh.Playlist.playlistEnd(e,t),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=nc;var a=r.end(r.length-1);return a-i<=nc&&n-a<=nc}},{key:"excludePlaylist",value:function(e){var t=this,n=e.playlistToExclude,i=void 0===n?this.mainPlaylistLoader_.media():n,r=e.error,a=void 0===r?{}:r,s=e.playlistExclusionDuration;if(i=i||this.mainPlaylistLoader_.media(),s=s||a.playlistExclusionDuration||this.playlistExclusionDuration,!i)return this.error=a,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));i.playlistErrors_++;var o,l=this.mainPlaylistLoader_.main.playlists,u=l.filter(Tc),c=1===u.length&&u[0]===i;if(1===l.length&&s!==1/0)return Ea.log.warn("Problem encountered with playlist ".concat(i.id,". ")+"Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.mainPlaylistLoader_.load(c);ireason),this.tech_.trigger("excludeplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-excluded"});var f=this.selectPlaylist();if(!f)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var g=a.internal?this.logger_:Ea.,".")+"".concat(m," Switching to playlist ").concat(f.id,".")),f.attributes.AUDIO!==i.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),f.attributes.SUBTITLES!==i.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var y=f.targetDuration/2*1e3||5e3,v="number"==typeof f.lastRequest&&Date.now()-f.lastRequest<=y;return this.switchMedia_(f,"exclude",c||v)}},{key:"pauseLoading",value:function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()}},{key:"delegateLoaders_",value:function(e,t)ader_);var a=[];(r||"audio"===e)&&"main","audio","subtitle"].forEach((function(t){var r=n["".concat(t,"SegmentLoader_")];!r||e!==t&&"all"!==e||i.push(r)})),i.forEach((function(e){return t.forEach((function(t){"function"==typeof e[t]&&e[t]()}))}))}},{key:"setCurrentTime",value:function(e){var t=rc(this.tech_.buffered(),e);return this.mainPlaylistLoader_&&this.mainPlaylistLoader_.media()&&this.mainPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.resetEverything(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.resetEverything(),void this.load()):0}},{key:"duration",value:function(){if(!this.mainPlaylistLoader_)return 0rn this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var e;if(this.mainPlayer_.getExpiredTime(t,this.duration());if(null!==n){var i=this.mainPlaylistLoader_.main,r=fh.Playlist.seekable(t,n,fh.Playlist.liveEdgeDelay(i,t));if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=fh.Playlist.seekable(t,n,fh.Playlist.liveEdgeDelay(i,t))).length)return}var a,s;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),s=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=ec([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===s||(this.logger_("seekable updated [".concat(sc(this.seekable_),"]")),this.tech_.trigger("seekablechanged"))}}}}}},{key:"updateDuration",value:function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyStatend(t.length-1))}else{var n=this.tech_.buffered(),i=fh.Playlist.duration(this.mainPlaylistLoader_.media());n.length>0&&(i=Math.max(i,n.end(n.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}}},{key:"dispose",value:function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.mainPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.contentSteeringController_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(t){var n=e.mediaTypes_[t].groups;for(var i in n)n[i].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()}},{key:"main",value:function(){return this.mainPlaylistLoader_.main}},{key:"media",value:function(){return this.mainPlaylistLoader_.media()||this.initialMedia_}},{key:"areMediaTypesKnown_",value:function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)}},{key:"getCodecsOrExclude_",value:function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},n=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();t.video=t.main;var i=Wd(this.main(),n),r={},a=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(r.video=i.video||t.main.videoCodec||"avc1.4d400d"),t.main.isMuxed&&(r.video+=",".concat(i.audio||t.main.audioCodec||Ja)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||a)&&(r.audio=i.audio||t.main.audioCodec||t.audio.audioCodec||Ja,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),r.audio||r.v[n]=o[n]||[],o[n].push(r[e]),"audncat(s,' does not support codec(s): "').concat(r.audio,'"'))}if(!Object.keys(o).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var u=[];if(["video","audio"].forEach((function(t){var n=(Xa(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,i=(Xa(r[t]||"")[0]||{}).type;n&&i&&n.toLowerCase()!==i.toLowerCase()&&u.push('"'.concat(e.sourceUpdater_.codecs[t],'" -> "').concat(r[t],'"'))})),u.length)return void this.excludePlaylist({playlistToExclude:n,error:{message:"Codec switching not supported: ".concat(u.join(", "),"."),internal:!0},playlistExclusionDuration:1/0})}return r}var c=Object.keys(o).reduce((function(e,t){return e&&(e+=", "),e+="".concat(t,' does not support codec(s): "').concat(o[t].join(","),'"rceBuffers_",value:function(){ifuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}}},{key:"excludeUnsupportedVariants_",value:function(){var e=this,t=this.main().playlists,n=[];Object.keys(t).forEach((function(i){var r=t[i];if(-1===n.indexOf(r.id)){n.push(r.id);var a=Wd(e.main,r),s=[];!a.audio||$a(a.audio)||Qa(a.audio)||s.push("audio codec ".concat(a.audio)),!a.video||$a(a.video)||Qa(a.video)||s.push("video codec ".concat(a.video)),a.text&&"stpp.ttml.im1t"===a.text&&s.push("text codec ".concat(a.text)),s.length&&(r.excludeUntil=1/0,e.logger_("excluding ".concat(r.id," for unsupported: ").concat(s.join(", "))))}}))}},{key:"excludeIncompatibleVariants_",value:function(e){var t=this,n=[],i=this.main().playlists,r=Hd(Xa(e)),a=zd(r),s=r.video&&Xa(r.video)[0]||null,o=r.audio&&Xa(r.audio)[0]||null;Object.keys(i).forEach((funn.push(r.id);var l=[],u=Wd(t.mainPlaylistLoader_.main,r),c=zd(u);if(u.audio||u.video){if(c!==a&&l.push('codec count "'.concat(c,'" !== "').concat(a,'"')),!t.sourceUpdater_.canChangeType()){var d=u.video&&Xa(u.video)[0]||null,h=u.audio&&Xa(u.audio)[0]||null;d&&s&&d.type.toLowerCase()!==s.type.toLowerCase()&&l.push('video codec "'.concat(d.type,'" !== "').concat(s.type,'"')),h&&o&&h.type.toLowerCase()!==o.type.toLowerCase()&&l.push('audio codec "'.concat(h.type,'" !== "').concat(o.type,'"'))}l.length&&(r.excludeUntil=1/0,t.logger_("excluding ".concat(r.id,": ").concat(l.join(" && "))))}}}))}},{key:"updateAdCues_",value:function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.segments)for(var i,r=n,a=0;a<e.segments.length;a++){var s=e.segments[a];if(i||(i=Bh(t,r+s.duration/2)),i){if("cueIn"in s){i.en.adEndTime=r+parseFloat(s.cueOut),t.addCue(i)),"cueOutCont"in s){var o=_slicedToArray(s.cueOutCont.split("/").map(parseFloat),2),l=o[0],u=o[1];(i=new window.VTTCue(r,r+s.duration,"")).adStartTime=r-l,i.adEndTime=i.adStartTime+u,t.addCue(i)}r+=s.duration}}(e,this.cueTagsTrack_,t)}},{key:"goalBufferLength",value:function(){var e=this.tech_.currentTime(),t=hd.GOAL_BUFFER_LENGTH,n=hd.GOAL_BUFFER_LEN_WATER_LINE_RATE,i=Math.max(t,hd.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,hd.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.bufferBasedABR?r:i)}},{key:"bufferHighWaterLine",value:function(){return hd.BUFFER_HIGH_WATER_LINE}},{key:"addDateRangesToTextTrack_",value:function(e){nh(this.inbandTextTracks_,"com.apple.streaming",this.tech_),function(e){var t=e.inbandTextTracks,n=e.dateRanges,i=t.metadataTrack_;if(i){var r=window.WebKitDataCue||window.VTTCue;n.forEach((function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];if(!th.has(a)){var s=new r(e.startTime,e.endTime,"");s.id=e.id,s.type="com.apple.quicktime.HLS",s.value={key:eh[a],data:e[a]},"scte35Out"!==a&&"scte35In"!==a||(s.value.data=new Uint8Array(s.value.data.match(/[\da-f]{2}/gi)).buffer),i.addCue(s)}}e.processDateRange()}))}}({inbandTextTracks:this.inbandTextTracks_,dateRanges:e})}},{key:"addMetadataToTextTrack",value:function(e,t,n){var i=this.sourceUpdater_.videoBuffer?this.sourceUpdater_.videoTimestampOffset():this.sourceUpdater_.audioTimestampOffset();nh(this.inbandTextTracks_,e,this.tech_),Zd({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:n})}},{key:"pathwayontentSteeringController_",valhis.main();if(t.contentSttry{for(var a,s=t.playlists[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var o=a.value;e.contentSteeringController_.addAvailablePathway(e.pathwayAttribute_(o))}}catch(e){i=!0,r=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw r}}e.contentSteeringController_.assignTagProperties(t.uri,t.contentSteering)};n(t),this.contentSteeringController_.on("content-steering",this.excludeThenChangePathway_.bind(this)),"dash"===this.sourceType_&&this.mainPlaylistLoader_.on("mediaupdatetimeout",(function(){e.mainPlaylistLoader_.refreshMedia_(e.mainPlaylistLoader_.media().id),e.contentSteeringController_.abort(),e.contentSteeringController_.clearTTLTimeout_(),e.contentSteeringController_.clearAvailablePathways(),n(e.main())})),this.contentSteeringController_.queryBeforeStart||this.tech_.one("canplay",(functionnew Set,r=!1;Object.keys(n).forEach((function(a){var s=n[a],o=e.pathwayAttribute_(s),l=o&&t!==o;s.excludeUntil===1/0&&"content-steering"===s.lastExcludeReason_&&!l&&(delete s.excludeUntil,delete s.lastExcludeReason_,r=!0);var u=!s.excludeUntil&&s.excludeUntil!==1/0;!i.has(s.id)&&l&&u&&(i.add(s.id),s.excludeUntil=1/0,s.lastExcludeReason_="content-steering",e.logger_("excluding ".concat(s.id," for ").concat(s.lastExcludeReason_)))})),"DASH"===this.contenbutes.serviceLocation!==t&&(r=!0)}})),r&&this.changeSegmentPathway_()}}},{key:"changeSegmentPathway_",value:function(){var e=this.selectPlaylist();this.pauseLoading(),"DASH"===this.contentSteeringController_.manifestType_&&this.switchMediaForDASHContentSteering_(),this.switchMedia_(e,"content-steering")}}]),t}(Ea.EventTarget),rp=function e(t,n,i){_classCallCheck2(this,e);var r,a,s,o=t.playlistController_,l=o.fastQualityChange_.bind(o);if(n.attributes){var u=n.attributes.RESOLUTION;this.width=u&&u.width,this.height=u&&u.height,this.bandwidth=n.attributes.BANDWIDTH,this.frameRate=n.attributes["FRAME-RATE"]}this.codecs=Wd(o.main(),n),this.playlist=n,this.id=i,this.enabled=(r=t.playlists,a=n.id,s=l,function(e){var t=r.main.playlists[a],ninUnsafeLiveWindow,this.liveRanta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ju("PlaybackWatcher"),this.logger_("initialize");var i=function(){return n.monitorCurrentTime_()},r=function(){return n.monitorCurrentTime_()},a=function(){return n.techWaiting_()},s=function(){return n.resetTimeUpdate_()},o=this.playlistController_,l=["main","subtitle","audio"],u={};l.forEach((function(e){u[e]={reset:function(){return n.resetSegmentDownloads_(e)},updateend:function(){return n.checkSegmentDownloads_(e)}},o["".concat(e,"SegmentLoader_")].on("appendsdone",u[e].updateend),o["".concat(e,"SegmentLoader_")].on("playlistupdate",u[e].reset),n.tech_.on(["seeked","seeking"],u[e].reset)}));var c=function(e){["main","audio"].forEach((function(t){o["".concat(t,"SegmentLoader_")][e]("appended",n.seekingAppendCheck_)}))};this.seekingAppendCheck_=function(){n.fixesBadSeeks_()&&(n.consecutiveUpdates=0,n.lastRecordedTime=n.tech_.currentTime(),c("off"))},this.clearSeekingAppendCheck_=function(){return c("off")},this.watchForBadSeeking_=function(){n.clearSeekingAppendCheck_(),c("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",a),this.tech_.on(ap,s),this.tech_.on("canplay",r),this.tech_.one("play",i),this.dispose=function(){n.clearSeekingAppendCheck_(),n.logger_("dispose"),n.tech_.off("waiting",a),n.tech_.off(ap,s),n.tech_.off("canplay",r),n.tech_.off("play",i),n.tech_.off("seeking",n.watchForBadSeeking_),n.tech_.off("seeked",n.clearSeekingAppendCheck_),l.forEach((function(e){o["".concat(e,"SegmentLoader_")].off("appendsdone",u[e].updateend),o["".concat(e,"SegmentLoader_")].off("playlistupdate",u[e].reset),n.tech_.off(["seeked","seeking"],u[e].reset)})),n.checkCurrentTimeTimeout_&&window.clearTimeout(n.checkCurrentTimeTimeout_),n.resetTimeUpdate_()}}return _createClass(e,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&window.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=window.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"resetSegmentDownloads_",value:function(e){var t=this.playlistController_["".concat(e,"SegmentLoader_")];this["".concat(e,"StalledDownloads_")]>0&&this.logger_("resetting possible stalled download count for ".concat(e," loader")),this["".concat(e,"StalledDownloads_")]=0,this["".concat(e,"Buffered_")]=t.buffered_()}},{key:"checkSegmentDownloads_",value:function(e){var t=this.playlistController_,n=t["".concat(e,"SegmentLoader_")],i=n.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(this["".concat(e,"Buffered_")],i);this["".concat(e,"Buffered_")]=i,r?this.resetSegmentDownloads_(e):(this["".concat(e,"StalledDownloads_")]++,this.logger_("found #".concat(this["".concat(e,"StalledDownloads_")]," ").concat(e," appends that did not increase buffer (possible stalled download)"),{playlistId:n.playlist_&&n.playlist_.id,buffered:oc(i)}),this["".concat(e,"StalledDownloads_")]<10||(this.logger_("".concat(e," loader stalled download exclusion")),thisch_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+nc>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutives=0}},{key:"fixesBadSeeks_",value:function(){if(!thie();thisedetnuion?l.partTargetDuration:2*(l.targetDuration-tc),c=[s,o]c[d])if(uc(c[d],n)<u)return!1}var h=ac(a,n);return 0!==h.length&&(e=h.start(0)+nc,this.logger_("Buffered regiong_()){var e=this.tech_.currentTime(),t=this.tech_.buffer.length-1);return this.logger_("Fell out of live windo:t}))return this.resetTimeUpdate_(),this.tech_.setCurrentTime(t),this.tech_.tri".concat(t," and seeking to ").concat(a.start(0))),this.resetTimeUpdate_(),this.skipTheGap_(t),!0)}},{key:"afterSeekableWindow_",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!e.length)return!1;var rreSeekableWindow_",value:function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)}},{key:"videoUnd.tech_.setCurrentTime(i.start(0)+tc),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(e,t){for(var n=function(e){if(e.length<2)return ec();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return ec(t)}(e),i=0;i<n.length;i++){var r=n.start(i),a=n.end(i);if(t-r<4&&t-r>2)return{start:r,end:a}}return null}}]),e}(),op={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},lp=function e(t,n){var i=0,r=0,a=Zu(op,n);t.ready((function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"})}));var s=function(){r&&t.curreneload"}),t.play())},l=function(){if(Date.now()-i<1e3*a.errorInterval)t.trigger({type:"usage",name:"vhs-error-reload-canceled"});else{if(a.getSource&&"function"==typeof a.getSource)return i=Date.now(),a.getSource.call(t,o);Ea.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},u=function e(){t.off("loadedmetadata",s),t.off("error",l),t.off("dispose",e)};t.on("error",l),t.on("dispose",u),t.reloadSourceOnError=function(n){u(),e(t,n)}},up="3.7.0",cp={PlaylistLoad>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&window.devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidtht,n=this.system,"height"),10)*i,this.limitRenditionByPlayerDimensions,this.playlistController_)}},comparePlaylistBandwidth:Qd,comparePlaylistResolution:function(e,t){var n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||window.Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),n===(i=i||window.Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},xhr:Wc()};Object.keys(hd).forEach((function(e){Object.defineProperty(cp,e,{get:function(){return Ea.log.warn("using Vhs.".concat(e," is UNSAFE be sure you know what you are doing")),hd[e]},set:function(t){Ea.log.warn("using Vhs.".concat(e," is UNSAFE be sure you know what you are doing")),"number"!=typeof t||t<0?Ea.log.warn("value of Vhs.".concat(e," must be greater than or equal to 0")):hd[e]=t}})}));var dp="videojs-vhs",hp=function(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.id){i=r;break}e.selectedIne.mainPlaylists;if(!t.eme.)return e;var i=t.reduce Object.keys(i).length&&e.push(i),e}),[])}(i?r.concat([i]):r,Object.keys(n)),s=[],o=[];return a.forEach((function(e){o.push(new Promise((function(e,n){t.tech_.one("keysessioncreated",e)}))),s.push(new Promise((function(n,i){t.eme.initializeMediaKeys({keySystems:e},(function(e){e?i(e):n()}))})))})),Promise.race([Promise.all(s),Promise.race(o)])},fp=function(e){var t=e.player,n=function(e,t,n){if(!e)return e;var i={};t&&t.attributes&&t.attributes.CODECS&&(i=Hd(Xa(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var r=Ya(i.video),a=Ya(i.audio),s={};for(var o in e)s[o]={},a&&(s[o].audioContentType=a),r&&(s[o].videoContentType=r),t.contentProtection&&t.contentProtection[o]&&t.contentProtection[o].pssh&&(s[o].pssh=t.contentProtection[o].pssh),"string"==typeof e[o]&&(s[o].url=e[o]);return Zu(e,s)}(e.sourceKeySystems,e.media,e.audioMedia);return!!n&&(t.currentSource().keySystems=n,!(n&&!t.eme)||(Ea.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},gp=function(){if(!window.localStorage)return null;var e=window.localStorage.getItem(dp);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}},mp=function(e,t){e._requestCallbackSet||(e._requestCallbackSet=new Set),e._requestCallbackSet.add(t)},yp=function(e,t){e._responseCallbackSet||(e._responseCallbackSet=new Set),e._responseCallbackSet.add(t)},vp=function(e,t){e._requestCallbackSet&&(e._requestCallbackSet.delete(t),e._requestCallbackSet.size||delete e._requestCallbackSet)},_p=function(e,t){e._responseCallbackSet&&(e._responseCallbackSet.delete(t),e._responseCallbackSet.size||delete e._responseCallbackSet)};cp.supportsNativeHls=function(){if(!document||!document.createElement)return!1;var e=document.createElement("video");if(!Ea.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),cp.supportsNativeDash=!!(document&&document.createElement&&Ea.getTech("Html5").isSupported())&&/maybe|probably/i.test(document.createElement("video").canPlayType("application/dash+xml")),cp.supportsTypeNatively=function(e){return"hls"===e?cp.sd=function(){return Ea.log.warn("VHS is no longer a tech. Please remove it from your player's techOrder.")},cp.xhr.onRequest=function(e){mp(cp.xhr,e)},cp.xhr.onResponse=function(e){yp(cp.xhr,e)},cp.xhr.offRequest=function(e){vp(cp.xhr,e)},cp.xhr.offResponse=function(e){_p(cp.xhr,e)};var bp=function(e){function t(e,n,i){var r;if(_classCallCheck2(this,t),r=_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,n,i.vhs)),"number"==typeof i.initialBandwidth&&(r.options_.band"VhsHandler"),n.options_&&n.options_.playerId){var a=Ea.getPlayer(n.options_.playerId);r.player_=a}if(r.tech_=n,r.source_=e,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNati See https://git.io/vMpjB");return r.on(document,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;t&&t.contains(r.tech_.el())?r.playlistController_.fastQualityChange_():r.playlistController_.checkABR_()})),r.on(r.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTimplaylistControlleturnals||!1,this.optomLo.useNetworkInformationTimestampOffset||!1,this.options_.calculateTimestampOffsetForEachSegment=this.options_.calculateTimestampOffsetForEachSegment||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys||!1,this.options_.llhls=!1!==this.options_.llhls,this.options_.bufferBasedABR=this.options_.bufferBasedABR||!1,"number"!=typeof this.options_.playlistExclusionDuration&&(this.options_.playlistExclusionDuration=60),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=gp();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=hd.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===hd.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","customTagParsers","customTagMappers","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","bufferBasedABR","liveRangeSafeTimeDelta","llhls","useForcedSubtitles","useNetworkInformationApi","useDtsForTimestampOffset","calculateTimestampOffsetForEachSegment","exactManifestTimings","leastPixelDiffSele]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio}},{key:"src",value:function(e,t){var n=this;if(e){var i;this.setOptions_(),this.options_.src=0===(i=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(i.substring(i.indexOf(",")+1)):i,this.options_.tech=this.tech_,this.options_.externVhs=cp,this.options_.sourceType=ts(t),this.options_.seekTo=function(e){n.tech_.setCurre(this.options_);var r=Zu({liveRangeSafeTimeDelta:nc},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.playlistController_.media()},playlistController:this.playlistController_});this.playbackWatcher_=new sp(r),this.playlistController_.on("error",(function(){var e=Ea.players[n.tech_.options_.playerId],t=n.playlistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));var a=this.options_.bufferBasedABR?cp.movingAverageBandwidthSelector(.55):cp.STANDARD_PLAYLIST_SELECTOR;this.playlistController_.selectPlaylist=this.selectPe,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.playlistController_.selectPlaylist},set:function(e){this.playlistCooughput:{get:function(){return this.playlistContset:function(e){this.playlistController_.mainSegmentLoader_.throughput.rate=e,this.playlistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var e=this.playlistController_.mainSer('The "systemBandwidth" property ihroughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.playlistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.playlistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.playlistController_.mediDuration:{get:function(){return n.playlistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.playlistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.playlistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.playlistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.playlistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.playlistController_.audioAppendsToLoadedData_()||0},enumerable:!0},app},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},main:{get:function(){return n.playlists.main},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return oc(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.playlistController_.setupFirstPlay.bind(this.playlistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(!window.localStorage)return!1;var t=gp();t=t?Zu(t,e):e;try{window.localStorage.setItem(dp,JSON.stringify(t))}catch(e){return!1}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.playlistController_.on("selectedinitialmedia",(function(){var e;(eroller_.getAudioTrackPlaylists_(is.on(this.playlistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=window.URL.createObjectURL(this.playlistController.src(this.mediaSourceUrl_))}}},{key:"createKeySessions_",value:fuion"),pp({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.main.playlists}).then((function(){e.logger_("created EME key session"),e.playlistController_.sourceUpdater_.initializedEme()})).catch((function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})}))}},{key:"handleWaitingForKey_",value:functetupEme_",value:function(){var e=this,t=this.playlistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=fp({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:t&&t.media()});this.player_.tech_.on("keystatuschange",(function(t){if("output-restricted"===t.status){var n=e.playlistController_.main();if(n&&n.playlists){var i,r=[];if(n.playlists.forEach((function(e){e&&e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height>=720&&(!e.excludeUnt&(e.exclaylistController_.mainSegmentLoader_.resetEverything(),e.playlistController_.fastQualityChange_()}}})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("weyedia(),videojs/http-streaming":up,"mux.js":"7.0.1","mpd-parser":"1.2.2","m3u8-parser":"onent("ComponeSource:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Zu(Ea.options,n);return t.vhs=new bp(e,t,i),t.vhs.xhr=Wc(),t.vhs.setupXhrHooguments.length>0&&void 0!==arg,n))(this,(function(e,t,n){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,n=n&&n.hasOwnProperty("default")?n.default:n;var i="7.3.2";var r=function(e,t){t.isImmediat:t+n.type,originalEvent:n})};function s(e){"playing"===e.type?function(e,t){e.ads.isInAdMode()&&(e.ads.isContentResuming()?e.ads._contentEnding&&a(e,"content",t):a(e,"ad",t))}(this,e):"ended"===e.type?function(e,t){e.ads.isInAdMode()?e.ads.isContentResuming()?(r(0,t),e.trigger("resumeended")):a(e,"ad",t):e.ads._contentHasEnded||e.ads.stitchedAds()||(a(e,"content",t),e.trigger("readyforpostroll"))}(this,e):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?function(e,t){if(!("loadstart"===t.type&&!e.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===t.type&&!e.ads._hasThereBeenALoadedData||"loadedmetadata"===t.type&&!e.ads._hasThereBeenALoadedMetaData))if(e.ads.inAdBreak())a(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;a(e,"content",t)}}(this,e):"play"===e.type?function(e,t){e.ads.inAdBreak()?a(e,"ad",t):e.ads.isContentResuming()&&a(e,"content",t)}(this,e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?a(this,"content",e):a(this,"ad",e))}function o(){return o=Object.assign?Object.assignrguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype,version:t,callId:s}};a[s]=n,i.postMessage(o,"*")},t.addEventListener("message",(unction"==typeof t.__tcfapi&&t.__tcfapi("addEventList&&(c=e)}))},h="",0===n&&(nget(iturn void e(nullostMessage(a,"*")}},f=function(e,t){return t?ch((function(i){eog.warn('Unacro with regex "'+s+'". The provided regex may be invalid.')}e}=]+adataTrackMode:function(e){},getSupn("Skipping as this is not a supportedllPlay:function(){if(t.ads&&!0===t.ads._shoul&&i.catch&&i.catch((function(n){"NotAllowedError"!==n.name||e.browser.d=futer())t.one("resumeended",(function(){delete t.ads.snapshot,n):(t.ads.debug("Received adsready event (Preroll)"),this.handleAdsRear("readyforpreroll")}))},i.onAdsCanceled=function(e){var t));E.registerState("Preroll",O);var R=function(e){function ResumeToContent=!0},n.onAdsError=function(){this.player.ads.debug("adseState"));E.registerState("BeforePreroll",R);var M=function(e){function t(){retueClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming")},t}(E.getState("AdState"));E.registerState("Midroll",M);var N=function(t){function n(){return t.apply(this,arguments)||this}l(n,t),n._getName=function(){return"Postroll"};var i=n.prototype;return i.init=function(e){if(this.waitingForAdBreak=!0,e.ads._contentEnding=!0,e.ads.nopostroll_){this.resumeContent(e);var t=E.getState("Adss("vjs-ad-loadinettings.postrollTimeout),d-loading"),this.resde=function(){var t=this.player;t.ads.inAdBreak()||this.isContentResuming()?e.log.warn("Unexpected skipLinearAr)"),e.ads.inAdBreak()?e.ads.endLinearAdMode():this.abort(e)},i.onContentChanged=function(e){if(this.isContentReshis.inAdBreak()){vction(t){this.isContentResuming()||this.inAdBreak()?e.log.warn("Unexpected nopostroll event (Postroll)"):this.abort(t)},i.resumeContent=function(e){this.contentResuming=!0,e.addClass("vjs-ad-content-resuming")},i.abort=functint(e),e.debug),n.setTimeout((function(){n.ads._hasThereBeenALoadStartDuringPlayerLife||""===n.src()||e.log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrhas-started")})),n.on("contenttimeupdate",(fch((funct",t)}))}})),n.on("nopreroll",(function(){n.ads.debug("Received nopreroll event"),n.ads.nopreroll_=!0})),n.on("nopostroll",(function(){n.ads.debug("Received nopostroll event"),n.ads.nopostroll_=!0})),n.on("playing",(function(ntupdate=!1})),n.oon(){n.ads._hasThereBeenALoadStartDuringPlayerLife=!0})),n.on("loadeddata",(function(){n.ads._hasThereBeenALoadedData,_playRedData=!1,t.ads._hasThereBeenALoadedMetaData=!1,t.ads._cancelledPlay=!1,t.ads._should)},isWaitingForAdBreak:function():function(){if(this.settings.d"ADS: "+n[0]):e.log.apply(e,entSrc=e.currentSrc(),e.adsrc,newValue:t}),e.ads.contentSrc=t),e.dy","adscanceled","adskip","adserror","adtimeout","adended","ads-ad-started","ads-ad-skipped","contentchangedn("ads"));var t=e.getComponent("Player");return Boolean(t&&t.prototype.ads)}()&&((e.registerPlugin||e.plugin)("ads",t),C()&&!e.usingContribAdsMiddleware_&&(e.use("*",w),e.usingion(e,t,n){this.vjsPlayer=e,this.controller=n,this.contentTrackingTimer=null,this.contentComplete=!1,this.updateTimeIntervalHandle=null,this.updateTimeInterval=1e3,this.seekCheckInterhis.seekThreshold=100,this.contenpe="",this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.vjsPlayerDimensions={width:this.getPlayerWidth(),height:this.getPlayerHeight()},thlay",this.setUpPlayerIntervals.bind(this)),this.boundContentEndedListenerthis),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("readyforpreroll",this.onReadyForPreroll.bind(this)),this.vjsPlayer.on("adtimeout",this.onAdTimeout.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),"onPlay"===this.controller.getSettings().requestMode&&this.vjsPlayer.one("play",this.conlayer.ads(t)};n.prototype.setUpPlayerIntervals=function(){this.updateTimeIntervalHandle=setInterval(this.updateCurrentTime.bind(this),this.updateTimeInterval),this.ntervalHandle=setInterval(this.checkForResize.bind(this),this.resizeCheckInterval)},n.prototype.updateCurrentTime=function(){this.contentPlayheadTracker.seeking||(this.contentPlayheadTracker.currentTime=this.vjsPlayer.currentTime())},n.prototype.checkForSeeking=function(){var e=1e3*(t.seeking=!0:this.contentPlavjsPlayerDimensions.widthntComplete=!0,this.controller.onContentComplete()),this.contentEndedListeners)"function"==typeof this.conr.one("play",this.setUpPlayerIntervals.bind(this))},n.prototype.onNoPostroll=function(){this.vjended",this.boundContentEndedListener),this.vjsPlayer.ads.adTimeoutTimeout&&clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);var e=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.resizeCheckIntervalHandle];for(var t in e)e[t]&&clehis.h5.vjsPlayer.muted(!0):this.vjsPwidth()},n.prototype.getPlaPlayer.currentSrc()&&(this.vjsPlayer.currentTime(0),this.vjsPlayer.pause()),e&&this.vjsPlayer.src(e),this.vjsPlayer.one("loadedmetadata",this.seekContentToZero.bind(this))},n.prototype.seekContentToZero=function(){this.vjsPlayer.currentTime(0)},n.protot=function(){this.vjsPlayehis.vjsPlayer.on("contentlayheadTracker.currentTs.playPauseDiv=docuscreenDiv=documenacker={currentTime:0,duration:0,isPod:).showCountdown&&(this.showCountdown=!1),this.isAdNonlinear=!1,this.createAdContolute",this.adContainerDiControlAttributes(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.controller.getis.assignControlAttributes(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel,this.countdownDiv.style.display=this.showCountdown?"block":"none"),this.assignControlAttributes(this.eDiv.addEventListener("cltListener("click",this.onAdMuteClick.bind(this),!1),this.assignControlAttributes(this.sliderD(this),!1),this.controller.getttributes(this.fullscreenDiv,"ima-fullscreen-div"),this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener("click",this.onAdFullscreenClick.bind(this),!1),thild(this.seekBarDiv),this.controlsype.onAdPlayPauseClick=functotype.onAdFullscreenClick=ction(){this.controller.sdkImpl.adPlyPauseDiv,"ima-playing"),th,this.showAdControls()},i.prng=!0,this.addClass(ts.playPauseDiv,"ima-paus);s.toString().length<2&&(s="0"+s);var o=": ";r>1&&(o=" ("+i+" "+this.controller.getSettings().adLr l=100*(e/n);this.progressDiv.style.width=l+"%"},i.prototype.unmute=functio.gtainerClick=function(){thinon-muted"),this.sliderzed=!1,this.adsLoader=null,thisroller.getSettings().locale),r.getSettings().sessionId&&NAGER_LOADED,this.onAdsManagerLoaded.bings().adTagUrl:e.adsReLoadTimeout=this.controller.getSettings().vastLoadTimeout),this.controller.getSettings().omidMode&&windowccess` instead."),this.controller.getettings().omidVendorAccess;ObjrAdSlotWidth=this.contris.controller.getSettingdWillPlayMuted(this.controller.adsWillPlayMuted());var n=this.controller.getSettings().add":a(n))&&Object.keys(n).ler.playerWrapper.vjsPlayer.trigger({type:"ads-request",AdsRequest:e})},s.prototype.onAdsManagerLoadDY,this.onAdBreakReady.bind(thype.ALL_ADS_COMPLETED,this.onaddEventListener(google.ima.AdEvent.Complete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,tResumed.bind(this)),this.controller.;var t=this.controller.getSettings(dedCallback&&this.controller.getSe{window.console.warn("AdsLohis.controller.getPlayerWidth(),t=this.controller.getPlayerHeight();this.adsManagerDimensions.w,this.adsManager.init(e,t,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.initializeAdDisplayContainer()}catch(e){this.onAdError(e)}},s.prototype.createAdsRenderinoogle.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakCings)for(var e in this.adsRenderingSettings[e]=this.controller."+t),this.adsManager.desContentPauseRequested=functiot(e)},s.prototype.onContentResumeRequested=function(e){this.adsActive=!1,this.an(e){tunction(){if(null!==this.adsManager){var e=this.adsManager.getRemainingTime(),t=this.currentAd.getDuration(),n=t-e;n=n>0?n:0;var i=0,r=void 0;this.currentAd.getAdPodInfo()&&(r=this.currentAd.getAdPodInfo().getAdPosition(),i=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(n,e,t,r,i)}},s.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=ed()},s.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},s.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start()}catch(e){this.onAdError(e)}}},s.prototype.onAdTimeout=function(){this.isAdTimedOut=!0},s.prototype.onPlayerReady=function(){this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&"onLoad"===this.controller.getSettings().requestMode&&this.requestAds()},s.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManagager&&this.adsManager.resiager.setVolume(e),this.adMuted=0==e},s.prototype.onPlayerResize=function(e,t){this.adsManager&&(this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL))},s.prototype.getCurrentAd=function(){return this.currentAd},s.prototype.setAdBreakReadyListener=function(e){this.adBreakReadyListener=e},s.prototion(){return this.adMuted},s.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},s.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},s.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},s.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},s.prototype.setVolume=function(e){this.adsManager.setVolume(e),this.adMuted=0==e},s.prototype.initiainer&&(this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0))},s.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start())},s.prototype.addEventListener=function(e,t){this.adsManager&&this.adsManager.addEventListener(e,t)},s.prototype.getAdsManager=function(){return this.adsManager},s.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1};var o=function(e,t){this.settings={},this.contentAndAdsEndedListeners=[],this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgenngs.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},a=Object.assign({},r,t.contribAdsSettings||{});this.playerWrapper=new n(e,a,this),this.adUi=new i(this),this.sdkImpl=new s(this)};o.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,prerollTimeout:1e3,preventLateAdStart:!1,requestMode:"onLoad",showControlsForJSAds:!0,timeout:5e3},o.prototype.initWithSettings=function(e){this.settings=Object.assign({},o.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdo","adsWillAutoplay","adWillPlayMuted","adsWillPlayMuted"].forEach((function(t){void 0!==e.settings[t]&&console.warn("WARNING: videojs.ima setting "+t+" is deprecated")}))},o.prototype.getSettings=function(){return this.settings},o.prototype.getIsMobile=function(){return this.isMobile},o.prototype.getIsIos=function(){return this.isIos},iv=function(){return this.playerWrapper.getContentPlayer()},o.prototype.getContentPlayheadTracker=function(){return this.playerWrapper.getContentPlayheadTracker()},o.prototype.requestAds=function(){this.sdkImpl.requestAds()},o.prototype.setSetting=function(e,t){this.settings[e]=t},o.prototype.onErrorLoadingAds=function(e){thidsPaused(),this.sdkImpl.pauseAds()):(this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds())},o.prototype.onAdMuteClick=function(){this.sdkImpl.isAdMuted()?(this.playerWrapper.unmute(),this.adUi.unmute(),this.sdkImpl.unmute()):(this.playerWrapper.mute(),this.adUi.mute(),this.sdkImpl.mute())},o.prototype.setVolume=function(e){this.playerWrapper.setVolume(e),this.sdkImpl.setVolume(e)},o.prototype.getPlayerVolume=functotype.toggleFullscreen=function(){this.playerWrapper.toggleFullscreen()},o.prototype.onAdError=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},o.prototype.onAdBreakStart=function(e){this.playerWrapper.onAdBreakStart(),this.adUi.onAdBreakStart(e)}){this.adUi.onAllAdsCompletedyerWrapper.onAdLog(e)},o.prototype.getCurrentAd=function(){return this.sdkImpl.getCurrentAd()},prototype.onPlayerResize=function(e,t){this.sdkImpl.onPlayerResize(e,t)},o.prototype.onContentComplete=function(){this.sdkImpl.onContentComplete()},o.prototype.onNoPostroll=function(){this.playerWrapper.onNoPostroll()},o.prodAdsEndedListeners)"fuEndedListeners[e]()},o.proction(){this.sdkImpl.onPlayerReadyForPreroll()},o.prototype.onAdTimeout=function(){this.sdkImpl.onAdTimeout()},o.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},o.prototype.onPlayerEnterFullscreen=function(){this.adUi.onPlayerEnterFullscreen(),this.sdkImpl.onPPlayerVolumeChanged=function(e){this.adUi.onPlayerVolumeChanged(e),this.sdkImpl.onPlayerVolumeChanged(e)},o.prototype.setContentWithAdTag=function(e,t){this.reset(),this.settings.adTagdsRequest,this.playerWrnction(){return this.ploplay=function(){return vo.getPlayerOptions().autoplay},o.prototype.adsWillPlayMuted=function(){return void 0!==this.settings.adsWillPlayMuteyMuted?this.settings.asPlayer=e,this.daiControlls.vjsPlayer.currentT=function(){return this.vjoogle.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED],this.onStreamEvent.bind(this),!1),this.vjsPlayer.textTracks().onaddtrack=this.onAddTrack.bind(this),this.vjsPlayer.trigger({type:"stream-manager",StChild(e),this.adUiDiv=e},u.prototype.onStreamPause=function(){this.isAdBreak&&(this.adUiDiv.style.display="none")},u.prototype.onStreamPlay=Snapback=!1;else{var t=this.streamManage.onStreamEvent=function(e){switch(e.type){case google.ima.dai.api.StreamEvent.Type.LOADED:this.loadUrl(e.getStreamData().url);break;case google.ima.dai.api.StreamEvent.Type.ERROR:window.console.warn("Error loading stream, attempting to play backup stream. "+e.getStreamData().errorMessage),this.daiController.onErrorLoadingAds(e),this.daiController.getSettings().fallbackStreamUrl&&this.loadurl(this.daiController.getk;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:this.isAdBreak=!0,this.adUiDiv.style.display="block",this.daiController.onAdBreakStart();break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:this.isAdBreak=!1,this.adUiDiv.style.display="nonsnapForwardTime>this.vjsPlayeardTime=0)}},u.prototype.loadUrl=function(e){this.vjsPlayer.ready(function(){var t=this.daiController.getSettings().streamFormat;this.vjsPlayer.src({src:e,type:this.SOURCE_TYPES[t]});var n=this.daiControlr.streamTimeForContentTime(n);this.isSnapback=!0,this.vjsPlayer.currentTime(i)}}.bind(this))},u.prototype.requestStream=function(){var e=void 0,t=this.daiController.getSettings().streamType;if("vod"===t?((e=new google.ima.dai.api.VODStreamRequest).contentSourceId=th).assetKey=this.daiController.getSettings().assetKey:window.console.warn("No valid stream type toreon this.isMobile},c.prototype.getIsIos=ftype.getStreamper.onAdError(e)},c.prototype.onAdError=function(e){this.playerWrapper.onAdError(e)},c.prototype.onAdBreakStart=function(){this.inAdBreak=!0,this.playerWrapper.onAdBreakStart()},c.prototype.onAdBreakEnd=function(){this.inAdBreak=!1,this.playerWrapper.onAdBreakEnd()},c.prototype.onPlaers=[],this.sdkImpl.onPlayerDisposed()},c.prototype.isInAdBreak=function(){return this.inAdBreak},c.prototype.onSeekEnd=function(e){this.sdkImpl.onSeekEnd(e)},c.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},c.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset()},c.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},c.prototype.getStreamManager=function(){return this.sdkImpl.getStreamManager()},c.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},c.prototype.streamWillAutoplay=function(){return void 0!==this.settings.streamWillAutoplay?this.settings.streamWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},c.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)};var h=function(e,t){this.controller=new o(e,t),this.addContentAndAdsEndedListener=function(e){this.controller.addContentAndAdsEndedListener(e)}.bind(this),this.addContentEndedListener=function(e){this.controller.addContentEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.changeAdTag=function(e){this.controller.changeAdTag(e)}.bind(this),this.getAdsManager=function(){return this.controller.getAdsManager()}.bind(this),this.initializeAdDisplayContainer=function(){this.controller.initializeAdDisplayContainer()}.bind(this),this.pauseAd=function(){this.controller.pauseAd()}.bind(this),this.playAdBreak=function(){this.controller.playAdBreak()}.bind(this),this.requestAds=function(){this.controller.requestAds()}.bind(this),this.resumeAd=function(){this.controller.resumeAd()}.bind(this),this.setAdBreakReadyListener=function(e){this.controller.setAdBreakReadyListener(e)}.bind(this),this.setContentWithAdTag=function(e,t){this.controller.setContentWithAdTag(e,t)}.bind(this),this.setContentWithAdsResponse=function(e,t){this.controller.setContentWithAdsResponse(e,t)}.bind(this),this.setContentWithAdsRequest=function(e,t){this.controller.setContentWithAdsRequest(e,t)}.bind(this),this.setShowCountdown=function(e){this.controller.setShowCountdown(e)}.bind(this)},p=function(e,t){this.controller=new c(e,t),this.streamEndedListener=function(e){this.controller.addStreamEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.getStreamManager=function(){return this.controller.getStreamManager()}.bind(this)},f=function e(t,n){d(this,e),"hls"===(t=t.toLowerCase())||"dash"===t?"dash"!==t?"string"==typeof n?(this.streamFormat=t,this.assetKey=n):window.console.error("assetKey error: value must be string."):window.console.error("streamFormat error: DASH streams are notcurrently supported by this plugin."):window.console.error("VodStream error: incorrect streamFormat.")},g=function e(t,n,i){d(this,e),"hls"===(t=t.toLowerCase())||"dash"===t?"dash"!==t?"string"==typeof n?"string"==typeof i?(this.streamFormat=t,this.cmsId=n,this.videoId=i):window.console.error("videoId error: value must be string."):window.console.error("cmsId error: value must be string."):window.console.error("streamFormat error: DASH streamy this plugin."):window.console.error("VodStream error: incorrect streamFormat.")},m=t.registerPlugin||t.plugin;m("ima",(function(e){this.ima=new h(this,e)})),m("imaDai",(function(e,t){if(e instanceof f)t.streamType="live",t.assetKey=e.assetKey;else{if(!(e instanceof g))return void window.console.error("initDai() first parameter must be an instance of LiveStream or VodStream.");t.streamType="vod",t.cmsId=e.cmsId,t.videoId=e.videoId}t.streamFormat=e.streamFormat,this.imaDai=new p(this,t)})),e.default=h,e.VodStream=g,e.LiveStream=f,Object.defineProperty(e,"__esModule",{value:!0})}));var VideojsPlayer=function(){function e(t,n){_classCallCheck2(this,e),this.log("VideojsPlayer");var i=((new Date).getTime()/1e3|0).toString(16);this.id=i+"xxxxxxxxxxxxxxxx".replace(/[x]/g,(function(){return(16*Math.random()|0).toString(16)})).toLowerCase(),this.adRequested=!1,this.adCompleted=!1,this.pausedFromUser=void 0,this._el=t,this.position="1"===this._el.dataset.insiderightcolumn?"right":"left",this.autoplay="1"===this._el.dataset.autoplay,this.invio_track_analyt=!0,this.isPlaybackStarted=!1,this.paused=!0,this.isReady=!1,this.percent=0,this.lastTime=0,"undefined"==typeof contentMetadataObject&&null!=n?this.cMetadataObject=n:"undefined"!=typeof contentMetadataObject&&(this.cMetadataObject=contentMetadataObject),"undefined"!=typeof google&&(this.events=[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.CLICK,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.SKIPPED,google.ima.AdEvent.Type.PAUSED,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.AD_ERROR,google.ima.AdErrorEvent.Type.AD_ERROR]),1===elimina_pubblicita&&(this.log("UTENTE PREMIUM"),this.adCompleted=!0,this.adRequested=!0),this.autoplay&&(this._el.autoplay=!0),this.initVideoPlayer()}return _createClass(e,[{key:"initVideoPlayer",value:function(){var e=this;if(this.log("INIT Video."),1==elimina_pubblicita||"undefined"==typeof IOL)return this.log("IOL undefined?"),void(this._pl=videojs(this._el,{controls:!0,controlBar:{pictureInPictureToggle:!1},autoplay:!0===this.autoplay},this.onPlayerReady.bind(this)));IOL.adv.getVideoAds(!1,(function(t){e.adTagInput=t.adServerUrl,e.log("Video ADS URL: "+t.adServerUrl),e._pl=videojs(e._el,{controls:!0,controlBar:{pictureInPictureToggle:!1},autoplay:!0===e.autoplay},e.onPlayerReady.bind(e));var n={forceNonLinearFullSlot:!0,disableFlashAds:!0,adsManagerLoadedCallback:e.onAdsManagerLoaded.bind(e),showControlsForJSAds:!0,disableAdControls:!1,adsRenderingSettings:{enablePreloading:!1}};e._pl.ima(n)}))}},{key:"onPlayerReady",value:function(){this.log("onPlayerReady"),this._pl.on("click",this.onClick.bind(this)),this._pl.on("touchend",this.onClick.bind(this)),this._pl.on("play",this.onPlay.bind(this)),this._pl.on("pause",this.onPause.bind(this)),this._pl.on("waiting",this.onWait.bind(this)),this._pl.on("adsready",this.onAdsReady.bind(this)),this._pl.on("timeupdate",this.onTimeUpdate.bind(this)),this._pl.on("ended",this.onEnded.bind(this)),this._pl.on("seeking",this.onSeeking.bind(this)),this._pl.on("adstart",this.onContribEvent.bind(this)),this._pl.on("adend",this.onContribEvent.bind(this)),this._pl.on("adskip",this.onContribEvent.bind(this)),this._pl.on("readyforpreroll",this.onContribEvent.bind(this)),this._pl.on("readyforpostroll",this.onContribEvent.bind(this)),this._pl.on("adtimeout",this.onContribEvent.bind(this)),this._pl.on("contentchanged",this.onContribEvent.bind(this)),this._pl.on("ads-ad-started",this.onContribEvent.bind(this)),this._pl.on("nopreroll",this.onContribEvent.bind(this)),this._pl.on("nopreroll",this.onContribEvent.bind(this)),this._pl.on("nopostroll",this.onContribEvent.bind(this)),this._pl.on("contentresumed",this.onContribEvent.bind(this)),this.isReady=!0}},{key:"onAdsReady",value:function(){this.log("onadsready")}},{key:"onContribEvent",value:function(e){this.log(e.type)}},{key:"onWait",value:function(){parseInt(this._pl.currentTime())>0&&(this._pl.buffer=!0,this.log(" PAUSA STOP"),nSdkInsta,{key:"onAdEvent",value:function(e){switch(this.log("Ad event: "+e.type),e.type){case"loaded":e.getAd().isLinear()||(this.adCompleted=!0);break;case"start":e.getAd().isLinear()||(this.adCompleted=!0),this.invio_track_analyt&&(this.log("invio tracking preroll!"),this.sendGtagEvent("preroll"));break;case"complete":case"allAdsCompleted":case"skip":this.adCompleted=!0,this.pausedFromUser=!1;break;case"error":this.log("onAdEvent error"),onScroll(_pl);break;case"adError":case"adserror":this.log("onAdEvent adError"),this._pl.pause(),this.adReques(var e=0;e<this.events.length;e++)this._pl.ima.addEventListener(this.events[e],this.onAdEvent.bind(this))}},{key:"onClick",value:function(e){void 0===this.pausedFromUser?thiFromUser=!this.pausedFromUser,e.target.parentElement.classList.value.includes("vjs-mute-control")||this._pl.muted(!1),this.autoplay=!1}},{key:"onPause",value:function(){this.paused=!0,parseInt(this._pl.duration())!=parseInt(this._pl.currentTime())&&nSdkInstance.ggPM("stop",parseInt(this.lastTime))}},{key:"onSeeking",value:function(){this.log("nSdk seeking"),this.lastTime=parseInt(this._pl.currentTime())}},{key:"onCanPlay",value:function(){this._pl.buffer&&(parseInt(this._pl.currentTime())>0&&(nSdkInstance.ggPM("loadMetadata",this.cMetadataObject),this.invio_track_analyt&&(this.log("invio tracking buffer video play"),this.sendGtagEvent("play buffer"))),this._pl.buffer=!1)}},{key:"onEnded",value:function(){this.log("invio fine--------"),nSdkInstance.ggPM("end",parseInt(this._pl.currentTime())),this.pausedFromUser=!0,this.complete=!0,this.invio_track_analyt&&this.sendGtagEvent("video_complete")}},{key:"onTimeUpdate",value:function(){var e=parseInt(this._pl.currentTime());this.lastTime!=e&&e%1==0&&this.lastTime+1==parseInt(this._pl.currentTime())&&(nSdkInstance.ggPM("setPlayheadPosition",e),this.log("nSdk setPlayheadPosition "+parseInt(this._pl.currentTime())),this.log("DURATA "+parseInt(this._pl.duration())),this.sendProgressVideo(parseInt(this._pl.duration()),parseInt(this._pl.currentTime())),this.lastTime=e)}},{key:"sendProgressVideo",value:function(e,t){switch(this.percent=t/e*100,this.log("percentuale "+~~this.percent),~~this.percent){case 10:case 25:case 50:case 75:this.sendGtagEvent("video_progress")}}},{key:"onPlay",value:function(){nSdkInstance.ggPM("loadMetadata",this.cMetadataObject),this.log("ONPLAY"),this.invio_track_analyt&&(this.log("invio video_start"),this.sendGtagEvent("video_start")),this.complete=!1,this.paused=!1,this.isPlaybackStarted||(this.isPlaybackStarted=!0),this.adRequested||1==elimina_pubblicita||this.startPreroll()}},{key:"log",value:function(e){"www-test.3bmeteo.com"!=document.domain&&"www-dev.3bmeteo.com"!=document.domain||console.log("3bvideojs: "+e)}},{key:"sendGtagEvent",value:function(e){this.log("Invio Evento analytics"+this.percent),gtag("event",e,{video_provider:contentlocalteam.video_provider,video_title:contentlocalteam.video_title,video_url:contentlocalteam.video_url,visible:"true",video_percent:this.percent,video_current_time:this._pl.currentTime(),video_duration:this._pl.duration()})}},{key:"startPreroll",value:function(){var e=this;this.log("START PREROLL"),this.adRequested||(this.adRequested=!0,this._pl.ima.initializeAdDisplayContainer(),this._pl.ima.setContentWithAdTag(null,this.adTagInput,!1),this._pl.ima.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,(function(){e._pl.ima.changeAdTag(e.adTagInput),e.onScroll(_pl)}),{once:!0}),this._pl.ima.requestAds())}},{key:"play",value:function(){this.isReady&&(this.pausedFromUser||(!0===this.autoplay?(this.autoplay=!1,this._pl.muted(!0),this._pl.play()):this.isPlaybackStarted&&(this._pl.ads.isInAdMode()&&null!=this._pl.ima?(this.log("resume ads"),this._pl.ima.resumeAd(),this._pl.adspausa=!1,this.paused=!1):!this.pausedFromUser&&this.paused&&(this.log("resume video"),this._pl.play()))))}},{key:"tempo",value:function(){return parseInt(this._pl.currentTime())}},{key:"pause",value:function(){this.complete=!1,1!=elimina_pubblicita&&void 0!==this._pl&&void 0!==this._pl.ads&&void 0!==this._pl.ima&&!0===this._pl.ads.isInAdMode()?(this._pl.ima.pauseAd(),this._pl.adspausa=!0,this.paused=!0):this._pl.pause()}},{key:"destroy",value:function(){this.log("player destroy"),this._pl.off("click"),this._pl.off("touchend"),this._pl.off("play"),this._pl.off("pause"),this._pl.off("waiting"),this._pl.off("adsready"),this._pl.off("timeupdate"),this._pl.off("ended"),this._pl.off("seeking")}},{key:"lengthOfVideo",get:function(){return null!=this._pl?this._pl.duration():0}},{key:"element",get:function(){return this._el}},{key:"isAutoplay",get:function(){return this.autoplay}},{key:"player",get:function(){return this._pl}},{key:"isPlaying",get:function(){return!this.paused}}]),e}(),VideojsMultiInstance=function(){function e(t,n){var i=this;_classCallCheck2(this,e);var r=void 0===t?"video-js":t;if(this._elements=document.querySelectorAll("video."+r),0!=this._elements.length){"undefined"==typeof contentMetadataObject&&null!=n?this.cMetadataObject=n:"undefined"!=typeof contentMetadataObject&&(this.cMetadataObject=contentMetadataObject),this._players=new Array(this._elements.length);for(var a=0;a<this._elements.length;a++){var s=this._elements[a];this._players[a]=new VideojsPlayer(s,this.cMetadataObject)}this.timer,this.hidden,this.visibilityChange,void 0!==document.hidden?(this.hidden="hidden",this.visibilityChange="visibilitychange"):void 0!==document.msHidden&&(this.hidden="msHidden",this.visibilityChange="msvisibilitychange"),this.document_hidden=document[this.hidden],this.stopped=!1,this._players.find((function(e){e.isAutoplay&&i.onScroll()})),document.addEventListener(this.visibilityChange,this.onVisibilityChanged.bind(this)),window.addEventListener("beforeunload",this.closePlayer.bind(this)),window.addEventListener("pagehide",this.closePlayer.bind(this)),"undefined"==typeof embed&&window.addEventListener("scroll",this.onScroll.bind(this),{passive:!0})}}return _createClass(e,[{key:"onScroll",value:function(){var e=this;this.timer&&window.clearTimeout(this.timer),this.timer=window.setTimeout((function(){for(var t=0;t<e._players.length;t++){if(void 0===e._players[t].player)return;if(isElementInViewport(e._players[t].element)){if(!e._players[t].isPlaying)return void e._players[t].play()}else e._players[t].isPlaying&&!e._players[t].complete&&(e.log("pausa scroll"),e._players[t].pause())}}),10)}},{key:"onVisibilityChanged",value:function(){this.document_hidden!==document[this.hidden]&&(document[this.hidden]?this.pauseAllPlayers():this.onScroll(),this.document_hidden=document[this.hidden])}},{key:"pauseAllPlayers",value:function(e){for(var t=0;t<this._players.length;t++)this._players[t].id!=e&&(this.log("PAUSA ALL player"),this._players[t].pause())}},{key:"log",value:function(e){"www-test.3bmeteo.com"!==document.domain&&"www-dev.3bmeteo.com"!==document.domain||console.log("3bvideojs: "+e)}},{key:"play",value:function(e){pauseAllPlayers(e);for(var t=0;t<this._players.length;t++)this._players[t].id===e&&this._players[t].play()}},{key:"closePlayer",value:function(){if(!this.stopped)for(var e=0;e<this._players.length;e++)if(parseInt(this._players[e].tempo())>0){this.stopped=!0,this.log("lascio a sec:"+this._players[e].tempo());var t=this._players[e].tempo();nSdkInstance.ggPM("end",t)}}},{key:"destroy",value:function(){this.log("ondestroy"),document.removeEventListener(this.visibilityChange,this.onVisibilityChanged.bind(this)),window.removeEventListener("beforeunload",this.closePlayer.bind(this)),window.removeEventListener("pagehide",this.closePlayer.bind(this)),"undefined"==typeof embed&&window.removeEventListener("scroll",this.onScroll.bind(this));for(var e=0;e<this._players.length;e++)this._players[e].destroy();this.pauseAllPlayers()}}]),e}(),videojs_instance=new VideojsMultiInstance;