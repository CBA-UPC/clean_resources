"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1463],{65940:81559:81292:73186:73749:function(e,t,n){n.d(t,{Z:function(){return MediaCaptureEditControls}});var r=n(52322),a=n(2784),l=n(43913),o=n(32517),i=n(73235),c=n(66547),s=n(26806);function _templateObject(){let e=(0,i._)(["\n    mutation BatchUpdateMediaCaptures($input: MediaCaptureBatchUpdateInput!) {\n  batchUpdateMediaCaptures(input: $input)\n}\n    "]);return _templateObject=function(){return e},e}let d=(0,c.ZP)(_templateObject());function useBatchUpdateMediaCapturesMutation(){return s.Db(d)}var u=n(68082),p=n(1422),m=n(56958);function AddToThemeButton(e){return(0,r.jsx)("button",{className:"mt-5 w-full cursor-pointer rounded border border-gray-200 p-2 text-sm font-medium text-slate-700 shadow-sm hover:border-gray-300",onClick:e.onClick,children:"Add to theme"})}var h=n(61907),x=n(87205);function updateProjectMediaCapture_templateObject(){let e=(0,i._)(["\n    mutation UpdateProjectMediaCapture($input: MediaCaptureUpdateInput!) {\n  updateProjectMediaCapture(input: $input) {\n    ...MediaCapture\n  }\n}\n    ",""]);return updateProjectMediaCapture_templateObject=function(){return e},e}let f=(0,c.ZP)(updateProjectMediaCapture_templateObject(),x.f);function useUpdateProjectMediaCaptureMutation(){return s.Db(f)}var MediaCaptureEditControls_BackgroundControlPanel=let C="absolute mb-2 min-w-[300px] z-10 mt-1 pb-1 bg-white shadow-lg rounded-md text-lg ring-1 ring-black ring-opacity-5 focus:outline-none bottom-full",g="h-5 w-5 text-slate-300 group-hover:text-slate-400";var MediaCaptureEditControls_ControlLabel=MediaCaptureEditControls_ControlContainer=v=n(16544),MediaCaptureEditControls_ControlPanelHeader=let BackgroundControlPopoverButton=var MediaCaptureEditControls_BackgroundControl=MediaCaptureEditControls_CancelEditButton=j=n(81332),b=n(20851),y=n(60696),MediaCaptureEditControls_DeviceControlIcon=w=n(74534);function getMediaCollection_templateObject(){let e=(0,i._)(["\n    query GetMediaCollection($collectionId: String!) {\n  mediaCaptureCollection(collectionId: $collectionId) {\n    ...MediaCaptureCollection\n  }\n}\n    ",""]);return getMediaCollection_templateObject=function(){return e},e}let k=(0,c.ZP)(getMediaCollection_templateObject(),w.s);var _=n(47330),N=n(83122),T=n(77512);let S=j.$_.filter(e=>{let{value:t}=e;return"NONE"===t||t.includes("SHADOW")}),M=j.C2.filter(;function DeviceBase(e){let{capture:t,orientation:n,onSelect:a}=e;return(0,r.jsx)("div",{className:"grid grid-cols-2 grid-rows-2 gap-2",children:("PORTRAIT"===n?S:M).map(})}function DeviceRow(e){let{deviceType:t,orientation:n,capture:l,onSelect:o,onOpenSettings:i,onBack:c}=e,s="PORTRAIT"===n?j.$_:j.C2,[d,u]=(0,a.useState)(),p=s.filter(e=>{let{type:n}=e;return n===t});return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between text-sm",children:[(0,r.jsx)("div",{role:"button",className:"text-blue-primary flex-1",onClick:c,children:"← Back"}),(0,r.jsx)("div",{className:"text-slate-500",children:(0,r.jsx)("div",{className:"rounded bg-slate-100 p-1 capitalize",children:t.toLowerCase()})})]}),(0,r.jsx)(T.E1,{name:"search",autoFocus:!0,placeholder:"Search ...",value:d||"",className:"mb-3 flex-grow",onChange:u}),(0,r.jsx)("div",{className:"h-52 overflow-y-scroll",children:(0,r.jsx)("div",{className:"grid grid-cols-2 grid-rows-2 gap-2",children})(d).map(e=>{let t=j.rr.includes(e);return(0,r.jsxs)("div",{className:"relative flex flex-col",children:[(0,r.jsx)("div",{className:(0,N.AK)((null==l?void 0:l.deviceTemplate)===e.value?"border-blue-primary":"border-gray-200 hover:border-gray-300","flex flex-1 cursor-pointer items-center justify-center rounded border p-3"),onClick:()=>o(e.value),children:e.template?(0,r.jsx)(e.template,{className:"h-14"}):(0,r.jsx)("img",{src:"/device/".concat(e.image),className:"max-h-20"})}),t?(0,r.jsx)(v.ewm,{className:"absolute right-2 top-2 h-4 w-4 cursor-pointer text-gray-500 hover:text-gray-600",onClic)}):null,(0,r.jsx)("div",{className:"mt-1 truncate text-center text-[12px] text-gray-400",children:e.name})]},e.name)})})})]})}function DeviceControlPanel(e){var t;let{capture:n,isLandscape:l,onIsLandscapeChange:i}=e,[c,d]=(0,a.useState)(j.Yi.None),[h,x]=(0,a.useState)(null),f=(0,a.useRef)(!1),[,C]=useUpdateProjectMediaCaptureMutation(),[,g]=(0,u.W)(),[{data:v}]=(t={variables:{collectionId:n.collectionId}},s.aM({query:k,...t})),y=null==v?void 0:v.mediaCaptureCollection,w=(0,a.useCallback)(e=>{m.A.promise((async()=>{var t;let r=null===(t=j.Ak.fin}))||void 0===t?void 0:t.type;if(!y||!r||e===n.deviceTemplate)return;let{width:a,height:l}=function(e){var t,n;let{mediaCaptureCollection:r,deviceType:a}=e,l=null!==(t=r["default".concat((0,b.LF)(a),"Width")])&&void 0!==t?t:null,o=null!==(n=r["default".concat((0,b.LF)(a),"Height")])&&void 0!==n?n:null;return{width:l,height:o}}({capture:n,mediaCaptureCollection:y,deviceType:r}),o=function(e){let{deviceTemplate:t}=e;return t===_.DS.MobileShadow||t===_.DS.TabletShadow||t===_.DS.DesktopShadow}({deviceTemplate:e}),i=await C({input:{id:n.id,deviceTemplate:e,customTemplateWidth:o?a:null,customTemplateHeight:o?l:null}});if(i.error)throw Error(i.error.message);let c=await g({input:{id:n.collectionId,defaultDeviceTemplate:e}});if(c.error)throw Error((0,p.q)(c.error.message))})(),{loading:"Updating device template",success:"Updated device template",error:o.bW})},[y,n,C,g]);if((0,a.useEffect},[n]),h&&y)return(0,r.jsx)(DeviceSettingsTab,{capture:n,mediaCaptureCollection:y,deviceType:c,onBac)});let N=l?"LANDSCAPE":"PORTRAIT";return c===j.Yi.None||n.deviceTemplate==_.DS.None?(0,r.jsx)(DeviceBase,{orientation:N,capture:n,onSelec}}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(DeviceRow,{capture:n,onSelect:w,onOpenSetting),deviceType:c,orientation:N,onBac)}),(0,r.jsx)(T.rs,{label:"Landscape",className:"-mb-2 mt-2",checked:l,onChange:i})]})}function DeviceSettingsTab(e){let{capture:t,mediaCaptureCollection:n,deviceType:l,onBack:o}=e,[,i]=useUpdateProjectMediaCaptureMutation(),c=function(e){var t,n;let r=function(e){var t,n,r,a;let{capture:l,mediaCaptureCollection:o,deviceType:i}=e,c=null!==(t=o["default".concat((0,b.LF)(i),"Width")])&&void 0!==t?t:null,s=null!==(n=o["default".concat((0,b.LF)(i),"Height")])&&void 0!==n?n:null;return{width:null!==(r=l.customTemplateWidth)&&void 0!==r?r:c,height:null!==(a=l.customTemplateHeight)&&void 0!==a?a:s}}(e),a=E[e.deviceType];return{width:null!==(t=r.width)&&void 0!==t?t:a.width,height:null!==(n=r.height)&&void 0!==n?n:a.height}}({capture:t,mediaCaptureCollection:n,deviceType:l}),[s,d]=(0,a.useState)(c.width),[u,p]=(0,a.useState)(c.height),m=(0,b.LF)(l),h="".concat((0,b.LF)(l)," / Custom Frame"),handleSaveCustomTemplateDimensions=async(e,n)=>{await i({input:{id:t.id,customTemplateWidth:e,customTemplateHeight:n}}),p(n),d(e)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-3 flex items-center justify-between text-sm",children:[(0,r.jsxs)("div",{role:"button",className:"flex-1 text-gray-500",onClick:o,children:["← ",m]}),(0,r.jsx)("div",{className:"text-slate-700",children:(0,r.jsx)("div",{className:"rounded border bg-slate-50 px-2 py-1 capitalize",children:h})})]}),(0,r.jsx)("div",{className:"h-32 overflow-y-auto",children:(0,r.jsxs)("div",{className:"mx-1 mt-5 flex items-center",children:[(0,r.jsx)(T.Y2,{value:s,className:"w-32",labelText:"Width",min:5,max:2e3,styles:{error:{display:"none"}},unit:"px",debounce:500,onChange:e=>handleSaveCustomTemplateDimensions(e,u)}),(0,r.jsx)("div",{className:"mx-2 mt-3 text-gray-400",children:"\xd7"}),(0,r.jsx)(T.Y2,{value:u,className:"w-32",labelText:"Height",min:5,max:2e3,styles:{error:{display:"none"}},unit:"px",debounce:500,onChange:e=>handleSaveCustomTemplateDimensions(s,e)})]})})]})}let E={[j.Yi.Desktop]:{width:1200,height:800},[j.Yi.Tablet]:{width:650,height:660},[j.Yi.Mobile]:{width:390,height:650},[j.Yi.None]:{width:800,height:800}};var MediaCaptureEditControls_DeviceControl=e=>{let[,t]=useBatchUpdateMediaCapturesMutation(),[,n]=(0,u.W)(),applyToTheme=async()=>{var r;let a=await t({input:{collectionId:e.capture.collectionId,deviceTemplate:e.capture.deviceTemplate,customTemplateWidth:e.capture.customTemplateWidth,customTemplateHeight:e.capture.customTemplateHeight}});if(a.error)throw Error(a.error.message);let l=e.capture.deviceTemplate?(0,j.Dr)(e.capture.deviceTemplate):null;if(e.capture.deviceTemplate!==y.DeviceTemplateType.NONE&&l&&(null===(r=e.capture.deviceTemplate)||void 0===r?void 0:r.includes(l))){let t=await n({input:{id:e.capture.collectionId,defaultDeviceTemplate:e.capture.deviceTemplate,["default".concat((0,b.LF)(l),"Width")]:e.capture.customTemplateWidth,["default".concat((0,b.LF)(l),"Height")]:e.capture.customTemplateHeight}});if(t.error)throw Error((0,p.q)(t.error.message))}else{let t=await n({input:{id:e.capture.collectionId,defaultDeviceTemplate:e.capture.deviceTemplate}});if(t.error)throw Error((0,p.q)(t.error.message))}},onAddToTheme=()=>{m.A.promise(applyToTheme(),{loading:"Adding to theme...",success:"Added to theme",error:o.bW})};return(0,r.jsxs)(l.J,{className:"relative",children:[(0,r.jsx)(l.J.Panel,{static:!1,className:C,child})}}),(0,r.jsx)(l.J.Button,{as:"div",children:(0,r.jsx)(MediaCaptureEditControls_ControlContainer,{label:"Device",children:(0,r.jsx)(MediaCaptureEditControls_DeviceControlIcon,{})})})]})},O=n(77936),MediaUploadCont})},MediaCaptureEditControls_ScrollLockControlPa})};let ScrollLockControlPopoverBut})};var MediaCaptureEditControls_ScrollLockCont})}},78)}},30=N},70)}},19627:function(e,t,n){n.d(t,{Z:function(){return CreateCaptureCollection}});var r=n(52322),a=n(2784),l=n(94629),o=n(16544),i=n(44665),c=n(18318),s=n(47330),d=n(83122);let u=[{id:s.TG.Web,name:"Web"},{id:s.TG.Screenshot,name:"Media"}],I})},renderOpt})}var p=n(77512),m=n(75909),h=n(82468),x=n(94145),f=n(94171),C=n(32517),g=n(78066),v=n(36761),j=n(73235),b=n(66547),y=n(63635),w=n(26806);function _templateObject(){let e=(0,j._)(["\n    mutation DuplicateProjectCaptureCollectionMutation($collectionId: String!, $targetProjectId: String!, $name: String) {\n  duplicateProjectCaptureCollection(\n    collectionId: $collectionId\n    targetProjectId: $targetProjectId\n    name: $name\n  ) {\n    ...ProjectCaptureCollection\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let k=(0,b.ZP)(_templateObject(),y.V);var _=n(86414),N=n(46085),T=n(1422),S=n(65538),M=n(53954),E=n(64627),O=n(5632),D=n(56958);let B=[{name:"New",value:f.fm.Blank,Icon:o.pOD,Component:function(e){let{createOptionsState:t,dispatchCreateOptions:n}=e;return(0,r.jsxs)(i.Z,{children:[(0,r.jsx)(SelectAppType,{selected:t.blank.type,onChange:e=>n({type:"update-blank",payload:{...t.blank,type:e}})}),t.blank.type===s.TG.Web&&(0,r.jsx)(p.oi,{type:"url",labelText:"App URL",className:"mb-4 mt-3 w-full",placeholder:"Enter URL",name:"url",onCha}}),value:t.blank.url})]})}},{name:"Make Copy",value:f.fm.Duplicate,Icon:o.TIy,Compon})}}];var CreateCaptureCollection=e=>{let{projectId:t,open:n,handleClose:i}=e,[c,d]=(0,a.useState)(!1),[,u]=(0,v.f)(),[,m]=w.Db(k),h=(0,O.useRouter)(),[j,b]=(0,a.useReducer)(f.BS,f.Bu),{hasCxt:y}=(0,S.K)(),{workspace:F}=(0,M.cF)(),P=(0,M.NK)(F,s.TT.ClickToCapture),I=(0,a.useCallba})},[h]),L=(0,a.useCallbad)},[u,j.name,j.blank.type,j.blank.url,t,I,P]),A=(0,a.useCallbad)},[I,j,t,m]),W=(0,a.useCallbaL}},[L,A]),Z=(0,a.useCallba})},[j.blank.type,j.blank.url,j.method,j.name,W,i]);return(0,r.jsx)(g.Z,{title:"Create capture collection",open:n,handleClose:i,handleNext:Z,nextText:c?(0,r.jsx)(o.L4p,{}):"Create",nextDisabled:c,nextOnEnter:!0,children:(0,r.jsxs)(l.Z,{hasCxt:y,children:[(0,r.jsx)(p.oi,{labelText:"Name",className:"mb-4 w-full",autoFocus:!0,placeholder:"Enter name",name:"name",onChae}),value:j.name}),(0,r.jsx)(x.Z,{createOptionsState:j,dispatchCreateOptions:b,methods:B})]})})}},44665:function(e,t,n){n.d(t,{Z:function(){return CreateMethodDiv}});var r=n(523})}},94)}},94}}},75)}},82)}},31)}},59m)},12C)},36)}},68)}}}]);
//# sourceMappingURL=1463-d5c10ec283ab3d11.js.map