(function () {
    'use strict';

    function getElementClasses(t){if(!t.classList)return [];var e=[];return t.classList.forEach((),e}function getElementShelf(t,e){var r,n=e.getAttribute(t);if(null===n)return "invalid";try{r=JSON.parse(n);}catch(t){return "invalid"}if("object"!=typeof r)return "invalid";var i=r.shn;if(!i||"string"!=typeof i)return "invalid";var a=r.sht;if(!a||"string"!=typeof a)return "invalid";var u=r.shtg;u&&validateShtg(u)||(u=void 0);var s=r.p;return (!s||"object"!=typeof s||Object.keys(s).length>16)&&(s=void 0),{shn:i,sht:a,shtg:u,p:s}}var validateShtg=function(t){return !!Array.isArray(t)&&(t.forEach((function(t){if(2!==Object.keys(t).length||!Object.hasOwn(t,"type")||!Object.hasOwn(t,"value"))return !1})),!0)},TrackedElements=function(){eturn t.prototype.refresh=function(){var t=this;document.querySelectorAll(this.query).forEach((function(e){null===e.getAttribute(t.markerAttribute)&&(t.onDiscover(e),e.setAttribute(t.markerAttribute,"1"));}));},t}();

    var SEPARATOR=" ",FLAG_TRACK_PAGEVIEW="pv",FLAG_GENERATE_PAGEVIEW_ID="pvid",FLAG_ENABLE_ELEMENT_CLICK_TRACKING="ec",FLAG_ENABLE_ELEMENT_ACTIVE_VIEW_TRACKING="av",FLAG_ENABLE_CROSS_DOMAIN_TRACKING="cdt",FLAG_ENABLE_ACTIVITY_TRACKING="at";function getFeatureFlags(_){if(!_)return {track_pageview:!0,generate_page_view_id:!0,enable_element_click_tracking:!0,enable_active_view_tracking:!0,enable_cross_domain_tracking:!0,enable_activity_tracking:!1};var e=_.split(SEPARATOR).filter(().map(();return {track_pageview:e.some((function(_){return _===FLAG_TRACK_PAGEVIEW})),generate_page_view_id:e.some((function(_){return _===FLAG_GENERATE_PAGEVIEW_ID})),enable_element_click_tracking:e.some((function(_){return _===FLAG_ENABLE_ELEMENT_CLICK_TRACKING})),enable_active_view_tracking:e.some((function(_){return _===FLAG_ENABLE_ELEMENT_ACTIVE_VIEW_TRACKING})),enable_activity_tracking:e.some((function(_){return _===FLAG_ENABLE_ACTIVITY_TRACKING})),enable_cross_domain_tracking:e.some(()}}

    /******************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */

    var __assign = 

    

    

    typeof SuppressedError === "function" ? SuppressedError : 

    var rngBrowser$1 = {exports: {}};

    var getRandomValues$2="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues$2){var rnds8$2=new Uint8Array(16);rngBrowser$1.exports=function(){return getRandomValues$2(rnds8$2),rnds8$2};}else {var rnds$1=new Array(16);rngBrowser$1.exports=function(){for(var r,o=0;o<16;o++)0==(3&o)&&(r=4294967296*Math.random()),rnds$1[o]=r>>>((3&o)<<3)&255;return rnds$1};}

    for(var byteToHex$2=[],i$1=0;i$1<256;++i$1)byteToHex$2[i$1]=(i$1+256).toString(16).substr(1);function bytesToUuid$5(o,e){var t=e||0,r=byteToHex$2;return [r[o[t++]],r[o[t++]],r[o[t++]],r[o[t++]],"-",r[o[t++]],r[o[t++]],"-",r[o[t++]],r[o[t++]],"-",r[o[t++]],r[o[t++]],"-",r[o[t++]],r[o[t++]],r[o[t++]],r[o[t++]],r[o[t++]],r[o[t++]]].join("")}var bytesToUuid_1$1=bytesToUuid$5;

    var _nodeId$1,_clockseq$1,rng$4=rngBrowser$1.exports,bytesToUuid$4=bytesToUuid_1$1,_lastMSecs$1=0,_lastNSecs$1=0;function v1$3(e,s,o){var r=s&&o||0,c=s||[],d=(e=e||{}).node||_nodeId$1,n=void 0!==e.clockseq?e.clockseq:_clockseq$1;if(null==d||null==n){var a=rng$4();null==d&&(d=_nodeId$1=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==n&&(n=_clockseq$1=16383&(a[6]<<8|a[7]));}var i=void 0!==e.msecs?e.msecs:(new Date).getTime(),l=void 0!==e.nsecs?e.nsecs:_lastNSecs$1+1,t=i-_lastMSecs$1+(l-_lastNSecs$1)/1e4;if(t<0&&void 0===e.clockseq&&(n=n+1&16383),(t<0||i>_lastMSecs$1)&&void 0===e.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_lastMSecs$1=i,_lastNSecs$1=l,_clockseq$1=n;var u=(1e4*(268435455&(i+=122192928e5))+l)%4294967296;c[r++]=u>>>24&255,c[r++]=u>>>16&255,c[r++]=u>>>8&255,c[r++]=255&u;var _=i/4294967296*1e4&268435455;c[r++]=_>>>8&255,c[r++]=255&_,c[r++]=_>>>24&15|16,c[r++]=_>>>16&255,c[r++]=n>>>8|128,c[r++]=255&n;for(var m=0;m<6;++m)c[r+m]=d[m];return s||bytesToUuid$4(c)}var v1_1$1=v1$3;

    var rng$3=rngBrowser$1.exports,bytesToUuid$3=bytesToUuid_1$1;function v4$4(r,o,e){var n=o&&e||0;"string"==typeof r&&(o="binary"===r?new Array(16):null,r=null);var s=(r=r||{}).random||(r.rng||rng$3)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,o)for(var d=0;d<16;++d)o[n+d]=s[d];return o||bytesToUuid$3(s)}var v4_1$1=v4$4;

    var v1$2=v1_1$1,v4$3=v4_1$1,uuid$1=v4$3;uuid$1.v1=v1$2,uuid$1.v4=v4$3;var uuid_1$1=uuid$1;

    /*!
     * Core functionality for Snowplow JavaScript trackers v3.21.0 (http://bit.ly/sp-js)
     * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
     * Licensed under BSD-3-Clause
     */
    var version$1="3.21.0";function base64urldecode(e){if(!e)return e;switch(4-e.length%4){case 2:e+="==";break;case 3:e+="=";}return base64decode(e.replace(/-/g,"+").replace(/_/g,"/"))}function base64urlencode(e){return e?base64encode(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"):e}var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function base64encode(e){var n,t,r,o,i,a=0,s=0,c=[];if(!e)return e;e=unescape(encodeURIComponent(e));do{n=(i=e.charCodeAt(a++)<<16|e.charCodeAt(a++)<<8|e.charCodeAt(a++))>>18&63,t=i>>12&63,r=i>>6&63,o=63&i,c[s++]=b64.charAt(n)+b64.charAt(t)+b64.charAt(r)+b64.charAt(o);}while(a<e.length);var l=c.join(""),u=e.length%3;return (u?l.slice(0,u-3):l)+"===".slice(u||3)}function base64decode(e){var n,t,r,o,i,a,s,c=0,l=0,u="",d=[];if(!e)return e;e+="";do{n=(a=b64.indexOf(e.charAt(c++))<<18|b64.indexOf(e.charAt(c++))<<12|(o=b64.indexOf(e.charAt(c++)))<<6|(i=b64.indexOf(e.charAt(c++))))>>16&255,t=a>>8&255,r=255&a,d[l++]=64===o?String.fromCharCode(n):64===i?String.fromCharCode(n,t):String.fromCharCode(n,t,r);}while(c<e.length);return u=d.join(""),s=u.replace(/\0+$/,""),decodeURIComponent(s.split("").map(().join(""))}LOG_LEVEL,label="Snowplow: ";!LOG_LEVEL||(LOG_LEVEL={}));var LOG=logger();function logger(e){return void 0===e&&(e=LOG_LEVEL.warn),{setLogLevel:warn:error:debug:function(n){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];e>=LOG_LEVEL.debug&&"undefined"!=typeof console&&console.debug.apply(console,__spreadArray([label+n],t,!1));},info:}function globalContexts(){var e=[],n=[];return {getGlobalPrimitives:function(){return e},getConditionalProviders:function(){return n},addGlobalContexts:clearGlobalContexts:removeGlobalContexts:getApplicableContexts:function(t){return t)}}}function pluginContexts(e){return {addPluginContexts:}unction validateVendorParts(e){if("*"===e[0]||"*"===e[1])return !1;if(e.slice(2).length>0){for(var n=!1,t=0,r=e.slice(2);t<r.length;t++){if("*"===r[t])n=!0;else if(n)return !1}return !0}return 2==e.length}function validateVendor(e){var n=e.split(".");return !!(n&&n.length>1)&&validateVendorParts(n)}ion isRuleSet(e){var n=e,t=0;if(null!=e&&"object"==typeof e&&!Array.isArray(e)){if(Object.prototype.hasOwnProperty.call(n,"accept")){if(!isValidRuleSetArg(n.accept))return !1;t+=1;}if(Object.prototype.hasOwnProperty.call(n,"reject")){if(!isValidRuleSetArg(n.reject))return !1;t+=1;}return t>0&&t<=2}return !1}unction isContextPrimitive(e){return isContextCallbackFunction(e)||isSelfDescribingJson(e)}unction isRuleSetProvider(e){return !(!Array.isArray(e)||2!==e.length)&&(!!isRuleSet(e[0])&&(Array.isArray(e[1])?e[1].every(isContextPrimitive):isContextPrimitive(e[1])))}unction matchSchemaAgainstRuleSet(e,n){var t=0,r=0,o=e.accept;Array.isArray(o)?e.accept.some((function(e){return matchSchemaAgainstRule(e,n)}))&&r++:"string"==typeof o&&matchSchemaAgainstRule(o,n)&&r++;var i=e.reject;return Array.isArray(i)?e.reject.some((function(e){return matchSchemaAgainstRule(e,n)}))&&t++:"string"==typeof i&&matchSchemaAgainstRule(i,n)&&t++,r>0&&0===t}ction getUsefulSchema(e){for(var n=0,t=e.getJson();n<t.length;n++){var r=t[n];if("ue_px"===r.keyIfEncoded&&"object"==typeof r.json.data){var o=r.json.data.schema;if("string"==typeof o)return o}}return ""}function getEventType(e){var n=e.getPayload().e;return "string"==typeof n?n:""}function buildGenerator(e,n,t,r){var o=void 0;try{return o=e({event:n.getPayload(),eventType:t,eventSchema:r}),Array.isArray(o)&&o.every(isSelfDescribingJson)||isSelfDescribingJson(o)?o:void 0}catch(e){o=void 0;}return o}unction generatePrimitives(e,n,t,r){var o,i=normalizeToArray(e).map((function(e){var o=evaluatePrimitive(e,n,t,r);if(o&&0!==o.length)return o}));return (o=[]).concat.apply(o,i.filter((function(e){return null!=e&&e.filter(Boolean)})))}unction evaluateProvider(e,n,t,r){if(isFilterProvider(e)){var o=e[0],i=!1;try{i=o({event:n.getPayload(),eventType:t,eventSchema:r});}catch(e){i=!1;}if(!0===i)return generatePrimitives(e[1],n,t,r)}else if(isRuleSetProvider(e)&&matchSchemaAgainstRuleSet(e[0],r))return generatePrimitives(e[1],n,t,r);return []}function generateConditionals(e,n,t,r){var o,i=normalizeToArray(e).map(();return (o=[]).concat.apply(o,i.filter(())}function getTimestamp(e){return null==e?{type:"dtm",value:(new Date).getTime()}:"number"==typeof e?{type:"dtm",value:e}:"ttm"===e.type?{type:"ttm",value:e.value}:{type:"dtm",value:e.value||(new Date).getTime()}}function trackerCore(e){void 0===e&&(e={});var n=e.base64,t=e.corePlugins,r=e.callback,o=null!=t?t:[],i=function(e,n,t){var r=pluginContexts(n),o=globalContexts(),i=e,a={};ar c={track:function(e,s,c){e.withJsonProcessor(payloadJsonProcessor(i)),e.add("eid",uuid_1$1.v4()),e.addDict(a);var l=getTimestamp(c);e.add(l.type,l.value.toString());var u=e,r.addPluginContexts(s)));void 0!==u&&e.addJson("cx","co",u),n.forEach((function(n){try{n.beforeTrack&&n.beforeTrack(e);}catch(e){LOG.error("Plugin beforeTrack",e);}})),"function"==typeof t&&t(e);var d=e.build();return n.forEach((),d},addPayloadPair:s,getBase64Encoding:function(){return i},setBase64Encoding:function(e){i=e;},addPayloadDict:resetPayloadPairs:setTrackerVersion:function(e){s("tv",e);},setTrackerNamespace:function(e){s("tna",e);},setAppId:function(e){s("aid",e);},setPlatform:function(e){s("p",e);},setUserId:function(e){s("uid",e);},setScreenResolution:function(e,n){s("res",e+"x"+n);},setViewport:setColorDepth:function(e){s("cd",e);},setTimezone:function(e){s("tz",e);},setLang:function(e){s("lang",e);},setIpAddress:function(e){s("ip",e);},setUseragent:addGlobalContexts:function(e){o.addGlobalContexts(e);},clearGlobalContexts:removeGlobalContexts:function(e){o.removeGlobalContexts(e);}};return c}(null==n||n,o,r),a=__assign(__assign({},i),{addPlugin:);return null==o||o.forEach((),a} version=version$1;

    var global$1 = "undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};

    var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,inited=!1;unction toByteArray(o){var r,e,t,u,n,p;inited||init$1();var i=o.length;if(i%4>0)throw new Error("Invalid string. Length must be a multiple of 4");n="="===o[i-2]?2:"="===o[i-1]?1:0,p=new Arr(3*i/4-n),t=n>0?i-4:i;var a=0;for(r=0,e=0;r<t;r+=4,e+=3)u=revLookup[o.charCodeAt(r)]<<18|revLookup[o.charCodeAt(r+1)]<<12|revLookup[o.charCodeAt(r+2)]<<6|revLookup[o.charCodeAt(r+3)],p[a++]=u>>16&255,p[a++]=u>>8&255,p[a++]=255&u;return 2===n?(u=revLookup[o.charCodeAt(r)]<<2|revLookup[o.charCodeAt(r+1)]>>4,p[a++]=255&u):1===n&&(u=revLookup[o.charCodeAt(r)]<<10|revLookup[o.charCodeAt(r+1)]<<4|revLookup[o.charCodeAt(r+2)]>>2,p[a++]=u>>8&255,p[a++]=255&u),p}       var toString={}.toString;var isArray = Array.isArray||

    var INSPECT_MAX_BYTES=50;Buffer.TYPED_ARRAY_SUPPORT=void 0===global$1.TYPED_ARRAY_SUPPORT||global$1.TYPED_ARRAY_SUPPORT;kMaxLength();romObject(t,e){if(internalIsBuffer(e)){var r=0|checked(e.length);return 0===(t=createBuffer(t,r)).length||e.copy(t,0,0,r),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return "number"!=typeof e.length||isnan(e.length)?createBuffer(t,0):fromArrayLike(t,e);if("Buffer"===e.type&&isArray(e.data))return fromArrayLike(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}uffer.poolSize=8192,Buffer._augment=Buffer.from=function(t,e,r){return from(null,t,e,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]),Buffer.alloc=Buffer.allocUnsafe=function(t){return allocUnsafe(null,t)},Buffer.allocUnsafeSlow=n utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}r.isBuffer=isBuffer,Buffer.compare=Buffer.isEncoding=Buffer.concat=Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=Buffer.prototype.swap32=Buffer.prototype.swap64=Buffer.prototype.toString=Buffer.prototype.equals=Buffer.prototype.inspect=Buffer.prototype.compare=Buffer.prototype.includes=Buffer.prototype.indexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!0)},Buffer.prototype.lastIndexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!1)},Buffer.prototype.write=Buffer.prototype.toJSON=var MAX_ARGUMENTS_LENGTH=4096;riteFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4),write(t,e,r,n,23,4),r+4}uffer.prototype.slice=Buffer.prototype.readUIntLE=Buffer.prototype.readUIntBE=Buffer.prototype.readUInt8=Buffer.prototype.readUInt16LE=Buffer.prototype.readUInt16BE=Buffer.prototype.readUInt32LE=Buffer.prototype.readUInt32BE=Buffer.prototype.readIntLE=Buffer.prototype.readIntBE=Buffer.prototype.readInt8=Buffer.prototype.readInt16LE=Buffer.prototype.readInt16BE=Buffer.prototype.readInt32LE=Buffer.prototype.readInt32BE=Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=Buffer.prototype.writeUIntLE=Buffer.prototype.writeUIntBE=Buffer.prototype.writeUInt8=Buffer.prototype.writeUInt16LE=Buffer.prototype.writeUInt16BE=Buffer.prototype.writeUInt32LE=Buffer.prototype.writeUInt32BE=Buffer.prototype.writeIntLE=Buffer.prototype.writeIntBE=Buffer.prototype.writeInt8=Buffer.prototype.writeInt16LE=Buffer.prototype.writeInt16BE=Buffer.prototype.writeInt32LE=Buffer.prototype.writeInt32BE=Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=Buffer.prototype.copy=Buffer.prototype.fill=var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;a1$1 = {exports: {}};

    var crypt = {exports: {}};

    !);

    var charenc={utf8:{stringToBytes:bytesToString:,bin:{stringToBytes:bytesToString:},charenc_1=charenc;

    !function(){var r=crypt.exports,e=charenc_1.utf8,s=charenc_1.bin,o=function(o,i){var a=r.wordsToBytes(function(s){s.constructor==String?s=e.stringToBytes(s):void 0!==Buffer&&"function"==typeof isBuffer&&isBuffer(s)?s=Array.prototype.slice.call(s,0):Array.isArray(s)||(s=s.toString());var o=r.bytesToWords(s),i=8*s.length,a=[],t=1732584193,n=-271733879,d=-1732584194,f=271733878,u=-1009589776;o[i>>5]|=128<<24-i%32,o[15+(i+64>>>9<<4)]=i;for(var c=0;c<o.length;c+=16){for(var m=t,p=n,k=d,l=f,_=u,h=0;h<80;h++){if(h<16)a[h]=o[c+h];else {var g=a[h-3]^a[h-8]^a[h-14]^a[h-16];a[h]=g<<1|g>>>31;}var b=(t<<5|t>>>27)+u+(a[h]>>>0)+(h<20?1518500249+(n&d|~n&f):h<40?1859775393+(n^d^f):h<60?(n&d|n&f|d&f)-1894007588:(n^d^f)-899497514);u=f,f=d,d=n<<30|n>>>2,n=t,t=b;}t+=m,n+=p,d+=k,f+=l,u+=_;}return [t,n,d,f,u]}(o));return i&&i.asBytes?a:i&&i.asString?s.bytesToString(a):r.bytesToHex(a)};o._blocksize=16,o._digestsize=20,sha1$1.exports=o;}();

    var rngBrowser = {exports: {}};

    var getRandomValues$1="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(getRandomValues$1){var rnds8$1=new Uint8Array(16);rngBrowser.exports=}else {var rnds=new Array(16);rngBrowser.exports=}

    for(var byteToHex$1=[],i=0;i<256;++i)byteToHex$1[i]=(i+256).toString(16).substr(1);ar bytesToUuid_1=bytesToUuid$2;

    var _nodeId,_clockseq,rng$2=rngBrowser.exports,bytesToUuid$1=bytesToUuid_1,_lastMSecs=0,_lastNSecs=0;ar v1_1=v1$1;

    var rng$1=rngBrowser.exports,bytesToUuid=bytesToUuid_1;ar v4_1=v4$2;

    var v1=v1_1,v4$1=v4_1,uuid=v4$1;uuid.v1=v1,uuid.v4=v4$1;var uuid_1=uuid;

    /*!
     * Core functionality for Snowplow Browser trackers v3.21.0 (http://bit.ly/sp-js)
     * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
     * Licensed under BSD-3-Clause
     */
    function attemptGetLocalStorage(e){try{var n=window.localStorage,t=n.getItem(e+".expires");return null===t||+t>Date.now()?n.getItem(e):(n.removeItem(e),void n.removeItem(e+".expires"))}catch(e){return}}ction attemptWriteSessionStorage(e,n){try{return window.sessionStorage.setItem(e,n),!0}catch(e){return !1}}var DEFAULT_CROSS_DOMAIN_LINKER_PARAMS={sessionId:!0,sourceId:!0,sourcePlatform:!1,userId:!1,reason:!1};function createCrossDomainParameterValue(e,n,t){var o,r=(new Date).getTime(),i=__assign(__assign({},DEFAULT_CROSS_DOMAIN_LINKER_PARAMS),n),a=t.domainUserId,s=t.userId,u=t.sessionId,c=t.sourceId,d=t.sourcePlatform,l=t.event,f=l.currentTarget,v="function"==typeof i.reason?i.reason(l):null===(o=null==f?void 0:f.textContent)||void 0===o?void 0:o.trim();return e?[a,r,i.sessionId&&u,i.userId&&urlSafeBase64Encode(s||""),i.sourceId&&urlSafeBase64Encode(c||""),i.sourcePlatform&&d,i.reason&&urlSafeBase64Encode(v||"")].map(().join(".").replace(/([.]*$)/,""):t.domainUserId+"."+r}n addEventListener$1(e,n,t,o){return e.addEventListener?(e.addEventListener(n,t,o),!0):e.attachEvent?e.attachEvent("on"+n,t):void(e["on"+n]=t)}function fromQuerystring$1(e,n){var t=new RegExp("^[^#]*[?&]"+e+"=([^&#]*)").exec(n);return t?decodeURIComponent(t[1].replace(/\+/g," ")):null}function decorateQuerystring$1(e,n,t){var o=n+"="+t,r=e.split("#"),i=r[0].split("?"),a=i.shift(),s=i.join("?");if(s){for(var u=!0,c=s.split("&"),d=0;d<c.length;d++)if(c[d].substr(0,n.length+1)===n+"="){u=!1,c[d]=o,s=c.join("&");break}u&&(s=o+"&"+s);}else s=o;return r[0]=a+"?"+s,r.join("#")}function findRootDomain(e,n){for(var t=window.location.hostname,o="_sp_root_domain_test_",r=o+(new Date).getTime(),i="_test_value_"+(new Date).getTime(),a=t.split("."),s=a.length-2;s>=0;s--){var u=a.slice(s).join(".");if(cookie(r,i,0,"/",u,e,n),cookie(r)===i){deleteCookie(r,u,e,n);for(var c=getCookiesWithPrefix(o),d=0;d<c.length;d++)deleteCookie(c[d],u,e,n);return u}}return t}tion localStorageAccessible(){var e="modernizr";if(!hasLocalStorage())return !1;try{var n=window.localStorage;return n.setItem(e,e),n.removeItem(e),!0}catch(e){return !1}}var WEB_PAGE_SCHEMA="iglu:com.snowplowanalytics.snowplow/web_page/jsonschema/1-0-0",BROWSER_CONTEXT_SCHEMA="iglu:com.snowplowanalytics.snowplow/browser_context/jsonschema/2-0-0",CLIENT_SESSION_SCHEMA="iglu:com.snowplowanalytics.snowplow/client_session/jsonschema/1-0-2",PAYLOAD_DATA_SCHEMA="iglu:com.snowplowanalytics.snowplow/payload_data/jsonschema/1-0-4";function OutQueueManager(e,n,t,o,r,i,a,s,u,c,d,l,f,v,m,g,I,p,w,h){void 0===p&&(p=!0);var S,k,y=!1,x=[],T=!1,C=!0===(o="string"==typeof o?o.toLowerCase():o)||"beacon"===o||"true"===o,E=Boolean(C&&window.navigator&&"function"==typeof window.navigator.sendBeacon&&!(13,k=window.navigator.userAgent)||10,15,k)&&k)))&&C,b="get"===o,O=Boolean(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),L=!b&&O&&("post"===o||C),D=L?r:"/i",P="snowplowOutQueue_".concat(e,"_").concat(L?"post2":"get");if(C&&(f={}),i=t&&localStorageAccessible()&&L&&i||1,t)try{var A=window.localStorage.getItem(P);x=A?JSON.parse(A):[];}catch(e){}ray.isArray(x)||(x=[]),n.outQueues.push(x),O&&i>1&&n.bufferFlushers.push(();var R=function(e){return "object"==typeof e[0]&&"evt"in e[0]};function M(e,n){var t=H(n,!0,!1),o=W([e.evt]);t.onreadystatechange=function(){4===t.readyState&&(V(t.status)?null==w||w(o):null==h||h({status:t.status,message:t.statusText,events:o,willRetry:!1}));},t.send(j(o));}function F(e){for(var n=0;n<e;n++)x.shift();t&&attemptWriteLocalStorage(P,JSON.stringify(x.slice(0,c)));}function U(e,n,t){e.onreadystatechange=function(){if(4===e.readyState)if(clearTimeout(o),V(e.status))F(n),null==w||w(t),B();else {var r=function(e){if(V(e))return !1;if(!p)return !1;if(m.includes(e))return !0;return !g.includes(e)}(e.status);r||(LOG.error("Status ".concat(e.status,", will not retry.")),F(n)),null==h||h({status:e.status,message:e.statusText,events:t,willRetry:r}),y=!1;}};var o=setTimeout((function(){e.abort(),p||F(n),null==h||h({status:0,message:"timeout",events:t,willRetry:p}),y=!1;}),d);}function B(e){for(void 0===e&&(e=!1);x.length&&"string"!=typeof x[0]&&"object"!=typeof x[0];)x.shift();if(x.length){if(!isString(S))throw "No collector configured";if(y=!0,I&&!T){var n=H(I,!1,e);return T=!0,n.timeout=d,n.onreadystatechange=void n.send()}if(O){var o=void 0,r=void 0,i=void 0;if(R(x)?(r=H(o=S,!0,e),i=x)):(r=H(o=z(x[0]),!1,e),i=1),R(x)){var s=x.slice(0,i);if(s.length>0){var u=!1,f=s.map(();if(E){var v=new Blob([j(W(f))],{type:"application/json"});try{u=window.navigator.sendBeacon(o,v);}catch(e){u=!1;}}if(!0===u)F(i),null==w||w(s),B();else {var m=W(f);U(r,i,m),r.send(j(m));}}}else U(r,i,[o]),r.send();}else if(l||R(x))y=!1;else {var g=new Image(1,1),p=!0;g.onload=g.onerror=g.src=z(x[0]),setTimeout((,d);}}else y=!1;}n {enqueueRequest:executeQueue:setUseLocalStorage:function(e){t=e;},setAnonymousTracking:function(e){l=e;},setCollectorUrl:setBufferSize:function(e){i=e;}}}function getParameter(e,n){var t=new RegExp("^(?:https?|ftp)(?::/*(?:[^?]+))([?][^#]+)").exec(e);return t&&(null==t?void 0:t.length)>1?fromQuerystring$1(n,t[1]):null}function fixupUrl(e,n,t){var o;return "translate.googleusercontent.com"===e?(""===t&&(t=n),e=getHostName(n=null!==(o=getParameter(n,"u"))&&void 0!==o?o:"")):"cc.bingj.com"!==e&&"webcache.googleusercontent.com"!==e||(e=getHostName(n=document.links[0].href)),[e,n,t]}var cookieDisabledIndex=0,domainUserIdIndex=1,createTsIndex=2,visitCountIndex=3,nowTsIndex=4,lastVisitTsIndex=5,sessionIdIndex=6,previousSessionIdIndex=7,firstEventIdIndex=8,firstEventTsInMsIndex=9,eventIndexIndex=10;function emptyIdCookie(){return ["1","",0,0,0,void 0,"","","",void 0,0]}function parseIdCookie(e,n,t,o){var r,i=new Date,a=Math.round(i.getTime()/1e3);e?(r=e.split(".")).unshift("0"):r=["1",n,a,o,a,"",t],r[sessionIdIndex]&&"undefined"!==r[sessionIdIndex]||(r[sessionIdIndex]=uuid_1.v4()),r[previousSessionIdIndex]&&"undefined"!==r[previousSessionIdIndex]||(r[previousSessionIdIndex]=""),r[firstEventIdIndex]&&"undefined"!==r[firstEventIdIndex]||(r[firstEventIdIndex]=""),r[firstEventTsInMsIndex]&&"undefined"!==r[firstEventTsInMsIndex]||(r[firstEventTsInMsIndex]=""),r[eventIndexIndex]&&"undefined"!==r[eventIndexIndex]||(r[eventIndexIndex]=0);var s=u=return [r[cookieDisabledIndex],r[domainUserIdIndex],s(r[createTsIndex],a),s(r[visitCountIndex],o),s(r[nowTsIndex],a),u(r[lastVisitTsIndex]),r[sessionIdIndex],r[previousSessionIdIndex],r[firstEventIdIndex],u(r[firstEventTsInMsIndex]),s(r[eventIndexIndex],0)]}function initializeDomainUserId(e,n){var t;return e[domainUserIdIndex]?t=e[domainUserIdIndex]:n?(t="",e[domainUserIdIndex]=t):(t=uuid_1.v4(),e[domainUserIdIndex]=t),t}function startNewIdCookieSession(e,n){void 0===n&&(n={memorizedVisitCount:1});var t=n.memorizedVisitCount;cookiesEnabledInIdCookie(e)?(e[previousSessionIdIndex]=e[sessionIdIndex],e[lastVisitTsIndex]=e[nowTsIndex],e[visitCountIndex]++):e[visitCountIndex]=t;var o=uuid_1.v4();return e[sessionIdIndex]=o,e[eventIndexIndex]=0,e[firstEventIdIndex]="",e[firstEventTsInMsIndex]=void 0,o}unction updateFirstEventInIdCookie(e,n){if(0===e[eventIndexIndex]){var t=n.build();e[firstEventIdIndex]=t.eid;var o=t.dtm||t.ttm;e[firstEventTsInMsIndex]=o?parseInt(o):void 0;}}unction serializeIdCookie(e,n){var t=__spreadArray([],e,!0);return n&&(t[domainUserIdIndex]="",t[previousSessionIdIndex]=""),t.shift(),t.join(".")}function clientSessionFromIdCookie(e,n,t){var o=e[firstEventTsInMsIndex];return {userId:t?"00000000-0000-0000-0000-000000000000":e[domainUserIdIndex],sessionId:e[sessionIdIndex],eventIndex:e[eventIndexIndex],sessionIndex:e[visitCountIndex],previousSessionId:t?null:e[previousSessionIdIndex]||null,storageMechanism:"localStorage"==n?"LOCAL_STORAGE":"COOKIE_1",firstEventId:e[firstEventIdIndex]||null,firstEventTimestamp:o?new Date(o).toISOString():null}}function sessionIdFromIdCookie(e){return e[sessionIdIndex]}function domainUserIdFromIdCookie(e){return e[domainUserIdIndex]}function visitCountFromIdCookie(e){return e[visitCountIndex]}r DIMENSION_SEPARATOR="x";function getBrowserProperties(){return {viewport:floorDimensionFields(detectViewport()),documentSize:floorDimensionFields(detectDocumentSize()),resolution:floorDimensionFields(detectScreenResolution()),colorDepth:screen.colorDepth,devicePixelRatio:window.devicePixelRatio,cookiesEnabled:window.navigator.cookieEnabled,online:window.navigator.onLine,browserLanguage:window.navigator.language||window.navigator.userLanguage,documentLanguage:document.documentElement.lang,webdriver:window.navigator.webdriver,deviceMemory:window.navigator.deviceMemory,hardwareConcurrency:window.navigator.hardwareConcurrency}}function detectViewport(){var e,n;if("innerWidth"in window)e=window.innerWidth,n=window.innerHeight;else {var t=document.documentElement||document.body;e=t.clientWidth,n=t.clientHeight;}return e>=0&&n>=0?e+DIMENSION_SEPARATOR+n:null}function detectDocumentSize(){var e=document.documentElement,n=document.body,t=n?Math.max(n.offsetHeight,n.scrollHeight):0,o=Math.max(e.clientWidth,e.offsetWidth,e.scrollWidth),r=Math.max(e.clientHeight,e.offsetHeight,e.scrollHeight,t);return isNaN(o)||isNaN(r)?"":o+DIMENSION_SEPARATOR+r}function detectScreenResolution(){return screen.width+DIMENSION_SEPARATOR+screen.height}function floorDimensionFields(e){return e&&e.split(DIMENSION_SEPARATOR).map(().join(DIMENSION_SEPARATOR)}function Tracker$1(e,n,t,o,r,i){void 0===i&&(i={});var a=[],s=function(e,n,t,o,r,i){var s,u,c,d,l,f,v,m,g,I,p,w,h,S,k,y,x,T,C,E,b,O,L,D,P,A,_,N;i.eventMethod=null!==(s=i.eventMethod)&&void 0!==s?s:"post";var R,M,F=U=function(e){var n,t;return "boolean"!=typeof e.anonymousTracking&&(null!==(t=!0===(null===(n=e.anonymousTracking)||void 0===n?void 0:n.withSessionTracking))&&void 0!==t&&t)},B=V=H=null!==(c=null===(u=null==i?void 0:i.contexts)||void 0===u?void 0:u.browser)&&void 0!==c&&c,j=null===(l=null===(d=null==i?void 0:i.contexts)||void 0===d?void 0:d.webPage)||void 0===l||l;a.push((R=M={beforeTrack:function(e){var n=Ze("ses"),t=vn(),o=0===eventIndexFromIdCookie(t);if(re=!!X&&!!cookie(X),Te||re)dn();else {cookiesEnabledInIdCookie(t)?(te=n||"none"==De?sessionIdFromIdCookie(t):startNewIdCookieSession(t),Ae=visitCountFromIdCookie(t)):(new Date).getTime()-Pe>1e3*Ee&&(Ae++,te=startNewIdCookieSession(t,{memorizedVisitCount:Ae})),updateNowTsInIdCookie(t),updateFirstEventInIdCookie(t,e),incrementEventIndexInIdCookie(t);var r=getBrowserProperties(),i=r.viewport,a=r.documentSize;e.add("vp",i),e.add("ds",a),e.add("vid",M(Ae)),e.add("sid",M(te)),e.add("duid",R(domainUserIdFromIdCookie(t))),e.add("uid",R(oe)),Xe(),e.add("refr",Je(W||le)),e.add("url",Je(z||de));var s=clientSessionFromIdCookie(t,De,Le);if(!Fe||Le&&!be||e,s),"none"!=De){un(t);var u=sn();n&&!o||!u||!Ue||Be||(Ue(s),Be=!1);}Pe=(new Date).getTime();}}})),j&&a.push({contexts:),H&&a.push({contexts:),a.push.apply(a,null!==(f=i.plugins)&&void 0!==f?f:[]);var W,z,G,Q,q,X,Y,J,K,$,Z,ee,ne,te,oe,re,ie,ae=trackerCore({base64:i.encodeBase64,corePlugins:a,callback:),se=document.characterSet||document.charset,ue=fixupUrl(window.location.hostname,window.location.href,getReferrer()),ce=fixupDomain(ue[0]),de=ue[1],le=ue[2],fe=null!==(v=i.platform)&&void 0!==v?v:"web",ve=mn(o),me=null!==(m=i.postPath)&&void 0!==m?m:"/com.snowplowanalytics.snowplow/tp2",ge=null!==(g=i.appId)&&void 0!==g?g:"",Ie=document.title,pe=null===(I=i.resetActivityTrackingOnPageView)||void 0===I||I,we=null!==(p=i.cookieName)&&void 0!==p?p:"_sp_",he=null!==(w=i.cookieDomain)&&void 0!==w?w:void 0,Se="/",ke=null!==(h=i.cookieSameSite)&&void 0!==h?h:"None",ye=null===(S=i.cookieSecure)||void 0===S||S,xe=window.navigator.doNotTrack||window.navigator.msDoNotTrack||window.doNotTrack,Te=void 0!==i.respectDoNotTrack&&(i.respectDoNotTrack&&("yes"===xe||"1"===xe)),Ce=null!==(k=i.cookieLifetime)&&void 0!==k?k:63072e3,Ee=null!==(y=i.sessionCookieTimeout)&&void 0!==y?y:1800,be=U(i),Oe=B(i),Le=V(i),De=F(i),Pe=(new Date).getTime(),Ae=1,_e=OutQueueManager(e,r,"localStorage"==De||"cookieAndLocalStorage"==De,i.eventMethod,me,null!==(x=i.bufferSize)&&void 0!==x?x:1,null!==(T=i.maxPostBytes)&&void 0!==T?T:4e4,null!==(C=i.maxGetBytes)&&void 0!==C?C:0,null===(E=i.useStm)||void 0===E||E,null!==(b=i.maxLocalStorageQueueSize)&&void 0!==b?b:1e3,null!==(O=i.connectionTimeout)&&void 0!==O?O:5e3,Oe,null!==(L=i.customHeaders)&&void 0!==L?L:{},null===(D=i.withCredentials)||void 0===D||D,null!==(P=i.retryStatusCodes)&&void 0!==P?P:[],(null!==(A=i.dontRetryStatusCodes)&&void 0!==A?A:[]).concat([400,401,403,410,422]),i.idService,i.retryFailedRequests,i.onRequestSuccess,i.onRequestFailure),Ne=!1,Re=!1,Me={enabled:!1,installed:!1,configurations:{}},Fe=null!==(N=null===(_=i.contexts)||void 0===_?void 0:_.session)&&void 0!==N&&N,Ue=i.onSessionUpdateCallback,Be=!1,Ve="boolean"==typeof(ie=i.useExtendedCrossDomainLinker||!1)?{useExtendedCrossDomainLinker:ie}:{useExtendedCrossDomainLinker:!0,collectCrossDomainAttributes:ie},He=Ve.useExtendedCrossDomainLinker,je=Ve.collectCrossDomainAttributes;i.hasOwnProperty("discoverRootDomain")&&i.discoverRootDomain&&(he=findRootDomain(ke,ye));var We=getBrowserProperties(),ze=We.browserLanguage,Ge=We.resolution,Qe=We.colorDepth,qe=We.cookiesEnabled;unction Ye(e){for(var n,t=(n=He,function(e){var t=e.currentTarget,o=createCrossDomainParameterValue(n,je,{domainUserId:ne,userId:oe||void 0,sessionId:te,sourceId:ge,sourcePlatform:fe,event:e});(null==t?void 0:t.href)&&(t.href=decorateQuerystring$1(t.href,"_sp",o));}),o=0;o<document.links.length;o++){var r=document.links[o];!r.spDecorationEnabled&&e(r)&&(r.addEventListener("click",t,!0),r.addEventListener("mousedown",t,!0),r.spDecorationEnabled=!0);}}ction Ze(e){var n=$e(e);return "localStorage"==De?attemptGetLocalStorage(n):"cookie"==De||"cookieAndLocalStorage"==De?cookie(n):void 0}function en(){Xe(),ee=sha1$1.exports((he||ce)+(Se||"/")).slice(0,4);}ion sn(){return cn($e("ses"),"*",Ee)}function un(e){return cn($e("id"),serializeIdCookie(e,Le),Ce)}function cn(e,n,t){return !(Le&&!be)&&("localStorage"==De?attemptWriteLocalStorage(e,n,t):("cookie"==De||"cookieAndLocalStorage"==De)&&(cookie(e,n,t,Se,he,ke,ye),-1!==document.cookie.indexOf("".concat(e,"="))))}function dn(e){var n=$e("id"),t=$e("ses");attemptDeleteLocalStorage(n),attemptDeleteLocalStorage(t),deleteCookie(n,he,ke,ye),deleteCookie(t,he,ke,ye),(null==e?void 0:e.preserveSession)||(te=uuid_1.v4(),Ae=1),(null==e?void 0:e.preserveUser)||(ne=Le?"":uuid_1.v4(),oe=null);}unction fn(){if(!Le||be){var e="none"!=De&&!!Ze("ses"),n=vn();ne=initializeDomainUserId(n,Le),te=e?sessionIdFromIdCookie(n):startNewIdCookieSession(n),Ae=visitCountFromIdCookie(n),"none"!=De&&(sn(),updateNowTsInIdCookie(n),un(n));}}function vn(){return "none"==De?emptyIdCookie():parseIdCookie(Ze("id")||void 0,ne,te,Ae)}ction pn(){if("none"===De||Le||!j)return null;var e="_sp_tab_id",n=attemptGetSessionStorage(e);return n||(attemptWriteSessionStorage(e,uuid_1.v4()),n=attemptGetSessionStorage(e)),n||null}unction hn(e,n,t){var o=r=0===e.configMinimumVisitLength?e.activityInterval=window.setInterval(r,e.configHeartBeatTimer):e.activityInterval=window.setTimeout((,e.configMinimumVisitLength);}unction kn(e){var n=e.context,t=e.minXOffset,o=e.minYOffset,r=e.maxXOffset,i=e.maxYOffset,a=document.title;a!==Ie&&(Ie=a,G=void 0),ae.track(buildPagePing({pageUrl:Je(z||de),pageTitle:fixupTitle(G||Ie),referrer:Je(W||le),minXOffset:an(t),maxXOffset:an(r),minYOffset:an(o),maxYOffset:an(i)}),n);}function yn(e){var n=Me.configurations[e];0===(null==n?void 0:n.configMinimumVisitLength)?window.clearTimeout(null==n?void 0:n.activityInterval):window.clearInterval(null==n?void 0:n.activityInterval),Me.configurations[e]=void 0;}ae.setTrackerVersion(t),ae.setTrackerNamespace(n),ae.setAppId(ge),ae.setPlatform(fe),ae.addPayloadPair("cookie",qe?"1":"0"),ae.addPayloadPair("cs",se),ae.addPayloadPair("lang",ze),ae.addPayloadPair("res",Ge),ae.addPayloadPair("cd",Qe),en(),fn(),i.crossDomainLinker&&Ye(i.crossDomainLinker);var xn={getDomainSessionIndex:function(){return Ae},getPageViewId:In,getTabId:pn,newSession:function(){var e=vn();if(cookiesEnabledInIdCookie(e)?(te="none"!=De?startNewIdCookieSession(e):sessionIdFromIdCookie(e),Ae=visitCountFromIdCookie(e)):(Ae++,te=startNewIdCookieSession(e,{memorizedVisitCount:Ae})),updateNowTsInIdCookie(e),"none"!=De){var n=clientSessionFromIdCookie(e,De,Le);un(e),sn()&&Ue&&(Be=!0,Ue(n));}Pe=(new Date).getTime();},getCookieName:getUserId:getDomainUserId:getDomainUserInfo:setReferrerUrl:function(e){W=e;},setCustomUrl:setDocumentTitle:discardHashTag:function(e){Q=e;},discardBrace:function(e){q=e;},setCookiePath:setVisitorCookieTimeout:function(e){Ce=e;},crossDomainLinker:enableActivityTracking:enableActivityTrackingCallback:disableActivityTracking:function(){yn("pagePing");},disableActivityTrackingCallback:updatePageActivity:setOptOutCookie:function(e){X=e;},setUserId:setUserIdFromLocation:function(e){Xe(),oe=fromQuerystring$1(e,de);},setUserIdFromReferrer:setUserIdFromCookie:setCollectorUrl:setBufferSize:function(e){_e.setBufferSize(e);},flushBuffer:trackPageView:function(e){void 0===e&&(e={}),function(e){var n=e.title,t=e.context,o=e.timestamp,r=e.contextCallback;Xe(),Re&&gn(),Re=!0,Ie=document.title;var i=fixupTitle((G=n)||Ie);ae.track(buildPageView({pageUrl:Je(z||de),pageTitle:i,referrer:Je(W||le)}),wn(t,r),o);var a=new Date,s=!1;if(Me.enabled&&!Me.installed){Me.installed=!0,s=!0;var u={update:;u.update();var c="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";Object.prototype.hasOwnProperty.call(u,"hasSupport")?addEventListener$1(document,c,nn,{passive:!0}):addEventListener$1(document,c,nn),rn();var d=["click","mouseup","mousedown","mousemove","keypress","keydown","keyup","touchend","touchstart"].forEach(d(document)),["resize","focus","blur"].forEach(d(window)),d(window,tn)("scroll");}if(Me.enabled&&(pe||s)){Y=a.getTime();var l=void 0;for(l in Me.configurations){var f=Me.configurations[l];f&&(window.clearInterval(f.activityInterval),hn(f,t,r));}}}(e);},preservePageViewId:disableAnonymousTracking:enableAnonymousTracking:clearUserData:dn};return __assign(__assign({},xn),{id:e,namespace:n,core:ae,sharedState:r})}(e,n,t,o,r,i),u=__assign(__assign({},s),{addPlugin:);return a.forEach((),u}var namedTrackers={};function dispatchToTrackers(e,n){try{getTrackers(null!=e?e:allTrackerNames()).forEach(n);}catch(e){LOG.error("Function failed",e);}}SharedState=
    /*!
     * Browser tracker for Snowplow v3.21.0 (http://bit.ly/sp-js)
     * Copyright 2022 Snowplow Analytics Ltd, 2010 Anthon Pang
     * Licensed under BSD-3-Clause
     */
    function enableActivityTrackingCallback(e,t){dispatchToTrackers(t,(function(t){t.enableActivityTrackingCallback(e);}));}r state="undefined"!=typeof window?createSharedState():void 0;function newTracker(e,t,c){return void 0===c&&(c={}),state?addTracker(e,e,"js-".concat(version),t,state,c):void 0}

    var eventemitter3 = {exports: {}};

    !eventemitter3);var EventEmitter = eventemitter3.exports;

    var ATTRIBUTE_ID_ACTIVE_VIEW="id-av";var ActiveView=function(){function e(e,t,i){void 0===e&&(e=.5),void 0===t&&(t=1e3);var r=this;this.events=new EventEmitter,this.viewTime=t,this.inner=new IntersectionObserver((function(e,t){e.forEach((function(e){var t=e.target;if(e.isIntersecting)t.setAttribute(ATTRIBUTE_ID_ACTIVE_VIEW,setTimeout((,r.viewTime).toString());else {var i=t.getAttribute(ATTRIBUTE_ID_ACTIVE_VIEW);if(null===i)return;clearTimeout(parseInt(i,10)),t.removeAttribute(ATTRIBUTE_ID_ACTIVE_VIEW);}}));}),{threshold:e,root:i});}return e.prototype.addEventListener=e.prototype.trackVisibility=function(e){this.inner.unobserve(e),e.removeAttribute(ATTRIBUTE_ID_ACTIVE_VIEW),this.events.emit("observe",e);},e.prototype.observe=function(e){this.inner.observe(e);},e.prototype.unobserve=e}();

    
    function pageViewContext(e){return {schema:"iglu:de.id.bi.audience/page_view/jsonschema/1-0-0",data:{pvid:e.toString()}}}

    function shelfContext(e){var s=e.shn;return {schema:"iglu:de.id.bi.audience/shelf/jsonschema/1-0-0",data:{sht:e.sht,shn:s,shtg:e.shtg,properties:e.p}}}

    function userContext(i,t){return {schema:"iglu:de.id.bi.audience/user/jsonschema/1-0-0",data:__assign({utid:i.toString()},t&&{upid:t})}}

    function userInteractionContext(e,n){return {schema:"iglu:de.id.bi.audience/user_interaction/jsonschema/1-0-0",data:{uiaid:"".concat(e,"-").concat(n)}}}

    function pagePingContext(e,n){return {schema:"iglu:de.id.bi.audience/page_ping/jsonschema/1-0-0",data:{ppid:"".concat(e,"-").concat(n)}}}

    function elementActiveViewEvent(e,t){return {schema:"iglu:de.id.bi.audience/element_active_view/jsonschema/1-0-0",data:{elementId:e,elementClasses:t}}}

    
    /*! js-cookie v3.0.5 | MIT */
    ar defaultConverter={read:write:;ar api=init(defaultConverter,{path:"/"});

    let getRandomValues;const rnds8=new Uint8Array(16);
    var REGEX = /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;

    
    const byteToHex=[];for(let e=0;e<256;++e)byteToHex.push((e+256).toString(16).slice(1));
    
    onst DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";const URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(t,e,r){function n(t,n,o,s){var i;if("string"==typeof t&&(t=stringToBytes(t)),"string"==typeof n&&(n=parse(n)),16!==(null===(i=n)||void 0===i?void 0:i.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let a=new Uint8Array(16+t.length);if(a.set(n),a.set(t,n.length),a=r(a),a[6]=15&a[6]|e,a[8]=63&a[8]|128,o){s=s||0;for(let t=0;t<16;++t)o[s+t]=a[t];return o}return unsafeStringify(a)}try{n.name=t;}catch(t){}return n.DNS=DNS,n.URL=URL,n}

    on bitRotateLeft(d,m){return d<<m|d>>>32-m} v35("v3",48,md5);

    const randomUUID="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var native = {randomUUID:randomUUID};

    
       v35("v5",80,sha1);

    var UserTransientId=function(){function t(t){var n=this;this.toString=function(){return n.utid},this.utid=t||v4();}return t.generate=t}();

    var PageViewId=function(){function t(t){var n=this;this.toString=this.pvid=t;}return t.generate=function(n){return new t(n?"".concat(n,"-").concat(Math.floor(Date.now()/1e3),"-").concat(String(1).padStart(10,"0")):"".concat(v4(),"-").concat(Math.floor(Date.now()/1e3),"-").concat(String(1).padStart(10,"0")))},t.fromCookie=function(n){var r=api.get(n);if(r)return new t(r)},t.prototype.getUserTransientId=function(){return new UserTransientId(this.pvid.substring(0,36))},t}();

    var UserInteraction=function(){function t(t){var n=this;this.toString=function(){return String(n.state).padStart(4,"0")},this.state=t||1;}return t.prototype.increment=function(){this.state+=1;},t}();

    var PagePing=function(){function t(t){var n=this;this.toString=function(){return String(n.state).padStart(4,"0")},this.state=t||1;}return t.prototype.increment=t}();

    function readDataLayer(){var i,e,d=void 0,a=void 0,n=void 0,t=void 0,p=void 0;if(window.dataLayer&&window.dataLayer instanceof Array)try{for(var r=__values(window.dataLayer),l=r.next();!l.done;l=r.next()){var o=l.value;"de.ippen-digital.story.onlineId"in o&&o["de.ippen-digital.story.onlineId"]&&(d=o["de.ippen-digital.story.onlineId"]),"de.ippen-digital.page.pageViewId"in o&&o["de.ippen-digital.page.pageViewId"]&&(a=o["de.ippen-digital.page.pageViewId"]),"de.ippen-digital.user.transientId"in o&&o["de.ippen-digital.user.transientId"]&&(n=o["de.ippen-digital.user.transientId"]),"de.ippen-digital.cms.cid"in o&&o["de.ippen-digital.cms.cid"]&&(t=o["de.ippen-digital.cms.cid"]),"de.ippen-digital.useCase"in o&&o["de.ippen-digital.useCase"]&&(p=o["de.ippen-digital.useCase"]);}}catch(e){i={error:e};}finally{try{l&&!l.done&&(e=r.return)&&e.call(r);}finally{if(i)throw i.error}}return {oid:d,pvid:a,utid:n,cid:t,useCase:p}}

    function trackDevEvent(e,t,a,n,i,o,s,d){fetch("".concat(e,"/bi/dev"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metadata:{key:d},origin:{system:t,useCase:a},cmsClientId:s,pageViewId:n,payload:o,userAgent:i})});}

    function cmsClientContext(e){return {schema:"iglu:de.id.bi.audience/cms_client/jsonschema/1-0-0",data:{cid:e}}}

    function decorateLinks(e,n){for(var t=0;t<document.links.length;t++){var r=document.links[t];!r.spDecorationEnabled&&n(r)&&(addEventListener(r,"click",(function(n){return linkDecorationHandler(n,e)}),!0),addEventListener(r,"mousedown",(,!0),r.spDecorationEnabled=!0);}}unction linkDecorationHandler(e,n){var t=(new Date).getTime(),r=e.currentTarget;(null==r?void 0:r.href)&&(r.href=decorateQuerystring(r.href,"_sp",n+"."+t));}function decorateQuerystring(e,n,t){var r=n+"="+t,o=e.split("#"),i=o[0].split("?"),a=i.shift(),c=i.join("?");if(c){for(var l=!0,d=c.split("&"),u=0;u<d.length;u++)if(d[u].substr(0,n.length+1)===n+"="){l=!1,d[u]=r,c=d.join("&");break}l&&(c=r+"&"+c);}else c=r;return o[0]=a+"?"+c,o.join("#")}unction getCookie(e){var n,t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length)return null===(n=null==t?void 0:t.pop())||void 0===n?void 0:n.split(";").shift()}

    var ALLOWED_ORIGIN_SYSTEMS=["BI_AUDIENCE_HUB","PNA","WEST","MOBILE_APP","YARP2","NEWSLETTER","FR_PLUS_APP","SUBSCRIPTION","CIAM_SSO","E_PAPER","SERIENJUNKIES_WIKI","USER_ID"];var CID_REQUIRED=["MOBILE_APP","CIAM_SSO"];

    function useCaseContext(e){return {schema:"iglu:de.id.bi.audience/use_case/jsonschema/1-0-0",data:{useCase:e}}}

    var DEFAULT_ID="bi-audience-hub";var Tracker=function(){function e(e,t,i,n,r,s,o,a,d,c,l,h,p){var u=this;this.trackUserActivity=function(){enableActivityTrackingCallback({minimumVisitLength:10,heartbeatDelay:10,callback:);},this.pageViewId=e,this.userTransientId=t,this.userInteraction=i,this.pagePing=n,this.activeView=r,this.trackerId=a,this.endpoint=o,this.originSystem=s,p&&(this.persistentId=p),h&&(this.useCase=h),c&&(this.cid=c),l&&(this.onlineId=l),this.activeView.addEventListener((function(e){var t=e.id,i=getElementClasses(e),n=getElementShelf("data-id-av",e);u.sendIndependentActiveView({elementId:t,elementClasses:i,shelfData:n});})),this.setIdCookie(),this.tracker=newTracker(a,o,{postPath:"/bi/doop/",appId:s,discoverRootDomain:!0,cookieSameSite:"Lax",plugins:d,eventMethod:"beacon"});}return e.prototype.getUserTransientId=e.prototype.decoratePageLinks=function(e,t,i,n){if(decorateLinks(e,t),i){var r=document.getElementById(i),s=n||{attributes:!0,childList:!0,subtree:!0},o=new MutationObserver((function(i){var n,r;try{for(var s=__values(i),o=s.next();!o.done;o=s.next()){o.value;decorateLinks(e,t);}}catch(e){n={error:e};}finally{try{o&&!o.done&&(r=s.return)&&r.call(s);}finally{if(n)throw n.error}}}));r&&o.observe(r,s);}},e.prototype.setIdCookie=function(e){var t=new Date;t.setTime(t.getTime()+864e6);var i="expires="+t.toUTCString();document.cookie="_id="+(e||this.userTransientId.toString())+";"+i+";path=/";},e.prototype.sendPageView=function(){var e=[pageViewContext(this.pageViewId),userContext(this.userTransientId,this.persistentId)];this.useCase&&e.push(useCaseContext(this.useCase)),this.onlineId&&e.push(onlineContext(this.onlineId)),(this.cid||0===this.cid)&&e.push(cmsClientContext(this.cid)),trackPageView({context:e},[this.trackerId]);},e.prototype.trackElementClick=function(e){var t=this,i=e.htmlElement,n=e.shelfData;i.addEventListener("click",(function(){var e=i.id,r=getElementClasses(i);t.sendIndependentElementClick({elementId:e,elementClasses:r,shelfData:n});}),{once:!0});},e.prototype.sendIndependentElementClick=function(e){var t=e.elementId,i=e.elementClasses,n=e.shelfData;if("invalid"!==n){var r=[pageViewContext(this.pageViewId),userContext(this.userTransientId,this.persistentId),shelfContext(n),userInteractionContext(this.pageViewId,this.userInteraction)];this.useCase&&r.push(useCaseContext(this.useCase)),this.onlineId&&r.push(onlineContext(this.onlineId)),(this.cid||0===this.cid)&&r.push(cmsClientContext(this.cid));var s=elementClickEvent(t,i);this.userInteraction.increment(),trackSelfDescribingEvent({context:r,event:s},[this.trackerId]);}},e.prototype.trackElementActiveView=function(e){this.activeView.observe(e);},e.prototype.sendIndependentActiveView=function(e){var t=e.elementId,i=e.elementClasses,n=e.shelfData;if("invalid"!==n){var r=[pageViewContext(this.pageViewId),userContext(this.userTransientId,this.persistentId),shelfContext(n),userInteractionContext(this.pageViewId,this.userInteraction)];this.useCase&&r.push(useCaseContext(this.useCase)),this.onlineId&&r.push(onlineContext(this.onlineId)),(this.cid||0===this.cid)&&r.push(cmsClientContext(this.cid));var s=elementActiveViewEvent(t,i);this.userInteraction.increment(),trackSelfDescribingEvent({context:r,event:s},[this.trackerId]);}},e.prototype.sendIndependentPagePing=function(){var e=[pageViewContext(this.pageViewId),userContext(this.userTransientId,this.persistentId),pagePingContext(this.pageViewId,this.pagePing)];this.useCase&&e.push(useCaseContext(this.useCase)),(this.cid||0===this.cid)&&e.push(cmsClientContext(this.cid));var t=pagePingContext(this.pageViewId,this.pagePing);this.pagePing.increment(),trackSelfDescribingEvent({context:e,event:t},[this.trackerId]);},e.prototype.sendDevEvent=function(e,t,i){var n=navigator.userAgent;trackDevEvent(this.endpoint,this.originSystem,e,this.pageViewId.toString(),n,t,this.cid||0,i);},e}();function CreateTracker(e){if(!e.originSystem)throw new Error("Invalid originSystem");if(!e.endpoint)throw new Error("Invalid endpoint");var t=e.originSystem;if(!ALLOWED_ORIGIN_SYSTEMS.includes(t))throw new Error("The origin system ".concat(t," is not allowed. Note that the origin system is case sensitive"));var i,n,r,s,o=readDataLayer(),a=e.endpoint,d=function(e){if(e&&"string"==typeof e&&!(e.length>128)&&e===e.toLowerCase()&&/^[a-zßöäü0-9_]+$/.test(e))return e}(o.useCase),c=e.id?e.id:DEFAULT_ID,l=e.plugins?e.plugins:[],h=function(e){if(e&&"string"==typeof e&&/^[a-f0-9]{64}$/.test(e))return e}(getCookie("id_userid_pid")),p=new UserInteraction(e.firstUserInteraction),u=new PagePing(e.firstPagePing),g=new ActiveView(e.activeViewThreshold,e.activeViewTime,e.activeViewRoot),m=fromQuerystring("_sp",window.location.href);if(m){var I=m.split(".")[0];i=new UserTransientId(I);}else if(e.userTransientId)i=new UserTransientId(e.userTransientId);else if(o.utid)i=new UserTransientId(o.utid);else if(getCookie("_id"))i=new UserTransientId(getCookie("_id"));else {if(!0!==e.generatePageViewIdIfMissing)throw new Error("UserTransientId not found");i=UserTransientId.generate();}if(m)n=PageViewId.generate(i.toString());else if(e.pageViewId)n=new PageViewId(e.pageViewId);else if(o.pvid)n=new PageViewId(o.pvid);else {if(!0!==e.generatePageViewIdIfMissing)throw new Error("PageViewId not found");n=PageViewId.generate(i.toString());}if(e.cid)r=e.cid;else if(o.cid)r=o.cid;else {if(CID_REQUIRED.includes(t))throw new Error("The Client ID (CID) must be included!");console.warn("Client ID (CID) not found in Data Layer or settings"),r=void 0;}if(r&&"number"!=typeof r)throw new Error("The Client ID (CID) must be a number, but it is ".concat(typeof r));if(e.onlineId?s=e.onlineId:o.oid?s=o.oid:(console.warn("Online ID (OID) not found in Data Layer or settings"),s=void 0),s&&"number"!=typeof s)throw new Error("The Online ID (OID) must be a number, but it is ".concat(typeof s));return new Tracker(n,i,p,u,g,t,a,c,l,r,s,d,h)}

    var CROSS_DOMAIN_ALLOWED_DOMAINS=["epaper.hna.de","devhnaepaper.de"];

    !function(){var e=document.currentScript;if(e){var t=e.getAttribute("data-id-origin-system"),i=e.getAttribute("data-id-address"),r=e.getAttribute("data-id-features"),n=getFeatureFlags(r);if(t&&i){var a=CreateTracker({originSystem:t,endpoint:i,generatePageViewIdIfMissing:n.generate_page_view_id});if((n.enable_activity_tracking||window.location.href.includes("webnachrichten.de")||window.location.href.includes("webnachrichten.idstg.de")||window.location.href.includes("buzzfeed.at")||window.location.href.includes("merkur.de"))&&a.trackUserActivity(),n.track_pageview&&a.sendPageView(),n.enable_element_click_tracking){var d=new TrackedElements("[data-id-ec]","data-id-em",(function(e){var t=getElementShelf("data-id-ec",e);a.trackElementClick({htmlElement:e,shelfData:t});}));d.refresh(),document.addEventListener("id-refresh",(function(){return d.refresh()}));}if(n.enable_active_view_tracking){var c=new TrackedElements("[data-id-av]","data-id-am",(function(e){a.trackElementActiveView(e);}));c.refresh(),document.addEventListener("id-refres()}));}if(n.enable_cross_domain_tracking){var o=a.getUserTransientId().toString();a.decoratePageLinks))}),"cxo-widget-host",{attributes:!0,childList:!0,subtree:!0});}}}}();

})();
//# sourceMappingURL=current-tracker.js.map
