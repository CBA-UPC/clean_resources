!"undefined"!=typeof window?window:this,function(e,n){unction a(e,n){if(e===n)return ie=!0,0;var o=!e.compareDocumentPosition-!n.compareDocumentPosition;return o?o:(o=(e.ownerDocument||e)===(n.ownerDocument||n)?e.compareDocumentPosition(n):1,1&o?e===H||e.ownerDocument===H&&$.contains(H,e)?-1:n===H||n.ownerDocument===H&&$.contains(H,n)?1:te?O.call(te,e)-O.call(te,n):0:4&o?-1:1)}function i(e){var n,o=[],i=0,t=0;if(ie=!1,te=!ge&&e.slice(0),e.sort(a),ie){for(;n=e[t++];)n===e[t]&&(i=o.push(t));for(;i--;)e.splice(o[i],1)}return te=null,e}h(){return!0}lice,M=F.concat,N=F.push,O=F.indexOf,Q={},V=Q.toString,X=Q.hasOwnProperty,Y={},Z="2.2.5-pre -css/hiddenVisibleSelectors,-effects/animatedSelector,-core/ready,-effects,-effects/Tween,-deprecated,-exports/amd",$=function(e,n){return new $.fn.init(e,n)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ne=/^-ms-/,oe=/-([\da-z])/gi,ae=function(e,n){return n.toUpperCase()};$.fn=$.prototype={jquery:Z,constructor:$,selector:"",length:0,toArray:get:pushStack:each:function(e){return $.each(this,e)},map:slice:first:function(){return this.eq(0)},last:eq:end:push:N,sort:F.sort,splice:F.splice},$.extend=$.fn.extend=$.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:noop:function(){},isFunction:function(e){return"function"===$.type(e)},isArray:Array.isArray,isWindow:isNumeric:isPlainObject:isEmptyObject:type:globalEval:camelCase:nodeName:each:trim:makeArray:inArray:merge:grep:map:guid:1,proxy:now:Date.now,support:Y}),"function"==typeof Symbol&&($.fn[Symbol.iterator]=F[Symbol.iterator]),$.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),;var ie,te,re=H.documentElement,ge=$.expando.split("").sort(a).join("")===$.expando,de=re.matches||re.webkitMatchesSelector||re.mozMatchesSelector||re.oMatchesSelector||re.msMatchesSelector;$.extend({find:function(e,n,o,a){var i,t,r=0;if(o=o||[],n=n||H,!e||"string"!=typeof e)return o;if(1!==(t=n.nodeType)&&9!==t)return[];if(a)for(;i=a[r++];)$.find.matchesSelector(i,e)&&o.push(i);else $.merge(o,n.querySelectorAll(e));return o},uniqueSort:i,unique:i,text:contains:isXMLDoc:expr:{attrHandle:{},match:{bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:/^[\x20\t\r\n\f]*[>+~]/}}}),$.extend($.find,{matches:matchesSelector:function(e,n){return de.call(e,n)},attr:function(e,n){var o=$.expr.attrHandle[n.toLowerCase()],a=o&&X.call($.expr.attrHandle,n.toLowerCase())?o(e,n,$.isXMLDoc(e)):void 0;return void 0!==a?a:e.getAttribute(n)}});var se=ce=fe=$.expr.match.needsContext,pe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,ue=/^.[^:#\[\.,]*$/;$.filter=$.fn.extend({find:filter:function(e){return this.pushStack(t(this,e||[],!1))},not:is:);var he,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,be=$.fn.init=be.prototype=$.fn,he=$(H);var le=/^(?:parents|prev(?:Until|All))/,we={children:!0,contents:!0,next:!0,prev:!0};$.fn.extend({has:closest:index:add:addBack:),$.each({parent:parents:function(e){return se(e,"parentNode")},parentsUntil:function(e,n,o){return se(e,"parentNode",o)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return se(e,"nextSibling")},prevAll:function(e){return se(e,"previousSibling")},nextUntil:function(e,n,o){return se(e,"nextSibling",o)},prevUntil:siblings:children:function(e){return ce(e.firstChild)},contents:,;var Pe=/\S+/g;$.Callbacks=$.extend({Deferred:when:);var Ce=_e=d.uid=1,d.prototype={register:cache:set:get:access:remove:hasData:;var ve=new d,ye=new d,We=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,De=/[A-Z]/g;$.extend({hasData:data:function(e,n,o){return ye.access(e,n,o)},removeData:function(e,n){ye.remove(e,n)},_data:_removeData:),$.fn.extend({data:removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),$.extend({queue:dequeue:_queueHooks:),$.fn.extend({queue:dequeue:function(e){return this.each(function(){$.dequeue(this,e)})},clearQueue:promise:);var Ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Re=new RegExp("^(?:([+-])=|)("+Ie+")([a-z%]*)$","i"),Se=["Top","Right","Bottom","Left"],xe=Be=/^(?:checkbox|radio)$/i,Ee=/<([\w:-]+)/,Ge=/^$|\/(?:java|ecma)script/i,Ke={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ke.optgroup=Ke.option,Ke.tbody=Ke.tfoot=Ke.colgroup=Ke.caption=Ke.thead,Ke.th=Ke.td;var Le=/<|&#?\w+;/;!);var Te=/^key/,Ue=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,je=/^([^.]*)(?:\.(.+)|)/;$.event={global:{},add:remove:dispatch:handlers:props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:,mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:,fix:special:{load:{noBubble:!0},focus:{trigger:delegateType:"focusin"},blur:{trigger:delegateType:"focusout"},click:{trigger:_default:,beforeunload:{postDispatch:}},$.removeEvent=$.Event=$.Event.prototype={constructor:$.Event,isDefaultPrevented:m,isPropagationStopped:m,isImmediatePropagationStopped:m,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=h,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:stopImmediatePropagation:,$.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},,$.fn.extend({on:one:off:);var ke=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,qe=/<script|<style|<link/i,ze=/checked\s*(?:[^=]|=\s*.checked.)/i,Ae=/^true\/(.*)/,Fe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;
$.extend({htmlPrefilter:function(e){return e.replace(ke,"<$1></$2>")},clone:cleanData:),$.fn.extend({domManip:y,detach:remove:text:append:prepend:before:after:empty:clone:html:replaceWith:),$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},;var He,Je={HTML:"block",BODY:"block"},Me=/^margin/,Ne=new RegExp("^("+Ie+")(?!px)[a-z%]+$","i"),Oe=Qe=!);var Ve=/^(none|table(?!-c[ea]).+)/,Xe={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},Ze=["Webkit","O","Moz","ms"],$e=H.createElement("div").style;$.extend({cssHooks:{opacity:{get:},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:css:),$.each(["height","width"],,$.cssHooks.marginLeft=S(Y.reliableMarginLeft,,$.cssHooks.marginRight=S(Y.reliableMarginRight,,$.each({margin:"",padding:"",border:"Width"},,$.fn.extend({css:show:hide:toggle:),$.fn.delay=);var en,nn=$.expr.attrHandle;$.fn.extend({attr:function(e,n){return Ce(this,$.attr,e,n,arguments.length>1)},removeAttr:),$.extend({attr:attrHooks:{type:{set:},removeAttr:),en={set:,$.each($.expr.match.bool.source.match(/\w+/g),;var on=/^(?:input|select|textarea|button)$/i,an=/^(?:a|area)$/i;$.fn.extend({prop:removeProp:),$.extend({prop:propHooks:{tabIndex:{get:},propFix:{for:"htmlFor",class:"className"}}),Y.optSelected||($.propHooks.selected={get:set:),$.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],;var tn=/[\t\r\n\f]/g;$.fn.extend({addClass:removeClass:toggleClass:hasClass:);var rn=/\r/g,gn=/[\x20\t\r\n\f]+/g;$.fn.extend({val:),$.extend({valHooks:{option:{get:,select:{get:set:}}),$.each(["radio","checkbox"],;var dn=/^(?:focusinfocus|focusoutblur)$/;$.extend($.event,{trigger:simulate:),$.fn.extend({trigger:triggerHandler:),$.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),,$.fn.extend({hover:),Y.focusin="onfocusin"in e,Y.focusin||$.each({focus:"focusin",blur:"focusout"},;var sn=e.location,cn=$.now(),fn=/\?/;$.parseJSON=$.parseXML=var pn=/#.*$/,un=/([?&])_=[^&]*/,hn=/^(.*?):[ \t]*([^\r\n]*)$/gm,mn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,bn=/^(?:GET|HEAD)$/,ln=/^\/\//,wn={},Pn={},Cn="*/".concat("*"),_n=H.createElement("a");_n.href=sn.href,$.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:sn.href,type:"GET",isLocal:mn.test(sn.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Cn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":$.parseJSON,"text xml":$.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:ajaxPrefilter:T(wn),ajaxTransport:T(Pn),ajax:getJSON:getScript:),$.each(["get","post"],,$._evalUrl=$.fn.extend({wrapAll:wrapInner:wrap:unwrap:);var vn=/%20/g,yn=/\[\]$/,Wn=/\r?\n/g,Dn=/^(?:submit|button|image|reset|file)$/i,In=/^(?:input|select|textarea|keygen)/i;$.param=$.fn.extend({serialize:serializeArray:),$.ajaxSettings.xhr=var Rn={0:200,1223:204},Sn=$.ajaxSettings.xhr();Y.cors=!!Sn&&"withCredentials"in Sn,Y.ajax=Sn=!!Sn,$.ajaxTransport(,$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":}),$.ajaxPrefilter("script",,$.ajaxTransport("script",;var xn=[],Bn=/(=)\?(?=&|$)|\?\?/;$.ajaxSetup({jsonp:"callback",jsonpCallback:),$.ajaxPrefilter("json jsonp",,$.parseHTML=var En=$.fn.load;$.fn.load=$.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],,$.offset={setOffset:,$.fn.extend({offset:position:offsetParent:),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},,$.each(["top","left"],,$.each({Height:"height",Width:"width"},;var Gn=e.jQuery,Kn=e.$;return $.noConflict=n||(e.jQuery=e.$=$),$});
window.Modernizr=function(e,n,o){c,f,p="2.8.3",u={},h=!0,m=n.documentElement,b="modernizr",l=n.createElement(b),w=l.style,P=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),C="Webkit Moz O ms",_=C.split(" "),v=C.toLowerCase().split(" "),y={},W=[],D=W.slice,I=R=S={}.hasOwnProperty;f=i(S,"undefined")||i(S.call,"undefined")?function(e,n){return S.call(e,n)},Function.prototype.bind||(Function.prototype.bind=,y.flexbox=function(){return d("flexWrap")},y.csstransitions=function(){return d("transition")};for(var x in y)f(y,x)&&(c=x.toLowerCase(),u[c]=y[x](),W.push((u[c]?"":"no-")+c));return u.addTest=a(""),l=s=null,u._version=p,u._prefixes=P,u._domPrefixes=v,u._cssomPrefixes=_,u.mq=R,u.testProp=u.testAllProps=d,u.testStyles=I,m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+W.join(" "):""),u}(this,this.document),call(this),function(e,n,o,a){var i=e.Backbone,t=Array.prototype.slice;n.VERSION="1.2.3",n.$=a,n.noConflict=function(){return e.Backbone=i,this},n.emulateHTTP=!1,n.emulateJSON=!1;var r=g=d=s=c=n.Events={},f=/\s+/,p=c.on=var u=c.listenTo=var h=c.off=c.stopListening=var m=c.once=c.listenToOnce=var b=c.trigger=var l=w=c.bind=c.on,c.unbind=c.off,o.extend(n,c);var P=n.Model=o.extend(P.prototype,c,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:sync:function(){return n.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:has:matches:set:unset:clear:hasChanged:changedAttributes:previous:previousAttributes:function(){return o.clone(this._previousAttributes)},fetch:save:destroy:url:parse:function(e,n){return e},clone:isNew:isValid:_validate:);var C={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};g(P,C,"attributes");var _=n.Collection=v={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1},W=o.extend(_.prototype,c,{model:P,initialize:function(){},toJSON:sync:add:remove:set:function(e,n){if(null!=e){n=o.defaults({},n,v),n.parse&&!this._isModel(e)&&(e=this.parse(e,n));var a=!o.isArray(e);e=a?[e]:e.slice();var i=n.at;null!=i&&(i=+i),i<0&&(i+=this.length+1);for(var t,r=[],g=[],d=[],s={},c=n.add,f=n.merge,p=n.remove,u=!1,h=this.comparator&&null==i&&n.sort!==!1,m=o.isString(this.comparator)?this.comparator:null,b=0;b<e.length;b++){t=e[b];var l=this.get(t);if(l){if(f&&t!==l){var w=this._isModel(t)?t.attributes:t;n.parse&&(w=l.parse(w,n)),l.set(w,n),h&&!u&&(u=l.hasChanged(m))}s[l.cid]||(s[l.cid]=!0,r.push(l)),e[b]=l}else c&&(t=e[b]=this._prepareModel(t,n),t&&(g.push(t),this._addReference(t,n),s[t.cid]=!0,r.push(t)))}if(p){for(b=0;b<this.length;b++)t=this.models[b],s[t.cid]||d.push(t);d.length&&this._removeModels(d,n)}var P=!1,C=!h&&c&&p;if(r.length&&C?(P=this.length!=r.length||o.some(this.models,,this.models.length=0,W(this.models,r,0),this.length=this.models.length):g.length&&(h&&(u=!0),W(this.models,g,null==i?this.length:i),this.length=this.models.length),u&&this.sort({silent:!0}),!n.silent){for(b=0;b<g.length;b++)null!=i&&(n.index=i+b),t=g[b],t.trigger("add",t,this,n);(u||P)&&this.trigger("sort",this,n),(g.length||d.length)&&this.trigger("update",this,n)}return a?e[0]:e}},reset:push:pop:unshift:shift:slice:get:at:where:findWhere:sort:pluck:fetch:create:parse:clone:modelId:_reset:_prepareModel:_removeModels:_isModel:_addReference:_removeReference:_onModelEvent:);var D={forEach:3,each:3,map:3,collect:3,reduce:4,foldl:4,inject:4,reduceRight:4,foldr:4,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3};g(_,D,"models");var I=n.View=R=/^(\S+)\s*(.*)$/,S=["model","collection","el","id","attributes","className","tagName","events"];o.extend(I.prototype,c,{tagName:"div",$:initialize:function(){},render:remove:_removeElement:function(){this.$el.remove()},setElement:_setElement:delegateEvents:delegate:function(e,n,o){return this.$el.on(e+".delegateEvents"+this.cid,n,o),this},undelegateEvents:undelegate:_createElement:function(e){return document.createElement(e)},_ensureElement:_setAttributes:function(e){this.$el.attr(e)}}),n.sync=var x={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};n.ajax=var B=n.Router=E=/\((.*?)\)/g,G=/(\(\?)?:\w+/g,K=/\*\w+/g,L=/[\-{}\[\]+?.,\\\^$|#\s]/g;o.extend(B.prototype,c,{initialize:function(){},route:execute:navigate:_bindRoutes:_routeToRegExp:_extractParameters:);var T=n.History=U=/^[#\/]|\s+$/g,j=/^\/+|\/+$/g,k=/#.*$/;T.started=!1,o.extend(T.prototype,c,{interval:50,atRoot:matchRoot:decodeFragment:getSearch:getHash:getPath:getFragment:start:stop:route:function(e,n){this.handlers.unshift({route:e,callback:n})},checkUrl:loadUrl:navigate:_updateHash:),n.history=new T;var q=P.extend=_.extend=B.extend=I.extend=T.extend=q;var z=A=return n}),this,function(e,n,o){"use strict";!function(e,n){var o=e.ChildViewContainer;return e.ChildViewContainer=function(e,n){var o=n.extend(o.prototype,{add:findByModel:findByModelCid:function(e){var n=this._indexByModel[e];return this.findByCid(n)},findByCustom:findByIndex:findByCid:function(e){return this._views[e]},remove:call:apply:_updateLength:);var a=["forEach","each","map","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","toArray","first","initial","rest","last","without","isEmpty","pluck","reduce"];return n.each(a,,o}(e,n),e.ChildViewContainer.VERSION="0.1.11",e.ChildViewContainer.noConflict=function(){return e.ChildViewContainer=o,this},e.ChildViewContainer}(n,o),function(e,n){var o=e.Wreqr,a=e.Wreqr={};return e.Wreqr.VERSION="1.3.6",e.Wreqr.noConflict=a.Handlers=e,n),a.CommandStorage=),a.Commands=a,n),a.RequestResponse=a,n),a.EventAggregator=e,n),a.Channel=function(o){var a=return n.extend(a.prototype,{reset:connectEvents:function(e,n){return this._connect("vent",e,n),this},connectCommands:function(e,n){return this._connect("commands",e,n),this},connectRequests:_connect:),a}(a),a.radio=function(e,n){var o=n.extend(o.prototype,{channel:_getChannel:_proxyMethods:);var a={vent:["on","off","trigger","once","stopListening","listenTo","listenToOnce"],commands:["execute","setHandler","setHandlers","removeHandler","removeAllHandlers"],reqres:["request","setHandler","setHandlers","removeHandler","removeAllHandlers"]},i=return new o}(a,n),e.Wreqr}(n,o);var a=e.Marionette,i=e.Mn,t=n.Marionette={};t.VERSION="2.4.5",t.noConflict=n.Marionette=t,t.Deferred=n.$.Deferred,t.extend=n.Model.extend,t.isNodeAttached=t.mergeOptions=t.getOption=t.proxyGetOption=function(e){return t.getOption(this,e)},t._getValue=t.normalizeMethods=t.normalizeUIString=t.normalizeUIKeys=t.normalizeUIValues=t.actAsCollection=var r=t.deprecate=r._console="undefined"!=typeof console?console:{},r._warn=function(){var e=r._console.warn||r._console.log||function(){};return e.apply(r._console,arguments)},r._cache={},t._triggerMethod=function(){ar n=/(^|:)(\w)/gi;return function(a,i,t){var r=arguments.length<3;r&&(t=i,i=t[0]);var g,d="on"+i.replace(n,e),s=a[d];return o.isFunction(s)&&(g=s.apply(a,r?o.rest(t):t)),o.isFunction(a.trigger)&&(r+t.length>1?a.trigger.apply(a,r?t:[i].concat(o.drop(t,0))):a.trigger(i)),g}}(),t.triggerMethod=t.triggerMethodOn=t.MonitorDOMRefresh=t);var g=["description","fileName","lineNumber","name","message","number"];return t.Error=t.extend.call(Error,{urlRoot:"http://marionettejs.com/docs/v"+t.VERSION+"/",constructor:captureStackTrace:toString:),t.Error.extend=t.extend,t.Callbacks=o.extend(t.Callbacks.prototype,{add:run:reset:),t.Controller=t.Controller.extend=t.extend,o.extend(t.Controller.prototype,n.Events,{destroy:triggerMethod:t.triggerMethod,mergeOptions:t.mergeOptions,getOption:t.proxyGetOption}),t.Object=t.Object.extend=t.extend,o.extend(t.Object.prototype,n.Events,{initialize:function(){},destroy:triggerMethod:t.triggerMethod,mergeOptions:t.mergeOptions,getOption:t.proxyGetOption,bindEntityEvents:t.proxyBindEntityEvents,unbindEntityEvents:t.proxyUnbindEntityEvents}),t.Region=t.Object.extend({constructor:show:triggerBeforeAttach:!0,triggerAttach:!0,_triggerAttach:_displayedViews:_renderView:_ensureElement:_ensureViewIsIntact:getEl:attachHtml:empty:function(e){var n=this.currentView,o=e||{},a=!!o.preventDestroy;return n?(n.off("destroy",this.empty,this),this.triggerMethod("before:empty",n),a||this._destroyView(),this.triggerMethod("empty",n),delete this.currentView,a&&this.$el.contents().detach(),this):this},_destroyView:attachView:hasView:reset:,{buildRegion:_buildRegionFromSelector:_buildRegionFromObject:_buildRegionFromRegionClass:),t.RegionManager=t.Controller.extend({constructor:addRegions:addRegion:get:getRegions:removeRegion:removeRegions:emptyRegions:destroy:_store:_remove:),t.actAsCollection(t.RegionManager.prototype,"_regions"),t.TemplateCache=o.extend(t.TemplateCache,{templateCaches:{},get:clear:),o.extend(t.TemplateCache.prototype,{load:loadTemplate:compileTemplate:),t.Renderer={render:,t.View=n.View.extend({isDestroyed:!1,supportsRenderLifecycle:!0,supportsDestroyLifecycle:!0,constructor:getTemplate:function(){return this.getOption("template")},serializeModel:function(e){return e.toJSON.apply(e,o.rest(arguments))},mixinTemplateHelpers:normalizeUIKeys:normalizeUIValues:configureTriggers:delegateEvents:_delegateDOMEvents:undelegateEvents:_ensureViewIsIntact:destroy:bindUIElements:function(){this._bindUIElements(),o.invoke(this._behaviors,this._bindUIElements)},_bindUIElements:unbindUIElements:_unbindUIElements:_buildViewTrigger:setElement:triggerMethod:_triggerEventOnBehaviors:_triggerEventOnParentLayout:function(e,n){var a=this._parentLayoutView();if(a){var i=t.getOption(a,"childViewEventPrefix"),r=i+":"+e,g=[this].concat(n);t._triggerMethod(a,r,g);var d=t.getOption(a,"childEvents");d=t._getValue(d,a);var s=a.normalizeMethods(d);s&&o.isFunction(s[e])&&s[e].apply(a,g)}},_getImmediateChildren:_getNestedViews:_parentLayoutView:normalizeMethods:t.normalizeMethods,mergeOptions:t.mergeOptions,getOption:t.proxyGetOption,bindEntityEvents:t.proxyBindEntityEvents,unbindEntityEvents:t.proxyUnbindEntityEvents}),t.ItemView=t.View.extend({constructor:function(){t.View.apply(this,arguments)},serializeData:serializeCollection:render:_renderTemplate:attachElContent:),t.CollectionView=t.View.extend({childViewEventPrefix:"childview",sort:!0,constructor:initRenderBuffer:startBuffering:endBuffering:_triggerMethodMany:_initialEvents:function(){this.collection&&(this.listenTo(this.collection,"add",this._onCollectionAdd),this.listenTo(this.collection,"remove",this._onCollectionRemove),this.listenTo(this.collection,"reset",this.render),this.getOption("sort")&&this.listenTo(this.collection,"sort",this._sortViews))},_onCollectionAdd:function(e,n,a){var i=void 0!==a.at&&(a.index||n.indexOf(e));if((this.getOption("filter")||i===!1)&&(i=o.indexOf(this._filteredSortedModels(i),e)),this._shouldAddChild(e,i)){this.destroyEmptyView();var t=this.getChildView(e);this.addChild(e,t,i)}},_onCollectionRemove:_onBeforeShowCalled:_onShowCalled:_onBeforeAttachCalled:function(){this._triggerBeforeAttach=!0},_onAttachCalled:render:reorder:function(){var e=this.children,n=this._filteredSortedModels(),a=o.some(n,;if(a)this.render();else{var i=o.map(n,,t=e.filter(;this.triggerMethod("before:reorder"),this._appendReorderedChildren(i),o.each(t,this.removeChildView,this),this.checkEmpty(),this.triggerMethod("reorder")}},resortView:_sortViews:_emptyViewIndex:-1,_appendReorderedChildren:_renderChildren:showCollection:_filteredSortedModels:function(e){var n=this.getViewComparator(),a=this.collection.models;if(e=Math.min(Math.max(e,0),a.length-1),n){var i;e&&(i=a[e],a=a.slice(0,e).concat(a.slice(e+1))),a=this._sortModelsBy(a,n),i&&a.splice(e,0,i)}return this.getOption("filter")&&(a=o.filter(a,this)),a},_sortModelsBy:showEmptyView:destroyEmptyView:getEmptyView:function(){return this.getOption("emptyView")},addEmptyView:getChildView:addChild:_updateIndices:_addChildView:renderChildView:buildChildView:function(e,n,a){var i=o.extend({model:e},a),r=new n(i);return t.MonitorDOMRefresh(r),r},removeChildView:isEmpty:checkEmpty:attachBuffer:_createBuffer:attachHtml:_insertBefore:function(e,n){var o,a=this.getOption("sort")&&n<this.children.length-1;return a&&(o=this.children.find(),!!o&&(o.$el.before(e.el),!0)},_insertAfter:_initChildViewStorage:destroy:destroyChildren:_shouldAddChild:proxyChildEvents:function(e){var n=this.getOption("childViewEventPrefix");this.listenTo(e,"all",function(){var a=o.toArray(arguments),i=a[0],t=this.normalizeMethods(o.result(this,"childEvents"));a[0]=n+":"+i,a.splice(1,0,e),"undefined"!=typeof t&&o.isFunction(t[i])&&t[i].apply(this,a.slice(1)),this.triggerMethod.apply(this,a)})},_getImmediateChildren:_getViewAndNested:getViewComparator:),t.CompositeView=t.CollectionView.extend({constructor:_initialEvents:getChildView:serializeData:render:_renderChildren:_renderTemplate:attachElContent:function(e){return this.$el.html(e),this},attachBuffer:_insertAfter:_appendReorderedChildren:getChildViewContainer:function(e,n){if(e.$childViewContainer)return e.$childViewContainer;var o,a=t.getOption(e,"childViewContainer");if(a){var i=t._getValue(a,e);if(o="@"===i.charAt(0)&&e.ui?e.ui[i.substr(4)]:e.$(i),o.length<=0)throw new t.Error({name:"ChildViewContainerMissingError",message:'The specified "childViewContainer" was not found: '+e.childViewContainer})}else o=e.$el;return e.$childViewContainer=o,o},resetChildViewContainer:),t.LayoutView=t.ItemView.extend({regionClass:t.Region,options:{destroyImmediate:!1},childViewEventPrefix:"childview",constructor:render:destroy:showChildView:getChildView:addRegion:addRegions:removeRegion:getRegion:function(e){return this.regionManager.get(e)},getRegions:function(){return this.regionManager.getRegions()},_buildRegions:_initializeRegions:_reInitializeRegions:function(){this.regionManager.invoke("reset")},getRegionManager:function(){return new t.RegionManager},_initRegionManager:_getImmediateChildren:),t.Behavior=t.Object.extend({constructor:$:function(){return this.view.$.apply(this.view,arguments)},destroy:proxyViewProperties:),t.Behaviors=function(e,n){ t=/^(\S+)\s*(.*)$/,r={behaviorTriggers:behaviorEvents:function(o,a){var r={};return n.each(a,function(o,a){var g={},d=n.clone(n.result(o,"events"))||{};d=e.normalizeUIKeys(d,i(o));var s=0;n.each(d,function(e,i){var r=i.match(t),d=r[1]+"."+[this.cid,a,s++," "].join(""),c=r[2],f=d+c,p=n.isFunction(e)?e:o[e];p&&(g[f]=n.bind(p,o))},this),r=n.extend(r,g)},this),r}};return n.extend(o,{behaviorsLookup:getBehaviorClass:parseBehaviors:wrap:),n.extend(a.prototype,{buildBehaviorTriggers:_buildTriggerHandlersForBehavior:_setHandlerForBehavior:),o}(t,o),t.AppRouter=n.Router.extend({constructor:appRoute:_processOnRoute:processAppRoutes:_getController:function(){return this.getOption("controller")},_addAppRoute:mergeOptions:t.mergeOptions,getOption:t.proxyGetOption,triggerMethod:t.triggerMethod,bindEntityEvents:t.proxyBindEntityEvents,unbindEntityEvents:t.proxyUnbindEntityEvents}),t.Application=t.Object.extend({constructor:execute:request:addInitializer:function(e){this._initCallbacks.add(e)},start:addRegions:function(e){return this._regionManager.addRegions(e)},emptyRegions:function(){return this._regionManager.emptyRegions()},removeRegion:function(e){return this._regionManager.removeRegion(e)},getRegion:function(e){return this._regionManager.get(e)},getRegions:function(){return this._regionManager.getRegions()},module:getRegionManager:_initializeRegions:_initRegionManager:_initChannel:),t.Module=t.Module.extend=t.extend,o.extend(t.Module.prototype,n.Events,{startWithParent:!0,initialize:function(){},addInitializer:function(e){this._initializerCallbacks.add(e)},addFinalizer:function(e){this._finalizerCallbacks.add(e)},start:stop:addDefinition:function(e,n){this._runModuleDefinition(e,n)},_runModuleDefinition:_setupInitializersAndFinalizers:triggerMethod:t.triggerMethod}),o.extend(t.Module,{create:_getModule:getClass:_addModuleDefinition:_getStartWithParent:_getDefine:_addStartWithParent:),t}),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define(["underscore","backbone"],n):(e.Backbone=e.Backbone||{},e.Backbone.Radio=n(e._,e.Backbone))}(this,function(e,n){"use strict";unction a(n,a,i,t){n||(n={});for(var r=a?[a]:e.keys(n),g=!1,d=0,s=r.length;d<s;d++)a=r[d],n[a]&&o(n,a,i,t)&&(g=!0);return g}"default"in e?e.default:e,n="default"in n?n.default:n;var r={};r.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?var g=n.Radio,d=n.Radio={};d.VERSION="1.0.4",d.noConflict=function(){return n.Radio=g,this},d.DEBUG=!1,d._debugText=d.debugLog=var s=/\s+/;d._eventsApi=function(n,o,a,i){if(!a)return!1;var t={};if("object"===("undefined"==typeof a?"undefined":r.typeof(a))){for(var g in a){var d=n[o].apply(n,[g,a[g]].concat(i));s.test(g)?e.extend(t,d):t[g]=d}return t}if(s.test(a)){for(var c=a.split(s),f=0,p=c.length;f<p;f++)t[c[f]]=n[o].apply(n,[c[f]].concat(i));return t}return!1},d._callHandler=var c={};e.extend(d,{log:function(n,o){if("undefined"!=typeof console){var a=e.drop(arguments,2);console.log("["+n+'] "'+o+'"',a)}},tuneIn:tuneOut:),d.Requests={request:function(n){var o=e.rest(arguments),a=d._eventsApi(this,"request",n,o);if(a)return a;var i=this.channelName,t=this._requests;if(i&&this._tunedIn&&d.log.apply(this,[i,n].concat(o)),t&&(t[n]||t.default)){var r=t[n]||t.default;return o=t[n]?o:arguments,d._callHandler(r.callback,r.context,o)}d.debugLog("An unhandled request was fired",n,i)},reply:replyOnce:stopReplying:,d._channels={},d.channel=d.Channel=function(e){this.channelName=e},e.extend(d.Channel.prototype,n.Events,d.Requests,{reset:);var f,p,u=[n.Events,d.Requests];return e.each(u,,d.reset=d}),function(e,n){"undefined"!=typeof exports?module.exports=n(require("jquery"),require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define(["jquery","underscore","backbone"],n):n(e.$,e._,e.Backbone)}(this,function(e,n,o){"use strict";var a,i=[];return o.NestedModel=o.Model.extend({get:function(e){return o.NestedModel.walkThenGet(this.attributes,e)},previous:has:function(e){var o=this.get(e);return!(null===o||n.isUndefined(o))},set:function(e,i,t){var r,g,d,s=o.NestedModel.deepClone(this.attributes);if(n.isString(e)?r=o.NestedModel.attrPath(e):n.isArray(e)&&(r=e),r)t=t||{},this._setAttr(s,r,i,t);else{t=i||{};var c=e;for(var f in c)c.hasOwnProperty(f)&&this._setAttr(s,o.NestedModel.attrPath(f),t.unset?void 0:c[f],t)}return a=o.NestedModel.__super__.changedAttributes.call(this),t.unset&&r&&1===r.length?(g={},g[e]=void 0,a=n.omit(a,n.keys(g)),d=o.NestedModel.__super__.set.call(this,g,t)):(g=s,t.unset&&r?(t=n.extend({},t),delete t.unset):t.unset&&n.isObject(e)&&(g=e),a=n.omit(a,n.keys(g)),d=o.NestedModel.__super__.set.call(this,g,t)),d?(this._runDelayedTriggers(),this):(this.changed={},a={},!1)},unset:function(e,o){return this.set(e,void 0,n.extend({},o,{unset:!0}))},clear:function(e){a={},e=e||{};var o=n.clone(this.attributes);if(!e.silent&&this.validate&&!this.validate(o,e))return!1;var i=this.changed={},t=this,r=function(e,o,a){n.each(e,function(g,d){var s=o;n.isArray(e)?s+="["+d+"]":o?s+="."+d:s=d,g=e[d],n.isObject(g)&&r(g,s,a),a.silent||t._delayedChange(s,null,a),i[s]=null})};return r(this.attributes,"",e),this.attributes={},e.silent||this._delayedTrigger("change"),this._runDelayedTriggers(),this},add:function(e,o,a){var i=this.get(e);if(!n.isArray(i))throw new Error("current value is not an array");return this.set(e+"["+i.length+"]",o,a)},remove:function(e,a){a=a||{};var i=o.NestedModel.attrPath(e),t=n.initial(i),r=this.get(t),g=n.last(i);if(!n.isArray(r))throw new Error("remove() must be called on a nested array");var d=!a.silent&&r.length>=g+1,s=r[g];if(r.splice(g,1),a.silent=!0,this.set(t,r,a),d){e=o.NestedModel.createAttrStr(t),this.trigger("remove:"+e,this,s);for(var c=t.length;c>=1;c--)e=o.NestedModel.createAttrStr(n.first(t,c)),this.trigger("change:"+e,this,s);this.trigger("change",this,s)}return this},changedAttributes:function(e){var i=o.NestedModel.__super__.changedAttributes.call(this,e);return!!n.isObject(i)&&n.extend({},a,i)},toJSON:_delayedTrigger:function(){i.push(arguments)},_delayedChange:function(e,n,o){this._delayedTrigger("change:"+e,this,n,o),this.changed||(this.changed={}),this.changed[e]=n},_runDelayedTriggers:function(){if(i.length>0){var e=this;i.forEach(,i=[]}},_setAttr:function(e,a,i,t){t=t||{};var r=a.length,g=this;o.NestedModel.walkPath(e,a,function(e,d,s){var c=n.last(d),f=o.NestedModel.createAttrStr(d),p=!n.isEqual(e[c],i);if(d.length===r){if(t.unset){if(delete e[c],n.isArray(e)){var u=o.NestedModel.createAttrStr(n.initial(a));g._delayedTrigger("remove:"+u,g,e[c])}}else e[c]=i;if(!t.silent&&n.isObject(i)&&p){var h=[],m=function(e,o){if(!(n.indexOf(h,e)>-1)){h.push(e);var a,i;for(var r in e)e.hasOwnProperty(r)&&(a=o+"."+r,i=e[r],n.isEqual(g.get(a),i)||g._delayedChange(a,i,t),n.isObject(i)&&m(i,a))}};m(i,f)}}else e[c]||(n.isNumber(s)?e[c]=[]:e[c]={});t.silent||(d.length>1&&p&&g._delayedChange(f,e[c],t),n.isArray(e[c])&&g._delayedTrigger("add:"+f,g,e[c]))})}},{attrPath:function(e){var o;return n.isString(e)?(o=""===e?[""]:e.match(/[^\.\[\]]+/g),o=n.map(o,function(e){return e.match(/^\d+$/)?parseInt(e,10):e})):o=e,o},createAttrStr:function(e){var o=e[0];return n.each(n.rest(e),function(e){o+=n.isNumber(e)?"["+e+"]":"."+e}),o},deepClone:walkPath:function(e,n,o,a){for(var i,t=e,r=0;r<n.length&&(o.call(a||this,t,n.slice(0,r+1),n[r+1]),i=n[r],t=t[i],t);r++);},walkThenGet:function(e,a){var i,t=o.NestedModel.attrPath(a);return o.NestedModel.walkPath(e,t,function(e,o){var a=n.last(o);o.length===t.length&&(i=e[a])}),i}}),o}),function(){var e=e.version="0.4.11",e.utils={extend:function(){for(var e="object"==typeof arguments[0]?arguments[0]:{},n=1;n<arguments.length;n++)if(arguments[n]&&"object"==typeof arguments[n])for(var o in arguments[n])e[o]=arguments[n][o];return e},each:function(e,n,o){if(this.isArray(e)){for(var a=0;a<e.length;a++)if(n.call(o,e[a],a)===!1)return}else if(e)for(var i in e)if(n.call(o,e[i],i)===!1)return},tryEach:function(e,n,o,a){this.each(e,function(e,i){try{return n.call(a,e,i)}catch(n){if(this.isFunction(o))try{o.call(a,e,i,n)}catch(e){}}},this)},registerPlugin:getTypeOf:function(e){return"undefined"==typeof e||null===e?""+e:Object.prototype.toString.call(e).replace(/^\[object\s(.*)\]$/,function(e,n){return n.toLowerCase()})}};for(var n=["Arguments","Boolean","Function","String","Array","Number","Date","RegExp","Undefined","Null"],o=0;o<n.length;o++)e.utils["is"+n[o]]=function(n){return function(o){return e.utils.getTypeOf(o)===n.toLowerCase()}}(n[o]);e.plugins={},e.options=e.utils.extend({namespace:"b45i1",storages:["local","cookie","session","memory"],expireDays:365,keyDelimiter:"."},window.Basil?window.Basil.options:{}),e.Storage=function(){var n="b45i1"+(Math.random()+1).toString(36).substring(7),o={},a=function(n){var o=e.utils.getTypeOf(n);return"string"===o&&n||"number"===o||"boolean"===o},i=t=function(n,o,i){var t="";return a(o)?t+=o:e.utils.isArray(o)&&(o=e.utils.isFunction(o.filter)?o.filter(a):o,t=o.join(i)),t&&a(n)?n+i+t:t},r=function(e,n,o){return a(e)?n.replace(new RegExp("^"+e+o),""):n},g=function(e){return JSON.stringify(e)},d=s={engine:null,check:set:get:remove:reset:keys:function(e,n){for(var o,a=[],i=0;i<window[this.engine].length;i++)o=window[this.engine].key(i),e&&0!==o.indexOf(e)||a.push(r(e,o,n));return a}};return o.local=e.utils.extend({},s,{engine:"localStorage"
}),o.session=e.utils.extend({},s,{engine:"sessionStorage"}),o.memory={_hash:{},check:function(){return!0},set:get:remove:function(e){delete this._hash[e]},reset:keys:function(e,n){var o=[];for(var a in this._hash)e&&0!==a.indexOf(e)||o.push(r(e,a,n));return o}},o.cookie={check:function(e){if(!navigator.cookieEnabled)return!1;if(window.self!==window.top){var o="thirdparty.check="+Math.round(1e3*Math.random());return document.cookie=o+"; path=/",document.cookie.indexOf(o)!==-1}if(e&&e.secure)try{this.set(n,n,e);var a=this.get(n)===n;return this.remove(n),a}catch(e){return!1}return!0},set:function(e,n,o){if(!this.check())throw Error("cookies are disabled");if(o=o||{},!e)throw Error("invalid key");var a=encodeURIComponent(e)+"="+encodeURIComponent(n);if(o.expireDays){var i=new Date;i.setTime(i.getTime()+24*o.expireDays*60*60*1e3),a+="; expires="+i.toGMTString()}if(o.domain&&o.domain!==document.domain){var t=o.domain.replace(/^\./,"");if(document.domain.indexOf(t)===-1||t.split(".").length<=1)throw Error("invalid domain");a+="; domain="+o.domain}o.sameSite&&["lax","strict","none"].includes(o.sameSite.toLowerCase())&&(a+="; SameSite="+o.sameSite),o.secure===!0&&(a+="; Secure"),document.cookie=a+"; path=/"},get:function(e){if(!this.check())throw Error("cookies are disabled");for(var n,o=encodeURIComponent(e),a=document.cookie?document.cookie.split(";"):[],i=a.length-1;i>=0;i--)if(n=a[i].replace(/^\s*/,""),0===n.indexOf(o+"="))return decodeURIComponent(n.substring(o.length+1,n.length));return null},remove:function(e){this.set(e,"",{expireDays:-1});for(var n=document.domain.split("."),o=n.length;o>1;o--)this.set(e,"",{expireDays:-1,domain:"."+n.slice(-o).join(".")})},reset:function(e){for(var n,o,a=document.cookie?document.cookie.split(";"):[],i=0;i<a.length;i++)n=a[i].replace(/^\s*/,""),o=n.substr(0,n.indexOf("=")),e&&0!==o.indexOf(e)||this.remove(o)},keys:function(e,n){if(!this.check())throw Error("cookies are disabled");for(var o,a,i=[],t=document.cookie?document.cookie.split(";"):[],g=0;g<t.length;g++)o=t[g].replace(/^\s*/,""),a=decodeURIComponent(o.substr(0,o.indexOf("="))),e&&0!==a.indexOf(e)||i.push(r(e,a,n));return i}},{init:setOptions:support:function(e){return o.hasOwnProperty(e)},check:function(e){return!!this.support(e)&&o[e].check(this.options)},set:function(n,a,r){if(r=e.utils.extend({},this.options,r),!(n=t(r.namespace,n,r.keyDelimiter)))return!1;a=r.raw===!0?a:g(a);var d=null;return e.utils.tryEach(i(r.storages),null,this),!!d&&(e.utils.tryEach(i(r.storages),null,this),!0)},get:function(n,a){if(a=e.utils.extend({},this.options,a),!(n=t(a.namespace,n,a.keyDelimiter)))return null;var r=null;return e.utils.tryEach(i(a.storages),function(e,i){return null===r&&(r=o[e].get(n,a)||null,void(r=a.raw===!0?r:d(r)))},this),r},remove:function(n,a){a=e.utils.extend({},this.options,a),(n=t(a.namespace,n,a.keyDelimiter))&&e.utils.tryEach(i(a.storages),null,this)},reset:keys:function(e){e=e||{};var n=[];for(var o in this.keysMap(e))n.push(o);return n},keysMap:function(n){n=e.utils.extend({},this.options,n);var a={};return e.utils.tryEach(i(n.storages),function(i){e.utils.each(o[i].keys(n.namespace,n.keyDelimiter),this)},null,this),a}}},e.memory=(new e.Storage).init({storages:"memory",namespace:null,raw:!0}),e.cookie=(new e.Storage).init({storages:"cookie",namespace:null,raw:!0}),e.localStorage=(new e.Storage).init({storages:"local",namespace:null,raw:!0}),e.sessionStorage=(new e.Storage).init({storages:"session",namespace:null,raw:!0}),window.Basil=e,"function"==typeof define&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports&&(module.exports=e)}(),function(){return {1:[{}],2:[{"./common":1}],3:[{}],4:[{}],5:[{}],6:[{}],7:[{}],8:[{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[{"../utils/common":1}],10:[{}],11:[{}],"/lib/inflate.js":[{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")}),this,function(){return function(e){"use strict";function n(){void 0===e.escapeMode&&(e.escapeMode=!0),e.attributePrefix=e.attributePrefix||"_",e.arrayAccessForm=e.arrayAccessForm||"none",e.emptyNodeForm=e.emptyNodeForm||"text",void 0===e.enableToStringFunc&&(e.enableToStringFunc=!0),e.arrayAccessFormPaths=e.arrayAccessFormPaths||[],void 0===e.skipEmptyTextNodesForObj&&(e.skipEmptyTextNodesForObj=!0),void 0===e.stripWhitespaces&&(e.stripWhitespaces=!0),e.datetimeAccessFormPaths=e.datetimeAccessFormPaths||[],void 0===e.useDoubleQuotes&&(e.useDoubleQuotes=!1),e.xmlElementsFilter=e.xmlElementsFilter||[],e.jsonPropertiesFilter=e.jsonPropertiesFilter||[],void 0===e.keepCData&&(e.keepCData=!1)}on d(e){var n=e.split(/[-T:+Z]/g),o=new Date(n[0],n[1]-1,n[2]),a=n[5].split(".");if(o.setHours(n[3],n[4],a[0]),a.length>1&&o.setMilliseconds(a[1]),n[6]&&n[7]){var i=60*n[6]+Number(n[7]),t=/\d\d-\d\d:\d\d$/.test(e)?"-":"+";i=0+("-"==t?-1*i:i),o.setMinutes(o.getMinutes()-i-o.getTimezoneOffset())}else e.indexOf("Z",e.length-1)!==-1&&(o=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds())));return o}nction f(n,o){if(n.nodeType==D.DOCUMENT_NODE){for(var t=new Object,r=n.childNodes,d=0;d<r.length;d++){var p=r.item(d);if(p.nodeType==D.ELEMENT_NODE){var u=a(p);t[u]=f(p,u)}}return t}if(n.nodeType==D.ELEMENT_NODE){var t=new Object;t.__cnt=0;for(var r=n.childNodes,d=0;d<r.length;d++){var p=r.item(d),u=a(p);if(p.nodeType!=D.COMMENT_NODE){var h=o+"."+u;c(t,p.nodeType,u,h)&&(t.__cnt++,null==t[u]?(t[u]=f(p,h),g(t,u,h)):(null!=t[u]&&(t[u]instanceof Array||(t[u]=[t[u]],g(t,u,h))),t[u][t[u].length]=f(p,h)))}}for(var m=0;m<n.attributes.length;m++){var b=n.attributes.item(m);t.__cnt++,t[e.attributePrefix+b.name]=b.value}var l=i(n);return null!=l&&""!=l&&(t.__cnt++,t.__prefix=l),null!=t["#text"]&&(t.__text=t["#text"],t.__text instanceof Array&&(t.__text=t.__text.join("\n")),e.stripWhitespaces&&(t.__text=t.__text.trim()),delete t["#text"],"property"==e.arrayAccessForm&&delete t["#text_asArray"],t.__text=s(t.__text,u,o+"."+u)),null!=t["#cdata-section"]&&(t.__cdata=t["#cdata-section"],delete t["#cdata-section"],"property"==e.arrayAccessForm&&delete t["#cdata-section_asArray"]),0==t.__cnt&&"text"==e.emptyNodeForm?t="":1==t.__cnt&&null!=t.__text?t=t.__text:1!=t.__cnt||null==t.__cdata||e.keepCData?t.__cnt>1&&null!=t.__text&&e.skipEmptyTextNodesForObj&&(e.stripWhitespaces&&""==t.__text||""==t.__text.trim())&&delete t.__text:t=t.__cdata,delete t.__cnt,!e.enableToStringFunc||null==t.__text&&null==t.__cdata||(t.toString=,t}if(n.nodeType==D.TEXT_NODE||n.nodeType==D.CDATA_SECTION_NODE)return n.nodeValue}function p(n,o,a,i){var r="<"+(null!=n&&null!=n.__prefix?n.__prefix+":":"")+o;if(null!=a)for(var g=0;g<a.length;g++){var d=a[g],s=n[d];e.escapeMode&&(s=t(s)),r+=" "+d.substr(e.attributePrefix.length)+"=",r+=e.useDoubleQuotes?'"'+s+'"':"'"+s+"'"}return r+=i?"/>":">"}ion w(n){var o=[];if(n instanceof Object)for(var a in n)a.toString().indexOf("__")==-1&&0==a.toString().indexOf(e.attributePrefix)&&o.push(a);return o}function P(n){var o="";return null!=n.__cdata&&(o+="<![CDATA["+n.__cdata+"]]>"),null!=n.__text&&(o+=e.escapeMode?t(n.__text):n.__text),o}function C(n){var o="";return n instanceof Object?o+=P(n):null!=n&&(o+=e.escapeMode?t(n):n),o}nction y(e,n){var o="",a=b(e);if(a>0)for(var i in e)if(!m(e,i)&&(""==n||l(e,i,_(n,i)))){var t=e[i],r=w(t);if(null==t||void 0==t)o+=p(t,i,r,!0);else if(t instanceof Object)if(t instanceof Array)o+=v(t,i,r,n);else if(t instanceof Date)o+=p(t,i,r,!1),o+=t.toISOString(),o+=u(t,i);else{var g=b(t);g>0||null!=t.__text||null!=t.__cdata?(o+=p(t,i,r,!1),o+=y(t,_(n,i)),o+=u(t,i)):o+=p(t,i,r,!0)}else o+=p(t,i,r,!1),o+=C(t),o+=u(t,i)}return o+=C(e)}var W="1.2.0";e=e||{},n(),o();var D={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(e){var n=window.ActiveXObject||"ActiveXObject"in window;if(void 0===e)return null;var o;if(window.DOMParser){var a=new window.DOMParser,i=null;if(!n)try{i=a.parseFromString("INVALID","text/xml").getElementsByTagName("parsererror")[0].namespaceURI}catch(e){i=null}try{o=a.parseFromString(e,"text/xml"),null!=i&&o.getElementsByTagNameNS(i,"parsererror").length>0&&(o=null)}catch(e){o=null}}else 0==e.indexOf("<?")&&(e=e.substr(e.indexOf("?>")+2)),o=new ActiveXObject("Microsoft.XMLDOM"),o.async="false",o.loadXML(e);return o},this.asArray=this.toXmlDateTime=this.asDateTime=this.xml2json=this.xml_str2json=this.json2xml_str=this.json2xml=this.getVersion=function(){return W}}}),!function(e){"use strict";var n,o={};o.VERSION="1.6.1";var a={},i=t=r=o.TRACE=r(1,"TRACE"),o.DEBUG=r(2,"DEBUG"),o.INFO=r(3,"INFO"),o.TIME=r(4,"TIME"),o.WARN=r(5,"WARN"),o.ERROR=r(8,"ERROR"),o.OFF=r(99,"OFF");var g=g.prototype={setLevel:getLevel:function(){return this.context.filterLevel},enabledFor:trace:function(){this.invoke(o.TRACE,arguments)},debug:function(){this.invoke(o.DEBUG,arguments)},info:function(){this.invoke(o.INFO,arguments)},warn:function(){this.invoke(o.WARN,arguments)},error:time:function(e){"string"==typeof e&&0<e.length&&this.invoke(o.TIME,[e,"start"])},timeEnd:invoke:;var d,s=new g({filterLevel:o.OFF});(d=o).enabledFor=i(s,s.enabledFor),d.trace=i(s,s.trace),d.debug=i(s,s.debug),d.time=i(s,s.time),d.timeEnd=i(s,s.timeEnd),d.info=i(s,s.info),d.warn=i(s,s.warn),d.error=i(s,s.error),d.log=d.info,o.setHandler=o.setLevel=o.getLevel=o.get=o.createDefaultHandler=o.useDefaults=o.setDefaults=o.useDefaults,"function"==typeof define&&define.amd?define(o):"undefined"!=typeof module&&module.exports?module.exports=o:(o._prevLogger=e.Logger,o.noConflict=e.Logger=o)}(this),function(){"use strict";ar n=navigator.userAgent.indexOf("Windows Phone")>=0,o=navigator.userAgent.indexOf("Android")>0&&!n,a=/iP(ad|hone|od)/.test(navigator.userAgent)&&!n,i=a&&/OS 4_\d(_\d)?/.test(navigator.userAgent),t=a&&/OS [6-7]_\d/.test(navigator.userAgent),r=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=e.prototype.needsFocus=e.prototype.sendClick=e.prototype.determineEventType=e.prototype.focus=e.prototype.updateScrollParent=e.prototype.getTargetElementFromEventTarget=e.prototype.onTouchStart=e.prototype.touchHasMoved=e.prototype.onTouchMove=e.prototype.findControl=e.prototype.onTouchEnd=e.prototype.onTouchCancel=e.prototype.onMouse=e.prototype.onClick=e.prototype.destroy=e.notNeeded=e.attach="function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),function(e,n,o,a){"use strict"; p(e,n,o){r(b(n),function(n){e.addEventListener(n,o,!1)})}e,this.evWin=Ne,this.pressed=!1,y.apply(this,arguments)}apply(this,arguments)}function ne(){ee.apply(this,arguments),this.pX=null,this.pY=null}function oe(){ee.apply(this,arguments)}unction ie(){ee.apply(this,arguments)},pe=["","webkit","Moz","MS","ms","o"],ue=n.createElement("div"),he="function",me=Math.round,be=Math.abs,le=Date.now;fe="function"!=typeof Object.assign?Object.assign;var we=g("extend","Use `assign`."),Pe=g(function(e,n){return we(e,n,!0)},"merge","Use `assign`."),Ce=1,_e=/mobile|tablet|ip(ad|hone|od)|android/i,ve="ontouchstart"in e,ye=C(e,"PointerEvent")!==a,We=ve&&_e.test(navigator.userAgent),De="touch",Ie="pen",Re="mouse",Se="kinect",xe=25,Be=1,Ee=2,Ge=4,Ke=8,Le=1,Te=2,Ue=4,je=8,ke=16,qe=Te|Ue,ze=je|ke,Ae=qe|ze,Fe=["x","y"],He=["clientX","clientY"];y.prototype={handler:function(){},init:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(v(this.element),this.evWin,this.domHandler)},destroy:;var Je={mousedown:Be,mousemove:Ee,mouseup:Ge},Me="mousedown",Ne="mousemove mouseup";d(j,y,{handler:);var Oe={pointerdown:Be,pointermove:Ee,pointerup:Ge,pointercancel:Ke,pointerout:Ke},Qe={2:De,3:Ie,4:Re,5:Se},Ve="pointerdown",Xe="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Ve="MSPointerDown",Xe="MSPointerMove MSPointerUp MSPointerCancel"),d(k,y,{handler:);var Ye={touchstart:Be,touchmove:Ee,touchend:Ge,touchcancel:Ke},Ze="touchstart",$e="touchstart touchmove touchend touchcancel";d(q,y,{handler:);var en={touchstart:Be,touchmove:Ee,touchend:Ge,touchcancel:Ke},nn="touchstart touchmove touchend touchcancel";d(A,y,{handler:);var on=2500,an=25;d(H,y,{handler:destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var tn=C(ue.style,"touchAction"),rn=tn!==a,gn="compute",dn="auto",sn="manipulation",cn="none",fn="pan-x",pn="pan-y",un=V();O.prototype={set:update:compute:preventDefaults:preventSrc:;var hn=1,mn=2,bn=4,ln=8,wn=ln,Pn=16,Cn=32;X.prototype={defaults:{},set:recognizeWith:dropRecognizeWith:requireFailure:dropRequireFailure:hasRequireFailures:canRecognizeWith:emit:tryEmit:canEmit:recognize:process:getTouchAction:function(){},reset:function(){}},d(ee,X,{defaults:{pointers:1},attrTest:process:),d(ne,ee,{defaults:{event:"pan",threshold:10,pointers:1,direction:Ae},getTouchAction:directionTest:attrTest:emit:),d(oe,ee,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[cn]},attrTest:emit:),d(ae,X,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[dn]},process:reset:function(){clearTimeout(this._timer)},emit:),d(ie,ee,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[cn]},attrTest:),d(te,ee,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:qe|ze,pointers:1},getTouchAction:attrTest:emit:),d(re,X,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:process:failTimeout:reset:emit:),ge.VERSION="2.0.7",ge.defaults={domEvents:!1,touchAction:gn,enable:!0,inputTarget:null,inputClass:null,preset:[[ie,{enable:!1}],[oe,{enable:!1},["rotate"]],[te,{direction:qe}],[ne,{direction:qe},["swipe"]],[re],[re,{event:"doubletap",taps:2},["tap"]],[ae]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var _n=1,vn=2;de.prototype={set:stop:recognize:get:add:remove:function(e){if(t(e,"remove",this))return this;if(e=this.get(e)){var n=this.recognizers,o=l(n,e);o!==-1&&(n.splice(o,1),this.touchAction.update())}return this},on:off:emit:destroy:,fe(ge,{INPUT_START:Be,INPUT_MOVE:Ee,INPUT_END:Ge,INPUT_CANCEL:Ke,STATE_POSSIBLE:hn,STATE_BEGAN:mn,STATE_CHANGED:bn,STATE_ENDED:ln,STATE_RECOGNIZED:wn,STATE_CANCELLED:Pn,STATE_FAILED:Cn,DIRECTION_NONE:Le,DIRECTION_LEFT:Te,DIRECTION_RIGHT:Ue,DIRECTION_UP:je,DIRECTION_DOWN:ke,DIRECTION_HORIZONTAL:qe,DIRECTION_VERTICAL:ze,DIRECTION_ALL:Ae,Manager:de,Input:y,TouchAction:O,TouchInput:A,MouseInput:j,PointerEventInput:k,TouchMouseInput:H,SingleTouchInput:q,Recognizer:X,AttrRecognizer:ee,Tap:re,Pan:ne,Swipe:te,Pinch:oe,Rotate:ie,Press:ae,on:p,off:u,each:r,merge:Pe,extend:we,assign:fe,inherit:d,bindFn:s,prefixed:C});var yn="undefined"!=typeof e?e:"undefined"!=typeof self?self:{};yn.Hammer=ge,"function"==typeof define&&define.amd?define(function(){return ge}):"undefined"!=typeof module&&module.exports?module.exports=ge:e[o]=ge}(window,document,"Hammer"),,function(e,n){"use strict";"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define([],n):e.buzz=n()}(this,function(){"use strict";var e=window.AudioContext||window.webkitAudioContext,n={defaults:{autoplay:!1,crossOrigin:null,duration:5e3,formats:[],loop:!1,placeholder:"--",preload:"metadata",volume:80,webAudioApi:!1,document:window.document},types:{mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",aac:"audio/aac",m4a:"audio/x-m4a"},sounds:[],el:document.createElement("audio"),getAudioContext:function(){if(void 0===this.audioCtx)try{this.audioCtx=e?new e:null}catch(e){this.audioCtx=null}return this.audioCtx},sound:function(e,o){function a(e){for(var n=[],o=e.length-1,a=0;a<=o;a++)n.push({start:e.start(a),end:e.end(a)});return n}=o||{};var t=o.document||n.defaults.document,r=0,g=[],d={},s=n.isSupported();if(this.load=function(){return s?(this.sound.load(),this):this},this.play=function(){return s?(this.sound.play().catch(function(){}),this):this},this.togglePlay=function(){return s?(this.sound.paused?this.sound.play().catch(:this.sound.pause(),this):this},this.pause=function(){return s?(this.sound.pause(),this):this},this.isPaused=function(){return s?this.sound.paused:null},this.stop=function(){return s?(this.sound.pause(),this.setTime(0),this):this},this.isEnded=function(){return s?this.sound.ended:null},this.loop=function(){return s?(this.sound.loop="loop",this.bind("ended.buzzloop",,this):this},this.unloop=function(){return s?(this.sound.removeAttribute("loop"),this.unbind("ended.buzzloop"),this):this},this.mute=function(){return s?(this.sound.muted=!0,this):this},this.unmute=function(){return s?(this.sound.muted=!1,this):this},this.toggleMute=function(){return s?(this.sound.muted=!this.sound.muted,this):this},this.isMuted=function(){return s?this.sound.muted:null},this.setVolume=function(e){return s?(e<0&&(e=0),e>100&&(e=100),this.volume=e,this.sound.volume=e/100,this):this},this.getVolume=function(){return s?this.volume:this},this.increaseVolume=function(e){return this.setVolume(this.volume+(e||1))},this.decreaseVolume=function(e){return this.setVolume(this.volume-(e||1))},this.setTime=function(e){if(!s)return this;var n=!0;return this.whenReady(function(){n===!0&&(n=!1,this.sound.currentTime=e)}),this},this.getTime=function(){if(!s)return null;var e=Math.round(100*this.sound.currentTime)/100;return isNaN(e)?n.defaults.placeholder:e},this.setPercent=function(e){return s?this.setTime(n.fromPercent(e,this.sound.duration)):this},this.getPercent=function(){if(!s)return null;var e=Math.round(n.toPercent(this.sound.currentTime,this.sound.duration));return isNaN(e)?n.defaults.placeholder:e},this.setSpeed=function(e){return s?(this.sound.playbackRate=e,this):this},this.getSpeed=function(){return s?this.sound.playbackRate:null},this.getDuration=function(){if(!s)return null;var e=Math.round(100*this.sound.duration)/100;return isNaN(e)?n.defaults.placeholder:e},this.getPlayed=function(){return s?a(this.sound.played):null},this.getBuffered=function(){return s?a(this.sound.buffered):null},this.getSeekable=function(){return s?a(this.sound.seekable):null},this.getErrorCode=function(){return s&&this.sound.error?this.sound.error.code:0},this.getErrorMessage=function(){if(!s)return null;switch(this.getErrorCode()){case 1:return"MEDIA_ERR_ABORTED";case 2:return"MEDIA_ERR_NETWORK";case 3:return"MEDIA_ERR_DECODE";case 4:return"MEDIA_ERR_SRC_NOT_SUPPORTED";default:return null}},this.getStateCode=function(){return s?this.sound.readyState:null},this.getStateMessage=function(){if(!s)return null;switch(this.getStateCode()){case 0:return"HAVE_NOTHING";case 1:return"HAVE_METADATA";case 2:return"HAVE_CURRENT_DATA";case 3:return"HAVE_FUTURE_DATA";case 4:return"HAVE_ENOUGH_DATA";default:return null}},this.getNetworkStateCode=function(){return s?this.sound.networkState:null},this.getNetworkStateMessage=function(){if(!s)return null;switch(this.getNetworkStateCode()){case 0:return"NETWORK_EMPTY";case 1:return"NETWORK_IDLE";case 2:return"NETWORK_LOADING";case 3:return"NETWORK_NO_SOURCE";default:return null}},this.set=this.get=function(e){return s?e?this.sound[e]:this.sound:null},this.bind=function(e,n){if(!s)return this;e=e.split(" ");for(var o=this,a=i=0;i<e.length;i++){var t=e[i],r=t;t=r.split(".")[0],g.push({idx:r,func:a}),this.sound.addEventListener(t,a,!0)}return this},this.unbind=function(e){if(!s)return this;e=e.split(" ");for(var n=0;n<e.length;n++)for(var o=e[n],a=o.split(".")[0],i=0;i<g.length;i++){var t=g[i].idx.split(".");(g[i].idx===o||t[1]&&t[1]===o.replace(".",""))&&(this.sound.removeEventListener(a,g[i].func,!0),g.splice(i,1))}return this},this.bindOnce=function(e,n){if(!s)return this;var o=this;return d[r++]=!1,this.bind(e+"."+r,function(){d[r]||(d[r]=!0,n.call(o)),o.unbind(e+"."+r)}),this},this.trigger=function(e,n){if(!s)return this;e=e.split(" ");for(var o=0;o<e.length;o++)for(var a=e[o],i=0;i<g.length;i++){var r=g[i].idx.split(".");if(g[i].idx===a||r[0]&&r[0]===a.replace(".","")){var d=t.createEvent("HTMLEvents");d.initEvent(r[0],!1,!0),d.originalEvent=n,this.sound.dispatchEvent(d)}}return this},this.fadeTo=function(e,o,a){function i(){clearTimeout(t),t=setTimeout(function(){r<e&&d.volume<e?(d.setVolume(d.volume+=1),i()):r>e&&d.volume>e?(d.setVolume(d.volume-=1),i()):a instanceof Function&&a.apply(d)},g)}if(!s)return this;o instanceof Function?(a=o,o=n.defaults.duration):o=o||n.defaults.duration;var t,r=this.volume,g=o/Math.abs(r-e),d=this;return this.play(),this.whenReady(,this},this.fadeIn=function(e,n){return s?this.setVolume(0).fadeTo(100,e,n):this},this.fadeOut=function(e,n){return s?this.fadeTo(0,e,n):this},this.fadeWith=function(e,n){return s?(this.fadeOut(n,,e.play().fadeIn(n),this):this},this.whenReady=function(e){if(!s)return null;var n=this;0===this.sound.readyState?this.bind("canplay.buzzwhenready",:e.call(n)},this.addSource=function(e){var o=this,a=t.createElement("source");return a.src=e,n.types[i(e)]&&(a.type=n.types[i(e)]),this.sound.appendChild(a),a.addEventListener("error",,a},s&&e){for(var c in n.defaults)n.defaults.hasOwnProperty(c)&&void 0===o[c]&&(o[c]=n.defaults[c]);if(this.sound=t.createElement("audio"),null!==o.crossOrigin&&(this.sound.crossOrigin=o.crossOrigin),o.webAudioApi){var f=n.getAudioContext();f&&(this.source=f.createMediaElementSource(this.sound),this.source.connect(f.destination))}if(e instanceof Array)for(var p in e)e.hasOwnProperty(p)&&this.addSource(e[p]);else if(o.formats.length)for(var u in o.formats)o.formats.hasOwnProperty(u)&&this.addSource(e+"."+o.formats[u]);else this.addSource(e);o.loop&&this.loop(),o.autoplay&&(this.sound.autoplay="autoplay"),o.preload===!0?this.sound.preload="auto":o.preload===!1?this.sound.preload="none":this.sound.preload=o.preload,this.setVolume(o.volume),n.sounds.push(this)}},group:function(e){function n(){for(var n=o(null,arguments),a=n.shift(),i=0;i<e.length;i++)e[i][a].apply(e[i],n)}function o(e,n){return e instanceof Array?e:Array.prototype.slice.call(n)}e=o(e,arguments),this.getSounds=this.add=function(n){n=o(n,arguments);for(var a=0;a<n.length;a++)e.push(n[a])},this.remove=function(n){n=o(n,arguments);for(var a=0;a<n.length;a++)for(var i=0;i<e.length;i++)if(e[i]===n[a]){e.splice(i,1);break}},this.load=function(){return n("load"),this},this.play=function(){return n("play"),this},this.togglePlay=function(){return n("togglePlay"),this},this.pause=function(e){return n("pause",e),this},this.stop=function(){return n("stop"),this},this.mute=function(){return n("mute"),this},this.unmute=function(){return n("unmute"),this},this.toggleMute=function(){return n("toggleMute"),this},this.setVolume=function(e){return n("setVolume",e),this},this.increaseVolume=function(e){return n("increaseVolume",e),this},this.decreaseVolume=function(e){return n("decreaseVolume",e),this},this.loop=function(){return n("loop"),this},this.unloop=this.setSpeed=function(e){return n("setSpeed",e),this},this.setTime=function(e){return n("setTime",e),this},this.set=function(e,o){return n("set",e,o),this},this.bind=function(e,o){return n("bind",e,o),this},this.unbind=function(e){return n("unbind",e),this},this.bindOnce=this.trigger=this.fade=function(e,o,a,i){return n("fade",e,o,a,i),this},this.fadeIn=function(e,o){return n("fadeIn",e,o),this},this.fadeOut=function(e,o){return n("fadeOut",e,o),this}},all:isSupported:isOGGSupported:function(){return!!n.el.canPlayType&&n.el.canPlayType('audio/ogg; codecs="vorbis"')},isWAVSupported:function(){return!!n.el.canPlayType&&n.el.canPlayType('audio/wav; codecs="1"')},isMP3Supported:function(){return!!n.el.canPlayType&&n.el.canPlayType("audio/mpeg;")},isAACSupported:function(){return!!n.el.canPlayType&&(n.el.canPlayType("audio/x-m4a;")||n.el.canPlayType("audio/aac;"))},toTimer:function(e,n){var o,a,i;return o=Math.floor(e/3600),o=isNaN(o)?"--":o>=10?o:"0"+o,a=n?Math.floor(e/60%60):Math.floor(e/60),a=isNaN(a)?"--":a>=10?a:"0"+a,i=Math.floor(e%60),i=isNaN(i)?"--":i>=10?i:"0"+i,n?o+":"+a+":"+i:a+":"+i},fromTimer:function(e){var n=e.toString().split(":");return n&&3===n.length&&(e=3600*parseInt(n[0],10)+60*parseInt(n[1],10)+parseInt(n[2],10)),n&&2===n.length&&(e=60*parseInt(n[0],10)+parseInt(n[1],10)),e},toPercent:function(e,n,o){var a=Math.pow(10,o||0);return Math.round(100*e/n*a)/a},fromPercent:function(e,n,o){var a=Math.pow(10,o||0);return Math.round(n/100*e*a)/a}};return n}),function(e,n,o){function a(e,n,o){return e.addEventListener?void e.addEventListener(n,o,!1):void e.attachEvent("on"+n,o)}ction g(e){return e.preventDefault?void e.preventDefault():void(e.returnValue=!1)}function d(e){return e.stopPropagation?void e.stopPropagation():void(e.cancelBubble=!0)}on m(e){nction f(e,n,o,a){w.stopCallback(n,n.target||n.srcElement,o,a)||e(n,o)===!1&&(g(n),d(n))}function p(e){"number"!=typeof e.which&&(e.which=e.keyCode);var n=i(e);if(n)return"keyup"==e.type&&_===n?void(_=!1):void w.handleKey(n,r(e),e)}unction b(e,n,a,t){e]=0;for(var d=0;d<n.length;++d){var s=d+1===n.length,c=s?g:r(t||u(n[d+1]).action);l(n[d],c,t,e,d)}}function l(e,n,o,a,i){w._directMap[e+":"+o]=n,e=e.replace(/\s+/g," ");var t,r=e.split(" ");return r.length>1?void b(e,r,n,o):(t=u(e,o),w._callbacks[t.key]=w._callbacks[t.key]||[],c(t.key,t.modifiers,{type:t.action},a,e,i),void w._callbacks[t.key][a?"unshift":"push"]({callback:n,modifiers:t.modifiers,action:t.action,seq:a,level:i,combo:e}))}var w=this;if(e=e||n,!(w instanceof m))return new m(e);w.target=e,w._callbacks={},w._directMap={};var P,C={},_=!1,v=!1,y=!1;w._handleKey=w._bindMultiple=a(e,"keypress",p),a(e,"keydown",p),a(e,"keyup",p)}if(e){for(var b,l={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},w={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},P={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},C={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},_=1;_<20;++_)l[111+_]="f"+_;for(_=0;_<=9;++_)l[_+96]=_.toString();m.prototype.bind=m.prototype.unbind=m.prototype.trigger=m.prototype.reset=m.prototype.stopCallback=function(e,n){var o=this;if((" "+n.className+" ").indexOf(" mousetrap ")>-1)return!1;if(h(n,o.target))return!1;if("composedPath"in e&&"function"==typeof e.composedPath){var a=e.composedPath()[0];a!==e.target&&(n=a)}return"INPUT"==n.tagName||"SELECT"==n.tagName||"TEXTAREA"==n.tagName||n.isContentEditable},m.prototype.handleKey=m.addKeycodes=m.init=m.init(),e.Mousetrap=m,"undefined"!=typeof module&&module.exports&&(module.exports=m),"function"==typeof define&&define.amd&&define(function(){return m})}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null),function(){"use strict";var e="undefined"!=typeof module&&module.exports,n="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,o=function(){for(var e,n,o=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=0,i=o.length,t={};a<i;a++)if(e=o[a],e&&e[1]in document){for(a=0,n=e.length;a<n;a++)t[o[0][a]]=e[a];return t}return!1}(),a={request:exit:toggle:raw:o};return o?(Object.defineProperties(a,{isFullscreen:{get:function(){return Boolean(document[o.fullscreenElement])}},element:{enumerable:!0,get:,enabled:{enumerable:!0,get:}),void(e?module.exports=a:window.screenfull=a)):void(e?module.exports=!1:window.screenfull=!1)}(),function(e){"use strict";f(!e.jQuery){var o=o.isWindow=o.type=o.isArray=Array.isArray||function(e){return"array"===o.type(e)},o.isPlainObject=o.each=function(e,o,a){var i,t=0,r=e.length,g=n(e);if(a){if(g)for(;t<r&&(i=o.apply(e[t],a),i!==!1);t++);else for(t in e)if(e.hasOwnProperty(t)&&(i=o.apply(e[t],a),i===!1))break}else if(g)for(;t<r&&(i=o.call(e[t],t,e[t]),i!==!1);t++);else for(t in e)if(e.hasOwnProperty(t)&&(i=o.call(e[t],t,e[t]),i===!1))break;return e},o.data=o.removeData=o.extend=o.queue=function(e,a,i){function t(e,o){var a=o||[];return e&&(n(Object(e))?!a,"string"==typeof e?[e]:e):[].push.call(a,e)),a}if(e){a=(a||"fx")+"queue";var r=o.data(e,a);return i?(!r||o.isArray(i)?r=o.data(e,a,t(i)):r.push(i),r):r||[]}},o.dequeue=o.fn=o.prototype={init:offset:position:function(){function e(e){for(var n=e.offsetParent;n&&"html"!==n.nodeName.toLowerCase()&&n.style&&"static"===n.style.position.toLowerCase();)n=n.offsetParent;return n||document}var n=this[0],a=e(n),i=this.offset(),t=/^(?:body|html)$/i.test(a.nodeName)?{top:0,left:0}:o(a).offset();return i.top-=parseFloat(n.style.marginTop)||0,i.left-=parseFloat(n.style.marginLeft)||0,a.style&&(t.top+=parseFloat(a.style.borderTopWidth)||0,t.left+=parseFloat(a.style.borderLeftWidth)||0),{top:i.top-t.top,left:i.left-t.left}}};var a={};o.expando="velocity"+(new Date).getTime(),o.uuid=0;for(var i={},t=i.hasOwnProperty,r=i.toString,g="Boolean Number String Function Array Date RegExp Object Error".split(" "),d=0;d<g.length;d++)i["[object "+g[d]+"]"]=g[d].toLowerCase();o.fn.init.prototype=o.fn,e.Velocity={Utilities:o}}}(window),function(){"use strict";return function(e,n,o,a){on c(e,o,a,i){ion c(n,o){for(var i=0;i<m;++i){var t=s(o,e,a);if(0===t)return o;var r=d(o,e,a)-n;o-=r/t}return o}m=4,b=.001,l=1e-7,w=10,P=11,C=1/(P-1),_="Float32Array"in n;if(4!==arguments.length)return!1;for(var v=0;v<4;++v)if("number"!=typeof arguments[v]||isNaN(arguments[v])||!isFinite(arguments[v]))return!1;e=Math.min(e,1),a=Math.min(a,1),e=Math.max(e,0),a=Math.max(a,0);var y=_?new Float32Array(P):new Array(P),W=!1,D=D.getControlPoints=var I="generateBezier("+[e,o,a,i]+")";return D.toString=function(){return I},D}unction p(e){if(e){var n=W.timestamp&&e!==!0?e:l.now(),o=W.State.calls.length;o>1e4&&(W.State.calls=i(W.State.calls),o=W.State.calls.length);for(var t=0;t<o;t++)if(W.State.calls[t]){var g=W.State.calls[t],d=g[0],s=g[2],c=g[3],f=!c,b=null,w=g[5],P=g[6];if(c||(c=W.State.calls[t][3]=n-16),w){if(w.resume!==!0)continue;c=g[3]=Math.round(n-P-16),g[5]=null}P=g[6]=n-c;for(var _=Math.min(P/s.duration,1),v=0,y=d.length;v<y;v++){var D=d[v],R=D.element;if(r(R)){var x=!1;if(s.display!==a&&null!==s.display&&"none"!==s.display){if("flex"===s.display){var B=["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex"];h.each(B,}I.setPropertyValue(R,"display",s.display)}s.visibility!==a&&"hidden"!==s.visibility&&I.setPropertyValue(R,"visibility",s.visibility);for(var E in D)if(D.hasOwnProperty(E)&&"element"!==E){var G,K=D[E],L=C.isString(K.easing)?W.Easings[K.easing]:K.easing;if(C.isString(K.pattern)){var T=1===_?G=K.pattern.replace(/{(\d+)(!)?}/g,T)}else if(1===_)G=K.endValue;else{var U=K.endValue-K.startValue;G=K.startValue+U*L(_,s,U)}if(!f&&G===K.currentValue)continue;if(K.currentValue=G,"tween"===E)b=G;else{var j;if(I.Hooks.registered[E]){j=I.Hooks.getRoot(E);var k=r(R).rootPropertyValueCache[j];k&&(K.rootPropertyValue=k)}var q=I.setPropertyValue(R,E,K.currentValue+(m<9&&0===parseFloat(G)?"":K.unitType),K.rootPropertyValue,K.scrollData);I.Hooks.registered[E]&&(I.Normalizations.registered[j]?r(R).rootPropertyValueCache[j]=I.Normalizations.registered[j]("extract",null,q[1]):r(R).rootPropertyValueCache[j]=q[1]),"transform"===q[0]&&(x=!0)}}s.mobileHA&&r(R).transformCache.translate3d===a&&(r(R).transformCache.translate3d="(0px, 0px, 0px)",x=!0),x&&I.flushTransformCache(R)}}s.display!==a&&"none"!==s.display&&(W.State.calls[t][2].display=!1),s.visibility!==a&&"hidden"!==s.visibility&&(W.State.calls[t][2].visibility=!1),s.progress&&s.progress.call(g[1],g[1],_,Math.max(0,c+s.duration-n),c,b),1===_&&u(t)}}W.State.isTicking&&S(p)}function u(e,n){if(!W.State.calls[e])return!1;for(var o=W.State.calls[e][0],i=W.State.calls[e][1],t=W.State.calls[e][2],g=W.State.calls[e][4],d=!1,s=0,c=o.length;s<c;s++){var f=o[s].element;n||t.loop||("none"===t.display&&I.setPropertyValue(f,"display",t.display),"hidden"===t.visibility&&I.setPropertyValue(f,"visibility",t.visibility));var p=r(f);if(t.loop!==!0&&(h.queue(f)[1]===a||!/\.velocityQueueEntryFlag/i.test(h.queue(f)[1]))&&p){p.isAnimating=!1,p.rootPropertyValueCache={};var u=!1;h.each(I.Lists.transforms3D,,t.mobileHA&&(u=!0,delete p.transformCache.translate3d),u&&I.flushTransformCache(f),I.Values.removeClass(f,"velocity-animating")}if(!n&&t.complete&&!t.loop&&s===c-1)try{t.complete.call(i,i)}catch(e){setTimeout(function(){throw e},1)}g&&t.loop!==!0&&g(i),p&&t.loop===!0&&!n&&(h.each(p.tweensContainer,,W(f,"reverse",{loop:!0,delay:t.delay})),t.queue!==!1&&h.dequeue(f,t.queue)}W.State.calls[e]=!1;for(var m=0,b=W.State.calls.length;m<b;m++)if(W.State.calls[m]!==!1){d=!0;break}d===!1&&(W.State.isTicking=!1,delete W.State.calls,W.State.calls=[])}var h,m=),b=),l=),w=),P=C={isNumber:function(e){return"number"==typeof e},isString:isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:isNode:isWrapped:isSVG:isEmptyObject:,_=!1;if(e.fn&&e.fn.jquery?(h=e,_=!0):h=n.Velocity.Utilities,m<=8&&!_)throw new Error("Velocity: IE8 and below require jQuery to be loaded before Velocity.");if(m<=7)return void(jQuery.fn.velocity=jQuery.fn.animate);var v=400,y="swing",W={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(n.navigator.userAgent),isAndroid:/Android/i.test(n.navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(n.navigator.userAgent),isChrome:n.chrome,isFirefox:/Firefox/i.test(n.navigator.userAgent),prefixElement:o.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[],delayedElements:{count:0}},CSS:{},Utilities:h,Redirects:{},Easings:{},Promise:n.Promise,defaults:{queue:"",duration:v,easing:y,begin:a,complete:a,progress:a,display:a,visibility:a,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0,promiseRejectEmpty:!0},init:hook:null,mock:!1,version:{major:1,minor:5,patch:2},debug:!1,timestamp:!0,pauseAll:resumeAll:;n.pageYOffset!==a?(W.State.scrollAnchor=n,W.State.scrollPropertyLeft="pageXOffset",W.State.scrollPropertyTop="pageYOffset"):(W.State.scrollAnchor=o.documentElement||o.body.parentNode||o.body,W.State.scrollPropertyLeft="scrollLeft",W.State.scrollPropertyTop="scrollTop");var D=);W.Easings={linear:function(e){return e},swing:spring:,h.each([["ease",[.25,.1,.25,1]],["ease-in",[.42,0,1,1]],["ease-out",[0,0,.58,1]],["ease-in-out",[.42,0,.58,1]],["easeInSine",[.47,0,.745,.715]],["easeOutSine",[.39,.575,.565,1]],["easeInOutSine",[.445,.05,.55,.95]],["easeInQuad",[.55,.085,.68,.53]],["easeOutQuad",[.25,.46,.45,.94]],["easeInOutQuad",[.455,.03,.515,.955]],["easeInCubic",[.55,.055,.675,.19]],["easeOutCubic",[.215,.61,.355,1]],["easeInOutCubic",[.645,.045,.355,1]],["easeInQuart",[.895,.03,.685,.22]],["easeOutQuart",[.165,.84,.44,1]],["easeInOutQuart",[.77,0,.175,1]],["easeInQuint",[.755,.05,.855,.06]],["easeOutQuint",[.23,1,.32,1]],["easeInOutQuint",[.86,0,.07,1]],["easeInExpo",[.95,.05,.795,.035]],["easeOutExpo",[.19,1,.22,1]],["easeInOutExpo",[1,0,0,1]],["easeInCirc",[.6,.04,.98,.335]],["easeOutCirc",[.075,.82,.165,1]],["easeInOutCirc",[.785,.135,.15,.86]]],;var I=W.CSS={RegEx:{isHex:/^#([A-f\d]{3}){1,2}$/i,valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Lists:{colors:["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],transformsBase:["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"],transforms3D:["transformPerspective","translateZ","scaleZ","rotateX","rotateY"],units:["%","em","ex","ch","rem","vw","vh","vmin","vmax","cm","mm","Q","in","pc","pt","px","deg","grad","rad","turn","s","ms"],colorNames:{aliceblue:"240,248,255",antiquewhite:"250,235,215",aquamarine:"127,255,212",aqua:"0,255,255",azure:"240,255,255",beige:"245,245,220",bisque:"255,228,196",black:"0,0,0",blanchedalmond:"255,235,205",blueviolet:"138,43,226",blue:"0,0,255",brown:"165,42,42",burlywood:"222,184,135",cadetblue:"95,158,160",chartreuse:"127,255,0",chocolate:"210,105,30",coral:"255,127,80",cornflowerblue:"100,149,237",cornsilk:"255,248,220",crimson:"220,20,60",cyan:"0,255,255",darkblue:"0,0,139",darkcyan:"0,139,139",darkgoldenrod:"184,134,11",darkgray:"169,169,169",darkgrey:"169,169,169",darkgreen:"0,100,0",darkkhaki:"189,183,107",darkmagenta:"139,0,139",darkolivegreen:"85,107,47",darkorange:"255,140,0",darkorchid:"153,50,204",darkred:"139,0,0",darksalmon:"233,150,122",darkseagreen:"143,188,143",darkslateblue:"72,61,139",darkslategray:"47,79,79",darkturquoise:"0,206,209",darkviolet:"148,0,211",deeppink:"255,20,147",deepskyblue:"0,191,255",dimgray:"105,105,105",dimgrey:"105,105,105",dodgerblue:"30,144,255",firebrick:"178,34,34",floralwhite:"255,250,240",forestgreen:"34,139,34",fuchsia:"255,0,255",gainsboro:"220,220,220",ghostwhite:"248,248,255",gold:"255,215,0",goldenrod:"218,165,32",gray:"128,128,128",grey:"128,128,128",greenyellow:"173,255,47",green:"0,128,0",honeydew:"240,255,240",hotpink:"255,105,180",indianred:"205,92,92",indigo:"75,0,130",ivory:"255,255,240",khaki:"240,230,140",lavenderblush:"255,240,245",lavender:"230,230,250",lawngreen:"124,252,0",lemonchiffon:"255,250,205",lightblue:"173,216,230",lightcoral:"240,128,128",lightcyan:"224,255,255",lightgoldenrodyellow:"250,250,210",lightgray:"211,211,211",lightgrey:"211,211,211",lightgreen:"144,238,144",lightpink:"255,182,193",lightsalmon:"255,160,122",lightseagreen:"32,178,170",lightskyblue:"135,206,250",lightslategray:"119,136,153",lightsteelblue:"176,196,222",lightyellow:"255,255,224",limegreen:"50,205,50",lime:"0,255,0",linen:"250,240,230",magenta:"255,0,255",maroon:"128,0,0",mediumaquamarine:"102,205,170",mediumblue:"0,0,205",mediumorchid:"186,85,211",mediumpurple:"147,112,219",mediumseagreen:"60,179,113",mediumslateblue:"123,104,238",mediumspringgreen:"0,250,154",mediumturquoise:"72,209,204",mediumvioletred:"199,21,133",midnightblue:"25,25,112",mintcream:"245,255,250",mistyrose:"255,228,225",moccasin:"255,228,181",navajowhite:"255,222,173",navy:"0,0,128",oldlace:"253,245,230",olivedrab:"107,142,35",olive:"128,128,0",orangered:"255,69,0",orange:"255,165,0",orchid:"218,112,214",palegoldenrod:"238,232,170",palegreen:"152,251,152",paleturquoise:"175,238,238",palevioletred:"219,112,147",papayawhip:"255,239,213",peachpuff:"255,218,185",peru:"205,133,63",pink:"255,192,203",plum:"221,160,221",powderblue:"176,224,230",purple:"128,0,128",red:"255,0,0",rosybrown:"188,143,143",royalblue:"65,105,225",saddlebrown:"139,69,19",salmon:"250,128,114",sandybrown:"244,164,96",seagreen:"46,139,87",seashell:"255,245,238",sienna:"160,82,45",silver:"192,192,192",skyblue:"135,206,235",slateblue:"106,90,205",slategray:"112,128,144",snow:"255,250,250",springgreen:"0,255,127",steelblue:"70,130,180",tan:"210,180,140",teal:"0,128,128",thistle:"216,191,216",tomato:"255,99,71",turquoise:"64,224,208",violet:"238,130,238",wheat:"245,222,179",whitesmoke:"245,245,245",white:"255,255,255",yellowgreen:"154,205,50",yellow:"255,255,0"}},Hooks:{templates:{textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:getRoot:getUnit:fixColors:cleanRootPropertyValue:extractValue:injectValue:,Normalizations:{registered:{clip:blur:opacity:,register:function(){function e(e,n,o){var a="border-box"===I.getPropertyValue(n,"boxSizing").toString().toLowerCase();if(a===(o||!1)){var i,t,r=0,g="width"===e?["Left","Right"]:["Top","Bottom"],d=["padding"+g[0],"padding"+g[1],"border"+g[0]+"Width","border"+g[1]+"Width"];for(i=0;i<d.length;i++)t=parseFloat(I.getPropertyValue(n,d[i])),isNaN(t)||(r+=t);return o?-r:r}return 0}&&!(m>9)||W.State.isGingerbread||(I.Lists.transformsBase=I.Lists.transformsBase.concat(I.Lists.transforms3D));for(var o=0;o<I.Lists.transformsBase.length;o++)!);for(var i=0;i<I.Lists.colors.length;i++)!);I.Normalizations.registered.innerWidth=n("width",!0),I.Normalizations.registered.innerHeight=n("height",!0),I.Normalizations.registered.outerWidth=n("width"),I.Normalizations.registered.outerHeight=n("height")}},Names:{camelCase:SVGAttribute:prefixCheck:,Values:{hexToRgb:isCSSNullValue:getUnitType:getDisplayType:addClass:removeClass:,getPropertyValue:setPropertyValue:flushTransformCache:function(e){var n="",o=r(e);if((m||W.State.isAndroid&&!W.State.isChrome)&&o&&o.isSVG){var a=i={translate:[a("translateX"),a("translateY")],skewX:[a("skewX")],skewY:[a("skewY")],scale:1!==a("scale")?[a("scale"),a("scale")]:[a("scaleX"),a("scaleY")],rotate:[a("rotateZ"),0,0]};h.each(r(e).transformCache,}else{var t,g;h.each(r(e).transformCache,,g&&(n="perspective"+g+" "+n)}I.setPropertyValue(e,"transform",n)}};I.Hooks.register(),I.Normalizations.register(),W.hook=var R=function(){unction i(e,i){function t(t){var c,u;if(d.begin&&0===x)try{d.begin.call(l,l)}catch(e){setTimeout(1)}if("scroll"===G){var m,b,v,y=/^x$/i.test(d.axis)?"Left":"Top",R=parseFloat(d.offset)||0;d.container?C.isWrapped(d.container)||C.isNode(d.container)?(d.container=d.container[0]||d.container,m=d.container["scroll"+y],v=m+h(e).position()[y.toLowerCase()]+R):d.container=null:(m=W.State.scrollAnchor[W.State["scrollProperty"+y]],b=W.State.scrollAnchor[W.State["scrollProperty"+("Left"===y?"Top":"Left")]],v=h(e).offset()[y.toLowerCase()]+R),s={scroll:{rootPropertyValue:!1,startValue:m,currentValue:m,endValue:v,unitType:"",easing:d.easing,scrollData:{container:d.container,direction:y,alternateValue:b}},element:e},W.debug&&console.log("tweensContainer (scroll): ",s.scroll,e)}else if("reverse"===G){if(c=r(e),!c)return;if(!c.tweensContainer)return void h.dequeue(e,d.queue);"none"===c.opts.display&&(c.opts.display="auto"),"hidden"===c.opts.visibility&&(c.opts.visibility="visible"),c.opts.loop=!1,c.opts.begin=null,c.opts.complete=null,_.easing||delete d.easing,_.duration||delete d.duration,d=h.extend({},c.opts,d),u=h.extend(!0,{},c?c.tweensContainer:null);for(var B in u)if(u.hasOwnProperty(B)&&"element"!==B){var E=u[B].startValue;u[B].startValue=u[B].currentValue=u[B].endValue,u[B].endValue=E,C.isEmptyObject(_)||(u[B].easing=d.easing),W.debug&&console.log("reverse tweensContainer ("+B+"): "+JSON.stringify(u[B]),e)}s=u}else if("start"===G){c=r(e),c&&c.tweensContainer&&c.isAnimating===!0&&(u=c.tweensContainer);var K=L=function(i,t){var r,f=I.Hooks.getRoot(i),p=!1,m=t[0],b=t[1],l=t[2];if(!(c&&c.isSVG||"tween"===f||I.Names.prefixCheck(f)[1]!==!1||I.Normalizations.registered[f]!==a))return void(W.debug&&console.log("Skipping ["+f+"] due to a lack of browser support."));(d.display!==a&&null!==d.display&&"none"!==d.display||d.visibility!==a&&"hidden"!==d.visibility)&&/opacity|filter/.test(i)&&!l&&0!==m&&(l=0),d._cacheValues&&u&&u[i]?(l===a&&(l=u[i].endValue+u[i].unitType),p=c.rootPropertyValueCache[f]):I.Hooks.registered[i]?l===a?(p=I.getPropertyValue(e,f),l=I.getPropertyValue(e,i,p)):p=I.Hooks.templates[f][1]:l===a&&(l=I.getPropertyValue(e,i));var w,P,_,v=!1,y=if(l!==m&&C.isString(l)&&C.isString(m)){r="";var D=0,R=0,S=[],x=[],B=0,E=0,G=0;for(l=I.Hooks.fixColors(l),m=I.Hooks.fixColors(m);D<l.length&&R<m.length;){var K=l[D],L=m[R];if(/[\d\.-]/.test(K)&&/[\d\.-]/.test(L)){for(var T=K,U=L,j=".",q=".";++D<l.length;){if(K=l[D],K===j)j="..";else if(!/\d/.test(K))break;T+=K}for(;++R<m.length;){if(L=m[R],L===q)q="..";else if(!/\d/.test(L))break;U+=L}var z=I.Hooks.getUnit(l,D),A=I.Hooks.getUnit(m,R);if(D+=z.length,R+=A.length,z===A)T===U?r+=T+z:(r+="{"+S.length+(E?"!":"")+"}"+z,S.push(parseFloat(T)),x.push(parseFloat(U)));else{var F=parseFloat(T),H=parseFloat(U);r+=(B<5?"calc":"")+"("+(F?"{"+S.length+(E?"!":"")+"}":"0")+z+" + "+(H?"{"+(S.length+(F?1:0))+(E?"!":"")+"}":"0")+A+")",F&&(S.push(F),x.push(0)),H&&(S.push(0),x.push(H))}}else{if(K!==L){B=0;break}r+=K,D++,R++,0===B&&"c"===K||1===B&&"a"===K||2===B&&"l"===K||3===B&&"c"===K||B>=4&&"("===K?B++:(B&&B<5||B>=4&&")"===K&&--B<5)&&(B=0),0===E&&"r"===K||1===E&&"g"===K||2===E&&"b"===K||3===E&&"a"===K||E>=3&&"("===K?(3===E&&"a"===K&&(G=1),E++):G&&","===K?++G>3&&(E=G=0):(G&&E<(G?5:4)||E>=(G?4:3)&&")"===K&&--E<(G?5:4))&&(E=G=0)}}D===l.length&&R===m.length||(W.debug&&console.error('Trying to pattern match mis-matched strings ["'+m+'", "'+l+'"]'),r=a),r&&(S.length?(W.debug&&console.log('Pattern found "'+r+'" -> ',S,x,"["+l+","+m+"]"),l=S,m=x,P=_=""):r=a)}r||(w=y(i,l),l=w[0],_=w[1],w=y(i,m),m=w[0].replace(/^([+-\/*])=/,,P=w[1],l=parseFloat(l)||0,m=parseFloat(m)||0,"%"===P&&(/^(fontSize|lineHeight)$/.test(i)?(m/=100,P="em"):/^scale/.test(i)?(m/=100,P=""):/(Red|Green|Blue)$/i.test(i)&&(m=m/100*255,P="")));var J=if(/[\/*]/.test(v))P=_;else if(_!==P&&0!==l)if(0===m)P=_;else{g=g||J();var M=/margin|padding|left|right|width|text|word|letter/i.test(i)||/X$/.test(i)||"x"===i?"x":"y";switch(_){case"%":l*="x"===M?g.percentToPxWidth:g.percentToPxHeight;break;case"px":break;default:l*=g[_+"ToPx"]}switch(P){case"%":l*=1/("x"===M?g.percentToPxWidth:g.percentToPxHeight);break;case"px":break;default:l*=1/g[P+"ToPx"]}}switch(v){case"+":m=l+m;break;case"-":m=l-m;break;case"*":m=l*m;break;case"/":m=l/m}s[i]={rootPropertyValue:p,startValue:l,currentValue:l,endValue:m,unitType:P,easing:b},r&&(s[i].pattern=r),W.debug&&console.log("tweensContainer ("+i+"): "+JSON.stringify(s[i]),e)};for(var T in w)if(w.hasOwnProperty(T)){var U=I.Names.camelCase(T),j=K(w[T]);if(P(I.Lists.colors,U)){var z=j[0],A=j[1],F=j[2];if(I.RegEx.isHex.test(z)){for(var H=["Red","Green","Blue"],J=I.Values.hexToRgb(z),M=F?I.Values.hexToRgb(F):a,N=0;N<H.length;N++){var O=[J[N]];A&&O.push(A),M!==a&&O.push(M[N]),L(U+H[N],O)}continue}}L(U,j)}s.element=e}s.element&&(I.Values.addClass(e,"velocity-animating"),q.push(s),c=r(e),c&&(""===d.queue&&(c.tweensContainer=s,c.opts=d),c.isAnimating=!0),x===S-1?(W.State.calls.push([q,l,d,null,D.resolver,null,0]),W.State.isTicking===!1&&(W.State.isTicking=!0,p())):x++)}var g,d=h.extend({},W.defaults,_),s={};switch(r(e)===a&&W.init(e),parseFloat(d.delay)&&d.queue!==!1&&h.queue(e,d.queue,function(n,o){if(o===!0)return!0;W.velocityQueueEntryFlag=!0;var a=W.State.delayedElements.count++;W.State.delayedElements[a]=e;var i=function(e){return function(){W.State.delayedElements[e]=!1,n()}}(a);r(e).delayBegin=(new Date).getTime(),r(e).delay=parseFloat(d.delay),r(e).delayTimer={setTimeout:setTimeout(n,parseFloat(d.delay)),next:i}}),d.duration.toString().toLowerCase()){case"fast":d.duration=200;break;case"normal":d.duration=v;break;case"slow":d.duration=600;break;default:d.duration=parseFloat(d.duration)||1}if(W.mock!==!1&&(W.mock===!0?d.duration=d.delay=1:(d.duration*=parseFloat(W.mock)||1,d.delay*=parseFloat(W.mock)||1)),d.easing=f(d.easing,d.duration),d.begin&&!C.isFunction(d.begin)&&(d.begin=null),d.progress&&!C.isFunction(d.progress)&&(d.progress=null),d.complete&&!C.isFunction(d.complete)&&(d.complete=null),d.display!==a&&null!==d.display&&(d.display=d.display.toString().toLowerCase(),"auto"===d.display&&(d.display=W.CSS.Values.getDisplayType(e))),d.visibility!==a&&null!==d.visibility&&(d.visibility=d.visibility.toString().toLowerCase()),d.mobileHA=d.mobileHA&&W.State.isMobile&&!W.State.isGingerbread,d.queue===!1)if(d.delay){var c=W.State.delayedElements.count++;W.State.delayedElements[c]=e;var u=c);r(e).delayBegin=(new Date).getTime(),r(e).delay=parseFloat(d.delay),r(e).delayTimer={setTimeout:setTimeout(t,parseFloat(d.delay)),next:u}}else t();else h.queue(e,d.queue,;""!==d.queue&&"fx"!==d.queue||"inprogress"===h.queue(e)[0]||h.dequeue(e)}var s,c,m,b,l,w,_,y=arguments[0]&&(arguments[0].p||h.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||C.isString(arguments[0].properties));C.isWrapped(this)?(c=!1,b=0,l=this,m=this):(c=!0,b=1,l=y?arguments[0].elements||arguments[0].e:arguments[0]);var D={promise:null,resolver:null,rejecter:null};if(c&&W.Promise&&(D.promise=new W.Promise(),y?(w=arguments[0].properties||arguments[0].p,_=arguments[0].options||arguments[0].o):(w=arguments[b],_=arguments[b+1]),l=t(l),!l)return void(D.promise&&(w&&_&&_.promiseRejectEmpty===!1?D.resolver():D.rejecter()));var S=l.length,x=0;if(!/^(stop|finish|finishAll|pause|resume)$/i.test(w)&&!h.isPlainObject(_)){var B=b+1;_={};for(var E=B;E<arguments.length;E++)C.isArray(arguments[E])||!/^(fast|normal|slow)$/i.test(arguments[E])&&!/^\d/.test(arguments[E])?C.isString(arguments[E])||C.isArray(arguments[E])?_.easing=arguments[E]:C.isFunction(arguments[E])&&(_.complete=arguments[E]):_.duration=arguments[E]}var G;switch(w){case"scroll":G="scroll";break;case"reverse":G="reverse";break;case"pause":var K=(new Date).getTime();return h.each(l,function(e,n){g(n,K)}),h.each(W.State.calls,,e();case"resume":return h.each(l,,h.each(W.State.calls,,e();case"finish":case"finishAll":case"stop":h.each(l,;var L=[];return h.each(W.State.calls,function(e,n){n&&h.each(n[1],function(o,i){var t=_===a?"":_;return t!==!0&&n[2].queue!==t&&(_!==a||n[2].queue!==!1)||void h.each(l,function(o,a){if(a===i)if((_===!0||C.isString(_))&&(h.each(h.queue(a,C.isString(_)?_:""),,h.queue(a,C.isString(_)?_:"",[])),"stop"===w){var g=r(a);g&&g.tweensContainer&&(t===!0||""===t)&&h.each(g.tweensContainer,,L.push(e)}else"finish"!==w&&"finishAll"!==w||(n[2].duration=1)})})}),"stop"===w&&(h.each(L,,D.promise&&D.resolver(l)),e();default:if(!h.isPlainObject(w)||C.isEmptyObject(w)){if(C.isString(w)&&W.Redirects[w]){s=h.extend({},_);var T=s.duration,U=s.delay||0;return s.backwards===!0&&(l=h.extend(!0,[],l).reverse()),h.each(l,,e()}var j="Velocity: First argument ("+w+") was not a property map, a known action, or a registered redirect. Aborting.";return D.promise?D.rejecter(new Error(j)):n.console&&console.log(j),e()}G="start"}var k={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPx:null,vwToPx:null,vhToPx:null},q=[];h.each(l,,s=h.extend({},W.defaults,_),s.loop=parseInt(s.loop,10);var z=2*s.loop-1;if(s.loop)for(var A=0;A<z;A++){var F={delay:s.delay,progress:s.progress};A===z-1&&(F.display=s.display,F.visibility=s.visibility,F.complete=s.complete),R(l,"reverse",F)}return e()};W=h.extend(R,W),W.animate=R;var S=n.requestAnimationFrame||b;if(!W.State.isMobile&&o.hidden!==a){var x=x(),o.addEventListener("visibilitychange",x)}return e.Velocity=W,e!==n&&(e.fn.velocity=R,e.fn.velocity.defaults=W.defaults),h.each(["Down","Up"],,h.each(["In","Out"],function(e,n){W.Redirects["fade"+n]=function(e,o,i,t,r,g){var d=h.extend({},o),s=d.complete,c={opacity:"In"===n?1:0};0!==i&&(d.begin=null),i!==t-1?d.complete=null:d.complete=d.display===a&&(d.display="In"===n?"auto":"none"),W(this,c,d)}}),W}(window.jQuery||window.Zepto||window,window,window?window.document:void 0)}),function(){"use strict";n g(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}nction c(e){function o(n){return d(n,function(n,o){return n||RegExp("\\b"+(o.pattern||g(o))+"\\b","i").exec(e)&&(o.label||o)})}p,_=e&&"object"==typeof e&&"String"!=t(e);_&&(P=e,e=null);var v=P.navigator||{},y=v.userAgent||"";e||(e=y);var W,D,I=_?!!v.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(C.toString()),R="Object",S=_?R:"ScriptBridgingProxyObject",x=_?R:"Environment",B=_&&P.java?"JavaPackage":t(P.java),E=_?R:"RuntimeObject",G=/\bJava/.test(B)&&P.java,K=G&&t(P.environment)==x,L=G?"a":"",T=G?"b":"",U=P.document||{},j=P.operamini||P.opera,k=l.test(k=_&&j?j["[[Class]]"]:t(j))?k:j=null,q=e,z=[],A=null,F=e==y,H=F&&j&&"function"==typeof j.version&&j.version(),J=o([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),M=u(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),N=m([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),O=f({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),Q=h(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);if(J&&(J=[J]),/\bAndroid\b/.test(Q)&&!N&&(W=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(e))&&(N=s(W[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),O&&!N?N=m([O]):O&&N&&(N=N.replace(RegExp("^("+g(O)+")[-_.\\s]","i"),O+" ").replace(RegExp("^("+g(O)+")[-_.]?(\\w)","i"),O+" $2")),(W=/\bGoogle TV\b/.exec(N))&&(N=W[0]),/\bSimulator\b/i.test(e)&&(N=(N?N+" ":"")+"Simulator"),"Opera Mini"==M&&/\bOPiOS\b/.test(e)&&z.push("running in Turbo/Uncompressed mode"),"IE"==M&&/\blike iPhone OS\b/.test(e)?(W=c(e.replace(/like iPhone OS/,"")),O=W.manufacturer,N=W.product):/^iP/.test(N)?(M||(M="Safari"),Q="iOS"+((W=/ OS ([\d_]+)/i.exec(e))?" "+W[1].replace(/_/g,"."):"")):"Konqueror"==M&&/^Linux\b/i.test(Q)?Q="Kubuntu":O&&"Google"!=O&&(/Chrome/.test(M)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(N))||/\bAndroid\b/.test(Q)&&/^Chrome/.test(M)&&/\bVersion\//i.test(e)?(M="Android Browser",Q=/\bAndroid\b/.test(Q)?Q:"Android"):"Silk"==M?(/\bMobi/i.test(e)||(Q="Android",z.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&z.unshift("accelerated")):"UC Browser"==M&&/\bUCWEB\b/.test(e)?z.push("speed mode"):"PaleMoon"==M&&(W=/\bFirefox\/([\d.]+)\b/.exec(e))?z.push("identifying as Firefox "+W[1]):"Firefox"==M&&(W=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(Q||(Q="Firefox OS"),N||(N=W[1])):!M||(W=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(M))?(M&&!N&&/[\/,]|^[^(]+?\)/.test(e.slice(e.indexOf(W+"/")+8))&&(M=null),(W=N||O||Q)&&(N||O||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Q))&&(M=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Q)?Q:W)+" Browser")):"Electron"==M&&(W=(/\bChrome\/([\d.]+)\b/.exec(e)||0)[1])&&z.push("Chromium "+W),H||(H=b(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",g(M),"(?:Firefox|Minefield|NetFront)"])),(W="iCab"==J&&parseFloat(H)>3&&"WebKit"||/\bOpera\b/.test(M)&&(/\bOPR\b/.test(e)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(J)&&"WebKit"||!J&&/\bMSIE\b/i.test(e)&&("Mac OS"==Q?"Tasman":"Trident")||"WebKit"==J&&/\bPlayStation\b(?! Vita\b)/i.test(M)&&"NetFront")&&(J=[W]),"IE"==M&&(W=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(M+=" Mobile",Q="Windows Phone "+(/\+$/.test(W)?W:W+".x"),z.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(M="IE Mobile",Q="Windows Phone 8.x",z.unshift("desktop mode"),H||(H=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=M&&"Trident"==J&&(W=/\brv:([\d.]+)/.exec(e))&&(M&&z.push("identifying as "+M+(H?" "+H:"")),M="IE",H=W[1]),F){if(r(P,"global"))if(G&&(W=G.lang.System,q=W.getProperty("os.arch"),Q=Q||W.getProperty("os.name")+" "+W.getProperty("os.version")),K){try{H=P.require("ringo/engine").version.join("."),M="RingoJS"}catch(e){(W=P.system)&&W.global.system==P.system&&(M="Narwhal",Q||(Q=W[0].os||null))}M||(M="Rhino")}else"object"==typeof P.process&&!P.process.browser&&(W=P.process)&&("object"==typeof W.versions&&("string"==typeof W.versions.electron?(z.push("Node "+W.versions.node),M="Electron",H=W.versions.electron):"string"==typeof W.versions.nw&&(z.push("Chromium "+H,"Node "+W.versions.node),M="NW.js",H=W.versions.nw)),M||(M="Node.js",q=W.arch,Q=W.platform,H=/[\d.]+/.exec(W.version),H=H?H[0]:null));else t(W=P.runtime)==S?(M="Adobe AIR",Q=W.flash.system.Capabilities.os):t(W=P.phantom)==E?(M="PhantomJS",H=(W=W.version||null)&&W.major+"."+W.minor+"."+W.patch):"number"==typeof U.documentMode&&(W=/\bTrident\/(\d+)/i.exec(e))?(H=[H,U.documentMode],(W=+W[1]+4)!=H[1]&&(z.push("IE "+H[1]+" mode"),J&&(J[1]=""),H[1]=W),H="IE"==M?String(H[1].toFixed(1)):H[0]):"number"==typeof U.documentMode&&/^(?:Chrome|Firefox)\b/.test(M)&&(z.push("masking as "+M+" "+H),M="IE",H="11.0",J=["Trident"],Q="Windows");Q=Q&&a(Q)}if(H&&(W=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(H)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(F&&v.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(A=/b/i.test(W)?"beta":"alpha",H=H.replace(RegExp(W+"\\+?$"),"")+("beta"==A?T:L)+(/\d+\+?/.exec(W)||"")),"Fennec"==M||"Firefox"==M&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(Q))M="Firefox Mobile";else if("Maxthon"==M&&H)H=H.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(N))"Xbox 360"==N&&(Q=null),"Xbox 360"==N&&/\bIEMobile\b/.test(e)&&z.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(M)&&(!M||N||/Browser|Mobi/.test(M))||"Windows CE"!=Q&&!/Mobi/i.test(e))if("IE"==M&&F)try{null===P.external&&z.unshift("platform preview")}catch(e){z.unshift("embedded")}else(/\bBlackBerry\b/.test(N)||/\bBB10\b/.test(e))&&(W=(RegExp(N.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||H)?(W=[W,/BB10/.test(e)],Q=(W[1]?(N=null,O="BlackBerry"):"Device Software")+" "+W[0],H=null):this!=i&&"Wii"!=N&&(F&&j||/Opera/.test(M)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==M&&/\bOS X (?:\d+\.){2,}/.test(Q)||"IE"==M&&(Q&&!/^Win/.test(Q)&&H>5.5||/\bWindows XP\b/.test(Q)&&H>8||8==H&&!/\bTrident\b/.test(e)))&&!l.test(W=c.call(i,e.replace(l,"")+";"))&&W.name&&(W="ing as "+W.name+((W=W.version)?" "+W:""),l.test(M)?(/\bIE\b/.test(W)&&"Mac OS"==Q&&(Q=null),W="identify"+W):(W="mask"+W,M=k?a(k.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(W)&&(Q=null),F||(H=null)),J=["Presto"],z.push(W));else M+=" Mobile";(W=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1])&&(W=[parseFloat(W.replace(/\.(\d)$/,".0$1")),W],"Safari"==M&&"+"==W[1].slice(-1)?(M="WebKit Nightly",A="alpha",H=W[1].slice(0,-1)):H!=W[1]&&H!=(W[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(H=null),W[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(e)||0)[1],537.36==W[0]&&537.36==W[2]&&parseFloat(W[1])>=28&&"WebKit"==J&&(J=["Blink"]),F&&(I||W[1])?(J&&(J[1]="like Chrome"),W=W[1]||(W=W[0],W<530?1:W<532?2:W<532.05?3:W<533?4:W<534.03?5:W<534.07?6:W<534.1?7:W<534.13?8:W<534.16?9:W<534.24?10:W<534.3?11:W<535.01?12:W<535.02?"13+":W<535.07?15:W<535.11?16:W<535.19?17:W<536.05?18:W<536.1?19:W<537.01?20:W<537.11?"21+":W<537.13?23:W<537.18?24:W<537.24?25:W<537.36?26:"Blink"!=J?"27":"28")):(J&&(J[1]="like Safari"),W=W[0],W=W<400?1:W<500?2:W<526?3:W<533?4:W<534?"4+":W<535?5:W<537?6:W<538?7:W<601?8:W<602?9:W<604?10:W<606?11:W<608?12:"12"),J&&(J[1]+=" "+(W+="number"==typeof W?".x":/[.+]/.test(W)?"":"+")),"Safari"==M&&(!H||parseInt(H)>45)?H=W:"Chrome"==M&&/\bHeadlessChrome/i.test(e)&&z.unshift("headless")),"Opera"==M&&(W=/\bzbov|zvav$/.exec(Q))?(M+=" ",z.unshift("desktop mode"),"zvav"==W?(M+="Mini",H=null):M+="Mobile",Q=Q.replace(RegExp(" *"+W+"$"),"")):"Safari"==M&&/\bChrome\b/.exec(J&&J[1])?(z.unshift("desktop mode"),M="Chrome Mobile",H=null,/\bOS X\b/.test(Q)?(O="Apple",Q="iOS 4.3+"):Q=null):/\bSRWare Iron\b/.test(M)&&!H&&(H=b("Chrome")),H&&0==H.indexOf(W=/[\d.]+$/.exec(Q))&&e.indexOf("/"+W+"-")>-1&&(Q=s(Q.replace(W,""))),Q&&Q.indexOf(M)!=-1&&!RegExp(M+" OS").test(Q)&&(Q=Q.replace(RegExp(" *"+g(M)+" *"),"")),J&&!/\b(?:Avant|Nook)\b/.test(M)&&(/Browser|Lunascape|Maxthon/.test(M)||"Safari"!=M&&/^iOS/.test(Q)&&/\bSafari\b/.test(J[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(M)&&J[1])&&(W=J[J.length-1])&&z.push(W),z.length&&(z=["("+z.join("; ")+")"]),O&&N&&N.indexOf(O)<0&&z.push("on "+O),N&&z.push((/^on /.test(z[z.length-1])?"":"on ")+N),Q&&(W=/ ([\d.+]+)$/.exec(Q),D=W&&"/"==Q.charAt(Q.length-W[0].length-1),Q={architecture:32,family:W&&!D?Q.replace(W[0],""):Q,version:W?W[1]:null,toStrin}}),(W=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(q))&&!/\bi686\b/i.test(q)?(Q&&(Q.architecture=64,Q.family=Q.family.replace(RegExp(" *"+W),"")),M&&(/\bWOW64\b/i.test(e)||F&&/\w(?:86|32)$/.test(v.cpuClass||v.platform)&&!/\bWin64; x64\b/i.test(e))&&z.unshift("32-bit")):Q&&/^OS X/.test(Q.family)&&"Chrome"==M&&parseFloat(H)>=39&&(Q.architecture=64),e||(e=null);var V={};return V.description=e,V.layout=J&&J[0],V.manufacturer=O,V.name=M,V.prerelease=A,V.product=N,V.ua=e,V.version=M&&H,V.os=Q||{architecture:null,family:null,version:null,toStrin}},V.parse=c,V.toString=w,V.version&&z.unshift(H),V.name&&z.unshift(M),Q&&M&&(Q!=String(Q).split(" ")[0]||Q!=M.split(" ")[0]&&!N)&&z.push(N?"("+Q+")":"on "+Q),z.length&&(V.description=z.join(" ")),V}var f={function:!0,object:!0},p=f[typeof window]&&window||this,u=f[typeof exports]&&exports,h=f[typeof module]&&module&&!module.nodeType&&module,m=u&&h&&"object"==typeof global&&global;!m||m.global!==m&&m.window!==m&&m.self!==m||(p=m);var b=Math.pow(2,53)-1,l=/\bOpera/,w=Object.prototype,P=w.hasOwnProperty,C=w.toString,_=c();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(p.platform=_,define(function(){return _})):u&&h?i(}):p.platform=_}.call(this),function(e){"undefined"!=typeof e.JSON&&e.JSON||(e.JSON={}),e.JSON.minify=function(e){var n,o,a,i,t,r=/"|(\/\*)|(\*\/)|(\/\/)|\n|\r/g,g=!1,d=!1,s=!1,c=[],f=0,p=0;for(r.lastIndex=0;n=r.exec(e);)a=RegExp.leftContext,i=RegExp.rightContext,d||s||(o=a.substring(p),g||(o=o.replace(/(\n|\r|\s)+/g,"")),c[f++]=o),t=p,p=r.lastIndex,'"'!=n[0]||d||s?"/*"!=n[0]||g||d||s?"*/"!=n[0]||g||!d||s?"//"!=n[0]||g||d||s?"\n"!=n[0]&&"\r"!=n[0]||g||d||!s?d||s||/\n|\r|\s/.test(n[0])||(c[f++]=n[0]):s=!1:s=!0:d=!1:d=!0:(o=a.substring(t).match(/\\+$/),g&&o&&o[0].length%2!=0||(g=!g),p--,i=e.substring(p));return c[f++]=i,c.join("")}}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:"undefined"!=typeof this?this:{}}(),function(e){var n="object"==typeof exports&&exports,o="object"==typeof module&&module&&module.exports==n&&module,a="object"==typeof global&&global;a.global!==a&&a.window!==a||(e=a);var i=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,t=/[\x01-\x7F]/g,r=/[\x01-\t\x0B\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,g=/<\u20D2|=\u20E5|>\u20D2|\u205F\u200A|\u219D\u0338|\u2202\u0338|\u2220\u20D2|\u2229\uFE00|\u222A\uFE00|\u223C\u20D2|\u223D\u0331|\u223E\u0333|\u2242\u0338|\u224B\u0338|\u224D\u20D2|\u224E\u0338|\u224F\u0338|\u2250\u0338|\u2261\u20E5|\u2264\u20D2|\u2265\u20D2|\u2266\u0338|\u2267\u0338|\u2268\uFE00|\u2269\uFE00|\u226A\u0338|\u226A\u20D2|\u226B\u0338|\u226B\u20D2|\u227F\u0338|\u2282\u20D2|\u2283\u20D2|\u228A\uFE00|\u228B\uFE00|\u228F\u0338|\u2290\u0338|\u2293\uFE00|\u2294\uFE00|\u22B4\u20D2|\u22B5\u20D2|\u22D8\u0338|\u22D9\u0338|\u22DA\uFE00|\u22DB\uFE00|\u22F5\u0338|\u22F9\u0338|\u2933\u0338|\u29CF\u0338|\u29D0\u0338|\u2A6D\u0338|\u2A70\u0338|\u2A7D\u0338|\u2A7E\u0338|\u2AA1\u0338|\u2AA2\u0338|\u2AAC\uFE00|\u2AAD\uFE00|\u2AAF\u0338|\u2AB0\u0338|\u2AC5\u0338|\u2AC6\u0338|\u2ACB\uFE00|\u2ACC\uFE00|\u2AFD\u20E5|[\xA0-\u0113\u0116-\u0122\u0124-\u012B\u012E-\u014D\u0150-\u017E\u0192\u01B5\u01F5\u0237\u02C6\u02C7\u02D8-\u02DD\u0311\u0391-\u03A1\u03A3-\u03A9\u03B1-\u03C9\u03D1\u03D2\u03D5\u03D6\u03DC\u03DD\u03F0\u03F1\u03F5\u03F6\u0401-\u040C\u040E-\u044F\u0451-\u045C\u045E\u045F\u2002-\u2005\u2007-\u2010\u2013-\u2016\u2018-\u201A\u201C-\u201E\u2020-\u2022\u2025\u2026\u2030-\u2035\u2039\u203A\u203E\u2041\u2043\u2044\u204F\u2057\u205F-\u2063\u20AC\u20DB\u20DC\u2102\u2105\u210A-\u2113\u2115-\u211E\u2122\u2124\u2127-\u2129\u212C\u212D\u212F-\u2131\u2133-\u2138\u2145-\u2148\u2153-\u215E\u2190-\u219B\u219D-\u21A7\u21A9-\u21AE\u21B0-\u21B3\u21B5-\u21B7\u21BA-\u21DB\u21DD\u21E4\u21E5\u21F5\u21FD-\u2205\u2207-\u2209\u220B\u220C\u220F-\u2214\u2216-\u2218\u221A\u221D-\u2238\u223A-\u2257\u2259\u225A\u225C\u225F-\u2262\u2264-\u228B\u228D-\u229B\u229D-\u22A5\u22A7-\u22B0\u22B2-\u22BB\u22BD-\u22DB\u22DE-\u22E3\u22E6-\u22F7\u22F9-\u22FE\u2305\u2306\u2308-\u2310\u2312\u2313\u2315\u2316\u231C-\u231F\u2322\u2323\u232D\u232E\u2336\u233D\u233F\u237C\u23B0\u23B1\u23B4-\u23B6\u23DC-\u23DF\u23E2\u23E7\u2423\u24C8\u2500\u2502\u250C\u2510\u2514\u2518\u251C\u2524\u252C\u2534\u253C\u2550-\u256C\u2580\u2584\u2588\u2591-\u2593\u25A1\u25AA\u25AB\u25AD\u25AE\u25B1\u25B3-\u25B5\u25B8\u25B9\u25BD-\u25BF\u25C2\u25C3\u25CA\u25CB\u25EC\u25EF\u25F8-\u25FC\u2605\u2606\u260E\u2640\u2642\u2660\u2663\u2665\u2666\u266A\u266D-\u266F\u2713\u2717\u2720\u2736\u2758\u2772\u2773\u27C8\u27C9\u27E6-\u27ED\u27F5-\u27FA\u27FC\u27FF\u2902-\u2905\u290C-\u2913\u2916\u2919-\u2920\u2923-\u292A\u2933\u2935-\u2939\u293C\u293D\u2945\u2948-\u294B\u294E-\u2976\u2978\u2979\u297B-\u297F\u2985\u2986\u298B-\u2996\u299A\u299C\u299D\u29A4-\u29B7\u29B9\u29BB\u29BC\u29BE-\u29C5\u29C9\u29CD-\u29D0\u29DC-\u29DE\u29E3-\u29E5\u29EB\u29F4\u29F6\u2A00-\u2A02\u2A04\u2A06\u2A0C\u2A0D\u2A10-\u2A17\u2A22-\u2A27\u2A29\u2A2A\u2A2D-\u2A31\u2A33-\u2A3C\u2A3F\u2A40\u2A42-\u2A4D\u2A50\u2A53-\u2A58\u2A5A-\u2A5D\u2A5F\u2A66\u2A6A\u2A6D-\u2A75\u2A77-\u2A9A\u2A9D-\u2AA2\u2AA4-\u2AB0\u2AB3-\u2AC8\u2ACB\u2ACC\u2ACF-\u2ADB\u2AE4\u2AE6-\u2AE9\u2AEB-\u2AF3\u2AFD\uFB00-\uFB04]|\uD835[\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDCCF\uDD04\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDD6B]/g,d={"":"shy","":"zwnj","":"zwj","":"lrm","":"ic","":"it","":"af","":"rlm","":"ZeroWidthSpace","":"NoBreak","":"DownBreve","":"tdot","":"DotDot","\t":"Tab","\n":"NewLine","":"puncsp","":"MediumSpace","":"thinsp","":"hairsp","":"emsp13","":"ensp","":"emsp14","":"emsp","":"numsp","":"nbsp","":"ThickSpace","":"oline",_:"lowbar","":"dash","":"ndash","":"mdash","":"horbar",",":"comma",";":"semi","":"bsemi",":":"colon","":"Colone","!":"excl","":"iexcl","?":"quest","":"iquest",".":"period","":"nldr","":"mldr","":"middot","'":"apos","":"lsquo","":"rsquo","":"sbquo","":"lsaquo","":"rsaquo",'"':"quot","":"ldquo","":"rdquo","":"bdquo","":"laquo","":"raquo","(":"lpar",")":"rpar","[":"lsqb","]":"rsqb","{":"lcub","}":"rcub","":"lceil","":"rceil","":"lfloor","":"rfloor","":"lopar","":"ropar","":"lbrke","":"rbrke","":"lbrkslu","":"rbrksld","":"lbrksld","":"rbrkslu","":"langd","":"rangd","":"lparlt","":"rpargt","":"gtlPar","":"ltrPar","":"lobrk","":"robrk","":"lang","":"rang","":"Lang","":"Rang","":"loang","":"roang","":"lbbrk","":"rbbrk","":"Vert","":"sect","":"para","@":"commat","*":"ast","/":"sol",undefined:null,"&":"amp","#":"num","%":"percnt","":"permil","":"pertenk","":"dagger","":"Dagger","":"bull","":"hybull","":"prime","":"Prime","":"tprime","":"qprime","":"bprime","":"caret","`":"grave","":"acute","":"tilde","^":"Hat","":"macr","":"breve","":"dot","":"die","":"ring","":"dblac","":"cedil","":"ogon","":"circ","":"caron","":"deg","":"copy","":"reg","":"copysr","":"wp","":"rx","":"mho","":"iiota","":"larr","":"nlarr","":"rarr","":"nrarr","":"uarr","":"darr","":"harr","":"nharr","":"varr","":"nwarr","":"nearr","":"searr","":"swarr","":"rarrw","":"nrarrw","":"Larr","":"Uarr","":"Rarr","":"Darr","":"larrtl","":"rarrtl","":"mapstoleft","":"mapstoup","":"map","":"mapstodown","":"larrhk","":"rarrhk","":"larrlp","":"rarrlp","":"harrw","":"lsh","":"rsh","":"ldsh","":"rdsh","":"crarr","":"cularr","":"curarr","":"olarr","":"orarr","":"lharu","":"lhard","":"uharr","":"uharl","":"rharu","":"rhard","":"dharr","":"dharl","":"rlarr","":"udarr","":"lrarr","":"llarr","":"uuarr","":"rrarr","":"ddarr","":"lrhar","":"rlhar","":"lArr","":"nlArr","":"uArr","":"rArr","":"nrArr","":"dArr","":"iff","":"nhArr","":"vArr","":"nwArr","":"neArr","":"seArr","":"swArr","":"lAarr","":"rAarr","":"zigrarr","":"larrb","":"rarrb","":"duarr","":"loarr","":"roarr","":"hoarr","":"forall","":"comp","":"part","":"npart","":"exist","":"nexist","":"empty","":"Del","":"in","":"notin","":"ni","":"notni","":"bepsi","":"prod","":"coprod","":"sum","+":"plus","":"pm","":"div","":"times","<":"lt","":"nlt","<":"nvlt","=":"equals","":"ne","=":"bne","":"Equal",">":"gt","":"ngt",">":"nvgt","":"not","|":"vert","":"brvbar","":"minus","":"mp","":"plusdo","":"frasl","":"setmn","":"lowast","":"compfn","":"Sqrt","":"prop","":"infin","":"angrt","":"ang","":"nang","":"angmsd","":"angsph","":"mid","":"nmid","":"par","":"npar","":"and","":"or","":"cap","":"caps","":"cup","":"cups","":"int","":"Int","":"tint","":"qint","":"oint","":"Conint","":"Cconint","":"cwint","":"cwconint","":"awconint","":"there4","":"becaus","":"ratio","":"Colon","":"minusd","":"mDDot","":"homtht","":"sim","":"nsim","":"nvsim","":"bsim","":"race","":"ac","":"acE","":"acd","":"wr","":"esim","":"nesim","":"sime","":"nsime","":"cong","":"ncong","":"simne","":"ap","":"nap","":"ape","":"apid","":"napid","":"bcong","":"CupCap","":"NotCupCap","":"nvap","":"bump","":"nbump","":"bumpe","":"nbumpe","":"doteq","":"nedot","":"eDot","":"efDot","":"erDot","":"colone","":"ecolon","":"ecir","":"cire","":"wedgeq","":"veeeq","":"trie","":"equest","":"equiv","":"nequiv","":"bnequiv","":"le","":"nle","":"nvle","":"ge","":"nge","":"nvge","":"lE","":"nlE","":"gE","":"ngE","":"lvnE","":"lnE","":"gnE","":"gvnE","":"ll","":"nLtv","":"nLt","":"gg","":"nGtv","":"nGt","":"twixt","":"lsim","":"nlsim","":"gsim","":"ngsim","":"lg","":"ntlg","":"gl","":"ntgl","":"pr","":"npr","":"sc","":"nsc","":"prcue","":"nprcue","":"sccue","":"nsccue","":"prsim","":"scsim","":"NotSucceedsTilde","":"sub","":"nsub","":"vnsub","":"sup","":"nsup","":"vnsup","":"sube","":"nsube","":"supe","":"nsupe","":"vsubne","":"subne","":"vsupne","":"supne","":"cupdot","":"uplus","":"sqsub","":"NotSquareSubset","":"sqsup","":"NotSquareSuperset","":"sqsube","":"nsqsube","":"sqsupe","":"nsqsupe","":"sqcap","":"sqcaps","":"sqcup","":"sqcups","":"oplus","":"ominus","":"otimes","":"osol","":"odot","":"ocir","":"oast","":"odash","":"plusb","":"minusb","":"timesb","":"sdotb","":"vdash","":"nvdash","":"dashv","":"top","":"bot","":"models","":"vDash","":"nvDash","":"Vdash","":"nVdash","":"Vvdash","":"VDash","":"nVDash","":"prurel","":"vltri","":"nltri","":"vrtri","":"nrtri","":"ltrie","":"nltrie","":"nvltrie","":"rtrie","":"nrtrie","":"nvrtrie","":"origof","":"imof","":"mumap","":"hercon","":"intcal","":"veebar","":"barvee","":"angrtvb","":"lrtri","":"Wedge","":"Vee","":"xcap","":"xcup","":"diam","":"sdot","":"Star","":"divonx","":"bowtie","":"ltimes","":"rtimes","":"lthree","":"rthree","":"bsime","":"cuvee","":"cuwed","":"Sub","":"Sup","":"Cap","":"Cup","":"fork","":"epar","":"ltdot","":"gtdot","":"Ll","":"nLl","":"Gg","":"nGg","":"lesg","":"leg","":"gel","":"gesl","":"cuepr","":"cuesc","":"lnsim","":"gnsim","":"prnsim","":"scnsim","":"vellip","":"ctdot","":"utdot","":"dtdot","":"disin","":"isinsv","":"isins","":"isindot","":"notindot","":"notinvc","":"notinvb","":"isinE","":"notinE","":"nisd","":"xnis","":"nis","":"notnivc","":"notnivb","":"barwed","":"Barwed","":"drcrop","":"dlcrop","":"urcrop","":"ulcrop","":"bnot","":"profline","":"profsurf","":"telrec","":"target","":"ulcorn","":"urcorn","":"dlcorn","":"drcorn","":"frown","":"smile","":"cylcty","":"profalar","":"topbot","":"ovbar","":"solbar","":"angzarr","":"lmoust","":"rmoust","":"tbrk","":"bbrk","":"bbrktbrk","":"OverParenthesis","":"UnderParenthesis","":"OverBrace","":"UnderBrace","":"trpezium","":"elinters","":"blank","":"boxh","":"boxv","":"boxdr","":"boxdl","":"boxur","":"boxul","":"boxvr","":"boxvl","":"boxhd","":"boxhu","":"boxvh","":"boxH","":"boxV","":"boxdR","":"boxDr","":"boxDR","":"boxdL","":"boxDl","":"boxDL","":"boxuR","":"boxUr","":"boxUR","":"boxuL","":"boxUl","":"boxUL","":"boxvR","":"boxVr","":"boxVR","":"boxvL","":"boxVl","":"boxVL","":"boxHd","":"boxhD","":"boxHD","":"boxHu","":"boxhU","":"boxHU","":"boxvH","":"boxVh","":"boxVH","":"uhblk","":"lhblk","":"block","":"blk14","":"blk12","":"blk34","":"squ","":"squf","":"EmptyVerySmallSquare","":"rect","":"marker","":"fltns","":"xutri","":"utrif","":"utri","":"rtrif","":"rtri","":"xdtri","":"dtrif","":"dtri","":"ltrif","":"ltri","":"loz","":"cir","":"tridot","":"xcirc","":"ultri","":"urtri","":"lltri","":"EmptySmallSquare","":"FilledSmallSquare","":"starf","":"star","":"phone","":"female","":"male","":"spades","":"clubs","":"hearts","":"diams","":"sung","":"check","":"cross","":"malt","":"sext","":"VerticalSeparator","":"bsolhsub","":"suphsol","":"xlarr","":"xrarr","":"xharr","":"xlArr","":"xrArr","":"xhArr","":"xmap","":"dzigrarr","":"nvlArr","":"nvrArr","":"nvHarr","":"Map","":"lbarr","":"rbarr","":"lBarr","":"rBarr","":"RBarr","":"DDotrahd","":"UpArrowBar","":"DownArrowBar","":"Rarrtl","":"latail","":"ratail","":"lAtail","":"rAtail","":"larrfs","":"rarrfs","":"larrbfs","":"rarrbfs","":"nwarhk","":"nearhk","":"searhk","":"swarhk","":"nwnear","":"toea","":"tosa","":"swnwar","":"rarrc","":"nrarrc","":"cudarrr","":"ldca","":"rdca","":"cudarrl","":"larrpl","":"curarrm","":"cularrp","":"rarrpl","":"harrcir","":"Uarrocir","":"lurdshar","":"ldrushar","":"LeftRightVector","":"RightUpDownVector","":"DownLeftRightVector","":"LeftUpDownVector","":"LeftVectorBar","":"RightVectorBar","":"RightUpVectorBar","":"RightDownVectorBar","":"DownLeftVectorBar","":"DownRightVectorBar","":"LeftUpVectorBar","":"LeftDownVectorBar","":"LeftTeeVector","":"RightTeeVector","":"RightUpTeeVector","":"RightDownTeeVector","":"DownLeftTeeVector","":"DownRightTeeVector","":"LeftUpTeeVector","":"LeftDownTeeVector","":"lHar","":"uHar","":"rHar","":"dHar","":"luruhar","":"ldrdhar","":"ruluhar","":"rdldhar","":"lharul","":"llhard","":"rharul","":"lrhard","":"udhar","":"duhar","":"RoundImplies","":"erarr","":"simrarr","":"larrsim","":"rarrsim","":"rarrap","":"ltlarr","":"gtrarr","":"subrarr","":"suplarr","":"lfisht","":"rfisht","":"ufisht","":"dfisht","":"vzigzag","":"vangrt","":"angrtvbd","":"ange","":"range","":"dwangle","":"uwangle","":"angmsdaa","":"angmsdab","":"angmsdac","":"angmsdad","":"angmsdae","":"angmsdaf","":"angmsdag","":"angmsdah","":"bemptyv","":"demptyv","":"cemptyv","":"raemptyv","":"laemptyv","":"ohbar","":"omid","":"opar","":"operp","":"olcross","":"odsold","":"olcir","":"ofcir","":"olt","":"ogt","":"cirscir","":"cirE","":"solb","":"bsolb","":"boxbox","":"trisb","":"rtriltri","":"LeftTriangleBar","":"NotLeftTriangleBar","":"RightTriangleBar","":"NotRightTriangleBar","":"iinfin","":"infintie","":"nvinfin","":"eparsl","":"smeparsl","":"eqvparsl","":"lozf","":"RuleDelayed","":"dsol","":"xodot","":"xoplus","":"xotime","":"xuplus","":"xsqcup","":"fpartint","":"cirfnint","":"awint","":"rppolint","":"scpolint","":"npolint","":"pointint","":"quatint","":"intlarhk","":"pluscir","":"plusacir","":"simplus","":"plusdu","":"plussim","":"plustwo","":"mcomma","":"minusdu","":"loplus","":"roplus","":"Cross","":"timesd","":"timesbar","":"smashp","":"lotimes","":"rotimes","":"otimesas","":"Otimes","":"odiv","":"triplus","":"triminus","":"tritime","":"iprod","":"amalg","":"capdot","":"ncup","":"ncap","":"capand","":"cupor","":"cupcap","":"capcup","":"cupbrcap","":"capbrcup","":"cupcup","":"capcap","":"ccups","":"ccaps","":"ccupssm","":"And","":"Or","":"andand","":"oror","":"orslope","":"andslope","":"andv","":"orv","":"andd","":"ord","":"wedbar","":"sdote","":"simdot","":"congdot","":"ncongdot","":"easter","":"apacir","":"apE","":"napE","":"eplus","":"pluse","":"Esim","":"eDDot","":"equivDD","":"ltcir","":"gtcir","":"ltquest","":"gtquest","":"les","":"nles","":"ges","":"nges","":"lesdot","":"gesdot","":"lesdoto","":"gesdoto","":"lesdotor","":"gesdotol","":"lap","":"gap","":"lne","":"gne","":"lnap","":"gnap","":"lEg","":"gEl","":"lsime","":"gsime","":"lsimg","":"gsiml","":"lgE","":"glE","":"lesges","":"gesles","":"els","":"egs","":"elsdot","":"egsdot","":"el","":"eg","":"siml","":"simg","":"simlE","":"simgE","":"LessLess","":"NotNestedLessLess","":"GreaterGreater","":"NotNestedGreaterGreater","":"glj","":"gla","":"ltcc","":"gtcc","":"lescc","":"gescc","":"smt","":"lat","":"smte","":"smtes","":"late","":"lates","":"bumpE","":"pre","":"npre","":"sce","":"nsce","":"prE","":"scE","":"prnE","":"scnE","":"prap","":"scap","":"prnap","":"scnap","":"Pr","":"Sc","":"subdot","":"supdot","":"subplus","":"supplus","":"submult","":"supmult","":"subedot","":"supedot","":"subE","":"nsubE","":"supE","":"nsupE","":"subsim","":"supsim","":"vsubnE","":"subnE","":"vsupnE","":"supnE","":"csub","":"csup","":"csube","":"csupe","":"subsup","":"supsub","":"subsub","":"supsup","":"suphsub","":"supdsub","":"forkv","":"topfork","":"mlcp","":"Dashv","":"Vdashl","":"Barv","":"vBar","":"vBarv","":"Vbar","":"Not","":"bNot","":"rnmid","":"cirmid","":"midcir","":"topcir","":"nhpar","":"parsim","":"parsl","":"nparsl","":"flat","":"natur","":"sharp","":"curren","":"cent",$:"dollar","":"pound","":"yen","":"euro","":"sup1","":"half","":"frac13","":"frac14","":"frac15","":"frac16","":"frac18","":"sup2","":"frac23","":"frac25","":"sup3","":"frac34","":"frac35","":"frac38","":"frac45","":"frac56","":"frac58","":"frac78","":"ascr","":"aopf","":"afr","":"Aopf","":"Afr","":"Ascr","":"ordf","":"aacute","":"Aacute","":"agrave","":"Agrave","":"abreve","":"Abreve","":"acirc","":"Acirc","":"aring","":"angst","":"auml","":"Auml","":"atilde","":"Atilde","":"aogon","":"Aogon","":"amacr","":"Amacr","":"aelig","":"AElig","":"bscr","":"bopf","":"bfr","":"Bopf","":"Bscr","":"Bfr","":"cfr","":"cscr","":"copf","":"Cfr","":"Cscr","":"Copf","":"cacute","":"Cacute","":"ccirc","":"Ccirc","":"ccaron","":"Ccaron","":"cdot","":"Cdot","":"ccedil","":"Ccedil","":"incare","":"dfr","":"dd",
"":"dopf","":"dscr","":"Dscr","":"Dfr","":"DD","":"Dopf","":"dcaron","":"Dcaron","":"dstrok","":"Dstrok","":"eth","":"ETH","":"ee","":"escr","":"efr","":"eopf","":"Escr","":"Efr","":"Eopf","":"eacute","":"Eacute","":"egrave","":"Egrave","":"ecirc","":"Ecirc","":"ecaron","":"Ecaron","":"euml","":"Euml","":"edot","":"Edot","":"eogon","":"Eogon","":"emacr","":"Emacr","":"ffr","":"fopf","":"fscr","":"Ffr","":"Fopf","":"Fscr","":"fflig","":"ffilig","":"ffllig","":"filig",fj:"fjlig","":"fllig","":"fnof","":"gscr","":"gopf","":"gfr","":"Gscr","":"Gopf","":"Gfr","":"gacute","":"gbreve","":"Gbreve","":"gcirc","":"Gcirc","":"gdot","":"Gdot","":"Gcedil","":"hfr","":"planckh","":"hscr","":"hopf","":"Hscr","":"Hfr","":"Hopf","":"hcirc","":"Hcirc","":"hbar","":"hstrok","":"Hstrok","":"iopf","":"ifr","":"iscr","":"ii","":"Iopf","":"Iscr","":"Im","":"iacute","":"Iacute","":"igrave","":"Igrave","":"icirc","":"Icirc","":"iuml","":"Iuml","":"itilde","":"Itilde","":"Idot","":"iogon","":"Iogon","":"imacr","":"Imacr","":"ijlig","":"IJlig","":"imath","":"jscr","":"jopf","":"jfr","":"Jscr","":"Jfr","":"Jopf","":"jcirc","":"Jcirc","":"jmath","":"kopf","":"kscr","":"kfr","":"Kscr","":"Kopf","":"Kfr","":"kcedil","":"Kcedil","":"lfr","":"lscr","":"ell","":"lopf","":"Lscr","":"Lfr","":"Lopf","":"lacute","":"Lacute","":"lcaron","":"Lcaron","":"lcedil","":"Lcedil","":"lstrok","":"Lstrok","":"lmidot","":"Lmidot","":"mfr","":"mopf","":"mscr","":"Mfr","":"Mopf","":"Mscr","":"nfr","":"nopf","":"nscr","":"Nopf","":"Nscr","":"Nfr","":"nacute","":"Nacute","":"ncaron","":"Ncaron","":"ntilde","":"Ntilde","":"ncedil","":"Ncedil","":"numero","":"eng","":"ENG","":"oopf","":"ofr","":"oscr","":"Oscr","":"Ofr","":"Oopf","":"ordm","":"oacute","":"Oacute","":"ograve","":"Ograve","":"ocirc","":"Ocirc","":"ouml","":"Ouml","":"odblac","":"Odblac","":"otilde","":"Otilde","":"oslash","":"Oslash","":"omacr","":"Omacr","":"oelig","":"OElig","":"pfr","":"pscr","":"popf","":"Popf","":"Pfr","":"Pscr","":"qopf","":"qfr","":"qscr","":"Qscr","":"Qfr","":"Qopf","":"kgreen","":"rfr","":"ropf","":"rscr","":"Rscr","":"Re","":"Ropf","":"racute","":"Racute","":"rcaron","":"Rcaron","":"rcedil","":"Rcedil","":"sopf","":"sscr","":"sfr","":"Sopf","":"Sfr","":"Sscr","":"oS","":"sacute","":"Sacute","":"scirc","":"Scirc","":"scaron","":"Scaron","":"scedil","":"Scedil","":"szlig","":"tfr","":"tscr","":"topf","":"Tscr","":"Tfr","":"Topf","":"tcaron","":"Tcaron","":"tcedil","":"Tcedil","":"trade","":"tstrok","":"Tstrok","":"uscr","":"uopf","":"ufr","":"Uopf","":"Ufr","":"Uscr","":"uacute","":"Uacute","":"ugrave","":"Ugrave","":"ubreve","":"Ubreve","":"ucirc","":"Ucirc","":"uring","":"Uring","":"uuml","":"Uuml","":"udblac","":"Udblac","":"utilde","":"Utilde","":"uogon","":"Uogon","":"umacr","":"Umacr","":"vfr","":"vopf","":"vscr","":"Vfr","":"Vopf","":"Vscr","":"wopf","":"wscr","":"wfr","":"Wscr","":"Wopf","":"Wfr","":"wcirc","":"Wcirc","":"xfr","":"xscr","":"xopf","":"Xopf","":"Xfr","":"Xscr","":"yfr","":"yscr","":"yopf","":"Yscr","":"Yfr","":"Yopf","":"yacute","":"Yacute","":"ycirc","":"Ycirc","":"yuml","":"Yuml","":"zscr","":"zfr","":"zopf","":"Zfr","":"Zopf","":"Zscr","":"zacute","":"Zacute","":"zcaron","":"Zcaron","":"zdot","":"Zdot","":"imped","":"thorn","":"THORN","":"napos","":"alpha","":"Alpha","":"beta","":"Beta","":"gamma","":"Gamma","":"delta","":"Delta","":"epsi","":"epsiv","":"Epsilon","":"gammad","":"Gammad","":"zeta","":"Zeta","":"eta","":"Eta","":"theta","":"thetav","":"Theta","":"iota","":"Iota","":"kappa","":"kappav","":"Kappa","":"lambda","":"Lambda","":"mu","":"micro","":"Mu","":"nu","":"Nu","":"xi","":"Xi","":"omicron","":"Omicron","":"pi","":"piv","":"Pi","":"rho","":"rhov","":"Rho","":"sigma","":"Sigma","":"sigmaf","":"tau","":"Tau","":"upsi","":"Upsilon","":"Upsi","":"phi","":"phiv","":"Phi","":"chi","":"Chi","":"psi","":"Psi","":"omega","":"ohm","":"acy","":"Acy","":"bcy","":"Bcy","":"vcy","":"Vcy","":"gcy","":"Gcy","":"gjcy","":"GJcy","":"dcy","":"Dcy","":"djcy","":"DJcy","":"iecy","":"IEcy","":"iocy","":"IOcy","":"jukcy","":"Jukcy","":"zhcy","":"ZHcy","":"zcy","":"Zcy","":"dscy","":"DScy","":"icy","":"Icy","":"iukcy","":"Iukcy","":"yicy","":"YIcy","":"jcy","":"Jcy","":"jsercy","":"Jsercy","":"kcy","":"Kcy","":"kjcy","":"KJcy","":"lcy","":"Lcy","":"ljcy","":"LJcy","":"mcy","":"Mcy","":"ncy","":"Ncy","":"njcy","":"NJcy","":"ocy","":"Ocy","":"pcy","":"Pcy","":"rcy","":"Rcy","":"scy","":"Scy","":"tcy","":"Tcy","":"tshcy","":"TSHcy","":"ucy","":"Ucy","":"ubrcy","":"Ubrcy","":"fcy","":"Fcy","":"khcy","":"KHcy","":"tscy","":"TScy","":"chcy","":"CHcy","":"dzcy","":"DZcy","":"shcy","":"SHcy","":"shchcy","":"SHCHcy","":"hardcy","":"HARDcy","":"ycy","":"Ycy","":"softcy","":"SOFTcy","":"ecy","":"Ecy","":"yucy","":"YUcy","":"yacy","":"YAcy","":"aleph","":"beth","":"gimel","":"daleth"},s=/["&'<>`]/g,c={'"':"&quot;","&":"&amp;","'":"&#x27;","<":"&lt;",">":"&gt;","`":"&#x60;"},f=/&#(?:[xX][^a-fA-F0-9]|[^0-9xX])/,p=/[\0-\x08\x0B\x0E-\x1F\x7F-\x9F\uFDD0-\uFDEF\uFFFE\uFFFF]|[\uD83F\uD87F\uD8BF\uD8FF\uD93F\uD97F\uD9BF\uD9FF\uDA3F\uDA7F\uDABF\uDAFF\uDB3F\uDB7F\uDBBF\uDBFF][\uDFFE\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,u=/&(CounterClockwiseContourIntegral|DoubleLongLeftRightArrow|ClockwiseContourIntegral|NotNestedGreaterGreater|NotSquareSupersetEqual|DiacriticalDoubleAcute|NotRightTriangleEqual|NotSucceedsSlantEqual|NotPrecedesSlantEqual|CloseCurlyDoubleQuote|NegativeVeryThinSpace|DoubleContourIntegral|FilledVerySmallSquare|CapitalDifferentialD|OpenCurlyDoubleQuote|EmptyVerySmallSquare|NestedGreaterGreater|DoubleLongRightArrow|NotLeftTriangleEqual|NotGreaterSlantEqual|ReverseUpEquilibrium|DoubleLeftRightArrow|NotSquareSubsetEqual|NotDoubleVerticalBar|RightArrowLeftArrow|NotGreaterFullEqual|NotRightTriangleBar|SquareSupersetEqual|DownLeftRightVector|DoubleLongLeftArrow|leftrightsquigarrow|LeftArrowRightArrow|NegativeMediumSpace|blacktriangleright|RightDownVectorBar|PrecedesSlantEqual|RightDoubleBracket|SucceedsSlantEqual|NotLeftTriangleBar|RightTriangleEqual|SquareIntersection|RightDownTeeVector|ReverseEquilibrium|NegativeThickSpace|longleftrightarrow|Longleftrightarrow|LongLeftRightArrow|DownRightTeeVector|DownRightVectorBar|GreaterSlantEqual|SquareSubsetEqual|LeftDownVectorBar|LeftDoubleBracket|VerticalSeparator|rightleftharpoons|NotGreaterGreater|NotSquareSuperset|blacktriangleleft|blacktriangledown|NegativeThinSpace|LeftDownTeeVector|NotLessSlantEqual|leftrightharpoons|DoubleUpDownArrow|DoubleVerticalBar|LeftTriangleEqual|FilledSmallSquare|twoheadrightarrow|NotNestedLessLess|DownLeftTeeVector|DownLeftVectorBar|RightAngleBracket|NotTildeFullEqual|NotReverseElement|RightUpDownVector|DiacriticalTilde|NotSucceedsTilde|circlearrowright|NotPrecedesEqual|rightharpoondown|DoubleRightArrow|NotSucceedsEqual|NonBreakingSpace|NotRightTriangle|LessEqualGreater|RightUpTeeVector|LeftAngleBracket|GreaterFullEqual|DownArrowUpArrow|RightUpVectorBar|twoheadleftarrow|GreaterEqualLess|downharpoonright|RightTriangleBar|ntrianglerighteq|NotSupersetEqual|LeftUpDownVector|DiacriticalAcute|rightrightarrows|vartriangleright|UpArrowDownArrow|DiacriticalGrave|UnderParenthesis|EmptySmallSquare|LeftUpVectorBar|leftrightarrows|DownRightVector|downharpoonleft|trianglerighteq|ShortRightArrow|OverParenthesis|DoubleLeftArrow|DoubleDownArrow|NotSquareSubset|bigtriangledown|ntrianglelefteq|UpperRightArrow|curvearrowright|vartriangleleft|NotLeftTriangle|nleftrightarrow|LowerRightArrow|NotHumpDownHump|NotGreaterTilde|rightthreetimes|LeftUpTeeVector|NotGreaterEqual|straightepsilon|LeftTriangleBar|rightsquigarrow|ContourIntegral|rightleftarrows|CloseCurlyQuote|RightDownVector|LeftRightVector|nLeftrightarrow|leftharpoondown|circlearrowleft|SquareSuperset|OpenCurlyQuote|hookrightarrow|HorizontalLine|DiacriticalDot|NotLessGreater|ntriangleright|DoubleRightTee|InvisibleComma|InvisibleTimes|LowerLeftArrow|DownLeftVector|NotSubsetEqual|curvearrowleft|trianglelefteq|NotVerticalBar|TildeFullEqual|downdownarrows|NotGreaterLess|RightTeeVector|ZeroWidthSpace|looparrowright|LongRightArrow|doublebarwedge|ShortLeftArrow|ShortDownArrow|RightVectorBar|GreaterGreater|ReverseElement|rightharpoonup|LessSlantEqual|leftthreetimes|upharpoonright|rightarrowtail|LeftDownVector|Longrightarrow|NestedLessLess|UpperLeftArrow|nshortparallel|leftleftarrows|leftrightarrow|Leftrightarrow|LeftRightArrow|longrightarrow|upharpoonleft|RightArrowBar|ApplyFunction|LeftTeeVector|leftarrowtail|NotEqualTilde|varsubsetneqq|varsupsetneqq|RightTeeArrow|SucceedsEqual|SucceedsTilde|LeftVectorBar|SupersetEqual|hookleftarrow|DifferentialD|VerticalTilde|VeryThinSpace|blacktriangle|bigtriangleup|LessFullEqual|divideontimes|leftharpoonup|UpEquilibrium|ntriangleleft|RightTriangle|measuredangle|shortparallel|longleftarrow|Longleftarrow|LongLeftArrow|DoubleLeftTee|Poincareplane|PrecedesEqual|triangleright|DoubleUpArrow|RightUpVector|fallingdotseq|looparrowleft|PrecedesTilde|NotTildeEqual|NotTildeTilde|smallsetminus|Proportional|triangleleft|triangledown|UnderBracket|NotHumpEqual|exponentiale|ExponentialE|NotLessTilde|HilbertSpace|RightCeiling|blacklozenge|varsupsetneq|HumpDownHump|GreaterEqual|VerticalLine|LeftTeeArrow|NotLessEqual|DownTeeArrow|LeftTriangle|varsubsetneq|Intersection|NotCongruent|DownArrowBar|LeftUpVector|LeftArrowBar|risingdotseq|GreaterTilde|RoundImplies|SquareSubset|ShortUpArrow|NotSuperset|quaternions|precnapprox|backepsilon|preccurlyeq|OverBracket|blacksquare|MediumSpace|VerticalBar|circledcirc|circleddash|CircleMinus|CircleTimes|LessGreater|curlyeqprec|curlyeqsucc|diamondsuit|UpDownArrow|Updownarrow|RuleDelayed|Rrightarrow|updownarrow|RightVector|nRightarrow|nrightarrow|eqslantless|LeftCeiling|Equilibrium|SmallCircle|expectation|NotSucceeds|thickapprox|GreaterLess|SquareUnion|NotPrecedes|NotLessLess|straightphi|succnapprox|succcurlyeq|SubsetEqual|sqsupseteq|Proportion|Laplacetrf|ImaginaryI|supsetneqq|NotGreater|gtreqqless|NotElement|ThickSpace|TildeEqual|TildeTilde|Fouriertrf|rmoustache|EqualTilde|eqslantgtr|UnderBrace|LeftVector|UpArrowBar|nLeftarrow|nsubseteqq|subsetneqq|nsupseteqq|nleftarrow|succapprox|lessapprox|UpTeeArrow|upuparrows|curlywedge|lesseqqgtr|varepsilon|varnothing|RightFloor|complement|CirclePlus|sqsubseteq|Lleftarrow|circledast|RightArrow|Rightarrow|rightarrow|lmoustache|Bernoullis|precapprox|mapstoleft|mapstodown|longmapsto|dotsquare|downarrow|DoubleDot|nsubseteq|supsetneq|leftarrow|nsupseteq|subsetneq|ThinSpace|ngeqslant|subseteqq|HumpEqual|NotSubset|triangleq|NotCupCap|lesseqgtr|heartsuit|TripleDot|Leftarrow|Coproduct|Congruent|varpropto|complexes|gvertneqq|LeftArrow|LessTilde|supseteqq|MinusPlus|CircleDot|nleqslant|NotExists|gtreqless|nparallel|UnionPlus|LeftFloor|checkmark|CenterDot|centerdot|Mellintrf|gtrapprox|bigotimes|OverBrace|spadesuit|therefore|pitchfork|rationals|PlusMinus|Backslash|Therefore|DownBreve|backsimeq|backprime|DownArrow|nshortmid|Downarrow|lvertneqq|eqvparsl|imagline|imagpart|infintie|integers|Integral|intercal|LessLess|Uarrocir|intlarhk|sqsupset|angmsdaf|sqsubset|llcorner|vartheta|cupbrcap|lnapprox|Superset|SuchThat|succnsim|succneqq|angmsdag|biguplus|curlyvee|trpezium|Succeeds|NotTilde|bigwedge|angmsdah|angrtvbd|triminus|cwconint|fpartint|lrcorner|smeparsl|subseteq|urcorner|lurdshar|laemptyv|DDotrahd|approxeq|ldrushar|awconint|mapstoup|backcong|shortmid|triangle|geqslant|gesdotol|timesbar|circledR|circledS|setminus|multimap|naturals|scpolint|ncongdot|RightTee|boxminus|gnapprox|boxtimes|andslope|thicksim|angmsdaa|varsigma|cirfnint|rtriltri|angmsdab|rppolint|angmsdac|barwedge|drbkarow|clubsuit|thetasym|bsolhsub|capbrcup|dzigrarr|doteqdot|DotEqual|dotminus|UnderBar|NotEqual|realpart|otimesas|ulcorner|hksearow|hkswarow|parallel|PartialD|elinters|emptyset|plusacir|bbrktbrk|angmsdad|pointint|bigoplus|angmsdae|Precedes|bigsqcup|varkappa|notindot|supseteq|precneqq|precnsim|profalar|profline|profsurf|leqslant|lesdotor|raemptyv|subplus|notnivb|notnivc|subrarr|zigrarr|vzigzag|submult|subedot|Element|between|cirscir|larrbfs|larrsim|lotimes|lbrksld|lbrkslu|lozenge|ldrdhar|dbkarow|bigcirc|epsilon|simrarr|simplus|ltquest|Epsilon|luruhar|gtquest|maltese|npolint|eqcolon|npreceq|bigodot|ddagger|gtrless|bnequiv|harrcir|ddotseq|equivDD|backsim|demptyv|nsqsube|nsqsupe|Upsilon|nsubset|upsilon|minusdu|nsucceq|swarrow|nsupset|coloneq|searrow|boxplus|napprox|natural|asympeq|alefsym|congdot|nearrow|bigstar|diamond|supplus|tritime|LeftTee|nvinfin|triplus|NewLine|nvltrie|nvrtrie|nwarrow|nexists|Diamond|ruluhar|Implies|supmult|angzarr|suplarr|suphsub|questeq|because|digamma|Because|olcross|bemptyv|omicron|Omicron|rotimes|NoBreak|intprod|angrtvb|orderof|uwangle|suphsol|lesdoto|orslope|DownTee|realine|cudarrl|rdldhar|OverBar|supedot|lessdot|supdsub|topfork|succsim|rbrkslu|rbrksld|pertenk|cudarrr|isindot|planckh|lessgtr|pluscir|gesdoto|plussim|plustwo|lesssim|cularrp|rarrsim|Cayleys|notinva|notinvb|notinvc|UpArrow|Uparrow|uparrow|NotLess|dwangle|precsim|Product|curarrm|Cconint|dotplus|rarrbfs|ccupssm|Cedilla|cemptyv|notniva|quatint|frac35|frac38|frac45|frac56|frac58|frac78|tridot|xoplus|gacute|gammad|Gammad|lfisht|lfloor|bigcup|sqsupe|gbreve|Gbreve|lharul|sqsube|sqcups|Gcedil|apacir|llhard|lmidot|Lmidot|lmoust|andand|sqcaps|approx|Abreve|spades|circeq|tprime|divide|topcir|Assign|topbot|gesdot|divonx|xuplus|timesd|gesles|atilde|solbar|SOFTcy|loplus|timesb|lowast|lowbar|dlcorn|dlcrop|softcy|dollar|lparlt|thksim|lrhard|Atilde|lsaquo|smashp|bigvee|thinsp|wreath|bkarow|lsquor|lstrok|Lstrok|lthree|ltimes|ltlarr|DotDot|simdot|ltrPar|weierp|xsqcup|angmsd|sigmav|sigmaf|zeetrf|Zcaron|zcaron|mapsto|vsupne|thetav|cirmid|marker|mcomma|Zacute|vsubnE|there4|gtlPar|vsubne|bottom|gtrarr|SHCHcy|shchcy|midast|midcir|middot|minusb|minusd|gtrdot|bowtie|sfrown|mnplus|models|colone|seswar|Colone|mstpos|searhk|gtrsim|nacute|Nacute|boxbox|telrec|hairsp|Tcedil|nbumpe|scnsim|ncaron|Ncaron|ncedil|Ncedil|hamilt|Scedil|nearhk|hardcy|HARDcy|tcedil|Tcaron|commat|nequiv|nesear|tcaron|target|hearts|nexist|varrho|scedil|Scaron|scaron|hellip|Sacute|sacute|hercon|swnwar|compfn|rtimes|rthree|rsquor|rsaquo|zacute|wedgeq|homtht|barvee|barwed|Barwed|rpargt|horbar|conint|swarhk|roplus|nltrie|hslash|hstrok|Hstrok|rmoust|Conint|bprime|hybull|hyphen|iacute|Iacute|supsup|supsub|supsim|varphi|coprod|brvbar|agrave|Supset|supset|igrave|Igrave|notinE|Agrave|iiiint|iinfin|copysr|wedbar|Verbar|vangrt|becaus|incare|verbar|inodot|bullet|drcorn|intcal|drcrop|cularr|vellip|Utilde|bumpeq|cupcap|dstrok|Dstrok|CupCap|cupcup|cupdot|eacute|Eacute|supdot|iquest|easter|ecaron|Ecaron|ecolon|isinsv|utilde|itilde|Itilde|curarr|succeq|Bumpeq|cacute|ulcrop|nparsl|Cacute|nprcue|egrave|Egrave|nrarrc|nrarrw|subsup|subsub|nrtrie|jsercy|nsccue|Jsercy|kappav|kcedil|Kcedil|subsim|ulcorn|nsimeq|egsdot|veebar|kgreen|capand|elsdot|Subset|subset|curren|aacute|lacute|Lacute|emptyv|ntilde|Ntilde|lagran|lambda|Lambda|capcap|Ugrave|langle|subdot|emsp13|numero|emsp14|nvdash|nvDash|nVdash|nVDash|ugrave|ufisht|nvHarr|larrfs|nvlArr|larrhk|larrlp|larrpl|nvrArr|Udblac|nwarhk|larrtl|nwnear|oacute|Oacute|latail|lAtail|sstarf|lbrace|odblac|Odblac|lbrack|udblac|odsold|eparsl|lcaron|Lcaron|ograve|Ograve|lcedil|Lcedil|Aacute|ssmile|ssetmn|squarf|ldquor|capcup|ominus|cylcty|rharul|eqcirc|dagger|rfloor|rfisht|Dagger|daleth|equals|origof|capdot|equest|dcaron|Dcaron|rdquor|oslash|Oslash|otilde|Otilde|otimes|Otimes|urcrop|Ubreve|ubreve|Yacute|Uacute|uacute|Rcedil|rcedil|urcorn|parsim|Rcaron|Vdashl|rcaron|Tstrok|percnt|period|permil|Exists|yacute|rbrack|rbrace|phmmat|ccaron|Ccaron|planck|ccedil|plankv|tstrok|female|plusdo|plusdu|ffilig|plusmn|ffllig|Ccedil|rAtail|dfisht|bernou|ratail|Rarrtl|rarrtl|angsph|rarrpl|rarrlp|rarrhk|xwedge|xotime|forall|ForAll|Vvdash|vsupnE|preceq|bigcap|frac12|frac13|frac14|primes|rarrfs|prnsim|frac15|Square|frac16|square|lesdot|frac18|frac23|propto|prurel|rarrap|rangle|puncsp|frac25|Racute|qprime|racute|lesges|frac34|abreve|AElig|eqsim|utdot|setmn|urtri|Equal|Uring|seArr|uring|searr|dashv|Dashv|mumap|nabla|iogon|Iogon|sdote|sdotb|scsim|napid|napos|equiv|natur|Acirc|dblac|erarr|nbump|iprod|erDot|ucirc|awint|esdot|angrt|ncong|isinE|scnap|Scirc|scirc|ndash|isins|Ubrcy|nearr|neArr|isinv|nedot|ubrcy|acute|Ycirc|iukcy|Iukcy|xutri|nesim|caret|jcirc|Jcirc|caron|twixt|ddarr|sccue|exist|jmath|sbquo|ngeqq|angst|ccaps|lceil|ngsim|UpTee|delta|Delta|rtrif|nharr|nhArr|nhpar|rtrie|jukcy|Jukcy|kappa|rsquo|Kappa|nlarr|nlArr|TSHcy|rrarr|aogon|Aogon|fflig|xrarr|tshcy|ccirc|nleqq|filig|upsih|nless|dharl|nlsim|fjlig|ropar|nltri|dharr|robrk|roarr|fllig|fltns|roang|rnmid|subnE|subne|lAarr|trisb|Ccirc|acirc|ccups|blank|VDash|forkv|Vdash|langd|cedil|blk12|blk14|laquo|strns|diams|notin|vDash|larrb|blk34|block|disin|uplus|vdash|vBarv|aelig|starf|Wedge|check|xrArr|lates|lbarr|lBarr|notni|lbbrk|bcong|frasl|lbrke|frown|vrtri|vprop|vnsup|gamma|Gamma|wedge|xodot|bdquo|srarr|doteq|ldquo|boxdl|boxdL|gcirc|Gcirc|boxDl|boxDL|boxdr|boxdR|boxDr|TRADE|trade|rlhar|boxDR|vnsub|npart|vltri|rlarr|boxhd|boxhD|nprec|gescc|nrarr|nrArr|boxHd|boxHD|boxhu|boxhU|nrtri|boxHu|clubs|boxHU|times|colon|Colon|gimel|xlArr|Tilde|nsime|tilde|nsmid|nspar|THORN|thorn|xlarr|nsube|nsubE|thkap|xhArr|comma|nsucc|boxul|boxuL|nsupe|nsupE|gneqq|gnsim|boxUl|boxUL|grave|boxur|boxuR|boxUr|boxUR|lescc|angle|bepsi|boxvh|varpi|boxvH|numsp|Theta|gsime|gsiml|theta|boxVh|boxVH|boxvl|gtcir|gtdot|boxvL|boxVl|boxVL|crarr|cross|Cross|nvsim|boxvr|nwarr|nwArr|sqsup|dtdot|Uogon|lhard|lharu|dtrif|ocirc|Ocirc|lhblk|duarr|odash|sqsub|Hacek|sqcup|llarr|duhar|oelig|OElig|ofcir|boxvR|uogon|lltri|boxVr|csube|uuarr|ohbar|csupe|ctdot|olarr|olcir|harrw|oline|sqcap|omacr|Omacr|omega|Omega|boxVR|aleph|lneqq|lnsim|loang|loarr|rharu|lobrk|hcirc|operp|oplus|rhard|Hcirc|orarr|Union|order|ecirc|Ecirc|cuepr|szlig|cuesc|breve|reals|eDDot|Breve|hoarr|lopar|utrif|rdquo|Umacr|umacr|efDot|swArr|ultri|alpha|rceil|ovbar|swarr|Wcirc|wcirc|smtes|smile|bsemi|lrarr|aring|parsl|lrhar|bsime|uhblk|lrtri|cupor|Aring|uharr|uharl|slarr|rbrke|bsolb|lsime|rbbrk|RBarr|lsimg|phone|rBarr|rbarr|icirc|lsquo|Icirc|emacr|Emacr|ratio|simne|plusb|simlE|simgE|simeq|pluse|ltcir|ltdot|empty|xharr|xdtri|iexcl|Alpha|ltrie|rarrw|pound|ltrif|xcirc|bumpe|prcue|bumpE|asymp|amacr|cuvee|Sigma|sigma|iiint|udhar|iiota|ijlig|IJlig|supnE|imacr|Imacr|prime|Prime|image|prnap|eogon|Eogon|rarrc|mdash|mDDot|cuwed|imath|supne|imped|Amacr|udarr|prsim|micro|rarrb|cwint|raquo|infin|eplus|range|rangd|Ucirc|radic|minus|amalg|veeeq|rAarr|epsiv|ycirc|quest|sharp|quot|zwnj|Qscr|race|qscr|Qopf|qopf|qint|rang|Rang|Zscr|zscr|Zopf|zopf|rarr|rArr|Rarr|Pscr|pscr|prop|prod|prnE|prec|ZHcy|zhcy|prap|Zeta|zeta|Popf|popf|Zdot|plus|zdot|Yuml|yuml|phiv|YUcy|yucy|Yscr|yscr|perp|Yopf|yopf|part|para|YIcy|Ouml|rcub|yicy|YAcy|rdca|ouml|osol|Oscr|rdsh|yacy|real|oscr|xvee|andd|rect|andv|Xscr|oror|ordm|ordf|xscr|ange|aopf|Aopf|rHar|Xopf|opar|Oopf|xopf|xnis|rhov|oopf|omid|xmap|oint|apid|apos|ogon|ascr|Ascr|odot|odiv|xcup|xcap|ocir|oast|nvlt|nvle|nvgt|nvge|nvap|Wscr|wscr|auml|ntlg|ntgl|nsup|nsub|nsim|Nscr|nscr|nsce|Wopf|ring|npre|wopf|npar|Auml|Barv|bbrk|Nopf|nopf|nmid|nLtv|beta|ropf|Ropf|Beta|beth|nles|rpar|nleq|bnot|bNot|nldr|NJcy|rscr|Rscr|Vscr|vscr|rsqb|njcy|bopf|nisd|Bopf|rtri|Vopf|nGtv|ngtr|vopf|boxh|boxH|boxv|nges|ngeq|boxV|bscr|scap|Bscr|bsim|Vert|vert|bsol|bull|bump|caps|cdot|ncup|scnE|ncap|nbsp|napE|Cdot|cent|sdot|Vbar|nang|vBar|chcy|Mscr|mscr|sect|semi|CHcy|Mopf|mopf|sext|circ|cire|mldr|mlcp|cirE|comp|shcy|SHcy|vArr|varr|cong|copf|Copf|copy|COPY|malt|male|macr|lvnE|cscr|ltri|sime|ltcc|simg|Cscr|siml|csub|Uuml|lsqb|lsim|uuml|csup|Lscr|lscr|utri|smid|lpar|cups|smte|lozf|darr|Lopf|Uscr|solb|lopf|sopf|Sopf|lneq|uscr|spar|dArr|lnap|Darr|dash|Sqrt|LJcy|ljcy|lHar|dHar|Upsi|upsi|diam|lesg|djcy|DJcy|leqq|dopf|Dopf|dscr|Dscr|dscy|ldsh|ldca|squf|DScy|sscr|Sscr|dsol|lcub|late|star|Star|Uopf|Larr|lArr|larr|uopf|dtri|dzcy|sube|subE|Lang|lang|Kscr|kscr|Kopf|kopf|KJcy|kjcy|KHcy|khcy|DZcy|ecir|edot|eDot|Jscr|jscr|succ|Jopf|jopf|Edot|uHar|emsp|ensp|Iuml|iuml|eopf|isin|Iscr|iscr|Eopf|epar|sung|epsi|escr|sup1|sup2|sup3|Iota|iota|supe|supE|Iopf|iopf|IOcy|iocy|Escr|esim|Esim|imof|Uarr|QUOT|uArr|uarr|euml|IEcy|iecy|Idot|Euml|euro|excl|Hscr|hscr|Hopf|hopf|TScy|tscy|Tscr|hbar|tscr|flat|tbrk|fnof|hArr|harr|half|fopf|Fopf|tdot|gvnE|fork|trie|gtcc|fscr|Fscr|gdot|gsim|Gscr|gscr|Gopf|gopf|gneq|Gdot|tosa|gnap|Topf|topf|geqq|toea|GJcy|gjcy|tint|gesl|mid|Sfr|ggg|top|ges|gla|glE|glj|geq|gne|gEl|gel|gnE|Gcy|gcy|gap|Tfr|tfr|Tcy|tcy|Hat|Tau|Ffr|tau|Tab|hfr|Hfr|ffr|Fcy|fcy|icy|Icy|iff|ETH|eth|ifr|Ifr|Eta|eta|int|Int|Sup|sup|ucy|Ucy|Sum|sum|jcy|ENG|ufr|Ufr|eng|Jcy|jfr|els|ell|egs|Efr|efr|Jfr|uml|kcy|Kcy|Ecy|ecy|kfr|Kfr|lap|Sub|sub|lat|lcy|Lcy|leg|Dot|dot|lEg|leq|les|squ|div|die|lfr|Lfr|lgE|Dfr|dfr|Del|deg|Dcy|dcy|lne|lnE|sol|loz|smt|Cup|lrm|cup|lsh|Lsh|sim|shy|map|Map|mcy|Mcy|mfr|Mfr|mho|gfr|Gfr|sfr|cir|Chi|chi|nap|Cfr|vcy|Vcy|cfr|Scy|scy|ncy|Ncy|vee|Vee|Cap|cap|nfr|scE|sce|Nfr|nge|ngE|nGg|vfr|Vfr|ngt|bot|nGt|nis|niv|Rsh|rsh|nle|nlE|bne|Bfr|bfr|nLl|nlt|nLt|Bcy|bcy|not|Not|rlm|wfr|Wfr|npr|nsc|num|ocy|ast|Ocy|ofr|xfr|Xfr|Ofr|ogt|ohm|apE|olt|Rho|ape|rho|Rfr|rfr|ord|REG|ang|reg|orv|And|and|AMP|Rcy|amp|Afr|ycy|Ycy|yen|yfr|Yfr|rcy|par|pcy|Pcy|pfr|Pfr|phi|Phi|afr|Acy|acy|zcy|Zcy|piv|acE|acd|zfr|Zfr|pre|prE|psi|Psi|qfr|Qfr|zwj|Or|ge|Gg|gt|gg|el|oS|lt|Lt|LT|Re|lg|gl|eg|ne|Im|it|le|DD|wp|wr|nu|Nu|dd|lE|Sc|sc|pi|Pi|ee|af|ll|Ll|rx|gE|xi|pm|Xi|ic|pr|Pr|in|ni|mp|mu|ac|Mu|or|ap|Gt|GT|ii);|&(Aacute|Agrave|Atilde|Ccedil|Eacute|Egrave|Iacute|Igrave|Ntilde|Oacute|Ograve|Oslash|Otilde|Uacute|Ugrave|Yacute|aacute|agrave|atilde|brvbar|ccedil|curren|divide|eacute|egrave|frac12|frac14|frac34|iacute|igrave|iquest|middot|ntilde|oacute|ograve|oslash|otilde|plusmn|uacute|ugrave|yacute|AElig|Acirc|Aring|Ecirc|Icirc|Ocirc|THORN|Ucirc|acirc|acute|aelig|aring|cedil|ecirc|icirc|iexcl|laquo|micro|ocirc|pound|raquo|szlig|thorn|times|ucirc|Auml|COPY|Euml|Iuml|Ouml|QUOT|Uuml|auml|cent|copy|euml|iuml|macr|nbsp|ordf|ordm|ouml|para|quot|sect|sup1|sup2|sup3|uuml|yuml|AMP|ETH|REG|amp|deg|eth|not|reg|shy|uml|yen|GT|LT|gt|lt)(?!;)([=a-zA-Z0-9]?)|&#([0-9]+)(;?)|&#[xX]([a-fA-F0-9]+)(;?)|&([0-9a-zA-Z]+)/g,h={aacute:"",Aacute:"",abreve:"",Abreve:"",ac:"",acd:"",acE:"",acirc:"",Acirc:"",acute:"",acy:"",Acy:"",aelig:"",AElig:"",af:"",afr:"",Afr:"",agrave:"",Agrave:"",alefsym:"",aleph:"",alpha:"",Alpha:"",amacr:"",Amacr:"",amalg:"",amp:"&",AMP:"&",and:"",And:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",aogon:"",Aogon:"",aopf:"",Aopf:"",ap:"",apacir:"",ape:"",apE:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",aring:"",Aring:"",ascr:"",Ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",atilde:"",Atilde:"",auml:"",Auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",bcy:"",Bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",beta:"",Beta:"",beth:"",between:"",bfr:"",Bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bnot:"",bNot:"",bopf:"",Bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxhD:"",boxHd:"",boxHD:"",boxhu:"",boxhU:"",boxHu:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpe:"",bumpE:"",bumpeq:"",Bumpeq:"",cacute:"",Cacute:"",cap:"",Cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",ccaron:"",Ccaron:"",ccedil:"",Ccedil:"",ccirc:"",Ccirc:"",Cconint:"",ccups:"",ccupssm:"",cdot:"",Cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",chcy:"",CHcy:"",check:"",checkmark:"",chi:"",Chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cire:"",cirE:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",colone:"",Colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",cscr:"",Cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cup:"",Cup:"",cupbrcap:"",cupcap:"",CupCap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",dArr:"",Darr:"",dash:"",dashv:"",Dashv:"",dbkarow:"",dblac:"",dcaron:"",Dcaron:"",dcy:"",Dcy:"",dd:"",DD:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",delta:"",Delta:"",demptyv:"",dfisht:"",dfr:"",Dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",djcy:"",DJcy:"",dlcorn:"",dlcrop:"",dollar:"$",dopf:"",Dopf:"",dot:"",Dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",downarrow:"",Downarrow:"",DownArrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",dscr:"",Dscr:"",dscy:"",DScy:"",dsol:"",dstrok:"",Dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",dzcy:"",DZcy:"",dzigrarr:"",eacute:"",Eacute:"",easter:"",ecaron:"",Ecaron:"",ecir:"",ecirc:"",Ecirc:"",ecolon:"",ecy:"",Ecy:"",eDDot:"",edot:"",eDot:"",Edot:"",ee:"",efDot:"",efr:"",Efr:"",eg:"",egrave:"",Egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",emacr:"",Emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",eng:"",ENG:"",ensp:"",eogon:"",Eogon:"",eopf:"",Eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",epsilon:"",Epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",esim:"",Esim:"",eta:"",Eta:"",eth:"",ETH:"",euml:"",Euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",fcy:"",Fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",ffr:"",Ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",fopf:"",Fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",gamma:"",Gamma:"",gammad:"",Gammad:"",gap:"",gbreve:"",Gbreve:"",Gcedil:"",gcirc:"",Gcirc:"",gcy:"",Gcy:"",gdot:"",Gdot:"",ge:"",gE:"",gel:"",gEl:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",gfr:"",Gfr:"",gg:"",Gg:"",ggg:"",gimel:"",gjcy:"",GJcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",gopf:"",Gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",gscr:"",Gscr:"",gsim:"",gsime:"",gsiml:"",gt:">",Gt:"",GT:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",hardcy:"",HARDcy:"",harr:"",hArr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",hcirc:"",Hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",hstrok:"",Hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",iacute:"",Iacute:"",ic:"",icirc:"",Icirc:"",icy:"",Icy:"",Idot:"",iecy:"",IEcy:"",iexcl:"",iff:"",ifr:"",Ifr:"",igrave:"",Igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",ijlig:"",IJlig:"",Im:"",imacr:"",Imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",int:"",Int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",iocy:"",IOcy:"",iogon:"",Iogon:"",iopf:"",Iopf:"",iota:"",Iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",itilde:"",Itilde:"",iukcy:"",Iukcy:"",iuml:"",Iuml:"",jcirc:"",Jcirc:"",jcy:"",Jcy:"",jfr:"",Jfr:"",jmath:"",jopf:"",Jopf:"",jscr:"",Jscr:"",jsercy:"",Jsercy:"",jukcy:"",Jukcy:"",kappa:"",Kappa:"",kappav:"",kcedil:"",Kcedil:"",kcy:"",Kcy:"",kfr:"",Kfr:"",kgreen:"",khcy:"",KHcy:"",kjcy:"",KJcy:"",kopf:"",Kopf:"",kscr:"",Kscr:"",lAarr:"",lacute:"",Lacute:"",laemptyv:"",lagran:"",lambda:"",Lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larr:"",lArr:"",Larr:"",larrb:"",
larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",latail:"",lAtail:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",lcaron:"",Lcaron:"",lcedil:"",Lcedil:"",lceil:"",lcub:"{",lcy:"",Lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",leftarrow:"",Leftarrow:"",LeftArrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",Leftrightarrow:"",LeftRightArrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",leg:"",lEg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",lfr:"",Lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",ljcy:"",LJcy:"",ll:"",Ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",lmidot:"",Lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",Longleftarrow:"",LongLeftArrow:"",longleftrightarrow:"",Longleftrightarrow:"",LongLeftRightArrow:"",longmapsto:"",longrightarrow:"",Longrightarrow:"",LongRightArrow:"",looparrowleft:"",looparrowright:"",lopar:"",lopf:"",Lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",lstrok:"",Lstrok:"",lt:"<",Lt:"",LT:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",map:"",Map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",mcy:"",Mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",mfr:"",Mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",mopf:"",Mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",mu:"",Mu:"",multimap:"",mumap:"",nabla:"",nacute:"",Nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",ncaron:"",Ncaron:"",ncedil:"",Ncedil:"",ncong:"",ncongdot:"",ncup:"",ncy:"",Ncy:"",ndash:"",ne:"",nearhk:"",nearr:"",neArr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:"\n",nexist:"",nexists:"",nfr:"",Nfr:"",nge:"",ngE:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",ngt:"",nGt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",njcy:"",NJcy:"",nlarr:"",nlArr:"",nldr:"",nle:"",nlE:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nlt:"",nLt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",not:"",Not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrarr:"",nrArr:"",nrarrc:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",nscr:"",Nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsube:"",nsubE:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupe:"",nsupE:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",ntilde:"",Ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",nu:"",Nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",oacute:"",Oacute:"",oast:"",ocir:"",ocirc:"",Ocirc:"",ocy:"",Ocy:"",odash:"",odblac:"",Odblac:"",odiv:"",odot:"",odsold:"",oelig:"",OElig:"",ofcir:"",ofr:"",Ofr:"",ogon:"",ograve:"",Ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",omacr:"",Omacr:"",omega:"",Omega:"",omicron:"",Omicron:"",omid:"",ominus:"",oopf:"",Oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",or:"",Or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",oscr:"",Oscr:"",oslash:"",Oslash:"",osol:"",otilde:"",Otilde:"",otimes:"",Otimes:"",otimesas:"",ouml:"",Ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",pcy:"",Pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",pfr:"",Pfr:"",phi:"",Phi:"",phiv:"",phmmat:"",phone:"",pi:"",Pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",pr:"",Pr:"",prap:"",prcue:"",pre:"",prE:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",pscr:"",Pscr:"",psi:"",Psi:"",puncsp:"",qfr:"",Qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",qscr:"",Qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",racute:"",Racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarr:"",rArr:"",Rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",rarrtl:"",Rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",rcaron:"",Rcaron:"",rcedil:"",Rcedil:"",rceil:"",rcub:"}",rcy:"",Rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",rho:"",Rho:"",rhov:"",RightAngleBracket:"",rightarrow:"",Rightarrow:"",RightArrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",sacute:"",Sacute:"",sbquo:"",sc:"",Sc:"",scap:"",scaron:"",Scaron:"",sccue:"",sce:"",scE:"",scedil:"",Scedil:"",scirc:"",Scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",scy:"",Scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",sfr:"",Sfr:"",sfrown:"",sharp:"",shchcy:"",SHCHcy:"",shcy:"",SHcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",sigma:"",Sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",softcy:"",SOFTcy:"",sol:"/",solb:"",solbar:"",sopf:"",Sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",sscr:"",Sscr:"",ssetmn:"",ssmile:"",sstarf:"",star:"",Star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",sube:"",subE:"",subedot:"",submult:"",subne:"",subnE:"",subplus:"",subrarr:"",subset:"",Subset:"",su,ssu"",topcir:"",topf:"",Topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",rave:"",Ugrave:"",uHar:"",uharl:"",uha",ultri:"",umacr:"",Umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",uogon:"",Uogon:"",uopf:"",Uopf:"",uparrow:"",Uparrow:"",UpArrow:"",UpArrowBar:"",UpArrowDownArrow:"",updownarrow:"",Updownarrow:"",UpDownArrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",upsilon:"",Upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",uring:"",Uring:"",urtri:"",uscr:"",Uscr:"",utdot:"",utilde:"",Utilde:"",utri:"",utrif:"",uuarr:"",uuml:"",Uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",vcy:"",Vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",vee:"",Vee:"",veebar:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",vfr:"",Vfr:"",vltri:"",vnsub:"",vnsup:"",vopf:"",Vopf:"",vprop:"",vrtri:"",vscr:"",Vscr:"",vsubne:"",vsubnE:"",vsupne:"",vsupnE:"",Vvdash:"",vzigzag:"",wcirc:"",Wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",wfr:"",Wfr:"",wopf:"",Wopf:"",wp:"",wr:"",wreath:"",wscr:"",Wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",xfr:"",Xfr:"",xharr:"",xhArr:"",xi:"",Xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",xopf:"",Xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",xscr:"",Xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",yacute:"",Yacute:"",yacy:"",YAcy:"",ycirc:"",Ycirc:"",ycy:"",Ycy:"",yen:"",yfr:"",Yfr:"",yicy:"",YIcy:"",yopf:"",Yopf:"",yscr:"",Yscr:"",yucy:"",YUcy:"",yuml:"",Yuml:"",zacute:"",Zacute:"",zcaron:"",Zcaron:"",zcy:"",Zcy:"",zdot:"",Zdot:"",zeetrf:"",ZeroWidthSpace:"",zeta:"",Zeta:"",zfr:"",Zfr:"",zhcy:"",ZHcy:"",zigrarr:"",zopf:"",Zopf:"",zscr:"",Zscr:"",zwj:"",zwnj:""},m={aacute:"",Aacute:"",acirc:"",Acirc:"",acute:"",aelig:"",AElig:"",agrave:"",Agrave:"",amp:"&",AMP:"&",aring:"",Aring:"",atilde:"",Atilde:"",auml:"",Auml:"",brvbar:"",ccedil:"",Ccedil:"",cedil:"",cent:"",copy:"",COPY:"",curren:"",deg:"",divide:"",eacute:"",Eacute:"",ecirc:"",Ecirc:"",egrave:"",Egrave:"",eth:"",ETH:"",euml:"",Euml:"",frac12:"",frac14:"",frac34:"",gt:">",GT:">",iacute:"",Iacute:"",icirc:"",Icirc:"",iexcl:"",igrave:"",Igrave:"",iquest:"",iuml:"",Iuml:"",laquo:"",lt:",not:"",ntilde:"",Ntilde:"",oacute:"",Oacute:"",ocirc:"",Ocirc:"",ograve:"",Ograve:"",ordf:"",ordm:"",oslash:"",Oslash:"",otilde:"",Otilde:"",ouml:"",Ouml:"",para:"",plusmn:"",pound:"",quot:'"',QUOT:'"',raquo:"",reg:"",REG:"",sect:"",shy:"",sup1:"",sup2:"",sup3:"",szlig:"",thorn:"",THORN:"",times:"",uacute:"",Uacute:"",ucirc:"",Ucirc:"",ugrave:"",Ugrave:"",uml:"",uuml:"",Uuml:"",yacute:"",Yacute:"",yen:"",yuml:""},b={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},l=[1,2,3,4,5,6,7,8,11,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,64976,64977,64978,64979,64980,64981,64982,64983,64984,64985,64986,64987,64988,64989,64990,64991,64992,64993,64994,64995,64996,64997,64998,64999,65e3,65001,65002,65003,65004,65005,65006,65007,65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111],w=String.fromCharCode,P={},C=P.hasOwnProperty,_=function(e,n){return C.call(e,n)},v=function(e,n){for(var o=-1,a=e.length;++o<a;)if(e[o]==n)return!0;return!1},y=function(e,n){if(!e)return n;var o,a={};for(o in n)a[o]=_(e,o)?e[o]:n[o];return a},W=function(e,n){var o="";return e>=55296&&e<=57343||e>1114111?(n&&R("character reference outside the permissible Unicode range"),""):_(b,e)?(n&&R("disallowed character reference"),b[e]):(n&&v(l,e)&&R("disallowed character reference"),e>65535&&(e-=65536,o+=w(e>>>10&1023|55296),e=56320|1023&e),o+=w(e))},D=function(e){return"&#x"+e.toString(16).toUpperCase()+";"},I=function(e){return"&#"+e+";"},R=function(e){throw Error("Parse error: "+e)},S=function(e,n){n=y(n,S.options);var o=n.strict;o&&p.test(e)&&R("forbidden code point");var a=n.encodeEverything,c=n.useNamedReferences,f=n.allowUnsafeSymbols,u=n.decimal?I:D,h=function(e){return u(e.charCodeAt(0))};return a?(e=e.replace(t,function(e){return c&&_(d,e)?"&"+d[e]+";":h(e)}),c&&(e=e.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;").replace(/&#x66;&#x6A;/g,"&fjlig;")),c&&(e=e.replace(g,function(e){return"&"+d[e]+";"}))):c?(f||(e=e.replace(s,function(e){return"&"+d[e]+";"})),e=e.replace(/&gt;\u20D2/g,"&nvgt;").replace(/&lt;\u20D2/g,"&nvlt;"),e=e.replace(g,function(e){return"&"+d[e]+";"})):f||(e=e.replace(s,h)),e.replace(i,function(e){var n=e.charCodeAt(0),o=e.charCodeAt(1),a=1024*(n-55296)+o-56320+65536;return u(a)}).replace(r,h)};S.options={allowUnsafeSymbols:!1,encodeEverything:!1,strict:!1,useNamedReferences:!1,decimal:!1};var x=function(e,n){n=y(n,x.options);var o=n.strict;return o&&f.test(e)&&R("malformed character reference"),e.replace(u,function(e,a,i,t,r,g,d,s,c){var f,p,u,b,l,w;return a?(l=a,h[l]):i?(l=i,w=t,w&&n.isAttributeValue?(o&&"="==w&&R("`&` did not start a character reference"),e):(o&&R("named character reference was not terminated by a semicolon"),m[l]+(w||""))):r?(u=r,p=g,o&&!p&&R("character reference was not terminated by a semicolon"),f=parseInt(u,10),W(f,o)):d?(b=d,p=s,o&&!p&&R("character reference was not terminated by a semicolon"),f=parseInt(b,16),W(f,o)):(o&&R("named character reference was not terminated by a semicolon"),e)})};x.options={isAttributeValue:!1,strict:!1};var B=function(e){return e.replace(s,function(e){return c[e]})},E={version:"1.2.0",encode:S,decode:x,escape:B,unescape:x};if("function"==typeof define&&"object"==typeof define.amd&&define.amd)define(function(){return E});else if(n&&!n.nodeType)if(o)o.exports=E;else for(var G in E)_(E,G)&&(n[G]=E[G]);else e.he=E}(this);
function swoosh(e,n){return i=1,framerate=1e3/60,posX=0,node=e,offsetStep=node.firstChild.offsetWidth,duration=1,time=0,runtime=0,animFrame=null,offset=0,previousMovement=0,movement=0,context=null,animating=!1,clicked=!1,backboneContext=n,touchTimerStart=0,touchTimerEnd=0,flagMoved=!1,minOffset=window.screen.width/100*20,device=!1,{loop:function(){time=((new Date).getTime()+3e3)/1e3,this.moveLeft()},clickLeft:function(){offset=0,posX=0,previousMovement=0,time=((new Date).getTime()+3e3)/1e3,runtime=0,window.clicked||(window.clicked=!0,this.moveLeft())},clickRight:function(){offset=0,posX=0,previousMovement=0,time=((new Date).getTime()+3e3)/1e3,runtime=0,window.clicked||(window.clicked=!0,this.moveRight())},moveLeft:function(){function e(){if(++i,posX+=i*framerate,runtime=time-(new Date).getTime()/1e3,runtime<1)return time=((new Date).getTime()+3e3)/1e3,runtime=0,i=1,posX=0,window.cancelAnimationFrame(animFrame),void(animating=!1);if(!(posX<=offsetStep)){posX=offsetStep,node.style.transform="translate3d(-"+posX+"px, 0, 0)",node.style.webkitTransform="translate3d(-"+posX+"px, 0, 0)",posX=0,i=0,node.removeChild(node.firstChild);var n=node.firstChild.cloneNode(!0);return n.onclick=function(e){context.clickHandler(e)},node.firstChild.style.position="absolute",node.firstChild.style.left="-"+offsetStep+"px",node.firstChild.style.zIndex="-9999999",offsetH=(node.firstChild.offsetHeight-node.firstChild.querySelector("img").offsetHeight)/100*50,offsetH>1&&(node.firstChild.style.top=offsetH+"px"),node.style.transform="translate3d(0px, 0, 0)",node.style.webkitTransform="translate3d(0px, 0, 0)",node.appendChild(n),void(window.hasOwnProperty("theInterval")&&node.children.length>1?setTimeout(function(){context.resetTimer(),window.clicked=!1},100):window.clicked=!1)}node.style.transform="translate3d(-"+posX+"px, 0, 0)",node.style.webkitTransform="translate3d(-"+posX+"px, 0, 0)",animFrame=window.requestAnimationFrame(e)}animFrame=window.requestAnimationFrame(e)},moveRight:function(){function e(){if(++i,posX+=i*framerate,runtime=time-(new Date).getTime()/1e3,runtime<1)return time=((new Date).getTime()+3e3)/1e3,runtime=0,i=1,posX=0,window.cancelAnimationFrame(animFrame),void(animating=!1);if(!(posX<=offsetStep)){posX=offsetStep,node.style.transform="translate3d("+posX+"px, 0, 0)",node.style.webkitTransform="translate3d("+posX+"px, 0, 0)",posX=0,i=0,node.removeChild(node.lastChild);var n=node.lastChild.cloneNode(!0);return n.style.position="absolute",n.style.left="-"+offsetStep+"px",n.style.zIndex="-9999999",n.onclick=function(e){context.clickHandler(e)},node.firstChild.removeAttribute("style"),node.style.transform="translate3d(0px, 0, 0)",node.insertBefore(n,node.firstChild),offsetH=(node.firstChild.offsetHeight-node.firstChild.querySelector("img").offsetHeight)/100*50,offsetH>1&&(n.style.top=offsetH+"px"),void(window.hasOwnProperty("theInterval")&&node.children.length>1?setTimeout(function(){context.resetTimer(),window.clicked=!1},100):window.clicked=!1)}node.style.transform="translate3d("+posX+"px, 0, 0)",node.style.webkitTransform="translate3d("+posX+"px, 0, 0)",animFrame=window.requestAnimationFrame(e)}animFrame=window.requestAnimationFrame(e)},initializeSlider:function(e,n,o){node=n,device=e;var a=node.firstChild.cloneNode(!0);node.appendChild(a),node.firstChild.style.position="absolute",node.firstChild.style.left="-"+a.offsetWidth+"px",node.firstChild.style.zIndex="-9999999",offsetH=(a.offsetHeight-a.querySelector("img").offsetHeight)/100*50,offsetH>1&&a.querySelector("img").offsetHeight>0&&(a.style.top=offsetH+"px"),e&&!o&&node.children.length>2?this.applyEvents():(context=this,a.onclick=function(e){context.clickHandler(e)})},updateSlider:function(e){if(node.children.length>1){node.firstChild.removeAttribute("style");var n=veChild(node.firstChild),node.appendChild(n),node.firstChild.style.position="absolute",node.firstChild.style(node.firstChild.offsetHeight-node.firstChild.querySelector("img").offsetHeight)/100*50,offsetH>1&&node.firstChild.querySelector("img").offsetHeight>0&&(node.firstChild.style.top=offsetH+"px"),window.hasOwnProperty("theInterval")&&node.children.length>1?setTimeout(function(){context.resetTimer(),window.clicked=!1},100):window.clicked=!1,!device&&node.children.length>2&&(document.getElementsByClassName("KGDocPicker_promoArrows_rme("KGDocPicker_promoArrows_left")[0].removeAttribute("style"),document.getElementsByClassName("KGDocPicker_promoArrows_left")[0].addEventListener("mouseup",function(e){window.clicked||window.KGPugpigCarousel.clickRight()}),document.getElementsByClassName("KGDocPicker_promoArrows_right")[0].addEventListener("mouseup",function(e){window.clicked||window.KGPugpigCarousel.clickLeft()}),_.isUndefined(window.theInterval)&&this.resetTimer())}else node.firstChild.removeAttribute("style"),document.getElementsByClassName("KGDocPicker_promoArrows_right")[0].style.display="none",document.getElementsByClassName("KGDocPicker_promoArrows_left")[0].style.display="none"},applyEvents:function(){context=this,node.addEventListener("touchstart",this.eventHandler.bind(this)),node.addEventListener("touchend",this.eventHandler.bind(this))},eventHandler:function(e){switch(e.preventDefault(),e.type){case"touchstart":touchTimerStart=(new Date).getTime(),node.addEventListener("touchmove",this.eventHandler),node.addEventListener("touchend",this.eventHandler),window.hasOwnProperty("theInterval")&&window.theInterval&&clearInterval(window.theInterval),offset=0,flagOut=!0;break;case"touchend":touchTimerEnd=(new Date).getTime();var n=touchTimerEnd-touchTimerStart;n/1e3<.2&&!flagMoved&&context.clickHandler(e),node.removeEventListener("touchmove",this.eventHandler),node.removeEventListener("touchend",this.eventHandler),flagMoved=!1,flagOut=!1,animating=!0,Math.abs(offset)>minOffset?(time=0,posX=0,posX=Math.abs(offset),previousMovement=0,time=((new Date).getTime()+3e3)/1e3,offset<0?context.moveLeft():context.moveRight(),animating=!1):(context.animateBack(),animating=!1);break;case"touchmove":node.children.length>1&&(flagMoved=!0,flagOut&&(offset+=context.moveDirection(e)xt.moveLeft():context.moveRight(),offset=0))}},moveDirection:function(e){return 0!==previousMovement?(movement=e.touches[0].clientX-previousMovement,previousMovement=e.touches[0].clientX,movement):(previousMovement=e.touches[0].clientX,movement)},animateBack:funcset<-20&&(offset+=2*framerate),offset>20&&(offset-=2*framerate),offset<-20||offset>20?(node.style.transform="translate3d("+offset+"px, 0, 0)",node.style.webkitTransform="translate3d("+offset+"px, 0, 0)",void(animFrame=window.requestAnimationFrame(e))):(offset=0,previousMovement=offset,node.style.transform="translate3d("+offset+"px, 0, 0)",node.style.webkitTransform="translate3d("+offset+"px, 0, 0)",window.cancelAnimationFrame(animFrame),animating=!1,void(!_.isUndefined(window.theInterval)&&node.children.length>1&&context.resetTimer()))}animFrame=window.requestAnimationFrame(e)},resetTimer:function(){clearInterval(window.theInterval),window.theInterval=setInterval(function(){window.KGPugpigCarousel.loop()},5e3)},clickHandler:function(e){var n={id:e.target.getAttribute("id"),link:e.target.getAttribute("data-link"),title:e.target.getAttribute("data-title"),placement:e.target.getAttribute("data-placement")};backboneContext._appCh.trigger("analytics:hit",{type:"event",eventCategory:"/Storefront",eventAction:"PromoOpened",eventLabel:n.id}),backboneContext._appCh.request("carousel:click:clone",n)}}}!function(e){e.parseManifest=function(e){var n,o,a,i,t,r,g,d,s;if(t=e.split(/\r\n|\r|\n/),a=t.shift(),0!==a.indexOf("CACHE MANIFEST"))throw new Error("Invalid cache manifest header: "+a);if(a.length>"CACHE MANIFEST".length&&" "!==a[14]&&"\t"!==a[14])throw new Error("Invalid cache manifest header: "+a);for(n="CACHE",o={cache:[],network:[],fallback:{},settings:[],tokens:[]},r="CACHE",o.tokens=[{type:"magic signature",value:"CACHE MANIFEST"}],d=0,s=t.length;d<s;d++)i=t[d],i=i.trim(),i.length?0===i.indexOf("#")?o.tokens.push({type:"comment",value:i.substring(1)}):["CACHE:","FALLBACK:","NETWORK:","SETTINGS:"].indexOf(i)>=0?(r=i.substring(0,i.length-1),o.tokens.push({type:"mode",value:r})):i.indexOf(":")===i.length-1?(r="unknown",o.tokens.push({type:"mode",value:r,raw:i})):(g=i.split(/[ ]+/),o.tokens.push({type:"data",tokens:g}),"FALLBACK"===r?o.fallback[g[0]]=g[1]:"unknown"!==r&&o[r.toLowerCase()].push(i)):o.tokens.push({type:"newline"});return o}}(window);var TinyURI={regex:{isAbsoluteWithoutProtocol:/^\//,isAbsoluteWithProtocol:/(:\/\/)/},filename:function(e,n){return e+="/"===e[e.length-1]?n:"/"+n},absoluteTo:function(e,n){var o,a=document.implementation.createHTMLDocument("newdoc");if(this.regex.isAbsoluteWithoutProtocol.test(e))o=window.location.protocol+e;else if(this.regex.isAbsoluteWithProtocol.test(e))o=e;else{var i=window.location.pathname.substr(0,window.location.pathname.lastIndexOf("/")+1);o=window.location.protocol+"//"+window.location.host+i+e}var t=a.createElement("base");return t.setAttribute("href",o),a.head.appendChild(t),this.qualifyUrl(a,n)},qualifyUrl:function(e,n){var o=e.createElement("a");return o.setAttribute("href",n),e.body.appendChild(o),o.href.toString()},parse:function(e){for(var n={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/[i]||"";return a[removeAnchor:function(e){var n=this.parse(e);return n.protocol+"://"+n.authority+n.path}};_.mixin({uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=16*Math.random()|0,o="x"==e?n:3&n|8;return o.toString(16)})},merge:function(){return _.reduce(arguments,function(e,n){return _.extend(e,n)},{})},get:function(e,n,o){return"string"==typeof n&&(n=n.split(".")),void 0===e?o:0===n.length?e:null===e?o:_.get(e[n[0]],_.rest(n),o)},getParameterByName:function(e,n){n="?"!==n[0]?"?"+n:n,e=e.replace(/[\[\]]/g,"\\$&");var o=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),a=o.exec(n);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},splice:function(e,n,o,a){return e.slice(0,n)+a+e.slice(n+Math.abs(o))},pad:function(e,n,o){return o=o||"0",e+="",e.length>=n?e:new Array(n-e.length+1).join(o)+e},lssName=e.className||"",e.src?o.src=e.src:e.srcText&&o.appendChild(document.createTextNode(e.srcText)),e.onload&&(o.onload=e.onload),e.onload&&(o.onerror=e.onerror),n.appendChild(o)},capitalize:function(e){return"string"!=typeof e||e.length<=1?"":e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}}),function(e,n){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(e,o){return n(e,o)});else if("undefined"!=typeof exports){var o=require("backbone"),a=require("underscore");module.exports=n(o,a)}else n(e.Backbone,e._,e.Mousetrap)}(this,function(e,n,o){var a=e.View.prototype.delegateEvents,i=e.View.prototype.undelegateEvents,t=e.View.prototype.remove,r={};n.extend(e.View.prototype,{keyboardEvents:{},bindKeyboardEvents:function(e){if(e||(e=n.result(this,"keyboardEvents"))){for(var a in e){var i=e[a];if(n.isFunction(i)||(i=this[e[a]]),!i)throw new Error('Method "'+e[a]+'" does not exist');i=n.bind(i,this),"bindGlobal"in o&&(a.indexOf("mod")!==-1||a.indexOf("command")!==-1||a.indexOf("ctrl")!==-1)?o.bindGlobal(a,i):o.bind(a,i),r[a]=this}return this}},unbindKeyboardEvents:function(){for(var e in this.keyboardEvents)r[e]===this&&(o.unbind(e),delete r[e]);return this},delegateEvents:function(){var e=a.apply(this,arguments);return this.bindKeyboardEvents(),e},undelegateEvents:function(){var e=i.apply(this,arguments);return this.unbindKeyboardEvents&&this.unbindKeyboardEvents(),e},remove:function(){var e=t.apply(this,arguments);return this.unbindKeyboardEvents&&this.unbindKeyboardEvents(),e}})}),function(){for(var e=0,n=["ms","moz","webkit","o"],o=0;o<n.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[n[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[o]+"CancelAnimationFrame"]||window[n[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n,o){var a=(new Date).getTime(),i=Math.max(0,16-(a-e)),t=window.setTimeout(function(){n(a+i)},i);return e=a+i,t}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),function(){function e(){var e;do e=Math.floor(1e9*Math.random());while(e in n);return e}var n={};window.requestNextAnimationFrame||(window.requestNextAnimationFrame=function(o,a){var i=e();return n[i]=requestAnimationFrame(function(){n[i]=requestAnimationFrame(function(e){delete n[i],o(e)},a)},a),i}),window.cancelNextAnimationFrame||(window.cancelNextAnimationFrame=function(e){n[e]&&(cancelAnimationFrame(n[e]),delete n[e])})}();var transitionEndEventName="WebkitTransition"in document.documentElement.style?"webkitTransitionEnd":"transitionend";$.fn.transitionClass=function(e,n){return n=n||{},window.requestNextAnimationFrame(_.bind(function(){Modernizr.csstransitions?_.isFunction(n.complete)&&(n.forceComplete?n.complete.call(this):this.one(transitionEndEventName,n.complete)):_.isFunction(n.complete)&&n.complete.call();var o=_.has(n,"state")?n.state:void 0;this.toggleClass(e,o)},this)),this};var transitionEndEventName="WebkitTransition"in document.documentElement.style?"webkitTransitionEnd":"transitionend";$.fn.transitionAttributes=function(e,n){return n=n||{},window.requestNextAnimationFrame(_.bind(function(){Modernizr.csstransitions?"function"==typeof n.complete&&(n.forceComplete?n.complete.call(this):this.one(transitionEndEventName,n.complete)):"function"==typeof n.complete&&n.complete.call();var o=_.has(n,"state")?n.state:void 0;Object.keys(e).forEach(function(n){o?this.attr(n,e[n]):this.removeAttr(n)},this)},this)),this};var timeAgo={templates:{prefix:"",suffix:" ago",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years"},template:function(e,n){return this.templates[e]&&this.templates[e].replace(/%d/i,Math.abs(Math.round(n)))},timer:function(e){if(e){e=e.replace(/\.\d+/,""),e=e.replace(/-/,"/").replace(/-/,"/"),e=e.replace(/T/," ").replace(/Z/," UTC"),e=e.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),e=new Date(1e3*e||e);var n=new Date,o=.001*(n.getTime()-e)>>0,a=o/60,i=a/60,t=i/24,r=t/365;return this.templates.prefix+(o<45&&this.template("seconds",o)||o<90&&this.template("minute",1)||a<45&&this.template("minutes",a)||a<90&&this.template("hour",1)||i<24&&this.template("hours",i)||i<42&&this.template("day",1)||t<30&&this.template("days",t)||t<45&&this.template("month",1)||t<365&&this.template("months",t/30)||r<1.5&&this.template("year",1)||this.template("years",r))+this.templates.suffix}}};!function(e,n){if("function"==typeof define&&define.amd)define(["backbone","underscore"],function(e,o){return n(e,o)});else if("undefined"!=typeof exports){var o=require("backbone"),a=require("underscore");module.exports=n(o,a)}else n(e.Backbone,e._)}(this,function(e,n){e.Cache=function(){this.store={}},$.extend(e.Cache.prototype,e.Events,{set:function(e,n,o){o=o||"json";var a=this.encode(n,o);this.trigger("set",e,n),this.store[e]=a},has:function(e){var n=!!this.store[e];return this.trigger("has",e,n),n},get:function(e,n){n=n||"json";var o=this.store[e],a=this.decode(o,n);return this.trigger("get",e,a),a},remove:function(e){var n=this.store[e];return this.trigger("remove",e,n),delete this.store[e],n},clear:function(){this.trigger("clear"),this.store={}},encode:function(e,o){if(n.isEmpty(e))return"";o=o||"json";var a;switch(o){case"json":e=JSON.stringify(e);break;case"xml":var i=new XMLSerializer;e=i.serializeToString(e),e=this.encodeHtmlEntity(e)}return a=e},decode:function(e,o){if(n.isEmpty(e))return"";o=o||"json";var a;switch(o){case"json":a=JSON.parse(e);break;case"xml":var i=new DOMParser;e=this.decodeHtmlEntity(e),a=i.parseFromString(e,"text/xml")}return a},encodeHtmlEntity:function(e){return e.replace(/./gm,function(e){return"&#"+e.charCodeAt(0)+";"})},decodeHtmlEntity:function(e){return e.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(n)})}})});var docCookies={getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,n,o,a,i,t){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var r="";if(o)switch(o.constructor){case Number:r=o===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+o;break;case String:r="; expires="+o;break;case Date:r="; expires="+o.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(n)+r+(i?"; domain="+i:"")+(a?"; path="+a:"")+(t?"; secure":""),!0},removeItem:function(e,n,o){return!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:"")+(n?"; path="+n:""),!0)},hasItem:function(e){return!!e&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),n=e.length,o=0;o<n;o++)e[o]=decodeURIComponent(e[o]);return e}};window.KGPugpigCore={App:{},Models:{},Collections:{},Views:{Collections:{},Items:{},Layouts:{},Assets:{}},Routers:{AppRouter:{}},Templates:{},Modules:{},Analytics:{},Entities:{},Extensions:{},Behaviors:{},fw:{}},function(e,n){n(e.Backbone,e._,e.TinyURI,e.Logger,e.FastClick,e.Base64,e.timeAgo,e.Basil)}(this,function(e,n,o,a,i,t,r,g){KGPugpigCore.fw.Backbone=e.noConflict(),KGPugpigCore.fw.Marionette=KGPugpigCore.fw.Backbone.Marionette.noConflict(),KGPugpigCore.fw.Backbone.Radio=KGPugpigCore.fw.Backbone.Radio.noConflict(),KGPugpigCore.fw.Backbone.Cache=KGPugpigCore.fw.Backbone.Cache;var d={attributePrefix:[],arrayAccessFormPaths:["feed.link","feed.entry","feed.entry.link","feed.entry.category"]};KGPugpigCore.fw.X2JS=new X2JS(d),KGPugpigCore.fw.URI=o,KGPugpigCore.fw.Logger=a.noConflict(),KGPugpigCore.fw.FastClick=i,KGPugpigCore.fw.timeAgo=r,KGPugpigCore.fw.Basil=g,KGPugpigCore.fw.he=he,KGPugpigCore.fw.docCookies=docCookies}),this.KGPugpigCore=this.KGPugpigCore||{},this.KGPugpigCore.Templates=this.KGPugpigCore.Templates||{},this.KGPugpigCore.Templates.AppRoot=function(e){var n="";_.escape,Array.prototype.join;return n+='<div class="assets-icons"></div><div class="assets-images"></div> ',e.isConfigurationMode===!0&&(n+=' <div class="KGConfigurationMode top-banner">Configuration Mode</div> '),n+=" ",e.isPreviewMode===!0&&(n+=' <div class="KGPreviewMode corner-ribbon bottom-left shadow">preview</div> '),n},this.KGPugpigCore.Templates.Icons=function(e){var n="";_.escape;return n+="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";
},this.KGPugpigCore.Templates.ImagesAssets=function(e){var n="";_.escape;return n+='<img class="assets-images-noCoverEdition">'},KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.Extensions._IconsRender=function(e){if(!_.isEmpty(e.$el.html())&&!(e.$el.hasClass("icons-svgstore")||e.$el.find(".icons-svgstore").length>0)){var n=e.$el.find(".icon").filter(function(){return!this.innerHTML.replace(/\s/g,"").length});0!==n.length&&_.forEach(n,function(n){var o=$(n),a=_.filter(n.className.split(" "),function(e){return e.indexOf("icon-")>-1&&e.indexOf("icon--")===-1}),i=e._appCh.request("get:icon:title",a.toString().substr(5));_.isEmpty(i)||o.attr("data-tooltip",i),e.$el.find(n).append('<svg><use xlink:href="#'+a+'">')})}}}(),KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.Extensions._LogEvents={_logStart:function(e){_.bindAll(this,"_logEvents"),this._logObjectName=e,_.isUndefined(this.logEvents)&&(this.logEvents={}),this.listenTo(this,"all",this._logEvents)},_logEvents:function(e){var n=_.rest(arguments,1),o=_.isUndefined(this.logEvents.all)?this.logEvents[e]||"debug":this.logEvents.all;this._log(o,e,n)},_log:function(e){var n=_.rest(arguments,1);n.unshift("["+this._logObjectName+"] "+this.name+": "),this._subappCh.trigger(e,n)}}}(),KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.Extensions._RadioChannels={_setupRadioChannels:function(e,n){n=n||"KGPugpigReader",e=e||this.appChannelName,this._radio=_.extend({},KGPugpigCore.fw.Backbone.Radio),this._appCh=this._radio.channel(n),this._subappCh=this._radio.channel(e)}}}(),function(){var e={_init:function(e,n){this._setupRadioChannels(n),this._logStart(this.objectName)}},n=_.merge(e,KGPugpigCore.Extensions._LogEvents,KGPugpigCore.Extensions._RadioChannels);KGPugpigCore.fw.Backbone.Model.prototype=_.extend(KGPugpigCore.fw.Backbone.Model.prototype,n),KGPugpigCore.fw.Backbone.Collection.prototype=_.extend(KGPugpigCore.fw.Backbone.Collection.prototype,n),KGPugpigCore.fw.Backbone.View.prototype=_.extend(KGPugpigCore.fw.Backbone.View.prototype,n),KGPugpigCore.fw.Marionette.Object.prototype=_.extend(KGPugpigCore.fw.Marionette.Object.prototype,n),KGPugpigCore.fw.Marionette.Module.prototype=_.extend(KGPugpigCore.fw.Marionette.Module.prototype,n),KGPugpigCore.fw.Marionette.Behavior.prototype=_.extend(KGPugpigCore.fw.Marionette.Behavior.prototype,n),KGPugpigCore.fw.Marionette.AppRouter.prototype=_.extend(KGPugpigCore.fw.Marionette.AppRouter.prototype,n)}(),KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.fw.Marionette.Application.prototype._initChannel=function(){this.channelName=_.result(this,"channelName")||"global",this.channel=_.result(this,"channel")||KGPugpigCore.fw.Backbone.Radio.channel(this.channelName)},KGPugpigCore.Extensions.Application=KGPugpigCore.fw.Marionette.Application.extend({objectName:"Application",constructor:function(){this._init(arguments,this.name),this.appCache=new KGPugpigCore.fw.Backbone.Cache,this._appCh.reply("app:cache",_.bind(function(){return this.appCache},this)),KGPugpigCore.fw.Marionette.Application.apply(this,arguments)}})}(),KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.Extensions.AppRouter=KGPugpigCore.fw.Marionette.AppRouter.extend({objectName:"AppRouter",constructor:function(){this._init(arguments),KGPugpigCore.fw.Marionette.AppRouter.apply(this,arguments)}})}(),KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.Extensions.Module=KGPugpigCore.fw.Marionette.Module.extend({objectName:"Module",constructor:function(){this._init(arguments),this._uri=KGPugpigCore.fw.URI,KGPugpigCore.fw.Marionette.Module.apply(this,arguments)}})}(),KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.Extensions.Behavior=KGPugpigCore.fw.Marionette.Behavior.extend({objectName:"Behavior",constructor:function(){this._init(arguments),KGPugpigCore.fw.Marionette.Behavior.apply(this,arguments)}})}(),KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.Extensions.Collection=KGPugpigCore.fw.Backbone.Collection.extend({objectName:"Collection",logEvents:{invalid:"warn",error:"error"},constructor:function(e,n){this._init(arguments),this.options=n,_.isUndefined(n)||_.isUndefined(n.url)||(this.url=n.url),KGPugpigCore.fw.Backbone.Collection.apply(this,arguments)},getAdjacent:function(e,n){var o=this.getAdjacentIndex(e.getIndexInCollection(),n);if(o!==-1)return this.at(o)},getAdjacentIndex:function(e,n){var o;switch(n){case"previous":o=0===e?-1:e-1;break;case"next":o=e===this.length-1?-1:e+1}return o}})}(),KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.Extensions.Model=KGPugpigCore.fw.Backbone.NestedModel.extend({objectName:"Model",logEvents:{invalid:"warn",error:"error"},constructor:function(e){this._init(arguments),this._uri=KGPugpigCore.fw.URI,_.isUndefined(e)||_.isUndefined(e.cacheObject)||(this.cacheObject=e.cacheObject),KGPugpigCore.fw.Backbone.Model.apply(this,arguments)},fetch:function(e){if(this.cacheKey=!1,e.cache&&(this.cacheKey=this.url,this.cacheObject=this.cacheObject||new KGPugpigCore.fw.Backbone.Cache),!this.cacheKey||!this.cacheObject)return KGPugpigCore.fw.Backbone.NestedModel.prototype.fetch.call(this,e);e=e||{};var n=this.cacheObject,o=this.cacheKey,a=e.success;return n.has(o)?(this.trigger("request",this),void ser("sync",this),a&&a(this,i,e),$.Deferred().resolve()},this),50)):(e.success=_.bind(function(e,i,t){n.set(o,i,t.dataType),a&&a(e,i,t)},this),KGPugpigCore.fw.Backbone.NestedModel.prototype.fetch.call(this,e))},getIndexInCollection:function(){return this.collection.indexOf(this)}})}(),KGPugpigCore.Behaviors=KGPugpigCore.Behaviors||{},function(){KGPugpigCore.Behaviors.ThemePicker=KGPugpigCore.Extensions.Behavior.extend({name:"ThemePickerEdit",appChannelName:"KGPugpigCore",initialize:function(){_.bindAll(this,"emptyElements"),_.isUndefined(this.view.themePi.editButton").length&&$(".editButton").transitionClass("is-hidden",{complete:function(){$(this).addClass("hidding-complete")}})}),this._appCh.on("empty:elements",this.emptyElements),_.forEach(this.view.themePickerElements,function(e){0===e.indexOf(".")?this.events["mouseenter"+e]="onEnterThemeElement":this.events["mouseenter @ui."+e]="onEnterThemeElement"},this))},emptyElements:function(){this.element=""},onClickThemeElement:function(e){_.isEmpty(e)||this._appCh.trigger("themepicker:event",{element:e})},onEnterThemeElement:function(e){if(this._appCh.request("is:mode:themepicker")){$(".editButton").addClass("is-hidden hidding-complete");var n=$(e.currentTarget),o=!_.isEmpty(n.attr("class"))&&n.attr("class").split(" ")[0];if("A"===n.prop("tagName")&&!o){var a=n.parent().parent().parent().attr("class");o=a.indexOf("Settings")>-1?"KGSettings_tabContent_link":"KGAccountPanel_link"}var i=!1;if(0===$('.editButton[data-class="'+o+'"]').length){var t=$("#KGPugpigReader"),r=o.split("_");r.shift(),r=r.join(" ").replace(/([A-Z])/g," $1"),t.prepend('<button class="editButton editButton--pointingTop" data-class='+o+">Edit "+r.toLowerCase()+"</button>"),i=!0}g.removeClass("is-hidden hidding-complete"),i&&g.on("click",_.bind(function(){this.onClickThemeElement(o)},this)),o){var d=n[0].getBoundingClientRect(),s=d.left+d.width/2-g.outerWidth()/2,c=d.bottom-1;d.bottom>=window.innerHeight||d.height>150?(c=d.top<=0?0:d.top-g.outerHeight(),g.removeClass("editButton--pointingTop"),s=g.outerWidth()/2+d.left):g.addClass("editButton--pointingTop");var f=g.outerWidth();s+f>window.innerWidth?(g.addClass("hide-arrow"),g.css({top:c,left:"auto",right:0})):s<0?(g.addClass("hide-arrow"),g.css({top:c,left:0,right:"auto"})):(g.removeClass("hide-arrow"),g.css({top:c,left:s,right:"auto"})),this._appCh.trigger("empty:elements"),this.element=o}}}})}(),KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.Extensions.ItemView=KGPugpigCore.fw.Marionette.ItemView.extend({objectName:"ItemView",constructor:function(){this._init(arguments),this.listenTo(this,"render",KGPugpigCore.Extensions._IconsRender),this.behaviors=this.behaviors||{},_.assign(this.behaviors,this.defaultBehaviors),KGPugpigCore.fw.Marionette.ItemView.apply(this,arguments)},defaultBehaviors:{ThemePicker:{behaviorClass:KGPugpigCore.Behaviors.ThemePicker}}})}(),KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.Extensions.LayoutView=KGPugpigCore.fw.Marionette.LayoutView.extend({objectName:"LayoutView",constructor:function(){this._init(arguments),this.listenTo(this,"render",KGPugpigCore.Extensions._IconsRender),this.behaviors=this.behaviors||{},_.assign(this.behaviors,this.defaultBehaviors),KGPugpigCore.fw.Marionette.LayoutView.apply(this,arguments)},defaultBehaviors:{ThemePicker:{behaviorClass:KGPugpigCore.Behaviors.ThemePicker}}})}(),KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.Extensions.CollectionView=KGPugpigCore.fw.Marionette.CollectionView.extend({objectName:"CollectionView",constructor:function(){this._init(arguments),KGPugpigCore.fw.Marionette.CollectionView.apply(this,arguments)}})}(),KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.Extensions.CompositeView=KGPugpigCore.fw.Marionette.CompositeView.extend({objectName:"CompositeView",constructor:function(){this._init(arguments),this.listenTo(this,"before:attach",KGPugpigCore.Extensions._IconsRender),KGPugpigCore.fw.Marionette.CompositeView.apply(this,arguments)}})}(),KGPugpigCore.Extensions=KGPugpigCore.Extensions||{},function(){KGPugpigCore.Extensions.PanelAppRoot=KGPugpigCore.Extensions.LayoutView.extend({objectName:"PanelAppRoot",transitionDuration:400,transitionEasing:"ease",previousFocus:null,initialize:function(){_.bindAll(this,"panelShow","panelClose","panelAttach","getPanelSize"),this.listenTo(this,"show",this.panelShow),this.listenTo(this,"close",this.panelClose),this.listenTo(this,"attach",this.panelAttach),this.triggerMethod("inntationchange"Position||"right"},panelAttach:function(){this.getPanelSize(),this.$el.attr("role","menu"),this.$el.attr("aria-hidden","true"),this.$el.find(".js-panel-close").on("click",this.panelClose),this.$el.addClassn),this.el.addEventListener("touchmove",this.onTouchMovePanel)},onTouchMovePanel:function(e){e.target.classList.contains("KGPanel_content")&&e.preventDefault(),e.stopPropagation()},nShow:0,panelShow:function(){this.appPreRender?this.nShow+1>1?this.toggleDisplay(!0):this.nShow=1:this.toggleDisplay(!0)},panelClose:function(){this.toggleDisplay(!1)},getPanelSize:function(){this.panelSize=this.$el[0].getBoundingClientRect()},toggleDisplay:function(e,n){e===!0?this.slideIn():e===!1&&this.isDisplayed===!0&&this.slideOut(),this.isDisplayed=e,this.triggerMethod("toggle:display",e,n)},slideIn:function(){var e={};switch(this.panelPosition){case"top":e.top=0;break;case"bottom":e.bottom=0;break;case"left":e.left=0;break;case"right":default:e.right=0}this.$el.velocity(e,{duration:this.transitionDuration,easing:this.transitionEasing,begin:_.bind(function(){this.$el.attr("aria-live","polite"),this.$el.attr("tabindex","-1"),this.previousFocus=document.activeElement,this.$el.focus(),this.$el.attr("aria-hidden","false"),this.$el.addClass("KGPanel-isDisplayed"),this._appCh.trigger("app:overlay:show",this.modalref),this.triggerMethod("slide:in:begin")},this),complete:_.bind(function(){this._appCh.once("overlay:click",this.panelClose),this.triggerMethod("slide:in:complete")},this)})},slideOut:function(){var e={};switch(this.panelPosition){case"top":e.top="-"+(this.panelSize.height+15)+"px";break;case"bottom":e.bottom="-"+this.panelSize.height+"px";break;case"left":e.left=this.panelSize.width>=400?"-"+this.panelSize.width+"px":"-100%";break;case"right":default:e.right=this.panelSize.width>=400?"-"+this.panelSize.width+"px":"-100%"}this.$el.velocity(e,{duration:this.transitionDuration,easing:this.transitionEasing,begin:_.bind(function(){this._appCh.trigger("app:overlay:hide",this.modalref),this._appCh.off("overlay:click")},this),complete:_.bind(function(){this.$el.removeAttr("tabindex"),this.previousFocus.focus(),this.$el.attr("aria-hidden","true"),this.$el.removeClass("KGPanel-isDisplayed")},this)})}})}(),KGPugpigCore.Modules=KGPugpigCore.Modules||{},function(){KGPugpigCore.Modules.Theme=KGPugpigCore.Extensions.Module.extend({name:"Theme",textElements:{},layoutElements:{},initialize:function(){_.bindAll(this,"getTheme","getElementThemeKeys"),this.app._subappCh.reply("theme",this.getTheme),this.app._subappCh.reply("theme:element:keys",this.getElementThemeKeys)},getTheme:function(){return{ssName:this.ssName,cssNamespace:this.cssNamespace,themePrefix:this.themePrefix,textElements:this.textElements,layoutElements:this.layoutElements}},getElementThemeKeys:function(e){if(!_.isUndefined(this.textElements["."+e])){var n=this.textElements["."+e];return _.map(["Font","TextColor","FontSize","TextBackgroundColor","FontWeight"],function(e){var o=n+"_"+e;return{key:o,value:this._appCh.request("theme:key","^"+o+"$")}},this)}}})}(),KGPugpigCore.Modules=KGPugpigCore.Modules||{},function(){KGPugpigCore.Modules.Config=KGPugpigCore.Extensions.Module.extend({name:"Config",appChannelName:"KGPugpigCore",startWithParent:!0,regex:{isNewNamespace:/^pugpig./,isEditionCred:/(_USER_ID|_PASSWORD)$/,isAuthUrl:/URL$/,isOldConfigCache:/-appConfig$/},initialize:function(){_.bindAll(this,"requestConfigKey","appHasAuth","requestCustomImage","getAppCustomText","appHasFeature"),this.app._appCh.reply("app:has:auth",this.appHasAuth),this.app._appCh.reply("config:key",this.requestConfigKey),this.app._appCh.reply("config:custom:image",this.requestCustomImage),this.app._appCh.reply("custom:text",this.getArt:function(){this.app.options.appCustomText={},this.defaultConfigValues(),this.migrateOldLocalStorageNamespace()},requestConfigKey:function(e){return _.get(this.app.options,e)},requestCustomImage:function(e){return this.app.options.images[e]},defaultConfigValues:function(){this.app.options.appName=this.getAppName(),this.app.options.appVersion=this.getAppVersion(),this.app.options.features=this.getFeaturesConfig(),this.app.options.share=this.getShareOptions(),this.app.options.docviewer=this.getDocViewerConfig(),this.app.options.theme=this.getCustomTheme(),this.app.options.analytics=this.getAnalyticsConfig(),this.app.options.account=this.getAccountConfig(),this.app.options.docpicker=this.getDocPickerConfig(),this.app.options.things=this.getThingsConfig(),this.app.options.settings=this.getSettingsConfig(),this.app.options.search=this.getSearchConfig(),this.app.options.images=this.getImagesConfig(),this.app.options.maxEditions=this.getMaxEditions(),this.app.options.static=this.getMarketingConfig(),this.app.options.privacyBanner=this.getPrivacyBannerConfig(),this.app.options.storefrontGrid=this.getStorefrontGrid(),"preview"===this.app.options.mode&&(this.app.options.logLevel="info")},getStorefrontGrid:function(){var e={};return e="undefined"!=typeof this.app.options.storefrontGrid&&this.app.options.storefrontGrid},getPrivacyBannerConfig:function(){return!!this.app.options.privacyBanner&&this.app.options.privacyBanner},getMarketingConfig:function(){if(this.app.options.hasOwnProperty("static"))return this.app.options.static.hasOwnProperty("autoSlider")||(this.app.options.static.autoSlider=!1),this.app.options.static;var e={autoSlider:!1};return e},getMaxEditions:function(){return"undefined"!=typeof this.app.options.maxEditions?this.app.options.maxEditions:100},getFeaturesConfig:function(){var e=this.app.options.features||{};return"undefined"!=typeof this.app.options.disableStoreFront&&(e.storefront="true"!==this.app.options.disableStoreFront),{nightmode:"undefined"!=typeof e.nightmode&&e.nightmode,search:"undefined"==typeof e.search||e.search,storefront:"undefined"==typeof e.storefront||e.storefront,analytics:"undefined"==typeof e.analytics||e.analytics,printing:"undefined"!=typeof e.printing&&e.printing,crossSearch:"undefined"!=typeof e.crossSearch&&e.crossSearch,thumbnails:"undefined"==typeof e.thumbnails||e.thumbnails,share:"undefined"==typeof e.share||e.share,magicLogin:"undefined"!=typeof e.magicLogin&&e.magicLogin,hasAllFilter:"undefined"==typeof e.hasAllFilter||e.hasAllFilter,arrows:"undefined"==typeof e.arrows||e.arrows,featuredEdition:"undefined"==typeof e.featuredEdition||e.featuredEdition,hideEmptyFilters:"undefined"!=typeof e.hideEmptyFilters&&e.hideEmptyFilters,allowAlternateLandscape:"undefined"!=typeof e.allowAlternateLandscape&&e.allowAlternateLandscape}},getImagesConfig:function(){var e={},n=this.app.options.images||{};return Object.keys(n).forEach(function(o){e[o]=KGPugpigCore.fw.URI.absoluteTo(this.app.options.feed,n[o])},this),e},appHasAuth:function(){return!!this.app.options.account},appHasFeature:function(e){return this.app.options.features[e]},getDocPickethis.getDocPickerCustomText();var e={customButtons:this.app.options.toolbarButtons||[]};return e.customButtons=e.customButtons.fiomButtons.forEach(function(e){e.width=parseInt(e.width,10),e.height=parseInt(e.height,10),e.target=e.target||"_blank"}),e},getDocPickerCustomText:function(){var e=this.app.options.customText||{},n=e?e.editionSynopsis:{},o={beforePrintText:e.beforePrintText||"For the best printing experience please use the print button available within your editions.",viewButton:n&&n.viewButton?n.viewButton:"View",loginButton:n&&n.loginButton?n.loginButton:"Log in",sampleButton:n&&n.sampleButton?n.sampleButton:"Preview",downloadLink:n&&n.downloadLink?n.downloadLink:"Download"};return o},getSettingsConfig:function(){var e=this.app.options.customText||{},n=e&&e.settings?e.settings:{},o={settingsPanelHeader:n.settineneralTab||n.generalTabHeader||"General",textResizeLabel:n.textResizeLabel||"Text Size",nightModeLabel:n.nightModeLabel||"Night Mode",feedbackLabel:n.feedbackLabel||"Feedback",feedbackContent:n.feedbackContent||'Although we appreciate and monitor app store reviews, we cannot respond directly to them. Please send your feedback and queries to <a href="mailto:feedback@yourdomain.com">feeback@yourdomain.com</a>.'};this.app.options.features.analytics&&_.assign(o,{analyticsTrackingLabel:n.analyticsTrackingLabel||"Disable Analytics Tracking",analyticsTrackingContent:n.analyticsTrackingContent||"This app uses Google Analytics to gather anonymous usage data that helps us to improve our app. To opt out use the switch above."});var a=!!n.privacyTabHeader||!!n.privacyLabel||!!n.privacyContent;return(a||this.app.options.features.analytics)&&_.assign(o,{privacyTabHeader:n.privacyTabHeader||"Privacy",privacyLabel:n.privacyLabel||"Privacy Policy",privacyContent:n.privacyContent||"Your policy goes here"}),this.app.options.features.privacy=this.app.options.features.analytics||a,{customText:o,tabs:n.tabs||[],features:this.app.options.features||{}}},getImplementationConfig:function(e){return{type:"implementation",loginType:e.loginType||"default",loginFlow:e.loginFlow||"default",tokenExchangeData:e.tokenExchangeParams||void 0}},getAccountConfig:function(){var e={},n=_.map(this.app.options.authenticationModal,function(e){var n=[];return n.push(this.getImplementationConfig(e)),_.forEach(Object.keys(e),function(o){if(this.regex.isAuthUrl.test(o)){var a=KGPugpigCore.fw.URI.absoluteTo(this.app.options.feed,e[o]);switch(o){case"signInURL":n.push({method:"POST",type:"signin",template:a,inputs:e.subscriptionInputs||[]});break;case"verifySubscriptionURL":n.push({method:"POST",type:"verify",template:a});break;case"editionCredentialsURL":n.push({method:"POST",type:"editioncredentials",template:a});break;case"renewTokenURL":n.push({method:"POST",type:"renewtoken",template:a});break;case"redirectURL":n.push({method:"POST",type:"redirect",template:a});break;case"authorizationURL":n.push({method:"POST",type:"authorization",template:a});break;case"tokenExchangeURL":n.push({method:"POST",type:"tokenexchange",template:a})}}},this),{name:e.loginModalId,automaticLogin:!_.isUndefined(e.automaticLogin)&&e.automaticLogin,cookieLogin:"undefined"!=typeof e.cookieLogin&&e.cookieLogin,silent:"undefined"!=typeof e.silent&&e.silent,endpoints:n}},this);return e.providers=!_.isEmpty(n)&&n,e.providers?e.customText=this.getAccountCustomText(e.providers.length):e=!1,e},getAccountConfigFromOpds:function(e){var n={};n.customText=this.getAccountCustomText();var o=e.authorisationprovider.map(function(e){if("undefined"==typeof e._store){var n=e.endpoint.map(function(e){return{type:e._type,method:e._method||"POST",template:e._template}});return{name:e._name,automaticLogin:"undefined"!=typeof e._autologin,endpoints:n}}},this);return o=_.filter(o,function(e){return"undefined"!=typeof e}),n.providers=!_.isEmpty(o)&&o,n.providers?n.customText=this.getAccountCustomText(n.providers.length):n=!1,n},getAccountCustomText:function(e){for(var n=this.app.options.customText||{},o=n.authenticationDefaultText||{},a=n||!1,paycriptionDeteMessageonAuton:s.logoutButton||"Logout",updateButton:s.updateButton||"Update"},c.authenticationError={getTokenError:a.getTokenError||"Whoops! Something went wrong whilst logging you in.",verifySubscriptionError:a.verifySubscriptionError||"Whoops! Something went wrong whilst verifying your subscription."},t.authProvider.push(c)}return t},getSearchConfig:function(){this.app.options.appCustomText.search=this.getSearchCustomText();var e=this.app.options.appCustomText.search;return e="undefined"!=typeof this.app.options.search?_.extend(e,this.app.options.search):_.extend(e,{hideSearchOptions:!1})},getSearchCustomText:function(){var e=this.app.options.customText||{},n=e.search||{};return{showSummary:"undefined"==typeof n.showSummary||n.showSummary,showThumbnail:"undefined"==typeof n.showThumbnail||n.showThumbnail,showTitle:"undefined"==typeof n.showTitle||n.showTitle,showEditionTitle:"undefined"==typeof n.showEditionTitle||n.showEditionTitle,showDate:"undefined"==typeof n.showDate||n.showDate,showSection:"undefined"==typeof n.showSection||n.showSection,filterFacet:"undefined"!=typeof this.app.options.search&&"undefined"!=typeof this.app.options.search.filterFacet?this.app.options.search.filterFacet:"",searchPanelHeader:n.searchPanelHeader||"Search",thisEditionToggleLabel:n.thisEditionToggleLabel||"This edition",allEditionsToggleLabel:n.allEditionsToggleLabel||"All editions",searchInputPlaceholder:n.searchInputPlaceholder||"Please type keyword",hideSearchOptions:"undefined"==typeof n.hideSearchOptions||n.hideSearchOptions}},getAppCustomText:function(e){return _.get(this.app.options.appCustomText,e)},getAppName:function(){return this.app.options.name||this.app.options.publicationName||"[missing app:config:name]"},getAppVersion:function(){return this.app.options.version||"?"},getShareOptions:function(){var e=this.app.options.customText||{},e=e.share||{};return _.extend(this.app.options.share||{},{displayShareLinks:{facebook:!0,twitter:!0,pinterest:!0,email:!0,google:!0},sharePanelHeader:"undefined"!=typeof e.sharePanelHeader?e.sharePanelHeader:"Share"})},getDocViewerConfig:function(){var e={customButtons:this.app.options.toolbarButtons||[],footerContent:!!this.app.options.footerContent&&this.app.options.footerContent};return e.customButtons=e.customButtons.filter(function(e){return e.type=e.type||"viewer","viewer"===e.type}),e.customButtons.forEach(function(e){e.width=parseInt(e.width,10),e.height=parseInt(e.height,10),e.target=e.target||"_blank"}),e},getCustomTheme:function(){return this.app.options.theme||{}},getAnalyticsConfig:function(){if(this._appCh.request("is:device","mode","webview"))return{NativeBridgePugpig:{className:"NativeBridgePugpig"}};var e={};return"undefined"!=typeof this.app.options.googleAnalyticsUA&&this._appCh.request("is:device","mode","browser")&&(e=_.extend(e,{GoogleAnalyticsPugpig:{className:"GoogleAnalyticsPugpig",ua:this.app.options.googleAnalyticsUA}})),"undefined"!=typeof this.app.options.googleAnalyticsMeasurementID&&this._appCh.request("is:device","mode","browser")&&(e=_.extend(e,{GoogleAnalytics4:{className:"GoogleAnalytics4",ua:this.app.options.googleAnalyticsMeasurementID}})),"undefined"!=typeof this.app.options.adobeAnalyticScript&&this._appCh.request("is:device","mode","browser")&&(e=_.extend(e,{AdobeAnalyticsPugpig:{className:"AdobeAnalyticsPugpig",script:this.app.options.adobeAnalyticScript}})),"undefined"!=typeof this.app.options.pCode&&this._appCh.request("is:device","mode","browser")&&(e=_.extend(e,{Quantcast:{className:"Quantcast",pCode:this.app.options.pCode}})),"undefined"!=typeof this.app.options.gtm_settings&&this._appCh.request("is:device","mode","browser")&&(e=_.extend(e,{Go,key:this.app.options.gtm_settings.key||"",url:this.app.options.gtm_settings.url||""}})),this.app.options.analytics=this.app.options.analytics||{},Object.keys(this.app.options.analytics).forEach(function(n){var o=this.app.options.analytics;if("undefined"!=typeof o[n].customScriptFile){var a=o[n].customScriptFile;o[n].customScriptFile=KGPugpigCore.fw.URI.absoluteTo(window.location,a),e[n]=o[n]}},this),e},getThingsConfig:function(){var e={},n=this.app.options.things||{},o=n.customText||{};return e.customText={},e.customText.wishlistTextAdded=o.wishlistText||"Added to wishlist",e.customText.wishlistTextRemoved=o.wishlistTextRemoved||"Removed from wishlist",e.dataUrl=n.dataUrl,e.callingLink=n.callingLink,e.productsInWishlist=n.productsInWishlist||[],e},migrateOldLocalStorageNamespace:function(){if(!this._appCh.request("is:device","mode","webview")){var e=new KGPugpigCore.fw.Basil({namespace:""});if(e.check("local")!==!1){var n=[],o=e.get("LOGIN_TOKEN");if(o){var a=Object.keys(o)[0];n.push({isLoggedIn:!0,name:a,loginToken:o[a]})}else o||_.isUndefined(localStorage.LOGIN_TOKEN)||(o=!0,n.push({isLoggedIn:!0,name:"pugpig-not-defined",loginToken:localStorage.LOGIN_TOKEN,allowedIssues:localStorage.SUBSCRIPTION_ISSUES,message:localStorage.SUBSCRIPTION_MESSAGE,state:localStorage.SUBSCRIPTION_STATE}));o&&e.set("USER_SUBS",n,{namespace:"pugpig"}),e.remove("LOGIN_TOKEN"),e.remove("SUBSCRIPTION_ISSUES"),e.remove("SUBSCRIPTION_MESSAGE"),e.remove("SUBSCRIPTION_STATE"),e.keys().forEach(function(n){return this.regex.isOldConfigCache.test(n)?void e.remove(n):void(!this.regex.isNewNamespace.test(n)&&this.regex.isEditionCred.test(n)&&(e.set(n,e.get(n),{namespace:"pugpig"}),e.remove(n)))},this)}}}})}(),KGPugpigCore.Modules=KGPugpigCore.Modules||{},function(){KGPugpigCore.Modules.Cookie=KGPugpigCore.Extensions.Module.extend({name:"Cookie",appChannelName:"KGPugpigCore",cssNamespace:"KGPugpigReader",initialize:function(){},onStart:function(){this.setItem("kaldor-pugpig-visited",!0,31536e3,"/")},getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,n,o,a,i,t){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var r="";if(o)switch(o.constructor){case Number:r=o===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+o;break;case String:r="; expires="+o;break;case Date:r="; expires="+o.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(n)+r+(i?"; domain="+i:"")+(a?"; path="+a:"")+(t?"; secure":""),!0},removeItem:function(e,n,o){return!!this.hasItem(e)&&(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(o?"; domain="+o:"")+(n?"; path="+n:""),!0)},hasItem:function(e){return!(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))&&new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),n=e.length,o=0;o<n;o++)e[o]=decodeURIComponent(e[o]);return e}})}(),KGPugpigCore.Modules=KGPugpigCore.Modules||{},function(){KGPugpigCore.Modules.Scaffold=KGPugpigCore.Extensions.Module.extend({name:"Scaffold",appChannelName:"KGPugpigCore",startWithParent:!0,onStart:function(){if("undefined"==typeof PugpigWeb)_.isEmpty(this.app.getOption("appContainer"))&&this.createDocument();else{var e=[];if(_.isEmpty(this.app.getOption("appContainer"))){var n=_.last($('script[src*="KGPugpigReader"], script[src*="KGPugpigCore"], script[src*="app-launcher"]'));e.push("width: 100%"),e.push("height: 0%");var o=$("<div>",{id:"KGPugpigReader",style:e.join(";")});_.isEmpty(n)?(o.appendTo($("body")),this._log("debug",'Inserted #KGPugpigReader inside "body"')):(o.insertAfter($(n)),this._log("debug","Inserted #KGPugpigReader after "+n))}else{r"));e.push("width: "+a.outerWidth()+"px"),e.push("top: "+a.scrollTop()+"px"),$("<div>",{id:"KGPugpigReader",class:"KGPugpigReader-isWidget",style:e.join(";")}).appendTo($(this.app.getOption("appContainer"))),this._log("debug","Inserted #KGPugpigReader inside "+this.app.getOption("appContainer"))}}},cument.createElement("head"),o=document.createElement("style"),a=document.createEthis.getAppCssCoe","webview")||(e=this.createLoadingScreen()),this._appCh.request("is:device","os","ios|android")){var r=document.createElement("meta");r.setAttribute("name","viewport"),r.setAttribute("content","width=device-width, height=device-height, initial-scale=1, maximum-scale=1, user-scalable=0"),n.appendChild(r)}o.setAttribute("class","KGPugpigReader-css"),o.setAttribute("type","text/css"),o.setAttribute("media","screen"),o.appendChild(document.createTextNode(t.screen)),n.appendChild(o),i.setAttribute("id","KGPugpigReader"),a.appendChild(i),"undefined"!=typeof e&&a.appendChild(e),document.documentElement.replaceChild(n,document.head),document.documentElement.replaceChild(a,document.body)},createLoadingScreen:function(){var e=this.app.options.theme,n=e.LoadingScreen_Logo||e.BrandLogo,o=e.LoadingScreen_TextColor||"#FFFFFF",a=e.LoadingScreen_BackgroundImage||"radial-gradient( at top, #2c2e32 20%, #000000 100% )",i=e.LoadingScreen_BackgroundColor||"#2c2e32",t=e.FontName||"Helvetica, Arial",r=document.createElement("div");
if(container=document.createElement("div"),brandLogo=document.createElement("figure"),messageContainer=document.createElement("div"),message=document.createElement("p"),spinner=document.createElement("div"),spinnerFigure=document.createElement("figure"),n){var g=new Image;g.src=n,brandLogo.setAttribute("class","loading-screen__brand"),brandLogo.appendChild(g),container.appendChild(brandLogo)}return message.style.color=o,message.textContent="Loading...",messageContainer.appendChild(message),messageContainer.setAttribute("class","loading-screen__message"),messageContainer.style["font-family"]=t,container.appendChild(messageContainer),spinner.setAttribute("class","loading-screen__spinner"),spinner.appendChild(spinnerFigure),container.appendChild(spinner),r.style["background-image"]=a,r.style["background-color"]=i,r.setAttribute("class","loading-screen loading-screen--isVisible"),r.appendChild(container),r},getAppCssCode:function(){var e={};return"undefined"==typeof KGPugpigReaderStyle?e.screen=this.getStylesheetsCode("KGPugpigReader-css","screen"):e.screen=pako.inflate(atob(KGPugpigReaderStyle),{to:"string"}),e},getStylesheetsCode:function(e,n){var o=_.map(document.styleSheets,function(o){if(e===o.ownerNode.className&&n===o.ownerNode.getAttribute("media")){var a=o.rules||o.cssRules,i=_.map(a,function(e){return e.cssText?e.cssText:e.style.cssText});return i.join(" ")}});return _.filter(o,_.isString).join(" ")}})}(),KGKGPugpigCore.Modules.Logger=KGPugpigCore.fw.Marionette.Module.extend({startWithParent:!0,initialize:function(){_.bindAll(this,"debug","info","profile","warn","error","_loggerHandler")},onStart:function(){KGPugpigCore.fw.Logger.PROFILE={name:"PROFILE",value:3},this._logger=KGPugpigCore.fw.Logger.get(this.app.name),this._logger.profile=function(){this.invoke(KGPugpigCore.fw.Logger.PROFILE,arguments)},KGPugpigCore.fw.Logger.setHandler(this._loggerHandler);var e=this.app.getOption("logLevel")||"error";this._logger.setLevel(KGPugpigCore.fw.Logger[e.toUpperCase()]),this.app._subappCh.on("debug",this.debug),this.app._subappCh.on("info",this.info),this.app._subappCh.on("profile",this.profile),this.app._subappCh.on("warn",this.warn),this.app._subappCh.on("error",this.error)},debug:function(e){this._logger.debug(e)},info:function(e){this._logger.info(e)},profile:function(e){this._logger.profile(e)},warn:function(e){this._logger.warn(e)},error:function(e){this._logger.error(er:function(e,n){var o=console.log;n.level===KGPugpigCore.fw.Logger.WARN&&console.warn?o=console.warn:n.level===KGPugpigCore.fw.Logger.ERROR&&console.error?o=console.error:n.level===KGPugpigCore.fw.Logger.INFO&&console.info?o=console.info:n.level===KGPugpigCore.fw.Logger.PROFILE&&console.warn&&(o=console.info);var a=_.clone(e[0]);n.name&&(a[0]="["+n.name+"] "+a[0]),(_.isEmpty(a[2])||_.isArray(a[2])&&_.isUndefined(a[2][0]))&&a.splice(2,1),this.app._appCh.request("is:device","mode","webview")?o.call(console,a[0]+_.rest(a,1).join(" ")):Function.prototype.apply.call(o,console,a)}})}(),KGPugpigCore.Modules=KGPugpigCore.Modules||{},function(){KGPugpigCore.Modules.Subapps=KGPugpigCore.Extensions.Module.extend({name:"Subapps",appChannelName:"KGPugpigCore",startWithParent:!0,panels:["search","settings","share","sounds","tableofcontents","thumbnailsnav","account","editionfilters"],modals:["slideshow","things"],openPresentables:[],initialize:function(){this._list=[],_.bindAll(this,"_subapp","onHideAllPanels","onDestroyAllModals","onDestroyAllPanels","getOpenModal","getOpenPresentables","hasOpenModal","onAppShowOverlay","onHidePresentable","isSubappStarted"),this.app.subapp=this._subapp,this.app.subappStop=this._subappStop,this.app._appCh.reply("subapp",this._subapp),this._appCh.s._appCh.on("hide:presentable",this.onHidePresentable),this.app._appCh.on("hide:all:panels",this.onHideAllPanels),this.app._appCh.on("destroy:all:panels",this.onDestroyAllPanels),this.app._appCh.on("destroy:all:modals",this.onDestroyAllModals),this.app._appCh.reply("get:open:modal",this.getOpenModal),this.app._appCh.reply("get:open:presentables",this.getOpenPresentables),this.app._appCh.reply("has:open:modal",this.hasOpenModal),this.app.isSubappStarted=this.isSubappStarted},onAppShowOverlay:function(e){this.panels.indexOf(e)===-1&&this.modals.indexOf(e)===-1||this.openPresentables.push(e)},onHidePresentable:function(e){return e=e||this.openPresentables.pop(),this.panels.indexOf(e)>-1?void this._subapp(e).hide():this.modals.indexOf(e)>-1?void this._subapp(e).destroy():void 0},getList:function(){return this._list},getListAppNames:function(){return Object.keys(this._list)},applyThemes:function(){Object.keys(this._list).forEach(function(e){var n=this._list[e].request("the_list[e]=o}return this._list[e]},onHideAllPanels:function(e){_.without(this.panels,e).forEach(function(e){"undefined"!=typeof this._subapp(e)&&this._subapp(e).hide()},this)},onDestroyAllPanels:function(){this.panels.forEach(function(e){this._subapp(e).destroy()},this)},onDestroyAllModals:function(e){_.without(this.modals,e).forEach(function(e){"undefined"!=typeof this._subapp(e)&&this._subapp(e).stop()},this)},getOpenModal:function(){var e=_.filter(this.modals,function(e){var n=this._subapp(e);return"undefined"!=typeof n&&n.isDisplayed()},this);return e.map(function(e){return this._subapp(e)},this)},getOpenPresentables:function(){return this.openPresentables},hasOpenModal:function(){return!!this.openPresentaturn this._list[e].isStarted}})}(),KGPugpigCore.Modules=KGPugpigCore.Modules||{},function(){KGPugpigCore.Modules.Analytics=KGPugpigCore.Extensions.Module.extend({name:"Analytics",appChannelName:"KGPugpigCore",startWithParent:!1,allowAnalyticsTracking:!0,hitQueueProviders:[],initialize:function(){_.bindAll(this,"hit","_registerProvider","onSetAnalyticsTracking"),this.app._appCh.on("analytics:hit",this.hit),this.app._appCh.on("set:analytics:tracking",this.onSetAnalyticsTracking)},onBeforeStart:function(){this.options=this.app.options.analytics,this.has=[],this._getAllowAnalyticsTracking()},onStart:function(){this.allowAnalyticsTracking!==!1&&(this.providersKeys=Object.keys(this.options),this.providersKeys.forEach(function(e){var n=this.options[e];"undefined"!=typeof n.customScriptFile?this._loadCustomScript(e,n.customScriptFile).done(this._registerProvider):this._registerProvider(e)},this))},hit:function(e){this.allowAnalyticsTracking!==!1&&this.send({hitType:e.type,fieldNames:_.omit(e,["type","editiowAnalyticsTracking=e,e===!0&&_.isEmpty(this.has)&&this.start()},_getAllowAnalyticsTracking:function(){var e=new KGPugpigCore.fw.Basil({namespace:"pugpig"}),n=e.get("USER_STATE")||{};this.allowAnalyticsTracking="undefined"==typeof n.analyticsTracking||n.analyticsTracking},getContext:function(){var e=["Free","Sample","Paid"],n=this._appCh.request("get:device"),o=this._appCh.request("app:get:state"),a=this._appCh.request("feed:get:context",o),i=this._appCh.request("user:is:loggedin",this.isLoggedIn),t=this._appCh.request("auth:userinfo");return{feed:"Default",orientation:_.capitalize(n.orientation),connectivity:_.capitalize(n.connection),appName:this._appCh.request("config:key","appName"),appVersion:this._appCh.request("config:key","appVersion")+" (Web PP rsion")+")",subscriberStatus:i?"ExistingSubscriber":"None",editionId:a.idEdition,editionName:a?a.editionName:void 0,editionCost:a?e[a.idEditionCost]:void 0,pageType:a?a.pageType:void 0,pageNumber:a&&!_.isUndefined(a.pageNumber)?_.pad(a.pageNumber+1,4):void 0,pageName:a?a.pageName:void 0,section:a?a.section:void 0,subsection:a?a.subsection:void 0,author:a?a.author:void 0,customAnalytics:t||[]}},_registerProvider:function(e){var n=this.options[e].className,o="analytics."+e,a=this.options[e];this.app.module(o,KGPugpigCore.Analytics[n]),this.app.module(o).start(a),this.has.push(e),this.hitQueueProviders.forEach(function(e){this.send(e.hitData,e.context,e.provider)},this)},_loadCustomScript:function(e,n){var o=$.Deferred(),a=document.getElementsByTagName("head")[0],i=KGPugpigCore.fw.URI.absoluteTo(window.location,n),t=document.createElement("script");return t.setAttribute("src",i),t.onload=function(){o.resolve(e)},a.appendChild(t),o},send:function(e,n,o){var a=[],i="screenview"===e.hitType?"onScreenView":"onEventtext(),"undefined"==typeof o){var r=_.difference(this.providersKeys,this.has);r.forEach(function(o){this.hitQueueProviders.push({provider:o,hitData:e,context:n})},this),a=this.has}else a.push(o);a.forEach(function(e){e=this.app.module("analytics."+e),e[i]&&e[i].call(e,t,n)},this)}})}(),KGPugpigCore.Analytics=KGPugpigCore.Analytics||{},function(){KGPugpigCore.Analytics.CustomProvider=KGPugpigCore.Extensions.Module.extend({name:"Custom-Analytics-Provider",appChannelName:"KGPugpigCore",startWithParent:!1,initialize:function(){},onStart:function(){},onScreenView:function(e,n){},onEvent:function(e,n){},send:function(){}})}(),KGPugpigCore.Analytics=KGPugpigCore.Analytics||{},function(){KGPugpigCore.Analytics.GoogleAnalyticsPugpig=KGPugpigCore.Analytics.CustomProvider.extend({name:"Google Analytics Pugpig",initialize:function(){_.bindAll(this,"_createTracker")},onStart:function(e){this.options=e,this._loadScript(window,document,"script","//www.google-analytics.com/analytics.js","ga")},onScreenView:function(e,n){this.send("screenview",this._coalesceData(e,n))},onEvent:function(e,n){this.send("event",this.,e,n)},_coalesceData:function(e,n){return e=e||{},e=_.extend(e,this._mapCustomDimensions(n)),e=_.extend(e,this._mapCustomAnalytics(n)),delete e.hitType,e},_mapCustomDimensions:function(e){return{appName:e.appName,appVersion:e.appVersion,dimension1:e.feed,dimension2:e.orientation,dimension3:e.connectivity,dimension4:e.subscriberStatus,dimension5:e.editionName,dimension6:e.editionCost,dimension7:e.pageType,dimension8:e.pageNumber,dimension9:e.pageName,dimension10:e.section,dimension11:e.author}},_mapCustomAnalytics:function(e){return _.redion"+n.dimension]=n.term,e},{})},_loadScript:function(e,n,o,a,i,t,r){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,t=n.createElement(o),r=n.getElementsByTagName("head")[0],t.async=1,t.src=a,t.onload=this._createTracker(),r.appendChild(t)},_createTracker:function(){window.ga("create",this.options.ua,"auto")}})}(),KGPugpigCore.Analytics=KGPugpigCore.Analytics||{},function(){KGPugpiics4=KGPugpigCore.Analytics.CustomProvider.extend({name:"Google Analytics 4",initialize:function(){_.bindAll(this,"_createTracker")},onStart:function(e){this.options=e,this._loadScript("//www.googletagmanager.com/gtag/js?id="+this.app.options.googleAnalyticsMeasurementID)},onScreenView:function(e,n){this.send("screen_view",this._co;this.send(o,this._coalesceData(e,n))},send:function(e,n){window.gtag("event",e,n),this._log("info",e,n)},_coalesceData:function(e,n){return e=e||{},e=_.extend(e,this._mapCustomDimensions(n)),e=_.extend(e,this._mapCustomAnalytics(n)),delete e.hitType,e},_mapCustomDimensions:function(e){return{appName:e.appName,appVersion:e.appVersion,dimension1:e.feed,dimension2:e.orientation,dimension3:e.connectivity,dimension4:e.subscriberStatus,dimension5:e.editionName,dimension6:e.editionCost,dimension7:e.pageType,dimension8:e.pageNumber,dimension9:e.pageName,dimension10:e.section,dimension11:e.author}},_mapCustomAnalytics:function(e){return _.reduce(e.customAnalytics,function(e,n){return e["dimension"+n.dimension]=n.term,e},{})},_loadScript:function(e){var n=document.createElement("script");n.async=1,n.src=e,n.onload=this._createTracker(),document.getElementsByTagName("head")[0].appendChild(n)},_createTracker:function(){window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},window.gtag("js",new Date),window.gtag("config",this.app.options.googleAnalyticsMeasurementID)}})}(),KGPugpigCore.Analytics=KGPugpigCore.Analytics||{},function(){KGPugpigCore.Analytics.AdobeAnalyticsPugpig=KGPugpigCore.Analytics.CustomProvider.extend({name:"Adobe Analytics Pugpig",hitQueue:[],initialize:function(){_.bindAll(this,"_handleQueue")},onStart:function(e){this.options=e,this._loadScript(window,document,"script",this.options.script)},onScreenView:function(e,n){this.send("track_state",this._coalesceData(e,n))},onEvent:function(e,n){this.send("track_action",this._coalesceData(e,n))},send:function(e,n){return window._satellite&&window.__satelliteLoaded?void window._satellite.track(e,n):void this.hitQueue.push({type:e,data:n})},_coalesceData:function(e,n){return e=e||{},e=_.extend(e,this._mapCustomDimensions(e,n)),e=_.extend(e,this._mapCustomAnalytics(e,n)),e=this._renameDimensionKeys(e),delete e.hitType,e},_mapCustomDimensions:function(e,n){return{appName:n.appName,appVersion:n.appVersion,editionId:n.editionId,dimension1:n.feed,dimension2:n.orientation,dimension3:n.connectivity,dimension4:n.subscriberStatus,dimension5:n.editionName,dimension6:n.editionCost,dimension7:n.pageType,dimension8:n.pageNumber,dimension9:n.pageName,dimension10:n.section,dimension11:n.author}},_mapCustomAnalytics:function(e,n){return _.reduce(n.customAnalytics,function(e,n){return e["KGAnalyticsContext"+n.name]=n.term,e},{})},_renameDimensionKeys:function(e){var n={},o={appName:"KGAnalyticsContextAppName",appVersion:"KGAnalyticsContextAppVersion",editionId:"KGAnalyticsContextEditionUuid",eventLabel:"KGAnalyticsContextLabel",dimension1:"KGAnalyticsContextFeed",dimension2:"KGAnalyticsContextOrientation",dimension3:"KGAnalyticsContextConnectivity",dimension4:"KGAnalyticsContextSubscriberStatus",dimension5:"KGAnalyticsContextEditionName",dimension6:"KGAnalyticsContextEditionCost",dimension7:"KGAnalyticsContextPageType",dimension8:"KGAnalyticsContextPageNumber",dimension9:"KGAnalyticsContextPageName",dimension10:"KGAnalyticsContextSection",dimension11:"KGAnalyticsContextAuthor"};return _.each(e,function(e,a){a=o[a]||a,n[a]=e}),n},_handleQueue:function(){_.each(this.hitQueue,function(e,n){this.send(e.type,e.data)},this),this.hitQueue=[]},_loadScript:function(e,n,o,a){var i=n.getElementsByTagName("head")[0],t=n.createElement(o);t.src=a,t.onload=this._handleQueue,i.appendChild(t)}})}(),KGPugpigCore.Analytics=KGPugpigCore.Analytics||{},function(){KGPugpigCore.Analytics.GoogleTagManagerPugpig=KGPugpigCore.Analytics.CustomPns=e,this._loadScript(window,document,"script","dataLayer",this.op].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var r=n.getElementsByTagName("head")[0],g=n.createElement(o),d="daww.googletagmanager.com/gtm.js?id="+i+d+t,r.appendChild(g)}})}(),KGPugpigCore.Analytics=KGPugpigCore.Analytics||{},function(){KGPugpigCore.Analytics.NativeBridgePugpig=KGPugpigCore.Analytics.CustomProvider.extend({name:"Native Analytics Bridge Pugpig",onScreenView:function(e,n){this.send("screenview",e)},onEvent:function(e,n){this.send("event",e)},send:function(e,n){var o=this._nativeProxyUrl(e,n);this._appCh.request("trigger:webview:event",o),this._log("info",o)},_nativeProxyUrl:function(e,n){var o="pugpig://shopping/analytics.isEmpty(n[e]))PugpigCore.Analytics=KGPugpigCore.Analytics||{},function(){KGPugpigCore.Analytics.AdobeAnalyticsCustom=KGPugpigCore.Analytics.CustomProvider.extend({name:"Adobe Analytics",hitQueue:[],initialize:function(){_.bindAll(this,"_loadAppMeasurement","_fillInConfigValues","_buildAppMeasurementScript","_loadAppMeasurementScript","_initTrackingVar","_flushQueue")},onBeforeStart:function(e){this.options=e;var n=KGPugpigCore.fw.URI.parse(e.customScriptFile);this.basePath=n.protocol+"://"+n.authority+n.directory,this._setup().then(this._initTrackingVar).done(this._flushQueue)},_setup:function(){var e=$.Deferred();return this._loadVisitorAPI().then(this._loadAppMeasurement).done(function(){e.resolve()}),e},_initTrackingVar:function(){var e=$.Deferred();return this.s=window.s,e.resolve(),e},_flushQueue:function(){this.hitQueue.forEach(function(e){this.send(e.type,e.data)},this)},_loadVisitorAPI:function(){var e=$.Deferred();return _.loadScript({src:this.basePath+"VisitorAPI.js",className:"AnalyticsCustomProvider-AdobeAnalytics",onload:function(){e.resolve()}}),e},_loadAppMeasurement:function(){var e=$.Deferred();return this._buildAppMeasurementConfig().then(this._buildAppMeasurementScript).then(this._loadAppMeasurementScript).done(function(){e.resolve()}),e},_buildAppMeasurementConfig:function(){var e=$.Deferred();return $.ajax({url:this.basePath+"AppMeasurement-config.template.js",dataType:"text"}).done(_.bind(function(n){e.resolve(this._fillInConfigValues(n))},this)),e},_fillInConfigValues:function(e){var n=_.template(e,{interpolate:/{{([\s\S]+?)}}/g});return n({account:this.options.account,marketingCloudOrganizationId:this.options.marketingCloudOrganizationId,trackingServer:this.options.trackingServer,trackingSecureServer:this.options.trackingSecureServer})},_buildAppMeasurementScript:function(e){var n=$.Deferred();return $.ajax({url:this.basePath+"AppMeasurement.js",dataType:"text"}).done(function(o){n.resolve(e+o)}),n},_loadAppMeasurementScript:function(e){var n=$.Deferred();return _.loadScript({srcText:e,className:"AnalyticsCustomProvider-AdobeAnalytics"}),n.resolve(),n}})}(),KGPugpigCore.Analytics=KGPugpigCore.Analytics||{},function(){KGPugpigCore.Analytics.Quantcast=KGPugpigCore.Analytics.CustomProvider.extend({name:"Quantcast",initialize:function(){_.bindAll(this,"_initTrackingVar","_initBeacon")},onStart:function(e){this.options=e,this._setup().then(this._initTrackingVar).done(this._initBearont/i},onShis.regex.isScreenStorefront.test(e.screenName):this.send("screenview",e)}},send:function(e,n){this._loadBeacon(),this._log("info",e,n)},_setup:function(){var e=$.Deferred();return this._loadScript().({src:("https:"===document.location.protocol?"https://secure":"http://edge")+".quantserve.com/quant.js",className:"AnalyticsCustomProvider-Quantcast",onload:function(){e.resolve()}}),e},_initTrackingVar:function(){var e=$.Deferred();return this._qevents=window._qevents,this._qevents.push({qacct:this.options.pCode}),e.resolve(),e},_initBeacon:function(){var e=document.querySelector("body"),n=document.createElement("noscript"),o=document.createElement("div");n.setAttribute("class","AnalyticsCustomProvider-Quantcast"),o.setAttribute("style","display: none"),n.appendChild(o),e.appendChild(n),this.beaconContainer=document.querySelector(".AnalyticsCustomProvider-Quantcast div");var a=document.createElement("img");a.setAttribute("border","0"),a.setAttribute("height","1"),a.setAttribute("width","1"),a.setAttribute("alt","Quantcast"),a.setAttribute("src","//pixel.quantserve.com/pixel/"+this.options.pCode),this.beacon=a,this._loadBeacon()},_loadBeacon:function(){$(".AnalyticsCustomProvider-Quantcast img").remove(),this.beacon&&this.beaconContainer.appendChild(this.beacon.cloneNode())}})}(),KGPugpigCore.Modules=KGPugpigCore.Modules||{},function(){KGPugpigCore.Modules.DeviceInfo=KGPugpigCore.Extensions.Module.extend({name:"Device",appChannelName:"KGPugpigCore",startWithParent:!0,deviceInfo:{connection:void 0,orientation:void 0,product:void 0,mode:void 0,webview:void 0,breakpoint:void 0,os:void 0,osVersion:void 0,osCodename:void 0,engine:void 0,browser:void 0,browserVersion:void 0},onStart:function(){_.bindAll(this,"isDevice","getDevice","setDevice","buildCssClass"),this.app._appCh.reply("is:device",this.isDevice),this.app._appCh.reply("get:device",this.getDevice),this.app._appCh.reply("set:device",this.setDevice),this.$html=$("html"),this.setDeviceInfo(),this.addDeviceInfoClasses()},setDevice:function(e){var n=Object.keys(e),o=this.$html.prop("class"),a=_.map(n,this.buildCssClass),i=a.join("|"),t=new RegExp(i,"ig");o=o.replace(t,"").trim(),_.assign(this.deviceInfo,e);var r=_.map(n,this.buildCssClass).join(" ");o+=" "+r,this.$html.prop("class",o)},getDevice:function(e){return _.isUndefined(e)?this.deviceInfo:this.deviceInfo[e]},isDevice:function(e,n){if(_.isObject(e))return this.processProperties(e);if("undefined"==typeof n)return this.deviceInfo[e];var o=new RegExp(n,"ig");return o.test(this.deviceInfo[e])},processProperties:function(e){var n=!0;return Object.keys(e).forEach(function(o){n=n&&this.isDevice(o,e[o])},this),n},setDeviceInfo:function(){this.deviceInfo={connection:this.getConnection(),orientation:this.getOrientation(),product:this.getProduct(),mode:this.getMode(),os:this.getOs(),osVersion:this.getOsVersion(),osCodename:this.getOsCodename(),engine:this.getEngine(),browser:this.getBrowser(),browserVersion:this.getBrowserVersion(),touch:this.getTouchDevice()}},getConnection:function(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection,n=!!e&&("string"==typeof e?e:e.type);return n||"unknown"},getOrientation:function(){return window.innerWidth>window.innerHeight?"landscape":"portrait"},getProduct:function(){return platform.product||"unknown"},getMode:function(){return/file:/i.test(document.location.protocol)?"webview":"browser"},getEngine:function(){return platform.layout||"unknown"},getOs:function(){return platform.os.family||"unknown"},getOsVersion:function(){return platform.os.version||"unknown"},getOsCodename:function(){if(/android/i.test(platform.os.family)){var e=platform.os.version;if(_.isNull(e))return"";if(e.toString(),/^2\.2/i.test(e))return"Froyo";if(/^2\.3/i.test(e))return"Gingerbread";if(/^4\.0/i.test(e))return"Ice Cream Sandwich";if(/^4\.1|^4\.2|^4\.3/i.test(e))return"Jelly Bean";if(/^4\.4/i.test(e))return"KitKat";if(/^5/i.test(e))return"Lollipop";if(/^6/i.test(e))return"Marshmallow"}},getBrowser:function(){return platform.ua.toLowerCase().indexOf("silk")>-1?"Silk":platform.name||"unknown"},getBrowserVersion:function(){return platform.version||"unknown"},getTouchDevice:function(){return"ontouchstart"in window||navigator.msMaxTouchPoints},addDeviceInfoClasses:function(){var e=[];_.forEach(Object.keys(this.deviceInfo),function(n){_.isString(this.deviceInfo[n])&&e.push(this.buildCssClass(n))},this),this.$html.addClass(e.join(" "))},buildCssClass:function(e){return"di-"+e.toLowerCase()+"-"+this.deviceInfo[e].replace(/\.|\s/g,"_").toLowerCase()}})}(),KGPugpigCore.Modules=KGPugpigCore.Modules||{},function(){KGPugpigCore.Modules.Stylesheet=KGPugpigCore.Extensions.Module.extend({name:"Stylesheet",appChannelName:"KGPugpigCore",startWithParent:!1,cssNamespace:"KGPugpigReader",regex:{isVendorPrefix:/^(moz|webkit|ms)/i},initialize:function(){this._sslist=[]},onStart:function(){$.when(this.getAppStylesheet()).then(_.bind(function(){this.app.triggerMethod("before:show")},this))},getAppStylesheet:function(){var e=$.Deferred();if(this.isStylesheetThere())return e.resolve();var n=this._uri.filename(this.app.getOption("cssBaseUrl"),"");return n=n.substr(0,n.length-1),this.createStylesheet("app","link",{class:"KGPugpigReader-css",rel:"stylesheet",type:"text/css",media:"screen",href:n},e)},isStylesheetThere:function(){return _.find(document.styleSheets,function(e){if(e.isDisabled)return!1;var n;try{if(!e.cssRules)return;n=e.cssRules}catch(e){if("SecurityError"!==e.name)throw e;return}return _.find(n,function(e){return!_.isUndefined(e.selectorText)&&e.selectorText.indexOf(this.cssNamespace)!==-1},this)},this)},createStylesheet:function(e,n,o,a){var i=a||$.Deferred(),t=$("<"+n+">",o).appendTo("head");return Modernizr.cssloadevent?(t.one("load",_.bind(function(){return this.registerStylesheet(e,n,o.class),i.resolve()},this)),i):(this.registerStylesheet(e,n,o.class),i.resolve())},registerStylesheet:function(e,n,o){var a=document.querySelectorAll("head "+n+"."+o);_.isUndefined(a[0])||(this._sslist[e]=a[0].sheet)},removeStylesheet:function(e){_.forEach(this._sslist[e].rules,_.bind(function(){this._sslist[e].deleteRule(0)},this)),$(this._sslist[e].ownerNode).prop("disabled",!0).remove(),this._sslist[e]=void 0},addRule:function(e,n,o){if(0!==_.isEmpty(n)){var a=[];_.forEach(Object.keys(o),function(e){if(!_.isEmpty(o[e])){var n=this._hyphenate(e);this.regex.isVendorPrefix.test(e)&&(n="-"+n),"backgroundImage"===e?a.push(n+": url("+o[e]+")"):a.push(n+":"+o[e])}},this);var i=this._sslist[e].cssRules||this._sslist[e].rules,t=n+"{"+a.join(";")+"}";this._log("debug","Theme new rule: "+t),_.isEmpty(a)||this._sslist[e].insertRule(t,i.length)}},_hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},_camelCase:function(e){return e.toLowerCase().replace(/-(.)/g,function(e,n){return n.toUpperCase()})}})}(),KGPugpigCore.Modules=KGPugpigCore.Modules||{},function(){KGPugpigCore.Modules.Script=KGPugpigCore.Extensions.Module.extend({name:"Script",appChannelName:"KGPugpigCore",startWithParent:!1,onStart:function(){this.app.options.customScripts&&this._loadScripts(this.app.options.customScripts)},_loadScripts:function(e){var n=window.location.hostname,o=document.getElementsByTagName("head")[0];_.each(e,function(e,a){n.indexOf(".web.pugpig-local.com")>0&&0==e.indexOf("/")&&(e="https://"+n.replace(".web.pugpig-local.com","")+e,console.info("%c_loadScripts: Changing local source based on web.pugpig-local.com","color:hotpink;",e));var i=document.createElement("script");i.type="text/javascript",i.id=a,i.src=e,o.append(i)})}})}(),KGPugpigCore.Modules=KGPugpigCore.Modules||{},function(){KGPugpigCore.Modules.ThemeDefaults=KGPugpigCore.Extensions.Module.extend({name:"ThemeDefaults",appChannelName:"KGPugpigCore",startWithParent:!0,keys:{FontName:"Helvetica, Arial",BoldFontName:"Helvetica, Arial, sans-serif",PrimaryColor:"#4a6eb4",SecondaryColor:"#717780",PrimaryBackgroundColor:"white",SecondaryBackgroundColor:"#a5aeb8",SelectionBackgroundColor:"#202123",ToolbarColor:"white",ErrorColor:"#e7374d",TextColor:"black",FontSize:"10pt",FontWeight:"400",BoldFontWeight:"700",SelectionTextColor:"white",TextBackgroundColor:"transparent",TextHoverColor:"black",TextBackgroundHoverColor:"transparent",IconDisableColor:"grey",IconBackgroundColor:"transparent",IconBackgroundHoverColor:"transparent",IconTooltipPosition:"bottom",IconTooltipTextColor:"white",IconTooltipFontSize:"0.7em",IconTooltipBackgroundColor:"#212023",IconTooltipDisplay:"none",PrimaryButton_TextColor:"white",PrimaryButton_HoverColor:"black",PrimaryButton_TextHoverColor:"white",SecondaryButton_TextColor:"black",SecondaryButton_HoverColor:"black",SecondaryButton_TextHoverColor:"white",Picker_EditionSynopsisTitle_TextHoverColor:"white",Picker_EditionSynopsisDate_TextHoverColor:"white",Picker_EditionSynopsisSummary_TextHoverColor:"white",Picker_EditionSynopsisDate_FontSize:"32px",Picker_EditionSynopsisDate_TextColor:"white",Picker_EditionSynopsisTitle_FontSize:"22px",Picker_EditionSynopsisTitle_TextColor:"white",Picker_EditionSynopsisSummary_FontSize:"14px",Picker_EditionSynopsisSummary_TextColor:"white",Picker_PadlockTriangle_BackgroundColor:"white",Picker_FeatureEditionDate_FontSize:"1em",Picker_FeatureEditionTitle_FontSize:"2em",ImageViewer_Caption_TextColor:"white",ImageViewer_Copyright_TextColor:"white",ImageViewer_Position_TextColor:"white",ImageViewer_Caption_TextHoverColor:"white",ImageViewer_Copyright_TextHoverColor:"white",ImageViewer_Position_TextHoverColor:"white",ImageViewer_IconColor:"white",ImageViewer_Caption_FontSize:"1em",ImageViewer_Copyright_FontSize:"0.8em",ImageViewer_Position_FontSize:"0.8em",Document_Products_IconColor:"white",Document_Products_IconHoverColor:"orange",Document_Products_IconBackgroundColor:"transparent",Document_Products_IconBackgroundHoverColor:"transparent",Document_Products_IconTooltipDisplay_Close:"none",Document_Products_Subtitle_FontSize:"0.9em",Document_Products_Price_FontSize:"0.9em",Document_Products_Description_FontSize:"0.8em",Document_Products_Overlay_FontSize:"0.8em",Document_Products_BorderWidth:0,Document_Products_Overlay_IconHoverColor:"white",Document_Products_Toolbar_BorderColor:"transparent",Document_Products_Topbar_BackgroundColor:"transparent",Document_Products_Topbar_BorderColor:"transparent",Document_Products_IconDisplay_Wishlist:"none",Document_Products_Toolbar_BackgroundColor:"rgba(51,51,51,170)",Panel_HeaderTitle_TextColor:"white",Panel_HeaderTitle_TextHoverColor:"white",Panel_HeaderTitle_FontSize:"1em",Panel_Body_BackgroundColor:"white",Panel_IconColor_Close:"white",Settings_TabLabel_FontSize:"16px",Settings_IconHoverColor_Forward:"white",Settings_OnOffSwitch_InactiveBackgroundColor:"white",Settings_OnOffSwitch_BorderColor:"#a5aeb8",Account_TabLabel_FontSize:"16px",Account_Input_TextBackgroundColor:"white",Account_Input_TextBackgroundHoverColor:"white",Document_ShareControl_IconColor:"white",Document_ShareControl_ItemCaption_FontSize:"0.8em",Document_ShareControl_IconHoverColor:"#717780",Document_SearchControl_Title_TextColor:"#a5aeb8",Document_SearchControl_Title_TextHoverColor:"white",Document_SearchControl_Title_SelectionTextColor:"white",Document_SearchControl_FontSize:"12px",Document_SearchControl_Title_FontSize:"11px",Document_SearchControl_InputField_TextBackgroundColor:"white",Document_SearchControl_InputField_TextBackgroundHoverColor:"white",Document_SearchControl_Result_BackgroundHoverColor:"#eee",Document_SearchControl_Result_Title_FontWeight:"700",Document_SearchControl_Result_SummaryKeyword_FontWeight:"700",Document_SearchControl_Result_Title_FontSize:"1.1em",Document_SearchControl_Result_EditionTitle_FontSize:"0.9em",Document_SearchControl_Result_Section_FontSize:"0.9em",Document_SearchControl_Result_BorderColor:"#ccc",Document_SearchControl_Result_BorderWidth:"1px",Document_SearchControl_Result_BorderStyle:"solid",Document_SearchControl_Result_BackgroundColor:"white",Document_SoundPlayer_IconColor:"white",Document_SoundPlayer_Progress_FontSize:"8pt",Document_SoundPlayer_FromArticleSound_BackgroundColor:"#fbfbb5",Document_SoundPlayer_Sound_BackgroundHoverColor:"#eeeeee",Document_SoundPlayer_Sound_BorderColor:"#dddddd",Document_SoundPlayer_PlaylistItemDuration_FontSize:"8pt",Document_SoundPlayer_FromArticleSound_PlaylistItemDuration_FontSize:"8pt",Document_SoundPlayer_ActiveSound_PlaylistItemDuration_FontSize:"8pt",Document_SoundPlayer_PlaylistItemCreator_FontSize:"8pt",Document_SoundPlayer_FromArticleSound_PlaylistItemCreator_FontSize:"8pt",Document_SoundPlayer_ActiveSound_PlaylistItemCreator_FontSize:"8pt",TableOfContents_Subtype_FontSize:"0.8em",TableOfContents_Article_FontSize:"0.9em",TableOfContents_Summary_FontSize:"0.8em",TableOfContents_Section_FontSize:"1.2em",TableOfContents_Section_FontWeight:"700",TableOfContents_BorderColor:"#ccc",TableOfContents_BorderWidth:"0",ThumbnailsNav_SectionTitle_FontSize:"0.8em",ThumbnailsNav_ArticleTitle_FontSize:"0.7em",Document_ArticlePreview_Title_FontSize:"0.8em",Document_ArticlePreview_Title_BackgroundColor:"transparent",Document_ArticlePreview_BackgroundColor:"white",Document_ArticlePreview_IconColor:"black",Document_Toolbar_Overflow_TextBackgroundHoverColor:"#ccc",Document_Toolbar_Overflow_BorderBottomColor:"#ccc",
Document_Toolbar_Overflow_BorderBottomStyle:"dotted",Document_Toolbar_Overflow_BorderBottomWidth:"1px",Login_TextField_TextBackgroundColor:"white",Document_Popovers_FontSize:"0.9em",LoadingScreen_TextColor:"white",Document_Viewer_BackgroundColor:"white",EditionFilters_BackgroundColor:"white",EditionFilters_Filter_TextBackgroundHoverColor:"#ccc",Picker_Toolbar_Overflow_TextBackgroundHoverColor:"#ccc",Picker_Toolbar_Overflow_BorderBottomColor:"#ccc",Picker_Toolbar_Overflow_BorderBottomStyle:"dotted",Picker_Toolbar_Overflow_BorderBottomWidth:"1px",Paywall_ActionButton_BackgroundColor:"#E5E5E5"},extendTheme:function(e){return this.inTheme=e,this.outTheme={},_.extend(this.outTheme,this.keys,e),this.translateColors().inheritanceRules().iconDefaults(),this.outTheme},regex:{isColorAARRGGBB:/\#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/i},translateColors:function(){return _.forEach(Object.keys(this.outTheme),function(e){if(_.isString(this.outTheme[e])){var n=this.outTheme[e].match(this.regex.isColorAARRGGBB);if(n){var o=parseInt(n[1],16),a=parseInt(n[2],16),i=parseInt(n[3],16),t=parseInt(n[4],16);this.outTheme[e]="rgba("+a+", "+i+", "+t+", "+o+")"}}},this),this},inheritanceRules:function(){var e={_deps:this._deps};return _.extend(e,this.outTheme),e._deps("Font",["FontName"]),e._deps("BoldFont",["BoldFontName"]),e._deps("IconColor",["SecondaryColor"]),e._deps("IconHoverColor",["PrimaryColor"]),e._deps("Picker_TextHoverColor",["Picker_TextColor"]),e._deps("Login_TextField_TextBackgroundHoverColor",["Login_TextField_TextBackgroundColor"]),this.inheritTextValues("",["Default","LoadingScreen","Document_Popovers","Picker","Picker_Description","Document_ArticlePreview_Title","Login","Login_TextField","Document","Toolbar","Document_Toolbar","Document_DescriptionLabel","Document_DownloadSizeLabel","ImageViewer_Copyright","Document_Products","TableOfContents","ThumbnailsNav","Panel","Document_ShareControl","Document_SearchControl","Settings","Document_SoundPlayer","Account","Paywall","EditionFilters"],e),_.forEach(["Document_TitleLabel","Document_DateLabel","Document_PageTitleLabel","Picker_EditionStatusLabel","Document_Products_Price","Paywall_ArticleTitleFont","ImageViewer_Caption"],function(n){e._deps(n+"_Font",["BoldFontName"]),e._deps(n+"_FontWeight",["BoldFontWeight"]),e._deps(n+"_FontSize",["FontSize"]),e._deps(n+"_TextColor",["TextColor"]),e._deps(n+"_TextBackgroundColor",["TextBackgroundColor"]),e._deps(n+"_TextHoverColor",["TextHoverColor"]),e._deps(n+"_TextBackgroundHoverColor",["TextBackgroundHoverColor"])}),_.forEach(["Document_ShareControl_HeaderTitle","Document_SearchControl_HeaderTitle","Document_SoundPlayer_HeaderTitle","Settings_HeaderTitle","Account_HeaderTitle"],function(n){e._deps(n+"_Font",["Panel_HeaderTitle_Font"]),e._deps(n+"_FontWeight",["Panel_HeaderTitle_FontWeight"]),e._deps(n+"_FontSize",["Panel_HeaderTitle_FontSize"]),e._deps(n+"_TextColor",["Panel_HeaderTitle_TextColor"]),e._deps(n+"_TextBackgroundColor",["Panel_HeaderTitle_TextBackgroundColor"]),e._deps(n+"_TextHoverColor",["Panel_HeaderTitle_TextHoverColor"]),e._deps(n+"_TextBackgroundHoverColor",["Panel_HeaderTitle_TextBackgroundHoverColor"])}),e._deps("IconActiveColor",["PrimaryColor"]),e._deps("Picker_Toolbar_IconColor",["Toolbar_TintColor"]),e._deps("Document_Toolbar_IconColor",["Toolbar_TintColor"]),_.forEach(["IconColor","IconDisableColor","IconHoverColor","IconActiveColor","IconBackgroundColor","IconBackgroundHoverColor","IconTooltipPosition","IconTooltip_TextColor","IconTooltip_FontSize","IconTooltipBackgroundColor","IconTooltipDisplay","IconTooltip_Font","IconTooltip_FontWeight"],function(n){e._deps("CoreTemplate_"+n,[n]),e._deps("Document_Products_"+n,[n]),e._deps("ImageViewer_"+n,[n]),e._deps("Document_ShareControl_"+n,[n]),e._deps("Document_SearchControl_"+n,[n]),e._deps("TableOfContents_"+n,[n]),e._deps("Settings_"+n,[n]),e._deps("Document_Toolbar_"+n,[n]),e._deps("Picker_Toolbar_"+n,[n]),e._deps("Account_"+n,[n]),e._deps("EditionFilters_"+n,[n])},this),e._deps("PrimaryButton_TextBackgroundColor",["PrimaryButton_BackgroundColor","ButtonColor","PrimaryColor"]),e._deps("PrimaryButton_TextBackgroundHoverColor",["PrimaryButton_BackgroundHoverColor","PrimaryButton_HoverColor"]),e._deps("PrimaryButton_Font",["BoldFontName"]),e._deps("PrimaryButton_FontWeight",["BoldFontWeight"]),e._deps("PrimaryButton_FontSize",["FontSize"]),e._deps("PrimaryButton_OutlineColor",["PrimaryColor"]),e._deps("PrimaryButton_OutlineHoverColor",["PrimaryButton_TextBackgroundColor"]),e._deps("SecondaryButton_OutlineColor",["ButtonColor","PrimaryColor"]),e._deps("SecondaryButton_Font",["BoldFontName"]),e._deps("SecondaryButton_FontWeight",["BoldFontWeight"]),e._deps("SecondaryButton_FontSize",["FontSize"]),e._deps("SecondaryButton_TextBackgroundColor",["SecondaryButton_BackgroundColor","SecondaryBackgroundColor"]),e._deps("SecondaryButton_TextBackgroundHoverColor",["SecondaryButton_BackgroundHoverColor","SecondaryButton_HoverColor"]),e._deps("SecondaryButton_OutlineHoverColor",["SecondaryButton_TextBackgroundColor"]),_.forEach(["Document_ActionButton","Settings_RestoreButton","Settings_SubscribeButton","Settings_LoginButton","Settings_ResetButton","Settings_RateButton","Settings_SlideshowButton","Login_PrimaryButton","Account_PrimaryButton"],function(n){e._deps(n+"_TextColor",["PrimaryButton_TextColor"]),e._deps(n+"_TextHoverColor",["PrimaryButton_TextHoverColor"]),e._deps(n+"_TextBackgroundColor",["PrimaryButton_TextBackgroundColor"]),e._deps(n+"_TextBackgroundHoverColor",["PrimaryButton_TextBackgroundHoverColor"]),e._deps(n+"_Font",["PrimaryButton_Font"]),e._deps(n+"_FontWeight",["PrimaryButton_FontWeight"]),e._deps(n+"_FontSize",["PrimaryButton_FontSize"]),e._deps(n+"_OutlineColor",["PrimaryButton_OutlineColor"]),e._deps(n+"_OutlineHoverColor",["PrimaryButton_OutlineHoverColor"])}),_.forEach(["Login_SecondaryButton","Account_SecondaryButton","Document_PreviewButton","Document_SubscribeButton","Document_ArchiveButton"],function(n){e._deps(n+"_TextColor",["SecondaryButton_TextColor"]),e._deps(n+"_TextHoverColor",["SecondaryButton_TextHoverColor"]),e._deps(n+"_TextBackgroundColor",["SecondaryButton_TextBackgroundColor"]),e._deps(n+"_TextBackgroundHoverColor",["SecondaryButton_TextBackgroundHoverColor"]),e._deps(n+"_Font",["SecondaryButton_Font"]),e._deps(n+"_FontWeight",["SecondaryButton_FontWeight"]),e._deps(n+"_FontSize",["SecondaryButton_FontSize"]),e._deps(n+"_OutlineColor",["SecondaryButton_OutlineColor"]),e._deps(n+"_OutlineHoverColor",["SecondaryButton_OutlineHoverColor"])}),e._deps("Paywall_PrimaryButton_TextColor",["Account_PrimaryButton_TextColor"]),e._deps("Paywall_PrimaryButton_TextHoverColor",["Account_PrimaryButton_TextHoverColor"]),e._deps("Paywall_PrimaryButton_TextBackgroundColor",["Account_PrimaryButton_TextBackgroundColor"]),e._deps("Paywall_PrimaryButton_TextBackgroundHoverColor",["Account_PrimaryButton_TextBackgroundHoverColor"]),e._deps("Paywall_PrimaryButton_Font",["Account_PrimaryButton_Font"]),e._deps("Paywall_PrimaryButton_FontWeight",["Account_PrimaryButton_FontWeight"]),e._deps("Paywall_PrimaryButton_FontSize",["Account_PrimaryButton_FontSize"]),e._deps("Paywall_PrimaryButton_OutlineColor",["Account_PrimaryButton_OutlineColor"]),e._deps("Paywall_PrimaryButton_OutlineHoverColor",["Account_PrimaryButton_OutlineHoverColor"]),e._deps("Paywall_SecondaryButton_TextColor",["Account_SecondaryButton_TextColor"]),e._deps("Paywall_SecondaryButton_TextHoverColor",["Account_SecondaryButton_TextHoverColor"]),e._deps("Paywall_SecondaryButton_TextBackgroundColor",["Account_SecondaryButton_TextBackgroundColor"]),e._deps("Paywall_SecondaryButton_TextBackgroundHoverColor",["Account_SecondaryButton_TextBackgroundHoverColor"]),e._deps("Paywall_SecondaryButton_Font",["Account_SecondaryButton_Font"]),e._deps("Paywall_SecondaryButton_FontWeight",["Account_SecondaryButton_FontWeight"]),e._deps("Paywall_SecondaryButton_FontSize",["Account_SecondaryButton_FontSize"]),e._deps("Paywall_SecondaryButton_OutlineColor",["Account_SecondaryButton_OutlineColor"]),e._deps("Paywall_SecondaryButton_OutlineHoverColor",["Account_SecondaryButton_OutlineHoverColor"]),e._deps("Picker_Toolbar_Overflow_TextBackgroundColor",["PrimaryBackgroundColor"]),this.inheritTextValues("Picker",["EditionSynopsisDate","EditionSynopsisTitle","EditionSynopsisSummary","EditionStatusLabel","EditionLabel","Toolbar_Overflow"],e),e._deps("Picker_DraftLabel_TextColor",["PrimaryButton_TextColor"]),e._deps("Picker_DraftLabel_TextBackgroundColor",["PrimaryButton_BackgroundColor"]),e._deps("Picker_BackgroundColor",["PrimaryBackgroundColor"]),e._deps("Picker_HeroStatusLabel_BackgroundColor",["Picker_EditionStatusLabel_BackgroundColor"]),e._deps("Picker_EditionStatusLabel_BackgroundColor",["PrimaryColor"]),e._deps("Picker_Toolbar_BackgroundColor",["Picker_BackgroundColor","Toolbar_BackgroundColor"]),e._deps("Picker_Toolbar_TintColor",["Toolbar_TintColor"]),e._deps("Picker_EditionStatusLabel_BackgroundColor",["SelectionBackgroundColor"]),e._deps("Picker_EditionSynopsis_BackgroundColor",["SecondaryColor"]),e._deps("Picker_Toolbar_TextColor",["Toolbar_TextColor"]),e._deps("Picker_Toolbar_Font",["Toolbar_Font"]),e._deps("Picker_Toolbar_FontSize",["Toolbar_FontSize"]),e._deps("Picker_Toolbar_FontWeight",["Toolbar_FontWeight"]),e._deps("Panel_BackgroundColor",["Document_Popovers_BackgroundColor","PrimaryColor"]),e._deps("Login_Header_Font",["Settings_Header_Font"]),e._deps("Login_Header_FontSize",["Settings_Header_FontSize"]),e._deps("Login_Header_TextColor",["Settings_Header_TextColor"]),e._deps("Login_Menu_Font",["Settings_Menu_Font"]),e._deps("Login_Menu_FontSize",["Settings_Menu_FontSize"]),e._deps("Login_Menu_TextColor",["Settings_Menu_TextColor"]),this.inheritTextValues("Login",["Header","Menu","Footer","SubscribeMessage"],e),e._deps("Login_BrandLogo",["BrandLogo"]),e._deps("Login_BackgroundColor",["PrimaryBackgroundColor"]),e._deps("Account_BackgroundColor",["Panel_BackgroundColor"]),e._deps("Account_Body_BackgroundColor",["Panel_Body_BackgroundColor"]),e._deps("Account_IconColor_Close",["Panel_IconColor_Close"]),e._deps("Account_IconHoverColor",["SecondaryColor"]),e._deps("Account_Header_Font",["Settings_Header_Font"]),e._deps("Account_Header_FontSize",["Settings_Header_FontSize"]),e._deps("Account_Header_TextColor",["Settings_Header_TextColor"]),e._deps("Account_TabLabel_Font",["BoldFontName"]),e._deps("Account_TabLabel_FontWeight",["BoldFontWeight"]),e._deps("Account_TabLabel_TextBackgroundHoverColor",["Account_BackgroundColor"]),e._deps("Account_TabLabel_TextHoverColor",["PrimaryBackgroundColor"]),this.inheritTextValues("Account",["HeaderTitle","Account_Link","Account_Input","TabLabel","TabContent","TabContentLink"],e),e._deps("Account_IconColor_Forward",["Account_TabLabel_TextColor"]),e._deps("Account_IconHoverColor_Forward",["Account_TabLabel_TextHoverColor"]),this.inheritTextValues("Paywall",["Header","ArticleTitle","Summary"],e),e._deps("Paywall_BackgroundColor",["PrimaryBackgroundColor"]),e._deps("TableOfContents_ArticleActive_TextBackgroundColor",["TableOfContents_SelectionBackgroundColor","PrimaryColor"]),e._deps("TableOfContents_ArticleActive_TextBackgroundHoverColor",["TableOfContents_ArticleActive_TextBackgroundColor"]),e._deps("TableOfContents_ArticleActive_TextColor",["TableOfContents_SelectionTextColor","PrimaryBackgroundColor"]),e._deps("TableOfContents_ArticleActive_TextHoverColor",["TableOfContents_ArticleActive_TextColor"]),e._deps("TableOfContents_Article_TextHoverColor",["PrimaryBackgroundColor"]),e._deps("TableOfContents_Article_TextBackgroundHoverColor",["SecondaryColor"]),e._deps("TableOfContents_Article_TextBackgroundColor",["TableOfContents_ArticleRow_BackgroundColor","TableOfContents_Article_BackgroundColor"]),e._deps("TableOfContents_Section_TextBackgroundColor",["TableOfContents_Section_BackgroundColor"]),e._deps("TableOfContents_Section_TextBackgroundHoverColor",["TableOfContents_Section_BackgroundColor"]),e._deps("TableOfContents_Section_Font",["BoldFontName"]),e._deps("TableOfContents_Section_FontWeight",["BoldFontWeight"]),e._deps("TableOfContents_Header_Font",["BoldFontName"]),e._deps("TableOfContents_Header_FontWeight",["BoldFontWeight"]),this.inheritTextValues("TableOfContents",["Subtype","Article","Summary","Section","Header"],e),this.inheritTextValues("TableOfContents_Article",["ArticleActive"],e),e._deps("TableOfContents_Body_BackgroundColor",["TableOfContents_BackgroundColor","Panel_Body_BackgroundColor"]),e._deps("TableOfContents_Article_BorderBottomColor",["TableOfContents_BorderColor"]),e._deps("TableOfContents_Article_BorderBottomWidth",["TableOfContents_BorderWidth"]),e._deps("TableOfContents_Section_BorderBottomColor",["TableOfContents_BorderColor"]),e._deps("TableOfContents_Section_BorderBottomWidth",["TableOfContents_BorderWidth"]),e._deps("TableOfContents_Header_BackgroundColor",["TableOfContents_BackgroundColor","Panel_Body_BackgroundColor"]),e._deps("ThumbnailsNav_SectionTitle_Font",["BoldFontName"]),e._deps("ThumbnailsNav_SectionTitle_FontWeight",["BoldFontWeight"]),e._deps("ThumbnailsNav_SectionTitle_TextHoverColor",["ThumbnailsNav_TextColor"]),this.inheritTextValues("ThumbnailsNav",["SectionTitle","ArticleTitle","IsReadingArticle"],e),e._deps("ThumbnailsNav_BackgroundColor",["Panel_Body_BackgroundColor"]),e._deps("ThumbnailsNav_IsReadingArticle_BackgroundColor",["PrimaryColor"]),e._deps("Document_SoundPlayer_CurrentTitle_TextColor",["PrimaryBackgroundColor"]),e._deps("Document_SoundPlayer_CurrentTitle_TextHoverColor",["PrimaryBackgroundColor"]),e._deps("Document_SoundPlayer_CurrentProgress_TextColor",["PrimaryBackgroundColor"]),e._deps("Document_SoundPlayer_CurrentProgress_TextHoverColor",["PrimaryBackgroundColor"]),e._deps("Document_SoundPlayer_Progress_TextColor",["PrimaryBackgroundColor"]),e._deps("Document_SoundPlayer_Progress_TextHoverColor",["PrimaryBackgroundColor"]),e._deps("Document_SoundPlayer_ActiveSound_PlaylistItemDuration_TextColor",["PrimaryBackgroundColor"]),e._deps("Document_SoundPlayer_ActiveSound_PlaylistItemDuration_TextHoverColor",["PrimaryBackgroundColor"]),e._deps("Document_SoundPlayer_ActiveSound_PlaylistItemTitle_TextColor",["PrimaryBackgroundColor"]),e._deps("Document_SoundPlayer_ActiveSound_PlaylistItemTitle_TextHoverColor",["PrimaryBackgroundColor"]),e._deps("Document_SoundPlayer_ActiveSound_PlaylistItemCreator_TextColor",["PrimaryBackgroundColor"]),e._deps("Document_SoundPlayer_ActiveSound_PlaylistItemCreator_TextHoverColor",["PrimaryBackgroundColor"]),this.inheritTextValues("Document_SoundPlayer",["HeaderTitle","CurrentTitle","Progress","CurrentProgress","PlaylistItemDuration","FromArticleSound_PlaylistItemDuration","ActiveSound_PlaylistItemDuration","PlaylistItemTitle","FromArticleSound_PlaylistItemTitle","ActiveSound_PlaylistItemTitle","PlaylistItemCreator","FromArticleSound_PlaylistItemCreator","ActiveSound_PlaylistItemCreator"],e),e._deps("Document_SoundPlayer_BackgroundColor",["Panel_BackgroundColor"]),e._deps("Document_SoundPlayer_Body_BackgroundColor",["Panel_Body_BackgroundColor"]),e._deps("Document_SoundPlayer_IconHoverColor",["SecondaryColor"]),e._deps("Document_SoundPlayer_IconColor_Close",["Panel_IconColor_Close"]),e._deps("Document_SoundPlayer_IconHoverColor_Close",["Panel_IconColor_Close"]),e._deps("Document_SoundPlayer_Sound_BackgroundColor",["Document_SoundPlayer_Body_BackgroundColor"]),e._deps("Document_SoundPlayer_ActiveSound_BackgroundColor",["Document_SoundPlayer_BackgroundColor"]),e._deps("Document_SoundPlayer_ActiveSound_BackgroundHoverColor",["Document_SoundPlayer_ActiveSound_BackgroundColor"]),e._deps("Document_SoundPlayer_FromArticleSound_BackgroundHoverColor",["Document_SoundPlayer_FromArticleSound_BackgroundColor"]),e._deps("EditionFilters_Body_BackgroundColor",["Panel_Body_BackgroundColor"]),e._deps("EditionFilters_ActiveFilter_TextColor",["PrimaryBackgroundColor"]),e._deps("EditionFilters_ActiveFilter_TextHoverColor",["PrimaryBackgroundColor"]),e._deps("EditionFilters_ActiveFilter_TextBackgroundColor",["PrimaryColor"]),e._deps("EditionFilters_ActiveFilter_TextBackgroundHoverColor",["PrimaryColor"]),this.inheritTextValues("EditionFilters",["HeaderTitle","Filter","ActiveFilter"],e),e._deps("EditionFilters_IconColor",["PrimaryColor"]),e._deps("Settings_BackgroundColor",["Panel_BackgroundColor"]),e._deps("Settings_Body_BackgroundColor",["Panel_Body_BackgroundColor"]),e._deps("Settings_IconColor_Close",["Panel_IconColor_Close"]),e._deps("Settings_IconColor_Forward",["Settings_TabLabel_TextColor"]),e._deps("Settings_IconHoverColor",["PrimaryColor"]),e._deps("Settings_OnOffSwitch_ActiveBackgroundColor",["Panel_BackgroundColor"]),e._deps("Settings_TabLabel_Font",["BoldFontName"]),e._deps("Settings_TabLabel_FontWeight",["BoldFontWeight"]),e._deps("Settings_TabLabel_TextBackgroundHoverColor",["Seettings_TabLabel_TextHoverColor",["PrimaryBackgroundColor"]),this.inheritTextValues("Settings",["HeaderTitle","TabLabel","TabContent","TabContentLink"],e),e._deps("Document_ShareControl_ItemTitle_Font",["BoldFontName"]),e._deps("Document_ShareControl_ItemTitle_FontWeight",["BoldFontWeight"]),this.inheritTextValues("Document_ShareControl",["HeaderTitle","ItemCaption","ItemTitle","ItemSummary"],e),e._deps("Document_ShareControl_BackgroundColor",["Panel_BackgroundColor"]),e._deps("Document_ShareControl_Body_BackgroundColor",["Panel_Body_BackgroundColor"]),e._deps("Document_ShareControl_IconColor_Close",["Panel_IconColor_Close"]),e._deps("Document_ShareControl_IconHoverColor",["SecondaryColor"]),e._deps("Document_ShareControl_IconHoverColor_Broken-Asset",["Document_ShareControl_IconColor_Broken-Asset","Document_ShareControl_IconColor"]),this.inheritTextValues("Document_Products",["Title","Subtitle","Price","Description"],e),e._deps("Document_Products_BackgroundColor",["PrimaryColor"]),e._deps("Document_Products_Information_BackgroundColor",["Document_Products_InformationBackgroundColor","PrimaryBackgroundColor"]),e._deps("Document_Products_Toolbar_BackgroundColor",["PrimaryColor"]),e._deps("Document_Products_Toolbar_TintColor",["Toolbar_TintColor"]),e._deps("Document_Products_NavigationTintColor",[]),e._deps("Document_Products_NavigationBackgroundColor",["SelectionBackgroundColor"]),e._deps("Document_Products_NavigationTintColor",["Document_Products_Toolbar_TintColor"]),e._deps("Document_Products_IconBackgroundColor_Forward",["Document_Products_NavigationBackgroundColor"]),e._deps("Document_Products_IconBackgroundColor_Back",["Document_Products_NavigationBackgroundColor"]),e._deps("Document_Products_IconBackgroundHoverColor_Forward",["Document_Products_NavigationBackgroundColor"]),e._deps("Document_Products_IconBackgroundHoverColor_Back",["Document_Products_NavigationBackgroundColor"]),e._deps("Document_Products_Gallery_BackgroundColor",["PrimaryBackgroundColor"]),e._deps("Document_Products_Gallery_SelectedColor",["SelectionBackgroundColor"]),e._deps("Document_Products_BorderColor",[]),e._deps("Document_Products_BorderWidth",[]),e._deps("Document_Products_Overlay_IconColor",["PrimaryColor"]),e._deps("Document_Products_Overlay_IconHoverColor",["SecondaryColor"]),e._deps("Document_Products_Overlay_IconBackgroundColor",["IconBackgroundColor"]),e._deps("Document_Products_Overlay_IconBackgroundHoverColor",["IconBackgroundHoverColor"]),e._deps("Document_SearchControl_Backgroeps("Document_SearchControl_IconColor_Close",["Panel_IconColor_Close"]),e._deps("Document_SearchControl_BorderColor",["Document_SearchControl_BackgroundColor"]),e._deps("Document_SearchControl_InputField_OutlineColor",["Document_SearchControl_BackgroundColor"]),e._deps("Document_SearchControl_Navbar_BackgroundColor",["Document_SearchControl_Result_BackgroundColor"]),e._deps("Document_SearchControl_Navbar_BorderColor",["Document_SearchControl_Result_BorderColor"]),e._deps("Document_SearchControl_Navbar_BorderStyle",["Document_SearchControl_Result_BorderStyle"]),e._deps("Document_SearchControl_Navbar_BorderWidth",["Document_SearchControl_Result_BorderWidth"]),this.inheritTextValues("Document_SearchControl",["HeaderTitle","Title","InputField","NavbarTitle","Result"],e),e._deps("Document_SearchControl_Result_Title_Font",["BoldFontName"]),e._deps("Document_SearchControl_Result_EditionTitle_Font",["BoldFontName"]),e._deps("Document_SearchControl_Result_EditionTitle_FontWeight",["BoldFontWeight"]),e._deps("Document_SearchControl_Result_SummaryKeyword_Font",["BoldFontName"]),this.inheritTextValues("Document_SearchControl_Result",["Title","Summary","SummaryKeyword","EditionTitle","Section"],e),e._deps("Toolbar_BackgroundColor",["ToolbarColor"]),e._deps("Document_Toolbar_Overflow_TextBackgroundColor",["PrimaryBackgroundColor"]),this.inheritTextValues("Document_Toolbar",["StatusTitle","Overflow"],e),e._deps("Document_BackgroundImage",["BackgroundImage"]),e._deps("Document_BackgroundColor",["PrimaryBackgroundColor"]),e._deps("Document_Toolbar_BackgroundColor",["Toolbar_BackgroundColor","ToolbarColor"]),delete e._deps,this.outTheme=e,this},inheritTextValues:function(e,n,o){var a=["Font","FontWeight","FontSize","TextColor","TextBackgroundColor","TextHoverColor","TextBackgroundHoverColor"];_.forEach(n,function(n){_.forEach(a,function(a){var i=e.length?[e,n,a].join("_"):[n,a].join("_"),t=e.length?[e,a].join("_"):a;o._deps(i,[t])})})},iconDefaults:function(){var e=_.filter(Object.keys(this.outTheme),function(e){return e.indexOf("IconColor_")!==-1});return _.each(e,function(e){_.isEmpty(this.outTheme[e])&&(this.outTheme[e]=this.outTheme.IconColor)},this),this},_deps:function(e,n){_.each(n,function(n){_.isEmpty(this[e])&&(_.isEmpty(this[n])||(this[e]=this[n]))},this)}})}(),KGPugpigCore.Modules=KGPugpigCore.Modules||{},function(){KGPugpigCore.Modules.ThemeEngine=KGPugpigCore.Extensions.Module.extend({name:"ThemeEngine",appChannelName:"KGPugpigCore",startWithParent:!1,knownAppsNs:{Document_Products_Overlay:".shareDialog",Document_Products:"#KGProductThings main.KGProductThings",Slideshow:"#KGSlideshow",Document_ShareControl:"#KGShare.cleanslate",TableOfContents:"#KGTableOfContents.cleanslate",ThumbnailsNav:"#KGThumbnailsNav.cleanslate",Login:"#KGAccount.cleanslate",Document_SearchControl:"#KGSearch.cleanslate",Document_SoundPlayer:"#KGSounds.cleanslate",Settings:"#KGSettings.cleanslate",Picker:"#KGDocPicker.cleanslate",Picker_Toolbar:".KGDocPicker_toolbar",Document_Toolbar:".KGDocViewer_toolbar",Document_ArticlePreview:"#KGDocViewer.cleanslate .KGDocViewer_pages_arrows",Document_Viewer:"#KGDocViewer.cleanslate",Account:"#KGAccount.cleanslate",EditionFilters:"#KGEditionFilters.cleanslate"},themeValues:{},regex:{matchThemeUrlParameter:/[\\?&]theme=([^&#]*)/,hasSansSerif:/sans-serif/i,isParent:/:parent$/},initialize:function(){_.bindAll(this,"applyThemeRules","processTheme","applyTheme","requestThemeKey","getThemeJson"),this.ss=this.app.module("stylesheet"),this.app._appCh.reply("theme:key",this.requestThemeKey),this.app._appCh.reply("theme:all",this.getThemeJson),this.app._appCh.on("set:custom:theme",this.processTheme)},onStart:function(){$.when(this.getThemeJson()).done(_.bind(function(e){this.app._appCh.trigger("app:theme:ready",e),this.processTheme(e)},this))},checkIconSvgStore:function(){_.isEmpty(this.themeValues.IconSvgStore)||this.app.rootView.getRegion("icons").currentViSvgStore)},processTheme:function(e){this.themeValues=this.submodules.defaults.extendTheme(e),_.forEach(this.app.module("subapps").getListAppNames(),this.applyTheme)},applyTheme:function(e,n){n=_.isObject(n)?n:this.app.subapp(e)._subappCh.request("theme"),_.isUndefined(n)||(this.embedFonts(),$.when(this.ss.createStylesheet(n.ssName,"style",{class:n.ssName,type:"text/css"})).done(_.bind(function(){this.applyThemeRules(n)},this)))},applyThemeRules:function(e){this.applyTextRules(e).applyLayoutRules(e).applyIconRules(e).app.triggerMethod("show")},embedFonts:function(){var e=this.themeValues;return _.isEmpty(e.FontCssFile)||this.ss.createStylesheet("KGPugpigReader-font","link",{class:"KGPugpigReader-font",type:"text/css",rel:"stylesheet",href:e.FontCssFile}),_.isEmpty(e.FontLocalFile)&&_.isEmpty(e.BoldFontLocalFile)||$.when(this.ss.createStylesheet("KGPugpigReader-font-localfile","style",{class:"KGPugpigReader-font-localfile",type:"text/css",rel:"stylesheet"})).done(_.bind(function(){_.isEmpty(e.FontLocalFile)||this.ss.addRule("KGPugpigReader-font-localfile","@font-face",this.getFontFaceRule("Font")),_.isEmpty(e.BoldFontLocalFile)||this.ss.addRule("KGPugpigReader-font-localfile","@font-face",this.getFontFaceRule("BoldFont"))},this)),this},getFontFaceRule:function(e){var n=this.themeValues,o=n[e+"Name"],a=n[e+"LocalFileLocation"]+n[e+"LocalFile"],i=n[e+"LocalWeight"]||"400",t=n[e+"LocalStyle"]||"normal";return{fontFamily:'"'+o+'"',fontWeight:i,fontStyle:t,src:'url("'+a+'.eot"),url("'+a+'.eot#iefix") format("embedded-opentype"),url("'+a+'.ttf") format("truetype"),url("'+a+'.otf") format("opentype"),url("'+a+'.woff") format("woff"),url("'+a+'.svg#svgFontName") format("svg");'}},applyTextRules:function(e){if(_.isEmpty(e.textElements))return this;var n=this.themeValues;return _.forEach(Object.keys(e.textElements),function(o){var a=e.textElements[o],i={fontFamily:this._alwaysFontSansSerif(n[a+"_Font"]),color:n[a+"_TextColor"],fontSize:n[a+"_FontSize"],backgroundColor:n[a+"_TextBackgroundColor"],fontWeight:n[a+"_FontWeight"]};_.isUndefined(n[a+"_CssStyle"])||_.extend(i,this._convertFromCssTextToRules(n[a+"_CssStyle"])),this.ss.addRule(e.ssName,e.cssNamespace+" "+o,i),this.ss.addRule(e.ssName,e.cssNamespace+" "+o+":hover",{color:n[a+"_TextHoverColor"],backgroundColor:n[a+"_TextBackgroundHoverColor"]})},this),this},applyLayoutRules:function(e){if(_.isEmpty(e.layoutElements))return this;var n=this.themeValues;return _.forEach(Object.keys(e.layoutElements),function(o){var a={},i=e.layoutElements[o],t=this.regex.isParent.test(o)?e.cssNamespace:e.cssNamespace+" "+o;_.forEach(Object.keys(i),function(i){var t=e.layoutElements[o][i];a[i]=n[t],_.isUndefined(n[t+"_CssStyle"])||_.assign(a,this._convertFromCssTextToRules(n[t+"_CssStyle"]))},this),this.ss.addRule(e.ssName,t,a)},this),this},applyIconRules:function(e){var n=this.themeValues,o=/_Icon/,a=new RegExp("^"+e.themefunction(e){return a.test(e)&&o.test(e)});return _.forEach(i,function(o){var a=this.getIconThemeProp(o),i=o.indexOf(a),t=o.substr(0,i-1),r=this.getCssNamespaceFromThemeAppName(o);if(!_.isEmpty(a)){var g=o.substr(i+a.length+1).toLowerCase(),d=".icon"+(_.isEmpty(g)?"":".icon-"+g),s={};switch(_.isEmpty(t)||r===e.cssNamespace||(d=r+" "+d),"#"!==d[0]&&(d=e.cssNamespace+" "+d),a){case"IconFile":var c=n[o];this._appCh.request("is:device","mode","webview")&&(c=c.replace(/file:\/\//,"")),s.backgroundImage=c,this.ss.addRule(e.ssName,d+" svg",{display:"none"});break;case"IconFileSvg":this.app.rootView.getRegion("icons").currentView.changeIconSvg(g,n[o]);break;case"IconColor":s.fill=n[o];break;case"IconHoverColor":d+=":hover",s.fill=n[o];break;case"IconActiveColor":d+=".isActive",s.fill=n[o];break;case"IconDisplay":s.display=n[o];break;case"IconBackgroundColor":s.backgroundColor=n[o];break;case"IconBackgroundHoverColor":d+=":hover",s.backgroundColor=n[o];break;case"IconDisableColor":s.fill=n[o],this.ss.addRule(e.ssName,d+".isDisabled:hover",s),d+=".isDisabled",s.fill=n[o];break;case"IconCssStyle":s=this._convertFromCssTextToRules(n[o]);break;case"IconTooltipText":d+="[data-tooltip]:after",s.content='"'+n[o]+'"';break;case"IconTooltipFont":d+="[data-tooltip]:after",s.fontFamily=n[o];break;case"IconTooltipFontWeight":d+="[data-tooltip]:after",s.fontWeight=n[o];break;case"IconTooltipTextColor":d+="[data-tooltip]:after",s.color=n[o];break;case"IconTooltipFontSize":d+="[data-tooltip]:after",s.fontSize=n[o];break;case"IconTooltipBackgroundColor":d+="[data-tooltip]:after",s.backgroundColor=n[o];break;case"IconTooltipStyle":d+="[data-tooltip]:after",s=this._convertFromCssTextToRules(n[o]);br00%)";break;case"bottom":s.transform="translate(-50%,100%)";break;case"left":s.left="0%",s.transform="translate(-100%,-50%)";break;case"right":s.transform="translate(50%,-50%)"}break;case"IconTooltipDisplay":d+="[data-tooltip]:after",s.display=n[o];break;default:s=!1}s&&this.ss.addRule(e.ssName,d,s)}},this),this},_alwaysFontSansSerif:function(e){if(!_.isString(e)&&_.isEmpty(e))return e;var n=e;if(!this.regex.hasSansSerif.test(e)){var o=e.split(",");o.push("sans-serif"),n=o.join(",")}return n},_convertFromThemeKeysToCssRules:function(e){var n=[];return _.forEach(e,function(e){if(!_.isEmpty(e)){var o=e.split(":");n[this.ss._camelCase(o[0])]=o[1].trim()}},this),n},_convertFromCssTextToRules:function(e){var n=[],o=e.split(";");return _.forEach(o,function(e){if(!_.isEmpty(e)){var o=e.split(":");n[this.ss._camelCase(o[0])]=o[1].trim()}},this),n},getIconThemeProp:function(e){return _.first(_.intersection(["IconFile","IconFileSvg","IconColor","IconDisableColor","IconHoverColor","IconActiveColor","IconDisplay","IconStyle","IconBackgroundColor","IconBackgroundHoverColor","IconCssStyle","IconTooltipText","IconTooltipFont","IconTooltipFontSize","IconTooltipTextColor","IconTooltipFontWeight","IconTooltipBackgroundColor","IconTooltipStyle","IconTooltipPosition","IconTooltipDisplay","IconSize"],e.split("_")))},getCssNamespaceFromThemeAppName:function(e){var n=_.find(Object.keys(this.knownAppsNs),function(n){return!_.isEmpty(n)&&e.indexOf(n+"_")!==-1});return _.isUndefined(n)?"":this.knownAppsNs[n]},getThemeJson:function(){var e=$.Deferred(),n=this.getThemeFromUrlParameter();return n?e.resolve(n):_.isUndefined(this.app.getOption("themeFile"))?_.isUndefined(this.app.getOption("theme"))?e.resolve({}):e.resolve(this.app.getOption("theme")):($.ajax(this.app.getOption("themeFile")).done(_.bind(function(n){return e.resolve(this.convertPlistToJson(n))},this)),e)},getThemeFromUrlParameter:function(){var e=this.regex.matchThemeUrlParameter.exec(location.search);return null===e?null:JSON.parse(decodeURIComponent(e[1].replace(/\+/g," ")))},convertPlistToJson:function(e){var n=KGPugpigCore.fw.PlistParser.parse(e),o={};return _.forEach(Object.keys(n),function(e){o[e.replace(/\./g,"_")]=n[e]}),o},requestThemeKey:function(e){var n=[],o=new RegExp(e),a=new RegExp("^"+e),i=Object.keys(this.themeValues),t=[];return _.forEach(i,function(i){if(a.test(i)){var r=i===e?e:i.replace(o,"");t.push(r),n[r]=this.themeValues[i]}},this),1===Object.keys(n).length?n[t[0]]:n}})}(),KGPugpigCore.Behaviors=KGPugpigCore.Behaviors||{},function(){KGPugpigCore.Behaviors.AppOverlay=KGPugpigCore.Extensions.Behavior.extend({name:"AppOverlay",appChannelName:"KGPugpigCore",ui:{appOverlay:".appOverlay"},openModals:[],initialize:function(){_.bindAll(this,"onClick","onAppShowOverlay","onAppHideOverlay","onSetOverlayCss"),this._appCh.on("app:overlay:show",this.onAppShowOverlay),this._appCh.on("app:overlay:hide",this.onAppHideOverlay),this._appCh.on("app:overlay:setcss",this.onSetOverlayCss),this.elBody=document.getElementsByTagName("body")[0]},onShow:function(){var e=this.$el.parent();e.prepend('<div class="appOverlay">'),this.ui.appOverlay=e.find(".appOverlay"),this.ui.appOverlay.on("click",this.onClick),this.ui.appOverlay.on("touchmove",this.onTouchMove)},onClick:function(){this._appCh.trigger("overlay:click")},onTouchMove:function(e){e.preventDefault()},onAppShowOverlay:function(e){return this.openModals.length?void("paywall"!==e?(this.openModals.push(e),this.ui.appOverlay.addClass("appOverlay-hasModal")):"paywall"===e&&this.openModals.indexOf("paywall")===-1&&(this.openModals.unshift(e),this.ui.appOverlay.addClass("appOverlay-hasModal"))):(this.openModals.push(e),void this.ui.appOverlay.transitionClass("appOverlay-isVisible",{state:!0,complete:_.bind(function(){this.elBody.classList.add("KGPugpigReader-hasOverlay")},this)}))},onAppHideOverlaid this.ui.appOverlay.removeClass("appOverlay-hasModal"):void this.ui.appOverlay.transitionClass("appOverlay-isVisible",{state:!1,complete:_.bind(function(){this.elBody.classList.remove("KGPugpigReader-hasOverlay")},this)})},onSetOverlayCss:function(e){"undefined"!=typeof e&&(_.isEmpty(e)?this.ui.appOverlay.removeAttr("style"):this.ui.appOverlay.css(e))}})}(),KGPugpigCore.Behaviors=KGP.Extensions.Behavior.extend({name:"ImagesLoader",appChannelName:"KGPugpigCore",regex:{isFigure:/figure/i},events:{"figure:check:on:screen":"checkOnScreen"},initialize:function(){_.bindAll(this,"onImageLoad","onImageError","checkOnScreen","processOnScreenImage"),this.view.checkOnScreenImages=this.checkOnScreen},onRender:function(){this.regex.isFigure.test(this.view.tagName)?(this.$el.addClass("KGFigure"),this.$figure=this.$el):this.$figure=this.$el.find(".KGFigure"),0!==this.$figure.length&&(this.$figure[0].hasAttribute("data-onscreen-src")?window.requestAnimationFrame(this.processOnScreenImage):(this.$images=this.$figure.find("img"),_.forEach(this.$images,function(e){this._deployImage(e)},this)))},processOnScreenImage:function(){this.setContainersClassNames(),this.checkOnScreen()},checkOnScreen:function(){var e=this.$el.hasClass("KGDocPicker_edition-isFilteredOut");if(!e){var n=this.$figure[0],o=n?n.getAttribute("data-onscreen-src"):void 0;if("undefined"!=typeof o){var a=this.$figure.find("img"),i=a.length?a[0]:document.createElement("img");this._isElementInViewport(n)?i.getAttribute("src")!==o&&(i.setAttribute("src",o),0===a.length&&n.insertBefore(i,n.firstChild),this._deployImage(i)):(this.$figure.removeClass("KGFigure-isVisible"),i.removeAttribute("src"),this.$figure.find(".KGFigure_error").remove())}}},setContainersClassNames:function(){var e=this.view.$el.parent();this.parentViewElClass=e.length?e[0].className.split(" ")[0]:void 0,this.containerClass=this.$el[0].className.split(" ")[0]},_deployImage:function(e){e.addEventListener("load",this.onImageLoad),e.addEventListener("error",this.onImageError),$(e).parents(".KGFigure").append('<div class="KGSpinner"><figure>')},onImageLoad:function(e){var n=$(e.target),o=n.parents(".KGFigure");o.addClass("KGFigure-isVisible"),o.find(".KGSpinner").remove(),this.view.trigger("image:load",e),this.view.trigger("image:done",e),this._cleanEventListeners(e.currentTarget)},onImageError:function(e){var n=e.currentTarget,o=$(n),a=o.parents(".KGFigure"),i=a[0],t=this._appCh.request("app:get:image:asset","noCoverImageEdition");i.classList.add("KGFigure-isVisible"),i.setAttribute("data-onscreen-src",t),0===a.find(".KGFigure_error").length&&n.setAttribute("src",t),a.find(".KGSpinner").remove(),this.view.trigger("image:error",e),this.view.trigger("image:done",e),this._cleanEventListeners(e.currentTarget)},_cleanEventListeners:function(e){e.removeEventListener("loadntInViewport:function(e){if(e.parentElement.querySelector(":hover")===e)return!0;var n=e.getBoundingClientRect(),o=window.innerWidth||document.documentElement.clientWidth,a=window.innerHeight||document.documentElement.clientHeight,i=function(e,n){return document.elementFromPoint(e,n)};if(n.right<0||n.bottom<-350||n.left>o||n.top>a+350)return!1;var t=i(n.left,n.top),r=i(n.left,n.bottom),g=t?t.className.split(" ")[0]:void 0,d=r?r.className.split(" ")[0]:void 0,s=["loading-screen","appOverlay","KGEditionFilters","KGPreviewMode","KGAccount","KGToolbar","KGFigure",this.containerClass,this.parentViewElClass];if(r||t){var c=_.find(s,function(e){var n=t&&g.indexOf(e)>-1,o=r&&d.indexOf(e)>-1;return n||o});if(c)return!0}return e.contains(i(n.left,n.top+350))||e.contains(i(n.left,n.bottom-350))}})}(),KGPugpigCore.Behaviors=KGPugpigCore.Behaviors||{},function(){KGPugpigCore.Behaviors.OverflowButtons=KGPugpigCore.Extensions.Behavior.extend({name:"OverflowButtons",appChannelName:"KGPugpigCore",modalref:"overflow-buttons",ui:{overflowButtons:".KGToolbar_overflowButtons"},events:{"click @ui.btnOverflow":"onClickOverflow","click @ui.buttons":"onClickButtons"},initialize:function(){_.bindAll(this,"showOverflownButtons","hideOverflownButtons","checkOverflownButtons"),this._appCh.on("window:resize",this.checkOverflownButtons),this.elBody=document.getElementsByTagName("body")[0]},onClickButtons:function(e){if(this.isOverflown&&e.currentTarget.classList.contains("js-overflow")===!1){var n=!e.currentTarget.classList.contains("KGToolbar_overflowButtons");this.hideOverflownButtons(n)}},onClickOverflow:function(){this.isOverflown===!0?this.hideOverflownButtons():this.showOverflownButtons()},checkOverflownButtons:function(e){this.isOverflown===!0&&e.width>768&&this.hideOverflownButtons()},showOverflownButtons:function(){this.el.classList.add("KGToolbar-isOverflown"),this.ui.overflowButtons.addClass("KGToolbar_overflowButtons-isOverflown"),this.elBody.classList.add("KGPugpigReader-hasOverflowButtons"),this._appCh.trigger("app:overlay:show",this.modalref),this._appCh.once("overlay:click",this.hideOverflownButtons),this.view.triggerMethod("toggle:overflow:buttons",!0),this.isOverflown=!0},hideOverflownButtons:function(e){this.el.classList.remove("KGToolbar-isOverflown"),this.ui.overflowButtons.removeClass("KGToolbar_overflowButtons-isOverflown"),this.elBody.classList.remove("KGPugpigReader-hasOverflowButtons"),e="undefined"==typeof e||e,e&&this._appCh.trigger("app:overlay:hide",this.modalref),this._appCh.off("overlay:click"),this.view.triggerMethod("toggle:overflow:buttons",!1),this.isOverflown=!1},onDestroy:function(){this._appCh.off("window:resize")}})}(),KGPugpigCore.Views=KGPugpigCore.Views||{},function(){KGPugpigCore.Views.AppRoot=KGPugpigCore.Extensions.LayoutView.extend({name:"AppRoot",appChannelName:"KGPugpigCore",tagName:"main",className:"KGPugpigCore cleanslate",template:KGPugpigCore.Templates.AppRoot,regions:{icons:".assets-icons",images:".assets-images"},behaviors:{AppOverlay:{behaviorClass:KGPugpigCore.Behaviors.AppOverlay}},keyboardEvents:{esc:"onKeyEsc",right:"onKeyArrows",left:"onKeyArrows",down:"onKeyArrowsDown"},initialize:function(){_.bindAll(this,"setThemePickerMode","onTouchMoveBody","onAppHideLoadingScreen"),this.iconsView=new KGPugpigCore.Views.Assets.Icons,this.imagesView=new KGPugpigCore.Views.Assets.Images,this._appCh.on("theme:picker",this.setThemePickerMode),this.elBody=document.querySelector("body"),this.elBody.addEventListener("touchmove",this.onTouchMoveBody),this._appCh.on("app:ready",this.onAppHideLoadingScreen),this.options.language&&$("html").attr("lang",this.options.language)},onTouchMoveBody:function(e){this.elBody.classList.contains("KGPugpigReader-hasOverlay")&&(e.stopPropagation(),e.target.classList.contains("KGPanel_content")&&e.preventDefault())},serializeData:function(){return{isPreviewMode:this.options.isPreviewMode,isConfigurationMode:this.options.isConfigurationMode}},onRender:function(){this.getReKeyArrowsDown:function(e,n){this._appCh.trigger("keyboard:event:arrows:down",n)},onKeyArrows:function(e,n){this._appCh.trigger("keyboard:event:arrows",n);var o=this._appCh.request("get:open:modal")||[];o.forEach(function(e){e._subappCh.trigger("keyboard:event",{type:"keydown",keyIdentifier:n})})},setThemePickerMode:function(e){var n=this.$el.parents("#KGPugpigReader");n.toggleClass("KGThemePicker",e)},onAppHideLoadingScreen:function(){this._appCh.off("app:ready");var e=$(".loading-screen");e.transitionClass("loading-screen--isVisible",{complete:_.bind(function(){e.remove()},this)})}})}(),KGPugpigCore.Views.Assets=KGPugpigCore.Views.Assets||{},function(){KGPugpigCore.Views.Assets.Icons=KGPugpigCore.Extensions.LayoutView.extend({name:"Icons",appChannelName:"KGPugpigCore",tagName:"figure",className:"icons-svgstore",ui:{account:"#icon-account","admin-network":"#icon-admin-network",back:"#icon-back","broken-asset":"#icon-broken-asset",buy:"#icon-buy",carousel:"#icon-carousel",close:"#icon-close",contents:"#icon-contents",facebook:"#icon-facebook","font-resize-large":"#icon-font-resize-large","font-resize-medium":"#icon-font-resize-medium","font-resize-small":"#icon-font-resize-small",forward:"#icon-forward",gallery:"#icon-gallery",google:"#icon-google",grid:"#icon-grid",home:"#icon-home",mail:"#icon-mail",overflow:"#icon-overflow",pinterest:"#icon-pinterest",save:"#icon-save",saved:"#icon-saved",search:"#icon-searounds-on-playing":"#icon-sounds-on-playing","sounds-on":"#icon-sounds-on","sounds-playing":"#icon-sounds-playing",sounds:"#icon-sounds","icon-play":"#icon-play","icon-pause":"#icon-pause",thumbs:"#icon-thumbs",trash:"#icon-trash",twitter:"#icon-twitter","padlock-open":"#icon-padlock-open","padlock-close":"#icon-padlock-close",wishlist:"#icon-wishlist"},tooltipText:{account:"Account","admin-network":"",back:"Previous","broken-asset":"",buy:"Add to basket",carousel:"",close:"Close",contents:"",facebook:"","font-resize-large":"","font-resize-medium":"","font-resize-small":"",forward:"Next",gallery:"Photo gallery",google:"",grid:"",home:"Edition selector",mail:"",overflow:"",save:"",saved:"",search:"Search",settings:"Settings",share:"Share","sounds-on-playing":"","sounds-on":"","sounds-playing":"",sounds:"",thumbs:"",trash:"",twitter:"","padlock-open":"","padlock-close":"",wishlist:"Add to wishlist"},regex:{matchIconClass:/^icon-/i,isSvgSymbol:/^<symbol/i,isSvgBase64:/^data\:image\/svg\+xml;base64/i},initialize:function(){_.bindAll(itle",this.getIconTitle)},getTemplate:function(){var e=atob(KGPugpigCore.Templates.Icons());return _.template(pako.inflate(e,{to:"string"}))},getIconTitle:function(e){return _.isUndefined(this.tooltipText[e])?"":this.tooltipText[e]},decodeBase64:function(e){var n=window.atob(e.split(",")[1]),o=new DOMParser,a=o.parseFromString(n,"image/svg+xml");return a.firstChild},setCustomSvgStore:function(e){if(!_.isNull(this._appCh.request("get:device","engine"))&&!this._appCh.request("is:device",{engine:"trident"})&&_.isString(e)&&this.regex.isSvgBase64.test(e)){var n=this.decodeBase64(e);_.forEach(n.querySelectorAll("symbol"),function(e){this.changeIconSvg(e.getAttribute("id").replace(this.regex.matchIconClass,""),e)},this)}},changeIconSvg:function(e,n){if(!_.isUndefined(this.ui[e])){var o,a=this._getHtml(n);_.isObject(n)&&this.regex.isSvgSymbol.test(a)?o=n:this.regex.isSvgBase64.test(n)&&(o=this.decodeBase64(n)),o&&this.ui[e][0]&&this._replaceNode(this.ui[e],o)}},_getHtml:function(e){if(!e||!e.tagName)return"";if(e.outerHTML)return e.outerHTML;var n=document.createElement("div");return n.appendChild(e.cloneNode(!0)),n.innerHTML},_replaceNode:function(e,n){var o=e[0];o&&o.tagName&&o.outerHTML&&e.replaceWith(n)}})}(),KGPugpigCore.Views.Assets=KGPugpigCore.Views.Assets||{},function(){KGPugpigCore.Views.Assets.Images=KGPugpigCore.Extensions.LayoutView.extend({name:"Images",appChannelName:"KGPugpigCore",tagName:"section",className:"assets-images",template:KGPugpigCore.Templates.ImagesAssets,ui:{noCoverImageEdition:".assets-images-noCoverEdition"},dataUriImages:{},initialize:function(){_.bindAll(this,"getImageAsset"),this._appCh.reply("app:get:image:asset",this.getImageAsset)},getImageAsset:function(e){if("undefined"!=typeof this.dataUriImages[e])return this.dataUriImages[e];var n=this.ui[e]?this.ui[e][0]:document.querySelector(this.ui[e]),o=n.currentStyle||window.getComputedStyle(n,!1),a=o.backgroundImage;return this.dataUriImages[e]=!!a&&a.slice(4,-1).replace(/"/g,""),this.dataUriImages[e]}})}(),KGPugpigCore.Modules=KGPugpigCore.Modules||{},function(){KGPugpigCore.Modules.AppEvents=KGPugpigCore.Extensions.Module.extend({name:"AppEvents",appChannelName:"KGPugpigCore",startWithParent:!0,initialize:function(){_.bindAll(this,"triggerCustomEvent","triggerWebviewEvent","themePickerEvent","onWindowResize","onWindowPopState","onAppThemeReady","onWindowMessage","onSetDocumentMeta","onBeforePrint"),this.$window=$(window),this.$document=$(document),this.$head=$("head"),this.isInnerDocClick=!0},onBeforeStart:function(){this.app._appCh.reply("trigger:webview:event",this.triggerWebviewEvent),this.app._appCh.reply("trigger:custom:event",this.triggerCustomEvent),this.app._appCh.on("themepicker:event",this.themePickerEvent),this.app._appCh.on("keyboard:event",this.appKeyboardEvent),this.app._appCh.on("app:theme:ready",this.onAppThemeReady),this.app._appCh.on("set:document:meta",this.onSetDocumentMeta),this.$window.on("resize",this.onWindowResize),this.$window.on("popstate",this.onWindowPopState),this._appCh.request("app:has:feature","printing")&&window.addEventListener("beforeprint",this.onBeforePrint),window.addEventListener("message",this.onWindowMessage,!1),Mousetrap.bind("ctrl+/",_.bind(function(){this.app._appCh.trigger("toggle:mode:themepicker")},this)),this.onSetDocumentMeta()},onSetDocumentMeta:function(e){_.isUndefined(e)||(document.title=e.title?e.title+" - "+this.app.getOption("appName"):this.app.getOption("appName"))},onBeforePrint:function(){const e=this._appCh.request("custom:text","docpicker");alert(e.beforePrintText)},themePickerEvent:function(e){console.log(e),this.triggerCustomEvent("themepicker",e)},onWindowMessage:function(e){if(!_.isUndefined(e.data.event))switch(e.data.event){case"enable:mode:themepicker":this.app._appCh.request("is:mode:themepicker")||this.app._appCh.trigger("toggle:mode:themepicker");break;case"disable:mode:themepicker":this.app._appCh.request("is:mode:themepicker")&&this.app._appCh.trigger(heme":this.app._appCh.trigger("set:custom:theme",e.data.theme)}},onAtriggerCustomEvent("app:theme:ready",n)},appKeyboardEvent:function(e){switch(e.keyCode){case 27:Mousetrap.trigger("esc");break;case 37:Mousetrap.trigger("left");break;case 39:Mousetrap.trigger("right")}},triggerCustomEvent:function(e,n){var o;if(e="kg-pugpig-reader:"+e,Modernizr.customevent?o=new CustomEvent(e,{detail:n}):(o=document.createEvent("EvdispatchEvent(o),_.isFunction(window.parent.postMessage)){var a=window.location!==window.parent.location?document.referrer:document.location;this._appCh.request("is:device",{engine:"trident",browserVersion:"^9"})||window.parent.postMessage(n,a)}this._log("debug",e,o)},triggerWebviewEvent:function(e){if(this._appCh.request("is:device","mode","webview")){var n=$("#KGPugpigReader"),o=parseInt((new Date).getTime(),10),a="native-proxy-"+_.uuid();n.append('<iframe id="'+a+'" class="KGPugpigReader-native-proxy-channel" data-timestamp="'+o+'">');var i=n.find("#"+a);i.attr("src",e),_.forEach(n.find(".KGPugpigReader-native-proxy-channel"),function(e){var n=$(e),a=parseInt(n.attr("data-timestamp"),10);o-a>5e3&&n.remove()}),this._log("debug","webview:send "+e)}},onWindowResize:function(){var e=this.app._appCh.request("get:device");this.app._appCh.trigger("window:resize",{width:this.$window.width(),height:this.$window.height()});var n=this.$window.width()>this.$window.height()?"landscape":"portrait";n!==e.orientation&&(this.app._appCh.trigger("window:orientationchange",n),this.app._appCh.request("set:device",{orientation:n}))},onWindowPopState:function(e){this.app._appCh.trigger("window:popstate",e.originalEvent.state)},onDestroy:function(){this.$document.off(),this.$window.off()}})}(),KGPugpigCore.Modules=KGPugpigCore.Modules||{},function(){KGPugpigCore.Modules.AppState=KGPugpigCore.Extensions.Module.extend({name:"AppState",appChannelName:"KGPugpigCore",startWithParent:!0,state:{idEdition:void 0,idArticle:void 0,isPlayingSounds:!1,isThemePickerMode:!1},regex:{isPlaying:/play|playing/i},initialize:function(){_.bindAll(this,"isPlayingSounds","onSoundsPlayerStateChange","getAppState","setEditionArticle","isThemePickerMode","toggleThemePickerMode","onWindowPopState","onUserChangeIsLoggedIn","onCheckEditionCredentials"),this.uri=KGPugpigCore.fw.URI,this.app._appCh.reply("app:get:state",this.getAppState),this.app._appCh.on("app:set:state",this.setEditionArticle),this.app._appCh.on("sounds:player:state:change",this.onSoundsPlayerStateChange),this.app._appCh.reply("is:playing:sounds",this.isPlayingSounds),this.app._appCh.reply("is:mode:themepicker",this.isThemePickerMode),this.app._appCh.on("toggle:mode:themepicker",this.toggleThemePickerMode),this.app._appCh.on("window:popstate",this.onWindowPopState)},onStart:function(){this.getAppBaseHref(this.app.options)},getCookieLifetime:function(){var e=new Date;return e.setTime(e.getTime()+36e5),new Date(e.getFullYear(),e.getMonth()+2,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())},deletePrivacyBanners:function(){var e=document.querySelector(".KGDocPicker"),n=document.querySelector(".KGDocViewer");if(e){var o=e.querySelector(".KGDocPicker_privacyContainer");o&&e.removeChild(o)}if(n){var o=n.querySelector(".KGDocViewer_privacyContainer");o&&n.removeChild(o)}},setEditionArticle:function(e,n){var o=_.isUndefined(e.isThemePickerMode)?this.state.isThemePickerMode:e.isThemePickerMode,a=_.has(e,"idEdition"),i=window.location.search.replace("?",""),t=i.split("&"),r={};if(t.forEach(function(e){var n=e.split("=")[0],o=decodeURIComponent(e.split("=")[1]);r[n]=o}),this.app.options.privacyBanner!==!1){var g=window.docCookies.hasItem("privacy");g||window.docCookies.setItem("privacy","displayed",this.getCookieLifetime(),"/"),g&&"displayed"===window.docCookies.getItem("privacy")&&(window.docCookies.setItem("privacy","accepted",this.getCookieLifetime(),"/"),this.deletePrivacyBanners()),"accepted"===window.docCookies.getItem("privacy")&&this.deletePrivacyBanners()}if(a?(a={idEdition:e.idEdition,idArticle:e.idArticle,urlArticle:e.urlArticle},_.isUndefined(e.isArticleProtected)||(a.isArticleProtected=e.isArticleProtected),_.isUndefined(e.urlAnchorArticle)||(a.urlAnchorArticle=e.urlAnchorArticle,history.pushState(a,null,a.urlArticle)),"undefined"==typeof e.filterTerm&&"undefined"==typeof this.state.filterTerm||(a.filterTerm=_.isUndefined(e.filterTerm)?this.state.filterTerm:e.filterTerm)):"undefined"!=typeof r.edition?(console.info("app:setEditionArticle: Taking deep link info from query string",r,window.location.hash),a={idEdition:r.edition,idArticle:r.article}):this._appCh.request("app:has:feature","storefront")===!1&&(a={idEdition:this._appCh.request("feed:get:id:last:edition")}),a.isThemePickerMode=o,a.arrows=this._appCh.request("app:has:feature","arrows"),this.state=this.state||{},a.idEdition&&a.idEdition!==this.state.idEdition){if(this.checkUserAccess(a)===!1)return;return void this._appCh.request("feed:get:articles",a).fail(_.bind(function(){this._setState({idEdition:void 0},n)},this)).done(_.bind(function(e){var i="undefined"!=typeof e.attributes?e:e.first();this._setState({idEdition:a.idEdition,idArticle:i.get("id"),urlArticle:i.get("url.relative")+window.location.hash,titleArticle:i.get("title"),isThemePickerMode:o,arrows:a.arrows},n)},this))}a.isPlayingSounds=this.state.isPlayingSounds,this._setState(a,n)},onWindowPopState:function(e){e=e||{},this._setState(e,!1,!0),this._appCh.trigger("hide:all:panels")},_setState:function(e,n,o){if(n=n||!1,o=o||!1,this._appCh.request("app:font:state:change"),this.checkUserAccess(e)!==!1){var a=this._appCh.request("user:has:access:article",e.idEdition,e.idArticle);if(a!==!0&&this._appCh.trigger("app:change:state",e),e&&(this.state=e),n!==!1&&o!==!0||this._appCh.trigger("docviewer:set:state",e),o===!1){var i=e.urlArticle||this.appBaseHref;history.pushState(e,e.titleArticle,i)}this._appCh.trigger("app:change:state",e)}},checkUserAccess:function(e){var n=this._appCh.request("app:has:feature","magicLogin");if(n)return!0;if(!e||_.isUndefined(e.idEdition)_appCh.request("user:has:access:edition",e.idEdition);console.info("%ccheckUserAccess userHasAccess for "+e.idEdition,"color:pink",o);var a=this._appCh.request("feed:is:edition:paid",e.idEdition),i=this._appCh.request("feed:is:edition:sample",e.idEdition);return"undefined"==typeof o&&a&&!i?(this._log("error","The content is protected but we don't have auth"),this._appCh.trigger("edition:error",{idEdition:e.idEdition,message:"Sorry, you can't access this edition"}),!1):o===-1?(this._appCh.once("check:creds",this.onCheckEditionCredentials),!1):!(o===!1&&a&&!i)||(this._appCh.trigger("toggle:account",!0),!1)},onUserChangeIsLoggedIn:function(){this.setEditionArticle(this.newState)},onCheckEditionCredentials:function(){this.setEditionArticle(this.newState)},getAppState:function(){return this.state},onSoundsPlayerStateChange:function(e){this.state.isPlayingSounds=this.regex.isPlaying.test(e)},isPlayingSounds:function(){return this.state.isPlayingSounds},getAppBaseHref:function(e){this.appBaseHref=_.isUndefined(e.idEdition)?this.uri.parse(window.location).path:"/"},toggleThemePickerMode:function(){this.state.isThemePickerMode=!this.state.isThemePickerMode,this._appCh.trigger("theme:picker",this.state.isThemePickerMode)},isThemePickerMode:function(){return this.state.isThemePickerMode}})}(),KGPugpigCore.App=KGPugpigCore.App||{},function(){KGPugpigCore.App=KGPugpigCore.Extensions.Application.extend({name:"KGPugpigCore",initialize:function(){this.module("device",KGPugpigCore.Modules.DeviceInfo),KGPugpigCore.Modules.Scaffold),this.module("cookie",KGPugpigCore.Modules.Cookie),this.module("logger",KGPugpigCore.Modules.Loggere("subapps",KGPugpigCore.Modules.Subapps),this.module("appstate",KGPugpigCore.Modules.AppState),this.module("appevents",KGPugpigCore.Modules.AppEvents),this.module("stylesheet",KGPugpigCore.Modules.Stylesheet),this.module("script",KGPugpigCore.Modules.Script),this.module("theme",KGPugpigCore.Modules.ThemeEngine),this.module("theme.defaults",KGPt:function(e){this.options=e||this.options,this.options.ppVersion="4.14.1","undefined"==typeof this.options.feed&&(hostname.indexOf(".web.pugpig-local.com")>0?(this.options.feed="https://"+hostname.replace(".web.pugpig-local.com","")+"/endpoint.xml",console.info("%capp onBeforeStart: Changing feed based on web.pugpig-local.com - ","color:hotpink;",this.options.feed)):this.options.feed=window.location.origin+"/endpoint.xml"),console.log("KGPugpigReader "+this.options.ppVersion),console.log("Config Version "+(this.options.version||"Unknown"))},onStart:function(){this.module("cookie").start(),this.module("analytics").start(),this.module("stylesheet").start(),this.module("script").start(),this.initSubapps(),this.module("theme").start(),this.addRegions({main:"#KGPugpigReader"}),this.rootView=new KGPugpigCore.Views.AppRoot({isPreviewMode:isPreview,isConfigurationMode:hasConfigMode,language:this.options.customText&&this.options.customText.language?this.options.customText.language:"en"}),this.getRegion("main").show(this.rootView),this._appCh.request("is:device","mode","browser")&&(KGPugpigReader.BasilStore=new KGPugpigCore.fw.Basil({namespace:"pugpig"}),this.options.docviewer.privacyBanner=this.options.privacyBanner,this.subapp("account").start(this.options.account),this.subapp("docpicker").start(this.options.docpicker),this.subapp("docviewer").start(this.options.docviewer)),this._appCh.request("is:device","mode","webview")&&this.subapp(things).start(this.options.things),this.module("theme").checkIconSvgStore()},initSubapps:function(){var e={feed:"undefined"!=typeof KGFeedParser,docviewer:"undefined"!=typeof KGDocViewer,docpicker:"undefined"!=typeof KGDocPicker,things:"undefined"!=typeof KGProductThings,search:"undefined"!=typeof KGSearch,slideshow:"undefined"!=typeof KGSlideshow,share:"undefined"!=typeof KGShare,thumbnailsnav:"undefined"!=typeof KGThumbnailsNav,tableofcontents:"undefined"!=typeof KGTableOfContents,sounds:"undefined"!=typeof KGSounds,settings:"undefined"!=typeof KGSettings,account:"undefined"!=typeof KGAccount,editionfilters:"undefined"!=typeof KGEditionFilters},n=_.filter(Object.keys(e),function(n){return e[n]});_.forEach(n,function(e){switch(e){case"feed":this.subapp(e,KGFeedParser);break;case"docviewer":this.subapp(e,KGDocViewer);break;case"docpicker":this.subapp(e,KGDocPicker);break;case"things":this.subapp(e,KGProductThings);break;case"search":this.subapp(e,KGSearch);break;case"slideshow":this.subapp(e,KGSlideshow);break;case"share":this.subapp(e,KGShare);break;case"thumbnailsnav":this.subapp(e,KGThumbnailsNav);break;case"tableofcontents":this.subapp(e,KGTableOfContents);break;case"sounds":this.subapp(e,KGSounds);break;case"settings":this.subapp(e,KGSettings);break;case"account":this.subapp(e,KGAccount);break;case"editionfilters":this.subapp(e,KGEditionFilters)}},this),this._appCh.request("is:device","mode","webview")||(this.listenToOnce(this.subapp("feed"),"opds:sync",this.onOpdsSync),this.subapp("feed").start(),this._appCh.trigger("feed:set:opds",{href:this.getOption("feed")}))},onOpdsSync:function(e){e.auth&&(this.options.account=this.module("config").getAccountConfigFromOpds(e.auth),this.subapp("account").setAuthConfig(this.options.account),this._appCh.trigger("set:authentication")),this.subapp("account").saveAuthentication(),this._appCh.trigger("app:set:state",this.options),this.sendAnalyticsEvent("OPDSFeedChecked")},sendAnalyticsEvent:function(e){var n=KGPugpigCore.fw.URI.absoluteTo(window.location.href,this.getOption("feed"));this._appCh.trigger("analytics:hit",{type:"event",eventCategory:"/Internal",eventAction:e,eventLabel:n})}})}(),window.KGFeedParser={App:{},Models:{},Collections:{},Views:{Collections:{},Items:{},Layouts:{}},Templates:{},Modules:{},fw:{}},"undefined"!=typeof KGPugpigCore&&(KGFeedParser.fw=KGPugpigCore.fw),KGFeedParser.Models=KGFeedParseugpigCore.Extensionsurn _.isUndefined(n)?o.rel===e:o.rel===e&&o.type===n});return _.isUndefined(o)?void 0:o},getLinks:function(e,n){var o=new RegExp(n,"i"),a=_.filter(this.get("_links"),function(a){return _.isUndefined(n)?a.rel===e:a.rel===e&&o.test(a.type)});return _.isEmpty(a)?void 0:a},getLinkHref:function(e,n){var o=this.getLink(e,n);return _.isUndefined(o)?void 0:encodeURI(o.href)},getLinkHrefs:function(e,n){var o=this.getLinks(e,n);return _.map(o,function(e){return _.isUndefined(e)?void 0:encodeURI(e.href)})},getRelativeLink:function(e,n){var o=this.getLink(e,n);return _.isUndefined(o)?void 0:o.relativeHref},getCategories:function(e){var n=new RegExp(e);return _.filter(this.get("_categories"),function(e){return n.test(e.scheme)})},getCategory:function(e){var n=this.getCategories(e);return n.length?n[0]:void 0},getCategoryTerm:function(e){var n=this.getCategory(e);return n?n.term.trim():void 0},getCustomAttributes:function(){var e=this.getCategoryTerm("http://schema.pugpig.com/attributes"),n=!!window.config.features&&window.config.features.allowAlternateLandscape,o={isPrimary:!1,isPrivate:!1,isMarketing:!1,isSupported:!0};return this.getLink("alternate/landscape","text/html")&&!n&&(o.isSupported=!1),e&&e.split(";").forEach(function(e){switch(e=e.trim().toLowerCase()){case"primary":o.isPrimary=!0;break;case"private":o.isPrivate=!0;break;case"marketing":o.isMarketing=!0}},this),o}})}(),KGFeedParser.Models=KGFeedParser.Models||{},function(){KGFeedParser.Models.Feed=KGFeedParser.Models.Entry.extend({name:"Feed",appChannelName:"KGFeedParser",initialize:function(e,n){_.bindAll(this,"onChangeEntries","setUpBasicAuth","setConfigurationMode"),this.options=n||{},this.listenTo(this,"change:_entries",this.onChangeEntries)},fetch:function(e){var n=this;return e=e||{},e.isAtom=!!_.isUndefined(e.isAtom)||e.isAtom,this.urlRoot=e.url,e.dataType="xml",e.beforeSend=function(o){o.setRequestHeader("x-pugpig-publish-reader",!0),e.isAtom&&n.options.isProtected&&n.setUpBasicAuth(o),n.setConfigurationMode(o)},KGPugpigCore.Extensions.Model.prototype.fetch.call(this,e)},parse:function(e,n){return this._subappCh.request("atom:parse",{xmlSource:e,xmlBaseHref:this.urlRoot,isAtom:!!_.isUndefined(n.isAtom)||n.isAtom})},setConfigurationMode:function(e){isPreview&&e.setRequestHeader("x-pugpig-preview","preview")},onChangeEntries:function(e,n){switch(this.get("atomType")){case"opds":var o=this.get("id"),a=this.getLinkHref("search"),i=_.map(n,function(e){return _.extend(e,{idOpds:o,crossEditionSearchLink:a})});this._editions=new KGFeedParser.Collections.Editions,this._editions.reset(i);break;case"atom":this._edition=new KGFeedParser.Models.Edition({id:this.get("id"),author:this.get("author"),title:this.get("title"),updated:this.get("updated"),productsDataUrl:this.getLinkHref("http://type.pugpig.com/things/products")});var t=this.get("id"),r=_.map(n,function(e){return _.extend(e,{idEdition:t})},this);this._edition.setArticles(r)}},setUpBasicAuuest("user:creds",this.options.idEdition);if(_.isUndefined(n)||_.isUndefined(n.get("accounts")[0]))return void this._log("error","The atom says it's protected but we don't have auth");var o=window.btoa(n.get("accounts")[0].user+":"+n.get("accounts")[0].password);e.setRequestHeader("Authorization","Basic "+o)}})}(),KGFeedParser.Models=KGFeedParser.Models||{},function(){KGFeedParser.Models.Edition=KGFeedParser.Models.Entry.extend({name:"Edition",appChannelName:"KGFeedParser",regex:{matchGroupTagFilterGroup:/http:\/\/schema\.pugpig\.com\/filtergroup#(.+)/i,matchGroupTagTabbedWeb:/http:\/\/schema\.pugpig\.com\/tabbedweb#(.+)/i},initialize:function(){this._articles=new KGFeedParser.Collections.Articles,this._sections=new KGFeedParser.Collections.Sections,this.setEditionCover(),this.setCustomAttributes(),this.setFilterGroups(),this.setEditionResourceType(),this.setTocStyle()},setEditinkHref("http://opds-spec.org/image"),n=this.getLinkHref("http://opds-spec.org/image/thumbnail");this.set("editionCover",e),this.set("editionCoverThumbnail",_.isEmpty(n)?e:n)},setArticles:function(e){this.set("headerStyle",this.getHeaderStyle()),this.set("toc_style",this.getTocStyle()),this._articles.reset(e,{editionModel:this})},getArticles:function(e){e=e||{};var n=$.Deferred();if(this._articles.length>0){var o=this._articles;return"undWhere({id:e.idArticle}),"undefined"==typeof o&&(o=this._articles)),n.resolve(o)}var a=new KGFeedParser.Models.Feed({},{idEdition:this.get("id"),isProtected:this.get("isProtected")});return a.fetch({url:this.getLoadLink().href}).done(_.bind(function(){var o;this.get("id")!==a._edition.get("id")&&this._log("error","EditionsID mismatch: OPDS: "+this.get("id")+"; Atom: "+a._edition.get("id")),this._articles=a._edition._articles.clone(),this.setHasSounds(),this.set("productsDataUrl",a._edition.get("productsDataUrl")),o=_.isUndefined(e.idArticle)?this._articles:new KGFeedParser.Collections.Articles(a._edition._articles.findWhere({id:e.idArticle})),n.resolve(o)},this)),n},getCost:function(){var e=this.getLink("http://opds-spec.org/acquisition/sample"),n=this.getLink("http://opds-spec.org/acquisition/buy");return e?1:n?2:0},getDownloadLink:function(){var e=this.getLink("http://opds-spec.org/acquisition/sample","application/pdf");if("undefined"!=typeof e)return e&&e.href?e.href:void 0;var n=this.getLink("http://opds-spec.org/acquisition/buy","application/pdf");if("undefined"!=typeof n)return n&&n.href?n.href:void 0;var o=this.getLink("http://opds-spec.org/acquisition","application/pdf");if("undefined"!=typeof o)return o&&o.href?o.href:void 0;var a=this.getLink("alternate","application/pdf");return"undefined"!=typeof a&&a&&a.href?a.href:void 0},getLoadLink:function(ition/sample");
if("undefined"!=typeof e)return e;var n=this.getLink("http://opds-spec.org/acquisition/buy");if("undefined"!=typeof n)return n;var o=this.getLink("http://opds-spec.org/acquisition");if("undefined"!=typeof o)return o;var a=this.getLink("alternate");return"undefined"!=typeof a?a:void 0},getTocStyle:function(){return this.getCategoryTerm("http://schema.pueturn _.isEmpty(e)?void 0:e.join(";")},getSearchLink:function(){var e=this.getLink("search");return _.isUndefined(e)?this.get("crossEditionSearchLink"):e},getSections:function(){return this._sections.setSections(this),this._sections},setHasSounds:function(){return"undefined"!=typeof this._articles&&0!==this._articles.length&&void this.set("hasSounds",this._articles.hasSounds())},isProtected:function(){return this.get("isProtected")},getArticle:function(e){return this._articles.findWhere({id:e})},setCustomAttributes:function(){var e=this.getCustomAttributes();this.set({isPrimary:e.isPrimary,isPrivate:e.isPrivate,isSupported:e.isSupported})},setFilterGroups:function(){var e=!1,n=[];this.getCategories("^http://schema.pugpig.catch(this.regex.matchGroupTagFilterGroup)||o.scheme.match(this.regex.matchGroupTagTabbedWeb);if(a){if(o.groupTag=a[1],e="~pinned"===o.groupTag||"~webpinned"===o.groupTag,!o.label)return;var i=o.label.split("#");o.groupLabel=i[0],o.label=i[1]}delete o.scheme,"undefined"==typeof o.label&&(o.label=o.term),n.push(o)},this),this.set({isPinned:e,filterGroups:n})},hasFilters:function(){return this.get("isSupported")&&!!this.get("filterGroups").length},setEditionResourceType:function(){var e=this.getLoadLink();"undefined"!=typeof e&&this.set("resourceType",e.type)},setTocStyle:function(){var e={},n=this.getCategoryTerm("http://schema.pugpig.com/toc_style");"undefined"!=typeof n&&n.trim().split(";").forEach(function(n){if(0!==n.length){var o=n.substr(0,n.indexOf(":")).trim().toLowerCase(),a=n.substr(n.indexOf(":")+1).trim();switch(o){case"iconplacement":case"type":case"groupby":e[o]=a;break;case"latestnews":case"pulltorefresh":case"autoopen":e[o]=!0}}}),this.set("tocStyle",e)}})}(),KGFeedParser.Models=KGFeedParser.Models||{},function(){KGFeedParser.Models.Article=KGFeedParser.Models.Entry.extend({name:"Article",appChannelName:"KGFeedParser",initialize:function(e,n){this.editionModel=n.editionModel;var o=this.getCustomAttributes();this.set({section:this.getCategoryTerm("http://schema.pugpig.com/section"),subsection:this.getCategoryTerm("http://schema.pugpig.com/subsection"),pageType:this.getCategoryTerm("http://schema.pugpig.com/pagetype"),display:this.getCategoryTerm("http://schema.pugpig.com/display"),level:this.getCategoryTerm("http://schema.pugpig.com/level"),access:this.getCategoryTerm("http://schema.pugpig.com/access"),style:{header:this.getHeaderStyle(),section:this.getSectionStyle(),article:this.getArticleStyle()},customAnalytics:this.getCategoryTerm("http://schema.pugpig.com/custom_analytics"),tags:this.getTags(),sharingMode:this.getCategoryTerm("http://schema.pugpig.com/sharing_mode"),url:{html:this.getLinkHref("alternate"),pdf:this.getLinkHref("alternate/pdf"),portrait:this.getLinkHrefs("alternate/portrait"),manifest:this.getLinkHref("related","text/cache-manifest"),contentZip:this.getLinkHref("enclosure","application/zip"),bookmark:this.getLinkHref("bookmark"),thumbnail:this.getLinkHref("thumbnail"),icon:this.getLinkHref("icon"),relative:this.getArticleRelativeUrl()},sounds:this.getSounds(),isSupported:o.isSupported})},getArticleRelativeUrl:function(){return this._uri.parse(this.getLinkHref("alternate")).path},getArticleUrl:function(){return this.get("url.html")},getPortraitUrls:function(){return this.get("url.portrait")},getPdfUrl:function(){return this.get("url.pdf")},getThumbnailIcon:function(){return this.getLinkHref("navigationthumbnail")},getSounds:function(){var e=this.getLinks("enclosure","^audio");if("undefined"!=typeof e)return e.map(function(e){return e.id=_.uuid(),e})},getHeaderStyle:function(){var e=this.getCategory("http://schema.pugpig.com/header_style");if(!_.isUndefined(e)){var n=[];return e.term.split(";").forEach(function(e){if(e=e.trim(),!_.isEmpty(e))switch(e.split(":")[0].trim()){case"display":case"backgroundcolor":case"hide_toc":case"color":n.push(e)}}),n.length?n.join(";"):void 0}},getArticleStyle:function(){var e=this.getCategory("http://schema.pugpig.com/toc_style"),n=this.getCategoryTerm("http://schema.pugpig.com/pagetype");if(!_.eturn _.forEach(e.term.split(";"),function(e){if(e=e.trim(),!_.isEmpty(e))switch(e.split(":")[0].trim()){case"hidden":"double_page_spread"!==n&&o.push(e);break;case"color":case"backgroundcolor":o.push(e)}}),o.length?o.join(";"):void 0}},getTags:function(){var e=[],n=this.getCategory("http://schema.pugpig.com/tag");if(!_.isUndefined(n))return n=_.isArray(n)?n:[n],_.forEach(n,function(n){e.push(n.term.trim())}),e},getSection:function(){return{name:this.getCategoryTerm("http://schema.pugpig.com/section"),tocStyle:this.getSectionStyle()}},getSectionStyle:function(){var e=this.getCategory("http://schema.pugpig.com/toc_style");if(!_.isUndefined(e)){var n=[];return _.forEach(e.term.split(";"),function(e){if(e=e.trim(),!_.isEmpty(e))switch(e.split(":")[0].trim()){case"sectioncolor":case"sectionbackgroundcolor":n.push(e)}}),n.join(";")}},isProtected:function(){returParser.Models=KGFeedParser.Models||{},function(){KGFeedParser.Models.Section=KGPugpigCore.Extensions.Model.extend({name:"Section",appChannelName:"hasColorOrBackground:/color|backgroundcolor/i,hasHidden:/hidden/i},initialize:function(){_.isUndefined(this.get("articles"))||(this.set("sectionTocStyle",this.getSectionTocStyle()),this.set("hasIcons",this.hasIcons()))},getSectionTocStyle:function(){var e=_.filter(this.get("articles").pluck("style.section"),function(e){return!_.isUndefined(e)&&!_.isEmpty(e.trim())});if(!_.isEmpty(e))return e.join(";");var n=[],o=this.get("articles").at(0).get("style.article");return"undefined"!=typeof o&&(o.split(";").forEach(function(e){this.regex.hasColorOrBackgthis),n.length>0)?n.join(";"):""},getVisibleArticles:function(){return this._visibleArticles=this._visibleArticles||this.get("articles").filter(function(e){return!(!_.isEmpty(e.get("style.article"))&&this.regex.hasHidden.test(e.get("style.article")))},this),this._visibleArticles},getFirstArticle:function(){return _.isUndefined(this._visi.first(this._visibleArticles)},hasIcons:function(){return _.isUndefined(this.get("hasIcons"))?(this._visibleArticles=this._visibleArticles||this.getVisibleArticles(),!_.isEmpty(_.filter(this._visibleArticles,function(e){return!_.isEmpty(e.get("url.icon"))}))):this.get("hasIcons")}})}(),KGFeedParser.r.Collections||{},function(){KGFeedParser.Collece.Extensions.Collection.extend({name:"Editions",appChannelName:"KGFeedParser",model:KGFeedParser.Models.Edition,initialize:function(){_.bindAll(this,"isContentProtected"),this.on("reset",this.onRes){this._appCh.reply("feed:is:protected",this.isContentProtected),this.removeUnsupported()},isContentProtected:function(e,n){if(console.info("%cisContentProtected","color:brown",e,n),"undefined"!=typeof e){var o=this.findWhere({id:e});if(o){if("undefined"!=typeof n){if(!o.get("isPaid")&&!onsole.info("%cEdition "+o.get("id")+" is free. NOT PROTECTED","color:brown"),!1;if(!o.get("isSample"))return console.info("%cEdition "+o.get("id")+" is not a sample. IS PROTECTED","color:brown"),!0;var a=o.getArticle(n);if("undefined"==typeof a)return;var i=a.isProtected();return console.info("%cEdition Samples "+o.get("id")+", Article "+a.get("id")+" IS PROTECTED","color:brown",i),i}return console.info("%cEdition BUT NO article "+o.get("id"),"color:brown",o.get("isPaid")),o.get("isPaid")}}},hasFilters:function(){return this.find(function(e){return e.hasFilters()})},removeUnsupported:function(){var e=this.where({isSupported:!1});this.remove(e,{silent:!0})}})}(),KGFeedParser.Collections=KGFeedParser.Collections||{},function(){KGFeedParser.Collections.Articles=KGPugpigCore.Extensions.Collection.extend({name:"Articles",appChannelName:"KGFeedParser",model:KGFeedParser.Models.Article,initialize:function(){_.bindAll(thlection)},hasSounds:function(){return!_.isEmpty(_.find(this.models,function(e){return"undefined"!=typeof e.get("sounds")}))},comparator:function(e){const n=e.get("pageType"),o=["post","full_page_image","pugpig_enhanced_pdf-html"];return o.includes(n)&&e.get("url.pdf")?1:0},onResetCollection:function(){this.removeUnsupported()},removeUnsupported:function(){var e=this.where({isSupported:!1});this.remove(e,{silent:!0})}})}(),KGFeedParser.Collections=KGFeedParser.Collections||{},function(){KGFeedParser.Collections.Sections=KGPugpigCore.Extensions.Collection.extend({name:"Sections",appChannelName:"KGFeedParser",model:KGFeedParser.Models.Section,setSections:function(e){if(!_.isEmpty(e._articles)&&(_.isUndefined(this.edition)||e.get("id")!==this.edition.get("id"))){this.edition=e;var n,o=[];e._articles.forEach(function(a){_.isUndefined(n)&&(n=this.getNewEmptySection(e,a)),a.get("section")!==n.name&&(o.push(n),n=this.getNewEmptySection(e,a)),n.articles.add(a,{silent:!0})},this),o.push(n),this.reset(o)}},getNewEmptySection:function(e,n){return{name:n.get("section"),articles:new KGFeedParser.Collections.Articles,editionTocStyle:e.getCategoryTerm("http://schema.pugpig.com/toc_style")}},getSectionByIdArticle:function(e){return this.find(function(n){var o=!_.isEmpty(Where({id:e}));return o})}})}(),KGFeedParser.Modules=KGFeedParser.Modules||{},function(){KGFeedParser.Modules.API=KGPugpigCore.Extensions.Module.extend({name:"API",appChannelName:"KGFeedParser",startWithParent:!0,initialize:function(){_.bindAll(this,"setOpds","setAtom","getEditions","getFilters","getArticles","getArticleByLink","getArticleByAlternatePortrait","getFeedContext","isEditionPaid","isEditionSample","getIdLastEdition","getPromosLink"t("app:has:feature","hasAllFilter"),this._appCh.on("feed:set:opds",this.setOpds),this._appCh.reply("feed:set:atom",this.setAtom),this._appCh.reply("feed:get:editions",this.getEditions),this._appCh.reply("feed:get:filters",this.getFilters),this._appCh.reply("feed:get:articles",this.getArticles),this._appCh.reply("feed:get:h.reply("feed:get:context",this.getFeedContext),this._appCh.reply("feed:get:id:last:edition",this.getIdLastEdition),this._appCh.reply("feed:get:promosLink",this.getPromosLink),this._appCh.reply("get:article:by:link",this.getArticleByLink),this._appCh.reply("get:article:by:alternate:portrait",this.getArticleByAlternatePortrait),this._appCh.reply("feed:is:edition:paid",this.isEditionPaid),this._appCh.reply("feed:is:edition:sample",this.isEditionSample),this._appCh.reply("feed:get:promos",this.fetchPromos)},fetchPromos:function(){return this.request("feed:get:promosLink").then(function(e){var n=$.Deferred();return e?($.getJSON(e,function(e){for(var o=Object.keys(e),a=Object.keys(e).map(function(n){return e[n]}),i=0;i<a.length;++i)a[i].id=o[i];n.resolve(a)}).fail(function(){n.resolve([])}),n):n.resolve([])})},setOpds:function(e){return _.isUndefined(e.href)?(alert("Failed to load config"),void this._log("error","feed:set:opds needs a options.href (opds url location)")):0===e.href.length?void alert("There is no endpoint url defined"):void(this.fetchPromise=this.app.opds.fetch({error:function(n,o,a){404===o.status&&alert("Failed to load "+e.href+" - "+o.status+" ("+o.statusText+")")},url:e.href,isAtom:!1}))},setAtom:function(e){e=e||{};var n=$.Deferred();return _.isUndefined(e.id)?(this._log("error","feed:set:atom needs a options.id (idEdition)"),n.reject()):(this.getEditions(e).fail(_.bind(function(){return this._log("error","Edition not found: "+e.id+". Available editions: ["+this.app.opds._editions.pluck("id")+"]"),n.reject()},this)).done(_.bind(function(o){e.href=o.getLoadLink().href,this.app.atom.fetch({url:e.href,isAtom:!0}).done(_.bind(function(){n.resolve(this.app.atom._edition)},this))},this)),n)},getEditions:function(e){var n=$.Deferred()ditions)?this.fetchPromise.done(_.bind(function(){this.getEditionsResolveData(n,e)},this)):this.getEditionsResolveData(n,e),n},getFilters:function(e){e=e||{};var n=$.Deferred(),o=this.hasAllFilter;return this.getEditions().fail(function(){n.reject()}).done(function(e){var a=e.pluck("filterGroups");a=_.filter(a,function(e){return e.length}),a=_.flatten(a);var i=[];a=_.filter(a,function(e){if(i.indexOf(e.groupTag+"|"+e.term)===-1)return i.push(e.groupTag+"|"+e.term),!0}),a.forEach(function(n){if("~pinned"===n.groupTag||"~webpinned"===n.groupTag){var o=e.find(function(e){return e.get("isPinned")===!0&&!!_.find(e.get("filterGroups"),function(e){return e.term===n.term})});n.idEdition=o.get("id")}},this),o&&a.push({term:"all",label:"All issues",groupTag:"all",groupLabel:"All"}),n.resolve(a)}),n},getEditionsResolveData:function(e,n){if("undefined"==typeof n.id)return e.resolve(this.app.opds._editions);var o=this.app.opds._editions.findWhere(n);return _.isUndefined(o)?e.reject():void o.getArticles().done(function(){o.getSections(),e.resolve(o)})},getArticles:function(e){e=e||{};var n=$.Deferred();if(this.app.atom.get("id")===e.idEdition){if(_.isUndefined(e.id))return n.resolve(this.app.atom._articles);var o=this.app.atom._articles.findWhere(e);n.resolve(new KGFeedParser.Collections.Articles(o))}else this.getEditions({id:e.idEdition}).fail(function(){n.reject()}).don.resolve(e)})});return n},getArticleByLink:function(e,n){var o=this.app.opds._editions.findWhere({id:e});if(!o||0===o._articles.length)return!1;var a=KGPugpigCore.fw.URI.removeAnchor(n);return o._articles.find(function(e){return e.getArticleUrl()===a})},getArticleByAlternatePortrait:function(e,n){var o=this.app.opds._editions.findWhere({id:e});if(!o||0===o._articles.length)return!1;var a=KGPugpigCore.fw.URI.removeAnchor(n);return o._articles.find(function(e){var n=e.getPortraitUrls();return!n||n.length<=0?e.getArticleUrl()===a:n.find(function(e){return e===a})})},getFeedContext:function(e){var n,o,a={};return e.idEdition&&(n=this.app.opds._editions.findWhere({id:e.idEdition}),n&&(a.idEdition=e.idEdition,a.editionName=n.get("title"),a.author=n.get("author"),a.idEditionCost=n.getCost())),e.idArticle&&(o=n._articles.findWhere({id:e.idArticle}),o&&(a.pageName=a.editionName+": "+o.get("title"),a.pageNumber=o.getIndexInCollection(),a.pageType=o.get("pageType"),a.section=o.get("section"),a.subsection=o.get("subsection"))),a},isEditionPaid:function(e){var n=this.app.opds._editions.findWhere({id:e});return n&&0!==n.getCost()},isEditionSample:function(e){var n=this.app.opds._editions.findWhere({id:e});return n&&1===n.getCost()},getIdLastEdition:function(){return!(!this.app.opds._editions||!this.app.opds._editions.length)&&this.app.opds._editions.at(0).get("id")},getPromosLink:function(){var e=$.Deferred();return"pending"===this.fetchPromise.state()?this.fetchPromise.then(_.bind(function(){e.resolve(this.app.opds.get("promosLink"))},this)):e.resolve(this.app.opds.get("promosLink")),e}})}(),KGFeedParser.Modules=KGFeedParser.Modules||{},function(){KGFeedParser.Modules.AtomParser=KGPugpigCore.Extensions.Module.extend({name:"AtomParser",appChannelName:"KGFeedParser",initialize:function(){_.bindAll(this,"parse","_parseEntry"),this.app._subappCh.reply("atom:parse",this.parse)},parse:function(e){this.parseOptions=e||{};var n={};n.atomType=this.parseOptions.isAtom?"atom":"opds";var o=e.xmlSource;Date.now();return console.time("JSON parse time "+n.atomType),parsedFeed=KGFeedParser.fw.X2JS.xml2json(o),console.timeEnd("JSON parse time "+n.atomType),_.forEach(parsedFeed.feed.link,function(e){this._resolveUrls(e)}.bind(this)),n.id=parsedFeed.feed.id,n.title=parsedFeed.feed.title,n.updated=parsedFeed.feed.updated,n.author=parsedFeed.feed.author,n._links=parsedFeed.feed.link,console.time("Fixing _entries"),n._entries=this._parseEntries(parsedFeed.feed.entry),console.timeEnd("Fixing _entries"),n._categories=parsedFeed.feed.category,n._getCategory=this._getCategory,n._getCategoryTerm=this._getCategoryTerm,n._countCategory=this._countCategory,n._getLinkHref=this._getLinkHref,his.getPromosLink(parsedFeed.feed.link),n},getAuthorisationConfig:function(e){return!1},getPromosLink:function(e){var n=_.findWhere(e,{rel:"http://type.pugpig.com/things/promos"});return n&&this._uri.absoluteTo(this.parseOptions.xmlBaseHref,n.href)},_getCategory:function(e){var n=new RegExp(e);return _.find(this._categories,function(e){return n.test(e.scheme)})},_getCategoryTerm:function(e){var n=this._getCategory(e);return _.isUndefined(n)?void 0:n.term},_countCategory:function(e){var n=new RegExp(e),o=_.filter(this._categories,function(e){return e.scheme.match(n)});return _.isUndefined(o)?0:o.length},_getLinkHref:function(e,n){var o=new RegExp(e),a=_.isUndefined(n)?void 0:new RegExp(n),i=_.find(this._links,function(e){return _.isUndefined(n)?e.rel.match(o):e.rel.match(o)&&e.type.match(a)});return _.isUndefined(i)?void 0:i.href},_parseEntries:function(e){var n=[];return _.forEach(e,function(e){this._parseElement(e,n)},this),n},_parseElement:function(e,n){var o=this._parseEntry(e);_.forEach(o._links,function(e){this._resolveUrls(e)}.bind(this)),n.push(o)},_parseEntry:function(e){var n={};return n.relativeURL=this.parseOptions.xmlBaseHref,n.id=e.id,n.title=e.title,n.author="undefined"!=typeof e.author?e.author.name:"",n.issued="undefined"!=typeof e.issued?Date.parse(e.issued.__text):"",n.published=Date.parse(e.published),n.updated=Date.parse(e.updated),n.summary="undefined"!=typeof e.summary?this._getSummaryText(e.summary):"",n.edition=e.edition?e.edition:nulln.isSample=this.getIsSample(e),n.isDraft=this.getIsDraft(e),n.hasThumbnails=this._appCh.request("app:has:feature","thumbnails"),n._links=e.link,n._categories=e.category,n._getCategoryTerm=this._getCategoryTerm,n._getLinkHref=this._getLinkHref,n._getCategory=this._getCategory,n},_getSummaryText:function(e){return e.hasOwnProperty("__text")||"object"!=typeof e?e:""},_getJsonDate:function(e){var n=_.get(this.jsonEntry,e);return n?new Date(n.toString()).getTime():void 0},_getElementDate:function(e,n){var o=this._getElementText(e,n);return o?new Date(o).getTime():void 0},getIsProtected:function(e){var n=_.isArray(e.category)?e.category:[e.category],o=_.findWhere(n,{scheme:"http://schema.pugpig.com/access"});return o?"protected"===o.term:this.getIsPaid(e)&&!this.getIsSample(e)},getIsPaid:function(e){return!this.getIsSample(e)&&!!_.findWhere(e.link,{rel:"http://opds-spec.org/acquisition/buy"})},getIsSample:function(e){return!!_.findWhere(e.link,{rel:"http://opds-spec.org/acquisition/sample"})},getIsDraft:function(e){var n=e.control?e.control.draft:void 0;return!(!n||"yes"!==n.toString())},_cleanUndefinedAttrs:function(e){_.forEach(Object.keys(e),function(n){_.isUndefined(e[n])&&delete e[n]})},_resolveUrls:function(e){var n;if(!_.isUndefined(e.href)){e.relativeHref=e.href,n=this._uri.absoluteTo(this.parseOptions.xmlBaseHref,e.href);try{e.href=decodeURIComponent(n)}catch(e){console.warn("Invalid URL for decodeURIComponent:"+n)}}if(!_.isUndefined(e.icon)){e.relativeIcon=e.icon,n=this._uri.absoluteTo(this.parseOptions.xmlBaseHref,e.icon);try{e.icon=decodeURIComponent(n)}catch(e){console.warn("Invalid URL for decodeURIComponent:"+n)}}},_getElementText:function(e,n){var o=e.querySelector(n);return o?o.textContent:void 0},_getElementHtml:function(e,n){var o=e.querySelector(n);return o?o.innerHTML:void 0},_getElementAttr:function(e,n){if(0!==e.attributes.length){var o=new RegExp(n),a=_.find(e.attributes,function(e){return o.test(e.name)});return _.isUndefined(a)?void 0:a.nodeValue}}})}(),KGFeedParser.App=KGFeedParser.App||{},function(){KGFeedParser.App=KGPugpigCore.Extensions.Application.extend({name:"KGFeedParser",initialize:function(){_.bindAll(this,"onOpdsSync"),this.module("logger",KGPugpigCore.Modules.Logger),this.module("api",KGFeedParser.Modules.API),this.module("atomParser",KGFeedParser.Modules.AtomParser)},onBeforeStart:function(){this.opds=new KGFeedParser.Models.Feed,this.atom=new KGFeedParser.Models.Feed},onStart:function(){this.listenTo(this.opds,"sync",this.onOpdsSync),this.listenTo(this.atom,"sync",_.bind(function(){},this))},onOpdsSync:function(){this.trigger("opds:sync",this.opds.toJSON())},onStop:function(){}})}(),window.KGDocPicker={App:{},Models:{},Collections:{},Views:{Collections:{},Items:{},Layouts:{}},Templates:{},Modules:{},fw:{}},"undefined"!=typeof KGPugpigCore&&(KGDocPicker.fw=KGPugpigCore.fw),KGDocPicker.App=KGDocPicker.App||{},function(){KGDocPicker.App=KGPugpigCore.Extensions.Application.extend({name:"KGDocPicker",search:window.location.search,initialize:function(){_.bindAll(this,"launchView","setCurrentState","refreshEditionsAndPromos","refreshAppRootView"),window.KGPugpigReaderURLSearchParams=this.search,this.hasStorefront=this._appCh.request("app:has:feature","storefront"),this.hasStorefront!==!1&&(this.module("logger",KGPugpigCore.Modules.Logger),this.module("theme",KGDocPicker.Modules.Theme),this._appCh.on("app:change:state",this.setCurrentState),this._appCh.on("app:change:filters",this.refreshEditionsAndPromos),this._appCh.on("change:availableIssues",this.refreshEditionsAndPromos),this._appCh.on("window:resize",this.refreshAppRootView),this.$head=$("head"))},onBeforeStart:function(){$("#KGPugpigReader").append('<div id="KGDocPicker" class="cleanslate">'),this.$el=$("#KGPugpigReader").find("#KGDocPicker")},onStart:function(e){this.hasStorefront!==!1&&(this.addRegions({main:"#KGDocPicker"}),this.options=_.extend(this.options,e),this.setCurrentState(this.options),this.options.customCSS&&this.addCustomCSS())},refreshAppRootView:function(){var e=(document.getElementsByClassName("KGDocPicker_promosCarouselList")[0],this._appCh.request("is:device","os","ios|android"),this);clearTimeout(window.mTimeout),window.mTimeout=setTimeout(function(){e.refreshEditionsAndPromos(),!_.isUndefined(window.originalNode)},500),this.rootView&&this.rootView.refreshView()},setCurrentState:function(e){if(this.options.state=e||this.options.state,!_.isUndefined(e)&&e!==!1)return"undefined"==typeof this.rootView?void this.fetchEditions():"undefined"!=typeof e.idEdition?void this.rootView.slideOut():_.isEmpty(e)||_.has(e,"idEdition")?(this._appCh.trigger("set:document:meta",{}),void this.rootView.slideIn()):void 0},getFilterFromUrl:function(e,n){if(!this.search||""===this.search)return n;var o,a=this.search.split("?")[1].split("=");if(a[0]&&"filter"===a[0]&&a[1]&&(o=decodeURI(a[1])),!o)return n;var i=e.find(function(e){return e.get("label")===o});return i?i.attributes:n},refreshEditionsAndPromos:function(){var e=this.options&&this.options.state&&this.options.state.filterTerm?this.options.state.filterTerm:{};_.isEmpty(e)&&this.options.filters&&(e=this.options.filters.first().attributes,e=this.getFilterFromUrl(this.options.filters,e)),e.maxEditions=this.options.maxEditions,this.rootView&&this.rootView.filterEditionsAndPromos(e)},cleanPrefetchLinks:function(){this.$head.find('link[rel="prefetch"]').remove()},fetchEditions:function(){this._appCh.trigger("set:document:meta",{}),$.when(this._appCh.request("feed:get:editions"),this._appCh.request("feed:get:promos"),this._appCh.request("feed:get:filters")).done(this.launchView),this.setCurrentState()},launchView:function(e,n,o){var a=this.getOption("state"),i=this.getOption("customButtons");this.options.filters=new KGEditionFilters.Collections.Filters((void 0),{filters:o}),this.rootView=new KGDocPicker.Views.AppRoot({privacyBanner:this.options.privacyBanner,editions:e,customButtons:i,promos:n,screenName:"/Storefront",showHidden:!_.isUndefined(a)&&!_.isUndefined(a.idEdition)}),this.refreshEditionsAndPromos(),this.getRegion("main").show(this.rootView),this._appCh.trigger("app:ready");var t=document.getElementsByClassName("KGDocPicker_promosCarouselList")[0];if(t.children.length>0){window.originalNode=t.innerHTML,window.KGPugpigCarousel=new swoosh(t,this);var r=this._appCh.request("is:device","os","ios|android");window.KGPugpigCarousel.initializeSlider(r,t,!1);var g=this;r?(document.getElementsByClassName("KGDocPicker_promoArrows_right")[0].style.display="none",document.getElementsByClassName("KGDocPicker_promoArrows_left")[0].style.display="none"):t.children.length>2?(document.getElementsByClassName("KGDocPicker_promoArrows_left")[0].addEventListener("mouseup",function(e){window.clicked||window.KGPugpigCarousel.clickRight()}),document.getElementsByClassName("KGDocPicker_promoArrows_right")[0].addEventListener("mouseup",function(e){window.clicked||window.KGPugpigCarousel.clickLeft()})):(document.getElementsByClassName("KGDocPicker_promoArrows_right")[0].style.display="none",document.getElementsByClassName("KGDocPicker_promoArrows_left")[0].style.display="none",this.options.static.autoSlider=!1),this.options.static.autoSlider&&t.children.length>2&&this.setAutomaticTimer(5e3),document.addEventListener("visibilitychange",function(e){"hidden"===document.visibilityState?(clearInterval(window.theInterval),window.theInterval=void 0):g.options.static.autoSlider&&g.setAutomaticTimer(5e3)})}else document.querySelector(".KGDocPicker_editionsContainer").removeChild(document.getElementsByClassName("KGDocPicker_CarouselWrapper")[0])},setAutomaticTimer:function(e){_.isUndefined(window.theInterval)&&(window.theInterval=setInterval(function(){window.KGPugpigCarousel.loop()},e))},addCustomCSS:function(){var e=document.createElement("style");e.classList.add("customCSS"),e.rel="stylesheet",e.type="text/css",e.innerHTML=this.options.customCSS,document.head.appendChild(e)}})}(),this.KGDocPicker=this.KGDocPicker||{},this.KGDocPicker.Templates=this.KGDocPicker.Templates||{},this.KGDocPicker.Templates.AppRoot=function(e)cPicker_privacyContainer"></div><div class="KGDocPicker_toolbarContainer"></div><div id="KGDocPicker_editionsContainer" class="KGDocPicker_editionsContainer"><div class="KGDocPicker_CarouselWrapper"><div class="KGDocPicker_promosCarouselContainer"></div><div class="KGDocPicker_promoArrows_left"><button class="icon icon-forward"></button></div><div class="KGDocPicker_promoArrows_right"><button class="icon icon-forward"></button></div></div><div class="KGDocPicker_promosContainer"></div><section class="KGDocPicker_editions"></section></div>'},this.KGDocPicker.Templates.Edition=function(e){var n,o="";_.escape,Array.prototype.join;return o+='<div class="KGr_'+(null==(n=e.isLocked)?"":n)+"_"+(null==(n=e.editionId)?"":n)+'" class="KGFigure" data-onscreen-src="'+(null==(n=e.cover)?"":n)+'"><img class="KGDocPicker_editionCover"> ',"undefined"!=typeof e.errorMessage&&""!==e.errorMessage&&(o+=' <div class="KGDocPicker_edition-error">'+(null==(n=e.errorMessage)?"":n)+"</div> "),o+=' </figure><div class="KGDocPicker_editionData"><button id="KGDocPicker_editionButton_'+(null==(n=e.isLocked)?"":n)+"_"+(null==(n=e.editionId)?"":n)+'" class="KGDocPicker_editionButton button button-primary">'+(null==(n=(o+=' <a href="'+(null==(n=e.downloadLink)?"":n)+'" id="KGDocPicker_downloadLink_'+(null==(n=e.isLocked)?"":n)+"_"+(null==(n=e.editionId)?"":n)+'" class="KGDocPicker_downloadLink button button-primary" target="_blank" download="'+(null==(n=e.editionId)?"":n)+'.pdf">'+(null==(n=e.downloadLinkText)?"":n)+" </a> "),o+=' <h1 class="KGDocPicker_editionTitle">'+(null==(n=e.title)?"":n)+"</h1> ",e.isFeatured&&(o+=' <p class="KGDocPicker_editionDate">'+(null==(n=e.editionDate)?"":n)+'</p><p class="KGDocPicker_editionSummary">'+(null==(n=e.summary)?"":n)+"</p> "),o+=" </div></div>"},this.KGDocPicker.Templates.EditionsEmpty=function(e){var n="";_.escape;return n+='<h1 class="pp-app-error">No editions found.</h1>'},this.KGDocPicker.Templates.Privacy=function(e){var n,o="";_.escape;return o+=null==(n=e.html)?"":n},this.KGDocPicker.Templates.Promo=function(e){var n,o="";_.escape,Array.prototype.join;return e.images.url.length>0&&(o+=' <img src="'+(null==(n=e.images.url[0])?"":n)+'" alt=""> '),o},this.KGDocPicker.Templates.PromoCarousel=function(e){var n,o="";_.escape,Array.prototype.join;if(!_.isEmpty(e)){o+=" ";for(var a=0;a<e.images.url.length;a++)o+=' <img id="'+(null==(n=e.id)?"":n)+'" data-title="'+(null==(n=e.title)?"":n)+'" data-link="'+(null==(n=e.link)?"":n)+'" data-placement="'+(null==(n=e.placement)?"":n)+'" src="'+(null==(n=e.images.url[0])?"":n)+'" alt=""> ';o+=" "}return o},this.KGDocPicker.Templates.Toolbar=function(e){var n,o="";_.escape,Array.prototype.join;return o+='<div class="KGDocPicker_toolbar_centerSide"><div class="KGDocPicker_toolbar_brandLogoContainer"><figure class="KGDocPicker_toolbar_brandLogo"><a href="/" aria-label="Logo"><img src="'+(null==(n=e.brandLogo)?"":n)+'" alt="Logo" tabindex="-1" aria-hidden="true"></a></figure></div></div><div class="KGDocPicker_toolbar_leftSide"> ',e.hasFilters&&(o+=' <button aria-label="Filters" class="pickerToolbar_button KGToolbar_button js-filters js-button icon icon-gallery"></button> '),o+=" ",e.customButtons.left.forEach(function(e){o+=' <a id="'+(null==(n=e.id)?"":n)+'" href="'+(null==(n=e.url)?"":n)+'" target="'+(null==(n=e.target)?"":n)+'"> ',o+=e.icon&&""!==e.icon?' <svg><use xlink:href="#icon-'+(null==(n=e.icon)?"":n)+'"></use></svg> ':' <img src="'+(null==(n=e.file)?"":n)+'" style="width:'+(null==(n=e.width)?"":n)+"px;height:"+(null==(n=e.height)?"":n)+'px"> ',o+=" </a> "}),o+=' </div><div class="KGDocPicker_toolbar_rightSide"> ',e.customButtons.right.forEach(function(e){o+=' <a class="KGToolbar_customButton" id="'+(null==(n=e.id)?"":n)+'" href="'+(null==(n=e.url)?"":n)+'" target="'+(null==(n=e.target)?"":n)+'"> ',o+=e.icon&&""!==e.icon?' <svg><use xlink:href="#icon-'+(null==(n=e.icon)?"":n)+'"></use></svg> ':' <img src="'+(null==(n=e.file)?"":n)+'" style="width:'+(null==(n=e.width)?"":n)+"px;height:"+(null==(n=e.height)?"":n)+'px"> ',o+=" </a> "}),o+=' <ul class="KGToolbar_overflowButtons"> ',e.hasAuth&&(o+=' <li class="KGToolbar_button js-account js-button" data-caption="Account"><button id="KGDocPicker_toolbar_button_account" aria-label="Account" class="pickerToolbar_button icon icon-account"></button></li> '),o+=' <li class="KGToolbar_button js-settings js-button" data-caption="Settings"><button aria-label="Settings" class="pickerToolbar_button icon icon-settings"></button></li></ul><button class="pickerToolbar_button KGToolbar_button js-overflow icon icon-overflow js-button" aria-label="More"></button></div>'},KGDocPicker.Modules=KGDocPicker.Modules||{},function(){KGDocPicker.Modules.Theme=KGPugpigCore.Modules.Theme.extend({appChannelName:"KGDocPicker",cssNamespace:"#KGDocPicker.cleanslate",ssName:"KGDocPicker-css-theme",themePrefix:"Picker",textElements:{".KGDocPicker":"Picker",".KGDocPicker .KGDocPicker_edition-isFeatured":"Picker",".KGDocPicker_editionTitle":"Picker_EditionLabel",".KGDocPicker_edition-isFeatured .KGDocPicker_editionTitle":"Picker_FeatureEditionTitle",".KGDocPicker_edition-isFeatured .KGDocPicker_editionDate":"Picker_FeatureEditionDate",".KGDocPicker_edition-isFeatured .KGDocPicker_editionSummary":"Picker_FeatureEditionSummary",".KGDocPicker .button.button-primary":"PrimaryButton",".KGDocPicker .button.button-secondary":"SecondaryButton",".KGDocPicker .KGDocPicker_edition-isDraft .flag:after":"Picker_DraftLabel",
".KGDocPicker_toolbar_button":"Picker",".KGDocPicker_toolbar .KGToolbar_overflowButtons-isOverflown .KGToolbar_button":"Picker_Toolbar_Overflow"},layoutElements:{".KGDocPicker .button.button-primary":{borderColor:"PrimaryButton_OutlineColor"},".KGDocPicker .button.button-primary:hover":{borderColor:"PrimaryButton_OutlineHoverColor"},".KGDocPicker .button.button-secondary":{borderColor:"SecondaryButton_OutlineColor"},".KGDocPicker":{backgroundCge"},".KGDocPicker:parent":{backgroundColor:"Picker_BackgroundColor",backgroundImage:"Picker_BackgroundImage"},".KGDocPicker_toolbar":{backgroundColor:"Picker_Toolbar_BackgroundColor",borderBottomColor:"Picker_Toolbar_BorderBottomColor",borderBottomStyle:"Picker_Toolbar_BorderBottomStyle",borderBottomWidth:"Picker_Toolbar_BorderBottomWidth"},".KGDocPicker_toolbar .KGToolbar_overflowButtons-isOverflown .KGToolbar_button":{borderBottomColor:"erBottomStyle:"Picker_Toolbar_Overflow_BorderBottomStyle",borderBottomWidth:"Picker_Toolbar_Overflow_BorderBottomWidth"}}})}(),KGDocPicker.Models=KGDocPicker.Models||{},function(){KGDocPicker.Models.Edition=KGFeedParser.Models.Edition.extend({name:"Edition",appChannelName:"KGDocPicker",initialize:function(){this.setEditionDate().setAccess()},setEditionDate:function(){var e=new Date(this.get("issued")),n=navigator.language||"en-US",o=[e.getDay(),e.toLocaleDateString(n,{month:"long"}),e.getFullYear()];return this.set("editionDate",o.join(" ")),this},setAccess:function(){var e=this._appCh.request("user:has:access:edition",this.get("id"));return this.set("hasAccess",e),this},shouldShowEdition:function(e){var n="undefined"!=typeof this._appCh.request("user:is:loggedin")&&this._appCh.request("user:is:loggedin");if(n&&this.get("isMarketing"))return!1;if(this.get("isPrivate")&&!this.get("hasAccess"))return!1;if(e)if("all"===e.term&&"all"===e.groupTag);else{var o=!_.filter(this.get("filterGroups"),function(n){return n.term===e.term&&n.groupTag===e.groupTag}).length;if(o)return console.info("%cDISCARD EDITION (Wrong filter group): "+this.get("title"),"color:gray"),!1}return!0}})}(),KGDocPicker.Collections=KGDocPicker.Collections||{},function(){KGDocPicker.Collections.Editions=KGPugpigCore.Extensiols.Edition,initialize:function(){_.bindAll(this,"setFeaturedEdition","setEditionsAccess"),this.on("reset",this.onResetCollection),this._appCh.on("change:availableIssues",this.setEditionsAccess)},setEditionsAccess:function(){this.forEach(function(e){e.setAccess()})},onResetCollection:function(){this.removePinned(),this.setFeaturedEdition()},removePinned:function(){var e=this.where({isPinned:!0});this.remove(e,{silent:!0})},setFeaturedEdition:function(){var e=0,n=this._appCh.request("config:key","features");this.forEach(function(o){0===e&&n.featuredEdition===!0?(o.set("isFeatured",!0),o.set("cover",o.get("editionCover"))):(o.set("isFeat=KGDocPicker.Views.Items||{},function(){KGDocPicker.Views.Items.Edition=KGPugpigCore.Extensions.ItemView.extend({name:"Edition",appChannelName:"KGDocPicker",tagName:"li",template:KGDocPicker.Templates.Edition,ui:{figure:".KGFigure",button:".KGDocPicker_editionButton"},events:{"click @ui.figure":"onClick","click @ui.button":"onClick"},behaviors:{FiguresLoader:{behaviorClass:KGPugpigCore.Behaviors.FiguresLoader}},initialize:function(){_.bindAll(this,"onImageDone","onShowError"),this.on("image:done",this.onImageDone),this._appCh.on("edition:error",this.onShowError)},onRender:function(){this.setEditionClassName(),this.setAccessClassName()},setEditionClassName:function(){var e="KGDocPicker_edition";this.el.classList.remove(e+"-isFeatured",e+"-isDraft"),this.el.classList.add(e),this.model.get("isFeatured")&&this.el.classList.add(e+"-isFeatured"),this.model.get("isDraft")&&this.el.classList.add(e+"-isDraft")},serializeData:function(){var e=this.model.toJSON(),n=this.options.customText,o=n.viewButton,a=this.model.get("id").replace(/\./g,"_");return!this.model.get("isPaid")&&!this.model.get("isSample")||this.model.get("hasAccess")||(o=this.model.get("isSample")?n.sampleButton:n.loginButton),e.isLocked=this.model.get("hasAccess")?"Open":"Locked",e.editionId=a,e.loadButtonText=o,e.downloadLink="Open"===e.isLocked&&this.model.getDownloadLink(),e.downloadLinkText=n.downloadLink,e},onClick:function(){if(this.isLoading===!0||"undefined"!=typeof this.model.get("errorMessage"))return!1;switch(this.model.get("resourceType")){case"application/atom+xml":this._addSpinner(),this.el.classList.add("KGDocPicker_edition-isLoading"),this.isLoading=!0,this._appCh.trigger("app:set:state",{idEdition:this.model.get("id")});break;case"application/octet-stream":if(this.model.get("hasAccess")===!1)this._appCh.trigger("app:set:state",{idEdition:this.model.get("id")});else{var e=this.model.getLoadLink();"undefined"!=typeof e&&(window.location.href=e.href)}}this.sendAnalyticsEvent("EditionOpened",this.model.get("id"))},setAccessClassName:function(){var e="KGDocPicker_edition";this.el.classList.remove(e+"-isAvailable",e+"-isPaid",e+"-isSample");var n=this._appCh.request("config:key","storefrontGrid");n!==!1&&(this.el.classList.add(e+"-col-sm-"+n.mobileColumns),this.el.classList.add(e+"-col-md-"+n.tabletColumns),this.el.classList.add(e+"-col-lg-"+n.desktopColumns)),this.model.get("hasAccess")?this.el.classList.add(e+"-isAvailable"):this.model.get("isSample")?this.el.classList.add(e+"-isSample"):this.el.classList.add(e+"-isPaid")},onImageDone:function(){this.isLoading===!0&&this._addSpinner()},resetLoadingState:function(){this.isLoading===!0&&(this.el.classList.remove("KGDocPicker_edition-isLoading"),this.ui.spinner.remove(),this.isLoading=!1)},onShowError:function(e){this.model.get("id")===e.idEdition&&(this.resetLoadingState(),this.model.set({errorMessage:e.message}),this.render())},_addSpinner:function(){this.ui.figure.append('<div class="KGSpinner"><figure>'),this.ui.spinner=this.ui.figure.find(".KGSpinner")},sendAnalyticsEvent:function(e,n){this._appCh.trigger("analytics:hit",{type:"event",eventCategory:"/Storefront",eventAction:e,eventLabel:n})}})}(),KGDocPicker.Views.Collections=KGDocPicker.Views.Collections||{},function(){KGDocPicker.Views.Collections.EditionsEmpty=KGPugpigCore.Extensions.ItemView.extend({appChannelName:"KGDocPicker",template:KGDocPicker.Templates.EditionsEmpty,className:"KGDocPicker_editionsListEmpty"}),KGDocPicker.Views.Collections.Editions=KGPugpigCore.Extensions.CollectionView.extend({name:"Editions",appChannelName:"KGDocPicker",tagName:"ul",className:"KGDocPicker_editionsList",childView:KGDocPicker.Views.Items.Edition,childViewEventPrefix:"edition",childViewOptions:function(){return{customText:this._appCh.request("custom:text","docpicker")}},emptyView:KGDocPicker.Views.Collections.EditionsEmpty,initialize:function(){_.bindAll(this,"onPanelAccountClose","shouldShowEditions"),this._appCh.on("panel:account:close",this.onPanelAccountClose),this._appCh.reply("should:show:edition",this.shouldShowEditions)},checkOnScreenImages:function(){this.children.forEach(fu()})},refreshOnScreenAccess:function(){this.children.forEach(function(e){"fun()})},onPanelAccountClose:function(){this.resetLoadingEditions()},resetLoadingEditions:function(){var e=this.children.filter(function(e){return e.isLoading});e.forEach(function(e){e.resetLoadingState()})},shouldShowEditions:function(e){var n=[];return this.collection.forEach(function(o){o.shouldShowEdition(e)&&n.push(o)}),n.length>0},filterEditions:function(e){var n=[],o=e.maxEditions;this.collection.setEditionsAccess(),this.collection.forEach(function(o){o.shouldShowEdition(e)&&n.push(o)}),n.length>o?this.collection.reset(n.slice(0,o)):this.collection.reset(n),this.refreshOnScreenAccess(),this.checkOnScreenImages()}})}(),KGDocPicker.Views=KGDocPicker.Views||{},function(){KGDocPicker.Views.Layouts.Toolbar=KGPugpigCore.Extensions.LayoutView.extend({name:"DocPickerToolbar",appChannelName:"KGDocPicker",className:"KGDocPicker_toolbar KGToolbar",template:KGDocPicker.Templates.Toolbar,ui:{btnFilters:".js-filters",btnAccount:".js-account",btnSettings:".js-settings",btnOverflow:".js-overflow",buttons:".js-button",btns:".pickerToolbar_button"},events:{"click @ui.btnFilters":"onClickFilters","click @ui.btnAccount":"onClickAccount","click @ui.btnSettings":"onClickSettings"},themePickerElements:["btns"],behaviors:{OverflowButtons:{behaviorClass:KGPugpigCore.Behaviors.OverflowButtons}},initialize:function(){this._appCh.on("set:authentication",this.render)},serializeData:function(){return{hasFilters:this.options.hasFilters,customButtons:this.options.customButtons,hasAuth:this._appCh.request("app:has:auth"),brandLogo:this._appCh.request("theme:key","BrandLogo")}},onClickFilters:function(){this._appCh.trigger("toggle:editionfilters")},onClickAccount:function(){this._appCh.trigger("toggle:account")},onClickSettings:function(){this._appCh.trigger("toggle:settings")},onToggleOverflowButtons:function(e){this.$el.parent().toggleClass("KGDocPicker_toolbarContainer-isOverflown",e)}})}(),KGDocPicker.Views=KGDocPicker.Views||{},function(){KGDocPicker.Views.Layouts.Privacy=KGPugpigCore.Extensions.LayoutView.extend({name:"Privacy",appChannelName:"KGDocPicker",className:"KGDocPicker_privacy KGPrivacy",template:KGDocPicker.Templates.Privacy,initialize:function(){this.addCSS()},addCSS:function(){var e=document.querySelector(".privacyAdded");if(!e){var n=document.createElement("style");n.innerHTML=this.options.privacyBanner.css,n.type="type/css",document.querySelector(".KGPugpigReader-css").innerHTML+=this.options.privacyBanner.css,document.querySelector(".KGPugpigReader-css").className+=" privacyAdded"}},serializeData:function(){return{html:this.options.privacyBanner.html,unction(){}})}(),KGDocPicker.Models=KGDocPicker.Models||{},function(){KGDocPicker.Models.Promo=KGPugpigCore.Extensions.Model.extend({name:"Promo",appChannelName:"KGDocPicker",initialize:function(){},shouldShowPromo:function(e,n){var o="undefined"!=typeof this._appCh.request("user:is:loggedin")&&this._appCh.request("user:is:loggedin");if("banner"!==this.get("placement")&&"/Storefront"==n)return console.info("%cDISCARD PROMO: (Not Banner on "+n+"): "+this.get("id"),"color:gray"),!1;if("tocHero"!==this.get("placement")&&"/Edition/PageView"==n)return console.info("%cDISCARD PROMO: (Not tocHero on "+n+"): "+this.get("id"),"color:gray"),!1;var a=_.filter(this.get("platforms"),function(e){return"web-desktop"===e}).length;if(!a)return console.info("%cDISCARD PROMO: (Wrong Platform): "+this.get("id"),"color:gray"),!1;if(o&&("marketing"===this.get("promo_type")||"subscription"===this.get("promo_type")))return console.info("%cDISCARD PROMO (Logged In Marketing): "+this.get("id"),"color:gray"),!1;if(!o&&"private"===this.get("promo_type"))return console.info("%cDISCARD PROMO (Logged Out Private): "+this.get("id"),"color:gray"),!1;var i=this.get("filterkeys");if(i&&i.length)if(!e||"all"===e.term&&"all"===e.groupTag){var t=_.contains(i,"PPAllDocumentFilter");if(!t)return console.info("%cDISCARD PROMO: (Does not have All): "+this.get("id"),"color:gray"),!1}else{var r=!_.filter(i,function(n){return n===e.groupTag+"/"+e.term}).length;if(r)return console.info("%cDISCARD PROMO: (Wrong Filter): "+this.get("id"),"color:gray"),!1}return console.info("%cKEEP PROMO: "+this.get("id"),"color:green"),!0}})}(),KGDocPicker.Collections=KGDocPicker.Collections||{},function(){KGDocPicker.Collections.Promos=KGPugpigCore.Extensions.Collection.extend({name:"Promos",appChannelName:"KGDocPicker",model:KGDocPicker.Models.Promo,initialize:function(){},comparator:function(e,n){return e.get("rank")>n.get("rank")}})}(),KGDocPicker.Views.Items=KGDocPicker.Views.Items||{},function(){KGDocPicker.Views.Items.Promo=KGPugpigCore.Extensions.ItemView.extend({name:"Promo",appChannelName:"KGDocPicker",tagName:"li",template:KGDocPicker.Templates.Promo,className:"KGDocPicker_promo",ui:{bodyDiv:".KGDocPicker_promo"},events:{click:"onClick"},initialize:function(){},onRender:function(){},onChangeAccess:function(){this.render()},serializeData:function(){var e=this.model.toJSON();return e},onClick:function(){if(this.isLoading===!0||"undefined"!=typeof this.model.get("errorMessage"))return!1;this.sendAnalyticsEvent("PromoOpened",this.options.screenName,this.model.get("id")),console.log(this.model);var e=this.model.get("link").split("//")[0],n=new URL(this.model.get("link"));switch(e){case"http:":case"https:":window.location.href=this.model.get("link");break;case"pugpig:":if(console.log("link is "+this.model.get("link")+" on "+this.model.get("title")),n.href.includes("//content")){var o=n.searchParams.get("editionID");o&&window.open(window.location.origin+"?edition="+o,"_self")}break;default:console.log("Not supported "+this.model.get("link"))}},sendAnalyticsEvent:function(e,n,o){this._appCh.trigger("analytics:hit",{type:"event",eventCategory:n,eventAction:e,eventLabel:o})}})}(),KGDocPicker.Views.Collections=KGDocPicker.Views.Collections||{},function(){KGDocPicker.Views.Collections.Promos=KGPugpigCore.Extensions.CollectionView.extend({name:"Promos",appChannelName:"KGDocPicker",tagName:"ul",className:"KGDocPicker_promosList",childView:KGDocPicker.Views.Items.Promo,childViewEventPrefix:"promo",childViewOptions:function(){return{screenName:this.options.screenName}},initialize:function(){},filterPromos:function(e,n){var o=[];this.collection.forEach(function(a){a.shouldShowPromo(e,n)&&o.push(a)}),this.collection.reset(o),this.render()}})}(),KGDocPicker.Views.Items=KGDocPicker.Views.Items||{},function(){KGDocPicker.Views.Items.PromoCarousel=KGPugpigCore.Extensions.ItemView.extend({name:"PromoCarousel",appChannelName:"KGDocPicker",tagName:"div",template:KGDocPicker.Templates.PromoCarousel,className:"KGDocPicker_promoCarousel",ui:{bodyDiv:".KGDocPicker_promoCarousel"},events:{click:"onClick"},initialize:function(){this._appCh.reply("carousel:click:clone",this.carouselClick)},onRender:function(){},onChangeAccess:function(){this.render()},serializeData:function(){var e=this.model.toJSON();return e},carouselClick:function(e){console.log("Carousel event tracker",e,this);var n=e.link.split("//")[0],o=new URL(this.link);switch(n){case"http:":case"https:":window.location.href=e.link;break;case"pugpig:":if(console.log("link is "+e.link+" on "+e.title),o.href.includes("//content")){var a=o.searchParams.get("editionID");a&&window.open(window.location.origin+"?edition="+a,"_self")}break;default:console.log("Not supported "+e.link)}},onClick:function(){if(this.isLoading===!0||"undefined"!=typeof this.model.get("errorMessage"))return!1;this.sendAnalyticsEvent("PromoOpened",this.options.screenName,this.model.get("id")),console.log(this.model);var e=this.model.get("link").split("//")[0],n=new URL(this.model.get("liation.href=this.model.get("link");break;case"pugpig:":if(console.log("link is "+this.model.get("link")+" on "+this.model.get("title")),n.href.includes("//content")){var o=n.searchParams.get("editionID");o&&window.open(window.location.origin+"?edition="+o,"_self")}break;default:console.log("Not supported "+this.model.get("link"))}},sendAnalyticsEvent:function(e,n,o){this._appCh.trigger("analytics:hit",{type:"event",eventCategory:n,eventAction:e,eventLabel:o})}})}(),KGDocPicker.Views.Collections=KGDocPicker.Views.Collections||{},function(){KGDocPicker.Views.Collections.PromosCarousel=KGPugpigCore.Extensions.CollectionView.extend({name:"PromosCarousel",appChannelName:"KGDocPicker",tagName:"section",className:"KGDocPicker_promosCarouselList",childView:KGDocPicker.Views.Items.PromoCarousel,childViewEventPrefix:"promoCarousel",childViewOptions:function(){return{screenName:this.options.screenName}},initialize:function(){},onRender:function(){var e=[];if(1===this.collection.models.length&&_.isEmpty(this.collection.models[0].attributes))for(;this.$el[0].firstChild;)this.$el[0].removeChild(this.$el[0].firstChild);else if(this.collection.models.length>0){for(var n=[],o=0;o<this.collection.models.length;++o)n.push(this.collection.models[o].id);for(var o=0;o<this.$el[0].children.length;++o)formatObject={id:this.$el[0].children[o].querySelector("img").getAttribute("id"),node:this.$el[0].children[o]},e.push(formatObject);var a=[];if(a=_.uniq(e,"id"),n.length!==a.length)for(var i=0,o=0;o<a.length;++o)n.indexOf(a[o].id)<0&&a.splice(o,1);for(;this.$el[0].firstChild;)this.$el[0].removeChild(this.$el[0].firstChild);for(var i=0;i<a.length;i++)this.$el[0].appendChild(a[i].node)}},filterPromos:function(e,n){var o=document.getElementsByClassName("KGDocPicker_promosCarouselList")[0],a=[];if(this.collection.forEach(function(o){o.shouldShowPromo(e,n)&&a.push(o)}),a.length<1){var i=new KGDocPicker.Models.Promo;a.push(i)}this.collection.reset(a),this.render(),!_.isUndefined(o)&&o.firstChild&&(o.children.length<2&&(clearInterval(window.theInterval),window.theInterval=null),window.KGPugpigCarousel.updateSlider(o.firstChild.offsetWidth))}})}(),KGDocPicker.Views=KGDocPicker.Views||{},function(){KGDocPicker.Views.AppRoot=KGPugpigCore.Extensions.LayoutView.extend({name:"AppRoot",appChannelName:"KGDocPicker",tagName:"main",className:function(){var e=["KGDocPicker"];return this.options.showHidden&&e.push(["KGDocPicker-isHidden"]),e.join(" ")},template:KGDocPicker.Templates.AppRoot,ui:{editionsList:".KGDocPicker_editions",editionsListContainer:"#KGDocPicker_editionsContainer",editionTitle:".KGDocPicker_editionTitle",featuredEditionTitle:".KGDocPicker_edition-isFeatured .KGDocPicker_editionTitle",featuredEditionDate:".KGDocPicker_edition-isFeatured .KGDocPicker_editionDate",featureEditionSummary:".KGDocPicker_edition-isFeatured .KGDocPicker_editionSummary",primaryButton:".KGDocPicker .button.button-primary",secondaryButton:".KGDocPicker .button.button-secondary",innerToolbar:".KGDocPicker_toolbar",toolbarOverflow:".KGToolbar_overflowButtons .KGToolbar_button"},regions:{toolbar:".KGDocPicker_toolbarContainer",editions:".KGDocPicker_editions",promos:".KGDocPicker_promosContainer",promosCarousel:".KGDocPicker_promosCarouselContainer",privacy:".KGDocPicker_privacyContainer"},themePickerElements:["editionTitle","featuredEditionTitle","featuredEditionDate","featureEditionSummary","primaryButton","secondaryButton","innerToolbar","toolbarOverflow"],initialize:function(){_.bindAll(this,"onScroll"),this.editionsColl=new KGDocPicker.Collections.Editions,this.editionsView=new KGDocPicker.Views.Collections.Editions({collection:this.editionsColl}),this.promosColl=new KGDocPicker.Collections.Promos,this.promosViewCarousel=new KGDocPicker.Views.Collections.PromosCarousel({collection:this.promosColl,screenName:this.options.screenName}),this.toolbarView=new KGDocPicker.Views.Layouts.Toolbar({hasFilters:this.options.editions.hasFilters(),customButtons:this.getCustomButtons()}),window.docCookies.hasItem("privacy")&&"accepted"!==window.docCookies.getItem("privacy")&&(this.privacyView=new KGDocPicker.Views.Layouts.Privacy({privacyBanner:this.options.privacyBanner})),this.ticking=!1},getCustomButtons:function(){var e=this.options.customButtons,n=_.findWhere(e,{align:"right"}),o=_.findWhere(e,{align:"left"}),a=_.findWhere(e,{align:"center"});return{right:_.isArray(n)?n:n?[n]:[],center:_.isArray(a)?a:a?[a]:[],left:_.isArray(o)?o:o?[o]:[]}},onRender:function(){this.getRegion("toolbar").show(this.toolbarView),this.getRegion("editions").show(this.editionsView),window.docCookies.hasItem("privacy")&&"accepted"!==window.docCookies.getItem("privacy")&&this.getRegion("privacy").show(this.privacyView),this.getRegion("promosCarousel").show(this.promosViewCarousel),this.ui.editionsListContainer.on("scroll",this.onScroll),this.sendAnalyticsScreenView()},onScroll:function(e){this.scrollTop!==e.currentTarget.scrollTop&&(this.scrollTop=e.currentTarget.scrollTop,this.ticking||window.requestNextAnimationFrame(_.bind(function(){this.refreshView(),this.ticking=!1},this)),this.ticking=!0)},refreshView:function(){this.editionsView.resetLoadingEditions(),this.editionsView.checkOnScreenImages()},filterEditionsAndPromos:function(e){this.editionsColl.set(this.options.editions.toJSON()),this.editionsView.filterEditions(e),this.promosColl.set(this.options.promos),this.promosViewCarousel.filterPromos(e,this.options.screenName)},slideIn:function(){this.$el.velocity({left:0},{duration:300,easing:"ease",begin:_.bind(function(){this._appCh.request("is:device",{os:"ios",browser:"chrome"})&&(this.ui.editionsListContainer[0].scrollTop=0)},this),complete:_.bind(function(){this.editionsView.checkOnScreenImages()},this)})},slideOut:function(){this.$el.velocity({left:"-100%"},{duration:300,easing:"ease",begin:_.bind(function(){this.editionsView.resetLoadingEditions()},this)})},sendAnalyticsScreenView:function(){this._appCh.trigger("analytics:hit",{type:"screenview",screenName:"/Storefront"})}})}(),window.KGDocViewer={App:{},Models:{},Collections:{},Views:{Collections:{},Items:{},Layouts:{}},Templates:{},Modules:{},fw:{}},"undefined"!=typeof KGPugpigCore&&(KGDocViewer.fw=KGPugpigCore.fw),KGDocViewer.App=KGDocViewer.App||{},function(){KGDocViewer.App=KGPugpigCore.Extensions.Application.extend({name:"KGDocViewer",initialize:function(){_.bindAll(this,"launchView","setCurrentState","resetCurrentState"),this.module("logger",KGPugpigCore.Modules.Logger),this.module("theme",KGDocViewer.Modules.Theme),this.module("printDoc",KGDocViewer.Modules.PrintDocument),this._appCh.on("docviewer:set:state",this.setCurrentState),this._appCh.on("app:change:state",this.resetCurrentState),this._appCh.reply("app:refresh:frame")},onBeforeStart:function(e){this.options=e;var n=$("#KGPugpigReader");n.append('<div id="KGDocViewer" class="cleanslate">'),this.$el=n.find("#KGDocViewer")},onStart:function(){this.addRegions({main:"#KGDocViewer"})},setCurrentState:function(e){if(e!==!1){if(_.isUndefined(e.idEdition))return this.rootView&&this.rootView.slideOut(),this.$el.removeClass("KGDocViewer-isVisible"),void this.dispatchCustomEvent("KGPugpigReaderDocPickerHidden");if(this.$el.addClass("KGDocViewer-isVisible"),this.dispatchCustomEvent("KGPugpigReaderDocPickerVisible"),this.options.state=this.options.state||{},this.rootView&&this.options.state.idEdition===e.idEdition)return void this.rootView.setCurrentState(e);_.isUndefined(e.idEdition)||(this.options.state=e),this.fetchEdition(e.idEdition)}},resetCurrentState:function(e){this.rootView&&_.isUndefined(e.idEdition)&&this.rootView.currentState.setCurrentState()},fetchEdition:function(e){this._appCh.request("feed:get:editions",{id:e}).done(this.launchView),this.refreshFrame()},refreshFrame:function(){var e=document.getElementsByClassName("KGDocViewer_pagesContainer")[0].style.left;document.getElementsByClassName("KGDocViewer_pagesContainer")[0].style.left="-1px",setTimeout(function(){document.getElementsByClassName("KGDocViewer_pagesContainer")[0].style.left=e}.bind(this),1e3)},dispatchCustomEvent:function(e){var n;"function"==typeof Event?n=new Event(e):(n=document.createEvent("Event"),n.initEvent(e,!0,!0)),document.dispatchEvent(n)},launchView:function(e){this.rootView?(this.rootView.setEdition(e),this.rootView.render()):(this.rootView=new KGDocViewer.Views.AppRoot({edition:e,privacyBanner:this.getOption("privacyBanner"),customButtons:this.getOption("customButtons"),footerContent:this.getOption("footerContent")}),this.getRegion("main").show(this.rootView)),this.rootView.setCurrentState(this.getOption("state")),this._appCh.trigger("app:ready")}})}(),this.KGDocViewer=this.KGDocViewer||{},this.KGDocViewer.Templates=this.KGDocViewer.Templates||{},this.KGDocViewer.Templates.AppRoot=function(e){var n="";_.escape;return n+='<div class="KGDocViewer_privacyContainer"></div><div class="KGDocViewer_toolbarContainer"></div><div class="KGDocViewer_arrowsContainer"></div><section class="KGDocViewer_pages"></section>'},this.KGDocViewer.Templates.Arrows=function(e){var n,o="";_.escape,Array.prototype.join;return e.prev&&(o+=' <a class="KGDocViewer_pages_arrows KGDocViewer_pages_arrowsPrev" aria-label="previous page" href="'+(null==(n=e.urlPrevArticle)?"":n)+'"><button aria-hidden="true" tabindex="-1" class="icon icon-back"></button> </a> '),o+=" ",e.next&&(o+=' <a class="KGDocViewer_pages_arrows KGDocViewer_pages_arrowsNext" aria-label="next page" href="'+(null==(n=e.urlNextArticle)?"":n)+'"><button aria-hidden="true" tabindex="-1" class="icon icon-forward"></button> </a> '),o},this.KGDocViewer.Templates.Page=function(e){var n,o="";_.escape,Array.prototype.join;return e.isPageRendered===!0&&(o+=' <div class="KGSpinner"><figure></figure></div> ',e.thumbnailIcon&&""!==e.thumbnailIcon&&(o+=' <a class="KGDocViewer_thumbnail" href="'+(null==(n=e.pdfContent)?"":n)+'"><img class="KGDocViewer_thumbnail_image" src="'+(null==(n=e.thumbnailIcon)?"":n)+'"> </a> '),o+=' <iframe class="KGDocViewer_iframe" frameborder="0" id="'+(null==(n=e.id)?"":n)+'" name="'+(null==(n=e.id)?"":n)+'" src="'+(null==(n=e.iframeSrc)?"":n)+'"></iframe> '),o},this.KGDocViewer.Templates.Pages=function(e){var n="";_.escape;return n+='<ul class="KGDocViewer_pagesContainer"></ul>'},this.KGDocViewer.Templates.Privacy=function(e){var n,o="";_.escape;return o+=null==(n=e.html)?"":n},this.KGDocViewer.Templates.Toolbar=function(e){var n,o="";_.escape,Array.prototype.join;return o+='<div class="KGDocViewer_toolbar_innerContainer" style="'+(null==(n=e.container.styleDefinition)?"":n)+'"><div class="KGDocViewer_toolbar_centerSide"> ',"image"===e.doc.statusType?o+=' <figure class="KGDocViewer_toolbar_statusImage"><a href="/"><img src="'+(null==(n=e.doc.statusImage)?"":n)+'"></a></figure> ':"text"===e.doc.statusType?o+=' <h1 class="KGDocViewer_toolbar_statusText">'+(null==(n=e.doc.statusText)?"":n)+"</h1> ":e.customButtons.center.length&&(o+=" ",e.customButtons.center.forEach(function(e){o+=' <a id="'+(null==(n=e.id)?"":n)+'" href="'+(null==(n=e.url)?"":n)+'" target="'+(null==(n=e.target)?"":n)+'"> ',o+=e.icon&&""!==e.icon?' <svg><use xlink:href="#icon-'+(null==(n=e.icon)?"":n)+'"></use></svg> ':' <img src="'+(null==(n=e.file)?"":n)+'" style="width:'+(null==(n=e.width)?"":n)+"px;height:"+(null==(n=e.height)?"":n)+'px"> ',o+=" </a> "}),o+=" "),o+=' </div><div class="KGDocViewer_toolbar_leftSide"> ',e.doc.hasStorefront&&(o+=' <button aria-label="Home" class="pickerDocViewerToolbar_button KGDocViewer_toolbar_button KGToolbar_button js-home js-button icon icon-home"></button> '),o+=" ",e.doc.hasTocIcon&&(o+=' <button aria-label="Table Of Contents" class="pickerDocViewerToolbar_button KGDocViewer_toolbar_button KGToolbar_button js-tableofcontents js-button icon icon-contents"></button> '),o+=" ",e.customButtons.left.forEach(function(e){o+=' <a id="'+(null==(n=e.id)?"":=e.icon&&""!=="></use></svg> ':' <img src="'+(null==(n=e.file)?"":n)+'" style="width:'+(null==(n=e.width)?"":n)+"px;height:"+(null==(n=e.height)?"":n)+'px"> ',o+=" </a> "}),o+=' </div><div class="KGDocViewer_toolbar_rightSide"> ',e.customButtons.right.for?"":n)+'" href="'+(null==(n=e.url)?"":n)+'" target="'+(null==(n=e.target)?"":n)+'"> ',o+=e.icon&&""!==e.icon?' <svg><use xlink:href="#icon-'+(null==(n=e.icon)?"":n)+'"></use></svg> ':' <img src="'+(null==(n=e.file)?"":n)+'" style="width:'+(null==(n=e.width)?"":n)+"px;height:"+(null==(n=e.height)?"":n)+'px"> ',o+=" </a> "}),o+=' <ul class="KGToolbar_overflowButtons"> ',e.app.hasPrinting&&(o+=' <li class="KGDocViewer_toolbar_button KGToolbar_button js-print js-button" data-caption="Print"><button aria-label="Print" class="pickerDocViewerToolbar_button icon icon-print"></button></li> '),o+=" ",e.app.hasAuth&&(o+=' <li class="KGDocViewer_toolbar_button KGToolbar_but"Account"><button id="KGDocViewer_toolbar_button_account" aria-label="Account" class="pickerDocViewerToolbar_button icon icon-account"></button></li> '),o+=' <li class="KGDocViewer_toolbar_button KGToolbar_button js-settings js-button" data-caption="Settings"><button aria-label="Settings" class="pickerDocViewerToolbar_button icon icon-settings"></button></li> ',e.doc.hasSearch&&(o+=' <li class="KGDocViewer_toolbar_button KGToolbar_button js-search js-button" data-caption="Search"><button aria-label="Search" class="pickerDocViewerToolbar_button icon icon-search"></button></li> '),o+=" ",e.doc.hasEditionSounds&&(o+=' <li class="KGDocViewer_toolbar_button KGToolbar_button js-sounds js-button" data-caption="Sounds"><!-- ',o+=e.app.isPlayingSounds?' --><button class="pickerDocViewerToolbar_button icon icon-sounds-playing"></button><!-- ':e.doc.hasSounds?' --><button class="pickerDocViewerToolbar_button icon icon-sounds-on"></button><!-- ':' --><button class="pickerDocViewerToolbar_button icon icon-sounds"></button><!-- ',o+=" --></li> "),o+=" ",e.doc.hasShare&&(o+=' <li class="KGDocViewer_toolbar_button KGToolbar_button js-share js-button" data-caption="Share"><button aria-label="Share" class="pickerDocViewerToolbar_button icon icon-share"></button></li> '),o+=" ",e.doc.hasThumbnails&&(o+=' <li class="KGDocViewer_toolbar_button KGToolbar_button js-thumbnailsnav js-button" data-caption="Thumbnails"><button aria-label="Thumbnail Navigation" class="pickerDocViewerToolbar_button icon icon-thumbs"></button></li> '),o+=' </ul><button class="pickerDocViewerToolbar_button KGToolbar_button js-overflow icon icon-overflow js-button" aria-label="More"></button></div></div>'},KGDocViewer.Modules=KGDocViewer.Modules||{},function(){KGDocViewer.Modules.Theme=KGPugpigCore.Modules.Theme.extend({appChannelName:"KGDocViewer",cssNamespace:"#KGDocViewer.cleanslate",ssName:"KGDocViewer-css-theme",themePrefix:"Document",textElements:{".KGDocViewer_toolbar_statusText":"Document_Toolbar_StatusTitle",".KGDocViewer_toolbar .KGToolbar_overflowButtons-isOverflown .KGToolbar_button":"Document_Toolbar_Overflow"},layoutElements:{".KGDocViewer":{backgroundColor:"Document_Viewer_BackgroundColor"},".KGDocViewer_toolbar":{backgroundColor:"Document_Toolbar_BackgroundColor",borderBottomColor:"Document_Toolbar_BorderBottomColor",borderBottomStyle:"Document_Toolbar_BorderBottomStyle",borderBottomWidth:"Document_Toolbar_BorderBottomWidth"},".KGDocViewer_toolbar_brandLogo":{backgroundImage:"BrandLogo"},".KGDocViewer_toolbar .KGToolbar_overflowButtons-isOverflown .KGToolbar_button":{borderBottomColor:"Document_Toolbar_Overflow_BorderBottomColor",borderBottomStyle:"Document_Toolbar_Overflow_BorderBottomStyle",borderBottomWidth:"Document_Toolbar_Overflow_BorderBottomWidth"}}})}(),KGDocViewer.Models=KGDocViewer.Models||{},function(){KGDocViewer.Models.CurrentState=KGPugpigCore.Extensions.Model.extend({name:"CurrentState",appChannelName:"KGDocViewer",initialize:function(){_.bindAll(this,"setCurrentState","onAppSetFontSize","onGetFontSize","onAppSetNightMode","onGetNightMode","refreshArticlesState","refreshArticlesStateClick"),this._appCh.on("set:font:size",this.onAppSetFontSize),this._subappCh.reply("get:font:size",this.onGetFontSize),this._appCh.on("set:night:mode",this.onAppSetNightMode),this._subappCh.reply("get:night:mode",this.onGetNightMode),this.listenTo(this,"changed:appFontSizeIndex",this.refreshArticlesStateClick),this._appCh.reply("app:font:state:change",this.refreshArticlesStateClick),this.listenTo(this,"changed:appNightMode",this.refreshArticlesState),this.setUserState()},initState:function(e){this.articles=e,this.allPagesIndexes=this.articles.models.map(function(e,n){return n}),this.setCurrentState()},setUserState:function(){var e=KGPugpigReader.BasilStore.get("USER_STATE")||{};
this.set({appFontSizeIndex:e?e.fontSizeIndex:0,appNightMode:"undefined"!=typeof e.nightMode&&e.nightMode},{silent:!0})},setCurrentState:function(e){if(e=e||this._appCh.request("app:get:state"),_.isUndefined(e)||_.isUndefined(e.idEdition))return void this.set(e);if("undefined"!=typeof e.idArticle){var n=this.articles.getArticle(e.idArticle);n.get("isFetched")===!1&&n.get("isFetching")===!1&&n.fetch()}if(e.idEdition!==this.get("idEdition")||e.idArticle!==this.get("idArticle")||e.urlAnchorArticle!==this.get("urlAnchorArticle")){var o=_.extend(e,this.getCurrentArticle(e),this.getAdjacentArticles());o.appFontSizeIndex=this.get("appFontSizeIndex"),o.appNightMode=this.get("appNightMode"),o.pageType=this.get("pageType"),this.clear({silent:!0}),this.set(o)}},getCurrentArticle:function(e){if(!_.isUndefined(e.idArticle))return this.currentArticle=this.articles.findWhere({id:e.idArticle}),this.idxCurrentArticle=this.currentArticle.getIndexInCollection(),{idxCurrentArticle:this.idxCurrentArticle,urlCurrentArticle:this.currentArticle.getArticleUrl()}},getAdjacentArticles:function(){if(_.isEmpty(this.articles))return{};var e=this.articles.getAdjacentIndex(this.idxCurrentArticle,"previous"),n=this.articles.getAdjacentIndex(this.idxCurrentArticlearticles.at(n),i={prev:!1,next:!1};return o&&(i=_.extend(i,{prev:!0,idxPrevArticle:e,urlPrevArticle:o.getArticleUrl()})),a&&(i=_.extend(i,{next:!0,idxNextArticle:n,urlNextArticle:a.getArticleUrl()})),i},gotoArticle:function(e){var n=this.articles.getAdjacentIndex(this.idxCurrentArticle,e),o=this.articles.at(n),a={idEdition:o.get("idEdition"),idArticle:o.get("id"),urlArticle:o.get("url.relative"),titleArticle:o.get("title")};this._appCh.trigger("app:set:state",a,!0),this.setCurrentState(a)},getVisiblePagesIndexes:function(){return[this.get("idxPrevArticle"),this.get("idxCurrentArticle"),this.get("idxNextArticle")]},getOfflinePagesIndexes:function(){return _.difference(this.allPagesIndexes,this.getVisiblePagesIndexes())},isPageVisible:function(e){return this.getVisiblePagesIndexes().indexOf(e)>-1},onGetFontSize:function(){return this.get("appFontSizeIndex")},onAppSetFontSize:function(e){this.set("appFontSizeIndex",e),this.trigger("changed:appFontSizeIndex")},onGetNightMode:function(){return this.get("appNightMode")},onAppSetNightMode:function(e){this.set("appNightMode",e),this.trigger("changed:appNightMode")},refreshArticlesState:function(){this.articles.forEach(function(e){e.refreshState()})},refreshArticlesStateClick:function(){this.articles.forEach(function(e){e.refreshStateClick()})}})}(),KGDocViewer.Models=KGDocViewer.Models||{},function(){KGDocViewer.Models.ToolbarState=KGPugpigCore.Extensions.Model.extend({name:"ToolbarState",appChannelName:"KGDocViewer",regex:{matchArbitraryText:/text\(([^\)]+)\)/i,matchCustomImage:/image\(([^\)]+)\)/i},initialize:function(e,n){this.options=n,this.listenTo(this.options.currentState,"change:idxCurrentArticle",this.onChangeCurrentArticle),this.customButtons=this.getCustomButtons(),this.setCurrentState()},onChangeCurrentArticle:function(e,n){this.setCurrentState(n)},setCurrentState:function(e){e=e||0,this.article=this.options.edition._articles.at(e);var n=this.getEditionFeatures(),o=this.getArticleFeatures(),a=this.getHeaderStyleDefinition(),i=this.getAppState(),t=this.getCurrentStatus(a),r=this.getContainerStyling(a),g={container:r,app:i,doc:_.extend({},n,o,a,t),customButtons:this.customButtons};this.set(g)},getEditionFeatures:function(){var e=this._appCh.request("app:has:feature","storefront"),n=this._appCh.request("app:has:feature","thumbnails"),o=!_.isEmpty(this.options.edition.getSearchLink())&&this._appCh.request("app:has:feature","search");return{hasStorefront:e,hasSearch:o,hasThumbnails:n,hasEditionSounds:this.options.edition.get("hasSounds")}},getArticleFeatures:function(){return{hasShare:this._appCh.request("app:has:feature","share")&&!_.isUndefined(this.article.get("url.bookmark")),hasSounds:!_.isEmpty(this.article.get("sounds"))}},getHeaderStyleDefinition:function(){var e={headerBackgroundColor:"transparent",hasTocIcon:!0},n=this.article.getHeaderStyle();return"undefined"==typeof n?e:(n.split(";").forEach(function(n){if(n=n.trim(),0!==n.length){var o=n.split(":"),a=_.isEmpty(o[1])?void 0:o[1].trim();switch(o[0].trim()){case"display":e.display=a;break;case"backgroundcolor":e.headerBackgroundColor=a;break;case"hide_toc":e.hasTocIcon=!1}}}),e)},getAppState:function(){return{hasAuth:this._appCh.request("app:has:auth"),isPlayingSounds:!!this._appCh.request("is:playing:sounds"),hasPrinting:this._appCh.request("app:has:feature","printing")}},getCurrentStatus:function(e){var n={};if("undefined"==typeof e.display)return n.statusType="text",n.statusText=this.article.get("section"),n;var o=e.display.match(this.regex.matchArbitraryText);if(o)return n.statusType="text",n.statusText=o[1],n;var a=e.display.match(this.regex.matchCustomImagsImage=this._appCh.request("config:custom:image",a[1]),n;switch(e.display){case"image":n.statusType="image",n.statusImage=this._appCh.request("theme:key","BrandLogo");break;case"title":n.statusType="text",n.statusText=this.article.get("title");break;case"section":default:n.statusType="text",n.statusText=this.article.get("section")}return n},getCustomButtons:function(){var e=this.options.customButtons,n=_.findWhere(e,{align:"right"}),o=_.findWhere(e,{align:"left"}),a=_.findWhere(e,{align:"center"});return{right:_.isArray(n)?n:n?[n]:[],center:_.isArray(a)?a:a?[a]:[],left:_.isArray(o)?o:o?[o]:[]}},getContainerStyling:function(e){var n,o=e.headerBackgroundColor;return n=_.isUndefined(o)||"transparent"===o?"":"background-color: "+o,{styleDefinition:n}}})}(),KGDocViewer.Models=KGDocViewer.Models||{},function(){KGDocViewer.Models.Page=KGFeedParser.Models.Article.extend({name:"Page",appChannelName:"KGDocViewer",defaults:{isFetched:!1},regex:{startsWithData:/^data-/i,isImg:/img/i,isFontSize:/^font-size/i,startsWithHashmark:/^#/,shouldNotPrerender:/stopSnapshotting/i},initialize:function(e,n){_.bindAll(this,"onFetch","onFetchManifest","onBeforeSend"),this.options=n},fetch:function(){this.set("isFetching",!0);var e={url:this.getArticleUrl(),beforeSend:this.onBeforeSend,success:this.onFetch};$.ajax(e)},onFetch:function(e){this.set({isFetching:!1,isFetched:!0,htmlContent:this.buildHtmlSrc(e),urlContent:this.getArticleUrl(),pdfContent:this.getPdfUrl(),thumbnailIcon:this.getThumbnailIcon()})},onBeforeSend:function(e){if(this.get("isProtected")){var n=this._appCh.request("user:creds",this.get("idEdition"));if(!_.isUndefined(n)&&!_.isUndefined(n.get("accounts")[0])){var o=window.btoa(n.get("accounts")[0].user+":"+n.get("accounts")[0].password);e.setRequestHeader("Authorization","Basic "+o)}}e.setRequestHeader("x-pugpig-publish-reader",!0)},buildHtmlSrc:function(e){var n=this.options.tools;return this.doc=e?n.parser.parseFromString(e,"text/html"):this.doc,this._getShouldConcurent(),this._getDocCallback(),this._setBaseHref(),this._resolveUrls(),this._escapeStyleAttribute(),this._encodeDataAttributes(),this._setFontSize(),this._setNightMode(),this._setIsPugpigWebClass(),this._setIsSubscribedClass(),this._setPrintFunction(),this._setCustomFooter(),this._setWebkitOverflowScrolling(),this._flushDocumentHtml()},_getDocCallback:function(){var e=this.doc.querySelector('head meta[name="callbackWhenSnapshotFinished"]');e&&this.set("callbackWhenSnapshotFinished",e.getAttribute("content"))},_getShouldConcurent:function(){this.set("shouldConcurrent",!0);var e=this.doc.querySelector('head meta[name="concurrent"]');e&&this.set("shouldConcurrent","no"!==e.getAttribute("content"))},_setBaseHref:function(){var e,n=this.options.tools,o=this.doc.getElementsByTagName("head")[0],a=o.getElementsByTagName("base")[0];if(a){var i=a.getAttribute("href"),t=n.uri.absoluteTo(this.getArticleUrl(),i);a.setAttribute("href",t),e=t}else{var r=this.doc.createElement("base");r.setAttribute("href",this.getArticleUrl()),o.insertBefore(r,o.firstChild),e=this.getArticleUrl()}this.docBaseHref=e},_setFontSize:function(){var e=this.doc.querySelector("html"),n=e.getAttribute("style"),o=n?n.split(";"):[];o=_.filter(o,function(e){return!this.regex.isFontSize.test(e)},this),o.push("font-size:"+this._getAppFontSize()),o=_.uniq(o),e.setAttribute("style",o.join(";"))},_setNightMode:function(){var e=this.doc.querySelector("body"),n=this._subappCh.request("get:night:mode");n?e.classList.add("pp-is-nightmode"):e.classList.remove("pp-is-nightmode")},_setIsPugpigWebClass:function(){var e=this.doc.querySelector("body");e.classList.add("is-pugpig-web")},_setIsSubscribedClass:function(){if(this._appCh.request("user:is:loggedin")){var e=this.doc.querySelector("body");e.classList.add("pp-is-subscribed")}},_flushDocumentHtml:function(){var e=this.doc.documentElement.outerHTML;return e=KGDocViewer.fw.he.decode(e)},_getAppFontSize:function(){var e=this._appCh.request("config:key","fontSizes"),n=[100,125,150],o="undefined"!=typeof this._subappCh.request("get:font:size")?this._subappCh.request("get:font:size"):0;return"undefined"!=typeof e&&Array.isArray(e)&&e.length>=3&&(n=e),n[o]?n[o]+"%":"100%"},refreshState:function(){this.get("isFetched")&&(this._setFontSize(),this._setNightMode(),this.set("htmlContent",this._flushDocumentHtml()))},refreshStateClick:function(){var e=document.getElementsByName(this.id);if(e.length>0){const n=document.getElementsByName(this.id)[0].contentDocument;n&&(n.querySelector("html").style.fontSize=this._getAppFontSize())}},_resolveUrls:function(){var e=this.doc.querySelectorAll("[src],[href]:not(base)");[].forEach.call(e,function(e){var n=e.hasAttribute("src")?"src":"href",o=e.getAttribute(n),a=this.regex.startsWsoluteTo(this.docBaseHref,o):o;e.setAttribute(n,a)},this)},_encodeDataAttributes:function(e){var n=this.doc.querySelectorAll("*");[].forEach.call(n,function(e){for(var n=0;n<e.attributes.length;n++){var o=e.attributes[n];if(this.regex.startsWithData.test(o.nodeName)){var a=KGDocViewer.fw.he.encode(o.nodeValue);e.setAttribute(o.nodeName,a)}}},this)},_escapeStyleAttribute:function(){var e=/"/g,n=this.doc.querySelectorAll("[style]");[].forEach.call(n,function(n){var o=n.getAttribute("style");if(e.test(o)){var a=o.replace(e,"'");n.setAttribute("style",a)}})},_setPrintFunction:function(){var e=this.doc.getElementsByTagName("head")[0],n=this.doc.createElement("script");n.text="function printPage(){window.print();}",e.appendChild(n)},_setCustomFooter:function(){if(this.options.customFooterContent){var e=this.options.customFooterContent,n=this.doc.querySelector("body"),o=this.doc.createElement("div"),a=[];style=this.doc.createElement("style"),style.textContent=e.css,a.push("width:"+e.width),a.push("height:"+e.height),o.setAttribute("style",a.join(";")),o.setAttribute("id","pp-custom-footer"),o.appendChild(style),o.insertAdjacentHTML("beforeend",e.html),n.appendChild(o)}},_setWebkitOverflowScrolling:function(){if(this._appCh.request("is:device",{os:"iOS"})){var e=this.doc.getElementsByTagName("body")[0],n="overflow-y: scroll;-webkit-overflow-scrolling: touch;",o=e.getAttribute("style")||"";e.setAttribute("style",n+o)}},fetchManifest:function(){var e={url:this.get("url.manifest"),complete:this.onFetchManifest};$.ajax(e)},onFetchManifest:function(e,n){if("error"===n)return void this.set("cacheManifestFiles",!1);var o=window.parseManifest(e.responseText),a=!!(o&&o.cache&&o.cache.length)&&o.cache;this.set("cacheManifestFiles",a)},hasAccess:function(){var e=this._appCh.request("user:is:loggedin");return"undefined"==typeof e||e===!0||this.get("isProtected")===!1}})}(),KGDocViewer.Collections=KGDocViewer.Collections||{},function(){KGDocViewer.Collections.Pages=KGPugpigCore.Extensions.Collection.extend({name:"Pages",appChannelName:"KGDocViewer",model:KGDocViewer.Models.Page,getArticle:function(e){return this.findWhere({id:e})}})}(),KGDocViewer.Views.Layouts=KGDocViewer.Views.Layouts||{},function(){KGDocViewer.Views.Layouts.Arrows=KGPugpigCore.Extensions.ItemView.extend({name:"Arrows",appChannelName:"KGDocViewer",tagName:"nav",className:"KGDocViewer_arrows",template:KGDocViewer.Templates.Arrows,ui:{arrows:".KGDocViewer_pages_arrows",prev:".KGDocViewer_pages_arrowsPrev",next:".KGDocViewer_pages_arrowsNext"},events:{"click @ui.arrows":"onClickArrows"},modelEvents:{change:"render"},clickArrow:function(e){var n="left"===e?"prev":"next";this.ui[n].click()},onImageError:function(e){var n=e.currentTarget;n.getAttribute("src").length>0&&n.classList.add("is-broken")},onClickArrows:function(e){e.preventDefault();var n=$(e.target),o=n.hasClass("KGDocViewer_pages_arrows")?n:n.parents(".KGDocViewer_pages_arrows"),a=o.hasClass("KGDocViewer_pages_arrowsNext")?"next":"previous";this.model.gotoArticle(a)}})}(),KGDocViewer.Views.Items=KGDocViewer.Views.Items||{},function(){KGDocViewer.Views.Items.Page=KGPugpigCore.Extensions.ItemView.extend({name:"Page",appChannelName:"KGDocViewer",tagName:"article",className:"KGDocViewer_page",attributes:function(){return{style:"width:"+this.getScreenWidth()+"px"}},template:KGDocViewer.Templates.Page,ui:{iframe:"iframe",spinner:".KGSpinner",thumbnailIcon:".KGDocViewer_thumbnail"},events:{"click @ui.thumbnailIcon":"onClickThumbnailIcon"},docEvents:{"click map area":"onClickHotspot","click a[href]":"onClickGenericLink",'click a[href^="pugpig://browseProductList"]':"onClickProductsList",'click [href^="pugpig://onImageClick"]':"onClickPugpigOnImageClick","click figure[data-image-web-zoom][data-image-nozoom]":"onClickFigure","click figure:not([data-image-nozoom])":"onClickFigure",'click [href^="pugpig://trackAnalyticsEvent"]':"onClickTrackAnalyticsEvent",keydown:"onKeyDown"},regex:{matchEventEl:/([a-z]+)\s(.+)?/,hasSpace:/ /,matchOnImageClick:/^pugpig:\/\/onImageClick\/(.*)/,startsWithPugpig:/^pugpig:\/\//i,startsWithHashmark:/^#/},triggerRef:null,initialize:function(){_.bindAll(this,"onIframeLoad","onAccountChangeState","onSetTrigger","onClickThumbnailIcon"),this.uri=KGDocViewer.fw.URI,this.isPageRendered=!1,this.inboundAnchorLink=null,this.idxPage=this.model.getIndexInCollection(),this.listenTo(this.model,"change:htmlContent",this.render),this._appCh.on("app:set:trigger",this.onSetTrigger)},onClickThumbnailIcon:function(e){return e.preventDefault(),this.triggerDeeplinkInEdition(e.currentTarget),!1},onSetTrigger:function(e){this.triggerRef=e},serializeData:function(){var e=this.model.toJSON(),n=this.getOption("currentState");return this.getOption("currentState").isPageVisible(this.idxPage)&&(this.model.get("isFetched")===!1?this.model.fetch():this.idxPage===n.get("idxCurrentArticle")?this.isPageRendered=!0:this.isPageRendered=this.model.get("shouldConcurrent"),e.iframeSrc="about:blank",e.thumbnailIcon=e.th,this._appCh.request("is:device",{browser:"opera"})&&(e.iframeSrc=e.urlContent)),e.isPageRendered=this.isPageRendered,e},onKeyDown:function(e){this._appCh.trigger("keyboard:event",e)},onRender:function(){if(this.isPageRendered){var e=this.ui.iframe[0];this.ui.iframe.on("load",this.onIframeLoad),e.contentWindow.document.open(),e.contentWindow.document.write("<!DOCTYPE html>"),e.contentWindow.document.write(this.model.get("htmlContent")),e.contentWindow.document.close()}},setActiveState:function(e){this.isActive=e},onIframeLoad:function(){this.ui.iframeDoc=this.ui.iframe.contents(),this.bindDocEvents(),this.setImageGroups(),this.triggerDocCallback(),this.model.get("isProtected")===!0&&(this._appCh.on("panel:account:close",this.onAccountChangeState),this._appCh.on("user:change:login",this.onAccountChangeState)),this.ui.spinner.remove(),this.ui.iframe.addClass("KGDocViewer_iframe-isVisible"),this._appCh.request("is:device",{os:"iOS"})&&this.ui.iframe.css({height:this.ui.iframeDoc.height()}),this.checkDotr("title",this.ui.iframeDoc[0].title||""),this.ui.iframe.off("load",this.onIframeLoad)},checkDocumentHeight:function(){var e=this.ui.iframeDoc.find("html"),n=parseInt(e.css("height"),10);0===n&&e.css({height:"100%"});varllback:function(){if(""!==window.location.hash&&(this.inboundAnchorLink=window.location.hash.substr(1)),this.idxPage===this.getOption("currentState").get("idxCurrentArticle")){if(this.inboundAnchorLink)console.info("triggerDocCallback - passing in inboundAnchorLink",this.inboundAnchorLink,window.location);else if(console.info("triggerDocCallback - calling NO FRAGMENT",window.location),"tableofcontents"===this.triggerRef){var e=this;setTimeout(function(){e._appCh.trigger("app:focus:content")},1e3),this.triggerRef=null}var n=this.model.get("callbackWhenSnapshotFinished");if(n){var o=this.ui.iframe[0].contllback - passing in inboundAnchorLink",this.inboundAnchorLink),o.document.location.hash=this.inboundAnchorLink),o[n]()}catch(e){console.warn("There was an error in the callback script",e)}}}},onAccountChangeState:function(){this._appCh.off("user:change:login"),this.dth:screen.width},triggerDeeplinkInEdition:function(e){const n=this._appCh.request("get:article:by:alternate:portrait",this.model.get("idEdition"),e.href);if(e)if(n){var o={idEdition:n.get("idEdition"),idArticle:n.get("id"),urlArticle:n.getArticleUrl()},a=KGPugpigCore.fw.URI.parse(e.href);o.urlAnchorArticle=a.anchor.length?a.anchor:void 0,this._appCh.trigger("app:set:state",o)}else window.open(e.href,"_self"),this.sendAnalyticsEvent("EentDefault();const n=e.target,o=this._appCh.request("get:article:by:link",this.model.get("idEdition"),n.href);if(n)if(o){var a={idEdition:o.get("idEdition"),idArticle:o.get("id"),urlArticle:o.getArticleUrl()},i=KGPugpigCore.fw.URI.parse(n.href);a.urlAnchorArticle=i.anchor.length?i.anchor:void 0,this._appCh.trigger("app:set:state",a)}else window.open(n.href,"_self"),this.sendAnalyticsEvent("ExternalLinkOpened",n.href);return!1},onClickGenericLink:function(e){if(e.currentTarget.hasAttribute("href")===!1||this.regex.startsWithPugpig.test(e.currentTarget.getAttribute("href")))return!1;if(this.regex.startsWithHashmark.test(e.currentTarget.getAttribute("href"))){var n=e.currentTarget.getAttribute("href"),o=this.ui.iframe.contents(),a=1===n.length?o.find("body")[0]:o.find('[name="'+n.substring(1)+'"], [id^="'+n.substring(1)+'"]')[0];if("undefined"==typeof a)return!0;var i=a.getBoundingClientRect().top;return setTimeout(function(){i===a.getBoundingClientRect().top&&a.scrollIntoView()},50),!0}var t=e.currentTarget.href,r=this._appCh.request("get:article:by:link",this.model.get("idEdition"),t);if(r){var g={idEdition:r.get("idEdition"),idArticle:r.get("id"),urlArticle:r.getArticleUrl()},d=KGPugpigCore.fw.URI.parse(t);g.urlAnchorArticle=d.anchor.length?d.anchor:void 0,this._appCh.trigger("app:set:state",g)}else window.open(t),this.sendAnalyticsEvent("ExternalLinkOpened",t);return!1},onClickProductsList:function(e){e.preventDefault();var n={idEdition:this.model.get("idEdition"),idArticle:this.model.get("id"),callingEvent:e,dataUrl:this.options.edition.get("productsDataUrl"),customText:this._appCh.request("config:key","things.customText")};KGPugpigReader.subapp("things").start(n);var o=_.getParameterByName("productIDs",e.currentTarget.href);this.sendAnalyticsEvent("ProductTapped",o)},setImageGroups:function(){var e=_.map(this.ui.iframeDoc.find("[data-image-group]"),function(e){return!e.hasAttribute("data-image-nozoom")&&this.getDataFromFig]=_.filter(e,{grp:n})},this)},onClickFigure:function(e){var n=e.currentTarget;if(!n.hasAttribute("data-image-nozoom")||n.hasAttribute("data-image-web-zoom")){var o,a=[];if(n.hasAttribute("data-image-group")){a=this.imageGroups[n.getAttribute("data-image-group")];var i=n.querySelector("img").getAttribute("src");o=this.uri.absoluteTo(this.model.get("urlContent"),i)}else a.push(this.getDataFromFigure(n)),o=a[0].url;o.length&&this.launchImageGallery(a,o)}},getDataFromFigure:function(e){var n=e.querySelector("img"),o=e.querySelector("figcaption"),a=e.querySelector(".copyright"),i=n&&n.hasAttribute("id")?n.hasAttribute("id"):_.uuid(),t=e.getAttribute("data-image-group")||"",r=n?this.uri.absoluteTo(this.model.get("urlContent"),n.getAttribute("src")):"",g=e.hasAttribute("data-image-web-zoom");return{grp:t,url:r,id:i,forceWebZoom:g,caption:o?o.textContent:"",copyright:a?a.textContent:""}},launchImageGallery:function(e,n){KGPugpigReader.subapp("slideshow").start({editionId:this.options.edition.get("id"),articleId:this.model.get("id"),images:e,activeImageUrl:n})},onClickPugpigOnImageClick:function(e){e.stopPropagation();var n,o,a=e.currentTarget,i=a.getAttribute("href"),t=!!i&&i.match(this.regex.matchOnImageClick);if(t&&t[1]?(o=t[1],n=this.ui.iframeDoc[0].querySelector("#"+o)):(o=_.uuid(),n=e.currentTarget),n&&!n.hasAttribute("data-image-nozoom")){var r=this.getDataFromFigure(n);this.launchImageGallery([r],r.url)}},onClickTrackAnalyticsEvent:function(e){return this.sendAnalyticsEvent("CustomHTMLInteraction",e.currentTarget.href),!1},bindDocEvents:function(){Object.keys(this.docEvents).forEach(function(e){var n=this.regex.hasSpace.test(e)?e:e+" ",o=n.match(this.regex.matchEventEl),a=o[1],i=_.isUndefined(o[2])?"html":o[2],t=_.bind(this[this.docEvents[e]],this),r=this.ui.iframeDoc.find(i);r.on(a,t)},this)},setPageWidth:function(e){this.$el.css({width:e})},scrollToAnchor:function(e){this.inboundAnchorLink=e,console.info("scrollToAnchor - setting inboundAnchorLink",e,window.location);var n=this.ui.iframe.contents().find('[name="'+e+'"], [id="'+e+'"]');if(n.length){var o=this.ui.iframe[0].contentWindow,a="pugpigSelectFragment";if(o.hasOwnProperty(a))try{o[a](this.inboundAnchorLink)}catch(e){console.warn("There was an error in the callback script",e)}var i=n.offset();this.ui.iframe[0].contentWindow.scroll(i.left,i.top),console.info("scrollToAnchor - done scrolling",e)}},sendAnalyticsEvent:function(e,n){this._appCh.trigger("analytics:hit",{type:"event",eventCategory:"/Edition/PageView",eventAction:e,eventLabel:n})}})}(),KGDocViewer.Views.Collections=KGDocViewer.Views.Collections||{},function(){KGDocViewer.Views.Collections.Pages=KGPugpigCore.Extensions.CompositeView.extend({name:"Pages",appChannelName:"KGDocViewer",template:KGDocViewer.Templates.Pages,childViewContainer:".KGDocViewer_pagesContainer",childView:KGDocViewer.Views.Items.Page,childViewOptions:function(){return{edition:this.options.edition,currentState:this.model}},ui:{pagesContainer:".KGDocViewer_pagesContainer"},modelEvents:{"change:idxCurrentArticle":"setCurrentArticle"},onRenderCollection:function(){this.pagesWidth=this.getScreenWidth(),this.moveContainer(!1)},setCurrentArticle:function(){this.renderAdjacentPages(),this.removeOfflinePages(),this.moveContainer(),this.scrollToAnchor()},scrollToAnchor:function(){var e=this.model.get("urlAnchorArticle");if(e){var n=this.collection.findWhere({id:this.model.get("idArticle")}),o=this.children.findByModel(n);o&&o.scrollToAnchor(e)}},moveContainer:function(e){clearTimeout(this.moveContainerTimeout),e="undefined"==typeof e||e;var n=this.model.get("idxCurrentArticle")*this.pagesWidth,o="KGDocViewer_pagesContainer-hideScrollbar",a="KGDocViewer_pagesContainer-withAnimation";e?(this.ui.pagesContainer.addClass(o),this.ui.pagesContainer.addClass(a),this.ui.pagesContainer.css({transform:"translateX(-"+n+"px)"}),this.moveContainerTimeouts=setTimeout(function(){this.ui.pagesContainer.removeClass(o),this.ui.pagesContainer.removeClass(a)}.bind(this),500)):this.ui.pagesContainer.css({transform:"translateX(-"+n+"px)"});var i=this.collection.at(this.model.get("idxCurrentArticle")),t=this.children.findByModel(i);this.children.forEach(function(e){e.setActiveState(!1)}),t.setActiveState(!0)},setPagesWidth:function(e){this.pagesWidth=e,this.children.each(function(n){n.setPageWidth(e)})},renderAdjacentPages:function(){this.model.getVisiblePagesIndexes().forEach(function(e){if("undefined"!=typeof e){var n=this.collection.at(e),o=this.children.findByModel(n);o.isPageRendered===!1&&o.render()}},this)},removeOfflinePages:function(){this.model.getOfflinePagesIndexes().forEach(function(e){var n=this.collection.at(e),o=this.children.findByModel(n);o.isPageRendered===!0&&(o.isPageRendered=!1,o.render())},this)},getScreenWidth:function(){return window.innerWidth>0?window.innerWidth:screen.width}})}(),KGDocViewer.Views=KGDocViewer.Views||{},function(){KGDocViewer.Views.Layouts.Toolbar=KGPugpigCore.Extensions.LayoutView.extend({name:"DocViewerToolbar",appChannelName:"KGDocViewer",className:"KGDocViewer_toolbar KGToolbar",template:KGDocViewer.Templates.Toolbar,ui:{btnHome:".js-home",btnToc:".js-tableofcontents",btnAccount:".js-account",btnSettings:".js-settings",btnOverflow:".js-overflow",btnSounds:".js-sounds",btnSearch:".js-search",btnShare:".js-share",btnThumbs:".js-thumbnailsnav",btnPrint:".js-print",buttons:".js-button",btns:".KGDocViewer_toolbar_button",themePickerBtns:".pickerDocViewerToolbar_button",statusText:".KGDocViewer_toolbar_statusText",overflowButtons:".KGToolbar_overflowButtons .KGDocViewer_toolbar_button"},events:{"click @ui.btns":"onClickButtons","click @ui.btnHome":"onClickHome","click @ui.btnToc":"onClickTableOfContents","click @ui.btnAccount":"onClickAccount","click @ui.btnSettings":"onClickSettings","click @ui.btnSounds":"onClickSounds","click @ui.btnSearch":"onClickSearch","click @ui.btnShare":"onClickShare","click @ui.btnThumbs":"onClickThumbs","click @ui.btnPrint":"onClickPrint"},modelEvents:{change:"render"},regex:{matchIconClass:/icon-([^\s]*)/},themePickerElements:["themePickerBtns","statusText","overflowButtons"],behaviors:{OverflowButtons:{behaviorClass:KGPugpigCore.Behaviors.OverflowButtons}},initialize:function(){_.bindAll(this,"onSoundsPlayerStateChange"),this._appCh.on("set:authentication",this.render),this._appCh.on("sounds:player:state:change",this.onSoundsPlayerStateChange)},onClickButtons:function(e){this.isOverflown&&!e.currentTarget.classList.contains("js-overflow")&&this.toggleOverflownButtons(!1),this.appState=this._appCh.request("app:get:state")},onClickHome:function(){this._appCh.trigger("destroy:all:panels"),this._appCh.trigger("app:set:state",{idEdition:void 0,idArticle:void 0}),this.sendAnalyticsEvent("EditionClosed"),this.sendAnalyticsScreenView()},onClickTableOfContents:function(){this._appCh.trigger("toggle:tableofcontents",this.appState),this.sendAnalyticsEvent("TableOfContentsItemClicked",this.appState)},onClickAccount:function(){this._appCh.trigger("toggle:account")},onClickSettings:function(){this._appCh.trigger("toggle:settings")},onClickSearch:function(){this._appCh.trigger("toggle:search",this.appState)},onClickSounds:function(){this._appCh.trigger("toggle:sounds",this.appState)},onClickShare:function(){thi)},onClickThumbs:function(){this._appCh.trigger("toggle:thumbnailsnav",this.appState)},onClickPrint:function(){var e=this._appCh.request("app:get:state");window.frames[e.idArticle].printPage()},onToggleOverflowButtons:function(e){this.$el.parent().toggleClass("KGDocViewer_toolbarContainer-isOverflown",e)},onSoundsPlayerStateChange:function(e){"string"==typeof this.ui.btnSounds&&this.bindUIElements();var n,o=this.ui.btnSounds.find("svg use");switch(e){case"pla"button"),i=a?a.attr("class"):void 0,t=i&&i.length?i.match(this.regex.matchIconClass)[1]:void 0;n=t&&"sounds-playing"!==t?t:"sounds-on";break;case"destroy":n="sounds"}"string"==typeof n&&o.attr("xlink:href","#icon-"+n)},sendAnalyticsScreenView:function(){this._appCh.trigger("analytics:hit",{type:"screenview",screenName:"/Storefront"})},sendAnalyticsEvent:function(e,n){var o={type:"event",eventCategory:"/Edition/PageView",eventAction:e};_.isUndefined(n)||(o.eventLabel=n.idArticle),this._appCh.trigger("analytics:hit",o)}})}(),KGDocViewer.Views=KGDocViewer.Views||{},function(){KGDocViewer.Views.Layouts.Privacy=KGPugpigCore.Extensions.LayoutView.extend({name:"Privacy",appChannelName:"KGDocViewer",className:"KGDocViewer_privacy KGPrivacy",template:KGDocViewer.Templates.Privacy,initialize:function(){console.log("article view",this,this.options),this.addCSS()},addCSS:function(){var e=document.querySelector(".privacyAdded");if(!e){var n=document.createElement("style");n.innerHTML=this.options.privacyBanner.css,n.type="type/css",document.querySelector(".KGPugpigReader-css").innerHTML+=this.options.privacyBanner.css,document.querySelector(".KGPugpigReader-css").className+=" privacyAdded"}},serializeData:function(){return{html:this.options.privacyBanner.html,css:this.options.privacyBanner.css}},onRender:function(){}})}(),KGDocViewer.Views=KGDocViewer.Views||{},function(){KGDocViewer.Views.AppRoot=KGPugpigCore.Extensions.LayoutView.extend({name:"AppRoot",appChannelName:"KGDocViewer",tagName:"main",className:"KGDocViewer",template:KGDocViewer.Templates.AppRoot,ui:{pages:".KGDocViewer_pages",innerToolbar:".KGDocViewer_toolbar"},regions:{privacy:".KGDocViewer_privacyContainer",toolbar:".KGDocViewer_toolbarContainer",pages:".KGDocViewer_pages",arrows:".KGDocViewer_arrowsContainer",customFooter:".KGDocViewer_customFooterContainer"},themePickerElements:["innerToolbar"],initialize:function(e){_.bindAll(this,"setCurrentState","onChangeArticle","setPagesWidth","onKeyboardEvent","addPrefetchLinks","onTogglePaywall","onFocusContent"),this.$head=$("head"),this.manifestFiles=[],this.setEdition(e.edition),this._appCh.on("keyboard:event:arrows",this.onKeyboardEvent),this._appCh.on("keyboard:event:arrows:down",this.ohis._appCh.on("app:focus:content",this.onFocusContent)},setEdition:function(e){this.editionModel=e,this.articlesColl=this.editionModel?this.editionModel._articles:{};var n=_.isEmpty(this.articlesColl)?[]:this.articlesColl.toJSON(),o=new KGDocViewer.Collections.Pages(n,{customFooterContent:this.getOption("footerContent"),tools:{parser:new DOMParser,uri:KGDocViewer.fw.URI}});this.listenTo(o,"change:cacheManifestFiles",this.addPrefetchLinks),this.currentState=new KGDocViewer.Models.CurrentState,this.listenTo(this.currentState,"change:idxCurrentArticle",this.onChangeArticle),this.toolbarState=new KGDocViewer.Models.ToolbarState({},{currentState:this.currentState,edition:this.editionModel,customButtons:this.getOption("customButtons")}),this.currentState.initState(o),this.currentState.get("arrows")&&(this.arrowsView=new KGDocViewer.Views.Layouts.Arrows({model:this.currentState})),this.pagesView=new KGDocViewer.Views.Collections.Pages({edition:this.editionModel,collection:o,model:this.currentState}),this.toolbarView=new KGDocViewer.Views.Layouts.Toolbar({model:this.toolbarState}),window.docCookies.hasItem("privacy")&&"accepted"!==window.docCookies.getItem("privacy")&&(this.privacyView=new KGDocViewer.Views.Layouts.Privacy({privacyBanner:this.options.privacyBanner}))},onRender:function(){this._appCh.on("window:resize",this.setPagesWidth),this.ui.pages.css({width:this.getPagesTotalWidth()+"px"}),this.getRegion("toolbar").show(this.toolbarView),this.currentState.get("arrows")&&this.getRegion("arrows").show(this.arrowsView),this.getRegion("pages").show(this.pagesView),window.docCookies.hasItem("privacy")&&"accepted"!==window.docCookies.getItem("privacy")&&this.getRegion("privacy").show(this.privacyView)},setPagesWidth:function(e){this.pagesView.setPagesWidth(e.width),this.pagesView.moveContainer(!1),this.ui.pages.css({width:this.getPagesTotalWidth(e.width)+"px"})},getPagesTotalWidth:function(e){return _.isUndefined(this.editionModel)||_.isEmpty(this.articlesColl)?0:(e=e||window.innerWidth||screen.width,
this.articlesColl.length*e)},setCurrentState:function(e){return"undefined"==typeof e?void this.slideOut():(this.currentState.setCurrentState(e),void(_.isUndefined(e.idArticle)||this.slideIn()))},onFocusContent:function(){var e=this._appCh.request("app:get:state"),n=document.querySelector("#"+e.idArticle);"iframe"===document.activeElement.tagName.toLowerCase()&&(document.activeElement.removeAttribute("tabIndex"),document.activeElement.removeAttribute("aria-label"),document.activeElement.removeAttribute("aria-hidden")),n.contentWindow.focus(),n.setAttribute("tabIndex","-1"),n.setAttribute("aria-label","Article Content"),n.setAttribute("aria-hidden","false")},onKeyboardEvent:function(e){if(!this._appCh.request("has:open:modal")||this._appCh.request("get:open:presentables").indexOf("thumbnailsnav")!==-1){var n=this._appCh.request("app:get:state");if("undefined"!=typeof n.idEdition){this.arrowsView.clickArrow(e);var o=this._appCh.request("app:get:state"),a=document.querySelector("#"+o.idArticle);"iframe"===document.activeElement.tagName.toLowerCase()&&(document.activeElement.removeAttribute("tabIndex"),document.activeElement.removeAttribute("aria-label"),document.activeElement.removeAttribute("aria-hidden")),a.setAttribute("tabIndex","-1"),a.setAttribute("aria-label","Article Content"),a.setAttribute("aria-hidden","false"),a.contentWindow.focus()}}},onKeyboardEventDown:function(e){var n=this.request("app:get:state"),o=document.querySelector("#"+n.idArticle);"iframe"===document.activeElement.tagName.toLowerCase()&&(document.activeElement.removeAttribute("tabIndex"),document.activeElement.removeAttribute("aria-label"),document.activeElement.removeAttribute("aria-hidden")),o.setAttribute("tabIndex","-1"),o.setAttribute("aria-label","Article Content"),o.setAttribute("aria-hidden","false"),o.contentWindow.focus()},slideIn:function(){this.$el.removeClass("is-hidden"),this.$el.velocity({left:0},{duration:300,easing:"ease"})},slideOut:function(){this.$el.velocity({left:"100%"},{duration:300,easing:"ease",complete:function(e){e[0].classList.add("is-hidden")}})},onChangeArticle:function(e){e=e||this.currentState,this._appCh.trigger("set:document:meta",{title:e.currentArticle.get("title"),description:e.currentArticle.get("summary")}),this.sendAnalyticsScreenView()},addPrefetchLinks:function(e,n){if(n!==!1){var o=_.map(n,function(n){return KGDocViewer.fw.URI.absoluteTo(e.get("urlContent"),n)}),a=_.difference(o,this.manifestFiles),i=1e3*(e.getIndexInCollection()+1)+3e3;window.setTimeout(_.bind(function(){_.forEach(a,function(e){this.$head.append('<link rel="prefetch" href="'+e+'">')},this)},this),i),this.manifestFiles=_.union(this.manifestFiles,a)}},onTogglePaywall:function(e){this.$el.toggleClass("KGDocViewer-hasPaywall",e)},sendAnalyticsScreenView:function(){va("idArticle");this._appCnName:"/Edition/PageView/"+e,pageType:this.currentState.get("pageType")})}})}(),window.KGProductThings={App:{},Models:{},Collections:{},Views:{Collections:{},Items:{},Layouts:{}},Templates:{},Modules:{},fw:{}},"undefined"!=typeof KGPugpigCore&&(KGProductThings.fw=KGPugpigCore.fw),KGProductThings.App=KGProductThings.App||{},function(){KGProductThings.App=KGPugpigCore.Extensions.Application.extend({name:"KGProductThings",modalref:"things",initialize:function(){_.bindAll(this,"getProduct"),this.module("logger",KGPugpigCore.Modules.Logger),this.module("stylesheet",KGPugpigCore.Modules.Stylesheet),this.module("theme",KGProductThings.Modules.Theme),this.module("config",KGProductThings.Modules.Config),this.module("scaffold",KGProductThings.Modules.Scaffold),this._appCh.reply("get:product",this.getProduct)},onBeforeStart:function(e){_.extend(this.options,e),this.module("config").start(),$("#KGPugpigReader").addClass("isOnDisplay"),this.rootView=new KGProductThings.Views.AppRoot({$appContainer:this.getOption("$appContainer")}),this.listenTo(this.rootView,"destroy",this.destroy),this.productsCollection=new KGProductThings.Collections.Products([],{url:this.getOption("dataUrl"),productConfig:this.getOption("productConfig")}),this.productsView=new KGProductThings.Views.Collections.ProductsList({collection:this.productsCollection,productConfig:this.getOption("productConfig"),customText:this.getOption("customText"),idEdition:this.getOption("idEdition"),idArticle:this.getOption("idArticle")})},onStart:function(){this._appCh.trigger("app:overlay:show",this.modalref),this.addRegions({main:this.getOption("appContainer")}),this.getRegion("main").show(this.rootView),this.rootView.getRegion("content").show(this.productsView),this.isStarted=!0,this._appCh.request("trigger:webview:event","pugpig://shopping/ready")},getProduct:function(e){return this.productsCollection.findWhere({reference:e})},stop:function(){this.isStarted&&(this.rootView.onAppClose(),this.isStarted=!1)},onDestroy:function(){this.module("config").stop(),this._appCh.trigger("app:overlay:hide",this.modalref),this.getOption("$appContainer").remove()},isDisplayed:function(){return!_.isUndefined(this.rootView)&&this.rootView.isDisplayed}})}(),this.KGProductThings=this.KGProductThings||{},this.KGProductThings.Templates=this.KGProductThings.Templates||{},this.KGProductThings.Templates.AppRoot=function(e){var n="";_.escape;return n+='<div class="KGProductTiv><div class="subappOverlay"></div><div class="topbar"><button class="KGProducts_icon icon icon-close topbar__closeButton"></button></div><section class="content"></section></div>'},this.KGProductThings.Templates.GalleryThumb=function(e){var n,o="";_.escape;return o+='<img src="'+(null==(n=e.url)?"":n)+'" class="KGFigure-portrait">'},this.KGProductThings.Templates.GalleryThumbstrip=function(e){var n="";_.escape;return n+='<div class="photoGallery__thumbstrip--container"></div>'},this.KGProductThings.Templates.PhotoGallery=function(e){var n="";_.escape;return n+='<div class="photoGallery__photos"></div><div class="photoGallery__thumbnails"></div>'},this.KGProductThings.Templates.ProductInfo=function(e){var n,o="";_.escape,Array.prototype.join;return o+='<div class="photos"></div><div class="productInfo"><header class="productInfo__header"><div class="productInfo__header--container"><div class="productInfo__title-container"><h1 class="productInfo__title">'+(null==(n=e.title)?"":n)+"</h1></div> ",_.isEmpty(e.variants)?o+=' <p class="productInfo__price">'+(null==(n=e.price)?"":n)+"</p> ":(o+=" ",o+=0===e.defaultVariant.stock?' <p class="productInfo__variants__selected outOfStock" data-variant-reference="'+(null==(n=e.defaultVariant.reference)?"":n)+'">'+(null==(n=e.defaultVariant.description)?"":n)+" - "+(null==(n=e.defaultVariant.price)?"":n)+"</p> ":' <p class="productInfo__variants__selected" data-variant-reference="'+(null==(n=e.defaultVariant.reference)?"":n)+'">'+(null==(n=e.defaultVariant.description)?"":n)+" - "+(null==(n=e.defaultVariant.price)?"":n)+"</p> ",o+=" "),o+=" ",o+=_.isEmpty(e.subtitle)?' <div class="productInfo__subtitle-container productInfo__subtitle-container--hidden"><p class="productInfo__subtitle"></p></div> ':' <div class="productInfo__subtitle-container"><p class="productInfo__subtitle">'+(null==(n=e.subtitle)?"":n)+"</p></div> ",o+=' <div class="productInfo__description-container"><p class="productInfo__description productInfo__description--portrait">'+(null==(n=e.description)?"":n)+'</p></div></div></header><div class="productInfo__toolbar"><button class="KGProducts_icon btn-buy icon icon-buy icon--isInvisible"></button> <button class="KGProducts_icon btn-wishlist icon '+(null==(n=e.isOnWishlistClass)?"":n)+" "+(null==(n=e.isDisableClass)?"":n)+'"></button> <button class="KGProducts_icon btn-share icon icon-share"></button> <button class="KGProducts_icon btn-gallery icon icon-gallery KGProducts_icon--isInvisible"></button></div><div class="wishlistAlert"></div><div class="productInfo__body"><div class="productInfo__description-container"><p class="productInfo__description productInfo__description--landscape">'+(null==(n=e.description)?"":n)+"</p></div></div></div>"},this.KGProductThings.Templates.ProductsList=function(e){var n="";_.escape;return n+='<nav class="arrowStrip"><div class="arrow js-arrow-left"><button class="KGProducts_icon icon icon-back"></button></div></nav><div class="productsCardStrip"><div class="productsCardList"></div></div><nav class="arrowStrip"><div class="arrow js-arrow-right"><button class="KGProducts_icon icon icon-forward"></button></div></nav>'},this.KGProductThings.Templates.ProductVariant=function(e){var n,o="";_.escape;return o+='<li class="productInfo__variants__selector__variant '+(null==(n=e.outOfStockClass)?"":n)+'" data-variant-reference="'+(null==(n=e.reference)?"":n)+'">'+(null==(n=e.description)?"":n)+" - "+(null==(n=e.price)?"":n)+"</li>"},this.KGProductThings.Templates.VariantsSelector=function(e){var n="";_.escape;return n+='<div class="productInfo__variants__selector--roundBorder"><ul class="productInfo__variants__selector--container"></ul></div>'},KGProductThings.Modules=KGProductThings.Modules||{},function(){KGProductThings.Modules.Config=KGPugpigCore.Extensions.Module.extend({name:"Config",appChannelName:"KGProductThings",startWithParent:!1,onStart:function(){_.bindAll(this,"setProductConfiguration","getProductConfiguration","getProductsInWishlist"),this.validateAppConfig().checkConfigUrls().setProductsList(),this.app._subappCh.reply("get:product:configuration",this.getProductConfiguration),this.app._subappCh.reply("get:products:wishlist",this.getProductsInWishlist),this.app._subappCh.reply("set:product:configuration",this.setProductConfiguration)},getProductsInWishlist:function(){return this.app.getOption("productsInWishlist")||[]},getProductConfiguration:function(){return this.app.options.productConfig},validateAppConfig:function(){_.isUndefined(this.app.getOption("callingEvent"))&&_.isUndefined(this.app.getOption("callingLink"))&&_.isUndefined(this.app.getOption("callingElement"))&&this._log("error","Either have a options.callingEvent, a options.callingLink or a options.callingElement"),_.isUndefined(this.app.getOption("dataUrl"))&&this._log("error","Should be loaded with a products JSON file reference: options.dataUrl");var e=!1;if(_.isUndefined(this.app.getOption("callingLink"))||(e=this.app.getOption("callingLink")),_.isUndefined(this.app.getOption("callingEvent")))_.isUndefined(this.app.getOption("callingElement"))||(e=$(this.app.getOption("callingElement")).attr("href"));else{var n=$(this.app.getOption("callingEvent").target);e=!_.isUndefined(n.attr("href"))&&n.attr("href"),e||(e=n.parents('[href*="pugpig://browseProductList"]').attr("href"))}this.app.options.callingLink=e;var o=[],a=window.innerHeight,i=window.innerWidth;o.push("height: "+a+"px");var t=$("#KGPugpigReader");return t.hasClass("KGPugpigReader-isWidget")?(o.push("max-width: "+i+"px"),this.app._appCh.once("window:resize",this.refreshSize),this.app.30))):(this.app._appCh.once("window:resize",this.refreshHeight),this.app._appCh.on("window:resize",_.debounce(this.refreshHeight,30))),$("<div>",{id:"KGProductThings",class:"cleanslate",style:o.join(";")}).appendTo($("#KGPugpigReader")),this.app.options.$appContainer=$("#KGProductThings"),this.app.options.appContainer="#KGProductThings",this},refreshSize:function(){$("#KGProductThings").css({height:window.innerHeight+"px","max-width":window.innerWidth+"px"})},refreshHeight:function(){$("#KGProductThings").css({height:window.innerHeight+"px"})},checkConfigUrls:function(){var e=["cssBaseUrl","cssImagesBaseUrl"];e.forEach(function(e){var n=tof n&&0!==n.length&&"/"!==n[n.length-1]&&(this.app.options[e]=n+"/")},this);var n=["dataUrl","cssBaseUrl","cssImagesBaseUrl","cssIconSprite"];return n.forEach(function(e){var n=this.app.getOption(e);"undefined"!=typeof n&&(this.app.options[e]=n)},this),this},setProductsList:function(){var e=this._uri.parse(this.app.getOption("callingLink")),n={productIDsByUser:!1,indexToDisplay:0,productIDs:[],selectedProductID:""};return _.isUndefined(e.queryKey.productIDs)||(n.productIDsByUser=!0,n.productIDs=_.filter(decodeURIComponent(e.queryKey.productIDs).split(","),function(e){return _.isString(e)&&0!==e.length})),_.isUndefined(e.queryKey.selectedProductID)||(n.productIDs.indexOf(e.queryKey.selectedProductID)===-1&&this._log("error",'Selected Product ID not found: "'+e.queryKey.selectedProductID+'"'),n.selectedProductID=decodeURIComponent(e.queryKey.selectedProductID),0===n.productIDs.length&&n.productIDs.push(decodeURIComponent(e.queryKey.selectedProductID))),n.selectedProductID.length&&(n.indexToDisplay=n.productIDs.indexOf(decodeURIComponent(n.selectedProductID))),this.app.options.productConfig=n,this},setProductConfiguration:function(e){_.isEmpty(e.selectedProductID)||(e.indexToDisplay=e.productIDs.indexOf(e.selectedProductID)),this.app.options.productConfig=e}})}(),KGProductThings.Modules=KGProductThings.Modules||{},function(){KGProductThings.Modules.Scaffold=KGPugpigCore.Extensions.Module.extend({name:"Scaffold",appChannelName:"KGProductThings",startWithParent:!0,onStart:function(){this.startFramework()},startFramework:function(){return this.app.options.backboneHistoryAlreadyStarted=!!KGProductThings.fw.Backbone.history&&KGProductThings.fw.Backbone.History.started,FastClick.attach(document.body),this},onBeforeStop:function(){this.app.getOption("backboneHistoryStarted")||KGProductThings.fw.Backbone.hision("$appContainer").remove()}})}(),KGProductThings.Modules=KGProductThings.Modules||{},function(){KGProductThings.Modules.Theme=KGPugpigCore.Modules.Theme.extend({appChannelName:"KGProductThings",cssNamespace:"#KGProductThings main.KGProductThings",ssName:"KGProductThings-css-theme",themePrefix:"Document_Products",keys:{text:["Title","Subtitle","Price","Description","Overlay"],texture:["BackgroundColor","Information_BackgroundColor","IconBackgroundColor","BorderWidth","NavigationBackgroundColor","Gallery_BackgroundColor","Gallery_SelectedColor","Toolbar_BackgroundColor","Toolbar_BorderColor","Topbar_BackgroundColor","Topbar_BorderColor"],layout:["Height","Top","Width"]},textElements:{".productCard .productInfo__title":"Document_Products_Title",".productCard .productInfo__subtitle":"Document_Products_Subtitle",".productCard .productInfo__price":"Document_Products_Price",".productCard .productInfo__description":"Document_Products_Description",".productCard .productInfo__variants .productInfo__variants__selected":"Document_Products_Price"},layoutElements:{".content":{backgroundColor:"Document_Products_BackgroundColor"},".productCard .productInfo":{backgroundColor:"Document_Products_Information_BackgroundColor"},".productCard .producDocument_Products_IconBackgroundColor"},".photos":{backgroundColor:"Document_Products_Gallery_BackgroundColor"},".productCard .productInfo__toolbar":{backgroundColor:"Document_Products_Toolbar_BackgroundColor",borderColor:"Document_Products_Toolbar_BorderColor"},".arrowStrip":{backgroundColor:"Document_Products_BackgroundColor"},".arrowStrip .arrow":{backgroundColor:"Document_Products_NavigationBackgroundColor"},".topbar":{backgroundColor:"Document_Products_Topbar_BackgroundColor"},".photoGallery__thumbstrip__thumbnail-isActive":{borderColor:"Document_Products_Gallery_SelectedColor"},"div.KGProductThings-container":{height:"Document_Products_Height",top:"Document_Products_Top",width:"Document_Products_Width"}}})}(),KGProductThings.Models=KGProductThings.Models||{},function(){KGProductThings.Models.Product=KGPugpigCore.Extensions.Model.extend({name:"Product",appChannelName:"KGProductThings",validate:function(e){if(_.isEmpty(e.title)&&_.isEmpty(e.price)&&_.isEmpty(e.link)&&_.isEmpty(e.images)&&_.isEmpty(e.thumbnails))return this._log("warn","Empty product"),"empty:product"},parse:function(e){return this.sanitizeData(e).resolveImagesUrl(e).listVariants(e),e},sanitizeData:function(e){var n=["price","description","subtitle","title","link"];return n.forEach(function(n){e[n]=_.isString(e[n])?e[n]:""}),!_.isUndefined(e.variants)&&_.isObject(e.variants)||(e.variants=[]),e.images=_.isEmpty(e.images)?[]:e.images,e.images=_.isString(e.images)?[e.images]:e.images,this},resolveImagesUrl:function(e){var n=[];_.isUndefined(e.images)||(_.isString(e.images)&&(e.images=[e.images]),e.images.forEach(function(e,o){n.push({index:o,url:this._uri.absoluteTo(this.collection.url,e)})},this)),e.images=n;var o=[];return e.thumbnails=e.thumbs||e.thumbnails,_.isUndefined(e.thumbnails)||_.isString(e.thumbnails)&&(e.thumbnails=[e.thumbnails]),e.thumbnails.forEach(function(e,n){o.push({index:n,url:this._uri.absoluteTo(this.collection.url,e)})},this),e.thumbnails=o,delete e.thumbs,this},listVariants:function(e){var n=[];Object.keys(e.variants);return Object.keys(e.variants).forEach(function(o){var a=e.variants[o].price,i=parseInt(e.variants[o].stock),t=e.variants[o].canwishlist;(_.isUndefined(a)||0===a.length||"n/a"===a)&&(a=e.price),_.isNaN(i)&&(i=0),_.isUndefined(t)&&(t=!0),n.push({reference:o,description:e.variants[o].description,price:a,stock:i,canwishlist:t})}),e.variants=n,this},getOffsetRelativeToDisplayProduct:function(){var e=this._subappCh.request("get:product:configuration"),n=e.productIDs.indexOf(this.get("reference"));return n<e.indexToDisplay?"Left":n>e.indexToDisplay?"Right":void 0},getReference:function(){return _.isUndefined(this.get("reference"))?this.get("reference"):encodeURIComponent(this.get("reference"))}})}(),KGProductThings.Collections=KGProductThings.Collections||{},function(){KGProductThings.Collections.Products=KGPugpigCore.Extensions.Collection.extend({name:"Products",appChannelName:"KGProductThings",model:KGProductThings.Models.Product,initialize:function(){this.listenTo(this,"add",this.onAddModel)},onAddModel:function(e){var n=this._subappCh.request("get:product:configuration");n.productIDsByUser||(_.isArray(n.productIDs)||(n.productIDs=[]),n.productIDs.push(e.get("reference"))),this._subappCh.request("set:product:configuration",n)},parse:function(e){var n=["RefreshURL","Comments"],o=Object.keys(e),a=_.difference(o,n),i=[];a.forEach(function(n){return this.options.productConfig.productIDs.length&&this.options.productConfig.productIDs.indexOf(n)===-1?void this._log("warn","Not in productConfig.productIDs",n):void i.push(_.extend(e[n],{reference:n}))},this);var t=_.pluck(i,"reference"),r=_.filter(this.options.productConfig.productIDs,)===-1});if(this.options.productConfig.productIDs=_.difference(this.options.productConfig.productIDs,r),this._subappCh.request("set:product:configuration",this.options.productConfig),this.options.productConfig.productIDs.length){var g=[];this.options.productConfig.productIDs.forEach(function(e){g.push(_.findWhere(i,{reference:decodeURIComponent(e)}))}),i=g}var d=this._subappCh.request("get:products:wishlist");return d.forEach(function(e){var n=_.findWhere(i,{reference:e.product});"undefined"!=typeof n&&("undefined"!=typeof e.variant&&n.variants?(n.isOnWishlistVariantRef=n.isOnWishlistVariantRef||[],n.isOnWishlistVariantRef.push(e.variant)):n.isOnWishlist=!0)}),i},getAdjacentProduct:function(e,n){var o=e;return"right"===n?o=e+1:"left"===n&&(o=e-1),!(o>this.optionss.productConfig.productIDs[o]})},isFirstIndex:function(e){return 0===e},isLastIndex:function(e){return e===this.options.productConfig.productIDs.length-1}})}(),KGProductThings.Behaviors=KGProductThings.Behaviors||{},function(){KGProductThings.Behaviors.OverlayDialog=KGPugpigCore.Extensions.Behavior.extend({name:"OverlayDialog",appChannelName:"KGProductThings",regions:{overlay:".subappOverlay"},ui:{overlay:".subappOverlay"},events:{"click @ui.overlay":"onHideOverlayDialog"},initialize:function(){_.bindAll(this,"onShowOverlayDialog","onHideOverlayDialog"),this.view.addRegions(this.regions),_.assign(this.view.ui,this.ui),this._subappCh.reply("show:overlay:dialog",this.onShowOverlayDialog),this._subappCh.reply("hide:overlay:dialog",this.onHideOverlayDialog)},onShowOverlayDialog:function(e){this.view.ui.overlay.addClass("isTransitioning"),this.listenTo(e,"dialog:close",this.onHideOverlayDialog),this.view.ui.overlay.transitionClass("subappOverlay--isVisible",{complete:_.bind(function(){this.view.ui.overlay.removeClass("isTransitioning")},this)}),this.view.getRegion("overlay").show(e)},onHideOverlayDialog:function(){this.view.ui.overlay.hasClass("subappOverlay--isVisible")?(this.view.ui.overlay.addClass("isTransitioning"),this.view.ui.overlay.transitionClass("subappOverlay--isVisible",{complete:_.bind(function(){this.view.ui.overlay.removeClass("isTransitioning").removeAttr("style")},this)}),this.view.getRegion("overlay").empty()):this.view.ui.overlay.hasClass("isTransitioning")||this.view.overlay.trigger("app:close")}})}(),KGProductThings.Views=KGProductThings.Views||{},function(){KGProductThings.Views.AppRoot=KGPugpigCore.Extensions.LayoutView.extend({name:"Root",appChannelName:"KGProductThings",tagName:"main",className:"KGProductThings",template:KGProductThings.Templates.AppRoot,regions:{content:".content"},ui:{dismissOverlay:".dismissOverlay",closeButton:".topbar__closeButton",link:".productInfo a",photoGallery:".photos",arrow:".arrow",icons:".KGProducts_icon"},events:{"click @ui.dismissOverlay":"onAppClose","click @ui.closeButton":"onAppClose","click @ui.link":"redirect"},childEvents:{"stop:spinner":"onStopSpinner"},themePickerElements:["photoGallery","arrow","icons"],behaviors:{OverlayDialog:{behaviorClass:KGProductThings.Behaviors.OverlayDialog}},initialize:function(){this.listenTo(this.overlay,"app:close",this.onAppClose)},onRender:function(){this.$el.transitionClass(this.className+"--isVisible"),this.isDisplayed=!0},onAttach:function(){this.getOption("$appContainer").append('<div class="KGSpinner"><figure>'),this.ui.spinner=this.getOption("$appContainer").find(".KGSpinner")},onAppClose:function(e){!_.isUndefined(e)&&_.isFunction(e.preventDefault)&&e.preventDefault(),this._appCh.request("is:device","mode","webview")&&this._appCh.request("trigger:webview:event","pugpig://shopping/close"),this.$el.transitionClass(this.className+"--isVisible",{complete:_.bind(function(){this.isDisplayed=!1,this.destroy()},this)})},onStartSpinner:function(){this.ui.spinner.css("z-index","9999").show()},onStopSpinner:function(){this.ui.spinner.hide()}})}(),KGProductThings.Views.Items=KGProductThings.Views.Items||{},function(){KGProductThings.Views.Items.ProductInfo=KGPugpigCore.Extensions.LayoutView.extend({name:"Produnfo,tagName:"article",id:function(){if(!_.isUndefined(this.model.getReference()))return"product-"+this.model.getReference()},className:function(){return["productCard"].concat(this.controlProductRendering()).join(" ")},ui:{btnBuy:".btn-buy",btnWishlist:".btn-wishlist",btnShare:".btn-share",btnGallery:".btn-gallery",wishlistAlert:".wishlistAlert",btnVariants:".productInfo__variants__selected",title:".productInfo__title",subtitle:".productInfo__subtitle",price:".productInfo__price",description:".productInfo__description",toolbar:".productInfo__toolbar"},events:{"click @ui.btnBuy":"openBuyLink","click @ui.btnWishlist":"toggleWishlist","click @ui.btnShare":"openShareDialog","click @ui.btnGallery":"toggleThumbnails","click @ui.btnVariants":"openVariantsDialog"},regions:{photos:".photos"},themePickerElements:["title","subtitle","price","description","btnVariants","variantsSelector","toolbar"],initialize:function(){_.bindAll(this,"setChosenVariant","onScrollDescription"),this.photoGallery=new KGProductThings.Views.Layouts.PhotoGallery({photos:this.model.get("images"),thumbnails:this.model.get("thumbnails")})},getTemplate:function(){return this.$el.hasClass("productCard--isRendered")?this.template:_.template(this.$el.html())},onBeforeRender:function(){this.$el.addClass("productCard--offset"+this.model.getOffsetRelativeToDisplayProduct())},onRender:function(){this.$el.hasClass("productCard--isRendered")&&(this.model.get("thumbnails").length>1&&this.ui.btnGallery.removeClass("KGProducts_icon--isInvisible"),this.model.has("link")&&this.model.get("link").length&&this.ui.btnBuy.removeClass("KGProducts_icon--isInvisible"),this.showPhotoGallery(),_.isUndefined(this.model.get("canwishlist"))||this.model.get("canwishlist")||this.ui.btnWishlist.addClass("KGProducts_icon--isInvisible"),this.onVisible(),this._appCh.request("is:device",{touch:!0})&&this.ui.description.on("scroll",this.onScrollDescription))},onVisible:function(){this.$el.hasClass("productCard--isVisible")||(this.$el.addClass("productCard--isffScreen:function(e){var n="left"===e?"offsetRight":"offsetLeft";this.$el.transitionClass("productCard--"+n,{complete:_.bind(function(){this.$el.removeClass("productCard--isVisible").removeAttr("style")},this)})},slideIntoScreen:function(e){var n="left"===e?"offsetLeft":"offsetRight";this.trigger("navigation:freeze"),this.$el.hasClass("productCard--isRendered")||(this.$el.addClass("productCard--isRendered"),this.render()),this.$el.transitionClass("productCard--"+n,{complete:_.bind(function(){this.trigger("navigation:defrost")},this)}),this.onVisible()},serializeData:function(){var e=this.model.toJSON();return e.defaultVariant=_.find(e.variants,function(e){return e.stock>0}),_.isUndefined(e.defaultVariant)&&(e.defaultVariant=e.variants[0]),e.isOnWishlistClass="icon-wishlist",_.isEmpty(e.variants)&&e.isOnWishlist&&(e.isOnWishlistClass="icon-wishlist-saved"),_.isEmpty(e.variants)||_.isEmpty(e.isOnWishlistVariantRef)||e.isOnWishlistVariantRef.indexOf(e.defaultVariant.reference)===-1||(e.isOnWishlistClass="icon-wishlist-saved"),e.isDisableClass="",_.isEmpty(e.variants)&&e.canwishlist===!1&&(e.isDisableClass="KGProducts_icon--isInvisible"),_.isEmpty(e.variants)||e.defaultVariant.canwishlist!==!1||(e.isDisableClass="KGProducts_icon--isInvisible"),e},controlProductRendering:function(){if(this.model.getIndexInCollection()===this._subappCh.request("get:product:configuration").indexToDisplay)return["productCard--isRendered"]},hideProductCard:function(){this.$el.removeClass("productCard--isVisible").removeAttr("style")},showPhotoGallery:function(){var e=this.getRegion("photos");_.isArray(e.el)&&(e.el="."+e.el[0].className),this.getRegion("photos").show(this.photoGallery)},openVariantsDialog:function(){this.trigger("navigation:freeze");var e=new KGProductThings.Views.Collections.VariantsSelector({$callingElement:this.ui.btnVariants,collection:new KGProductThings.fw.Backbone.Collection(this.model.get("variants"))});this.listenTo(e,"childview:choose:variant",this.setChosenVariant),this.listenTo(e,"destroy",_.bind(function(){this.trigger("navigation:defrost")},this)),this._subappCh.request("show:overlay:dialog",e)},setChosenVariant:function(e){var n=e.model,o=n.get("reference");this.ui.btnVariants.attr("data-variant-reference",o).text(n.get("description")+" - "+n.get("price")).toggleClass("outOfStock",0===n.get("stock"));var a=this.model.get("isOnWishlistVariantRef")||[],i=a.indexOf(o)!==-1?"wishlist-saved":"wishlist";this.changeWishlistIcon(i),this.ui.btnWishlist.toggleClass("KGProducts_icon--isInvisible",!n.get("canwishlist")),this._subappCh.request("hide:overlay:dialog")},openShareDialog:function(){return this._appCh.request("is:device","mode","webview")?void this._appCh.request("trigger:webview:event","pugpig://shopping/share?productID="+encodeURIComponent(this.model.get("reference"))nVariants.attr("data-variant-reference"))):(this._appCh.trigger("toggle:share",{idEdition:this.getOprticle:ththis.model.get("reference"),idVariant:this.ui.btnVariants.attr("data-variant-reference")}),void this.sendAnalyticsEvent("ProductShare"))},toggleThumbnails:function(){this.getRegion("photos").hasView()&&this.getRegion("photos").currentView.triggerMethod("toggle:thumbnails")},openBuyLink:function(){switch(this._appCh.request("get:device","mode")){case"browser":window.open(this.model.get("link"));break;case"webview":this._appCh.request("trigger:webview:event","pugpig://shopping/buy?productID="+encodeURIComponent(this.model.get("reference")))}this.sendAnalyticsEvent("ProductShop")},toggleWishlist:function(){var e=this.model.get("reference"),n=this.model.get("isOnWishlistVariantRef")||[],o=this.ui.btnVariants.hlistAction(n.indexOf(o)===-1,e,o):this.toggleWishlistAction(!this.model.get("isOnWishlist"),e)},toggleWishlistAction:function(e,n,o){if("undefined"!=typeof o){var a=this.model.get("isOnWishlistVariantRef")||[];e?a.push(o):a.splice(a.indexOf(o),1),this.model.set("isOnWishlistVariantRef",a)}else this.model.set("isOnWishlist",e);var i=e?"wishlist-saved":"wishlist",t=this._parent.getOption("customText"),r=e?t.wishlistTextAdd"addToWishlist":"removeFromWishlist";this.changeWishlistIcon(i),this.showWishlistAlert(r),this.sendWebviewEventWishlist(g,n,o)},sendWebviewEventWishlist:function(e,n,o){if(this._appCh.request("is:device","mode","webview")!==!1){var a="pugpig://shopping/"+e+"?productID="+encodeURIComponent(n);a+="undefined"!=typeof o?"&variant="+encodeURIComponent(o):"",this._appCh.request("trigger:webview:event",a)}},showWishlistAlert:function(e){this.ui.wishlistAlert.text(e).addClass("wishlistAlert--isVisible").delay(2e3).queue(_.bind(function(){this.ui.wishlistAlert.removeClass("wishlistAlert--isVisible").dequeue()},this))},changeWishlistIcon:function(e){var n="wishlist"===e?"wishlist-saved":"wishlist";this.ui.btnWishlist.removeClass("icon-"+n).addClass("icon-"+e).find("svg use").attr("xlink:href","#icon-"+e)},onScrollDescription:function(e){this.isScrollingDescription=!0,clearTimeout(this.scro!1}.bind(this);this.scrollDescriptionTimeout=setTimeout(n,250)},onDestroy:function(){this._appCh.request("is:device",{touch:!0})&&this.ui.description.off("scroll",this.onScrollDescription)},sendAnalyticsScreenView:function(){this._appCh.trigger("analytics:hit",{type:"screenview",screenName:"/Edition/ProductView/"+this.model.get("editions")+"/"+this.model.get("reference")})},sendAnalyticsEvent:function(e){this._appCh.trigger("analytics:hit",{type:"event",eventCategohis.model.get("reference")})}})}(),KGProductThings.Views.Collections=KGProductThings.Views.Collections||{},function(){KGProductThings.Views.Collections.ProductsList=KGPugpigCore.Extensions.CompositeView.extend({name:"ProductsList",appChannelName:"KGProductThings",className:"productsViewer",template:KGProductThings.Templates.ProductsList,childView:KGProductThings.Views.Items.ProductInfo,childViewContainer:".productsCardList",childViewOptions:function(){return{idEdition:this.options.idEdition,idArticle:this.options.idArticle}},collectionEvents:{sync:"onSync"},childEvents:{"navigation:freeze":"freezeNavigation","navigation:defrost":"defrostNavigation"},ui:{navigation:".arrowStrip",arrowLeft:".js-arrow-left",arrowRight:".js-arrow-right",productStrip:".productsCardStrip"},events:{"click @ui.arrowLeft":"productNavigateAction","click @ui.arrowRight":"productNavigateAction","touchstart @ui.arrowLeft":"productNavigateAction","touchstart @ui.arrowRight":"productNavigateAction",panstart:"productNavigateAction"},initialize:function(){_.bindAll(this,"productNavigateAction"),this._subappCh.on("keyboard:event",this.productNavigateAction)},onShow:function(){this.collection.fetch({validate:!0})},onDestroy:function(){this._subappCh.off("keyboard:event")},onSync:function(){return this.triggerMethod("stop:spinner"),
this.updateArrowsState(),0===this.collection.length?void this._log("error","No products found.",this.collection.url,this._subappCh.request("get:product:configuration")):void(this.getOption("productConfig").productIDs.length>1&&this.$el.hammer({swipe:!1,drag:!1,hold:!1,release:!1,touch:!1,transform:!1}))},productNavigateAction:function(e){if(_.isFunction(e.preventDefault)&&(e.preventDefault(),e.stopPropagation()),1!==this.getOptiock"===e.type||"touchstart"===e.type){if(this._appCh.request("is:device","mode","webview")&&"touchstart"!==e.type)return;var n=$(e.target).hasClass("arrow")?$(e.target):$(e.target).parents(".arrow");if(n.hasClass("arrow-isDisabled"))return;var o=_.find(n[0].className.split(" "),function(e){return e.indexOf("js-arrow")!==-1}).substr(9);this.productNavigate(o)}else if("keydown"===e.type)this.productNavigate(e.keyIdentifier);else if("panstart"===e.type){if(e.gesture.target.className.indexOf("photoGallery__thumbstrip")>-1)return;switch(e.gesture.additionalEvent){case"panleft":this.productNavigate("right");break;case"panright":this.productNavigate("left")}}},productNavigate:function(e){if(!this.frozenNavigation){var n=this.collection.at(this.getOption("productConfig").indexToDisplay),o=this.children.findByModel(n),a=this.collection.getAdjacentProduct(this.getOption("productConfig").indexToDisplay,e);if(a!==!1&&!o.isScrollingDescription){var i=this.children.findByModel(a);o.slideOffScreen(e),i.slideIntoScreen(e),this.getOption("productConfig").indexToDisplay=a.getIndexInCollection(),this.updateArrowsState()}}},updateArrowsState:function(){this.collection.length>1&&this.ui.navigation.addClass("arrowStrip--isVisible"),this.ui.arrowLeft.removeClass("arrow-isDisabled"),this.ui.arrowRight.removeClass("arrow-isDisabled"),this.collection.isFirstIndex(this.getOption("productConfig").indexToDisplay)&&this.ui.arrowLeft.addClass("arrow-isDisabled"),this.collection.isLastIndex(this.getOption("productConfig").indexToDisplay)&&this.ui.arrowRight.addClass("arrow-isDisabled")},frozenNavigation:!1,freezeNavigation:function(){this.frozenNavigation=!0},defrostNavigation:function(){this.frozenNavigation=!1}})}(),KGProductThings.Views.Items=KGProductThings.Views.Items||{},function(){KGProductThings.Views.Items.GalleryThumb=KGPugpigCore.Extensions.ItemView.extend({name:"GalleryThumb",appChannelName:"KGProductThings",tagName:"figure",className:"photoGallery__thumbstrip__thumbnail",template:KGProductThings.Templates.GalleryThumb,events:{click:"onClick",dragstart:"onImageDragstart"},modelEvents:{"change:isAiors.FiguresLoader}},onClick:function(){this.model.set("isActive",!0)},onChangeIsActive:function(e,n){this.$el.toggleClass(this.className+"-isActive",n)},onImageDragstart:function(){return!1},getWidth:function(){return this.$el.width()}})}(),KGProductThings.Views.Collections=KGProductThings.Views.Collections||{},function(){KGProductThings.Views.Collections.GalleryThumbstrip=KGPugpigCore.Extensions.CompositeView.extend({name:"GalleryThumbstrip",appChannelName:"KGProductThings",template:KGProductThings.Templates.GalleryThumbstrip,className:"photoGallery__thumbstrip",childView:KGProductThings.Views.Items.GalleryThumb,childViewContainer:".photoGallery__thumbstrip--container",childEvents:{"image:done":"onThumbnailDone"},collectionEvents:{"change:isActive":"onChangeThumbnailIsActive"},ui:{container:".photoGallery__thumbstrip--container"},events:{panstart:"setPosition",panmove:"dragStrip",panend:"setPosition"},draggingEnabled:!1,onBeforeRender:function(){this.thumbsWaitingToLoad=this.collection.models.length},onThumbnailDone:function(){this.thumbsWaitingToLoad--,this.thumbsWaitingToLoad>0||this.onThumbnailsAreLoaded()},onThumbnailsAreLoaded:function(){this.controlDragging(),this.collection.at(0).set("isActive",!0)},onChangeThumbnailIsActive:function(e,n){if(n!==!1){var o=this.collection.without(e);_.forEach(o,function(e){e.set("isActive",!1)})}},controlDragging:function(){var e=this.ui.container.width(),n=0;this.children.each(function(e){n+=e.getWidth()}),n>e&&(this.draggingEnabled=!0,this.$el.hammer({swipe:!1,drag:!1,hold:!1,release:!1,touch:!1,transform:!1}))},setPosition:function(e){this.startPosition=this.ui.container.position().left,this.$el.toggleClass(this.className+"--dragging","panstart"===e.type)},dragStrip:function(e){if(this.stripEdgeOverflow(e.gesture.offsetDirection)){var n=4===e.gesture.offsetDirection?parseInt("-"+e.gesture.distance):e.gesture.distance,o=this.startPosition+n;this.ui.container.css({left:o+"px"})}},stripEdgeOverflow:function(e){if(8===e||16===e)return!1;var n=this.collection.where({isVisible:!0}),o=this.children.findByModel(n[0]),a=this.children.findByModel(n[n.length-1]),i={left:o.$el.offset().left,right:a.$el.offset().left+a.$el.outerWidth(!0)},t={left:this.$el.offset().left,right:this.$el.offset().left+this.$el.width()};return!(4===e&&i.right<t.right)&&!(2===e&&i.left>t.left)},onToggleVisibility:function(){this.$el.transitionClass(this.className+"--isVisible")}})}(),KGProductThings.Views.Items=KGProductThings.Views.Items||{},function(){KGProductThings.Views.Items.GalleryPhoto=KGPugpigCore.Extensions.ItemView.extend({name:"GalleryPhoto",appChannelName:"KGProductThings",tagName:"figure",className:"photoGallery__hiresPhoto",ui:{dock:".dock"},events:{"load @ui.dock":"onImageLoad","error @ui.dock":"onImageError"},modelEvents:{"change:isVisible":"onPhotoVisible"},initialize:function(){_.bindAll(this,"onImageLoad")},getTemplate:function(){return _.template('<img class="dock">')},onImageLoad:function(){this.triggerMethod("stop:spinner"),this.$el.css({backgroundImage:"url("+this.model.get("url")+")"}).addClass(this.className+"--isVisible"),this.model.set("isLoaded",!0),this.ui.dock.remove()},onImageError:function(){this._log("warn","photo:error:"+this.model.get("url"))},onPhotoVisible:function(e,n){n===!0?thss(this.className+"--isVisible"):(this.model.get("showSpinner")!==!1&&this.triggerMethod("start:spinner"),this.model.set("showSpinner",!0),this.ui.dock.one("load",this.onImageLoad),this.ui.dock.attr("src",this.model.get("url"))):n===!1&&this.$el.removeClass(this.className+"--isVisible")},onStartSpinner:function(){this.$el.addClass(this.className+"--isChanging"),this.$el.append('<div class="KGSpinner"><figure>')},onStopSpinner:function(){this.$el.removeClass(this.className+"--isChanging"),$(".KGSpinner").remove()}})}(),KGProductThings.Views.Collections=KGProductThings.Views.Collections||{},function(){KGProductThings.Views.Collections.GalleryPhotos=KGPugpigCore.Extensions.CollectionView.extend({name:"GalleryPhotos",appChannelName:"KGProductThings",template:_.template(""),className:"photoGallery__photos__list",childView:KGProductThings.Views.Items.GalleryPhoto,collectionEvents:{"change:isVisible":"onChangeVisible"},ui:{figure:".photoGallery__photos__list figure",galleryList:".photoGallery__photos__list"},events:{panstart:"disableClick"},initialize:function(){this.$el.hammer({swipe:!1,drag:!1,hold:!1,release:!1,touch:!1,transform:!1})},onRender:function(){1===this.collection.length&&this.collection.at(0).set("isVisible",!0)},onChangeVisible:function(e,n){if(n!==!1){var o=this.collection.without(e);_.forEach(o,function(e){e.set("isVisible",!1)})}},disableClick:function(){this.options.isTransitioning=!0},getImageUrl:function(e){var n=$(e).find("img").attr("src");return _.isUndefined(n)&&(n=$(e).css("background-image").replace("url(","").replace(")","")),n}})}(),KGProductThings.Views.Layouts=KGProductThings.Views.Layouts||{},function(){KGProductThings.Views.Layouts.PhotoGallery=KGPugpigCore.Extensions.LayoutView.extend({name:"PhotoGallery",appChannelName:"KGProductThings",template:KGProductThings.Templates.PhotoGallery,className:"photoGallery",ui:{figure:".photoGallery__hiresPhoto",image:".photoGallery__hiresPhoto img"},regions:{photos:".photoGallery__photos",thumbnails:".photoGallery__thumbnails"},initialize:function(){this.startCollections()},startCollections:function(){this.collections={photos:new KGProductThings.fw.Backbone.Collection(this.getOption("photos")),thumbnails:new KGProductThings.fw.Backbone.Collection(this.getOption("thumbnails"))}},onRender:function(){var e=new KGProductThings.Views.Collections.GalleryPhotos({collection:this.collections.photos});this.getRegion("photos").show(e),this.getOption("thumbnails").length>1?this.showThumbnails():this.getOption("photos").length>1&&this.collections.photos.at(0).set("isVisible",!0)},showThumbnails:function(){if(!this.getRegion("thumbnails").hasView()){var e=new KGProductThings.Views.Collections.GalleryThumbstrip({collection:this.collections.thumbnails});this.listenTo(e.collection,"change:isActive",this.onShowPhoto),this.getRegion("thumbnails").show(e)}},onToggleThumbnails:function(){this.getRegion("thumbnails").hasView()&&this.getRegion("thumbnails").currentView.triggerMethod("toggle:visibility")},onShowPhoto:function(e,n){n&&this.collections.photos.at(e.get("index")).set("isVisible",!0)},setActiveImage:function(e){this.collections.photos.at(e).set("showSpinner",!1),this.collections.thumbnails.at(e).set("isActive",!0)}})}(),KGProductThings.Views.Items=KGProductThings.Views.Items||{},function(){KGProductThings.Views.Items.ProductVariant=KGPugpigCore.Extensions.ItemView.extend({name:"ProductVariant",appChannelName:"KGProductThings",template:KGProductThings.Templates.ProductVariant,triggers:{click:"choose:variant"},onRender:function(){this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el)},serializeData:function(){var e=this.model.toJSON();return e.outOfStockClass=e.stock<=0?"outOfStock":"",e}})}(),KGProductThings.Views.Collections=KGProductThings.Views.Collections||{},function(){KGProductThings.Views.Collections.VariantsSelector=KGPugpigCore.Extensions.CompositeView.extend({name:"VariantsSelector",appChannelName:"KGProductThings",template:KGProductThings.Templates.VariantsSelector,className:"productInfo__variants__selector",childView:KGProductThings.Views.Items.ProductVariant,childViewContainer:".productInfo__variants__selector--container",onShow:function(){this.setSelectorPosition(),this.$el.transitionClass(this.className+"--isVisible"),$(window).one("resize",_.bind(this.setSelectorPosition,this)),$(window).on("resize",_.debounce(_.bind(this.setSelectorPosition,this),30))},setSelectorPosition:function(){var e=this.getOption("$callingElement")[0],n=e.getBoundingClientRect(),o=$(this.$el.children()[0]).height()+30,a=n.top-o,i=n.left;this.$el.removeClass(this.className+"--onTop "+this.className+"--onBottom"),this.$el.width(n.width),a>=0?this.$el.addClass(this.className+"--onTop").css({top:a,left:i}):this.$el.addClass(this.className+"--onBottom").css({top:n.bottom,left:i})}})}(),window.KGSearch={App:{},Models:{},Collections:{},Views:{Collections:{},Items:{},Layouts:{}},Templates:{},Modules:{},fw:{}},"undefined"!=typeof KGPugpigCore&&(KGSearch.fw=KGPugpigCore.fw),KGSearch.App=KGSearch.App||{},function(){KGSearch.App=KGPugpigCore.Extensions.Application.extend({name:"KGSearch",panelPosition:"right",initialize:function(){_.bindAll(this,"setupEditionsDataRequests","onToggle","onAppStateChange"),this.module("logger",KGPugpigCore.Modules.Logger),this.module("atomParser",KGFeedParser.Modules.AtomParser),this.module("theme",KGSearch.Modules.Theme),this.isStarted=!1,this._appCh.on("toggle:search",this.onToggle),this._appCh.on("app:state:change",this.onAppStateChange)},onBeforeStart:function(e){this.options=_.extend(this.options,e),$("#KGSearch").length||$("#KGPugpigReader").append('<div id="KGSearch" class="cleanslate">'),"undefined"!=typeof this.options.idEdition&&this._appCh.request("feed:get:editions").done(this.setupEditionsDataRequests),this.options.appContainer="#KGSearch"},onStart:function(e){this.$appContainer=$(this.getOption("appContainer")),this.addRegions({main:this.getOption("appContainer")}),this.rootView=new KGSearch.Views.AppRoot({idEdition:this.getOption("idEdition"),idArticle:this.getOption("idArticle"),searchHeader:this.options.appCustomText.search.searchPanelHeader,showSummary:this.options.appCustomText.search.showSummary,showThumbnail:this.options.appCustomText.search.showThumbnail,showTitle:this.options.appCustomText.search.showTitle,showEditionTitle:this.options.appCustomText.search.showEditionTitle,showDate:this.options.appCustomText.search.showDate,showSection:this.options.appCustomText.search.showSection,hideSearchOptions:this.options.search.hideSearchOptions,isServerSide:this.options.isServerSide}),this.getRegion("main").show(this.rootView),this.isStarted=!0,this._appCh.request("trigger:webview:event","pugpig://search/ready")},onAppStateChange:function(){this.hide()},setupEditionsDataRequests:function(e){this._subappCh.reply("get:editions",function(){return e}),this._subappCh.reply("get:edition",function(n){return e.findWhere({id:n})})},onToggle:function(e){this.isStarted!==!0?this.start(e):this.rootView.isDisplayed===!0?this.rootView.toggleDisplay(!1):this.rootView.toggleDisplay(!0,e)},hide:function(){this.isStarted&&this.rootView.toggleDisplay(!1)},stop:function(){this.isStarted=!1}})}(),this.KGSearch=this.KGSearch||{},this.KGSearch.Templates=this.KGSearch.Templates||{},this.KGSearch.Templates.AppRoot=function(e){var n,o="";_.escape,Array.prototype.join;return o+='<header class="KGSearch_header"><div class="KGSearchPanel_header"><h1 class="KGSearch_header_title">'+(null==(n=e.searchHeader)?"":n)+'</h1><button aria-label="Close Search" class="KGSearch_close js-panel-close icon icon-close"></button></div><form class="KGSearch_form"><div class="KGSearch_form_keyword-container"><div class="KGSearch_form_keyword"><div class="KGSearch_form_keywordIcon KGSearch_icon icon icon-search"></div><input type="search" class="KGSearch_form_keywordInput" name="KGSearch_form_keyword" placeholder="'+(null==(n=e.ct.searchInputPlaceholder)?"":n)+'"></div> ',e.isCrossEditionSearch&&(o+=' <div class="KGSearch_form_reset is-hidden"></div> '),o+=" </div> ",o+=e.isCrossEditionSearch?' <div class="KGSearch_form_filters"></div> ':' <div class="KGSearch_form_incEditionsToggle"><label class="KGSearch_form_incEditions"><input type="radio" name="KGSearch_form_incEditions" value="'+(null==(n=e.idEdition)?"":n)+'" data-type="currentEditionId">'+(null==(n=e.ct.thisEditionToggleLabel)?"":n)+'</label><label class="KGSearch_form_incEditions KGSearch_form_incEditions-isChecked"><input type="radio" name="KGSearch_form_incEditions" value="all" checked="checked">'+(null==(n=e.ct.allEditionsToggleLabel)?"":n)+'</label><label class="KGSearch_form_incEditions"><input type="radio" name="KGSearch_form_incEditions" data-type="customEditionId"></label></div> ',o+=' </form></header><section class="KGSearch_history KGPanel_content"></section><section class="KGSearch_results KGPanel_content"></section><div class="KGSearch_loading"><div class="KGSearch_loadingSpinner KGSpinner"><figure></figure></div></div>'},this.KGSearch.Templates.Filters=function(e){var n,o="",a=_.escape;Array.prototype.join;return""===e.keyword?(o+=" ",e.hideSearchOptions===!1&&(o+=' <div class="filter_container"><select class="sorting" name=""><option value="score">Most Relevant</option><option value="published_date">Most Recent</option></select><i class="chevron-down"></i><select class="timePeriod" name=""><option value="halfYear">Last 6 months</option><option value="year">Last 12 months</option><option value="all">Show all</option></select><i class="chevron-down"></i></div> '),o+=" ",e.filters.length>1&&(o+=' <div class="filter_container"> ',_.each(e.filters,function(e){o+='<!--\n            --><label class="filter">'+a(e.name)+" ("+a(e.resultLength)+') <input type="radio" name="filter" value="'+a(e.name)+'" style="display: none"></label><!--\n        -->'}),o+=" </div> "),o+=" "):o+=' <div class="no_editions"><p>No results for <span class="bold">"'+(null==(n=e.keyword)?"":n)+'"</span></p></div> ',o},this.KGSearch.Templates.Navbar=function(e){var n,o="";_.escape,Array.prototype.join;return e.isCrossEditionSearch||(o+=' <div class="KGSearch_navbar_loading"><div class="KGSearch_navbar_loadingSpinner KGSpinner"><figure></figure></div><p class="KGSearch_navbar_loadingMessage">Loading results...</p></div><p class="KGSearch_navbar_title">'+(null==(n=e.resultsMessage)?"":n)+"</p> "),o},this.KGSearch.Templates.Result=function(e){var n,o="";_.escape,Array.prototype.join;return o+='<!-- <div href="'+(null==(n=e.link)?"":n)+'"> --> ',e.isServerSide===!0?(o+=' <a href="'+(null==(n=e.link)?"":n)+'"> ',e.showThumbnail===!0&&(o+=' <figure class="KGFigure KGSearch_result_thumbnail"><img src="'+(null==(n=e.thumbnail)?"":n)+'"></figure> '),o+=' <div class="KGSearch_result_info"> ',e.showTitle===!0&&(o+=' <h1 class="KGSearch_result_title">'+(null==(n=e.title)?"":n)+"</h1> "),o+=" ",e.showSummary===!0&&(o+=' <p class="KGSearch_result_summary">'+(null==(n=e.summary)?"":n)+"</p> "),o+=" ",e.showDate===!0&&(o+=' <p class="KGSearch_result_summary">'+(null==(n=e.resultDateStr)?"":n)+"</p> "),o+=' <div class="KGSearch_result_metadata"> ',_.isEmpty(e.edition)||e.showEditionTitle!==!0||(o+=' <p class="KGSearch_result_editionTitle">'+(null==(n=e.edition.title)?"":n)+"</p> "),o+=" ",e.showSection===!0&&(o+=' <p class="KGSearch_result_section">'+(null==(n=e.section)?"":n)+"</p> "),o+=" </div> ",e.hasAccess===!1&&(o+=' <div class="KGSearch_result_paidLabel"><span class="icon icon-padlock-close"></span>Paid</div> '),o+=" </div></a> "):(o+=' <a role="menuitem" class="searchResult" style="cursor: pointer; text-decoration: none; position: absolute; left: 0; top: 0; display: inline-block; width: 100%; height: 100%" data-url="'+(null==(n=e.link)?"":n)+'"></a> ',e.showThumbnail===!0&&(o+=' <figure class="KGFigure KGSearch_result_thumbnail"><img src="'+(null==(n=e.thumbnail)?"":n)+'"></figure> '),o+=' <div class="KGSearch_result_info"> ',e.showTitle===!0&&(o+=' <h1 class="KGSearch_result_title">'+(null==(n=e.title)?"":n)+"</h1> "),o+=" ",e.showSummary===!0&&(o+=' <p class="KGSearch_result_summary">'+(null==(n=e.summary)?"":n)+"</p> "),o+=" ",e.showDate===!0&&(o+=' <p class="KGSearch_result_summary">'+(null==(n=e.resultDateStr)?"":n)+"</p> "),o+=' <div class="KGSearch_result_metadata"> ',_.isEmpty(e.edition)||e.showEditionTitle!==!0||(o+=' <p class="KGSearch_result_editionTitle">'+(null==(n=e.edition.title)?"":n)+"</p> "),o+=" ",e.showSection===!0&&(o+=' <p class="KGSearch_result_section">'+(null==(n=e.section)?"":n)+"</p> "),o+=" </div> ",e.hasAccess===!1&&(o+=' <div class="KGSearch_result_paidLabel"><span class="icon icon-padlock-close"></span>Paid</div> '),o+=" </div> "),o},this.KGSearch.Templates.SearchFeed=function(e){var n="";_.escape;return n+='<nav class="KGSearch_navbar"></nav><article class="KGSearch_resultsList"></article>'},this.KGSearch.Templates.SearchHistory=function(e){var n,o="";_.escape;return o+=null==(n=e.term)?"":n},KGSearch.Modules=KGSearch.Modules||{},function(){KGSearch.Modules.Theme=KGPugpigCore.Modules.Theme.extend({appChannelName:"KGSearch",cssNamespace:"#KGSearch.cleanslate",ssName:"KGSearch-css-theme",themePrefix:"Document_SearchControl",keys:{text:["HeaderTitle","Title","InputField","NavbarTitle","Result_Title","Result_Summary","Result_SummaryKeyword","Result_EditionTitle","Document_SearchControl_Result_Section"],texture:["BackgroundColor","InputField_OutlineColor","Navbar_BackgroundColor","Navbar_BorderColor","Navbar_BorderStyle","Navbar_BorderWidth","Result_BackgroundColor","Result_BackgroundHoverColor","Result_BorderWidth","Result_BorderColor","Result_BorderStyle"],layout:[]},textElements:{".KGSearch_header_title":"Document_SearchControl_HeaderTitle",".KGSearch_form_incEditions":"Document_SearchControl_Title",".KGSearch_form_keywordInput":"Document_SearchControl_InputField",".KGSearch_navbar_title":"Document_SearchControl_NavbarTitle",".KGSearch_navbar_loadingMessage":"Document_SearchControl_NavbarTitle",".KGSearch_result_title":"Document_SearchControl_Result_Title",".KGSearch_result_summary":"Document_SearchControl_Result_Summary",".KGSearch_result_summary em":"Document_SearchControl_Result_SummaryKeyword",".KGSearch_result_editionTitle":"Document_SearchControl_Result_EditionTitle",".KGSearch_result_section":"Document_SearchControl_Result_Section"},layoutElements:{".KGSearch":{backgroundColor:"Document_SearchControl_Result_BackgroundColor"},".KGSearch_header":{backgroundColor:"Document_SearchControl_BackgroundColor"},".KGSearch_form_incEditions-isChecked":{color:"Document_SearchControl_Title_SelectionTextColor",borderBottomColor:"Document_SearchControl_Title_SelectionTextColor"},".KGSearch_form_keyword input:focus":{borderColor:"Document_SearchControl_InputField_OutlineColor"},".KGSearch_form_keyword input":{borderColor:"Document_SearchControl_BackgroundColor"},".KGSearch_navbar":{backgroundColor:"Document_SearchControl_Navbar_BackgroundColor",borderBottomColor:"Document_SearchControl_Navbar_BorderColor",borderBottomStyle:"Document_SearchControl_Navbar_BorderStyle",borderBottomWidth:"Document_SearchControl_Navbar_BorderWidth"},".KGSearch_results":{backgroundColor:"Document_SearchControl_Result_BackgroundColor"},".KGSearch_resultsPage":{backgroundColor:"Document_SearchControl_Result_BackgroundColor"},".KGSearch_resultsPage .KGSearch_result:hover":{backgroundColor:"Document_SearchControl_Result_BackgroundHoverColor"},".KGSearch_result":{borderBottomWidth:"Document_SearchControl_Result_BorderWidth",borderBottomColor:"Document_SearchControl_Result_BorderColor",borderBottomStyle:"Document_SearchControl_Result_BorderStyle"}}})}(),KGSearch.Models=KGSearch.Models||{},function(){KGSearch.Models.SearchFeed=KGPugpigCore.Extensions.Model.extend({name:"SearchFeed",appChannelName:"KGSearch",incEditions:"all",keyword:void 0,resultStart:0,pageSize:50,categoryFilterCache:void 0,defaults:function(){return{numResults:void 0,edition:void 0,resultStart:0,pageSize:50,results:[]}},regex:{searchEdition:/\{editionId\}/,searchAll:/\/all\//,searchOptions:/\{editionId\}|\/all\//,summaryKeyword:/\*!\*(.*?)\*!\*/gi,nonBreakingSpace:/\u00A0/g,multipleSpaces:/\s\s+/g},initialize:function(e){_.bindAll(this,"parseResult"),this.options=e;var n=this._appCh.request("config:key","search");if(this.filterFacet=void 0,_.isUndefined(n)||_.isUndefined(n.filterFacet)||(this.filterFacet=n.filterFacet),e.isCrossEditionSearch&&"undefined"==typeof e.idEdition){var o=this._appCh.request("config:key","feed"),a=o.split("/endpoint.xml").length<2?window.location.origin:o.split("/endpoint.xml")[0];this.options.searchEndpointUrl=encodeURI(a+"/search/all/{query}"),$("body").addClass("isCrossEditionSearch"),this._appCh.trigger("app:ready")}else{var i=this._subappCh.request("get:edition",e.idEdition);this.options.searchEndpointUrl=i.get("crossEditionSearchLink"),this.incEditions=e.idEdition}this.options.draft="preview"===this._appCh.request("config:key","mode")},urlRoot:function(){var e=this.options.searchEndpointUrl;return this.regex.searchOptions.test(e)?this.regex.searchEdition.test(e)?e.replace(this.regex.searchEdition,this.editions):this.regex.searchAll.test(e)?e.replace(this.regex.searchAll,"/"+this.editions+"/"):void 0:(this._log("error","Endpoint URL not recognized: "+e),!1)},query:function(e){e&&(this.resultStart+=this.pageSize),console.info("%cRunning search","color:purple",this),console.info("%cParam: Keyword","color:green",this.keyword),console.info("%cParam: Editions","color:green",this.incEditions),console.info("%cParam: Sort","color:green",this.sorting),console.info("%cParam: Start Date","color:green",this.startDate),console.info("%cParam: Result Start","color:green",this.cParam: Page Size","color:green",this.pageSize),console.info("%cParam: Filters","color:green",this.selectedFilter);var n=this.urlRoot();if(n){var o=this._appCh.request("config:key","features").crossSearch,a="";o&&!_.isUndefined(this.startDate)&&(a="&sd="+this.startDate),this.url=n.replace(encodeURI("{query}"),encodeURIComponent(this.keyword))+"?size="+this.pageSize+"&start="+this.resultStart+a,this.options.draft===!0&&(this.url+="&draft=true"),this.sorting&&(this.url+="&sort="+this.sorting),_.isUndefined(this.selectedFilter)||"All"===this.selectedFilter||_.isUndefined(this.filterFacet)||(this.url+="&cats[0]="+encodeURIComponent(this.filterFacet+"|"+this.selectedFilter)),this.fetch({dataType:"xml",reset:!0,cache:!0})}},parse:function(e){var n=this._subappCh.request("atom:parse",{xmlSource:e,xmlBaseHref:this.urlRoot()}),o=parseInt(n._getCategoryTerm("http://schema.pugpig.com/search/num_results"),10),a=this.getFilters(n._categories,o),i=_.extend(this.defaults(),{incEditions:this.incEditions,resultStart:parseInt(n._getCategoryTerm("http://schema.pugpig.com/search/result_start"),10),pageSize:parseInt(n._getCategoryTerm("http://schema.pugpig.com/search/page_size"),10),numResults:o,numEditions:n._countCategory("^http://schema.pugpig.com/facet/edition_id"),results:n._entries.map(this.parseResult),filters:a});return i.resultsMessage=this.buildResultsMessage(i),i},getFilters:function(e,n){if(_.isUndefined(this.filterFacet))return[];if(!t_.filter(e,function(e){return e.scheme.indexOf("|"+o+"|")!==-1}),i=[{scheme:o,name:"All",resultLength:n}];a.forEach(function(e){var n=e.scheme.split("|");n[2].length>0&&i.length<6&&i.push({scheme:o,name:n[2],resultLength:parseInt(e.term,10)})}),this.categoryFilterCache=i}return this.categoryFilterCache},parseResult:function(e){var n=_.isString(e.summary)?e.summary:"";return n=n.replace(this.regex.summaryKeyword,"<em>$1</em>"),n=n.replace(this.regex.nonBreakingSpace," "),n=n.replace(this.regex.multipleSpaces," "),_.extend(e,{id:e.edition+"/"+e.id,idArticle:e.id,isServerSide:this.options.isServerSide,showSummary:this.options.showSummary,showThumbnail:this.options.showThumbnail,showTitle:this.options.showTitle,showEditionTitle:this.options.showEditionTitle,showDate:this.options.showDate,showSection:this.options.showSection,summary:n.trim(),link:e._getLinkHref("alternate","text/html")})},isThereMoreResults:function(){return this.get("resultStart")+this.get("pageSize")<this.get("numResults")},buildResultsMessage:function(e){var n="";return n=_.isUndefined(e.numResults)?"":_.isEmpty(e.results)?"No results found.":"Found "+e.numResults+" results"}})}(),KGSearch.Models=KGSearch.Models||{},function(){KGSearch.Models.Filter=KGPugpigCore.Extensions.Model.extend({name:"Filter",appChannelName:"KGSearch",initialize:function(){_.bindAll(this,"getTimePeriodFilter"),this.set({timePeriod:"all",sorting:"score",filters:[{name:"All",resultsLength:0}],edition:"All"}),this._subappCh.reply("get:time:period",this.getTimePeriodFilter)},getTimePeriodFilter:function(){return this.get("timePeriod")}})}(),KGSearch.Models=KGSearch.Models||{},function(){KGSearch.Models.Result=KGFeedParser.Models.Article.extend({name:"Result",appChannelName:"KGSearch",idAttribute:"link",initialize:function(){_.bindAll(this,"setAccess"),this.set("section",this.getCategoryTerm("http://schema.pugpig.com/section")),this.set("thumbnail",this.getLinkHref("thumbnail")),this.getEditionInfo().getResultDate().setAccess()},getEditionInfo:function(){if(_.isUndefined(this.get("edition")))return this;var e=this._subappCh.request("get:edition",this.get("edition"));if(!_.isUndefined(e)){this.set({isPaid:e.get("isPaid")});var n=_.bind(e.get("_getLinkHref"),e.toJSON());this.set("edition",{id:e.get("id"),title:e.get("title"),cover:n("http://opds-spec.org/image")})}return this},getResultDate:function(){var e=this.get("dcterms:issued")||this.get("published")||this.get("updated"),n=new Date(e);return this.set("resultDate",e),this.set("resultDateStr",n.toString().slice(4,15)),this},setAccess:function(){var e=this._appCh.request("user:is:loggedin"),n=this.get("isProtected")||this.get("isPaid")?e:!this.get("isProtected")&&!this.get("isPaid");this.set("hasAccess",n)}})}(),KGSearch.Collections=KGSearch.Collections||{},function(){KGSearch.Collections.Results=KGPugpigCore.Extensions.Collection.extend({name:"Results",appChannelName:"KGSearch",model:KGSearch.Models.Result,initialize:function(){}})}(),KGSearch.Views=KGSearch.Views||{},function(){KGSearch.Views.AppRoot=KGPugpigCore.Extensions.PanelAppRoot.extend({name:"AppRoot",appChannelName:"KGSearch",tagName:"main",className:"KGSearch",template:KGSearch.Templates.AppRoot,panelPosition:"right",modalref:"search",ui:{searchForm:".KGSearch_form",keyword:'input[name="KGSearch_form_keyword"]',incEditions:'input[name="KGSearch_form_incEditions"]',incEditionsCurrent:'input[data-type="currentEditionId"]',header:".KGSearchPanel_header",headerContainer:".KGSearch_header",incEditionsLabels:".KGSearch_form_incEditions",navBar:".KGSearch_navbar",spinner:".KGSearch_loading",clear:".KGSearch_form_reset",articleViewer:".KGSearch_viewer",articleViewerIframe:".KGSearch_viewer iframe",articleViewerClose:".KGSearch_viewer .KGSearch_previous",articleViewerTitle:".KGSearch_viewer p",searchResult:".searchResult"},themePickerElements:["header","searchForm","navBar"],events:{"change @ui.incEditions":"onChangeIncEditions",submit:"onSubmit","keydown @ui.keyword":"onKeyDownKeyword","focus @ui.keyword":"onSetView","click @ui.clear":"onClearSearch","click @ui.articleViewerClose":"onCloseViewedArticle"},regions:{results:".KGSearch_results",filters:".KGSearch_form_filters",history:".KGSearch_history"},onInitialize:function(){if(_.bindAll(this,"onFetch"),this.appCache=this._appCh.request("app:cache"),this.isCrossEditionSearch=this._appCh.request("config:key","features").crossSearch,this.searchFeedModel=new KGSearch.Models.SearchFeed({idEdition:this.getOptionitionSearch:this.isCrossEditionSearch,showSummary:this.options.showSummary,showThumbnail:this.options.showThumbnail,showTitle:this.options.showTitle,showEditionTitle:this.options.showEditionTitle,showDate:this.options.showDate,showSection:this.options.showSection,isServerSide:this.options.isServerSide}),this.searchFeedView=new KGSearch.Views.Layouts.SearchFeed({model:this.searchFeedModel,reading:{idEdition:this.gon("idArticle")}}),this.isCrossEditionSearch){this.filterModel=new KGSearch.Models.Filter,this.filterView=new KGSearch.Views.Layouts.Filter({model:this.filterModel}),this.filterModel.set("hideSearchOptions",this.options.hideSearchOptions),this.listenTo(this.searchFeedModel,"sync",this.onShowFilters),this.basilStore=new KGPugpigCore.fw.Basil({namespace:"pugpig"});var e=_.uniq(this.basilStore.get("SEARCH_HISTORY")),n=_.map(e,function(e){return{term:e}});this.searchHistoryCollection=new KGPugpigCore.fw.Backbone.Collection(n),this.searchHistoryView=new KGSearch.Views.Collections.SearchHistoryTerms({collection:this.searchHistoryCollection}),this.listenTo(this.searchHistoryView,"term:click",this.onClickHistory)}this.listenTo(this.filterView,"filter:searchquery:changed",this.onChangeSearchFilters),this._appCh.request("is:device",{os:"iOS",osVersion:"^7",browser:"Safari"})&&$(window).on("orientationchange",_.bind(function(){this.ui.keyword.blur()},this))},onShowFilters:function(e){this.filterModel.set("filters",e.get("filters")),this.filterRendered!==!0&&(this.getRegion("filters").show(this.filterView),this.filterRendered=!0),this.ui.spinner.removeClass("KGSearch_loading-isVisible")},serializeData:function(){return{idEdition:this.getOption("idEdition"),ct:this._appCh.request("custom:text","search"),isCrossEditionSearch:this.isCrossEditionSearch,searchHeader:this.options.searchHeader}},onShow:function(){this.getRegion("results").show(this.searchFeedView),this.isCrossEditionSearch&&this.getRegion("history").show(this.searchHistoryView)},onChangeIncEditions:function(e){this.onResetIncEditions();var n=$(e.target);n.attr("checked",!0).parents(".KGSearch_form_incEditions").addClass("KGSearch_form_incEditions-isChecked"),this.ui.searchForm.submit()},onSubmit:function(e){e.preventDefault(),this.ui.keyword.blur();
var n=this.ui.keyword.val();_.isEmpty(n)||this.searchTerm(n)},onClickHistory:function(e){this.searchTerm(e.model.get("term"))},searchTerm:function(e){if(this.isCrossEditionSearch){this.getRegion("history").reset();var n=this.basilStore.get("SEARCH_HISTORY");if(null===n)n=[e];else{var o=n.indexOf(e);o!=-1&&n.splice(o,1),n.unshift(e),n.splice(5)}this.basilStore.set("SEARCH_HISTORY",n)}if(this.searchFeedModel.keyword=e,this.searchFeedModel.categoryFilterCache=void 0,this.searchFeedModel.selectedFilter=void 0,this.searchFeedModel.resultStart=0,this.searchFeedModel.timePeriod="all",this.searchFeedModel.sort="score",this.sea.length>0?this.ui.incEditions.filter("[checked]").val():"all",_.isUndefined(this.filterModel)||this.filterModel.unset("selectedFilter"),this.isCrossEditionSearch){this.ui.spinner.addClass("KGSearch_loading-isVisible");var a=this._subappCh.request("get:time:period");this.searchFeedModel.startDate=this.getStartDate(a),this.searchFeedModel.query()}else this.searchFeedModel.query();this.sendAnalyticsEvent("SearchPerformed",e)},onChangeSearchFilters:function(e){console.log("onChangeSearchFilters",e),this.ui.spinner.addClass("KGSearch_loading-isVisible"),this.searchFeedModel.startDate=this.getStartDate(e.get("timePeriod")),this.searchFeedModel.sorting=e.get("sorting"),this.searchFeedModel.resultStart=e.get("resultStart"),this.searchFeedModel.selectedFilter=e.get("selectedFilter"),e.get("resetFilterCache")&&(this.searchFeedModel.categoryFilterCache=void 0),this.searchFeedModel.query()},getStartDate:function(e){var n,o=new Date;switch(e){case"latest":break;case"year":o.setFullYear(o.getFullYear()-1),n=o.toISOString();break;case"halfYear":o.setMonth(o.getMonth()-6),n=o.toISOString()}return n},onClearSearch:function(){this.ui.keyword.val(""),this.ui.clear.addClass("is-hidden")},fetchAndDisplayArticle:function(){var e={url:this.url,success:this.onFetch};$.ajax(e)},onFetch:function(e){var n=document.implementation.createHTMLDocument("html");n.documentElement.innerHTML=e;for(var o=n.querySelectorAll("a"),a=0;a<o.length;++a)o[a].href.indexOf(window.location.origin)===-1&&(o[a].target="_blank");var i=n.getElementsByTagName("head")[0],t=i.getElementsByTagName("base")[0];if("undefined"==typeof t){var r=n.createElement("base");r.setAttribute("href",this.url),i.insertBefore(r,i.firstChild)}var g=this.ui.articleViewerIframe[0];g.contentWindow.document.open(),g.contentWindow.document.write("<!DOCTYPE html>"),g.contentWindow.document.write(n.documentElement.outerHTML),g.contentWindow.document.close()},onCloseViewedArticle:function(){this.ui.articleViewer.removeClass("isVisible"),this.ui.articleViewerIframe.attr("src","")},onResetIncEditions:function(){this.ui.incEditionsLabels.removeClass("KGSearch_form_incEditions-isChecked"),this.ui.incEditions.removeAttr("checked")},onKeyDownKeyword:function(e){27===e.keyCode&&this._appCh.trigger("keyboard:event",e),""===this.ui.keyword.val()?this.ui.clear.addClass("is-hidden"):this.ui.clear.removeClass("is-hidden")},onToggleDisplay:function(e,n){e===!0&&(this._appCh.request("is:device",{engine:"webkit"})===!1&&this.ui.keyword.focus(),"undefined"!=typeof n&&(this.ui.incEditionsCurrent.val(n.idEdition),this.searchFeedView.setCurr,this.searchFeedView.resultsCollection.models.forEach(function(e){e.setAccess()}))},onSetView:function(){this._appCh.request("is:device",{os:"iOS",osVersion:"^7",browser:"Safari"})&&window.scroll(0,0),this.$el.scrollTop()>0&&this.$el.scrollTop(0)},sendAnalyticsEvent:function(e,n){var o={type:"event",eventCategory:"/Edition/PageView",eventAction:e};_.isUndefined(n)||(o.eventLabel=n),this._appCh.trigger("analytics:hit",o)}})}(),KGSearch.Views.Items=KGSearch.Views.Items||{},function(){KGSearch.Views.Items.Result=KGPugpigCore.Extensions.ItemView.extend({name:"Result",appChannelName:"KGSearch",template:KGSearch.Templates.Result,tagName:"li",className:"KGSearch_result",ui:{badgeIsCurrent:".KGSearch_result-isCurrent",resultTitle:".KGSearch_result_title",resultSummary:".KGSearch_result_summary",editionTitle:".KGSearch_result_editionTitle",section:".KGSearch_result_section",searchResult:".searchResult"},events:{"click @ui.searchResult":"onResultClick"},onResultClick:function(e){var n={idEdition:this.options.model.get("edition").id,idArticle:this.options.model.get("idArticle"),urlArticle:this.options.model.get("link"),urlAnchorArticle:this.options.model.get("link").split("#")[1]};this._appCh.trigger("hide:presentable","search");var o=this;this._appCh.request("feed:get:article",n).then(function(e){o._appCh.trigger("app:set:state",n)})},themePickerElements:["resultTitle","resultSummary","editionTitle","section"],behaviors:{FiguresLoader:{behaviorClass:KGPugpigCore.Behaviors.FiguresLoader}},modelEvents:{"change:hasAccess":"render"},setCurrentArticle:function(){this.$el.append('<div class="KGSearch_result-isCurrent corner-ribbon bottom-left shadow">reading'),this.ui.badgeIsCurrent=this.$el.find(".KGSearch_result-isCurrent")},resetCurrentArticle:function(){this.ui.badgeIsCurrent.remove()}})}(),KGSearch.Views.Items=KGSearch.Views.Items||{},function(){KGSearch.Views.Items.SearchHistoryTerm=KGPugpigCore.Extensions.ItemView.extend({name:"SearchHistoryTerm",appChannelName:"KGSearch",template:KGSearch.Templates.SearchHistory,tagName:"li",className:"KGSearch_search-history-term",triggers:{click:"click"}})}(),KGSearch.Views.Collections=KGSearch.Views.Collections||{},function(){KGSearch.Views.Collections.Results=KGPugpigCore.Extensions.CollectionView.extend({name:"Results",appChannelName:"KGSearch",tagName:"ul",className:"KGSearch_resultsPage",childView:KGSearch.Views.Items.Result,childViewEventPrefix:"result",reorderOnSort:!0,attributes:function(){return{role:"menu"}},childViewOptions:function(){return{reading:this.options.reading}},collectionEvents:{reset:"onResetCollection"},initialize:function(){},onRequestCollection:function(){this.$el.attr("aria-hidden","false"),this.$el.focus(),this.$el.attr("tabindex","-1"),this.$el.addClass("KGSearch_resultsPage-isReset")},onResetCollection:function(){this.$el.transitionClass("KGSearch_resultsPage-isReset")}})}(),KGSearch.Views.Collections=KGSearch.Views.Collections||{},function(){KGSearch.Views.Collections.SearchHistoryTerms=KGPugpigCore.Extensions.CollectionView.extend({name:"SearchHistoryTerms",appChannelName:"KGSearch",tagName:"ul",className:"KGSearch_search-history",childView:KGSearch.Views.Items.SearchHistoryTerm,childViewEventPrefix:"term"})}(),KGSearch.Views.Items=KGSearch.Views.Items||{},function(){KGSearch.Views.Layouts.Filter=KGPugpigCore.Extensions.LayoutView.extend({name:"Filters",appChannelName:"KGSearch",template:KGSearch.Templates.Filters,ui:{sorting:".sorting",timePeriod:".timePeriod",filter:".filter"},events:{"change @ui.sorting":"onChangeSorting","change @ui.timePeriod":"onChangeTimePeriod","change @ui.filter":"onChangeFilter"},modelEvents:{change:"render"},initialize:function(){_.bindAll(this,"noResultsFound","resultsFound"),this.keyword="",this._subappCh.on("no:results:found",this.noResultsFound),this._subappCh.on("results:found",this.resultsFound)},onRender:function(){this.ui.filter.removeClass("filter-isChecked");var e=_.findIndex(this.model.get("filters"),function(e){return e.name===this.model.get("selectedFilter")},this);e===-1&&(e=0),"undefined"!=typeof this.ui.filter[e]&&this.ui.filter[e].classList.add("filter-isChecked"),this.ui.timePeriod.val(this.model.get("timePeriod")),this.ui.sorting.val(this.model.get("sorting"))},noResultsFound:function(e){this.model.set("keyword",e)},resultsFound:function(){""!==this.model.get("keyword")&&this.model.set("keyword","")},onChangeSorting:function(e){this.model.set("resultStart",0),this.model.unset("resetFilterCache"),this.ui.sorting.val($(e.target).val()),this.model.set("sorting",this.ui.sorting.val()),this.model.hasChanged("sorting")&&this.trigger("filter:searchquery:changed",this.model)},onChangeTimePeriod:function(e){this.model.set("resultStart",0),this.model.set("resetFilterCache",!0),this.model.unset("selectedFilter"),this.ui.timePeriod.val($(e.target).val()),this.model.set("timePeriod",this.ui.timePeriod.val()),this.model.hasChanged("timePeriod")&&this.trigger("filter:searchquery:changed",this.model)},onChangeFilter:function(e){this.model.set("resultStart",0),this.model.unset("resetFilterCache"),this.model.set("selectedFilter",$(e.target).val()),this.model.hasChanged("selectedFilter")&&this.trigger("filter:searchquery:changed",this.model)}})}(),KGSearch.Views.Layouts=KGSearch.Views.Layouts||{},function(){KGSearch.Views.Layouts.Navbar=KGPugpigCore.Extensions.ItemView.extend({name:"SearchFeedNavbar",appChannelName:"KGSearch",template:KGSearch.Templates.Navbar,ui:{btnArrows:".KGSearch_navbar_arrows",loading:".KGSearch_navbar_loading",title:".KGSearch_navbar_title"},modelEvents:{sync:"render"},startLoadingState:function(){this.ui.title.text(""),this.ui.loading.toggleClass("KGSearch_navbar_loading-isVisible")}})}(),KGSearch.Views.Layouts=KGSearch.Views.Layouts||{},function(){KGSearch.Views.Layouts.SearchFeed=KGPugpigCore.Extensions.LayoutView.extend({name:"SearchFeed",appChannelName:"KGSearch",tagName:"article",className:"KGSearch_resultsFeed",template:KGSearch.Templates.SearchFeed,regions:{navbar:".KGSearch_navbar",results:".KGSearch_resultsList"},ui:{navbar:".KGSearch_navbar",resultsList:".KGSearch_resultsList"},events:{"scroll @ui.resultsList":"onScroll","click .KGSearch_navbar":"toggle"},childEvents:{render:"onResultsCollectionRender"},modelEvents:{request:"onRequestSearchFeed",sync:"onSyncSearchFeed"},keyword:void 0,incEditions:"all",initialize:function(e){_.bindAll(this,"onScroll"),this.isScrolling=!1,this.options=e,this.resultsCollection=new KGSearch.Collections.Results,this.resultsView=new KGSearch.Views.Collections.Results({collection:this.resultsCollection,reading:this.getOption("reading")}),this.navbarView=new KGSearch.Views.Layouts.Navbar({model:this.model,isCrossEditionSearch:this._appCh.request("config:key","features").crossSearch})},onBeforeShow:function(){this.getRegion("results").show(this.resultsView),this.getRegion("navbar").show(this.navbarView)},onRender:function(){this.ui.resultsList.scroll(this.onScroll)},onResultsCollectionRender:function(){this.resultsCollection.models.length>0&&this.setCurrentArticle(this.getOption("reading")),this.resultsListClientRect=this.ui.resultsList[0].getBoundingClientRect()},setCurrentArticle:function(e){var n=this.resultsCollection.findWhere({idEdition:e.idEdition,idArticle:e.idArticle});if(this.resultsView.children.call("resetCurrentArticle"),"undefined"!=typeof n){var o=this.resultsView.children.findByModel(n);"undefined"!=typeof o&&o.setCurrentArticle()}},onScroll:function(e){if("undefined"!=typeof this.resultsListClientRect){var n=e.target.scrollTop+this.resultsListClientRect.height;return n>=e.target.scrollHeight-800?void(this.model.isThereMoreResults()&&this.isFetching!==!0&&(this.isFetching=!0,this.model.query(!0))):0===e.target.scrollTop?(this.$el.removeClass("KGSearch_resultsFeed-isScrolling"),void(this.isScrolling=!1)):void(e.target.scrollTop>0&&this.isScrolling===!1&&(this.$el.addClass("KGSearch_resultsFeed-isScrolling"),this.isScrolling=!0))}},serializeData:function(){var e=this.model.toJSON();return e.incEditions=this.getOption("incEditions"),e},onRequestSearchFeed:function(e){this.navbarView.startLoadingState(),e.keyword===this.keyword&&e.incEditions===this.incEditions&&0!==e.resultStart||this.resultsView.onRequestCollection()},onSyncSearchFeed:function(e){this.options.incEditions=e.incEditions,this.isFetching=!1,e.keyword!==this.keyword||e.incEditions!==this.incEditions||0===e.resultStart?(this.resultsCollection.reset(e.get("results"),{silent:!0}),0===e.get("numResults")?this._subappCh.trigger("no:results:found",e.keyword):this._subappCh.trigger("results:found"),this.resultsCollection.trigger("reset")):this.resultsCollection.add(e.get("results")),this.keyword=e.keyword,this.incEditions=e.incEditions}})}(),window.KGSettings={App:{},Models:{},Collections:{},Views:{Collections:{},Items:{},Layouts:{}},Templates:{},Modules:{},fw:{}},"undefined"!=typeof KGPugpigCore&&(KGSettings.fw=KGPugpigCore.fw),KGSettings.App=KGSettings.App||{},function(){KGSettings.App=KGPugpigCore.Extensions.Application.extend({name:"KGSettings",initialize:function(){_.bindAll(this,"onToggle"),this.module("logger",KGPugpigCore.Modules.Logger),this.module("theme",KGSettings.Modules.Theme),this.isStarted=!1,this._appCh.on("toggle:settings",this.onToggle)},onBeforeStart:function(){this.options=this.options.settings||this.options,0===$("#KGSettings").length&&$("#KGPugpigReader").append('<a id="KGSettings" tabindex="0" class="cleanslate">'),this.$el=$("#KGPugpigReader").find("#KGSettings")},onStaKGSettings.Views.AppRoot({customText:this.options.customText,tabs:this.options.tabs,settingsHeader:this.options.customText.settingsPanelHeader}),this.getRegion("main").show(this.rootView),this.isStarted=!0},onToggle:function(e){this.isStarted!==!0?this.start(e):this.rootView.isDisplayed===!0?this.rootView.toggleDisplay(!1):this.rootView.toggleDisplay(!0,e)},hide:function(){this.Started=!1},onDestroy:function(){this.isStarted&&(this.isStarted=!1,this.removeRegion("main"))}})}(),this.KGSettings=this.KGSettings||{},this.KGSettings.Templates=this.KGSettings.Templates||{},this.KGSettings.Templates.AppRoot=function(e){var n,o="";_.escape;return o+='<header class="KGSettings_header KGPanel_content"><h1 class="KGSettings_header_title">'+(null==(n=e.settingsHeader)?"":n)+'</h1><button aria-label="Close Settings" class="KGSettings_close js-panel-close icon icon-close"></button></header><div class="KGSettings_body content KGPanel_content" role="menu"><a class="KGSettings_generalRegion" aria-expanded="true"></a> <a class="KGSettings_tabsRegion"></a> <a class="KGSettings_privacyRegion"></a></div>'},this.KGSettings.Templates.General=function(e){var n,o="";_.escape,Array.prototype.join;return o+='<header class="KGSettings_tabHeader"><h1 class="KGSettings_tabLabel js-tab-label" aria-expanded="true" tabindex="0" role="menuitem">'+(null==(n=e.generalTabHeader)?"":n)+'<div class="icon icon-forward"></div></h1></header><div class="KGSettings_tabContent" tabindex="0"><div class="KGSettings_general_fontResize KGSettings_general_tab"><label>'+(null==(n=e.textResizeLabel)?"":n)+'</label><div class="KGSettings_font_resize_icons KGSettings_general_tab_wrapper"> ',e.textResizeButtons.forEach(functi)?"":n)+'" data-index="'+(null==(n=i)?"":n)+'" class="js-fontresize icon icon-font-resize-'+(null==(n=a.name)?"":n)+" "+(null==(n=a.isActiveClass)?"":n)+'"></button> '}),o+=' </div></div><div class="KGSettings_general_nightmode KGSettings_general_tab"> ',e.hasNightMode&&(o+=" <label>"+(null==(n=e.nightModeLabel)?"":n)+'</label><div class="KGSettings_general_tab_wrapper"><div class="onoffswitch KGSettings_tools_nightmode-switch js-nightmode"> ',o+=e.nightModeChecked?' <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="nightmode-switch" checked="checked"> ':' <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="nightmode-switch"> ',o+=' <label class="onoffswitch-label" for="nightmode-switch"></label></div></div> '),o+=' </div><div class="KGStabContent">'+(null==(n=e.feedbackContent)?"":n)+'</div></div><p class="KGSettings_general_appVersion" aria-hidden="true" data-version="'+(null==(n=e.version)?"":n)+'">Version '+(null==(n=e.version)?"":n)+"</p></div>"},this.KGSettings.Templates.Privacy=function(e){var n,o="";_.escape,Array.prototype.join;return o+='<header class="KGSettings_tabHeader"><h1 class="KGSettings_tabLabel js-tab-label" aria-expanded="false" tabindex="0" role="menuitem">'+(null==(n=e.privacyTabHeader)?"":n)+'<div class="icon icon-forward"></div></h1></header><div role="menu" class="KGSettings_tabContent" tabindex="0"> ',e.hasAnalytics&&(o+=' <div class="KGSettings_tools_analyticsTracking KGSettings_tools_tab"><label>'+(null==(n=e.analyticsTrackingLabel)?"":n)+'</label><div class="KGSettings_general_tab_wrapper"><div class="onoffswitch KGSettings_tools_analyticsTracking-switch js-analytics"> ',o+=e.analyticsTrackingChecked?' <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="analytics-switch" checked="checked"> ':' <input type="checkbox" name="onoffswitch" class="onoffswitch-checkbox" id="analytics-switch"> ',o+=' <label class="onoffswitch-label" for="analytics-switch"></label></div></div></div><p>'+(null==(n=e.analyticsTrackingContent)?"":n)+"</p> "),o+=' <div class="KGSettings__privacy"><label>'+(null==(n=e.privacyLabel)?"":n)+"</label><p>"+(null==(n=e.privacyContent)?"":n)+"</p></div></div>"},this.KGSettings.Templates.Tab=function(e){var n,o="";_.escape;return o+='<header class="KGSettings_tabHeader"><h1 class="KGSettings_tabLabel" tabindex="0" aria-expanded="false" role="menuitem">'+(null==(n=e.label)?"":n)+'<div class="icon icon-forward"></div></h1></header><div class="KGSettings_tabContent" tabindex="0">'+(null==(n=e.content)?"":n)+"</div>"},KGSettings.Modules=KGSettings.Modules||{},function(){KGSettings.Modules.Theme=KGPugpigCore.Modules.Theme.extend({appChannelName:"KGSettings",cssNamespace:"#KGSettings.cleanslate",ssName:"KGSettings-css-theme",themePrefix:"Settings",keys:{text:["HeaderTitle","TabLabel","TabContent","TabContentLink"],texture:["BackgroundColor","Body_BackgroundColor","SegmentedControl_SelectionColor"],layout:[]},textElements:{".KGSettings_header_title":"Settings_HeaderTitle",".KGSettings_tabLabel":"Settings_TabLabel",".KGSettings_tabContent":"Settings_TabContent",".KGSettings_tabContent a":"Settings_TabContentLink"},layoutElements:{".KGSettings_header":{backgroundColor:"Settings_BackgroundColor"},".KGSettings_body":{backgroundColor:"Settings_Body_BackgroundColor"},".KGSettings_general_fontResize .icon.isActive":{fill:"Settings_SegmentedControl_SelectionColor"},".onoffswitch-label":{backgroundColor:"Settings_OnOffSwitch_InactiveBackgroundColor",borderColor:"Settings_OnOffSwitch_BorderColor"},".onoffswitch-label:before":{backgroundColor:"Settings_OnOffSwitch_InactiveBackgroundColor",borderColor:"Settings_OnOffSwitch_BorderColor"},".onoffswitch-checkbox:checked + .onoffswitch-label:before":{borderColor:"Settings_OnOffSwitch_ActiveBackgroundColor"},".onoffswitch-checkbox:checked + .onoffswitch-label":{backgroundColor:"Settings_OnOffSwitch_ActiveBackgroundColor",borderColor:"Settings_OnOffSwitch_ActiveBackgroundColor"},".KGSettings_tabLabel:hover .icon-forward":{fill:"Settings_TabLabel_TextHoverColor"},".KGSettings_tabLabel":{borderBottomWidth:"Settings_TabLabel_borderBottomWidth",borderBottomColor:"Settings_TabLabel_borderBottomColor",borderBottomStyle:"Settings_TabLabel_borderBottomStyle"}}})}(),KGSettings.Models=KGSettings.Models||{},function(){KGSettings.Models.UserState=KGPugpigCore.Extensions.Model.extend({name:"UserState",appChannelName:"KGSettings",defaults:{fontSizeIndex:0,nightMode:!1,analyticsTracking:!0},initialize:function(){_.bindAll(this,"onChangeFontSizeIndex","onChangeAnalyticsTracking"),this.fetch(),this.listenTo(this,"change:fontSizeIndex",this.onChangeFontSizeIndex),this.listenTo(this,"change:analyticsTracking",this.onChangeAnalyticsTracking),this.listenTo(this,"change:nightMode",this.onChangeNightMode)},fetch:function(){var e=KGPugpigReader.BasilStore.get("USER_STATE")||this.defaults;e.fontSizeIndex=parseInt(e.fontSizeIndex,10),this.set(e)},save:function(){KGPugpigReader.BasilStore.set("USER_STATE",this.toJSON())},onChangeFontSizeIndex:function(e,n){this._appCh.trigger("set:font:size",n),this._appCh.request("app:refresh:frame"),this.save()},onChangeAnalyticsTracking:function(e,n){var o=n?"Opted In":"Opted Out";n===!1&&this.sendAnalyticsEvent("AnalyticsTracking",o),this._appCh.trigger("set:analytics:tracking",n),this.save(),this.sendAnalyticsEvent("AnalyticsTracking",o)},onChangeNightMode:function(e,n){this._appCh.trigger("set:night:mode",n),this.save()},sendAnalyticsEvent:function(e,n){this._appCh.trigger("analytics:hit",{type:"event",eventCategory:"/Settings/General",eventAction:e,eventLabel:n})}})}(),KGSettings.Models=KGSettings.Models||{},function(){KGSettings.Models.General=KGPugpigCore.Extensions.Model.extend({name:"General",appChannelName:"KGSettings",textResizeButtons:["small","medium","large"],initialize:function(e,n){this.options=n;var o=this.options.customText||{};this.set({generalTabHeader:o.generalTabHeader,textResizeLabel:o.textResizeLabel,nightModeLabel:o.nightModeLabel,feedbackLabel:o.feedbackLabel,feedbackContent:o.feedbackContent,fontSizes:["small font size","medium font size","large font size"],textResizeButtons:this.getTextResizeButtons(),nightModeChecked:this.options.userState.get("nightMode")===!0?"checked":"",version:this.getAppFullVersion(),analyticsTrackingChecked:this.options.userState.get("analyticsTracking")===!1?"checked":"",hasNightMode:this._appCh.request("app:has:feature","nightmode")})},getAppFullVersion:function(){return this._appCh.request("config:key","ppVersion")+" ("+this._appCh.request("config:key","appVersion")+")"},getTextResizeButtons:function(){return this.textResizeButtons.map(function(e,n){return{name:e,isActiveClass:this.options.userState.get("fontSizeIndex")===n?"isActive":""}},this)},setFontSizeIndex:function(e){this.options.userState.set("fontSizeIndex",e)},toggleNightMode:function(){this.options.userState.set("nightMode",!this.options.userState.get("nightMode"))}})}(),KGSettings.Models=KGSettings.Models||{},function(){KGSettings.Models.Privacy=KGPugpigCore.Extensions.Model.extend({name:"Privacy",appChannelName:"KGSettings",initialize:function(e,n){if(this.userState=n.userState,this._appCh.request("app:has:feature","privacy")){var o=n.customText||{};this.set({hasPrivacy:!0,privacyTabHeader:o.privacyTabHeader,privacyLabel:o.privacyLabel,privacyContent:o.privacyContent,analyticsTrackingLabel:o.analyticsTrackingLabel,analyticsTrackingChecked:this.userState.get("analyticsTracking")===!1?"checked":"",analyticsTrackingContent:o.analyticsTrackingContent,hasAnalytics:this._appCh.request("app:has:feature","analytics")})}},toggleAnalyticsTracking:function(){this.userState.set("analyticsTracking",!this.userState.get("analyticsTracking"))}})}(),KGSettings.Views.Items=KGSettings.Views.Collections||{},function(){KGSettings.Views.Items.General=KGPugpigCore.Extensions.ItemView.extend({name:"General",appChannelName:"KGSettings",className:"KGSettings_general KGSettings_tab-isActive",template:KGSettings.Templates.General,isActive:!0,ui:{fontResizeButtons:".js-fontresize",fontResizeButtonsContainer:".KGSettings_general_tab_wrapper",analyticsSwitch:".js-analytics label",nightMode:".js-nightmode label",tabLabel:".js-tab-label"},events:{"click @ui.fontResizeButtons":"onClickFontResize","click @ui.nightMode":"onClickNightMode","click @ui.tabLabel":"onClickTabLabel"},themePickerElements:["fontResizeButtonsContainer"],analyticsFontSizeLabels:["Small, Medium, Large"],onClickFontResize:function(e){var n=e.currentTarget,o=n.getAttribute("data-index");this.ui.fontResizeButtons.removeClass("isActive"),n.classList.add("isActive"),this.model.setFontSizeIndex(o),this.sendAnalyticsEvent("TextResize",this.analyticsFontSizeLabels[o])},onClickNightMode:function(){this.model.toggleNightMode()},onClickTabLabel:function(){this.isActive=!this.isActive,this.$el.toggleClass("KGSettings_tab-isActive");var e=document.querySelector(".KGSettings_generalRegion");e.setAttribute("aria-expanded",this.isActive),e.querySelector(".KGSettings_tabContent").focus()},sendAnalyticsEvent:function(e,n){this._appCh.trigger("analytics:hit",{type:"event",eventCategory:"/Settings/General",eventAction:e,eventLabel:n})}})}(),KGSettings.Views.Items=KGSettings.Views.Collections||{},function(){KGSettings.Views.Items.Privacy=KGPugpigCore.Extensions.ItemView.extend({name:"Privacy",appChannelName:"KGSettings",className:"KGSettings_privacy KGSettings_tab",isActive:!1,getTemplate:function(){return this.model.get("hasPrivacy")?KGSettings.Templates.Privacy:_.template("")},ui:{analyticsSwitch:".js-ancsSwitch":"onClickAnalyticsSwitch","click @ui.tabLabel":"onClickTabLabel"},themePickerElements:["onoffswitch"],onClickAnalyticsSwitch:function(){this.model.toggleAnalyticsTracking()},onClickTabLabel:function(){this.isActive=!this.isActive,this.$el.toggleClass("KGSettings_tab-isActive");var e=document.querySelector(".KGSettings_privacyRegion");e.setAttribute("aria-expanded",this.isActive),e.querySelector(".KGSettings_tabContent").focus()}})}(),KGSettings.Views.Items=KGSettings.Views.Collections||{},function(){KGSettings.Views.Items.Tab=KGPugpigCore.Extensions.ItemView.extend({name:"Tab",appChannelName:"KGSettings",tagName:"div",className:"KGSettings_tab",template:KGSettings.Templates.Tab,isActive:!1,ui:{label:".KGSettings_tabLabel"},events:{"click @ui.label":"onClick"},onClick:function(){this.isActive=!this.isActive,this.$el.toggleClass(this.className+"-isActive",this.isActive);var e=document.querySelector(".KGSettings_tabsRegion");e.setAttribute("aria-expanded",this.isActive),e.querySelector(".KGSettings_tabContent").focus()}})}(),KGSettings.Views.Collections=KGSettings.Views.Collections||{},function(){KGSettings.Views.Collections.Tabs=KGPugpigCore.Extensions.CollectionView.extend({name:"Tabs",appChannelName:"KGSettings",tagName:"div",className:"KGSettings_tabs",childView:KGSettings.Views.Items.Tab})}(),KGSettings.Views=KGSettings.Views||{},function(){KGSettings.Views.AppRoot=KGPugpigCore.Extensions.PanelAppRoot.extend({name:"AppRoot",appChannelName:"KGSettings",tagName:"main",className:"KGSettings",template:KGSettings.Templates.AppRoot,modalref:"settings",regions:{general:".KGSettings_generalRegion",tabs:".KGSettings_tabsRegion",privacy:".KGSettings_privacyRegion"},ui:{header:".KGSettings_header",tabHeader:".KGSettings_tabHeader",tabContent:".KGSettings_tabContent",tabLink:".KGSettings_tabContent a"},themePickerElements:["header","tabHeader","tabContent","tabLink"],onInitialize:function(){this.tabsCollection=new KGPugpigCore.fw.Backbone.Collection(this.options.tabs),this.tabsView=new KGSettings.Views.Collections.Tabs({collection:this.tabsCollection}),this.userState=new KGSettings.Models.UserState,this.generalView=new KGSettings.Views.Items.General({model:new KGSettings.Models.General((void 0),{userState:this.userState,customText:this.options.customText})}),this.privacyView=new KGSettings.Views.Items.Privacy({model:new KGSettings.Models.Privacy((void 0),{userState:this.userState,customText:this.options.customText})})},onRender:function(){this.getRegion("general").show(this.generalView),this.getRegion("tabs").show(this.tabsView),this.getRegion("privacy").show(this.privacyView),this.sendAnalyticsScreenView()},serializeData:function(){return{settingsHeader:this.options.settingsHeader}},sendAnalyticsScreenView:function(){this._appCh.trigger("analytics:hit",{type:"screenview",screenName:"/Settings/General"})}})}(),window.KGShare={App:{},Models:{},Collections:{},Views:{Collections:{},Items:{},Layouts:{}},Templates:{},Modules:{},fw:{}},"undefined"!=typeof KGPugpigCore&&(KGShare.fw=KGPugpigCore.fw),KGShare.App=KGShare.App||{},function(){KGShare.App=KGPugpigCore.Extensions.Application.extend({name:"KGShare",initialize:function(){_.bindAll(this,"onToggle"),this.module("logger",KGPugpigCore.Modules.Logger),this.module("stylesheet",KGPugpigCore.Modules.Stylesheet),this.module("theme",KGShare.Modules.Theme),this.isStarted=!1,this._appCh.on("toggle:share",this.onToggle)},onBeforeStart:function(e){this.options=_.extend(this.options,e),$("<div>",{id:"KGShare",class:"cleanslate"}).appendTo($("#KGPugpigReader"))},onStart:function(){this.addRegions({main:"#KGShare"}),this.rootView=new KGShare.Views.AppRoot(this.options),this.getRegion("main").show(this.rootView),this.isStarted=!0},onToggle:function(){this.isStarted!==!0?(this.start(),document.querySelector(".KGShare").focus(),document.querySelector(".KGShare").setAttribute("aria-hidden","false")):this.rootView.isDisplayed===!0?this.rootView.toggleDisplay(!1):this.rootView.toggleDisplay(!0)},hide:function(){this.isStarted&&this.rootView.toggleDisplay(!1)},stop:function(){this.isStarted=!1},onDestroy:function(){this.isStarted&&(this.isStarted=!1,this.removeRegion("main"))}})}(),this.KGShare=this.KGShare||{},this.KGShare.Templates=this.KGShare.Templates||{},this.KGShare.Templates.AppRoot=function(e){var n,o="";_.escape;return o+='<header class="KGShare_header"><h1 class="KGShare_header_title">'+(null==(n=e.shareHeader)?"":n)+'</h1><button aria-label="Close Share" class="KGShare_close js-panel-close icon icon-close"></button><div class="KGShare_buttonsRegion"></div></header><section class="KGPanel_content KGShare_body content"><div class="KGShare_itemRegion"></div></section>'},this.KGShare.Templates.ShareButtons=function(e){var n,areLinks),function(a){o+=" ",o+="email"===a?' <a class="btn-share" aria-role="menuitem" aria-label="Share to '+(null==(n=a)?"":n)+'" rel="nofollow" href="'+(null==(n=e.shareLinks[a].link)?"":n)+'"><div class="KGShare_icon icon icon-'+(null==(n=e.shareLinks[a].icon)?"":n)+'"></div></a> ':' <a class="btn-share" aria-role="menuitem" aria-label="Share to '+(null==(n=a)?"":n)+'" href="'+(null==(n=e.shareLinks[a].link)?"":n)+'" rel="nofollow" target="'+(null==(n=e.shareLinks[a]l==(n=e.shareLinks[a].icon)?"":n)+'"></div></a> ',o+=" "}),o},this.KGShare.Templates.ShareItem=function(e){var n,o="",a=_.escape;Array.prototype.join;return o+='<h2 class="KGShare_item_caption">Article to share:</h2> ',e.hasThumbnails&&(o+=' <figure class="KGFigure KGShare_item_thumbnail"><img src="'+(null==(n=e.thumbnail)?"":n)+'"></figure> '),o+=' <div class="KGShare_item_info"><h1 class="KGShare_item_title">'+a(e.title)+'</h1><p class="KGShare_item_summary">'+(null==(n=e.summary)?"":n)+"</p></div>"},KGShare.Modules=KGShare.Modules||{},function(){KGShare.Modules.Theme=KGPugpigCore.Modules.Theme.extend({appChannelName:"KGShare",cssNamespace:"#KGShare.cleanslate",ssName:"KGShare-css-theme",themePrefix:"Document_ShareControl",keys:{text:["HeaderTitle","ItemCaption","ItemTitle","ItemSummary"],texture:["Body_BackgroundColor","BackgroundColor"],layout:[]},textElements:{".KGShare_header_title":"Document_ShareControl_HeaderTitle",".KGShare_item_caption":"Document_ShareControl_ItemCaption",".KGShare_item_title":"Document_ShareControl_ItemTitle",".KGShare_item_summary":"Document_ShareControl_ItemSummary"},layoutElements:{".KGShare_body":{backgroundColor:"Document_ShareControl_Body_BackgroundColor"},".KGShare_header":{backgroundColor:"Document_ShareControl_BackgroundColor"}}})}(),KGShare.Models=KGShare.Models||{},function(){KGShare.Models.ShareButtons=KGPugpigCore.Extensions.Model.extend({name:"ShareButtons",appChannelName:"KGShare",regex:{isImageFile:/\.(jpeg|jpg|gif|png)$/},defaults:function(){return{link:window.location.href,title:document.title,description:document.title}},initialize:function(e,n){this.options=n,this.options.toDisplay=this._appCh.request("config:key","share.displayShareLinks"),"undefined"!=typeof this.options.shareItem&&this.set({link:this.options.shareItem.get("link"),title:this.options.shareItem.get("title"),description:this.options.shareItem.get("title")}),this.setEmailShareLink().setFacebookShareLink().setTwitterShareLink().setGoogleShareLink().setPinterestShareLink()},setEmailShareLink:function(){if(this.options.toDisplay.email===!1)return this;var e="mailto:?";return this.set("shareLinks.email.icon","mail"),this.set("shareLinks.email.link",e+["subject="+encodeURIComponent(this.get("title")),"body="+encodeURIComponent(this.get("description")+": "+this.get("link")),"url="+encodeURIComponent(this.get("link")),"title="+encodeURIComponent(this.get("title")),"note="+encodeURIComponent(this.get("description")+": "+this.get("link"))].join("&")),
this},setFacebookShareLink:function(){return this.options.toDisplay.facebook===!1?this:(this.set("shareLinks.facebook.icon","facebook"),this.set("shareLinks.facebook.target","facebook"),this.set("shareLinks.facebook.link","https://www.facebook.com/sharer/sharer.php?"+["u="+encodeURIComponent(this.get("link"))].join("&")),this)},setTwitterShareLink:function(){if(this.options.toDisplay.twitter===!1)return this;var e=this.get("link")+this.get("description")>140?this.get("title"):this.get("description");return this.set("shareLinks.twitter.icon","twitter"),this.set("shareLinks.twitter.target","twitter"),this.set("shareLinks.twitter.link","http://twitter.com/intent/tweet?"+["url="+encodeURIComponent(this.get("link")),"text="+encodeURIComponent(e)].join("&")),this},setGoogleShareLink:function(){return this.options.toDisplay.google===!1?this:(this.set("shareLinks.google.icon","google"),this.set("shareLinks.google.target","google_plus"),this.set("shareLinks.google.link","https://plus.google.com/share?"+["url="+encodeURIComponent(this.get("link"))].join("&")),this)},setPinterestShareLink:function(){return this.options.toDisplay.pinterest===!1?this:this.get("isImage")&&this.regex.isImage.test(this.get("link"))?(this.set("shareLinks.pinterest.icon","pinterest"),this.set("shareLinks.pinterest.target","pinterest"),this.set("shareLinks.pinterest.link","http://pinterest.com/pin/create/button/?"+["url="+encodeURIComponent(this.get("link")),"media="+encodeURIComponent(this.get("link")),"description="+encodeURIComponent(this.get("description"))].join("&")),this):this}})}(),KGShare.Models=KGShare.Models||{},function(){KGShare.Models.ShareItem=KGPugpigCore.Extensions.Model.extend({name:"ShareItem",appChannelName:"KGShare",defaults:function(){return{link:window.location.href,title:document.title,summary:document.title,thumbnail:void 0}},initialize:function(e,n){_.bindAll(this,"setShareItem"),this.options=n,this.appState=this._appCh.request("app:get:state"),this._appCh.request("feed:get:editions",{id:this.appState.idEdition}).done(this.setShareItem)},setShareItem:function(e){if("undefined"==typeof e._articles)return!1;var n=e._articles.findWhere({id:this.appState.idArticle});if("undefined"==typeof n)return!1;var o={link:n.get("url.bookmark")||window.location.href,title:n.get("title")||document.title,summary:n.get("summary")||"",thumbnail:n.get("url.thumbnail")||""};this.set(o)}})}(),KGShare.Views=KGShare.Views||{},function(){KGShare.Views.AppRoot=KGPugpigCore.Extensions.PanelAppRoot.extend({name:"AppRoot",appChannelName:"KGShare",tagName:"main",className:"KGShare",template:KGShare.Templates.AppRoot,panelPosition:"right",modalref:"share",regions:{shareButtons:".KGShare_buttonsRegion",shareItem:".KGShare_itemRegion"},childEvents:{close:"panelClose"},ui:{header:".KGShare_header"},themePickerElements:["header"],onInitialize:function(){this.startViews()},startViews:function(e,n){return this.options=_.extend(this.options,n),this.is.shareItemView=new KGShare.Views.Items.ShareItem({model:this.shareItem}),this.shareButtons=new KGShare.Models.ShareButtons({},{shareItem:this.shareItem}),this.shareButtonsView=new KGShare.Views.Items.ShareButtons({model:this.shareButtons}),this},onRender:function(){this.getRegion("shareItem").show(this.shareItemView),this.getRegion("shareButtons").show(this.shareButtonsView),this.sendAnalyticsScreenView()},onToggleDisplay:function(e,n){if(e===!0){var o=this._appCh.request("app:get:state");this.startViews(o,n).render().trigger("attach"),this.sendAnalyticsEvent("ShareOpened")}else e===!1&&this._appCh.trigger("app:overlay:setcss",{})},sendAnalyticsScreenView:function(){this._appCh.trigger("analytics:hit",{type:"screenview",screenName:"/Share/PageView/"+this.options.idEdition+"/"+this.options.idArticle})},serializeData:function(){return{shareHeader:this.options.share.sharePanelHeader}},sendAnalyticsEvent:function(e){this._appCh.trigger("analytics:hit",{type:"event",eventCategory:"/Edition/PageView",eventAction:e})}})}(),KGShare.Views.Items=KGShare.Views.Items||{},function(){KGShare.Views.Items.ShareButtons=KGPugpigCore.Extensions.LayoutView.extend({name:"ShareButtons",appChannelName:"KGShare",className:"KGShare_buttons",template:KGShare.Templates.ShareButtons,ui:{buttons:".btn-share"},events:{"click @ui.buttons":"onShareButtonClick"},onShareButtonClick:function(e){this.close(),this.sendAnalyticsEvent("Share")},close:function(){this.triggerMethod("close")},sendAnalyticsEvent:function(e){this._appCh.triy:"/Edition/PageView",eventAction:e})}})}(),KGShare.Views.Items=KGShare.Views.Items||{},function(){KGShare.Views.Items.ShareItem=KGPugpigCore.Extensions.ItemView.extend({name:"ShareItem",appChannelName:"KGShare",className:"KGShare_item",template:KGShare.Templates.ShareItem,ui:{title:".KGShare_item_title",summary:".KGShare_item_summary",caption:".KGShare_item_caption"},themePickerElements:["title","summary","caption"],behaviors:{FiguresLoader:{behaviorClass:KGPugpigCore.Behaviors.FiguresLoader}}})}(),window.KGSlideshow={App:{},Mod,Templateow.App=KGSlideshow.App||{},function(){KGSlideshow.App=KGPugpigCore.Extensions.Application.extend({name:"KGSlideshow",modalref:"slideshow",isStarted:!1,initialize:function(){this.module("logger",KGPugpigCore.Modules.Logger),this.module("theme",KGSlideshow.Modules.Theme),this._appCh.reply("slideshow:start",_.bind(this.start,this))},onBeforeStart:function(e){this.isStarted||(_.extend(this.options,e),$("<div>",{id:"KGSlideshow",class:"cleanslate.$appContainer=$("#KGSlideshow"),this.options.appContainer="#KGSlideshow")},onStart:function(){this.isStarted||(this._appCh.trigger("app:overlay:show",this.modalref),this.addRegions({main:this.getOption("appContainer")}),this.rootView=new KGSlideshow.Views.AppRoot({editionId:this.getOption("editionId"),articleId:this.getOption("articleId"),images:this.getOption("images"),activeImageUrl:this.getOption("activeImageUrl")}),this.listenTo(this.rootView,"destroy",this.destroy),this.getRegion("main").show(this.rootView),this.isStarted=!0)},stop:function(){this.isStarted&&this.rootView.onAppClose()main"),$("#KGSlideshow").remove(),this._appCh.trigger("app:overlay:hide",this.modalref))},isDisplayed:function(){return!_.isUndefined(this.rootView)&&this.rootView.isDisplayed}})}(),this.KGSlideshow=this.KGSlideshow||{},this.KGSlideshow.Templates=this.KGSlideshow.Templates||{},this.KGSlideshow.Templates.AppRoot=function(e){var n="";_.escape;return n+='<div class="KGSlideshow_container"><section class="content"></section></div>'},this.KGSlideshow.Templates.Image=function(e){var n,o="";_.escape,Array.prototype.join;return o+=e.forceWebZoom===!0?' <div class="gallery-figure__image gallery-figure__image--no-background"><img src="'+(null==(n=e.url)?"":n)+'"></div> ':' <div class="gallery-figure__image" style="z-index:1;background-image: url('+(null==(n=e.url)?"":n)+')"></div> '},this.KGSlideshow.Templates.Images=function(e){var n="";_.escape;return n+='<div class="topbar"><button aria-label="Close Gallery" class="KGImageViewer_icon icon icon-close"></button> <button aria-label="Open Share" class="KGImageViewer_icon icon icon-share"></button> <button aria-label="Open Fullscreen" class="KGImageViewer_icon icon icon-fullscreen"></button> <button aria-label="Close Fullscreen" class="KGImageViewer_icon icon icon-fullscreen-close is-hidden"></button><div class="KGSlideshow_image_position image-position"></div></div><nav class="arrowButton"><div class="arrow js-arrow-left"><button class="KGImageViewer_icon icon icon-back" data-tooltip="Previous"></button></div></nav><section class="gallery-images"><div class="gallery-figure__caption" title="Click to dismiss the caption"><p class="KGSlideshow_caption caption"></p><p class="KGSlideshow_copyright copyright"></p></div></section><nav class="arrowButton"><div class="arrow js-arrow-right"><button class="KGImageViewer_icon icon icon-forward" data-tooltip="Next"></button></div></nav>'},KGSlideshow.Modules=KGSlideshow.Modules||{},function(){KGSlideshow.Modules.Theme=KGPugpigCore.Modules.Theme.extend(Slideshow main.KGSlideshow",ssName:"KGSlideshow-css-theme",themePrefix:"ImageViewer",keys:{text:["Caption","Copyright","Position"],texture:["BackgroundColor","Caption_BackgroundColor"],layout:["Caption_Show","Position_Show"]},textElements:{".gallery-figure__caption .caption":"ImageViewer_Caption",".gallery-figure__caption .copyright":"ImageViewer_Copyright",".image-position":"ImageViewer_Position"},layoutElements:{".KGSlideshow-container":{backgroundColor:"ImageViewer_BackgroundColor"}}})}(),KGSlideshow.Models=KGSlideshow.Models||{},function(){KGSlideshow.Models.Image=KGPugpigCore.Extensions.Model.extend({name:"Image",appChannelName:"KGSlideshow",getSharedInfo:function(e){return{idEdition:e.editionId,idArticle:e.articleId,title:this.get("caption"),summary:this.getSummary(),thumbnail:this.get("url")}},getSummary:function(){return _.isEmpty(this.get("caption"))&&_.isEmpty(this.get("copyright"))||!_.isEmpty(this.get("caption"))&&_.isEmpty(this.get("copyright"))?"":_.isEmpty(this.get("caption"))&&!_.isEmpty(this.get("copyright"))?"&#169; "+this.get("copyright"):this.get("caption")+" &#169; "+this.get("copyright")}})}(),KGSlideshow.Collections=KGSlideshow.Collections||{},function(){KGSlideshow.Collections.Images=KGPugpigCore.Extensions.Collection.extend({name:"Images",appChannelName:"KGSlideshow",model:KGSlideshow.Models.Image,getCurrentDisplay:function(){return this.findWhere({display:!0})},getCurrentDisplayIndex:function(){return this.indexOf(this.getCurrentDisplay())},getWantedDisplayIndex:function(e,n){var o="right"===n?e+1:e-1;return!(o>this.length-1)&&(!(o<0)&&o)}})}(),KGSlideshow.Views=KGSlideshow.Views||{},function(){KGSlideshow.Views.AppRoot=KGPugpigCore.Extensions.LayoutView.extend({name:"AppRoot",appChannelName:"KGSlideshow",tagName:"main",className:"KGSlideshow",template:KGSlideshow.Templates.AppRoot,regions:{content:".content"},ui:{closeButton:".icon-close",imagePosition:".image-position",figureCaption:".KGSlideshow_caption",figureCopyright:".KGSlideshow_copyright",icons:".icon"},events:{"click @ui.closeButton":"onAppClose"},themePickerElements:["figureCaption","figureCopyright","imagePosition","icons"],initialize:function(){this.imagesColl=new KGSlideshow.Collections.Images(this.getOption("images"),this.getOption("config"));var e=this.imagesColl.findWhere({url:this.getOption("activeImageUrl")});e.set("display",!0),this.imagesView=new KGSlideshow.Views.Collections.Images({collection:this.imagesColl,config:this.getOption("config"),editionId:this.getOption("editionId"),articleId:this.getOption("articleId"),callingActiveImageIdx:e.getIndexInCollection()})},onRender:function(){this.getRegion("content").show(this.imagesView),this.$el.transitionClass(this.className+"--isVisible"),this.isDisplayed=!0},onAppClose:function(e){"boolean"!=typeof screenfull&&($(document).off(screenfull.raw.fullscreenchange),screenfull.exit()),!_.isUndefined(e)&&_.isFunction(e.preventDefault)&&e.preventDefault(),this.$el.transitionClass(this.className+"--isVisible",{complete:_.bind(function(){this.isDisplayed=!1,this.destroy()},this)})}})}(),KGSlideshow.Views.Items=KGSlideshow.Views.Items||{},function(){KGSlideshow.Views.Items.Image=KGPugpigCore.Extensions.ItemView.extend({name:"Image",appChannelName:"KGSlideshow",tagName:"figure",template:KGSlideshow.Templates.Image,attributes:{"data-image-nozoom":!0},className:function(){var e=["gallery-figure"],n=this.model.collection.getCurrentDisplayIndex(),o=this.model.getIndexInCollection();return n>o?e.push("image--offsetLeft"):n<o?e.push("image--offsetRight"):e.push("image--isRendered"),e.join(" ")},initialize:function(){this.currentIndex=this.model.getIndexInCollection()},onRender:function(){this.currentIndex===this.options.callingActiveImageIdx&&this.sendAnalyticsScreenView()},slideOffScreen:function(e){this.model.set("display",!1);var n="left"===e?"offsetRight":"offsetLeft";this.$el.transitionClass("image--"+n,{complete:_.bind(function(){this.$el.removeClass("image--isRendered")},this)})},slideIntoScreen:function(e){this.$el.addClass("image--isRendered"),this.model.set("display",!0);var n="left"===e?"offsetLeft":"offsetRight";this.trigger("navigation:freeze"),this.$el.transitionClass("image--"+n,{complete:_.bind(function(){this.trigger("navigation:defrost")},this)}),this.sendAnalyticsScreenView()},sendAnalyticsScreenView:function(){this._appCh.trigger("analytics:hit",{type:"screenview",screenName:"/Slideshow/"+(parseInt(this.model.getIndexInCollection(),10)+1)})}})}(),KGSlideshow.Views.Collections=KGSlideshow.Views.Collections||{},function(){KGSlideshow.Views.Collections.Images=KGPugpigCore.Extensions.CompositeView.extend({name:"Images",appChannelName:"KGSlideshow",tagName:"section",className:"gallery-images-list",template:KGSlideshow.Templates.Images,childView:KGSlideshow.Views.Items.Image,childViewContainer:".gallery-images",childViewOptions:function(){return{callingActiveImageIdx:this.options.callingActiveImageIdx}},childEvents:{"navigation:freeze":"freezeNavigation","navigation:defrost":"defrostNavigation"},ui:{closeButton:".icon-close",navigation:".arrowButton",arrowLeft:".js-arrow-left",arrowRight:".js-arrow-right",arrowLeftIcon:".icon-back",arrowRightIcon:".icon-forward",shareButton:".icon-share",imagePosition:".image-position",fullscreenButton:".icon-fullscreen",fullscreenCloseButton:".icon-fullscreen-close",figureCaption:".gallery-figure__caption .caption",figureCopyright:".gallery-figure__caption .copyright",caption:".gallery-figure__caption",figure:".gallery-figure",galleryImages:".gallery-images"},events:{"click @ui.arrowLeft":"imageNavigateAction","click @ui.arrowRight":"imageNavigateAction",panstart:"imageNavigateAction","click @ui.shareButton":"openShareDialog","click @ui.fullscreenButton":"toggleFullscreen","click @ui.fullscreenCloseButton":"toggleFullscreen","click @ui.caption":"toogleCaption","click @ui.figure":"toogleCaption"},initialize:function(){"boolean"!=typeof screenfull&&$(document).on(screenfull.raw.fullscreenchange,_.bind(function(){this.ui.fullscreenButton.toggleClass("is-hidden"),this.ui.fullscreenCloseButton.toggleClass("is-hidden")},this)),this.collection.length<=1||(this.$el.hammer({swipe:!1,drag:!1,hold:!1,release:!1,touch:!1,transform:!1}),this.listenTo(this._subappCh,"keyboard:event",this.imageNavigateAction))},onRender:function(){if(this.updateArrowsState(),this.collection.length>1){var e=this.collection.getCurrentDisplay();this.updatePosition(this.collection.indexOf(e))}this.updateCaption(),"boolean"==typeof screenfull&&this.ui.fullscreenButton.addClass("is-hidden")},imageNavigateAction:function(e){if(_.isFunction(e.preventDefault)&&(e.preventDefault(),e.stopPropagation()),1!==this.collection.length)if("click"===e.type){var n=$(e.target).hasClass("arrow")?$(e.target):$(e.target).parents(".arrow");if(n.hasClass("isDisabled")||n.children().hasClass("isDisabled"))return;var o=_.find(n[0].className.split(" "),function(e){return e.indexOf("js-arrow")!==-1}).substr(9);this.imageNavigate(o)}else if("keydown"===e.type)this.imageNavigate(e.keyIdentifier);else if("panstart"===e.type)switch(e.gesture.offsetDirection){case 4:this.imageNavigate("left");break;case 2:this.imageNavigate("right")}},imageNavigate:function(e){if(!this.frozenNavigation){var n=this.collection.getCurrentDisplay(),o=this.collection.indexOf(n),a=this.children.findByModel(n),i=this.collection.getWantedDisplayIndex(o,e),t=i!==!1&&this.collection.at(i),r=i!==!1&&this.children.findByModel(t);i!==!1&&(a.slideOffScreen(e),r.slideIntoScreen(e),this.updateArrowsState(),this.collection.length>1&&this.updatePosition(i),this.updateCaption(i))}},updateArrowsState:function(){this.ui.navigation.toggleClass("arrowButton--isVisible",this.collection.length>1);var e=this.collection.getCurrentDisplayIndex();this.ui.arrowLeftIcon.toggleClass("isDisabled",0===e),this.ui.arrowRightIcon.toggleClass("isDisabled",e===this.collection.length-1)},updatePosition:function(e){this.ui.imagePosition.html(e+1+" / "+this.collection.length)},updateCaption:function(){var e=this.collection.getCurrentDisplay();this.ui.figureCaption.html(e.get("caption")),_.isEmpty(e.get("copyright"))?this.ui.figureCopyright.html(""):this.ui.figureCopyright.html("&#169; "+e.get("copyright")),_.isEmpty(e.get("caption"))&&_.isEmpty(e.get("copyright"))?this.ui.galleryImages.addClass("is-empty"):this.ui.galleryImages.removeClass("is-empty")},toogleCaption:function(){return this.ui.galleryImages.hasClass("is-empty")?void this.ui.closeButton.click():void this.ui.galleryImages.toggleClass("is-hidden")},frozenNavigation:!1,freezeNavigation:function(){this.frozenNavigation=!0},defrostNavigation:function(){this.frozenNavigation=!1},openShareDialog:function(){var e=this.collection.findWhere({display:!0}),n=e.getSharedInfo(this.options);this._appCh.trigger("toggle:share",n)},toggleFullscreen:function(){"boolean"!=typeof screenfull&&(screenfull.toggle(),this.sendAnalyticsEvent("FullScreenImage"))},sendAnalyticsEvent:function(e){var n=this.collection.findWhere({display:!0}),o=KGPugpigCore.fw.URI.absoluteTo(window.location.href,n.get("url"));this._appCh.trigger("analytics:hit",{type:"event",eventCategory:"/Edition/PageView",eventAction:e,eventLabel:o})}})}(),window.KGSounds={App:{},Models:{},Collections:{},Views:{Collections:{},Items:{},Layouts:{}},Templates:{},Modules:{},fw:{}},"undefined"!=typeof KGPugpigCore&&(KGSounds.fw=KGPugpigCore.fw),KGSounds.App=KGSounds.App||{},function(){KGSounds.App=KGPugpigCore.Extensions.Application.extend({name:"KGSounds",initialize:function(){_.bindAll(this,"onToggle"),this.module("logger",KGPugpigCore.Modules.Logger),this.module("theme",KGSounds.Modules.Theme),this.isStarted=!1,this._appCh.on("toggle:sounds",this.onToggle)},onBeforeStart:function(e){_.extend(this.options,e),_.isUndefined(this.options.appContainer)&&($("#KGPugpigReader").append('<div id="KGSounds" class="cleanslate">'),this.options.appContainer="#KGSounppContainer")}),this.rootView=new KGSounds.Views.AppRoot(this.options),this.getRegion("main").show(this.rootView),this.isStarted=!0},onToggle:function(e){this.isStarted!==!0?this.start(e):this.rootView.isDisplayed===!0?this.rootView.toggleDisplay(!1):this.rootView.toggleDisplay(!0,e)},hide:function(){this.isStarted&&this.rootView.toggleDisplay(!1)},stop:function(){this.isStarted=!1},onDestroy:function(){thiegion("main"),this._appCh.trigger("sounds:player:state:change","destroy.KGSounds.Templates=this.KGSounds.Templates||{},this.KGSounds.Templates.AppRoot=function(e){var n="";_.escape;return n+='<header class="KGSounds_header KGPanel_content"><h1 class="KGSounds_header_title">Audio</h1><button class="KGSounds_close js-panel-close icon icon-close"></button><div class="KGSounds_playerRegion"></div></header><section class="KGSounds_body content KGPanel_content"><div class="KGSounds_playlistRegion"></div></section>'},this.KGSounds.Templates.Player=function(e){var n,o="";_.escape;return o+='<div class="KGSounds_playerControls"><button class="KGSounds_playerControlsButton icon icon-player-previous"></button> <button class="KGSounds_playerControlsButton icon icon-rewind"></button> <button class="KGSounds_playerControlsButton icon icon-play"></button> <button class="KGSounds_playerControlsButton icon icon-pause"></button> <button class="KGSounds_playerControlsButton icon icon-fast-forward"></button> <button class=n></div><div class="KGSounds_playerCurrent"><h1 class="KGSounds_playerCurrentTitle">'+(null==(n=e.title)?"":n)+'</h1></div><div class="KGSounds_playerProgress"><p class="KGSounds_playerProgressTime">'+(null==(n=e.timeText)?"":n)+'</p><div class="KGSounds_playerProgressTrack"><div class="KGSounds_playerProgressBar"></div><div class="KGSounds_playerProgressDownload"></div><div class="KGSounds_playerProgressPlaying"></div><div class="KGSounds_playerProgressBall"></div></div><p class="KGSounds_playerProgressDuration" data-value="'+(null==(n=e.duration)?"":n)+'">'+(null==(n=e.durationText)?"":n)+"</p></div>"},this.KGSounds.Templates.Sound=function(e){var n,o="";_.escape,Array.prototype.join;return o+='<figure class="KGFigure KGSounds_playlistItemImage"> ',_.isUndefined(e.icon)||(o+=' <img src="'+(null==(n=e.icon)?"":n)+'" alt=""> '),o+=' </figure><div class="KGSounds_playlistItemDetails"><p class="KGSounds_playlistItemDuration" data-value="'+(null==(n=e.duration)?"":n)+'">'+(null==(n=e.durationText)?"":n)+'</p><h2 class="KGSounds_playlistItemTitle">'+(null==(n=e.title)?"":n)+'</h2><p class="KGSounds_playlistItemCreator">'+(null==(n=e.creator)?"":n)+"</p></div>"},KGSounds.Modules=KGSounds.Modules||{},function(){KGSounds.Modules.Theme=KGPugpigCore.Modules.Theme.extend({appChannelName:"KGSounds",cssNamespace:"#KGSounds.cleanslate",ssName:"KGSounds-css-theme",themePrefix:"Document_SoundPlayer",keys:{text:["HeaderTitle","CurrentTitle","Progress"],texture:["BackgroundColor","Body_BackgroundColor"],layout:[]},textElements:{".KGSounds_header_title":"Document_SoundPlayer_HeaderTitle",".KGSounds_playerCurrentTitle":"Document_SoundPlayer_CurrentTitle",".KGSounds_playerProgressTime":"Document_SoundPlayer_Progress",".KGSounds_playerProgressDuration":"Document_SoundPlayer_Progress",".KGSounds_playlistItemDuration":"Document_SoundPlayer_PlaylistItemDuration",".KGSounds_playlistItemTitle":"Document_SoundPlayer_PlaylistItemTitle",".KGSounds_playlistItemCreator":"Document_SoundPlayer_PlaylistItemCreator",".KGSounds_playration":"Document_SoundPlayer_FromArticleSound_PlaylistItemDuration",".KGSounds_playlistItem-isFromCurrentArticle .KGSounds_playlistItemTitle":"Document_SoundPlayer_FromArticleSound_PlaylistItemTitle",".KGSounds_playlistItem-isFromCurrentArticle .KGSounds_playlistItemCreator":"Document_SoundPlayer_FromArticleSound_PlaylistItemCreator",".KGSounds_playlistItem-isCurrent .KGSounds_playlistItemDuration":"Document_SoundPlayer_ActiveSound_PlaylistItemDuration",".KGSounds_playlistItem-isCurrent .KGSounds_playlistItemTitle":"Document_SoundPlayer_ActiveSound_PlaylistItemTitle",".KGSounds_playlistItem-isCurrent .KGSounds_playlistItemCreator":"Document_Soundr":{backgroundColor:"Document_SoundPlayer_BackgroundColor"},".KGSounds_playlistItem":{backgroundColor:"Document_SoundPlayer_Sound_BackgroundColor",borderBottomColor:"Document_SoundPlayer_Sound_BorderColor"},".KGSounds_playlistItem:hover":{backgroundColor:"Document_SoundPlayer_Sound_BackgroundHoverColor"},".KGSounds_playlistItem-isLoadError":{backgroundColor:"Document_SoundPlayer_Sound_BackgroundColor"},".KGSounds_playlistItem-isFromCurrentArticle":{backgroundColor:"Document_SoundPlayer_FromArticleSound_BackgroundColor"},".KGSounds_playlistItem-isFromCurrentArticle:hover":{backgroundColor:"Document_SoundPlayer_FromArticleSound_BackgroundHoverColor"},".KGSounds_playlistItem-isCurrent":{backgroundColor:"Document_SoundPlayer_ActiveSound_BackgroundColor"},".KGSounds_playlistItem.KGSounds_playlistItem-isCurrent:hover":{backgroundColor:"Document_SoundPlayer_ActiveSound_BackgroundHoverColor"}}})}(),KGSounds.Models=KGSounds.Models||{},function(){KGSounds.Models.Sound=KGPugpigCore.Extensions.Model.extend({name:"Sound",appChannelName:"KGSounds",defaults:{timeText:"00:00",article:{},isFromCurrentArticle:!1},initialize:function(e){_.bindAll(this,"setDuration","onError");var n={preload:"metadata",webAudioApi:!this._appCh.request("is:device",{browser:"firefox"}),crossOrigin:!0};this.buzz=new buzz.sound(e.href,n),this.buzz.bind("loadedmetadata",this.setDuration),this.buzz.bind("error sourceerror",this.onError)},setDuration:function(){var e=this.buzz.getDuration();this.set({duration:e,durationText:buzz.toTimer(this.buzz.getDuration())}),"--"===e&&this.onError()},onError:function(){this.set("error",!0,{silent:!0});var e="";if(0===this.buzz.getStateCode())switch(this.buzz.getNetworkStateCode()){case 0:e="The sound has not yet been initialized.";break;case 1:e="The sound has been selected but it is not actually using the network.";break;case 2:e="The browser is actively trying to download data.";break;case 3:e="The sound is not available."}this.trigger("load:error",e)}})}(),KGSounds.Collections=KGSounds.Collections||{},function(){KGSounds.Collections.Sounds=KGPugpigCore.Extensions.Collection.extend({name:"Sounds",appChannelName:"KGSounds",model:KGSounds.Models.Sound,initialize:function(e,n){_.bindAll(this,"setSounds","onArticleChanged"),this._appCh.request("feed:get:editions",{id:n.idEdition}).done(this.setSounds),this._appCh.on("app:see,n){n&&this.setSoundsFromCurrentArticle(e.idArticle)},setSounds:function(e){var n=[];e._articles.forEach(fypeof o&&(o=o.map(function(n){return n.article={id:e.get("id"),title:e.get("title"),date:e.get("updated")||e.get("published")},n}),n.push(o))},this),n=_.flatten(n),n.forEach(function(e){var n=new KGSounds.Models.Sound(e);this.add(n,{silent:!0})},this)},setSoundsFromCurrentArticle:function(e){var n=this.filter(function(n){return n.get("article.id")===e});this.forEach(function(e){e.set("isFromCurrentArticle",!1)}),n.forEach(function(e){e.set("isFromCurrentArticle",!0)})}})}(),KGSounds.Views.Items=KGSounds.Views.Items||{},function(){KGSounds.Views.Items.Sound=KGPugpigCore.Extensions.LayoutView.extend({name:"Sound",appChannelName:"KGSounds",template:KGSounds.Templates.Sound,tagName:"li",className:function(){var e=["KGSounds_playlistItem"];return this.model.get("isFromCurrentArticle")&&e.push("KGSounds_playlistItem-isFromCurrentArticle"),e.join(" ")},modelEvents:{"change:duration":"render","load:error":"onLoadError","change:isFromCurrentArticle":"onChangeFromCurrentArticle"},triggers:{click:"click"},ui:{creator:".KGSounds_playlistItemCreator",duration:".KGSounds_playlistItemDuration",title:".KGSounds_playlistItemTitle",figure:".KGSounds_playlistItemImage"},themePickerElements:["creator","duration","title"],behaviors:{FiguresLoader:{behaviorClass:KGPugpigCore.Behaviors.FiguresLoader}},initialize:function(){_.bindAll(this,"onImageError"),this.listenTo(this,"image:error",this.onImageError)},onImageError:function(){this.ui.figure.removeClass("KGFigure-isVisible")},setCurrent:function(e){e=e||!1,this.$el.toggleClass("KGSounds_playlistItem-isCurrent",e)},onLoadError:function(e){this.el.classList.add("KGSounds_playlistItem-isLoadError"),this.ui.creator.text(e)},onChangeFromCurrentArticle:function(e,n){this.$el.toggleClass("KGSounds_playlistItem-isFromCurrentArticle",n)}})}(),KGSounds.Views.Layouts=KGSounds.Views.Layouts||{},function(){KGSounds.Views.Layouts.Player=KGPugpigCore.Extensions.LayoutView.extend(late:KGSounds.TemplarControlsButton.icon-play",btnPause:".KGSounds_playerControlsButton.icon-pause",btnRewind:".KGSounds_playerControlsButton.icon-rewind",btnForward:".KGSounds_playerControlsButton.icon-fast-forward",btnPrevious:".KGSounds_playerControlsButton.icon-player-previous",btnNext:".KGSounds_playerControlsButton.icon-player-next",progressTime:".KGSounds_playerProgressTime",progressTrack:".KGSounds_playerProgressTrack",progressBar:".KGSounds_playerProgressBar",progressDownload:".KGSounds_playerProgressDownload",progressPlaying:".KGSounds_playerProgressPlaying",progressBall:".KGSounds_playerProgressBall"},events:{"click @ui.btnPlay":"onTogglePlay","click @ui.btnPause":"onTogglePlay","click @ui.progressTrack":"onSeek","click @ui.btnRewind":"onFastSeek","click @ui.btnForward":"onFastSeek","click @ui.btnPrevious":"onChangeCurrent","click @ui.btnNext":"onChangeCurrent","panstart @ui.progressTrack":"onProgressTrackPanstart","panmove @ui.progressTrack":"onProgressTrackPanmove","panend @ui.progressTrack":"onProgressTrackPanend"},regex:{matchIconClass:/icon-([^\s]*)/,matchPlayerClass:/icon-player-([^\s]*)/},initialize:function(){_.bindAll(this,"setCurrent","onBuzzDownloadProgress","onBuzzTimeUpdate","onBuzzPlayingStateChange"),this.model=this.collection.at(0),this.listenTo(this.model,"change:duration",this.render)},onRender:function(){this.progressTrackClientRect=this.ui.progressTrack[0].getBoundingClientRect(),this.ui.progressTrack.hammer()},onShow:function(){this.setCurrfined(n)||n,this.model=e,this.render(),this.listenTo(this.model,"change:duration",this.render),(_.isUndefined(this.model.get("duration"))||0===this.model.get("duration")||"--"===this.model.get("duration"))&&this.model.setDuration(),_.isUndefined(this.buzz)||this.unbindBuzz(),_.isUndefined(this.buzz)||this.buzz.isPaused()?(this.buzz=e.buzz,n?this.buzz.play():this.buzz.load()):(this.buzz.stop(),this.buzz=e.buzz,this.buzz.play()),this.buzz.bind("progress",this.onBuzzDownloadProgress),this.buzz.bind("timeupdate",this.onBuzzTimeUpdate),this.buzz.bind("play playing pause",this.onBuzzPlayingStateChange)},onTogglePlay:function(){this.buzz.isPaused()?(this.buzz.play(),this.sendAnalyticsEvent("SoundStarted")):(this.buzz.pause(),this.sendAnalyticsEvent("SoundStopped"))},onSeek:function(e){var n=_.isUndefined(e.gesture)?e.clientX:e.gesture.center.x;n-this.progressTrackClientRect.left<0&&(this.progressTrackClientRect=this.ui.progressTrack[0].getBoundingClientRect());var o=(n-this.progressTrackClientRect.left)/this.progressTrackClientRect.width,a=this.buzz.getDuration()*o;this.buzz.setTime(a)},onFastSeek:function(e){var n,o=$(e.currentTarget).attr("class").match(this.regex.matchIconClass);if(!_.isEmpty(o)){switch(o[1]){case"fast-forward":n=this.buzz.getTime()+30;break;case"rewind":n=this.buzz.getTime()-30}this.buzz.setTime(n)}},onBuzzDownloadProgress:function(){if(!_.isUndefined(this.buzz)&&_.isNumber(this.buzz.getDuration())&&!this.buzz.isPaused()){if(_.isEmpty(this.buzz.getBuffered()))return void this.ui.progressDownload.css("width",this.progressTrackClientRect.width);var e=buzz.toPercent(this.buzz.getBuffered()[0].end,this.buzz.getDuration());this.ui.progressDownload.css("width",e+"%")}},onBuzzTimeUpdate:function(){if(!this.isProgressTrackPanning){var e=buzz.toPercent(this.buzz.getTime(),this.buzz.getDuration());this.ui.progressBall.css("left",e+"%"),this.ui.progressPlaying.css("width",e+"%"),this.ui.progressTime.text(buzz.toTimer(this.buzz.getTime())),(_.isUndefined(this.model.get("duration"))||0===this.model.get("duration")||"--"===this.model.get("duration"))&&(this.model.setDuration(),this.ui.progressBall.show())}},onBuzzPlayingStateChange:function(e){switch(e.type){case"play":this.onBuzzDownloadProgress();break;case"playing":this.ui.btnPlay.hide(),this.ui.btnPause.show(),this.ui.progressBall.show();break;case"pause":this.ui.btnPlay.show(),this.ui.btnPause.hide()}this.triggerMethod("player:state:change",e.type)},onChangeCurrent:function(e){for(var n=e.currentTarget.getAttribute("class").match(this.regex.matchPlayerClass),o=_.isEmpty(n)?"":n[1],a=this.collection.getAdjacent(this.model,o);!_.isUndefined(a)&&a.get("error")===!0;)a=this.collection.getAdjacent(a,o);_.isUndefined(a)||(this.setCurrent(a),this.triggerMethod("player:change:current",a))},onProgressTrackPanstart:function(){this.isProgressTrackPanning=!0},onProgressTrackPanmove:function(e){if(!(e.gesture.center.x>this.progressTrackClientRect.right||e.gesture.center.x<this.progressTrackClientRect.left)){
var n=e.gesture.center.x-this.progressTrackClientRect.left;this.ui.progressBall.css({left:n+"px"})}},onProgressTrackPanend:function(e){this.isProgressTrackPanning=!1,this.onSeek(e)},unbindBuzz:function(){this.buzz.unbind("loadedmetadata progress timeupdate play playing pause")},onDestroy:function(){this.unbindBuzz(),this.buzz.stop()},sendAnalyticsEvent:function(e){this._appCh.trigger("analytics:hit",{type:"event",eventCategory:"/Edition/PageView",eventAction:e})}})}(),KGSounds.Views.Collections=KGSounds.Views.Collections||{},function(){KGSounds.Views.Collections.Sounds=KGPugpigCore.Extensions.CollectionView.extend({name:"Sounds",appChannelName:"KGSounds",tagName:"ul",className:"KGSounds_playlist",childView:KGSounds.Views.Items.Sound,setCurrent:function(e){this.children.call("setCurrent");var n=this.children.findByModel(e);n.setCurrent(!0)}})}(),KGSounds.Views=KGSounds.Views||{},function(){KGSounds.Views.AppRoot=KGPugpigCore.Extensions.PanelAppRoot.extend({name:"AppRoot",appChannelName:"KGSounds",tagName:"main",className:"KGSounds",template:KGSounds.Templates.AppRoot,panelPosition:"right",modalref:"sounds",regions:{player:".KGSounds_playerRegion",playlist:".KGSounds_playlistRegion"},childEvents:{click:"onClickSound","player:change:current":"onPlayerChangeCurrent","player:state:change":"onPlayerStateChange","analytics:hit":"onAnalyticsHit"},ui:{header:".KGSounds_header",playlistItem:".KGSounds_playlistItem"},themePickerElements:["header","playlistItem"],onInitialize:function(){_.bindAll(this,"onAppStateChange"),this._appCh.on("app:state:change",this.onAppStateChange),this.sounds=new KGSounds.Collections.Sounds((void 0),this.options),this.soundsView=new KGSounds.Views.Collections.Sounds({collection:this.sounds});var e=this._appCh.request("app:get:state");this.sounds.setSoundsFromCurrentArticle(e.idArticle),this.playerView=new KGSounds.Views.Layouts.Player({collection:this.sounds})},onRender:function(){this.getRegion("player").show(this.playerView),this.getRegion("playlist").show(this.soundsView)},onAppStateChange:function(e){this.sounds.setSoundsFromCurrentArticle(e.idArticle)},onClickSound:function(e,n){n.model.get("error")!==!0&&(this.soundsView.setCurrent(n.model),this.playerView.setCurrent(n.model))},onPlayerChangeCurrent:function(e,n){this.soundsView.setCurrent(n)},onPlayerStateChange:function(e,n){this._appCh.trigger("sounds:player:state:change",n)}})}(),window.KGTableOfContents={App:{},Models:{},Collections:{},Views:{Collections:{},Items:{},Layouts:{}},Templates:{},Modules:{},fw:{}},"undefined"!=typeof KGPugpigCore&&(KGTableOfContents.fw=KGPugpigCore.fw),KGTableOfContents.App=KGTableOfContents.App||{},function(){KGTableOfContents.App=KGPugpigCore.Extensions.Application.extend({name:"KGTableOfContents",appState:{},initialize:function(){_.bindAll(this,"startView","onToggle","onAppStateChange"),this.module("logger",KGPugpigCore.Modules.Logger),this.module("theme",KGTableOfContents.Modules.Theme),this.isStarted=!1,this._appCh.on("toggle:tableofcontents",this.onToggle),this._appCh.on("app:change:state",this.onAppStateChange)},onBeforeStart:function(e){_.extend(this.options,e);var n=$("#KGPugpigReader");0===$("#KGTableOfContents").length&&n.append('<div id="KGTableOfContents" class="cleanslate">'),this.$el=n.find("#KGDocViewer")},onStart:function(){var e=this.getOption("idEdition")||!1;this.addRegions({main:"#KGTableOfContents"}),$.when(this._appCh.request("feed:get:editions",{id:e}),this._appCh.request("feed:get:promos")).done(this.startView)},startView:function(e,n){this.isStarted=!0,this.rootView=new KGTableOfContents.Views.AppRoot({edition:e,promos:n,screenName:"/Edition/PageView"}),this.getRegion("main").show(this.rootView)},onAppStateChange:function(e){return this.appState.idEdition!==e.idEdition?void this.start(e):void(this.isStarted===!0&&this.rootView.setReadingArticle(e.idArticle))},onToggle:function(){this.rootView.toggleDisplay(!this.rootView.isDisplayed)},hide:function(){this.isStarted&&this.rootView.toggleDisplay(!1)},stop:function(){this.isStarted=!1},onDestroy:function(){this.isStarted&&(this.isStarted=!1,this.removeRegion("main"))}})}(),this.KGTableOfContents=this.KGTableOfContents||{},this.KGTableOfContents.Templates=this.KGTableOfContents.Templates||{},this.KGTableOfContents.Templates.AppRoot=function(e){var n="";_.escape;return n+='<div class="KGTableOfContents_headeleOfContents_brandLogo"></div><div class="KGTableOfContents_editionRegion"></div><button aria-label="Close Table of Contents" class="KGTableOfContents_close js-panel-close icon icon-close"></button><div class="KGTableOfContents_promosContainer"></div></div><div class="KGTableOfContents_sections KGPanel_content"></div>'},this.K o+='<a draggable="false" href="'+(null==(n=e.url.href)?"":n)+'" class="KGTableOfContents_article_link" style="'+(null==(n=e.cssStyle)?"":n)+'"> ',e.hasIcons&&(o+=' <figure class="KGTableOfContents_article_figure" data-image-nozoom><span class="KGTableOfContents_article_icon" style="background-image: url('+(null==(n=e.url.icon)?"":n)+')"></span></figure> '),o+=' <p class="KGTableOfContents_article_title">'+a(e.title)+"</p></a>"},this.KGTableOfContents.Templates.Edition=function(e){var n,o="";_.escape;return o+='<div class="KGTableOfContents_editionMetadata"><p class="KGTableOfContents_editionMetadataTitle">'+(null==(n=e.title)?"":n)+"</p></div>"},this.KGTableOfContents.Templates.Section=function(e){var n,o="",a=_.escape;Arrayo+=' <h2 class="KGTableOfContents_section_title" style="'+(null==(n=e.cssStyle)?"":n)+'"> '+a(e.name)+" </h2> "),o+=' <div class="KGTableOfContents_articles"></div></div>'},KGTableOfContents.Modules=KGTableOfContents.Modules||{},function(){KGTableOfContents.Modules.Theme=KGPugpigCore.Modules.Theme.extend({appChannelName:"KGTableOfContents",cssNamespace:"#KGTableOfContents.cleanslate",ssName:"KGTableOfContents-css-theme",themePrefix:"TableOfContents",keys:{text:["Section","Article","ArticleActive"],texture:["BackgroundColor","Header_BackgroundColor","Section_BackgroundColor","Section_BorderColor","ArticleRow_BackgroundColor","Article_BackgroundColor","Article_BorderColor"],layout:["BrandLogo","Section_BorderWidth","Section_BorderStyle","Article_BorderWidth","Article_BorderStyle"]},textElements:{".KGTableOfContents_editionMetadataTitle":"TableOfContents_Header",".KGTableOfContents_section_title":"TableOfContents_Section",".KGTableOfContents_article":"TableOfContents_Article",".KGTableOfContents_article.KGTableOfContents_article-isActive":"TableOfContents_ArticleActive"},layoutElements:{".KGTableOfContents_sections":{backgroundColor:"TableOfContents_Body_BackgroundColor"},".KGTableOfContents_article":{borderBottomColor:"TableOfContents_Article_BorderBottomColor",borderBottomWidth:"TableOfContents_Article_BorderBottomWidth",borderBntents_article_title":{webkitLineClamp:"TableOfContents_Article_NumberOfLines"},".KGTableOfContents_section_title":{borderBottomColor:"TableOfContents_Section_BorderBottomColor",borderBottomWidth:"TableOfContents_Section_BorderBottomWidth",borderBottomStyle:"TableOfContents_Section_BorderBottomStyle"},".KGTableOfContents_header":{backgroundColor:"TableOfContents_Header_BackgroundColor"},".KGTableOfContents_brandLogo":{backgroundImage:"BrandLogo"}}})}(),KGTableOfContents.Models=KGTableOfContents.Models||{},function(){KGTableOfContents.Models.Article=KGFeedParser.Models.Article.extend({name:"Article",appChannelName:"KGTableOfContents",initialize:function(e,n){this.options=n,this.setTocStyle(),this.setHasIcons(),this.setIle:function(){var e=this.options.collection.options.edition;this.set("tocStyle",e.get("tocStyle"))},setHasIcons:function(){var e=!1;e=!!this.get("tocStyle.iconplacement"),e=e&&!!this.get("url.icon"),this.set("hasIcons",e)},setIsHidden:function(){var e=this.get("display");this.set("isHidden","undefined"!=typeof e&&/hidden/i.test(e))},setCssStyle:function(){if(_.isEmpty(this.get("_categories")))return void this.set("cssStyle","");if("sections"===this.get("tocStyle").type)return void this.set("cssStyle","display: none");if(this.get("isHidden"))return void this.set("cssStyle","display: none");var e={},n=this.get("style.article")||"";n.split(";").forEach(function(n){var o=n.split(":");switch(o[0].trim()){case"color":e.color=o[1].trim();break;case"backgroundcolor":e["background-color"]=o[1].trim();break;case"hidden":e.display="none"}});var o=[];Object.keys(e).forEach(function(n){o.push(n+":"+e[n])}),this.set("cssStyle",o.join(";"))}})}(),KGTableOfContents.Collections=KGTableOfContents.Collections||{},function(){KGTableOfContents.Collections.Articles=KGPugpigCore.Extensions.Collection.extend({name:"Articles",appChannelName:"KGTableOfContents",model:KGTableOfContents.Models.Article,initialize:function(e,n){this.setTocStyle(),this.reset(n.articles)},setTocStyle:function(){var e=this.options.edition;this.options.tocStyle=e.get("tocStyle")}})}(),KGTableOfContents.Models=KGTableOfContents.Models||{},function(){KGTableOfContents.Models.Section=KGFeedParser.Models.Section.extend({name:"Section",appChannelName:"KGTableOfContents",initialize:function(){this.set("id",_.uuid()),this.setCssStyle(),this.setIconPlacement()},setIconPlacement:function(){if(this.get("hasIcons")){var e=!1,n=this.get("editionTocStyle")||"",o=/iconplacement/i;n.split(";").forEach(function(n){var a=n.split(":");o.test(a[0].trim())&&(e=a[1].trim())}),this.set("iconPlacement",e)}},setHasIcons:function(){this.set("hasIcons",this.get("hasIcons")&&!!this.get("iconPlacement"))},setCssStyle:function(){if(_.isEmpty(this.get("sectionTocStyle")))return"";var e={},n=this.get("sectionTocStyle").trim().split(";");if(n.forEach(function(n){if(0!==n.length){var o=n.split(":"),a=o[1].trim();switch(o[0].trim()){case"sectioncolor":e.color=a,e["border-color"]=a;break;case"sectionbackgroundcolor":e["background-color"]=a}}}),0===e.length)return void this.set("cssStyle","");var o=[];Object.keys(e).forEach(function(n){o.push(n+":"+e[n])}),this.set("cssStyle",o.join(";"))}})}(),KGTableOfContents.Collections=KGTableOfContents.Collections||{},function(){KGTableOfContents.Collections.Sections=KGFeedParser.Collections.Sections.extend({name:"Sections",appChannelName:"KGTableOfContents",model:KGTableOfContents.Models.Section,regex:{isHidden:/hidden/i},initialize:function(e,n){var o=this.getSectionsWithVisibleArticles(n.sections);this.reset(o)},getSectionsWithVisibleArticles:function(e){e=e||[];var n=[];return e.forEach(function(e){var o=e.get("art.isEmpty(e.get("style.article"))&&this.regex.isHidden.test(e.get("style.article"))||this.regex.isHidden.test(e.get("display"))},this);e.get("articles").length!==o.length&&n.push(e.toJSON())},this),n}})}(),KGTableOfContents.Views=KGTableOfContents.Views||{},function(){KGTableOfContents.Views.Items.Edition=KGPugpigCore.Extensions.ItemView.extend({name:"Edition",appChannelName:"KGTableOfContents",tagName:"div",className:"KGTableOfContents_edition",template:KGTableOfContents.Templates.Edition,attributes:function(){return{role:"menuitem"}}})}(),KGTableOfContents.Views.Items=KGTableOfContents.Views.Items||{},function(){KGTableOfContents.Views.Items.Section=KGPugpigCore.Extensions.LayoutView.extend({name:"Section",appChannelName:"KGTableOfContents",template:KGTableOfContents.Templates.Section,tagName:"section",className:"KGTableOfContents_section",templateHelpers:function(){return{getArticlesIcon:this.getArticlesIcon,getIconPlacement:this.getIconPlacement}},ui:{sectionTitle:".KGTableOfContents_section_title",sectionFigure:".KGTableOfContents_section_figure",section:".KGTableOfContents_section_container"},themePickerElements:["sectionTitle"],events:{"click @ui.sectionTitle":"onClickSectionTitle"},regions:{articles:".KGTableOfContents_articles"},initialize:function(){var e=this.model.get("articles").toJSON();this.articlesColl=new KGTableOfContents.Collections.Articles((void 0),{edition:this.getOption("edition"),articles:e}),this.articlesView=new KGTableOfContents.Views.Collections.Articles({collection:this.articlesColl,section:this.model})},onClickSectionTitle:function(){var e=this.articlesColl.at(0),n=this.articlesView.children.findByModel(e);n.trigger("click")},hideSectionTitle:function(){this.ui.sectionTitle.addClass("is-hidden"),this.ui.sectionFigure.addClass("is-hidden")},onRender:function(){this.getRegion("articles").show(this.articlesView)},resetActiveArticles:function(){this.articlesView.resetActiveArticles()},toggleActiveArticle:function(e){var n=this.articlesColl.find({id:e});"undefined"!=typeof n&&this.articlesView.children.findByModel(n).setActiveState(!0)}})}(),KGTableOfContents.Views.CollectileOfContents.Views.ColleeOfContenton(){return this.options},currentSectionTitle:void 0,onAddChild:function(e){var n=e.model.get("name");_.isEmpty(n)||n!==this.currentSectionTitle||e.hideSectionTitle(),this.currentSectionTitle=e.model.get("name")},onChildviewChildviewArticleClick:function(e,n,o){this.trigger("goto:article"),this._appCh.trigger("app:set:state",{idEdition:o.model.get("idEdition"),idArticle:o.model.get("id"),urlArticle:o.model.get("url.html")})}})}(),KGTableOfContents.Views.Items=KGTableOfContents.Views.Items||{},function(){KGTableOfContents.Views.Items.Article=KGPugpigCore.Extensions.ItemView.extend({name:"Article",appChannelName:"KGTableOfContents",template:KGTableOfContents.Templates.Article,tagName:"li",className:"KGTableOfContents_article",attributes:function(){return{style:this.model.get("cssStyle"),role:"menuitem"}},themePickerElements:[".KGTableOfContents_article"],events:{click:"onArticleClick"},onArticleClick:function(e){e.preventDefault(),$("body").hasClass("isDragging")||this.trigger("click")},setActiveState:function(e){this.$el.toggleClass(this.className+"-isActive",e),e!==!0||_.isEmpty(this.$el.attr("style"))?e!==!1||_.isEmpty(this.articleCssStyle)||this.$el.attr("style",this.articleCssStyle):/hidden/i.test(this.model.get("style.article"))||this.$el.removeAttr("style")}})}(),KGTableOfContents.Views.Collections=KGTableOfContents.Views.Collections||{},function(){KGTableOfContents.Views.Collections.Articles=KGPugpigCore.Extensions.CollectionView.extend({name:"Articles",appChannelName:"KGTableOfContents",tagName:"ul",className:function(){return this.getClassName()},childView:KGTableOfContents.Views.Items.Article,childViewEventPrefix:"article",childViewOptions:function(){return this.options},getClassName:function(){var e=[],n=this.getOption("section");if(n.get("hasIcons"))switch(n.get("iconPlacement")){case"left":e.push("KGTableOfContents_articles-hasIcons");break;case"rableOfContents_articles-hasIcons-isRightAlign");break;case"none":e=[]}return e.join(" ")},resetActiveArticles:function(){this.children.forEach(function(e){e.setActiveState(!1)})},hideArticles:function(){this.$el.addClass("is-hidden")}})}(),KGTableOfContents.Views=KGTableOfContents.Views||{},function(){KGTableOfContents.Views.AppRoot=KGPugpigCore.Extensions.PanelAppRoot.extend({name:"AppRoot",appChannelName:"KGTableOfContents",tagName:"main",className:"KGTableOfContents",template:KGTableOfContents.Templates.AppRoot,panelPosition:"left",modalref:"tableofcontents",appPreRender:!0,regions:{edition:".KGTableOfContents_editionRegion",sections:".KGTableOfContents_sections",promos:".KGTableOfContents_promosContainer"},ui:{header:".KGTableOfContents_header",sections:".KGTableOfContents_sections",brandLogo:".KGTableOfContents_brandLogo"},themePickerElements:["header"],onInitialize:function(){_.bindAll(this,"onSectionsScroll");var e=this.getOption("edition");_.isEmpty(this._appCh.request("theme:key","BrandLogo"))&&(this.editionView=new KGTableOfContents.Views.Items.Edition({model:e})),this.sectionsColl=new KGTableOfContents.Collens:e._sections}),this.sectionsView=new KGTableOfContents.Views.Collections.Sections(_.extend(this.options,{collection:this.sectionsColl})),this.promosColl=new KGDocPicker.Collections.Promos,this.promosCollcPicker.Views.Collections.Promos({collection:this.promosColl,screenName:this.options.screenName}),this.listenTo(this.sectionsView,"goto:article",this.onGotoArticle)},onRender:function(){this.editionView?(this.el.classList.add("KGTableOfContents_editionHeader"),this.getRegion("edition").shondLogo.addCsVisible"),this.getRegion("promos").show(this.promosView),this.getRegion("sections").show(this.sectionsView),this.getRegion("sections").$el.on("scroll",this.onSectionsScroll)},onShow:function(){var e=this._appCh.request("app:get:state");this.setReadingArticle(e.idArticle)},onToggleDisplay:function(e){var n=e?"TableOfContentsOpened":"TableOfContentsClosed";if(e){var o=null,a=th>0&&(o=a[0]),this.promosView.filterPromos(o,this.options.screenName);var i=$(window).height()-$(this.ui.header).height();this.ui.sections.css({height:i})}e||(this._appCh.trigger("app:overlay:hide",this.modalref),this._appCh.trigger("app:set:trigger",this.modalref)),this.sendAnalyticsEvent(n)},onGotoArticle:function(){this.toggleDisplay(!1)},setReadingArticle:function(e){if("undefined"!=typeof e){this.sectionsView.children.forEach(function(e){e.resetActiveArticles()});var n,o=this.sectionsColl.getSectionByIdArticle(e);"undefined"!=typeof o&&(n=this.sectionsView.children.findByModel(o)),"undefined"!=typeof n&&n.toggleActiveArticle(e)}},onSectionsScroll:function(e){var n=$(e.target);this.ui.header.toggleClass("KGTableOfContents_header-isOverflow",!!n.scrollTop())},sendAnalyticsEvent:function(e){this._appCh.trigger("analytics:hit",{type:"event",eventCategory:"/Edition/PageView",eventAction:e})}})}(),window.KGThumbnailsNav={App:{},Models:{},Collections:{},Views:{Collections:{},Items:{},Layouts:{}},Templates:{},Modules:{},fw:{}},"undefined"!=typeof KGPugpigCore&&(KGThumbnailsNav.fw=KGPugpigCore.fw),KGThumbnailsNav.App=KGThumbnailsNav.App||{},function(){KGThumbnailsNav.App=KGPugpigCore.Extensions.Application.extend({name:"KGThumbnailsNav",initialize:function(){_.bindAll(this,"startView","onToggle","onAppGotoArticle"),this.module("logger",KGPugpigCore.Modules.Logger),this.module("theme",KGThumbnailsNav.Modules.Theme),this.isStarted=!1,this._appCh.on("toggle:thumbnailsnav",this.onToggle),this._appCh.on("app:change:state",this.onAppGotoArticle)},onBeforeStart:function(e){_.extend(this.options,e),_.isUndefined(this.options.appContain=$(this.options.appContainer),0===this.$appContainer.length&&$("#KGPugpigReader").append('<div id="KGThumbnailsNav" class="cleanslate">')),this.$appContainer=$(this.options.appContainer)},onStart:function(){this.addRegions({main:this.$appContainer}),this._appCh.request("feed:get:editions",{id:this.getOption("idEdition")}).done(this.startView)},startView:function(e){this.rootView=new KGThumbnailsNav.Views.AppRoot({sections:e._sections}),this.getRegion("main").show(this.rootView),this.isStarted=!0},onAppGotoArticle:function(e){this.isStarted===!0&&e.idArticle&&this.rootView.setActiveArticle(e.idArticle)},onToggle:function(e){this.isStarted!==!0?this.start(e):this.rootView.toggleDisplay(!this.rootView.isDisplayed),this.sendAnalyticsScreenView(!1)},sendAnalyticsScreenView:function(){this._appCh.trigger("analytics:hit",{type:"screenview",screenName:"/Edition/Navigator"})},onDestroy:function(){this.isStarted&&(this.isStarted=!1,this.removeRegion("main"))}})}(),this.KGThumbnailsNav=this.KGThumbnailsNav||{},this.KGThumbnailsNav.Templates=this.KGThumbnailsNav.Templates||{},this.KGThumbnailsNav.Templates.AppRoot=function(e){var n="";_.escape;return n+='<div class="KGThumbnailsNav_sections"></div>'},this.KGThumbnailsNav.Templates.Article=function(e){var n,o="",a=_.escape;Array.prototype.join;return o+='<figure class="KGFigure KGThumbnailsNav_article_figure KGFigure KGThumbnailsNav_article_figure-'+(null==(n=e.pageType)?"":n)+'"> ',e.hasThumbnails&&(o+=' <img src="'+(null==(n=e.url.thumbnail)?"":n)+'"> '),o+=' </figure><div class="KGThumbnailsNav_article_title"><p>'+a(e.title)+"</p></div>"},this.KGThumbnailsNav.Templates.Section=function(e){var n,o="",a=_.escape;return o+='<h1 class="KGThumbnailsNav_section_title" style="'+(null==(n=e.getSectionCssStyle())?"":n)+'">'+a(e.name)+'</h1><div class="KGThumbnailsNav_articles"></div>'},KGThumbnailsNav.Modules=KGThumbnailsNav.Modules||{},function(){KGThumbnailsNav.Modules.Theme=KGPugpigCore.Modules.Theme.extend({appChannelName:"KGThumbnailsNav",cssNamespace:"#KGThumbnailsNav.cleanslate",ssName:"KGThumbnailsNav-css-theme",themePrefix:"ThumbnailsNav",keys:{text:["SectionTitle","ArticleTitle"],texture:[],layout:[]},textElements:{".KGThumbnailsNav_section_title":"ThumbnailsNav_SectionTitle"},layoutElements:{".KGThumbnailsNav":{backgroundColor:"ThumbnailsNav_BackgroundColor"},".KGThumbnailsNav_article-isReading":{backgroundColor:"ThumbnailsNav_IsReadingArticle_BackgroundColor"}}})}(),KGThumbnailsNav.Views.Items=KGThumbnailsNav.Views.Items||{},function(){KGThumbnailsNav.Views.Items.Section=KGPugpigCore.Extensions.LayoutView.extend({name:"Section",appChannelName:"KGThumbnailsNav",template:KGThumbnailsNav.Templates.Section,tagName:"section",className:"KGThumbnailsNav_section",ui:{title:".KGThumbnailsNav_section_title"},regions:{articles:".KGThumbnailsNav_articles"},templateHelpers:function(){return{getSectionCssStyle:this.getSectionCssStyle}},initialize:function(){_.bindAll(this,"getSectionCssStyle","checkSectionTitleWidth"),this.articlesView=new KGThumbnailsNav.Views.Collections.Articles({collection:this.model.get("articles")}),this.listenTo(this.articlesView,"article:reset:active",this.resetActiveArticles),this.listenTo(this.articlesView,"articles:width",this.checkSectionTitleWidth)},onRender:function(){this.getRegion("articles").show(this.articlesView)},checkSectionTitleWidth:function(e){if(this.ui.title.outerWidth(!0)0)+parseInt(this.uithis.ui.title.css("padding-left"),10)+parseInt(this.ui.title.css("padding-right"),10);this.ui.title.width(e-n)}},getSectionCssStyle:function(){if(_.isEmpty(this.model.get("sectionTocStyle")))return"";var e={},n=this.model.get("sectionTocStyle").trim().split(";");if(_.forEach(n,function(n){if(!_.isEmpty(n)){var o=n.split(":"),a=o[1].trim();switch(o[0].trim()){case"sectioncolor":e.color=a,e["border-color"]=a;break;case"sectionbackgroundcolor":e["background-color"]=a}}}),_.isEmpty(.forEach(Object.keys(e)ction(e){var n=this.model.get("articles").find({id:e});if(!_.isUndefined(n)){var o=this.articlesView.children.findByModel(n);o.setActiveState(!0)}},resetActiveArticles:function(){this.articlesView.resetActiveArticles()}})}(),KGThumbnailsNav.Views.Collections=KGThumbnailsNav.Views.Collections||{},function(){KGThumbnailsNav.Views.Collections.Sections=KGPugpigCore.Extensions.CollectionView.extend({name:"Sections",appChannelName:"KGThumbnaihildViewOptions:function(){return this.options},initialize:function(){this.$window=$(window)},onChildviewChildviewArticleClick:function(e,n,o){this.trigger("article:click",o.model)},onChildviewChildviewArticleActive:function(e,n,o){var a=o.$el[0].getBoundingClientRect(),i=a.left+a.width/2-this.$window.width()/2+this.$el.scrollLeft();this.transitionScroll(this.$el,i,100)},onChildviewChildviewArticleResetActive:function(){this.resetActiveArticles()},resetActiveArticles:function(){this.children.forEach(function(e){e.resetActiveArticles()})},transitionScroll:function(e,n,o){var a=e.scrollLeft(),i=n-a,t=0,r=5,g=i/o;if(0!==i){var d=function(){t+=r,e.scrollLeft(a+g*t),t<o&&setTimeout(function(){d()},r)};d()}}})}(),KGThumbnailsNav.Views.Items=KGThumbnailsNav.Views.Items||{},function(){KGThumbnailsNav.Views.Items.Article=KGPugpigCore.Extensions.ItemView.extend({name:"Article",appChannelName:"KGThumbnailsNav",template:KGThumbnailsNav.Templates.Article,tagName:"a",className:"KGThumbnailsNav_article",ui:{title:".KGThumbnailsNav_article_title",figure:".KGThumbnailsNav_article_figure",ribbon:".KGThumbnailsNav_article-isReading"},themePickerElements:["ribbon"],events:{click:"onArticleClick"},behaviors:{FiguresLoader:{behaviorClass:KGPugpigCore.Behaviors.FiguresLoader}},onArticleClick:function(){this.trigger("reset:active"),this.setActiveState(!0),this.trigger("click")},setActiveState:function(e){this.$el.toggleClass(this.className+"-isActive",e),e===!0?(this.trigger("active"),this.ui.figure.prepend('<div class="KGThumbnailsNav_article-isReading">')):this.$el.find(".KGThumbnailsNav_article-isReading").remove()}})}(),KGThumbnailsNav.Views.Collections=KGThumbnailsNav.Views.Collections||{},function(){KGThumbnailsNav.Views.Collections.Articles=KGPugpigCore.Extensions.CollectionView.extend({name:"Articles",appChannelName:"KGThumbnailsNav",childView:KGThumbnailsNav.Views.Items.Article,childViewEventPrefix:"article",articlesWidth:0,comparator:function(e){return"post"===e.get("pageType")&&e.get("url.pdf")?1:0},onAttach:function(){this.children.forEach(function(e){this.articlesWidth+=e.$el.outerWidth(!0)},this),this.trigger("articles:width",this.articlesWidth)},resetActiveArticles:function(){this.children.forEach(function(e){e.setActiveState(!1)})}})}(),KGThumbnailsNav.Views.Layouts=KGThumbnailsNav.Views.Layouts||{},function(){KGThumbnailsNav.Views.AppRoot=KGPugpigCore.Extensions.PanelAppRoot.extend({name:"AppRoot",appChannelName:"KGThumbnailsNav",tagName:"main",className:"KGThumbnailsNav",template:KGThumbnailsNav.Templates.AppRoot,panelPosition:"bottom",modalref:"thumbnailsnav",regions:{sections:".KGThumbnailsNav_sections"},ui:{container:".KGThumbnailsNav_sections"},themePickerElements:["container"],onInitialize:function(){_.bindAll(this,"onArticleClick"),this.sectionsView=new KGThumbnailsNav.Views.Collections.Sections({collection:this.getOption("sections"),activeArticle:this.getOption("activeArticle")}),this.listenTo(this.sectionsView,"article:click",this.onArticleClick)},onRender:function(){this.getRegion("sections").show(this.sectionsView)},onShow:function(){var e=this._appCh.request("app:get:state");this.setActiveArticle(e.idArticle)},onArticleClick:function(e){var n={idEdition:e.get("idEdition"),idArticle:e.get("id"),urlArticle:e.get("url.html")};this._appCh.trigger("app:set:state",n)},setActiveArticle:function(e){this.sectionsView.resetActiveArticles();var n=this.getOption("sections").getSectionByIdArticle(e),o=this.sectionsView.children.findByModel(n);_.isUndefined(o)||o.toggleActiveArticle(e)}})}(),window.KGAccount={App:{},Models:{},Collections:{},Views:{Collections:{},Items:{}},Templates:{},Modules:{},fw:{}},"undefined"!=typeof KGPugpigCore&&(KGAccount.fw=KGPugpigCore.fw),KGAccount.App=KGAccount.App||{},function(){KGAccount.App=KGPugpigCore.Extensions.Application.extend({name:"KGAccount",initialize:function(){_.bindAll(this,"onTogglePanel","onUserChangeIsLoggedIn","onAppChangeState","onPaywallChangeState","onClickPaywallLogin","onClickPaywallLogout","hasPaywall","isSilentPanelView"),this.module("logger",KGPugpigCore.Modules.Logger),this.module("theme",KGAccount.Modules.Theme),this.isStarted=!1,this._appCh.on("toggle:account",this.onTogglePanel),this._appCh.on("app:change:state",this.onAppChangeState),this._appCh.on("click:logout",this.onClickPaywallLogout),this._appCh.reply("account:has:paywall",this.hasPaywall)},onBeforeStart:function(e){this.options=e,$("#KGPugpigReader").append('<div id="KGAccount" class="cleanslate"><div id="KGAccountPanel"></div><div id="KGPaywall"></div></div>')},onStart:function(){this.addRegions({panel:"#KGAccountPanel",paywall:"#KGPaywall"}),this.setAuthConfig(this.options),this.isStarted=!0},setAuthConfig:function(e){e!==!1&&(this.options=_.extend(this.options,e),this.editionCreds=new KGAccount.Collections.EditionCredentials,e.providers[0].isTabActive=!0,this.providers=new KGAccount.Collections.AuthProviders(e.providers,{customText:e.customText}),this.user=new KGAccount.Models.User({},{editionCreds:this.editionCreds,providers:this.providers}),this.user.on("change:isLoggedIn",this.onUserChangeIsLoggedIn),this.setupAuthPanel(e),this.customText=e.customText,this.setupPaywallModal(),this.user.fetch())},setupAuthPanel:function(e){this.isSilentPanelView()||(this.panelView=new KGAccount.Views.Panel({user:this.user,customText:e.customText}))},setupPaywallModal:function(){this.paywallModel=new KGAccount.Models.Paywall((void 0),{customText:this.customText}),this.paywallModal=new KGAccount.Views.Paywall({model:this.paywallModel}),this.paywallModal.on("is:on",this.onPaywallChangeState),this.paywallModal.on("is:off",this.onPaywallChangeState),this.paywallModal.on("click:login",this.onClickPaywallLogin)},onUserChangeIsLoggedIn:function(){this._appCh.trigger("user:change:login")},saveAuthentication:function(){this.user&&this.user.save()},onTogglePanel:function(){if(this._cleanPaywall(),"undefined"!=typeof this.panelView)return this.getRegion("panel").hasView()===!1?void this.getRegion("panel").show(this.panelView):void this.panelView.toggleDisplay(!this.panelView.isDisplayed)},onAppChangeState:function(e){"undefined"!=typeof this.paywallModal&&this.paywallModal.checkNewState(e)},isSilentPanelView:function(){if(!this.options.providers||this.options.providers.length<=0)return!1;var e=_.find(this.options.providers,function(e){return e.silent});return!!e},hasPaywall:function(){return this.paywallModel&&this.paywallModel.isProtected()},onPaywallChangeState:function(){this.paywallModal.model.get("idArticle")?(this.getRegion("paywall").show(this.paywallModal),this._appCh.trigger("toggle:paywall",!0)):this.getRegion("paywall").hasView()&&this._cleanPaywall()},_cleanPaywall:function(){this._appCh.trigger("toggle:paywall",!1),this.getRegion("paywall").empty({preventDestroy:!0})},onClickPaywallLogin:function(){this._cleanPaywall(),this.onTogglePanel()},onClickPaywallLogout:function(){this._cleanPaywall(),this.onTogglePanel()},hide:function(){this.isStarted&&this.panelView&&this.panelView.toggleDisplay(!1)}})}(),this.KGAccount=this.KGAccount||{},this.KGAccount.Templates=this.KGAccount.Templates||{},this.KGAccount.Templates.AuthProviderLoggedIn=function(e){var n,o="";_.escape,Array.prototype.join;return o+='<header class="KGAccountPanel_tabHeader"><h1 class="KGAccountPanel_tabLabel">'+(null==(n=e.customText.loginModalTitle)?"":n)+'<div class="icon icon-forward"></div></h1></header><section class="KGAccountPanel_tabContent"><h1>'+(null==(n=e.customText.subscriptionDetails.header)?"":n)+"</h1><p>Subscription status: <b>"+(null==(n=e.state)?"":n)+"</b></p><p>"+(null==(n=e.message)?"":n)+'</p><div class="KGAccountPanel_loggedOutButtonsContainer"><button class="KGAccountPanel_button-primary KGAccountPanel_button KGAccountPanel_btnLogout button button-primary">'+(null==(n=e.customText.subscriptionDetails.logoutButton)?"":n)+"</button></div> ",e.subscriptionUrl&&""!==e.subscriptionUrl&&(o+=' <a class="KGAccountPanel_button-secondary KGAccountPanel_button KGAccoundary" href="'+(null==(n=e.subscriptionUrl)?"":n)+'" target="_blank">'+(null==(n=e.customText.subscriptionDetails.updateButton)?"":n)+"</a> "),o+=" </section>"},this.KGAccount.Templates.AuthProviderLoggedOut=function(e){
var n,o="";_.escape,Array.prototype.join;return o+='<header class="KGAccountPanel_tabHeader"><h1 class="KGAccountPanel_tabLabel">'+(null==(n=e.customText.loginModalTitle)?"":n)+'<div class="icon icon-forward"></div></h1></header><section class="KGAccountPanel_tabContent"><form class="KGAccountPanel_formSignIn" action="'+(null==(n=e.endpoints.signin.url)?"":n)+'" method="'+(null==(n=e.endpoints.signin.method)?"":n)+'"><p>'+(null==(n=e.customText.headerLoggedOut)?"":n)+"</p> ",_.forEach(e.endpoints.signin.inputs,function(e){o+=' <div class="KGAccountPanel_formSignInWrapper"> ',o+="username"==e.name?' <span class="icon icon-account"></spanrk"></span> ',o+=' <input class="KGAccountPanel_formSignInInput" placeholder="'+(null==(n=e.label)?"":n)+'" autocomplete="'+(null==(n=e.autocomplete)?"":n)+'" type="'+(null==(n=e.type)?"":n)+'" name="'+(null==(n=e.name)?"":n)+'" class="'+(null==(n=e.className)?"":n)+'"></div> '}),o+=' <div class="KGAccountPanel_formSignInButtonContainer"><button class="KGAccountPanel_button-primary KGAccountPanel_button KGAccountPanel_btnLogin button button-primary">'+(null==(n=e.customText.loginButton)?"":n)+'</button></div><p class="KGAccountPanel_formSignInMessage '+(null==(n=e.messageClassName)?"":n)+'">'+(null==(n=e.message)?"":n)+"</p></form>"+(null==(n=e.customText.subscribeInstructions)?"":n)+"<br>"+(null==(n=e.customText.subscribeMessage)?"":n)+"</section>"},this.KGAccount.Templates.Panel=function(e){var n,o="";_.escape;return o+='<header class="KGAccountPanel_header KGPanel_content"><h1 class="KGAccountPanel_header_title">'+(null==(n=e.accountHeader)?"":n)+'</h1><button aria-label="Close Accotton><l_content"><div class="KGAccountPanel_userContainer"></div></div>'},this.KGAccount.Templates.Paywall=function(e){var n,o="";_.escape,Array.prototype.join;return o+='<div class="KGAccount_paywall_container" role="alertdialog"><div class="KGAccount_paywall_header"><div class="KGAccount_paywall_banner" role="banner"> ',e.alert.logo&&(o+=' <img src="'+(null==(n=e.alert.logo)?"":n)+'"> '),o+=' </div><div class="KGAccount_paywall_alert" role="alert"><p>'+(null==(n=e.alert.message)?"":n)+'</p></div></div><div class="KGAccount_paywall_contentInfo" role="contentinfo"><div class="KGAccount_paywall_contentInfo_text" role="text"><h1 class="KGAccount_paywall_articleTitle">'+(null==(n=e.article.title)?"":n)+'</h1><p class="KGAccount_paywall_summary">'+(null==(n=e.article.summary)?"":n)+'</p></div><div class="KGAccount_paywall_contentInfo_image"><img src="'+(null==(n=e.article.imageUrl)?"":n)+'" alt="'+(null==(n=e.article.title)?"":n)+'"></div></div><menu class="KGAccount_paywall_toolbar" type="toolbar"><button class="KGAccount_paywall_button-primary button button-primary js-btn-login" id="KGAccount_paywall_'+(null==(n=e.isLocked)?"":n)+"_"+(null==(n=e.editionId)?"":n)+'">'+(null==(n=e.alert.login_btnLabel)?"":n)+'</button> <a class="KGAccount_paywall_button-secondary button button-secondary" href="'+(null==(n=e.alert.subscribe_url)?"":n)+'" target="_blank">'+(null==(n=e.alert.subscribe_btnLabel)?"":n)+"</a></menu></div>"},this.KGAccount.Templates.User=function(e){var n,o="";_.escape,Array.prototype.join;return o+='<div class="KGAccountPanel_providers"></div> ',e.isLoggedIn===!1&&e.customText.subscriptionUrl&&(o+=' <div class="KGAccountPanel_btnSubscribe"><a class="KGAccountPanel_button-secondary KGAccountPanel_button button button-secondary" href="'+(null==(n=e.customText.subscriptionUrl)?"":n)+'" target="_blank">'+(null==(n=e.customText.subscriptionButton)?"":n)+"</a></div> "),o},KGAccount.Modules=KGAccount.Modules||{},function(){KGAccount.Modules.Theme=KGPugpigCore.Modules.Theme.extend({appChannelName:"KGAccount",cssNamespace:"#KGAccount.cleanslate",ssName:"KGAccount-css-theme",themePrefix:"Account",keys:{text:["HeaderTitle"],texture:["BackgroundColor","Body_BackgroundColor"],layout:[]},textElements:{".KGAccountPanel_userContainer":"Account",".KGAccountPanel_header_title":"Account_HeaderTitle",".KGAccountPanel_tabLabel":"Account_TabLabel",".KGAccountPanel_tabContent":"Account_TabContent",".KGAccountPanel_tabContent a":"Account_TabContentLink",".KGAccountPanel_tabContent .KGAccountPanel_formSignInInput":"Account_Input",".KGAccountPanel_userContainer a":"Account_Link",".KGAccountPanel .button.button-primary":"Account_PrimaryButton",".KGAccountPanel .button.button-secondary":"Account_SecondaryButton",".KGAccount_paywall":"Paywall",".KGAccount_paywall .button.button-primary":"Paywall_PrimaryButton",".KGAccount_paywall .button.button-secondary":"Paywall_SecondaryButton",".KGAccount_paywall .KGAccount_paywall_header":"Paywall_Header",".KGAccount_paywall .KGAccount_paywall_articleTitle":"Paywall_ArticleTitle",".KGAccount_paywall .KGAccount_paywall_summary":"Paywall_Summary"},layoutElements:{".KGAccountPanel_header":{backgroundColor:"Account_BackgroundColor"},".KGAccountPanel_body":{backgroundColor:"Account_Body_BackgroundColor"},".KGAccountPanel .button.button-primary":{borderColor:"Account_PrimaryButton_OutlineColor"},".KGAccountPanel .button.button-primary:hover":{borderColor:"Account_PrimaryButton_OutlineHoverColor"},".KGAccountPanel .button.button-secondary":{borderColor:"Account_SecondaryButton_OutlineColor"},".KGAccountPanel .button.button-secondary:hover":{borderColor:"Account_SecondaryButton_OutlineHoverColor"},".KGAccountPanel_tabLabel:hover .icon-forward":{fill:"Account_TabLabel_TextHoverColor"},".KGAccount_paywall .KGAccount_paywall_container":{backgroundColor:"Paywall_BackgroundColor"},".KGAccount_paywall .KGAccount_paywall_header":{backgroundColor:"Paywall_Header_BackgroundColor"},".KGAccount_paywall .KGAccount_paywall_contentInfo":{backgroundColor:"Paywall_Description_BackgroundColor"},".KGAccount_paywall .KGAccount_paywall_toolbar":{backgroundColor:"Paywall_ActionButton_BackgroundColor"},".KGAccount_paywall .button.button-primary":{borderColor:"Paywall_PrimaryButton_OutlineColor"},".KGAccount_paywall .button.button-primary:hover":{borderColor:"Paywall_PrimaryButton_OutlineHoverColor"},".KGAccount_paywall .button.button-secondary":{borderColor:"Paywall_SecondaryButton_OutlineColor"},".KGAccount_paywall .button.button-secondary:hover":{borderColor:"Paywall_SecondaryButton_OutlineHoverColor"}}})}(),KGAccount.Models=KGAccount.Models||{},function(){KGAccount.Models.AuthProvider=KGPugpigCore.Extensions.Model.extend({name:"AuthProvider",appChannelName:"KGAccount",defaults:{isLoggedIn:!1},regex:{delimiters:["{{","}}"],hasInputsInTemplate:/\{/,matchInputsValue:/([^:{}]+)/g},getTokenFromThirdParty:function(){return token=null,token},initialize:function(e,n){if(_.bindAll(this,"onSignIn","onVerify","onTokenExchange","onFetchEditionCredentials","onFetchCustomAnalytics","onRenewToken","onSignInFail","onVerifyFail","onRequestFail","onTokenExchangeFail"),this.options={customText:n.customText},this.basilStore=KGPugpigReader.BasilStore,this.uri=KGAccount.fw.URI,this.parser=new DOMParser,this.tryRenewToken=0,this.tryRefreshToken=0,this.setEndpoints(),this._appCh.reply("auth:userinfo",this.onFetchCustomAnalytics),this.get("cookieLogin")&&!this.get("isLoggedIn")&&this._loadCookieScript().then(function(e){e&&(console.info("%csignIn trigged due to retrieved token","color:purple;font-weight:bold;",e,this),this.triggerSignIn(e))}.bind(this)),this.get("isLoggedIn")||this.tokenExchange(),this.get("automaticLogin")===!0&&!this.get("isLoggedIn")){var o=[];this.get("endpoints").signin.inputs.forEach(function(e){o.push(e.name+"=LOCATION")}),this.signIn(o.join("&"))}},toggleIsTabAct?!this.get("isTabActive"):e,this.set("isTabActive",e),e},setEndpoints:function(){var e={};this.get("endpoints").forEach(function(n){var o={url:n.template,method:n.method,inputs:this._parseInputs(n.template,n.inputs),loginType:n.loginType?n.loginType.toLowerCase():void 0,loginFlow:n.loginFlow?n.loginFlow.toLowerCase():void 0,tokenExchangeData:n.tokenExchangeData?n.tokenExchangeData:void 0};e[n.type]=o},this),this.set("endpoints",e)},signIn:function(e){var n=this.get("endpoints"),o=this,a=n.implementation.loginType,i=n.implementation.loginFlow;if(console.info("%csignIn called","color:purple;font-weight:bold;",this.attributes),"external"===a&&"implicit"===i)return window.open(this.get("endpoints.signin").url,"_self");if("external"===a&&"pkce"===i){var t=crypto.getRandomValues(new Uint8Array(32));return o._abtobs(t).then(function(e){return o._abtobs(e)}).then(function(e){return o._urlsafebtoa(e)}).then(function(e){return o.basilStore.set("CODE_VERIFIER",e),o._bstoab(e)}).then(function(e){return crypto.subtle.digest("SHA-256",e)}).then(function(e){return o._abtobs(e)}).then(function(e){return o._urlsafebtoa(e)}).then(function(e){var n=o.get("endpoints.authorization").url,a=n+"&code_challenge="+e;window.open(a,"_self")})}this.set({message:""},{silent:!0});var r=this._buildRequestOptions(n.signin,e);return r.success=this.onSignIn,r.error=this.onSignInFail,$.ajax(r)},tokenExchange:function(e){var n=this,o=this.get("endpoints"),a=this.get("endpoints.implementation").loginType,i=this.get("endpoints.implementation").loginFlow;if(this.get("endpoints.redirect")&&"pkce"!==i){var t=this.get("endpoints.redirect"),r=this._getTokenizedValues(window.location.href,t.url);return void(r.token&&this.triggerSignIn(r.token))}if("external"===a&&"pkce"===i){var g=new URLSearchParams(window.location.search).get("code"),d=this.get("endpoints.implementation").tokenExchangeData;if(!g&&!e)return console.log("skipping, no code");var s=n.basilStore.get("CODE_VERIFIER"),c={grant_type:"authorization_code",code_verifier:s,code:encodeURIComponent(g)};d&&(c=Object.assign(c,d)),e&&(c=Object.assign(c,{grant_type:"refresh_token",refresh_token:e}));var f=this._buildRequestOptions(o.tokenexonTokenExchange,f.error=this.onTokenExchangeFail,$.ajax(f)}},triggerSignIn:function(e,n){var o={isLoggedIn:!0,loginToken:e,refreshToken:n};this.set(o),console.info("%conSignIn called","color:purple;font-weight:bold;",this.attributes),console.log("onSignIn triggering change:isLoggedIn"),this.trigger("change:isLoggedIn"),this.verify()},onSignIn:function(e){var n=this.parser.parseFromString(e,"text/xml"),o=n.getElementsByTagName("token"),a=n.getElementsByTagName("error");if(o&&o[0]){var i=o[0].childNodes[0].nodeValue;this.sendAnalyticsEvent("Login",null),this.triggerSignIn(i)}else a&&a[0]&&this.onSignInnticationError.getTokenError||"Connection failed.";this.set({isLoggedIn:!1,state:"connection error",hasError:!0,message:e,allowedIssues:!1})},onSignInError:function(e){console.info("%conSignInError","color:purple;font-weight:bold;",this.attributes);var n=e.getAttribute("status"),o=e.getAttribute("message");switch(n){case"notrecognised":}this.isLoggedIn&&console.info("%conSignInError Failed (probably renew) - logging out","color:purple;font-weight:bold;",this.attributes),this.set({hasError:!0,isLoggedIn:!1,message:o}),this.sendAnalyticsEvent("LoginFailed","KGAuthErrorSignIn")},onTokenExchange:function(e){if(console.info("%conTokenExchange called","color:purple;font-weight:bold;",e),!e||""===e)return console.error("OOOPS: Somehow called verify without a token");var e=JSON.parse(e),n=e.access_token,o=e.refresh_token;n&&this.triggerSignIn(n,o)},onTokenExchangeFail:function(e){var n=e.statusText;this.set({isLoggedIn:!1,state:"connection error",hasError:!0,message:nginToken");if(console.info("%cverify called","color:purple;font-weight:bold;",e,this.attributes),e){var n=this.get("endpoints"),o=this._buildRequestOptions(n.verify,"token="+encodeURIComponent(e));o.success=this.onVerify,o.error=this.onVerifyFail,$.ajax(o)}else console.error("OOOPS: Somehow called verify without a token")},onVerify:function(e){console.info("%conVerify called","color:purple;font-weight:bold;",this.attributes);var n=this.get("endpoints"),o=n.implementation.loginType,a=n.implementation.loginFlow,i=this.parser.parseFromString(e,"text/xml"),t=i.getElementsByTagName("subscription"),r=!(!t||!t[0])&&t[0].getAttribute("state"),g=!(!t||!t[0])&&t[0].getAttribute("message"),d=this.getUserInfo(t[0]),s=this.getCustomAnalytics(t[0]),c=this.getAllowedIssuesFromXml(ssues:c,ustch(r){case"unavailable":return void console.info("Verify call returned unavailable - doing nothing");case"stale":f.hasError=!0,"external"===o&&"pkce"===a?(console.info("%cRefreshing PKCE token","color:purple;font-weight:bold;",this.attributes),this.refreshToken()):this.get("endpoints.renewtoken")?(console.info("%cRenewing stale token","color:purple;font-weight:bold;",this.attributes),this.renewToken()):(console.info("%cLogging out stale token","color:purple;font-weight:bold;",this.attributes),this.logout())}this.set(f),this.trigger("updatenge:availableIssues")},onVerifyFail:function(){var e=this.options.customText.authenticationError.verifySubscriptionError||"Connection failed.";this.set({isLoggedIn:!1,state:"connection error",hasError:!0,message:e,allowedIssues:!1})},logout:function(){this.unset("loginToken"),this.unset("userinfo"),this.unset("allowedIssues"),this.unset("message"),this.unset("hasError"),this.basilStore.remove("CODE_VERIFIER"),this.set({isLoggedIn:!1}),this.trigger("change:isLoggedIn"),this.sendAnalyticsEvent("Logout"),this.trigger("update:localStorage",this,!1),this._appCh.trigger("change:availableIssues")},getUserInfo:function(e){var n={},o=e.getElementsByTagName("userinfo");if(o&&o[0]){var a=o[0].getElementsByTagName("category");if(a&&a[0])switch(a[0].getAttribute("scheme")){case"http://schema.pugpig.com/custom_analytics/username#15":n.username=a[0].getAttribute("value")}}return n},onFetchCustomAnalytics:function(){return this.get("customAnalytics")},getCustomAnalytics:f,a="http://schema.pugpig.com/custom_analytics/";if(o&&o[0])for(var i=o[0].getElementsByTagName("category"),t=0;t<i.length;t++){var r=i[t],g=r.getAttribute("scheme");if(g.includes(a)){d[1],term:r.getAttribute("term")})}}return n},getAllowedIssuesFromXml:function(e){var n=e[0].getElementsByTagName("issues");if(0===n.length)return"active"===e[0].getAttribute("state")?"all":[];var o=n[0].getElementsByTagName("issue");return _.map(o,function(e){return e.childNodes[0].nodeValue})},fetchEditionCredentials:function(e){var n=this.get("loginToken");console.info("%ceditionCredentials called","color:purple;font-weight:bold;",n,e,this.attributes),this.idEdition=e;var o=this.get("endpoints"),a="product_id="+e+"&token="+encodeURIComponent(n),i=this._buildRequestOptions(o.editioncredentials,a);i.success=this.onFetchEditionCredentials,$.ajax(i)},onFetchEditionCredentials:function(e){consoparser.parseFromString(e,"text/xml"),o=n.getElementsByTagName("credentials"),a=!(!o||!o[0])&&o[0].getElementsByTagName("error");if(o&&o[0]){if(a&&a[0])return void this.onFetchEditionCredentialsError(a[0]);var i=o[0].getElementsByTagName("userid")[0].childNodes[0].nodeValue,t=o[0].getElementsByTagName("password")[0].childNodes[0].nodeValue;this.trigger("new:creds",{edition:this.idEdition,provider:this.get("name"),userid:i,password:t})}},onFetchEditionCredentialsError:function(e){var n=e.getAttribute("status"),o=e.getAttribute("message");switch(n){case"notentitled":}this.set({hasError:!0,message:n+":"+o})},refreshToken:function(){this.tryRefreshToken++;var e=this.get("refreshToken");return this.tryRefreshToken<3&&e?void this.tokenExchange(e):(this.logout(),void this.trigger("chaget("loginToken");console.info("%crenew called","color:purple;font-weight:bold;",e,this);var n=this.get("endpoints"),o=this._buildRequestOptions(n.renewtoken,"token="+encodeURIComponent(e));o.success=this.onRenewToken,$.ajax(o)},onRenewToken:function(e){return this.tryRenewToken++,this.tryRenewToken<3?void this.onSignIn(e):(this.logout(),void this.trigger("change:message"))},onRequestFail:function(e,n,o){switch(e.status){case 0:o="Connection failed: "+n}this.set({hasError:!0,message:o})},_parseInputs:function(e,n){var o=[];if(this.regex.hasInputsInTemplate.test(e)){var a=this.uri.parse(e);o=Object.keys(a.queryKey).map(function(e){var n={};if(a.queryKey[e].indexOf("{")>-1){var o=a.queryKey[e].match(this.regex.matchInputsValue);return n.name=e,n.label=o[0],n.matchPattern=a.queryKey[e],n=_.extend(n,this._getInputAttributes(o[1]))}},this),o=_.filter(o,function(e){return"undefined"!=typeof e})}else o=n;return o},_getTokenizedValues:function(e,n){var o=this.regex.delimiters,a=new RegExp(o[0]+"(.*?)"+o[1],"g"),i=n.match(a),t=n.replace(a,"([\\s|\\S]*)"),r=t.replace("?","\\?"),g=e.match(r);if(!g)return{};if(!i)return e===n?{}:null;g=g.splice(1);var d=_.reduce(i,function(e,n,a){varce(o[1],"");return(e[i]=g[a])&&e},{});return d},_getInputAttributes:function(e){if("undefined"==typeof e)return{};e=e.split("");var n={};return n.autocomplete=!1,e.forEach(function(e){switch(e){case"C":n.capitalize=!0;break;case"A":n.autocomplete=!0;break;case"P":n.type="password"}}),n},S4:function(){return(65536*(1+Math.random())|0).toString(return(this.S4()+this.S4()+"-"+this.S4()+"-4"+this.S4().substr(0,3)+"-"+this.S4()+"-"+this.S4()+this.S4()+this.S4()).toLowerCase()},_buildRequestOptions:function(e,n){var o=this.basilStore.get("USER_UUID");o||(o=this._generateUUID(),this.basilStore.set("USER_UUID",o)),n=n?n+"&uuid="+o:"uuid="+o;var a={url:this._buildUrlFromTemplate(e,n),method:e.method,dataType:"text",async:!0,error:this.onRequestFail,timeout:2e4};return this.regex.hasInputsInTemplate.test(e.url)===!1&&(a.data=n),a},_defaultCookieHandler:function(){console.info("%cauthCookie using default handler","color:purple;font-weight:bold;",this)},_loadCookieScript:function(){var e=$.Deferred(),n=this;return _.loadScript({src:"/pugpig-ext/KGPugpigReader-CookieScript.js",className:"KGPugpigReader-script-cookie",onload:function(){var o="undefined"!=typeo_defaultCookieHandler();e.resolve(a)},onerror:function(){var o=n._defaultCookieHandler();e.resolve(o)}}),e},_buildUrlFromTemplate:function(e,n){if(this.regex.hasInputsInTemplate.test(e.url)===!1)return e.url;var o=e.url;return e.inputs.forEach(function(e){if(e.matchPattern){var a=_.getParameterByName(e.name,n);e.capitalize&&(a=a.toUpperCase()),o=o.replace(new RegExp(e.matchPattern,"gi"),a)}}),o},_urlsafebtoa:function(e){var n=btoa(e);return n=n.replaceAll("+","-"),n=n.replaceAll("/","_"),n=n.replaceAll("=","")},_abtobs:function(e){return new Promise(function(n,o){var a=new FileReader;a.onload=function(e){return n(a.result)},a.onabort=function(){return o("aborted")},a.onerror=function(e){return o(a.error)},a.readAsBinaryString(new Blob([e]))})},_bstoab:function(e){return new Promise(function(n,o){var a=new FileReader;a.onload=function(e){return n(a.result)},a.onabort=function(){return o("aborted")},a.onerror=function(e){return o(a.error)},a.readAsArrayBuffer(new Blob([e]))})},sendAnalyticsEvent:function(e,n){this._appCh.trigger("analytics:hit",{type:"event",eventCategory:"/Account/ExistingSubscriptions",eventAction:e,eventLabel:n})}})}(),KGAccount.Collections=KGAccount.Collections||{},function(){KGAccount.Collections.AuthProviders=KGPugpigCore.Extensions.Collection.extend({name:"AuthProviders",appChannelName:"KGAccount",model:KGAccount.Models.AuthProvider,getProviderByName:function(e){return"pugpig-not-defined"===e?this.first():this.findWhere({name:e})},getLoggedInProviders:function(){return this.filter({isLoggedIn:!0})},getLoggedInProvidersData:function(){return this.getLoggedInProviders().map(function(e){var n=e.toJSON();return dele{return this.pluck("name").indexOf(e)>-1},fetchEditionCredentials:function(e){var n=this.find(function(n){var o=n.get("allowedIssues");return"all"===o||_.isArray(o)&&o.indexOf(e)>-1});n.fetchEditionCredentials(e)},getUserLoginState:function(){var e=this.getLoggedInProviders();return!(!e||!e.length)&&e[0].get("state")}})}(),KGAccount.Models=KGAccount.Models||{},function(){KGAccount.Models.EditionCredential=KGPugpigCore.Extensions.Model.extend({name:"EditionCredential",appChannelName:"KGAccount",initialize:function(){_.bindAll(this,"onDestroy"),this.basilStore=KGPugpigReader.BasilStore,this.fetch(),this.on("destroy",this.onDestroy)},fetch:function(){var e=this.get("edition")+"_USER_ID",n=this.get("edition")+"_PASSWORD",o=this.basilStore.get(e),a=this.basilStore.get(n);if(o){var i=Object.keys(o),t=i.map(function(e){return{provider:e,user:o[e],password:a[e]}});this.set("accounts",_.extend(t,this.get("accounts")))}},save:function(){var e=this.get("edition")+"_USER_ID",n=this.get("edition")+"_PASSWORD",o={},a={};this.get("accounts").forEach(function(e){o[e.provider]=e.userid,a[e.provider]=e.password},this),this.basilStore.set(e,o),this.basilStore.set(n,a)},onDestroy:function(){this.basilStore.remove(ntials:function(e){this.get("accounts").push({userid:e.userid,password:e.password,provider:e.provider})},getCredentialsByProvider:function(e){return _.findWhere(this.get("accounts"),{provider:e})}})}(),KGAccount.Collections=KGAccount.Collections||{},function(){KGAccount.Collections.EditionCredentials=KGPugpigCore.Extensions.Collection.extend({name:"EditionCredentials",appChannelName:"KGAccount",model:KGAccount.Models.EditionCredential,regex:{matchEditionCred:/(.+)(_USER_ID|_PASSWORD)$/},initialize:function(){this.basilStore=KGPugpigReader.BasilStore,this.getLocalEditionsCreds()},addCredentials:function(e){var n=this.getCredentialsByEdition(e.idEdition);return n?void(n.getCredentialsByProvider(e.provider)||n.addCredentials(e)):void this.create({edition:e.edition,accounts:[{userid:e.userid,password:e.password,provider:e.provider}]})},getLocalEditionsCreds:function(){var e=[];this.basilStore.keys().forEach(function(n){var o=n.match(this.regex.matchEditionCred);o&&e.push(o[1])},this),e=_.uniq(e).map(function(e){return{edition:e}}),this.reset(e)},removeAll:function(){var e=_.clone(this.models);e.forEach(function(e){e.destroy()})},getCredentialsByEdition:function(e){return this.findWhere({edition:e})},getCredentialsByProvider:function(e){var n=this.getCredentialsByEdition(e.idEdition);return n.getCredentialsByProvider(e.authProvider)},hasEditionCredentials:function(e){return!!this.findWhere({edition:e})}})}(),KGAccount.Models=KGAccount.Models||{},function(){KGAccount.Models.User=KGPugpigCore.Extensions.Model.extend({name:"User",appChannelName:"KGAccount",initialize:function(e,n){_.bindAll(this,"hasAccessToArticle","isLoggedIn","hasAccessToEdition","onNewEditionCredentials","getEditionCredentials","onChangeIsLoggedIn"),this.basilStore=KGPugpigReader.BasilStore,this._appCh.reply("user:has:access:article",this.hasAccessToArticle),this._appCh.reply("user:has:access:edition",this.hasAccessToEdition),this._appCh.reply("user:is:loggedin",this.isLoggedIn),this._appCh.reply("user:creds",this.getEditionCredentials),this.providers=n.providers,this.providers.on("new:creds",this.onNewEditionCredentials),this.providers.on("update:localStorage",this.onChangeIsLoggedIn),this.editionCreds=n.editionCreds},fetch:function(){var e=this.basilStore.get("USER_SUBS");e&&e.forEach(function(e){e.allowedIssues="undefined"!=typeof e.allowedIssues&&e.allowedIssues;var n=this.providers.getProviderByName(e.name);"pugpig-not-defined"===e.name&&(e.name=n.get("name")),n.set(e,{silent:!0}),e.loginToken&&(console.log("Calling verify on startup with token",e.loginToken),n.verify())},this)},onChangeIsLoggedIn:function(e,n){this.save()},save:function(e){e=e||{};var n=this.providers.getLoggedInProvidersData();return e.isLoggedIn=!!n.length,e.state=this.providers.getUserLoginState(),this.set(e),0===n.length?(this.editionCreds.removeAll(),void this.basilStore.remove("USER_SUBS")):void(_.isEqual(this.basilStore.get("USER_SUBS"),n)||this.basilStore.set("USER_SUBS",n))},isLoggedIn:function(){return!!this.get("isLoggedIn")},getAllowedIssues:function(){var e=this.providers.getLoggedInProviders().map(function(e){return e.get("allowedIssues")});return e.indexOf("all")>-1?"all":_.uniq(_.flatten(e))},hasAccessToArticle:function(e,n){console.info("%chasAccessToArticle","color:blue;",e,n);var o=this._appCh.request("feed:is:protected",e,n);if(console.info("%cisProtected "+n,"color:green;font-weight:bold",o),"undefined"!=typeof o)return o===!1||!(!this.get("isLoggedIn")||!this.hasAccessToEdition(e))&&(!!this.editionCreds.hasEditionCredentials(e)||(this.providers.fetchEditionCredentials(e),-1))},hasAccessToEdition:function(e){var n=this._appCh.request("feed:is:edition:paid",e);if(n===!1)return!0;var o=this.getAllowedIssues();if("string"==typeof o&&"all"===o)return!0;var a=!!_.isArray(o)&&o.indexOf(e)>-1;return a},onNewEditionCredentials:function(e){this.editionCreds.addCredentials(e),this._appCh.trigger("check:creds")},getEditionCredentials:function(e){return this.editionCreds.getCredentialsByEdition(e)}})}(),KGAccount.Models=KGAccount.Models||{},function(){KGAccount.Models.Paywall=KGPugpigCore.Extensions.Model.extend({name:"Paywall",appChannelName:"KGAccount",initialize:function(e,n){_.bindAll(this,"save"),this.customText=n.customText},fetch:function(){"undefined"!=typeof this.state.idArticle&&this._appCh.request("feed:get:article",this.state).done(this.save)},validate:function(){if(this.isProtected()===!1)return this.clearState(),!1},save:function(e){var n=this,o=e.get("idEdition").replace(/\./g,"_");this.articleModel=e,this.set({editionId:o,isLocked:n.isProtected()?"Open":"Locked",idArticle:e.get("id"),article:{title:e.get("title"),summary:e.get("summary"),imageUrl:this.getArticleImageUrl(e)},alert:{logo:this._appCh.request("theme:key","BrandLogo"),message:this.customText.paywallMessage,login_btnLabel:this.customText.paywallLoginButton,subscribe_btnLabel:this.customText.subscriptionButton,subscribe_url:this.customText.subscriptionUrl}},{validate:!0})},clearState:function(){this.articleModel&&this.articleModel.set({}),this.set({idArticle:!1})},isProtected:function(){if(_.isUndefined(this.articleModel))return!1;var e=!1,n=this.get("idArticle")&&this.articleModel&&this.articleModel.get("isProtected");this.articleModel&&(e=this._appCh.request("user:has:access:article",this.articleModel.get("idEdition"),this.articleModel.get("id")));var o=this._appCh.request("user:has:access:edition",this.articleModel.get("idEdition"));return e===!1&&n||o===!1},checkNewState:function(e){"undefined"!=typeof e.idArticle&&(this.state=e,this.fetch())},getArticleImageUrl:function(e){return e.get("url.thumbnail")}})}(),KGAccount.Views=KGAccount.Views||{},function(){KGAccount.Views.Panel=KGPugpigCore.Extensions.PanelAppRoot.extend({name:"Panel",appChannelName:"KGAccount",tagName:"main",className:"KGAccountPanel",template:KGAccount.Templates.Panel,modalref:"account",regions:{user:".KGAccountPanel_userContainer"},ui:{header:".KGAccountPanel_header",body:".KGAccountPanel_body",buttons:".KGAccountPanel_button",links:".KGAccountPanel_userContainer a",inputs:".KGAccountPanel_userContainer .KGAccountPanel_formSignInInput"},themePickerElements:["header","body","buttons","links","inputs"],onInitialize:function(){_.bindAll(this,"onUserHasChangedIssues"),this.userView=new KGAccount.Views.User({model:this.options.user,collection:this.options.user.providers,customText:this.options.customText}),this._appCh.on("close:panel",this.panelClose),this.listenTo(this.userView,"childview:click:issues",this.onClickIssues),this._appCh.on("change:availableIssues",this.onUserHasChangedIssues)},onRender:function(){this.getRegion("user").show(this.userView)},onToggleDisplay:function(e){e===!0?this.sendAnalyticsScreenView():e===!1&&this._appCh.trigger("panel:account:close")},onUserHasChangedIssues:function(){if(this.isDisplayed){var e=function(){this._appCh.trigger("hide:presentable","account"),this._appCh.trigger("close:panel")}.bind(this);setTimeout(e,1e3)}},serializeData:function(){return{accountHeader:this.options.customText.accountPanelHeader}},onDestroy:function(){this._appCh.off("close:panel",this.panelClose)},sendAnalyticsScreenView:function(){this._appCh.trigger("analytics:hit",{type:"screenview",screenName:"/Account/ExistingSubscriptions"})}})}(),KGAccount.Views.Items=KGAccount.Views.Items||{},function(){KGAccount.Views.Items.AuthProvider=KGPugpigCore.Extensions.ItemView.extend({name:"AuthProvider",appChannelName:"KGAccount",className:function(){var e=["KGAccountPanel_authProvider","KGAccountPanel_tab"];return this.model.get("isTabActive")&&e.push("KGAccountPanel_tab-isActive"),e.join(" ")},ui:{tabLabel:".KGAccountPanel_tabLabel",form:".KGAccountPanel_formSignIn",btnLogin:".KGAccountPanel_btnLogin",btnLogout:".KGAccountPanel_btnLogout",message:".KGAccountPanel_formSignInMessage"},events:{"click @ui.tabLabel":"onClickTabLabel","submit @ui.form":"onFormSubmit","click @ui.btnLogout":"onClickLogout"},modelEvents:{"change:message":"render","change:isLoggedIn":"render"},getTemplate:function(){return this.model.get("isLoggedIn")===!0?KGAccount.Templates.AuthProviderLoggedIn:KGAccount.Templates.AuthProviderLoggedOut},serializeData:function(){var e=this.model.toJSON();return e.customText=this.opction()],e.endpoints.signin.inputs.forEach(function(e){e.className=e.capitalize?"KGAccountPanel_formSignInInput-isUppercase":"";var n=e.label;e.label="string"==typeof n?n.charAt(0).toUpperCase()+n.slice(1):n}),e.messageClassName=e.hasError?"KGAccountPanel_formSignInMessage-isError":"",e.subscriptionUrl=this.model.options.customText.subscriptionUrl,e},onClickTabLabel:function(){var e=this.model.toggleIsTabActive();this.$el.toggleClass("KGAccountPanel_tab-isActive",e)},onFormSubmit:function(){return this.startAuthorizingState(),this.model.signIn(this.ui.form.serialize()),!1},startAuthorizingState:function(){var e=this.options.customText[this.model.getIndexInCollection()];this.ui.message.removeClass("KGAccountPanel_formSignInMessage-isError"),this.ui.btnLogin.text(e.loginButtonAuthorising),this.ui.btnLogin.prepend('<div class="KGSpinner"><figure>'),this.ui.message.text(e.progressMessage)},onClickLogout:function(){this.model.logout()}})}(),KGAccount.Views=KGAccount.Views||{},function(){KGAccount.Views.User=KGPugpigCore.Extensions.CompositeView.extend({name:"User",appChannelName:"KGAccount",tagName:"section",className:"KGAccountPanel_user",template:KGAccount.Templates.User,childView:KGAccount.Views.Items.AuthProvider,childViewContainer:".KGAccountPanel_providers",childViewOptions:function(){return{customText:this.options.customTextfunction(e,n){this.render(),n&&this.trigger("user:hasLoggedIn")},serializeData:function(){var e=this.model.toJSON();return e.customText=this.options.customText,e}})}(),KGAccount.Views=KGAccount.Views||{},function(){KGAccount.Views.Paywall=KGPugpigCore.Extensions.LayoutView.extend({name:"Paywall",appChannelName:"KGAccount",tagName:"section",className:"KGAccount_paywall",template:KGAccount.Templates.Paywall,modalref:"paywall",ui:{alertdialog:'[role="alertdialog"]',btnLogin:".js-btn-login",header:".KGAccount_paywall_header",articleTitle:".KGAccount_paywall_articleTitle",summary:".KGAccount_paywall_summary",buttons:".KGAccount_paywall .button"},events:{"click @ui.btnLogin":"onClickBtnLogin",touchmove:"onTouchMovePaywall"},modelEvents:{change:"onChangeArticle","change:availableIssues":"onChangeArticle"
},themePickerElements:["header","articleTitle","summary","buttons"],initialize:function(){_.bindAll(this,"toggleVisibility","onPanelAccountClose","onCompleteClickBtnLogin","onCompleteRender"),this.isOn=!1,this._appCh.on("panel:account:close",this.onPanelAccountClose)},onRender:function(){this.model.isProtected()&&(this._appCh.trigger("app:overlay:show",this.modalref),this.toggleVisibility({state:!0,complete:this.onCompleteRender}))},onChangeArticle:function(){if("undefined"==typeof this.model||!this.model.hasOwnProperty("attributes")||0!==Object.getOwnPropertyNames(this.model.attributes).length){var e=this.model.get("idArticle")!==!1?this.model.get("idArticle"):this.model.articleModel.id,n=this._appCh.request("el.get("idEdition"),e);if(n||this.model.get("idArticle")===!1)return void this.turnOff();this.render(),this.trigger("is:on"),this.isOn=!0}},checkNewState:function(e){return e===!1||"undefined"==typeof e.idEdition?void this.turnOff():(this.model.state=e,void this.model.fetch())},turnOff:function(){this.isOn!==!1&&(this.isOn=!1,this.model.clearState(),this.trigger("is:off"),this._appCh.trigger("app:overlay:hide",this.modalref))},onCompleteRender:function(){this.model.get("idArticle")&&this.trigger("is:shown")},onPanelAccountClose:function(){this.checkNewState(this._appCh.request("app:get:state")),this.onChangeArticle()},onTouchMovePaywall:function(e){e.preventDefault()},onClickBtnLogin:function(e){e.stopPropagation(),this.toggleVisibility({state:!1,complete:this.onCompleteClickBtnLogin})},onCompleteClickBtnLogin:function(){this.trigger("click:login")},toggleVisibility:function(e){this.ui.alertdialog.transitionAttributes({"aria-hidden":!e.state},e)}})}(),window.KGEditionFilters={App:{},Models:{},Collections:{},Views:{Collections:{},Items:{},Layouts:{}},Templates:{},Modules:{},fw:{}},"undefined"!=typeof KGPugpigCore&&(KGEditionFilters.fw=KGPugpigCore.fw),KGEditionFilters.App=KGEditionFilters.App||{},function(){KGEditionFilters.App=KGPugpigCore.Extensions.Application.extend({name:"KGEditionFilters",initialize:function(){_.bindAll(this,"startView","onToggle"),this.module("logger",KGPugpigCore.Modules.Logger),this.module("theme",KGEditionFilters.Modules.Theme),this.isStarted=!1,this._appCh.on("toggle:editionfilters",this.onToggle)},onBeforeStart:function(e){_.extend(this.options,e),$("#KGPugpigReader").append('<div id="KGEditionFilters" class="cleanslate">'),this.$el=$("#KGPugpigReader").find("#KGEditionFilters")},onStart:function(){this.addRegions({main:"#KGEditionFilters"}),this._appCh.request("feed:get:filters").done(this.startView)},startView:function(e){this.isStarted=!0,this.rootView=new KGEditionFilters.Views.AppRoot({filters:e}),this.getRegion("main").show(this.rootView)},onToggle:function(e){this.isStarted!==!0?this.start(e):this.rootView.isDisplayed===!0?this.rootView.toggleDisplay(!1):this.rootView.toggleDisplay(!0)},hide:function(){this.isStarted&&this.rootView.toggleDisplay(!1)}})}(),this.KGEditionFilters=this.KGEditionFilters||{},this.KGEditionFilters.Templates=this.KGEditionFilters.Templates||{},this.KGEditionFilters.Templates.AppRoot=function(e){var n="";_.escape;return n+='<header class="KGEditionFilters_header KGPanel_content"><button class="KGEditionFilters_close js-panel-close icon icon-close"></button></header><section class="KGEditionFilters_body content KGPanel_content"><div class="KGEditionFilters_filtersContainer"></div></section>'},this.KGEditionFilters.Templates.Filter=function(e){var n,o="";_.escape;return o+=null==(n=e.label)?"":n},KGEditionFilters.Modules=KGEditionFilters.Modules||{},function(){KGEditionFilters.Modules.Theme=KGPugpigCore.Modules.Theme.extend({appChannelName:"KGEditionFilters",cssNamespace:"#KGEditionFilters.cleanslate",ssName:"KGEditionFilters-css-theme",themePrefix:"EditionFilters",textElements:{".KGEditionFilters_header_title":"EditionFilters_HeaderTitle",".KGEditionFilters_filter":"EditionFilters_Filter",".KGEditionFilters_filter-isActive":"EditionFilters_ActiveFilter"},layoutElements:{".KGEditionFilters_header":{backgroundColor:"EditionFilters_BackgroundColor"},".KGEditionFilters_body":{backgroundColor:"EditionFilters_Body_BackgroundColor"}}})}(),KGEditionFilters.Models=KGEditionFilters.Models||{},function(){KGEditionFilters.Models.Filter=KGPugpigCore.Extensions.Model.extend({name:"Filter",appChannelName:"KGEditionFilters"})}(),KGEditionFilters.Collections=KGEditionFilters.Collections||{},function(){KGEditionFilters.Collections.Filters=KGPugpigCore.Extensions.Collection.extend({name:"Filters",appChannelName:"KGEditionFilters",model:KGEditionFilters.Models.Filter,initialize:function(e,n){var o=n.filters;this.set(o)},filterBy:function(e){return this.filter(function(n){return"all"===n.get("term")||e.includes(n.get("term"))})},comparator:function(e){var n="";return e.get("groupTag")&&(n=e.get("groupTag")+" "),n+="all"===e.get("term")?"000":e.get("term"),n.toLowerCase()}})}(),KGEditionFilters.Views.Items=KGEditionFilters.Views.Items||{},function(){KGEditionFilters.Views.Items.Filter=KGPugpigCore.Extensions.ItemView.extend({name:"Filter",appChannelName:"KGEditionFilters",tagName:"li",className:function(){var e=["KGEditionFilters_filter"];return this.model.get("term")===this.options.activeTerm.term&&this.model.get("groupTag")===this.options.activeTerm.groupTag&&e.push("KGEditionFilters_filter-isActive"),e.join(" ")},template:KGEditionFilters.Templates.Filter,events:{click:"onClickFilter"},initialize:function(){this.isActive=this.model.get("term")===this.options.activeTerm.term&&this.model.get("groupTag")===this.options.activeTerm.groupTag},onClickFilter:function(){this.isActive!==!0&&("~pinned"===this.model.get("groupTag")||"~webpinned"===this.model.get("groupTag")?(this._appCh.trigger("app:set:state",{idEdition:this.model.get("idEdition")}),this.trigger("click:pinned")):(this.isActive=!0,this.el.classList.add("KGEditionFilters_filter-isActive"),this.trigger("click")),this.sendAnalyticsEvent("Filter",this.model.get("label")))},resetActiveState:function(){this.isActive=!1,this.el.classList.remove("KGEditionFilters_filter-isActive")},sendAnalyticsEvent:function(e,n){this._appCh.trigger("analytics:hit",{type:"event",eventCategory:"/Storefront",eventAction:e,eventLabel:n})}})}(),KGEditionFilters.Views.Collections=KGEditionFilters.Views.Collections||{},function(){KGEditionFilters.Views.Collections.Filters=KGPugpigCore.Extensions.CollectionView.extend({name:"Filters",appChannelName:"KGEditionFilters",tagName:"ul",className:"KGEditionFilters_filters",childView:KGEditionFilters.Views.Items.Filter,childViewEventPrefix:"filter",childEvents:{click:"onClickFilter"},childViewOptions:function(){return{activeTerm:this.options.activeTerm}},initialize:function(e){this.filters=this.filters||e.filters,_.bindAll(this,"filterVisible"),this._appCh.on("change:availableIssues",this.filterVisible),this.hideEmptyFilters=this._appCh.request("app:has:feature","hideEmptyFilters"),this.oCollection=new KGEditionFilters.Collections.Filters((void 0),{filters:e.filters}),this.listenTo(this.collection,"reset",this.render),this.filterVisible()},onClickFilter:function(e){this.resetActiveFilters(e),this._appCh.trigger("app:set:state",{idEdition:void 0,filterTerm:e.model.attributes})},filterVisible:function(e){if(this.hideEmptyFilters){const n=this.filters.reduce(function(e,n){const o=this._appCh.request("should:show:edition",n);return o&&e.push(n.term),e}.bind(this),[]);console.info("%cchanging:visible:filters","color:purple",e||n);const o=this.oCollection.filterBy(e||n);this.collection.reset(o),this.render()}},resetActiveFilters:function(e){var n=this.children.filter(function(n){return n.isActive&&n.cid!==e.cid});n.forEach(function(e){e.resetActiveState()})}})}(),KGEditionFilters.Views=KGEditionFilters.Views||{},function(){KGEditionFilters.Views.AppRoot=KGPugpigCore.Extensions.PanelAppRoot.extend({name:"AppRoot",appChannelName:"KGEditionFilters",tagName:"main",className:"KGEditionFilters",template:KGEditionFilters.Templates.AppRoot,panelPosition:"left",modalref:"editionfilters",search:window.location.search,regions:{filters:".KGEditionFilters_filtersContainer"},ui:{header:".KGEditionFilters_header",filters:".KGEditionFilters_filter"},themePickerElements:["header","filters"],onInitialize:function(){this.filtersColl=new KGEditionFilters.Collections.Filters((void 0),{filters:this.options.filters}),this.activeTerm=this.filtersColl.first().attributes,this.activeTerm=this.getFilterFromUrl(this.filtersColl,this.activeTerm),this.filtersView=new KGEditionFilters.Views.Collections.Filters({collection:this.filtersColl,filters:this.options.filters,activeTerm:this.activeTerm}),this.listenTo(this.filtersView,"filter:click",this.onClickFilter),this.listenTo(this.filtersView,"filter:click:pinned",this.onClickFilter)},onRender:function(){this.getRegion("filters").show(this.filtersView)},getFilterFromUrl:function(e,n){if(!this.search||""===this.search)return n;var o,a=this.search.split("?")[1].split("=");if(a[0]&&"filter"===a[0]&&a[1]&&(o=decodeURI(a[1])),!o)return n;var i=e.find(function(e){return e.get("label")===o});return i?i.attributes:n},onClickFilter:function(e){this.activeTerm=e.model.attributes,this._appCh.trigger("app:change:filters"),this.toggleDisplay(!1)}})}();
var KGPugpigReaderStyle = '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';

KGPugpigReader = new KGPugpigCore.App();


var hasConfigMode = window.location.search.indexOf('configuration_mode=true') !== -1;
var head = document.getElementsByTagName("head")[0];
var js = document.createElement("script");
js.type = "text/javascript";

var config_domain = '';
var hostname = window.location.hostname;
if (hostname.indexOf('.web.pugpig-local.com') > 0) {
    config_domain = 'https://' + hostname.replace('.web.pugpig-local.com','');
    console.info('%capp Config: Pulling remote config based on web.pugpig-local.com', 'color:hotpink;', config_domain);
}
var config_full_url = config_domain + "/" + ((hasConfigMode) ? 'config_web_latest' : 'config_web_active') + ".js";
    console.info('%capp Using Config: ', 'color:hotpink;', config_full_url);
js.src = config_full_url;
head.appendChild(js);

if (typeof config === 'undefined'){
    config = {};
}
