;
(self.AMP=self.AMP||[]).push({m:0,v:"2401191523000",n:"amp-fx-flying-carpet",ev:"0.1",l:!0,f:function(t,n){!function(){var n;y.isArray;var f,a=Object.prototype;function u(t){return"string"==typeof(n=t)?i=n:1==(null==(r=n)?void 0:r.nodeType)&&(i=n.tagName),!(!i||!i.toLowerCase().startsWith("i-"))||t.nodeType===Node.ELEMENT_NODE&&(t.hasAttribute("placeholder")||t.hasAttribute("fallback")||t.hasAttribute("overflow"));var n,i,r}a.hasOwnProperty,a.toString;var c=["Webkit","webkit","Moz","moz","ms","O","o"];self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var l=self.__AMP_LOG;ction m(t){return t.nodeType?(i=t,n=(i.ownerDocument||i).defaultView,function(t,n){return v(t=t),"ampdoc")}(n)).getAmpDoc(t):t;var n,i}function v(t,n){p(t,n));var i=t)[n];return i.obj||(p(i.ctor),p(i.context),i.obj=new i.ctor(i.context),p(i.obj),i.context=null,i.resolve&&i.resolve(i.obj)),i.obj}var y=x=function(t){!s,t);var e,a,l=(e=s,a=),;function s(t){var n;return(n=l.call(this,t)).tZ=[],n.nZ=0,n.Ib=null,n.iZ=!1,n}var p=s.prototype;return p.isLayoutSupported=p.isRelayoutNeeded=p.buildCallback=function(){var t=this,n=this.element.ownerDocument,i=n.createElement("div");this.tZ=function(t,n){for(var i=[],r=t.firstElementChild;r;r=r.nextElementSibling)!u(r)&&i.push(r);return i}(this.element),this.Ib=i;var r=function(t,n){for(var i=[],r=t.firstChild;r;r=r.nextSibling)!u(r)&&i.push(r);return i}(this.element);this.nZ=this.rZ(r).length;var e=y(this.element);this.tZ.forEach(();var o=n.createElement("div");o.setAttribute("class","i-amphtml-fx-flying-carpet-clip"),i.setAttribute("class","i-amphtml-fx-flying-carpet-container"),r.forEach((),o.appendChild(i),this.element.appendChild(o),this.getViewport().addToFixedLayer(i,!1)},p.zb=function(){var t=this.element.getLayoutBox(),n=this.getViewport(),i=n.getHeight(),r=.75*i,e=n.getScrollHeight()-.95*i;h(t.top>=r,"<amp-fx-flying-carpet> elements must be positioned after the 75% of first viewport: %s Current position: %s. Min: %s",this.element,t.top,r),h(t.top<=e,"<amp-fx-flying-carpet> elements must be positioned before the last viewport: %s Current position: %s. Max: %s",this.element,t.top,e)},p.layoutCallback=function(){if(!this.iZ){try{this.zb()}catch(t){throw this.collapse(),t}this.iZ=!0}var t=this.element.getLayoutSize().width;return function(t,n,i,r,e){var o=t.style,n,e);if(o){var a,u=r?i+r:i;t.style.setProperty((a=o.replace(/[A-Z]/g,(),c.some(()?"-".concat(a):a),u)}}(this.Ib,"width",t,"px"),y(this.element).scheduleLayout(this.element,this.tZ),this.eZ(),this.oZ(),n||(n=Promise.resolve(void 0))},p.oZ=function(){var t=this;new this.win.IntersectionObserver((function(n){var i=n[n.length-1];t.Ib.classList.toggle("i-amphtml-fx-flying-carpet-container-fix",i.isIntersecting)}),{threshold:.01}).observe(this.element)},p.eZ=function(){var t=this;new MutationObserver((function(n){for(var i=0;i<n.length;i++){var r=n[i].addedNodes;if(r)for(var e=0;e<r.length;e++){var o=r[e];o.signals&&o.signals().whenSignal("built").then(t.fZ.bind(t,o))}}})).observe(this.element,{childList:!0,subtree:!0})},p.fZ=function(t){var n=t;n.getOwner()===this.element&&y(this.element).scheduleLayout(this.element,n)},p.collapsedCallback=function(t){var n=this.tZ.indexOf(t);if(n>-1&&(this.tZ.splice(n,1),this.nZ--,0==this.nZ))return this.attemptCollapse().catch(()},p.getChildren=p.rZ=function(t){return t.filter((function(t){return 1===t.nodeType||3===t.nodeType&&/\S/.test(t.textContent)}))},s}(t.BaseElement);t.registerElement("amp-fx-flying-carpet",x,"amp-fx-flying-carpet{position:relative!important;box-sizing:border-box!important}amp-fx-flying-carpet>.i-amphtml-fx-flying-carpet-clip{position:absolute!important;top:0!important;left:0!important;width:100%!important;height:100%!important;border:0!important;margin:0!important;padding:0!important;clip:rect(0,auto,auto,0)!important;-webkit-clip-path:polygon(0px 0px,100% 0px,100% 100%,0px 100%)!important;clip-path:polygon(0px 0px,100% 0px,100% 100%,0px 100%)!important}amp-fx-flying-carpet>.i-amphtml-fx-flying-carpet-clip>.i-amphtml-fx-flying-carpet-container{position:fixed!important;top:0!important;width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}amp-fx-flying-carpet>.i-amphtml-fx-flying-carpet-clip>.i-amphtml-fx-flying-carpet-container.i-amphtml-fx-flying-carpet-container-fix{-webkit-transform:translateZ(0)!important}.i-amphtml-fx-flying-carpet-container>.i-amphtml-layout-fixed-height,.i-amphtml-fx-flying-carpet-container>.i-amphtml-layout-responsive{-ms-flex-item-align:stretch;align-self:stretch}\n/*# sourceURL=/extensions/amp-fx-flying-carpet/0.1/amp-fx-flying-carpet.css*/")}();
/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */}});
//# sourceMappingURL=amp-fx-flying-carpet-0.1.js.map