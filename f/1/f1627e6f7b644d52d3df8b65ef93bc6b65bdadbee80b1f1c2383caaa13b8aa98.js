(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6260],{68727:function(n,e,t){var r;n=t.nmd(n),function(o){"use strict";var i=a=function(n,e){for(var t,r=e.split("."),o=n;r.length;)t=r.shift(),o=i(o,t);return o};a.has=function(n,e){if(void 0!==a(n,e))return!0;var t,r=e.split("."),o=a(n,r.slice(0,-1).join(".")),i=r.slice(-1);return null!==(t=o)&&"object"===typeof t&&i in o},a(n,"exports")?n.exports=a:a(t.amdD,"amd")?void 0===(r=function(){return a}.call(e,t,e,n))||(n.exports=r):o.delve=a}(this)},70791:89774:function(n,e,t){"use strict";t.d(e,{lU:function(){return l.l},UI:function(){return i},wj:function(){return a},WY:function(){return c},Qy:function(){return u}});!function(n){var e,t=n.Symbol;"function"===typeof t?t.observable?e=t.observable:(e=t("observable"),t.observable=e):e="@@observable"}("undefined"!==typeof self?self:window);var r=t(82634),o=t(53242);function i(n){return n.map((function(n){return(0,o.J)(n).map(()}))}var a=function(n){return n.parents&&n.parents[0]},c=function(n,e){return n.parents&&n.parents.find((function(n){return n.type===e}))},u=l=t(44530)},50225:function(n,e,t){"use strict";t.d(e,{W:function(){return l},d:function(){return u}});var r=t(40811),o=t(58058),i=t(89774),a=t(60610),c=t(74169),u=function(n){return(0,o._)((0,r._)({},n),{macrozones:n.macrozones?n.macrozones.map((function(e){return(0,o._)((0,r._)({},e),{children:e.children.map((function(t){return(0,o._)((0,r._)({},t),{parents:[{id:e.id,type:e.type,label:e.label},{id:n.id,type:n.type,label:n.label}].concat(n.parents)})})),parents:[{id:n.id,type:n.type,label:n.label}].concat(n.parents)})})):[]})},l=function(n){var e=document.documentElement.lang.slice(0,2),t=n.id+e,r=(0,c.dW)(c.e5.macrozones,t);return r?Promise.resolve(r):(0,a.d)("/api-next/geography/geography-lists/",{searchParams:{id:n.id,type:i.lU.cityZone,__lang:e}}).json().then((function(n){return(0,c._4)(c.e5.macrozones,t,n),n}))}},74864:function(n,e,t){"use strict";t.d(e,{r:function(){return a}});var r=t(60610),o=t(89774),i=t(74169),a=function(n){var e=(0,i.dW)(i.e5.metros,n.id);return e?Promise.resolve(e):(0,r.d)("/api-next/geography/geography-lists/",{searchParams:{id:n.id,type:o.lU.metroLine}}).json().then((function(e){if(e&&e.metros){var t=e.metros,r=[{id:e.id,type:e.type,label:e.label}].concat(e.parents);return t.forEach((function(n){n.parents=r,n.children.forEach((function(e){e.parents=[{id:n.id,type:n.type,label:n.label}].concat(r)}))})),(0,i._4)(i.e5.metros,n.id,t),t}return null}))}},82936:function(n,e,t){"use strict";t.d(e,{y:function(){return o}});var r=t(60610),o=function(n,e){return function(t){var o=document.documentElement.lang.substr(0,2),i="".concat(n,"/api-next/geography/polygon/").concat(t.type,"/").concat(t.id,"/").concat(e,"/");return(0,r.d)(o?"".concat(i).concat(o,"/"):i).json().then((function(n){return n.polygons&&n.polygons.length?n:Promise.reject()}))}}},25278:function(n,e,t){"use strict";t.d(e,{Z:function(){return a}});var r=t(60610),o=t(74169),i=a=function(n){if(!(0,o.dW)(o.e5.polygonNaming,i(n))){var e=r.d.post("/api-next/geography/polygon-naming/",{json:{vrt:n}}).json().catch((function(){return(0,o._4)(o.e5.polygonNaming,i(n),void 0),{}}));(0,o._4)(o.e5.polygonNaming,i(n),e)}return(0,o.dW)(o.e5.polygonNaming,i(n))||Promise.resolve({})}},24172:function(n,e,t){"use strict";t.d(e,{m:function(){return J}});var r,o=t(94624),i=t(21379),a=t(10115),c=t(80376),u=t(89774),l=t(82684);function s(){var n=(0,o._)(["\n        <label\n            class=","\n        >\n            <input class=",' type="checkbox" '," />\n            ","\n            <span class=",">","</span>\n            ","\n        </label>\n    "]);return s=function(){return n},n}function f(){var n=(0,o._)(["<i class=",">","</i>"]);return f=function(){return n},n}!r||(r={}));var d,p;function h(n){var e=n.helperText,t=n.text,o=n.icon,a=n.customClasses,u=n.error,l=function(n,e){if(null==n)return{};var t,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)e.indexOf(t=i[r])>=0||(o[t]=n[t]);return o}(n,["helperText","text","icon","customClasses","error"]);return(0,i.dy)(d||(d=s()),(0,c.AK)(r.checkbox,u&&"is-error",a),r.element,(0,i.Qb)(l),o&&(0,i.dy)(p||(p=f()),r.icon,o),r.text,t,e)}var v=t(94405),m=t(99480),y=t(59003);function g(){var n=(0,o._)(["\n                                <div\n                                    class=","\n                                    onclick=","\n                                >\n                                    ","\n                                </div>\n                            "]);return g=function(){return n},n}function _(){var n=(0,o._)(["\n                            <div\n                                class=","\n                            >\n                                ","\n                            </div>\n                        "]);return _=function(){return n},n}function b(){var n=(0,o._)(["\n                    <li\n                        class=","\n                    >\n                        <div\n                            class=","\n                            onclick=","\n                        >\n                            ","\n                            ","\n                        </div>\n\n                        ","\n                        ","\n                    </li>\n                "]);return b=function(){return n},n}function w(){var n=(0,o._)(["\n        <ul class=",">\n            ","\n        </ul>\n    "]);return w=function(){return n},n}var S,k=(0,i.Sk)((function(n){var e=(0,v._)((0,m.xX)(n.items.map(()),2),t=e[0],r=e[1];(0,i.d4)((function(){n.items.forEach((function(n,e){n.isOpen&&r(()}))}),[n.items]);return(0,i.dy)(w(),(0,c.AK)("nd-accordion",n.className),n.items.map((function(n,e){return(0,i.dy)(b(),(0,c.AK)("nd-accordion__menu",t[e]&&"is-open"),(0,c.AK)("nd-accordion__label",n.labelClassName),(,n.text,n.content&&(0,i.dy)(g(),"nd-accordion__icon",(function(n){var t;n.preventDefault(),n.stopPropagation(),t=e,r(()}),(0,y.J)({name:n.icon?n.icon:"arrow-right"})),n.content&&(0,i.dy)(_(),(0,c.AK)("nd-accordion__subMenu",n.subListClassName,t[e]&&"is-open"),n.content),n.footer)})))}));!function(n){n.element="nd-accordion",n.menu="nd-accordion__menu",n.subMenu="nd-accordion__subMenu",n.label="nd-accordion__label",n.icon="nd-accordion__icon",n.open="is-open"}(S||(S={}));var C=t(30850);function O(){var n=(0,o._)(["<span>","</span>"]);return O=function(){return n},n}function E(){var n=(0,o._)(["\n        <div\n            class=","\n            title=","\n            onClick=","\n            ","\n        >\n            ","\n        </div>\n    "]);return E=function(){return n},n}function L(n){var e=n.item,t=n.checked,r=n.onClick,o=n.allChildrenSelected,a=n.lastSelected;return(0,i.dy)(E(),C.z.zonesAccordionLabelText,e.label,(,a,h({text:(0,i.dy)(O(),e.label),value:e.value,checked:t,customClasses:o?null:C.z.zonesCustomCheckbox}))}var I=t(70385),A=function(n,e,t){return!!n.find(()},z=function(n,e){return e.some(()},P=M=R=function(n,e){return n[e]};function x(){var n=(0,o._)(["<span>","</span>"]);return x=function(){return n},n}function D(){var n=(0,o._)(["\n                            <li\n                                class=","\n                                onclick=","\n                                ","\n                            >\n                                ","\n                            </li>\n                        "]);return D=function(){return n},n}function U(){var n=(0,o._)(["\n                            <ul class=",">\n                                ","\n                            </ul>\n                        "]);return U=function(){return n},n}function N(){var n=(0,o._)([" "," "]);return N=function(){return n},n}function T(){var n=(0,o._)(["\n            <div class="," ",">\n                ","\n            </div>\n        "]);return T=function(){return n},n}var j=(0,i.Sk)((function(n){var e=n.items,t=n.onAdd,r=n.onRemove,o=n.source,a=n.values,c=n.lastSelected,u=e?(0,I.Vn)(e,o):[],s=(0,i.sO)(),f=(0,i.sO)();(0,i.d4)((function(){requestAnimationFrame(()}),[]),(0,i.d4)((function(){e&&c&&s.current&&f.current&&requestAnimationFrame((function(){(0,l.c)(s.current,f.current,{align:l.x.Center})}))}),[c,e]);var d=function(n){var i=A(a,n.value,n.type),c=M(u,n),l=null!==n.parentId&&void 0!==n.parentId?i||A(a,c.value,c.type):n.children?i||z(a,n.children.map((function(n){return u[n]}))):i,s=o&&n.value===o.id?o:function(n,e,t){return void 0===t.parentId||null===t.parentId?P(n,t.value):(r=P(n,M(e,t).value),o=t.value,r.children.find((function(n){return n.id===o})));var r,o}(e,u,n);l?r(s):t(s)},p=u.filter(().map((function(n){var e=u.filter((function(e){return R(u,e.parentId)===n}));if(e.length){var t=e.map((function(e){return(0,i.dy)(D(),C.z.zonesSubListItem,(function(n){n.stopPropagation(),d(e)}),c&&e.value===c.id&&e.type===c.type?s:null,h({checked:A(a,e.value,e.type)||A(a,n.value,n.type),text:(0,i.dy)(x(),e.label),onClick:))}));return{item:n,accordionLabel:L({item:n,checked:z(a,e)||A(a,n.value,n.type),onClick:allChildrenSelected:A(a,n.value,n.type),lastSelected:c&&n.value===c.id&&n.type===c.type?s:null}),isOpen:c&&n.children.some((),children:(0,i.dy)(U(),C.z.list,t)}}return{item:n}}));return(0,i.dy)(T(),C.z.autocompletelistContent,f,k({className:C.z.zonesAccordion,items:p.map((function(n){return{labelClassName:C.z.zonesAccordionLabel,subListClassName:C.z.zonesSubList,text:n.children?n.accordionLabel:L({item:n.item,checked:A(a,n.item.value,n.item.type),onClick:function(e){e.stopPropagation(),d(n.item)},allChildrenSelected:!0,lastSelected:c&&n.item.value===c.id&&n.item.type===c.type?s:null}),content:n.children?(0,i.dy)(N(),n.children):null,isOpen:n.isOpen,onClick:}))}))})),W=t(54201);function B(){var n=(0,o._)(['\n                              <div\n                                  class="nd-button nd-button--link"\n                                  onClick=',"\n                              >\n                                  ","\n                              </div>\n                          "]);return B=function(){return n},n}function F(){var n=(0,o._)(["<div class=",">\n                          ","\n                      </div>"]);return F=function(){return n},n}ar J=(0,i.Sk)((function(n){var e=n.wrapperEl,t=n.source,r=n.values,o=n.onAdd,l=n.onRemove,s=n.items,f=n.headerText,d=n.onHeaderActionClick,p=n.headerActionBtnTxt,h=n.hideList,v=n.resultsCount,m=n.onResultsCountClick,y=(0,i.sO)([]),g=(0,i.Ye)((function(){if(y.current.some((function(n){if(n.type===u.lU.city)return!1;var e=!r.find((function(e){return(0,u.Qy)(e,n)}));return e?!r.find((function(e){var t=e.type===u.lU.microzone?(0,u.WY)(n,u.lU.cityZone):e.type===u.lU.metro?(0,u.WY)(n,u.lU.metroLine):null;return!!t&&(0,u.Qy)(e,t)})):e})))y.current=r;else{var n;if(r.every(()&&(y.current=[]),!h)return n=1===r.length&&r[0].type===u.lU.city?r[0]:r.find((function(n){return!y.current.some(()})),y.current=r,n;y.current=[]}}),[r,h]);return(0,i.dy)(V(),(0,c.AK)(C.z.autocompleteList,C.z.zonesList),e,C.z.autocompleteListHeader,C.z.autocompleteListHeaderTitle,f||(0,a.dW)("lbl_zones",null,{capitalize:!0}),d?(0,i.dy)(B(),d,p||(0,a.dW)("lbl_close")):null,!0!==h?j({items:s,onAdd:o,onRemove:l,source:t,values:r,lastSelected:g}):null,v?(0,i.dy)(F(),C.z.zonesListFooter,(0,W.zx)({style:"filledSecondary",text:v.label,onClick:m&&m,customClasses:(0,c.AK)(C.z.zonesListButton,v.isLoading&&"is-loading")})):null)}))},32635:function(n,e,t){"use strict";t.d(e,{x:function(){return u}});var r=t(94624),o=t(21379),i=t(80176),a=t(76805);function c(){var n=(0,r._)(['\n            <div class="nd-tags">\n                ',"\n            </div>\n        "]);return c=function(){return n},n}var u=(0,o.Sk)((function(n){var e=n.value,t=n.onRemove,r=n.onClick,u=(0,i.Y)(e).label;return(0,o.dy)(c(),(0,a.V)({value:{label:u},onRemove:t,onClick:r}))}))},82378:function(n,e,t){"use strict";t.r(e),t.d(e,{GeographyPropTypes:function(){return Un},SearchMode:);var r,o=t(40811),i=t(58058),a=t(94405),c=t(94624),u=t(68727),l=t.n(u),s=t(21379),f=t(26648),d=t(99480),p=t(89774),h=t(2842),v=t(76805),m=t(32635),y=t(65762),g=t(77266),_=t(10115),b=t(24172),w=(0,s.Sk)((function(n){var e=(0,s.sO)();(0,d.O8)(e,n.onCloseList);var t=n.values.every((function(n){return n.type===p.lU.metro||n.type===p.lU.metroLine}));return(0,b.m)((0,i._)((0,o._)({wrapperEl:e,onHeaderActionClick:n.onActionClick},n),{headerText:t?(0,_.dW)("lbl_metro"):void 0,headerActionBtnTxt:t?(0,_.dW)("search_map_header_metro_title"):(0,_.dW)("search_map_header_select_place_title"),resultsCount:n.resultsCount,onResultsCountClick:))})),S=t(17759),k=t(7298),C=t(2838),O=t(70791),E=t.n(O),L=t(70385),I=function(){var n=A(),e=n&&n.province;if(e)return{fkProvincia:e};try{var t=localStorage.getItem("imm_ultimaRicerca");return t?JSON.parse(t):void 0}catch(r){return}},A=function(){if(!r){var n=document.getElementById("js-hydration");r=n?JSON.parse(n.innerHTML):{}}return r},z=function(n){var e=(0,a._)((0,s.eJ)(n.querySelector("nd-geography-search")),2),r=e[0],o=e[1],i=function(){var n=(0,a._)((0,s.eJ)(null),2),e=n[0],r=n[1];return(0,s.d4)((function(){if(!e)try{var n=t(Object())).toresuTracker;r(n)}catch(o){}}),[e,r]),e}();(0,s.d4)((,[r]);var c=(0,s.I4)((function(n){var e,t;i&&("historyList"===(null===(e=n.detail)||void 0===e?void 0:e.source)?(i.storage.register({"Draw - My Location Pressed":!0},{unPersisted:!0}),i.storage.getDeviceId()!==i.storage.getDistinctId()&&i.user.set({"Enabled Web Location":!0})):"map"===(null===(t=n.detail)||void 0===t?void 0:t.source)&&i.storage.register({"Draw - My Location Pressed":!0},{unPersisted:!0}))}),[r,i]);(0,d.o$)(r,"geographySearch:onDrawGeolocationRequest",c);var u=(0,s.I4)((function(n){var e;i&&i.storage.register({"Type of Search":null===(e=n.detail)||void 0===e?void 0:e.typeOfSearch},{unPersisted:!0})}),[r,i]);(0,d.o$)(r,"geographySearch:onMapOpen",u);var l=(0,s.I4)((function(n){var e,t;i&&("historyList"===(null===(e=n.detail)||void 0===e?void 0:e.source)?(i.storage.register({"Isocronous - My Location Pressed":!0},{unPersisted:!0}),i.user.set({"Enabled Web Location":!0})):"map"===(null===(t=n.detail)||void 0===t?void 0:t.source)&&i.storage.register({"Isocronous - My Location Pressed":!0},{unPersisted:!0}))}),[r,i]);(0,d.o$)(r,"geographySearch:onIsochronousGeolocationRequest",l)},P=t(1841),M=t(26829),R=function(n){if("agencies"===n.contract_type){var e=n.associations,t=n.groups;if((e||t)&&(!e||!t))return!0}return n.place||n.vrt},x=(0,s.kr)(),D=(0,s.Sk)((function(n){var e=n.element,t=(0,M.s)(),r=(0,d.Pq)(e,"button[type=submit]"),o=(0,d.Pq)(e,"form"),i=(0,k.X)(),c=(0,a._)((0,s.eJ)(!1),2),u=c[0],l=c[1],p=(0,a._)((0,s.eJ)(!1),2),h=p[0],v=p[1],m=function(n){var e=(0,a._)((0,s.eJ)(n.querySelector("form.is-active")),2),t=e[0],r=e[1],o=n.querySelector("nd-tab-control");return(0,d.o$)(o,"tabchanged",(),t}(e);return(0,s.wl)(x,i),(0,d.HV)(e,"submit",(function(){requestAnimationFrame(()})),(0,d.o$)(e,"click",t&&t.interactionStart,Boolean(t)),(0,d.o$)(e,"submit",(function(n){var e=n.target,r=(0,f.Nh)(e),o=R(r);l(!o),o?(i.values.length&&P.qs.add(i.values),t&&t.submit(e.id,r),v(!0)):n.preventDefault()}),!h),(0,s.d4)((function(){if(u){var n=o.current.find((function(n){return n.classList.contains("is-active")}));R((0,f.Nh)(n))&&l(!1)}})),(0,s.d4)((function(){o.current.forEach(()}),[u]),(0,s.d4)((function(){r.current.forEach(()}),[h]),(0,d.o$)(window,"pagehide",(function(){v(!1)}),h),(0,s.d4)((function(){if(h){var n=setTimeout((function(){v(!1)}),5e3);return function(){clearTimeout(n)}}}),[h]),function(n,e){(0,s.d4)((function(){var t=(0,f.Zs)("mapConfig")(n),r=I();if(t&&r){var o=E()(r,"poligono.mode","place"),i={mode:o,area:E()(r,"poligono.area",{})};switch(o){case"circle":i.area.center=E()(i,"area.center",[]).map(parseFloat),i.area.radius=parseInt(E()(i,"area.radius",null)),(0,L.J9)(e,i);break;case"polygon":i.area=E()(i,"area",[]).map((),r.indirizzo&&(i.properties={indirizzo:r.indirizzo}),(0,L.J9)(e,i);break;case"place":(0,L.Rm)(e,{fkComune:r.fkComune||"",fkProvincia:r.fkProvincia||"",fkRegione:r.fkRegione||"",zones:r.fkMacrozonaV2&&"string"===typeof r.fkMacrozonaV2?r.fkMacrozonaV2.split(","):null,microzones:r.fkMicrozona&&"string"===typeof r.fkMicrozona?r.fkMicrozona.split(","):null,metroLines:r.fkMetro&&"string"===typeof r.fkMetro?r.fkMetro.split(","):null,metros:r.fkMetroStation&&"string"===typeof r.fkMetroStation?r.fkMetroStation.split(","):null},t)}(0,C.VF)({event:"search_form:init",isPrefilled:!0})}}),[])}(e,i),z(m),null}));(0,s.j)("nd-search-module",D,void 0,{mountType:"append"});var U=t(89879),N=t(80376),T=t(42543),j=t(59003),W=t(90687),B=t(30850);function F(){var n=(0,c._)(["\n                          ","\n                      "]);return F=function(){return n},n}function V(){var n=(0,c._)(["\n                              <span class=","\n                                  >","</span\n                              >\n                          "]);return V=function(){return n},n}function J(){var n=(0,c._)(["\n        <li\n            onclick=","\n            onmousedown=","\n            onmousemove=","\n            class=",'\n        >\n            <div class="','">\n                ',"\n                <span class=",">\n                    <span>","</span>\n                    ","\n                </span>\n            </div>\n        </li>\n    "]);return J=function(){return n},n}var H=(0,s.Sk)((function(n){return(0,s.dy)(J(),n.onSelect,n.onSelect,n.onHover,(0,N.AK)(B.z.searchOptionsListItem,n.customClasses,n.active&&B.z.searchOptionsListItemActive),B.z.searchOptionsListContent,n.icon&&n.icon.name?(0,s.dy)(F(),(0,j.J)({spriteUrl:W,name:n.icon.name,className:B.z.searchOptionsListIcon})):null,B.z.listItemText,(0,T.YF)(n.label),n.description?(0,s.dy)(V(),B.z.searchOptionsListDescription,(0,T.YF)(n.description)):null)})),Y=t(54201);function G(){var n=(0,c._)(["\n            <span class=","\n                >","</span\n            >\n            <div class=",">\n                ","\n                <span class=",">\n                    ","</span\n                >\n                ","\n            </div>\n            <span class=","\n                >","</span\n            >\n        "]);return G=function(){return n},n}var q=(0,s.Sk)((function(n){var e=n.label,t=n.icon,r=n.onClick,a=n.showEditButton;return(0,s.dy)(G(),B.z.searchOptionsListTitle,(0,_.dW)("geography_search_current_search_label"),B.z.searchOptionsChangeCurrentLocation,t&&(0,j.J)((0,i._)((0,o._)({},t),{className:B.z.searchOptionsCurrentSearchIcon})),B.z.searchOptionsCurrentSearch,e,a&&(0,Y.zx)({customClasses:B.z.searchOptionsModifyButton,size:"compact",style:"link",text:(0,_.dW)("act_edit"),onmousedown:r,onClick:r}),B.z.searchOptionsListTitle,(0,_.dW)("geography_search_new_search_label"))}));function $(){var n=(0,c._)(['\n            <div\n                data-cy="search-options-list-container"\n                class=',"\n            >\n                ","\n                <ul class=",' data-cy="search-options-list">\n                    ',"\n                </ul>\n            </div>\n        "]);return $=function(){return n},n}var K=(0,s.Sk)((function(n){var e=n.drawEnabled,t=n.toggleMap,r=n.routeSearch,o=void 0!==r&&r,i=n.withCurrentSelection,a=void 0!==i&&i,c=n.onChangeCurrentSelection,u=n.currentSearchLabel,l=n.currentSearchIcon,f=n.showCurrentSearchEditButton,p=[{icon:{name:"option-zones"},label:(0,_.dW)("search_option_select_on_map_label"),description:(0,_.dW)("search_option_select_on_map_description"),onSelect:function(){return t(U.N3.Place)}}];e&&p.push({icon:{name:"option-draw"},label:(0,_.dW)("search_option_draw_on_map_label"),description:(0,_.dW)("search_option_draw_on_map_description"),onSelect:function(){return t(U.N3.DrawPolygon)}}),e&&o&&p.push({icon:{name:"option-position"},label:(0,_.dW)("search_option_point_distance"),description:(0,_.dW)("search_option_point_distance_description"),onSelect:function(){return t(U.N3.Route)}});var h=(0,d.t$)(p.length,!0),v=h.value,m=h.set,y=v;return(0,d.o$)(document,"keydown",(),(0,s.dy)($(),(0,N.AK)(B.z.autocompletelistContainer,B.z.searchOptionsListContainer),a&&u&&q({onClick:c,label:u,icon:l,showEditButton:f}),B.z.searchOptionsList,p.map((function(n,e){return H({icon:n.icon,label:n.label,description:n.description,onSelect:n.onSelect,active:e===y,onHover:function(){m(e)}})})))}));function Z(){var n=(0,c._)(['\n    <div class="im-searchMapLoader">\n        ',"\n    </div>\n"]);return Z=function(){return n},n}function Q(){var n=(0,c._)(['\n        <div\n            style="width:100%;display: flex;justify-content: center;padding: 20px;"\n        >\n            ',"\n        </div>\n    "]);return Q=function(){return n},n}var X=(0,s.cr)(Promise.all([t.e(1880),t.e(625)]).then(t.bind(t,94290)).then((function(n){return n.SearchMap})),(0,s.dy)(Q(),(0,s.dy)(Z(),(0,j.J)({name:"loader",className:"is-spinning"})))),nn=t(84595),en=t(28642),tn=function(n,e,t,r,o,i,a,c){var u=(0,k.X)(e),l=(0,nn.sc)(u.values[0]),f=(0,en.Z)(u.values,n,t,u.removeAll,void 0,r,o,i,a,c),d=f.inFocus&&""===f.search,p=!d&&Boolean(l.city&&l.list)&&!f.inFocus,h=Boolean(u.values.length)&&!f.inFocus;return(0,s.d4)((function(){u.setValues(e)}),[e]),{placesHistoryVisible:d,checkListEnabled:p,confirmButtonVisible:h,selection:u,autocomplete:f,zonesCheckList:l}};function rn(){var n=(0,c._)([" <span class=",">\n                                    ","\n                                </span>\n\n                                <input\n                                    class=",'\n                                    type="text"\n                                    ','\n                                    placeholder="','"\n                                    data-hj-whitelist\n                                />\n                                ',"\n                                ",""]);return rn=function(){return n},n}function on(){var n=(0,c._)(["\n                  <div\n                      class=","\n                  >\n                      ","\n                  </div>\n              "]);return on=function(){return n},n}var an=(0,s.Sk)((function(n){var e=n.onClose,t=n.initialValues,r=n.onConfirm,o=n.autocompleteRef,i=n.mapConfig,a=n.metroEnabled,c=n.tags,u=n.currentSelectionType,l=n.modalAutoSubmit,f=n.onAutoSubmit,p=n.searchMetroDisabled,v=n.regionSearchEnabled,m=n.countrySearchEnabled,y=n.internationalEnabled,g=n.internationalLabelsEnabled,_=n.alternatePolygonsApiEnabled,b=(0,M.s)(),w=function(n,e){O.add(n,!0),b&&b.autocompleteSelection(e,!0),o.current.blur()},k=tn(o,t,w,a,v,m,y,g),C=k.placesHistoryVisible,O=k.selection,E=k.autocomplete,I=O.values,A=(0,d.j3)("small");return I[0]&&!u?X({mapConfig:i,initialMode:U.N3.Place,initialDraw:null,initialValues:I,onConfirm:function(n,t){r(U.N3.Place,t),e()},metroEnabled:a,modalAutoSubmit:l,onAutoSubmit:f,searchMetroDisabled:p,regionSearchEnabled:v,countrySearchEnabled:m,internationalEnabled:y,internationalLabelsEnabled:g,alternatePolygonsApiEnabled:_}):(0,s.dy)(on(),(0,N.AK)(B.z.autocomplete,B.z.placeSelector),c||(0,s.dy)(rn(),B.z.autocompleteIcon,E.inFocus&&A?(0,j.J)({name:"arrow-right",className:B.z.autocompleteIconBack}):(0,j.J)({name:"lens"}),B.z.autocompleteInput,o,(0,L.mD)(p),E.inFocus&&(0,h.aV)({highlight:E.highlight,items:E.items,onClick:E.selectItem,searchString:E.search,loading:E.loading}),C&&(0,S.q)({values:I,withGeolocation:!1,onSelect:function(n){O.setValues(n),w(n[0],!0)},metroEnabled:a,internationalLabelsEnabled:g})))})),cn=t(62765),un=t(70468);function ln(){var n=(0,c._)(["\n        <nd-dialog-frame\n            onClose=",'\n            class="','"\n            disableCloseOnBackdropClick=',"\n        >\n            ","\n            ","\n        </nd-dialog-frame>\n    "]);return ln=function(){return n},n}function sn(){var n=(0,c._)(['\n                <span class="nd-dialogFrame__close js-close" role="button">\n                    ',"\n                </span>\n            "]);return sn=function(){return n},n}var fn=function(n,e,t){e.classList.contains(n)!==t&&e.classList.toggle(n,t)},dn=(0,s.kr)(),pn=document.documentElement,hn=(0,s.j)("nd-dialog-backdrop",(0,s.Sk)((function(n){var e=n.element;ar r=(0,d.j3)(un.wp.TINY),o=(0,a._)((0,s.eJ)(t),2),i=o[0],c=o[1];0,s.wl)(dn,i[i.length-1]);var l=(0,s.sO)(!0),f=l.current||i.length>0;l.current=l.current&&0===i.length;var p=(0,a._)((0,s.eJ)(hn),1)[0];return(0,s.bt)((function(){return!r&&innerWidth>pn.clientWidth&&pn.classList.add("has-scroll"),),[r]),(0,s.bt)((function(){fn("is-open",e,f),fn("lockScreen",pn,f),f||(hn()!==p&&scrollTo(window.pageXOffset||document.documentElement.scrollLeft,p),e.remove())}),[f]),(0,s.bt)((function(){if("manual"!==history.scrollRestoration)return history.scrollRestoration="manual",)),(0,d.o$)(e,"mount:nd-dialog-frame",u),(0,d.o$)(e,"unmount:nd-dialog-frame",u),null})),void 0,{mountType:"prepend"});var vn=(0,j.J)({name:"cross"}),mn={transition:!1,lastEvt:null,isUserPop:function(n){return!mn.transition&&n!==mn.lastEvt},pop:function(){mn.transition=!0,window.addEventListener("popstate",(function n(e){window.removeEventListener("popstate",n),mn.lastEvt=e,mn.transition=!1})),history.back()},push:function(){history.pushState(history.state||{},document.title,window.location.href)}};(0,s.j)("nd-dialog-frame",(0,s.Sk)((function(n){var e=n.element,t=n.onClose,r=n.disableCloseOnBackdropClick,o=(0,d.j3)(un.wp.MEDIUM),i=(0,s.qp)(dn),a=e===i;function c(){t&&t(),(0,f.j8)(e,"close")}return(0,s.d4)((,[]),(0,d.o$)(window,"popstate",(function(n){mn.isUserPop(n)&&!1!==o&&c()}),a),(0,s.d4)((function(){if(a&&!r){var n=e.parentNode;return n.addEventListener("click",t),),[a]),(0,d.o$)(document,"keydown",(,a),(0,d.o$)(e,"click",(,a),(0,s.d4)((function(){var n=e.parentNode;return n&&(0,f.j8)(n,"mount:nd-dialog-frame"),function(){(0,f.j8)(n,"unmount:nd-dialog-frame")}}),[]),null})),{onClose:s.gr.noop,disableCloseOnBackdropClick:s.gr.toBoolean},{mountType:"append"});var yn,gn,_n,bn;!_n||(_n={})),bn||(bn={}));var wn=(0,s.Sk)((function(n){var e=document.querySelector("nd-dialog-backdrop");e||((e=document.createElement("nd-dialog-backdrop")).className="nd-dialogBackdrop"),(0,s.bt)((function(){e.parentNode||document.body.insertBefore(e,document.body.firstChild)}),[e]);var t=(0,s.dy)(yn||(yn=ln()),n.onClose,(0,N.AK)("nd-dialogFrame",n.type&&"nd-dialogFrame--".concat(n.type),n.className),n.disableCloseOnBackdropClick,!1!==n.showCloseButton&&(0,s.dy)(gn||(gn=sn()),vn),n.content);return(0,s.h_)({children:t,target:e})})),Sn=function(n){var e=n.children,t=n.onClose;return wn({onClose:t,showCloseButton:!1,type:bn.FULL,content:e})},kn=t(59312);function Cn(){var n=(0,c._)(["\n                ","\n            "]);return Cn=function(){return n},n}function On(){var n=(0,c._)(["<span\n                              onclick=",'\n                              class="im-searchMap__headerBackIcon"\n                              >',"</span\n                          >",""]);return On=function(){return n},n}function En(){var n=(0,c._)(["\n                          ",'\n                          <div\n                              class="nd-dialogFrame__content nd-dialogFrame__content--full nd-dialogFrame__content--notScrollable"\n                              data-cy="search-options-list-container"\n                          >\n                              ',"\n                              ","\n                              <ul\n                                  class=",'\n                                  data-cy="search-options-list"\n                              >\n                                  ',"\n                              </ul>\n                          </div>\n                      "]);return En=function(){return n},n}var Ln=(0,s.Sk)((function(n){var e=n.drawEnabled,t=n.metroEnabled,r=n.onClose,i=n.initialValues,c=n.initialDraw,u=n.onConfirm,l=n.onRemoveCurrentSelection,f=n.mapConfig,d=n.routeSearch,p=void 0!==d&&d,h=n.currentSelectionType,v=n.modalAutoSubmit,b=n.onAutoSubmit,w=n.searchMetroDisabled,S=n.regionSearchEnabled,k=n.countrySearchEnabled,C=n.internationalEnabled,O=n.internationalLabelsEnabled,E=n.alternatePolygonsApiEnabled,I=n.currentSearchLabel,A=n.currentSearchIcon,z=n.showCurrentSearchEditButton,P=(0,a._)((0,s.eJ)(!1),2),R=P[0],x=P[1],D=(0,s.sO)(),N=(0,M.s)(),T=tn(D,i,(function(n,e){T.add(n,!0),N&&N.autocompleteSelection(e,!0),D.current.blur()}),t,S,k,C,O).selection;(0,s.d4)((function(){!1!==R&&N&&N.mapOpen(R)}),[R]);var W=T.values;function F(n){switch(n){case U.NB.GEOGRAPHY:x(U.N3.Place);break;case U.NB.ROUTE:x(U.N3.Route);break;case U.NB.DRAW:x("Point"===c.geometry.type?U.N3.DrawCircle:U.N3.DrawPolygon)}}var V=null;h===U.NB.GEOGRAPHY?V=(0,g.U)({values:W,onRemove:function(){l(),N.clickOnDeleteTag()},onClick:function(){F(h),N.clickOnTag()},internationalLabelsEnabled:O}):h===U.NB.ROUTE?V=(0,y.z)({address:(0,o._)({},c.properties.address),transport:c.properties.transport,time:c.properties.time,onClick:function(){F(h),N.clickOnTag()},onRemove:function(){l(),N.clickOnDeleteTag()}}):h===U.NB.DRAW&&(V=(0,m.x)({value:c,onClick:function(){F(h),N.clickOnTag()},onRemove:));var J=[{icon:{name:"option-text"},label:(0,_.dW)("search_option_for_name_label"),description:(0,L.mD)(w),onSelect:function(){D.current?D.current.focus():x(U.N3.Place)}}];e&&J.push({icon:{name:"option-draw"},label:(0,_.dW)("search_option_draw_on_map_label"),description:(0,_.dW)("search_option_draw_on_map_description"),onSelect:function(){return x(U.N3.DrawPolygon)}}),e&&p&&J.push({icon:{name:"option-position"},label:(0,_.dW)("search_option_point_distance"),description:(0,_.dW)("search_option_point_distance_description"),onSelect:);var Y=J.map((function(n){return(0,s.dy)(Cn(),H({icon:n.icon,label:n.label,description:n.description,onSelect:n.onSelect}))}));(0,s.d4)((function(){var n=0===R||1===R||2===R?"Draw":3===R?"Isocronus":"Text";(0,kn.zx)(n)}),[R]);var G=return Sn({onClose:G,children:!1!==R?(0,s.dy)(On(),(function(){return x(!1)}),(0,j.J)({name:"arrow-left"}),X({mapConfig:f,initialValues:i,initialDraw:(0,L.Yt)(c,R)&&c,initialMode:R,onConfirm:function(n,e){u(n,e),v||G()},metroEnabled:t,modalAutoSubmit:v,onAutoSubmit:b,searchMetroDisabled:w,regionSearchEnabled:S,countrySearchEnabled:k,internationalEnabled:C,internationalLabelsEnabled:O,alternatePolygonsApiEnabled:E})):(0,s.dy)(En(),(0,cn.d)({title:(0,_.dW)("search_option_header_title"),showClose:!0}),an({onClose:G,onConfirm:u,initialValues:i,mapConfig:f,autocompleteRef:D,metroEnabled:t,tags:V,currentSelectionType:h,modalAutoSubmit:v,onAutoSubmit:b,searchMetroDisabled:w,regionSearchEnabled:S,countrySearchEnabled:k,internationalEnabled:C,internationalLabelsEnabled:O,alternatePolygonsApiEnabled:E}),h&&q({onClick:function(){N&&N.clickOnModifySelection(),F(h)},label:I,icon:A,showEditButton:z}),B.z.searchOptionsList,Y)})})),In=t(21682),An=t(44630),zn=t(25278),Pn=t(80176),Mn=(0,s.Sk)(();function Rn(){var n=(0,c._)(['<div class="nd-tags">\n                    ',"\n                </div>"]);return Rn=function(){return n},n}function xn(){var n=(0,c._)(["\n                    ","\n                "]);return xn=function(){return n},n}function Dn(){var n=(0,c._)(["\n            ","\n            ","\n            ","\n            ","\n            ","\n            ",'\n            <input\n                type="hidden"\n                name=',"\n                value=","\n            />\n        "]);return Dn=function(){return n},n}var Un={drawEnabled:s.gr.toBoolean,metroEnabled:s.gr.toBoolean,autoRefill:s.gr.toBoolean,onLocationChange:s.gr.noop,modalAutoSubmit:s.gr.toBoolean.withDefault(!1),onAutoSubmit:s.gr.noop,searchMetroDisabled:s.gr.toBoolean,regionSearchEnabled:s.gr.toBoolean.withDefault(!1),countrySearchEnabled:s.gr.toBoolean.withDefault(!1),internationalEnabled:s.gr.toBoolean.withDefault(!1),internationalLabelsEnabled:s.gr.toBoolean.withDefault(!1),alternatePolygonsApiEnabled:s.gr.toBoolean.withDefault(!1),defaultEmptyLabel:s.gr.toString.withDefault(void 0),resultsCount:s.gr.toObject,onResultsCountClick:s.gr.noop.withDefault(void 0),onAutocompleteSelection:s.gr.noop.withDefault(void 0),showCurrentSearchEditButton:s.gr.toBoolean};function Nn(n){requestAnimationFrame((function(){requestAnimationFrame((function(){try{scrollTo({top:scrollY+n,behavior:"smooth"})}catch(e){}}))}))}var Tn=(0,s.Sk)((function(n){var e=n.element,t=n.drawEnabled,r=n.metroEnabled,c=n.autoRefill,u=n.onLocationChange,_=n.modalAutoSubmit,b=n.onAutoSubmit,S=n.searchMetroDisabled,C=n.regionSearchEnabled,O=n.countrySearchEnabled,E=n.internationalEnabled,I=n.internationalLabelsEnabled,A=n.alternatePolygonsApiEnabled,z=n.defaultEmptyLabel,R=n.resultsCount,D=n.onResultsCountClick,N=n.showCurrentSearchEditButton,T=n.onAutocompleteSelection,j=(0,a._)((0,s.eJ)((0,f.Zs)("mapConfig")(e)),2),B=j[0],F=j[1],V=e.querySelector("input"),J=e.querySelector(".js-geographySearch__lens"),H=(0,a._)((0,s.eJ)(!1),2),Y=H[0],G=H[1],q=(0,s.qp)(x),$=(0,s.sO)(!0);q&&$.current||($.current=!1,q=(0,k.X)());var Z=(0,M.s)();!t&&q.draw&&(q=(0,i._)((0,o._)({},q),{draw:void 0})),r||(q=(0,i._)((0,o._)({},q),{values:q.values.filter((function(n){return n.type!==p.lU.metroLine&&n.type!==p.lU.metro}))}));var Q=q.values,tn=(0,nn.sc)(),rn=tn.list,on=tn.city,an=tn.setCheckListSource,cn=tn.closeCheckList,un=function(n,e){q.add(n,!0),an(n),pn(n),V.blur(),Z&&Z.autocompleteSelection(!!e,!1)},ln=function(){q.removeAll(),an(null),pn(null)},sn=(0,en.Z)(Q,V,un,ln,void 0,r,C,O,E,I),fn=(0,In.A)(),dn=fn.metroListItems,pn=fn.setMetroListSource,hn=fn.closeMetroCheckList,vn=(0,d.j3)("small"),mn=!vn&&Boolean(on&&rn)&&!sn.enabled,yn=!vn&&dn&&dn.length>0&&!sn.enabled,gn=!1;(0,d.HV)(e,"toggleMap",G),(0,s.d4)((function(){var n=0===Y||1===Y||2===Y?"Draw":3===Y?"Isocronus":"Text";(0,kn.zx)(n),Y&&Z&&Z.mapOpen(Y)}),[Y]);var _n=null,bn=null,wn=void 0,Cn=void 0;function On(n){switch(n){case U.NB.GEOGRAPHY:ln();break;case U.NB.ROUTE:case U.NB.DRAW:q.setDraw(null)}vn?vn&&c&&Tn(!0):V.focus()}function En(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(n){case U.NB.GEOGRAPHY:vn||e?G(U.N3.Place):(an(Q[0]),pn(Q[0]));break;case U.NB.ROUTE:G(U.N3.Route);break;case U.NB.DRAW:G("Point"===q.draw.geometry.type?U.N3.DrawCircle:U.N3.DrawPolygon)}}Q.length?(_n=U.NB.GEOGRAPHY,bn=(0,g.U)({values:Q,onRemove:function(){On(_n),Z.clickOnDeleteTag()},onClick:function(){En(_n),Z.clickOnTag()},internationalLabelsEnabled:I}),Cn=Q.find(L.hY)?{name:"metro"}:{spriteUrl:W,name:"zone"},wn=(0,L.IK)(Q,I)):q.draw?q.draw.properties&&"Route"===q.draw.properties.type?(_n=U.NB.ROUTE,bn=(0,y.z)({address:(0,o._)({},q.draw.properties.address),transport:q.draw.properties.transport,time:q.draw.properties.time,onClick:function(){En(_n),Z.clickOnTag()},onRemove:function(){On(_n),Z.clickOnDeleteTag()}}),Cn={spriteUrl:W,name:"point"},wn=(0,L.mC)((0,o._)({},q.draw.properties.address),q.draw.properties.transport,q.draw.properties.time)):(_n=U.NB.DRAW,bn=(0,m.x)({value:q.draw,onClick:function(){En(_n),Z.clickOnTag()},onRemove:),Cn={spriteUrl:W,name:"draw"},wn=Mn(q.draw)):z&&(bn=(0,s.dy)(Rn(),(0,v.V)({value:{label:z},onClick:function(){}})),wn=z);var Pn=(0,a._)((0,s.eJ)(!1),2),Un=Pn[0],Tn=Pn[1];function jn(){mn||yn||(V.focus(),Tn(!0))}(0,d.HV)(e,"setSearchOptionsVisible",(function(n){q.removeAll(),Tn(n)})),(0,s.d4)((function(){vn||Tn(!sn.enabled&&sn.inFocus&&""===sn.search&&!mn&&!yn)}),[vn,gn,sn.enabled,sn.inFocus,sn.search,mn,yn]),(0,s.d4)((function(){var n=(0,L.nV)({checkListEnabled:mn,currentSelectionType:_n,isInputFocused:V===document.activeElement,isMetro:!!Q.find(L.hY),isMobile:vn,metroListEnabled:yn,searchMetroDisabled:S});V.setAttribute("placeholder",n||"")}),[document.activeElement,_n,mn,yn,Q]),(0,d.o$)(V,"click",(function(){jn(),Z&&Z.clickOnGeographySearchInput(!!_n)})),(0,d.o$)(J,"click",(),(0,d.o$)(e,"keydown",(,!vn),(0,s.d4)((,[vn]);var Wn=(0,s.sO)();function Bn(n,e){n===U.N3.Place?q.setValues(e,!0):(q.setDraw(e),e.properties&&"Route"!==e.properties.type?(0,zn.Z)(e).then((function(n){var t="Polygon"===l()(e,"geometry.type"),r=t?null:e.properties.radius,a=n.label?n.label:(0,An.w)(n,t?"POLYGON_DRAWING":"CIRCLE_DRAWING",r,e.properties&&e.properties.indirizzo);P.t0.add((0,i._)((0,o._)({},e),{label:a}))})):P.t0.add((0,i._)((0,o._)({},e),{label:e.properties.label})))}function Fn(n,e){Bn(n,e),!_&&G(!1),Z&&Z.mapModalConfirm(n,e)}(0,s.d4)((function(){Y?Wn.current=q:Wn.current&&(q.draw&&Wn.current.draw!==q.draw||q.values.length&&Wn.current.values!==q.values)&&requestAnimationFrame((function(){var n=e.getBoundingClientRect();if(n.width>0&&!(n.top>5)){var t=e.closest(".js-heroSearch");if(t)Nn(t.getBoundingClientRect().top)}}))}),[Y]),(0,s.d4)((function(){if(mn){var n=e.closest(".js-heroSearch");if(n){var t=n.getBoundingClientRect().top;t<=0||Nn(t)}}}),[mn]),(0,s.d4)((function(){Q.find(L.IE)&&Z&&Z.triggerMicrozoneSearch(!0),Q.find(L.hY)&&Z&&Z.triggerMetroSearch(!0)}),[Q]);var Vn=q.draw?"vrt":"place",Jn=q.draw?q.draw:Q.length?Q:null;(0,s.d4)((,[Vn,Jn]),(0,d.HV)(e,"getSelectionValue",(),(0,d.HV)(e,"setSelectionValue",(function(n){var e=n.searchType,t=n.value;"place"===e?Bn(U.N3.Place,t):"vrt"===e&&("Point"===t.geometry.type?Bn(U.N3.DrawCircle,t):Bn(U.N3.DrawPolygon,t))})),(0,d.HV)(e,"deleteSelection",(function(){q.removeAll()})),(0,d.HV)(e,"setMapConfig",(),function(n,e,t){var r=(0,s.sO)(n),o=(0,s.sO)(e),i=(0,s.Ye)((function(){return function(n){return!n.draw&&(!n.values||!n.values.length)}(e)}),[e]);(0,s.d4)((function(){(e.values.length>0||e.draw)&&(o.current=e)}),[e]),(0,s.d4)((function(){t&&(r.current&&!n&&i&&(o.current.draw?e.setDraw(o.current.draw):o.current.values.length>0&&e.setValues(o.current.values)),r.current=n)}),[n,t,i])}(!!Y||document.activeElement===V||Un,q,c);return(0,s.dy)(Dn(),(0,s.h_)({target:e,prepend:!0,children:(0,s.dy)(xn(),bn||null)}),!1!==Y&&Sn({children:X({mapConfig:B,initialValues:Q,initialDraw:(0,L.Yt)(q.draw,Y)&&q.draw,initialMode:Y,onConfirm:Fn,metroEnabled:r,modalAutoSubmit:_,onAutoSubmit:b,searchMetroDisabled:S,regionSearchEnabled:C,countrySearchEnabled:O,internationalEnabled:E,internationalLabelsEnabled:I,alternatePolygonsApiEnabled:A}),onClose:function(){return G(!1)}}),gn,(mn||yn)&&w({source:mn?on:null,items:mn?rn:dn,onAdd:onRemove:q.remove,values:Q,onCloseList:function(){V!==document.activeElement&&(mn?cn():hn())},onActionClick:resultsCount:R,onResultsCountClick:D}),Un?vn?Ln({onClose:drawEnabled:t,metroEnabled:r,initialValues:Q,initialDraw:q.draw,onConfirm:Fn,mapConfig:B,routeSearch:B.routeSearch,currentSelectionType:_n,onRemoveCurrentSelection:function(){return On(_n)},modalAutoSubmit:_,onAutoSubmit:b,searchMetroDisabled:S,regionSearchEnabled:C,countrySearchEnabled:O,internationalEnabled:E,internationalLabelsEnabled:I,alternatePolygonsApiEnabled:A,currentSearchLabel:wn,currentSearchIcon:Cn,showCurrentSearchEditButton:N}):K({drawEnabled:t,toggleMap:G,routeSearch:B.routeSearch,withCurrentSelection:!!_n,onChangeCurrentSelection:function(){Z&&Z.clickOnModifySelection(),En(_n,!0)},currentSearchLabel:wn,currentSearchIcon:Cn,showCurrentSearchEditButton:N}):null,sn.enabled&&(0,h.aV)({onItemHover:sn.handleItemHover,highlight:sn.highlight,items:sn.items,onClick:searchString:sn.search,loading:sn.loading}),Vn,Jn?JSON.stringify(Jn):"")}));(0,s.j)("nd-geography-search",Tn,Un,{mountType:"append"})},67828:function(n,e,t){"use strict";t.d(e,{Q:function(){return d}});var r=t(40811),o=t(58058),i=t(94624),a=t(2842),c=t(21379),u=(t(1841),t(70385),t(30850)),l=t(4876),s=t(99480);function f(){var n=(0,i._)(["\n        <div class=",">\n            <div class=",">\n                <ul class=",">\n                    ","\n                    ","\n                </ul>\n            </div>\n        </div>\n    "]);return f=function(){return n},n}var d=(0,c.Sk)((function(n){var e=n.items,t=n.getLabel,i=(0,s.j3)("small");if(e.length||n.withGeolocation){var d=n.withGeolocation?1:0,p=(0,s.t$)(e.length+d,!0),h=p.value,v=p.set,m=h-d;return(0,s.o$)(document,"keydown",(function(t){13!==t.keyCode&&"Enter"!==t.key||(t.preventDefault(),-1===m&&n.withGeolocation?n.onGeolocationRequest():n.onSelect(e[m]))})),(0,c.dy)(f(),u.z.autocompletelistContainer,u.z.autocompletelistContent,u.z.list,n.withGeolocation&&(0,a.HC)((0,o._)((0,r._)({},l.KR),{onHover:searchString:"",active:-1===m,item:l.KR,onClick:)),e.map((function(e,r){return(0,a.HC)({onHover:function(){!i&&v(r+d)},searchString:"",active:m===r,item:Object.assign({id:r},e,t&&t(e),{icon:"history"}),onClick:function(){n.onSelect(e)}})})))}}))},17759:function(n,e,t){"use strict";t.d(e,{q:function(){return s}});var r=t(40811),o=t(58058),i=t(21379),a=t(89774),c=t(67828),u=t(1841),l=t(70385),s=(0,i.Sk)((function(n){var e,t=(e=u.qs.get(),e.filter(()).filter((function(e){return!u.qs.sameEntries(e,n.values)&&(!!n.metroEnabled||e.every(())}));return(0,c.Q)((0,o._)((0,r._)({},n),{items:t,getLabel:function(e){return e.every(l.hY)&&(e=(0,l.ky)(e)),(0,l.r0)(e,n.internationalLabelsEnabled)}}))}))},80176:function(n,e,t){"use strict";t.d(e,{Y:function(){return f}});var r=t(94405),o=t(68727),i=t.n(o),a=t(21379),c=t(10115),u=t(25278),l=t(44630),s=new Map,f=function(n){var e="Point"===n.geometry.type?(0,c.dW)("act_draw_radius"):(0,c.dW)("search_formatter_area_drawn",null,{capitalize:!0}),t=(0,r._)((0,a.eJ)(e),2),o=t[0],f=t[1],d=(0,r._)((0,a.eJ)(!1),2),p=d[0],h=d[1],v=(0,a.Ye)((function(){return function(n,e){s.has(n)||s.set(n,new Map);var t=s.get(n);return function(n){var r=JSON.stringify(n);return t.has(r)||t.set(r,e(n)),t.get(r)}}("polygonNaming",(function(n){return(0,u.Z)(n).then((function(e){var t="Polygon"===i()(n,"geometry.type");return e.label?e.label:(0,l.w)(e,t?"POLYGON_DRAWING":"CIRCLE_DRAWING",t?null:n.properties.radius,n.properties&&n.properties.indirizzo)}))}))}),[]);return(0,a.d4)((function(){f(e),h(!0),v(n).then(f).then(()}),[n]),{label:o,loading:p}}},28642:function(n,e,t){"use strict";t.d(e,{Z:function(){return m}});var r=t(21379),o=t(99480),i=t(2842),a=t(40811),c=t(58058),u=t(60610),l=t(89774),s=t(70385),f=function(n,e,t,r,o,i,f){var d=document.documentElement.lang.slice(0,2);return(0,u.d)("/api-next/geography/autocomplete/",{searchParams:{macrozones:1,proximity:f,microzones:1,min_level:e?9:5,query:n,withRegions:t||void 0,withCountries:r||void 0,international:o||void 0,__lang:d}}).json().then((function(n){return n.map((function(n){return(0,c._)((0,a._)({},n,(0,s.r0)([n],i)),{originalLabel:n.label,icon:n.type===l.lU.metro?"metro":"marker"})}))}))},d=t(52586),p={lat:"41.902715",lng:"12.496245"},h=function(n){var e=n&&n.center||p;return v(e)},v=function(n){return"".concat(parseFloat(n.lat+"").toFixed(3),",").concat(parseFloat(n.lng+"").toFixed(3))},m=function(n,e,t,a,c){var u=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]&&arguments[7],p=arguments.length>8&&void 0!==arguments[8]&&arguments[8],m=arguments.length>9&&void 0!==arguments[9]&&arguments[9],y=(0,d.T)(n.find(()),g=(0,r.Ye)((function(){return h(y)}),[y]),_=(0,i.o9)({input:e,autocompleteApi:function(n){return f(n,u,l,s,p,m,c?v(c.current.getCenter()):g)},values:n,reducer:function(n,e){switch(e.type){case"ADD_ITEM":t(e.item);break;case"REMOVE_ITEM":a()}return[]}}),b=_.inFocus?_.search:"";return(0,o.lo)(e,(,[b]),_}},7298:function(n,e,t){"use strict";t.d(e,{X:function(){return C}});var r=t(40811),o=t(58058),i=t(94405),a=t(30196),c=t(21379),u=t(89774),l=t(50225),s=t(74864),f=t(1841),d=t(74169),p=t(95006),h=t(70385),v=function(n,e){var t=[];return e.forEach((function(e){var r;(0,u.Qy)(e,(0,u.WY)(n,u.lU.metroLine))||(r=t).push.apply(r,(0,a._)(e.children.filter((function(e){return e.label===(n.originalLabel?n.originalLabel:n.label)}))))})),t},m=function(n,e){return n.findIndex((function(n){return(0,u.Qy)(n,e)||(0,u.Qy)(n,(0,u.WY)(e,u.lU.metroLine))}))},y=function(n){var e;return null===n||void 0===n||null===(e=n.parents)||void 0===e?void 0:e.find((function(n){return n.type===u.lU.city}))},g=function(n,e){return n.every((function(n){return y(n)&&y(e)&&y(n).id===y(e).id}))},_=function(n){return n.type===u.lU.city?n:y(n)},b=function(n,e,t,r){-1===e&&(g(r,n)?(r=r.concat(n),n.type===u.lU.metro&&v(n,t).forEach((function(n){var e=m(r,n);-1===e&&(r=b(n,e,t,r))}))):r=[n]);var o=t.find((function(e){return(0,u.Qy)(e,n.parents[0])}));return o.children.every(()&&(o.children.forEach((function(n){var e=r.findIndex(();-1!==e&&r.splice(e,1)})),r=r.concat(o)),r},w=function(n,e,t,r){var o=t.find((),i=r.findIndex((function(n){return(0,u.Qy)(n,o)}));return-1!==i?(r.splice(i,1),r=r.concat(o.children.filter(())):r=r.slice(0,e).concat(r.slice(e+1)),n.type===u.lU.metro&&v(n,t).forEach((function(n){var e=m(r,n);-1!==e&&(r=w(n,e,t,r))})),r},S=function(n,e,t,r){return-1===e&&(r=g(r,n)?r.concat(n):[n]),n.children&&n.children.forEach((function(e){var o=r.findIndex((function(n){return(0,u.Qy)(n,e)}));-1!==o&&r.splice(o,1),n.type===u.lU.metroLine&&v(e,t).forEach((function(n){var e=m(r,n);-1===e&&(r=b(n,e,t,r))}))})),r.slice()},k=function(n,e,t,r){return-1!==e&&r.splice(e,1),n.children&&n.children.forEach((function(e){var o=r.findIndex((function(n){return(0,u.Qy)(n,e)}));-1!==o&&r.splice(o,1),n.type===u.lU.metroLine&&v(e,t).forEach((function(n){var e=m(r,n);-1!==e&&(r=w(n,e,t,r))}))})),r.slice()},C=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=(0,i._)((0,c._Y)((function(n,e){switch(e.type){case"CLEAN":return{type:"geography",value:[]};case"SET":return"history"in e&&e.history&&f.qs.add(e.payload),{type:e.context,value:e.payload};case"ADD":case"REMOVE":case"TOGGLE":var t="geography"===n.type?n.value:[],r=e.payload,o=(t=(0,h.hY)(r)?t.filter(():t.filter(()).findIndex((function(n){return(0,u.Qy)(n,r)}));if(r.type!==u.lU.microzone&&r.type!==u.lU.metro||!e.city)if(!e.city||r.type!==u.lU.cityZone&&r.type!==u.lU.metroLine)-1!==o?"ADD"!==e.type&&(t=t.slice(0,o).concat(t.slice(o+1))):"REMOVE"!==e.type&&(t=(0,p.vZ)(r)&&g(t,r)?t.concat(r):[r]);else{var i=r.type===u.lU.cityZone?e.city.macrozones:e.city.metroList,a=i.find((function(n){return(0,u.Qy)(n,r)})),c=!!a.children&&a.children.some((function(n){return-1!==t.findIndex((function(e){return(0,u.Qy)(e,n)}))}));t="ADD"===e.type||"TOGGLE"===e.type&&-1===o&&!c?S(a,o,i,t):k(a,o,i,t)}else{var l=r.type===u.lU.microzone?e.city.macrozones:e.city.metroList,s=l.find((function(n){return(0,u.Qy)(n,r.parents[0])}));t="ADD"===e.type||"TOGGLE"===e.type&&-1===o&&-1===t.findIndex((function(n){return(0,u.Qy)(n,s)}))?b(r,o,l,t):w(r,o,l,t)}if(e.city&&r.type!==u.lU.metro&&r.type!==u.lU.metroLine)if(0===t.length)t=[e.city];else(e.city.macrozones?e.city.macrozones:e.city.metroList).every((function(n){return t.find((function(e){return(0,u.Qy)(n,e)}))}))&&(t=[e.city]);return e.history&&f.qs.add(t),{type:e.context,value:t}}}),{type:"geography",value:n}),2),t=e[0],a=e[1];unction m(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a({type:"SET",context:"geography",history:e,payload:n})}function y(n,e,t){var i=_(e);if(i)if(e.type===u.lU.metro||e.type===u.lU.metroLine)(0,s.r)(i).then((function(c){var u=(0,o._)((0,r._)({},i),{metroList:c});a({type:n,context:"geography",history:t,payload:e,city:u})}));else{var c=(0,d.dW)(d.e5.macrozones,i.id);c||i.macrozones&&((0,d._4)(d.e5.macrozones,i.id,i),c=i),c&&c.macrozones?(c=(0,l.d)(c),a({type:n,context:"geography",history:t,payload:e,city:c})):(0,l.W)(i).then((function(r){r&&r.macrozones&&r.macrozones.length>0?(r=(0,l.d)(r),a({type:n,context:"geography",history:t,payload:e,city:r})):a({type:n,context:"geography",history:t,payload:e})}))}else a({type:n,context:"geography",history:t,payload:e})}ar O="geography"===t.type?t.value:[],E="draw"===t.type?t.value:void 0;return{values:O,draw:E,add:function(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y("ADD",n,e)},remove:toggle:function(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y("TOGGLE",n,e)},removeAll:C,setValues:m,setDraw:v}}},4876:function(n,e,t){"use strict";t.d(e,{KR:function(){return s},ZZ:function(){return f}});var r=t(94405),o=t(21379),i=t(10115),a=t(40811),c=t(82634),u=c.y$.extend({options:{fill:!0,radius:10},initialize:function(n,e){c.Zr.setOptions(this,e),this._latlng=(0,c.WJ)(n),this._radius=this.options.radius},setLatLng:function(n){return this._latlng=(0,c.WJ)(n),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:getRadius:setStyle:_project:_updateBounds:_update:_updatePath:_empty:_containsPoint:),l=c.mh.extend({options:{radius:10,minAccuracyRadius:12,animationDuration:2e3,animationInterval:3200,radarOpacity:.4,radarSizeFactor:.1,color:"#fff",weight:4,fillColor:"#4b86a4",fillOpacity:1,outerColor:"#4b86a4",outerWeight:1,outerOpacity:.3,animate:!0},initialize:function(n,e){this.options=e=(0,a._)({},this.options,e),this._innerCircle=new u(n,{radius:e.radius,color:e.color,fillColor:e.fillColor,fillOpacity:e.fillOpacity,weight:e.weight}),this._outerCircle=new u(n,{radius:e.minAccuracyRadius,color:e.outerColor,fillColor:e.fillColor,stroke:!0,weight:e.outerWeight,fillOpacity:e.outerOpacity,opacity:e.outerOpacity}),this._radar=new u(n,{radius:0,fillColor:e.fillColor,stroke:!1}),this._accuracyRadius=0},animate:function(){var n=this;if(this._animating){var e=Date.now(),t=this.options,r=this._radar,o=r.options,i=function(){var a=Math.min((Date.now()-e)/t.animationDuration,1),c=t.radarOpacity*(1-a);r.setRadius(n._accuracyRadius*t.radarSizeFactor*a),o.opacity=o.fillOpacity=c,a<1?requestAnimationFrame(i):n.startAnimation()};requestAnimationFrame(i)}},startAnimation:function(){this._animating=!0,this._animationRequest=setTimeout(this.animate.bind(this),this.options.animationInterval)},stopAnimation:onAdd:function(n){this._map=n,this._radar.addTo(n),this._innerCircle.addTo(n),this.options.animate&&this.startAnimation()},onRemove:function(){this._map=null,this._innerCircle.remove(),this._outerCircle.remove(),this._radar.remove(),this.stopAnimation()},getEvents:_redraw:setAccuracy:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._accuracy,e=this,t=e._map,r=e._latlng,o=e.options,i=t.project(r.toBounds(n).getNorthWest());this._accuracy=n,this._accuracyRadius=Math.max(i.distanceTo(t.project(r))/Math.sqrt(2),o.minAccuracyRadius),this._outerCircle.setRadius(this._accuracyRadius)},setLatLng:function(n){this._latlng=n,this._innerCircle.setLatLng(n),this._outerCircle.setLatLng(n),this._radar.setLatLng(n)}}),s={label:(0,i.dW)("geolocation_label"),icon:"scope",customClasses:"nd-autocomplete__listItem--geolocationHint"},f=function(n){var e=(0,r._)((0,o.eJ)(),2),t=e[0],i=e[1];(0,o.d4)((function(){n.current.on("locationfound",(function(n){i(n)}))}),[]),(0,o.d4)((function(){if(t){var e=new l([0,0]);return e.addTo(n.current),e.setLatLng(t.latlng),e.setAccuracy(t.accuracy),function(){e.remove()}}}),[t]);return{locateUser:function(){n.current.locate({setView:!0,maximumAge:36e5})},location:t,setLocation:i}}},52586:function(n,e,t){"use strict";t.d(e,{T:function(){return o}});var r=t(21379),o=function(n){var e=(0,r.sO)();return n&&(e.current=n),e.current}},21682:function(n,e,t){"use strict";t.d(e,{A:function(){return u}});var r=t(94405),o=t(89774),i=t(21379),a=t(74864),c=function(){},u=function(n){var e=(0,r._)(function(n){var e=(0,i.eJ)();return void 0!==n?[n,c]:e}(n),2),t=e[0],u=e[1],l=(0,r._)((0,i.eJ)(null),2),s=l[0],f=l[1];return(0,i.d4)((function(){if(!t||t.type!==o.lU.metro&&t.type!==o.lU.metroLine)f(null);else{var n=t.parents.find((function(n){return n.type===o.lU.city}));n?(0,a.r)(n).then(f):f(null)}}),[t]),{metroListItems:s,setMetroListSource:u,closeMetroCheckList:function(){u(null)}}}},84595:function(n,e,t){"use strict";t.d(e,{sc:function(){return u}});var r=t(94405),o=t(89774),i=t(21379),a=t(50225),c=function(){},u=function(n){var e=(0,r._)(function(n){var e=(0,i.eJ)();return void 0!==n?[n,c]:e}(n),2),t=e[0],u=e[1],l=(0,r._)((0,i._Y)((function(n,e){return e?(0,a.d)(e):null}),null),2),s=l[0],f=l[1];return(0,i.d4)((function(){var n;if(t)if((n=t).type!==o.lU.city||!(n.macrozones&&n.macrozones.length>0)&&n.macrozones)if(function(n){return n.type===o.lU.cityZone||n.type===o.lU.microzone}(t)){var e=t.parents.find((function(n){return n.type===o.lU.city}));if(s&&(0,o.Qy)(e,s))return;(0,a.W)(e).then((function(n){f(n&&n.macrozones?n:null)}))}else f(null);else t.macrozones?f(t):(0,a.W)(t).then((function(n){n.macrozones&&n.macrozones.length?f(n):f(null)}));else f(null)}),[t]),{list:s&&s.macrozones,city:s,setCheckListSource:u,closeCheckList:function(){u(null)}}}},74169:function(n,e,t){"use strict";t.d(e,{_4:function(){return u},dW:function(){return c},e5:function(){return r}});var r,o=t(68727),i=t.n(o),a={};!function(n){n.macrozones="macrozones",n.metros="metros",n.polygonNaming="polygonNaming"}(r||(r={}));var c=function(n,e){return i()(a,"".concat(n,".").concat(e))},u=function(n,e,t){i().has(a,n)||(a[n]={}),a[n][e]=t}},59312:function(n,e,t){"use strict";t.d(e,{Gj:function(){return a},MZ:function(){return i},zx:function(){return c}});var r=t(26648),o=function(n,e){var t=document.querySelector("nd-geography-search");t&&(0,r.j8)(t,"geographySearch:".concat(n),e)},i=function(n){o("onDrawGeolocationRequest",{detail:{source:n}})},a=function(n){o("onIsochronousGeolocationRequest",{detail:{source:n}})},c=,26829:function(n,e,t){"use strict";t.d(e,{s:function(){return d}});var r=t(58260),o=t(40811),i=t(58058),a=t(89774),c=t(70385),u=t(89879),l={};unction f(n,e){Object.assign(l,e),s((0,i._)((0,o._)({},e),{event:"search_form:".concat(n)}))}var d=function(){function n(n,e){s((0,r._)({},n,e))}return{interactionStart:function(){l.start||f("start",{start:Date.now()})},clickOnGeographySearchInput:submit:function(n,e){var t=e.place?JSON.parse(e.place):[],r=e.vrt?JSON.parse(e.vrt):null,o=t.length>0?u.N3.Place:null;r&&(o=r.properties&&"Route"===r.properties.type?u.N3.Route:r.properties&&r.properties.radius?u.N3.DrawCircle:u.N3.DrawPolygon),f("submit",{end:Date.now(),duration:Date.now()-l.start,minPriceSet:!!e["price[min]"],maxPriceSet:!!e["price[max]"],minSurfaceSet:!!e["surface[min]"],maxSurfaceSet:!!e["surface[max]"],hasMetro:t.length>0&&t.every(c.hY),hasMacrozones:t.length>0&&t.every((),tab:n,typology:e.category,searchType:o,transport:o===u.N3.Route?r.properties.transport:null})},autocompleteSelection:function(n,e){f("autocomplete_selection",{mapOpened:e,isHistory:Boolean(n||l.isHistory)})},mapModalConfirm:function(n,e){n===u.N3.Place?f("modal_confirm",{type:e.every((function(n){return n.type===a.lU.metroLine||n.type===a.lU.metro}))?"Metro":"Place",mapConfirm:!0,searchType:u.N3.Place}):f("modal_confirm",{type:e.geometry.type,mapConfirm:!0,searchType:e.properties&&"Route"===e.properties.type?u.N3.Route:e.properties&&e.properties.radius?u.N3.DrawCircle:u.N3.DrawPolygon,transport:e.properties&&"Route"===e.properties.type?e.properties.transport:null})},checkInteraction:function(){l.checkboxInteraction||f("check_interaction",{checkboxInteraction:!0})},mapOpen:function(n){f("map_open",{mapOpened:!0,searchMode:n})},triggerMetroSearch:function(e){n("isMetroSearch",e)},triggerMicrozoneSearch:clickOnTag:function(){f("tag_click")},clickOnDeleteTag:function(){f("tag_delete")},clickOnModifySelection:function(){f("modify_selection_click")},clickOnModifyButton:function(){f("modify_click")}}}},44630:function(n,e,t){"use strict";t.d(e,{w:function(){return o}});var r=t(10115),o=function(n,e,t,o){var i=n.province,a=n.city,c=n.zone,u=n.address;if(!a&&u){var l=u.find((function(n){return n.types&&n.types.find&&n.types.find((function(n){return"administrative_area_level_3"===n}))}));l&&(a=l.long_name)}if(o){var s="".concat(o.split("-").map((function(n){return n.charAt(0).toUpperCase()+n.slice(1)})).join(" "));return a&&(s+=" \u2022 ".concat(a)),s}var f="POLYGON_DRAWING"===e?(0,r.dW)("search_formatter_area_drawn"):(0,r.dW)("lbl_circle"),d=f.charAt(0).toUpperCase()+f.slice(1);if(!i&&!a&&!c&&!u)return d;var p=function(n,e,t,r,o){switch(!0){case!!r:return function(n,e){var t=n.find((function(n){return n.types.find((function(n){return"route"===n}))})),r=t?t.long_name:"",o=n.find((function(n){return n.types.find((function(n){return"street_number"===n}))})),i=o?o.long_name:"",a=n.find((function(n){return n.types.find(()})),c=a?a.long_name:"";return e?i?"".concat(r,", ").concat(i," \u2022 ").concat(c):r?"".concat(r," \u2022 ").concat(c):c:"".concat(r,", ").concat(c)}(r,o);case!!t&&!!e:return"".concat(t," ").concat(e);case!!e&&!!n:var i=e;return e!==n&&(i+=", "+n),i;case!!n:return n;default:return""}}(i,a,c,u,"CIRCLE_DRAWING"===e),h=document.documentElement.lang.replace("_","-"),v=t?Intl.NumberFormat(h).format(t>=1e3?parseFloat((t/1e3).toFixed(2)):parseFloat(t.toFixed(0))):0;return"POLYGON_DRAWING"===e?"".concat(d," \u2022 ").concat(p," "):"".concat(v," ").concat(t>=1e3?"Km":"m"," ").concat((0,r.dW)("lbl_from")," ").concat(p)}},95006:function(n,e,t){"use strict";t.d(e,{DM:function(){return v},vZ:function(){return l},vl:function(){return s}});var r,o,i=t(58260),a=t(89774),c=t(70385),u=t(82634),l=function(n){return n.type===a.lU.cityZone||n.type===a.lU.microzone},s=(r={},(0,i._)(r,a.lU.country,6),(0,i._)(r,a.lU.region,7),(0,i._)(r,a.lU.province,11),(0,i._)(r,a.lU.macroarea,11),(0,i._)(r,a.lU.city,12),(0,i._)(r,a.lU.cityZone,12),(0,i._)(r,a.lU.microzone,12),(0,i._)(r,a.lU.metroLine,12),(0,i._)(r,a.lU.metro,14),(0,i._)(r,a.lU.road,16),r),f=(o={},(0,i._)(o,a.lU.country,6),(0,i._)(o,a.lU.region,7),(0,i._)(o,a.lU.province,11),(0,i._)(o,a.lU.macroarea,11),(0,i._)(o,a.lU.city,12),(0,i._)(o,a.lU.cityZone,12),(0,i._)(o,a.lU.microzone,12),(0,i._)(o,a.lU.metroLine,12),(0,i._)(o,a.lU.metro,13),(0,i._)(o,a.lU.road,16),o),d=function(n,e){return e?f[n.type]:s[n.type]},p=function(n){return Math.sqrt(Math.pow(n.getNorthWest().lat-n.getSouthEast().lat,2)+Math.pow(n.getNorthWest().lng-n.getSouthEast().lng,2))},h=function(n){var e=n.filter(().map((function(n){return new u.IZ((0,a.UI)(n.path))})),t=new u.IZ(n.filter((function(n){return!(n.path&&n.path.length>0)&&n.center})).map((function(n){return n.center})));return t.isValid()&&e.push(t),e.reduce(()},v=function(n,e,t,r){(function(n,e){return n.type===a.lU.cityZone?e((0,a.wj)(n)).then(():n.path&&n.path.length>0?Promise.resolve(h([n])):e(n).then((function(e){if(n.type===a.lU.metro)return n.center||(n.center={lat:parseFloat(e.polygons[0].lat),lng:parseFloat(e.polygons[0].lng)}),h([n]);if(n.type===a.lU.metroLine){var t=e.polygons[0].children.map((function(n){return n.center||(n.center={lat:parseFloat(n.lat),lng:parseFloat(n.lng)}),n}));return h(t)}return h(e.polygons)}))})(n,e).then((function(e){var o=(0,c.a7)(t.current,e.pad(n.type===a.lU.province?-.1:0)),i=o.center,u=o.zoom;t.current.setView(i,Math.max(d(n,r)-1,Math.min(d(n,r)+1,u)))}))}},79652:function(n,e,t){"use strict";t.r(e),t.d(e,{HISTORY_SIZE:function(){return l},add:function(){return p},compareEntries:function(){return d},get:function(){return c},isAddressAutocompleteValue:function(){return f},isGeoJSON:function(){return s}});var r=t(94405),o=t(30196),i=t(88077),a=(0,r._)((0,i.ur)("".concat("nd-search:map/draw","/history"),{defaultValue:[],version:1}),2),c=a[0],u=a[1],l=10,s=f=function d(n,e){return f(n)&&f(e)?n.label===e.label&&n.description===e.description&&n.type===e.type:s(n)&&s(e)?JSON.stringify(n.geometry)===JSON.stringify(e.geometry)&&JSON.stringify(n.properties)===JSON.stringify(e.properties):void 0}function p(n){u([n].concat((0,o._)(c().filter(())).slice(0,l))}},1841:function(n,e,t){"use strict";t.d(e,{t0:function(){return o},qs:function(){return r}});var r={};t.r(r),t.d(r,{HISTORY_SIZE:function(){return d},add:function(){return v},get:function(){return h},sameEntries:function(){return p}});var o=t(79652),i=t(94405),a=t(88077),c=t(89774),u=[c.lU.country,c.lU.region],l=(0,i._)((0,a.ur)("".concat("nd-search:map/places","/history"),{defaultValue:[],version:1}),2),s=l[0],f=l[1],d=10;function p(n,e){return n.length===e.length&&n.every(()}function h(){return s().filter((function(n){return!(n&&n[0]&&u.includes(n[0].type))}))}function v(n){var e=function(n){t.slice(0,n).every(()&&r.unshift(t[n])};if(!(n&&n[0]&&u.includes(n[0].type))){for(var t=[n].concat(h()),r=[],o=t.length-1;o>=0;o--)e(o);f(r.slice(0,d))}}var m=(0,i._)((0,a.ur)("".concat("nd-search:map/tutorial","/steps"),{defaultValue:{tabs:!0,drawModes:!0},version:1}),2);m[0],m[1]},70385:function(n,e,t){"use strict";t.d(e,{IE:function(){return f},IK:function(){return C},J9:function(){return I},Rm:function(){return L},SQ:function(){return R},TC:function(){return s},Vn:function(){return A},Yt:function(){return M},_x:function(){return z},a7:function(){return E},hT:function(){return O},hY:function(){return d},ky:function(){return b},m1:function(){return U},mC:function(){return k},mD:function(){return N},nV:function(){return T},r0:function(){return w},wv:function(){return P}});var r=t(30196),o=t(10115),i=t(89774),a=t(82634),c=t(89879),u=t(82936),l=function(n){return n.type===i.lU.province},s=function(n){return n.type===i.lU.cityZone},f=function(n){return n.type===i.lU.microzone},d=p=function(n){return n.type===i.lU.region},h=function(n){return n.type===i.lU.country},v=function(n,e){var t,r;return((null===n||void 0===n?void 0:n.type)===e?n.id:null===n||void 0===n||null===(r=n.parents)||void 0===r||null===(t=r.find(())||void 0===t?void 0:t.id)||null},m={IT:{province:"lbl_province",region:"lbl_region"},FR:{province:"lbl_department",region:"lbl_region"},CH:{province:"lbl_district",region:"lbl_canton"},SL:{province:"lbl_province_zone",region:"lbl_region"},HR:{province:"lbl_shire",region:"lbl_region"},MC:{province:"lbl_principality",region:"lbl_region"},LU:{province:"lbl_province_canton",region:"lbl_region"},DE:{province:"lbl_district",region:"lbl_region"}},y=function g(n,e){return l(n)||n.type===i.lU.city||s(n)||f(n)||p(n)||h(n)?y(w([n],e)):d(n)?function(n){if(n.type===i.lU.metro){var e=(0,i.WY)(n,i.lU.city);return y({label:"".concat((0,o.dW)("lbl_metro")," ").concat(n.originalLabel?n.originalLabel:n.label),description:e?e.label:""})}return y({label:n.parents[0].label,description:n.label})}(n):n.label}var _=function(n,e){return(n.originalLabel?n.originalLabel:n.label)===(e.originalLabel?e.originalLabel:e.label)},b=function(n){var e=[];return n.forEach((function(t){t.type===i.lU.metro?n.find((function(n){return n.type===i.lU.metroLine?!!n.children.find((function(n){return _(n,t)})):e.find(()}))||e.push(t):e.push(t)})),e};function w(n,e){var t=n[0];if(!t)return{label:"",description:""};var a=n.length>1,c=t.parents&&t.parents.length>0,u=t.type===i.lU.metro?t.sameStationOn?[(0,i.WY)(t,i.lU.metroLine).label].concat((0,r._)(t.sameStationOn.map(())):[(0,i.WY)(t,i.lU.metroLine).label]:null,s=t.type===i.lU.metro?"".concat((0,o.dW)("lbl_metro")," ").concat(t.originalLabel?t.originalLabel:t.label," - ").concat(u.join(", ")):t.label,f=t.parents&&t.parents.find((function(n){return n.type===i.lU.city}));a&&f&&(s=f.label);var y,g="";if(l(t))g=e?function(n){var e,t=v(n,i.lU.country);return(0,o.dW)((null===(e=m[t])||void 0===e?void 0:e.province)||"lbl_province")}(t):(0,o.jn)("lbl_province",1);else if(t.admin_centre)g=(0,o.jn)("lbl_city",1);else if(p(t))g=e?function(n){var e,t=v(n,i.lU.country);return(0,o.dW)((null===(e=m[t])||void 0===e?void 0:e.region)||"lbl_region")}(t):(0,o.dW)("lbl_region");else if(h(t))g=(y=(0,o.dW)("lbl_country")).charAt(0).toUpperCase()+y.slice(1);else if(a&&c)g=d(t)?function(n){return!0===n.every(()?(0,o.dW)("lbl_metro_lines",[n.length]):(0,o.dW)("lbl_metro_stations",[n.reduce((function(n,e){return e.type===i.lU.metroLine?n+(e.children?e.children.length:0):n+1}),0)])}(n):(0,o.dW)("polygon_selected_type",[n.length],{count:n.length,context:"".concat(t.type===i.lU.microzone?i.lU.cityZone:t.type)});else{var _=c?f?f.label||"":t.parents[0].label:"";g=(0,o.dW)("geo_entity_type",{name:t.label,parent:_},{context:"".concat(t.type)})}return{label:s,description:g}}var S={car:(0,o.dW)("move_on_car").toLowerCase(),bike:(0,o.dW)("move_on_bike").toLowerCase(),foot:(0,o.dW)("move_on_foot").toLowerCase()},k=function(n,e,t){return"".concat(t," min ").concat(S[e]," ").concat((0,o.dW)("lbl_from")," ").concat(n.label," \u2022 ").concat(function(n){var e=n.split(" "),t=[];return e.forEach((),t.join(" ")}(n.description))},C=function(n,e){return n.every(()&&(n=b(n)),1===n.length?g(n[0],e):y(w(n,e))},O=function(n){var e=n.getBounds();return function(n){var e=n.length,t=Math.PI/180,r=0;if(e>2){for(var o=0;o<e;o++){var i=n[o],a=n[(o+1)%e];r+=(a.lng-i.lng)*t*(2+Math.sin(i.lat*t)+Math.sin(a.lat*t))}r=6378137*r*6378137/2}return Math.abs(r)}([e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()])/1e6},E=L=function(n,e,t){var r=e.zones,o=e.microzones,a=e.fkComune,c=e.fkProvincia,l=e.fkRegione,s=e.metros,f=e.metroLines,d=t.polygonServiceHost,p=t.polygonsServiceVersion;if(r||a||c||l){var h,v=(0,u.y)(d,p);if(r&&r.length){var m=o&&o.length;h=(m?o:r).map((function(n){return v({type:m?i.lU.microzone:i.lU.cityZone,id:n})}))}else s&&s.length>0||f&&f.length>0?(h=[],f&&f.length>0&&(h=h.concat(f.map((function(n){return v({type:i.lU.metroLine,id:n})})))),s&&s.length>0&&(h=h.concat(s.map(()))):h=[v({type:a?i.lU.city:c?i.lU.province:i.lU.region,id:a||(c||l)})];Promise.all(h).then((function(e){var t=e.filter(().map(();t.length&&n.setValues(t)}))}},I=function(n,e){var t="polygon"===e.mode?new a.mg(e.area):new a.Cd(e.area.center,{radius:e.area.radius}),r=t.toGeoJSON();r.properties=e.properties||{},"Point"===r.geometry.type&&(r.properties.radius=t.getRadius()),n.setDraw(r)},A=function(n,e){var t=e?[{label:(0,o.dW)("lbl_whole_city"),value:e.id,children:[],type:e.type}]:[];return n.forEach((function(n){var e={label:n.label,value:n.id,children:[],type:n.type};if(t.push(e),n.children){var r=t.length-1;n.children.forEach((function(n){t.push({label:n.label,value:n.id+"",parentId:r,children:[],type:n.type}),e.children.push(t.length-1)}))}})),t},z=function(n){var e=n.address_components,t=e.find((function(n){return n.types.includes("postal_code")})),r=e.find((function(n){return n.types.includes("locality")})),o=e.find((),i=n.geometry.location,a=i.lat,c=i.lng;return{label:o?o.long_name:"",description:"".concat(t?t.long_name:""," ").concat(r?r.long_name:""),lat:a,lng:c}},P=M=function(n,e){return!n||"Point"===n.geometry.type&&e===c.N3.DrawCircle||"Polygon"===n.geometry.type&&e===c.N3.DrawPolygon||n.properties&&"Route"===n.properties.type&&e===c.N3.Route},R=function(n,e,t){var r={250:50,1e3:100,15e3:500},o=Math.max(e,D(n,r)),i=Math.min(t,x(o,r));return Math.abs(n-o)<Math.abs(n-i)?o:i},x=function(n,e){if(!e)return n+1;var t=Object.keys(e).map((function(n){return parseInt(n,10)}));t.sort((function(n,e){return n-e}));for(var r=1;r<t.length;r++)if(t[r]>n)return n+e[t[r-1]];return n+e[t[t.length-1]]},D=function(n,e){if(!e)return n-1;var t=Object.keys(e).map(();t.sort(();for(var r=t[0],o=!1,i=1;i<t.length&&!o;i++)t[i]>n&&(o=!0,r=t[i-1]);return o||(r=t[t.length-1]),0===r?0:Math.floor(n/e[r])*e[r]};function U(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"string",r=(Math.round(100*(n/1e3+Number.EPSILON))/100).toFixed(e);return"number"===t?+r:r}var N=function(n){return n?(0,o.dW)("insert_province_city_zones_without_metro"):(0,o.dW)("insert_province_city_zones")},T=function(n){var e=n.checkListEnabled,t=n.currentSelectionType,r=n.isInputFocused,i=n.isMetro,a=n.isMobile,u=n.metroListEnabled,l=n.searchMetroDisabled;return!t||r||e||u?a?N(l):t&&t===c.NB.GEOGRAPHY?i?(0,o.dW)("geography_search_metro_placeholder"):(0,o.dW)("geography_search_locality_placeholder"):(0,o.dW)("geography_search_new_search_placeholder"):null}},30850:function(n,e,t){"use strict";var r;t.d(e,{z:function(){return r}}),r||(r={}))},77266:function(n,e,t){"use strict";t.d(e,{U:function(){return s}});var r=t(40811),o=t(58058),i=t(94624),a=t(76805),c=t(21379),u=t(70385);function l(){var n=(0,i._)(['\n    <div class="nd-tags">\n        ',"\n    </div>\n"]);return l=function(){return n},n}var s=function(n){var e=n.values,t=n.onRemove,i=n.onClick,s=n.internationalLabelsEnabled;return(0,c.dy)(l(),(0,a.V)({value:(0,o._)((0,r._)({},e[0]),{label:(0,u.IK)(e,s)}),onRemove:t,onClick:i}))}},65762:function(n,e,t){"use strict";t.d(e,{z:function(){return u}});var r=t(94624),o=t(76805),i=t(21379),a=t(70385);function c(){var n=(0,r._)(['\n    <div class="nd-tags">\n        ',"\n    </div>\n"]);return c=function(){return n},n}var u=function(n){var e=n.address,t=n.transport,r=n.time,u=n.onRemove,l=n.onClick;return(0,i.dy)(c(),(0,o.V)({value:{label:(0,a.mC)(e,t,r)},onRemove:u,onClick:l}))}},62765:function(n,e,t){"use strict";t.d(e,{d:function(){return s}});var r=t(94624),o=t(21379),i=t(80376),a=t(59003),c=t(30850);function u(){var n=(0,r._)(['<span\n                data-cy="geography-search-close"\n                class=',"\n            >\n                ","\n            </span>"]);return u=function(){return n},n}function l(){var n=(0,r._)(["\n        <div class=",">\n            <span class=",">","</span>\n            ","\n        </div>\n    "]);return l=function(){return n},n}var s=function(n){var e=n.title,t=n.showClose;return(0,o.dy)(l(),c.z.searchMapHeader,c.z.searchMapHeaderTitle,e,t&&(0,o.dy)(u(),(0,i.AK)(c.z.searchMapHeaderCloseIcon,"js-close"),(0,a.J)({name:"cross"})))}},2842:function(n,e,t){"use strict";t.d(e,{HC:function(){return x},aV:function(){return U},o9:function(){return F}});var r,o=t(94405),i=t(94624),a=t(21379),c=t(60610),u=t(99480),l=t(76805),s=t(59003),f=t(10115),d=t(80376),p=t(82684),h=t(42543),v=t(26648);function m(){var n=(0,i._)(["\n    <li class=",">\n        <span class=",">\n            ","\n        </span>\n        <span class=",">\n            ","\n        </span>\n    </li>\n"]);return m=function(){return n},n}function y(){var n=(0,i._)(["\n    <span class=",">\n        ","\n    </span>\n"]);return y=function(){return n},n}unction _(){var n=(0,i._)(["\n                              <span class=","\n                                  >","</span\n                              >\n                          "]);return _=function(){return n},n}function b(){var n=(0,i._)(["\n        <li class=",">\n            ","\n            <span class=",">\n                ","\n            </span>\n        </li>\n    "]);return b=function(){return n},n}function w(){var n=(0,i._)(["\n        <div class=",">\n            <div class=",">\n                <ul class=",">\n                    ","\n                </ul>\n            </div>\n        </div>\n    "]);return w=function(){return n},n}unction k(){var n=(0,i._)(['\n                          <div class="nd-tags">\n                              ',"\n                          </div>\n                      "]);return k=function(){return n},n}r||(r={}));var O,E,L,I,A,z,P={name:a.gr.toString,minLength:a.gr.toNumber.withDefault(2),defaultValue:a.gr.toObject,value:a.gr.toObject,withTags:a.gr.toBoolean,url:a.gr.toString,webApi:a.gr.noop},M=function(){return(0,a.dy)(O||(O=m()),(0,d.AK)(r.listItem,r.loader),r.listItemIcon,(0,s.J)({name:"loader",className:"is-spinning"}),r.listItemText,(0,f.dW)("lbl_loading"))},R=function(n){return(0,a.dy)(E||(E=y()),r.listItemIcon,(0,s.J)({name:n}))},x=(0,a.Sk)((function(n){var e=n.item,t=n.active,o=n.onClick,i=n.searchString,c=n.onHover,u=n.customClasses,l=(0,a.sO)(),s=e.label+(e.description?" - "+e.description:"");return(0,a.d4)((function(){t&&l.current&&(l.current.parentElement||l.current.parentElement.parentElement)&&(0,p.c)(l.current,l.current.parentElement.parentElement)}),[t]),(0,a.dy)(L||(L=g()),(function(){return o(e)}),c,(0,d.AK)(r.listItem,e.className,t&&r.listItemSelected,u),s,l,e.icon?R(e.icon):null,r.listItemText,(0,h.YF)(e.label.replace(new RegExp((0,d.hr)(i),"i"),()),e.description?(0,a.dy)(I||(I=_()),r.description,(0,h.YF)(e.description)):null)})),D=function(){var n=(0,u.j3)("small");return(0,a.dy)(A||(A=b()),r.listItem,n&&R("exclamation-mark--circle"),r.listItemText,(0,f.dW)("autocomplete_no_results"))},U=function(n){var e=n.highlight,t=n.items,o=n.loading,i=n.onClick,c=n.searchString,u=n.onItemHover;return(0,a.dy)(z||(z=w()),r.listContainer,r.listContent,r.list,o?M:t.length?t.map((function(n,t){return x({onHover:u&&u(t),item:n,searchString:c,onClick:i,active:e===t})})):D)};function N(){return(N=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n}).apply(this,arguments)}var T,j,W,B={items:[],loading:!1},F=function(n){var e,t=n.autocompleteApi,r=n.onChange,i=n.input,c=n.reducer,l=void 0===c?c,s=n.defaultValue,f=void 0===s?[]:s,d=n.minLength,p=void 0===d?2:d,h=n.enabled,v=void 0===h||h,m=n.withBackspace,y=void 0===m||m,g=n.values,_=function(n){var e=(0,o._)((0,a.eJ)(""),2),t=e[0],r=e[1],i=(0,o._)((0,a.eJ)(!1),2),c=i[0],l=i[1];urn(0,u.o$)(n,"focus",s),(0,u.o$)(n,"blur",f),(0,u.o$)(n,"input",d),{search:t,inFocus:c,onFocus:s,onBlur:f,onInput:d}}(i),b=_.inFocus,w=_.search,S=v&&b&&w.length>=p,k=function(n,e,t,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20,c=(0,o._)((0,a._Y)((function(n,e){var t=n;switch("string"==typeof e?e:e.type){case"REQ":t={items:B.items,loading:!0};break;case"RES":t={items:e.payload.slice(0,i),loading:!1};break;case"ERROR":case"RESET":t=B}return r&&r(t,n),t}),B),2),u=c[0],l=c[1];return(0,a.d4)((function(){l("RESET")}),[t]),(0,a.d4)((function(){if(t){var r,o=!1;u.items===B.items?l("REQ"):r=setTimeout((function(){l("REQ")}),1e3);var i=setTimeout((function(){e(n).then(().catch(().then(()}),250);return }),[n]),u}(w,t,S,(function(n,e){n.items!==e.items&&E.set(0)})),C=k.items,O=k.loading,E=(0,u.t$)(C.length,S),L=(0,o._)((0,a._Y)((function(n,e){var t=function(n,e){switch(e.type){case"ADD_ITEM":return n.concat(e.item);case"REMOVE_ITEM":return n.filter(()}}(n,e),o=l(n,N({},e,{changes:t}));return o!==n&&r&&r(o),o}),f),2),I=L[0],A=L[1];g&&(I=(e=[g,)[0],A=e[1]);var z=function(n){A({type:"ADD_ITEM",item:n})},P=M=function(){var n=C[E.value];n&&z(n)};return(0,u.o$)(i,"keydown",(function(n){switch(n.keyCode){case 9:case 13:M(),n.preventDefault()}}),S),(0,u.o$)(i,"keydown",(function(n){8===n.keyCode&&P(I[I.length-1])}),y&&""===w&&I.length>0),{highlight:E.value,setHighlight:E.set,inFocus:b,search:w,values:I,items:C,loading:O,selectItem:z,removeItem:P,selectCurrentItem:M,handleItemHover:function(n){return function(){E.value!==n&&E.set(n)}},enabled:S}};(0,a.j)("nd-autocomplete",(0,a.Sk)((function(n){var e=n.name,t=n.minLength,i=n.defaultValue,s=n.url,f=n.webApi,d=n.withTags,p=n.element,h=n.children,m=(0,u.VJ)(p,"input"),y=f||function(n){return function(e){return(0,c.d)(n.replace("{query}",encodeURIComponent(e))).json()}}(s),g=F({input:m,minLength:t,autocompleteApi:y,defaultValue:[i].filter(Boolean),withBackspace:d,reducer:function(n,e){return"ADD_ITEM"===e.type?[e.item]:e.changes},onChange:),_=(0,o._)(g.values,1)[0];p.value=_,(0,u.o$)(m,"change",(function(n){n.stopPropagation()}));var b=g.inFocus?g.search:!d&&_?_.label:"";return(0,u.lo)(m,(,[b]),(0,u.lo)(m,(,[_]),(0,a.dy)(T||(T=S()),r.inputContainer,d?(0,a.dy)(j||(j=k()),(0,l.$)({values:g.values,onRemove:)):null,h,g.enabled?U({onItemHover:g.handleItemHover,highlight:g.highlight,items:g.items,onClick:g.selectItem,searchString:g.search,loading:g.loading}):null,e&&(0,a.dy)(W||(W=C()),e,_?JSON.stringify(_):""))})),P)},54201:function(n,e,t){"use strict";t.d(e,{zx:function(){return h}});var r,o=t(94624),i=t(59003),a=t(80376),c=t(21379);unction l(){var n=(0,o._)(["\n                      ","\n                      <span class=",">","</span>\n                  "]);return l=function(){return n},n}!r||(r={}));var s,f,d={compact:"nd-button--compact",big:"nd-button--big"},p={secondary:"nd-button--secondary",link:"nd-button--link",filled:"nd-button--filled",filledSecondary:"nd-button--filledSecondary",outline:"nd-button--outline",outlineSecondary:"nd-button--outlineSecondary",outlineLight:"nd-button--outlineLight",outlineInherit:"nd-button--outlineInherit"};function h(n){var e=n.ref,t=n.style,o=n.size,h=n.customClasses,v=n.icon,m=n.text,y=n,["ref","style","size","customClasses","icon","text"]);return(0,c.dy)(s||(s=u()),e,(0,a.AK)(r.button,t&&p[t],o&&d[o],h),(0,c.Qb)(y),v?(0,c.dy)(f||(f=l()),(0,i.J)(v),r.iconText,m):m)}},76805:function(n,e,t){"use strict";t.d(e,{$:function(){return y},V:function(){return m}});var r,o=t(94624),i=t(21379),a=t(59003),c=t(80376);(r={}));var d,p,h,v=r,m=function(n){var e=n.value,t=n.onRemove,r=n.onClick,o=n.className;return(0,i.dy)(d||(d=u()),(0,c.AK)(v.tag,r||t?v.tagInteractive:null,o),(function(n){r&&!n.target.matches(".".concat(v.iconRemove,", .").concat(v.iconRemove," *"))&&r(n)}),e.icon&&e.icon.name?(0,a.J)(f({},e.icon,{className:(0,c.AK)(v.icon,e.icon.className)})):null,e.label,v.text,e.label,t?(0,i.dy)(p||(p=l()),(0,c.AK)(v.icon,v.iconInteractive,v.iconRemove),t,(0,a.J)({name:"cross-circle--active"})):null)},y=function(n){var e=n.values,t=n.onClick,r=n.onRemove;return(0,i.dy)(h||(h=s()),e.map((function(n){return m({value:n,onClick:t?function(){return t(n)}:null,onRemove:r?null})})))}},10115:function(n,e,t){"use strict";t.d(e,{dW:function(){return d},jn:function(){return f}});var r,o=t(51237),i=/^\w+\: +(.+)$/,a=/^\s*((\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]]))\s?(.+?)$/,c=/^\s*(\{\s*(\-?\d+[\s*,\s*\-?\d+]*)\s*\})|([\[\]])\s*(-Inf|\-?\d+)\s*,\s*(\+?Inf|\-?\d+)\s*([\[\]])/;function u(n){return"-Inf"===n?-1/0:"+Inf"===n||"Inf"===n?1/0:parseInt(n,10)}var l=window.__babelfish||(window.__babelfish={}),s=window.__babelfish_plurals||(window.__babelfish_plurals={});function f(n,e,t){return function(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"%";return e&&(Array.isArray(e)?n=(0,o.q)(n,e):Object.keys(e).forEach((function(r){n=n.replace(new RegExp("".concat(t).concat(r).concat(t).replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1"),"g"),e[r])}))),n}(function(n,e){return function(n,e){var t,o=[],l=[],s=[];for(var f in n.split("|").forEach((function(n){a.test(n)?(o=n.match(a),l[o[0]]=o[o.length-1]):i.test(n)?(o=n.match(i),s.push(o[1])):s.push(n)})),l)if(c.test(f))if((o=f.match(c))[1]){var d=o[2].split(",");for(var p in d)if(e==d[p])return l[f]}else{var h=u(o[4]),v=u(o[5]);if(("["===o[3]?e>=h:e>h)&&("]"===o[6]?e<=v:e<v))return l[f]}return s[(t=e,r||(r=function(n){switch("pt_BR"===n&&(n="xbr"),n.length>3&&(n=n.replace(/(-|_).*/g,"")),n){case"bo":case"dz":case"id":case"ja":case"jv":case"ka":case"km":case"kn":case"ko":case"ms":case"th":case"tr":case"vi":case"zh":return case"af":case"az":case"bn":case"bg":case"ca":case"da":case"de":case"el":case"en":case"eo":case"es":case"et":case"eu":case"fa":case"fi":case"fo":case"fur":case"fy":case"gl":case"gu":case"ha":case"he":case"hu":case"is":case"it":case"ku":case"lb":case"ml":case"mn":case"mr":case"nah":case"nb":case"ne":case"nl":case"nn":case"no":case"om":case"or":case"pa":case"pap":case"ps":case"pt":case"so":case"sq":case"sv":case"sw":case"ta":case"te":case"tk":case"ur":case"zu":default:return case"am":case"bh":case"fil":case"fr":case"gun":case"hi":case"ln":case"mg":case"nso":case"xbr":case"ti":case"wa":return function(n){return 0===n||1==n?0:1};case"be":case"bs":case"hr":case"ru":case"sr":case"uk":return case"cs":case"sk":return function(n){return 1==n?0:n>=2&&n<=4?1:2};case"ga":return case"lt":return case"sl":return case"mk":return case"mt":return function(n){return 1==n?0:0===n||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3};case"lv":return case"pl":return function(n){return 1==n?0:n%10>=2&&n%10<=4&&(n%100<12||n%100>14)?1:2};case"cy":return function(n){return 1==n?0:2==n?1:8==n||11==n?2:3};case"ro":return function(n){return 1==n?0:0===n||n%100>0&&n%100<20?1:2};case"ar":return function(n){return 0===n?0:1==n?1:2==n?2:n>=3&&n<=10?3:n>=11&&n<=99?4:5}}}(document.documentElement.lang||"en")),r(t))]||s[0]||void 0}(n in l?l[n]:n,e)}(n,e),t)}function d(n,e,t){var r=s[n]||1;t&&(t.context&&(n="".concat(n,"_").concat(t.context)),"number"==typeof t.count&&(r=t.count));var o=f(n,r,e);return t&&t.capitalize?o):o}},99480:function(n,e,t){"use strict";t.d(e,{O8:function(){return dn},lo:function(){return pn},HV:function(){return hn},xX:function(){return _n},t$:function(){return vn},o$:function(){return fn},j3:function(){return mn},VJ:function(){return yn},Pq:function(){return gn}});var r=t(94405),o=t(30196),i=t(21379),a=t(70468),c=t(20568);ction f(n,e,t){void 0===t&&(t=!1),0===d(n)?(t?Object.keys:X)(n).forEach((function(r){t&&"symbol"==("undefined"===typeof r?"undefined":(0,c._)(r))||e(r,n[r],n)})):n.forEach(()}ion y(n){return Y&&n instanceof Map}tion S(){u(2)}"!=typeof Symbol&&"symbol"==(0,c._)(Symbol("x")),Y="undefined"!=typeof Map,G="undefined"!=typeof Set,q="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,$=H?Symbol.for("immer-nothing"):((V={})["immer-nothing"]=!0,V),K=H?Symbol.for("immer-draftable"):"__$immer_draftable",Z=H?Symbol.for("immer-state"):"__$immer_state",Q="undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator",X="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?Object.getOwnPropertyNames,nn=Object.getOwnPropertyDescriptors||en={},tn={get:has:ownKeys:set:deleteProperty:getOwnPropertyDescriptor:defineProperty:function(){u(11)},getPrototypeOf:setPrototypeOf:,rn={};f(tn,(),rn.deleteProperty=rn.set=var on=),an=new on,cn=an.produce,un=(an.produceWithPatches.bind(an),an.setAutoFreeze.bind(an),an.setUseProxies.bind(an),an.applyPatches.bind(an),an.createDraft.bind(an),an.finishDraft.bind(an),cn),ln=sn=fn=function(n,e,t,r){(0,i.d4)((function(){if(!1!==r){var o=sn(n);return o?(o.addEventListener(e,t),:void 0}}),[t,r])},dn=function(n,e,t){fn(document,"click",(function(t){var r=sn(n);r&&(r.contains(t.target)||e(t))}),t)},pn=function(n,e,t){(0,i.d4)((,t||[])},hn=function(n,e,t){var r=ln(t);(0,i.Ye)((function(){var t;Object.defineProperty(n,e,{value:function(){for(var n=arguments.length,e=new Array(n),i=0;i<n;i++)e[i]=arguments[i];return(t=r).current.apply(t,(0,o._)(e))},writable:!1})}),[])},vn=function(n,e){var t=(0,r._)((0,i._Y)((function(e,t){return"number"==typeof t?e=t:"+"===t?e++:"-"===t&&e--,Math.max(0,Math.min(e,n-1))}),0),2),o=t[0],a=t[1];function c(){a("-")}eturn fn(document,"keydown",(function(n){switch(n.keyCode){case 38:n.preventDefault(),c();break;case 40:n.preventDefault(),u()}}),e),{value:o,prev:c,next:u,set:},mn=function(n){var e=(0,i.Ye)((,[n]),t=(0,r._)((0,i.eJ)(!!e&&e.matches),2),o=t[0],c=t[1];return(0,i.d4)((function(){if(e)return e.addListener(n),),[e]),o},yn=function(n,e){var t=(0,i.sO)();return pn(n,(,[n]),t},gn=function(n,e){var t=(0,i.sO)();return pn(n,(,[n]),t};navigator.userAgent.match(/Trident/)&&(function(){o={};O("ES5",{J:S:K:)}(),function(){o=i=),a=);O("MapSet",{T:function(n,e){return new i(n,e)},F:)}(),function(){r t="add";O("Patches",{$:R:M:)}());var _n=function(n){var e=(0,r._)((0,i.eJ)(n),2),t=e[0],o=e[1];return[t,function(n){o("function"==typeof n?un(():n)}]}},88077:function(n,e,t){"use strict";t.d(e,{ur:);var r=t(3059),o=new Map,i=function a(n,e){o.delete(n),(0,r.PS)(()}function c(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.has(n)||o.set(n,JSON.parse(i(e).getItem(n)));var t=o.get(n);return!t||!function(n,e){return e&&n.timestamp+e<=Date.now()}(t,e.expire)&&t,e.version)||(t=null,a(n,e)),t?t.data:e)}function u(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={timestamp:Date.now(),data:e,version:t.version};o.set(n,a),(0,r.PS)((function(){return i(t).setItem(n,JSON.stringify(a))}))}var l=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(n,e),[function(){return c(n,e)},}}}]);
//# sourceMappingURL=geography-search.036a45850cec5edf.js.map