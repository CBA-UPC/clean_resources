"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8123],{77689:(e,t,i)=>{i.d(t,{l:()=>b});var n=i(69736),l=i(43286),o=i(61058),a=i(52187),r=i(41503),s=i(11527);const d={[o.Uo.MEDIUM]:"titleMedium",[o.Uo.LARGE]:"titleMedium",[o.Uo.XLARGE]:"headlineMedium"},c={[o.Uo.LARGE]:"bodyMedium",[o.Uo.XLARGE]:"bodyMediumBold"},u={[o.Uo.LARGE]:"bodySmall",[o.Uo.XLARGE]:"bodySmall"},b=e=>{let{title:t,subtitle:i,body:b,footnote:v,buttonText:h,callToActionClicked:x}=e;const m=(0,o.jh)(),g=m&&d[m]||"titleSmall",E=m&&c[m]||"bodySmall",p=m&&u[m]||"marginal";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.x,{as:"h1",variant:g,semanticColor:"textBase",className:r.Z.title,children:t}),(0,s.jsx)(n.x,{as:"h2",variant:E,semanticColor:"textSubdued",className:r.Z.subtitle,children:i}),b,x&&(0,s.jsx)(l.D,{className:r.Z.button,colorSet:"invertedLight",onClick:x,"data-testid":a.xd,children:h}),v&&(0,s.jsx)(n.x,{as:"p",variant:p,semanticColor:"textSubdued",className:r.Z.note,children:v})]})}},63978:(e,t,i)=>{i.d(t,{H:()=>p});var n=i(82187),l=i.n(n),o=i(85648),a=i(87608),r=i(41038),s=i(61058),d=i(77689),c=i(52187);const u="NTT5CathoDEMjrmgfv9y",b="WmmNhmwHDNvDxInfukYO";var v=i(11527);const h=e=>(0,v.jsx)("div",{className:u,children:(0,v.jsx)("div",{className:b,children:(0,v.jsx)("svg",{width:e.iconSize,height:e.iconSize,fill:"currentColor",viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",children:(0,v.jsx)("path",{d:"M33 31.998v-23h-2v23H8v2h23v23h2v-23h23v-2z"})})})});var x=i(41503);const m={name:"",username:"",image_url:null,hash:""},g={[s.Uo.MEDIUM]:164,[s.Uo.LARGE]:164,[s.Uo.XLARGE]:270},E=(e,t)=>(0,v.jsx)(a.q,{label:o.ag.get("web-player.blend.invite.button-title"),images:[],width:e,userIconSize:"xxlarge",customPlaceholder:(0,v.jsx)(h,{iconSize:t}),piled:!0}),p=e=>{var t,i;let{invitation:n,callToActionClicked:u,breakpointEltRef:b}=e;const h=!(null===(t=n.members)||void 0===t||!t.length),p=h&&(null===(i=n.members)||void 0===i?void 0:i[0])||n.recipient||m,j=h&&n.recipient||null,w=(0,s.jh)(),y=w&&g[w]||128,f=Math.round(.475*y);return(0,v.jsxs)("div",{className:l()(x.Z.container,x.Z.TwoUsers),"data-testid":c.xS,ref:b,children:[(0,v.jsx)(r.$,{children:o.ag.get("blend.invite.page-title")}),(0,v.jsxs)("div",{className:x.Z.facepile,children:[(0,v.jsx)(a.q,{label:p.name,images:[{url:p.image_url??"",width:y,height:y}],width:y,userIconSize:"xxlarge"}),j?(0,v.jsx)(a.q,{label:j.name,images:[{url:j.image_url??"",width:y,height:y}],width:y,userIconSize:"xxlarge",piled:!0}):E(y,f)]}),(0,v.jsx)(d.l,{title:n.title,subtitle:n.subtitle,footnote:n.footnote,buttonText:n.button_text,callToActionClicked:u})]})}},48806:(e,t,i)=>{i.d(t,{Z:()=>n});const n=()=>{const e=window.location.href;return window.location.href=`https://accounts.spotify.com/login?continue=${encodeURIComponent(e)}`,null}},52187:(e,t,i)=>{i.d(t,{Eh:()=>a,ab:()=>o,e0:()=>n,xS:()=>l,xd:()=>r});const n="blend-deleted-container",l="blend-two-user-container",o="blend-multi-user-container",a="blend-full-container",r="blend-cta-button"},88341:(e,t,i)=>{i.d(t,{Ag:()=>r,V3:()=>l,nW:()=>a,oN:()=>o});var n=i(85332);let l=function(e){return e.PENDING_INVITATION="PENDING_INVITATION",e.READY_TO_JOIN_EMPTY_BLEND="READY_TO_JOIN_EMPTY_BLEND",e.READY_TO_JOIN_ALREADY_CREATED_BLEND="READY_TO_JOIN_ALREADY_CREATED_BLEND",e.MAX_MEMBERS="MAX_MEMBERS",e.ALREADY_JOINED="ALREADY_JOINED",e.DELETED="DELETED",e}({});const o=(e,t)=>e.build().withHost(n.cM).withPath(`/v3/view-invitation/${encodeURIComponent(t)}`).withEndpointIdentifier("v3/view-invitation/{invitationId}").withLocale(e.locale).send(),a=(e,t)=>e.build().withHost(n.cM).withMethod("PUT").withPath(`/v2/join/${encodeURIComponent(t)}`).withEndpointIdentifier("join/{invitationId}").send(),r=e=>e.build().withHost(n.cM).withMethod("POST").withPath("/v1/generate").withEndpointIdentifier("v1/generate").send()},24437:(e,t,i)=>{i.d(t,{j:()=>o});var n=i(45521),l=i(15718);const o=()=>(0,l.D)({[n.U.SMALL]:536,[n.U.MEDIUM]:792,[n.U.LARGE]:1048,[n.U.XLARGE]:1688})},31202:(e,t,i)=>{i.d(t,{i:()=>u});i(70054);var n=i(50959),l=i(26275),o=i(29132),a=i(85648),r=i(67848),s=i(81485),d=i(87350),c=i(88341);function u(e,t){const{user:i}=(0,o.v9)(d.Gg),{enqueueSnackbar:u}=(0,l.Ds)(),b=(0,r.Ob)(),v=(0,n.useCallback)((async()=>{var e,t,n;const l=await(0,c.Ag)(b);if(!(null===(e=l.body)||void 0===e?void 0:e.invite))throw new Error("unable to generate invite link");return null!=i&&i.display_name?a.ag.get("blend.invite.body-with-name",i.display_name,null===(t=l.body)||void 0===t?void 0:t.invite):a.ag.get("blend.invite.body-without-name",null===(n=l.body)||void 0===n?void 0:n.invite)}),[null==i?void 0:i.display_name,b]);return async()=>{try{await(0,s.v)(v()),u(a.ag.get("feedback.link-copied"))}catch{u(a.ag.get("error.generic"))}if(e&&t){const i=e.inviteButtonFactory().hitCopyToClipboard();t.logInteraction(i)}}}},85266:(e,t,i)=>{i.r(t),i.d(t,{default:()=>j});var n=i(50959),l=i(29132),o=i(4116),a=i(85648),r=i(41038),s=i(87350),d=i(61058),c=i(80626),u=i(17532),b=i(58912),v=i(88341),h=i(24437),x=i(31202),m=i(63978),g=i(48806),E=i(11527);const p={page_type:v.V3.PENDING_INVITATION,get title(){return a.ag.get("web-player.blend.group-invite.header")},get subtitle(){return a.ag.get("web-player.blend.duo-invite.description")},get button_text(){return a.ag.get("web-player.blend.invite.button-title")},footnote:null,members:[],recipient:null,members_title:null,playlist_uri:null},j=()=>{var e;const{spec:t,logger:i}=(0,c.fU)(o.L,{}),v=(0,x.i)(t,i),{ref:j,breakpoint:w}=(0,h.j)(),{user:y}=(0,l.v9)(s.Gg),f=null!=y&&y.uri?(0,u.C)(null==y?void 0:y.uri):"",_=(e=>({...p,members:[e],footnote:a.ag.get("web-player.blend.group-invite.warning")}))({name:(null==y?void 0:y.display_name)||"",username:f,image_url:(null===(e=(0,b.X)(null==y?void 0:y.images))||void 0===e?void 0:e.url)||null,hash:""});return y?(0,E.jsxs)(n.Suspense,{fallback:null,children:[(0,E.jsx)(r.$,{children:a.ag.get("web-player.blend.invite.page-title")}),(0,E.jsx)(d.ZU.Provider,{value:w,children:(0,E.jsx)(m.H,{invitation:_,callToActionClicked:v,breakpointEltRef:j})})]}):(0,E.jsx)(g.Z,{})}},93886:(e,t,i)=>{i.r(t),i.d(t,{default:()=>H});var n=i(50959),l=i(29132),o=i(75802),a=i(87350),r=i(58997),s=i(10226),d=i(4116),c=i(11317),u=i(85648),b=i(17676),v=i(61058),h=i(24676),x=i(80626),m=i(6936),g=i(77689),E=i(52187),p=i(41503),j=i(11527);const w=e=>{let{invitation:t,callToActionClicked:i,breakpointEltRef:n}=e;return(0,j.jsxs)("div",{className:p.Z.container,"data-testid":E.Eh,ref:n,children:[(0,j.jsx)(m.Z,{size:"xxlarge"}),(0,j.jsx)(g.l,{title:t.title,subtitle:t.subtitle,buttonText:t.button_text,footnote:null,callToActionClicked:i})]})};var y=i(41038),f=(i(86277),i(82187)),_=i.n(f),A=i(69736),I=i(87608),N=i(82579),T=i(41736),D=i(60046);const k="HKAYWYmxd5Ie8WSi0a4y",R="i52u_T3b50wraodIaORk",U="xakiNVMlUf6geF67FEgy",L="IRhTesoeIiwswlly0Dvg",M="LNJzE17iskXWmfKAzY4U",C="qzBr7X7cdLUhWdk0r8lL",O=e=>{let{uri:t,imageUrl:i,name:n}=e;return(0,j.jsx)("li",{children:(0,j.jsx)(N._,{menu:(0,j.jsx)(T.I,{uri:t}),children:(0,j.jsx)(D.Link,{to:t,children:(0,j.jsxs)("div",{className:L,children:[(0,j.jsx)(I.q,{images:[{url:i,width:null,height:null}],label:n,width:32,userIconSize:"medium",className:M}),(0,j.jsx)(A.x,{variant:"bodySmallBold",className:"standalone-ellipsis-one-line",semanticColor:"textBase",children:n})]})})})})},S=e=>{let{members:t,headingText:i,className:n}=e;return(0,j.jsxs)("div",{className:_()(k,n),children:[(0,j.jsx)("div",{children:(0,j.jsx)(A.x,{as:"h4",variant:"marginalBold",semanticColor:"textSubdued",className:R,children:i})}),(0,j.jsx)("ul",{className:U,children:t&&t.map((e=>(0,j.jsx)(O,{imageUrl:e.image_url||"",name:e.name,uri:(0,c.QK)(e.username).toURI()},e.username)))}),(0,j.jsx)("div",{className:C})]})},Z=e=>{let{invitation:t,callToActionClicked:i,breakpointEltRef:n}=e;const l=t.members||[],o=(0,j.jsx)("div",{className:p.Z.userListContainer,"data-testid":E.ab,children:(0,j.jsx)(S,{className:p.Z.userList,headingText:t.members_title,members:l})});return(0,j.jsxs)("div",{className:p.Z.container,ref:n,children:[(0,j.jsx)(y.$,{children:u.ag.get("blend.join.title")}),(0,j.jsx)(g.l,{title:t.title,subtitle:t.subtitle,footnote:t.footnote,body:o,buttonText:t.button_text,callToActionClicked:i})]})};var P=i(63978),Y=i(91643),B=i(88341),V=i(24437),G=i(31202),z=(i(70054),i(67848)),X=i(19039);const q=e=>{var t,i,l;let{invitationId:a}=e;const m=(0,o.s0)(),y=(0,s.W6)(b.c$b),{data:f,error:_,loading:A}=(0,h.J)(B.oN,[a]),{spec:I,logger:N}=(0,x.fU)(d.L,{}),T=(0,G.i)(I,N),D=function(e,t,i){const{enqueueSnackbar:n}=(0,X.D)(),l=(0,z.Ob)(),a=(0,o.s0)();return async()=>{try{const t=await(0,B.nW)(l,e),i=(0,c.EC)(null==t?void 0:t.body.playlist_uri).toURLPath(!0);if(!i)throw new Error("unable to join");a(i,{replace:!0})}catch{n(u.ag.get("error.request-playlist-failure"))}if(t&&i){const e=t.joinButtonFactory().hitCreatePlaylist();i.logInteraction(e)}}}(a,I,N),{ref:k,breakpoint:R}=(0,V.j)();(0,n.useEffect)((()=>{var e;if((null==f||null===(e=f.body)||void 0===e?void 0:e.page_type)===B.V3.ALREADY_JOINED){var t;const e=null===(t=(0,c.EC)(null==f?void 0:f.body.playlist_uri))||void 0===t?void 0:t.toURLPath(!0);e&&m(e,{replace:!0})}}),[null==f||null===(t=f.body)||void 0===t?void 0:t.page_type,null==f||null===(i=f.body)||void 0===i?void 0:i.playlist_uri,m]);const U=null===f||!f.body;if(U||A||_)return(0,j.jsx)(Y.h,{timeoutInMs:1e3,hasError:!!_||!A&&U,errorMessage:u.ag.get("error.generic")});const L=(null==f||null===(l=f.body.members)||void 0===l?void 0:l.length)||0,M=y===b.rS8.TWO_USER;switch(null==f?void 0:f.body.page_type){case B.V3.DELETED:return(0,j.jsx)(v.ZU.Provider,{value:R,children:(0,j.jsxs)("div",{className:p.Z.container,ref:k,"data-testid":E.e0,children:[(0,j.jsx)(r.F,{size:"xxlarge"}),(0,j.jsx)(g.l,{title:f.body.title,subtitle:f.body.subtitle,buttonText:f.body.button_text,footnote:f.body.footnote,callToActionClicked:T})]})});case B.V3.ALREADY_JOINED:return(0,j.jsx)(Y.h,{hasError:!1,errorMessage:u.ag.get("error.request-playlist-failure")});case B.V3.READY_TO_JOIN_EMPTY_BLEND:return(0,j.jsx)(v.ZU.Provider,{value:R,children:(0,j.jsx)(P.H,{invitation:f.body,breakpointEltRef:k,callToActionClicked:D})});case B.V3.READY_TO_JOIN_ALREADY_CREATED_BLEND:return M&&L>=2?(0,j.jsx)(v.ZU.Provider,{value:R,children:(0,j.jsx)(w,{invitation:{...f.body,title:u.ag.get("blend.link-invialid.header"),subtitle:u.ag.get("blend.link-invalid.subtitle"),button_text:u.ag.get("blend.invite.button-title")},callToActionClicked:T,breakpointEltRef:k})}):(0,j.jsx)(v.ZU.Provider,{value:R,children:(0,j.jsx)(Z,{invitation:f.body,callToActionClicked:D,breakpointEltRef:k})});case B.V3.MAX_MEMBERS:return(0,j.jsx)(v.ZU.Provider,{value:R,children:(0,j.jsx)(w,{invitation:f.body,callToActionClicked:T,breakpointEltRef:k})});case B.V3.PENDING_INVITATION:return(0,j.jsx)(v.ZU.Provider,{value:R,children:(0,j.jsx)(P.H,{invitation:f.body,callToActionClicked:T,breakpointEltRef:k})});default:return(0,j.jsx)(Y.h,{timeoutInMs:1e3,hasError:!0,errorMessage:u.ag.get("error.generic")})}};var J=i(48806);const W=e=>{let{invitationId:t}=e;const{user:i}=(0,l.v9)(a.Gg);return i?(0,j.jsx)(n.Suspense,{fallback:null,children:(0,j.jsx)(q,{invitationId:t})}):(0,j.jsx)(J.Z,{})},H=(0,n.memo)((()=>{const{invitationId:e=""}=(0,o.UO)();return(0,j.jsx)(W,{invitationId:e})}))},41503:(e,t,i)=>{i.d(t,{Z:()=>n});const n={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",container:"yMoj4jXSudxZ6BkKxV2E",TwoUsers:"IDgUCqAbkRah6OFywv1q",subtitle:"qmKxO5qV4XmVYfpFpaDA",facepile:"nWMdWl40O8K7HQT8Tagc",title:"csRAeNipsu1camQTMiIU",button:"nxFBywAeAI8Zk2fav3Yj",userList:"lxPLQIPb1VSV3VL18Ke3",userListContainer:"BzMKhmywgyIt6IUjcTGW",note:"DSdKNusLgsMX_iicYCU2"}}}]);
//# sourceMappingURL=xpui-routes-blend.e7af9bec.js.map