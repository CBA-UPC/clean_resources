import{fetchHtml as i,domPrepend as l,domRemoveChildren as u}from"../base/croco.js";import{trackingPromotion as p}from"./tracking-promotion.js";const h="fade-in";const j="fade-out";const q="animate-scroll";const L=2e3;let S=0;let v=null;function m(enabled=false){document.documentElement.style.setProperty("--top-banner-height",`${enabled?40:0}px`)}function g(){const p=[...document.querySelectorAll(".js-top-banner-wrapper")];const m=()=>{p.forEach((t,o)=>{const i=t.closest(".js-top-banner-container");if(i){i.classList.toggle(j,S!==o);i.classList.toggle(h,S===o);if(S===o){[...document.querySelectorAll(".js-top-banner-arrow")].forEach(t=>{t.classList.remove("text-white","text-primary");t.classList.add(i.dataset.theme)})}}})};const g=()=>{clearTimeout(v);S++;if(S>=p.length){S=0}o()};const t=()=>{clearTimeout(v);S--;if(S<0){S=p.length-1}o()};const o=()=>{const t=p[S];const o=t&&t.querySelector(".js-top-banner-scroll");m();o.classList.remove(q);const i=t.getBoundingClientRect();const l=o.getBoundingClientRect();const u=Math.round(l.width-i.width);const duration=u*20;o.style.setProperty("--distance",u);o.style.setProperty("--duration",duration);clearTimeout(v);v=setTimeout(()=>{if(u>0){o.classList.add(q)}clearTimeout(v);v=setTimeout(duration>0?duration+L:L)},L)};o();const i=document.querySelector(".js-top-banner-next");i&&i.addEventListener("click",g);const l=document.querySelector(".js-top-banner-prev");l&&l.addEventListener("click",t)}export function replaceTopBanner(t){const o=document.querySelector(".js-top-banner");if(o&&t){i(t).then(async content=>{if(content){u(o);l(content,o);g();m(true)}else{m()}})}}function o(){const t=document.querySelector(".js-top-banner");if(t){const o=t.querySelectorAll(".js-top-banner-tracking");[...o].forEach(}}export function topBannerInit(){const t=document.querySelector(".js-top-banner");if(t){g();m(true);if(document.querySelector(".js-checkout-app")){t.classList.remove("l-fixed");t.classList.add("l-relative")}}else{m()}o()}