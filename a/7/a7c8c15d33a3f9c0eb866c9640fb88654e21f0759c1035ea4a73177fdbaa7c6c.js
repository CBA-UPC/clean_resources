(()=>{"use strict";var e,t,i,s,r={573:(e,t,i)=>{i.d(t,{fH:()=>Te,yg:()=>ye,iJ:()=>Ae});var s,r=i(655),n=i(448);class o{constructor(){this.eventListeners={}}on(e,t){this.eventListeners[e]=this.eventListeners[e]||[],this.eventListeners[e].push(t)}once(e,t){const i=s=>{t(s),this.off(e,i)};this.on(e,i)}off(e,t){var i;this.eventListeners[e]=t?null===(i=this.eventListeners[e])||void 0===i?void 0:i.filter((e=>e!==t)):[]}emit(e,t){var i;null===(i=this.eventListeners[e])||void 0===i||i.forEach((e=>e(t)))}}function a({timeout:e=0}={}){let t=!1;const i={},s=new Promise(((e,s)=>{i.done=i=>{t||(t=!0,e(i))},i.abort=));return e&&setTimeout((()=>{t||i.abort(`Timeout ${e}ms exceeded`)}),e),i.ready=s,i}class d{constructor(e,t,i,s){var r;this.adserver=e,this.element=t,this.config=i,this.params=s,this.name=n.Vc.ADFOX,this.events=new o,this.events.on("render",(()=>this.events.emit("bannerSize",{x:this.element.offsetWidth,y:this.element.offsetHeight}))),this.hasPrebid=!!(null===(r=this.params.adfox)||void 0===r?void 0:r.prebidAdUnit)}get debugLog(){return Object.assign({},this.params.adfox)}display({getTargetings:e}){var t,i,s,n,o,a,d,l,h;return(0,r.mG)(this,void 0,void 0,(function*(){yield this.adserver.sdk.ready;const c={};Object.entries(e()).forEach((([e,t])=>{const i=this.adserver.sdk.mapTargeting({key:e,value:t});c[i.key]=i.value}));const{pk:u="",blockAdv:f,puid52:g="",puid51:m=""}=c,v=[u,g.replace(":"," "),m.replace(":"," ")];f&&v.push(f);const p=this.config.adfoxConfig,{type:E,zIndex:b,platform:A,shrinkWrapper:T,creativeConfig:y}=p,S=(0,r._T)(p,["type","zIndex","platform","shrinkWrapper","creativeConfig"]),C=Object.assign(Object.assign(Object.assign({},c),S),{pk:v.join(" "),pke:"1"}),I=(null===(t=this.params)||void 0===t?void 0:t.type)||(null===(i=this.config)||void 0===i?void 0:i.type)||E||(null==y?void 0:y.type),w=(null===(s=this.params)||void 0===s?void 0:s.fullscreenBannerBlacklist)||(null===(n=this.config)||void 0===n?void 0:n.fullscreenBannerBlacklist)||(null==y?void 0:y.fullscreenBannerBlacklist),k=(null===(o=this.config)||void 0===o?void 0:o.zIndex)||b,R=(null===(a=this.params)||void 0===a?void 0:a.platform)||(null===(d=this.config)||void 0===d?void 0:d.platform)||A||(null==y?void 0:y.platform),D=(null===(l=this.params)||void 0===l?void 0:l.shrinkWrapper)||(null===(h=this.config)||void 0===h?void 0:h.shrinkWrapper)||T;this.hasPrebid&&(yield this.adserver.sdk.addPrebidAdunit(this.element.id,this.params.adfox.prebidAdUnit));const _={params:C,containerId:this.element.id,onLoad:e=>{this.events.emit("data",e)},onRender:onError:e=>this.events.emit("error",e),onStub:()=>this.events.emit("stub"),onClose:()=>this.events.emit("close")};return I&&(_.type=I),k&&(_.zIndex=k),R&&(_.platform=R),w&&w instanceof Array&&w.length>0&&(_.fullscreenBannerBlacklist=w),D&&(_.shrinkWrapper=D),this.events.emit("request",_),this.nativeSlot=yield this.adserver.sdk.createSlot(_),this.waitForDisplay()}))}destroy(){var e;return(0,r.mG)(this,void 0,void 0,(function*(){null===(e=this.nativeSlot)||void 0===e||e.destroy()}))}refreshetTargeting(){}waitForDisplay(){const e=a();return this.events.once("render",(()=>e.done())),this.events.once("error",(()=>e.abort())),this.events.once("stub",(()=>e.abort())),e.ready}}class l{constructor(e,t,i,s){var r;this.adserver=e,this.element=t,this.config=i,this.params=s,this.name=n.Vc.GPT,this.events=new o,this.hasBeenDisplayed=!1,this.hasPrebid=!!(null===(r=this.params.gpt)||void 0===r?void 0:r.prebidAdUnit)}get debugLog(){return Object.assign({},this.params.gpt)}display({getTargetings:e}){var t,i;return(0,r.mG)(this,void 0,void 0,(function*(){try{yield this.adserver.sdk.ready}catch(e){return void this.events.emit("error",e)}const{adUnitPath:s,sizes:r}=this.config.gptConfig,n={adUnitPath:(null===(t=this.params.gpt)||void 0===t?void 0:t.adUnitPath)||s,elementId:this.element.id,sizes:{"0x0":r.sizes0x0,"336x0":[...r.sizes0x0,...r.sizes336x0]}};return this.events.emit("request",n),this.nativeSlot=this.adserver.sdk.createSlot(n),this.nativeSlot._hsmCallSlotRenderEnded=e=>this.events.emit("slotRenderEnded",e),this.hasPrebid&&(yield null===(i=this.adserver.sdk.prebid)||void 0===i?void 0:i.applyToSlot(this.params.gpt.prebidAdUnit,n)),Object.entries(e()).forEach((([e,t])=>{this.setTargeting({key:e,value:t})})),this.refresh()}))}refresh(){var e;return(0,r.mG)(this,void 0,void 0,(function*(){return this.hasPrebid&&(yield null===(e=this.adserver.sdk.prebid)||void 0===e?void 0:e.requestBids(this)),this.refreshGoogletagSlot()}))}destroy(){return(0,r.mG)(this,void 0,void 0,()}refreshGoogletagSlot(e){return this.events.once("slotRenderEnded",(t=>{this.hasBeenDisplayed=!0;const[i,s]=t.size?t.size:[0,0];this.events.emit("bannerSize",{x:i,y:s});const r=null==e?void 0:e();this.events.emit(t.isEmpty?"stub":"render",{event:t,additionalData:r})})),this.adserver.sdk.refreshSlot(this),this.waitForDisplay()}setTargeting(e){var t;const i=this.adserver.sdk.mapTargeting(e);null===(t=this.nativeSlot)||void 0===t||t.setTargeting(i.key,i.value)}waitForDisplay(){const e=a(),t=setTimeout((()=>{this.events.emit("error",{message:"GPT Render Timeout"}),e.abort()}),4e3);return this.events.once("render",(()=>{clearTimeout(t),e.done()})),this.events.once("error",(()=>{clearTimeout(t),e.abort()})),this.events.once("stub",(),e.ready}}class h{constructor(e,t,i,s){this.adserver=e,this.element=t,this.config=i,this.params=s,this.name=n.Vc.RTB,this.events=new o,this.bannerSize={x:0,y:0},this.events.on("render",(()=>this.events.emit("bannerSize",{x:this.element.offsetWidth,y:this.element.offsetHeight})))}get debugLog(){return Object.assign({},this.params.rtb)}display(){return(0,r.mG)(this,void 0,void 0,()}refresh(){var e,t,i,s;return(0,r.mG)(this,void 0,void 0,(function*(){yield this.adserver.sdk.ready,this.clearSlot();const{type:r,platform:n}=this.config.rtbConfig,o=(null===(e=this.params)||void 0===e?void 0:e.type)||(null===(t=this.config)||void 0===t?void 0:t.type)||r,a=(null===(i=this.params)||void 0===i?void 0:i.platform)||(null===(s=this.config)||void 0===s?void 0:s.platform)||n,d={adunit:this.config.placement,elementId:this.element.id,blockId:this.config.rtbConfig.id,targetings:[]};o&&(d.type=o),a&&(d.platform=a),this.events.emit("request",d);const l=this.adserver.sdk.createSlot(d);return l.then((()=>this.events.emit("render"))).catch((()=>this.events.emit("error"))),l}))}destroy(){return(0,r.mG)(this,void 0,void 0,()}setTargeting(){}class c{constructor(e,t,i,s){this.adserver=e,this.element=t,this.config=i,this.params=s,this.name=n.Vc.SCROOGE,this.events=new o,this.events.on("render",(()=>this.events.emit("bannerSize",{x:this.element.offsetWidth,y:this.element.offsetHeight})))}get debugLogisplay(){var e;return(0,r.mG)(this,void 0,void 0,(function*(){yield null===(e=this.slot)||void 0===e?void 0:e.destroy();const t={elementId:this.element.id,placement:this.config.placement,advInfoPosition:this.config.advInfoPosition,fill:this.config.scroogeConfig.fill};this.events.emit("request",t);const i=yield this.adserver.sdk.createSlot(t);if(!i)throw"–Ω–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å —Å–ª–æ—Ç";return this.slot=i,this.refresh()}))}refresh(){return(0,r.mG)(this,void 0,void 0,(function*(){return thisnts.emit("error",e))),thievents.emit("stub"))),this.nts.emit("data",e)})),this.slot.refresh(),this.waitForDisplay()}))}destroy(){var e;return(0,r.mG)(this,void 0,void 0,(function*(){return null===(e=this.slot)||void 0===e?void 0:e.destroy()}))}setTargeting(){}waitForDisplay(){const e=a();return this.events.once("render",e.done),this.events.once("error",(()=>e.abort())),this.tub",(()=>e.ANKA="fontanka.ru"}n this.isEnabled}set enabled(e){if(e!==this.isEnabled&&(this.isEnabled=e,e)){const e=this.buffer;this.bsage(e.type,e.data)))}}info(...e){this.message("info",e)}warn(...e){thimessage("error",e)}time(e){thissage("timeEnd",e)}errorToSentry(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){try{const i=yield function(e,t,i){return(0,r.mG)(this,void 0,void 0,(function*(){const r=(()=>{const e=Objon.host.includes(e)));if(!e)return!1;const t=window;return e===s.FONTANKA&&{release:t.fntRelease,envType:t.fntConfig.envType}})();if(!r)throw"–í—ã–∑–æ–≤ sendSentryError —Å –Ω–µ–≤–µ—Ä–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º";const n=`${window.location.protocol}//@${window.location.host}/_report/api/35/store/?35`,{release:o,envType:a}=r,d=`${e.title}: ${t}`,l={timestamp:(new Date).toISOString(),platform:"javascript",message:d,release:o,environment:""===a?"production":"development",tags:{envType:a,host:window.location.host},extra:i,request:{url:location.href,headers:{referrer:document.referrer,"user-agent":navigator.userAgent},cookies:document.cookie}},h=yield fetch(n,{body:JSON.stringify(l),method:"POST",headers:{"Content-Type":"application/json",Authorization:"Basic ffe756ced6be49f4b87f30b70d20294d",referrer:"origin"}});if(200===h.status)return h;throw`Unable to report sentry error ${h.status}, ${h.statusText}`}))}(this,e,t);this.info("–û—Ç–ø—Ä–∞–≤–ª–µ–Ω –∑–∞–ø—Ä–æ—Å –¥–æ sentry",i)}catch(e){this.error(e)}}))}message(e,t){this.enabled?"time"!==e&&"timeEnd"!==e?console[e](this.coloredTitle,u.titleStyle,...t):console[e](t):this.buffer.push({type:e,data:t})}}u.titleStyle="background: #343cc9; color: #fff; paddED=3]="DESTROYED",e[e.STUB=4]="STUB",e[e.ERROR=5]="ERROR"}(g||(g={}));class m extends o{constructor(e,t,i,s,r){super(),this.adserver=e,this.adapter=t,this.waitForQueue=i,this.$el=s,this.config=r,this._targetings={},this.status=g.CREATED,this.slotRefreshStartedTime=0,this.bannerSize={x:0,y:0},this.adunit=r.placement,this._logPrefix=`[${this.adapter.name}]: –ë–∞–Ω–Ω–µ—Ä ${this.$el.id}:`,this.adapter.events.on("request",(e=>{this.emit("request",e),f.info(this._logPrefix,"–≤—ã–∑—ã∫–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:",e)})),this.adapter.events.on("data",(e=>{this.emit("data",e)})),this.adapter.events.on("render",(e=>{this.status=g.READY,this.emit("render",e),f.info(this._logPrefix,`–æ—Ç—Ä–∏—Å–æ–≤–∞–Ω –∑–∞ ${this.timeSinceLastRefresh} —Å–µ–∫.`,e)})),this.adapter.events.on("error",(e=>{this.status=g.ERROR,this.emit("error",e),f.error(this._logPrefix,"–æ—à–∏–±–∫–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Å–ª–æ—Ç–∞",e)})),this.adapter.events.on("stub",(e=>{this.status=g.STUB,this.emit("stub",e),f.warn(this._logPrefix,"–∑–∞–≥–ª—É—à–∫–∞ts.on("close",(()=>{this.emit("closed"),f.warn(this._logPrefix,"–∑–∞–∫—Ä—ã—Ç")})),this.adapter.events.on("bannerSize",(e=>{this.bannerSize=e}))}get targetings(){return Object.assign(Object.assign({},this.adserver.targetings),this._targetings)}get debugLog(){return Object.assign({element:this.$el,adUnit:this.config.placement,con.debugLog)}get isDestroyed(){return this.status===g.DESTROYED}get timeSinceLastRefresh(){return(Date.now()-this.slotRefreshStartedTime)/1e3}display(){return(0,r.mG)(this,void 0,void 0,(function*(){this.resetBannerSize("refresh"),this.emit("beforeDisplay"),f.info(this._logPrefix,"–Ω–∞—á–∏–Ω–∞–µ–º –ø–æ–∫–∞–∑"),yield this.adapter.display({getTargetings:()=>this.targetings}),[g.ERROR,g.STUB,g.DESTROYED].includes(this.status)||this.emit("display")}))}refresh(){return(0,r.mG)(this,void 0,void 0,(function*(){if(this.slotRefreshStartedTime=Date.now(),yield this.waitForQueue(),f.info(this._logPrefix,`–ø—Ä–æ–∂–¥–∞–ª –≤ –æ—á–µ—Ä–µ–¥–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ ${this.timeSinceLastRefresh} —Å–µ–∫.`),this.status===g.CREATED)return this.display();this.resetBannerSize(),this.checkRequest("refresh"),this.emit("beforeRefresh"),f.info(this._logPrefix,"–Ω–∞—á–∏–Ω–∞–µ–º —Ä–µ—Ñ—Ä–µ—à"),yield this.adapter.refresh(),this.emit("refresh")}))}destroy(){return(0,r.mG)(this,void 0,void 0,(function*(){this.checkDestroyed("destroy"),this.status=g.DESTROYED,this.emit("beforeDestroy"),f.info(this._logPrefix,"–Ω–∞—á–∏–Ω–∞–µ–º —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–µ"),this.adserver.isReady&&(yield this.adapter.destroy()),this.status=g.DESTROYED,this.resetBannerSize(),this.emite=>this._targetings[e.key]=e.value)),f.info(this._logPrefix,"–ü—Ä–æ—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–∞—Ä–≥–µ—Ç–∏–Ω–≥–∏",...e),this.checkDestroyed("setTargeting"),e.forEach((e=>this.adapter.setTargeting(e)))}resetBannerSize(){this.bannerSize={x:0,y:0}}throwError(e){const t=new Error(e);return f.warn(this._logPrefix,t,this.debugLog),t}checkRequest(e){if(this.status===g.IN_PROGRESS)throw this.throwError(`${this._logPrefix} —Å–ª–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞`);this.checkDestroyed(e)}checkDestroyed(e){if(this.isDestroyed)throw this.throwError(`${this._logPrefix} —Å–ª–æ—Ç –±—ã–ª —É–Ω–∏—á—Ç–æ–∂–µ–Ω –¥–æ –∑–∞–ø—É—Å–∫–∞ ${e}`)}}class v{constructor(e){this.adapter=e,this.targetings={},this.isReady=!1,e.ready.then((()=>{this.isReady=!0,Object.entries(this.targetings).forEach((([e,t])=>{this.adapter.setTargeting({key:e,value:t})}))}))}setTargeting(...e){e.forEach((e=>this.targetings[e.key]=e.value)),this.isReady&&e.forEach((e=>this.adapter.setTargeting(e)))}c{const r=this.adapter.createSlot(e,t,i);return new m(this,r,s,this.adapter.clearSession()}}const p={};function E(e,t,i){const{src:s}=t;return new Promise(((r,n)=>{const o=e.document.body;if(!o)return void e.document.addEventListener("DOMContentLoaded",(()=>{r(E(e,t,i))}));conateElement("script");a.src=s,a.onload=()=>r({already:!1}),a.onerror=()=>{o.removeChild(a),i>0?r(E(e,t,i-1)):(p[s]=void 0,n(new Error(`–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å–∫—Ä–∏–ø—Ç–∞ –ø–æ URL: ${s}`)))},o.ap)}))}const b=function(e,t){const{src:i,retries:s=0}=t;return p[i]?p[i].then((()=>({already:!0}))):(p[i]=E(e,t,s),p[i])};function A({name:e,callback:t,attempts:i=20,interval:s=20}){return new Promise(((r,n)=>{!function i(o){t()?r():o<=0?n(new Error(`–ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –ø–æ–ø—ã—Ç–æ–∫ –ø—Ä–∏ –æ–∂–∏–¥–∞–Ω–∏–∏ ${e}.`)):setTimeout((()=>i(o-1)),s)}(i)}))}var T;T=new WeakMap;function y(e,t,i=[]){if(i&&i.indexOf(e)>-1)throw new Error(`–†–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞ ${e} —Å—Å—ã–ª–∞–µ—Ç—Å—è —Å–∞–º –Ω–∞ —Å–µ–±—è.`);if(!(e in t))throw new Error(`–†–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞ ${e} –Ω–µ —É–∫–∞–∑–∞–Ω –≤ —Å–ø–∏—Å–∫–µ –≤—Å–µ—Ö —Ä–∞–∑–º–µ—Ä–æ–≤, –Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –∑–Ω–∞—á–µ–Ω–∏–π.`);return t[e].reduce(((s,r)=>"string"==typeof r?"fluid"===r?(s.push(r),s):s.concat(y(r,t,[...i,e])):(s.push([...r]),s)),[])}function S(e,t=0){return Object.keys(e).map((i=>{const s=i.match(/(\d+)x(\d+)/);if(!s)throw new Error('–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —ç–∫—Ä–∞–Ω–∞ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ñ–æ—Ä–º–∞—Ç—É "d+xd+".');let r=parseInt(s[1],10)-t;return r<0&&(r=0),[[r,parseInt(s[2],10)],y(i,e)]})).sort((([[e,t]],[[i,s]])=>i-e?i-e:s-t))}const C={buckets:[{precision:2,max:4.5,increment:.01},{max:13.5,increment:.02},{max:36,increment:.05},{max:81,increment:.1}]},I=["crietween","rubicon","adpone","otm","adriver"];class w{constructor(e,{scriptUrl:t,bidderSettings:i,bidCpmAdjustmentMultiplier:s,priceGranularity:r,allowedBidders:n}){this.window=e,this.name="[GPT Prebid]",this.sizeConfig=[],this.requestBidsTimeoutId=nu(this.name,"–Ω–∞—á–∏–Ω–∞–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é");const o=a();this.ready=o.ready,this.allowedBidders=n||I,Object.entries(s).forEach((([e,t])=>{i[e]=Object.assign(Object.assign({},i[e]||{}),{bidCpmAdjustment:e=>e*t})})),this.window.pbjs=this.window.pbjs||{bidderSettings:i,qush((()=>{const e={priceGranularity:r||C};f.info(this.name,"–ó–∞–¥–∞–Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–∞—è –≥—Ä–∞–Ω—É–ª—è—Ü–∏—è –ø—Ä–µ–±–∏–¥–∞.",e),this.pbjs.setConfig(e)})),this.pbjs.que.push(o.done),o.ready.then((()=>f.info(this.name,"–≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ"))),b(this.window,{src:t}).catch(o.abort)}get pbjs(){return this.window.pbjs}updateSizeConfig(e){return(0,r.mG)(this,void 0,void 0,(function*(){e.forEach((e=>{const t=this.sizeConfig.find((t=>t.mediaQuery===e.mediaQuery));t?e.sizesSupported.forEach((([e,i])=>{t.sizesSupported.some((([t,s])=>e===t&&i===s))||t.sizesSupported.push([e,i])})):this.sizeConfig.push(e)})),f.info("–û–±–Ω–æ–≤–ª–µ–Ω sizeConfig –ø—Ä–µ–±–∏–¥–∞.",this.sizeConfig),yield this.ready,this.pbjs.setConfig({sizeConfig:this.sizeConfig})}))}applyToSlot(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){yield this.ready;const i=Object.assign(Object.assign({},e),{code:t.elementId});i.bids=i.bids.filter((e=>this.allowedBidders.includes(e.bidder))),this.updateSizeConfig(S(t.sizes).reduce(((e,[[t,i],s])=>"string"==typeof s||1===s.length&&"string"==typeof s[0]?e:2!==s.length||Array.isArray(s[0])||Array.isArray(s[1])?(e.push({mediaQuery:`(min-width: ${t}px) and (min-height: ${i}px)`,sizesSupported:s.filter((e=>"string"!=typeof e&&"st),e):("number"==typeof s[0]&&"number"==typeof s[1]&&e.push({mediaQuery:`(min-width: ${t}px) and (min-height: ${i}px)`,sizesSupported:[[s[0],s[1]]]}),e)),[])),this.pbjs.addAdUnits(i),f.info(this.name,"–ø–æ–¥–∫–ª—é—á–µ–Ω prebid –¥–ª—è —Å–ª–æ—Ç–∞",t.elementId,e)}))}requestBidsIhis,void 0,void 0,(function*(){if(this.requestBidsQueue.add(e),this.requestBidsTimeoutId)return;const t=a();this.requestBidsTimeoutId=window.setTimeout(t.done,w.queueFillingTimeout),yield t.ready,yield this.ready;const i=Array.from(this.requestBidsQueue),s=i.map((e=>e.slot.element.id)),r=a();f.info(this.name,"–∑–∞–ø—Ä–æ—Å —Å—Ç–∞–≤–æ–∫ —É –±–∏–¥–¥–µ—Ä–æ–≤",s),this.pbjs.requestBids({timeout:700,adUnitCodes:s,bidsBackHandler:e=>e&&Object.keys(e).length>0?r.done(e):r.abort()});try{yield r.ready.then((e=>f.info(this.name,"–ø—Ä–∏—à–µ–ª –æ—Ç–≤–µ—Ç –æ—Ç –±–∏–¥–¥–µ—Ä–æ–≤",e)))}catch(e){return i.forEach((e=>e.transaction.done(!1))),f.info(this.name,"–±–∏–¥–¥–µ—Ä—ã –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª–∏, –ª–∏–±–æ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å—Ç–∞–≤–æ–∫",e),this.requestBidsQueue.clear(),void(this.requestBidsTimeoutId=null)}this.pbjs.setTargetingForGPTAsync(s),i.forEach((({slot:e,transaction:t})=>{const i=t=>f.info(this.name,e.element.id,"–≤—ã–∏–≥—Ä–∞–ª–∞ —Å—Ç–∞–≤–∫–∞ –ø—Ä–µ–±–∏–¥–∞",t);t.done(!0),this.pbjs.onEvent("bidWon",i,e.element.id),e.events.once("slotRenderEnded",(()=>{this.pbjs.offEvent("bidWon",i,e.element.id)}))})),this.requestBidsQueue.clear(),this.requestBidsTimeoutId=null}))}requestBids(e){return(0,r.mG)(this,void 0,void 0,(function*(){f.info(this.naxt-ad textAd","text_ad","text_ads","text-ads","text-ad-links"].join(" "),t.id="text_ad",t.style.padding="1px 0 0 0",document.body?(document.body.appendChild(t),setTimeout((()=>{e(0===t.offsetHeight),document.body.removeChild(t)}),10)):e(!1)}))}))}w.queueFillingTimeout=100,k=new WeakMap,R=new WeakMap,D=new WeakMap;class O{constructor(){this.eventListeners={}}on(e,t){this.eventListeners[e]=this.eventListeners[e]||[],this.eventListeners[e].push(t)}once(e,t){const i=s=>{t(s),this.off(e,i)};this.on(e,i)}off(e,t){var i;this.eventListeners[e]=t?null===(i=this.eventListeners[e])||void 0===i?void 0:i.filter((e=>e!==t)):[]}emit(e,t){var i;null===(i=this.eventListeners[e])||void 0===i||i.forEach((e=>e(t)))}}function M({mountTo:this,void 0,void 0,(function*(){const{advInfoPosition:r,hasCustomAdvertiserDesign:o,AdvertiserInfo:a}=t,d=e.querySelector(".adv-mark-template");if(!(null==a?void 0:a.advertiserEnabled)||r===n.Nk.DISABLED||o&&!d)return;const{AdvertiserMark:l,INSIDE_TEMPLATE:h}=yield Promise.resolve().then(i.bind(i,711));customElements.get("advertiser-mark")||customElements.define("advertiser-mark",l);const c=document.createElement("advertiser-mark"),u=(f=`${a.company||""} Erid:&nbsp;${a.token||""}`,f.replace(/(?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#\/%=~_|$?!:,.])*(?:\([-A-Z0-9+&@#\/%=~_|$?!:,.]*\)|[A-Z0-9+&@#\/%=~_|$])/gim,(e=>`<a href="${e}" target="_blank">${e}</a>`))).trim().replace(/<a/g,'<a style="color:inherit; text-decoration: none;"');var f;const g=document.createElement("div");g.innerHTML=u,c.appendChild(g);const m=o&&d?h:r,v=""===(null==d?void 0:d.getAttribute("data-hide-popup"));m&&c.setAttribute("mark-position",m),v&&c.setAttribute("show-info","false"),s&&c.setAttribute("is-mobile","");const p=o&&d||e;"allowInfoWindowUnderMark"in p.dataset&&c.setAttribute("allow-info-window-under-mark","true"),p.appendChild(c)}))}!function(e){e.LOAD="load",e.RENDER="render",e.STUB="stub",e.ERROR="error"}(_||(_={}));class x extends O{constructor(e,t,i){super(),this.isDestroyed=!1,this.currentRequestPromise=null,this.requestCreative=e,this.logger=t,this.creativeParams=i}get projectKey(){return this.creativeParams.projectKey}get isMobile(){return this.creativeParams.isMobile}get placement(){return this.creativeParams.placement}get elementId(){return this.creativeParams.elementId}refresh(){return(0,r.mG)(this,void 0,void 0,(function*(){if(this.isDestroyed)this.logger.error(`Scrooge slot for #${this.elementId} has been destroyed before refresh`,this.creativeParams);else if(this.logger.info(`Requested ad for #${this.elementId}`,this.creativeParams),null===this.currentRequestPromise)return this.currentRequestPromise=this.requestCreative().then((e=>{if(this.isDestroyed)return;const t={html:e.html,creativeId:e.creative.id,campaignId:e.campaign.id,debug:e.debug,placement:e.placetiserDesign:e.hasCustomAdvertiserDesign,advInfoPosition:this.creativeParams.advInfoPosition,AdvertiserInfo:e.creative.advertiser};this.logger.info(`Receiving ad for the slot #${this.elementId}`,this.creativeParams,t),this.emit(_.LOAD,t),this.render(t)})).catch((e=>{if("empty"===e)return this.logger.warn(`No ad for the slot #${this.elementId}`,this.creativeParams),void this.emit(_.STUB,null);this.logger.error(`Unknown error while requesting ad for the slot #${this.elementId}`,this.creativeParams,e),this.emit(_.ERROR,`Unknown error: ${e}`)})),this.currentRequestPromise}))}destroy(){if(this.isDestroyed)return;const e=document.getElementById(this.elementId);e&&requestAnimationFrame((()=>e.innerHTML="")),this.logger.info(`Slot #${this.elementId} has been destroyed`,this.creativeParams),this.isDestroyed=!0}render(e){if(this.isDestroyed)return;const t=document.getElementById(this.elementId);if(!t)return this.emit(_.ERROR,`Element id ${this.elementId} is not found.`),void this.logger.error(`Element for the slot #${this.elementId} is not found`,this.creativeParams);requestAnimationFrame((()=>{t.appendChild(document.createRange().createContextualFragment(e.html)),this.emit(_.RENDER,e),this.logger.info(`Ad for the slot #${this.elementId} has been rendered`,this.creativeParams,e),M({mountTo:t,creativeData:e,isMobile:this.isMobile})}))}}const L="scrooge_tr";class N{constructor(e){this.dataBuffer=[],this.freeBufferTimeout=null,this.host=e.host,this.logger=e.logger,this.isRequestsAllowed=e.isRequestsAllowed,this.hideImageURL=e.hideImageURL,this.projectKey=e.projectKey,this.isMobile=e.isMobile,this.isDebug=e.isDebug,this.previewCreativeIds=e.previewCreativeIds}static sendRequest(e,t){const i={query:"query getCreativeHtmls ($filter: CreativeHtmlsFilterInput! $track: String!) {\n    result: creativeHtmls (filter: $filter track: $track) {\n      __typename\n      ... on InternalErrorProblem { message }\n      ... on CreativeHtmlList {\n        items {\n          placement\n          html\n          creative {\n            id\n            advertiser {\n                advertiserEnabled\n                company\n                token\n            }\n          }\n          campaign { id }\n          debug {\n            rolledValue\n            allRolledAds {\n              creativeId\n              trafficPercent\n              rollInterval\n            }\n          }\n          hasCustomAdvertiserDesign\n        }\n        track\n      }\n    }\n  }\n",variables:{filter:t,track:""}},s=localStorage.getItem(L);return s&&(i.variables.track=s),new Promise(((t,s)=>(0,r.mG)(this,void 0,void 0,(function*(){const r=new XMLHttpRequest;r.open("POST",e,!0),r.setRequestHeader("Content-Type","application/json"),r.setRequestHeader("Accept","application/json"),r.setRequestHeader("X-Time-Zone",Intl.DateTimeFormat().resolvedOptions().timeZone),r.onreadystatechange=()=>{if(r.readyState===r.DONE)if(200===r.status)try{const e=JSON.parse(r.response).data.result;if("InternalErrorProblem"===e.__typename)throw e.mes=e.__typename&&e.track&&localStorage.setItem(L,e.track),t(e)}catch(e){s(e)}else s(r.statusText)},r.send(JSON.stringify(i))}))))}createSlot(e,t,i,s){return new x((()=>this.addRequestToBuffer(e,!!i)),this.logger,{elementId:t,placement:e,advInfoPosition:s,projectKey:this.projectKey,isMobile:this.isMobile})}allowRequests(){this.isRequestsAllowed=!0,this.freeBufferTimeout=window.setTimeout((()=>this.singleRequest()),0)}setHiddenImagesUrls(e){this.hideImageURL=e}addRequestToBuffer(e,t){const i=new Promise(((i,s)=>this.dataBuffer.push({placement:e,fill:t,onLoad:i,onError:s})));return this.isRequestsAllowed&&null===this.freeBufferTimeout&&(this.freeBufferTimeout=window.setTimeout((()=>this.singleRequeest(){return(0,r.mG)(this,void 0,void 0,(function*(){cr.reduce(((e,t)=>{var{placement:i}=t,s=(0,r._T)(t,["placement"]);return Object.assign(Object.assign({},e),{[i]:[...e[i]||[],s]})}),{});this.dataBuffer=[],this.freeBufferTimeout=null;const t=Object.keys(e).reduce(((t,i)=>[...t,{placement:i,limit:e[i].length,fill:e[i].some((e=>e.fill))}]),[]);try{(yield N.sendRequest(this.host,{placements:t,isDebug:this.isDebug,projectKey:this.projectKey,isMobile:this.isMobile,hideImageURL:this.hideImageURL,previewCreativeIds:this.previewCreativeIds})).items.forEach((t=>{const[i,...s]=e[t.placement];e[t.placement]=s,i.onLoad(t)})),Object.keys(e).forEach((t=>e[t].forEach((e=>e.onError("empty")))))}catch(t){Object.keys(e).forEach((i=>e[i].forEach((e=>e.onError(`${t}`)))))}}))}}var B=i(711);class U{init(){const e=window;e.placesForAdvertisementMark instanceof Array&&e.placesForAdvertisementMark.forEach((e=>{if(void 0===e.mountTo||void 0===e.isMobile||void 0===e.isMobile||void 0===(null==e?void 0:e.creativeData.advInfoPosition)||void 0===(null==e?void 0:e.creativeData.hasCustomAdvertiserDesign)||void 0===(null==e?void 0:e.creativeData.AdvertiserInfo))throw"–û—à–∏–±–∫–∞ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö placesForAdvertisementMark";M(e)})),e.appendAdvertisementMark=M}}class G{constructor(e,t=!1){var i;this.host=e,this.isDebug=t,this.slots=[],this.events={LOAD:_.LOAD,RENDER:_.RENDER,ERROR:_.ERROR,STUB:_.STUB},this.isAdblockEnabled=!1,this.isInited=!1,this.mobileClients={},this.desktopClients={},this.isRequestsAllowed=!1,this.previewCreativeIds=[],this.logger=new u("[SCROOGE]");const{searchParams:s}=new URL(window.location.href);this.previewCreativeIds=(null===(i=s.get("scroogePreview_creativeId"))||void 0===i?void 0:i.split(",").map(Number))||[],customElements.define("advertiser-mark",B.AdvertiserMark),(new U).init()}static isCreateSlotParams(e){if("object"!=typeof e||null===e)return!1;const t=e;return"string"==typeof t.projectKey&&"boolean"==typeof t.isMo&"string"==typeof t.elementId}createSlot(e,t,i,s,r){return"string"==typeof e?this.getNewSlot({isMobile:t,placement:i,elementId:s,fill:r,projectKey:e}):this.getNewSlot(e)}init(){return(0,r.mG)(this,void 0,void 0,(function*(){this.isInited||(this.isInited=!0,this.isAdblockEnabled=(yield P().catch(this.logger.error))||!1,this.isRequestsAllowed=!0,Object.keys(this.mobileClients).forEach((e=>{this.mobileClients[e].setHiddenImagesUrls(this.isAdblockEnabled),this.mobileClients[e].allowRequests()})),Object.keys(this.desktopClients).forEach((e=>{this.desktopClients[e].setHiddenImagesUrls(this.isAdblockEnabled),this.desktopClients[e].allowRequests()})))}))}showLogs(){this.logger.enabled=!0}hideLogs(){this.logger.enabled=!1}getNewSlot(e){if(!G.isCreateSlotParams(e))return this.logger.error("Wrong type for createSlot attributes",e)ent:s,elementId:r,fill:n=!0,advInfoPosition:o}=e,a=i?this.mobile]=new N({projectKey:t,isMobile:i,isRequestsAllowed:this.isRequestsAllowed,hideImageURL:this.isAdblockEnabled,logger:this.logger,host:this.host,isDebug:theativeIds}));coSlot(s,r,n,o);return this.slots.push(d),d}}const j={[n.Vc.ADFOX]:class{constructor(e){this.sdk=e}get ready(){return this.sdk.ready}createSlot(e,t,i){return new d(this,e,t,i)}setTargeting(){}clearSession(){this.sdk.clearSession()}},[n.Vc.GPT]:class{constructor(e){this.sdk=e}get ready(){return this.sdk.ready}createSlot(e,t,i){return new l(this,e,t,i)}setTargeting(e){this.sdk.setTargeting(e)}clearSession(){}},[n.Vc.SCROOGE]:class{constructor(e){this.sdk=e}get ready(){return Promise.resolve()}createSlot(e,t,i){return new c(this,e,t,i)}setTargeting(){}clearSession(){}},[n.Vc.RTB]:class{constructor(e){this.sdk=e}get ready(){return this.sdk.ready}createSlot(e,t,i){return new h(this,e,t,i)}setTargeting(){}clearSession(){}}},V={[n.Vc.ADFOX]:class{constructor(e,{ownerId:t,headerBiddings:i,targetingsMap:s={}}){var n;this.window=e,this.scriptUrl="https://yandex.ru/ads/system/context.js",this.scriptFallbackUrl="https://an.yandex.ru/system/context.js",this.scriptUrlHB="https://yandex.ru/ads/system/header-bidding.js",this.scriptUrlHBFallback="https://yastatic.net/pcode/adfox/header-bidding.js",T.set(this,void 0);const o=a();this.ready=o.ready,(0,r.YH)(this,T,o.done,"f"),this.ownerId=t,this.mapTargeting=({key:e,value:t})=>({value:Array.isArray(t)?t.join("pk"===s[e]?" ":":"):t,key:e in s?s[e]:e}),this.headerBiddings=i?Object.assign(Object.assign({adUnits:[]},i),{callbacks:{onBidsReceived:t=>{e._cmDebugOnAdfoxBidsRecieve&&e._cmDebugOnAdfoxBidsRecieve(t),f.info("–ü—Ä–∏—à–µ–ª –æ—Ç–≤–µ—Ç –æ—Ç HeaderBidding-–∞ AdFox: ",t)}}}):i,this.allowedBidders=Object.keys((null===(n=this.headerBiddings)||void 0===n?void 0:n.biddersMap)||{})}init(){return(0,r.mG)(this,void 0,void 0,(function*(){this.headerBiddings&&(this.window.YaHeaderBiddingSettings=this.headerBiddings),f.info("–ù–∞—á–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞ AdFox."),yield Promise.all([this.loadHeaderBidding(),b(this.window,{src:this.scriptUrl}).catch((()=>b(this.window,{src:this.scriptFallbackUrl})))]),yield A({name:"AdFox Code",callback:()=>{var e,t;return Boolean(null===(t=null===(e=this.window)||void 0===e?void 0:e.Ya)||void 0===t?void 0:t.adfoxCode)}}),this.adfox=this.window.Ya.adfoxCode,f.info("–°–∫—Ä–∏–ø—Ç AdFox –±—ã–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω."),(0,r.Q_)(this,T,"f").call(this)}))}loadHeaderBidding(){return(0,r.mG)(this,void 0,void 0,(function*(){this.headerBiddings&&(f.info("–ù–∞—á–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∞ HeaderBiddings –¥–ª—è AdFox."),yield b(this.window,{src:this.scriptUrlHB}).catch((()=>b(this.window,{src:this.scriptUrlHBFallback}))),f.info("–°–∫—Ä–∏–ø—Ç AdFox HeaderBiddings –¥–ª—è AdFox –∑–∞–≥—Ä—É–∂–µ–Ω."))}))}createSlot(e){return(0,r.mG)(this,void 0,void 0,(function*(){return yield A({name:"AdFox Code createSlot",callturn Boolean(null===(i=null===(t=null===(e=this.window)||void 0===e?e)||void 0===i?void 0:i.create)},attempts:50,interval:100}).catch((e=>(0,r.mG)(this,void 0,void 0,(function*(){var t,i;console.error("[HSM Creative Manager]: –Ω–µ—Ç create –≤ window.Ya —á–µ—Ä–µ–∑ –ø—è—Ç—å his.window)||void 0===t?void 0:t.Ya,e),f.errorToSentry("–ù–µ—Ç create –≤ window.Ya —á–µ—Ä–µ–∑ –ø—è—Ç—å —Å–µ–∫—É–Ω–¥ –æ–∂–∏–¥–∞–Ω–∏—è",{payload:[null===(i=this.window)||void 0===i?void 0:i.Ya,e]})})))),this.adfox.create(Object.assign({ownerId:this.ownerId},e))}))}addPrebidAdunit(e,t){var i;return(0,r.mG)(this,void 0,void 0,(function*(){if(!this.headerBiddings)return;const s=a(),r=JSON.parse(JSON.stringify(t));return r.sizes=(n=r.mediaTypes.banner.sizes)[0]instanceof Object&&!Array.isArray(n[0])?n.map((e=>[e.width,e.height])):n,r.code=e,r.bids=(null===(i=r.bids)||void 0===i?voiæ–Ω—Ñ–∏–≥ –ø—Ä–µ–±–∏–¥–∞ –¥–ª—è",r.code,r),s.done()})),s.ready;var n}))}clearSession(){this.adfox.clearSession()}},[n.Vc.GPT]:class{constructor(e,{namespace:t,targetingsMap:i,prebid:s,allowGptFallback:n}){thise,this.scriptUrl="https://securepubads.g.doubleclick.n),R.set(this,void 0),this.refreshTimeoutId=null,this.queueFillingTimeout=100,this.refreshQueue=new Set;const o=a();this.ready=o.ready,(0,r.YH)(this,k,o.done,"f"),(0,r.YH)(this,R,o.abort,"f"),this.namespace=t,this.mapTargeting=function(e={}){return({key:t,value:i})=>({value:Array.isArray(i)?i.join(","):i,key:t in e?e[t]:t})&&(this.prebid=new w(e,s))}get googletag(){return this.window.googletag}get isGoogletagServicesEnabled(){return Boolean(this.window.__GMGptInlineInitialization)}set isGoogletagServicesEnabled(e){this.window.__GMGptInlineInitialization=e}init(){return(0,r.mG)(this,void 0,void 0,(function*(){f.info("–ù–∞—á–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞ GPT.");try{const e=[Promise.all([b(this.window,{src:this.scriptUrl}),new Promise((e=>this.googletag.cmd.push((()=>e()))))])];if(this.allowGptFallback){const t=new Promise((e=>setTimeout(e,4e3,"sdk timeout")));e.push(t)}const t=yield Promise.race(e);if("string"==typeof t&&"sdk timeout"===t)throw new Error("–ø—Ä–æ–∂–¥–∞–ª–∏ SDK 4 —Å–µ–∫—É–Ω–¥—ã")}catch(e){return f.error(e),void(0,r.Q_)(this,R,"f").call(this,e)}this.enableServices(),(0,r.Q_)(this,k,"f").call(this)}))}enableServices(){this.googletag.pubads().addEventListener("slotRenderEnded",(e=>{e.slot._hsmCallSlotRenderEnded(e)})),this.isGoogletagServicesEnabled||(this.googletag.pubads().disableInitialLoad(),this.googletag.pubads().enableSingleRequest(),this.googletag.pubptyDivs(),this.googletag.pubads().enableAsyncRendering(),this.googletag.enableServices(),this.isGoogletagServicesEnabled=!0)}createSlot(e){const t=e.adUnitPath.startsWith("/")?e.adUnitPath:`${this.namespace}${e.adUnitPath}`,i=this.googletag.defineSlot(t,e.sizes["0x0"],e.elementId);return i.defineSizeMapping(S(e.sizes)),i.addService(googletag.pubads()),i}refreshSlot(e){return(0,r.mG)(this,void 0,void 0,(function*(){if(!e.nativeSlot)return void f.error("–í—ã–∑–≤–∞–Ω googletag.refresh –¥–æ —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–æ—Ç–∞",e);if(this.refreshQueue.add(e),this.refreshTimeoutId)return;yield new Promise((ay.from(this.refreshQueue),i=t.map((e=>{const t=e.nativeSlot.getSlotElementId();return e.hasBeenDisplayed||(f.info("–í—ã–∑–≤–∞–Ω googletag.display –¥–ª—è –±–∞–Ω–Ω–µ—Ä–∞",t),this.googletag.display(t)),t}));f.info("–í—ã–∑–≤–∞–Ω googletag.refresh –¥–ª—è —Å–ø–∏—Å–∫–∞ –±–∞–Ω–Ω–µ—Ä–æ–≤",i),this.googletag.pubads().refresh(t.map((e=>e.nativeSlot))),this.refreshQueue.clear(),this.refreshTimeoutId=null}))}destroySlot(e){const t=this.googletag.destroySlots([e]),i=document.getElementById((null==e?void 0:e.getSlotElementId())||"");return i&&(null==i?void 0:i.getAttribute("data-google-query-id"))&&(i.setAttribute("style",""),i.innerHTML=""),t}setTargeting(e){const t=this.mapTargeting(e);this.googletag.pubads().setTargeting(t.key,t.value)}},[n.Vc.SCROOGE]:class{constructor(e,{host:t,projectKey:i,isMobile:s,debug:r}){this.scrooge=new G(t,r),this.projectKey=i,this.isMobile=s,r&&this.scrooge.showLogs()}init(){return(0,r.mG)(this,void 0,void 0,(function*(){this.scrooge.init(),f.info("–°–∫—Ä–∏–ø—Ç Scrooge –±—ã–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω.")}))}createSlot(e){return this.scrooge.createSlot(Object.assign({projectKey:this.projectKey,isMobile:this.isMobile},e))}},[n.Vc.RTB]:class{constructor(e){l="https://an.yandex.ru/system/context.js",this.scriptUrl="https://yandex.ru/ads/system/context.js",this.adunitsCount={},this.globalNoAdv=!1,D.set(this,void 0),this.targetings=[],this.window=e;const t=a();this.ready=t.ready,(0,r.YH)(this,D,t.done,"f")}init(){return(0,r.mG)(this,void 0,void 0,(function*(){f.info("–ù–∞—á–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–∞ RTB."),yield b(this.window,{src:this.scriptUrl}).catch((()=>b(this.window,{src:this.scriptLegacyUrl}))),yield A({name:"Yandex RTB",callback:()=>"Ya"in this.window&&"Context"in this.window.Ya&&"AdvManager"in this.window.Ya.Context}),f.info("–°–∫—Ä–∏–ø—Ç RTB –±—ã–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω."),(0,r.Q_)(this,D,"f").call(this)}))}creatthis.adunitsCount[e.adunit]||0)+1;const o=this.adunitsCount[e.adunit],d=null===(i=null===(t=e.targetings)||void 0===t?void 0:t.===i?void 0:i.value;if((null===(r=null===(s=e.targetings)||void 0===s?void 0:s.find((e=>["tags","pk"].includes(e.key))))||void 0===r?voidv)return n.abort(),n.ready;const l={blockId:e.blockId,statId:null!=d?d:this.globalStatId,renderTo:e.elementId,pageNumber:this.adunitsCount[e.adunit],async:!0,onError:n.abort,onRender:n.done};return e.type&&(l.type=e.type),e.platform&&(l.platform=e.platform),this.command((t=>{o==this.adunitsCount[e.adunit]?t.render(l,n.abort):n.abort()})),n.ready}setGlobalTargeting({key:e,value:t}){["experiment","partner-stat-id"].includes(e)?this.globalStatId=t:["tags","pk"].includes(e)&&(this.globalNoAdv=t.includes("no-adv"))}command(e){return(0,r.mG)(this,void 0,void 0,(function*(){this.window.yaContextCb.push((()=>e(this.window.Ya.Context.AdvManager)))}))}}};class q{constructor(e){this.configs=e,this.adservers={},this.sdks={}}getAdserver(e){if(this.adservers[e])return this.adservers[e];const t=this.getAdapter(e),i=new v(t);return this.adservers[e]=i,i}f.values(this.adservers).forEach(e)}getSdk(e){if(this.sdks[e])return this.sdks[e];const t=this.configs[e.toLowerCase()],i=new V[e](window,t);return this.sdks[e]=i,i.init(),i}getAdap j[e](this.getSdk(e))}setBidders(e){var t,i,s,r;const o={biddersMap:Object.assign({},(null===(t=this.configs.adfox.headerBiddings)||void 0===t?void 0:t.biddersMap)||{}),timeout:(null===(i=this.configs.adfox.headerBiddings)||void 0===i?void 0:i.timeout)||1e3},a=null===(ll===(r=this.configs.gpt.prebid)||void 0===r?void 0:r.allowedBidders)||[]];e.forEach((e=>{switch(e.adserver){case n.Vc.ADFOX:e.adserverBidderId?o.biddersMap[e.key]=e.adserverBidderId:f.warn(`[Header Bidding] –ù–µ —É–∫–∞–∑–∞–Ω ID –±–∏–¥–¥–µ—Ä–∞ ${e.key} –Ω–∞ –ø–ª–æ—â–∞–¥–∫–µ ${e.adserver}"`);break;case n.Vc.GPT:d.push(e.key)}})),0===Object.keys(o.biddersMap).length?delete this.configs.adfox.headerBiddings:this.configs.adfox.headerBiddings=o,this.configs.gpt.prebid&&(this.configs.gpt.prebid.allowedBidders=d)}}class H{constructor(e){this.baseUrl=e}fetch(e,t){return fetch(this.baseUrl,{method:"POST",headers:{"Content-Type":"arset=utf-8"},body:JSON.stringify({query:e,variables:t})}).then((e=>e.json())).then((e=>e.data.result))}}class ${constructor(e){this.apiClient=e,this.layout=n.Ar.STANDART,this.bidders=[],this.adunitsBidders=[],this.adserversBidders=F(),this.adunits={[n.Ar.STANDART]:{},[n.Ar.AMP]:{},[n.Ar.ADBLOCK_PLUS]:{},[n.Ar.INTERNATIONAL]:{}},this.adfoxAdditionalParams={}}findAdunit(e){return is.adfoxAdditionalParams[e]}load(e){var t,i;return(0,r.mG)(this,void 0,void 0,(function*(){let s=this.getLocalConfig();(function(e){return!(!e||!e.adunits)&&(!!(e.adunits instanceof Array&&e.adunits.length)||e.adunits instanceof Object&&Object.keys(e.adunits).length>0)})(s)||(s=yield this.getRemoteConfig(e));const{layout:r,adunits:o,bidders:a,adunitsBidders:d}=s,l=this.getCustomProjectParams();if(l){const e=null===(i=null===(t=null==l?void 0:l.creativeParams)||void 0===t?void 0:t.adfox)||void 0===i?void 0:i.creativeConfig;"object"==typeof e&&(this.adfoxAdditionalParams=e)}r&&(this.layout=r),this.adunits=function(e){const t=Object.values(n.Ar).reduce(((e,t)=>(e[t]={},e)),{});let i=e;return i instanceof Object&&(i=Object.values(e)),i.forEach((e=>{t[e.layout][e.placement]=e})),t}(o),this.bidders=a||[],this.adunitsBidders=d||[],this.adserversBidders=function(e,t){return t.reduce(((t,i)=>{const s=e.find((e=>i.id===e.id));return s?(t[s.adserver].push({bidder:s,adunitBidder:i}),t):t}),F())}(a,d)}))}getLocalConfig(){return window.__ADS_CONFIG__||null}getCustomProjectParams(){return window.__ADS_CUSTOM_PARAMS__||null}getRemoteConfig(e){return(0,r.mG)(this,void 0,void 0,(function*(){const{adunits:t,bidders:i,adunitsBidders:s}=yield this.apiClient.fetch("\nfragment adunit on Aer\n    placement\n    layout\n    placeholderEnabled\n    advInfoPosition\n    placeholderConfig {\n        height\n        backgroundEnabled\n        bordersEnabled\n        advMarkEnabled\n    }\n    refreshEnabled\n    refreshConfig { loadTime viewportTime }\n    adfoxConfig { p1 p2 }\n    rtbConfig { id }\n    gptConfig {\n        adUnitPath\n        sizes { sizes0x0 sizes336x0 }\n    }\n    scroogeConfig { fill }\n}\n\nquery getAdsConfig($filter: AdsConfigFilterInput!) {\n    result: adsConfig(filter: $filter) {\n        __typename\n        ...on AdsConfig {\n                   bidders {\n                id\n                key\n                adserver\n       BidderId\n                params { key type }\n            }\n            adunitsBidders {\n                  placement\n                params { key value }\n            }\n        }\n        ...on ProblemInterface { message }\n    }\n}\n",{filter:e});return{adunits:t,bidders:i,adunitsBidders:s,layout:this.layoutction F(){return e[t]=[],e)),{})}const Y=[1600,1440,1366,980,540,1];class z{constructor(e=5e3){this.actionsQueue=[],this.priorityPromises=[],this.findPromisesToResolveTimeout=0,this.actionResolveTimeout=e}waitForMyQueue(e){return(0,r.mG)(this,void 0,void 0,(function*(){if(e<1||isNaN(e)||e%1!=0)throw new RangeError("–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–æ–ª–∏—Å–ª–æ–º –Ω–µ –º–µ–Ω—å—à–µ 1");let t;const i=new Promise((e=>{t=e}));return 0===this.actionResolveTimeout||(this.addToQueue(e,i),yield this.waitForPriority(e),setTimeout(t,this.acti))}addToQueue(e,t){this.actionsQueue.push({priority:e,promise:t}),t.then((()=>this.removeFromQumiseToResolve()}removeFromQueue(e){this.actionsQueue=this.actionsQueue.filter((t=>t.promise!==e)),this.findPromiseToResolve()}findPromiseToResolve(){var e;const t=Math.min(...this.actionsQueue.map((({priority:e})=>e)));null===(e=this.priorityPromises[t])||void 0===e||e.resolver()}waitForPriority(e){if(1===e)return Promise.resolve();if(this.priorityPromises[e])return this.priorityPromises[e].promise;let t;const i=new Promise((e=>{t=e}));return i.then((()=>{this.priorityPromises[e]=null})),this.priorityPromises[e]={promise:i,resolver:t},clearTimeout(this.findPromisesToResolveTimeout),this.findPromisesToResolveTimeout=window.setTimeout(this.findPromiseToResolve.bind(this),10),this.priorityPromises[e].promise}}function W(){const e=a();return function(e,t){let i=!1,s=2,r=!1,n=!1;if("function"!=typeof t)return;function o(){--s||(i=!r&&n)}e+="?ch=*&rn=*";const a=String(11*Math.random()),d=new Image;d.onload=o,d.onerror=function(){r=!0,o()},d.src=e.replace(/\*/,"1").replace(/\*/,a);const l=new Image;l.onload=o,l.onerror=function(){n=!0,o()},l.src=e.replace(/\*/,"2").replace(/\*/,a),function e(t,r){0===s||r>1e3?t(0===s&&i):setTimeout((function(){e(t,2*r)}),2*r)}(t,250)}("/public/px.gif",e.done),e.ready}class Q{constructor(){this.isEnabled=!1,this.isAdblockPlus=!1,this.ready=Promise.all([P().catch(f.error),W().catch(f.error)]).then((([e,t])=>{this.isEnabled=!!e,this.isAdblockPlus=!!t}))}}const J="__saved_referrer__",K={zen:["zen.yandex."],"yandex-news":["yxnews"],yandex:["yandex."],msn:["msn.com"],lentainform:["lentainform.com"],instagram:["instagram.com","qlid.ru"],"google-discover":["discover.google."],google:["google."],facebook:["facebook.com"],"wday.ru":["wday.ru"],"woman.ru":["woman.ru"],"elle.ru":["elle.ru"],"starhit.ru":["starhit.ru"egirl.ru":["ellegirl.ru"],"elledecoration.ru":["elledecoration.ru"],"psychologies.ru":["psychologies.ru"],"vokrugsvetaa.ru"],pulse:["pulse.mail.ru"],odnoklassniki:["ok.ru"],vk:["vk.com"],flipboard:["flipboard.com"],viber:["trts.io"],"mail.ru":["go.mail.ru"]};function X(e,t){for(let i=0;i<t.length;i++)for(let s=0;s<e.length;s++)if(e[s].indexOf(t[i])>-1)return!0;return!1}ct t=window.location.search;return new URLSearchParams(t).get(e)}const te="RU",ie=[te,"TM","00"];function se(e=!0){return(0,r.mG)(this,void 0,void 0,(function*(){if(!e)return te;const t=yield Promise.resolve(ee("geo"));if(t)return t.toUpperCase();try{const e=yield fetch("/geo-context");if(!e.ok)throw newrn f.error("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≥–µ–æ",e),f.errù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –≥–µ–æ",{payload:[e]}),te}}))}function re(e,t,i){const s={prebidAdUnit:{code:e.placement,codeType:(e.biddersConfig.codeType||"").toLowerCase(),mediaTypes:{banner:{sizes:e.biddersConfig.sizes}},bids:t[i].filter((t=>t.adunitBidder.placement===e.placement)).map((e=>{return{bidder:e.bidder.key,params:(t=e,t.bidder.params.reduce(((e,i)=>{const s=t.adunitBidder.params.find((e=>e.key===i.key));if(s){let t=s.value;i.type===n.zB.NUMBER&&(t=Number(t)||0),t&&(e[i.key]=t)}return e}),{}Unit.code ne{constructor(e){this.styleProperty=e,this.value=""}update(e){e.style[this.styleProperty]=this.value}}class oe{constructor(e){this.rootElement=e,this.creativeParams={},this.style={zIndex:new ne("zIndex("bottom"),leftOffset:new ne("left")}}get parentElement(){var e;return null===(e=this.rootElement)||void 0===e?void 0:e.parentElement}get childElement(){var e;return null===(e=this.rootElement)||void 0===e?void 0:e.firstChild}get propertiesToUpdate(){return Object.values(this.style).filter((e=>!!e.value))}setProperty(e,t){e.value=t,this.parentElement&&e.update(this.parentElement)}setRootElement(e){this.rootElement=e;const{parentElement:t}=this;t?this.propertiesToUpdate.forEach((e=>e.update(t))):f.error("[STICKY RSYA] –£ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ —Å—Ç–∏–∫–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç parentElement")}setzIndex(e){this.setProperty(this.style.zIndex,`${e}`),this.creativeParams.zIndex=e}setBottomOffset(e){this.setProperty(this.style.bottomOffset,`${e}px`),this.creativeParams.offset=e}setLeftOffset(e){this.setProperty(this.style.leftOffset,`${e}px`)}setMaxHeight(e){this.childElement&&(this.childElement.style.maxHeight=`${e}px`)}}class ae{constructor(){this.slotCallbacks={},this.promises={},this.resolves={}}setBeforeCreate(e,t){var i,s;this.slotCallbacks[e]=t,null===(s=(i=this.resolves)[e])||void 0===s||s.call(i,t)}getBeforeCreate(e){if(this.slotCallbacks[e])return this.slotCallbacks[e];const t=new Promise((t=>this.resolves[e]=t));return this.promises[e]=t,t}}var de,le,he,ce,ue,fe,ge,me,ve,pe;const Ee="HSM_blockedAdunits",be="HSMCMLogLevel",Ae="HSMCMDevtools",Te="CMDebuggerData";class ye extends o{constructor(){super(),this.slots=[],de.set(this,void 0),le.set(this,void 0),he.set(this,void 0),this.isDebug=!1,this.beforeSlotCreateHandler=new ae,this.adblock=new Q,ce.set(this,void 0),ue.set(this,void 0),fe.set(this,{}),ge.set(this,!0),me.set(this,[]),ve.set(this,[]),this.targetings={},pe.set(this,!0),this.blockAdunits=(...e)=>{"all"===this.blockedAdunits||e.includes("all")?this.blockedAdunits="all":this.blockedAdunits=[...this.blockedAdunits,...e]};const e=window;e.Ya||(e.Ya={}),e.yaContextCb=e.yaContextCb||[],e.Ya.adfoxCode||(e.Ya.adfoxCode={}),e.Ya.adfoxCode.hbCallbacks||(e.Ya.adfoxCode.hbCallbacks=[]),e.googletag=e.googletag||{cmd:[]};const t=a();(0,r.YH)(this,de,t.done,"f"),this.ready=t.ready;const i=a();(0,r.YH)(this,le,i.done,"f"),this.staticSlotsReady=i.ready;const s=a();(0,r.YH)(this,he,s.done,"f"),this.geoReady=s.ready}get brandingSlots(){return(0,r.Q_)(this,me,"f").reduce(((e,t)=>e.concat(this.findSlots(t))),[])}get blockedAdunits(){return(0,r.Q_)(this,ve,"f")}set blockedAdunits(e){(0,r.YH)(this,ve,e,"f"),localStorage.setItem(Ee,JSON.stringify(e))}init(e){var t,i;return(0,r.mG)(this,void 0,void 0,(function*(){f.info("–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏",e);const{projectKey:s,scroogeEndpoint:o,isMobile:a,debug:d,adfox:l,gpt:h,branding:c,priorityQueueResolveMaxTime:u=3e3,isNoAdvInitial:g,useGeo:m=!0}=e;(0,r.YH)(this,ge,null===(t=e.allowIncrementalSlotID)||void 0===t||t,"f"),(0,r.YH)(this,pe,null===(i=e.allowGptFallback)||void 0===i||i,"f"),this.projectKey=s,this.isMobile=a,this.isDebug=d||"TRUE"===localStorage.getItem(be)||"TRUE"===localStorage.getItem(Ae),this.i,new z(u),"f"),o&&(0,r.YH)(this,ce,new H(o),"f"),this.configManager=new $((0,r.Q_)(this,ce,dfox:l,gpt:h,scrooge:{isMobile:a,projectKey:s,debug:this.isDebug,host:o}}),this.stickyRsya=new oe,this.adserverManager.configs.gpt.allowGptFallback=(0,r.Q_)(this,pe,"f");try{(0,r.YH)(this,ve,JSON.parse(localStorage.getItem(Ee))||[],"f");const e=new URLSearchParams(location.search).get("blockedAdunits");null!==e&&(0,r.YH)(this,ve,"all"===e?"all":e.split(","),"f")}catch(e){(0,r.YH)(this,ve,[],"f")}const v=[n.Vc.ADFOX,n.Vc.SCROOGE,n.Vc.RTB];yield Promise.all([se(m||!!ee("test_geo")).then((t=>(m&&!ie.includes(t)&&e.allowInternationalLayout&&(f.info("–∏–∑–º–µ–Ω—è–µ–º —Å–µ—Ç–∫—É –Ω–∞ dfp"),this.configManager.layout=n.Ar.INTERNATIONAL,v.push(n.Vc.GPT)),(0,r.Q_)(this,he,"f").call(this),t))),this.configManager.load({projectKey:s,isMobile:a}),this.adblock.ready]),this.adblock.isEnabled&&f.info("–æ–±–Ω–∞—Ä—É–∂–µ–Ω Adblock"),this.adblock.isAdblockPlus&&(f.info("–æ–±–Ω–∞—Ä—É–∂–µ–Ω Adblock Plus, –∏–∑–º–µ–Ω—è–µ–º —Å–µ—Ç–∫—É"),this.configManager.layout=n.Ar.ADBLOCK_PLUS,this.adserverManager.configs.adfox.headerBiddings=l.headerBiddingsAdblockPlus||l.headerBiddings),this.adserverManager.setBidders(this.configManager.bidders),v.forEach(.adserverManager.getAdserver(e))),Object.entries(this.targetings).forEach((([e,t])=>{this.adserverManager.forEachAdserver((i=>i.setTargeting({key:e,value:t})))}));const p=function(){Object.keys(K).forEach((function(e){location.host.indexOf(e)>-1&&delete K[e]}));const e=function(){const e=document.referrer,t=location.search.match(/utm_referrer=([^\\&]+)/),i=t?t[1]:"",s=location.search.match(/utm_source=([^\\&]+)/),r=s?s[1]:"",n=[];if(e&&n.push(e),i&&n.push(i),r&&n.push(r),!n.length)return"no-referrer";const o=Object.keys(K);for(let e=0;e<o.length;e++)if(X(n,K[o[e]]))return o[e];return"other"}(),t=("no-referrer"===e||"other"===e)&&function(){const e=sessionStorage.getItem(J);if(!e)return null;try{const t=JSON.parse(e);return t.timestamp+18e5>Date.now()?t.referrer:null}catch(e){}return null}()||e;return sessionStorage.setItem(J,JSON.stringify({timestamp:Date.now(),referrer:t})),t}(),E=function(){const e="/"===document.location.pathname?"main":"other",t=function(){const e=sessionStorage.getItem(Z);if(!e)return null;try{const t=JSON.parse(e);return t.timestamp+18e5>Date.now()?t.firstVisitedPage:null}catch(e){}return null}()||e;return sessionStorage.setItem(Z,JSON.stringify({firstVisitedPage:t,timestamp:Date.now()})),t}(),b=[{key:"screenWidth",value:(A=window.innerWidth,(Y.find((e=>Arandom()).toString()},{key:"referrer",value:p},{key:"ru-landing-page",value:E}];var A;"boolean"==typeof g&&b.push({key:"blockAdv",value:g?"no-adv":""}),this.setTargeting(...b),yield function(e){return(0,r.mG)(this,void 0,void 0,(function*(){const t=new URL(location.href).searchParage.removeItem(Ae);const i="TRUE"===localStorall!==t&&"0"!==t||i)&&(yield e.toggleConsole(),localStorage.getItem(Te)||localStorage.setItem(Te,JSON.stringify({noAdv:!1})));let s="";window.addEventListener("input",(t=>{if("string"!=typeof t.data)return;const i=t.data.toLowerCase();s+=i,s.includes("adsconsole")&&(e.toggleConsole(),s="")}),!0)}))}(this).catch(f.warn),(0,r.Q_)(this,de,"f").call(this),c&&(0,r.YH)(this,me,function(e,t){const i=t.adunits||[];if(0===i.length)return f.warn("[Branging]: –Ω–µ —É–∫–∞–∑–∞–Ω—ã —Å–ª–æ—Ç—ã",t),[];const s=i.reduce(((t,i)=>{const s=e.configManager.findAdunit(i);if(!s)return t;const r=s.refreshEnabled&&s.refreshConfig.refreshInterval||0;return r>t?r:t}),0);if(f.info("[Branging]: –±—Ä–µ–Ω–¥–∏–Ω–≥ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è ",i),f.info("[Branging]: –≤—Ä–µ–º—è —Ä–µ—Ñ—Ä–µ—à–∞",s),!s)return i;let r=0;const n=()=>{window.removeEventListener("focus",n),window.addEventListener("blur",o),r=window.setInterval((()=>{window.removeEventListener("blur",o),e.refreshBranding()}),1e3*s)},o=()=>{window.removeEventListener("blur",o),clearInterval(r),window.addEventListener("focus",n)};return n(),i}(this,c),"f"),yield function(e,t){const i=Array.from(document.querySelectorAll("[data-hsm-adunit]")),s=(null==t?void 0:t.adunits.reduce(((e,t)=>{const s=i.find((e=>e.getAttribute("data-hsm-adunit")===t));return s&&e.push(s),e}),[]))||[],o=i.filter((e=>!s.includes(e))),t=>function({container:e,creativeManager:t}){return(0,r.mG)(this,void 0,void 0,(function*(){constbute("data-hsm-adunit");if(!i)return;if(f.info(`–ù–∞—á–∞–ª–æ —Å–æ–∑–¥–∞–Ω–∏—è ssr —Å–ª–æ—Ç–∞ ${i}`),e.getAttribute("data-has-before-create")){f.time(`–°–ª–æ—Ç ${i} –æ–∂–∏–¥–∞–ª —Ö—É–∫ beforeCreate –≤ —Ç–µ—á–µ–Ω–∏–µ`);const e=yield function(e,t){return(0,r.mG)(this,void 0,void 0,(function*(){const i=yield t.beforeSlotCreateHandler.getBeforeCreate(e);return i instanceof Function?i():(f.error(`${e} –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ beforeCreate –ø—Ä–æ–ø—É—â–µ–Ω —Ç.–∫. –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π`),!0)}))}(i,t);if(f.timeEnd(`–°–ª–æ—Ç ${i} –æ–∂–∏–¥–∞–ª —Ö—É–∫ beforeCreate –≤ —Ç–µ—á–µ–Ω–∏–µ`),!1===e)return void f.info(`–°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ—Ç–∞ ${i} –æ—Ç–º–µ–Ω–µ–Ω–æ –≤ beforeCreate`);f.info(`–°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ—Ç–∞ ${i} —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–æ –ø–æ—Å–ª–µ beforeCreate`)}const s=t.createSlot({container:e,adunit:i,params:{priority:1}});return s.then((s=>{"true"===e.getAttribute("data-hsm-no-adv")&&(null==s||s.setTargeting({key:"blockAdv",value:"no-adv"})),t.emit("slotCreated",s);let o=!1;const a=()=>(0,r.mG)(this,void 0,void 0,(function*(){if(s&&!o&&(o=!0,s.config.adserver===n.Vc.GPT)){s.off("error",a),s.off("stub",a),yield s.destroy();const r=yield t.createSlot({container:e,adunit:i,params:{priority:1,adserver:n.Vc.ADFOX}});null==r||r.refresh().catch((e=>f.warn(e)))}}));null==s||s.on("error",a),null==s||s.on("stub",a),null==s||s.refresh().catch((e=>{f.warn(e),a()}))})).catch((e=>f.warn(e))),s}))}({container:t,creativeManager:e})));return Promise.all(a).catch((e=>f.warn(e)))}(this,c),(0,r.Q_)(this,le,"f").call(this),f.info("–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞")}))}createSlot({container:e,adunit:t,params:i={}}){var s;return(0,r.mG)(this,void 0,void 0,(function*(){if("all"===this.blockedAdunits||this.blockedAdunits.includes(t))return f.error(`–ê–¥—é–Ω–∏—Ç ${t} –±—ã–ª –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º`),null;if(yield this.ready,!e)return f.warn(t,"–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω"),null;const o=function(e,t,i){const s=e.configManager.findAdunit(t);if(!s)return null;e.adblock.isEnabled?e.adblock.isAdblockPlus?s.refreshEnabled=!1:s.adserver=n.Vc.SCROOGE:(null==i?void 0:i.adserver)&&(s.adserver=i.adserver);const r=e.configManager.findAdunitAdditionalParams(t)||{};return Object.assign(Object.assign({},s),r)}(this,t,i);if(!o)return f.warn(t,"–∫–æ–Ω—Ñ–∏–≥ –Ω–µ –Ω–∞–π–¥–µ–Ω"),null;const a=(0,r.Q_)(this,fe,"f")[t]||0;(0,r.Q_)(this,fe,"f")[t]=a+1,(0,r.Q_)(this,ge,"f")&&(e.id=`${t}_${a}`);const d=(0,r.Q_)(this,ue,"f").waitForMyQueue.bind((0,r.Q_)(this,ue,"f"),null!==(s=i.priority)&&void 0!==s?s:2),l=this.adserverManager.getAdserver(o.adserver);let h=function(e,t,i){if(0===t[n.Vc.ADFOX].length&&0===t[n.Vc.GPT].length)return i;const s=Object.assin.Vc.GPT)),r=Object.assign(Object.assign.ADFOX));return r.prebidAdUnit.bids.length>0&&nudriver"===e.bidder&&(e.params=Object.assign(Object.assign({},e.params),{additional:{ext:{query:`cid=nit),Object.assign(Object.assign({},i),{gpt:s,adfox:r})}(o,this.coion(e,t){var i,s;return!(e.adserver!==n.Vc.ADFOX||"sticky"!==e.placement&&"sticky-rsya"!==e.placement&&"sticky-rsya-comments"!==e.placement||"floorAd"!==t.type&&"floorAd"!==(null===(s=null===(i=e.adfoxConfig)||void 0===i?void 0:i.creativeConfig)||v0:s.type))}(o,i);c&&(h=Object.assign(ya.creativeParams));const u=l.createSlot(e,o,h,d);return c&&u.on("render",(e=>{const t=null==e?void 0:e.stickyAdNode;t?this.stickyRsya.setRootElement(t):f.error("[STICKY RSYA] –ù–µ—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä–∞ —Å—Ç–∏–∫–∏ –≤ –æ—Ç–≤–µ—Ç–µ slot.on('render')")})),u.setTargeting({key:"bunN",value:a.toString()},{key:"GMBunN",value:a.toString()},{key:"puid1",value:a.toString()}),this.slots.push(u),u}))}destroySlot(e){return(0,r.mG)(this,void 0,void 0,(function*(){yield e.destroy();const t=this.slots.indexOf(e);-1!==t&&this.slots.splice(t,1)}))}setTargeting(...e){this.setGlobalTargetings(...e),this.slots.forEach((t=>t.setTargeting(...e)))}setGlobalTargetings(..ts.forEach((e=>e.refresh()))}beforeSlotCreate(e,t){this.beforeSlotCreateHandler.setBeforeCreate(e,t)}unblockAdunits(){this.blockedAdunits=[]}clearSession(){this.adserverManager.forEachAdserver((e=>e.clearSession()))}enableLogs(){f.enabled=!0,localStorage.setItem(be,"TRUE")}disableLogs(){f.enabled=!1,localStorage.removeItem(be)}toggleConsole(){return(0,r.mG)(this,void 0,void 0,(function*(){const e=document.querySelector("#hsm-creative-manager-devtools");if(e)return localStorage.removeItem(Ae),void e.remove();yield Promise.all([i.e(851),i.e(897)]).then(i.bind(i,438)).then((e=>e.default())),localStorage.setItem(Ae,"TRUE")}))}appendAdvertisementMark(e){M(e)}}de=new WeakMap,le=new WeakMap,he=new WeakMap,ce=new WeakMap,ue=new WeakMap,fe=new WeakMap,ge=new WeakMap,me=new WeakMap,ve=new WeakMap,pe=new WeakMap},448:(e,t,i)=>{var s,r,n,o,a,d,l,h,c,u,f,g,m,v,p,E,b,A,T,y,S,C,I,w,k,R,D,_,P,O,M,x,L,N,B,U,G,j,V,q;i.d(t,{Vc:()=>n,Nk:()=>d,PV:()=>h,zB:()=>c,Ar:()=>C}),function(e){e.SEARCH="search",e.CREATE="create",e.UPDATE="update",e.DELETE="delete",e.ATTACH="attach"}(s||(s={})),function(e){e.CAMPAIGN="CAMPAIGN",e.CREATIVE="CREATIVE"}(r||(r={})),function(e){e.SCROOGE="SCROOGE",e.ADFOX="ADFOX",e.RTB="RTB",e.GPT="GPT"}(n||(n={})),function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE",e.DELETED="DELETED"}(o||(o={})),function(e){e.ID_ASC="ID_ASC",e.ID_DESC="ID_DESC",e.STATUS_ASC="STATUS_ASC",e.STATUS_DESC="STATUS_DESC",e.PLACEMENT_ASC="PLACEMENT_ASC",e.PLACEMENT_DESDESC",e.LAYOUT_ASC="LAYOUT_ASC",e.LAYOUT_DESC="LAYOUT_DESC"}(a||(a={})),function(e){e.INNER="INNER",e.OUTER_BOTTOM="OUTER_BOTTOM",e.DISABLED="DISABLED"}(d||(d={})),function(e){e.DATE="DATE",e.ADUNIT="ADUNIT",e.PROJECT="PROJECT",e.IS_MOBILE="IS_MOBILE",e.CAMPAIGN="CAMPAIGN",e.CREATIVE="CREATIVE"}(l||(l={})),function(e){e.COMBO="COMBO",e.INPAGE="INPAGE",e.INSTREAM="INSTREAM",e.EMPTY="EMPTY"}(h||(h={})),function(e){e.STRING="STRING",e.NUMBER="NUMBER"}(c||(c={})),function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE",e.DELETED="DELETED"}(u||(u={})),function(e){e.ID_ASC="ID_ASC",e.ID_DESC="ID_DESC",e.STATUS_ASC="STATUS_ASC",e.STATUS_DESC="STATUS_DESC",e.ADSERVER_ASC="Anction(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE",e.DELETED="DELETED"}(m||(m={})),function(e){e.ID_ASC="ID_ASC",e.ID_DESC="ID_DESC",e.CREATED_AT_ASC="CREATED_AT_ASC",e.CREATED_AT_DESC="CREATED_AT_DESC",e.MODIFIED_AT_ASC="MODIFIED_AT_ASC",e.MODIFIED_AT_DESC="MODIFIED_AT_DESC",e.START_AT_ASC="START_AT_ASC",e.START_AT_DESC="START_AT_DESC",e.END_AT_ASC="END_AT_ASC",e.END_AT_DESC="END_AT_DESC",e.STATUS_ASC="STATUS_ASC",e.STATUS_DESC="STATUS_DESC",e.TITLE_ASC="TITLE_ASC",e.TITLE_DESC="TITLE_DESC"}(v||(v={})),function(e){e.ADUNIT="ADUNIT",e.PROJECT="PROJECT",e.IS_MOBILE="IS_MOBILE",e.CAMPAIGN="CAMPAIGN",e.CREATIVE="CREATIVE"}(p||(p={})),function(e){e.ALL="ALL",e.RU="RU"}(E||(E={})),function(e){e.DATE="DATE",e.ADUNIT="ADUNIT",e.PROJECT="PROJECT",e.IS_MOBILE="IS_MOBILE",e.CAMPAIGN="CAMPAIGN",e.CREATIVE="CREATIVE"}(b||(b={})),function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACT",e.IS_MOBILE="IS_MOBILE"}(S||(S={})),function(e){e.STANDART="STANDART",e.ADBLOCK_PLUS="ADBLOCK_PLUS",e.INTERNATIONAL="INTERNATIONAL",e.AMP="AMP"}(C||(C={})),function(e){e.CREATE="CREATE",e.UPDATE="UPDATE",e.DELETE="DELETE"}(I||(I={})),function(e){e.ADUNIT="ADUNIT",e.CAMPAIGN="CAMID_ASC="ID_MMISSION_ASJECT_ASC",eON_DESC="CODESC",e.ARTICLES_ASC="ARTICLES_ASC",e.ARTICLES_DESC="ARTICLES_DESC"}(P||(P={})),function(e){e.DOCTORPITER="DOCTORPITER",e.ELLE="ELLE",e.ELLEDXIM="MAXIM",e.N1="N1",e.PARENTS="PARENTS",e.PORTAL="PORTAL",e.PSYCHOLOGIES="PSYCHOLOGIES",e.STARHIT="STARHIT",e.VOKRUGSVETA="VOKRUGSVETA",e.WDAY="WDAY",e.WOMAN="WOMAN",e.WOMANFORUM="WOMANFORUM"}(O||(O={})),function(e){e.NEW="NEW",e.PENDING="PENDING",e.FAILED="FAILED",e.DONE="DONE"}(M||(M={})),function(e){e.CSV="CSV",e.XLSX="XLSX"}(x||(x={})),function(e){e.ID_ASC="ID_ASC",e.ID_DESC="ID_DESC",e.CREATED_AT_ASC="CREATED_AT_ASC",e.CREATED_AT_DESC="CREATED_AT_DESC"}(L||(L={})),function(e){e.ADUNIT="adunit",e.ADUNITSTATUS="adunitStatus",e.CAMPAIGN="campaign",e.CREATIVE="creative",e.PRODUCT="product",e.MARKETPLACE="marketplace",e.REPORT="report",e.SCROOGEREPORT="scroogeReport",e.PARTNERSREPORT="partnersReport",e.PREBIDREPORT="prebidReport",e.PRODUCTREPORT="productReport",e.TEMPLATE="template",e.TEMPLATEADUNITLINK="templateAdunitLink",e.BIDDER="bidder"}(N||(N={})),function(e){e.SCROOGE="SCROOGE",e.PARTNERS="PARTNERS",e.PREBID="PREBID",e.PRODUCTS="PRODUCTS"}(B||(B={})),function(e){e.EMPTY_PROJECT="EMPTY_PROJECT",e.EMPTY_DEVICE="EMPTY_DEVICE",e.EMPTY_PLACEMENT="EMPTY_PLACEMENT",e.EMPTY_PARAM="EMPTY_PARAM",e.INVALID_PROJECT="INVALID_PROJECT",e.INVALID_DEVICE="INVALID_DEVICE",e.INVALID_PLACEMENT="INVALID_PLACEMENT",e.INVALID_PARAM="INVALID_PARAM"}(U||(U={})),function(e){e.ACTIVE="ACTIVE",e.INACTIVE="INACTIVE",e.DELETED="DELETED"}(G||(G={})),function(e){e.ID_ASC="ID_ASC",e.ID_DESC="ID_DESC"}(j||(j={})),function(e){e.ADUNIT="ADUNIT",e.PROJECT="PROJECT",e.IS_MOBILE="IS_MOBILE",e.CAMPAIGN="CAMPAIGN",e.CREATIVE="CREATIVE"}(V||(V={})),function(e){e.ADUNIT="ADUNIT",e.PROJECT="PROJECT",e.IS_MOBILE="IS_MOBILE",e.CAMPAIGN="CAMPAIGN",e.CREATIVE="CREATIVE"}(q||(q={}))},711:(e,t,i)=>{i.r(t),i.d(t,{AdvertiserMark:()=>l,INSIDE_TEMPLATE:()=>o,LEFT:()=>d,STATIC:()=>a});var s=i(123),r=i(259),n=i(448);const o="INSIDE_TEMPLATE",a="STATIC",ar e;super(),this.wrapper=null,this.infoBlock=null,is.markClickArea=null,this.cross=null,this.isInfoBlockVisible=!1,this.shouldShowInfoBlock=!0,this.isMobile=!1,this.allowInfoWindowUnderMark=!1,this.markPosition=o,this.markPositionClassName={[n.Nk.INNER]:"_inner",[n.Nk.OUTER_BOTTOM]:"_outer-bottom",[a]:"_static",[d]:"_left",[o]:""},this.infoWidthDesktop=380,this.infoWidthMobile=343,this.infoBlockMargin=16,this.infoTextHeight=72,this.infoTextStep=24;const t=document.createElement("style");t.innerHTML=r.Z.toString(),this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML='<div class="advertiser-mark-wrapper"> <div class="advertiser-mark"> <div class="advertiser-mark-svg _absolute-center"></div> <div class="advertiser-mark-click-area _absolute-center"></div> <div class="advertiser-info"> <div class="advertiser-info-text"><slot></slot></div> <div class="advertiser-info-cross"></div> </div> <div class="advertiser-mark-triangle _absolute-center"> </div> </div> </div>',this.shadowRoot.appendChild(t),this.wrapper=this.shadowRoot.querySelector(".advertiser-mark-wrapper"),this.infoBlock=this.shadowRoot.querySelector(".advertiser-info"),this.infoText=this.shadowRoot.querySelector(".advertiser-info-text"),this.mark=this.shadowRoot.querySelector(".advertiser-mark"),this.markClickArea=this.shadowRoot.querySelector(".advertiser-mark-click-area"),this.markSvg=this.shadowRoot.querySelector(".advertiser-mark-svg"),this.cross=this.shadowRoot.querySelector(".advertiser-info-cross"),this.markClickArea&&this.markClickArea.addEventListener("click",(e=>{e.preventDefault(),this.toggleInfoVisibility()})),this.cross&&this.cross.addEventListener("click",(e=>{e.preventDefault(),this.toggleInfoVisibility(!1)})),this.markSvg.innerHTML=s,null===(e=this.infoBlock)||void 0===e||e.style.setProperty("--lineheight",`${this.infoTextStep}px`)}toggleInfoVisibility(e){var t,i;this.shouldShowInfoBlock||(e=!1),this.recalulateInfoBlockPosition(),this.isInfoBlockVisible=(null===(t=this.wrapper)||void 0===t?void 0:t.classList.toggle("_advertiser-info-visible",e))||!1,this.isInfoBlockVisible&&this.checkTopOffset(),null===(i=thi-advertiser-mark-visibility-change",{bubbles:!0,composed:!0,detail:{isVisible:this.isInfoBlockVisible}}))}recalulateInfoBlockPosition(){var e,t;const{left:i,width:s}=this.mark.getBoundingClientRect();null===(e=this.infoBlock)||void 0===e||e.style.setProperty("--width",`rk.getBoundingClientRect();r=-(this.infoWidth-e)/2}const o=s/2+i-this.infoBlockMargin,a=document.body.offsetWidth-(s/2+i)-this.infoBlockMargin,d=this.infoWidth/2-o;d>0&&(r=d);const l=this.infoWidth/2-a;l>0&&(r=-l),null===(t=this.infoBlock)||void 0===t||t.style.setPt)||void 0===e||e.style.setProperty("--maxheight",`${this.infoTextHeight}px`),!this.infoBlock)return;const{top:i}=this.infoBlock.getBoundingClientRect(),s=i+window.scrollY;if(this.drawInfoWindowUnderMark(this.allowInfoWindowUnderMark),this.allowInfoWindowUnderMark)return;if(s>=0)return;const r=Math.abs(s),n=Math.floor((this.infoTextHeight-r)/this.infoTextStep)*this.infoTextStep;null===(t=this.infoText)||void 0===t||t.style.setProperty("--maxheight",`${Math.max(n,this.infoTextStep)}px`)}setPosition(e){if(this.markPosition===e)return;this.markPosition=e;const t=this.markPositionClassName[this.markPosition];this.classList.remove(...this.allMarkClasses),this.markPosition===a&&this.classList.add(t),this.markPosition===d&&this.classList.add(t),this.wrapper.classList.remove(...this.allMarkClasses),this.wrapper.classList.add(t)}setIsMobile(){this.isMobile=!0}setAllowInfoWindowUnderMark(){this.allowInfoWindowUnderMark=!0}drawInfoWindowUnderMark(e){var t;null===(t=this.wrapper)||void 0===t||t.classList.toggle("_info-window-under-mark",e)}setShowInfo(e){var t;this.shouldShowInfoBlock="false"!==e,null===(t=this.wrapper)||void 0===t||t.classList.toggle("_disabled",!this.shouldShowInfoBlock)}get allMarkClasses(){return Object.values(this.markPositionClassName).filter(Boolean)}get infoWidth(){var e;const t=this.isMobile?this.infoWidthMobile:this.infoWidthDesktop;if(this.markPosition===n.Nk.INNER){const i=null===(e=this.closest("div[data-adv-mark-info-window-bounding]"))||void 0===e?void 0:e.offsetWidth;return i?Math.min(i-4,t):t}return t}static get observedAttributes(){return["mark-position","show-info","is-mobile","allow-info-window-under-mark"]}attributeChangedCallback(e,t,i){switch(e){case"mark-position":this.setPosition(i);break;case"is-mobile":this.setIsMobile();break;case"allow-info-window-under-mark":this.setAllowInfoWindowUnderMark();break;case"show-info":this.setShowInfo(i)}}}},259:(e,t,i)=>{i.d(t,{Z:()=>u});var s=i(81),r=i.n(s),n=i(645),o=i.n(n),a=i(667),d=i.n(a),l=new URL(i(52),i.b),h=o()(r()),c=d()(l);h.push([e.id,'@font-face{font-family:"Inter-Regular";font-style:normal;font-weight:400;font-display:swap;src:url('+c+') format("woff")}:host{display:block;position:relative}.advertiser-mark-wrapper{position:absolute;left:0;bottom:0;width:100%}.advertiser-mark-wrapper._disabled{pointer-events:none}.advertiser-mark{position:absolute;height:12px;width:64px;top:0;left:0}.advertiser-mark-svg{line-height:0}.advertiser-mark-click-area{position:absolute;z-index:1;top:-4px;left:-4px;height:20px;width:72px;user-select:none;cursor:pointer}.advertiser-mark-triangle{display:none;position:absolute;bottom:100%;width:0;height:0;border-style:solid;border-width:6px 6px 0 6px;border-color:#fff transparent transparent transparent;z-index:1}.advertiser-mark-svg._absolute-center,.advertiser-mark-triangle._absolute-center{left:0;right:0;margin:0 auto}.advertiser-info{--offset: 0px;--width: 356px;position:absolute;display:none;bottom:18px;left:var(--offset);transform:translateX(calc(-50% + 32px));width:var(--width);box-sizing:border-box;background-color:#fff;padding:16px 32px 16px 16px;font-family:"Inter-Regular._iniseeft:auto;top:aconcat(h[1],"}"),h[4]=r):h[4]="".concat(r)),t.push(h))}},t}},667:e=>{e.exesMohas(e)?r.value=eatemlns="http:="64" height="8" y="2" fill="#fff" fill-opacity=".6" rx="4"/><p=".6721c4h.949807.807 0 0 0 .088-.381.786.786 0 0 0-.088-.38. 2.8Zt.keyr=a.onload=null,clear);s++){var r=(o=i[s]).getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===t))return o}var n=document.getElementsByTagName("style")<n.length;s+;if((r=(o=n[s]).getAttribute("data-href"))===e||r===t)return o}})(s,r))return t();((e,t,i,s)=>{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.onerror=r.onload=n=>{if(r.onerror=r.onload=null,"load"===n.type)i();else{var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.href||t,d=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");d.code="CSS_CHUNK_LOAD_FAILED",d.type=o,d.request=a,r.parentNode.removeChild(r),s(d)}},r.href=t,document.head.appendChild(r)})(e,r,t,i)})),s={69:0},o.f.miniCss=(e,t)=>{s[e]?t.push(s[e]):0!==s[e]&&{897:1}[e]&&t.push(s[e]=i(e).then((()=>{s[e]=0}),(t=>{throw delete s[e],t})))},(()=>{o.b=document.baseURI||self.location.href;var e={69:0};o.f.j=(t,i)=>{var s=o.o(e,t)?e[t]:void 0;if(0!==s)if(s)i.push(s[2]);else{var r=new Promise(((i,r)=>s=e[t]=[i,r]));i.push(s[2]=r);var n=o.p+o.u(t),a=new Error;o.l(n,(i=>{if(o.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",a.name="ChunkLoadError",a.type=r,a.request=n,s[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var s,r,[n,a,d]=i,l=0;if(n.some((t=>0!==e[t]))){for(s in a)o.o(a,s)&&(o.m[s]=a[s]);d&&d(o)}for(t&&t(i);l<n.length;l++)r=n[l],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0},i=self.webpackChunk_smh_monetization_scrooge_client=self.webpackChunk_smh_monetization_scrooge_client||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{var e=o(573);const t=window.HSMCreativeManager=new e.yg,{onHSMCreativeManagerReady:i}=window,s=Array.isArray(i)?i:[];window.onHSMCreativeManagerReady={push(e){e(t)}},s.forEach((e=>e(t)))})()})();