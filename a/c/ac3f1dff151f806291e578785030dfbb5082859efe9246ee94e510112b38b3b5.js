(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2155],{56295:33297:function(e,t,a){"use strict";a.d(t,{dI:function(){return s},xN:function(){return generateLabelColor}});var l=a(52322),n=a(12348),r=a(99219);a(56268);let s=["#10b981","#06b6d4","#f59e0b","#0ea5e9","#d946ef","#f43f5e","#6366f1","#ca8a04","#78716c"],generateLabelColor=t.ZP=e=>{let{tag:t,onRemove:a,onClickLabel:s}=e;return(0,l.jsx)(n.Z,{color:t.color,text:t.label,onClick:children:a&&(0,l.jsx)(r.aMB,{className:"ml-1 h-3 w-3 shrink-0 cursor-pointer",onClick:)})}},18406:21215:function(e,t,a){"use strict";a.d(t,{Z:function(){return SettingsHeader}});var l=a(52322);,86045:function(e,t,a){"use strict";a.d(t,{Z:function(){return SettingsTabs}});var l=a(52322),n=a(51830),r=a(47330),s=a(83122),i=a(53954),d=a(5632);,81291:78066:function(e,t,a){"use strict";a.d(t,{Z:function(){return Modal}});var l=a(52322),n=a(2784),r=a(68810),s=a(64529),i=a(83122),d=a(82002),c=a(89370);}},72034:function(e,t,a){"use strict";a.d(t,{J:function(){return useListTagsQuery}});var l=a(73235),n=a(66547),r=a(70167),s=a(26806);function _templateObject(){let e=(0,l._)(["\n    query ListTags($data: TagQueryInput!) {\n  tags(data: $data) {\n    ...Tag\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let i=(0,n.ZP)(_templateObject(),r.u}},3748:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return L}});var l=a(52322),n=a(18406),r=a(97185),s=a(2784),i=a(99219),d=a(6676),c=a.n(d),o=a(56958),u=a(33297),x=a(78066),b=a(73235),m=a(66547),h=a(70167),g=a(26806);function _templateObject(){let e=(0,b._)(["\n    mutation CreateTag($data: TagCreateInput!) {\n  createTag(data: $data) {\n    ...Tag\n  }\n}\n    ",""]);return _templateObject=function(){return e},e}let f=(0,m.ZP)(_templateObject(),h.u}let p=(0,m.ZP)(updateTag_templateObject(),h.u);var j=a(86414),v=a(83122),y=a(77512);let generateInitialValues=()=>({label:"",color:u.dI[Math.floor(Math.random()*u.dI.length)]});function TagDetailsModal(e){let{labelToUpdate:t,open:a,handleClose:n,onReset:r,workspaceId:i}=e,d=void 0===t,[u,b]=(0,s.useState)(generateInitialValues()),[,m]=g.Db(f),[,h]=g.Db(p);(0,s.useEffect)(()=>{t?b({label:t.label,color:t.color}):b(generateInitialValues())},[t]);let v=(0,s.useCallback},[r]),handleCreateTag=async()=>{let{label:e,color:t}=u;return o.A.promise(m({data:{id:c()(),label:e,color:t,workspaceId:i}}).then(e=>{let{data:t,error:a}=e;if(a)throw a;let l=null==t?void 0:t.createTag;if(!l)throw Error("Label not created");j.Z.track("label_created")}),{loading:"Creating label...",erro),success:()=>"Created label"})},handleUpdateTag=async()=>{if(!t)return;let{label:e,color:a}=u;try{(0,o.A)("Updating tag...");let{error:l}=await h({id:t.id,label:e,color:a});if(l)throw l;o.A.success("Updated tag")}catch(e){o.A.error("Error updating tag")}},onSubmit=async()=>{d?await handleCreateTag():await handleUpdateTag(),v(),n()},handleChang};return(0,l.jsx)(x.Z,{containerClass:"mt-10",title:a?d?"Create Label":"Edit Label":"",open:a,handleClose:n,handleReset:v,handleNext:onSubmit,nextText:d?"Create":"Save",nextDisabled:!u.label,nextOnEnter:!0,children:(0,l.jsxs)("div",{children:[(0,l.jsx)(y.oi,{className:"w-full",labelText:"Name",placeholder:"Name",tabIndex:0,name:"label",id:"label",onChang),value:u.label}),(0,l.jsx)("label",{className:"label-small mt-4",children:"Color"}),(0,l.jsx)(ColorPicker,{color:u.color,setColo)})]})})}let ColorPicker=e=>{let{color:t,setColor:a}=e;return(0,l.jsx)("div",{className:"flex gap-x-2 rounded-md border border-gray-300 p-2 shadow-sm",children:u.dI.map(e=>(0,l.jsx)("div",{onClic),className:(0,v.AK)("flex h-5 w-5 cursor-pointer items-center justify-center rounded-full border border-white transition ease-in-out"),style:{background:e,outline:e===t?"solid 2px ".concat(e):"none",outlineOffset:"1px"},children:e===t&&(0,l.jsx)(i.nQG,{className:"h-3 w-3 text-white"})},e))})}let N=(0,m.ZP)(deleteTag_templateObject());var w=a(72034),T=a(53954),C=a(21215);function LabelListItem(e){let{id:t,label:a,userCanEdit:n,handleEdit:r,handleDelete:s}=e;return(0,l.jsx)("div",{className:"relative bg-white px-4 py-3",id:t,children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)("div",{className:"ml-",children:(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)(u.ZP,{tag:a})})})}),n&&(0,l.jsxs)("div",{className:"flex divide-x overflow-hidden rounded-md border",children:[(0,l.jsx)(EditButton,{clickHandler:r,disabled:!1}),(0,l.jsx)(DeleteButton,{clickHandler:s,disabled:!1})]})]})})}let EditButton=e=>{let{clickHandler:t,disabled:a}=e;return(0,l.jsx)("button",{className:"flex items-center px-2 py-1 hover:bg-slate-100",onClick:t,disabled:a,children:(0,l.jsx)(i.SxV,{className:"h-3.5 w-3.5 text-gray-600"})})},DeleteButton=e=>{let{clickHandler:t,disabled:a}=e;return(0,l.jsx)("button",{className:"flex items-center px-2 hover:bg-slate-100",onClick:t,disabled:a,children:(0,l.jsx)(i.pJl,{className:"h-3.5 w-3.5 text-gray-600"})})};function SettingsLabels(){let{workspace:e}=(0,T.cF)(),[t,a]=(0,s.useState)(!1),[n,r]=(0,s.useState)(null),[,i]=g.Db(N),[{data:d,error:c,fetching:u}]=(0,w.J)({variables:{data:{workspaceId:null==e?void 0:e.id}},pause:!(null==e?void 0:e.id)}),x=(null==d?void 0:d.tags)||[],b=(0,T.cn)(),m=(null==x?void 0:x.length)===0&&!u,handleDeleteLabel=async e=>{let t=i({id:e}).then(e=>{let{error:t,data:a}=e;if(t)throw t;return a});o.A.promise(t,{loading:"Deleting label...",success:"Deleted label",erro"})};return(0,l.jsxs)("div",{className:"mx-auto w-full max-w-3xl","data-testid":"labels-".concat(b?"edit":"view"),children:[(0,l.jsx)(C.Z,{title:"Labels",description:"Tag ".concat("product demos"," with colored labels."),Actions:(0,l.jsx)(AddLabelButton,{enabled:!m&&!u&&b,handleClick:()=>a(!0)})}),u?(0,l.jsx)("div",{}):m?(0,l.jsx)(EmptyState,{canEdit:b,handleEdit:()=>a(!0)}):(0,l.jsx)("div",{className:"divide-y divide-gray-200 overflow-hidden rounded-md border",children:x.map(e=>(0,l.jsx)("div",{className:"bg-white",children:(0,l.jsx)(LabelListItem,{id:e.id,label:e,userCanEdit:b,handleEdi},handleDelet)})},e.id))}),(0,l.jsx)(TagDetailsModal,{open:t,handleClos),onRese),workspaceId:null==e?void 0:e.id,labelToUpdate:n?x.finn):void 0})]})}let AddLabelButton=e=>{let{enabled:t,handleClick:a}=e;return t?(0,l.jsx)("button",{className:"duration-70 flex items-center justify-between rounded-md border border-zinc-900 bg-zinc-900 px-3 py-2 text-base font-medium text-white transition-all hover:bg-zinc-700 focus:border-zinc-500 focus:outline-none focus:ring-2 focus:ring-zinc-300",onClick:a,children:"Add label"}):null},EmptyState=e=>{let{canEdit:t,handleEdit:a}=e;return(0,l.jsx)("div",{className:"flex items-center justify-center rounded-md border p-4 text-center text-gray-500 md:p-6",children:(0,l.jsxs)("div",{className:"mx-auto max-w-3xl px-6 py-16 text-center",children:[(0,l.jsx)("div",{className:"text-blue m-auto mb-3 inline-block",children:(0,l.jsx)(i.lO_,{className:"h-8 w-8"})}),(0,l.jsx)("h2",{className:"mb-2 text-lg font-semibold text-gray-800",children:"There are no labels in this workspace"}),(0,l.jsx)("div",{className:"mb-7 text-base text-gray-500",children:"Labels are used to tag product demos"}),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsx)(AddLabelButton,{enabled:t,handleClick:a})})]})})};var _=a(86045),k=a(81291);function LabelsPage(){return(0,l.jsxs)(n.Z,{children:[(0,l.jsx)(k.Z,{title:"Labels",includeSlug:!0}),(0,l.jsx)(_.Z,{children:(0,l.jsx)("div",{className:"relative mx-auto w-full max-w-2xl",children:(0,l.jsx)(SettingsLabels,{})})})]})}LabelsPage.getLayou};var L=LabelsPage}},function(e){e.O(0,[3211,8426,3265,1617,4637,5837,4054,7330,9219,5306,6870,7156,6456,7185,9774,2888,179}),_N_E=e.O()}]);
//# sourceMappingURL=labels-29956b8e069d68cb.js.map