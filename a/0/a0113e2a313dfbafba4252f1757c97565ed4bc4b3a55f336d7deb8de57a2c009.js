!function(p,e,o,g){o.modules({"webengage/ga-integration":[function(e,n,t){"use strict";var f=o.require("webengage/weq"),r=o.require("webengage/util"),s=f.get("GA.universalAnalyticsFunction")||f.get("webengage.GA.universalAnalyticsFunction")||"ga";webengage_fs_configurationMap._gaTracker?f.set("webengage._gaTracker",webengage_fs_configurationMap._gaTracker+"."):"function"==typeof p[s]&&"function"==typeof p[s].getAll&&p[s].getAll()[0].get("name")?f.set("webengage._gaTracker",p[s].getAll()[0].get("name")+"."):f.set("webengage._gaTracker","");var v=f.get("webengage.ga.gtm")||!1,a=webengage_fs_configurationMap._gaTracker||"",b=!1,y=!1;function d(e){var n;return e?v?n=p[s].getAll()[0].get("trackingId"):p[s](:n=p._gat._getTrackerByName(a)._getAccount(),n}function c(e,n,t,a,i){var o,g,r={eventCategory:e,eventAction:n,eventLabel:t,eventValue:a,nonInteraction:"boolean"==typeof i&&i?1:0},c={event_category:e,event_label:t,event_title:a,non_interaction:!("boolean"!=typeof i||!i)};if(p.gtag&&"function"==typeof p.gtag)p.gtag("event",n,c);else if(o=f.get("webengage.ga.trackerId"),g=!1,"undefined"!=typeof GoogleAnalyticsObject&&void 0!==s&&"function"==typeof p[s]&&GoogleAnalyticsObject===s&&d(g=!0)===o||(!p._gaq||!p._gat||d(!1)!==o)&&g){var u=ga.getAll().length,l=function(){y||ga.getAll().length!==u?y=!0:(!function(){if(!b){var e=p[s].getAll()[0].get("clientId"),n=d(!0);e&&n&&(p[s]("create",n,{clientId:e}),b=!0)}}(),p[s](f.get("webengage._gaTracker")+"send","event",r),v=!1)};v?p.dataLayer&&(r.event=e,r.eventCallback=l,dataLayer.push(r)):p[s](f.get("webengage._gaTracker")+"send","event",r)}else p._gaq&&(v?p.dataLayer&&(r.event=e,r.eventCallback=l,dataLayer.push(r)):p._gaq.push([f.get("webengage._gaTracker")+"_trackEvent",e,n,t,a,!("boolean"!=typeof i||!i)]))}var i={survey:{onSubmit:function(e){var n,t=e.questionResponses;if(t&&0<t.length)for(var a=0;a<t.length;a++){var i=t[a],o="",g="";if(i.value)switch(i.value["@class"]){case"text":o=i.value.text;break;case"file":o=i.value.fileName+" | "+i.value.fileSize;break;case"score":o=i.value.value;break;default:n=i.value.values,o="array"===r.type(n)?n.join(","):r.stringify(n),i.value.additionalInfo&&(g=i.value.additionalInfo[o])}c("WebEngage-Survey","survey-question-response ( "+(o=g?o+": "+g:o)+" )","Question [S:"+e.surveyId+"] [Q:"+i.questionId+"] "+i.questionText)}},onComplete:function(e){c("WebEngage-Survey","survey-complete","Survey [S:"+e.surveyId+"] "+e.title,e.questionResponses.length)},onOpen:function(e){c("WebEngage-Survey","survey-open","Survey [S:"+e.surveyId+"] "+e.title,g,!0)},onClose:function(e){c("WebEngage-Survey","survey-close","Survey [S:"+e.surveyId+"] "+e.title,g,!0)}},notification:{onOpen:function(e){c("WebEngage-Notification","notification-open","Notification [N:"+e.notificationId+"] "+e.title,g,!0)},onClose:function(e){c("WebEngage-Notification","notification-close","Notification [N:"+e.notificationId+"] "+e.title)},onClick:function(e){c("WebEngage-Notification","notification-click","Notification [N:"+e.notificationId+"] "+e.title)}},feedback:{onOpen:onSubmit:function(e){var n=e.id;c("WebEngage-Feedback","feedback-submit",n?"[F:"+n+"]":g)}}};t.init=function(){for(var e in i)if(i.hasOwnProperty(e))for(var n in i[e])i[e].hasOwnProperty(n)&&o[e][n](i[e][n])}},{}]},{},[])}(window,document,webengage);