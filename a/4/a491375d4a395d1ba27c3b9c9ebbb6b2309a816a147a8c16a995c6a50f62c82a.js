"use strict";(self.webpackChunk_volkswagen_onehub_feature_services_bundle=self.webpackChunk_volkswagen_onehub_feature_services_bundle||[]).push([[2],{1682:(e,n,t)=>{t.r(n),t.d(n,{UrqlConnectionService:);var r=t(5783);unction o(){}unction a(){}function c(e){e(0)}n y(){}e){return new Promise((function(n){!function(e){return function(n){let t=[],r=o;return e((function(e){"number"==typeof e?u(t)(n):e.tag?(t.length>=1&&t.shift(),t.push(e[0]),r(0)):(e=e[0],r=e,e(0))}))}}(e)(()}))}"function"==typeof Symbol&&(Symbol.observable||(Symbol.observable=Symbol("observable"))),new Map,new Set;var E,D;class q extends Error{constructor(e,n,t,r,i,o,u){super(e),this.name="GraphQLError",this.message=e,i&&(this.path=i),n&&(this.nodes=Array.isArray(n)?n:[n]),t&&(this.source=t),r&&(this.positions=r),o&&(this.originalError=o);var a=u;if(!a&&o){var c=o.extensions;c&&"object"==typeof c&&(a=c)}this.extensions=a||{}}toJSON(){return{...this,message:this.message}}unction C(e){return new q(`Syntax Error: Unexpected token at ${D} in ${e}`)}function P(e){if(e.lastIndex=D,e.test(E))return E.slice(D,D=e.lastIndex)}var N=/ +(?=[^\s])/y;function V(e){for(var n=e.split("\n"),t="",r=0,i=0,o=n.length-1,u=0;u<n.length;u++)N.lastIndex=0,N.test(n[u])&&(u&&(!r||N.lastIndex<r)&&(r=N.lastIndex),i=i||u,o=u);for(var a=i;a<=o;a++)a!==i&&(t+="\n"),t+=n[a].slice(r).replace(/\\"""/g,'"""');return t}function F(){for(var e=0|E.charCodeAt(D++);9===e||10===e||13===e||32===e||35===e||44===e||65279===e;e=0|E.charCodeAt(D++))if(35===e)for(;10!==(e=E.charCodeAt(D++))&&13!==e;);D--}var I=/[_A-Za-z]\w*/y;function L(){var e;if(e=P(I))return{kind:"Name",value:e}}var R=/(?:null|true|false)/y,M=/\$[_A-Za-z]\w*/y,G=/-?\d+/y,Q=/(?:\.\d+)?[eE][+-]?\d+|\.\d+/y,$=/\\/g,U=/"""(?:"""|(?:[\s\S]*?[^\\])""")/y,J=/"(?:"|[^\r\n]*?[^\\]")/y;function B(e){var n,t;if(t=P(R))n="null"===t?{kind:"NullValue"}:{kind:"BooleanValue",value:"true"===t};else if(!e&&(t=P(M)))n={kind:"Variable",name:{kind:"Name",value:t.slice(1)}};else if(t=P(G)){var r=t;n=(t=P(Q))?{kind:"FloatValue",value:r+t}:{kind:"IntValue",value:r}}else if(t=P(I))n={kind:"EnumValue",value:t};else if(t=P(U))n={kind:"StringValue",value:V(t.slice(3,-3)),block:!0};else if(t=P(J))n={kind:"StringValue",value:$.test(t)?JSON.parse(t):t.slice(1,-1),block:!1};else if(n=function(e){var n;if(91===E.charCodeAt(D)){D++,F();for(var t=[];n=B(e);)t.push(n);if(93!==E.charCodeAt(D++))throw C("ListValue");return F(),{kind:"ListValue",values:t}}}(e)||function(e){if(123===E.charCodeAt(D)){D++,F();for(var n,t=[];n=L();){if(F(),58!==E.charCodeAt(D++))throw C("ObjectField");F();var r=B(e);if(!r)throw C("ObjectField");t.push({kind:"ObjectField",name:n,value:r})}if(125!==E.charCodeAt(D++))throw C("ObjectValue");return F(),{kind:"ObjectValue",fields:t}}}(e))return n;return F(),n}function z(e){var n=[];if(F(),40===E.charCodeAt(D)){var t;for(D++,F();t=L();){if(F(),58!==E.charCodeAt(D++))throw C("Argument");F();var r=B(e);if(!r)throw C("Argument");n.push({kind:"Argument",name:t,value:r})}if(!n.length||41!==E.charCodeAt(D++))throw C("Argument");F()}return n}function W(e){var n=[];for(F();64===E.charCodeAt(D);){D++;var t=L();if(!t)throw C("Directive");F(),n.push({kind:"Directive",name:t,arguments:z(e)})}return n}function X(){var e=L();if(e){var n;if(F(),58===E.charCodeAt(D)){if(D++,F(),n=e,!(e=L()))throw C("Field");F()}return{kind:"Field",alias:n,name:e,arguments:z(!1),directives:W(!1),selectionSet:ne()}}}function Z(){var e;if(F(),91===E.charCodeAt(D)){D++,F();var n=Z();if(!n||93!==E.charCodeAt(D++))throw C("ListType");e={kind:"ListType",type:n}}else{if(!(e=L()))throw C("NamedType");e={kind:"NamedType",name:e}}return F(),33===E.charCodeAt(D)?(D++,F(),{kind:"NonNullType",type:e}):e}var K=/on/y;function H(){if(P(K)){F();var e=L();if(!e)throw C("NamedType");return F(),{kind:"NamedType",name:e}}}var Y=/\.\.\./y;function ee(){if(P(Y)){F();var e,n=D;if((e=L())&&"on"!==e.value)return{kind:"FragmentSpread",name:e,directives:W(!1)};D=n;var t=H(),r=W(!1),i=ne();if(!i)throw C("InlineFragment");return{kind:"InlineFragment",typeCondition:t,directives:r,selectionSet:i}}}function ne(){var e;if(F(),123===E.charCodeAt(D)){D++,F();for(var n=[];e=ee()||X();)n.push(e);if(!n.length||125!==E.charCodeAt(D++))throw C("SelectionSet");return F(),{kind:"SelectionSet",selections:n}}}var te=/fragment/y;function re(){if(P(te)){F();var e=L();if(!e)throw C("FragmentDefinition");F();var n=H();if(!n)throw C("FragmentDefinition");var t=W(!1),r=ne();if(!r)throw C("FragmentDefinition");return{kind:"FragmentDefinition",name:e,typeCondition:n,directives:t,selectionSet:r}}}var ie=/(?:query|mutation|subscription)/y;function oe(){var e,n,t=[],r=[];(e=P(ie))&&(F(),n=L(),t=function(){var e,n=[];if(F(),40===E.charCodeAt(D)){for(D++,F();e=P(M);){if(F(),58!==E.charCodeAt(D++))throw C("VariableDefinition");var t=Z(),r=void 0;if(61===E.charCodeAt(D)&&(D++,F(),!(r=B(!0))))throw C("VariableDefinition");F(),n.push({kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:e.slice(1)}},type:t,defaultValue:r,directives:W(!0)})}if(41!==E.charCodeAt(D++))throw C("VariableDefinition");F()}return n}(),r=W(!1));var i=ne();if(i)return{kind:"OperationDefinition",operation:e||"query",name:n,variableDefinitions:t,directives:r,selectionSet:i}}var ue=ae={OperationDefinition(e){if("query"===e.operation&&!e.name&&!ue(e.variableDefinitions)&&!ue(e.directives))return ae.SelectionSet(e.selectionSet);var n=e.operation;return e.name&&(n+=" "+e.name.value),ue(e.variableDefinitions)&&(e.name||(n+=" "),n+="("+e.variableDefinitions.map(ae.VariableDefinition).join(", ")+")"),ue(e.directives)&&(n+=" "+e.directives.map(ae.Directive).join(" ")),n+" "+ae.SelectionSet(e.selectionSet)},VariableDefinition(e){var n=ae.Variable(e.variable)+": "+ce(e.type);return e.defaultValue&&(n+=" = "+ce(e.defaultValue)),ue(e.directives)&&(n+=" "+e.directives.map(ae.Directive).join(" ")),n},Field(e){var n=(e.alias?e.alias.value+": ":"")+e.name.value;if(ue(e.arguments)){var t=e.arguments.map(ae.Argument),r=n+"("+t.join(", ")+")";n=r.length>80?n+"(\n  "+t.join("\n").replace(/\n/g,"\n  ")+"\n)":r}return ue(e.directives)&&(n+=" "+e.directives.map(ae.Directive).join(" ")),e.selectionSet?n+" "+ae.SelectionSet(e.selectionSet):n},StringValue:e=>e.block?e.value):e.value),BooleanValue:e=>""+e.value,NullValue:IntValue:e=>e.value,FloatValue:e=>e.value,EnumValue:e=>e.value,Name:e=>e.value,Variable:ListValue:ObjectValue:e=>"{"+e.fields.map(ae.ObjectField).join(", ")+"}",ObjectField:e=>e.name.value+": "+ce(e.value),Document:e=>ue(e.definitions)?e.definitions.map(ce).join("\n\n"):"",SelectionSet:e=>"{\n  "+e.selections.map(ce).join("\n").replace(/\n/g,"\n  ")+"\n}",Argument:e=>e.name.value+": "+ce(e.value),FragmentSpread(e){var n="..."+e.name.value;return ue(e.directives)&&(n+=" "+e.directives.map(ae.Directive).join(" ")),n},InlineFragment(e){var n="...";return e.typeCondition&&(n+=" on "+e.typeCondition.name.value),ue(e.directives)&&(n+=" "+e.directives.map(ae.Directive).join(" ")),n+" "+ce(e.selectionSet)},FragmentDefinition(e){var n="fragment "+e.name.value;return n+=" on "+e.typeCondition.name.value,ue(e.directives)&&(n+=" "+e.directives.map(ae.Directive).join(" ")),n+" "+ce(e.selectionSet)},Directive(e){var n="@"+e.name.value;return ue(e.arguments)&&(n+="("+e.arguments.map(ae.Argument).join(", ")+")"),n},NamedType:ListType:NonNullType:;ar se=(e,n)=>{for(var t=0|(n||5381),r=0,i=0|e.length;r<i;r++)t=(t<<5)+t+e.charCodeAt(r);return t},le=new Set,fe=new WeakMap,de=e=>{if(null===e||le.has(e))return"null";if("object"!=typeof e)return JSON.stringify(e)||"";if(e.toJSON)return de(e.toJSON());if(Array.isArray(e)){var n="[";for(var t of e)n.length>1&&(n+=","),n+=de(t)||"null";return n+"]"}if(pe!==ve&&e instanceof pe||he!==ve&&e instanceof he)return"null";var r=Object.keys(e).sort();if(!r.length&&e.constructor&&e.constructor!==Object){var i=fe.get(e)||Math.random().toString(36).slice(2);return fe.set(e,i),de({__key:i})}le.add(e);var o="{";for(var u of r){var a=de(e[u]);a&&(o.length>1&&(o+=","),o+=de(u)+":"+a)}return le.delete(e),o+"}"};ar pe="undefined"!=typeof File?File:ve,he="undefined"!=typeof Blob?Blob:ve,ye=/("{3}[\s\S]*"{3}|"(?:\\.|[^"])*")/g,me=/(?:#[^\n\r]+)?(?:[\r\n]+|$)/g,be=ge=ke=new Map,we=new Map,xe=e=>{var n;return"string"==typeof e?n=ge(e):e.loc&&we.get(e.__key)===e?n=e.loc.source.body:(n=ke.get(e)||ge(ce(e)),ke.set(e,n)),"string"==typeof e||e.loc||(e.loc={start:0,end:n.length,source:{body:n,name:"gql",locationOffset:{line:1,column:1}}}),n},Se=e=>{var n=se(xe(e));if(e.definitions){var t=Oe(e);t&&(n=se(`\n# ${t}`,n))}return n},Oe=e=>{for(var n of e.definitions)if("OperationDefinition"===n.kind)return n.name?n.name.value:void 0};function Ae(){return(Ae=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function Te(e,n){return function(e,n,t){return{...n,kind:e,context:n.context?{...n.context,...t}:t||n.context}}(e.kind,e,Ae({},e.context,{authAttempt:n}))}function _e(e){var n=e.addAuthToOperation,t=e.getAuth,r=e.didAuthError,o=e.willAuthError;return function(e){var u=e.client,a=e.forward,c=new Map,l=k(),d=l.source,v=l.next,p=null;return function(e){function l(e,n,t){var r=u.createRequestOperation("mutation",((e,n,t)=>{var r=n||{},i=(e=>{var n,t;return"string"==typeof e?(n=Se(e),t=we.get(n)||function(e,n){return E="string"==typeof e.body?e.body:e,D=0,function(){var e;F();for(var n=[];e=re()||oe();)n.push(e);return{kind:"Document",definitions:n}}()}(e)):(n=e.__key||Se(e),t=we.get(n)||e),t.loc||xe(t),t.__key=n,we.set(n,t),t})(e),o=((r),u=i.__key;return"{}"!==o&&(u=se(o,u)),{key:u,query:i,variables:r,extensions:void 0}})(e,n),t);return j(T(1)(m(()(O((function(){return v(r)}))(P))))}function h(e){p=e,y=void 0,c.forEach(v),c.clear()}var y=Promise.resolve().then(().then(h);function g(e){e=Te(e,!0),c.set(e.key,e),y||(y=t({authState:p,mutate:l}).then(h).catch(())}var k=A(e),S=m((function(e){return"teardown"===e.kind}))(k),q=m(()(k),C=w(()(x([d,f((function(e){return c.has(e.key)?s:!y&&o&&o({operation:e,authState:p})?(g(e),s):y?_(m((function(n){return"teardown"===n.kind&&n.key===e.key}))(k))(w(()((n=y,)):b(Te(e,!1));var n}))(q)])),P=A(a(x([C,S])));return m((function(e){var n=e.error,t=e.operation;return!(n&&r&&r({error:n,authState:p})&&!t.context.authAttempt&&(g(t),1))}))(P)}}}"undefined"!=typeof TextDecoder&&new TextDecoder;var je=t(8660),Ee=t(2277),De=t(781),qe=t(5115);const Ce=Object.freeze({});r Ve=t(4381),Fe=t(7967),Ie=t(5717);const Le=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;onst Me=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"];onst Qe={Name:{leave:,Variable:{leave:,Document:{leave:,OperationDefinition:{leave,VariableDefinition:{leave:,SelectionSet:{leave:,Field:{leave,Argument:{leave:({name:e,value:n})=>e+": "+n},FragmentSpread:{leave:,InlineFragment:{leave:,FragmentDefinition:{leave:,IntValue:{leave:({value:e})=>e},FloatValue:{leave:({value:e})=>e},StringValue:{leave:,BooleanValue:{leave:,NullValue:{leave:,EnumValue:{leave:({value:e})=>e},ListValue:{leave:({values:e})=>"["+$e(e,", ")+"]"},ObjectValue:{leave:,ObjectField:{leave:({name:e,value:n})=>e+": "+n},Directive:{leave:,NamedType:{leave:,ListType:{leave:,NonNullType:{leave:,SchemaDefinition:{leave:,OperationTypeDefinition:{leave:,ScalarTypeDefinition:{leave:,ObjectTypeDefinition:{leave:({description:e,name:n,interfaces:t,directives:r,fields:i})=>Je("",e,"\n")+$e(["type",n,Je("implements ",$e(t," & ")),$e(r," "),Ue(i)]," ")},FieldDefinition:{leave:,InputValueDefinition:{leave:,InterfaceTypeDefinition:{leave:,UnionTypeDefinition:{leave:,EnumTypeDefinition:{leave:({description:e,name:n,directives:t,values:r})=>Je("",e,"\n")+$e(["enum",n,$e(t," "),Ue(r)]," ")},EnumValueDefinition:{leave:,InputObjectTypeDefinition:{leave:,DirectiveDefinition:{leave:,SchemaExtension:{leave:,ScalarTypeExtension:{leave:,ObjectTypeExtension:{leave:({name:e,interfaces:n,directives:t,fields:r})=>$e(["extend type",e,Je("implements ",$e(n," & ")),$e(t," "),Ue(r)]," ")},InterfaceTypeExtension:{leave:,UnionTypeExtension:{leave:,EnumTypeExtension:{leave:({name:e,directives:n,values:t})=>$e(["extend enum",e,$e(n," "),Ue(t)]," ")},InputObjectTypeExtension:{leave:};=Error);r He=new Set,Ye=new WeakMap;nction tn(e){var n=("string"!=typeof e?e.loc&&e.loc.source.body||Ge(e):e).replace(/([\s,]|#[^\n\r]+)+/g," ").trim();if("string"!=typeof e){var t="definitions"in e&&an(e);t&&(n="# "+t+"\n"+n),e.loc||(e.loc={start:0,end:n.length,source:{body:n,name:"gql",locationOffset:{line:1,column:1}}})}return n}var rn=new Map;function on(e){var n,t;return"string"==typeof e?(n=Ke(tn(e)),t=rn.get(n)||(0,Fe.Qc)(e,{noLocation:!0})):(n=e.__key||Ke(tn(e)),t=rn.get(n)||e),t.loc||tn(t),t.__key=n,rn.set(n,t),t}="undefined"!=typeof Symbol?Symbol.asyncIterator:null,vn="undefined"!=typeof TextDecoder?new TextDecoder:null,pn=/content-type:[^\r\n]*application\/json/i,hn=/boundary="?([^=";]+)"?/i;function yn(e,n){if(Array.isArray(e))for(var t=0;t<e.length;t++)yn(e[t],n);else if("object"==typeof e&&null!==e)for(var r in e)"__typename"===r&&"string"==typeof e[r]?n[e[r]]=0:yn(e[r],n);return n}function mn(e){return Object.keys(yn(e,{}))}var bn=function(e){if(e.selectionSet&&!e.selectionSet.selections.some((function(e){return e.kind===qe.h.FIELD&&"__typename"===e.name.value&&!e.alias})))return cn({},e,{selectionSet:cn({},e.selectionSet,{selections:e.selectionSet.selections.concat([{kind:qe.h.FIELD,name:{kind:qe.h.NAME,value:"__typename"}}])})})},gn=new Map;function kn(e){return e&&"object"==typeof e?Object.keys(e).reduce((,Array.isArray(e)?[]:{}):e}function wn(e){return e.toPromise=function(){return j(T(1)(m(()(e)))},e}tion Tn(e){var n=e.forward,t=e.client,r=(e.dispatchDebug,new Map),i=Object.create(null);function o(e){var n=xn(e.kind,e);return n.query=function(e){var n=on(e),t=gn.get(n.__key);return t||(t=Pe(n,{Field:bn,InlineFragment:bn}),Object.defineProperty(t,"__key",{value:n.__key,enumerable:!1}),gn.set(n.__key,t)),t}(e.query),n}eturn function(e){var a=A(e),c=w(()(m(()(a)),s=v((function(e){var n=e.operation;if(n){var o=mn(e.data).concat(n.context.additionalTypenames||[]);if("mutation"===e.operation.kind){for(var u=new Set,a=0;a<o.length;a++){var c=o[a],s=i[c]||(i[c]=new Set);s.forEach((),s.clear()}u.forEach(()}else if("query"===n.kind&&e.data){r.set(n.key,e);for(var l=0;l<o.length;l++){var f=o[l];(i[f]||(i[f]=new Set)).add(n.key)}}}}))(n(m(()(w(()(x([w(o)(m(()(a)),m(()(a)])))));return x([c,s])}}unction jn(e){var n=e.forward,t=(e.dispatchDebug,new Set);turn function En(e){var n=e.forward;return e.dispatchDebug,function(e){var t=A(e),r=f((function(e){var n=e.key,r=m(()(t),i=e),o=function(e,n){var t=fn(e),r=e.context.url;if(!t||!n)return r;var i=[];return n.operationName&&i.push("operationName="+encodeURIComponent(n.operationName)),n.query&&i.push("query="+encodeURIComponent(n.query.replace(/#[^\n\r]+/g," ").trim())),n.variables&&i.push("variables="+encodeURIComponent(nn(n.variables))),n.extensions&&i.push("extensions="+encodeURIComponent(nn(n.extensions))),r+"?"+i.join("&")}(e,i),u=function(e,n){var t=fn(e),r="function"==typeof e.context.fetchOptions?e.context.fetchOptions():e.context.fetchOptions||{};return cn({},r,{body:!t&&n?JSON.stringify(n):void 0,method:t?"GET":"POST",headers:t?r.headers:cn({},{"content-type":"application/json"},r.headers)})}(e,i);return v(()(_(r)(function(e,n,t){var r="manual"===t.redirect?400:300,i=e.context.fetch;return g((function(o){var u=o.next,a=o.complete,c="undefined"!=typeof AbortController?new AbortController:null;c&&(t.signal=c.signal);var s,l=!1,f=!1;return Promise.resolve().then(().then((function(n){if(n)return f=(s=n).status<200||s.status>=r,function(e,n,t){var r=t.headers&&t.headers.get("Content-Type")||"";if(!/multipart\/mixed/i.test(r))return t.json().then(();var i,o="---",u=r.match(hn);u&&(o="--"+u[1]);var a=if(dn&&t[dn]){var c=t[dn]();i=c.next.bind(c)}else{if(!("body"in t)||!t.body)throw new TypeError("Streaming requests unsupported");var s=t.body.getReader();a=s.cancel.bind(s),i=s.read.bind(s)}var l="",f=!0,d=null,v=null;return i().then((function r(u){if(!u.done){var a=u.value),c=a.indexOf(o);for(c>-1?c+=l.length:c=l.indexOf(o),l+=a;c>-1;){var s=l.slice(0,c),p=l.slice(c+o.length);if(f)f=!1;else{var h=s.indexOf("\r\n\r\n")+4,y=s.slice(0,h),m=s.slice(h,s.lastIndexOf("\r\n")),b=void 0;if(pn.test(y))try{b=JSON.parse(m),d=v=v?ln(v,b,t):sn(n,b,t)}catch(e){}if("--"===p.slice(0,2)||b&&!b.hasNext){if(!v)return e(sn(n,{},t));break}}c=(l=p).indexOf(o)}}if(d&&(e(d),d=null),!u.done&&(!v||v.hasNext))return i().then(r)})).finally(a)}(u,e,s)})).then(a).catch((function(n){if("AbortError"!==n.name){var t=function(e,n,t){return{operation:e,data:void 0,error:new Xe({networkError:n,response:t}),extensions:void 0}}(e,f?new Error(s.statusText):n,s);u(t),a()}})),))}(e,o,u)))}))(m((function(e){return"query"===e.kind||"mutation"===e.kind}))(t)),i=n(m(()(t));return x([r,i])}}ew Set,Dn({dispatchDebug:On});var qn,Cn=[jn,Tn,En],Pn=function e(n){var t=new Map,r=new Map,u=[],a=k(),c=a.source,s=a.next,l=!1;function f(e){for(l=!0,e&&s(e);e=u.shift();)s(e);l=!1}function d(e){var n=m(()(D);return p.maskTypename&&(n=w(()(n)),"mutation"===e.kind?T(1)(O(()(n)):A(S(()(v(()(()(_(m(()(c))(n)))))}var p=cn(this instanceof e?this:Object.create(e.prototype),{url:n.url,fetchOptions:n.fetchOptions,fetch:n.fetch,suspense:!!n.suspense,requestPolicy:n.requestPolicy||"cache-first",preferGetMethod:!!n.preferGetMethod,maskTypename:!!n.maskTypename,operations$:c,reexecuteOperation:function(e){("mutation"===e.kind||r.has(e.key))&&(u.push(e),l||Promise.resolve().then(f))},createOperationContext:createRequestOperation:function(e,n,t){return function(e){for(var n=0,t=e.definitions.length;n<t;n++){var r=e.definitions[n];if(r.kind===qe.h.OPERATION_DEFINITION)return r.operation}}(n.query),xn(e,n,p.createOperationContext(t))},executeRequestOperation:function(e){return"mutation"===e.kind?d(e):g((function(n){var i=r.get(e.key);i||r.set(e.key,i=d(e));var o="cache-and-network"===e.context.requestPolicy||"network-only"===e.context.requestPolicy;return h(n.next)(S(n.complete)(O(()(i))).unsubscribe}))},executeQuery:function(e,n){var t=p.createRequestOperation("query",e,n);return p.executeRequestOperation(t)},executeSubscription:function(e,n){var t=p.createRequestOperation("subscription",e,n);return p.executeRequestOperation(t)},executeMutation:query:readQuery:subscription:mutation:),j=On,E=void 0!==n.exchanges?n.exchanges:Cn),D=A(E({client:p,dispatchDebug:j,forward:Dn({dispatchDebug:j})})(c));return D),p},Nn="wlfe-operation-name",Vn=function(){return Vn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Vn.apply(this,arguments)},Fn=function(e,n,t,r){return new(t||(t=Promise))((function(i,o){function u(e){try{c(r.next(e))}catch(e){o(e)}}function a(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?i(e.value):function(e){return e instanceof t?e:new t((function(n){n(e)}))}(e.value).then(u,a)}c((r=r.apply(e,n||[])).next())}))},In=function(e,n){var t,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(e,u)}catch(e){o=[6,e],r=0}finally{t=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}},Ln=function(){function e(e,n){var t=this;this.initialized=!1,this.execute=function(e,n){return Fn(t,void 0,void 0,()},this.refreshTokenCustomFetch=function(e,n){return Fn(t,void 0,void 0,(function(){var t,r=this;return In(this,(function(i){switch(i.label){case 0:return t=function(e,n){var t;if(function(e){return void 0!==(null==e?void 0:e.url)}(n))return n;if(function(e){return void 0!==(null==e?void 0:e.get)}(e))t=e.get(Nn);else{if(function(e){return void 0!==(null==e?void 0:e.values)}(e))return n;t=null==e?void 0:e[Nn]}return t?function(e,n){if(URL)try{var t=new URL(e,window.location.href);return t.searchParams.set("op",n),t.toString()}catch(e){}return e}(n,t):n}(null==n?void 0:n.headers,e),this.firstRequestPromise?[4,this.firstRequestPromise]:[3,2];case 1:i.sent(),this.firstRequestPromise=void 0,i.label=2;case 2:return this.initialized?[2,this.fetchOperationAndSetTokens(t,n)]:(this.firstRequestPromise=new Promise((),this.initialized=!0,[2,this.firstRequestPromise])}}))}))},this.userSessionService=e,this.discardTenant=n}return e.prototype.fetchOperationAndSetTokens=function(e,n){var t;return Fn(this,void 0,void 0,(function(){var r,i;return In(this,(function(o){switch(o.label){case 0:return[4,fetch(e,n)];case 1:return[4,(r=o.sent()).clone().json()];case 2:return i=o.sent(),(null===(t=null==i?void 0:i.errors)||void 0===t?void 0:t.some(())?[2,this.responseWithRefreshedAuthTokenWhenExpiredOrInvalid(e,n)]:[2,r]}}))}))},e.prototype.responseWithRefreshedAuthTokenWhenExpiredOrInvalid=function(e,n){return Fn(this,void 0,void 0,(function(){var t;return In(this,(function(r){switch(r.label){case 0:return[4,this.userSessionService.isLogged()];case 1:return t=r.sent()[0],this.userSessionService.discardAnonymousSession(),t?[4,this.userSessionService.restoreIdKitIfNeeded()]:[3,3];case 2:return r.sent(),[3,4];case 3:console.log("not logged in"),this.discardTenant(),this.userSessionService.logOut(),r.label=4;case 4:return[4,fetch(e,Vn(Vn({},n),{method:"POST"}))];case 5:return[2,r.sent()]}}))}))},e}(),Rn=t(233),Mn=(qn=function(e,n){return qn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},qn(e,n)},function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}qn(e,n),e.prototype=null===n?Object.create(n):(t.prototype=n.prototype,new t)}),Gn=function(){return Gn=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Gn.apply(this,arguments)},Qn=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.handleValidationError=function(e){return void 0===e&&(e=[]),new Promise((function(t,r){null==e||e.forEach((function(e){n.hasSubscriptions(e.code)?n.notify(e.code,Gn(Gn({},e),{abort:r,confirm:t})):r()}))}))},n}return Mn(n,e),n}(Rn.Z),$n=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Un=function(){return Un=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},Un.apply(this,arguments)},Jn=function(e){function n(n,t,i){var o=e.call(this)||this;return o.accessTokens={},o.getTenant=o.isV1=o.refreshAccessToken=function(){return e=o,n=void 0,i=function(){var e,n,t,i,o,u;return function(e,n){var t,r,i,o,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,r=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!((i=(i=u.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){u=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){u.label=o[1];break}if(6===o[0]&&u.label<i[1]){u.label=i[1],i=o;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(o);break}i[2]&&u.ops.pop(),u.trys.pop();continue}o=n.call(e,u)}catch(e){o=[6,e],r=0}finally{t=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(a){switch(a.label){case 0:if(!this.isV1(this.userSessionService))return[3,4];this.accessTokens={},e=0,n=Object.keys(r.a),a.label=1;case 1:return e<n.length?(t=n[e],i=r.a[t],[4,this.userSessionService.getToken(i)]):[3,4];case 2:o=a.sent(),this.accessTokens=Un(Un({},this.accessTokens),((u={})[i]=o,u)),a.label=3;case 3:return e++,[3,1];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(r,o){function u(e){try{c(i.next(e))}catch(e){o(e)}}function a(e){try{c(i.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):function(e){return e instanceof t?e:new t((function(n){n(e)}))}(e.value).then(u,a)}c((i=i.apply(e,n||[])).next())}));var e,n,t,i},o.discardAnonymousSession=o.userSessionService=t,o.userSessionService.subscribe(r.K.LoggedIn,o.refreshAccessToken),o.ubffEndpoint=n,o.tenantService=i,o.refreshTokenCustomFetch=new Ln(o.userSessionService,(),o}return $n(n,e),n}(Qn),Bn=),zn=Wn=Xn=Zn=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.createClientPromise=void 0,n.createClient=function(){return Wn(n,void 0,void 0,(function(){var e=this;return Xn(this,(function(n){switch(n.label){case 0:return[4,this.refreshAccessToken()];case 1:return n.sent(),[4,this.userSessionService.restoreSessionIfNeeded()];case 2:return n.sent(),this.isV1(this.userSessionService)?[3,4]:[4,this.userSessionService.checkUserStatus()];case 3:n.sent(),n.label=4;case 4:return this.client?[2,this.client]:(this.createClientPromise||(this.createClientPromise=new Promise((function(n){return Wn(e,void 0,void 0,(function(){var e,t,i,o,u=this;return Xn(this,(function(a){switch(a.label){case 0:return e=function(e){var n,t,i,o,a,c,s,l,f=e.operation,d="function"==typeof f.context.fetchOptions?f.context.fetchOptions():f.context.fetchOptions||{},v=Array.from((null===(o=f.query)||void 0===o?void 0:o.definitions)||[]).find((),p="OperationDefinition"===(null==(l=v)?void 0:l.kind)?null===(a=null==v?void 0:v.name)||void 0===a?void 0:a.value:"",h=null!==(c=f.context.authenticationType)&&void 0!==c?c:r.a.Generic,y=null===(s=u.accessTokens)||void 0===s?void 0:s[h],m=zn(zn({},d.headers),((n={})[Nn]=null!=p?p:"none",n["X-Tenant-Referer"]=window.location.href,n)),b=u.getTenant();return b&&(m=zn(zn({},m),((t={})["X-Tenant-Context"]=b,t))),y&&(m=zn(zn({},m),((i={})["X-IdentityKit-Authorization"]=y,i))),zn(zn({},f),{context:zn(zn({},f.context),{fetchOptions:zn(zn({},d),{headers:m})})})},t=this,i=Pn,o={exchanges:[Tn,jn,_e({addAuthToOperation:e,getAuth:function(){return Wn(u,void 0,void 0,()}}),En]},[4,this.refreshTokenCustomFetch.execute];case 1:return t.client=i.apply(void 0,[(o.fetch=a.sent(),o.fetchOptions={credentials:"include"},o.url=this.ubffEndpoint,o)]),n(this.client),[2]}}))}))}))),[2,this.createClientPromise])}}))}))},n}return Bn(n,e),n.prototype.query=function(e){var n;return Wn(this,void 0,void 0,(function(){var t,r,i,o,u,a;return Xn(this,(function(c){switch(c.label){case 0:return this.client?[3,2]:(t=this,[4,this.createClient()]);case 1:t.client=c.sent(),c.label=2;case 2:return r=e.query,i=e.variables,o=e.fetchPolicy,u=e.context,[4,this.client.query(r,i,zn({requestPolicy:"no-cache"===o?"network-only":o},u)).toPromise()];case 3:return[2,{data:(a=c.sent()).data,errors:null===(n=a.error)||void 0===n?void 0:n.graphQLErrors}]}}))}))},n.prototype.mutate=function(e){var n;return Wn(this,void 0,void 0,(function(){var t,r,i,o,u,a=this;return Xn(this,(function(c){switch(c.label){case 0:return this.client?[3,2]:(t=this,[4,this.createClient()]);case 1:t.client=c.sent(),c.label=2;case 2:return r=e.mutation,i=e.variables,o=e.context,[4,this.client.mutation(r,zn({},i),o).toPromise().then((function(e){var n,t,o,u=null===(o=null===(t=null===(n=e.error)||void 0===n?void 0:n.graphQLErrors[0])||void 0===t?void 0:t.originalError)||void 0===o?void 0:o.validationErrors;return u?a.handleValidationError(u).then((function(n){var t;return(null===(t=a.client)||void 0===t?void 0:t.mutation(r,zn(zn({},i),{overrule:n})).toPromise())||Promise.resolve(e)}),():e}))];case 3:return[2,{data:(u=c.sent()).data,errors:null===(n=u.error)||void 0===n?void 0:n.graphQLErrors}]}}))}))},n}(Jn)}}]);
//# sourceMappingURL=2.client-bundle-v0.75.0.js.map