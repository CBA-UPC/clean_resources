var Widgetic=function(){"use strict";var o,i="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};o=function(t){for(var n=o.options,e=n.parser[n.strictMode?"strict":"loose"].exec(t),r={},i=14;i--;)r[n.key[i]]=e[i]||"";return r[n.q.name]={},r[n.key[12]].replace(n.q.parser,function(t,e,i){if(e)return r[n.q.name][e]=i}),r[n.h.name]={},r[n.key[13]].replace(n.h.parser,,r}).options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","hash"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},h:{name:"hashKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};var e=o,n=window.location;n.origin||(n.origin=n.protocol+"//"+n.hostname+(n.port?":"+n.port:""));var r=e,s=(null!=(g=window.widgeticOptions)?g.domain:void 0)||"widgetic.com",a=(null!=(S=window.widgeticOptions)?S.domainProtocol:void 0)||"https",u="?lo="+encodeURIComponent(n.origin),c={proxy:(O=!1===(null!=(x=window.widgeticOptions)?x.secure:void 0)?"http":"https")+"://"+(j=(A=r(s)).host+(A.port?":"+A.port:""))+"/sdk/proxy.html"+u+"#proxy",popup:O+"://"+j+"/sdk/proxy.html"+u+"#popup",auth:O+"://"+s+"/oauth/v2/auth",composition:O+"://"+s+"/api/v2/compositions/{id}/embed.html"+u,widget:O+"://"+s+"/api/v2/widgets/{id}/embed.html"+u,editor:O+"://"+s+"/api/v2/editor.html"+u,plugin:O+"://"+j+"/plugin"+u,api:"/api/v2/",domain:a+"://"+j,lo:decodeURIComponent(r(n).queryKey.lo||n.origin),crossdomain:(null!=(Y=window.widgeticOptions)?Y.crossdomain:void 0)||!0},l="addEventListener",d="removeEventListener",h={on:function(t,e,i,n){return null==n&&(n=!1),t[l]?t[l](e,i,n):t.attachEvent("on"+e,i)},off:function(t,e,i,n){return null==n&&(n=!1),t[d]?t[d](e,i,n):t.detachEvent("on"+e,i)}},p=t(function(t,e){t.exports=function(){"use strict";return function(t,e,i){e=e||"";i=i||{};var n=i.complete||function(){},r=i.success||function(){},o=i.error||function(){},s=i.headers||{},a=i.method||"GET",u=i.sync||false,c=function(){{if(t.indexOf("http")===0&&typeof XDomainRequest!=="undefined")return new XDomainRequest;return new XMLHttpRequest}}();if(!c)throw new Error("Browser doesn't support XHR");if(typeof e!=="string"){var l=[];for(var d in e)l.push(d+"="+e[d]);e=l.join("&")}if("ontimeout"in c)c.ontimeout=+i.timeout||0;c.onload=function(){n(c.responseText,c.status);r(c.responseText)};c.onerror=function(){n(c.responseText);o(c.responseText,c.status)};c.open(a,a==="GET"&&e?t+"?"+e:t,!u);for(var h in s)c.setRequestHeader(h,s[h]);c.send(a!=="GET"?e:null);return c}}()}),f=p,m=c,g=function(t){var e,i,n,r;if(t.id&&(e=t.a))return r=e.u,n=e.m,e=e.d,i={id:t.id,t:"e",a:{}},t={"Content-type":"application/json"},"PUT"!==(n=n.toUpperCase())&&"DELETE"!==n||(t["X-HTTP-Method-Override"]=n,n="POST"),f(r,e,{method:n,headers:t,complete:function(t,e){return i.a.t=200===e||201===e||202===e||204===e?"t":"f",i.a.d=t,i=JSON.stringify(i),m.crossdomain?window.parent.postMessage(i,"*"):window.widgeticReceiver({origin:window.location.origin,data:i})}})},y=[].slice,v={};unction _(e){if(!e._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,i=t._tasks[e],n=i.length-1,r=i[n];i[n]=function(i,n){return function(t,e){i._tasks[n]&&(--i._active,++i._ended,(i._tasks[n]=null)==i._error&&(null!=t?b(i,t):(i._data[n]=e,(i._waiting?_:k)(i))))}}(t,e),--t._waiting,++t._active,i=r.apply(null,i),t._tasks[e]&&(t._tasks[e]=i||v)}}(e)}catch(t){if(e._tasks[e._ended+e._active-1])b(e,t);else if(!e._data)throw t}}function b(t,e){var i,n=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;0<=--n;)if((i=t._tasks[n])&&(t._tasks[n]=null,i.abort))try{i.abort()}catch(e){}t._active=NaN,k(t)}function k(t){var e;!t._active&&t._call&&(e=t._data,t._data=void 0,t._call(t._error,e))}function E(t){if(null==t)t=1/0;else if(!(1<=(t=+t)))throw new Error("invalid concurrency");return new w(t)}w.prototype=E.prototype={constructor:w,defer:abort:await:awaitAll:;var S=Object.freeze({queue:E}),x=S.queue(1),C={};x.defer(function(t){return C.init=t}),x.steps=C;function T(){eturn t()+t(!0)+t(!0)+t()}var A=x,s=Object.freeze({default:T}),O=t(function(t,e){var i;i=function(){function u(){var e=!1;return function c(i,n){function r(e,i){setTimeout(1)}var o=t.defer();return{promise:o.promise,handle:}var t={},l=1;return t.defer=function(){function i(t,e){o=t,r=e,s.forEach(,s=null}unction e(t,e){return e=c(t,e),0===o?s.push(e):e.handle(o,r),e.promise}var r,o=0,s=[],a=function(t){var e;try{e=t)}catch(t){return void n(t)}e?e):i(l,t)},t=u();return{resolve:t(a),reject:t(n),promise:{then:e,fail:}},t},t.exports=i()}),u=t(function(t){function e(){var o={},s=Function;return{publish:function(){var t,e,i,n=arguments,r=o[n[0]];r&&(t=r.length,e=1<n.length?Array.prototype.splice.call(n,1):[],setTimeout(function(){for(i=0;i<t;i+=1)r[i].apply(a,e);r=a=e=null},0))},subscribe:function(t,e){if("string"!=typeof t)throw"invalid or missing channel";if(!(e instanceof s))throw"invalid or missing callback";return o[t]||(o[t]=[]),o[t].push(e),{channel:t,callback:e}},unsubscribe:function(t,e){if(t.channel&&t.callback&&(e=t.callback,t=t.channel),"string"!=typeof t)throw"invalid or missing channel";if(!(e instanceof s))throw"invalid or missing callback";for(var i=o[t],n=i instanceof Array?i.length:0,r=0;r<n;r+=1)if(i[r]===e){i.splice(r,1);break}}}}var a;a=i,t.exports?t.exports=e():a.PubSub=e()}),a=s&&T,M=a,z=window,q={},I=function(t,e){return"location=no,menubar=no,toolbar=no,scrollbars=no,status=no,resizable=no,width="+t+",height="+e+",left="+(screen.width-t)/2+",top="+(screen.height-e)/2},j=function(t,e){var i,n,r,o=e.promise;return null!=(n=q.win)&&n.close(),q.win=r=z.open(t,"widgetic_popup_"+M(),I(500,496)),i=setInterval(function(){if(!r||r.closed)return clearInterval(i),e.reject("window closed")},50),o.then(function(){return r.close()}),o},P={},R=function(t,e){var i,n,r,o=e.promise;return R=document.createElement("iframe"),(n=P.root.el).appendChild(R),i=function(){return n.removeChild(R),clearTimeout(r)},r=setTimeout(function(){return e.reject("Timeout error")},1e4),o.then(i,i),R.setAttribute("src",t),o};R.setRoot=function(t){return P.root=t};var r=R,N=c,U=j,H=r,L=O,W={},D={},B=[],J=function(t,e){return null==e&&(e="oauth"),N.auth+"?client_id="+W.id+"&redirect_uri="+W.uri+"&response_type=token&scope="+(t=null==t?[]:t).join(" ")+"#"+e},Q=function(t,e){var i;return null==t&&(t=!0),i=L.defer(),{oa:t?U:H,scope:e=B=e?e:B,deffered:D.deffered=i}},G=function(t,e,i){return W.id&&W.uri?t(e,i):(i.reject("Widgetic must be initialized with client id and redirect uri!"),i.promise)},V=function(){var t=Q.apply(null,arguments),e=t.oa,i=t.scope,t=t.deffered;return G(e,J(i),t)};V.register=function(t){var e=Q(!0,t),i=e.oa;return t=e.scope,e=e.deffered,G(i,J(t,"signup"),e)},V.setAuthOptions=function(t,e,i){return W.id=t,W.uri=e},V.getClientId=V.retry=V.connect=function(t){var e=at,t=t.d;return t&&t.access_token?(e.setTokens(t),D.deffered.resolve(e.getStatus()),setTimeout(V.bind(this,!1),1e3*t.expires_in-1500)):D.deffered.reject(e.getStatus())};var $,K=V,X=c,n=g,Y=A,F=a,Z=O,tt=u,et={},it={},nt=null,rt=null,ot=function(t,e,i,n){var r;return t=X.api+t,r=(null!=(r=it.tokens)?r.access_token:void 0)||!1,(e=e||"GET")instanceof Object&&(i=e,e="GET"),"GET"!==e?t+=r?"?access_token="+r:"":(i=i||{},r&&(i.access_token=r)),JSON.stringify({t:"a",id:n,a:{u:t,m:e,d:i}})},st=function(t,e,i){var n,r=F(),o=(et[r]=n=Z.defer()).promise,e=ot.apply(this,n.margs=[t,e,i,r]),i=return o.then(i,i),it.proxy(e),o};st.response=function(t){var e,i=et[t.id],n=t.a,t=n.d;if(""!==t)try{t=JSON.parse(t)}catch(t){return void i.reject(new Error("JSON Parse error!"))}return"t"===n.t?i.resolve(t):it.tokens&&t.error&&("invalid_grant"===(n=t.error)||"access_denied"===n)?(e=function(){return nt=null,it.proxy(ot.apply(this,i.margs))},$().then(e,function(){return nt=null,i.reject(new Error("Unable to login again!"))})):((e=new Error(t.error_description||t.message||"Unknown Error")).errors=t.errors,e.code=t.code,i.reject(e))},$=function(){var t,e;return null!=(t=K).getClientId()?t(!1):(e=(nt=Z.defer()).promise,t=JSON.stringify({t:"r",d:[!1]}),window.parent.postMessage(t,X.lo),rt=setTimeout(nt.reject,3e3),e)},st.setProxy=function(t){return it.proxy=t},st.setTokens=st.getStatus=function(){var t;return null!=(t=it.tokens)&&t.access_token?{status:"connected",accessToken:it.tokens.access_token,refreshToken:it.tokens.refresh_token,expiresIn:it.tokens.expires_in,scope:it.tokens.scope}:{status:"disconnected"}},st.accessToken=function(t){return t&&(clearTimeout(rt),null!=nt&&nt.resolve(t),st.setTokens({access_token:t,refresh_token:void 0,expires_in:void 0,scope:void 0})),null!=(t=it.tokens)?t.access_token:void 0},st.disconnect=function(){return tt.publish("api/token/update"),it.tokens=null},st.queue=Y,st.request=n;var at=st,ut=c,ct=at,lt=r,dt=ct.queue.steps,ht=function(){return document.getElementsByTagName("body")[0].appendChild(this.el=document.createElement("div")),this.el.id="widgetic-root",lt.setRoot(this),this},pt=O.defer();ht.prototype.createProxy=function(){var e,t;return dt.init&&(ut.crossdomain?(e=document.createElement("iframe"),this.el.appendChild(e),t=setTimeout(function(){return ht._done=null,clearTimeout(t),pt.reject(new Error("Could not initialize cross-domain messaging iframe"))},1e4),ht._done=function(){return ct.setProxy(,clearTimeout(t),dt.init(),ht._done=dt.init=null,pt.resolve()},e.setAttribute("src",ut.proxy)):(ct.setProxy(,dt.init(),ht._done=dt.init=null,pt.resolve())),pt.promise},ht.connect=ht.style=function(){var t;return document.getElementsByTagName("head")[0].appendChild(t=document.createElement("style")),t.textContent="#widgetic-root{position:absolute;top:-1000px;left:-1000px;width:0px;height:0px;visibility:hidden;z-index:-1} #widgetic-root iframe{width:0px;height:0px} iframe.widgetic-composition {border: none;width: 100%;height: 100%;vertical-align: middle;} iframe.widgetic-editor {width: 490px; height: 565px; border:none;overflow:hidden} .wdgtc-wrap{overflow: hidden}"};var x=ht,ft=c,mt=e,gt=window,s=function(t){var e,i,n,r,o,s,a;if((!gt.parent||gt.parent!==gt||gt.opener)&&(e=(s=mt(t)).hash,i=s.hashKey,o=s.queryKey,r="proxy"===e,n=i.hasOwnProperty("popup"),(s=i.hasOwnProperty("oauth")||i.access_token)||r||n))return s&&(a="o"),r&&(a="i"),n&&(a="p"),s=s?gt.location.origin:ft.lo,(gt.opener||gt.parent).postMessage(JSON.stringify({d:e?i:o,t:a}),s)};s.parse=mt;var yt,vt,wt,j=s,g=function(t){var e;if("interactive"!==(e=document.readyState)&&"complete"!==e)return document.addEventListener("DOMContentLoaded",t);t()},_t=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},bt=[].slice,kt=c,Et=a,St=S.queue,xt=at,Ct=K,Tt={},At={},Ot=["click","dblclick","mousedown","mousemove","mouseup","mouseenter","mouseleave","mouseover","mouseout","wheel","keydown","keyup","keypress"],Mt=function(t,e,i){var n,r,o,s,a,u,c,l,d,h;if(null==i&&(i={}),a=(c="string"==typeof e?e:c)?i:e,null==c&&(c=a.composition),this._initQueue(),this._callbacks={},this.publicMethods=[],this.publicEvents=[],l=c?kt.composition.replace("{id}",c):kt.widget.replace("{id}",a.widget_id||a.widgetid),a.skin&&(this.changeSkin(a.skin),a.skin.id&&(l+="&theme="+a.skin.id)),a.content)for(r=0,o=(u=a.content).length;r<o;r++)n=u[r],this.addContent(n);return l+="&demo="+a.demo,i=[],e=Ct.getClientId(),xt.getStatus().status,(c=a.token||xt.accessToken())&&i.push("access_token="+c),e&&i.push("client_id="+e),a.wait_editor_init&&i.push("wait"),a.branding&&i.push("branding="+a.branding),a.brand_pos&&i.push("bp="+a.brand_pos),a.edit_mode&&i.push("edit_mode"),a.resize&&i.push("resize="+a.resize),a.autoscale&&i.push("autoscale="+a.autoscale),a.adaptive&&i.push("adaptive="+a.adaptive),i.length&&(l=l.replace(/(\?)|((.)(\#)|($))/,"?"+(i.length?i.join("&"):void 0)+"&$2")),this.id=Et(),(Tt[this.id]=this)._iframe=document.createElement("iframe"),this._iframe.setAttribute("class","widgetic-composition"),this._iframe.setAttribute("name",this.id),this._iframe.setAttribute("allowfullscreen",!0),this._iframe.setAttribute("scrolling","no"),t&&t.appendChild(this._iframe),s=0,this._iframe.addEventListener("load",(d=this,function(){if(1!=++s)return d._initQueue(),d._trigger("reload")})),this._iframe.setAttribute("src",l),this._iframe.parentElement&&0===this._iframe.parentElement.parentElement.className.indexOf("wdgtc-wrap")&&(this._responsiveWrapper=this._iframe.parentElement.parentElement),this._autoscale="off"!==a.autoscale,this.api=new Proxy({},{get:(h=this,function(t,r){return function(){var i=Array.from(arguments),n=Et();return new Promise(function(t,e){return At[n]={resolve:t,reject:e},h.ready.then(function(){return h._sendMessage({t:"pa",d:{id:n,method:r,args:i}})})})}})}),this};for(vt in Mt.prototype._initQueue=function(){var e;return this._queue=St(1),this._queue.defer((e=this,function(t){return e._startQueue=t})),this._readyDeferred=Widgetic.Aye.defer(),this.ready=this._readyDeferred.promise},Mt.prototype.updateSize=function(t,e){if("on"!==this._autoscale)return t&&this._iframe.setAttribute("width",t),e?(e=parseInt(e,10),this._responsiveWrapper&&(this._responsiveWrapper.style.height=e+"px",this._responsiveWrapper.querySelector(".wdgtc-holder").style["padding-top"]=0),this._iframe.style.height=e+"px"):void 0},Mt.prototype.close=function(){return Tt[this.id]=null,this._iframe.parentNode.removeChild(this._iframe),this.off(),this},Mt.prototype.queue=function(e){return this._queue.defer(function(t){return e(),t()})},Mt.prototype._apiReady=function(){return this._startQueue()},Mt.prototype._ready=Mt.prototype._sendMessage=function(e){var i;return this._queue.defer((i=this,function(t){return i._iframe.contentWindow.postMessage(JSON.stringify(e),"*"),t()})),this},Mt.prototype.on=function(t,e){var i,n,r,o,s;for(0<=_t.call(Ot,t)&&this._sendMessage({t:"re",d:t}),n=t.split(" "),i=this.hasOwnProperty("_callbacks")&&this._callbacks,r=0,o=n.length;r<o;r++)i[s=n[r]]||(i[s]=[]),i[s].push(e);return this},Mt.prototype.off=function(t,e){var i,n,r,o,s,a,u,c,l;if(0===arguments.length)return this._callbacks={},this;if(!t)return this;for(r=0,s=(i=t.split(" ")).length;r<s;r++)if(c=i[r],u=null!=(l=this._callbacks)?l[c]:void 0)if(e){for(n=o=0,a=u.length;o<a;n=++o)if(u[n]===e){(u=u.slice()).splice(n,1),this._callbacks[c]=u;break}}else delete this._callbacks[c];return this},Mt.prototype._trigger=function(){var s,a=1<=arguments.length?bt.call(arguments,0):[];return setTimeout((s=this,function(){var t,e,i,n,r,o=a.shift();if(o===Mt.RELAY&&(o=a[0].type),i=s.hasOwnProperty("_callbacks")&&(null!=(n=s._callbacks)?n[o]:void 0)){for(r=[],t=0,e=i.length;t<e&&!1!==i[t].apply(s,a);t++)r.push(void 0);return r}})),!0},yt=function(t,e){return Mt.prototype[t]=,wt={clearContent:"cx",setContent:"sc",addContent:"ac",changeContent:"cc",removeContent:"rc",setSkin:"ss",changeSkin:"cs",addSheet:"asht",addCss:"acss"})yt(vt,wt[vt]);Mt.apiReady=function(t){return null!=(t=Tt[t.d])?t._apiReady():void 0},Mt.connect=function(t){return null!=(t=Tt[t.d])?t._ready():void 0},Mt.event=function(t){return Tt[t.id]._trigger(t.e,t.d)},Mt.updateSize=function(t){return Tt[t.id].updateSize(t.d.width,t.d.height)},Mt.pausePlayingEmbed=function(t){var e=t.id,i="currentPlayingWidgeticEmbedId",t=localStorage[i];return t&&t!==e&&Tt[t]&&Tt[t].api.pause(),localStorage[i]=e},Mt.publicMethodsAndEvents=function(t){return Tt[t.id].publicMethods=t.d.publicMethods,Tt[t.id].publicEvents=t.d.publicEvents},Mt.publicApiCallReply=function(t){var e=t.id,i=t.d,n=t.err;return n?((t=new Error(n.message)).stack=n.stack,At[e].reject(t)):At[e].resolve(i),delete At[e]},Mt.RELAY="r",Mt.EMBED_MODE=1,Mt.EDIT_MODE=2;var A=Mt,zt=[].indexOf||qt=[].slice,It=c,jt=S.queue,Pt=u,Rt=a,Nt=at,Ut={},Ht=["click","dblclick","mousedown","mousemove","mouseup","mouseenter","mouseleave","mouseover","mouseout","wheel","keydown","keyup","keypress"],Lt=function(t,e,i){var n;return this.composition=e,this._queue=jt(1),this._queue.defer((n=this,function(t){return n._startQueue=t})),this._callbacks={},Pt.subscribe("api/token/update",this._updateToken.bind(this)),this._updateToken(),i&&this.setEditorOptions(i),this.composition.ready.then(this._compReady.bind(this)),Ut[this.composition.id]=this,e=It.editor+"#"+this.composition.id,null!=i&&i.asPopup?(this.frame=t)?this.frame.location.href=e:this.frame=window.open(e,Rt(),"height="+(i.h||565)+",width="+(i.w||490)):(this._iframe=document.createElement("iframe"),this._iframe.setAttribute("class","widgetic-editor"),this._iframe.setAttribute("name",Rt()),t.appendChild(this._iframe),this._iframe.setAttribute("src",e),this.frame=this._iframe.contentWindow),this};Lt.prototype.close=function(){return Ut[this.composition.id]=null,this._iframe?this._iframe.parentNode.removeChild(this._iframe):this.frame.close(),this},Lt.prototype.goTo=function(t){return this._sendMessage({t:"step",d:t}),this},Lt.prototype.setEditorOptions=function(t){return this.options=null!=t?t:this.options,this._sendMessage({t:"opts",d:this.options}),this},Lt.prototype.addContent=function(t){return this._sendMessage({t:"cont",d:t}),this},Lt.prototype.save=Lt.prototype.on=function(t,e){var i,n,r,o,s;for(0<=zt.call(Ht,t)&&this._sendMessage({t:"ree",d:t}),n=t.split(" "),i=this.hasOwnProperty("_callbacks")&&this._callbacks,r=0,o=n.length;r<o;r++)i[s=n[r]]||(i[s]=[]),i[s].push(e);return this},Lt.prototype.off=function(t,e){var i,n,r,o,s,a,u,c,l;if(0===arguments.length)return this._callbacks={},this;if(!t)return this;for(r=0,s=(i=t.split(" ")).length;r<s;r++)if(c=i[r],u=null!=(l=this._callbacks)?l[c]:void 0)if(e){for(n=o=0,a=u.length;o<a;n=++o)if(u[n]===e){(u=u.slice()).splice(n,1),this._callbacks[c]=u;break}}else delete this._callbacks[c];return this},Lt.prototype._trigger=function(){var t,e,i,n,r=1<=arguments.length?qt.call(arguments,0):[],o=r.shift();if(o===Lt.RELAY&&(o=r[0].type),i=this.hasOwnProperty("_callbacks")&&(null!=(n=this._callbacks)?n[o]:void 0)){for(t=0,e=i.length;t<e&&!1!==i[t].apply(this,r);t++);return!0}},Lt.prototype._sendMessage=function(e){return this._queue.defer((i=this,function(t){return i.frame.postMessage(JSON.stringify(e),"*"),t()}));var i},Lt.prototype._ready=Lt.prototype._compReady=function(){return this.compReady=!0,this._sendMessage({t:"ready"})},Lt.prototype._updateToken=function(){return this._sendMessage({t:"token",d:Nt.accessToken()})},Lt.prototype._onConnect=function(){var e;return this.ready&&this.compReady&&this._queue.defer((e=this,),this._ready()},Lt.connect=function(t){return Ut[t.id]._onConnect()},Lt.event=function(t){return Ut[t.id]._trigger(t.e,t.d)},Lt.RELAY="er";var Wt,Dt,Bt,Jt,Qt,Y=Lt,Gt=[].slice;function Vt(t){var e,i,n;this.id=Bt(),this.name=t.name||this.id,this._queue=Qt(1),this._queue.defer((n=this,),Jt.subscribe("api/token/update",this._updateToken.bind(this)),this._updateToken(),t&&this.setOptions(t),i=Dt.plugin,(this.frame=(null!=(e=t.holder)?e.document:void 0)||t.holder)?(this._iframe=document.createElement("iframe"),this._iframe.setAttribute("class","wdtc-plugin"),this._iframe.setAttribute("name",this.name),this.frame.appendChild(this._iframe),this._iframe.setAttribute("src",i),this.frame=this._iframe.contentWindow):this.frame=window.open(i,this.name,"height="+(t.h||760)+",width="+(t.w||1270))}Dt=c,Qt=S.queue,Jt=u,Bt=a,Wt=at,Vt.instances={},Vt.connect=function(t){t=Vt.instances[t.id];return t._updateToken(),t._ready(),t._sendMessage({t:"ready"})},Vt.event=Vt.create=function(t){t=new this(t=null==t?{}:t);return this.instances[t.id]=t},Vt.prototype.close=function(){return this.constructor.instances[this.id]=null,delete this.constructor.instances[this.id],this._iframe?this._iframe.parentNode.removeChild(this._iframe):this.frame.close(),this},Vt.prototype.setOptions=function(t){return this.options=null!=t?t:this.options,this._sendMessage({t:"opts",d:this.options}),this},Vt.prototype.addEditorContent=function(t){return this._sendMessage({t:"econt",d:t}),this},Vt.prototype.on=function(t,e){for(var i,n=t.split(" "),r=this.hasOwnProperty("_callbacks")&&(this._callbacks||(this._callbacks={})),o=0,s=n.length;o<s;o++)r[i=n[o]]||(r[i]=[]),r[i].push(e);return this},Vt.prototype.off=function(t,e){var i,n,r,o,s,a,u,c,l;if(0===arguments.length)return this._callbacks={},this;if(!t)return this;for(r=0,s=(i=t.split(" ")).length;r<s;r++)if(c=i[r],u=null!=(l=this._callbacks)?l[c]:void 0)if(e){for(n=o=0,a=u.length;o<a;n=++o)if(u[n]===e){(u=u.slice()).splice(n,1),this._callbacks[c]=u;break}}else delete this._callbacks[c];return this},Vt.prototype._trigger=function(){var t,e,i,n=1<=arguments.length?Gt.call(arguments,0):[],r=n.shift(),o=this.hasOwnProperty("_callbacks")&&(null!=(i=this._callbacks)?i[r]:void 0);if(o){for(t=0,e=o.length;t<e&&!1!==o[t].apply(this,n);t++);return!0}},Vt.prototype._sendMessage=function(e){return this._queue.defer((i=this,function(t){return i.frame.postMessage(JSON.stringify(e),"*"),t()}));var i},Vt.prototype._ready=Vt.prototype._updateToken=function(){return this._sendMessage({t:"token",d:Wt.accessToken()})};ar Kt,Xt,Yt,Ft,Zt,te,ee,ie,ne,re,oe,se,ae,ue,ce,le,de,he,n=Vt;function pe(t){var e,i,n;for(e in this._prepare=$t(this._prepare,this),this._saveInfo=$t(this._saveInfo,this),this.position=$t(this.position,this),this._hide=$t(this._hide,this),this.resize=$t(this.resize,this),this.options=t,i=this.options)n=i[e],this[e]=n;null==this.anchor&&(this.anchor=document.body),this.anchor.jquery&&(this.anchor=this.anchor[0]),this.dimensions={width:0,height:0},this.info={},this.visible=!1,this._callbacks={}}Yt=O,se=a,ie=h,Zt=c,ne=function(t){var e,i,n,r,o=arguments;for(null==t&&(t={}),i=0,r=arguments.length;i<r;i++)if(e=o[i])for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},te=function(t,e){var i;return null==e&&(e=10),i=null,function(){return clearTimeout(i),i=setTimeout(t,e)}},re=ae=function(t,e,i){var n=this.document.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("charset","utf-8"),n.setAttribute("href",t),i&&(ie.on(n,"load",i),ie.on(n,"error",i)),e.appendChild(n)},ue=function(t,e,i,n){for(var r,o,s=[].concat(e=null==e?[]:e,i=null==i?[]:i),a=s.length,u=!(r=0),c=function(t){if("load"===t.type||-1<i.indexOf(t.target.href)?++r:console.log(new Error('Popup stylesheet "'+t.target.href+'" did not load!')),r===a||!u)return n()},l=0,d=s.length;l<d;l++)o=s[l],ae.call(this,o,t,c);return setTimeout(n,5e3),setTimeout(5e3)},ee={},ce=function(t){var e=se();return{promise:(ee[e]=Yt.defer()).promise,message:{id:e,t:"p",d:t}}},Xt=function(t,e){return ee[t.id].resolve(e)},de=function(t,e){return(e="string"==typeof(e=null==e?window.parent:e)?window.frames[e]:e).postMessage(JSON.stringify(t),"*")},le=function(t,e,i){return t.d.original=t.d.event,t.d.event="done",t.d.response=i,de(t,e.source)},he=oe=function(e){try{return e.innerHTML}catch(t){return e.styleSheet.cssText}},Ft=function(t){return t?{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}:{}},Kt=function(t){return{popup:Ft(t.getBoundingClientRect()),widget:Ft(null!=(t=t._parentFrame)?t.getBoundingClientRect():void 0)}},pe.styles={popup:"body { display:inline-block; margin:0; width:auto !important; height:auto !important; overflow:hidden; background:transparent !important } #loader { width: 250px; height: 250px; border: 1px solid #d5d5d5; background: white; } .sk-three-bounce { margin: 115px auto; width: 40px; text-align: center; } .sk-three-bounce .sk-child { width: 10px; height: 10px; background-color: #262424; border-radius: 100%; display: inline-block; -webkit-animation: sk-three-bounce 1.4s ease-in-out 0s infinite both; animation: sk-three-bounce 1.4s ease-in-out 0s infinite both; } .sk-three-bounce .sk-bounce1 { -webkit-animation-delay: -0.32s; animation-delay: -0.32s; } .sk-three-bounce .sk-bounce2 { -webkit-animation-delay: -0.16s; animation-delay: -0.16s; } @-webkit-keyframes sk-three-bounce { 0%, 80%, 100% { -webkit-transform: scale(0); transform: scale(0); } 40% { -webkit-transform: scale(1); transform: scale(1); } } @keyframes sk-three-bounce { 0%, 80%, 100% { -webkit-transform: scale(0); transform: scale(0); } 40% { -webkit-transform: scale(1); transform: scale(1); } }",overlay:"html, body { width:100%; height:100%; } body { display:block; margin:0; overflow:hidden; }"},pe.popups={},pe.callbacks={},pe.iframes={},pe.new=function(t){var e=(t=null==t?{}:t).name||se();return t.name=e,this.popups[e]=new pe(t),this.popups[e].init()},pe.receiver=function(t,e){var i=t.d.event;return"function"==typeof pe[i="on"+he(i)]?pe[i](t,e):void 0},pe.onCreate=function(t,e){var i,n,r=t.d.name,o=document.createElement("iframe");return o.setAttribute("class","wdgtc-popup"),o.setAttribute("name",r),o.isOverlay="overlay"===t.d.type,o.setAttribute("style","border: 0; width: 0; height: 0; position: absolute; top: 0; left: -10000px; z-index: 2147483646;"),o.isOverlay&&(o.style.zIndex=2147483647),o.isVisible=!1,o._parent=e.source,o._parentFrame=document.getElementsByName(t.d.source)[0],document.querySelectorAll("body")[0].appendChild(o),o.setAttribute("src",Zt.popup+"&name="+encodeURIComponent(r)+"&event=ready"),(this.iframes[r]=o).doPosition=(i=this,function(){var t;return i.doPosition(o,null),t={t:"p",d:{event:"reposition",name:r,response:{info:Kt(o)}}},de(t,o._parent)}),o.doPosition=te(o.doPosition),ie.on(window,"resize",o.doPosition),ie.on(window,"scroll",o.doPosition),this.callbacks[r]=(n=this,},pe.onReady=function(t){var e;return"function"==typeof(e=this.callbacks)[t=t.d.name]?e[t]():void 0},pe.onDone=function(t,e){var i=t.d.original;return this[i="on"+he(i)+"Done"]?this[i](t,e):Xt(t,t.d.response)},pe.onCreateDone=function(t,e){var i,n=e.source;if(!(i=n.frames[t.d.name]))for(;n!==e.source.top;){n=n.parent;try{if(i=n.frames[t.d.name])break}catch(t){}}return Xt(t,i)},pe.onReposition=function(t,e){return this.popups[t.d.name].info=t.d.response.info,this.popups[t.d.name].trigger("reposition")},pe.onManage=function(t,e){var i=t.d.name,n=this.iframes[i],i="do"+he(t.d.do),i=("function"==typeof this[i]?this[i](n,t.d):void 0)||{};return i.info=Kt(n),le(t,e,i)},pe.doResize=function(t,e){return t.isOverlay||(t.style.width=e.dimensions.width+"px",t.style.height=e.dimensions.height+"px",e.dimensions.shadow&&(t.style.boxShadow=e.dimensions.shadow),e.dimensions.borderRadius&&(t.style.borderRadius=e.dimensions.borderRadius)),e.dimensions},pe.doHide=function(t,e){t.isVisible=!1,t.style.display="none"},pe.doShow=function(t,e){t.isVisible=!0,t.style.display="block",t.style.position=t.isOverlay?"fixed":"absolute"},pe.doPosition=function(t,e){var i,n,r,o,s;if(t.isVisible||(t.style.display="none"),t.isOverlay)return t.style.position="fixed",t.style.width="100%",t.style.height="100%",t.style.top=0,t.style.left=0,t.style.bottom=0,void(t.style.right=0);if(e)t.positionOptions=e;else{if(!t.positionOptions)return;e=t.positionOptions}n=e.offset,r=e.dimensions,i=ne({},e.anchor),(e=document.querySelector('iframe[name="'+i.parent+'"]'))&&(s=(o=re(e)).top,o=o.left,i.top+=s,i.left+=o),o=window.innerWidth+window.scrollX-(i.left+r.width+n.rightMargin+n.leftOffset),o=Math.max(0,i.left+n.leftOffset+Math.min(0,o)),(s=0<=(s=window.innerHeight+window.scrollY-(i.top+i.height+r.height+n.bottomMargin))?i.top+i.height+n.topOffset:i.top-r.height-n.bottomMargin)<0&&(s=i.top+i.height+n.topOffset),t.style.top=s+"px",t.style.left=o+"px"},pe.doRelease=function(t,e){t.parentNode.removeChild(t),ie.off(window,"resize",t.doPosition),ie.off(window,"scroll",t.doPosition),e=e.name,delete this.iframes[e]},pe.hideAll=function(){var i,n;return function(){var t=pe.iframes,e=[];for(i in t)n=t[i],e.push(n);return e}().filter(function(t){return t.isVisible}).map(function(t){return pe.doHide(t),de({t:"p",d:{event:"hide",name:t.name}},t._parent)})},pe.onHide=function(t,e){return this.popups[t.d.name]._hide()},pe.prototype.type="popup",pe.prototype.topOffset=0,pe.prototype.leftOffset=0,pe.prototype.rightMargin=15,pe.prototype.bottomMargin=15,pe.prototype.copyStyles=!0,pe.prototype.on=function(t,e){return this._callbacks[t]=this._callbacks[t]||[],this._callbacks[t].push(e)},pe.prototype.off=function(t){return t?this._callbacks[t]=[]:this._callbacks={}},pe.prototype.trigger=function(t,e){var i,n,r,o,s;if(this._callbacks[t]){for(s=[],n=0,r=(o=this._callbacks[t]).length;n<r;n++)i=o[n],s.push(i(e));return s}},pe.prototype.init=function(){return this._sendEvent("create",{type:this.type,source:window.name}).then(this._prepare)},pe.prototype.append=function(t){return t.jquery&&(t=t[0]),this.content.innerHTML="",this.content.appendChild(t),this.resize()},pe.prototype.style=function(e,t){null==t&&(t=!1),this.styleElement||(this.styleElement=document.createElement("style"),this.head.appendChild(this.styleElement)),null==this.preservedStyles&&(this.preservedStyles="");try{this.styleElement.innerHTML=this.preservedStyles+e}catch(t){this.styleElement.styleSheet.cssText=this.preservedStyles+e}return t&&(this.preservedStyles+=e),(t=Yt.defer()).resolve(this.preservedStyles+e),t.promise},pe.prototype.resize=function(){return this.dimensions={width:this.document.body.offsetWidth,height:this.document.body.offsetHeight},this._sendEvent("manage",{do:"resize",dimensions:this.dimensions}).then(this._saveInfo)},pe.prototype.hide=function(){return this._sendEvent("manage",{do:"hide"}).then(this._saveInfo).then(this._hide)},pe.prototype._hide=pe.prototype.show=function(){return this.position().then((e=this,function(){return e._sendEvent("manage",{do:"show"})})).then(this._saveInfo).then((t=this,);var t,e},pe.prototype.position=function(){var t={topOffset:this.topOffset,leftOffset:this.leftOffset,bottomMargin:this.bottomMargin,rightMargin:this.rightMargin},e=re(this.anchor);return e.parent=window.name,e.width=parseInt(this.anchor.offsetWidth,10),e.height=parseInt(this.anchor.offsetHeight,10),this._sendEvent("manage",{do:"position",anchor:e,dimensions:this.dimensions,offset:t}).then(this._saveInfo)},pe.prototype.release=function(){var t,e=Yt.defer(),i=e.promise;return this.document.location.reload(),setTimeout(e.resolve,1e3),i.then((t=this,)},pe.prototype._saveInfo=pe.prototype._sendEvent=function(t,e){var t={name:this.name,event:t};return t=ne(t,e),t=(e=ce(t)).promise,e=e.message,de(e,this.targetWindow),t},pe.prototype._prepare=function(t){var e;return this.window=t,this.document=this.window.document,this.head=this.document.head,this.loader=document.createElement("div"),this.loader.id="loader",this.loader.style.display="none",this.loader.innerHTML='<div class="sk-three-bounce"> <div class="sk-child sk-bounce1"></div> <div class="sk-child sk-bounce2"></div> <div class="sk-child sk-bounce3"></div> </div>',this.document.body.appendChild(this.loader),this.content=document.createElement("div"),this.document.body.appendChild(this.content),t='<style type="text/css">'+pe.styles[this.type]+"</style>",this.head.insertAdjacentHTML("beforeend",t),t=document.querySelectorAll("[data-widget-style=true]"),t=(t=Array.prototype.map.call(t,oe)).reduce(""),this.style(t,!0),t=document.querySelectorAll('link[rel="stylesheet"]'),t=Array.prototype.map.call(t,function(t){return t.href}),(this.css||t.length)&&(this.loader.style.display="block",this.content.style.display="none",ue.call(this,this.head,this.css,t,(e=this,function(){return e.loader.style.display="none",e.content.style.display="block",e.resize().then(function(){return e.position()}).then(}))),this},r=pe,ie.on(window.document,"click",r.hideAll);e=r;var fe=function(t){return 0===(t=1<arguments.length?Array.from(arguments).map(.filter(function(t){return t.length}).join("-"):t.trim()).length?"":1===t.length?t.toLowerCase():/^[a-z0-9]+$/.test(t)?t:(t=t!==t.toLowerCase()?function(t){for(var e=!1,i=!1,n=!1,r=0;r<t.length;r++){var o=t[r];e&&/[a-zA-Z]/.test(o)&&o.toUpperCase()===o?(t=t.substr(0,r)+"-"+t.substr(r),n=i,i=!(e=!1),r++):i&&n&&/[a-zA-Z]/.test(o)&&o.toLowerCase()===o?(t=t.substr(0,r-1)+"-"+t.substr(r-1),n=i,e=!(i=!1)):(e=o.toLowerCase()===o,n=i,i=o.toUpperCase()===o)}return t}(t):t).replace(/^[_.\- ]+/,"").toLowerCase().replace(/[_.\- ]+(\w|$)/g,};ction ve(t){this.destroy=me,this.fire("destroy"),this.set=this.get=me,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function we(t,e){t._handlers=Object.create(null),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}ar s={destroy:ve,get:fire:function(t,e){var i=t in this._handlers&&this._handlers[t].slice();if(i)for(var n=0;n<i.length;n+=1){var r=i[n];r.__calling||(r.__calling=!0,r.call(this,e),r.__calling=!1)}},observe:function(e,t,i){var n=t.bind(this);return i&&!1===i.init||n(this.get()[e],void 0),this.on(i&&i.defer?"update":"state",function(t){t.changed[e]&&n(t.current[e],t.previous&&t.previous[e])})},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var i=this._handlers[t]||(this._handlers[t]=[]);return i.push(e),{cancel:function(){var t=i.indexOf(e);~t&&i.splice(t,1)}}},set:function(t){this._set(ge({},t)),this.root._lock||(this.root._lock=!0,_e(this.root._beforecreate),_e(this.root._oncreate),_e(this.root._aftercreate),this.root._lock=!1)},teardown:ve,_recompute:me,_set:function(t){var e,i=this._state,n={},r=!1;for(e in t)this._differs(t[e],i[e])&&(n[e]=r=!0);r&&(this._state=ge(ge({},i),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:i}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:i})))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_unmount:_differs:,be={};r S=Object.freeze({add:ke,remove:Ee,find:function(t){if(null==t)return be;if(!be[t])throw new Error("Embed "+t+" does not exist.");return be[t]}}),Se={left:"",center:"margin: 0 auto",right:"margin: 0 0 0 auto"},xe={fixed:function(t,e,i){return{wrapStyle:Se[i]+";max-width: "+t.value+t.unit+"; min-width: "+t.value+t.unit+";",holdStyle:"height: "+e.value+e.unit+"; padding-top: 0;"}},"allow-scale-down":function(t,e,i){e=100*e.value/t.value;return{wrapStyle:Se[i]+";max-width: "+t.value+t.unit+";",holdStyle:"padding-top: "+e+"%;"}},"fixed-height":function(t,e,i){return{wrapStyle:Se[i]+";",holdStyle:"height: "+e.value+e.unit+"; padding-top: 0;"}},"fill-width":function(t,e,i){t=100*e.value/t.value;return{wrapStyle:Se[i]+";",holdStyle:"padding-top: "+t+"%;"}},fill:function(t,e,i){return{wrapStyle:"height:100%;",holdStyle:"height:100%;min-height:"+e.value+e.unit+";"}}},Ce=Te=function(t,e){var i=e.map(function(t){return t.id});return t.filter(};r={_createEmbed:function(t){var e=this;this.composition&&this.composition.close(),this.composition=Widgetic.UI.composition(this.refs.holder,t),this.composition.on("reload",function(t){e.composition.changeSkin(e.get("theme")),e.get("content").map(function(t){return e.composition.addContent(t)})}),this.api=this.composition.api,this.subscribe=this.composition.on.bind(this.composition),this.composition._iframe.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;max-width:100%;min-height:100%;min-width:100%")}};function Ae(){this.composition&&this.composition.close(),Ee(this.get("self"))}function Oe(n,t){var r,o,i;return{c:h:function(){o.className="wdgtc-holder",o.style.cssText=t.holdStyle,r.className="wdgtc-wrap",r.style.cssText=i=t.wrapStyle+"height:"+t.wrapHeight},m:function(t,e){var i;i=r,e=e,t.insertBefore(i,e),e=o,r.appendChild(e),n.refs.holder=o,n.refs.wrap=r},p:function(t,e){t.holdStyle&&(o.style.cssText=e.holdStyle),(t.wrapStyle||t.wrapHeight)&&i!==(i=e.wrapStyle+"height:"+e.wrapHeight)&&(r.style.cssText=i)},u:d:function(){n.refs.holder===o&&(n.refs.holder=null),n.refs.wrap===r&&(n.refs.wrap=null)}}}function Me(t){we(this,t),this.refs={},this._state=ge({resize:"fill-width",theme:{},content:[],width:500,height:300},t.data),this._recompute({width:1,height:1,widthUnit:1,heightUnit:1,autoscale:1,resize:1,inline:1,widthConfig:1,heightConfig:1,align:1,inlineStyle:1,styles:1,id:1,compositionid:1,widget:1,widget_id:1,widgetid:1,ref:1,wref:1,theme:1,content:1,adaptive:1,branding:1},this._state),this._handlers.destroy=[Ae];var e=this;t.root||(this._oncreate=[]),this._fragment=Oe(this,this._state),this.root._oncreate.push(function(){!function(){var r=this;ke(this.get("self"),this),this.observe("config",this._createEmbed),this.observe("wrapStyle",function(){return r.set({wrapHeight:r.refs.wrap.style.height})}),this.observe("theme",function(t){return r.composition.changeSkin(t)}),this.observe("content",function(t,e){var i,n;e&&(i=Ce(t,e),n=Ce(e,t),e=Te(t,e),i.map(function(t){return r.composition.addContent(t)}),n.map(function(t){return r.composition.removeContent(t)}),e.map()})}.call(e),e.fire("update",{changed:{width:1,height:1,widthUnit:1,heightUnit:1,autoscale:1,resize:1,inline:1,widthConfig:1,heightConfig:1,align:1,inlineStyle:1,styles:1,id:1,compositionid:1,widget:1,widget_id:1,widgetid:1,ref:1,wref:1,theme:1,content:1,adaptive:1,branding:1,wrapStyle:1,wrapHeight:1,holdStyle:1},current:e._state})}),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),_e(this._oncreate))}ge(Me.prototype,s),ge(Me.prototype,r),Me.prototype._recompute=function(t,e){var i,n,r,o,s,a,u,c,l,d,h,p,f;t.width&&this._differs(e.widthUnit,e.widthUnit=(i=e.width,String(i).replace(parseInt(i),"")||"px"))&&(t.widthUnit=!0),t.height&&this._differs(e.heightUnit,e.heightUnit=(n=e.height,String(n).replace(parseInt(n),"")||"px"))&&(t.heightUnit=!0),(t.width||t.widthUnit)&&this._differs(e.widthConfig,e.widthConfig=(r=e.width,o=e.widthUnit,{value:parseInt(r),unit:o}))&&(t.widthConfig=!0),(t.height||t.heightUnit)&&this._differs(e.heightConfig,e.heightConfig=(s=e.height,a=e.heightUnit,{value:parseInt(s),unit:a}))&&(t.heightConfig=!0),(t.autoscale||t.resize)&&this._differs(e.actualAutoscale,e.actualAutoscale=(u=e.autoscale,e.resize,u))&&(t.actualAutoscale=!0),t.inline&&this._differs(e.inlineStyle,e.inlineStyle=e.inline?"display:inline-block;vertical-align:middle;":"")&&(t.inlineStyle=!0),(t.resize||t.widthConfig||t.heightConfig||t.align)&&this._differs(e.styles,e.styles=(c=e.resize,l=e.widthConfig,d=e.heightConfig,h=e.align,xe[c](l,d,h)))&&(t.styles=!0),(t.inlineStyle||t.styles)&&this._differs(e.wrapStyle,e.wrapStyle="position:relative;width:100%;overflow:hidden;"+e.inlineStyle+e.styles.wrapStyle)&&(t.wrapStyle=!0),t.styles&&this._differs(e.holdStyle,e.holdStyle="position:relative; padding: 0;"+e.styles.holdStyle)&&(t.holdStyle=!0),(t.id||t.compositionid||t.widget||t.widget_id||t.widgetid||t.ref||t.wref||t.theme||t.content||t.autoscale||t.adaptive||t.branding)&&this._differs(e.config,e.config=(n=e.id,r=e.compositionid,o=e.widget,s=e.widget_id,p=e.widgetid,a=e.ref,u=e.wref,c=e.theme,l=e.content,d=e.autoscale,h=e.adaptive,f=e.branding,(f={autoscale:d,adaptive:h,branding:f}).skin=c,0<l.length?f.content=l:l.demo=!0,(a||u)&&(f.ref=a||u),n||r?f.composition=n||r:f.widget_id=o||s||p,f))&&(t.config=!0),(t.id||t.ref||t.wref)&&this._differs(e.self,e.self=(p=e.id,f=e.ref,e=e.wref,f||e||p||T()))&&(t.self=!0)};var r=Object.freeze({default:Me}),ze=["compositionid","id","ref","wref","widget_id","widgetid","widget","theme","inline","autoscale","resize","width","height","adaptive","align","branding"];function qe(t){return Array.prototype.slice.call(t).reduce({})}function Ie(n){var t=ze.map(function(t){var e,i=n.getAttribute(t);if(null!==i)return(e={})[t]=i,e}).filter(.reduce(;return{target:n,data:Object.assign(t,{theme:function(t){var e,i=qe(t.attributes),n={};for(e in i)ze.includes(e)||(n[fe(e.replace("data-",""))]=i[e]);i.theme&&(n.id=i.theme);return n}(n),content:(t=n,Array.prototype.slice.call(t.children).map(.map(function(t,e){var i,n=t.attrs,t=t.content,r={id:e+1,order:e+1,metadata:{service:"declarative"}};for(i in n)r.metadata[fe(i.replace("data-",""))]=n[i];return t&&(r.metadata.content=t.trim()),r}))})}}function je(t){t.target.__wdgtcparsed=!0,t.target.innerHTML="",new Me(t)}function Pe(t){return t=t=void 0===t?document:t,Array.prototype.slice.call(t.querySelectorAll("*")).filter(function(t){return 0===t.tagName.indexOf("WIDGETIC-")||"WIDGETIC"===t.tagName||Object.values(t.attributes).map(.includes("widgetic")}).filter(.map(Ie)}var Re=Object.freeze({extractDeclarativeEmbeds:Pe,parseDeclarativeEmbeds:).parseDeclarativeEmbeds,Ne=g,Ue=u,He="allow-scale-down",Le=function(t){var e,i=t.children[0],n=t.parentNode;return t.removeChild(i),(e=document.createDocumentFragment()).insertBefore(i,null),n.insertBefore(e,t),n.removeChild(t),i},We=De=function(t,e,i,n){e=e?"display:inline-block;vertical-align:middle;":"";return n?'<div style="width:100%;'+e+(i.wrapStyle||"")+'"><div style="position:relative; padding: 0;'+(i.holdStyle||"")+'">$$$</div></div>':'<div class="wdgtc-wrap" data-wdgtc-id="'+t+'" style="width:100%;'+e+(i.wrapStyle||"")+'"> <div class="wdgtc-holder" style="position:relative; padding: 0;'+(i.holdStyle||"")+'"> </div> </div>'},Be={fixed:function(t,e){return{wrapStyle:"max-width: "+t+"px; min-width: "+t+"px;",holdStyle:"padding-top: "+100*e/t+"%;"}},"allow-scale-down":function(t,e){return{wrapStyle:"max-width: "+t+"px;",holdStyle:"padding-top: "+100*e/t+"%;"}},"fixed-height":function(t,e){return{holdStyle:"height: "+e+"px; padding-top: 0;"}},"fill-width":function(t,e){return{holdStyle:"padding-top: "+100*e/t+"%;"}},fill:function(t,e){return{wrapStyle:"height: 100%",holdStyle:"height: 100%;min-height:"+e+"px"}}},Je=function(){for(var n,r,o,s,t,a,u=/\[widgetic\-([-\w]+) *((?: [-\w]+(?:=.*?)?)+)\]/gi,c=/\s+/g,l=function(t,e,i){return'<a href="https://widgetic.com/widget/'+e+'/" class="widgetic-composition" '+i.trim().replace(c," ").split(" ").map(.join(" ")+"></a>"},e=document.querySelectorAll("body, body *"),i=[],d=0,h=e.length;d<h;d++)"HEAD"!==(t=(s=e[d]).nodeName)&&"META"!==t&&"LINK"!==t&&"SCRIPT"!==t&&"TITLE"!==t&&(n=s.childNodes,i.push(function(){for(var t=[],e=0,i=n.length;e<i;e++)3===(r=n[e]).nodeType&&(a=r.nodeValue,o=a.replace(u,l),a!==o?((a=document.createElement("div")).innerHTML=o,t.push(s.replaceChild(a,r))):t.push(void 0));return t}()));return i},Qe=function(){return Ne(function(){var t,e,i,n;for(Re(),Je(),i=0,n=(t=document.querySelectorAll(".widgetic-composition")).length;i<n;i++)e=t[i],Ke(e);Ue.publish("parse")})};Qe.wrapperHtml=function(t,e){var i;return null==e&&(e=!1),i=Be[t.resize](t.width,t.height),De(t.composition,t.inline,i,e)},Qe.iframeStyle="position:absolute;top:0;left:0;width:0;height:0;max-width:100%;min-height:100%;min-width:100%";var Ge,Ve,$e,Ke=function(t){var e,i={composition:t.getAttribute("data-id")||t.getAttribute("data-compositionid"),width:t.getAttribute("data-width")||300,height:t.getAttribute("data-height")||200,resize:t.getAttribute("data-resize")||He,brand_pos:t.getAttribute("data-brand")||"bottom-right",branding:t.hasAttribute("data-branding"),inline:t.hasAttribute("data-inline"),autoscale:t.getAttribute("data-autoscale")||"on"};if(i.composition)return Be[i.resize]||(i.resize=He),t.insertAdjacentHTML("afterbegin",Qe.wrapperHtml(i)),t=Le(t),t=We(t),(e=new Widgetic.UI.composition(t,i.composition,i))._iframe.setAttribute("style",Qe.iframeStyle),e._iframe.style.visibility="hidden",e._iframe.onload=,Xe=A,Ye=Y,c=c,Fe=x,Ze=at,ti=K,ei=j,ii=h,ni=g,ri={Composition:Xe,Editor:Ye,composition:function(){return function(t,e,i){i.prototype=t.prototype;i=new i,e=t.apply(i,e);return Object(e)===e?e:i}(Xe,arguments,function(){})},editor:function(){return function(t,e,i){i.prototype=t.prototype;i=new i,e=t.apply(i,e);return Object(e)===e?e:i}(Ye,arguments,},parse:Qe,popup:e,plugin:n,Embed:r&&Me},r=O,oi=window,si=!1,ai={a:Ze.request,e:Ze.response,i:Fe.connect,o:ti.connect,d:A.apiReady,u:A.connect,ce:A.event,pr:A.publicApiCallReply,w:Y.connect,ee:Y.event,p:ri.popup.receiver,r:ti.retry,v:ri.plugin.connect,ve:ri.plugin.event,su:A.updateSize,startPlaying:A.pausePlayingEmbed,widgetPublicMethodsAndEvents:A.publicMethodsAndEvents},ui=c.lo.replace(/(http|https)\:/,"")+"|"+c.domain.replace(/(http|https)\:/,"");ui=ui.replace(/\./g,"\\."),ui=new RegExp(ui),window.widgeticReceiver=$e=function(t){var e,i;if(ui.test(t.origin)){e=t.data;try{if("string"!=typeof e)return;e=JSON.parse(e)}catch(t){return}try{return"function"==typeof ai[i=e.t]?ai[i](e,t):void 0}catch(t){}}},c=function(){return"function"==typeof oi.WidgeticAsyncInit&&oi.WidgeticAsyncInit(),ii.on(oi,"message",$e),ei(oi.location.href),Fe.style(),setTimeout(ri.parse)},Ve=r.defer(),Ge=function(){var t,e;return si||(e=this,t=function(){return(e.root=new Fe).createProxy().then(.fail(,si=!0},document.getElementsByTagName("body")[0]?t():ni(t)),Ve.promise},c.prototype.init=function(t,e){return Ge.call(this),t&&e&&ti.setAuthOptions(t,e),this},c.prototype.api=function(){var t=arguments;return Ge.call(this).then(function(){return Ze.apply(this,t)})},(c.prototype.auth=.register=function(){return ti.register.apply(this,arguments)},c.prototype.auth.status=function(){return Ze.getStatus.apply(this,arguments)},c.prototype.auth.token=function(){return Ze.accessToken.apply(this,arguments)},c.prototype.auth.disconnect=c.prototype.JSON=JSON,c.prototype.Queue=Ze.queue,c.prototype.Aye=O,c.prototype.Event=ii,c.prototype.GUID=a,c.prototype.pubsub=u,c.prototype.UI=ri,c.prototype.find=S.find,c.prototype.EVENTS={COMPOSITION_SAVED:"save",SKIN_SAVED:"skin-save"},c.prototype.version="1.7.10",c.prototype.parse=ei.parse,c.prototype.uxhr=p,c.prototype.debug={timestamp:;var ci=c;return t(function(t){var e=ci;window.Widgetic?t.exports=window.Widgetic:(e=new e,t.exports=e,window.Blogvio=e)})}();