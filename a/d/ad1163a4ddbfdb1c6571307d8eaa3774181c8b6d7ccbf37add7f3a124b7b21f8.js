(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[50,11],{1124:function(t,e,n){},1125:function(t,e,n){},196:function(t,e,n){"use strict";n.r(e);var r=n(9),a=n(10),c=n(18),i=n(17),o=n(19),s=(n(1123),n(1124),n(1125),n(0)),u=n.n(s),d=n(62),f=n(53),l=n(323),p=n(920),h=n(39),v=n.n(h),b=n(27),y=n(1126),m=n.n(y),g=n(361),O=n(399),_=n(585),j=n(290),k=32,w=37,E=39,I={file:{attributes:{preload:"auto"},forceAudio:!0}},S=P=0,x=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(c.a)(this,Object(i.a)(e).call(this,t))).\u03bfnkeyd\u03bfwn=function(t){if(!(t&&t.target&&/input|textarea/gi.test(t.target.tagName))&&!n.isFirstPlay){var e=function(){window.event?window.event.cancelBubble=!0:t.stopPropagation(),t.returnValue=!1,t.preventDefault()};switch(window.event?t.keyCode:t.which){case k:n.props.player.setPlay?n.props.dispatch(g.l(!1)):n.props.dispatch(g.l(!0)),e();break;case w:n.props.dispatch(g.e()),e();break;case E:n.props.dispatch(g.f()),e()}}},n.playFromBegin=function(){n.setState({startPlay:!0}),n.seekTo(0),n.startPlay()},n.setCurrentTime=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.setState({startPlay:!1});try{if(n.props.location.hash.includes("play_ep")){var e=v.a.parse(n.props.location.hash).play_ep;n.setState({startPlay:!0}),n.seekTo(isNaN(e)?0:Number(e)),n.startPlay()}else n.props.location.query._t?(n.setState({startPlay:!0}),n.seekTo(Object(j.v)(n.props.location.query._t)),n.startPlay()):n.props.uid&&t?(n.startPlayTimer=setTimeout((,5e3),g.c&&g.c(n.props.uid,t,n.props.transfer).then((function(e){var r=t.duration||0;(r/=1e3)-e<10&&e/r>.95&&(e=0),n.state.startPlay||(clearTimeout(n.startPlayTimer),n.setState({startPlay:!0}),n.seekTo(e),n.startPlay())})).catch((function(){n.playFromBegin()}))):n.playFromBegin()}catch(r){n.playFromBegin()}},n.startPlay=function(){n.isFirstPlay&&(n.isFirstPlay=!1),n.props.dispatch(g.l(!0))},n.setPlayer=function(t){n.player=t},n.onSeek=function(){n.seekOnPlay>=0&&(n.seekOnPlay=-1)},n.onReady=function(){n.props.dispatch(g.a())},n.onStart=n.onPlay=function(){n.seekOnPlay>=0&&n.seekTo(n.seekOnPlay),n.props.dispatch(g.i())},n.onPause=function(){n.onSeek(),n.props.dispatch(g.h())},n.onProgress=function(t){var e=t.playedSeconds;isNaN(n.duration)||n.props.dispatch(_.a({duration:n.duration,currentTime:e})),n.props.trackPlayItem.playItem&&n.props.trackPlayItem.playItem.eid!==P&&n.player.currentTime>2&&(P=n.props.trackPlayItem.playItem.eid,n.props.dispatch(Object(O.e)()))},n.onDuration=n.onBuffer=function(){n.props.dispatch(g.g())},n.onBufferEnd=function(){n.props.dispatch(g.a())},n.onEnded=n.replay=function(){n.props.dispatch(g.l(!1)),n.props.dispatch(g.l(!0)),window.removeEventListener("click",n.replay,!1)},n.onError=function(t){t instanceof DOMException&&"NotAllowedError"===t.name&&window.addEventListener("click",n.replay,!1)},n.isStarted=!1,n.isFirstPlay=!0,n.seekTimes=0,n.seekOnPlay=-1,n.duration=0,n}return Object(o.a)(e,t),Object(a.a)(e,[{key:"componentDidMount",value:function(){var t=this;this.props.trackPlayItem.playItem&&this.props.trackPlayItem.playItem.episode_id&&this.setCurrentTime(this.props.trackPlayItem.playItem),document.onkeydown=},{key:"componentWillUnmount",value:function(){var t=this.props,e=t.uid,n=t.transfer,r=t.currentTime,a=t.trackPlayItem;e&&g.j&&g.j({uid:e,transfer:n,episode:a.playItem,time:r}),document.onkeydown=void 0}},{key:"componentDidUpdate",value:function(t){if(this.props.player.currentTime>=0&&-1===t.player.currentTime&&(this.seekTo(this.props.player.currentTime),this.props.dispatch(g.b(-1))),this.isFirstPlay||this.props.player.setPlay==t.player.setPlay||(this.props.player.setPlay?this.props.dispatch(g.i()):this.props.dispatch(g.h())),t.currentTime>this.props.currentTime&&S("set time back to:",t.currentTime,this.props.currentTime),this.props.trackPlayItem.playItem.eid!==t.trackPlayItem.playItem.eid){S("switch to new episode:",this.props.trackPlayItem.playItem.cid),t.uid&&g.j&&g.j({uid:t.uid,transfer:t.transfer,episode:t.trackPlayItem.playItem,time:t.currentTime});var e=this.props.trackPlayItem.playItem;t.dispatch(_.a({duration:(e.duration||0)/1e3,currentTime:0})),this.isStarted=!1,this.setCurrentTime(this.props.trackPlayItem.playItem)}}},{key:"seekTo",value:function(t){this.seekOnPlay===t?this.seekTimes+=1:this.seekTimes=0,this.seekTimes<3&&(this.seekOnPlay=t,this.isStarted&&this.player.seekTo(t))}},{key:"render",value:function(){var t=this.props,e=t.urls,n=void 0===e?[]:e,r=t.player,a=this.props,c=a.autoplay,i=a.loop,o={};return i&&"0"!=i&&"false"!=c&&(o.loop=!0),u.a.createElement(m.a,Object.assign({config:I,width:0,height:0,controls:!1,progressInterval:1e3,light:!0,volume:r.volume,playbackRate:Number(r.playbackRate),ref:this.setPlayer,playing:r.setPlay,url:n,onReady:this.onReady,onStart:this.onStart,onPlay:this.onPlay,onProgress:this.onProgress,onDuration:this.onDuration,onPause:this.onPause,onBuffer:this.onBuffer,onBufferEnd:this.onBufferEnd,onSeek:this.onSeek,onEnded:this.onEnded,onError:this.onError},o))}}]),e}(s.Component),T=Object(b.g)(Object(f.b)((function(t){var e=t.player,n=t.user,r=t.playerTime,a=t.trackPlayItem,c=t.platForm;return{uid:n.userInfo&&n.userInfo.uid?n.userInfo.uid:"",transfer:n.userInfo.transfer||0,platForm:c,player:e,duration:r.time.duration,currentTime:r.time.currentTime,trackPlayItem:a}}))(x)),N=n(538),L=n(847),A=n(363),R=n(304),D=n(305),C=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(c.a)(this,Object(i.a)(e).call(this,t))).resize=function(){clearTimeout(n.timer),n.timer=setTimeout((function(){document.documentElement.clientWidth<=720?document.documentElement.style.fontSize=document.documentElement.clientWidth/7.2+"px":document.documentElement.style.fontSize="100px"}),150)},"undefined"!==typeof window&&Object(D.g)(),n}return Object(o.a)(e,t),Object(a.a)(e,[{key:"componentDidUpdate",value:function(t){t.platForm.isPhone!==this.props.platForm.isPhone&&this.props.location.reload()}},{key:"componentDidMount",value:function(){if(Object(j.s)(window.location.hostname)){if(this.props.dispatch(Object(D.k)(this.props.location.query)),sessionStorage.defaultQuery){var t=Object.assign(JSON.parse(sessionStorage.defaultQuery),this.props.location.query);this.props.dispatch(Object(L.a)({query:t})),sessionStorage.defaultQuery=JSON.stringify(t)}else sessionStorage.defaultQuery=JSON.stringify(this.props.location.query),this.props.dispatch(Object(L.a)({query:this.props.location.query}));"undefined"!==typeof sessionStorage&&this.props.location.query.utm_source&&(sessionStorage.utm_source=this.props.location.query.utm_source),this.props.location.query.self_f?sessionStorage.self_f=this.props.location.query.self_f:sessionStorage.self_f&&this.props.dispatch(Object(L.a)({from:sessionStorage.self_f}))}Object(N.b)(window,"resize",this.resize),Object(A.b)("/app/castbox/static/css/animate.css","animatecss")}},{key:"componentWillUnmount",value:,{key:"render",value:function(){return u.a.createElement("div",{className:"castboxGlobal"},u.a.createElement(T,{autoplay:!0,preload:"preload",key:"golbalAudio",urls:this.props.trackPlayItem.playItem.urls}),Object(d.a)(this.props.route.routes),u.a.createElement(l.b,Object.assign({transition:l.a},R.g)),u.a.createElement(p.a,null))}}]),e}(s.Component);e.default=Object(f.b)(()(C)},296:function(t,e,n){"use strict";n.r(e),n.d(e,"getShortUrl",(function(){return y})),n.d(e,"checkPwaIsOpen",(function(){return m})),n.d(e,"getSummaryInfo",(function(){return g})),n.d(e,"getIndexInfo",(function(){return w})),n.d(e,"getIndexInfoByNodeApi",(function(){return E})),n.d(e,"getTopList",(function(){return I})),n.d(e,"getGenreListV2",(function(){return S})),n.d(e,"getChList",(function(){return P})),n.d(e,"getEpisodeList",(function(){return x})),n.d(e,"getNetworkChannels",(function(){return T})),n.d(e,"getTrendList",(function(){return N})),n.d(e,"getNetList",(function(){return L})),n.d(e,"getNetworkList",(function(){return A})),n.d(e,"getGenreInfo",(function(){return R})),n.d(e,"getAllCategories",(function(){return D})),n.d(e,"getKeywords",(function(){return C})),n.d(e,"searchChannel",(function(){return U})),n.d(e,"searchEpisode",(function(){return B})),n.d(e,"getTrackListByCid",(function(){return F})),n.d(e,"getTrackListByCidAndEids",(function(){return M})),n.d(e,"getFeedInfoByCid",(function(){return Y})),n.d(e,"getEpOverviewByCid",(function(){return q})),n.d(e,"getEpOverviewAndEpsByCid",(function(){return G})),n.d(e,"findTrackByEid",(function(){return H})),n.d(e,"self_getTrackList",(function(){return K})),n.d(e,"self_getFeedInfo",(function(){return W})),n.d(e,"self_findTrack",(function(){return z})),n.d(e,"stat_play",(function(){return V})),n.d(e,"setLike",(function(){return Q})),n.d(e,"getSuggestion",(function(){return X})),n.d(e,"getSuggestionWithAbort",(function(){return $})),n.d(e,"getNewEpisodeIds",(function(){return Z})),n.d(e,"getEpisodesByids",(function(){return tt})),n.d(e,"getChannelByids",(function(){return et})),n.d(e,"getCid",(function(){return nt})),n.d(e,"getEid",(function(){return rt})),n.d(e,"get_cid_eid",(function(){return at}));var r=n(300),a=n(11),c=n(283),i=n.n(c),o=n(284),s=n(289),u=n(290),d=n(307),f=n(16),l=n(9),p=new function t(){var e=this;Object(l.a)(this,t),this.cache={},this.topics={},this.sub=function(t,n){if(e.topics[t]||(e.topics[t]={sub_id:0,funcs:[]}),e.topics[t].sub_id>500)throw new Error("get sub limit");var r=(++e.topics[t].sub_id).toString();return e.topics[t].funcs.push({token:r,func:n}),t+"#"+r},this.pub=function(t,n){if(!e.topics[t])return!0;for(var r=e.topics[t].funcs,a=r?r.length:0;a--;)r[a].func(null,{_key:t,data:n});e.topics[t]=null},this.cleanPub=function(t,n){if(!e.topics[t])return!0;var r=e.topics[t].funcs,a=r.length;if(r&&a>0)for(var c=0;c<a;c++)r[c].func(new Error("cleanPub by: "+n.message));e.topics[t]=null},this.unSub=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!t)return!1;var n=t.split("#"),a=Object(r.a)(n,2),c=a[0],i=a[1];if(Object.keys(e.topics).includes(c)){var o=e.topics[c].funcs,s=o.length;if(o&&s>0)for(var u=0;u<s;u++)if(o[u].token===i)return e.topics[c].funcs.splice(u,1),t}return!1},this.fetch=function(){var t=Object(o.a)(i.a.mark((function t(n){var r,a,c,o,s,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.key,a=n.timeout,c=n.p,o=n.args,s=n.wait,u=void 0===s||s,t.abrupt("return",new Promise((function(t,n){var i=Date.now(),s=e.cache[r];if(s&&s.t>i&&s.data)t(s.data);else if(s&&s.fetching)if(s.data)t(s.data);else if(u&&Date.now()-s.fetch_t<6e4)try{e.sub(r,(function(e,a){e?n(e):r!==a._key?n(new Error("Unexpected Key: good: ".concat(r,", bad: ").concat(a._key))):t(a.data)}))}catch(l){n(l)}else n(new Error("TimeOut"));else{var d=Date.now();e.cache[r]={t:d+a,fetching:!0,fetch_t:d,p_pool_num:0},c.apply(void 0,Object(f.a)(o)).then((function(n){e.cache[r].data=n,e.cache[r].fetching=!1,t(n),e.pub(r,n)}),(function(t){e.cache[r].fetching=!1,e.cache[r].fetch_t=0,e.cleanPub(r,t),n(t)}))}})));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=n(39),v=n.n(h),b=["banner","block","list","playlist"];function y(t){var e={headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})};return Object(s.d)("".concat(s.f,"/url/gen"),e)}unction g(){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(i.a.mark((function t(){var e,n,r,c,o=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"us",n=o.length>1&&void 0!==o[1]?o[1]:"home",r="".concat(s.h,"/data/summary/uri?country=").concat(e,"&web=1&ls=6&bw=6&bypassauth=1"),"audiobooks"===n&&(r="".concat(s.h,"/data/summary/audiobook?country=").concat(e,"&web=1&ls=6&bw=6&bypassauth=1")),t.next=6,Object(s.g)(r);case 6:return(c=(c=t.sent).filter(())&&c.length>0&&(c=c.map((function(t){if(t.list&&t.list.length>0){var e=t.list.map((function(t){return Object(a.a)({},t,Object(d.b)(t.actions&&t.actions.view?t.actions.view:t.uri))}));return Object(a.a)({},t,{list:e})}return t}))),t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var _=function(){var t=Object(o.a)(i.a.mark((function t(e){var n,r,a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C(e);case 2:return n=t.sent,r=n.slice(0,24).map((function(t){return U({keyword:t,limit:1,country:e,suggest:0}).then(()})),t.next=6,Promise.all(r);case 6:return a=t.sent,c=[],t.abrupt("return",a.filter((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return!(!t||c.includes(t.cid))&&(c.push(t.cid),!0)})).slice(0,15));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=Object(o.a)(i.a.mark((function t(e){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",p.fetch({key:"hot_search_".concat(e),timeout:6e5,p:_,wait:!1,args:[e]}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(){var t=Object(o.a)(i.a.mark((function t(e){var n,r,c,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(s.h,"/data/summary/uri?country=").concat(e,"&web=1&bl=3&bw=5"),t.next=3,Object(s.g)(n);case 3:return r=(r=t.sent).filter((),c={listObj:{},categories:[],category_id:0,chList:[]},t.next=8,j(e).catch((function(){return[]}));case 8:return o=t.sent,u=o.length>=5,r&&r.length>0&&(u&&(c.categories.push({name:"Top Search",id:"hot_search"}),c.listObj.hot_search=o,c.chList=o,c.category_id="hot_search"),r.forEach((function(t,e){if(t.list&&t.list.length>0){if(e>5)return;c.categories.push({name:t.name,id:t.id});var n=t.list.map((function(t){return Object(a.a)({},t,Object(d.b)(t.actions&&t.actions.view?t.actions.view:t.uri))}));c.listObj[t.id]=n,u||0!==e||(c.chList=n,c.category_id=t.id)}}))),t.abrupt("return",c);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"us";return p.fetch({key:"index_".concat(t),timeout:12e4,p:k,args:[t]})}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"us";return Object(s.g)("/api/data/summary/uri?country=".concat(t))}function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"us",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,r="".concat(s.h,"/data/top_channels?country=").concat(t,"&skip=").concat(e,"&limit=").concat(n,"&web=1");return Object(s.g)(r)}function S(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"us",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:60,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"home",c="".concat(s.h,"/data/top_channels/v2?category_id=").concat(t,"&country=").concat(e,"&skip=").concat(n,"&limit=").concat(r,"&web=1");return"audiobooks"===a&&(c="".concat(s.h,"/data/audiobook/top?category_id=").concat(t,"&country=").concat(e,"&skip=").concat(n,"&limit=").concat(r,"&web=1")),Object(s.g)(c)}function P(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"us",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:60,a="".concat(s.h,"/data/cl/list?cl_id=").concat(t,"&country=").concat(e,"&skip=").concat(n,"&limit=").concat(r,"&web=1");return Object(s.g)(a).then((function(t){return{list:t.channels,category:{id:t.cl_id,name:t.title,create_time:t.create_time,description:t.description}}}))}function x(t){var e=t.category_id,n=t.country,r=void 0===n?"us":n,a=t.skip,c=void 0===a?0:a,i=t.limit,o=void 0===i?60:i;if(!e)return Promise.reject("can't find category_id");var u="".concat(s.h,"/data/epl/list?epl_id=").concat(e,"&country=").concat(r,"&skip=").concat(c,"&limit=").concat(o,"&web=1");return Object(s.g)(u)}function T(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"us",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:60,a="".concat(s.h,"/data/network/channels?network_id=").concat(t,"&country=").concat(e,"&skip=").concat(n,"&limit=").concat(r,"&web=1");return Object(s.g)(a)}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"us",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,r="".concat(s.f,"/trending?country=").concat(t,"&skip=").concat(isNaN(e)?0:e,"&limit=").concat(isNaN(n)?60:n,"&web=1");return Object(s.k)(r)}function L(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"us",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,r="".concat(s.f,"/publisher?country=").concat(t,"&skip=").concat(e,"&limit=").concat(n,"&web=1&network=1");return Object(s.k)(r)}function A(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"us",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,r="".concat(s.h,"/data/network/list?country=").concat(t,"&skip=").concat(e,"&limit=").concat(n,"&web=1&network=1");return Object(s.k)(r)}function R(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"us",e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?"sub_categories":void 0,r={country:t,include_fields:n},a="".concat(s.h,"/data/categories?").concat(v.a.stringify(r));return Object(s.g)(a).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e={};return t.forEach((function(t){t.sub_categories&&t.sub_categories.length>0&&(e[t.id]={subs:t.sub_categories},t.sub_categories.forEach((function(n){e[n.id]={top_id:t.id,top:t,subs:t.sub_categories}})))})),{list:t,subCategories:e}}))}function D(){var t="".concat(s.h,"/data/categories?all=1&web=1");return Object(s.g)(t)}function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"us",e="".concat(s.h,"/data/top_keywords?country=").concat(t);return Object(s.g)(e,1)}function U(t){var e=t.keyword,n=t.country,r=void 0===n?"us":n,a=t.order,c=void 0===a?"relevance":a,i=t.skip,o=void 0===i?0:i,u=t.limit,d=void 0===u?60:u,f=t.suggest,l=void 0===f?1:f;if(!e)return Promise.reject("can't find keyword");var p="".concat(s.h,"/data/search_channel/v2?keyword=").concat(encodeURIComponent(e),"&country=").concat(r,"&skip=").concat(o,"&limit=").concat(d,"&order=").concat(c,"&suggest_open=").concat(l,"&no-cache=1");return Object(s.g)(p).then(()}function B(t){var e=t.keyword,n=t.country,r=void 0===n?"us":n,a=t.order,c=void 0===a?"relevance":a,i=t.skip,o=void 0===i?0:i,u=t.limit,d=void 0===u?60:u;if(!e)return Promise.reject("can't find keyword");var f="".concat(s.h,"/data/search_episode?hits_per_episode=3&keyword=").concat(encodeURIComponent(e),"&country=").concat(r,"&skip=").concat(o,"&limit=").concat(d,"&order=").concat(c);return Object(s.g)(f).catch(()}function F(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!t)return Promise.reject("can't find cid");var a="".concat(s.h,"/data/episode_list/v2?cid=").concat(t,"&skip=").concat(e,"&limit=").concat(n,"&ascending=").concat(r);return Object(s.c)(a)}function M(t,e,n){if(!t)return Promise.reject("can't find cid");var r={cid:t,eids:e.join(","),raw:n},a="".concat(s.h,"/data/episode_list/v2?").concat(v.a.stringify(r));return Object(s.c)(a).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.episode_list||[]}))}function Y(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t)return Promise.reject("can't find cid");var n="".concat(s.h,"/data/channel/v3?cid=").concat(t).concat(1===e?"&raw=1":"");return Object(s.g)(n)}function q(t){return t?Object(s.g)("".concat(s.h,"/data/episodes/overview?cids=").concat(t)).then((function(t){var e=Object(r.a)(t,1)[0],n=void 0===e?{}:e;return n&&n.episode_list&&(n.eids=n.episode_list.map((function(t){return t.eid})),delete n.episode_list),n})):Promise.reject("can't find cid")}unction J(){return(J=Object(o.a)(i.a.mark((function t(e,n,r,a){var c,o,s,u,d,f;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",Promise.reject("can't find cid"));case 2:return c=Date.now(),t.next=5,q(e);case 5:if(o=t.sent,s=Date.now(),u=[],!o.eids){t.next=14;break}if(!((d=o.eids.slice(n,n+r))&&d.length>0)){t.next=14;break}return t.next=13,M(e,d);case 13:u=t.sent;case 14:return f=Date.now(),a&&f-c>2500&&(a.warn("ep-longT: eps1 ".concat(s-c)),a.warn("ep-longT: eps2 ".concat(f-s))),t.abrupt("return",{overview:o,eps:u});case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function H(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!t)return Promise.reject("can't find eid");var n="".concat(s.h,"/data/episode/v4?eid=").concat(t).concat(1===e?"&raw=1":"");return Object(s.g)(n)}function K(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!t)return Promise.reject("can't find eid");var a="".concat(s.h,"/account/my/episode/list/v2?cid=").concat(t,"&skip=").concat(e,"&limit=").concat(n,"&ascending=").concat(r,"&raw=1");return Object(s.c)(a)}function W(t){if(!t)return Promise.reject("can't find cid");var e="".concat(s.h,"/account/my/channel/get/v2?cid=").concat(t,"&raw=1");return Object(s.c)(e)}function z(t){if(!t)return Promise.reject("can't find eid");var e="".concat(s.h,"/account/my/episode/get/v2?eid=").concat(t,"&raw=1");return Object(s.c)(e)}function V(t,e){if(!e||!t)return Promise.reject("can't find country or eid");var n="".concat(s.h,"/stat/episode/play/v2?eid=").concat(t,"&country=").concat(e);return Object(s.g)(n)}function Q(t,e){if(!t)return Promise.reject("can't find episode_id");var n="".concat(s.h,"/account/episode/like?episode_id=").concat(t,"&enable=").concat(e?1:0);return Object(s.c)(n)}function X(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(!t)return Promise.reject("can't find keyword");var n="".concat(s.h,"/data/keywords/suggestion?keyword=").concat(encodeURIComponent(t),"&limit=").concat(e);return Object(s.c)(n)}function $(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;if(!t)return Promise.reject("can't find keyword");var n=new AbortController,r=n.signal,a="".concat(s.h,"/data/keywords/suggestion?keyword=").concat(t,"&limit=").concat(e),c=Object(s.c)(a,{signal:r});return{abort:fetch:c}}function Z(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="".concat(s.h,"/data/episode/new/ids?cid=").concat(t).concat(e?"&eid="+e:"");return Object(s.c)(n)}function tt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="".concat(s.h,"/data/episodes/v2?eids=").concat(t.join(",")).concat(e?"&include_fields=".concat(e):"");return Object(s.c)(n)}function et(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e="".concat(s.h,"/data/channels/v2?cids=").concat(t.join(","));return Object(s.c)(e)}function nt(t){var e="".concat(s.h,"/data/transform/shortid/channel?channel_id=").concat(t);return Object(s.c)(e)}function rt(t){var e="".concat(s.h,"/data/transform/shortid/episode?episode_id=").concat(t);return Object(s.c)(e)}function at(t,e){var n=Number(Object(u.f)(t)),a=Number(Object(u.f)(e));return isNaN(n)||isNaN(a)?isNaN(n)&&!isNaN(a)?nt(Object(u.e)(t)).then(():!isNaN(n)&&isNaN(a)?Y(n).then((function(t){return rt("".concat(Object(u.e)(t.channel_id),"-").concat(Object(u.e)(e))).then(()})):Promise.all([nt(Object(u.e)(t)),rt("".concat(Object(u.e)(t),"-").concat(Object(u.e)(e)))]).then(():Promise.resolve([n,a])}},303:function(t,e,n){"use strict";n.d(e,"q",(function(){return u})),n.d(e,"i",(function(){return f})),n.d(e,"f",(function(){return p})),n.d(e,"m",(function(){return v})),n.d(e,"a",(function(){return y})),n.d(e,"l",(function(){return g})),n.d(e,"d",(function(){return _})),n.d(e,"j",(function(){return k})),n.d(e,"k",(function(){return E})),n.d(e,"h",(function(){return S})),n.d(e,"r",(function(){return P})),n.d(e,"c",(function(){return T})),n.d(e,"n",(function(){return L})),n.d(e,"o",(function(){return R})),n.d(e,"p",(function(){return C})),n.d(e,"e",(function(){return B})),n.d(e,"t",(function(){return M})),n.d(e,"b",(function(){return q})),n.d(e,"u",(function(){return J})),n.d(e,"g",(function(){return K})),n.d(e,"s",(function(){return z}));var r=n(16),a=n(11),c=n(283),i=n.n(c),o=n(284),s=n(289);function u(){var t="".concat(s.n,"/my/tables");return Object(s.c)(t)}var d=function(t,e){return e.create_at-t.create_at};function f(){return l.apply(this,arguments)}function l(){return(l=Object(o.a)(i.a.mark((function t(){var e,n,r,a,c,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat(s.n,"/my/table/records?tables=sub_ch&t=").concat(Date.now()),t.next=3,Object(s.c)(e);case 3:if(n=t.sent,r=n.table_dict.sub_ch,!((a=void 0===r?[]:r).length<1)){t.next=8;break}return t.abrupt("return",{cids:[],subObj:{}});case 8:return c=a.reduce((function(t,e){return t[e.cid]=e,t}),{}),o=a.sort(d).map((function(t){return t.cid})),t.abrupt("return",{cids:o,subObj:c});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function p(t){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(i.a.mark((function t(e){var n,r,a,c,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.cid,r=e.isDel,a=e.create_at,n){t.next=3;break}return t.abrupt("return",Promise.reject("Cid is required!"));case 3:return c=Date.now(),o={table:"sub_ch",cid:String(n),update_at:c,create_at:a||c,operation:r?2:1},t.next=7,Object(s.d)("".concat(s.n,"/my/records"),{body:JSON.stringify({record_list:[o]})});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(i.a.mark((function t(){var e,n,r,a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat(s.n,"/my/table/records?tables=ep_his&t=").concat(Date.now()),t.next=3,Object(s.c)(e);case 3:if(n=t.sent,r=n.table_dict.ep_his,!((a=void 0===r?[]:r).length<1)){t.next=9;break}return t.abrupt("return",{eids:[]});case 9:return c=a.sort(d).map((function(t){return t.eid})).slice(0,200),t.abrupt("return",{eids:c});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function y(t){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(i.a.mark((function t(e){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.eid&&e.cid){t.next=2;break}return t.abrupt("return",Promise.reject("please check your episode info!"));case 2:return n=Date.now(),r={table:"ep_his",eid:String(e.eid),cid:String(e.cid),create_at:n,update_at:n,operation:1},t.next=6,Object(s.d)("".concat(s.n,"/my/records"),{body:JSON.stringify({record_list:[r]})});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function g(){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(i.a.mark((function t(){var e,n,r,a,c,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat(s.n,"/my/table/records?tables=fav_ep&t=").concat(Date.now()),t.next=3,Object(s.c)(e);case 3:if(n=t.sent,r=n.table_dict.fav_ep,!((a=void 0===r?[]:r).length<1)){t.next=8;break}return t.abrupt("return",{eids:[],favObj:{}});case 8:return c=a.reduce((function(t,e){return t[e.fid]=e,t}),{}),o=a.filter(().sort(d).map((function(t){return t.fid})),t.abrupt("return",{eids:o,favObj:c});case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function _(t){return j.apply(this,arguments)}function j(){return(j=Object(o.a)(i.a.mark((function t(e){var n,r,a,c,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.eid,r=e.cid,a=e.isDel,c=e.create_at,n){t.next=3;break}return t.abrupt("return",Promise.reject("eid is required!"));case 3:return o=Date.now(),u={table:"fav_ep",type:1,fid:String(n),exid:String(r||""),sort_ts_at:o,sort_ts:o,update_at:o,create_at:c||o,operation:a?2:1},t.next=7,Object(s.d)("".concat(s.n,"/my/records"),{body:JSON.stringify({record_list:[u]})});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return w.apply(this,arguments)}function w(){return(w=Object(o.a)(i.a.mark((function t(){var e,n,r,a=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:[],n="".concat(s.n,"/my/records/query?t=").concat(Date.now()),r=e.map((),t.next=5,Object(s.d)(n,{body:JSON.stringify({record_list:r})}).then((function(t){var e=t.data.record_list;return(void 0===e?[]:e).reduce((,{})}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function E(t){return I.apply(this,arguments)}function I(){return(I=Object(o.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(s.n,"/my/records/query"),t.next=3,Object(s.d)(n,{body:JSON.stringify({record_list:[{table:"ep_st",eid:String(e)}]})}).then((function(t){var e=t.data.record_list;return(void 0===e?[]:e)[0]||{}}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var S={not_play:0,new:1,uncompleted:2,completed:3};function P(t){return x.apply(this,arguments)}function x(){return(x=Object(o.a)(i.a.mark((function t(e){var n,r,a,c,o,u,d,f,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.episode,r=void 0===n?{}:n,a=e.time,c=e.status,o=void 0===c?2:c,u=e.oldRow,d=void 0===u?{}:u,r.eid&&r.cid){t.next=3;break}return t.abrupt("return",Promise.reject("please check recordsPlayStatus episode info!"));case 3:return f=Date.now(),l={table:"ep_st",eid:String(r.eid),cid:String(r.cid),pt:a,pt_at:f,status:d.status<3?Number(o):d.status||2,create_at:d.create_at||f,status_at:f,update_at:f,operation:1},t.next=7,Object(s.d)("".concat(s.n,"/my/records"),{body:JSON.stringify({record_list:[l]})});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function T(t){return N.apply(this,arguments)}function N(){return(N=Object(o.a)(i.a.mark((function t(e){var n,r,a,c,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.uid,r=e.episode,a=e.status,0,!n||!r.eid){t.next=18;break}return c=Math.floor(0),t.prev=5,t.next=8,P({uid:n,episode:r,time:c,status:a,oldRow:{status:2}});case 8:return o=t.sent,t.abrupt("return",o);case 13:return t.prev=13,t.t0=t.catch(5),t.abrupt("return",{code:1,err:t.t0});case 16:t.next=19;break;case 18:return t.abrupt("return",{code:1,err:"Episode error or UID error"});case 19:case"end":return t.stop()}}),t,null,[[5,13]])})))).apply(this,arguments)}function L(){return A.apply(this,arguments)}function A(){return(A=Object(o.a)(i.a.mark((function t(){var e,n,r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e="".concat(s.n,"/my/table/records?tables=new_ep&t=").concat(Date.now()),t.next=3,Object(s.c)(e);case 3:if(n=t.sent,r=n.table_dict.new_ep,!((a=void 0===r?[]:r).length<1)){t.next=8;break}return t.abrupt("return",[]);case 8:return t.abrupt("return",a.sort(d).map(());case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t){return D.apply(this,arguments)}function D(){return(D=Object(o.a)(i.a.mark((function t(e){var n,r,a,c,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(s.n,"/my/table/records?tables=ep_pl&t=").concat(Date.now()).concat(e?"&no-cache=1":""),t.next=3,Object(s.c)(n);case 3:if(r=t.sent,a=r.table_dict.ep_pl,!((c=void 0===a?[]:a).length<1)){t.next=8;break}return t.abrupt("return",{});case 8:return o={},c.sort(().forEach((),t.abrupt("return",o);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(t){return U.apply(this,arguments)}function U(){return(U=Object(o.a)(i.a.mark((function t(e){var n,r,a,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(s.n,"/my/table/records?tables=pl_se").concat(e?"&no-cache=1&t="+Date.now():""),t.next=3,Object(s.c)(n);case 3:if(r=t.sent,a=r.table_dict.pl_se,!((c=void 0===a?[]:a).length<1)){t.next=8;break}return t.abrupt("return",[]);case 8:return t.abrupt("return",c);case 9:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(t){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(i.a.mark((function t(e){var n,r,a,c,o,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.eid,r=e.cid,a=e.name,c=e.isDel,n&&a&&r){t.next=3;break}return t.abrupt("return",Promise.reject("eid, cid and name is required!"));case 3:return o=Date.now(),u={table:"ep_pl",cid:String(r),eid:String(n),name:String(a),update_at:o,create_at:o,sort_ts:o,sort_ts_at:o,operation:c?2:1},t.next=7,Object(s.d)("".concat(s.n,"/my/records"),{body:JSON.stringify({record_list:[u]})});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}unction Y(){return(Y=Object(o.a)(i.a.mark((function t(){var e,n,r,c=arguments;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!((e=c.length>0&&void 0!==c[0]?c[0]:[]).length<1)){t.next=3;break}return t.abrupt("return",Promise.reject("episode list is required!"));case 3:return n=Date.now(),r=e.map((function(t){return Object(a.a)({},t,{table:"ep_pl",cid:String(t.cid),eid:String(t.eid),update_at:n,sort_ts_at:n,operation:1})})),t.next=7,Object(s.d)("".concat(s.n,"/my/records"),{body:JSON.stringify({record_list:r})});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function q(t){return G.apply(this,arguments)}function G(){return(G=Object(o.a)(i.a.mark((function t(e){var n,r,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.name){t.next=3;break}return t.abrupt("return",Promise.reject("Name is required!"));case 3:return r=Date.now(),a={table:"pl_se",name:String(n),update_at:r,create_at:r,sort_ts:r,sort_ts_at:r,operation:1},t.next=7,Object(s.d)("".concat(s.n,"/my/records"),{body:JSON.stringify({record_list:[a]})});case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function J(t){return H.apply(this,arguments)}function H(){return(H=Object(o.a)(i.a.mark((function t(e){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.length<1)){t.next=2;break}return t.abrupt("return",Promise.reject("playlistSettings is required!"));case 2:return n=Date.now(),r=e.map((function(t){return Object(a.a)({},t,{table:"pl_se",update_at:n,sort_ts_at:n,operation:1})})),t.next=6,Object(s.d)("".concat(s.n,"/my/records"),{body:JSON.stringify({record_list:r})});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function K(t){return W.apply(this,arguments)}function W(){return(W=Object(o.a)(i.a.mark((function t(e){var n,c,o,u,d,f;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.name,c=e.episodes,o=void 0===c?[]:c,n){t.next=3;break}return t.abrupt("return",Promise.reject("Name is required!"));case 3:return u=Date.now(),d={table:"pl_se",name:String(n),update_at:u,create_at:u,sort_ts:u,sort_ts_at:u,operation:2},f=o.map((function(t){return Object(a.a)({},t,{operation:2,table:"ep_pl"})})),t.next=9,Object(s.d)("".concat(s.n,"/my/records"),{body:JSON.stringify({record_list:[d].concat(Object(r.a)(f))})});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}unction V(){return(V=Object(o.a)(i.a.mark((function t(e){var n,r,c,o,u,d,f,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.name,r=e.new_name,c=e.episodes,o=void 0===c?[]:c,u=e.record,n&&r){t.next=3;break}return t.abrupt("return",Promise.reject("Name or new name is required!"));case 3:return d=Date.now(),f=[{table:"pl_se",name:String(n),update_at:d,create_at:d,sort_ts:d,sort_ts_at:d,operation:2},Object(a.a)({},u,{table:"pl_se",name:String(r),operation:1})],l=[],o.forEach((function(t){l.push(Object(a.a)({},t,{operation:1,name:r,table:"ep_pl"})),l.push(Object(a.a)({},t,{operation:2,name:n,table:"ep_pl"}))})),t.next=9,Object(s.d)("".concat(s.n,"/my/records"),{body:JSON.stringify({record_list:f.concat(l)})});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}},305:function(t,e,n){"use strict";n.d(e,"n",(function(){return h})),n.d(e,"h",(function(){return v})),n.d(e,"g",(function(){return b})),n.d(e,"k",(function(){return y})),n.d(e,"m",(function(){return g})),n.d(e,"l",(function(){return O})),n.d(e,"e",(function(){return _})),n.d(e,"b",(function(){return j})),n.d(e,"f",(function(){return k})),n.d(e,"d",(function(){return w})),n.d(e,"c",(function(){return E})),n.d(e,"a",(function(){return S})),n.d(e,"o",(function(){return x})),n.d(e,"p",(function(){return T})),n.d(e,"i",(function(){return N})),n.d(e,"j",(function(){return L}));var r=n(16),a=n(283),c=n.n(a),i=n(284),o=n(11),s=n(322),u=n(303),d=n(289),f=n(296),l=n(324),p=n(22);function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return"undefined"!==typeof window&&"USER_SETINFO"===e&&t&&(localStorage.userInfo=JSON.stringify(t),localStorage.access_token=t.access_token||""),{data:t,type:e}}function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=s.b(Object(o.a)({},JSON.parse(localStorage.userInfo),t));return Object(d.m)(e),localStorage.userInfo=JSON.stringify(e),{data:e,type:"USER_SETINFO"}}function b(t){if("undefined"!=typeof localStorage&&localStorage&&localStorage.userInfo){var e={};try{e=JSON.parse(localStorage.userInfo)}catch(n){delete localStorage.userInfo}e.uid&&Object(d.m)(e,t)}else Object(d.m)({},t)}function y(t){return function(e){if("undefined"!=typeof localStorage&&localStorage&&localStorage.userInfo){var n={};try{n=JSON.parse(localStorage.userInfo)}catch(r){delete localStorage.userInfo}if(!n.uid)return Object(d.m)({},t),void function(t){t(h({},"USER_EPISODES")),t(h({},"USER_CHANNELS")),t(h({},"USER_EXT_CHANNELS")),localStorage&&delete localStorage.userInfo&&delete localStorage.access_token}(e);e(m(n,t))}else Object(d.m)({},t)}}function m(t,e){return function(){var n=Object(i.a)(c.a.mark((function n(r){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Object(d.m)(t,e),n.prev=1,n.next=4,u.q().then((function(e){var n=e.transfer,r=e.table_list;t.transfer=n,t.table_list_len=r.length}));case 4:r(h(t,"USER_SETINFO")),r((function(t){t((function(t){t(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0;return function(a){return u.i(r).then(function(){var r=Object(i.a)(c.a.mark((function r(i){var o,s,u,d;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=i.cids,s=void 0===o?[]:o,u=i.subObj,d=[],0!==t.length&&t.forEach((function(t){s.findIndex((function(e){return Number(e)===t.cid}))>-1&&d.push(t)})),a(h({list:d,cids:s,subObj:u,fetchOver:n,skip:e},"USER_SUBINFO"));case 4:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()).catch(console.error)}}())})),t((function(t){t(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(r){return u.l().then((function(a){var c=a.eids,i=void 0===c?[]:c,o=a.favObj,s=[];0!==t.length&&t.forEach((function(t){i.findIndex(()>-1&&s.push(t)})),r(h({eids:i,list:s,favObj:o,fetchOver:n||i&&0===i.length,skip:e},"USER_LIKEDINFO"))})).catch(console.error)}}())})),t(I())})),r(Object(l.b)()),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),n.t0&&401===n.t0.status&&r(g());case 13:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(t){return n.apply(this,arguments)}}()}function g(){return function(){var t=Object(i.a)(c.a.mark((function t(e,n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,Object(l.a)(),t.next=4,s.f(n().user.userInfo.uid).catch(console.error);case 4:e(h({},"USER_EPISODES")),e(h({},"USER_CHANNELS")),e(h({},"USER_EXT_CHANNELS")),Object(d.m)({}),e(h({},"USER_SETINFO")),delete localStorage.userInfo,delete localStorage.access_token,t.next=15;break;case 13:t.prev=13,t.t0=t.catch(0);case 15:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()}function O(t,e,n){return function(r){return s.e(t,e,n).then((function(t){if(!t||!t.uid)return Promise.reject("Login failed!");Object(d.m)(t);var e=setTimeout((function(){e&&clearTimeout(e),r(m(t,{}))}),1e3)}))}}function _(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2?arguments[2]:void 0;return function(){var r=Object(i.a)(c.a.mark((function r(a){var i,o;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=n.slice(t,t+e),i=[],o=!1,0===n.length){r.next=8;break}return r.next=6,Object(f.getChannelByids)(n);case 6:i=r.sent,o=!(e>n.length);case 8:a(h({list:i,hasMore:o,fetchOver:!0,skip:t+e},"USER_GETSUBLIST"));case 9:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}function j(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2?arguments[2]:void 0;return function(){var r=Object(i.a)(c.a.mark((function r(a){var i,o;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=n.slice(t,t+e),i=[],o=!1,0===n.length){r.next=8;break}return r.next=6,Object(f.getEpisodesByids)(n);case 6:i=r.sent,o=!(e>n.length);case 8:a(h({list:i,hasMore:o,fetchOver:!0,skip:t+e},"USER_GETFAVORITELIST"));case 9:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}function k(){return function(){var t=Object(i.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.n();case 3:n=t.sent,e(h({eids:n,fetchOver:n&&0===n.length,list:[],skip:0,hasMore:n&&n.length>0},"USER_GETNEWRELEASE")),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2?arguments[2]:void 0;return function(){var r=Object(i.a)(c.a.mark((function r(a){var i,o;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=n.slice(t,t+e),i=[],o=!1,0===n.length){r.next=8;break}return r.next=6,Object(f.getEpisodesByids)(n);case 6:i=r.sent,o=!(e>n.length);case 8:a(h({list:i,hasMore:o,fetchOver:!0,skip:t+e},"USER_GETNEWRELEASE"));case 9:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}function E(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return function(){var r=Object(i.a)(c.a.mark((function r(a){var i,o;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=n.slice(t,t+e),i=[],o=!1,0===n.length){r.next=8;break}return r.next=6,Object(f.getEpisodesByids)(n);case 6:i=r.sent,o=!(e>n.length);case 8:a(h({list:i,hasMore:o,fetchOver:!0,skip:t+e},"USER_GETHISTORYLIST"));case 9:case"end":return r.stop()}}),r)})));return function(t){return r.apply(this,arguments)}}()}function I(){return function(){var t=Object(i.a)(c.a.mark((function t(e){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.m().catch(console.error);case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0=[];case 5:n=t.t0,e(h(n,"USER_HISTORYINFO"));case 7:case"end":return t.stop()}}),t)})));return ()}function S(t){return function(){var e=Object(i.a)(c.a.mark((function e(n,r){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=1,2===r().user.userInfo.transfer){e.next=9;break}return e.next=6,s.a(t.episode_id);case 6:n(I()),e.next=12;break;case 9:return e.next=11,u.a(t);case 11:n(I());case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t,n){return e.apply(this,arguments)}}()}function P(t,e,n){return function(){var a=Object(i.a)(c.a.mark((function a(i,s){var d,f,l,p,v,b,y,m,g,O,_,j,k,w;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,d=s().user.subInfo,f=d.cids,l=void 0===f?[]:f,p=d.subObj,v=void 0===p?{}:p,b=d.list,y=void 0===b?[]:b,m=d.skip,g=void 0===m?0:m,O=d.fetchOver,_=v[t]||{},j=g,a.next=6,u.f({cid:t,isDel:e,create_at:e&&_.create_at||Date.now()});case 6:k=a.sent,e?(j=g>0?g-1:0,delete v[t],y=y.filter((function(e){return e.cid!=t})),l=l.filter((function(e){return e!=t}))):(w=k.data.record_list[0].record,y=[],O=!1,v[t]=w,l.unshift(t)),i(h({list:Object(r.a)(y),cids:Object(r.a)(l),subObj:Object(o.a)({},v),skip:j,fetchOver:O},"USER_SUBINFO")),n&&n({processed:!0,res:k}),a.next=16;break;case 12:a.prev=12,a.t0=a.catch(0),n&&n({processed:!1});case 16:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(t,e){return a.apply(this,arguments)}}()}function x(t,e,n){return function(n,r){var a=r().user.subInfo.list;t&&(void 0===a?[]:a).length<100&&n(P(t,!1,e))}}function T(t,e,n){return function(n){t&&n(P(t,!0,e))}}function N(t,e,n){return function(){var a=Object(i.a)(c.a.mark((function a(i,o){var s,d,f,l,p,v,b;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(s=o().user.likedInfo,d=s.favObj,f=void 0===d?{}:d,l=s.eids,p=void 0===l?[]:l,!t||!e){a.next=21;break}return a.prev=2,a.next=5,u.d({eid:t,cid:e,isDel:!1});case 5:v=a.sent,b=v.data.record_list[0].record,f[t]=b,p.unshift(t),i(h({eids:Object(r.a)(p),list:[],fetchOver:!1,favObj:f},"USER_LIKEDINFO")),n&&n({processed:!0,res:v}),a.next=19;break;case 14:return a.prev=14,a.t0=a.catch(2),n&&n({processed:!1}),a.abrupt("return",Promise.reject(a.t0));case 19:a.next=23;break;case 21:return n&&n({processed:!1}),a.abrupt("return",Promise.reject());case 23:case"end":return a.stop()}}),a,null,[[2,14]])})));return function(t,e){return a.apply(this,arguments)}}()}function L(t,e,n){return function(){var r=Object(i.a)(c.a.mark((function r(a,i){var o,s,d,f,l,p,v,b,y,m,g;return c.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=i().user.likedInfo,s=o.favObj,d=void 0===s?{}:s,f=o.eids,l=void 0===f?[]:f,p=o.list,v=void 0===p?[]:p,b=o.skip,y=void 0===b?0:b,!t||!e){r.next=19;break}return r.prev=2,m=d[t]||{},r.next=6,u.d({eid:t,cid:e||m.cid,isDel:!0,create_at:m.create_at});case 6:g=r.sent,delete d[t],a(h({skip:y>0?y-1:0,eids:l.filter((),list:v.filter((),favObj:d},"USER_LIKEDINFO")),n&&n({processed:!0,res:g}),r.next=17;break;case 12:return r.prev=12,r.t0=r.catch(2),n&&n({processed:!1}),r.abrupt("return",Promise.reject(r.t0));case 17:r.next=21;break;case 19:return n&&n({processed:!1}),r.abrupt("return",Promise.reject());case 21:case"end":return r.stop()}}),r,null,[[2,12]])})));return function(t,e){return r.apply(this,arguments)}}()}var A={historySize:30,userInfo:{firebase_uid:""},userEpisodes:{episode_list:[]},userChannels:{channel_list:[]},subInfo:{cids:[],list:[],fetchOver:!1,hasMore:!1,skip:0},historyList:[],historyInfo:{eids:[],list:[],fetchOver:!1,hasMore:!1},likedInfo:{eids:[],list:[],fetchOver:!1,hasMore:!1,skip:0},newEpInfo:{eids:[],list:[],fetchOver:!1,hasMore:!1,skip:0}};p.a.register("user",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"USER_SETINFO":return Object.assign({},t,{userInfo:e.data});case"USER_FIREBASE":var n=Object.assign({},t.userInfo,{firebase_uid:e.data.uid||""});return Object.assign({},t,{userInfo:n});case"USER_EPISODES":return Object.assign({},t,{userEpisodes:e.data});case"USER_CHANNELS":return Object.assign({},t,{userChannels:e.data});case"USER_EXT_CHANNELS":return Object.assign({},t,{userExtChannels:e.data});case"USER_SUBINFO":return Object.assign({},t,{subInfo:Object.assign({},t.subInfo,e.data)});case"USER_GETSUBLIST":return Object(o.a)({},t,{subInfo:Object(o.a)({},t.subInfo,e.data,{list:t.subInfo.list.concat(e.data.list)})});case"USER_GETFAVORITELIST":return Object(o.a)({},t,{likedInfo:Object(o.a)({},t.likedInfo,e.data,{list:t.likedInfo.list.concat(e.data.list)})});case"USER_GETNEWRELEASE":return Object(o.a)({},t,{newEpInfo:Object(o.a)({},t.newEpInfo,e.data,{list:t.newEpInfo.list.concat(e.data.list)})});case"USER_GETHISTORYLIST":return Object(o.a)({},t,{historyInfo:Object(o.a)({},t.historyInfo,e.data,{list:t.historyInfo.list.concat(e.data.list)})});case"USER_HISTORYINFO":return Object.assign({},t,{historyInfo:Object.assign({},t.historyInfo,e.data)});case"USER_LIKEDINFO":return Object.assign({},t,{likedInfo:Object.assign({},t.likedInfo,e.data)});case"USER_UPDATE_INFO":return Object.assign({},t,{userInfo:Object(o.a)({},t.userInfo,e.data)});default:return t}}))},307:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return c}));function r(t){var e={type:""};switch(!0){case/^\/ch\/\d+\d$/.test(t):e.type="ch",e.cid=t.slice(4);break;case/^\/ch\/\d+\/ep\/\d+\d$/.test(t):e.type="ep",e.cid=t.match(/^\/ch\/(\d+)\//)[1],e.eid=t.match(/\/ep\/(\d+\d$)/)[1];break;case/^\/categories/.test(t):e.type="category",e.category_id=t.match(/^\/categories\/\D*(\d+)\D*/)[1];break;case/^\/h5/.test(t):e.type="h5",e.url="https://castbox.fm".concat(t);break;default:e.type="h5",e.url=t}return e}var a=new RegExp("("+["ximalaya.com","libsyn.com"].join("|")+")","ig");function c(t){if(e=t[0],a.lastIndex=0,!a.test(e))return t;var e,n=[];return t.forEach((function(t){if(/^http:/.test(t)){var e=t.replace(/http:/g,"https:");n.push(e)}n.push(t)})),n}},322:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return u}));var r=n(289),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return delete t.access_token_secret,delete t.auths,delete t.firebase_config,delete t.firebase_custom_token,delete t.roles,t};function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"facebook",n=arguments.length>2?arguments[2]:void 0,c="".concat(r.e,"/login/v2?web=1"),i={client_type:"web",provider:e};switch(e){case"facebook":i.facebook_token=t;break;case"google":i.google_token=t;break;case"twitter":i.token=t,i.secret=n;break;default:i.token=t}var o={headers:{"Content-Type":"application/json"},body:JSON.stringify(i)};return Object(r.d)(c,o).then((function(t){if(t.data.is_login)return Promise.resolve(a(t.data))})).catch((function(t){}))}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="".concat(r.e,"/logout?web=1&uid=").concat(t);return Object(r.c)(e)}function o(t){var e="".concat(r.h,"/account/episode/history/add?web=1&episode_ids=").concat(t);return Object(r.c)(e)}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{gender:0,birth_year:0},e=t.user_name,n=t.picture_url,a=t.gender,c=t.birth_year,i="".concat(r.h,"/account/profile/v2"),o={user_name:e,picture_url:n,gender:a,birth_year:c},s={headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_data:o})};return Object(r.d)(i,s)}var u=function(){var t="".concat(r.h,"/account/profile");return Object(r.c)(t)}},324:function(t,e,n){"use strict";n.d(e,"c",(function(){return _})),n.d(e,"b",(function(){return j})),n.d(e,"a",(function(){return k}));var r=n(11),a=n(16),c=n(283),i=n.n(c),o=n(284),s=n(289),u=n(39),d=n.n(u),f=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.type,n=void 0===e?"comment_reply":e,r=t.nft_time,a=void 0===r?"":r,c=t.limit,i=void 0===c?10:c;return Object(s.c)("".concat(s.h,"/account/notification/list?").concat(d.a.stringify({type:n,limit:i,nft_time:a})))},l=n(22),p=null,h=0,v=0,b="MSG_LIST",y="MSG_LIST_LOADING",m=g=O=function(){return function(){var t=Object(o.a)(i.a.mark((function t(e,n){var r,a,c,o,s,u,d,l,p,y,O;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(v>3)){t.next=4;break}return k(),v=0,t.abrupt("return");case 4:return e(g(!0)),t.prev=5,t.next=8,f();case 8:if(r=t.sent,a=r.nft_list,c=void 0===a?[]:a,o=r.nft_count,s=n().msg,u=s.msgs,d=s.firstMsg,l=void 0===d?{}:d,p=[],!(c.length>0&&c[0].nft_id!==l.nft_id)){t.next=31;break}y=0;case 17:if(!(y<c.length)){t.next=27;break}if((O=c[y]).nft_id!==l.nft_id){t.next=23;break}return t.abrupt("break",27);case 23:p.push(O);case 24:y++,t.next=17;break;case 27:e(m({nft_list:p.concat(u),nft_count:o},b)),v=0,t.next=33;break;case 31:v++;case 33:h=0,t.next=41;break;case 36:t.prev=36,t.t0=t.catch(5),++h>5&&k();case 41:e(g(!1));case 42:case"end":return t.stop()}}),t,null,[[5,36]])})));return function(e,n){return t.apply(this,arguments)}}()},_=function(){return function(){var t=Object(o.a)(i.a.mark((function t(e,n){var r,c,o,s,u,d,l,p,h;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n().msg,c=r.msgs,o=r.loading,s=r.lastMsg,!(u=void 0===s?{}:s).nft_id||o){t.next=20;break}return e(g(!0)),t.prev=3,t.next=6,f({nft_time:u.nft_time});case 6:d=t.sent,l=d.nft_list,p=void 0===l?[]:l,h=d.nft_count,e(m({nft_list:[].concat(Object(a.a)(c),Object(a.a)(p.slice(1))),nft_count:h},b)),e(g(!1)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(3);case 17:e(g(!1)),t.next=21;break;case 20:case 21:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e,n){return t.apply(this,arguments)}}()};function j(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4;return function(e){k(),e(O()),p=setInterval((,t)}}ar w={msgs:[],firstMsg:{},lastMsg:{},loading:!1,hasMore:!0,count:0,lastUpdate:0};l.a.register("msg",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case y:return Object(r.a)({},t,{loading:e.data});case b:var n=e.data.nft_list||[],a=e.data.nft_count||0,c=n[0]||t.firstMsg,i=n[n.length-1]||t.lastMsg,o=n.length<a;return Object(r.a)({},t,{msgs:n,hasMore:o,firstMsg:c,lastMsg:i,lastUpdate:Date.now(),count:a});default:return t}}))},336:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"d",(function(){return g})),n.d(e,"e",(function(){return _})),n.d(e,"f",(function(){return j})),n.d(e,"a",(function(){return w})),n.d(e,"c",(function(){return E}));var r=n(11),a=n(283),c=n.n(a),i=n(300),o=n(284),s=n(296),u=n(303),d=n(22),f="ch-fetch-start",l="ch-fetch-end",p="ch-fetch-list",h="ch-set",v="ch-setEpOverview",b="ch-setEpStatus",y="ch-setEpList";function m(t,e){return t&&t.length>0?t.findIndex(():-1}var g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.cid,n=t.skip,r=void 0===n?0:n,a=t.limit,u=void 0===a?30:a;return function(){var t=Object(o.a)(c.a.mark((function t(n,a){var o,d,p,h,b,y,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=a().ch,d=o.chInfo&&o.chInfo.needUpdateCh?1:0,e!=o.chInfo.cid&&(n(_({})),d+=1),e!=o.overview.cid&&(n(O()),d+=1),Object.keys(o.epStatus).length<1&&(n(O()),d+=1),0!==d){t.next=8;break}return t.abrupt("return");case 8:return n({type:f}),p=[Object(s.getEpOverviewByCid)(e),Object(s.getFeedInfoByCid)(e)],t.next=12,Promise.all(p);case 12:h=t.sent,b=Object(i.a)(h,2),y=b[0],m=b[1],n(_(m)),n({type:v,data:y}),n(E({cid:e,overview:y,skip:r,limit:u,clean:!1})),n({type:l});case 20:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()};function O(){return function(t){t({type:v,data:{}}),t({type:y,data:{eps:[],skip:0,limit:1}}),t({type:b,data:{status:{},cid:-1}})}}var _=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,n){var a=n().ch;(t&&a.chInfo.cid!==Number(t.cid)||a.chInfo.uid!==t.uid)&&e({type:h,data:Object(r.a)({},t,{needUpdateCh:1})})}};function j(t,e){return function(n){n({data:{cid:t,status:e},type:b})}}function k(t){var e=t.eps,n=t.cid,r=t.skip,a=t.limit;return function(t,c){t({type:y,data:{eps:e,skip:r,limit:a}}),t(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n,r){if(r().user.userInfo&&r().user.userInfo.uid)return Object(u.j)(e).then((function(e){n({data:{status:e,cid:t},type:b})})).catch(()}}(n||c().ch.overview.cid,e))}}var w=function(){return function(t,e){var n=e().ch.overview;t(O()),t({type:v,data:Object(r.a)({},n,{eids:n.eids.reverse()})}),t(E({skip:0,limit:20,cid:n.cid}))}},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.cid,n=t.skip,r=t.limit,a=t.clean,i=void 0!==a&&a,u=t.overview;return function(){var t=Object(o.a)(c.a.mark((function t(a,o){var d,f,l,h,v,b;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(d=o(),f=d.ch,l=void 0===f?{}:f,h=u||l.overview,a({type:p,data:!0}),t.prev=3,h.eids){t.next=7;break}return t.next=7,a(g(e,l.chInfo));case 7:if(i&&a(O()),!((v=h.eids.slice(n,n+r))&&v.length>0)){t.next=14;break}return t.next=12,Object(s.getTrackListByCidAndEids)(e,v);case 12:b=t.sent,a(k({eps:(l.eps||[]).slice(0,n).concat(b),cid:e,skip:n,limit:r}));case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(3);case 19:a({type:p,data:!1});case 20:case"end":return t.stop()}}),t,null,[[3,16]])})));return ()},I={chInfo:{},overview:{},eps:[],epStatusCid:-1,epStatus:{},skip:0,limit:30,isFetching:!1,fetchingList:!1,fetchOver:!0};d.a.register("ch",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.type,a=e.data;switch(n){case p:return Object(r.a)({},t,{fetchingList:a});case f:return Object(r.a)({},t,{isFetching:!0,fetchOver:!1});case l:return Object(r.a)({},t,{isFetching:!1,fetchOver:!0});case h:return Object(r.a)({},t,{chInfo:a});case y:return Object(r.a)({},t,a);case v:return Object(r.a)({},t,{overview:a});case b:var c=t.epStatusCid,i=t.epStatus,o=a.status,s=a.cid;return s==c?Object.assign({},t,{epStatusCid:s,epStatus:Object.assign({},i,o)}):Object.assign({},t,{epStatus:o,epStatusCid:s});default:return t}}))},361:function(t,e,n){"use strict";function r(){return"undefined"!==typeof window?navigator.userAgent:""}n.d(e,"j",(function(){return l})),n.d(e,"c",(function(){return p})),n.d(e,"l",(function(){return h})),n.d(e,"n",(function(){return v})),n.d(e,"m",(function(){return b})),n.d(e,"b",(function(){return y})),n.d(e,"e",(function(){return m})),n.d(e,"f",(function(){return g})),n.d(e,"i",(function(){return O})),n.d(e,"h",(function(){return _})),n.d(e,"g",(function(){return j})),n.d(e,"a",(function(){return k})),n.d(e,"d",(function(){return w})),n.d(e,"k",(function(){return E}));var a={isPhone:function(){return!!r().match(/(iPhone|iPod|iPad|android|BlackBerry)/i)},isAndroid:function(){return!!r().match(/(android)/i)},isMac:,c=n(399),i=n(585),o=n(303),s=n(22),u={},d={timer:null,cancelLoopOnce:!1};function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:e,data:t}}var l=function(t){var e=t.uid,n=t.episode,r=t.time,a=t.status;if(e&&n.eid&&!isNaN(r)){var c=Math.floor(1e3*r);Object(o.r)({uid:e,episode:n,time:c,status:a,oldRow:u.eid==n.eid?u:{}})}},p=function(t,e){return t&&e&&e.eid?Object(o.k)(e.eid).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u=t,t.pt?t.pt/1e3:0})).catch(console.error):Promise.reject()},h=function(t){return{data:t,type:"PLAYER_SETPLAY"}},v=function(t){return{data:t,type:"PLAYER_SETVOLUME"}},b=function(t){return{data:t,type:"PLAYER_BACKRATE"}},y=function(t,e){return function(n,r){if(e&&"object"===typeof e)n(Object(i.a)(e));else if(t>0){var a=r().playerTime.time.duration;n(Object(i.a)({duration:a,currentTime:t}))}n(f(t,"PLAYER_TIMECHANGE"))}},m=function(){return function(t,e){var n=e().playerTime.time.currentTime-15;t(y(Math.max(n,0)))}},g=function(){return function(t,e){var n=e().playerTime.time,r=n.duration,a=n.currentTime;t(y(Math.min(a+15,r)))}},O=_=function(){return function(t,e){var n=e(),r=n.user.userInfo,a=n.trackPlayItem.playItem,c=n.playerTime.time.currentTime;l({uid:r.uid,transfer:r.transfer,episode:a,time:c}),t(f(!1,"PLAYER_ISPLAY"))}},j=function(){return function(t){t(f(!1,"PLAYER_CANPLAY"))}},k=function(){return function(t){t(f(!0,"PLAYER_CANPLAY"))}},w=function(){return function(t,e){t(f(!0,"PLAYER_ISEND"));var n=e(),r=n.user.userInfo,a=n.trackPlayItem,i=a.playItem,o=a.list,s=void 0===o?[]:o,u=n.playerTime.time.currentTime;l({uid:r.uid,transfer:r.transfer,episode:i,time:u,status:3}),t(h(!1)),d.cancelLoopOnce?(d.timer&&clearTimeout(d.timer),d.cancelLoopOnce=!1):t(function(t,e){return function(n){var r=e.e_index>=0?e.e_index:t.findIndex(();if(r>=0&&r===t.length-1)n(h(!1));else if(r>=0){var a=r+1;n(Object(c.b)(t[a]||{},a))}else t&&t.length>0&&n(Object(c.b)(t[0]||{},0))}}(s,i))}},E=function(t){return function(e,n){if(d.timer&&clearTimeout(d.timer),0!=t){if(d.cancelLoopOnce=-6e4===t,d.cancelLoopOnce){var r=n().playerTime.time,a=r.duration,c=r.currentTime;t=Math.floor(1e3*(a-c))}e({type:"PLAYER_TIMING",data:Date.now()+t}),d.timer=setTimeout((function(){d.timer&&clearTimeout(d.timer),e(h(!1)),d.cancelLoopOnce=!1,e({type:"PLAYER_TIMING",data:0})}),t)}else e({type:"PLAYER_TIMING",data:0})}},I={shouldPlay:!1,isPhone:a.isPhone(),isVideo:!0,volume:1,playbackRate:"1.0",canPlay:!1,isPlay:!1,setPlay:!1,currentTime:-1,isEnd:!1,timing:0};s.a.register("player",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PLAYER_ISPLAY":var n={isPlay:e.data};return n.isPlay&&(n.shouldPlay=!0),Object.assign({},t,n);case"PLAYER_ISVIDEO":return Object.assign({},t,{isVideo:e.data});case"PLAYER_SHOULD":return Object.assign({},t,{shouldPlay:e.data});case"PLAYER_SETPLAY":return Object.assign({},t,{setPlay:e.data,setPlaykey:(new Date).getTime()});case"PLAYER_SETVOLUME":return Object.assign({},t,{volume:e.data});case"PLAYER_BACKRATE":return Object.assign({},t,{playbackRate:e.data});case"PLAYER_CANPLAY":return Object.assign({},t,{canPlay:e.data});case"PLAYER_ISEND":return Object.assign({},t,{isEnd:e.data});case"PLAYER_TIMECHANGE":return Object.assign({},t,{currentTime:e.data});case"PLAYER_TIMING":return Object.assign({},t,{timing:e.data});default:return t}}))},363:function(t,e,n){"use strict";function r(t,e){if("undefined"!==typeof document&&!document.getElementById(e)){var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.id=e,n.href=t,document.getElementsByTagName("head")[0].appendChild(n)}}function a(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("undefined"!==typeof document&&!document.getElementById(e)){var r,a=document.getElementsByTagName("script")[0];(r=document.createElement("script")).id=e,r.src=t,a.parentNode.insertBefore(r,a),r.onload=n.onload}}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}))},399:function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return d})),n.d(e,"e",(function(){return f})),n.d(e,"d",(function(){return l})),n.d(e,"a",(function(){return p}));var r=n(11),a=n(336),c=n(361),i=n(296),o=n(307),s=n(22);function u(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return function(r){r(d(t,n)),r(l(e)),r(Object(c.l)(!0))}}function d(t,e){return t&&e>=0&&(t.e_index=e),{type:"FINDTRACK",trackPlayItem:t}}var f=function(){return function(t,e){var n=e(),r=n.countryInfo,a=n.trackPlayItem;a.playItem.episode_id&&i.stat_play(a.playItem.eid,r.country.abbr).catch(console.error)}},l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:"UPDATE_PLAYING_LIST",data:t}};function p(t,e){return function(n,c){var o=c().user;if(Object(a.b)(o.userChannels.channel_list,t)>=0)i.self_findTrack(e).then(().catch(console.error),n(Object(a.d)({cid:t}));else{var s=c(),u=s.ch,f=u.chInfo,p=u.eps,h=s.trackPlayItem;if((!p||p.length<=0||f.cid!=t)&&n(Object(a.d)({cid:t})),!h.playItem||h.playItem.eid!=e){n(l(p));var v=p.findIndex(();if(v>=0){var b=p[v];b.e_index=v,n(d(b))}i.findTrackByEid(e).then((function(t){return n(d(Object(r.a)({},t,{e_index:v||-1})))})).catch(console.error)}}}}s.a.register("trackPlayItem",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{list:[],playItem:{},isPlay:!1,timeupdate:0},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"FINDTRACK":var n=e.trackPlayItem||{};return n.urls&&(n.urls=Object(o.a)(n.urls)),Object.assign({},t,{playItem:n});case"UPDATE_PLAYING_LIST":return Object.assign({},t,{list:e.data});case"PLAYTRACK":var r=e.isPlay;return Object.assign({},t,{isPlay:r});case"TIMEUPDATE":var a=e.timeupdate;return Object.assign({},t,{timeupdate:a});default:return t}}))},538:function(t,e,n){"use strict";function r(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on".concat(e),()}function a(t,e,n){t.removeEventListener?t.removeEventListener(e,n):t.detachEvent&&t.detachEvent("on".concat(e),n)}n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}))},585:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(290),a=n(22);function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{type:e,data:t}}var i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{duration:0,currentTime:0};return function(e,n){var a=t.duration,i=t.currentTime,o=Object(r.n)(1e3*a,!1,!0),s=Object(r.n)(1e3*i,!0,!0);try{var u="currentTime_".concat(n().trackPlayItem.playItem.episode_id);i>0&&(i<a-3&&localStorage?localStorage[u]=i:localStorage&&(localStorage[u]=0))}catch(d){}e(c({currentTime:i,duration:a,time_total:o,time_now:s},"PLAYERTIME_UPDATE"))}},o={time:{currentTime:0,duration:0,time_total:"00:00",time_now:"00:00"}};a.a.register("playerTime",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PLAYERTIME_UPDATE":return Object.assign({},t,{time:e.data});default:return t}}))},847:function(t,e,n){"use strict";(function(t){n.d(e,"a",();var r=n(22);function a(){return"undefined"!==typeof window?navigator.userAgent:""}var c=i={isPhone:!!a().match(/(iPhone|iPod|iPad|android|BlackBerry)/i),isAndroid:!!a().match(/(android)/i),isMac:!!a().match(/()/i),from:"",appUa:"",isBot:!1,isDev:"undefined"!==typeof t&&!1};r.a.register("platForm",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"PLATFORM_CHECK":return Object.assign({},t,e.data);default:return t}}))}).call(this,n(78))},920:function(t,e,n){"use strict";var r=n(283),a=n.n(r),c=n(284),i=n(9),o=n(10),s=n(18),u=n(17),d=n(19),f=(n(921),n(0)),l=n.n(f),p=n(331),h=n.n(p),v=function(t){function e(){var t,n;Object(i.a)(this,e);for(var r=arguments.length,o=new Array(r),d=0;d<r;d++)o[d]=arguments[d];return(n=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(o)))).state={show:!1},n.setAllowCookie=Object(c.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h()("/api/allowcookies",{credentials:"include"});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])}))),n.allowed=n.target=n}return Object(d.a)(e,t),Object(o.a)(e,[{key:"componentDidMount",value:function(){!window.__ISINAPP__&&window.__NOT_ALLOWED_COOKIES__&&this.target(!0)}},{key:"render",value:function(){return this.state.show?l.a.createElement("div",{className:"cookies-conf"},l.a.createElement("div",{className:"cookies-conf-main"},l.a.createElement("div",{className:"cookies-conf-text"},"We and our partners use cookies to personalize your experience, to show you ads based on your interests, and for measurement and analytics purposes. By using our website and our services, you agree to our use of cookies as described in our"," ",l.a.createElement("a",{href:"/policy/cookies.html"},"Cookie Policy"),"."),l.a.createElement("div",{className:"cookies-conf-btn"},l.a.createElement("button",{className:"allow",onClick:this.allowed},"Got it!")))):null}}]),e}(l.a.PureComponent);e.a=v},921:]);