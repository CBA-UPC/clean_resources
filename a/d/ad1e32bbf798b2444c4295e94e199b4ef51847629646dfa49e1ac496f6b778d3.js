"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2342],{36637:(e,a,l)=>{l.d(a,{g:()=>t});var i=l(69736),n=l(63068),s=l(11527);const t=e=>{let{children:a}=e;return(0,s.jsx)(i.x,{variant:"bodySmall",className:n.Z.pretitle,children:a})}},66873:(e,a,l)=>{l.d(a,{x:()=>u});var i=l(50959),n=l(76950),s=l(50540),t=l(30374),r=l(2990),o=l(71459),c=l(8499),d=l(11527);const u=e=>{let{children:a,action:l,uri:u}=e;const m=(0,s.g)(),g=(0,r.j)();let h;const b=()=>{const e={triggerId:c.K,triggerAction:{type:l}};o.y.set((a=>({...a,...e}))),g.storeAction(t.wH,{operation:n.pT.ADD,uris:[u]})};try{h=i.Children.only(a)}catch(x){return(0,d.jsx)(d.Fragment,{children:a})}return m?i.cloneElement(h,{onClick:b}):(0,d.jsx)(d.Fragment,{children:a})}},30521:(e,a,l)=>{l.r(a),l.d(a,{default:()=>ea});l(75930),l(92027),l(86277),l(65484),l(35174),l(96241);var i=l(50959),n=l(82187),s=l.n(n),t=l(75390),r=l(29132),o=l(75802),c=l(69736),d=l(87025),u=l(80859),m=l(10226),g=l(93175),h=l(85648),b=l(29770),x=l(20580),p=l(16972),v=l(41038),y=l(62182),j=l(81639),f=l(16118),k=l(91643),w=l(57986),I=l(23120),A=l(20069);const C=new I.o("queryAlbumMerch","query","7b258651f4a220aeab4a0573edbd5cf7edd0acfa4d35de2f18b72235e3300ac4",null);var L=l(18118);const P="iEG0moJ3mt1_j9Lho7MA";var U=l(11527);const M=e=>{var a;let{albumName:l,albumURI:i}=e;const{data:n}=(s={uri:i},t={gcTime:5*A.y},(0,A.a)(C,s,t));var s,t;const r=null!=n&&n.albumUnion&&"merch"in n.albumUnion?null==n||null===(a=n.albumUnion)||void 0===a||null===(a=a.merch)||void 0===a?void 0:a.items:[];return r&&(null==r?void 0:r.length)>0?(0,U.jsx)("div",{className:"contentSpacing",children:(0,U.jsx)("div",{className:P,children:(0,U.jsx)(L.s,{id:l,uri:i,merchItems:r,merchVariant:"Album page merch items"})})}):null};var R=l(19848),T=l(32793),N=l(47262),S=l(66713),E=l(23255),B=l(22527),F=l(29673),O=l(80626),z=l(82857),V=l(43104),_=l(80683),D=l(67408),q=l(22795),Q=l(47895),Y=l(15842),Z=l(66205),H=l(38338),W=l(57562),K=l(97013),X=l(66873),$=l(66819),J=l(13734),G=l(9443),ee=l(64222),ae=l(91529),le=l(25230),ie=l(72417);const ne="n8Bz0c0v17whD3KfMdOk",se="zddjxV2lX9ukNM5QXloA",te="lVqlPjQLuQhK2flsxB78",re="O_EguRjsZ4uI1hHamkOA",oe="jcaQQxoVnuuhtVwDJU1R",ce="fLS8v3_EfBadEerbGVoR",de="in4OjUTflcsoj9RUpf05",ue="xaPiqLlyzjAbzAaXfU1y",me="vveb4Rn0dK_r8YUM7L_n",ge=i.memo((function(e){var a;let{uri:l,togglePlay:n,isPlaying:s,isActive:t,spec:r,logger:o,backgroundColor:c,name:d,artists:u,isPlayable:m,sharingInfo:g}=e;const b=(0,J.o)(),v=(0,G.k)(),y=(0,q.y)(),j=(0,i.useMemo)((()=>r.actionBarFactory()),[r]),[f,k]=(0,q.Z)(l),I=(0,i.useCallback)((()=>{const e=(0,ee.aK)({isPlaying:s,isActive:t,spec:j.playButtonFactory(),logger:o,uri:l});n({loggingParams:e})}),[s,t,n,j,o,l]),A=(0,i.useCallback)((async()=>{let e;const a=j.saveButtonFactory();e=f?a.hitDislike({itemToBeDisliked:l}):a.hitLike({itemToBeLiked:l}),o.logInteraction(e),b({targetUri:l,intent:f?"unsave":"save",type:"click"});try{await k(!f)}catch{}}),[b,l,f,k,j,o]),C=(0,ie.Q)(),L=(0,$.j)();return(0,U.jsx)(Y.o,{backgroundColor:c,children:(0,U.jsxs)(Z.F,{children:[(0,U.jsx)(w.$,{onClick:I,disabled:!m,isPlaying:s,size:L,uri:l}),C&&(0,U.jsx)(O.Nh,{spec:j,children:(0,U.jsx)(le.K,{entityName:d,contextUri:l,activationPlacement:"bottomEnd",size:L})}),(0,U.jsx)(X.x,{uri:l,action:ae.sr.SAVE_ALBUM,children:(0,U.jsx)(H.H,{isAdded:!!f,onClick:A,disabled:!(v||null!=y&&y.getCapabilities().canModifyOffline),size:L})}),(0,U.jsx)(W.o,{uri:l,isFollowing:!!f,onClick:(e,a)=>(0,ee.l7)(a,j.downloadButtonFactory(),o,l),onFollow:A,size:L}),(0,U.jsx)(x.yj,{onShow:()=>(0,ee.qq)(j,o),menu:(0,U.jsx)(p.Y,{uri:l,artistUri:null==u||null===(a=u[0])||void 0===a?void 0:a.uri,sharingInfo:g}),children:(0,U.jsx)(K.z,{label:h.ag.get("more.label.context",d),size:L})}),(0,U.jsx)("div",{className:me,children:(0,U.jsx)(_.F,{property:Q.FM,renderNewExperience:()=>(0,U.jsx)(D.A,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]})})}));var he=l(41981);const be=864e5,xe=365.25*be;var pe=l(36637),ve=l(9108),ye=l(36255),je=l(39600),fe=l(40234),ke=l(58301),we=l(17676);var Ie=l(1142),Ae=l(48948),Ce=l(11317),Le=l(51450),Pe=l(50540),Ue=l(24071),Me=l(95504),Re=l(91530),Te=l(87350);var Ne=l(62116),Se=l(90779),Ee=l(40537),Be=l(80515),Fe=l(58912);const Oe="TCmZzqInstJMZjkHgnw3",ze="PeNI572tTpqsN23o3QhJ",Ve="oUsSfFiifMPXqW0kHjR6",_e="XKvEMQZlPfPncTqiitM5",De="GdbPVlmUCW0Q6ZZ0z0wh",qe="Hu7O5y7x5c7wUYFbnIoS",Qe=i.memo((function(e){const{images:a,title:l,isOpen:n,onClose:s}=e,t=(0,i.useMemo)((()=>(0,Fe.X)(a,{desiredSize:1e4})),[a]);return t?(0,U.jsx)(Ee.Z,{className:Oe,isOpen:n,onRequestClose:s,animation:{modal:{base:_e,afterOpen:De,beforeClose:qe}},animated:!0,children:(0,U.jsxs)("div",{style:{"--image-width":`${t.width}px`,"--image-height":`${t.height}px`},className:ze,children:[(0,U.jsx)(Be.E,{loading:"eager",alt:l,src:t.url,className:Ve}),(0,U.jsx)(Se.o,{onClick:s,semanticColor:"textBase",children:h.ag.get("web-player.cover-art-modal.close")})]})}):null}));var Ye=l(6807),Ze=l(14892);const He=e=>{let{releases:a}=e;return(0,U.jsx)(Ye.v,{children:a.map((e=>(0,U.jsx)(Ze.s,{role:"menuitem",to:(0,Ce.EC)(e.uri).toURLPath(!0),children:e.name},e.uri)))})};var We=l(43192),Ke=l(50760),Xe=l(78947);const $e=i.lazy((()=>l.e(4373).then(l.bind(l,4373))));function Je(e){switch(e){case Ke.V.Single:return h.ag.get("single");case Ke.V.Ep:return h.ag.get("ep");case Ke.V.Compilation:return h.ag.get("compilation");case Ke.V.Audiobook:return h.ag.get("card.tag.audiobook");case Ke.V.Album:default:return h.ag.get("album")}}const Ge=e=>{var a,l,n,k,I,A,C,L,P,E;let{uri:_,album:D}=e;const q=(0,o.TH)(),{spec:Q,logger:Y,UBIFragment:Z}=(0,O.fU)(g.w,{data:{uri:_}}),H=(0,i.useMemo)((()=>Q.trackListFactory()),[Q]),W=(0,i.useMemo)((()=>Q.moreByArtistShelfFactory()),[Q]),K=D.moreAlbumsByArtist,X=parseInt(new URLSearchParams((0,o.TH)().search).get("index")||"0",10),$=(0,T.Y)(_),{usePlayContextItem:J,togglePlay:G,isPlaying:ee,isActive:ae}=(0,B.n)({uri:$},{featureIdentifier:"album"}),le=(0,i.useCallback)(((e,a)=>{if(Q){const e=Q.headerFactory().artistNameFactory().hitUiNavigate({destination:a.creator.uri});Y.logInteraction(e)}}),[Y,Q]),{isOpen:ie,openModal:me,closeModal:Se}=(()=>{const[e,a]=(0,i.useState)(!1);return{isOpen:e,openModal:(0,i.useCallback)((()=>a(!0)),[]),closeModal:(0,i.useCallback)((()=>a(!1)),[])}})(),Ee=(0,m.W6)(we.DUY,{loadingValue:!1})?{onClick:me,ariaLabel:h.ag.get("web-player.album.open_coverart_modal")}:{},Be=(0,i.useCallback)((()=>new URLSearchParams(q.search.slice(1)).get("highlight")||""),[q.search]),Fe=D.uri,Oe=D.name,ze=D.albumType,Ve=null===(a=D.release)||void 0===a?void 0:a.date,_e=null===(l=D.release)||void 0===l?void 0:l.precision,De=D.nrTracks,qe=D.images,Ye=null===(n=D.extractedColors)||void 0===n?void 0:n.colorRaw.hex,Ze=D.artists,We=D.isPlayable,Ke=D.isCatalogueRestricted,Ge=D.copyright.items,ea=D.courtesyLine,aa=D.duration.durationMs,la=D.duration.isEstimate,ia=Be(),na=(null===(k=(0,r.v9)(Te.Gg).overrides)||void 0===k?void 0:k.locale)??h.ag.getLocaleForTranslation(),sa=(0,Ne.k)({uri:_,type:"locale"}),ta=(0,F.OT)({albumName:Oe,albumType:ze,albumArtists:Ze.map((e=>e.name)).join(h.ag.getSeparator()),shouldLocalize:sa,i18n:h.ag});(0,N.Y5)(Ye||null);const{albumILRAboveEnabled:ra,albumILRBelowEnabled:oa}=(()=>{const e=(0,ke.E)(),a=(0,o.TH)(),l=(0,m.W6)(we.t2x),i=(0,je.vI)(fe.k.ILRAlbumAbove,a),n=(0,je.vI)(fe.k.ILRAlbumBelow,a);return e?{albumILRAboveEnabled:!n&&(i||l===we.wPk.ABOVE),albumILRBelowEnabled:!i&&(n||l===we.wPk.BELOW)}:{albumILRAboveEnabled:!1,albumILRBelowEnabled:!1}})(),ca=function(e){return(0,i.useMemo)((()=>{if(null==e||!e.date)return null;if("day"===e.precision){const a=new Date(e.date),l=(new Date).getTime()-a.getTime(),i=l%xe;return i<3.5*be||i>312552e5?Math.round(l/xe):null}return null}),[e])}(D.release),{isCompactMode:da}=(0,R.mJ)(),ua=(e=>{const a=(0,Pe.g)(),l=(0,Ue.s4)(),n=(0,m.W6)(we.t2x),s=(0,r.v9)(Te.n5),t=(0,r.v9)(Re.rZ);return(0,i.useCallback)((async()=>{if(!(0,Ce.YF)(e))return;const i={category:"album_ilr_component_visible",action:"viewed",variant:n,label:"dwp",os:(0,Me.y)(),context:e,country:s?t:"",sp_t:(0,Le.vQ)("sp_t")};a?l.send((0,Ae.k)(i)):l.send((0,Ie.x)(i))}),[e,t,l,a,s,n])})(_),{ref:ma,inView:ga}=(0,t.YD)({threshold:0});return(0,i.useEffect)((()=>{ga&&ua()}),[ga,ua]),(0,U.jsxs)("section",{className:ne,"data-testid":"album-page",children:[(0,U.jsx)(v.$,{children:ta}),null!==ca?(0,U.jsx)(i.Suspense,{fallback:null,children:(0,U.jsx)($e,{colorLight:null==D||null===(I=D.extractedColors)||void 0===I?void 0:I.colorLight.hex,colorDark:null==D||null===(A=D.extractedColors)||void 0===A?void 0:A.colorDark.hex,name:Oe,years:ca})}):null,(0,U.jsxs)(y.gF,{backgroundColor:Ye,children:[(0,U.jsxs)(j.W,{children:[(0,U.jsx)(w.$,{size:"medium",onClick:()=>G(),disabled:!We,isPlaying:ee,uri:_}),(0,U.jsx)(f.i,{text:Oe,dragUri:_,dragLabel:Oe})]}),(0,U.jsx)(x._P,{menu:(0,U.jsx)(p.Y,{uri:D.uri,artistUri:null==Ze||null===(C=Ze[0])||void 0===C?void 0:C.uri,sharingInfo:D.sharingInfo}),children:(0,U.jsx)(y.Oz,{dragUri:Fe,images:qe,name:Oe,placeholderType:"album",...Ee})}),(0,U.jsxs)(y.sP,{children:[(0,U.jsx)(pe.g,{children:Je(ze)}),(0,U.jsx)(x._P,{menu:(0,U.jsx)(p.Y,{uri:D.uri,artistUri:null==Ze||null===(L=Ze[0])||void 0===L?void 0:L.uri,sharingInfo:D.sharingInfo}),children:(0,U.jsx)(y.xd,{dragUri:D.uri,dragLabel:D.name,scaleAtMinWidth:y.vz,children:Oe})}),(0,U.jsx)(y.QS,{creators:Ze,onCreatorClick:le,releaseDate:Ve,releaseDatePrecision:_e,totalItems:De,durationMilliseconds:aa,isEstimatedDuration:la,hasTracks:!0})]})]}),(0,U.jsx)(ge,{backgroundColor:Ye,uri:_,togglePlay:G,isPlaying:ee,isActive:ae,spec:Q,logger:Y,sharingInfo:D.sharingInfo,name:D.name,artists:D.artists,isPlayable:D.isPlayable}),Ke?(0,U.jsxs)("div",{className:se,children:[(0,U.jsx)(c.x,{as:"h2",variant:"bodyMediumBold",className:te,children:h.ag.get("windowed.product-album-header")}),(0,U.jsx)("div",{className:re,children:h.ag.get("windowed.product-album-description")})]}):null,(0,U.jsxs)("div",{className:"contentSpacing",children:[(0,U.jsx)(Z,{spec:H,children:(0,U.jsx)(he.L,{ariaLabel:Oe,nrTracks:(0,Xe.y)(D.discs)?D.discs.totalCount+De:De,discs:D.discs,albumUri:Fe,highlightUri:ia,scrollToIndex:X,usePlayContextItem:J,initalTracks:D.items,isCompactMode:da})}),(0,U.jsxs)("div",{className:de,children:[(0,U.jsxs)("div",{children:[Ve&&(0,U.jsx)(c.x,{as:"p",variant:"bodySmall",children:(0,V.BI)((0,V.RX)(Ve),na,{year:"numeric",month:"long",day:"numeric"},_e)}),(0,U.jsx)(S.k,{copyrights:Ge,courtesyLine:ea})]}),D.releases.items.length>0&&(0,U.jsx)(x.xV,{menu:(0,U.jsx)(He,{releases:D.releases.items}),children:(e,a,l)=>(0,U.jsxs)("button",{ref:l,className:ce,type:"button",onClick:a,children:[(0,U.jsx)(c.x,{variant:"bodySmall",children:h.ag.get("album-page.more-releases",D.releases.items.length)}),e?(0,U.jsx)(d.U,{size:"small"}):(0,U.jsx)(u.i,{size:"small"})]})})]})]}),ra&&(0,U.jsx)("div",{className:s()("contentSpacing",ue),"data-testid":"placeholder-album-ilr-above",children:(0,U.jsx)(ve.y,{subtitle:h.ag.get("internal-link-recommender.based-on-this-album"),uri:D.uri,inViewRef:ma,entityType:z.p.ALBUM})}),(0,U.jsx)(M,{albumName:Oe,albumURI:Fe}),(0,U.jsxs)(U.Fragment,{children:[(null==K?void 0:K.length)>0&&(0,U.jsx)("div",{className:"contentSpacing",children:(0,U.jsx)(Z,{spec:W,children:(0,U.jsx)(ye.q,{index:0,id:"more-albums",className:oe,title:h.ag.get("album-page.more-by-artist",null==Ze||null===(P=Ze[0])||void 0===P?void 0:P.name),total:K.length,seeAllUri:`${null==Ze||null===(E=Ze[0])||void 0===E?void 0:E.uri.replace("artist","app:artist")}:discography`,seeAllLabel:h.ag.get("artist-page.show-discography"),alwaysShowSeeAll:!0,children:K.map(((e,a)=>(0,U.jsx)(b.i,{index:a,artists:Ze,images:e.images||[],name:e.name,uri:e.uri,year:e.year,type:e.albumType,sharingInfo:e.sharingInfo},e.uri)))})})}),oa&&(0,U.jsx)("div",{className:s()("contentSpacing",ue),"data-testid":"placeholder-album-ilr-below",children:(0,U.jsx)(ve.y,{subtitle:h.ag.get("internal-link-recommender.based-on-this-album"),uri:D.uri,inViewRef:ma,entityType:z.p.ALBUM})})]}),(0,U.jsx)(Qe,{title:ta,isOpen:ie,onClose:Se,images:qe})]})},ea=i.memo((function(){const{albumId:e}=(0,o.UO)(),a=`spotify:album:${e}`,{loading:l,error:i,data:n,canLoadOffline:s}=(0,We.j)(a);return l||!n?(0,U.jsx)(k.h,{hasError:null!==i,loadOffline:s,errorMessage:h.ag.get("error.not_found.title.album")}):(0,U.jsx)(E.fd,{surface:E.Tg.ALBUM,uris:[a],children:(0,U.jsx)(Ge,{uri:a,album:n})})}))},39600:(e,a,l)=>{l.d(a,{vI:()=>i});l(75930),l(86277),l(65484),l(35174),l(96241);const i=(e,a)=>{const l=a?new URLSearchParams(a.search):void 0;return"1"===(null==l?void 0:l.get(e))}},40234:(e,a,l)=>{l.d(a,{k:()=>i});let i=function(e){return e.I18nSEO="i18nSEO",e.RTPTrackCredits="rtpv2p2",e.I18nAdditionalPages="i18nap",e.RichPlaylistPages="rpp",e.ILRAlbum="ilra",e.ILRAlbumAbove="ilraa",e.ILRAlbumBelow="ilrab",e.ILRShow="ilrs",e.PlaylistInternalTrackLinks="pitl",e.PlaylistInternalTrackAndArtistLinks="pital",e}({})}}]);
//# sourceMappingURL=xpui-routes-album.7a37bf7a.js.map