!"undefined"!=typeof self?self:this,(function(){return [function(e,n,t){"use strict";r(n);var i,a=[],s=[],u=0; h=function(){ar n=e.prototype;return n.resolve=n.reject=n.asyncReject=n.dispatch=n.then=n.catch=n.finally=n.timeout=n.toPromise=e.resolve=e.reject=function(n){return(new e).reject(n)},e.asyncReject=e.all=e.hash=e.map=e.onPossiblyUnhandledException=e.try=e.delay=e.isPromise=e.flush=e}();function l(e){return"[object RegExp]"==={}.toString.call(e)}var p={MOCK:"mock:",FILE:"file:",ABOUT:"about:"},w="*",v={IFRAME:"iframe",POPUP:"popup"},m="Call was rejected by callee.\r\n";function g(e){return void 0===e&&(e=window),e.location.protocol===p.ABOUT}ction _(e){void 0===e&&(e=window);var n=e.location;if(!n)throw new Error("Can not read window location");var t=n.protocol;if(!t)throw new Error("Can not read window protocol");if(t===p.FILE)return p.FILE+"//";if(t===p.ABOUT){var r=y(e);return r&&b()?_(r):p.ABOUT+"//"}var o=n.host;if(!o)throw new Error("Can not read window host");return t+"//"+o}n R(e){var n=N(e);if(!n)throw new Error("Can not determine top window");return[].concat(D(n),[n])}var S=[],I=[];n L(e,n){var t=N(e)||e,r=N(n)||n;try{if(t&&r)return t===r}catch(e){}var o=R(e),i=R(n);if(z(o,i))return!0;var a=E(t),s=E(r);return!(a&&z(R(a),i)||(s&&z(R(s),o),1))}function B(e,n){if("string"==typeof e){if("string"==typeof n)return e===w||n===e;if(l(n))return!1;if(Array.isArray(n))return!1}return l(e)?l(n)?e.toString()===n.toString():!Array.isArray(n)&&Boolean(n.match(e)):!!Array.isArray(e)&&(Array.isArray(n)?JSON.stringify(e)===JSON.stringify(n):!l(n)&&e.some(())}ction J(e){if(0!==U(e).indexOf(p.MOCK))return e;throw new Error("Mock urls not supported out of test mode")}r V,Z,X=);nction Q(e){if("function"==typeof btoa)return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,());if("undefined"!=typeof Buffer)return Buffer.from(e,"utf8").toString("base64");throw new Error("Can not find window.btoa or Buffer")}nction te(e){var n={};function t(){for(var t=this,r=arguments,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];var s=ne(i);return n.hasOwnProperty(s)?n[s]:(n[s]=h.try(().finally((function(){delete n[s]})),n[s])}return t.reset=$(t,K(e)+"::promiseMemoized")}eturn re(ge,(function(){return new h(()}))}unction Ee(e,n){return void 0===n&&(n={}),n&&Object.keys(n).length?(void 0===(t=r({},ye(e),{},n))&&(t={}),Object.keys(t).filter(().map(().join("&")):e;var t}ction xe(e){return new h(()}ototype=Object.create(Error.prototype);var Re={DISPLAY:{NONE:"none",BLOCK:"block"},VISIBILITY:{VISIBLE:"visible",HIDDEN:"hidden"},IMPORTANT:"important"};unction Ie(e){e.style.setProperty("display",Re.DISPLAY.NONE,Re.IMPORTANT)}nction je(e,n,t){var r=void 0===t?{}:t,o=r.width,i=void 0===o||o,a=r.height,s=void 0===a||a,u=r.interval,c=void 0===u?100:u,d=r.win,f=void 0===d?window:d,h=e.offsetWidth,l=e.offsetHeight;n({width:h,height:l});var p,w,v=function(){var t=e.offsetWidth,r=e.offsetHeight;(i&&t!==h||s&&r!==l)&&n({width:t,height:r}),h=t,l=r};return void 0!==f.ResizeObserver?(p=new f.ResizeObserver(v)).observe(e):void 0!==f.MutationObserver?((p=new f.MutationObserver(v)).observe(e,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),f.addEventListener("resize",v)):),{cancel:function(){p.disconnect(),window.removeEventListener("resize",v),clearTimeout(w)}}}function ke(e){return"string"==typeof e&&/^[0-9]+%$/.test(e)}e={METHOD:"postrobot_method",HELLO:"postrobot_hello",OPEN_TUNNEL:"postrobot_open_tunnel"},qe="__postrobot_bridge__",He="*",Je={CROSS_DOMAIN_ZALGO_PROMISE:"cross_domain_zalgo_promise",CROSS_DOMAIN_FUNCTION:"cross_domain_function",CROSS_DOMAIN_WINDOW:"cross_domain_window"};ar Ge=function(){return{}};ar Ze=function(){};tion en(e,n){return(0,n.send)(e,Ue.HELLO,{instanceID:$e()},{domain:He,timeout:-1}).then(()} on,an={FUNCTION:"function",ERROR:"error",PROMISE:"promise",REGEX:"regex",DATE:"date",ARRAY:"array",OBJECT:"object",STRING:"string",NUMBER:"number",BOOLEAN:"boolean",NULL:"null",UNDEFINED:"undefined"};unction un(e){return void 0===e?an.UNDEFINED:null===e?an.NULL:Array.isArray(e)?an.ARRAY:"function"==typeof e?an.FUNCTION:"object"==typeof e?e instanceof Error?an.ERROR:"function"==typeof e.then?an.PROMISE:"[object RegExp]"==={}.toString.call(e)?an.REGEX:"[object Date]"==={}.toString.call(e)?an.DATE:an.OBJECT:"string"==typeof e?an.STRING:"number"==typeof e?an.NUMBER:"boolean"==typeof e?an.BOOLEAN:void 0}ar dn,fn=((on={})[an.FUNCTION]=function(){},on[an.ERROR]=function(e){return cn(an.ERROR,{message:e.message,stack:e.stack,code:e.code})},on[an.PROMISE]=function(){},on[an.REGEX]=on[an.DATE]=on[an.ARRAY]=function(e){return e},on[an.OBJECT]=function(e){return e},on[an.STRING]=function(e){return e},on[an.NUMBER]=function(e){return e},on[an.BOOLEAN]=function(e){return e},on[an.NULL]=function(e){return e},on),hn={},ln=((dn={})[an.FUNCTION]=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},dn[an.ERROR]=dn[an.PROMISE]=dn[an.REGEX]=function(e){return new RegExp(e)},dn[an.DATE]=dn[an.ARRAY]=function(e){return e},dn[an.OBJECT]=function(e){return e},dn[an.STRING]=function(e){return e},dn[an.NUMBER]=function(e){return e},dn[an.BOOLEAN]=function(e){return e},dn[an.NULL]=dn),pn={};tion yn(e){var n=(e=e||U(e)).replace(/[^a-zA-Z0-9]+/g,"_");return qe+"_"+n}ar bn=new h(();ion Wn(e){var n,t=e.on,r=e.send,o=e.receiveMessage;n=window.open,window.open=function(e){var n=e.on,t=e.send,r=e.receiveMessage,o=Ve("popupWindowsByName");n(Ue.OPEN_TUNNEL,(function(e){var i=e.source,a=e.origin,s=e.data,u=Ve("bridges").get(a);if(!u)throw new Error("Can not find bridge promise for domain "+a);return u.then((function(e){if(i!==e)throw new Error("Message source does not matched registered bridge for domain "+a);if(!s.name)throw new Error("Register window expected to be passed window name");if(!s.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!o.has(s.name))throw new Error("Window with name "+s.name+" does not exist, or was not opened by this window");if(!o.get(s.name).domain)throw new Error("We do not have a registered domain for window "+s.name);if(o.get(s.name).domain!==a)throw new Error("Message origin "+a+" does not matched registered window origin "+o.get(s.name).domain);return xn(o.get(s.name).win,a,s.sendMessage),{sendMessage:function(e){if(window&&!window.closed){var i=o.get(s.name);if(i)try{r({data:e,origin:i.domain,source:i.win},{on:n,send:t})}catch(e){h.reject(e)}}}}}))}))}({on:t,send:r,receiveMessage:o}),function(e){var n=e.send;Ye(window).openTunnelToParent=function(e){var t=e.name,r=e.source,o=e.canary,i=e.sendMessage,a=Ve("tunnelWindows"),s=y(window);if(!s)throw new Error("No parent window found to open tunnel to");var u={name:t,source:r,canary:o,sendMessage:i});return n(s,Ue.OPEN_TUNNEL,{name:t,sendMessage:,{domain:He})}}({on:t,send:r}),function(e){var n=e.on,t=e.send,r=e.receiveMessage;h.try((function(){var e,o=E(window);if(o&&gn({win:o}))return _n(o),(e=o,Ke("remoteBridgeAwaiters").getOrSet(e,()).then((function(e){return e?window.name?Ye(C(e)).openTunnelToParent({name:window.name,source:window,canary:sendMessage:function(e){if(window&&!window.closed)try{r({data:e,origin:this.origin,source:this.source},{on:n,send:t})}catch(e){h.reject(e)}}}).then(().catch(():Cn(o,new Error("Can not register with opener: window does not have a name")):Cn(o,new Error("Can not register with opener: no bridge found in opener"))}))}))}({on:t,send:r,receiveMessage:o})}unction Nn(e,n){var t,r=n.send,o=n.id;return{id:void 0===o?ee():o,getType:function(){return e.then(()},getInstanceID:te((),close:function(){return e.then(Y)},getName:function(){return e.then((function(e){if(!T(e))return t}))},focus:isClosed:setLocation:function(n){return e.then((function(e){if(x(e))try{if(e.location&&"function"==typeof e.location.replace)return void e.location.replace(n)}catch(e){}e.location=n}))},setName:function(n){return e.then((function(e){On({win:e,name:n});var r=x(e),o=e);if(!r)throw new Error("Can not set name for cross-domain window: "+n);C(e).name=n,o&&o.setAttribute("name",n),t=n}))}}}var Rn=function(){ar n=e.prototype;return n.getID=n.getType=function(){return this.serializedWindow.getType()},n.isPopup=n.setLocation=function(e){var n=this;return this.serializedWindow.setLocation(e).then((function(){return n}))},n.getName=function(){return this.serializedWindow.getName()},n.setName=n.close=n.focus=n.isClosed=function(){return this.serializedWindow.isClosed()},n.getWindow=function(){return this.actualWindow},n.setWindow=n.awaitWindow=function(){return this.actualWindowPromise},n.matchWindow=n.unwrap=n.getInstanceID=function(){return this.serializedWindow.getInstanceID()},n.shouldClean=n.serialize=e.unwrap=e.serialize=e.deserialize=e.isProxyWindow=e.toProxyWindow=e}();nction Tn(e,n,t,r,o){var i,a,s;a=(i={on:o.on,send:o.send}).on,s=i.send,Ve("builtinListeners").getOrSet("functionCalls",(function(){return a(Ue.METHOD,{domain:He},(function(e){var n=e.source,t=e.origin,r=e.data,o=r.id,i=r.name,a=In(n,o);if(!a)throw new Error("Could not find method '"+i+"' with id: "+r.id+" in "+P(window));var u=a.source,c=a.domain,d=a.val;return h.try(().then((,().then(()}))}));var u=t.__id__||ee();e=Rn.unwrap(e);var c=t.__name__||t.name||r;return"string"==typeof c&&"function"==typeof c.indexOf&&0===c.indexOf("anonymous::")&&(c=c.replace("anonymous::",r+"::")),Rn.isProxyWindow(e)?(Sn(u,t,c,e,n),e.awaitWindow().then(()):Sn(u,t,c,e,n),cn(Je.CROSS_DOMAIN_FUNCTION,{id:u,name:c})}function An(e,n,t,r){var o,i=r.on,a=r.send;return function(e,n){void 0===n&&(n=hn);var t=JSON.stringify(e,();return void 0===t?an.UNDEFINED:t}(t,((o={})[an.PROMISE]=function(t,r){return function(e,n,t,r,o){return cn(Je.CROSS_DOMAIN_ZALGO_PROMISE,{then:Tn(e,n,(function(e,n){return t.then(e,n)}),r,{on:o.on,send:o.send})})}(e,n,t,r,{on:i,send:a})},o[an.FUNCTION]=o[an.OBJECT]=function(e){return H(e)||Rn.isProxyWindow(e)?cn(Je.CROSS_DOMAIN_WINDOW,Rn.serialize(e,{send:a})):e},o))}function jn(e,n,t,r){var o,i=r.on,a=r.send;return function(e,n){if(void 0===n&&(n=pn),e!==an.UNDEFINED)return JSON.parse(e,()}(t,((o={})[Je.CROSS_DOMAIN_ZALGO_PROMISE]=o[Je.CROSS_DOMAIN_FUNCTION]=function(t){return function(e,n,t,r){var o=t.id,i=t.name,a=r.send,s=function(t){function r(){var s=arguments;return Rn.toProxyWindow(e,{send:a}).awaitWindow().then((function(e){var u=In(e,o);if(u&&u.val!==r)return u.val.apply({source:window,origin:P()},s);var c={domain:n,fireAndForget:t.fireAndForget},d=[].slice.call(s);return a(e,Ue.METHOD,{id:o,name:i,args:d},c).then(()})).catch((function(e){throw e}))}return void 0===t&&(t={}),r.__name__=i,r.__origin__=n,r.__source__=e,r.__id__=o,r.origin=n,r},u=s();return u.fireAndForget=s({fireAndForget:!0}),u}(e,n,t,{on:i,send:a})},o[Je.CROSS_DOMAIN_WINDOW]=o))}var kn={};function Fn(e,n,t,o){var i,a=o.on,s=o.send;if(T(e))throw new Error("Window is closed");for(var u=An(e,n,((i={}).__post_robot_10_0_27__=r({id:ee(),origin:P(window)},t),i),{on:a,send:s}),c=Object.keys(kn),d=[],f=0;f<c.length;f++){var h=c[f];try{kn[h](e,u,n)}catch(e){d.push(e)}}if(d.length===c.length)throw new Error("All post-robot messaging strategies failed:\n\n"+d.map(().join("\n\n"))}kn.postrobot_post_message=function(e,n,t){(Array.isArray(t)?t:"string"==typeof t?[t]:[He]).map((function(e){return 0===e.indexOf(p.FILE)?He:e})).forEach(()},kn.postrobot_bridge=kn.postrobot_global=var zn,Mn="__domain_regex__";function Ln(e){return Ve("responseListeners").get(e)}nction qn(e){var n=e.name,t=e.win,r=e.domain,o=Ke("requestListeners");if(t===He&&(t=null),r===He&&(r=null),!n)throw new Error("Name required to get request listener");for(var i=0,a=[t,Xe()];i<a.length;i++){var s=a[i];if(s){var u=o.get(s);if(u){var c=u[n];if(c){if(r&&"string"==typeof r){if(c[r])return c[r];if(c[Mn])for(var d=0,f=c[Mn];d<f.length;d++){var h=f[d],l=h.listener;if(B(h.regex,r))return l}}if(c[He])return c[He]}}}}}var Hn=((zn={}).postrobot_message_request=function(e,n,t,o){var i=o.on,a=o.send,s=qn({name:t.name,win:e,domain:n}),u=t.name===Ue.METHOD&&t.data&&"string"==typeof t.data.name?t.data.name+"()":t.name;function c(o,s,c){if(void 0===c&&(c={}),!t.fireAndForget&&!T(e))try{Fn(e,n,r({type:o,ack:s,hash:t.hash,name:t.name},c),{on:i,send:a})}catch(e){throw new Error("Send response message failed for "+u+" in "+P()+"\n\n"+ae(e))}}return h.all([c("postrobot_message_ack"),h.try(().then((function(e){return c("postrobot_message_response","success",{data:e})}),()]).then(oe).catch(()},zn.postrobot_message_ack=zn.postrobot_message_response=zn);function Jn(e,n){var t=n.on,r=n.send,o=Ve("receivedMessages");if(!window||window.closed)throw new Error("Message received in closed window");try{if(!e.source)return}catch(e){return}var i=e.source,a=e.origin,s=e.data,i,a,{on:t,send:r});s&&(rn(i),o.has(s.id)||(o.set(s.id,!0),T(i)&&!s.fireAndForget||(0===s.origin.indexOf(p.FILE)&&(a=p.FILE+"//"),Hn[s.type](i,a,s,{on:t,send:r}))))}function Yn(e,n,t){if(!e)throw new Error("Expected name");if("function"==typeof n&&(t=n,n={}),!t)throw new Error("Expected handler");(n=n||{}).name=e,n.handler=t||n.handler;var r=n.window,o=n.domain,i=function e(n,t){var r=n.name,o=n.win,i=n.domain,a=Ke("requestListeners");if(!r||"string"!=typeof r)throw new Error("Name required to add request listener");if(Array.isArray(o)){for(var s=[],u=0,c=o;u<c.length;u++)s.push(e({name:r,domain:i,win:c[u]},t));return{cancel:function(){for(var e=0;e<s.length;e++)s[e].cancel()}}}if(Array.isArray(i)){for(var d=[],f=0,h=i;f<h.length;f++)d.push(e({name:r,win:o,domain:h[f]},t));return{cancel:}var l=qn({name:r,win:o,domain:i});if(o&&o!==He||(o=Xe()),i=i||He,l)throw o&&i?new Error("Request listener already exists for "+r+" on domain "+i.toString()+" for "+(o===Xe()?"wildcard":"specified")+" window"):o?new Error("Request listener already exists for "+r+" for "+(o===Xe()?"wildcard":"specified")+" window"):i?new Error("Request listener already exists for "+r+" on domain "+i.toString()):new Error("Request listener already exists for "+r);var p,w,v=a.getOrSet(o,(function(){return{}})),m=le(v,r,(),g=i.toString();return he(i)?(p=le(m,Mn,(function(){return[]}))).push(w={regex:i,listener:t}):m[g]=t,{cancel:}({name:e,win:r,domain:o},{handler:n.handler,handleError:n.errorHandler||window:r,domain:o||He,name:e});return{cancel:function(){i.cancel()}}}var Gn,Vn=function e(n,t,r,o){var i=(o=o||{}).domain||He,a=o.timeout||-1,s=o.timeout||5e3,u=o.fireAndForget||!1;return h.try((function(){if(t,n,i),window,n))return tn(n,s)})).then((function(t){return function(e,n,t,r){var o=r.send;return"string"==typeof n?h.resolve(n):h.try(().then(()}(n,i,(void 0===t?{}:t).domain,{send:e})})).then((function(o){i=o;var s=t===Ue.METHOD&&r&&"string"==typeof r.name?r.name+"()":t,c=new h,d=t+"_"+ee();if(!u){var f={name:t,win:n,domain:i,promise:c};!d,f);var l=Ke("requestPromises").getOrSet(n,();l.push(c),c.catch(();var p=n)?1e4:2e3,w=a,v=p,m=w,g=ce((,500);c.finally(().catch(oe)}try{Fn(n,i,{type:"postrobot_message_request",hash:d,name:t,data:r,fireAndForget:u},{on:Yn,send:e})}catch(e){throw new Error("Send request message failed for "+s+" in "+P()+"\n\n"+ae(e))}return u?c.resolve():c}))};function Zn(e,n,t){return An(e,n,t,{on:Yn,send:Vn})}etupBridge:Wn,openBridge:linkWindow:On,linkUrl:isBridge:En,needsBridge:gn,needsBridgeForBrowser:wn,hasBridge:needsBridgeForWin:vn,needsBridgeForDomain:mn,destroyBridges:;var nt="zoid",tt=nt+"_delegate",rt=nt+"_allow_delegate",ot={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},it={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},at=v,st="*",ut={WIDTH:"300px",HEIGHT:"150px"},ct={RENDER:"zoid-render",RENDERED:"zoid-rendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function dt(e,n,t,r,o){var i=e.getPropDefinition(t);return i&&"function"==typeof i.childDecorate?i.childDecorate({value:r,close:o.close,focus:o.focus,onError:o.onError,onProps:o.onProps,resize:o.resize,getParent:o.getParent,getParentDomain:o.getParentDomain,show:o.show,hide:o.hide}):r}function ft(e){return re(ft,(function(){if(!e)throw new Error("No window name");var n=e.split("__"),t=n[1],r=n[2],o=n[3];if(t!==nt)throw new Error("Window not rendered by zoid - got "+t);if(!r)throw new Error("Expected component name");if(!o)throw new Error("Expected encoded payload");try{return JSON.parse(o))}catch(e){throw new Error("Can not decode window name payload: "+o+": "+ae(e))}}),[e])}ar lt=function(){function e(e){var n=this;this.component=void 0,this.props=void 0,this.context=void 0,this.parent=void 0,this.parentDomain=void 0,this.parentComponentWindow=void 0,this.onPropHandlers=void 0,this.autoResize=void 0,h.try((function(){n.component=e,n.onPropHandlers=[];var t=ht();if(!t)throw new Error("No child payload found");if("9_0_35"!==t.version)throw new Error("Parent window has zoid version "+t.version+", child window has version 9_0_35");var r=t.parent,o=t.parentDomain,i=t.exports,a=t.props;n.context=t.context,n.parentComponentWindow=n.getParentComponentWindow(r),n.parentDomain=o,n.parent=Xn(n.parentComponentWindow,o,i),n.checkParentDomain(o);var s=n.getPropsByRef(n.parentComponentWindow,o,a);return n.setProps(s,o),rn(n.parentComponentWindow),n.watchForClose(),n.parent.init(n.buildExports())})).then((function(){return n.watchForResize()})).catch((function(e){n.onError(e)}))}var n=e.prototype;return n.getHelpers=function(){var e=this;return{focus:function(){return e.focus()},close:function(){return e.close()},resize:function(n){return e.resize({width:n.width,height:n.height})},onError:function(n){return e.onError(n)},onProps:function(n){return e.onProps(n)},getParent:function(){return e.parentComponentWindow},getParentDomain:show:function(){return e.show()},hide:function(){return e.hide()}}},n.show=function(){return this.parent.show()},n.hide=function(){return this.parent.hide()},n.checkParentDomain=function(e){if(!B(this.component.allowedParentDomains,e))throw new Error("Can not be rendered by domain: "+e)},n.onProps=n.getPropsByRef=n.getParentComponentWindow=n.getProps=n.setProps=function(e,n,t){void 0===t&&(t=!1);var r=this.getHelpers(),o=this.getProps();ue(o,function(e,n,t,r,o,i){void 0===i&&(i=!1);for(var a={},s=0,u=Object.keys(t);s<u.length;s++){var c=u[s],d=n.getPropDefinition(c);if(!d||!d.sameDomain||r===P(window)&&x(e)){var f=dt(n,0,c,t[c],o);a[c]=f,d&&d.alias&&!a[d.alias]&&(a[d.alias]=f)}}if(!i)for(var h=0,l=n.getPropNames();h<l.length;h++){var p=l[h];t.hasOwnProperty(p)||(a[p]=dt(n,0,p,t[p],o))}return a}(this.parentComponentWindow,this.component,e,n,r,t));for(var i=0,a=this.onPropHandlers;i<a.length;i++)a[i].call(this,o)},n.watchForClose=function(){var e=this;window.addEventListener("beforeunload",(function(){e.parent.checkClose.fireAndForget()})),window.addEventListener("unload",(),q(this.parentComponentWindow,(function(){e.destroy()}))},n.getAutoResize=function(){var e=this.autoResize||this.component.autoResize||{},n=e.width,t=e.height,r=e.element,o=void 0===r?"body":r;return{width:void 0!==n&&n,height:void 0!==t&&t,element:o=Pe(o)}},n.watchForResize=function(){var e=this;return ge().then(().then((function(){var n=e.getAutoResize(),t=n.width,r=n.height,o=n.element;o&&(t||r)&&e.context!==at.POPUP&&je(o,(function(n){e.resize({width:t?n.width:void 0,height:r?n.height:void 0})}),{width:t,height:r})}))},n.buildExports=function(){var e=this;return{updateProps:function(n){var t=this;return h.try(()},close:},n.resize=function(e){return this.parent.resize.fireAndForget({width:e.width,height:e.height})},n.close=function(){return this.parent.close()},n.destroy=function(){return h.try((function(){window.close()}))},n.focus=n.onError=function(e){var n=this;return h.try((function(){if(n.parent&&n.parent.onError)return n.parent.onError(e);throw e}))},e}(),pt={};[at.IFRAME]={openFrame:function(e){return et(De({attributes:r({name:e.windowName,title:this.component.name},this.component.attributes.iframe)}))},open:function(e){var n=this,t=e.proxyFrame;if(!t)throw new Error("Expected proxy frame to be passed");return t.get().then((function(e){return We(e).then((function(t){var r,o,i,a=(r=e,o=ie(o=function(){return n.close()}),Ae(r)?o():i=ce((,50),{cancel:);return n.clean.register((function(){return a.cancel()})),n.clean.register((function(){return Te(e)})),n.clean.register((function(){return $n(t)})),t}))}))},openPrerenderFrame:function(){return et(De({attributes:r({name:"__zoid_prerender_frame__"+this.component.name+"_"+ee()+"__",title:"prerender__"+this.component.name},this.component.attributes.iframe)}))},openPrerender:function(e,n){var t=this;if(!n)throw new Error("Expected proxy frame to be passed");return n.get().then((function(e){return t.clean.register((function(){return Te(e)})),We(e).then((function(e){return C(e)})).then((function(e){return Kn(e)}))}))},delegate:["getProxyWindow","getProxyContainer","renderContainer","openFrame","openPrerenderFrame","prerender","open","openPrerender","show","hide"]},pt[at.POPUP]={open:function(e){var n=this,t=e.windowName;return h.try((function(){var e=n.component.dimensions,o=e.width,i=e.height;o=Be(o,window.outerWidth),i=Be(i,window.outerWidth);var a=function(e,n){var t=(n=n||{}).width,o=n.height,i=0,a=0;t&&(window.outerWidth?a=Math.round((window.outerWidth-t)/2)+window.screenX:window.screen.width&&(a=Math.round((window.screen.width-t)/2))),o&&(window.outerHeight?i=Math.round((window.outerHeight-o)/2)+window.screenY:window.screen.height&&(i=Math.round((window.screen.height-o)/2))),t&&o&&(n=r({top:i,left:a,width:t,height:o,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},n));var s=n.name||"";delete n.name;var u,c,d=Object.keys(n).map(().filter(Boolean).join(",");try{u=window.open("",s,d,!0)}catch(c){throw new Ce("Can not open popup window - "+(c.stack||c.message))}if(T(u))throw new Ce("Can not open popup window - blocked");return window.addEventListener("unload",(function(){return u.close()})),u}(0,r({name:t,width:o,height:i},n.component.attributes.popup));return n.clean.register((),a}))},openPrerender:delegate:["getProxyContainer","renderContainer","setProxyWin","show","hide"]};var mt=function(){function e(e,n){var t=this;this.component=void 0,this.driver=void 0,this.clean=void 0,this.event=void 0,this.initPromise=void 0,this.handledErrors=void 0,this.props=void 0,this.state=void 0,this.child=void 0,this.proxyContainer=void 0,this.proxyWin=void 0,this.visible=!0,this.initPromise=new h,this.handledErrors=[],this.props={},this.clean=pe(this),this.state={},this.component=e,this.setupEvents(n.onError),this.setProps(n),this.component.registerActiveComponent(this),this.clean.register((function(){return t.component.destroyActiveComponent(t)})),this.watchForUnload()}var n=e.prototype;return n.setupEvents=function(e){var n,t,r=this;this.event=(n={},t={},{on:once:trigger:triggerOnce:),this.event.on(ct.RENDER,(function(){return r.props.onRender()})),this.event.on(ct.DISPLAY,(function(){return r.props.onDisplay()})),this.event.on(ct.RENDERED,(function(){return r.props.onRendered()})),this.event.on(ct.CLOSE,(function(){return r.props.onClose()})),this.event.on(ct.RESIZE,(function(){return r.props.onResize()})),this.event.on(ct.FOCUS,(function(){return r.props.onFocus()})),this.event.on(ct.PROPS,(),this.event.on(ct.ERROR,(function(n){return r.props&&r.props.onError?r.props.onError(n):e?e(n):r.initPromise.reject(n).then(()}))},n.render=function(e,n,t){var r=this;return h.try((function(){r.component.log("render"),r.driver=pt[t];var o=nt+"-"+r.component.tag+"-"+ee(),i=r.getDomain(),a=r.getChildDomain();r.component.checkAllowRender(e,i,n),e!==window&&r.delegate(t,e);var s=r.props.window,u=r.initPromise,c=r.buildUrl(),d=r.event.trigger(ct.RENDER),f=r.getProxyContainer(n),l=r.getProxyWindow(),p=l.then((),w=p.then((),v=r.openPrerenderFrame(),m=h.hash({proxyContainer:f,proxyFrame:w,proxyPrerenderFrame:v}).then((function(e){return r.renderContainer(e.proxyContainer,{context:t,uid:o,proxyFrame:e.proxyFrame,proxyPrerenderFrame:e.proxyPrerenderFrame,visible:r.visible})})).then((),g=h.hash({windowName:p,proxyFrame:w,proxyWin:l}).then((function(e){var n=e.proxyWin;return s?n:r.open({windowName:e.windowName,proxyWin:n,proxyFrame:e.proxyFrame})})),y=h.hash({proxyWin:g,proxyPrerenderFrame:v}).then((),E=g.then((),b=h.hash({proxyPrerenderWin:y,state:E}).then((),_=h.hash({proxyWin:g,windowName:p}).then((),P=h.hash({proxyWin:g,url:c,windowName:_,prerender:b}).then((),x=g.then((),C=h.hash({container:m,prerender:b}).then((function(){return r.event.trigger(ct.DISPLAY)})),O=g.then((),W=P.then((function(){return r.runTimeout()})),D=u.then(();return h.hash({init:u,buildUrl:c,onRender:d,getProxyContainer:f,openFrame:w,openPrerenderFrame:v,renderContainer:m,open:g,openPrerender:y,setState:E,prerender:b,loadUrl:P,buildWindowName:p,setWindowName:_,watchForClose:x,onDisplay:C,openBridge:O,runTimeout:W,onRendered:D})})).catch((function(e){return h.all([r.onError(e),r.destroy(e)]).then((function(){throw e}),()})).then(oe)},n.getProxyWindow=function(){var e=this;return h.try((function(){var n=e.props.window;if(n){var t=Kn(n);return e.clean.register((function(){return n.close()})),t}return new Rn({send:Vn})}))},n.getProxyContainer=function(e){return h.try((function(){return xe(e)})).then(()},n.buildWindowName=function(e){var n=this.buildChildPayload({proxyWin:e.proxyWin,childDomain:e.childDomain,domain:e.domain,target:e.target,context:e.context,uid:e.uid});return"__"+nt+"__"+this.component.name+"__"+Q(JSON.stringify(n))+"__"},n.getPropsRef=function(e,n,t,r){var o=Zn(e,t,this.getPropsForChild(t)),i=n===P()?{type:"uid",uid:r}:{type:"raw",value:o};if("uid"===i.type){var a=Qn(window);a.props=a.props||{},a.props[r]=o,this.clean.register((function(){delete a.props[r]}))}return i},n.buildChildPayload=function(e){var n=void 0===e?{}:e,t=n.proxyWin,r=n.childDomain,o=n.domain,i=n.target,a=void 0===i?window:i,s=n.context,u=n.uid;return{uid:u,context:s,version:"9_0_35",childDomain:r,parentDomain:P(window),tag:this.component.tag,parent:this.getWindowRef(a,r,u,s),props:this.getPropsRef(t,r,o,u),exports:Zn(t,o,this.buildParentExports(t))}},n.setProxyWin=function(e){var n=this;return h.try(()},n.getHelpers=function(){var e=this;return{state:this.state,event:this.event,close:function(){return e.close()},focus:function(){return e.focus()},resize:function(n){return e.resize({width:n.width,height:n.height})},onError:function(n){return e.onError(n)},updateProps:function(n){return e.updateProps(n)},show:function(){return e.show()},hide:function(){return e.hide()}}},n.show=function(){var e=this;return h.try((function(){if(e.visible=!0,e.proxyContainer)return e.proxyContainer.get().then(Se)}))},n.hide=function(){var e=this;return h.try((function(){if(e.visible=!1,e.proxyContainer)return e.proxyContainer.get().then(Ie)}))},n.setProps=function(e,n){void 0===n&&(n=!1),this.component.validate&&this.component.validate({props:e});var t=this.getHelpers();!function(e,n,t,r,o){void 0===o&&(o=!1),ue(n,t=t||{});for(var i=o?[]:[].concat(e.getPropNames()),a=0,s=Object.keys(t);a<s.length;a++){var u=s[a];-1===i.indexOf(u)&&i.push(u)}for(var c=[],d=r.state,f=r.close,h=r.focus,l=r.event,p=r.onError,w=0;w<i.length;w++){var v=i[w],m=e.getPropDefinition(v),g=t[v];if(m){var y=m.alias;if(y&&(!fe(g)&&fe(t[y])&&(g=t[y]),c.push(y)),m.value&&(g=m.value({props:n,state:d,close:f,focus:h,event:l,onError:p})),!fe(g)&&m.default&&(g=m.default({props:n,state:d,close:f,focus:h,event:l,onError:p})),fe(g)&&("array"===m.type?!Array.isArray(g):typeof g!==m.type))throw new TypeError("Prop is not of type "+m.type+": "+v);n[v]=g}}for(var E=0;E<c.length;E++)delete n[c[E]];for(var b=0,_=Object.keys(n);b<_.length;b++){var P=_[b],x=e.getPropDefinition(P),C=n[P];x&&(fe(C)&&x.validate&&x.validate({value:C,props:n}),fe(C)&&x.decorate&&(n[P]=x.decorate({value:C,props:n,state:d,close:f,focus:h,event:l,onError:p})))}for(var O=0,W=e.getPropNames();O<W.length;O++){var D=W[O];if(!1!==e.getPropDefinition(D).required&&!fe(n[D]))throw new Error('Expected prop "'+D+'" to be defined')}}(this.component,this.props,e,t,n)},n.buildUrl=function(){var e,n,t,o,i=this;return(e=r({},this.component.props,{},this.component.builtinProps),n=this.props,t={},o=Object.keys(n),h.all(o.map((function(r){var o=e[r];if(o)return h.resolve().then(().then((function(e){if(null!=e)return h.all([wt(o,r,e),vt(o,0,e)]).then((function(e){var n,i=e[0],a=e[1];if("boolean"==typeof a)n=a.toString();else if("string"==typeof a)n=a.toString();else if("object"==typeof a&&null!==a){if(o.serialization===it.JSON)n=JSON.stringify(a);else if(o.serialization===it.BASE64)n=btoa(JSON.stringify(a));else if(o.serialization===it.DOTIFY||!o.serialization){n=a,r);for(var s=0,u=Object.keys(n);s<u.length;s++){var c=u[s];t[c]=n[c]}return}}else"number"==typeof a&&(n=a.toString());t[i]=n}))}))}))).then((function(){return t}))).then((function(e){return function(e,n){void 0===n&&(n={});var t,r,o=n.query||{},i=n.hash||{},a=e.split("#");r=a[1];var s=(t=a[0]).split("?");t=s[0];var u=Ee(s[1],o),c=Ee(r,i);return u&&(t=t+"?"+u),c&&(t=t+"#"+c),t}(J(i.component.getUrl(i.props)),{query:e})}))},n.getDomain=function(){return this.component.getDomain(this.props)},n.getChildDomain=n.getPropsForChild=function(e){for(var n={},t=0,r=Object.keys(this.props);t<r.length;t++){var o=r[t],i=this.component.getPropDefinition(o);i&&!1===i.sendToChild||i&&i.sameDomain&&!B(e,P(window))||(n[o]=this.props[o])}return n},n.updateProps=function(e){var n=this;return this.setProps(e,!0),this.initPromise.then((function(){if(n.child)return n.child.updateProps(n.getPropsForChild(n.getDomain())).catch((function(e){if(n.child&&n.proxyWin)return n.checkClose(n.proxyWin).then((function(){if(n.child)throw e}))}))}))},n.openFrame=function(e){var n=this,t=e.windowName;return h.try((function(){if(n.driver.openFrame)return n.driver.openFrame.call(n,{windowName:t})}))},n.openPrerenderFrame=function(){var e=this;return h.try(()},n.open=function(e){var n=this,t=e.proxyWin,r=e.proxyFrame,o=e.windowName;return h.try((function(){return n.component.log("open"),n.driver.open.call(n,{windowName:o,proxyFrame:r}).then(()}))},n.openPrerender=function(e,n){var t=this;return h.try(()},n.focus=function(){var e=this;return h.try((function(){var n=e.proxyWin;if(n)return e.event.trigger(ct.FOCUS),n.focus().then(oe)}))},n.delegate=function(e,n){var t=this;this.component.log("delegate");for(var r={},o=0,i=this.component.getPropNames();o<i.length;o++){var a=i[o];this.component.getPropDefinition(a).allowDelegate&&(r[a]=this.props[a])}for(var s=Vn(n,tt+"_"+this.component.name,{context:e,props:r,overrides:{event:this.event,close:function(){return t.close()},onError:function(e){return t.onError(e)}}}).then((function(e){var n=e.data;return t.clean.register(n.destroy),n.overrides})).catch((),u=function(e,n){var r=n[e];t[r]=function(){var e=this,n=arguments;return s.then(()}},c=0,d=this.driver.delegate;c<d.length;c++)u(c,d)},n.getWindowRef=function(e,n,t,r){if(n===P(window)){var o=Qn(window);return o.windows=o.windows||{},o.windows[t]=window,this.clean.register((),{type:"global",uid:t}}return r===at.POPUP?{type:"opener"}:{type:"parent",distance:M(window)}},n.watchForClose=function(e){var n=this,t=!1;return this.clean.register((),h.delay(2e3).then((function(){return e.isClosed()})).then((function(r){return r?(n.component.log("detect_close_child"),n.close()):t?void 0:n.watchForClose(e)}))},n.watchForUnload=function(){var e=this,n=Ne(window,"unload",ie((function(){e.component.log("navigate_away"),e.destroy(new Error("Window navigated away"))})));this.clean.register(n.cancel)},n.runTimeout=function(){var e=this;return h.try((function(){var n=e.props.timeout;if(n)return e.initPromise.timeout(n,new Error("Loading component timed out after "+n+" milliseconds"))}))},n.initChild=function(e){var n=this;return h.try(()},n.buildParentExports=function(e){var n=this,t=function(e){return n.onError(e)},r=function(e){return n.initChild(e)};return r.onError=t,{init:r,close:function(){return n.close()},checkClose:resize:onError:t,show:function(){return n.show()},hide:function(){return n.hide()}}},n.resize=function(e){var n=this,t=e.width,r=e.height;return h.try(()},n.checkClose=function(e){var n=this;return e.isClosed().then((function(t){return t?n.close():h.delay(200).then((function(){return e.isClosed()})).then(()}))},n.close=function(){var e=this;return h.try((function(){return e.component.log("close"),e.event.trigger(ct.CLOSE)})).then((function(){return e.child&&e.child.close.fireAndForget().catch(oe),e.destroy(new Error("Window closed"),!1)}))},n.prerender=function(e,n){var t=this,r=n.context,o=n.uid;return h.try((function(){var n=t.component.prerenderTemplate;if(n){var i=e.getWindow();if(i&&x(i)&&i)){var a=(i=C(i)).document,s=t.renderTemplate(n,{context:r,uid:o,doc:a});if(s){if(s.ownerDocument!==a)throw new Error("Expected prerender template to have been created with document from child window");!i,s);var u=t.component.autoResize||{},c=u.width,d=void 0!==c&&c,f=u.height,h=void 0!==f&&f,l=u.element,p=void 0===l?"body":l;(p=Pe(p,a))&&(d||h)&&je(p,(function(e){t.resize({width:d?e.width:void 0,height:h?e.height:void 0})}),{width:d,height:h,win:i})}}}}))},n.renderTemplate=function(e,n){var t=this;return e.call(this,{container:n.container,context:n.context,uid:n.uid,doc:n.doc,frame:n.frame,prerenderFrame:n.prerenderFrame,focus:function(){return t.focus()},close:function(){return t.close()},state:this.state,props:this.props,tag:this.component.tag,dimensions:this.component.dimensions,event:this.event})},n.renderContainer=function(e,n){var t=this,r=n.proxyFrame,o=n.proxyPrerenderFrame,i=n.context,a=n.uid,s=n.visible;return h.hash({container:e.get().then(xe),frame:r?r.get():null,prerenderFrame:o?o.get():null}).then((function(e){var n=e.container,r=t.renderTemplate(t.component.containerTemplate,{context:i,uid:a,container:n,frame:e.frame,prerenderFrame:e.prerenderFrame,doc:document});if(r)return s||Ie(r),be(n,r),t.clean.register((),t.proxyContainer=et(r),et(r)}))},n.destroy=function(e,n){var t=this;return void 0===n&&(n=!0),h.try((function(){return e||(n=!1,e=new Error("Component destroyed")),t.component.log("destroy"),t.onError(e,n)})).then(()},n.onError=function(e,n){var t=this;return void 0===n&&(n=!0),h.try((function(){if(-1===t.handledErrors.indexOf(e))return t.handledErrors.push(e),t.initPromise.asyncReject(e),n?t.event.trigger(ct.ERROR,e):void 0}))},n.openBridge=function(e,n,t){var r=this;return h.try((function(){return e.awaitWindow()})).then((function(e){if(Gn&&Gn.needsBridge({win:e,domain:n})&&!Gn.hasBridge(n,n)){var o=r.component.getBridgeUrl();if(!o)throw new Error("Bridge needed to render "+t);var i=U(o);return Gn.linkUrl(e,n),Gn.openBridge(J(o),i)}}))},e}(),gt=function(){function e(e,n,t){var r=this;this.component=void 0,this.source=void 0,this.context=void 0,this.driver=void 0,this.props=void 0,this.clean=void 0,this.focus=void 0,this.resize=void 0,this.renderTemplate=void 0,this.close=void 0,this.onError=void 0,this.event=void 0,this.component=e,this.context=t.context,this.driver=pt[t.context],this.clean=pe(this),this.focus=mt.prototype.focus,this.resize=mt.prototype.resize,this.renderTemplate=mt.prototype.renderTemplate,this.props={};for(var o=0,i=Object.keys(t.props);o<i.length;o++){var a=i[o],s=this.component.getPropDefinition(a);s&&s.allowDelegate&&t.props[a]&&(this.props[a]=t.props[a])}this.close=t.overrides.close,this.onError=t.overrides.onError,this.event=t.overrides.event,this.component.registerActiveComponent(this),this.clean.register((),this.watchForSourceClose(n)}var n=e.prototype;return n.getDelegate=function(){var e=this;return{overrides:this.getOverrides(),destroy:function(){return e.destroy()}}},n.watchForSourceClose=function(e){var n=this,t=q(e,(function(){return n.destroy()}),3e3);this.clean.register(t.cancel)},n.getOverrides=function(){for(var e={},n=this,t=function(t,r){var o=r[t];e[o]=e[o].__name__=o},r=0,o=this.driver.delegate;r<o.length;r++)t(r,o);return e},n.destroy=e}(),yt={VISIBLE:"visible",INVISIBLE:"invisible"};function Et(e){var n=e.uid,t=e.frame,r=e.prerenderFrame,o=e.doc,i=e.props,a=e.event,s=e.dimensions,u=s.width,c=s.height;if(t&&r){var d=o.createElement("div");d.setAttribute("id",n);var f=o.createElement("style");return i.cspNonce&&f.setAttribute("nonce",i.cspNonce),f.appendChild(o.createTextNode("\n            #"+n+" {\n                display: inline-block;\n                position: relative;\n                width: "+u+";\n                height: "+c+";\n            }\n\n            #"+n+" > iframe {\n                display: inline-block;\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                transition: opacity .2s ease-in-out;\n            }\n\n            #"+n+" > iframe."+yt.INVISIBLE+" {\n                opacity: 0;\n            }\n\n            #"+n+" > iframe."+yt.VISIBLE+" {\n                opacity: 1;\n        }\n        ")),d.appendChild(t),d.appendChild(r),d.appendChild(f),r.classList.add(yt.VISIBLE),t.classList.add(yt.INVISIBLE),a.on(ct.RENDERED,(function(){r.classList.remove(yt.VISIBLE),r.classList.add(yt.INVISIBLE),t.classList.remove(yt.INVISIBLE),t.classList.add(yt.VISIBLE),setTimeout((,1)})),a.on(ct.RESIZE,(),d}}ar _t=function(){return oe},Pt=function(e){return ie(e.value)},xt=function(){function e(e){this.tag=void 0,this.name=void 0,this.url=void 0,this.domain=void 0,this.bridgeUrl=void 0,this.props=void 0,this.builtinProps=void 0,this.dimensions=void 0,this.autoResize=void 0,this.allowedParentDomains=void 0,this.defaultContext=void 0,this.attributes=void 0,this.containerTemplate=void 0,this.prerenderTemplate=void 0,this.validate=void 0,this.driverCache=void 0,this.xprops=void 0,this.logger=void 0,this.propNames=void 0,function(e){if(!e)throw new Error("Expected options to be passed");if(!e.tag||!e.tag.match(/^([a-z0-9][a-z0-9-]*)+[a-z0-9]+$/))throw new Error("Invalid options.tag: "+e.tag);if(function(e){if(e.props&&"object"!=typeof e.props)throw new Error("Expected options.props to be an object");var n=ot);if(e.props)for(var t=0,r=Object.keys(e.props);t<r.length;t++){var o=r[t],i=e.props[o];if(!i||"object"!=typeof i)throw new Error("Expected options.props."+o+" to be an object");if(!i.type)throw new Error("Expected prop.type");if(-1===n.indexOf(i.type))throw new Error("Expected prop.type to be one of "+n.join(", "));if(i.required&&i.default)throw new Error("Required prop can not have a default value");if(i.type===ot.FUNCTION&&i.queryParam&&!i.queryValue)throw new Error("Do not pass queryParam for function prop")}}(e),e.dimensions){if(e.dimensions&&!Fe(e.dimensions.width)&&!ke(e.dimensions.width))throw new Error("Expected options.dimensions.width to be a px or % string value");if(e.dimensions&&!Fe(e.dimensions.height)&&!ke(e.dimensions.height))throw new Error("Expected options.dimensions.height to be a px or % string value")}if(e.defaultContext&&e.defaultContext!==at.IFRAME&&e.defaultContext!==at.POPUP)throw new Error("Unsupported context type: "+(e.defaultContext||"unknown"));if(!e.url)throw new Error("Must pass url");if("string"!=typeof e.url&&"function"!=typeof e.url)throw new TypeError("Expected url to be string or function");if(e.prerenderTemplate&&"function"!=typeof e.prerenderTemplate)throw new Error("Expected options.prerenderTemplate to be a function");if(e.containerTemplate&&"function"!=typeof e.containerTemplate)throw new Error("Expected options.containerTemplate to be a function")}(e),this.tag=e.tag,this.name=this.tag.replace(/-/g,"_"),this.allowedParentDomains=e.allowedParentDomains||st;var n=Qn();if(n.components=n.components||{},n.components[this.tag])throw new Error("Can not register multiple components with the same tag: "+this.tag);this.builtinProps={window:{type:"object",sendToChild:!1,required:!1,allowDelegate:!0,validate:decorate:,timeout:{type:"number",required:!1,sendToChild:!1},close:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.close}},focus:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.focus}},resize:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.resize}},cspNonce:{type:"string",required:!1},getParent:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.getParent}},getParentDomain:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.getParentDomain}},show:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.show}},hide:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.hide}},onDisplay:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:_t,decorate:Pt},onRendered:{type:"function",required:!1,sendToChild:!1,default:_t,decorate:Pt},onRender:{type:"function",required:!1,sendToChild:!1,default:_t,decorate:Pt},onClose:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:_t,decorate:Pt},onResize:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:_t},onFocus:{type:"function",required:!1,sendToChild:!1,allowDelegate:!0,default:_t},onError:{type:"function",required:!1,sendToChild:!1,childDecorate:function(e){return e.onError}},onProps:{type:"function",required:!1,sendToChild:!1,default:_t,childDecorate:function(e){return e.onProps}}},this.props=e.props||{};var t=e.dimensions||{},r=t.width,o=t.height;this.dimensions={width:void 0===r?ut.WIDTH:r,height:void 0===o?ut.HEIGHT:o},this.url=e.url,this.domain=e.domain,this.bridgeUrl=e.bridgeUrl,this.attributes=e.attributes||{},this.attributes.iframe=this.attributes.iframe||{},this.attributes.popup=this.attributes.popup||{},this.defaultContext=e.defaultContext||at.IFRAME,this.autoResize=e.autoResize,this.containerTemplate=e.containerTemplate?e.containerTemplate:Et,this.prerenderTemplate=e.prerenderTemplate?e.prerenderTemplate:bt,this.validate=e.validate,this.logger=e.logger||{debug:oe,info:oe,warn:oe,error:oe},this.registerChild(),this.listenDelegate(),n.components[this.tag]=this}var n=e.prototype;return n.getPropNames=function(){if(this.propNames)return this.propNames;for(var e=Object.keys(this.props),n=0,t=Object.keys(this.builtinProps);n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}return this.propNames=e,e},n.getPropDefinition=n.driver=n.registerChild=function(){if(this.isChild()){if(window.xprops)throw new Error("Can not register "+this.name+" as child - can not attach multiple components to the same window");var e=new lt(this);window.xprops=this.xprops=e.getProps()}},n.listenDelegate=function(){var e=this;Yn(rt+"_"+this.name,(function(){return!0})),Yn(tt+"_"+this.name,(function(n){var t=n.data;return new gt(e,n.source,{context:t.context,props:t.props,overrides:t.overrides}).getDelegate()}))},n.canRenderTo=function(e){return Vn(e,rt+"_"+this.name).then(().catch(()},n.getUrl=function(e){return"function"==typeof this.url?this.url({props:e}):this.url},n.getChildDomain=function(e){return this.domain&&"string"==typeof this.domain?this.domain:U(this.getUrl(e))},n.getDomain=function(e){return this.domain&&he(this.domain)?this.domain:this.getChildDomain(e)},n.getBridgeUrl=n.isChild=function(){var e=ht();return Boolean(e&&e.tag===this.tag&&e.childDomain===P())},n.getDefaultContainer=n.getDefaultContext=function(e,n){var t=this;return h.try((function(){if(n.window)return Kn(n.window).getType();if(e){if(e!==at.IFRAME&&e!==at.POPUP)throw new Error("Unrecognized context: "+e);return e}return t.defaultContext}))},n.init=function(e){var n=this,t=new mt(this,e=e||{}),o=function(r,o,i){return h.try((function(){if(!H(r))throw new Error("Must pass window to renderTo");return n.getDefaultContext(i,e)})).then((function(e){return o=n.getDefaultContainer(e,o),t.render(r,o,e)}))};return r({},t.getHelpers(),{render:renderTo:)},n.checkAllowRender=n.log=function(e,n){this.logger.info(this.name+"_"+e,n)},n.registerActiveComponent=function(e){var n=Qn();n.activeComponents=n.activeComponents||[],n.activeComponents.push(e)},n.destroyActiveComponent=function(e){var n=Qn();n.activeComponents=n.activeComponents||[],n.activeComponents.splice(n.activeComponents.indexOf(e),1)},e}();function Ct(e){var n,t,r,o;Ye().initialized||(Ye().initialized=!0,t=(n={on:Yn,send:Vn}).on,r=n.send,(o=Ye()).receiveMessage=o.receiveMessage||function(e){var n=e.on,t=e.send;Ve().getOrSet("postMessageListener",(function(){return Ne(window,"message",(function(e){!function(e,n){var t=n.on,r=n.send,o=e.source||e.sourceElement,i=e.origin||e.originalEvent&&e.originalEvent.origin,a=e.data;if("null"===i&&(i=p.FILE+"//"),o){if(!i)throw new Error("Post message did not have origin domain");Jn({source:o,origin:i,data:a},{on:t,send:r})}}(e,{on:n,send:t})}))}))}({on:Yn,send:Vn}),Wn({on:Yn,send:Vn,receiveMessage:Jn}),function(e){var n=e.on,t=e.send;Ve("builtinListeners").getOrSet("helloListener",(function(){var e=n(Ue.HELLO,{domain:He},(),r=F();return r&&en(r,{send:t}).catch(oe),e}))}({on:Yn,send:Vn}));var i=new xt(e),a=function(e){return i.init(e)};return a.driver=a.isChild=a.canRenderTo=a.xprops=i.xprops,a}function Ot(){Gn&&Gn.destroyBridges();var e=[],n=Qn();for(n.activeComponents=n.activeComponents||[];n.activeComponents.length;)e.push(n.activeComponents[0].destroy(new Error("zoid destroyed all"),!1));return h.all(e).then(oe)}var Wt=Ot;function Dt(){var e;Ot(),delete window.__zoid_9_0_35__,),(e=Ve().get("postMessageListener"))&&e.cancel(),delete window.__post_robot_10_0_27__}t.d(n,"PopupOpenError",(function(){return Ce})),t.d(n,"create",(function(){return Ct})),t.d(n,"destroy",(function(){return Dt})),t.d(n,"destroyComponents",(function(){return Wt})),t.d(n,"destroyAll",(function(){return Ot})),t.d(n,"Component",(function(){return xt})),t.d(n,"PROP_TYPE",(function(){return ot})),t.d(n,"PROP_SERIALIZATION",(function(){return it})),t.d(n,"CONTEXT",(function(){return at})),t.d(n,"EVENT",()}])}));
//# sourceMappingURL=zoid.min.js.map