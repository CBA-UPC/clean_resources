"use strict";(self.webpackChunkphotobucket_web=self.webpackChunkphotobucket_web||[]).push([[5330],{55127:function(e,t,i){i.d(t,{Z:function(){return o}});var r=i(99881),n=i(46417);function o(e){return(0,n.jsx)(r.Z,{"data-test":"alert",elevation:6,variant:"filled",severity:e.severity,sx:{marginBottom:"12px",zIndex:100},children:e.children})}},65079:function(e,t,i){i.d(t,{Z:function(){return l}});var r=i(16031),n=i(55127),o=i(46417);function l(e){var t=e.error;if(!t)return null;var i=t.networkError,l=t.graphQLErrors;return(0,r.isEmpty)(l)?i?(0,o.jsx)(n.Z,{severity:"error",children:i.message}):null!==t&&void 0!==t&&t.networkError?(0,o.jsxs)(n.Z,{severity:"error",children:["Network Error: ",t.networkError.message]}):null:(0,o.jsx)(o.Fragment,{children:t.graphQLErrors.map((function(e){return(0,o.jsx)(n.Z,{severity:"error",children:e.message},"".concat(e.name,"-").concat(e.path))}))})}l.defaultProps={error:void 0}},50102:function(e,t,i){i.d(t,{Z:function(){return p}});var r=i(29439),n=i(61689),o=i(24193),l=i(16783),a=i(47313),s=i(58467),d=i(65079),u=i(80526),c=i(71675),h=i(46417);function p(e){var t=e.parentAlbumId,i=e.onClose,p=(0,c.Z)(),m=p.restrictions,f=p.tooltipTitle,x=(0,u.Z)(),v=x.disabled,b=x.mutation,g=x.results,Z=(0,a.useState)(),j=(0,r.Z)(Z,2),y=j[0],w=j[1],k=(0,a.useState)(),C=(0,r.Z)(k,2),T=C[0],S=C[1],D=(0,s.UO)().bucketId,z=m.modifyAlbums,A=!1===z&&!1===v,I=v?"Your viewer role for this bucket does not allow you to create albums.":f("modifyAlbums"),P=function(e){(null===e||void 0===e||e.preventDefault(),D&&y)&&(b({variables:{bucketId:D,data:{title:y,parentId:t}}}),i())};return(0,h.jsxs)("form",{onSubmit:P,children:[(0,h.jsx)(d.Z,{error:g.error}),(0,h.jsx)(n.Z,{PopperProps:{disablePortal:A},disableFocusListener:A,disableHoverListener:A,disableTouchListener:A,title:f,children:(0,h.jsx)(l.Z,{autoFocus:!0,inputProps:{"data-test":"create-album-title"},error:!!T,disabled:z,fullWidth:!0,label:"Album Name",margin:"normal",name:"title",placeholder:"Album Title",required:!0,onChange:value:null!==y&&void 0!==y?y:""})}),(0,h.jsx)(n.Z,{PopperProps:{disablePortal:A},disableFocusListener:A,disableHoverListener:A,disableTouchListener:A,title:I,children:(0,h.jsx)(o.Z,{color:"primary",disabled:v,variant:"contained",onClick:P,type:"submit","data-test":"submit-create-album",children:"Create Album"})}),(0,h.jsx)(o.Z,{onClick:i,children:"Cancel"})]})}},33317:function(e,t,i){var r=i(47131),n=i(17592);t.Z=(0,n.ZP)(r.Z,{shouldForwardProp:)((function(e){var t=e.isActive;return{position:"absolute",color:e.theme.palette.primary.contrastText,backgroundColor:"rgba(71,85,105,0.5)",padding:"2px",display:t?"inline-flex":"none","&:hover":{display:"inline-flex"}}}))},91443:function(e,t,i){i.d(t,{Z:function(){return p}});var r=i(29439),n=i(91554),o=i(17592),l=i(61113),a=i(16031),s=i(47313),d=i(15919),u=i(12990),c=i(46417),h=(0,o.ZP)(n.Z)((function(e){return{position:"absolute",width:"100%",color:"#fff",zIndex:e.theme.zIndex.drawer-1,alignItems:"baseline"}}));function p(){var e,t=(0,u.Z)().bucketUser,i=(0,d.Z)().uploadMultiple,n=!(null!==t&&void 0!==t&&null!==(e=t.permissions)&&void 0!==e&&e.mediaCreate),o=n?"You do not have permission to upload media.":"Drop your media here",p=(0,s.useRef)(null),m=(0,s.useState)(!1),f=(0,r.Z)(m,2),x=f[0],v=f[1];return(0,s.useEffect)((function(){var e,t=null===(e=p.current)||void 0===e?void 0:e.parentElement;if(!t)return var r=function(e){var t;e.preventDefault(),e.stopPropagation(),null!==(t=e.dataTransfer)&&void 0!==t&&t.types&&e.dataTransfer.types.includes("Files")&&v(!0)},o=l=function(e){var t;e.preventDefault(),e.stopPropagation(),v(!1);var r=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;n||!r||(0,a.isEmpty)(r)||i(r)};return t.addEventListener("dragover",r),t.addEventListener("drop",l),t.addEventListener("dragleave",o),),[i,n]),(0,c.jsx)(h,{ref:p,open:x,children:(0,c.jsx)(l.Z,{variant:"h4",align:"center",sx:{position:"sticky",top:100,fontWeight:600},children:o})})}p.defaultProps={albumId:void 0}},44368:function(e,t,i){var r=i(85281),n=i(16031),o=i(47313),l=i(7564),a=i(46417);function s(e){var t=e.id,i=(0,l.Z)().uploadsInProgress.get(t);return"IN_PROGRESS"===i||(0,n.isNumber)(i)?(0,a.jsx)(r.Z,{size:20,sx:{position:"absolute",bottom:8,right:12}}):null}t.Z=(0,o.memo)(s)},4176:function(e,t,i){i.d(t,{Z:function(){return Qe}});var r=i(90297),n=i(17592),o=i(65033),l=i(57829),a=i(42832),s=i(84488),d=i(57451),u=i(66212),c=i(61113),h=i(9289),p=i(20201),m=i(47313),f=i(91345),x=i(15861),v=i(1413),b=i(29439),g=i(64687),Z=i.n(g),j=i(61511),y=i(24193),w=i(66149),k=i(4117),C=i(96467),T=i(16783),S=i(58467),D=i(51748),z=i(28422),A=i(20096),I=i(45197),P=i(12990),M=i(46417),B=(0,n.ZP)(c.Z)((function(e){return{"& :hover":{color:e.theme.palette.primary.main,cursor:"pointer"}}}));function E(e){var t=e.open,i=e.handleClose,r=e.album,n=(0,A.Z)().mutation,o=(0,m.useState)({}),l=(0,b.Z)(o,2),a=l[0],s=l[1],d=(0,m.useState)({}),u=(0,b.Z)(d,2),c=u[0],h=u[1],p=null===r||void 0===r?void 0:r.title;(0,m.useEffect)((,[p]);var f=function(){var e=(0,x.Z)(Z().mark((function e(){var t;return Z().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==r&&void 0!==r&&r.id){e.next=2;break}throw new Error("Unable to determine album id");case 2:if(a.title){e.next=4;break}throw new D.Z("Title is required","title");case 4:t={albumId:r.id,bucketId:r.bucketId,data:a},n({variables:t}),i();case 7:case"end":return e.stop()}}),e)})));return ();return r?(0,M.jsxs)(w.Z,{open:t,onClose:i,children:[(0,M.jsx)(C.Z,{children:(0,M.jsx)(T.Z,{autoFocus:!0,"data-test":"title",error:Boolean(c.title),helperText:c.title,label:"Album Title",margin:"normal",name:"title",onChange:function(e){var t=(0,v.Z)({},a),i=e.target.name;t[i]=e.target.value,s(t);var r=(0,v.Z)({},c);delete r[i],delete r.general,h(r)},required:!0,size:"small",value:a.title||""})}),(0,M.jsxs)(k.Z,{children:[(0,M.jsx)(y.Z,{size:"small",onClick:i,children:"Cancel"}),(0,M.jsx)(y.Z,{color:"primary",size:"small",onClick:f,"data-test":"save",children:"Save"})]})]}):null}function L(e){var t,i=e.title,r=e.isEditDisabled,n=(0,m.useState)(!1),o=(0,b.Z)(n,2),l=o[0],a=o[1],s=(0,P.Z)().bucketUser,d=(0,S.UO)().albumId,u=(0,j.x)().readFragment({id:"BucketAlbum:".concat(d),fragment:z.HOg}),h=!(null!==s&&void 0!==s&&null!==(t=s.permissions)&&void 0!==t&&t.albumUpdate);return i?(0,M.jsxs)(M.Fragment,{children:[r||h?(0,M.jsx)(c.Z,{variant:"h6",sx:{fontSize:{xs:"1rem",sm:"1.25rem"},lineHeight:"1.2",fontWeight:500,maxWidth:{xs:"200px",sm:"300px",md:"500px",lg:"550px",xl:"100%"},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i}):(0,M.jsx)(B,{variant:"h6",onClick:sx:{fontSize:{xs:"0.875rem",sm:"1rem",md:"1.25rem"},lineHeight:"1.2",fontWeight:500,maxWidth:{xs:"200px",sm:"300px",md:"500px",lg:"550px",xl:"100%"},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"pointer","&:hover":{color:I.Z.palette.secondary.main,backgroundColor:I.Z.palette.primary.highlight}},children:i}),(0,M.jsx)(E,{open:l,handleClose:album:u})]}):null}var U=i(61689),F=i(70024),R=i(4906),V=i(46663),W=(0,R.Z)(F.Z)((function(e){var t=e.theme;return{width:62,height:38,padding:7,"& .MuiSwitch-switchBase":{margin:1,padding:0,transform:"translateX(6px)","&.Mui-checked":{color:t.palette.primary.contrastText,transform:"translateX(22px)","& .MuiSwitch-thumb:before":{backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="25" viewBox="0 0 20 20"><path fill="'.concat(encodeURIComponent(t.palette.primary.contrastText),'" d="M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z"/></svg>\')')},"& + .MuiSwitch-track":{opacity:1,backgroundColor:t.palette.primary.highlight}}},"& .MuiSwitch-thumb":{backgroundColor:t.palette.secondary.main,width:35,height:35,"&:before":{content:"''",position:"absolute",width:"100%",height:"100%",left:-2,top:-2,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundImage:'url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" height="20" width="25" viewBox="0 0 20 20"><path fill="'.concat(encodeURIComponent(t.palette.primary.contrastText),'" d="M17 4h3c1.1 0 2 .9 2 2v2h-2V6h-3V4zM4 8V6h3V4H4c-1.1 0-2 .9-2 2v2h2zm16 8v2h-3v2h3c1.1 0 2-.9 2-2v-2h-2zM7 18H4v-2H2v2c0 1.1.9 2 2 2h3v-2zM18 8H6v8h12V8z"/></svg>\')')}},"& .MuiSwitch-track":{opacity:1,backgroundColor:t.palette.primary.highlight,borderRadius:10}}}));function O(e){var t=e.hidden,i=(0,V.Z)(),r=i.settings,n=i.updateSettings,o=!!r.cropMode;return t?null:(0,M.jsx)(U.Z,{title:"Crop Mode: ".concat(o?"Original":"Boxed"),arrow:!0,children:(0,M.jsx)(W,{checked:o,"data-test":"crop-mode",onClick:function(){n({cropMode:!o},{suppressAlerts:!0})}})})}O.defaultProps={hidden:!1};var H=i(70816),G=i.n(H),Q=function(e,t){if(!e.length&&!t.length)return"";var i=G()(e),r=G()(t);if(!i.isValid()&&r.isValid())return r.format("ll");if(!r.isValid()&&i.isValid())return i.format("ll");var n=i.year()===r.year(),o=i.month()===r.month(),l=i.day()===r.day();if(n&&o&&l)return i.format("ll");if(n&&o){var a=i.format("MMM");return"".concat(a," ").concat(i.format("DD")," - ").concat(a," ").concat(r.endOf("week").format("DD"),", ").concat(i.year())}return n?"".concat(i.format("MMM")," ").concat(i.format("D")," - ").concat(r.format("MMM")," ").concat(r.format("D"),", ").concat(i.year()):"".concat(i.format("ll")," - ").concat(r.format("ll"))};function N(){var e=(0,r.l)(f.eG),t=(0,p.Z)();return e.startDate&&e.endDate?(0,M.jsx)(c.Z,{sx:{opacity:.7,background:t.palette.primary.contrastText,paddingTop:0,paddingBottom:0,paddingLeft:"10px",fontSize:{xs:"0.875rem",md:"1rem"}},children:Q(e.startDate,e.endDate)}):null}var Y=i(4942),_=i(68728),q=i(1567),X=i(19536),K=i(85582),J=i(51405),$=(0,n.ZP)(c.Z)((),ee=(0,n.ZP)(y.Z)((function(e){var t=e.theme;return(0,Y.Z)({padding:"6px 8px",minWidth:"auto"},t.breakpoints.down("md"),{borderColor:"transparent"})}));function te(e){var t=e.isDisabled,i=(0,m.useState)(null),r=(0,b.Z)(i,2),n=r[0],o=r[1],a=(0,V.Z)(),s=a.loading,d=a.settings,u=a.updateSettings,c=(0,P.Z)().bucket,h=(null!==c&&void 0!==c?c:{}).bucketType,p=d.filterBy,f=x=function(e){return function(){u({filterBy:(0,v.Z)((0,v.Z)({},p),{},{mediaType:e})},{refetchAlbumsandUsers:!0,suppressAlerts:!0}),f()}};return(0,M.jsxs)(l.Z,{sx:{alignSelf:"center"},children:[(0,M.jsx)(ee,{"aria-label":"Filter",color:"secondary",onClick:function(e){o(e.currentTarget)},"data-test":"filter",size:"large",disabled:t,id:"filter-items",variant:"outlined",children:(0,M.jsx)(q.Z,{})}),(0,M.jsxs)(K.Z,{anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:f,"data-test":"filter-menu",children:[(0,M.jsxs)(J.Z,{"data-test":"filter-all",disabled:s,id:"filter-all",onClick:function(){u({filterBy:(0,v.Z)((0,v.Z)({},p),{},{mediaType:null})},{refetchAlbumsandUsers:!0,suppressAlerts:!0}),f()},children:[null!==p&&void 0!==p&&p.mediaType?(0,M.jsx)(l.Z,{sx:{width:"24px",height:"24px"}}):(0,M.jsx)(_.Z,{}),(0,M.jsx)($,{variant:"subtitle2",children:"All Media"})]}),(0,M.jsx)(X.Z,{}),(0,M.jsxs)(J.Z,{"data-test":"filter-photos",disabled:s,id:"filter-photos",onClick:x(z.QVS.Image),children:[(null===p||void 0===p?void 0:p.mediaType)===z.QVS.Image?(0,M.jsx)(_.Z,{}):(0,M.jsx)(l.Z,{sx:{width:"24px",height:"24px"}}),(0,M.jsx)($,{variant:"subtitle2",sx:{marginLeft:"2px"},children:"Photos"})]}),(0,M.jsxs)(J.Z,{"data-test":"filter-videos",disabled:s,id:"filter-videos",onClick:x(z.QVS.Video),children:[(null===p||void 0===p?void 0:p.mediaType)===z.QVS.Video?(0,M.jsx)(_.Z,{}):(0,M.jsx)(l.Z,{sx:{width:"24px",height:"24px"}}),(0,M.jsx)($,{variant:"subtitle2",children:"Videos"})]}),(0,M.jsxs)(J.Z,{"data-test":"filter-favorites",disabled:s,id:"filter-favorites",onClick:function(){u({filterBy:(0,v.Z)((0,v.Z)({},p),{},{isFavorite:!(null!==p&&void 0!==p&&p.isFavorite)})},{refetchAlbumsandUsers:!0,suppressAlerts:!0}),f()},children:[null!==p&&void 0!==p&&p.isFavorite?(0,M.jsx)(_.Z,{}):(0,M.jsx)(l.Z,{sx:{width:"24px",height:"24px"}}),(0,M.jsx)($,{variant:"subtitle2",children:"Favorites"})]}),(0,M.jsx)(X.Z,{}),h===z.alV.Group&&(0,M.jsxs)(J.Z,{"data-test":"filter-sharedBy",disabled:s,id:"filter-sharedBy",onClick:function(){u({filterBy:(0,v.Z)((0,v.Z)({},p),{},{owner:null!==p&&void 0!==p&&p.owner?null:z.ccY.Me})},{refetchAlbumsandUsers:!0,suppressAlerts:!0}),f()},children:[null!==p&&void 0!==p&&p.owner?(0,M.jsx)(l.Z,{sx:{width:"24px",height:"24px"}}):(0,M.jsx)(_.Z,{}),(0,M.jsx)($,{variant:"subtitle2",children:"Shared by Others"})]}),h===z.alV.Mybucket&&(0,M.jsxs)(J.Z,{"data-test":"filter-mobile-uploads",disabled:s,id:"filter-mobile-uploads",onClick:function(){var e=(null!==p&&void 0!==p?p:{}).source;e=e&&e!==z.v0u.Web?null:z.v0u.Mobile,u({filterBy:(0,v.Z)((0,v.Z)({},p),{},{source:e})},{suppressAlerts:!0}),f()},children:[(null===p||void 0===p?void 0:p.source)===z.v0u.Mobile?(0,M.jsx)(_.Z,{}):(0,M.jsx)(l.Z,{sx:{width:"24px",height:"24px"}}),(0,M.jsx)($,{variant:"subtitle2",children:"Mobile Uploads"})]})]})]})}te.defaultProps={isDisabled:!1};var ie=i(72668),re=i(93567),ne=i(64516),oe=i(19860),le=i(9019),ae=i(33604),se=i(47131),de=i(24929),ue=i(16031),ce=i(15186),he=i(25258),pe=i(80082),me=i(62606),fe=i(50102);function xe(e){var t=e.item,i=e.boundary,r=(0,me.Z)(t,320);return(0,M.jsx)("img",{src:r,alt:t.originalFilename,style:{width:i,height:i,objectFit:"cover"}},t.id)}function ve(e){var t,i,r,n=e.album,o=e.subalbumCount,a=e.handleClose,s=(0,oe.Z)(),d=(0,S.s0)(),u=(0,ce.Z)(),h=(0,b.Z)(u,2),p=h[0],m=h[1].width,f=n.thumbnails||[],x=1===(null===(t=n.counters)||void 0===t?void 0:t.totalMedia)?"item":"items",v=1===n.subAlbumCount?"album":"albums",g=4,Z=6;return 1===o&&(g=12,Z=12),2===o&&(g=6,Z=12),(0,M.jsx)(le.ZP,{item:!0,sm:g,xs:Z,children:(0,M.jsxs)(l.Z,{ref:p,sx:{cursor:"pointer",borderWidth:1,borderColor:s.palette.customGrey[400],borderStyle:"solid"},onClick:(r=n.id,function(){a(),d("/bucket/".concat(n.bucketId,"/album/").concat(r))}),children:[(0,M.jsxs)(l.Z,{sx:{display:"flex",flexWrap:"wrap",height:m,width:m,marginBottom:1},children:[!f.length&&(0,M.jsx)(l.Z,{sx:{cursor:"pointer",background:de.Z[200],width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,M.jsx)(re.Z,{})}),f.length>0&&f.length<4&&(0,M.jsx)(xe,{item:f[0],boundary:"100%"}),f.length>=4&&f.map((function(e){return(0,M.jsx)(xe,{item:e,boundary:"50%"},null===e||void 0===e?void 0:e.id)}))]}),(0,M.jsxs)(l.Z,{sx:{padding:1},children:[(0,M.jsx)(c.Z,{variant:"subtitle1",style:{fontWeight:500,maxWidth:"200px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},children:n.title}),(0,M.jsxs)(c.Z,{variant:"caption",sx:{marginRight:1},children:[null===(i=n.counters)||void 0===i?void 0:i.totalMedia," ",x]}),(0,M.jsxs)(c.Z,{variant:"caption",children:["\u2022 ",n.subAlbumCount||0," ",v]})]})]})})}function be(){var e,t,i,r,n=(0,P.Z)().bucketUser,l=(0,pe.Z)().createAlert,a=(0,S.UO)(),s=a.bucketId,d=a.albumId,h=(0,m.useState)(!1),p=(0,b.Z)(h,2),f=p[0],x=p[1],v=(0,m.useState)(null),g=(0,b.Z)(v,2),Z=g[0],j=g[1],y={bucketId:s};d&&(y.albumId=d);var k=(0,ie.a)(z.Ug4,{variables:y,onError:),T=null===(e=k.data)||void 0===e||null===(t=e.bucketAlbums)||void 0===t?void 0:t.items,D=(0,ue.sortBy)(T,"title"),A=(0,ue.groupBy)(D,(),I=d||s,B=1===D.length?"Album":"Albums",E=D.length?"".concat(D.length," ").concat(B):"Create Album",L=!(null!==n&&void 0!==n&&null!==(i=n.permissions)&&void 0!==i&&i.albumCreate),F=!1===L;(0,m.useEffect)((function(){I&&!A[I]&&x(!0)}),[A,I]);var R=return I&&k.called&&!k.loading?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(U.Z,{PopperProps:{disablePortal:F},disableFocusListener:F,disableHoverListener:F,disableTouchListener:F,title:"Your viewer role for this bucket does not allow you to create albums.",children:(0,M.jsx)("div",{children:(0,M.jsx)(u.Z,{color:"primary",variant:"outlined",label:E,onClick:size:"small",disabled:L,"data-test":"chips-album-create",sx:{fontSize:{xs:"0.75rem",md:"0.8125rem"},height:{xs:"auto",md:"24px"}}})})}),(0,M.jsxs)(w.Z,{open:!!Z,onClose:R,children:[(0,M.jsxs)(ae.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,M.jsx)(c.Z,{variant:"body1",sx:{flex:1},children:"Albums"}),!f&&(0,M.jsx)(se.Z,{color:"primary",onClick:function(){return x(!0)},"data-test":"dialog-create-sub-album-add",children:(0,M.jsx)(U.Z,{title:"Add Album",children:(0,M.jsx)(ne.Z,{})})})]}),(0,M.jsxs)(C.Z,{sx:{padding:3,paddingTop:0},children:[(0,M.jsx)(o.Z,{in:f,sx:{paddingBottom:2},children:(0,M.jsx)(fe.Z,{parentAlbumId:I,onClose:function(){var e;I&&null!==(e=A[I])&&void 0!==e&&e.length||j(null),x(!1)}})}),(0,M.jsx)(le.ZP,{container:!0,spacing:1,children:null===(r=A[I])||void 0===r?void 0:r.map((function(e){return e?(0,M.jsx)(ve,{album:e,subalbumCount:(null===T||void 0===T?void 0:T.length)||0,handleClose:R},e.id):null}))})]})]})]}):null}var ge=i(57983),Ze=i(70306),je=i(48005),ye=i(47825),we=i(24813),ke=i(49924),Ce=(0,R.Z)("div")((function(e){return(0,Y.Z)({display:"flex",width:"125px",marginLeft:"8px",marginRight:"8px"},e.theme.breakpoints.only("lg"),{display:"none"})})),Te=(0,R.Z)(ye.Z)({width:"175px",display:"flex",justifyContent:"center",flexDirection:"row",flexShrink:0,alignItems:"center"});function Se(e){var t=e.isDisabled,i=(0,V.Z)(),r=i.settings,n=i.updateSettings,o=(0,m.useState)(11-r.zoom),l=(0,b.Z)(o,2),a=l[0],s=l[1],d=(0,m.useState)(null),u=(0,b.Z)(d,2),c=u[0],h=u[1],p=(0,we.Z)(I.Z.breakpoints.down("sm"));(0,m.useEffect)((function(){s(11-r.zoom)}),[r.zoom]);var f=function(e){h(c?null:e.currentTarget)},x=function(e){s(e),n({zoom:11-e},{suppressAlerts:!0})},v=function(){10!==a&&x(a+1)},g=Z=function(e,t){(0,ue.isArray)(t)||s(t)},j=function(e,t){(0,ue.isArray)(t)||n({zoom:11-t},{suppressAlerts:!0})};return p?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(se.Z,{color:"secondary",title:"Zoom Out","data-test":"zoom-out",onClick:f,disabled:t,size:"large",id:"zoom-in-out",children:(0,M.jsx)(ge.Z,{})}),(0,M.jsx)(K.Z,{sx:{px:2},id:"basic-menu",anchorEl:c,open:!!c,onClose:f,MenuListProps:{"aria-labelledby":"basic-button"},children:(0,M.jsxs)(Te,{disableGutters:!0,children:[(0,M.jsx)(se.Z,{color:"secondary",title:"Zoom Out","data-test":"zoom-out",onClick:g,disabled:t||1===a,size:"large",children:(0,M.jsx)(je.Z,{})}),(0,M.jsx)(ke.ZP,{min:1,max:10,value:a,onChangeCommitted:j,onChange:Z,"data-test":"size-slider",disabled:t,color:"secondary"}),(0,M.jsx)(se.Z,{color:"secondary",title:"Zoom In","data-test":"zoom-in",onClick:v,disabled:t||10===a,size:"large",children:(0,M.jsx)(Ze.Z,{})})]})})]}):(0,M.jsxs)("div",{style:{display:"flex",alignItems:"center"},id:"zoom-in-out",children:[(0,M.jsx)(se.Z,{color:"secondary",title:"Zoom Out","data-test":"zoom-out",onClick:g,disabled:t||1===a,size:"large",children:(0,M.jsx)(je.Z,{})}),(0,M.jsx)(Ce,{children:(0,M.jsx)(ke.ZP,{min:1,max:10,value:a,onChangeCommitted:j,onChange:Z,"data-test":"size-slider","aria-label":"zoom",disabled:t,color:"secondary"})}),(0,M.jsx)(se.Z,{color:"secondary",title:"Zoom In","data-test":"zoom-in",onClick:v,disabled:t||10===a,size:"large",children:(0,M.jsx)(Ze.Z,{})})]})}Se.defaultProps={isDisabled:!1};var De=i(93433),ze=i(21168),Ae=i(43638),Ie=i(72445),Pe=i(40928),Me=i(73365),Be=i(70501),Ee=i(18765),Le=i(14560),Ue=i(71675),Fe=(0,n.ZP)(y.Z)((function(){return{textTransform:"none",borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:"none",paddingLeft:"10px",paddingRight:"10px",minWidth:0,"&:hover":{borderRight:"none"}}})),Re=(0,n.ZP)(y.Z)((function(e){var t=e.theme;return{backgroundColor:t.palette.secondary.main,borderTopLeftRadius:0,borderBottomLeftRadius:0,paddingLeft:"5px",paddingRight:"5px",minWidth:0,color:"#fff","&:hover":{backgroundColor:t.palette.primary.main}}})),Ve=[z.g7C.Date,z.g7C.DateTaken,z.g7C.Title],We=function(e){switch(e){case z.g7C.Date:return"Date Uploaded";case z.g7C.DateTaken:return"Date Taken";case z.g7C.Title:return"Title";default:return(0,ue.startCase)(String(e).toLowerCase().replace("_"," "))}};function Oe(){var e,t,i,r,n,o=(0,Ue.Z)(),l=o.restrictions,a=o.tooltipTitle,s=(0,V.Z)(),u=s.settings,c=s.updateSettings,h=(null===(e=u.sortBy)||void 0===e?void 0:e.order)===z.b4n.Desc,p=m.useState(!1),f=(0,b.Z)(p,2),x=f[0],v=f[1],g=m.useRef(null),Z=(t={},(0,Y.Z)(t,z.g7C.DateTaken,{hideTooltip:!0,disabled:!1,title:""}),(0,Y.Z)(t,z.g7C.Date,{hideTooltip:!l.sortByUploadDate,disabled:l.sortByUploadDate,title:a("sortByUploadDate")}),(0,Y.Z)(t,z.g7C.Title,{hideTooltip:!l.sortByTitle,disabled:l.sortByTitle,title:a("sortByTitle")}),t),j=y=w=function(e){"Tab"===e.key?(e.preventDefault(),j()):"Escape"===e.key&&j()},k=function(e){var t=e.field,i=e.order;return function(){var e,r,n,o,l={sortBy:{order:null!==(e=null!==i&&void 0!==i?i:null===(r=u.sortBy)||void 0===r?void 0:r.order)&&void 0!==e?e:z.b4n.Desc,field:null!==(n=null!==t&&void 0!==t?t:null===(o=u.sortBy)||void 0===o?void 0:o.field)&&void 0!==n?n:z.g7C.Date}};c(l,{suppressAlerts:!0}),j()}},C=h?Ae.Z:Ie.Z,T=null!==(i=u.sortBy)&&void 0!==i&&i.field?[u.sortBy.field].concat((0,De.Z)(Ve.filter((function(e){var t;return e!==(null===(t=u.sortBy)||void 0===t?void 0:t.field)})))):Ve;return(0,M.jsxs)("div",{style:{display:"flex",marginLeft:"5px"},children:[(0,M.jsxs)(Fe,{ref:g,color:"secondary","data-test":"sort-field",variant:"outlined","aria-label":"Sort Field",id:"bucket-gallery-sort-by-field","aria-controls":x?"composition-menu":void 0,"aria-expanded":x?"true":void 0,"aria-haspopup":"true",onClick:children:[(0,M.jsx)(d.Z,{lgDown:!0,children:We(null!==(r=null===(n=u.sortBy)||void 0===n?void 0:n.field)&&void 0!==r?r:z.g7C.Date)}),(0,M.jsx)(d.Z,{lgUp:!0,children:(0,M.jsx)(ze.Z,{})})]}),(0,M.jsx)(Re,{"data-test":"sort-order",color:"secondary",variant:"outlined","aria-label":"Sort order",id:"bucket-gallery-sort-by-order",onClick:k({order:function(){var e;return null!==(e=u.sortBy)&&void 0!==e&&e.order?u.sortBy.order===z.b4n.Asc?z.b4n.Desc:z.b4n.Asc:z.b4n.Desc}()}),children:(0,M.jsx)(C,{})}),(0,M.jsx)(Pe.Z,{open:x,anchorEl:g.current,role:void 0,placement:"bottom-start",transition:!0,disablePortal:!0,children:function(e){var t=e.TransitionProps,i=e.placement;return(0,M.jsx)(Me.Z,{in:null===t||void 0===t?void 0:t.in,onEnter:null===t||void 0===t?void 0:t.onEnter,onExited:null===t||void 0===t?void 0:t.onExited,style:{transformOrigin:"bottom-start"===i?"left top":"left bottom"},children:(0,M.jsx)(Be.Z,{children:(0,M.jsx)(Ee.Z,{onClickAway:y,children:(0,M.jsx)(Le.Z,{autoFocusItem:x,id:"composition-menu","aria-labelledby":"composition-button",onKeyDown:w,children:T.map((function(e){return(0,M.jsx)(U.Z,{PopperProps:{disablePortal:Z[e].hideTooltip},disableFocusListener:Z[e].hideTooltip,disableHoverListener:Z[e].hideTooltip,disableTouchListener:Z[e].hideTooltip,title:Z[e].title,children:(0,M.jsx)("div",{children:(0,M.jsx)(J.Z,{disabled:Z[e].disabled,onClick:k({field:e}),children:We(e)},e)})})}))})})})})}})]})}var He=(0,n.ZP)("div")(();function Ge(e){var t=e.title,i=e.mediaCount,n=e.bucketTitle,m=e.disableEditTitle,x=e.hideSubAlbumsChip,v=(0,p.Z)(),b=(0,r.l)(f.MD),g=1===i?"Item":"Items";return(0,M.jsxs)(He,{children:[(0,M.jsx)(o.Z,{appear:!1,in:"down"!==b,children:(0,M.jsxs)(h.Z,{disableGutters:!0,sx:{justifyContent:"space-between",alignItems:"center",padding:{xs:"2px 10px",sm:"0 10px"},backgroundColor:"dark"===v.palette.mode?"#121212":"#fff"},children:[(0,M.jsxs)(l.Z,{sx:{display:"flex",alignItems:"flex-start",flexDirection:{xs:"column",md:"column"},flexWrap:"nowrap",gap:"4px",flex:1},children:[(0,M.jsxs)(a.Z,{gap:"5px",flexDirection:{xs:"row",sm:"row"},alignItems:{xs:"flex-start",sm:"center"},flexWrap:"wrap",children:[!t&&(0,M.jsx)(s.Z,{width:200,height:"100%"}),t&&(0,M.jsx)(L,{isEditDisabled:m,title:t}),(0,M.jsxs)(a.Z,{flexDirection:"row",gap:"4px",children:[(0,M.jsx)(d.Z,{mdDown:!0,children:(0,M.jsx)(u.Z,{variant:"outlined",label:"".concat(i," ").concat(g),size:"small","data-test":"chips-item-count"})}),!x&&(0,M.jsx)(be,{})]})]}),n&&(0,M.jsx)(c.Z,{"data-test":"bucket-main-title",component:"span",sx:{lineHeight:"1.2",fontWeight:500,fontSize:"0.75rem",color:"#727C8C",maxWidth:{xs:"200px",sm:"300px",md:"100%"},overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:n})]}),(0,M.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center"},children:[(0,M.jsx)(Se,{}),(0,M.jsx)(Oe,{}),(0,M.jsx)(O,{}),(0,M.jsx)(te,{})]})]})}),(0,M.jsx)(N,{})]})}Ge.defaultProps={hideSubAlbumsChip:!1};var Qe=(0,m.memo)(Ge)},18140:function(e,t,i){i.d(t,{Z:function(){return a}});var r=i(61511),n=i(28422),o=i(62606),l=i(60250);function a(){var e=(0,r.x)(),t=(0,l.Z)().selectedMedia,i=return{getDragMedia:function(r,l){var a=function(i,r){var l=[];if(!r){var a=(0,o.Z)(i,320);return a&&l.push(a),l}for(var s=Array.from(t.keys());s.length;){var d=s.pop();if(d){var u=e.readFragment({id:"BucketMedia:".concat(d),fragment:n.ACw});if(u){var c=(0,o.Z)(u,320);c&&l.push(c)}}}return l}(r,l),s=document.createElement("div");return s.setAttribute("id","drag-image"),s.style.position="relative",a.forEach((function(e){var t=new Image(50,50);t.src=e,t.style.position="absolute",t.style.top="".concat(i(0,50),"px"),t.style.left="".concat(i(0,50),"px"),s.appendChild(t)})),document.body.appendChild(s),s},removeDragMedia:}},62606:function(e,t,i){i.d(t,{Z:);var r=i(36241);function n(e){var t,i,n,o,l,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;if(null!==e&&void 0!==e&&e.imageUrl){var s=null!==(t=e.width)&&void 0!==t?t:1/0,d={width:null!==(i=null===(n=e.width)||void 0===n?void 0:n.toString())&&void 0!==i?i:"590",height:null!==(o=null===(l=e.height)||void 0===l?void 0:l.toString())&&void 0!==o?o:"590",fit:"bounds"};if(a<=590&&s>=590&&(d.width="590",d.height="590"),a<=320&&s>=320&&(d.width="320",d.height="320"),!r.isMobile&&a>320&&s>=320){var u={width:"320",height:"320",fit:"bounds"},c=new URLSearchParams(u).toString(),h=new Image;h.src="".concat(e.imageUrl,"?").concat(c)}var p=new URLSearchParams(d).toString();return"".concat(e.imageUrl,"?").concat(p)}}}}]);